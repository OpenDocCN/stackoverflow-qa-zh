# StackOverflow 问答 12090000-12090999

# javascript - 在 jQuery $.ajaxSetup 中获取引用的元素

> ID：12090003
> 
> 赞同：0
> 
> 时间：2012-08-23T10:53:13.543
> 
> 标签：javascript, jquery, ajax

我正在构建一个框架，并且我想在进行 ajax 调用之前和之后单击按钮时为按钮编写一些通用函数。

我的问题是如何引用实际元素本身。

`$(this)`在这种情况下，我猜是指 xhr。

```
$.ajaxSetup({

    beforeSend : function(){
        $(this).css('cursor', 'wait');
        $(this).text('wait...');
    },

    error : function(){
        $(this).css('cursor', 'normal');
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:04:17.467

我找到了另一个关于这个的问题的答案：

[jquery ajax - 全局设置。是否有可能知道触发 ajax 调用的事件/元素？](https://stackoverflow.com/questions/7812140/jquery-ajax-global-settings-is-it-possible-to-know-what-event-element-trigger)

此外，jQuery[文档](http://api.jquery.com/jQuery.ajaxSetup/)说：

> 注意：全局回调函数应该使用它们各自的全局 Ajax 事件处理方法来设置——.ajaxStart()、.ajaxStop()、.ajaxComplete()、.ajaxError()、.ajaxSuccess()、.ajaxSend()——而不是在内部$.ajaxSetup() 的选项对象。

**我的旧答案：**

> 您应该在要对其执行 ajax 操作的按钮上绑定一个 onclick 侦听器。在这种情况下，您可以通过以下方式访问该按钮：
> 
> ```
> $(this).addClass('a');
> // ajax calls... 
> ```
> 
> 示例：http: [//jsfiddle.net/ichr/s6EUg/2/](http://jsfiddle.net/ichr/s6EUg/2/)

# html - Java EE 的自定义标签支持

> ID：12090004
> 
> 赞同：1
> 
> 时间：2012-08-23T10:53:14.063
> 
> 标签：html, jakarta-ee, custom-tag

给定 Java EE 环境中的以下 HTML：

```
<input name="foo" value="hello" /> 
```

我希望`ServletRequest.getParameterNames()`包括`foo`.

但是，例如：

```
<footag name="foo" value="hello"/> 
```

我希望`ServletRequest.getParameterNames()`包括`foo`但它没有。这让我思考：

1.  为什么`ServletRequest`接受来自输入标签的值而不是我的自定义标签？
2.  我是否正确假设 HTML5 支持这种可扩展性？
3.  有谁确切知道哪些标签`ServletRequest`接受参数绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:28:36.757

经过进一步调查，事实证明实际上是浏览器没有发送表单参数。根据[HTML5 规范](http://www.w3.org/TR/2012/WD-html5-20120329/forms.html#categories)：

> 可提交元素：
> 
> 表示在提交表单元素时可用于构造表单数据集的元素。
> 
> 按钮、输入、keygen、对象、选择、文本区域

似乎只有这些标签才能提供发布的数据。所以这不是`RequestServlet`导致问题的原因。

# c++ - 不抓取时的QGraphicsPixmapItem mouseMoveEvent

> ID：12090005
> 
> 赞同：1
> 
> 时间：2012-08-23T10:53:16.483
> 
> 标签：c++, qt, user-interface, graphics, mouseevent

我正在开发一个使用 Qt 4.8 作为 GUI 框架的 C++ 应用程序：一个子类 QGraphicsView 呈现一个子类 QGraphicsScene，其中包含一个或多个子类 QGraphicsPixMapItem(s)，我需要知道鼠标光标的相对像素位置。

按照[如何从 QGraphicsPixmapItem 显示像素位置和颜色，](https://stackoverflow.com/questions/9163271/how-to-show-pixel-position-and-color-from-a-qgraphicspixmapitem)我将 QGraphicsPixmapItem 子类[化](http://qt-project.org/doc/qt-4.8/qgraphicspixmapitem.html)：

```
class MyGraphicsPixmapItem : public QObject, public QGraphicsPixmapItem
{
    Q_OBJECT
public:
    explicit MyGraphicsPixmapItem(QGraphicsItem *parent = 0);
signals:
public slots:
    void mouseMoveEvent(QGraphicsSceneMouseEvent * event);
    void mousePressEvent(QGraphicsSceneMouseEvent *event);
}; 
```

并实现构造函数和处理程序：

```
MyGraphicsPixmapItem::MyGraphicsPixmapItem(QGraphicsItem *parent) : QGraphicsPixmapItem(parent)
{
    qDebug() << "constructor mygraphicspixmapitem";
    setCacheMode(NoCache);
    setAcceptHoverEvents(true);
    setFlag(QGraphicsItem::ItemIsSelectable,true);
}

void MyGraphicsPixmapItem::mouseMoveEvent(QGraphicsSceneMouseEvent * event)
{
    QPointF mousePosition = event->pos(); 
    qDebug() << "mouseMoveEvent";
    qDebug() << mousePosition;
    QGraphicsPixmapItem::mouseMoveEvent(event);
} 
```

我还使用各自的 mouseMoveEvent 处理程序将 QGraphicsView 和 QGraphicsScene 子类化，这些处理程序可以成功地进一步向下传递事件：

```
void MyGraphicsScene::mouseMoveEvent(QGraphicsSceneMouseEvent *event)
{
    qDebug() << "QGraphicsScene: mouseMoveEvent";
    QGraphicsScene::mouseMoveEvent(event);
} 
```

然而，虽然 MyGraphicsView 配置了...

```
setMouseTracking(true);
setInteractive(true); 
```

... MyGraphicsPixmapItem 仅在单击或将其设置为抓取器后执行 mouseMoveEvent 处理程序：

```
void MyGraphicsPixmapItem::mousePressEvent(QGraphicsSceneMouseEvent *event)
{
    qDebug() << QString("item clicked at: %1, %2").arg( event->pos().x()).arg( event->pos().y()  );
    event->accept();
    grabMouse();
} 
```

我想知道我是否犯了错误，或者上述答案中给出的解决方案有缺陷或不完整。此外，我想知道是否可以在没有将 QGraphicsPixmapItem 配置为“grabber”的情况下触发 mouseMoveEvent 处理程序。如果在鼠标第一次移动到项目上时自动发生作为抓取器的配置也是可以接受的。

这是一个[线程](http://www.qtcentre.org/threads/38014-Problem-getting-mouse-events-from-overrider-QGraphicsPixmapItem)，其中一个非常相似的问题似乎与项目的引用有关，但由于我将项目添加到场景中，如下所示：

```
thepixMapItem = new MyGraphicsPixmapItem();
scene->addItem(thepixMapItem); 
```

我想这没有关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T13:45:51.343

解决方案是重新实现或过滤项目的[hoverMoveEvent](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#hoverMoveEvent)，因为[mouseMoveEvent](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#mouseMoveEvent)仅在收到鼠标按下时触发：

> 如果你确实收到了这个事件，你可以确定**这个项目也收到了一个鼠标按下事件**，并且这个项目是当前的鼠标抓取器。

# c# - ASP.net 图表控件

> ID：12090010
> 
> 赞同：2
> 
> 时间：2012-08-23T10:53:43.490
> 
> 标签：c#, asp.net, c#-4.0, charts

我想创建一个雷达图来显示在我的 asp.net 网站上。为此，我使用`ASP.net`图表控件`4.0`：`c#`

我可以毫无问题地创建雷达图，但是当我希望将`X-Axis`标签制作成超链接时会出现问题。

为了让自己更容易，我创建了一个小测试。带有条形图的非常简单的数据。我必须为`X-Axis`可点击创建一个自定义标签。正如我预期的那样工作。但是，当我更改图表类型时`ChartType = SeriesChartType.Radar;`，`X-Axis`标签不再是链接。

这是我正在使用的简单测试代码：

```
ChartArea ca = new ChartArea();

List<string> f = new List<string>();
f.Add("Label 1");
f.Add("Label 2");
f.Add("Label 3");
f.Add("Label 4");

Series s = new Series();
s.ChartType = SeriesChartType.Radar;
s.Points.Add(new DataPoint(1, 20));
s.Points.Add(new DataPoint(2, 30));
s.Points.Add(new DataPoint(3, 40));
s.Points.Add(new DataPoint(4, 50));
Chart2.Series.Add(s);

for (int i = 1; i < s.Points.Count; i++)
{
    CustomLabel cl = new CustomLabel();
    cl.FromPosition = i-0.5;
    cl.ToPosition = i + 0.5;
    cl.Text = f[i];
    cl.Url = "someRandompage.aspx";
    ca.AxisX.CustomLabels.Add(cl);
}
Chart2.ChartAreas.Add(ca); 
```

关于如何进行的任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T13:45:09.740

最后我决定不使用 asp.net 图表。他们只是不是那么好。最终使用了highcharts。它们是一个 javascript 图表工具，能够完成我想要的一切。所有主要浏览器都支持它们，而且它们看起来不错。另一方面，asp.net 图表控件不是很好而且渲染速度很慢。

还有一些其他可用的 javascript 图表工具看起来不错。如果可能的话，我会推荐使用 javascript 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:06:26.903

[在此处](http://www.4guysfromrolla.com/articles/102809-1.aspx)和[此处](http://social.msdn.microsoft.com/Forums/en-US/MSWinWebChart/thread/47a8fb5f-6b3e-4906-8909-30efcbbb5af3/)检查图表的 MapAreAttribute 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:01:31.130

您应该能够通过查看以下链接上的 RadarChart 示例来解决它。

[示例就在这里！](http://weblogs.asp.net/scottgu/archive/2008/11/24/new-asp-net-charting-control-lt-asp-chart-runat-quot-server-quot-gt.aspx)

[源代码在这里！](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=1591)

# java - 不幸的是，数独已停止

> ID：12090011
> 
> 赞同：1
> 
> 时间：2012-08-23T10:53:53.973
> 
> 标签：java, android, sudoku

我是 Android 的新编​​程人员，我正在阅读“Hello，Android”一书，第 3 版。第二章是制作数独的教程。即使使用书中的代码，当我运行程序时，它也会安装在 AVD 中，但突然，它说“不幸的是，数独已停止”。我在互联网上搜索了没有解决方案。

代码如下：

***主文件***

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" >
    <TextView
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/main_title" />
    <Button
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/continue_label" />
    <Button
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/new_game_label" />
    <Button 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/about_label" />
    <Button 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/exit_label" />
</LinearLayout> 
```

* * *

***数独.java***

```
package org.example.sudoku;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class Sudoku extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

* * *

***AndroidManifest.xlm***

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.example.sudoku"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Main"
            android:label="@string/main_title" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

***日志猫***是：

```
08-22 22:28:38.333: I/Process(610): Sending signal. PID: 610 SIG: 9
08-22 22:28:58.142: E/Trace(653): error opening trace file: No such file or directory (2)
08-22 22:28:58.492: D/AndroidRuntime(653): Shutting down VM
08-22 22:28:58.492: W/dalvikvm(653): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-22 22:28:58.503: E/AndroidRuntime(653): FATAL EXCEPTION: main
08-22 22:28:58.503: E/AndroidRuntime(653): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.example.sudoku/org.example.sudoku.Main}: java.lang.ClassNotFoundException: org.example.sudoku.Main
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.os.Looper.loop(Looper.java:137)
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-22 22:28:58.503: E/AndroidRuntime(653):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 22:28:58.503: E/AndroidRuntime(653):  at java.lang.reflect.Method.invoke(Method.java:511)
08-22 22:28:58.503: E/AndroidRuntime(653):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-22 22:28:58.503: E/AndroidRuntime(653):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-22 22:28:58.503: E/AndroidRuntime(653):  at dalvik.system.NativeStart.main(Native Method)
08-22 22:28:58.503: E/AndroidRuntime(653): Caused by: java.lang.ClassNotFoundException: org.example.sudoku.Main
08-22 22:28:58.503: E/AndroidRuntime(653):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
08-22 22:28:58.503: E/AndroidRuntime(653):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
08-22 22:28:58.503: E/AndroidRuntime(653):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
08-22 22:28:58.503: E/AndroidRuntime(653):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
08-22 22:28:58.503: E/AndroidRuntime(653):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:01:06.537

在 AndroidManifest.xml 中编辑以下行

```
android:name=".Main" 
```

作为

```
android:name=".Sudoku" 
```

# iphone - 我的 didSelectRowAtIndexPath 函数导致内存泄漏

> ID：12090015
> 
> 赞同：2
> 
> 时间：2012-08-23T10:53:59.700
> 
> 标签：iphone, objective-c, ios, memory-leaks

我在这里的第一篇文章。似乎我遇到了一些内存泄漏问题。

我有一个包含两列的标签栏，一列用于沙拉，另一列用于寿司。在每个选项卡中，我还有一个显示不同食物选择的表格视图。当用户按下其中一个单元格时，应用程序会将用户带到更详细的视图，该视图显示更大的图像和有关所选食物菜单的一些信息。

但是当我运行泄漏时，我在下一行得到 98.5% 的泄漏。[self.navigationController pushViewController：详细动画：YES]；如果我在此行之后发布详细信息，应用程序将崩溃。

这是其余的功能代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *message = nil;
NSMutableString *image_string = nil;

DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detailview"];

if(tableView == SushiTable)
{
    message = [sushiNames objectAtIndex:indexPath.row];
    image_string = [NSMutableString stringWithString:[sushiImages objectAtIndex:indexPath.row]];
}
if(tableView == SaladTable)
{
    message = [saladNames objectAtIndex:indexPath.row];
    image_string = [NSMutableString stringWithString:[saladImages objectAtIndex:indexPath.row]];
}

[image_string deleteCharactersInRange: [image_string rangeOfString: @"_small"]];

NSMutableString *temp_str = [[message copy] autorelease];
NSString *final = [[[temp_str stringByReplacingOccurrencesOfString:@" " withString:@"_"] 
                   stringByReplacingOccurrencesOfString:@"ä" withString:@"a"] 
                   lowercaseString];

detail.food_name = message;
detail.image_name = image_string;
detail.food_info_key = final;

[tableView deselectRowAtIndexPath:indexPath animated:YES];
[self.navigationController pushViewController: detail animated: YES];
detail = nil;

} 
```

编辑：我还看到在 DetailViewController 的 viewDidLoad 函数中，以下行有内存泄漏，不知道是否可能相关。

```
food_image.image = [UIImage imageNamed:image_name]; 
```

EDIT2：我也在模拟器上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:08:14.347

试试看。

```
 [self.navigationController pushViewController: detail animated: YES];
 [detail release];
 detail = nil; 
```

当你推送一个对象时。现在它被添加到导航堆栈数组中，现在这个对象的数组所有者，所以你应该需要你添加到数组中的释放对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:20:26.120

`detail`全局声明并在`dealloc:`. 它可能会起作用。

# java - 为什么输入流以块的形式读取数据？

> ID：12090018
> 
> 赞同：2
> 
> 时间：2012-08-23T10:54:22.210
> 
> 标签：java, sockets, network-programming, inputstream

我正在尝试使用以下代码从网络套接字读取一些数据 -

```
Socket s = new Socket(address, 502);
response = new byte[1024];
InputStream is = s.getInputStream();
int count = is.read(response, 0, 100); 
```

数据量不大。它总共是 16 个字节。但是 read() 语句不会一口气读取所有数据。它只将 8 个字节的数据读入我的缓冲区。

我必须像这样多次调用 read() 才能读取数据 -

```
Socket s = new Socket(address, 502);
response = new byte[1024];
InputStream is = s.getInputStream();
int count = is.read(response, 0, 100);
count += is.read(response, count, 100-count); 
```

为什么会这样？为什么 read() 不能一口气读取整个流？

*请注意，数据不会逐渐到达。如果我在通过调用 Thread.sleep(2000) 读取数据之前等待 2 秒，则行为保持不变。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T10:59:44.770

> 为什么 read() 不能一口气读取整个流？

因为没有指定这样做。请参阅 Javadoc。它阻塞直到至少有一个字节可用，然后返回介于 1 和提供的长度之间的某个数字，包括 1 和所提供的长度。

这反过来又是因为数据不一定会一次性全部到达。您无法控制 TCP 如何发送和接收数据。您必须将其视为字节流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:18:20.393

> 我知道它会阻塞直到数据到达。“这反过来又是因为数据不一定会一次性全部到达。” 为什么不是我的问题。

数据不一定都一次性到达，因为网络通常会将其分解为数据包。IP是一种*分组交换*协议。

> TCP 是否传输 8 个字节的块？

可能，但可能不会。数据包大小取决于数据经过的网络/网络，但典型的互联网数据包大小约为 1500 字节。

如果您一次收到 8 个字节，则您的数据要么来自数据包大小异常小的网络，要么（更有可能）发送方一次发送 8 个字节的数据。第二个解释或多或少与您的其他评论所说的相吻合。

> 而且由于我明确指定了 100，所以一个比缓冲区中的数据大得多的数字不应该尝试读取至少 100 个字节吗？

好吧，没有。它没有指定以这种方式工作，也不是那样工作的。您需要根据规范的内容编写代码。

* * *

这可能与“轮询”设备的方式有关。但是，如果不查看设备的规格（甚至不知道它到底是什么），这只是一个猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:09:43.033

也许数据逐渐到达不是因为您的阅读，而是因为发送者。

The sender should use a [BufferedOutputStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedOutputStream.html) (in the middle) to make big chunks before sending (and use flush only when it's needed).

# android - 每当在android中单击选项卡时启动主要活动

> ID：12090024
> 
> 赞同：0
> 
> 时间：2012-08-23T10:54:41.490
> 
> 标签：android

我有三个包含子活动的选项卡，问题是当我单击一个选项卡中的任何一个时，它不显示主要活动。如何在三个选项卡栏中显示主要活动...任何人都有解决方案。 ?

提前谢谢.. :)

Tabmain TabActivity

```
 TabHost tabHost = getTabHost();
    TabSpec HomeSpec = tabHost.newTabSpec("Home");
    HomeSpec.setIndicator("Home", getResources().getDrawable(R.drawable.home));
    Intent HomeIntent = new Intent(this, HomeMediator.class);
    HomeSpec.setContent(HomeIntent);

    TabSpec SearchSpec = tabHost.newTabSpec("Search");
    SearchSpec.setIndicator("Search", getResources().getDrawable(R.drawable.search));
    Intent songsIntent = new Intent(this, SearchMediator.class);
    SearchSpec.setContent(songsIntent);

    TabSpec TreeInfoSpac = tabHost.newTabSpec("Tree Info");
    TreeInfoSpac.setIndicator("Botanical Name", getResources().getDrawable(R.drawable.carrot));
    Intent videosIntent = new Intent(this, BotaniacalMediator.class);
    TreeInfoSpac.setContent(videosIntent);

    tabHost.addTab(HomeSpec);
    tabHost.addTab(SearchSpec);
    tabHost.addTab(TreeInfoSpac);
    tabHost.setOnTabChangedListener(new OnTabChangeListener() {

        @Override
        public void onTabChanged(String tabId) {
            // TODO Auto-generated method stub

        }
    }); 
```

选项卡组活动；

```
private ArrayList<String> mIdList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (mIdList == null) {
        mIdList = new ArrayList<String>();

    }
}

public void finishFromChild(Activity child) {
    LocalActivityManager manager = getLocalActivityManager();
    int index = mIdList.size() - 1;

    if (index < 0) {
        finish();
        return;
    }

    manager.destroyActivity(mIdList.get(index), true);
    Log.i("Activity Finish:", manager.getCurrentId());
    mIdList.remove(index);
    index--;
    String lastId = mIdList.get(index);
    Intent lastIntent = manager.getActivity(lastId).getIntent();
    Window newWindow = manager.startActivity(lastId, lastIntent);
    setContentView(newWindow.getDecorView());
}

public void startChildActivity(String Id, Intent intent) {

    Window window = getLocalActivityManager().startActivity(Id,
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        mIdList.add(Id);
        setContentView(window.getDecorView());
        Log.i("Activity Start:", getLocalActivityManager().getCurrentId());
    }
} 
```

家调解员

```
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    group = this;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mediator);
    Intent LoginIntent = new Intent(HomeMediator.this, home.class);
    startChildActivity("Home", LoginIntent); 
```

家

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);
    parentActivity = (TabGroupActivity) getParent();
}

public void btnInfo_Click(View v) {
    Intent i = new Intent(getParent(), records.class);
    i.putExtra("VAL", "BotanicalName");
    parentActivity.startChildActivity("Botanical", i);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:52:00.683

您可以在第一个 tabspec 中设置它，如下所示

```
 Intent HomeIntent = new Intent(this, MainClass.class);
  HomeSpec.setContent(HomeIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:01:49.163

我不完全知道你的意思，但使用 `OnTabListener` start Intent ..

```
Intent main = new Intent (yourclass.this, MainClass.class);
startActivity(main); 
```

# cakephp - cakephp 元素错误（未找到元素）

> ID：12090027
> 
> 赞同：0
> 
> 时间：2012-08-23T10:55:12.427
> 
> 标签：cakephp

我刚刚开始使用 cake 2.2（通常我使用 1.3）并且我遇到了视图元素的问题。我需要为我的应用程序创建一个元素，用于主页和其他一些地方。

我认为我做对了所有事情：

*   我在控制器中有一个动作（广告/最新）
*   我在*app/View/Elements/latest.ctp中创建了元素*
*   我在 home.ctp 中这样称呼它：`<?php echo $this->element('latest'); ?>`

但它给了我这个错误`"Element Not Found: Elements/latest.ctp"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:18:37.513

有几件事可能导致：

*   `element()`文件名和调用有区别
*   元素调用不应包含“.ctp”
*   元素文件的扩展名不正确（应该是`.ctp`）
*   元素的文件权限不正确，不允许访问
*   您的元素的路径不正确（即它在一个文件夹中，但您没有在调用中指定它）

如果您通过了所有这些测试，那么您应该一切顺利，不会出现任何错误。

# ios - Rubymotion 图像按钮事件未触发

> ID：12090028
> 
> 赞同：0
> 
> 时间：2012-08-23T10:55:22.817
> 
> 标签：ios, rubymotion

有谁知道为什么以下 RubyMotion 代码中的按钮在单击时不会触发 say_something 方法...

```
class HomeViewController < UIViewController
  def loadView
    self.view = UIImageView.alloc.init
  end

  def viewDidLoad
    view.image = UIImage.imageNamed('background.png')

    @action_button = UIButton.buttonWithType UIButtonTypeCustom
    @action_button.frame = [[100, 100], [224, 229]]
    @action_button.setBackgroundImage(UIImage.imageNamed("home_button_green.png"), forState: UIControlStateNormal)
    @action_button.addTarget(self, action: :say_something, forControlEvents: UIControlEventTouchUpInside)

    view.addSubview @action_button
  end

  def say_something
    @alert_box = UIAlertView.alloc.initWithTitle("Hello World",
            message:"Hi",
            delegate: nil,
            cancelButtonTitle: "ok",
            otherButtonTitles:nil)

        # Show it to the user
        @alert_box.show
  end

  def viewDidAppear(animated)

  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:45:35.173

我找到了答案，视图需要被告知允许用户交互......

```
view.userInteractionEnabled = true 
```

这解决了问题，现在按下按钮并触发事件。

# jquery - 是否可以使用 jquery 获取跨域 SOAP 请求

> ID：12090036
> 
> 赞同：5
> 
> 时间：2012-08-23T10:56:50.063
> 
> 标签：jquery

我正在使用 javascript 来获得肥皂响应，但经过很多痛苦后，我意识到不可能获得跨域 xml http 请求。所以我决定继续使用jquery，现在我不需要代码，我只需要一些提示和确认，如果可能的话，下面的jquery是我的js代码 var getmarket = new XMLHttpRequest(); getmarket.open('POST', 'http://www.betfair.com/publicapi/', true);

```
 var m_request = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" '+
                    'xmlns:bfex="http://www.betfair.com/publicapi/v5/BFExchangeService/" '+
                    'xmlns:v5="http://www.betfair.com/publicapi/types/exchange/v5/">'+
                    ' <soapenv:Header/>'+
                    '<soapenv:Body>'+
                    '<bfex:getAllMarkets>'+
                    '<bfex:request>'+
                    '<header>'+
                       '<clientStamp>0</clientStamp>'+
                       '<sessionToken>Y9eTuEvlrTM55pbRB1kIj0As0bVvz3eFm+p1FY+svHk=</sessionToken>'+
                    '</header>'+
                    '<locale>en</locale>'+
                    '<eventTypeIds>'+
                       '<v5:int>1</v5:int>'+
                    '</eventTypeIds>'+
                    '<countries>'+
                       '<v5:Country>GBR</v5:Country>'+
                    '</countries>'+
                    '<fromDate>2012-08-23TO00:00:00.000Z</fromDate>'+
                    '<toDate>2012-08-24TO00:00:00.000Z</toDate>'+
                 '</bfex:request>'+
              '</bfex:getAllMarkets>'+
           '</soapenv:Body>'+
        '</soapenv:Envelope>';

    getmarket.onreadystatechange = function (){
        if (getmarket.readyState == 4 && getmarket.status == 200)
        document.write(getmarket.responseText);
        }

    getmarket.setRequestHeader('Content-Type', 'text/xml');
    getmarket.send(m_request);
    document.write(getmarket.responseText); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:00:37.450

你不能这样做，只允许[JSONP](http://en.wikipedia.org/wiki/JSON#JSONP)跨域。

还要检查一下：[来自浏览器的跨域 SOAP](http://www.jasonkolb.com/weblog/2006/05/crossdomain_soa.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:02:24.833

JQuery 是 Javascript 的包装器。如果 javascript 不会这样做，JQuery 也不会。您必须让您的服务器进行查找。

# compare - 如何比较两个逻辑表达式是否相等？

> ID：12090044
> 
> 赞同：1
> 
> 时间：2012-08-23T10:57:23.693
> 
> 标签：compare, logic, expression

我有两个逻辑表达式（只是例子）：

!(n >= x || n < -y)

和

n < x && n >= -y

是否有任何工具可以比较这些表达式以查看它们是否在逻辑上对所有值都相等？或者只是为了帮助我找到最紧凑/最简单的形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:17:56.347

“最紧凑/简单的形式”答案将取决于您对紧凑性/简单性的概念。例如，您可以执行许多简化步骤，例如转换为合取范式（|| 的消除），然后进行否定消除（将 !(n > y) 替换为 (n <= y)）。

公式 F 和 G 的等价性可以通过取 F 和 G 的否定的合取并用例如约束求解器检查 F && !G 的可满足性来检查。你应该小心你的域，因为结果取决于你的域（整数、有理数、实数）：2 < n && n < 3 对于整数是不可满足的，但对于实数是可满足的！

# wordpress - Wordpress 设置 API 两个部分相同页面保存错误

> ID：12090048
> 
> 赞同：0
> 
> 时间：2012-08-23T10:57:38.270
> 
> 标签：wordpress

嗨，我刚刚学习使用设置 API，我似乎无法进入同一页面上的部分工作。第一部分完美地工作并保存了一天，但第二部分在保存时显示错误：

```
Options Page not Found 
```

这是我的整个选项页面的代码：

```
 <?php 
/* ------------------------------------------------------------------------ * 
 * REGISTER MENU AND SUBMENU
 * ------------------------------------------------------------------------ */
    function thanathos_theme_menu(){
        add_menu_page('Thanathos', 
                      'Thanathos', 
                      'administrator', 
                      'thanathos_menu_id',
                      'thanathos_display'
                     );   
    }
    add_action('admin_menu' ,'thanathos_theme_menu');

 /*------------------------------------------------------------------------ * 
 * Social & Logo Options
 * ------------------------------------------------------------------------ */
 function thanathos_initialize_frontpage_options(){
        if(false == get_option('thanathos_front_page_options')){
            add_option('thanathos_front_page_options');
        }     
        add_settings_section(
                'thanathos_front_page',
                '',
                'thanathos_front_page_section_callback',
                'thanathos_front_page_options'
        );
        add_settings_field(
                'logo_path',
                'Logo Path',
                'thanathos_logo_path_url_callback',
                'thanathos_front_page_options',
                'thanathos_front_page'
        );
        register_setting(
                    'thanathos_front_page_options', 
                    'thanathos_front_page_options',
                    'thanathos_front_page_options_sanitize'
                );
    }
    add_action('admin_init', 'thanathos_initialize_frontpage_options'); 
    function thanathos_front_page_section_callback(){}

    function thanathos_logo_path_url_callback(){
        $options = get_option('thanathos_front_page_options');
        echo  '<input type="text" id="logo" name="thanathos_front_page_options[logo_path]" value="' . $options['logo_path'] . '" />';      
    }
    function thanathos_front_page_options_sanitize($input){
        $output = array();
        foreach ($input as $key => $val){
            if(isset($input[$key])){
                $output[$key] = strip_tags(stripslashes($input[$key])); 
            }
        }
        return apply_filters('thanathos_front_page_options' , $output , $input);
    }
    /* ------------------------------------------------------------------------ * 
    * Slider Options
    * ------------------------------------------------------------------------ */
     function thanathos_front_page_slider_options(){
          if(false == get_option('thanathos_front_page_slider')){
               add_option('thanathos_front_page_slider');
          }
          add_settings_section('thanathos_front_page_slider',
                               '',
                               'thanathos_front_page_slider_callback',
                               'thanathos_display',
                               'thanathos_front_page_slider'
                              );
     }
     add_action('admin_init', 'thanathos_front_page_slider_options');
     function thanathos_front_page_slider_callback(){}

/* ------------------------------------------------------------------------ * 
 * Display on Thanathos Menu Page
 * ------------------------------------------------------------------------ */
    function thanathos_display(){
?>      <style>
            fieldset{
                border:1px solid #ddd;
                margin-top:20px;
                padding-bottom: 20px;
            }
            legend{
                margin-left:5px; 
                padding:0 5px;
                color:#2481C6; 
                text-transform:uppercase;
            }
            p.submit{
                margin-left: 10px;
            }
            td input{
                width:360px;
            }
        </style>
        <div class="wrap">
            <div id="icon-themes" class="icon32"></div>
            <h2>Thanathos General Options</h2>
            <?php settings_errors(); ?>   
            <form method="post" action="options.php">
                <fieldset>
                    <legend><strong>Logo and Social Options</strong></legend>
                        <?php
                         settings_fields( 'thanathos_front_page_options' );
                         do_settings_sections( 'thanathos_front_page_options' );
                        ?>
                </fieldset>
                <?php submit_button(); ?>
            </form>
             <form method="post" action="options.php">
                <fieldset>
                    <legend><strong>Slider Options</strong></legend>
                        <?php
                         settings_fields( 'thanathos_front_page_slider' );
                         do_settings_sections( 'thanathos_front_page_slider' );
                        ?>
                </fieldset>
                <?php submit_button(); ?>
            </form>
        </div>
<?php
    }   
?> 
```

如果这不是将两个部分添加到同一页面的正确方法，那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:05:30.853

以下是设置 api 的优秀教程。如果你想把它作为一个整体来做，那就有点长了。
在[第 5 部分](http://wp.tutsplus.com/tutorials/the-complete-guide-to-the-wordpress-settings-api-part-5-tabbed-navigation-for-your-settings-page/)中，它解释了为什么一页上不能有 2 个 settings_sections。
解决方案：使用标签。
这将帮助您解决问题。

[http://wp.tutsplus.com/tutorials/the-complete-guide-to-the-wordpress-settings-api-part-1/](http://wp.tutsplus.com/tutorials/the-complete-guide-to-the-wordpress-settings-api-part-1/)

# c# - 检查文件是否已经在源代码管理中

> ID：12090049
> 
> 赞同：10
> 
> 时间：2012-08-23T10:57:39.773
> 
> 标签：c#, .net, tfs, tfs-sdk

我正在使用[Microsoft.TeamFoundation.VersionControl.Client namespace](http://msdn.microsoft.com/en-us/library/bb141847)中的类以编程方式使用 TFS 。我的目标是将本地文件夹中的文件签入源代码管理。有些文件可能已经存在于 SC 中并且应该被编辑，有些是新的并且应该添加，有些存在于 SC 中并且没有改变，所以我不需要对它们做任何事情。

我的问题是我不知道如何检查文件是否已经存在于源代码管理中，所以我无法在我的代码中决定是否应该添加或编辑它。Workspace 方法似乎都不能满足我的[需求](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.workspace)。

我的代码：

```
foreach (string file in fileList)
{
    workspace.PendEdit(file);
    workspace.PendAdd(file);
} 
```

它可以完成这项工作，但它看起来很愚蠢并且感觉很慢。正确的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T12:08:29.777

我不知道“正确”，但在我的一个工具中，我使用[VersionControlServer.ServerItemExists](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.serveritemexists%28v=vs.100%29.aspx)来获得你想要的东西。

在您的情况下，您必须检查以下内容：

```
versionControlServer.ServerItemExists(workspace.GetServerItemForLocalItem("filePath"), ItemType.Any) 
```

# php - 使用有子句和 where 条件映射减少分组的代码

> ID：12090050
> 
> 赞同：1
> 
> 时间：2012-08-23T10:57:42.090
> 
> 标签：php, mongodb, map, reduce

我有一个用户集合如下

```
{
    "id":"id here", 
    name: 'name here', 
    height: 'height here', 
    weight: 'weight here', 
    lastLogin:[array of login dates], 
    messagesSentOn: [array of messages sent date]
} 
```

我需要找到所有上个月登录但不止一次的用户，以及上个月发送超过 25 条消息且体重超过 50 且身高超过 5 英寸的用户。对于上述情况，如何在 mongodb 中编写 map reduce 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:16:00.287

我在 shell 中提供了一个示例。我不确定 MR 是解决这个问题的最佳解决方案，我鼓励您考虑替代解决方案以避免单线程 Javascript。例如，您可以存储一个仅包含当月登录信息或消息的附加字段。每次添加登录名和/或消息时，都会增加一个计数器字段。此模式将允许您在没有聚合命令的情况下找到匹配的文档。

您还应该研究新的聚合框架，它将在 MongoDB 版本 2.2（即将推出）中提供：http: [//docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

最后一点 - 为了提高性能，您应该确保在 MR 命令中包含一个查询以清除不匹配的文档（参见下面的示例）。

输入文件：

```
{ "_id" : 1, "name" : "Jenna", "height" : 100, "weight" : 51, "lastLogin" : [ 1, 2, 3, 4 ], "messageSentOn" : [ 4, 5, 5, 7 ] }
{ "_id" : 2, "name" : "Jim", "height" : 60, "weight" : 49, "lastLogin" : [ 2, 4 ], "messageSentOn" : [ 5, 6 ] }
{ "_id" : 3, "name" : "Jane", "height" : 90, "weight" : 60, "lastLogin" : [ 1 ], "messageSentOn" : [ 3, 6 ] }
{ "_id" : 4, "name" : "Joe", "height" : 70, "weight" : 65, "lastLogin" : [ 5, 6, 7 ], "messageSentOn" : [ 3, 6, 7 ] } 
```

磁共振功能：

```
map = function(){ 
   var monthLogins = 0; 
   var monthMessages = 0; 
   var monthDate = 2;  
   for(var i=0; i<this.lastLogin.length; i++){     
       if(this.lastLogin[i] > monthDate){         
            monthLogins++; 
       } 
   } 
   for(var i=0; i<this.messageSentOn.length; i++){     
      if(this.messageSentOn[i] > monthDate){         
         monthMessages++; 
      } 
   } 
   if(monthLogins > 1 && monthMessages > 2)
      { emit(this._id, null); 
   } 
}

reduce = function (key, values) {
   //won't be called because a single document is emitted for each key
} 
```

MR 命令：

```
db.collection.mapReduce(map, reduce, {query: {weight: {$gt : 50}, height: {$gt: 5}, lastLogin: {$gt: 2}}, out: {inline:1}}) 
```

输出：

```
{"_id" : 1, "value" : null},
{"_id" : 4, "value" : null} 
```

# apache-flex - 在 flex 中处理来自服务的数据

> ID：12090051
> 
> 赞同：0
> 
> 时间：2012-08-23T10:57:44.443
> 
> 标签：apache-flex, flex4

我在 Flex Mobile 中创建了一个 PHP 服务，并将结果与​​一个列表绑定。我想根据对数据字段的一些计算对服务中的记录进行排序。那么，是否可以对 PHP 服务的结果集执行操作？

详细问题：

我已经通过 Flash Builder 4.6 中的内置工具创建了 php 服务。在我看来，我还使用列表绑定了服务。（再次使用 GUI 控件）。现在我想根据与当前位置的距离和服务返回的行的坐标重新排列列表中的项目。所以我想的方法是，从服务中获取内容。提取纬度，经度并计算距离。然后再次更新列表。

我在函数中尝试了以下行：

```
getAllplacesResult.lastResult[1].lon // lon is a column in the table. 
```

但它返回一个空白。他们是更理智或更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:20:28.167

更好的方法是将其分配到 Arraycollection 并从那里操作数据。

```
 <mx:ArrayCollection id="myAC" source="{ArrayUtil.toArray(myRO.getAllplacesResult.lastResult)}" /> 
```

确保将 myAC 绑定到您的列表。

按照您想要的方式对其进行排序：

```
var collection:ArrayCollection = new ArrayCollection();
var s:Sort = new Sort();
s.fields = [new SortField("lat"), new SortField("lon")];
s.compareFunction = myCompareFunction;
collection.sort = s;
collection.refresh();

private function myCompareFunction(a:Object, b:Object, fields:Array = null):int {
...
} 
```

此外，AS3 是基于 0 的索引。1 实际上会给你第二行（或抛出超出范围的异常）

# django - 在哪里创建组并在 django 中传递权限

> ID：12090053
> 
> 赞同：0
> 
> 时间：2012-08-23T10:57:51.220
> 
> 标签：django, django-registration

## 我需要创建组搜索者和用户注册，他必须自动添加到搜索者

* * *

模型.py

```
class Seeker(models.Model):
       user = models.OneToOneField(User)
       birthday = models.DateField()
       name = models.CharField(max_length=100)

        def __unicode__(self):
           return self.name 
```

**表格.py**

> 这是存储我的应用程序的用户名和密码的默认用户

```
class RegistrationForm(ModelForm):
     username = forms.CharField(label = (u'User Name'))
     email = forms.EmailField(label =(u'Email Address'))
     password = forms.CharField(label = (u'Password'),widget = forms.PasswordInput(render_value = False))
     password1 = forms.CharField(label =(u'Verify Password'),widget = forms.PasswordInput(render_value = False))

   class Meta:
       model = Seeker
       exclude = ('user',)

   def clean_username(self):
       username = self.cleaned_data['username']
       try:
          User.objects.get(username = username)
       except User.DoesNotExist:
       return username

       raise forms.ValidationError("That username is already taken,please select another.")

   def clean(self):

      if self.cleaned_data['password'] != self.cleaned_data['password1']:
           raise forms.ValidationError("The Password did not match please try again.")
      return self.cleaned_data 
```

**视图.py**

> 我正在使用默认用户来创建用户

```
def SeekersRegistration(request):
   if request.user.is_authenticated():
          return HttpResponseRedirect('/profile/')
   if request.method == "POST":
      form = RegistrationForm(request.POST)
      if form.is_valid():
        user = User.objects.create_user(username = form.cleaned_data['username'], email = form.cleaned_data['email'], password =form.cleaned_data['password'])
        user.save()
        seekers = Seeker(user =user, name = form.cleaned_data['name'],birthday = form.cleaned_data['birthday'])
        seekers.save()
        return HttpResponseRedirect('/profile/')
    else:
        return render_to_response('register.html',{'form':form},context_instance = RequestContext(request))
else:
    '''user is not submitting the form, show them a blank registration form'''
    form = RegistrationForm()
    context = {'form':form}
    return render_to_response('register.html',context,context_instance = RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:49:12.193

使用[信号](https://docs.djangoproject.com/en/dev/topics/signals/)

```
from django.contrib.auth.models import User
from django.db.models.signals import post_save
from django.dispatch import receiver

@receiver(post_save, sender=User)
def add_user_to_specific_group(instance, created, **kwargs):
    if created:
        # assign user to group 
```

# jsf-2 - 如何在按下 Esc 键时关闭 rich:popupPanel？

> ID：12090057
> 
> 赞同：3
> 
> 时间：2012-08-23T10:58:21.233
> 
> 标签：jsf-2, richfaces

如何在按下 Esc 键时关闭 rich:popupPanel？

如何使它适用于键盘中的热键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:37:42.507

我会尝试以下方法：

```
 <rich:hotKey key="Esc">
        <rich:componentControl target="popupId" operation="hide" />
   </rich:hotKey>

   <rich:popupPanel id="popupId">
      ...
   </rich:popupPanel> 
```

文档中的更多信息[`<rich:hotKey>`](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Functionality_extension.html#sect-Component_Reference-Functionality_extension-richhotKey)。

# java - Android - 按钮生成浮动上下文菜单

> ID：12090059
> 
> 赞同：0
> 
> 时间：2012-08-23T10:58:30.907
> 
> 标签：java, android, contextmenu, floating

是否可以在 Android 中使用按钮打开浮动上下文菜单，如果可以，如何？我不确定如何实现浮动上下文菜单，更不用说将其链接到按钮了，所以我主要想知道它是否可能。但如果是的话，那该多好。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:00:13.883

在长按事件上使用**Dialog代替。**例如，当您在 android 设备主屏幕上长按时。

# objective-c - GameKit 与 GKMatchSendDataReliable 的通信是否可靠？

> ID：12090060
> 
> 赞同：12
> 
> 时间：2012-08-23T10:58:40.133
> 
> 标签：objective-c, ios, game-center, gamekit

我正在使用，`GameKit.framework`并且正在尝试在两部 iPhone 之间建立**可靠**的通信。

我正在使用该`GKMatchSendDataReliable`模式发送包裹。

文档说：

> **`GKMatchSendDataReliable`**
> 
> > 数据会持续发送，直到目标接收者成功接收或连接超时。可靠的传输是按照它们发送的顺序传递的。当您需要保证交货时使用它。
> > 
> > 在 iOS 4.1 及更高版本中可用。在 GKMatch.h 中声明。

我在 WiFi 连接不佳时遇到了一些问题。`GameKit`不声明连接丢失，但有些包永远不会到达。

使用时我可以指望 100% 可靠的通信，`GKMatchSendDataReliable`还是 Apple 只是为他们没有实现的东西使用花哨的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T11:02:01.917

我的用户还抱怨在游戏过程中可能会意外丢失一些数据。我写了一个[测试应用程序](https://github.com/rabovik/GKMatchPacketLostExample)，发现`GKMatchSendDataReliable`它并不可靠。在弱互联网连接（例如 EDGE）上，一些数据包经常丢失，而 Game Center API 没有任何错误。

因此，唯一的选择是添加额外的传输层以实现真正可靠的交付。

为此，我编写了一个简单的库：[RoUTP](https://github.com/rabovik/RoUTP)。它保存所有发送的消息，直到每个接收到的确认，重新发送丢失的消息并缓冲接收到的消息以防序列中断。在我的测试中，“RoUTP + GKMatchSendDataUnreliable”组合比“RoUTP + GKMatchSendDataReliable”效果更好（当然比纯 GKMatchSendDataReliable 更好，后者并不可靠）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:26:56.567

它几乎 100% 可靠，但有时可能不是您需要的……例如，您从网络中掉线，您通过 GKMatchSendDataReliable 发送的所有内容将按照您发送它们的顺序发送。例如，这对于回合制游戏来说非常棒，但如果需要快速反应，网络退出不会忘记错过的包裹，他会得到所有现在迟到的包裹，直到他再次进入实时状态。

GKMatchSendDataReliable 不发送数据的情况是连接超时。我认为当您关闭应用程序时也会出现这种情况

# html - HTML 电子邮件 css 的所有 CSS 都可以放在头脑中吗？

> ID：12090065
> 
> 赞同：9
> 
> 时间：2012-08-23T10:59:00.927
> 
> 标签：html, css, email, html-email, mailchimp

我正在使用其中一个 MailChimp 模板作为电子邮件设计的基础，但是我不会使用 MailChimp 来发送电子邮件。

MailChimp 模板的头部有大约 330 行 CSS。自从我上次发送 HTML 电子邮件以来已经有一段时间了，但这是可以接受的还是我必须在元素上使用内联样式？

我不确定 MailChimp 是否有一个将所有样式转换为内联 CSS 的脚本，以及我是否必须做同样的事情。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T11:02:33.150

`inline CSS`是电子邮件模板的首选，因为并非所有电子邮件客户端都支持`CSS in head`部分

这是[**电子邮件中的 CSS 支持指南**](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-30T18:42:43.113

Gmail 现在[推出了](https://litmus.com/blog/gmail-to-support-responsive-email-design?utm_campaign=gmail_updates&utm_source=pardot&utm_medium=email)对`head`. 使用[Campaign Monitor's Guide](https://www.campaignmonitor.com/css/)，所有主要客户现在都支持`head`. 如果您想要尽可能广泛的支持，保持内联样式可能更安全，但如果您的用户都在使用主要客户端，那么现在开始将样式拉出是安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T11:05:40.977

内联样式是在所有电子邮件客户端中实现一致外观和感觉的方式。

也看看：[http ://coding.smashingmagazine.com/2012/03/13/techniques-overcome-poor-css-support-email/](http://coding.smashingmagazine.com/2012/03/13/techniques-overcome-poor-css-support-email/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T16:03:57.663

这是一个很棒的工具，用于获取带有标题中样式的 HTML 电子邮件文档并将它们内联移动。应该可以为您节省大量时间和精力。

[http://premailer.dialect.ca/](http://premailer.dialect.ca/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T16:33:19.693

这取决于您使用哪个公司发送电子邮件，某些公司（例如活动监视器）会自动将您的样式添加到标有该类或 ID 的相应元素的头部。我会在发送之前检查公司是否提供该服务。

我建议始终使用内联样式，即使您使用的是自动添加内联样式的服务，以防万一您决定切换到另一个提供商。

通常，在头部使用样式的问题来自 gmail、hotmail 和 yahoo 邮件。这些电子邮件客户端倾向于去除`<head>`标签。有些人声称他们在这些具有`<head>`样式的电子邮件客户端中取得了积极的成果，但如果我是你，我会谨慎行事并内联。

# javascript - 将数据发布到 iframe 是同步的还是异步的？

> ID：12090067
> 
> 赞同：0
> 
> 时间：2012-08-23T10:59:05.213
> 
> 标签：javascript, iframe, submit, http-post

将数据发布到 iframe 是同步的还是异步的？

我有 iframe 和 form.target=iframe 的表单

当我调用 form.submit() 时，幕后会发生什么？是同步的还是异步的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T11:03:21.447

在 JS 执行方面，我认为是同步的。即使由于 iframe 的存在，页面上的行为可能对用户来说更像是一种异步“样式”

不过，您应该很容易测试！;-)

你的用例是什么让你提出这个问题？

# sql-server - SQL Server：是否有替代 TOP 子句的方法？

> ID：12090074
> 
> 赞同：0
> 
> 时间：2012-08-23T10:59:31.557
> 
> 标签：sql-server, database, jqgrid, pagination

> **可能重复：**
> [相当于 SQL Server 的 LIMIT 和 OFFSET？](https://stackoverflow.com/questions/2135418/equivalent-of-limit-and-offset-for-sql-server)

我正在处理一个当前包含 2500 行的表，并且将来会越来越多。

我正在使用 jqgrid 来显示数据库中的记录。

每当加载网格时，我都会`top 500`从数据库中检索行。但是，当我开始在网格中使用分页时，记录的数量正在增加。

示例：首先行数是`TOP 100`，然后在查询中进入下一页，其增加到`TOP 200`等等。

现在我想要一个解决方案来避免这个问题，这样我就可以限制行而不是根据网格检索前 n 行。说使用范围或`LIMIT`

例子

当我导航到网格中的下一页时，`TOP 200`我想获取从 101 到 200 的行而不是行

```
 select top 500
        exe.id,
        bat.BName,
        bat.tid,
        bat.freq,
        exe.status,
        exe.Msg,
        exe.time,
        exe.Fi
    from
       XXX exe,
        YYY bat 
    where
        exe.id=bat.id   
    order by     
        CONVERT(VARCHAR(10),
        exe.time,
        120) DESC,
        exe.status,
        exe.id DESC 
```

请指导我，因为我是 jQGrid 的新手，不太了解如何处理这些与数据库相关的东西

我还在 Stackoverflow 中提到了一些链接，但无法理解

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:04:02.680

您可以使用[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)，在`row_number()`查询数据之前不会分配 ，因此如果要按`row_number()`值检索数据，则需要使用`CTE`or 子选择来获取在`WHERE`子句中使用的值。

```
SELECT *
FROM
(
  select  exe.id,
        bat.BName,
        bat.tid,
        bat.freq,
        exe.status,
        exe.Msg,
        exe.time,
        exe.Fi,
        row_number() over(order by CONVERT(VARCHAR(10), exe.time, 120) DESC,
                   exe.status, exe.id DESC) rn
  from XXX exe,
       YYY bat 
  where exe.id=bat.id  
) x
WHERE rn between 101 and 200 
```

我还建议您更改`JOIN`语法以使用 ANSI 语法：

```
SELECT *
FROM
(
  select  exe.id,
        bat.BName,
        bat.tid,
        bat.freq,
        exe.status,
        exe.Msg,
        exe.time,
        exe.File,
        row_number() over(order by CONVERT(VARCHAR(10), exe.time, 120) DESC,
                   exe.status, exe.id DESC) rn
  from XXXexe
  INNER JOIN  YYY bat 
     ON exe.id=bat.id  
) x
WHERE rn between 101 and 200 
```

# asp.net - 在 ASP.net 中的 CSS 文件中运行代码

> ID：12090075
> 
> 赞同：1
> 
> 时间：2012-08-23T10:59:38.713
> 
> 标签：asp.net, css, iis, iis-7, server-side

在我的 CSS 文件中，我希望有如下定义：

```
.hr {
    background:url('<%=CommonFunctions.AllocateStaticPath("/images/hr.png") %>');
    width: 100%;
    height: 2px;
    margin: 40px 0;
} 
```

这对我很有用，因为每个图像的路径在生产服务器和开发服务器上都不同，并且该函数正确设置了资源路径。能够做到这一点将简化我的发布过程。

如何启用 IIS7 在 CSS 文件上运行 ASP.net？我尝试将 CSS 文件重命名为`.ashx`并创建重写规则，但这似乎总是 404。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:04:43.600

这个问题启发了我做一些测试，看看我是否能以某种方式让请求的语法起作用。

结果是相对容易的。在几个不同的测试版本之后，这就是我最终要做的。

# 配置

1.  创建一个全新的 Web 应用程序进行测试
2.  创建一个文件夹，称为`DynCss`放置需要动态处理的 css 文件的文件夹
3.  注册`.css`要由页面处理程序处理的文件以处理对该文件夹的请求。为此，我将以下内容添加到`web.config`：

    ```
    <configuration>
       <system.web>
            ...
            <httpHandlers>
                <add type="System.Web.UI.PageHandlerFactory" path="/DynCss/*.css" verb="GET"/>
            </httpHandlers>
            ...
        </system.web>
    </configuration> 
    ```

4.  为文件注册一个构建处理程序`.css`：

    ```
    <configuration>
       <system.web>
            ...
            <compilation debug="true" targetFramework="4.0">
                <buildProviders>
                    <add extension=".css" type="System.Web.Compilation.PageBuildProvider" />
                </buildProviders>
            </compilation>
            ...
        </system.web>
    </configuration> 
    ```

完成这些更改后，我可以继续对其进行测试。

# 测试

出于测试的目的，我添加`DynamicStyles.css`到`DynCss`文件夹中。内容`DynamicStyles.css`：

```
<%@ Page Title="DynamicStyles.css" Language="C#" AutoEventWireup="true" %>
<script runat="server">
    protected void Page_Load(object sender, EventArgs e) 
    {
          Response.ContentType="text/css";
          Response.Cache.SetCacheability(HttpCacheability.Public);
    }
</script>
body {
    font-weight: <%= TestDynamicCss.Code.Constants.FontWeight %>;
} 
```

**注意**：`TestDynamicCss.Code.Constants.FontWeight`引用静态类上的静态属性。我只是返回字符串“粗体”。

最后，我链接到它`Default.aspx`：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="TestDynamicCss._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <link href="/DynCss/DynamicStyles.css" rel="Stylesheet" type="text/css" />
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        Welcome to ASP.NET! Is this now bold? Why yes, it is!
    </h2>
</asp:Content> 
```

# 注释

使用这种方法，您可以获得您要求的行为。缺点是您不会像处理静态 css 文件那样获得任何自动缓存处理。此外，这种方法（据我所知）无法使用 Asp.Net 4.5 的 Css 捆绑功能。此外（不用说）在 Css 文件中*编码*时，您不会获得 C# 智能感知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:02:08.533

尝试这个：

```
background:url('<%= CommonFunctions.AllocateStaticPath("/images/hr.png") %>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:04:30.870

您不能只创建一个返回 CSS 而不是 HTML 的 ASPX 页面吗？然后在您的 CSS 声明中引用 .aspx 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T11:04:59.870

我认为你可以使用~~ashx 处理程序~~一个页面并添加响应头：

```
Content-Type: text/css 
```

# javascript - 具有特殊字符的Javascript正则表达式密码验证

> ID：12090077
> 
> 赞同：66
> 
> 时间：2012-08-23T10:59:49.653
> 
> 标签：javascript, regex, passwords

我正在尝试使用正则表达式验证密码。如果我们将所有字符都作为字母，密码就会更新。我哪里错了？正则表达式对吗？

```
function validatePassword() {
    var newPassword = document.getElementById('changePasswordForm').newPassword.value;
    var minNumberofChars = 6;
    var maxNumberofChars = 16;
    var regularExpression  = /^[a-zA-Z0-9!@#$%^&*]{6,16}$/;
    alert(newPassword); 
    if(newPassword.length < minNumberofChars || newPassword.length > maxNumberofChars){
        return false;
    }
    if(!regularExpression.test(newPassword)) {
        alert("password should contain atleast one number and one special character");
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-23T11:11:01.640

使用积极的[前瞻](http://www.regular-expressions.info/lookaround.html)断言：

```
var regularExpression = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/; 
```

没有它，您当前的正则表达式仅匹配您有 6 到 16 个有效字符，它*不会*验证它是否*至少有*一个数字，并且*至少有*一个特殊字符。这就是上面的前瞻。

*   `(?=.*[0-9])`- 断言一个字符串至少有一个数字；
*   `(?=.*[!@#$%^&*])`- 断言一个字符串至少有一个特殊字符。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-05-23T07:07:47.070

```
function validatePassword() {
    var p = document.getElementById('newPassword').value,
        errors = [];
    if (p.length < 8) {
        errors.push("Your password must be at least 8 characters"); 
    }
    if (p.search(/[a-z]/i) < 0) {
        errors.push("Your password must contain at least one letter.");
    }
    if (p.search(/[0-9]/) < 0) {
        errors.push("Your password must contain at least one digit."); 
    }
    if (errors.length > 0) {
        alert(errors.join("\n"));
        return false;
    }
    return true;
} 
```

以下答案存在一定问题，因为在检查字符和数字时由于缺少 [ ] 而没有检查整个字符串，这是正确的版本

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2016-12-02T01:59:01.950

我将以下脚本用于最少 8 个字母的密码，至少包含一个符号、大小写字母和一个数字

```
function checkPassword(str)
{
    var re = /^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
    return re.test(str);
} 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-08-11T05:54:22.283

你可以为javascript验证制作自己的正则表达式

```
 /^            : Start
    (?=.{8,})        : Length
    (?=.*[a-zA-Z])   : Letters
    (?=.*\d)         : Digits
    (?=.*[!#$%&? "]) : Special characters
    $/              : End

        (/^
        (?=.*\d)                //should contain at least one digit
        (?=.*[a-z])             //should contain at least one lower case
        (?=.*[A-Z])             //should contain at least one upper case
        [a-zA-Z0-9]{8,}         //should contain at least 8 from the mentioned characters

        $/)

Example:-   /^(?=.*\d)(?=.*[a-zA-Z])[a-zA-Z0-9]{7,}$/ 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2012-08-23T11:19:38.873

不要尝试一步做太多。将每条规则分开。

```
function validatePassword() {
    var p = document.getElementById('newPassword').value,
        errors = [];
    if (p.length < 8) {
        errors.push("Your password must be at least 8 characters");
    }
    if (p.search(/[a-z]/i) < 0) {
        errors.push("Your password must contain at least one letter."); 
    }
    if (p.search(/[0-9]/) < 0) {
        errors.push("Your password must contain at least one digit.");
    }
    if (errors.length > 0) {
        alert(errors.join("\n"));
        return false;
    }
    return true;
} 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2019-03-20T16:07:39.630

**密码的正则表达式**：

`/^(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[a-zA-Z!#$%&? "])[a-zA-Z0-9!#$%&?]{8,20}$/`

我花了一段时间才弄清楚这些限制，但我做到了！

限制：（注：我使用**>>**和**<<**来显示重要字符）

1.  最少 8 个字符 `{>>8,20}`
2.  最多 20 个字符 `{8,>>20}`
3.  至少一个大写字符 `(?=.*[A-Z])`
4.  至少一个小写字符 `(?=.*[a-z])`
5.  至少一位数 `(?=.*\d)`
6.  至少一个特殊字符 `(?=.*[a-zA-Z >>!#$%&? "<<])[a-zA-Z0-9 >>!#$%&?<< ]`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-02-15T08:52:52.020

经过大量研究，我能够想出这个。这有更多特殊字符

```
validatePassword(password) {
        const re = /(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()+=-\?;,./{}|\":<>\[\]\\\' ~_]).{8,}/
        return re.test(password);
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-02-24T14:33:17.017

它对我来说是完美的，我相信对你们有用，检查它简单而准确

```
var regix = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=. 
            {8,})");

if(regix.test(password) == false ) {
     $('.messageBox').html(`<div class="messageStackError">
       password must be a minimum of 8 characters including number, Upper, Lower And 
       one special character
     </div>`);
}
else
{
        $('form').submit();
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-09-22T18:42:53.140

在这里，我正在扩展@João Silva 的答案。我需要检查不同的参数并相应地抛出不同的消息。

我将正则表达式分成不同的部分，现在该`checkPasswordValidity(String)`函数有条件地检查每个正则表达式部分并抛出不同的消息。

希望下面的例子能帮助你更好地理解！

```
/**
 * @param {string} value: passwordValue
 */
const checkPasswordValidity = (value) => {
  const isNonWhiteSpace = /^\S*$/;
  if (!isNonWhiteSpace.test(value)) {
    return "Password must not contain Whitespaces.";
  }

  const isContainsUppercase = /^(?=.*[A-Z]).*$/;
  if (!isContainsUppercase.test(value)) {
    return "Password must have at least one Uppercase Character.";
  }

  const isContainsLowercase = /^(?=.*[a-z]).*$/;
  if (!isContainsLowercase.test(value)) {
    return "Password must have at least one Lowercase Character.";
  }

  const isContainsNumber = /^(?=.*[0-9]).*$/;
  if (!isContainsNumber.test(value)) {
    return "Password must contain at least one Digit.";
  }

  const isContainsSymbol =
    /^(?=.*[~`!@#$%^&*()--+={}\[\]|\\:;"'<>,.?/_₹]).*$/;
  if (!isContainsSymbol.test(value)) {
    return "Password must contain at least one Special Symbol.";
  }

  const isValidLength = /^.{10,16}$/;
  if (!isValidLength.test(value)) {
    return "Password must be 10-16 Characters Long.";
  }

  return null;
}

//------------------
// Usage/Example:
let yourPassword = "yourPassword123";
const message = checkPasswordValidity(yourPassword);

if (!message) {
  console.log("Hurray! Your Password is Valid and Strong.");
} else {
  console.log(message);
}
```

此外，我们可以将所有这些正则表达式模式组合成一个正则表达式：

```
let regularExpression = /^(\S)(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])(?=.*[~`!@#$%^&*()--+={}\[\]|\\:;"'<>,.?/_₹])[a-zA-Z0-9~`!@#$%^&*()--+={}\[\]|\\:;"'<>,.?/_₹]{10,16}$/; 
```

**注意：**上面讨论的正则表达式将检查给定输入值/密码中的以下模式：

*   它不能包含任何空格。
*   它必须至少包含一个大写字母、一个小写字母和一个数字字符。
*   它必须至少包含一个特殊字符。[~`!@#$%^&*()--+={}[]|\:;"'<>,.?/_₹]
*   长度必须介于 10 到 16 个字符之间。

谢谢！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-23T11:10:53.810

如果单独检查长度，可以执行以下操作：

```
var regularExpression  = /^[a-zA-Z]$/;

if (regularExpression.test(newPassword)) {
    alert("password should contain atleast one number and one special character");
    return false;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-15T09:29:47.300

当您重新制作帐户密码时，请确保它是 8-20 个字符，包括数字和特殊字符，例如`##\/*`- 然后验证新密码并重新输入完​​全相同，应该可以解决密码验证问题

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-06-22T06:20:03.930

这是密码验证示例，希望您喜欢。

必须要求使用大写、小写、特殊字符、数字和限制 8 进行密码验证。

```
function validatePassword(){

   var InputValue = $("#password").val();
  var regex = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})");
    $("#passwordText").text(`Password value:- ${InputValue}`);

    if(!regex.test(InputValue)) {
         $("#error").text("Invalid Password");
    }
    else{
          $("#error").text("");
    }
}
```

```
#password_Validation{
background-color:aliceblue;
padding:50px;
border:1px solid;
border-radius:5px;
}
#passwordText{
  color:green;
}
#error{
color:red;
}
#password{
margin-bottom:5px;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="password_Validation">
  <h4>Password validation with Uppercase Lowercase special character and number must be required.</h4>
  <div>
    <input type="password" name="password" id="password">
    <button type="button" onClick="validatePassword()">Submit</button>
   <div>
     <br/>
  <span id="passwordText"></span>
  <br/>
    <br/>
  <span id="error"></span>
<div>
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-09-22T13:56:23.450

很有帮助。它将帮助最终用户在输入密码时识别缺少/需要的字符。

这是一些改进，（在这里你可以添加你需要的特殊字符。）

```
function validatePassword(p) {
    //var p = document.getElementById('newPassword').value,
    const errors = [];
    if (p.length < 8) {
        errors.push("Your password must be at least 8 characters");
    }
    if (p.length > 32) {
        errors.push("Your password must be at max 32 characters");
    }
    if (p.search(/[a-z]/) < 0) {
        errors.push("Your password must contain at least one lower case letter."); 
    }
    if (p.search(/[A-Z]/) < 0) {
        errors.push("Your password must contain at least one upper case letter."); 
    }

    if (p.search(/[0-9]/) < 0) {
        errors.push("Your password must contain at least one digit.");
    }
   if (p.search(/[!@#\$%\^&\*_]/) < 0) {
        errors.push("Your password must contain at least special char from -[ ! @ # $ % ^ & * _ ]"); 
    }
    if (errors.length > 0) {
        console.log(errors.join("\n"));
        return false;
    }
    return true;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-10-04T05:54:49.240

我的验证 shema - 大写、小写、数字和特殊字符

```
new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9_])") 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-01-31T10:26:00.767

## 国际 UTF-8

这里没有一个解决方案允许使用国际字符，即éÉáÁöÖæÆþÞóÓúÚ，但只关注英文字母。

以下正则表达式使用 unicode UTF-8 来识别大小写，因此允许使用国际字符：

```
// Match uppercase, lowercase, digit or #$!%*?& and make sure the length is 8 to 96 in length  
const pwdFilter = /^(?=.*\p{Ll})(?=.*\p{Lu})(?=.*[\d|@#$!%*?&])[\p{L}\d@#$!%*?&]{8,96}$/gmu

if (!pwdFilter.test(pwd)) {
    // Show error that password has to be adjusted to match criteria
} 
```

这个正则表达式

`/^(?=.*\p{Ll})(?=.*\p{Lu})(?=.*[\d|@#$!%*?&])[\p{L}\d@#$!%*?&]{8,96}$/gmu`

检查密码中是否使用了大写、小写、数字或#$!%*?&。它还将长度限制为最小 8 和最大 96，表情符号的长度计为长度中的一个以上字符。最后`u`，告诉它使用UTF-8。

# django - 如何根据 django 中的相关对象属性对对象进行分组

> ID：12090078
> 
> 赞同：2
> 
> 时间：2012-08-23T10:59:50.840
> 
> 标签：django, group-by

我有这两个模型；

```
class Point(models.Model):
    point       = models.IntegerField()
    description = models.CharField("Action", max_length=128)

class PointLog(models.Model):
    user   = models.ForeignKey('users.User', verbose_name ="Related User")
    point  = models.ForeignKey(Point)
    date   = models.DateTimeField(default = datetime.datetime.now()) 
```

`Point`对象是静态的。我的意思是它们不会动态变化，它显示了哪个动作带来了多少分。PointLog 对象显示用户的操作。一个用户可以完成多个相同的操作。

我想`PointLog`根据用户操作对对象进行分组并总结每个不同操作的点

帮助 ：）

采样点对象；

```
description      point
-----------------------
make comment     5
add photo        20
add video        50 
```

示例 PointLog 对象；

```
User        point         date
------------------------------
user1    make comment     ....
user1    make comment     ....
user1    add photo        ....
user1    add photo        ....
user1    add photo        ....
user1    add photo        ....
user1    add video        ....
user1    add video        ....
user1    add video        .... 
```

样品结果；

```
user1s action;
  make comment 10 points gained
  add photo    80 points gained
  add video    150 points gained 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:22:56.170

PointLog.objects.all().values('user','point__description').annotate(points_gained=Sum('point__point'))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:19:09.017

用这个：

```
result = PointLog.objects.all().values("user", 'point').annotate(num=Count("pk")) 
```

# ubuntu - 在 ubuntu 启动器中单击图标时，如何增加启动应用程序的延迟？

> ID：12090079
> 
> 赞同：0
> 
> 时间：2012-08-23T10:59:57.110
> 
> 标签：ubuntu

我的问题是经常发生我在 ubuntu 启动器中单击错误的图标，然后启动了一个我不想要的应用程序。有没有办法增加我必须单击图标以使用统一启动器启动应用程序的时间？Ubuntu 12.04 64 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:18:05.793

我认为这里的答案是不要点击错误的图标。

# java - mt ListView中绘制行的咨询

> ID：12090080
> 
> 赞同：2
> 
> 时间：2012-08-23T10:59:59.507
> 
> 标签：java, android

如何在我的 ListView 中将低于 100 的每个值都涂成红色？

我有连接到的 ListView`my_list.xml`

我像这样连接光标：

```
public void update_list(String NN) {
        c = db.rawQuery(NN, null);
        startManagingCursor(c);
        String[] from = new String[]{"_id","Store","Makat","Des","Qty" };
        int[] to = new int[]{R.id.txtID, R.id.txtStore,R.id.txtMakat ,R.id.txtDes ,R.id.txtQty};
        SimpleCursorAdapter notes = new SimpleCursorAdapter (this, R.layout.my_list, c, from, to);
        setListAdapter(notes);
    } 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:22:02.423

我的建议是制作您自己的适配器来扩展 SimpleCursorAdapter。在其中，您应该覆盖创建每个行视图的 getView 方法。

```
 class MyCustomAdapter extends SimpleCursorAdapter{
          private Context context;
          private Cursor c;

          public MyCustomAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
            super(context, layout, c, from, to);
            this.c = c;
            this.context = context;
          }

          @Override
          public View getView(int pos, View inView, ViewGroup parent) {

                LayoutInflater inflater = (LayoutInflater) context
                 .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                View rowView = inflater.inflate(R.layout.rowlayout, parent, false); 

                this.c.moveToPosition(pos);

                //get the value from cursor, evaluate it, and set the color accordingly
                int columnIndexOfQty = 4;
                int qty = c.getInt(columnIndexOfQty);

                if(qty < 100){
                  rowView.setBackgroundColor(Color.RED);
                }
                return rowView;
          }

        } 
```

可能有一些错误，但我认为你必须明白这一点。

# visual-studio-2010 - 我可以在 Visual Studio 2012 之后安全地安装 Visual Studio 2010 吗？

> ID：12090081
> 
> 赞同：28
> 
> 时间：2012-08-23T11:00:00.810
> 
> 标签：visual-studio-2010, visual-studio, installation, visual-studio-2012

我知道传统上最好按照程序“出生”的顺序​​安装程序，因为这通常可以避免更多问题。

这两个程序之间是否存在任何已知的时间依赖关系？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-23T13:24:51.130

它适用于我的机器。

我大约一天前才这样做，没有任何问题。我对它进行得如此顺利感到惊讶，所以如果这是正常的迹象，那应该是轻而易举的事。

Visual Studio 非常适合安装到特定目录，支持组件除外（检测为已安装并跳过）。在 11 之后安装 10 时，只需要 10 本身和一两个运行时。从那以后，10 和 11 一直运行良好，包括 11 支持将项目编译为 10（支持 XP，这就是我安装两者的原因）。

安装 9 (2008) 确实有点麻烦，但您通常可以在 10 之后安装它并使用反向编译。我不知道如果你安装 11，然后是 10，然后是 9（它可以工作）会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:07:46.973

VS 2012 为我打破了 2010 年，但我不知道它是否会以另一种方式打破。当然，不要在您的生产环境中执行此操作。

*解决方法*：可免费下载的 Windows SDK 具有 vc10 编译器和工具链，您可以在从 VS2012 编译时使用它。只需在项目选项中选择适当的平台工具集。

# mysql - 程序mysql中cursol中的错误查询

> ID：12090083
> 
> 赞同：0
> 
> 时间：2012-08-23T11:00:05.867
> 
> 标签：mysql, cursor, procedure

我对 curosr 有疑问，完全是查询：SELECT Crc32 FROM tableName。我想从 Crc32 列中读取所有行，并根据前四个字符找到一个与四个数字同名的表

错误：

```
0   12:58:57    call ShowNewUserComments("User66")  Error Code: 1146\. Table 'comments.tableName' doesn't exist 
```

调用程序：

```
call ShowNewUserComments("User66"); 
```

代码

```
DELIMITER $$
DROP PROCEDURE IF EXiSTS ShowNewUserComments $$
CREATE PROCEDURE `ShowNewUserComments`(tableName varchar(255)/*, Date TIMESTAMP*/)
BEGIN

             DECLARE recordNotFound INTEGER DEFAULT 0;
             DECLARE oneRow VARCHAR(10) DEFAULT "";
             DECLARE getCrc32,i int (11);
             DECLARE myCursor CURSOR FOR SELECT Crc32 FROM tableName;    
             DECLARE CONTINUE HANDLER FOR NOT FOUND SET recordNotFound = 1; 
             OPEN myCursor;
            set i = 0;
             allRows: LOOP
                FETCH myCursor INTO oneRow;
                   set  i = i + 1;
                     IF recordNotFound THEN
                        LEAVE allRows;
                     END IF;

             END LOOP allRows;
             CLOSE myCursor;

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:17:28.137

您不能直接将变量中的表名替换为 MySQL 中的查询，因为您需要像这样使用动态 sql `PREPARE`：

```
DELIMITER $$
DROP PROCEDURE IF EXiSTS ShowNewUserComments $$
CREATE PROCEDURE `ShowNewUserComments`(tableName varchar(255)/*, Date TIMESTAMP*/)
BEGIN

     DECLARE recordNotFound INTEGER DEFAULT 0;
     DECLARE oneRow VARCHAR(10) DEFAULT "";
     DECLARE getCrc32,i int (11);
     DECLARE myCursor CURSOR FOR SELECT Crc32 FROM temp_table;
     DECLARE CONTINUE HANDLER FOR NOT FOUND SET recordNotFound = 1;

    DROP TEMPORARY TABLE IF EXISTS temp_table;

    SET @query1 = CONCAT('CREATE TEMPORARY  TABLE temp_table AS
                            SELECT Crc32
                            FROM ',tableName,' ');
    PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt;

     OPEN myCursor;
     set i = 0;
     allRows: LOOP
        FETCH myCursor INTO oneRow;
           set  i = i + 1;
             IF recordNotFound THEN
                LEAVE allRows;
             END IF;

     END LOOP allRows;
     CLOSE myCursor;

    DROP TEMPORARY TABLE IF EXISTS temp_table;
END 
```

# java - 选择与 Selenium Webdriver 的链接？

> ID：12090084
> 
> 赞同：7
> 
> 时间：2012-08-23T11:00:06.517
> 
> 标签：java, selenium, selenium-webdriver, xpath

如何选择带有 selenium webdriver 的链接？

之前的硒将通过以下方式完成：

```
 selenium.click("link=Users"); 
```

但是我怎样才能对 webdriver 做同样的事情呢？

我想过

```
 driver.findElement(By.partialLinkText("Users")).click(); 
```

但这不起作用。没有链接被点击！

```
<html>
<body>
<div id="mainpage" class="mainpage">
<div id="pageid" class="pageid">
<div id="body">

<table>
<tbody>
<tr>
<td>
<table>
<tbody>
<tr>
<td>
<div id="id_menu" class="mymenu">
<ul>
<li class="li_class ">
<a href="/user.xhtml">Users</a> 
```

堆栈跟踪：

```
 org.openqa.selenium.NoSuchElementException: Unable to locate element: 
{"method":"partial link text","selector":"Users"} Command duration or timeout: 11.36 
seconds For documentation on this error, please visit: http://seleniumhq.org/exceptions
/no_such_element.html Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 
17:28:14' System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', 
java.version: '1.7.0_02' Driver info: driver.version: RemoteWebDriver Session ID: 
178449d1-4ff3-44f3-b35c-6a158db7c430 error at line: 34 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T12:08:08.970

这应该有效：

```
driver.findElement(By.LinkText("Users")).click(); 
```

通过 LinkText 是可能的

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T23:54:26.693

*XPath 是指向*元素的最精确方法之一。

试试这个：

```
driver.findElement(By.XPath("//li[@class='li_class']/a")).Click(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-14T21:06:46.357

使用 CSS 选择器：

```
a[href*=user.xhtml] 
```

这里有一些编写 cssSelector 的技巧

```
 = --> Equals string
^= --> Starts with string
$= --> Ends with string
*= --> Contains 
~= --> Contains in a list 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T06:30:47.997

我同意 Christoph 的观点——链接文本应该可以。但我采用了一种不同的方法，它一直对我有用。

我需要定位或选择的所有元素都给它们一个 id（没有 CSS，视图不会有任何差异）。这有助于我的测试用例的可读性，为一般的东西编写函数并提高代码的可维护性。仅对于动态生成的代码或我无法使用 id 的地方，我会采用不同的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T12:34:58.643

我认为这会起作用：

```
driver.findElement(By.xpath("//a[@href='/user.xhtml']")).click(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T07:55:18.550

我也遇到了 LinkText 和 LinkPartialText 不起作用的问题。这是因为我使用了 HTMLUnit 驱动程序。使用 FireFox 两种方法都可以正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-20T15:31:13.000

在我的情况下，chromedriver 不允许点击链接，因为表单获取点击。我能够通过使用来解决这个问题：

```
if(driver.toString().contains("chrome")) {
        WebElement form=driver.findElement(By.id("form_id"));
            ((JavascriptExecutor)driver)
            .executeScript("arguments[0].setAttribute('style', 'display: block;')", form); //here I change visibility of element
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-25T17:07:35.237

我在使用 PHP Webdriver 时遇到了类似的问题。LinkText 或 partialLinkText 不起作用，但为搜索提供的文本与 SOURCE 代码中的文本相同。（假设它是链接文本：“用户”）

我一直在摸不着头脑，为什么它不起作用，而在其他任何地方都是如此。然后我看到了不同之处。实际上在源代码中链接文本是Users，但是在显示时它被css text-transform修改为小写，所以它显示为“users”。当我将搜索条件从“用户”更改为“用户”时，它就像有害！

所以请记住 - webdriver 实际上适用于它看到的数据。完全不知道它是区分大小写的！但它确实有效并解决了我的问题。干杯!

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-03-12T07:28:51.423

试试这个：

```
package mypack;
import java.util.List;

import org.openqa.selenium.By;

import mypackage.WebDriver;

import org.openqa.selenium.firefox.FirefoxDriver;

@SuppressWarnings("unused")
public class classnew {

    private static FirefoxDriver driver;

    public static void main(String[] args) {
        //String baseUrl = "http://newtours.demoaut.com/";
      FirefoxDriver Firefoxdriver = new FirefoxDriver();

        driver = null;
        driver.get("http://newtours.demoaut.com");

        String linkText1 = driver.findElement(By.partialLinkText("egis")).getText();
        System.out.println(linkText1);
        String linkText2 = driver.findElement(By.partialLinkText("EGIS")).getText();
        System.out.println(linkText1);  
        driver.quit();
    }
} 
```

# teamcity - Teamcity - 多种构建配置

> ID：12090085
> 
> 赞同：2
> 
> 时间：2012-08-23T11:00:10.263
> 
> 标签：teamcity

我对 TeamCity 很陌生，并且已经玩了几天了。我的 Visual Studio 解决方案有以下项目：

*   SharedComponents：这些是其他项目使用的共享实体和异常类
*   达尔
*   DAL.Tests：DAL 的单元测试
*   BLL
*   BLL.Tests：BLL 的单元测试
*   网页：ASP.NET MVC3 项目

目前，我有一个构建配置设置，一旦更改签入到 SVN，它将编译解决方案并运行所有测试。这很好，但是在某些情况下我不希望这种情况发生：

*   如果仅对 Web 项目进行更改，则仅应重建该项目
*   如果更改是针对 BLL，则应重建 BLL、BLL.Tests 和 Web，然后执行 BLL.Tests。

设置上述方案的最佳方法是什么。如果您能提供帮助，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:49:51.787

您可以将构建配置拆分为几个：

1.  DAL - 触发 DAL 和 DAL.Test 中的更改，使用 msbuild 构建它们并运行测试。
2.  BLL - 与 DAL 相同。
3.  Web - 触发 Web 项目中的更改并重建它。

对于每个，您应该使用 VCS 触发器的“触发器规则”配置结帐路径。添加到第二个配置“完成触发器”，这取决于第一个配置，第三个配置相同，取决​​于第二个。因此，如果您推送与 Dal 相关的更改，它将按照 DAL -> BLL -> Web 的顺序构建所有配置。如果您仅在 BLL 中进行更改，则链将是 BLL -> Web，并且 Web 更改将仅触发一次 Web 构建。

# jquery - 当 HTTP 代码出错时如何解析 JSON Web 服务器响应？

> ID：12090088
> 
> 赞同：6
> 
> 时间：2012-08-23T11:00:13.533
> 
> 标签：jquery

## 设置

在我维护的 Web 应用程序中，有很多 AJAX 调用来提交表单，如下所示：

```
jQuery.post($form.attr("action"), $form.serialize())
    .always(commonProcessing)
    .done(function() {
        // the post succeeded, do something specific (e.g. close a dialog)
    }); 
```

该`commonProcessing`函数在 JSON 响应中查找“众所周知的”部分并采取适当的措施（响应还可能包括特定于请求的信息）。它的内容如下：

```
function commonProcessing(result, outcome) {
    switch (outcome) {
        case "success":
            if (result.notify) {
                // show a growl-style notification
            }
            else if (...) ;
            break;
        case "error":
            // show a generic "unexpected error" notification
            break;
    }
} 
```

## 问题

在许多情况下，我更愿意返回一个 HTTP 错误代码——比如 400 表示提交的表单包含无效数据——因为除了这是事物的自然顺序之外，它还允许我方便地放置“成功的请求” "`.done`处理程序中的代码（如果返回 200 OK，则内容将始终被解析，但`.done`处理程序需要尝试找出这是“错误”还是“真正 OK”响应）。同时，我想在发生错误时用特定信息响应请求（例如，`notify`对象可以包含一条错误消息，准确解释请求的错误之处）。

问题是当返回 HTTP 错误代码时，jQuery 不会尝试解析响应内容，在这种情况下，`result`参数是 jqXHR 对象而不是典型的解析 JSON。

有没有优雅的说法“我知道有错误，但我也希望你解析响应内容”？我当然可以这样做，`$.parseJSON(result.responseText)`因为我们谈论的是 JSON，但这感觉很笨拙，因为它回避了嗅探内容类型并进行解析的所有漂亮的[jQuery 代码。](https://github.com/jquery/jquery/blob/master/src/ajax.js#L798)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:06:42.503

使用 try/catch 代码块怎么样？

```
try{ 
     var response = $.parseJSON(response) etc 
}
catch(error){ 
     console.log(error) //error handling here
} 
```

这就是我用来解释响应不是预期的 JSON 格式而是某种错误代码的实例。如果我误解了这个问题，请提前道歉！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:57:46.827

我不认为您可以修改 jqXHR 对象以使其行为如此。通过 API（[此处](http://api.jquery.com/jQuery.ajax/)）查看可能解决您的问题的最接近我的事情是`overrideMimeType()`方法。就像是：

```
beforeSend: function(xhr){
    xhr.overrideMimeType("application/json; charset=UTF-8");
} 
```

如果您希望以更细粒度的方式进行控制，为什么不手动实现 AJAX 调用并以您需要的格式返回您想要的对象呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:43:40.340

您可以通过以下方式轻松管理回调：

```
$.ajax({
  url: $form.attr("action"),
  type: 'POST',
  data: $form.serialize(),
  complete: function(response) {},
  success: function(response) {},
  error: function(response) {}
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T18:16:44.523

我试图保持对错误响应主体的控制的方法是，我编写了我的 php 来捕获大多数可能出错的东西并仍然返回一个有效的 json 对象，并且在我的 JS 成功回调中，我在那里处理那个对象.

```
success: function( response ) {
    if(response) {

    } else {

    }
},
error: function( xhr ) {
    //everything worse gets sent here
} 
```

从那时起，任何导致丑陋错误代码的真正基本错误都将由错误回调处理。

# c# - 检测服务器和 SQL Server 错误并显示错误页面

> ID：12090089
> 
> 赞同：0
> 
> 时间：2012-08-23T11:00:15.020
> 
> 标签：c#, asp.net, error-handling, iis-6

在我的 C# 代码中，我在所有方法上都使用了 try/catch，这会拾取大部分错误，但不会拾取 404 等一些错误。有谁知道如何获取服务器上发生的所有其他错误或 SQL 服务器已关闭？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:08:00.243

您可以更新 web.config 文件并指定以下内容：

```
<customErrors mode="On">
   <error statusCode="404" redirect="~/error404.aspx" />
</customErrors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:06:02.863

您应该在项目中使用[ELMAH](http://code.google.com/p/elmah/)作为错误处理程序...阅读链接了解更多详细信息。

# css - 无法在 Ext JS 按钮的中心对齐按钮图标

> ID：12090090
> 
> 赞同：2
> 
> 时间：2012-08-23T11:00:20.710
> 
> 标签：css, button, extjs, alignment

我只想在**Ext JS 4.1.1 按钮**上显示一个图标（无文本）。我希望按钮的宽度比图标的宽度长一点。显示时，图标始终左对齐。我希望它位于按钮的中心。

我无法使用`alignTo`方法或`background-position`CSS 实现上述目标。

图标是 32x32px png 文件。

**分机JS代码：**

```
var topToolBar = Ext.create('Ext.toolbar.Toolbar', {
                width: '100%',
                items: [{
                    iconCls: 'home32',
                    width: 60,
                    iconAlign: 'center',
                    scale: 'large'
                }]});

            var master = Ext.create('Ext.panel.Panel', {
                layout: 'anchor',
                anchor: '100% 100%',
                renderTo: Ext.getBody(),
                tbar: [topToolBar]
            }); 
```

**CSS 代码：**

```
.home32 
{
    background-position: center center;
    background-image: url( images/32/home.png ) !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:20:29.600

不要忘记毕竟 Ext Js 是纯 css-html。尝试旧时的经典方式。

按钮定义

```
 xtype:'button',
                    iconCls:'contactIcon80',
                    iconAlign:'top',
                    width:120,
                    height:100,
                    html:'<span class="bigBtn">Damn you hayate/span>' 
```

按钮图标类

```
.contactIcon80 {
background-image: url(../images/calendar80.png) !important;
width:80px!important;
height:80px!important;
margin-right: auto !important;
margin-left: auto !important; 
```

}

Html span 类（如果你有正确的位置，这是为了放置文本）通过这种方式，你可以使用更大的按钮图标大小，而不仅仅是 16x16 - 24x24 - 32x32

```
.bigBtn {
position: absolute;
bottom: 4px  !important; 
```

}

# java - 使用快照在 JAVA AWS sdk 中创建 EC2 实例

> ID：12090092
> 
> 赞同：1
> 
> 时间：2012-08-23T11:00:31.433
> 
> 标签：java, amazon-ec2, amazon-web-services, ec2-ami

我可以使用一些图像使用 java sdk 创建一个 EC2 实例。目前我正在像这样创建它

```
 private static void createInstance()
            throws AmazonServiceException, AmazonClientException, InterruptedException
    {
        RunInstancesRequest runInstancesRequest = new RunInstancesRequest()
        .withInstanceType("m1.small")
        .withImageId("ami-e565ba8c")
        .withMinCount(1)
        .withMaxCount(1)
        .withKeyName("mykey")
        ;
        RunInstancesResult runInstances = ec2.runInstances(runInstancesRequest);

    } 
```

有人可以指导我如何使用图像快照而不是图像本身来创建 ec2 实例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:55:51.727

您必须先从快照创建图像。然后您可以从该图像启动实例。

# ios - 在第一个 IOS 项目 Xcode 4 中获取信号 SIGABRT

> ID：12090093
> 
> 赞同：1
> 
> 时间：2012-08-23T11:00:33.383
> 
> 标签：ios, xcode, ios5, xcode4, sigabrt

我正在尝试在 IO 中创建我的第一个测试应用程序，而我所做的一切都会让我遇到这个错误。我正在使用 xcode 4.4。

该应用程序非常简单。它有一个按钮，当我按下它时，必须出现一个标签和一个图像视图。

我的整个代码是这样的：

```
ViewController.h

//
//  ViewController.h
//  helloWorld_04
//
//

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{

    IBOutlet UILabel *label;
    IBOutlet UIImageView *Kant;
}
@property (nonatomic, retain) IBOutlet UILabel *label;
@property (nonatomic, retain) IBOutlet UIImageView *Kant;
- (IBAction)buttonGuess:(id)sender;

@end 
```

和我的实现文件：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize label,Kant;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)dealloc {
    [label release];
    [Kant release];
    [super dealloc];
}
- (IBAction)buttonGuess:(id)sender {
    label.text=@"Hello World i am back!";
    UIImage *imageSource=[UIImage imageNamed:@"kantStair.png"];
    Kant.image=imageSource;
}
@end 
```

我的错误日志是这样的：

```
2012-08-23 13:38:50.030 helloWorld_04[537:c07] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<ViewController 0x6a5e1f0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key image.'
*** First throw call stack:
(0x14b2022 0xeb2cd6 0x14b1ee1 0x9c3022 0x934f6b 0x934edb 0x94fd50 0x23771a 0x14b3dea 0x141d7f1 0x23626e 0xdc1fc 0xdc779 0xdc99b 0x3b401 0x3b670 0x3b836 0x4272a 0x2d1b 0x13386 0x14274 0x23183 0x23c38 0x17634 0x139cef5 0x1486195 0x13eaff2 0x13e98da 0x13e8d84 0x13e8c9b 0x13c65 0x15626 0x2a22 0x2995)
terminate called throwing an exception(lldb) 
```

它让我在那条线上发出信号：

```
//
//  main.m
//  helloWorld_04
//

//

#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

我在这里阅读了几个答案，但没有找到解决我的问题的方法，这就是为什么我把它变成一个新问题。我认为这可能是连接问题，所以我自己做的是将我的标签和图像“darg and drop”给“file's owner”，但仍然出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:55:19.983

查看您的错误消息，您似乎`image`在 Interface Builder 中定义了某些内容，但不存在。例如，也许你有类似的东西：

![示例 IB 屏幕](../Images/b6eb45ea0aaab1d3a91f8d9ebcaa111a.png)

但你没有`image`财产。您曾经有过一个吗，也许已将其重命名为`Kant`？如果您在 Interface Builder 中定义了类似的内容，请将其删除（通过点击我突出显示的插座旁边的“x”），然后将其再次链接到您的新控件。

* * *

**更新：**

您绝对应该修复上面的错误，希望上面的观察可以帮助您找到它。您的代码中没有错误，但问题无疑在于您的 Interface Builder 链接。

但是，话虽如此，如果你是一个新程序员，我希望你不介意一些不请自来的风格观察。显然，鉴于这是一个风格问题，这些都可以辩论，但我认为这些都代表了既定或新兴的 iOS 编码标准。无论如何，我将来可能会建议：

1.  就像 David H 建议的那样，您应该使用小写的变量名。

2.  您可能应该有这样的`@synthesize`语句`@synthesize label = _label`，或者，如果您使用的是 Xcode 4.4 或更高版本，则完全省略该`@synthesize`语句。（我知道 Interface Builder 可以`@synthesize`为您生成一个简单的语句，但最好的做法是`@synthesize`使用唯一的实例变量名称，这样您就不会意外地将实例变量与属性混淆。）

3.  正如 Born Survivor 所指出的，您应该在`init`和方法中引用您的实例变量`dealloc`（即带前导下划线的变量名），并在其他地方使用属性（带前导）。`self.`

4.  您可能应该省略实例变量并让`@synthesize`语句为您执行这些操作（这样如果您打错字，就不会意外地得到两个实例变量）。

因此，您的代码将变为：

```
//  ViewController.h

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

// note, no braces with instance variables defined
// once upon a time that was recommended by Apple, but no longer
// just let the following @property statements and the subsequent
// @synthesize statement generate the instance variables for you.

@property (retain, nonatomic) IBOutlet UIImageView *kant; // note the lower case "k"
@property (retain, nonatomic) IBOutlet UILabel *label;

- (IBAction)buttonGuess:(id)sender;

@end 
```

和

```
//  ViewController.m

#import "ViewController.h"

@implementation ViewController

@synthesize label = _label;  // note the @synthesize statement let's us define what the instance variable name should be, _label in this case
@synthesize kant  = _kant;

- (void)viewDidUnload
{
    [self setKant:nil];
    [self setLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)dealloc {
    [_kant release];  // note I'm now using the instance variables that begin with the underscore
    [_label release];
    [super dealloc];
}

- (IBAction)buttonGuess:(id)sender
{
    self.label.text = @"Hello World i am back!";  // note, I'm using the properties with the preceding "self."
    UIImage *imageSource = [UIImage imageNamed:@"kantStair.png"];
    self.kant.image = imageSource;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:49:31.637

在 ObjectiveC 中，总是用小写字母命名变量很重要——因为当你合成像“foo”这样的变量时，你会得到“-(id)foo;// getter”和“-(void)setFoo:(id) val;//二传手”。看看 setter 如何使用大写字母。因此，您应该做的第一件事是将“Kant”重命名为“kant”。[按照惯例，只有类的首字母大写，所以你可以帮助像我这样的其他人按照惯例阅读你的代码。]

因此，您要做的第一件事是将“Kant”更改为“kant”，然后返回界面构建器视图并将新命名的变量重新连接到 UIImageView。

如果这不能解决问题，那么您已经连接了“kant”或者发生了其他一些奇怪的事情 - 在设置图像之前添加这行代码：

```
NSLog(@"kant has class %@", NSStringFromClass([kant class]) ); 
```

让我们看看它到底是什么。

# ruby - 将Ruby字符串转换为字符串数组

> ID：12090096
> 
> 赞同：0
> 
> 时间：2012-08-23T11:00:37.480
> 
> 标签：ruby, arrays, string

我有一个这样的字符串：

```
"John Godson Michael Meyer Ludovicio Sforza Cezar Borgia Alessandro Batista" 
```

如何将此字符串转换为字符串数组，例如

```
# ["John", "Godson", "Michael Meyer" (...)] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:02:14.727

只需使用字符串#split

```
"John Godson Michael Meyer Ludovicio Sforza Cezar Borgia Alessandro Batista".split 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:03:42.620

```
"John Godson Michael Meyer Ludovicio Sforza Cezar Borgia Alessandro Batista".split(' ')
#=> ["John", "Godson", "Michael", "Meyer", "Ludovicio", "Sforza", "Cezar", "Borgia", "Alessandro", "Batista"] 
```

# asp.net-mvc - 在托管服务器上部署了 mvc 4 站点，但站点的所有链接都登陆到登录页面而不是各自的页面

> ID：12090105
> 
> 赞同：0
> 
> 时间：2012-08-23T11:01:09.547
> 
> 标签：asp.net-mvc

在托管服务器上部署了 mvc 4 站点，但站点的所有链接都登陆到登录页面，而不是它们各自的页面。我什至测试了我的路线，应用程序在我的本地运行良好。

这是我的路线

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "logon", action = "Index", id = UrlParameter.Optional }
        ); 
```

请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:37:33.817

检查您的 web.config 中的表单身份验证设置，您的控制器类上是否有 [Authorize] 属性？听起来因为用户没有登录，所以他总是被重定向到登录页面。

# c# - 处理时限

> ID：12090106
> 
> 赞同：0
> 
> 时间：2012-08-23T11:01:10.873
> 
> 标签：c#, .net, process

是否可以为流程设置时间限制？我意识到这可以使用多线程来完成。例如，我可以使用一个线程来执行该进程，而另一个线程在一段时间后将其杀死，但是没有更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:37:54.233

您可以生成该进程，等待一段时间，然后将其终止。

```
var proc = Process.Start("myproc.exe");
bool graceful = proc.WaitForExit(10000);  //Wait 10 secs.
if (!graceful)
{
    proc.Kill();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:03:34.063

不，因为这样的解决方案不知道在时间限制过去后如何停止该过程。彻底终止进程是有潜在危险的，所以在一般情况下，进程需要配合才能实现正常关闭。

设置一个计时器并让你的主循环检查表示计时器已过的条件真的不是那么难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:05:29.610

除非正在执行的线程可以定期检查自己并优雅退出，否则不会。在大多数情况下，您不能信任执行线程来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T11:12:02.217

如果您启动该过程，您也可以使用 schtasks /create 来安排它。

这将几乎免费为您提供所需的东西（几乎是因为您的启动过程有点复杂，没有免费的午餐）

```
SCHTASKS /Create /SC DAILY /TN gaming /TR c:\freecell /ST 12:00  /ET 14:00 /K 
```

[关于 schtasks 的知识库文章](http://support.microsoft.com/kb/814596)

# ruby - Watir-webdriver Ajax 响应

> ID：12090108
> 
> 赞同：1
> 
> 时间：2012-08-23T11:01:18.750
> 
> 标签：ruby, watir, watir-webdriver

在运行 watir-web 驱动程序以测试来自我们站点的 Ajax 响应时遇到问题。该站点旨在包含项目列表。添加新项目时，站点将通过 Ajax 提交条目并等待响应以告知站点显示此新条目。我们发现这些 Ajax 响应在 chrome 和 Firefox 中通过 watir 运行页面时返回空白。但是，当尝试在 watir 之外的场景时，Ajax 响应包含数据。我的问题是我们在设置浏览器时是否过度关注某些东西？使用最新版本的 gems 但在 Ubuntu 12.04 上进行测试的附加信息。

这是设置两个浏览器的代码：

```
download_directory = "#{Dir.pwd}/Results"  #download location (FF only)

        profileFF = Selenium::WebDriver::Firefox::Profile.new
        profileFF['browser.download.folderList'] = 2 # custom location
        profileFF['browser.download.dir'] = download_directory
        profileFF['browser.helperApps.neverAsk.saveToDisk'] = "application/msword" #auto save rulw

        c = Watir::Browser.new :chrome 
        f = Watir::Browser.new :firefox  ,:profile => profileFF 
```

# windows - libqxt 编译 - mingw32-make 异常

> ID：12090114
> 
> 赞同：0
> 
> 时间：2012-08-23T11:01:42.630
> 
> 标签：windows, qt, compiler-errors, mingw32, libqxt

我在编译 libqxt 时遇到以下问题。

configure.bat 生成文件，但显示一些警告：

```
c:\Users\Lukasz\Downloads\libqxt-libqxt-7e0d3396b765>configure.bat
   Testing for qmake...
   Testing for mingw32-make...
       Using mingw32-make.
   Testing for optional external libraries.
   If tests fail, some features will not be available.
   Testing for Berkeley DB...
       Berkeley DB disabled.
   Testing for Zero Conf...
       Zero Conf disabled.
   Configuration successful.
   Generating makefiles...
Project MESSAGE: building docs
Project MESSAGE: building core module
Project MESSAGE: building widgets module
Project MESSAGE: building network module
Project MESSAGE: building sql module
Project MESSAGE: building web module
Reading C:/Users/Lukasz/Downloads/libqxt-libqxt-7e0d3396b765/tools/3rdparty/qdoc
3/qdoc3.pro
Reading C:/Users/Lukasz/Downloads/libqxt-libqxt-7e0d3396b765/src/core/core.pro
Reading C:/Users/Lukasz/Downloads/libqxt-libqxt-7e0d3396b765/src/widgets/widgets
.pro
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Reading C:/Users/Lukasz/Downloads/libqxt-libqxt-7e0d3396b765/src/designer/design
er.pro
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Reading C:/Users/Lukasz/Downloads/libqxt-libqxt-7e0d3396b765/src/network/network
.pro
Reading C:/Users/Lukasz/Downloads/libqxt-libqxt-7e0d3396b765/tools/jsonrpcclient
/jsonrpcclient.pro
Reading C:/Users/Lukasz/Downloads/libqxt-libqxt-7e0d3396b765/src/sql/sql.pro
Reading C:/Users/Lukasz/Downloads/libqxt-libqxt-7e0d3396b765/src/web/web.pro
   Makefiles generated. Run mingw32-make now. 
```

mingw32-make 几乎立即中断，但有一个例外：

```
c:\Users\Lukasz\Downloads\libqxt-libqxt-7e0d3396b765>mingw32-make
mingw32-make: Interrupt/Exception caught (code = 0xc00000fd, addr = 0x421963) 
```

源码是从官网下载的。运行 configure 和 mingw32-make 是 README 文件中描述的编译方式。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:01:42.630

答案很简单而且出乎意料 - mingw32-make 在 PATH 环境变量中的括号（“（”符号）存在很大问题。解决方案是从 PATH 中删除所有包含“（”的目录。

可以使用语法在命令行中本地更改 PATH（而不是为任何其他程序更改它）： `set PATH=...`例如，我清理过的 PATH 是：

```
set PATH=C:\QtSDK\mingw\bin;C:\QtSDK\Desktop\Qt\4.8.0\mingw\lib;C:\QtSDK\Desktop\Qt\4.8.0\mingw\bin\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\; 
```

至于获取当前 PATH 值，请使用语法：`echo %PATH%`.

# clearcase - Cleartool 查找没有 contrib 文件的合并

> ID：12090123
> 
> 赞同：3
> 
> 时间：2012-08-23T11:02:02.740
> 
> 标签：clearcase, cleartool

嗨，我想知道是否有办法`cleartool findmerge`不创建 .contrib 文件。合并后必须删除它们很麻烦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:07:18.110

这取决于您的 ClearCase 版本和合并类型，如[本技术说明中](http://www-01.ibm.com/support/docview.wss?uid=swg21147187)所述：

> 这些`.contrib`文件通常用于将文件的先前内容与其新的合并后版本进行比较；此外，这些文件是查看私有的，可以删除。
> 
> 围绕允许最终用户禁用/启用`.contrib`创建的能力进行了讨论；但是，对于 UCM，由于交付或变基活动中涉及的所有结帐都是保留的，因此不会因合并而导致丢失更改。
> 就 UCM 而言，该`.contrib`文件不具有与基本 ClearCase 相同的目的或意义。
> 
> 更改请求 (RFE) RATLC00608266，已打开以改进用于`.contrib`在交付或变基操作后留下文件的逻辑。由于 .contrib 未创建而导致数据丢失没有危险。
> 
> 这种行为在 ClearCase 7.0 中有所改变。其中引入了功能级别 5。使用本机客户端时，在交付和变基期间发生合并时不再生成 contrib 文件（Rational ClearCase Remote Client 继续创建和使用这些文件）

因此，对于 CC7.x 和交付/rebase 类型的合并（即 UCM 合并），您可以避免使用 contrib 文件。
不适用于 CCRC 或基本 ClearCase 合并（由 a 使用`cleartool findmerge`）。
这就是为什么相同的技术说明详细说明了`.contrib`在一个命令中删除多个文件的方法（如Windows`for /R %i IN (*.contrib) do del %i`或`del /s *.contrib*`Windows）。

# extjs - ExtJS hbox - 组合触发器

> ID：12090131
> 
> 赞同：0
> 
> 时间：2012-08-23T11:02:30.763
> 
> 标签：extjs, combobox, panel, hbox

我的 hbox 布局如下

```
 window
 --------------------------
| panel
| Form 
| hbox
|   row 1  combo1 combo2
| form
|  hbox
|   row 2  combo1 combo2
|
|
 -------------------------- 
```

第 2 行是在单击按钮时动态添加的。执行相同的代码将第 1 行和第 2 行添加到 hbox。当我单击第 1 行中的 combo1 时，会单击 roe#2 组合。

知道为什么会发生这种情况，以及关于如何实现单击特定行组合的行为的任何建议显示其商店？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:21:55.423

尝试使用`itemId`表单字段的属性。

参考[文档](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.ComboBox-cfg-itemId) 和[extjs-avoid-using-the-id-property](http://softdevbuilttolast.wordpress.com/2012/06/20/extjs-avoid-using-the-id-property-unless-you-have-to/)

# ios - Keychain 和 NSUserDefault 的区别？

> ID：12090136
> 
> 赞同：19
> 
> 时间：2012-08-23T11:03:03.330
> 
> 标签：ios, objective-c, swift, nsuserdefaults, keychain

我是新手`objective C`，我创建了一个应用程序，我同时使用了`NSUserDefault`和`Keychain`来存储我的用户名和密码。但我无法区分两者。请帮助区分两者。

谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-23T11:12:57.303

**钥匙串**是一个加密的容器，用于保存多个应用程序和安全服务的密码。Apple Inc. 在 Mac OS 和 iOS 中使用钥匙串作为密码管理系统。

**NSUserDefaults**提供了一种基于用户偏好的应用程序行为定制方式。属于 Cocoa 和 Cocoa Touch 的 Foundation 框架。

我从[NSUserdefaults](https://stackoverflow.com/questions/tagged/nsuserdefaults)和[钥匙串的标签信息中得到了这个](https://stackoverflow.com/questions/tagged/keychain)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-22T02:56:25.473

补充：当我们保存用户名和密码时。并从设备中删除应用程序。

在钥匙串中：用户名和密码仍然存在。

在 NSUserDefaults 中：用户名和密码也从您的应用程序中删除。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-09-15T10:36:51.143

***尽量避免在本地保存数据。***

**[钥匙串](https://developer.apple.com/library/content/samplecode/GenericKeychain/Introduction/Intro.html)**- 钥匙串是一种安全和加密的方式来保存用户名、密码等小型存储数据。注意钥匙串数据可以从越狱设备中访问。您可以从[此处](https://developer.apple.com/library/content/samplecode/GenericKeychain/Introduction/Intro.html)获取 Apple 示例代码。

**[钥匙串共享](https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html)-** 启用钥匙串共享允许您的应用与您团队开发的其他应用共享钥匙串中的密码。假设我们创建了两个应用程序，用户可以在其中登录同一个帐户。如果能够在这些应用程序之间共享登录信息，那就太好了。这样，用户只需在其中一个应用程序中登录一次。

**[UserDefaults](https://developer.apple.com/documentation/foundation/userdefaults)** 用户默认数据库的接口，您可以在给定设备上跨应用程序调用持久存储键值对。UserDefaults 不是保存私人数据的安全方式。UserDefaults 在本地存储为 plist，任何人都可以在*./Library/Preferences/com.mycompany.MyAppName.plist中跟踪*

# android - Android文本到语音在某些手机中不起作用

> ID：12090138
> 
> 赞同：1
> 
> 时间：2012-08-23T11:03:18.840
> 
> 标签：android, text-to-speech

这可能不完全适合这个论坛，但我找不到更好的选择......我制作了一个 android 应用程序，可以使用 ANDROID TTS 将我的文本转换为语音。该应用程序在模拟器和 HTC Wildfire S 上运行良好。

我将它上传到市场，然后将它下载到装有 Android 2.2 (FROYO) 的三星 Galaxy S 上，它自动从市场下载了 ANDROID TTS，但它不起作用。该 API 确实会说出所编写的文本，但不会使用与 Wildfire 5 过去和使用的不同语言。

怎么了？我需要安装语言还是什么？

# sql-server - NHibernate 或 SQL Server 2008 性能问题

> ID：12090149
> 
> 赞同：0
> 
> 时间：2012-08-23T11:04:08.667
> 
> 标签：sql-server, sql-server-2008, nhibernate, umbraco, umbraco5

我目前正在开发的网络应用程序有问题。这个应用程序是 Umbraco 5 CMS 的一种定制。问题是它在我的机器和其他开发人员的机器上运行良好，但在生产环境中堆栈。当我尝试浏览它时，我收到“请求超时”错误。

我尝试在本地和生产端使用 dotTrace 分析该站点。而且我发现问题出在方法调用的某个方法“（）”中`SNINativeMethodWrapper.SNIReadSync`。

这是 dotTrace 的屏幕截图：（**热点屏幕**）

![在此处输入图像描述](../Images/ce6c357dd9de7badc3f0364d1285ef23.png)

在开发机器上，相同数量的此方法调用所需的时间是生产服务器上的两倍。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:46:24.523

Umbraco 5 开发已停止，因为版本 5 存在重大性能问题，部分与 nHibernate 的使用有关

以下是第 5 版实施的一些问题的细分：http: [//ayende.com/blog/156577/on-umbracorsquo-s-nhibernatersquo-s-pullout](http://ayende.com/blog/156577/on-umbracorsquo-s-nhibernatersquo-s-pullout)

Umbraco 现在正专注于更新第 4 版，并将很快发布第 6 版（性能非常好！）

# jquery - 哪种数据最适合 HTML5 + jQuery 网页的内容（XML 数据或 JSON）？

> ID：12090157
> 
> 赞同：1
> 
> 时间：2012-08-23T11:04:22.630
> 
> 标签：jquery, xml, json, html, web

我将使用 HTML5 + jQuery 创建动态内容网站。哪种数据格式最适合用于网站**XML**或**JSON**

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:12:05.507

好：

如果你想要传递的只是原子值或原子值的列表或散列，JSON 具有 XML 的许多优点：它可以直接在 Internet 上使用，支持多种应用程序，很容易编写处理 JSON 的程序，它几乎没有可选功能，易于阅读且相当清晰，其设计正式而简洁，JSON 文档易于创建，并且使用 Unicode。

如果您在 Web 浏览器中编写 JavaScript，那么 JSON 就很合适。浏览器中的 XML API 比较笨拙，从 JavaScript 对象到 JSON 的自然映射消除了如果您对 XML 粗心而出现的序列化问题。

JSON优于XML的一个论点是简单。如果您的意思是使用一种数据交换格式而不是两种数据交换格式更简单，那么毫无疑问就是这种情况。如果您的意思是 JSON 本质上比 XML 更简单，那么我不确定这是否如此明显。对于原子值的捆绑，它更简单一些。JavaScript API 肯定更简单。但是我已经看到了用 JSON 表示混合内容的尝试，但事实并非如此。

**XML 比 Web 服务所需的复杂。默认情况下，XML 要求您使用许多 Web 服务不需要成功的复杂功能。**

来源：[http ://digitalbazaar.com/2010/11/22/json-vs-xml/](http://digitalbazaar.com/2010/11/22/json-vs-xml/)

我完全同意。

# php - 计算天数减去周末

> ID：12090158
> 
> 赞同：0
> 
> 时间：2012-08-23T11:04:24.847
> 
> 标签：php

我有一个表单，允许用户使用 2 个 jquery 日期选择器输入事件的长度，然后使用日期将其存储在数据库中。

然后我返回事件持续的天数，但我需要排除周末。

例如，如果事件从周一持续到周一，则返回的结果将为 6。

这是我目前从 2 个日期范围返回天数的方式：

```
<?=(($currentCourseDates)?ceil((strtotime($currentCourseDates[0]['enddate']." 00:00:00") - strtotime($currentCourseDates[0]['startdate']." 00:00:00")) / 86400)+1:0)?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:09:04.480

这里有很多解决方案：[计算](https://stackoverflow.com/questions/336127/calculate-business-days) php 的工作日、使用数组、递归、编号

# javascript - 是否可以从 SWF 将外部 javascript 引用注入到主机页面中？

> ID：12090161
> 
> 赞同：0
> 
> 时间：2012-08-23T11:04:32.340
> 
> 标签：javascript, actionscript-3, flash

我有一个 SWF 广告需要调用 Facebook API，为此我需要在主机 HTML 页面中提供以下单行引用：

```
<script type="text/javascript" src="//connect.facebook.net/en_US/all.js"></script> 
```

由于我正在处理广告，因此我无法控制主机页面。我知道我可以将函数注入页面（这里有一个很好的参考：[http ://www.actionscript.org/resources/articles/745/4/JavaScript-and-VBScript-Injection-in-ActionScript-3/ Page1.html](http://www.actionscript.org/resources/articles/745/4/JavaScript-and-VBScript-Injection-in-ActionScript-3/Page4.html)），但我还没有找到一种方法来添加对外部托管脚本的引用。

有谁知道这是否可以做到，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:55:23.777

只需在文档中动态添加一个 SCRIPT 标签。您可以通过 ExternalInterface 运行匿名函数来做到这一点：

```
var js:Array = [
'var script = document.createElement("SCRIPT")',
'script.src = "http://connect.facebook.net/en_US/all.js"',
'var head = document.getElementsByTagName("HEAD")[0]',
'head.appendChild(script)'
];
ExternalInterface.call('(function(){' + js.join(';') + '})()'); 
```

# captcha - 你最喜欢的验证码脚本是什么？

> ID：12090164
> 
> 赞同：0
> 
> 时间：2012-08-23T11:04:54.083
> 
> 标签：captcha

我想在一个地方收集有关流行验证码脚本的信息。请写出你最喜欢的链接！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:17:25.910

你可以试试

1.  [重新验证](http://recaptcha.net)
2.  [文本验证码](http://textcaptcha.com)
3.  [皮卡普查](http://www.picatcha.com/#&panel1-1)
4.  [核桃仁](http://www.nucaptcha.com/home)
5.  解决媒体等。

但它们都不是 100% 有用的，而且验证码似乎也过时了，因为大多数垃圾邮件发送者都是人类。如果您使用验证码，最好的解决方案是使用独特的算法[创建您自己的验证码。](http://www.webgalli.com/blog/php-captcha-security-images/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:34:35.557

[http://recaptcha.net/](http://recaptcha.net/) “recaptcha” 帮助对旧书进行 OCR 化，从而造福于世界

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:07:42.207

以前我用过[这个](http://www.captcha.net/)。但现在我正在创建自己的，比如简单的数学计算或简单的文本。

# path - 找到可执行文件的路径

> ID：12090170
> 
> 赞同：35
> 
> 时间：2012-08-23T11:05:07.067
> 
> 标签：path, go

我使用 Go 为各种平台编译一个程序，并通过调用相对路径或仅通过其名称（如果它在 PATH 变量中）来运行它。

是否有可能找出可执行文件的位置？

比如说，我的程序叫做“ `foo`（`.exe`）”。我可以运行`./foo`, `foo`（如果它在 PATH 中）, `../../subdir/subdir/foo`.

我尝试过使用`os.Args[0]`，我想我应该检查程序名称是否包含除“foo”之外的其他内容。如果是，使用`filepath.Abs`，如果不是，使用（我找不到函数名，有一个函数可以通过 PATH 来检查程序在哪里）。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-23T07:27:58.357

使用包[osext](https://github.com/kardianos/osext)。

它提供`Executable()`了返回当前程序可执行文件的绝对路径的函数。它可以在系统之间移植。

[在线文档](http://godoc.org/github.com/kardianos/osext)

```
package main

import (
    "github.com/kardianos/osext"
    "fmt"
)

func main() {
    filename, _ := osext.Executable()
    fmt.Println(filename)
} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2017-02-22T16:18:06.157

您可以[`os.Executable`](https://golang.org/pkg/os/#Executable)用于获取 Go 1.8 或更高版本的可执行路径。

```
import (
    "os"
    "path"
    "log"
)

func main() {
    ex, err := os.Executable()
    if err != nil { log.Fatal(err) }
    dir := path.Dir(ex)
    log.Print(dir)
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T11:09:50.750

这不是特定于 go 的（除非 go“标准库”包含一些功能），并且没有可移植的解决方案。有关某些常见平台上的解决方案，请参阅[如何在 C 中找到可执行文件的位置？](https://stackoverflow.com/questions/933850/how-to-find-the-location-of-the-executable-in-c) 或[在没有 /proc/self/exe 的情况下查找当前可执行文件的路径](https://stackoverflow.com/questions/1023306/finding-current-executables-path-without-proc-self-exe/1024937#1024937)。

# php - 未定义常量和通过引用分配新的返回值错误

> ID：12090173
> 
> 赞同：0
> 
> 时间：2012-08-23T11:05:15.813
> 
> 标签：php, mysql

我有一个数据库类，我在其中使用 required_once 调用配置文件。我已经使用define() 声明了一些常量。我收到未定义常量的错误，并且还通过引用分配了 new 的返回值。这是配置文件代码：

```
<?php

// Database Constants
defined("DB_SERVER") ? null : define("DB_SERVER", "localhost");
defined("DB_USER")   ? null : define("DB_USER", "root");
defined("DB_PASS")   ? null : define("DB_PASS", "");
defined("DB_NAME")   ? null : define("DB_NAME", "shareysmile");

?> 
```

这是我的数据库类代码（两者都在同一个目录中，所以这不是问题）：

```
<?php
require_once("config.php");

class MySQLDatabase {

    private $connection;
    public $last_query;
    private $magic_quotes_active;
    private $real_escape_string_exists;

  function __construct() {
    $this->open_connection();
        $this->magic_quotes_active = get_magic_quotes_gpc();
        $this->real_escape_string_exists = function_exists( "mysql_real_escape_string" );
  }

    public function open_connection() {
        $this->connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);
        if (!$this->connection) {
            die("Database connection failed: " . mysql_error());
        } else {
            $db_select = mysql_select_db(DB_NAME, $this->connection);
            if (!$db_select) {
                die("Database selection failed: " . mysql_error());
            }
        }
    }

    public function close_connection() {
        if(isset($this->connection)) {
            mysql_close($this->connection);
            unset($this->connection);
        }
    }

    public function query($sql) {
        $this->last_query = $sql;
        $result = mysql_query($sql, $this->connection);
        $this->confirm_query($result);
        return $result;
    }

    public function escape_value( $value ) {
        if( $this->real_escape_string_exists ) { // PHP v4.3.0 or higher
            // undo any magic quote effects so mysql_real_escape_string can do the work
            if( $this->magic_quotes_active ) { $value = stripslashes( $value ); }
            $value = mysql_real_escape_string( $value );
        } else { // before PHP v4.3.0
            // if magic quotes aren't already on then add slashes manually
            if( !$this->magic_quotes_active ) { $value = addslashes( $value ); }
            // if magic quotes are active, then the slashes already exist
        }
        return $value;
    }

    // "database-neutral" methods
  public function fetch_array($result_set) {
    return mysql_fetch_array($result_set);
  }

  public function num_rows($result_set) {
   return mysql_num_rows($result_set);
  }

  public function insert_id() {
    // get the last id inserted over the current db connection
    return mysql_insert_id($this->connection);
  }

  public function affected_rows() {
    return mysql_affected_rows($this->connection);
  }

    private function confirm_query($result) {
        if (!$result) {
        $output = "Database query failed: " . mysql_error() . "<br /><br />";
        //$output .= "Last SQL query: " . $this->last_query;
        die( $output );
        }
    }

}

$database = new MySQLDatabase();

?> 
```

我无法理解这个问题，有人可以帮忙吗？以下是我得到的确切错误：

```
Deprecated: Assigning the return value of new by reference is deprecated in D:\xampp\php\PEAR\Config.php on line 80

Deprecated: Assigning the return value of new by reference is deprecated in D:\xampp\php\PEAR\Config.php on line 166

Notice: Use of undefined constant DB_SERVER - assumed 'DB_SERVER' in D:\xampp\htdocs\sharesmile\src\database.php on line 18

Notice: Use of undefined constant DB_USER - assumed 'DB_USER' in D:\xampp\htdocs\sharesmile\src\database.php on line 18

Notice: Use of undefined constant DB_PASS - assumed 'DB_PASS' in D:\xampp\htdocs\sharesmile\src\database.php on line 18 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:13:54.757

看来`config.php`您包含的是 include `D:\xampp\php\PEAR\Config.php`，而不是您的配置文件。这是因为`PEAR`目录的优先级高于`.`包含路径。使用绝对路径 ( `__DIR__ . '/config.php'`) 使其工作可靠，或更改包含路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T19:12:36.523

简单地改变

```
require_once("config.php"); 
```

和

```
require_once("../includes/config.php"); 
```

在你的`database.php`文件中。

我假设这两个文件都在这里的包含目录中。

# firefox - websockets 是否仅适用于 safari 浏览器？

> ID：12090184
> 
> 赞同：0
> 
> 时间：2012-08-23T11:05:54.413
> 
> 标签：firefox, google-chrome, safari

我尝试使用 websockets 实现聊天应用程序。但问题是，它仅适用于 safari 5。当我尝试在 Firefox v14 或 Chrome v21 中执行时，出现错误“不支持的 Websocket 版本：13”。我认为这些版本Firefox 和 Chrome 支持 Websockets，但我不知道如何消除该错误。 [http://angelozerr.wordpress.com/2011/07/23/websockets_jetty_step1/](http://angelozerr.wordpress.com/2011/07/23/websockets_jetty_step1/)从这个 URL 我写了源代码聊天应用程序。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:23:24.693

Safari 5 仅支持 WebSocket 的旧草稿版本。其他浏览器的所有当前版本（包括 safari 6）都支持最终的 RFC 6455 版本（即版本 13）。您使用的 websocket 服务器很可能只支持草案规范客户端。您可能需要升级到最新版本的服务器软件/库，或者仔细检查您的 websocket 服务器是否支持 RFC6455。

# mysql - MySQL 在函数中使用表列来创建用于排序的别名

> ID：12090185
> 
> 赞同：0
> 
> 时间：2012-08-23T11:05:59.180
> 
> 标签：mysql, select

听起来比实际上要复杂得多。这是我在 SELECT 部分中尝试做的事情：

```
SELECT TIMESTAMPADD(
          UCASE(
                 SUBSTRING(offset_unit,1,CHAR_LENGTH(offset_unit)-1)
                ),1,'2003-01-02') as offset_date 
```

**offset_unit**是数据库中的一个 VARCHAR 列。它包含以下之一：“小时”、“分钟”。

**偏移量**是一个 INT。

在删除最后一个字符（'s'）之后，我试图将 offset_unit 转换为大写，这样我就可以有一个适当的间隔（MINUTE，HOUR ...），这样我就可以得到一个可以在之后排序时使用的日期，但 MySQL 不断抛出错误。我已经通过一次添加一个函数来测试每个步骤，并且只有在我添加 TIMESTAMPADD 后它才会失败。如果我手动输入 MINUTE 则它可以工作。

有什么办法让这个工作？

附加信息：我在 CakePHP 1.3 中运行它，在 'fields' 数组中的一个查找中，但这不应该是重要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:23:05.637

这可以通过使用`CASE WHEN`子句轻松实现：

```
SELECT (CASE 
            WHEN offset_unit = 'HOURS' 
                   THEN TIMESTAMPADD(HOUR,`offset`,'2003-01-02')
            WHEN offset_unit = 'MINUTES' 
                   THEN TIMESTAMPADD(MINUTE,`offset`,'2003-01-02')
        END) AS offset_date
FROM my_table; 
```

[在此处查看 SQLFIDDLE 演示](http://sqlfiddle.com/#!2/c780d/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:22:53.087

它不起作用，因为`TIMESTAMPADD`第一个参数不是字符串，而是*单位*关键字，例如`MINUTE`. 我的猜测是，您需要分两步执行此操作，首先获取单元，然后使用正确的关键字构造查询。

# android - 我在哪里可以下载 Android 2.6.29 内核源代码？

> ID：12090187
> 
> 赞同：0
> 
> 时间：2012-08-23T11:06:05.023
> 
> 标签：android, open-source, kernel

那里：[https](https://android.googlesource.com/kernel/msm) ://android.googlesource.com/kernel/msm是最新版本

但我需要 2.6.29。我在哪里可以下载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:21:59.490

试试这个：[下载Android内核源代码](https://stackoverflow.com/questions/5178386/download-android-kernel-source-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:38:11.963

Android.git.linaro.org 似乎有 2.6.29 - 至少根据本页底部的列表他们这样做：

[http://android.git.linaro.org/gitweb?p=kernel/common.git;a=summary](http://android.git.linaro.org/gitweb?p=kernel/common.git;a=summary)

（看看'heads'，[http://android.git.linaro.org/git/kernel/common.git，archive/android-2.6.29](http://android.git.linaro.org/git/kernel/common.git)）

# android - 使用 XML Dom Parser 解析时如何检查根节点值？

> ID：12090189
> 
> 赞同：1
> 
> 时间：2012-08-23T11:06:08.123
> 
> 标签：android, xml, parsing, dom

我有一个 XML 文件，看起来像这样::

```
<Note>
     <NoteId>13328</NoteId>
     <NoteTitle>hiiiii</NoteTitle>
     <NoteDescription>Hi</NoteDescription>
</Note> 
```

我成功解析了这种 XML。我的问题是，当我触发 web 服务时，如果没有来自服务器的身份验证，那么 web 服务响应如下：

```
<AuthenticationError>An Active Session Already Exists For This User.</AuthenticationError> 
```

那么我如何检查根节点是“身份验证错误”或“注释”。如果我得到身份验证错误标签，那么我怎样才能得到它的节点值，即“此用户的活动会话已经存在。”？？

我的 XML 解析代码是这样的::

```
 Element node=null;

node = (Element)result.getElementsByTagName("Notes").item(0);
websiteList = node.getElementsByTagName("Note");

for(int j=0;j<websiteList.getLength();j++)
{                               
    Element checkNode=(Element)websiteList.item(j);
    MessagesInbox msg_inbox=new MessagesInbox();

    msg_inbox.note_id = getValueFromNode(checkNode,"NoteId");
    msg_inbox.note_title = getValueFromNode(checkNode,"NoteTitle");
    msg_inbox.note_description = getValueFromNode(checkNode,"NoteDescription");

    arr_msg_inbox_list.add(msg_inbox);
} 
```

我希望我的问题很清楚......请尽快提供解决方案。提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:09:35.580

您可以通过调用此方法获取根节点引用 - `document.getDocumentElement()`。

```
Element root=document.getDocumentElement();
if(root.getNodeName().equals("AuthenticationError")){
  //get text content 
   String str=root.getTextContent();
}else{
  //
} 
```

# android - Android appcelerator钛程序运行问题？

> ID：12090190
> 
> 赞同：0
> 
> 时间：2012-08-23T11:06:16.253
> 
> 标签：android, titanium, appcelerator, sample

我对钛中的 Android 应用程序非常陌生，当我在 Android 模拟器中运行应用程序时，我在安装 Windows7 后成功创建了一个示例项目，但遇到以下问题：

```
 [ERROR] 'xcopy' is not recognized as an internal or external command,
    [ERROR] operable program or batch file.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] The system cannot find the path specified.
    [ERROR] Exception occured while building Android project:
    [ERROR] Traceback (most recent call last):
    [ERROR]   File "C:\Users\User\AppData\Roaming\Titanium\mobilesdk\win32\2.1.1.GA\android\builder.py", line 2236, in <module>
    [ERROR]     s.build_and_run(False, avd_id, debugger_host=debugger_host)
    [ERROR]   File "C:\Users\User\AppData\Roaming\Titanium\mobilesdk\win32\2.1.1.GA\android\builder.py", line 2006, in build_and_run
    [ERROR]     for avd_props in avd.get_avds(self.sdk):
    [ERROR]   File "C:\Users\User\AppData\Roaming\Titanium\mobilesdk\win32\2.1.1.GA\android\avd.py", line 23, in get_avds
    [ERROR]     for line in run.run([sdk.get_android(),'list','target'],debug=False).split("\n"):
    [ERROR] AttributeError: 'NoneType' object has no attribute 'split'
    [ERROR] Application Installer abnormal process termination. 
```

进程退出值为 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:36:51.590

看起来 Titanium 无法找到与 SDK 或模拟器相关的文件。Titanium 的设置和运行相当复杂（尽管它最近有所改进）。确保遵循说明中的每一步（[http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Quick_Start](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Quick_Start)），因为即使缺少一个也会导致像你一样的错误。

具体查看此链接：[http ://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Setting_up_Titanium_Studio-section-30086257_SettingupTitaniumStudio-AndroidSDKConfiguration](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Setting_up_Titanium_Studio-section-30086257_SettingupTitaniumStudio-AndroidSDKConfiguration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:18:03.423

我遇到了同样的问题，并将其添加到 PATH 环境变量的开头为我修复了它：

```
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem; 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T09:47:11.993

根据此设置您的路径：[http](http://docs.appcelerator.com/titanium/2.1/#!/guide/Software_Locations_and_Environment_Variables) ://docs.appcelerator.com/titanium/2.1/#!/guide/Software_Locations_and_Environment_Variables 我相信这会解决您的问题。我从这个链接解决了我的问题，没有别的。

# jquery-ui - 将 jQuery 自动完成输入的 z-index 值设置为高于结果列表本身的级别

> ID：12090191
> 
> 赞同：9
> 
> 时间：2012-08-23T11:06:15.760
> 
> 标签：jquery-ui, autocomplete, z-index, shadows

jQuery Autocomplete 小部件的默认行为是将结果列表放置在输入上方一个 z-index 级别，以便后者始终可见，但在我的情况下，这具有遮盖文本输入元素的不良影响。

我尝试在 open 方法中将 z-index 值输入元素设置为至少比结果列表高一级，但没有太大成功：

```
open: function () {
    setTimeout(function () {
        $(this).css('zIndex', 10000);
    }, 1);
},
close: function () {
    $(this).css('zIndex', 0);
} 
```

输入元素的 z-index 级别确实提升为 10000，而结果列表的 z-index 级别仍保持在级别 1，但输入元素仍显示在其下方。

有没有人知道为什么会这样？结果列表和输入元素的位置属性分别设置为绝对和相对。这可能是原因吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-26T15:37:41.590

您可以通过向样式集添加一个简单的规则来做到这一点：

```
#your_input {
    position: relative;
    z-index: 10000;
}
.ui-autocomplete {
     z-index: 9999 !important;
} 
```

那应该可以完成所有工作，我在萤火虫中对其进行了测试

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-11T10:18:16.800

这段代码为我解决了 z-index 的问题（jQueryUI 1.8），没有任何额外的 CSS 或超时

```
open: function () {
    $(this).autocomplete('widget').zIndex(10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:21:02.607

你真的不需要摆弄`z-index`-

```
.shadow {
  -moz-box-shadow:    2px 2px 2px 1px #ccc;
  -webkit-box-shadow: 2px 2px 2px 1px #ccc;
  box-shadow:         2px 2px 2px 1px #ccc;
} 
```

[演示](http://jsfiddle.net/mrobin/GYPcf/)

# ruby-on-rails-3 - 转换用户时区的日期和小时

> ID：12090195
> 
> 赞同：0
> 
> 时间：2012-08-23T11:06:40.893
> 
> 标签：ruby-on-rails-3, postgresql, timezone

我想将组日期（天+小时）转换为用户时区以显示列表，我不想更新数据库。我有几个小组，这段代码非常慢。

```
# GROUP.RB
# day  -> Date
# hour -> Time
# wday -> Integer
.
.
groups.each do |g|
    new_day = g.in_gmt_day(user_time_zone) # <-- Concat group.day with group.hour and convert the result day with the user time zone.
    g.wday = new_day.wday
    g.hour = new_day
end
.
. 
```

任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:05:11.600

让 Postgres 为你做这件事：

```
SELECT (day + hour) AT TIME ZONE '<source tz>' AT TIME ZONE 'localtime'
FROM   groups; 
```

这确实

1.  `timestamp [without time zone]`从两列数据类型中创建一个，`date`并且`time`（假设这里的问题对确切的数据类型含糊不清）：

    ```
    day + hour 
    ```

2.  将此时间戳设置为源的时区，我们以“欧洲/伦敦”为例。结果为`timestamp with time zone`（或`timestamptz`简称）：

    ```
    (day + hour) AT TIME ZONE 'Europe/London' 
    ```

3.  显示等效的 local `timestamp [without time zone]`：

    ```
    (day + hour) AT TIME ZONE 'Europe/London' AT TIME ZONE 'localtime' 
    ```

从这里你可以对这个值做任何事情，比如一次又一次地分割，或者用你喜欢的任何方式格式化它`to_char()`：

```
WITH x AS (
   SELECT (day + hour) AT TIME ZONE 'Europe/London' AT TIME ZONE 'localtime' AS ts
   FROM   groups
   )
SELECT ts::date AS day, ts::time AS hour, to_char(ts, 'HH24') AS h24
FROM   x; 
```

# iphone - 如何在 iPhone 上切换蜂窝数据

> ID：12090196
> 
> 赞同：5
> 
> 时间：2012-08-23T11:06:40.447
> 
> 标签：iphone, objective-c, jailbreak, iphone-privateapi

**我知道这只有通过私有 API 才有可能，这是为了越狱调整而不是 AppStore**

我正在尝试切换 iPhone 的蜂窝数据选项。我找到了适用于蓝牙、飞行模式、wifi 和 GPS 的 API，但没有找到适用于 3G 或蜂窝数据的 API。

在哪里可以找到 3G 和蜂窝的 API？

# jquery - TypeError：使用 ajax 时 google.load 不是函数

> ID：12090197
> 
> 赞同：3
> 
> 时间：2012-08-23T11:06:42.100
> 
> 标签：jquery, ajax, google-visualization, google.load

我正在使用谷歌图表（termcloud）来显示一些数据。我可以将其作为页面上的静态功能正常工作，但是当我尝试通过 ajax 加载图表及其资产时，它似乎一直在抛出错误：

```
'TypeError: google.load is not a function' 
```

这是我的ajax函数：

```
$("li.contentpanel").click(function() {

$("#content-panel").show();

$('#content-panel').animate({
    width: '540'
}, 500, function() {
    var dataString = 'alert=1';
    $.ajax({
    type: "POST",
    url: "<?php echo site_url($topicmaplink);?>",
    data: dataString,
    cache: false,

    success: function(html){
        $("#content-panel #inner").html(html);
    }
}); 
```

});

这是被调用的页面：

（JSAPI 和 termcloud 插件文件加载在本页顶部）

```
$(function() {

  google.load("visualization", "1");
  google.setOnLoadCallback(draw);
  function draw() {
    data = new google.visualization.DataTable();
    data.addColumn('string', 'Label');
    data.addColumn('number', 'Value');
    data.addColumn('string', 'Link');
    data.addRows(<?php echo sizeof($topics);?>);
    <?php 
    $trans = array("ã" => "a", "³" => "3", "º" => "0", "â" => "a", 
        "¡" => ";", "'" => "", "\n" => "",'"' => '');
    shuffle($topics);
    for($j=0;$j<sizeof($topics);$j++){
      $nonforeignkeyword = strtr($topics[$j]['keyword'],$trans);
      $totalnumber = $topics[$j]['occurrence'];
      echo 'data.setValue('.$j.', 0, "'.trim($nonforeignkeyword).'");';
      echo 'data.setValue('.$j.', 1, '.$totalnumber.');';
      echo 'data.setValue('.$j.', 2, "'.$partlink.'/searchterm||'.trim(rawurlencode($nonforeignkeyword)).'");';
    }
    ?>
    var outputDiv = document.getElementById('cp-tmap');
    var tc = new TermCloud(outputDiv);
    tc.draw(data, null);
  }
}); 
```

即使我从通过 ajax 调用的页面中删除 JSAPI 和 termcloud js 文件并将它们放在被调用到页面的同一页面上似乎重定向到 google.com 并挂在空白页面上。

有谁知道我在这里哪里出错了？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:48:25.497

为可能遇到相同问题的任何人解决了此问题。在 google.load 和 setOnLoadCallback 上删除，并在绘制数据表后将它们放在自己的回调函数中：

```
<pre>
<code>
  //google.load("visualization", "1");
  //google.setOnLoadCallback(draw);
  function draw() {
    data = new google.visualization.DataTable();
    data.addColumn('string', 'Label');
    data.addColumn('number', 'Value');
    data.addColumn('string', 'Link');
    data.addRows(<?php echo sizeof($topics);?>);
    <?php 
    $trans = array("ã" => "a", "³" => "3", "º" => "0", "â" => "a", "¡" => ";", "'" => "", "\n" => "",'"' => '');
    shuffle($topics);
    for($j=0;$j<sizeof($topics);$j++){
      $nonforeignkeyword = strtr($topics[$j]['keyword'],$trans);
      $totalnumber = $topics[$j]['occurrence'];
      echo 'data.setValue('.$j.', 0, "'.trim($nonforeignkeyword).'");';
      echo 'data.setValue('.$j.', 1, '.$totalnumber.');';
      echo 'data.setValue('.$j.', 2, "'.$partlink.'/authorname||'.trim(rawurlencode($nonforeignkeyword)).'");';
    }
    ?>
     var outputDiv = document.getElementById('cp-tmap');
    var tc = new TermCloud(outputDiv);
    tc.draw(data, null);
  }

$(document).ready(function(){ 
    setTimeout(function(){ 
        google.load("visualization", "1",{"callback" : draw});  
  }, 100); 
}); 
</code>
</pre> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-01T05:16:58.257

```
You need to add this script tag into your index.html

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"> </script>

You can check this from google charts site. 
```

[来自谷歌的地理图表](https://developers.google.com/chart/interactive/docs/gallery/geochart)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T22:19:41.563

我遇到了类似的问题，我的绘图功能无法找到它正在寻找的元素。它似乎失败了：

```
document.getElementById('map-canvas'); 
```

我发现原因是`google.load("visualization", "1");`必须调用`document.write`，这意味着当我试图抓取元素时 DOM 是完全空的。

我通过将它放入 index.html 来修复它，`google.load`因此在它到达我的 draw() 函数之前加载了可视化

# c++ - 非法调用非静态成员函数

> ID：12090200
> 
> 赞同：2
> 
> 时间：2012-08-23T11:06:56.093
> 
> 标签：c++, function, call, non-static

我希望制作一个可以计算几乎任何长度的数字的计算器。

我需要的第一个函数是将字符串转换为链表，然后返回指向链表头部的指针。

但是，编译时遇到错误：错误 C2352: 'main::StringToList' : 非法调用非静态成员。行数：7；

我为您提供了我的 main.cpp 和 main.h 文件。

感谢任何

## 主文件

```
#include "main.h"

int main()
{
main::node *head = main::StringToList("123");

main::node *temp = new main::node;

temp = head;
while (temp->next != NULL)
{
    cout << temp->data;
    temp = temp->next;
}

std::cout << "\nThe program has completed successfully\n\n";
system("PAUSE");
return 0;
}

main::node * StringToList(string number) 
{

int loopTimes = number.length() - 1; 
int looper = 0;         
int *i = new int;       
i = &looper;            
main::node *temp = new main::node;  
main::node *head;               
head = temp;            
for ( i = &loopTimes ; *i >= 0; *i = *i - 1) 
{
    temp->data = number[*i] - 48;   
    main::node *temp2 = new main::node;         
    temp->next = temp2;             
    temp = temp2;                   
}
temp->next = NULL;                  
return head;
} 
```

## 主文件

```
#ifndef MAIN_H
#define MAIN_H

#include <iostream>
#include <string>

using namespace std;

class main
{
public:
typedef struct node
{
    int data;
    node *next;
};
node* StringToList (string number);
};

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:10:49.523

您需要实例化您的主类并调用 StringToList 作为成员：

```
main* m = new main;
main::node *head = m->StringToList("123");
...
delete m; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:09:18.537

您必须声明`StringToList`它`static`才能工作：

```
static node* StringToList(string number); 
```

在这一行：

```
main::node *head = main::StringToList("123"); 
```

您试图在`StringToList`没有首先创建类型对象的情况下调用`main`。因为它是一个非静态成员函数，所以这不起作用。你必须这样做：

```
main foo;
main::node *head foo.StringToList("123"); 
```

但是，这对您的用例没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:11:11.577

由于`node* StringToList (string number);`不是静态的，因此您不能将其称为`main::StringToList("123");`

先创建一个 main 对象，然后像这样调用它

```
main mn;
mn.StringToList("123"); 
```

否则声明`node* StringToList (string number);`为`static node* StringToList (string number);`

# php - 文档大小超过 32 MB 的 no-sql 数据库？

> ID：12090204
> 
> 赞同：2
> 
> 时间：2012-08-23T11:07:04.843
> 
> 标签：php, python, mongodb, size, limit

我需要`python`和`php`支持。我目前正在使用`mongodb`它，它对我的​​数据（测试结果）非常有用，但我需要存储超过 32 MB 且超过 16 MB 的 mongo 限制的不同类型测试的结果。

目前每个测试都是一个大的 python 字典，我检索并用`php`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:50:06.217

每个 MongoDB BSON 文档最多可以存储 16MB 的数据（例如，使用 pymongo Binary 数据类型）。对于任意大数据，您想使用 GridFS，它基本上将您的数据存储为块 + 额外的元数据。当您使用具有复制功能（副本集）的 MongoDB 时，您将拥有一种分布式二进制存储（不要将其与分布式文件系统混为一谈（不与本地文件系统集成）。

# html - 部分和文章标签

> ID：12090207
> 
> 赞同：1
> 
> 时间：2012-08-23T11:07:20.377
> 
> 标签：html

我有一个非常简单的问题，哪一个在语义上是正确的：

*   `article`标签里面有`section`标签吗？
*   `section`标签里面有`article`标签吗？

我会很感激对此的所有意见，因为我用谷歌搜索它并且我有各种各样的搜索结果（：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:12:07.880

## [部分](https://developer.mozilla.org/en-US/docs/HTML/Element/section)

HTML 部分元素 ( `<section>`) 表示文档的通用部分，即内容的主题分组，通常带有标题。

请参阅[**使用上下文**](https://developer.mozilla.org/en-US/docs/HTML/Element/section)中[**允许的父元素**](https://developer.mozilla.org/en-US/docs/HTML/Element/section)[](https://developer.mozilla.org/en-US/docs/HTML/Element/section)

 **## [文章](https://developer.mozilla.org/en-US/docs/HTML/Element/article)

HTML 文章元素 ( `<article>`) 表示文档、页面、应用程序或站点中的自包含组合，旨在独立分发或可重复使用，例如在联合中。这可以是论坛帖子、杂志或报纸文章、博客条目、用户提交的评论、交互式小部件或小工具，或任何其他独立的内容项目。

请参阅[**使用上下文**](https://developer.mozilla.org/en-US/docs/HTML/Element/article)中[**允许的父元素**](https://developer.mozilla.org/en-US/docs/HTML/Element/article)[](https://developer.mozilla.org/en-US/docs/HTML/Element/article)

 **[**选择哪一个？**](http://oli.jp/2009/html5-structure1/)

> 要考虑 HTML4，我们可以将其与`<p>`和进行比较`<blockquote>`。两者都是文本的块级元素，但`<blockquote>`就像 的子集`<p>`，具有更具体的含义（“这是一个引用文本块”）。`<section>`与`<article>`;相同 `<section>`指相关内容，但`<article>`指的是一个独立的相关内容，即使在页面上下文之外（页面的页眉和页脚等）。
> 
> 可能令人困惑的部分是它`<section>`可以用于页面的某些部分（例如，主要内容栏，主页上的新闻部分）并包含`<article>`s，也可以用于 long 的部分`<article>`（即在 内部`<article>`）。

有关更多许可，请参阅[**本文**](http://oli.jp/2009/html5-structure1/)。****

# android - android：从后台到前台获取一个 singleTask 活动

> ID：12090208
> 
> 赞同：3
> 
> 时间：2012-08-23T11:07:23.817
> 
> 标签：android, android-activity

我正在使用 phonegap 和移动 jquery 开发一个应用程序。

我的应用程序中有一个点在后台运行，如果从 js 触发事件，我想让我的应用程序进入前台。

如何让我的应用程序从后台进入前台。我有一个具有以下属性的活动：

```
android:configChanges="orientation|keyboardHidden|screenLayout"
        android:screenOrientation="portrait"
        android:windowSoftInputMode="adjustPan" 
        android:launchMode="singleTask"        
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" 
```

我试图让我的应用程序在前台是：

```
 Intent intent = new Intent(mContext , MainActivity.class);
    intent.setAction(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);
    mContext.startActivity(intent); 
```

和

```
mContext.startActivity(((Activity)mContext).getIntent()); 
```

（MainActivity 是我的应用程序中唯一的活动）但它不起作用。我正在使用安卓 4.0。

更新：在 android 2.3 中工作正常，但在 android 4.0 中不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:22:58.707

经过努力，我得到了一个解决方案......我实现了一个广播监听器。当我收到任何事件时，我会发送一个广播并在广播接收器中启动应用程序。

```
Intent intent = new Intent(mContext, NotificationBroadcastReceiver.class);
        mContext.sendBroadcast(intent); 
```

** 接收者** ：

```
public final class NotificationBroadcastReceiver  extends BroadcastReceiver {
      @Override
      public void onReceive(Context context, Intent intent) {
         System.out.println("Broadcast recieved");
         context.startActivity(new Intent(context,A.class).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
      }
} 
```

# entity-framework - 如何在 Linq to EF 语句中嵌入可选的 Where 参数？

> ID：12090209
> 
> 赞同：0
> 
> 时间：2012-08-23T11:07:30.000
> 
> 标签：entity-framework, entity-framework-4.1

假设我们的表单上有一个带有可选复选框的描述字段。复选框表示进行查找时要搜索的字段。现在我有一个查找矩阵，它调用了他们独特版本的 where 子句。它有效，但我认为它*闻起来*有点。

这是摘录

```
 // Look for part numbers decide how many fields to search and use that one.
    // 0 0 X
    if (!PartOpt[0] && !PartOpt[1] && PartOpt[2])
    {
     query = query.Where(p => (p.PartNumAlt2.Contains(partSearchRec.inventory.PartNum)));
    }
    // 0 X 0
    if (!PartOpt[0] && PartOpt[1] && !PartOpt[2])
    { 
      query = query.Where(p => (p.PartNumAlt.Contains(partSearchRec.inventory.PartNum)));
    }
    // 0 X X
    if (!PartOpt[0] && PartOpt[1] && PartOpt[2])
    {
      query = query.Where(p => (p.PartNumAlt.Contains(partSearchRec.inventory.PartNum)
        || p.PartNumAlt2.Contains(partSearchRec.inventory.PartNum)));
    }
    // X 0 0
    if (PartOpt[0] && !PartOpt[1] && !PartOpt[2])
    {
      query = query.Where(p => (p.PartNum.Contains(partSearchRec.inventory.PartNum)));
    }
     . . . 
```

这种情况持续了一段时间，似乎很容易出现编码错误。在每种情况下，我们都在任何选定的字段中寻找相同的信息。如果我在 SQL 中执行此操作，我可以根据需要简单地构建 WHERE 子句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:07:30.000

我又一次躲避着回答。与其把这个问题扔掉，这就是我想出的。它有效率吗？

```
if (partSearchRec.optPartNum || partSearchRec.optAltPartNum1 || partSearchRec.optAltPartNum2)
{
  query = query.Where(p => (
       (partSearchRec.optPartNum && p.PartNum.Contains(partSearchRec.inventory.PartNum))
    || (partSearchRec.optAltPartNum1 && p.PartNumAlt.Contains(partSearchRec.inventory.PartNum))
    || (partSearchRec.optAltPartNum2 && p.PartNumAlt2.Contains(partSearchRec.inventory.PartNum))));
} 
```

基本上，如果设置了任何复选框，我们将执行查询。只有在选中复选框时，才会处理查询的每一行。如果 AND 的左侧为假，则不会处理右侧。

这是一个德尔福的`with`声明会派上用场的时代。我还了解到不能在 LINQ 语句中使用数组。

# objective-c - NSURLConnectionDataDelegate 方法没有调用

> ID：12090216
> 
> 赞同：0
> 
> 时间：2012-08-23T11:07:48.330
> 
> 标签：objective-c, ios, cocoa-touch, ios5, nsurlconnection

我试图实现`NSURLConnectionDataDelegate`协议的方法，但有一种方法，名为`connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:`，不想被委托调用。[Apple 文档](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html)没有提供足够的信息，所以我不知道如何使用它。对这种方法的任何帮助对我都有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-08T17:46:14.297

我正在将一些 obj-c 代码移植到 Swift，但无法调用 didSendBodyData 方法。结果是我的方法签名不太正确。确保您的方法与 API 完全匹配。很快它看起来像这样：

```
func connection(connection: NSURLConnection, didSendBodyData bytesWritten: Int, totalBytesWritten: Int, totalBytesExpectedToWrite: Int) {
    // Update the progressbar
    println("didSendBodyData")
} 
```

希望这对下一个人（或女孩）有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:55:40.557

如果您使用`NSURLConnection`POST 请求将数据上传到 http 服务器，则`connection:didSendBodyData:...`委托方法会定期调用以通知您上传进度。

# asp.net-mvc-3 - 如何从服务器中删除上传的文件？

> ID：12090219
> 
> 赞同：1
> 
> 时间：2012-08-23T11:07:57.363
> 
> 标签：asp.net-mvc-3, file-upload

大家好，我有一个上传功能，用户可以上传文件，我在插入数据库之前在表格中显示上传的文件，如果用户想要删除他想要的任何上传文件，我会在表格中提供删除选项..我正在尝试这段代码，但是文件没有被删除

这是我的文件上传代码

```
 public ActionResult UploadFile(string AttachmentName, BugModel model)
   {           
    BugModel bug = null;
    if (Session["CaptureData"] == null)
    {
        bug = model;
    }
    else
    {
        bug = (BugModel)Session["CaptureData"];
    }
    foreach (string inputTagName in Request.Files)
    {
        HttpPostedFileBase file1 = Request.Files[inputTagName];
        if (file1.ContentLength > 0)
        {
            BugAttachment attachment = new BugAttachment();
            var allowedExtensions = new[] { ".doc", ".xlsx", ".txt", ".jpeg", ".docx" };
            var extension = Path.GetExtension(file1.FileName);
            if (!allowedExtensions.Contains(extension))
            {
                model.ErrorMessage = "{ .doc, .xlsx, .txt, .jpeg }, files are allowed.... ";
            }
            else
            {
                string filename = Guid.NewGuid() + Path.GetFileName(file1.FileName);
                string path = "/Content/UploadedFiles/" + filename;
                string savedFileName = Path.Combine(Server.MapPath("~" + path));
                file1.SaveAs(savedFileName);
                attachment.FileName = "~" + path.ToString();
                attachment.AttachmentName = AttachmentName;
                attachment.AttachmentUrl = attachment.FileName;
                bug.ListFile.Add(attachment);
                model = bug;
            }
            Session["CaptureData"] = model;
        }
    }
    ModelState.Clear();
    return View("LoadBug", bug);
} 
```

这是我在表格中显示上传文件的视图

```
 <table align="center" class="gridtable" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <th>
            Attachment Name
        </th>
        <th>
            Attachment Url
        </th>
        <th>
        Action 
        </th>
    </tr>
    <% if (Model != null && Model.ListFile != null)
       {  %>
    <% foreach (var Emp in Model.ListFile)
       { %>
    <tr class="Data">
        <td >
            <%:Emp.AttachmentName %>
        </td>
        <td >
            <%: Emp.FileName %>
        </td>
       <td>
      <%-- <%= Html.ActionLink("Delete", "Delete")%>--%>

        <%:Html.ActionLink("Delete", "Delete", new { @FileName = Emp.FileName })%>
        </td>
    </tr>
    <% } %>
    <% } %>
</table> 
```

这是我的删除代码

```
 public ActionResult Delete(string FileName)
    {

        char DirSeparator = System.IO.Path.DirectorySeparatorChar;

        string FilesPath = ";" + FileName;
        string filenameonly = name + Path.GetFileName(FilesPath);
        string FPath = "Content" + DirSeparator + "UploadedFiles" + DirSeparator + filenameonly;
        // Don't do anything if there is no name
        if (FileName.Length == 0) return View();
        // Set our full path for deleting
        string path = FilesPath + DirSeparator;
        // Check if our file exists
        if (System.IO.File.Exists(Path.GetFullPath(AppDomain.CurrentDomain.BaseDirectory + FPath)))
        {
            // Delete our file
            System.IO.File.Delete(Path.GetFullPath(AppDomain.CurrentDomain.BaseDirectory + FPath));

        }       

        return View("LoadBug", Bug);
    }
    public string name { get; set; }
    public object Bug { get; set; }
} 
```

# python - bdist 的构建选项

> ID：12090222
> 
> 赞同：0
> 
> 时间：2012-08-23T11:08:07.327
> 
> 标签：python, packaging, distutils, setup.py

如何指定构建选项：

```
python setup.py build --fcompiler=gnu95 
```

当我构建 rpm 包时：

```
python setup.py bdist --format=rpm 
```

`bdist`似乎正在重新构建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:27:38.650

```
python setup.py build --fcompiler=gnu95 bdist --format=rpm 
```

# javascript - 验证完成后如何让提交按钮重新启用

> ID：12090223
> 
> 赞同：0
> 
> 时间：2012-08-23T11:08:11.307
> 
> 标签：javascript, forms

我有一个搜索表单（[您可以在此处查看表单](http://247896-7.temp-dns.com/search/detailed-search)），它使用一些 javascript 来检查是否已完成**至少一个字段，然后才允许进行搜索。**

我不擅长 Javascript，所以请多多包涵。我已经设法使验证工作（在出色的 Stack Overflow 用户的帮助下），并在表单通过使用以下代码的验证后重新启用提交按钮：

```
 $(function(){
    $('#detailed-search-form').on('submit',function(e){
        e.preventDefault();
        var oneFilled = checkFields($(this));
        if(oneFilled) {
            $(this).unbind('submit').submit()
        } else {
            overlay();
        }
    });
}); 
```

问题是第一次点击提交按钮实际上并没有提交表单，它只是启用了按钮。这需要在提交表单之前再次单击。

希望有一种方法可以让表单不仅在单击按钮时重新启用按钮，而且无需再次单击即可提交表单？

任何帮助将不胜感激！

提前致谢，

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:21:52.173

您编写的`submit`处理程序基本上应该说“嘿，如果您没有提供至少一个字段，我会提示您一个漂亮的绿色叠加层，否则让我们继续搜索” - 无需取消绑定任何内容。

```
$(function(){
    $('#detailed-search-form').on('submit',function(e){

        if( !checkFields($(this)) ) {

            // if the form isn't valid, show overlay
            overlay();
            return false;

        } else {

           // else just continue with form action
           return true;

        }
    });
}); 
```

# php - 在标签之间解析文件和分组内容

> ID：12090225
> 
> 赞同：0
> 
> 时间：2012-08-23T11:08:23.690
> 
> 标签：php, arrays, file, parsing

我正在尝试**解析**具有以下结构的文件：

```
Page: name of page

Lang: language
{1} content of a header
{2} content of a paragraph

Lang: language
{1} content of a header
{2} content of a paragraph

Page: name of page
Lang: language

{1} content of a header
{2} content of a paragraph 
```

等等。

我从云中获取此类内容，保存到文件中，然后我想将每个页面作为**关联数组**获取，格式如下：

```
page => page 1
    [lang] => language A
        [1] => content of a header
        [2] => content of a paragraph
    [lang] => language B
        [1] => content of a header
        [2] => content of a paragraph
page => page 2
    [lang] => language A
        [1] => content of a header
        [2] => content of a paragraph
    [lang] => language B
        [1] => content of a header
        [2] => content of a paragraph
... 
```

我一直在尝试从文件构建整个数组，然后开始按标签分组，但我一直没有成功。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:20:57.473

我最终使用了以下方法：

1.  将文件作为整个数组获取，使用每一行作为一个元素

2.  搜索与所用页面的第一个重合之处，即 'Page:' 之后的字符串

3.  获取此类巧合和下一页之间的元素

4.  循环以'Lang'作为键的结果数组分组

由于我正在使用 PHP，所以使用的函数是：`file()`, `array_search()`, `array_slice()`.

# html - 将样式放在带有母版页的页面中的位置

> ID：12090226
> 
> 赞同：0
> 
> 时间：2012-08-23T11:08:29.083
> 
> 标签：html, asp.net-mvc-3, xhtml, xhtml-transitional

我有一个report.master

```
 <%@ Master Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewMasterPage" %>

 <asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
 <asp:ContentPlaceHolder ID="TitleContent" runat="server" />
 </asp:Content>

 <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:ContentPlaceHolder ID="MainContent" runat="server" />
 </asp:Content>

 <asp:Content ID="Content3" ContentPlaceHolderID="SideBarContent" runat="server">

 <h2>Select Report</h2>
 <br />
 <ul>
 <li>
    <h2>JobSorted</h2>
    <ul style="text-align:left;">
        <li><%: Html.ActionLink("JobSorted Report Data", "JobSortedReportData")%></li>
        <li><%: Html.ActionLink("JobSorted Tradesmen Searches Data", "JobSortedTradesmenSearchesData")%></li>
        <li><%: Html.ActionLink("JobSorted Signup Summary Report", "JobSortedSignups") %></li>
        <li><%: Html.ActionLink("JobSorted Jobs Summary Report", "JobSortedJobs") %></li>
        <%--<li><a href="#">Subscription Report</a></li>--%>
    </ul>
    <h2>TradeUK</h2>
    <ul style="text-align:left;">       
        <li><%: Html.ActionLink("TradeUK KPI Searches Data", "TradeUKKPISearchesData")%></li> 
        <li><%: Html.ActionLink("TradeUK Job Searches Data", "TradeUKJobSearchesData")%></li> 
        <li><%: Html.ActionLink("Tradesman Signup Summary Report", "Index") %></li>
        <li><%: Html.ActionLink("Websites Report", "TradeUKWebsitesData")%></li>
        <li><%: Html.ActionLink("All Tradesman Counter Signup Summary Report", "AllTradesmenCodeRegistrations")%></li>
        <li><%: Html.ActionLink("Tradesman Counter Signup Summary Report", "TradesmenCodeRegistrations")%></li>
    </ul>
 </li>    
 </ul>

</asp:Content> 
```

那么在我看来，我有：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Report/Report.Master" Inherits="System.Web.Mvc.ViewPage<TradeUK.Admin.Web.ViewModels.KPIReportsViewModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
TradeUK KPI Searches Data
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<head>
<style type="text/css">
 .instructions
 {
    line-height:normal; 
 }
</style>
</head>

 <h2>TradeUK KPI Searches Data</h2>

<p>
   <%: Html.ActionLink("Export as CSV...", "TradeUKKPIDataExport", "Report", new {@date = ViewBag.jobSortedReportDate }, 0)%>    
 </p>
 </asp:Content> 
```

我对 head 标签中的 style 标签有一个警告。我必须把这个放在哪里？我不明白？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:10:11.290

在您最终呈现的 HTML 样式中，应在该`<head>`部分中声明。您可以完全忽略在设计时收到的警告。如果您想要一些可靠的东西，请在此处验证您最终生成的标记：http: [//validator.w3.org/](http://validator.w3.org/)

# entity-framework - 为什么当三个实体相互关联时，代码优先 EF 会生成循环引用？

> ID：12090229
> 
> 赞同：1
> 
> 时间：2012-08-23T11:08:53.187
> 
> 标签：entity-framework, ef-code-first

我在 EF Code First 4.3 中针对 SqlCe4.0 客户端创建数据库时遇到循环引用错误。为了清楚起见，我附上了一张我想要的数据库模式的图片。仅供参考，我已经在 SQL Server 2008 中成功创建了我想要的架构。

> 引用关系将导致不允许的循环引用。[ 约束名称 = FK_Routes_Seasons_SeasonID ]

*   Routes 与 Seasons 有一对多的关系
*   Contracts 与 Routes 有一对多的关系
*   合同与季节有一对多的关系

![所需的数据库架构](../Images/3a1a2c9d7b7228f35d14fdbdd4242ca6.png)

我的课程代码是：

```
Public Class Route
    Public Property RouteID as Integer

    Public Property SeasonID as Integer
    Public Overridable Property Season As Season

    Public Overridable Property Contracts As ICollection(Of Contract)
End Class

Public Class Season
    Public Property SeasonID as Integer

    Public Overridable Property Routes As ICollection(Of Routes)
    Public Overridable Property Contracts As ICollection(Of Contract)
End Class

Public Class Contract
    Public Property ContractID As Integer

    Public Property RouteID As Integer
    Public Overridable Property Route As Route

    Public Property SeasonID As Integer
    Public Overridable Property Season As Season
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:29:27.577

它不一定是周期性的，而是您在删除树的同一个表中有多个引用。看到[这个帖子](http://weblogs.asp.net/manavi/archive/2011/01/23/associations-in-ef-code-first-ctp5-part-3-one-to-one-foreign-key-associations.aspx)和[这个帖子](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/d8845218-8b9c-4209-992b-acefc5787624/)

在你的表中：

> 赛季 -> 路线 -> 合同
> 
> 赛季 -> 合同

您需要对其进行设置，以使这些关系之一不会级联删除。我不熟悉 VB，但在 C# 中你可以像这样设置流利：

```
modelBuilder.Entity<Routes >()
            .HasRequired(r => r.Season )
            .WithMany(s => s.Routes)
            .HasForeignKey(r => r.SeasonID );
            .WillCascadeOnDelete(false); 
```

# windows-phone-7 - 页面生命周期

> ID：12090235
> 
> 赞同：1
> 
> 时间：2012-08-23T11:09:13.067
> 
> 标签：windows-phone-7

我正在查看有关页面生命周期的一些信息，尤其是在调用页面构造函数时？页面开始时会发生这种情况，即使它早于 5 秒显示？每次页面显示时都会初始化页面的组件，并在另一个页面显示时销毁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:20:46.083

您可以在此博客文章中找到有关页面生命周期和正在调用的事件的一些信息

[页面状态 - 一步一步](http://jesseliberty.com/2011/07/27/page-statestep-by-step/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:23:34.513

导航到页面时会实例化一个页面（假设您在 Silverlight 上运行）。当您离开它时，状态将保存在堆栈中。如果您向后导航（通过调用 NavigationService 类的 GoBack 方法），页面将从其状态恢复，而无需调用构造函数。

但是，如果您离开现有页面，并通过调用 Navigate 方法重新导航到该页面，则会实例化一个全新的页面实例，因此将再次调用构造函数。

因此，要回答您的问题，在显示页面时将调用的唯一可靠方法是 OnNavigatedTo （以及 OnNavigatedFrom 离开时，它只是在导航时破坏）。建议将初始化代码和处置代码放在这两个方法中，而不是依赖构造函数。

# vb.net - vb.net 闪屏

> ID：12090236
> 
> 赞同：0
> 
> 时间：2012-08-23T11:09:16.430
> 
> 标签：vb.net, multithreading, splash-screen

我正在使用 VB.Net 创建一个 Windows 窗体应用程序。

我必须在图片框中显示带有 GIF 图像（正在加载）的启动画面。同时对表单执行操作。所以我隐藏了表单并显示了启动画面。

如果我让线程休眠，GIF 图像不会动画。

需要建议来实施上述内容！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:32:30.507

如果您希望启动画面在固定时间后自动关闭，只需使用计时器即可。

```
Public Class SplashScreen
    Private WithEvents _timer As New System.Windows.Forms.Timer()

    Private Sub FormVb1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        _timer.Interval = 5000  ' five seconds
        _timer.Enabled = True
    End Sub

    Private Sub _timer_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles _timer.Tick
        Close()
    End Sub
End Class 
```

# cookies - prestashop 在模块中分配 cookie

> ID：12090240
> 
> 赞同：0
> 
> 时间：2012-08-23T11:09:32.100
> 
> 标签：cookies, prestashop

我想从模块块购物车中的文件 blockcart.php 中获取 var $param 并将其放入 cookie 中。我在 POO 方面不太好，所以任何人都可以告诉我我的代码有什么问题。

```
public function hookAjaxCall($params)
{
    global $cookie; //mycode

    if (Configuration::get('PS_CATALOG_MODE'))
    return;

    $this->assignContentVars($params);
    $res = $this->display(__FILE__, 'blockcart-json.tpl');

    $cookie->__set('test', $param); //my code

    return $res;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:13:50.147

这`__set`是一种不能直接使用的“魔术方法”。请改用此编码形式：

```
$cookie->test = $params;
$cookie->write(); 
```

该`__set()`函数将处理您创建的新成员变量的赋值。同样，您可以使用：

```
global $cookie;
if (isset($cookie->test))
    // Use $cookie->test in your custom code 
```

# php - PHP：使成员对象替换自身

> ID：12090243
> 
> 赞同：0
> 
> 时间：2012-08-23T11:09:35.853
> 
> 标签：php, class, object, replace

好的，这很奇怪，我知道这一点，但我想知道这是否可能。

目标是使类的成员对象用另一个对象替换自己。

```
class A
{
  public $object;

  public function __construct()
  {
    $this->object = new B($this); // added reference to A
  }
}

class B
{
  private $caller;    // reference to A
  private $myobject;

  public function __construct($caller)
  {
    $this->myobject = new C();
    $this->caller = $caller;
  }

  public function replace()
  {
    // here goes the topic code...
  }
}

class C
{
  // whatever...
}

$A = new A();
$A->object->replace();
// after calling the "replace" method, $A->object becomes the B's child C instance 
```

我知道做类似的事情

```
$A->object->replace($A); 
```

在B级

```
public function replace($class)
{
  $class->object=$this->myobject;
} 
```

将是最简单的方法，但我想每次都避免这个参考通过......我也不会问你我是否正在寻找简单的方法;）

欢迎使用任何技巧。

谢谢各位专家。

# c++ - 将对象交换到文件

> ID：12090245
> 
> 赞同：2
> 
> 时间：2012-08-23T11:09:40.597
> 
> 标签：c++, windows, mapping, swap, disk

由于从数据库中检索大量数据，我的 C++ 应用程序偶尔会耗尽内存。它必须在 32 位 WinXP 机器上运行。

是否可以透明地（对于大多数现有代码）将数据对象交换到磁盘并仅按需将它们读入内存，**所以我不限于**32 位 Windows 为进程提供的 2GB？

我查看了[VirtualAlloc](http://msdn.microsoft.com/en-us/library/aa366887%28VS.85%29.aspx)和[地址窗口扩展](http://msdn.microsoft.com/en-us/library/aa366527%28v=vs.85%29.aspx)，但我不确定它是否是我想要的。

我还发现[了这个 SO question](https://stackoverflow.com/q/7385040/27596)，提问者在其中创建了一个文件映射并希望在其中创建对象。一个答案建议使用`placement new`听起来对其余代码非常透明的方法。

这会阻止我的应用程序耗尽物理内存吗？我不完全确定，因为毕竟还有 32 位地址空间限制。或者这是尝试创建大量对象时会出现的另一种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:45:25.047

只要您使用的是 32 位操作系统，您就无能为力。没有办法在虚拟内存中拥有超过 3GB（Windows 为 2GB）的数据，无论它是否实际换出到磁盘。

从历史上看，数据库一直使用读、写和查找来处理这个问题。因此，它们不是直接从内存中访问数据，而是使用假的（64 位）指针。数据被分成块（通常大约 4kb），并且这些块中的一些被分配在内存中。当他们想从假指针地址访问数据时，他们会检查该块是否已加载到内存中，如果是，他们会从那里访问它。如果不是，那么他们会找到一个空插槽并将其复制进去，然后返回地址。如果没有可用的插槽，则一条数据将被写回磁盘（如果已被修改），并且该插槽将被重用。

这样做的真正美妙之处在于，如果您的系统有足够的 RAM，那么操作系统将在任何时间点将超过 2GB 的数据缓存在 RAM 中，当您感觉实际上是在从磁盘读取和写入时，操作系统可能只是在内存中复制数据。当然，这需要支持超过 3GB 物理内存的 32 位操作系统，例如带有 PAE 的 Linux 或 Windows Server。

SQLite 有一个很好的自包含[的 this 实现](http://www.sqlite.org/cgi/src/artifact/8b8c9bc065a3c66769df8724dfdf492ee1aab3c5)，你可以毫不费力地使用它。

如果您不希望这样做，那么您唯一的选择是使用 64 位操作系统或在任何给定时间点使用较少的数据。

# xml - 按属性名称对 XML 进行排序

> ID：12090247
> 
> 赞同：1
> 
> 时间：2012-08-23T11:09:51.687
> 
> 标签：xml, powershell, powershell-2.0

如何根据属性名称值重新排列 XML，然后按以下顺序保存 - 主机名、DNSDomain、环境、HWSystemType、SystemType、HWSystemModel

谢谢你的帮忙。

```
<Objects>
  <Object>
    <Property Name="Hostname">myServer</Property>
    <Property Name="SystemType">Physical</Property>
    <Property Name="HWSystemModel">Windows Server</Property>
    <Property Name="HWSystemType">Unitary HW-System</Property>
    <Property Name="DNSDomain">Domain.net</Property>
    <Property Name="Environment">Testing</Property>
 </Object>
</Objects> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T00:53:50.237

好的 - 给你。只需运行此脚本 (sortxml.ps1) 并将输出重定向到您选择的文件，例如`sortxml.ps1 > sorted_xml_file.xml`

注意：需要[Powershell 社区扩展](http://pscx.codeplex.com/)模块`Format-Xml`。

排序的xml.ps1：

```
# replace 'old.xml' with the path to your unsorted xmlfile
[xml]$xml = gc old.xml
[xml]$xmlnew = gc old.xml

$names = @('Hostname', 'DNSDomain', 'Environment', 'HWSystemType', 'SystemType', 'HWSystemModel' )

$nodes = $xmlnew.Objects.Object.Property
foreach($i in 0..($names.length - 1)) {
    foreach($j in $xml.Objects.Object.Property) {
        if($j.Name -eq $names[$i]) {
            $nodes[$i].Name = $j.Name
            $nodes[$i]."#text" = $j."#text"
            break
        }
    }
}

Format-Xml -inputobject $xmlnew 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T19:37:29.630

要对 XML 进行排序`@Name`（但请注意字母顺序与您列出的不同），请尝试

```
Select-Xml -Path Your.xml -XPath //Property | Select-Object -ExpandProperty Node | Sort-Object -Property Name 
```

# javascript - 如何在另一个 div 中添加一个 div 但在随机位置

> ID：12090250
> 
> 赞同：0
> 
> 时间：2012-08-23T11:09:57.693
> 
> 标签：javascript, jquery, html, random

我正在动态创建 div，并希望它们在随机位置而不是最后一个位置添加到父 div，例如

```
 var opt = document.createElement("div");
                        var txt = document.createTextNode(str);
                        opt.appendChild(txt);

                        //get the top and left positioning of the elements
                        var x = Math.floor(Math.random() * (400));
                        var y = Math.floor(Math.random() * (50));

                        opt.style.top = y + "px";
                        opt.style.left = x + "px";
                        opt.style.zIndex = zindex;   

                        $("#parentDiv").append(opt); 
```

但问题是 jquery 的 append 函数或 add 函数将 div 放在堆栈的最后位置。我希望它随机放置在其他 div 之间...帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:15:30.070

```
var $parent = $('#parentDiv');
var $children = $parent.children();             // get possible children
var n = $children.length;                       // there are n children
var pos = Math.floor((n + 1) * Math.random());  // and n+1 insert points

if (n === pos) {
    $parent.append(opt);                        // append after last
} else { 
    $children[pos].before(opt);                 // or insert before
} 
```

**编辑**我清理了这个以将没有孩子/最后一个孩子的情况合并在一起。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T11:15:13.783

如果已经有 div：

```
var i = Math.round(Math.random() * $('#parentDiv').length);
if (i != $('#parentDiv div').length) $('#parentDiv div').eq(i).before(opt);
else $('#parentDiv div').eq(i - 1).after(opt); 
```

# java - AsyncTask 和 Thread 不会在 java / android 应用程序中运行两次

> ID：12090251
> 
> 赞同：1
> 
> 时间：2012-08-23T11:10:08.210
> 
> 标签：java, android, multithreading, android-asynctask

我有一个 android 应用程序，用 java 编写，它使用**AsyncTask**下载数据。**需要AsyncTask**来处理整个下载过程中显示的进度**对话框**。

实际下载是通过单独的线程**downloadAllUpdater**启动的。虽然我知道这不是惯例，但需要一个线程，因为下载过程分布在 7 个类中，并且在下载过程中没有其他方法可以更新进度条，因为我无法从任何地方运行**publishProgress**调用其他类。

我的主要活动如下所示：

```
private Download downloadAll;

private int totalBlocksLeft;

private boolean downloadComplete;
private boolean downloadFailed;

private PerformTask currentPerformTask;

public void downloadAllClick(View view) //When the download all button is clicked
{
    currentPerformTask = new PerformTask();

    currentPerformTask.execute();
}

private class PerformTask extends AsyncTask<Void, Integer, Integer>
{
    protected void onPreExecute()
    {
        usingDialog = new ProgressDialog(WifiAudioActivity.this);

        usingDialog.show();
    }

    protected Integer doInBackground(Void... voi) 
    {
        downloadAll = new Download();

        downloadComplete = false;   //Assume the download is not complete

        downloadAllUpdater.start(); 

        downloadFailed = false;

        while ((downloadComplete == false) && (downloadFailed == false))   
        {
            blocksDownloaded = downloadAll.getTotalBlocksLeft();

            publishProgress(blocksDownloaded);
        }

        return 0;
    }

    protected void onProgressUpdate(Integer... progress) 
    {
        usingDialog.setProgress(progress[0]);
    }

    protected void onPostExecute(Integer result) 
    {
        usingDialog.dismiss();
    }
}

Thread downloadAllUpdater = new Thread()
{
    public void run() 
    {
        int runRetryCount = 0;

        while ((!(downloadComplete)) && (!(downloadFailed)))
        {
            downloadComplete = download.downloadAudio(totalBlocksLeft);  //Download the audio

            if (!(downloadComplete))
            {
                runRetryCount++;
            }

            if (runRetryCount > Consts.RETRY_TOTAL)
            {
                downloadFailed = true;
            }
        }
    }
}; 
```

单击按钮启动下载，该按钮启动**downloadAllClick()**方法。

第一次按下按钮时，这一切都很好。

但是，当第二次按下按钮时（第一次完成后），我收到一个错误并且程序强制关闭。

我很确定错误是因为我正在运行线程，**downloadAllUpdater**第二次，因为如果我有一个单独的方法，只是**downloadAllUpdater.start()**，它也会因同样的错误而崩溃。

任何人都可以帮忙吗？以下是错误日志：

```
08-23 11:22:34.954: W/dalvikvm(1485): threadid=14: thread exiting with uncaught exception (group=0x400259f8)

08-23 11:22:35.014: E/AndroidRuntime(1485): FATAL EXCEPTION: AsyncTask #5

08-23 11:22:35.014: E/AndroidRuntime(1485): java.lang.RuntimeException: An error occured while executing doInBackground()

08-23 11:22:35.014: E/AndroidRuntime(1485):     at android.os.AsyncTask$3.done(AsyncTask.java:200)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.lang.Thread.run(Thread.java:1102)

08-23 11:22:35.014: E/AndroidRuntime(1485): Caused by: java.lang.IllegalThreadStateException: Thread already started.

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.lang.Thread.start(Thread.java:1331)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at com.que.wifiaudio.WifiAudioActivity$PerformTask.doInBackground(WifiAudioActivity.java:518)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at com.que.wifiaudio.WifiAudioActivity$PerformTask.doInBackground(WifiAudioActivity.java:1)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at android.os.AsyncTask$2.call(AsyncTask.java:185)

08-23 11:22:35.014: E/AndroidRuntime(1485):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)

08-23 11:22:35.014: E/AndroidRuntime(1485):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:17:26.580

你不能`start`一个线程两次。您可以`downloadAllUpdater`改为制作 Runnable：

```
Runnable downloadAllUpdater = new Runnable() { //rest unchanged 
```

并将代码替换为`doInBackground`：

```
new Thread(downloadAllUpdater).start(); 
```

这样，每次都会创建一个新线程，运行相同的任务。

但是`doInBackground`已经在后台线程上运行，您确定需要创建一个新线程吗？如果没有，只需运行 runnable:`downloadAllUpdater.run();`而不创建新线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T19:27:37.293

不确定这是否与您看到的错误有关，但您当前的代码不是线程安全的。您当前正在从两个不同的线程（和`downloadComplete`）分配成员变量。这种用法会导致竞争条件和意外结果。请阅读[Java 中的并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)（即关键字），以同步您的线程。`downloadFailed``PerformTask``downloadAllUpdater``synchronized`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:17:27.147

```
runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub

                        //do you download here

                    }
                }); 
```

在 Asyctask 中，您无法访问发生在不同主题中的内容

# python - Python GAE 扩展 db.Property 并添加一个方法

> ID：12090255
> 
> 赞同：0
> 
> 时间：2012-08-23T11:10:22.227
> 
> 标签：python, google-app-engine

> **可能重复：**
> [Google App Engine - 如何扩展 db.IntegerProperty](https://stackoverflow.com/questions/11239565/google-app-engine-how-to-extend-db-integerproperty)

这很可能是一个更通用的 Python 查询。

我试图通过添加一个方法来继承和扩展 GAE 中的 db.Property 类之一，该方法将返回一个特殊字符串值的整数表示，例如：

```
class DbHHMM(db.StringProperty):

   def to_mins(self):
      '''Convert the string to minutes''' 
      arr = re.split(":",self)
      ret = 0.0
      if (len(arr)==2):
         ret = (int(arr[0])*60)+(int(arr[1]))
      return ret; 
```

在我的模型中，我有一种方法可以总结一系列这些值，例如：

```
class WorkSchedule(db.Model):
    '''todo - core hours for the days
    TODO is there any way to attach a widgeted form to these via newform =  WorkScheduleForm() '''

    time1 = DbHHMM() 
    time2 = DbHHMM()
    total = db.IntegerProperty

    def sum_times:
      self.total = time1.to_mins + time2.to_mins 
```

但是，当 sum_times 被调用时，我似乎得到了错误：

```
AttributeError: 'unicode' object has no attribute 'to_mins' 
```

是否可以向 GAE 属性类添加额外的方法，用于防止这种情况的 Python 技术是什么？我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:50:22.643

您介意发布您的*实际*代码吗？您的“def sum_times：”甚至不是有效的 Python。

我的猜测是你想要这个，它会正常工作：

```
class WorkSchedule(db.Model):

    time1 = DbHHMM() 
    time2 = DbHHMM()
    total = db.IntegerProperty()  # ADDED ()

    def sum_times(self):  # ADDED (self)
        self.total = self.time1.to_mins() + self.time2.to_mins()  # ADDED self...() twice 
```

# android - 如何标记活动

> ID：12090256
> 
> 赞同：9
> 
> 时间：2012-08-23T11:10:22.157
> 
> 标签：android

我正在使用此代码跳回活动堆栈（主要是移动到家庭活动）：

```
Intent goTo = new Intent(this, HomeActivity.class);
goTo.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(goTo); 
```

因此，我创建了新的 Intent 并将“目标”设置为 Activity 堆栈中的 HomeActivity，因此整个堆栈将从顶部清除到此 HomeActivity。
现在我需要稍微不同的用例。例如，我在堆栈上有五个活动 ABCDE（A 开始 B 等）。现在我需要根据用户的选择从 E 跳到 C 或 B。问题是活动 A、B、C、D、E 具有相同的类别。所以我不能使用上面的例子，因为我不知道如何定位那个 Activity。
所以问题是是否有任何方法可以“标记活动”或使用堆栈进行操作。
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:26:13.023

我自己没有尝试过，但我认为最好的选择是重构您的应用程序以`Fragment`在单个中使用 s堆栈`Activity`（因为您可以使用提供的[`addToBackStack()`](http://developer.android.com/reference/android/app/FragmentTransaction.html#addToBackStack%28java.lang.String%29)和[`popBackStack()`](http://developer.android.com/reference/android/app/FragmentManager.html#popBackStack%28java.lang.String,%20int%29)方法更轻松地管理后台堆栈）。基本上，这涉及将 Activity 中的大部分代码移动到 Fragment 中，然后在 Activity 中添加 backstack 操作代码）。您可以查看[`FragmentBreadCrumbs`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/FragmentBreadCrumbs.java)（使用 API 11+）的代码或[HanselAndGretel](https://github.com/JakeWharton/HanselAndGretel)的代码（用于与兼容性库一起使用），以了解如何实现。

但是，如果您想继续使用当前的多活动方法，以下是我想出的一些代码来说明如何做到这一点。

首先，添加几个内部类来为您当前的 Activity 设置别名，并将这些类放入序列列表中（还要注意`getSequencedActivityIntent()`我编写的简单方法，如果需要，您可以添加更高级的逻辑 - 可能使用 HashMap 来关联序列中的每个类带有任意标签值？）：

```
public class MyActivity extends Activity {

    public static class A extends MyActivity {}
    public static class B extends MyActivity {}
    public static class C extends MyActivity {}
    public static class D extends MyActivity {}
    public static class E extends MyActivity {}
    public static class F extends MyActivity {}
    public static class G extends MyActivity {}
    public static class H extends MyActivity {}
    public static class I extends MyActivity {}
    public static class J extends MyActivity {}

    private final static List<Class<?>> SEQUENCE = Arrays.asList(new Class<?>[] {
            A.class, B.class, C.class, D.class, E.class,
            F.class, G.class, H.class, I.class, J.class,
    });

    private Intent getSequencedActivityIntent(int step) {
        final int current = SEQUENCE.indexOf(this.getClass());
        if (current == -1) new Intent(this, SEQUENCE.get(0));

        final int target = current + step;
        if (target < 0 || target > SEQUENCE.size() - 1) return null;

        return new Intent(this, SEQUENCE.get(target));
    }

    // the rest of your activity code
} 
```

不要忘记将它们的条目也添加到您的 AndroidManifest.xml 文件中（`singleTop`是​​可选的 - 它会阻止堆栈中的 Activity 实例在返回到前面时再次创建）：

```
 <activity android:name=".MyActivity$A" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$B" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$C" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$D" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$E" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$F" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$G" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$H" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$I" android:launchMode="singleTop" />
    <activity android:name=".MyActivity$J" android:launchMode="singleTop" /> 
```

现在，每当您需要启动 Activity 的新“顶级”实例时，您可以执行以下操作：

```
 final Intent intent = getSequencedActivityIntent(+1);
    if (intent == null) return;
    intent.putExtra("dataset", dataSet);
    startActivity(intent); 
```

当您需要返回后台堆栈中的一个实例时，您可以执行以下操作：

```
 final Intent intent = getSequencedActivityIntent(- stepBack);
    if (intent == null) return;
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T12:39:10.683

您可以索引您的活动，而不必担心`onActivityResult`使用您在所有活动中扩展的超级活动来处理所有链

这是一个实现（我没有测试它），但是如果你在所有的活动中扩展这个 SuperActivity，你可以`fallBackToActivity( int )`使用它的索引调用任何活动，每个活动现在都有一个 getIndex()。您可以使用它回退到相对索引，例如`getIndex()-3`

```
package sherif.android.stack.overflow;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class SuperActivity extends Activity {
    private static String EXTRA_INDEX = "SUPER_INDEX";
    private static int RESULT_FALLBACK = 0x123456;
    private int index;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(getIntent()!=null) {
            index = getIntent().getIntExtra(EXTRA_INDEX, -1) + 1;
        }
    }
    protected final int getIndex() {
        return index;
    }
    protected final void fallBackToActivity(int index) {
        Intent intent = new Intent();
        intent.putExtra(EXTRA_INDEX, index);
        setResult(RESULT_FALLBACK, intent);
        finish();
    }
    @Override
    public void startActivityForResult(Intent intent, int requestCode) {
        intent.putExtra(EXTRA_INDEX, getIndex());
        super.startActivityForResult(intent, requestCode);
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == RESULT_FALLBACK) {
            if(data.getIntExtra(EXTRA_INDEX, -1)!=getIndex()) {
                setResult(RESULT_FALLBACK, data);
                finish();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T11:18:17.213

如果用户选择此项目将意图传递给 B 类，并且如果用户选择该项目将意图传递给 C 类，则您可以在语句中保留一个条件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T11:20:29.297

为您的意图添加[额外](http://developer.android.com/reference/android/content/Intent.html#putExtra)的内容，以指示活动要做什么。例如

```
 intent.putExtra("STATE", 1); 
```

并在您的活动的 onCreate 中获取此值。

```
 getIntent().getExtras() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T21:06:52.760

据我了解，Android 仅针对活动类，而不是特定的活动实例。所以，我认为你无法通过在 Intent 上添加一些标志来做你想做的事。

我认为最简单的方法是通过类似这样的方式自行实施

a）创建一些单例并在其中包含一个成员，该成员指向您要返回的活动实例（如示例活动 B）。可能，您必须将所有活动存储在某个列表中，以便能够获取某些先前启动的活动的实例。

b) 覆盖所有活动的 onResume 并在其中进行以下检查：

```
if (SomeSingleton.getTargetActivity() != null && this != SomeSingleton.getTargetActivity())
  finish();
else
   SomeSingleton.setTargetActivity(null); 
```

c) 只要你需要从 E 回来就做

```
SomeSingleton.setTargetActivity(B);
finish(); 
```

这将关闭顶级活动（即 E）并在活动 D 上调用 onResume。它将检查它是否是目标。如果不是，那么它将关闭它，系统将在活动 C 上调用 onResume 等等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-01T04:17:50.283

如果你想使用异常的方法，或者一些棘手的地方，你以后会遇到更多的问题。我想你可以

定义 Activity 的抽象/非抽象子类并定义你想要的一切。如果其他类与上述类完全一样，那么就从它继承子类，什么都不做。但是如果类（活动）可能彼此不同，您可以提供抽象/非抽象方法来定义额外的能力。

所以

*   您为所有活动编写可重用的代码，
*   你表现正常，所以你会得到好的结果
*   您可以控制活动中专门的所有内容
*   您可以使用清单文件控制堆栈
*   和更多

有关详细信息，请参见以下代码：

**家长活动：**

```
public abstract class AbstractActivity extends Activity {

    AbstractActivity currentActivity;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        currentActivity = this;
        someProtectedMethod();
        commonMethod();
        // etc...

        /* event handling */
        Button btn_first = (Button) findViewById(R.id.btn_first);
        Button btn_second = (Button) findViewById(R.id.btn_second);

        btn_first.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(currentActivity, FirstActivity.class);
                currentActivity.startActivity(intent);
            }
        });

        btn_second.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(currentActivity, SecondActivity.class);
                currentActivity.startActivity(intent);
            }
        });

    }

    /** you must override it, so you can control specified things safe */
    protected abstract void someProtectedMethod();

    protected void commonMethod() {
        Log.i("LOG", "Hello From " + getClass().getName());
    }

    @Override
    protected void onResume() {
        super.onResume();
        //some statement that work in all activities to
        Log.i("LOG", "On Resume: " + getClass().getName());
    }
} 
```

**第一个活动：**

```
public class FirstActivity extends AbstractActivity {

    @Override
    protected void someProtectedMethod() {
        Log.i("LOG", "Special Action From First Activity");
    }
} 
```

**第二个活动：**

```
public class SecondActivity extends AbstractActivity {

    @Override
    protected void someProtectedMethod() {
        Log.i("LOG", "Special Action From Second Activity");
    }
} 
```

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btn_first"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Open First Activity" />

    <Button
        android:id="@+id/btn_second"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Open Second Activity" />

</LinearLayout> 
```

**显现：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.activity_control"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".SecondActivity"
            android:label="@string/app_name" >
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-03T13:05:56.010

最好和最简单的解决方案（到目前为止）将使用 Fragments 和 FragmentManager。然后标记每个 Fragment 并使用 FragmentManager。仅使用 Activity 可能很难获得几乎相同的结果。

# jquery - 如何获取 jQuery 对象中元素相对于对象的索引？

> ID：12090281
> 
> 赞同：0
> 
> 时间：2012-08-23T11:11:35.853
> 
> 标签：jquery

如果我有一个由多个 jQuery 对象组成的对象，那就是：

```
var $listItems $('ul.list1 li').add($('ul.list2 li')); 
```

如何获取数组中任何元素的索引，即：

```
$listItems.click(function() {
    console.log($(this).index());
}); 
```

这对我不起作用，因为当单击第二个列表中的项目时，显然索引是相对于 DOM 的索引，而不是 jquery 对象。

我怎样才能得到索引？

[http://jsfiddle.net/ZdCsu/](http://jsfiddle.net/ZdCsu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:18:18.717

相对索引在 jQuery 中总是有点麻烦，因为堆栈中的元素可能与索引没有任何逻辑关系。

你可以这样做：

```
$('#list_one li').add('#list_two li').each(function(index) {
    //assign a contrived index to each element in turn, relative to the stack
    $(this).data('stack-index', index);
}).on('click', function() {
    //then retrieve it on click
    alert($(this).data('stack-index'));
}); 
```

此外，在您发布的特定示例中，不需要`add()`，但也许在您的真实代码中存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:26:55.337

您可以做的是将 jQuery 对象转换为数组：

```
var $listItems = $('ul.list1 li').add($('ul.list2 li'));

$listItems.click(function() {

    console.log($listItems.toArray().indexOf(this));

});​ 
```

您更新的[jsfiddle](http://jsfiddle.net/ZdCsu/1/)

# c# - Datagridview ComboBoxCell 设置默认值？

> ID：12090286
> 
> 赞同：0
> 
> 时间：2012-08-23T11:11:58.917
> 
> 标签：c#, .net, datagridview, combobox

我有一个包含大量数据的 datagridview，当我添加新行时，第一列的最后一行会创建一个包含四个项目的新 ComboBoxCell。但我无法为组合框设置默认值（“DropDown”）。每次我必须手动选择“DropDown”。解决办法是什么？

```
 DataGridViewComboBoxCell dgvCell = new DataGridViewComboBoxCell();
 dgv[1, dgv.Rows.Count - 1] = dgvCell;

 string[] controltype = {"DropDown", "CheckBoxList", "ListControl", "Tree" };
 dgvCell.DataSource = controltype; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:21:12.657

```
private void dataGridView_DefaultValuesNeeded(object sender, DataGridViewRowEventArgs e)
    {
        e.Row.Cells[4].Value = "DropDown";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T12:18:55.647

很简单，如果您的DataGrid View 中有一个ComboBox Column，并且您想知道组合框的选定索引是什么，那么您需要这样做： 1\. 处理DataGrid View 的EditingControlShowing 事件。在这个事件处理程序中，检查当前列是否是我们感兴趣的。然后我们创建一个临时的 ComboBox 对象并获取选中的索引：

代码

```
private void dataGridView1_EditingControlShowing(object sender,
DataGridViewEditingControlShowingEventArgs e)
{
if (dataGridView1.CurrentCell.ColumnIndex == 0)
{
// Check box column
ComboBox comboBox = e.Control as ComboBox;
comboBox.SelectedIndexChanged += new EventHandler(comboBox_SelectedIndexChanged);
}
}

void comboBox_SelectedIndexChanged(object sender, EventArgs e)
{
int selectedIndex = ((ComboBox)sender).SelectedIndex;
MessageBox.Show("Selected Index = " + selectedIndex);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T11:32:30.227

尝试 ：

```
if(!isPostBack)
  {
   dgvCell.SelectedItem=controltype[0].toString(); 
  } 
```

# extjs4.1 - Extjs4，更新编辑器网格单元格值和同步存储

> ID：12090293
> 
> 赞同：0
> 
> 时间：2012-08-23T11:12:32.057
> 
> 标签：extjs4.1

我在控制器中更新编辑器网格单元格值（文本字段）并尝试同步存储，但存储不会更新更新的行。我认为商店无法识别单元格已更新。

在控制器中，我确实喜欢这样，

```
this.getMyGrid().store.each(function (item) {
    if (!item.data.testField) {
    item.set('testFeild', "UPDATED");
    item.commit();
    }
});

this.getMyGrid().store.sync(); 
```

然后，它也更新单元格值，但它无法同步（）；

任何人都知道，我做错了什么，请指教我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:59:18.083

没有 ***item.commit();*** ，它工作正常:)

# .net - 在哪里可以下载 Microsoft Enterprise Instrumentation Framework？

> ID：12090294
> 
> 赞同：1
> 
> 时间：2012-08-23T11:12:31.913
> 
> 标签：.net, enterprise-library, enterprise, instrumentation

我正在尝试调试使用 Microsoft Enterprise Instrumentation Framework 的遗留企业应用程序，但不幸的是我的 PC 中没有安装该框架，我找不到它。所有指向 Microsoft 下载的链接都已损坏。请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T14:27:54.150

@podiluska 的评论解决了这个问题，我将 EIF 库从服务器复制到我的本地 GAC 并且它可以工作。由于重新安装了操作系统，情况非常特殊，但暂存和生产环境还可以。

# java - Drools：获取最近的 3 个事件

> ID：12090295
> 
> 赞同：5
> 
> 时间：2012-08-23T11:12:36.473
> 
> 标签：java, drools

我正在做一个小型 Drools 项目，因为我想了解更多关于使用规则引擎的信息。我有一个名为的类`Event`，它具有以下字段：

*   `String tag;`可以是任何字符串的标签。
*   `long millis;`时间戳。（实际上，这是从同样位于的 JodaTime`LocalDate`字段转换而来的`Event`。）
*   `int value;`我想要推理的价值。

我将数百个`Event`实例插入到我的知识库中，现在我想获取 3 个最近的事件，这些事件都带有`"OK"`. 我想出了以下代码，该代码有效：

```
rule "Three most recent events tagged with 'OK'"
when
    $e1 : Event( tag == "OK",
                 $millis1 : millis )
    $e2 : Event( tag == "OK",
                 millis < $millis1, $millis2 : millis )
    $e3 : Event( tag == "OK",
                 millis < $millis2, $millis3 : millis )

    not Event( tag == "OK",
               millis > $millis1 )
    not Event( tag == "OK",
               millis > $millis2 && millis < $millis1 )
    not Event( tag == "OK",
               millis > $millis3 && millis < $millis2 )
then
  # Do something with $e1.value, $e2.value and $e3.value
end 
```

但我觉得应该有更好的方法来做到这一点。这非常冗长并且不容易重复使用：例如，如果我想用 获取五个最近的事件`value > 10`怎么办？我最终会复制粘贴很多代码，我不想这样做:)。此外，代码对我来说看起来不是很“漂亮”。我真的不喜欢重复的`not Event...`约束，我也不喜欢一遍又一遍地重复相同的标签条件。（这个例子是我真实应用程序的一个高度简化的版本，其中的条件实际上要复杂得多。）

如何改进此代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:06:33.390

假设您正在使用 STREAM 事件处理模式并且您的事件在流中排序：

```
rule "3 most recent events"
when
    accumulate( $e : Event( tag == "OK" ) over window:length(3),
                $events : collectList( $e ) )
then
    // $events is a list that contains your 3 most recent 
    // events by insertion order
end 
```

===== 编辑 ====

根据您在下面的评论，这里是如何在 Drools 5.4+ 中实现您想要的：

```
declare window LastEvents
    Event() over window:length(3)
end

rule "OK events among the last 3 events"
when
    accumulate( $e : Event( tag == "OK" ) from window LastEvents,
                $events : collectList( $e ) )
then
    // $events is a list that contains the OK events among the last 3 
    // events by insertion order
end 
```

仔细检查语法，因为我正在这样做，但它应该接近这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-11T20:14:30.053

我能够像这样简化“非逻辑”

```
rule "Three most recent events tagged with 'OK'"
when
    $e1 : Event( tag == "OK")
    $e2 : Event( tag == "OK", millis < $e1.millis )
    $e3 : Event( tag == "OK", millis < $e2.millis )
    not Event( this != $e2, tag == "OK", $e3.millis < millis, millis < $e1.millis )
then
    System.out.printf("%s - %s - %s%n", $e1, $e2, $e3);
end 
```

没有什么关于清洁活动的说法。通常这是可取的，因此您可以通过删除最后一个事件来实现相同的逻辑：

```
rule "Three most recent events tagged with 'OK'"
when
    $e1 : Event( tag == "OK")
    $e2 : Event( tag == "OK", millis < $e1.millis )
    $e3 : Event( tag == "OK", millis < $e2.millis )
then
    System.out.printf("%s - %s - %s%n", $e1, $e2, $e3);
    retract ($e3)
end 
```

假设每秒你将插入一个事件一个“OK”另一个空“”，这是测试：

```
@DroolsSession("classpath:/test3.drl")
public class PlaygroundTest {

    @Rule
    public DroolsAssert drools = new DroolsAssert();

    @Test
    public void testIt() {
        for (int i = 0; i < 10; i++) {
            drools.advanceTime(1, SECONDS);
            drools.insertAndFire(new Event(i % 2 == 0 ? "OK" : "", i));
        }
    }
} 
```

所有三个变体都将产生相同的触发逻辑：

```
00:00:01 --> inserted: Event[tag=OK,millis=0]
00:00:01 --> fireAllRules
00:00:02 --> inserted: Event[tag=,millis=1]
00:00:02 --> fireAllRules
00:00:03 --> inserted: Event[tag=OK,millis=2]
00:00:03 --> fireAllRules
00:00:04 --> inserted: Event[tag=,millis=3]
00:00:04 --> fireAllRules
00:00:05 --> inserted: Event[tag=OK,millis=4]
00:00:05 --> fireAllRules
00:00:05 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [Event, Event, Event]
OK4 - OK2 - OK0
00:00:06 --> inserted: Event[tag=,millis=5]
00:00:06 --> fireAllRules
00:00:07 --> inserted: Event[tag=OK,millis=6]
00:00:07 --> fireAllRules
00:00:07 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [Event, Event, Event]
OK6 - OK4 - OK2
00:00:08 --> inserted: Event[tag=,millis=7]
00:00:08 --> fireAllRules
00:00:09 --> inserted: Event[tag=OK,millis=8]
00:00:09 --> fireAllRules
00:00:09 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [Event, Event, Event]
OK8 - OK6 - OK4
00:00:10 --> inserted: Event[tag=,millis=9]
00:00:10 --> fireAllRules 
```

变体`window:length(3)`也将处理最后 3 个 OK 事件。但一开始就不同：它也会为 1 和 2 的第一个 OK 事件触发。如果会话不包含任何事件，它也会在开始时以空列表触发一次。根据[文档](https://docs.jboss.org/drools/release/6.2.0.CR3/drools-docs/html/DroolsComplexEventProcessingChapter.html#d0e10678)，滑动窗口立即开始匹配，定义滑动窗口并不意味着规则必须等待滑动窗口“满”才能匹配。例如，计算 window:length(10) 上事件属性平均值的规则将立即开始计算平均值，对于无事件它将从 0（零）开始，并在事件到达时更新平均值逐个。

```
00:00:01 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [InitialFactImpl, UnmodifiableRandomAccessList]
[]
00:00:01 --> inserted: Event[tag=OK,millis=0]
00:00:01 --> fireAllRules
00:00:01 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [InitialFactImpl, UnmodifiableRandomAccessList]
[OK0]
00:00:02 --> inserted: Event[tag=,millis=1]
00:00:02 --> fireAllRules
00:00:03 --> inserted: Event[tag=OK,millis=2]
00:00:03 --> fireAllRules
00:00:03 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [InitialFactImpl, UnmodifiableRandomAccessList]
[OK0, OK2]
00:00:04 --> inserted: Event[tag=,millis=3]
00:00:04 --> fireAllRules
00:00:05 --> inserted: Event[tag=OK,millis=4]
00:00:05 --> fireAllRules
00:00:05 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [InitialFactImpl, UnmodifiableRandomAccessList]
[OK0, OK2, OK4]
00:00:06 --> inserted: Event[tag=,millis=5]
00:00:06 --> fireAllRules
00:00:07 --> inserted: Event[tag=OK,millis=6]
00:00:07 --> fireAllRules
00:00:07 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [InitialFactImpl, UnmodifiableRandomAccessList]
[OK2, OK4, OK6]
00:00:08 --> inserted: Event[tag=,millis=7]
00:00:08 --> fireAllRules
00:00:09 --> inserted: Event[tag=OK,millis=8]
00:00:09 --> fireAllRules
00:00:09 <-- 'Three most recent events tagged with 'OK'' has been activated by the tuple [InitialFactImpl, UnmodifiableRandomAccessList]
[OK4, OK6, OK8]
00:00:10 --> inserted: Event[tag=,millis=9]
00:00:10 --> fireAllRules 
```

# java - 所有方案的 Apache UrlValidator

> ID：12090296
> 
> 赞同：3
> 
> 时间：2012-08-23T11:12:37.833
> 
> 标签：java, url, url-validation

我`org.apache.commons.validator.UrlValidator`用于验证 URL。它对[http://www.google.com](http://www.google.com)返回 true，但对 www.google.com 返回 false

我也想允许 www.google.com。我应用了 ALLOW_ALL_SCHEMES 作为参数，但它不起作用。如何自定义 UrlValidator 以便它也返回`www.google.com`true `http://localhost:8282/GFEReporting`。有没有办法定制这个，所以它可以采用所有方案而不是方案？请告诉我。

还是有其他方法可以做到这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T14:19:43.483

```
UrlValidator validator = new UrlValidator() {
    /** allow missing scheme. */
    @Override
    public boolean isValid(String value) {
        return super.isValid(value) || super.isValid("http://" + value);
    }
};

validator.validate("google.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-02T10:23:37.033

```
private boolean isValidUrl(String value) {
    return UrlValidator.getInstance().isValid(value)
            || UrlValidator.getInstance().isValid("http://" + value);
} 
```

这是简化的@Sergey 的答案（不扩展`UrlValidator()`类）。

# rdf - Protege 中的 SPARQL 查询结果无法识别传递属性

> ID：12090299
> 
> 赞同：1
> 
> 时间：2012-08-23T11:12:51.177
> 
> 标签：rdf, sparql, owl, protege

我在这个问题中表达了几乎相同的要求：[Get all nodes in a transitive relationship](https://stackoverflow.com/questions/4056008/sparql-get-all-nodes-of-transient-relation)

我正在使用 Protege 3.4.8。这是一个 Owl-Lite 项目。我有一个传递属性“包含”，它被定义为节点类型的对象属性节点具有类型 A、B 和 C 的后代

我有个人通过包含这样的属性相互链接：

A 包含 B 包含 C

当我运行以下 SPARQL 查询时：

```
SELECT ?A ?B
WHERE
{
    ?A :contains ?B         
} 
```

我得到：

```
A1 B1
B1 C1 
```

由于包含的传递性，我希望得到

```
A1 C1 
```

也。我在这里做错了什么？我链接到的问题在答案中包括耶拿，在耶拿模型上这样做会有所不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:41:20.447

好的，

进一步搜索将我带到此页面： http: [//opentox.org/data/documents/development/RDF%20files/JavaOnly/query-reasoning-with-jena-and-sparql](http://opentox.org/data/documents/development/RDF%20files/JavaOnly/query-reasoning-with-jena-and-sparql)

此页面的以下引用（可能）解释了我所看到的行为背后的原因：

> “为了我们的目的，可以通过 Protege 中的 SPARQL 查询面板直接执行 SPARQL 查询，也可以使用专门的 Jena 库方法从 JAVA 应用程序内部执行。这两种方法都能够处理有关显式对象和属性关系的查询，但 Jena 库具有优势使用推理器。因此，使用 Jena 库方法执行的查询可以返回考虑到传递和推断关系的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:41:48.910

SPARQL 是一种 RDF 查询语言，因此并非所有 SPARQL 引擎都应该实现 OWL 蕴涵（即，使用 OWL 语义来评估查询）。更多详情请访问[http://www.w3.org/TR/sparql11-entailment/](http://www.w3.org/TR/sparql11-entailment/)

不确定哪个实现实际上在后台使用 Protege ......

# dns - 如何阻止 github 项目页面（或其他子页面）显示自定义域名？

> ID：12090302
> 
> 赞同：9
> 
> 时间：2012-08-23T11:12:57.643
> 
> 标签：dns, github, cname

我正在使用 GitHub 页面来托管我的博客。我在存储库中设置了 CNAME 记录，并将 A 记录和 CNAME 记录添加到我的域注册商 (123-reg)。这工作正常，所以现在我的个人页面[donskifarrell.github.com](http://donskifarrell.github.com) -> [donalfarrell.com](http://www.donalfarrell.com)。

这也使我所有的项目页面都映射到同一个新域，例如。[donskifarrell.github.com/calex](http://donskifarrell.github.com/calex) -> [donalfarrell.com/calex](http://www.donalfarrell.com/calex)。

虽然这很好，但事实证明这对我的一个项目来说很麻烦。

有什么方法可以修改我的设置，使某些项目页面不使用我自己的自定义域，而是保留 github url？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T04:53:07.850

没有真正的方法可以防止重定向发生。

但是，如果将项目放在不同的域或子域中会有所帮助，您可以使用**项目**`CNAME`分支中的文件来使用特定于项目的重定向覆盖您的用户重定向。**`gh-pages`**

 **在底部查看更多信息：[https ://help.github.com/articles/user-organization-and-project-pages](https://help.github.com/articles/user-organization-and-project-pages)**

# backbone.js - 骨干关系保存火灾添加： 即使模型已经存在

> ID：12090303
> 
> 赞同：2
> 
> 时间：2012-08-23T11:13:26.653
> 
> 标签：backbone.js, backbone-relational

我使用 BackBone 关系作为 Backbone.js 的非常有用的扩展。

但是，在保存具有 1 - M 关系的主干关系模型后，我遇到了一个问题。

我看到的问题是，在 model.save() 之后，add: 为集合中的每个相关模型再次触发。这会导致我的视​​图出现问题，因为模型在主视图中第二次呈现。

我的主视图设置如下：

```
 //master view
 initialize: function(){
     _.bindAll(this, 'render', 'renderRelated');
     this.model.bind('change', this.render);
     this.model.bind('add:related', this.renderRelated);
} 
```

这在首次加载和添加新的相关模型时效果很好。问题是，当在父模型上调用 save`add:related`时，即使模型具有 ID 等，也会为每个嵌套模型再次触发。似乎 save 完全重新填充了相关集合。

我想知道其他人是如何解决这个问题的？我在考虑：

1.  将嵌套视图附加到每个相关模型
2.  绑定 rm：与将视图从主视图中移除的方法相关

这对我来说似乎很hacky，效率非常低，并且会在删除并再次添加子视图时对最终用户造成闪烁效果。

作为其中的一部分，我还尝试绑定到，`reset:related`但保存后似乎没有触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:42:51.010

我使用 Backbone.Marionette 视图，我遇到了类似的问题。这是解决它的方法：

```
initialize: function(){
   this.bindTo(this.model, 'change', this.render);
   this.bindTo(this.model.get('myrelated'), 'relational:add', this.render);
} 
```

我认为在普通的 Backbone 中，这转化为（未经测试）：

```
initialize: function(){
    _.bindAll(this, 'render', 'renderRelated');
    this.model.bind('change', this.render);
    this.model.get('myrelated').bind('relational:add', this.render);
} 
```

请注意，如果您在`{wait: true}`保存时通过，`relational:add`则将触发两次：一次是在保存之前由主干创建临时模型时，一次是在保存成功并创建实际模型时。这是一个尚未解决[的关系错误。](https://github.com/PaulUithol/Backbone-relational/pull/153)

# c++ - C++ 无法解码回溯

> ID：12090309
> 
> 赞同：1
> 
> 时间：2012-08-23T11:13:57.073
> 
> 标签：c++, linux, centos

我已经使用以下方法设置了`backstrace_symbols`我的脚本：

```
void handler(int sig) {
    void *array[20];
    size_t size;
    char **strings;
    size_t  i;

    size = backtrace(array, 20);
    strings = backtrace_symbols(array,size);

    tracelog.open("/var/log/safesquid/safesquid/debug/trace.log", ios::app);
    tracelog << sig << endl;
    for (i=0; i<size; i++)
        tracelog << strings[i] << endl;

    free(strings);

    exit(1);
} 
```

在主函数中，它被称为使用

```
signal(SIGSEGV, handler); 
```

**回溯：**

```
11
/opt/scripts/cplusconnector(_Z7handleri+0x2b) [0x40233b]
/lib64/libc.so.6(+0x32920) [0x7fe7b503c920]
/lib64/libc.so.6(+0x131b5f) [0x7fe7b513bb5f]
/opt/scripts/cplusconnector(main+0x163) [0x4035c3]
/lib64/libc.so.6(__libc_start_main+0xfd) [0x7fe7b5028cdd]
/opt/scripts/cplusconnector() [0x402199]
11
/opt/scripts/cplusconnector(_Z7handleri+0x2b) [0x40233b]
/lib64/libc.so.6(+0x32920) [0x7fd9db71a920]
/lib64/libc.so.6(+0x131b5f) [0x7fd9db819b5f]
/opt/scripts/cplusconnector(main+0x163) [0x4035c3]
/lib64/libc.so.6(__libc_start_main+0xfd) [0x7fd9db706cdd]
/opt/scripts/cplusconnector() [0x402199]

[root@server dev]# addr2line -e test-unstrippped 0x402199 0x7f1999f16cdd 0x4035c3
??:0
??:0
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/basic_string.h:975 
```

问题可能出在哪里，为什么运行程序会导致[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)？

**更新：**

它是使用这些选项编译的

```
g++ cplusconnector-k.cpp -g -rdynamic -O2 -I/usr/include/mysql -L/usr/lib/mysql -lmysqlcppconn -o test  `mysql_config --cflags --libs` 
```

**更新：**

我删除了优化，并尝试使用回溯中的 add2line 解析符号，它指向代码中的这一行。

```
/opt/webcache/scripts/cplusconnector(_Z7handleri+0x25) [0x401d49]
/lib64/libc.so.6(+0x32920) [0x7f6ad974b920]
/lib64/libc.so.6(+0x131b5f) [0x7f6ad984ab5f]
/usr/lib64/libstdc++.so.6(_ZNSsaSEPKc+0x1c) [0x7f6ad9dcd12c]
/opt/webcache/scripts/cplusconnector(main+0x12b) [0x4027ae]
/lib64/libc.so.6(__libc_start_main+0xfd) [0x7f6ad9737cdd]
/opt/webcache/scripts/cplusconnector() [0x401c69]

[root@server dev]# addr2line -e test 0x401d49 0x7f6ad974b920 0x7f6ad984ab5f 0x7f6ad9dcd12c 0x4027ae 0x7f6ad9737cdd 0x401c69
/usr/local/dev/cplusconnector-k.cpp:42
??:0
??:0
??:0
/usr/local/dev/cplusconnector-k.cpp:138
??:0
??:0 
```

line: 42 在 main 函数之外并且是全局的：

```
ofstream httplog; 
```

line:138 在 main 函数内部：

```
 if (std::string::npos != host.find(string("1.0.0.1"))){
          return 0;
       } 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:25:28.817

要调试您的程序，您可以启用[核心](http://www.kernel.org/doc/man-pages/online/pages/man5/core.5.html)转储（使用[setrlimit(2)](http://linux.die.net/man/2/setrlimit)系统调用，通常通过[ulimit](http://linux.about.com/library/cmd/blcmdl1_ulimit.htm) bash 内置）。然后，`gdb`使用程序和核心转储运行。

至于为什么`backtrace_symbols`给你这样的名字，那是因为[name mangling](http://en.wikipedia.org/wiki/Name_mangling)。另请参阅[此](http://mykospark.net/2009/09/runtime-backtrace-in-c-with-name-demangling/)。

还可以考虑使用 Ian Taylor 的[libbacktrace](https://github.com/ianlancetaylor/libbacktrace)（集成到最新版本的 GCC，例如 GCC 6 及更高版本）。`-g`用（也许还有一些优化标志，如`-O`）编译你的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:31:42.230

我看到确实有充分的理由使用 free()

对于名称修饰使用[abi::__cxa_demangle](http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:08:34.270

不能从信号处理程序调用 backtrace()。

有一个（简短的）可以从信号处理程序调用的方法列表。不过我现在太懒太谷歌了

# ruby-on-rails - 在准备好的应用程序上使用 ransack

> ID：12090311
> 
> 赞同：1
> 
> 时间：2012-08-23T11:14:02.473
> 
> 标签：ruby-on-rails

再会。我的问题是^我正在尝试在准备好的项目上使用 ransack。它使用差异语言和 will_paginage。目前我得到

```
No Ransack::Search object was provided to search_form_for! 
```

当我尝试访问控制器的索引操作时。我应该怎么做才能使搜索工作？

控制器：

```
def index
    if params[:set_locale]
      redirect_to articles_path(locale: params[:set_locale])
    else
      if params[:q]
      @search = Article.search(params[:q])
        logger.debug '! IF 1'
         @articles = @search.result(:distinct => true).
           paginate page: params[:page], order: 'created_at desc',
          per_page: 5   # load all matching records
      else
        logger.debug('! ELSE 2')
        @articles = Article.paginate page: params[:page], order: 'created_at desc',
        per_page: 5
      end
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @articles }
    end
  end
 end 
```

**更新 1** 是的，如果你对我投反对票，好吧，但你能向我解释一下吗？

**更新 2** 和视图

```
 <%= search_form_for @q do |f| %>
  <%= f.label :articles_title_start %>
  <%= f.text_field :articles_title_start %><br />
  <!-- etc... -->
  <%= f.submit :value=>'Search' %>
<% end %> 
```

**更新 3** 模型

```
class Article < ActiveRecord::Base
  attr_accessible :text, :title
  validates :title, :presence=>true,:uniqueness=>true
  validates :text, :presence=>true
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:58:05.523

你可以试试

```
 @q = Article.paginate(:page => params[:page]).search(params[:q])
    @articles = @q.result(:distinct => true) 
```

我从未使用过 will_paginate 但与 kaminari 等效的作品与 ransack

同样在您看来，您有 var @q 并且在您的控制器中您有 @search，这些肯定需要相同，所以也许将控制器更改为

......

```
 @q = Article.search(params[:q])

 if params[:q]
    logger.debug '! IF 1'
     @articles = @q.result(:distinct => true).
       paginate page: params[:page], order: 'created_at desc',
      per_page: 5   # load all matching records
  else 
```

......

# powershell - 如何在 PowerShell 中访问包含特殊字符的文件路径

> ID：12090312
> 
> 赞同：13
> 
> 时间：2012-08-23T11:14:05.127
> 
> 标签：powershell

我从 Java 应用程序（通过 Windows 命令提示符）中调用 PowerShell 来读取各种文件属性。

例如，

```
powershell (Get-Item 'C:\Users\erlpm\Desktop\Temp\s p a c e s.txt').creationTime 
```

我用单引号将文件路径括起来，因为它可能包含空格。它工作得很好，直到我遇到一个包含方括号的文件路径，这似乎被解释为通配符。我设法通过添加*-literalPath*参数来解决它：

```
powershell (Get-Item -literalpath 'C:\Users\erlpm\Desktop\Temp\brackets[].txt').creationTime 
```

到目前为止，一切都很好……但是文件路径也可能包含单引号、美元符号、和号等，并且所有这些字符似乎在 PowerShell 中都有特定的功能，而*-literalPath*参数似乎不起作用。

我尝试用双引号将路径括起来或用`字符转义，但这也没有解决我的问题:-(

关于如何将可能包含空格、单引号、方括号、& 符号、美元符号等的文件路径传递给 PowerShell 的任何建议？

这里有人已经向我展示了如何在 PowerShell 中使其工作，但不知何故，答案已被删除（？）。

无论如何，我确实创建了一个名为`$ & ' [].txt`. 这*在*PowerShell 中有效（需要转义`&`）：

```
Get-Item -LiteralPath "C:\Users\erlpm\Desktop\Temp\`$ & ' [].txt"

    Directory: C:\Users\erlpm\Desktop\Temp

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---        2012-08-23     14:22          0 $ & ' [].txt 
```

但是当我通过 Windows 命令提示符执行相同的 PowerShell 命令时，...

```
powershell Get-Item -LiteralPath "C:\Users\erlpm\Desktop\Temp\`$ & ' [].txt" 
```

...我收到此错误：

> 不允许使用与号。& 运算符保留供将来使用；使用“&”将 & 号作为字符串传递。
> 在行：1 字符：55 \
> 
> *   Get-Item -LiteralPath C:\Users\erlpm\Desktop\Temp`$ & <<<< ' [].txt \
>     *   CategoryInfo : ParserError: (:) [], ParentContainsErrorRecordException \
>     *   FullyQualifiedErrorId : & 不允许

使用`-command`参数并将 PowerShell 命令置于其间`{}`会给出完全相同的错误消息...

```
powershell -command {Get-Item -LiteralPath "C:\Users\erlpm\Desktop\Temp\`$ & ' [].txt"} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T16:08:38.347

那么这确实是一个关于cmd.exe字符串转义的问题。将 cmd 和 PowerShell 字符串转义结合起来简直就是一场噩梦。经过多次尝试，我得到了你的具体例子：

```
powershell.exe -nologo -noprofile -command ^&{ dir -LiteralPath ^"""".\`$ & ' [].txt"" }

    Directory: C:\Users\latkin
Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---         8/23/2012   8:46 AM          0 $ & ' [].txt 
```

完全直观，对吧？

您可以每次花 15 分钟与转义序列搏斗，或者您可以尝试一些其他方法。

**将文件名放在一个文本文件中，然后从那里读出。**

```
powershell.exe -command "&{dir -literal (gc .\filename.txt)  }" 
```

或者

**使用脚本**

```
powershell.exe -file .\ProcessFiles.ps1  # In processfiles.ps1 you are in fully powershell environment, so escaping is easier 
```

或者

**使用 -EncodedCommand**

请参阅`powershell.exe -?`（显示的最后一项）或[http://dmitrysotnikov.wordpress.com/2011/07/06/passing-parameters-to-encodedcommand/](http://dmitrysotnikov.wordpress.com/2011/07/06/passing-parameters-to-encodedcommand/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T15:08:19.333

如果您可以将路径写入临时 .txt 文件，则以下操作正常：

```
(Get-Item -literalpath (gc 'C:\Temp\path.txt')).creationTime 
```

文件@ C:\Temp\path.txt 包含带有特殊字符的路径，除此之外，我认为您必须在每个路径的基础上转义每个特殊字符。

除了上面的 hack 之外，PowerShell V3 似乎可以通过添加一个新的“魔术参数”语言功能来帮助解决这个问题。[具体来说，请参阅此处](http://blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx)标题为“更轻松地从 Cmd.exe 重用命令行”的部分，因为我讨厌链接腐烂，所以在下面无耻地转载了它：

> **从 Cmd.exe 更容易重用命令行**
> 
> 网络上到处都是为 Cmd.exe 编写的命令行。这些命令行在 PowerShell 中经常工作，但是当它们包含某些字符时，例如分号 (;)、美元符号 ($) 或花括号，您必须进行一些更改，可能会添加一些引号。这似乎是许多轻微头痛的根源。
> 
> 为了帮助解决这种情况，我们添加了一种“逃避”命令行解析的新方法。如果您使用魔术参数 --%，我们将停止对您的命令行的正常解析并切换到更简单的东西。我们不匹配引号。我们不止于分号。我们不扩展 PowerShell 变量。如果您使用 Cmd.exe 语法（例如 %TEMP%），我们会扩展环境变量。除此之外，直到行尾的参数（或管道，如果您是管道）按原样传递。这是一个例子：
> 
> ```
>  echoargs.exe --% %USERNAME%,this=$something{weird}
>  Arg 0 is <jason,this=$something{weird}> 
> ```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-05T23:27:32.473

该线程已有 5 年历史，因此时代可能已经改变，但对我有用的当前答案是使用反引号 (`) 符号来转义特殊字符。

在我的情况下，这是一个失败的目录路径中的美元符号。通过在美元符号前加一个反引号，一切正常。

前：

```
$dir = "C:\folder$name\dir"  # failed 
```

后：

```
$dir = "C:\folder`$name\dir" # succeeded 
```

# c# - lightswitch LINQ 预处理查询

> ID：12090313
> 
> 赞同：1
> 
> 时间：2012-08-23T11:14:06.833
> 
> 标签：c#, linq, silverlight, visual-studio-lightswitch

我使用 PreprocessQuery 方法在 lightswitch 中扩展查询。像这样的东西：

`query = (from item in query where (validIDs.Contains(item.tableIDs.myID)) && elementCount[item.ID] <= maxEleCount) select item);`

其中*validIDs*是*HashSet(int)*而*elementCount*是*Dictionary(int, int)*。第一个 where 子句工作正常，但第二个 -> elementCount[item.ID] <= maxEleCount 不工作。

我想要做的是通过一些*ID*（validID）过滤一个表，并检查另一个表中每个ID*的条目数*是否不*超过限制*。

有任何想法吗？

**编辑** 我找到了解决方案。我还为第二个 where 子句使用了 HashSet 而不是 Dictionary。由于某种原因，似乎不可能在 LINQ 语句中进行字典查找（？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:06:25.017

首先，虽然有点迂腐，但您在*PreProcessQuery*方法中所做的是“*限制*”查询中的记录，而不是“*扩展*”查询。

您在 LING 查询中输入的内容必须能够由*实体框架数据提供程序*（在 LS 的情况下为*SQL Server 数据提供程序*）处理。

有时您会发现，当您的 LINQ 查询编译时，它会在运行时失败。这是因为数据提供者无法将其表达到数据存储（在本例中也是 SQL Server）。

您通常仅限于“原始”值，所以如果您没有说使用*Dictionary*确实有效，我会说它不会。

每当您有一个静态（如不变）值时，我建议您在 LINQ 查询之外创建一个变量，然后在 LINQ 查询中使用该变量。通过这样做，您只是传递了一个值，数据提供者不必试图弄清楚如何将它传递给数据存储。

再次阅读您的代码，这可能不是您正在做的事情，但希望这个解释仍然会有所帮助。

# php - 这会被认为是 php/codeigniter 中的依赖注入吗？

> ID：12090323
> 
> 赞同：0
> 
> 时间：2012-08-23T11:15:04.583
> 
> 标签：php, oop, codeigniter, design-patterns

这会被认为是依赖注入吗？

```
<?php
class BASE_Model extends CI_Model 
{  
    /**
     * inject_class - load class using dependency injection
     *
     * @access public
     * @param  string $path
     * @param  string $class
     * @param  string $func
     * @param  string $method
     **/
    public function inject_class($path, $class, $func, $method)
    {
        // load_class is a function located in system/core/common.php on line 123
        $obj = load_class($class, $path, NULL);
        return $obj->$func();
    }
}

// lets say this is instantiated by a user controller when a new user is made
class User_model extends BASE_Model
{
    public function create()
    {
        echo 'create a new user';
        $request = $this->inject_class('path/to/models', 'Logger_model', 'log');
        echo $request;
    }
}

class Logger_model extends BASE_Model
{
    public function log()
    {
        return 'Logged';
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T11:21:02.547

不，这只是对象自身加载依赖项的另一种方式。依赖注入的要点是每个方法/对象/函数都将其依赖项作为参数，并且不会*以*任何方式自行加载它们。`User_model::create`正在~~注入~~自己加载另一个类，它不*接受依赖项作为参数*。

依赖注入的目的是减少耦合。现在`User_model`与`Logger_model`类耦合，因为它在自身内部对特定类的名称和路径进行了硬编码。如果您想单独使用或测试`User_model`它，而没有它记录您不想要的东西，您就不能再这样做了。真正的 DI 是这样的：

```
public function create(Logger_model $log) {
    // here be dragons
    $log->log();
} 
```

这样，当您想在不破坏任何内容的情况下测试该方法或在需要时使用替代类型的记录器而无需更改任何代码时，您可以注入一个模拟的虚拟日志记录类。

# magento - Magento中奇怪的无效块类型错误

> ID：12090329
> 
> 赞同：0
> 
> 时间：2012-08-23T11:15:23.303
> 
> 标签：magento

> 2012-08-23T09:39:06+00:00 ERR (3): 在 /home/desbest/public_html/clients/magentofull/app/Mage.php:594 中带有消息“无效块类型：Desbest_Brands_Block_Adminhtml_Brand_Edit_Form”的异常“Mage_Core_Exception”

**Desbest/Brands/Block/Adminhtml/Brand/Edit.php**

```
<?php 
class Desbest_Brands_Block_Adminhtml_Brand_Edit extends Mage_Adminhtml_Block_Widget_Form_Container
{
    public function __construct()
    {
        /*
        $this->_objectId = 'id';
        $this->_blockGroup = 'brands';
        $this->_controller = 'adminhtml_brand';
        $this->_mode = 'edit';    
        parent::__construct();
        */

        parent::__construct();
        $this->_objectId = 'id';
        $this->_blockGroup = 'brands';
        $this->_controller = 'adminhtml_brand';
        $this->_mode = 'edit';

        $this->_addButton('save_and_continue', array(
                  'label' => Mage::helper('adminhtml')->__('Save And Continue Edit'),
                  'onclick' => 'saveAndContinueEdit()',
                  'class' => 'save',
        ), -100);
        $this->_updateButton('save', 'label', Mage::helper('brands')->__('Save Example'));

        $this->_formScripts[] = "
            function toggleEditor() {
                if (tinyMCE.getInstanceById('form_content') == null) {
                    tinyMCE.execCommand('mceAddControl', false, 'edit_form');
                } else {
                    tinyMCE.execCommand('mceRemoveControl', false, 'edit_form');
                }
            }

            function saveAndContinueEdit(){
                editForm.submit($('edit_form').action+'back/edit/');
            }
        ";
    }

    public function getHeaderText()
    {
        if (Mage::registry('example_data') && Mage::registry('example_data')->getId())
        {
            return Mage::helper('brands')->__('Edit Example "%s"', $this->htmlEscape(Mage::registry('example_data')->getName()));
        } else {
            return Mage::helper('brands')->__('New Example');
        }
    }

} 
```

**Desbest/Brands/Block/Adminhtml/Brand/Form.php**

```
<?php

class Desbest_Brands_Block_Adminhtml_Brand_Edit_Form extends Mage_Adminhtml_Block_Widget_Form
{
    protected function _prepareForm()
    {
        if (Mage::getSingleton('adminhtml/session')->getExampleData())
        {
            $data = Mage::getSingleton('adminhtml/session')->getExamplelData();
            Mage::getSingleton('adminhtml/session')->getExampleData(null);
        }
        elseif (Mage::registry('example_data'))
        {
            $data = Mage::registry('example_data')->getData();
        }
        else
        {
            $data = array();
        }

        $form = new Varien_Data_Form(array(
                'id' => 'edit_form',
                'action' => $this->getUrl('*/*/save', array('id' => $this->getRequest()->getParam('id'))),
                'method' => 'post',
                'enctype' => 'multipart/form-data',
        ));

        $form->setUseContainer(true);

        $this->setForm($form);

        $fieldset = $form->addFieldset('example_form', array(
             'legend' =>Mage::helper('brands')->__('Example Information')
        ));

        $fieldset->addField('name', 'text', array(
             'label'     => Mage::helper('brands')->__('Name'),
             'class'     => 'required-entry',
             'required'  => true,
             'name'      => 'name',
             'note'     => Mage::helper('brands')->__('The name of the example.'),
        ));

        $fieldset->addField('description', 'text', array(
             'label'     => Mage::helper('brands')->__('Description'),
             'class'     => 'required-entry',
             'required'  => true,
             'name'      => 'description',
        ));

        $fieldset->addField('other', 'text', array(
             'label'     => Mage::helper('brands')->__('Other'),
             'class'     => 'required-entry',
             'required'  => true,
             'name'      => 'other',
        ));

        $form->setValues($data);

        return parent::_prepareForm();
    }
} 
```

我仍然遇到同样的错误。

```
<?php

class Desbest_Brands_Block_Adminhtml_Brand_Edit_Form extends Mage_Adminhtml_Block_Widget_Form
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:20:41.330

你的班级被命名为：

> Desbest_Brands_Block_Adminhtml_Brand_Edit **_Form** _

但它存在于文件位置

> Desbest/Brands/Block/Adminhtml/Brand/Form.php

您缺少一个编辑文件夹:)

# c# - 如何使用 MongoDB 和 C# 驱动程序构建复杂的查询？

> ID：12090330
> 
> 赞同：9
> 
> 时间：2012-08-23T11:15:26.883
> 
> 标签：c#, mongodb

我开发了一个简单的 API，它允许您在 MongoDB 集合中构建一组搜索条件。我现在需要能够将此数组转换为实际的 Mongo 查询，而这部分是我遇到极大困难的地方。

理想情况下，我遵循一些允许我执行以下伪代码的语法：

```
var query = new QueryBuilder();
foreach (var group in groups)
{
    switch (group.Condition)
    {
        case GroupCondition.Or:
            query.Or(group.Queries);
        break;
        case GroupCondition.And:
            query.And(group.Queries);
        break;
    }
}
return myCollection.FindAs(type, query); 
```

我实际上想构建稍微复杂一点的查询，但最终我想要使用上面的伪代码中所见的对象动态构建查询的功能。

如果我对我想要达到的目标不够清楚，请随时向我询问更多细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T01:27:10.120

似乎你有正确的想法......有一个名为 Query 的类，它本质上是一个没有实例化的查询构建器。

使用 MongoDB.Driver.Builders；

Query.And、Query.Or 等……都在那里。它与在 linq 提供程序下用于构建复杂查询的东西相同。

# uitableview - 使用 registerNib:forCellReuseIdentifier: 阻止我与表格单元格内的控件进行交互

> ID：12090332
> 
> 赞同：2
> 
> 时间：2012-08-23T11:15:33.947
> 
> 标签：uitableview, ios5, nib

我正在使用**registerNib:forCellReuseIdentifier:**从 nib b/c 加载单元格，有人告诉我，我总是可以从 [tableView dequeueReusableCellWithIdentifier:] 获取单元格，从而减少那些样板代码。

我总是得到一个单元格，但问题是我的 IBAction（我的单元格中的一个按钮）通过引发异常“NSInvalidArgumentException”开始失败，原因是：xxx **unrecognized selector sent to** instance。

如果我删除调用 registerNib:forCellReuseIdentifier: 并像往常一样添加这些代码（如下），一切正常。所以我猜这个问题是由这个电话引起的。

那么我做错了什么？

顺便说一句，我将单元格 nib 文件的文件所有者设置为我的表格视图控制器。“Programming IOS 5”在这种情况下说“无需在 nib 中指定 File's Owner 类”，但由于我需要设置 IBAction，所以我仍然设置它。我不认为这会导致问题，对吧？

```
//The "old" codes without calling registerNib:forCellReuseIdentifier:
UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:@"MyCell"];
if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MyCell"
                                                 owner:self 
                                               options:nil];
    cell = [nib objectAtIndex:0]; 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:58:31.730

您的 IBAction 在加载单元格的控制器中，我接受吗？不要认为那会奏效。如果你在出队时查看调用堆栈——就像我现在正在做的一个调试点——你会看到

```
- [YOURCELLCLASS awakeFromNib];
- [UINib instantiateWithOwner:options:]
- [UITableView dequeueReusableCellWithIdentifier:] 
```

表视图如何知道它应该将哪个控制器对象作为所有者传递给 UINib 以匹配您声明的类？似乎没有任何方法可以做到这一点。事实上，当我复制上面的按钮并在 -awakeFromNib 中检查其目标时，该目标绝对不是控制器；因此你的崩溃。有趣的是，它似乎也不是表格视图，这是我所期望的；它是一个 NSObject，其地址乍一看与任何明显的东西都不匹配。

*耸耸肩*无论如何，教训似乎是你不应该将文件的所有者用于此 xib 中的任何内容。将您的逻辑移动到单元格自定义类中，或在出队后自行设置控件的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:15:49.260

我再次遇到了这个问题并做了一些进一步的调查。这是我发现的，

1.  在单元格笔尖中设置自己的文件是没有意义的（而且很危险）。我在 xib 中设置了自己的文件以将我的 IBAction 连接到 MyCell 类，但后来我意识到 [[NSBundle mainBundle] loadNibNamed:owner:options:] 中提供的所有者是唯一受尊重的运行时。很容易验证，只需提供 2 个 IBActions（相同的方法名称），一个在 MyCell 中，另一个在 owner 中，然后观察调用了哪一个。
2.  有很多文章说你可以通过调用来创建单元格`cell = [[MyCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];`但我认为这是错误的。要使用 xib 文件中的单元格，您必须调用`[[NSBundle mainBundle] loadNibNamed:owner:options:]`
3.  现在我有点相信这是一个错误，使用`registerNib:forCellReuseIdentifier:`会将您的 IBAction 设置为错误的目标，或者您不能将它与 IBAction 一起使用。就像@alexcurylo 在你使用它时所说的那样，无法正确设置文件的所有者（即使你已经在 xib 中设置了它）。这里问题的答案[UITableView registerNib:forCellReuseIdentifier:](https://stackoverflow.com/questions/12590471/uitableview-registernibforcellreuseidentifier)说运行时只是将所有者设置为nil。但奇怪的是 IBOutlet 总是设置正确。
4.  因此，如果您只需要更新 IBOutlet 的属性，例如更新 UILabel 的文本，使用 registerNib:forCellReuseIdentifier: 更简单 b/c 您总是会得到一个单元格，无需再次检查它为零。但是，如果您需要采取行动，则必须`addTarget:action:`在获得 UIView 后调用（使用 [[NSBundle mainBundle] loadNibNamed:owner:options:] 或 registerNib:forCellReuseIdentifier :)
5.  要创建自定义表格单元格，您可以继承 UITableViewCell 并将控件放置在代码中，或者只使用单元格 xib 文件，但无需同时执行这两种操作（许多文章也建议这样做）。因为您不会正确地获得 IBAction，并且您可以在没有 IBOutlet 的情况下轻松获得子视图。只使用 xib 可能更简单。当您使用 xib 文件时，请记住在单元格中设置子视图的标签，然后您可以使用 [cell viewWithTag:] 获取 UIViews

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T14:45:45.730

如果您想使用 IB 连接您的操作，我认为有两个主要选项：

1.  不要使用-使用旧式代码`registerNib:forCellReuseIdentifier:`手动加载笔尖。`cellForRowAtIndexPath:`
2.  将 IBActions 发送给 First Responder 而不是文件所有者，这公然违反​​了[Guy English 的建议](http://kickingbear.com/blog/archives/472)。

# servlets - 使用 Jetty 服务器会导致在我的 servlet 中调用两次 doGet() 方法

> ID：12090333
> 
> 赞同：0
> 
> 时间：2012-08-23T11:15:37.037
> 
> 标签：servlets, jetty

我正在使用[Jetty](http://en.wikipedia.org/wiki/Jetty_%28web_server%29)服务器使用 Eclipse 插件在我的本地主机上运行。

我的 URL 请求格式为

```
http://localhost:8080/TestServer/Project/?Action=5 
```

当我调用这个方法时，我的`doGet`方法在 servlet 中调用了两次。我没有实现`doPost`方法或`Service`方法。我只是在使用它，但是对于单个 HTTP 请求，它会调用`doGet`servlet 的方法两次运行。

为什么单个 URL 会导致运行两次？

```
protected void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {
    Print("In doGet method");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T08:32:09.853

我建议您使用浏览器跟踪发送的 HTTP 请求（如果您使用 Chrome，请使用开发人员工具的网络选项卡）。

就我而言，我遇到了同样的问题，我通过跟踪 HTTP 请求发现了原因。也许你和我有同样的情况。我使用了 Chrome JSONView 扩展，当我访问返回 JSON 内容的 URL 时，发送了两次 HTTP 请求（浏览器 URL + JSONView 发送 AJAX 请求（content.js））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T15:13:05.573

Raghul，如果 doGet 被调用两次，那么只有一个可能的结论：有 2 个请求到来。

以下是我的建议：

1.  实现 doGet 并检查 HttpServletRequest 对象，查看 Web 容器在两次调用中提供的对象之间是否存在任何差异。

2.  使用[tcpmon](https://code.google.com/p/tcpmon/)并检查通过网络传输的数据。无需安装，直接在线运行即可。您将在那里看到标题，并且您要特别注意字段**User-Agent**。很可能，这两个电话都不一样。如果完全相同，则您的浏览器是唯一的罪魁祸首，我建议您尝试使用其他浏览器或重新安装它。

# android - 片段中的菜单未显示

> ID：12090335
> 
> 赞同：51
> 
> 时间：2012-08-23T11:15:42.000
> 
> 标签：android, android-fragments, android-menu

我的最后一个问题得到了非常有用的提示，我希望这次不会有所不同:) 首先，让我解释一下情况。我有一个包含 2 个片段的活动。对于每个片段，我都有一个 xml 菜单布局，第一个有四个菜单条目，第二个只有一个。现在首先加载具有四个菜单项的片段。在我设置的 onCreate 方法中

```
this.setHasOptionsMenu(true); 
```

onCreateOptionsMenu 方法

```
@Override 
public void onCreateOptionsMenu (Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.menu_fragshow, menu);
} 
```

xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_refresh"
      android:icon="@drawable/ic_action_search"
      android:title="Refresh"
      android:visible="true"
      android:showAsAction="ifRoom|withText" />
<item android:id="@+id/menu_clearall"
      android:icon="@drawable/ic_action_search"
      android:title="Clear"
      android:visible="true"
      android:showAsAction="ifRoom|withText" />
<item android:id="@+id/menu_addcontent"
      android:icon="@drawable/ic_action_search"
      android:title="Add Content"
      android:visible="true"
      android:showAsAction="ifRoom|withText" />
<item android:id="@+id/menu_newlist"
      android:icon="@drawable/ic_action_search"
      android:title="New List"
      android:visible="true"
      android:showAsAction="ifRoom|withText" />    
</menu> 
```

这工作正常。所有菜单项都在那里，我可以单击它们并做出响应。现在，当我单击“添加内容”菜单时，会加载另一个片段。我也设置了

```
this.setHasOptionsMenu(true); 
```

onCreateOptionsMenu 方法

```
@Override 
public void onCreateOptionsMenu (Menu menu, MenuInflater inflater) {
    Log.i("FragCreateList","onCreateOptionsMenu called");
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.menu_fragcreatelist, menu);
} 
```

xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_editdone"
      android:icon="@drawable/ic_action_search"
      android:title="Edit Done"
      android:visible="true"
      android:showAsAction="ifRoom|withText" />         
</menu> 
```

但在新片段中，我看不到任何菜单项。既不是在操作栏中，也不是当我按下硬件菜单按钮时。在前一个片段中，两个菜单项在操作栏中，其余两个在按下硬件按钮时出现。但是这里什么都没有显示。我收到调用 onCreateOptionsMenu 方法的 logcat 消息，但没有任何反应。（我什至接到了对我的（空）onPrepareOptionsMenu 方法的调用，该方法应该在菜单显示之前调用，仍然没有）任何线索可能是错误的？调用 invalidateOptionsMenu 没有任何作用。此外，我不知道该调用哪一个，因为有一个 getActivity().invalidateOptionsMenu 和一个 getFragmentManager().invalidateOptionsMenu... 在此先感谢。

编辑 ：

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" /> 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-12-02T10:50:01.003

我在 onCreateView 中添加了**setHasOptionsMenu(true)**并且效果很好

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    setHasOptionsMenu(true);
    return inflater.inflate(R.layout.my_example_fragment, container, false);

} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-09-20T20:40:38.553

在膨胀菜单之前使用 menu.clear()。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    menu.clear();
    inflater.inflate(R.menu.mnulayout, menu);
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-10-10T02:03:43.740

首先你的片段必须在`onCreate`

```
 setHasOptionsMenu(true); 
```

然后您必须检查您的活动是否具有类似 NoActionBar 的主题，这有点棘手，但如果您的活动具有该主题，则无论您在哪里调用`setHasOptionsMenu(true)`片段都不会画她

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-10-14T13:40:58.053

我有同样的问题。**我通过在应用于 myApp 上下文**的项目中使用 showAsAction 来修复它：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" 
    xmlns:myapp="http://schemas.android.com/apk/res-auto">
    <item android:id="@+id/action_refresh"
          android:icon="@drawable/ic_refresh"
          android:title="refresh"
          android:visible="true"
          myapp:showAsAction="ifRoom|withText"/>
</menu> 
```

对不起，对你来说太晚了，但它可能对其他人有用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-10-05T12:13:28.903

这实际上对我有用，也可能是您的解决方案。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
    setHasOptionsMenu(true);
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-10-15T08:13:17.830

发生这种情况是因为您的设备有硬件菜单按钮。因此，变量“sHasPermanentMenuKey”的值在 ViewConfiguration [hasPermanentMenuKey()](http://developer.android.com/reference/android/view/ViewConfiguration.html#hasPermanentMenuKey%28%29)中为真。您必须使用反射将此变量的值设置为 false。例子：

```
// this method force showing menu button in device with hardware menu button
private void showOverflowMenu(FragmentActivity activity) {
    try {
        ViewConfiguration config = ViewConfiguration.get(activity);
        Field menuKeyField = ViewConfiguration.class.getDeclaredField("sHasPermanentMenuKey");
        if (menuKeyField != null) {
            menuKeyField.setAccessible(true);
            menuKeyField.setBoolean(config, false);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

**注意：在活动的 onCreate() 中使用此方法，而不是在片段的方法 onCreate() 中使用。**

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-08-17T04:38:35.603

`setSupportActionBar(youtoolbar)`如果您`Toolbar`在活动中使用 a ，请确保设置。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-08-23T12:13:23.393

在片段中注册选项/上下文菜单时，您通常需要等到 onActivityCreated() 调用以确保有一个活动可以将菜单绑定到。尝试此处建议的修复程序，看看是否有帮助：

[ListFragment 的上下文菜单](https://stackoverflow.com/questions/8770625/context-menu-from-a-listfragment/8856432#8856432)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-06-17T14:45:50.530

对于片段类，为了让您查看菜单，请在 onCreateView() 方法或 onCreateAcivity() 方法中添加 sethasoptionsmenu(true)。但是我将我的添加到 onCreateView() 方法中。希望它可以帮助某人

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-02T08:02:27.807

选项菜单可能被隐藏，但可以工作。您可以通过长按硬件按钮“最近的应用程序”来检查这一点。

除了上面提到的隐藏菜单的原因外，还有可能是AndroidManifest.xml中没有指定action bar的主题

```
 <application
        ...
        android:theme="@style/Theme.Design.NoActionBar"
        ...
    </application> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-23T11:27:27.467

尝试在片段中将 onCreateOptionsMenu 更改为 onPrepareOptionsMenu，我遇到了同样的问题，据我所知，这为我解决了...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-19T08:02:26.857

如果所有解决方案都不起作用，请尝试以下操作：

`onCreateView()`在方法中添加以下行

```
setHasOptionsMenu(true) 
```

还在`onViewCreated()`方法中添加以下行

```
(activity as AppCompatActivity?)!!.setSupportActionBar(customToolbar as Toolbar?) 
```

其中customToolBar是xml文件中添加的工具栏的id

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-10-04T21:52:05.183

您的活动需要扩展**ActionBarActivity**。您可能有一个只扩展 Activity。**强文本**

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-03T09:49:03.163

***此代码解释了显示 Fragment OnOptionItem 选择项的解决方案。和选项菜单中项目的 OnClicklistner***

**如果应用程序为每个单独的片段使用自定义工具栏。**

***片段测试.java***

```
public class FragmentTest extends BaseFragmentHelper {
    public static final String TAG = FragmentRegistration.class.getSimpleName();
    View testFragmetnView;

    Toolbar toolbarRegistration;

    @Override
    public void onAttachFragment(@NonNull Fragment childFragment) {
        super.onAttachFragment(childFragment);
    }

    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        testFragmetnView= inflater.inflate(R.layout.test_layout, container, false);
        //Intialize Toolbar
        toolbarRegistration=(Toolbar) registrationFragmentView.findViewById(R.id.toolbarRegistration_id);
        //inflate Menu layout
        toolbarRegistration.inflateMenu(R.menu.menu_test);
        //onOption Menu OnClicklistner
        toolbarRegistration.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
           switch (item.getItemId()){
                case R.id.test1:{
                    Toast.makeText(getActivity(),"Test 1",Toast.LENGTH_SHORT).show();
                    break;
                }
                case R.id.test2:{
                    Toast.makeText(getActivity(),"Test 2",Toast.LENGTH_SHORT).show();
                    break;
                }
            }
            return false;
        }
    });
        return testFragmetnView;
    }

    @Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
         setHasOptionsMenu(true);
    }

    @Override
    public void onStart() {
        super.onStart();
    }

    @Override
    public void onResume() {
        super.onResume();

    }

    @Override
    public void onDetach() {
        super.onDetach();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
    }

    @Override
    public String toString() {
        return FragmentTest.class.getSimpleName();
    }
  } 
```

**test_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbarRegistration_id"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        app:contentInsetLeft="0dp"
        android:background="@color/purple_700"
        app:contentInsetStart="0dp">
        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent">
            <ImageView
                android:id="@+id/imageView_toolbar_cancel_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/cancel_icon"
                android:layout_centerVertical="true"
                android:layout_marginLeft="5dp">
            </ImageView>
            <TextView
                android:id="@+id/toolbar_textViewheader_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_marginLeft="50dp"
                android:textColor="@color/white"
                android:textStyle="bold"
                android:text="Registration"
                android:textSize="20dp">
            </TextView>
        </RelativeLayout>
    </androidx.appcompat.widget.Toolbar>
</RelativeLayout> 
```

***菜单测试***

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <item
        android:id="@+id/test1"
        android:title="Test 1"
        android:visible="true" />
    <item
        android:id="@+id/test2"
        android:title="Test 2"
        android:visible="true"
        />
</menu> 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-10-23T19:21:57.067

由于上述建议都没有解决我的问题，因此添加得很晚。我的设备（2.3.5）的选项菜单有一个非常糟糕的时间问题，我不得不走一条不同的路线，并使用活动中的充气机在 onprepare 部分创建菜单：

```
@Override
public void onPrepareOptionsMenu(Menu menu)
{
    if (Build.VERSION.SDK_INT < 11) {
        menu.clear();
        getActivity().getMenuInflater().inflate(R.menu.message_thread, menu);
    } 
```

# jquery - jQuery - 如何在点击的元素上替换 img src？

> ID：12090336
> 
> 赞同：2
> 
> 时间：2012-08-23T11:15:42.360
> 
> 标签：jquery, replace

**HTML：**

```
<div id="panel">
     <a href="path_to_image1.jpg" rel="shadowbox[page]">
     <img src="scripts/timthumb.php?src=path_to_image1.jpg&w=200&h=20" alt="Image name1" /></a>
</div>

<div id="thumbs">
    <a href="path_to_image1.jpg" rel="shadowbox[page]"><img src="scripts/timthumb.php?src=path_to_image1.jpg&w=30&h=30" alt="Image name1" /></a>
    <a href="path_to_image2.jpg" rel="shadowbox[page]"><img src="scripts/timthumb.php?src=path_to_image2.jpg&w=30&h=30" alt="Image name2" /></a>
    <a href="path_to_image3.jpg" rel="shadowbox[page]"><img src="scripts/timthumb.php?src=path_to_image3.jpg&w=30&h=30" alt="Image name3" /></a>
</div> 
```

**JS：**

```
$('#thumbs a').click(function(evt) {
    evt.preventDefault();
    var clickedElement = $(this).clone();
    $('#panel').empty().append(clickedElement);
}); 
```

所以这很有效，我只想将点击锚上的图像 src 的 w=30&h=30 更改为 w=200&h=200，然后附加到#panel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:21:50.810

```
$('#thumbs a').click(function(evt) {
    evt.preventDefault();
    var clickedElement = $(this).clone();
    var img = clickedElement.find('img'),
        imgSrc = img.attr('src').replace(/w=30&h=30/, 'w=200&h=200');

    img.attr('src', imgSrc);
    $('#panel').empty().append(clickedElement);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:25:41.650

```
$('#thumbs a').click(function(evt) {
    var clickedElement = $(this).clone().find('img').attr('src', function(i, src){
        return src.replace('w=30&h=30', 'w=200&h=200')
    }).end()
    $('#panel').html(clickedElement);
}); 
```

[小提琴](http://jsfiddle.net/yw2M4/3/)

# php - 无法在 Linux 上安装 OAuth

> ID：12090338
> 
> 赞同：4
> 
> 时间：2012-08-23T11:16:10.970
> 
> 标签：php, linux, oauth, oauth-2.0

我正在尝试在 linux 上安装 OAuth，但它不起作用。

我正在运行这个命令：

```
yum install php-devel 
```

进而

```
pecl install oauth 
```

然后我得到这个**输出**：

```
 downloading oauth-1.2.2.tgz ...
Starting to download oauth-1.2.2.tgz (45,348 bytes)
.............done: 45,348 bytes
6 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
building in /var/tmp/pear-build-rootmB8jnS/oauth-1.2.2
running: /var/tmp/oauth/configure
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... no
checking for gcc... no
configure: error: in `/var/tmp/pear-build-rootmB8jnS/oauth-1.2.2':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details.
ERROR: `/var/tmp/oauth/configure' failed 
```

谢谢@Daniel M 现在我有另一个**错误**：

```
 make
/bin/sh /var/tmp/pear-build-rootfr2xXB/oauth-1.0.0/libtool --mode=compile cc  -I. -I/var/tmp/oauth -DPHP_ATOM_INC -I/var/tmp/pear-build-rootfr2xXB/oauth-1.0.0/include -I/var/tmp/pear-build-rootfr2xXB/oauth-1.0.0/main -I/var/tmp/oauth -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib  -DHAVE_CONFIG_H  -g -O2 -Wall -g   -c /var/tmp/oauth/oauth.c -o oauth.lo
libtool: compile:  cc -I. -I/var/tmp/oauth -DPHP_ATOM_INC -I/var/tmp/pear-build-rootfr2xXB/oauth-1.0.0/include -I/var/tmp/pear-build-rootfr2xXB/oauth-1.0.0/main -I/var/tmp/oauth -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib -DHAVE_CONFIG_H -g -O2 -Wall -g -c /var/tmp/oauth/oauth.c  -fPIC -DPIC -o .libs/oauth.o
In file included from /var/tmp/oauth/php_oauth.h:47,
                 from /var/tmp/oauth/oauth.c:14:
/usr/include/php/ext/pcre/php_pcre.h:29:18: error: pcre.h: No such file or directory
In file included from /var/tmp/oauth/php_oauth.h:47,
                 from /var/tmp/oauth/oauth.c:14:
/usr/include/php/ext/pcre/php_pcre.h:37: error: expected '=', ',', ';', 'asm' or '__attribute__' before '*' token
/usr/include/php/ext/pcre/php_pcre.h:38: error: expected '=', ',', ';', 'asm' or '__attribute__' before '*' token
/usr/include/php/ext/pcre/php_pcre.h:44: error: expected specifier-qualifier-list before 'pcre'
make: *** [oauth.lo] Error 1
ERROR: `make' failed 
```

你知道我为什么会收到这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:19:09.193

是的，我成功了！

我更新了 yum 并按照以下说明操作：

[http://www.codingsteps.com/install-php-apc-on-amazon-ec2-linux-ami-or-centos/](http://www.codingsteps.com/install-php-apc-on-amazon-ec2-linux-ami-or-centos/)

**另外**，最后我又打了一个电话（我需要 1.0.0）

```
sudo pecl install -f oauth-1.0.0 
```

# ios - 如何合并图像并保持原始转换

> ID：12090340
> 
> 赞同：0
> 
> 时间：2012-08-23T11:16:16.427
> 
> 标签：ios, image-processing

我有一个简单的 iPad 图像拼贴应用程序的问题。我有一个 UIImageView，可以将不同的 UIImageView 拖放到其中。拖动的视图可以旋转和拉伸。当用户完成图像编辑后，我会将所有图像合并到最终图像中。我的解决方案是使用 UIGraphics 并绘制大图像，然后遍历所有子视图并在上下文中绘制它们：

```
- (UIImage*)mergeImages
{
    CGSize imageSize = imageView.frame.size;
    UIGraphicsBeginImageContext(imageSize);

    [imageView.image drawInRect:CGRectMake(0, 0, imageSize.width, imageSize.height)];

    [[imageView subviews] enumerateObjectsUsingBlock:^(id object, NSUInteger index, BOOL *stop) {

        UIImage *imageOriginal = ((UIImageView*)object).image;
        CGRect rect = ((UIImageView*)object).frame;

        UIImage *imageToAdd = [self scaleImage:imageOriginal :rect.size];

        // Find the w/h ratioes
        float widthRatio = rect.size.width / imageOriginal.size.width;
        float heightRatio = rect.size.height / imageOriginal.size.height;

        // Calculate point to draw at
        CGPoint pointToDrawAt;
        if (widthRatio > heightRatio)
            pointToDrawAt = CGPointMake(rect.origin.x + (rect.size.width / 2) - (imageToAdd.size.width / 2), rect.origin.y);
        else
            pointToDrawAt = CGPointMake(rect.origin.x, rect.origin.y + (rect.size.width / 2) - (imageToAdd.size.height / 2));

        [imageToAdd drawAtPoint:pointToDrawAt];

    }];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    

    // Save image in photogalery
    UIImageWriteToSavedPhotosAlbum(newImage, nil, nil, nil);

    return newImage;
} 
```

只要图像不旋转，上述方法就可以正常工作。所以我的问题是：

有没有办法可以从子视图中找到旋转角度，或者我必须继承 UIView 并使其成为一个属性？还是有另一种方法可以合并图像并获取绘图特定属性，例如角度和滤镜？

如果我可以帮助提供更多代码或任何评论。并提前感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:25:11.150

UIImages 有一个可以查询的名为“imageOrientation”的属性。一旦你知道了这一点，你就可以将 CGAffineTransform 应用到上下文中，让图像在你看到的时候呈现出来。最近有一篇关于此的帖子 - 在过去的几天里 - 如果您搜索“CGAffineTransform”，您应该能够找到它（或类似的帖子）并查看它是如何完成的。

# python - 当数组具有不同长度的字符串时，记录数组上的 numpy.concatenate 失败

> ID：12090345
> 
> 赞同：2
> 
> 时间：2012-08-23T11:16:29.350
> 
> 标签：python, numpy

当尝试连接具有 dtype 字符串字段但长度不同的记录数组时，连接失败。

正如您在以下示例中所见，如果 'f1' 的长度相同，则连接有效，但如果不是，则连接失败。

```
In [1]: import numpy as np

In [2]: a = np.core.records.fromarrays( ([1,2], ["one","two"]) )

In [3]: b = np.core.records.fromarrays( ([3,4,5], ["three","four","three"]) )

In [4]: c = np.core.records.fromarrays( ([6], ["six"]) )

In [5]: np.concatenate( (a,c) )
Out[5]: 
array([(1, 'one'), (2, 'two'), (6, 'six')], 
      dtype=[('f0', '<i8'), ('f1', '|S3')])

In [6]: np.concatenate( (a,b) )
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/u/jegannas/<ipython console> in <module>()

TypeError: expected a readable buffer object 
```

但是，如果我们只是连接数组（而不是记录），它会成功，尽管字符串的大小不同。

```
In [8]: np.concatenate( (a['f1'], b['f1']) )
Out[8]: 
array(['one', 'two', 'three', 'four', 'three'], 
      dtype='|S5') 
```

这是连接记录时连接中的错误还是预期的行为。我想出了以下方法来克服这个问题。

```
In [10]: np.concatenate( (a.astype(b.dtype), b) )
Out[10]: 
array([(1, 'one'), (2, 'two'), (3, 'three'), (4, 'four'), (5, 'three')], 
      dtype=[('f0', '<i8'), ('f1', '|S5')] 
```

但是这里的问题是我必须遍历所有的recarrays，我正在连接并找到最大的字符串长度，我必须使用它。如果记录数组中有多个字符串列，我还需要跟踪其他一些事情。

你认为克服这个问题的最好方法是什么，至少现在是这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:25:18.113

发布完整的答案。正如 Pierre GM 建议的模块：

```
import numpy.lib.recfunctions 
```

给出了解决方案。然而，做你想要的功能是：

```
numpy.lib.recfunctions.stack_arrays((a,b), autoconvert=True, usemask=False) 
```

（`usemask=False`只是为了避免创建一个您可能没有使用的屏蔽数组。重要的是`autoconvert=True`强制从`a`'s转换`dtype` `"|S3"`为`"|S5"`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:32:42.073

当您不指定 dtype 时，`np.rec.fromarrays`（aka `np.core.records.fromarrays`）会尝试为您猜测 dtype。因此，

```
In [4]: a = np.core.records.fromarrays( ([1,2], ["one","two"]) )

In [5]: a
Out[5]: 
rec.array([(1, 'one'), (2, 'two')], 
      dtype=[('f0', '<i4'), ('f1', '|S3')]) 
```

请注意，该列的 dtype`f1`是一个 3 字节的字符串。

您不能连接`np.concatenate( (a,b) )`，因为 numpy 看到 和 的 dtype`a`不同`b`，并且不会更改较小字符串的 dtype 以匹配较大的字符串。

如果您知道适用于所有数组的最大字符串大小，则可以从头开始指定 dtype：

```
In [9]: a = np.rec.fromarrays( ([1,2], ["one","two"]), dtype = [('f0', '<i4'), ('f1', '|S8')])

In [10]: b = np.core.records.fromarrays( ([3,4,5], ["three","four","three"]), dtype = [('f0', '<i4'), ('f1', '|S8')]) 
```

然后连接将按需要工作：

```
In [11]: np.concatenate( (a,b))
Out[11]: 
array([(1, 'one'), (2, 'two'), (3, 'three'), (4, 'four'), (5, 'three')], 
      dtype=[('f0', '<i4'), ('f1', '|S8')]) 
```

* * *

如果您事先不知道字符串的最大长度，可以将 dtype 指定为“object”：

```
In [35]: a = np.core.records.fromarrays( ([1,2], ["one","two"]), dtype = [('f0', '<i4'), ('f1', 'object')])

In [36]: b = np.core.records.fromarrays( ([3,4,5], ["three","four","three"]), dtype = [('f0', '<i4'), ('f1', 'object')])

In [37]: np.concatenate( (a,b))
Out[37]: 
array([(1, 'one'), (2, 'two'), (3, 'three'), (4, 'four'), (5, 'three')], 
      dtype=[('f0', '<i4'), ('f1', '|O4')]) 
```

这不会像`'|Sn'`（对于某些 integer `n`）的 dtype 那样节省空间，但至少它允许您执行`concatenate`操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T11:34:44.397

会`numpy.lib.recfunctions.merge_arrays`为你工作吗？`recfunctions`是一个鲜为人知的子包，没有做很多广告，它有点笨重，但有时可能很有用。

# c# - 如何从 ActionLink asp.net Mvc 3 调用 jquery 函数？

> ID：12090354
> 
> 赞同：0
> 
> 时间：2012-08-23T11:16:45.837
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui

如何从 actionlink 调用 jquery 函数。我的 this.href 结果：“localhost:54678/Customer?param=1”但我需要 this.href:“localhost:54678/Customer/EditCustomer/?param=1”客户是控制器，EditCustomer 是操作。

查询：

```
 $('#mylink').click(function (e) {
            jQuery('#dialog').dialog('open');
            var iframe = $('#frame');
            alert(this.href);
            $(iframe).attr('src', this.href);

            e.preventDefault();
        }); 
```

看法：

```
 <%= Html.ActionLink(
             "Click",
             "Index",
    new { param = 1 },
    new { id = "mylink" })
%> 
```

localhost:54678/Customer/EditCustomer/?param=1 这个怎么调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:20:42.500

这个怎么样？

```
<%= Html.ActionLink( 
         "Click", 
         "EditCustomer",
new { param = 1 }, 
new { id = "mylink" }) 
```

%>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:24:41.830

您的 ActionLink 指向 Customer 控制器的 Index 操作。将其更改为 EditCustomer，如下所示：

```
<%= Html.ActionLink(
             "Click",
             "EditCustomer",
    new { param = 1 },
    new { id = "mylink" })
%> 
```

# actionscript-3 - 使用 youtube 之类的 flash media plyer 从 fms 播放 netsteam

> ID：12090355
> 
> 赞同：0
> 
> 时间：2012-08-23T11:16:47.687
> 
> 标签：actionscript-3, flash, flash-media-server

我正在使用 adobe FMS 4.5 在同一应用程序中从网络摄像头录制视频并从 fms 播放 netsream。

我的客户端动作脚本就像

```
package
{
    import fl.controls.Button;
    import flash.display.Sprite;
    import flash.net.NetConnection;
    import flash.net.NetStream;
    import flash.events.NetStatusEvent;
    import flash.events.MouseEvent;
    import flash.events.Event;
    //import flash.net.ObjectEncoding;
    import flash.media.Camera;
    import flash.media.Microphone;
    import flash.media.Video;

public class mytest3 extends Sprite
    {

        private var nc:NetConnection;
        private var ns:NetStream;
        private var rtmpNow:String;
        private var msg:Boolean;
        private var cam:Camera;
        private var mic:Microphone;
        private var vid1:Video;
        private var recordBtn:Button;
        private var stopBtn:Button;
        private var playBackBtn:Button;
        private var textInput:TextInput;
        private var timestamp:Date    = new Date();
        private var fileName:String;

        //Constructor
        function mytest3 ()
        {
            //NetConnection.defaultObjectEncoding = flas    h.net.ObjectEncoding.AMF0;
            nc=new NetConnection();
            nc.addEventListener (NetStatusEvent.NET_STATUS,checkConnect);
            rtmpNow="rtmp://localhost/test1";
            //rtmpNow="rtmp://192.169.1.25/test1";

            nc.connect (rtmpNow);
            addMedia ();
            addUI ();
            recordBtn.addEventListener (MouseEvent.CLICK,startRecord);
            stopBtn.addEventListener (MouseEvent.CLICK,stopRecord);
            playBackBtn.addEventListener(MouseEvent.CLICK,playBack);
    }

        private function addMedia ():void
        {
            cam=Camera.getCamera();
            cam.setMode (240,180,24);
            cam.setQuality (0,100);
            mic=Microphone.getMicrophone();
            vid1=new Video(cam.width,cam.height);
            vid1.attachCamera (cam);
            addChild (vid1);
            vid1.x=100;
            vid1.y=50;
        }

        private function addUI ():void
        {
            recordBtn=new Button();
            recordBtn.label="Start Recording";
            recordBtn.x=100;
            recordBtn.y=50+(cam.height) +5;
            recordBtn.width=70;
            addChild (recordBtn);

            stopBtn=new Button();
            stopBtn.label="Stop Recording";
            stopBtn.x=recordBtn.x+85;
            stopBtn.y=recordBtn.y;
            stopBtn.width=75;
            addChild (stopBtn);

            playBackBtn=new Button();
            playBackBtn.label="PlayBack";
            playBackBtn.x=stopBtn.x+85;
            playBackBtn.y=recordBtn.y;
            playBackBtn.width=75;
            addChild(playBackBtn);

        }

        private function checkConnect (e:NetStatusEvent):void
        {
            msg=(e.info.code=="NetConnection.Connect.Success");
            if (msg)
            {
                ns = new NetStream(nc);
            }
        }

        private function startRecord (e:Event):void
        {
            if (ns)
            {
                //recordBtn.label="Recording";
                recordBtn.visible=false;
                ns.attachAudio (mic);
                ns.attachCamera (cam);
                fileName = String("videos"+timestamp.getTime());
                ns.publish(fileName,"record")

            }
        }

        private function stopRecord (e:Event):void
        {
            //recordBtn.label="Recorded"
            recordBtn.visible=false;;
            stopBtn.label="Stoped";
            ns.close ();
        }
        private function playBack(e:Event):void 
        {
            playBackBtn.label="Playing Back";
            stopBtn.visible=false;
            var nsPlayer:NetStream = new NetStream(nc);
            //nsPlayer.play("my.flv");
            var vid:Video = new Video(cam.width,cam.height);
            vid.x = playBackBtn.x+30;
            vid.y = vid1.y;
            vid.attachNetStream(nsPlayer);
            nsPlayer.play(fileName);
            vid.smoothing=true;
            addChild(vid);
        }
    }
} 
```

录音和回放工作正常。我希望它在播放时看起来像带有播放、暂停、搜索栏等控件的 youtube 视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:38:32.867

您要么需要自己创建这些控件，要么使用 Flash 组件 ( [FLVplayback](http://www.adobe.com/devnet/flashmediaserver/articles/beginner_dynstream_fms.html) ) 或[Strobe](http://www.osmf.org/strobe_mediaplayback.html)（尽管我认为没有一种简单的方法可以将 strobe 嵌入到现有的带有 swc 的 Flash 项目中，也许其他人可以发表评论或编辑此以澄清）

FLVplayback 可以换成你想要的外观

# c++ - Qt、c++ QML 和 HWND

> ID：12090356
> 
> 赞同：2
> 
> 时间：2012-08-23T11:17:00.483
> 
> 标签：c++, qt, qml, hwnd

我需要使用一个请求窗口句柄 (HWND) 的 DLL -library 在表单上自行绘制。我不希望它占据整个主窗体，而是显示在例如子小部件的区域中。
现在使用 Windows 窗体没有问题了。但是我可以使用 Qt 甚至使用基于 Qt QML 的 ui 来做到这一点吗？

假设我有一个主窗口，并希望这个库在主窗口内的 QML 矩形上绘制自己。我可以以任何方式为图书馆提供有效的句柄吗？
这篇文章是相关的，但没有解决任何问题：[QML 中的 DevNet HWND](http://qt-project.org/forums/viewthread/4106)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:22:13.083

是的，这是可能的，我几天前在一个项目中做过。

您可以检索任何小部件的获胜 ID，这要归功于：[QWidget::winId](http://doc.qt.nokia.com/4.7-snapshot/qwidget.html#winId)。

我没有尝试使用 QML，但是由于 QML 是在 QGraphicsView（这是一个 QWidget ）中绘制的，所以也许可以。

# android - Android“如何在脚本出现异常时显示警报”

> ID：12090359
> 
> 赞同：0
> 
> 时间：2012-08-23T11:17:18.660
> 
> 标签：android, json, listview, exception

我是 Android 新手，我尝试从 JSON 数据创建列表视图。

一切都很好，除了当脚本出现异常时我无法向用户显示警报。

我的目标是，在请求服务器获取 JSON 之前，首先检查互联网连接。如果没有连接，则应用程序会提醒用户打开他们的互联网连接。

目前，当没有互联网连接时，我的应用程序显示强制关闭对话框并关闭应用程序。请帮助我......我对此感到沮丧:)

这是我的主要活动课程：

```
public class HargaActivity extends ListActivity {

//SET URL
private static String url = "http://www.jualanmotor.com/JmApi/DaftarMotor/?username=elis&password=puspasarikeisha";

// JSON Node names
private static final String TAG_data            = "data";
private static final String TAG_Parent          = "Parent";
private static final String TAG_Parent_name     = "parent_name";
private static final String TAG_Category        = "Category";
private static final String TAG_Category_name   = "category_name";
private static final String TAG_product_title   = "product_title";

// contacts JSONArray
JSONArray data = null;

// Hashmap for ListView
ArrayList<HashMap<String, String>> productList = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.harga_layout);
    new ProgressTask(HargaActivity.this).execute();
}

private class ProgressTask extends AsyncTask<String, Void, Boolean>
{
    private ProgressDialog dialog;
    private ListActivity activity;
    private Context context;

    public ProgressTask(ListActivity activity) {
         this.activity = activity;
         context = activity;
         dialog = new ProgressDialog(context);
    }

    @Override
    protected void onPreExecute() {
        this.dialog.setMessage("Trying get content");
        this.dialog.show();
    }

    protected void onPostExecute(final Boolean success)
    {
         /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(HargaActivity.this, productList,
                R.layout.list_item,
                new String[] {TAG_product_title}, new int[] {
                        R.id.product_title});
        setListAdapter(adapter);
        dialog.dismiss();
    }

    @Override
    protected Boolean doInBackground(final String... args){
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json;
        json = jParser.getJSONFromUrl(url);

        try {
             // Getting Array of Contacts
            data = json.getJSONArray(TAG_data);

            // looping through All Contacts
            for(int i = 0; i < data.length(); i++){
                JSONObject c = data.getJSONObject(i);

                // Parent is again JSON Object
                JSONObject parent       =   c.getJSONObject(TAG_Parent);
                String parent_name      =   parent.getString("name");

                // Category is again JSON Object
                JSONObject category     =   c.getJSONObject(TAG_Category);
                String category_name    =   category.getString("name");
                String product_title    =   parent_name + "-" + category_name;
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_Parent_name, product_title);
                map.put(TAG_Category_name, category_name);
                map.put(TAG_product_title, product_title);
                // adding HashList to ArrayList
                productList.add(map);
            }
            return true;
        } catch (Exception e) {
            /*
                         **I WANT TO SHOW ALERT MESSAGE HERE**
                    */
            return false;
        }
    }
}
 } 
```

这是我的 JSONParse.java

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:20:22.453

利用

```
runonUithread(new Runnable()
{
   Toast.makeText(ReadWebpageAsynTask.this, "Got Error " + e.getMessage().toString(),  Toast.LENGTH_LONG).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:00:13.963

我认为当没有互联网并且您尝试访问该网址时会引发异常。尝试将以下行移动到它旁边的 try-catch 块中

```
jParser.getJSONFromUrl(url); 
```

在 doInBackground() 中为您的 ProgressTask 调用此函数。将其移入 try-catch 将确保如果互联网不可用并且引发异常，您将捕获该异常并能够向用户显示消息。

要显示消息，您可以在 catch 块内使用 Toast 或 AlertDialog。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:37:28.777

您可以创建一个变量，如

```
boolean error = false; 
```

它必须对 AsyncTask 中的所有函数可见。在你的 catch 块中将它设置为 true；

然后你可以在你的 postExcecute() 函数中显示警报。

```
if (error == true){
    // show your allert here
}else{
    // Do things here when everything is ok
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T11:38:39.457

问题是您正试图从非 UI 线程（AsyncTask 的 doInBackGround）推送 AlertDialog（UI 元素）。

你可以使用

```
runOnUiThread(new Runnable() {

public void run() {
    // show your dialog here :) you can build it both here or somewhere else

    }
    });
   }
}).start(); 
```

# html - html电子邮件的Alpha列表？

> ID：12090364
> 
> 赞同：0
> 
> 时间：2012-08-23T11:17:32.980
> 
> 标签：html, list, email, alphabet

我正在做一个 html 电子邮件，我需要做一个数字列表，它也有一个缩进的字母列表。例如 1\. 示例 a。子示例 2\. 示例

ETC

我正在寻找可以在各种电子邮件客户端上工作的东西，并且将具有我所追求的正确缩进，您可以从 html 列表中获得。我知道你可以通过制作各种桌子来做到这一点，但我想要一种更整洁的方式。

这是我正在寻找的代码类型的示例，以防您需要更多信息来提供帮助：

```
 <ol>
      <li>Example</li>
      <ol>
           // Alphabet list item valid in html emails
      </ol>
      <li>Example</li>
 </ol> 
```

我可以使用：

```
 <li type="a">sub example</li> 
```

或者对于某些电子邮件客户端来说这是无效的代码吗？

提前致谢

# javascript - 对象必须返回函数

> ID：12090365
> 
> 赞同：3
> 
> 时间：2012-08-23T11:17:35.117
> 
> 标签：javascript

我这里有一些 JS 代码：

```
function Car(manufacturer, model, year) {
    this.manufacturer = manufacturer;
    this.model = model;
    this.year = year == undefined ? new Date().getFullYear() : year;
    this.getInfo = function(){
        return this.manufacturer +' '+ this.model +' '+ this.year;
    };
}

var bmw = new Car("BMW", "X5", 2010); 
```

所以我想在控制台中有一些有趣的输出：

```
console.log('Car: ' + bmw); // Car: BMW X5 2010 
```

如何在不调用任何方法的情况下做到这一点？

**谢谢！**

```
I need the 'getInfo' method, so I have simply changed my code:
function Car(manufacturer, model, year) {
    this.manufacturer = manufacturer;
    this.model = model;
    this.year = year == undefined ? new Date().getFullYear() : year;
    this.toString = this.getInfo = function(){
        return this.manufacturer +' '+ this.model +' '+ this.year;
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:23:18.460

`console.log`只是将它作为参数给出的内容输出到控制台。在您的情况下，您给它一个字符串（通过将字符串与对象连接）。

如果您简单地说`console.log(bmw)`，您会看到一个有趣的结果 - 根据您使用的网络检查器，您将能够单击所有`bmw`属性...非常好。

`console.log(bmw)`Chrome 开发者工具中的表示：

![在此处输入图像描述](../Images/a9c2d1b89bda08a5aabcf955c848e13d.png)

`toString()`要回答您的确切问题，您可以通过覆盖其函数来更改对象的字符串表示形式。

```
function Car(manufacturer, model, year) {
    this.manufacturer = manufacturer;
    this.model = model;
    this.year = year == undefined ? new Date().getFullYear() : year;
    this.getInfo = function(){
        return this.manufacturer +' '+ this.model +' '+ this.year;
    };

    // Build the string up as you wish it to be represented.
    this.toString = function() {
        var str = this.manufacturer + " " + this.model + " " + this.year;
        return str;
    };
}

var bmw = new Car("BMW", "X5", 2010);
console.log('Car: ' + bmw); // Car: BMW X5 2010 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:20:09.383

您可以覆盖该`toString`方法：

```
Car.prototype.toString = function() {
    return this.model + ' ' + this.year;
}; 
```

当需要对象的字符串表示时（例如，当您使用`"somestring" + yourObject`.

参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:20:33.150

您可以覆盖对象的[toString()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)方法：

```
function Car(manufacturer, model, year) {
    this.manufacturer = manufacturer;
    this.model = model;
    this.year = year == undefined ? new Date().getFullYear() : year;
    this.toString = function() {
        return this.manufacturer + ' ' + this.model + ' ' + this.year;
    };
} 
```

您可以在[这个 fiddle](http://jsfiddle.net/4Etgx/)中测试结果。

# java - 通过 JMX 监控我的 jsp-servlet 应用程序

> ID：12090366
> 
> 赞同：1
> 
> 时间：2012-08-23T11:17:43.950
> 
> 标签：java, jmx

我是 JMX 新手，我想管理（或监视）我的 jsp-servlet 应用程序，在 Tomcat 中运行大量 servlet 和 JSP 文件。

我制作了一个由 Oracle 教程提供的简单演示应用程序，但它仅适用于一个接口及其实现，所以我如何通过 JMX 监控我的整个 jsp-servlet 应用程序？

我想监控三件事

1.  记忆
2.  虚拟机
3.  线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:13:16.600

嗨，您可以`Jconsole`用来监控远程和本地应用程序。为此，您必须`Jmx`在您的 tomcat 上启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:31:41.350

您可以使用 JMX 编写自己的监控工具，或者为您的应用程序尝试[jeeObserver](http://www.jeeobserver.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:58:31.367

您也可以尝试使用**jvisualvm**。
VisualVM 在 Java 虚拟机 (JVM) 上运行时提供有关 Java 应用程序的详细信息。
您需要监控的 3 件事可以在这里完成。
查看更多信息：http: [//visualvm.java.net/gettingstarted.html#sthash.NVjHO3bo.dpuf](http://visualvm.java.net/gettingstarted.html#sthash.NVjHO3bo.dpuf)

# python - Python Mongo：在对 mongo 的查询中使用 '$or'

> ID：12090370
> 
> 赞同：-1
> 
> 时间：2012-08-23T11:17:49.710
> 
> 标签：python, mongodb

我很困惑为什么以下两个查询返回不同的结果。

```
modelObj = connection.MyModel.find({'t': t,
               '$or': [{'cpd': None}, {'cpd': {'$gte': yesterday}}]}) 
```

和

```
modelObj = connection.MyModel.find({'t': t,
               'cpd': {'$in': [None, {'$gte': yesterday}]}}) 
```

他们两个的解释计划或多或少是相同的。

第二个查询似乎忽略了“'$gte'：昨天”条件。

谁能解释我为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:23:14.033

`$in`只能用于将字段与离散值数组进行匹配，不能用于其他运算符。

# sql - 如何找到出生月份

> ID：12090371
> 
> 赞同：0
> 
> 时间：2012-08-23T11:17:54.507
> 
> 标签：sql, sql-server, sql-server-2000

给定以下数据样本：

```
ID Dob

001 01/10/1997
002 09/02/1983
003 19/10/1978
.... 
```

我尝试了这样的查询：

```
select id, dob
  from table1
  where dob between '10/01/2012' and '10/31/2012' 
```

但我没有检索任何记录。我想显示与月份匹配的 id 和 dob。

预期输出：

```
ID dob

001 01/10/1997
003 19/10/1978
.... 
```

我希望输出与月份匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:20:58.863

您可以使用 month() 函数，该函数检索给定日期的月份数

在此处查看[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms187813.aspx)

```
Select id, dob
from   table1
where  month(dob) =10 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/9bd9f/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:20:52.993

您可以使用[月份](http://msdn.microsoft.com/en-us/library/ms187813.aspx)。

```
where month(Dob) = 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T11:21:54.417

您可以使用[`DATEPART()`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)

```
Select id, dob
from yourTable 
where datepart(month, dob) = 10 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c7420/1)

# xml - XSLT：排序路径跟踪

> ID：12090372
> 
> 赞同：2
> 
> 时间：2012-08-23T11:18:00.030
> 
> 标签：xml, xslt

我有以下输入：

```
<articles>
  <item name="B">
    <item name="Bb">
      <item name="Bbb"/>
      <item name="Abb"/>
    </item>
    <item name="Ab">
      <item name="Bab"/>
      <item name="Aab"/>
    </item>
  </item>
  <item name="A">
    <item name="Ba">
      <item name="Bba"/>
      <item name="Aba"/>
    </item>
    <item name="Aa">
      <item name="Baa"/>
      <item name="Aaa"/>
    </item>
  </item>
  <item name="D"/>
  <item name="C">
    <item name="Ac"/>
  </item>
</articles> 
```

并且需要以下输出：

```
A-Aa-Aaa
A-Aa-Baa
A-Ba-Aba
A-Ba-BBa
B-Ab-Aab
B-Ab-Bab
B-Bb-Abb
B-Bb-Bbb
C-Ac
D 
```

也就是说，每条路径都应明确并在每个级别上进行排序。我有以下 XSLT，它产生路径，但除了第一级之外，我无法弄清楚排序。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="articles">
    <xsl:apply-templates select="//item[not(item)]">
      <xsl:sort select="ancestor-or-self::item[parent::articles]/@name"/>
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="item">
    <xsl:for-each select="ancestor-or-self::item">
      <xsl:value-of select="@name"/>
      <xsl:choose>
        <xsl:when test="not(item)">
          <xsl:text>&#xA;</xsl:text>
        </xsl:when>
        <xsl:otherwise>-</xsl:otherwise>
      </xsl:choose>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

恐怕我目前的做法是死路一条。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:02:37.250

**请注意，XSLT 2.0 解决方案（第二部分）更短更简单**。

* * *

**I. 这是一个简单的 2-pass 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
  <xsl:variable name="vrtfPass1">
    <xsl:apply-templates/>
  </xsl:variable>

  <xsl:for-each select="ext:node-set($vrtfPass1)/*">
   <xsl:sort/>
   <xsl:value-of select="concat(., '&#xA;')"/>
  </xsl:for-each>
 </xsl:template>

 <xsl:template match="item[not(item)]">
     <x>
      <xsl:for-each select="ancestor-or-self::item">
       <xsl:if test="not(position() = 1)">-</xsl:if>
       <xsl:value-of select="@name"/>
      </xsl:for-each>
     </x>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<articles>
  <item name="B">
    <item name="Bb">
      <item name="Bbb"/>
      <item name="Abb"/>
    </item>
    <item name="Ab">
      <item name="Bab"/>
      <item name="Aab"/>
    </item>
  </item>
  <item name="A">
    <item name="Ba">
      <item name="Bba"/>
      <item name="Aba"/>
    </item>
    <item name="Aa">
      <item name="Baa"/>
      <item name="Aaa"/>
    </item>
  </item>
  <item name="D"/>
  <item name="C">
    <item name="Ac"/>
  </item>
</articles> 
```

**产生了想要的正确结果：**

```
A-Aa-Aaa
A-Aa-Baa
A-Ba-Aba
A-Ba-Bba
B-Ab-Aab
B-Ab-Bab
B-Bb-Abb
B-Bb-Bbb
C-Ac
D 
```

**请注意**：这是一个通用的解决方案，适用于*任何*`item`元素的嵌套。

**说明**：

1.  我们执行两次转换。

2.  第一遍的结果是：

    ```
    <x xmlns:ext="http://exslt.org/common">B-Bb-Bbb</x>
    <x xmlns:ext="http://exslt.org/common">B-Bb-Abb</x>
    <x xmlns:ext="http://exslt.org/common">B-Ab-Bab</x>
    <x xmlns:ext="http://exslt.org/common">B-Ab-Aab</x>
    <x xmlns:ext="http://exslt.org/common">A-Ba-Bba</x>
    <x xmlns:ext="http://exslt.org/common">A-Ba-Aba</x>
    <x xmlns:ext="http://exslt.org/common">A-Aa-Baa</x>
    <x xmlns:ext="http://exslt.org/common">A-Aa-Aaa</x>
    <x xmlns:ext="http://exslt.org/common">D</x>
    <x xmlns:ext="http://exslt.org/common">C-Ac</x> 
    ```

3.  第一遍的处理使用仅匹配*叶* `item`元素的单个模板。对于每个叶`item`元素，其完整的、以破折号分隔的路径作为名为 的元素的内容输出`x`。

4.  第二遍只是对第一遍的结果进行排序。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:for-each-group select="//item[not(item)]"
     group-by="string-join(ancestor-or-self::item/@name, '-')">
      <xsl:sort select="current-grouping-key()"/>
      <xsl:sequence select="current-grouping-key(), '&#xA;'"/>
     </xsl:for-each-group>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:52:53.337

不漂亮，但以下内容针对 3 个项目的深度进行，并且每个附加级别都需要额外的排序。我相信大师将能够更一般地做到这一点:)

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="articles">
        <xsl:apply-templates select="//item[not(item)]">
            <xsl:sort select="ancestor-or-self::item[parent::articles]/@name"/>
            <xsl:sort select="ancestor-or-self::item[parent::item[parent::articles]]/@name"/>
            <xsl:sort select="ancestor-or-self::item[parent::item[parent::item[parent::articles]]]/@name"/>
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="item">
        <xsl:for-each select="ancestor-or-self::item">
            <xsl:value-of select="@name"/>
            <xsl:choose>
                <xsl:when test="not(item)">
                    <xsl:text>&#xA;</xsl:text>
                </xsl:when>
                <xsl:otherwise>-</xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

# java - 被动侦听聊天应用程序的套接字

> ID：12090378
> 
> 赞同：3
> 
> 时间：2012-08-23T11:18:12.547
> 
> 标签：java, swing, sockets, concurrency, event-dispatching

我目前正在开发一个总体上非常基本的聊天应用程序，但是在从客户端和服务器端接收字符串时遇到问题。我正在使用一个线程被动地在套接字上侦听传入消息，这是我怀疑问题所在。我这样做对吗？

来源：发送字符串的代码：

```
send.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            messageBuffer = message.getText();
            out.println(messageBuffer);
            chat.append(username + ": " + messageBuffer + "\n");
            message.setText("");
        }
    }); 
```

然后我有这个被动地听（问题可能在这里）：

```
public void run(){
    while(true){
        try {
               messageBufferIn = in.readLine();
               System.out.println(in.readLine());
               chat.append(recipient + ": " + messageBufferIn + "\n");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

我也使用这个调用线程：

```
public static void startChatting(){
    try {
        Thread.sleep(10);
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

感谢您提供的任何帮助，我对整个线程仍然很陌生，所以我的错误可能相当平庸。

编辑：问题是当我尝试向接收者发送消息时，没有任何消息，我可以确认它们已连接。实际上 System.out.println(in.readLine()); 根本没有通过，甚至没有“空”输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:51:24.763

1.  您[在 Swing 中遇到 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)问题，Swing GUI 不知道您正在运行/打开`Socket`on `Background Task`，

2.  `Swing GUI`必须在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上完成所有更新，否则什么也没有发生，或者你有一些例外

3.  必须将所有更新从`Background Task`（在您的情况下`Runnable#Thread`）包装到`invokeLater` for Swing GUI

4.  `while(true){`是无限循环放在那里`Boolean variable`而不是`true`，那么你可以停止，启动或重新启动你的情况`Socket`

5.  在`send.addActionListener(new ActionListener(){`只运行一次的情况下（如果用户通过`JButtons`点击调用）然后使用[SwingWoker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)打开 Socket，`SwingWorker`很好的保证所有输出都应该在 EDT 上完成

6.  `Runnable#Thread`和之间的区别`SwingWorker`是`SwingWorker`指定只运行一次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T02:52:02.533

我怀疑你的主要问题是你没有冲洗`OutputStream`. `out.flush()`在您完成写入并希望发送消息后，您需要添加。例如，您`ActionListener`将如下所示：

```
send.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        messageBuffer = message.getText();
        out.println(messageBuffer);
        out.flush();
        chat.append(username + ": " + messageBuffer + "\n");
        message.setText("");
    }
}); 
```

如果您不这样做，您`OutputStream`将坐在那里直到缓冲区已满（这将是很多消息）。

# visual-c++ - 为什么我的程序卡在 if 循环中？

> ID：12090382
> 
> 赞同：0
> 
> 时间：2012-08-23T11:18:19.780
> 
> 标签：visual-c++

我是 C++ 新手，这就像我制作的第一个程序，我使用了 Visual C++ 2010 Express。这是一个重量转换的东西。有一个 if 循环，一个 else if 循环和一个 else。这是代码：

```
#include <iostream>

using namespace std;

int main() { 
float ay,bee;
char char1;
cout << "Welcome to the Ounce To Gram Converter" << endl << "Would you like to convert [O]unces To Grams or [G]rams To Ounces?" << endl;
start:
cin >> char1;

if (char1 = "G" ||"g"){
cout << "How many grams would you like to convert?" << endl;
cin >> bee;
cout << bee << " grams is equal to: " << bee*0.035274 << " ounces." << endl; goto start;
}

else if (char1 = "o"||"O"){ 
cout << "How many ounces would you like to convert" << endl;
cin >> ay;
cout << ay << " ounces is equal to: " << ay/0.035274 << " grams." << endl; goto start;
}   

else{
    cout << "Error 365457 The character you entered is to retarded to comprehend" << endl;
goto start;
}

cin.ignore();
cin.get();
return 0;
    } 
```

如果我输入“g”，它会执行以下操作：

```
 if (char1 = "G" ||"g"){
cout << "How many grams would you like to convert?" << endl;
cin >> bee;
cout << bee << " grams is equal to: " << bee*0.035274 << " ounces." << endl; goto start;
} 
```

应该的

但是，如果我输入“o”，它会执行以下操作：

```
 if (char1 = "G" ||"g"){
cout << "How many grams would you like to convert?" << endl;
cin >> bee;
cout << bee << " grams is equal to: " << bee*0.035274 << " ounces." << endl; goto start;
} 
```

而不是这个：

```
 else if (char1 = "o"||"O"){ 
cout << "How many ounces would you like to convert" << endl;
cin >> ay;
cout << ay << " ounces is equal to: " << ay/0.035274 << " grams." << endl; goto start;
} 
```

即使我放了一些随机的东西，比如“h”，这也会发生：

```
 if (char1 = "G" ||"g"){
cout << "How many grams would you like to convert?" << endl;
cin >> bee;
cout << bee << " grams is equal to: " << bee*0.035274 << " ounces." << endl; goto start;
} 
```

而不是这个：

```
 else{
    cout << "Error 365457 The character you entered is to retarded to comprehend" << endl;
goto start;
} 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:21:33.740

`char1 = "o"||"O"`将始终评估为真，因为`"O"`它不为空。

你想`char1 == 'o' || char == 'O'`在你的 if 语句中使用和类似的。

请注意，这`=`是分配并且`==`是相等性检查。`==`在测试相等性和`=`分配时使用。C 和 C++ 允许您`=`在检查中使用返回赋值的值。该值不是 0，它的计算结果为 true，因此您的 if 语句将执行。

# android - 如何在 Android 上以编程方式从 Mac 地址获取 IP 地址？

> ID：12090387
> 
> 赞同：5
> 
> 时间：2012-08-23T11:18:29.567
> 
> 标签：android, ip-address, android-wifi, mac-address

以编程方式，我从同一网络上的设备获取了其他支持 Wifi 的设备的 Mac 地址。我也需要在这里申请。是否有任何应用程序或任何其他可能性通过在 Android 上使用这些 Mac 地址来获取网络上每个启用 wifi 的设备的 IP 地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T14:36:52.060

如果您正在寻找一个安卓应用程序，您可以尝试[网络发现](https://play.google.com/store/apps/details?id=info.lamatricexiste.network&hl=en)，它工作得很好，可以列出您本地网络上的所有设备以及相应的 IP 和地址。

如果您正在寻找代码，那么该应用程序可以[在 github 上](https://github.com/rorist/android-network-discovery#readme)找到，并且（除其他外）与 Yahel 解释的基本相同：它读取 /proc/net/arp 。

注意：我不是此应用程序的作者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T11:30:07.333

这个人做的正好相反，所以它应该对你有用。

诀窍是从设备中读取 ARP 缓存表。

[http://www.flattermann.net/2011/02/android-howto-find-the-hardware-mac-address-of-a-remote-host/](http://www.flattermann.net/2011/02/android-howto-find-the-hardware-mac-address-of-a-remote-host/)

# django - Django：在基于类的视图中使用清晰样式的表单集

> ID：12090388
> 
> 赞同：0
> 
> 时间：2012-08-23T11:18:31.330
> 
> 标签：django, django-class-based-views, django-forms, django-crispy-forms

嗨 Stackoverflow 人，

我想用脆皮应用程序设置表单集的样式，但这会引起一些悲伤。

一个非常简单的模型应该展示四次。

```
class ItemPicture(models.Model):
    item = models.ForeignKey('Item')
    picture = ThumbnailerImageField(_('Image'),
            upload_to='pictures/', null=True, blank=True,) 
```

表单类也很简单：

```
class ItemPictureForm(forms.ModelForm):
    class Meta:
        model = ItemPicture
        fields = ('picture',)

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_tag = False
        self.helper.layout = Layout(
                Fieldset(_('Add pictures'),'picture', ),
                ButtonHolder(
                    Submit('save', _('Add'), css_class='btn btn-primary '),
                    Reset('reset', _('Cancel'), css_class='btn')))
        super(ItemPictureForm, self).__init__(*args, **kwargs) 
```

在我的 views.py 中，我生成了表单集：

```
class ItemUploadPictures(FormView):
    ItemPictureFormSet = formset_factory(ItemPictureForm, extra=4)
    form_class = ItemPictureFormSet
    template_name = 'item_upload_pictures.html' 
    success_url = reverse_lazy('dashboard') 
```

我的麻烦是模板中的crispy期望`{% crispy formset formset.form.helper %}`，但似乎传递的变量是`form`. `{% crispy form %}`有效，但不会显示辅助属性。**如何将整个表单集信息传递给模板？**

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:29:01.983

你有没有尝试过

```
{% crispy formset form.form.helper %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-27T03:11:43.993

# 表格.py

```
class ItemPictureForm(forms.ModelForm):
    class Meta:
        model = ItemPicture
        fields = ('picture',)

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_tag = False
        self.helper.layout = Layout(
                Fieldset(_('Add pictures'),'picture', ),
        # These need to be removed because they cant be prevented from duplicating
        #       ButtonHolder(
        #           Submit('save', _('Add'), css_class='btn btn-primary '),
        #           Reset('reset', _('Cancel'), css_class='btn')
        ))
        super(ItemPictureForm, self).__init__(*args, **kwargs) 
```

# manage_pictures.html

```
{% load crispy_forms_tags i18n %}
<form action="" method="post">
    {% csrf_token %}
    {% crispy formset formset.form.helper %}
    <div class="form-actions">
        <input type="submit" name="save" value="{% trans "Add" %}" class="btn btn-primary" id="submit-id-save"> 
        <input type="button" name="reset" value="{% trans "Cancel" %}" class="btn" id="button-id-cancel">
    </div>
</form>
{% crispy formset formset.form.helper %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:27:51.880

也许这个库可以满足您的需求：[https ://github.com/runekaagaard/django-crispy-forms-fancy-formsets](https://github.com/runekaagaard/django-crispy-forms-fancy-formsets)

# intellij-idea - 如何在监视窗口中按名称对 IntelliJ 对象属性进行排序？

> ID：12090389
> 
> 赞同：6
> 
> 时间：2012-08-23T11:18:31.060
> 
> 标签：intellij-idea

我正在调试一个 javascript 应用程序。请观察观察窗口的快照：

![在此处输入图像描述](../Images/d4f0c1185dfc6e114f4e7fbec960e9e3.png)

请注意，这些属性以看起来一团糟的方式显示。这可能是它们的自然顺序，但是当它们很多时，它变得非常烦人。可以订购吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:58:04.137

只需按“按字母顺序排列值”按钮：

![在此处输入图像描述](../Images/3e48b015c9d8e2af1ec5bbd823197fc8.png)

# android - 我无法让 LongClick 在 ListActivity 上工作

> ID：12090394
> 
> 赞同：0
> 
> 时间：2012-08-23T11:18:50.787
> 
> 标签：android, listactivity, long-click

我已经问过这个，但没有得到有效的解决方案，我已经修改了代码。

谁能帮助我并告诉我为什么我的长按功能不起作用？：

```
public class InspectionActivity extends ListActivity {
private Button newInspection;
private static final int ACTIVITY_CREATE=0;

private RMDbAdapter rmDbHelper;
//private AlertDialog longClickOptionsDialog;
private AlertDialog clickOptionsDialog;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_inspection);
    setUpViews();
    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();

    // Get a Cursor for the list items
    Cursor listCursor = rmDbHelper.fetchAllInspections();
    startManagingCursor(listCursor);           

    // set the custom list adapter     
    setListAdapter(new MyListAdapter(this, listCursor));

}

private void setUpViews() {
    newInspection = (Button)findViewById(R.id.new_inspection);
    newInspection.setOnClickListener(new View.OnClickListener() {                       
        public void onClick(View v) {
            createInspection();
        }
    }); 

}

// In your ListActivity class, create a new inner class that extends ResourceCursorAdapter. 
//This inner class is the custom CursorAdapter we will use to manage how data is bound to a list item:

private class MyListAdapter extends ResourceCursorAdapter { 

    public MyListAdapter(Context context, Cursor cursor) { 
        super(context, R.layout.inspection_row, cursor);

    } 

    @Override
    public void bindView(View view, Context context, Cursor cursor) { 
        TextView title = (TextView) view.findViewById(R.id.inspection_row_item_main_title);
        title.setText(cursor.getString(                            
                cursor.getColumnIndex(RMDbAdapter.INSPECTION_REF)));

        TextView description = (TextView) view.findViewById(R.id.inspection_row_item_description);        

        String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex(
                        RMDbAdapter.INSPECTION_COMPANY)), "Company unknown");
        String inspectionDate = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex(
                        RMDbAdapter.INSPECTION_DATE)), "date unknown");
        description.setText("(" + companyName + ", " + inspectionDate + ")");   
    } 
}

private void createInspection() {
    Intent i = new Intent(this, InspectionEdit.class);
    startActivityForResult(i, ACTIVITY_CREATE);
}
protected void onListItemClick(ListView l, View v, final int pos, final long id){

    Cursor cursor = (Cursor) rmDbHelper.fetchInspection(id);

    String inspectionRef = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_REF)), "Reference unknown"); 
    String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_COMPANY)), "company unknown"); 
    final String inspectionDialogueText = "(" + inspectionRef + ", " + companyName + ")"; 

    super.onListItemClick(l, v, pos, id);
    clickOptionsDialog = new AlertDialog.Builder(InspectionActivity.this)
    .setTitle(inspectionDialogueText)
    .setMessage(R.string.general_text_select_option)
    .setPositiveButton(R.string.general_button_open, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which) {
            Intent i = new Intent(InspectionActivity.this, AreaActivity.class);
            i.putExtra("intentID", id);
            startActivityForResult(i, ACTIVITY_CREATE);
            }
        })
    .setNeutralButton(R.string.general_button_edit, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which){
            Intent i = new Intent(InspectionActivity.this, InspectionEdit.class);
            i.putExtra("intentID", id);
            startActivityForResult(i, ACTIVITY_CREATE);
            }
        })

    .setNegativeButton(android.R.string.cancel, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which){
            clickOptionsDialog.cancel();
            }
        })
    .create();
    clickOptionsDialog.show();

}

protected void onListItemLongClick(ListView l, View v, final int pos, final long id){

    Cursor cursor = (Cursor) rmDbHelper.fetchInspection(id);

    String inspectionRef = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_REF)), "Reference unknown"); 
    String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_COMPANY)), "company unknown"); 
    final String inspectionDialogueText = "(" + inspectionRef + ", " + companyName + ")"; 

    clickOptionsDialog = new AlertDialog.Builder(InspectionActivity.this)
    .setTitle(inspectionDialogueText)
    .setMessage(R.string.general_text_select_option)
    .setPositiveButton(R.string.general_button_open, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which) {
            Intent i = new Intent(InspectionActivity.this, AreaActivity.class);
            i.putExtra("intentID", id);
            startActivityForResult(i, ACTIVITY_CREATE);
            }
        })
    .setNeutralButton(R.string.general_button_edit, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which){
            Intent i = new Intent(InspectionActivity.this, InspectionEdit.class);
            i.putExtra("intentID", id);
            startActivityForResult(i, ACTIVITY_CREATE);
            }
        })

    .setNegativeButton(android.R.string.cancel, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which){
            clickOptionsDialog.cancel();
            }
        })
    .create();
    clickOptionsDialog.show();
} 
```

您的帮助将不胜感激。

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T11:27:43.537

您不能覆盖，`onListItemLongClick`因为它不是 ListActivity 的成员

[http://developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

您必须按如下方式设置 OnItemLongClickListener：

```
ListView lv = getListView();
lv.setOnItemLongClickListener(new OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1,int row, long arg3) {
        // your code
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:25:18.327

将您的代码更改为此

```
newInspection.setOnLongClickListener(new OnLongClickListener() {
  @Override
     public boolean onLongClick(View v) {             
        return true;         
     }
 }); 
```

# facebook - Facebook 页面标签的最小高度

> ID：12090398
> 
> 赞同：1
> 
> 时间：2012-08-23T11:19:03.197
> 
> 标签：facebook

我正在使用高度为 530px 的 iframe 做一个 facebook 页面选项卡。我尝试了很多方法来降低画布的高度，但是仍然不能低于 800px。

不能让它小于 800px 高度吗？任何人都有这样的经验来制作一个小于 800px 的应用程序？非常感谢 ！！

# c# - 如何使用 C# 正确准备“HTTP 重定向绑定”SAML 请求

> ID：12090403
> 
> 赞同：21
> 
> 时间：2012-08-23T11:19:34.430
> 
> 标签：c#, saml-2.0, sharpziplib

我需要使用 HTTP 重定向绑定方法创建一个 SP 发起的 SAML 2.0 身份验证事务。事实证明这很容易。只需获取 IdP URI 并连接一个查询字符串 param `SAMLRequest`。参数是描述 SAML 请求的 xml 编码块。到现在为止还挺好。

将 SAML 转换为查询字符串参数时会出现问题。我认为这个准备过程应该是：

1.  构建 SAML 字符串
2.  压缩这个字符串
3.  Base64 对字符串进行编码
4.  UrlEncode 字符串。

**SAML 请求**

```
<samlp:AuthnRequest
    xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
    xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
    ID="{0}"
    Version="2.0"
    AssertionConsumerServiceIndex="0"
    AttributeConsumingServiceIndex="0">
    <saml:Issuer>URN:xx-xx-xx</saml:Issuer>
    <samlp:NameIDPolicy
        AllowCreate="true"
        Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient"/>
</samlp:AuthnRequest> 
```

**编码**

```
private string GetSAMLHttpRedirectUri(string idpUri)
{
    var saml = string.Format(SAMLRequest, Guid.NewGuid());
    var bytes = Encoding.UTF8.GetBytes(saml);
    using (var output = new MemoryStream())
    {
        using (var zip = new DeflaterOutputStream(output))
        {
            zip.Write(bytes, 0, bytes.Length);
        }
        var base64 = Convert.ToBase64String(output.ToArray());
        var urlEncode = HttpUtility.UrlEncode(base64);
        return string.Concat(idpUri, "?SAMLRequest=", urlEncode);
    }
} 
```

我怀疑压缩在某种程度上是罪魁祸首。我正在使用`DeflaterOutputStream`来自[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)的类，它应该实现行业标准的放气算法，所以这里可能有一些设置我错了？

可以使用这个[SAML2.0 调试器](https://rnd.feide.no/simplesaml/module.php/saml2debug/debug.php)（它是一个有用的在线转换工具）来测试编码的输出。当我使用这个工具解码我的输出时，它就变成了无稽之谈。

因此，问题是：您知道如何将 SAML 字符串转换为正确压缩和编码的 SAMLRequest 查询参数吗？

谢谢

**编辑 1**

下面接受的答案给出了问题的答案。这是所有后续评论和答案更正的最终代码。

**编码 SAMLRequest - 工作代码**

```
private string GenerateSAMLRequestParam()
{
    var saml = string.Format(SAMLRequest, Guid.NewGuid());
    var bytes = Encoding.UTF8.GetBytes(saml);
    using (var output = new MemoryStream())
    {
        using (var zip = new DeflateStream(output, CompressionMode.Compress))
        {
            zip.Write(bytes, 0, bytes.Length);
        }
        var base64 = Convert.ToBase64String(output.ToArray());
        return HttpUtility.UrlEncode(base64);
    }
} 
```

该`SAMLRequest`变量包含此问题顶部显示的 SAML。

**解码 SAMLResponse - 工作代码**

```
private string DecodeSAMLResponse(string response)
{
    var utf8 = Encoding.UTF8;
    var bytes = utf8.GetBytes(response);
    using (var output = new MemoryStream())
    {
        using (new DeflateStream(output, CompressionMode.Decompress))
        {
            output.Write(bytes, 0, bytes.Length);
        }
        var base64 = utf8.GetString(output.ToArray());
        return utf8.GetString(Convert.FromBase64String(base64));
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T11:42:02.757

我刚刚使用您的示例 SAML 运行了以下代码：

```
 var saml = string.Format(sample, Guid.NewGuid());
        var bytes = Encoding.UTF8.GetBytes(saml);

        string middle;
        using (var output = new MemoryStream())
        {
            using (var zip = new DeflaterOutputStream(output))
                zip.Write(bytes, 0, bytes.Length);

            middle = Convert.ToBase64String(output.ToArray());
        }

        string decoded;
        using (var input = new MemoryStream(Convert.FromBase64String(middle)))
        using (var unzip = new InflaterInputStream(input))
        using (var reader = new StreamReader(unzip, Encoding.UTF8))
            decoded = reader.ReadToEnd();

        bool test = decoded == saml; 
```

测试变量是`true`。这意味着 zip/base64/unbase64/unzip 往返执行正确。该错误必须稍后发生。也许 URLEncoder 会破坏它们？你能尝试类似的 urlencode/decode 测试吗？另外，检查结果多长时间。生成的 URL 可能由于其长度而被截断。

（编辑：我添加了一个 StreamReader 而不是读取数组。之前我的示例使用 bytes.Length 来准备缓冲区，这可能会损坏测试。现在读取仅使用来自压缩流的信息）

编辑：

```
 var saml = string.Format(sample, Guid.NewGuid());
        var bytes = Encoding.UTF8.GetBytes(saml);

        string middle;
        using (var output = new MemoryStream())
        {
            using (var zip = new DeflateStream(output, CompressionMode.Compress))
                zip.Write(bytes, 0, bytes.Length);

            middle = Convert.ToBase64String(output.ToArray());
        }

        // MIDDLE is the thing that should be now UrlEncode'd

        string decoded;
        using (var input = new MemoryStream(Convert.FromBase64String(middle)))
        using (var unzip = new DeflateStream(input, CompressionMode.Decompress))
        using (var reader = new StreamReader(unzip, Encoding.UTF8))
            decoded = reader.ReadToEnd();

        bool test = decoded == saml; 
```

此代码生成一个`middle`变量，一旦被 UrlEncoded，正确地通过调试器。`DeflateStream`来自标准 .Net 的`System.IO.Compression`命名空间。我一点也不知道为什么“调试器”站点不接受 SharpZip 的 Deflate。不可否认，压缩是有效的，因为它设法正确解压缩数据。它只是算法上有一些差异，但我不知道这个放气和放气之间有什么区别，d'oh。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-09T18:34:26.887

顶部的问题包含“解码 SAMLResponse - 工作代码”部分，但该代码似乎已损坏。在尝试了几件事之后，我发现它正在尝试同时读取和写入同一个流。我通过分离读写流对其进行了重新设计，这是我的解决方案（为了方便和清晰，我提供了请求部分）：

**编码 SAML 身份验证请求：**

```
public static string EncodeSamlAuthnRequest(this string authnRequest) {
    var bytes = Encoding.UTF8.GetBytes(authnRequest);
    using (var output = new MemoryStream()) {
      using (var zip = new DeflateStream(output, CompressionMode.Compress)) {
        zip.Write(bytes, 0, bytes.Length);
      }
      var base64 = Convert.ToBase64String(output.ToArray());
      return HttpUtility.UrlEncode(base64);
    }
  } 
```

**解码 SAML 身份验证响应：**

```
public static string DecodeSamlAuthnRequest(this string encodedAuthnRequest) {
  var utf8 = Encoding.UTF8;
  var bytes = Convert.FromBase64String(HttpUtility.UrlDecode(encodedAuthnRequest));
  using (var output = new MemoryStream()) {
    using (var input = new MemoryStream(bytes)) {
      using (var unzip = new DeflateStream(input, CompressionMode.Decompress)) {
        unzip.CopyTo(output, bytes.Length);
        unzip.Close();
      }
      return utf8.GetString(output.ToArray());
    }
  }
} 
```

# java - 动态创建 spring bean 并更改现有 bean 的属性

> ID：12090406
> 
> 赞同：8
> 
> 时间：2012-08-23T11:19:39.500
> 
> 标签：java, spring

[我按照http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)文章成功地实现了数据库连接的动态变化。

但现在的问题是，我在由旧应用程序管理的配置文件中有一个数据库 url 列表。

有没有办法在 Spring 上下文中从值列表（即 Year2011DataSource、Year2012DataSource...）中创建 bean，并用刚刚创建的那些 bean 填充数据源 bean 的映射？

```
<!-- Property file located in the legacy application's folder -->
<context:property-placeholder location="file:///D:/config.properties" />

<!-- Shared data source properties are read from the config.properties file -->
<bean id="parentDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" abstract="true">
    <property name="driverClassName" value="${db.driver}" />
    <property name="username" value="${db.user}" />
    <property name="password" value="${db.password}" />
</bean>

<!-- Database urls by year -->
<bean id="Year2012DataSource" parent="parentDataSource">
    <property name="url" value="jdbc:sqlserver://localhost;databaseName=DbName_v570_2012" />
</bean>
<bean id="Year2011DataSource" parent="parentDataSource">
    <property name="url" value="jdbc:sqlserver://localhost;databaseName=DbName_v570_2011" />
</bean>
<bean id="Year2010DataSource" parent="parentDataSource">
    <property name="url" value="jdbc:sqlserver://localhost;databaseName=DbName_v570_2010" />
</bean>
<!-- ... and so on, these should instead be populated dynamically ... -->

<!-- DbConnectionRoutingDataSource extends AbstractRoutingDataSource -->
<bean id="dataSource" class="someProject.DbConnectionRoutingDataSource">
    <property name="targetDataSources">
        <map key-type="int">
            <entry key="2011" value-ref="Year2011DataSource" />
            <entry key="2010" value-ref="Year2010DataSource" />
            <!-- ... and so on, these also should instead be populated dynamically ... -->
        </map>
    </property>
    <property name="defaultTargetDataSource" ref="Year2012DataSource" />
</bean> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T13:39:34.243

我认为非常适合此要求的是自定义[BeanFactoryPostProcessor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/BeanFactoryPostProcessor.html) - 读取遗留配置并在自定义 bean 工厂后处理器中生成数据源：

```
class MyDatasourceRegisteringBeanFactoryPostProcessor implements BeanFactoryPostProcessor {

    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        //Read in details from legacy properties.. build custom bean definitions and register with bean factory
        //for each legacy property...
            BeanDefinitionBuilder datasourceDefinitionBuilder = BeanDefinitionBuilder.rootBeanDefinition(BasicDataSource.class).addPropertyValue("url", "jdbc..");
            beanFactory.registerBeanDefinition(datasourceDefinitionBuilder.getBeanDefinition());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:36:50.573

据我所知，没有使用 XML 配置的开箱即用解决方案。[但是，在此答案](https://stackoverflow.com/a/2799467/248082)中使用`FactoryBean`Spring 中的抽象描述了实现此目的的简单解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T08:06:25.410

============================================

按照 Biju 的提示，我的一切工作都像这样：

============================================

spring 配置中的“数据库 urls by year”部分不再存在，bean 是在 BeanFactoryPostProcessor 中创建的。

“dataSource” bean 将其属性设置为在 BeanFactoryPostProcessor 中替换的虚拟数据：

```
<bean id="dataSource" class="someProject.DbConnectionRoutingDataSource">
    <property name="targetDataSources">
        <map key-type="String">
            <!-- Will be filled from the DatasourceRegisteringBeanFactoryPostProcessor -->
        </map>
    </property>
    <property name="defaultTargetDataSource" value="java:jboss/datasources/ExampleDS" />
</bean> 
```

这是 BeanFactoryPostProcessor 的实现：

```
@Component
class DatasourceRegisteringBeanFactoryPostProcessor implements BeanFactoryPostProcessor {
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        InitialContext ic = new InitialContext();

        // read the list of available JNDI connections
        NamingEnumeration<?> list = ic.listBindings(getJndiDSRoot());
        HashSet<String> jndiDataSources = new HashSet<String>();
        while (list.hasMore()) {
            /*... (ommitted for simplicity) ...*/
            connectionsList.put(key, value);
        }            

        BeanDefinitionRegistry factory = (BeanDefinitionRegistry) beanFactory;
        BeanDefinitionBuilder datasourceDefinitionBuilder;

        // Create new beans
        for (Entry<Integer, String> e : connectionsList.entrySet()) {
            datasourceDefinitionBuilder = BeanDefinitionBuilder
                    .childBeanDefinition("parentDataSource")
                    .addPropertyValue("url", e.getValue());

            factory.registerBeanDefinition("Year" + e.getKey() + "DataSource",
                    datasourceDefinitionBuilder.getBeanDefinition());
        }

        // Configure the dataSource bean properties
        MutablePropertyValues mpv = factory.getBeanDefinition("dataSource").getPropertyValues();

        // Here you can set the default dataSource
        mpv.removePropertyValue("defaultTargetDataSource");
        mpv.addPropertyValue("defaultTargetDataSource", 
            new RuntimeBeanReference("Year" + defaultYear + "DataSource"));

        // Set the targetDataSource properties map with the list of connections
        ManagedMap<Integer, RuntimeBeanReference> mm = (ManagedMap<Integer, RuntimeBeanReference>) mpv.getPropertyValue("targetDataSources").getValue();
        mm.clear();

        // Fill the map with bean references to the newly created beans
        for (Entry<Integer, String> e : connectionsList.entrySet()) {
            mm.put(e.getKey(), new RuntimeBeanReference("Year" + e.getKey() + "DataSource")));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T11:33:09.827

我可以告诉你注释方法。我会在属性文件中添加 url 和配置，并执行以下操作：

```
@Bean(name="dataSourceMap")
public Map<String, DataSource> dataSourceMap(DataSource dataSource2011, DataSource dataSource2012) {
    // read properties from properties file and create map of datasource

    Map<DataSource> map = new HashMap<>();
    map.put("dataSource2011",dataSource2011);
    map.put("dataSource2012",dataSource2012);
    //map.put("dataSource2013",dataSource2013);
    return map;
}

@Bean(name="dataSource2011",destroyMethod="close")
public DataSource dataSource() {
    // read properties from properties file and create map of 

    BasicDataSource dataSource = new BasicDataSource();
    dataSource.setDriverClassName(driverClassName);
    dataSource.setUrl(url2011);
    dataSource.setUsername(username2011);
    dataSource.setPassword(password2011);               
    return dataSource;
}

@Bean(name="dataSource2012",destroyMethod="close")
public DataSource dataSource() {
    // read properties from properties file and create map of 

    BasicDataSource dataSource = new BasicDataSource();
    dataSource.setDriverClassName(driverClassName);
    dataSource.setUrl(url2012);
    dataSource.setUsername(username2012);
    dataSource.setPassword(password2012);               
    return dataSource;
} 
```

# iphone - iphone中的UIDeviceOrientationFaceDown

> ID：12090408
> 
> 赞同：4
> 
> 时间：2012-08-23T11:20:00.590
> 
> 标签：iphone, objective-c, ios5, uideviceorientation

我想检测 UIDeviceOrientationFaceDown。我怎样才能做到这一点？？？实际上，当我的 iphone 面朝下放在平坦的表面上时，我想执行一些操作。这怎么可能？？？请帮助我做到这一点。

我有这个代码，但不知道在哪里以及如何应用这个代码

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

 BOOL getOrientationUpdates = [[UIDevice currentDevice] isGeneratingDeviceOrientationNotifications];
   NSLog(@"will receive orientation notifications: %@", getOrientationUpdates?@"YES":@"NO");

  [[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(orientationChanged:)
                                         name:UIDeviceOrientationDidChangeNotification
                                       object:nil]; 
```

如果有任何教程那么请建议我

在此先感谢您，非常欢迎您提供宝贵的帮助和建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T11:27:39.767

您可以通过检测 iPhone 的 ProximityState 来完成此操作。使用`[UIDevice currentDevice]`单例，设置`proximityMonitoringEnabled`为`YES`. 您可以通过proximityState 属性访问接近度信息。

```
[[UIDevice currentDevice]proximityState]; 
```

iPhone 有一个传感器，当您在通话期间将其戴在耳朵上时，它会关闭屏幕，AFAIK 是一个红外传感器。你可以访问它。

编辑：您也可以使用以下代码完成它。`UIDeviceOrientationFaceDown The device is held parallel to the ground with the screen facing downwards.`（不管它是否触摸了任何物体）如果您想知道 iPhone 是否触摸了一个物体，请检测设备的接近状态。

```
 [[NSNotificationCenter defaultCenter] removeObserver:self];
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(detectOrientation) name:@"UIDeviceOrientationDidChangeNotification" object:nil];

    -(void)detectOrientation;{

            switch ([[UIDevice currentDevice] orientation]) {
                case UIDeviceOrientationPortrait:
                {
                    NSLog(@"portrait");
                }
                    break;
                case UIDeviceOrientationPortraitUpsideDown:
                {
                    NSLog(@"portraitUpSideDown");
                }
                    break;
                case UIDeviceOrientationLandscapeLeft:
                {
                    NSLog(@"landscapeLeft");
                }
                    break;
                case UIDeviceOrientationLandscapeRight:
                {
                    NSLog(@"landscapeRight");
                }
                break;
               case UIDeviceOrientationFaceDown:
               {
                    NSLog(@"facedown!!");
                }
                 break;

            default:
                break;
        }
    } 

} 
```

编辑：回答评论中的问题。在您的 viewDidLoad 中添加这一行

```
[UIDevice currentDevice].proximityMonitoringEnabled = YES;
[[NSNotificationCenter defaultCenter] removeObserver:self];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleProximityChangeNotification:) name:UIDeviceProximityStateDidChangeNotification object:nil]; 
```

然后写一个方法

```
-(void)handleProximityChangeNotification{
     if([[UIDevice currentDevice]proximityState]){
        NSLog(@"...");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-22T02:08:48.840

您可以使用加速度计传感器的 z 值 (-1 <= z <= 1)。如果您的设备朝下，z 值将在 0 < z <=1（当它与地面平行时为 0，当它与地面垂直时为 1）。要获取此数据，您可以使用`CMMotionManager`

```
 #import <CoreMotion/CoreMotion.h> 

 CMMotionManager *cm=[[CMMotionManager alloc] init];
 cm.deviceMotionUpdateInterval=0.2f;
 [cm startDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue]
                            withHandler:^(CMDeviceMotion *data, NSError *error) {
                              if(data.gravity.z>=0.3f)// 

                              {
                                 //DO something
                              }

  }]; 
```

不要忘记将`CoreMotion`框架添加到您的项目中。

# authentication - 发送请求签名 X509 证书的实用程序

> ID：12090411
> 
> 赞同：0
> 
> 时间：2012-08-23T11:20:12.900
> 
> 标签：authentication, https, x509certificate, x509, utility

我有一个使用客户端证书身份验证的服务器应用程序。每个新用户必须获得自己的证书才能使用我的应用程序。

所以，我想使用一些实用程序来测试由 x509 证书签名的用户请求。它可以是任何程序或插件，例如 Chrome。

最好的问候， Evgeniy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:29:49.133

您可以使用带有 --cert 参数的 curl 等工具（参见[http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)）或带有 --certificate 参数的 wget（参见[http://www.gnu.org /software/wget/manual/html_node/HTTPS-_0028SSL_002fTLS_0029-Options.html#HTTPS-_0028SSL_002fTLS_0029-Options](http://www.gnu.org/software/wget/manual/html_node/HTTPS-_0028SSL_002fTLS_0029-Options.html#HTTPS-_0028SSL_002fTLS_0029-Options)）。大多数 *nix 系统上都存在一个或两个，但下载位置是：

*   卷曲：[http ://curl.haxx.se/download.html](http://curl.haxx.se/download.html)
*   wget： http: [//gnuwin32.sourceforge.net/packages/wget.htm](http://gnuwin32.sourceforge.net/packages/wget.htm)

# jquery - 实现 Jquery UI 对话框的最简洁方法

> ID：12090412
> 
> 赞同：0
> 
> 时间：2012-08-23T11:20:12.920
> 
> 标签：jquery, jquery-ui

我将在整个应用程序中使用许多对话框，但实现它的最佳方法是什么？

我有两个想法：

在正文底部的页面上设置对话框 div，但将其初始显示设置为无。

或者

当对话框出现的触发器发生时，将其附加到正文中，然后打开。

您认为这两种方法的优缺点是什么？如果您有更好的方法，请分享！

* * *

是的，我说的是 Jquery UI：

```
$('#myDialog').dialog({
    ...
}) 
```

我知道隐藏和取消隐藏，但是使用它所应用的 div 的最佳方法是什么？一开始是隐藏的，还是动态地将 div 附加到“body”，然后在其上调用对话框？

* * *

@Lee Taylor-两者兼而有之，因为在对话框中将有输入和选择字段。选择字段将由 AJAX 调用填充。

* * *

让 AJAX 调用或 PHP 填充对话框的内容更好吗？

您能否也给我一个使用 .clone() 的示例？

* * *

谢谢，这个呢：

```
function manageContactDialog()
{
var content = $.load('manage-customer-contact.html') ;

$('body').append('<div id="manageCustomerDialog">'+content+'</div>') ;

$('#manageCustomerDialog').dialog({
    title: ''
})
} 
```

# c# - DevExpress GridControl 图像列显示类似 System.Byte[] 的图像

> ID：12090413
> 
> 赞同：3
> 
> 时间：2012-08-23T11:20:13.233
> 
> 标签：c#, winforms, devexpress, xtragrid

我有一个包含人名、姓氏、代码和照片的人员数据表。当我从表中选择人员并将结果发送到 DevExpress GridControl 时，它会显示姓名、姓氏和代码列。但 Photo 列在所有行中显示 System.Byte[] 值。问题是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:05:03.487

您应该为列的[ColumnEdit](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridColumnsGridColumn_ColumnEdittopic)属性分配一个[RepositoryItemPictureEdit](http://help.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsRepositoryRepositoryItemPictureEdittopic)的实例。在这种情况下，XtraGrid 将能够在网格中显示图像。

示例：[如何在 GridControl 中显示图像](http://www.devexpress.com/Support/Center/Example/Details/E3819)

相关链接：

1.  [存储库和存储库项](http://help.devexpress.com/#WindowsForms/CustomDocument1009)
2.  [就地编辑器概述](http://documentation.devexpress.com/#WindowsForms/CustomDocument745)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:26:41.970

***字节转换为图像

```
 data.Read();

            //get the value of the size field in the current row and store it in filesize

            int fileSize = data.GetInt32(data.GetOrdinal("size"));

            //get the value of the name field in the current row and store it in filesize

            string name = data.GetString(data.GetOrdinal("name"));  

            //Create a byte array to read the file in the row which is in bytes

            byte[] rawData = new byte[fileSize];

            //Read the bytes and store it in the array

            data.GetBytes(data.GetOrdinal("file"), 0, rawData, 0, fileSize);

            //Create the file from the byte array which is read from the database

            FileStream fs = new FileStream(name, FileMode.Create, FileAccess.Write);

            fs.Write(rawData, 0, fileSize);

            //closing the file stream 

            fs.Close();

            //Showing the image that is just retreived in te picturebox picDB

            picDB.BackgroundImage = new Bitmap(name); 
```

# html - 宽而高的桌面卷轴

> ID：12090415
> 
> 赞同：0
> 
> 时间：2012-08-23T11:20:20.730
> 
> 标签：html, css, scroll

我有一个带有健壮表的 Web 应用程序，不幸的是它必须非常宽和高。

小提琴：http: [//jsfiddle.net/orechova/ATKrU/17/](http://jsfiddle.net/orechova/ATKrU/17/)

可以看到，只需要向右滚动才能实现表格的垂直滚动是非常不舒适的。

`direction: rtl`如果内部有表格，则将滚动条向左移动是有问题的。我可以有一些 jQuery 滚动条，但它的设计与其他滚动条不同。我有这样的想法，即可以使用主滚动器（浏览器窗口之一）以某种方式滚动表格。我能做到这一点吗？

欢迎任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:11:01.257

好的，所以我决定暂时保留它，然后用除表格之外的所有其他元素的固定位置重建页面，然后可以通过浏览器应用程序主滚动滚动。

# android - 从 GeoPoints 创建 GPX 文件

> ID：12090421
> 
> 赞同：8
> 
> 时间：2012-08-23T11:20:35.410
> 
> 标签：android, google-maps, android-maps, gpx

有什么方法可以导出`GeoPoints`到 GPX 文件中吗？

```
@Override
public void onLocationChanged(android.location.Location location) {
        lat = location.getLatitude();
        lon = location.getLongitude();
        currGeo = new GeoPoint((int)(lat*1e6),(int)(lon*1e6));

        //Store GeoPoint to GPX file
    } 
```

我已阅读[How to parse and plot gpx file has an android MapView](https://stackoverflow.com/questions/6383433/how-to-parse-and-plot-gpx-file-has-an-android-mapview)，但我正在寻找更简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:56:23.377

如果您只想从地理点列表生成 GPX 文件，最简单的方法是将字符串爆破到文件中。不知道 GPX 的确切格式，我做了很多细节，但你应该知道你正在生成的格式。例如，在伪代码中：

```
// open file handle
OutputStream fout = getFileOutputStream("gpxFile.gpx");
fout.write("<gpx>");
for (GeoPoint gp : listOfGeoPoints) {
    fout.write("<gpxPoint>" + getGeoPointAsStringForFile(gp) + "</gpxPoint>"); 
}
fout.write("</gpx>");
// close file, cleanup, etc 
```

这将需要您实现 getFIleOutputStream() 方法和 getGeoPointAsStringForFile() 方法，但您知道您的目标是什么格式，这样您就可以创建文件而无需经历很多麻烦。

*   应该注意的是，这是非常脆弱的，所以在你上线之前做正确的方法，但这是一个简短的版本快速修复。

# apache-flex - 如何将 ibm iloger flex 甘特图集成到我的 flex 应用程序中

> ID：12090425
> 
> 赞同：0
> 
> 时间：2012-08-23T11:20:42.280
> 
> 标签：apache-flex

我有一个 flex 应用程序，我想在其中使用甘特图。因此，我已将 ibm iloger 的试用版下载到我的系统中。现在我的问题是如何将 ibm iloger flex 甘特图集成到我的 flex 应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:06:43.103

假设他们为您提供了 SWC 文件；只需将该 SWC 文件添加到项目的库路径中即可。

然后，您应该能够将它们的组件导入并使用到您的应用程序中。

[我写了这篇关于如何处理 SWC 的](https://www.flextras.com/blog/index.cfm/2009/12/18/What-do-you-do-with-a-SWC)博客文章。

# javascript - 如何在 jQuery 中欺骗点击

> ID：12090431
> 
> 赞同：1
> 
> 时间：2012-08-23T11:21:04.070
> 
> 标签：javascript, jquery, click, lightbox, spoof

我想尝试找到一种使用 jQuery/Javascript 来欺骗点击的方法。

基本上我有一个包装在标签中的图像。当我点击它时，我希望浏览器认为它点击了不同的链接并运行它。

我在单击 $('.gallery a') 时激活了灯箱我想单击一个图像，但灯箱认为我单击了另一个并在灯箱中打开它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:23:28.143

做就是了`$('#selector').click()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:23:12.903

尝试这样做。

```
$('.gallery a').click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:23:29.647

只需调用点击事件。

在这种情况下

```
$(".gallery a").click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T11:23:45.863

```
event.preventDefault();
$("other_link").trigger("click"); 
```

# php - php生成表的第一列没有标题

> ID：12090433
> 
> 赞同：0
> 
> 时间：2012-08-23T11:21:11.060
> 
> 标签：php, html-table

我从另一个站点获得了一个函数来生成基于 PHP 查询的表：

```
function SQLResultTable($Query)
{
    $host = "localhost";
$user = "root";
$pass = "";
$db = "Quality_Monitoring";
    $link = mysql_connect($host, $user, $pass) or die('Could not connect: ' . mysql_error());      //build MySQL Link
    mysql_select_db($db) or die('Could not select database');        //select database
    $Table = "";  //initialize table variable

    $Table.= "<table id='Table1' border='1' style=\"border-collapse: collapse; text-align: center; font-size: 10px; cellspacing: 5px; \">"; //Open HTML Table

    $Result = mysql_query($Query); //Execute the query
    if(mysql_error())
    {
        $Table.= "<tr><td>MySQL ERROR: " . mysql_error() . "</td></tr>";
    }
    else
    {
        //Header Row with Field Names
        $NumFields = mysql_num_fields($Result);
        $Table.= "<tr style=\"background-color: #000066; text-align: center; color: #FFFFFF;\">";
        for ($i=0; $i < $NumFields; $i++)
        {     
            $Table.= "<th>" . mysql_field_name($Result, $i) . "</th>"; 
        }
        $Table.= "</tr>";

        //Loop thru results
        $RowCt = 0; //Row Counter
        while($Row = mysql_fetch_assoc($Result))
        {
            //Alternate colors for rows
            if($RowCt++ % 2 == 0) $Style = "background-color: #CCCCCC;";
            else $Style = "background-color: #FFFFFF;";

            $Table.= "<tr style=\"$Style\">";
            //Loop thru each field
            foreach($Row as $field => $value)
            {
                $Table.= "<td>$value</td>";
            }
            $Table.= "</tr>";
        }
       // $Table.= "<tr style=\"background-color: #000066; color: #FFFFFF;\"><td colspan='$NumFields'>Query Returned " . mysql_num_rows($Result) . " records</td></tr>";
    }
    $Table.= "</table>";

    return $Table;

} 
```

我需要做的不是第一列的标题，而是将列保留在那里，其中包含记录。谁能帮我解决这个问题？说到 PHP，完全是菜鸟，而且真的不知道我在哪里/要修改什么。任何帮助表示赞赏，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:22:39.210

删除这部分代码：

```
 //Header Row with Field Names
    $NumFields = mysql_num_fields($Result);
    $Table.= "<tr style=\"background-color: #000066; text-align: center; color: #FFFFFF;\">";
    for ($i=0; $i < $NumFields; $i++)
    {     
        $Table.= "<th>" . mysql_field_name($Result, $i) . "</th>"; 
    }
    $Table.= "</tr>"; 
```

所以你的功能将是：

```
function SQLResultTable($Query)
{
    $host = "localhost";
$user = "root";
$pass = "";
$db = "Quality_Monitoring";
    $link = mysql_connect($host, $user, $pass) or die('Could not connect: ' . mysql_error());      //build MySQL Link
    mysql_select_db($db) or die('Could not select database');        //select database
    $Table = "";  //initialize table variable

    $Table.= "<table id='Table1' border='1' style=\"border-collapse: collapse; text-align: center; font-size: 10px; cellspacing: 5px; \">"; //Open HTML Table

    $Result = mysql_query($Query); //Execute the query
    if(mysql_error())
    {
    $Table.= "<tr><td>MySQL ERROR: " . mysql_error() . "</td></tr>";
    }
    else
    {
    //Loop thru results
    $RowCt = 0; //Row Counter
    while($Row = mysql_fetch_assoc($Result))
    {
        //Alternate colors for rows
        if($RowCt++ % 2 == 0) $Style = "background-color: #CCCCCC;";
        else $Style = "background-color: #FFFFFF;";

        $Table.= "<tr style=\"$Style\">";
        //Loop thru each field
        foreach($Row as $field => $value)
        {
            $Table.= "<td>$value</td>";
        }
        $Table.= "</tr>";
    }
       // $Table.= "<tr style=\"background-color: #000066; color: #FFFFFF;\"><td colspan='$NumFields'>Query Returned " . mysql_num_rows($Result) . " records</td></tr>";
    }
    $Table.= "</table>";

    return $Table;

} 
```

但在这一点上，这个函数使用`mysql_*`了相当陈旧和（现在）讨厌的函数。您可能要考虑改用[PDO 。](http://au.php.net/manual/en/book.pdo.php)

编辑：试试这个：

```
function SQLResultTable($Query)
{
    $host = "localhost";
$user = "root";
$pass = "";
$db = "Quality_Monitoring";
    $link = mysql_connect($host, $user, $pass) or die('Could not connect: ' . mysql_error());      //build MySQL Link
    mysql_select_db($db) or die('Could not select database');        //select database
    $Table = "";  //initialize table variable

    $Table.= "<table id='Table1' border='1' style=\"border-collapse: collapse; text-align: center; font-size: 10px; cellspacing: 5px; \">"; //Open HTML Table

    $Result = mysql_query($Query); //Execute the query
    if(mysql_error())
    {
        $Table.= "<tr><td>MySQL ERROR: " . mysql_error() . "</td></tr>";
    }
    else
    {
        //Header Row with Field Names
        $NumFields = mysql_num_fields($Result);
        $Table.= "<tr style=\"background-color: #000066; text-align: center; color: #FFFFFF;\">";
        for ($i=0; $i < $NumFields; $i++)
        {     
            $Table.= "<th>" . mysql_field_name($Result, $i) . "</th>"; 
        }
        $Table.= "</tr>";

        //Loop thru results
        $RowCt = 0; //Row Counter
        while($Row = mysql_fetch_assoc($Result))
        {
            //Alternate colors for rows
            if($RowCt!=0)
        {
            if($RowCt % 2 == 0) $Style = "background-color: #CCCCCC;";
            else $Style = "background-color: #FFFFFF;";

            $Table.= "<tr style=\"$Style\">";
            //Loop thru each field
            foreach($Row as $field => $value)
            {
                $Table.= "<td>$value</td>";
            }
            $Table.= "</tr>";
        }
    $RowCt++;
        }
       // $Table.= "<tr style=\"background-color: #000066; color: #FFFFFF;\"><td colspan='$NumFields'>Query Returned " . mysql_num_rows($Result) . " records</td></tr>";
    }
    $Table.= "</table>";

    return $Table;

} 
```

# c++ - 包含 导致 std-lib 函数的“重新定义”错误

> ID：12090436
> 
> 赞同：3
> 
> 时间：2012-08-23T11:21:44.383
> 
> 标签：c++, xcode

我正在使用 XCode 将一个相当大的 C/C++ 项目移植到 Mac。一些 C++ 类导入`string`或`vector`. 这会导致一些奇怪的错误报告重新定义几个 std 函数。例如编译器`redefinition of 'std::__is_integral'`在`<type_traits>`.

我没有收到任何其他错误，而且我绝对不会覆盖任何这些标准函数。当我评论`string`.

什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:21:44.383

事实证明，在我为这个项目继承的 C++ 代码中的某个地方重新定义了`bool`. `bool`被重新定义为`int`。因此，在标头（和其他一些 std-lib 标头）中，存在具有 a和泛型参数`type_traits`的泛型方法的重复方法定义。`bool``int`

例如在 type_traits 中有：

```
template <> struct __is_integral<bool> : public true_type {}; 
```

和

```
template <> struct __is_integral<int> : public true_type {}; 
```

正如`bool`被重新定义为 int 两种方法具有相同的签名，我得到了这个`redefinition of...`错误。

# c++ - 如何在 C/C++ 中创建自己的事件？

> ID：12090440
> 
> 赞同：3
> 
> 时间：2012-08-23T11:21:52.640
> 
> 标签：c++, c, events, callback

我应该如何在 c/C++ 编程中创建自己的事件（这包括绑定必要回调的代码）？它在 Java 中直接可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:28:09.470

C++ 中没有内置事件，但如果您不想重新实现自己的类，请尝试[boost 信号](http://www.boost.org/doc/libs/1_51_0/doc/html/signals.html)。

# c# - 每个网络单个应用程序实例

> ID：12090442
> 
> 赞同：0
> 
> 时间：2012-08-23T11:21:56.090
> 
> 标签：c#, instance, mutex, synchronize

我们开发了一些长期运行的 C# 控制台应用程序，这些应用程序将由 Windows 计划任务运行。

这些应用程序可能在 Intranet/Extranet 上的许多不同服务器机器上运行。我们无法确保它们在一台机器上运行，因为每个应用程序可能需要访问某些资源，这些资源仅在特定机器上可用。

尽管如此，所有这些应用程序都使用通用 WCF 服务来访问数据库。

我们需要确保在任何时候只有一个应用程序的实例在运行。由于应用程序可能位于不同的外联网计算机上，我们不能使用每台机器互斥锁或 MSMQ。

我考虑过以下解决方案 - 超时的 WCF Mutex 服务。当一个应用程序运行时，它会检查它是否已经启动（可能在另一台机器上），然后（在专用线程中）定期 ping WCF Mutex 服务以更新时间戳（如果 ping 失败，应用程序立即退出）。如果时间戳过期，这意味着应用程序已经崩溃，所以它可以再次运行。

**我想知道，如果这个“WCF 互斥锁”是我的问题的最佳解决方案。也许已经有一些第三方库已经实现了这样的功能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:34:45.367

您的互斥锁解决方案存在竞争条件。

如果不同服务器上的应用程序在时间戳过期后检查窗口中的时间戳，但在当前服务更新时间戳之前，您将运行两个实例。

我可能会走相反的路线。我会有一个中央监控服务。该服务将持续监控系统的运行状况。如果它检测到服务出现故障，它将在该机器或另一台机器上重新启动它。

您可能想硬着头皮去使用完整的企业服务总线。检查 ESB 的 Wikipedia 文章。它列出了十几个商业和开源系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:45:12.510

网络位置上的文件锁定怎么样？

如果您可以使用独占读写创建/打开文件，那么它是唯一运行的应用程序。如果此正在运行的应用程序随后崩溃，则操作系统会自动释放锁定。

蒂姆

糟糕，刚刚重新阅读问题并看到“外联网”，请忽略我！

# html - 同一个 li 标签中的两个超链接

> ID：12090449
> 
> 赞同：0
> 
> 时间：2012-08-23T11:22:23.467
> 
> 标签：html, css, dom

我正在尝试修改/更新一个网络邮件脚本，我希望在一个 li 标记内有两个超链接，而第二个链接不换行到下一行。我还希望整个`<li>`可点击，类似于雅虎邮件。我在这里搜索并用谷歌搜索，但找不到任何有效的东西。

这是行不通的：

```
<div class="vertical">
<ul>
<li><a href="#">Folders</a></li>
<li><a href="#">Inbox</a></li>
<li><a href="#">Drafts</a></li>
<li><a href="#">Sent</a></li><br/>
<li><a href="#">Trash </a><a href="#">[empty]</a></li>
</ul>
</div> 
```

这是我到目前为止的代码，包括我无法让它工作的 css。

[http://jsfiddle.net/z4gQC/33/](http://jsfiddle.net/z4gQC/33/)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:30:01.217

请参阅此处的工作示例：http: [//jsfiddle.net/pratik136/z4gQC/26/](http://jsfiddle.net/pratik136/z4gQC/26/)

将您的 CSS 更改为：

```
div.vertical
{
    width:100%;
    height:80px;
}
div.vertical ul
{
    list-style-type:none;
    margin:0;
    padding:0;
}
div.vertical li
{
    float:left;
    width:200px;   
    background-color:#f3f3f3;
}
div.vertical a
{
    display: inline-block; 
    width:50px;   
}
div.vertical a:link,div.vertical a:visited
{
    font-weight:bold;
    color:#666666;
    text-align:left;
    padding:8px;
    text-decoration:none;
}
div.vertical li:hover,div.vertical a:active
{
    background-color:#d4d4d4;
}
span 
{
    display: table-cell;
    vertical-align: middle;
}​ 
```

* * *

**编辑：**

OP 要求 [empty] 右对齐。

小提琴：http: [//jsfiddle.net/pratik136/z4gQC/35/](http://jsfiddle.net/pratik136/z4gQC/35/)

将类添加到`<a href="#">[empty]</a>`as

```
<a href="#" class="right">[empty]</a> 
```

并将以下内容添加到您的 CSS 中：

```
div.vertical a.right:link, div.vertical a.right:visited{
    text-align: right;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:32:51.187

使链接浮动：

```
div.vertical a {
  float: left;
} 
```

`li`并使用标签而不是标签制作悬停效果`a`：

```
div.vertical li {
  background-color:#f3f3f3;
}

div.vertical li:hover {
  background-color:#d4d4d4;
} 
```

演示：http: [//jsfiddle.net/z4gQC/31/](http://jsfiddle.net/z4gQC/31/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:31:16.170

试试这个把你的css改成这个

检查[小提琴](http://jsfiddle.net/z4gQC/34/)

```
 div.vertical
{
    width:100%;
    height:80px;
}
div.vertical ul
{
    list-style-type:none;
    margin:0;
    padding:0;
}
div.vertical li
{
    float:left;
    width:200px;   
    background-color:#f3f3f3;
}
div.vertical a
{
    display: inline-block; 
    width:50px;
float:right    
}

div.vertical a:first-child{ float:left}

div.vertical a:link,div.vertical a:visited
{
    font-weight:bold;
    color:#666666;
    text-align:left;
    padding:8px;
    text-decoration:none;
}
div.vertical li:hover,div.vertical a:active
{
    background-color:#d4d4d4;
}
span 
{
    display: table-cell;
    vertical-align: middle;
}​ 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-23T11:27:15.403

只需将您的 css 更正为：

```
div.vertical a
{
    display:inline-block; 
} 
```

代替 ：

```
div.vertical a
{
display:block; 
} 
```

[http://jsfiddle.net/z4gQC/18/](http://jsfiddle.net/z4gQC/18/)

# java - Vaadin：触发菜单项点击

> ID：12090456
> 
> 赞同：0
> 
> 时间：2012-08-23T11:22:43.260
> 
> 标签：java, vaadin

是否有任何方法可以模拟在 Vaadin 中单击了**[MenuItem](https://vaadin.com/api/com/vaadin/ui/MenuBar.MenuItem.html)**，例如用于测试目的？我似乎找不到任何方法来做到这一点。

理想情况下，我希望能够通过 Vaadin 框架来做到这一点，例如：

```
theMenuItem.click(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:37:30.323

没有直接模拟点击的方法，但请尝试以下方法来模拟 MenuItem 的选择和检查：

```
 MenuItem mi = null; // TODO

    // Selection
    if (null != mi.getCommand()) {
        mi.getCommand().menuSelected(mi);
    }

    // Toggle checked
    if (mi.isCheckable()) {
        mi.setChecked(!mi.isChecked());
    } 
```

此外，我建议您将菜单与导航与 UI 实现分离，以使导航更好地使用 JUnit 进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:41:31.447

对于测试，您可以使用 Java 中的 java.awt.Robot.class，或使用测试 HIM API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T02:15:09.790

我建议将菜单与导航分离。我们使用 guava 的 EventBus 来确保关注点分离，并使测试更容易。

# objective-c - NSDocument 应用程序和文件扩展名

> ID：12090460
> 
> 赞同：0
> 
> 时间：2012-08-23T11:23:03.523
> 
> 标签：objective-c, cocoa, nsdocument

我创建了一个基于文档的应用程序，它需要打开具有特定扩展名的 xml 文本文件。当我使用 NSDocument 模板在 Xcode 中创建项目时，我指定了我想要的扩展，并且一切正常。

按照 Apple 关于如何构建基于文档的应用程序的指南，我编辑了 Info.plist 文件以添加之前缺少的 UTI 的详细信息。突然，我的应用程序停止打开具有我想要的扩展名的文件，实际上停止打开任何文件。此外，当我尝试保存文件时，保存对话框不再建议任何扩展名。

当我保存文件并`mdls`从终端运行命令时，我得到

```
kMDItemContentTypeTree         = (
    "public.data",
    "public.item"
) 
```

而不是`public.xml`我在 Info.plist 中为 UTI 设置。似乎我的应用程序停止识别存储在 Info.plist 中的信息。我必须在 Xcode 中连接什么才能使其正常工作吗？

这是我的 Info.plist 文件的相关部分：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>xmds</string>
        </array>
        <key>CFBundleTypeIconFile</key>
        <string>AppIcon</string>
        <key>CFBundleTypeName</key>
        <string>XMDS Script</string>
        <key>CFBundleTypeOSTypes</key>
        <array>
            <string>xmds</string>
        </array>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.dedalus.degs</string>
        </array>
        <key>NSDocumentClass</key>
        <string>Document</string>
    </dict>
</array>
<key>UTExportedTypeDeclarations</key>
<array>
    <dict>
        <key>UTTypeConformsTo</key>
        <array>
            <string>public.xml</string>
        </array>
        <key>UTTypeDescription</key>
        <string>XMDS Script</string>
        <key>UTTypeIconFile</key>
        <string>AppIcon</string>
        <key>UTTypeIdentifier</key>
        <string>com.dedalus.degs</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>com.apple.ostype</key>
            <array>
                <string>xmds</string>
            </array>
            <key>public.filename-extension</key>
            <array>
                <string>xmds</string>
            </array>
        </dict>
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T19:14:58.963

我使用项目的目标信息设置来设置文档类型和 UTI，而不是 Xcode 4.2 和 4.4 中的 Info.plist 文件。这从 Info.plist 文件中提取并在您更改后对其进行修改。尝试使用它。

文档类型定义将处理扩展和扩展的类。导出的 UTI 代表您的应用对其具有权威性的扩展。请参阅这个 Stackoverflow 问题： [Xcode 4 中的“Imported UTIs”是什么？](https://stackoverflow.com/questions/6661714/what-are-imported-utis-in-xcode-4)

我导出的 UTI 符合 public.data（“任何类型的简单字节流的基本类型，包括文件和内存中的数据”）。如果您使用标识符，请确保它在文档类型和导出的 UTI 中相同。

# github - 如何在 GitHub 上的 README.md 文件中将图像居中？

> ID：12090472
> 
> 赞同：449
> 
> 时间：2012-08-23T11:23:27.787
> 
> 标签：github, markdown

我一直在研究 GitHub 中使用的 Markdown 语法，但除了将图像大小调整为`README.md`页面宽度外，我不知道如何将图像居中。

这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：739
> 
> 时间：2012-08-25T01:00:25.593

这是来自 GitHub 的支持：

> 嘿，瓦尔迪，
> 
> Markdown 不允许您直接调整对齐方式（请参阅此处的文档：http: [//daringfireball.net/projects/markdown/syntax#img](http://daringfireball.net/projects/markdown/syntax#img)），但您可以只使用原始 HTML 'img' 标签并使用 inline 进行对齐css。
> 
> 干杯，

所以**可以对齐图像！**你只需要使用内联 CSS 来解决问题。[**您可以从我的GitHub 存储库**](https://github.com/waldyr/Sublime-Installer/blob/master/README.md)中获取示例。在 README.md 的底部有一个居中对齐的图像。为简单起见，您可以执行以下操作：

```
<p align="center">
  <img src="http://some_place.com/image.png" />
</p> 
```

虽然，正如[nulltoken 所说](https://stackoverflow.com/questions/12090472/how-do-i-center-an-image-in-the-readme-md-file-on-github/12091563#12091563)，这将与 Markdown 哲学相悖！

* * *

[我的自述文件](https://github.com/waldyr/Sublime-Installer/blob/master/README.md)中的这段代码：

```
<p align="center">
  <img src="https://github.com/waldyr/Sublime-Installer/blob/master/sublime_text.png?raw=true" alt="Sublime's custom image"/>
</p> 
```

它产生这个图像输出，除了在 GitHub 上查看时居中：

```
<p align="center">
  <img src="https://github.com/waldyr/Sublime-Installer/blob/master/sublime_text.png?raw=true" alt="Sublime's custom image"/>
</p> 
```

* * *

## 回答 #2

> 赞同：202
> 
> 时间：2012-08-23T12:25:38.353

> 我一直在查看 GitHub [...] 中使用的 Markdown 语法，我不知道如何使图像居中

**TL;博士**

不，你不能**仅仅**依靠 Markdown 语法。Markdown 不关心定位。

*注意：*一些 Markdown 处理器支持包含 HTML（正如 @waldyr.ar 正确指出的那样），在 GitHub 案例中，您可能会回退到`<div style="text-align:center"><img src="..." /></div>`.

[请注意，如果您的存储库是在不同的托管环境（ CodePlex](https://en.wikipedia.org/wiki/CodePlex)、[Bitbucket](https://en.wikipedia.org/wiki/Bitbucket)等）中创建的，或者如果不是通过浏览器读取文档（[Sublime Text](https://en.wikipedia.org/wiki/Sublime_Text) Markdown preview、MarkdownPad、Visual Studio Web ） ，则无法保证图像会居中Essentials Markdown 预览，...)。

*注意 2：*请记住，即使在 GitHub 网站内，Markdown 的呈现方式也不统一。例如，wiki 不允许这种 CSS 位置欺骗。

**未删减版**

**[Markdown 语法](http://daringfireball.net/projects/markdown/syntax)**不提供控制图像位置的能力。

事实上，正如**“[哲学](http://daringfireball.net/projects/markdown/syntax#philosophy)”**部分所述，允许这样的格式化是与 Markdown 哲学相悖的。

> “Markdown 格式的文档应该可以按原样以纯文本形式发布，而不会看起来像是用标签或格式说明进行了标记。”

Markdown 文件由 github.com 网站通过使用 Ruby **[Redcarpet](https://github.com/vmg/redcarpet)**库呈现。

Redcarpet 公开了一些**[扩展](https://github.com/vmg/redcarpet#and-its-like-really-simple-to-use)**（例如删除线），它们不是标准 Markdown 语法的一部分，并提供了额外的“功能”。但是，没有支持的扩展允许您将图像居中。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2016-07-18T01:22:44.450

或者，如果您可以控制 CSS 内容，则可以巧妙地使用[URL 参数和 CSS](https://jsfiddle.net/oknbt8r1/)。

降价：

```
![A cute kitten](http://placekitten.com/200/300?style=centerme) 
```

和 CSS：

```
img[src$="centerme"] {
  display:block;
  margin: 0 auto;
} 
```

您可以通过这种方式创建各种样式选项，并且仍然保持 Markdown 内容没有额外代码。当然，如果其他人在其他地方使用 Markdown，您无法控制会发生什么，但这是所有 Markdown 文档共享的一般样式问题。

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2018-05-05T17:30:30.107

对于**左对齐**

```
 <img align="left" width="600" height="200" src="https://www.python.org/python-.png"> 
```

对于**右对齐**

```
<img align="right" width="600" height="200" src="https://www.python.org/python-.png"> 
```

并用于**中心对齐**

```
<p align="center">
  <img width="600" height="200" src="https://www.python.org/python-.png">
</p> 
```

[如果您觉得这很有用，请在此处](https://gist.github.com/innat/49d12decb8f0c6cca2d994fba22886a2)分叉以供将来参考。

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2020-06-15T07:32:42.163

**TLDR：直接跳下来看看下面称为“1.****使用已弃用的 HTML****属性*****在 GitHub 自述文件中*****居中和对齐图像”一**
节中的 4 个示例（1.1、1.2、1.3 和 1.4）！***`align`***

 *此外，在我的存储库中的几个自述降价文件中查看 GitHub 上的实际示例：

1.  [https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world/blob/master/markdown/github_readme_center_and_align_images.md](https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world/blob/master/markdown/github_readme_center_and_align_images.md)
2.  和[https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world#3-markdown](https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world#3-markdown)
    1.  [![在此处输入图像描述](../Images/1f50cc64baf08e02febcc8e4af7cb798.png)](https://i.stack.imgur.com/LEDvt.png)

# 关于如何在 Markdown 中居中和对齐图像的背景：

因此，事实证明，**GitHub 明确阻止/过滤了所有在 GitHub降价文件（例如自述文件）*中编辑任何形式的 CSS（级联样式表）样式（包括[外部、内部和内联](https://www.w3schools.com/css/css_howto.asp)）的尝试。*`*.md`**见这里（强调补充）：

1.  [Github 存储库中 readme.md 的自定义 css 文件](https://stackoverflow.com/questions/51956361/custom-css-file-for-readme-md-in-a-github-repo/51956450#51956450)

    > 出于安全原因，GitHub 不允许**CSS**通过**CSS影响 README.md 文件...**

2.  [https://github.community/t/github-flavored-markdown-doesnt-render-css-styles-inside-a-html-block/126258/2?u=electricrcaircraftguy](https://github.community/t/github-flavored-markdown-doesnt-render-css-styles-inside-a-html-block/126258/2?u=electricrcaircraftguy)

    > 不幸的是，你不能在 GitHub markdown 中使用**CSS**，因为它是清理过程的一部分。
    > 
    > > HTML 被清理，积极删除可能伤害您和您的亲属的东西 - 例如`script`标签、**内联样式**和`class`/或`id`属性。
    > 
    > 来源：[https ://github.com/github/markup](https://github.com/github/markup)

**因此，这意味着*在 GitHub 自述文件*中居中或对齐图像，您唯一的解决方案是使用[已弃用的 HTML`align`属性](https://www.w3.org/TR/html4/present/graphics.html#h-15.1.2)（该属性碰巧仍然有效），[如此答案](https://stackoverflow.com/a/12118349/4561887)所示。**

我还应该指出，尽管该解决方案确实有效，但声称使用该答案会引起很多混乱`inline css to solve the problem`，因为就像@Poikilos 在评论中指出的那样，该答案中没有任何 CSS。相反，元素的`align="center"`一部分是一个[已弃用的 HTML 属性](https://www.w3.org/TR/html4/present/graphics.html#h-15.1.2)（碰巧仍然有效），而不是 CSS。所有 CSS，无论是[外部的、内部的还是内联](https://www.w3schools.com/css/css_howto.asp)的，都被 GitHub 自述文件禁止并明确删除，如通过反复试验和上述两个参考所示。`<p>`

这导致我在这里将我的答案分成两个答案：

1.  `align`“使用已弃用的 HTML属性在 GitHub 自述文件中居中和对齐图像”，以及
2.  “在您还可以控制 CSS 样式的任何 Markdown 文档中使用现代 CSS 居中和对齐图像”。

选项 2 仅适用于您可以完全控制 CSS 样式的地方，例如在您创建的自定义[GitHub Pages](https://pages.github.com/)网站中？

* * *

# 1.使用已弃用的 HTML属性*在 GitHub 自述文件中*居中和对齐图像：`align`

这适用于任何 GitHub`*.md`降价文件，例如 GitHub`readme.md`文件。它依赖于已弃用的 HTML`align`属性，但仍然可以正常工作。您可以在我的 eRCaGuy_hello_world 存储库中的实际 GitHub 自述文件中查看完整演示：[https](https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world/blob/master/markdown/github_readme_center_and_align_images.md) ://github.com/ElectricRCAAircraftGuy/eRCaGuy_hello_world/blob/master/markdown/github_readme_center_and_align_images.md 。

笔记：

1.  *请务必`width="100%"`在下面的每个`<p>`段落元素中设置，否则整个段落会尝试允许自动换行，从而导致奇怪且难以预测的效果。*
2.  要调整图像大小，只需将`width="30%"`或任何您想要的百分比设置在 0% 和 100% 之间，即可获得所需的效果！这比尝试设置像素大小（例如 ）要容易得多*，*`width="200" height="150"`因为使用`width`百分比会自动调整到查看器的屏幕和页面显示宽度，并且会在您调整浏览器窗口大小时自动调整图像大小。它还避免了将图像扭曲成不自然的比例。这是一个很棒的功能！
3.  [（已弃用）HTML`align`属性](https://www.w3.org/TR/html4/present/graphics.html#h-15.1.2)的选项包括`left`、`center`、`right`和`justify`.

## 1.1。使用 NO WORD WRAP 将图像左对齐、右对齐或居中对齐：

这：

```
**Align left:**
<p align="left" width="100%">
    <img width="33%" src="https://i.stack.imgur.com/RJj4x.png">
</p>

**Align center:**
<p align="center" width="100%">
    <img width="33%" src="https://i.stack.imgur.com/RJj4x.png">
</p>

**Align right:**
<p align="right" width="100%">
    <img width="33%" src="https://i.stack.imgur.com/RJj4x.png">
</p> 
```

产生这个：

[![在此处输入图像描述](../Images/6dc05ac782c8d2943cb6d7cc9a014681.png)](https://i.stack.imgur.com/JSSk4.png)

如果您想将文本本身设置为左、中或右，您也可以在`<p>`元素内包含文本，作为常规 HTML，如下所示：

```
<p align="right" width="100%">
    This text is also aligned to the right.<br>
    <img width="33%" src="https://i.stack.imgur.com/RJj4x.png">
</p> 
```

要产生这个：

[![在此处输入图像描述](../Images/c74fa18c9147a50d093d9016f4ead2d7.png)](https://i.stack.imgur.com/llVTE.png)

## 1.2\. 使用自动换行将图像左对齐、右对齐或居中对齐：

这：

```
**Align left (works fine):**

<img align="left" width="33%" src="https://i.stack.imgur.com/RJj4x.png">

[Arduino](https://en.wikipedia.org/wiki/Arduino) (/ɑːrˈdwiːnoʊ/) is an open-source hardware and software company, project and user community that designs and manufactures single-board microcontrollers and microcontroller kits for building digital devices. Its hardware products are licensed under a [CC-BY-SA][4] license, while software is licensed under the GNU Lesser General Public License (LGPL) or the GNU General Public License (GPL),[1] permitting the manufacture of Arduino boards and software distribution by anyone. Arduino boards are available commercially from the official website or through authorized distributors. Arduino board designs use a variety of microprocessors and controllers. The boards are equipped with sets of digital and analog input/output (I/O) pins that may be interfaced to various expansion boards ('shields') or breadboards (for prototyping) and other circuits.

**Align center (doesn't really work):**

<img align="center" width="33%" src="https://i.stack.imgur.com/RJj4x.png">

[Arduino](https://en.wikipedia.org/wiki/Arduino) (/ɑːrˈdwiːnoʊ/) is an open-source hardware and software company, project and user community that designs and manufactures single-board microcontrollers and microcontroller kits for building digital devices. Its hardware products are licensed under a CC-BY-SA license, while software is licensed under the GNU Lesser General Public License (LGPL) or the GNU General Public License (GPL),[1] permitting the manufacture of Arduino boards and software distribution by anyone. Arduino boards are available commercially from the official website or through authorized distributors. Arduino board designs use a variety of microprocessors and controllers. The boards are equipped with sets of digital and analog input/output (I/O) pins that may be interfaced to various expansion boards ('shields') or breadboards (for prototyping) and other circuits.

**Align right (works fine):**

<img align="right" width="33%" src="https://i.stack.imgur.com/RJj4x.png">

[Arduino](https://en.wikipedia.org/wiki/Arduino) (/ɑːrˈdwiːnoʊ/) is an open-source hardware and software company, project and user community that designs and manufactures single-board microcontrollers and microcontroller kits for building digital devices. Its hardware products are licensed under a CC-BY-SA license, while software is licensed under the GNU Lesser General Public License (LGPL) or the GNU General Public License (GPL),[1] permitting the manufacture of Arduino boards and software distribution by anyone. Arduino boards are available commercially from the official website or through authorized distributors. Arduino board designs use a variety of microprocessors and controllers. The boards are equipped with sets of digital and analog input/output (I/O) pins that may be interfaced to various expansion boards ('shields') or breadboards (for prototyping) and other circuits. 
```

产生这个：

[![在此处输入图像描述](../Images/ba687814845ca3d50d38ee7dbf9e6038.png)](https://i.stack.imgur.com/dYpvF.png)

## 1.3\. 并排对齐图像：

*提醒：确保为整个`<p>`段落元素提供完整的 100% 列宽（`width="100%"`，如下所示），否则文本会在其周围自动换行，从而破坏您可能试图保持的垂直对齐和垂直间距/格式！*

这：

```
33% width each (_possibly_ a little too wide to fit all 3 images side-by-side, depending on your markdown viewer):
<p align="center" width="100%">
    <img width="33%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="33%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="33%" src="https://i.stack.imgur.com/RJj4x.png">
</p>

32% width each (perfect size to just barely fit all 3 images side-by-side):
<p align="center" width="100%">
    <img width="32%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="32%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="32%" src="https://i.stack.imgur.com/RJj4x.png">
</p>

31% width each:
<p align="center" width="100%">
    <img width="31%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="31%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="31%" src="https://i.stack.imgur.com/RJj4x.png">
</p>

30% width each:
<p align="center" width="100%">
    <img width="30%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="30%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="30%" src="https://i.stack.imgur.com/RJj4x.png">
</p> 
```

产生这个：

[![在此处输入图像描述](../Images/3a34e6d238851fd0a0d6e0b554ff4f20.png)](https://i.stack.imgur.com/gzMc3.jpg)

我将`<p>`上面的所有段落元素与`center`对齐，但您也可以对齐`left`或`right`，如前面的示例所示，以强制图像行也以这种方式对齐。例子：

这：

```
Align the whole row of images to the right this time:
<p align="right" width="100%">
    <img width="25%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="25%" src="https://i.stack.imgur.com/RJj4x.png">
    <img width="25%" src="https://i.stack.imgur.com/RJj4x.png">
</p> 
```

产生这个（根据`align`上面设置的属性对齐整行图像，或者在这种情况下*向右*对齐）。通常，`center`如上述示例中所做的那样，是优选的。

[![在此处输入图像描述](../Images/c347f36d8cfcfb6b710d6b38bf38a13f.png)](https://i.stack.imgur.com/mfc5Z.png)

## 1.4\. 使用 Markdown 表来改善奇数尺寸/奇数形状图像的垂直间距：

有时，对于尺寸奇特或形状不同的图像，仅使用上面的“图像行”方法会产生看起来略显尴尬的结果。

此代码生成两行图像，它们的水平间距很好，但垂直间距很差。这段代码：

```
<p align="center" width="100%">
    <img width="32%" src="photos/pranksta1.jpg">
    <img width="32%" src="photos/pranksta2.jpg">
    <img width="32%" src="photos/pranksta3.jpg">
</p>
<p align="center" width="100%">
    <img width="32%" src="photos/pranksta4.jpg">
    <img width="32%" src="photos/pranksta5.jpg">
    <img width="32%" src="photos/pranksta6.jpg">
</p> 
```

产生这个，因为第 1 行中的最后一个图像（“pranksta3.jpg”）是一个非常高的图像，其高度是其他图像的 2 倍：

[![在此处输入图像描述](../Images/60e45557fad0f7540ec10210da81036e.png)](https://i.stack.imgur.com/9ze5X.jpg)

因此，将这两行图像放在一个降价表中会强制使用漂亮的垂直间距。请注意，在下面的降价表中，每个图像都设置了一个 HTML`width`属性设置为 100%。这是因为它*与图像所在的表格单元格*相关，不再与页面列宽相关。由于我们希望每个图像都填充每个单元格的整个宽度，因此我们将它们的宽度全部设置为`width="100%"`.

这个带有图像的降价表：

```
|                                               |                                               |                                               |
|-----------------------------------------------|-----------------------------------------------|-----------------------------------------------|
| <img width="100%" src="photos/pranksta1.jpg"> | <img width="100%" src="photos/pranksta2.jpg"> | <img width="100%" src="photos/pranksta3.jpg"> |
| <img width="100%" src="photos/pranksta4.jpg"> | <img width="100%" src="photos/pranksta5.jpg"> | <img width="100%" src="photos/pranksta6.jpg"> | 
```

产生这个，在我看来，它看起来更好，间距也更好，因为每行图像的垂直间距也居中：

[![在此处输入图像描述](../Images/9f51f64555806b7112de0e6c789931a3.png)](https://i.stack.imgur.com/QikmC.jpg)

* * *

# 2\. 使用现代 CSS 在您还可以控制 CSS 样式的任何 Markdown 文档中居中和对齐图像：

这适用于任何 Markdown 文件，例如[GitHub Pages](https://pages.github.com/)网站，您可以完全控制 CSS 样式。这不适用于任何 GitHub`*.md`降价文件，例如 a `readme.md`，因此，因为 GitHub 显式扫描并禁用您尝试使用的所有自定义 CSS 样式。往上看。

## TLDR；

使用此 HTML/CSS 来添加和居中图像，并将其大小设置为 markdown 文件中屏幕空间宽度的 60%，这通常是一个很好的起始值：

```
<img src="https://i.stack.imgur.com/RJj4x.png"
     style="display:block;float:none;margin-left:auto;margin-right:auto;width:60%"> 
```

将 CSS 值更改为`width`您想要的任何百分比，或者将其完全删除以使用 markdown 默认大小，如果图像大于屏幕，我认为它是屏幕宽度的 100%，否则它是实际图像宽度。

完毕！

或者，继续阅读以获取更多信息。

## 这里有各种 HTML 和 CSS 选项，它们可以在 markdown 文件中完美运行，只要 CSS 没有被明确禁止：

## 1\. 在 Markdown 文件中居中并配置（调整大小）所有图像：

只需将其复制并粘贴到 Markdown 文件的顶部即可居中并调整文件中所有图像的大小（然后只需使用正常的 Markdown 语法插入您想要的任何图像）：

```
<style>
img
{
    display:block;
    float:none;
    margin-left:auto;
    margin-right:auto;
    width:60%;
}
</style> 
```

或者，这里是与上面相同的代码，但带有详细的 HTML 和 CSS 注释来准确解释发生了什么：

```
<!-- (This is an HTML comment). Copy and paste this entire HTML `<style>...</style>` element (block)
to the top of your markdown file -->
<style>
/* (This is a CSS comment). The below `img` style sets the default CSS styling for all images
hereafter in this markdown file. */
img
{
    /* Default display value is `inline-block`. Set it to `block` to prevent surrounding text from
    wrapping around the image. Instead, `block` format will force the text to be above or below the
    image, but never to the sides. */
    display:block;
    /* Common float options are `left`, `right`, and `none`. Set to `none` to override any previous
    settings which might have been `left` or `right`. `left` causes the image to be to the left,
    with text wrapped to the right of the image, and `right` causes the image to be to the right,
    with text wrapped to its left, so long as `display:inline-block` is also used. */
    float:none;
    /* Set both the left and right margins to `auto` to cause the image to be centered. */
    margin-left:auto;
    margin-right:auto;
    /* You may also set the size of the image, in percent of width of the screen on which the image
    is being viewed, for example. A good starting point is 60%. It will auto-scale and auto-size
    the image no matter what screen or device it is being viewed on, maintaining proporptions and
    not distorting it. */
    width:60%;
    /* You may optionally force a fixed size, or intentionally skew/distort an image by also
    setting the height. Values for `width` and `height` are commonly set in either percent (%)
    or pixels (px). Ex: `width:100%;` or `height:600px;`. */
    /* height:400px; */
}
</style> 
```

现在，是否使用 markdown 插入图像：

```
![](https://i.stack.imgur.com/RJj4x.png) 
```

或您的降价文件中的 HTML：

```
<img src="https://i.stack.imgur.com/RJj4x.png"> 
```

...它将自动居中并调整为屏幕视图宽度的 60%，如上面 HTML 和 CSS 中的注释所述。*（当然 60% 的大小也很容易改变，我在下面提供了简单的方法来逐个图像地进行更改）。*

## 2\. 根据具体情况集中和配置图像，一次一张：

无论您是否已将上述`<style>`块复制并粘贴到 Markdown 文件的顶部，这也将起作用，因为它会覆盖并优先于您可能在上面设置的任何文件范围样式设置：

```
<img src="https://i.stack.imgur.com/RJj4x.png" style="display:block;float:none;margin-left:auto;margin-right:auto;width:60%"> 
```

你也可以像这样在多行上格式化它，它仍然可以工作：

```
<img src="https://i.stack.imgur.com/RJj4x.png"
     alt="this is an optional description of the image to help the blind and show up in case the
          image won't load"
     style="display:block; /* override the default display setting of `inline-block` */
            float:none; /* override any prior settings of `left` or `right` */
            /* set both the left and right margins to `auto` to center the image */
            margin-left:auto;
            margin-right:auto;
            width:60%; /* optionally resize the image to a screen percentage width if you want too */
            "> 
```

## 3\. 除了以上所有，您还可以创建 CSS 样式*类*来帮助对单个图像进行样式化：

将整个内容添加到降价文件的顶部。

```
<style>

/* By default, make all images center-aligned, and 60% of the width
of the screen in size */
img
{
    display:block;
    float:none;
    margin-left:auto;
    margin-right:auto;
    width:60%;
}

/* Create a CSS class to style images to left-align, or "float left" */
.leftAlign
{
    display:inline-block;
    float:left;
    /* provide a 15 pixel gap between the image and the text to its right */
    margin-right:15px;
}

/* Create a CSS class to style images to right-align, or "float right" */
.rightAlign
{
    display:inline-block;
    float:right;
    /* provide a 15 pixel gap between the image and the text to its left */
    margin-left:15px;
}

</style> 
```

现在，您的`img`CSS 块已将图像的默认设置设置为居中，尺寸为屏幕空间宽度的 60%，但您可以使用`leftAlign`和`rightAlign`CSS 类逐个图像覆盖这些设置。

例如，此图像将**居中对齐，大小为 60%**（我在上面设置的默认值）：

```
<img src="https://i.stack.imgur.com/RJj4x.png"> 
```

这张图片将是**左对齐的**，但是，使用`leftAlign`我们刚刚在上面创建的 CSS 类，文本会在它的右边换行！

```
<img src="https://i.stack.imgur.com/RJj4x.png" class="leftAlign"> 
```

它可能看起来像这样：

[![在此处输入图像描述](../Images/1fb85727131652fe5d241a62ef17fb60.png)](https://i.stack.imgur.com/jaU2j.png)

但是，您仍然可以通过**属性****覆盖其任何 CSS 属性`style`**，例如宽度，如下所示：

```
<img src="https://i.stack.imgur.com/RJj4x.png" class="leftAlign" style="width:20%"> 
```

现在你会得到这个：

[![在此处输入图像描述](../Images/15c06271e493be9cac767bb8d76f68ee.png)](https://i.stack.imgur.com/uS5FK.png)

## 4\. 创建 3 个 CSS 类，但不要更改`img`markdown 默认值

我们刚刚在上面展示的另一个选项，我们修改了默认`img` `property:value`设置并创建了 2 个类，是只保留所有默认的 Markdown`img`属性，但创建 3 个自定义 CSS 类，如下所示：

```
<style>

/* Create a CSS class to style images to center-align */
.centerAlign
{
    display:block;
    float:none;
    /* Set both the left and right margins to `auto` to cause the image to be centered. */
    margin-left:auto;
    margin-right:auto;
    width:60%;
}

/* Create a CSS class to style images to left-align, or "float left" */
.leftAlign
{
    display:inline-block;
    float:left;
    /* provide a 15 pixel gap between the image and the text to its right */
    margin-right:15px;
    width:60%;
}

/* Create a CSS class to style images to right-align, or "float right" */
.rightAlign
{
    display:inline-block;
    float:right;
    /* provide a 15 pixel gap between the image and the text to its left */
    margin-left:15px;
    width:60%;
}

</style> 
```

当然，像这样使用它们：

```
<img src="https://i.stack.imgur.com/RJj4x.png" class="centerAlign" style="width:20%"> 
```

注意我是如何`width`使用上面的 CSS`style`属性手动设置属性的，但是如果我想做一些更复杂的事情，我还可以创建一些像这样的额外类，将它们添加到上面的`<style>...</style>`块中：

```
/* custom CSS class to set a predefined "small" size for an image */
.small
{
    width:20%;
    /* set any other properties, as desired, inside this class too */
} 
```

现在您可以将多个类分配给同一个对象，就像这样。只需[用空格而不是逗号分隔类名](https://www.ironpaper.com/webintel/articles/assign-two-css-classes-together-for-one-object/)。如果设置发生冲突，我相信*最后*出现的设置将生效，覆盖任何先前设置的设置。如果您在同一个 CSS 类或同一个 HTML 属性中多次设置相同的 CSS 属性，情况也应该如此`style`。

```
<img src="https://i.stack.imgur.com/RJj4x.png" class="centerAlign small"> 
```

## 5\. 合并 CSS 类中的通用设置：

最后一个技巧是我在这个答案中学到的：[如何使用 CSS 以不同的方式设置多个图像的样式？](https://stackoverflow.com/questions/27697549/how-can-i-use-css-to-style-multiple-images-differently/27701152#27701152). 正如您在上面看到的，所有 3 个 CSS`align`类都将图像宽度设置为 60%。因此，如果您愿意，可以像这样一次性设置此通用设置，然后您可以为每个类设置特定设置：

```
<style>

/* set common properties for multiple CSS classes all at once */
.centerAlign, .leftAlign, .rightAlign {
    width:60%;
}

/* Now set the specific properties for each class individually */

/* Create a CSS class to style images to center-align */
.centerAlign
{
    display:block;
    float:none;
    /* Set both the left and right margins to `auto` to cause the image to be centered. */
    margin-left:auto;
    margin-right:auto;
}

/* Create a CSS class to style images to left-align, or "float left" */
.leftAlign
{
    display:inline-block;
    float:left;
    /* provide a 15 pixel gap between the image and the text to its right */
    margin-right:15px;
}

/* Create a CSS class to style images to right-align, or "float right" */
.rightAlign
{
    display:inline-block;
    float:right;
    /* provide a 15 pixel gap between the image and the text to its left */
    margin-left:15px;
}

/* custom CSS class to set a predefined "small" size for an image */
.small
{
    width:20%;
    /* set any other properties, as desired, inside this class too */
}

</style> 
```

* * *

# 更多细节：

## 1\. 我对 Markdown 中 HTML 和 CSS 的思考

就我而言，任何可以写在降价文档中并获得所需结果的东西都是我们所追求的，而不是一些“纯降价”语法。

在 C 和 C++ 中，编译器编译为汇编代码，然后将汇编编译为二进制。但是，有时您需要只有汇编才能提供的低级控制，因此您可以直接在 C 或 C++ 源文件中编写内联汇编。汇编是“低级”语言，它可以直接在 C 和 C++ 中编写。

降价也是如此。Markdown 是一种高级语言，它被解释为 HTML 和 CSS。然而，在我们需要额外控制的地方，我们可以在我们的 markdown 文件中“内联”较低级别的 HTML 和 CSS，它仍然会被正确解释。因此，从某种意义上说，HTML 和 CSS*是*有效的“降价”语法。

因此，要在 Markdown 中居中图像，请使用 HTML 和 CSS。

## 2、markdown中的标准图片插入：

如何使用默认的“幕后”HTML 和 CSS 格式在 Markdown 中添加基本图像：

这个降价：

```
![](https://i.stack.imgur.com/RJj4x.png) 
```

将产生这个输出：

![](../Images/6488b07da32a82a23265b86f4b52bb91.png)

这是[我制作的射击六轴飞行器](https://www.electricrcaircraftguy.com/2016/05/battlebots-season-2-buzz-fire-drone.html)。

您还可以选择在左方括号中添加描述。老实说，我什至不确定那是做什么的，但也许它会被转换为[HTML`<img>`元素`alt`属性](https://www.w3schools.com/tags/att_img_alt.asp)，以防图像无法加载，并且可能会被盲人的屏幕阅读器阅读。所以，这个降价：

```
![this is my hexacopter I built](https://i.stack.imgur.com/RJj4x.png) 
```

也会产生这个输出：

![这是我建造的六轴飞行器](../Images/6488b07da32a82a23265b86f4b52bb91.png)

## 3\. 关于在 Markdown 中居中和调整图像大小时 HTML/CSS 中发生的情况的更多详细信息：

在 markdown 中将图像居中需要我们使用 HTML 和 CSS 可以直接提供给我们的额外控件。您可以像这样插入单个图像并将其居中：

```
<img src="https://i.stack.imgur.com/RJj4x.png"
     alt="this is my hexacopter I built"
     style="display:block;
            float:none;
            margin-left:auto;
            margin-right:auto;
            "> 
```

这里有更多信息。关于这里发生的事情：

1.  上面代码的`<img`一部分是 HTML 的“**开始标签**”，而`>`最后的部分是 HTML 的“**结束标签**”。
2.  从开始标记到结束标记的所有内容，包括在内，都构成了这个 HTML `img`“**元素**”。
3.  HTML `img` **“标签”/“元素”**用于将图像插入 HTML。
4.  元素内的每个分配都配置了一个 HTML“**属性**”。
5.  " **style" 属性**接受**CSS 样式**，所以这里的双引号内的所有内容：`style=""`是一个 CSS`property:value`键值“**声明**”。
    1.  请注意，每个 CSS“属性：值声明”由分号 ( `;`) 分隔，而此“元素”中的每个 HTML“属性”由空格 ( ) 分隔。
6.  为了让图像在我们上面的 HTML 和 CSS 代码中居中，关键的“属性”就是`src`和`style`。
7.  `alt`一个是可选的。
8.  在接受 CSS 样式的 HTML`style`属性中，关键声明都是我展示的 4 个：`display:block`、`float:none`、`margin-left:auto`和`margin-right:auto`.
    1.  如果之前没有设置该`float` **属性**，那么您可以省略此声明，但最好还是保留它以防万一。
    2.  如果首先在这里学习了如何使用 HTML 和 CSS 使图像居中：[https](https://www.w3schools.com/howto/howto_css_image_center.asp) ://www.w3schools.com/howto/howto_css_image_center.asp 。
9.  CSS 使用 C 风格的注释 ( `/* my comment */`)。

# 参考：

1.  [GeeksForGeeks：HTML | `<p>`对齐属性](https://www.geeksforgeeks.org/html-p-align-attribute/)
2.  在此处阅读有关 CSS 语法的更多信息：[https ://www.w3schools.com/css/css_syntax.asp](https://www.w3schools.com/css/css_syntax.asp)
3.  在此处阅读[“HTML 标签与元素”](https://www.tutorialrepublic.com/html-tutorial/html-elements.php)。
4.  通过点击 w3schools.com，我了解了有关 HTML 和 CSS 的所有知识。以下是一些具体的页面：
    1.  %%%%% **[https://www.w3schools.com/howto/howto_css_image_center.asp](https://www.w3schools.com/howto/howto_css_image_center.asp)**
    2.  [https://www.w3schools.com/css/css_float.asp](https://www.w3schools.com/css/css_float.asp)
        1.  [https://www.w3schools.com/css/tryit.asp?filename=trycss_layout_float2](https://www.w3schools.com/css/tryit.asp?filename=trycss_layout_float2)
    3.  [https://www.w3schools.com/css/css3_images.asp](https://www.w3schools.com/css/css3_images.asp)
    4.  [https://www.w3schools.com/tags/default.asp](https://www.w3schools.com/tags/default.asp)
    5.  HTML 和 CSS 评论：[https ://www.w3schools.com/css/css_comments.asp](https://www.w3schools.com/css/css_comments.asp)
5.  我制作的射击六轴飞行器：[https ://www.electricrcaircraftguy.com/2016/05/battlebots-season-2-buzz-fire-drone.html](https://www.electricrcaircraftguy.com/2016/05/battlebots-season-2-buzz-fire-drone.html)

* * *

## 回答 #6

> 赞同：38
> 
> 时间：2017-05-20T18:39:58.090

它在 GitHub 上对我有用

```
<p align="center">
    <img src="...">
</p> 
```

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2018-08-23T18:27:24.273

我们可以使用以下内容。请从 Git 文件夹更改`src`图像的位置，如果图像未加载，请添加替代文本：

```
 <p align="center">
    <img src="your image URL here" alt="alternate text">
 </p> 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2018-08-11T14:20:22.293

我解决图像定位问题的方法是使用 HTML 属性：

```
![Image](Image.svg){ width="800" height="600" style="display: block; margin: 0 auto" } 
```

至少在我当地的 Visual Studio Community Markdown 渲染器中，图像已正确调整大小和居中。

然后，我将更改推送到存储库，不幸的是意识到它**不适用于 GitHub README.md 文件**。不过，我会留下这个答案，因为它可能会帮助其他人。

所以最后，我最终改用了旧的 HTML 标签：

```
<img src="Image.svg" alt="Image" width="800" height="600" style="display: block; margin: 0 auto" /> 
```

但猜猜怎么了？一些 JavaScript 方法替换了我的`style`属性！我什至尝试过`class`属性并得到相同的结果！

然后我发现了以下[要点页面](https://gist.github.com/DavidWells/7d2e0e1bc78f4ac59a123ddf8b74932d)，其中使用了更多的老式 HTML：

```
<p align="center">
    <img src="Image.svg" alt="Image" width="800" height="600" />
</p> 
```

然而，这个工作正常，我想留下它而不做进一步评论......

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2018-02-09T03:19:13.930

您还可以将图像大小调整为所需的**宽度**和**高度**。例如：

```
<p align="center">
  <img src="https://anyserver.com/image.png" width="750px" height="300px"/></p> 
```

要为图像添加居中的**标题**，只需再添加一行：

```
<p align="center">This is a centered caption for the image<p align="center"> 
```

幸运的是，这适用于 README.md 和 GitHub Wiki 页面。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2020-04-14T17:21:56.970

只需转到`Readme.md`文件并使用此代码。

```
<div align="center">
<img src=https://newfastuff.com/wp-content/uploads/2019/05/bW7QXVB.png" >
<p>Perfectly balanced</p>
</div> 
```

* * *

[![在此处输入图像描述](../Images/54dbe2fbd7ccd6603bc456defebdd8a1.png)](https://i.stack.imgur.com/y9BMa.png)

* * *

`<div align=”center”&gt; [ Your content here ]</div>`适合页面中的所有内容，并根据页面的尺寸将其居中对齐。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-12-27T20:18:54.907

要扩展答案以支持本地图像，只需**替换** `FILE_PATH_PLACEHOLDER`为您的图像路径并检查它。

```
<p align="center">
  <img src="FILE_PATH_PLACEHOLDER">
</p> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-01T20:32:32.340

可以处理此问题的“纯” Markdown 方法是将图像添加到表格中，然后将单元格居中：

```
| ![Image](img.png) |
| :--: | 
```

它应该生成类似于以下内容的 HTML：

```
<table>
    <thead>
        <tr>
            <th style="text-align:center;"><img src="img.png" alt="Image"></th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-09-17T07:30:42.357

如果**修改图像**对您来说不是问题，并且

如果您知道将显示降价**的容器的大致宽度，并且**

如果**您的图像仅在一个地方使用**（例如仅在 GitHub 中使用的自述文件），

然后您可以在图像编辑器中编辑您的图像并在两侧均匀地填充它。

填充前：

[![编辑前的图像](../Images/2902ec1989fde5fe58cdda0e58e16a46.png)](https://i.stack.imgur.com/uEi2Z.png)

填充后：

[![编辑后的图像](../Images/fe399e8f1c46eded786e41706c5dda1c.png)](https://i.stack.imgur.com/w07oi.png)

原始图像（宽度 = 250 像素）：

[![原始图像](../Images/0df677ea2c29871b70415f20208cec9d.png)](https://i.stack.imgur.com/jlvCF.png)

填充图像（宽度 = 660px）：

[![填充图像](../Images/1d0fb0ea761ed1c7ad75a72a03773355.png)](https://i.stack.imgur.com/weiMm.png)

* * *

## 回答 #14

> 赞同：-17
> 
> 时间：2013-03-12T19:36:04.087

这真的很简单。

```
-> This is centered Text <- 
```

因此请记住这一点，您可以将其应用于 img 语法。

```
->![alt text](/link/to/img)<- 
```*

# android - Android从drawText获取textView

> ID：12090473
> 
> 赞同：0
> 
> 时间：2012-08-23T11:23:27.233
> 
> 标签：android

```
static String text;

        final TextView done = (TextView)findViewById(R.id.tvName);

                            public void afterTextChanged(Editable s) {
                                String text = First.getText().toString();
                                done.setText(text);
                                    }
                        }); 

    c.drawText(text, 200, 300, paint); 
```

这是来自我的应用程序的示例代码，我有一个`editText`（`First`）和一个`TextView`（`done`）吹了它，写在里面的东西就是..如果我写在Hello 中，textView`EditText`将是 Hello .. 一切正常很好..但是现在我想绘制using .. 但它不起作用.. 所以 .. 如果 TextView 是 Hello c.drawText hello .. 我尝试使用字符串但它不起作用.. 字符串是`textView``editText``textView``canvas c.drawText``text`

这是日志猫：

```
08-23 13:34:26.010: D/AndroidRuntime(21371): Shutting down VM
08-23 13:34:26.010: W/dalvikvm(21371): threadid=1: thread exiting with uncaught exception (group=0x40a6e228)
08-23 13:34:26.050: E/AndroidRuntime(21371): FATAL EXCEPTION: main
08-23 13:34:26.050: E/AndroidRuntime(21371): java.lang.NullPointerException
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.graphics.Canvas.drawText(Canvas.java:1377)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at text.app.text.StartActivity.applyFrame(StartActivity.java:157)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at text.app.text.StartActivity$2.onItemClick(StartActivity.java:106)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.widget.Gallery.onSingleTapUp(Gallery.java:960)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.GestureDetector.onTouchEvent(GestureDetector.java:594)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.widget.Gallery.onTouchEvent(Gallery.java:937)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.View.dispatchTouchEvent(View.java:5568)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2064)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1732)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2070)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1746)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1961)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1398)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.app.Activity.dispatchTouchEvent(Activity.java:2428)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1909)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.View.dispatchPointerEvent(View.java:5748)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3141)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2695)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:935)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2709)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.os.Looper.loop(Looper.java:154)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at android.app.ActivityThread.main(ActivityThread.java:4974)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at java.lang.reflect.Method.invokeNative(Native Method)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at java.lang.reflect.Method.invoke(Method.java:511)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-23 13:34:26.050: E/AndroidRuntime(21371):    at dalvik.system.NativeStart.main(Native Method)
08-23 13:34:26.130: D/dalvikvm(21371): GC_CONCURRENT freed 2452K, 32% free 10589K/15395K, paused 2ms+3ms
08-23 13:34:27.430: D/Process(21371): killProcess, pid=21371
08-23 13:34:27.450: D/Process(21371): dalvik.system.VMStack.getThreadStackTrace(Native Method)
08-23 13:34:27.450: D/Process(21371): java.lang.Thread.getStackTrace(Thread.java:599)
08-23 13:34:27.450: D/Process(21371): android.os.Process.killProcess(Process.java:807)
08-23 13:34:27.450: D/Process(21371): com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:104)
08-23 13:34:27.450: D/Process(21371): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)
08-23 13:34:27.450: D/Process(21371): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690)
08-23 13:34:27.450: D/Process(21371): dalvik.system.NativeStart.main(Native Method)
08-23 13:34:27.450: I/Process(21371): Sending signal. PID: 21371 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:34:26.463

你`static String text;`是空的，你正试图在画布上绘制它？尝试更改`String text = First.getText().toString();`为`text = First.getText().toString();`并声明`static String text;`为`static String text = "";`

是的，就像@Huang 指出的那样，代码示例不是很完整，但这应该可以解决空指针异常。

# ruby-on-rails - Rails 3.2 Gemified Engines：到达已安装的 gemified 引擎内的模块

> ID：12090474
> 
> 赞同：0
> 
> 时间：2012-08-23T11:23:28.537
> 
> 标签：ruby-on-rails, gem, rails-engines

我正在开发 Rails 应用程序的基础架构，并且正在尝试从某人现有的项目中获取一些东西。我对 Rails 有点陌生，但我阅读了关于插件和引擎等的指南。

所以我有一个gemified Engine，包含一些模块。我有一个模型说 SharedPost 试图扩展所述模块并且我得到了未初始化的常量错误

```
uninitialized constant Stake::SharedPost 
```

这是我的引擎的一些外观：

```
#file: lib/stake/shared_post.rb
module Stake
  module SharedPost
    ...
  end
end

#file: lib/stake/engine.rb    
module Stake
  class Engine < ::Rails::Engine
    isolate_namespace Stake

  end
end 
```

在我的主应用程序中

```
#file: Gemfile
...
gem 'stake'
...

#file: config/routes.rb
Pop::Application.routes.draw do
  root :to => 'home#index'

  mount Stake::Engine, :at => '/stake'
end

#file: app/models/posted.rb
class Posted < ActiveRecord::Base
  extend Stake::SharedPost
    ...
  end
end 
```

将加载主应用程序，但上面没有可用数据。当我尝试跑步时

```
rake db:seed 
```

例如，当尝试加载 Posted 模型时，我收到错误`uninitialized constant Stake::SharedPost`

我缺少什么来访问我的 gem 的命名空间模块？

编辑：我已经阅读了acts_as 模式，这似乎不是最干净的做事方式，而且我不确定如何在我的引擎上实现它。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:58:26.263

在`lib/stake.rb`你包括`lib/stake/shared_post.rb`文件？

它应该看起来像这样：

```
# file lib/stake.rb

require "stake/shared_post.rb"

module stake
    ....
end 
```

# objective-c - 如何使用 Xcode 4 从 Facebook 获取用户数据

> ID：12090477
> 
> 赞同：1
> 
> 时间：2012-08-23T11:23:35.633
> 
> 标签：objective-c, facebook, xcode4

我正在做一个应用程序，我想允许用户从 Fb 注册，所以，我想从 Facebook 获取姓名、电子邮件和性别，但如果有人可以提供帮助，我找不到获取数据的方法。

这是我的代码示例：

```
// extract the id's for which we will request the profile
    NSArray *fbids = [NSArray arrayWithObjects:@"name",@"email",@"gender", nil];

    // create the connection object
    FBRequestConnection *newConnection = [[FBRequestConnection alloc] init];

    // for each fbid in the array, we create a request object to fetch
    // the profile, along with a handler to respond to the results of the request
    for (NSString *fbid in fbids) {

        // create a handler block to handle the results of the request for fbid's profile
        FBRequestHandler handler = 
        ^(FBRequestConnection *connection, id result, NSError *error) {

            // output the results of the request
            [self requestCompleted:connection forFbID:fbid result:result error:error];

        };

        // create the request object, using the fbid as the graph path
        // as an alternative the request* static methods of the FBRequest class could
        // be used to fetch common requests, such as /me and /me/friends
        FBRequest *request = [[FBRequest alloc] initWithSession:FBSession.activeSession
                                                      graphPath:fbid];

        // add the request to the connection object, if more than one request is added
        // the connection object will compose the requests as a batch request; whether or
        // not the request is a batch or a singleton, the handler behavior is the same,
        // allowing the application to be dynamic in regards to whether a single or multiple
        // requests are occuring
        [newConnection addRequest:request completionHandler:handler];
    }

// FBSample logic 
```

// 报告任何结果。为我们提出的每个请求调用一次。- (void)requestCompleted:(FBRequestConnection *)connection forFbID:fbID 结果:(id)result 错误:(NSError *)error {

```
// not the completion we were looking for...
if (self.requestConnection &&
    connection != self.requestConnection) {
    return;
}

// clean this up, for posterity
self.requestConnection = nil;

NSString *nombre;
NSString *localizacion;
NSString *genero;
NSString *cumpleanyos;
NSString *email;

if (error) {
    // error contains details about why the request failed
    nombre = error.localizedDescription;
} else {
    // result is the json response from a successful request
    NSDictionary *dictionary = (NSDictionary *)result;
    // we pull the name property out, if there is one, and display it
    nombre = (NSString *)[dictionary objectForKey:@"name"];
    localizacion = (NSString *)[dictionary objectForKey:@"location"];
    genero = (NSString *)[dictionary objectForKey:@"gender"];
    cumpleanyos = (NSString *)[dictionary objectForKey:@"birthday"];
    email = (NSString *)[dictionary objectForKey:@"email"];
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:26:08.480

我认为问题在于：

```
NSArray *fbids = [NSArray arrayWithObjects:@"name",@"email",@"gender", nil]; 
```

您需要使用“FaceBook 用户 ID”尝试：

```
NSString *camposUsuario = @"4,6";
NSArray *fbids = [camposUsuario componentsSeparatedByString:@","]; 
```

在这种情况下，“4”和“6”是“FaceBook 用户 ID”。

如果您想请求特定用户的信息，您需要知道他的“FaceBook 用户 ID”。

# xaml - 在 VisualStateManager (WinRT XAML) 中更改 ItemTemplate 中控件的属性

> ID：12090478
> 
> 赞同：4
> 
> 时间：2012-08-23T11:23:40.050
> 
> 标签：xaml, windows-runtime, winrt-xaml, visualstatemanager

我有用于 SnapView 和 Portrait 视图的 ListView。但是，我想在这两个视图中更改我的项目模板的一些项目。VisualStateManager 似乎是执行此操作的理想场所，但我想不通。

这是我的 ListView XAML：

```
<ListView x:Name="SampleListView" ItemsSource="{Binding Samples}" Visibility="Collapsed">
    <ListView.ItemTemplate>
        <DataTemplate>
            <local:SampleBlock SampleText="{Binding ElementName=pageRoot, Path=DataContext.SampleText, Mode=TwoWay}"
                Height="70" Width="Auto" Margin="5" />
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

我想使用页面的 VisualStateManager 更改 SampleBlock 控件的**高度**和**边距。**这是我的可视化状态管理器，它显示和隐藏我的 ListView：

```
<VisualState x:Name="FullScreenPortrait">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SampleListView" Storyboard.TargetProperty="Visibility">
            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SampleGridView" Storyboard.TargetProperty="Visibility">
            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState>

<VisualState x:Name="Snapped">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SampleListView" Storyboard.TargetProperty="Visibility">
            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SampleGridView" Storyboard.TargetProperty="Visibility">
            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

有没有办法从页面的 VisualStateManager 访问项目模板，或者我应该从不同的角度进行攻击？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T13:39:58.473

您不能更改 DataTemplate 的属性，但可以将 ListView 的实际 ItemTemplate 更改为要用于捕捉视图的特定模板

```
<VisualState x:Name="Snapped">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="ItemTemplate">
            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedListViewItemTemplate}"/>
        </ObjectAnimationUsingKeyFrames>                        
    </Storyboard>
</VisualState> 
```

# c++ - 从 ini 文件中读取十六进制字符

> ID：12090482
> 
> 赞同：1
> 
> 时间：2012-08-23T11:23:49.127
> 
> 标签：c++, char, c++builder, ini

我有一个带有一些十六进制字符的ini文件，如下所示：

```
[FOO]
1=0x55
2=0x40
3=0x90 
```

首先，这是 ini 文件的正确格式，还是我应该使用 \x50？

其次，我如何阅读字符？我有这个：

```
char Frame[4]
TIniFile* IniFile;
IniFile=new TIniFile(cPath+"\\"+"setup.ini");
for( int i = 1; i < 4; i++ )
{
 Frame[i]=IniFile->ReadString("FOO",i,-1); 
} 
```

问题是 IniFile->ReadChar 不存在（我使用的是 borland c++ builder 6）。

如何将字符串（例如 0x55）转换为字符？所以我可以把它放在*Frame*数组中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:07:19.420

解决方案：

```
AnsiString string;
TIniFile* IniFile;
IniFile=new TIniFile(cPath+"\\"+"setup.ini");
for( int i = 1; i < 5; i++ )
{
 string=IniFile->ReadString("FOO",i,-1);
 Frame[i]=static_cast<char>(std::strtol(string.c_str(), 0, 16));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:31:59.860

该`\x55`符号通常在字符串文字中使用：

```
const char* s = "\x55"; 
```

写入文件`0x55`很常见，但最终取决于处理文件的代码知道它正在消耗什么。

我无法评论，`IniFile`但如果你能设法将值存储到`char[]`你可以[`std::strtol()`](http://en.cppreference.com/w/cpp/string/byte/strtol)用来获取整数值：

```
const char* s = "0x55";
long value = std::strtol(s, 0, 16); 
```

~~另外，请注意，`for`循环超出了数组的范围，`Frame`因为数组索引是从零开始的。的有效索引`Frame`是`0`，`1`并且`2`只有循环会访问`3`未定义的行为。更改为： for(int i = 0; i < 3; i++)~~

请注意，`for`循环不会填充 的第一个元素`Frame`，因为数组索引是从零开始的（不确定这是否是故意的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T02:32:34.923

由于您使用的是 VCL，因此您可以使用`StrToInt...()`支持 C++ 中的符号的函数系列，`0xXX`然后将结果转换为`char`，例如：

```
for( int i = 0; i < 4; i++ )
{
    Frame[i] = (char) StrToIntDef(IniFile->ReadString("FOO", i+1, ""), -1);
} 
```

或者：

```
for( int i = 0; i < 4; i++ )
{
    Frame[i] = (char) IniFile->ReadString("FOO", i+1, "").ToIntDef(-1);
} 
```

# c# - GridView Column TextWrap 类似于 c# windows 中的 Excel

> ID：12090483
> 
> 赞同：0
> 
> 时间：2012-08-23T11:23:50.167
> 
> 标签：c#, windows, gridview

我有一个网格视图，其中包含来自数据库的有点长的列名。所以我想像我们在多行的 Excel 中所做的那样进行包装，而不是使列适合长度。我用了

```
dataGridView1.Columns["abcdefghijklmnop"].AutoSizeMode = DataGridViewAutoSizeColumnMode.DisplayedCells;
dataGridView1.Columns["abcdefghijklmnop"].DefaultCellStyle.WrapMode=DataGridViewTriState.True;
dataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells; 
```

当我这样做时，我能够使列长度适合文本长度。但我希望它是多行的。

示例：应该是这样的

```
-------------------------------------------------
      | abcde | klmno | uvwxy |
      | fghij | pqrst | z     |
-------------------------------------------------
Team1 |       |       |       |
Team2 |       |       |       |
TeamN |       |       |       |
------------------------------------------------- 
```

现在它是这样来的

```
-------------------------------------------------
      | abcdefghij | klmnopqrst | uvwxyz |
      |            |            |        |
-------------------------------------------------
Team1 |       |       |       |
Team2 |       |       |       |
TeamN |       |       |       |
------------------------------------------------- 
```

这些是我需要 ![在此处输入图像描述](../Images/950a4377a4fee448665ac856fab619d7.png) 帮助的属性！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:44:44.343

您可以通过多种方式进行操作，例如：

```
![dataGridView1.Columns\[0\].HeaderText = "VeryLong " + "LongLong" + Environment.NewLine + "LongLongLong";][1] 
```

![在此处输入图像描述](../Images/ed7668f5434e5def77abc76228a02d9b.png) 或者

```
dataGridView.ColumnHeadersHeightSizeMode = 
    DataGridViewColumnHeadersHeightSizeMode.AutoSize;

foreach (DataGridViewColumn column in dataGridView.Columns)
{
    column.HeaderCell.Style.WrapMode= DataGridViewTriState.True;
} 
```

最后通过手动编辑datagridview列：

![在此处输入图像描述](../Images/b07cc3f7f57826a1ade1f6b771451ba6.png)

# ios - iOS消息应用中使用的TextField

> ID：12090484
> 
> 赞同：4
> 
> 时间：2012-08-23T11:23:52.623
> 
> 标签：ios, messaging, textfield

我想要一个类似于 iPhone 中股票消息应用程序的文本字段。文本字段应该具有相同的外观并且应该可以扩展以允许多行编辑。您能否建议一种在我的应用程序中获取此功能的方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:54:49.177

使用 UITextField。

要获取文本字段的高度，请使用[`-sizeWithFont:constrainedToSize:lineBreakMode:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3aconstrainedToSize%3alineBreakMode%3a).

要获得 Apple 文本字段的外观，请在文本字段后面放置一个看起来像 Apple 文本字段的图像。请参阅[`-resizableImageWithCapInsets:`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets%3a)以使图像正确拉伸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:00:26.507

看看这个：

[UIBubbleTableView](http://www.cocoacontrols.com/platforms/ios/controls/uibubbletableview)

* * *

**编辑 ：**

上一个链接是针对“气泡样式”的表格视图。如果您想要实际键入消息的视图，这就是：

[HPGrowingTextView](http://www.cocoacontrols.com/platforms/ios/controls/hpgrowingtextview)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-19T11:28:05.510

***对于正在搜索库的其他人，但这里提到的那些有很多错误***

这是一个图书馆：

## [SlackTextViewController](https://github.com/slackhq/SlackTextViewController)

一个插入`UIViewController`式子类，具有不断增长的文本输入视图和其他有用的消息传递功能。旨在替代`UITableViewController`& `UICollectionViewController`。

![在此处输入图像描述](../Images/4180bc1b4eaf6324d2127ee19b21200b.png)

# c# - 如何将oracle返回的值存储在c#List中？

> ID：12090487
> 
> 赞同：-3
> 
> 时间：2012-08-23T11:24:04.230
> 
> 标签：c#, oracle

我想将 oracle 表中的返回值存储在 C# 字符串列表中。

我的查询将返回这么多记录，我想将所有返回的记录存储在 C#`List<string>`中。

任何人都可以对此提出一些想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:34:46.680

由于您只需要一个想法，您可以使用[OracleDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracledataadapter.aspx)`DataTable`从您的数据库中填写一个。稍后您可以使用对其调用的扩展方法`AsEnumerable`来`DataTable`获取`IEnumerable`，然后您可以使用扩展方法将其转换为列表`ToList`。现在你有一个来自数据库的数据**列表**。

```
List<DataRow> list = dt.AsEnumerable().ToList(); 
```

如果您需要一个列表，`string`您可以在您的 LINQ 查询上使用 LINQ 查询`DataTable`，将结果投影到匿名类型的`string`字段，然后`.ToList()`在其上使用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:29:21.967

如果您正在调用任何存储过程或从查询中返回 DataSet，那么您可以在 Foreach 循环中遍历 DataSet 中的 DataTable 中的 Rows，并继续将值存储在 C# List 中。

# c - 试图将一些数字放入 char 数组中

> ID：12090489
> 
> 赞同：2
> 
> 时间：2012-08-23T11:24:12.403
> 
> 标签：c

我正在尝试创建一个由一些字母和数字组成的 char 数组（该函数最初要复杂得多，但我一直在简化它以找出它为什么不能正常工作）。所以我有一个 char 数组，我在其中放置了 2 个字符，并尝试向其中添加一些数字。由于我无法弄清楚的原因，这些数字不会添加到数组中。这可能真的很愚蠢，但我是 C 新手，所以这里是简化的代码。非常感谢任何帮助，谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char some_string[20];

char *make_str() {
  some_string[0] = 'a';
  some_string[1] = 'x';
  int random = 0;
  int rand_copy = 0;
  random = (rand());
  rand_copy = random;
  int count = 2;
  while ( rand_copy > 0 ) {
    rand_copy = rand_copy / 10;
    ++count;
  }
  int i=2;
  for (i=2; i<count; i++) {
    some_string[i] = random%10;
    random = random/10;
  }
  return (some_string);
}    

int main(int argc, const char *argv[]) {
  printf("the string is: %s\n",make_str());
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:49:49.827

你有很多问题：

1.  结果字符串不是以零结尾的。添加`some_string[i] = '\0';`以解决此问题
2.  字符 ( `char`) 类似于“字母”，但`random % 10`会产生一个数字 ( `int`)，当转换为字符时会产生控制代码（ASCII 字符 0-9 是控制代码）。你最好用`some_string[i] = (random % 10) + '0';`
3.  您使用的是固定长度的字符串（20 个字符），这可能就足够了，但可能会导致很多问题。如果您是初学者并且还没有学习动态内存分配，那么现在就可以了。但请记住，固定长度的缓冲区是 C 代码出现错误的 10 大原因之一。如果您必须使用固定长度的缓冲区（这样做有正当理由），请始终检查您是否没有超出缓冲区。使用预定义的常量作为缓冲区长度。
4.  除非您练习的全部目的是尝试将数字转换为字符串，否则请使用 libc 函数，例如`snprintf`将任何内容打印到字符串中。
5.  不要使用全局变量 ( `some_string`)，如果你这样做（对于一个小例子来说没关系），返回这个值是没有意义的。

稍微好一点的版本：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define BUF_LENGTH 20
char some_string[BUF_LENGTH];

char *make_str() {
    some_string[0] = 'a';
    some_string[1] = 'x';
    int random = rand();
    int rand_copy = random;
    int count = 2;
    while (rand_copy > 0) {
        rand_copy = rand_copy / 10;
        ++count;
    }
    int i;
    for (i = 2; i < count; i++) {
        /* check for buffer overflow. -1 is for terminating zero */
        if (i >= BUF_LENGTH - 1) {
            printf("error\n");
            exit(EXIT_FAILURE);
        }
        some_string[i] = (random % 10) + '0';
        random = random / 10;
    }
    /* zero-terminate the string */
    some_string[i] = '\0';
    return some_string;
}    

int main(int argc, const char *argv[]) {
  printf("the string is: %s\n",make_str());
  return 0;
} 
```

# android - android BookShelf 问题下载 quaere 库

> ID：12090493
> 
> 赞同：4
> 
> 时间：2012-08-23T11:24:26.177
> 
> 标签：android

[我在http://www.codeproject.com/Articles/389071/Create-a-dynamic-shelfview-in-Android](http://www.codeproject.com/Articles/389071/Create-a-dynamic-shelfview-in-Android)上找到了一个书架项目。

我下载了代码并构建了代码，但库有问题，所以我尝试下载库并从项目中引用，但我在网上找不到 quaere.jar。

在项目中，他提到了一个链接（http://quaere.codehaus.org/），但我没有找到 jar。

请帮助我在哪里可以下载jar。

# c - 使用插入排序查找第 k 个最小元素

> ID：12090495
> 
> 赞同：1
> 
> 时间：2012-08-23T11:24:42.450
> 
> 标签：c, insertion-sort

我试图编写代码以使用插入排序查找第 k 个最小元素，但我的代码出现运行时错误。我们在第一行给出了查询数（比如 n）和 k（要找出的第 k 个最小数）。然后给定 n 个数字，如果遇到 -1，我们需要打印迄今为止遇到的第 k 个最小的数字（之前的 -1 除外）。

我尝试根据问题进行少量编辑后使用来[实现。](http://www.geeksforgeeks.org/archives/10379)

（我没有发布代码，因为它足够长，任何人都可以阅读并且这个问题不是家庭作业）任何人都可以告诉所需的编辑吗？

好的，我发布我的代码：-

```
#include <stdio.h>
#include <stdlib.h>

#define ARRAY_SIZE(arr) sizeof(arr)/sizeof(arr[0])

/* just add elements to test */
/* NOTE: A sorted array results in skewed tree */
int ele[] = { 20, 8, 22, 4, 12, 10, 14 };

/* same alias */
typedef struct node_t node_t;

/* Binary tree node */
struct node_t
{
    int data;

    node_t* left;
    node_t* right;
};

/* simple stack that stores node addresses */
typedef struct stack_t stack_t;

/* initial element always NULL, uses as sentinal */
struct stack_t
{
    node_t*  base[ARRAY_SIZE(ele) + 1];
    int      stackIndex;
};

/* pop operation of stack */
node_t *pop(stack_t *st)
{
    node_t *ret = NULL;

    if( st && st->stackIndex > 0 )
    {
        ret = st->base[st->stackIndex];
        st->stackIndex--;
    }

    return ret;
}

/* push operation of stack */
void push(stack_t *st, node_t *node)
{
    if( st )
    {
        st->stackIndex++;
        st->base[st->stackIndex] = node;
    }
}

/* Iterative insertion
   Recursion is least preferred unless we gain something
*/
node_t *insert_node(node_t *root, node_t* node)
{
    /* A crawling pointer */
    node_t *pTraverse = root;
    node_t *currentParent = root;

    // Traverse till appropriate node
    while(pTraverse)
    {
        currentParent = pTraverse;

        if( node->data < pTraverse->data )
        {
            /* left subtree */
            pTraverse = pTraverse->left;
        }
        else
        {
            /* right subtree */
            pTraverse = pTraverse->right;
        }
    }

    /* If the tree is empty, make it as root node */
    if( !root )
    {
        root = node;
    }
    else if( node->data < currentParent->data )
    {
        /* Insert on left side */
        currentParent->left = node;
    }
    else
    {
        /* Insert on right side */
        currentParent->right = node;
    }

    return root;
}

/* Elements are in an array. The function builds binary tree */
node_t* binary_search_tree(node_t *root, int keys[], int const size)
{
    int iterator;
    node_t *new_node = NULL;

    for(iterator = 0; iterator < size; iterator++)
    {
        new_node = (node_t *)malloc( sizeof(node_t) );

        /* initialize */
        new_node->data   = keys[iterator];
        new_node->left   = NULL;
        new_node->right  = NULL;

        /* insert into BST */
        root = insert_node(root, new_node);
    }

    return root;
}

node_t *k_smallest_element_inorder(stack_t *stack, node_t *root, int k)
{
    stack_t *st = stack;
    node_t *pCrawl = root;

    /* move to left extremen (minimum) */
    while( pCrawl )
    {
        push(st, pCrawl);
        pCrawl = pCrawl->left;
    }

    /* pop off stack and process each node */
    while( pCrawl = pop(st) )
    {
        /* each pop operation emits one element
           in the order
        */
        if( !--k )
        {
            /* loop testing */
            st->stackIndex = 0;
            break;
        }

        /* there is right subtree */
        if( pCrawl->right )
        {
            /* push the left subtree of right subtree */
            pCrawl = pCrawl->right;
            while( pCrawl )
            {
                push(st, pCrawl);
                pCrawl = pCrawl->left;
            }

            /* pop off stack and repeat */
        }
    }

    /* node having k-th element or NULL node */
    return pCrawl;
}

/* Driver program to test above functions */
int main(void)
{
    int n,k,elec=0,tmp;
    scanf("%d",&n);
    scanf("%d",&k);
    while (n--) {
          scanf("%d",&tmp);
          if (tmp!=-1) {
             ele[elec]=tmp;
             elec++;
          } else {
    node_t* root = NULL;
    stack_t stack = { {0}, 0 };
    node_t *kNode = NULL;

    /* Creating the tree given in the above diagram */
    root = binary_search_tree(root, ele, ARRAY_SIZE(ele));

    kNode = k_smallest_element_inorder(&stack, root, k);

    if( kNode )
    {
        printf("%d\n",kNode->data);
    }
    }}
    return 0;
} 
```

# python - Pyinotify -- 目录重命名后从原始路径引发的事件

> ID：12090498
> 
> 赞同：1
> 
> 时间：2012-08-23T11:25:03.100
> 
> 标签：python, linux, inotify, pyinotify

我使用 pyinotify 来监控我的文件系统。问题是当我重命名一个目录并在重命名的目录中创建文件时，该事件是从原始路径引发的（由 引用`event.name`）。无法弄清楚什么是错的？`add_watch`初始化观察者时标志有问题吗？目前该标志设置为`rec=True, auto_add=True`.

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:43:01.183

您需要将`IN_MOVE_SELF`事件添加到您的掩码中。

[来源](https://github.com/seb-m/pyinotify/issues/32)

# python - 使用 Python 列出可用的 com 端口

> ID：12090503
> 
> 赞同：106
> 
> 时间：2012-08-23T11:25:30.770
> 
> 标签：python, pyserial

我正在寻找一种简单的方法来列出 PC 上所有可用的 com 端口。

我找到了这种方法，但它是特定于 Windows 的：[Listing serial (COM) ports on Windows?](https://stackoverflow.com/questions/1205383/listing-serial-com-ports-on-windows)

我在 Windows 7 PC 上使用 Python 3 和 pySerial。

我在 pySerial API（[http://pyserial.sourceforge.net/pyserial_api.html](http://pyserial.sourceforge.net/pyserial_api.html)）中找到了一个`serial.tools.list_ports.comports()`列出 com 端口（正是我想要的）的函数。

```
import serial.tools.list_ports
print(list(serial.tools.list_ports.comports())) 
```

但它似乎不起作用。当我的 USB 到 COM 网关连接到 PC 时（我在设备管理器中看到 COM5），此 COM 端口不包含在`list_ports.comports()`. 相反，我只得到似乎连接到调制解调器的 COM4（我在设备管理器的 COM&LPT 部分中看不到它）！

你知道为什么它不起作用吗？您是否有其他非系统特定的解决方案？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-01-08T21:38:10.027

这是我使用的代码。

使用 Python 2 和 Python 3 在 Windows 8.1 x64、Windows 10 x64、Mac OS X 10.9.x / 10.10.x / 10.11.x 和 Ubuntu 14.04 / 14.10 / 15.04 / 15.10 上成功测试。

```
import sys
import glob
import serial

def serial_ports():
    """ Lists serial port names

        :raises EnvironmentError:
            On unsupported or unknown platforms
        :returns:
            A list of the serial ports available on the system
    """
    if sys.platform.startswith('win'):
        ports = ['COM%s' % (i + 1) for i in range(256)]
    elif sys.platform.startswith('linux') or sys.platform.startswith('cygwin'):
        # this excludes your current terminal "/dev/tty"
        ports = glob.glob('/dev/tty[A-Za-z]*')
    elif sys.platform.startswith('darwin'):
        ports = glob.glob('/dev/tty.*')
    else:
        raise EnvironmentError('Unsupported platform')

    result = []
    for port in ports:
        try:
            s = serial.Serial(port)
            s.close()
            result.append(port)
        except (OSError, serial.SerialException):
            pass
    return result

if __name__ == '__main__':
    print(serial_ports()) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2018-10-15T02:58:38.880

*在pyserial文档中基本上提到了这一点* [https://pyserial.readthedocs.io/en/latest/tools.html#module-serial.tools.list_ports](https://pyserial.readthedocs.io/en/latest/tools.html#module-serial.tools.list_ports)

```
import serial.tools.list_ports
ports = serial.tools.list_ports.comports()

for port, desc, hwid in sorted(ports):
        print("{}: {} [{}]".format(port, desc, hwid)) 
```

**结果 ：**

COM1：通讯端口 (COM1) [ACPI\PNP0501\1]

COM7：联发科 USB 端口 (COM7) [USB VID:PID=0E8D:0003 SER=6 LOCATION=1-2.1]

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-11-12T03:44:16.627

您可以使用：

`python -c "import serial.tools.list_ports;print serial.tools.list_ports.comports()"`

按已知端口过滤： `python -c "import serial.tools.list_ports;print [port for port in serial.tools.list_ports.comports() if port[2] != 'n/a']"`

在此处查看更多信息： [https ://pyserial.readthedocs.org/en/latest/tools.html#module-serial.tools.list_ports](https://pyserial.readthedocs.org/en/latest/tools.html#module-serial.tools.list_ports)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-07-13T06:21:25.470

Thomas 出色答案的一个可能改进是让 Linux 和可能的 OSX 也尝试打开端口并仅返回那些可以打开的端口。这是因为 Linux 至少将大量端口列为 /dev/ 中的文件，这些文件没有连接到任何东西。如果您在终端中运行，/dev/tty 是您正在工作的终端，打开和关闭它可能会弄乱您的命令行，因此 glob 旨在不这样做。代码：

```
 # ... Windows code unchanged ...

    elif sys.platform.startswith ('linux'):
        temp_list = glob.glob ('/dev/tty[A-Za-z]*')

    result = []
    for a_port in temp_list:

        try:
            s = serial.Serial(a_port)
            s.close()
            result.append(a_port)
        except serial.SerialException:
            pass

    return result 
```

此对 Thomas 代码的修改仅在 Ubuntu 14.04 上进行了测试。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-11-05T17:03:02.263

带有 pySerial 包的一条线解决方案。

```
python -m serial.tools.list_ports 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-08-01T18:20:09.953

改进[moylop260](https://stackoverflow.com/users/3753497/moylop260)的答案：

```
import serial.tools.list_ports
comlist = serial.tools.list_ports.comports()
connected = []
for element in comlist:
    connected.append(element.device)
print("Connected COM ports: " + str(connected)) 
```

这列出了硬件中存在的端口，包括正在使用的端口。[根据pyserial 工具文档](https://pythonhosted.org/pyserial/tools.html)，列表中存在更多信息

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-02-18T19:11:46.537

可能晚了，但可能会帮助有需要的人。

```
import serial.tools.list_ports

class COMPorts:

    def __init__(self, data: list):
        self.data = data

    @classmethod
    def get_com_ports(cls):
        data = []
        ports = list(serial.tools.list_ports.comports())

        for port_ in ports:
            obj = Object(data=dict({"device": port_.device, "description": port_.description.split("(")[0].strip()}))
            data.append(obj)

        return cls(data=data)

    @staticmethod
    def get_description_by_device(device: str):
        for port_ in COMPorts.get_com_ports().data:
            if port_.device == device:
                return port_.description

    @staticmethod
    def get_device_by_description(description: str):
        for port_ in COMPorts.get_com_ports().data:
            if port_.description == description:
                return port_.device

class Object:
    def __init__(self, data: dict):
        self.data = data
        self.device = data.get("device")
        self.description = data.get("description")

if __name__ == "__main__":
    for port in COMPorts.get_com_ports().data:
        print(port.device)
        print(port.description)

    print(COMPorts.get_device_by_description(description="Arduino Leonardo"))
    print(COMPorts.get_description_by_device(device="COM3")) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-09-24T20:27:27.683

请尝试以下代码：

```
import serial
ports = serial.tools.list_ports.comports(include_links=False)
for port in ports :
    print(port.device) 
```

首先需要导入包进行串口通信，所以：

```
import serial 
```

然后创建当前可用的所有串行端口的列表：

```
ports = serial.tools.list_ports.comports(include_links=False) 
```

然后，沿着整个列表走，您可以例如打印端口名称：

```
for port in ports :
    print(port.device) 
```

这只是一个如何获取端口列表并打印其名称的示例，但您可以使用此数据执行其他一些选项。之后尝试打印不同的变体

> 港口。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-19T20:23:27.137

试试这个代码

```
import serial.tools.list_ports
for i in serial.tools.list_ports.comports():
    print(i) 
```

它返回

```
COM1 - Port de communication (COM1)
COM5 - USB-SERIAL CH340 (COM5) 
```

如果您只是不知道端口的名称，例如 COM1

```
import serial.tools.list_ports
for i in serial.tools.list_ports.comports():
    print(str(i).split(" ")[0]) 
```

它返回

```
COM1
COM5 
```

就我而言，py 3.7 64bits

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-23T11:29:38.760

有几个选项可用：

使用 NULL lpDeviceName调用[QueryDosDevice](http://msdn.microsoft.com/en-us/library/aa365461%28VS.85%29.aspx)以列出所有 DOS 设备。然后对每个设备名依次使用 CreateFile 和[GetCommConfig](http://msdn.microsoft.com/en-us/library/aa363256%28VS.85%29.aspx)判断是否为串口。

使用 GUID_DEVINTERFACE_COMPORT 的 ClassGuid调用[SetupDiGetClassDevs](http://msdn.microsoft.com/en-us/library/ms792959.aspx)。

[WMI 也可用于 C/C++ 程序](http://msdn.microsoft.com/en-us/library/aa389762%28VS.85%29.aspx)。

[在win32 新闻组](https://groups.google.com/forum/?fromgroups#!topic/microsoft.public.win32.programmer.kernel/nBu1eL2cswk)和 CodeProject，呃，[project](http://www.codeproject.com/Articles/2609/Enumerating-serial-ports-W2K-style)上有一些对话。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-13T13:13:24.830

一些简单的东西，但我经常使用它。

```
import serial.tools.list_ports as ports

com_ports = list(ports.comports()) # create a list of com ['COM1','COM2'] 
    for i in com_ports:            
        print(i.device) # returns 'COMx' 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-29T00:33:30.410

需要注意的一件事，像这样的代码：

```
for i in serial.tools.list_ports.comports():
print(i) 
```

返回以下内容：

```
COM7 - Standard Serial over Bluetooth link (COM7) COM1 - Communications Port (COM1) COM8 - Standard Serial over Bluetooth link (COM8) COM4 - USB-SERIAL CH340 (COM4) 
```

如果您希望按顺序列出端口，并且只列出您可用的端口，请尝试：（感谢 tfeldmann）

```
 def serial_ports():
    """ Lists serial port names

        :raises EnvironmentError:
            On unsupported or unknown platforms
        :returns:
            A list of the serial ports available on the system
    """
    if sys.platform.startswith('win'):
        ports = ['COM%s' % (i + 1) for i in range(256)]
    elif sys.platform.startswith('linux') or sys.platform.startswith('cygwin'):
        # this excludes your current terminal "/dev/tty"
        ports = glob.glob('/dev/tty[A-Za-z]*')
    elif sys.platform.startswith('darwin'):
        ports = glob.glob('/dev/tty.*')
    else:
        raise EnvironmentError('Unsupported platform')

    result = []
    for port in ports:
        try:
            s = serial.Serial(port)
            s.close()
            result.append(port)
        except (OSError, serial.SerialException):
            pass
    return result 
```

这将返回以下内容：

```
['COM1', 'COM4', 'COM8'] 
```

因此，与第一个示例不同，结果是 ['COM7', 'COM1', 'COM8', 'COM4']，这次我按顺序获取了所有的 COM 端口，并且只有可用的端口。如果您按顺序需要它们并进行测试以查看它们是否可用，则非常方便。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-29T18:36:56.003

仅适用于 Windows：

```
import winreg
import itertools

def serial_ports() -> list:
    path = 'HARDWARE\\DEVICEMAP\\SERIALCOMM'
    key = winreg.OpenKey(winreg.HKEY_LOCAL_MACHINE, path)

    ports = []
    for i in itertools.count():
        try:
            ports.append(winreg.EnumValue(key, i)[1])
        except EnvironmentError:
            break

    return ports

if __name__ == "__main__":
    ports = serial_ports() 
```

# javascript - jquery 表单提交不适用于多个输入（IE 和 Firefox）

> ID：12090507
> 
> 赞同：1
> 
> 时间：2012-08-23T11:25:47.613
> 
> 标签：javascript, jquery, internet-explorer

可能很简单，但现在让我很困惑。

如果你看看这个 jsfiddle：[fiddle](http://jsfiddle.net/VNHx3/1/)

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

 <form id='adminForm'>
  <input type="text" />
  <!--<input type="password" />-->
 </form>      

 <script>
 $(document).ready( function(){
   $("#adminForm").submit(function() {
     alert('submit');
     return false;
   });

 });
</script>

</body>
</html> 
```

如果我按 ENTER 提交表单，它可以正常工作并且我会收到警报。但是，如果我随后取消注释其他输入并重试，则没有任何反应。注释哪个输入没有任何区别，似乎在 IE 和 Firefox 中，它仅在表单中有 1 个输入而不是多个输入时才有效……而在 Opera 中，它适用于多个输入。

有什么线索吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:37:32.010

好吧，是的，您需要提交按钮，但如果您不想显示它，您也可以

```
<input type="submit" style="visibility:hidden;" /> 
```

或者

```
<input type="submit" style="position:absolute;left:-9999px;width:1px;height:1px;" /> 
```

# java - Android：下载到 SD 时出现问题

> ID：12090511
> 
> 赞同：2
> 
> 时间：2012-08-23T11:25:55.090
> 
> 标签：java, android, android-sdcard

我开发了一个应用程序，用户可以在其中从服务器下载 .mp3 文件。并预定义了 mnt/sdcard/foldername 的路径以保存此类文件。我已经在 HTC、LG、三星运行了我的程序，但是当我在三星 Galaxy s2 运行相同的程序时，遇到了一个无法在 mnt/sdcard/foldername 中写入（存储）的问题并尝试了

```
 Environment.getExternalStorageDirectory().getAbsolutePath() 
```

但它显示给定路径中下载的文件名和每个文件属性的零字节。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:42:07.187

SG2 通常没有 sd 卡，而是使用内部闪存作为“外部”存储。我已经用这段代码解决了这个问题：

```
 private File initCacheDir() {
        String sdState = android.os.Environment.getExternalStorageState();
            File imageCacheDir;
            if (sdState.equals(android.os.Environment.MEDIA_MOUNTED)) {
                File sdDir = android.os.Environment.getExternalStorageDirectory();      
                imageCacheDir = new File(sdDir, "Android/data/" + App.PACKAGE_NAME + "/files/imageCache");
            }
            else
                imageCacheDir = context.getCacheDir();

            if(!imageCacheDir.exists())
                 imageCacheDir.mkdirs();        
            return imageCacheDir;
} 
```

请注意，此代码为您提供了缓存目录的位置，该目录通常位于 sd 卡上的 Android/data 文件夹中。

您将在此处找到如何使用 SG2 解决此问题的更多详细信息： [如何在三星和所有其他设备上获得正确的外部存储？](https://stackoverflow.com/questions/5524105/how-could-i-get-the-correct-external-storage-on-samsung-and-all-other-devices)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:09:20.723

试试这个

```
 if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"yourfile");
    else
        cacheDir=context.getCacheDir();
    if(!cacheDir.exists())
        cacheDir.mkdirs(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:53:40.923

我终于找到了代码

```
public void download(String urlToDownload){

URLConnection urlConnection = null;

try{

    URL url = new URL(urlToDownload);

    //Opening connection of currrent url

    urlConnection = url.openConnection();
    urlConnection.connect();

    //int lenghtOfFile = urlConnection.getContentLength();

String PATH = Environment.getExternalStorageDirectory() + "/1/";

File file = new File(PATH);
file.mkdirs();
File outputFile = new File(file, "file.mp3");
FileOutputStream fos = new FileOutputStream(outputFile);

InputStream is = url.openStream();

byte[] buffer = new byte[1024];

int len1 = 0;

while ((len1 = is.read(buffer)) != -1) {
    fos.write(buffer, 0, len1);
}

fos.close();
is.close();

System.out.println("downloaded"+urlToDownload);

}catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();

}

} 
```

来源：[链接](https://stackoverflow.com/questions/9869471/downloading-pdf-file-and-saving-to-sd-card)

# php - PHP注册无法正常工作

> ID：12090513
> 
> 赞同：-1
> 
> 时间：2012-08-23T11:26:09.513
> 
> 标签：php, sql

我正在创建的 PHP 注册页面出现错误。

```
<?php
$username = $_POST['username'];
$password = $_POST['password'];
if(isset($_POST['submit'])) {
    if($username < 6 || $password < 6){
        echo 'The username must be longer than 5 characters';   
    }

    else {
    $query = mysql_query("INSERT INTO users (username,password) VALUES ('".$username."',MD5('".$password."'))");
    }
}

?>
<form method="post">
Username: <input type="text" name="username" maxlength="20" />
<BR>Password: <input type="password" name="password" maxlength="32" />
<BR><input type="submit" name="submit" />
</form> 
```

每当我点击提交时，即使用户名和密码超过 5 个字符，它也会一直显示错误消息。

该页面链接到数据库，但这只是我遇到问题的片段。

谢谢

-尼古拉斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T11:27:46.063

您需要检查用户名和密码的长度是否 <6 而不是 $username

```
strlen($username) <6 OR strlen($password) <6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:31:27.730

```
if(strlen($username) < 6 || strlen($password) < 6){
        echo 'The username must be longer than 5 characters';   
} 
```

请检查 PHP [strlen($username)中的 php 字符串函数](http://php.net/manual/en/function.strlen.php)

# iphone - UITableView 选择状态在编辑模式下消失

> ID：12090515
> 
> 赞同：0
> 
> 时间：2012-08-23T11:26:13.223
> 
> 标签：iphone, uitableview

我有一个 UITableView 我选择多行。我希望能够滑动和删除其中的一些。

只要我滑动一个单元格，我所有选定的行都会被取消选中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:48:38.240

这不能通过使用默认单元格行为来获得..

**另一种方法是**

每当您选择任何单元格时，都会在数组中添加该行号。重新选择它必须从数组中删除该索引。选择后不久更改单元格的背景，使其看起来像被选中。

# windows-phone-7 - 如何在 WP7 文本框中实现拼写检查

> ID：12090517
> 
> 赞同：2
> 
> 时间：2012-08-23T11:26:25.247
> 
> 标签：windows-phone-7

如何在不使用文本框的输入范围的情况下在 WP7 文本框中实现拼写检查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T03:46:01.040

您可以使用 TextChanged 事件并处理在 TextBox 上输入的文本以进行拼写检查。那将是我的方法。但它会减慢您的打字和 UI 映射。最好的方法是使用 inputScope 并让设备完成您不想要的工作。希望我的回答对你有所帮助。

# sitecore - Sitecore 媒体项目和比赛条件

> ID：12090520
> 
> 赞同：2
> 
> 时间：2012-08-23T11:26:45.933
> 
> 标签：sitecore, sitecore6, race-condition, sitecore-media-library

Sitecore 在发布媒体项目时如何处理竞争条件？

**设想：**

1.  站点访问者正在下载具有 500mb mpg 文件（存储为 blob）的非版本化媒体项目。
2.  下载最多需要几分钟，最坏的情况可能以小时为单位（如果它们处于低带宽连接上）。
3.  当用户下载时，作者在媒体项目上上传新版本的 mpg 并发布。

会发生什么，为什么？

其他变体包括： 媒体项目上的安全设置更改为阻止访问者下载访问 媒体项目被删除并发布更改

我*猜*在所有这些情况下，下载都会中止，但如果是这样，服务器会发送什么响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:52:03.043

我没有确切的答案，但 Sitecore 将 blob 资产缓存在文件系统下，`/App_Data/MediaCache/`因此现有资产可能仍在该缓存中。我不确定 Sitecore 的媒体缓存机制是如何工作的，但我敢打赌，一旦资产完全存在，它会在对新资产的下一个请求中清除/重新缓存。

只是一个猜测。也许反编译内核以找到处理缓存媒体的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:39:13.107

（不是真正的答案..只是评论对于盒子来说太大了：P）

这是一个非常有趣的问题。Sitecore 的媒体性能很大程度上是通过将副本缓存到磁盘并在后续请求中从那里交付（也用于缓存原件的缩放副本，例如缩略图等）来完成的。一旦以某种方式编辑原始项目然后重新发布，文件就会被刷新。

我不确定（并且很感兴趣）这将如何影响大文件，因为我认为很多人认为媒体可能是较小的文件，例如图像或 pdf 等，如果损坏，用户只会重新请求，以及这如何影响当前的文件在项目本身更新时进行流式传输。我确信当时的很多工作是 IIS/ASP.NET 流而不是 Sitecore 本身。

我不确定 Sitecore 的缓存是否会保护/屏蔽这种情况，但这应该非常简单，可以使用更大的媒体文件进行测试。对结果感兴趣（因为我亲自交付的较大文件是由 CDN 或专门的流媒体合作伙伴完成的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T18:33:37.710

这不是一个明确的答案，我同意斯蒂芬关于专门的流媒体合作伙伴的看法。我想知道这样的系统如何处理这个问题。

Sitecore 似乎为每个发布和访问的修订创建了一个新的媒体缓存文件，因此 HTTP 传输可以在系统写入新文件时继续读取旧文件。如果禁用缓存，不确定是否/如何工作（我没有尝试禁用缓存）。否则，在读取时尝试写入可能会被阻止或干扰读取。

请注意，即使您没有版本，您也会获得一个新的修订 ID。并且它可能是导致新缓存条目的发布，而不是新修订的出现。

# html - html动态

> ID：12090522
> 
> 赞同：0
> 
> 时间：2012-08-23T11:26:48.403
> 
> 标签：html, ajax

```
 <input list="browsers" name="browser" />
 <datalist id="Names">
 <option value="AD">
 <option value="AB">
 <option value="CD">
 <option value="DA">
 <option value="EB">
 </datalist> 
```

当用户开始输入输入时，它应该连接到数据库并获取结果并显示在下拉菜单中。

不确定使用哪种语言来满足需求

有没有办法解决这个问题？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:32:37.487

我假设您想要做的是在搜索框中自动完成或类似的东西。在这种情况下，您将需要使用 javascript 来检测客户端的更改并将其发送到以 JSON 格式返回结果的服务器。然后，将 JSON 转换为 html 选项。这是一些使用 jquery 的有用工具和概念[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:35:29.877

如果您在服务器端自动生成此 HTML，那么我建议您查看用于 HTML 生成的[Java Server Pages](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPIntro.html)和用于数据库端的[JDBC 。](http://docs.oracle.com/javase/tutorial/jdbc/basics/)您将使用 JDBC 与数据库对话并提取合适的值，并使用 JSP 将其呈现为 HTML 并呈现。

由于您需要一些 AJAX 功能，我可以向您[介绍 DWR](http://directwebremoting.org/dwr/index.html)，它为在浏览器中公开 Java 对象提供了一个非常好的框架，并且可以处理这类事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T11:32:34.407

使用 PHP：

```
<input list="browsers" name="browser" />
 <datalist id="Names">
 <?php
    // query the database and store the options in the array $names
    foreach($names as $name) {
        echo "<option value=" . $name . ">";
    }
 ?>
 </datalist> 
```

# iphone - 在Objective c中两行文本的末尾添加一个链接/ UIbutton

> ID：12090537
> 
> 赞同：0
> 
> 时间：2012-08-23T11:27:48.363
> 
> 标签：iphone, objective-c, ios, uibutton, uilabel

我有一长串可能适合 1 行或多行的文本。我需要做的是显示前两行，如果文本比这更长 - 添加一个“更多”按钮/链接，它将指向另一个将显示全文的页面/视图控制器。

我正在考虑添加一个`UILabel`，计算文本大小，如果它太大 - 添加一个 UIButton 将指向下一个控制器。

问题在于： 1\. 使用自动换行，行中的最后一个单词可能在行尾或行中间结束——我不知道在哪里放置 "more" `UIButton`。2\. 文本可能是 LTR 和 RTL，所以我不知道在哪里放置“更多”按钮（在左侧或右侧）。

有没有办法从一个链接`UILabel`？我应该使用其他的东西`UILabel + UIButton`吗？

任何建议将不胜感激。

谢谢！

**LTR 示例：**

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Nulla facilisis... -MORE-

**RTL 示例：**

> אם עוד אחרים בגרסה。תנך יכול פולנית או , הארץ העברית על אנא, החלל ...-MORE-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:58:02.893

请尝试使用网络视图。要加载的 HTML 应该是：

```
Your short text here...<a href="moreurl">-MORE-</a> 
```

并在 UIWebviewDelegate 中采用此方法

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
      NSURL *url = [request URL];
      if([[url absoluteString] isEqualToString:@"moreurl"])
     {
        //change html string to full string (without more)
        [webView loadHTMLString:@"Your full text here." baseURL:nil];
     }
      return YES;   
} 
```

希望有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T14:49:58.440

您也可以使用[TTTAttributedLabel](https://github.com/TTTAttributedLabel/TTTAttributedLabel "TTT属性标签")。它有一个非常有用的属性，称为`attributedTruncationToken`.

# backbone.js - ajax 在其他视图中的主干视图。事件不起作用

> ID：12090539
> 
> 赞同：0
> 
> 时间：2012-08-23T11:28:06.623
> 
> 标签：backbone.js, backbone-events, backbone-relational

我有主干视图。它加载内容（使用 AJAX 的主干组件）：

```
 render: function () {
            var self = this;
            $.get('/Blog', request, function (data) {
                self.$el.html(data);
                model.trigger('blogContainerLoaded');
            });
        } 
```

组件代码：

```
 window.App = {

init: function (options) {
    var BlogModel = Backbone.Model.extend({
    });

    var model = new BlogModel();

    var BlogController = Backbone.Router.extend({
        routes: {
            "": "posts",
            "posts": "posts",
            "posts/:postId": "post",
            "posts/:postId/": "post",
        },
        posts: function (anchor) {
            window.App.views.posts.render(anchor);
        },
        post: function (postId, commentId) {
            window.App.views.post.render(postId, commentId);
        },
    });

    var controller = new BlogController();
    if (notLoaded) {
        var views = {
            posts: new PostListView({ model: model, controller: controller }),
            post: new PostView({ model: model, controller: controller }),
        };
        this.views = views;
        Backbone.history.start();
    }
} 
```

};

```
var PostListView = Backbone.View.extend({
el: $(".posts"),
events: {
    "click .js-edit-message": "editMessage",
    "click .js-open-post": "navigateToPost",
    "click .js-move-post": "move"
},
editMessage: function () {
    debugger;
},
navigateToPost: function () {
    debugger;
},
move: function () {
    debugger;
}, 
```

所有 html 代码都使用 ajax 加载。它有效，但事件（点击和其他）没有触发！当我加载没有 AJAX 的博客组件时 - 事件工作。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:25:23.540

您的视图很可能在您的 ajax 调用完成之前被实例化。因为 ajax 是异步的，但它确实会加载（最终）您的代码以初始化视图首先运行。因此，当您的视图希望将事件附加到您的 DOM 时，必要的元素并不存在。

这也可以解释为什么当您消除它的 ajax 部分时，代码可以工作（它现在是同步的，并且 DOM 在您初始化视图代码之前就存在。）

尝试将初始化代码放入 ajax 回调中，如下所示：（如果可能）

```
 render: function () {
        var self = this;
        $.get('/Blog', request, function (data) {
            self.$el.html(data);

            self.blogContainer = new BlogContainerView();  // Or however you do it
        });
    } 
```

另一种可能性是保留您`trigger.('blogContentLoaded')`当时的附加事件。Backbone.View 的`delegateEvents()`方法可能对您有用。

或者类似的东西。现在您可以保证 DOM 可用于您的 View 对象来附加事件。

# ruby-on-rails - 多个模型的 Rails 协会帮助

> ID：12090542
> 
> 赞同：-1
> 
> 时间：2012-08-23T11:28:16.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我能得到一些关于为我的应用程序构建关联模型的建议吗？

我基本上有一个项目模型，它将容纳各种模型：

```
one client
many partners
1 accounts 
```

我是否只是将这些模型中的每一个与项目关联起来，还是应该是某种“通过关联”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:04:20.420

我建议通过关联基础知识，然后添加一些代码以帮助您。

有大量可用信息。

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

[http://www.tutorialspoint.com/ruby-on-rails/rails-models.htm](http://www.tutorialspoint.com/ruby-on-rails/rails-models.htm)

[http://railscasts.com/episodes/3-find-through-association](http://railscasts.com/episodes/3-find-through-association)

[http://www.slideshare.net/JamesEdwardGrayII/associations-in-rails](http://www.slideshare.net/JamesEdwardGrayII/associations-in-rails)

[ruby on rails 协会新手](https://stackoverflow.com/questions/9249685/ruby-on-rails-associations-newbie)

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

哈希应该足够了......：D

阅读基础知识以及您不了解的任何内容，我们都在这里为您提供帮助:)

# gwt - 如何在不放置/启动活动（gwt）的情况下更改浏览器历史记录

> ID：12090546
> 
> 赞同：3
> 
> 时间：2012-08-23T11:28:26.750
> 
> 标签：gwt

在我的应用程序中，我有一个相对复杂的活动/地点。在活动开始时解析状态（从历史令牌到模型）会导致一些服务器交互。在用户交互时，活动只更新模型的必要部分，因此可以保护一些服务器交互 - 活动/模型具有内部状态。

有没有办法在不（重新）启动活动的情况下反映浏览器历史记录中的状态？（`History.newItem(token)`也导致活动开始）

**更新** 克里斯的解决方案“几乎”有效，但出现了另一个问题：在我的用户界面中，我有一个重置按钮（指向带有空令牌的地方的链接）。如果我在 ui 周围单击，则令牌会很好地更新，但现在重置按钮不起作用。gwt 认为它在同一个地方，所以它忽略了重置点击。在此之前，问题几乎相同：令牌和位置没有改变，因此重置按钮也不起作用。GWT 将此记录为“要求返回同一个地方”

那么有没有办法让 gwt 重新启动活动而不管位置等价性如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:46:49.243

去一个新的地方，但让你`ActivityMapper`返回相同的活动实例。这样，活动就不会重新启动。
当地点从其他方式发生变化时（例如浏览器历史记录），您必须找到更新活动的方式。例如，请参阅[GWT MVP 在 Place change 上更新 Activity 状态](https://stackoverflow.com/q/12073123/116472)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:02:21.217

有一个半解决方案，虽然我**不想推荐它**，但我想在这里添加它 - 只是为了警告这个解决方案的缺点：

您可以通过调用将令牌添加到历史记录而不触发事件`History.newItem(token, false)`。

这是一个半解决方案，因为：

*   它可以正常工作（只要您正确构建令牌）。
*   部分性能问题也得到了解决：将令牌添加到历史记录时不会重新启动活动。
*   但是，如果用户在历史记录中前后移动，性能问题仍然存在（因为那时，事件将再次被触发）。

# c# - 使用 Dapper 映射 SqlGeography

> ID：12090549
> 
> 赞同：11
> 
> 时间：2012-08-23T11:28:47.027
> 
> 标签：c#, sql-server, mapping, dapper, sqlgeography

我有实体“点”，其中包含 ID、文本和地理坐标。

```
CREATE TABLE [Point] (
    [Id] INT IDENTITY CONSTRAINT [PK_Point_Id] PRIMARY KEY,
    [Coords] GEOGRAPHY NOT NULL,
    [Text] NVARCHAR(32) NOT NULL,
    [CreationDate] DATETIME NOT NULL,
    [IsDeleted] BIT NOT NULL DEFAULT(0)
)

CREATE PROCEDURE [InsertPoint]
    @text NVARCHAR(MAX),
    @coords GEOGRAPHY
AS BEGIN
    INSERT INTO [Point](Text, Coords, CreationDate)
    VALUES(@text, @coords, GETUTCDATE())    
    SELECT * FROM [Point] WHERE [Id] = SCOPE_IDENTITY()
END 
```

这是表的ts sql代码和插入的存储过程。我有使用 dapper 的课程：

```
public class DapperRequester : IDisposable {
    private readonly SqlConnection _connection;
    private SqlTransaction _transaction;

    public DapperRequester(string connectionString) {
        _connection = new SqlConnection(connectionString);
        _connection.Open();
    }
    public void Dispose() {
        _connection.Close();
    }

    public void BeginTransaction() {
        _transaction = _connection.BeginTransaction();
    }
    public void CommitTransaction() {
        _transaction.Commit();
    }
    public void RollbackTransaction() {
        _transaction.Rollback();
    }

    public void Query(string query, object parameters = null) {
        Dapper.SqlMapper.Execute(_connection, query, parameters, transaction: _transaction);
    }

    public void QueryProc(string procName, object parameters = null) {
        Dapper.SqlMapper.Execute(_connection, procName, parameters, commandType: CommandType.StoredProcedure, transaction: _transaction);
    }

    public IEnumerable<T> Execute<T>(string query, object parameters = null) {
        return Dapper.SqlMapper.Query<T>(_connection, query, parameters, transaction: _transaction);
    }

    public IEnumerable<dynamic> ExecuteProc(string procName, object parameters = null) {
        return Dapper.SqlMapper.Query(_connection, procName, parameters,
                                         commandType: CommandType.StoredProcedure, transaction: _transaction);
    }

    public IEnumerable<T> ExecuteProc<T>(string procName, object parameters = null) {
        return Dapper.SqlMapper.Query<T>(_connection, procName, parameters,
                                         commandType: CommandType.StoredProcedure, transaction: _transaction);
    }
} 
```

c#-类是：

```
public class Point
{
    public int Id { get; set; }
    public SqlGeography Coords { get; set; }
    public string Text { get; set; }
} 
```

并且存储库有方法

```
public Point InsertPoint(string text, SqlGeography coords)
    {
        using (var requester = GetRequester())
        {
            return requester.ExecuteProc<Point>("InsertPoint", new { text, coords }).FirstOrDefault();
        }
    } 
```

当我将此类系统用于任何其他类时，一切正常，但映射存在问题，我认为这是因为 SqlGeography 类型.. 使用：

```
SqlGeography coords = new SqlGeography();
        coords = SqlGeography.Point(10.5, 15.5, 4326);
        Point point = new Point { Coords = coords, Text = "Text" };
        point = Repositories.PointRepository.InsertPoint(point.Text, point.Coords); 
```

我有一个例外`The member coords of type Microsoft.SqlServer.Types.SqlGeography cannot be used as a parameter value`

映射这种类型有什么秘密吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-28T08:31:11.347

Dapper 1.32 now [includes direct support for this](https://stackoverflow.com/questions/25538154/how-to-use-dapper-with-ms-sql-server-2012-geospatial-sqlgeography-column/25542766?noredirect=1#comment39884016_25542766). Your code should now *simply work*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T16:55:46.270

Dapper 不支持 DB Provider 特定的数据类型。在你的情况下，它的地理。

> Dapper 没有特定于 DB 的实现细节，它适用于所有 .net ado 提供程序，包括 sqlite、sqlce、firebird、oracle、MySQL 和 SQL Server

为了用 Dapper 处理这个参数，你必须编写自己的处理方法。例如，请参阅此[答案](https://stackoverflow.com/questions/6690565/using-dapper-with-sql-spatial-types-as-a-parameter)。

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:27:13.710

我遇到了类似的问题。我发现 Dapper 可以`Microsoft.SqlServer.Types.SqlGeography`很好地映射结果字段，但是将它们用作参数不起作用。

我已经修改了 SqlMapper.cs 文件以包含对这种类型的支持。你可以在这里看到要点：[https ://gist.github.com/bmckenzie/4961483](https://gist.github.com/bmckenzie/4961483)

单击“修订”以查看我更改的内容。

# asp.net-mvc-3 - MVC SyncFusion 的报告查看器？

> ID：12090553
> 
> 赞同：0
> 
> 时间：2012-08-23T11:29:00.117
> 
> 标签：asp.net-mvc-3, reporting-services, syncfusion

我在 Sync Fusion MVC 报告中寻找报告查看器。但是在演示站点和文档中，他们将其作为导出按钮。导出后，他们要求我们做类似的操作。但我不需要那个。我需要在浏览器本身中查看报告。同步融合中是否有任何报告查看器支持 MVC。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:44:09.287

Syncfusion 为 ASP.NET MVC（和其他 .NET 平台）提供基于文件格式的报告解决方案，作为可以在服务器上生成并流式传输到客户端以由客户端上的相应查看器/应用程序打开的基于文件格式的报告。为 PDF 和 Excel 提供报告查看器

一个。MVC PDF 查看器，用于在浏览器中查看 PDF 报告。

[http://mvc.syncfusion.com/demos/reporting/pdfviewer](http://mvc.syncfusion.com/demos/reporting/pdfviewer)

湾。Silverlight 中的电子表格控件，用于在浏览器中查看 Excel 报告。

[http://silverlight.syncfusion.com/samples/Silverlight/#/User%20Interface%20Edition/Spreadsheet](http://silverlight.syncfusion.com/samples/Silverlight/#/User%20Interface%20Edition/Spreadsheet)

Syncfusion 还提供 Microsoft 报告定义语言 (RDL) 报告解决方案。作为此解决方案的一部分，适用于 RDL 的报表查看器可用于 WPF 和 Silverlight。

ASP.NET MVC RDL 报告查看器将添加到 2012 年 11 月到期的 2012 卷 4 版本中。

# sql - 使用脚本将 Excel 工作表放入临时表

> ID：12090555
> 
> 赞同：10
> 
> 时间：2012-08-23T11:29:01.983
> 
> 标签：sql, sql-server, sql-server-2008, excel

我试图将此 excel 表放入表中，因此我可以对其应用 select 语句等，以使用其信息更新表。

```
SELECT * 
FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0',
          'Excel 8.0;Database=C:\PB.xlsx',
          'SELECT * FROM [Sheet1$]') 
```

我正在运行 64 位机器。不知道它是什么excel版本。

错误：

> 消息 7399，级别 16，状态 1，第 1 行链接服务器“（null）”的 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”报告错误。提供商没有提供有关该错误的任何信息。消息 7303，级别 16，状态 1，第 1 行无法初始化链接服务器“（null）”的 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”的数据源对象。

当我更改为 Excel 12.0 时；

> 链接服务器“（null）”的 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”返回消息“找不到可安装的 ISAM。”。消息 7303，级别 16，状态 1，第 1 行无法初始化链接服务器“（null）”的 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”的数据源对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T12:12:42.010

对于 xlsx 文件 (Excel 2007-2010)，您可以使用 ACE oledb 提供程序而不是 JET

```
SELECT * 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
    'Excel 12.0;HDR=YES;Database=C:\PB.xlsx',
    'SELECT * FROM [Sheet1$]'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T08:18:32.143

此错误有 5 个可能的原因。

1.  喷气发动机必须安装在服务器上。在服务器上安装 MS Office 可以解决这个问题。
2.  xls 的路径是相对于服务器的，而不是您从中运行命令的工作站
3.  运行 SQL Server 服务的帐户必须对 xls 所在的文件夹具有写入权限。一种可能的解决方案是将服务启动帐户（例如管理员）的 temp= 和 tmp= 环境变量更改为（例如）c:\temp，然后对每个人启用对 c:\temp 的完全控制

4...

```
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
sp_configure 'Ad Hoc Distributed Queries', 1;
GO
RECONFIGURE;
GO 
```

5....

```
EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.Jet.OLEDB.4.0', N'AllowInProcess', 0 
GO 
EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.Jet.OLEDB.4.0', N'DynamicParameters', 0
GO 
```

现在我不知道为什么会这样，特别是考虑到其他人都说应该将它们设置为 1。然而，对我来说，将它们设置为零，在 SQL Server 2008R2 32 位和 M$ Office 2007 上执行以下 SQL 语句的技巧

```
Select * 
into [temp_table$]
FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0',
'Excel 8.0;Database=C:\temp\EXPENDITURE REPORT.xls;HDR=YES;IMEX=1',
'SELECT * FROM [EXPENDITURE SHEET$]') 
```

注意：我特意使用了一个示例，其中文件名和工作表名称都有空格，以表明可以这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T19:02:53.013

以防万一其他人在几年后像我一样偶然发现，这对我有用：

我们有一个在没有安装 Office 版本的 Windows 8 64 位机器上安装 SQL Server Express 2012 的盒子。

这是我设置的存储过程的一部分：

```
INSERT INTO OPENROWSET ('Microsoft.ACE.OLEDB.12.0','Excel 12.0;Database=R:\Export Membership Database\Member_Export.xls;',
'SELECT * FROM [combined$]') 
```

（下面的 SELECT 语句的其余部分）

我收到了这个错误：

> SQL Server 阻止了对组件“即席分布式查询”的声明“OpenRowset/OpenDatasource”的访问，因为该组件作为该服务器安全配置的一部分被关闭。系统管理员可以使用 sp_configure 启用“即席分布式查询”的使用。有关启用“即席分布式查询”的详细信息，请在 SQL Server 联机丛书中搜索“即席分布式查询”。

我们更改了配置：

```
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
sp_configure 'Ad Hoc Distributed Queries', 1;
GO
RECONFIGURE;
GO 
```

再次运行存储过程，然后出现此错误：

> OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”尚未注册。

发现我们需要安装这个：

[http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d&displaylang=en](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d&displaylang=en)

在那之后，工作就像一个魅力！

# javascript - 渐进式增强 - 不使用 CSS 隐藏元素

> ID：12090556
> 
> 赞同：1
> 
> 时间：2012-08-23T11:29:17.853
> 
> 标签：javascript, jquery, graceful-degradation

我经常发现自己使用 jQuery 显示/隐藏元素，例如一个简单的选项卡式内容区域，其中第一个选项卡可见，而其他选项卡在使用 javascript 显示之前不可见。我知道使用 CSS 隐藏最初隐藏的那些（显示：无）然后用 JS 显示正确的那些不是好习惯，因为非 JS 用户将永远看不到任何东西。所以默认情况下我显示所有，然后用 JS 隐藏相关的。

但是，在这样做时，隐藏的元素将加载，然后仅在文档准备好时才隐藏。我怎样才能阻止这种情况发生？有没有一种方法可以优雅地降级，但在加载时不会出现元素，然后因为看起来有点劣质而迅速消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:39:03.820

不幸的是，Javascript 的工作方式，~~这似乎是不可能的。*在*第一个渲染帧和隐藏元素的 JavaScript 执行之间总会有几分之一秒~~ [我错了，jQuery似乎能够做到这一点](https://stackoverflow.com/a/12090702/1311454)。所以，CSS 是最好的方法。`<noscript>`幸运的是，您可以在臭名昭著的标签中添加备用 CSS 样式表：

```
<style type="text/css">
    #jquery-thing {
        display: none;
    }
</style>
<noscript>
    <style type="text/css">
        #jquery-thing {
            display: block !important;
        }
    </style>
</noscript> 
```

这是 JSFiddle 链接：http: [//jsfiddle.net/kylewlacy/dbWuc/](http://jsfiddle.net/kylewlacy/dbWuc/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T11:38:11.790

一些想法...

如果你不介意 jQuery 在页面上到处乱扔，而不是全部放在一个单独的文件中，你可以调用 $('#divToHide').hide(); 元素出现后立即。虽然不是很好的做法。尽管这取决于用例，但如果您主要是创建 5 页宣传册网站的设计师/主题者，您应该选择适合您的！

或者，如果您更像是技术人员，您可能会想`.live()/.livequery()`用 JS 处理并捕捉元素的插入，然后立即隐藏。看到这个帖子[当一个新节点插入到dom中时是否有一个jquery事件触发？](https://stackoverflow.com/questions/3900151/is-there-a-jquery-event-that-fires-when-a-new-node-is-inserted-into-the-dom)

# python - python 2.7 wrt python 2.5中的小部件对齐方式不同

> ID：12090559
> 
> 赞同：0
> 
> 时间：2012-08-23T11:29:22.240
> 
> 标签：python, tkinter, sticky

我刚刚从 Python 2.5 转移到 2.7，我看到我在 2.5 中创建的 GUI 在 2.7 中看起来不同。我在 Tkinter 中使用“sticky = E+W”命令来拉伸某些小部件以覆盖我的 GUI 的整个宽度。在 2.5 中，这些小部件自动居中，但在 2.7 中，这些小部件与我的 GUI 左侧对齐。我找不到解决此问题的命令。有谁能帮助我吗？

这是我在 Python 2.5 和 2.7 中的 GUI 的图片（抱歉，我不得不删除标签，因为它是我为我的工作创建的 GUI..）

[https://lh3.googleusercontent.com/-YCaW23r09gs/UDZG6TufgFI/AAAAAAAAEN8/z2_PQCxLIV8/s912/Python%25202.5%2520v%25202.7.png](https://lh3.googleusercontent.com/-YCaW23r09gs/UDZG6TufgFI/AAAAAAAAEN8/z2_PQCxLIV8/s912/Python%25202.5%2520v%25202.7.png)

有关我使用的代码的更多详细信息：

```
root = Tk()
root.grid()

F = Frame(root, relief = GROOVE, borderwidth = 3)
F.grid(row = 0, column = 0, sticky = EW)

Label(F,text = 'Data Source:', font = ('Arial',10)).grid(row = 0, column = 0)

LocalVar = IntVar()
CB1 = Radiobutton(F, text = 'Option 1', variable = LocalVar, value = 0, font = ('Arial',10,'italic'))
CB1.grid(row = 0, column = 1)
CB2 = Radiobutton(F, text = 'Option 2', variable = LocalVar, value = 1, font = ('Arial',10,'italic'))
CB2.grid(row = 0, column = 2)  

FAQ = Button(root, bitmap = "info", width = 40, command = ShowFAQ, bg = '#0F238C', fg = 'white')
FAQ.grid(row = 0, column = 0, sticky = E) 
```

问候， 乔里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:38:54.987

在做了一些研究之后，我了解到这似乎是 tk 8.4 和 tk 8.5 之间的行为变化，这两个版本分别是 python 2.5 和 2.7 使用的版本。具体来说，当您不对列应用权重时，行为会发生变化。

更改的文档在这里：[http ://www.tcl.tk/cgi-bin/tct/tip/146.html](http://www.tcl.tk/cgi-bin/tct/tip/146.html)

顺便说一句，`root.grid()`什么都不做。这是无害的，但完全没有必要。

# xml - Perl XML::简单写目录

> ID：12090564
> 
> 赞同：0
> 
> 时间：2012-08-23T11:29:30.837
> 
> 标签：xml, perl, xml-simple

嗨，我想将目录和所有子目录中的所有文件写入关联数组并从此数组创建 XML。这是我的代码。

```
use strict;
use warnings;

use File::Find;
use Data::Dumper;
use XML::Simple;

my $base_dir = '.';

my $xs = new XML::Simple;
my %filelist;

find(\&print_name_if_dir, $base_dir);

sub print_name_if_dir
{
    if (-f $_) {
        $filelist{$File::Find::name}{size}=-s $_;
        $filelist{$File::Find::name}{time}=(stat $_)[9];
    }
}

print Dumper(\%filelist);
my $xml = $xs->XMLout(\%filelist, keyattr => "filename");
print $xml; 
```

这是我的输出：

```
$VAR1 = {
          './out.log' => {
                           'size' => 51,
                           'time' => 1345720984
                         },
          './foo/bat.txt' => {
                               'size' => 24,
                               'time' => 1345708287
                             },
          './test.pl' => {
                           'size' => 438,
                           'time' => 1345720762
                         }
        };
<opt>
  <./out.log size="51" time="1345720984" />
  <./foo/bat.txt size="24" time="1345708287" />
  <./test.pl size="438" time="1345720762" />
</opt> 
```

数组没问题，但 XML 应该如下所示：

```
<file name="bla.txt">
  <time>"1234"</time>
  <size>"1234"</size>
</file> 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:44:36.303

`XML::Simple`嗯，很简单。它的文档甚至自己也这么说。您无法从中获得所有可以想象的输出形式，而且您的输出形式很可能是不可能的。

但是，您可以使用以下存储结构比现在更接近：

```
my $files = {
  file => [
    { name => 'chunky.txt', time => 12345, size => 321 },
    { name => 'bacon.dat',  time => 47123, size => 222 },
  ],
}; 
```

这将导致以下输出（通过`print XMLout($files)`）：

```
<opt>
  <file name="chunky.txt" size="321" time="12345" />
  <file name="bacon.dat" size="222" time="47123" />
</opt> 
```

在我看来，不可能的事情是强迫`time`并`size`作为孩子而不是属性输出。

哦，这样的结构很容易用下面的代码构建：

```
my %filelist = ( file => [] );

sub print_name_if_dir {
  return unless -f;

  push @{ $filelist{file} }, {
    name => $_,
    size => -s $_,
    time => (stat $_)[9],
  };
} 
```

# regex - 使用正则表达式将 for 语句中的 int 替换为 size_t

> ID：12090568
> 
> 赞同：0
> 
> 时间：2012-08-23T11:29:43.680
> 
> 标签：regex, visual-studio, visual-c++

我有一个非常古老的大型 x86 项目，现在我需要将它移植到 x64 架构。不幸的是，有很多与混合 int/memsize 类型有关的错误。例如：

```
std::vector<T> vec;
for(int i = 0; i < vec.size(); ++i) // error, i must be size_t
{
} 
```

所以我想要的是用将 int 更改为 size_t 来替换所有这些字符串。形式上，问题可以表述如下：

查找符合以下条件的字符串：

```
for(int [var name] = 0; [var name] < [container name].size(); [any expression]) 
```

将其替换为：

```
for(size_t [var name] = 0; [var name] < [container name].size(); [any expression]) 
```

我正在使用 Visual Studio 2008。我正在寻找最正确的解决方案来解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:55:36.450

查找内容的正则表达式：`for[:b\n]*\([:b\n]*int[:b\n]+{:i}[:b\n]*=[:b\n]*0[:b\n]*;[:b\n]*{:i}[:b\n]*\<[:b\n]*{:i}\.size[:b\n]*\([:b\n]*\);[:b\n]*`

替换为：（`for(size_t \1 = 0; \2 < \3.size();`注意结尾空格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:39:14.003

“最正确的解决方案”可能涉及使用理解 C++ 语法的解析器，然后在操作解析树后使用该解析器重写代码。C++ 语法并不简单，对于这样的任务，除非项目特别大，否则您很可能不得不恢复使用在大多数情况下有效的东西，而不是在技术上正确。

最简单的方法可能是编写一组搜索/替换正则表达式来完成这项工作，正则表达式近似于可能的用例，但从以下示例中可以看出，正则表达式可能难以阅读.

这是一个用 Python 编写的实用程序，它近似于您正在尝试做的事情。它将在标准输入或命令行上获取一个文件，并在标准输出上生成转换后的文本。正则表达式严格匹配相同的标识符。

```
#!/usr/bin/env python

import fileinput
import sys
import re

regex = re.compile(
    r"""(?P<start>^\s*for\s*\(  # Leading for construct
      )(?P<type>int)(?P<remainder>\s+(?P<identifier>[A-Za-z_][0-9A-Za-z]*)  # int type followed by identifier
      \s*=\s*0\s*;  # Matches '= 0;'
      \s*(?P=identifier)\s*<\s*(?P<container>[A-Za-z_][0-9A-Za-z]*)\.size\(\); # ident < container.size();
      [^)]*\).*$)""",
      re.VERBOSE)

for line in fileinput.input():
    line = line.rstrip()
    match_object = regex.match(line)
    if match_object is not None:
        line = match_object.expand('\g<start>size_t\g<remainder>')
    print line 
```

# silverlight - 将结构图转换为 Autofac

> ID：12090569
> 
> 赞同：5
> 
> 时间：2012-08-23T11:29:44.257
> 
> 标签：silverlight, dependency-injection, structuremap, autofac

我最近购买了一本关于 MVVM 的非常好的书 - Silverlight 和 WPF 中企业架构的 MVVM 生存指南

不幸的是，与 IoC 相关的部分之一有很多 StructureMap 的代码示例，这些示例不适用于 Silverlight

任何人都可以指向一个链接，该链接可以帮助我将结构图代码转换为 Autofac，这是我正在使用的注入工具

该代码使用创建类和引导程序的工厂方法

```
using Northwind.ViewModel;
using StructureMap;

namespace Northwind.UI.WPF
{
    public class BootStrapper
    {
        public MainWindowViewModel MainWindowViewModel
        {
            get
            {
                return ObjectFactory
                    .GetInstance<MainWindowViewModel>();
            }
        }

        public BootStrapper()
        {
            ObjectFactory.Initialize(
                o => o.Scan(
                    a =>
                    {
                        a.WithDefaultConventions();
                        a.AssembliesFromApplicationBaseDirectory(
                            d => d.FullName
                                .StartsWith("Northwind"));
                        a.LookForRegistries();
                    }));
        }
    }

    using StructureMap;

    namespace Northwind.ViewModel
    {
    public class CustomerDetailsViewModelFactory 
        : ICustomerDetailsViewModelFactory
    {
        private readonly IContainer _container;

        public CustomerDetailsViewModelFactory(
            IContainer container)
        {
            _container = container;
        }

        public CustomerDetailsViewModel CreateInstance(
            string customerID)
        {
            return _container
                .With("customerID")
                .EqualTo(customerID)
                .GetInstance<CustomerDetailsViewModel>();
        }
    }
} 
```

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T13:06:44.440

Autofac and StructureMap work differently, so you can't "translate" it one to one.
However, **this is what it should look like** to accomplish the same.
I've made some assumptions as not everything is there to test out your code.

```
public class BootStrapper
{
    private readonly ILifetimeScope _container;

    public BootStrapper()
    {
        var builder = new ContainerBuilder();

        Assembly[] assemblies =
            GetAssembliesFromApplicationBaseDirectory(
                x => x.FullName.StartsWith("Northwind"));

        builder.RegisterAssemblyTypes(assemblies)
               .AsImplementedInterfaces();

        // Module in Autofac = Registry in StructureMap
        builder.RegisterAssemblyModules(assemblies);

        Assembly viewModelAssembly =
            typeof(MainWindowViewModel).Assembly;

        builder.RegisterAssemblyTypes(viewModelAssembly);

        _container = builder.Build();
    }

    private static Assembly[] GetAssembliesFromApplicationBaseDirectory(Func<AssemblyName, bool> condition)
    {
        string baseDirectoryPath =
            AppDomain.CurrentDomain.BaseDirectory;

        Func<string, bool> isAssembly =
            file => string.Equals(
                Path.GetExtension(file), ".dll", StringComparison.OrdinalIgnoreCase);

        return Directory.GetFiles(baseDirectoryPath)
                        .Where(isAssembly)
                        .Where(f => condition(new AssemblyName(f)))
                        .Select(Assembly.LoadFrom)
                        .ToArray();
    }

    public MainWindowViewModel MainWindowViewModel
    {
        get
        {
            return _container.Resolve<MainWindowViewModel>();
        }
    }
}

public class CustomerDetailsViewModelFactory : ICustomerDetailsViewModelFactory
{
    private readonly ILifetimeScope _container;

    public CustomerDetailsViewModelFactory(ILifetimeScope container)
    {
        _container = container;
    }

    public CustomerDetailsViewModel CreateInstance(string customerID)
    {
        return _container.Resolve<CustomerDetailsViewModel>(
                new NamedParameter("customerID", customerID));
    }
} 
```

# php - 每个用户只触发一次 jquery 事件

> ID：12090573
> 
> 赞同：1
> 
> 时间：2012-08-23T11:30:18.817
> 
> 标签：php, jquery, cookies

我有一个弹出窗口在加载后出现在主页上，我需要确保每个新访问者只发生一次。

做这个的最好方式是什么？我对 jQuery 和 PHP 非常熟悉，但老实说，我已经有一段时间没有使用任何类型的 cookie 了。

欢迎所有建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:52:00.230

我可以想到3种可能性：

**PHP 会话：**
当事件触发时，向服务器发送 AJAX 调用。将用户的 session_id 存储在某个地方，例如在数据库中（带有 sessionid 的简单 1 列表就足够了）。如果您检查数据库并在那里找到 sessionid，您就知道用户已经触发了该事件。

**Javascript Cookies：**
只需将信息存储在 JS cookie 中。如果你想坚持使用 jQuery，有一个[很好的插件可以用于这种目的](https://github.com/carhartl/jquery-cookie)。

**浏览器存储：**
这可以是[sessionStore 或 localStore](https://developer.mozilla.org/en-US/docs/DOM/Storage)，您可以在其中轻松保存识别触发事件所需的信息。

就个人而言，如果您知道访问者的浏览器，我会选择 2 甚至 3，因为并非周围的每个浏览器都能够做到这一点（尽管我怀疑是否有人仍然想要支持 IE6/7）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:51:03.400

在这种情况下，您可以使用会话或 cookie。

1.检查cookie是否`visited_already`存在。

2.如果存在，他已经访问过我们的网站，什么也不做。

3.Else，第一次访问：做某事并创建`visited_already`cookie。

例如：

```
if(!isset($_COOKIE['visited_already']))
{
setcookie('visited_already' , 'true' , time()+60*60*24*7*365); //Will expire in a year (or when the user delete cookies)
//pop-up code here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:30:47.193

感谢你们的贡献。

我找到了另一种完美的解决方案。这个链接对我帮助很大： [如何在 Javascript 中设置 cookie](http://blog.sicanstudios.com/post/set-cookies-javascript)

```
jQuery(window).load(function() {
            var cookie_mesage = jQuery.cookie('welcome');
            if (cookie_mesage != 'hide') {
                jQuery('.ceebox').trigger('click');
                jQuery.cookie('welcome', 'hide');
            };
        }); 
```

它速度快而且效果很好，正是我所需要的。

# php - 不错的 URL 相对链接问题

> ID：12090574
> 
> 赞同：0
> 
> 时间：2012-08-23T11:30:21.463
> 
> 标签：php, url, url-rewriting

我正在使用漂亮的 url 而无需重写（例如`/my/site/index.php/some/page`）。我在使用样式表链接时遇到问题。例如，`sheet.css`被解释为`/my/site/index.php/some/sheet.css`. 对于任何前缀（ ）和任何深度后缀（ ）
，我怎样才能让它正确链接？`/my/site/``/some/page`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:32:36.853

在任何资源前添加一个`/`以将它们指向您网站的根目录：

```
<link rel="stylesheet" type="text/css" href="/sheet.css"> 
```

您始终可以`CONSTANT`在包含的`config`文件中设置 a 并将站点路径添加到其中

```
define('HOST_URL', 'http://www.example.org/my/site/');
define('HOST_URL', 'http://www.example.net/my/site2/'); 
```

然后您可以随时从 1 个文件中调用任何文件并更改路径。

例如：

```
<link rel="stylesheet" type="text/css" href="<?php echo HOST_URL; ?>sheet.css" />
<script type="text/javascript" src="<?php echo HOST_URL; ?>script.js"></script>
<img src="" alt="<?php echo HOST_URL; ?>images/image.jpg" border="0" /> 
```

# tridion - CS0103：当前上下文中不存在名称“Tridion”

> ID：12090579
> 
> 赞同：2
> 
> 时间：2012-08-23T11:30:59.383
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

**Tridion 20ll SP1**

在步骤“将 HTTP 上传服务器角色作为 .NET 网站”安装 CDS 时，我们面临着各种问题。

完成安装指南中的所有步骤后，我们在浏览 httpupload.aspx 页面时收到错误“CS0103：当前上下文中不存在名称‘Tridion’”。

根据指南，预期输出应该是“SDL Tridion ASPX 上传页面”。

能否请你帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:20:01.900

检查您的 Web 应用程序是否包含所有正确的 DLL、一个`config`包含正确配置 XML 文件的`lib`文件夹以及一个包含所有正确 JARS 的文件夹。您很可能缺少一些 Tridion DLL，例如`Tridion.ContentDelivery.dll`.

# objective-c - iOS >> 分离 .h&.m 文件来管理 UITableView

> ID：12090581
> 
> 赞同：0
> 
> 时间：2012-08-23T11:31:08.293
> 
> 标签：objective-c, ios, xcode, uitableview

在我的应用程序中，有一个 UITableView 出现在几个不同的 UIViewController 中——相同的数据库、相同的设计、相同的 IB。不同的是，在每个不同的 UIViewController 中，UITableView 的大小和从数据库中获取的具体数据是不同的。

我想创建一组 .h&.m 文件来管理所有不同 UIViewControllers 的这些 UITableViews，然后我可以避免重复 UITableView 方法。

我熟悉如何通过创建 UIView 类型的新 Objective-C 类文件来为 UIView 执行此操作。有没有办法为 UITableView 做同样的事情，还是我需要创建一个 UIView.m&.h 文件并将它们委托给 UITableView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:07:42.417

编辑：我第一次误解了你的问题 - 让我再试一次。

您需要一个可以在使用表的任何地方处理数据源和委托操作的类。所以这是一个辅助类，它将是 NSObject 的子类。有几种方法可以配置它——也就是说，你几乎可以肯定需要一个“委托”——实例化这个类的对象，当事情发生时你很可能需要与它一起更新。

*   所以创建一个协议——当你设计这个时，你会在编写类并尝试使用它时准确地找出那里需要什么。

*   要填充此类，您有几种方法：

1）使用 NSArray 属性，并用字典填充数组。每本字典都会有一行的信息。或者，如果有多个部分，则数组有数组，每个数组都包含字典，其中包含用于填充单元格的信息。

2）在类上提供大量属性，其中包含用于配置每个单元格的信息

3) 根据需要使用协议向“所有者”类请求信息。

# c# - 是否有执行数据压缩和加密的明确顺序

> ID：12090582
> 
> 赞同：2
> 
> 时间：2012-08-23T11:31:14.727
> 
> 标签：c#, .net, encryption, data-compression

我有一个要求，说明应该执行数据压缩和加密。

但是，我怀疑应该首先执行哪个步骤以优化压缩率和执行时间。如何选择首先执行哪个步骤以及要使用的压缩和加密方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T11:36:23.093

我强烈*期望*“加密然后压缩”的方法几乎不会给您任何压缩。加密数据不应该有任何可辨别的模式，这基本上是压缩所依赖的。

压缩然后加密。

至于使用*哪种*加密和压缩 - 这完全取决于您的上下文，您没有提供任何信息。哎呀，您可能会发现您的数据一开始就不可压缩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:36:11.050

我认为通常的处理顺序是先压缩，然后加密。好的加密算法的 CPU 相当昂贵，因此最好在加密之前先减小数据大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T11:37:48.397

首先，您将执行压缩。您可以使用 7zip 库来执行此操作。它也进行加密，我认为是 AES 加密。

# iphone - 将 Unicode 字符转换为 NSString

> ID：12090585
> 
> 赞同：4
> 
> 时间：2012-08-23T11:31:17.190
> 
> 标签：iphone, utf-8, unicode-string

我从 web 服务收到了包含 Unicode 字符的字符串。我想将其转换为普通的 NSString。所以我该怎么做？

例如：“这不是你的自行车”

那么如何删除 unicode 并用其相等的特殊符号替换它。

输出将是：“这不是你的自行车”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T11:41:51.267

```
char cString[] = "This isn\u2019t your bike";
NSData *data = [NSData dataWithBytes:cString length:strlen(cString)];
NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"result string: %@", string); 
```

这应该有效。

更新评论：

并非所有字体都支持您指定的 unicode 字符。

[http://www.fileformat.info/info/unicode/char/92/fontsupport.htm](http://www.fileformat.info/info/unicode/char/92/fontsupport.htm)

但是这个可以。

[http://www.fileformat.info/info/unicode/char/2019/fontsupport.htm](http://www.fileformat.info/info/unicode/char/2019/fontsupport.htm)

这就是它抛出错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:48:25.237

```
NSString *final_url = [NSString stringWithFormat:url]; 

final_url = [final_url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:final_url] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:120.0];    

NSURLResponse *response;
NSError *error = [[NSError alloc] init];

NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *strResponse = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

SBJSON *objJSON = [SBJSON new];

NSMutableDictionary *objDataDic = [objJSON objectWithString:strResponse error:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T14:57:09.683

有一个库可以转换 [https://github.com/alexaubry/HTMLString](https://github.com/alexaubry/HTMLString)。它将转换所有类型的 Unicode 字符。

```
let escapedSnack = "Fish &amp; Chips"
let snack = escapedSnack.removingHTMLEntities // "Fish & Chips" 
```

# forms - Symfony2：未收到自定义字段类型的属性值

> ID：12090590
> 
> 赞同：2
> 
> 时间：2012-08-23T11:31:30.773
> 
> 标签：forms, symfony, types, field

在我的表单中，我需要创建自己的名为“ImageType”的字段类型以显示标签。

这里是我用来创建表单的代码：

```
$form = $this->createFormBuilder($image)
            ->add('title')
            ->add('description')
            ->add('file')
            ->add('path', new ImageFieldType()); 
```

这里的 ImageTypeField 定义：

```
class ImageFieldType extends AbstractType
{
    public function getDefaultOptions(array $options)
    {
        return array(
            'path' => null,
        );
    }

    public function getParent()
    {
        return 'field';
    }

    public function getName()
    {
        return 'imageField';
    }
} 
```

和模板：

```
{% block imageField_widget %}
    {% if path is not null %}
        <img src="{{ asset('upload/dir/' ~ path) }}" />
    {% endif %}
{% endblock %} 
```

我的问题是它`path`始终为空。我期望在使用....时收到`path`财产的价值。`$image``createFormBuilder()->add('path'`

有人可以帮我吗？

**更新：** 已解决，我正在使用`form.vars.value.path`，但`form.vars.value`已经足够了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:49:30.987

如果`path`来自您的表单，那么您将在表单中检索它：

```
form.vars.value.path 
```

例子：

```
{% if form.vars.value.path is not null %}
    <img src="{{ asset('upload/dir/' ~ form.vars.value.path) }}" />
{% endif %} 
```

# jquery - 推特引导程序的谷歌地图问题

> ID：12090591
> 
> 赞同：0
> 
> 时间：2012-08-23T11:31:34.600
> 
> 标签：jquery, css, google-maps, twitter-bootstrap

我正在使用这个[http://rjshade.github.com/gmaps-autocomplete/](http://rjshade.github.com/gmaps-autocomplete/)在我的网站中插入地图。

我使用 twitter bootstrap，查看地图的模式导致图钉在移动时看起来有问题（带有阴影且非常小）并且不准确，以及在地图上加载图钉时，图钉未居中在视图中。一旦我删除了 bootstrap.min.css，所有这些错误都已修复。

任何想法如何在拥有 bootstrap.min.css 的同时修复这些错误？非常感谢提前

加载地图——![在此处输入图像描述](../Images/9d1461fda410e0d30e2bbdb7c70007f5.png)

别针 - ![在此处输入图像描述](../Images/c54fe4926a148607fa2ba270698730df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:35:00.320

我认为答案可能是添加这个 CSS：

```
#mapCanvas img {
    max-width: none;
} 
```

更多在这里：

[Twitter Bootstrap CSS 影响谷歌地图](https://stackoverflow.com/questions/9141249/twitter-bootstrap-css-affecting-google-maps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:00:48.770

我能够通过在所有文件中将地图画布的***id***从**gmaps-canvas**更改为**map_canvas来解决 pin 问题。**

但是加载地图居中的问题仍然没有解决。

# java - 将 Java 中人类可读的文件大小解析为字节

> ID：12090598
> 
> 赞同：4
> 
> 时间：2012-08-23T11:31:50.077
> 
> 标签：java

我有一堆要解析的文件大小。这些目前仅以 GB 为单位。以下是一些示例：

*   1.2GB
*   2.4GB

我想我应该将我的字节文件大小存储在一个`Long`值中，但我似乎无法弄清楚。这是我的做法：

```
System.out.println(Float.parseFloat("1.2GB".replace("GB", ""))* 1024L * 1024L * 1024L); 
```

这将返回一个`Float`显示为 的值`1.28849024E9`。如何获得`Long`以字节为单位的文件大小的表示。

我对数字数据类型有点困惑。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T11:34:03.467

改用`BigDecimal`：

```
BigDecimal bytes = new BigDecimal("1.2GB".replace("GB", ""));
bytes = bytes.multiply(BigDecimal.valueOf(1024).pow(3));
long value = bytes.longValue(); 
```

你可以把它放在一个方法中：

```
public static long toBytes(String filesize) {
    long returnValue = -1;
    Pattern patt = Pattern.compile("([\\d.]+)([GMK]B)", Pattern.CASE_INSENSITIVE);
    Matcher matcher = patt.matcher(filesize);
    Map<String, Integer> powerMap = new HashMap<String, Integer>();
    powerMap.put("GB", 3);
    powerMap.put("MB", 2);
    powerMap.put("KB", 1);
    if (matcher.find()) {
      String number = matcher.group(1);
      int pow = powerMap.get(matcher.group(2).toUpperCase());
      BigDecimal bytes = new BigDecimal(number);
      bytes = bytes.multiply(BigDecimal.valueOf(1024).pow(pow));
      returnValue = bytes.longValue();
    }
    return returnValue;
} 
```

并称它为：

```
long bytes = toBytes("1.2GB"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T11:45:46.557

此功能将为您提供更通用的解决方案。它涵盖 GB、MB 和 KB，并允许逗号和点作为小数分隔符。如果输入一个纯整数，它也会通过它。

```
public static long parseFilesize(String in) {
  in = in.trim();
  in = in.replaceAll(",",".");
  try { return Long.parseLong(in); } catch (NumberFormatException e) {}
  final Matcher m = Pattern.compile("([\\d.,]+)\\s*(\\w)").matcher(in);
  m.find();
  int scale = 1;
  switch (m.group(2).charAt(0)) {
      case 'G' : scale *= 1024;
      case 'M' : scale *= 1024;
      case 'K' : scale *= 1024; break;
      default: throw new IllegalArgumentException();
  }
  return Math.round(Double.parseDouble(m.group(1)) * scale);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T13:08:06.733

不使用 BigDecimal 的较短版本。

```
public static long parseSize(String text) {
    double d = Double.parseDouble(text.replaceAll("[GMK]B$", ""));
    long l = Math.round(d * 1024 * 1024 * 1024L);
    switch (text.charAt(Math.max(0, text.length() - 2))) {
        default:  l /= 1024;
        case 'K': l /= 1024;
        case 'M': l /= 1024;
        case 'G': return l;
    }
}

for (String s : "1.2GB 2.4GB 3.75MB 1.28KB 9".split(" "))
    System.out.println(s + " = " + parseSize(s)); 
```

印刷

```
1.2GB = 1288490189
2.4GB = 2576980378
3.75MB = 3932160
1.28KB = 1310
9 = 9
1.2884901888E9 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T11:34:54.623

如果你使用`Float`，你有失去精确度的风险。

另一种方法是使用[`BigDecimal`](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigDecimal.html).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T11:45:42.237

像这样的东西怎么样：

```
String sizeStr = "1.2GB";

Double base = 1024*Double.parseDouble(sizeStr.replaceAll("[GM]B",""));

final long sizeBytes;

if ( sizeStr.endsWith("GB") ) {
    sizeBytes = 1024*1024*base.longValue());
}
else {
    sizeBytes = 1024*base.longValue());
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-15T11:52:01.227

如果使用 groovy 是一个选项，这里有一个版本：

*   处理非后缀字符串（即只是一个数字“1234”）
*   处理空格和逗号（如“12,234B”或“12 234kB”）
*   当它无法解析输入字符串时抛出一个有点描述性的异常
*   在错误的情况下处理前缀和字节指示符。可以说这不是一个好主意。在我的特定用例中，我经常得到不精确的数据，这使得让算法对规则稍微宽松一点很有用。

代码：

```
import static groovy.test.GroovyAssert.shouldFail

long toBytes(String size) { 
  def matcher = size?.replaceAll(/[, ]/, '') =~ /(?i)^([\d.,]+)([PTGMK]?B)?$/
  if (!matcher) throw new IllegalArgumentException("Can not parse size string '${size}'")

  (matcher[0][1] as BigDecimal) * 1024**[PB:5, TB:4, GB:3, MB:2, KB:1].withDefault {0}[matcher[0][2]?.toUpperCase()]
}

assert toBytes(" 112 ")     == 112
assert toBytes("112")       == 112
assert toBytes("123456789") == 123456789
assert toBytes("1B")        == 1
assert toBytes("1KB")       == 1024
assert toBytes("300MB")     == 300g*1024*1024
assert toBytes("1.2mb")     == 1.2g*1024*1024 as Long
assert toBytes("123 456kB") == 123456g*1024
assert toBytes("123,456B")  == 123456
assert toBytes("1.5GB")     == 1.5g*1024*1024*1024  
assert toBytes("300MB")     == 300g*1024*1024
assert toBytes("512GB")     == 512g*1024*1024*1024
assert toBytes("1Tb")       == 1024g*1024*1024*1024
assert toBytes("1PB")       == 1024g*1024*1024*1024*1024

def checkFailure = { c -> 
  assert shouldFail(c).message.startsWith("Can not parse size string")
}

checkFailure { toBytes(null)   }
checkFailure { toBytes("")     } 
checkFailure { toBytes("x112") }
checkFailure { toBytes("112x") }
checkFailure { toBytes("11x2") } 
```

该方法可能未针对可读性进行优化。在保持代码简洁的同时尝试处理所有边缘情况有一些乐趣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-23T11:34:39.220

您可以在打印之前将 Float 值转换为 Long 值。

# r - chart.PerformanceSummary：如何设置顺序颜色

> ID：12090599
> 
> 赞同：1
> 
> 时间：2012-08-23T11:31:50.877
> 
> 标签：r

```
require(quantmod)
require(PerformanceAnalytics)

getSymbols(c('SP500', 'WAAA', 'WBAA'), src = 'FRED', from = '1950-01-01')
X <- na.omit(merge(to.weekly(SP500), WAAA, WBAA))

dWAAA <- diff(WAAA / 100, 1)
dWBAA <- diff(WBAA / 100, 1)

D <- 20

dP.WAAA <- - D * dWAAA
dP.WBAA <- - D * dWBAA

charts.PerformanceSummary(p = .99, R = dP.WAAA['1990-01-01/2012-08-17'],
                          methods = 'ModifiedES', width = 48)
charts.PerformanceSummary(p = .99, R = dP.WBAA['1990-01-01/2012-08-17'],
                          methods = 'ModifiedES', width = 48) 
```

你能告诉我任何方法来设置颜色的平滑过渡顺序调色板，以便用看起来更好的东西替换默认的黑色吗？

我想要一些基于蓝色的东西，并且从第一个情节结束到第三个情节开始改变蓝色品种。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:06:08.727

见`?chart.TimeSeries`。我相信您想要的选项很可能是：

```
element.color # for the boxes, axes, etc
# and
colorset # for the actual chart lines
# try
colorset = 'darkblue'
# or
colorset = 'lightblue'
# as an extra argument to charts.PerformanceSummary 
```

颜色集为不同的图表元素提供不同的颜色，并且当您在同一个图表上绘制多个系列时效果最佳，例如将资产与指数或对等组进行比较。

R 中的垂直色带无法使用基本图形实现，并且无论如何都不会传达任何信息。

# php - 如何进入网站的另一个文件夹

> ID：12090603
> 
> 赞同：0
> 
> 时间：2012-08-23T11:32:05.850
> 
> 标签：php, web

我不知道问这类问题是否正确。我有一个域名[http://www.mycorporateservices.com/](http://www.mycorporateservices.com/)并且有一个页面的 URL 为[http://www.mycorporateservices .com/Corporate-Services](http://www.mycorporateservices.com/Corporate-Services.I)。我想编辑这个 URL 的内容。但是当我通过 ftp 客户端浏览时，我找不到任何名称为 Corporate-Services 的文件夹。所有页面都是用 PHP 制作的。谢谢任何帮助。

```
 <?php
// Version
define('VERSION', '1.5.2.1');

// Configuration
require_once('config.php');

// Install 
if (!defined('DIR_APPLICATION')) {
    header('Location: ../install/index.php');
    exit;
}

//VirtualQMOD
require_once('../vqmod/vqmod.php');
$vqmod = new VQMod();

// VQMODDED Startup
require_once($vqmod->modCheck(DIR_SYSTEM . 'startup.php'));

// Application Classes
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/currency.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/user.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/weight.php'));
require_once($vqmod->modCheck(DIR_SYSTEM . 'library/length.php'));

// Registry
$registry = new Registry();

// Loader
$loader = new Loader($registry);
$registry->set('load', $loader);

// Config
$config = new Config();
$registry->set('config', $config);

// Database
$db = new DB(DB_DRIVER, DB_HOSTNAME, DB_USERNAME, DB_PASSWORD, DB_DATABASE);
$registry->set('db', $db);

// Settings
$query = $db->query("SELECT * FROM " . DB_PREFIX . "setting WHERE store_id = '0'");

foreach ($query->rows as $setting) {
    if (!$setting['serialized']) {
        $config->set($setting['key'], $setting['value']);
    } else {
        $config->set($setting['key'], unserialize($setting['value']));
    }
}

// Url
$url = new Url(HTTP_SERVER, $config->get('config_use_ssl') ? HTTPS_SERVER : HTTP_SERVER);   
$registry->set('url', $url);

// Log 
$log = new Log($config->get('config_error_filename'));
$registry->set('log', $log);

function error_handler($errno, $errstr, $errfile, $errline) {
    global $log, $config;

    switch ($errno) {
        case E_NOTICE:
        case E_USER_NOTICE:
            $error = 'Notice';
            break;
        case E_WARNING:
        case E_USER_WARNING:
            $error = 'Warning';
            break;
        case E_ERROR:
        case E_USER_ERROR:
            $error = 'Fatal Error';
            break;
        default:
            $error = 'Unknown';
            break;
    }

    if ($config->get('config_error_display')) {
        echo '<b>' . $error . '</b>: ' . $errstr . ' in <b>' . $errfile . '</b> on line <b>' . $errline . '</b>';
    }

    if ($config->get('config_error_log')) {
        $log->write('PHP ' . $error . ':  ' . $errstr . ' in ' . $errfile . ' on line ' . $errline);
    }

    return true;
}

// Error Handler
set_error_handler('error_handler');

// Request
$request = new Request();
$registry->set('request', $request);

// Response
$response = new Response();
$response->addHeader('Content-Type: text/html; charset=utf-8');
$registry->set('response', $response); 

// Cache
$cache = new Cache();
$registry->set('cache', $cache); 

// Session
$session = new Session();
$registry->set('session', $session); 

// Language
$languages = array();

$query = $db->query("SELECT * FROM " . DB_PREFIX . "language"); 

foreach ($query->rows as $result) {
    $languages[$result['code']] = $result;
}

$config->set('config_language_id', $languages[$config->get('config_admin_language')]['language_id']);

// Language 
$language = new Language($languages[$config->get('config_admin_language')]['directory']);
$language->load($languages[$config->get('config_admin_language')]['filename']); 
$registry->set('language', $language);      

// Document
$registry->set('document', new Document());         

// Currency
$registry->set('currency', new Currency($registry));        

// Weight
$registry->set('weight', new Weight($registry));

// Length
$registry->set('length', new Length($registry));

// User
$registry->set('user', new User($registry));

// Front Controller
$controller = new Front($registry);

// Login
$controller->addPreAction(new Action('common/home/login'));

// Permission
$controller->addPreAction(new Action('common/home/permission'));

// Router
if (isset($request->get['route'])) {
    $action = new Action($request->get['route']);
} else {
    $action = new Action('common/home');
}

// Dispatch
$controller->dispatch($action, new Action('error/not_found'));

// Output
$response->output();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:36:41.257

这里显然`.htaccess`正在进行重写，因此“公司服务”正在被重写为其他内容。很可能是一个 PHP 页面。

如果您可以看到一个名为 的文件`.htaccess`，那么我建议您阅读此文件以查看正在重写的地址。如果您不理解该`.htaccess`文件，则只需搜索企业服务并将代码粘贴到您的问题中。

有关`.htaccess`重写的更多信息，请查看：

[http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

**更新**

是的，您`.htaccess`正在将地址改写为： [http://www.mycorporateservices.com/index.php？*路线*=企业服务](http://www.mycorporateservices.com/index.php?_route_=Corporate-Services)

因此，如果您想编辑此文件，您需要打开“index.php”并找到一个测试条件，例如：

```
if($_GET['_route_']=='Corporate-Services'){
    // Content Here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:38:53.190

通常 URL 不会模仿文件系统结构 [而且它们不模仿很好]。

实际上，您可能会调用以下内容：

```
http://www.mycorporateservices.com/index.php/Corporate-Services 
```

然后服务器知道如何处理`Corporate-Services`参数 - url 只是由[.htaccess](http://httpd.apache.org/docs/2.2/howto/htaccess.html)脚本重写。

弄清楚安装的框架是如何工作的，但`Corporate-Services/index.php`当然没有办法编辑文件。

# php - PHP Flickr API - 从 flickr.photosets.getInfo 响应中检索标题

> ID：12090604
> 
> 赞同：0
> 
> 时间：2012-08-23T11:32:10.227
> 
> 标签：php, arrays, flickr

我从 Flickr 得到了正确的回复，即：

```
<?xml version="1.0" encoding="utf-8" ?>
<rsp stat="ok">
  <photoset id="72157630469695108" owner="15823425@N00" primary="5110549866" secret="fd716fb5ee" server="1136" farm="2" photos="101" count_views="67" count_comments="0" count_photos="101" count_videos="0" can_comment="0" date_create="1341701808" date_update="1345054078">
    <title>Montana</title>
    <description />
  </photoset>
</rsp> 
```

由于某种原因，我无法获得标题，我尝试了以下方法：

```
$album_info = simplexml_load_file($album_info_xml); // this is what the response is stored in

echo $album_info['photoset']['title'];

foreach($album_info->photoset as $ps) {
    echo $ps['title'];
} 
```

还有其他一些疯狂的事情，我知道这很愚蠢，但不知道我错过了什么。

可以在这里看到响应：http: [//www.flickr.com/services/api/explore/flickr.photosets.getInfo](http://www.flickr.com/services/api/explore/flickr.photosets.getInfo)

只需`72157630469695108`用作集合 id 或使用此 url：[http ://api.flickr.com/services/rest/?method=flickr.photosets.getInfo&api_key=7ccedd2c89ca10303394b8085541d9de&photoset_id=72157630469695108](http://api.flickr.com/services/rest/?method=flickr.photosets.getInfo&api_key=7ccedd2c89ca10303394b8085541d9de&photoset_id=72157630469695108)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:01:10.213

您应该`SimpleXMLElement`直接使用，然后`xpath`找到您的节点。

```
$album_info = new SimpleXMLElement('<?xml version="1.0" encoding="utf-8" ?>
<rsp stat="ok">
  <photoset id="72157630469695108" owner="15823425@N00" primary="5110549866" secret="fd716fb5ee" server="1136" farm="2" photos="101" count_views="67" count_comments="0" count_photos="101" count_videos="0" can_comment="1" date_create="1341701808" date_update="1345054078">
    <title>Montana</title>
    <description />
  </photoset>
</rsp>'); // this is what the response is stored in

$result = $album_info->xpath('//title');

foreach ($result as $title)
{
  echo $title . "\n";
} 
```

[工作示例](http://codepad.viper-7.com/4pWjFH)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:32:14.830

对于处于相同位置的任何人，这都成功了

```
$albumName = $album_info->photoset->title; 
```

# javascript - 如何在 jQuery mobile 中更改按钮文本

> ID：12090612
> 
> 赞同：2
> 
> 时间：2012-08-23T11:32:44.167
> 
> 标签：javascript, button, jquery-mobile, text

> **可能重复：**
> [使用 jquery mobile 更改按钮上的文本。](https://stackoverflow.com/questions/7249256/change-text-on-button-using-jquery-mobile)

我需要更改按钮文本，我使用的是 jQuery mobile。

这是我的html：

```
<fieldset>
    <div><button type="submit" id="login_var">Login</button></div>
    <div><button type="reset" >Reset</button></div>
</fieldset> 
```

我已经尝试了此页面上的所有示例： [LINK](https://stackoverflow.com/questions/4009524/change-button-text-jquery-mobile)并且没有任何东西对我有用。

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:16:34.263

是的，你可以使用

```
$(function(){
  $('#login_var').text('Ok').button('refresh');
}); 
```

根据[http://jquerymobile.com/test/docs/buttons/buttons-methods.html](http://jquerymobile.com/test/docs/buttons/buttons-methods.html)，您只能在按钮上调用三种方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T12:27:21.470

我以前必须做同样的事情，这真的不像它应该做的那么明显。由于 jQM`span`在您的按钮内添加标签，您需要更改跨度内的值：

```
$("#login_var .ui-btn-text").text("NewText"); 
```

同样，如果你想改变图标，你可以这样做：

```
$("#login_var .ui-icon").removeClass("ui-icon-arrow-l").addClass("ui-icon-arrow-r"); 
```

**编辑：** 对不起，我刚刚注意到您在问题中发布的链接具有相同的解决方案，并且您说这对您不起作用。也许如果您将按钮更改为

```
<a data-role="button"></a> 
```

而不是`<button></button>`?

# android - 增强现实

> ID：12090622
> 
> 赞同：2
> 
> 时间：2012-08-23T11:33:12.893
> 
> 标签：android, augmented-reality

如果 POI 在我的数据库中，例如 POINT(-lat long) 用于我的数据库中的位置，那么如何以 json 结构传递 mixare 中的数据库数据。

这些是 json 结构： [http ://code.google.com/p/mixare/wiki/DisplayYourOwnData](http://code.google.com/p/mixare/wiki/DisplayYourOwnData)

请尽快建议我一些带有步骤的输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:45:26.730

我会坚持你`GSON`在这种情况下使用并将数据从数据库中提取到 HashMap/List 或任何可以轻松转换为的集合中`JSONObject`or `JSONArray`，

例如：-

```
Map<String, Object> map = new HashMap<String, Object>();
map.put("name", "Sriram");
map.put("age", 2);
map.put("dob", new Date(110, 4, 6));
map.put("hobby", "painting");

Gson gson = new GsonBuilder().setPrettyPrinting().create();
String jsonStr = gson.toJson(map);
System.out.println(jsonStr); 
```

**输出：**

```
{
  "dob": "May 6, 2010 12:00:00 AM",
  "age": 2,
  "name": "Sriram",
  "hobby": "painting"
} 
```

结帐[`this`](http://bethecoder.com/applications/tutorials/json/google-gson.html)链接，用于从集合到 JSON 和 JSON 到集合的进一步转换。

# java - Java 5 上的 JAX-WS RI

> ID：12090624
> 
> 赞同：4
> 
> 时间：2012-08-23T11:33:15.443
> 
> 标签：java, jax-ws, java-5

首先，根据[文档](http://jax-ws.java.net/nonav/2.2.7/docs/ch02.html#required-software)，JAX-WS 参考实现应该适用于 Java 5。

然而，最新版本 (2.2.7) 的二进制包是使用 Java 6（类版本 50.0）编译的，因此在 Java 5 中使用它会导致抛出 UnsupportedClassVersionError。我已经下载了 Java 源代码并尝试用 Java 5 编译它们，但是由于依赖库是为 Java 6 编译的，所以这也不能直接工作。我尝试使用“-target 1.5”使用 Java 6 编译一个新版本，以至少在编译文件中获得正确的类版本，但我不确定我是否遇到其他问题，如果在某个时候实际实现需要 Java 6 或更高版本。

有谁知道最新的 JAX-WS RI 版本，它可以与 Java 5 一起使用而没有类似的变通方法？

* * *

编辑：

至少要回答我的问题的一部分，JAX-WS RI 实现利用了 Java 6 SE API 中的新功能，并且不会在 Java 5 上运行，即使这些类是针对目标 1.5 编译的。至少 org.jvnet.ws.message.BasePropertySet 类使用了 java.util.AbstractMap$SimpleImmutableEntry 类，该类仅在 Java 1.6 之后才可用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:38:46.917

根据我的经验，JAX-WS RI 版本 2.2.5 是最后一个使用 Java 5 的版本。

# javascript - 在 JQuery 中的 HTML5 页面之间传递参数

> ID：12090627
> 
> 赞同：1
> 
> 时间：2012-08-23T11:33:25.827
> 
> 标签：javascript, jquery, json, html

情况如下：

我有一个 HTML5 演示应用程序。我的数据库是一个外部 JSON 文件。在第一页（登录后不久），数据通过 GetJSON 命令从 JSON 中读取并呈现为交互式图形。

用户选择的数据被捕获在一个整数数组中，该数组保存每个所选项目的主键。

下一页需要执行提取所选项目的所有详细信息并进行比较。

我有两个选择：

1.  构建所选患者数据的 JSON 并将其传递给下一页
2.  传递包含所选主键的数组，对整个数据执行另一个 GetJSON。

**问题**

1.  哪个是更好的选择？
2.  如何在页面之间传递 javascript 数组/JSON 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:29:18.090

正如 Maz 所说，解决这种情况的最佳方法是将所有内容放在同一个页面中！传递值没有问题！

由于我们不导航到不同的页面，因此还保留了先前完成的设置。

我已将图表放在一个 div 中，并将向下钻取的详细信息放在另一个 div 中。

我有选择地隐藏和取消隐藏这些 div。

# ruby - EventMachine DeferrableChildProcess 错误处理

> ID：12090635
> 
> 赞同：3
> 
> 时间：2012-08-23T11:34:05.123
> 
> 标签：ruby, eventmachine, child-process

我在`EventMachine::DeferrableChildProcess.open`实际进行任何类型的错误处理时遇到问题。希望我做错了。这是一个例子：

```
require "eventmachine"
EM.run do
  cp = EM::DeferrableChildProcess.open("ls /trololo")
  cp.callback { |data| puts "Received some data: '#{data}'" }
  cp.errback { |err| puts "Failed: #{err.inspect}" }
end 
```

我希望这段代码的结果（假设您的系统上实际上没有`/trolol`目录）是：“失败：<SomeErrorObject>”。相反，我得到“收到一些数据：''”。`ls`雪上加霜的是，由("ls: cannot access /trololo: No such file or directory")引起的错误消息以某种方式打印到 stderr。

我做错了什么，还是基本上没有错误处理`EM::DeferrableChildProcess.open`？我得到了类似的结果`EM.popen`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:25:42.567

好的，看看 EventMachine 的实现，我可以清楚地看到它`DeferrableChildProcess`只是假设成功 -`errback`永远不会被调用。我想目的是您在自己的回调中必须`get_status`弄清楚发生了什么。我不关心那个 API，所以我写了一个错误处理`DeferrableChildProcess`：

```
class DeferrableChildProcess < EventMachine::Connection
  include EventMachine::Deferrable

  def initialize
    super
    @data = []
  end

  def self.open cmd
    EventMachine.popen(cmd, DeferrableChildProcess)
  end

  def receive_data data
    @data << data
  end

  def unbind
    status = get_status
    if status.exitstatus != 0
      fail(status)
    else
      succeed(@data.join, status)
    end
  end
end 
```

# javascript - jquery 多选复选框值

> ID：12090639
> 
> 赞同：0
> 
> 时间：2012-08-23T11:34:22.440
> 
> 标签：javascript, jquery

我正在使用 Jquery 多选复选框插件，将返回的 (CSV) 值转换为数组时出现错误。虽然严格来说这不是一个 jQuery 问题，但它似乎会在标准 js 方法上引发错误。这是我所拥有的：

```
$(function(){
    $("select").multiselect({
         click: function(e){
            if( $(this).multiselect("widget").find("input:checked").length > 4 ){
                return false;
            }
        },
        close:function(evt, ui) {                   // Get the selected values upon close
            var which = $(this).attr('id');         // Find out which selectbox was open
            var checkedVals = $('#'+which).val();   // Get CSV string of checked options
            var valArray = checkedVals.split(',');  // convert CSV string to array
                for(a in valArray) {
                    currentBox = ('#'+which+'Box');         // Find current selectbox wrapper
                    var eHeight;                            
                    eHeight = $('p'+currentBox).height();   // Current wrapper height
                    $('p'+currentBox).height(eHeight+18);   // Add 18px to current wrapper for each Value
                    $('p'+currentBox).append('<div style="line-height:18px; margin-left:90px;"><a href="#"><img class="deleteVal" src="images/closewin.png" align="texttop" border="0"></a> '+valArray[a]+'</div>');
                }
        }
    }).multiselectfilter(); 
```

我得到一个逗号分隔的字符串，我想使用 js 将它放入一个数组中。错误 - “checkedVals.split is not a function” - 在这一行抛出： var valArray = checkedVals.split(',');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:11:35.517

你必须做两件事

1.  确保您已`multiple`在 html 中设置属性

    `<select id="select" multiple="multiple">`

2.  无需转换为数组。`val`将给出所选选项值的数组（ NOT CSV ）。

    `var valArray = $('#' + which).val();`

演示：http: [//jsfiddle.net/diode/32h2g/3/](http://jsfiddle.net/diode/32h2g/3/)

# python - 读取特定文件夹中的多个 XML 文件 - Python

> ID：12090640
> 
> 赞同：0
> 
> 时间：2012-08-23T11:34:25.233
> 
> 标签：python, xml, file, directory

我需要你们一点帮助。

我是编程新手，所以不要对我的代码有太多期望。

事情是这样的，我需要解析文件夹中的一堆 XML 文件并将其写入 .xls 或 .csv 中。到目前为止，我已经解析了 xml 并将其写入 .txt，但我使用它的文件位于程序所在的同一文件夹中。

这是代码：

```
from xml.dom import minidom

from datetime import *

ano = int(input("Year: "))

mes = int(input("Month: "))

dia = int(input("Day: "))

dt_obj = datetime(ano, mes, dia)

date_str = dt_obj.strftime("%Y-%m-%d")

#Extracting the information from the XML nodes

xmldoc = minidom.parse("NAME OF THE FILE.XML")

NFe = xmldoc.getElementsByTagName("NFe")[0]

infNFe = NFe.getElementsByTagName("infNFe")[0]

ide = infNFe.getElementsByTagName("ide")[0]

nNF = ide.getElementsByTagName("nNF")[0].firstChild.data

dEmi = ide.getElementsByTagName("dEmi")[0].firstChild.data

serie = ide.getElementsByTagName("serie")[0].firstChild.data

emit = infNFe.getElementsByTagName("emit")[0]

cnpj = emit.getElementsByTagName("CNPJ")[0].firstChild.data

nfeProc = xmldoc.getElementsByTagName("nfeProc")[0]

chNFe = nfeProc.getElementsByTagName("chNFe")[0].firstChild.data

try:

    # This will create a new file or **overwrite an existing file**.

    f = open(date_str+".txt", "w")
    try:
        f.write("CNPJ: "+cnpj) # Write a string to a file
        f.writelines("\nNUMERO DA NOTA: "+nNF)
        f.write("\nDATA DE EMISSAO: "+dEmi)
        f.write("\nSERIE: "+serie)
        f.write("\nCHAVE ELETRONICA: "+chNFe)
    finally:
        f.close()
 except IOError:
    pass 
```

我已经成功读取 XML，解析它并从我需要的节点写入信息。

我现在需要的是读取一个包含一堆文件夹并在 .XLS 上书写

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:45:41.623

如果 xml 文件位于单个文件夹中，您可以执行以下操作：

```
import os
import sys

def select_files_in_folder(dir, ext):
    for file in os.listdir(dir):
        if file.endswith('.%s' % ext):
            yield os.path.join(dir, file)

for file in select_files_in_folder(sys.argv[1], 'xml'):
    process_xml_file(file) 
```

或者，如果文件可以位于子文件夹中，请使用：

```
def select_files_in_subfolders(dir, ext):
    for root, dirs, files in os.walk(dir):
        for file in files:
            if file.endswith('.%s' % ext):
                yield os.path.join(dir, file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:41:56.087

试穿这个尺寸。

```
from xml.dom import minidom
from datetime import *

ano = int(input("Year: "))
mes = int(input("Month: "))
dia = int(input("Day: "))
dt_obj = datetime(ano, mes, dia)
date_str = dt_obj.strftime("%Y-%m-%d")

#Extracting the information from the XML nodes

def get_files(d):
        return [os.path.join(d, f) for f in os.listdir(d) if os.path.isfile(os.path.join(d,f))]

def parse(files):
    for xml_file in files:
        xmldoc = minidom.parse(xml_file)
        NFe = xmldoc.getElementsByTagName("NFe")[0]
        infNFe = NFe.getElementsByTagName("infNFe")[0]
        ide = infNFe.getElementsByTagName("ide")[0]
        nNF = ide.getElementsByTagName("nNF")[0].firstChild.data
        dEmi = ide.getElementsByTagName("dEmi")[0].firstChild.data
        serie = ide.getElementsByTagName("serie")[0].firstChild.data
        emit = infNFe.getElementsByTagName("emit")[0]
        cnpj = emit.getElementsByTagName("CNPJ")[0].firstChild.data
        # now whatever you want...

parse(get_files(DIRECTORY)) 
```

DIRECTORY 是 XML 文件所在的位置。

由于这只是您代码的一部分，您需要自己填写其余部分。你没有提供你想写的确切内容，或者你想写的格式....

可以帮助您编写 CSV 文件的东西：

```
# csv_lovation is a location os a *.csv file, and contents is a list of lists:
# ( [ ["row1 item1", "row1 item2", "row1 item3"], ["row2 item1", "row2 item2", "row2 item3"] ] )
def write_csv(csv_location, contents):
    with open(csv_location, "w") as file_writer:
        file_writer.write("Header,Items,Here\n") #if you have no need for a header, remove this line.
            for line in contents:
                file_writer.write("%s\n" % ",".join(line)) 
```

# wordpress - 是否可以将 wordpress 自定义帖子类型转换为普通类别

> ID：12090643
> 
> 赞同：1
> 
> 时间：2012-08-23T11:34:31.793
> 
> 标签：wordpress, wordpress-theming, custom-post-type

目前，我们网站的视频以自定义帖子类型发布。我们完全改变了主题并添加了许多新功能。对于我们的新网站，我们正在尝试将视频更改为类别。（自定义帖子类型为普通类别）。这可能吗。我已将自定义帖子类型导出为 XML 文件，但我不知道如何将其更改为类别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T17:58:30.807

终于有答案了。在我开始之前 这些是我正在使用的条件。

*   自定义帖子类型（称为*video*）需要合并到默认*帖子中*
*   视频有自己的自定义类别，需要合并到默认类别中
*   所有 Video 都需要获取一个类别*video*，旧类别需要是新创建的*视频*类别的子类别。

步骤零：**备份我的 sql 备份**

首先在默认的 posttype 中创建一个视频类别。请注意它的 ID（它位于 url 下的类别编辑页面中`tag_ID`。我在示例中假设 ID 为 4

其次，我们使用以下 Sql 将此类别分配给视频 posttype：

```
INSERT INTO `wp_term_relationships` (`object_id`, `term_taxonomy_id`)
SELECT `ID`, '4' FROM `wp_posts` WHERE `post_type` = 'video'; 
```

接下来，我们将现有的自定义类别指定为子类别。您需要在 url 中的自定义类别页面 agian 上找到的视频类别 slug，带有`taxonomy`.

```
UPDATE `wp_term_taxonomy` SET `parent` = 4, `taxonomy` = 'category' WHERE `taxonomy` = 'VIDEO CATEGORYSLUG'; 
```

最后一步是将普通 posttype 分配给自定义 posttype。

```
UPDATE `wp_posts` SET `post_type` = 'post' WHERE `post_type` = 'video'; 
```

现在应该完成并且所有内容都应该合并。所以测试测试测试。
之后，可以禁用制作 posttype 的代码。

这应该有效，如果您有问题，请提出。

# wcf-data-services - WCF 数据服务中错误处理的最佳实践

> ID：12090651
> 
> 赞同：2
> 
> 时间：2012-08-23T11:34:46.073
> 
> 标签：wcf-data-services, odata

从 Wcf 数据服务抛出异常并从 .net 客户端捕获它们的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:48:29.267

一般来说，我不确定是否有很多最佳实践，但这里有一些想法可能会有所帮助。

1.  默认情况下，WCF 数据服务不会将异常详细信息传输到客户端。这是因为我们认为默认情况下服务应该是安全的。传输异常详细信息可能会导致无意的信息泄露。要打开详细的异常传输，您需要将`ServiceBehavior`属性添加到您的服务并设置`UseVerboseErrors`为 true：

 ````
using System.Data.Services;
using System.Data.Services.Common;
using System.ServiceModel;

namespace Scratch.Web
{
    [ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    public class ScratchService : DataService<ScratchEntityFrameworkContext>
    {
        public static void InitializeService(DataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("*", EntitySetRights.All);
            config.SetServiceOperationAccessRule("*", ServiceOperationRights.AllRead);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
            config.UseVerboseErrors = true;
        }
    }
} 
```

1.  如果您在服务器端抛出异常，则只有消息在功能上传输到客户端，因此请确保异常消息包含您希望在客户端显示的内容。
2.  除此之外，只需遵循客户端上异常处理的其他最佳实践：http: [//msdn.microsoft.com/en-us/library/seyhszts.aspx](http://msdn.microsoft.com/en-us/library/seyhszts.aspx)。`

# couchbase - Couchbase 2.0 与 Couchbase 1.8？

> ID：12090656
> 
> 赞同：5
> 
> 时间：2012-08-23T11:35:03.987
> 
> 标签：couchbase, membase

我正在评估一些用于大规模（数十亿条目，数 TB 数据）存储解决方案的数据库可能性，我们将几乎完全进行随机主键查找。

鉴于它的功能，`Membase`( `Couchbase 1.8`) 看起来几乎完美契合，并且之前的一些测试使我们相信它对于我们的用例来说是高性能的。不过，我们对使用它的主要担忧是，由于`Couchbase 2.0`看起来像是一个全新的方向`1.8`，产品的特性可能会发生变化。我们喜欢`Couchbase 1.8`它，因为它可以很好地满足我们的需求。

我们不需要视图或 map/reduce 功能。虽然这些都是不错的功能，但如果它们完全不利于性能，它们不是我们需要的东西，也不是我们想要的东西。我们排除了`CouchDB`主要是因为扩展（添加/删除节点）的复杂性，这在 Couchbase 中当然*要*好得多，但也因为我们对它的磁盘使用有一些担忧。

是否有人知道为`1.8`vs所做的任何性能测量`2.0`，而忽略了所有视图和 M/R 功能？

分叉会`1.8`继续维护吗？还是`1.8`死了，我们应该继续前进？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T19:46:10.517

Couchbase 1.8 和 2.0 之间的性能没有重大差异。我是一名 Couchbase 员工，对我们来说最重要的事情之一是现有客户能够从 Couchbase 1.8 升级到 Couchbase 2.0，无论视图对他们是否重要，并且他们的应用程序可以继续以相同的水平运行。

我建议从 Couchbase 1.8 开始，因为我们的 2.0 产品要到 2012 年 10 月末才会发布，但是到了升级到 2.0 的时候，您应该不会有任何问题。

**注意：**截至 2012 年 12 月，Couchbase 2.0 已经可用

# asp.net-mvc-3 - 如何在 MVC3 项目开始时运行方法？

> ID：12090657
> 
> 赞同：0
> 
> 时间：2012-08-23T11:35:10.367
> 
> 标签：asp.net-mvc-3

我需要从数据库中填充一个元素，这是我编译/运行我的 MVC3 应用程序时的第一件事。我有一个静态类和静态方法来填充元素。我只需要知道如何在我的应用程序启动时以某种方式调用该方法。

这是代码：

```
public static class Select_Brands
    {
        public static IQueryable<Brand> BrandsQ { get; set; }

        public static IQueryable<Brand> GetBrands()
        {
            using (Online_Store_DBEntities EFModel = new Online_Store_DBEntities())
            {
                BrandsQ = EFModel.Brands;
            }
            return BrandsQ;
        }
    } 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:40:47.383

在每个 MVC 应用程序中，您都有一个 Global.asax，就像在 ASP.NET 应用程序中一样，您可以在 Application_Start() 方法中运行代码。

但是您应该考虑将数据保存在哪里以及您真正使用它的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:38:40.883

文件中有一个`global.asax`名为的方法`Application_Start`- 听起来这可能是您想要的候选者。

# php - 将所有页面放在子文件夹中是否很典型？即使是单页？

> ID：12090658
> 
> 赞同：0
> 
> 时间：2012-08-23T11:35:11.393
> 
> 标签：php, html, directory, directory-structure

我越来越多地发现显示这种链接的网站：

```
website.com/page/ 
```

并测试文件夹内是否有 index.php

```
website.com/page/index.php 
```

我发现总是正确的。

**所以我的问题：**

将所有页面放在子文件夹中是否是一种常用方法，即使它是一个您也可以轻松放入根文件夹（在本例中为 page.php）的文件，或者是否有“常见”重写？如果是，我想知道这种情况下典型的文件夹结构是什么样的。

我只是有点困惑，不想在未来的项目中“做错”。

此外：这种技术会影响 SEO 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:40:55.423

如果它是一个静态站点，那么是的，在子文件夹中只有一个页面并将该页面命名为 index.html 或 index.php 是很常见的，因为大多数服务器都配置为在不显示文件名的情况下获取该页面。

这样做的一个原因是，如果将来创建的页面自然会位于该子文件夹下，那么它会使您的站点结构和站点地图保持整洁。

如今，许多 CMS 系统即时复制这种结构。

出于 SEO 目的，最好有描述性的目录名称和/或页面名称，即

news/the-title-of-my-news-article.php

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:41:19.910

URI 通常与文件的实际结构无关。以 Stack Overflow 为例：这个页面的 URL 是

```
http://stackoverflow.com/questions/12090658/is-it-typical-to-put-all-pages-in-subfolders-even-if-its-a-single-page 
```

如果我们按照您的逻辑，这意味着 stackoverflow 有一个包含所有问题的 questions 文件夹，然后是**每个（超过 200 万个）问题**的特定 ID 文件夹，然后是另一个具有完整名称的文件夹，其中包含一个索引文件。

不，事实并非如此。URL 经常被重写以增加应用程序的复杂性。

* * *

至于你的具体问题，也许有特殊含义，也许没有，由站长决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T11:41:26.407

即使您在点击`website.com/page/index.php`而不是时得到一些结果`website.com/page`，也不意味着那里有文件。事实上，这并不意味着甚至有一个名为“页面”的文件夹：它的力量`mod_rewrite`可以很容易地改变 URL

`http://example.com/page/index.php`

... 进入

`http://example.com/index.php?controller=page`

...因此每次有人查询此应用程序时都会执行一个文件（单前端控制器设计）。遵循这种方法，无需为每个可能的用户故事创建大量文件夹。

但是确实应该将 Web 应用程序组织成模块（反过来，这些模块通常组织为`/modules`应用程序子文件夹的子子文件夹）。有一个非常流行的范例——MVC；PHP 框架和基于这种语言的 CMS 非常常用它，但没有必要使用其中之一来遵循它。也许[本教程](http://php-html.net/tutorials/model-view-controller-in-php/)对于向您介绍 PHP 中的 MVC 可能有用？

# csv - 使用 Play 下载 .csv！框架

> ID：12090659
> 
> 赞同：2
> 
> 时间：2012-08-23T11:35:15.540
> 
> 标签：csv, download, playframework-2.0

**编辑**

根据我所了解到的（来自 nico_ekito 的评论），无法使用 ajax 调用来下载文件。解决方案是创建一个`<iframe>`将下载文件的隐藏文件，如[here](https://stackoverflow.com/questions/676348/allow-user-to-download-file-using-ajax)所述。

* * *

**问题**：浏览器不显示下载对话框。任何浏览器 - ff、opera、chrome、safari 等。

我阅读了有关服务文件的[文档](https://github.com/playframework/Play20/wiki/JavaStream)，发现[了这个问题](https://stackoverflow.com/questions/2868225/not-being-prompted-to-download-csv-file)，并在此基础上写道：

```
Controller.response().setContentType("text/csv");
Controller.response().setHeader("Content-Disposition", "attachment;filename=public/export/filename.csv");
Controller.response().setHeader("Cache-control", "private");

return ok(CSV.export(data, filename)); 
```

在哪里`CSV`上课：

```
public class CSV{
    public static File export(Map<String, String> data, String filename){
        String csv = data.get("data[saveMe]");

        try {
            BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream("public/export/" + filename), "UTF-8"));
            bw.write(csv);
            bw.newLine();
            bw.flush();
            bw.close();
        }catch(UnsupportedEncodingException e){}
        catch(FileNotFoundException e){}
        catch(IOException e){}

        File downloadMe = new File("public/export/" + filename);

        return downloadMe;
    }
} 
```

在客户端，我`dojo`用来发送`POST`请求（我也尝试过`GET`，结果是一样的）：

```
xhr.post({
    url: '/exportData/',
    content: {
        saveMe: str
    }
}).then(function(response){
    //do sth 
}); 
```

响应标头如下所示：

```
Cache-Control       private
Content-Disposition attachment;filename=public/export/filename.csv
Content-Type        text/csv
Transfer-Encoding   chunked 
```

`POST`firebug 中的选项卡以正确的 csv 格式显示正确的数据。要使用 csv 样式格式化数据，我使用[dojox/grid/enhanced/plugins/exporter/CSVWriter](http://dojotoolkit.org/reference-guide/1.8/dojox/grid/EnhancedGrid/plugins/Exporter.html#prerequisites)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:09:36.643

我认为不可能从 Ajax 请求中下载文件，请参阅这个问题：[Allow User to Download File using Ajax](https://stackoverflow.com/questions/676348/allow-user-to-download-file-using-ajax)

您应该按照问题中的建议使用 iframe，或者使用包含您的数据的标准 HTML 表单，并在此表单上发帖。

# java - spring mvc3 映射根 url

> ID：12090663
> 
> 赞同：0
> 
> 时间：2012-08-23T11:35:26.380
> 
> 标签：java, spring, tomcat, spring-mvc

我对spring mvc3很陌生。我的问题是，当我在 tomcat 上托管我的应用程序“myApp”时，基本网址是`http://localhost:8080/myApp/...`

我想知道在我的应用程序中如何将“/”自动映射到“myApp”。这样我就不必在我的代码中添加我的应用程序的名称。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:38:14.567

你需要打开tomcat实例的server.xml，`<Context>`到你的名字对应的定义中，将`path`属性设置为空字符串“”。

# template-toolkit - 模板工具包中的 Switch Case 语句

> ID：12090666
> 
> 赞同：0
> 
> 时间：2012-08-23T11:35:40.317
> 
> 标签：template-toolkit

我想在模板工具包中实现 switch case 语句。我的代码如下：

```
[% SWITCH myvar %]
[% CASE > 4 %]
Value is amplified
[% CASE < 1%]
Value is Deleted
[% CASE %]
Normal Value
[%END%] 
```

我收到一条错误消息，提示“<”和“>”是我脚本​​中的意外标记。谁能帮我解决这个问题。我最好不要使用 IF 语句，因为它会降低脚本的执行速度。上面有没有其他选择。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:37:58.673

模板代码不支持除相等或 in-list 之外的任何内容，如[精美手册中所述](http://template-toolkit.org/docs/manual/Directives.html#section_SWITCH_CASE)。

话虽如此，如果将`CASE`语句编译为执行速度比`IF ... ELSIF ... END`. 事实上，我会把钱花在将任何一种语法编译成完全相同的东西上。您也可以将其编写为三元运算符序列，但我仍然认为在速度方面没有区别。

```
[%- IF myvar > 4;
        "Value is amplified";
    ELSIF myvar < 1;
        "Value is Deleted";
    ELSE;
        "Normal Value";
    END; -%] 
```

...或者...

```
[%- (myvar > 4) ? "Value is amplified" :
    (myvar < 1) ? "Value is Deleted" : "Normal Value" -%] 
```

# c# - 创建具有通用返回类型的函数

> ID：12090667
> 
> 赞同：4
> 
> 时间：2012-08-23T11:35:43.313
> 
> 标签：c#, asp.net, generics, types

目前我有以下功能

```
 public int GetVariableValue(TaxReturn taxReturnObj, string identityKey)
    {
        int returnTypeOut = 0;
        if (taxReturnObj.Identity.ContainsKey(identityKey))
        {
            int.TryParse(taxReturnObj.Identity[identityKey], out returnTypeOut);
        }
        return returnTypeOut;
    } 
```

要检索我们使用以下代码的值，

例如

```
int valPayStatus = GetVariableValue(objTaxretrun, TaxReturnIdentity.aadata_identity_paystatus) 
```

到目前为止，它工作正常，因为所有**标识**值都是整数，但最近我们添加了具有字符串和布尔类型的新标识。所以我想将上述功能设为**通用**......但我不知道该怎么做，我试图在谷歌上搜索但找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:40:41.397

我会这样做，也许有更好的方法；

```
public T GetVariableValue<T>(TaxReturn taxReturnObj, string identityKey)
        {
            if (taxReturnObj.Identity.ContainsKey(identityKey))
            {
                if(typeof(T) == Int32)
                {     
                    int returnTypeOut = 0;
                    int.TryParse(taxReturnObj.Identity[identityKey], out returnTypeOut);
                    return returnTypeOut;
                }
                else if (typeof(T) == System.String)
                {
                //code here
                }
            }
            return default(T);
        } 
```

你可以这样称呼它

```
int valPayStatus = GetVariableValue<int>(objTaxretrun, TaxReturnIdentity.aadata_identity_paystatus)

string valPayStatusStr = GetVariableValue<string>(objTaxretrun, TaxReturnIdentity.aadata_identity_paystatus) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T11:49:02.153

```
 public T GetVariableValue<T>(TaxReturn taxReturnObj, string identityKey) 
    { 
        if (taxReturnObj.Identity.ContainsKey(identityKey)) 
        { 
            return (T) Convert.ChangeType(taxReturnObj.Identity[identityKey], typeof(T));
        }
        else
        {
           return default(T);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T11:44:19.590

```
public T GetVariableValue<T>(TaxReturn taxReturnObj, string identityKey)
{
    if (taxReturnObj.Identity.ContainsKey(identityKey))
    {
        return (T)taxReturnObj.Identity[identityKey];
    }
    return default(T);
} 
```

像这样的东西？并不意味着如果您将错误的类型传递给它，它就不会抛出异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T11:46:53.283

你可以尝试这样的事情：

```
public T GetVariableValue<T>(TaxReturn taxReturnObj, string identityKey)
{
    if (taxReturnObj.Identity.ContainsKey(identityKey))
    {
        return taxReturnObj.Identity[identityKey];   
    }
    return default(T);
} 
```

如果您`key`在字典中找到 ，`Identity`则返回该特定值，而不对其进行解析，或者您可以返回该`default`值

# android - 将按钮从一个类访问到另一个类

> ID：12090668
> 
> 赞同：0
> 
> 时间：2012-08-23T11:35:50.410
> 
> 标签：android

我在 A.Class 中声明了一个按钮并设置为禁用。

```
public static Button s1=(Button)findViewById(R.id.sn1);
s1.setEnabled(false); 
```

现在我想在另一个类（B.class）中启用这个按钮 我尝试通过给 Button s2=A.s1; 来启用这个按钮；但它抛出一个错误，说“无法从类型 Activity 对非静态方法 findViewById(int) 进行静态引用”

请帮助我纠正错误

```
 `First Class:

    public class Mapper extends Activity implements OnClickListener 
    {
public static int sng=0,c=0;
public static double lat;
public static double lon;
public String placenametemp;
public Bundle savedInstanceState;
public static int chk= MapMe.check;
 LocationManager locman1= MapMe.locman;
 MyOwnLocationOverlay mylocover=MapMe.myLocationOverlay;
public MediaPlayer msong=MapMe.mp;
***public Button s1=(Button)findViewById(R.id.sn1);***

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

 // Add Click listeners for all buttons
    View firstButton = findViewById(R.id.geocode_button);
    firstButton.setOnClickListener(this);
    View secondButton = findViewById(R.id.latlong_button);
    secondButton.setOnClickListener(this);
    View thirdButton = findViewById(R.id.presentLocation_button);
    thirdButton.setOnClickListener(this);
    View selectsong=findViewById(R.id.song_select);
    selectsong.setOnClickListener(this);
    s1.setOnClickListener(this);
    s1.setEnabled(false);

    }
 }

Second Class :
    public class MapMe extends MapActivity implements LocationListener 
  {

Button s1=(Button)findViewById(R.id.sn1);
public void onCreate(Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);  // Suppress title bar to give more space
    setContentView(R.layout.mapme); 

    updateGPSprefs();

    // Set up location manager for determining present location of phone
    locman = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 

    // Listener for GPS Status...   
    final GpsStatus.Listener onGpsStatusChange = new GpsStatus.Listener(){
        public void onGpsStatusChanged(int event){
            switch(event){
                case GpsStatus.GPS_EVENT_STARTED:
                    // Started...
                break;
                case GpsStatus.GPS_EVENT_FIRST_FIX:
                    // First Fix...
                    Toast.makeText(MapMe.this, "GPS has First fix",       
                     Toast.LENGTH_LONG).show();
                break;
                case GpsStatus.GPS_EVENT_STOPPED:
                    // Stopped...
                break;
                case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
                    // Satellite update
                break;
            }
            GpsStatus status = locman.getGpsStatus(null);

            Iterable<GpsSatellite> satlist = status.getSatellites();
        }
    };
   public  void fu(double a,double b,double c,double d)
{

    if((val==0)&&(val1==0))
            {
        mp.reset();
        try {

            check=1;
            System.out.println("matched");
            mp.setDataSource(link1);
            mp.prepare();
            mp.start();
            Toast.makeText(MapMe.this, "playing", Toast.LENGTH_LONG).show();
            System.out.println("Song button1");
            ***s1.setEnabled(true);***
           System.out.println("Song button");
        }

        catch(Exception e)
        {

        }
        } 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:51:26.033

您在错误的位置调用 findViewById() 。您应该从一些非静态方法（如 onCreate()）中调用它。这个方法，即 findViewById() 是非静态的，所以你不能像你提到的那样调用它。因此，您应该将变量声明为静态，然后在活动的 onCreate() 中设置其值。

为什么不直接在 B 类中调用 findViewById() 然后禁用视图。只要视图在当前加载的布局中可用，B 类中的以下代码就可以完成您的工作。

```
Button s1=(Button)findViewById(R.id.sn1);
s1.setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:38:48.147

A类内部：

```
public static Button s1=(Button)findViewById(R.id.sn1);
s1.setEnabled(false); 
```

B类内部：

你应该写：`A.s1.setEnabled(true);`

**已编辑**

在 Mapper.java 里面：

```
Class Mapper extends Activity{

public static Button s1;
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                s1=(Button)findViewById(R.id.sn1);
                s1.setEnabled(false);

    }
} 
```

在 Mapme.java 里面：

```
Class Mapme extends Activity{

@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_new);

                Mapper.s1.setEnabled(true);

    }
} 
```

试试这个。可能会帮助你。

# javascript - Javascript 正则表达式替换 HTML 标签

> ID：12090672
> 
> 赞同：3
> 
> 时间：2012-08-23T11:36:16.507
> 
> 标签：javascript, jquery, html, regex

使用正则表达式有很多困难。

这是我想要做的......

```
text<div> text </div><div> text </div><div> text </div> 
```

把它变成

```
text<br> text<br>text<br>text 
```

我试过做...

```
newhtml = newhtml.replace(/\<div>/g,'<br>');
newhtml = newhtml.replace(/\</div>/g,' '); 
```

但这给出了错误的输出。jquery 是否提供了更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T11:41:21.657

那是因为你转义了错误的东西，因为只有反斜杠需要转义。

```
newhtml = newhtml.replace(/<div>/g,'<br>');
newhtml = newhtml.replace(/<\/div>/g,' '); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:01:56.507

是的，你是对的，jQuery 确实提供了一种更好的方法来做到这一点。

[先读个有趣](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)的 。

简单，优雅，解决您的具体问题。

```
$('div').replaceWith(function(){
  return "<br>"+$(this).html();
});​ 
```

[jsFiddle](http://jsfiddle.net/db7Jm/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T11:42:40.630

这必须完成工作：

```
text.replace(/(<\/?\w+?>)\s*?(<\/?\w+?>)|(<\/?\w+?>)/g,'<br>') 
```

尽管这仅在没有具有某些属性的标签时才有效，例如`<div id="foo1">` 您不需要`<`像在示例中那样转义，但是您确实需要转义`/`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T11:53:11.073

如果不需要，不要使用正则表达式；只需替换字符串文字。

```
text.replace("<div>","<br>").replace("</div>",""); 
```

注意：此解决方案完全适用于**这种**情况，我通常不会反对使用正则表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T11:54:00.243

一种简单的方法如下：

```
$('.container').html(function(i, html) {
    return html.replace(/<(|\/)div>/g, function(match) {
        return match == '<div>' ? '<br>' : '';
    });
}); 
```

`/<(|\/)div>/`: 匹配`<div>`或`</div>`。

[**演示**](http://jsfiddle.net/ricardolohmann/e5aXY/)

**注意**：`.container`是放置 html 的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T12:05:22.387

使用 JQuery 的一个班轮

```
newhtml = $(newhtml ).text().split(' ').join('<br/>'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-04T08:36:57.673

您可以使用简单的 RegExp 来实现此目的

`output = inputText.replace(/<\w{0,}\W{0,}>|<\W{0,}\w{1,}>/ig, "With whatever you want it to be replaced with")`

或者你可以这样做

```
String.prototype.replaceTags = function( replacementText )
{      
    var x = new RegExp( "(" + replacementText + ")+" , "ig");
    return this
           .replace( /<\w{0,}\W{0,}>|<\W{0,}\w{1,}>/ig, replacementText )
           .replace( x, replacementText )  
} 
```

然后直接在String上调用如下

`"text<div> text </div><div> text </div><div> text </div>".replaceTags( "<br>" )`

你会得到这个——`"text<br> text <br> text <br> text <br>"`

这将搜索字符串中以“<”开头的部分，其中包含“div/p/br”之间的一些文本，如果标签以“/”结尾，最后是“>”标签的结束。当您不确定元素是用大写还是小写写成时，忽略大小写会有所帮助。

# android - Linux上的Android模拟器超慢

> ID：12090678
> 
> 赞同：1
> 
> 时间：2012-08-23T11:36:25.073
> 
> 标签：android, linux, performance, emulation, tablet

又一个“慢模拟器”！线程，但不完全。通常人们抱怨启动时间 - 对我来说没关系，我启用了快照选项。我的模拟器的问题是 GUI 非常无响应 - 我的意思是我必须等待大约 3-4 秒，让模拟器注册我对按钮的点击。由于我没有物理设备，我不得不使用这个模拟器。

我正在模拟的设备是 Galaxy Tab 2 10.1，这意味着 WXGA800 和大分辨率 (800x1280)。我已将设备 RAM 大小设置为 1024。

我正在运行 Linux - 如果它有任何区别（因为糟糕的图形驱动程序）。

那么我能做些什么来让它更具响应性呢？我可以忍受最多 1 秒的延迟，但不能更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:42:46.420

我不知道您的问题有什么好的解决方案，但您可以尝试在 Virtualbox 上使用 Android。在这里，您有带有 .iso 文件的站点：

```
http://www.android-x86.org/download 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:03:06.380

您可以尝试 Google 的新 x86 模拟器。

> [http://android-developers.blogspot.de/2012/04/faster-emulator-with-better-hardware.html](http://android-developers.blogspot.de/2012/04/faster-emulator-with-better-hardware.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T12:43:16.143

另一种选择是使用虚拟机模拟设备。我在其他教程的基础上做了一个详细的教程（一步一步）：

[http://edwindh.blogspot.com/2014/07/emular-uma-tablet-ou-smartphone-com.html](http://edwindh.blogspot.com/2014/07/emular-uma-tablet-ou-smartphone-com.html)

# c# - 尽管已被列为参考，但仍无法找到参考程序集

> ID：12090681
> 
> 赞同：0
> 
> 时间：2012-08-23T11:36:36.747
> 
> 标签：c#, .net-4.0, reference, .net-assembly

当我尝试编译从外部可信源下载的解决方案时收到以下错误消息：abcName

“无法解析此引用。无法找到程序集。”

然而程序集“abcName”在那里，它列在参考资料下。如果我尝试手动添加它作为参考，它说它已经是参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:54:37.300

当我遇到这个问题时（在清理和重建之后）我做的第一件事就是删除和重新添加引用。这通常可以解决我的大部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:54:01.480

您是否尝试过删除并再次添加它，因为这将刷新文件路径，这可能指向错误的位置。

如果您选择引用并在路径为空白时按 f4 键，则它无法找到该引用，但它会阻止您重新添加它。

# firefox - Selenium Webdriver 如何在不同的 Firefox 窗口之间切换

> ID：12090683
> 
> 赞同：1
> 
> 时间：2012-08-23T11:36:44.017
> 
> 标签：firefox, selenium, junit, webdriver, selenium-webdriver

为了以 4 个不同的角色登录会议，对于我写的每个角色

```
System.setProperty("webdriver.firefox.profile", "default");
FirefoxDriver driver = new FirefoxDriver();
driver.manage().timeouts().implicitlyWait(120, TimeUnit.SECONDS);
driver.get("link to the conference"); 
```

那么如何在 Firefox 窗口之间切换呢？Windows 标题是相同的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:33:42.633

如果需要，您可以使用此代码在窗口之间导航，您可以根据需要进行更改

```
//All the window handles will be returned and u can use window handle to switch between the windows

Set<String> windows = getWebDriver().getWindowHandles();

    Iterator<String> window = windows.iterator();

    while( window.hasNext() ) {

        getWebDriver().switchTo().window( window.next() );

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:47:19.160

```
public TasksWindow OpenInWindow() {
    WebDriverWait wait = new WebDriverWait(Driver.driver, TimeSpan.FromSeconds(10));
    wait.IgnoreExceptionTypes(typeof(AssertionException));
    String windowName = wait.Until<String>((d) => {
        this.windowSwitcher.Click();

        if (d.WindowHandles.Count != 2) // this means you are waiting till the number of windows equals 2 {
            return null;
        }

        return d.WindowHandles[1]; // this means you are changing to the second window (from [0] to [1])
    });

    return new TasksWindow(windowName);
} 
```

这适用于c#

# html - 在客户端脚本中运行命令行实用程序？

> ID：12090684
> 
> 赞同：0
> 
> 时间：2012-08-23T11:36:49.777
> 
> 标签：html, command-line, client-side

有没有办法从客户端脚本运行命令行工具？我想做这样的事情：

```
myutility -flag1 -flag2 inputfile outputfile 
```

在 html 文件的头部有一个脚本。有没有办法做到这一点，最好是在 Safari 中使用 JS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:42:22.227

是的。该脚本 myutility 需要与您的网络服务器运行的服务器计算机兼容，并且该脚本需要具有正确的执行权限。让我知道它是什么类型的脚本，以便我可以进一步提供帮助，它是您尝试运行的 bash 脚本吗？也许你可以在你的服务器端语言中做到这一点，即 php 让事情变得更容易？

# c# - 关闭 OpenFileDialog/SaveFileDialog

> ID：12090691
> 
> 赞同：6
> 
> 时间：2012-08-23T11:37:18.027
> 
> 标签：c#, .net, winforms

作为自动注销的一部分，我们需要关闭子窗体。我们可以通过从计时器线程迭代 Application.OpenForms 来关闭子表单。我们无法使用 Application.OpenForms 关闭 OpenFileDialog/SaveFileDialog，因为 OpenFileDialog 未列出。

如何关闭 OpenFileDialog 和 CloseFileDialog？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T12:58:53.723

这将需要 pinvoke，对话框不是表单，而是原生 Windows 对话框。基本方法是枚举所有顶层窗口并检查它们的类名是否为“#32770”，即 Windows 拥有的所有对话框的类名。并通过发送 WM_CLOSE 消息强制对话框关闭。

向您的项目添加一个新类并粘贴如下所示的代码。注销计时器到期时调用 DialogCloser.Execute()。 *然后*关闭表格。该代码适用于 MessageBox、OpenFormDialog、FolderBrowserDialog、PrintDialog、ColorDialog、FontDialog、PageSetupDialog 和 SaveFileDialog。

```
using System;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

static class DialogCloser {
    public static void Execute() {
        // Enumerate windows to find dialogs
        EnumThreadWndProc callback = new EnumThreadWndProc(checkWindow);
        EnumThreadWindows(GetCurrentThreadId(), callback, IntPtr.Zero);
        GC.KeepAlive(callback);
    }

    private static bool checkWindow(IntPtr hWnd, IntPtr lp) {
        // Checks if <hWnd> is a Windows dialog
        StringBuilder sb = new StringBuilder(260);
        GetClassName(hWnd, sb, sb.Capacity);
        if (sb.ToString() == "#32770") {
            // Close it by sending WM_CLOSE to the window
            SendMessage(hWnd, 0x0010, IntPtr.Zero, IntPtr.Zero);
        }
        return true;
    }

    // P/Invoke declarations
    private delegate bool EnumThreadWndProc(IntPtr hWnd, IntPtr lp);
    [DllImport("user32.dll")]
    private static extern bool EnumThreadWindows(int tid, EnumThreadWndProc callback, IntPtr lp);
    [DllImport("kernel32.dll")]
    private static extern int GetCurrentThreadId();
    [DllImport("user32.dll")]
    private static extern int GetClassName(IntPtr hWnd, StringBuilder buffer, int buflen);
    [DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:42:18.653

我不会在一个线程中关闭所有子表单，而是会引发每个子表单都可以/必须订阅的事件。在提高你的表格可以决定现在做什么。清理一些东西，保持状态，在表单范围内向服务器发送消息，您可以访问 openfiledialog 并尝试关闭它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:03:17.600

[解决方法] 这里是示例：

您应该定义完全透明的窗口 ex。“运输”；

每次需要显示对话框时，都需要显示 TRANSP 并将 TRANSP 作为参数传递给 ShowDialog 方法。

当应用程序关闭时 - 调用 TRANSP 窗口的 Close() 方法。子对话框将关闭。

```
 public partial class MainWindow : Window
{
    OpenFileDialog dlg;
    TranspWnd transpWnd;

    public MainWindow()
    {
        InitializeComponent();

        Timer t = new Timer();
        t.Interval = 2500;
        t.Elapsed += new ElapsedEventHandler(t_Elapsed);
        t.Start();
    }

    void t_Elapsed(object sender, ElapsedEventArgs e)
    {
        Dispatcher.BeginInvoke(new Action(() =>
        {
            transpWnd.Close();
        }), null);
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        transpWnd = new TranspWnd();
        transpWnd.Visibility = System.Windows.Visibility.Hidden; //doesn't works right
        transpWnd.Show();

        dlg = new OpenFileDialog();
        dlg.ShowDialog(transpWnd);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-15T23:52:32.040

我的回答在概念上类似于[Hans Passant 的回答](https://stackoverflow.com/a/12092142/3479456)。

但是，使用`GetCurrentThreadId()`作为`tid`参数`EnumThreadWindows`对我不起作用，因为我是从另一个线程调用它。如果你正在这样做，那么要么枚举进程的线程 ID 并尝试每一个，直到找到所需的窗口：

```
ProcessThreadCollection currentThreads = Process.GetCurrentProcess().Threads;
foreach (ProcessThread thread in currentThreads) {
    CloseAllDialogs(thread.Id);
} 
```

`ShowDialog`或保存执行以下操作的线程 ID `CommonDialog`：

```
threadId = GetCurrentThreadId();
threadIds.Add(threadId);
result = dialog.ShowDialog()
threadIds.Remove(threadId); 
```

进而：

```
foreach (int threadId in threadIds) {
    CloseAllDialogs(threadId);
} 
```

哪里`CloseAllDialogs`看起来像：

```
public void CloseAllDialogs(int threadId) {
    EnumThreadWndProc callback = new EnumThreadWndProc(checkIfHWNDPointsToWindowsDialog);
    EnumThreadWindows(threadId, callback, IntPtr.Zero);
    GC.KeepAlive(callback);
}

private bool checkIfHWNDPointsToWindowsDialog(IntPtr hWnd, IntPtr lp) {
    StringBuilder sb = new StringBuilder(260);
    GetClassName(hWnd, sb, sb.Capacity);
    if (sb.ToString() == "#32770") {
        SendMessage(hWnd, 0x0010, IntPtr.Zero, IntPtr.Zero);
    }
    return true;
}

private delegate bool EnumThreadWndProc(IntPtr hWnd, IntPtr lp);

[DllImport("user32.dll", SetLastError = true)]
private static extern bool EnumThreadWindows(int tid, EnumThreadWndProc callback, IntPtr lp);

[DllImport("kernel32.dll", SetLastError = true)]
private static extern int GetCurrentThreadId();

[DllImport("user32.dll", SetLastError = true)]
private static extern int GetClassName(IntPtr hWnd, StringBuilder buffer, int buflen);

[DllImport("user32.dll", SetLastError = true)]
private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp); 
```

# java - gui 选项卡式窗格 - 如何将内部类放入我的选项卡式窗格

> ID：12090701
> 
> 赞同：1
> 
> 时间：2012-08-23T11:38:08.717
> 
> 标签：java, user-interface

这是一个家庭作业，目前停留在如何将内部类放入我的选项卡式窗格中。

目前我有我的主页，这是用户将根据窗格选择的选项卡式窗格。

下面是我的选项卡窗格类，再往下是我的票类。目前，我在 Ticket() 类中创建了一个名为 Booking() 的内部类。现在的问题是我如何在我的选项卡式窗格类中调用和使用它

门票 t1 = 新预订（）

tp.addTab("预订", t1.Booking());

我在代码中添加了这 2 个代码，但它给出了我的错误。所以我的问题是如何使用 Ticket 类内部的内部类 (Booking()) 并在我的选项卡式窗格中使用它。

```
import javax.swing.*;
import javax.swing.*;
import java.awt.*;

public class tabbedThemePark{

    public static void main(String[] args){

    JFrame frame = new JFrame("RR THEME PARK");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JTabbedPane tp = new JTabbedPane();

    tp.addTab("Intro",new IntroPanel());
    tp.addTab("Tickets",new Tickets());
    Tickets t1 = new Booking();
    tp.addTab("Booking", t1.Booking());

    frame.add(tp);
    frame.pack();
    frame.setVisible(true);
    }

 } 
```

这是我的机票舱位

```
public class Tickets extends JPanel
{
  public Tickets()
  {
      //coding
  }

  public class Booking
  {
     public Booking()
     {
      //coding
     }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:01:53.537

线

```
Tickets t1 = new Booking(); 
```

没有意义，因为`Booking`不是 的*子类*，`Tickets`而是*内部*类。您首先需要创建一个`Tickets`实例，然后`Booking`在其中创建一个新实例。

像这样

```
Tickets t1 = new Tickets();
tp.addTab("Booking", t1.new Booking()); 
```

[有关嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)的帮助，请参阅此内容。

# java - 通过android中的soap ws在mysql db中插入微调器值

> ID：12090708
> 
> 赞同：1
> 
> 时间：2012-08-23T11:38:18.483
> 
> 标签：java, android, web-services, android-spinner, android-ksoap2

嗨，我必须开发应用程序是通过 android 应用程序中的肥皂网络服务将来自 spinner 的数据库插入 mysql 数据库中...

我使用了以下网络服务代码：

```
public class Insertion {

 public String insertData(String userName,String userPassword){

 try{

 Class.forName("com.mysql.jdbc.Driver");
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/androidlogin","root","");
 PreparedStatement statement =  con.prepareStatement("INSERT INTO user(status) VALUES ('"+userName+"');");
  int result = statement.executeUpdate();
   }

    catch(Exception exc){
     System.out.println(exc.getMessage());
    }

      return "Insertion successfull!!";
      }

   } 
```

我已将以下代码用于 android spinner 示例：

```
 public class InsertionExample extends Activity{
  private final String NAMESPACE = "http://xcart.com";
  private final String URL = "http://192.168.1.168:8085/XcartLogin/services/Insertion?wsdl";
  private final String SOAP_ACTION = "http://xcart.com/insertData";
  private final String METHOD_NAME = "insertData";
  Button btninsert;
  private Spinner spnMusketeers;
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btninsert = (Button)findViewById(R.id.btn_insert);  
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
         insertValues();
        }
    });
  }

  public void insertValues(){

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    Spinner userName = (Spinner) findViewById(R.id.spnMusketeers);
    List<String> lsMusketeers = new ArrayList<String>();
    lsMusketeers.add("Q");
    lsMusketeers.add("P");
    lsMusketeers.add("C");

    ArrayAdapter<String> aspnMusketeers = 
      new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, 
       lsMusketeers);
    aspnMusketeers.setDropDownViewResource
       (android.R.layout.simple_spinner_dropdown_item);
    spnMusketeers.setAdapter(aspnMusketeers);

// Set up a callback for the spinner
   spnMusketeers.setOnItemSelectedListener(
    new OnItemSelectedListener() {
        public void onNothingSelected(AdapterView<?> arg0) { }

        public void onItemSelected(AdapterView<?> parent, View v, 
         int position, long id)  {

          // Code that does something when the Spinner value changes
        }

    });
    String user_Name = userName.getContext().toString();

    //Pass value for userName variable of the web service
       PropertyInfo unameProp =new PropertyInfo();
       unameProp.setName("userName");//Define the variable name in the web service method
       unameProp.setValue(user_Name);//Define value for fname variable
       unameProp.setType(String.class);//Define the type of the variable
       request.addProperty(unameProp);

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.setOutputSoapObject(request);
         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

         try{
          androidHttpTransport.call(SOAP_ACTION, envelope);
             SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

             TextView result = (TextView) findViewById(R.id.textView2);
             result.setText(response.toString());

      }
      catch(Exception e){

      } 
       // Code that does something when the Spinner value changes
     }
     } 
```

这里如何更改我的代码来解决这个问题。

我的 logcat 窗口说：

```
 08-23 02:48:40.030: D/AndroidRuntime(4055): Shutting down VM
  08-23 02:48:40.030: W/dalvikvm(4055): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
  08-23 02:48:40.060: E/AndroidRuntime(4055): FATAL EXCEPTION: main
  08-23 02:48:40.060: E/AndroidRuntime(4055): java.lang.NullPointerException
  08-23 02:48:40.060: E/AndroidRuntime(4055):   at com.android.soap.InsertionExample.insertValues(InsertionExample.java:63)
   08-23 02:48:40.060: E/AndroidRuntime(4055):  at com.android.soap.InsertionExample$1.onClick(InsertionExample.java:43)
   08-23 02:48:40.060: E/AndroidRuntime(4055):  at android.view.View.performClick(View.java:2408)
    08-23 02:48:40.060: E/AndroidRuntime(4055):     at android.view.View$PerformClick.run(View.java:8816)
   08-23 02:48:40.060: E/AndroidRuntime(4055):  at android.os.Handler.handleCallback(Handler.java:587)
   08-23 02:48:40.060: E/AndroidRuntime(4055):  at android.os.Handler.dispatchMessage(Handler.java:92)
   08-23 02:48:40.060: E/AndroidRuntime(4055):  at android.os.Looper.loop(Looper.java:123)
  08-23 02:48:40.060: E/AndroidRuntime(4055):   at android.app.ActivityThread.main(ActivityThread.java:4627)
  08-23 02:48:40.060: E/AndroidRuntime(4055):   at java.lang.reflect.Method.invokeNative(Native Method)
   08-23 02:48:40.060: E/AndroidRuntime(4055):  at java.lang.reflect.Method.invoke(Method.java:521)
   08-23 02:48:40.060: E/AndroidRuntime(4055):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    08-23 02:48:40.060: E/AndroidRuntime(4055):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
   08-23 02:48:40.060: E/AndroidRuntime(4055):  at dalvik.system.NativeStart.main(Native Method) 
```

请帮助我......这里发生了什么错误。给我解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:23:01.323

将此代码用于此插入功能：

```
String selectedItem = parent.getItemAtPosition(pos).toString(); 
```

# uml - 使用什么图表来显示客户需求（在 CRM 中）

> ID：12090709
> 
> 赞同：-1
> 
> 时间：2012-08-23T11:38:24.310
> 
> 标签：uml, dynamics-crm, dynamics-crm-2011, diagram, crm

您通常使用什么来显示客户端结构、数据等？哪个图UML？还是你用别的东西？

我必须向我的客户展示/准备有关其 CRM 流程解决方案的图表。我正在为此寻找最佳图表 UML。

等待答案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:23:15.723

使用 CRM 2011，一切都与实体有关。 [http://www.microsoft.com/en-us/download/details.aspx?id=2640](http://www.microsoft.com/en-us/download/details.aspx?id=2640)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:36:34.093

CRM 2011 Visio 加载项怎么样？此处说明：http: [//everythingcrm.net/2012/02/09/crm-2011-visio-add-in-org-chart-for-business-units/](http://everythingcrm.net/2012/02/09/crm-2011-visio-add-in-org-chart-for-business-units/)

可以在这里下载：http: [//crmvisio.codeplex.com/](http://crmvisio.codeplex.com/)

感谢：达科·约维西奇

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:02:28.933

有一家[公司](http://www.magnetism.co.nz/blog/11-01-11/CRM_2011_Visio_Stencil_Set_The_Final_Product.aspx)销售 CRM 2011 Visio Stencil Set，它可能很有用，还有一个较旧的免费[CRM 4.0 Visio Stencil](http://weblogs.asp.net/gayanperera/archive/2008/12/10/dynamics-crm-4-visio-stencils.aspx)，它基于 CRM 4.0，但它仍然会有所帮助。

# qml - QML 是否值得用于运行在 600MHz 左右且没有 GPU 的嵌入式系统？

> ID：12090710
> 
> 赞同：2
> 
> 时间：2012-08-23T11:38:29.907
> 
> 标签：qml, qt-quick

我计划构建一个嵌入式系统，它几乎就像一个组织者，即处理联系人、游戏、应用程序和 wifi/2G/3G 的互联网。我计划使用 QML 构建 UI，因为它易于使用且应用程序构建速度快。并拥有一个linux内核。但是在阅读了这些文章后：http: [//qt-project.org/forums/viewthread/5820](http://qt-project.org/forums/viewthread/5820) & [http://en.roolz.org/Blog/Entries/2010/10/29_Qt_QML_on_embedded_devices.html](http://en.roolz.org/Blog/Entries/2010/10/29_Qt_QML_on_embedded_devices.html) 我很沮丧并重新考虑我的想法使用 QML！我的硬件将采用以下配置：处理器大约 600MHz，RAM 128MB，没有 GPU。

请对此发表评论并建议我一些替代方案。提前致谢。

*蓝调*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:45:48.603

我为拥有 369MHz 处理器、128MB RAM 的诺基亚 E63 创建了一个 QML 应用程序。我不认为它有GPU。该应用程序是一个秒表应用程序。我有动画按钮点击事件，比如跳跃（跳球）。即使两个按钮同时跳跃，动画也非常流畅。预计 600MHz 处理器可以轻松处理 QML。

这是 sis 文件[http://store.ovi.com/content/184985](http://store.ovi.com/content/184985)的链接。如果您有诺基亚手机，则可以对其进行测试。

也许您应该考虑手动构建 QML 元素，而不是从 Photoshop 或 Gimp 中构建。例如使用 Item 代替 Rectangle 将是最佳的。所以你可以试一试。可能是通过创建带有大量动画的粗略草图来检查您的处理器是否可以处理。即使它没有按预期工作，也可以考虑使用 Qt 来构建您的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:50:15.830

QML 应用程序在低规格诺基亚设备上运行良好。我为[5800 XPressMusic](http://www.developer.nokia.com/Devices/Device_specifications/5800_XpressMusic/)智能手机制作了一款，没有任何问题。

# jpa - 如何使用 google guice 向 hibernate.ejb.interceptor 注入服务？

> ID：12090711
> 
> 赞同：2
> 
> 时间：2012-08-23T11:38:33.940
> 
> 标签：jpa, binding, dependency-injection, guice, guice-persist

我在使用 google guice 向预定义的拦截器注入服务时遇到问题。

我想要做的是用来`emptyinterceptor`拦截实体的变化。拦截器本身工作正常，问题是我不知道如何向它注入服务。注入本身在整个应用程序中都可以正常工作。

持久性.xml

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence-unit name="db-manager">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>test.Address</class>
    <properties>
        <property name="hibernate.ejb.interceptor" value="customInterceptor"/>
    </properties>
</persistence-unit> 
```

我是如何尝试注入的

```
public class CustomInterceptor extends EmptyInterceptor {

private static final Logger LOG = Logger.getLogger(CustomInterceptor.class);

@Inject
private Provider<UploadedFileService> uploadedFileService;
...
} 
```

JpaPersistModule 是如何启动的

```
public class GuiceListener extends GuiceServletContextListener {

private static final Logger LOG = Logger.getLogger(GuiceListener.class);

@Override
protected Injector getInjector() {
    final ServicesModule servicesModule = new ServicesModule();
    return Guice.createInjector(new JerseyServletModule() {
        protected void configureServlets() {

            // db-manager is the persistence-unit name in persistence.xml
            JpaPersistModule jpa = new JpaPersistModule("db-manager");

                            ...
                    }
            }, new ServicesModule());
     }
} 
```

如何启动服务

```
public class ServicesModule extends AbstractModule {

@Override
protected void configure() {
    bind(GenericService.class).to(GenericServiceImpl.class);
    bind(AddressService.class).to(AddressServiceImpl.class);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-13T09:06:37.447

我搜索了几个小时并没有找到真正的解决方案，所以我使用的丑陋解决方法是创建 2 个拦截器。

第一个被hibernate正确绑定，但没有注入任何东西。它通过其他一些机制调用第二个拦截器——在下面的示例中，通过对*InjectorFactory*的静态引用。第二个拦截器没有绑定到 Hibernate，但是像任何其他类一样，它可以很高兴地将东西注入其中。

//第一个ineterceptor有这样的方法...

```
@Override
  public synchronized void onDelete(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types) {
  InjectorFactory.getInjector().getInstance(MyOtherInterceptor.class).onDelete(entity, id, state, propertyNames, types);
} 
```

d

//第二个有真正的实现

```
@Inject
public MyOtherInterceptor() {
}

@Override
public synchronized void onDelete(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types) {
  //Full implementation
}
//etc 
```

# gitignore - .gitignore 规则不起作用

> ID：12090726
> 
> 赞同：1
> 
> 时间：2012-08-23T11:39:12.353
> 
> 标签：gitignore

我正在建立一个 Lemonstand 网站，我正在通过 git 进行管理。因此，我使用以下 .gitignore 规则：

```
# Lemonstand
.htaccess
php.ini
boot.php
index.php
install.php
/config/*
/controllers/*
/init/*
/logs/*
/phproad/*
/temp/*
/uploaded/*
/installer_files/*
/modules/backend/*
/modules/blog/*
/modules/cms/*
/modules/core/*
/modules/session/*
/modules/shop/*
/modules/system/*
/modules/users/*
# add content_*.php if you don't want erase client changes to content

/modules/gallery/*
/modules/lddevel/*
/modules/tweak/* 
```

[（我从 github 获得](https://github.com/github/gitignore/blob/master/LemonStand.gitignore)的顶部块，第二块是我自己添加的一些附加规则，以避免 Lemonstands 更新系统出现问题）。

我的问题是我正在向 Lemonstand 添加一个自定义发票，这（长话短说）需要在 中添加一个文件夹和一些文件`/modules/shop/invoice_templates/`，我将其命名为`cm_standard`.

因为这是默认 Lemonstand 的额外内容，所以我想用 git 跟踪它，所以我尝试在我的 gitignore 文件底部使用以下规则：

```
!/modules/shop/invoice_templates/cm_standard/* 
```

但是当我做 a 时`git add -A`，它并没有拾取该目录中的文件。即使我这样做，`git add modules/shop/invoice_templates/cm_standard/*`它也会告诉我：

```
The following paths are ignored by one of your .gitignore files:
modules/shop/invoice_templates
Use -f if you really want to add them.
fatal: no files added 
```

这进一步表明我没有正确编写规则 - 任何人都可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:43:08.903

忽略具有较少路径段的模式可以优先于具有更多路径段的模式，因此在您的情况下`/modules/shop/*`优先于`!/modules/shop/invoice_templates/cm_standard/*`，`/modules/shop/invoice_templates/`甚至在它查看 `!/modules/shop/invoice_templates/cm_standard`. 话虽如此，排序也很重要，当它发生时，文件中有点违反直觉的后来的规则优先于早期的规则。

这个问题与 gitignore 排除规则如何实际工作非常相似[？](https://stackoverflow.com/questions/3001888/how-do-gitignore-exclusion-rules-actually-work)所以我建议你读一下。此外，您可能会发现该子命令在[调试规则](https://stackoverflow.com/questions/12144633/which-gitignore-rule-is-ignoring-my-file)`check-ignore`时很有用- 我在过去几个月将它添加到 git，它刚刚出现在几天前发布的 1.8.2 版本中。

# c# - 如何使 ListViewItem 文本的一部分变为粗体？

> ID：12090727
> 
> 赞同：1
> 
> 时间：2012-08-23T11:39:16.027
> 
> 标签：c#, winforms, listview, text, text-styling

我有一个处于详细信息模式的 ListView，我希望它的一些项目的文本以粗体显示（用于突出显示它在项目文本中找到某些子字符串的位置）。

所以是这样的：

一些文件名/**粗体文本**/等

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:26:31.190

`OwnerDraw`好的，所以这会很困难，因为您必须`ListView`首先将该属性设置为`true`. 现在您已经完成了，您将需要实现`DrawColumnHeader`并将此行放入其中：

```
e.DrawDefault = true; 
```

接下来，您需要在`DrawItem`或`DrawSubItem`取决于它所在的区域中实现以下代码。***请记住，我给您的代码并不完整，因为它没有解析字符串或任何东西，您还需要进一步现在实现绘制选定项目，因为您自己绘制文本。***

```
var boldFont = new Font(this.Font, FontStyle.Bold);
var location = new PointF(e.Bounds.Location.X, e.Bounds.Location.Y);

e.Graphics.DrawString("Somefilename/", this.Font, Brushes.Black, location);
var size = e.Graphics.MeasureString("Somefilename/", this.Font);

location.X += size.Width;
e.Graphics.DrawString("boldText", boldFont, Brushes.Black, location);
size = e.Graphics.MeasureString("boldText", boldFont);

location.X += size.Width;
e.Graphics.DrawString("/etc", this.Font, Brushes.Black, location); 
```

另一件需要注意的事情是，您必须稍微使用偏移量，因为某些字体有边距，而粗体字体会占用更多空间。

***如果`Item`不是 a`SubItem`那么只需`e.DrawDefault = true;`为`DrawSubItem`事件实现 - 反之亦然，如果项目是 a`SubItem`然后为 实现该行`DrawItem`。***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:14:37.067

您必须覆盖 OnPaint。试试这些链接：

[将标签文本的一部分设置为粗体](https://stackoverflow.com/questions/2063263/make-portion-of-a-labels-text-to-be-styled-bold)

[Winforms中的自定义ListView？](https://stackoverflow.com/questions/1604704/custom-listview-in-winforms)

但是，列表视图不是由 .net 框架绘制的，仅受支持。因此，即使您覆盖 OnPaint，它也可能不会被调用。因此，您可能还必须覆盖您的列表视图控件。

# php - 如何使用 MySql 和 PHP 存储/处理多个表的数据

> ID：12090728
> 
> 赞同：1
> 
> 时间：2012-08-23T11:39:22.067
> 
> 标签：php, mysql, select, multiple-tables

我有 5 个不同的 MySql 表，即：

> u_t (uid, pwd, field1, field2)
> 
> t_1（tid_1、ut_uid、field_1、field_2、点）
> 
> t_2（tid_2、ut_uid、field_1、field_2、点）
> 
> t_3（tid_3、ut_uid、field_1、field_2、点）
> 
> t_4（tid_4、ut_uid、field_1、field_2、点）
> 
> PS: uid=pk , tid_1,2,3,4=pk, ut_uid=fk

以上所有表格都具有基于某些独特功能的一些信息。

现在我想使用 PHP 从每个表中为每个用户获取点的总和，以用于存储和显示目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:41:46.313

尝试

```
select u_t.uid, 
       sum(t_1.points+t_2.points+t_3.points+t_4.points+t_5.points) as total_p
from u_t
left outer join t_1 on t_1.ut_uid = u_t.uid
left outer join t_2 on t_2.ut_uid = u_t.uid
left outer join t_3 on t_3.ut_uid = u_t.uid
left outer join t_4 on t_4.ut_uid = u_t.uid
group by u_t.uid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:45:05.560

一个更丑陋的版本：

```
SELECT ut.uid, sum(t1.pts + t2.pts + t3.pts + t4.pts) total
FROM u_t ut
LEFT JOIN
(
  SELECT ut_uid, sum(points) pts
  FROM t_1
  GROUP BY ut_uid
) t1
  on ut.uid = t1.ut_uid
LEFT JOIN
(
  SELECT ut_uid, sum(points) pts
  FROM t_2
  GROUP BY ut_uid
) t2
  on ut.uid = t2.ut_uid
LEFT JOIN
(
  SELECT ut_uid, sum(points) pts
  FROM t_3
  GROUP BY ut_uid
) t3
  on ut.uid = t3.ut_uid
LEFT JOIN
(
  SELECT ut_uid, sum(points) pts
  FROM t_4
  GROUP BY ut_uid
) t4
  on ut.uid = t4.ut_uid
GROUP BY ut.uid 
```

# c++ - 元结构与元功能

> ID：12090731
> 
> 赞同：3
> 
> 时间：2012-08-23T11:39:53.357
> 
> 标签：c++

为什么我们仍然使用结构和`typedef`s（或`using`s）进行元编程？

查看此问题中的代码 -[推断 lambda 的调用签名或任意可调用“make_function”](https://stackoverflow.com/questions/11893141/inferring-the-call-signature-of-a-lambda-or-arbitrary-callable-for-make-functio)：

```
template<typename T> struct remove_class { };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...)> { using type = R(A...); };

template<typename T, bool> struct get_signature_impl { };
template<typename R, typename... A>
struct get_signature_impl<R(A...), true> { using type = R(A...); };
template<typename R, typename... A>
struct get_signature_impl<R(*)(A...), true> { using type = R(A...); };
template<typename T>
struct get_signature_impl<T, true> { using type = typename remove_class<
    decltype(&std::remove_reference<T>::type::operator())>::type; }; 
```

有很多奇怪的技巧，比如`bool`嘈杂的关键词`typename`，冗余的东西`struct get_signature_impl;`。
很高兴我们`using`在 C++11 中得到了关键字，但这并没有太大的区别。

在 C++11 中，我们有`decltype`尾随返回类型。有了这个能力，我们可以去掉所有丑陋的*元结构*，写出漂亮的*元函数*。
所以，我们可以重写上面的代码：

```
template<typename C, typename R, typename... A> auto make_function_aux(R(C::*)(A...)) -> std::function<R(A...)>;
template<typename C, typename R, typename... A> auto make_function_aux(R(C::*)(A...) const) -> std::function<R(A...)>;
template<typename R, typename... A> auto make_function_aux(R(A...)) -> std::function<R(A...)>;
template<typename R, typename... A> auto make_function_aux(R(*)(A...)) -> std::function<R(A...)>;
template<typename T> auto make_function_aux(const T&) -> decltype(make_function_aux(&T::operator()));

template<typename F> auto make_function(F&& f) -> decltype(make_function_aux(f)) { return decltype(make_function_aux(f))(std::forward<F>(f)); } 
```

是否存在模板部分特化比`decltype`匹配模板参数的函数重载更好的情况，或者这只是程序员惯性的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:11:50.153

我可以想到使用函数重载的一些问题：

不同的匹配规则；模板特化列表只会完全匹配，而如果参数可转换为参数类型，则函数重载将匹配。这通常可以解决，但在某些情况下可能会导致更复杂的元代码。

返回类型的限制；函数不能返回某些类型，例如函数（不是函数指针）、抽象类、不可复制类型（我认为）、未知绑定数组（可能）。这可以通过将类型封装在模板结构中来解决。

通常，您可能会看到一方面使用`typename`and `using`，另一方面使用`decltype`和包装模板之间的权衡。

我同意您的上述代码是对原始代码的改进，`bool`仅用于消除技巧。

# css - 如何将导航带到屏幕右侧？

> ID：12090732
> 
> 赞同：0
> 
> 时间：2012-08-23T11:39:58.373
> 
> 标签：css, navigation, css-float

我无法将导航菜单放在屏幕右侧。我使用了很多 CSS，但是很难找到我的错误在哪里。

这是我的html代码：

```
<div id="main-container">
        <div id="content">
            <div id="header">
                <ul id="nav">
                    <li ><a href="#">Nav 1</a></li>
                    <li><a href="#">Nav 2</a></li>
                    <li class="selected"><a href="#">Nav 3</a></li>
                    <li><a href="#">Nav 4</a></li>
                </ul>
            </div>
            <div id="pictures">
            </div>
        </div> 
```

这是我遇到问题的 CSS：

```
 #main-container {

    }
    #content {
        background-color: #FFAA00;
        background: url(images/table-surface-2-resized.jpg) repeat-x #000000;
        width: 800px;
        height: 600px;
        border-radius: 5px;
    }
    #header {
        background-color: #FFD200;
        width: 800px;
        height: 26px;
    }
    #pictures {
        background-color: #A64D00;
        width: 760px;
        height: 540px;
        border: 2px solid white;
        border-radius: 15px;
        margin-left: auto;
        margin-right: auto;
        margin-top: 14px;
    }

    /*  TABS WITH ROUND, OUT BORDERS */
    #nav {
        text-align: center;
        list-style: none;
        margin: 0;
        padding: 0;
        line-height: 24px;
        height: 26px;
        overflow: hidden;
        font-size: 12px;
        font-family: verdana;
        position: relative;
            }
    #nav li {
        border: 1px solid #AAA;
        background: #D1D1D1;
        background: -o-linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        background: -ms-linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        background: -moz-linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        background: -webkit-linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        background: linear-gradient(top, #ECECEC 50%, #D1D1D1 100%);
        display: inline-block;
        position: relative;
        z-index: 0;
        border-top-left-radius: 6px;
        border-top-right-radius: 6px;
        box-shadow: 0 3px 3px rgba(0, 0, 0, 0.4), inset 0 1px 0 #FFF;
        text-shadow: 0 1px #FFF;
        margin: 0 -5px;
        padding: 0 20px;
    }
    #nav li.selected {
        background: #FFF;
        color: #333;
        z-index: 2;
        border-bottom-color: #FFF;
    }
    #nav:before {
        position: absolute;
        content: " ";
        width: 100%;
        bottom: 0;
        left: 0;
        border-bottom: 1px solid #AAA;
        z-index: 1;
    }
    #nav li:before,
    #nav li:after {
        border: 1px solid #AAA;
        position: absolute;
        bottom: -1px;
        width: 5px;
        height: 5px;
        content: " ";
        }
    #nav li:before {
        left: -6px;
        border-bottom-right-radius: 6px;
        border-width: 0 1px 1px 0;
        box-shadow: 2px 2px 0 #D1D1D1;
    }
    #nav li:after {
        right: -6px;
        border-bottom-left-radius: 6px;
        border-width: 0 0 1px 1px;
        box-shadow: -2px 2px 0 #D1D1D1;
        }
    #nav li.selected:before {
        box-shadow: 2px 2px 0 #FFF;
    }
    #nav li.selected:after {
        box-shadow: -2px 2px 0 #FFF;
    }

    #nav a {
        color: black;
        text-decoration: none;
    }
    /*  END TABS WITH ROUND, OUT BORDERS */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:52:34.060

试试这个 CSS（加法）

```
#nav {
  padding: 0 10px;
   float:right;
} 
```

这是工作[链接](http://jsfiddle.net/uttara/2bhwY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:54:31.277

固定：[http ://dabblet.com/gist/3435951](http://dabblet.com/gist/3435951)

向右浮动`#nav`，给它一个右边距，`overflow: hidden`从中删除并添加到`#header`.

# c# - 快速正则表达式，匹配一个字符但不包括该字符

> ID：12090734
> 
> 赞同：1
> 
> 时间：2012-08-23T11:40:08.133
> 
> 标签：c#, regex

我想从字符 P 匹配 P 之后和换行符之间的所有章程。

我尝试的是“P.*\n”，它显然仍然匹配 P，但我想要 p 之后和换行符之前的所有字符。

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:44:02.380

你可以试试这个：

```
(?<=P).*(?!\n) 
```

P 的正向后视，然后换行的负向前瞻。

编辑了我的原始答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:49:37.967

只需使用：

```
p(.*) 
```

确保您没有使用“多行”正则表达式选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:48:56.580

怎么样：

```
P(.*?)\n 
```

您想要的字符在第 1 组中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T11:50:35.663

你可以试试：

```
P(.*?)\n 
```

![在此处输入图像描述](../Images/70e30f9fde7526740ed502f0ed89d66b.png)

来自正则表达式英雄

# android - Spinner 中的 setOnItemSelectedListener 未调用

> ID：12090735
> 
> 赞同：0
> 
> 时间：2012-08-23T11:40:10.957
> 
> 标签：android, button, spinner

我有这样一种添加项目的方法：

```
timezoneEdit.setOnClickListener(new OnClickListener() {
        public void onClick(View v)
        {
             timezonSpin = (Spinner) findViewById(R.id.timezoneSpin);//timezoneCall();  
           final ArrayList <String> timezonelist = new ArrayList<String>();

            timezonelist.add("Gvatemala");
            timezonelist.add("Gonduras");
            timezonelist.add("Batumi");
            timezonelist.add("Boston");
            timezonelist.add("Zhytomir");
            timezonelist.add("Zmerinka");
            ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(NewOrderActivity.this,
            android.R.layout.simple_spinner_item, timezonelist);
            dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            timezonSpin.setAdapter(dataAdapter);timezonSpin.performClick(); 
            timezonSpin.setOnItemSelectedListener(new OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent, View view, int position, long id)
                {

                    Log.i("sd","Ya tut");
                    Log.i("choosed",timezonelist.get(position).toString());
                    timezoneEdit.setText(timezonelist.get(position));
                }

                public void onNothingSelected(AdapterView<?> arg0) {

                    TimeZone timezone = TimeZone.getDefault();
                    String TimeZoneName = timezone.getDisplayName();
                    int TimeZoneOffset = timezone.getRawOffset()/(60 * 60 * 1000);
                    Log.i("timezone",Integer.toString(TimeZoneOffset));
                    timezoneEdit.setText("UTC"+Integer.toString(TimeZoneOffset), TextView.BufferType.EDITABLE);

                }
         }); 
```

当用户单击按钮时，将显示微调器，用户可以选择其中一项。但奇怪的是 onItemSelectedListener 没有调用。我将这种shema用于我的其他常规微调器（无需单击按钮），并且那里一切正常……缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:48:59.703

```
timezoneEdit.setOnClickListener(new OnClickListener() {
        public void onClick(View v)
        {
             Spinner timezonSpin = (Spinner) findViewById(R.id.timezoneSpin);//timezoneCall();  
           final ArrayList <String> timezonelist = new ArrayList<String>();

            timezonelist.add("Gvatemala");
            timezonelist.add("Gonduras");
            timezonelist.add("Batumi");
            timezonelist.add("Boston");
            timezonelist.add("Zhytomir");
            timezonelist.add("Zmerinka");
            ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(NewOrderActivity.this,
            android.R.layout.simple_spinner_item, timezonelist);
            dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            timezonSpin.setAdapter(dataAdapter);timezonSpin.performClick(); 
            timezonSpin.setOnItemSelectedListener(new OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent, View view, int position, long id)
                {

                    Log.i("sd","Ya tut");
                    Log.i("choosed",timezonelist.get(position).toString());
                    timezoneEdit.setText(timezonelist.get(position));
                }

                public void onNothingSelected(AdapterView<?> arg0) {

                    TimeZone timezone = TimeZone.getDefault();
                    String TimeZoneName = timezone.getDisplayName();
                    int TimeZoneOffset = timezone.getRawOffset()/(60 * 60 * 1000);
                    Log.i("timezone",Integer.toString(TimeZoneOffset));
                    timezoneEdit.setText("UTC"+Integer.toString(TimeZoneOffset), TextView.BufferType.EDITABLE);

                }
         }); 
```

试试上面的代码。我认为您必须在 setOnClickListener 事件中创建微调器对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:47:21.610

将 timezonSpinner.setOnItemSelectedListener 取出块 timezoneEdit.setOnClickListener(new OnClickListener() { }

# c++ - 模板类的内部类的模板特化

> ID：12090737
> 
> 赞同：2
> 
> 时间：2012-08-23T11:40:19.397
> 
> 标签：c++, templates

给出以下代码

```
template<typename T>
struct A{
  struct In{};

};

template<typename T>
struct Desc{
};

template<typename X>
struct Desc<typename A<X>::In> {
};

int main(){
  Desc<A<int>::In> a;
} 
```

编译器拒绝 Desc 专业化

```
error: template parameters not used in partial specialization:
error:         ‘X’ 
```

如果结构由以下定义，则相同

```
template<>
template<typename X>
struct Desc<typename A<X>::In> {
}; 
```

定义

```
template<typename X>
template<>
struct Desc<typename A<X>::In> {
}; 
```

给出错误

```
desc.cpp:14:10: error: invalid explicit specialization before ‘&gt;’ token
desc.cpp:14:10: error: enclosing class templates are not explicitly specialized
desc.cpp:15:8: error: template parameters not used in partial specialization:
desc.cpp:15:8: error:         ‘X’ 
```

这是“非推断上下文”的情况吗？

[部分特化中未使用的模板参数](https://stackoverflow.com/questions/6398912/template-parameters-not-used-in-partial-specialization)

这是有道理的，因为不能保证内部类实际上是一个类（我们只知道它是一个类型名，它可能是一个类型定义）。那么有没有办法指定它是一个真正的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:59:14.393

**那么有没有办法指定它是一个真正的类**

不，如果您在部分模板专业化中使用此类型，则无法指定。

只有两种方法。专门`Desc`用于混凝土`A`，所以，

```
template<>
struct Desc<typename A<type>::In> { }; 
```

或使用类似的东西

```
template<typename T, typename  = void>
struct Desc{
};

template<typename X>
struct Desc<X, typename A<X>::In> {
}; 
```

或者当然专门针对类型`A<X>`而不是针对`A<X>::In`.

# iphone - 我在 zwoptex 中找不到导出选项卡

> ID：12090740
> 
> 赞同：0
> 
> 时间：2012-08-23T11:40:31.830
> 
> 标签：iphone, cocos2d-iphone

由于 cocos2d 的动画原因，我正在尝试使用 zwoptex，所以我决定遵循本教程，但我不知道如何使用 zwoptex。我想导出到 plist 但没有找到这样的选项卡。有什么帮助吗？它在 Ray Wenderlich 教程中清楚地说明有一个导出选项卡，但我没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:48:08.400

检查文件-> 发布设置。在那里你可以设置你想要的，然后按发布，当你想创建图集和带有框架描述的 .plist

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:36:42.023

我有同样的问题。然后我决定付钱（15 美元）。仍然没有导出部分，但是当我选择 sprites -> export 它时，现在可以正确导出 plist 文件和 sprite 表。所以解决方案似乎是您需要为此付费！

# c# - 将动作分配给 mvc3 中动态创建的 html 按钮

> ID：12090741
> 
> 赞同：1
> 
> 时间：2012-08-23T11:40:33.810
> 
> 标签：c#, asp.net-mvc

我是 mvc 的新手。我动态创建了 html 按钮，我无法为这些按钮分配操作

代码是：

```
sb.Append("<li style=\"margin:17px;\">");
        sb.Append("<img src=\"" + path + "Content/HeaderSlides/FullImages/" 
                  + imagename + "\" width=\"180\" height=\"100\"/>");

        sb.Append("<input type=\"button\"  name=\"deleteimage" + id 
                  + " \" id=\"btndelete" + id 
                  + "\" value=\"Delete\" class=\"t-button t-grid-delete\" " 
                  + " style=\"margin-left:10px;\" />"); 
```

我想让html按钮像这样：

```
<input type="submit" 
       title="Delete" 
       value="Delete" 
       name="btndelete" 
       onclick="location.href='@Url.Action("DeleteHeaderSlide", 
                                           "HeaderSlides",
                                           new { filename = "Sunset.jpg" })'" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:30:41.463

你最好使用jquery。

```
$(document).ready(function(){
    $('input[name=btndelete]').bind('click', function() {
       window.location.href='@Url.Action("DeleteHeaderSlide", 
                                       "HeaderSlides",
                                       new { filename = "Sunset.jpg" })';
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:12:13.310

如果您能够使用您的代码创建 html 按钮，那么定义/分配操作的最简单方法是

```
string action = "<script>function yourFunction() {alert('hi');}</script>";
string btnCraeteCode = "<input type='button' onClick='yourFunction()' />";    
sub.Append(action+btnCraeteCode); 
```

您还可以在页面的 head 标记中的脚本中定义 yourFunction()

在这种情况下，您不需要在 createButton 之前在此处添加操作字符串

# ruby-on-rails - 使用 shopify_api gem 的 shopify 订单履行问题

> ID：12090742
> 
> 赞同：2
> 
> 时间：2012-08-23T11:40:36.213
> 
> 标签：ruby-on-rails, api, shopify

我在通过 shopify_api gem 完成订单中的订单项时遇到问题。当我履行单个订单项时，它会履行订单中的所有订单项。我已经调查过了，人们说一些关于设置标题的事情，请清除。

我正在做的是

```
order = ShopifyAPI::Order.find(order_id) 
```

假设此订单有多个订单项

```
f = ShopifyAPI::Fulfillment.new(:params => { :order_id => order.id, :line_items => [ {"id" => order.line_items.first.id} ] })

f.prefix_options = { :order_id => order.id }

f.save 
```

这段代码履行订单中的所有行项目，并将履行状态设置为已履行，这是不希望的。

* * *

以下是标头、实现对象和 tcpdump 的详细信息：

Shopify 标头

```
(rdb:1) p ShopifyAPI::Fulfillment.headers
{"User-Agent"=>"ShopifyAPI/3.0.1 ActiveResource/3.1.1 Ruby/1.9.2", "X-Shopify-Access-Token"=>"be9d4adaa35e7f82b720a3567250424c"} 
```

履行对象

```
#<ShopifyAPI::Fulfillment:0xca2086c @attributes={"params"=>#<ShopifyAPI::Fulfillment::Params:0xca20b00 @attributes={"order_id"=>138494648, "notify_customer"=>true, "tracking_number"=>"12345678", "line_items"=>[#<ShopifyAPI::LineItem:0xca28904 @attributes={"id"=>225568082}, @prefix_options={}, @persisted=false>]}, @prefix_options={}, @persisted=false>}, @prefix_options={:order_id=>138494648}, @persisted=false> 
```

tcpdump 输出

10:07:14.498936 IP localhost.localdomain.34941 > localhost.localdomain.domain: 50737+ AAAA？olson-pfeffer-and-ratke1494.myshopify.com。(59) E..W..@.@.D........}.5.CV1............olson-pfeffer-and-ratke1494 myshopify.com ..... 10:07:14.655477 IP localhost.localdomain.domain > localhost.localdomain.34941: 50737 1/1/0 CNAME shop.shopify.com。(160) E....@.@.1........X. :....< 10:07:14.655650 IP localhost.localdomain.36871 > localhost.localdomain.domain: 39864+ A? olson-pfeffer-and-ratke1494.myshopify.com。（59）E..W..@.@.D............5.CV............olson-pfeffer-and-ratke1494 myshopify。 com..... 10:07:14.948404 IP localhost.localdomain.domain > localhost.localdomain.36871:39864 5/4/4 CNAME shop.shopify.com., A 204.93.213.40, A 204.93.213.41, A 204.93 .213.42, A 204.93.213.44 (301) E..I..@.@.;........5...5.H............ . `......@.................................q.q../#........).....!.6k.. 10:07:16.340185 IP6 geek-laptop.46193 > geek-laptop.46193: UDP, length 16` ......@..................................qq..G...... .....!.6k .. 10:07:16.350974 IP6 geek-laptop.46193 > geek-laptop.46193：UDP，长度 924 `......@............ ............ qq.tk............）............ ..................................................... ................................“.......“.......F 。 ..................................................... ..................................................... ..................................................... ...............................................C .. ..................................................... ...................................................2 ... ..................................................... ...................................w .... ..................................................... ..................................................）...... …………………………………………………………………………………………..................................................... .....................8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:21:26.497

实际的问题是，当您创建履行时，您将传递`:params => hash_of_fulfillment_data`给该`new`方法。只需传递数据，您不需要 params 键。这只是标准的 ActiveResource，没什么特别的。这应该有效：

```
f = ShopifyAPI::Fulfillment.new(:order_id => order.id, :line_items =>[ {"id" => order.line_items.first.id} ] )
f.prefix_options = { :order_id => order.id }
f.save 
```

# java - 有关于 Raspberry PI 的 Java 经验吗？

> ID：12090745
> 
> 赞同：28
> 
> 时间：2012-08-23T11:40:43.723
> 
> 标签：java, linux, jboss, jvm, raspberry-pi

是否可以在树莓派上运行普通的 java 应用服务器，例如 jboss 或 glassfish 服务器？有什么限制吗？有人有树莓派的Java开发经验吗？

至少任何适合 RPi 的 JVM 都会很好。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-19T17:02:11.910

这绝对是可能的，但对于具有更多内存的新版本（例如 512 MB 版本的 Pi）应该会更好。2012 年 12 月，Oracle 发布了[适用于 ARM 的 Java SE 8 开发者预览版](https://blogs.oracle.com/java/entry/developer_preview_of_java_se)。带有公告的博客文章包含指向许多教程的链接，这些教程应该可以帮助您开始使用普通的 Java SE 或 JavaFX，具体取决于您的界面应该有多花哨。

1.  [快速指南让 Java Embedded 在 Raspberry Pi 上运行](https://blogs.oracle.com/hinkmond/entry/quickie_guide_getting_java_embedded)
2.  [Raspberry Pi 上的 JavaFX – 3 个简单步骤](http://javafx.steveonjava.com/javafx-on-raspberry-pi-3-easy-steps/)

如果您担心 JavaFX 在 Raspberry Pi 上的性能，请查看博客文章[“Raspberry PI 上的 JavaFX”](http://fxexperience.com/2012/12/javafx-on-raspberry-pi/)，其中包含一些有关 JavaFX 性能的信息，并将其与本机应用程序进行比较。

**更新：在 Pi 上运行带有 Java 8 的 Tomcat 7 后的测试结果在**
获得 512mb 版本的 Pi（型号 B）后，我安装了 Java 8 和 Tomcat 7.0，没有任何问题。Tomcat 示例正在运行，我能够毫无问题地使用 Tomcat 管理器应用程序。

使用 64 MB 的 RAM 用于显卡，我仍然有 291 MB 的可用内存（运行 sshd）：

```
pi@raspberrypi ~/ $ free -m
             total       used       free     shared    buffers     cached
Mem:           438        146        291          0         10         74
-/+ buffers/cache:         60        377
Swap:           99          0         99 
```

`pmap`报告 Tomcat 进程总共使用了 192 MB。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-30T11:37:24.727

Raspberry Pi 只有 185MB 可用于整个 JVM。（启动后，有 16MB 用于视频处理）。

然后，您需要使用积极和精确的记忆选项 ( `-Xmx120M -XX:MaxPermSize=55M -XX:ReservedCodeCacheSize=4M -Djava.awt.headless=true`)

我做了一个基于 Jetty、Spring 3 和 Hibernate/JPA 的应用程序。刚刚部署后，它适合大约 15MB 的堆空间和 32MB 的非堆空间（使用 JProfiler 内存分析）

每个加载的类都是永久内存丢失，因为 PermGen 空间不能被垃圾收集。加载很多类只是为了支持初始化，但会永远保持加载状态。也许可以发现 tweeks 为每个组件消耗更少的 PermGen 空间。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-23T16:07:42.593

你确实可以。有人在树莓派上运行 JBoss EAP（本质上是 JBoss AS 7）的[博客文章。](http://blog.c2b2.co.uk/2012/06/jboss-eap-6-as-light-as-raspberry-pi.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-13T09:59:37.920

我在 JRE 1.7 下的 Raspberry Pi 上使用 TJWS，它运行得非常快而且没有内存问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-23T12:24:47.553

目前，pi 上的 JVM 是*可能的*，但很难找到 Java SE 版本。可能有一个来自 Oracle 的 ARM，但我还没有尝试过（我的 pi 仍在路上），如果记忆有用，它就在一堵墙后面。

pi 的另一个限制是可用的 RAM。像 jboss 和 glassfish 这样的应用程序需要比 pi 提供的更多 RAM，除非在非常受限的部署下。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-17T23:57:46.633

Arun Gupta 发表了几篇关于在 Raspberry Pi 上运行 JBoss Wildfly 的文章。

*   [Raspberry Pi 上的 WildFly（技术提示 #25）](http://blog.arungupta.me/wildfly-on-raspberry-pi-techtip-24/)
*   [Raspberry Pi 上的 WildFly 托管域（技术提示 #27）](http://blog.arungupta.me/wildfly-managed-domain-raspberrypi-techtip27/)
*   [Raspberry Pi 上的 WildFly 集群（技术提示 #28）](http://blog.arungupta.me/wildfly-cluster-raspberrypi-techtip28/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-19T19:54:08.040

我已经用 sqlite 数据库在 openjdk 上运行了 tomcat7。以我笔记本电脑的四分之一速度处理可以，但打开 jsp 页面需要 10-15 秒。还不知道为什么。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-29T07:34:39.970

如果您想使用 java 11 和 javafx，我发现这绝对可以使用 BellSoft 的 Liberica JDK：[https ://bell-sw.com/pages/java-11.0.3](https://bell-sw.com/pages/java-11.0.3)

我的博客上提供了安装脚本和演示应用程序：[https ://webtechie.be/2019/04/16/pijava-overview-java-11-and-javafx-11-on-raspberry-pi](https://webtechie.be/2019/04/16/pijava-overview-java-11-and-javafx-11-on-raspberry-pi)

**要安装 JDK 11.0.2：**

```
# Make sure we are in the home directory
cd /home/pi

# Download the Java 11.0.2 distribution from BellSoft
wget https://download.bell-sw.com/java/11.0.2/bellsoft-jdk11.0.2-linux-arm32-vfp-hflt.tar.gz

# Move the downloaded file to /opt
sudo mv bellsoft-jdk11.0.2-linux-arm32-vfp-hflt.tar.gz /opt

# Use the /opt directory
cd /opt

# Untar the downloaded file
sudo tar -xvzf bellsoft-jdk11.0.2-linux-arm32-vfp-hflt.tar.gz

# Remove the downloaded file
sudo rm bellsoft-jdk11.0.2-linux-arm32-vfp-hflt.tar.gz 
```

**在不编译的情况下测试和运行 Java 文件：**

```
cd /home/pi
nano HelloWorld.java

public class HelloWorld {
    public static void main (String[] args) {
        System.out.println("Hello World");
    }
}

/opt/jdk-11/bin/java /home/pi/HelloWorld.java
Hello World 
```

# visual-studio - 多代码部署工具。

> ID：12090748
> 
> 赞同：0
> 
> 时间：2012-08-23T11:40:59.973
> 
> 标签：visual-studio, deployment

抱歉，如果之前提出过类似的问题。有很多部署问题，但似乎没有一个能解决我的问题。

反正。我正在使用 asp.net、C# 并使用 Visual Studio。

我工作的组织正在迅速变化。有很多项目正在筹备中，需要在接下来的几个月内进行多次代码更改和迭代部署。在工作时，这些变化总是“最重要的”，所以有时我必须多次编写同一个程序的某些部分。

由于这些项目都是交错的，我不能一下子就彻底改变；我必须多次部署和重新部署同一个程序，只使用该部署所需的更改。

如果这令人困惑，这里有一个简单的例子：

*   应用程序正在 Intranet 上使用。该应用程序使用驱动程序 A 调用我们的数据库。
*   有两个环境，测试和生产。
*   必须使用注册“测试”的参数调用某些存储过程，以允许某些其他应用程序即使使用错误数据也能运行（用于测试目的）。
*   部署应用程序时，这些存储过程必须修改，去掉Test参数
*   我们进行了操作系统升级，使我们能够迁移到更快的驱动程序 B，但需要对代码进行更改才能使用驱动程序 B。

所以这是两个完全不同的部署，其中必须为部署 1 更改一些代码，而必须为部署 2 更改其他代码。

目前我只是使用记事本来记录整体更改列表、定期调试断点和大量代码内注释，然后我手动浏览代码以确保所有内容都已更改。在多个文件、类、对象等上有数十万行代码，这变得非常乏味，并且很有可能会丢失某些东西（导致它中断）或推送错误的更改（导致它中断或允许不良数据）。

在这种情况下是否有可以用来提供帮助的工具？最好是我可以辨别部署 A 需要更改哪些内容以及部署 B 需要更改哪些内容？我也愿意听取其他思想流派（绝对接受提示！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:07:19.073

Sure, I understand your problem.

I would suggest a couple of things

1.  Installers : Why don't you think of installers, there are loads of installers i.e Install shield, Wix, MSI installer. These installers will give you flexibilty to update files which you need to update, i.e. Full Control. But you need to choose the best of them, I have worked around MSI and Wix a lot, so I know this can sort your problem, however its your call.

2.  Publish : I haven't played around much with this, I have just done website publish. However I know it does wonders, so try it also.

# oracle - SimpleJdbcCall 找不到存储过程

> ID：12090749
> 
> 赞同：0
> 
> 时间：2012-08-23T11:41:05.153
> 
> 标签：oracle, spring, stored-procedures

我正在尝试执行存储在我的数据库中的 oracle 过程，我有时会执行它，但是在重命名它或更改一些参数之后，我无法再从 spring 执行它了。

我这样定义它（正文和规格）：

```
CREATE OR REPLACE PACKAGE PTR_GRUPOS_TRABAJO
AS
   PROCEDURE UDPATE_DIA (
--some parameters here
); 
```

我像这样创建 SimpleJdbcCall：

```
pActualizaDia = new SimpleJdbcCall(dataSource).withCatalogName("PTR_GRUPOS_TRABAJO").withProcedureName("UPDATE_DIA"); 
```

在设置（正确）每个参数后，它会失败。我什至尝试设置 withoutProcedureColumnMetaDataAccess 并声明每个参数，但是虽然这次我得到了每个？（参数）在我的查询中，它仍然抱怨找不到程序，就像这样。

```
org.springframework.jdbc.BadSqlGrammarException: CallableStatementCallback; bad SQL grammar [{call PTR_GRUPOS_TRABAJO.UPDATE_DIA()}]; 
```

怎么了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:43:51.447

好的...

数据库过程被称为 UDPATE_DIA 而不是 UPDATE_DIA。这是一个既定的程序，我有点阅读障碍。

无论如何，谢谢你奥利，我应该死和毁灭。

# c++ - 头文件中实现的隐式内联虚函数

> ID：12090754
> 
> 赞同：1
> 
> 时间：2012-08-23T11:41:27.983
> 
> 标签：c++, function, header, virtual, inline

使用 virtual 关键字在 .h 文件中编写函数及其实现（隐式内联）：

```
virtual void g(){cout<<"is Inline?"}; 
```

虚拟功能是否因为在.h中实现了功能而没有意义？这被认为是内联吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T11:51:29.727

> 虚拟功能是否因为在.h中实现了功能而没有意义？

不`virtual`，并且`inline`是完全独立的概念。

`virtual`意味着调用的函数是在运行时根据调用它的对象的动态类型来选择的。

`inline`意味着您可以在多个翻译单元中定义该函数，并且必须在任何使用它的翻译单元中定义它。这对于允许内联函数是必要的（对于某些编译器），但并不强制所有调用都内联。特别是，虚拟调用通常不会被内联（除非动态类型可以在编译时确定），所以`virtual`这里肯定会保留它的含义。

> 这被认为是内联吗？

是的，但是（如上所述）这并不意味着所有调用都将被内联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:44:50.913

> 虚拟功能是否因为在.h中实现了功能而没有意义？

**不**。没有理由这么觉得。头文件被预处理并复制粘贴到任何包含它的地方。`g()`所以最终它和在任何 .cpp 文件中实现你的一样好。

> 这被认为是内联吗？

**是**的。但这里`inline`并不意味着用其内容替换函数调用的通常解释。`virtual`函数解析发生在运行时，因此绝对不能以那种（宏样式）方式内联。
这意味着，编译器保证只为所有翻译（.cpp 文件）单元生成 1 个定义。因此链接器不会抱怨多个定义错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:50:14.750

如果你声明你的函数`virtual`，它是虚拟的，句号。但是，由于通常在运行时选择虚函数，因此编译器通常无法内联它们。如果您在对象上调用函数，编译器可能会内联它，因为调用可以在编译时解析。但它无法通过引用或指针内联调用，因为它无法在编译时解析动态类型。

考虑到`inline`这里的关键字和隐式内联对于编译器都不是强制性的；它们只是建议。但是`virtual`关键字是强制性的。

# php - 如何从 Simplepie（多个）提要中删除重复的帖子

> ID：12090756
> 
> 赞同：2
> 
> 时间：2012-08-23T11:41:39.963
> 
> 标签：php, xml, rss, feed, simplepie

我有多个分支站点，它们使用 Simplepie 将他们的 RSS 新闻提要馈送到一个主站点。这很好用。唯一的问题是，有时多个分支机构发布同一篇新闻文章，然后在主站点上显示多篇新闻文章。我将如何删除重复项？

```
<?php
require_once(ABSPATH .'php/simplepie.inc');
$feed = new SimplePie();

$feed->set_feed_url(array(

'http://www.branch1.com/feed/',
    'http://www.branch2.com/feed/',
    'http://www.branch3.com/feed/',
    'http://www.branch4.com/feed/',

));

$feed->set_favicon_handler('handler_image.php');
$feed->init();
$feed->handle_content_type();

foreach ($feed->get_items() as $property):

    // I want this to be unique
    echo $property->get_title();

endforeach;
?> 
```

我已经试过了。没有运气。

```
foreach (array_unique($unique) as $property): 
```

我还尝试进行第二次 foreach 寻找任何匹配的标题。并且只显示旁边有数字 1 或第一场比赛的那些......但它一直给我匹配的数量而不是：

1.Match0 1.Match1 2.Match1 3.Match1 1.Match2 2.Match2 等...

```
foreach ($feed->get_items() as $property):

 $t = $property->get_title();
 $match = 0;

foreach ($feed->get_items() as $property2): 
  $t2 = $property2->get_title();

  if ($t == $t2){
   $match++;
   //echo $match;
      }

    if ($match <= 2){echo "$match. $t <br/> ";}

    endforeach;

endforeach; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T05:37:39.777

尝试将获取的项目与**标题的键**放在另一个数组中，以便在数组中覆盖重复的标题。然后你从数组中拉回内容。

```
$arrFeedStack = array();
foreach ($feed->get_items() as $property):
    $arrFeedStack[$property->get_title()] = $property->get_description();
endforeach;

foreach ($arrFeedStack as $item) {
    echo $item . <br />;
} 
```

# mysql - 与另一个模式中的查找表进行比较时，填写列时出错

> ID：12090769
> 
> 赞同：0
> 
> 时间：2012-08-23T11:42:15.783
> 
> 标签：mysql, where-clause, lookup-tables

在将值与不同模式中的另一个值进行比较时，我在尝试实现列 id 'like' 时遇到问题。

这是我正在使用的代码：

```
update oldb.incidencias set impact_id = 
    (select impact_id
    from
        newdb.impacts
    where
         olddb.incidencias.impacto = newdb.impacts.impact_type); 
```

这是我得到的错误：

> 错误代码：1054。“where 子句”中的未知列“olddb.incidencias.impacto”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:48:27.150

你可以试试这个：

```
update o
set o.impact_id = n.impact_id
from  oldb.incidencias o
inner join newdb.impacts n 
  on o.impacto = n.impact_type 
```

或者

```
update oldb.incidencias o
inner join newdb.impacts n 
  on o.impacto = n.impact_type
set o.impact_id = n.impact_id 
```

# objective-c - NSFetchedResultsController 有 0 个部分

> ID：12090771
> 
> 赞同：5
> 
> 时间：2012-08-23T11:42:18.420
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller

我遇到了一个问题，我不知道它来自哪里，与 CoreData 相关。在我的数据库中，有一组类别（带有名称和描述），其中包含元素（使用一对多关系）。

我想在给定`Category`类属性的情况下将我的表格视图划分为部分，但是当我尝试使用它时`sectionNameKeyPath:`，结果`NSFetchedResultsController`有 0 个部分。如果我将 nil 传递给此参数，则它有 1 个部分。

代码如下：

```
- (NSFetchedResultsController*) fetchedResultsController
{
    if(fetchedResultsController)
        return fetchedResultsController;

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Category"
                                              inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:10];

    // Edit the sort key as appropriate.

    NSSortDescriptor *checkDescriptor = [[NSSortDescriptor alloc] initWithKey:@"checked"
                                                                   ascending:YES];
    NSSortDescriptor *indexDescriptor = [[NSSortDescriptor alloc] initWithKey:@"orderIndex"
                                                                   ascending:YES];
    NSArray *sortDescriptors = @[checkDescriptor, indexDescriptor];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                   managedObjectContext:self.managedObjectContext
                                                                     sectionNameKeyPath:@"checked"
                                                                              cacheName:nil];

    NSError *error = nil;
    if (![fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
        return nil;
    } else {
        fetchedResultsController.delegate = self;
        return fetchedResultsController;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:55:53.910

请参阅`NSFetchedResultsController`文档：用于`sectionNameKeyPath`（在您的情况下为“name”）的键必须与第一个排序描述符中使用的键相同（在您的情况下为“checked”）。它们可以不同，但​​是两个键必须生成相同的相对顺序。

在您的情况下，我假设您想在“名称”上添加一个额外的排序描述符并将其用作第一个排序描述符。

# mysql - Unix 时间戳 bigint(20)

> ID：12090772
> 
> 赞同：2
> 
> 时间：2012-08-23T11:42:20.680
> 
> 标签：mysql, unix-timestamp

我正在研究 MySQL 数据库，我想一些时间戳是 Unix 格式的。

这些时间戳位于 bigint(20) 字段中。

我要为他们疯狂了。

如何将这些转换为常规时间戳？

例子：

634583466272408810

634587264000000000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:44:36.470

尝试

```
select from_unixtime(634583466272408810/1000000000) 
```

请参阅[FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

# java - Facebook API 过滤用户活动以仅显示指定的朋友

> ID：12090779
> 
> 赞同：0
> 
> 时间：2012-08-23T11:42:46.073
> 
> 标签：java, php, javascript, facebook, facebook-graph-api

想象一下这种情况，我在 facebook 上有 1000 多个朋友，但我希望只阅读一小部分的更新，例如：10 个密友。我怎样才能只收到这 10 个朋友的更新。我不知道如何在 Facebook 上实现这一目标。我可以使用 facebook API 来实现它吗？（Javascript、PHP、Java 等。）非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:17:26.760

好吧，你已经标记了这个 java、php 和 javascript，但假设你有 php-sdk，你可以使用 fql 查询来检索你想要的信息

```
 //assuming $facebook is your php Facebook object
 $fql = url_encode('SELECT status_id, message,uid FROM status WHERE uid in(id1,id2,id3...)');
 $data = $facebook->api('/fql?q='. $fql);
 //data should now hold the response you want, though you will have to match up user names to the uid. I'm assuming you know who the top 10 friends are though and have their id 
```

或者查看批量请求[https://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-graph-api/](https://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-graph-api/) 或 FQL 多查询 [https://developers.facebook.com/文档/参考/fql/](https://developers.facebook.com/docs/reference/fql/)

# c# - Windows Phone 7 SaveContactTask

> ID：12090780
> 
> 赞同：0
> 
> 时间：2012-08-23T11:42:48.527
> 
> 标签：c#, windows-phone-7

可能吗？1.选择联系人并确定所选联系人，用户要求什么（我必须使用什么参数？）然后，使用 SaveContactTask 更新信息？SaveContactTask 没有联系人的所有信息。当用户保存联系人时，一些信息会丢失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:07:17.377

`Contacts`Windows Phone Mango 中的 API 是只读的。因此，您无法更新现有联系人的信息。通过使用`SaveContactTask`，您将始终创建一个新联系人。

# java - charAt() 对于大于 1 的整数？

> ID：12090781
> 
> 赞同：-1
> 
> 时间：2012-08-23T11:42:49.910
> 
> 标签：java

我正在尝试创建一个程序，显示任何给定点的坐标`x`和`y`坐标，反映在线性函数`ax+b`上。但是，我收到一个运行时错误，表明它超出了范围。我知道您不能在原始数据类型上调用方法，但我不知道如何获得它。

```
import java.util.*;
public class ReflectivePoint {
    public static void main (String[]args){
        Scanner lol = new Scanner(System.in);
        System.out.println("Please enter the linear function.");

        //That will be in the format ax+b
        String function = lol.nextLine();
        Scanner lol2 = new Scanner(System.in);
        System.out.println("Please enter the point.");

        //That will be in the format a,b
        String point = lol2.nextLine();
        int a = point.charAt(1);
        int b = point.charAt(3);
        int m = function.charAt(1);
        int c = function.charAt(4);
        int x1 = (2 / (m + 1 / m)) * (c + b - a / m) - a;
        int y1 = (-1/m) * x1 + a / m + b;
        System.out.println(x1+", "+y1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:57:44.463

您可以使用：

```
int a = point.charAt(0); 
```

*前提*是它`point`不为空。

理想情况下，您应该对输入字符串执行使用前长度检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:00:27.003

除了超出范围的问题外，其他人指出您需要从该数字开始，`charAt(0)`因为该数字是 char 数组（字符串）的偏移量，而不是获取第`n`th 个元素。

您还需要减去“0”才能转换为整数。

```
string point = "4";
int a = point.charAt(0);
//a=52 //not what you wanted

string point = "4";
int a = point.charAt(0) - '0';
//a=4 //this is what you wanted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:53:02.447

也许你得到一个长度为 3 的字符串，例如“1,2”。

charAt(3) 将尝试返回不存在的字符串的第 4 个字符，因此它会引发 StringIndexOutOfBoundsException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T11:54:40.690

索引越界错误表示“您已向我询问此字符串的第 4 个字符，但该字符串少于 4 个字符。”

请注意（与大多数计算机语言索引一样），第一个字符是 0。 charAt("hello",1) == 'e'

您应该在调用 charAt() 之前检查字符串的长度。或者，捕获异常并处理它。

charAt() 可能不是您的程序的最佳选择，因为它目前只能处理个位数。尝试 String.split() 以逗号分隔字符串。

此外，目前它正在使用字符的 ASCII 值。也就是说（如果您修复了索引）“a,b”将导致您使用 m=97 和 c=98 进行数学运算。我想这不是你想要的。了解 Integer.parseInt()

# qt - Qt QNetworkAccessManager & 多个 QNetworkReplay

> ID：12090786
> 
> 赞同：1
> 
> 时间：2012-08-23T11:43:16.883
> 
> 标签：qt, http, qnetworkaccessmanager

我有两个 http get 方法。

首先是获取 UserID，其次是获取有关当前用户的完整信息；

我想处理带有不同插槽的成品标牌

使用 GetUserIDCompleted 处理 GetUserID 并使用 GetUserDetailsCompleted 处理 GetUserDetails

```
MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    nam = new QNetworkAccessManager(this);

    GetUserID();
    connect(nam, SIGNAL(finished(QNetworkReply*)), this, SLOT(GetUserIDCompleted(QNetworkReply*)));

    GetUserDetails();
    connect(nam, SIGNAL(finished(QNetworkReply*)), this, SLOT(GetUserDetailsCompleted(QNetworkReply*)));
} 
```

是否有可能在不同的插槽中获得 QNetworkReplay？

![在此处输入图像描述](../Images/a7a7ef398f55eef91bd866fbd097bee0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T16:43:56.220

也许你可以做这样的事情：枚举不同的方法

```
enum GetMethod
{
    getUserId,
    getUserDetails
}; 
```

并且您保留回复的哈希值和相应的方法：

```
QHash<QNetworkReply*, GetMethod> hash;

QNetworkReply *reply1 = nam->post(requestUserId, data);
hash[reply1] = GetMethod::getUserId;

QNetworkReply *reply2 = nam->post(requestUserDetails, data);
hash[reply2] = GetMethod::getUserDetails;

connect(nam, SIGNAL(finished(QNetworkReply*)), this, SLOT(finished(QNetworkReply*))); 
```

并拥有一个调用正确函数的插槽

```
void MainWindow::finished(QNetworkReply *reply)
{
    switch(hash[reply])
    {
    case GetMethod::getUserId:
        GetUserIDCompleted(reply);
        break;
    case GetMethod::getUserDetails:
        GetUserDetailsCompleted(reply);
        break;
    }

    hash.remove(reply);
} 
```

我没有尝试过并采取了一些捷径，但你得到了它的精神 =) 。似乎您可以使用答案检索请求，但我认为使用枚举更容易。

希望它有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:15:03.397

您对 QNetworkAccessManager 执行的每个操作都将返回一个 QNetworkReply。这也有一个信号完成。也许您可以将此信号连接到您的不同插槽。

祝你好运

# ipad - 如何在窗口上找到我的特定按钮？

> ID：12090787
> 
> 赞同：1
> 
> 时间：2012-08-23T11:43:18.823
> 
> 标签：ipad, uibutton

我已经为 iPad 应用程序创建了自定义 UIButton。

现在出于特定原因，我想隐藏这些按钮。为此，我使用以下代码：

```
NSMutableArray *viewArray = [[NSMutableArray alloc] init];

    // Get all the windows
    for (UIWindow *window in [[UIApplication sharedApplication] windows])
    {
      // check for main screen
      if (![window respondsToSelector:@selector(screen)] ||
          [window screen] == [UIScreen mainScreen])
      {

        // check for all the subviews available in window
        for (UIView * view in [window subviews]) {

          // check whether it supports this method
          if ([view respondsToSelector:@selector(isKindOfClass:)]) {

            // type cast to button
            //          UIButton *btn = (UIButton *)view;

            // if its type of my custom button class
            if ([[view class] isKindOfClass:[DINNextLTProBoldButton class]]) {

              // hide view and add to array
              [view setHidden:YES];
              [viewArray addObject:view];
            }
          }
        }
      }
    } 
```

但我无法在这个数组中获得我的自定义按钮。即使窗口/屏幕上出现的视图具有这些按钮，它也保持空白。

我哪里错了？请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:53:54.663

试试这个（未经测试，但它给出了基本的想法）

```
- (void)hideViewOfClass:(Class)clazz inHeirarchyOfView:(UIView *)view
{
    for (UIView *subview in [view subviews])
    {
        if ([subview isKindOfClass:clazz])
            subview.hidden = YES;
        else 
            [self hideViewOfClass:clazz inHeirarchyOfView:subview];
    }
} 
```

首先调用此函数，例如：

```
for (UIWindow *window in [[UIApplication sharedApplication] windows])
    [self hideViewOfClass:[DINNextLTProBoldButton class] inHeirarchyOfView:window]; 
```

# c# - Log4net 生成错误的日志文件名

> ID：12090788
> 
> 赞同：5
> 
> 时间：2012-08-23T11:43:29.190
> 
> 标签：c#, .net, configuration, log4net

我想使用以下模式创建日志文件名称：

```
SBRF_20120820.log
SBRF_20120821.log
SBRF_20120822.log
SBRF_20120823.log 
```

换句话说，每天创建一个新文件。因此，我创建了以下配置来做到这一点：

```
<log4net>
    <appender name="FileAppender" type="log4net.Appender.RollingFileAppender, log4net">
        <file type="log4net.Util.PatternString" value="Logs/SBRF_%date{yyyyMMdd}.log" />
        <appendToFile value="true" />
        <rollingStyle value="Date" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date %-5level - %message%newline" />
        </layout>
    </appender>
    <logger name="LogEmArquivo">
        <level value="INFO" />
        <appender-ref ref="FileAppender" />
    </logger>
</log4net> 
```

例如，当我运行该程序时，`SBRF_20120823.log`将创建该文件。但是在接下来的几天里，日志一直在`SBRF_20120823.log`文件中写入，并且创建的文件是：

```
SBRF_20120823.log.2012-08-23
SBRF_20120823.log.2012-08-24
SBRF_20120823.log.2012-08-25
SBRF_20120823.log.2012-08-26 
```

如果我明天运行程序，将创建的文件是：

```
SBRF_20120824.log.2012-08-24
SBRF_20120824.log.2012-08-25
SBRF_20120824.log.2012-08-26
SBRF_20120824.log.2012-08-27 
```

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T22:41:43.610

您不要将日期模式放在 <file> 中 - 这是文件名的静态部分。您需要将其放入 <datePattern>。

Also, if you are using log4net 1.2.11, you can use <preserveLogFileNameExtension> which puts the datePattern on the current file also.

I think this is what you want your configuration to look like:

```
<log4net>
  <appender name="FileAppender" type="log4net.Appender.RollingFileAppender, log4net">
      <file type="log4net.Util.PatternString" value="Logs/SBRF_.log"/>
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <datePattern value="yyyyMMdd" />
      <preserveLogFileNameExtension value="true"/>
      <staticLogFileName value="false" />
      <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%date %-5level - %message%newline" />
      </layout>
  </appender>
  <logger name="LogEmArquivo">
      <level value="INFO" />
      <appender-ref ref="FileAppender" />
  </logger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:45:17.110

删除`<rollingStyle value="Date" />`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T12:48:12.903

不要以为你用 RollingFileAppender 改变了这个行为，所以你必须创建自己的 appender。

# java - 有 java.lang.IllegalArgumentException 异常尝试发送 gcm 消息？？

> ID：12090791
> 
> 赞同：1
> 
> 时间：2012-08-23T11:43:44.440
> 
> 标签：java, android, google-cloud-messaging

尝试从我的应用服务器向 GCM 服务器发送消息时，出现 java.lang.IllegalArgumentException 异常。在客户端注册成功。

```
import java.util.ArrayList;

import com.google.android.gcm.server.Message;
import com.google.android.gcm.server.MulticastResult;
import com.google.android.gcm.server.Sender;

class Notify {
    public static void main(String args[]) {

        try {

            Sender sender = new Sender(
                    "AIzaSyCd9HdSlq51nLzoqxMaFLsxWaoxxIz6-bU");

            ArrayList<String> devicesList = new ArrayList<String>();
            devicesList.add("APA91bFzbdNTf5CVsnSpkPJxMTCUCnjruluaerQcONQq9f20aaHw1CMNcVFgBsnLd6gUQT5TxrV2WY5WBw9U9u4Paj3dAXgRbaATc9a2Gp0voF3h5elX3Be0r3xw3Kun2HZT1m3D8L6IwCkXtTiILIfVasiKd2uN3w");
            devicesList.add("APA91bFzbdNTf5CVsnSpkPJxMTCUCnjruluaerQcONQq9f20aaHw1CMNcVFgBsnLd6gUQT5TxrV2WY5WBw9U9u4Paj3dAXgRbaATc9a2Gp0voF3h5elX3Be0r3xw3Kun2HZT1m3D8L6IwCkXtTiILIfVasiKd2uN3w");

            // use this line to send message with payload data
            Message message = new Message.Builder()
                    .collapseKey("1")
                    .timeToLive(3)
                    .delayWhileIdle(true)
                    .addData("message",
                            "this text will be seen in notification bar!!")
                    .build();

            // Use this for multicast messages
            MulticastResult result = sender.send(message, devicesList, 1);
            sender.send(message, devicesList, 1);

            System.out.println(result.toString());
            if (result.getResults() != null) {
                int canonicalRegId = result.getCanonicalIds();
                if (canonicalRegId != 0) {
                }
            } else {
                int error = result.getFailure();
                System.out.println(error);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

那是代码

```
java.lang.IllegalArgumentException: argument cannot be null
    at com.google.android.gcm.server.Sender.nonNull(Sender.java:553)
    at com.google.android.gcm.server.Sender.getString(Sender.java:534)
    at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:365)
    at com.google.android.gcm.server.Sender.send(Sender.java:261)
    at com.example.server.Notify.main(Notify.java:34) 
```

这就是我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:58:07.983

您的 AIzaSyCd9HdSlq51nLzoqxMaFLsxWaoxxIz6-bU 的问题 - 使用另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T02:11:37.017

虽然选择了上面的答案，但我相信这是原因。

[https://code.google.com/p/gcm/issues/detail?id=7](https://code.google.com/p/gcm/issues/detail?id=7)

该问题已在 master 中修复，但 SDK 中的 jar 已过时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:00:54.823

读取响应部分有问题。它应该是这样的：

```
MulticastResult multiResult = sender.send(message, devicesList, 1);
List<Result> results = multiResult.getResults();

for (int i = 0; i < results.size(); i++) {
    Result result = results.get(i);

    if (result.getMessageId() != null) {
        // Success
        String canonicalRegId = result.getCanonicalRegistrationId();
        if (canonicalRegId != null) { 
            // same device has more than one registration id.Update it
        }
    } else {
        // Error occurred
        String error = result.getErrorCodeName();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-05T14:41:23.610

GCM 服务器返回类似“401 Unauthorized”的错误，但 GCM 代码中有一个错误，它会抛出 this`IllegalArgumentException`而不是预期的`InvalidRequestException`. 您需要附加源代码，然后在此代码处设置断点，`com.google.android.gcm.server.Sender`以查看实际的 HTTP 错误是什么。

```
int status = conn.getResponseCode();
String responseBody;
if (status != 200) {
  responseBody = getString(conn.getErrorStream());
  logger.finest("JSON error response: " + responseBody);
  throw new InvalidRequestException(status, responseBody);
} 
```

基本上`conn.getErrorStream()`是回到`null`这里，所以你永远不会看到`InvalidRequestException`.

上面的代码来自最新的 1.0.2 版本。最新的 GCM GIT 存储库中有一个相关的修复程序，[https://code.google.com/p/gcm/issues/detail?](https://code.google.com/p/gcm/issues/detail?id=7) id=7 ，但是看看他们对[Sender](https://code.google.com/p/gcm/source/browse/gcm-server/src/com/google/android/gcm/server/Sender.java)所做的更改，它似乎仍然会是一个问题。

# android - Android TextView 与多种字体（语言）一起使用

> ID：12090792
> 
> 赞同：0
> 
> 时间：2012-08-23T11:43:51.977
> 
> 标签：android, internationalization, textview

我有一个预装了一些内容的文本视图。我想要的是用英文显示某些内容的某些部分，用中文显示一些内容。比如说我有三个英文段落，那么每个这样的段落都应该跟中文段落。由于长度不同，我不能使用内容的跨越。请为此提供解决方案或更好的替代方案。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:49:09.213

`HTML`你可以像这样 格式化它：

**`MyTypeFace.class`**

```
package my.app;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.text.TextPaint;
import android.text.style.TypefaceSpan;

public class MyTypeFace extends TypefaceSpan {
private final Typeface newType;
public MyTypeFace(String family, Typeface type) {
    super(family);
    newType = type;
}
@Override
public void updateDrawState(TextPaint ds) {
    applyCustomTypeFace(ds, newType);
}
@Override
public void updateMeasureState(TextPaint paint) {
    applyCustomTypeFace(paint, newType);
}
private static void applyCustomTypeFace(Paint paint, Typeface tf) {
    int oldStyle;
    Typeface old = paint.getTypeface();
    if (old == null) {
        oldStyle = 0;
    } else {
        oldStyle = old.getStyle();
    }
    int fake = oldStyle & ~tf.getStyle();
    if ((fake & Typeface.BOLD) != 0) {
        paint.setFakeBoldText(true);
    }
    if ((fake & Typeface.ITALIC) != 0) {
        paint.setTextSkewX(-0.25f);
    }
    paint.setTypeface(tf);
}
} 
```

现在，继续从 中获取故事，`String.xml`在它们上应用字体，然后显示它们。

```
String text1=findViewById(R.string.text1);  
String text2=findViewById(R.string.text2);  

TextView textView = (TextView) findViewById(R.id.custom_fonts);  
txt.setTextSize(30);
Typeface font1 = Typeface.createFromAsset(getAssets(), "english.ttf");
Typeface font2 = Typeface.createFromAsset(getAssets(), "chinese.ttf");   
text1.setSpan (new MyTypeFace("", font1), 0, 4,Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
text2.setSpan (new MyTypeFace("", font2), 4, 11,Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
String totalText=text1+"<br>"+text2;  
textView.setText(Html.fromHtml(totalText)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:47:58.273

您可以尝试从此示例中找出答案：

```
TextView text = new TextView(context);
text.setText(Html.fromHtml("<b>" + "some text" + "</b>" +  "<br />" + 
            "<small>" + "some text" + "</small>" + "<br />" + 
            "<small>" + "some text" + "</small>")); 
```

# python - 如何从多个列表中获取重复值？

> ID：12090793
> 
> 赞同：-1
> 
> 时间：2012-08-23T11:43:56.790
> 
> 标签：python, list

我在 python 中有几个列表，我想只取每个列表中的值，有没有直接做的函数？

例如我有：

```
{'a','b','c','d','e'},{'a','g','c','d','h','e'}, {'i','b','m','d','e','a'} 
```

我想列出一个包含

```
{'a','d','e'} 
```

但我不知道我实际上有多少个列表，因为它取决于值“i”。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:49:03.097

如果元素是唯一且可散列的（并且结果中的顺序无关紧要），则可以使用[集合](http://docs.python.org/library/sets.html)交集：例如：

```
 common_elements = list(set(list1).intersection(list2).intersection(list3)) 
```

这在功能上等同于：

```
 common_elements = list( set(list1) & set(list2) & set(list3) ) 
```

`&`运算符仅适用于集合，而该方法`intersection`适用于任何可迭代对象。

如果您有一个列表列表并且想要所有列表的交集，您可以轻松地做到这一点：

```
 common_elements = list( set.intersection( * map(set, your_list_of_lists) ) ) 
```

*特别感谢帝斯曼指出这一点*

或者你可以只使用一个循环：

```
 common_elements = set(your_list_of_lists[0])
 for elem in your_list_of_lists[1:]:
     common_elements = common_elements.intersection(elem)  #or common_elements &= set(elem) ...
 else:
     common_elements = list(common_elements) 
```

请注意，如果您真的想获得它们在原始列表中的顺序，您可以使用简单的排序来做到这一点：

```
common_elements.sort( key = lambda x, your_list_of_lists[0].index(x) ) 
```

`ValueError`通过施工，这里没有饲养的风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T11:58:34.697

只是在桌子上放一个衬里：

```
l=['a','b','c','d','e'],['a','g','c','d','h'], ['i','b','m','d','e']  
reduce(lambda a, b: a & b, map(set, l)) 
```

或者

```
from operator import and_
l=['a','b','c','d','e'],['a','g','c','d','h'], ['i','b','m','d','e']  
reduce(and_, map(set, l)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T11:52:15.527

您需要从第一个列表中进行设置，然后使用 set 的`.intersection()`方法。

```
a, b, c = ['a','b','c','d','e'], ['a','g','c','d','h'], ['i','b','m','d','e']
exists_in_all = set(a).intersection(b).intersection(c) 
```

**更新。** 根据**mgilson**的评论进行了简化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:50:54.577

```
from operator import and_

import operator
a = [['a','b','c','d','e'],['a','g','c','d','h','e'], ['i','b','m','d','e','a']]
print list(reduce(operator.and_, map(set, a))) 
```

它会给你列表中的 commeen 元素

```
['a', 'e', 'd'] 
```

# android - 屏幕旋转时Android按钮位置发生变化

> ID：12090811
> 
> 赞同：0
> 
> 时间：2012-08-23T11:45:30.960
> 
> 标签：android

1.  嗨，我是android编程的新手.....

    对于我的应用程序，我正在使用图像按钮，它已成功安装在设备上。但是当我旋转屏幕时，所有按钮的位置都会改变......我需要将所有按钮放在屏幕中心......这是我的代码......

    ```
    <TextView
        android:id="@+id/testText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#FFCC99"
        android:textSize="24dp" />

    <ImageButton
        android:id="@+id/up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="124dp"
        android:layout_marginTop="80dp"
        android:src="@drawable/up" />

    <ImageButton
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_below="@+id/up"
        android:layout_marginRight="200dp"
        android:layout_marginTop="150dp"

        android:src="@drawable/left" />

    <ImageButton
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_below="@+id/up"
        android:layout_marginRight="50dp"
        android:layout_marginTop="150dp"
        android:src="@drawable/right" />

    <ImageButton
        android:id="@+id/down"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/up"
        android:layout_alignParentRight="true"
        android:layout_marginRight="124dp"
        android:layout_marginTop="80dp"
        android:src="@drawable/down" /> 
    ```

    请帮忙............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:51:12.043

设置`android:gravity`为`center`。以下布局将为您做：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:gravity="center"
              android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Cool Button" />

</LinearLayout> 
```

还有其他方法可以做到这一点。
1\. 使用相对布局
2\. 使用 2 种布局：一种用于纵向，另一种用于横向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:47:55.830

您必须将所有小部件放在一个容器（LinearLayout）中并将其居中。为此，您可以使用重力属性。

您可以查看此页面：http: [//developer.android.com/guide/topics/ui/layout/linear.html](http://developer.android.com/guide/topics/ui/layout/linear.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:08:07.647

我对你的代码做了一些修改。请检查这是否是所需的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center_horizontal"
android:orientation="vertical" >

<TextView
    android:id="@+id/testText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:gravity="center_horizontal"
    android:text="Sample text"
    android:textColor="#FFCC99"
    android:textSize="24dp" />

<ImageButton
    android:id="@+id/up"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/up" />

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageButton
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_gravity="left"
        android:src="@drawable/left" />

    <ImageButton
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_gravity="right"
        android:src="@drawable/right" />
</RelativeLayout>

<ImageButton
    android:id="@+id/down"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/down" />

</LinearLayout> 
```

# java - 如何从http获取字符串

> ID：12090813
> 
> 赞同：-1
> 
> 时间：2012-08-23T11:45:38.213
> 
> 标签：java, jsf-2

我使用此代码从 http 获取整数：

```
this.id = 
 Integer.parseInt(FacesContext.getCurrentInstance().
 getExternalContext().getRequestParameterMap().get("id")); 
```

现在我需要从 http 中获取字符串。你能告诉我我该怎么做吗？在 Netbeans 中，我测试了这段代码：

```
 this.id = 
   String.parseString(FacesContext.getCurrentInstance().
   getExternalContext().getRequestParameterMap().get("id")); 
```

但我得到一个错误。你能告诉我这样做的正确方法是什么吗？

PS Netbeans 中的错误：

```
cannot find symbol
  symbol:   method parseString(java.lang.String)
  location: class java.lang.String 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:51:52.437

```
FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id") 
```

已经返回一个字符串，你不必解析它，除了 Java 中的字符串没有方法：

```
String.parseString(String s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:52:05.030

我认为 .get() 返回一个对象。所以你可以附加 .toString() 而不是解析它。上面一行返回一个 Integer 对象，您也可以在那里调用 .toString() 。我希望这有帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T11:52:45.707

`Integer.parseInt`接受一个字符串作为参数。所以你只需要：

```
this.id = FacesContext.getCurrentInstance().getExternalContext().
          getRequestParameterMap().get("id"); 
```

因为您不需要解析字符串来获取字符串（正如您的编译器告诉您的那样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T11:52:53.283

String 类没有 parseString() 方法。你已经有一个字符串。这应该有效（如果 this.id 实际上是一个字符串）：

```
 this.id = 
     FacesContext.getCurrentInstance().
     getExternalContext().getRequestParameterMap().get("id"); 
```

# .net - 从 x264vfw 过滤器获取输出数据

> ID：12090814
> 
> 赞同：0
> 
> 时间：2012-08-23T11:45:40.523
> 
> 标签：.net, rtsp, live-streaming, directshow.net, x264

我需要从 x264 编码器获取 H264 流并制作某种直播流媒体服务器。客户端将连接到服务器，然后通过 rtsp 接收视频。如何从 x264vfw 输出引脚获取数据？以什么方式更好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:00:40.610

引脚连接到引脚，您需要将此引脚连接到另一个过滤器。这可能是一个过滤器，例如 Sample Grabber，它使数据在 DirectShow 管道之外可用。

# fullscreen - LWJGL 全屏不工作

> ID：12090819
> 
> 赞同：5
> 
> 时间：2012-08-23T11:45:49.743
> 
> 标签：fullscreen, lwjgl

我正在尝试向我的程序添加全屏功能，但我无法让它工作。我正在努力

```
Display.setFullscreen(true); 
```

我尝试将其位置更改为创建显示的位置或设置显示模式的位置，但仍然无法正常工作。对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T13:04:11.543

根据我的经验，DisplayMode 需要支持它。你可以试试这个：

```
 DisplayMode displayMode = null;
        DisplayMode[] modes = Display.getAvailableDisplayModes();

         for (int i = 0; i < modes.length; i++)
         {
             if (modes[i].getWidth() == width
             && modes[i].getHeight() == height
             && modes[i].isFullscreenCapable())
               {
                    displayMode = modes[i];
               }
         } 
```

完成此操作后，您的 Display.setFullscreen(true) 应该可以工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-26T22:40:38.190

我知道这个问题已经很久了（5 年），但可能仍然有人在寻找这个问题的解决方案。

最简单的方法是：

```
Display.setDisplayModeAndFullscreen(Display.getDesktopDisplayMode()); 
```

这将使您的显示器全屏显示。也不需要 setFullscreen() 。

# performance - 网站中大量静态页面的问题

> ID：12090821
> 
> 赞同：0
> 
> 时间：2012-08-23T11:45:50.720
> 
> 标签：performance, seo, webserver, static-pages

我们的数据库中有 200 万家企业。我的客户想为每个企业创建 1 个静态页面，以便这些页面被 Google 索引。他希望每个页面都具有以下 URL 结构：-

`http://website/business-name/category/city/zip/`

因此，示例页面可能具有 URL：-

`http://example.com/pizza-hut/restaurant/newyork/12345/`

我想知道的是制作这么多静态页面的缺点以及它们有什么优点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:49:58.743

对 Google 来说，静态网页和生成的网页之间没有区别。如果有指向它的链接，它将抓取该页面。如果没有指向静态页面的链接，则无法找到它。因此，静态页面没有任何优势，除非从磁盘读取比动态生成更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:48:57.193

一个明显的缺点是，这使您需要管理大量文件，包括服务器、缓存系统、文件系统和源代码控制系统。

这是完全没用的，因为你可以让世界其他地方，包括谷歌机器人，认为有不同的页面而不需要制作不同的页面，使用[htaccess](http://en.wikipedia.org/wiki/.htaccess)规则：它们允许[URL 重写](http://en.wikipedia.org/wiki/Rewrite_engine)。

# powershell - powershell Foreach-Object 用法

> ID：12090822
> 
> 赞同：0
> 
> 时间：2012-08-23T11:45:56.447
> 
> 标签：powershell, powershell-2.0

我有脚本：

```
$servers = "server01", "s02", "s03"

foreach ($server in $servers) {

$server = (New-Object System.Net.NetworkInformation.Ping).send($servers)
if ($server.Status -eq "Success") {
Write-Host "$server is OK"
}
} 
```

错误信息：

```
An exception occured during a Ping request. 
```

我需要 ping $servers 数组中的每个服务器并显示状态。我认为，该 Foreach 语句未正确使用，但我无法找出问题所在。感谢您的意见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:51:11.307

您不应该`$server`在 foreach 循环中修改 的值。声明一个新变量（例如`$result`）。此外，`Ping.Send`将单个服务器名称，而不是服务器名称数组作为参数。以下代码应该可以工作。

最后，如果主机无法访问，您将需要捕获将引发的 PingException，否则您的脚本将打印出一个大的红色错误以及预期的结果。

```
$servers = "server1", "server2"

foreach ($server in $servers) {
   & {
       trap [System.Net.NetworkInformation.PingException] { continue; }
       $result = (New-Object System.Net.NetworkInformation.Ping).send($server)
       if ($result.Status -eq "Success") {
         Write-Host "$server is OK"
       }
       else {
         Write-Host "$server is NOT OK"
       }
     }
} 
```

# magento - 将新变量添加到 magento 核心配置

> ID：12090825
> 
> 赞同：0
> 
> 时间：2012-08-23T11:46:19.350
> 
> 标签：magento

在配置->目录->搜索引擎优化或核心配置中的任何其他此类位置中添加新配置设置的最佳方法是什么。

我正在开发一个需要使用我将在此处定义的设置的扩展。

谢谢卡拉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:16:56.793

如果您正在开发扩展，您可以使用`system.xml`. xpath 将是`catalog/groups/seo/fields/your_field`（参考`Mage/Catalog/etc/system.xml`）。

要为此值设置默认值，您可以使用 xpath 将该值添加到模块的 config.xml 中`default/catalog/seo/your_field`，或者您可以创建一个安装脚本，将值写入`core_config_data`.

# html - 在特定选项卡中打开链接 - 来自电子邮件

> ID：12090827
> 
> 赞同：10
> 
> 时间：2012-08-23T11:46:22.983
> 
> 标签：html, email, hyperlink, tabs

我的网站上有一个注册系统，它使用常见的激活电子邮件技巧。此电子邮件仅包含说明和指向我网站上激活页面的链接。所以假设我在网站上注册，打开一个新标签来检查我的电子邮件，然后单击链接，该链接将在另一个新标签中打开，导致网站上打开两个标签（顺便说一句，其中一个仍然告诉他们检查他们的邮件）。

有没有办法让电子邮件中的链接在我网站的第一个选项卡中打开？（或者如果前一个选项卡已关闭或移至另一个域，则打开一个新选项卡）。

感谢您的任何帮助/建议！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-23T11:55:26.197

您可以使用 JavaScript 分配命名当前窗口/选项卡：

```
<script type="text/javascript">
    this.name = "mainWindow";
</script> 
```

然后使用该名称作为`target`链接中属性的值，例如

```
<a href="nextPage.html" target="mainWindow">... 
```

如果`mainWindow`尚不存在（或不存在），它将在新选项卡中打开。

### 更新

上面的东西并没有解决 OP 的问题，因为对于从电子邮件打开的链接，`target`属性通常不会从 MUA 传输到浏览器（可能除了 webmailers，但我们不能依赖这个）。所以我在想某种使用 JavaScript 来达到预期效果的登录页面：

1.  如果目标窗口/选项卡 `mainWindow` 已经打开，将其聚焦，在那里执行激活，然后关闭我们自己。
2.  如果目标窗口/选项卡不存在，请在我们所在的位置执行激活。

如果这行得通，在它自行关闭之前，您只会看到第二个打开的选项卡片刻（案例 1）。[然而，正如我在这里](https://stackoverflow.com/questions/57854)和[这里](https://stackoverflow.com/questions/2076299)所学到的那样，“关闭自己”是不可能的——所以最终会留下一个多余的标签，这应该避免。好像做不到，抱歉！

# c# - 如何使用 C# 读取多级 xml？

> ID：12090828
> 
> 赞同：-5
> 
> 时间：2012-08-23T11:46:25.980
> 
> 标签：c#, xml

我有几个以下格式的 xml 文件。

```
<!--?xml version="1.0" standalone="yes"?-->
<details>
  <Classes>
    <class>5</class>
    <section>A</class>
  </Classes>
  <student>
    <firstname>Avijeet</firstname>
    <lastname>Roy</lastname>
    <roll>01</roll>
  </student>
  <student>
    <firstname>Saurav</firstname>
    <lastname>Das</lastname>
    <roll>02</roll>
  </student>
   <Classes>
    <class>10</class>
    <section>A</class>
  </Classes>
  <student>
    <firstname>Saumitra</firstname>
    <lastname>Bain</lastname>
    <roll>10</roll>
  </student>
  <student>
    <firstname>Tarun</firstname>
    <lastname>Sing</lastname>
    <roll>11</roll>
  </student>
</details> 
```

现在我想要一个像我的 asp.net 页面一样的数据网格

```
Class   Section fname    lname  roll
5   A   Avijeet  Roy    01
5   A   Saurav   Das    02
10  A   Saumitra Bain   10
10  A   Tarun    Sing   11 
```

我搜索了很多，但找不到类似的东西。我是 C# 新手

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T11:53:50.293

我认为您拥有的 xml 格式不符合您的要求，应该是这样的：

```
<details>
 <Classes>
      <Class>
        <class>5</class>
        <section>A</class>
        <student>
         <firstname>Avijeet</firstname>
         <lastname>Roy</lastname>
         <roll>01</roll>
       </student>
       <student>
        <firstname>Saurav</firstname>
        <lastname>Das</lastname>
        <roll>02</roll>
      </student>
      </Class>

       <Class>
        <class>10</class>
        <section>A</class>
        <student>
         <firstname>Saumitra</firstname>
         <lastname>Bain</lastname>
         <roll>10</roll>
       </student>
       <student>
        <firstname>Tarun</firstname>
        <lastname>Sing</lastname>
        <roll>11</roll>
      </student>
      </Class>
  </Classes> 
</details> 
```

在此之后，您可以使用 LINQ to XML：

例如。：

```
XDocument doc = XDocument.Load(xmlPath);
IEnumerable<XElement> selectors = from elements in doc.Elements("details").Elements("Classes").Elements("Class")
                                  select elements; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:50:23.447

您可以尝试创建反映 XML 文件结构的类型化数据集并从 XML 文件加载数据。然后你可以做数据绑定。此外，您可以使用[Linq to XML](http://msdn.microsoft.com/de-de/library/bb387098.aspx)。

# r - R如何根据矩形图中的分类变量分配两种不同的颜色？

> ID：12090830
> 
> 赞同：-3
> 
> 时间：2012-08-23T11:46:28.253
> 
> 标签：r

有没有办法根据矩形图中的分类值分配两种不同的颜色？

```
rect(0, yb, Studies.sort,yt,col=("black","lightgray"[Area$"Theory"]) 
```

显然……这是错误的……

领域由两个分类变量组成——“理论”和“职业”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:02:32.120

你很接近，以下工作：

```
plot(1:10)
mydf <- data.frame( xl =1:5, yb=1:5, xr=2:6, yt=10:6, 
    group=sample( c('A','B'), 5, replace=TRUE) )
with(mydf, rect( xl, yb, xr, yt, col=c('black','grey')[group]) ) 
```

重要的是这里的 group 是一个因素（不仅仅是一个字符向量）。但是，如果您使用颜色的命名向量（名称与组变量匹配），那么它也可以与字符向量一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:34:55.060

您需要调用`rect`要绘制的每种颜色，并将这些颜色放在数据框中的分类列中，以便您可以为每次调用过滤每个类别的数据`rect`。

我不知道你的原始数据是什么样的，所以这里有类似的东西：

```
# set up simple plotting window
plot.new()
plot.window(xlim=c(0,6),ylim=c(0,8))

# example data. Using colour as the categorical value we will filter on
sample.d <- data.frame(x=c(3,4,5,6), yb=c(1,3,5,7), yt=c(0,2,4,6),
colour=c("black","black","red","red"))

# draw black rectangles
black.d <- sample.d[sample.d$colour == "black",]
rect(0, black.d$yb, black.d$x, black.d$yt, col="black")

# draw red rectangles
red.d <- sample.d[sample.d$colour == "red",]
rect(0, red.d$yb, red.d$x, red.d$yt, col="red") 
```

# java - 左移运算符如何保持符号？

> ID：12090831
> 
> 赞同：3
> 
> 时间：2012-08-23T11:46:31.650
> 
> 标签：java, bit-manipulation, bit, bit-shift

我[查看了这个问题](https://stackoverflow.com/questions/8562099/why-there-are-two-right-shift-operators-and-single-left-shift-operator-in-java)以了解为什么在包括 Java 在内的大多数语言中都没有算术左移运算符。但是我们如何处理负整数，因为左移会把它扔掉。以 -2^5 为例，结果应该是负数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T11:51:27.753

不，除非您提交溢出，否则符号位永远不会被左移抛出。原因？在二进制补码编码中，负数的左侧全为 1，正数全为零。就像符号位被复制到右侧一样。顺便说一句，这正是“符号扩展”一词有意义的原因，这就是默认右移在 Java 中的工作方式。

```
 int i = -1;
  System.out.format("%3d = %s\n", i, Integer.toBinaryString(i));
  i <<= 5;
  System.out.format("%3d = %s\n", i, Integer.toBinaryString(i)); 
```

印刷

```
 -1 = 11111111111111111111111111111111
-32 = 11111111111111111111111111100000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:54:43.523

我最好的答案是在手术前后改变标志。这可能看起来太明显了，但问题是当符号发生变化时，这些位会以特定的方式发生变化

# c++ - 疯狂的谈话（对初始化的偏执）

> ID：12090836
> 
> 赞同：1
> 
> 时间：2012-08-23T11:46:47.693
> 
> 标签：c++

我很久以前就知道，唯一可靠的方法是初始化一个静态成员肯定是在一个函数中做。现在，我要做的是开始通过非常量引用返回静态数据，我需要有人阻止我。

```
function int& dataSlot()
{
    static int dataMember = 0;
    return dataMember;
} 
```

据我所知，这是确保静态成员初始化为零的唯一方法。但是，它会创建如下晦涩的代码：

```
dataSlot() = 7; // perfectly normal? 
```

另一种方法是将定义放在翻译单元中，并将内容放在头文件之外。我对此本身没有任何反对意见，但我不知道该标准所说的何时以及在什么情况下是安全的。

我最不想做的事情是意外访问未初始化的数据并失去对程序的控制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T11:52:11.557

（通常注意不要随意使用全局变量......）只需在全局范围内声明变量即可。它保证在任何代码运行之前被零初始化。

当涉及到具有非平凡构造函数的类型时，您必须更加狡猾，但是 int 可以作为全局变量正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T11:54:24.783

返回一个非常量引用本身是相当无害的，例如它是做什么的`vector::at()`，或者`vector::iterator::operator*`.

如果你不喜欢语法`dataSlot() = 7;`，你可以定义：

```
void setglobal(int i) {
    dataSlot() = i;
}
int getglobal() {
    return dataSlot();
} 
```

或者你可以定义：

```
int *dataSlot() {
    static int dataMember = 0;
    return &dataMember;
}

*dataSlot() = 7; // better than dataSlot() = 7?
std::cout << *dataSlot(); // worse than std::cout << dataSlot()? 
```

如果您希望有人阻止您，他们需要更多信息才能提出替代您使用可变全局状态的方法！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T11:49:41.597

它被称为[Meyers singletor](http://www.devarticles.com/c/a/Cplusplus/C-plus-plus-In-Theory-The-Singleton-Pattern-Part-I/4/)，它几乎是完全安全的。

您必须注意该对象是在调用函数 dataSlot() 时创建的，但是当程序存在时（全局变量被破坏时）它将被销毁，因此您必须特别小心。在析构函数中使用这个函数特别危险，可能会导致随机崩溃。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T12:40:04.260

> 我很久以前就知道，唯一可靠的方法是初始化一个静态成员肯定是在一个函数中做。

不，不是。该标准保证：

1.  **所有带有普通构造函数**的静态存储（块和文件或类静态范围）的对象都会在任何代码运行之前初始化。程序的任何代码。
2.  所有具有文件/全局/类静态范围和非平凡构造的对象都在`main`调用函数之前进行初始化。可以保证，如果对象 A 和 B 在同一个翻译单元中定义并且 A 在 B 之前定义，则 A 在 B 之前初始化。但是，在不同翻译单元中定义的对象的构造顺序是未指定的，并且在编译之间通常会有所不同。
3.  任何块静态对象在第一次达到其声明时都会被初始化。由于 C++03 标准不支持线程，[**这不是线程安全的！**](http://blogs.msdn.com/b/oldnewthing/archive/2004/03/08/85901.aspx)
4.  在函数退出或应用程序使用系统调用终止后，所有具有静态存储的对象（块和文件/全局/类静态范围）都按照其构造函数*完成*的相反顺序销毁。`main()``exit()`

这两种方法在所有情况下都不是可用且可靠的！

> 现在，我要做的是开始通过非常量引用返回静态数据，我需要有人阻止我。

没有人会阻止你。这是合法且完全合理的事情。但请确保您不会陷入线程陷阱。

例如，任何合理的 C++ 单元测试库都会自动注册所有测试用例。它通过以下方式实现：

```
std::vector<TestCase *> &testCaseList() {
    static std::vector<TestCase *> test_cases;
    return test_cases;
}

TestCase::TestCase() {
    ...
    testCaseList().push_back(this);
} 
```

因为这是仅有的两种方法之一。另一个是：

```
TestCase *firstTest = NULL;

class TestCase {
    ...
    TestCase *nextTest;
}

TestCase::TestCase() {
    ...
    nextTest = firstTest;
    firstTest = this;
} 
```

这次使用`firstTest`具有平凡构造函数的事实，因此*将*`TestCase`在任何具有非平凡构造的 s 之前初始化。

> 数据槽() = 7; // 完全正常？

是的。但如果你真的想要，你可以这样做：

1.  旧 C 的东西

    ```
    #define dataSlot _dataSlot() 
    ```

    以某种方式`errno`通常定义“变量”，

2.  或者你可以将它包装在一个结构中，比如

    ```
    class dataSlot {
        Type &getSlot() {
            static Type slot;
            return slot;
        }
        operator const Type &() { return getSlot(); }
        operator=(Type &newValue) { getSlot() = newValue; }
    }; 
    ```

    （这里的缺点是如果您尝试直接在 dataSlot 上调用 Type 的方法，编译器不会查找它们；这就是它需要 operator= 的原因）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T12:13:56.747

您可以为自己创建 2 个函数，dataslot() 和 set_dataslot()，它们是实际数据槽的包装器，有点像这样：

```
int &_dataslot() { static int val = 0; return val; }
int dataslot() { return _dataslot(); }
void set_dataslot(int n) { _dataslot() = n; } 
```

您可能不想在标头中内联那么多内容，但我发现如果您尝试这种事情，一些 C++ 实现会做得相当糟糕。

# iphone - 在后台运行并行任务

> ID：12090844
> 
> 赞同：0
> 
> 时间：2012-08-23T11:47:26.183
> 
> 标签：iphone, objective-c, nsoperationqueue

我`NSOperationQueue`用来运行任务。我在我的应用程序中使用后台处理。但是在添加任务时`NSOperationQueue`，我发现任务会以队列格式添加。

1.  `NSOperationQueue`执行并行任务还是顺序任务处理？
2.  如果不并行，那么如何在我的应用程序中实现并行任务操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:09:20.380

我建议您阅读[此](https://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)内容。为您提供的相关信息是：

> 操作队列与系统一起工作，以将并发操作的数量限制为适合可用内核和系统负载的值。
> 
> 尽管 NSOperationQueue 类是为操作的并发执行而设计的，但可以强制单个队列一次只运行一个操作。setMaxConcurrentOperationCount: 方法允许您配置操作队列对象的最大并发操作数。将值 1 传递给此方法会导致队列一次只执行一个操作。尽管一次只能执行一个操作，但执行顺序仍取决于其他因素，例如每个操作的准备情况及其分配的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:09:32.577

我建议您阅读[有关并发编程的文档](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ConcurrencyandApplicationDesign/ConcurrencyandApplicationDesign.html#//apple_ref/doc/uid/TP40008091-CH100-SW1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:06:05.463

您可以使用 " `performSelectorInBackground`" 方法执行并行任务。在此您仅显示前台任务，同时后台任务正在进行中。我已经在以下链接上回答了，请按照下面给出的链接接受答案。也许它会帮助你。

```
http://[stackoverflow.com/questions/8725636/cant-get-the-activity-indicator-to-show-on-iphone-app/8725875#8725875][1] 
```

谢谢！

问候！哈立德·乌斯曼

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T18:33:41.370

使用`setMaxConcurrentOperationCount:`设置并发操作数。

# jquery - 保留树列表的分支

> ID：12090851
> 
> 赞同：3
> 
> 时间：2012-08-23T11:48:07.147
> 
> 标签：jquery

有一个树形结构，我只想保留一个特定的分支。

清单如下：

```
ul.level-1
--li
----ul.level-2
------li
------li
--li
----ul.level-2
------li
------li
------li 
```

通过给出我选择的元素（二级`li`元素），我想删除所有顶级元素，`li` **除了**它`li`所属的元素。

如果不在树内迭代，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:51:00.867

您可以执行以下操作：

```
$("li").click(function() {
    var $this = $(this);
    $this.closest("ul.level-1").children("li").filter(function() {
        return !$this.closest(this).length;
    }).remove();
}); 
```

首先，[closest()](http://api.jquery.com/closest/)用于匹配顶级`<ul>`元素。然后对于它的每个子`<li>`元素，[filter()](http://api.jquery.com/filter/)用于`closest()`检查单击的`<li>`元素是当前列表项的后代，还是该列表项本身。这不包括单击项目的分支，其余部分调用[remove() 。](http://api.jquery.com/remove/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:56:40.697

试试这个：

```
$('.level2 li').click(function(){
   $(this).closest('li').siblings().remove()
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T11:57:22.053

如果我理解正确，这应该可以满足您的需要：

```
$('li.selected').closest('li.toplevel').siblings('li').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:04:46.270

试试这个[演示](http://jsfiddle.net/uttara/tHT42/)

```
$("li").click(function(){
    $(this).parents("li").siblings().remove();
});​ 
```

# c# - 从剪贴板检索复制的文本

> ID：12090853
> 
> 赞同：0
> 
> 时间：2012-08-23T11:48:09.317
> 
> 标签：c#

我正在尝试检索复制到剪贴板的文本，但从未检索到文本。

我正在使用这段代码：

```
if (Clipboard.ContainsText())
{                              
    text = Clipboard.GetText();
} 
```

现在这个条件永远不会返回 true，这意味着剪贴板永远不会包含任何文本，尽管我将几段文本复制到剪贴板。

我也试过这段代码，它是一样的：

```
 IDataObject iData = Clipboard.GetDataObject();

   if (iData != null && iData.GetDataPresent(DataFormats.Text))
   {
         text = (String)iData.GetData(DataFormats.Text);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:52:41.713

您在包含中指定格式，这里是带有 html 数据的示例

使用`ContainsData`和 `GetText`

```
 bool IsHTMLDataOnClipboard = Clipboard.ContainsData(DataFormats.Html);
     string htmlData;
     if(IsHTMLDataOnClipboard)
     {
         htmlData = Clipboard.GetText(TextDataFormat.Html);
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-29T20:40:52.223

或者你可以使用；

```
 static string clipHTML { get; set; } 

    public yourclass()
    {

    clipHTML = Clipboard.GetText(TextDataFormat.Html);

    } 
```

根据您使用的 .NET Framework，您可能会在下面发出警告。

**DataFormats.Html** [规范](http://www.i18nqa.com/debug/utf8-debug.html)声明它以 UTF-8 编码。但是 .NET 4 Framework 及更低版本中存在一个错误，它实际上读取为 UTF-8 和**Windows-1252**。

你得到分配错误的编码，这会导致有趣/坏的字符，例如'Å'，'â€¹'，'Å''，'Å½'，'Å¡'，'Å“'，'Å¾'，' Å¸','Â','Â¡','Â¢','Â£','Â¤','Â¥','Â¦','Â§','Â¨','Â ©'

例如，“€”在 Windows-1252 中被错误地编码为“€”。

在这个专门的网站上的完整解释 [调试图表将 Windows-1252 字符映射到 UTF-8 字节到 Latin-1 字符](http://www.i18nqa.com/debug/utf8-debug.html)

但是通过使用[转换表](http://www.i18nqa.com/debug/utf8-debug.html)，您不会丢失任何 UTF-8 字符。您可以从 DataFormats.Html 获取原始的原始 UTF-8 字符。（注意：Ppm 解决方案默认为 ASCII 并且您会丢失信息）

Soln：创建翻译词典并进行搜索和替换。

# php - 在 cakePHP 中自定义排序数组

> ID：12090854
> 
> 赞同：0
> 
> 时间：2012-08-23T11:48:09.203
> 
> 标签：php, cakephp

不确定这是否是满足我需要的最佳方式，但这是我的问题。在我的编辑功能视图中，我根据其中的内容重新创建表单字段，`$this->data->expense`但我需要数组按特定顺序排列，否则字段会以错误的顺序生成。这是我拥有的数组：

```
'Expense' => array(
    (int) 0 => array(
        'id' => '98',
        'date' => '2012-08-23',
        'sitename' => '123',
        'detail' => 'Breakfast',
        'amount' => '100.00',
        'miles' => null,
        'total' => '100.00',
        'expense_claim_id' => '63',
        'created' => '2012-08-23 09:08:52',
        'modified' => '2012-08-23 09:08:52',
        'ExpenseClaim' => array(
            'id' => '63',
            'user_id' => '3',
            'claim_status_id' => '1',
            'created' => '2012-08-23 09:08:52',
            'modified' => '2012-08-23 10:14:10',
            'approved' => false,
            'approved_by' => '0',
            'date_submitted' => '2012-08-23 09:08:52'
        ),
        'ExpenseCode' => array(
            (int) 0 => array(
                'id' => '1',
                'name' => 'Plane fare',
                'code' => '1',
                'created' => '2012-07-31 09:52:02',
                'modified' => '2012-07-31 09:53:57'
            )
        )
    ), 
```

这就是我需要订购它的方式（`ExpenseCode`）出现在更高的位置：

```
'Expense' => array(
    (int) 0 => array(
        'id' => '98',
        'date' => '2012-08-23',
        'sitename' => '123',
        'detail' => 'Breakfast',
        'ExpenseCode' => array(
            (int) 0 => array(
                'id' => '1',
                'name' => 'Plane fare',
                'code' => '1',
                'created' => '2012-07-31 09:52:02',
                'modified' => '2012-07-31 09:53:57'
            )
        ),
                    'amount' => '100.00',
        'miles' => null,
        'total' => '100.00',
        'expense_claim_id' => '63',
        'created' => '2012-08-23 09:08:52',
        'modified' => '2012-08-23 09:08:52',
        'ExpenseClaim' => array(
            'id' => '63',
            'user_id' => '3',
            'claim_status_id' => '1',
            'created' => '2012-08-23 09:08:52',
            'modified' => '2012-08-23 10:14:10',
            'approved' => false,
            'approved_by' => '0',
            'date_submitted' => '2012-08-23 09:08:52'
        )
    ), 
```

我怎样才能做到这一点，并且在我发布时改变它的结构会影响蛋糕吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:05:00.347

据我所知，CakePHP 没有内置函数来自定义对数组进行排序。我想你将不得不用纯 PHP 来做到这一点。[https://stackoverflow.com/search?q=custom+sort+array+php](https://stackoverflow.com/search?q=custom+sort+array+php)

除非您*必须*动态创建字段，否则我建议您自己添加每个字段。

> 当我发布时，改变它的结构会影响蛋糕吗？

不，如果您只是将字段按不同的顺序排列，这不会影响 CakePHP。通过发送的数据`POST`将在数组中`$this->data['Expense']`。使用 保存数据时`$this->model->save()`，顺序无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:26:04.680

这是没有意义的。 **如果关联数组中数据的顺序导致您的 HTML 字段/表单输入..无论是错误的顺序，您做错了。**

尝试使用键而不是按顺序循环。或阅读有关关联数组的更多信息 - 使用和操作它们的数据有很多有趣/简单的事情......但再次重申，**无需按特定顺序返回数据。**

**编辑：**

您总是可以创建一个键数组并重复这些键。可能是管理订单的一种更清洁的方式。

# html - HTML CSS 页脚

> ID：12090857
> 
> 赞同：0
> 
> 时间：2012-08-23T11:48:15.337
> 
> 标签：html, css, footer

如何将页脚推到页面底部？这是我目前拥有的一个示例：[hansmoolman.com](http://www.hansmoolman.com) 正如您所看到的，页脚被推到我的 2 个左右容器下方。我怎样才能解决这个问题。我对某些元素使用了相对定位，因为必须将红色横幅推到标题栏上并给出 + z-index。我在网上找到了一些将页脚粘贴到底部的解决方案，但这并不能解决我的问题，因为如果其中的内容不足以填满整个页面，页脚仍然会出现在我的 2 列中。

所以我想要的是让页脚始终跟随所有其余内容的下方（粘在底部我可以稍后解决）。

有一点 CSS 代码所以这里没有添加，如果需要可以添加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:51:58.280

**你的 CSS 看起来像：**

```
#footer {
    background-color: #FFFEF0;
    border: 1px solid #000000;
    clear: both;
    height: auto;
    margin-top: -100px; /* >> Remove This*/
    overflow: hidden;
    position: relative;
    top: -200px; /* >> Remove This*/
    width: 100%;
    z-index: -1;
} 
```

删除以下 CSS 规则`#footer`

```
top: -200px; 
margin-top: -100px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:51:37.917

尝试 clear:both 为您的页脚容器标签，考虑到它有 display:block; 放

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:07:38.890

正确对齐内容。你必须在你的CSS中做一些改变。

首先删除：

```
top: -200px;
width: 100%;
z-index: -1; 
```

从你的`#footer`.

并将您的更改`#mainContentContainer`为：

```
#mainContentContainer
{
    min-height: 400px;
    overflow: auto;
    position: relative;
    width: 100%;
} 
```

# transparency - Collada 模型透明度未在three.js 中加载

> ID：12090862
> 
> 赞同：1
> 
> 时间：2012-08-23T11:48:28.643
> 
> 标签：transparency, three.js, collada

我有一个与[这篇文章](https://stackoverflow.com/questions/11540925/the-collada-model-looks-strange-three-js)类似的问题，使用相同的模型，也加载了 Collada 加载器。

车窗在three.js中不显示为透明。你无法看穿它们。

在挖掘了three.js对象数据结构之后，看起来窗口的材质设置了 opacity = 1 和 transparent = false 。

正如上面引用的帖子中所建议的那样，我尝试了三个.js 的发行版和开发版，但没有任何运气。

我还尝试在材质对象（在调试器中）中手动将不透明度设置为 0.3 并将透明设置为 true，然后出现透明度！（虽然有些闪烁）。

知道有什么问题吗？是 Collada 加载程序的问题吗？

更新：在一个更简单的模型上存在同样的问题：

[问题截图](https://lh4.googleusercontent.com/-96O4jsS_v8M/UDtKbjQkKuI/AAAAAAAAA0Y/MzSJ1byyRiA/s600/ColladaProblem.png)

[链接到 SketchUp 模型](http://sketchup.google.com/3dwarehouse/details?mid=9b45fb1aeace9a85aa41fd658ab36e83)

谢谢

马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:05:48.673

我刚试过这个，它对我有用。我从[open3dhub](http://open3dhub.com/view/jterrace/us_police_car.dae/0)获取模型并将其导入[ThreeFab](http://blackjk3.github.com/threefab/)，然后将其导出到[jsfiddle](http://jsfiddle.net/4m5sS/show/) ( [source](http://jsfiddle.net/4m5sS/) )。我仍然看到闪烁（这是一个单独的问题）。这是来自 master 的three.js。

![在此处输入图像描述](../Images/b5eb6be93482718d06c6d00cf9e4764f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:19:32.657

我仍然不知道这是 ColladaLoader 错误、SketchUp 问题还是 Collada 规范的一个奇怪功能，但我找到了一个足够简单的解决方法：

手动编辑 Collada 文件，找到标记并将其值手动设置为 0.3 或任何您想要的值，而不是 1。

不完美但可行。

# c++ - 带有 CWinThread 指针数组的 WaitForMultipleObjects

> ID：12090863
> 
> 赞同：0
> 
> 时间：2012-08-23T11:48:29.377
> 
> 标签：c++, multithreading, winapi, mfc

我有一个通过 生成线程的循环`AfxBeginThread`，它将`CWinThread`指针存储在一个数组中。在每次迭代中，我检查线程不为空​​并将线程的句柄存储在另一个数组中。

```
const unsigned int maxThreads = 2;
CWinThread* threads[maxThreads];
HANDLE* handles[maxThreads];
for(unsigned int threadId=0; threadId < maxThreads; ++threadId)
{
    threads[threadId] = AfxBeginThread(endToEndProc, &threadId,
                                            0,0,CREATE_SUSPENDED);
    if(threads[threadId] == NULL) 
    {
        // die carefully
    }
    threads[threadId]->m_bAutoDelete = FALSE;
    handles[threadId] = &threads[threadId]->m_hThread;
    ::ResumeThread(handles[threadId]);
}

DWORD result = ::WaitForMultipleObjects(maxThreads, handles[0], 
                                            TRUE, 20000*maxThreads); 
```

但`WaitForMultipleObjects`总是返回`WAIT_FAILED`, 并`GetLastError`产生`6`无效句柄。返回的测试`AfxBeginThread`不足以保证线程已成功创建并且句柄将有效，或者句柄在 WaitForMultipleObjects 调用之前变得无效，我认为可以通过设置`m_bAutoDelete`为`FALSE`.

有没有更好的方法在创建多个线程时等待它们`AfxBeginThread`？

请注意，当`maxThreads=1`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:54:46.120

`handles[0]`指向具有一个有效句柄和一些可能跟随它的数据的东西。`maxThreads`相反，建议数组应该一个接一个地有两个句柄。因此错误。

这就是你想要的：

```
HANDLE handles[maxThreads];
//...
handles[threadId] = threads[threadId]->m_hThread;
//...
WaitForMultipleObjects(maxThreads, handles, ... 
```

# c# - 合并两个 XMLDocuments rss

> ID：12090866
> 
> 赞同：0
> 
> 时间：2012-08-23T11:48:38.913
> 
> 标签：c#, xml, xmlnode

我有两个 RSS 提要，我想合并在一起制作一个。我实际上已经设法将两个提要合并在一起并将项目放置在正确的位置 - 但是每个属性中的数据，即标题包含标题+链接+描述+作者+pubDate - 并且对于链接、描述、作者和发布日期重复. 有人可以帮我调试它吗？

```
 Object rssData = new object();
    Cms.UI.CommonUI.ApplicationAPI AppAPI = new Cms.UI.CommonUI.ApplicationAPI();
    rssData = AppAPI.ecmRssSummary(50, true, "DateCreated", 0, "");

    Response.ContentType = "text/xml";
    Response.ContentEncoding = System.Text.Encoding.UTF8; 

    XmlDocument xmlDocument = new XmlDocument();

    xmlDocument.LoadXml(rssData.ToString());

    //************************************************************
    // Obtain 5 data items from second list

    Object rssData1 = new object();
    Cms.UI.CommonUI.ApplicationAPI AppAPI1 = new Cms.UI.CommonUI.ApplicationAPI();
    rssData1 = AppAPI1.ecmRssSummary(60, true, "DateCreated", 5, "");

    XmlDocument xmlDocument1 = new XmlDocument();

    xmlDocument1.LoadXml(rssData1.ToString());

    XmlNodeList nl = xmlDocument1.SelectNodes("/rss/channel");
    XmlNode root = nl[0]; //do I need this line?

    foreach (XmlNode xnode1 in root.ChildNodes)
    {
        string title = xnode1.InnerText;
        string link = xnode1.InnerText;
        string desc = xnode1.InnerText;
        string auth = xnode1.InnerText;
        string pdate = xnode1.InnerText;

        //Merge new nodes

        node = xmlDocument.CreateNode(XmlNodeType.Element, "item", null);
        //node.InnerText = "this is new node";

        //create title node
        XmlNode nodeTitle = xmlDocument.CreateElement("title");
        nodeTitle.InnerText = title;

        //create Link node
        XmlNode nodeLink = xmlDocument.CreateElement("link");
        nodeLink.InnerText = link;

        XmlNode nodeDesc = xmlDocument.CreateElement("description");
        nodeDesc.InnerText = desc;

        XmlNode nodeAuthor = xmlDocument.CreateElement("author");
        nodeAuthor.InnerText = auth;

        XmlNode nodepubDate = xmlDocument.CreateElement("pubDate");
        nodepubDate.InnerText = pdate;

        //add to parent node
        node.AppendChild(nodeTitle);
        node.AppendChild(nodeLink);
        node.AppendChild(nodeDesc);
        node.AppendChild(nodeAuthor);
        node.AppendChild(nodepubDate);

        //add to elements collection
        //xmlDocument.DocumentElement.AppendChild(node);
        xmlDocument.DocumentElement.SelectNodes("/rss/channel")[0].AppendChild(node);
    }

    //********************************************

    xmlDocument.Save(Response.Output); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:33:25.463

正如您正确怀疑的那样，问题出在：

```
string title = xnode1.InnerText;
string link = xnode1.InnerText;
string desc = xnode1.InnerText;
string auth = xnode1.InnerText;
string pdate = xnode1.InnerText; 
```

难怪

> 每个属性中的数据，即标题包含标题+链接+描述+作者+pubDate - 并且对于链接、描述、作者和发布日期重复。

您需要读取每个节点的特定*子元素的值。*大概是这样的：

```
string title = xnode1["title"].InnerText; 
```

等等

请参阅[http://www.csharp-examples.net/xml-nodes-by-name/](http://www.csharp-examples.net/xml-nodes-by-name/)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:00:19.640

康拉德的答案很明确，但如果标题标签中有嵌套标签，它可能不起作用。

比如说，`<title> TEXT <tag1> OTHER_TEXT </tag1></title>` 在我的电脑上，它会返回一个 TEXT 和 OTHER_TEXT 的串联。

这应该有效：

```
string title = xnode1["title"].FirstChild.Value; 
```

无论是否有其他带有标题的标签， FirstChild 都会为您获取*TEXT 。*

# class - 基本matlab类方法

> ID：12090869
> 
> 赞同：4
> 
> 时间：2012-08-23T11:48:52.737
> 
> 标签：class, matlab

> **可能重复：**
> [如何修改 Matlab 对象的属性](https://stackoverflow.com/questions/272618/how-to-modify-properties-of-a-matlab-object)

我正在尝试将我的 C# 代码转换为 Matlab，在 Matlab 中，我决定使用我尚未与 Matlab 一起使用的 OOP，以便能够处理我的 C# 代码的复杂性。

查看[教程](http://www.mathworks.com/help/techdoc/matlab_oop/brdqinq.html#brd2n6b-1)，我想出了以下代码：

```
classdef Cat
    properties
        meowCount = 0; 
    end
    methods 
        function Meow(C)
            disp('meowww'); 
            C.meowCount = C.meowCount + 1;
        end
    end    
end 
```

结果：

```
>> c = Cat();
>> c.Meow();
meowww
>> c

c = 

  Cat

  Properties:
     meowCount: 0

  Methods 
```

所以，`meowCount`不变。问题是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T12:09:00.763

我注意到的几个问题：

*   你没有构造函数
*   你不是从`handle`基类派生的

构造函数不是绝对必要的，但是对于真正想要开始开发更大的类时了解它非常有用。它用于初始化`obj`对象，该对象被传递给每个方法。它与 Python`self`或 C++ 的`this`.

所以，你更正的班级：

```
classdef Cat < handle

    properties
        meowCount = 0; 
    end

    methods 

        function obj = Cat()
            % all initializations, calls to base class, etc. here,
        end

        function Meow(obj)
            disp('meowww'); 
            obj.meowCount = obj.meowCount + 1;
        end
    end    
end 
```

示范：

```
>> C = Cat;
>> C.Meow; 
meowww
>> C.meowCount
1 
```

# mysql - 如何从存储过程访问另一个mysql服务器？

> ID：12090873
> 
> 赞同：0
> 
> 时间：2012-08-23T11:48:58.697
> 
> 标签：mysql

> **可能重复：**
> [我可以从存储过程访问远程 mysql 服务器/数据库吗？](https://stackoverflow.com/questions/4323225/can-i-access-a-remote-mysql-server-db-from-a-stored-procedure)

是否可以从存储过程访问另一个 mysql 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:34:22.150

您可以尝试创建一个[UDF](http://dev.mysql.com/doc/refman/5.5/en/create-function-udf.html)，它是用户定义的函数。你只应该创建这个函数并将其安装到 MySQL 中。这可能有点困难，但你可以尝试一下。

访问表的一种简单方法是使用联合引擎（正如 Rena Sun 建议的那样），这里得到了回答 - [MySQL — Joins Between Databases On different Servers Using Python?](https://stackoverflow.com/questions/5832787/mysql-joins-between-databases-on-different-servers-using-python/5832973#5832973) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:16:04.590

在 MySQL 中，通过单个连接从不同服务器访问表是联合表： [http](http://dev.mysql.com/doc/refman/5.0/en/federated-use.html) ://dev.mysql.com/doc/refman/5.0/en/federated-use.html 一旦这样做，它就像访问本地表一样.

# .net - 设计器中的属性更改未在 deisgner 文件中更新 - Windows 窗体

> ID：12090876
> 
> 赞同：2
> 
> 时间：2012-08-23T11:49:03.127
> 
> 标签：.net, winforms, properties, designer

我正在定义一个派生自 Windows 窗体中的 TextBox 类的用户控件。用户控件定义了一个属性 IsMandatory。如果此属性设置为 true，我将调用一个对用户控件外观做某事的函数。

当我在设计时在我的表单上使用这个控件时，我可以设置这个属性。但是设计器文件似乎没有改变。它没有设置此值的代码。

IsMandatory 是一个布尔属性。我在设计器中将其设置为 true 或 false，设计器文件中没有相应的代码。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:13:08.413

尝试这个：

```
public partial class MyTextBox : TextBox
{
    public MyTextBox()
    {
        InitializeComponent();
    }

    [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
    public bool IsMandatory { get; set; }

} 
```

DesignerSerializationVisiblity 设置会将布尔值存储在 .designer 文件中。

也就是说，我相信没有必要指定“可见”，因为这是默认设置。您是否将其设置为“隐藏”？

# entity-framework - 具有关联的 ComplexType

> ID：12090877
> 
> 赞同：3
> 
> 时间：2012-08-23T11:49:04.313
> 
> 标签：entity-framework

MSDN 上的文档对这个主题很清楚：“ComplexTypes cannot contain Associations”

在阅读复杂类型时，最常用的例子是 Address ComplexType：

```
class Person
{
    public Address Address { get; set; }
}
class Address
{
    public string Street { get; set; }
    public string Zip { get; set; }
    public string CountryId { get; set; }
} 
```

我想将国家定义为一个协会：

```
class Address
{
    //other properties ....
    public Country Country { get; set; } //vs: string CountryId { get; set; }
} 
```

如您所见，我想在 Address ComplexType 中添加与 Country 的关联。不幸的是，这是不可能的。这使得完整的示例毫无意义，因为我必须在 Person 类型本身上定义 Country 关联，这将使整个 Address-CT 无用。

我们目前正在使用 NHibernate 建立一个项目，因为 EF 缺少我们项目所需的一些功能，但很可能会在 EF 6 中得到支持。考虑到 EF 的快速发展和最近宣布的开源模型，我们希望保持从 NH 到 EF 的可能迁移为未来开放。在 NHibernate ComplexTypes（“组件”）中确实支持关联，因此如果我们现在将它们与 NH 一起使用，那么迁移到 EF 就不容易了。

我想知道这是否只是当前的限制？

*   未来是否有计划支持这样的功能？
*   是否有不支持此功能的明确原因，或者只是“未实现 atm”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:44:01.353

如评论中所述，有可能的计划。

关于第二个问题，我会说“就在此时”。

如果开发人员有明确的理由，我认为不具有此功能是不合理的。是的，应该明智地使用它，但不应该使用任何 API 吗？

并非每个实体都直接与另一个实体相关联，因此限制这一点是没有意义的。如果我有一个`Address`必须引用实体的，为什么这与引用实体的单个属性有什么不同？

在这种情况下，复杂类型与简单类型没有什么不同。在某些情况下，也许可以将复杂类型标识为“可重用”。但似乎在 DDD“规则”下，复杂类型不能引用实体并没有真正的理由。

# google-app-engine - 实时计算密集型任务的云平台？

> ID：12090880
> 
> 赞同：0
> 
> 时间：2012-08-23T11:49:10.100
> 
> 标签：google-app-engine, amazon-ec2, amazon-web-services, cloud

我正在为以下场景寻找云计算解决方案，但我在 Amazon AWS 等中找不到任何符合我的问题描述的服务。你知道我的问题有什么云计算平台吗？

*一般问题：* 我想对数据流进行一些数据分析（每秒只有大约 1k）。数据分析由一组在该数据流上运行的独立线程执行。每个线程只计算一个布尔值。我拥有的线程越多，计算结果就越好。

*我目前的解决方案：* 我从另一个部门购买了一个装有 Intel Core i7 的盒子，但现在他们想要它回来:-)。

*理想的解决方案：* 一些服务为我提供了一个抽象机器（如具有无限资源的 JVM），我可以在其上生成大量线程。还需要某种连接来流式传输输入数据并取回计算结果（< 1k 每秒）。事情应该实时发生（而不是像“在接下来的几分钟内”那样安排执行）。

所以瓶颈*不是*内存或磁盘空间，而只是计算能力和延迟。（而且由于我时不时需要数据分析，所以云计算在这里似乎在经济上是合理的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:54:13.987

有趣的是，我刚刚写了一篇关于[让 Hadoop 运行得更快](http://natishalom.typepad.com/nati_shaloms_blog/2012/08/making-hadoop-run-faster.html)的文章，其中我指出流基础处理尽可能地加快输入的处理时间，而不是批量处理它们。该解决方案使用名为 Cloudify 的开源项目。

[Cloudify](http://www.cloudifysource.org)允许我通过单个命令在 Amazon 或任何其他云上生成整个环境，并随着负载的增长自动扩展处理。

[此处](http://wiki.gigaspaces.com/wiki/display/XAP9/Your+First+Real+Time+Big+Data+Analytics+Application)提供了带有源代码和分步指南的演示环境

在我看来，这可能会满足您的需求 - 如果不是这种情况，请告诉我，我会进一步深入研究，看看我是否可以提出其他解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T00:27:14.273

对于主要供应商的完整性，您有几类选择：

1.  **可扩展的云计算**，来自 AWS 它是 EC2；来自 Google，它是 Google Compute Engine（仍处于私人测试阶段）；来自微软的 Azure 虚拟机（也仍处于私人测试阶段）。当然，还有许多其他供应商，例如 Rackspace（使用 OpenStack 等）。*鉴于您的情况，我相信此类别中的某些内容将是您的最佳选择*。

2.  **基于云的 MapReduce（在 Hadoop 上运行）** ——来自 AWS，即 Elastic MapReduce；来自 Google 的 BigQuery；来自 Microsoft 的 Azure 上的 Hadoop（仍处于测试阶段）。在这个领域还有其他供应商...... Cloudera、HortonWorks 等......[这里](http://cloudcomputing.sys-con.com/node/2237238)有一个列表。

3.  **基于云的数据库**（RDBMS 或 NoSQL）——这里有很多选择。因为您将您的场景描述为“计算密集型”，所以我认为这可能不需要。但是，根据上行/下行流量的数量和频率，如果您的场景允许批处理，那么您可以选择上传、处理和存储在云中，然后通过时间表下拉。在 AWS 中，托管 RDBMS 的方法有很多——通常选择 RDS 或 EC2；对于 Google，您可以通过 Google Cloud SQL 访问 MySQL；对于 Microsoft，您的选择是 Azure VM 上的 SQL Azure 或 SQL Server（后者仍处于测试阶段）。对于云托管的 NoSQL，您拥有 AWS DynamoDB；从谷歌你有谷歌云存储或高复制存储（后者要求你使用 GAE）；从 Microsoft 获得 Azure 存储（表、blob 和队列）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T14:36:03.330

我注意到您标记了 google-app-engine。可能不是您想要的，它更多的是用于 Web 服务。不过，Google 相对较新的 Compute Engine 与您的描述相符。

[http://cloud.google.com/products/compute-engine.html](http://cloud.google.com/products/compute-engine.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:25:11.627

对于您的情况，我强烈推荐 Amazon Elastic MapReduce。您可以参考此文档了解详细信息：- [Amazon EMR](http://aws.amazon.com/elasticmapreduce/)

如果您是 AWS 的新手，最初可能会有些困难，但一旦您知道它是如何工作的，那就太好了。

# java - 将java项目转换为jar文件时遇到问题

> ID：12090882
> 
> 赞同：1
> 
> 时间：2012-08-23T11:49:19.150
> 
> 标签：java, jar, manifest

我制作了一个项目，其中包含一些 java 文件、一个包含一些图像的图像文件夹和一个包含一些文本文件的数据文件夹。当我编译程序并通过终端运行它时，一切正常。我决定尝试将其转换为 jar 文件，因此经过大量研究后，我设法做到了，包括使用清单文件。这是我在终端中输入的内容：

```
jar cvfm Program.jar manifest.txt *.class images data 
```

给出这个输出：

```
added manifest  
adding: a.class (in = 500) (out = 500) (deflated 50%)  
adding: b.class (in = 500) (out = 500) (deflated 50%)  
adding: images/ (in = 0) (out = 0) (stored 0%)  
adding: images/a.png (in = 500) (out = 500) (deflated 50%)  
adding: images/b.png (in = 500) (out = 500) (deflated 50%)  
adding: data/ (in = 0) (out = 0) (stored 0%)  
adding: data/a.txt (in = 500) (out = 500) (deflated 50%) 
```

唯一突出的行是图像/和数据/，它们的输入、输出、存储=0。

这有效，它在 jar 文件中正确列出了所有文件。jar 文件在程序的正确目录中甚至可以完美运行，但是如果我从该目录中删除它，它就再也找不到任何资源文件（图像和数据），我不知道为什么。这可能是我在代码中引用它们的一种方式，或者资源文件没有正确附加，但我不太确定。我的清单文件包括：

```
Manifest-Version: 1.0  
Main-Class: Strike 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:56:14.810

如果您的资源文件（图像等...）存储在 jar 文件中，您应该使用

```
inputstream = getClass()
              .getClassLoader()
              .getResourceAsStream("Path to your file in the jar file"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T12:00:22.950

你有一个类路径问题。当您在项目目录中启动 JAR 时，实际上您是从文件系统而不是存档中读取资源。

要从类路径中读取资源，请使用[`Class.getResourceAsStream(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)

```
InputStream in = getClass().getResourceAsStream("/images/foo.png"); 
```

并像你已经做的那样放在最终存档`foo.png`的目录中。`images`注意 中的前导斜杠`/images/foo.png`。引用文档

> 使用以下算法从给定的资源名称构造绝对资源名称：
> 
> 1.  如果名称以“/”开头（“\u002f”），则资源的绝对名称是名称中“/”后面的部分。
>     
>     
> 2.  否则，绝对名称采用以下形式：`modified_package_name/name` 其中`modified_package_name`是此对象的包名，用 '/' 代替 '.' ('\u002e')。

如果您不想使用 IDE 来构建项目，可以使用[Ant](http://ant.apache.org/)和[Maven](http://maven.apache.org/)等工具。

# javascript - 对 JavaScript 使用 type="text/plain"？

> ID：12090883
> 
> 赞同：11
> 
> 时间：2012-08-23T11:49:24.577
> 
> 标签：javascript, html

我正在考虑设置[它](http://silktide.com/cookieconsent/code)，只是出于好奇，但是当他们说要让它工作时我有点困惑，你需要：

*查找设置 Analytics cookie 的任何 Javascript 元素。示例可能包括 Google Analytics 和 StatCounter。 **修改脚本标签，使类型属性为“text/plain”而不是“text/javascript”***

这会导致某些网络浏览器出现任何问题吗？它会导致 HTML 不再有效吗？

此外，“类型”属性是否真的再有用了？我以前只见过它分配“文本/JavaScript”吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T12:10:36.593

如果意图是浏览器不将元素的内容解释为脚本代码，而只是作为未呈现的文本数据，则不会导致问题。脚本可以使用它，否则它会被忽略。好吧，在某些浏览器中，可能使用 CSS 使内容可见，但默认情况下不显示。

使用`<script type="text/plain">`对 HTML 规范有效。Even`<script type="Hello world ☺&quot;>`是有效的，尽管它违反了属性值是 MIME 类型的散文要求。规范没有具体说明它的含义，但唯一可行的解​​释以及浏览器在实践中所做的是，它不是任何脚本语言，也没有尝试作为脚本执行。

So`type="text/plain"`可用于故意阻止脚本的执行，同时仍将其保留在源代码中。它也可用于承载用于某些处理的大量字符数据。

该`type`属性可以用于这样的目的，它还可以用于指定 JavaScript 以外的脚本语言（很少使用，但在某些环境中仍然可以使用）。`type`不需要，也不推荐使用该属性来指定 JavaScript：您唯一可能实现的是错误：如果您输入错误，例如`type="text/javascirpt"`，内容将被视为使用未知语言，因此被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:06:00.123

> 这会导致某些网络浏览器出现任何问题吗？

不

> 它会导致 HTML 不再有效吗？

不

> 此外，“类型”属性是否真的服务于目的？

浏览器使用它来决定运行代码的解释器（或者他们是否应该下载外部`src`编辑的代码）。

将其`text/plain`设置为浏览器没有解释器的类型（因为它不是编程语言），这就是重点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T11:53:23.570

`"application/javascript"`根据最新的 w3 规范，它必须是这样。但正如预期的那样，大多数旧版本的 IE 都不支持这一点。所以在`"text/javascript"`任何地方都可以安全使用。

# r - 过滤单列数据帧

> ID：12090896
> 
> 赞同：8
> 
> 时间：2012-08-23T11:50:00.657
> 
> 标签：r, dataframe

我正在尝试过滤只有一列的数据框。这导致返回一个向量，如下所示：

```
single.c <- data.frame(col1=c(1,2,3,4,5), row.names=C("r1","r2","r3","r4","r5"))
single.c[single.c$col1 > 2,]

[1] 3 4 5 
```

我真正想要的是返回的数据就像多列数据帧一样：

```
multi.c <- data.frame(col1=c(1,2,3,4,5), col2=c(1,2,3,4,5), row.names=c("r1","r2","r3","r4","r5"))
multi.c[multi.c$col2 > 2,]

   col1 col2
r3    3    3
r4    4    4
r5    5    5 
```

如果没有其他列，我可以看到返回向量是有意义的，但通常我也想看看哪些行也给出了该结果。为什么会发生这种情况，是否有一种简单的方法可以将数据框形状保留在结果中，包括行名？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T11:56:46.097

使用`drop`选择函数的参数：

```
single.c[single.c$col1 > 2, ,drop=F]

#   col1
#r3    3
#r4    4
#r5    5 
```

来自文档`[`：

> 降低
> 
> 对于矩阵和数组。如果为 TRUE，则将结果强制转换为可能的最低维度（参见示例）。这仅适用于提取元素，不适用于替换。有关详细信息，请参阅下降。

# android - 使列表可点击

> ID：12090897
> 
> 赞同：0
> 
> 时间：2012-08-23T11:50:03.133
> 
> 标签：android, list

我有以下代码：

```
 ArrayList NumList = getIntent().getParcelableArrayListExtra ("number");

   ArrayList MailList = getIntent().getParcelableArrayListExtra ("email");

    // This array list will be updated each time.

    mAdapter = new MyCustomAdapter();
    mAdapter.addItem(Name);

    if (!NumList.isEmpty()) {
        mAdapter.addSeparatorItem("Phone");
        mAdapter.addAll(NumList);
    }

    if (!MailList.isEmpty()) {
        mAdapter.addSeparatorItem("Email");
        mAdapter.addAll(MailList);
    }

    setListAdapter(mAdapter);
} 
```

我希望能够单击号码列表并拨打所选号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:05:05.883

这篇文章可能会对您有所帮助：[如何在 Android 中处理 ListView 点击](https://stackoverflow.com/questions/2468100/android-listview-click-howto)

您必须实例化一个 OnClickListener 并将其注册到您的 ListView。为此，请使用 ListView 类的 setOnItemClickListener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:07:13.720

我猜您正在使用 ListActivity 或 ListFragment，因此请在 onListItemClick 中实现您的调用逻辑，或者在自定义适配器中创建每个视图时在每个视图上放置一个 onClickListener，如下所示：

```
view.setOnClickListener (new OnClickListener() {
  public boolean onClick( View view) {
    //do your stuff here
  }
}); 
```

拨打电话的逻辑如下所示：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:0123456789"));
startActivity(callIntent); 
```

**编辑：**

请记住将此 CALL_PHONE 权限添加到您的清单中：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

# android - Android WebView JellyBean -> 不应该发生：找不到基于矩形的测试节点

> ID：12090899
> 
> 赞同：47
> 
> 时间：2012-08-23T11:50:09.060
> 
> 标签：android, webview, android-webview, android-4.2-jelly-bean

我的应用程序正在使用许多 webviews，这些 webviews 位于 ViewPager 持有的片段中。

每当我在带有 Jellybean 的 Galaxy Nexus 上滑动应用程序时，我都会一次又一次地收到以下控制台消息：

```
08-23 13:44:03.374: E/webcoreglue(21690): Should not happen: no rect-based-test nodes found 
```

谁能向我解释这里出了什么问题，以便我能够解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-19T01:38:28.293

出现此问题是因为在某些情况下 WebView 无法注意到其可见矩形已更改，因此就 webkit 而言，页面仍然不可见。因此，所有触摸都落在窗口之外，并被拒绝。

最干净的解决方法是当您知道 WebView 的可见性已更改（例如响应来自 viewpager 的 setPrimaryItem 回调）时，调用`webview.onScrollChanged(webview.getScrollX(), webview.getScrollY());`

您需要将 webview 子类化以将受保护的 onScrollChanged 提升为公共方法。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-01T08:15:03.263

我有这个确切的问题。问题正是 Rahul Dole 在上面的回答中所说的。

我花了几天时间尝试了很多不同的事情。我注意到当方向改变时，可见的 WebView onLongClick 再次工作......所以我想出了这个小宝石。确实它非常hacky，但它有效！

**在扩展 WebView 的类中使用它：**

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN){

        int temp_ScrollY = getScrollY();
        scrollTo(getScrollX(), getScrollY() + 1);
        scrollTo(getScrollX(), temp_ScrollY);

    }

    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-07T11:51:24.160

我遇到了完全相同的问题。在我的应用程序中，无论我在 jquery bind() 中使用 'touchend' 编码的点击事件，都会出现这个错误，并且它过去从不响应点击（点击）......并给人一种冻结的感觉。所以我只是尝试在bind（）中用'click'替换'touchend'，它成功了！响应点击（点击），也没有显示 webcoreglue 的日志条目..

我还在Android的webview代码中找到了这段代码..

```
HTMLElement* WebViewCore::retrieveElement(int x, int y,
    const QualifiedName& tagName)
{
    HitTestResult hitTestResult = m_mainFrame->eventHandler()
        ->hitTestResultAtPoint(IntPoint(x, y), false, false,
        DontHitTestScrollbars, HitTestRequest::Active | HitTestRequest::ReadOnly,
        IntSize(1, 1));
    if (!hitTestResult.innerNode() || !hitTestResult.innerNode()->inDocument()) {
        LOGE("Should not happen: no in document Node found");
        return 0;
    }
    const ListHashSet<RefPtr<Node> >& list = hitTestResult.rectBasedTestResult();
    if (list.isEmpty()) {
        LOGE("Should not happen: no rect-based-test nodes found");
        return 0;
    }
    Node* node = hitTestResult.innerNode();
    Node* element = node;
    while (element && (!element->isElementNode()
        || !element->hasTagName(tagName))) {
        element = element->parentNode();
    }
    DBG_NAV_LOGD("node=%p element=%p x=%d y=%d nodeName=%s tagName=%s", node,
        element, x, y, node->nodeName().utf8().data(),
        element ? ((Element*) element)->tagName().utf8().data() : "<none>");
    return static_cast<WebCore::HTMLElement*>(element);
}​ 
```

还有这个。。

```
// get the highlight rectangles for the touch point (x, y) with the slop
Vector<IntRect> WebViewCore::getTouchHighlightRects(int x, int y, int slop)
{
    Vector<IntRect> rects;
    m_mousePos = IntPoint(x - m_scrollOffsetX, y - m_scrollOffsetY);
    HitTestResult hitTestResult = m_mainFrame->eventHandler()->hitTestResultAtPoint(IntPoint(x, y),
            false, false, DontHitTestScrollbars, HitTestRequest::Active | HitTestRequest::ReadOnly, IntSize(slop, slop));
    if (!hitTestResult.innerNode() || !hitTestResult.innerNode()->inDocument()) {
        LOGE("Should not happen: no in document Node found");
        return rects;
    }
    const ListHashSet<RefPtr<Node> >& list = hitTestResult.rectBasedTestResult();
    if (list.isEmpty()) {
        LOGE("Should not happen: no rect-based-test nodes found");
        return rects;
    }
//Rest of the part is omitted here... 
```

注意到那里的日志消息了吗？我猜这段代码是用来识别在点击、点击或滑动时生成的 x 和 y 轴向量。.. ​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T22:32:29.253

JellyBean 和 ViewPager + 包含 WebViews 的片段有同样的问题。在 Android 2.2 上运行相同的代码一切正常，所以我认为这是 JB WebView 实现中的一个错误。

在 JB 上，只有第一个显示的带有 WebView 的片段可以正常工作，日志中没有错误“不应发生..”，并且 getHitTestResult() 调用返回正确的值。滑动到下一页，我在日志中有错误，getHitTestResult() 只返回零和空值。

现在我发现只有一种解决方案可以使用空容器创建片段并创建 WebView，设置它们并仅在当前片段在 ViewPager 中变为活动状态时加载数据。在这种情况下，WebView 根据需要工作。但是，不幸的是，这完全打破了在 ViewPager 中平滑滑动页面的想法。

有了最后一个想法，明天会尝试将ViewPager的fragment替换为复合视图。机会很小，但我会告诉你结果是否会成功。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-25T00:10:24.087

不知道它为什么起作用。我在 MainActivity.java 中添加了 onTouchEvent 监听器来解决这个问题。

```
public class MainActivity extends ActionBarActivity implements ActionBar.TabListener {
        public class MyWebView extends WebView {

          public MyWebView(Context context) {
            super(context);
      }

      public MyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
      }

      @Override
      public boolean onTouchEvent(MotionEvent event) {
        onScrollChanged(getScrollX(), getScrollY(), getScrollX(), getScrollY());
        return super.onTouchEvent(event);
      }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-03T00:20:21.323

当我在 Cordova + Sencha Touch 环境中工作时，它也发生在我身上。因为 `CordovaActivity`没有类似的`onScrollChanged()`方法，所以我无法应用上述任何解决方案。

经过数小时的头撞墙后，我发现在完全渲染之前已经调用了 Web 界面的某些部分。在我的情况下，这些方法是由`activate`事件触发的`Ext.PanelView`。我用那个事件代替了那个事件，`painted`从那以后一切都像一个魅力。

虽然它不是复制粘贴解决方案，但我希望它可以帮助某人节省调查时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-13T15:56:52.240

**另一种解决方案：**

你不需要扩展 WebView 类来解决这个问题。我通过在加载 Web 视图内容后添加以下两行来解决这个问题（myWebView.loadUrl（“...”）：

```
wv.loadUrl("your url here");

//Add the following two lines
myWebView.scrollTo(myWebView.getScrollX(), myWebView.getScrollY()+1);
myWebView.scrollTo(myWebView.getScrollX(), myWebView.getScrollY()-1); 
```

希望这会有所帮助（我测试了自己并且它有效）。

干杯

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-12-02T12:07:04.187

甚至我在 ViewPager 中有 WebView，并`onTouchEvent()`通过扩展 webview 类来解决这个问题。

这是我的代码：

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {       
            requestFocusFromTouch();
        }
        return super.onTouchEvent(event);
    } 
```

干杯！！！

# excel - 选择双击事件的范围？

> ID：12090901
> 
> 赞同：0
> 
> 时间：2012-08-23T11:50:16.303
> 
> 标签：excel, vba

我该如何做到这一点，在*BeforeDoubleClick*事件下，如果用户双击一个单元格，它将选择第 11 行到第 57 行的单元格。

如果可能，我可以将其设置为仅在“L”到“S”的列范围内工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:24:41.677

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)

'change Range to suit your needs
If Intersect(Target, Range("A1")) Then Range("L11:S57").Select

End Sub 
```

如果您想要整行类型`Rows("11:57").Select`对于整列，请键入`Columns("L:S").Select`

# html - Div 不按内容扩展

> ID：12090904
> 
> 赞同：0
> 
> 时间：2012-08-23T11:50:49.873
> 
> 标签：html, css, height

我的包装器 div 的高度没有通过它的内容扩展。另一方面，它通过页面上的标题 div 和导航 div 进行扩展，但不是通过位于另一个 div 内的侧边栏进行扩展。这是HTML：

```
<div id="wrapper">
    <div id="header">
    </div>
    <div id="nav">
        nav content goes here
    </div>
    <div id="pagecontent">
    <div id="sidebar">
        some sidebar stuff like login form
    </div>
    </div>
</div> 
```

和 CSS（只有必要的 CSS，不像 webkit 盒子阴影）：

```
#wrapper {
    width: 900px;
    margin: 0 auto;
    padding-bottom: 80px;
}
#header {
    height: 160px;
    width: 100%;
}
#nav {
    width: 100%;
    height: 40px;
}
#sidebar {
    float: right;
    width: 140px;
    height: 100%;
}
#pagecontent {
    width: 900px;
} 
```

高度为 100% 的侧边栏位于包装 div 之外，您可以在[http://craftersinn.net上查看](http://craftersinn.net)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:00:54.167

您错过了`overflow:hidden`在css 中添加 css 规则`#wrapper`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:04:33.010

添加`overflow: hidden;`到包装的 CSS 中，还要确保您的选择器实际上是在选择元素：

```
<div id="pagecontent">// remove page
#content { 
```

[http://jsfiddle.net/Kyle_Sevenoaks/bPT49/](http://jsfiddle.net/Kyle_Sevenoaks/bPT49/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:05:36.767

`<div style="clear: both;"></div>`之后添加

```
<div id="sidebar">
        some sidebar stuff like login form
    </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:05:47.530

您应该阅读[这篇](http://css-tricks.com/all-about-floats/)关于浮动的文章，尤其是“清除浮动”部分。

简而言之，您可以使用`clear: both`,`overflow: hidden`或 clearfix 方法。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T12:28:35.353

这里讨论了同样的问题。检查清除浮动解决方案和有关溢出的解释：隐藏；

[css 框模型不使用填充进行拉伸](https://stackoverflow.com/questions/12089144/css-box-model-does-not-stretch-using-padding/12089237#12089237)

# machine-learning - 如何计算拉格朗日乘数以使用 QP 训练 SVM

> ID：12090908
> 
> 赞同：1
> 
> 时间：2012-08-23T11:51:03.303
> 
> 标签：machine-learning, svm

      我正在实现二次问题来训练 SVM。我能理解**QP**。但我不明白什么是拉格朗日乘数。谁能告诉我什么是拉格朗日乘数以及如何从训练示例中计算拉格朗日乘数。在此先感谢。二次问题如下：

![在此处输入图像描述](../Images/b7ff1805451ed250f5ae53a67eb17097.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:30:08.557

[从Lecture9.pdf](http://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/DownloadMaterial/Lectures/Lecture9.pdf)的第 43 页开始对该主题进行了很好的解释，您的二次问题从第 50 页开始解决，并在同一个讲义中向前推进。我不认为我能比这个讲座更好地解释它。

[讲义](http://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/Schedule.php)中还有一些关于 SVM 的附加信息

# iphone - 如何在 UIView 需要时间加载时通知用户？

> ID：12090909
> 
> 赞同：0
> 
> 时间：2012-08-23T11:51:04.600
> 
> 标签：iphone, objective-c

在我的应用程序中，用户可以在登录后将医院信息插入数据库。就我而言，用户可以输入数据的视图可能需要一些时间才能加载。这不是问题，但我想通知用户正在加载某些内容（如 phpmyadmin 中的“正在加载”消息），这样他就不会对此感到困惑。如果有人知道，请通知我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:54:18.030

有多种选项可以显示加载指示器

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

[https://github.com/y0n3l/LGViewHUD](https://github.com/y0n3l/LGViewHUD)

[如何在 iPhone 上使用活动指示器视图？](https://stackoverflow.com/questions/593234/how-to-use-activity-indicator-view-on-iphone)

[如何在顶部状态栏中显示加载指示器](https://stackoverflow.com/questions/166712/how-to-show-the-loading-indicator-in-the-top-status-bar)

[http://cocoawithlove.com/2009/04/showing-message-over-iphone-keyboard.html](http://cocoawithlove.com/2009/04/showing-message-over-iphone-keyboard.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:55:34.710

您应该通过让视图立即显示“正在加载”消息（在子视图中）来避免过长的加载时间。然后`viewDidAppear`，例如，开始加载显示真实视图所需的其余部分。布置最终视图，准备就绪后，删除“正在加载”消息子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:03:13.790

使用活动指示器作为加载运行，一旦完成隐藏该活动指示器。请参阅此[链接](https://stackoverflow.com/questions/6010237/creating-a-custom-uiactivityindicatorview)。

# c# - 我想一一阅读的表 C# 中的表

> ID：12090912
> 
> 赞同：1
> 
> 时间：2012-08-23T11:51:15.037
> 
> 标签：c#

我想阅读 HTML 网页的内容。我正在尝试一一阅读所有表格内容...

这是我遇到问题的一部分

```
foreach (HtmlElement hrel in webBrowser1.Document.GetElementsByTagName("table"))
{
    HtmlElementCollection coll2 = hrel.GetElementsByTagName("tr");

    if (coll2.Count > 3)
    {
        MessageBox.Show(coll2[0].InnerText);
        MessageBox.Show(coll2[1].InnerText);
        MessageBox.Show(coll2[2].InnerText);
        MessageBox.Show(coll2[3].InnerText);
        MessageBox.Show(coll2[4].InnerText);
        MessageBox.Show(coll2[5].InnerText);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:01:33.603

您可以使用

```
webBrowser1.Document.All["table"] 
```

# speech-recognition - 在 sphinx4 语音识别的字典文件中使用新词时出错

> ID：12090913
> 
> 赞同：-1
> 
> 时间：2012-08-23T11:51:15.380
> 
> 标签：speech-recognition, cmusphinx, acoustics

我曾尝试从所有 sphinx4 论坛和 source.after 实现 sphinx4 语音识别

```
lots of difficulty i had succesfulll run the sphinx4 speech rocgnition in java in eclipse.but 

now i want that instead of the by default grammer provided in sphinx eg.[  (Hello|good Morning) 

(Bhiksha | Paul | Evandro | Reeta | will)  ]i want that i can add some words in this grammer 

file and that word Should be Like eg."Bhavik" Or somethng else.

I Had Done Following Steps For This Thing To achieve.

1). i had unzip the WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.rar file
2). then i added "Bhavik" Word Sphinx\sphinx4-1.0beta6-bin\sphinx4-1.0beta6\lib   
\WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz\WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz\dict    
\cmudict.0.6d File with its Pronouciation word
    e.g "BHAVIk  B HH AE V AH K"
3). then I had zip abck that rar file With same name and same extention.
4). and then  I had removed old WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.jar file path from the java file and add refrence of that new genrated rar file.

But Now Problem is that its Throwing me Error whenevr i tried to run that HelloWorld.java File
 with this Error in console 
```

/*
线程“main”中的异常属性异常组件：'dictionary' property:'dictionaryPath'

```
- Can't locate resource:/WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz/dict/cmudict.0.6d
edu.cmu.sphinx.util.props.InternalConfigurationException: Can't locate 

resource:/WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz/dict/cmudict.0.6d
    at edu.cmu.sphinx.util.props.ConfigurationManagerUtils.getResource

(ConfigurationManagerUtils.java:483)
    at edu.cmu.sphinx.linguist.dictionary.FastDictionary.newProperties

(FastDictionary.java:148)
    at edu.cmu.sphinx.util.props.PropertySheet.getOwner(PropertySheet.java:505)
    at edu.cmu.sphinx.util.props.PropertySheet.getComponent(PropertySheet.java:287)
    at edu.cmu.sphinx.linguist.language.grammar.Grammar.newProperties(Grammar.java:105)
    at edu.cmu.sphinx.jsgf.JSGFGrammar.newProperties(JSGFGrammar.java:231)
    at edu.cmu.sphinx.util.props.PropertySheet.getOwner(PropertySheet.java:505)
    at edu.cmu.sphinx.util.props.PropertySheet.getComponent(PropertySheet.java:287)
    at edu.cmu.sphinx.linguist.flat.FlatLinguist.newProperties(FlatLinguist.java:246)
    at edu.cmu.sphinx.util.props.PropertySheet.getOwner(PropertySheet.java:505)
    at edu.cmu.sphinx.util.props.PropertySheet.getComponent(PropertySheet.java:287)
    at edu.cmu.sphinx.decoder.search.SimpleBreadthFirstSearchManager.newProperties

(SimpleBreadthFirstSearchManager.java:182)
    at edu.cmu.sphinx.util.props.PropertySheet.getOwner(PropertySheet.java:505)
    at edu.cmu.sphinx.util.props.PropertySheet.getComponent(PropertySheet.java:287)
    at edu.cmu.sphinx.decoder.AbstractDecoder.newProperties(AbstractDecoder.java:65)
    at edu.cmu.sphinx.decoder.Decoder.newProperties(Decoder.java:37)
    at edu.cmu.sphinx.util.props.PropertySheet.getOwner(PropertySheet.java:505)
    at edu.cmu.sphinx.util.props.PropertySheet.getComponent(PropertySheet.java:287)
    at edu.cmu.sphinx.recognizer.Recognizer.newProperties(Recognizer.java:90)
    at edu.cmu.sphinx.util.props.PropertySheet.getOwner(PropertySheet.java:505)
    at edu.cmu.sphinx.util.props.ConfigurationManager.lookup(ConfigurationManager.java:161)
    at edu.cmu.sphinx.demo.helloworld.HelloWorld.main(HelloWorld.java:37) 
```

*/ 请任何人都可以建议我如何解决这个问题

```
My basic need is To Allow The User Defined Words in Dictionary File Not the Default Words Of 
Sphinx provide..

Anyone Can suggest me in right way...that where i m Wrong and if m right then how to resolve 

this error.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:43:18.240

正确的方法是对源文件 i 进行修改，然后使用 ant 编译二进制文件并照常运行。

解压缩 jar 文件是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:26:02.347

我已经成功完成了..使用上面的代码..就在创建 jar 时..`meta-INF folder`如果在您提取 jar 文件时创建了它，请确保您从文件夹中删除..所以当再次压缩时您需要删除那个meta-inf文件夹，然后用`jar -cf .jar_file_name folder_name`命令提示符把它压缩回去，你会成功的……谢谢你的回答……但我终于做到了

# ruby - 使用 'file' chef-solo 资源更新文件

> ID：12090914
> 
> 赞同：4
> 
> 时间：2012-08-23T11:51:15.350
> 
> 标签：ruby, chef-infra

我正在尝试使用`chef-solo`. 问题是在文件中设置`JAVA_HOME`和`PATH`变量。`/etc/profile`我尝试使用`'file'`厨师提供的资源。这是我的一些代码：

```
java_home = "export JAVA_HOME=/usr/lib/java/jdk1.7.0_05"
path = "export PATH=$PATH:/usr/lib/java/jdk1.7.0_05/bin"

execute "make_dir" do
  cwd "/usr/lib/"
  user "root"
  command "mkdir java"
end

execute "copy" do
  cwd "/usr/lib/java"
  user "root"
  command "cp -r /home/user/Downloads/jdk1* /usr/lib/java"
end

file "/etc/profile" do
  owner "root"
  group "root"
  action :touch
  content JAVA_HOME
  content PATH
end 
```

但问题是`content`命令覆盖了文件的所有内容，有没有办法在使用 chef-solo 资源时更新文件。谢谢！

**更新：**我从 中找到了一些代码`chef-recipe`，但我不确定它到底是做什么的，代码是..

```
ruby_block  "set-env-java-home" do
  block do
    ENV["JAVA_HOME"] = java_home
  end
end 
```

它是仅为该实例设置 JAVA_HOME 变量还是永久设置？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T15:59:52.037

使用[Chef::Util::FileEdit](http://rubydoc.info/gems/chef/11.2.0/Chef/Util/FileEdit)。下面是我如何修改的示例`.bashrc`。这里的想法是我只是添加：

```
# Include user specific settings
if [ -f ~/.bashrc_user ]; then . ~/.bashrc_user; fi 
```

到默认值结束，`.bashrc`所有其他修改都发生在`.bashrc_user`我的食谱中。

```
cookbook_file "#{ENV['HOME']}/.bashrc_user" do
  user "user"
  group "user"
  mode 00644
end

ruby_block "include-bashrc-user" do
  block do
    file = Chef::Util::FileEdit.new("#{ENV['HOME']}/.bashrc")
    file.insert_line_if_no_match(
      "# Include user specific settings",
      "\n# Include user specific settings\nif [ -f ~/.bashrc_user ]; then . ~/.bashrc_user; fi"
    )
    file.write_file
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-15T07:30:44.470

正如@user272735 的建议，一个干净的修改方法`.bashrc`是：

1.  将所有修改写入`.bashrc_local`文件，
2.  将您的特定设置包括到`.bashrc`.

对于第 1 步，我们可以使用[模板资源](https://docs.chef.io/resource_template.html)。对于第 2 步，我更喜欢使用[line cookbook](https://supermarket.chef.io/cookbooks/line)。

示例代码如下，

`templates/bashrc_local.erb`

```
export JAVA_HOME=/usr/lib/java/jdk1.7.0_05
export PATH=$PATH:/usr/lib/java/jdk1.7.0_05/bin 
```

`recipes/default.rb`

```
# add bashrc_local
template "#{ENV['HOME']}/.bashrc_local" do
  source 'bashrc_local.erb'
  mode 00644
end

# update bashrc
append_if_no_line "add bashrc_local" do
  path "#{ENV['HOME']}/.bashrc"
  line "if [ -f ~/.bashrc_local ]; then . ~/.bashrc_local; fi"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T22:57:31.377

您可以通过使用模板资源而不是文件资源来解决此问题，或者如果您只是附加这两个变量，请尝试这样做：

```
content "#{java_home}\n#{path}" 
```

正如您已经发现的那样，第二个内容行覆盖了第一个内容行。你也不需要`action :touch`.

# sharepoint - Sharepoint 错误详细信息（调用堆栈信息）未显示在 sharepoint 站点中

> ID：12090925
> 
> 赞同：1
> 
> 时间：2012-08-23T11:51:59.060
> 
> 标签：sharepoint, sharepoint-2010

如何通过修改 web.config 文件来启用 Sharepoint 站点中的错误信息。？我在 web.config 文件中做了以下更改

```
Callstack = true
CustomErrors mode = Off
Compilation debug = true 
```

但是我仍然无法在共享点站点中获取调用堆栈详细信息（错误详细信息）以获取错误，而不是我收到以下错误“为了使此特定错误消息的详细信息可以在本地服务器上查看机器，请在位于当前 Web 应用程序根目录的“web.config”文件中创建一个标签”。请纠正我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:41:35.687

自定义错误模式关闭，（或打开，我不记得了）。然后设置调试=真。问题是 sharepoint 使用了许多不同的 web.config。有一个在 web 应用程序级别（在 inetpub、虚拟目录中），然后在 /web server extensions/14/ 中有一个用于布局页面、控制模板等。您必须在与您的代码关联的所有相关 Web 配置中进行这些更改。

显然，出于安全原因，请确保在生产中始终将其关闭。

您不需要执行 iisreset，更改 web.config 文件会自动执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:57:54.457

你运行了 iisreset 吗？

确保 web.config 中的更改如下所示：

```
<customErrors mode=”Off” />

<SafeMode … CallStack=”true” … >

<trace enabled=”true” pageOutput=”true”/> 
```

PS：不建议在生产环境中显示堆栈跟踪，而是使用 ULSViewer 之类的工具来浏览日志文件。

# database - 如何设计数据库请求/批准表？

> ID：12090931
> 
> 赞同：0
> 
> 时间：2012-08-23T11:52:07.760
> 
> 标签：database, database-design

我有以下类型的请求表：

```
oversea_study_request
course_request
leave_request 
```

在这些请求功能中，审批人员可以发布多个备注，还可以批准或拒绝请求。系统必须能够捕获所采取操作的历史记录。

设计它的最佳方法是什么？

*   我是否应该创建一个公用表来存储批准信息和备注。
*   我是否应该在每个请求表中存储批准信息和备注。

有人可以就每种方法的优缺点提出建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T08:28:36.223

类似于此处的字段组织问题：[如何更好地组织数据库以考虑用户状态的变化](https://stackoverflow.com/q/12096015/1431750)；和[我的回答](https://stackoverflow.com/a/12096278/1431750)：

如果所有请求的**字段**、字段类型和信息都相同，包括必填（`NOT NULL`）和可选等，那么最好**将所有请求放在一张`requests`表中**。指定一个字段为`request_type`，使用 int 以提高效率和 SQL 便利性，或[ENUM 类型](http://dev.mysql.com/doc/refman/5.0/en/enum.html)。例子：

```
overseas study = 1
course = 2
leave = 3 
```

同样，对`approvals`表也这样做......如果每种类型的过程相同，则将它们存储在一起。存储请求 ID ( `requests.id`)。由于您可能有多个批准评论和批准+拒绝，请将它们存储在`approvals.action`和中`approvals.action_date`。如果“操作”独立于“批准/拒绝”——也就是说，如果您可以发表评论而不批准/拒绝，或者如果您可以批准/拒绝而不发表评论——那么单独存储`actions`and`comments`并包含`request.id`.

所以你有了：

```
Table1: requests
    id INT
    request_type INT (or ENUM)
    request_date DATETIME
    ...

Table2: approvals (or 'actions', to be general)
    id
    request_id    # (refers to requests.id above)
    action_type   # (approve or reject)
    action_date
    comment 
```

如果评论和批准不一定在一起，那么：

```
Table2: actions
    id, request_id, action_type, action_date

Table3: comments
    id, request_id, comment, comment_date 
```

当然，添加 user_id、username 等表/字段。（`id`每个表中的都是它自己的主键）

每个请求 + 操作 + 评论都可以用 a`SELECT`和`LEFT JOIN`s找到

*顺便说一句，这是“海外”学习，而不是“海外”学习——这不是飞机上的课程*；-)

# android - 在 TableLayout 中对齐文本单元格

> ID：12090935
> 
> 赞同：1
> 
> 时间：2012-08-23T11:52:19.373
> 
> 标签：android, tablelayout

如何在两列 TableLayout 中对齐文本内容，以使左列中的文本向右对齐，左列中的文本向左对齐，使它们在中间“固定”在一起屏幕？

它应该看起来像这样：

```
+-----------------------------------+
|           Title: | Value          |
+-----------------------------------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:08:59.903

这是一个提供您想要的小示例

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:weightSum="2">
        <TextView
            android:text="left at right"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:paddingRight="5dp" />
        <TextView
            android:text="right at left"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="left"
            android:paddingLeft="5dp" />
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T11:54:34.927

假设您正在使用`TextView`

使用属性

```
<TextView
  ....
  android:gravity="center|right"` 
/> 
```

,

```
<TextView
  ....
  android:gravity="center|left"
/> 
```

在xml布局中

或者

`textView.setGravity(Gravity.RIGHT|Gravity.CENTER);``textView.setGravity(Gravity.LEFT|Gravity.CENTER);`在java中

# asp.net-mvc - 从 ViewData 填充下拉列表

> ID：12090937
> 
> 赞同：12
> 
> 时间：2012-08-23T11:52:35.770
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, viewdata

我的控制器中有视图数据，由列表填充：

```
List<employee> tempEmpList = new List<employee>();
tempEmpList = context.employees.ToList();
ViewData["tempEmpList"] = tempEmpList; 
```

我将它传递到我的视图中，问题是，如何将 viewdata 列表的内容放入下拉列表中？

显示数据将`.name`来自列表项。

我知道我可以`foreach`在 Viewdata 上做一个并创建一个选择列表，但这似乎有点啰嗦

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-23T12:00:35.383

您可以使用[DropDownList](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions.dropdownlist%28v=vs.108%29) html 助手：

```
@Html.DropDownList("SelectedEmployee", 
    new SelectList((IEnumerable) ViewData["tempEmpList"]), "Id", "Name") 
```

在`SelectList`构造函数中，您可以指定`Employee`应将类的哪些属性用作下拉列表中的文本和值（例如“Id”、“Name”）

`"SelectedEmployee"`当您将数据回发到服务器时，将使用下拉列表的名称 ( )。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-17T09:34:23.413

以正常方式设置您`ViewData`的，分配一个映射到模型中将绑定到的属性的键名`Post`...

```
ViewData["ModelPropertyName"] = new SelectList(...) 
```

然后在您看来只需添加一个`Html.DropDownList`...

```
@Html.DropDownList("ModelPropertyName") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-10T12:53:13.817

请尝试一下。我已经尝试过 MVC5

`@Html.DropDownList("SelectedEmployee", new SelectList((System.Collections.IEnumerable) ViewData["tempEmpList"],"id","Name"))`

# c# - 在asp.net c#中开发图像对比度、锐化、暖色、裁剪、撤消、重做功能

> ID：12090938
> 
> 赞同：0
> 
> 时间：2012-08-23T11:52:38.827
> 
> 标签：c#, image, crop, undo, contrast

我想在我的 Web 应用程序中开发图像对比度、锐化、暖色、裁剪、撤消、重做功能。请告诉我如何开发此功能？我不想使用 .GetPixel() 和 .SetPixel() 因为它是非常慢的方法。所以请告诉我开发这些功能的任何其他方式。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:11:47.383

如果您需要更快地访问图像上的像素数据，请使用`Image.LockBits`. 请注意，任何包含此代码的方法都必须标记为`unsafe`。

```
BitmapData bitmapData = image.LockBits(new Rectangle(0, 0, image.Width, image.Height), ImageLockMode.ReadWrite, PixelFormat.Format32bppRgb);
int* bitmapPtr = (int*)bitmapData.Scan0.ToPointer();

for (int pixelCount = 0; pixelCount <= image.Width * image.Height; pixelCount++)
{
    bitmapPtr[pixelCount] = ...;
    // etc
}

image.UnlockBits(bitmapData); 
```

# wpf - WPF：如何创建可以绑定到的集合

> ID：12090947
> 
> 赞同：1
> 
> 时间：2012-08-23T11:52:58.080
> 
> 标签：wpf

我的应用程序有一个后台线程，它定期以键/值对的形式从外部源检索数据。我想公开这些数据以进行绑定，大概是通过将它们存储在某种静态（？）模型中，因为我的应用程序中的许多视图都需要这些数据。可能有数百个这样的键，并且每个客户可能不同，所以我不能简单地创建一个 INotifyPropertyChanged 模型，其中每个值都有一个属性。

该应用程序在任何时候都有多个可见的视图，每个视图都有许多控件（通常是文本框），我想将它们绑定到上述集合中的各个项目。当集合中的值更新时，任何绑定到该项目的控件*都*应该更改以反映新值。我假设`ObservableCollection`这里不适合，因为对单个项目的更改将导致所有控件更新，无论它们绑定到哪个项目？

为了使组合更加复杂，某些值（数字）将需要格式化以进行显示，例如小数位数，或添加诸如“伏特”之类的后缀。格式化规则是用户定义的，所以我不能将它们硬编码到（比如说）XAML 绑定的`StringFormat`表达式中。理想情况下，我应该能够访问原始值（例如用于计算）和格式化版本（用于显示目的）。我敢肯定，使用一些巧妙的 WPF 功能一定可以实现后者！

我将不胜感激有关如何解决这些要求的任何指示。

**编辑**：值得一提的是，我之前曾尝试将模型实现为某种集合。问题是它最初不会填充所有值，并且这些只是在一段时间后才添加。当它们*最终*被添加时，绑定控件不会更新 - 大概是因为它最初无法绑定到缺失值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:04:44.627

我会采取不同的方法，即[Event Aggregation](http://www.martinfowler.com/eaaDev/EventAggregator.html)的变体。我将有一个管理整个集合的类（可能是一个像 franssu 建议的单例类），但不是直接绑定到该类中的集合，而是创建更小的模型，这些模型更特定于各个视图。

当您的主模型收到一个新项目时，它会发布一个事件，该事件由较小的模型使用，这些模型可以检查新项目并确定是否应该将该项目添加到其内部集合（单个视图绑定到的集合） ）。如果它不“属于”他们的观点，他们可以简单地忽略该事件。

您可以使用类似的事件发布来更新项目等，但如果您绑定到实际项目，您可能不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:05:46.650

只需实现`INotifyCollectionChanged`接口，`INotifyPropertyChanged`你就会得到一个像 ObservableCollection 这样的集合。

但是请记住，如果您从您的集合中选择一个项目（例如 ObservableCollection）并且您更改了该项目，您的其他控件将不会更新。因此，如果您的 Collection 中有一个 Person 类，并且您更改了一个人的名字，那么其他控件将不会获得该人的新名字。

在 Person 对象中，您仍然必须实现`INotifyPropertyChanged`接口并在名称更改时引发事件。

所以我想告诉你的是：带有界面的集合`INotifyCollectionChanged`只会告诉绑定的控件：有一个新项目，有一个项目被删除或项目索引发生变化，但如果项目本身发生变化，则不会。

**因此，您将需要一个提供上述要点的 Collection 和一个包含在该集合中的 Item，如果它的属性发生更改则引发事件。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:05:44.770

`ObservableCollection`这里很完美。您应该会发现`ItemsControl`绑定到 an的标准`ObservableCollection`只会更新已更改项目的控件，而不是集合中的每个项目。

这就是`ObservableCollection`存在的原因 - 它引发的事件专门识别已更改的项目，以便 UI 可以明智地处理它们。

我已经用一个小型 WPF 应用程序在本地对此进行了测试，它运行良好。不过，值得注意的是，虚拟化项目面板在滚动时可能会破坏这种行为......

**编辑：**重新阅读您的问题，您实际上是说“当集合中的值被更新时......”如果您的集合包含一个类的实例，并且您更新了该类的属性，您甚至不需要`ObservableCollection`这个工作 -你只需要类来实现`INotifyPropertyChanged`。

# jsf - 如何访问 Composite 的父命名容器？

> ID：12090950
> 
> 赞同：5
> 
> 时间：2012-08-23T11:53:06.940
> 
> 标签：jsf, jsf-2, primefaces, composite-component, clientid

我有一个 JSP 2.0 `<ui:component>`，其中`<p:dataTable>`有一个列，该列使用 Composite 来呈现有关某些内容的特殊边框。现在我需要识别`<p:dataTabe>`位于内容中的 ajax 渲染属性。

```
<ui:component>
  <p:dataTable id="dataTable" var="userItem" ... />
    <p:column>

        <my:borderBox id="borderBox">
           <p:commandButton
               action="#{userController.doDelete(userItem.id)}"
               value="delete" 
               update="?????"/>  <!-- How to address the dateTable? -->
        </my:borderBox>

      </p:column>
    </p:dataTable>
 <ui:component> 
```

我的边框：

```
<html xmlns:composite="http://java.sun.com/jsf/composite" ...>
   <composite:interface>
      <composite:attribute name="styleClass" default="" type="java.lang.String"/>
   </composite:interface>

   <composite:implementation>
      <h:panelGroup ...>
         ...
         <composite:insertChildren/>
      </h:panelGroup>
   </composite:implementation> 
```

我的想法是使用类似的东西

`update=":#{component.namingContainer.parent.namingContainer.clientId}:dateTable`

但`component.namingContainer.parent`接缝为空。

当我`<p:commandButton>`用这个语句替换时：

```
Parent ClientId 1: #{component}
Parent ClientId 2: #{component.namingContainer}
Parent ClientId 3: #{component.namingContainer.clientId}

Parent ClientId 4: #{component.namingContainer.parent}
Parent ClientId 5: #{component.namingContainer.parent.namingContainer} 
```

我得到这个输出：

```
Parent ClientId 1: javax.faces.component.html.HtmlPanelGroup@3d957419

Parent ClientId 2: javax.faces.component.UINamingContainer@23db9e8f
Parent ClientId 3: main_form:profilTabView:dataTable:0:borderBox

Parent ClientId 4:
Parent ClientId 5: 
```

我不知道是什么问题呢：mybey 我的识别列表的想法是完全错误的还是有一些错误或者有更好的方法？（但我不能对日期表使用修复绝对标识符！）

*版本：Primeface 3.2、Glassfish 3.1.2 上的 Mojarra 2.1.6*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:13:29.100

我有这个问题的解决方法。如果您找不到其他解决方案，您可以使用它作为替代方案。解决方案是 jsf 和 javascript 的混合。为您的表定义一个小部件（例如“myTable”）。

```
<p:dataTable id="dataTable" var="userItem" ...  widgetVar="myTable"/> 
```

它是一个名为“myTable”的全局 javascript 变量。这个小部件对象包含一个 id。对于您的命令按钮（h:commandButton 不是 p:commandButton），您定义 onklick 事件：

```
<h:commandButton id="deleteItem" action="#{userController.doDelete(userItem.id)}"
 value="delete" onclick="PrimeFaces.ab({formId:$(this).closest('form').attr('id'),source:this.id,process:'@all',update:myTable.id});return false;" /> 
```

formId - 您显式输入表单 ID 或使用我的 Jquery 函数
更新 - myTable.id 是一个表 ID（完全是 div 包装器）
进程 - @all、@this、@form 等。

# c# - 如何让我的控制台应用程序在按下某个键时调用一个函数？

> ID：12090952
> 
> 赞同：0
> 
> 时间：2012-08-23T11:53:15.067
> 
> 标签：c#, console-application

我有以下内容：

```
class Program {
    static void Main(string[] args) {

    }
} 
```

有没有一种简单的方法可以让它等待一个键被按下然后调用一个函数。例如：`function funcA()`如果按下“a”，则调用，`funcB()`如果按下“b”，或者如果按下“e”则退出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:56:06.487

```
var c = Console.ReadKey();

switch (c.KeyChar)
{
   case 'a':
      funcA();
      break;
   case 'b':
      funcB();
      break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:54:53.643

你使用这个代码`Console.ReadKey();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T11:56:25.740

**MSDN** : [Console.ReadKey 方法](http://msdn.microsoft.com/en-us/library/471w8d85.aspx)- 获取用户按下的下一个字符或功能键。按下的键显示在控制台窗口中。

你可以这样做——只需要用你想要的键替换这里的键值......这对你有用

```
public static void Main() 
   {
      ConsoleKeyInfo cki;
      // Prevent example from ending if CTL+C is pressed.
      Console.TreatControlCAsInput = true;

      Console.WriteLine("Press any combination of CTL, ALT, and SHIFT, and a console key.");
      Console.WriteLine("Press the Escape (Esc) key to quit: \n");
      do 
      {
         cki = Console.ReadKey();
         Console.Write(" --- You pressed ");
         if((cki.Modifiers & ConsoleModifiers.Alt) != 0) Console.Write("ALT+");
         if((cki.Modifiers & ConsoleModifiers.Shift) != 0) Console.Write("SHIFT+");
         if((cki.Modifiers & ConsoleModifiers.Control) != 0) Console.Write("CTL+");
         Console.WriteLine(cki.Key.ToString());
       } while (cki.Key != ConsoleKey.Escape);
    } 
```

# c# - 编码 - 显示荷兰语字符的问题

> ID：12090956
> 
> 赞同：0
> 
> 时间：2012-08-23T11:53:41.760
> 
> 标签：c#, encoding

我想动态创建一封电子邮件并发送它。到目前为止一切顺利，问题在于它是荷兰语，并且无法正确显示。

我正在这样做：

```
// Body Html
if (!string.IsNullOrEmpty(emailMessage.BodyHtml))
{
    var encoding = Encoding.UTF32;

    byte[] byteArray = Encoding.GetEncoding("iso-8859-1").GetBytes(emailMessage.BodyHtml);
    byte[] unicodeArray = Encoding.Convert(Encoding.GetEncoding("iso-8859-1"), encoding, byteArray);
    emailMessage.BodyHtml = encoding.GetString(unicodeArray);

    System.Net.Mime.ContentType ct = new System.Net.Mime.ContentType();
    ct.MediaType = MediaTypeNames.Text.Html;
    AlternateView htmlView = AlternateView.CreateAlternateViewFromString(emailMessage.BodyHtml, ct);
    mailMessage.AlternateViews.Add(htmlView);
    htmlView.TransferEncoding = TransferEncoding.QuotedPrintable;
}

try
{

    smtpSender.Send(mailMessage);
} 
```

邮件应该包含`Financiële details`，但是当我用 Outlook 打开邮件时，我看到了`Financiele details`

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:20:12.370

请查看 Outlook 邮件项的 InternetCodepage 属性。我在一封新电子邮件中遇到了类似的问题，我在其中插入了现有电子邮件中的文本，其中德语变音符号没有正确显示。在我将新电子邮件中的 InternetCodepage 设置为原始电子邮件的适当值后，此问题得到解决。有关此属性和可能值列表的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/office/ff860730.aspx](http://msdn.microsoft.com/en-us/library/office/ff860730.aspx)。

# c - GTK gtk_label_set_text 分段错误

> ID：12090959
> 
> 赞同：0
> 
> 时间：2012-08-23T11:53:50.950
> 
> 标签：c, gtk, segmentation-fault

我正在学习 GTK+，这个简单的应用程序每次运行时都会崩溃。

它在主窗口中创建一个标签，并且每次单击按钮（`key_press_event`）时，标签和标题应该交换。

`gtk_label_set_text`如果我在函数中注释掉，`change_title`标题会正确交替并且应用程序不会崩溃。为什么`gtk_label_set_text`我的应用程序崩溃？

```
#include <gtk/gtk.h>
#include <string.h>

const gchar first[]="FIRST";
const gchar last[]="LAST";

static void destroy(GtkWidget *window,gpointer data)
{
  gtk_main_quit();
}

static gboolean change_title(GtkWidget *widget,GtkLabel *data)
{
  if(strcmp(last,gtk_window_get_title(GTK_WINDOW(widget)))){
    gtk_window_set_title(GTK_WINDOW(widget),last);
    gtk_label_set_text(data,first);
  } else {
    gtk_window_set_title(GTK_WINDOW(widget),first);
    gtk_label_set_text(data,last);
  }
  return FALSE;
}

int main(int argc,char **argv)
{
  GtkWidget *window, *label;
  gtk_init(&argc,&argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_title(GTK_WINDOW(window),last);
  gtk_widget_set_size_request(window,300,100);
  g_signal_connect(window,"destroy_event",G_CALLBACK(destroy),NULL);

  label = gtk_label_new("caasdasdjadnjadjahadjad");
  gtk_container_add(GTK_CONTAINER(window),label);

  g_signal_connect(window,"key_press_event",G_CALLBACK(change_title),GTK_LABEL(label));

  gtk_widget_show_all(window);

  gtk_main();
  return 0;
} 
```

**编辑**：我发现使用 GDB 的问题，标签指针没有正确传递给`change_title`函数。我不知道为什么。（例如：在`main()`标签 =`0xb6406608`中，在`change_title()`标签 =中`0x807bda8`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:37:43.437

在进行简单的 Google 搜索后，`key_press_event`我看到该事件的回调在小部件和用户数据指针之间有另一个参数。原型是这样的：

```
gboolean key_event_handler(GtkWidget *widget,GdkEventKey *event, gpointer data); 
```

如此简单地将您的功能更改为：

```
static gboolean change_title(GtkWidget *widget, GdkEventKey *event, GtkLabel *data) 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:38:17.603

你的`change_title`函数有错误的原型。

请参阅[文档](http://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-key-press-event)以获取正确的原型。大多数`*-event`信号将实际事件作为参数传递到处理程序函数中，因为处理程序通常需要检查事件才能执行。例如，这里的`GdkEventKey`事件将包含有关按下（或释放）哪个键的信息。

# debugging - Modelica 条件打印（用于调试）

> ID：12090962
> 
> 赞同：2
> 
> 时间：2012-08-23T11:53:56.113
> 
> 标签：debugging, if-statement, modelica

在 Modelica 中，是否可以在一行中包含 if 条件和命令？
（当然可以写成三行，但我更喜欢写成一行。）
类似于：

```
Boolean verbose;
...
if verbose then Modelica.Utilities.Streams.print("iteration steps " + String(iter), "printlog.txt"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T12:15:44.403

你写的代码有什么问题？我发现唯一缺少的是结束如果。

`if cond then print(str, file); end if;`

# c# - Wpf 登录会话

> ID：12090966
> 
> 赞同：0
> 
> 时间：2012-08-23T11:54:02.440
> 
> 标签：c#, wpf, session, sample

我知道 WPF 中不存在“会话”，但是您知道在 wpf 中进行会话的任何示例代码吗？我实际上只想保存一个字符串，并且可以从我的 wpf 应用程序的任何窗口中获取/更改该字符串。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:58:29.650

你可以把你的字符串

```
Application.Current.Properties 
```

您可以查看以下文章：[在 WPF 中存储应用程序范围的数据](http://msmvps.com/blogs/siva/archive/2007/05/11/storing-application-wide-data-the-wpf-way.aspx)

# java - 如何为 parse() 执行并返回正确的值

> ID：12090968
> 
> 赞同：0
> 
> 时间：2012-08-23T11:54:11.627
> 
> 标签：java, android, xml, parsing, rss

我正在尝试编写一个 android RSS 阅读器，它将（暂时）解析来自[这个 MangaPanda List](http://www.mangapanda.com/alphabetical)的 xml 。我将[这个 Android XML 示例](http://developer.android.com/training/basics/network-ops/xml.html)用于基本结构（并且因为它使用 XMLPullParser）以及[这个示例](http://www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/)，因为它清楚地解释了它的`EfficientAdapter`、`AsyncTask`和`ListView`用法。

到目前为止，我认为我已经很好地“合并”了这两者，但我无法弄清楚如何正确执行解析过程。

我的问题是：我将如何正确实现，`LoadXmlFromNetwork()`以便它为我的适配器返回正确的格式？

主要活动：

```
 //Implementation of AsyncTask used to download XML feed from stackoverflow.com.
private class loadingTask extends AsyncTask<String, Void, String> {
 @Override
 protected String doInBackground(String... urls) {
     try {
         return loadXmlFromNetwork(urls[0]);
     } catch (IOException e) {
         return getResources().getString(R.string.hello_world);
     } catch (XmlPullParserException e) {
         return getResources().getString(R.string.menu_settings);
     }
 }

 @Override
 protected void onPostExecute(String result) {  
     setContentView(R.layout.activity_main);
     // Displays the HTML string in the UI via a WebView
     listview1.setAdapter(new EfficientAdapter(MainActivity.this, Manga));
     ShowProgress.dismiss();
 }

}

public Manga loadXmlFromNetwork(String urlString) throws XmlPullParserException, IOException {
    InputStream stream = null;
    // Instantiate the parser
    MainParser MainParser = new MainParser();
    List<Manga> mangas = null;
    String mangaAlpha = null;
    String mangaName = null;
    boolean mangaComplete = false;

    try {
        stream = downloadUrl(urlString);        
        mangas = MainParser.parse(stream);
    // Makes sure that the InputStream is closed after the app is
    // finished using it.
    } finally {
        if (stream != null) {
            stream.close();
        } 
     }

    // StackOverflowXmlParser returns a List (called "entries") of Entry objects.
    // Each Entry object represents a single post in the XML feed.
    // This section processes the entries list to combine each entry with HTML markup.
    // Each entry is displayed in the UI as a link that optionally includes
    // a text summary.

    return mangas;
}
 // Given a string representation of a URL, sets up a connection and gets
 // an input stream.
 private InputStream downloadUrl(String urlString) throws IOException {
     URL url = new URL(urlString);
     HttpURLConnection conn = (HttpURLConnection) url.openConnection();
     conn.setReadTimeout(10000 /* milliseconds */);
     conn.setConnectTimeout(15000 /* milliseconds */);
     conn.setRequestMethod("GET");
     conn.setDoInput(true);
     // Starts the query
     conn.connect();
     InputStream stream = conn.getInputStream();
    return stream;      
 }

} 
```

主解析器：

```
public class MainParser {

// We don't use namespaces
private static final String ns = null;

public List<Manga> parse(InputStream in) throws XmlPullParserException, IOException {
    try {
        XmlPullParser parser = Xml.newPullParser();
        parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
        parser.setInput(in, null);
        parser.nextTag();
        return readFeed(parser);
    } finally {
        in.close();
    }
}

private List<Manga> readFeed(XmlPullParser parser) throws XmlPullParserException, IOException {
    List<Manga> mangas = new ArrayList<Manga>();

    parser.require(XmlPullParser.START_TAG, ns, "feed");
    while (parser.next() != XmlPullParser.END_TAG) {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            continue;
        }
        String name = parser.getName();
        // Starts by looking for the entry tag
        if (name.equals("li")) {
            mangas.add(readTag(parser));
        } else {
            skip(parser);
        }
    }  
    return mangas;
}

private Manga readTag(XmlPullParser parser) throws XmlPullParserException, IOException {
    parser.require(XmlPullParser.START_TAG, ns, "li");
    String mangaAlpha =null;
    String mangaName = null;
    String mangaLink = null;
    boolean mangaComplete = false;

    while (parser.next() != XmlPullParser.END_TAG) {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            continue;
        }
        String name = parser.getName();
        if (name.equals("a")) {
            mangaAlpha = parser.getAttributeValue(null, "name");
        } else if (name.equals("a")) {
            mangaName = parser.getText();
        } else if (name.equals("a")) {
            mangaLink = parser.getAttributeValue(null, "href");
        } else if (name.equals("span")) {
            mangaComplete = true;
        } else {
            skip(parser);
        }
    }
    return new Manga(mangaAlpha, mangaName, mangaLink, mangaComplete);
}

private void skip(XmlPullParser parser) throws XmlPullParserException, IOException {
    if (parser.getEventType() != XmlPullParser.START_TAG) {
        throw new IllegalStateException();
    }
    int depth = 1;
    while (depth != 0) {
        switch (parser.next()) {
        case XmlPullParser.END_TAG:
            depth--;
            break;
        case XmlPullParser.START_TAG:
            depth++;
            break;
        }
    }
 }

} 
```

我的高效适配器：

```
public class EfficientAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<Manga> mangadata;
private static LayoutInflater inflater = null;
//public ImageLoader imageLoader;
ViewHolder holder;

EfficientAdapter(Activity a, ArrayList<Manga> d) {

    activity = a;
    mangadata = d;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    //imageLoader = new ImageLoader(activity.getApplicationContext());

}

@Override
public int getCount() {
    return mangadata.toArray().length;

}

@Override
public Object getItem(int position) {

    return position;
}

@Override
public long getItemId(int position) {

    return position;
}

public static class ViewHolder {
    public TextView label;
    public TextView addr;
    //public ImageView image;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;

    if (convertView == null) {
        vi = inflater.inflate(R.layout.textholder, null);
        holder = new ViewHolder();
        holder.label = (TextView) vi.findViewById(R.id.textView1);
        holder.addr = (TextView) vi.findViewById(R.id.textView2);
        //holder.image = (ImageView) vi.findViewById(R.id.icon);
        vi.setTag(holder);
    } else
        holder = (ViewHolder) vi.getTag();

    holder.label.setText(mangadata.get(position).getMangaAlpha());
    holder.addr.setText(mangadata.get(position).getMangaName());

    //imageLoader.DisplayImage((data.get(position).getThumbnail()), activity,
    //      holder.image, 72, 72);

    return vi;
}

} 
```

附带说明：我不知道要正确解释我的问题需要多少代码，所以请随时编辑掉不必要的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:06:34.290

像这样更改您的异步任务：

```
private class loadingTask extends AsyncTask<String, Void, List<Manga>> {
    @Override
    protected String doInBackground(String... urls) {
        try {
            return loadXmlFromNetwork(urls[0]);
        } catch (IOException e) {
            return null;
        } catch (XmlPullParserException e) {
            return null;
        }
    }

    @Override
    protected void onPostExecute(List<Manga> result) {  
        setContentView(R.layout.activity_main);
        // Displays the HTML string in the UI via a WebView
        listview1.setAdapter(new EfficientAdapter(MainActivity.this, result));
        ShowProgress.dismiss();
    }
}

public List<Manga> loadXmlFromNetwork(String urlString) throws XmlPullParserException, IOException {

.... 
```

# c++ - 如何改进此代码以运行多线程？

> ID：12090972
> 
> 赞同：0
> 
> 时间：2012-08-23T11:54:24.210
> 
> 标签：c++, linux, multithreading, gcc, openmp

我刚刚开始使用 OpenMP 指令来使用多个线程。然而，这段代码使用单线程版本运行得最快。在我看来，算法应该可以很好地扩展，因为计算是独立的。这里发生了什么事？如何改进代码？

```
#include <omp.h>

std::vector<Track> interpolateTracks(const std::vector<Track>& tracks,  double segmentLength) {
    typedef std::vector<Track>::const_iterator iterator;
    std::vector<Track> list;
    #pragma omp parallel shared(list, tracks, segmentLength)
    {
        std::vector<Track> local;
        iterator myBegin = threadBegin(tracks.begin(), tracks.end());
        iterator myEnd = threadEnd(tracks.begin(), tracks.end());
        for (iterator i = myBegin; i < myEnd; ++i) {
            const Track& t = *i;
            TrackInterpolator interpol(t);
            const Track& result = interpol.bySegmentLength(segmentLength);
            local.push_back(result);
        }
        #pragma omp critical
        {
            list.insert(list.end(), local.begin(), local.end());
            std::cout << "Done: " << omp_get_thread_num() << std::endl;
        }
    }
    return list;
} 
```

根据当前线程数和线程数定义的函数`beginThread(begin, end)`和`endThread(begin,end)`返回范围的小块。`begin``end`

这是他们的实现：

```
#include <omp.h>

template <class I>
I threadBegin(I begin, I end) {
    int part = omp_get_thread_num();
    int parts = omp_get_num_threads();
    double chunk = (end - begin)*1.0/parts;
    ptrdiff_t diff = (ptrdiff_t) (chunk*part);
    return begin + diff;
}

template <class I>
I threadEnd(I begin, I end) {
    //the end of i is the begin of i+1
    int part = omp_get_thread_num() + 1;
    int parts = omp_get_num_threads();
    if (part == parts) {
        return end;
    } else {
        double chunk = (end - begin)*1.0/parts;
        ptrdiff_t diff = (ptrdiff_t) (chunk*part);
        return begin + diff;
    }
} 
```

我在 16 核的 linux 机器上运行代码。

不幸的是，我只能访问有点过时的 gcc ((SUSE Linux) 4.5.1 20101208)，以防万一这可能是原因。

`list.push_back(..)`PS 我的第一个版本在*关键*部分使用了并行 for 循环，这甚至比此处发布的变体还要慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:59:20.570

好吧，您的代码似乎是正确的，但这是我看到的可能的性能问题：

1.  关键部分当然是性能杀手，尤其是在计算不是太昂贵和/或 Tracks 的向量不是很大的情况下。
2.  您存储 Track 对象的事实意味着，当您将它们从本地向量移动到最终向量时，您必须复制构造它们。
3.  您知道向量的最终大小，但您可以动态地增长它们。
4.  threadBegin 和 threadEnd 函数利用浮点运算和 FP 到整数的转换。这些，尤其是转换，比执行等效的整数运算要慢得多。

这是我的建议：

1.  将 std::unique_ptr 存储在向量中。
2.  将您的向量预先分配到最终大小。
3.  为了避免最后需要一个关键部分，我看到了两个选项：a）直接在最终数组中工作，但要找到正确的块。由于它会预先分配，因此您不必保护它。b) 在本地向量中工作，然后从线程内复制到预分配的最终向量的正确块。
4.  使用整数数学计算您的块 - 您应该能够在分叉之前进行大部分计算，然后只需更正最后一个块的大小。

# java - 哪个更适合实现中位数算法的中位数 - ArrayList 或 Linkedlist？

> ID：12090983
> 
> 赞同：0
> 
> 时间：2012-08-23T11:54:55.327
> 
> 标签：java

我正在尝试在 Java 中实现中位数算法的中位数。我想知道这两个列表实现中的哪一个在列表遍历和比较方面成本更低？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:10:39.387

An`ArrayList`应该稍微更有效，因为该算法需要对数据结构进行一些随机访问，该数据结构需要 O(1)`ArrayList`和 O(n) `LinkedList`。

`LinkedList`对于删除操作（O(1) for`LinkedList`和 O(n) for `ArrayList`）更有效，但在您的算法中不应该是这种情况。

# android - 如何在 android 中创建邮件编辑器屏幕？

> ID：12090985
> 
> 赞同：0
> 
> 时间：2012-08-23T11:55:07.757
> 
> 标签：android, email

目前我在 Android 应用程序中工作，要创建邮件编辑器屏幕，所以我尝试创建一个邮件编辑器屏幕，我的水平最好，但我不知道，如何制作这个屏幕？请任何人指导我。

提前致谢

我试过这个：

```
 Intent email = new Intent(Intent.ACTION_SEND);
    email.putExtra(Intent.EXTRA_EMAIL,new String[] { "yourid@gmail.com"});
    email.putExtra(Intent.EXTRA_SUBJECT,"Contact Us");
    email.putExtra(Intent.EXTRA_TEXT, text field here);
    email.setType("message/rfc822");
    startActivity(Intent.createChooser(email, "Choose an Email client :")); 
```

结果：

![在此处输入图像描述](../Images/fd6631070b446a96eb0db6be71f7353c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:38:44.787

您可以使用下面的代码让`compose mail`android`automatically`在您的设备上显示这种屏幕。

```
Intent email = new Intent(Intent.ACTION_SEND);
         email.putExtra(Intent.EXTRA_EMAIL,new String[] { "yourid@gmail.com"});
         email.putExtra(Intent.EXTRA_SUBJECT,"Contact Us");
         email.putExtra(Intent.EXTRA_TEXT, text field here);

                email.setType("message/rfc822");

                startActivity(Intent.createChooser(email, "Choose an Email client :")); 
```

尝试 ！祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:10:21.423

我认为最好的方法是创建一个 LinearLayout 垂直，并插入三个带有提示的 EditText。对于第三个字段（撰写邮件），您可以更改小部件的权重以填充父级。

不要忘记将布局的高度设置为“FILL_PARENT”

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:37:57.757

将类型更改为，`"text/plain"`而不是`"message/rfc822"`遵循代码片段：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);                emailIntent.setType("text/plain");
email.putExtra(Intent.EXTRA_EMAIL,new String[] { "yourid@gmail.com"});
startActivity(Intent.createChooser(emailIntent, "Choose an Email client :")); 
```

如果你在模拟器中检查这个使用 android 版本 2.2 及更高版本它适用于我

# jenkins - 在 Windows 构建命令之间保留 Jenkins 中的环境变量

> ID：12090988
> 
> 赞同：3
> 
> 时间：2012-08-23T11:55:18.610
> 
> 标签：jenkins, environment-variables

我正在尝试设置 Jenkins 以不断检查和构建代码并验证代码是否可编译。

我们的构建系统是这样工作的：我们有几个不同的 .bat 文件，它们为不同的构建配置设置环境变量，然后我们执行 gmake 来实际构建代码。

当我创建 Jenkins 作业时，在作业的构建部分中，我设置了两个“执行 windows 批处理命令”命令：一个调用脚本来设置环境。变量和 gmake 来构建它。

问题是，当 gmake 步骤运行时，所有环境变量都被遗忘了。我怎样才能防止环境。变量被清除？

发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:01:15.130

如果您将其设置为仅调用一个 bat 文件会怎样？然后，该文件可以调用您当前使用 Jenkins 调用的两个文件。

# javascript - 等待文件加载（加载 JavaScript）

> ID：12090996
> 
> 赞同：5
> 
> 时间：2012-08-23T11:55:36.893
> 
> 标签：javascript, file, onload, wait, filereader

我想从文件中读取文本并在函数中返回它。所以这是我的代码的重要部分：

```
 function getFileRequest(id, contentType, callback) {
        var val = "x";      

        if (window.File && window.FileReader && window.FileList && window.Blob) {
            var element = document.getElementById(id);

            var file = element.files[0]; 
            if(file != null) {      
                if(file.type.match("text/xml")){
                    var r;
                    r = new FileReader();

                    r.onload = function (e) {
                        val = e.target.result;                    

                    }                   
                    r.readAsText(file);
                }
                else
                    alert("Wrong file format");
            }

        } else {
            alert('The File APIs are not fully supported by your browser.');
        }

        alert(val);
        if(val == null)
                return "";
            else
                return getRequestBody(id,contentType,val);  

    } 
```

我想将文本传递给一个名为“val”的变量。但是，至少在我看来，alert(val) 总是显示默认的“x”，因为它可能没有等待执行 onload 函数。我完全正确吗？那么我怎样才能访问该文本呢？有没有办法等待执行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T11:56:33.987

当然，alert 不在 onload 函数中，所以它会立即被调用。

你可以这样做：

```
 var val = "x";      
        //... code to load a file variable
        var r;
        r = new FileReader();

        r.onload = function (e) {
            val = e.target.result;  
            r.readAsText(file);
            alert(val);
        }; 
```

您不能等待并停止代码的执行，因此一般的想法是使用回调来推迟它。

假设你展示的代码真的要分两部分完成，一个做文件操作，另一个使用它，它可能是这样的：

```
function fetchVal(callback) {
        var val = "x";      
        //... code to load a file variable
        var r;
        r = new FileReader();
        r.onload = function (e) {
            val = e.target.result;  
            r.readAsText(file);
            callback(val);
        };  
}

fetchVal(function(val){
   alert(val);
   // use val
}); 
```