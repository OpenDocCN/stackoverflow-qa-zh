# StackOverflow 问答 12246000-12246999

# facebook - 是否可以导出 facebook 页面内容？

> ID：12246007
> 
> 赞同：1
> 
> 时间：2012-09-03T10:23:17.237
> 
> 标签：facebook, facebook-graph-api, export

我需要导出所有 facebook 页面内容，包括图片、个人资料图片、帖子和评论。有没有办法做到这一点？或者，FB 页面有 RSS 吗？谢谢你！亚历山德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:25:13.763

这是很多工作，但您应该从这里开始寻找：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

没有快速简便的方法，因为不同的页面会根据查看者的不同而显示不同的内容。API 应该非常简单。使用 Graph API 和 RSS 提要之间的最大区别是：

1.  认证
2.  JSON 格式而不是 xml。
3.  更复杂的格式。您有多个节点连接到其他节点。你需要连接点:)

# iphone - 访问默认相册

> ID：12246008
> 
> 赞同：0
> 
> 时间：2012-09-03T10:23:23.937
> 
> 标签：iphone, objective-c, ios

我正在尝试访问 iPhone 中的默认相册。在[这个](https://developer.apple.com/library/ios/#samplecode/MyImagePicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010135)例子中，我只能访问自己创建的专辑。有没有办法进入默认专辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:30:34.773

根据您的要求使用 **AVAssetLibrary** 。

请参阅[ELCImagePickerController](https://github.com/elc/ELCImagePickerController)示例代码以获取对默认相册的访问权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:32:18.987

我会建议这个，我已经使用它，并自己稍微调整一下，它可以维持 1000 多张不崩溃的照片。这是项目：[AGImagePickerController](https://github.com/arturgrigor/AGImagePickerController)。希望你试试这个:)

# java - 如何使用 Eclipse 从 Github 运行下载的嵌套演示 Android 项目？

> ID：12246015
> 
> 赞同：3
> 
> 时间：2012-09-03T10:24:12.703
> 
> 标签：java, android, eclipse, github

我正在尝试运行从 GITHUB 下载的演示项目。在其中，它包含可用作另一个 Android 项目的演示文件夹（例如[github 项目）。](https://github.com/commonsguy/cwac-merge)我不知道如何运行外部项目和内部项目。我所做的是：

1.  向项目添加了 Android 库（例如 Android.2.2）。但是res文件夹在demo文件夹中，所以外层prj会生成src is not found的错误msg。
2.  当我尝试通过从现有代码创建一个新的 Android 项目来运行演示项目时，它无法运行，因为缺少来自外部的一些库......

我想有一种快速的方法可以让它运行。

谁能帮我配置项目以运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:32:55.770

以下是运行下载项目的步骤：

1.  将项目下载为 zip 文件夹，例如：来自[https://github.com/commonsguy/cwac-merge/downloads](https://github.com/commonsguy/cwac-merge/downloads)
2.  将文件夹保存在硬盘上。
3.  打开日食
4.  单击文件->导入->常规->现有项目到工作区->下一步->选择存档文件夹->浏览->选择您下载的zip文件夹->完成。
5.  您从给定链接下载的项目需要配置构建路径以添加库项目。为此，右键单击`MergeAdapterDemo`项目->构建路径->配置构建路径->选择项目选项卡->添加->选择`MergeAdapter`。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:33:27.143

您应该将 eclipse 的工作区文件夹设置为项目告诉您执行的文件夹。在这个例子中，它可能是根文件夹。因为它有 .classpath 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T17:45:13.227

感谢您的回复。这是解决方案：

1.  将内部和外部项目都导入为 eclipse android 项目，我们有 2 个。
2.  一般情况下，外层是“库”项目（带项目[属性](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)检查），内层项目使用外层作为库（带内层项目属性时，在Android-->“是库”应参考外部项目（如果外部构建成功，则为 jar 文件））
3.  构建外部，通常在bin文件夹中会生成jar文件
4.  之后，inner就可以作为Android Application正常执行了

# android - 网络服务的使用

> ID：12246018
> 
> 赞同：1
> 
> 时间：2012-09-03T10:24:25.980
> 
> 标签：android

是否可以将应用程序内容存储在网页中并使用 android 中的另一个应用程序从那里检索相同内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:47:00.063

我认为网络服务是您的正确选择
请查看以下堆栈链接，他们会给您一些想法，

1.  [网络服务](https://stackoverflow.com/questions/5945319/need-tutorials-on-android-web-services?rq=1)
2.  [来自网页的内容](https://stackoverflow.com/questions/8585996/android-java-get-plain-text-from-webpage-alert-system)

希望这可以帮助你:)

# css - css google fonts cyrillic - 一些字母被切断

> ID：12246024
> 
> 赞同：0
> 
> 时间：2012-09-03T10:24:56.223
> 
> 标签：css, webfonts, letters

我在网站上使用谷歌字体时遇到问题，问题仅在使用字体大小时才显示，有些字母更小或顶部被切断。谷歌字体网站上没有问题，但是，如果我尝试在我的服务器上使用它，我会看到它。

在屏幕截图中，您可以看到字母 П 和 Г 更小，然后是其他字母。行高没有帮助。

这是我的代码：

```
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,700&amp;subset=latin,cyrillic-ext,cyrillic" media="screen"> 
```

和：

```
<span style='font-family:"Open Sans", sans-serif; font-size:16px; font-weight:300; font-style:normal;'>ПРОГРАММА глАнаяГа</span> 
```

我在网上上传了简单的示例代码：http: [//tochka.cz/fontstest/](http://tochka.cz/fontstest/)

linux|osx 没有问题，但仅在所有 Windows 浏览器上，font-size:16px 是一个问题，尽管 font-size:17px 不是。

在此先感谢，我非常感谢您的帮助。

![](../Images/38cf36bf8a6456cd024926e073f6f4ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:12:36.953

这是所使用字体的一个设计缺陷：它的设计并未适用于所有尺寸的不同字体渲染技术。某些尺寸的某些 Google 字体会出现此类问题（我观察到的上一个案例是 17px 尺寸的 Sansation 字体），它们可能与 Windows 上的字体渲染特别相关。

我不认为有任何快速的解决方案。谷歌字体应该在不同的环境中进行测试（尤其是在 Windows 上），如果某些字体和字体大小组合有问题，那就避免它——使用小 1 像素或大 1 像素应该会有所帮助。这强调了使用涵盖足够丰富的字符库（包括大写字母）的文本进行测试的必要性。

更新：Google Web Fonts 站点使用不同的字体文件，并使用以下（从站点的 CSS 中提取）进行测试，没有出现问题：

```
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  src: local('Open Sans Light'), local('OpenSans-Light'),
  url(http://themes.googleusercontent.com/licensed/font?kit=DXI1ORHCpsQm3Vp6mXoaTb7uYOTH0fqwR2fK3MMTyiuruusgsetRaCmkKU2Of3BmMh8Htnga2sTO__4Bgy4aRUbOfyIL9KspCxN8ekvQQBzoq8GLqcC6GrPYOPNC3QDT) format('woff');
} 
```

恐怕这种方法并不可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:22:51.953

Google Web Fonts 站点在其系统中使用不同的字体文件和您下载的字体文件，因此如果从 GWF 下载的字体出现问题但在 Google Web Fonts 站点中可以，您可以直接从 Google Web Fonts 页面下载字体（使用Chrome 开发者工具或 Firebug 来获取链接）。

例如我用过：

```
http://themes.googleusercontent.com/licensed/font?kit=DXI1ORHCpsQm3Vp6mXoaTb7uYOTH0fqwR2fK3MMTyiuruusgsetRaCmkKU2Of3BmMh8Htnga2sTO__4Bgy4aRUbOfyIL9KspCxN8ekvQQBzoq8GLqcC6GrPYOPNC3QDT) format('woff') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:11:24.783

我看到的图像和我在 Windows 7 中的 Chrome 中看到的唯一区别是对齐方式。

这是一个操作系统问题，可以按照此处的建议解决，[http://www.icavia.com/2010/09/solving-font-face-alignment-issues/](http://www.icavia.com/2010/09/solving-font-face-alignment-issues/)

# r - 爆炸日期范围为 R

> ID：12246026
> 
> 赞同：2
> 
> 时间：2012-09-03T10:25:01.410
> 
> 标签：r

我有一个表格的数据集：

```
df <- data.frame(var1 = c("1976-07-04" , "1980-07-04" , "1984-07-04" ), 
                   var2 = c('d', 'e', 'f'), 
                   freq = 1:3) 
```

我可以通过以下方式使用索引非常快速地扩展此 data.frame：

```
df.expanded <- df[rep(seq_len(nrow(df)), df$freq), ] 
```

但是，我想在日期上创建一个序列而不是复制，并让频率告诉我这个的长度。即对于第 3 行，我可以创建条目以填充爆炸的 data.frame：

```
seq(as.Date('1984-7-4'), by = 'days', length = 3) 
```

谁能建议一种快速的方法来做到这一点？我的方法是使用各种 lapply 函数来做到这一点

我结合了 Gavin Simpson 的答案和以前的想法来解决我的问题。

```
ExtendedSeq <- function(df, freq.col, date.col, period = 'month') {
  #' An R function to take a data fame that has a frequency col and explode the 
  #' the dataframe to have that number of rows and based on a sequence.
  #'  Args:
  #'   df: A data.frame to be exploded.
  #'   freq.col: A column variable indicating the number of replicates in the 
  #'             new dataset to make.
  #'   date.col: A column variable indicating the name or position of the date
  #'             variable.
  #'   period: The periodicity to apply to the date.

  # Replicate expanded data form
  df.expanded <- df[rep(seq_len(nrow(df)), df[[freq.col]]), ]

  DateExpand <- function(row, df.ex, freq, col.date, period) {
    #' An inner functions to explode a data set and build out days sequence
    #'  Args:
    #'    row: Each row of a data set 
    #'    df.ex: A data.frame, to expand
    #'    freq: Column indicating the number of replicates to make.
    #'    date: Column indicating the date variable
    #'  Output:
    #'    An exploded data set based on a sequence expansion of a date.
    times <- df.ex[row, freq]
    # period <- can edit in the future if row / data driven.
    date.ex <- seq(df.ex[row, col.date], by = "days", length = times)
    return(date.ex)
  }

dates <- lapply(seq_len(nrow(df)), 
                FUN = DateExpand, 
                df.ex = df,
                freq = freq.col,
                col.date = date.col,
                period = period)

df.expanded[[date.col]] <- as.Date(unlist(dates), origin = '1970-01-01')
row.names(df.expanded) <- NULL
return(df.expanded)
} 
```

就我个人而言，我不喜欢我需要从列表中隐藏日期并根据此转换提供来源的方式，以防将来发生变化，但我非常感谢这些想法和帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:43:24.363

这是一种方法：

```
extendDF <- function(x) {
    foo <- function(i, z) {
        times <- z[i, "freq"]
        out <- data.frame(seq(z[i, 1], by = "days", length = times),
                          rep(z[i, 2], times),
                          rep(z[i, 3], times))
        names(out) <- names(z)
        out
    }
    out <- lapply(seq_len(nrow(x)), FUN = foo, z = x)
    do.call("rbind", out)
} 
```

这将迭代索引`1:nrow(df)`（即 的行索引`df`），将内联函数`foo`应用于 的每一行`df`。`foo()`本质上只是 extends`var2`和多次，并使用您对 extends`freq`的调用。该函数对列顺序、名称等进行了一些假设，但您可以根据需要进行修改。`freq``seq()``var1`

唯一的另一点是，将`var1`一个`"Date"`对象全部转换为一个对象而不是依次转换为每一行要高效得多`extendDF()`，因此首先进行一次转换，这里使用`transform()`：

```
df <- transform(df, var1 = as.Date(var1)) 
```

然后打电话`extendDF()`

```
extendDF(df) 
```

这给出了：

```
R> df <- transform(df, var1 = as.Date(var1))
R> extendDF(df)
        var1 var2 freq
1 1976-07-04    d    1
2 1980-07-04    e    2
3 1980-07-05    e    2
4 1984-07-04    f    3
5 1984-07-05    f    3
6 1984-07-06    f    3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:54:38.893

短，不一定快：

```
library(plyr)
adply(df, 1, summarize, var3 = seq(as.Date(var1), by = "days", length = freq)) 
#         var1 var2 freq       var3
# 1 1976-07-04    d    1 1976-07-04
# 2 1980-07-04    e    2 1980-07-04
# 3 1980-07-04    e    2 1980-07-05
# 4 1984-07-04    f    3 1984-07-04
# 5 1984-07-04    f    3 1984-07-05
# 6 1984-07-04    f    3 1984-07-06 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:02:05.263

另一个：

```
df <- data.frame(var1 = c("1976-07-04" , "1980-07-04" , "1984-07-04" ),  var2 = c('d', 'e', 'f'),  freq = 1:3) 
df$id <- seq_len(nrow(df))
expanded <- apply(df[c("id","var1","freq")], MARGIN=1, FUN=function(x) {
  result <- seq.Date(as.Date(x["var1"]), length.out = as.integer(x["freq"]), by = "day")
  data.frame(id = rep(as.integer(x["id"]), length(result)), result=result)
})
expanded <- do.call(rbind, expanded)
expanded <- plyr:::join(x = expanded, y = df, by="id", type = "left", match = "first")
head(expanded) 
```

# iphone - 如何在iOS中实现大力摇一摇？

> ID：12246029
> 
> 赞同：1
> 
> 时间：2012-09-03T10:25:12.173
> 
> 标签：iphone, ios, ios5, shake

我在 ios 中使用摇晃功能。它与下面的代码工作正常。但是当我进行剧烈摇晃时，它检测到了摇晃，并在一秒钟内调用了这条线`if (histeresisExcited && !L0AccelerationIsShaking(self.lastAcceleration, acceleration, 0.2)) { histeresisExcited = NO;}`，尽管我一直在摇晃。

如何实现剧烈摇晃？

我在这里做错了什么？

```
// Ensures the shake is strong enough on at least two axes before declaring it a shake.
// "Strong enough" means "greater than a client-supplied threshold" in G's.
static BOOL L0AccelerationIsShaking(UIAcceleration* last, UIAcceleration* current, double threshold) {
    double
            deltaX = fabs(last.x - current.x),
            deltaY = fabs(last.y - current.y),
            deltaZ = fabs(last.z - current.z);

    return
            (deltaX > threshold && deltaY > threshold) ||
            (deltaX > threshold && deltaZ > threshold) ||
            (deltaY > threshold && deltaZ > threshold);
}

@interface L0AppDelegate : NSObject <UIApplicationDelegate> {
    BOOL histeresisExcited;
    UIAcceleration* lastAcceleration;
}

@property(retain) UIAcceleration* lastAcceleration;

@end 
```

执行

```
@implementation L0AppDelegate

- (void)applicationDidFinishLaunching:(UIApplication *)application {
     [UIAccelerometer sharedAccelerometer].delegate = self;
}

- (void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {

    if (self.lastAcceleration) {
            if (!histeresisExcited && L0AccelerationIsShaking(self.lastAcceleration, acceleration, 0.7)) {
                    histeresisExcited = YES;

                    /* SHAKE DETECTED. DOING SOME DATABASE OPERATIONS HERE. */

            } else if (histeresisExcited && !L0AccelerationIsShaking(self.lastAcceleration, acceleration, 0.2)) {
                    histeresisExcited = NO;

                 /* SHAKE STOPPED. CALLING A VIEW CONTROLLER TO DISPLAY THE CONTENTS GOT FROM THE DATABASE*/
            }
    }

    self.lastAcceleration = acceleration;
 }

// and proper @synthesize and -dealloc boilerplate code

 @end 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:44:11.553

终于通过我的代码的一点点改变得到了答案

更改以下代码

```
static BOOL L0AccelerationIsShaking(UIAcceleration* last, UIAcceleration* current, double threshold) {
double
        deltaX = fabs(last.x - current.x),
        deltaY = fabs(last.y - current.y),
        deltaZ = fabs(last.z - current.z);

return
        (deltaX > threshold && deltaY > threshold) ||
        (deltaX > threshold && deltaZ > threshold) ||
        (deltaY > threshold && deltaZ > threshold); 
```

}

到

```
static BOOL L0AccelerationIsShaking(UIAcceleration* last, UIAcceleration* current, double threshold) {
double
        deltaX = fabs(last.x - current.x),
        deltaY = fabs(last.y - current.y),
        deltaZ = fabs(last.z - current.z);

return
        (deltaX > threshold) ||
        (deltaY > threshold) ||
        (deltaZ > threshold); 
```

}

像魅力一样工作。

希望它对像我这样的人有所帮助。

# spring - MethodBeforeAdvice 之前的方法没有被调用

> ID：12246030
> 
> 赞同：0
> 
> 时间：2012-09-03T10:25:13.597
> 
> 标签：spring

嗨，我想我在 Spring 中发现了一个错误。我试图在运行某些方法之前使用一个简单的 MethodBeforeAdvice 来检查我的登录数据，这里是代码的快照。

公共类主要{

```
public static void main(String []args){
    ProxyFactory pf = new ProxyFactory();
    SecureMessage sm = new SecureMessage();
    pf.setTarget(sm);
    pf.addAdvice(new SecurityAdvice());
    SecureMessage sm1 = (SecureMessage) pf.getProxy();
    sm1.showMessage();
} 
```

如您所见，没有什么特别的。当调用 showMessage() 方法时，我期望 SecurityAdvice 先于方法首先被调用，但事实并非如此。但是当我在调试窗口中并来到最后一行时，这是一件超级奇怪的事情。

```
sm1.showMessage(); 
```

我想看看 sm1 是否是一个代理，所以我在“变量”窗口中单击它，你知道调用了之前的方法吗？即使是陌生人，我也可以多次单击它，然后调用该方法。有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:49:42.507

找到答案，它不起作用的原因是因为 showMessage() 是一个静态方法。似乎 MethodBeforeAdvice before 方法不适用于静态方法。至于调试问题，我不知道。

# git - 如何删除裸 `git` 存储库中的唯一分支？

> ID：12246037
> 
> 赞同：8
> 
> 时间：2012-09-03T10:26:02.593
> 
> 标签：git

我正在尝试一些`githooks`，所以我设置了一个本地裸存储库，其中包含一个`hooks`指向存储在其他地方的钩子的符号链接。

`master`我已将分支推送到`git`repo，当然，钩子失败了。:)

我想将`git`repo 重置为空，而不删除它并且必须重新创建符号链接等。

**如何删除主分支，因为它是存储库中唯一的分支？**

```
$ git branch -d master
error: Cannot delete the branch 'master' which you are currently on. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T10:42:17.797

要删除`master`ref，请使用`git update-ref -d refs/heads/master`.

### 你为什么不应该`rm /refs/heads/master`？

`packed-refs`可能存在，因此`rm`有时无法按预期工作。

顺便说一句，如果您可以创建一个新的空仓库，那么重置的意义何在？只需使用`git init --bare repo.git`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:44:51.633

通常，您不需要删除分支，您可以`git reset --hard REV`将其设置为所需的新版本。但是，如果我对 yuo 的理解正确，您希望将其重置为“无”，即重置`git init`为第一次调用后的状态。git 似乎不允许你这样做，但你可以通过简单地删除`.git/heads/refs/master`. 这是一个新创建的 repo 中的演示：

```
[~/x]$ git init
Initialized empty Git repository in /home/author/x/.git/
[~/x]$ touch a      
[~/x]$ git add a
[~/x]$ git commit -m foo
[master (root-commit) 5fcc99c] foo
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 a
[~/x]$ git log
commit 5fcc99cc396cf5bc2c2fa9edef475b0cc9311ede
Author: ...
Date:   Mon Sep 3 12:40:15 2012 +0200

    foo 
```

在这里你想这样做，但 git 不允许这样做：

```
[~/x]$ git reset --hard HEAD^
fatal: ambiguous argument 'HEAD^': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions 
```

但是，您可以这样做：

```
[~/x]$ rm .git/refs/heads/master 
```

通过提交某些东西来检查它是否有效

```
[~/x]$ touch b
[~/x]$ git add b
[~/x]$ git commit -m 'new history'
[master (root-commit) 0e692b9] new history
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 a
 create mode 100644 b
[~/x]$ git log
commit 0e692b9bb77f526642dcdf86889ec15dfda12be0
Author: ...
Date:   Mon Sep 3 12:40:52 2012 +0200

    new history
[~/x]$ git branch 
* master 
```

# c# - 如何在 aspx 页面中获得动态控件？

> ID：12246038
> 
> 赞同：0
> 
> 时间：2012-09-03T10:26:06.040
> 
> 标签：c#, asp.net, asp.net-placeholder

我正在为我的公司工作一个项目。在那里我遇到了一个问题。因此，我展示了一个我打算做什么和我不能做什么的例子。

在我的 aspx 页面中，我有按钮和占位符。例如

```
 <asp:Button ID = "brnClickme" runat = "server" Text = "Click Me"onclick="brnClickme_Click" />
  <asp:PlaceHolder ID = "PH" runat = "server"></asp:PlaceHolder> 
```

在我的 aspc.cs 文件中，我有一个动态控件，比如一个 Label，它会在单击 Button 后更改其值

所以我写了这样的代码

```
 protected void Page_Init(object sender, EventArgs e)
    {
        Label label = new Label();
        label.Text = "I am in the Place holder";
        PH.Controls.Add(label);
    }
    protected void Page_Load(object sender, EventArgs e)
    {

    }

   protected void brnClickme_Click(object sender, EventArgs e)
    {
        Label label = (Label)FindControl("label");
        label.Text = "After Click I am changed!";
    } 
```

但是在按钮单击事件中，我没有找到标签，因此我无法通过单击更改此动态创建的标签的文本。我知道我犯了一个错误，所以请告诉我我犯了什么错误以及我应该做什么。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:27:55.577

尝试在占位符中找到控件

```
PH.FindControl("label"); 
```

您可能希望为标签指定一个 ID，以便在创建时更容易找到它。

```
label.ID = "findme"; 
```

然后

```
PH.FindControl("findme"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:28:03.937

创建控件时，您还没有给`ID`它一个控件 - 这`ID`是`FindContorl`为了找到该控件而使用的。

[正如podiluska](https://stackoverflow.com/users/1453411/podiluska)[回答](https://stackoverflow.com/a/12246065/1583)的那样，您还应该调用`FindControl`您添加到的容器（`PH`在您的情况下）。

```
protected void Page_Init(object sender, EventArgs e)
{
    Label label = new Label();
    label.ID = "myLabel";
    label.Text = "I am in the Place holder";
    PH.Controls.Add(label);
}

protected void brnClickme_Click(object sender, EventArgs e)
{
    Label label = (Label)PH.FindControl("myLabel");
    label.Text = "After Click I am changed!";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:33:12.947

您必须像您已经完成的那样在 INIT 中重新创建动态控件。当您在按钮中搜索标签时，请单击尝试调用`templateFormPlaceholder.FindControl`。

读这个。它可能有助于[从 asp.net 中动态创建的文本框中获取文本](https://stackoverflow.com/questions/11992311/get-text-from-dynamically-created-textbox-in-asp-net)

# php - 多维数组差异php

> ID：12246039
> 
> 赞同：16
> 
> 时间：2012-09-03T10:26:12.190
> 
> 标签：php, multidimensional-array

我有两个多维数组，我想要区别。例如。我在下面取了二维的两个数组

```
$array1 = Array (
       [a1] => Array  (
          [a_name] => aaaaa
          [a_value] => aaa
     )

       [b1] => Array (
          [b_name] => bbbbb
          [b_value] => bbb
   )
       [c1] => Array (
          [c_name] => ccccc
          [c_value] => ccc
   )

)

$array2 = Array (
 [b1] => Array (
       [b_name]=> zzzzz
     )
) 
```

现在我想要这两个数组的关键区别。我试过 array_diff_key() 但它不适用于多维。

```
array_diff_key($array1, $array2) 
```

我希望输出如下

```
//output
$array1 = Array (
   [a1] => Array  (
      [a_name] => aaaaa
      [a_value] => aaa
 )

   [b1] => Array (          
      [b_value] => bbb
)
   [c1] => Array (
      [c_name] => ccccc
      [c_value] => ccc
)

) 
```

如果您认为我的问题是真实的，请接受并回答。谢谢你。

**编辑**

现在如果第二个数组是

```
$array2 = Array( [b1] => zzzzz) 
```

结果应该是

```
$array1 = Array (
   [a1] => Array  (
      [a_name] => aaaaa
      [a_value] => aaa
    )     

   [c1] => Array (
      [c_name] => ccccc
      [c_value] => ccc
     )

) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-03T13:17:10.910

请检查我是否理解正确，然后此代码段可以帮助您解决问题。我仅针对您指定的问题对其进行了测试。如果您要运行其他测试用例，您可以告诉我调整代码。

```
$a1 = array(
    'a1' => array('a_name' => 'aaa', 'a_value' => 'aaaaa'),
    'b1' => array('b_name' => 'bbb', 'b_value' => 'bbbbbb'),
    'c1' => array('c_name' => 'ccc', 'c_value' => 'cccccc')
);

$a2 = array(
    'b1' => array('b_name' => 'zzzzz'),
);

$result = check_diff_multi($a1, $a2);
print '<pre>';
print_r($result);
print '</pre>';

function check_diff_multi($array1, $array2){
    $result = array();
    foreach($array1 as $key => $val) {
         if(isset($array2[$key])){
           if(is_array($val) && $array2[$key]){
               $result[$key] = check_diff_multi($val, $array2[$key]);
           }
       } else {
           $result[$key] = $val;
       }
    }

    return $result;
} 
```

编辑：添加了对代码的调整。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-28T20:10:27.623

这个解决方案啊对我很有帮助，我希望可以帮助他们做一些事情，无论数组是否混乱。

```
function your_array_diff($arraya, $arrayb) {

    foreach ($arraya as $keya => $valuea) {
        if (in_array($valuea, $arrayb)) {
            unset($arraya[$keya]);
        }
    }
    return $arraya;
}

$a1 = Array
    (
    "0" => Array
        (
        "Empresa" => "TMC01",
        "Paga" => "13/01/2015",
        "ID" => "M2",
        "Valor" => "200",
        "Nombre" => "BONI"
    ),

    "1" => Array
        (
        "Empresa" => "TMC01",
        "Paga" => "13/01/2015",
        "ID" => "M1",
        "Valor" => "100",
        "Nombre" => "SUELDO"
    )
);

$b1 = Array
    (
    "0" => Array
        (
        "Empresa" => "TMC01",
        "Paga" => "13/01/2015",
        "ID" => "M1",
        "Valor" => "100",
        "Nombre" => "SUELDO"
    ),
    "1" => Array
        (
        "Empresa" => "TMC01",
        "Paga" => "13/01/2015",
        "ID" => "M2",
        "Valor" => "200",
        "Nombre" => "BONI"
    )
);

$resultado = your_array_diff($a1, $b1);

echo "<pre>";
echo print_r($resultado);
echo "</pre>"; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-06-06T16:45:40.253

有很多情况下，原始答案无法正常工作，所以我写了一个更好的解决方案。问题之一是，如果您删除了数组 2 中的一个属性，其他函数将无法识别它。

```
function check_diff_multi($array1, $array2){
    $result = array();

    foreach($array1 as $key => $val) {
        if(is_array($val) && isset($array2[$key])) {
            $tmp = check_diff_multi($val, $array2[$key]);
            if($tmp) {
                $result[$key] = $tmp;
            }
        }
        elseif(!isset($array2[$key])) {
            $result[$key] = null;
        }
        elseif($val !== $array2[$key]) {
            $result[$key] = $array2[$key];
        }

        if(isset($array2[$key])) {
            unset($array2[$key]);
        }
    }

    $result = array_merge($result, $array2);

    return $result;
} 
```

我还添加了测试用例来检查结果：

*   在这里您可以找到我的函数的结果： http: [//sandbox.onlinephpfunctions.com/code/3bf7b032f772f8a4d184ca4151de9c3e9e9a58bc](http://sandbox.onlinephpfunctions.com/code/3bf7b032f772f8a4d184ca4151de9c3e9e9a58bc)
*   在这里您可以找到已接受答案的结果： http: [//sandbox.onlinephpfunctions.com/code/88efa3feb5f28bf256b5a220bd881d4a4a04130f](http://sandbox.onlinephpfunctions.com/code/88efa3feb5f28bf256b5a220bd881d4a4a04130f)

如您所见，我的功能提供了更好的结果。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-22T19:36:28.547

```
$out = array_diff_assoc_recursive($array1, $array2); 
```

该解决方案需要数组的递归值，这些值本身可能是数组。

```
function array_diff_assoc_recursive($array1, $array2)
{
    foreach($array1 as $key => $value)
    {
        if(is_array($value))
        {
            if(!isset($array2[$key]))
            {
                $difference[$key] = $value;
            }
            elseif(!is_array($array2[$key]))
            {
                $difference[$key] = $value;
            }
            else
            {
                $new_diff = array_diff_assoc_recursive($value, $array2[$key]);
                if($new_diff != FALSE)
                {
                    $difference[$key] = $new_diff;
                }
            }
        }
        elseif(!isset($array2[$key]) || $array2[$key] != $value)
        {
            $difference[$key] = $value;
        }
    }
    return !isset($difference) ? 0 : $difference;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-20T18:58:40.830

几乎是@bernhardh 答案的副本，但由于我的编辑被拒绝而在此处发布。使用 + 而不是 array_merge，因为 array_merge 将重新索引数组，从而导致索引数组出现问题。

```
/**
 * Given 2 arrays see what has changed when comparing defaults to the new values.
 *
 * @param array $defaults
 *   Array of default values.
  * @param mixed $new_values
 *   Array of new values.
 *
 * @return array
 *   Nested array strucutre; only the diff.
 */
function array_diff_multi(array $defaults, $new_values) {
  $result = array();

  foreach ($defaults as $key => $val) {
    if (is_array($val) && isset($new_values[$key])) {
      $tmp = array_diff_multi($val, $new_values[$key]);
      if ($tmp) {
        $result[$key] = $tmp;
      }
    }
    elseif (!isset($new_values[$key])) {
      $result[$key] = NULL;
    }
    elseif ($val != $new_values[$key]) {
      $result[$key] = $new_values[$key];
    }
    if (isset($new_values[$key])) {
      unset($new_values[$key]);
    }
  }

  $result = $result + $new_values;
  return $result;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-08T15:49:28.670

我知道这个线程有点旧，但是我在原始解决方案中遇到了一些问题。所以这是我对问题的解决方案。

```
private function array_diff_recursive($array1, $array2){
    $result = [];
    foreach($array1 as $key => $val) {
        if(array_key_exists($key, $array2)){
            if(is_array($val) || is_array($array2[$key])) {
                if (false === is_array($val) || false === is_array($array2[$key])) {
                    $result[$key] = $val;
                } else {
                    $result[$key] = $this->array_diff_recursive($val, $array2[$key]);
                    if (sizeof($result[$key]) === 0) {
                        unset($result[$key]);
                    }
                }
            }
        } else {
            $result[$key] = $val;
        }
    }
    return $result;
} 
```

遇到/修复的问题

1.  结果填充了没有区别的键
2.  如果一个值是一个数组而另一个不是，它不会认为它有区别

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-14T11:13:42.863

一个更好的函数，就像原始的 array_diff 一样工作。
将 array1 与一个或多个其他数组进行比较，并以递归方式返回 array1 中不存在于任何其他数组中的值。

```
 <?php

    function md_array_diff(array $array1, array $array2, array $_ = null) {
        $diff = [];
        $args = array_slice(func_get_args(), 1);

        foreach ($array1 as $key => $value) {
            foreach ($args as $item) {
                if (is_array($item)) {
                    if (array_key_exists($key, $item)) {
                        if (is_array($value) && is_array($item[$key])) {
                            $tmpDiff = md_array_diff($value, $item[$key]);

                            if (!empty($tmpDiff)) {
                                foreach ($tmpDiff as $tmpKey => $tmpValue) {
                                    if (isset($item[$key][$tmpKey])) {
                                        if (is_array($value[$tmpKey]) && is_array($item[$key][$tmpKey])) {
                                            $newDiff = array_diff($value[$tmpKey], $item[$key][$tmpKey]);
                                        } else if ($value[$tmpKey] !== $item[$key][$tmpKey]) {
                                            $newDiff = $value[$tmpKey];
                                        }

                                        if (isset($newDiff)) {
                                            $diff[$key][$tmpKey] = $newDiff;
                                        }
                                    } else {
                                        $diff[$key][$tmpKey] = $tmpDiff;
                                    }
                                }
                            }
                        } else if ($value !== $item[$key]) {
                            $diff[$key] = $value;

                        }
                    } else {
                        $diff[$key] = $value;
                    }
                }
            }
        }

        return $diff;
    }

    $arr1 = [
      "A" => [
        "A1" => ['A1-0', 'A1-1', 'A1-2', 'A1-3'],
        "A2" => ['A2-0', 'A2-1', 'A2-2', 'A2-3'],
        "A3" => ['A3-0', 'A3-1', 'A3-2', 'A3-3']
      ],
      "B" => [
        "B1" => ['B1-0', 'B1-1', 'B1-2', 'B1-3'],
        "B2" => ['B2-0', 'B2-1', 'B2-2', 'B2-3'],
        "B3" => ['B3-0', 'B3-1', 'B3-2', 'B3-3']
      ],
      'C' => 123
    ];

    $arr2 = [
      "A" => [
        "A1" => ['A1-1', 'A1-2', 'A1-3'],
        "A2" => ['A2-0', 'A2-1', 'A2-2', 'A2-3'],
        "A3" => ['A3-0', 'A3-1', 'A3-2']
      ],
      "B" => [
        "B1" => ['B1-0', 'B1-2', 'B1-3'],
        "B2" => ['B2-0', 'B2-1', 'B2-2', 'B2-3'],
        "B3" => ['B3-0', 'B3-1', 'B3-3']
      ]
    ];

    $arr3 = [
      "A" => [
        "A1" => ['A1-0', 'A1-1', 'A1-2', 'A1-3'],
        "A2" => ['A2-0', 'A2-1', 'A2-2', 'A2-3'],
        "A3" => ['A3-0', 'A3-1', 'A3-2']
      ],
      "B" => [
        "B1" => ['B1-0', 'B1-2', 'B1-3'],
        "B2" => ['B2-0', 'B2-1', 'B2-2', 'B2-3'],
        "B3" => ['B3-0', 'B3-1', 'B3-3']
      ]
    ];

    $diff = md_array_diff($arr1, $arr2, $arr3);

    ?>
    Will Output:
    array (size=3)
      'A' =>
          array (size=2)
            'A1' =>
              array (size=1)
                0 => string 'A1-0' (length=4)
            'A3' =>
              array (size=1)
                3 => string 'A3-3' (length=4)
      'B' =>
          array (size=2)
            'B1' =>
              array (size=1)
                1 => string 'B1-1' (length=4)
            'B3' =>
              array (size=1)
                2 => string 'B3-2' (length=4)
      'C' => int 123 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-04T12:00:23.247

试试这个功能：

```
<?php
$input = ['blue'  => 1, 'white' => ['purple' => 4, 'green' => 3], 'red' => 2];
$filter = ['blue' => 6, 'white' => ['yellow' => 7, 'green' => 5], 'red' => 2];

/**
 * @param array $input
 * @param array $filter
 * @return array
 */
function multidimensionalArrayDiffKey(array $input, array $filter)
{
    if ($diff = array_diff_key($input, $filter)){
        return $diff;
    }else{
        foreach($input as $key => $value){
            if(is_array($value) && $diff = multidimensionalArrayDiffKey($value, $filter[$key])){
                return [$key => $diff];
            }
        }
    }
    return [];
}
print_r(multidimensionalArrayDiffKey($input, $filter)); 
```

结果：

```
Array
(
    [white] => Array
        (
            [purple] => 4
        )

) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-03-04T12:47:44.723

最好检查第二个数组中是否有整个数组可用

```
 function array_diff_assoc_recursive($arraya, $arrayb) {
            foreach ($arraya as $keya => $valuea) {
                if (in_array($valuea, $arrayb)) {
                    unset($arraya[$keya]);
                }
            }
            return $arraya;
        } 
```

这可能是识别差异的最简单、快速和最短的方法！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-04T10:25:52.580

对@Zaheer Abbass 解决方案的一个小调整，我得到了我想要的结果。非常感谢扎希尔。这是我使用的最终代码。

```
function check_diff_multi($array1, $array2){
    $result = array();
    foreach($array1 as $key => $val) {
        if(isset($array2[$key])){
           if(is_array($val)  && is_array($array2[$key])){
                $result[$key] = check_diff_multi($val, $array2[$key]);
            }
        } else {
            $result[$key] = $val;
        }
    }

    return $result;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-13T16:36:46.077

因此，如果您的数组具有空值或空数组。

```
private function check_diff_multi($array1, $array2){
    $result = array();
    foreach($array1 as $key => $val) {
        if(array_key_exists($key,$array2)){
            if(is_array($val) && is_array($array2[$key]) && !empty($val)){
                $result[$key] = $this->check_diff_multi($val, $array2[$key]);
            }
        } else {
            $result[$key] = $val;
        }
    }
    return $result;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-09T15:23:00.977

看来您最多需要一个 foreach 循环来访问过滤器数组中的第一级键，然后根据过滤数组是否有第二级，您可以与合格数据进行另一轮比较`array_diff_key()`或直接进行比较`unset()`从第一层。

代码：（[演示](https://3v4l.org/7nD5l)）

```
$a1 = array(
    'a1' => array('a_name' => 'aaa', 'a_value' => 'aaaaa'),
    'b1' => array('b_name' => 'bbb', 'b_value' => 'bbbbbb'),
    'c1' => array('c_name' => 'ccc', 'c_value' => 'cccccc')
);

function twoLevelFilter($master, $filter) {
    foreach ($filter as $key => $value) {
        if (isset($master[$key])) {
            if (is_iterable($value)) {
                $master[$key] = array_diff_key($master[$key], $value);
            } else {
                unset($master[$key]);
            }
        }
    }
    return $master;
}

var_export(twoLevelFilter($a1, ['b1' => ['b_name' => 'zzzzz']]));
echo "\n---\n";
var_export(twoLevelFilter($a1, ['b1' => 'zzzzz'])); 
```

输出：

```
array (
  'a1' => 
  array (
    'a_name' => 'aaa',
    'a_value' => 'aaaaa',
  ),
  'b1' => 
  array (
    'b_value' => 'bbbbbb',
  ),
  'c1' => 
  array (
    'c_name' => 'ccc',
    'c_value' => 'cccccc',
  ),
)
---
array (
  'a1' => 
  array (
    'a_name' => 'aaa',
    'a_value' => 'aaaaa',
  ),
  'c1' => 
  array (
    'c_name' => 'ccc',
    'c_value' => 'cccccc',
  ),
) 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-01-23T17:25:57.950

print_r(array_diff_key($array1,$array2));

# iphone - 应用程序在 Xcode 4.1 版本和 Mac 10.6.2 中无法正常运行？

> ID：12246046
> 
> 赞同：1
> 
> 时间：2012-09-03T10:26:35.643
> 
> 标签：iphone, xcode

我的一位客户向我递交了一份申请，要求我进行一些更改。但是当我运行应用程序时，它给了我 (1347) 与代码无关的错误。一些错误如下所示：

```
CG_EXTERN const CFStringRef kCGPDFContextCropBox
  CG_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_2_0);
CG_EXTERN const CFStringRef kCGPDFContextSubject
  CG_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0); 
```

# asp.net - 超过时间限制修改数据库

> ID：12246049
> 
> 赞同：0
> 
> 时间：2012-09-03T10:27:00.180
> 
> 标签：asp.net, sql-server, linq, sql-server-2008

我正在实现一个数据库，它接受请求并回复它们，`Approved`或者`Denied`
我想添加功能，这样如果特定请求在 3 天内没有响应，它将自动回复为`Denied`. 它是数据库中的一个状态字段。
我在 asp.net 3.5 中使用带有 linq 的 sql server 2008 除了检查每个加载时间之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:31:37.410

我的建议是，

编写一个 Windows 服务，它将在每个给定的时间间隔后检查数据库并执行操作。只需保持此 Windows 服务始终运行。在每个时间间隔它都会完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:54:20.363

首先：我的答案与@AnandPhadke 的相似，但差别不大。

我自己也遇到过这个问题好几次了。

1）我通常为这类任务构建一个“机器人”。

“机器人”是指一个非常简单的控制台应用程序，它只检查数据库并根据数据库结果执行所需的操作。此控制台应用程序还能够记录其活动（出于调试目的等，您可以使用开源 log4net 来完成此任务）。

2）然后我让标准的 Windows“任务计划程序”定期调用我的控制台应用程序。

以下是有关“任务计划程序”的更多信息：http: [//windows.microsoft.com/en-US/windows7/schedule-a-task](http://windows.microsoft.com/en-US/windows7/schedule-a-task)

**编辑/更新：**

这是我要描述的主要内容 ![主要的](../Images/dcfda90a0c347c7b863ca1aa99711eb9.png)

有几件事可能会影响 CPU 的负载。首先是计算密集型操作。我完全不知道您的数据库设计是什么样的，但我确定您的 SQL 查询越复杂（*并且*必须处理此复杂查询的数据越多），它将需要 CPU 提供更多的功能。尝试优化您的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:53:05.787

如果您只需要在间隔后修改 SQL Server 中的记录，请使用 SQL Server Agent。您可以设置一个在您想要的任何时间段运行的作业，它可以运行类似于存储过程的东西，它可以检查您想要的内容并更新匹配的记录。这是有关如何设置工作的教程：

[http://databases.about.com/od/sqlserver/ss/sql_server_agent_3.htm](http://databases.about.com/od/sqlserver/ss/sql_server_agent_3.htm)

# asp.net - 在 dotnentnuke 中选择 CSS 的条件语句

> ID：12246051
> 
> 赞同：0
> 
> 时间：2012-09-03T10:27:06.407
> 
> 标签：asp.net, dotnetnuke

我正在尝试在 dotnetnuke 框架中实现媒体查询。有没有办法有条件地选择要使用的css？我试图阻止不支持媒体查询的 IE6/7/8 不访问媒体查询 CSS：

继承人并从我的代码中提取不起作用：

```
<%@ Register TagPrefix="ddn" TagName="MENU" src="~/DesktopModules/DDRMenu/Menu.ascx" %>
<%@ Register TagPrefix="ddn" TagName="MOBMENU" src="~/DesktopModules/DDRMenu/Menu.ascx" %>
<%@ Register TagPrefix="dnn" Namespace="DotNetNuke.Web.Client.ClientResourceManagement" Assembly="DotNetNuke.Web.Client" %>

<![if !(IE 6)|(IE 7)|(IE 8)]>
    <dnn:DnnCssInclude runat="server" FilePath="mq.css" PathNameAlias="SkinPath" />                    
<![endif]>

        <div id="wrapper">

            <div id="header">
                <div id="logo">
                    <dnn:LOGO runat="server" id="dnnLOGO" />
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:43:59.353

你可以使用这个皮肤对象来实现CSS的条件加载：

[40fingers 风格的辅助皮肤对象](http://www.40fingers.net/WeblogsNews/Weblogs/tabid/58/ID/102/language/nl-NL/DotNetNuke-Style-Helper-Skin-Object-020500-Released.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:43:45.380

DnnCssInclude 没有“条件”属性，您必须改用此皮肤对象：

```
<%@ Register TagPrefix="dnn" TagName="STYLES" Src="~/Admin/Skins/Styles.ascx" %>
<dnn:STYLES runat="server" ID="StylesIE7" Name="IE7Minus" StyleSheet="ie7skin.css" Condition="LT IE 8" UseSkinPath="true"/> 
```

上面的代码取自 DNN6 附带的 DarkKnight 皮肤。

你真的需要隐藏来自旧浏览器的媒体查询吗？不支持媒体查询的浏览器会忽略它们。

编辑：您的媒体查询的语法是什么？如果你使用

```
@media screen and (min-width: 300px) {.box  { background-color: red; }} 
```

然后IE6,7会忽略它，我刚刚测试过。如果你使用这样的东西：

```
@media screen {.box  { background-color: red; }} 
```

或者

```
@media screen, all and (min-width: 300px) {.box  { background-color: red; }} 
```

然后 IE6,7 会选择这些样式。您可能需要调整语法。阅读[这篇文章](http://dev.opera.com/articles/view/safe-media-queries/)，它很旧，但仍然适用于 IE6,7。

# tomcat - 如何使用 ant 脚本从 tomcat 集群中禁用节点？

> ID：12246052
> 
> 赞同：1
> 
> 时间：2012-09-03T10:27:06.150
> 
> 标签：tomcat, deployment, ant, cluster-computing

我想编写一个**ant 脚本来在 Tomcat 集群上部署应用程序**。我的部署策略与[这篇文章中的完全一样](https://stackoverflow.com/questions/11766520)

假设我有一个包含 4 个 Tomcat 节点的集群。

部署策略步骤：

1.  禁用单节点监控
2.  将该节点拉出集群
3.  向其部署新代码
4.  验证节点是否使用新代码正常运行
5.  将节点放回集群
6.  重新启用对该节点的监控
7.  对每个其他节点重复步骤

我想知道，如何禁用tomcat集群节点来部署新应用程序？我认为不可能在不打扰我的用户的情况下同时在所有节点上进行部署。有什么好的方法可以做到这一点吗？

如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:11:52.423

您可以使用 Mod_cluster 对 Tomcat 节点集群进行负载平衡。使用 Mod_cluster 可以禁用/启用单个节点、节点组（负载平衡组）和特定上下文，从而执行滚动更新等。 HTH

# python - 关于 /accounts/openid/callback/ 和 ACCOUNT_EMAIL_REQUIRED 的问题

> ID：12246054
> 
> 赞同：0
> 
> 时间：2012-09-03T10:27:24.047
> 
> 标签：python, django, django-allauth

我使用 django-allauth，我只允许 google openid 登录。

我尝试使用从 openid 获取的用户名创建帐户，因此我将 ACCOUNT_EMAIL_REQUIRED 设为 True。它有效，但我不确定它是否以这种方式定义。

而且，每当我第一次登录时（它还没有 openid 的帐户），它总是重定向到 /accounts/openid/callback。页面中有错误，异常值为 10061 我不知道它想要做什么以及如何修复它。

如果该帐户存在，它会重定向到 /accounts/profile 并且运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:07:15.790

我不确定我是否完全理解这个问题：

*   您想要“取自 openid 的用户名”吗？OpenID 是一个 URL——它不能用作`User.username`. 目前，该`User.username`字段是根据提供商明确传递的用户名自动填充的，并回退到从电子邮件地址派生的用户名。见：[https ://github.com/pennersr/django-allauth/blob/master/allauth/socialaccount/helpers.py#L51](https://github.com/pennersr/django-allauth/blob/master/allauth/socialaccount/helpers.py#L51)

*   “错误页面/1006”——这不会敲响警钟。你能告诉我完整的 URL 和堆栈跟踪吗？

# xpath - 将没有节点本身的xml节点内容提取到jmeter中的变量中

> ID：12246055
> 
> 赞同：5
> 
> 时间：2012-09-03T10:27:24.323
> 
> 标签：xpath, jmeter

在我的 JMeter 场景中，我正在测试 SOAP Web 服务。我将初始请求发送到 Web 服务 S1，然后使用它的响应来构建对 S2 的请求。S1 的响应格式如下：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
    <s:response xmlns:s="http://custom.namespace.com/namespace">
    ...
        <s:responseDetails>
            <s:detail1>some info</s:detail>
            <s:detail2>another info<s:detail2>
            ...
        </s:responseDetails>
    </s:response>
</soap:Body>
</soap:Envelope> 
```

我需要使用里面的所有东西`<s:responseDetails>`来构建对 S2 的请求，但包装在不同的 xml 元素中：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:s="http://custom.namespace.com/namespace">
<soap:Body>
    <s:request>
        <s:details>
            <s:detail1>some info</s:detail>
            <s:detail2>another info<s:detail2>
            ...
        </s:details>
    </s:request>
</soap:Body>
</soap:Envelope> 
```

请注意请求中的元素`<s:details>`而不是`<s:responseDetails>`.

我从 XPath 提取器开始，希望使用 XPath 表达式将`<s:responseDetails>`标记下的所有内容放入 JMeter 变量中：

*   `//*[local-name()='responseDetails']/node()`- 给我一组具有不同子级的 JMeter 变量`<s:responseDetails>`，而我希望它们位于一个变量中
*   `//*[local-name()='responseDetails']`- 给我整个节点`<s:responseDetails>`，由于存在根标签，我无法使用`<s:responseDetails>`，我需要用它替换`<s:details>`

将所有内容放入变量的正确表达式是什么`<s:responseDetails>`，以便我以后可以使用

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:s="http://custom.namespace.com/namespace">
<soap:Body>
    <s:request>
        <s:details>
            ${details}
        </s:details>
    </s:request>
</soap:Body>
</soap:Envelope> 
```

或者也许还有另一种方法可以解决我的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:17:35.143

请执行下列操作：

1）添加XPath提取器，就像你做的那样：

*   参考名称：responseFragment
*   XPath 查询：//s:response/s:responseDetails
*   使用命名空间=true

2）添加一个Beanshell采样器：

```
String fragment = vars.get("responseFragment");
// Improve this replacement by regexp to avoid side effects
String newFragment = fragment.replace("responseDetails","details");
 vars.put("modifiedFragment", newFragment); 
```

3）然后使用：${modifiedFragment}

请注意，Beanshell 采样器会稍微降低 JMeter 的性能，但应该是合理的。

请注意，您可以使用外部文件中的 groovy 底层语言和脚本将 Beanshell 采样器替换为 JSR 223。

使用 JMeter > 2.7 版本的性能将优于 beanshell 解决方案，因为新版本的 JMeter 引入了一种新的缓存机制，该机制将“编译”Groovy 脚本并使其几乎与 Java 类一样高效。

自 2012 年 9 月 3 日起，此机制在[JMeter Nightly build](http://jmeter.apache.org/nightly.html)中可用。

JMeter 测试计划示例：

```
 <?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2" properties="2.3" jmeter="2.8-SNAPSHOT.20120903">
  <hashTree>
    <TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="Test Plan" enabled="true">
      <stringProp name="TestPlan.comments"></stringProp>
      <boolProp name="TestPlan.functional_mode">false</boolProp>
      <boolProp name="TestPlan.serialize_threadgroups">false</boolProp>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
        <collectionProp name="Arguments.arguments"/>
      </elementProp>
      <stringProp name="TestPlan.user_define_classpath"></stringProp>
    </TestPlan>
    <hashTree>
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Thread Group" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">1</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">1</stringProp>
        <stringProp name="ThreadGroup.ramp_time">1</stringProp>
        <longProp name="ThreadGroup.start_time">1346673693000</longProp>
        <longProp name="ThreadGroup.end_time">1346673693000</longProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
      </ThreadGroup>
      <hashTree>
        <JavaSampler guiclass="JavaTestSamplerGui" testclass="JavaSampler" testname="Java Request" enabled="true">
          <elementProp name="arguments" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" enabled="true">
            <collectionProp name="Arguments.arguments">
              <elementProp name="Sleep_Time" elementType="Argument">
                <stringProp name="Argument.name">Sleep_Time</stringProp>
                <stringProp name="Argument.value">100</stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
              <elementProp name="Sleep_Mask" elementType="Argument">
                <stringProp name="Argument.name">Sleep_Mask</stringProp>
                <stringProp name="Argument.value">0xFF</stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
              <elementProp name="Label" elementType="Argument">
                <stringProp name="Argument.name">Label</stringProp>
                <stringProp name="Argument.value">OK</stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
              <elementProp name="ResponseCode" elementType="Argument">
                <stringProp name="Argument.name">ResponseCode</stringProp>
                <stringProp name="Argument.value">200</stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
              <elementProp name="ResponseMessage" elementType="Argument">
                <stringProp name="Argument.name">ResponseMessage</stringProp>
                <stringProp name="Argument.value">200</stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
              <elementProp name="Status" elementType="Argument">
                <stringProp name="Argument.name">Status</stringProp>
                <stringProp name="Argument.value">OK</stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
              <elementProp name="SamplerData" elementType="Argument">
                <stringProp name="Argument.name">SamplerData</stringProp>
                <stringProp name="Argument.value"></stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
              <elementProp name="ResultData" elementType="Argument">
                <stringProp name="Argument.name">ResultData</stringProp>
                <stringProp name="Argument.value">&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt; &lt;soap:Body&gt;     &lt;s:response xmlns:s=&quot;http://custom.namespace.com/namespace&quot;&gt;         &lt;s:responseDetails&gt;             &lt;s:detail1&gt;some info&lt;/s:detail1&gt;             &lt;s:detail2&gt;another info&lt;/s:detail2&gt;         &lt;/s:responseDetails&gt;     &lt;/s:response&gt; &lt;/soap:Body&gt; &lt;/soap:Envelope&gt;</stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
            </collectionProp>
          </elementProp>
          <stringProp name="classname">org.apache.jmeter.protocol.java.test.JavaTest</stringProp>
        </JavaSampler>
        <hashTree>
          <XPathExtractor guiclass="XPathExtractorGui" testclass="XPathExtractor" testname="XPath Extractor" enabled="true">
            <stringProp name="XPathExtractor.default"></stringProp>
            <stringProp name="XPathExtractor.refname">TOTO</stringProp>
            <stringProp name="XPathExtractor.xpathQuery">//s:response/s:responseDetails</stringProp>
            <boolProp name="XPathExtractor.validate">false</boolProp>
            <boolProp name="XPathExtractor.tolerant">false</boolProp>
            <boolProp name="XPathExtractor.namespace">true</boolProp>
            <boolProp name="XPathExtractor.whitespace">true</boolProp>
          </XPathExtractor>
          <hashTree/>
        </hashTree>
        <DebugSampler guiclass="TestBeanGUI" testclass="DebugSampler" testname="Debug Sampler" enabled="true">
          <boolProp name="displayJMeterProperties">false</boolProp>
          <boolProp name="displayJMeterVariables">true</boolProp>
          <boolProp name="displaySystemProperties">false</boolProp>
        </DebugSampler>
        <hashTree/>
        <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="View Results Tree" enabled="true">
          <boolProp name="ResultCollector.error_logging">false</boolProp>
          <objProp>
            <name>saveConfig</name>
            <value class="SampleSaveConfiguration">
              <time>true</time>
              <latency>true</latency>
              <timestamp>true</timestamp>
              <success>true</success>
              <label>true</label>
              <code>true</code>
              <message>false</message>
              <threadName>true</threadName>
              <dataType>false</dataType>
              <encoding>false</encoding>
              <assertions>true</assertions>
              <subresults>false</subresults>
              <responseData>false</responseData>
              <samplerData>false</samplerData>
              <xml>false</xml>
              <fieldNames>false</fieldNames>
              <responseHeaders>false</responseHeaders>
              <requestHeaders>false</requestHeaders>
              <responseDataOnError>false</responseDataOnError>
              <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>
              <assertionsResultsToSave>0</assertionsResultsToSave>
              <bytes>true</bytes>
              <hostname>true</hostname>
              <threadCounts>true</threadCounts>
              <sampleCount>true</sampleCount>
            </value>
          </objProp>
          <stringProp name="filename"></stringProp>
        </ResultCollector>
        <hashTree/>
      </hashTree>
    </hashTree>
  </hashTree>
</jmeterTestPlan> 
```

另一种方式：

1）添加XPath提取器，就像你做的那样：

*   参考名称：responseFragment
*   XPath 查询：//s:response/s:responseDetails/*
*   使用命名空间=true

2）添加一个Beanshell采样器：

```
int number = Integer.parseInt(vars.get("fullAnswer_matchNr"));
StringBuilder builder = new StringBuilder();
for(int i=0;i<number;i++) {
     builder.append(vars.get("fullAnswer_"+(i+1)));
}
vars.put("body", builder.toString()); 
```

3）使用身体

这个比较干净，因为没有替代品

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:49:47.190

您能否省略`<s:details>`标签并像这样发送请求：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:s="http://custom.namespace.com/namespace">
<soap:Body>
    <s:request>
        ${details}
    </s:request>
</soap:Body>
</soap:Envelope> 
```

# mysql - 我可以从 MySql 触发器创建（和写入）文件吗

> ID：12246058
> 
> 赞同：0
> 
> 时间：2012-09-03T10:27:31.467
> 
> 标签：mysql, triggers

当我的 MySql 表更新时，我需要记录一些数据，并且我需要将其写入日志文件（可能是 .csv）。

有没有办法做到这一点？！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:02:42.103

是的，您可以使用带有 INTO OUTFILE 选项的[SELECT](http://dev.mysql.com/doc/refman/5.1/en/select.html)语句，它将帮助您将信息输出到 CSV 文件。

# c++ - C++ 内存泄漏修复

> ID：12246060
> 
> 赞同：0
> 
> 时间：2012-09-03T10:27:35.407
> 
> 标签：c++, memory, memory-leaks, derived-class

我的一个朋友告诉我，这段代码有内存泄漏

```
Base
{
    public:
        vector<Foo*> fooes;
};

Derived : public Base
{
    public:

        Derived ( )
        {
            for ( int i = 0 ; i < 10 ; i++ )
            {
                    this.fooes.push_back ( new Foo() );
            }
        };

}; 
```

但是他很忙，帮不了我，所以我问你，内存泄漏在哪里？我该如何解决？据我了解，内存泄漏是我不删除由创建的对象`new Foo()`，所以我可以添加一个析构函数`Base`，并清除`fooes`向量，对吧？

```
Base
{
    public:
        vector<Foo*> fooes;
        ~Base ( )
        {
            this->fooes.clear();
        };

}; 
```

问题是：

1.  这是一个正确的内存泄漏修复吗？

2.  是否会在`Base`Derived 的析构函数之前调用析构函数？

3.  删除时会`fooes`自动删除vertor`Base`还是我必须手动删除班级的所有成员？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T10:29:46.983

> 1）这是一个正确的内存泄漏修复吗？

不，您必须遍历元素并手动操作`delete`它们。

> 2) Base 的析构函数会在 Derived 的析构函数之前被调用吗？

否（假设您要删除一个`Derived`对象）。

> 3）删除 Base 时会自动删除 fooes 向量还是我必须手动删除该类的所有成员？

是与否。向量本身将被删除，因为它是自动管理的，其成员不会：

```
~Base ( )
{
   for ( size_t i = 0 ; i < fooes.size() ; i++ )
     delete fooes[i];
}; 
```

你应该有一个`delete`and分别`delete[]`代表每个`new`和`new[]`。

所有这一切的一个更好的选择是使用智能指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T10:30:00.667

您需要遍历向量中的所有指针并在清除它们之前将其删除。向量将清除指针，但不会清除它们指向的内存，除非您自己执行或更改向量以使用 shared_ptr 之类的东西。如果您的向量是对象向量，那么您将不会发生内存泄漏，但由于元素是通过您分配的指针，`new`您将需要释放该内存 - 向量不会自动为您执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:48:35.517

代码示例中没有内存泄漏，只是一个类定义。如果一个程序创建一个类型的对象`Derived`并销毁它，则可能（见下文）会发生内存泄漏。但是如果一个程序创建了一个类型为 的对象`Derived`，销毁了`Foo`它持有的所有对象，然后删除了原来的对象，那么很可能不会发生内存泄漏。

内存泄漏很少能单独分析；它们是整个程序的属性。可以修改此类以删除`Foo`对象，但这可能会施加新的设计约束，而这并非意料之中。例如，`Foo`对象可能会在内部容器中注册自己，并要求所有此类对象都持续到程序结束；鉴于该要求，删除析构函数中的对象`Derived`是错误的。

现在，这在很大程度上都是假设的。我不会抱怨有人增强了`Derived`删除所有`Foo`对象的析构函数——这可能是正确的做法。但总有一点疑问...

# android - 从动态添加的 LinearLayout 中动态删除视图

> ID：12246062
> 
> 赞同：0
> 
> 时间：2012-09-03T10:27:46.577
> 
> 标签：android, listview, scrollview, android-linearlayout, dynamic-data

帮助解决这样的问题。我有一个包含很多项目的 ScrollView。在它的底部，我添加了来自另一个 Activity 的一组项目。我检查来自另一个 Activity 的输入 ArrayList，并且应该使用 ScrollView 向我的 Activity 添加适当数量的复选框。我添加这样的项目：

```
public void addFiles()
{

        LinearLayout layout = (LinearLayout) findViewById(R.id.filesList);

        if(!FileManagerActivity.finalAttachFiles.isEmpty())
        {   

            for (int i=0; i<FileManagerActivity.finalAttachFiles.size();i++)
            {   

               View line = new View(this);
               line.setLayoutParams(new LayoutParams(1, LayoutParams.MATCH_PARENT));
               line.setBackgroundColor(0xAA345556);
               informationView= new CheckBox(this);
               informationView.setTextColor(Color.BLACK);
               informationView.setTextSize(16);
               informationView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
               informationView.setCompoundDrawablesWithIntrinsicBounds(R.drawable.file_icon, 0, 0, 0);  
               informationView.setText(FileManagerActivity.finalAttachFiles.get(i).getName().toString());
               informationView.setId(i);
               layout.addView(informationView, 0);
               layout.addView(line, 1);
               layout.postInvalidate();
            }
        }

} 
```

一切都正确添加。比我创建单独的 ArrayList 应该保存复选框的可检查状态：

```
for(int b=0;b<FileManagerActivity.finalAttachFiles.size();b++){    
   checks.add(b,0);  
} 
btnClose.setOnClickListener(new View.OnClickListener() {

  public void onClick(View view) {
     moveTaskToBack(true);
  } 
}); 
```

`FileManagerActivity.finalAttachFiles`另一个 Activity 的 ArrayList在哪里。我像这样保存可检查状态：

```
public void getChecked()
{  

    LinearLayout layout = (LinearLayout) findViewById(R.id.filesList);
    View v = null;
    for(int i=0; i< FileManagerActivity.finalAttachFiles.size(); i++) {

    v = layout.getChildAt(i);     
    CheckBox checkBox = (CheckBox) findViewById(i);
   boolean checked=checkBox.isChecked();
    if (checked)
    {  
     checks.set(i, 1);
    }
    else
    {
        checks.set(i, 0);
    }
  }
} 
```

然后我想删除那些用按钮检查的项目。我这样做：

```
btnFilesRemove.setOnClickListener(new View.OnClickListener() {

public void onClick(View view) {

    LinearLayout layout = (LinearLayout) findViewById(R.id.filesList);
    getChecked();
    for (int i=0;i< checks.size();i++)
    {

    if (checks.get(i)==1)
    {  
        View v = layout.getChildAt(i);   
        ViewGroup parent = (ViewGroup) v.getParent();
        parent.removeView(v);
        layout.invalidate();
    }
    else
    {
        Log.i("wasn't checked",Integer.toString(checks.get(i)));
    }

  }
 }
}); 
```

但是当我这样做时，只能删除项目而不是那些已检查的项目。当我尝试再删除一次时，我得到一个：

```
09-03 13:12:32.569: E/AndroidRuntime(1600): FATAL EXCEPTION: main
09-03 13:12:32.569: E/AndroidRuntime(1600): java.lang.NullPointerException
09-03 13:12:32.569: E/AndroidRuntime(1600):     at com.assignmentexpert.NewOrderActivity.getChecked(NewOrderActivity.java:307)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at com.assignmentexpert.NewOrderActivity$4.onClick(NewOrderActivity.java:149)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at android.view.View.performClick(View.java:2485)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at android.view.View$PerformClick.run(View.java:9080)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at android.os.Handler.handleCallback(Handler.java:587)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at android.os.Looper.loop(Looper.java:123)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at android.app.ActivityThread.main(ActivityThread.java:3687)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at java.lang.reflect.Method.invokeNative(Native Method)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at java.lang.reflect.Method.invoke(Method.java:507)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
09-03 13:12:32.569: E/AndroidRuntime(1600):     at dalvik.system.NativeStart.main(Native Method) 
```

我尝试通过使用 ListView 来实现这一点，但由于使用 ScrollView 会导致可视化问题，但功能工作正常......请告诉我，我怎样才能以更好的方式实现：继续使用 LinearLayout 或 ListView 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:52:52.630

在您创建的所有复选框上设置 onCheckChangeListener

```
informationView.setTag(i);   
informationView.setOnCheckedChangeListener(new OnCheckedChangeListener{ 
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked){ 
        final Integer position=(Integer) buttonView.getTag(); 
        if(position!=null){  
            if (ischecked){  
                checks.set(i, 1);
            }else {
                checks.set(i, 0);
            }
        } 
    } 
}); 
```

# php - 如何使用 ssh2_connect 连接多个连接？

> ID：12246063
> 
> 赞同：1
> 
> 时间：2012-09-03T10:27:48.767
> 
> 标签：php

我有这个 php 代码可以连接到 ssh2，但我正在尝试让它连接太多主机，而不是 1

```
$ssh = ssh2_connect('host', 22);
ssh2_auth_password($ssh, 'root', 'pass'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:36:07.690

您可以随时制作尽可能多的变量

```
$ssh = ssh2_connect('host', 22);
ssh2_auth_password($ssh, 'root', 'pass');

$ssh2 = ssh2_connect('host2', 22);
ssh2_auth_password($ssh2, 'root', 'pass');

$ssh3 = ssh2_connect('host3', 22);
ssh2_auth_password($ssh3, 'root', 'pass'); 
```

`$ssh`，`$ssh2`并且`$ssh3`将是 3 个连接。

# java - 我可以在填充集合时检查集合的大小吗

> ID：12246070
> 
> 赞同：12
> 
> 时间：2012-09-03T10:28:17.043
> 
> 标签：java, multithreading, collections

我使用以下 Apache Commons 类在 Java 文件系统中列出文件：

`Collection<File> allFiles = FileUtils.listFiles(rootDirectory, null, recursive);`

这是一个非常漫长的过程，最多可能需要 5 分钟。

有什么方法可以**在填充集合时检查集合的大小？**

我尝试从一个单独的线程访问它，但只是在进程准备好之前得到了零。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T10:31:05.207

在您从该方法获得返回值之前，您将无法访问填充的集合，因为您无权访问此方法在内部使用的变量。

您可以通过不使用递归标志将搜索分成更小的部分，并自己处理递归以接收每个目录的集合。

[如果您使用的`FileVisitor`](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)是 Java 7，一个更好的选择是使用[接口来探索文件系统](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)。它有一些回调方法可以让您跟踪进度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:08:26.227

您可以使用 FileUtils IOFileFilter。

```
Collection<File> listFiles = FileUtils.listFiles(new File("."), counter, FileFilterUtils.trueFileFilter()); 
```

*柜台*将在哪里

```
IOFileFilter counter = new IOFileFilter() {

    @Override
    public boolean accept(File arg0, String arg1) {
        countCall();
        return true;
    }

    @Override
    public boolean accept(File arg0) {
        countCall();
        return true;
    }
}; 
```

countCall 是更新进度的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:09:19.500

我想您可以尝试使用执行平台特定的命令，例如将列表命令输出重定向到临时文件并使用 Java File API 读取它。

`ls > temp.txt`

我创建了一个简单的 shell 脚本，它将列出给定索引中的文件。

```
#!/bin/bash

RANGE_UP=$2
RANGE_BOT=$1

CURRENT_CNTR=0

FILENAME=._m_ls

ls -w 1 > $FILENAME
while read line
do
    if [ $CURRENT_CNTR -le $RANGE_UP -a $CURRENT_CNTR -gt $RANGE_BOT ]; then
    printf $line"\n"
    fi
    CURRENT_CNTR=`expr $CURRENT_CNTR + 1`
done < $FILENAME 
```

您现在可以执行类似的操作`./ls_range.sh 10000 30000 >temp.txt`，然后使用`BufferedReader`不同的线程从该文件中读取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T11:47:27.360

您执行此操作的唯一方法（与 java7 或之前建议的拆分工作相反）是编写您自己的代码以在更新回调时搜索文件系统。

我使用了来自 的代码`commons-io`，并对其进行了修改以满足您的需求，显然它需要测试，但它会在找到文件时对其进行计数。

**例子**

```
interface Counter {
    void foundFile(File file);
}

final class FileSearcher {
    public static Collection<File> listFiles(File root, FileFilter filter, Counter counter) {
        Collection<File> files = new ArrayList<File>();
        File[] found = root.listFiles(filter);

        if (found != null) {
            for (int i = 0; i < found.length; i++) {
                if (found[i].isDirectory()) {
                    files.addAll(listFiles(found[i], filter, counter));
                } else {
                    files.add(found[i]);
                    counter.foundFile(found[i]);
                }
            }
        }

        return files;
    }
} 
```

然后像这样使用它：

```
final AtomicInteger inte = new AtomicInteger(0);
FileSearcher.listFiles(new File("C:/"), null, new Counter() {
    @Override
    public void foundFile(File file) {
        System.out.println("found file number " + inte.addAndGet(1));
    }
}); 
```

# css - 具有 70% 不透明度的 Div 包含具有 100% 不透明度的图像

> ID：12246072
> 
> 赞同：1
> 
> 时间：2012-09-03T10:28:21.127
> 
> 标签：css, opacity

我有一个`div`元素`opacity: 0.7;`。我设置它是因为我希望它里面的所有文本都是不透明的。在这里面`div`我还想展示一些图像，但我希望这些图像的不透明度为 100%，而不是 0.7。我尝试通过设置`opacity: 1;`图像，但无论如何它们都显示为不透明。

我怎么解决这个问题？我四处寻找，但找不到任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:31:35.123

具有透明度 ( `opacity`< 1) 的元素的子元素的透明度不能低于其父元素。所以`opacity: 1`只会使子元素与其父元素一样透明，但不再如此。

要获得部分透明的文本，您可以改为使用：

```
div {
    color: rgba(0,0,0,0.7);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7twXW/)。

我认为支持该`opacity`属性的相同浏览器都支持它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:32:01.923

您可以`rgba(0,0,0,0.7);`在 CSS 中为背景和文本颜色使用颜色值：

```
div
{
    background: rgba(100,12,100,0.7);
    color: rgba(0,0,0,0.7);
}​ 
```

[您可以在此处](http://www.javascripter.net/faq/hextorgb.htm)将#hex 颜色代码转换为 rgb 。

[http://jsfiddle.net/Kyle_Sevenoaks/FQKXv/](http://jsfiddle.net/Kyle_Sevenoaks/FQKXv/)

* * *

对于 IE

您可以使用他们的`filter`代码：

```
div 
{ 
       background:transparent;
       filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#55992200,endColorstr=#55992200); 
       zoom: 1;
} 
```

十六进制值有 8 位而不是 6。最后两位是 alpha 值。调整口味。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:34:13.400

使用 RGBA 代码，它是一个 css3 属性和旧浏览器，如 ie7，ie8 不支持它

```
R= red
G= green
B= blue
A= alpha

div {
   background: rgba(200, 54, 54, 0.5); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:06:42.557

嗨，我提到了可以增加和减少父容器背景的不透明度并且不会影响子容器的属性。很简单，基本上你必须在背景中使用 rgb 颜色和 alpha 来获得不透明度。

**CSS** `background:rgba(0,0,0,0.1);`

或查看演示：- [http://jsfiddle.net/8LFLd/102/](http://jsfiddle.net/8LFLd/102/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T11:31:16.880

正如通过数十个问题所说的数百次：

```
.transparent {
    /* Fallback for web browsers that doesn't support RGBa */
    background: rgb(0, 0, 0);
    /* RGBa with 0.6 opacity */
    background: rgba(0, 0, 0, 0.7);
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#70000000, endColorstr=#99000000);
    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#70000000, endColorstr=#99000000)";
} 
```

这是跨浏览器的解决方案。

# codeigniter - Codeigniter 2 和 IIS 7 错误 500

> ID：12246073
> 
> 赞同：2
> 
> 时间：2012-09-03T10:28:22.620
> 
> 标签：codeigniter, iis-7

我正在尝试将站点从 apache/linux 移动到具有 Windows 和 IIS7 的服务器。不幸的是，当我尝试进入它给我的网站时

> 500内部服务器错误。您要查找的资源有问题，无法显示。

我在代码中找到了它挂起的那一行，它在 /system/core/CodeIgniter.php 中的第 359 行

> call_user_func_array(array(&$CI, $method), array_slice($URI->rsegments, 2));

知道在哪里可以解决这个问题吗？

我应该提到一个事实，相同的 codeigniter 版本，但没有自定义代码，工作正常。所以问题出在我的代码中，但 IIS 没有显示任何错误，此时我无权访问任何错误日志（如果 IIS 上有这样的东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:37:23.317

你的 PHP 版本是多少？尝试更改 index.php 中的相关行（我认为是 58）：

`error_reporting(-1);`

**至：**

`error_reporting(E_ALL & ~E_DEPRECATED);`

在 PHP 5.3 中，“Call-time pass-by-reference 已被弃用”。`&$CI`如果没有 PHP 抛出上述错误，您将无法再使用 & like this () 将变量传递给函数。

将错误报告设置为忽略它应该对其进行排序。

# jquery - 小胡子包括模板

> ID：12246074
> 
> 赞同：0
> 
> 时间：2012-09-03T10:28:32.713
> 
> 标签：jquery, html, mustache

我是 Mustache 的新手，我正在开发一个已经在使用它的网站。我在这个站点的一个文件夹中有一组 Mustache 模板。在主 html 中使用 Sekizai 标记调用它们，如下所示：

```
<html>
<head>...</head>
...
<body>

    {% block body_content %}{% endblock %}

    {% mustachejs "dashboard_module" %}
    {% mustachejs "dashboard_add_module" %}
    {% mustachejs "dashboard_empty_module" %}
    {% mustachejs "login_popup" %}
    {% mustachejs "add_account_types_popup" %}
    {% mustachejs "add_account_manual_popup" %}
    {% mustachejs "add_account_success_popup" %}
    {% mustachejs "chart_linearprogress" %}
    {% mustachejs "adviser_popover" %}

        {% mustachejs "add_event_popup" %}

</body>
</html> 
```

这会产生如下脚本标签：

```
<script>Mustache.TEMPLATES=Mustache.TEMPLATES||
{};Mustache.TEMPLATES['add_event_popup']='<div id="AddAccountsPopup" class="add-event-popup">\n
<div class="addAccountsContainer">\n ... </script> 
```

现在在另一个 js 文件中，我想在点击事件中显示这些模板之一，例如：

```
function my func(){
            var evnt_btn = $('.add-evnt-btn');
            var template;
            // get mustache template
        template = $( Mustache.render( 'add_event_popup' ));

            evnt_btn.click(function(){

                template.show();
            });
} 
```

myfunc() 中的内容当然不起作用！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:46:02.227

找到了：

```
var template = Mustache.template('add_event_popup').render(null); 
```

# php - 如何在 netbeans IDE 输出窗口中显示 PHP 输出，而不是在 Web 浏览器中

> ID：12246080
> 
> 赞同：8
> 
> 时间：2012-09-03T10:28:42.430
> 
> 标签：php, netbeans

我想在 netbeans 中运行 PHP 文件或代码，并在输出控制台中显示输出，就像在 zend 框架 F5 中一样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-14T20:07:19.920

打开您要使用的文件。在 netbeans 窗口左上角的项目选项卡上右键单击项目名称。选择设置配置 > 自定义，单击运行配置。从运行方式下拉菜单中选择脚本（在命令行中运行）

从选项窗口中选择 php 选项卡。设置 php 5 解释器的位置并激活输出窗口/编辑器复选框。

# javascript - Infowindow googlemaps 点击事件给出错误

> ID：12246084
> 
> 赞同：0
> 
> 时间：2012-09-03T10:28:53.363
> 
> 标签：javascript, sencha-touch-2, sencha-architect

当我将信息窗口添加到我的标记时，我遇到了一个问题。虽然它们看起来都很好，如果我点击它们，窗口就会出现，我似乎遇到了一个错误，我无法弄清楚它想要什么。

问题出在我单击标记时会出现包含所有信息的窗口。我在 main.js 中得到一个：“Uncaught TypeError: Object [object Object] has no method 'N'”错误，这是由 Sencha Architect 本身生成的。

但是它显示信息，我仍然可以打开多个屏幕，但是关闭屏幕不起作用，这当然是我想要的，因为如果我无法关闭它们，我看不出为什么 150 个不同的标记都应该显示内容屏幕的原因。

我的创建标记函数代码如下（请注意，他在循环中运行以创建 150 个标记）

```
var infoWindow;

// Creating a marker
var title = data.stembureau_2;
var yay = map.getMap();
var icon = 'markers/SGA.png';
var gpa = data.gpa;

if (gpa == 'Ja'){
     icon = 'markers/GPA.png';
}

var marker = new google.maps.Marker({
     position: new google.maps.LatLng(data.latitude, data.longitude),
     map:      yay,
     title:    title,
     icon: icon
});

// Creating an InfoWindow object
var content = data.stembureau_1;
infoWindow = new google.maps.InfoWindow({
      content: content
});

// Loading the Infowindow on a click event
google.maps.event.addListener(marker, "click", function() {
    infoWindow.open(map, this);                  
});

// Closing the Infowindow on a click event
closeInfoWindow = function() {
     infoWindow.close();
};
google.maps.event.addListener(map, 'click', closeInfoWindow);

return marker; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:32:39.403

已经修好了，很简单。我之前将 yay 称为地图对象，但我没有。我的小错误我经常过度阅读！无论如何，谢谢。

# mysql - 达到一百万条记录后自动对 MySQL 中的表进行分区

> ID：12246086
> 
> 赞同：0
> 
> 时间：2012-09-03T10:29:07.693
> 
> 标签：mysql, performance, database-design, database-performance

我正在使用一个包含超过 2000 万条记录的表，并且运行查询需要大量时间。我可以有一个定义或声明，说如果序列号达到一百万，请使用名称预定义的命名语法（如 table_name_i）进行分区，其中我不断增加。

表定义如下：

```
Table name - CHIP_DETAILS
Columns - 
  SEQ_NO - INT(10) - Auto Increment
  CHIP_ID - Varchar(16)
  TOKEN - VARCHAR(16)
  CHIP_BLOB (TINY BLOB)
  TOKEN BLOB (TINY BLOB)
  GENERATED_TIMESTAMP - TIMESTAMP
  USER_ID - INT(10) 
```

* * *

```
MYSQL version - MySQL server 5.5.23 
OS - Windows 7 Home Premium - 64 Bit 
RAM - 8 Gigs 
Processor - Intel i5 2.53 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:31:11.107

如果您将表划分为*n 个*^(不同)的表，那么它们中的每一个将只包含*n*分之一的数据，因此您可以期望查询速度最多提高*n*倍。但是对于必须处理所有数据的查询，您需要对这*n 个*表中的每一个进行操作，这意味着您将有*n 个*这样的查询。在最好的情况下，这会让你回到原来的表现。实际上，准备执行查询所需的持续开销将被执行*n*次而不是一次，因此您几乎肯定会降低性能。

 ***数据库引擎通常设计用于很好地处理大量数据，而 2000 万条记录实际上并没有那么多。因此**，手动重新分配数据不太可能有帮助。**相反，您应该检查以确保您有[合适的索引](http://dev.mysql.com/doc/refman/5.6/en/optimization-indexes.html)来仅访问您实际需要访问的数据库的那些部分。该表可能非常大，但只要您只访问其中的一小部分，您的查询仍然会很快。[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.6/en/using-explain.html)查看您认为太慢的查询之一的命令输出，以了解您可能需要其他索引的位置。[重写查询](http://dev.mysql.com/doc/refman/5.6/en/select-optimization.html)，例如更好地利用这些索引，可能也会有所帮助。[优化数据库](http://dev.mysql.com/doc/refman/5.6/en/optimization.html)是一个复杂的主题，需要更多地了解您实际尝试做的事情。一个关键信息是读取和写入之间的比率。

正如我在上面的评论中所写的那样，只有当您可以将不同的部分放在不同的硬盘上时，拆分表才有意义，以便可以并行访问它们。在这种情况下，您将需要探索[MySQL 分区功能](http://dev.mysql.com/doc/refman/5.6/en/partitioning.html)，以便让 MySQL 以最大限度地使用并行访问的方式进行拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:16:00.817

应该通过列值对表进行分区，例如日期。如果您将一个月的数据放入每个分区，一个仅涵盖 2 个月数据的查询（这需要在查询的过滤器中明确说明），则优化器只需包含 2 个分区即可提供结果。除非您对数据中的列进行分区（例如月份），并使用任意非基于数据的分区键（如 row_id），否则优化器将如何知道它需要回答查询的数据位于哪些分区中？它必须引用所有分区，然后将所有数据缝合在一起 - 使查询比不分区时更慢。***

# android - 无法从资产文件夹复制数据库

> ID：12246092
> 
> 赞同：0
> 
> 时间：2012-09-03T10:29:40.873
> 
> 标签：android, sqlite

我正在尝试从我的应用程序的资产文件夹中复制数据库。代码在 Android 2.1/2.3 上完美运行，但是当我在 Android 2.2 设备上执行相同的代码时，它会抛出以下异常：

```
09-03 15:54:09.762: I/System.out(610): File Created successfully
09-03 15:54:09.762: D/asset(610): Data exceeds UNCOMPRESS_DATA_MAX (4640768 vs 1048576)
09-03 15:54:09.762: W/System.err(610): java.io.IOException
09-03 15:54:09.782: W/System.err(610):  at android.content.res.AssetManager.readAsset(Native Method)
09-03 15:54:09.782: W/System.err(610):  at android.content.res.AssetManager.access$700(AssetManager.java:36)
09-03 15:54:09.862: D/dalvikvm(610): GC_FOR_MALLOC freed 2198 objects / 260688 bytes in 71ms
09-03 15:54:09.862: W/System.err(610):  at android.content.res.AssetManager$AssetInputStream.read(AssetManager.java:571)
09-03 15:54:09.862: W/System.err(610):  at com.emobi.metro.Help.createDatabase(Help.java:39)
09-03 15:54:09.862: W/System.err(610):  at com.emobi.metro.Help.<init>(Help.java:22)
09-03 15:54:09.862: W/System.err(610):  at com.emobi.metro.Fair.onCreate(Fair.java:41)
09-03 15:54:09.862: W/System.err(610):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-03 15:54:09.862: W/System.err(610):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-03 15:54:09.862: W/System.err(610):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-03 15:54:09.862: W/System.err(610):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-03 15:54:09.862: W/System.err(610):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-03 15:54:09.862: W/System.err(610):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-03 15:54:09.862: W/System.err(610):  at android.os.Looper.loop(Looper.java:123)
09-03 15:54:09.862: W/System.err(610):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-03 15:54:09.862: W/System.err(610):  at java.lang.reflect.Method.invokeNative(Native Method)
09-03 15:54:09.862: W/System.err(610):  at java.lang.reflect.Method.invoke(Method.java:521)
09-03 15:54:09.862: W/System.err(610):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-03 15:54:09.862: W/System.err(610):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-03 15:54:09.862: W/System.err(610):  at dalvik.system.NativeStart.main(Native Method) 
```

以下函数用于从资产中复制数据库：

```
private void createDatabase() {
    File DbFile = new File(
            "data/data/com.emobi.metro/databases/mymetro");
    if (DbFile.exists()) {
        System.out.println("file already exist ,No need to Create");
    } else {
        try {
            DbFile.createNewFile();
            System.out.println("File Created successfully");
            InputStream is = context.getAssets().open(databasename);
            FileOutputStream fos = new FileOutputStream(DbFile);
            byte[] buffer = new byte[1024];
            int length = 0;
            while ((length = is.read(buffer)) > 0) {
                fos.write(buffer, 0, length);
            }
            System.out.println("File succesfully placed on sdcard");
            // Close the streams
            fos.flush();
            fos.close();
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

是的，我也试过了，但后来我得到了以下异常 `09-03 16:14:26.652: E/AndroidRuntime(2165): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.emobi.metro/com.emobi.metro.Fair}: android.database.sqlite.SQLiteException: no such table: fair: , while compiling: select stations from fair`

这在数据库中可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:32:14.353

在网上可以找到许多可能的解决方案，这里是关于 stackoverflow 的一个很好的讨论：[我收到这个错误：数据超过 android 2.2 上的 UNCOMPRESS_DATA_MAX 但不是 2.3](https://stackoverflow.com/questions/5789177/i-get-this-error-data-exceeds-uncompress-data-max-on-android-2-2-but-not-on-2-3)

这似乎与android压缩1 mb以上的文件有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:21:54.500

您的数据超过 1 mb 以上的大小 在这种情况下，只需将您的数据库名称重命名为 dbname.mp3

```
private void copyDataBase() throws IOException {

        try {
            // Open your local db as the input stream
            InputStream myInput = context.getAssets().open("databases/" + DB_NAME + ".mp3");

            // Path to the just created empty db
            String outFileName = DB_PATH + DB_NAME;

            OutputStream myOutput = new FileOutputStream(outFileName);

            // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }

            // Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();
        } catch (Exception e) {

            Log.e("Error in copy DB", e.toString());

        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T23:45:49.833

真正用winzip压缩数据库并将压缩文件放在资产文件夹中，在运行时解压缩并将其复制到数据库文件夹。

# vb.net - 统计和记录网络活跃用户

> ID：12246093
> 
> 赞同：1
> 
> 时间：2012-09-03T10:29:46.553
> 
> 标签：vb.net

我想提供我的程序的网络版本，该版本将根据他们的许可证限制用户数量。一般来说，我会在服务器上安装一个 dll，它会跟踪活动用户的数量，一旦达到活动用户数量的许可限制，就会停止。我不太了解网络的运作方式，但我假设 exe 位于服务器/共享驱动器上，并且用户在他们的 PC 上有一个链接。单击该链接将启动调用 dll 的 exe，该 dll 记录 PC 的网络名称，将其记录（到文件？）并增加活动用户的数量。一旦用户关闭程序，活动用户的数量就会减少。我的问题是；

这可行吗？

服务器上的 dll 如何获取用户的 PC 名称？

记录 PC 名称和活跃用户数量的最有效方法是什么？

抱歉，如果这看起来像一个漫谈，但我希望得到有关该方法哲学的反馈（可能有更好的方法..）以及如何实现这一点的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:36:28.583

您应该考虑**网络许可证管理器模型**。
除非获得许可证管理器的批准，否则应用程序将不会启动（许可证管理器位置是应用程序配置的一部分）

许可证管理器会向它的所有客户端发送一个“keep alive heartbit”，这样它就会知道一个客户端何时关闭。
它可以强制并发和您想要的任何其他组合键。无需仅通过 IP/主机名注册。

***编辑：***
**以下[链接](http://installkey.codeplex.com/)**将带您到一个开源产品，您可以在应用程序中使用它来管理许可问题。
使用开源组件可以为您节省大量时间和金钱，并帮助您交付更成熟的产品。

# printing - 引导打印宽度

> ID：12246096
> 
> 赞同：22
> 
> 时间：2012-09-03T10:29:54.353
> 
> 标签：printing, twitter-bootstrap, width

我在应用程序中使用引导程序，正如您在打印浏览器（左侧）时所看到的（下图）在打印（右）时使用的非常小的宽度，因此响应式布局将所有正确的站点元素移动到左侧下方那些和印刷版本不适合一页。

您知道如何强制浏览器保持正确的宽度吗？

谢谢，

雷莫

![有效的 XHTML](../Images/0da4660ebf6df34da45f83fd97ec6d4f.png).

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-03T15:42:51.930

我有一个非常相似的问题。确保仅为解决它启用[响应式 css 。](http://twitter.github.com/bootstrap/scaffolding.html#responsive)`media="screen"`

```
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet" media="screen"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-14T07:31:09.970

对于 Bootstrap 3，这解决了我的问题：

```
@media print {
  .container {
    width:100%;
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T10:19:36.470

摆脱响应式风格就是答案！多谢 ！

我正在使用 rails twitter bootstrap，它重新编译了较少的源，所以只需一点说明它也可以这样工作（bootstrap_and_overrides.css.less 的第一行）：

```
@import "twitter/bootstrap/bootstrap.less";
@media screen {
    @import "twitter/bootstrap/responsive.less";
} 
```

哎呀：编辑，它在开发中工作正常，但在编译生产时会带来错误......必须为屏幕和打印版本构建 2 个不同的 bootstrap_and_overrides（寻找更清洁的解决方案）

# workflow - 在 liferay 中使用 aperte 工作流时动态定义受让人

> ID：12246097
> 
> 赞同：0
> 
> 时间：2012-09-03T10:29:58.553
> 
> 标签：workflow, liferay

我在 liferay 6.1 中使用 aperte 工作流程。我选择了 aperte，因为它提供了与工作流任务的自定义小部件链接，因此我可以在每个步骤中为用户提供自定义 ui 表单。

是否存在动态分配一个任务的受让人的任何方式（显而易见的方法是将受让人设置为liferay角色，但Java类决定任务的受让人更有效）。

是否可以将所有 activiti 工作流标签嵌入到 aperte 流中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T18:52:15.483

是的，您可以通过在 vaadin 小部件 java 类的流程实例中设置一个简单的属性来实现这一点。例如，

```
ProcessInstance pi =task.getProcessInstance ();
pi.setSimpleAttribute ("selectedUser", "<liferay_screenname>"); 
```

现在在 AperteModeler 中，选择任务并转到步骤编辑器。转到“分配”选项卡，将受让人字段值输入为 {selectedUser}

# syntax - VHDL - 与总线上的特定端口接口

> ID：12246099
> 
> 赞同：1
> 
> 时间：2012-09-03T10:30:14.707
> 
> 标签：syntax, vhdl

我有一辆公共汽车：

```
 A(7 downto 0) 
```

我正在创建一个在 7、6 和 0 上与其接口的组件，有没有办法让我创建一个

```
 std_logic_vector(7,6,0)? 
```

只是为了与总线 A() 上的引脚保持一致？我确定我可以做类似的事情：

```
 std_logic_vector(2 downto 0) -- or maybe even
    ASeven, Asix, Azero : in std_logic; 
```

并相应地分配引脚，但如果我可以创建一个向量，它会更好地参考等（我认为）。

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:01:09.293

你不能。要么制作一个信号 x(7 downto 0) 并忽略备用信号（无论如何编译器/合成器都会这样做），或者你可以在你的端口映射中使用适当的分配之类的 东西。一般来说，使用第一个变体，因为它更一致。
`port map(
myoutport(0) => aZero,
...`

# wordpress - WP 自定义帖子类型 - 将页面设置为父页面

> ID：12246100
> 
> 赞同：0
> 
> 时间：2012-09-03T10:30:18.757
> 
> 标签：wordpress

我的设置如下：
- 称为“客户”的自定义帖子类型
- 2 级导航（单独的，第二级仅显示当前页面是否有父/子）
- 称为客户的页面
- 客户帖子具有自定义模板（单-客户端.php)

我想让任何“客户”发布客户页面的子页面/子页面，以便导航在客户页面上正确显示（它会自动列出子页面）并且很容易添加新客户。

我找到了几个脚本，但没有一个完全符合我的要求。

这是我的子导航代码的主要部分：

```
<nav id='content_clients_navig' class='navig_general'>
    <ul>
        <?php
            global $post;

            //determine which navig should be displayed
            //if post has parent, display parent navig
            //else display the current post's navig
            $navig_display = ($post->post_parent) ? $post->post_parent : $post->ID;

            $menu_args = array(
                'child_of' => $navig_display,
                'title_li' => ''
            );
            wp_list_pages( $menu_args );
        ?>
    </ul>
</nav> 
```

我通过在我的模板文件中插入这段代码来调用它：

```
<?php if (has_subnavig()) get_template_part( 'part', 'subnavig' ); ?> 
```

这是 has_subnavig：

```
function has_subnavig()
    {
        global $post;
        if( is_page() && $post->post_parent){
            return true;
        }else{
          $children = wp_list_pages("title_li=&child_of=".$post->ID."&echo=0");
        };
        if($children){
          return true;
        }else{
          return false;
        };
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:26:21.777

首先，您必须更改`has_subnavig`为以下内容，以便在查看父级或客户端帖子时也显示子导航：

```
function has_subnavig()
{
    global $post;

    if ( is_page() && $post->post_parent ) {
        // post is child post
        return true;
    } else if ( $post->post_type == 'clients' || $post->post_name == 'clients' ) {
        // post is clients parent or clients post type
        return true;
    } else {
        // determine if post has children
        $children = wp_list_pages("title_li=&child_of=".$post->ID."&echo=0");

        if ( $children ) {
            return true;
        } else {
            return false;
        };
    };
} 
```

其次，重要的是要知道子导航应该是客户列表还是标准子页面列表。这就是为什么我们要问，如果 the`post_type`或 the`post_name`是`clients`。我的子导航代码的主要部分可能是这样的：

```
global $post;

// determine which navig should be displayed
if ( $post->post_type == 'clients' || $post->post_name == 'clients' ) {
    // display clients navig if page is clients parent
    // or post_type is clients

    $menu_args = array(
        'child_of' => 0,
        'post_type' => 'clients',
        'post_status' => 'publish' 
    );
} else {
    // if post has parent, display parent navig
    // else display the current post's navig
    $navig_display = ($post->post_parent) ? $post->post_parent : $post->ID;

    $menu_args = array(
        'child_of' => $navig_display,
        'title_li' => ''
    );
}

wp_list_pages( $menu_args ); 
```

# php - PHP：沿标头位置传递消息

> ID：12246102
> 
> 赞同：1
> 
> 时间：2012-09-03T10:30:32.317
> 
> 标签：php

一旦用户输入了一些错误的数据，我想在页面上显示一条消息

到目前为止，我正在传递一条消息，例如

```
 $Message = "Some error occured please try after some time ";
    header("Location:index.php?Message={$Message}"); 
```

我知道这条消息只会显示在地址栏中，所以我应该怎么做才能让这条消息显示在 index.php 页面上而不是这个

```
http://localhost/UI/index.php?Message=Someerror occured please try after some time 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T10:31:42.657

利用`urlencode()`

```
$Message = urlencode("Some error occured please try after some time ");
header("Location:index.php?Message=".$Message);
die; 
```

和上`index.php`：

```
if(isset($_GET['Message'])){
    echo $_GET['Message'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:33:05.303

关于什么：

```
if( !empty( $_REQUEST['Message'] ) )
{
    echo sprintf( '<p>%s</p>', $_REQUEST['Message'] );
} 
```

？？？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-28T14:03:49.947

我知道这已经在几年前得到了回答，我遇到了类似的问题，所以我找到了这个答案，但这不会更好。我在我的应用程序中使用了这段代码，带有不同的消息和`$_GET`变量：

```
 header("Location:index.php?msg"); 
```

然后开始`index.php`

```
 if(isset($_GET['msg']))
    {
        $Message = "Some error occured please try after some time";
        echo $Message;
    } 
```

这样 URL 就更干净了，并且`header`代码被用作`if`循环的触发器。

# maven-2 - mvn install 完成时的自定义消息？

> ID：12246108
> 
> 赞同：0
> 
> 时间：2012-09-03T10:30:49.957
> 
> 标签：maven-2, maven-3, maven-install-plugin

当 mvn install 完成时，我想在控制台上显示一串字符（即用户可能会看到的东西）。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:37:36.213

为此，只需尝试绑定到正确生命周期阶段的[maven-echo-plugin ：](https://github.com/khmarbaise/Maven-Echo-Plugin)

```
<plugin>
  <groupId>com.soebes.maven.plugins</groupId>
  <artifactId>maven-echo-plugin</artifactId>
  <version>0.1</version>
  <executions>
    <execution>
      <phase>deploy</phase>
      <goals>
        <goal>echo</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <echos>
      <echo>+----------------------------------------------------------+</echo>
      <echo>!   DON'T FORGET TO SUBSCRIBE TO DEVELOPERS MAILING LIST   !</echo>
      <echo>+----------------------------------------------------------+</echo>
    </echos>
  </configuration>
</plugin> 
```

# iphone - UIActivityIndi cator 不是动画

> ID：12246109
> 
> 赞同：2
> 
> 时间：2012-09-03T10:30:55.923
> 
> 标签：iphone, xcode, uiactivityindicatorview

我在 iphone 应用程序中使用活动指示器，但问题是当我写行时

```
 [indicator startAnimating]; 
```

在 viewDidLoad 中，它会产生动画，但是当我在按钮代码中写下同一行时，我会移至下一个屏幕，然后它不会产生动画

```
-(IBAction)nextButtonClicked{
if ([professionLabel.text isEqualToString:@"Profession"]) {
    errorLabel.text=@"Please Select the Highliteg Answers";
    Q1.textColor=[UIColor redColor];
}

if ([workLabel.text isEqualToString:@"Work"]) {        
    errorLabel.text=@"Please Select the Highlight Answers";
    Q2.textColor=[UIColor redColor];
} 

 if([yearLabel.text isEqualToString:@"Year"]){ 
    errorLabel.text=@"Please Select the Highliteg Answers";
    Q3.textColor=[UIColor redColor];
} 

else{
    errorLabel.text=@"";
    Q1.textColor=[UIColor ];
    Q2.textColor=[UIColor];
    Q3.textColor=[UIColor];

   [indicator startAnimating];
    [self submitSurveyAnswers];

    [self submitSurveyAnswersOne];
    [self submitSurveyAnswersTwo];

      OnlineViewController*targetController=[[OnlineViewController alloc]init];
targetController.mynumber=mynumber;
[self.navigationController pushViewController:targetController animated:YES];
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:37:56.847

编辑：从[ActivityIndi ​​cator 下载 2 类](https://github.com/safecase123/ActivityIndicator)

```
Add this class file in your project. Also add QuartzCore framweork in project.

#import "SHKActivityIndicator.h" //in your .pch file of project 
```

下面给出了如何使用：显示指标在下方的使用。

```
 [NSThread detachNewThreadSelector:@selector(startActivity:) toTarget:self 
```

withObject:nil];

```
-(void)startActivity:(id)sender // add this method
{ 
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
  [[SHKActivityIndicator currentIndicator] displayActivity:@"Cropping Image"];
  [pool release];
} 
```

像这样隐藏任何你想要的地方：

```
[[SHKActivityIndicator currentIndicator] hide]; 
```

* * *

通过替换 [indicator startAnimating]; 在按钮的事件中添加这行代码

```
[NSThread detachNewThreadSelector:@selector(startActivity:) toTarget:self withObject:nil]; 
```

添加以下将被调用的方法：

```
-(void)startActivity:(id)sender
{
   NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
   [indicator startAnimating];
   [pool release];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:44:43.717

如果将此行添加到`-(IBAction)`按钮，则它不会显示活动指示器动画，因为按钮操作是立即的，并且下一个视图将几乎立即显示。因此，要么您以`UIButton`编程方式构建并使用该`-(void)`函数作为`UIButton`. 在这种情况下，`[indicator startAnimating];`将调用按钮方法的其余部分。

否则，您可以简单地延迟`-(IBAction)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:49:59.350

我猜这些方法是`NSURLConnection`基于的。数据发送部分可能会`synchronous`暂停 main `UIThread`，这就是 activityIndi​​cator 没有动画的原因。

更好的方法是将数据发布部分移动到另一个线程。替换以下内容：

```
[indicator startAnimating];
[self submitSurveyAnswers];

[self submitSurveyAnswersOne];
[self submitSurveyAnswersTwo];

OnlineViewController*targetController=[[OnlineViewController alloc]init];
targetController.mynumber=mynumber;
[self.navigationController pushViewController:targetController animated:YES]; 
```

和：

```
[indicator startAnimating];
[NSThread detachNewThreadSelector:@selector(startPosting:) toTarget:self withObject:nil]; 
```

并创建两个方法：

```
-(void)startPosting{
  [self submitSurveyAnswers];
  [self submitSurveyAnswersOne];
  [self submitSurveyAnswersTwo];
} 
```

&

```
-(void)dataSubmissionComplete{
  OnlineViewController*targetController=[[OnlineViewController alloc]init];
  targetController.mynumber=mynumber;
  [self.navigationController pushViewController:targetController animated:YES];
} 
```

然后`dataSubmissionComplete`在主线程上调用该方法，当您的数据已成功提交时：

```
[self performSelectorOnMainThread:@selector(dataSubmissionComplete) withObject:nil waitUntilDone:YES]; 
```

在 UI 线程为活动指示器设置动画同时在后台的另一个线程上获取/发布数据的情况下，通常会遵循此过程。

**编辑 -**如果您想要自定义活动指示器，请查看[此](http://www.dejal.com/blog/opensource)、[此](http://cocoawithlove.com/2009/04/showing-message-over-iphone-keyboard.html)和[此](https://github.com/nachiket-webonise/iPhone-Custom-Activity-Indicator)开源活动指示器文件和教程。

# sql-server - 无法在 Visual Studio 中查看存储过程主体

> ID：12246110
> 
> 赞同：-2
> 
> 时间：2012-09-03T10:30:58.143
> 
> 标签：sql-server, visual-studio-2010, stored-procedures

使用 Visual Studio 2010 中的服务器资源管理器浏览和查询 SQL Server - 数据库有一些存储过程，但我找不到在 Visual Studio 中查看存储过程主体的方法。

从[这篇 MSDN 文章中](http://msdn.microsoft.com/en-us/library/ms345443.aspx)，我尝试了一些提示，但我不断得到：

> 不支持 EXEC SQL 构造或语句

有没有办法从 Visual Studio 做到这一点？我最终通过安装 SQL Management Studio 解决了我的问题；但我希望有一种方法可以在 Visual Studio 中做到这一点。

更新：

*   我没有使用项目——也就是说，我不在 Visual Studio 中的活动项目中；这是一个浏览数据库对象并从服务器资源管理器窗口执行一些查询的简单案例。
*   数据库服务器在服务器资源管理器树中显示为`SQLEDB.SERVER-NAME.DBNAME`
*   Visual Studio 2010 已经应用了 SP1
*   当我通过 SQL Management Studio 连接时，相同的凭据允许我查看存储过程的主体。
*   SQL Server 版本是`SQL Server 8.0.2055 (8.0 SP4)`
*   Workstation 正在运行 Windows XP Professional（因此无法安装[SQL Server Data Tools ）](http://msdn.microsoft.com/en-us/data/tools.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:33:58.380

*   打开`Server Explorer`
*   深入了解您的程序。
*   右键点击`Open`

[http://msdn.microsoft.com/en-us/library/saezsty3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/saezsty3(v=vs.100).aspx)

或者，如果您安装了Sql [Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)

*   打开`SQL Server Object Explorer`从视图菜单中
*   深入了解您的程序。
*   右键点击`View Code`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-21T20:19:54.937

我在 Visual Studio（在我的例子中是 2013 年）中，使用 SQL Server（2005 或更高版本）。我选择：

```
Tools | SQL Server > New Query... 
```

并连接到我感兴趣的数据库服务器。连接后，我可以输入：

```
sp_helptext MyStoredProcedureName 
```

当我执行该命令时，它会返回给定存储过程的主体。

同样，如果我想查看输入和输出参数，我可以执行：

```
sp_help MyStoredProcedureName 
```

编辑：您提到使用服务器资源管理器，但您的问题主题表明您想要在 Visual Studio 中执行此操作。我经常在 Visual Studio 的查询窗口中工作，而从未打开服务器资源管理器。我觉得它很笨重，更喜欢一个简单的查询窗口来进行我需要的更简单的编辑和查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T13:09:01.530

确保您已在连接的属性中选择了部署存储过程的数据库。

在“服务器资源管理器”窗口中编辑与数据库对应的“数据连接”，并确保在“连接或输入数据库名称”部分中选择了数据库；必须选择“选择或输入数据库名称”选项，并且必须在下拉列表中选择数据库名称。

# javascript - HTML5 Canvas 支持和 Android Webview

> ID：12246113
> 
> 赞同：5
> 
> 时间：2012-09-03T10:31:18.050
> 
> 标签：javascript, android, html, canvas, webview

我需要在我的应用程序中绘制图表。为此，我使用 RGraph（[http://www.rgraph.net/](http://www.rgraph.net/)）；它允许使用 Javascript 绘制交互式图表。我将我的 javascript 代码放在应用程序资产中的 HTML 文档中，然后从 ViewPager 中的片段中调用它。

这是 HTML 和 javascript 代码：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<html>
<head>    
    <script src="./libraries/RGraph.common.core.js" ></script>
    <script src="./libraries/RGraph.common.dynamic.js" ></script>
    <script src="./libraries/RGraph.common.tooltips.js" ></script>
    <script src="./libraries/RGraph.common.effects.js" ></script>
    <script src="./libraries/RGraph.pie.js" ></script>
    </head>
<body background="../transparent.png"> 

    <canvas id="cvs" width="420" height="400">[No canvas support]</canvas>

    <script>

        function CreateGradient (obj, color)
        {
            return RGraph.RadialGradient(obj, 200, 150, 95, 200, 150, 125, color, color)
        }

        function isCanvasSupported(){
            var test_canvas = document.createElement("canvas");
            var canvascheck=(test_canvas.getContext) ? true : false ;           
          return canvascheck;
        }
        window.onload = function ()
        {
            if(isCanvasSupported)
               DrawPieChart();
            else
               document.write("hheheheheh");
        }

        function DrawPieChart ()
        {
                    var canvas = document.getElementById('cvs');
            var ctx = canvas.getContext('2d');
            var pie = new RGraph.Pie('cvs', [2,3,6,7,82]);
            pie.Set('chart.colors', [
                                     CreateGradient(pie, '#580600'),
                                     CreateGradient(pie, '#AEAEAE'),
                                     CreateGradient(pie, '#860100'),
                                     CreateGradient(pie, '#C7C7C7'),
                                     CreateGradient(pie, '#A70000')
                                    ]);
            pie.Set('chart.labels.sticks', true);
            pie.Set('chart.labels.sticks.length', 5);
            pie.Set('chart.tooltips', ['Autres',
            'Italie',
            'Royaume-Uni',
            'Espagne',
            'France']);
            pie.Set('chart.labels', ['2%','3%','6%','7%','82%']);
            pie.Set('chart.radius', 150);
            pie.Set('chart.shadow', true);
            pie.Set('chart.shadow.offsetx', 0);
            pie.Set('chart.shadow.offsety', 0);
            pie.Set('chart.shadow.blur', 25);
            pie.Draw();        
        }
    </script>
</body>
</html> 
```

这是一个片段的代码：

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        mWebView = (WebView)getActivity().findViewById(R.id.group_fragment_one_webView);
        mWebView.setFocusable(false);
        mWebView.loadUrl("file:///android_asset/graphs/graph1.html");
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setDefaultZoom(ZoomDensity.FAR);
        mWebView.getSettings().setDefaultFontSize(24);
        mWebView.getSettings().setBuiltInZoomControls(false);
        mWebView.setBackgroundColor(0);
        mWebView.setHorizontalScrollBarEnabled(false);
        mWebView.setVerticalScrollBarEnabled(false);
        mWebView.getSettings().setSupportZoom(false);
        mWebView.getSettings().setRenderPriority(RenderPriority.HIGH);

        String TAG = "HTML 5";
        WebSettings ws = mWebView.getSettings();
        ws.setJavaScriptEnabled(true);
        ws.setAllowFileAccess(true);

        if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.ECLAIR) {
            try {
                Method m1 = WebSettings.class.getMethod("setDomStorageEnabled", new Class[]{Boolean.TYPE});
                m1.invoke(ws, Boolean.TRUE);

                Method m2 = WebSettings.class.getMethod("setDatabaseEnabled", new Class[]{Boolean.TYPE});
                m2.invoke(ws, Boolean.TRUE);

                Method m3 = WebSettings.class.getMethod("setDatabasePath", new Class[]{String.class});
                m3.invoke(ws, "/data/data/" + getActivity().getApplicationContext().getPackageName() + "/databases/");

                Method m4 = WebSettings.class.getMethod("setAppCacheMaxSize", new Class[]{Long.TYPE});
                m4.invoke(ws, 1024*1024*8);

                Method m5 = WebSettings.class.getMethod("setAppCachePath", new Class[]{String.class});
                m5.invoke(ws, "/data/data/" + getActivity().getApplicationContext().getPackageName() + "/cache/");

                Method m6 = WebSettings.class.getMethod("setAppCacheEnabled", new Class[]{Boolean.TYPE});
                m6.invoke(ws, Boolean.TRUE);

                Log.d(TAG, "Enabled HTML5-Features");
            }
            catch (NoSuchMethodException e) {
                Log.e(TAG, "Reflection fail", e);
            }
            catch (InvocationTargetException e) {
                Log.e(TAG, "Reflection fail", e);
            }
            catch (IllegalAccessException e) {
                Log.e(TAG, "Reflection fail", e);
            }

        }

        mTextView1 = (TextView)getActivity().findViewById(R.id.group_fragment_one_textview1);
        mTextView1.setText(getActivity().getResources().getString(R.string.group_fragment_one_text1));
        Spannable spanSize = new SpannableString(mTextView1.getText());
        spanSize.setSpan(new RelativeSizeSpan(2.0f),
                0,
                mTextView1.getText().toString().indexOf("millions"),
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        mTextView1.setText(spanSize);
        Spannable colorSpan = new SpannableString(mTextView1.getText());        
        colorSpan.setSpan(new ForegroundColorSpan(getActivity().getResources().getColor(R.color.red_ribbon)),
                0,
                mTextView1.getText().toString().indexOf("millions"),
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        mTextView1.setText(colorSpan);
        mTextView1.setTypeface(Utils.getTextFont(getActivity().getApplicationContext()));

        mTextView2 = (TextView)getActivity().findViewById(R.id.group_fragment_one_textview2);
        mTextView2.setText(getActivity().getResources().getString(R.string.group_fragment_one_text2));
        spanSize = new SpannableString(mTextView2.getText());
        spanSize.setSpan(new RelativeSizeSpan(2.0f),
                0,
                mTextView2.getText().toString().indexOf("du chiffre"),
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        mTextView2.setText(spanSize);
        colorSpan = new SpannableString(mTextView2.getText());        
        colorSpan.setSpan(new ForegroundColorSpan(getActivity().getResources().getColor(R.color.red_ribbon)),
                0,
                mTextView2.getText().toString().indexOf("du chiffre"),
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        mTextView2.setText(colorSpan);
        mTextView2.setTypeface(Utils.getTextFont(getActivity().getApplicationContext()));

        super.onActivityCreated(savedInstanceState);
    } 
```

它在模拟器和 Eclipse 浏览器上运行良好......但是当我想在智能手机上看到它时，我遇到了 Canvas 的错误。有时图表会正确显示，有时会显示“无画布支持”。在 ViewPager 中，只有片段 n、片段 n-1 和 n+1 被同时实例化。当用户在另一个片段上滚动时，会实例化其他片段。因此，每次用户滚动时，都会加载一个 HTML。有时画布受支持，有时不...

我试图在javascript中获得对画布的支持，但它总是返回支持画布，而事实并非如此......

任何想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:09:39.203

尝试在 onResume() 方法上加载 webview：

```
@Override
public void onResume(){

    mWebView.loadUrl("file:///android_asset/graphs/graph1.html");
    super.onResume();

} 
```

# java - 如何通过 IDE 使用 https 进行浏览？

> ID：12246114
> 
> 赞同：0
> 
> 时间：2012-09-03T10:31:21.743
> 
> 标签：java, tomcat, https, server.xml

当我们**从 IDE 的工具栏运行 Apache Tomcat 时**，我们**无法浏览 https**

![在此处输入图像描述](../Images/011c557fc8b36fd4de34a86d1cc022e9.png)

但是当我们使用**tomcat7.exe**文件运行时，它**可以使用 https 浏览并接受证书。**

在 server.xml 中，我们编写了如下的连接器标记。

```
<Connector 
        clientAuth="true" port="8443" minSpareThreads="5" maxSpareThreads="75"
        enableLookups="true" disableUploadTimeout="true"
        acceptCount="100" maxThreads="200"
        keystorePass="123456"
        scheme="https" secure="true" SSLEnabled="true"
        SSLCertificateFile="C:\Program Files\Apache Software Foundation\Tomcat 7.0\ycassl.cer"
        SSLCertificateKeyFile="C:\Program Files\Apache Software Foundation\Tomcat 7.0\ycassl.key" 
        SSLCACertificateFile="C:\Program Files\Apache Software Foundation\Tomcat 7.0\CertPath.txt"      
        SSLVerifyClient="require" SSLEngine="on" SSLVerifyDepth="2" sslProtocol="TLS"
    /> 
```

这两个有什么问题？请解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:58:20.173

使用eclipse，在workspace/Servers/tomcat v*/server.xml中有一个不同的server.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:53:31.627

您的配置文件的这些行要求用户提供客户端证书：

```
SSLCACertificateFile="CertPath.txt"
SSLVerifyClient="require" SSLEngine="on" SSLVerifyDepth="2" sslProtocol="TLS" 
```

您的 Web 浏览器未向 Web 服务器提供客户端 SSL 证书，因此被拒绝。[您可以按照此处的步骤](http://www.tbs-certificats.com/FAQ/en/installer_certificat_client_google_chrome.html)将 Chrome 配置为提供用户证书。

我只能假设您的可执行文件配置为提供这样的客户端证书？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:53:44.013

您使用相互身份验证

但是您没有在浏览器中安装（或不正确的）证书！

通常在相互验证时，客户端必须将证书安装到 Web 浏览器中。

# php - 有没有办法检测是否使用 PHPExcel 在 windows 或 mac 上生成了 excel 文件？

> ID：12246116
> 
> 赞同：5
> 
> 时间：2012-09-03T10:31:32.010
> 
> 标签：php, phpexcel

我正在使用 PHPExcel 生成一个 xls 模板，用户可以下载并用他想要的数据填充它。众所周知，excel以数字格式保存日期。我正在使用这个函数来转换数据并返回时间戳：

```
public static function excelToTimestamp($excelDateTime, $isMacExcel=false) {
    $myExcelBaseDate = $isMacExcel ? 24107 : 25569; // 1st jan 1904 or 1st jan 1900
    if (!$isMacExcel && $excelDateTime < 60) {
        //  Adjust for the spurious 29-Feb-1900 (Day 60)
        --$myExcelBaseDate;
    }
    // Perform conversion
    if ($excelDateTime >= 1) {
        $timestampDays = $excelDateTime - $myExcelBaseDate;
        $timestamp = round($timestampDays * 86400);
        if (($timestamp <= PHP_INT_MAX) && ($timestamp >= -PHP_INT_MAX)) {
            $timestamp = intval($timestamp);
        }
    } else {
        $hours = round($excelDateTime * 24);
        $mins = round($excelDateTime * 1440) - round($hours * 60);
        $secs = round($excelDateTime * 86400) - round($hours * 3600) - round($mins * 60);
        $timestamp = (integer) gmmktime($hours, $mins, $secs);
    }
    return $timestamp;
} 
```

问题是我必须检测用户导入系统的文件是否使用 excel for mac 或 windows 填充，以便我可以正确设置日期（mac 使用 1904 日历，而 windows 使用 1900）。

**我想知道是否有办法使用 PHPExcel 来检测它。如果没有，我可以让用户用单选按钮通知它，也许......**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:39:27.120

我刚刚解决了这个问题，正如@markBaker 建议的那样，使用 PHPExcel 函数来转换日期和时间，这样做：

```
 foreach ($rowLine as $header => $col) {
        if ($header == self::COLUMN_DATE) {
            //transform the excel date value into a datetime object
            $date = PHPExcel_Shared_Date::ExcelToPHPObject($sheetData[$row][$col]);
            $rowLine[$header] = $date->format('m/d/Y');
        }else if ($header == self::COLUMN_HOUR) {
            //transform the excel time value into a datetime object
            $time = PHPExcel_Shared_Date::ExcelToPHPObject($sheetData[$row][$col]);
            $rowLine[$header] = $time->format('H:i');
        }else{
            $rowLine[$header] = $sheetData[$row][$col];
        }
 } 
```

# c# - ListViewItem 重新绘制时失去背景颜色并且光标位于项目上方

> ID：12246119
> 
> 赞同：1
> 
> 时间：2012-09-03T10:31:36.183
> 
> 标签：c#, winforms, listview

我有一个 listview 控件显然有许多 listviewitems，每当重新绘制控件时，鼠标“悬停”的项目会失去它的背景颜色（即它是白色的）。

一旦再次绘制项目并且光标不在其上，则恢复正确的背景颜色。

有谁知道为什么会发生这种情况以及如何阻止它？

任何帮助，将不胜感激

对此进行扩展并希望提供更多背景信息....

它发生在 Windows 7、.NET 3.5 上（尽管当项目也针对 4.0 时也发生了这种情况）。我的开发计算机上的主题是 Viao Theme 5，但它也发生在我的另一台具有默认 Windows 7 主题的机器上。

列表视图是这样实例化的......

```
 this.PlaylistTrackList.Cursor = System.Windows.Forms.Cursors.Hand;
        this.PlaylistTrackList.Dock = System.Windows.Forms.DockStyle.Fill;
        this.PlaylistTrackList.FullRowSelect = true;
        this.PlaylistTrackList.HeaderStyle = System.Windows.Forms.ColumnHeaderStyle.Nonclickable;
        this.PlaylistTrackList.LabelWrap = false;
        this.PlaylistTrackList.Location = new System.Drawing.Point(4, 4);
        this.PlaylistTrackList.Margin = new System.Windows.Forms.Padding(4);
        this.PlaylistTrackList.MultiSelect = false;
        this.PlaylistTrackList.UseCompatibleStateImageBehavior = false;
        this.PlaylistTrackList.View = System.Windows.Forms.View.Details; 
```

假设有 5 个列表视图项目，A、B、C、D 和 E。如果项目 BC 和 D 的背景颜色属性为红色，则没有选择任何内容，也不会选择任何内容。当列表视图控件由于某种原因被重绘并且光标碰巧在任何项目 BC 或 D 上时，该项目被绘制为白色背景色，而不是应有的红色。但是，一旦鼠标没有再次悬停在该项目上并且其重绘将返回为红色。

无论“真实”背景颜色属性如何，我如何才能停止它总是用白色背景绘制光标所在的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:04:46.693

初始化 ListView 控件如下：

```
 listView1.BackColor = Color.Black;
    listView1.ForeColor = Color.White;
    listView1.Dock = DockStyle.Fill;
    listView1.View = View.Details;
    listView1.FullRowSelect = true; 
```

有关更多详细信息，请查看以下链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.listview.ownerdraw.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.ownerdraw.aspx)

# android - 使用 Android 的 loadUrl 时未调用 PhoneGap ondeviceready

> ID：12246129
> 
> 赞同：0
> 
> 时间：2012-09-03T10:32:01.747
> 
> 标签：android, cordova

`index.html`在 MainAction 中加载。

里面有一个链接`index.html`会去`game.html`。因为我需要`index.html`并且`game.html`都**使用横屏**，所以我不能使用类似`<a href="game.html">`in 的东西`index.html`。否则只会`index.html`使用横屏，`game.html`会使用由设备方向决定的屏幕，这是意料之外的。所以我在 Java 中创建了一个类来控制加载网页：

```
public class JsHelper {
    private MainActivity activity;

    public JsHelper(MainActivity act) {
        activity = act;
    }

    public void goToHtml(String url) {
        activity.loadUrl("file:///android_asset/www/" + url);
    }
} 
```

在`index.html`，我称之为去`game.html`：

```
window.JsHelper.goToHtml("game.html"); 
```

**这是我可以`game.html`使用 Landscape screen**的唯一方法。

但问题来了。

如果`document.addEventListener('deviceready', init, true);`在 中`index.html`，`init()`将被调用一次。

但如果它是 in `game.html`，`init()`将永远不会被调用，即使没有`document.addEventListener('deviceready', init, true);`in `index.html`。

游戏.html：

```
$(document).ready(function() {
    document.addEventListener('deviceready', init, false);
}

function init() {
    alert("init");
} 
```

API 中的东西不起作用。`navigator.accelerometer`将为空。

我想使用`navigator.accelerometer`并确保`game.html`使用风景。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:51:54.793

我看不出你为什么不在 game.html 网站上触发“deviceReady”事件。您只需要添加带有脚本标签的cordova.js，它就会触发。

```
function ondeviceready(){

     //Call Cordova Functions here
} 
```

# android - 在 android 上启动推送通知 GCM

> ID：12246130
> 
> 赞同：1
> 
> 时间：2012-09-03T10:32:12.480
> 
> 标签：android, google-cloud-messaging

我正在尝试为 android 设置简单的推送通知。但它从一开始就消失了。 在我也尝试过[谷歌启动](http://developer.android.com/guide/google/gcm/gs.html)指南之前，我正在关注[本教程](http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm)， 但问题是我无法将我的应用程序注册到我的谷歌服务。我已启用 Google 云消息传递。我的代码是：

```
 try{
    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) {
      GCMRegistrar.register(this, "SENDER ID");
      Log.v("Registration", "new registration");// Note: get the sender id from configuration.
      regId = GCMRegistrar.getRegistrationId(this);
      Log.v("Registration", "Already registered, regId: " + regId);
    } else {             
      Log.v("Registration", "Already registered, regId: " + regId);
    }
    }
    catch(Exception e){
        String a=e.toString();
        Log.v(a,a);
    } 
```

它进行得很好，但没有真正发生，并且在此功能完成后，我的应用程序强制关闭。对于*发件人 ID*，我使用来自 google 的号码。（在链接末尾）。

所以似乎没有错误只是我的应用程序在之后关闭并且没有注册。还有一件更有趣的事情。当我在手机上调试应用程序时，它会继续运行，但是当我在模拟器上启动它时，它会强制关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:36:58.610

终于找到解决方案了：d

问题是我将 GCMIntentService 命名为错误，我将其命名为 GcmIntentService，然后一切都变了：S

所以如果像我这样的另一个傻瓜遇到这个问题，我会发布这个答案......

# objective-c - 在目标 c 中创建 json 对象数组

> ID：12246135
> 
> 赞同：7
> 
> 时间：2012-09-03T10:32:19.937
> 
> 标签：objective-c, xcode

我是 Objective-c 的新手，需要提交 json 对象的集合。

我写了以下内容：

```
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                id, @"id",
                                toClientGroupType, @"toClientGroupType",
                                dueDate, @"dueDate",
                                actionDate, @"actionDate",
                                campaignType, @"campaignType",
                                campaignCategory, @"campaignCategory",
                                businessId, @"businessId",
                                promotion, @"promotion",
                                product, @"product",
                                contentF, @"content",
                                subject, @"subject",
                                nil];
NSData *jsonData2 = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:NSJSONWritingPrettyPrinted error:&error];
NSString *jsonString = [[NSString alloc] initWithData:jsonData2 encoding:NSUTF8StringEncoding];
NSLog(@"jsonData as string:\n%@", jsonString);
[request setURL:[NSURL URLWithString:@"https://services-dev.a.com/api/channels"]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:jsonData2]; 
```

我有两个问题：

A. jsonData as String 的输出是

```
{
      "toClientGroupType" : "VIP",
      "id" : "1",
      "dueDate" : "2012-09-03 10:25:42 +0000",
      "actionDate" : "2012-09-03 10:25:42 +0000",
      "campaignType" : "ONE_TIME",
      "businessId" : "150",
      "campaignCategory" : "SALE"
    } 
```

如您所见-我缺少我声明的 3 个字段`content`：`product`和`subject`

B. 我实际上需要提交一个对象数组，所以请求将是这样的：

```
[{
  "toClientGroupType" : "VIP",
  "id" : "1",
  "dueDate" : "2012-09-03 10:25:42 +0000",
  "actionDate" : "2012-09-03 10:25:42 +0000",
  "campaignType" : "ONE_TIME",
  "businessId" : "150",
  "campaignCategory" : "SALE"
}] 
```

我该怎么做，有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T10:52:51.863

```
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                            id, @"id",
                            toClientGroupType, @"toClientGroupType",
                            dueDate, @"dueDate",
                            actionDate, @"actionDate",
                            campaignType, @"campaignType",
                            campaignCategory, @"campaignCategory",
                            businessId, @"businessId",
                            promotion, @"promotion",
                            product, @"product",
                            contentF, @"content",
                            subject, @"subject",
                            nil];

NSMutableArray * arr = [[NSMutableArray alloc] init];

[arr addObject:jsonDictionary];
NSData *jsonData2 = [NSJSONSerialization dataWithJSONObject:arr options:NSJSONWritingPrettyPrinted error:&error];
NSString *jsonString = [[NSString alloc] initWithData:jsonData2 encoding:NSUTF8StringEncoding];
NSLog(@"jsonData as string:\n%@", jsonString); 
```

签出这个

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T11:26:50.457

```
 NSError *error;
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                @"1", @"id",
                                @"test", @"toClientGroupType",
                                @"test", @"dueDate",
                                @"test", @"actionDate",
                                @"test", @"campaignType",
                                @"test", @"campaignCategory",
                                @"test", @"businessId",
                                @"test", @"promotion",
                                @"test", @"product",
                                @"test", @"content",
                                @"test", @"subject",
                                nil];

NSMutableArray * arr = [[NSMutableArray alloc] init];

[arr addObject:jsonDictionary];
NSData *jsonData2 = [NSJSONSerialization dataWithJSONObject:arr options:NSJSONWritingPrettyPrinted error:&error];
NSString *jsonString = [[NSString alloc] initWithData:jsonData2 encoding:NSUTF8StringEncoding];
NSLog(@"jsonData as string:\n%@", jsonString); 
```

输出：- [ { “subject”：“test”，“toClientGroupType”：“test”，“id”：“1”，“dueDate”：“test”，“actionDate”：“test”，“campaignType”：“ test”、“businessId”：“test”、“product”：“test”、“content”：“test”、“campaignCategory”：“test”、“promotion”：“test”}]

查看促销、产品、内容和主题中的数据。它不应为 nil 或 null

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-30T04:18:32.290

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{

NSError *error;

NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:receivedData options:NSJSONReadingAllowFragments error:&error];

 NSArray *categoryArray= [dic valueForKey:@"SELECTED OBJECT KEY"];
    NSLog(@"category%@",categoryArray);
} 
```

category：显示Category数组内容

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T10:57:54.007

对问题 A：

我认为您的字段丢失了，因为它们包含 nil 值。使用 NSJSONSerialization 时不考虑包含 nil 值的键

对问题 B：

prashant 发布了一个很好的[解决方案](https://stackoverflow.com/a/12246405/729763)

# ios - iOS 动画文本，如 powerpoint

> ID：12246136
> 
> 赞同：-5
> 
> 时间：2012-09-03T10:32:28.873
> 
> 标签：ios, core-animation, core-text

我正在制作一个应用程序来创建演示文稿。我想像PowerPoint中的文本一样为文本设置动画。我不知道从哪里开始。我在谷歌搜索但我没有找到任何示例。请通过提供任何教程链接帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:45:04.237

您可以从`CGAffineTransformMake`方法及其选项开始。您将能够在屏幕上进行旋转、更改大小和移动对象。MS PP 中有很多动画，但其中一些可以通过这种转换轻松创建。在这里阅读[CGAffineTransform](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T02:15:59.907

你的问题太模糊，无法给出好的答案。您希望制作哪些特定类型的动画？UIView 动画方法如 animateWithDuration:animation: 和它的变体让你可以做很多事情，比如幻灯片、淡入淡出、缩放、平移、旋转等。如果你想做擦除、翻页、百叶窗动画，有很多内置的- 您可以使用过渡动画，也可以卷起袖子学习核心动画的复杂性。如果您想做一些不直接支持的复杂过渡（如擦拭布、百叶窗、谷仓门等），预计需要花费数周或数月的时间来学习 Core 动画的细节。

# c# - 如何从 Web 服务访问数据库？

> ID：12246145
> 
> 赞同：0
> 
> 时间：2012-09-03T10:33:12.780
> 
> 标签：c#, asp.net, .net, webmethod

如何从 ASP.NET 中的 Web 服务访问数据库？我有一个`[webmethod]`WebServices 类，这不是在代码文件中调用：

```
[WebMethod]
public DataSet Populate(string con, string sql)
{
    DataSet DS = new DataSet();
    SqlConnection conn = new SqlConnection(con);
    SqlDataAdapter DA = new SqlDataAdapter(con, sql);
    DA.Fill(DS);
    Return DS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:54:11.887

检查你的 sql cmd 是否为空。并写成
`SqlDataAdapter DA = new SqlDataAdapter(sql,con);`

# jquery - 隐藏在包装器 div 后面的 Jquery 下拉菜单

> ID：12246148
> 
> 赞同：2
> 
> 时间：2012-09-03T10:33:23.447
> 
> 标签：jquery, html, css

因为我正在为我的游戏网站处理 jquery 下拉列表。我对一个问题感到震惊。当我将鼠标悬停在下拉列表上时，我的下拉列表位于包装器 div 的后面。谁能告诉我我的代码出了什么问题。请参阅我的示例代码和图像。 ![在此处输入图像描述](../Images/8e8d177b3ac9ba63bef08d08d830a26c.png)

代码：

```
<div class="cat_btn">
                  <ul class="dropdown">
            <li><a href="#">Categories</a>
                <ul class="sub_menu">
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                     <li><a href="#">Ben10</a></li>
                </ul>
            </li>
            </ul>
            </div> 
```

CSS 代码：

```
ul.dropdown                         { position: relative; -webkit-border-radius: 5px;                   
                              -moz-border-radius: 5px; border-radius: 5px;}
ul.dropdown li                      { font-weight: bold; float: left; zoom: 1; background: #ccc; -webkit-border-radius: 5px;                    
                              -moz-border-radius: 5px; border-radius: 5px; /*width: 100px; height: 30px;*/}
ul.dropdown a:hover                 { color: #000; }
ul.dropdown a:active                { color: #ffa500; }
ul.dropdown li a                    { display: block; padding: 4px 8px; border-right: 1px solid #333;
                                      color: #222; }
ul.dropdown li:last-child a         { border-right: none; } /* Doesn't work in IE */
ul.dropdown li.hover,
ul.dropdown li:hover                { background: #F3D673; color: black; position: absolute; }
ul.dropdown li.hover a              { color: black; }

ul.dropdown ul                      { width: 220px; visibility: hidden; position: absolute; top: 100%; left: 0; -webkit-border-radius: 5px;                     
                              -moz-border-radius: 5px; border-radius: 5px; }
ul.dropdown ul li                   { font-weight: normal; background: #f6f6f6; color: #000; 
                                      border-bottom: 1px solid #ccc; float: none; -webkit-border-radius: 5px;                   
                              -moz-border-radius: 5px; border-radius: 5px;}
                                  /* IE 6 & 7 Needs Inline Block */

ul.dropdown ul li a                 { border-right: none; width: 100%; display: inline-block; -webkit-border-radius: 5px;                   
                              -moz-border-radius: 5px; border-radius: 5px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:38:42.617

您是否已`overflow:hidden`申请`cat_btn`（或其任何父母？）如果是这样，这将是切断任何子元素的原因`overflowing`。

## 额外的

关于我的评论，为了解决您的其他问题，您可以执行以下操作：

```
<div class="cat_btn">
  <ul class="dropdown">
     <li class="dropdown-item">
       <a href="#">Categories</a>
       <ul class="sub_menu">
         <li><a href="#">Ben10</a></li>
         ...
       </ul>
     </li>
     <li class="dropdown-item">
       ... 
```

有了上述内容，您就可以专门针对您需要的 LI，`ul.dropdown li.dropdown-item:hover`这些 LI 不会影响其中的其他 LI。

正如我也说过的，您可以使用：

```
ul.dropdown > li:hover 
```

这只会选择直接子级，`ul.dropdown`但旧版浏览器不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:35:37.563

添加`z-index:1000`到班级`ul.dropdown`

# jquery - 使用 jQuery 将表单发送到 cgi

> ID：12246153
> 
> 赞同：0
> 
> 时间：2012-09-03T10:33:49.373
> 
> 标签：jquery, forms, cgi

我想发送一个表单并控制使用 jQuery 之后会发生什么。**我不能使用 php**。我的服务器有 cgi 来处理数据。如何使用 jQuery 将表单发送到 cgi？我不知道该怎么做，但我尝试过这样的事情：

```
$(function(){

   var name = $("input:text").val("name"); ;

   $(":submit").click(function(e){
      e.preventDefault();
      load("http://cgi.myDomain.com/FormMail.pl", ( name ));
   });

}) 
```

*   的HTML：

    ```
    <Form id="formulari" method="POST" action="http://cgi.aDomain/FormMail.pl">
    <p>
      <input type="hidden" name="recipient" value="anE-mail">
      <input type="hidden" name="subject" value="Form send">
      <input type="hidden" name="redirect" value="http://www.theSamePage.html">  
    </p>

    <form>
    <input type="text" name="name" value="name"/>
    <input type="submit" value="Send"/>
    </form>

    </div>

    <div class="answer">Thank you</div> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:59:13.773

您应该使用 AJAX，通过它您可以使用 POST 或 GET 方法提交您的表单，并且您会收到来自服务器的答复。此外，它允许您在不重新加载页面的情况下让事情发生。

这是一个很酷的教程

[阿贾克斯教程](http://www.queness.com/post/160/create-a-ajax-based-form-submission-with-jquery)

**编辑**

试试这个，请注意我只是用这段html，没有表单，只有输入元素

**html**

```
 <input type="text" id="name" name="name" value="name"/>
    <input class="send" type="submit" value="Send"/> 
```

**jQuery**

```
 $('.send').on('click', function(event) {
        $.ajax({
            type: "POST",
            url: "http://cgi.aDomain.com/FormMail.pl",
            data: {name: $("#name").val()},
            error: function(result) {
                var data_received = $(result).find("h1");
                alert(data_received );
            },
            success: function(result) {
                alert(result);
            }
        });
    }); 
```

# sql - T-SQL LIKE 条件中的重复字符

> ID：12246156
> 
> 赞同：3
> 
> 时间：2012-09-03T10:34:12.530
> 
> 标签：sql, sql-server, tsql, sql-like

问题：将变量（或列）
的值限制`VARCHAR`为数字和 ASCI 字符，但允许可变长度。
此脚本不会产生所需的结果：

```
declare @var as VARCHAR (150)
select @var = '123ABC'

if (@var LIKE '[a-zA-Z0-9]{0,150}')
    print 'OK'
else
    print 'Not OK' 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:46:04.377

您可以使用 not carat ^ 和 NOT LIKE 表达式来执行此操作。

所以你说，哪里不像不是非字母数字;）这适用于标准数字和字符：

```
declare @var as VARCHAR (150)
select @var = '123ABC'

if (@var NOT LIKE '%[^a-zA-Z0-9]%')
    print 'OK'
else
    print 'Not OK' 
```

编辑：感谢 Martin 的整理提示，如果您希望像 ý 这样的字符被视为非字母数字，请在 COLLATE 中添加如下

```
declare @var as VARCHAR (150)
select @var = '123ABCý'

if (@var NOT LIKE '%[^a-zA-Z0-9]%' COLLATE Latin1_General_BIN ) 
    print 'OK'
else
    print 'Not OK' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:21:14.600

这有帮助吗

```
Declare @t table (Alphanumeric VARCHAR(100))
Insert Into @t 
Select '123ABCD' Union All Select 'ABC' Union All 
Select '123'  Union All  Select  '123ABCý' Union All
Select 'a-z123' Union All  Select 'abc123' Union All
Select 'a1b2c3d4'

SELECT Alphanumeric
FROM @t 
WHERE Alphanumeric LIKE '%[a-zA-Z0-9]%' 
AND ( Alphanumeric NOT LIKE  '%[^0-9a-zA-Z]%' COLLATE Latin1_General_BIN) 
AND LEN(Alphanumeric)> 6 -- display records having more than a length of 6 
```

//结果

**字母数字**

```
123ABCD
a1b2c3d4 
```

NB~ 使用了 Martin 的整理提示..谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:42:12.447

T-SQL 不支持正则表达式。

不过，您可以使用[SQL CLR](http://msdn.microsoft.com/en-us/library/ms254498.aspx)来运行这样的表达式。

* * *

还可以尝试[LEN](http://msdn.microsoft.com/en-us/library/ms190329.aspx)功能：

```
if (LEN(@var) <= 150)
    print 'OK'
else
    print 'Not OK' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:45:16.797

T-SQL 不支持正则表达式，您可以获得的最接近的是[`PATINDEX`](http://msdn.microsoft.com/en-us/library/ms188395.aspx)可用于匹配特定字符的函数，但您无法指定计数。您可以尝试将其与`LEN`检查长度的功能结合使用。

有关. [_](https://stackoverflow.com/questions/194652/sql-server-regular-expressions-in-t-sql) _`PATINDEX`

# asp.net-web-api - ASP.Net Web Api Url.Link 在单元测试中未返回 UriString

> ID：12246159
> 
> 赞同：4
> 
> 时间：2012-09-03T10:34:18.300
> 
> 标签：asp.net-web-api

我有以下测试：

```
[Test]
public void Add_New_Group_Should_Return_StatusCode_Created_And_A_Header_Location_To_The_New_Group()
{
    var newGroup = new GroupData { ID = 1, UserID = 1, Name = "Group 1", Description = "Description 1" };

    var fakeGroupDAL = A.Fake<IGroupDAL>();
    var contactGroupsController = new ContactGroupsController(fakeGroupDAL);
    SetupControllerForTests(contactGroupsController, HttpMethod.Post);

    var response = contactGroupsController.AddGroup(new ContactGroupApiRequest(), newGroup);

    Assert.IsTrue(response.StatusCode == HttpStatusCode.Created, "Should have returned HttpStatusCode.Created");

} 
```

其中调用了以下配置方法：

```
private static void SetupControllerForTests(ApiController controller, HttpMethod httpMethod)
{
    var config = new HttpConfiguration();
    var request = new HttpRequestMessage(httpMethod, "http://localhost/contactgroups");

    var route = config.Routes.MapHttpRoute("ContactGroupsApi", "{controller}/{action}/{request}", new { request = RouteParameter.Optional });
    var routeData = new HttpRouteData(route, new HttpRouteValueDictionary { { "controller", "contactgroups" } });

    controller.ControllerContext = new HttpControllerContext(config, routeData, request);
    controller.Request = request;
    controller.Request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config;
} 
```

我正在尝试测试以下操作方法：

```
[HttpPost]
public HttpResponseMessage AddGroup([FromUri]ApiRequest req, [FromBody] GroupData contactGroup)
{

    if(ModelState.IsValid && contactGroup !=null)
    {
        _groupDal.AddGroup(contactGroup);

        contactGroup.Name = HttpUtility.HtmlEncode(String.Format("{0} - {1}", contactGroup.Name, contactGroup.Description));

        var response = new HttpResponseMessage(HttpStatusCode.Created) { Content = new StringContent(contactGroup.Name) };

        var uriString = Url.Link("ContactGroupsApi", new { controller = "contactgroups", action = "Group",  UserId = contactGroup.UserID, GroupId = contactGroup.ID});

        response.Headers.Location = new Uri(uriString);

        return response;
    }

    return Request.CreateResponse(HttpStatusCode.BadRequest);
} 
```

action 方法在正常调用时运行良好，但在测试中失败，因为对 Url.Link 的调用返回 null。

```
var uriString = Url.Link("ContactGroupsApi", new { controller = "contactgroups", action = "Group",  UserId = contactGroup.UserID, GroupId = contactGroup.ID}); 
```

所有这些代码都非常接近以下文章：[Unit test ASP.NET Web Api](http://www.peterprovost.org/blog/2012/06/16/unit-testing-asp-dot-net-web-api/)

我怀疑在测试中运行时路由表信息不足。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T15:16:14.167

我通过将 HttpRouteData 添加到控制器的 HttpRequestMessage 的 HttpRouteDataKey 属性来修复我的测试。像这样：

```
controller.Request.Properties[HttpPropertyKeys.HttpRouteDataKey] = routeData; 
```

# sql - 有没有更好的方法-Union All/Order By

> ID：12246162
> 
> 赞同：1
> 
> 时间：2012-09-03T10:34:41.013
> 
> 标签：sql, sql-server-2008

我有两个数据表 -

```
TestTable1                          TestTable2  
----------                          ----------  
Id  Name        DealDate            Id  Name        DealDate  
1   aaTable     2010-09-22          1   aaTable2    2010-09-23  
2   bbTable     2010-09-23          2   bbTable2    2010-09-24  
3   ccTable     2010-09-28          3   ccTable2    2010-09-26  
4   ddTable     2010-09-25          4   ddTable2    2010-09-27 
```

我只想从 TestTable1 + TestTable2 的结果集中获得 *两条最新记录来返回这个 -*

```
Id  Name        DealDate
4   ccTable     2010-09-28 
3   ddTable2    2010-09-27 
```

这是我当前的查询

```
SELECT TOP 2 * FROM 
(
    SELECT * FROM
    (SELECT TOP 2 Id, Name, DealDate FROM TestTable1 ORDER BY DealDate DESC) T1
    UNION ALL 
    SELECT * FROM
    (SELECT TOP 2 Id, Name, DealDate FROM TestTable2 ORDER BY DealDate DESC) T2
) T1T2
ORDER BY DealDate DESC 
```

谁能指导我以更好的方式（性能方面/可读性方面）来实现这一目标？

PS 上面的表格只是为了展示用例，我的实际表格有数千条记录。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:37:45.093

我唯一会改变性能的方法是删除内部选择中的`ORDER BY`和`TOP 2`- 它们毫无意义。
除此之外，您的解决方案就是要走的路。在您使用时不应该有任何性能问题，`UNION ALL`而不是`UNION`......

```
SELECT TOP 2 * FROM 
(
    SELECT Id, Name, DealDate FROM TestTable1
    UNION ALL 
    SELECT Id, Name, DealDate FROM TestTable2
) T1T2
ORDER BY DealDate DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:41:41.507

如果您一直想从 TestTable1 获得 1 条记录，从 TestTable2 获得 1 条记录，那么您可以尝试：

```
SELECT TOP 1 * FROM TestTable1 ORDER BY DealDate DESC
UNION ALL
SELECT TOP 1 * FROM TestTable2 ORDER BY DealDate DESC 
```

否则，其他答案应该是您正在寻找的。

# mysql - Mysql找到最小值并根据日期，从某一行开始

> ID：12246163
> 
> 赞同：1
> 
> 时间：2012-09-03T10:34:42.123
> 
> 标签：mysql

表 xy 包含以下字段：

编号 | 日期 | 价值

我希望提取特定 id 的最小值和从第 12 行开始的相应日期：

编码`SELECT MIN(value) FROM (SELECT value FROM tablexy where id=1 LIMIT 11, 1000) as x`

这将返回最低值，但是，我需要添加什么才能接收最低值的相关日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:40:38.580

```
 SELECT value,`date` FROM (SELECT value,`date` FROM tablexy
    where id=1 LIMIT 11, 1000)   as x  order by value limit 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:37:08.517

```
SELECT field from tablexy where value = (select MIN(value) FROM (SELECT value FROM tablexy where id=1 LIMIT 11, 1000)) 
```

# android - 如何从android中的十个线性布局中识别线性 布局

> ID：12246164
> 
> 赞同：1
> 
> 时间：2012-09-03T10:34:41.797
> 
> 标签：android, android-linearlayout

我有 10 个线性布局如何识别每个线性布局，所以我需要对它执行一些操作

下面是代码

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.item);

    newsLayout =(LinearLayout)findViewById(R.id.newsLayout);        

        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      RelativeLayout rel=null;
        for(int i=0;i<images.size();i++){
            rel= new RelativeLayout(this);
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            rel.setId(i);
            rel = (RelativeLayout) inflater.inflate(R.layout.reuse,null);

            params.setMargins(0, 50, 0, 0);

             TextView fromWeb= (TextView) rel.findViewById(R.id.text);
             fromWeb.setText(headLines.get(i));
             newsLayout.addView(rel,params);

 rel.setOnClickListener(new RelativeLayout.OnClickListener() {
            public void onClick(View arg0) {   
                switch(arg0.getId())   { 

       case 1: Toast.makeText(DesignShape.this, "clicked"+arg0.getId(),           Toast.LENGTH_LONG).show();       
    break;     

 default: break; 
        }
    } 
});
    }

    } 
```

线性布局上的点击事件每次都会产生相同的对象。我怎样才能彼此区分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:42:55.217

您可以将 id 赋予每个线性布局，并在单击时在布局中编写一个案例来获取 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:41:13.867

您可以使用如下开关盒识别您的布局：

```
public void onClick(View arg0) {
  switch(arg0.getId()):
    case R.id.layout1:
      Toast.makeText(DesignShape.this, "clicked"+arg0.getId(), Toast.LENGTH_LONG).show();
      break;
    default:
      break;
} 
```

此外，您可以在 Activity 中设置实现 OnClickListener，而不是为每个视图创建一个新视图。

但是，由于您在 for 循环中膨胀了相同的布局，因此您无法在不修改视图 ID 的情况下区分布局。所以打电话`view.setId(i)`也可能有帮助。

尝试改用[ListView](https://developer.android.com/reference/android/widget/ListView.html)并实现适配器的[OnItemClickListener](https://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)。

# c# - 传递给 WCF 服务的可选查询字符串参数

> ID：12246168
> 
> 赞同：2
> 
> 时间：2012-09-03T10:35:09.030
> 
> 标签：c#, .net, wcf, query-string, optional-parameters

我想知道如何使用：

```
string limit = WebOperationContext.Current.IncomingRequest.UriTemplateMatch.QueryParameters["Limit"]; 
```

在我的 wcf 中以这种方法：

```
CityNewsList GetNewsByCity(string DeviceType,string id,string limit); 
```

这里 'devicetype' 和 'id' 是默认参数，我想要的是 'limit' 作为可选参数意味着用户可以选择传递这个参数，他可以传递或不能传递。

想将限制用作：

```
if (limit == some value)
{
    //do this.
}
if (limit == null)
{
    // do this.
} 
```

我浏览了很多链接，但我不知道如何在我的 wcf 中使用它。

或者是否有人可以告诉我如何在 WCF 服务中使参数成为可选参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:26:12.157

所以实际上你是在使用 WCF 来创建一个 REST 服务。我已经阅读了您在回答您正在创建可能重复的问题时的意思：[如何在 WCF REST 服务中具有可选参数？](https://stackoverflow.com/questions/7498099/how-to-have-optional-parameters-in-wcf-rest-service)

*您可以通过在 WebGet 或 WebInvoke 属性上省略 UriTemplate 中的查询字符串并使用`WebOperationContext.Current.IncomingRequest.UriTemplateMatch.QueryParameters`*.

所以这归结为：

更改方法的签名以省略参数：

```
CityNewsList GetNewsByCity(string DeviceType,string id /*,string limit*/); 
```

更改属性，以便查询字符串中不需要该参数：

```
[OperationContract]
[WebGet(UriTemplate = "/whatever/{DeviceType}/{id}", RequestFormat = WebMessageFormat.Xml)] 
```

代替

```
[OperationContract]
[WebGet(UriTemplate = "/whatever/{DeviceType}/{id}/{limit}", RequestFormat = WebMessageFormat.Xml)] 
```

最后你会有类似的东西：

```
[OperationContract]
[WebGet(UriTemplate = "/whatever/{DeviceType}/{id}", RequestFormat = WebMessageFormat.Xml)]
CityNewsList GetNewsByCity(string DeviceType,string id); 
```

实施的第一件事是：

```
string limit = WebOperationContext.Current.IncomingRequest.UriTemplateMatch.QueryParameters["Limit"]; 
```

但是：我没有尝试过，但这就是我从您在对您的问题的评论中引用的内容中所理解的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:21:19.163

最近有一个类似的问题，并通过覆盖默认的 QueryStringConverter 来解决它。

1) 子类 System.ServiceModel.Dispatcher.QueryStringConverter 并覆盖其 ConvertStringToValue 方法。

例如，这使得所有枚举都是可选的（如果没有值，将使用默认值）

```
 public override object ConvertStringToValue(string parameter, Type parameterType)
        {
            if (parameterType.IsEnum)
            {
                if (string.IsNullOrEmpty(parameter))
                {
                    return Activator.CreateInstance(parameterType);
                }
            }

            return base.ConvertStringToValue(parameter, parameterType);

        } 
```

2) 子类 System.ServiceModel.Description.WebHttpBehavior 并覆盖其 GetQueryStringConverter 方法以返回您修改后的查询字符串转换器

```
public class ExtendedQueryStringBehavior : WebHttpBehavior
{
    protected override QueryStringConverter GetQueryStringConverter(OperationDescription operationDescription)
    {
        return new ExtendedQueryStringConverter();
    }
} 
```

3) 将新的 WebHttpBehavior 连接到所需的端点（可能需要将此功能与您可能拥有的其他东西合并）。

可以使用 QS 转换器、复杂类型、csv 列表、数组等支持相当复杂的场景。一切都将是强类型的，并且可以从单点进行转换 - 无需处理服务/方法级别的解析噩梦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-23T20:32:39.637

我解决可选/默认问题的方法是

Interface.cs：（将您的可选参数设置为默认 {x=y}）

```
[OperationContract]
[WebGet(UriTemplate = "draw/{_objectName}/{_howMany}/{_how=AnyWay}"
, ResponseFormat = WebMessageFormat.Json
)]
YourShape[] doDraw(string _objectName, string _howMany, string _how); 
```

method.svc.cs: (测试 x==default?a:x)

```
YourShape[] doDraw(string _objectName, string _howMany, string _how) {
    if (_how == "AnyWay")
       _how = findTheRightWay();  
    return (drawShapes(_objectName, _howMany, _how));
} 
```

您的端点可以是

```
yoursite/draw/circle/5 
```

或者

```
yoursite/draw/circle/5/ThisWay 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-14T05:56:09.950

我理解它很老的帖子，但可能对其他人有所帮助。

在 Interface : deviceType 下面不是可选的，但在调用端点时 Id 和 limit 是可选的。

```
 [OperationContract]
        [WebGet(UriTemplate = "newsbycity/{DeviceType}/{id=1}/{limit=10}", ResponseFormat = WebMessageFormat.Json)]
        CityNewsList GetNewsByCity(string DeviceType,string id,string limit); 
```

服务 ：

```
CityNewsList GetNewsByCity(string DeviceType,string strid,string strlimit)
{
int ID = id; // perform null check 
} 
```

# oop - 对类和类架构采取什么方法？

> ID：12246170
> 
> 赞同：0
> 
> 时间：2012-09-03T10:35:26.647
> 
> 标签：oop

我正在和几个同事一起在一个网站上工作，我们在如何看待类架构方面存在一些差异，所以我也发布了这个，看看更大的社区对这个问题的看法，因为我想很多人都在类似的情况。

我们正在使用 MVC 方法，模型通过活动记录模式实现。其中一个模型是与我们数据库中的产品表相关的“产品”模型。问题是，我们有两种主要类型的产品——有形的（type = 1）和无形的（type = 2）。在整个代码中，我们将有大量与此类产品相关的逻辑。（如果有形就这样做，如果非有形就这样做……）

所以一种方法是 - 创建类 TangibleProduct 和 NonTangibleProduct 并通过工厂获取其中一个。当然，这些类将具有重复的方法，即 isTangible() 或 isNonTangible() 将存在于两个类中，但在一种情况下会返回 true，而在另一种情况下会返回 false。（这只是一个例子）。我希望在类中看到至少大约 30 种不同的方法，它们将根据产品类型返回不同的值。

另一种方法是只有一个 Product 类，并在每个方法中实现 IF 块，如果产品是有形的或无形的，则执行逻辑并返回结果。

我知道这是一个模糊的问题，但我确实认为大多数在 OO 环境中工作的人在某些时候都有类似的情况......

您是否看到选择一种方法而不是另一种方法的任何长期后果，您认为哪种方法比另一种更好或更差？

编辑：对不起，我可能不太清楚。这两个类将扩展 Product 类。（即“class TangibleProduct extends Product”和“class NonTangibleProduct extends Product”）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:40:57.580

从架构上讲，由于有形产品和无形产品之间的区别在您的领域中非常重要，因此最好的方法是拥有单独的类`TangibleProduct`并将`IntangibleProduct`两者作为实例实现来处理`IProduct`（第一种方法的变体）。如果您的 ORM 工具允许您这样做，那么一切都很好。

应该非常非常努力地避免第二种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:47:40.420

在 OO 中，通常建议在类层次结构中进行这种区分。

如果您使用工厂方法来创建正确的子类，您只需在创建时执行一次条件逻辑，而不是在行为变化的每个方法中执行一次。

您还可以更轻松地添加新类型。如果决策逻辑在许多方法中重复，则必须全部更改。如果它被整合到一个工厂中，你只需要在那里添加一个分支并实现新的子类，并且所有现有的子类可以经常保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:44:56.800

如果无法访问您的全部要求，很难说清楚。

这主要取决于是否会有任何非平凡的方法

1.  有形和无形产品的行为非常不同。
2.  只有在有形或无形产品的背景下才有意义。

当你最终创建了很多看起来像这样的方法时：

```
public void doSomething()
    if (isTangible) {
        [...loads of code...]
    }
    else {
        [...loads of different code...]
    }
} 
```

单独上课会更好。

# performance - 是什么推动了 Chrome 和其他浏览器中的“重排/布局”时间

> ID：12246172
> 
> 赞同：1
> 
> 时间：2012-09-03T10:35:30.967
> 
> 标签：performance, google-chrome, web-applications

当使用使用backbone.js 开发的应用程序时，Chrome 在将通过AJAX 调用检索到的大型文档的内容添加到DOM 时会冻结大约7-10 秒。Chrome 的事件时间线显示，主要问题是单个“布局”事件大约需要 6-8 秒（如果重要的话，用现代 MB Air 测量的时间）

正在加载的内容约为 800kbs 的未压缩 HTML，15000 个 DOM 节点，内容加载后的内存使用量约为 30-35 Mbs；这是一个很大的文件，但这么长时间的冻结感觉不太对劲。

*   **对于这样的文档，预期会有这么大的“布局”时间**，还是其他问题的迹象？（如过于复杂的 CSS 规则、糟糕的 HTML 结构等）

*   **除了文档大小之外，还有哪些其他因素**可能会影响“布局”事件的性能？

*   除了将内容分割成碎片的明显且可能正确的解决方案之外，**是否有任何技巧可以使浏览器更容易计算布局事件**？（我正在考虑将怪物内容放置在 iframe 或具有固定位置的 div 中，或者避免内容中的特定 CSS 功能）

# java - 如何为 com.sun.tools.javac.Main.compile() 函数设置类路径？

> ID：12246175
> 
> 赞同：6
> 
> 时间：2012-09-03T10:35:59.750
> 
> 标签：java, jar, compiler-errors

我正在使用`com.sun.tools.javac.Main.compile()`函数在运行时从我的 struts 项目编译 java 文件。但是对于某些文件，他们需要一些特定的 jar，例如axis2。我有罐子，但如何将它们设置为类路径以在运行时编译 java 文件？我尝试过`System.setProperty("java.class.path","jar dir");`但无法编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:48:37.893

以下代码`com.sun.tools.javac.Main` 对我有用：

**苹果.java**

```
//This class is packaged in a jar named MyJavaCode.jar
import com.xyz.pqr.SomeJavaExamples;
public class Apple {
    public static void main(String[] args) {
        System.out.println("hello from Apple.main()");
    }
} 
```

**类.java**

```
import com.sun.tools.javac.Main;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class AClass {
    public static void main(String[] args) {
        try {
            //Specify classpath using next to -cp
            //This looks just like how we specify parameters for javac
            String[] optionsAndSources = {
                "-g", "-source", "1.5",
                "-target", "1.5", 
                "-cp", ".:/home/JavaCode/MyJavaCode.jar",
                "Apple.java"
            };
            PrintWriter out = new PrintWriter(new FileWriter("./out.txt"));
            int status =  Main.compile(optionsAndSources, out);
            System.out.println("status: " + status);
            System.out.println("complete: ");
        }catch (Exception e) {}
    } 
} 
```

注意：要编译这个`AClass.java`，`tools.jar`需要在`classpath`默认情况下不存在，所以你必须指定它。

如果你正在使用，`Java 1.6`那么你应该考虑`javax.tools.JavaCompiler`改用它，它的[getTask(](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html#getTask%28java.io.Writer,%20javax.tools.JavaFileManager,%20javax.tools.DiagnosticListener,%20java.lang.Iterable,%20java.lang.Iterable,%20java.lang.Iterable%29) ) 方法接受一个`options`可以有`classpath`.

例如：

```
import javax.tools.JavaCompiler;
import javax.tools.ToolProvider;
import javax.tools.JavaFileObject;

public final class AClass {
    private static boolean compile(JavaFileObject... source ){
        List<String> options = new ArrayList<String>();
        // set compiler's classpath to be same as the runtime's
        options.addAll(Arrays.asList("-classpath", System.getProperty("java.class.path")));
        //Add more options including classpath
        final JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        final JavaCompiler.CompilationTask task = compiler.getTask(/*default System.err*/ null,
            /*std file manager*/ null,
            /*std DiagnosticListener */  null,
            /*compiler options*/ options,
            /*no annotation*/  null,
            Arrays.asList(source));
       return task.call();
} 
```

`com.sun.tools.javac.Main`也已弃用且未记录。

# javascript - rx javascript 周期性事件忽略，直到首先处理

> ID：12246177
> 
> 赞同：1
> 
> 时间：2012-09-03T10:36:08.003
> 
> 标签：javascript, reactive-extensions-js

也许我错过了 RX 用于 javascript 库的目的，但我认为它应该很好地处理这种情况。

我想通过 observable 生成周期性事件。订阅者应该接受第一个事件并发出 ajax 请求。处理此事件时的其他事件应被忽略。完成后，观察者应该收到下一个生成的事件。

有什么建议么？非常感谢。

# php - 使用 google chart api 在 php 中实现图表

> ID：12246179
> 
> 赞同：0
> 
> 时间：2012-09-03T10:36:32.180
> 
> 标签：php, graph, visualization, google-visualization

我想要一个简单的脚本/库，通过它我可以绘制简单的图形，如线条、列、饼图等。没有 ajax、json、flash pls ......我已经尝试过 pChart、amCharts 但在每个中都面临一些或其他问题。 . 使用谷歌可视化 api.. 发现它很好但无法从我的 mysql 数据库中将数据提供给图表我的代码如下：

```
<?php 
include('dbconnect.php');
$sql_data = mysql_query("SELECT date , value FROM table1 WHERE   
                               value ='xyz' ORDER BY date DESC");
?> 
<html>
 <head>
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <?php echo "<script type=text/javascript>";
    echo "google.load(\"visualization\", \"1\", {packages:[\"corechart\"]});";
    echo "google.setOnLoadCallback(drawChart);";
    echo "function drawChart() { ";
    echo "var data = google.visualization.arrayToDataTable([
    ['Date', 'Score'],";
    while($result = mysql_fetch_array($sql_data))
    {
    echo "[".$result['date'] .",".$result['value']."]";
    }
    echo " ]);";

    echo "var options = {
      title: 'Score  Analysis'
    };";

    echo "var chart = new google.visualization.LineChart(document.getElementById('chart_div'));";
    echo "chart.draw(data, options);";
  echo "}
</script>";

?>
  </head>
  <body>
   <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:38:19.640

除了最后一行之外，每行数据后都需要一个逗号。将结果设置为变量，而不是随心所欲地回显...

```
$display .= "[".$result['date'] .",".$result['value']."],"; 
```

当循环结束时砍掉尾随的逗号：

```
 $display .= substr($display, 0, -1); 
```

然后

```
echo $display; 
```

查看谷歌图表的游乐场：

[http://code.google.com/apis/ajax/playground/?type=visualization#line_chart](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)

# jquery - 当用户在弹出窗口之外点击时，防止 JQuery Mobile 关闭弹出窗口

> ID：12246181
> 
> 赞同：17
> 
> 时间：2012-09-03T10:37:00.090
> 
> 标签：jquery, jquery-mobile, popup, modal-dialog

我正在使用 JQuery Mobile 1.2.0 alpha 1。

目前，当我打开一个弹出窗口并在屏幕上的任意位置点击它外部时，弹出窗口正在关闭。我想知道是否有任何我错过的 JQuery Mobile 属性可以设置并防止在外部点击时关闭弹出窗口？（模态弹出）

（弹出窗口的文档可以在[这里](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/index.html)找到）

**编辑：**

我有一个解决这个问题的想法，但仍然无法实现它：

当一个 JQM 弹出窗口出现时，会有一个 div 覆盖整个屏幕，类为 ui-popup-screen。我想以某种方式给它一个大的 z-index 并从中取消绑定所有单击/点击功能。这样做并不能解决我的问题，但我想这是朝着这个方向迈出的一小步。

提前谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T13:42:23.627

这已作为 Github 上的功能请求添加。请参阅[此处](https://github.com/jquery/jquery-mobile/issues/4727)的问题。

在此期间，一个 hack 是取消绑定 ui-popup-screen 上的事件。我会将以下代码放在 pageinit.xml 中。

```
$("#yourPopupId").on({
    popupbeforeposition: function () {
        $('.ui-popup-screen').off();
    }
}); 
```

这是一个沉重的快速修复，但它有效。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-24T16:01:11.657

对于未来的搜索者，从 1.3 开始，现在支持此功能。只需将`data-dismissible="false"`属性添加到面板 div。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-19T02:33:36.893

在@TheGwa 的优秀解决方案的基础上，这里有一个概括，为即将推出的官方功能做准备（大概在 1.3 版中）：

*   添加`data-dismissible='false'`到所有您不想通过在它们外部点击而将其关闭的弹出窗口的标记中。

*   将以下事件处理程序添加到您的应用程序；它将处理所有弹出窗口：

_

```
$(window).on('popupbeforeposition', 'div:jqmData(role="popup")', function() {
        var notDismissible = $(this).jqmData('dismissible') === false;
        if (notDismissible) {
          $('.ui-popup-screen').off();
        }
}); 
```

-

正式支持该功能后，只需删除事件处理程序即可。

请注意，遗憾的是，官方文档（截至 1.2）表明该功能已经可用，但它不是 - 请参阅[http://jquerymobile.com/test/docs/pages/popup/options.html](http://jquerymobile.com/test/docs/pages/popup/options.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-12T10:58:26.567

按以下方式添加 data-dismissible="false"。

```
<div data-role="popup" id="popupnotification" data-overlay-theme="b" data-theme="c"  data-position-to="window" style="max-width:600px;"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-16T14:18:52.510

@ MJB -> 如果您希望在弹出窗口处于活动状态时能够单击任意位置（例如按钮），您可以按如下方式更改弹出窗口的 CSS：

```
.ui-popup-screen{
                    position: relative;
                } 
```

这对我有用。

**注意：**当您执行此操作时，弹出窗口不再关闭 - 我做了一个解决方法：

```
$(window).click(function() {    
    if ($( "#myPopup-popup" ).hasClass("ui-popup-active")){
        $( "#myPopup" ).popup( "close" );
    }
}); 
```

myPopup-popup ID 由 JQM 生成 - myPopup 是我为弹出窗口提供的 ID。

# iis - IIS 上的 pdf2swf.exe 错误

> ID：12246183
> 
> 赞同：1
> 
> 时间：2012-09-03T10:37:10.123
> 
> 标签：iis, pdf, pdf2swf

我正在尝试通过在 Windows 2008 服务器上使用 pdf2swf 将 PDF 文件转换为 SWF `Process proc = new Process()`。

从 Visual Studio 运行时，一切正常。但是从 IIS 运行时，我在大多数文件上都得到了这个：

```
ERROR   Internal error: No current splash fontinfo  
ERROR   Internal error: No current splash fontinfo  
ERROR   Invalid charid 3 for font 00f896d8 (0 characters)  
ERROR   Invalid charid 615 for font 00f896d8 (0 characters)  
ERROR   Invalid charid 602 for font 00f896d8 (0 characters) 
```

我相信原因是权限，但我不知道我必须改变什么。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:33:31.223

我现在找到了解决方案。我使用 Windows 服务从 pdf 转换为 swf，我注意到错误的工作目录。对我来说，它是 syswow64。PDF2SWF 没有创建临时文件的权限。我在 ProcessStartInfo 中设置了工作目录属性，现在效果很好。

# android - 打开 PPT 文件

> ID：12246186
> 
> 赞同：2
> 
> 时间：2012-09-03T10:37:22.100
> 
> 标签：android, file, powerpoint, viewer

我想用我的应用打开一个 PPT 文件。如何检查是否有可以显示设备上安装的这些文件的应用程序以及如何启动它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:47:22.287

尝试这样的事情。没试过但可能有用

```
final Uri uri = Uri.fromFile(file); 
final Intent intent = new Intent(Intent.ACTION_VIEW); 
intent.setDataAndType(uri, "application/vnd.ms-powerpoint"); 

PackageManager pm = getPackageManager();
List<ResolveInfo> list = pm.queryIntentActivities(intent, 0);
if(list.size() > 0)
   startActivity(context, intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T21:18:21.613

```
 File file = new File("path_to_the_file.ppt");
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file),"application/vnd.ms-powerpoint");
startActivity(intent); 
```

试试这个

# google-apps-script - Google Apps 脚本，HTML addClickHandler ServerHandler 不起作用

> ID：12246187
> 
> 赞同：1
> 
> 时间：2012-09-03T10:37:30.980
> 
> 标签：google-apps-script

任何人都可以确认 HTML 小部件在服务器端接受 ClickHandlers 吗？我无法让我的下面的代码工作。

我创建了一个 serverHandler（为了更好地衡量，我什至添加了一个无用的回调元素）。随后，我将它添加到 HTML.addClickHander 中（为了更好的衡量，我什至也将它添加到了 .addMouseUpHandler 中）。该函数未执行。

```
var mouseclick = app.createServerHandler("handleTrainingClick_").addCallbackElement(lstFilter);
var params = [ "fromOrg", "trainingTitle", "dueDate", "medical", "status" ];
var resultSet = blSelectActiveTrainings_();
while (resultSet.hasNext()) {
    var training = resultSet.next();
    var html = TRAINING_ROW;
    for (var pI in params) {
        html = html.replace("$"+params[pI], training[params[pI]]); 
    }
     pnlList.add(app.createHTML(html).setId(training.id).addClickHandler(mouseclick).addMouseUpHandler(mouseclick)
                   .addMouseMoveHandler(mousemove).addMouseOutHandler(mouseout).addMouseOverHandler(mouseover)); 
```

}

```
function handleTrainingClick_(e) {
    Logger.log(e.source);
    var app = UiApp.getActiveApplication();
    return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:02:44.720

HTML 小部件服务器端处理程序工作得很好。这是我的代码中的错误引用。谢谢大家。

# javascript - 不在移动设备上时重定向

> ID：12246188
> 
> 赞同：1
> 
> 时间：2012-09-03T10:37:39.403
> 
> 标签：javascript, redirect, mobile

我正在构建一个带有联系表单和收据页面的移动优化页面。在我们的 CMS 中，我们有一个具有相同内容的“桌面”页面，但我无法根据 CSS、重定向或其他任何方式编辑桌面页面。

移动页面将用于仅限移动设备的广告系列。但是，我想确保，如果有人最终从桌面或平板电脑进入页面，他们将被重定向到桌面版本。

我见过这样的脚本：

```
<script type="text/javascript">
<!--
if (screen.width <= 699) {
document.location = "mobile.html";
}
//-->
</script> 
```

但是，嘿，现在手机的分辨率要高得多，所以反向“如果 >=699 则重定向到桌面站点”，可能对我不起作用，对吗？三星 Galaxy s 3 几乎具有桌面分辨率...使用媒体查询并不是一个真正的选择，因为这是两个独立的站点（由于旧的、僵化的 CMS）。那么我如何重定向非手机和平板电脑用户，而任何手机上的任何人都留在移动页面页面上。

请注意 - 我们的服务器不运行 PHP，我无法更改服务器端文件。我认为我需要一些类似于 JavaScript 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:39:11.273

这是我使用的一个不错的片段：

```
var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i) ? true : false;
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i) ? true : false;
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i) ? true : false;
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
    }
};

if (isMobile.any()) {
    window.location = 'http://m.example.org';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:42:35.677

我从来没有真正理解为什么这么多人在寻找检测“移动设备”。作为前端开发人员，您实际上不应该像寻找浏览器供应商那样关注所谓的移动设备，也就是说，*根本不应该*。

为什么不检查功能呢？创建一个动态的、渐进式的增强网络应用程序，以适应其当前环境。这是否意味着触摸事件或标准事件、屏幕分辨率或其他东西都没关系。

但是，如果您坚持检查浏览器或设备，您最好的办法仍然是`userAgent`位于`navigator`对象中的字符串，请参阅@MihaiIorga 的答案。

但是，我们真的应该尽量避免在浏览器和/或设备的完全不同的应用程序/项目中出现这些“分离”。如果已经有一个或多或少的“巨大”应用程序或站点需要在很短的时间内在另一台设备上进行探测，我理解这一点，但从长远来看，这种做法不会有多大好处。未来将发布更多设备/浏览器（版本）/{我想不到的东西}。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:50:54.983

```
// To Check if Mobile browser,then redirect to mobile version website otherwise open web url.
    //alert(navigator.userAgent); 
        // userAgent gives all info related to browser,os,device info

     var index = navigator.appVersion.indexOf("Mobile");   

    if (index>0) 
    { window.location.href='[mobile page url]'; } 
```

# android - Titanium 中的 ZXing 库

> ID：12246189
> 
> 赞同：1
> 
> 时间：2012-09-03T10:37:40.780
> 
> 标签：android, zxing, titanium-modules

可以告诉我如何在 TITANIUM 的 android 应用程序中使用 ZXing 库。我已经从以下路径下载了 ZXing 库：[http ://code.google.com/p/zxing/downloads/detail?name=ZXing- 2.0.zip](http://code.google.com/p/zxing/downloads/detail?name=ZXing-2.0.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:56:19.697

创建自定义模块是执行此操作的唯一方法。因此，您必须了解本机平台。

如果您有原生平台经验（或者只知道 Android 的 Java），模块并不太难。我会检查 moddevguide 示例模块，该模块充满了来回传递数据的示例，该模块[可在 github 上的公共 Titanium 存储库中找到。](https://github.com/appcelerator/titanium_modules/tree/master/moddevguide/mobile/android)此外，paint 模块是一个很好的子类化示例来滚动您自己的钛组件。

所以首先去这里并按照这些关于如何启动自己的模块的分步说明进行操作。[文档链接](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Android_Module_Development_Guide)

然后查看此代码，了解在整个应用程序中传递数据的绝佳示例。[钛Github](https://github.com/appcelerator/titanium_modules/tree/master/moddevguide/mobile/android)

*除此之外*，如果您没有本地平台经验，为什么不直接使用 Titanium Plus 模块条码扫描器？ [还是这个开源替代品？](https://github.com/mwaylabs/titanium-barcode#readme)

此时无需重新发明轮子。

# php - 在 PHP 中获取变量名

> ID：12246197
> 
> 赞同：1
> 
> 时间：2012-09-03T10:38:10.963
> 
> 标签：php, arrays

在下面的代码中，如何检查是否`$variable`等于“$one”。

```
<?php  
    $one = array (1,2,3);
    $two = array (4,5,6);

    $variables = array ($one, $two);

    foreach ($variables as $variable){
        //check if the $variable is equal to "$one"
            //do stuff that is specific for array $one
    }   
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:42:30.690

欲了解更多信息，请访问[此](http://php.net/manual/en/language.operators.comparison.php)

```
<?php  
    $one = array (1,2,3);
    $two = array (4,5,6);

    $variables = array ($one, $two);

    foreach ($variables as $variable){
        //check if the $variable is equal to "$one"
           if($variable === $one)
            //do stuff
    }   
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:41:51.997

简单地说，你不能。不过，您可以为这些值添加一个键：

```
<?php  
$one = array (1,2,3);
$two = array (4,5,6);

$variables = array ( 'one' => $one, 'two' => $two);

foreach ($variables as $key => $variable){
    //check if the $variable is equal to "$one"
    if( $key === 'one' ) {
        //do stuff that is specific for array $one
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:43:14.243

```
 foreach ($variables as $variable){
        if($variable == $one)//TRUE if $a and $b have the same key/value pairs.
        {

        }
    } 
```

如果您还想检查订单和类型，您可以执行以下操作：

```
 foreach ($variables as $variable){
        if($variable === $one)
        {

        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T10:57:24.733

你可以检查

```
if($variable===$one) 
```

您正在使用多维数组。请记住，您需要检查“===”，而不是“==”，因为它不是变量，甚至不是字符串。

# perl - Perl：“系统”何时真正返回？

> ID：12246199
> 
> 赞同：3
> 
> 时间：2012-09-03T10:38:31.997
> 
> 标签：perl, unix, cgi

在 CGI 网页中，我有一个按钮，按下该按钮会提交一个表单并调用一个子程序，该子程序具有：

```
sub run {
     &emailDebug("Started " .localtime);
    system("(/tools/script1.pl &) ; (/tools/script2.pl &)");
    &emailDebug("Ended " .localtime);
} 
```

它们都从 11:08:05 开始（因此是花哨的命令），我自己在脚本中获取时间戳，然后通过电子邮件将它们发送给自己。

第二个完成 11:08:22 和第一个 11:08:36 但从上面发送的电子邮件将显示 11:08:06。

最有趣的是，只要两个脚本中较长的一个运行，页面就会加载大约 30 秒。

我不介意页面加载，但我不明白为什么它会这样。随着页面的加载，显然子程序`run`本身并没有返回，但两封电子邮件几乎同时发送。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T11:20:47.873

`system`只要您调用的命令允许它返回，它就会返回。在此特定示例中，它应该立即返回，但这可能会根据 shell 中断。为了更加确定，您可能会尝试将通话一分为二：

```
system("/tools/script1.pl &");
system("/tools/script2.pl &"); 
```

此外，根据您的网络服务器配置，它可能会注意到您仍然在分叉子项中打开了 STDOUT，即使您的主脚本已经结束，它也会等待所有子项结束后再提供响应。将您生成的脚本 STDOUT/ERR 重定向到 /dev/null，`close(STDOUT)`并`close(STDERR)`在主脚本中或查阅您的网络服务器/框架文档，了解如何在完成输出后刷新响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:52:32.890

您正在将脚本作为后台进程执行，因此系统会立即返回。如果要等待完成，请删除`&`s 并按顺序执行它们：

```
system("(/tools/script1.pl) ; (/tools/script2.pl)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:39:38.170

*上面的打印语句*是什么意思？您的代码显示没有`print`调用

`run`一旦两个子进程启动，您的子例程就会返回。`system`您可以通过两次调用并删除命令行中的括号来使事情更清楚。由于尾随＆号，对系统的两个调用都会立即返回，让孩子们独立运行

在调用 to 之后必须有其他东西延迟页面的返回`run`，并且大概它以某种方式检测子进程的工作何时完成

顺便说一句，当您进行简单调用时，您不应该*在*子例程名称上使用与号。自从 18 年前我们得到 Perl 5 以来，它就没有必要了

# java - 适用于任何语言的不同齿轮库

> ID：12246200
> 
> 赞同：0
> 
> 时间：2012-09-03T10:38:34.877
> 
> 标签：java, php, c, linux, gearman

我正在做一个关于 Gearman 的演示文稿，并想知道是否有人知道 PHP 以外的其他语言用于注册函数的示例。

基本上我正在寻找以下任何语言的等价物：

```
$gm = new GearmanWorker();
$gm->addFunction('reverse', function(GearmanJob $job){
    return strrev($job->workload());
});
while(1){ $gm->work(); } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T19:33:20.707

基本示例

红宝石 Python PHP

也可以在以下网址找到：http: [//gearmanhq.com](http://gearmanhq.com/help/tutorials/)

你总能在[http://search.cpan.org/](http://search.cpan.org/)找到 Perl 示例，搜索 Gearman。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T18:38:07.480

java-gearman-service 在这里有一个例子： [http ://code.google.com/p/java-gearman-service/source/browse/#svn%2Ftrunk%2Fexamples%2Fecho](http://code.google.com/p/java-gearman-service/source/browse/#svn%2Ftrunk%2Fexamples%2Fecho)

C版打包了一些例子： [https ://launchpad.net/gearmand](https://launchpad.net/gearmand)

# load-balancing - 我们什么时候可以说两个 Azure 虚拟机是负载平衡的

> ID：12246203
> 
> 赞同：0
> 
> 时间：2012-09-03T10:38:45.707
> 
> 标签：load-balancing, azure-vm-role

我对 Azure 中的负载平衡 VM 有一些疑问。

当我将虚拟机添加到现有部署（已经在运行的虚拟机）时，它会为添加的虚拟机分配相同的 dns 名称，但没有为虚拟机分配虚拟 IP。但端口显示负载平衡虚拟机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:51:42.270

我相信您所说的是虚拟机编号 2 到 N 似乎使用与虚拟机编号 1 相同的 DNS 名称联机。

这是预期的行为。VIP 是虚拟 IP 地址，它是负载平衡器外部边缘的 DNS 名称。对于负载均衡器后面的每台负载均衡机器，这应该是相同的。每个实例的内部 IP 称为 DIP 或专用 IP 地址。

负载均衡器的工作是接收对 VIP 的请求并将这些调用重新分配给每个 DIP。一旦请求由单个实例提供服务，它就会通过负载均衡器路由回调用者。

这是你看到的，还是我误解了你的问题？

# uitableview - 点击表格行打开地图注释？关于钛

> ID：12246204
> 
> 赞同：0
> 
> 时间：2012-09-03T10:38:47.100
> 
> 标签：uitableview, titanium, mkannotationview

我是 Titanium 的新手，并且正在使用 Titanium 制作我的第一个 iOS 应用程序，但我遇到了一个用例。

我试图通过单击表格视图上的特定行来打开地图上的注释。我在这方面没有取得多大成功，也无法在网上找到任何帮助。这是不可能的，还是我只是做错了什么？以下是我的代码：

```
table.addEventListener('click', function (event) {
    Ti.API.info("Index of row that is clicked: "+event.index);
    globals.annos[event.index].fireEvent('click');
}); 
```

'table' 是我的 TableView 有一堆行和 global.annos[] 是我的注释数组。

我的目标是打开与我单击的表格行的索引相对应的注释。上面的代码没有实现任何目标。我认为触发注释的“点击”事件会打开注释，但显然我错了。

有人可以帮我吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:13:40.270

如果您使用的是 Android，则不支持注释的单击事件。一种更跨平台的方法是在 MapView 本身上触发 click 事件。

但是，如果您使用的是 iOS，您的点击事件设置不正确，您必须根据文档定义您点击的注释的哪一部分：

`On iOS, if the user clicks on the pin or annotation, the clicksource is one of: pin, annotation, leftButton, rightButton, leftView, rightView, title, or subtitle. If the user deselects the annotation by clicking elsewhere in the map view, clicksource is null.`

而且您没有传递`event`定义合成事件属性的对象。在您的表事件侦听器中尝试此操作：

```
var event = {
    source : table,
    type : 'click',
    clicksource : 'pin'
};
globals.annos[event.index].fireEvent('click', event); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:33:00.223

解决了！缺乏更彻底地阅读文档！

```
mapview.selectAnnotation(globals.annos[event.index]); 
```

这将打开相应的注释。

# javascript - 如何通过网络套接字构建 xmpp 网络聊天应用程序，如 gtalk

> ID：12246205
> 
> 赞同：2
> 
> 时间：2012-09-03T10:38:47.183
> 
> 标签：javascript, xmpp, websocket, instant-messaging, facebook-chat

如何使用 javascript+html 或 asp.net 在 web 套接字 web 聊天应用程序（如 gtalk）上构建 xmpp？ıt 接受文件传输、视频会议、私人或群聊。多个用户和服务器可以相互通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:51:50.777

如果您希望您的聊天系统与 google 的 gtalk 一起使用，或者如果您想创建自己的聊天服务器并制作私有系统，则需要在 javascript 上实现 xmpp，

按照对您有帮助的链接 [http://professionalxmpp.com/](http://professionalxmpp.com/) https://github.com/maxpowel/jQuery-XMPP-plugin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-23T16:30:27.773

有两种方法可以实现您的目标：

1.  您可以从头开始构建自己的聊天解决方案（使用[XMPP XEP](https://xmpp.org/extensions/)等和客户端应用程序构建后端解决方案）
2.  为了让您更轻松，您可以使用一些 BaaS 提供商提供的现成后端和 SDK。通过这种方式，您可以专注于构建客户端解决方案及其 UI，而您已经有一个现成的后端和一组连接到该后端并使用它的请求。

您可以尝试[ConnectyCube](https://connectycube.com/)，因为它同时具有聊天和视频聊天功能。对于视频聊天，他们有两种选择：WebRTC 点对点解决方案和基于 SFU 的解决方案。

# jboss5.x - 访问 JBoss 5.1.0.GA 的 mbean 时如何解决“javax.management.InstanceNotFoundException”？

> ID：12246206
> 
> 赞同：0
> 
> 时间：2012-09-03T10:38:48.000
> 
> 标签：jboss5.x, mbeans

访问 JBoss 5.1.0.GA 的 mebeans 时出现以下错误。

```
 Exception in thread "main" javax.management.InstanceNotFoundException: jboss.system:type=ServerInfo
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1094)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:662)
at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:638)
at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1404)
at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:72)
at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1265)
at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1360)
at javax.management.remote.rmi.RMIConnectionImpl.getAttribute(RMIConnectionImpl.java:600)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)
at sun.rmi.transport.Transport$1.run(Transport.java:159)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
at javax.management.remote.rmi.RMIConnectionImpl_Stub.getAttribute(Unknown Source)
at javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.getAttribute(RMIConnector.java:878)
at test.mbean.JBossJMXClient.main(JBossJMXClient.java:30) 
```

这是我的java类；

```
public class JBossJMXClient {
    public static void main(String[] args) throws Exception {
        String host = "192.168.0.249";// Your JBoss Bind Address default is
                                    // localhost
    int port = 4545; // management-native port
        String urlString = "service:jmx:rmi:///jndi/rmi://" + host + ":" + port
            + "/jmxrmi";
        System.out.println("        \n\n\t****  urlString: " + urlString);
    JMXServiceURL serviceURL = new JMXServiceURL(urlString);
    JMXConnector jmxConnector = JMXConnectorFactory.connect(serviceURL,
            null);
    MBeanServerConnection connection = jmxConnector
            .getMBeanServerConnection();

    // Invoke on the JBoss AS MBean server
    int count = connection.getMBeanCount();
    System.out.println(count);
    ObjectName objectName = new ObjectName("jboss.system:type=ServerInfo");
    String javaVersion = (String)connection.getAttribute(objectName, "JavaVersion");
    System.out.println(javaVersion);
    jmxConnector.close();
     }
  } 
```

我已经检查了防火墙。它没有问题。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T17:58:42.007

尝试使用 RMI 默认端口：1090。确实，对您的 URL 做一些更改；

```
String urlString = "service:jmx:rmi:///jndi/rmi://" + host + ":" + port + "/jmxconnector"; 
```

查看 url 的最后一部分：从“jmxrmi”到“jmxconnector”。

# ruby-on-rails - uuid_it ：无法批量分配受保护的属性：uuid

> ID：12246211
> 
> 赞同：1
> 
> 时间：2012-09-03T10:39:22.930
> 
> 标签：ruby-on-rails, gem, uuid

我使用[uuid_id](https://github.com/aduffeck/uuid_it) gem 为我的应用程序中的各种模型生成 UUID（Rails 3.2.5 和 Ruby 1.9.3p194）。我正确地遵循了[这里给出的步骤](https://github.com/aduffeck/uuid_it)

创建标记为 的模型时出现此错误`uuid_it`。如果我`uuid_it`从模型中删除呼叫，它工作正常

这是日志的快照

```
SQL (2.1ms)  INSERT INTO "applications" ("created_at", "description", "name",  "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Mon, 03 Sep 2012 10:17:59 UTC +00:00], ["description", "data mining"], ["name", "BlueBerry"], ["updated_at", Mon, 03 Sep 2012 10:17:59 UTC +00:00]]
  Uuid Load (1.2ms)  SELECT "uuids".* FROM "uuids" WHERE "uuids"."uuidable_id" = 5 AND "uuids"."uuidable_type" = 'Application' LIMIT 1
   (0.2ms)  ROLLBACK
Completed 500 Internal Server Error in 81ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: uuid):
  app/controllers/applications_controller.rb:13:in `create' 
```

第 13 行在哪里`application.create`

**编辑**

**应用程序/控制器/应用程序.rb**

```
class ApplicationsController < ApplicationController
  # some code here
  def create
    @application = Application.new(params[:application])
    @application.creator = current_user
    @application.organization = current_organization
    if @application.save
      redirect_to @application, notice: "Successfully created application."
    else
      render action: 'new'
    end
  end
  # few lines here
end 
```

# javascript - ember.js：是否可以将插座连接到 applicationController？

> ID：12246212
> 
> 赞同：0
> 
> 时间：2012-09-03T10:39:31.560
> 
> 标签：javascript, ember.js

为什么必须始终创建视图和控制器？是不是可以说：每个没有特定控制器类的视图，当被附加为插座时，都回退到使用 applicationController 实例。

可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:08:49.550

该`connectOutlet`方法有一个`controller`可以通过的选项：

```
postsController.connectOutlet('createPost', { controller: 'application' }) 
```

也就是说，我们正在总体上改进路由器 API，以更加关注模板并使 View 类成为可选的（如果你有要处理的事件，你只需要一个）。

# build - Gradle 多项目，更改默认构建文件名 (build.gradle)

> ID：12246215
> 
> 赞同：6
> 
> 时间：2012-09-03T10:40:02.320
> 
> 标签：build, gradle, multi-project

我们在根项目中有一个带有 settings.gradle 且没有 build.gradle 的多项目。

gradle 的默认行为只是在顶部目录中查找 settings.gradle 文件并读取之前定义的每个项目的 build.gradle。

我的问题是：根据已签出多项目的环境，从根项目运行构建时，我想以默认的“build2.gradle”而不是“build.gradle”运行。

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:52:31.847

或者对于嵌套的多项目`settings.gradle`：

```
setBuildFileName(rootProject)

def setBuildFileName(project) {
    project.children.each { childProject ->
    childProject.buildFileName = "${childProject.name}.gradle"
    assert childProject.projectDir.isDirectory()
    assert childProject.buildFile.isFile()
    setBuildFileName(childProject)
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:39:53.747

OK完成...

在 settings.gradle 中：

```
String myFileName = "build2.gradle"

rootProject.buildFileName = myFileName
rootProject.children.each { project ->
    project.buildFileName = myFileName
    assert project.projectDir.isDirectory()
    assert project.buildFile.isFile()
} 
```

# java - 从 API 请求 json 时无法下载超过 16144 个字符

> ID：12246216
> 
> 赞同：0
> 
> 时间：2012-09-03T10:40:08.470
> 
> 标签：java, android, json, http, download

我有一个 android 应用程序，它以 JSON 格式下载其信息。

一个典型的 JSON 下载大约是 2,000-3,000 个字符。但我想强调一下，所以我创建了一个更大的文件（约 48,000 个字符）。随着文件的发展，这仍然很小，不到 50kb。

我遇到的问题是下载时我只得到 16144 个字符的数据。即只`reader.readLine()`返回一行包含 16144 个字符的行，`client.execute(request, new BasicResponseHandler());`. 显然，只有文件的一部分，我的 JSON 解析代码很快就会失败，因为它不是有效的 JSON 对象。

没有引发异常，因此它不是内存不足错误。而且这个问题在 HTC 渴望（2.2）和 Galaxy Nexus（4.1.1）上是可重复的，所以也不是特定于操作系统的。我已经在 Web 浏览器中测试了 URL，它工作正常，所有 JSON 都可用，因此它不是服务器错误。

**问题**

谁能指出为什么它只下载 16144 个字符，以及如何让它下载整个文件？

**方法#1**

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet(uri);
HttpResponse response = client.execute(request);

InputStream in = response.getEntity().getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(in));
StringBuilder str = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null)
{
    str.append(line);
}
in.close();
result.setJSONResult(str.toString()); 
```

**方法#2**

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet(uri);
HttpResponse response = client.execute(request);

String json = client.execute(request, new BasicResponseHandler());
result.setJSONResult(json); 
```

注意 - 该 url 位于 LAN 网络上 (http://192.168.0.99:8080...)，所以我没有包含它，因为它没有用处。

**更新 - 已修复**

修复了问题。最后我把它归结为文件传输问题，而不是手机的内存限制。虽然它可以在 PC (Chrome) 上运行，但我发现它在 android 以外的其他地方被破坏，例如在网站和其他浏览器 (Safari) 上无法使用原始 API 调用。根本问题是网络服务器的代理 ngix，想要缓冲更大的响应（超过 32kb），但是它从来没有对它用于缓冲的服务器文件夹具有写权限。这意味着它发送了部分文件，开始缓冲并由于无法写入而遇到严重错误。当它出错时，它停止发送文件的其余部分，因此它停止在异常数量的字节处。感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:45:40.227

这是因为这是字符串可以容纳的最大大小——Java 规范总是 2147483647 (2^31 - 1)，数组的最大大小，String 类用于内部存储）或最大堆大小的一半（因为每个字符是两个字节），以较小者为准。

并且可能堆大小将小于 40kbs

您可以使用 json 阅读器而不是使用字符串来存储来自网络的数据，请参阅[http://developer.android.com/reference/android/util/JsonReader.html](http://developer.android.com/reference/android/util/JsonReader.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:07:35.830

修复了问题。最后我把它归结为文件传输问题，而不是手机的内存限制。虽然它可以在 PC (Chrome) 上运行，但我发现它在 android 以外的其他地方出现故障，例如网站和其他浏览器 (Safari) 无法使用原始 API 调用。潜在的问题是网络服务器的代理 ngix，想要缓冲更大的响应（超过 32kb），但它从来没有对它用于缓冲的服务器文件夹具有写权限。这意味着它发送了部分文件，开始缓冲并由于无法写入而遇到严重错误。当它出错时，它停止发送文件的其余部分，因此它停止在异常数量的字节处。感谢你的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:41:12.643

您正在使用基于行的阅读器来读取非基于行的数据。当您调用 时`readLine`，您要求它强制将读取的任何内容转换为一行文本。如果它实际上不是一行文本，这会破坏数据。

# javascript - 从计算机上传图像在 IE9 中不起作用

> ID：12246217
> 
> 赞同：2
> 
> 时间：2012-09-03T10:40:10.193
> 
> 标签：javascript, jquery, internet-explorer

我有一个特定的代码，它在 Google chrome 上运行良好，但在 IE9 上运行良好。我有一个 div，我将图像从计算机拖到 div 并在 Google Chrome 上加载，但在 IE9 上不加载。请帮忙..！

```
<div id="holder" ></div> 
    <p id="status">
        Please Drag your image from computer and paste it on the div to view it.
    </p>
</div> 
```

**jQuery：**

```
var holder = document.getElementById('holder'), 
state = document.getElementById('status'); 

if (typeof window.FileReader === 'undefined') { 
    state.className = 'fail'; 
} else { 
   state.className = 'success'; 
   state.innerHTML = 'Please Drag your image from computer and paste it on the div to view it.'; 
} 

holder.ondragover = function () { 
    this.className = 'hover'; 
    return false; 
}; 

holder.ondragend = function () { 
    this.className = ''; 
    return false; 
}; 

holder.ondrop = function (e) { 
    this.className = ''; 
    e.preventDefault();    
    var file = e.dataTransfer.files[0], 
    reader = new FileReader(); 
    reader.onload = function (event) { 
        alert(event); 
        console.log(event.target); 
        holder.style.background = 'url(' + event.target.result + ') no-repeat center'; 
    }; 

    console.log(file); 
    reader.readAsDataURL(file);
    return false; 
}; 
```

可能是什么问题呢？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:41:47.340

IE9 浏览器不支持HTML5 [File API](http://www.w3.org/TR/FileAPI/)

**UPD：**和 IE9 中的 HTML5[拖放](http://www.w3.org/TR/html5/dnd.html#dnd)API 支持只是部分的，您尝试的部分 ( `dataTransfer.files`) 不受支持。[在这里](http://caniuse.com/#search=drop)你可以看到哪些浏览器支持拖放 HTML5 API

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:44:06.697

恐怕要等到IE10 2010.3版本才支持查看你目前使用的是哪个版本

# java - Java 和 android：一种监听器

> ID：12246218
> 
> 赞同：0
> 
> 时间：2012-09-03T10:40:19.247
> 
> 标签：java, android, listener

谢谢你给我几分钟的时间:)我正在尝试做一些我正在做的事情可能不可能的事情:D看看这个（错误的）代码：

```
public boolean myFunction() {
        myClassA.setOnResultSet( new myClassB() {

            @Override
            public Boolean onResultSet() {
                // TODO Auto-generated method stub
                return (Boolean)myClassA.getResult();
            }
        });

        Intent myIntent = new Intent(mInstanceContext, MediaPlayerService.class);
        myIntent.setAction("isThatParticularStateTrueOrFalse");
        mInstanceContext.startService(myIntent);

} 
```

代码的最后 3 行向服务请求某些内容。该服务会将问题的结果保存在单例类 X 中，以便第一个类（我写给你的那个类）可以从类 X 中读取结果。但是我认为有一个问题是由事实引起的我正在使用服务：服务很慢，所以我无法立即得到我的问题的结果。这是设置结果时单例类调用方法 onResultSet() 的方式。（这是我试图自己实现的一种监听器：D）但是如何让函数 myFunction() 返回结果呢？不幸的是，我无法使 onResultSet() 函数返回结果：这是我在编写给您的代码中尝试执行的操作，但是，如您所见，它会出错。我理解为什么我会收到错误，但作为一个新手，如果不使用广播器（如果可能的话，我不想使用），我看不到解决方案。谢谢你们 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:02:53.020

你试过[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)吗？如果您需要将更新发布到您的主 UI 线程，您可以使用[Handlers](http://developer.android.com/reference/android/os/Handler.html)。

# sql - 如何使用 sql 查询对结果进行排序但未选择行？

> ID：12246219
> 
> 赞同：1
> 
> 时间：2012-09-03T10:40:33.120
> 
> 标签：sql, sql-order-by

```
SELECT ORG.DESCRIPTION, ORG.EXTERNALKEY
FROM organization org
WHERE org.ownerid = (SELECT id
                      FROM organization
                     WHERE externalkey = '970000')
     OR org.externalkey = '970000'
ORDER BY org.description; 
```

这是我的 sql 查询。我使用了“ORDER BY org.description”。但这并不是我的要求。我想在查询结果中创建第一个 (org.externalkey='970000')。行将被排序（但 org.externalkey='970000' 行将是第一个）。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T10:42:10.160

尝试这个：

您只需要在 ORDER BY CLAUSE 中添加 CASE 语句

```
 ORDER BY 
 CASE WHEN externalkey = '970000' THEN 0 else 1 END,
           org.description 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:42:19.117

尝试这个：

```
SELECT ORG.DESCRIPTION, ORG.EXTERNALKEY
FROM organization org
WHERE org.ownerid = (SELECT id
                      FROM organization
                     WHERE externalkey = '970000')
     OR org.externalkey = '970000'
ORDER BY org.externalkey ,org.description; 
```

# linux - CURL：抓取直播视频

> ID：12246223
> 
> 赞同：2
> 
> 时间：2012-09-03T10:40:45.530
> 
> 标签：linux, bash, curl, wget

我可以使用 curl 抓取视频吗？我正在使用一个网站从 liveleak 下载视频，但它停止工作。我的一个脚本需要这个。

基本上这是链接： [http ://www.liveleak.com/e/955_1345380192](http://www.liveleak.com/e/955_1345380192)

**重定向到这个** [http://edge.liveleak.com/80281E/u/u/ll2_player_files/mp55/player.swf?config=http://www.liveleak.com/player?a=config%26item_token=955_1345380192%26embed =1%26extra_params=](http://edge.liveleak.com/80281E/u/u/ll2_player_files/mp55/player.swf?config=http://www.liveleak.com/player?a=config%26item_token=955_1345380192%26embed=1%26extra_params=)

**并且该 conf 链接包含视频链接**。每次我尝试下载它时，我都会得到 ---> 确保设置了 file_url、file_token 或 playlist_token！ [http://www.liveleak.com/player?a=config%26item_token=955_1345380192%26embed=1%26extra_params=](http://www.liveleak.com/player?a=config%26item_token=955_1345380192%26embed=1%26extra_params=)

到目前为止我已经尝试过：

```
 curl http://edge.liveleak.com/80281E/u/u/ll2_player_files/mp55/player.swf?config=http://www.liveleak.com/player?a=config%26item_token=955_1345380192%26embed=1%26extra_params= -s -L -b LCOOKIE -c LCOOKIE -o LIVE

    curl http://edge.liveleak.com/80281E/u/u/ll2_player_files/mp55/player.swf?config=http://www.liveleak.com/player?a=config%26item_token=955_1345380192%26embed=1%26extra_params= -I

    curl http://edge.liveleak.com/80281E/u/u/ll2_player_files/mp55/player.swf?config=http://www.liveleak.com/player?a=config%26item_token=955_1345380192%26embed=1%26extra_params= -v

    curl http://www.liveleak.com/player?a=config&item_token=955_1345380192&embed=1&extra_params=

    wget http://www.liveleak.com/player?a=config&item_token=955_1345380192&embed=1&extra_params=

curl  -A "Mozilla/5.0 (X11; U; Linux x86_64; ru; rv:1.9.2.15) Gecko/20110303 Ubuntu/10.10 (maverick) Firefox/3.6.15" http://www.liveleak.com/player?a=config&item_token=955_1345380192&embed=1&extra_params= 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T01:04:20.827

这是您史诗般的单线：

```
UA="Mozilla/5.0 (X11; U; Linux x86_64; ru; rv:1.9.2.15) Gecko/20110303 Ubuntu/10.10 (maverick) Firefox/3.6.15"; curl -A "$UA" $(sed -n -e 's/.*<file>\(.*\)<\/file>.*/\1/p' <(wget -q -O - $(wget -U "$UA" -nv -r -np -nd -H --spider "http://www.liveleak.com/e/955_1345380192" 2>&1 | egrep ' URL:' | awk '{print $4}' | sed "s/.*\?config\=//g" | sed -e's/%\([0-9A-F][0-9A-F]\)/\\\\\x\1/g' | xargs echo -e))) 
```

根据要求，它使用 curl（以及一些其他工具）；有关说明，请参阅 bash 手册和其他命令的文档。

**简短摘要**：他们在 xml 文件中移动了有关视频的信息。为了下次轻松使用最新的 Firefox，它能够监视所有 HTTP 请求并记录其内容（无需附加组件！）

# visual-studio-2012 - Visual Studio 2012 无法启动

> ID：12246224
> 
> 赞同：35
> 
> 时间：2012-09-03T10:40:46.013
> 
> 标签：visual-studio-2012

我从我们的 MSDN 订阅中安装了 VS2012 Premium，前几天它运行良好，但后来我安装了一些扩展，我现在无法启动 VS2012，它给出了错误：

```
Faulting application name: devenv.exe, version: 11.0.50727.1, time stamp: 0x5011ecaa
Faulting module name: ntdll.dll, version: 6.1.7601.17725, time stamp: 0x4ec49b8f
Exception code: 0xc0000374
Fault offset: 0x000ce6c3
Faulting process id: 0xee8
Faulting application start time: 0x01cd89bb777fc1dd
Faulting application path: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe
Faulting module path: C:\Windows\SysWOW64\ntdll.dll 
```

我在 Windows 7 64 位上运行它。

我尝试过修复、卸载和重新安装，但什么也没有。我试图恢复到以前的恢复系统点，但没有。

我记得安装的扩展：

*   VS10x 代码图
*   VS命令
*   视觉SVN
*   Nuget 经理

（以上所有我的同事都拥有它，并且对他们来说效果很好）并且：

*   网络要点
*   Visual Studio 颜色主题编辑器
*   慢猎豹
*   移动就绪 HTML5

问题是：

1.  其他人有过这个问题吗？
2.  有没有办法从命令行或软件卸载扩展？（我删除了扩展文件夹，但没有做任何事情）
3.  我可以修复“C:\Windows\SysWOW64\ntdll.dll”吗？这个dll真的有问题吗？

我还没有在其他版本中找到任何类似的问题，因为 VS2012 是新的，似乎也没有太多信息。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-03T11:24:24.477

它现在正在工作！这就是我所做的：

按照[这里](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/d848776a-b00f-4311-ab09-3a8777462968)的建议：

1.  删除了密钥：`[HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers]`. VS2012 加载但在我能做任何其他事情之前崩溃（错误`C:\Windows\syswow64\KERNELBASE.dll`）
2.  然后我删除了：
    *   `[HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0]`
    *   `[HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config]` 并重新开始并且工作正常。

我显然丢失了所有设置，但没什么大不了的，因为我现在可以做一些工作了！:)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-05T22:27:46.903

使用**/SafeMode**参数运行**devenv.exe**也可能会修复它。

 *** * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-30T17:01:28.403

我打开了一个不同的`.sln`项目，然后又回到了我的错误项目并加载了！也许是项目关闭错误的原因

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-06T12:38:59.723

*除非所有*Visual Studio 实例立即崩溃，否则删除所有 VS 设置有点苛刻。

当您遇到这种情况时可能会发生的是，Visual Studio 打开了导致它首先崩溃的设计器窗口......这通常是一个扩展，但它也可能只是 VS 中的一个错误。例如：我在使用 LINQ-TO-SQL 并打开数据库模式设计器时有时会遇到这种情况。

最简单的解决方法是简单地删除`SUO`具有解决方案设置的文件，然后打开`SLN`. 然后你可以做任何你想做的事情，除了转到有问题的文件——一旦你知道那个文件是什么，你就可以修复它（例如，在 DBML 的情况下，只需删除它并重新生成它）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-06T22:55:24.293

> 只需将所有 dte*.olb 文件从 C:\Program Files (X86)\Common Files\Microsoft Shared\MSEnv 复制到 C:\Program Files X86\Microsoft Visual Studio 9.0\Common7\IDE。

来自[https://mycodepad.wordpress.com/2013/12/07/visual-studio-2012-4-run-as-administrator-the-application-cannot-start-error/](https://mycodepad.wordpress.com/2013/12/07/visual-studio-2012-4-run-as-administrator-the-application-cannot-start-error/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-06-04T00:26:49.020

简单地以管理员身份运行似乎足以让我运行它，至少是暂时的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-12T07:04:27.007

首先使用 /SafeMode 选项启动 devenv.exe，然后取消选中 Allow macros to run from "Enviroment->Add-in/Macros Security" 并测试！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-03T15:00:58.047

我有一个类似的 ntdll.dll 问题... C++ 更新 SQL Server ...

我通过使用**SQL Server OBDC 连接**而不是**SQL Server Native Client 11.0来修复它**

我们试图了解为什么它适用于某些更新而不适用于其他更新......但它一直适用于阅读。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-31T09:09:42.250

以上所有解决方案都对我不起作用，但这一个有效。

将 dte*.olb 从 C:\Program Files (X86)\Common Files\Microsoft Shared\MSEnv 复制到 C:\Program Files X86\Microsoft Visual Studio 9.0\Common7\IDE。

[http://www.clausconrad.com/blog/the-application-cannot-start-running-visual-studio-as-administrator](http://www.clausconrad.com/blog/the-application-cannot-start-running-visual-studio-as-administrator)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-09T10:05:53.250

问题是由于路径变量。将环境变量中的路径变量设置为低于 2048 个字符对我有用。**

# c# - C# 过滤 XML 数据以包含超链接

> ID：12246225
> 
> 赞同：1
> 
> 时间：2012-09-03T10:40:46.137
> 
> 标签：c#, asp.net, xml, vb.net

我目前在我的主页上使用一个过滤器，它允许您从下拉列表中选择一个类别，然后通过点击搜索显示客户名称和徽标。

我使用了以下链接中解释的教程：

[http://www.dbtutorials.com/retrieve/linq-to-xml-cs.aspx](http://www.dbtutorials.com/retrieve/linq-to-xml-cs.aspx)

目前虽然我像这样在 XML 中手动输入超链接：

```
<ClientName><![CDATA[<a href='category-list.aspx?cat=exampleclient'>Example Client</a>]]></ClientName> 
```

这确实正确显示了链接，但认为它有点混乱。

我更喜欢它，所以它看起来像：

```
<ClientName>Example Client</ClientName> 
```

在 c# 中，我试图使超链接工作，但它并没有完全奏效。这是在获取 XML 信息的编辑之前：

```
litXMLData.Text = litXMLData.Text + person.ClientLogo + "<br />";                  
litXMLData.Text = litXMLData.Text + person.ClientName; 
```

当我尝试更新它时：

```
litXMLData.Text = "<a href='category-list.aspx?cat=" + litXMLData.Text + person.ClientName + ""'>" + person.ClientName + "</a>"; 
```

并出现以下错误：

CS1010：常量换行

所以我有点卡住了......有什么想法吗？

如果在我上面的更新之前有帮助，下面是所有 C# 代码：

```
using System;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Xml;

public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
if(!IsPostBack)
loadDDL();
}

protected void loadDDL()
{
XmlDocument doc = new XmlDocument();
doc.Load(Server.MapPath("XML/homepage-results.xml"));
XmlNodeList nodeList = doc.SelectNodes("Persons/Person");

//Below code modified by Chris so duplicated categories are not displayed ;

foreach(XmlNode node in nodeList)
{
    ListItem newItem = new ListItem(node.SelectSingleNode("category").InnerText);

    if (!ddlcategory.Items.Contains(newItem))
    {
        ddlcategory.Items.Add(newItem);
    }
}
}

//End of modification ;

protected void butGetXML_Click(object sender, EventArgs e)
{
XDocument xmlDoc = XDocument.Load(Server.MapPath("XML/homepage-results.xml"));

var persons = from person in xmlDoc.Descendants("Person")
select new
{
ClientLogo = person.Element("ClientLogo").Value,
category = person.Element("category").Value,
ClientName = person.Element("ClientName").Value,
};

litXMLData.Text = "";
foreach (var person in persons)
{
litXMLData.Text = litXMLData.Text + "" + person.ClientLogo + "<br />";
//Removed category name displaying on the screen - litXMLData.Text = litXMLData.Text + "Category: " + person.category + "<br />";     
litXMLData.Text = litXMLData.Text + "" + person.ClientName + "<br /><br />";
}

if (litXMLData.Text == "")
litXMLData.Text = "No Results.";
}

protected void butFilterXML_Click(object sender, EventArgs e)
{
XDocument xmlDoc = XDocument.Load(Server.MapPath("XML/homepage-results.xml"));

var persons = from person in xmlDoc.Descendants("Person")
where person.Element("category").Value == ddlcategory.SelectedItem.ToString()
select new
{
ClientLogo = person.Element("ClientLogo").Value,
category = person.Element("category").Value,
ClientName = person.Element("ClientName").Value,
};

litXMLData.Text = "";
foreach (var person in persons)
{

litXMLData.Text = litXMLData.Text + person.ClientLogo + "<br />";                   
litXMLData.Text = litXMLData.Text  + person.ClientName + "<br /><br />";

}

if (litXMLData.Text == "")
litXMLData.Text = "No Results.";
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:57:04.477

`""'>"`应该是`"'>"`。这就是您收到异常的原因，它不是有效的字符串。

更一般地，我倾向于将 uri 和内容作为单独的项目（uri 作为属性本身）发送，或者定义 XML 以允许`<a>`直接在内容中使用元素。转义 XML 或 HTML 以放入 XML 是可行的，但如果您最终转义该 XML 以放入一些 XML，然后您转义到...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:53:08.347

经过一些修改，我现在输入了以下字符串格式：

所以从：

```
litXMLData.Text = litXMLData.Text + person.ClientLogo + "<br />";                  
litXMLData.Text = litXMLData.Text + person.ClientName; 
```

至：

```
foreach (var person in persons)
{
    topRow = string.Format(@"{0} <td>{1}</td>", topRow, person.ClientLogo);
    bottomRow = string.Format(@"{0} <td><img src='images/arrow.jpg'  align='texttop'><a href='category-list.aspx?cat={2}'>{1}</a></td>", bottomRow, person.ClientName, person.CategoryLink);
}

topRow = string.Format(@"{0} </tr>", topRow);
bottomRow = string.Format(@"{0} </tr>", bottomRow);

litXMLData.Text = string.Format(@"{0}{1}", topRow, bottomRow);

if (litXMLData.Text == "")
litXMLData.Text = "No Results.";
}
} 
```

所以现在 XML 现在可以是：

```
<Person>
<ClientLogo><![CDATA[<img src='images/clients/client.jpg'>]]></ClientLogo>
<ClientName>Client Example</ClientName>
<category>Support</category>
<CategoryLink>client-categories</CategoryLink>
</Person> 
```

稍微调整一下，我就可以从 XML 的徽标中删除所有的 '![CDATA[<'

# jquery - 更改 jQuery fullcalendar 中每个项目的颜色

> ID：12246229
> 
> 赞同：2
> 
> 时间：2012-09-03T10:41:06.363
> 
> 标签：jquery, fullcalendar

我正在使用[Fullcalendar](http://arshaw.com/fullcalendar/)来规划每位员工。我希望每个项目对应不同的员工有不同的颜色。

我在一个 jQuery 文件中添加了以下几行：

```
var couleur = $('span.color').text();
$('span.color').hide();

var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();

var calendar = $('#calendar').fullCalendar({
    theme: true,
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    eventClick: updateEvent,
    eventColor:couleur,
    selectable: true,
    selectHelper: true,
    select: selectDate,
    editable: true,

    events: "JsonResponse.ashx",
    eventDrop: eventDropped,
    eventResize: eventResized,
    eventRender: function (event, element) {
        //alert(event.title);

        element.qtip({
            content: event.description,
            position: { corner: { tooltip: 'bottomLeft', target: 'topleft'} },
            style: {
                border: {
                    width: 0,
                    radius: 3,
                    color: '#2779AA'

                },
                padding: 10,
                textAlign: 'left',
                tip: true, // Give it a speech bubble tip with automatic corner detection
                name: 'cream',
                width: 400,
                heigth: 600    // Style it according to the preset 'cream' style
            }
        });
    }
}); 
```

在包含日历的页面中：

```
<div id="calendar" runat="server">
    <span id="span1" class="color" runat="server">red</span>
</div> 
```

在后端代码中：

```
protected void Page_Load(object sender, EventArgs e)
{
    //CalendarEvent cevent;
    DataTable dt = new DataTable();
    SqlConnection con2 = new SqlConnection("Data Source=PC;Initial Catalog=base;Persist Security Info=True;User ID=sa;Password=hhh");
    SqlCommand cmd = new SqlCommand("select couleur_planning from cadres where prénom='maher'", con2);
    cmd.CommandType = CommandType.Text;
    // con2.Open()
    SqlDataAdapter adp = new SqlDataAdapter(cmd);
    adp.Fill(dt);
    span1.InnerText ="";

    span1.InnerText = dt.Rows[0]["couleur_planning"].ToString();
} 
```

它不起作用。它按最后一种颜色为所有事件颜色着色。[我看到了一个类似的问题](https://stackoverflow.com/questions/5668248/how-i-change-events-background-color-with-different-colors-in-fullcalendar)，这正是我想要的，但我需要以编程方式进行（我使用的是*fullcalendar*的最新版本）。

数据是从该类中提取的：

```
public static List<CalendarEvent> getEvents(DateTime start, DateTime end)
{
    //  string listcheck = HttpContext.Current.Session["listcheck"].ToString();
    List<CalendarEvent> events = new List<CalendarEvent>();
    SqlConnection con = new SqlConnection(connectionString);
    string sql;
    sql = "select D.date_deb as deb,D.date_fin as fin ,M.code as code,M.Objet as ob,M.type_mission as t,M.ville," +
"  M.Etat_mission,prénom,'Mission' AS type,S.nom  from Mission_date D  inner join missions M on " +
   " M.code=D.code_mission inner join mission_cadre C on D.code_mission=C.code_mission inner join cadres on cadres.code=C.code_cadre" +
    " join sociétés S on S.code=M.code_client " +
 "   where  ((D.Date_deb>='" + start + "' and D.Date_deb<='" + end + "')  OR (D.Date_fin>='" + start + "' and D.Date_fin<='" + end + "')) and " +
      " C.code_cadre In (select code from cadres)   union select tache_date.date_deb,tache_date.date_fin ,taches.code,Objet,type_tache,'',Etat_tache,prénom,'Tache' AS type,''  from tache_date " +
    "inner join taches on taches.code=tache_date.code_tache inner join tache_cadre C on tache_date.code_tache=C.code_tache inner join cadres on cadres.code=C.code_cadre where " +
     "((tache_date.Date_deb>='" + start + "' and tache_date.Date_deb<='" + end + "')  OR (tache_date.Date_fin>='" + start + "' and tache_date.Date_fin<='" + end + "')) and  C.code_cadre In (select code from cadres) " +
"union select Réunions.DateRéunion + Réunions.HeureDébut,Réunions.DateRéunion + Réunions.HeureFin ,Réunions.code,Réunions.Objet,''," +
 " '','',prénom,'Réunion' AS type,'' from Réunions  inner join réunion_cadre on .."

    SqlCommand cmd = new SqlCommand(sql, con);
          using (con)
    {
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        while (reader.Read())
        {

            CalendarEvent cevent = new CalendarEvent();
            // cevent.id = (Int32 )reader["code"];
            cevent.title = (string)reader[8] + ":" + "|" + SearchForChar((string)reader[7]) + "|" + SearchForChar((string)reader[9]) + "|" + SearchForChar((string)reader[6]) + "|" + SearchForChar((string)reader[4]) + "|" + SearchForChar((string)reader[3]) + "|" + SearchForChar((string)reader[5]) + "|";
            cevent.description = (string)reader[8] + ":" + "|" + (string)reader[7] + "|" + (string)reader[9] + "|" + (string)reader[6] + "|" + (string)reader[4] + "|" + (string)reader[3] + "|" + (string)reader[5] + "|";
            cevent.start = (DateTime)reader["deb"];
            cevent.end = (DateTime)reader["fin"];
            cevent.ApplyColor(Color.Aqua);
            events.Add(cevent);

        }
    }
    return events;
     } 
```

和 JSON 文件：

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ContentType = "application/json";

    DateTime start = new DateTime(1970, 1, 1);
    DateTime end = new DateTime(1970, 1, 1);

    start = start.AddSeconds(double.Parse(context.Request.QueryString["start"]));
    end = end.AddSeconds(double.Parse(context.Request.QueryString["end"]));

    String result = String.Empty;

    result += "[";

    List<int> idList = new List<int>();
    foreach (CalendarEvent cevent in EventDAO.getEvents(start, end))
    {
        result += convertCalendarEventIntoString(cevent);
        idList.Add(cevent.id);
    }

    if (result.EndsWith(","))
    {
        result = result.Substring(0, result.Length - 1);
    }

    result += "]";
    //store list of event ids in Session, so that it can be accessed in web methods
    context.Session["idList"] = idList;

    context.Response.Write(result);
}

private String convertCalendarEventIntoString(CalendarEvent cevent)
{
    String allDay = "true";
    if (ConvertToTimestamp(cevent.start).ToString().Equals(ConvertToTimestamp(cevent.end).ToString()))
    {

        if (cevent.start.Hour == 0 && cevent.start.Minute == 0 && cevent.start.Second == 0)
        {
            allDay = "true";
        }
        else
        {
            allDay = "false";
        }
    }
    else
    {
        if (cevent.start.Hour == 0 && cevent.start.Minute == 0 && cevent.start.Second == 0
            && cevent.end.Hour == 0 && cevent.end.Minute == 0 && cevent.end.Second == 0)
        {
            allDay = "true";
        }
        else
        {
            allDay = "false";
        }
    }
    return    "{" +
              "id: '" + cevent.id + "'," +
              "title: '" + HttpContext.Current.Server.HtmlEncode(cevent.title) + "'," +
              "start:  " + ConvertToTimestamp(cevent.start).ToString() + "," +
              "end: " + ConvertToTimestamp(cevent.end).ToString() + "," +
              "allDay:" + allDay + "," +
              "description: '" + HttpContext.Current.Server.HtmlEncode(cevent.description) + "'" +
              "},";
}

public bool IsReusable
{
    get
    {
        return false;
    }
}

private long ConvertToTimestamp(DateTime value)
{

    long epoch = (value.ToUniversalTime().Ticks - 621355968000000000) / 10000000;
    return epoch;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:24:14.880

尝试`backgroundColor`在您的`ProcessRequest`或`convertCalendarEventIntoString`功能中设置。本质上，您的事件字符串应如下所示：

```
return    "{" +
              "id: '" + cevent.id + "'," +
              "title: '" + HttpContext.Current.Server.HtmlEncode(cevent.title) + "'," +
              "start:  " + ConvertToTimestamp(cevent.start).ToString() + "," +
              "end: " + ConvertToTimestamp(cevent.end).ToString() + "," +
              "allDay:" + allDay + "," +
              "description: '" + HttpContext.Current.Server.HtmlEncode(cevent.description) + "'" +
              "backgroundColor:" + backgroundColor + "," +
              "},"; 
```

让我知道事情的后续..

# css - 基于内容的中间容器的自动高度

> ID：12246230
> 
> 赞同：0
> 
> 时间：2012-09-03T10:41:09.617
> 
> 标签：css

我想创建一个盒子，其中中间 div 的高度会发生变化以反映内容。中间内容将包含`<li>`'s，并且从一页到另一页的高度可能会有所不同。一个简单的图表：

```
[-- 1\. fixed --]
[-- 2\. flex  --]
|--    flex  --|
|--    flex  --|
[--    flex  --]
[-- 3\. fixed --] 
```

问题是我需要第三部分始终具有全高并允许内容流过它，然后使用中间部分填充多余的部分。这是我目前拥有的标记（其中 1\. fixed 是顶部，2\. 是中间，3\. 是底部）：

```
<div class="box">
    <div class="top">
        <h4>Title</h4>
    </div>
    <div class="middle">
        <ul>
            <li>Item 1</li>
            <li>Item 2</li>
            <li>Item 3</li>
            <li>Item 4</li>
            <li>Item 5</li>
        </ul>
    </div>
    <div class="bottom"></div>
</div> 
```

和CSS

```
.top {
    background: url('/img/box_top.png') no-repeat;
    height: 10px;
}

.middle {
    background: #000;
}

.bottom {
    background: url('/img/box_fot.png') no-repeat;
    height: 150px;
} 
```

让中间 div 根据内容调整其高度的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:59:56.933

在[BillyMoat](https://stackoverflow.com/questions/12246230/auto-height-for-middle-container-based-on-content#comment16415187_12246230)指出我最初问题中的缺陷后，我解决了问题。

我在底部添加了一个负边距以`<div>`匹配高度。

```
.bottom {
    background: url('/img/box_footer.png') no-repeat;
    margin: -150px 0 0px 0;
    height: 150px;
} 
```

# iphone - iPhone - 轮播

> ID：12246237
> 
> 赞同：3
> 
> 时间：2012-09-03T10:41:35.297
> 
> 标签：iphone, objective-c, ios, carousel, icarousel

我使用开源，`iCarousel`在我的应用程序中带上轮播控件。我使用的轮播类型是`iCarouselTypeRotary`，图像在这种类型中是线性排列的。但是，我需要像附加图像中的轮播一样带来图像。我应该怎么做才能使我的旋转木马像下图中的样式那样稍微倾斜到顶视图？请帮忙。提前致谢。

![在此处输入图像描述](../Images/61ea683c5d65299825138b1624068eb3.png) ![在此处输入图像描述](../Images/82b6b5fe8f43f072485eaa39bc575eda.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:44:36.907

您可以手动实现 3D 倾斜：

在`iCarousel.m`：`574`

```
return CATransform3DTranslate(transform, radius * sin(angle), 0.0f, radius * cos(angle) - radius); 
```

改成：

```
float tilt = MAX_TILT_VALUE * cos(angle); // greater angle means greater vertical offset
return CATransform3DTranslate(transform, radius * sin(angle), tilt, radius * cos(angle) - radius); 
```

为了使代码清晰和可重用，将倾斜偏移作为选项实现（类似于`iCarouselOptionArc`）。

PS：如果你想要透视缩放，你需要添加`cos(angle)`类似于`tilt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:28:02.027

使用样式检查：`iCarouselTypeWheel`使用水平轮根据需要设置轮的半径。我已经在垂直轮式中做到了这一点。但我认为它应该使用水平轮式的外观。

# java - 我们需要在哪里传递 Eclipse 中 System.getProperty 的值

> ID：12246238
> 
> 赞同：4
> 
> 时间：2012-09-03T10:41:37.047
> 
> 标签：java, eclipse

我已将现有的 Java EE 应用程序导入到我的 Eclipse IDE 中。

我在它下面找到了这段代码

```
public static String decideEnv() {
        String env = null;
        env = (String) System.getProperties().get("TB_ENVIRONEMNT");
            return env;
    } 
```

任何人都可以让我知道它从哪里获得这条线的价值

```
System.getProperties().get("TB_ENVIRONEMNT") 
```

我们需要在任何地方设置这个值吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T10:46:05.343

转到运行/运行配置，找到您的运行配置（我猜您正在使用应用程序服务器），选择它并添加`-DTB_ENVIRONEMNT=your value here`到参数选项卡，文本区域“VM 参数”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:44:24.337

设置系统属性可以有多种方式，常见的方式有以下几种

1.  如果以编程方式设置，则在您的代码中搜索（执行文件搜索）
2.  当它将应用程序加载到服务器时，我们也可以在那里传递系统属性
3.  另请参阅本机操作系统的系统属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:44:14.993

`-Dname=value`您可以使用switch从命令行传递它：

```
java my-app -DTB_ENVIRONEMNT=dev 
```

# ios-simulator - iOS 应用程序未复制到模拟器

> ID：12246239
> 
> 赞同：0
> 
> 时间：2012-09-03T10:41:37.727
> 
> 标签：ios-simulator

我开始编译和构建的 iPad 应用程序很好，我得到了一个打包的应用程序。但是当我尝试调试它时，它在尝试安装到模拟器后失败并出现“未知错误”。检查模拟器目录，没有为我的应用程序创建任何应用程序子目录。

它非常适用于其他 iPad 项目，我不确定从哪里开始——这意味着我的包里面有什么问题？模拟器在安装之前会检查包吗？

我应该补充一点，这个 XCode 项目是一个有效的 iOS 示例应用程序，之前 DID 在模拟器上部署和运行。我只更改了源文件并链接了一些额外的库，没有更改底层项目结构。我不希望它运行没有错误，但我确实希望它至少可以启动！

# javascript - 如何使用 html5 画布绘制具有 1px 边框的矩形？

> ID：12246241
> 
> 赞同：3
> 
> 时间：2012-09-03T10:41:39.280
> 
> 标签：javascript, html, canvas

我不知道为什么那个白点出现在创建的矩形的右下角。（仅在 WinXP 下的 21.0.1180.83 和 .89 中可见）

这取决于画布高度...

[http://jsbin.com/ejeyef/1/](http://jsbin.com/ejeyef/1/)

![点](../Images/b9d70bb48ecdebdf77cc65dcc890ddb4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:59:13.757

它可能与[亚像素渲染](http://en.wikipedia.org/wiki/Subpixel_rendering)有关。查看您的代码，您执行以下操作：

```
c.rect(10.5, 10.5, 100, 100); 
```

这意味着：“在距离 X 10.5px 和距离 Y 10.5px 的坐标处绘制一个大小为 100x100px 的矩形”。屏幕/浏览器无法呈现“半像素”，因此它总是在某处四舍五入。这可能是您的问题的原因。

要解决此问题，请不要对此类事情使用半值。这工作正常：

```
c.rect(10, 10, 100, 100); 
```

# php - TCPDF Codeigniter 使用多种字体

> ID：12246244
> 
> 赞同：2
> 
> 时间：2012-09-03T10:41:47.143
> 
> 标签：php, codeigniter-2, tcpdf

我设法在 TCPDF (Garamond.ttf) 中安装了一种新字体。它包括粗体和斜体，但似乎我不能同时使用它们：

```
$font1=$this->pdf->addTTFfont('fonts/GARA.ttf', 'TrueTypeUnicode', '', 32);
$font2=$this->pdf->addTTFfont('fonts/GARABD.ttf', 'TrueTypeUnicode', '', 32);

$this->pdf->SetFont($font1, '', 7, '', false);
//$this->pdf->SetFont($font2, '', 7, '', false); 
```

我呈现 HTML 代码：

```
 $f1=$this->load->view('/pdf/FicheDecouverte.php',$data,true);
    $this->pdf->writeHTML($f1, true, 0, true, 0);
    //Close and output PDF document
    $this->pdf->Output('DomLoc', 'I'); 
```

它要么是粗体要么是正常的。我如何同时使用它们，因为我的 css`font-weight`属性似乎被忽略了。

CSS：

```
.title {
    color: white;
    font-weight: bold;
    font-size: 9pt;
    text-align: center;
    background-color: #07636B;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:00:10.403

解决了。当我使用 HTML 时，它一次全部呈现，并且似乎所有内容都被这一行覆盖，所以我从控制器中删除了所有字体集：

```
$this->pdf->SetFont($font1, '', 7, '', false); 
```

相反，仅使用 css 来定义每种字体似乎有效：

```
table {
    font-family: gara;
    font-size: 7pt;
}

.title {
    color: white;
    font-weight: bold;
    font-size: 9pt;
    text-align: center;
    background-color: #07636B;
    font-family: garabd;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-19T15:35:12.077

我在尝试解决一个非常相似的问题时发现了这一点，所以这是我找到的解决方案，以防它帮助其他人。

对于自定义字体，您已经转换了适合 TCPDF 的字体（如果您还没有，可以使用在线工具）并将生成的 .php 和 .z 文件放在 tcpdf\fonts 文件夹中，您可以使用 inline- 调用它们css 通过从字体的 .php 文件顶部复制确切名称并将其用作字体系列。

例如 tcpdf\fonts\ 中 myfont.php 的顶部

```
<?php
$type='TrueType';
$name='MyFont'; 
```

内联 CSS 使用：

```
<div>Normal Text vs <span style="font-family: MyFont;">Text in my font</span></div> 
```

# php - 提供图像以获取请求

> ID：12246246
> 
> 赞同：0
> 
> 时间：2012-09-03T10:41:49.640
> 
> 标签：php, codeigniter, rest, get

我正在使用 CodeIgniter 休息控制器。我希望能够在客户端发出的 GET 请求上提供图像。

这是最好的选择还是我应该只提供图像的链接并让客户自己下载？如果我可以提供图像本身，那我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:30:41.230

要使 CodeIgniter 设置正确的标头，您可以在控制器中执行此操作：

```
$this->output->set_content_type('jpeg')->set_output(file_get_contents('path_to_file')); 
```

并且它将图像内容作为文件输出（作为请求响应）。无需查看。

请注意，这是一些额外的开销，因为文件是由 PHP 处理的，而不仅仅是网络服务器 (Apache/Nginx)。仅当您需要对请求进行一些业务逻辑时才有意义，例如日志记录或授权（尽管即使没有 PHP 也可以完成）。如果您只是输出图像，那么最好直接链接到文件并将 PHP 排除在外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:52:31.360

我认为您可以向客户端显示图像并给他们一个复选框以将图像下载为 Zip 文件。

看到[这个](http://www.9lessons.info/2012/06/creating-zip-file-with-php.html)

# asp.net-mvc-4 - ASP.NET Web API - 模型绑定器

> ID：12246254
> 
> 赞同：14
> 
> 时间：2012-09-03T10:42:13.073
> 
> 标签：asp.net-mvc-4, asp.net-web-api, model-binding

我需要使用某种自定义模型绑定器来始终处理英国格式的传入日期，我已经设置了一个自定义模型绑定器并像这样注册：

```
GlobalConfiguration.Configuration.BindParameter(typeof(DateTime), new DateTimeModelBinder()); 
```

这似乎只适用于查询字符串参数，并且只有当我像这样在我的参数上指定 [ModelBinder] 时才有效，有没有办法让所有操作都使用我的模型绑定器：

```
public IList<LeadsLeadRowViewModel> Get([ModelBinder]LeadsIndexViewModel inputModel) 
```

另外，我怎样才能将我发布的表单发送到我的 Api 控制器以使用我的模型绑定器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T16:28:23.760

您可以通过实现 ModelBinderProvider 并将其插入服务列表来全局注册模型绑定器。

Global.asax 中的使用示例：

```
GlobalConfiguration.Configuration.Services.Insert(typeof(ModelBinderProvider), 0, new Core.Api.ModelBinders.DateTimeModelBinderProvider()); 
```

下面是演示 ModelBinderProvider 和 ModelProvider 实现的示例代码，它以文化感知方式（使用当前线程文化）转换 DateTime 参数；

DateTimeModelBinderProvider 实现：

```
using System;
using System.Web.Http;
using System.Web.Http.ModelBinding; 
```

...

```
public class DateTimeModelBinderProvider : ModelBinderProvider
{
    readonly DateTimeModelBinder binder = new DateTimeModelBinder();

    public override IModelBinder GetBinder(HttpConfiguration configuration, Type modelType)
    {
        if (DateTimeModelBinder.CanBindType(modelType))
        {
            return binder;
        }

        return null; 
    }
} 
```

DateTimeModelBinder 实现：

```
public class DateTimeModelBinder : IModelBinder
{
    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        ValidateBindingContext(bindingContext);

        if (!bindingContext.ValueProvider.ContainsPrefix(bindingContext.ModelName) ||
            !CanBindType(bindingContext.ModelType))
        {
            return false;
        }

        bindingContext.Model = bindingContext.ValueProvider
            .GetValue(bindingContext.ModelName)
            .ConvertTo(bindingContext.ModelType, Thread.CurrentThread.CurrentCulture);

        bindingContext.ValidationNode.ValidateAllProperties = true;

        return true;
    }

    private static void ValidateBindingContext(ModelBindingContext bindingContext)
    {
        if (bindingContext == null)
        {
            throw new ArgumentNullException("bindingContext");
        }

        if (bindingContext.ModelMetadata == null)
        {
            throw new ArgumentException("ModelMetadata cannot be null", "bindingContext");
        }
    }

    public static bool CanBindType(Type modelType)
    {
        return modelType == typeof(DateTime) || modelType == typeof(DateTime?);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T23:33:22.873

我认为您不需要模型活页夹。你的方法不正确。日期的正确方法是使用客户端全球化库（如[globalize 库](https://github.com/jquery/globalize)）来解析以任何语言格式化的日期并将它们转换为 JavaScript 日期对象。然后，您可以使用浏览器以 JSON 格式序列化您的数据脚本数据结构`JSON.stringify`，这应该可以。最好始终使用标准格式的日期并使用格式化程序而不是模型活页夹。*如果您使用 C# DateTime 对象的kind*参数来指定日期时间是以本地时间还是以 UTC 时间表示，可用的格式化程序也可以正确处理 TimeZones 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-02T20:57:16.330

[属性路由](http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2)似乎与模型绑定冲突。如果您使用属性路由，您可以将`global.asax`配置包装到单个`GlobalConfiguration.Config`调用中以避免初始化问题：

```
GlobalConfiguration.Configure(config =>
{
    config.BindParameter(typeof(DateTime), new DateTimeModelBinder());
    config.MapHttpAttributeRoutes();
} 
```

（如果它与[错误 #1165](https://aspnetwebstack.codeplex.com/workitem/1165)相关，这可能会在即将发布的 ASP.NET 5 中得到修复。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:14:35.960

您不需要自定义模型绑定器。如果您的网站一直使用这种方式，您应该将线程文化更改为 UK 或将[web.config 设置设置为 UK。](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.71%29.aspx)

如果没有，您仍然可以将 CurrentCulture 的 DateTimeFormatInfo 更改为 UK 之一。

Scott Hanselman也有一篇关于模型活页夹的好文章[。](http://www.hanselman.com/blog/SplittingDateTimeUnitTestingASPNETMVCCustomModelBinders.aspx)

你可以把它放在 Global.asax 中：

```
ModelBinders.Binders[typeof(DateTime)] = new DateAndTimeModelBinder() 
```

# javascript - HTML5 视频全屏搜索

> ID：12246255
> 
> 赞同：0
> 
> 时间：2012-09-03T10:42:14.357
> 
> 标签：javascript, html, video

有没有办法在全屏模式下播放视频时捕获搜索事件？

我正在运行单独的音频和视频流，并且在搜索位置更改时我需要同步音频和视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:20:16.390

您可以使用*timeupdate*事件：

```
video.addEventListener("timeupdate", function(){
    //do some magic here…
}) 
```

# jdo - 如何编写 JDO 查询以使用一个字符串参数检查多个对象属性？

> ID：12246256
> 
> 赞同：1
> 
> 时间：2012-09-03T10:42:13.140
> 
> 标签：jdo, jdoql

我的 Owner 类有 6 个字符串属性。我想编写一个 JDO 查询，它应该检查一个带有 Owner 类的所有 6 个属性的字符串，如果这 6 个属性中的任何一个匹配，那么应该将该所有者对象添加到列表中。我正在使用以下 JDO 查询语法，但它不起作用：

```
 String branchName = req.getParameter("branch");
 List<Owner> owners = null;
 Query query = pm.newQuery(Owner.class);
 query.setFilter("branch1 == branchParam || branch2 == branchParam || branch3 == branchParam || branch4 == branchParam || branch5 == branchParam || branch6 == branchParam");
 query.declareParameters("String branchParam");
 companies = (List<Owner>) query.execute(branchName); 
```

我得到以下异常：

```
 org.datanucleus.store.appengine.query.DatastoreQuery$UnsupportedDatastoreFeatureException: Problem with query <SELECT FROM com.eplinovo.stallbokenapp.domain.HastForetag WHERE branch1 == branchParam || branch2 == branchParam || branch3 == branchParam || branch4 == branchParam || branch5 == branchParam || branch6 == branchParam PARAMETERS String branchParam>: Or filters cannot be applied to multiple properties (found both branch1 and branch2). 
```

知道如何为此编写查询。提前致谢。

# javascript - history.pushState 和 window.location.href 不同步

> ID：12246260
> 
> 赞同：0
> 
> 时间：2012-09-03T10:42:26.327
> 
> 标签：javascript, android, mobile, browser-history

我在 Android 移动设备上看到一个与 History API 相关的奇怪问题。我运行一些代码来更新页面 url `history.pushState`，然后检查`window.location.href`. 我希望 的值`href`等于我刚刚推送的值，但它仍然具有以前的值。当我检查浏览器 url 栏时，位置已正确更新。此代码重现了该问题：

```
function go(){
    console.log(window.location.href); // this shows url of '.../page1.html'
    window.history.pushState({}, '', './page2.html');
    console.log(window.location.href); // this still shows url of '.../page1.html'
    // browser address bar shows url of '.../page2.html'
} 
```

我在默认的 Android 2.3.4 浏览器上看到了这个问题，当我在桌面浏览器中运行相同的代码时，它的行为与我预期的一样（即`window.location.href`具有我推送的值） - 任何人都可以确认这是一个浏览器错误，而不是预期的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:51:50.303

请参阅 android 错误报告 [http://code.google.com/p/android/issues/detail?id=17471](http://code.google.com/p/android/issues/detail?id=17471)

# javascript - 在 iframe 中执行小部件功能

> ID：12246263
> 
> 赞同：0
> 
> 时间：2012-09-03T10:42:34.193
> 
> 标签：javascript, jquery

我正在尝试从该框架的父页面在 iframe 中执行一个函数。两者都在同一个域上。
该功能是子页面上小部件的一部分，并且在页面加载时激活。

```
function(){apex.jQuery(document).apex_save_before_exit({...});};; 
```

一段小部件代码：

```
(function($){
$.widget('ui.apex_save_before_exit', {
   options: {
      saveMessage: null,
      noWarningSelector: null,
      disableTime: null,
      ignoreChangeSelector: null
   },
   values: {
      itemChanged: false,
      promptUser: true,
      forcePrompt: false,
      debug: $('#pdebug').length !== 0
   },
   _create: function() {      
   ...
   },
   ...,
   changeDetected: function() {
      var uiw = this;
      var somethingChanged;
   ... 
```

我知道这个小部件可以工作，因为当我在 iframe 中尝试它时（而不是在 iframe 中），它可以按我的预期工作。

但我想`changeDetected`从父页面调用该函数。
注意：我正在从萤火虫控制台运行这些！

```
window.frames['cbox1346667865025'].document.apex_save_before_exit('changeDetected') 
```

产量

```
TypeError: window.frames.cbox1346667865025.document.apex_save_before_exit is not a function 
```

使用时相同

```
$('iframe.cboxIframe')[0].contentWindow.document 
or
$('iframe.cboxIframe').contents() 
```

产量

```
TypeError: $("iframe.cboxIframe").contents().apex_save_before_exit is not a function 
```

我究竟做错了什么？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:28:00.453

如果 iframe 的内容与 iframe 之外的内容位于不同的域中，则不能这样做。

此外，您可能想要实际元素而不是 jquery 对象，所以改为：

```
document.getElementById('myiframe').document.someFunction(arg1, arg2,...); 
```

# c++ - QGraphicsScene 清晰显示

> ID：12246267
> 
> 赞同：1
> 
> 时间：2012-09-03T10:42:45.397
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene

我是新来的，我无法解决这个问题。我有一个 QGraphicScene （它首先初始化一个笛卡尔平面），它使用 AddLine \ ecc 方法绘制点 \ 线。一切正常。但我想要一个删除场景上绘制的所有“对象”并重新加载的方法笛卡尔平面。有什么建议吗？

在这里你可以找到我的课程：

```
class draw: public QWidget
{
    Q_OBJECT

private:

    QGraphicsScene scene;
    int x1;
    int y1;
    int x2;
    int y2;

public:
    disegna (QWidget *parent = 0);
    void setdot(QString,QString);
    void setsegment(QString,QString,QString,QString);
    ~disegna(){}
    };

draw::draw(QWidget *parent) : QWidget(parent) { 
    scene.setBackgroundBrush(Qt::white);
    scene.addRect(QRectF(0,0, 600, 200));
    scene.addLine(0, 100 ,600, 100);
    scene.addLine(300, 0 ,300, 200);
    scene.addEllipse(297.5,97.5,5,5,QPen(), QBrush(Qt::red));

    int i=0;
    for (int a=0;a<120;a++) {
        scene.addLine(i+5, 98 ,i+5, 102);
        i=i+5;
    }

    int j=0;
    for (int a=0;a<40;a++) {
        scene.addLine(298,j+5,302,j+5);
        j=j+5;
    }

    QGraphicsView * view = new QGraphicsView(&scene,this);
    view->show();
}

void draw::setdot(QString x1,QString y1){
    scene.addEllipse(x1.toInt()+298, 98-y1.toInt(),4,4,QPen(), QBrush(Qt::blue));
}

void draw::setsegment(QString x1,QString y1,QString x2,QString y2) {
    scene.addLine(x1.toInt()+300, 100-y1.toInt(),x2.toInt()+300, 100-y2.toInt(),QPen());
    scene.addEllipse(x1.toInt()+298, 100-y1.toInt(),4,4,QPen(), QBrush(Qt::blue));
    scene.addEllipse(x2.toInt()+298, 100-y2.toInt(),4,4,QPen(), QBrush(Qt::blue));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T10:55:44.423

清理场景，你试过[clear](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html#clear)方法吗？

如果你想清除和重绘，我建议你将绘图代码从你的构造函数移动到一个方法中。然后你可以调用 clear 然后你的绘图方法。

希望能帮助到你

# jquery - 在 datepicker 插件中单击更改单元格颜色

> ID：12246268
> 
> 赞同：1
> 
> 时间：2012-09-03T10:42:44.427
> 
> 标签：jquery, jquery-ui-datepicker

我正在为 datepicker 使用 jQuery 插件。我无法更改单击时选择的日期单元格的背景颜色。

我什至修改了css但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:12:56.263

jQuery 的 datepicker 中被点击的单元格有一个`ui-state-active`. 您可以使用以下方式设置背景颜色的样式：

```
.ui-datepicker-calendar .ui-state-active { background: red; } 
```

# android - 在 android 的 google play 上处理注册？

> ID：12246270
> 
> 赞同：7
> 
> 时间：2012-09-03T10:42:55.817
> 
> 标签：android

> **可能重复：**
> [在 google play (Android Market) 上上传屏幕截图时无法解析响应错误](https://stackoverflow.com/questions/9752165/unable-to-parse-response-error-while-uploading-screenshots-on-google-play-andro)

我刚刚注册了 Market 并上传了我的应用程序。在下一个屏幕上，它要求我上传资产。在我为应用程序选择屏幕截图并点击上传后。

我尝试使用 Firefox、Chrome 和 IE，但我得到了同样的错误。

在主页上，它说

**“您对 Google Play 的注册仍在处理中。您可以将应用程序上传到 Google Play，但在您完成注册之前无法发布。”**

我猜这个错误与我的注册有关，因为它仍处于待处理阶段。我不知道他们要我做什么才能完成注册。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:19:00.247

我得到了这个解决方案，等待 1 周，然后向谷歌发送一条消息，让你处理订单，谷歌接受你的请求并发布你的应用程序.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:02:28.427

有时由于用户网络的上传速度慢以及Play商店服务器的流量大而发生这种情况。所以我认为你可以等待几个小时，然后再试一次。这在我的情况下发生了好几次，也是我第一次惊慌失措，然后发现这没关系。:D

而且没有办法加快注册过程，自然会完成。

# mysql - 从 2 个或不同表的列名中将值插入表中？

> ID：12246273
> 
> 赞同：1
> 
> 时间：2012-09-03T10:43:12.563
> 
> 标签：mysql, oracle, oracle11g, sqlplus

请帮助我解决此查询。

1.  表 t1 具有“t1c1”和“t1c2”列。

2.  表 t2 具有“t2c2”和“t2c2”列。

我必须将值插入具有 "t3c1","t3c2",t3c3" 列的 t3 表中。

条件是“t3c2”列值应从“t1c2”列填充，“t3c3”列应从“t2c2”列填充，“t3c1”应从游标值填充。

有人可以帮忙吗？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:48:37.220

这应该有效：

```
INSERT INTO t3 (t3c1, t3c2, t3c3)
SELECT currval, t1.t1c2, t2.t2c2
FROM t1, t2; 
```

如果您只需要匹配 and 中的某些行`t1`，`t2`您可以添加：

```
WHERE t1.t1c1 = 'value'
  AND t2.t2c1 = 'value'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:59:36.900

如果我理解你的问题，我现在不明白。可能 SQL 中的某些代码会比其他描述更好。如果我不明白你有这种看法

```
CREATE VIEW t3 as SELECT t1c2 AS t3c2, t2c2 AS t3c3, rowid (oid ... or something) AS t3c1 FROM t1,t2 WHERE .... 
```

然后你可以做一个触发器`INSTEAD OF`

```
CREATE TRIGGER t3_insert INSTEAD OF INSERT ON t3 AS BEGIN
  INSERT t1 .... VALUES (NEW.t3c1 .....)
  .......   
END; 
```

或者如果 t3 是常规表，并且您想修改 t3 中的数据，则使用触发器`AFTER INSERT (UPDATE,DELETE)`

更具体一点，你会得到更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:49:12.613

```
insert into t3(t3c1,t3c2,t3c3) 
    (select curval,t1.t1c2,t2.t2c2 from t1 left outer join t2 on t1.col=t2.col) 
```

# python - Numpy：广播+布尔索引

> ID：12246276
> 
> 赞同：0
> 
> 时间：2012-09-03T10:43:28.627
> 
> 标签：python, numpy, array-broadcasting

我有以下 numpy 数组

```
A: shape (n1, n2) array of float
B: shape (n2,) array of float
M: shape (n1, n2) array of bool 
```

如何将以下伪代码转换为*高效*的真实代码？数组可能很大，可能超过 1 亿个元素。

```
A[M] = ("B broadcast to shape (n1,n2)")[M] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:18:15.677

Broadcasting is simple and memory efficient:

```
A, B, M = np.broadcast_arrays(A, B, M) 
```

However using this `B` in your code `A[M] = B[M]` would not be memory efficient because `B[M]` has as many real elements as `M` has `True` values.

Instead use:

```
np.putmask(A, M, B) 
```

Since `B` is repeated automatically with the `putmask` function, you should not even have to broadcast it. Though I guess it cannot hurt to do that.

# oop - VbScript/ASP 经典的好 OOP 模式

> ID：12246278
> 
> 赞同：0
> 
> 时间：2012-09-03T10:43:36.687
> 
> 标签：oop, asp-classic, vbscript

大家好，我必须在 Classic ASP 中创建一个网站，我真的想做一个干净的设计，所以我会尝试将所有内容放在类和模型中以模拟 ViewModel 模式。

所以你能告诉我这种创建对象的方法是否很好，因为我会在任何地方使用它

```
Class User
Public Name
Public Adress
Public Title
Public Text 
Public Rights 'ArrayList of Right objects

    Private Sub Class_Initialize()
       Initialize
    End Sub

    Private Sub Class_Terminate()
       Dispose
    End Sub

   Private Sub Initialize()
       Name    = ""
       Adress  = ""
       Title   = ""
   Text    = ""
   Set Rights = Server.CreateObject("System.Collections.ArrayList") ' Arraylist .net
   End Sub

   Private Sub Dispose()      
   End Sub

End Class

Class Right

    Public Name

    Private Sub Class_Initialize()
        Initialize
    End Sub

   Private Sub Class_Terminate()
       Dispose
   End Sub

   Private Sub Initialize()
       Name    = ""
   End Sub

   Private Sub Dispose()      
   End Sub

End Class 
```

然后我这样做是为了实例化对象：

```
Dim myUser 
Set myUser = New User

'Do some work

Set myUser = nothing 'Dispose the object 
```

欢迎任何想法，建议或更正。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:57:17.843

VBScript does not support object instantiation with parameters, but you could add it like this:

```
Public Function [New User](name)
    Set [New User] = New User
    [New User].Name = name
End Function 
```

Now you can create a user like:

```
Set myUser = [New User]("Arthur Dent") 
```

Usefull when you have mandatory fields you want to set during initialization.

You can also make composites with this technique:

```
Public Function [New PowerUser](name)
    Set [New PowerUser] = New User
    [New PowerUser].Name = name
    Set [New PowerUser].Rights = RightsCollection("PowerUser")
End Function

Public Function [New GuestUser](name)
    Set [New GuestUser] = New User
    [New GuestUser].Name = name
    Set [New GuestUser].Rights = RightsCollection("Guest")
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:23:02.870

它认为不需要创建额外的函数“Initialize”和“Dispose”并分别在 Class_Initialize() 和 Class_Terminate() 中调用它。您可以将代码放在类构造函数和析构函数中。

其次，你公开了你的成员变量，如果你想让你的经典 asp 尽可能多地面向对象工作，你应该开始使用 getter 和 setter。因此像这样：

```
Private m_Name

Public Property Get Name()  
    Name = m_Name
End Property

Public Property Let Name(sName)
    m_Name = sName
End Property 
```

使用 Rights 成员变量，您将获得更多乐趣 :)

# android - startActivityforResult 的 RequestCode 类型

> ID：12246280
> 
> 赞同：7
> 
> 时间：2012-09-03T10:43:48.533
> 
> 标签：android, android-intent

任何人都可以列出`requestCode`要传递的值`startActivityForResult()`及其目的吗？另外，你能解释一下`setResult`可用的参数`RESULT_OK`吗？还有什么？请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T10:56:15.017

当您使用 启动结果活动时`requestCode >= 0`，此代码将`onActivityResult()`在第二个活动完成后返回到第一个活动。您可以`Activity`从您的`Activity`. 在每种情况下，您都会获得对`startActivityForResult()`传递 requestCode 的方法的回调。我们`onActivityResult()`可以使用 requestCode 来找出我们收到了回调的活动。因此，为了区分来自`Activities`我们使用不同 requestCodes 的回调。

例如：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent i = new Intent(FirstActivity.this, SecondActivity.class);
    startActivityForResult(i, 1);
    Intent i = new Intent(FirstActivity.this, ThirdActivity.class);
    startActivityForResult(i, 2);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

 if (requestCode == 1) {

  if (resultCode == RESULT_OK) {
  //Get the result from SecondActivity
  }

  }
 else  if (requestCode == 2) {
  if (resultCode == RESULT_OK) {
  //Get the result from ThirdActivity
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T10:46:41.490

你可以放任何你想要的东西`requestCode`，在那里你可以知道在`Activity`使用指定的开始后你期望返回什么具体信息`requestCode`。被`Activity`调用的应该`setResult(RESULT_OK)`在将信息传递给之前调用`Activity`以验证这是正确的数据并且一切正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T10:48:58.573

由`requestCode`你决定。它将帮助您以`Activity`您的方法识别哪些已经完成`onActivityResult()`。只要您只使用自己的活动，结果参数或多或少取决于您。您可以将其视为被调用活动对调用的返回值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T10:53:10.673

`requestCode`in`startActivityForResult()`用来给request分配一个id，这样就可以用这个代码来识别request，in `onActivityResult()`。就像有人编写了代码来启动活动 B 和 C 中的两个活动，通过遵循代码

```
startActivityForResult(new Intent(A.this, B.class), 1);
startActivityForResult(new Intent(A.this, C.class), 2); 
```

现在`onActivityResult()`你可以识别出哪个`Activity`返回了结果。

该`setResult()`方法用于设置一个`Intent`in Result 和一个`resultCode`. 通过`resultCode`我们告诉`onActivityResult()`结果是好的，或取消。在`Intent`我们设置的Result中，可以用来传递一些数据，通过`intent.putExtra()`方法。

# .net - NLog 中调用站点布局渲染器的性能影响

> ID：12246283
> 
> 赞同：5
> 
> 时间：2012-09-03T10:44:10.003
> 
> 标签：.net, performance, nlog

NLog 能够通过`${callsite:className=Boolean:fileName=Boolean:includeSourcePath=Boolean:methodName=Boolean}:` 渲染器包含调用点信息。

我假设 NLog 获取堆栈跟踪以实现此功能。

我想知道是否是这种情况，或者 NLog 是否具有超出在每个日志调用上创建新堆栈跟踪的优化，以及在写入大量日志条目的应用程序中对性能的影响是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:49:40.360

.NET 框架没有提供更多的选项 [1] 来获取堆栈跟踪，而`StackTrace`不是直接或通过`Exception`或`Environment.StackTrace`作为字符串使用类，因此 NLog 可以做的不多。此外，对于每个日志调用，调用堆栈将（可能）不同。一个例外是循环内的日志调用。但即使在那种情况下，也需要一些机器来帮助 NLog 甚至知道调用是从与前一个“相同位置”发出的。这只能通过（再次）查看调用堆栈来确定。

所以，总而言之，我会假设 NLog 必须做到这一点：捕获每个日志调用的调用堆栈（尽管不是每个处理调用的布局/附加器）——就像 log4net 顺便说一句，它“警告”关于此选项是日志调用频率高的性能问题。

无论如何，您可能想查看[source](https://github.com/jkowalski/NLog/blob/master/src/NLog/LoggerImpl.cs)，它还表明（尽管我没有在调试器中逐步完成它），每个日志调用都会捕获一个调用堆栈。

**更新**为了完整起见，从 .NET 4.5 开始，可以使用[caller info attributes](http://msdn.microsoft.com/en-us/library/hh534540%28VS.110%29.aspx)。他们有自己的“限制”，比如不包括类型名。然而，它们目前没有被 NLog 使用。

[1] 除了可能使用某些 IL 级别重写或在调试器中运行应用程序之外。

# arm - 将 NAND 设备添加到 QEMU Stellaris

> ID：12246287
> 
> 赞同：1
> 
> 时间：2012-09-03T10:44:16.657
> 
> 标签：arm, qemu

我需要在 QEMU 上测试 NAND FTL。我已经在 QEMU 上仿真的 NAND 控制器（Tc6393xb）必须与 ARM Cortex-M3 接口。所以我选择了 Stellaris 作为我的基础机器。有人可以帮我提供有关将此控制器（QEMU 1.2.0 中的 Tc6393xb.c）添加到 Stellaris 的信息。其次，我如何在非操作系统环境中测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T17:55:18.023

在 Qemu 2.2.1 版本中，有一个设备（PXA255 Sharp Zaurus）实例化了控制器 Tc6393xb: [tc6393xb_init function](https://lxr.missinglinkelectronics.com/qemu+v2.2.1/hw/arm/tosa.c#L235)。

# ruby - Rspec：辅助方法未被识别

> ID：12246300
> 
> 赞同：3
> 
> 时间：2012-09-03T10:45:00.640
> 
> 标签：ruby, rspec, rspec2

在下面的代码中，我在标有注释的行（靠近代码片段的底部）收到错误：`undefined method`mock_transaction_input'`

我不明白为什么，因为方法`mock_transaction_input`在上面定义。我找不到我所做的与[本文中的第一个示例之间的区别。](http://testdrivenwebsites.com/2011/08/17/different-ways-of-code-reuse-in-rspec/).

任何帮助深表感谢！

```
require 'spec_helper'

describe Transaction do

    def mock_transaction_input input
        ret = double "TransactionInput"
        input.each do |method, mock_return| 
            ret.stub(method).and_return(mock_return)
        end
        ret
    end

    describe "basic calculations" do

        examples = {
            :example_one => {
                :in => {:amount => 10, :alcohol => 5, :tip => 2, :anywhere_credit => 3, :merchant_credit => 1, :initial_subsidy => 0.25, :initial_subsidy_per => 1, :repeat_subsidy => 0, :repeat_subsidy_per => 0, :deal_subsidy => 0, :our_cut => 0.2, :tax_rate => 0.0825, :cc_fee_waived? => false, :cut_on_tax? => true, :cut_on_tip? => true, :deal_redeemed? => false},
                :out => { :our_cut => -0.11 , :merchant_cut => 12.58, :gross_sale => 17, :net_sale => 16.25, :merchant_cc_fee => 0.42}
            },

        }

        examples.each do |name, input_output| 

            input = input_output[:in]
            output = input_output[:out]

            # ERROR HERE
            transaction = Transaction.new(mock_transaction_input input)

            output.each do |method, expected_return|
                it "should return #{expected_return} when #{method} is called" do
                    transaction.send(method).should == expected_return
                end
            end
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:54:56.197

快速回答 - 您只能在上下文中使用`mock_transaction_input`方法。为了在示例组中使用此方法，您必须将此方法定义为类方法。`it``specify``def self.mock_transaction_input`

检查文档：[https ://www.relishapp.com/rspec/rspec-core/docs/helper-methods/define-helper-methods-in-a-module](https://www.relishapp.com/rspec/rspec-core/docs/helper-methods/define-helper-methods-in-a-module)

# c# - 修改 FormAuthentication 302 重定向行为

> ID：12246304
> 
> 赞同：2
> 
> 时间：2012-09-03T10:45:11.413
> 
> 标签：c#, asp.net, .net

我想拦截 FormAuthentication 302 重定向代码，它检查用户是否可以查看页面，如果他不是，模块将用户发送到'/login.aspx?ReturnURL="Requestedpage.aspx"。我想在这里添加自定义查询字符串。

编辑：URL 重写对我不起作用。我只想拦截该代码。我也想从那里设置自定义标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:55:30.840

使用[URL 重写](http://learn.iis.net/page.aspx/460/using-the-url-rewrite-module/)设置规则，以便将 URL`/login.aspx?ReturnURL="Requestedpage.aspx`重写为您需要的任何内容。

# sql - 获取用户的最新行

> ID：12246305
> 
> 赞同：1
> 
> 时间：2012-09-03T10:45:11.827
> 
> 标签：sql, group-by

我有一点问题。我需要在我们的数据库中从用户 ID 中选择一个状态。问题是，每个用户 ID 都有多行，带有不同的日期戳。在数据库中保留历史记录。

我已经尝试使用 UserID 分组，但它会给我多行，在某些用户上，而不是只有最新的行，这是我想要的。

这是我的查询：

```
select status, userid from EmployeeTable 
where UserId in ('nis','rele')
and asofdate in 
(select max(asofdate) from 
EmployeeTable
where userid in ('nis','rele')
group by userid
) 
```

所以 EmployeeTable 有 AsOfDate 列，它基本上是更新日期。所以我只想要特定 UserID 的 AsOfDate 最高的行。我究竟做错了什么？我猜这与我使用 in 子句有关。我放在那里的用户 ID 越多，输出多行的用户 ID 就越多，但我需要能够一次选择多个用户，以提高性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:54:24.887

您做错的是您正在检查特定用户和特定日期，但每个用户与其对应的日期之间没有联系。如果用户的记录与另一个用户的最新日期相匹配，您也将获得该记录。

获取用户 ID 及其对应的最新日期，然后再次加入表以获取该记录的状态值。

```
select e.status, e.userid from EmployeeTable e
inner join (
  select userid, max(asofdate) as d
  from EmployeeTable
  where userid in ('nis','rele')
  group by userid
) u on u.userid = e.userid and u.d = e.asofdate 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T10:48:34.103

试试这个：

```
SELECT status,userid 
FROM   EmployeeTable E
JOIN
    (SELECT  UserId ,max(asofdate) as asofdate
    FROM     EmployeeTable
    WHERE    userid in ('nis','rele')
    GROUP BY UserId )a
ON  E.userid =a.userid 
AND E.asofdate=a. asofdate 
```

# iphone - 如何将精灵显示为 5 秒的飞溅？

> ID：12246306
> 
> 赞同：0
> 
> 时间：2012-09-03T10:45:11.227
> 
> 标签：iphone, objective-c, ios, xcode, cocos2d-iphone

当满足某些条件时，如何显示水果精灵，例如“水果图标 x 5”，它必须在 5 秒后消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-24T10:51:27.183

在 cocos2dx 3.6

```
Sprite Name->runAction(Sequence::create(MoveTo::create(1.5,Vec2(523,450)),
    DelayTime::create(1.0),ScaleTo::create(0.1, 1.5),ScaleTo::create(0.1, 1), NULL)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:21:58.310

您需要创建单独的视图控制器，然后将其显示为带有计时器的模式视图。NSTimer 到达结束后，请执行 dismissModalViewControllerAnimated() 方法以返回第一个视图。这是在纯 Obj 中实现目标的最简单方法。C。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:22:33.253

如果我理解正确，你可以用行动来做到这一点。

```
id delay = [CCDelayTime actionWithDuration: delayDuration];
id fadeOut = [CCFadeOut actionWithDuration: fadeOutDuration];
id sequence = [CCSequence actionOne: delay two: fadeOut];
[fruitSprite runAction: sequence]; 
```

# r - 如何在 R 中转换 Matlab 脚本

> ID：12246309
> 
> 赞同：1
> 
> 时间：2012-09-03T10:45:20.523
> 
> 标签：r, matlab, octave

我想运行一些 Matlab 脚本。尽管如此，我们没有 Matlab 许可证，因此有必要从 Matlab 转换为 R 语言。不幸的是，我在 Matlab 中是全新的，但在 R 中不是。是否可以使用 R 读取 Matlab 脚本，或者是否有一种简单的方法可以在 R 中翻译 Matlab 脚本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T10:56:40.800

从一种语言重写为另一种语言可能是一个艰苦的过程，尤其是因为您必须非常注意两组代码的结果是相同的。我看到大约四种方法：

*   消化脚本的目标，抛开matlab代码，用R重写
*   尝试并模仿 R 中的 matlab 代码
*   以 octave 运行 matlab 代码，并与 R 接口
*   完全在 Octave 中运行代码

这些大致按工作量排序。如果您只想让 Matlab 代码正常工作，请务必使用 Octave，它应该以最少的更改运行代码。如果您想将代码转换为 R，并继续在 R 中开发，我会选择第一个选项。通过这种方式，您可以利用 R 的真正优势，因为 R 完全不同（[与 info 的链接](https://stat.ethz.ch/pipermail/r-help/2007-March/127981.html)、[比较 R 和 matlab](http://mathesaurus.sourceforge.net/octave-r.html)）。但它确实需要最大的时间。即使您在 R 中重新实现，我也建议您在 Octave 中运行代码，以便能够查看您在 R 中的结果是否符合 Matlab 代码。

# xcode - 我想在我的 iPhone 应用程序中的表格视图后面显示自定义图像

> ID：12246310
> 
> 赞同：-1
> 
> 时间：2012-09-03T10:45:28.137
> 
> 标签：xcode, background, uitableview

Xcode 出现错误并指出我需要一个 UITableViewControler 实例来控制我的表格视图，但我不确定如何执行此操作。

我已经搜索了所有谷歌大学，但找不到告诉我如何做到这一点的东西。

请帮助，对 Xcode 非常陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:00:21.213

在完成“课程”后，我开始使用 xcode。在 iTunesU 中查找斯坦福大学 CS 193P，您会发现一门结构良好且解释清楚的课程。这是他们的网站： http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall) 您正在寻找的是第 9 课，但我建议您阅读所有课程他们紧密相连。

# android - 使用 glShaderBinary 时出现致命信号 11 和 INVALID HEAP ADDRESS IN dlfree 错误

> ID：12246312
> 
> 赞同：3
> 
> 时间：2012-09-03T10:45:36.860
> 
> 标签：android, opengl-es-2.0, opengl-shader-builder

设备：三星 Galaxy Note Android 版本：4.0.4

我的应用程序使用 OpenGL 着色器将一些视觉效果应用于视频流。出于安全原因，我需要使用二进制着色器。我正在使用`glSurfaceView`和`SurfaceTexture`访问 OpenGL 着色器中的帧数据并使用扩展名`GL_OES_EGL_image_external`. 就我使用着色器源而言，这工作正常。当我尝试使用已编译的着色器二进制文件时，我经常遇到错误`A/libc(4242): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)`并且程序崩溃。当我尝试使用返回键关闭应用程序时它正在工作时，我通常会收到错误消息 `A/libc(4907): @@@ ABORTING: INVALID HEAP ADDRESS IN dlfree`

我尝试在 android xref 的本机媒体示例应用程序中使用二进制着色器： [http ://androidxref.com/source/xref/development/ndk/platforms/android-14/samples/native-media/](http://androidxref.com/source/xref/development/ndk/platforms/android-14/samples/native-media/)

我得到同样的错误。

我正在使用 ARM malisc 提供的编译器创建二进制着色器，我用于加载二进制文件的代码是

```
private int ShaderFromBIN(Resources resource) {

IntBuffer vert2 = IntBuffer.allocate(1);
        IntBuffer frag2 = IntBuffer.allocate(1);

        vert2.put(GLES20.glCreateShader(GLES20.GL_VERTEX_SHADER));
        frag2.put(GLES20.glCreateShader(GLES20.GL_FRAGMENT_SHADER));
        try {
            InputStream in_sv = resource.openRawResource(R.raw.v2);
            InputStream in_sf = resource.openRawResource(R.raw.f2);

            byte[] bv = new byte [in_sv.available()];
            in_sv.read(bv);
            //= IOUtils.toByteArray(in_sv);
            ByteBuffer bbv = ByteBuffer.wrap(bv);

            byte[] bf = new byte [in_sf.available()];
            //      IOUtils.toByteArray(in_sf);
            in_sf.read(bf);
            ByteBuffer bbf = ByteBuffer.wrap(bf);

            IntBuffer numFormats = IntBuffer.allocate(1);
            GLES20.glGetIntegerv(GLES20.GL_NUM_SHADER_BINARY_FORMATS,
                    numFormats);
            IntBuffer formats;
            if (numFormats.get(0) > 0) {
                formats = IntBuffer.allocate(numFormats.get(0));
                GLES20.glGetIntegerv(GLES20.GL_SHADER_BINARY_FORMATS, formats);

                for (int i = 0; i < numFormats.get(0); ++i) {
                    Log.d("format " + i + " ", formats.get(i) + "");

                    GLES20.glShaderBinary(1, vert2, formats.get(i), bbv, bv.length);
                    GLES20.glShaderBinary(1, frag2, formats.get(i), bbf, bf.length);
                    checkGlError("compile vertex shader");
                }

            }
            in_sv.close();
            in_sf.close();
            bf = null;
            bv = null;

        } catch (Exception e) {
            // e.printStackTrace();
            Log.e("Error: can't read resource.", "");
        }

        sampler_program = GLES20.glCreateProgram();
        if (sampler_program != 0) {
            GLES20.glAttachShader(sampler_program, vert2.get(0));
            checkGlError("glAttachShader");
            GLES20.glAttachShader(sampler_program, frag2.get(0));
            checkGlError("glAttachShader");
            GLES20.glLinkProgram(sampler_program);
            checkGlError("glLinkProgram");
            int[] linkStatus = new int[1];
            GLES20.glGetProgramiv(sampler_program, GLES20.GL_LINK_STATUS,
                    linkStatus, 0);
            if (linkStatus[0] != GLES20.GL_TRUE) {
                Log.e(TAG, "Could not link program: ");
                Log.e(TAG, GLES20.glGetProgramInfoLog(sampler_program));
                GLES20.glDeleteProgram(sampler_program);
                sampler_program = 0;
            }
        }
        checkGlError("after linking");
        if (sampler_program == 0) {
            Log.e(TAG, "Error in creating and compiling the shader programs");
            return -1;
        }

        return sampler_program;
    } 
```

我在这个问题上苦苦挣扎了 4 天。我做错什么了吗？请帮我解决这个问题。

谢谢，

达迈克

编辑：

当我使用 ndk-stack 获取崩溃日志时，这就是我得到的

***********崩溃转储：******* **********

 *****```
Build fingerprint: 'samsung/GT-N7000/GT-N7000:4.0.4/IMM76D/XXLRK:user/release-keys'  
pid: 11581, tid: 11594  >>> com.example.nativemedia <<<  
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad  
Stack frame #00  pc 00017938  /system/lib/libc.so  
Stack frame #01  pc 000137c2  /system/lib/libc.so  
Stack frame #02  pc 00015b00  /system/lib/libc.so (dlfree)  
Stack frame #03  pc 00016178  /system/lib/libc.so (free)  
Stack frame #04  pc 00025e04  /system/lib/libMali.so (__mali_program_binary_state_reset)  
Stack frame #05  pc 00016068  /system/lib/egl/libGLESv2_mali.so(_gles_program_rendering_state_deref)  
Stack frame #06  pc 000281b4  /system/lib/egl/libGLESv2_mali.so_gles2_program_internal_free)  
Stack frame #07  pc 00028228  /system/lib/egl/libGLESv2_mali.so(_gles2_program_object_list_entry_delete)  
Stack frame #08  pc 0002da9c  /system/lib/egl/libGLESv2_mali.so(_gles_share_lists_clear_v2_content)  
Stack frame #09  pc 000110d4  /system/lib/egl/libGLESv2_mali.so (_gles_share_lists_deref)  
Stack frame #10  pc 00026b88  /system/lib/egl/libGLESv2_mali.so (_gles2_delete_context)  
Stack frame #11  pc 00013efc  /system/lib/egl/libEGL_mali.so (__egl_gles_release_context)  
Stack frame #12  pc 0000b07c  /system/lib/egl/libEGL_mali.so (__egl_release_context)  
Stack frame #13  pc 0000b0d4  /system/lib/egl/libEGL_mali.so (_egl_destroy_context_internal)  
Stack frame #14  pc 0000b6e8  /system/lib/egl/libEGL_mali.so (_egl_destroy_context)  
Stack frame #15  pc 0000c720  /system/lib/egl/libEGL_mali.so (eglDestroyContext)  
Stack frame #16  pc 0000c346  /system/lib/libEGL.so (eglDestroyContext)  
Stack frame #17  pc 0004b67e  /system/lib/libandroid_runtime.so  
Stack frame #18  pc 0001edb0  /system/lib/libdvm.so (dvmPlatformInvoke) 
Stack frame #19  pc 00059168  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:13:41.150

我曾经在我的程序中遇到过同样的错误“ABORTING: INVALID HEAP ADDRESS IN dlfree”。

问题不在于发出信号的地方。相反，在我的代码中一个完全不相关的地方发生了内存损坏。

我花了一些时间才弄清楚，但修复内存损坏解决了这个问题。尝试禁用部分代码并找到内存损坏。

希望这可以帮助。*****

# java - 使用 Adob e Air 构建 Android 原生库

> ID：12246313
> 
> 赞同：13
> 
> 时间：2012-09-03T10:45:38.700
> 
> 标签：java, android, actionscript-3, air

我目前正在开发一个在 AS3 中使用 Adob​​e Air sdk 构建的 Android 应用程序。我想知道是否可以编译一种我可以在 Android 本机应用程序 (Java) 中导入的 UI 库。基本上，我想使用 Adob​​e Air 构建我的 UI，但我的应用程序的主要部分是使用 Java，即本机方式。

我的想法是将 adobe air 生成的 APK 转换为我将在本机应用程序项目中导入的 Jar 文件，并调用一些在屏幕上显示某些内容的函数。

可能吗？我认为这可能是可能的，因为当我不在应用程序中导入 Adob​​e Air SDK 时，我必须在 Play Store 中安装 Adob​​e Air 应用程序才能使我的应用程序正常工作。我在谷歌上找不到很多关于这个的东西：s。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-07T01:00:43.823

是的，它可以做到（理论上），但要抓住你的帽子，这是一段颠簸的旅程！

我看到这是一个非常古老的问题，有一个新的赏金（提问者已经 3 年没有登录了！），但是我们开始......
这个方法进入了 android java 应用程序如何构建和运行的核心（即[DEX](https://en.wikipedia.org/wiki/Dalvik_(software))，因此它可以与[adobe-air](https://get.adobe.com/air/)或**ANYTHING**一起使用，这是**基本**的[通用方法]）。（顺便说一下，您以一种令人困惑的方式使用本机一词，本机通常被理解为表示应用程序的 JNI (c++) 库元素）。
你说：

> “我的想法是将 adobe air 生成的 APK 转换为我将在本机应用程序项目中导入的 Jar 文件，并调用一些在屏幕上显示内容的函数。”

Android 程序被编译成 .dex（Dalvik 可执行文件）[现在称为[ART](https://source.android.com/devices/tech/dalvik/)，但二进制兼容] 文件，这些文件又被[压缩](http://www.7-zip.org/)成设备上的单个 .apk 文件（与清单和资源等其他内容）。（解压缩 .apk 并查看内部）。

.jar 文件包含 DEX 文件（压缩）。（解压缩编译的 .jar 并查看内部）。

我以前做过一些***这样***的工作，这里有一个教程和编码示例的链接[由我测试]（在 android studio + gradle 中）[通常需要自定义构建元素（我也给出了一个 ant 示例）]。

查看我的堆栈溢出答案[动态加载 DEX 文件](https://stackoverflow.com/questions/39175169/how-to-build-an-apk-and-separate-libraries-that-the-app-loads-dynamically/39278805#39278805)

这在理论上回答了您的问题，但它是基本的东西，复杂且有限制，难以编码和维护（资源是 a**e 中的真正痛苦）。

# 问题：这一切看起来都非常复杂和困难！

是的 ！这是一件非常愚蠢且难以做到的事情！这就是为什么我们发明了跨平台框架（以及基于 Web 的代码 javascript/css/html5...）。未能通过 PORT 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T11:22:35.043

我更像是一个 Flash/AS3 编码器而不是 Java，所以不能给你一个完整的答案，但是......

更好的方法可能是仅`User Interface` 通过 Java 代码呈现基于 SWF 的自身（而不是将 SWF 编译为 APK 格式，然后尝试将 Flash APK 嵌入到 Android APK 中）。

这样，您的 SWF 也可以与 Java 函数进行通信（通过 AS3 的`external Interface`类）。当按下 SWF UI 上的按钮等时，更容易触发 Java 函数。

您只需要为 Java**找到一个 SWF 渲染库**。

也许看看[**SWFTools**](https://apache.googlesource.com/flex-sdk/+/trunk/modules/swfutils/src/java/flash)。特别是[**SWF 类**](https://apache.googlesource.com/flex-sdk/+/trunk/modules/swfutils/src/java/flash/swf/)看起来很有希望。
我没有测试过这个库，但它可能会对你有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T13:57:50.697

我根本不是 Adob​​e AIR 开发人员，但是，我已经开发了一些带有原生环境和某种框架（特别是 PhoneGap）的 Android 应用程序。所以，这可以帮助你。

我不认为有任何工具可以直接将使用 Adob​​e AIR、PhoneGap 或任何其他基于 HTML5 的框架构建的移动应用程序转换为原生 Android 应用程序，因为从技术上讲，在两者之间进行适当的映射非常困难且不可行HTML5 的每个元素（或您的情况下的 Flex 元素）到相应的本机控件或逻辑。您能做的最好的事情是使用框架提供的插件机制与 Java 交互，反之亦然，这就是框架存在的原因。大多数基于 HTML5 的框架都有一个插件机制，允许开发人员与原生功能（如后台服务、活动或任何其他原生资源）进行交互。甚至这些框架也是使用相同的模块化或基于插件的方法构建的，并且主要功能（访问相机、音频、SD 卡等原生资源）都是这样工作的。在我们的应用程序中使用该功能之前，我们必须启用该功能。

所以，在 Adob​​e AIR 中寻找插件类型的机制。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T15:17:38.803

也许这是一种帮助你的肮脏方式，但你可以：

1.  在一台计算机上安装 adobe air 程序
2.  复制adobe air程序安装文件夹的文件
3.  将所有这些文件嵌入到 java 应用程序中
4.  安装java应用程序
5.  将 adobe air 文件保存在一个文件夹中
6.  使用 java 启动 adobe air（就像您将使用控制台一样，对 YourAirApp.exe 的简单调用）

# stored-procedures - 火鸟 SQL 使用 在

> ID：12246319
> 
> 赞同：1
> 
> 时间：2012-09-03T10:46:13.090
> 
> 标签：stored-procedures, if-statement, firebird, where, clause

我尝试在 FB 2.5 中构建一个如下所示的 SP：

```
where 
   (
      (kunde between :kdvon and :kdbis)
      and 
          (AdrGrp between :AdrGrpvon and :AdrGrpbis)
      and
          (auftragstyp between :AuftrTypVon and :AuftrTypBis)
      and
          (Status between :statusvon and :statusbis)
      and
      IF LFDNR <> 0 THEN (LFDNUMMER  = :LFDNR)
      IF BESTELLTAG <> 0 then (bestelldatum  = :BESTELLTAG)
   ) 
```

在插入 If 语句之前，它运行良好。之后，我收到消息 SQL 错误代码 = -104。令牌未知 - 第 156 行，第 14 列。LFDNR。

IF 条件定义为输入参数。使用冒号 : 将它们标记为参数不起作用。

问题是否可以以这种方式在“Where”中使用“If”？我必须如何使用条件参数？

蒂亚·罗尔夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:48:38.767

试试这个：

```
...
AND (LFNDR = 0 OR LFDNUMMER = :LFDNR)
AND (BESTELLTAG = 0 OR bestelldatum = :BESTELLTAG) 
```

（我不知道子句中是否`LFNDR`和`BESTELLTAG`是参数/变量或列`= 0`- 如果它们是参数（与右手部分相同），您可能应该用':'标记它们）

# sql - 更新数据库中列名有空格的记录的有效方法

> ID：12246320
> 
> 赞同：0
> 
> 时间：2012-09-03T10:46:20.993
> 
> 标签：sql, whitespace

我们在数据库中的一些记录在字符串之前或之后有一个空格。我需要通过简单地创建一个 sql 查询来纠正它。我在下面有这个建议的查询：

```
update tableA set columnname1 = trim(columnname1) where columnname1 REGEXP '^[[:blank:]]|[[:blank:]]$'

update tableA set columnname1 = trim(columnname1)

update tableA set columnname1 = trim(columnname1) where trim (columnname1) IS NOT NULL

update tableA set columnname1 = trim(columnname1) where columnname1 like ' %' or columnname1 like '% ' 
```

我的前辈不接受所有这些。是否有任何其他查询能够更新那些有空格的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:49:38.820

尝试

```
update tableA set columnname1 = Rtrim(Ltrim(columnname1)) 
```

可选地，添加

```
where columnname1 like ' %' or columnname1 like '% ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:59:14.603

您可以使用以下查询。

```
UPDATE tableA
SET name = REPLACE(columnname1 , 
           SUBSTRING(columnname1 , PATINDEX('%[^a-zA-Z0-9 '''''']%', columnname1 ), 1), 
                  '')
WHERE PATINDEX('%[^a-zA-Z0-9 '''''']%', columnname1 ) <> 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:11:05.717

目的是这个

```
update tableA set columnname1 = trim(columnname1) 
 where columnname1 <> trim(columnname1) 
```

# load-balancing - LVS：所有连接都是 InActConn

> ID：12246322
> 
> 赞同：-1
> 
> 时间：2012-09-03T10:46:25.593
> 
> 标签：load-balancing

所有连接都是 InActConn

我是使用 LVS 的新手。我试过LVS/TUN和LVS/DR，结果是一样的，所有的连接都是InActConn。但是可以访问realservers（通过PING）。请帮忙！！！

```
OS: CentOS 6.2
RemoteAddress:Port               Forward Weight ActiveConn InActConn

UDP  192.168.10.240:2345 rr

-> 192.168.10.251:2345           Tunnel    1      0          10

-> 192.168.10.252:2345           Tunnel    1      0          9

-> 192.168.10.253:2345           Tunnel    1      0          9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:28:12.903

这是不维护连接的服务（如 UDP）的预期行为。您可能想阅读 LVS Howto，尤其是关于 Active/Inactive 连接的部分：

[http://www.austintek.com/LVS/LVS-HOWTO/HOWTO/LVS-HOWTO.ipvsadm.html#ActiveConn](http://www.austintek.com/LVS/LVS-HOWTO/HOWTO/LVS-HOWTO.ipvsadm.html#ActiveConn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-10T10:47:13.270

老问题：但我从谷歌得到这篇文章，想把我的发现贴在这里。

在上面的答案中，@remi-ggacogne 粘贴的链接错过了 Real server 的 1 步。

您必须关闭 rp_filter（尤其是在 Centos / RHEL 中）[https://www.slashroot.in/linux-kernel-rpfilter-settings-reverse-path-filtering](https://www.slashroot.in/linux-kernel-rpfilter-settings-reverse-path-filtering)

打开 /etc/sysctl.conf 并粘贴以下行（根据您的网络接口）

```
net.ipv4.conf.all.rp_filter = 0

net.ipv4.conf.default.rp_filter = 0

net.ipv4.conf.tunl0.rp_filter = 0 
```

使上述活动 -->

```
$systcl -p 
```

# php - 防止外部访问 .php

> ID：12246323
> 
> 赞同：-1
> 
> 时间：2012-09-03T10:46:33.510
> 
> 标签：php, jquery, .htaccess, external

有没有办法阻止对 .php 文件的外部访问（如在 URL 中）并允许 .php 文件是否被 jquery post 调用？

谢谢！沃特0100

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:50:43.150

我假设是因为您说`like in the URL`要阻止`GET`请求。

您可以将它放在脚本的顶部，以防止人们通过 URL 访问它。然后，您将只能使用`POST`它，例如 jQuery POST。

```
<?PHP
if($_SERVER['REQUEST_METHOD']!="POST")
    header('HTTP/1.0 401 Unauthorized');
    exit;
?> 
```

请注意，其他来源也可以`POST`使用该表格。此方法仅阻止通过`GET`请求等其他方法访问。即在地址栏中输入 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:26:07.300

更简单的方法是使用 jquery 发送一个标头，稍后您可以使用 PHP 读取该标头。这绝不是一种真正的保护，但它确实可以防止用户在没有首先检查它应该发送的标头的情况下发送请求。

例如，在您的 jquery 调用中：

```
$.ajax({
    url: url,
    beforeSend: function(xhr) {
        xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    },
    success: function(data) {
    }
}); 
```

在你的 PHP 中：

```
if ($_SERVER['HTTP_X_REQUESTED_WITH'] != 'XMLHttpRequest') {
    header("HTTP/1.0 405 Method Not Allowed");
    exit();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:52:52.807

正如已经向您提到的，允许`.php`使用 jquery post 访问 a 等同于提供外部访问。允许 jquery post 访问 php 文件的唯一方法（这不是很可靠）是检查`$_SERVER['HTTP_REFERER']`PHP 代码中的变量是否与发送 jquery post 的 URL 相同。

# java - 按钮点击无响应

> ID：12246324
> 
> 赞同：0
> 
> 时间：2012-09-03T10:46:35.363
> 
> 标签：java, android, email

我正在尝试为电子邮件活动设置一个按钮，但是使用当前代码我没有收到任何错误，但是当我单击该按钮时没有响应

电子邮件.java

```
public class Email extends Activity implements View.OnClickListener {

    EditText personsEmail, intro, personsName, stupidThings, hatefulAction,
            outro;
    String emailAdd, beginning, name, stupidAction, hatefulAct, out;
    Button sendEmail;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.email);
        initializeVars();
        sendEmail.setOnClickListener(this);
    }

    private void initializeVars() {
        // TODO Auto-generated method stub
        personsEmail = (EditText) findViewById(R.id.etEmails);
        intro = (EditText) findViewById(R.id.etIntro);
        personsName = (EditText) findViewById(R.id.etName);
        stupidThings = (EditText) findViewById(R.id.etThings);
        hatefulAction = (EditText) findViewById(R.id.etAction);
        outro = (EditText) findViewById(R.id.etOutro);
        sendEmail = (Button) findViewById(R.id.bSentEmail);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        convertEditTextVarsIntoStringsAndYesThisIsAMethodWeCreated();
        String emailaddress[] = { emailAdd };
        String message = "Well hello "
                + name
                + " I just wanted to say "
                + beginning
                + ".  Not only that but I hate when you "
                + stupidAction
                + ", that just really makes me crazy.  I just want to make you "
                + hatefulAct
                + ".  Welp, thats all I wanted to chit-chatter about, oh and"
                + out
                + "Oh and you could visit facebook www.facebook.com/"
                + '\n' + "PS. I think I love you...    ";

        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailaddress);
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"I hate you");
        emailIntent.setType("Plain/Text");
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,message);
        startActivity(emailIntent);

    }

    private void convertEditTextVarsIntoStringsAndYesThisIsAMethodWeCreated() {
        // TODO Auto-generated method stub
        emailAdd = personsEmail.getText().toString();
        beginning = intro.getText().toString();
        name = personsName.getText().toString();
        stupidAction = stupidThings.getText().toString();
        hatefulAct = hatefulAction.getText().toString();
        out = outro.getText().toString();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }    
} 
```

菜单.java

```
public class Menu extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //Setting Up Button

        Button but1 =(Button) findViewById(R.id.bEmail);

         but1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.guess.guessme.EMAIL"));
            }
        });

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:05:01.000

您可以使用此代码。它可以解决您的问题： `startActivity(new Intent(Menu.this, Email .class));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:58:39.923

尝试更改您的 from`emailIntent.setType("Plain/Text");`并`emailIntent.setType("text/html");` 进行以下更改可能会对您有所帮助

```
startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:58:53.933

尝试这个：

```
startActivity(new Intent("com.guess.guessme.Email")); 
```

并确保您的清单文件中也说明了电子邮件活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:03:58.997

试试看

```
 emailIntent.setType("message/rfc822");
 Email.this.startActivity(Intent.createChooser(email, "Choose an Email client :"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T11:04:43.693

尝试这样做 -

看来您正在实施错误的侦听器。尝试导入`OnClickListener`而不是`View.OnClickListener`像下面这样 -

```
public class Email extends Activity implements OnClickListener 
```

用下面的代码。

```
public void onClick(View v) {
    // TODO Auto-generated method stub

switch(v.getId())
{

case R.id.bSentEmail:

    convertEditTextVarsIntoStringsAndYesThisIsAMethodWeCreated();
    String emailaddress[] = { emailAdd };
    String message = "Well hello "
            + name
            + " I just wanted to say "
            + beginning
            + ".  Not only that but I hate when you "
            + stupidAction
            + ", that just really makes me crazy.  I just want to make you "
            + hatefulAct
            + ".  Welp, thats all I wanted to chit-chatter about, oh and"
            + out
            + "Oh and you could visit facebook www.facebook.com/"
            + '\n' + "PS. I think I love you...    ";

    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailaddress);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"I hate you");
    emailIntent.setType("Plain/Text");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,message);
    startActivity(emailIntent);

break;
}

} 
```

# orm - 调整从 LINQ 表达式生成的 SQL Telerik OpenAccess

> ID：12246330
> 
> 赞同：0
> 
> 时间：2012-09-03T10:47:07.443
> 
> 标签：orm, linq-expressions, telerik-open-access

我使用规范模式来动态生成 LINQ 表达式，将使用

1.  关于内存中的实体
2.  通过 OpenAccess 生成 SQL 代码

有关我正在尝试实现的示例，请参阅此[博客文章。](http://davedewinter.com/2009/05/31/linq-expression-trees-and-the-specification-pattern/)

到目前为止一切正常，除了我想以某种方式覆盖 OpenAccess 为一个特定规范生成的 SQL（它可能出现在生成的表达式树中的任何位置）。其余的都很好，这就是为什么我想避免编写自己的翻译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:54:07.663

目前没有办法直接影响每个 API 的 SQL 生成。但是，您可以做的是通过在部分之间执行 .ToList() 将整个表达式树分解为服务器端执行的部分和客户端执行的部分。或者，您可以看到 Telerik Support 以及您需要实现的查询和源 LINQ + 模型。

# php - 条件标签内的函数

> ID：12246331
> 
> 赞同：1
> 
> 时间：2012-09-03T10:47:13.207
> 
> 标签：php, wordpress

假设我有这样的功能：

```
add_filter("post_gallery", "fix_my_gallery_wpse43558",10,2);
function fix_my_gallery_wpse43558($output, $attr) {

    // blah, blah, blah

} 
```

`post_gallery`基本上，上面的功能允许我使用过滤器覆盖内置（AKA 默认）WordPress 图片库模板。

问题是，我只想在我的自定义提要中覆盖默认的 WordPress 图片库模板，为此我需要使用`if ( is_feed( $feeds = 'custom_feed' ) ) { .... }`条件标签。

问题是，在条件标签内操作函数的正确方法是什么？

```
if ( is_feed( $feeds = 'custom_feed' ) ) {

    add_filter("post_gallery", "fix_my_gallery_wpse43558",10,2);
    function fix_my_gallery_wpse43558($output, $attr) {

        // blah, blah, blah

    }

} 
```

或者

```
add_filter("post_gallery", "fix_my_gallery_wpse43558",10,2);
function fix_my_gallery_wpse43558($output, $attr) {

    if ( is_feed( $feeds = 'custom_feed' ) ) {

        // blah, blah, blah

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:49:26.910

我会选择您的第一个解决方案，因为过滤器功能只需要在您在提要中时执行。

但是没有“正确的方法”，因为这两种解决方案都应该有效……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:50:48.577

我会用第一个。它会更快，因为过滤器将在不需要时被忽略。

此外，在第二个示例中，您还需要丢弃 $output，从速度的角度来看，这又有点浪费。

# matlab - Matlab 符号工具箱中的错误

> ID：12246333
> 
> 赞同：1
> 
> 时间：2012-09-03T10:47:28.533
> 
> 标签：matlab

我在使用matlab的符号工具箱时偶然发现了以下奇怪的事情

> / >> syms e
> 
> />> y=11111111111111111^e
> 
> y = 11111111111111112^e

处理大量数字时似乎存在限制。这可以在不更改为完全不同的系统（如圣人）的情况下解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:26:41.227

我认为问题在于 Matlab 在将数字转换为符号表达式之前将其解析为双精度数。由于双精度数具有 52 位尾数，因此您有大约 16 个有效数字，但您的数字更长。

作为替代方案，您可以尝试直接从字符串创建数字：

```
y=sym('11111111111111111')^e 
```

不幸的是，我现在没有可用的 Matlab，所以这个答案未经测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-27T13:19:37.783

**这不是一个错误，这是一个功能。它被称为“舍入误差”**

matlab 使用 double 格式来存储普通变量，就像 C 编程语言中的 double 以及许多其他语言（如 C++）一样。

实际上，“错误”与“^x”无关，我们可以看到：

```
>> clear
>> syms y
>> format bank
>> y=11111111111111111
y =
 11111111111111112.00 
```

即使是简单的分配也会触发“错误”。

我们可以看到一个双变量是如何在 VS 中使用调试模式真正存储在内存中的：

[![在此处输入图像描述](../Images/f7404db2485da04fac519cc7fa8fcca7.png)](https://i.stack.imgur.com/bS0ZQ.png)

正如您在屏幕截图中看到的，a 和 b 都在内存中存储为“2ea37c58cccccccc”，这意味着计算机无法区分两者。

这就是您发现“错误”的原因。

为避免这种情况，您可以改用符号常量：

```
>> y=sym('11111111111111111')
y =
11111111111111111 
```

这样，计算机会将“y”以不同的格式存储在内存中，这样可以避免四舍五入的错误并消耗更多的内存。

# c# - DbContext 代码生成策略在实体框架 5 和 VS 2012 中失败

> ID：12246337
> 
> 赞同：6
> 
> 时间：2012-09-03T10:47:43.637
> 
> 标签：c#, visual-studio-2012, .net-4.5, dbcontext, entity-framework-5

我在 .NET 框架 4.5（VS 2012）中有一个 WPF 项目，并使用 NuGet 包将实体框架 5 下载到了解决方案中。有关实体框架 5 的所有文档都说默认**代码生成策略**将为**无**（即 DbContext 代码生成）。但在我的情况下，在添加新的 ADO.Net 实体数据模型时，**代码生成策略**是**默认**的（即 EF 设计器生成派生自 ObjectContext 的上下文类和派生自 EntityObject 的实体类。）。但我想遵循 DbConext 代码生成机制。我正在遵循数据库优先方法。我错过了任何设置吗？还是我需要单独安装 T4 模板？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:21:49.940

我已经卸载了 VS 2012 RC 并安装了 VS 2012 RTM，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:18:20.333

在扩展管理器中 -> 下载 EF 5.x DbContext 生成器。在标准编辑器中打开模型（edmx），右键单击可用空间并使用 EF 5x DbContext Generator 生成实体！

# c# - 我只需要处理一次

> ID：12246338
> 
> 赞同：-1
> 
> 时间：2012-09-03T10:47:52.887
> 
> 标签：c#, events

我正在编写一个可以检查文本文件是否更改的应用程序。如果是，它会重新启动 Windows 服务。

我正在为它使用 FileSystemWatcher，它看起来像它生成的事件很少。这是我的代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.ServiceProcess;
using System.Threading;

namespace ConsoleApplication1
{
    class FileMon
    {
        public static bool status;

        public static void Run()
        {
          try
            {

                FileSystemWatcher watcher = new FileSystemWatcher();
                watcher.Path = @"D:\test\";
                watcher.Filter = "*.txt";
                watcher.NotifyFilter = NotifyFilters.LastWrite;

                watcher.Changed += new FileSystemEventHandler(watcher_Changed);
                watcher.EnableRaisingEvents = true;

                Console.WriteLine(status);
                while (Console.Read() != 'q') ;

            }

            catch (Exception e)
            {
                Console.WriteLine(e);
            }

        }

        static void watcher_Changed(object sender, FileSystemEventArgs e)
        {
            Console.WriteLine(e.ChangeType);
          //  status = true;
            Console.WriteLine(status);

            Console.WriteLine("File: " + e.FullPath + " " + e.ChangeType);
            Console.WriteLine("before IF block status = {0} ", status);

            if (status == false)
            {
                RestartService();
                status = true;
                Console.WriteLine("after IF block status = {0} ", status);
            }

            else
            {

            }

        }

        public static void RestartService()
        {

            ServiceController service = new ServiceController("6to4");
            try
            {
                int millisec1 = Environment.TickCount;

                TimeSpan timeout = TimeSpan.FromMilliseconds(50);
                Console.WriteLine("trying to stop");

                service.Stop();
                service.WaitForStatus(ServiceControllerStatus.Stopped, timeout);

           //     Console.ReadKey();
                Console.WriteLine("stoping.........");

                // count the rest of the timeout
            //    int millisec2 = Environment.TickCount;
            //    timeout = TimeSpan.FromMilliseconds(50 - (millisec2 - millisec1));

                Console.WriteLine("dd");
              //  Console.ReadKey();

                service.Start();
                service.WaitForStatus(ServiceControllerStatus.Running, timeout);

            }
            catch
            {
                // ...
            }
        }

    }
} 
```

当我运行它并在文本编辑器中更改文本文件时，我得到下一个输出：

```
False
Changed
False
File: D:\test\1.txt Changed
before IF block status = False
trying to stop
after IF block status = True
Changed
True
File: D:\test\1.txt Changed
before IF block status = True
Changed
True
File: D:\test\1.txt Changed
before IF block status = True 
```

看起来某处有错误，这就是为什么在单次更改后我看到的不是一个，而是三个输出副本。而且我不明白出了什么问题以及我在哪里做错了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:59:34.260

问题是`FileSystemWatcher`. 它不是完美的，有时会为*单个*更改产生多个事件，如果这些事件发生率很高，也可能在更改后不会引发事件。

因此，您可以使用该标志的解决方法来`status`对`FileSystemWatcher`.

# django - 如何在自定义模板标签上使用模板过滤器？

> ID：12246340
> 
> 赞同：8
> 
> 时间：2012-09-03T10:48:00.297
> 
> 标签：django, templates, filter, tags

我有一个关于模板标签的 django 问题。我有一个`modal_form`以 4 个参数命名的模板标签。此模板标签与基本变量完美配合，例如：

```
{% modal_form "clients" contact_form "Contacts" "contact" %} 
```

但是当我尝试在我的自定义模板标签中过滤变量时它不起作用，例如：

```
{% modal_form "parameters" form_dict|key:parameter parameter name_dict|key:parameter %} 
```

这个自定义过滤器也可以在标签之外完美地工作（这个过滤器在特定键处获取字典的值）。我有这个错误：

> 渲染时捕获 VariableDoesNotExist：查找键失败 [form_dict|key:parameter]

也许我必须以不同的方式编写标签以支持内部过滤器？

**这是我的标签代码：**

```
def modal_form(app, object_form, object_name, object_verbose_name):
    return { 'app': app, 'object_form': object_form, 'object_name': object_name, 'object_verbose_name': object_verbose_name }

register.inclusion_tag('tags/modal_form.html')(modal_form) 
```

我的过滤器代码：

```
def key(d, key_name):
    try:
        value = d[key_name]
    except KeyError:
        #from django.conf import settings

        #value = settings.TEMPLATE_STRING_IF_INVALID
        value = 0

    return value
key = register.filter('key', key) 
```

你有什么想法 ？你想要更多的代码吗？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T13:52:00.353

如果您的标签和过滤器分别工作正常，请尝试使用[with 语句](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#with)：

```
{% with var_one=form_dict|key:parameter var_two=name_dict|key:parameter %}
    {% modal_form "parameters" var_one parameter var_two %}
{% endwith %} 
```

# objective-c - 通过设置视图控制器管理 Tableview 属性

> ID：12246343
> 
> 赞同：0
> 
> 时间：2012-09-03T10:48:29.960
> 
> 标签：objective-c, uitabbarcontroller, uiswitch

我有`UITabBarViewController`2 个视图。第一个视图有`UITableView`1 个部分和 5 行。第二个视图也`UITableView`有一个设置选项，如 UISwitches。我的问题是如何通过在设置视图上使用 UISwitches 从第一个视图中显示和隐藏或删除单元格？提前致谢。

**编辑**

这个视频解释了我想要做什么（检查应用程序视图）

[按这里](http://www.youtube.com/watch?v=a6PQojyecKM)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:21:31.187

在表视图控制器的 viewWillAppear 方法中，我将检查设置是否已更改。如果它已经改变，那么我会通过调用它的 reloadData 方法来重绘单元格。有时建议通过 performSelectorOnMainThread 调用 reloadData：

```
[ self performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO] 
```

并且您的数据加载方法（numberOfSectionsInTableView、numberOfRowsInSection、cellForRowAtIndexPath 等）必须相应地考虑设置值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:59:15.077

您可以使用 NSNotificationCenter 来完成此操作

在您的 firstView 中，您可以编写如下代码：

```
 -(void)viewDidLoad{
 [[NSNotificationCenter defaultCenter] removeObserver:self];
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(modifyCell:) name:@"modifyCell" object:nil];
 }

   //make sure this is declared in your .h
 -(void)modifyCell:(NSNotification*)notif
  {
    if (notif) {
              //cellindex to modify
    NSString *cellIndex = [[notif userInfo] objectForKey:@"index"];
    [yourDataSource removeObjectAtIndex:[cellIndex intValue]]
    [yourTableView reloadData];
     }
  } 
```

在你的第二个视图中：

```
 -(void)switchChanged
  {
     NSNotificationCenter *ncSubject = [NSNotificationCenter defaultCenter]; 
     NSDictionary* dict = [NSDictionary dictionaryWithObjectsAndKeys:@"indexNum",@"index", nil];
      [ncSubject postNotificationName:@"modifyCell" object:nil userInfo:dict];
      [ncSubject removeObserver:self];
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T10:53:23.280

您应该在每次 UISwitch 更改后重新加载您的表格视图。例如： - 你从你的 UISwitch 设置一个委托到你的 UITabBarViewController （或控制事件的类） - 你应该将你的 tableview 的单元格的数量存储在一个变量中 - 这个变量将在每次 UISwitch 更改后更改 - 在变量更改后，你应该重新加载表格视图

# mongodb - 在 mongo/mongoid 中查找并删除所有

> ID：12246351
> 
> 赞同：11
> 
> 时间：2012-09-03T10:48:45.603
> 
> 标签：mongodb, mongoid

mongoid 中是否有任何方法可以查找和“读取”集合中的所有文档，同时在一个原子查询中删除它们？

到目前为止，我正在使用：

```
Model.collection.find().to_json
Model.delete_all 
```

通过在这两个指令之间添加更多数据来收集，可以很容易地打破这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-13T16:11:56.633

有一个更简单的解决方案。你可以做：

```
Model.collection.drop 
```

它将删除当前集合，并创建一个具有相同名称的新集合（当然是空的）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T10:56:48.097

例如，您可以将基础集合**重命名**`tmp_cf20c448f824763454ada2c4b2434178`为. 然后，所有新的写入都将转到一个新的、自动创建的旧名称集合，您可以毫不费力地阅读所有文档，然后简单地删除该临时集合。

`mongo`使用底层 ruby​​ 驱动程序（10gen用于 mongoid 2.x 或`moped`用于 mongoid 3.x）通常更容易完成这类事情。

# iphone - UItextView 在点击时隐藏在 UIScrollview 中

> ID：12246355
> 
> 赞同：0
> 
> 时间：2012-09-03T10:49:10.773
> 
> 标签：iphone

我有一个 UIScrollView（有 40 多页），每个页面上都添加了 UITextview 作为子视图。我想要做的是单击一下，我想在所有页面上隐藏 UITextField？我该怎么做？我正在尝试在 hadle tap 方法中这样做：

`textview.hidden = YES;`

但它仅在最后一页上隐藏文本视图，而不是在所有页面上。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:59:04.240

您可以这样做，而不是`textview.hidden = YES;`以下操作：

```
for(id object in objScrollView.subviews)
{
    if([object isKindOfClass:[UITextView class]])
    {
        UITextView *tmpObj= (UITextView *)object;
        [tmpObj setHidden:!tmpObj.hidden];
    }
} 
```

将上面的代码放在 tap 方法中。

# header - nservicebus sendlocal 标头未设置

> ID：12246358
> 
> 赞同：0
> 
> 时间：2012-09-03T10:49:27.060
> 
> 标签：header, nservicebus

我使用 Send() 和 SendLocal() 在 NServiceBus 中发送消息。对于他们每个人，我需要在标题中存储一些信息。使用 SendLocal 发送的消息似乎不包含标头（我无法在本地开发环境中重现它，但我可以看到它在使用 QueueExplorer 的生产中发生）。有人可以确认没有使用 SendLocal() 发送标头并建议我可以使用的解决方法或我可以阅读的文档吗？谢谢

# jdbc - SQL 准备好的语句不带“？” 在 where 子句的两边

> ID：12246359
> 
> 赞同：0
> 
> 时间：2012-09-03T10:49:32.580
> 
> 标签：jdbc, jdb

我的 sql 查询中有类似的东西

```
private static final String QUERY_PHYSICIAN_INFO= "SELECT * FROM PHYSICIAN_INFO WHERE ? = ?"; 
```

但以下不起作用..

```
 Connection conn = null;
    PreparedStatement stmt = null;  
     String logintype;
       if(isInteger(id))
       {
           logintype="BADGEID";

       }else{
           logintype="ID";
       }
        stmt=conn.prepareStatement(QUERY_PHYSICIAN_INFO);
        stmt.setString(1, logintype);
        stmt.setString(2, id);
        ResultSet rs = stmt.executeQuery();
        Physician phs = null; 
```

这有什么特别的原因吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:50:56.260

? 用于传递参数，而不是字段名称。

如果必须这样做，请将 SQL 构建为

```
"SELECT * FROM PHYSICIAN_INFO WHERE " + "BADGEID" + " = ?" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:57:34.257

你可以尝试这样的事情，因为？只能用于传递参数，或者您可以使用数据库函数，然后将值传递给函数。

```
private static final String QUERY_PHYSICIAN_INFO_BADGE= "SELECT * FROM PHYSICIAN_INFO WHERE BADGEID = ?";

private static final String QUERY_PHYSICIAN_INFO_ID= "SELECT * FROM PHYSICIAN_INFO WHERE ID = ?";

Connection conn = null;
    PreparedStatement stmt = null;  
     String logintype;
       if(isInteger(id))
       {               
           stmt=conn.prepareStatement(QUERY_PHYSICIAN_INFO_BADGE);

       }else{               
           stmt=conn.prepareStatement(QUERY_PHYSICIAN_INFO_ID);
       }
        stmt.setString(1, id);
        ResultSet rs = stmt.executeQuery();
        Physician phs = null; 
```

# java - 寻找在 Java 中创建 32 或 16 字节密钥的签名算法

> ID：12246362
> 
> 赞同：0
> 
> 时间：2012-09-03T10:49:45.840
> 
> 标签：java, licensing, sha, public-key, dsa

无法匹配使用用于许可应用程序的公钥/私钥生成的密钥大小。我编写了一个自包含的示例，该示例创建公钥/私钥，通过使用公钥签署用户电子邮件地址来创建许可证，然后使用公钥、许可证和电子邮件地址检查许可证确实是使用私钥编码的（显然这不会通常都在一个班级）。

这一切都有效，但是许可证密钥的十六进制版本是 96 个字符（即代表 48 字节/384 位），这比我想要的长一点（相比之下，公钥/私钥的长度不是问题，越长越好）。我可以用什么来生成 32（64 个十六进制字符）字节或 16 个字节（32 个十六进制字符），这样的安全性是否合理？

选择另一种算法有点困难，因为我不了解为生成密钥而选择的算法之间的交互

```
KeyPairGenerator.getInstance("DSA"); 
```

和签名算法

```
Signature.getInstance("SHA/DSA"); 
```

我找不到任何一个列表。

另一点当我生成公钥/私钥对时，我指定密钥大小

```
keyGen.initialize(1024, new SecureRandom()); 
```

然而，公钥（443 字节）或私钥（335 字节）或两者之和（778 字节）都不匹配这个数字。

```
import org.apache.commons.codec.binary.Hex;

import java.security.*;
import java.security.spec.PKCS8EncodedKeySpec;
import java.security.spec.X509EncodedKeySpec;

/**
 *
 */
public class CreateLicense
{

    private String PUBLIC_KEY;
    private String PRIVATE_KEY;

    public static void main(final String[] args)
    {
        try
        {
            String email = args[0];
            System.out.println("Creating license for:"+email);
            CreateLicense cl = new CreateLicense();
            cl.generatePublicPrivateKeyPair();
            String license = cl.createLicense(email);
            cl.checkLicense(email, license);

        }
        catch(Throwable t)
        {
            t.printStackTrace();
        }
    }

    //Would only be done once on server
    private void generatePublicPrivateKeyPair() throws Exception
    {
        final KeyPairGenerator keyGen = KeyPairGenerator.getInstance("DSA");
        keyGen.initialize(1024, new SecureRandom());
        final KeyPair pair = keyGen.generateKeyPair();
        PrivateKey privateKey = pair.getPrivate();
        PRIVATE_KEY=Hex.encodeHexString(privateKey.getEncoded());
        PublicKey  publicKey = pair.getPublic();
        PUBLIC_KEY=Hex.encodeHexString(publicKey.getEncoded());
        System.out.println("PrivateKeyHexLength:"+privateKey.getEncoded().length);
        System.out.println("PublicKeyHexLength:"+publicKey.getEncoded().length);

    }

    private PrivateKey reinflatePrivateKey(String keyAsHexString) throws Exception
    {
        byte[] keyBytes = Hex.decodeHex(keyAsHexString.toCharArray());
        final  PKCS8EncodedKeySpec privKeySpec = new PKCS8EncodedKeySpec(keyBytes);
        final  KeyFactory keyFactory = KeyFactory.getInstance("DSA");
        final  PrivateKey privateKey = keyFactory.generatePrivate(privKeySpec);
        return privateKey;
    }

    private PublicKey reinflatePublicKey(String keyAsHexString) throws Exception
    {
        byte[] keyBytes = Hex.decodeHex(keyAsHexString.toCharArray());
        final  X509EncodedKeySpec pubKeySpec = new X509EncodedKeySpec(keyBytes);
        final  KeyFactory keyFactory = KeyFactory.getInstance("DSA");
        final  PublicKey publicKey = keyFactory.generatePublic(pubKeySpec);
        return publicKey;
    }

    //License Create on server based on email address
    private String createLicense(String emailAddress) throws Exception
    {
        String message=emailAddress;
        PrivateKey privateKey =  reinflatePrivateKey(PRIVATE_KEY);
        final Signature dsa = Signature.getInstance("SHA/DSA");
        dsa.initSign(privateKey);
        dsa.update(message.getBytes());
        final byte[] m1 = dsa.sign();
        String license =  Hex.encodeHexString(m1);
        System.out.println("CreateLicense:"+license+":Size:"+license.length());
        return license;
    }

    //Client checks that given known emailaddress and public key that a if a license was derived from
    //that and corresponding privatekey it would match license.
    private boolean checkLicense(String  emailAddress, String license) throws Exception
    {
        String message=emailAddress;
        PublicKey publicKey =  reinflatePublicKey(PUBLIC_KEY);
        final Signature dsa = Signature.getInstance("SHA/DSA");
        dsa.initVerify(publicKey);
        dsa.update(message.getBytes());

        boolean result = dsa.verify(Hex.decodeHex(license.toCharArray()));
        System.out.println("Result"+result);
        return result;
    }
} 
```

给出类似的输出

```
Creating license for:testuser@nowhere.com
PrivateKeyHexLength:335
PublicKeyHexLength:443
CreateLicense:302c021425f7ad7289b073f82a1d808838f43e0134c5591402140d2a7a4e3967706d4659dc73ace6455040a5fc6b:Size:92
Resulttrue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:07:31.817

@Paul - 我认为您的解决方案是使用 ECDSA。更改您的代码行

```
final KeyPairGenerator keyGen = KeyPairGenerator.getInstance("DSA"); 
```

至

```
final KeyPairGenerator keyGen = KeyPairGenerator.getInstance("ECDSA"); 
```

密钥比 DSA 短得多——而且我确信十六进制版本的签名会更短。我建议您使用 256 或 128 位的主要 ECC 曲线。

请让我们知道这是否可以解决问题。

# javascript - 如何在 KendoDropDownList 中使项目不可点击（项目将可见）

> ID：12246366
> 
> 赞同：0
> 
> 时间：2012-09-03T10:49:59.227
> 
> 标签：javascript, kendo-ui

```
var items = [ { Id: 0, Title: "Manager" }, { Id: 1, Title: "Developer" }, { Id: 2, Title:      "Vice President" } ];

$("#dropdownlist").kendoDropDownList({
dataSource: items,
dataTextField: "Title",
dataValueField: "Id"
}); 
```

现在我想要第 0 个项目（“经理”）不可点击。但这个项目将是可见的。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:17:11.243

```
#dropdownlist :first-child{
    pointer-events: none;
} 
```

_

```
element.onclick = function(event){
    event.stopPropagation();
    return false;
} 
```

# javascript - 右键单击动态 crm 2011 中已完成活动的只读文本时是否出现错误？

> ID：12246374
> 
> 赞同：0
> 
> 时间：2012-09-03T10:50:41.120
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011, dynamics-crm-4

右键单击 -> 在 Dynamics 2011 中已完成活动的只读字段上复制总是会导致错误。也许不是一个表演停止者（CTRL + C有效），而是一种痛苦。

以下是错误消息。 **'srcElement.tagName' 为 null 或不是对象**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:01:13.250

不，我没有，对我来说很好用。不过，我必须先突出显示文本。

你在什么汇总？另外你用的是哪个版本的IE？

# node.js - socket.io 中最大同时打开的房间

> ID：12246376
> 
> 赞同：7
> 
> 时间：2012-09-03T10:50:46.620
> 
> 标签：node.js, socket.io

我正在使用 node.js、mongodb、socket.io 和 express 实现聊天服务器。我想知道的是最大数量是否有限制。socket.io 多房间聊天同时开放的房间数量。

另外，有没有上限。每个房间的用户数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-30T17:20:33.677

Socket.io 对服务器可以连接多少用户、一个房间有多少用户或有多少房间没有任何限制和限制。

您的限制与以下内容有关：

1.  软件实施（性能）
2.  网络逻辑模型：事件、线程、单线程
3.  操作系统设置：套接字处理程序和许多其他细节
4.  硬件：CPU、RAM、带宽（In\Out）、HDD/SSD（如果有数据库/文件缓存（仍然可以基于 RAM））。

顺序很重要，通常会尝试从上到下，根据应用程序的要求提前重新评估每个点。操作系统设置必须首先完成。

# javascript - Google Maps API v3：处理使用限制限制

> ID：12246377
> 
> 赞同：0
> 
> 时间：2012-09-03T10:50:46.667
> 
> 标签：javascript, jquery, jquery-ui, google-maps

Google 地图对 API 的使用有限制： 所有网络服务 每个网络服务每秒 10 个请求的速率限制。Google Places API 有单独的使用限制。参考：[谷歌地图 API 使用限制](https://developers.google.com/maps/documentation/business/faq#js_usage_limits)

我已向 Google Maps API 发送了 10 多个请求。下面是我使用[JQuery.ui.maps](http://code.google.com/p/jquery-ui-map/wiki/Examples)编写的示例代码：

```
 $('#map').gmap('displayDirections', {
             'origin': new google.maps.LatLng(42.645573,-71.098326),
             'destination': new google.maps.LatLng(42.345573,-72.298326),
             'travelMode': google.maps.DirectionsTravelMode.DRIVING },
             {suppressMarkers: true},function(success, result) {
                if ( success )
                   alert('Results found!');
             }); 
```

我已根据我的要求更新了以下 jquery 函数。我为每个请求添加了 1 秒的睡眠/延迟。

```
displayDirections: function(current, directionsRequest, directionsRendererOptions, callback) {
        alert("displayDirections "+current);
        var startTime = new Date().getTime(); // get the current time
            while (new Date().getTime() < startTime + 1000) {
            } // hog cpu
        var self = this;        
        var directionService = this.get('services > DirectionsService', new google.maps.DirectionsService());

        var directionRenderer =new google.maps.DirectionsRenderer(directionsRendererOptions);

        directionService.route(directionsRequest, function(results, status) {
            alert("directionService Called " + current);
            var startTime = new Date().getTime(); // get the current time
            while (new Date().getTime() < startTime + 1000) {
            } // hog cpu
            if ( status === 'OK' ) {
                directionRenderer.setDirections(results);
                directionRenderer.setMap(self.get('map'));
            } else {
                alert(status)
                directionRenderer.setMap(null);
            }
            self.get('directionRenderers').push(directionRenderer);

            callback(results, status);
        });
    } 
```

但它没有按要求工作。有人可以通过展示如何解决此限制来帮助我。

如果需要更多详细信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:08:36.250

你可以检查'OVER_QUERY_LIMIT'的状态，如果你得到这个，那么你可以延迟几秒钟，比如$.delay(3000)： [http ://api.jquery.com/delay/](http://api.jquery.com/delay/)

您是否超过每日限制或 10/秒限制？

# asp.net-mvc - 会员资格提供者可以具体要求吗

> ID：12246382
> 
> 赞同：2
> 
> 时间：2012-09-03T10:51:14.200
> 
> 标签：asp.net-mvc, asp.net-membership, membership-provider, multi-tenant

在多租户（每个客户端单独的数据库）模型中是否可以使用 Microsoft MembershipProvider 或 SimpleMembership 提供程序？

原始成员资格提供程序是从 web.config 配置的，Simplemembershipprovider（在 MVC4 模板中）有一个方法，该方法在每次应用程序启动而不是每次会话或请求时初始化数据库。

因此，会员资格/简单会员资格提供者是否与应用程序相关联，或者原则上，将数据库连接更改为指向每个请求的请求客户端数据库是否明智？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:45:42.397

我的自定义会员提供程序是可能的：

[http://blog.gauffin.org/2011/09/a-more-structured-membershipprovider/](http://blog.gauffin.org/2011/09/a-more-structured-membershipprovider/)

`IAccountRepository`在 SqlServer 包中的一个之上创建您的自定义。比实现自己的提供者要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:37:20.280

我已经看到并实现了一些非常相似的东西，基于 [ASP.NET 中的代码：支持动态应用程序](http://cgeers.com/2009/10/24/asp-net-supporting-dynamic-applications/)。

这与您所要求的不同 - 这里的目标是使用相同的成员数据库，但每个客户端使用不同的应用程序名称。

我不确定如何动态设置连接字符串 -[`SqlMembershipProvider`](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx)不公开该属性。您可能从 开始[`Initialize`](http://msdn.microsoft.com/en-us/library/system.configuration.provider.providerbase.initialize.aspx)，但正如您所说，它不会在每个请求上运行。还可以选择创建自己的提供者，并为`SqlMembershipProvider`每个请求创建一个内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:22:24.083

我们确定我们需要使用依赖注入来为每个租户请求添加自定义成员资格提供程序。通过彻底的调查，很明显我们无法修改会员提供者的连接，并确保在完成请求之前它没有被另一个请求修改。由于其单例设计。

干杯蒂姆

# java - 在球衣请求中获取客户端语言环境

> ID：12246383
> 
> 赞同：10
> 
> 时间：2012-09-03T10:51:20.380
> 
> 标签：java, jersey, locale, jax-rs

在 Jersey (JAX-RS) 请求的上下文中获取**客户端语言环境**的最佳和更便携的方法是什么？我有以下代码：

```
@GET
@Produces("text/html")
@Path("/myrequest")
public Response myRequest(@Context HttpServletRequest request) {
    Locale locale = ...
} 
```

请假设“请求”是由浏览器中的一些 javascript 代码发出的，通过调用`window.location = ...;`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T12:51:02.977

`Locale locale = request.getLocale();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-03T14:47:36.367

为此使用 HTTP 标头。要请求美国区域设置小数中的数值，您可以这样请求：

`GET /metrics/007/size Accept-Language: en-US`

然后从代码：

```
public Response myRequest(@Context HttpServletRequest request) {
Locale locale = request.getLocale();
...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T12:55:06.280

客户端应设置[`Accept-Language`标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-10T16:09:17.747

根据最终目标，可以通过不同方式获取语言/区域设置数据。根据问题，我认为最合适的解决方案是：

```
@GET
public Response myRequest( @Context HttpServletRequest request )
{
   Locale locale = request.getLocale();
   ...
} 
```

另一种可能的替代方法是使用语言查询参数：

```
@GET
public Response myRequest( @QueryParam( "language" ) String language )
{
   ...
} 
```

或者，“Accept-Language”标头参数：

```
@GET
public Response myRequest( @HeaderParam( "Accept-Language" ) String acceptLanguage )
{
   ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-15T16:40:16.090

正如 user3774109 回答的那样，使用`Accept-Language`HTTP 标头。尽管它在 Jersey 实现中使用，但该接口`javax.servlet.http.HttpServletRequest`实际上并不是 JAX-RS API 的一部分。获得首选接受语言的更简洁方法是：

```
@GET
@Produces("text/html")
@Path("/myrequest")
public Response myRequest(@Context HttpHeaders headers) {
    Locale locale = headers.getAcceptableLanguages().get(0);
    ...
} 
```

# android - 删除操作栏下方的阴影

> ID：12246388
> 
> 赞同：217
> 
> 时间：2012-09-03T10:51:53.180
> 
> 标签：android, android-actionbar, actionbarsherlock

我使用actionbarsherlock。下面的一段代码负责将其背景更改为自定义背景。

```
<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="background">@drawable/actionbar_bg</item>
    <item name="android:background">@drawable/actionbar_bg</item>
    <...>  
</style>

<style name="Theme.MyApp" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <..>
</style> 
```

它适用于 actionbarsherlock（在蜂窝以下的版本上）。但是在 ICS 中，我在操作栏下方有一个我不想要的阴影。**让它消失的样式项目是什么？**

* * *

## 回答 #1

> 赞同：493
> 
> 时间：2012-09-03T11:04:48.583

> 让它消失的样式项目是什么？

为了移除阴影，请将其添加到您的应用主题中：

```
<style name="MyAppTheme" parent="android:Theme.Holo.Light">
    <item name="android:windowContentOverlay">@null</item>
</style> 
```

**更新：** 正如@Quinny898 所说，在 Android 5.0 上这已经改变，你必须调用`setElevation(0)`你的操作栏。请注意，如果您使用的是支持库，则必须像这样调用它：

```
getSupportActionBar().setElevation(0); 
```

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2014-11-29T14:15:45.777

对于 Android 5.0，如果您想直接将其设置为样式，请使用：

```
<item name="android:elevation">0dp</item> 
```

和支持库兼容性使用：

```
<item name="elevation">0dp</item> 
```

AppCompat 轻主题的样式示例：

```
<style name="Theme.MyApp.ActionBar" parent="@style/Widget.AppCompat.Light.ActionBar.Solid.Inverse">
    <!-- remove shadow below action bar -->
    <!-- <item name="android:elevation">0dp</item> -->
    <!-- Support library compatibility -->
    <item name="elevation">0dp</item>
</style> 
```

然后将此自定义 ActionBar 样式应用于您的应用程序主题：

```
<style name="Theme.MyApp" parent="Theme.AppCompat.Light">
    <item name="actionBarStyle">@style/Theme.MyApp.ActionBar</item>
</style> 
```

对于 5.0 之前的 Android，也将其添加到您的应用主题中：

```
<!-- Remove shadow below action bar Android < 5.0 -->
<item name="android:windowContentOverlay">@null</item> 
```

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2014-10-29T10:10:58.127

在 Android 5.0 上，这已经改变，您必须在操作栏上调用 setElevation(0)。请注意，如果您使用的是支持库，则必须像这样调用它：

```
getSupportActionBar().setElevation(0); 
```

它不受 windowContentOverlay 样式项的影响，因此不需要更改样式

* * *

## 回答 #4

> 赞同：55
> 
> 时间：2016-01-14T15:08:11.030

添加`app:elevation="0dp"`AppBarLayout 以在 appbar 中隐藏阴影

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2012-12-10T10:01:42.867

如果您正在使用 ActionBarSherlock

在您的主题中添加以下内容：

```
<style name="MyTheme" parent="Theme.Sherlock">
    ....
    <item name="windowContentOverlay">@null</item>
    <item name="android:windowContentOverlay">@null</item>
    ....
</style> 
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2016-09-20T07:31:08.933

您必须设置`app:elevation="0dp"`它`android.support.design.widget.AppBarLayout`然后它才能工作。

```
<android.support.design.widget.AppBarLayout
    app:elevation="0dp"... >

    <android.support.v7.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:background="@android:color/transparent"
        app:popupTheme="@style/AppTheme.PopupOverlay" >

    </android.support.v7.widget.Toolbar>

</android.support.design.widget.AppBarLayout> 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2017-02-24T19:36:07.330

```
app:elevation="0dp" 
```

但不是

```
android:elevation="0dp" 
```

在 android L 上为我工作

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-04-26T11:40:37.190

我有同样的问题，我已经成功解决了这个问题。您只需在要删除高程的活动中将高程更改为 0 浮点值即可。

如果您想在一个名为的活动中更改它，`MyActivity.java`那么您必须获得第`ActionBar`一个。

首先导入`ActionBar`类

```
import android.support.v7.app.ActionBar; 
```

导入后，您必须初始化操作栏的变量并将其高度设置为 0。

```
 private ActionBar toolbar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    .
    .
    toolbar=getSupportActionBar();
    toolbar.setElevation(0);
    .
    .
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-30T22:32:03.307

**Kotlin**解决方案（Android 3.3，Kotlin 1.3.20）

```
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    supportActionBar!!.elevation = 0f
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-27T14:12:46.173

对于 Xamarin 开发人员，请使用 : `SupportActionBar.Elevation = 0;`for `AppCompatActivity`or `ActionBar.Elevation = 0;`for non-compat 活动

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-08T06:45:15.173

试试这个它在不改变主题的情况下帮助了我。将您的 AppBarLayout 放在任何布局中。希望这会对您有所帮助

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
<android.support.design.widget.AppBarLayout
    android:id="@+id/app_bar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:fitsSystemWindows="false"
    android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">

    <android.support.v7.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        app:popupTheme="@style/ThemeOverlay.AppCompat.Light"
        android:layout_height="?attr/actionBarSize"
       android:background="@color/white">
        <ImageView
            android:src="@drawable/go_grocery_logo"
            android:layout_width="108dp"
            android:layout_height="32dp" />
    </android.support.v7.widget.Toolbar>

</android.support.design.widget.AppBarLayout>
</RelativeLayout> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-05-04T22:26:14.570

将此添加`toolbar.getBackground().setAlpha(0);`到 OnCreate 方法内部。添加这个： `android:elevation="0dp" android:background="@android:color/transparent` 到您的工具栏 xml 文件。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-24T06:30:43.850

对于那些在片段上工作并且在设置`toolbar.getBackground().setAlpha(0);`或任何消失后消失的人，我认为你必须将你的 AppBarLayout 带到 xml 中的最后一个，所以它的 Fragment 然后是 AppBarLayout 然后是你使用的 relativelayout/constraint/linear。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-16T15:31:45.617

利用：

```
outLineAmbientShadowColor="@null" 
```

# vim - Vim：如何使用每行多次出现的 ci（内部更改）

> ID：12246390
> 
> 赞同：4
> 
> 时间：2012-09-03T10:52:03.820
> 
> 标签：vim

在这样的一行中：

```
something "one!", "and two", "and three", "and more" 
```

我应该如何使用命令 ci" 来替换 "and three"？

我尝试了一些没有运气的组合组合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:49:41.847

首先导航到所需的子字符串：

```
/three 
```

或在行中：

```
f";;;; 
```

（移动到接下来的`"`5 次）

或者

```
f,; 
```

然后，`ci"`zaps 将光标留在空引号内插入的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:11:36.363

移入子字符串：

> 2发

然后替换和三个：

> 词"

# javascript - 从 javascript 调用 Activex Control 的函数

> ID：12246391
> 
> 赞同：2
> 
> 时间：2012-09-03T10:52:04.460
> 
> 标签：javascript, vb6, activex

我想从javascript调用一个函数。

前任 。我有一个带有名为 "btn" 的按钮的 activex 控件，

我想用js返回它的标题，技术上可行吗？

另外我如何在 vb6 Activex Control 中编写自定义函数？我需要在网页上嵌入控件。

前任。

```
Option Explicit
Public Function getText(ByVal message As String) As String
MsgBox message
End Function

Private Sub UserControl_Initialize()
Call getText("test")
End Sub 
```

我想`getText`从javascript调用。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:34:51.460

您首先需要为 Web 部署打包 ActiveX（有关详细信息，请参阅 MSDN 库）。

至于代码，这里是一个例子

```
<object classid="clsid:24638d61-2aeb-1cd2-b12f-a08048fdd814"
  codebase="http://www.myserver.com/myactivex.cab#Version=1.0.0.1"></object>

<script>
  onload = function() {
    var myobj = new ActiveXObject('MyActiveX.MyObj');
    myobj.getText('test');
  };
</script> 
```

# xml - 在 XQuery 的 concat 函数中调用多个函数

> ID：12246392
> 
> 赞同：1
> 
> 时间：2012-09-03T10:52:06.473
> 
> 标签：xml, function, xquery

我需要从以下 XML 生成点图。

```
<layout>
<layout-structure>
    <layout-root id="layout-root" orientation="landscape">
        <layout-chunk id="header-text">
            <layout-leaf xref="lay-1.01"/>
            <layout-leaf xref="lay-1.02"/>
        </layout-chunk>
        <layout-leaf xref="lay-1.03"/>
                    <layout-leaf xref="lay-1.03"/>
    </layout-root>
</layout-structure>
<realization>
    <text xref="lay-1.01"/>
    <text xref="lay-1.02"/>
    <graphics xref="lay-1.03 lay-1.04"/>
</realization>
</layout> 
```

我使用以下 XQuery 生成 DOT 标记：

```
declare variable $newline := '&#10;';

declare function local:ref($root) {
  string-join((
  for $chunk in $root/layout-chunk
  return (
      concat('  "', $root/@id, '" -- "', $chunk/@id, '";', $newline),
  local:ref($chunk)
),
local:leaf($root)), "")
};

declare function local:leaf($root) {
for $leaf in $root/layout-leaf
return concat('  "', $root/@id, '" -- "', $leaf/@xref, '";', $newline)
};

let $doc := doc("layout-data.xml")/layout
let $root := $doc/layout-structure/*
return concat('graph "', $root/@id, '" { ', $newline, local:ref($root),'}') 
```

上面的查询工作正常并生成以下图表：

```
graph "layout-root" {
"layout-root" -- "header-text";
"header-text" -- "lay-1.01";
"header-text" -- "lay-1.02";
"layout-root" -- "lay-1.03";
"layout-root" -- "lay-1.04";
} 
```

结果如下所示：

![](../Images/116c4d781baeb887937e25bcea314253.png)

现在，我想做的是根据它们的属性为 DOT 图中的每个元素分配一组属性，定义在 XML 中的**实现**元素下，如下所示：

![](../Images/4e62918fab6ac7f53a3158c71a5f9837.png)

当然，这需要以下 DOT 标记：

```
graph "layout-root" {
"lay-1.03" [shape="box", style="filled", color="#b3c6ed"];
"lay-1.04" [shape="box", style="filled", color="#b3c6ed"]; 
"layout-root" -- "header-text";
"header-text" -- "lay-1.01";
"header-text" -- "lay-1.02";
"layout-root" -- "lay-1.03";
"layout-root" -- "lay-1.04";
} 
```

我编写了两个额外的变量和函数来选择和编写所需的 DOT 标记：

```
declare variable $dotgraphics := '[shape="box", style="filled", color="#b3c6ed"]';

declare function local:gfx($doc) {
for $layout-leafs in $doc//layout-leaf
let $graphics := $doc/realization//graphics
where $graphics[contains(@xref, $layout-leafs/@xref)]
return concat($layout-leafs/@xref, ' ', $dotgraphics, ';', $newline)
}; 
```

我的问题是：如何将函数*local:gfx 包含*到上面的 XQuery 脚本中？

*如果我只是在local:ref($root)*之前调用函数 *local:gfx($doc) ，如下所示，

```
return concat('graph "', $root/@id, '" { ', $newline, local:gfx($doc), $newline, local:ref($root),'}') 
```

查询返回一个错误，多个项目的序列不能作为*concat*函数的参数；如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:16:34.800

您可以使用[`fn:string-join($strings[, $separator])`](http://www.w3.org/TR/xpath-functions-30/#func-string-join)它，它将字符串作为一个序列。如果您`$newline`用作第二个参数（默认为空字符串），它甚至会为您插入换行符：

```
string-join(('foo', 'bar', 'baz'), '&#10;') 
```

产量

```
foo
bar
baz 
```

# javascript - 如何从javascript中的字符串获取月份？

> ID：12246394
> 
> 赞同：10
> 
> 时间：2012-09-03T10:52:12.767
> 
> 标签：javascript, date

我努力了

```
 var d=new Date("2012-07-01 00:00:00.0");
     alert(d.getMonth()); 
```

但是越来越`NAN`。

`July`上述日期想要月份。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T11:27:50.760

假设您的日期是 YYYY-MM-DD 格式

```
var arr = "2012-07-01 00:00:00.0".split("-");
var months = [ "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December" ];
var month_index =  parseInt(arr[1],10) - 1;
console.log("The current month is " + months[month_index]); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-12-23T00:38:12.093

Using [the JavaScript Internationalization API](https://hacks.mozilla.org/2014/12/introducing-the-javascript-internationalization-api/):

```
var date = new Date("2012-07-01");

var monthName = new Intl.DateTimeFormat("en-US", { month: "long" }).format;
var longName = monthName(date); // "July"

var shortMonthName = new Intl.DateTimeFormat("en-US", { month: "short" }).format;
var shortName = shortMonthName(date); // "Jul" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-03T11:15:59.433

尝试这个：

```
 var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
    var str="2012-07-01";   //Set the string in the proper format(best to use ISO format ie YYYY-MM-DD or YYYY-MM-DDTHH:MM:SS)
    var d=new Date(str);  //converts the string into date object
    var m=d.getMonth(); //get the value of month
    console.log(monthNames[m]) // Print the month name 
```

**注意：** getMonth() 返回 0-11 范围内的值。

另一种选择是使用`toLocaleString`

```
var dateObj = new Date("2012-07-01");
//To get the long name for month
var monthName = dateObj.toLocaleString("default", { month: "long" }); 
// monthName = "November"

//To get the short name for month
var monthName = dateObj.toLocaleString("default", { month: "short" });
// monthName = "Nov" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T12:26:34.767

Javascript Date 对象不存储月份的全名。所以你必须使用一个数组。

```
var dateString = "2012-07-01 00:00:00.0";

var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

var date = new Date(dateString.replace(" ", "T"));
alert(monthNames [date.getMonth()]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T10:53:34.643

您需要为其创建一个数组：[http ://www.w3schools.com/jsref/jsref_getmonth.asp](http://www.w3schools.com/jsref/jsref_getmonth.asp)

还有为什么不将您的日期初始化为： var d = new Date(2012,7,1);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T11:04:56.600

试试这个：

```
var months = [ "January", "February", "March", "April", "May", "June",
   "July", "August", "September", "October", "November", "December" ];
document.write("The current month is " + months[d.getMonth()]); 
```

> 一月-> 0，二月-1 等等......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T11:19:38.137

You can use this library to make things easier. [http://www.datejs.com/](http://www.datejs.com/) And then try the following code:

```
var d=new Date.parse("2012-07-01 00:00:00.0");
 alert(d..tString('MMMM')); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-23T03:02:27.703

简短的回答：使用上面的代码，这些天大多数人都会收到警报，`6`因为 Chrome 和 Firefox 现在可以理解这种格式。它是 6 而不是 7，因为`Date`s 将月份理解为以 0 开头的索引，因此 0 是 Jan，1 是 Feb，2 是 Mar，等等。所以最简单的解决方法是：

```
var d=new Date("2012-07-01 00:00:00.0");
var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
var monthIndex = d.getMonth();
alert(months[monthIndex]); 
```

（请考虑使用不同的方法来构建日期！）

长答案：

```
var d=new Date("2012-07-01 00:00:00.0"); 
```

问题是您得到一个无效的日期对象，因为浏览器不理解该字符串。浏览器对此并不一致 - Chrome 和 Firefox 实际上正确解析它并且会发出警报`6`而不是`NaN`. 但是，不精确的格式仍然不是一个好主意 - 例如，当前的 Safari 不解析它。[https://www.rfc-editor.org/rfc/rfc2822#section-3.3](https://www.rfc-editor.org/rfc/rfc2822#section-3.3)中描述了保证有效的格式。

不过，您可能更喜欢使用此构造函数：

```
new Date(year, month[, date[, hours[, minutes[, seconds[, milliseconds]]]]]); 
```

在您的示例中，您可以这样称呼它：

```
var d=new Date(2012, 6, 1); 
```

请注意 6 而不是 7！`Date`s 将月份理解为以 0 开头的索引，因此 0 是一月，1 是二月，2 是三月，等等。这在使用日期构造函数时会令人困惑，但更容易转换为`July`所要求的：

```
var d=new Date(2012, 6, 1);
var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
var monthIndex = d.getMonth();
alert(months[monthIndex]); 
```

您可以在此处了解更多信息`Date`：[https ://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date)

# php - 如何删除除邮件格式容器标签之外的标签

> ID：12246408
> 
> 赞同：5
> 
> 时间：2012-09-03T10:53:03.363
> 
> 标签：php, regex, email, replace

很难用语言来描述我的问题，我将尝试举一个例子：

```
str = '<p>lorem ipsum <xyz@abc.com> donor sit <br></p>'; 
```

我需要删除所有标签，除了**`<xyz@abc.com>`**

我们如何在 javascript 和 PHP 中进行操作？

我的 PHP 解决方案：

```
class test {
    public function keepMailAddresses($text){
       $callBack = array($this,'_keepMailAddresses');
       return preg_replace_callback('/(<)([^0-9][a-zA-Z0-9_]*([.][a-zA-Z0-9_]+)*[@][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{2,4})(>)/i', $callBack, $text);        
    }

    private function _keepMailAddresses($matches){
       return '&lt;'.$matches[2].'&gt;';
    }

}

$obj = new test();
echo $obj->keepMailAddresses('<p>lorem ipsum <xyz@abc.com> donor sit <br></p>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:45:33.960

好的，我的解决方案有点奇怪，但可以解决问题：D

```
$pagecode = '<p>lorem ipsum <xyz@abc.com> donor <abc_def.xyz@abc.com> sit <abc_def.xyz@abc.abc.com><br></p>';

// this will check if it's a real email but you don't need it
/*$allowed = preg_match_all("/\<+([_a-z0-9-]+)(\.[_a-z0-9-]+)*@([a-z0-9-]+)(\.[a-z0-9-]+)*(\.[a-z]{2,4})+\>/i", $pagecode, $matches);*/

$allowed = preg_match_all("/\<([_a-z0-9-\.]+)@([_a-z0-9-\.]+)\>/i", $pagecode, $matches);

$allowed = implode(" ", $matches[0]);
$output = strip_tags($pagecode, $allowed);
echo htmlentities($output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:55:13.077

在标题部分使用下面

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

像这样放

```
str = '<p>lorem ipsum "<xyz@abc.com>" donor sit <br></p>'; 
```

# c# - 使用 IValueConverter 将双重评分转换为图像

> ID：12246410
> 
> 赞同：0
> 
> 时间：2012-09-03T10:53:09.277
> 
> 标签：c#, windows-runtime, rating, winrt-xaml, ivalueconverter

我从网络服务获得的膳食评级为双倍值。

在我的 Xaml 中，我想将此值转换为星形图像。范围是 0 - 5，我希望能够每 0.5 步转换一次。

如果我得到 3.75 的评分，我想要三颗“满星”和一颗半星。举个例子看看这个网站：[点击我](http://www.doenermap.de/details/zel_d%C3%B6ner.html)

如何通过 Xaml 实现这一目标？

**解决方案：**

在这里找到了一个工作控件：http: [//metrorate.codeplex.com/](http://metrorate.codeplex.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:35:32.207

在这里找到了一个工作控件：http: [//metrorate.codeplex.com/](http://metrorate.codeplex.com/)

# php - jQuery Post 和获取表单数据

> ID：12246412
> 
> 赞同：0
> 
> 时间：2012-09-03T10:53:09.880
> 
> 标签：php, javascript, jquery, html, validation

提交表单后，我可以使用 $_POST 获取其字段值。但是，我正在尝试使用基本的 jQuery（没有任何插件）来检查是否有任何字段为空白，我只想在没有任何空白字段的情况下发布表单内容。

我正在尝试以下代码，并且使用 jQuery 获得了成功，但唯一的问题是在使用 jQuery 检查后我无法发布表单。在 jQuery 之后它不会到达 $_POST。

另外，如何在 jQuery 中获取服务器响应（以检查是否有任何服务器错误）。这是我正在尝试的：

**HTML：**

```
<form action="" id="basicform" method="post">
    <p><label>Name</label><input type="text" name="name" /></p>
    <p><label>Email</label><input type="text" name="email" /></p>  

    <input type="submit" name="submit" value="Submit"/>
</form> 
```

**jQuery：**

```
jQuery('form#basicform').submit(function() {
    //code
    var hasError = false;

    if(!hasError) {
            var formInput = jQuery(this).serialize();
            jQuery.post(jQuery(this).attr('action'),formInput, function(data){

            //this does not post data
            jQuery('form#basicform').slideUp("fast", function() {
                    //how to check if there was no server error.
                });
            });
        }               
    return false;

}); 
```

**PHP：**

```
if(isset($_POST['submit'])){
    $name = trim($_POST['name'];
    $email = trim($_POST['email'];  

    //no any error
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:56:46.690

有两种方法可以做到这一点

**方式一：**

根据您的实现，您正在使用`input[type="submit"]`它的默认行为是提交表单。因此，如果您想在提交表单之前进行验证，则必须`preventDefault()`对其行为

```
 jQuery('form#basicform').submit(function(e) {
        //code
e.preventDefault();
        var hasError = false;

        if(!hasError) {
                var formInput = jQuery(this).serialize();
                jQuery.post(jQuery(this).attr('action'),formInput, function(data){

                //this does not post data
                jQuery('form#basicform').slideUp("fast", function() {
                        //how to check if there was no server error.
                    });
                });
            }        
$(this).submit();       
        return false;

    }); 
```

**方式二：**

或者只是用简单的按钮替换您的提交按钮，然后手动提交您的表单。和`$("yourFormSelector").submit();`

将提交按钮更改为简单按钮

即改变

```
<input type="submit" name="submit" value="Submit"/> 
```

到

```
<input id="frmSubmit" type="button" name="submit" value="Submit"/> 
```

你的 jQuery 代码将是

```
jQuery('input#frmSubmit').on('click',function(e) {
        //code
        var hasError = false;

        if(!hasError) {
                var formInput = jQuery(this).serialize();
                jQuery.post(jQuery(this).attr('action'),formInput, function(data){

                //this does not post data
                jQuery('form#basicform').slideUp("fast", function() {
                        //how to check if there was no server error.
                    });
                });
            }        
$("form#basicform").submit();       
        return false;

    }); 
```

要从服务器获得响应，您必须得到`echo`响应。

假设，如果所有变量都设置好了，那么`echo 1;`else `echo 0`。

```
 if(isset($_POST['submit'])){
        $name = trim($_POST['name'];
        $email = trim($_POST['email'];  
        echo 1;
    } else {
        echo 0;
    } 
```

在你的成功回调函数中`$.post()`处理它就像

```
jQuery.post(jQuery(this).attr('action'),formInput, function(data){
                //this does not post data
                jQuery('form#basicform').slideUp("fast",{err:data}, function(e) {
                        if(e.data.err==1){
                             alert("no error");
                        } else {
                             alert("error are there");
                    });
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:57:16.707

您可以改为返回类似服务器`{"error": "1"}`或`{"error": "0"}`从服务器返回的内容（意思是，将更具可读性的内容放入 JSON 响应中）。这使得检查更容易，因为你有一些东西在`data`.

**PHP：**

```
if(isset($_POST['submit'])){
    $name = trim($_POST['name'];
    $email = trim($_POST['email'];  

    //no any error
    return json_encode(array("error" => 0));
} else {
    return json_encode(array("error" => 1));
} 
```

**JavaScript：**

```
jQuery('input#frmSubmit').submit(function(e) {
        //code
        var hasError = false;

        if(!hasError) {
                var formInput = jQuery(this).serialize();
                jQuery.post(jQuery(this).attr('action'),formInput, function(data){
                var myData = data;

                if(myDate.error == 1) {//or "1"
                //do something here
                } else {
                //do something else here when error = 0
                }

                });
            }        
$("form#basicform").submit();       
        return false;

    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:25:04.743

要非常具体的问题：

> 如何在 jQuery 中获取服务器响应（检查是否有任何服务器错误）。这是我正在尝试的：

听起来你在谈论通过 jQuery-Ajax 进行服务器端验证。

那么，你需要：

*   将变量的 JavaScript 值发送到 PHP
*   检查是否有任何错误发生
*   将结果发送回 JavaScript

所以你说，

> 但是，我正在尝试使用基本的 jQuery（没有任何插件）来检查是否有任何字段为空白，我只想在没有任何空白字段的情况下发布表单内容。

JavaScript/jQuery 代码：

看看这个例子：

```
<script>
$(function()) {
    $("#submit").click(function() {
        $.post('your_php_script.php', {
             //JS Var   //These are is going to be pushed into $_POST
             "name"   : $("#your_name_field").val(),
             "email"  : $("#your_email_f").val()
        }, function(respond) {
           try {
               //If this falls, then respond isn't JSON 
               var result = JSON.parse(respond);

               if ( result.success ) { alert('No errors. OK')  }
           } catch(e) {
               //So we got simple plain text (or even HTML) from server
               //This will be your error "message" 
               $("#some_div").html(respond);
           }
       });
   });
}
</script> 
```

好吧，不是看php的时候了：

```
<?php

/**
 * Since you're talking about error handling
 * we would keep error messages in some array
 */

$errors = array();

function add_error($msg){
  //@another readers 
  //s, please don't tell me that "global" keyword makes code hard to maintain
  global $errors;
  array_push($errors, $msg);
}

/**
 * Show errors if we have any
 * 
 */
function show_errs(){
   global $errors;
   if ( !empty($errors) ){

     foreach($errors as $error){
        print "<p><li>{$error}</li></p>";
     }
     //indicate that we do have some errors:
     return false;
   }
  //indicate somehow that we don't have errors
  return true;
}

function validate_name($name){
  if ( empty($name) ){
     add_error('Name is empty');   
  }

  //And so on... you can also check the length, regex and so on
  return true;
}

//Now we are going to send back to JavaScript via JSON 

if ( show_errs() ){
   //means no error occured

   $respond = array();
   $respond['success'] = true;
   //Now it's going to evaluate as valid JSON object in javaScript
   die( json_encode($respond) );

} //otherwise some errors will be displayed (as html) 
```

# php - SQL注入结果

> ID：12246414
> 
> 赞同：-3
> 
> 时间：2012-09-03T10:53:16.343
> 
> 标签：php, sql, code-injection

为什么此查询返回 id 为 116 的行：

```
SELECT * 
FROM blahTable
WHERE id =  '116\' OR \'1\'=\'1' 
```

表中的 id 是 116 但在添加注入代码后它肯定应该返回 0 行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:05:20.790

因此，您要问的是，当您运行查询 id 的查询时，为什么返回 id 为 116 的行`'116\' OR \'1\'=\'1'`。

原因是类型转换。您的字符串被转换为整数和 116，因为您将它作为字符串传递但与整数进行比较。在这里阅读更多：http: [//dev.mysql.com/doc/refman/5.0/en/type-conversion.html](http://dev.mysql.com/doc/refman/5.0/en/type-conversion.html)

像 116foofoofoo 这样的字符串被转换为 116 以进行比较。

而不是应用 mysql_real_escape_string，您应该使用用于数字的方法，而不是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:05:52.123

因为`CAST('116\' OR \'1\'=\'1' AS SIGNED)`or`UNSIGNED`返回 116。

# javascript - google 闭包编译器、 PRETTY_PRINT 和对象字面量

> ID：12246417
> 
> 赞同：2
> 
> 时间：2012-09-03T10:53:18.273
> 
> 标签：javascript, json, google-closure-compiler, object-literal

我有一个带有变量的 file.js 文件，该变量的值是（嵌套的）对象文字。就像是

```
var ojb = {
    foo: {
        bar: 'baz'
    },
    quux: [
        { /* stuff */ },
        { /* stuff */ }
    ]
}; 
```

我将 google 闭包编译器与选项结合使用`--formatting=PRETTY_PRINT`，`--compilation_level=WHITESPACE_ONLY`因为我只是希望它“清理”输出（删除注释，统一大括号......）但我发现它“内联”了对象文字：输出包含

```
 var obj = {"foo":{"bar":"baz"},"quux":[{...},{...}]}; 
```

这是“难以辨认”。

有没有办法告诉编译器在不同的行上跨越对象文字（理想情况下，我想要一个类似[http://jsonlint.com](http://jsonlint.com)输出的语法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:39:42.157

好吧，由于我的评论*是*对您问题的实际答案，因此我将在此处发布：
编译`WHITESPACE_ONLY`很可能是所有*编译模式*中侵入性最小的，但正如文档明确指出的那样：

> WHITESPACE_ONLY 编译级别从代码中删除注释，还删除换行符、不必要的空格和其他空格。输出 JavaScript 在功能上与源 JavaScript 相同。

来自[文档，关于编译模式](https://developers.google.com/closure/compiler/docs/compilation_levels)。正如您在此页面上所读到的，`WHITESPACE_ONLY`编译返回所有模式中最易读的代码。所有其他模式都执行`WHITESPACE_ONLY`编译，除此之外还做其他事情。
回答您的问题：不，没有办法告诉编译器为某些代码保留过多的空白，而对代码的其他部分发疯。您唯一*能做*的就是编写一个脚本，提取您想要保留的对象文字并将它们保存到单独的文件中。编译原始版本后，您可以将这些对象文字的内联版本替换为“大量空白”的对应版本。

但是由于您非常热衷于保持代码的可读性，我强烈建议您*不要*缩小任何内容，或者使用控制台中的*漂亮打印*按钮，与控制台为您提供的其他简洁功能来检查对象。
一个更好的方法是：编写代码，并对其进行广泛测试，然后只缩小/编译*用于生产*（IE：当你完成编码/调试时）。毕竟，这就是这些工具的用途。

# php - sum 在同一页面或另一页面中提交的单选按钮值？

> ID：12246419
> 
> 赞同：0
> 
> 时间：2012-09-03T10:53:28.920
> 
> 标签：php

我是 PHP 新手，我正在研究调查和数据库。我有两张表：一张包含问题，另一张包含答案。这 2 个表具有以下属性：

```
 _________________           _________________
    | TABLE-QUESTION  |         | TABLE-ANSWER    |
    |_________________|         |_________________|
    |  id             |         |  id             |
    |  survey_name    |         |  qid            |
    |  question       |         |  answer         |
    |  status         |         |  answer_value   |
    |_________________|         |_________________| 
```

每个答案都有多个值并使用单选按钮选择

```
 <?php
      $newsurvey=$db->get_results("SELECT * FROM question where status='1' order by `id` ");
      if($newsurvey)
      {
           foreach($newsurvey as $survey1)
           {
 ?>         
                <h3><?php echo $survey1->question?></h3>

                <?php
                     $slider=$db->get_results("SELECT * FROM answer where qid='$survey1->id' ");
                     if($slider)
                     {
                          foreach($slider as $answer1)
                          {
                ?>
                               <div class="entry">
                                    <input type="radio" name='$survey1->id' value="
                                         <?php echo $answer1->answer_value?>"/>
                                    <?php echo $answer1->answer?>
                                </div>
                     <?php
                          }
                     }
                     ?>
            <?php
                 }
           }
           ?>

           <input type="Submit" value="Submit"> 
```

我想要的是将所有提交的单选按钮值汇总并存储在另一个页面中。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:15:11.510

您可以使用多个无线电均衡器

```
<input type="radio" name="survey[SURVEY_ID]"> 
```

尝试在 $_SESSION 中存储 eq

```
$_SESSION["survey"] = $_POST["survey"]; // Under key 'survey' you have array of radio buttons 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:28:45.097

试试这个`<input type="radio" name='answer_value[]' value="<?php echo $answer1->answer_value?>"/><?php echo $answer1->answer?>`。

如果您打印`$_POST['answer_value']`，您将获得数组中的所有选择值，用于`$sum = array_sum($_POST['answer_value'])`对所有选择的值求和...

# vb.net - 如何确定是否已读取文件以读取下一个文件？

> ID：12246428
> 
> 赞同：0
> 
> 时间：2012-09-03T10:54:00.717
> 
> 标签：vb.net, winforms

这是我的代码：

```
Private Sub btnDisplayOrderDetails_Click(ByVal sender As Object, _
                                         ByVal e As EventArgs) _
                                         Handles btnDisplayOrder Details.Click

  Dim myStreamReader As StreamReader
  Try
    myStreamReader = File.OpenText("Textfile1.txt")
    Me.txtOrderDetails.Text = myStreamReader.ReadToEnd()
  Catch exc As Exception
  Finally
    If Not myStreamReader Is Nothing Then
      myStreamReader.Close()
    End If
  End Try

 If txtOrderDetails.Text = "" Then
   Dim mystreamreader1 As StreamReader
   Try
     mystreamreader1 = File.OpenText("textfile2.txt")
     Me.txtOrderDetails.Text = myStreamReader.ReadToEnd()
   Catch ex As Exception
   Finally
     If Not myStreamReader Is Nothing Then
       mystreamreader1.Close()
     End If
   End Try
 End If

End Sub 
```

我希望这段代码做的是：

单击按钮时读取第一个文本文件，然后当我清除文本框（使用已编码的不同按钮）时，我想在按钮单击同一个文本框时读取第二个文本文件和以前一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:05:48.877

目前尚不清楚您要对这些文件做什么。将它们全部组合到一个文本框中，或者每个文件是否属于特定的文本框。

将所有文件放入单个文本框中的循环方法：

```
Dim filePath As String = "C:\Users\Practice\Practice\bin\Debug"
Dim sb As New StringBuilder
For Each f As String In Directory.GetFiles(filePath, "*.txt")
  sb.AppendLine(File.ReadAllText(f))
Next
txtOrderDetails.Text = sb.ToString() 
```

或者，如果它不是一个列表，那么您将一个一个地浏览您的文件：

```
Dim test1 As String = Path.Combine(filePath, "Textbox1.txt")
If File.Exists(test1) Then
  TextBox1.Text = File.ReadAllText(test1)
End If
Dim test2 As String = Path.Combine(filePath, "Textbox2.txt")
If File.Exists(test2) Then
  TextBox2.Text = File.ReadAllText(test2)
End If 
```

# objective-c - 在 UIWebView 中如何集成“添加书签”功能

> ID：12246429
> 
> 赞同：2
> 
> 时间：2012-09-03T10:54:05.833
> 
> 标签：objective-c, ios

我想在 iphone 中集成像 safari 这样的添加书签![在此处输入图像描述](../Images/d0e188b1e8dda6325127b1d58e47b4c1.png)

这里是从 iPhone 添加 safari 浏览器的书签功能的快照我想添加类似的功能我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:08:49.577

[http://xcode4all.wordpress.com/2011/05/25/web-browser-or-how-to-use-the-uiwebview-part-33/](http://xcode4all.wordpress.com/2011/05/25/web-browser-or-how-to-use-the-uiwebview-part-33/)

会有帮助的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:14:28.047

首先你需要添加一个 alertView

```
 sheet = [[UIActionSheet alloc] initWithTitle:@"Select Account to Delete"
                                      delegate:self
                             cancelButtonTitle:@"Cancel"
                        destructiveButtonTitle:@"Delete All Accounts"
                             otherButtonTitles:@"Add bookmark", @"add to reading", @"add to home screen", nil];
  // Show the sheet
  [sheet showInView:self.view];
  [sheet release]; 
```

如上图所示，这将创建一个弹出视图（AKA alertview）。

至于“添加书签”或“添加到主页”，它稍微复杂一些，因为 API 没有为您提供这样做的功能，您最好的选择是查看一个 webview 从您的应用程序中以编程方式启动 Safari 和给它网址

在这里阅读：[iPhone SDK - 在 UIWebView 中添加“添加到主屏幕”按钮](https://stackoverflow.com/questions/10836925/iphone-sdk-add-a-add-to-home-screen-button-in-a-uiwebview)

# ruby-on-rails - 将 restful 路径与控制器、动作和参数解耦

> ID：12246430
> 
> 赞同：0
> 
> 时间：2012-09-03T10:54:07.477
> 
> 标签：ruby-on-rails, routing

在控制器操作和http方法哈希方面解耦restful路径的方法是什么。

举个例子，`admin_profile_path`

```
# inside routes file
match '/admin/profile/something', :to => 'users#show', :as => :admin_profile 
```

现在，如果我知道`restful path`并想要`calculate controller & action`基于路径.. ??

我需要下面的东西-

```
`decouple(profile_path)` #=> {:controller => 'users', :action => 'show'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:58:20.757

为什么？尝试使用更简单的方法。Rails 很简单，并不难。你想让我做什么？

# c# - 构造函数注入和被注入的依赖项的初始化

> ID：12246438
> 
> 赞同：3
> 
> 时间：2012-09-03T10:54:51.690
> 
> 标签：c#, oop, dependency-injection

我正在编写一个简单的控制台应用程序，它负责连接到数据库、从中选择特定产品（基于提供的标准）并使用该产品进行一些处理。我将命令行参数存储到此类的一个实例：

```
public class Arguments
{
   public string ConnectionString { get; set; }
   public int ProductId { get; set; }
   public string ProductName { get; set; }
} 
```

在某些时候，我需要从数据库中获取产品。我为此使用以下存储库：

```
public interface IProductRepository
{
   Product GetById(int productId, string connectionString);
   Product GetByName(string productName, string connectionString);
} 
```

然后，我将存储库的实现注入到使用它的类中，例如：

```
public class ProductProcessor
{
   private readonly IProductRepository productRepository;

   public ProductProcessor(IProductRepository productRepository)
   {
      this.productRepository = productRepository;
   }

   public void Process(Arguments arguments)
   {
      Product productToProcess;

      if (!string.IsNullOrEmpty(arguments.ProductName))
      {
         productToProcess = productRepository.GetByName(arguments.ProductName, arguments.ConnectionString);
      }
      else
      {
         productToProcess = productRepository.GetById(arguments.ProductId, arguments.ConnectionString);
      }

      // ....
   }
} 
```

这是有效的，但我不喜欢这个设计的是每个方法`IProductRepository`都有一个`connectionString`参数。如果不涉及依赖注入，我可能会像下面这样重写它：

```
public void Process(Arguments arguments)
{
   Product productToProcess;

   ProductRepository productRepository = new ProductRepository(arguments.ConnectionString);

   if (!string.IsNullOrEmpty(arguments.ProductName))
   {
      productToProcess = productRepository.GetByName(arguments.ProductName);
   }
   else
   {
      productToProcess = productRepository.GetById(arguments.ProductId);
   }

   // ....
} 
```

这使我能够拥有更简单、更易于使用的界面。当然，现在`ProductRepository`没有无参数构造函数，很难与 DI 容器一起使用。理想情况下，我希望两全其美，即`ProductRepository`使用构造函数中的连接字符串进行初始化，并从其方法中删除连接字符串。**实现这一目标的最佳方法是什么？**

我已经考虑过的一些方法：

*   将一个方法添加`Initialize(string connectionString)`到`IProductRepository`基本上可以用作构造函数的方法。明显的缺点是我现在需要检查在或方法`Initialize`中做任何事情之前是否已经调用了。`GetById``GetByName`
*   不要使用构造函数注入，而是使用服务定位器模式来实例化`ProductRepository`. 我不太喜欢 Service Locator，但这可能是唯一可能的解决方案。

**有没有更好的选择？**

**编辑**：从答案中我看到我应该发布更多的上下文。我使用 Ninject 作为我的 DI 容器。在`Main`我的 Program.cs 中的方法中，我将所有依赖项注册到容器并实例化用作应用程序入口点的类：

```
public static void Main(string[] args)
{
    StandardKernel kernel = new StandardKernel();
    kernel.Bind<IArgumentsParser>().To<IArgumentsParser>();
    kernel.Bind<IProductProcessor>().To<ProductProcessor>();
    kernel.Bind<IProductRepository>().To<ProductRepository>();

    MainClass mainClass = kernel.Get<MainClass>();
    mainClass.Start(args);
} 
```

`MainClass`如下所示：

```
public class MainClass
{
    private readonly IArgumentsParser argumentsParser;
    private readonly IProductProcessor productProcessor;        

    public MainClass(IArgumentsParser parser, IProductProcessor processor)
    {
        argumentsParser = parser;
        productProcessor = processor;
    }

    public void Start(string[] args)
    {
        Arguments parsedArguments = argumentsParser.Parse(args);
        productProcessor.Process(parsedArguments );
    }
} 
```

这使我能够依赖 Ninject 并仅在一个地方（方法）创建整个图，`Main`而应用程序的其余部分对 DI 和容器一无所知。

如果可能的话，我想保持这种状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T07:26:36.550

我同意当前的界面设计是一个**泄漏的抽象**，所以让我们这样定义它：

```
public interface IProductRepository
{
    Product GetById(int productId);
    Product GetByName(string productName);
} 
```

[那么你需要的是一个可以为你创建 IProductRepository 实例的抽象工厂。](https://stackoverflow.com/a/1945023/126014)

所以 ProductProcessor 可能看起来像这样：

```
public class ProductProcessor
{
    private readonly IProductRepositoryFactory productRepositoryFactory;

    public ProductProcessor(IProductRepositoryFactory productRepositoryFactory)
    {
        this.productRepositoryFactory = productRepositoryFactory;
    }

    public void Process(Arguments arguments)
    {
        Product productToProcess;

        var productRepository =
            this.productRepositoryFactory.Create(arguments.ConnectionString);
        if (!string.IsNullOrEmpty(arguments.ProductName))
        {
            productToProcess = productRepository.GetByName(arguments.ProductName);
        }
        else
        {
            productToProcess = productRepository.GetById(arguments.ProductId);
        }

        // ....
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T11:08:35.770

我不确定你为什么需要对命令行参数进行建模？您应该尽量减少对每种类型的依赖。这意味着产品存储库应该将连接字符串作为构造函数参数（因为它是必需的依赖项），并且您的产品处理器应该采用产品 ID 和产品名称（如果这是您进行动态查询的最佳方式）。

因此，假设您的产品存储库是单例的，您将在注册时将其更新（传递连接字符串），然后在您的 IoC 容器中针对您的抽象进行注册。

然后，您可以新建一个产品处理器（传入产品 ID 和产品名称）并将其注册为针对抽象的单例。然后，您可以使用构造函数注入将产品处理器传递给任何需要它的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T11:22:28.817

> 当然，现在 ProductRepository 没有无参数构造函数，很难与 DI 容器一起使用。

相反，大多数 DI 容器允许您使用参数化构造函数。实际上，在进行依赖注入时，建议使用构造函数注入，这意味着您将拥有非默认构造函数。拥有一个接受原始类型（例如字符串依赖项）的构造函数，可能意味着某些容器将无法为您进行自动装配。自动连接意味着容器将找出注入的内容。但是，使用您的产品存储库，可以通过向容器提供初始化实例（如果您需要单个实例）或提供工厂委托（如果每次调用都需要新实例）来轻松解决此问题。这取决于您使用的框架，但它可能如下所示：

```
container.RegisterSingle(new SqlProductFactory("constring")); 
```

当您在`SqlProductFactory`的构造函数中提供连接字符串时，您不必将其传递（使用方法注入）到工厂，并且您的类中不需要此连接字符串`Arguments`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T11:26:38.153

您可以做的是将对象创建与对象查找分离。DI 容器将查找您在启动时注册的实例。此时，您可以将连接字符串作为构造函数参数传递给您的存储库。

这就是产品代码的样子；

```
public class ProductRepository : IProductRepority
{
    private readonly string connString;
    public ProductRepository(string conn)
    {
        connString = conn;
    }
} 
```

如果需要，您也可以用另一种类型包装连接字符串。重要的一点是，DI 将根据启动期间在类型图中完成的绑定注入所需的实例。根据注册，您可以简单地从 args 中提取连接字符串并将其传递给 ProductRepository 注册。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T11:08:26.127

**编辑**

有关如何解决您所说的问题，请参阅以下答案。

但是，我真的建议使用现有的 IOC 包，例如 Windsor 或 nHibernate。有关详细信息，请参阅[https://stackoverflow.com/questions/2515124/whats-the-simplest-ioc-container-for-c](https://stackoverflow.com/questions/2515124/whats-the-simplest-ioc-container-for-c)。

**结束编辑**

为什么不将 ConnectionString 作为属性添加到 IProductRepository。

所以界面是：

```
public interface IProductRepository
{
  string ConnectionString { get; set; }
  Product GetById(int productId);
  Product GetByName(string productName);
} 
```

处理器变为：

```
 public void Process(Arguments arguments)
 {
 Product productToProcess;

 var productRepository = new ProductRepository 
      { ConnectionString = arguments.ConnectionString};

 if (!string.IsNullOrEmpty(arguments.ProductName))
    productToProcess = productRepository.GetByName(arguments.ProductName);
 else
    productToProcess = productRepository.GetById(arguments.ProductId);

 // ....
} 
```

# parameters - 如何将 C# 表单文本框值传递给 Reportviewer 中的文本框

> ID：12246440
> 
> 赞同：1
> 
> 时间：2012-09-03T10:55:03.950
> 
> 标签：parameters, textbox, reportviewer

我正在使用 VS 2010。我有一个带有文本框和报表查看器的表单。

在我的表单文本框中，客户端插入一个值名称 Invoicenumber，然后当用户按下按钮时，reportviewer 必须生成，并且在 reportviewer 文本框中我希望显示发票编号。

我为 invoicenumber 创建了一个参数：Parameter!invoicenumber 并在我的 reportviewer 表达式中调用它。我错过了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T17:14:36.380

你是对的，你必须设置一个报告参数。我的理解是，在代码中，您必须在页面初始化和按钮单击事件中设置参数。在我的应用程序中，我使用 radiobuttonlist groupBy 设置为 autopostback=true 来选择报告的分组选项，但代码可以适应更新 label.text 以及按钮单击事件触发。请注意，我已将参数名称设置为“GroupBy”。参数的默认值指定为参数名称“GroupBy”。希望这可以帮助。

```
 //grouping is a radio button list of the three report grouping options
<Page Init Event>
if(!Page.IsPostBack) {
//for your application set a var to your textbox value
var groupBy = grouping.SelectedValue;
var parameters = new List<ReportParameter>
    {
        new ReportParameter("GroupBy", groupBy),
        };
ReportViewer1.LocalReport.SetParameters(parameters);
...
//for your application tie this to the button_click event
protected void grouping_CheckedChanged(Object sender, EventArgs e)
{
//for your application set a var to your textbox value
    var groupBy = grouping.SelectedValue;
    var parameters = new List<ReportParameter> { new ReportParameter("GroupBy", groupBy) };
    ReportViewer1.LocalReport.SetParameters(parameters);
    }
... 
```

# openxml - 在 word 中添加带有图像的标题会损坏文档

> ID：12246442
> 
> 赞同：1
> 
> 时间：2012-09-03T10:55:21.400
> 
> 标签：openxml

我有一个带有表格的标题（1 行，3 个单元格）。在第一个单元格中有一个图像，在第二个和第三个有一些文本段落

我像这样动态地将标题附加到文档：

```
HeaderPart headerPart = mainPart.AddNewPart<HeaderPart>();
    string rId = mainPart.GetIdOfPart(headerPart);
    HeaderReference headerRef = new HeaderReference();
    headerRef.Id = rId;
    headerRef.Type = HeaderFooterValues.Default;
    sectionProps.RemoveAllChildren<HeaderReference>();
    sectionProps.Append(headerRef);
    headerPart.Header = HeaderCreator.GenerateHeader();
    headerPart.Header.Save(); 
```

在文档中有一个带有一组形状的页面。如果我一切正常

1.  删除带有形状的页面
2.  从标题中删除徽标

有什么建议么？

# java - 无法使用运行时 exec 和 processbuilder 从部署在 Tomcat 6.0 中的 servlet 运行 psservice.exe 和 plink.exe

> ID：12246448
> 
> 赞同：2
> 
> 时间：2012-09-03T10:55:51.203
> 
> 标签：java, servlets, tomcat6, runtime.exec, plink

我正在尝试使用运行时 exec 从 servlet 运行 psservice.exe 和 plink.exe。它将用于在运行 windows 和 unix aix 的远程计算机上启动或停止服务。

我已经设置了系统变量，以便能够从命令提示符运行它们。这些命令可以从命令提示符和 java 程序完美运行

我在 Servlets 中为远程 Windows 机器使用下面的代码

```
 Runtime.getRuntime().exec(serverPropLoader.getServerProperties("psservice \\\\172.xx.xx.xx -u username -p password stop MySQL")); 
```

我在 Servlets 中为远程 unix aix 5.3 机器使用以下代码

```
 Runtime.getRuntime().exec(serverPropLoader.getServerProperties("PLINK.exe -ssh -pw "password" username@172.xx.xx.xx /home/mysql/stopservice.sh")); 
```

以下是我的观察：

如果我使用 Tomcat6 从 Eclipse（版本 3.4.2）运行上述语句，它运行得非常好，但是如果将我的 Web 应用程序导出为 WAR 并手动将其部署到 Tomcat6 中，它不会运行。（我已经尝试在我的和其他系统中部署它）

我尝试将这些命令放在批处理文件中并从 servlet 调用它，但没有成功。从批处理文件“net”和“sc”命令正在运行，但我无法运行 pservice 和 plink 命令。“sc”命令也仅适用于本地进程。

执行 servlet 后，我​​可以在 Windows 任务管理器中看到 psservice.exe 和 plink.exe，但本地和远程系统上所需的服务没有启动/停止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T02:26:21.073

这里的问题是，您需要为 tomcat 用户添加管理员权限。因为这个 Apache Tomcat Monitor 程序需要与系统服务交互的权限，所以它不能作为标准用户执行。

做以下任务，你会没事的

在 Windows 资源管理器中找到 tomcat7w.exe 程序（默认目录为 C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin）。

右键单击此文件的名称并选择属性上下文菜单项。

将显示 tomcat7w 属性对话框。选择兼容性选项卡，然后单击对话框底部的“显示所有用户的设置”按钮或“更改所有用户的设置”按钮。

将显示一个新的 tomcat7w.exe 属性对话框，其中包含一个名为 Compatibility for all users 的选项卡。在此对话框底部的权限级别组框中，选择以管理员身份运行此程序。

当从标准用户帐户运行时，Apache Tomcat Monitor 可执行文件现在将以所需的权限执行。

有关更多信息，请参阅 [https://supportcontent.ca.com/cadocs/0/CA%20Automation%20Point%20Base%2011%204-ENU/Bookshelf_Files/HTML/AP--RelNotes/index.htm?toc.htm? 2009998.html](https://supportcontent.ca.com/cadocs/0/CA%20Automation%20Point%20Base%2011%204-ENU/Bookshelf_Files/HTML/AP--RelNotes/index.htm?toc.htm?2009998.html)

# c# - 如何使用 C# 从 URL 读取 XML 节点？

> ID：12246449
> 
> 赞同：0
> 
> 时间：2012-09-03T10:55:51.657
> 
> 标签：c#, xml, url

我有像下面这样的程序。这个概念是从 URL 读取 XML 值，但我的程序只读取 xml 结构，而不是代码数据。仅喜欢`<Billing Address></Billing Address>...`等。但原始 XML 值为`<Billing Address>Strre1</Billing Address>`. 程序不读取内部值。

```
public static void zohoCRMReadAccounts()
{

    var val = auth();
    var val1= val[0];
    var val2= val[1];

    String xmlURL = "URL";
    XmlTextReader xmlReader = new XmlTextReader(xmlURL);
    while (xmlReader.Read())
    {
        switch (xmlReader.NodeType)
        {
            case XmlNodeType.Element: // The node is an element.
                Console.Write("<" + xmlReader.Name);
                // Read the attributes:
                while (xmlReader.MoveToNextAttribute()) 
                    Console.Write(" " + xmlReader.Name + "=’" 
                                   + xmlReader.Value + "’");
                Console.WriteLine(">");
                break;
            case XmlNodeType.Text: //Display the text in each element.
                Console.WriteLine(xmlReader.Value);
                break;
            case XmlNodeType.EndElement: //Display the end of the element.
                Console.Write("</" + xmlReader.Name);
                Console.WriteLine(">");
                break;
        }
    }
    Console.WriteLine("Press any key to continue…");
    Console.ReadLine(); //Pause
} 
```

请帮我修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:22:40.383

XML 元素的名称中不能有空格。尝试先删除它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:13:05.890

首先下载 XML。然后像这样使用，

```
 try { 
    //read xml
    XmlDocument xdoc = new XmlDocument();
    xdoc.Load("XMLFilePath");
    XmlNodeList nodes = xdoc.SelectNodes(@"rss/channel/item");
    foreach (XmlNode node in nodes)
    {
      XmlNode titleNode = node.SelectSingleNode("title");
      string title = titleNode == null ? string.Empty : titleNode.InnerText;

      }; 
```

}

# android - 如何在 cygwin 中为 windows 使用 ndk-build 构建 libav？

> ID：12246452
> 
> 赞同：1
> 
> 时间：2012-09-03T10:55:54.840
> 
> 标签：android, android-ndk

我想知道如何使用**cygwin**在 windows7上构建**libav**。我尝试了以下步骤：

 **1-使用 cd 命令将目录更改为 libav_file_directory/android（android 文件夹为空，据我所知，.so 文件将保存在该文件夹中）。

2-执行 ./ndk-buil 命令。

我得到以下结果：

*Android NDK：找不到应用程序项目目录！Android NDK：请定义 NDK_PROJECT_PATH 变量以指向它。/cygdrive/c/Users/balwant.singh.TA/Desktop/Android/android-ndk-r8/build/core/build-local.mk:130：* Android NDK：中止*。*停止。*

请回复解决方案，**我还想知道哪些所有 android 媒体播放器都使用 libav 作为其本机代码。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:04:49.450

1.）设置所有路径（Java_Home

2.) 将 NDK_HOME 设置为 Ndk-Build Path

3.) 运行 Cygwin

4.）转到项目库路径

5.)运行**make**命令

6.) 然后运行**​​ndk-build****

# iphone - iOS 5.0 检测应用程序何时从 Safari.app 中的 URL 重新激活

> ID：12246454
> 
> 赞同：1
> 
> 时间：2012-09-03T10:56:03.467
> 
> 标签：iphone, objective-c, ios, cocoa-touch

在我们的工作流程中，用户：

1.  在应用程序中开始交易
2.  被重定向到 Safari.app 以确认交易
3.  通过链接重定向回应用程序：`myapp://finish-transaction`再次检查交易
4.  UI 根据结果更新

当我在 Safari 中单击链接时，我的应用程序会重新激活，但我发现在重新激活时这些方法都没有被调用，这很奇怪。

*   `application:openURL:sourceApplication:annotation`
*   `application:didFinishLaunchingWithOptions:`
*   `applicationDidBecomeActive:`
*   `applicationWillEnterForeground:`
*   `viewDidAppear:`或`viewWillAppear:`在当前`UIViewController`
*   `application:handleOpenURL:`

我已将 urlscheme注册`myapp`为`com.mycompany.myapp`.`Info.plist`

那么在iOS 5.0下如何判断App是否被重新激活呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:03:48.707

试试下面的？

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
     // Handle open here   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:57:55.047

所以现在这很尴尬。我在模拟器中安装了多个版本的应用程序。因此，当从网页返回时，会启动错误的应用程序......我会徒劳地等待应用程序的一些爱仍然不活跃......

# php - php json_encode 返回无效的 json

> ID：12246455
> 
> 赞同：-2
> 
> 时间：2012-09-03T10:56:04.273
> 
> 标签：php, json

以下 PHP 返回一个无效的 json：

```
$sql = 'select * from website where websiteID = "'. $websiteID .'"';
$q = mysql_query( $sql ) or die(mysql_error());
$res = json_encode( mysql_fetch_assoc($q) );
echo $res; 
```

这是从浏览器复制的json：

> {"websiteID":"162","userID":"235","URL":"coucou","themeID":"1","telephone":"","websiteTitle":"","description" :"","keywords":"","nomEntreprise":"","adresse":"","email":"","Page1Title1":"parameter1","Page1Title2":"parameter2","Page1Title3 ":"parameter3","Page1Title4":"parameter4","Page1Title5":"parameter5","page1Title6":"parameter6","page1Title7":"parameter7","page1Title8":"parameter8","page1Title9": "参数9","page1Title10":"parameter10","Page1Text1":"parameter11","Page1Text2":"parameter12","Page1Text3":"parameter13","Page1Text4":"parameter14","Page1Text5":"parameter15","Page1Text6":"parameter16" ,"Page1Text7":"parameter17","Page1Text8":"parameter18","Page1Text9":"parameter19","Page1Text10":"parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20 parameter20参数20 参数20 参数20 参数20 参数20 参数20 参数20 ","Page1Text11":"parameter21","Page1Text12":"parameter22","Page1Text13":"parameter23","Page1Text14":"parameter24","Page1Text15":"parameter25","Page1Text16":"parameter26","Page1Text17":"", "Page1Text18":"","Page1Text19":"","Page2Title1":""}

如何解决此问题并传递有效的 json 输出？

* * *

显然json是有效的。[出于某种原因，从浏览器复制到http://jsonlint.com/](http://jsonlint.com/)时出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:07:06.317

它是有效的 JSON。我在[http://jsonlint.com/](http://jsonlint.com/)上尝试过，它解析得很好。

也被完美地解析为 JavaScript 变量：http: [//jsfiddle.net/FdYE6/](http://jsfiddle.net/FdYE6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:18:45.090

Three (possible) issues, only one directly related to your question:

*   json_encode expects utf-8 encoded data. The dataset you've posted in your question doesn't seem to contain "problematic" characters (it all seems to be within the ascii7 range and the utf-8/ascii7 have the same representation of characters). Still this could be an issue. You have to set the mysql connection charset to get utf-8 encoded data from the mysql server.
*   you put the parameter as a string literal into the sql statement. Then you have to take care of sql injections, i.e. you have to encode/escape the actual parameter value properly. Even if you are (at the moment) sure that $website cannot contain characters that may break the query.
*   the mysql exteion is marked as deprecated, better use another api/modlue to communicate with the mysql server, e.g. mysqli or [pdo](http://docs.php.net/pdo)

Still, if your php-mysql module supports the function [mysql_set_charset()](http://docs.php.net/mysql_set_charset) it's possible to get it to work with the old mysql extension. But you hae to do this on both ends: when you insert/update data and when you retrieve data. see [https://dev.mysql.com/doc/refman/5.1/en/charset.html](https://dev.mysql.com/doc/refman/5.1/en/charset.html)

```
<?php
$mysql = mysql_connect('localhost', 'localonly', 'localonly')
if ( !$mysql ) {
    youErrorHandler($mysql);
}
$rc = mysql_set_charset('utf8', $mysql);
if ( !$rc ) {
    youErrorHandler($mysql);
}

$sql = sprintf(
    "
        SELECT 
            *
        FROM
         website
        WHERE
            websiteID = '%s'
        LIMIT
            1
    ",
    mysql_real_escape_string($websiteID, $mysql)
);
$q = mysql_query( $sql, $mysql ) or die(mysql_error($mysql));
$row = mysql_fetch_assoc($q);
if ( !$row ) {
    $row = array('error'=>'no result');
}
$res = json_encode($row); 
```

# ios - 调整自定义 UINavigationController 的 titleView

> ID：12246461
> 
> 赞同：0
> 
> 时间：2012-09-03T10:56:30.020
> 
> 标签：ios, uiview, uinavigationcontroller

自定义 UINavigationController 遇到一些问题。

我正在尝试为我的应用程序使用新字体，我发现字体略微超出了我的一些 UIViews 的范围，最值得注意的是我的 UINavigationController 的标题（注意标题末尾的“C”，它被剪裁在右上角）。

![标题末尾的“C”被略微剪掉](../Images/f8ba0c5cc4ee11576993722667a0be2e.png)

在我当前的实现中，我有一个自定义 UINavigationController 子类，它在 awakeFromNib 方法中设置 NavigationBar 的色调和字体。我对解决方案的两次尝试包括：设置 self.navigationBar.clipsToBounds = NO; 并尝试调整栏的 titleView 的大小，尽管此视图似乎无法从自定义 UINavigationController 中访问。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:57:29.133

UILabel 的斜体文本有问题。将该 UILabel 的框架设置为 sizeToFit 中的 CGRect 但稍微宽一点。

# entity-framework - 加载在另一个 DbContext 中所做的更改

> ID：12246462
> 
> 赞同：9
> 
> 时间：2012-09-03T10:56:32.407
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我有一个 WPF 应用程序，它有一个网格，其中包含我用 EF 加载的数据列表。其他一些窗口可以对加载到网格上的相同数据进行更改，但使用不同的 dbcontext 实例。如何在网格上查看更改的数据？我知道我可以刷新单个实体`ctx.Entry<MyEntity>(instance).Reload();`- 但我想查看所有更改，无论我做什么，我只看到旧值。在这种情况下，我既不能使用`AsNoTracking`也不能创建新`DbContext`实例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T13:02:46.007

> 对我来说，这看起来像是一个非常简单的案例，我不明白为什么 EF 不只是更新实体的值。

EF 也有这种机制，但它没有在 DbContext API 上公开。您需要返回到 ObjectContext。如果您只想重新加载一组实体，您将调用：

```
var objectContext = ((IObjectContextAdapter)dbContext).ObjectContext;
objectContext.Refresh(RefreshMode.StoreWins, listOfEntitiesToReload); 
```

`RefreshMode.StoreWins`导致所有挂起的更改被重新加载的值覆盖。您还可以使用`RefreshMode.ClientWins`which 将保留您的更改并将它们与重新加载的数据合并。这种方法的问题在于它只会重新加载您已经拥有的实体。你不会得到新的实体。

如果您还想获取新实体，则必须执行查询，并且必须告诉 EF 您要重新加载值：

```
var objectContext = ((IObjectContextAdapter)dbContext).ObjectContext;
var objectSet = objectContext.CreateObjectSet<MyEntity>();
objectSet.MergeOption = MergeOption.OverwriteChanges;
var result = objectSet.Where(...).ToList(); 
```

再次`MergeOption.OverwriteChanges`覆盖所有挂起的更改，但您可以使用`MergeOption.PreserveChanges`将重新加载的值合并到您编辑的值。

我认为刷新某些关系的值可能仍然存在一些问题，也许还有在数据库中删除的实体。

# node.js - 使用 node.js 和 mongodb 进行身份验证

> ID：12246463
> 
> 赞同：0
> 
> 时间：2012-09-03T10:56:34.253
> 
> 标签：node.js, mongodb, authentication

伙计们，我正在尝试对自己进行身份验证，为此我正在使用 node.js 和 mongo DB。但问题是，在注册后，用户无法对自己进行身份验证。这是我的片段

```
app.post('/login',function(req,res){
    ContactProvider.findAll(function(error, posts) {
        var aut = req.body;
        if (aut.user == posts.user && aut.pass == posts.pass) {
            req.session.name = {name:aut.user};
            res.redirect('/home');
        } else {
            res.send('Bad user/pass');
        }
    });
}); 
```

下面是我注册用户的片段

```
app.post('/register',function(req, res) {
    var post=req.body;
    if(post.pass!=post.cpass) {
        res.send("Error:Password doesnt match");
    } else {
        ContactProvider.save({
            user: req.param('user'),
            pass: req.param('pass'),
            cpass: req.param('cpass'),
            email: req.param('email')
        }, function(error, docs) {
            res.redirect('/');
        });
    }
}); 
```

ContactProvider 是下面的一个，其中 post provider 是一个不同的文件，所有的猫鼬事情都发生在这里

```
var ContactProvider = require('./PostProvider').ContactProvider;
var ContactProvider= new ContactProvider(); 
```

这是 postprovider 文件中的 finone 查询

```
ContactProvider.prototype.findone = function(name,pass, callback) {
  Post.findOne({name:name},{pass:pass}, function (err, post) {
                  callback(null, post);

          });
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:49:13.037

您的代码有严重问题（为什么您将 name`posts`用于数组`ContactProvider`？）。`ContactProvider`您必须根据用户名和密码进行搜索。像这样的东西：

```
app.post('/login',function(req,res){
    var aut = req.body;
    ContactProvider.findOne(
        {
            user: aut.user,
            pass: aut.pass
        },
        function(err, usr) {
            if (error || !usr) {
                res.send('Bad user/pass');
            } else {
                // we have a user, authenticate!
                req.session.name = {name:aut.user};
                res.redirect('/home');
            }
        }
    );
}); 
```

**旁注：**这是一种非常简单的用户身份验证方式，但它根本不安全。您应该阅读有关 Internet 中的身份验证和安全性的更多信息。确实很有用的知识。

**编辑：**您的注册也有问题。您的数据存储在`post`变量中，因此也可以使用它`ContactProvider`：

```
// some other code
ContactProvider.save({
    user: post.user,
    pass: post.pass,
    cpass: post.cpass, // no need to store the same thing twice
    email: post.email 
```

# java - 从系统读取文本文件到 Hbase MapReduce

> ID：12246464
> 
> 赞同：4
> 
> 时间：2012-09-03T10:56:37.007
> 
> 标签：java, hadoop, mapreduce, hbase

我需要将数据从文本文件加载到 Map Reduce，我已经在网上搜索过，但我没有找到适合我工作的任何解决方案。

是否有任何方法或类可以从系统读取文本 /csv 文件并将数据存储到 HBASE 表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:59:19.167

要从文本文件中读取，首先文本文件应该在 hdfs 中。您需要为作业指定输入格式和输出格式

```
Job job = new Job(conf, "example");
FileInputFormat.addInputPath(job, new Path("PATH to text file"));
job.setInputFormatClass(TextInputFormat.class);
job.setMapperClass(YourMapper.class);
job.setMapOutputKeyClass(Text.class);
job.setMapOutputValueClass(Text.class);
TableMapReduceUtil.initTableReducerJob("hbase_table_name", YourReducer.class, job);
job.waitForCompletion(true); 
```

`YourReducer`应该扩展`org.apache.hadoop.hbase.mapreduce.TableReducer<Text, Text, Text>`

示例减速器代码

```
public class YourReducer extends TableReducer<Text, Text, Text> {    
private byte[] rawUpdateColumnFamily = Bytes.toBytes("colName");
/**
* Called once at the beginning of the task.
*/
@Override
protected void setup(Context context) throws IOException, InterruptedException {
// something that need to be done at start of reducer
}

@Override
public void reduce(Text keyin, Iterable<Text> values, Context context) throws IOException, InterruptedException {
// aggregate counts
int valuesCount = 0;
for (Text val : values) {
   valuesCount += 1;
   // put date in table
   Put put = new Put(keyin.toString().getBytes());
   long explicitTimeInMs = new Date().getTime();
   put.add(rawUpdateColumnFamily, Bytes.toBytes("colName"), explicitTimeInMs,val.toString().getBytes());
   context.write(keyin, put);

      }
    }
} 
```

示例映射器类

```
public static class YourMapper extends Mapper<LongWritable, Text, Text, IntWritable> {
private final static IntWritable one = new IntWritable(1);
private Text word = new Text();
public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
    String line = value.toString();
    StringTokenizer tokenizer = new StringTokenizer(line);
    while (tokenizer.hasMoreTokens()) {
        word.set(tokenizer.nextToken());
        context.write(word, one);
        }
    }
} 
```

# iphone - 更改 UIPageViewController 过渡

> ID：12246471
> 
> 赞同：5
> 
> 时间：2012-09-03T10:56:52.370
> 
> 标签：iphone, ios, animation, uipageviewcontroller

我想`UIPageViewController`为我的 iOS 5.0 应用程序使用水平。

我唯一的问题是我不想要`UIPageViewControllerTransitionStylePageCurl`过渡。有没有办法获得像翻译这样的经典过渡？

注意：即使是丑陋的黑客也被接受，因为它会删除我以前的很多代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:39:50.270

更新告诉你现在 iOS 6 有了新的过渡风格，这就是你想要的过渡

UIPageViewControllerTransitionStyleScroll

[http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:34:25.360

但是 UIPageViewController 只有一种过渡风格：

```
 enum {
  UIPageViewControllerTransitionStylePageCurl = 0
 };
 typedef NSInteger UIPageViewControllerTransitionStyle; 
```

解决方案是你必须创建 UIPageViewController 像 viewController 自定义转换

参考[MPFoldTransition](https://github.com/mpospese/MPFoldTransition)示例代码

# magento - Magento如何在根目录下显示产品？

> ID：12246477
> 
> 赞同：2
> 
> 时间：2012-09-03T10:57:27.477
> 
> 标签：magento, magento-1.7

我想在 Magento“默认类别”下显示产品？是否有某种 URL 可以做到这一点。

我尝试了 URL 重写并得到了一个类似“default-category.html”的 url，但它显示了一个 404 错误页面。我也做了“索引管理”。但是，这也无济于事。

任何帮助深表感谢。

谢谢和问候， Rupak Banerjee。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T13:46:13.450

**更新**

看网址

[Magento 产品不会显示在类别中](https://stackoverflow.com/questions/2493141/magento-products-will-not-show-in-category)

物品是否有库存的清单如下。有些人看起来很愚蠢，直到你第一次花一个小时试图解决这个问题：

*   产品必须在目录中可见。
*   产品必须启用。
*   产品必须有库存数量。
*   产品必须设置为有货。
*   如果产品设置为不跟踪库存，它仍然必须有库存数量并设置为有库存。
*   产品必须分配到目标类别。
*   如果使用多网站模式（或者如果您通过数据流导入产品），则必须将产品分配到目标网站。
*   您必须刷新您的缓存/索引，以确保。

欢迎来到 Magento。希望有帮助！

**如果不工作，请告诉我。**

# qt - 尝试编译 Qt 应用程序时获取未解析的外部符号

> ID：12246491
> 
> 赞同：2
> 
> 时间：2012-09-03T10:58:01.503
> 
> 标签：qt, qt-creator, unresolved-external

我在 QtCreator (QT 4.8.2) 中创建了一个简单的 GUI 应用程序，并添加了一个检查网络连接的功能：

```
bool MainWindow::CheckNetworkConnectivity()
{
    QList<QNetworkInterface> interface = QNetworkInterface::allInterfaces();
    for(int i = 0; i < interface.count();i++)
    {
        QNetworkInterface inface = interface.at(i);
        if(inface.IsUp && !inface.IsLoopBack)
        {
            ui->lstLog->addItem(inface.name()+QDateTime::currentDateTime().toString("h:m:s ap"));
            ui->chkConStatus->setChecked(true);
        }
        else{
            ui->chkConStatus->setChecked(false);
        }
    }
    return  ui->chkConStatus->checkState();
} 
```

之后，任何编译代码的尝试都会产生以下错误：

```
 15:21:11: Running steps for project MasterVPN...
15:21:11: Configuration unchanged, skipping qmake step.
15:21:11: Starting: "C:\Qt\Designer\bin\jom.exe" 
    C:\Qt\Designer\bin\jom.exe -f Makefile.Debug
    cl -c -nologo -Zm200 -Zc:wchar_t- -Zi -MDd -GR -EHsc -W3 -w34100 -w34189 -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_GUI_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -I"c:\Qt\4.8.2\include\QtCore" -I"c:\Qt\4.8.2\include\QtGui" -I"c:\Qt\4.8.2\include" -I"c:\Qt\4.8.2\include\ActiveQt" -I"debug" -I"." -I"..\MasterVPN" -I"." -I"c:\Qt\4.8.2\mkspecs\win32-msvc2010" -Fodebug\ @C:\Users\Master\AppData\Local\Temp\mainwindow.obj.4156.31.jom
mainwindow.cpp
    link /LIBPATH:"c:\Qt\4.8.2\lib" /NOLOGO /DYNAMICBASE /NXCOMPAT /DEBUG /MANIFEST /MANIFESTFILE:"debug\MasterVPN.intermediate.manifest" /SUBSYSTEM:WINDOWS "/MANIFESTDEPENDENCY:type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' publicKeyToken='6595b64144ccf1df' language='*' processorArchitecture='*'" /OUT:debug\MasterVPN.exe @C:\Users\Master\AppData\Local\Temp\MasterVPN.exe.4156.5422.jom
mainwindow.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall QNetworkInterface::~QNetworkInterface(void)" (__imp_??1QNetworkInterface@@QAE@XZ) referenced in function "public: bool __thiscall MainWindow::CheckNetworkConnectivity(void)" (?CheckNetworkConnectivity@MainWindow@@QAE_NXZ)
mainwindow.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class QString __thiscall QNetworkInterface::name(void)const " (__imp_?name@QNetworkInterface@@QBE?AVQString@@XZ) referenced in function "public: bool __thiscall MainWindow::CheckNetworkConnectivity(void)" (?CheckNetworkConnectivity@MainWindow@@QAE_NXZ)
mainwindow.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall QNetworkInterface::QNetworkInterface(class QNetworkInterface const &)" (__imp_??0QNetworkInterface@@QAE@ABV0@@Z) referenced in function "public: bool __thiscall MainWindow::CheckNetworkConnectivity(void)" (?CheckNetworkConnectivity@MainWindow@@QAE_NXZ)
mainwindow.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static class QList<class QNetworkInterface> __cdecl QNetworkInterface::allInterfaces(void)" (__imp_?allInterfaces@QNetworkInterface@@SA?AV?$QList@VQNetworkInterface@@@@XZ) referenced in function "public: bool __thiscall MainWindow::CheckNetworkConnectivity(void)" (?CheckNetworkConnectivity@MainWindow@@QAE_NXZ)
debug\MasterVPN.exe : fatal error LNK1120: 4 unresolved externals
jom: C:\Users\Master\Documents\Qt\MasterVPN-build-desktop-Qt_4_8_2__4_8_2__Debug\Makefile.Debug [debug\MasterVPN.exe] Error 1120
jom: C:\Users\Master\Documents\Qt\MasterVPN-build-desktop-Qt_4_8_2__4_8_2__Debug\Makefile [debug] Error 2
15:21:17: The process "C:\Qt\Designer\bin\jom.exe" exited with code 2.
Error while building/deploying project MasterVPN (target: Desktop)
When executing step 'Make' 
```

有人可以指出可能是什么原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:04:30.090

链接器指示找不到所需的功能。这包含在 QtNetwork4.lib（如果您在 Windows 平台上）或您平台的等效库中。所以你必须告诉链接器它需要链接到这个库。网络模块是必需的，所以不仅仅是

```
QT += core gui 
```

至少做到这一点

```
QT += core gui network 
```

这应该可以解决您看到的链接器错误。

# actionscript-3 - AS3 FLEX SOAP WSLD 参数错误

> ID：12246493
> 
> 赞同：0
> 
> 时间：2012-09-03T10:58:13.200
> 
> 标签：actionscript-3, apache-flex, soap, wsdl, rpc

我在使用 Flex RPC Soap 库向 Web 服务发送多个参数时遇到问题。

代码：

```
var assetOperation:AbstractOperation = new AbstractOperation();
assetOperation = fws.getOperation("registerBarcodeByString");
assetOperation.arguments = [AppID, BarCode];
var assetToken:AsyncToken = new AsyncToken();
assetToken = assetOperation.send();

trace(assetToken.message);

assetToken.addResponder(new Responder(getBarcodeResult, getBarcodeError)); 
```

查看 Web 服务上的日志，AppID 和 BarCode 都作为放置在数组中的第一个参数被接收。无论先发生什么，该项目都将作为每个参数传递。

想象一下，我正在发送 [1234, 6789]，Web 服务正在接收 [1234, 1234]。

我试过将参数放在 send() 方法中，同样的事情发生了。我已经尝试创建一个临时对象来存储这些参数并发送它，同样的事情。

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:03:26.833

传递参数时，我必须传递更多信息，在这种情况下，是 Web 服务所期望的每个参数的确切名称。

所以：

```
assetOperation.arguments = [{applicationLabel:AppID, barcodeString:BarCode}]; 
```

# java - 需要帮助在 java 中对 DB 中的记录进行分组

> ID：12246494
> 
> 赞同：0
> 
> 时间：2012-09-03T10:58:16.177
> 
> 标签：java, collections

我的结果如下：

```
tablename   columnname     size    order
employee    name            25      1
employee    sex             25      2
employee    contactNumber   50      3
address     name            25      4
address     street          25      5
address     country         25      6 
```

这是我的 java 代码，用于根据`table name`

```
public void getReportQuery() {
    String tablename="",columnname="";
    int size=0,order=0;
    boolean isCustomised=true;
    StringBuffer sb = new StringBuffer();
    Map<String, Map<String, String>> reportQueryMap = new HashMap<String, Map<String, String>>();
    List<String> reportQueryTableNameList = new ArrayList<String>();
    Connection connection = getConnection();
    if (connection != null) {
       try {
         sb.append("SELECT rmaster.tablename,rmaster.columnname,r.size,r.order FROM report_customise_child r,report_customise_master rmaster where r.isactive='y' and rmaster.id=r.masterid; ");
         PreparedStatement reportQueryPS = connection.prepareStatement(sb.toString());
                ResultSet reportQuery_rst= reportQueryPS.executeQuery();
    if(reportQuery_rst!=null){
     while (reportQuery_rst.next()) {
       tablename = reportQuery_rst.getString("tablename");
        if (!reportQueryTableNameList.contains(tablename)) {
            reportQueryTableNameList.add(tablename);
        System.out.println("tablename : "+tablename);
                        }
                            columnname = reportQuery_rst.getString("columnname");
                            System.out.println(" columnname : "+columnname);

                            //size = reportQuery_rst.getInt("size");
                            //order = reportQuery_rst.getInt("order");
                  }
                }else{
                    isCustomised=false;
                }
            } catch (Exception ex) {
                ex.printStackTrace();
            } finally {
                try {
                    closeConnection(connection, null, null);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        } else {
            System.out.println("Connection not Established. Please Contact Vendor");
        }
    } 
```

我真的不知道如何对值进行分组，我想从上面的结果中构造查询。

请帮助我对值进行分组，我将从分组值中构造查询。

我需要像下面这样分组

```
tablename1
columnmaes

tablename2
columnnames

tablenameN
columnnames 
```

请帮助我实现这一目标，

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:10:07.057

您可以让`Map<String, List<String>>`where key 是表名， value 是列名列表。

```
Map<String, List<String>> resultsMap = new HashMap<String, List<String>>();
ResultSet reportQuery_rst= reportQueryPS.executeQuery();
if(reportQuery_rst!=null){
   while (reportQuery_rst.next()) {
      String tableName = reportQuery_rst.getString("tablename");
      List<String> columns = resultsMap.get(tableName); 
      if(columns == null ) { 
          columns = new ArrayList<String>();
          resultMap.put(tableName, columns);
      }
      columns = resultsMap.get(tableName);
      String columnName = reportQuery_rst.getString("columnname");
      columns.add(columnName);
   }
} 
```

现在`resultsMap`将有tableNames vs ColumnNames。如果要存储订单和大小等其他信息，则需要创建一个 bean 并将它们存储在表名中，例如`Map<String, List<YourBean>>`.

**更新**

现在，您想准备不同的查询，其中包含不同的表名`resultMap`，

```
List<String> queries = new ArrayList<String>();
for(Entry<String, List<String>> resultEntry : resultMap.entrySet()) {
   String tableName = resultEntry.getKey();
   List<String> columns = resultEntry.getValue();
   StringBuilder query = new StringBuilder(" select ");
   int i = 0;
   for(String column : columns) {
       query.append(column);
       if(i != columns.size()) {
          query.append(", ");
       } 
       i++;
   }
   query.append(" from ").append(tableName);
   queries.add(query.toString());
} 
```

Now `queries` will have all the require queries, As you have several queries, You need to take care of `Connection pooling` and all, Try to use something like `JDBC Templates` which will provide most of the common required operations like `DataSource, Connection pool, Automatic Bean Mapping` etc. Hope this helps your.

# jquery - jQuery 表单提交 - 从提交调用中捕获结果

> ID：12246497
> 
> 赞同：1
> 
> 时间：2012-09-03T10:58:21.790
> 
> 标签：jquery

在单击按钮时，我通过以下方式提交 jQuery 表单：

```
jQuery('#form').submit(); 
```

我可以在网络中看到发送呼叫并接收结果。问题是我想得到结果，我该怎么做？我试过这样做：

```
jQuery('#form').submit(function(){ alert('test');}); 
```

但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:02:15.097

你想知道结果吗？意味着您不想将其发送到服务器？

尝试

```
jQuery('#form').submit(function(e){ 
        e.preventDefault();
        alert('test');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:08:47.683

您应该将 AJAX 与 Post 一起使用。

序列化表单数据并提交并等待响应，如

```
$.post("action.php", $("#form").serialize(),function(data) {
   alert("Response data: " + data);
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:02:53.973

您是什么意思提交的“捕获结果”？提交的结果通常是新页面，它不能被 javascript 捕获。如果您需要对结果页面进行一些处理，您应该在结果页面中编写该 javascript。

# pkcs#11 - PKCS 11 中的 CKA_SENSITIVE 属性是什么意思？

> ID：12246498
> 
> 赞同：5
> 
> 时间：2012-09-03T10:58:37.317
> 
> 标签：pkcs#11

我正在阅读 PKCS 11 文档，但我无法清楚地理解密钥的 CKA_SENSITIVE 属性是什么意思。

更常见的是：我在哪里可以阅读属性描述？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T09:43:43.500

引用[PKCS#11 规范 v2.20](ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-11/v2-20/pkcs-11v2-20.pdf)：

> 如果 CKA_SENSITIVE 属性是 CK_TRUE，或者如果 CKA_EXTRACTABLE 属性是 CK_FALSE，则密钥的某些属性不能在令牌之外以明文形式显示。在描述该类型密钥的部分中的属性表中为每种类型的密钥指定了这些属性

一般来说，这意味着密钥的实际值不会暴露。这取决于构成值的属性的键。对于秘密密钥，它通常是`CKA_VALUE`，对于私人 RSA 密钥，这将是`CKA_PRIVATE_EXPONENT`和中国剩余定理参数 - 如果它们是密钥的一部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T08:53:13.427

我发现 if `CKA_SENSITIVE = FALSE`，那么函数可以检索密钥的明确值（对于秘密密钥）`C_GetAttributeValue`，而您无法检索值本身 if `CKA_SENSITIVE = TRUE`。

# android - 将通知推送到 Android 中的特定设备

> ID：12246502
> 
> 赞同：3
> 
> 时间：2012-09-03T10:58:55.927
> 
> 标签：android, push-notification, google-cloud-messaging

我正在创建一个需要推送通知的 Android 应用程序。

我可以非常完美地向多个设备发送通知..根本没有问题..

这里的查询是如何向特定设备（或用户）发送通知。

例如，如果任何 1 个用户的余额较低，那么我想为特定用户生成通知。

应该怎么做才能将推送通知发送给 Android 中的特定个人用户？

请帮助和建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:09:13.250

这篇[博文](http://android-developers.blogspot.co.uk/2010/05/android-cloud-to-device-messaging.html)建议，当您的应用注册云到设备消息时，它将收到一个注册 ID。您应该让应用程序将此注册 ID 报告给您的服务器，然后您可以根据需要将其提供给 C2DM 服务器。

# haskell - 使用 GHC API 时查找 cabal 包

> ID：12246504
> 
> 赞同：7
> 
> 时间：2012-09-03T10:59:03.367
> 
> 标签：haskell, ghc, ghc-api

我正在尝试制作一个使用 GHC API 为我检查 haskell 文件的程序。我已经获得了适用于本地文件的类型检查，但我有一个特定的 cabal 包，我也需要它可用（这个可执行文件将属于同一个包）。如何添加此导入依赖项？

我还尝试使用 ghc 命令行编译来解决这个问题，`ghc -package PKG-VER --make Test.hs -v`但它似乎只在本地目录中查找导入。

我当前的代码如下所示：

```
import           Control.Exception
import           Control.Monad
import           Control.Monad.State
import           DynFlags
import           Exception
import           GHC
import           GHC.Paths           (libdir)
typecheck :: MonadIO m => [FilePath] -> FilePath -> m ()
typecheck otherincludes fp =
  liftIO . defaultErrorHandler defaultLogAction . runGhc (Just libdir) $ do
    dynflags <- getSessionDynFlags
    void $ setSessionDynFlags dynflags { includePaths = otherIncludes ++ includePaths dynflags }
    target <- guessTarget fp Nothing
    setTargets [target]
    void $ load LoadAllTargets
    deps <- depanal [] False
    forM_ deps $ \ms -> parseModule ms >>= typecheckModule 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T21:31:36.597

我设法使您的代码读取并自行检查如下：

```
package Test where
import           Control.Exception
import           Control.Monad
import           Control.Monad.State
import           DynFlags
import           Exception
import           GHC
import           GHC.Paths           (libdir)
typecheck :: MonadIO m => [FilePath] -> FilePath -> m ()
typecheck otherincludes fp =
  liftIO . defaultErrorHandler defaultLogAction . runGhc (Just libdir) $ do
    dynflags <- getSessionDynFlags
    void $ setSessionDynFlags dynflags {
        includePaths = otherincludes ++ includePaths dynflags,
        packageFlags = [ExposePackage "ghc"]} }
    target <- guessTarget fp Nothing
    setTargets [target]
    void $ load LoadAllTargets
    deps <- depanal [] False
    forM_ deps $ \ms -> parseModule ms >>= typecheckModule 
```

这是它在 ghci 中的运行方式：

```
$ ghci Test.hs -package ghc
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package array-0.4.0.0 ... linking ... done.
Loading package deepseq-1.3.0.0 ... linking ... done.
Loading package containers-0.4.2.1 ... linking ... done.
Loading package filepath-1.3.0.0 ... linking ... done.
Loading package old-locale-1.0.0.4 ... linking ... done.
Loading package old-time-1.1.0.0 ... linking ... done.
Loading package bytestring-0.9.2.1 ... linking ... done.
Loading package unix-2.5.1.0 ... linking ... done.
Loading package directory-1.1.0.2 ... linking ... done.
Loading package pretty-1.1.1.0 ... linking ... done.
Loading package process-1.1.0.1 ... linking ... done.
Loading package Cabal-1.14.0 ... linking ... done.
Loading package binary-0.5.1.0 ... linking ... done.
Loading package bin-package-db-0.0.0.0 ... linking ... done.
Loading package hoopl-3.8.7.3 ... linking ... done.
Loading package hpc-0.5.1.1 ... linking ... done.
Loading package template-haskell ... linking ... done.
Loading package ghc-7.4.1 ... linking ... done.
Ok, modules loaded: Test.
Prelude Test> typecheck [] "Test.hs"
Loading package transformers-0.3.0.0 ... linking ... done.
Loading package mtl-2.1.1 ... linking ... done.
Prelude Test> 
```

所以诀窍似乎是将`dynflags`参数中暴露的包传递给`setSessionDynFlags`. 有关一些文档，请参阅[DynFlags](http://www.haskell.org/ghc/docs/latest/html/libraries/ghc/DynFlags.html#t%3aPackageFlag)模块。

# c# - 用于表示 wcf 服务中的 html 控件的类示例

> ID：12246507
> 
> 赞同：0
> 
> 时间：2012-09-03T10:59:04.153
> 
> 标签：c#, asp.net, html, wcf, webforms

我正在编写一个 wcf 服务，它将生成 html 控件，客户端应用程序将使用这些控件来呈现网页的一部分 - 例如，填充了选项列表的 html 选择。该服务将用 C# (.net framework v4) 编写，在我的实现中，客户端应用程序将是一个 C# asp.net Web 表单应用程序。

我希望该服务以结构化格式提供 html 控件，而不仅仅是一个 html 字符串，以便客户端应用程序能够更灵活地使用它们（例如，客户端应用程序可能希望向 html 选择添加另一个选项控制）

过去，我为此目的在 asp.net 应用程序中使用了 System.Web.UI.HtmlControls 命名空间类，但这些类无法序列化，因此我无法将它们与 wcf 一起使用。目前我只需要发送选择和文本输入控件，而不是重新发明轮子，我希望有人会有一个已经以结构化格式提供 html 控件的服务示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:09:01.187

[我将使用ASP.NET Web API](http://www.asp.net/web-api)和 Razor 视图引擎来生成 HTML，而不是使用 WCF 。

# android - Android Gcm 不适用于 ROR

> ID：12246514
> 
> 赞同：2
> 
> 时间：2012-09-03T10:59:20.133
> 
> 标签：android, ruby-on-rails, push-notification, google-cloud-messaging

我阅读了实现 google gcm 的基本示例。我开发了小型客户端 android 应用程序，它成功地从 gcm 服务器为我提供了注册 ID。现在在服务器端我使用 Ruby on rails 因此我们使用这个 gem 来实现 gcm 的服务器端[https://github.com/dondeng/gcm_on_rails](https://github.com/dondeng/gcm_on_rails) . 我将我的注册 ID 传递给我的服务器。我成功运行了这些命令

> > device = Gcm::Device.create(:registration_id => "XXXXXXXXXXXXXXXXXXXXXX")
> > 
> > 通知 = Gcm::Notification.new
> > 
> > notification.device = 设备
> > 
> > notification.collapse_key = "updates_available"
> > 
> > notification.delay_while_idle = true
> > 
> > notification.data = {:registration_ids => ["RegistrationID"], :data => {:message_text => "上云九"}}
> > 
> > 通知.保存

用于传递通知：

```
$ rake gcm:notifications:deliver 
```

我的 rake 命令运行没有任何错误。但是在完成所有这些任务后，我的设备没有收到任何消息。我不知道后台发生了什么。如何确认设备正确接收发送的消息..需要帮助...谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T12:20:53.437

调试[GCM](http://developer.android.com/google/gcm/gs.html)消息可能既麻烦又困难。

一个可能的原因是[GCM 的 API 密钥](http://developer.android.com/google/gcm/gs.html#access-key)错误，必须在配置文件中定义。如果您使用了错误的 API 密钥，那么您可能会从服务器获得成功响应`{:code=>200, :message=>nil}`，尽管尚未发送任何消息。在这种情况下，请转到[Google API 控制台](https://code.google.com/apis/console/)并查找正确的密钥。

另一个可能的原因是`REGISTRATION_ID`设备错误。如果 REGISTRATION_ID 不正确，您可能会收到**NotRegistered**或**InvalidRegistration**错误，gcm_on_rails 插件（目前）并不总是能够识别。使用以下 curl 命令通过控制台调试 API（插入您的 API_KEY 和`REGISTRATION_ID`设备的 ）。

```
curl --header "Authorization: key=API_KEY" \
     --header Content-Type:"application/json" \ 
     https://android.googleapis.com/gcm/send  \
     -d "{\"registration_ids\":[\"REGISTRATION_ID\"],
          \"data\":{\"message_text\":\"Test, Test\"}}" 
```

调用 Gcm API 的成功/不成功尝试应如下所示：

```
{"multicast_id":7961..,"success":1,"failure":0,"canonical_ids":1,
 "results":[{"registration_id":"..","message_id":"0:.."}]}

{"multicast_id":7961..,"success":0,"failure":1,"canonical_ids":0,
 "results":[{"error":"NotRegistered"}]} 
```

最后另一个原因是当天的密钥无效：不要使用保留字`message_type`作为数据哈希中的密钥。它将返回状态码 200，但不会发送任何通知。`message_type`是[高级选项](http://developer.android.com/google/gcm/adv.html)之一（我花了一个多小时才找到它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:02:45.583

如果您在服务器端没有错误，则可能是您没有正确处理 Android 应用程序中的事件。

请遵循以下准则： http: [//developer.android.com/guide/google/gcm/gs.html#android-app](http://developer.android.com/guide/google/gcm/gs.html#android-app)，并编写调试日志。

# android - Android：如何更新自定义列表视图项中视图的可见性

> ID：12246515
> 
> 赞同：0
> 
> 时间：2012-09-03T10:59:20.030
> 
> 标签：android, listview, checkbox

我在每个项目中有一个带有复选框和 TextView 的自定义列表视图。最初我将复选框的可见性设置为 GONE。

在我点击按钮的活动中，所有项目中的复选框都会出现，然后再次点击所有复选框就会消失（就像一个切换按钮）。

我已经成功实现了一个小问题：

![在此处输入图像描述](../Images/10d337c56bf4570e52423357ca08e93b.png)

在这里，在第一张图片中，当我单击切换按钮时，复选框没有出现。它们仅在我滚动时出现（第二张图片）。单击按钮后，当前视图中的项目不会更新其可见性，因为只有在我们滚动时才会调用 getView。

我只想在单击按钮时删除当前视图中的复选框。

这是我的代码：

```
public View getView(final int index, View convertView, ViewGroup parent) {
   final ViewHolder holder;
   ...
   ...
   if(myActivity.buttonFlag)
      holder.myCheckBox.setVisibility(View.VISIBLE);
   else
      holder.myCheckBox.setVisibility(View.GONE);
   return convertView;
   }
static class ViewHolder
{
    CheckBox myCheckBox;
} 
```

`buttonFlag`是一个布尔值，在单击按钮时将其值设置为 true/false。按钮单击和`buttonFlag`值在 Activity 中设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:59:38.277

似乎`notifyDataSetChanged()`应该从切换按钮处理程序调用 to 以使列表刷新其内容。

# sql-server-2008 - 如果日期相关字段在表中不可用，如何找到在 sql 中为特定日期插入/更新的记录？

> ID：12246516
> 
> 赞同：0
> 
> 时间：2012-09-03T10:59:21.233
> 
> 标签：sql-server-2008

我使用 sql server 2008 作为我项目的后端。

我的数据库表不包含任何与日期相关的字段，那么我如何找到针对特定日期插入/更新的记录？

**我想对表中的现有数据执行上述操作**

可能吗？如果是，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:10:44.427

您可以将 INSERT 和 UDPATE 触发器添加到您的表中，将正在更新的记录的 ID 和当前日期/时间写入附加审计表。然后就可以查询审计表了

```
CREATE    TRIGGER RecordInsertTrigger ON MyTable FOR INSERT
AS
INSERT INTO 
AuditTrail 
(
RecordID,
ActionDate
)
SELECT
RecordID,
getdate()
FROM 
inserted 
```

然后为 UPDATE 创建一个类似的触发器。

您可以扩展 AuditTrail 表以包含其他相关信息实时用户 ID 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:03:21.593

对于表中的现有记录，我认为您找不到它。但是对于新记录，您可以创建一个[触发器](http://msdn.microsoft.com/en-us/library/aa258254%28v=sql.80%29.aspx)，它将使用主键和日期字段更新另一个表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:05:08.533

您可以在此表上启用更改跟踪选项。 [在这里检查](http://msdn.microsoft.com/en-us/library/cc305322.aspx)

# jquery - 意外的开放花括号？

> ID：12246517
> 
> 赞同：-1
> 
> 时间：2012-09-03T10:59:23.227
> 
> 标签：jquery

我对此感到非常困惑，我已经阅读了很多次代码，但我无法弄清楚为什么这是错误的。我已将其简化为最简单的形式（`...`将 s 替换为`alert();`s），但仍然出现此错误：

```
$(document).ready(function() {

$(".foo").hover(function() {
   ...
 },function() {
   ...
});

${"#bar"}.click(function() {    <---- Uncaught SyntaxError: Unexpected token {
  ...
});

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:01:05.510

尝试更换：

```
${"#bar"} 
```

和

```
$("#bar") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:01:23.680

那不应该是：

```
$("#bar").click(function() { 
```

#bar 周围有大括号而不是括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:07:18.080

```
Try this:

$(document).ready(function() {

$(".foo").hover(function() {
   ...
 },function() {
   ...

});

$("#bar").click(function() {    <---- Uncaught SyntaxError: Unexpected token {
  ...
});

}); 
```

# android - gps活动的多个实例同时运行

> ID：12246518
> 
> 赞同：2
> 
> 时间：2012-09-03T10:59:32.620
> 
> 标签：android, android-intent, gps, android-pendingintent

我有一个应用程序跟踪 GPS。

我`myLocationOverlay`用来获取位置，我有一种导航。关闭应用程序时有两个选项。

1.  gps 一直在跟踪（不打电话`myLocationOverlay.disableMyLocation;`）
2.  全球定位系统已禁用。

当 GPS 继续跟踪它`Notifications`时，当我点击 时`Notification`，没有问题，它会打开当前正在运行的活动，并带有 pending `Intent`。

但是当我再次从应用程序打开相同的活动时，会出现相同活动的新实例，它开始使用`GPS`并更新通知。

因此，同一活动的两个实例同时工作。
我试图在打开第二个实例时关闭上一个活动，但我做不到。

我`intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`在打开新意图时也使用过，也把这个`android:launchMode="singleInstance"`

在`AndroidManifest.xml` 但第一个创建的仍然有效。

我希望有人有一个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:16:46.690

尝试将**FLAG_ACTIVITY_CLEAR_TOP**与**FLAG_ACTIVITY_NEW_TASK**结合使用。当一起使用时，这些标志是一种在另一个任务中定位现有活动并将其放置在可以响应意图的位置的方法。

# c# - 从列表中获取一个值并将其转换为枚举

> ID：12246524
> 
> 赞同：1
> 
> 时间：2012-09-03T11:00:06.680
> 
> 标签：c#, list

我有一个包含以下项目的列表。
错误、角色和名称。在数据库中，角色是 Integer 。也就是说，角色可以是 1、2、3、4、5、6 等。角色 1= Reviewer1 2=Reviewer2 ..6-Quality Reviewer 有一个枚举类。我将 List 值分配给对象。如何从列表中获取角色并转换为枚举并再次分配给对象。这是代码示例

```
var result = new ChecklistLiability();
 result.CheckpointInstanceInfo = liabilityMapper.GetCheckInstanceInformationByIxLiability(result.IxLiability); 
```

结果就是对象。
责任映射器.GetCheckInstanceInformationByIxLiability(result.IxLiability); 函数将返回一个 Role 为 Integer 的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:01:53.773

只需投射它，如本例所示：

```
int roleAsInt = 1;
Role role = (Role) roleAsInt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:10:19.197

您也可以尝试 Enum.Parse 和 Enum.TryParse。

Casting 可以满足您的需求，但 .Parse 方法在我看来更简洁一些。

# jquery - jquery 选择器字符串中是否存在“OR”条件？

> ID：12246531
> 
> 赞同：7
> 
> 时间：2012-09-03T11:00:46.433
> 
> 标签：jquery

我想测试一个元素对象以查看它是否具有“classA”*或*“classB”。例如，click() 事件返回了事件`target`属性中的一个元素。我想测试这个元素，看看是否有这两个类中的任何一个。

```
$("#mybutton").click(function($event) {
  var $el = $($event.target);
  if($el.is(".classA") || $el.is(".classB")) {
    // Can I do the above with 1 selector instead of two separate ones?
  }
}); 
```

如上所述，使用该`is()`函数，我可以单独检查每个类，但我很好奇是否可以使用一个函数调用而不是两个函数调用来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T11:03:05.407

是的，您可以用逗号分隔选择器：

```
if($el.is(".classA, .classB")) 
```

**[看到它在行动](http://jsfiddle.net/7W9Xx/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:06:17.473

你可以测试一下

```
if($el.is('.classA, .classB')) { ... } 
```

这是一个小测试用例：http: [//jsfiddle.net/ydtv2/](http://jsfiddle.net/ydtv2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:10:47.937

不，jquery 中没有任何或条件。您必须在同一语句中使用选择器，`$el.is(".classA, .classB")`它可以将其视为或条件

# java - 在哪里可以找到如何计算 java 对象大小的证据

> ID：12246533
> 
> 赞同：2
> 
> 时间：2012-09-03T11:00:50.810
> 
> 标签：java, memory, object, jvm, size

找了很久关于java对象的大小，有很多这样的答案[，](https://stackoverflow.com/questions/10549381/what-is-the-size-of-the-object-in-java?answertab=active#tab-top)大家都在告诉我java对象的开销大小，以及如何计算出实际大小。但是他们怎么知道呢？我没有从官方的甲骨文文件中找到任何证据。这个结论的证据是什么？或者数据只是来自一些基于一些实验的猜测？

另一件事。官方文件中提到有一种“近似”的方法来测量物体 - [Instrumentation](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html)方法，有人可以向我解释一下“近似”是什么意思吗？什么时候准确，什么时候不准确。最好有证据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:33:09.737

> 如何计算出实际大小。但是他们怎么知道呢？

从经验。

> 我没有从官方的甲骨文文件中找到任何证据。

它取决于JVM。对于基于 OpenJDK 的 JVM，32 位 JVM 的标头大小与 64 位 JVM 不同，因为标头包含一个引用。其他 JVM 可能再次不同。

> 或者数据只是来自一些基于一些实验的猜测？

本质上，是的。

> 有人可以向我解释“大约”是什么意思吗？

当你测量一个物体的大小时，它可能意味着很多不同的东西

*   物体有多大？（浅深度）
*   它使用多少内存？（对象分配是 8 字节对齐的，即总是 8 的倍数）
*   对象和所有引用的对象使用了多少空间？（深度）
*   如果丢弃它，可以释放多少空间？（有多少对象被共享，它是否出现在两个已释放内存片段的中间）
*   您计算堆栈上使用的空间还是堆外内存中使用的空间？

鉴于根据您需要知道的内容，您可以有许多不同的答案，因此有一个数字与您用于计算的所有这些数字大致接近是很有用的。

* * *

使用运行时遇到的问题是 TLAB 以大块的形式分配数据。这些大块可以进一步以多线程​​方式分配。缺点是您无法获得准确的内存使用信息。

```
static long memTaken() {
    final Runtime rt = Runtime.getRuntime();
    return rt.totalMemory() - rt.freeMemory();
}

public static void main(String... args) {
    long used1 = memTaken();
    Float i = new Float(0);
    long used2 = memTaken();
    System.out.println("new Float(0) used "+(used2 - used1)+" bytes.");
} 
```

不带选项运行

```
new Float(0) used 0 bytes. 
```

关闭 TLAB，你会看到`-XX:-UseTLAB`

```
new Float(0) used 336 bytes. 
```

这比您预期的要高得多，因为必须加载类本身。如果您首先通过添加到开始创建 Float 的一个实例

```
Float j = new Float(1); 
```

你得到

```
new Float(0) used 16 bytes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:16:03.413

我认为答案只能是经验性的，因为它[取决于实现](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.7)：

> Java 虚拟机不要求对象有任何特定的内部结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:32:44.127

对我来说，最好的方法是最实际的方法，使用

```
long memTaken() {
  final Runtime rt = Runtime.getRuntime();
  return rt.totalMemory() - rt.freeMemory();
} 
```

1.  记住首字母`memTaken()`；
2.  制作一百万个对象的数组（调整此数字以适合您的堆）；
3.  `memTaken()`从记忆中减去。

过程中可能会有一些暂时的分配，所以还需要运行GC。不提供任何保证`System.gc()`，但这种方法一直对我有用：

```
for (int i = 0; i < 3; i++) { System.gc(); Thread.sleep(50); } 
```

您必须小心确保这会产生稳定的结果。例如，一种方法是计算几个不同对象计数的内存负载并比较结果。他们应该都匹配他们给出的内存/实例答案。

我以前曾建议过这个，因为蹩脚的解决方案而被拒绝，被建议使用适当的工具等等。所以我使用了工具，例如`jvisualvm`——它给出了**错误**的结果。这种方法**从来没有给我错误的结果**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:52:31.870

java 对象有两种不同的大小：浅大小和保留大小。对象的**浅大小**是其所有字段大小的总和：原始成员的直接大小，以及每个非原始成员的指针大小（这在 32 位和 64 位体系结构之间变化）。您可以使用仪器在运行时找到对象的浅尺寸。[这是一个很好的教程](http://www.javamex.com/tutorials/memory/instrumentation.shtml)

**保留大小**由对象被垃圾时将释放的堆空间定义。找到对象的保留大小并非易事，主要是因为对象通常由其他对象组成。例如：

```
public class Clazz {

    public byte[] member;

    public static void main(String[] args) {
        byte[] bytes = new byte[128];
        Clazz a = new Clazz();
        Clazz b = new Clazz();
        a.member = bytes;
        b.member = bytes;
    }
} 
```

a的保留大小是多少？和乙？使用探查器计算保留大小（大多数探查器为此使用静态堆分析）。

# android - 创建一个应显示在我的 Android 应用程序的每个屏幕中的警报对话框

> ID：12246535
> 
> 赞同：0
> 
> 时间：2012-09-03T11:01:02.680
> 
> 标签：android, dialog, broadcastreceiver

是否可以创建一个自定义警报对话框，当广播接收器在任何屏幕（如主屏幕、启动器屏幕等）接收时显示该对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:14:42.197

创建名为 BaseActivity 的活动

```
public BaseActivity extends Activity
{
    onCreate()
    {}//...

   // Create One Function with title and message arguments 
   public showmessage(String title,String message)
   {
    // Alert Dialog code
   }

} 
```

然后在你的多项活动中

```
public Activity1 extends BaseActivity
{
    onCreate()
    {

     // You can call directly 
      showmessage("Title","messsage");

    }

}

public Activity2 extends BaseActivity
{
    onCreate()
    {

      // You can call directly 
      showmessage("Title","messsage");

    }

} 
```

# ruby-on-rails - Rails 将 form_for 对象传递给部分

> ID：12246540
> 
> 赞同：38
> 
> 时间：2012-09-03T11:01:16.127
> 
> 标签：ruby-on-rails, object, partials, actionview

我想将`form_for`对象传递给部分：

```
<%= form_for @price do |f| %>
   ...
   <%= render :partial => "price_page", :object => @price, :as => :f %>
   ...
<% end %> 
```

当我打电话时：

```
f.radio_button 
```

带来错误：

```
undefined method `radio_button' for #<Price:0x3cb1ed0> 
```

我怎样才能`f`像往常一样使用这个部分？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-03T11:27:31.223

尝试将表单对象作为本地传递 `<%= render :partial => "price_page", :locals=>{:f=>f} %>`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-03T11:31:46.250

您可以将表单构建器对象作为局部变量传递，如下所示，

```
<%= form_for @price do |f| %>
     <%= render :partial => "price_page", :locals => { :f => f } %>
<% end %> 
```

在您的部分文件中，您将收到表单生成器作为局部变量“f”，您可以使用如下所示，

```
 <% f.radio_button, {} %> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-01T21:01:53.907

我遇到了这个问题，试图弄清楚如何在没有额外表单标签的情况下将表单构建器变成部分。这是我能想到的这个问题的主要用例，所以我为未来的访问者添加了这个答案。

为了解决我的问题，我在我的布局中有我的 form_for 并且我渲染了我的部分传递只模型。在我的部分中，我使用[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for%20fields_for)。

看起来（东西）像这样：

```
= form_for @price do |f|
   ...
   = render partial: "price_page", object: @price, as: 'price %>
   ... 
```

然后，我的部分有这个：

```
= fields_for price do |f|
   ... 
```

# web-services - 从 play 2 调用多个 web 服务

> ID：12246541
> 
> 赞同：2
> 
> 时间：2012-09-03T11:01:17.537
> 
> 标签：web-services, scala, playframework-2.0

我是 play2.0-Scala 初学者，必须调用多个 Web 服务来生成 HTML 页面。

在阅读了[The Play WS API](http://www.playframework.org/documentation/2.0.3/ScalaWS)页面和[来自 Sadek Drobi的一篇](http://steve.vinoski.net/pdf/IC-Play2.pdf)*非常*有趣的文章之后，我仍然不确定实现此目的的最佳方法是什么。

这篇文章展示了一些我作为 Play 初学者并不完全理解的代码片段。

第 4 页的图 2：

```
val response: Either[Response,Response] =
  WS.url("http://someservice.com/post/123/comments").focusOnOk

val responseOrUndesired: Either[Result,Response] = response.left.map {
  case Status(4,0,4) => NotFound
  case Status(4,0,3) => NotAuthorized
  case _ => InternalServerError
}

val comments: Either[Result,List[Comment]] = 
responseOrUndesired.right.map(r => r.json.as[List[Comment]])

// in the controller
comment.fold(identity, cs => Ok(html.showComments(cs))) 
```

最后一行是`fold`做什么的？应该`comment`是`comments`？我不是将最后一条语句分组在一个`Async`块中吗？

图 4 显示了如何将多个 IO 调用与单个`for`- 表达式组合：

```
for {
  profile <- profilePromise
  events <- attachedEventsPromise
  articles <- topArticlesPromise
} yield Json.obj(
  "profile" -> profile,
  "events" -> events,
  "articles" -> articles )

}

// in the controller
def showInfo(...) = Action { rq =>
  Async {
    actorInfo(...).map(info => Ok(info))
  }
} 
```

我怎样才能使用这个片段？（我`}`对 for 表达式之后的额外 - 有点困惑。）我应该写这样的东西吗？

```
var actorInfo = for {                // Model
  profile <- profilePromise
  events <- attachedEventsPromise
  articles <- topArticlesPromise
} yield Json.obj(
  "profile" -> profile,
  "events" -> events,
  "articles" -> articles )

def showInfo = Action { rq =>         // Controller
  Async {
    actorInfo.map(info => Ok(info))
  }
} 
```

结合图 2 和 4 中的片段（错误处理 + IO 非阻塞调用的组合）的最佳方式是什么？（例如，如果任何被调用的 Web 服务产生错误 404，我想产生错误 404 状态代码）。

也许有人知道在 play framework 中调用 webservices 的完整示例（在 play Sample applications 或其他任何地方都找不到示例）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:00:13.023

不得不说，您在图2中展示的示例中的文章是错误的。该方法`focusOnOk`在Play 2.0中不存在。我假设文章的作者当时使用的是 Play 2 的预发布版本。

关于`comment`，是的，应该是`comments`。`fold`语句中的`Either`. 它需要2个函数作为参数。第一个是如果它是左值则应用的函数。第二个是一个函数，如果它是一个正确的值。更详细的解释可以在这里找到：http: [//daily-scala.blogspot.com/2009/11/either.html](http://daily-scala.blogspot.com/2009/11/either.html)

所以这条线的作用是。如果我有一个左值（这意味着我得到了一个不想要的响应），应用内置`identity`函数，它只会给你返回值。如果它具有正确的值（这意味着我得到了 OK 响应），请创建一个以某种方式显示评论的新结果。

关于`Async`，它实际上并不是异步的。`focusOnOk`是一个阻塞函数（Play 1.x 的旧 Java 时代的遗留物）。但请记住，这不是有效的 Play 2 代码。

至于图 4，尾随`}`实际上是因为它是图 3 中的部分替代品。而不是众多的 promise `flatMap`。你可以做一个[for 理解](http://java.dzone.com/articles/scala-comprehensions-options)。另外，我认为它应该`userInfo(...).map`代替`actorInfo(...).map`.

您链接到的[Play 文档](http://www.playframework.org/documentation/2.0.3/ScalaWS "播放 WS 文档")实际上已经向您展示了一个完整的示例。

```
def feedTitle(feedUrl: String) = Action {
  Async {
    WS.url(feedUrl).get().map { response =>
      Ok("Feed title: " + (response.json \ "title").as[String])
    }
  }  
} 
```

将获得 feedUrl 中的任何内容，然后您可以使用该字段`map`执行某些操作，您可以检查它是否为 404 或其他内容。`response``status`

为此，链接文章的图 3 和图 4 应该为您提供一个起点。所以你会有类似的东西，

```
def getInfo(...) : Promise[String] = {
  val profilePromise = WS.url(...).get()
  val attachedEventsPromise = WS.url(...).get()
  val topArticlesPromise = WS.url(...).get()

  for {
    profile <- profilePromise
    events <- attachedEventsPromise
    articles <- topArticlesPromise
  } yield {
    // or return whatever you want
    // remember to change String to something else in the return type
    profile.name 
  }
}

def showInfo(...) = Action { rq =>
  Async { 
    getInfo(...).map { info =>
      // convert your info to a Result
      Ok(info)
    }
  }
} 
```

# extjs - extjs 更改事件的面板标题

> ID：12246542
> 
> 赞同：5
> 
> 时间：2012-09-03T11:01:20.687
> 
> 标签：extjs, grid, panel, title, extjs4.1

我有一个像这样的网格面板

```
Ext.define('sCon.view.SalesGrid',{
        extend: 'Ext.grid.GridPanel',
        title: 'Sales Data',

        //other params   

        initComponent: function(){
            this.callParent(arguments);
        }
    }); 
```

在单击事件中，我想更改此面板的标题。我在控制器中的代码如下所示。

```
Ext.define('sCon.controller.SalesGridController', {
        extend: 'Ext.app.Controller',
        views: ['SalesGrid'],

        // other handlers

        changeTitle: function(newTitle){
            this.getView('SalesGrid').setTitle('title_changed');
        } 
```

目前它说它没有 setTitle() 的功能。但是文档说网格面板具有 setTitle() 功能。我还尝试使用“标题”变量更改标题，例如

```
 changeTitle: function(newTitle){
            this.getView('SalesGrid').title = 'title_changed'; 
```

两者都不起作用..请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T11:54:02.363

**UPD：** [这里](http://docs.sencha.com/ext-js/4-1/#!/guide/mvc_pt3)有一些`refs`来自 Sencha 的 ExtJS 4.1 文档。

使用`refs`控制器的属性来获取对任何组件的引用。

在您的示例中：

```
Ext.define('sCon.view.SalesGrid',{
  extend: 'Ext.grid.GridPanel',
  title: 'Sales Data',

  alias: 'widget.salesgrid',

  //other params   

  initComponent: function(){
    this.callParent(arguments);
  }
}); 
```

在控制器中添加：

```
refs: [
  { ref: 'salesGrid', selector: 'salesgrid', },
] 
```

然后，您可以从控制器中的任何位置访问您的 SalesGrid 视图，例如`this.getSalesGrid();`方法。

在你的情况下：

```
changeTitle: function(newTitle){
  this.getSalesGrid().setTitle('title_changed');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:05:13.367

> **笔记**
> 
> 在所描述的情况下，webbandit 答案是访问视图实例的最佳选择，这个答案留待澄清使用自动生成的 getter。

您使用的选择器方法只是为您提供类而不是它的实例！

你应该这样做

```
this.getView('SalesGrid').create().setTitle('title_changed'); 
```

见[API](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-getView)

# java - Java Web 服务的持久单例对象

> ID：12246545
> 
> 赞同：0
> 
> 时间：2012-09-03T11:01:34.697
> 
> 标签：java, singleton, java-ws

早上好。

我目前正在开发一个 Java Web 服务项目，该项目部署在 Apache Tomcat 7 服务器上。为了项目的需要，我需要在内存中维护一个全局（在 WS 线程中，由每个请求创建）对象。因此，我尝试按如下方式实现单例设计模式：

```
public class SingletonDesign {
    private static boolean _instanceFlag = false;
    private static final SingletonDesign _instance = new SingletonDesign();
    private static GlobalObject _myGlobalObject;

    private SingletonDesign() {
        if(_instanceFlag == false) {
            _myGlobalObject = new GlobalObject();
            _instanceFlag = true;
        }
    }

    public static GlobalObject getModel() {
        if(_instanceFlag == false) {
            _myGlobalObject = new GlobalObject();
            _instanceFlag = true;
        }
        return _myGlobalObject;
    }

    public static int parseModel() {
        if(_instanceFlag == false) {
            _myGlobalObject = new ItemSimilarityModel();
            _instanceFlag = true;
        }
        int val = _myGlobalObject.parseFromFile();
        return val;
    }
} 
```

我知道每次完成请求时，都会在我的 Web 上创建一个新线程——服务类（对象）。我的目标是在所有线程中拥有一个全局 SingletonDesign 对象，该对象在内存中保持活动状态，并且只创建一次。尽管上述设计似乎符合我的预期，但我不确定它是否正确。所以这些是我的问题：

1）为什么SingletonDesign对象的方法需要是静态的？（我试图将它们定义为非静态的，但我的 Singleton 对象未正确初始化）。

2）以上设计见于单例设计模式的维基百科页面。让我困惑的部分是 _instance 字段的初始化，我在其他 Singleton 实现中也看到过。为什么我们需要那个对象？

3）我的对象在服务器停止之前是否保持活动状态？我做了一些测试，似乎它还活着，但我必须 100% 确定。

感谢您的时间与兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:15:48.170

该`_instance`字段包含您的单身人士。您需要一个静态`getInstance()`方法，而您的其他方法将是实例方法。我认为你根本不需要这个`_instanceFlag`领域。

然后你会这样称呼它：

SingletonDesign.getInstance().getGlobalObject();

不过，请记住，很多人（包括我自己）认为 Singleton 是一种代码气味。此外，这种设计不被认为是在 Java 中实现单例的最佳方式，cfr：在 Java[中实现单例模式的有效方法是什么？](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)

只要它的类加载器还活着，这个对象就会一直活着。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:13:09.233

1) 你在单例中真正需要的唯一静态方法是返回单例实例的方法。该方法必须是静态的，因为您不能实例化单例，因此该方法必须属于类而不是对象。

2）一个可能更容易开始的简化版本：

```
public class MySingleton {

    private static MySingleton instance = null;
    private static String aString = null;

    private MySingleton( {
        aString = new String("Hello, world");
    }

    public static MySingleton getInstance() {
        if (instance == null) {
            instance = new MySingleton();
        }

        return instance;
    }

    public string getMyString() {
        return aString;
    }
} 
```

3) 据我所知，只要 JVM 运行，它就会一直存在。

作为提示，如果您在返回实例的方法中执行某种初始化代码，我建议您也将该方法声明为同步。

# regex - 如何创建仅在主题行开头搜索文本的 Gmail 过滤器？

> ID：12246547
> 
> 赞同：120
> 
> 时间：2012-09-03T11:01:47.470
> 
> 标签：regex, filter, gmail, subject

我们在工作中从 Jenkins 构建服务器定期收到自动构建消息。

最好将这些内容收集到标签中，跳过收件箱。

使用过滤器当然是正确的选择。

所需的标识符是`[RELEASE]`主题行开头的字符串。

尝试指定以下任何正则表达式都会导致带有字符串的电子邮件`release`在任何情况下都匹配主题行中的任何位置：

```
\[RELEASE\]*
^\[RELEASE\]
^\[RELEASE\]*
^\[RELEASE\].* 
```

从我随后读到的内容来看，Gmail 没有标准的正则表达式支持，并且从实验看来，就像谷歌搜索一样，特殊字符被简单地忽略了。

因此，我正在寻找可以使用的搜索参数，可能类似于与他们的,符号`atstart:mystring`保持一致。`has:``in:`

有没有办法强制匹配仅在它发生在行首时，并且仅在包含方括号的情况下？

真诚的感谢。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-02-04T13:23:23.860

Regex is not on the [list of search features](http://support.google.com/mail/bin/answer.py?hl=en&answer=7190), and it *was* on (more or less, as *Better message search functionality (i.e. Wildcard and partial word search)*) the list of pre-canned [feature requests](https://web.archive.org/web/20121109021501/http://support.google.com/mail/bin/static.py?hl=en&page=suggestions.cs), so the answer is "you cannot do this via the Gmail web UI" :-(

There are no current *Labs* features which offer this. SIEVE filters would be another way to do this, that too [was not supported](https://web.archive.org/web/20140924000319/https://support.google.com/mail/answer/78761?hl=en), there seems to no longer be any definitive statement on SIEVE support in the Gmail help.

> **Updated for link rot** The pre-canned list of feature requests was, er canned, the original is on archive.org dated 2012, now you just get [redirected](http://support.google.com/mail/bin/static.py?hl=en&page=suggestions.cs) to a dumbed down page telling you how to give feedback. Lack of SIEVE support *was* covered in answer 78761 *Does Gmail support all IMAP features?*, since some time in 2015 [that answer](http://support.google.com/mail/bin/answer.py?hl=en&answer=78761) silently redirects to the answer about IMAP client configuration, archive.org has a copy dated 2014.

With the current search facility brackets of any form `() {} []` are used for grouping, they have no observable effect if there's just one term within. Using `(aaa|bbb)` and `[aaa|bbb]` are equivalent and will both find words `aaa` or `bbb`. Most other punctuation characters, including `\`, are treated as a space or a word-separator, `+` `-` `:` and `"` do have special meaning though, see the [help](https://support.google.com/mail/answer/7190?hl=en).

As of 2016, only the form "`{term1 term2}`" is documented for this, and is equivalent to the search "`term1 OR term2`".

You *can* do regex searches on your mailbox (within limits) programmatically via Google docs: [http://www.labnol.org/internet/advanced-gmail-search/21623/](http://www.labnol.org/internet/advanced-gmail-search/21623/) has source showing how it can be done (copy the document, then `Tools > Script Editor` to get the complete source).

You could also do this via IMAP as described here: [Python IMAP search for partial subject](https://stackoverflow.com/questions/13403790/python-imap-search-for-partial-subject) and script something to move messages to different folder. The IMAP SEARCH verb only supports substrings, not regex (Gmail search is further limited to complete words, not substrings), further processing of the matches to apply a regex would be needed.

For completeness, one last workaround is: Gmail supports *plus addressing*, if you can change the destination address to `youraddress+jenkinsrelease@gmail.com` it will still be sent to your mailbox where you can filter by recipient address. Make sure to filter using the full email address `to:youraddress+jenkinsrelease@gmail.com`. This is of course more or less the same thing as setting up a dedicated Gmail address for this purpose :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-12T15:21:09.653

我发现这样做的唯一选择是找到一些确切的措辞并将其放在“有的话”选项下。它不是最好的选择，但它确实有效。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2014-01-24T04:54:15.420

我想知道自己如何做到这一点；似乎 Gmail 已经默默地实现了这个功能。我创建了以下过滤器：

```
Matches: subject:([test])
Do this: Skip Inbox 
```

然后我发了一条带有主题的消息

```
[test] foo 
```

消息已存档！因此，似乎只需为您希望处理的主题前缀创建一个过滤器。

# java - 在带有spring applicationContext的接口实现之间进行选择？

> ID：12246550
> 
> 赞同：0
> 
> 时间：2012-09-03T11:01:56.277
> 
> 标签：java, spring, jpa, jdbc, phpmyadmin

我正在使用 Eclipse Juno IDE 和 phpMyAdmin。

我有 java 应用程序，对于这个应用程序，我在 phpMyAdmin 中创建了一个数据库。现在，我有一个 DB 方法的接口。可以说接口是这样的：

```
public interface DBInterface{
  public Vector<Employees> getAllEmplyess();
  public void addNewEmployee(int ID, String name,String department);
} 
```

现在我需要通过两种方式实现这个接口：

1) JPA

2) JDBC

假设我以上述两种方式实现了接口。

如何在 applicationContext.xml 文件中使用 spring 机制进行选择？它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:14:51.167

为什么需要 JPA 和 JDBC 实现（JPA 基于 JDBC）？

区分两者的方法是创建2个单独的DAO类（都实现你的接口）

```
public class JDBCDao implements DBInterface {...}
public class JPADao implements DBInterface {...} 
```

并在需要时在 spring xml（应用程序上下文文件）中注入适当的 DAO bean。

例如，应用程序上下文 xml 看起来像：（`dao`EmployeeService 类的成员是 type `DBInterface`）

```
<bean id="JPADAO" class="com.yourpackage.JPADao".../>
<bean id="JDBCDAO" class="com.yourpackage.JDBCDao".../>

<bean id="EmployeeService" class ....>
    <property name="dao" ref="JDBCDAO" />
    ...
</bean> 
```

或者，您可以在代码中注入 DAO。

```
ApplicationContext ctx = AppContext.getApplicationContext();  
EmployeeService svc = (EmployeeService) ctx.getBean("EmployeeService");  
DBInterface dao = (DBInterface) ctx.getBean("JPADAO");
svc.setDao(dao); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:14:05.000

*除了 JPA 依赖于 JDBC 的事实之外......*

如果您想通过**ApplicationContext** XML 文件来控制它，最简单的方法是简单地定义您选择的实现。假设您有两个实现

```
 public class JpaDB implements DBInterface { ... }
 public class JdbcDB implements DBInterface { ... } 
```

和一个期望 a 的服务`DBInterface`，比如说

```
 public class Service {
     private DBInterface db;

     public void setDBInterface(DBInterface db) {
        this.db = db;
     }
 } 
```

然后你的 spring 配置文件可能看起来像

```
...
<bean id="service" class="com.company.service">
    <!-- Select either "jpa" or "jdbc" depending on preference -->
    <property name="dbInterface" ref="jpa"/> 
</bean>

<bean id="jpa" class="com.company.JpaDB"/>
<bean id="jdbc" class="com.company.JpaDB"/> 
```

# apache-flex - 使用 flash builder 4.5 将保存的内容加载回 flex air 中的位置

> ID：12246553
> 
> 赞同：0
> 
> 时间：2012-09-03T11:02:00.637
> 
> 标签：apache-flex, air, flash-builder

我现在有了将多个组件文本保存到一个文件中的想法。但是现在当我打开该文件时，文件中的所有文本都只进入了一个组件的文本中。这是代码，

```
 <s:click>

                            var f:File = File.desktopDirectory;

                            f.browseForSave("Save As");

                            f.addEventListener(Event.SELECT, function (event:Event):void {

                            var stream:FileStream = new FileStream();

                            stream.open((event.target as File),FileMode.WRITE);

                            stream.writeUTFBytes(rte.htmlText);

                            stream.writeUTFBytes(ta.text);

                            stream.writeUTFBytes(rich.text);

                            stream.close();

                            });

                        </s:click>

                    </s:Button> 
```

```
 <s:click>

                            var f:File = File.desktopDirectory;

                            f.browseForOpen("Select file to open", []);

                            f.addEventListener(Event.SELECT, function (event:Event):void {

                            var fs:FileStream = new FileStream();

                            fs.open(event.target as File, FileMode.READ);

                            rte.htmlText = fs.readUTFBytes(fs.bytesAvailable);

                            ta.text = fs.readUTFBytes(fs.bytesAvailable);

                            fs.close();

                            });

                        </s:click>

                    </s:Button> 
```

一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:46:30.567

您已经从 fs 读取了所有流。只要你执行一次 fs.readUTFBytes(fs.bytesAvailable); 读取的标头/指针将指示您文件的结尾，因此在下一行中 bytesAvailable 将为零。

我建议您使用以下代码：

```
<s:click>
    var f:File = File.desktopDirectory;
    f.browseForOpen("Select file to open", []);

    f.addEventListener(Event.SELECT, function (event:Event):void {
        var fs:FileStream = new FileStream();
        fs.open(event.target as File, FileMode.READ);

        var dataStr:String = fs.readUTFBytes(fs.bytesAvailable);

        rte.htmlText = dataStr;
        ta.text      = dataStr;

        // if you want only the non formatted text use:   ta.text = rte.text;
        fs.close();
});
</s:click> 
```

# windows-phone-7 - 如何在 WP7 的动态磁贴上显示部分地图？

> ID：12246554
> 
> 赞同：2
> 
> 时间：2012-09-03T11:02:02.233
> 
> 标签：windows-phone-7, bing-maps, live-tile

我正在使用 Bing 地图、后台任务和动态图块开发 Windows Phone 应用程序。我想在动态图块（地图的一部分）上显示当前社区。是否有可能在瓷砖上显示地图的一部分？

我猜想在后台任务中实例化 Map 对象并将地图的一部分渲染为图像不符合内存要求。

也许有一个用于返回目标坐标、缩放和图像大小的地图图像的网络服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:48:23.803

确实有一种方法可以通过虚拟地球服务来做到这一点。[你可以在这里](http://dotnet.dzone.com/articles/tip-day-windows-phone)阅读更多关于它的信息。

总而言之，您可以获得特定位置的方形图块，如下所示：

> [http://tiles.virtualearth.net/api/GetMap.ashx?c=39.213413,-98.699930&w=800&h=800&b=r,stl.h,device.mobile,mkt.en-US&z=15&logo=no&da=n](http://tiles.virtualearth.net/api/GetMap.ashx?c=39.213413,-98.699930&w=800&h=800&b=r,stl.h,device.mobile,mkt.en-US&z=15&logo=no&da=n)

# ruby-on-rails - Rails：使用复选框传递“参数”

> ID：12246557
> 
> 赞同：0
> 
> 时间：2012-09-03T11:02:18.000
> 
> 标签：ruby-on-rails, activeadmin

所以事情是这样的：

我有一个带有“Productos”和“Ventas”的 Rails 应用程序这两个资源在它们的表上都有相同的属性，而 ventas 有一个（数量）......模型看起来像这样：

```
#Producto Model

class Producto < ActiveRecord::Base
    has_and_belongs_to_many :categorias, :join_table => :categoria_productos
  attr_accessible :color, :existencia, :nombre, :precio, :talla, :uniclave, :categoria_ids 

#Venta Model

class Venta < ActiveRecord::Base
  attr_accessible :cantidad, :color, :nombre, :precio, :talla, :uniclave, :producto_ids
    has_many :productos
end 
```

我将 ActiveAdmin 用于管理界面，我的**/admin/venta.rb**如下所示：

```
ActiveAdmin.register Venta do

   form do |f|
    f.inputs "Registrar Venta" do
            f.input :cantidad
      f.input :productos, :as => :check_boxes
    end
    f.buttons
  end

end 
```

结果是所有产品都显示在“新文塔”表单中，我可以选择它们，但是当我实际上创建一个新文塔时，“文塔”的参数保存为空，而不是采用选定的“产品”...

我怎样才能解决这个问题？？我希望在新创建的“venta”字段中使用所选“producto”的所有参数，因为它们共享相同的属性（实际上两个模型都是使用相同的属性创建的）

那么，想法？;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:53:30.443

`:categoria_ids`and `: producto_ids`must be as `:categoria_id`and `:producto_id`or 你必须`:foreign_key`在模型之间使用 for 行为

# mysql - mysql 根据给定时间段选择查询计算

> ID：12246563
> 
> 赞同：0
> 
> 时间：2012-09-03T11:02:38.393
> 
> 标签：mysql

我需要 mysql 的帮助：

我有一张像

```
姓名 金额 分期付款日期
美国广播公司 1000 5 03/09/12
xyz 5000 2 2012 年 1 月 8 日

```

现在我需要像这样旋转这张桌子

like month 将以这种方式填充日期+分期付款，对于 abc 和 upto sep，对于 abc 和 upto sep，对于 xyz

结果输出将是

```
姓名 金额 月份
abc 1000 2012 年 9 月
abc 1000 2012 年 10 月
abc 1000 2012 年 11 月
abc 1000 2012 年 12 月
abc 1000 2013 年 1 月
xyz 5000 2012 年 8 月
xyz 5000 2012 年 9 月  

```

任何人都建议我这样做的方式。

提前致谢。

# ruby - 在Ruby中以相反顺序遍历时修改数组中的特定项目

> ID：12246570
> 
> 赞同：1
> 
> 时间：2012-09-03T11:02:55.790
> 
> 标签：ruby, arrays, reverse, traversal

有没有办法修改特定的数组元素（基于某些条件），同时在 Ruby 中以相反的顺序遍历它？

为了更清楚，可以说，

问题是用 x 替换 [1,2,3,4,5] 中的偶数

输出应该是 [1,x,3,x,5] （相同的数组），但替换应该从右到左发生..从 5 到 1 遍历。

提前致谢！

这有效：**(arr.length -1).downto(0) { |x| 用 arr[x] 做某事}**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:43:45.480

```
p [1,2,3,4,5].reverse_each.map{|e| e.odd? ? e : e/2} #[5, 2, 3, 1, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:45:09.093

我了解您想以相反的顺序遍历，而不是使输出也反转。也许是这样：

```
xs = [1, 2, 3]
xs.reverse_each.with_index { |x, idx| xs[xs.size-1-idx] = x.to_s if x == 2 }
xs #=> [1, "2", 3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T18:46:44.780

我欣赏并喜欢 Ruby 的人性化语法，但您可能需要考虑更详细的选项，例如：

```
ary = [1,2,3,4,5]
i = ary.count - 1
while i >= 0 do
    ary[i] = "x" if ary[i] % 2 == 0
    i -= 1
end
puts ary.join(",") 
```

# apache - 将非 www 重定向到 www 后的双斜杠

> ID：12246576
> 
> 赞同：0
> 
> 时间：2012-09-03T11:03:17.220
> 
> 标签：apache, .htaccess, url, http-redirect

我使用以下代码将非 www 流量重定向到 www 流量。

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

发生的情况是，当我查找 tuples.com 时，我得到的是 www.tuples.com// 并且浏览器显示并错误提示它有太多重定向。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:06:18.247

诡异的。它不应该那样做。

试试吧

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)/?$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# assembly - `JMP EBX` 和 `JMP DWORD PTR DS:[EBX]` 之间的主要区别是什么？

> ID：12246581
> 
> 赞同：0
> 
> 时间：2012-09-03T11:03:28.827
> 
> 标签：assembly, x86

我正在尝试将参数`EIP`作为注册跳转指令传递给`EBX`注册。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:14:40.160

`JMP EBX`意思是指示 CPU 跳转到`EBX`寄存器值所指向的地址。如果`EBX`是`12345678h`，它会跳转到 address `12345678h`。所以指令被解释为`JMP 12345678h`.

`JMP DWORD PTR DS:[EBX]`表示指示 CPU 跳转到从寄存器值和选择器`DWORD`指向的内存地址读取的值指向的地址。如果是，CPU将从内存中的地址读取值，然后跳转到该值指向的地址（来自内存的值）。如果内存中的值为，它将跳转到 address 。所以指令被解释为. 读取内存后，它将被解释为.`EBX``DS``EBX``11111111h``DWORD``DS:11111111h``DWORD``DWORD``22222222h``22222222h``JMP DWORD PTR DS:[11111111h]``JMP 22222222h`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T13:49:15.223

# 简短的回答

`JMP EBX`将跳转到`EBX`当前代码段内的寄存器中存储的地址。 将跳转到存储在 .指向的代码段内的`JMP DWORD PTR DS:[EBX]`内存偏移处的地址。`EBX``DS`

例如， let `DS`= **0x0440** , `EBX`= **0x00006200 ，地址****0x00006200**的前四个内存字节为0x00003500 **（**在 little-endian 机器上将存储为**00 35 00 00 ）。**
`JMP EBX`变成`JMP 0x00006200`.
`JMP DWORD PTR DS:[EBX]`变成`JMP 0x0440:0x00003500`

# 长答案

`JMP EBX`具有以下签名：

```
JMP r/m32 
```

在这种情况下，跳转地址要么存储在 32 位寄存器（您的情况）中，要么作为 32 位变量存储在内存中。处理器通过将值**加载**到`EIP`.

`JMP DWORD PTR DS:[EBX]`，另一方面，具有以下签名：

```
JMP ptr16:32 
```

这里的跳转地址分两部分提供。第一个值（在冒号之前）给出了要跳转到的代码段的地址，第二个值（在冒号之后）给出了该代码段内的偏移量。跳转可能是到与当前不同的代码段，因此是**远跳转**。`CS`处理器通过将第一个值加载到并将第二个值加载到 来执行跳转`EIP`。
此外，第二条指令使用`[EBX]`，而不是第一条指令`EBX`。这意味着它将读取存储在其中的偏移量的内存`EBX`并使用该值。
`DWORD PTR`是一个**size 指令**，它告诉汇编器内存应该被视为 32 位整数。

[这](http://sandsprite.com/CodeStuff/Understanding_imports.html)是使用中的第二次跳转的示例。

# javascript - IE 警报默认显示警告图像

> ID：12246583
> 
> 赞同：-1
> 
> 时间：2012-09-03T11:03:40.173
> 
> 标签：javascript, internet-explorer, user-interface

这是我的 IE 问题。单击网页上的按钮后，我在警报中显示成功消息。

`document.alert("sucess")`在所有浏览器的警报中显示一条普通消息，但在 Internet Explorer 中显示警告图像。

有什么方法可以隐藏该图像..显示带有警告图像的成功消息非常讨厌..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:17:26.703

无法更改图标或遗憾地隐藏它们。您可以做什么创建自己的警报框；

```
window.alert=function( alertMessage )
{
    var alertBox = "";
            alertBox +="<div style=\"width:350px;height:70px\" class=\"alertBoxIn alertPosition\" >";
    alertBox  +="<img src=\"http://www.imsearch.info/images/info.png\" style=\"position: relative; top: 1%; left: 2%; height: '40px'\" /></td>";
                     alertBox +="<SPAN style=\"position: relative; top:-30%; left: 12%\">"+alertMessage+"</SPAN>";
                     alertBox  +="<input style=\"position: relative; top:20%; left:10%\" type=\"button\" value=\"    Ok      \" onclick=\"closeAlert();\" />";
            alertBox+="</div>";
    document.getElementById("alertPanel").innerHTML = alertBox;
    document.getElementById("alertPanel").focus();
 } 
```

检查参考：http: [//blogs.msdn.com/b/phaniraj/archive/2007/03/03/cusomizing-the-alert-confirm-messages-in-ie.aspx](http://blogs.msdn.com/b/phaniraj/archive/2007/03/03/cusomizing-the-alert-confirm-messages-in-ie.aspx)

# php - 为什么这个mysql查询返回空结果

> ID：12246585
> 
> 赞同：0
> 
> 时间：2012-09-03T11:03:52.433
> 
> 标签：php, mysql, character-encoding, parameters

此功能旨在从两个单独的表医生和诊所返回医生的信息

```
function searchSubs($spc, $stt, $name, $ls, $ll){
    $query ='
        SELECT doctor.*, clinic.address
        FROM doctor
        LEFT JOIN clinic
            ON ( doctor.id = clinic.dr <<STATE CONDITION>>)
        WHERE doctor.dr_name REGEXP  :dr <<SPECIALIZATION CONDITION>>
            AND doctor.active = 1
        LIMIT :s, :l;
        '
    ;

    $query = ($spc == 0) ? str_replace('<<SPECIALIZATION CONDITION>>','',$query): str_replace('<<SPECIALIZATION CONDITION>>',' AND `doctor`.`specialization` = :sp ',$query);
    $query = ($stt == 0) ? str_replace('<<STATE CONDITION>>','',$query): str_replace('<<STATE CONDITION>>',' AND `clinic`.`governorate` = :st ',$query);

    $searchPDO = new PDO(DNS,ReaderUser,ReaderPass);
    $searchPDO->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
    $searchPDO->exec("SET CHARACTER SET utf8");

    $stmt = $searchPDO->prepare($query);

    if ($spc != 0) $stmt->bindParam(":sp",$spc,PDO::PARAM_INT);
    if ($stt != 0) $stmt->bindParam(":st",$stt,PDO::PARAM_INT);
    $stmt->bindValue(":dr",'.*'.$name.'.*',PDO::PARAM_STR);
    $stmt->bindParam(":s",$ls,PDO::PARAM_INT);
    $stmt->bindParam(":l",$ll,PDO::PARAM_INT);

    $stmt->execute();

    $Drs = $stmt->fetchAll(PDO::FETCH_ASSOC);
    return $Drs;
} 
```

当我这样调用函数时它工作正常：

```
$drs = searchSubs('12', 6, '<<some Arabic name here>>' , 0, 10); 
```

当我这样称呼它时它不会：

```
$SDrs = searchSubs($specialization,$state,$name,$s,$l); 
```

在过去的两天里，我一直在寻找原因，但什么也没有，我已经对字符串变量进行了 url_decoded，`$name`尝试了许多不同的方法来处理数据库中的数据类型，但也没有，

# sql - Logparser 查询以获取 cookie 值

> ID：12246599
> 
> 赞同：5
> 
> 时间：2012-09-03T11:05:07.573
> 
> 标签：logparser, sql, cookies, logparser

我已`abc=1234`添加到 cookie。

它显示在 IIS 日志中。但是`cs`(Cookie) 字段显示的其他 cookie 也用分号分隔。

我想使用[logparser](/questions/tagged/logparser "显示标记为“logparser”的问题")来获取 cookie 的值`abc`。

你能建议一个查询吗？

例如，如果 cs(Cookie) 具有 value `+pqr=999;+abc=1234;+xyz=222`，则 logparser 查询应该返回`1234`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T13:04:13.870

找到了。使用 extract_value() 函数

```
logparser "SELECT extract_value(cs(Cookie),'+abc',';') as abc_value from ..." 
```

# python - Python YAML：控制输出格式

> ID：12246605
> 
> 赞同：27
> 
> 时间：2012-09-03T11:05:50.453
> 
> 标签：python, formatting, yaml

我的文件读取用户输入（如用户名、密码..）。并将数据设置为 x.yml 文件。

x.yml 文件的内容是

```
{user: id} 
```

但相反，我希望内容是

```
user: id 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-03T12:37:25.490

正如评论中提到的，python YAML 库是完成这项工作的正确工具。要获得所需的输出，您需要将关键字参数传递`default_flow_style=False`给`yaml.dump`：

```
>>> x = {"user" : 123}
>>> with open("output_file.yml", "w") as output_stream:
...     yaml.dump(x, output_stream, default_flow_style=False) 
```

文件“output_file.yml”将包含：

```
user: 123 
```

有关如何自定义`yaml.dump`的更多信息，请访问[http://pyyaml.org/wiki/PyYAMLDocumentation](http://pyyaml.org/wiki/PyYAMLDocumentation)。

# xcode - Phonegap 2 + Sencha Touch2 + iOS

> ID：12246609
> 
> 赞同：0
> 
> 时间：2012-09-03T11:05:54.377
> 
> 标签：xcode, ios5, cordova, sencha-touch-2

这是我关于 Stack Overflow 的第一个问题。请善待我的错误。我想在 XCode 中结合 Sencha Touch 2 和 Phonegap 2 for iOS。

我采取的步骤：

1.  为 iOS 创建了一个 Phonegap 项目。
2.  单独创建了一个 Sencha Touch 2 项目。
3.  删除了`www`文件夹内的所有内容，除了`cordova.2.0.0.js`.
4.  复制整个 Sencha Touch 2 工程内容，放到`www`Phonegap 工程的文件夹中。
5.  将 cordova js 添加到 app.json 路径。[有人告诉我，包含那个`index.html`不会包含那个，它必须以这种方式完成。如果我错了，请纠正我。]

结果 ：

当我从 XCode 运行 Sencha Touch 2 应用程序时，它运行良好。但是Phonegap 脚本不起作用。我在 .html 的 html 中放置了一个简单的 Phonegap 作品警报`main.js`。

```
html: [
       "<script type='text/javascript'>",
       "document.addEventListener('deviceready', function () {",
       "alert('Our first PhoneGap app');",
       "}, false);",
       "</script>",
       "You've just generated a new Sencha Touch 2 project. What you're looking at right now is the ",
       "contents of <a target='_blank' href=\"app/view/Main.js\">app/view/Main.js</a> - edit that file ",
       "and refresh to change what's rendered here."
       ].join("") 
```

显示内容时，脚本不会运行。我试过[这个教程](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/)。但我相信它已经过时并且不包括 Phonegap 2。我还看到为 iOS 而不是 Phonegap 构建的 Sencha，它很好地打包了所有东西。但我需要Phonegap 及其功能。

请帮助我提供任何更新的教程、提示、代码示例/下载 [不贪婪，无助]。

谢谢大家，

普拉巴卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:26:28.237

您需要在 index.html 文件中包含 cordova.js。

# php - 连接错误：包 community/Mage_Core_Modules 1.7.0.2 与：community/Find_Feed 1.0.8 冲突

> ID：12246610
> 
> 赞同：1
> 
> 时间：2012-09-03T11:06:14.003
> 
> 标签：php, mysql, magento

我正在使用 magento **1.5.1.0 CE**，我想将其升级到最新版本（1.7.0.2）。我的商店中有许多自定义模块。并希望保留现在正在使用的 db 中的数据。要首先检查升级，我将我的商店设置在本地（使用 WAMP）并尝试使用**Magento 连接管理器**进行升级。我遵循的步骤如下。

*   **1) 在用connect20.magentocommerce.com/community/Mage_All_Latest**填充的连接管理器扩展键字段中。

*   2) 按安装按钮，提供可用更新的概述。

*   3) 按继续按钮。

部分包安装成功，但最后报错

```
CONNECT ERROR: Package community/Mage_Core_Modules 1.7.0.2 conflicts with:community/Find_Feed 1.0.8
Package community/Lib_Varien 1.7.0.0 conflicts with: community/Mage_Core_Modules 1.5.0.1
Package community/Lib_Js_Mage 1.7.0.1 conflicts with: community/Mage_Core_Modules 1.5.0.1
Package community/Mage_Locale_en_US 1.7.0.1 conflicts with: community/Mage_Core_Modules 1.5.0.1
Package community/Lib_Mage 1.7.0.1 conflicts with: community/Mage_Core_Modules 1.5.0.1
Package community/Lib_Js_Prototype 1.7.0.0.3 conflicts with: community/Lib_Js_Mage 1.5.0.0, community/Mage_Core_Modules 1.5.0.1\. 
```

为什么会这样？任何人都可以建议安全升级商店的最佳方法？

# php - 如何使用 Drupal 的 PHP 视图模块中的全局变量

> ID：12246614
> 
> 赞同：0
> 
> 时间：2012-09-03T11:06:21.930
> 
> 标签：php, drupal, module, content-management-system, views

我正在使用 Drupal 视图模块和 PHP 视图模块。我设置的是 5 个字段，它们使用 PHP 块来调用我在 Drupal 中创建的函数。PHP 代码确实可以工作并显示我想要的数据。

有“可用变量”可用于可以使用 PHP 代码的区域，在我的情况下，它用于“输出代码”。例如，您有 $view、$handler、$static、$row 等。

我试图访问所有这些，我得到一个 500 内部错误，或者有时我什么也得不到。错误日志指向第 122 行的“views_php/plugins/views/views_php_handler_field.inc”。我查看了该文件，代码包含以下行：

```
$function($this->view, $this, $this->php_static_variable); 
```

我试过这样调用代码：

```
<?php
global $view;
print_r($view);
?> 
```

注意我试过没有全局线。

如何在 PHP 视图中访问这些变量？我正在使用 Drupal 6 和最新版本的 PHP Views 模块，即 views_php 6.x-1.x-dev。

我用 var_dump 调用了函数“get_defined_vars()”，无论有没有 global 关键字，我都无法使用提到的变量。但是，我可以访问 Drupal 中的全局变量，例如 $user。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:10:42.393

在视图上，您​​有预览选项。我大部分时间都用它来测试我的结果。即使您收到警告框说您拥有`500 internal error`，请转到设置该视图的页面（路径）。您应该看到`$view`变量的输出。注意，`$view`变量显示的数据与列相关。我正在寻找的是有关当前位置（行）的信息。您需要使用变量自己设置此代码`$static`，它将数据从一行保留到另一行，以便您可以手动跟踪您在数组中的位置或数据位置。

我如何使用静态来确定我在当前位置的位置以及接下来需要在哪里的示例：

```
if (!$static['isInitial']){
    /* Should only enter this condition on the first element.
     IsInitial determines this. */

    //Count the total amount of issues in Redmine right now.
    $static['totalRedmineIssues'] = count($getValue);

    $index = 0;
    $static['currentIndex'] = $index;
    $static['isInitial'] = true;

    print_r($static);

} else {
    $static['currentIndex'] = $static['currentIndex'] + 1;
    $index = $static['currentIndex'];
} 
```

# jquery - jQuery - 对象 [object Object] 没有“on”方法

> ID：12246617
> 
> 赞同：2
> 
> 时间：2012-09-03T11:06:35.037
> 
> 标签：jquery, overriding

我正在构建 HTML 页面的一部分，并且正在使用 jQuery 1.8 和“.on”函数。不知何故，运行后页面的 jQuery 版本：

```
$().jquery; 
```

是 1.6.3 并且找不到“.on”方法。

是否有可能在我包含我的 jQuery 之后呈现旧版本的 jQuery 并覆盖新版本？如果发生这种情况，我该如何停止它以及如果旧版本中没有这样的功能，为什么“on”功能不可用版本？

奇怪的是，如果我查看页面源代码，则只有指向我的版本的链接可用。那么，如果在其中一个页面框架中加载了旧版本，为什么它们会覆盖我的 jQuery 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:10:29.867

最后加载的版本（在您的代码中最后出现） - 将被使用。或者它会给你一个错误，你必须使用[`.noConflict()`](http://api.jquery.com/jQuery.noConflict/)第二个。

此外*，“如果我查看页面源代码，只有指向我的版本的链接可用”*，那么您真的不应该期望远程版本能够工作。确保正确包含它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:10:47.647

没有看到您的页面就很难说，但是尝试使用 Safari 或 Chrome 中的 Webkit 开发人员工具，或者使用 FireFox 中的 FireBug 来找出其他 jquery 正在加载表单的位置。

在 Chrome 中，只需打开开发人员工具，转到“网络”选项卡，然后刷新您的网站。然后查看所有加载的资源以确定其他 jQuery 代码的加载位置和时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:18:40.413

几天我有同样的问题。要解决这个问题，只需升级到 1.18.1 版本这里是[下载 v1.8.1](http://code.jquery.com/jquery-1.8.1.min.js)链接。

# salesforce - SOSL 单引号问题

> ID：12246622
> 
> 赞同：0
> 
> 时间：2012-09-03T11:06:59.813
> 
> 标签：salesforce, apex-code

我有一个关于 sosl 的问题。

这工作正常：

```
List<List<SObject>> searchList = null;  
string startAddress = 'hello';  
searchList = Search.query('FIND \'' +startAddress + '\' IN ALL FIELDS RETURNING Account'); 
```

但是如果我写这样的东西，它会给我一个错误：

```
List<List<SObject>> searchList = null;  
string startAddress = 'Tom\'s Towing and Recovery';  

searchList = Search.query('FIND \'' +startAddress + '\' IN ALL FIELDS RETURNING Account'); 
```

`Error : System.QueryException: line 1:507 mismatched character '<EOF>' expecting '''`

请为此问题提出解决方案。任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:21:26.360

请像这样转义输入：

```
string startAddress = string.escapeSingleQuotes( 'Tom\'s Towing and Recovery' ); 
```

# ios - PurpleEventCallback 是什么？

> ID：12246627
> 
> 赞同：52
> 
> 时间：2012-09-03T11:07:17.017
> 
> 标签：ios, iphone, xcode, stack-trace

在我的 iPhone 应用程序的堆栈跟踪中，我看到了对名为`PurpleEventCallback`. 我找不到任何文档。这是什么？

![PurpleEventCallback](../Images/589b473a513752b38950098f58230585.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-03T11:48:24.980

Project Purple 是 iOS 的代号，当时它基本上是 Apple 的一个臭鼬工厂项目。这个回调基本上只是`CoreFoundation`层（从 OS X 移植）和`UIKit`层（下一代 Cocoa 框架）之间的事件桥梁。

*   [“Project Purple 如何变成 iPhone”](http://allthingsd.com/20120803/apples-scott-forstall-on-how-project-purple-turned-into-the-iphone/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T17:51:43.973

只是关于 PurpleEventCallback 的另一条信息。

它是图形服务的一部分。在这种情况下，如果你反汇编 GraphicsServices 框架，你会发现这个方法的源代码。

# c# - jQuery 切换复选框

> ID：12246629
> 
> 赞同：0
> 
> 时间：2012-09-03T11:07:24.670
> 
> 标签：c#, jquery, toggle

Students Gridview 在顶部有一个 Check All 复选框，它控制复选框的开/关。我想在学生网格视图中打开和关闭复选框。这是我的代码：

```
$(document).ready(function () {
    $("#chkAll").click(function () {
        if ($(this).prop("checked") == "checked") {
            $("#<%= gvStudents.ClientID %> :checkbox").not(this).prop("checked", "checked");
        }
        else {
            $("#<%= gvStudents.ClientID %> :checkbox").not(this).prop("checked", "false");
        }    
    });    
}); 
```

它曾经在 jQuery 1.4.xx 中工作，但今天我升级到 JQuery 1.8.1，它不再工作了。我需要什么才能让它再次工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:10:35.777

根据您的选择器，您似乎`ID`对两个`checkboxes`.

要么给出不同`ID`的，要么改用`class`选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:30:55.633

此行返回真假，但没有“检查”，猜猜是这个原因

```
$(this).prop("checked") 
```

选中/取消选中

```
$(this).prop("checked",true)  //check
$(this).prop("checked",false) //uncheck 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:37:15.630

这就是您所需要的：

```
$("#chkAll").click(function () {
    var checkAll = $(this).prop("checked");
    $("#<%= gvStudents.ClientID %> :checkbox").not(this).prop("checked", checkAll);
}); 
```

现场示例：http: [//jsfiddle.net/3ZfzS/](http://jsfiddle.net/3ZfzS/)

但为了更直观，您可能应该在未选中一个或多个其他复选框时取消选中“checkAll”复选框。这可以通过以下添加来完成：

```
$("#<%= gvStudents.ClientID %> :checkbox").not('#chkAll').click(function(){
    var total = $("#<%= gvStudents.ClientID %> :checkbox").not('#chkAll').size();
    var checked = $("#<%= gvStudents.ClientID %> :checkbox").not('#chkAll').filter(':checked').size();
    $("#chkAll").prop("checked",total == checked);
}); 
```

现场示例：http: [//jsfiddle.net/xV2ej/](http://jsfiddle.net/xV2ej/)

# selenium - 理解 assertFalse 方法结合 findElements 方法

> ID：12246632
> 
> 赞同：0
> 
> 时间：2012-09-03T11:07:36.783
> 
> 标签：selenium, junit

你好我只是想知道这行代码是如何工作的（为了更易读，它被分成了两部分）

我是否正确地说 findElements 方法使用 CSS 选择器“h2#main-login”查找元素，然后将它们加载到数组中？然后使用 size 方法检查该数组的长度是否等于 0？

如果数组的大小为 0，会发生什么？assertFalse 是否显示消息“未重定向到登录页面”？

```
assertFalse("Not redirecting to login page", 
driver.findElements(By.cssSelector("h2#main-login")).size() == 0); 
```

任何有助于我理解这一点的解释都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:38:45.720

```
driver.findElements(By.cssSelector("h2#main-login")).size() == 0 
```

是检查元素是否存在的解决方法

```
!driver.findElements(By.cssSelector("h2#main-login")).isDisplayed() 
```

也是可以的。。

如果这不是假（真）消息

`"Not redirecting to login page"`

出于调试原因附加到 AssertionException

更好的：

```
assertTrue("Not redirecting to login page", 
           driver.findElements(By.cssSelector("h2#main-login")).isDisplayed()) 
```

# node.js - 客户端浏览器使用节点 js 和 socket.io 挂起

> ID：12246633
> 
> 赞同：1
> 
> 时间：2012-09-03T11:07:42.757
> 
> 标签：node.js, socket.io

我是节点 js 的新手。

我使用 node js 和 socket.io 为浏览器游戏聊天。经过几天的学习和编码聊天工作正常，但我遇到了问题 - 客户端浏览器在更多客户端操作后挂起。

例如：客户多次点击“添加”按钮向聊天中添加文本，每次点击后，浏览器挂起越来越多，但页面刷新后，一切正常，直到他再次点击“添加”按钮很多次。

而且这个问题不仅出现在“添加”按钮上，而且在客户端多次更改聊天（仅显示私人或公共聊天）时也会出现。

我不认为问题出在服务器代码中，因为当浏览器为我挂起时，其他客户端的聊天工作正常。所以我认为问题出在客户端。在那里，我使用带有默认设置的 socket.io。

也许有人遇到同样的问题并且知道如何解决它？

```
<script src="sockets/socket.io.min.js"></script>
<script>
var socket = io.connect('http://'+chatSocketAddress+':'+chatSocketPort);
function ANgetChatRecords(){
  socket.emit('getRecords', { my_id:my_id, type:chat_pub_chatShow, my_perm:my_perm, lang:my_lang });
  socket.on('getRecordsAnswer', function (data) {
    document.getElementById("chatbox_pub_entry").innerHTML = data.text; 
  });
} //and ther other similar functions, like add record, delete record ... 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:16:02.923

我只是说你可以设置更多 socket.on() 即使没有明确。您那里的代码看起来很干净，但也许您正在向同一个事件添加更多内容并将它们堆叠起来。添加一些控制台日志，这样您就可以看到它们实际被调用了多少次。

我的代码如下所示：

```
 listenForMessage: function(){
        param_socket.on("new", function (data) {
                console.log('new');
                console.log(data);
                app.newHandler(data);
            });

        param_socket.on("done", function (data) {
                console.log('done');
                app.doneHandler(data.id,data.success)
            });

        param_socket.on("change", function (data) {
                console.log('change');
                app.changeHandler(data.id,data.success)
            }); 

    }, 
```

还有一件事，你只调用这个函数一次吗？因为您正在设置事件。

# google-chrome - 如何检查主流浏览器是否退出？

> ID：12246634
> 
> 赞同：0
> 
> 时间：2012-09-03T11:07:44.507
> 
> 标签：google-chrome, firefox, fork, subprocess, pid

情况是这样的：我想从 python 代码打开一个浏览器窗口，如下所示（可移植性不是问题 atm）：

```
subprocess.call(['xdg-open', 'file:///someFileIGenerated.html'])
... # or
pid = subprocess.Popen(...)
... # or (from the webbrowser package)
webbrowser.open(...) 
```

不幸的是，我不能只检查我创建的 pid 是否仍然存在，因为大多数浏览器（Firefox、Chrome）会立即退出创建过程并根据需要生成更多（即每个选项卡一个）。

什么是最负责任的（不会杀死其他浏览器窗口）和可移植的（至少在 Linux 下与 firefox 和 chrome 一起工作）实现这一目标？

**编辑**：可以在这种情况下使用 ppids 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:44:47.977

您可以“ping”firefox 进程。下面是我的 open_url shell 脚本的一部分，希望对您有用

```
OUTPUT=`firefox -remote "ping()" 2>&1 | grep No`
if [[ "${OUTPUT}" == "Error: No running window found" ]]; then
    # firefox is not running
else
    # firefox still running;
fi 
```

# java - 如何从Android中的服务调用一项活动的方法？

> ID：12246635
> 
> 赞同：1
> 
> 时间：2012-09-03T11:07:47.800
> 
> 标签：java, android, service, android-activity

我有一个活动'A'扩展了mapActivity，它调用了服务'B'，而服务'B'扩展了服务。我在服务“B”中得到纬度和经度。现在我需要在活动“A”中调用该方法，并在位置更新后立即连续传递纬度和经度。在那种方法中，我有代码来显示位置。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:12:27.210

> 如何从Android中的服务调用一项活动的方法？

你没有。

任何一个：

*   这首先不应该是一个`Service`（包含活动中的所有逻辑），或者
*   用于`LocalBroadcastManager`从服务向活动发送消息，或
*   使用 a`Messenger`从服务向活动发送消息，或
*   在活动上使用`PendingIntent`created by`createPendingResult()`将消息从服​​务发送到活动，或
*   使用`ResultReceiver`，或 Otto 库，或各种其他方式将消息从服​​务发送到活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:13:01.997

除非您设置对它的引用，否则您无法从**Service**获取对您的**Activity**的引用 - 强烈不建议这样做，并且被认为是*内存泄漏*问题的罪魁祸首。**`STATIC`**

 ***相反，我建议您使用 android 的广播机制`context.sendBroadcast`and `BroadcastReceiver`。***

# php - 使用 PHP 从特定的 div id 获取数据

> ID：12246636
> 
> 赞同：3
> 
> 时间：2012-09-03T11:07:54.063
> 
> 标签：php, html, fetch

> **可能重复：**
> [从 php 读取 XML 标记 id](https://stackoverflow.com/questions/3035310/read-xml-tag-id-from-php)

使用 PHP 从特定 div id 获取数据的方法是什么。我想要做的是从一个名为 的 div id 中获取数据`<div id="content">`，因此该 div id 中的所有数据都将在一个变量中获取。
我可以使用我的脚本获取所有内容，但无法对其进行过滤以从特定 div 标记中获取数据。
这是我用来获取任何内容的脚本：

```
function file_get_contents_curl($url)
{
$ch = curl_init();

curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$data = curl_exec($ch);
curl_close($ch);

return $data;
}
$html = file_get_contents_curl("http://www.example.com");
//parsing all content:
$doc = new DOMDocument();
@$doc->loadHTML($html);
echo "$html"; 
```

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:15:50.167

试试这个，但要确保你已经下载并包含了[PHP Simple HTML DOM Parser](http://sourceforge.net/projects/simplehtmldom/files/)

```
$html = file_get_html("http://www.example.com");
$displaybody = $html->find('div[id=content]', 0)->plaintext; 
```

他们是一些从 div id 或 Tag id 中排除内容的方法，例如，

1）[使用正则表达式](https://stackoverflow.com/questions/7079861/regex-php-find-things-in-div-with-specific-id)

2)[使用 SimpleXML](http://www.php.net/manual/en/book.simplexml.php)

3) 使用[DOM 扩展](http://de.php.net/manual/en/domdocument.getelementbyid.php)或[XPath](http://de.php.net/manual/en/domxpath.query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:11:47.180

使用简单的 HTML DOM 解析器

```
<?php

$content = file_get_contents_curl("http://www.example.com");

$html = file_get_html($content );
$ret = $html->find('div[id=divname]');
?> 
```

# mysql - 用于显示给定月份中所有日期的数据的交叉表

> ID：12246640
> 
> 赞同：0
> 
> 时间：2012-09-03T11:08:10.823
> 
> 标签：mysql

嗨，我正在尝试编写一份报告，显示一个月内的每日值。报告的外观小片段：

```
 01-Apr   02-Apr  03-Apr      .  .                               30-Apr 
 Attended Arrivals   1          2      0       .  .                                  1           
 Failed Arrivals     9          0      0                                             1
 Unattended Arrivals 0          5      0       .  .                                  1 
```

我在下面复制了我的查询，问题是，一个月中可能有几天没有记录，如果我在交叉表中使用 Activity._Created 作为列组，它会跳过中间的几天。关于如何改进查询的任何建议？

> SELECT Activity.id, ActivityType.code, Activity._created, IF( Activity. `stateId`= 686 , 'FAILED Arrivals' , IF(Activity.typeId = 11,'Attended Departures' , 'Unattended Departures' ) ) AS 'type'
> 
> 从活动
> 
> 左连接 ActivityType ON ActivityType.id = Activity.typeId
> 
> WHERE Activity.typeId = 11 或 Activity.typeId = 12 ORDER BY Activity._created
> 
> 谢谢

# mysql - MySQL：SQL 插入查询以在同一个表中重复数据

> ID：12246662
> 
> 赞同：6
> 
> 时间：2012-09-03T11:10:12.710
> 
> 标签：mysql, sql

我有一张表说`table1(id, col2, col3)`，我想复制所有数据，`id 1`但用不同的`id`说法`11`（id不是自动生成的列）。我编写了以下对我不起作用的 sql 查询（给出语法错误）：

```
INSERT INTO table1(
id,
col2,
col3
)
VALUES (

SELECT 11 , col2, col3
FROM table1 WHERE id=1
) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T11:13:16.430

不要使用“VALUES”关键字

```
INSERT INTO table1(
id,
col2,
col3
)

SELECT 11 , col2, col3
FROM table1
WHERE id = 1 
```

编辑 ：

检查您是否使用正确的列名：

```
DESC table1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T11:14:45.187

试试这个：

```
INSERT INTO table1(
id,
col2,
col3
)
SELECT 11 , col2, col3
FROM table1
WHERE table1.id = 1 
```

或者，如果您需要更多类似的东西：

```
INSERT INTO table1(id, col2, col3)
SELECT (SELECT MAX(id) FROM table1) + 1 , col2, col3
FROM table1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T11:11:32.303

[`INSERT INTO ... SELECT`](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)与 一起使用`WHERE id = 1`：

```
INSERT INTO table1(id, col2, col3)
SELECT '1' + id , col2, col3
FROM table1
WHERE id = 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T11:12:33.950

`INSERT`取`VALUES`or `SELECT`，而不是两者。

```
INSERT INTO table1( id, col2, col3 ) 
SELECT 11 , col2, col3 
FROM table1 
WHERE id = 1 
```

# java - 如何为所有用户和页面制作像 facebook 这样的 url 映射

> ID：12246664
> 
> 赞同：1
> 
> 时间：2012-09-03T11:10:20.137
> 
> 标签：java, facebook, jakarta-ee, servlets

我只是想知道，在java中，当我们需要类似的东西时，`www.mydomain.com/buy`我会制作一个servlet并将其映射到`buy`并将其添加到部署描述符中。因此，对于每个这样的链接，我都会有一个 servlet，它只专门映射到该名称。

但是现在 facebook 为每个用户提供了一个独立的 url 到他的个人资料，比如`www.facebook.com/user1`or `www.facebook.com/user2/friends`，我对 php 了解不多，所以我不知道他们在做什么，但我想知道是否有人必须在 java 中做同样的事情，然后我认为在部署描述符中为 8 亿用户创建映射并为他们创建相同数量的 servlet 是不可行的。

有没有办法在java中使这样的事情成为可能？

不仅facebook很多网站都这样做，比如我知道的一些非常大的电子商务网站展示这样的产品`www.ecom.com/camera-nikon`或`www.ecom.com/nokia-n70-music-edition/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:19:08.047

Such mapping has be done programmatically. You need `DispatcherServlet` mapped to `/*`. It will analyse URL, extract user name from it and perform appropriate calls inside your business logic.

BTW Spring MVC provides higher level mapping facilities. For example you can write controller mapped to `/` (as servlet mentioned above). The you can define method annotated as following:

```
@RequestMapping(value = "/{userName}/friends, method = RequestMethod.GET)
public User[] getFriends(@PathVariable(value = "userName") String userName) {
....
} 
```

The mapping between user name passed into URL and the method argument will be done automatically.

# python - Django：如何从管理界面调用管理自定义命令执行？

> ID：12246665
> 
> 赞同：8
> 
> 时间：2012-09-03T11:10:22.973
> 
> 标签：python, django, command, admin

参考，[从代码执行管理命令](https://stackoverflow.com/questions/907506/how-can-i-call-a-custom-django-manage-py-command-directly-from-a-test-driver)，

他们是从 django 管理界面调用此命令执行代码的方法吗？

我有一个自定义命令来定期更新已[安排为 cron](https://stackoverflow.com/questions/573618/django-set-up-a-scheduled-job)的数据库。cron 工作正常。我需要在需要时从管理界面手动更新数据库。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-03T11:43:10.640

**更新：**您可以通过`call_command('compilemessages')`从 python 代码中的任何位置调用该函数来运行任何管理命令。注意：从调用者的角度来看，这显然是一个*阻塞*过程。通过下面的 ajax 示例，您可以获得一种非阻塞/异步的用户体验。根据后端实现，您可以进一步采用此隔离级别。

例子：

```
from django.core.management import call_command
call_command('compilemessages') 
```

如果任务绑定到当前在管理员中查看的对象，一个不错的方法可能是在单击按钮时实现由 ajax 脚本调用的额外视图。额外的视图可以选择包装为芹菜任务，例如

**模型.py**

```
class Foo(models.Model):
    # fields...

    def my_task_init(self):
        return mark_safe("<img class='loading' src='/static/img/loading.gif' alt='loading' style='display:none;' /><a data-identifier='task_%i' class='task'><img src='/static/img/process.png' style='cursor:pointer;' /></a>") % self.id
    my_task_init.allow_tags = True
    my_task_init.short_description = _(u"Execute Task") 
```

**管理员.py**

```
class FooAdmin(admin.ModelAdmin):
    list_display = ['other_field', 'my_task_init']

    class Media:
        js = (
            'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js',
            '/static/js/admin_tasks.js',
        )

    def get_urls(self):
        urls = super(FooAdmin, self).get_urls()
        extra_urls = patterns('',
            (r'^my-task/$', self.admin_site.admin_view(self.parse_view))
        )
        return extra_urls + urls

    # optionally decorated by celery
    def task_view(self, request):
        if not request.is_ajax():
            raise Http404
        task_id = request.GET.get('task_id')
        # your logic
        return HttpResponse('Success') 
```

**admin_tasks.js**

```
$(document).ready(function (){
   $('.task').click(function(){
       var image = $(this).find('img'),
           loading = $(this).parent().find('.loading'),
           task_id = $(this).data('identifier').replace('task_', '');
       $.ajax({
           type: "GET",
           data: ({'task_id': task_id}),
           url: "/admin/app/model/my-task/",
           beforeSend: function() {
               image.hide();
               loading.show();
           },
           statusCode: {
               200: function() {
                   loading.hide();
                   image.attr('src', '/static/img/success.png');
                   image.show();
               },
               404: function() {
                   loading.hide();
                   image.attr('src', '/static/img/error.png');
                   image.show();
               },
               500: function() {
                   loading.hide();
                   image.attr('src', '/static/img/error.png');
                   image.show();
               }
           }
       });
   });
}); 
```

如果您尝试启动未绑定的任务，您可以覆盖模板元素或添加一些 html。

# codeigniter - Codeigniter 一个事务与两个模型

> ID：12246666
> 
> 赞同：6
> 
> 时间：2012-09-03T11:10:25.433
> 
> 标签：codeigniter, model, transactions

是否可以与单独的模型进行一项“交易”。我想插入带有他们标签的帖子。标签和帖子位于两个独立的模型中。我怎样才能通过交易来处理它？（如下所示：）

```
$this->db->trans_start();
$this->post_model->insert('...');
$this->tags_model->insert('...');
$this->db->trans_complete(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T17:39:36.020

只要您的模型方法中没有其他事务语句，您的示例代码就应该可以正常工作。

根据文档，您可以通过传递`TRUE`给它来测试它`$this->db->trans_start()`：

```
$this->db->trans_start(TRUE);
// Queries/model calls
$this->db->trans_complete();

if($this->db->trans_status() === FALSE)
{
    // do something if it fails
} 
```

传递`TRUE`给`trans_start()`将在完成后自动回滚事务。您应该能够检查表上的 auto_increment 值（如果适用）以查看事务是否有效。

# macros - Komodo Macro可以做到吗，如果可以，我该怎么做？

> ID：12246668
> 
> 赞同：0
> 
> 时间：2012-09-03T11:10:28.373
> 
> 标签：macros, komodoedit

我有将近 300 页，所有页面都包含 4 个幻灯片和 4 个拇指。我需要复制`<h1>`标签内的文本，并且我需要在图像的替代文本中粘贴名称、前面的名称、后面的名称、详细的名称......所以页面的标题也应该和`<h1>`文字一样。。

我使用科莫多编辑器。如果可以使用 Javascript / jQuery，那就没问题了。我该如何为此编写科莫多宏？

有高手吗。。？有什么好主意吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:23:08.223

不，这里有一些更适合这项工作的工具：

*   [awk](http://chiranth.blogspot.com/2007/02/using-awk-to-parse-html.html)
*   [电源外壳](http://dmitrysotnikov.wordpress.com/2012/04/17/parsing-linkedin-html-pages-with-powershell/)
*   [猞猁](http://www.unix.com/man-page/all/1/lynx/)

# solr - 在 Sunspot 和 WebSolr 中匹配 3 个术语中的 2 个

> ID：12246670
> 
> 赞同：1
> 
> 时间：2012-09-03T11:10:35.363
> 
> 标签：solr, full-text-search, sunspot-rails, sunspot-solr, websolr

我的搜索中的部分匹配无法正常工作。当我在搜索中输入“爱尔兰都柏林”时，它会正确返回爱尔兰都柏林的所有结果。但是，当我输入“County Dublin Ireland”时，它不会返回任何内容。

我在我的 schmea.xml 中设置了一个 EdgeNGramFilter，如下所示：

```
<filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="10"/> 
```

我正在对位置的太阳黑子端进行全文搜索：

```
search_results = Events.solr_search do
  fulltext location do
    fields(:address)
  end
end 
```

为什么即使 3 个术语中有 2 个匹配，我也没有得到任何结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T21:16:28.680

默认情况下，Sunspot 使用 DisMax 查询解析器，并支持块`minimum_match`内的方法。`fulltext`

```
search_results = Events.solr_search do
  fulltext location do
    fields :address
    minimum_match 2
  end
end 
```

也可以看看：

*   [堆栈溢出 - Solr 太阳黑子 minimum_match](https://stackoverflow.com/a/7341982/154694)
*   [Stack Overflow - Rails 3 Sunspot 全文搜索用法](https://stackoverflow.com/a/12062436/154694)
*   [Solr Wiki - DisMax 查询解析器](http://wiki.apache.org/solr/DisMaxQParserPlugin)
*   [Websolr 博客 - 如何使用 Sunspot 查询布尔逻辑？](http://blog.websolr.com/post/1299174416/how-do-i-query-with-boolean-logic-using-sunspot)

# facebook - 查询以找出在 Facebook 群组中添加特定用户的管理员

> ID：12246675
> 
> 赞同：0
> 
> 时间：2012-09-03T11:10:48.370
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我是一个拥有超过 20 名管理员的 FB Group 的管理员之一。我在想是否有可能找出在组中添加了特定用户的管理员。

于是，我想到了使用 Graph API 来查询这个组的 Admin 名称，该组添加了一个 id 为 xxxxxxxx 的用户。我尝试挖掘[API](https://developers.facebook.com/docs/reference/api/group/)和[FQL](https://developers.facebook.com/docs/reference/fql/group/)的文档，但没有成功找到方法。也尝试在 Google 中搜索。

是否可以找出谁（在管理员中）将特定用户添加到组？如果是这样，找到它的任何提示或建议都会非常有帮助。

谢谢 ：）

# r - 使用 dotplot 可视化匹配前/后余额统计

> ID：12246677
> 
> 赞同：5
> 
> 时间：2012-09-03T11:11:01.277
> 
> 标签：r, graph, matching, lattice

为了直观地显示匹配过程前后的协变量平衡，我编写了以下代码：

```
library(lattice)
library(gridExtra)

StandBias.df= data.frame(
  Category= rep(c("A", "B", "C", "D", "E", "F"), 2),
  Groups = factor(c(rep("0", 6), rep("1", 6))),
  Values = c(0.26, 0.4, 0.3, 0.21, 0.6, 0.14, 0.12, -0.04, -0.23, 0.08, 0.14, -0.27))

d1<-dotplot(Category ~Values, data = StandBias.df, groups = Groups,
            main = "Standardized Mean Differences", col = c("black", "grey50"), pch=c(22,15), xlab=NULL,
            key=list(text=list(c("Pre-Matching", "Post-Matching")),
                     points=list(col = c("black", "grey50"), pch=c(22,15)), 
                     space="bottom", border=T))

Ttest.df = data.frame(
  Category= rep(c("A", "B", "C", "D", "E", "F"), 2),
  Groups = factor(c(rep("0", 6), rep("1", 6))),
  Values = c(0.12, 0.02, 0.69, 0.19, 0.05, 0.01, 0.62, 0.77, 0.54, 0.24, 0.92, 0.51))

d2<-dotplot(Category ~Values, data = Ttest.df, groups = Groups,
            main = "p-values", col = c("black", "grey50"), pch=c(22,15), xlab=NULL,
            key=list(text=list(c("Pre-Matching", "Post-Matching")),
                     points=list(col = c("black", "grey50"), pch=c(22,15)), 
                     space="bottom", border=T))

grid.arrange(d1,d2,nrow=1) 
```

**问题：** 我想在 0.1 处为 p 值 (d2) 和 [-0.25; 0.25] 用于标准化平均值 (d1)，这样我们就有了平衡/不平衡的视觉截止值。

这就是我尝试过的：对于 d1，我在最后一行之后添加了以下几行，即

...

```
space ="bottom", border=T),

panel=function(...){
    panel.abline(v=0.25)
    panel.abline(v=-0.25)}
) 
```

修改后的代码会生成一个带有请求的垂直线但没有数据点的图。

任何想法都非常受欢迎！

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:31:36.587

你快到了。编写自定义面板时，您需要包含原始面板代码，否则不会绘制任何内容。

因此，面板功能应该如下所示（添加`panel.dotplot(...)`到您的代码中）：

```
panel=function(...){
              panel.dotplot(...)
              panel.abline(v=0.25)
              panel.abline(v=-0.25)
              } 
```

* * *

完整代码：

```
d1<-dotplot(Category ~Values, data = StandBias.df, groups = Groups,
            main = "Standardized Mean Differences", col = c("black", "grey50"), pch=c(22,15), xlab=NULL,
            key=list(text=list(c("Pre-Matching", "Post-Matching")),
                     points=list(col = c("black", "grey50"), pch=c(22,15)), 
                     space="bottom", border=T),
            panel=function(...){
              panel.dotplot(...)
              panel.abline(v=0.25)
              panel.abline(v=-0.25)
              }
)

Ttest.df = data.frame(
  Category= rep(c("A", "B", "C", "D", "E", "F"), 2),
  Groups = factor(c(rep("0", 6), rep("1", 6))),
  Values = c(0.12, 0.02, 0.69, 0.19, 0.05, 0.01, 0.62, 0.77, 0.54, 0.24, 0.92, 0.51))

d2<-dotplot(Category ~Values, data = Ttest.df, groups = Groups,
            main = "p-values", col = c("black", "grey50"), pch=c(22,15), xlab=NULL,
            key=list(text=list(c("Pre-Matching", "Post-Matching")),
                     points=list(col = c("black", "grey50"), pch=c(22,15)), 
                     space="bottom", border=T),
          panel=function(...){
            panel.dotplot(...)
            panel.abline(v=0.25)
            panel.abline(v=-0.25)
          }
)

grid.arrange(d1,d2,nrow=1) 
```

![在此处输入图像描述](../Images/164a4e61abc94d48ee68122f892fc680.png)

# jakarta-ee - 在spring框架中设置bean属性

> ID：12246678
> 
> 赞同：1
> 
> 时间：2012-09-03T11:11:02.007
> 
> 标签：jakarta-ee, servlets, spring-mvc, properties, javabeans

我正在尝试完成本教程： [http ://static.springsource.org/docs/Spring-MVC-step-by-step/](http://static.springsource.org/docs/Spring-MVC-step-by-step/)

不幸的是，我卡在第 4 章。我明白了

```
org.springframework.beans.factory.BeanCreationException. 
```

我的代码与本教程中的代码相同，除了一件事：我有另一个版本的 spring 库。我附加的罐子列表：

```
commons-logging-1.1.1.jar
jstl-1.2.jar
org.springframework.aop-3.1.2.RELEASE.jar
org.springframework.asm-3.1.2.RELEASE.jar
org.springframework.aspects-3.1.2.RELEASE.jar
org.springframework.beans-3.1.2.RELEASE.jar
org.springframework.context.support-3.1.2.RELEASE.jar
org.springframework.context-3.1.2.RELEASE.jar
org.springframework.core-3.1.2.RELEASE.jar
org.springframework.expression-3.1.2.RELEASE.jar
org.springframework.instrument.tomcat-3.1.2.RELEASE.jar
org.springframework.instrument-3.1.2.RELEASE.jar
org.springframework.jdbc-3.1.2.RELEASE.jar
org.springframework.jms-3.1.2.RELEASE.jar
org.springframework.orm-3.1.2.RELEASE.jar
org.springframework.oxm-3.1.2.RELEASE.jar
org.springframework.spring-library-3.1.2.RELEASE.libd
org.springframework.test-3.1.2.RELEASE.jar
org.springframework.transaction-3.1.2.RELEASE.jar
org.springframework.web.servlet-3.1.2.RELEASE.jar
org.springframework.web.struts-3.1.2.RELEASE.jar
org.springframework.web-3.1.2.RELEASE.jar 
```

例外：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productManager' defined in ServletContext resource [/WEB-INF/springapp-servlet.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
    PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'products' threw exception; nested exception is java.lang.UnsupportedOperationException 
```

我卡住的地方： http: [//static.springsource.org/docs/Spring-MVC-step-by-step/part4.html](http://static.springsource.org/docs/Spring-MVC-step-by-step/part4.html)

springapp-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <!-- the application context definition for the springapp DispatcherServlet -->

    <bean id="productManager" class="springapp.service.SimpleProductManager">
        <property name="products">
            <list>
                <ref bean="product1"/>
                <ref bean="product2"/>
                <ref bean="product3"/>
            </list>
        </property>
    </bean>

    <bean id="product1" class="springapp.domain.Product">
        <property name="description" value="Lamp"/>
        <property name="price" value="5.75"/>
    </bean>

    <bean id="product2" class="springapp.domain.Product">
        <property name="description" value="Table"/>
        <property name="price" value="75.25"/>
    </bean>

    <bean id="product3" class="springapp.domain.Product">
        <property name="description" value="Chair"/>
        <property name="price" value="22.79"/>
    </bean>

    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="messages"/>
    </bean>

    <bean name="/hello.htm" class="springapp.web.InventoryController">
        <property name="productManager" ref="productManager"/>
    </bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

</beans> 
```

我能做些什么来解决这个问题？我需要做什么才能使用 Spring Framework 3.1 完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:48:33.363

查看 SimpleProductManager 代码：

```
package springapp.service;

import java.util.List;

import springapp.domain.Product;

public class SimpleProductManager implements ProductManager {

    public List<Product> getProducts() {
        throw new UnsupportedOperationException();
    }

    public void increasePrice(int percentage) {
        throw new UnsupportedOperationException();        
    }

    public void setProducts(List<Product> products) {
        throw new UnsupportedOperationException();        
    }

} 
```

当 Spring 调用 setter 时，它会抛出 UnsupportedOperationException。因此，事情按照预期的方式进行。

# python - 加入两个 numpy 矩阵

> ID：12246680
> 
> 赞同：6
> 
> 时间：2012-09-03T11:11:14.613
> 
> 标签：python, multidimensional-array, matrix, numpy, scipy

如果您有两个 numpy 矩阵，您如何将它们合并为一个？它们应该水平连接，这样

```
[[0]         [1]               [[0][1]
 [1]     +   [0]         =      [1][0]
 [4]         [1]                [4][1]
 [0]]        [1]]               [0][1]] 
```

例如，使用这些矩阵：

```
>>type(X)
>>type(Y)
>>X.shape
>>Y.shape
<class 'numpy.matrixlib.defmatrix.matrix'>
<class 'numpy.matrixlib.defmatrix.matrix'>
(53, 1)
(53, 1) 
```

我试过 hstack 但得到一个错误：

```
>>Z = hstack([X,Y])

Traceback (most recent call last):
  File "labels.py", line 85, in <module>
    Z = hstack([X, Y])
  File "C:\Python27\lib\site-packages\scipy\sparse\construct.py", line 263, in h
stack
    return bmat([blocks], format=format, dtype=dtype)
  File "C:\Python27\lib\site-packages\scipy\sparse\construct.py", line 329, in b
mat
    raise ValueError('blocks must have rank 2')
ValueError: blocks must have rank 2 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T11:14:02.833

从回溯来看，似乎您已经完成`from scipy.sparse import *`或类似的事情，因此`numpy.hstack`被`scipy.sparse.hstack`. `numpy.hstack`工作正常：

```
>>> X = np.matrix([[0, 1, 4, 0]]).T
>>> Y = np.matrix([[1, 0, 1, 1]]).T
>>> np.hstack([X, Y])
matrix([[0, 1],
        [1, 0],
        [4, 1],
        [0, 1]]) 
```

# .net - 在 asp.net 中检索客户端计算机信息

> ID：12246685
> 
> 赞同：1
> 
> 时间：2012-09-03T11:11:40.843
> 
> 标签：.net, client, client-side

我使用 asp.net 开发了一个 Web 表单来检索机器信息（RAM、HDD 空间、处理器...等）但是当我托管 Web 表单时，它只检索服务器机器的值。我怎样才能通过从任何机器登录到该表格来获取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:21:46.960

Asp.net 页面始终位于服务器端。HTML 是此服务器的产品，默认情况下，您只能从客户端机器获取有限的信息，如下所示：

```
 string browserInfo =
             "RemoteUser=" + context.Request.ServerVariables["REMOTE_USER"] + ";\n"
            + "RemoteHost=" + context.Request.ServerVariables["REMOTE_HOST"] + ";\n"
            + "Type=" + context.Request.Browser.Type + ";\n"
            + "Name=" + context.Request.Browser.Browser + ";\n"
            + "Version=" + context.Request.Browser.Version + ";\n"
            + "MajorVersion=" + context.Request.Browser.MajorVersion + ";\n"
            + "MinorVersion=" + context.Request.Browser.MinorVersion + ";\n"
            + "Platform=" + context.Request.Browser.Platform + ";\n"
            + "SupportsCookies=" + context.Request.Browser.Cookies + ";\n"
            + "SupportsJavaScript=" + context.Request.Browser.EcmaScriptVersion.ToString() + ";\n"
            + "SupportsActiveXControls=" + context.Request.Browser.ActiveXControls + ";\n"
            + "SupportsJavaScriptVersion=" + context.Request.Browser["JavaScriptVersion"] + "\n"; 
```

如果你想获得内存，硬盘，...你应该开发activex控件并且客户端必须安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:30:52.657

简单地说，你不能那样做。唯一的可能是使用 ActiveX，这将要求用户运行 IE（而不是其他浏览器）并允许您的网站访问该信息。

大多数用户不允许您获取该信息（出于安全原因），因此您不能指望它。

# scala - 使用测试配置播放 2.0 FakeApplication 设置

> ID：12246686
> 
> 赞同：9
> 
> 时间：2012-09-03T11:11:41.650
> 
> 标签：scala, mongodb, playframework-2.0, specs2

我有一个使用 FakeApplication 和嵌入式 mongodb 数据库的 specs2 测试。

```
def inMemoryMongoDatabase(name: String = "default"): Map[String, String] = {
    val dbname: String = "play-test-" + scala.util.Random.nextInt
    Map(
        ("mongodb." + name + ".db" -> dbname),
        ("mongodb." + name + ".port" -> EmbeddedMongoTestPort.toString))
}

override def around[T <% Result](t: => T) = {
    running(FakeApplication(additionalConfiguration = inMemoryMongoDatabase(), additionalPlugins = Seq("se.radley.plugin.salat.SalatPlugin"))) {
        t // execute t inside a http session
    }
} 
```

FakeApplication 使用 conf 目录中的默认 application.conf 配置和为每个测试创建的测试数据库的附加配置。
在我们设置 mongodb 副本集之前，这是有效的发现。现在 application.conf 包含此副本集的配置

```
mongodb.default.replicaset {
host1.host = "localhost"
host1.port = 27017
host2.host = "localhost"
host2.port = 27018
host3.host = "localhost"
host3.port = 27019
} 
```

由于 FakeApplication 使用默认配置，因此测试失败，因为找不到副本集的主机。我想为我的测试设置不同的配置，基本上删除 mongodb.default.replicaset 条目。如果 mongodb.default.replicaset 是一个简单的 Map[String, String] 这将很容易，因为我可以将它添加到 additonalConfiguration 但是当我尝试这样做时它会失败，因为预期的值类型不是字符串而是对象。我还尝试通过路径参数向 FakeApplication 提供单独的 test.conf 文件。

```
override def around[T <% Result](t: => T) = {
    running(FakeApplication(path = new java.io.File("conf/test.conf"), additionalConfiguration = inMemoryMongoDatabase(), additionalPlugins = Seq("se.radley.plugin.salat.SalatPlugin"))) {
        t // execute t inside a http session
    }
} 
```

这也不起作用，因为它没有加载任何配置。

我将不胜感激任何帮助。谢谢。

克里斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-04T14:57:54.050

我们在为集成测试加载额外配置时遇到了类似的问题。我们发现手动填充地图很乏味，因此我们使用了以下方法：

```
private Configuration additionalConfigurations;
@Before
public void initialize(){
    Config additionalConfig = ConfigFactory.parseFile(new File("conf/integration.conf"));
    additionalConfigurations = new Configuration(additionalConfig);
}
@Test
public void testPropertiesGetLoaded() throws Exception{
    running(testServer(3333, fakeApplication(additionalConfigurations.asMap())), HTMLUNIT, new Callback<TestBrowser>(){
        public void invoke(TestBrowser browser){
            String specificProperty = Play.application().configuration().getString("specific.property");
            System.out.println(specificProperty);
        }
    });
} 
```

我不知道在 Scala 方面是否有一个不错的方法，我们正在用 java 编写所有代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:29:27.867

问题是如何在使用 Play 的 FakeAppication 运行集成测试时指定 test.conf 文件。在我的集成测试中，我无法调用`play -Dconfig.file=conf/test.conf`.

我设法做的是：

```
object FakeSalatApp extends Around {

 def EmbeddedMongoTestPort: Int = 27028

 def inMemoryMongoDatabase(name: String = "default"): Map[String, String] = {
   val dbname: String = "play-test-" + scala.util.Random.nextInt
   Map(
     ("mongodb." + name + ".db" -> dbname),
     ("mongodb." + name + ".port" -> EmbeddedMongoTestPort.toString),
     ("mongodb." + name + ".replicaset.host1.host" -> "localhost"),
     ("mongodb." + name + ".replicaset.host1.port" -> EmbeddedMongoTestPort.toString),
     ("mongodb." + name + ".replicaset.host2.host" -> "localhost"),
     ("mongodb." + name + ".replicaset.host2.port" -> (EmbeddedMongoTestPort + 1).toString),
     ("mongodb." + name + ".replicaset.host3.host" -> "localhost"),
     ("mongodb." + name + ".replicaset.host3.port" -> (EmbeddedMongoTestPort + 2).toString))
  }

 override def around[T <% Result](t: => T) = {
   running(FakeApplication(additionalConfiguration = inMemoryMongoDatabase(), additionalPlugins = Seq("se.radley.plugin.salat.SalatPlugin"))) {
     t // execute t inside a http session
   }
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-08T02:12:36.017

这就是我在 Play 2.3.x 中的做法

1.  `GlobalSettings`在包中的类中定义我的应用`AppGlobal`程序（不是根包）

    ```
    package configs

    class AppGlobal extends GlobalSettings {
      // Your application global settings
      ???
    } 
    ```

2.  将应用程序全局设置定义为`object Global extends AppGlobal`您的应用程序使用的设置。

3.  在测试类中，定义一个测试全局。最后添加测试配置以覆盖或添加到整体应用程序配置：

    ```
    object TestGlobal extends AppGlobal {
      override def onLoadConfig(config: Configuration, 
                                path: File, 
                                classloader: ClassLoader, 
                                mode: Mode): Configuration = {
        config ++ configuration ++ 
              Configuration.load(path, mode = Mode.Dev, 
                                 Map("config.file" -> "conf/test.conf"))
        }
    } 
    ```

4.  使用上述创建假应用程序`TestGlobal`

    ```
    FakeApplication(withGlobal = Some(TestGlobal)) 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-03T19:11:15.630

就我而言，我只是创建了一个所有测试都扩展的基类。在创建 FakeApplication 之前，我定义了设置应用程序配置的系统属性**config.resource**。然后我将我的配置结构如下：

application.conf : 包含 no-env 特定配置

test.conf ：包括 application.conf 并定义运行单元测试的配置

env_local.conf ：包括 application.conf 并定义配置以在本地运行应用程序

env_prod.conf ：类似于 env_local.conf 但用于生产等...

在我的项目中，为方便起见，我创建了一个脚本 local.sh，它只运行 activator -Dconfig.resource=env_local.conf

```
@RunWith(classOf[JUnitRunner])
class ApplicationTest extends FunSuite with MockitoSugar {
   System.setProperty("config.resource", "test.conf")
   val app = Helpers.fakeApplication()
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T06:50:46.530

Using`path`在这里不起作用，因为这是您正在运行的 FakeApplication 的路径（在某些情况下您可能有不同的路径）。

在您的情况下，我的建议是`test.conf`在运行 Play 以进行测试模式时指定一个，例如

```
play -Dconfig.file=conf/test.conf 
```

然后`test.conf`会被接走。然后，您还可以让它包含您的正常`application.conf`并仅覆盖 mongo 设置。

也许将“单一目标模式”作为连接到 mongodb 的默认方式也是有意义的`application.conf`，并覆盖 mongob 配置以仅在生产配置中使用副本集。

# jsf-2 - 使无线电数据表primefaces适应我的案例jsf2

> ID：12246688
> 
> 赞同：0
> 
> 时间：2012-09-03T11:11:45.363
> 
> 标签：jsf-2, datatable, primefaces, radio-button

我想使用这个无线电数据表： [这里](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)

但我想在不点击查看按钮的情况下触发对话框，

这是我的 xhtml 页面：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>TODO supply a title</title>
    </h:head>
    <h:body>
        <h:form id="form">  

            <p:dataTable id="cars" var="car" value="#{newJSFManagedBean.mediumPapiersModel}" paginator="true" rows="10"  
                         selection="#{newJSFManagedBean.selectedPapier}"  >  

                <f:facet name="header">  
                    RadioButton Based Selection  
                </f:facet>  

                <p:ajax event="rowSelect" listener="#{newJSFManagedBean.onRowSelect}"   
                    update=":form:display" oncomplete="carDialog.show()" />  

                <p:column selectionMode="single" style="width:18px" />  

                 <p:ajax event="rowSelect" listener="#{newJSFManagedBean.onRowSelect}"   
                    update=":form:display" oncomplete="carDialog.show()" /> 

                <p:column headerText="libelle">  
                    #{car.libelle}  
                </p:column>  

                <p:column headerText="format">  
                    #{car.format}  
                </p:column>  

                <p:column headerText="stock" >  
                    #{car.stock}  
                </p:column>  

            </p:dataTable>  

            <p:dialog id="dialog" header="Car Detail" widgetVar="carDialog" resizable="false"  
                      showEffect="explode" hideEffect="explode">  

                <h:panelGrid id="display" columns="2" cellpadding="4">  

                     <h:outputText value="id" />  
                     <h:outputText value="#{newJSFManagedBean.selectedPapier.id}" />  

                    <h:outputText value="format" />  
                    <h:outputText value="#{newJSFManagedBean.selectedPapier.format}" />  

                    <h:outputText value="grammage" />  
                    <h:outputText value="#{newJSFManagedBean.selectedPapier.grammage}" />  

                    <h:outputText value="libelle" />  
                    <h:outputText value="#{newJSFManagedBean.selectedPapier.libelle}" />  
                </h:panelGrid>  
            </p:dialog>  

        </h:form>
    </h:body>
</html> 
```

这是我的 managedBean ：

```
package controlleurs.admin;

import java.util.ArrayList;
import java.util.List;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import org.primefaces.event.SelectEvent;
import pojos_mappingFiles.Papier;

@ManagedBean
@SessionScoped
public class NewJSFManagedBean {

    metiers.admin.stockHelper sh;
    Papier selectedPapier;  
    List<Papier> papiers;
    papierDataModel mediumPapiersModel;
    /**
     * Creates a new instance of NewJSFManagedBean
     */
    public NewJSFManagedBean() {
        sh = new metiers.admin.stockHelper();
        papiers = new ArrayList<Papier>();
        papiers = sh.getPapiers();
        for(Papier pap : papiers ){
            pap.setChecked(false);
        }
        mediumPapiersModel = new papierDataModel(papiers);
    }

    public Papier getSelectedPapier() {
        System.out.println("j ai selectionz ");
        return selectedPapier;
    }

    public void setSelectedPapier(Papier selectedPapier) {
        System.out.println("je suis selectionné mon numero : "+selectedPapier.getLibelle());
        this.selectedPapier = selectedPapier;
    }

    public papierDataModel getMediumPapiersModel() {
        return mediumPapiersModel;
    }

    public void onRowSelect(SelectEvent event) {  
        System.out.println("je suis dans onRowSelect");  
    } 

} 
```

这是 papierDataModel ：

```
package controlleurs.admin;
import java.util.List;
import javax.faces.model.ListDataModel;   
import org.primefaces.model.SelectableDataModel;  
import pojos_mappingFiles.Papier;

public class papierDataModel extends ListDataModel<Papier> implements SelectableDataModel<Papier> {

    public papierDataModel() {  
    }  

    public papierDataModel(List<Papier> data) {  
        super(data);  
    }  

    @Override
    public Object getRowKey(Papier t) {
        return t.getId().toString();

    }

    @Override
    public Papier getRowData(String rowKey) {
        List<Papier> papiers = (List<Papier>) getWrappedData();  

        for(Papier car : papiers) {  
            if(car.getId().toString().equals(rowKey))  
                return car;  
        }  

        return null;  
    }

} 
```

但是当我检查其中一行时对话框没有出现，我不知道原因，你有什么想法，谢谢

# java - java中的结果集关闭错误

> ID：12246689
> 
> 赞同：0
> 
> 时间：2012-09-03T11:11:45.283
> 
> 标签：java, swing, debugging, resultset, jdbc-odbc

在我使用 Java Swing 的独立应用程序中，我正在使用 ResultSet 遍历 Excel 工作表（后端数据）。但是在执行插入查询后，当我尝试再次使用 ResultSet 遍历记录时，它显示“ResultSet 已关闭”。之后不能进行任何操作。
错误是什么？我找不到它了。请告诉我。我是新手..所以请简单解释一下。我很感激你的帮助。谢谢 ：）

```
public sowui(String s)
{

    try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
        con=DriverManager.getConnection("jdbc:odbc:test");
        Statement stmt = con.createStatement();
        stmt = con.createStatement( ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE );
        String sql ="SELECT * FROM [Sheet1$] ";

        rs =stmt.executeQuery(sql);
    } catch (SQLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    setTitle("MANAGEMENT OF STATEMENT OF WORKS");
    setLayout(null);
    l1=new JLabel("CONTRACT REFERENCE NUMBER");
    t1=new JTextField(20);

    l1.setBounds(50,100,250,50);
    t1.setBounds(300,110,135,30);
    t1.addKeyListener(new KeyAdapter() {
        public void keyTyped(KeyEvent e) {
            String input=t1.getText();
            Pattern p = Pattern.compile("[A-Z,a-z,&%$#@!()*^]");
            Matcher m = p.matcher(input);
            if (m.find()) {
                t1.setText(null);
                JOptionPane.showMessageDialog(null, "Please enter only numbers");
            }
        } });    
    l1m=new JLabel("*");
    l1m.setBounds(260,100,10,50);
    l1m.setForeground(Color.RED);

    l2=new JLabel("CR NUMBER");
    final String [] crn = {"N/A"};
    c6 =new JComboBox(crn);
    c6.setEditable(true);
    c6.addActionListener(new ActionListener() {            

        public void actionPerformed(ActionEvent e) {                
            if (e.getActionCommand().equals("comboBoxEdited")) {                   
                System.out.println("Adding new player!");                   
                c6.insertItemAt(c6.getSelectedItem(),0);               
            }             
        }         
    }); 

    l2.setBounds(50,150,250,50);
    c6.setBounds(300,160,135,30);

    l2m=new JLabel("*");
    l2m.setBounds(130,150,10,50);
    l2m.setForeground(Color.RED);

    l3=new JLabel("SOW NAME");
    t3=new JTextField(20);
    t3.addKeyListener(new KeyAdapter()
    {
        public void keyTyped(KeyEvent e) {
            String input=t3.getText();
            Pattern p = Pattern.compile("[0-9]");
            Matcher m = p.matcher(input);
            if (m.find())
            {
                t3.setText(null);
                JOptionPane.showMessageDialog(null,"Enter only characters A-Z or a-z");

            }
        }
    });

    l3.setBounds(50,200,250,50);
    t3.setBounds(300,210,135,30);

    l3m=new JLabel("*");
    l3m.setBounds(120,200,10,50);
    l3m.setForeground(Color.RED);

    l4=new JLabel("PARTNER SERVICE MANAGER");
    t4=new JTextField(20);
    t4.addKeyListener(new KeyAdapter()
    {
        public void keyTyped(KeyEvent e) {
            String input=t4.getText();
            Pattern p = Pattern.compile("[0-9]");
            Matcher m = p.matcher(input);
            if (m.find())
            {
                t4.setText(null);
                JOptionPane.showMessageDialog(null,"Enter only characters A-Z or a-z");

            }
        }
    });

    l4.setBounds(50,250,250,50);
    t4.setBounds(300,260,135,30);

    l4m=new JLabel("*");
    l4m.setBounds(230,250,10,50);
    l4m.setForeground(Color.RED);

    l5=new JLabel("LBG SERVICE MANAGER");
    t5=new JTextField(20);
    t5.addKeyListener(new KeyAdapter()
    {
        public void keyTyped(KeyEvent e) {
            String input=t5.getText();
            Pattern p = Pattern.compile("[0-9]");
            Matcher m = p.matcher(input);
            if (m.find())
            {
                t5.setText(null);
                JOptionPane.showMessageDialog(null,"Enter only characters A-Z or a-z");

            }
        }
    });

    l5.setBounds(50,300,250,50);
    t5.setBounds(300,310,135,30);

    l5m=new JLabel("*");
    l5m.setBounds(200,300,10,50);
    l5m.setForeground(Color.RED);

    l6=new JLabel("TYPE OF CONTRACT");
    final String [] tct = {"SOW"};
    c4 =new JComboBox(tct);
    c4.setEditable(true);
    c4.addActionListener(new ActionListener() {            

        public void actionPerformed(ActionEvent e) {                
            if (e.getActionCommand().equals("comboBoxEdited")) {                   
                System.out.println("Adding new player!");                   
                c4.insertItemAt(c4.getSelectedItem(),0);               
            }             
        }         
    }); 

    l6.setBounds(50,350,250,50);
    c4.setBounds(300,360,135,30);

    l6m=new JLabel("*");
    l6m.setBounds(180,350,10,50);
    l6m.setForeground(Color.RED);

    l7=new JLabel("VALUE OF CONTRACT");
    t7=new JTextField(20);
    t7.addKeyListener(new KeyAdapter() {
        public void keyTyped(KeyEvent e) {
            String input=t7.getText();
            Pattern p = Pattern.compile("[A-Z,a-z,&%$#@!()*^]");
            Matcher m = p.matcher(input);
            if (m.find()) {
                t7.setText(null);
                JOptionPane.showMessageDialog(null, "Please enter only numbers");
            }
        } });                
    l7.setBounds(50,400,250,50);
    t7.setBounds(300,410,135,30);

    l7m=new JLabel("*");
    l7m.setBounds(190,400,10,50);
    l7m.setForeground(Color.RED);

    l8=new JLabel("REMARKS");
    t8=new TextArea(15,40);
    l8.setBounds(50,450,250,50);
    t8.setBounds(300,460,200,80);

    l9=new JLabel("WORK STATUS");
    final String [] workstatus = {"Live","Pipeline","Working at Risk"};
    c1 =new JComboBox(workstatus);
    c1.setEditable(true);
    c1.addActionListener(new ActionListener() {            

        public void actionPerformed(ActionEvent e) {                
            if (e.getActionCommand().equals("comboBoxEdited")) {                   
                System.out.println("Adding new player!");                   
                c1.insertItemAt(c1.getSelectedItem(),0);               
            }             
        }         
    }); 

    l9.setBounds(500,100,250,50);
    c1.setBounds(750,110,135,30);

    l9m=new JLabel("*");
    l9m.setBounds(600,100,10,50);
    l9m.setForeground(Color.RED);

    l10=new JLabel("CONTRACT APPROVAL");
    final String [] cal = {"Fully signed off","WithPlatform","with partner for signoff"};
    c2 =new JComboBox(cal);
    c2.setEditable(true);
    c2.addActionListener(new ActionListener() {            

        public void actionPerformed(ActionEvent e) {                
            if (e.getActionCommand().equals("comboBoxEdited")) {                   
                System.out.println("Adding new player!");                   
                c2.insertItemAt(c2.getSelectedItem(),0);               
            }             
        }         
    }); 
    l10.setBounds(500,150,250,50);
    c2.setBounds(750,160,135,30);

    l10m=new JLabel("*");
    l10m.setBounds(640,150,10,50);
    l10m.setForeground(Color.RED);

    l11=new JLabel("PLATFORM");
    final String [] PF = {"ADM-WPM","ADM-ALIS","ADM-SWeC","ADM-PAS","ADM-BSM","ADM-RAS","ADM-LP&I"};
    c5 =new JComboBox(PF);
    c5.setEditable(true);
    c5.addActionListener(new ActionListener() {            

        public void actionPerformed(ActionEvent e) {                
            if (e.getActionCommand().equals("comboBoxEdited")) {                   
                System.out.println("Adding new player!");                   
                c5.insertItemAt(c5.getSelectedItem(),0);               
            }             
        }         
    }); 
    l11.setBounds(500,200,250,50);
    c5.setBounds(750,210,135,30);

    l11m=new JLabel("*");
    l11m.setBounds(570,200,10,50);
    l11m.setForeground(Color.RED);

    l12=new JLabel("COMMERCIAL MODEL");
    final String [] cml = {"T&M","FP","PSA"};
    c3 =new JComboBox(cml);
    c3.setEditable(true);
    c3.addActionListener(new ActionListener() {            

        public void actionPerformed(ActionEvent e) {                
            if (e.getActionCommand().equals("comboBoxEdited")) {                   
                System.out.println("Adding new player!");                   
                c3.insertItemAt(c3.getSelectedItem(),0);               
            }             
        }         
    }); 
    l12.setBounds(500,250,250,50);
    c3.setBounds(750,260,135,30);

    l12m=new JLabel("*");
    l12m.setBounds(630,250,10,50);
    l12m.setForeground(Color.RED);

    l13=new JLabel("START DATE");
    t13=new JTextField(20);
    l13.setBounds(500,300,250,50);
    t13.setBounds(750,310,135,30);
    t13.setEditable(false);

    l13m=new JLabel("*");
    l13m.setBounds(580,300,10,50);
    l13m.setForeground(Color.RED);

    l14=new JLabel("END DATE");
    t14=new JTextField(20);
    l14.setBounds(500,350,250,50);
    t14.setBounds(750,360,135,30);
    t14.setEditable(false);

    l14m=new JLabel("*");
    l14m.setBounds(570,350,10,50);
    l14m.setForeground(Color.RED);

    l15=new JLabel("CUMULATIVE VALUE OF CONTRACT");
    t15=new JTextField(20);
    t15.addKeyListener(new KeyAdapter() {
        public void keyTyped(KeyEvent e) {
            String input=t15.getText();
            Pattern p = Pattern.compile("[A-Z,a-z,&%$#@!()*^]");
            Matcher m = p.matcher(input);
            if (m.find()) {
                t15.setText(null);
                JOptionPane.showMessageDialog(null, "Please enter only numbers");
            }
        }});       

    l15.setBounds(500,400,250,50);
    t15.setBounds(750,410,135,30);

    l15m=new JLabel("*");
    l15m.setBounds(710,400,10,50);
    l15m.setForeground(Color.RED);

    l16=new JLabel("SOW TRACKER");
    l16.setBounds(400,50,250,50);
    l16.setFont(new Font("TIMES NEW ROMAN", Font.BOLD, 28));

    firstb=new JButton("FIRST");
    firstb.setBounds(200,600,100,40);

    prev=new JButton("PREVIOUS");
    prev.setBounds(400,600,100,40);

    nextb=new JButton("NEXT");
    nextb.setBounds(600,600,100,40);

    lastb=new JButton("LAST");
    lastb.setBounds(800,600,100,40);

    newb=new JButton("NEW");
    newb.setBounds(200,650,100,40);

    save=new JButton("SAVE");
    save.setBounds(400,650,100,40);

    exitb = new JButton("EXIT");
    exitb.setBounds(600, 650,100,40);

    searchb=new JButton("SEARCH");
    searchb.setBounds(800,650,100,40);

    b9=new JButton("..");
    b9.setBounds(900,315,20,20);

    b10=new JButton("..");
    b10.setBounds(900,365,20,20);

    add(l1);
    add(t1);
    add(l1m);

    add(l2);
    add(c6);
    add(l2m);

    add(l3);
    add(t3);
    add(l3m);

    add(l4);
    add(t4);
    add(l4m);

    add(l5);
    add(t5);
    add(l5m);

    add(l6);
    add(c4);
    add(l6m);

    add(l7);
    add(t7);
    add(l7m);

    add(l8);
    add(t8);

    add(l9);
    add(c1);
    add(l9m);

    add(l10);
    add(c2);
    add(l10m);

    add(l11);
    add(c5);
    add(l11m);

    add(l12);
    add(c3);
    add(l12m);

    add(l13);
    add(t13);
    add(l13m);

    add(l14);
    add(t14);
    add(l14m);

    add(l15);
    add(t15);
    add(l15m);

    add(l16);

    add(firstb);
    firstb.addActionListener(this);

    add(prev);
    prev.addActionListener(this);

    add(nextb);
    nextb.addActionListener(this);

    add(lastb);
    lastb.addActionListener(this);

    add(newb);
    newb.addActionListener(this);

    add(save);
    save.addActionListener(this);

    add(exitb);
    exitb.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e)
        {
            System.exit(0);
        }
    });

    add(searchb);
    searchb.addActionListener(this);

    add(b9);
    b9.addActionListener(this);

    add(b10);
    b10.addActionListener(this);

    setSize(1000,1000);
    setVisible(true);
    setResizable(false);

}

public void actionPerformed(ActionEvent ae)
{

    if(ae.getSource()==save)
    {

        if(t1.getText().length()==0) { try{

            JOptionPane.showMessageDialog(null, "Enter CONTRACT REFERENCE NUMBER"); }catch(Exception e){

                JOptionPane.showMessageDialog(null, "JTextField is " + t1.getText()); }}

        /*else if(t2.getText().length()==0) { try{

JOptionPane.showMessageDialog(null, "Enter CR NUMBER"); }catch(Exception e){

        JOptionPane.showMessageDialog(null, "JTextField is " + t2.getText()); }}*/

        else if(t3.getText().length()==0) { try{

            JOptionPane.showMessageDialog(null, "enter text in JTextField-SOW NAME"); }catch(Exception e){

                JOptionPane.showMessageDialog(null, "JTextField is " + t3.getText()); }}

        else if(t4.getText().length()==0) { try{

            JOptionPane.showMessageDialog(null, "enter text in JTextField-PARTNER SERVICE MANAGER"); }catch(Exception e){

                JOptionPane.showMessageDialog(null, "JTextField is " + t4.getText()); }}

        else if(t5.getText().length()==0) { try{

            JOptionPane.showMessageDialog(null, "enter text in JTextField-LBG SERVICE MANAGER"); }catch(Exception e){

                JOptionPane.showMessageDialog(null, "JTextField is " + t5.getText()); }}

        else if(t7.getText().length()==0) { try{

            JOptionPane.showMessageDialog(null, "Enter VALUE OF CONTRACT"); }catch(Exception e){

                JOptionPane.showMessageDialog(null, "JTextField is " + t7.getText()); }}

        /*else if(t11.getText().length()==0) { try{

JOptionPane.showMessageDialog(null, "enter text in JTextField-PLATFORM"); }catch(Exception e){

        JOptionPane.showMessageDialog(null, "JTextField is " + t11.getText()); }}

else if(t12.getText().length()==0) { try{

JOptionPane.showMessageDialog(null, "enter text in JTextField-COMMERCIAL MODEL"); }catch(Exception e){

        JOptionPane.showMessageDialog(null, "JTextField is " + t12.getText()); }}*/

        else if(t13.getText().length()==0) { try{

            JOptionPane.showMessageDialog(null, "Enter START DATE"); }catch(Exception e){

                JOptionPane.showMessageDialog(null, "JTextField is " + t13.getText()); }}

        else if(t14.getText().length()==0) { try{

            JOptionPane.showMessageDialog(null, "Enter END DATE"); }catch(Exception e){

                JOptionPane.showMessageDialog(null, "JTextField is " + t14.getText()); }}

        else if(t15.getText().length()==0) { try{

            JOptionPane.showMessageDialog(null, "Enter-CUMULATIVE VALUE OF CONTRACT"); }catch(Exception e){

                JOptionPane.showMessageDialog(null, "JTextField is " + t15.getText()); }} 

        String str1=t13.getText();
        String str2=t14.getText();
        SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy");

        Date date1 = null;
        try {
            date1 = (Date) df.parse(str1);
        } catch (ParseException e) {

        }

        Date date2 = null;
        try {
            date2 = (Date) df.parse(str2);
        } catch (ParseException e) {

        } 

        if (date1.after(date2)) try{
            JOptionPane.showMessageDialog(null, "Start Date must be earlier than the end date");

        }catch(Exception e){} 

        if(ae.getSource()==save) 
        {
            try
            {

                String value1=t1.getText();

                String value2=(String)c6.getSelectedItem();

                String value3=t3.getText();

                String value4=t4.getText();

                String value5=t5.getText();

                String value6 = (String) c4.getSelectedItem(); 

                String value7=t7.getText();

                String value8=t8.getText();

                String value9 = (String) c1.getSelectedItem(); 

                String value10 = (String) c2.getSelectedItem(); 

                String value11 = (String) c5.getSelectedItem(); 

                String value12 = (String) c3.getSelectedItem(); 

                String value13=t13.getText();

                String value14=t14.getText();

                String value15=t15.getText();

                Statement st=con.createStatement();
                System.out.println(value1);
                //  String q = "insert into [sheet1$] (CRN,CR_NUM,SOW_N,PSM,LBG,T_CONTRACT,V_CONTRACT,REMARKS,STATUS,APPROVAL,PLATFORM,MODEL,START_D,END_D,CUM_VALUE) values ('12345','"+value2+"','"+value3+"','"+value4+"','"+value5+"','"+value6+"','"+value7+"','"+value8+"','"+value9+"','"+value10+"','"+value11+"','"+value12+"','"+value13+"','"+value14+"','"+value15+"')";
                String q = "insert into [sheet1$] values ('"+value1+"','"+value2+"','"+value3+"','"+value4+"','"+value5+"','"+value6+"','"+value7+"','"+value8+"','"+value9+"','"+value10+"','"+value11+"','"+value12+"','"+value13+"','"+value14+"','"+value15+"')"; 
                int ds = st.executeUpdate(q);

                System.out.println("Inserted Sucessfully...!!!");
                System.out.println(ds);

            }catch(Exception e)
            {
                System.out.println(e.getMessage());
            }

            finally{
                try {
                    con.close();
                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }

    } 
    else if(ae.getSource()==newb)
    {
        try{

            t1.setText(null);
            c6.addItem(null);
            t3.setText(null);
            t4.setText(null);
            t5.setText(null);
            c4.addItem(null);
            t7.setText(null);
            t8.setText(null);
            c1.addItem(null);
            c2.addItem(null);
            c5.addItem(null);
            c3.addItem(null); 
            t13.setText(null);
            t14.setText(null);
            t15.setText(null); 

        }catch(Exception e){}

    }
    else if(ae.getSource()==firstb)
    {
        try {
            rs.first( );
            int id_col = rs.getInt("CRN");

            String id = Integer.toString(id_col);
            //int id_col1 = rs.getInt("CR_NUM");
            //String cr= Integer.toString(id_col1);
            String cr =rs.getString("CR_NUM");
            String sow = rs.getString("SOW_N");
            String psm = rs.getString("PSM");
            String lbg = rs.getString("LBG");
            String toc = rs.getString("T_CONTRACT");
            String rm = rs.getString("REMARKS");

            String wks = rs.getString("WORK_ST");

            String cap = rs.getString("APPROVAL");
            String pfm = rs.getString("PLATFORM");
            String cmm = rs.getString("MODEL");

            String std = rs.getString("START_D");
            String etd= rs.getString("END_D");

            int id_col2 = rs.getInt("V_CONTRACT");
            String voc= Integer.toString(id_col2);

            int id_col3 = rs.getInt("CUM_VALUE");
            String cvc = Integer.toString(id_col3);
            t1.setText(id);
            //c6.addItem(cr);
            t3.setText(sow);
            t4.setText(psm);
            t5.setText(lbg);
            //c4.addItem(toc);
            t7.setText(voc);
            t8.setText(rm);
            c1.setSelectedItem(wks);
            c2.setSelectedItem(cap);
            c5.setSelectedItem(pfm);
            c3.setSelectedItem(cmm);
            c4.setSelectedItem(toc);
            c6.setSelectedItem(cr);

            //c1.addItem(wks);
            //c2.addItem(cap);
            //c5.addItem(pfm);
            //c3.addItem(cmm);
            t13.setText(std);
            t14.setText(etd);
            t15.setText(cvc);

            System.out.println(wks);

        }
        catch (SQLException err) {
            JOptionPane.showMessageDialog(sowui.this, err.getMessage());
        }
        try{
        stmt.close();
        }catch(SQLException a) {}
    }

    else if(ae.getSource()==nextb)
    {
        try {
            if ( rs.next( ) ) {
                int id_col = rs.getInt("CRN");

                String id = Integer.toString(id_col);
                //int id_col1 = rs.getInt("CR_NUM");
                //String cr= Integer.toString(id_col1);
                String cr =rs.getString("CR_NUM");
                String sow = rs.getString("SOW_N");
                String psm = rs.getString("PSM");
                String lbg = rs.getString("LBG");
                String toc = rs.getString("T_CONTRACT");
                String rm = rs.getString("REMARKS");

                String wks = rs.getString("WORK_ST");

                String cap = rs.getString("APPROVAL");
                String pfm = rs.getString("PLATFORM");
                String cmm = rs.getString("MODEL");

                String std = rs.getString("START_D");
                String etd= rs.getString("END_D");

                int id_col2 = rs.getInt("V_CONTRACT");
                String voc= Integer.toString(id_col2);

                int id_col3 = rs.getInt("CUM_VALUE");
                String cvc = Integer.toString(id_col3);
                t1.setText(id);
                //c6.addItem(cr);
                t3.setText(sow);
                t4.setText(psm);
                t5.setText(lbg);
                //c4.addItem(toc);
                t7.setText(voc);
                t8.setText(rm);
                //c1.addItem(wks);
                //c2.addItem(cap);
                //c5.addItem(pfm);
                //c3.addItem(cmm);
                c1.setSelectedItem(wks);
                c2.setSelectedItem(cap);
                c5.setSelectedItem(pfm);
                c3.setSelectedItem(cmm);
                c4.setSelectedItem(toc);
                c6.setSelectedItem(cr);
                t13.setText(std);
                t14.setText(etd);
                t15.setText(cvc);

            }

            else {
                rs.previous( );
                JOptionPane.showMessageDialog(sowui.this, "End of File");
            }
        }
        catch (SQLException err) {
            JOptionPane.showMessageDialog(sowui.this, err.getMessage());
        }try{
        stmt.close();
        }catch(SQLException a) {}
    }
    else if(ae.getSource()==prev)
    {
        try {
            if ( rs.previous( ) ) {
                int id_col = rs.getInt("CRN");

                String id = Integer.toString(id_col);
                //int id_col1 = rs.getInt("CR_NUM");
                //String cr= Integer.toString(id_col1);
                String cr =rs.getString("CR_NUM");
                String sow = rs.getString("SOW_N");
                String psm = rs.getString("PSM");
                String lbg = rs.getString("LBG");
                String toc = rs.getString("T_CONTRACT");
                String rm = rs.getString("REMARKS");

                String wks = rs.getString("WORK_ST");

                String cap = rs.getString("APPROVAL");
                String pfm = rs.getString("PLATFORM");
                String cmm = rs.getString("MODEL");

                String std = rs.getString("START_D");
                String etd= rs.getString("END_D");

                int id_col2 = rs.getInt("V_CONTRACT");
                String voc= Integer.toString(id_col2);

                int id_col3 = rs.getInt("CUM_VALUE");
                String cvc = Integer.toString(id_col3);
                t1.setText(id);
                //c6.addItem(cr);
                t3.setText(sow);
                t4.setText(psm);
                t5.setText(lbg);
                //c4.addItem(toc);
                t7.setText(voc);
                t8.setText(rm);
                //c1.addItem(wks);
                //c2.addItem(cap);
                //c5.addItem(pfm);
                //c3.addItem(cmm);
                c1.setSelectedItem(wks);
                c2.setSelectedItem(cap);
                c5.setSelectedItem(pfm);
                c3.setSelectedItem(cmm);
                c4.setSelectedItem(toc);
                c6.setSelectedItem(cr);
                t13.setText(std);
                t14.setText(etd);
                t15.setText(cvc);

            }

            else {
                rs.next( );
                JOptionPane.showMessageDialog(sowui.this, "Top of File");
            }
        }
        catch (SQLException err) {
            JOptionPane.showMessageDialog(sowui.this, err.getMessage());
        }try{
        stmt.close();
        }catch(SQLException a) {}
    }
    if(ae.getSource()==lastb)
    {
        try {
            rs.last( ); 
            int id_col = rs.getInt("CRN");

            String id = Integer.toString(id_col);
            //int id_col1 = rs.getInt("CR_NUM");
            //String cr= Integer.toString(id_col1);
            String cr =rs.getString("CR_NUM");
            String sow = rs.getString("SOW_N");
            String psm = rs.getString("PSM");
            String lbg = rs.getString("LBG");
            String toc = rs.getString("T_CONTRACT");
            String rm = rs.getString("REMARKS");

            String wks = rs.getString("WORK_ST");

            String cap = rs.getString("APPROVAL");
            String pfm = rs.getString("PLATFORM");
            String cmm = rs.getString("MODEL");

            String std = rs.getString("START_D");
            String etd= rs.getString("END_D");

            int id_col2 = rs.getInt("V_CONTRACT");
            String voc= Integer.toString(id_col2);

            int id_col3 = rs.getInt("CUM_VALUE");
            String cvc = Integer.toString(id_col3);
            t1.setText(id);
            //c6.addItem(cr);
            t3.setText(sow);
            t4.setText(psm);
            t5.setText(lbg);
            //c4.addItem(toc);
            t7.setText(voc);
            t8.setText(rm);
            //c1.addItem(wks);
            //c2.addItem(cap);
            //c5.addItem(pfm);
            //c3.addItem(cmm);
            c1.setSelectedItem(wks);
            c2.setSelectedItem(cap);
            c5.setSelectedItem(pfm);
            c3.setSelectedItem(cmm);
            c4.setSelectedItem(toc);
            c6.setSelectedItem(cr);
            t13.setText(std);
            t14.setText(etd);
            t15.setText(cvc);

        }
        catch (SQLException err) {
            JOptionPane.showMessageDialog(sowui.this, err.getMessage());
        }try{
        stmt.close();
        }catch(SQLException a) {}
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:10:58.347

在评论中已经设置的内容旁边，还有一些关于您发布的代码的其他评论：

*   摆脱`setLayout( null )`呼叫和所有相关呼叫（`setBounds`等）。[学习改用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)。
*   Swing 组件应该在 Event Dispatch Thread 上创建/访问/修改。该线程负责 UI，不应用于长时间运行的任务（如处理`ResultSet`实例）。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程
*   验证 a 的输入`JTextComponent`（在您的代码中调用变量`t1`和`t3`）不应使用 a `KeyListener`。[使用 a`DocumentFilter`代替](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html)，或者在文本字段的情况下[考虑使用 a`JFormattedTextField`](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)。例如，在您的文本字段中拖放输入将完全绕过您的`KeyListener`.
*   请注意，您在侦听器中接收的大多数事件都有一个`getSource()`方法，该方法允许检索发生事件的源组件。这可以避免大量代码重复，因为您有多个侦听器执行完全相同的操作。它们唯一不同的部分是源组件，它可以从事件中检索。另一种选择是从匿名类切换到内部类，并在构造函数中传递您需要的信息。
*   简单地围绕随机的代码片段，`try{} catch ( Exception e )`然后不做任何错误处理，这会在未来出现奇怪的错误。要么你正确处理`Exception`，要么你把它扔得更远。
*   空`catch`块更糟。现在你默默地忽略了这个错误，代码继续前进，就像什么也没发生一样。谁知道你的程序会在什么状态下结束

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:18:06.923

Resultset is bound to your statement and your connection. You should read the contents of your ResultSet while you still have a connection to the database open, then close the resultset, statement, and after that the connection.

Note that you don't have to read the results to UI - you can read them into some internal collection, too, and later update the UI if needed. Just get them out of the result set while you still have the references to mentioned objects in place.

# twitter-bootstrap - 超过父列的列数可以吗？

> ID：12246694
> 
> 赞同：1
> 
> 时间：2012-09-03T11:12:05.177
> 
> 标签：twitter-bootstrap

我有以下布局，使用 Twitter Bootstrap：

```
<div class="row">
    <div class="span8">
        <div class="row">
            <div class="span2"><img src="..."></div>
            <div class="span2"><img src="..."></div>
            <div class="span2"><img src="..."></div>
            <div class="span2"><img src="..."></div>
        </div>
    </div>

    <div class="span4">
        ...
    </div>
</div> 
```

当我需要显示超过 4 个`<img>`时，我可以创建另一个`row`. 但是我注意到，当我在 4`span2`内使用超过 4 个时`span8`，即使没有创建另一个`row`，它也会正确地将它们分成几行，呈现与我手动添加额外`row`的 s 相同的效果。

这是记录在案的做法，还是只是偶然工作，并且在某些情况下/使用某些浏览器可能有缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:38:40.387

没关系，并且已记录在案。查看文档的[缩略图部分](http://twitter.github.com/bootstrap/components.html#thumbnails)，您将看到这种做法的示例。
顺便说一句，如果您要显示一组图像，您应该使用`thumbnails`.

编辑：尽管如此，在`row-fluid`. 所以现在只支持静态内容。

# android - GridView 单元格被推到左边

> ID：12246696
> 
> 赞同：1
> 
> 时间：2012-09-03T11:12:22.577
> 
> 标签：android, android-gridview

如何动态设置GridView中单元格的高度，如何刷新？现在，我有我的`Adapter`工具`OnGlobalLayoutListener`，在调用时获取我的 GridView 的尺寸`onGlobalLayout`，然后保存尺寸。在`getView()`，我打电话给`cell.setLayoutParams(mGridViewWidth / 3, mGridViewWidth / 3);`我的问题是我的整个`GridView`被推到左边太多，所以只有最后一列的一部分是可见的。调用`notifyDataChanged()`似乎有效，但看起来效率低下。我试过了`mGridView.requestLayout()`，`mGridView.invalidateViews()`但那些没有用。

我确认我`GridView`的占据了整个屏幕。这是定位怪异的元素。我将`GridView's`背景颜色设置为`#0000ff`，屏幕为蓝色。元素有问题。我回收有错`LayoutParams`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:01:23.677

显然 using`android:stretchMode="none"`会破坏`GridView`. 现在我删除了那段代码，它可以工作了。

# php - 判断文件是否已经上传，并相应调整sql

> ID：12246699
> 
> 赞同：0
> 
> 时间：2012-09-03T11:12:33.643
> 
> 标签：php, sql

我正在尝试编辑个人资料并且图像有问题。

创建配置文件时，我可以成功上传图像并在查看配置文件时看到图像。

但是，当我去编辑配置文件时，如果我不更改名称、年龄等值，那么这些值会以未更改/原始值写回数据库。

不幸的是，如果图像没有改变，当点击编辑按钮时，它会被空白值覆盖。

我所追求的是一种说法：

如果 $FILES[] 为空 {

不更新图像详细信息

}

别的

{

更新图像详细信息

}

我当前的代码如下所示：

```
 // EDIT A PLAYER PROFILE

    if (isset($_POST['action']) and $_POST['action'] == 'Edit' )
    {
        include $_SERVER['DOCUMENT_ROOT'] . '/includes/db.inc.php';
        try
        {
            // $sql = 'SELECT id, name, age, position, height, weight, satscore, gpa FROM player WHERE id = :id';
            $sql = 'SELECT player.id, player.name AS name, age, position, height, weight, previousclubs.id AS previousclubsid, GROUP_CONCAT(distinct previousclubs.name) previousclubs, 
                satscore, gpa, GROUP_CONCAT(distinct link) link, email, filename, mimetype, filedata
                FROM player INNER JOIN playerpreviousclubs
                    ON player.id = playerid
                INNER JOIN previousclubs
                    ON previousclubid = previousclubs.id
                INNER JOIN links
                    ON links.playerid = player.id
                WHERE player.id = :id';
            $s = $pdo->prepare($sql);
            $s->bindValue(':id', $_POST['id']);
            $s->execute();
        }
        catch (PDOException $e)
        {
            $error = 'Error fetching profile details.' . $e->getMessage();
            include 'error.html.php';
            exit();
        }

        $row = $s->fetch();
        $pageTitle = 'Edit Profile';
        $action = 'editform';
        $name = $row['name'];
        $age = $row['age']; 
        $position = $row['position'];
        $height = $row['height'];
        $weight = $row['weight'];
        $satscore = $row['satscore'];
        $gpa = $row['gpa'];
        $previousclubs = $row['previousclubs'];
        $previousclubsid = $row['previousclubsid'];
        $link = $row['link'];
        $email = $row['email'];
        $filename = $row['filename'];
        $mimetype = $row['mimetype'];
        $filedata = $row['filedata'];*/
        $id = $row['id'];
        $button = 'Update Profile';

        include 'addplayerprofile.html.php';
        exit();
    }

    if (isset($_GET['editform']))
    {
        include $_SERVER['DOCUMENT_ROOT'] . '/includes/db.inc.php';

        // UPDATE MAIN PLAYER PROFILE DETAILS
        try
        {
            $sql = "UPDATE player SET
                name = :name,
                age = :age,
                position = :position,
                height = :height,
                weight = :weight,
                satscore = :satscore,
                gpa = :gpa,
                email = :email,
                    filename = :filename,
                    mimetype = :mimetype,
                    filedata = :filedata
                WHERE id = :id";
            $s = $pdo->prepare($sql);
            $s->bindValue(':id', $_POST['id']);
            $s->bindValue(':name', $_POST['name']);
            $s->bindValue(':age', $_POST['age']);
            $s->bindValue(':position', $_POST['position']);
            $s->bindValue(':height', $_POST['height']);
            $s->bindValue(':weight', $_POST['weight']);
            $s->bindValue(':satscore', $_POST['satscore']);
            $s->bindValue(':gpa', $_POST['gpa']);
            $s->bindValue(':email', $_POST['email']);
                    $s->bindValue(':filename',  $uploadname);
                    $s->bindValue(':mimetype',   $uploadtype);
                    $s->bindValue(':filedata',   $uploaddata);
            $s->execute();
        }
        catch (PDOException $e)
        {
            $error = 'Error editing player profile main details.' . $e->getMessage();
            include 'error.html.php';
            exit();
        } 
```

我以为我可以做这样的事情，但它不起作用：

```
if (isset($_FILES['upload']) && $_FILES['upload'] <> '') 
{
$s->bindValue(':filename',  $uploadname);
$s->bindValue(':mimetype',   $uploadtype);
$s->bindValue(':filedata',   $uploaddata);
}
else
{
$s->bindValue(':filename',  $filename);
$s->bindValue(':mimetype',   $mimetype);
$s->bindValue(':filedata',   $filedata); 
} 
```

感谢所有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:16:20.993

```
if (isset($_FILES['upload']['error']) && $_FILES['upload']['error'] == UPLOAD_ERR_OK) {
    // a file has been uploaded
} 
```

然后查看[上传的安全威胁](https://stackoverflow.com/questions/11061355/security-threats-with-uploads/11061577#11061577)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:17:12.803

您的代码的主要算法

```
if (isset($_POST['action']) and $_POST['action'] == 'Edit')
{ 

    if (!empty($_FILES) and is_uploaded_file($_FILES['upload']['tmp_name'])) {
       $sql = "UPDATE player SET
                name = :name,
                age = :age,
                position = :position,
                height = :height,
                weight = :weight,
                satscore = :satscore,
                gpa = :gpa,
                email = :email,
                    filename = :filename,
                    mimetype = :mimetype,
                    filedata = :filedata
                WHERE id = :id";
    } else {
        $sql = "UPDATE player SET
                name = :name,
                age = :age,
                position = :position,
                height = :height,
                weight = :weight,
                satscore = :satscore,
                gpa = :gpa,
                email = :email
                WHERE id = :id";
    }

    try {
        //skipped

        if (!empty($_FILES) and is_uploaded_file($_FILES['upload']['tmp_name'])) {
            $s->bindValue(':filename',  $uploadname);
            $s->bindValue(':mimetype',   $uploadtype);
            $s->bindValue(':filedata',   $uploaddata);
        }

    } catch(PDOException $e) {
        //skipped
    }
} 
```

[http://www.php.net/manual/en/function.is-uploaded-file.php](http://www.php.net/manual/en/function.is-uploaded-file.php)

# asp.net-mvc - MVC 表单提交成功

> ID：12246702
> 
> 赞同：0
> 
> 时间：2012-09-03T11:12:52.140
> 
> 标签：asp.net-mvc, webforms

我的 MVC 应用程序中有一个`Html.BeginForm`。当用户单击提交按钮时，如果一切正常，我希望将用户发送到特定视图。谁能告诉我如何让用户转到已经定义的视图（以及将用户引导到当前控制器之外的视图的解决方案）。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:25:56.853

您可以使用 RedirectToAction() 将用户重定向到其他操作和控制器。

之后，您验证模型状态，调用

```
Return RedirectToAction("Index","Home") 
```

重定向到“主页”控制器和“索引”操作。您还可以传递其他参数。

# c# - 创建 OperationAbortedException 的实例

> ID：12246711
> 
> 赞同：2
> 
> 时间：2012-09-03T11:13:14.753
> 
> 标签：c#, .net, c#-4.0, exception

如何创建 OperationAbortedException？此代码不起作用：

```
var ex = new OperationAbortedException("Cannot update event comment"); 
```

错误：无法访问私有构造函数“OperationAbortedException”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T11:17:12.460

[`System.Data.OperationAbortException`](http://msdn.microsoft.com/en-us/library/system.data.operationabortedexception.aspx)-class（我假设您的意思是这个，因为您在问题中没有完全限定它）。没有公共构造函数并且是`sealed`. 这些强烈暗示框架设计者不希望您出于自己的目的使用该异常。大概是因为如果你这样做了，框架的一些内部工作会变得混乱。

您应该为您的目的使用不同的例外。从您传递的消息文本中，您会想到以下现有异常：

*   [无效操作异常](http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx)
*   [不支持异常](http://msdn.microsoft.com/en-us/library/system.notsupportedexception.aspx)

从 .NET 框架中选择现有异常时，请确保不要仅通过类的名称来选择它。确保您阅读了相应的 MSDN 页面以了解异常的（原始）意图。相应的文档总是以“抛出的异常......”开头。如果您发现该文本符合您的意图，请重用框架中的异常（或从它派生以在最终捕获异常时进行更好的控制）。

或者，如果必须，创建您自己的异常类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:17:49.973

If you are talking about the [`System.Data.OperationAbortedException`](http://msdn.microsoft.com/en-us/library/system.data.operationabortedexception%28v=vs.100%29.aspx) then no, you can not construct an instance directly, there are no public consrtuctors.

If you really wanted to, you could use reflection with the method described in [this answer](https://stackoverflow.com/questions/4162776/accessing-a-private-constructor-from-outside-the-class-in-c-sharp), but I reccomend that you do not. It would be a corruption of the framework's design.

* * *

Here is the code you could use but, **please don't**.

```
var ctor = typeof(OperationAbortException).GetConstructor(
    BindingFlags.NonPublic|BindingFlags.Instance,
    null, 
    new Type[0], 
    null);
var instance = (OperationAbortException)ctor.Invoke(null); 
```

You'd have to work out which private constructor to use, if there is more than one, and which properties should be set to what. There is no garauntee that this behaviour would persist in later framework versions.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:16:57.610

这是不可能的。OperationAbortedException 有一个私有构造函数和一个调用该构造函数的内部静态方法。无法从另一个程序集创建新的 OperationAbortedException。

# sql-server - 索引视图：Union All / Full Join 备选方案

> ID：12246714
> 
> 赞同：3
> 
> 时间：2012-09-03T11:13:22.913
> 
> 标签：sql-server, sql-server-2008-r2

我有两个表，它们都有一个“名称”列。这些表彼此不相关。我想在这两列中强制执行唯一性。

我一直在尝试从两列中创建一个索引视图，但发现我不能使用 union all 或 full join 来获取完整的名称列表。我觉得我错过了一个明显的替代方案，它可以让我添加唯一索引。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T11:37:17.843

假设您的两个基表都对“名称”有唯一约束，那么违反唯一性的唯一方法是两个表中的名称相同。

即，您希望针对它们的联接返回零行。因此，您可以将该连接的结果与具有 2 行的表交叉连接并创建一个唯一索引。

```
CREATE TABLE dbo.Two
  (
     N INT PRIMARY KEY
  )

INSERT INTO dbo.Two
VALUES      (1),
            (2)

GO

CREATE VIEW dbo.UniqueNames
WITH SCHEMABINDING
AS
  SELECT T1.Name
  FROM   dbo.T1
         INNER JOIN dbo.T2
           ON T1.Name = T2.Name
         CROSS JOIN dbo.Two

GO

CREATE UNIQUE CLUSTERED INDEX IX
  ON dbo.UniqueNames(Name) 
```

# jquery - 如何使用jquery计算gridview内下拉列表中的选定选项

> ID：12246718
> 
> 赞同：1
> 
> 时间：2012-09-03T11:13:41.180
> 
> 标签：jquery, asp.net, gridview, drop-down-menu

我的gridview中有几个下拉菜单，每个都有2个相同的选项，我想从所有这些下拉菜单中计算选择option1的次数（selectedIndex = 1）以及选择第二个选项的次数（selectedIndex = 2）使用jQuery。

```
<asp:GridView ID="gd1" runat="server" AutoGenerateColumns="False" 
        onrowdatabound="gd1_RowDataBound" >
        <Columns>
                   <asp:BoundField DataField="id"   Visible="False"/>
                   <asp:BoundField DataField="fullName" Visible="True"  
        HeaderText="Full Name"/>
                      <asp:TemplateField >
                          <ItemTemplate>
 <asp:DropDownList ID="ddl1" runat="server" ></asp:DropDownList>
                        </ItemTemplate>
                      </asp:TemplateField>

                      <asp:TemplateField >
                          <ItemTemplate>
 <asp:DropDownList ID="ddl2" runat="server"></asp:DropDownList>
                        </ItemTemplate>
                      </asp:TemplateField>

                      <asp:TemplateField >
                          <ItemTemplate>
 <asp:DropDownList ID="ddl3" runat="server"></asp:DropDownList>
                        </ItemTemplate>
                      </asp:TemplateField>

                      <asp:TemplateField>
                          <HeaderTemplate>
          <asp:Label ID="Count1" runat="server" Text="First Count"></asp:Label>
                          </HeaderTemplate>
                          <ItemTemplate>
          <asp:Label ID="CountSelected1" runat="server" ></asp:Label>
                          </ItemTemplate>
                      </asp:TemplateField>

                      <asp:TemplateField>
                          <HeaderTemplate>
       <asp:Label ID="Count2" runat="server" Text="Second Count"></asp:Label>
                          </HeaderTemplate>
                          <ItemTemplate>
           <asp:Label ID="CountSelected2" runat="server" ></asp:Label>
                          </ItemTemplate>
                      </asp:TemplateField>
       </Columns>

</asp:GridView> 
```

在最后 2 列中，我想显示 option1 和 option2 的选择总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:33:03.707

**第一种选择：** 您可以声明两个全局变量

```
var first=0;
var second=0; 
```

然后执行以下操作：

```
$(function(){
    $("#selectBox").change(function(){
        switch($(this).val())
        {
            case "0": first++;
                      break;
 case "1": second++;
                      break;
        }
    });
}); 
```

此函数是为复选框编写的：

```
<select id="selectBox">
            <option value="0" id="first">FirstOption</option>
            <option value="1" id="second">SecondOption</option>
</select> 
```

第一个选项不是很好，但快速的解决方案。

**第二种选择：**

您可以创建可以计算选择的 jQuery 小部件，然后使用此小部件包装您的复选框。这是小部件的示例（我从某人的博客中复制了它，但丢失了获取源代码的链接，希望我的示例对您有用）

```
<script type="text/javascript">
    var Green = {
        // Set up the widget
        _create: function () {
        },
        _init: function () {
            this.setLevel(this.getLevel());
        },
        getLevel: function () { return this.options.level; },
        setLevel: function (x) {
            var greenLevels = this.options.greenLevels;
            var level = Math.floor(Math.min(greenLevels.length - 1, Math.max(0, x)));
            this.options.level = level;
            this.element.css({ background: greenLevels[level] });
        },
        options: {
            level: 5,
            greenLevels: ['#000', '#010', '#020', '#030', '#040', '#050', '#060', '#070', '#080', '#090', '#0a0', '#0b0', '#0c0', '#0d0', '#0e0', '#0f0', '#fff']
        },
        darker: function () {
            this.setLevel(this.getLevel() - 1);
        },
        lighter: function () {
            this.setLevel(this.getLevel() + 1);
        },
        off: function () {
            debugger;
            this.element.css({ background: 'none' });
            this.destroy();
        },
        _setOptions: function () {
            $.Widget.prototype._setOptions.apply(this, arguments);
            this._refresh();
        }
    };

    $(function () {
        (function ($, undefined) {
            $.widget('ui.green', Green);
        })(jQuery);
    });

    function on() {
        $('.targetDiv').green(
            { level: 8,
                greenLevels: ['#000', '#00f', '#088', '#0f0', '#880', '#f00', '#808', '#fff']
            });
    }

</script>

<p class="targetDiv">
    This is a test div text.</p>
<input type="button" value="On" onclick="return on()" />
<input type="button" value="Lighter" onclick="$('.targetDiv').green('lighter');" />
<input type="button" value="Darker" onclick=" $('.targetDiv').green('darker');" />
<input type="button" value="Off" onclick=" $('.targetDiv').green('off');" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:52:45.750

使用 RowDataBound 事件在下拉列表的 Onchange 事件上声明 Javascript 函数如下...

```
protected void grd_RowDataBound(object sender,GridViewRowEventArgs e)                     
{                         
  if (e.Row.RowType == DataControlRowType.DataRow)
  {                           
    DropdownList drpLst = ((DropdownList)e.Row.FindControl("ddl1"));
    Label lblCount2= (Label)e.Row.FindControl("Count2");

    drpLst.Attributes["onchange"]="calculate(this,'"+lblCount2.ClientID+"');"                   

  }   
} 
```

**Javascript：**

```
var count=0;//This should be Global
function calculate(drpDownList,labelId) 
{
   if(drpDownList.selectedIndex==0)
     {
       count=count+1;
     }
  labelId.innerHTML=count;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:39:43.993

我解决了我的问题我的解决方案[在这里](https://forum.jquery.com/topic/how-to-calculate-selected-options-in-dropdowns-inside-gridview-using-jquery-4-9-2012)

最终有效的代码：

```
var collection = $('select.ddlJ');

for (var element in collection)
$(element).change(function(){})

 $(function() {
    $('select.ddlJ').change(function(e) {
        $(this).parent().parent().find('td:last').prev().find('span').html( 
            $(this).parent().parent().find( 'select.ddlJ' ).filter(function() {
                return $.trim($(this).val()) == 'm';
            }).length
         );
        $(this).parent().parent().find('td:last span').html( 
            $(this).parent().parent().find( 'select.ddlJ' ).filter(function() {
                return $.trim($(this).val()) == 'n';
            }).length
         );
    });
}); 
```

# mysql - 尝试通过 ssh 使用 phpmyadmin 连接到远程主机 mysql

> ID：12246719
> 
> 赞同：1
> 
> 时间：2012-09-03T11:13:51.513
> 
> 标签：mysql, ssh, phpmyadmin

我正在尝试通过 ssh 使用 phpmyadmin 从 localhost（CentOS）连接到远程主机（CentOS）mysql 数据库。

在本地 config.inc.php 我添加：

```
$i++;
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['port'] = '3307';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['auth_type'] = 'http';
$cfg['Servers'][$i]['AllowNoPassword'] = FALSE; 
```

接下来我建立了隧道`ssh -Ng -L 3307:127.0.0.1:3306 root@xx.xx.xx.xx` 它可以通过命令行正常工作：

```
mysql -P 3307 -h localhost -u root -p dbname 
```

但是当我尝试访问时`http://localhost:3307/phpmyadmin/` 它说一些乱码：“5.5.20 J��� 5.5.20�p��#p-.<'J}�ÿ÷�€����������[ 0{=^@fa2tq^�mysql_native_password�!��ÿ„#08S01数据包乱序”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:17:09.807

这是因为端口上没有运行 Web 服务器`3307`。您需要访问 phpmyadmin 的正确 URL，这可能是`http://localhost/phpmyadmin/`从*那里*选择要连接的正确服务器。

# c# - asp.net 中的进度条

> ID：12246723
> 
> 赞同：1
> 
> 时间：2012-09-03T11:14:15.530
> 
> 标签：c#, asp.net, progress-bar

我想在表单上添加进度条。我有一个向几个用户发送邀请电子邮件的表格。那么我怎样才能让进度条显示发送电子邮件的过程呢？

**我在.aspx**文件中添加以下代码

```
<asp:UpdateProgress ID="UpdateProgress" runat="server">
 <ProgressTemplate>
 <asp:Image ID="Image1" ImageUrl="~/ProgressImage/ajax-loader.gif" AlternateText="Processing" runat="server" />
 </ProgressTemplate>
</asp:UpdateProgress> 
```

这种方法正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:19:01.860

对我来说看起来不错...您在这个 aspx 页面上也有一个**scriptManager**和一个**updatePanel吗？**请参阅此*演示代码。*

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Button ID="btnSendMail" runat="server" Text="Send Mail" OnClick="btnSendMail_Click" />
    </ContentTemplate>
</asp:UpdatePanel>
<asp:UpdateProgress ID="UpdateProgress1" runat="server">
    <ProgressTemplate>
        Sending Mail
    </ProgressTemplate>
</asp:UpdateProgress> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:18:35.643

使用推送技术：我是这样做的：Class with message

```
 public class Message
    {
        /// <summary>
        /// The name who will receive this message.
        /// </summary>
        public string RecipientName { get; set; }

        /// <summary>
        /// The message content.
        /// </summary>
        public string MessageContent { get; set; }
    } 
```

代表客户的类：

```
public class Client
    {
        private ManualResetEvent messageEvent = new ManualResetEvent(false);
        private Queue<Message> messageQueue = new Queue<Message>();

        /// <summary>
        /// This method is called by a sender to send a message to this client.
        /// </summary>
        /// <param name="message">the new message</param>
        public void EnqueueMessage(Message message)
        {
            lock (messageQueue)
            {
                messageQueue.Enqueue(message);

                // Set a new message event.
                messageEvent.Set();
            }
        }

        /// <summary>
        /// This method is called by the client to receive messages from the message queue.
        /// If no message, it will wait until a new message is inserted.
        /// </summary>
        /// <returns>the unread message</returns>
        public Message DequeueMessage()
        {
            // Wait until a new message.
            messageEvent.WaitOne();

            lock (messageQueue)
            {
                if (messageQueue.Count == 1)
                {
                    messageEvent.Reset();
                }
                return messageQueue.Dequeue();
            }
        }
    } 
```

向客户端发送消息的类：

```
public class ClientAdapter
    {
        /// <summary>
        /// The recipient list.
        /// </summary>
        private Dictionary<string, Client> recipients = new Dictionary<string,Client>();

        /// <summary>
        /// Send a message to a particular recipient.
        /// </summary>
        public void SendMessage(Message message)
        {
            if (recipients.ContainsKey(message.RecipientName))
            {
                Client client = recipients[message.RecipientName];

                client.EnqueueMessage(message);
            }
        }

        /// <summary>
        /// Called by a individual recipient to wait and receive a message.
        /// </summary>
        /// <returns>The message content</returns>
        public string GetMessage(string userName)
        {
            string messageContent = string.Empty;

            if (recipients.ContainsKey(userName))
            {
                Client client = recipients[userName];

                messageContent = client.DequeueMessage().MessageContent;
            }

            return messageContent;
        }

        /// <summary>
        /// Join a user to the recipient list.
        /// </summary>
        public void Join(string userName)
        {
            recipients[userName] = new Client();
        }

        /// <summary>
        /// Singleton pattern.
        /// This pattern will ensure there is only one instance of this class in the system.
        /// </summary>
        public static ClientAdapter Instance = new ClientAdapter();
        private ClientAdapter() { }
    } 
```

发送消息：

```
 Message message = new Message
                                      {
                                          RecipientName = tbRecipientName.Text.Trim(),
                                          MessageContent = tbMessageContent.Text.Trim()
                                      };

                if (!string.IsNullOrWhiteSpace(message.RecipientName) && !string.IsNullOrEmpty(message.MessageContent))
                {
                    // Call the client adapter to send the message to the particular recipient instantly.
                    ClientAdapter.Instance.SendMessage(message);
} 
```

接收消息（这是在测试页面中编写的 JavaScript 函数。它们在 ASPX 页面上呈现消息的内容。在这里你应该实现你的逻辑）：

```
// This method will persist a http request and wait for messages.
        function waitEvent() {

            CSASPNETReverseAJAX.Dispatcher.WaitMessage("<%= Session["userName"] %>", 
            function (result) {

                displayMessage(result);

                // Keep looping.
                setTimeout(waitEvent, 0);
            }, function () {

                // Keep looping.
                setTimeout(waitEvent, 0);
            });
        }

        // Append a message content to the result panel.
        function displayMessage(message) {
            var panel = document.getElementById("<%= lbMessages.ClientID %>");

            panel.innerHTML += currentTime() + ": " + message + "<br />";
        }

        // Return a current time string.
        function currentTime() {
            var currentDate = new Date();
            return currentDate.getHours() + ":" + currentDate.getMinutes() + ":" + currentDate.getSeconds();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:23:39.440

asp:UpdateProgress 是来自 ASP .NET 的 AJAX 扩展，它仅与 asp:UpdatePanel 相关联工作，并且在来自此面板的事件上触发。它有一个名为 AssociatedUpdatePanelID 的属性，您必须在其中写入更新面板的 id。希望这可以帮助。

# ios - UITableViewCell 神秘地改变高度

> ID：12246726
> 
> 赞同：2
> 
> 时间：2012-09-03T11:14:29.360
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, interface-builder

我有一个带有`UITableView`（样式：分组）的 xib，还有一些`UITableViewCells`在 xib 上连接为插座集合。

[我以与Table View Programming Guide (The Technique for Static Row Content)](http://goo.gl/ZgRiK)`tableView:cellForRowAtIndexPath:`中描述的方式非常相似的方式返回这些单元格。

然后我有另一个`IBOutlet`高度不同的单元格，以及一个用于切换标志并始终重新加载同一行的按钮（`reloadRowsAtIndexPaths:withRowAnimation:`）。

`cellForRowAtIndexPath`对于该确切行，返回出口集合中的一个正常单元格或该特殊单元格（取决于标志）。

`heightForRowAtIndexPath`还获取相应单元格的高度并使用相同的“逻辑”返回它，我已经将其 NSLogged 至死；

现在发生的情况是，每次我按下按钮时，第一行和最后一行的高度都会增加一个像素！任何人都可以想到发生了什么？

我上传了一个示例项目：[http ://www.mediafire.com/?sc22v0c6w11b4l6](http://www.mediafire.com/?sc22v0c6w11b4l6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:43:50.247

更换：

```
return (UIView *)[self.cells objectAtIndex:indexPath.row] bounds].size.height; 
```

经过

```
return 30; 
```

解决您的问题。

我认为您的较大单元格的重绘会修改整个表格的大小，并且由于某种原因将第一个和最后一个单元格重新计算为更大的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:50:27.113

仅当您的 tableViewStyle 被分组时才会发生此问题...因此您可以使用普通样式或返回硬编码值

```
if (indexPath.row == kBigCellRowNum && self.showTheBigCell){

    return self.bigCell.frame.size.height;

}

else{

    return 44;

} 
```

# javascript - 在 underscore.js 的列表中显示所有项目（使用 Parse.com）

> ID：12246734
> 
> 赞同：0
> 
> 时间：2012-09-03T11:14:51.807
> 
> 标签：javascript, backbone.js, underscore.js, parse-platform

我正在 Parse.com (javascriptSDK) 中构建一个应用程序，并且对如何显示我从数据库中提取的项目列表感到困惑。

从 Parse 中提取项目时，它们采用以下格式：

```
{
    "results":[
        {
            "name": "End of summer", 
            "owner": {
                "__type": "Pointer", 
                "className": "_User", 
                "objectId": "D4ttcoN6ex"
            }, 
            "createdAt": "2012-09-03T09:21:50.144Z", 
            "updatedAt": "2012-09-03T09:21:50.144Z", 
            "objectId": "Xp8Mz24fI3"
        }, {
            "name": "My summer holidays", 
            "owner": {
                "__type": "Pointer", 
                "className": "_User", 
                "objectId": "D4ttcoN6ex"
            }, 
            "createdAt": "2012-09-03T09:17:15.515Z", 
            "updatedAt": "2012-09-03T09:17:15.515Z", 
            "objectId": "hjqVThNgXu"
        }, {
            "name": "My summer", 
            "owner": {
                "__type": "Pointer", 
                "className": "_User", 
                "objectId": "D4ttcoN6ex"
            }, 
            "createdAt": "2012-09-03T09:17:31.139Z", 
            "updatedAt": "2012-09-03T09:17:31.139Z", 
            "objectId": "0UEHHXtyBG"
        }, {
            "name": "First day of school", 
            "owner": {
                "__type": "Pointer", 
                "className": "_User", 
                "objectId": "D4ttcoN6ex"
            }, 
            "createdAt": "2012-09-03T09:21:37.315Z", 
            "updatedAt": "2012-09-03T09:21:37.315Z", 
            "objectId": "W1OKKwLXmz"
        }
    ]
} 
```

所以，基本上，一个文件夹列表，每个文件夹都有一个名称、所有者、createdAt、updatedAt 和一个 objectId。

我想在列表中显示这些，使用 underscore.js 模板。

使用下划线文档，我想出了这个：

```
<ul>
    <% _.each( folderList["results"], function( listItem ) { %>  
        <li><%= listItem["name"] %></li>
    <% }); %>
</ul> 
```

（其中 folderList 是上面的数组）。

但这并没有显示任何东西，除了`<ul></ul>`- 没有错误或任何东西。如果我这样做[`_.size(folderList)`](http://underscorejs.org/#size)，它会显示“4”，这是正确的项目数。

我不知道自己在做什么，也找不到关于 Underscore 的任何好的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:29:36.503

我认为您分配 `folderList["results"]`给模板而不是 `folderList`. 您应该检查如何将 folderList 变量分配给compiled_template 函数。

```
compileFolderList=function(folderList){
      var compiled_template=_.template(' <ul><% _.each( folderList["results"], function( listItem ) { %>    <li><%= listItem["name"] %></li><% }); %></ul>'); //Compile template string 

      var html=compiled_template({'folderList':folderList}); // Assign variables that used in the template.
      return html;
}

var folderList={"results":[{"name":"End of summer","owner":{}}]};
$("body").append(compileFolderList(folderList)); 
```

# arrays - 如何使用 postgreSQL 访问数组内部索引？

> ID：12246738
> 
> 赞同：5
> 
> 时间：2012-09-03T11:15:07.310
> 
> 标签：arrays, postgresql, indexing

这是我的（也许对你来说很常见）**未优化的**解决方案：

未优化内部函数的 PG 问题的解决方法：

```
CREATE FUNCTION unnest_with_idx(anyarray)
RETURNS TABLE(idx integer, val anyelement) AS
$$ 
   SELECT generate_series(1,array_upper($1,1)) as idx, unnest($1) as val;
$$ LANGUAGE SQL IMMUTABLE; 
```

测试：

```
SELECT idx,val from unnest_with_idx(array[1,20,3,5]) as t; 
```

但是，正如我所说，*未优化的*. 我不敢相信（！！）PostgreSQL 没有数组的内部索引......？但是在这种情况下，问题是如何直接访问这个索引，在哪里有[类似 GIN 的](https://stackoverflow.com/q/4058731/287948)内部计数器？

NOTE1：上面的解决方案和问题与“[如何为数组的每个元素创建索引？](https://stackoverflow.com/q/10867577/287948) ”不同。也与“[可以 PostgreSQL 索引数组列吗？](https://stackoverflow.com/q/4058731/287948) ”不同，因为该函数是针对独立数组的，而不是针对数组字段的表索引。

* * *

注意2（在回答后编辑）：“数组索引”（更流行的术语）或“数组下标”或“数组计数器”是我们可以在语义路径中使用的术语，以将“内部计数器”、累加器指向下一个数组物品。我看到***没有 PostgreSQL 命令**提供对这个计数器的直接访问*。作为`generate_series()`函数，该`generate_subscripts()`函数是一个**序列生成器**，性能（最好但）几乎相同。另一方面`row_number()`，函数提供了对“行的内部计数器”的直接访问，但它是关于行的，*而不是关于数组*的，不幸的是性能更差。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T14:43:42.300

PostgreSQL*确实*提供了专门的函数来[生成数组下标](http://www.postgresql.org/docs/current/interactive/functions-srf.html#FUNCTIONS-SRF-SUBSCRIPTS)：

```
WITH   x(a) AS ( VALUES ('{1,20,3,5}'::int[]) )
SELECT **generate_subscripts(a, 1)** AS idx
      ,unnest(a) AS val
FROM   x;
```

实际上，它与@Frank 的查询几乎相同，只是没有子查询。
此外，它适用于不以 . 开头的下标`1`。

任何一种解决方案都只适用于*一维*数组！（可以很容易地扩展到多个维度。）

功能：

```
CREATE OR REPLACE FUNCTION unnest_with_idx(anyarray) 
RETURNS TABLE(idx integer, val anyelement) LANGUAGE SQL IMMUTABLE AS
$func$
  SELECT generate_subscripts($1, 1), unnest($1);
$func$; 
```

称呼：

```
SELECT * FROM unnest_with_idx('{1,20,3,5}'::int[]); 
```

还要考虑：

```
SELECT * FROM unnest_with_idx('[4:7]={1,20,3,5}'::int[]); 
```

[有关此相关问题](https://stackoverflow.com/q/12011569/939860)中数组下标的更多信息。

**如果**你真的想要规范化的下标（从 1 开始），我会使用：

```
SELECT generate_series(1, **array_length($1,1)**) ...
```

这几乎就是您已经拥有的查询，只是使用[`array_length()`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)而不是`array_upper()`- 会因非标准下标而失败。

### 表现

我对一个包含 1000 个 int 的数组进行了快速测试，到目前为止所有查询都在这里显示。由于子查询，它们的性能大致相同（~ 3,5 ms） - 除了`row_number()`子查询（~ 7,5 ms） - 正如预期的那样。

## 更新：Postgres 9.4+

除非您使用非标准索引下标进行操作，否则请使用 new**`WITH ORDINALITY`**代替：

*   [带有元素编号的 PostgreSQL unnest()](https://stackoverflow.com/questions/8760419/postgresql-unnest-with-element-number/8767450#8767450)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:27:33.890

[row_number()](http://www.postgresql.org/docs/current/interactive/functions-window.html)有效：

```
SELECT 
    row_number() over(), 
    value
FROM (SELECT unnest(array[1,20,3,5])) a(value); 
```

那么优化后的函数为

```
CREATE OR REPLACE FUNCTION unnest_with_idx(anyarray) 
RETURNS table(idx integer, val anyelement) AS $$ 
  SELECT (row_number() over())::integer as idx, val
  FROM (SELECT unnest($1)) a(val);
$$ LANGUAGE SQL IMMUTABLE; 
```

# javascript - 如何制作一个在现实世界中看起来像镜子的屏幕？

> ID：12246740
> 
> 赞同：-6
> 
> 时间：2012-09-03T11:15:29.790
> 
> 标签：javascript, jquery, html, css, mirror

我的意思是当一个人打开 URL 时，应该能够看到自己。我不需要镜像效果（我们使用 jQuery 反射 js 获得的反射效果）。我不想使用前置摄像头或任何其他摄像头来实现这一点。

非常需要这个方向的任何指针。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T11:19:52.053

Simple enough.

```
mirror.buy();
mirror.place.frontOf = this; 
```

Okay, seriously. You can't make a screen look like a mirror without using a camera. Your absolute best bet would be to make a suitable (black) background on your page that lets the monitor / screen be its glossy self.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:21:21.273

如果您没有该人的图像（通过上传或之前的相机屏幕抓取），您无法神奇地获取它并将其放置在屏幕上。如果您有一个光面屏幕，您可以在屏幕中间添加一个黑色区域以提供最大反射（垫子屏幕不会反射）

# linked-list - 判断两个链表是否相交

> ID：12246741
> 
> 赞同：0
> 
> 时间：2012-09-03T11:15:41.223
> 
> 标签：linked-list

问题是：给定两个链表。找出它们是否相交。

这个问题有很多复杂的解决方案。找到最后一个节点并检查两个列表是否相同有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:04:46.130

我看到的围绕这个问题的大多数讨论都对找出两个列表相交的确切节点更感兴趣。如果您只想知道它们是否相交，比较最后一个节点就足够了。

# javascript - zClip 未在 Google Chrome 上复制值

> ID：12246742
> 
> 赞同：0
> 
> 时间：2012-09-03T11:15:45.347
> 
> 标签：javascript, google-chrome, zclip

这是我的代码。

```
$('a.copy').each(function(){
    var $this = $(this);
    $this.zclip({
        path : 'path/to/ZeroClipboard.swf',
        copy : function(){
            var copyText = $this.prev().val();
            console.debug(copyText);
            return copyText;
       }
    });
 }); 
```

单击按钮后，“ `copyText`”被正确打印出来（通过`console.debug`），但该值似乎没有返回。

问题似乎是“ [iButton](http://www.givainc.com/labs/ibutton_jquery_plugin.htm) ”插件，当我评论该插件时，zclip 工作，但我不知道为什么。有人遇到过这个问题吗？

PS Firefox 工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:09:07.440

这让我困惑了几个小时，我有一个同时使用 iButton 和 ZeroClipboard 的项目，并且遇到了同样的问题。

问题在于 iButton 将 mouseup 事件附加到 $('document') 会干扰其他 mouseup 事件。我没有时间寻找 iButton 组件的完整修复程序，而是在 jquery.ibutton.js Rev: 1.0.03 中搜索以下行

```
$('document').bind("mouseup.iButton_" + id + " touchend.iButton_" + id, function(e) { 
```

并将其替换为

```
$container.bind("mouseup.iButton_" + id + " touchend.iButton_" + id, function(e) { 
```

为我解决了问题，但可能有更好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:24:33.273

```
 $(document).ready(function(){    
 $('a.copy').each(function(){
   $this.zclip({
    path : 'path/to/ZeroClipboard.swf',
    copy : function(){
    var copyText=$(this).prev().val();
    console.debug(copyText);
    return copyText ;   
   }
    });
   });
 }); 
```

首先确保包含 jquery 库和 zclip js 文件

# php - facebook 喜欢从今天开始出现新错误

> ID：12246744
> 
> 赞同：0
> 
> 时间：2012-09-03T11:15:45.237
> 
> 标签：php, facebook

当我点击“赞”时，会出现一个确认按钮，当我在出现的新弹出窗口中点击赞时，我会被重定向到[https://www.facebook.com/plugins/error/like/confirm](https://www.facebook.com/plugins/error/like/confirm)

我有所有元标记，包括 fb:app_id。

直到昨天都是正确的。我从今天开始收到这个错误。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<fb:like href="my url" send="false" layout="button_count" width="30" show_faces="false"></fb:like> 
```

我用 facebook 调试器检查了这个 url，但它很完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:55:12.193

据我所知，这些天似乎在某些国家/地区显示该`like`框存在一些问题。

不要惊慌，因为这个`like`盒子可以从其他国家看到。

刚刚检查了你的网站，它似乎很好。

# svn - 如何在单个 svn diff 命令中获得非连续更改

> ID：12246747
> 
> 赞同：2
> 
> 时间：2012-09-03T11:15:49.117
> 
> 标签：svn

举个例子来说明问题。

我对源文件进行了一些更改，例如：在文件夹中：

```
project/foo/src
project/fun/src
.
. 
```

差异可以被视为：

```
# svn diff -r 2000:2001 <svn url> 
```

然后我在文件夹中对项目的单元测试进行了一些更改：

```
project/foo/tst
project/fun/tst
.
. 
```

这些特定变化的差异可以被视为：

```
# svn diff -r 2001:2002 <svn url> 
```

后来发现源码有一些错误，在project/foo/src中做了一些修改。这些特定变化的差异可以被视为：

```
# svn diff -r 2002:2003 <svn url> 
```

现在，我需要一个 svn diff 命令来单独查看源代码中的更改（不包括单元测试更改）。

我找不到单个命令来查看非连续更改（即 2000-2001 和 2002-2003）。这是否可能（注意：我知道使用 2 个单独的 diff 命令是可能的，我正在尝试找出是否可以使用单个命令）。

否则，是否可以在命令中的 svn url 中给出正则表达式。即类似的东西：

```
# svn diff -r 2000:2001 <svn url pattern>
//where 'pattern' lists folders that does not contain 'tst' in name. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:25:00.183

我不认为你可以通过一个调用 svn 来做到这一点。（打两个电话有什么问题？这比试图一起破解一些东西更简单。）

当我需要使用通配符时，我使用了 grep。给予

```
svn diff -r 2000:2001 <svn url pattern> | grep -v 'test' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:25:22.047

我得到了答案。:)

您可以为此创建更改列表。

更多详情请访问：[http ://svnbook.red-bean.com/en/1.5/svn.advanced.changelists.html](http://svnbook.red-bean.com/en/1.5/svn.advanced.changelists.html)

所以我可以为源代码更改创建一个更改列表，并为单元测试更改创建另一个更改列表。

有一个缺点，它只能在工作副本上使用。

> 变更列表是特定工作副本的工件，这意味着变更列表分配不能传播到存储库或以其他方式与其他用户共享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T18:49:18.133

对于您的用例，也许最好按文件路径对其进行切片。它仍然是多个命令，但如果您在临时版本中进行了更新，您将获得最小的累积差异。

```
svn diff -r2000:2003 project/foo/src
svn diff -r2000:2003 project/fun/src 
```

如果有大量路径，这可能会变得太麻烦。对于一次性工作，您可以将历史记录导入 DVCS，例如 Git，并使用其 rebase 工具（或等效工具）重写历史记录，以便获得想要分发的差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:29:24.837

使用 Subversion 1.7（及更高版本），您可以执行

```
svn log --diff -r 2000:2003 project/foo/src 
```

这将为您提供适用于 src 的所有修订的个别差异。（但也包括在同一版本中更改的其他目标）

# matlab - matlab中的函数句柄错误

> ID：12246748
> 
> 赞同：4
> 
> 时间：2012-09-03T11:15:52.243
> 
> 标签：matlab, function-handle

我想调用函数句柄`model_jacobian`，但我得到“错误使用 ==> horzcat CAT 参数尺寸不一致。”。当我选择在雅可比中留下`a`和`d`coefs 的函数时，一切正常。

```
syms a d x;  
syms_function = a*x+d;                                                    
model_jacobian = matlabFunction(jacobian(syms_function, [a d]), 'vars', {[a d], x});
J = model_jacobian([1 1], [1 2 3 4 5 6 7 8 9]'); 
```

那么如何使用参数调用函数句柄，尽管它们没有在那里使用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:05:19.323

您可能已经解决了这个问题，但您可能需要重新考虑您的`vars`规范。文档说：

> 此参数的值必须是字符串元胞数组或符号数组，或符号变量向量

您有一个符号变量元胞数组，这似乎不正确。我会保持简单，例如：

```
'vars',[ a d x]) 
```

# jquery - 使用动画jquery自动更改img src值

> ID：12246750
> 
> 赞同：0
> 
> 时间：2012-09-03T11:15:58.920
> 
> 标签：jquery, animation, background, slideshow, fullscreen

首先，你好。很长一段时间以来，我一直在努力实现一些目标。我正在尝试使用 jquery 创建背景全屏幻灯片。我确实使用 css 动画实现了这一点，但是如果您选择一个新选项卡，然后返回带有 css 动画的选项卡，它就会开始像地狱一样滞后。我认为如果使用 jquery 就不会发生这种情况。此外，我尝试在不使用已经构建的 jquery 幻灯片插件的情况下尽可能简单地创建它，但我做不到。

* * *

现在我有了一个想法。对于我的网站的背景，我通常使用

```
<div id="background">
    <img src="background.jpg" class="stretch" alt="" />
</div> 
```

使用以下CSS：

```
#background {
    width: 100%; 
    height: 100%; 
    position: fixed; 
    left: 0px; 
    top: 0px; 
    z-index: 0;
}

.stretch {
    width:100%;
    height:100%;
} 
```

那么，是否可以使 img src 的值**自动**更改，并在可能的情况下为其添加一些动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:23:36.313

```
var urlArray = [
 'url1','url2','url3'
];
var slideShowTimings = 1000;
var i=0
setInterval(function(){
var $img = $($('.stretch')[0]);
$img.attr('.src',urlArray[++i%urlArray.length]);
},slideShowTimings); 
```

试试这个..这应该每 1 秒（1000 毫秒）后改变背景图像。
如果您想为事物设置动画，那么您应该像这样使用 $.animate() 或 $.show() 和 $.hide().somethign；

```
var urlArray = [
 'url1','url2','url3'
];
var slideShowTimings = 2000;
var i=0
setInterval(function(){
var $img = $($('.stretch')[0]);
$img.hide(slow,function(){
 $img.attr('.src',urlArray[++i%urlArray.length]);
 $img.show(fast)
});
},slideShowTimings); 
```

# java - Java：如何从字符串中提取两个字符之间的子字符串？

> ID：12246757
> 
> 赞同：5
> 
> 时间：2012-09-03T11:16:19.407
> 
> 标签：java, regex

我对 Java 比较陌生，我需要一些帮助来从字符串中提取多个子字符串。字符串的示例如下所示：

```
String = "How/WRB can/MD I/PRP find/VB a/DT list/NN of/IN celebrities/NNS '/POS real/JJ names/NNS ?/." 
```

期望的结果：`WRB MD PRP VB DT NN IN NNS POS JJ NNS`

我有一个文本文件，其中可能包含数千个类似的带有 POS 标记的行，我需要从中提取 POS 标签并根据 POS 标签进行一些计算。

我曾尝试使用标记器，但并没有真正得到我想要的结果。我什至尝试使用`split()`并保存到数组，因为我需要存储它并稍后使用它，但这仍然不起作用。

最后，我尝试使用模式匹配器，但正则表达式出现问题，因为它返回带有正斜杠的单词。

```
Regex: [\/](.*?)\s\b
Result: /WRB /MD .... 
```

如果有更好的方法可以做到这一点，请告诉我，或者是否有人可以帮助我找出我的正则表达式有什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T11:26:07.130

这应该有效：

```
String string = "How/WRB can/MD I/PRP find/VB a/DT list/NN of/IN celebrities/NNS '/POS real/JJ names/NNS ?/.";
System.out.println(string.replaceAll("[^/]+/([^ ]+ ?)", "$1")); 
```

印刷：`WRB MD PRP VB DT NN IN NNS POS JJ NNS .`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T11:20:35.557

如果您仍想使用模式匹配，请查看[积极的lookbehinds](http://www.regular-expressions.info/lookaround.html)。它将允许您匹配以斜杠开头的单词，但实际上不匹配斜杠本身。

一个例子是这样的：

```
(?<=/).+?(?= |$) 
```

匹配以斜杠开头，后跟空格或字符串结尾的任何内容

这是一个用 Java 编写的工作示例：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;
import java.util.LinkedList;

public class SO {
    public static void main(String[] args) {
        String string = "How/WRB can/MD I/PRP find/VB a/DT list/NN of/IN celebrities/NNS '/POS real/JJ names/NNS ?/.";
        Pattern pattern = Pattern.compile("(?<=/).+?(?= |$)");
        Matcher matcher = pattern.matcher(string);

        LinkedList<String> list = new LinkedList<String>();

        // Loop through and find all matches and store them into the List
        while(matcher.find()) { 
            list.add(matcher.group()); 
        }

        // Print out the contents of this List
        for(String match : list) { 
            System.out.println(match); 
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T11:32:19.207

```
String string = "How/WRB can/MD I/PRP find/VB a/DT list/NN of/IN celebrities/NNS '/POS real/JJ names/NNS ?/.";

string = string .replaceAll("\\S+/", "").replace(".", "");  

System.out.println(string ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:22:15.657

怎么样`str = str.repalceAll("\\S+/", "")`？它将替换删除非空白字符，后跟斜杠。

# windows-phone-7 - 如何在 wp7 的隔离存储设置中存储多个数据？

> ID：12246761
> 
> 赞同：0
> 
> 时间：2012-09-03T11:16:34.940
> 
> 标签：windows-phone-7

我想在独立存储中存储多个名称。我使用此代码存储多个存储

```
if (!setting.Contains("CityDetail"))
            {

                  setting.Add("CityDetail", cityname);

            }
            else 
            {
                setting["CityDetail"] = cityname;

                           }
            setting.Save(); 
```

但它只提供最后一个附加值，h=那么我怎样才能获取所有数据库值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:39:34.523

您可以使用这些功能将您的对象存储在 phoneapplication 状态

```
 public static void SaveState(string key, object value)
    {
        if (phoneApplicationPage.State.ContainsKey(key))
        {
            phoneApplicationPage.State.Remove(key);
        }

        phoneApplicationPage.State.Add(key, value);
    }

  public static object LoadState(this PhoneApplicationPage phoneApplicationPage, string key)
    {
        if (phoneApplicationPage.State.ContainsKey(key))
        {
            return phoneApplicationPage.State[key];
        }

        return null;
    } 
```

编辑-使用隔离设置

```
 public void SaveCompositeObject()
   {
      var settings = IsolatedStorageSettings.ApplicationSettings;
      Person person= new City { Name = "Alex", Age= "21" };
      settings.Add("person", person);
   }

  public class Person
  {
     public string Name
     {
       get;
       set;
     }

    public string Age
    {
      get;
      set;
    }
} 
```

检索数据

```
 Person person1;
 settings.TryGetValue<Person>("person", out person11); 
```

# oauth - FB OAuth 返回访问令牌但没有过期值

> ID：12246763
> 
> 赞同：1
> 
> 时间：2012-09-03T11:16:46.140
> 
> 标签：oauth, facebook-oauth

**说明**：

我对“随机”不返回“过期”值的 OAuth 服务有疑问。

该应用程序使用带有简单 WebRequests 和重定向（无 SDK）的服务器端身份验证，并且完全符合[文档](https://developers.facebook.com/docs/authentication/server-side/)。

我们将“expires”值存储在我们自己的数据库中，并使用此信息提示用户在 accesstoken 已过期（或即将过期）时重新进行身份验证。

我们不会以任何方式自动或批量更新访问令牌。访问令牌仅通过服务器端身份验证刷新，即该过程始终由用户启动。

现在我们注意到，当我们尝试像这样刷新一些（但不是全部）这些过期令牌时，OAuth 服务不会**返回**第 4 步的过期值，即使用户再次确认他确实希望授予我们权限访问他的 Facebook 帐户。访问令牌返回就好了。

其他代币没有这个问题。该问题似乎是随机发生的，但**可能**与某些用户授予 manage_pages 权限而其他用户没有。然而，这只是猜测，我目前无法对此进行测试。

该问题可以通过用户手动转到他的应用程序设置并从中删除我们的应用程序来“修复”。当接下来执行服务器端身份验证时，OAuth 响应包含预期的 expires 值，任何后续调用都将包含该用户的授权。

**问题**：

*   这种（无证）行为的原因是什么或可能是什么？
*   我们如何修复受影响的令牌？
*   我们怎样才能防止这种情况发生？

先感谢您，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:46:01.120

这显然是一个已知的错误。（见CBroe的评论）

# php - 如何从主数组构造子数组

> ID：12246766
> 
> 赞同：-5
> 
> 时间：2012-09-03T11:16:54.957
> 
> 标签：php, arrays, multidimensional-array

我想从多维数组中构造子 n 个数组，这取决于数据。例如：我有一个主数组作为

```
 Array
    (
    [0] => Array
        (
            [id] => 1
            [status] => -1
        )

    [1] => Array
        (
            [id] => 2
            [status] => 1
        )

    [2] => Array
        (
            [id] => 3
            [status] => 2
        )

    [3] => Array
        (
            [id] => 4
            [status] => 2
        )
    [4] => Array
        (
            [id] => 5
            [status] => 2
        )
) 
```

我想从此数组中获取 3 个数组，这取决于状态值的编号和类型，例如

```
 array{
    [0]=array(
        [status]=-1
        [count]=1

    )
    [1]=array(
        [status]=1
        [count]=1

    )
    [2]=array(
        [status]=2
        [count]=3

    )

} 
```

提前致谢，

苏尼尔·库马尔 P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:27:07.377

你的意思是这样吗？：

```
$array = array(
    array('id' => 1, 'status' => -1),
    array('id' => 2, 'status' => 1),
    array('id' => 3, 'status' => 2),
    array('id' => 4, 'status' => 2),
    array('id' => 5, 'status' => 2)
);

$statuses = array();
foreach($array as $one){
    if(!isset($statuses[$one['status']])){ $statuses[$one['status']] = 0; }
    $statuses[$one['status']]++;
}

$newArray = array();
foreach($statuses as $key => $val){
    $newArray[] = array('status' => $key, 'count' => $val);
}

print_r($newArray);

/*Array
(
    [0] => Array
        (
            [status] => -1
            [count] => 1
        )

    [1] => Array
        (
            [status] => 1
            [count] => 1
        )

    [2] => Array
        (
            [status] => 2
            [count] => 3
        )

)*/ 
```

# c# - 在 WP7 中更改单元格的颜色

> ID：12246768
> 
> 赞同：0
> 
> 时间：2012-09-03T11:17:05.690
> 
> 标签：c#, windows-phone-7, datagrid

我在 windows phone 7 应用程序开发中更改数据网格中单元格的颜色时遇到问题，问题正是当在单元格中加载新值时，它应该检查单元格中的旧值，如果旧值大于新值值它必须显示为红色，否则应显示为蓝色。在这两种情况下，新值都将被更新，基于先前的值，单元格的颜色应该被更新。请帮帮我。我已经尝试过事件 currentvalue 它没有工作。是否有任何事件可以帮助我获取数据网格中单元格的旧值和当前值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:44:56.997

你有 OnFormat 或 OnPostPaint 事件吗？它是 WinForms 的 PostPaint。

不过，您需要保留旧值的存储...即您不能在单个事件/步骤中执行此操作。

您在 Finished Edit 事件之一中捕获旧值，然后在绘制事件中比较它们。

# android - 在图像上的触摸点（坐标）处绘制矩形或形状

> ID：12246775
> 
> 赞同：2
> 
> 时间：2012-09-03T11:17:36.360
> 
> 标签：android, drawable

如何在触摸点（如坐标 28,87）绘制一个矩形（使用形状资源）。我已经创建了这样的形状。

```
android:shape="rectangle" >

<solid 
    android:color="@color/transparent"/>
<stroke

    android:width="3dp"
    android:color="@color/green" /> 
```

我想在图像上的触摸点绘制这个矩形。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:18:12.913

您可以在该视图的 onDraw() 方法中在该视图上绘制一个形状。没有可用于在视图画布上绘制可绘制形状的方法。
而且您不必使用可绘制的形状来绘制矩形。您可以使用 canvas.drawRect() 方法绘制一个矩形。这是一个代码：

```
public class MyView extends View{

float x,y;
Bitmap bmp;
Paint mPaint;
float width = 100.0f;
float height = 50.0f;

boolean touched = false;

public MyView (Context context)
{
    super(context);
    x = y = 0;
    mPaint = new Paint();
    mPaint.setColor(Color.BLUE);
    mPaint.setStyle(Style.STROKE);
}

@Override
protected void onDraw (Canvas canvas)
{
    canvas.drawColor(Color.WHITE);
    if(touched)
    {
        canvas.drawRect(x, y, x+width, y+height, mPaint);

    }   
}

@Override
public boolean onTouchEvent (MotionEvent event)
{
    touched = true;
    //getting the touched x and y position
    x = event.getX();
    y = event.getY();
    invalidate();
    return true;
} 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-03T11:07:25.143

我猜@kam 的解决方案需要更新。构造函数中的所有内容都必须在 init() 方法中，并且构造函数必须被覆盖 3 次。

公共类 MyView 扩展视图 {

```
private float xDown = 0,yDown = 0, xUp = 0, yUp = 0;

Paint mPaint;

boolean touched = false;
public MyView(Context context) {
    super(context);
    init(context);
}

public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

public MyView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
}

private void init(Context context) {
    mPaint = new Paint();
    mPaint.setColor(Color.BLUE);
    mPaint.setStyle(Paint.Style.STROKE);
}

@Override
protected void onDraw (Canvas canvas)  {
    canvas.drawColor(Color.TRANSPARENT);
    if(touched) {
        canvas.drawRect(xDown, yDown, xUp, yUp, mPaint);

    }
}

@Override
public boolean onTouchEvent (MotionEvent event) {
    switch (event.getAction()){
        case MotionEvent.ACTION_DOWN:
            xDown = event.getX();
            yDown = event.getY();

            xUp = 0;
            yUp = 0;
            break;
        case MotionEvent.ACTION_MOVE:
            xUp = event.getX();
            yUp = event.getY();
            touched = true;
            break;
        case MotionEvent.ACTION_UP:
            xUp = event.getX();
            yUp = event.getY();
            touched = true;
            break;
    }
    invalidate();
    return true;
} 
```

}

# iphone - ios: Change the resolution when capturing an image with OpenCV using cvSetCaptureProperty

> ID：12246776
> 
> 赞同：2
> 
> 时间：2012-09-03T11:17:36.253
> 
> 标签：iphone, objective-c, ios, opencv, camera

I am working on an Iphone application. I am using OpenCV to take a picture with the camera and use it as UIImage.

To take the picture first I declare the cvCapture

```
CvCapture * capture = cvCaptureFromCam(1200) //(1200 is to use the CV_CAP_AVFOUNDATION  from the AVFoundation framework) 
```

Then I use `cvQueryFrame(capture)` to get the image.

Everything works correctly.

Now the image resolution I get is 480X360\. i want to make the image bigger. After researches and some test on a desktop application I found out we can use this to set the capture resolution:

```
cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, 1280);
cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, 720); 
```

However this was not working the image size is not changing.

Directly after calling `cvSetCaptureProperty` I used the `cvGetCaptureProperty` to read the properties, to make sure they are changing. But they where not changing (I'm still getting them as 480X360). It is like `cvSetCaptureProperty` is not setting the properties correctly.

On a desktop application that uses open CV those methods work fine and the resolution is changed correctly. I am testing on an Iphone 4s btw.

Any idea why setting the frame height and width is not working?

Thanks a lot for any help

# elasticsearch - 显示来自 ES 字段的有限单词

> ID：12246781
> 
> 赞同：0
> 
> 时间：2012-09-03T11:17:57.063
> 
> 标签：elasticsearch

我正在使用 Mpdreamz/NEST 将 Elasticsearch 集成到 C# 中。有没有办法限制查询结果字符串中的单词数？

例如，我在 ES 中有一个名为“Content”的字段，我需要从我的索引中显示 30 个与“sensex”匹配的“Content”单词。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:50:02.910

即使在 Elasticsearch 本身中，您也不能那么容易。

你有三个选择

1.  使用突出显示强制摘录
2.  尝试使用 script_fields 返回前 30 个单词
3.  在索引时添加另一个只有前 30 个单词的字段

尽管前两个可能与 NEST 有关，但我会选择第三个选项，因为它不会在查询时产生性能损失。

# java - Java asm get "this" object from method variables

> ID：12246783
> 
> 赞同：0
> 
> 时间：2012-09-03T11:18:05.007
> 
> 标签：java, java-bytecode-asm, invokevirtual

I need to know the name of the object which called invokevirtual operation(in the following format - Objectname@object_id). Is it possible given only MethodInsnNode object? I know that it is stored with the index 0 in local variables but I don't know how to get it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:58:05.380

您需要 MethodNode 才能访问局部变量。

如果您在变量中有关联的 MethodNode`mn`并且您的 MethodInsnNode 存储在其中`insn`：

```
InsnList insnList = mn.instructions;
int instructionIdx = insnList.indexOf(insn);
String name =  null;
int wantedLocalVariableIndex = 0;
for (LocalVariableNode lvn : mn.localVariables) {
    if (lvn.index == wantedLocalVariableIndex && insnList.indexOf(lvn.start) < instructionIdx && instructionIdx < insnList.indexOf(lvn.end)) {
        name = lvn.name;
        break;
    }
}
if (name != null) {
    // we found it's name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T14:34:06.783

这是我在 JavaFlow 库的分支中解决这个难题的方法。有关确切的实现，请查看我的 Github 存储库中[的 CallSiteFinder.java](https://github.com/vsilaev/tascalate-javaflow/blob/master/net.tascalate.javaflow.providers.asm5/src/main/java/org/apache/commons/javaflow/providers/asm5/CallSiteFinder.java)。

思路如下。当您有方法指令时，您可能会获得正确方法调用所需的必要堆栈大小

`Type.getArgumentsAndReturnSizes(methodInsnNode.desc) >> 2`

现在从给定的 MethodInsnNode 开始反向移动指令列表，并根据遇到的每条指令的 OPCode 减小获得的堆栈大小。继续，直到您的尺寸为零。此时，您有一个用于“this”的指令节点——实例方法调用的第一个参数。它可能是 ALOAD（包括您正在访问的方法的这个 - “ALOD 0”）、AALOAD、GETSTATIC、GETFIELD 或前一个方法调用的结果，当几个方法调用被链接起来时

`StringBuilder.append(...).append(..)`

# oracle10g - Oracle archive log file size

> ID：12246785
> 
> 赞同：1
> 
> 时间：2012-09-03T11:18:06.627
> 
> 标签：oracle10g

I have written a procedure which will get data from some tables and update a master table. each table contains records in the range 50k - 100k. when ever i execute this procedure, the archive log files is getting generated and the size of those log files is too much for my disk to handle.. it is generating more than 30GB of log files for each execution. What are the possible ways to handle this.

# c++ - How to make an array of CRect objects?

> ID：12246787
> 
> 赞同：0
> 
> 时间：2012-09-03T11:18:27.017
> 
> 标签：c++, arrays, visual-c++, mfc

I want to define an array of `CRect` objects in a header file. So will it be something similar to this:

```
 #pragma once
  #include<atltypes.h>

  CRect blockPos[3] = { CRect(0,0,55,43),  CRect(0,0,55,43), CRect(0,0,55,43), }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:51:50.403

如果数组是常量，那么你可以简单地`const`在标题中声明数组：

```
CRect const blockPos[3] = { CRect(0,0,55,43),  CRect(0,0,55,43), CRect(0,0,55,43), }; 
```

这确实意味着包含标头的每个翻译单元都会生成自己的副本，如果数组非常大，这可能并不理想。

如果它不是常量，或者您想避免多个副本，那么您将需要整个程序的单个定义，并且只需要在标题中声明：

```
// header
extern CRect blockPos[3];

// some source file
CRect blockPos[3] = { CRect(0,0,55,43),  CRect(0,0,55,43), CRect(0,0,55,43), }; 
```

在这种情况下，请注意*静态初始化命令 fiasco*。没有指定何时相对于其他翻译单元中的全局变量对其进行初始化，因此如果另一个全局变量的构造函数尝试访问它，您的程序可能具有未定义的行为。一般来说，全局变量充满危险，所以使用它们时要格外小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:46:06.643

您不应在头文件中定义变量，因为它将在包含头文件的站点上多次定义。您应该改用访问器方法：

头文件

```
#pragma once

CRect* GetRectArray(); 
```

C++ 文件

```
#include "MyHeader.h"

namespace
{
    CRect blockPos[3] = { CRect(0,0,55,43),  CRect(0,0,55,43), CRect(0,0,55,43), };
}

CRect* GetRectArray()
{
    return blockPos;
} 
```

# android - 如何处理android中的空指针异常

> ID：12246790
> 
> 赞同：0
> 
> 时间：2012-09-03T11:18:33.897
> 
> 标签：android

我正在尝试制作照片库应用程序。但我遇到以下错误，我的程序将崩溃。我也对这一行有错误：

```
imageView.setImageResource(pics[arg2]); 
```

错误

```
09-03 16:45:22.618: E/AndroidRuntime(443): Uncaught handler: thread main exiting due to uncaught exception
09-03 16:45:22.628: E/AndroidRuntime(443): java.lang.NullPointerException
09-03 16:45:22.628: E/AndroidRuntime(443):  at com.example.myfirstapplication.setwall$1.onItemClick(setwall.java:40)
09-03 16:45:22.648: E/dalvikvm(443): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

这是我的代码：

```
package com.sai.samples.views;

import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class GalleryView extends Activity {
    Integer[] pics = {
            R.drawable.antartica1,
            R.drawable.antartica2,
            R.drawable.antartica3,
            R.drawable.antartica4,
            R.drawable.antartica5,
            R.drawable.antartica6,
            R.drawable.antartica7,
            R.drawable.antartica8,
            R.drawable.antartica9,
            R.drawable.antartica10
    };
    ImageView imageView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Gallery ga = (Gallery)findViewById(R.id.Gallery01);
        ga.setAdapter(new ImageAdapter(this));

        imageView = (ImageView)findViewById(R.id.ImageView01);
        ga.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getBaseContext(), 
                        "You have selected picture " + (arg2+1) + " of Antartica", 
                        Toast.LENGTH_SHORT).show();
                imageView.setImageResource(pics[arg2]);

            }

        });

    }

    public class ImageAdapter extends BaseAdapter {

        private Context ctx;
        int imageBackground;

        public ImageAdapter(Context c) {
            ctx = c;
            TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
            imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
            ta.recycle();
        }

        @Override
        public int getCount() {

            return pics.length;
        }

        @Override
        public Object getItem(int arg0) {

            return arg0;
        }

        @Override
        public long getItemId(int arg0) {

            return arg0;
        }

        @Override
        public View getView(int arg0, View arg1, ViewGroup arg2) {
            ImageView iv = new ImageView(ctx);
            iv.setImageResource(pics[arg0]);
            iv.setScaleType(ImageView.ScaleType.FIT_XY);
            iv.setLayoutParams(new Gallery.LayoutParams(150,120));
            iv.setBackgroundResource(imageBackground);
            return iv;
        }

    }
} 
```

这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<Gallery 
    android:id="@+id/Gallery01" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"></Gallery>
<ImageView 
    android:id="@+id/ImageView01" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"></ImageView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T11:23:59.813

此行可能返回 null ：

```
imageView = (ImageView)findViewById(R.id.ImageView01); 
```

检查`ImageView`id 是否正确，如果错误仍然存​​在，请尝试清理并重建您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:45:16.050

我已使用此代码创建图像库，

```
public class GalleryViewActivity extends Activity 
{

    GridView gridView;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        gridView = (GridView)findViewById(R.id.gridView);

           gridView.setAdapter(new ImageAdapter(this));
    }
}

class ImageAdapter extends BaseAdapter 
{
    ArrayList<String> images;

    private Context mContext;

    public ImageAdapter(Context c) 
    {
        mContext = c;
    }

    public int getCount() 
    {
        return mThumbIds.length;
    }

    public Object getItem(int position) 
    {
        return null;
    }

    public long getItemId(int position) 
    {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(final int position, View convertView, ViewGroup parent) 
    {
        ImageView imageView;
        if (convertView == null)
        {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        }
        else 
        {
            imageView = (ImageView) convertView;
        }
           imageView.setClickable(true);

           imageView.setOnClickListener(new OnClickListener()
           {            
            @Override
            public void onClick(View v) 
            {
                Intent i = new Intent(v.getContext(), showImageClass.class);
                Toast.makeText(v.getContext(), mThumbIds.toString() + " Clicked", 5000).show();
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                i.putExtra("imageName", mThumbIds[position]);
                v.getContext().startActivity(i);
            }
        });
//         imageView.setImageDrawable(images);
//         imageView.setImageBitmap(images);
//         imageView.setImageResource(images[]);
        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

//     references to images
    private Integer[] mThumbIds = 
    {
            R.drawable.abc,
            R.drawable.def,
            R.drawable.klm, 
            R.drawable.pqr,
            R.drawable.rst, 
            R.drawable.wxy,
            R.drawable.xyz, 
    };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T05:56:41.103

首先创建一个类 GalleryViewActivity

```
public class GalleryViewActivity extends Activity 
{

    GridView gridView;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        gridView = (GridView)findViewById(R.id.gridView);
        gridView.setAdapter(new ImageAdapter(this));
    }
}

class ImageAdapter extends BaseAdapter 
{
    ArrayList<String> images;

    private Context mContext;

    public ImageAdapter(Context c) 
    {
        mContext = c;
    }

    public int getCount() 
    {
        return mThumbIds.length;
    }

    public Object getItem(int position) 
    {
        return null;
    }

    public long getItemId(int position) 
    {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(final int position, View convertView, ViewGroup parent) 
    {
        ImageView imageView;
        if (convertView == null)
        {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        }
        else 
        {
            imageView = (ImageView) convertView;
        }
           imageView.setClickable(true);

           imageView.setOnClickListener(new OnClickListener()
           {            
            @Override
            public void onClick(View v) 
            {
                Intent i = new Intent(v.getContext(), showImageClass.class);
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                i.putExtra("position", "" + position);
                v.getContext().startActivity(i);
            }
        });
        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

//     references to images
    private Integer[] mThumbIds = 
    {
            R.drawable.abc,
            R.drawable.def,
            R.drawable.klm, 
            R.drawable.pqr,
            R.drawable.rst, 
            R.drawable.wxy,
            R.drawable.xyz, 
    };
} 
```

不要忘记在`drawable`文件夹中添加图像。图片应该和你在`mThumbIds`数组中提到的一样，比如我用过 abc.jpg、def.jpg 等等。然后你需要创建一个`showImage.java`类，在这里你需要一个 imageview 来显示单击的图像的大视图。 .

```
public class showImageClass extends Activity
{
    private Integer[] mThumbIds = 
    {
            R.drawable.abc,
            R.drawable.def,
            R.drawable.klm, 
            R.drawable.pqr,
            R.drawable.rst, 
            R.drawable.wxy,
            R.drawable.xyz, 
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.showimage);
        int position = Integer.parseInt(this.getIntent().getStringExtra("position"));
        ImageView jpgView = (ImageView)findViewById(R.id.imageView);
        jpgView.setImageResource(mThumbIds[position]);
    }
} 
```

这段代码对我有用，它肯定会工作。不要忘记添加相关图像并导入所需的类库。在 android 清单文件中提及这两个活动

# php - Struggling to read a node with SimpleXML

> ID：12246791
> 
> 赞同：0
> 
> 时间：2012-09-03T11:18:38.793
> 
> 标签：php, xml, simplexml

Here is my XML response from an API:

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <GetCertificateResponse xmlns="http://url.com">
      <GetCertificateResult>
        <ReturnValue xmlns="">
          <Status>Success</Status>
          <Message/>
          <CertificateNumber/>
          <URL/>
        </ReturnValue>
      </GetCertificateResult>
    </GetCertificateResponse>
  </soap:Body>
</soap:Envelope> 
```

How can I reaq the status node? I've tried so many combos:

```
 $getCertificateXMLResponse = simplexml_load_string($getCertificateXMLResponse);

        echo  $getCertificateXMLResponse->GetCertificateResponse->GetCertificateResult->ReturnValue->Status; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:40:46.987

你也可以使用 Xpath

```
$xml = simplexml_load_string($soap, NULL, NULL, "http://schemas.xmlsoap.org/soap/envelope/");
$xml->registerXPathNamespace('soap', 'http://schemas.xmlsoap.org/soap/envelope/');

$result = $xml->xpath('//Status');
echo $result[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:32:52.443

它......丑陋..但有效

```
$xml = new SimpleXMLElement(file_get_contents('a.xml'),0,false,'');
$namespaces = $xml->getDocNamespaces(true);
$xml->registerXPathNamespace('empty', $namespaces['']);
$xml->registerXPathNamespace('soap', 'http://schemas.xmlsoap.org/soap/envelope/');
$status = array_shift($xml->xpath("soap:Body/empty:GetCertificateResponse/empty:GetCertificateResult/ReturnValue/Status"));
echo $status->asXML(); 
```

我很想看到更优雅的解决方案。

确实看看像[nusoap](http://sourceforge.net/projects/nusoap/)这样的东西。

# mysql - Selecting first records of a type in a given period

> ID：12246795
> 
> 赞同：3
> 
> 时间：2012-09-03T11:18:56.533
> 
> 标签：mysql, select

I have a database table that stores user comments:

```
comments(id, user_id, created_at) 
```

From that table, I want to get the number of users that have commented for the first time in the past 7 days.

* * *

Here's what I have so far:

```
SELECT COUNT(DISTINCT `user_id`) 
FROM `comments` 
WHERE `created_at` BETWEEN DATE_SUB(NOW(), INTERVAL 7 DAY) AND NOW() 
```

This would give the number of users that have commented, but it would not take into consideration whether these comments are first for their users.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:22:29.387

```
SELECT COUNT(DISTINCT `user_id`) 
FROM comments c1
WHERE created_at BETWEEN DATE_SUB(NOW(), INTERVAL 7 DAY) AND NOW()
AND NOT EXISTS 
   (SELECT NULL 
   FROM comments c2 
   where c1.user_id = c2.user_id
   AND c2.create_at < DATE_SUB(NOW(), INTERVAL 7 DAY)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T11:23:16.210

```
SELECT COUNT(DISTINCT user_id)
FROM comments AS c1
WHERE c1.created_at BETWEEN DATE_SUB(NOW(), INTERVAL 7 DAY) AND NOW()
AND NOT EXISTS (SELECT 1 FROM comments AS c2 
                WHERE c2.user_id = c1.user_id AND c2.created_at < c1.created_at) 
```

该`NOT EXISTS`子句检查相同的 user_id 是否具有较早 created_at 时间的记录。如果是这样，这意味着这不是他们第一次发表评论，因此我们应该对这个记录打折扣。

我保留`DISTINCT user_id`了，因为有可能同时创建两条评论。您也可以尝试以下方法，它只会为每个用户获取*第一*条记录，因此您可以取消 DISTINCT，但我不知道哪个更优化：

```
SELECT COUNT(*)
FROM comments AS c1
WHERE c1.created_at BETWEEN DATE_SUB(NOW(), INTERVAL 7 DAY) AND NOW()
AND NOT EXISTS (SELECT 1 FROM comments AS c2 
                WHERE c2.user_id = c1.user_id 
                AND (c2.created_at < c1.created_at 
                    OR (c2.created_at = c1.created_at AND c2.id < c1.id))) 
```

# iphone - Can I disable rubber band inertial scrolling in UIScrollView

> ID：12246796
> 
> 赞同：2
> 
> 时间：2012-09-03T11:18:57.090
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

I have a scroll view, it scrolls my view. If I scroll far up or far down, it shows white space. I believe this is known as the rubber band effect or inertial scrolling. Is there a documented or allowed way I can disable this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T11:26:46.380

将滚动条的反弹属性设置为 false/no。之后就不会反弹了。

`self.scrollView.bounces = NO;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T11:25:35.803

是的。在 interface-builder 或 Storyboards 中，只需选择 UIScrollView 并取消选中“bounces”属性。

在代码中：

```
self.scrollView.bounces = NO; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T11:26:16.843

检查`UIScrollView` **反弹**属性。它就像这种行为的开/关属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-03T11:23:46.843

用这个：

```
self.scrollView.bounces = NO; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T11:24:31.270

```
self.yourScrollView.bounces = NO; 
```

# database - 数据库奇怪的行为

> ID：12246799
> 
> 赞同：1
> 
> 时间：2012-09-03T11:19:08.577
> 
> 标签：database, oracle, oracle9i

我遇到了以下令人困惑的问题：

通过*CSV*文件和一些*KSH*脚本更新了数据库表：

```
#!/bin/ksh

moduleDir=$ACS_INSTALL/FMC_TER_AM_028/Database
logFile=$moduleDir/install_scripts/`basename $0`_$(date '+%Y%m%d_%H%M').log

(
  cp -ri $moduleDir/ntscripts/datafiles/* $PROVHOME/database/ntscripts/datafiles
  echo "\n***********************"
  echo "* New/Modified files: *"
  echo "***********************"
  find $moduleDir/ntscripts/datafiles -type f | xargs ls -l
) 2>&1 | tee $logFile

echo "\nInstallation of Database completed\n" 
```

更新等于（等于我的意思是视觉结果与下面的*INSERT*命令相同）与以下*INSERT*查询：

```
INSERT INTO tp_nt_mapping (TARIFF_PLAN, SERVICE_TYPE, NETWORK_TEMPLATE, IN_CREATE, IN_DELETE)
VALUES (171, 'Postpaid', '11', '', '') 
```

当我使用以下*SELECT*命令时：

```
SELECT * FROM tp_nt_mapping ORDER BY tariff_plan DESC 
```

我能够看到新插入的记录，但是当我尝试使用以下任何*SELECT*查询时，我不是：

```
SELECT * FROM tp_nt_mapping WHERE network_template = 11 ORDER BY tariff_plan DESC
SELECT * FROM tp_nt_mapping WHERE network_template = '11' ORDER BY tariff_plan DESC 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:59:18.527

字段中的值`network_template`不仅仅是`'11'`but `'11' || chr(13)`。
所以你`carrige return`最后有char。

您可以通过执行以下操作来修复数据：

```
update tp_nt_mapping 
set network_template = replace(network_template, chr(13), '') 
```

但最好检查一下为什么首先添加它....

# facebook - How to format the Facebook news feed description of grouped app posts?

> ID：12246807
> 
> 赞同：0
> 
> 时间：2012-09-03T11:19:48.590
> 
> 标签：facebook, facebook-graph-api, facebook-actionscript-api

I have an app which posts a message like this to a user's Facebook timeline:

![(Image of correct timeline post)](../Images/98fd6822058571b4aa2a00a896779842.png)

This is working fine, but if I post a few times, my posts get grouped on my news feed, and I get this:

![(Image of incorrectly formatted post to news feed)](../Images/c83674972bd844dd10b5a358efb3b733.png)

What settings should I use to control the way this news report appears? Instead of 'All about periods' and the page link in the box at the top, I'd like 'Body iQ Quiz' and the app description. Where would I set these values?

And is it possible to make the grouped report say 'Jay cee Effex shared a link via Body iQ Quiz', the way the original post does?

I'm posting from the Facebook AS3 API, and my post code looks like this:

```
var auth:FacebookAuthResponse = Facebook.getAuthResponse();
var token:String = auth.accessToken;
var user:String = auth.uid;
var values:Object = 
{ 
    access_token: token,
    name: "Body iQ Quiz",
    picture: "http://a7.sphotos.ak.fbcdn.net/hphotos-ak-snc6/282950_427728213914009_630526316_n.jpg",
    link:"http://www.lil-lets.co.uk/en-GB/Wellbeing",  
    description: "Women, how well do we know our bodies? Click here to find out what your Body iQ is.", 
    message: result.FacebookBody + " " + result.FacebookTitle
};

Facebook.api("/" + user + "/feed", handleSubmitFeed, values, URLRequestMethod.POST); 
```

... but I'm not sure if this is something I can fix in code, or if the app configuration needs tweaking?

**NOTE:** Some users report getting the latter format in their news feed even with a single post (I can't reproduce this), so perhaps grouping is a red herring, and the real question is how to format the news feed report of a timeline post?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:07:02.447

是否以及何时对帖子或照片进行分组是 Facebook 做出的决定。

*（有些人建议，如果用户在发帖之间退出 Facebook，则不会发生分组——但要求甚至强迫这不是用户友好的应用程序行为方式。）*

在您的情况下，我猜分组发生的原因是，它始终是您发布的同一个 URL。也许你可以避免分组，如果你每次发布*不同的 URL - 可以通过在 URL 中添加一个无意义的 GET 参数来实现。*但请注意，这会使它们在各个方面都成为*不同*的 URL；特别是如果您考虑它们是 Open Graph 对象——这些不同 URL 的点赞数不会累积，而是会针对每个 URL 进行计数。

除此之外，也许一遍又一遍地发布链接甚至不是您想要实现的正确机制——也许您最好定义一些真正的 Open Graph 操作，并使用这些操作来发布您的“分数”为您在 Facebook 上的用户...？

# wcf - WCF Web 服务的性能

> ID：12246816
> 
> 赞同：0
> 
> 时间：2012-09-03T11:20:22.807
> 
> 标签：wcf, logging

我已经配置了一个 WCF Web 服务 (.NET 3.5) 来使用 sitescope 监视计数器。当主服务调用超过某个预定义的阈值时，这会创建一个警告。

我试图找出以更大粒度记录服务的最佳方法。我的意思是我需要一些方法来保存 Web 服务中每个调用的时间，以查看可能导致问题的原因。

一种方法是使用 log4net 记录 Web 服务中使用的每个调用（例如数据库）的时间。或者也许我应该将时间输出到数据库？无论采用何种解决方案，我都不希望它极大地影响 Web 服务本身的时间安排。

有没有人必须实施类似的解决方案？我应该如何设计它以便它只记录/保存详细 Web 服务调用的样本而不是每个调用？

谢谢你的时间。

# php - PHP美元符号字符串

> ID：12246822
> 
> 赞同：3
> 
> 时间：2012-09-03T11:20:51.520
> 
> 标签：php

我不明白为什么 PHP 不替换包含美元符号的字符串。看下面的例子：

```
<?php
error_reporting (E_ERROR | E_WARNING | E_PARSE | E_NOTICE);
$var = 1024;
$str = '$var';
echo $str, '<br>', "$str"; 
```

输出是*$var $var*。为什么会这样？第一个参数一切都清楚了`echo`，但我希望最后一个参数会给出不同的结果（1024），因为它包含用双引号封装的美元符号，所以它应该被解释为变量并替换为1024。我哪里错了?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T11:23:17.567

`$str`包含内容为的字符串`"$var"`（没有变量替换，只有这些字符）。它是使用单引号创建的，因此没有变量替换。

当使用 回显它时`echo "$str"`，变量`$str`将被替换为其内容，即字符串`"$var"`，从而产生您的输出。

双引号字符串中的字符串替换不能递归工作！因此，为了在第二次出现时`$str`替换为`1024` ，您必须首先`$str`使用双引号创建。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T11:24:03.720

`"`允许您将变量放在字符串中。

`'`把里面的所有东西都当作一个字符串。

所以，如果你这样做`'$var'`- 它是内部的字符串`$`。

`"$str"`取值`$str`所以打印`$var`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:23:36.140

$str 包含文字字符串 $var，它永远不会被解释，因为它在单引号之间。

要解释它，您需要 eval()

```
eval($str) 
```

将输出 1042

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:23:36.480

你是这个意思吗？

```
<?php
  error_reporting (E_ERROR | E_WARNING | E_PARSE | E_NOTICE);
  $var = 1024;
  $str = $var;
  echo $str, '<br>', "$str"; 
```

输出 -

1024

1024

呵呵

# php - 使用 PHP 进行导航处理

> ID：12246832
> 
> 赞同：1
> 
> 时间：2012-09-03T11:21:41.393
> 
> 标签：php, css, navigation, menuitem, navigationcontroller

我卡在了一个代码中。我正在建立一个有很多内页的网站。我包括“sidebar.php”并将我的侧面导航放在这个文件中。

```
<div class="side-nav">
            <ul>
                <li><a href="#">Calls</a>
                    <ul>
                        <li><a href="record-calls.php">Call Record</a></li>
                        <li><a href="call-logs.php">Call Logs</a></li>
                        <li><a href="live-call-intercept.php">Live Call Intercept</a></li>
                        <li><a href="voicemail.php">Voicemail</a></li>
                    </ul>
                </li>

                <li><a href="#">SMS</a>
                    <ul>
                        <li><a href="sms-feature.php">SMS Feature</a></li>
                        <li><a href="redirect-sms.php">Redirect SMS</a></li>
                    </ul>
                </li>
             </ul>
             </div> 
```

现在我想在“record-calls.php”页面打开并且其他列表不显示任何背景时突出显示“record-calls”li。

每个页面中只有 1 个 sidebar.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:26:19.357

您可以简单地使用 if 条件

```
if(stristr($_SERVER['PHP_SELF'],'record-calls.php'))
{
   //highlight it
} 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:30:46.920

您可以使用一些方法在侧边栏菜单上突出显示当前页面。我不知道你的结构。在这种情况下，我建议通过 php 获取当前 URL 并检查例如记录调用是否包含在其中。像这样的东西：

```
<li <?php if(strpos('record-calls', $current_url) !== false) echo "class='current'"; ?>><a href="record-calls.php">Call Record</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:28:39.623

在给定页面上设置一些独特的类，`<body>`并使用它来设置菜单相关部分的样式。

示例（不漂亮，但我使用您的实际 HTML）：

```
.record-calls side-nav li li:first-child { /* highlight styles */ } 
.call-logs side-nax li li:first-child + li { /* highlight styles */ } 
```

ETC...

# robotlegs - 哪些包解析器应该属于

> ID：12246836
> 
> 赞同：0
> 
> 时间：2012-09-03T11:21:54.510
> 
> 标签：robotlegs

在“ActionScript Developer's Guide to Robotlegs”一书中，据说服务应该使用解析器来转换数据。我应该在 com.stackoverflow.services.fooService 中的哪个包中放置服务解析器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T12:57:33.183

这没有严格的规定，什么对你有用。
可能的设置可能是：

此外：
com.stackoverflow.control
com.stackoverflow.event
com.stackoverflow.model

你可以有：
com.stackoverflow.remote

另一个根据使用的不同 API 进行拆分（根据端点 + 类型划分，例如 JSON/AMF/SOAP/...）

com.stackoverflow.remote.api -> 自己的后端
com.stackoverflow.remote.twitterapi

从那里你可以走得更远：
com.stackoverflow.remote.api.service
OR
com.stackoverflow.remote.api.resource
com.stackoverflow.remote.api.host -> 端点设置，安全，...注入服务
com.stackoverflow.remote.api.parser类-> 数据解析器

此外，您可以包含一个控制包，以包含用于配置 api 的命令（设置事件、主机、解析器注入等）以及它如何集成到主上下文中。

# speech-recognition - MFCC 制造的集群是什么意思？

> ID：12246839
> 
> 赞同：1
> 
> 时间：2012-09-03T11:21:57.877
> 
> 标签：speech-recognition, k-means, gaussian, mfcc

我使用 MFCC + GMM 制作了一个情绪识别程序。

因为android，我使用了一个叫做comirva的java包。

使用这个包和emotion-speech DB，我在每种情绪中都制作了一个GMM，比如angryGMM、happyGMM ......

在制作 GMM 之前，我创建了一个 KMeanClustering 对象，并初始化了簇号。

我所知。如果我将簇数初始化为 3，则一组点将分为 3 个簇。

但我不确定一个集群是什么意思。

Q1) 一个集群是什么意思？它只是用于模式匹配吗？

创建 GMM 后，我使用已在 KMeansClustering 中使用过一次的点列表运行 GMM.EM 算法。Q2）我想知道为什么在训练中使用相同的点列表，尽管 GMM 是由这个点列表创建的。

# objective-c - ASIHTTPRequest 未在 iOS 5 中使用代理参数进行连接

> ID：12246841
> 
> 赞同：-1
> 
> 时间：2012-09-03T11:22:00.083
> 
> 标签：objective-c, ios, cocoa-touch, proxy, asihttprequest

我收到的错误代码：

> 错误域=ASIHTTPRequestErrorDomain 代码=1“发生连接失败”UserInfo=0x6993280 {NSUnderlyingError=0x6d520c0“操作无法完成。（kCFErrorDomainCFNetwork 错误 306。）”

我没有选择，只有 ASIHTTPRequest。我已经开发了该应用程序，无法使用任何替代方案。

目前我们正在使用 iOS 版本 5.1.1

一年前，我使用相同的 iOS 3 代码开发了该应用程序，并且运行正常。现在相同的代码无法工作。我怀疑最新的 iOS 版本会发生这种情况。

此代码在没有代理设置但不适用于代理设置的情况下运行良好。

```
_method = [NSStringstringWithFormat:@"http://%@%@", _settings.ServerLocation, _settings.WebServicePath];
NSLog(_method);

NSString *soapMessage = [NSStringstringWithFormat:@"%@%@%@",
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n",
                         parameters,
                         @"</soap:Body>\n"
                         "</soap:Envelope>\n"];
//NSLog(@"soapMessage : %@",soapMessage);

NSURL *url = [NSURLURLWithString:_method];

ASIHTTPRequest *request = [ASIHTTPRequestrequestWithURL:url];

if(_settings.IsProxy)
{
    [request setProxyHost:_settings.HostIP];
    [request setProxyPort:(NSInteger)_settings.Port];
}   

constchar *utfString = [soapMessage UTF8String];
NSMutableData *req = [NSDatadataWithBytes:utfString length:strlen(utfString)]; 

[request addRequestHeader:@"Content-Type"value:@"text/xml; charset=utf-8"];
[request addRequestHeader:@"Content-Length"value:[NSStringstringWithFormat:@"%d", [soapMessage length]]]; 
[request addRequestHeader:@"SOAPAction"value:action]; 
if(_settings.IsProxy) 
{
    [request addRequestHeader:@"Host"value:_settings.HostIP]; 
}

[request setPostLength:[soapMessage length]];
[request setRequestMethod:@"POST"]; 
[request setPostBody:req];
[request setTimeOutSeconds:5];
[request setNumberOfTimesToRetryOnTimeout:1];

if(_settings.IsProxy)
{
    if([_settings.Usernamelength] > 0) 
    {
        [request setProxyUsername:_settings.Username];
    }

    if([_settings.Passwordlength] > 0) 
    {
        [request setProxyPassword:_settings.Password];
    }

}

//[request setValidatesSecureCertificate:NO];
[request setDelegate:self];
[request startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:06:52.820

我已经下载了[ASIHTTPRequest 库](http://allseeing-i.com/ASIHTTPRequest/)，它按我的预期工作。

在它起作用之前，我已经删除了下面的代码行

```
[request addRequestHeader:@"Host"value:_settings.HostIP]; 
```

# iphone - iphone开发：在滚动视图上滑动识别器

> ID：12246842
> 
> 赞同：0
> 
> 时间：2012-09-03T11:22:06.350
> 
> 标签：iphone, objective-c, ios, uiscrollview, swipe

在我的应用程序中，我的背景滚动条上有一个向上滑动手势识别器，但不知何故它不起作用。这是我下面的代码

它在 viewDidLoad

```
UISwipeGestureRecognizer *Swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(SwipeRecognizer:)];
Swipe.direction = UISwipeGestureRecognizerDirectionUp;
[backgroundScroller addGestureRecognizer:Swipe]; 
```

它是 SwipeRecognizer：

```
- (void) SwipeRecognizer:(UISwipeGestureRecognizer *)sender {
    if (sender.direction | UISwipeGestureRecognizerDirectionUp){
        NSLog(@" *** SWIPE UP ***");
    }
} 
```

但是我不能有任何日志。我错过了什么吗？谢谢。

**编辑：我发现了问题。当我说未启用滚动时，我可以识别手势。但我需要同时滚动和手势识别。不可能吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:52:54.440

像这样试试。如果您没有得到任何`NSLog(@" *** SwipeRecognizer ***")`输出，那么我认为您没有使用 SwipeRecognizer。

```
- (void) SwipeRecognizer:(UISwipeGestureRecognizer *)sender {
 NSLog(@" *** SwipeRecognizer ***");
if (sender.direction == UISwipeGestureRecognizerDirectionUp){
    NSLog(@" *** SWIPE UP ***");
}
} 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:24:28.810

你有没有像这样在 .h 文件中注册 UIGestureRecognizerDelegate ：

```
@interface yourViewController : UIViewController<UIGestureRecognizerDelegate> 
```

还

```
-(void)SwipeRecognizer:(UISwipeGestureRecognizer *)sender{
  if (sender.direction == UISwipeGestureRecognizerDirectionUp){
    NSLog(@" *** SWIPE UP ***");
  }
} 
```

# javascript - 如何使用复杂的 JSON 创建 YUI3 DataTable？

> ID：12246853
> 
> 赞同：0
> 
> 时间：2012-09-03T11:22:37.403
> 
> 标签：javascript, json, datatable, yui, yui3

我对 YUI 很陌生，在尝试从下面的 JSON 创建 YUI3 DataTable 时遇到问题 -

{

```
 "generations": [

    {
        "type": "Modern",
        "showName": "The Modern Generation",
        "imgURI": "file:/D:/projectGen.png",
        "relations": {
            "father": {
                "age": "49",
                "firstName": "George",
                "lastName": "Mathews",
                "priority": "1",
                "profession": "Service"
            },
            "mother": {
                "age": "47",
                "firstName": "Susan",
                "lastName": "Aldrin",
                "priority": "2",
                "profession": "Home-Maker"
            },
            "brother": {
                "age": "28",
                "firstName": "Martin",
                "lastName": "Mathews J",
                "priority": "3",
                "profession": "Engineer"
            },
            "sister": {
                "age": "23",
                "firstName": "Laura",
                "lastName": "Mathews J",
                "priority": "4",
                "profession": "Fashion Model"
            }
        }
    }
] 
```

}

我需要创建的表应如下所示 -

![在此处输入图像描述](../Images/61dd3ab90dff52aa71c410f943ce02ba.png)

有关如何执行此操作的任何信息？一个 JSFiddle 将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:28:47.667

我希望这有帮助。[http://jsfiddle.net/BM3kX/2/](http://jsfiddle.net/BM3kX/2/)

HTML：

```
<div class="yui3-skin-sam" id="datatable"></div>​ 
```

Javascript：

```
YUI().use('datatable', 'datasource-local', 'datasource-jsonschema',function(Y){
    var data  = {};//JSON here
    var localDataSource = new Y.DataSource.Local({source:data});
    localDataSource.plug(Y.Plugin.DataSourceJSONSchema, {
        schema: {
            resultListLocator: 'generations',
            resultFields: [{key:'showName'},
                           {
                               key:'father',
                               locator:'relations.father.firstName'
                           },
                           {
                               key:'mother',
                               locator:'relations.mother.firstName'
                           },
                           {
                               key:'brother',
                               locator:'relations.brother.firstName'},
                           {
                               key:'sister',
                               locator:'relations.sister.firstName'
                           }]
        }
    });
    var table = new Y.DataTable({
        columns: ["showName", "father","mother","brother","sister"]
    });

    table.plug(Y.Plugin.DataTableDataSource, {
        datasource: localDataSource
    });

    table.render('#datatable');
    table.datasource.load();

});​ 
```

# javascript - 如何使用 Spin.js 使微调器工作？

> ID：12246854
> 
> 赞同：8
> 
> 时间：2012-09-03T11:22:37.420
> 
> 标签：javascript, jquery, spinner

大家好，

我是 JavaScript 新手，在互联网上进行了大量研究并尝试实现微调器失败后，我决定问你。

我正在使用 Spin.js ( [http://fgnass.github.com/spin.js/#v1.2.6](http://fgnass.github.com/spin.js/#v1.2.6) )。它似乎是一个很棒的工具，但我根本无法让它发挥作用。我的问题是我做错了什么？我实在想不通。任何帮助都感激不尽。太感谢了。

这是我的一段代码：

```
 <script src="Scripts/Spin.js" type="text/javascript"></script>

    <script type="text/javascript">
           function spinnerInit() {
               var opts = {
                   lines: 13, // The number of lines to draw
                   length: 7, // The length of each line
                   width: 4, // The line thickness
                   radius: 10, // The radius of the inner circle
                   corners: 1, // Corner roundness (0..1)
                   rotate: 0, // The rotation offset
                   color: '#000', // #rgb or #rrggbb
                   speed: 1, // Rounds per second
                   trail: 60, // Afterglow percentage
                   shadow: false, // Whether to render a shadow
                   hwaccel: false, // Whether to use hardware acceleration
                   className: 'spinner', // The CSS class to assign to the spinner
                   zIndex: 2e9, // The z-index (defaults to 2000000000)
                   top: 'auto', // Top position relative to parent in px
                   left: 'auto', // Left position relative to parent in px
                   visibility: true
               };

               var target = document.getElementById('spinnerContainer');
               //target.style.display = "block";
               var spinner = new Spinner(opts).spin(target);
           }
       </script>

      <script type="text/javascript">
           $(document).ready(function () {
               $('#btnPerformSave').click(function () {
                   spinnerInit();
               });
           });
       </script>

     <div id="spinnerContainer" class="spinner" style="width: 100%; height: 150%;
           position: absolute; z-index: 100; background-color: Gray;
           left: 0; top:  0; bottom: 0;right: 0">
       </div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-03T11:56:19.697

尝试更换

```
var target = document.getElementById('spinnerContainer');
var spinner = new Spinner(opts).spin(target); 
```

和

```
$('#spinnerContainer').after(new Spinner(opts).spin().el); 
```

您需要将 spin 方法创建的 html 元素附加到 dom

这是一个让您入门的示例[http://jsfiddle.net/5CQJP/1/](http://jsfiddle.net/5CQJP/1/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-27T05:58:11.197

我不确定这个问题是否得到了回答，但对于那些仍在寻找答案的人：

我发现我需要将 javascript 移动到 spinnerContainer div 下。我相信如果您将 javascript 放在 onload 事件中，这也会起作用。这是我所做的：

```
<div id="spinnerContainer" class="spinner" style="width:100px;height:100px;background-color: Gray;">
</div>
<script src="Scripts/Spin.js" type="text/javascript"></script>
<script type="text/javascript">
    var opts = {
      lines: 13, // The number of lines to draw
      length: 7, // The length of each line
      width: 4, // The line thickness
      radius: 10, // The radius of the inner circle
      corners: 1, // Corner roundness (0..1)
      rotate: 0, // The rotation offset
      color: '#000', // #rgb or #rrggbb
      speed: 1, // Rounds per second
      trail: 60, // Afterglow percentage
      shadow: false, // Whether to render a shadow
      hwaccel: false, // Whether to use hardware acceleration
      className: 'spinner', // The CSS class to assign to the spinner
      zIndex: 2e9, // The z-index (defaults to 2000000000)
      top: 'auto', // Top position relative to parent in px
      left: 'auto' // Left position relative to parent in px
    };
    var target = document.getElementById('spinnerContainer');
    var spinner = new Spinner(opts).spin(target);
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T19:34:15.133

这是我的答案。效果很好。

```
//Declare Script
<script src="Scripts/spin.js" type="text/javascript"></script>

 <button  id="btnSearchClick">Search</button>

//Displays Loading Spinner
<div id="loading">
    <div id="loadingcont">
        <p id="loadingspinr">
        </p>
    </div>
</div>

<script type="text/javascript">
     //On button click load spinner and go to another page
     $("#btnSearchClick").click(function () {  
        //Loads Spinner
        $("#loading").fadeIn();
        var opts = {
            lines: 12, // The number of lines to draw
            length: 7, // The length of each line
            width: 4, // The line thickness
            radius: 10, // The radius of the inner circle
            color: '#000', // #rgb or #rrggbb
            speed: 1, // Rounds per second
            trail: 60, // Afterglow percentage
            shadow: false, // Whether to render a shadow
            hwaccel: false // Whether to use hardware acceleration
        };
        var trget = document.getElementById('loading');
        var spnr = new Spinner(opts).spin(trget);

        //Go another page.
        window.location.href = "http://www.example.com/";
   });
 </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:37:51.953

尝试这个：

```
var target = document.getElementById('spinnerContainer');
           //target.style.display = "block";
           var spinner = new Spinner(opts); 
```

如果你使用 jQuery：

```
 $(target).html(spinner.el); 
```

如果没有，如文档中所述：

```
 target.innerHtml = '';
           target.appendChild(spinner.el); 
```

我没有尝试过，但它应该可以工作。如果出现问题，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T14:09:42.830

我知道这已经很晚了，但我很好奇你是否有这个工作。我会告诉你一件愚蠢的事情，我做了一段时间并没有意识到这一点。我正在使微调器与它所显示的背景颜色相同，这就是我看不到它的原因。 我也使用了JQuery，如此处所示[https://gist.github.com/its-florida/1290439](https://gist.github.com/its-florida/1290439)

# c++ - 我的冒泡排序程序有什么错误？

> ID：12246861
> 
> 赞同：6
> 
> 时间：2012-09-03T11:23:21.127
> 
> 标签：c++, sorting, bubble-sort

我一遍又一遍地检查代码中的任何问题，但无法弄清楚为什么我的冒泡排序程序没有给出正确的输出。你能帮我鉴定一下吗？

```
#include <iostream.h>
#include <conio.h>

 using namespace std;

 main()

{
  int number[10];
  int temp=0;
  int i=0;

  cout<<"Please enter any ten numbers to sort one by one: "<<"\n";

  for (i=0;i<10;i++)
  {
      cin>>number[i];
      }
  i=0;

  for (i=0;i<10;i++)
  {

      if(number[i]>number[i+1])

      {
      temp=number[i+1];
      number[i+1]=number[i];
      number[i]=temp;
                          }

      }
      i=0;
      cout<<"The sorted numbers are given below:"<<"\n";

      for (i=0;i<10;i++)
      {
        cout<<number[i]<<"\n";  
          }

          getch();
  } 
```

编辑：我已经接受了你们所说的必须有一个外循环。但我又在想我写的东西。我认为具有气泡条件的唯一循环应该进行排序。这是我的想法：

```
for (i=0;i<10;i++)
    if(number[i]>number[i+1])
    {
        temp=number[i+1];
        number[i+1]=number[i];
        number[i]=temp;

    }
} 
```

现在我解释一下我在想这个循环“应该”做什么。它将首先将 number[0] 与 number[1] 进行比较。如果满足条件，它将执行 IF 语句主体中的操作。然后 i 将增加 1(i++)。然后在下一次迭代中，比较的值将是 number[1] 和 number[2]。那为什么它没有发生并且循环仅在通过后退出？换句话说，可能是我想问 IF 语句不会在 for 循环中重复吗？在我看来确实如此。我非常感谢您的帮助和意见，我的问题可能很小，但这就是我的进步。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:25:34.267

这只是冒泡排序的第一步。您需要重复排序部分，直到在通过期间不执行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:25:33.400

*   您只运行一次气泡循环 - 您应该运行它直到所有内容都排序
*   你的气泡循环到十，访问`number[i+1]`，这是一个未定义的行为

以下是修复主循环的方法：

```
bool again;
do {
    again = false;
    for (i=0;i<9;i++)
    { //       ^-- Nine, not ten
        if(number[i]>number[i+1])
        {
            temp=number[i+1];
            number[i+1]=number[i];
            number[i]=temp;
            again = true;
        }
    }
} while (again); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:25:47.253

冒泡排序是 O(n*n)(worst case)---->需要一个从迭代开始到结束的内循环。然后你应该检查是否在中途完成以获得更好的情况，例如 O(nlogn) 或 O(n)。

```
for (i=0;i<9;i++)     //from 0 up to N-1
{ 
  failed=false;      //for the checking if finished
  for(int j=i+1;j<10) //from next element up to N
   {
     if(number[i]>number[j])
     {
         temp=number[j];
         number[j]=number[i];
         number[i]=temp;
         failed=true;
      }

   }
  if(!failed)break;         //if failed=false then it is done.
} 
```

您的错误仅从 0--->N 迭代一次

*   外循环应该从 0--->N-1 开始，因为下一个元素最后会是 N。
*   内循环应该从 i+1 到 N。i+1 表示`next`元素。

如果需要在 n*n 次迭代之前完成时中断，则需要用布尔值告知

例子：

`Initial : 4 9 3 6 2 5 7`

```
1st pass: 4 3 6 2 5 7 9  ---> failed at many i(you see "9" bubbled )

2nd pass: 3 4 2 5 6 7 9 ---> failed at several i's(you see "6" bubbled)

3rd pass: 3 2 4 5 6 7 9 ---> failed(once) at 4 and 2(you see "4" bubbled)

4th pass: 2 3 4 5 6 7 9 ---> failed once at 2 and 3(3 bubbles)

5th pass: 2 3 4 5 6 7 9 --->same! did not fail. Finished without looping 2  more 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T11:26:02.503

拥有它非常危险

```
int number[5]; 
```

并要求用户输入 10 个值；-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T11:26:03.930

您将超出数组的范围。让循环运行 5 次，而不是 10 次。

其次，您试图仅通过一次对数组进行排序。制作嵌套循环。进行完整排序。例如，如果你有这个数组。

```
3  4  1  2  6 
```

一次通过后，就像你正在做的那样，它看起来像这样。

```
3  1  2  4  6 
```

所以这个数组没有完全排序。做两个循环以完成排序。

并确保运行循环直到`size - 1`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T11:27:35.517

这可能是因为您声明了一个大小为 5 的数组，`number[5]`但尝试输入和访问 10 个元素。

如果要在数组中有 10 个元素，请将其声明为`int number[10];`

并使用 for 循环：

```
for (i=0;i<9;i++)     //from 0 up to N-1
{
  for(int j=i+1;j<10) //from next element up to N
   {
  if(number[i]>number[i+1])

     {
  temp=number[i+1];
  number[i+1]=number[i];
  number[i]=temp;
      }

   }
} 
```

# php - cakephp 获取模型中文本字段的值

> ID：12246862
> 
> 赞同：0
> 
> 时间：2012-09-03T11:23:21.483
> 
> 标签：php, cakephp, cakephp-model

嗨，我在添加视图中动态添加了输入字段。当我提交表单时，我希望将所有输​​入字段连接成一个字符串并存储在单个数据库字段中。

我试图使用 cakephp 的 beforeSave 方法来实现这一点，但我似乎无法找到如何获取模型中文本字段的值。

```
function beforeSave($options)
{
    $result = '';
    $bool = true;
    $counter = 0;

    while($bool == true)
    {
    $result = $result + ',' + $this->data['Variable']['selectOptions' + counter];
    }

    return true;
} 
```

有人对如何实现这一目标有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:36:23.893

在我看来（从 MVC 的角度来看）最好在控制器中连接字段，然后在保存模型之前取消设置不必要的字段......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:38:39.183

在模型中获取帖子值后，您可以将数组值合并为一个像这样的变量..

```
<?php 
   $var = array('test1','test2','test3','test4','test5','test6');
   $new_values = implode(',',$var);
   echo $new_values;
?> 
```

您可以在保存到数据库后检索这些值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:46:13.787

这可能不是完美的答案，但可能会让您在这个方向上取得领先

```
function beforeSave($options = array()) {

    pr($this->data); // <= show data you intend to save
    exit;
} 
```

使用 foreach 循环数据数组（$this->data）并对值执行连接并将连接的字符串分配给字段名称

```
function beforeSave($options = array()) {
foreach  ($this->data['Variable'] as $key=>$value)
{
$feildflag = strstr($key, 'selectOptions');
if($feildflag){
$concatenatedstring .= $value;
}
}
$this->data['Variable']['your_feild_name'] = $concatenatedstring ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:43:34.753

您的动态表单字段应类似于 foreach 循环：

```
<?php echo $this->Form->input('Model.field][', array()); 
```

在您的模型中：

```
function beforeSave($options)
{
    if(!empty($this->data))
    {
         $this->data['Model']['common_field'] = implode(",", $this->data['Model'['field'];
         unset($this->data['Model']['field']);
    }  
} 
```

# html - 调整 R 控制台中的行之间的间隙

> ID：12246869
> 
> 赞同：0
> 
> 时间：2012-09-03T11:23:46.390
> 
> 标签：html, r

当我在 R 中解析网站时，（系统：R+debian）控制台中的 html 对象输出让我感到不舒服。

线与线之间的差距很大。我怎样才能使它正常，缩小线条之间的差距？

也许您可以使用以下代码看到相同的输出。

```
options(encoding="gbk")
library(XML)
baseURL <- "http://www.jb51.net/article/27174.htm"
txt <- readLines(baseURL)
txt 
```

![在此处输入图像描述](../Images/8453ffeca807b819c1898c387ddf0778.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:43:18.447

有趣的是，似乎当`print`-ing 一个向量时，最长的元素决定了所有元素的间距。

你最长的字符串是`txt[374]`：在我的屏幕上，它需要 19 行；这意味着 的每个元素都`txt`将使用 19 行打印，可能会有很多空白。

打印列表时您没有这个问题，因此解决方案是：

```
print(as.list(txt)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:20:20.360

尝试用`gsub()`什么来代替空间。

# clearcase-ucm - 交付时出现 UCM ClearCase 错误

> ID：12246872
> 
> 赞同：1
> 
> 时间：2012-09-03T11:23:50.023
> 
> 标签：clearcase-ucm

![错误信息](../Images/409f8c4b2df8d5d0f52d808b9a312a9f.png)

在过去的几天里，我一直看到这个错误。因此，我无法进行任何进一步的交付。

当我尝试将一些 dll 和 exe（二进制文件）从我的流中传递到主流时，就会发生这种情况。交付失败，因为 ClearCase 无法合并二进制文件。

我无法“恢复配送”或“取消配送”。同样的错误总是出现。

我试图查看集成视图并发现二进制文件“被劫持”。我解开了劫持。但这也没有解决问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:45:45.187

您无法取消处于完整步骤中的交付。

你可以做的是：

*   描述交付活动以列出所有签出的文件
*   尝试签入这些文件
*   恢复交付

您可以通过（在 shell 中）进入目标视图的根目录并键入以下内容来获取当前的交付活动：

```
cleartool lsact -cact 
```

使用结果列出当前交付的所有版本：

```
cleartool describe -l activity:deliver.xxxx@\yourPVob 
```

其中一些将在结帐中（`grep CHECKEDOUT`以过滤它们）

请注意，对于二进制文件，您可以定义特殊的合并类型：请参阅“ [Clearcase UCM 正在尝试合并 pdf 文件](https://stackoverflow.com/questions/8789258/clearcase-ucm-is-trying-to-merge-pdf-files/8789593#8789593)”。
在此之前，您可能必须在每个未合并二进制文件的源版本和目标版本之间制作一些“红色箭头”，然后手动将它们从源复制到目标。
参见“[明文合并箭头](https://stackoverflow.com/questions/2397575/merge-arrow-in-clear-case/2397867#2397867)”。

# android - AndEngine Vector2 类

> ID：12246876
> 
> 赞同：1
> 
> 时间：2012-09-03T11:24:03.440
> 
> 标签：android, andengine

我想问一个基本问题只是为了确定。当我们使用 Vector2 类在 andengine 中表示一些向量时，就像我们在联合创建中使用时一样：

```
jointDef.localAnchorA.set(new Vector2(1, 1)); 
```

传递的值，即 1、1 是否分别代表 1 米？

多一点解释。假设我创建了两个实体：

```
Rectangle rect1 = new Rectangle(10, 10, 100, 100, vertexBufferObjectManager);
        Body body1 = PhysicsFactory.createBoxBody(mPhysicsWorld, rect1, BodyType.DynamicBody, FIXTURE_DEF);

        Rectangle rect2 = new Rectangle(110, 110, 50, 50, vertexBufferObjectManager);
        Body body2 = PhysicsFactory.createBoxBody(mPhysicsWorld, rect2, BodyType.DynamicBody, FIXTURE_DEF); 
```

并想在下图所示的位置创建一个旋转关节：

![在此处输入图像描述](../Images/538686603fd089c28af2bb92f357c3b7.png)

那么向量 localAnchorpointA 和 localAnchorPointB 应该设置什么值，以使红色矩形的右上角接触白色矩形的中心？喜欢：

```
jointDef.localAnchorA.set(new Vector2(?, ?));
    jointDef.localAnchorB.set(new Vector2(?, ?)); 
```

这对于理解 vector2 类的使用非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:44:56.340

您需要了解 Vector2 类在游戏开发中代表什么。它基本上将提供的坐标封装在 2D 空间中。更进一步，它可以用于许多应用，从距离计算到其他基本代数计算。[**Stiegart 博客**](http://steigert.blogspot.com/2012/05/11-libgdx-tutorial-vectors.html)将让您对 android 中的 Vector2 有一个非常清晰的认识。希望它能澄清困惑和误解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:54:50.853

Vector2 没有关联的单位，您可以在渲染时决定坐标空间在屏幕上的样子（通过选择合适的相机）。对于天使你必须使用弧度。

但正如我所见，您正在将它传递给 Box2D 物理引擎。建议使用接近 m/kg/s 的单位。让你的角色高 2m 将是一个不错的选择。在你的小行星游戏中让你的宇宙飞船 Enterprise 10 公里的距离太大了。

更多信息可以在这篇文章中找到：http: [//box2d.org/2011/12/pixels/](http://box2d.org/2011/12/pixels/)。

# python - 为 Python 3 安装 Swampy

> ID：12246885
> 
> 赞同：0
> 
> 时间：2012-09-03T11:24:35.160
> 
> 标签：python, windows-7, package, python-3.2, swampy

我目前正在我的计算机上运行 Python 3.2，并且需要为我正在阅读的一本书安装 Swampy。阅读教程的许多页面和页面让我更加困惑。我已经下载了“swampy1.4”。我正在尝试按照此页面上的一组说明执行此操作 - [http://www.instructables.com/id/How-to-install-Python-packages-on-Windows-7/](http://www.instructables.com/id/How-to-install-Python-packages-on-Windows-7/)。

尝试将目录更改为 simplejson2.6.1（我在页面上有此软件的更新版本）我收到此错误 - “系统找不到指定的路径。”

谁能告诉我哪里出错了？将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-11T21:23:53.153

变得沼泽：

执行 pip install 不会为 python 3 安装 swampy。

此方法应该有效：从[此处](http://www.greenteapress.com/thinkpython/swampy/install.html)下载源代码。解压文件到你想要的目录。你将不得不记住这个目录。

接下来，在以下目录中创建一个 swampy.txt 文件：

C:/Python32/Lib/站点包

这假设您在 C:/Python32 中安装了 python。您应该根据安装 python 的位置来修改它。

还记得解压源代码的目录吗？在 swampy.txt 中键入源代码文件夹的完整路径，而不是您解压缩到的目录。之后，将刚刚创建的文本文件的扩展名从 .txt 更改为 .pth。这样做是将源代码添加到 python 的搜索路径中。

你现在应该可以走了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:42:10.827

您现在可以在 Python 3.2 中实际使用源代码中的 swampy。请参阅[http://www.greenteapress.com/thinkpython/swampy/install.html](http://www.greenteapress.com/thinkpython/swampy/install.html)。它清楚地说：

*Python 3 的 Swampy 不作为包提供。但源代码在 zip 文件中可用：Python 3 的 Swampy 源代码：swampy-2.1.python3.zip*

我尝试按照网页上的说明在 Windows Vista 下使用它，至少导入 TurtleWorld 工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:09:06.650

引用[Swampy 安装说明](http://www.greenteapress.com/thinkpython/swampy/install.html)：

> 您应该看到如下内容：
> 
> ```
> Python 2.6.4 (r264:75706, Dec  7 2009, 18:45:15)
> >>> 
> ```
> 
> 如果是这样，你有 Python。如果版本号以 2 开头，则您拥有 Python 2，即 Think Python 中使用的 Python 版本。如果版本号以 3 开头，则您拥有 Python 3。**您将无法将 Swampy 与 Python 3 一起使用。**

我想你希望 Swampy 只是为了学习 Python。在这种情况下，我会向您推荐[官方 Python 3 教程](http://docs.python.org/release/3.2.3/tutorial/)。

如果你想继续阅读本书，不要害怕安装[Python 2.7.3](http://www.python.org/getit/releases/2.7.3/)。假设您正确设置[了 PATH 变量](http://en.wikipedia.org/wiki/PATH_%28variable%29)，即使在 Windows 上，多个版本的 Python 也可以共存。

还有一个更新版本的 Swampy ( [2.1.1](http://pypi.python.org/pypi/swampy/2.1.1) )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T21:48:41.087

该链接是正确的，但即使对于经验丰富的 Windows 开发人员来说，解释也很模糊。它假定对 Python 安装过程 IMO 有太多了解。

例如“使用此代码的最简单方法是将其解压缩到您的主目录中，cd 进入解压缩的目录并在那里工作。” “主目录”是什么意思？然后是对“解压缩目录”的引用，我认为它是指主目录。名称的变化令人困惑。

不过，假设解压缩到 C:\Python33\lib\swampy-2.1，然后从那里开始工作。这是什么意思？我只能假设这意味着将您的代码保存在沼泽的“主目录”中。将 Python 代码保存在库目录中并不是最佳做法。我使用 \dev\python\test\ 但后来

```
Python 3.3.3 (v3.3.3:c3896275c0f6, Nov 18 2013, 21:18:40) [MSC v.1600 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> import swampy
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import swampy
ImportError: No module named 'swampy' 
```

但是，如果将 swampy 目录简单地重命名为 swampy（来自 swampy-2.1），那么一切正常！

```
>>> import swampy
>>> from swampy.Gui import *
>>> g=Gui()
>>> g.title('Swampy.GUI')
>>> g.mainloop() 
```

仅供参考，这是我的路径（我的开发驱动器是 E: 而不是 C:)

```
E:\Python33\Lib>path
PATH=E:\Python33\;E:\WINDOWS\system32;E:\WINDOWS;E:\WINDOWS\System32\Wbem;E:\Program Files\Microsoft SQL Server\100\Tool
s\Binn\;E:\Program Files\Microsoft SQL Server\100\DTS\Binn\;E:\WINDOWS\system32\WindowsPowerShell\v1.0;E:\Program Files\
Microsoft\Web Platform Installer\;E:\Program Files\Microchip\xc8\v1.21\bin;E:\Program Files\GtkSharp\2.12\bin 
```

而且我没有其他帖子建议的 PYTHONPATH 环境变量。

# python - Python：将点分隔的十六进制值转换为字符串？

> ID：12246886
> 
> 赞同：0
> 
> 时间：2012-09-03T11:24:44.380
> 
> 标签：python, string, python-2.7, hex, data-conversion

在这篇文章中：[将字符串打印为十六进制字节？](https://stackoverflow.com/questions/12214801/python-print-a-string-as-hex-bytes)我学会了如何将字符串打印到十六进制字节的“数组”中，现在我需要一些相反的东西：

因此，例如输入将是：`73.69.67.6e.61.74.75.72.65`输出将是一个字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:28:39.963

您可以使用内置[`binascii`](http://docs.python.org/library/binascii.html)模块。但请注意，此功能仅适用于 ASCII 编码字符。

```
binascii.unhexlify(hexstr) 
```

但是，您的输入字符串需要是无点的，但这很容易通过一个简单的

```
string = string.replace('.','') 
```

另一种（可以说更安全）的方法是通过以下方式使用 base64：

```
import base64
encoded = base64.b16encode(b'data to be encoded')
print (encoded)
data = base64.b16decode(encoded)
print (data) 
```

或在您的示例中：

```
data = base64.b16decode(b"7369676e6174757265", True)
print (data.decode("utf-8")) 
```

可以在输入`b16decode`方法之前对字符串进行清理。请注意，我使用的是 python 3.2，您可能不一定需要`b`字符串前面的 out 来表示字节。

示例在[这里找到](http://docs.python.org/library/base64.html#module-base64)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:30:41.367

没有[`binascii`](http://docs.python.org/library/binascii.html)：

```
>>> a="73.69.67.6e.61.74.75.72.65"  
>>> "".join(chr(int(e, 16)) for e in a.split('.'))  
'signature'  
>>> 
```

或更好：

```
>>> a="73.69.67.6e.61.74.75.72.65"  
>>> "".join(e.decode('hex') for e in a.split('.')) 
```

PS：适用于 unicode：

```
>>> a='.'.join(x.encode('hex') for x in 'Hellö Wörld!')
>>> a
'48.65.6c.6c.94.20.57.94.72.6c.64.21'
>>> print "".join(e.decode('hex') for e in a.split('.'))
Hellö Wörld!
>>> 
```

**编辑：**

这里不需要生成器表达式（thx to thg435）：

```
a.replace('.', '').decode('hex') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:35:07.053

使用[string split](http://docs.python.org/library/stdtypes.html#str.split)来获取字符串列表，然后使用[base 16 来解码](http://docs.python.org/library/functions.html#int)字节。

```
>>> inp="73.69.67.6e.61.74.75.72.65"
>>> ''.join((chr(int(i,16)) for i in inp.split('.')))
'signature'
>>> 
```

# java - The method getStatusLine() is undefined for the type HttpClient

> ID：12246891
> 
> 赞同：0
> 
> 时间：2012-09-03T11:25:23.050
> 
> 标签：java, android

I have been using HttpClient to connect android with Django. Now i need to find out the response code . I tired the following

```
String url = "http://10.0.2.2:8000/api/ecp/profile/?format=json";
HttpClient client = new DefaultHttpClient();
HttpGet httpget = new HttpGet(url);
httpget.setHeader("AUTHORIZATION", un.getText().toString()+":"+hash);
client.execute(httpget);
int code = client.getStatusLine().getStatusCode(); 
```

but it throws following error

```
The method getStatusLine() is undefined for the type HttpClient 
```

Any idea what to do? Thanx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:31:07.787

you should do it on response not client

```
HttpResponse respone=client.execute(httpget);

 int athul=respone.getStatusLine().getStatusCode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:37:25.040

You can try this code.May be it will be helpful for you.

```
final HttpResponse res = httpClient.execute(httpget);

    final String code = res.getStatusLine().toString(); 
```

# visual-studio-2010 - Visual Studio“添加服务引用” - 未获取所有服务设置

> ID：12246892
> 
> 赞同：1
> 
> 时间：2012-09-03T11:25:23.610
> 
> 标签：visual-studio-2010, wcf, binding, client, wcf-binding

我的目的是确保 - 当有人在他自己的 Visual Studio 中单击“添加服务引用”并添加对我的 WCF 服务的引用时 - 他收到的不是默认设置，而是服务的设置。

特别是，我感兴趣的“绑定”类的一个属性：useDefaultWebProxy，我需要将它设置为“false”。

我试过这个，但没有结果： 在服务的 Web.config 文件中：

```
<system.serviceModel>
  <bindings>
   <basicHttpBinding>
    <binding name="NewBinding0" ... useDefaultWebProxy="false">
     <readerQuotas ... />
    </binding>
   </basicHttpBinding>
  </bindings>
  <services>
   <service behaviorConfiguration="NewBehavior0" name="pippo.pluto">
    <endpoint address="" behaviorConfiguration="" binding="basicHttpBinding" 
             bindingConfiguration="NewBinding0" name="pluto" contract="pippo.ipluto" />
    <host>
     <timeouts ... />
    </host>
   </service>
  </services>
  <behaviors>
   <serviceBehaviors>
    <behavior name="NewBehavior0">
     <serviceMetadata ... />
     <serviceDebug ... />
    </behavior>
   </serviceBehaviors>
  </behaviors>
 </system.serviceModel> 
```

无事可做：在客户端的 Web.config 中，我总是得到...

```
<basicHttpBinding>
  <binding name="pluto" ... useDefaultWebProxy="true">
   <readerQuotas ... />
   <security ...>
    <transport ... />
    <message ... />
   </security>
  </binding>
 </basicHttpBinding> 
```

似乎服务的 bindingConfiguration 完全被忽略了，不仅 useDefaultWebProxy 还有其他属性 - 例如 maxBufferSize - 保持默认值（65536）

我能怎么做？皮莱吉

# css - CSS：IE中的灰度（百分比）

> ID：12246894
> 
> 赞同：4
> 
> 时间：2012-09-03T11:25:26.230
> 
> 标签：css, internet-explorer, webkit, grayscale

是否有一种 css 方法可以以适当的百分比对 div 进行灰度化？我可以在支持 webkit 的非 IE 浏览器中执行此操作：

```
-webkit-filter: grayscale(0.7); //e.g. 70% 
```

但在 IE 中，我只能使用这样的布尔函数：

```
filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1); //with '1' 
```

我可以找到一种方法（可能是非 svg 方法），我可以用百分比对图像进行灰度化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:31:53.787

检查此链接[**去饱和**](http://www.pixastic.com/lib/docs/actions/desaturate/)

**浏览器兼容性：**

Internet Explorer 5.5+、Opera 9.5+、Firefox 2+、WebKit Nightly

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:36:17.957

@AK 的建议看起来不错，虽然我无法立即看到如何进行部分灰度...

对于纯 CSS 解决方案 - 您可以通过使任何您想要的灰度部分透明并在其后面放置背景颜色来实现类似的效果，如下所示：http: [//jsfiddle.net/R23LG/](http://jsfiddle.net/R23LG/)

显然，您希望使用透明度设置等来获得您想要的效果。

# android - 安装eclipse后自动完成（alt+'/'）不起作用

> ID：12246901
> 
> 赞同：0
> 
> 时间：2012-09-03T11:25:41.420
> 
> 标签：android, eclipse

重新安装后，当我在编辑器中按`Alt`+时，eclipse 没有给我一个建议列表。 但是按下后有提示音。 我检查了，所有的建议都在。 而且我还检查了，它配置正确。 现在我该如何解决这个问题？`/`

`preference->java->editor->content assist->advanced`
`preference->general->keys`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:27:09.237

我认为自动完成由 ctrl+space 使用

# python - 是否存在任何 python 异常通知程序？

> ID：12246908
> 
> 赞同：-1
> 
> 时间：2012-09-03T11:26:03.203
> 
> 标签：python, exception, exception-handling, exception-notifier

我的要求是什么？

--> 我需要异常通知器，它将通过电子邮件发送给某些特定的配置用户，关于在普通 python 应用程序和 web.py 中发生的任何类型的异常。

我想要类似的东西[http://matharvard.ca/posts/2011/jul/31/exception-notification-for-rails-3/](http://matharvard.ca/posts/2011/jul/31/exception-notification-for-rails-3/)

有没有同类型的礼物？？

请尽快回复。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T23:19:09.263

如果你没有使用任何 python 重量级的框架，请尝试：[https](https://github.com/fossilet/exception-notifier) ://github.com/fossilet/exception-notifier ，它看起来类似于 Rails 的异常通知，但非常简单。

如果您使用的是 django，似乎可以使用它的内置功能：[https](https://docs.djangoproject.com/en/dev/howto/error-reporting/) ://docs.djangoproject.com/en/dev/howto/error-reporting/ （另见：[https ://github.com/ pinax/django 通知](https://github.com/pinax/django-notification)）

如果使用龙卷风，试试这个：[https](https://github.com/kanevski/tornadotoad) ://github.com/kanevski/tornadotoad 这是python中与rails最相似的解决方案。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:42:51.693

你可以通过以下方式得到你想要的：

*   将代码包装在`try..except`子句中。
*   使用`logging`模块记录具有一定严重性级别的异常，例如`ERROR`。
*   为特定级别及以上的异常设置一个`SMTPHandler`。

这种方式相当灵活。您的消息可以发送到多个位置（如日志文件），并且您可以轻松地重新配置您的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:37:43.490

您可以覆盖模块中的`excepthook`函数[`sys`](http://docs.python.org/library/sys.html#sys.excepthook)，并在那里处理任何未处理的异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:29:46.457

我和你有同样的要求。我编写[了一个简单的模块](https://github.com/fossilet/exception-notifier)来将未捕获的异常发送给开发人员，并将它们记录到日志文件中。它用于我们团队用 Python 编写的 cron 脚本。希望它对你也有用。

# grep - Shell：在许多文件中查找匹配行

> ID：12246910
> 
> 赞同：5
> 
> 时间：2012-09-03T11:26:05.577
> 
> 标签：grep

我正在尝试使用 shell 脚本（以及“一个衬里”）来查找大约 50 个文件之间的任何公共行。 **编辑：**注意我正在寻找出现在所有文件中的一行（行）

到目前为止，我已经尝试过 grep `grep -v -x -f file1.sp *`，它只匹配所有其他文件中的文件内容。

我也尝试过`grep -v -x -f file1.sp file2.sp | grep -v -x -f - file3.sp | grep -v -x -f - file4.sp | grep -v -x -f - file5.sp`等...但我相信使用要作为 STD 搜索的文件的搜索不是要匹配的模式。

有谁知道如何使用 grep 或其他工具来做到这一点？

我不介意它是否需要一段时间才能运行，我必须在大约 500 个文件中添加几行代码，并希望在每个文件中找到一个共同的行以便插入“之后”（它们最初是只是来自一个文件的 c&p，所以希望有一些共同点！）

谢谢你的时间，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:06:29.730

当我第一次读到这篇文章时，我以为您正在尝试找到“任何共同点”。我认为这是“查找重复行”的意思。如果是这种情况，以下内容就足够了：

```
sort *.sp | uniq -d 
```

* * *

重新阅读您的问题后，您似乎实际上是在尝试查找“出现在所有文件中”的行。如果是这种情况，您将需要知道目录中的文件数：

```
find . -type f -name "*.sp" | wc -l 
```

如果这返回数字 50，那么您可以`awk`像这样使用：

```
WHINY_USERS=1 awk '{ array[$0]++ } END { for (i in array) if (array[i] == 50) print i }' *.sp 
```

* * *

您可以合并此过程并编写这样的单行代码：

```
WHINY_USERS=1 awk -v find=$(find . -type f -name "*.sp" | wc -l) '{ array[$0]++ } END { for (i in array) if (array[i] == find) print i }' *.sp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T00:07:09.773

## 旧的 bash 答案 (O(n); 打开`2 * n`文件)

从@mjgpy3 答案，您只需要创建一个 for 循环并使用`comm`，如下所示：

```
#!/bin/bash

tmp1="/tmp/tmp1$RANDOM"
tmp2="/tmp/tmp2$RANDOM"

cp "$1" "$tmp1"
shift
for file in "$@"
do
    comm -1 -2 "$tmp1" "$file" > "$tmp2"
    mv "$tmp2" "$tmp1"
done
cat "$tmp1"
rm "$tmp1" 
```

保存在 a 中`comm.sh`，使其可执行，然后调用

```
./comm.sh *.sp 
```

假设你所有的文件名都以`.sp`.

## 更新的答案，python，每个文件只打开一次

查看其他答案，我想给出一个在不使用任何临时文件的情况下打开每个文件一次，并支持重复行的答案。此外，让我们并行处理文件。

给你（在python3中）：

```
#!/bin/env python
import argparse
import sys
import multiprocessing
import os

EOLS = {'native': os.linesep.encode('ascii'), 'unix': b'\n', 'windows': b'\r\n'}

def extract_set(filename):
    with open(filename, 'rb') as f:
        return set(line.rstrip(b'\r\n') for line in f)

def find_common_lines(filenames):
    pool = multiprocessing.Pool()
    line_sets = pool.map(extract_set, filenames)
    return set.intersection(*line_sets)

if __name__ == '__main__':
    # usage info and argument parsing
    parser = argparse.ArgumentParser()
    parser.add_argument("in_files", nargs='+', 
            help="find common lines in these files")
    parser.add_argument('--out', type=argparse.FileType('wb'),
            help="the output file (default stdout)")
    parser.add_argument('--eol-style', choices=EOLS.keys(), default='native',
            help="(default: native)")
    args = parser.parse_args()

    # actual stuff
    common_lines = find_common_lines(args.in_files)

    # write results to output
    to_print = EOLS[args.eol_style].join(common_lines)
    if args.out is None:
        # find out stdout's encoding, utf-8 if absent
        encoding = sys.stdout.encoding or 'utf-8'
        sys.stdout.write(to_print.decode(encoding))
    else:
        args.out.write(to_print) 
```

将其保存到`find_common_lines.py`, 并调用

```
python ./find_common_lines.py *.sp 
```

`--help`该选项的更多使用信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-08T14:28:04.423

结合这两个答案（[ans1](https://stackoverflow.com/a/12247194/2585303)和[ans2](https://stackoverflow.com/a/746495/2585303)）我认为您无需对文件进行排序即可获得所需的结果：

```
#!/bin/bash
ans="matching_lines"

for file1 in *
do 
    for file2 in *
        do 
            if  [ "$file1" != "$ans" ] && [ "$file2" != "$ans" ] && [ "$file1" != "$file2" ] ; then
                echo "Comparing: $file1 $file2 ..." >> $ans
                perl -ne 'print if ($seen{$_} .= @ARGV) =~ /10$/' $file1 $file2 >> $ans
            fi
         done 
done 
```

只需保存它，赋予它执行权限 ( `chmod +x compareFiles.sh`) 并运行它。它将获取当前工作目录中存在的所有文件，并将进行全部比较，并将结果留在“matching_lines”文件中。

需要改进的地方：

*   跳过目录
*   避免将所有文件比较两次（file1 vs file2 和 file2 vs file1）。
*   也许在匹配字符串旁边添加行号

希望这可以帮助。

最好的，

艾伦·卡尔波夫斯基

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T11:39:53.590

看到[这个答案](https://stackoverflow.com/questions/746458/how-to-show-lines-in-common-reverse-diff)。我最初虽然`diff`听起来像你所要求的，但这个答案似乎更合适。

# java - 从服务器下载图像位图在 Android 2.2 上返回 null

> ID：12246914
> 
> 赞同：3
> 
> 时间：2012-09-03T11:26:10.467
> 
> 标签：java, android

我正在使用以下功能从服务器下载图像。这适用于除 Android 2.2 Froyo 设备之外的所有 android 版本。请帮忙。

```
 private Bitmap downloadImage(String url) {
        System.out.println("Splash Ad downloadImage Url " + url);
        Bitmap bm = null;
        try {
            URL aURL = new URL(url);
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
        } catch (IOException e) {
            Log.e("Hub", "Error getting the image from server : "
                    + e.getMessage().toString());
            e.printStackTrace();
        }
        return bm;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:19:53.803

试试这个代码。

```
public class ImageDisplay extends Activity {
         ImageView image;
         ProgressBar spinner;
         TextView message;
         String path;
@Override
      public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_image_display);
    image=(ImageView) findViewById(R.id.imageDisplay);
    spinner=(ProgressBar)findViewById(R.id.progressBar_spinner);
    message=(TextView)findViewById(R.id.textView1);
    spinner.setVisibility(View.INVISIBLE);
   displayImage();
}
       private class DownloadImage extends AsyncTask<String, Void,Bitmap >
             {
Bitmap bitmap;
String error_messsage="No error";
@Override
protected Bitmap  doInBackground(String... urls) {
    for(String url:urls){
     HttpUriRequest request = new HttpGet(url.toString());
        HttpClient httpClient = new DefaultHttpClient();
        try {
            HttpResponse response = httpClient.execute(request);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
              HttpEntity entity = response.getEntity();
              byte[] bytes = EntityUtils.toByteArray(entity);
          Log.e("here",""+bytes.length); 
              bitmap = BitmapFactory.decodeByteArray(bytes, 0,bytes.length);
              Thread.sleep(1000);
            }
            else
            {
                error_messsage="Download failed, HTTP response code "+ statusCode + " - " + statusLine.getReasonPhrase();                   
            }
        } catch (Exception er) {
            Log.e("Error",""+er);
        }}
        //image.setImageBitmap(bitmap);
    return bitmap ;
}

@Override
protected void onPostExecute(Bitmap result) {
    spinner.setVisibility(View.INVISIBLE);
    image.setImageBitmap(result);

}
    }
     public void displayImage()
    {

   DownloadImage task = new DownloadImage();   
   task.execute(new String[] { "http://team-android.com/wp-             content/uploads/2011/03/Android-3d_428.jpg" });
   snap.setVisibility(View.VISIBLE);

    } 
```

# delphi - 从 dbgrid 中拖动多条记录

> ID：12246916
> 
> 赞同：0
> 
> 时间：2012-09-03T11:26:15.933
> 
> 标签：delphi, delphi-7, tdbgrid

我有一个带有一些记录的 TDbGrid。我想通过简单的拖放将多个记录拖放到列表框中。但是当我单击网格的选定记录进行拖动时选择了多个记录后，除了当前记录之外，所有选定的记录都将被取消选择。如何解决这个问题？

# php - 将会话变量设置为数字，然后根据该变量号检查 isset

> ID：12246919
> 
> 赞同：0
> 
> 时间：2012-09-03T11:26:20.177
> 
> 标签：php, session, login

我创建了一个简单的 PHP 登录系统，在某些方面我对 PHP 相当陌生。登录系统不使用数据库作为其唯一的一个用户。

```
<?php
if(isset($_SESSION['loggedin']))
{
 die("You are already logged in!");
}
if(isset($_POST['submit']))
{
if ($_POST["Username"]=="****" && $_POST["password"]=="****")
{
$_SESSION['loggedin'] = "1";
print $_SESSION['loggedin'];
} 
}
?> 
```

然后对于每个其他页面，我都有一个带有 if 语句的 PHP 检查器：

```
<?php
session_start(); // NEVER forget this!
if(!isset($_SESSION['loggedin'] = "1"))
{
die("To access this page, you need to <a href='login.php'>LOGIN</a>");
} 
?> 
```

当我刚刚将登录设置为“是”然后使用该行时它起作用了

```
if(!isset($_SESSION['loggedin'])) 
```

但是，当我尝试在此示例 1 中分配登录的数字时，然后让检查器检查它是否不是数字 1 则死亡，如下所示：

```
if(!isset($_SESSION['loggedin'] = "1")) 
```

它不起作用。谁能告诉我我怎么错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:27:22.173

尝试使用 == 而不是 =。使用 '=' 会将值 1 分配给会话变量。

```
if(!isset($_SESSION['loggedin'] == "1")) 
```

但是，更好的选择是：

```
if($_SESSION['loggedin'] != "1") 
```

使用[Yoda 条件](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)并检查是否设置了 $_SESSION['loggedin'] ，即：

```
if(!isset($_SESSION['loggedin']) || "1" != $_SESSION['loggedin']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:28:14.567

```
if( !isset($_SESSION['loggedin']) || $_SESSION['loggedin'] != "1" ) 
```

还要确保在第一个示例的顶部有 session_start()。

```
<?php
session_start();

if(isset($_SESSION['loggedin']))
{
    die("You are already logged in!");
}

if(isset($_POST['submit']))
{
    if ($_POST["Username"]=="****" && $_POST["password"]=="****")
    {
        $_SESSION['loggedin'] = "1";
        print $_SESSION['loggedin'];
    } 
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:43:37.310

如果您使用字符串作为值，您还可以使用 php 函数`strcmp($str1, $str2)`进行二进制安全字符串比较。所以你可以做这个测试：

```
if(isset($_SESSION['loggedin']) && strcmp($_SESSION['loggedin'], '1') == 0) 
```

如果 on 的值`strcmp`相等，则计算结果为 0。如果`str1`小于`str2`则返回 < 0，如果`str1`大于`str2`则返回 > 0。

欲了解更多信息： http: [//php.net/manual/en/function.strcmp.php](http://php.net/manual/en/function.strcmp.php)

# javascript - 优化 JavaScript 循环使其变慢

> ID：12246920
> 
> 赞同：0
> 
> 时间：2012-09-03T11:26:21.760
> 
> 标签：javascript, optimization

在 JavaScript Patterns Stoyan Stefanov 一书中，他声称 JavaScript 中循环的常见方式

```
for (i = 0, max = myarray.length; i < max; i++) {
// do something with myarray[i]
} 
```

可以通过使用此模式进行优化

```
for (i = myarray.length; i--;) {
// do something with myarray[i]
} 
```

我发现这很有趣，所以我决定在现实世界中测试它，将该技术应用于性能密集型循环，该循环在[这篇关于使用 canvas 进行像素操作的博客文章](https://hacks.mozilla.org/2011/12/faster-canvas-pixel-manipulation-with-typed-arrays/)中展示。可以在[此处查看](http://jsperf.com/canvas-pixel-manipulation-looping)将常规代码与“优化”代码进行比较的基准。

有趣的是，所谓的优化循环实际上比 Opera 和 Firefox 中的常规循环方式慢。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:32:05.250

这种微优化的有效性总是非常有限。很有可能，VM 实现包括对“常用方式”的优化，这些优化超出了您在语言级别上可以做的事情。

这就是为什么微优化通常是浪费时间的原因。初学者往往会沉迷于它们并最终编写出难以维护且速度缓慢的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:52:34.057

首先，我看不出为什么第二个应该比第一个快得多。与零比较与与另一个数字比较之间的差异可能会在编译代码中的极其紧密的循环中产生差异，但即使在大多数情况下，它也可能是一种货物崇拜选择（如果你不这样做，请阅读 Richard Feyman 的[Cargo Cult Science](http://calteches.library.caltech.edu/3043/1/CargoCult.pdf) ）没有得到参考，如果没有别的，它是一个很好的阅读，也有不止几次类似的倾向将曾经运行良好的东西复制到没有真正理由认为它会有所帮助的情况下，在编程中）。

我可以看到以下内容变慢：

```
for (i = 0; i < myarray.length; i++) {
// do something with myarray[i]
} 
```

但是我也可以看到它**并没有**变慢，如果引擎为你优化了提升长度检查，或者实现是这样的，检查长度和检查变量无论如何都是差不多的成本。

我还可以看到您给出的那个或第一个代码示例，或者两者都是给定脚本引擎优化的东西 - 毕竟这是 js 中非常常见的习语，并且固有地涉及循环，所以这将是一个明智的试图在脚本引擎中检测和优化的东西。

但是，除了这些猜想之外，我们真的不能说什么，除了“因为在那个引擎中一个比另一个在那个引擎中工作得更好，这就是为什么”没有达到低于 javascript 的级别并检查引擎的实现。您的结果表明每个引擎的答案都不相同（毕竟，一个引擎确实更符合您的预期）。

现在，值得注意的是，在每种情况下，结果都非常接近。如果您发现只有一两个当前相当流行的浏览器，而更改确实优化了，那么它仍然值得。

如果您对它是否值得，或者只是一个假设感兴趣，您可以尝试获取 Netscape 2（毕竟第一个 javascript 浏览器）的副本，并运行一些代码来测试该方法在上面。

编辑：如果您确实尝试了这种实验，另一种方法是故意尝试错误的循环，使数组边界超出一个。引擎的一种可能的优化是意识到您正在遍历数组，并检查一次您将在哪里结束以超出范围。如果是这样，如果你最终会出错，你可能会得到不同的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:12:14.490

尝试优化循环的大多数方法都来自 C，而当时编译器更简单，处理器一个接一个地执行一条指令。

现代处理器运行代码的方式非常不同，因此优化特定指令现在不会产生相同的效果。

对于 Javascript，现在变化非常迅速。它已经从被解释到被编译，这产生了巨大的性能差异。浏览器之间的编译器非常不同，并且随着每个新的浏览器版本而变化，所以今天在一个浏览器中更快的东西，明天可能会变慢。

我已经测试了一些优化循环的不同方法，目前性能差异很小：http: [//jsperf.com/loopoptimisations](http://jsperf.com/loopoptimisations)

可以肯定的一件事是，编写循环的常规方式是最常见的，因此所有编译器都将专注于优化。

# mono - Mono mac 打包程序不适用于 gdiplus.dll

> ID：12246933
> 
> 赞同：2
> 
> 时间：2012-09-03T11:27:13.967
> 
> 标签：mono, monodevelop

我正在使用依赖于 system.drawing 的 MonoMac 制作桌面应用程序。这在 MonoDevelop 中运行良好，但创建的 .app 包不能。

我得到这个例外：

```
System.DllNotFoundException: gdiplus.dll 
```

现在，网络上有很多关于这个特定问题的参考资料，最近的参考资料之一是：http: [//bugzilla.xamarin.com/show_bug.cgi](http://bugzilla.xamarin.com/show_bug.cgi?id=3263) ?id=3263 。

但是，我一直无法让它工作。我可以将 libgdiplus.dll.dylib 从 lib 文件夹复制到我的应用程序的 MonoBundle 文件夹中，这让我更进一步。现在将 MONO_LOG_LEVEL 设置为调试告诉我：

```
Mono: DllImport error loading library 'dlopen([app]/Contents/MonoBundle/libgdiplus.dll.dylib, 9): Library not loaded: /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libglib-2.0.0.dylib
  Referenced from: [app]/Contents/MonoBundle/libgdiplus.dll.dylib
  Reason: image not found'. 
```

我也在那里复制了 libglib-2.0.0*.dylib。这无济于事，因为它在 Library/Frameworks/... 文件夹中进行搜索。我尝试将 dllmap 条目添加到 MonoBundle 文件夹中的配置文件以及 libgdiplus.dll.dylib.config 文件（和 libgdiplus.dll.config）中。这些似乎被忽略了，因为我不断收到同样的错误。

我从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:11:03.660

我可能会建议切换到使用 MonoMac.CoreGraphics 而不是 System.Drawing 作为最佳解决方案。WinForms API 并未真正考虑用于 MonoMac 应用程序（System.Drawing.Color 和 System.Drawing.RectangleF 和 SizeF 除外）。

您能否向[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)提交有关此问题的错误报告？无论是我还是塞巴斯蒂安，都需要寻找长期解决这个问题的方法。不过，我不能保证您可能需要等待多长时间才能找到解决方案，因此您确实应该考虑使用 CoreGraphics。

# jsp - 如何使用jstl删除当前url的最后一部分

> ID：12246940
> 
> 赞同：1
> 
> 时间：2012-09-03T11:28:01.323
> 
> 标签：jsp, jstl, el

我想知道您是否可以使用 JSTL 删除 URL 的最后一部分。我当前的链接是

```
http://localhost:8080/program/year/eventid/resources 
```

我想删除 /resources **（/resources 是动态的，会根据我访问的页面而改变，例如 /home 或 /logistics）**部分，并再次使用 url 返回到我用来获取当前 URL 的主页是

```
<c:set var="currenturl" value="${pageContext.request.requestURL}" /> 
```

仅使用 JSTL，我无法真正找到这个问题的答案，所以没有 javascript 或 JAVA。那将是我最后的选择。

那么有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:30:59.610

也许你可以看看 JSTL 函数`fn:replace()`（[tuto](http://www.tutorialspoint.com/jsp/jstl_function_replace.htm)，[doc](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/replace.fn.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:36:08.993

如果你真的想要，你可以：

```
<c:set var="splitUrl" value="${fn:split(pageContext.request.requestURL, '/')}" />
<c:forEach items="${splitUrl}" var="part" varStatus="status">
  <c:if test="${not status.last}">
    <c:set var="trimmedUrl"
           value="${trimmedUrl}${status.first ? '' : '/'}${part}"/>
  </c:if>
</c:forEach> 
```

但更好的方法是创建一个自定义标签或函数来完成这项工作。好处：

*   可重复使用的
*   可读性更好的 JSP

# java - 如何以固定速率从 Android 运动传感器记录数据

> ID：12246942
> 
> 赞同：10
> 
> 时间：2012-09-03T11:28:06.720
> 
> 标签：java, android, android-sensors, sensor-fusion

我正在学习 Android 编程基础知识。

我有一个简单的 android 测试应用程序，在其中我将加速度计、磁力计和方向数据记录到外部文件，同时也显示它。我通过调用方法**initLogger单击****开始**按钮（相关传感器的 registerListener）启动日志记录过程。

 **看起来与此类似...

```
public void initLogger(View view)
{
    boolean bFlag = false;

    Button btnStart = (Button)findViewById(R.id.btnStartLog);
    Button btnStop = (Button)findViewById(R.id.btnStopLog);

    btnStart.setEnabled(bFlag);
    btnStop.setEnabled(!bFlag);

    bEnableLogging = true;
    //Start reading the sensor values
    sensorManager.registerListener(this, sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD), SensorManager.SENSOR_DELAY_UI);
    sensorManager.registerListener(this, sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_UI);

   //so on.... 
```

还有一个停止按钮，它将停止记录过程（最后通过为每个传感器调用 unregisterListener 来取消注册）

数据检索过程发生在**onSensorChanged**处理程序内部，该处理程序应从相关传感器检索数据，将值设置为相应的 UI 元素，最后将数据记录到外部 .csv 文件中。

**onSensorChanged**事件处理程序看起来像这样......

```
public void onSensorChanged(SensorEvent event) {

    // TODO Auto-generated method stub
    // accelerometer
    TextView tAX = (TextView) findViewById(R.id.txtViewAxValue);
    TextView tAY = (TextView) findViewById(R.id.txtViewAyValue);
    TextView tAZ = (TextView) findViewById(R.id.txtViewAzValue);

    // magnetic field
    TextView tMX = (TextView) findViewById(R.id.txtViewMx);
    TextView tMY = (TextView) findViewById(R.id.txtViewMy);
    TextView tMZ = (TextView) findViewById(R.id.txtViewMz);

    if (bEnableLogging) {
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {

            accelerometerdata = event.values.clone();

            tAX.setText(Double.toString(accelerometerdata[0]));
            tAY.setText(Double.toString(accelerometerdata[1]));
            tAZ.setText(Double.toString(accelerometerdata[2]));

        }

        if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) {

            magneticmatrixdata = event.values.clone();

            tMX.setText(Double.toString(magneticmatrixdata[0]));
            tMY.setText(Double.toString(magneticmatrixdata[1]));
            tMZ.setText(Double.toString(magneticmatrixdata[2]));

        }

               // so on .... 
```

虽然我从所有配置的传感器接收数据，但我无法控制接收数据的速率。IE

我知道 SensorChanged 事件是在传感器数据更改时触发的。但是，我希望以固定的速率触发此事件。**例如：每 40 毫秒**

**问题：**

1.  如何确保 SensorChanged 事件以恒定速率触发？
2.  在这种情况下，Java 中的 TimerTask 类有什么帮助吗？

SO的专家在这里。请帮助我:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:40:07.937

您可以通过更改注册传感器时的延迟来更改间隔。

```
int SENSOR_DELAY_FASTEST    get sensor data as fast as possible 
int SENSOR_DELAY_GAME       rate suitable for games 
int SENSOR_DELAY_NORMAL     rate (default) suitable for screen orientation changes
int SENSOR_DELAY_UI         rate suitable for the user interface 
```

据此[，](http://developer.android.com/guide/topics/sensors/sensors_overview.html)最快的延迟是您需要的，如果它对您来说变化不够快，是因为没有变化。没有 getSensorData 方法。

> 您可以指定其他数据延迟，例如 SENSOR_DELAY_GAME（20,000 微秒延迟）、SENSOR_DELAY_UI（60,000 微秒延迟）或 SENSOR_DELAY_FASTEST（0 微秒延迟）。从 Android 3.0（API 级别 11）开始，您还可以将延迟指定为绝对值（以微秒为单位）。
> 
> 您指定的延迟只是建议的延迟。Android 系统和其他应用程序可以更改此延迟。作为最佳实践，您应该尽可能指定最大延迟，因为系统通常使用比您指定的延迟更小的延迟（也就是说，您应该选择仍能满足应用程序需求的最慢采样率）。使用更大的延迟会降低处理器的负载，因此使用更少的功率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T07:04:29.543

既然您知道如果没有触发 SensorChanged 事件，则没有任何更改，您可以使用旧值。当您要求以特定间隔提供 LOG 数据时，我不会在 onSensorChanged 方法中执行任何输出，只是将新数据克隆到您的 accelerometerdata 变量中。并且每 40 毫秒记录一次 accelerometerdata 的值。这样，即使数据没有改变，您也每 40 毫秒记录一次实际值......

注意：根据 Ridcullys 的回答，似乎也可以在特定的时间间隔内“传递”传感器数据。但由于这些“交付”与 Android 上的传感器数据一样存在延迟，因此使用我的解决方案，您将更准确地处于 40 毫秒间隔。另一方面，如果传感器数据在您登录的那一刻发生变化，您可能会将新数据延迟一个时间间隔。而且我猜（不确定这一点） - 因为它只是关于日志记录而不是像“尽可能快地实时获取它”这样的东西，所以这不是必需的 - 定时器解决方案导致更少的 CPU 负载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:37:09.643

`SensorManager`使用[registerListener](http://developer.android.com/reference/android/hardware/SensorManager.html#registerListener%28android.hardware.SensorEventListener,%20android.hardware.Sensor,%20int%29)注册侦听器时，`SENSOR_DELAY_...`您可以按照 JavaDocs 中的说明**传递以微秒为单位的间隔**，而不是固定常量：

> rate 速率传感器事件的传送速度。这只是对系统的提示。事件的接收速度可能比指定的速率快或慢。通常会更快地接收到事件。该值必须是 SENSOR_DELAY_NORMAL、SENSOR_DELAY_UI、SENSOR_DELAY_GAME 或 SENSOR_DELAY_FASTEST 之一，或者是所需的事件之间的延迟（以微秒为单位）。

因此，只需传递**40000**以匹配您的示例请求，而且，如前所述，这只是一个提示，因此我不会依赖于以精确到微秒的间隔获取值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T14:17:56.393

我一直在试图弄清楚如何才能让传感器有很长的延迟，到目前为止我已经成功了。developer.android 上的文档谈到延迟时间可以以微秒为单位指定，以下是我尝试过的大量：

```
// Initialize in onCreate
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE)
mLight = mSensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);

// Register the listener, and play around with delay
mSensorManager.registerListener(this, mLight, 200000000); 
```

但是请注意下面的 LogCat 转储 - onSensorChanged() - 每秒被调用多达 4 次......我试图找出更大的延迟，但到目前为止没有成功！！！

01-14 06:58:07.088: D/IOE Sensors(20933): onSensorChanged 调用，事件是: android.hardware.SensorEvent@42849f70 01-14 06:58:07.268: D/IOE Sensors(20933): onSensorChanged 调用, 事件为: android.hardware.SensorEvent@42849f70 01-14 06:58:07.448: D/IOE Sensors(20933): onSensorChanged 调用, 事件为: android.hardware.SensorEvent@42849f70 01-14 06:58: 07.628: D/IOE Sensors(20933): onSensorChanged 被调用，事件为：android.hardware.SensorEvent@42849f70 01-14 06:58:07.808: D/IOE Sensors(20933): onSensorChanged 被调用，事件为：android. hardware.SensorEvent@42849f70 01-14 06:58:07.989: D/IOE Sensors(20933): onSensorChanged 调用，事件是: android.hardware.SensorEvent@42849f70 01-14 06:58:08.169: D/IOE Sensors( 20933): onSensorChanged 调用，事件为：android.hardware.SensorEvent@42849f70

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-20T00:45:02.333

似乎调用 onSensorChanged 的​​速率必须是 4 个建议值之一。

对于“慢速读取”，您可以使用 SENSOR_DELAY_UI 并（在 onSensorChanged 中）测量自上次读取传感器数据以来经过的时间：

```
long lastUpdate = System.currentTimeMillis();

// In onSensorChanged:
long curTime = System.currentTimeMillis();

        if ((curTime - lastUpdate) > 500){ // only reads data twice per second
            lastUpdate = curTime;
            // do stuff
        } 
```

我在这里看到的唯一缺点是 if 语句将被多次调用，结果是错误的。**

# java - 如何使消息在 java 和 javascript 中都有效？

> ID：12246945
> 
> 赞同：0
> 
> 时间：2012-09-03T11:28:18.290
> 
> 标签：java, javascript, jstl, messages

我们使用了一个名为messages.properties 的文件，没有JSTL 格式的消息传递，它适用于服务器端java 和jsp。但是对于 javascript，我们需要相同的消息，但采用 javascript 可以读取的格式。我们是否应该只为javascript保留一种格式的两个文件，例如JSON消息或类似文件？您能提出任何建议或告诉我通常如何使用 javascript 来完成此操作吗？Java 代码中的变量应该对 javascript 可用，但这似乎不是一个非常简洁的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:30:24.807

为什么不编写一些Java 代码将Java 格式转换为例如JSON，然后简单地从您的JavaScript 应用程序中检索它。

或者更简单，两者都使用 JSON - 我确信有大量的 JSON 解析器可用于 Java（以及几乎所有其他语言）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:30:06.290

对我来说，JSON 是最好的解决方案。

# pingfederate - PingFederate 证书吊销

> ID：12246946
> 
> 赞同：0
> 
> 时间：2012-09-03T11:28:22.307
> 
> 标签：pingfederate

我只想知道证书吊销在 PingFederate 中是如何工作的。

从哪里读取任何连接使用的任何证书的到期时间？是否有包含有关连接和相应证书的所有信息的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:27:00.967

您的主要问题是关于检测证书何时到期？如果是这样，有关证书吊销列表 (CRL) 功能的详细信息可能不是您想要的。CRL 表示在过期之前已被吊销的证书的序列号 - 通常过期的证书会自动从 CRL 中删除。

如果您想确定哪些证书即将到期 - 您可能必须检查每个连接。以下是检查您是否在谈论 SP 连接上的签名证书的示例（如果您是 IdP）：[https ://support.pingidentity.com/s/document-item?bundleId=pingfederate-92&topicId=adminGuide% 2F配置数字签名设置.html](https://support.pingidentity.com/s/document-item?bundleId=pingfederate-92&topicId=adminGuide%2FconfiguringDigitalSignatureSettings.html)

没有一个中心位置可以检查所有证书的状态。如果您认为证书已过期并且遇到错误 - 请查阅 server.log 文件。请参阅：[https ://support.pingidentity.com/s/document-item?bundleId=pingfederate-92&topicId=adminGuide%2FmanagingLogFiles.html](https://support.pingidentity.com/s/document-item?bundleId=pingfederate-92&topicId=adminGuide%2FmanagingLogFiles.html)

如果您希望在证书即将到期时收到通知，您可以启用运行时通知让 PingFederate 在证书到期前 X # 天向您发送电子邮件：https: [//support.pingidentity.com/s/document-item? bundleId=pingfederate-92&topicId=adminGuide%2FconfiguringRuntimeNotifications.html](https://support.pingidentity.com/s/document-item?bundleId=pingfederate-92&topicId=adminGuide%2FconfiguringRuntimeNotifications.html)

如果一切都失败了 - 请联系我们的客户支持： https: [//support.pingidentity.com](https://support.pingidentity.com)。他们将很乐意提供帮助。

（注：我为 Ping 工作！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T21:26:02.497

[过期证书报告知识库页面](https://www.pingidentity.com/support/solutions/index.cfm/Expired-certificates-report)显示您可以运行

```
cd $PingFederate_Install_Directory>/pingfederate/server/default/data
keytool -list -v -keystore ping-dsig.jks < /dev/null 
```

获取所有证书的转储，您可以从中解析到期日期。

# c++ - Crypto++ 是否支持 TOFB-I？

> ID：12246948
> 
> 赞同：1
> 
> 时间：2012-09-03T11:28:30.103
> 
> 标签：c++, des, crypto++

我正在开发一个 C++ 应用程序来解密其他人使用 TOFB-I（TDEA 输出反馈 - 交错）加密的数据。为此，我使用 Crypto++ 库。

不幸的是，解密的结果似乎不起作用：第一个字节被正确解密，其余的只是无意义的数据。我用 Linux 命令行工具 OpenSSL 仔细检查并得到完全相同的结果。所以我倾向于相信我正在应用一个带有错误反馈的解密算法，因此第一个 IV 工作正常，但反馈出现问题。

我的问题是：如何应用 DES_OFB 模式的交错变体？
在 Crypto++ 或 OpenSSL 文档中都找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:48:44.173

显然 Crypto++（以及 OpenSSL）不支持 TOFB-I 操作模式：
[http ://csrc.nist.gov/groups/STM/cavp/documents/des/tripledesval.html](http://csrc.nist.gov/groups/STM/cavp/documents/des/tripledesval.html)

实际上，根据上述链接，尚未验证任何实现符合 TOFB-I！

所以我想我需要实现自己的 TOFB-I 算法。

# android - 我不想让 Google+ 上传我的应用程序的图像文件夹

> ID：12246949
> 
> 赞同：1
> 
> 时间：2012-09-03T11:28:34.790
> 
> 标签：android, google-plus

我上网查看是否可行：

我不希望我的应用程序`Google+`在用户未选中该选项时上传图像`Instant Upload`。

我的应用程序从 Web 下载图像，并将图像保存在 SD 根目录下的 SD 文件夹中，其中存储了图标和类似图像。我不希望将这些图像上传到即时上传`Google+`文件夹中。我曾想过删除我的应用程序下载的图像，但是，我不想通过 Google 用户访问。简而言之，我不想让`Google+`上传我的应用程序的图像文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:31:30.033

在文件夹中添加另一个名为`.nomedia`. 希望您执行此操作后 Google+ 不会触碰它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:52:50.227

感谢你的帮助。你们都很棒。我证明了这两种解决方案，但是带有点的解决方案我不能使用，因为我的应用程序将安装在多个设备中并且应该尽可能标准。在我的代码中，我使用带有 nomedia 文件的解决方案。我用一个小代码自动创建。如果有人迷失在这个神奇的世界中，我会写在下面。

```
File noMedia = new File(Environment.getExternalStorageDirectory().toString() + "/" + context.getPackageName() + "/.nomedia");
noMedia.createNewFile();
FileOutputStream fOut = new FileOutputStream(noMedia);
OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
myOutWriter.close();
fOut.close(); 
```

再次感谢。

# ios - iOS Coredata 回滚不起作用

> ID：12246952
> 
> 赞同：0
> 
> 时间：2012-09-03T11:28:42.827
> 
> 标签：ios, core-data, nsmanagedobjectcontext, rollback

在我的应用程序中，我正在关注 CoreDataBooks 以实现核心数据。我有一个项目列表，当用户选择任何项目时，会出现一个带有编辑选项的详细信息屏幕。详细信息屏幕有 ManagedObjectContext 的实例，它是列表中 ManagedObjectContext 实例的子级。现在，当我在详细信息屏幕上编辑某些内容时，我正在更新从子 MOC 实例获取的实体中的值。当我调用回滚子 MOC 时取消，它什么也不做。不知道为什么回滚没有将值恢复到上次保存的前一个值。

```
- (void)cancelAction:(id)sender
{
    _isEditing = NO;
    [_managedObjectContext rollback];
    [self configureNavBar];
    [table reloadData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:41:15.877

你能检查一下你的 UndoManager 是否设置在你的 MOC 中，也就是说你是否正在使用 UndoManager。

阅读此响应可能对此有所帮助：[撤消在子视图控制器中所做的所有更改](https://stackoverflow.com/questions/10443754/undo-all-changes-made-in-the-child-view-controller)

但是，如果您遵循 CoreDataBooks 示例，您可以看到方法

```
(void)addViewController:(AddViewController *)controller didFinishWithSave:(BOOL)save 
```

这表明子视图控制器将仅在设置标志 save 时保存其 MOC，否则它将在父视图控制器上调用 save 从而回滚到存储在父 ManagedObject 数据中的数据。

# qt - 替代 QLineEdit 以获得双倍

> ID：12246953
> 
> 赞同：3
> 
> 时间：2012-09-03T11:28:43.873
> 
> 标签：qt, qlineedit

我有一个 QLineEdit，我用它来获得双倍。但是有没有更合适的获取方式呢？这是我的代码。

```
ui->lineEdit->setValidator(new QIntValidator(this));

QString XMAX=ui->lineEdit->text();
double xmax=XMAX.toDouble(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:32:46.797

输入双精度的规范方法当然是使用[QDoubleSpinBox](http://doc-snapshot.qt-project.org/4.8/qdoublespinbox.html)。

如果您坚持使用 a `QLineEdit`，则应将其与 a 一起使用，`QDoubleValidator`而不是您的`QIntValidator`. 我只想添加一个完整性检查，以确保在编辑字段中输入了某些内容：

```
double xmax;
if (ui->lineEdit->text()->isEmpty())
    xmax = numeric_limits<double>::quiet_NaN();
else
    xmax = ui->lineEdit->text().toDouble(); 
```

# ios - iPA 文件在我构建时无法正常工作

> ID：12246954
> 
> 赞同：1
> 
> 时间：2012-09-03T11:28:43.653
> 
> 标签：ios, iphone, objective-c, ipa

我已经创建了一个 ipa 文件，我正在尝试使用设备对其进行测试。但是，当我从我的代码（使用 xcode）安装它时它工作正常，尽管当我直接使用 iTunes 安装 ipa 文件时，应用程序有时会在其他时候崩溃。这我不知道如何调试。我不知道为什么它的工作方式也不同。我也在使用开发配置文件（我认为）来创建 ipa 文件。所以这是问题吗？如果是这样，它不应该完全崩溃，而不是有时而不是其他时间运行吗？非常感谢任何帮助。谢谢

附上崩溃日志

```
 Incident Identifier: 7BAF9733-5E1C-4B11-97A2-6AF337514B60
   CrashReporter Key:   348b2ce3ff492f44d6260ffd552e63c6cfc21384
   Hardware Model:      iPad3,3
   Process:         x [661]
   Path:            /var/mobile/Applications/CA9BE7D9-BB3B-4FF8-8AE6-D60EEC2D3C9A/x.app/x
   Identifier:      x
   Version:         ??? (???)
   Code Type:       ARM (Native)
   Parent Process:  launchd [1]

   Date/Time:       2012-09-03 12:57:55.860 +0100
   OS Version:      iPhone OS 5.1 (9B176)
   Report Version:  104

   Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
   Exception Codes: KERN_INVALID_ADDRESS at 0x60000008
   Crashed Thread:  0

   Thread 0 name:  Dispatch queue: com.apple.main-thread
   Thread 0 Crashed:
   0   libobjc.A.dylib                  0x367a3f78 0x367a0000 + 16248
   1   UIKit                            0x32c85092 0x32ada000 + 1749138
   2   CoreFoundation                   0x31f577dc 0x31e9b000 + 772060
   3   CoreFoundation                   0x31eb27aa 0x31e9b000 + 96170
   4   CoreFoundation                   0x31eb23c8 0x31e9b000 + 95176
   5   WebKit                           0x32946e98 0x32938000 + 61080
   6   CoreFoundation                   0x31f56a7c 0x31e9b000 + 768636
   7   CoreFoundation                   0x31eb1648 0x31e9b000 + 91720
   8   CoreFoundation                   0x31f577dc 0x31e9b000 + 772060
   9   CoreFoundation                   0x31eb27aa 0x31e9b000 + 96170
   10  WebCore                          0x33779642 0x33715000 + 411202
   11  WebCore                          0x337795da 0x33715000 + 411098
   12  WebKit                           0x3294e1e0 0x32938000 + 90592
   13  WebKit                           0x32946a88 0x32938000 + 60040
   14  WebCore                          0x337d8672 0x33715000 + 800370
   15  WebCore                          0x3378e41a 0x33715000 + 496666
   16  WebCore                          0x3376edaa 0x33715000 + 368042
   17  WebCore                          0x337d9270 0x33715000 + 803440
   18  WebKit                           0x32947178 0x32938000 + 61816
   19  WebKit                           0x3294709c 0x32938000 + 61596
   20  UIKit                            0x32b6e688 0x32ada000 + 607880
   21  UIKit                            0x32b6e066 0x32ada000 + 606310
   22  CoreFoundation                   0x31f577dc 0x31e9b000 + 772060
   23  CoreFoundation                   0x31eb27aa 0x31e9b000 + 96170
   24  CoreFoundation                   0x31eb23c8 0x31e9b000 + 95176
   25  WebKit                           0x32946e98 0x32938000 + 61080
   26  CoreFoundation                   0x31f56a7c 0x31e9b000 + 768636
   27  CoreFoundation                   0x31eb1648 0x31e9b000 + 91720
   28  CoreFoundation                   0x31f577dc 0x31e9b000 + 772060
   29  CoreFoundation                   0x31eb27aa 0x31e9b000 + 96170
   30  WebCore                          0x33779642 0x33715000 + 411202
   31  WebCore                          0x3378cb3e 0x33715000 + 490302
   32  CoreFoundation                   0x31f28acc 0x31e9b000 + 580300
   33  CoreFoundation                   0x31f28298 0x31e9b000 + 578200
   34  CoreFoundation                   0x31f2703e 0x31e9b000 + 573502
   35  CoreFoundation                   0x31eaa49e 0x31e9b000 + 62622
   36  CoreFoundation                   0x31eaa366 0x31e9b000 + 62310
   37  GraphicsServices                 0x35908432 0x35904000 + 17458
   38  UIKit                            0x32b0be76 0x32ada000 + 204406
   39  x                                    0x0007d398 0x7c000 + 5016
   40  x                                        0x0007d350 0x7c000 + 4944

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x36cb63a8 0x36cb5000 + 5032
1   libdispatch.dylib               0x31e35f04 0x31e32000 + 16132
2   libdispatch.dylib               0x31e35c22 0x31e32000 + 15394

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x36cc6068 0x36cb5000 + 69736
1   libsystem_c.dylib               0x31679a46 0x3166b000 + 59974
2   libsystem_c.dylib               0x31680574 0x3166b000 + 87412
3   WebCore                         0x337794b8 0x33715000 + 410808
4   WebKit                          0x32946d80 0x32938000 + 60800
5   CoreFoundation                  0x31f56a7c 0x31e9b000 + 768636
6   CoreFoundation                  0x31eb1648 0x31e9b000 + 91720
7   WebKit                          0x32954ec0 0x32938000 + 118464
8   WebCore                         0x337ee1ac 0x33715000 + 889260
9   WebCore                         0x337ee122 0x33715000 + 889122
10  WebCore                         0x337ee0dc 0x33715000 + 889052
11  WebCore                         0x337ee086 0x33715000 + 888966
12  WebKit                          0x32954c9a 0x32938000 + 117914
13  WebKit                          0x32954b10 0x32938000 + 117520
14  WebKit                          0x32954a48 0x32938000 + 117320
15  WebCore                         0x337eae9c 0x33715000 + 876188
16  WebCore                         0x337eae08 0x33715000 + 876040
17  WebCore                         0x337eaa2e 0x33715000 + 875054
18  WebCore                         0x337ea9ba 0x33715000 + 874938
19  WebCore                         0x337e9736 0x33715000 + 870198
20  WebCore                         0x337e90dc 0x33715000 + 868572
21  WebCore                         0x3397a232 0x33715000 + 2511410
22  WebCore                         0x3376ad1c 0x33715000 + 351516
23  WebCore                         0x3376ac8e 0x33715000 + 351374
24  CoreFoundation                  0x31f28a2c 0x31e9b000 + 580140
25  CoreFoundation                  0x31f28692 0x31e9b000 + 579218
26  CoreFoundation                  0x31f27268 0x31e9b000 + 574056
27  CoreFoundation                  0x31eaa49e 0x31e9b000 + 62622
28  CoreFoundation                  0x31eaa366 0x31e9b000 + 62310
29  WebCore                         0x337be0f0 0x33715000 + 692464
30  libsystem_c.dylib               0x3167972e 0x3166b000 + 59182
31  libsystem_c.dylib               0x316795e8 0x3166b000 + 58856

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x36cb6004 0x36cb5000 + 4100
1   libsystem_kernel.dylib          0x36cb61fa 0x36cb5000 + 4602
2   CoreFoundation                  0x31f283ec 0x31e9b000 + 578540
3   CoreFoundation                  0x31f27124 0x31e9b000 + 573732
4   CoreFoundation                  0x31eaa49e 0x31e9b000 + 62622
5   CoreFoundation                  0x31eaa366 0x31e9b000 + 62310
6   Foundation                      0x34ef1bb2 0x34ee1000 + 68530
7   Foundation                      0x34ef1a7a 0x34ee1000 + 68218
8   Foundation                      0x34f8558a 0x34ee1000 + 673162
9   libsystem_c.dylib               0x3167972e 0x3166b000 + 59182
10  libsystem_c.dylib               0x316795e8 0x3166b000 + 58856

Thread 4:
0   libsystem_kernel.dylib          0x36cc6cd4 0x36cb5000 + 72916
1   libsystem_c.dylib               0x31673f36 0x3166b000 + 36662
2   libsystem_c.dylib               0x31673cc8 0x3166b000 + 36040

Thread 5 name:  AQClient
Thread 5:
0   libsystem_kernel.dylib          0x36cb6004 0x36cb5000 + 4100
1   libsystem_kernel.dylib          0x36cb61fa 0x36cb5000 + 4602
2   CoreFoundation                  0x31f283ec 0x31e9b000 + 578540
3   CoreFoundation                  0x31f27124 0x31e9b000 + 573732
4   CoreFoundation                  0x31eaa49e 0x31e9b000 + 62622
5   CoreFoundation                  0x31eaa366 0x31e9b000 + 62310
6   AudioToolbox                    0x374c6b28 0x3744c000 + 502568
7   AudioToolbox                    0x3744dc9c 0x3744c000 + 7324
8   libsystem_c.dylib               0x3167972e 0x3166b000 + 59182
9   libsystem_c.dylib               0x316795e8 0x3166b000 + 58856

Thread 6:
0   libsystem_kernel.dylib          0x36cc6cd4 0x36cb5000 + 72916
1   libsystem_c.dylib               0x31673f36 0x3166b000 + 36662
2   libsystem_c.dylib               0x31673cc8 0x3166b000 + 36040

Thread 7 name:  com.apple.CFSocket.private
Thread 7:
0   libsystem_kernel.dylib          0x36cc6570 0x36cb5000 + 71024
1   CoreFoundation                  0x31f2c63a 0x31e9b000 + 595514
2   libsystem_c.dylib               0x3167972e 0x3166b000 + 59182
3   libsystem_c.dylib               0x316795e8 0x3166b000 + 58856

Thread 8:
0   libsystem_kernel.dylib          0x36cc6cd4 0x36cb5000 + 72916
1   libsystem_c.dylib               0x31673f36 0x3166b000 + 36662
2   libsystem_c.dylib               0x31673cc8 0x3166b000 + 36040
Thread 9:
0   libsystem_kernel.dylib          0x36cc6cd4 0x36cb5000 + 72916
1   libsystem_c.dylib               0x31673f36 0x3166b000 + 36662
2   libsystem_c.dylib               0x31673cc8 0x3166b000 + 36040

Thread 10 name:  WebCore: CFNetwork Loader
 Thread 10:
 0   libsystem_kernel.dylib         0x36cb6004 0x36cb5000 + 4100
 1   libsystem_kernel.dylib         0x36cb61fa 0x36cb5000 + 4602
 2   CoreFoundation                 0x31f283ec 0x31e9b000 + 578540
 3   CoreFoundation                 0x31f27124 0x31e9b000 + 573732
 4   CoreFoundation                 0x31eaa49e 0x31e9b000 + 62622
 5   CoreFoundation                 0x31eaa366 0x31e9b000 + 62310
 6   WebCore                        0x337e7526 0x33715000 + 861478
 7   libsystem_c.dylib              0x3167972e 0x3166b000 + 59182
 8   libsystem_c.dylib              0x316795e8 0x3166b000 + 58856

Thread 0 crashed with ARM Thread State:
r0: 0x0c633e60    r1: 0x35c414f6      r2: 0x32eeedde      r3: 0x0c621080
r4: 0x60000000    r5: 0x0c683630      r6: 0x3f300b20      r7: 0x2fe79848
r8: 0x3f3107b8    r9: 0x0d71053d     r10: 0x3f310804     r11: 0x00000000
ip: 0x3f283048    sp: 0x2fe7982c      lr: 0x32c85099      pc: 0x367a3f78
cpsr: 0x200f0030 
```

# iphone - 如何向 UITableView 显示字符串值？

> ID：12246958
> 
> 赞同：1
> 
> 时间：2012-09-03T11:28:59.060
> 
> 标签：iphone, objective-c, ios

```
{
NSString *docsDir;
NSArray *dirPaths;

// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];
//array=[[NSMutableArray alloc]init];
//array1=[[NSMutableArray alloc]init];

// Build the path to the database file
databasePath =  [docsDir stringByAppendingPathComponent: @"first.database"];
NSLog(@"%@",databasePath);
NSFileManager *fn=[NSFileManager defaultManager];
NSError *error;
BOOL success=[fn fileExistsAtPath:databasePath];

if(!success) {

    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"first.database"];
    success = [fn copyItemAtPath:defaultDBPath toPath:databasePath error:&error];
}

const char *dbpath = [databasePath UTF8String];
sqlite3_stmt    *statement;

if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat: @"SELECT firstname FROM second"];

    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(contactDB, query_stmt, -1, &statement, NULL) == SQLITE_OK)
    {
        if (sqlite3_step(statement) == SQLITE_ROW)
        {

            arrival = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement,0)];

       NSLog(@"Result %@",arrival);

        sqlite3_finalize(statement);
    }
    sqlite3_close(contactDB);
     [self.tableView reloadData];
}
} 
```

在此示例中，我想向 UITableView 显示“到达”值...任何人都帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:31:57.980

首先 - 对 sqlite 数据库使用 FMDB 包装器。它让生活变得如此轻松！（[在此处查看他们的 GitHub](https://github.com/ccgus/fmdb)和[本教程](http://www.icodeblog.com/2011/11/04/simple-sqlite-database-interaction-using-fmdb/)）其次 - 如果您想将 SELECT 的结果分配给单元格，只需使用：

```
cell.textLabel.text = your_result; 
```

在`-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:36:59.117

在 cellForRowAtIndexPath 方法中：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:NULL];
    cell.textLabel.text=arrival;
    return cell;
} 
```

# php - php。如何将日期存储在文件中以供以后阅读

> ID：12246960
> 
> 赞同：0
> 
> 时间：2012-09-03T11:29:10.197
> 
> 标签：php

> **可能重复：**
> [一个简单的程序来 CRUD 节点和 xml 文件的节点值](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

我有一个 xml 文件，我可以从中获取数据。我还有多个`<date></date>`标签，我想在其中存储一些日期值：年、月、日、小时、分钟。

我手动输入 XML 数据，所以我的问题是如何编写所需的日期值，所以当我`file_get_contents()`从 PHP 执行然后获取每个单独的标签时，PHP 会理解日期并将其放在变量/对象中，而不是我处理字符串并创建日期变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:40:22.130

PHP 无法自动检测 XML 文件中的日期。您将必须解析保存日期的元素并将它们转换为 DateTime 对象或您希望它们成为的任何对象。

有关选项，请参阅[PHP 的最佳 XML 解析器](https://stackoverflow.com/questions/188414/best-xml-parser-for-php/3616044#3616044)。

# xpath - 如何通过 XPath 获取没有属性的元素

> ID：12246963
> 
> 赞同：2
> 
> 时间：2012-09-03T11:29:22.920
> 
> 标签：xpath

我想获得一个没有属性的 td 元素。

例如：我的代码：

```
<td class="yyy">1234</td>
<td>5678</td> 
```

我想得到：5678
XPath 是什么？

谢谢， 查尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:32:58.170

我认为这是其他几个 SO 问题的重复：

看到这个：

[XPath：如何选择没有属性的节点？](https://stackoverflow.com/questions/1323755/xpath-how-to-select-nodes-which-have-no-attributes)

其中建议：

```
//node[not(@*)] 
```

其中 node 是您的节点名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:33:02.840

尝试以下

```
 /td[not(@class)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:36:11.923

怎么样

```
.//td[. = '5678'] 
```

或者

```
.//td[text() = '5678'] 
```

--

如果没有属性很重要，那么，

```
.//td[text() = '5678' and not(@*)] 
```

--

或者，如果您想获取第一个`td`没有属性的内部文本。

```
.//td[not(@*)][1]/text() 
```

# php - 从另一个 PHP 文件中获取 POST 方法的错误

> ID：12246966
> 
> 赞同：0
> 
> 时间：2012-09-03T11:29:55.870
> 
> 标签：php, ajax, json

我一直在寻找答案，但我仍然不知道该怎么做。老实说，我在编程方面并不擅长，而且我还在学习中。

下面是我的代码：

```
$.ajax({
type: "POST",
url: "process.php",
data: {
postid: post_id
},
success: function(){
document.getElementById('processed').innerHTML = post_id;
... 
```

我对此没有问题，只是我想在 process.php 上得到错误（如果有的话）。

我想得到错误的 process.php 代码：

```
 if($result){
      while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
            $m = $row['processedID'];
            $id = trim($_POST ['postid']);
        try {
            ..something...
      }
       catch (APIHandle $e) {
            $output .= "<p>'". $row['name'] . "' processing failed</p>";
         }
}
} 
```

我想得到这条线：

```
 $output .= "<p>'". $row['name'] . "' processing failed</p>"; 
```

并将其作为错误显示在我的第一个 php 文件中，并将其作为文本输出。例如，用户单击一个按钮，它会检查输入并输出错误（如果有任何使用这些代码）。

谢谢您的帮助！

***编辑！*** 我现在正在使用 andy 提供的代码，因为它可以处理错误，并且可以选择如果发生错误该怎么办。问题是我不知道如何使用文本字段/表单项来处理它。这是我更新的代码：

```
 var textfieldvalue = $("#text").val();
    var post_id = textfieldvalue;
    $.ajax({
            type: "POST",
            url: "process.php",
            dataType: "json",
            data: {
                postid: post_id
            },
            success: function(result){
                 if (result.error) {
                    $('#accesserror').show();
                    $('#error').html(result.error).show();
                }
                else {
                    $("#loading").hide();
                    $("#processor").show();

                } 
```

我知道这有问题。请？这是我最后一次寻求帮助。谢谢您，您的所有回答将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:33:53.473

然后您应该返回`$output`包含错误的内容，`json_encoded()`就像您可能对正常结果所做的那样。您还可以使用多个错误消息对数组进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:37:45.833

```
 $.ajax({
  type: "POST",
  url: "process.php",
  data: {
  postid: post_id
  },
  success: function(data){
  document.getElementById('processed').innerHTML = data;
  } 
```

你的 process.php

```
 if($result){
  while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
        $m = $row['processedID'];
        $id = trim($_POST ['postid']);
    try {
        ..something...
    }
    catch (APIHandle $e) {
        echo $output .= "<p>'". $row['name'] . "' processing failed</p>";
     }
  } 
```

如果您的代码在 process.php 中被捕获，它将返回输出并在 ajax 中显示该输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:40:59.280

听起来你想要的是 JSON。然后您可以检查该`error`字段是否为空，如果不是则显示错误。试试下面的东西。

```
if($result) {
    $result = array();

    while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        $m = $row['processedID'];
        $id = trim($_POST ['postid']);

        try {
            // something
        }
        catch (APIHandle $e) {
            $result['error'] = 'Processing failed!';
        }
    }

    echo json_encode($result);
} 
```

和 jQuery：

```
$.ajax({
    type: "POST",
    url: "process.php",
    dataType: "json",
    data: {
        postid: post_id
    },

    success: function(result){
        // There was an error
        if (result.error) {
            $('#error').html(result.error).show();
        }

        // No error
        else {
            // Something
        }
    }
}); 
```

然后您可以简单地返回其他数据`$result['something_else']`并显示是否没有错误。此外，此解决方案为您提供了很大的灵活性来选择要显示数据的位置。例如，您可能希望在其他地方显示您的错误，而不是从 PHP 返回的其余数据。如果你只是在 PHP 中回显数据，你就不得不在同一个地方显示它，然后你必须依靠 CSS 来改变定位。

希望能帮助到你。

# eclipse - 出现错误时查看 Javadoc

> ID：12246967
> 
> 赞同：2
> 
> 时间：2012-09-03T11:30:02.920
> 
> 标签：eclipse, javadoc

在 Eclipse 的 java 项目中键入以下内容：

```
File temp = File.createTempFile(); 
```

这将给出一个错误：

```
The method createTempFile(String, String) in the type File is not applicable for the arguments () 
```

问题是，虽然错误存在，但我无法使用 F2 查看命令的 Javadoc，因此在不知道它看起来如何正确的情况下修复命令有点困难（Eclipse 告诉你 (String, String)，但不是这些参数是什么意思！）

那么，当出现错误时，如何查看该命令的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:32:49.843

将光标放在左括号后立即按`CTRL`+ `SPACE`。它将向您显示所有带有类型签名的方法和所选方法的 Javadoc。

# iphone - 这种@"Test Test Sample" 类型的 reportSuiteId 对 Adob e Omniture 应用程序跟踪有效还是无效？

> ID：12246968
> 
> 赞同：0
> 
> 时间：2012-09-03T11:30:05.587
> 
> 标签：iphone, adobe-analytics

我只想知道这个**@“Test Test Sample”**是否是有效的reportSuiteID，是否有空格的report suit ID，是有效还是无效。

当我发送请求时，我什么也没得到，我的客户告诉我他在报告中没有什么可看的。

我用下面的代码

```
s = [[AppMeasurement alloc] init];
    s.debugTracking = YES;
    //Setup application config variables
    s.account = @"Test Test Sample"; 
    s.ssl = YES;
    s.dc = @"112";
    s.pageName = @"HelooPage"; 
    [s track]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:25:21.620

s.account 变量用于指定报表包 ID (RSID)。RSID 确定要在 SiteCatalyst 中填充的报告集，并且不包含空格。

字符串“测试测试样本”是无效的 RSID - 我建议从客户端获取有效的报告包，例如专用于开发测试的报告包。这样，您就可以向 SiteCatalyst 发送任意数量的数据，而无需填写任何重要报告。

# python - Python：将 cvs 文件读入列表和数组

> ID：12246974
> 
> 赞同：2
> 
> 时间：2012-09-03T11:30:32.083
> 
> 标签：python

我是 Python 新手，这是我在这里的第一篇文章，所以我希望你能忍受我。我在将 csv 文件读取为所需格式时遇到了很大的麻烦。我的文件由 132 列组成，文件头如下所示：

```
['10520', ' 386681375.82149398', ' 85.25775430', ' -56.07840500', ' 173', ' 153', '     151', ' 161', ' 180', ' 167', ' 189', ' 171', ' 173', ' 171', ' 207', ' 169', ' 173', ' 168', ' 184', ' 168', ' 201', ' 197', ' 204', ' 201', ' 210', ' 239', ' 211', ' 227', ' 247', ' 248', ' 266', ' 276', ' 322', ' 336', ' 331', ' 381', ' 358', ' 483', ' 532', ' 709', ' 841', ' 1004', ' 1128', ' 1540', ' 1945', ' 2747', ' 3718', ' 5378', ' 6273', ' 8415', ' 12727', ' 18248', ' 24103', ' 33688', ' 40744', ' 52821', ' 65535', ' 59114', ' 55225', ' 49919', ' 51894', ' 58381', ' 50376', ' 48315', ' 42337', ' 30577', ' 24078', ' 24337', ' 22432', ' 20191', ' 19999', ' 17674', ' 22519', ' 22542', ' 22644', ' 23966', ' 21033', ' 21326', ' 20257', ' 20441', ' 21859', ' 26976', ' 32514', ' 34732', ' 45555', ' 48416', ' 34952', ' 28511', ' 24611', ' 18843', ' 17081', ' 14592', ' 13550', ' 13011', ' 15370', ' 15827', ' 15232', ' 16054', ' 14823', ' 14538', ' 12544', ' 11865', ' 11442', ' 10089', ' 10340', ' 11269', ' 11336', ' 11873', ' 10012', ' 9824', ' 9488', ' 7696', ' 9273', ' 9502', ' 8752', ' 8341', ' 8192', ' 8293', ' 8067', ' 8402', ' 9258', ' 9290', ' 8144', ' 8009', ' 7660', ' 6772', ' 6008', ' 6792', ' 6993', ' 6662', ' 7047', ' 6662 ']
['10520', ' 386681375.86699998', ' 85.25527360', ' -56.09263480', ' 113', ' 102', ' 120', ' 124', ' 117', ' 127', ' 124', ' 118', ' 128', ' 120', ' 125', ' 120', ' 140', ' 135', ' 144', ' 127', ' 143', ' 148', ' 141', ' 153', ' 142', ' 142', ' 149', ' 152', ' 168', ' 180', ' 196', ' 188', ' 196', ' 246', ' 259', ' 270', ' 337', ' 360', ' 506', ' 540', ' 625', ' 887', ' 1122', ' 1251', ' 2007', ' 2883', ' 3238', ' 4370', ' 6240', ' 9164', ' 10751', ' 16656', ' 20996', ' 27753', ' 37774', ' 35377', ' 38637', ' 39265', ' 35183', ' 38830', ' 32149', ' 25455', ' 27272', ' 24488', ' 21036', ' 20931', ' 17166', ' 17019', ' 18196', ' 15450', ' 15120', ' 15934', ' 15021', ' 14936', ' 16253', ' 16457', ' 15873', ' 19667', ' 23150', ' 26140', ' 35761', ' 42594', ' 61758', ' 65535', ' 42354', ' 28672', ' 25173', ' 20344', ' 15883', ' 14432', ' 10575', ' 11342', ' 12348', ' 13229', ' 19632', ' 23456', ' 18102', ' 15600', ' 13425', ' 9962', ' 8281', ' 7609', ' 6948', ' 7391', ' 8878', ' 10006', ' 11295', ' 10073', ' 9410', ' 10354', ' 10667', ' 10054', ' 9011', ' 8793', ' 9055', ' 7463', ' 6692', ' 8051', ' 8330', ' 7369', ' 6612', ' 6328', ' 6545', ' 6235', ' 5895', ' 5085', ' 4876', ' 5154', ' 4649', ' 5226', ' 6137', ' 5354 '] 
```

我有兴趣得到：

1.  四个第一列的四个列表/向量/一维数组（或任何其他）。
2.  接下来的 128 列我想进入一个数组。
3.  我想获得没有 ([] , ' ") 和其他非数字字符的输出。

所以票价看起来像这样

```
import sys, math, numpy
from numpy import *
from scipy import *
import csv

try:
    ifile = sys.argv[1]
   #; ofile = sys.argv[2]
except:
    print "Usage:", sys.argv[0], "ifile"; sys.exit(1)   

# Open and read file from std, and assign first four (orbit, time, lat, lon) columns to four lists, and last 128 columns (waveforms) to an array.

ifile = open(ifile)
orbit = []
time = []
lat = []
lon = []
#wvf= [[],[]]

try:
    reader = csv.reader(ifile, delimiter=',')
    for row in reader:
        orbit.append(row[0])
        time.append(row[1])
        lat.append(row[2])
        lon.append(row[3])
     #    wvf = [row[4:132] for row in reader] row[0:128] for col in len(reader)]
     wvf = [row[4:132]],[row[1:128]]

finally:
    ifile.close()

...and now do something with data... 
```

我曾考虑过首先拆分所有行，然后将最后 128 列收集到数组中，但我没能做到。

我希望您对我希望完成的工作有所了解，并能够帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:33:45.377

[您可以使用np.genfromtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)将文件加载到 numpy 数组中。这样做的一个优点是数据直接从文件传输到节省空间的 numpy 数组。如果您使用该`csv`模块，并将数据存储在 Python 列表中，那么您的数据将消耗更多的内存。

```
import sys
import numpy as np

try:
    ifile = sys.argv[1]
   #; ofile = sys.argv[2]
except:
    print "Usage:", sys.argv[0], "ifile"; sys.exit(1)   

# Open and read file from std, and assign first four (orbit, time, lat, lon)
# columns to four lists, and last 128 columns (waveforms) to an array.

def remove_bracket(line):
    return float(line.strip("][ '"))

data = np.genfromtxt(ifile, delimiter = ',',
                     dtype = 'float',
                     converters = {i:remove_bracket for i in range(132)}
                     )

orbit = data[:,0]
time = data[:,1]
lat = data[:,2]
lon = data[:,3]
wvf = data[:,4:128]
print(wvf) 
```

请注意，变量`orbit`,`time`等是 的“视图” `data`——它们不是 的副本`data`，因此不需要（太多）额外的内存。这也意味着修改`orbit`也会影响`data`，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:43:33.307

简单地：

```
wvf = []

try:
    reader = csv.reader(ifile, delimiter=',')
    for row in reader:
        # ...
        wvf.append(row[4:132]) 
```

初始化`wvf`为像其他数组一样的空数组，然后`append`每行数据一个子列表（切片）。

* * *

（以防万一您的数据非常大并且您想优化内存使用：有[`array`](http://docs.python.org/library/array.html)用于高效存储的模块。）

# symfony1 - 推进标准问题::IN

> ID：12246975
> 
> 赞同：1
> 
> 时间：2012-09-03T11:30:38.023
> 
> 标签：symfony1, symfony-1.4, propel

我正在尝试在我的查询中添加以下条件

```
AND momento_distribution.MOMENTO_IDMEMBER IN ( 5, 1, 3, 10, 11, 12, 18, 32, 51, 6 ) 
```

为此，我有以下代码

```
$friendCsv=Friend::getFriendIdAsCsv($member); //returning string 5, 1, 3, 10, 11, 12, 18, 32, 51, 6
//code
$c->add(MomentoDistributionPeer::MOMENTO_IDMEMBER, $friendCsv, Criteria::IN); 
```

查询失败，因为它正在生成

```
AND momento_distribution.MOMENTO_IDMEMBER IN ( '5, 1, 3, 10, 11, 12, 18, 32, 51, 6' ) 
```

在字符串上添加单引号。如果我手动删除该单引号，查询将成功运行。

有什么方法可以强制不要在值中加上单引号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:34:43.760

试试看

```
$friendCsv=Friend::getFriendIdAsCsv($member); //returning string 5, 1, 3, 10, 11, 12, 18, 32, 51, 6
$friendArr=  explode(',', $friendCsv);
//code
$c->add(MomentoDistributionPeer::MOMENTO_IDMEMBER, $friendArr, Criteria::IN); 
```

Criteria::IN 应该与数组而不是 CSV 一起使用。

# java - 如何使用线程在每小时，每分钟内应用刷新间隔

> ID：12246986
> 
> 赞同：0
> 
> 时间：2012-09-03T11:31:06.437
> 
> 标签：java, android, multithreading

```
beerPref2.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {

        public boolean onPreferenceChange(Preference preference, Object newValue) {
            // TODO Auto-generated method stub

             final ListPreference listrefresh = (ListPreference) preference;
             final int idx = listrefresh.findIndexOfValue((String) newValue);

             if(idx==0){
                // set refresh application in each 1 minute according to current time

             }
             else if(idx==1)
             {
                //  set refresh application in each 10 minute according to current time

             }
             else if (idx==2)
             {
                //  set refresh application in each 1 hour  according to current time
             }
             else
             {
                 //  set refresh application in each 24 hour according to current time
             }

            return true;
        }
    }); 
```

我必须在设置中使用它，请告诉我我将如何应用线程或其他东西，以便我们的应用程序在每 1、1、10 分钟内刷新一次……根据列表首选项中的设置，请向我发布代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:34:48.537

我更喜欢使用[ScheduledExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)，然后您可以在方法参数中定义刷新间隔，如下所示。

```
 ExecutorService scheduler =  Executors.newScheduledThreadPool(1);
    scheduler.scheduleAtFixedRate(RunableTask, initialDelay, delay , TimeUnit.MINUTES);

    //where delay is refresh interval and you can set initialDelay as 0; 
```

以分钟为单位传递 TimeUnit，然后采用可变延迟，该延迟从设置中获取值。

# iphone - Drawing Shadowed Rectangle at iOS

> ID：12246988
> 
> 赞同：4
> 
> 时间：2012-09-03T11:31:09.753
> 
> 标签：iphone, ios, drawing

I am trying to draw an image like below with libraries in iOS; but i couldn't.

![enter image description here](../Images/0a4b011cb2815a15c159a2f853fbcec4.png)

I think it is very easy to draw but i couldn't achieve. After i accomplish to draw i will place a label over it.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:43:10.777

Use this as your `drawRect` method:

```
- (void)drawRect:(CGRect)rect

    //// General Declarations
    CGContextRef context = UIGraphicsGetCurrentContext();

    //// Shadow Declarations
    UIColor* shadow = [UIColor blackColor];
    CGSize shadowOffset = CGSizeMake(1, 1);
    CGFloat shadowBlurRadius = 2;

    //// Frames
    CGRect frame = rect;

    //// Abstracted Graphic Attributes
    CGRect shadowBoxRect = CGRectMake(CGRectGetMinX(frame) + 0, CGRectGetMinY(frame) + 0, 40, 40);
    CGFloat shadowBoxCornerRadius = 4;

    //// ShadowBox Drawing
    UIBezierPath* shadowBoxPath = [UIBezierPath bezierPathWithRoundedRect: shadowBoxRect cornerRadius: shadowBoxCornerRadius];
    [[UIColor lightGrayColor] setFill];
    [shadowBoxPath fill];

    ////// ShadowBox Inner Shadow
    CGRect shadowBoxBorderRect = CGRectInset([shadowBoxPath bounds], -shadowBlurRadius, -shadowBlurRadius);
    shadowBoxBorderRect = CGRectOffset(shadowBoxBorderRect, -shadowOffset.width, -shadowOffset.height);
    shadowBoxBorderRect = CGRectInset(CGRectUnion(shadowBoxBorderRect, [shadowBoxPath bounds]), -1, -1);

    UIBezierPath* shadowBoxNegativePath = [UIBezierPath bezierPathWithRect: shadowBoxBorderRect];
    [shadowBoxNegativePath appendPath: shadowBoxPath];
    shadowBoxNegativePath.usesEvenOddFillRule = YES;

    CGContextSaveGState(context);
    {
        CGFloat xOffset = shadowOffset.width + round(shadowBoxBorderRect.size.width);
        CGFloat yOffset = shadowOffset.height;
        CGContextSetShadowWithColor(context,
            CGSizeMake(xOffset + copysign(0.1, xOffset), yOffset + copysign(0.1, yOffset)),
            shadowBlurRadius,
            shadow.CGColor);

        [shadowBoxPath addClip];
        CGAffineTransform transform = CGAffineTransformMakeTranslation(-round(shadowBoxBorderRect.size.width), 0);
        [shadowBoxNegativePath applyTransform: transform];
        [[UIColor grayColor] setFill];
        [shadowBoxNegativePath fill];
    }
    CGContextRestoreGState(context);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:34:15.703

Inner shadows are hard to do with CoreGraphics -- basically, you need to negate your path and draw a drop shadow below it, clipped to your original path.

You can take a look at [PaintCode](http://www.paintcodeapp.com/) and it will show you the code. It has a 15-min demo mode if you don't want to purchase it, that should be enough for your needs.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:39:16.510

You could try this:

```
#import <QuartzCore/QuartzCore.h> 
```

and in your code , after making the your view set these:

```
self.layer.cornerRadius = x;

self.layer.masksToBounds = TRUE; 
```

This allows you to have rounded corners on your view. And if you calculate the radius to match your view , you should get the desired look.

```
 - (id)initWithFrame:(CGRect)frame
    {
        self = [super initWithFrame:frame];
        if (self) {
         self.backgroundColor = [UIColor grayColor];
        }
        return self;
    }
 - (void)drawRect:(CGRect)rect
{ 
           CGContextRef context =UIGraphicsGetCurrentContext();
            CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
            // And draw with a blue fill color
            CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
            // Draw them with a 2.0 stroke width so they are a bit more visible.
            CGContextSetLineWidth(context, 2.0);

            CGContextAddRect(context, self.bounds);

            CGContextStrokePath(context);

            // Close the path
            CGContextClosePath(context);
            // Fill & stroke the path
            CGContextDrawPath(context, kCGPathFillStroke);
            self.layer.cornerRadius = self.bounds.size.width/12;
            self.layer.masksToBounds = TRUE;

} 
```

I think it will be helpful to you.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:56:39.600

Try the below code where `myView` is the `UIView` to which you want to set the shadow.

```
myView.layer.cornerRadius   =   5.0f;
myView.layer.masksToBounds  =   YES;
[myView.layer setShadowColor:[[UIColor blackColor] colorWithAlphaComponent: 0.5]];
[myView.layer setShadowOffset:CGSizeMake(0, -1)]; 
```

Hope this helps.-

# java - 将 Eclipse WTP 的 context.xml 放在哪里？

> ID：12246993
> 
> 赞同：7
> 
> 时间：2012-09-03T11:31:29.510
> 
> 标签：java, eclipse, eclipse-wtp

我正在使用*Eclipse Indigo 3.7 + WTP + m2e (包括 m2e-wtp)*。我已经在 Eclipse 上配置了我的 Tomcat 7.0 服务器。我有一个 Web 应用程序，我试图通过 Eclipse 在 Tomcat 上运行，但是当我运行它时，`context.xml`文件不会复制到`conf/Catalina/localhost`目录中，这会给我的应用程序带来一些问题。

应该放在哪里`context.xml`才能复制到这个目录？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T19:23:10.717

如果在将 WAR 文件部署到 Tomcat 时需要指定 context.xml 文件，则必须将其包含在 WAR 中。实现这一点的最简单方法是将其添加到您的 webapp 资源中：

```
src
|_ main
   |_ webapp
      |_ META-INF
         |_ context.xml 
```

当您构建您的 Web 应用程序 (*.war) 时，maven 将在合适的位置将其加入 WAR。

# ios - 在 iCloud 上创建订阅的 EKCalendar？

> ID：12246995
> 
> 赞同：2
> 
> 时间：2012-09-03T11:31:32.420
> 
> 标签：ios, icalendar, eventkit

我想在 iOS 上创建一个订阅日历，但将其存储在 iCloud 中，以便在用户的其他设备上可见。我看到了如何创建一个 iCloud EKCalendar，但我没有看到任何方法来告诉它订阅的 url 是什么。

这还不能通过 SDK 实现吗？

谢谢约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:14:41.963

不，您不能在 iOS 上创建订阅日历。在[支持论坛](http://support.apple.com/kb/HT5029)中查看**注释**

希望这可以帮助。