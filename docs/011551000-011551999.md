# StackOverflow 问答 11551000-11551999

# c# - C# 针对远程 kerberos kdc 进行身份验证

> ID：11551003
> 
> 赞同：0
> 
> 时间：2012-07-18T21:59:09.000
> 
> 标签：c#, authentication, kerberos, jaas, sspi

背景：假设您正在编写一个为大学生提供服务的程序，并且您需要确保只有特定大学的学生可以访问它。与大多数大学一样，该大学为其学生提供 kerberos 登录。

如上文 c# 中所述，如何针对预先存在的远程 kerberos v5 kdc 对用户进行身份验证？目标是简单地进行身份验证（通过/失败），我不希望存储任何票证/令牌。

我使用[JAAS](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jaas/tutorials/GeneralAcnOnly.html)（Java 身份验证和授权服务）在 Java 中做了同样的事情，而且非常简单。

SSPI 是 .NET 中的等价物吗？我如何使用它来完成我所需要的？我似乎找不到执行此操作的代码示例。

注意：我已经查看了@chimanrao 的[问题](https://stackoverflow.com/questions/8005139/c-sharp-client-to-connect-to-kerberos-kdc)，并且链接没有对我进行足够详细的讨论。此外，关于这个主题的[mdsn 文章](http://msdn.microsoft.com/en-us/library/82tywhc6%28v=vs.80%29.aspx)非常不完整，它所说的一些类不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:49:51.733

我正在寻找做同样的事情。我最近收到了我公司的一个项目，我必须要求用户在网页上的表单中输入他们的 Windows 登录名和密码，并且在提交时，我需要针对远程 Active Directory 服务器进行身份验证。我只需要一个通过/失败，不需要令牌。

# ajax - 如何构建一个在将内容保留在背景中的上方打开的侧边按钮

> ID：11551005
> 
> 赞同：0
> 
> 时间：2012-07-18T21:59:22.213
> 
> 标签：ajax, jquery-ui, jquery

我想制作一个按钮，就像[http://www.snappages.com/](http://www.snappages.com/)一样，其中帮助按钮位于右侧，单击新框打开，将内容留在后面。如何从头开始执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:08:44.117

要将按钮放置在右侧：

使用 css 固定定位，right 为 0

创建叠加层

制作如下元素：

```
<div id="overlay">
<div id="help">
</div>
</div> 
```

用CSS：

```
#overlay{
position:fixed;
display:none;
top:0;
left:0;
width:100%;
height:100%;
background:rgb(255,255,255);
background:rgba(255,255,255,.5);
} 
```

在叠加层内，使您的实际帮助表单将其绝对定位并居中

```
#help{
position:absolute;
left:50%;
width:300px;
margin-left:-150px;
top:100px;
} 
```

并点击帮助按钮

```
$('#help-button').on('click',function(){
  $('#overlay').fadeIn('fast');
  }); 
```

# sql - 如何在单个查询中分组和计数？

> ID：11551007
> 
> 赞同：0
> 
> 时间：2012-07-18T21:59:24.363
> 
> 标签：sql, group-by, ms-access-2007, aggregate-functions

我认为它应该使用 GroupBy 和聚合函数来执行我需要的以下步骤，但是我无法让它工作：所以说我有下表但有更多记录价格

```
 Cost Zone  Zip Code    Weight(lbs) Price   Cost    Freight Value
             5       K0K             1209      0    135     289
             5       K0K             157       0    135     0
             5       K0L             1425      0    135     650
             5       K0L             1425      0    135     1999 
```

我希望要求查询说明“货运价值”的计数属于某个范围

```
 Zip Code  Range 0-500 Range 501-1000  Range 1001-2000
            K0K         2              0                  0
            K0L         0              1                  1 
```

这怎么可能做到这一点？如果您需要我更详细地解释，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:11:28.560

这将在 MS Access 中运行。您将需要一个范围表，然后：

```
TRANSFORM Sum(t1.FreightValue) AS SumFreightValue
SELECT t1.ZipCode
FROM t1, Range
WHERE (((t1.FreightValue) Between [range].[Upper] And [range].[lower]))
GROUP BY t1.ZipCode
PIVOT Range.Range 
```

**范围表**

```
Range      Lower   Upper
0-500          0     500
501-1000     501    1000
1001-2000   1001    2000 
```

# eclipse - eclipse 用空对话框挂起

> ID：11551017
> 
> 赞同：2
> 
> 时间：2012-07-18T22:00:39.043
> 
> 标签：eclipse, dialog, freeze

我在 Fedora 16 上使用 Eclipse Indigo，问题是在处理 eclipse 的某些操作期间，会出现一个空对话框并且 eclipse 挂起，除了从 shell 中终止 eclipse 进程外，没有办法关闭对话框。

一种这样的情况是，如果 eclipse 项目中存在一个文件，并且我想用另一个同名文件替换它，则会出现空对话框并且 eclipse 挂起。

以下是带有空对话框的 Eclipse 屏幕截图。 ![eclipse 用空对话框挂起](../Images/fa06a77284b0673fa871ca8785b8c391.png)

有什么办法可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:23:39.803

我想我可能已经找到了问题（无论如何对我来说）......

我使用 Cinnamon 窗口管理器在 Linux Mint 上的 Eclipse Juno 上看到了问题。 [https://github.com/linuxmint/Cinnamon/issues/340](https://github.com/linuxmint/Cinnamon/issues/340) 说它是 Cinnamon 中的一个错误，关闭 Cinnamon 中的桌面效果将修复它。我确实启用了桌面效果，但我关闭了它们，但在尝试了 10 分钟后，我无法通过执行一系列以前总是为我完成的步骤来使空对话框出现。YMMV，但请尝试在窗口管理器中关闭桌面效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:04:54.067

因此，请检查文件 .snap 是否存在于您的 Workbench-Folder 中：

> .metadata/.plugins/org.eclipse.core.resources。

比删除或重命名文件并再次启动 Eclipse。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T05:03:46.107

线程转储看起来完全正常，如果你能重现它，你应该在 eclipse.org 上提交一个错误。对于您的配置，在 SWT 级别的某处可能有一些错过的事件。他们将能够提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T02:43:25.653

当我在 Mint Cinnamon 下关闭 Eclipse Juno 时，我遇到了类似的问题。在进程终止后，亲密的对话变成了鬼魂并留下来。

我的解决方法是重新启动窗口管理器（Alt-F2、r、回车）。我意识到这并不是最初的问题所问的，但它似乎是相关的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-27T18:16:54.040

这对我有用：

```
rm -rf /path_to_workspace/.plugins 
```

什么对我不起作用：

```
eclipse -clean 
```

# html - IE8cv 益智游戏：通过类设置缩放：1 隐藏内容

> ID：11551019
> 
> 赞同：0
> 
> 时间：2012-07-18T22:00:42.650
> 
> 标签：html, html-table, overflow, zooming, haslayout

如果满足以下条件，设置`zoom:1`隐藏元素的内容：

1.  标记必须具有以下结构：

    ```
    <table><tr><td>
        <div class="overflow">
            <span class="zoom">zoom</span>
        </div>
    </td></tr></table> 
    ```

2.  必须定义这些样式：

    ```
    .somethingSPECIAL .zoom {
        zoom: 1;
    }
    .overflow {
        width: 300px;  /* Whatever px here. */
        height: 150px; /* Whatever px here. */
        overflow: auto;
    } 
    ```

3.  该类`somethingSPECIAL`应在页面加载*后*应用于上述标记的任何祖先（如单击按钮）。

4.  您被迫使用的浏览器在兼容性视图中必须是 IE8。

[这是一个现场演示。](http://jsfiddle.net/GgY6C/5/)

为什么会发生这种情况，我能做些什么来防止它发生？（我无法摆脱`zoom: 1`。我还必须设置父类，如演示中所示。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:18:25.477

我注意到 span 元素的宽度和高度从 33x19 变为 0x0。因此，如果您将其设置回“自动”，则它可以工作。

```
$('.zoom').css('width', 'auto'); 
```

见[http://jsfiddle.net/GgY6C/29/](http://jsfiddle.net/GgY6C/29/)

# jquery - 向 JSON twitter jQuery 添加和编辑时间戳

> ID：11551022
> 
> 赞同：1
> 
> 时间：2012-07-18T22:00:44.887
> 
> 标签：jquery, json, twitter

我能够添加时间戳（下面的问题/问题）......但现在我在格式化它时遇到了问题。

我希望它是“14 分钟前”，甚至只是带有时间的日期。有人能帮忙吗？（如果你给我代码，你能告诉我把它放在哪里吗......）

谢谢！

*这是我在代码中更改以添加时间戳的内容：*

```
list.append(element.append(paragraph.html(linkify(value.text)).append("<br /><i>@myadorkablelife "+value.created_at+"</i>"))); 
```

一段时间以来，我一直在尝试向我的推特提要添加时间戳，但似乎没有任何效果。（理想情况下，最好有任何适当的链接功能，如链接......所以如果你能帮助我，那就加分！）

这是我在我的网站上得到的：

```
 this.createTwitter=function()
  {
    $.getJSON('http://twitter.com/statuses/user_timeline.json?screen_name='+$this.twitterName+'&count='+$this.twitterEntryCount+'&callback=?',function(data) 
    {
      if(data.length)
      {
        var list=$(document.createElement('ul'));         

        $(data).each(function(index,value)
        {
          var element=$(document.createElement('li'));              
          var paragraph=$(document.createElement('p'));

          list.append(element.append(paragraph.html(linkify(value.text))));
        });

        $('#latest-tweets').append(list);

        list.bxSlider(
        {
          auto:true,
          pause:5000,
          nextText:null,
          prevText:null,              
          mode:'vertical',
          displaySlideQty:1
        });

        list.find('a').attr('target','_blank');
      }
    });      
  }; 
```

如果您需要查看该站点以更好地查看源代码，请告诉我。jQuery 不是我的东西，但通常我可以搜索并找到我需要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:34:01.450

每条推文都有一个人类可读的“created_at”属性：

```
"created_at":"Thu Jul 19 07:59:51 +0000 2012" 
```

在您的情况下，只需致电

```
value.created_at 
```

获取时间戳的值。

如果您想获得时间（用于计算），请使用

```
new Date(value.created_at) 
```

[JavaScript 应该能够识别和解析该字符串](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T18:03:03.740

如果您想要 timeago 文本（例如“10 分钟前”），您应该尝试[Livestamp.js](http://mattbradley.github.com/livestampjs)。你可以这样做：

```
var livestamp = $('<span />').livestamp(new Date(created_at));
list.append(element.append(paragraph.html(linkify(value.text)).append(livestamp))); 
```

它会随着时间的推移自动更新。

# javascript - 单击 HTML 中滚动条的箭头时滚动的像素数

> ID：11551028
> 
> 赞同：2
> 
> 时间：2012-07-18T22:01:30.637
> 
> 标签：javascript, html, css, scroll

有没有办法控制当用户单击滚动条的箭头（而不是滑动滚动条本身）时，HTML 元素的内容滚动的像素数，也许使用 CSS 和 Javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:03:20.823

不，没有。

也就是说，我相当确定单击滚动箭头将触发单个`onscroll`事件，因此您可能会限制每个`onscroll`触发事件允许的滚动量，但这意味着您只能减少默认量，您不能增加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:10:43.847

用这个。[http://archive.plugins.jquery.com/project/mousewheel](http://archive.plugins.jquery.com/project/mousewheel)

加载 JQuery 和鼠标滚轮插件。

```
 <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js?ver=1.3.2'></script>
  <script type='text/javascript' src='/js/jquery.mousewheel.min.js'></script> 
```

然后做这样的事情：

```
$(function() {

   $("body").mousewheel(function(event, delta) {

  this.scrollLeft -= (delta * 30);

  event.preventDefault();

   });

}); 
```

*请意识到我说的是“类似这样的东西”，您需要修改和/或添加代码以获得您想要的结果，这只是让您走上正确的道路*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T22:49:32.187

尽管固定滚动量适用于箭头和条形，但我就是这样做的。如果您在浏览器中加载它，您将看到左侧 div 仅滚动固定数量的像素，因此黑条始终对齐。右侧 div 具有正常滚动，黑条未对齐。

```
<html>
<head>
    <style>
        .scroller { 
            height: 220px;
            width: 120px;
            overflow: auto;
            display: inline-block;
            margin-right: 40px;
        }

        .item {
            height: 20px;
            margin-bottom: 2px;
            width: 100px;
            background-color: black;
            color: white;
        }
    </style>
    <script>
        function init() {
            var scroller1 = document.getElementById("scroller1");
            initScroller(scroller1);
            scroller1.addEventListener("scroll", onScroll);

            var scroller2 = document.getElementById("scroller2");
            initScroller(scroller2);
        }

        function initScroller(node) {
            for (var i = 0; i < 40; i++) {
                var elem = document.createElement("div");
                elem.setAttribute("class", "item");
                elem.innerHTML = "item " + i;
                node.appendChild(elem);
            }
        }

        var lastScroll = 0;
        var deltaPerScroll = 22;
        function onScroll(evt) {
            var node = document.getElementById("scroller1");
            if (node.scrollTop != lastScroll) {
                var delta = node.scrollTop < lastScroll ? -deltaPerScroll : deltaPerScroll;
                node.scrollTop = lastScroll + delta;
            }
            lastScroll = node.scrollTop;
        }
    </script>
</head>
<body onload="init();">
    <div id="scroller1" class="scroller"></div>
    <div id="scroller2" class="scroller"></div>
</body>
</html> 
```

# python - 指向 django 管理视图的不同 URL

> ID：11551029
> 
> 赞同：0
> 
> 时间：2012-07-18T22:01:38.313
> 
> 标签：python, django, url, admin

在我的应用程序中，“admin/appname/modelname/add”进入管理视图以添加/更改对象。我希望 'admin/appname/modelname/add' 指向不同的视图（这已经完成了很多），然后是一个新的 url（比如 admin/makenewmodel）指向与 admin/appname/modelname/add 相同的视图指着。我不能只是将它重定向到 /add 因为它现在指向我的新视图。如何将我自己的 url 直接指向管理视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:37:57.130

在您的 settings.py 中，url 按顺序进行测试，例如：

```
url ('admin/appname/modelname/add', 'your view 1')
url ('admin/appname/modelname/add', 'your view 2') 
```

它会询问视图 1 而不是视图 2。您可以通过在顶部添加“url”来使用它来覆盖 URL 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:24:02.507

您必须覆盖您的 ModelAdmin 的 get_urls()。查看我的答案 [Django Admin - Custom changelist view](https://stackoverflow.com/questions/6814157/django-admin-custom-changelist-view/6814957#6814957) （问题几乎与您的相同）

# android - 播放和暂停默认以外的音乐应用程序（例如 Pandora）

> ID：11551034
> 
> 赞同：3
> 
> 时间：2012-07-18T22:02:06.883
> 
> 标签：android, text-to-speech, audio-player, pandora, android-music-player

我目前正在开发一个需要使用 TTS 的应用程序。问题是如果用户在听音乐，你就听不到 TTS。我已经想通了，我可以用它`AudioFocus`来暂时集中注意力，然后释放它。获得焦点会暂停潘多拉（我目前正在尝试使用的应用程序），但释放它不会做任何事情。

我知道当打电话时，它可以暂停潘多拉和其他一切，但我在控制它的源代码中找不到任何东西。

有没有其他方法可以恢复潘多拉或任何其他外部音乐播放器？

我用它来暂停音乐。

```
if(am.isMusicActive()) {
    int result = am.requestAudioFocus(this, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN);
    if(result == AudioManager.AUDIOFOCUS_REQUEST_GRANTED){
    }
} 
```

并在`onDestroy`

```
am.abandonAudioFocus(this); 
```

我试图通过以下部分恢复它：

```
Intent i = new Intent("com.android.music.musicservicecommand");
i.putExtra("command", "play");
this.sendBroadcast(i); 
```

和

```
Intent downIntent = new Intent(Intent.ACTION_MEDIA_BUTTON, null);
KeyEvent downEvent = new KeyEvent(KeyEvent.ACTION_UP,KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE);
downIntent.putExtra(Intent.EXTRA_KEY_EVENT, downEvent);
sendOrderedBroadcast(downIntent, null); 
```

第一个播放本地音乐应用程序（原因很明显，但我认为值得一试）。第二个什么都不做。我也用它来尝试暂停音乐，但效果不佳。

# image - HTML5 Canvas 上传的图像缩放/带按钮编码的缩放

> ID：11551036
> 
> 赞同：0
> 
> 时间：2012-07-18T22:02:15.720
> 
> 标签：image, html, canvas, zooming, scale

我对此几乎是个菜鸟，并且正在尝试创建 2 层。我的顶层是固定图像，底部图像是上传的。我希望能够操纵底部的图像。我有一个代码

[http://www.html5canvastutorials.com/labs/html5-canvas-scaling-a-drawing-with-plus-and-minus-buttons/#comment-19246](http://www.html5canvastutorials.com/labs/html5-canvas-scaling-a-drawing-with-plus-and-minus-buttons/#comment-19246)

但我无法更改它，以便将按钮应用于上传的图像。

这是我在 html 方面的内容，它创建 2 层并在顶部上传固定图像：

```
<input type="file" id="files" name="files[]" multiple onchange="handleFileSelect(this.files)"/>

        <div>
            <input type="button" id="plus" value="+"><input type="button" id="minus" value="-">
        </div>

<div id="canvasesdiv" style="position:relative; width:400px; height:300px">
<canvas id="layer2"
style="z-index: 1;
position:absolute;
left:0px;
top:0px;
" height="300px" width="400">
This text is displayed if your browser does not support HTML5 Canvas.
</canvas>

<canvas id="layer1"
style="z-index: 2;
position:absolute;
left:0px;
top:0px;
" height="300px" width="400">
This text is displayed if your browser does not support HTML5 Canvas.
</canvas></div>

<script type="text/javascript">
var c=document.getElementById("layer1");
var ctx=c.getContext("2d");
var img=new Image();
img.onload = function(){
ctx.drawImage(img,0,0);
};
img.src="assets/images/testsquare.png";
</script> 
```

这就是我在脚本方面的改动：

```
 <script>
        function draw(scale, translatePos){
            var canvas = document.getElementById("layer1");
            var context = canvas.getContext("2d");

            // clear canvas
            context.clearRect(0, 0, canvas.width, canvas.height);

            context.save();

            context.restore();
        }

        window.onload = function(){
            var canvas = document.getElementById("layer1");

            var translatePos = {
                x: canvas.width / 2,
                y: canvas.height / 2
            };

            var scale = 1.0;
            var scaleMultiplier = 0.8;
            var startDragOffset = {};
            var mouseDown = false;

            // add button event listeners
            document.getElementById("plus").addEventListener("click", function(){
                scale /= scaleMultiplier;
                draw(scale, translatePos);
            }, false);

            document.getElementById("minus").addEventListener("click", function(){
                scale *= scaleMultiplier;
                draw(scale, translatePos);
            }, false);

            // add event listeners to handle screen drag
            canvas.addEventListener("mousedown", function(evt){
                mouseDown = true;
                startDragOffset.x = evt.clientX - translatePos.x;
                startDragOffset.y = evt.clientY - translatePos.y;
            });

            canvas.addEventListener("mouseup", function(evt){
                mouseDown = false;
            });

            canvas.addEventListener("mouseover", function(evt){
                mouseDown = false;
            });

            canvas.addEventListener("mouseout", function(evt){
                mouseDown = false;
            });

            canvas.addEventListener("mousemove", function(evt){
                if (mouseDown) {
                    translatePos.x = evt.clientX - startDragOffset.x;
                    translatePos.y = evt.clientY - startDragOffset.y;
                    draw(scale, translatePos);
                }
            });

            draw(scale, translatePos);
        };
    </script> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:15:22.003

您的`draw`方法当前使用 using[`document.getElementById`](https://developer.mozilla.org/en/DOM/document.getElementById)方法来检索 layer2 画布并对其进行操作。您的问题并不完全清楚（在您的代码中包含该`handleFileSelect`方法可能会有所帮助），但我认为您需要更改该`draw`方法，以便它检索 layer2 画布，这大概是上传图像被绘制到的那个：

```
function draw(scale, translatePos){

    // Get the layer2 canvas element in which the user uploaded image has been drawn 
    var canvas = document.getElementById("layer2");
    var context = canvas.getContext("2d");

    // clear canvas
    context.clearRect(0, 0, canvas.width, canvas.height);

    context.save();

    context.restore();
} 
```

# mips - 将共享对象中的二进制函数替换为自定义函数（在 MIPSEL 下）

> ID：11551037
> 
> 赞同：1
> 
> 时间：2012-07-18T22:02:19.170
> 
> 标签：mips, embedded-linux, shared-objects, objdump

我试图打破我的一个具有 MIPSEL 核心（小端 MIPS）的设备。我主要想这样做是因为它附带的软件有点损坏并且无法按预期工作（制造商不会帮助我，因为我每月不购买数千台）。

这个设备有一个 telnet 控制台，我已经有一个固件升级，它修改了一个具有可重定位代码的共享对象（一个 .so 文件）。我知道有一个函数被调用。所以当我访问这个设备的某个功能并且我已经完成了一个二进制文件来修改 /etc/passwd 以便我可以远程登录（这可以在我手动刷新我的自定义后完成固件自己）。

我已经“objdump”了这两个文件并且对这两个文件都进行了反汇编。

我的问题是：

如何用我的自定义函数替换原始库中的给定函数，以便我可以在盒子上运行我的代码？我知道 objcopy 可以工作，但是很难获得关于它的文档来实现这一点。

我想做的有点像病毒，虽然我不想分发它也不想闯入其他人的设备（顺便说一句，我所说的这个设备非常罕见）。

**更新**

我手动合并了二进制文件，“二进制”复制了我的自定义函数，然后手动更改了重定位文字。我注意只使用已经链接到原始共享对象的外部函数。但是，我将自己锁定在设备之外，因为我修改了一个（奇怪地）在设备启动时使用的函数，而主二进制文件的弱点让我更新它停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:17:37.953

您可以构建自己的包含该函数的共享库，并使用 LD_PRELOAD 覆盖包含的共享库。

# java - 结合 ANTLR 和代码文件

> ID：11551038
> 
> 赞同：1
> 
> 时间：2012-07-18T22:02:27.533
> 
> 标签：java, antlr

我正在为其他人正在编写的 ANTLR 语法创建 Java 分析器。

是否可以合并 ANTLR 文件，以便我可以通过与原始语法 (.g) 文件分开的文件将括号中的 Java 代码添加到 ANTLR 生成的 Java 文件中？我研究了复合语法，但似乎我不能将现有语法作为组合词法分析器/解析器导入。

例如，我可以这样做：

**语法.g**

```
grammar Grammar;

statement   : first=WORD ';' ;
WORD        : ('A'..'z')* ; 
```

**Java语法.g**

```
grammar JavaGrammar;
imports Grammar;

@header {
    package pkg;
    import Container;
}

@lexer::header {
    package pkg;
}

@members{
    Container c = null;
    public void setContainer(Container c) { this.c = c; }

    @Override
    protected Object recoverFromMismatchedToken(IntStream input, int ttype, BitSet follow) throws RecognitionException {
      throw new MismatchedTokenException(ttype, input);
    }

    @Override
    public Object recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow) throws RecognitionException {
      throw e;
    }
}

@rulecatch {
    catch (RecognitionException e) {
        throw e;
    }
}

jStatement: statement { if(c!=null) c.add($first.text); } ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:03:10.207

您不能导入（它是`import`，顺便说一句，不是`imports`）组合语法。请参阅 ANTLR 维基：

> 请注意，组合语法可能不会导入组合语法。这似乎限制了导入的深度，但事实并非如此。解析器语法不需要显式导入它们所依赖的词法分析器语法，这仅在根复合语法中完成一次，它“粘合”其依赖的语法。
> 
> -- [http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars](http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars)

而且你不能在它存在的规则之外使用标签（`first`在你的规则中）。`statement`

你*可以*做的是：

## 档案：LG

```
lexer grammar L;

WORD : ('A'..'z')* ;
SCOL : ';'; 
```

## 档案：PG

```
parser grammar P;

statement returns[String first, String last]
 : WORD SCOL
   {
     $first = $WORD.text;
     $last = $SCOL.text;
   }
 ; 
```

## 文件：JavaGrammar.g

```
grammar JavaGrammar;

import P, L;

@parser::members {
  public static void main(String[] args) throws Exception {
    L lexer = new L(new ANTLRStringStream("SO;"));
    JavaGrammarParser parser = new JavaGrammarParser(new CommonTokenStream(lexer));
    parser.jStatement(); 
  }
}

jStatement
 : statement 
   {
     System.out.println("statement       = '" + $statement.text + "'\n" + 
                        "statement.first = '" + $statement.first + "'\n" + 
                        "statement.last  = '" + $statement.last + "'");
   } 
 ; 
```

使用 main 方法运行该类：

```
java -cp antlr-3.3-complete.jar org.antlr.Tool *.g
javac -cp antlr-3.3-complete.jar *.java
java -cp .:antlr-3.3-complete.jar JavaGrammarParser 
```

您会看到以下内容被打印到控制台：

```
statement       = 'SO;'
statement.first = 'SO'
statement.last  = ';' 
```

# c# - 它是如何存储在内存中的——嵌套令人困惑

> ID：11551039
> 
> 赞同：1
> 
> 时间：2012-07-18T22:02:52.260
> 
> 标签：c#

[http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.80).aspx)

在上面的链接中，“Node”类将“Node”作为其数据成员。它究竟是如何存储在内存中的？因为当它为“节点”创建内存结构时，其中一个成员具有“节点”内存结构。出于某种原因，我无法理解它在程序中如何解释并由编译器编译的内部工作原理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:11:50.550

我认为您的问题源于您直观地认为数据成员节点（或者更确切地说为其分配的内存）包含在原始节点中。

理解的关键是 Node 成员实际上是一个引用——它可能是空的。因此，用于存储构成节点的数据的内存可以在任何地方。Node 成员本质上是一个指针。

.NET 和现代语言倾向于掩盖这种事情，这样程序员就不需要考虑它了。如果我是你，我会考虑寻找高质量的 C 文本并仔细阅读关于指针的章节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:12:35.340

那里的`Node`成员不是您所说的“嵌入”或“嵌套”。

它只是对另一个节点的*引用。*如果您正在使用 C 或 C++，它在概念上将是指向另一个节点的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:13:09.207

```
private class Node
{
    private Node next;
    private T data;

    ...
} 
```

私有字段`next`存储对类型对象的引用`Node`。它引用的对象将在内存中的其他位置。

# java - Jersey 返回 HTTP 状态 405 - 不允许的方法

> ID：11551040
> 
> 赞同：20
> 
> 时间：2012-07-18T22:03:07.580
> 
> 标签：java, tomcat, jersey, jax-ws

我有一个使用 Jersey 的非常简单的端点。我的 URL 是静态的，它不需要任何请求参数。它看起来像这样：

```
@GET
@Path("/mydata")
@Produces(javax.ws.rs.core.MediaType.APPLICATION_JSON)  
public String getData()  {
  return "{'name': 'value'}";
} 
```

但是，每当我请求此 URL 时，我总是会收到一个 HTTP 状态代码 405 - Method Not Allowed。

奇怪的是，如果我更改`@Path`注释并定义一个路径变量，例如`@Path("/chart/{blah}")`它工作正常。

有谁知道为什么我必须定义一个路径变量才能让它工作？我不需要路径变量，添加一个只是为了获得 200 响应似乎很愚蠢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T09:37:35.673

感谢您的建议。结果是我愚蠢地为我的球衣 SpringServlet 输入了不正确的 url 模式。它`/`不是`/*`

```
<servlet>
   <servlet-name>MyServlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
</servlet>

<url-pattern>/*</url-pattern>

<servlet-mapping>
   <servlet-name>Chart Service</servlet-name>
   <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T09:04:51.550

注释类而不是方法：

```
@Path("/mydata")
public class MyClass(){

@GET
@Produces(javax.ws.rs.core.MediaType.APPLICATION_JSON)  
public String getData()  {
  return "{'name': 'value'}";
}

} 
```

我不知道为什么，但它也给我带来了其他问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T07:47:10.910

我想这可能是因为你指定

```
@Produces(MediaType.APPLICATION_JSON). 
```

1）也许您应该尝试在终端中运行以下命令

```
curl -i -X GET -H 'Accept:application/json' http://localhost:8080/mydata 
```

2）或尝试更改为

```
@Produces({MediaType.APPLICATION_JSON, MediaType.TEXT_HTML}) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-04T05:31:32.577

此类问题的另一个可能来源：要非常注意所有参数和注释。我遇到了这样的问题，当我用 POST 调用一个方法时，它被注释了`@PUT`

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2015-05-18T16:57:07.783

我遇到了同样的问题；[http://localhost:8080/mypath/myendpoint](http://localhost:8080/mypath/myendpoint)没有工作。

尝试将“/rest”添加到路径中，如[http://localhost:8080/rest/mypath/myendpoint](http://localhost:8080/rest/mypath/myendpoint)

# python - paramiko ssh.connect - 要发送什么参数？

> ID：11551043
> 
> 赞同：5
> 
> 时间：2012-07-18T22:03:16.700
> 
> 标签：python, ssh, paramiko

我真的很陌生`python`and `ssh`。

我正在尝试编写一个简单的程序来`ssh`使用`python`. 我已经有了`paramiko`，但我遇到的问题是：

使用终端我使用以下命令打开我的`ssh`：

```
ssh username%hostname@gw.cs.huji.ac.il 
```

现在我不知道要发送什么论据-`ssh.connect()`

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T22:08:26.547

在[paramiko 文档](http://paramiko-docs.readthedocs.org/en/latest/api/client.html)中有以下示例：

```
client = SSHClient()
client.load_system_host_keys()
client.connect('ssh.example.com')
stdin, stdout, stderr = client.exec_command('ls -l') 
```

您还可以在调用时指定用户名和密码[`connect()`](http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html#connect)。这里有方法的签名：

```
connect(self, hostname, port=22, username=None, password=None,
        pkey=None, key_filename=None, timeout=None, allow_agent=True,
        look_for_keys=True, compress=False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:08:10.053

这个文档很清楚，看看你是否能理解它 - [http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html#connect](http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html#connect)

```
connect(self, hostname, port=22, username=None, password=None, pkey=None, key_filename=None, timeout=None, allow_agent=True, look_for_keys=True, compress=False) 
```

所以对你来说，命令是

```
ssh.connect('gw.cs.huji.ac.il', username='username%hostname') 
```

# android - 为 Overlay 中绘制的路径添加 onTap

> ID：11551044
> 
> 赞同：0
> 
> 时间：2012-07-18T22:03:17.607
> 
> 标签：android, overlay, android-mapview

我正在尝试覆盖 Mapview 覆盖的 onTap 函数，该覆盖包含一组使用路径绘制的线。我想知道是否有任何特定的覆盖设计有 onTap 用于线条？

我的叠加层如下所示：

```
public class MyPathOverlay extends Overlay {
MapView map;
Projection projection;
ArrayList<Pair<GeoPoint, Integer>> pointsList; // Set of points and the
                                                // color of the line
                                                // starting from this point

public MyPathOverlay(MapView contextMap, ArrayList<Pair<GeoPoint, Integer>> points) {
    map = contextMap;
    projection = map.getProjection();
    pointsList = points;

}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    super.draw(canvas, mapView, shadow);
    if (shadow == false && pointsList !=null) {

        for (int i = 0; i < pointsList.size() - 1; i++) {
            Paint paint = new Paint();
            paint.setDither(true);
            Pair<GeoPoint, Integer> p1 = pointsList.get(i);
            GeoPoint gp1 = p1.first;
            paint.setColor(p1.second);
            GeoPoint gp2 = pointsList.get(i + 1).first;
            paint.setStyle(Paint.Style.FILL_AND_STROKE);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeCap(Paint.Cap.ROUND);
            paint.setStrokeWidth(5);
            Point point1 = new Point();
            Point point2 = new Point();

            projection.toPixels(gp1, point1);
            projection.toPixels(gp2, point2);
            Path path = new Path();
            path.moveTo(point2.x, point2.y);
            path.lineTo(point1.x, point1.y);
            canvas.drawPath(path, paint);
        }
    }
}

@Override
public boolean onTap(GeoPoint p, MapView mapView) {

    return super.onTap(p, mapView);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:45:25.893

```
@Override
public boolean onTap(GeoPoint geoPoint, MapView mapView) {

    RectF rectF = new RectF();
    path.computeBounds(rectF, true);
    Region region = new Region();
    region.setPath(path, new Region((int) rectF.left, (int) rectF.top, (int) rectF.right, (int) rectF.bottom));

    Point point = new Point();
    mapView.getProjection().toPixels(geoPoint, point);

    if (region.contains(point.x, point.y)) {
        Log.d("onTap", point.x+" "+point.y);
        Log.d("onTap","Path touched!!!");
    }

    return super.onTap(geoPoint, mapView);
} 
```

# html - html5/css3 中的贝塞尔曲线渐变

> ID：11551046
> 
> 赞同：19
> 
> 时间：2012-07-18T22:03:25.023
> 
> 标签：html, css, gradient

看起来不可能进行非线性（例如贝塞尔曲线填充）css3渐变；任何人都知道它是否可以在 html5 画布中使用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T07:31:57.643

我认为最初的评论实际上是关于渐变中从一种颜色到另一种颜色的进展速度，而不是渐变的物理形状。

解决前者：不，不幸的是，目前没有办法进行非线性 CSS 渐变填充。但是，您可以使用连续的色标来实现对渐变形状的某种程度的控制。

[您可以在Colorzilla 渐变生成器](http://www.colorzilla.com/gradient-editor/)中弄乱渐变下的小方块，或阅读[MDN 线性渐变文章](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient#Gradient_with_multiple_color_stops)以获取有关创建自己的色标的详细信息。

色标可以非常有创意地使用，尤其是与`background-size`. 这是使用渐变构建的大量[CSS 模式。](http://lea.verou.me/css3patterns/)

CSS 预处理器也可用于生成*感觉*非线性的渐变（尽管它们只是生成大量停止而无需您考虑每个停止）。最近[一篇关于缓和线性渐变的 CSS 技巧文章](https://css-tricks.com/easing-linear-gradients/)展示了一种这样的方法。

# android - 适用于 Java 或 Google Drive 的 Google API 客户端库，用于从 Android 访问 Google 日历/任务

> ID：11551047
> 
> 赞同：0
> 
> 时间：2012-07-18T22:03:34.237
> 
> 标签：android, task, google-calendar-api

我正在尝试将数据从 Google 日历和任务同步到**Android**，并且想知道最好的方法是什么。我已经找到：

适用于 Java 的 Google API 客户端库 ( [http://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/) )

和

谷歌云端硬盘

如果两者有区别？（[https://developers.google.com/drive/integrate-android-ui](https://developers.google.com/drive/integrate-android-ui)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:59:07.527

Google 日历事件和任务与 Google Drive 完全无关。这三个有单独的库：

*   [http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)
*   [http://code.google.com/p/google-api-java-client/wiki/APIs#Calendar_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Calendar_API)
*   [http://code.google.com/p/google-api-java-client/wiki/APIs#Tasks_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Tasks_API)

# user-interface - Matplotlib 绘图用滚轮缩放

> ID：11551049
> 
> 赞同：35
> 
> 时间：2012-07-18T22:03:47.887
> 
> 标签：user-interface, plot, matplotlib, zooming

当光标悬停在 matplotlib 图上时，是否可以绑定滚轮以放大/缩小？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-19T14:20:58.907

这应该有效。当您滚动时，它会将图形重新定位在指针的位置上。

```
import matplotlib.pyplot as plt

def zoom_factory(ax,base_scale = 2.):
    def zoom_fun(event):
        # get the current x and y limits
        cur_xlim = ax.get_xlim()
        cur_ylim = ax.get_ylim()
        cur_xrange = (cur_xlim[1] - cur_xlim[0])*.5
        cur_yrange = (cur_ylim[1] - cur_ylim[0])*.5
        xdata = event.xdata # get event x location
        ydata = event.ydata # get event y location
        if event.button == 'up':
            # deal with zoom in
            scale_factor = 1/base_scale
        elif event.button == 'down':
            # deal with zoom out
            scale_factor = base_scale
        else:
            # deal with something that should never happen
            scale_factor = 1
            print event.button
        # set new limits
        ax.set_xlim([xdata - cur_xrange*scale_factor,
                     xdata + cur_xrange*scale_factor])
        ax.set_ylim([ydata - cur_yrange*scale_factor,
                     ydata + cur_yrange*scale_factor])
        plt.draw() # force re-draw

    fig = ax.get_figure() # get the figure of interest
    # attach the call back
    fig.canvas.mpl_connect('scroll_event',zoom_fun)

    #return the function
    return zoom_fun 
```

假设您有一个轴对象`ax`

```
 ax.plot(range(10))
 scale = 1.5
 f = zoom_factory(ax,base_scale = scale) 
```

可选参数`base_scale`允许您将比例因子设置为您想要的任何值。

确保您保留一份副本`f`。回调使用弱引用，因此如果您不保留它的副本，`f`可能会被垃圾收集。

写完这个答案后，我认为这实际上非常有用，并将其放在一个[要点中](https://gist.github.com/3144287)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-11-07T07:12:30.530

谢谢大家，这些例子很有帮助。我必须进行一些更改才能使用散点图，并使用左键拖动添加平移。希望有人会发现这很有用。

```
from matplotlib.pyplot import figure, show
import numpy

class ZoomPan:
    def __init__(self):
        self.press = None
        self.cur_xlim = None
        self.cur_ylim = None
        self.x0 = None
        self.y0 = None
        self.x1 = None
        self.y1 = None
        self.xpress = None
        self.ypress = None

    def zoom_factory(self, ax, base_scale = 2.):
        def zoom(event):
            cur_xlim = ax.get_xlim()
            cur_ylim = ax.get_ylim()

            xdata = event.xdata # get event x location
            ydata = event.ydata # get event y location

            if event.button == 'down':
                # deal with zoom in
                scale_factor = 1 / base_scale
            elif event.button == 'up':
                # deal with zoom out
                scale_factor = base_scale
            else:
                # deal with something that should never happen
                scale_factor = 1
                print event.button

            new_width = (cur_xlim[1] - cur_xlim[0]) * scale_factor
            new_height = (cur_ylim[1] - cur_ylim[0]) * scale_factor

            relx = (cur_xlim[1] - xdata)/(cur_xlim[1] - cur_xlim[0])
            rely = (cur_ylim[1] - ydata)/(cur_ylim[1] - cur_ylim[0])

            ax.set_xlim([xdata - new_width * (1-relx), xdata + new_width * (relx)])
            ax.set_ylim([ydata - new_height * (1-rely), ydata + new_height * (rely)])
            ax.figure.canvas.draw()

        fig = ax.get_figure() # get the figure of interest
        fig.canvas.mpl_connect('scroll_event', zoom)

        return zoom

    def pan_factory(self, ax):
        def onPress(event):
            if event.inaxes != ax: return
            self.cur_xlim = ax.get_xlim()
            self.cur_ylim = ax.get_ylim()
            self.press = self.x0, self.y0, event.xdata, event.ydata
            self.x0, self.y0, self.xpress, self.ypress = self.press

        def onRelease(event):
            self.press = None
            ax.figure.canvas.draw()

        def onMotion(event):
            if self.press is None: return
            if event.inaxes != ax: return
            dx = event.xdata - self.xpress
            dy = event.ydata - self.ypress
            self.cur_xlim -= dx
            self.cur_ylim -= dy
            ax.set_xlim(self.cur_xlim)
            ax.set_ylim(self.cur_ylim)

            ax.figure.canvas.draw()

        fig = ax.get_figure() # get the figure of interest

        # attach the call back
        fig.canvas.mpl_connect('button_press_event',onPress)
        fig.canvas.mpl_connect('button_release_event',onRelease)
        fig.canvas.mpl_connect('motion_notify_event',onMotion)

        #return the function
        return onMotion

fig = figure()

ax = fig.add_subplot(111, xlim=(0,1), ylim=(0,1), autoscale_on=False)

ax.set_title('Click to zoom')
x,y,s,c = numpy.random.rand(4,200)
s *= 200

ax.scatter(x,y,s,c)
scale = 1.1
zp = ZoomPan()
figZoom = zp.zoom_factory(ax, base_scale = scale)
figPan = zp.pan_factory(ax)
show() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-09T04:55:50.680

```
def zoom(self, event, factor):
    curr_xlim = self.ax.get_xlim()
    curr_ylim = self.ax.get_ylim()

    new_width = (curr_xlim[1]-curr_ylim[0])*factor
    new_height= (curr_xlim[1]-curr_ylim[0])*factor

    relx = (curr_xlim[1]-event.xdata)/(curr_xlim[1]-curr_xlim[0])
    rely = (curr_ylim[1]-event.ydata)/(curr_ylim[1]-curr_ylim[0])

    self.ax.set_xlim([event.xdata-new_width*(1-relx),
                event.xdata+new_width*(relx)])
    self.ax.set_ylim([event.ydata-new_width*(1-rely),
                        event.ydata+new_width*(rely)])
    self.draw() 
```

这个稍加改动的代码的目的是跟踪光标相对于新缩放中心的位置。这样，如果您在中心以外的点放大和缩小图片，您将保持在同一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-18T20:22:23.650

非常感谢。这很好用。但是，对于比例不再是线性的图（例如对数图），这会失效。我为此写了一个新版本。我希望它可以帮助某人。

基本上，我放大归一化为 [0,1] 的轴坐标。所以，如果我在 x 中放大两倍，我现在想要在 [.25, .75] 范围内。我还添加了一个功能，仅当您位于 x 轴的正上方或下方时才放大 x，并且仅当您位于 y 轴的左侧或右侧时才放大 y。如果您不需要这个，只需设置 zoomx=True 和 zoomy = True 并忽略 if 语句。

此参考对于那些想了解 matplotlib 如何在不同坐标系之间转换的人非常有用：http: [//matplotlib.org/users/transforms_tutorial.html](http://matplotlib.org/users/transforms_tutorial.html)

此函数位于包含指向坐标区 (self.ax) 的指针的对象中。

```
def zoom(self,event):
    '''This function zooms the image upon scrolling the mouse wheel.
    Scrolling it in the plot zooms the plot. Scrolling above or below the
    plot scrolls the x axis. Scrolling to the left or the right of the plot
    scrolls the y axis. Where it is ambiguous nothing happens. 
    NOTE: If expanding figure to subplots, you will need to add an extra
    check to make sure you are not in any other plot. It is not clear how to
    go about this.
    Since we also want this to work in loglog plot, we work in axes
    coordinates and use the proper scaling transform to convert to data
    limits.'''

    x = event.x
    y = event.y

    #convert pixels to axes
    tranP2A = self.ax.transAxes.inverted().transform
    #convert axes to data limits
    tranA2D= self.ax.transLimits.inverted().transform
    #convert the scale (for log plots)
    tranSclA2D = self.ax.transScale.inverted().transform

    if event.button == 'down':
        # deal with zoom in
        scale_factor = self.zoom_scale
    elif event.button == 'up':
        # deal with zoom out
        scale_factor = 1 / self.zoom_scale
    else:
        # deal with something that should never happen
        scale_factor = 1

    #get my axes position to know where I am with respect to them
    xa,ya = tranP2A((x,y))
    zoomx = False
    zoomy = False 
    if(ya < 0):
        if(xa >= 0 and xa <= 1):
            zoomx = True
            zoomy = False
    elif(ya <= 1):
        if(xa <0): 
            zoomx = False
            zoomy = True
        elif(xa <= 1):
            zoomx = True
            zoomy = True
        else:
            zoomx = False
            zoomy = True
    else:
        if(xa >=0 and xa <= 1):
            zoomx = True
            zoomy = False

    new_alimx = (0,1)
    new_alimy = (0,1)
    if(zoomx):
        new_alimx = (np.array([1,1]) + np.array([-1,1])*scale_factor)*.5
    if(zoomy):
        new_alimy = (np.array([1,1]) + np.array([-1,1])*scale_factor)*.5

    #now convert axes to data
    new_xlim0,new_ylim0 = tranSclA2D(tranA2D((new_alimx[0],new_alimy[0])))
    new_xlim1,new_ylim1 = tranSclA2D(tranA2D((new_alimx[1],new_alimy[1])))

    #and set limits
    self.ax.set_xlim([new_xlim0,new_xlim1])
    self.ax.set_ylim([new_ylim0,new_ylim1])
    self.redraw() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-17T12:59:40.000

我真的很喜欢图中的“仅 x”或“仅 y”模式。您可以绑定 x 和 y 键，以便仅在一个方向上进行缩放。请注意，如果您单击输入框或其他东西，您可能还必须将焦点放回画布上 -

`canvas.mpl_connect('button_press_event', lambda event:canvas._tkcanvas.focus_set())`

其余修改后的代码如下：

```
from matplotlib.pyplot import figure, show
import numpy

class ZoomPan:
    def __init__(self):
        self.press = None
        self.cur_xlim = None
        self.cur_ylim = None
        self.x0 = None
        self.y0 = None
        self.x1 = None
        self.y1 = None
        self.xpress = None
        self.ypress = None
        self.xzoom = True
        self.yzoom = True
        self.cidBP = None
        self.cidBR = None
        self.cidBM = None
        self.cidKeyP = None
        self.cidKeyR = None
        self.cidScroll = None

    def zoom_factory(self, ax, base_scale = 2.):
        def zoom(event):
            cur_xlim = ax.get_xlim()
            cur_ylim = ax.get_ylim()

            xdata = event.xdata # get event x location
            ydata = event.ydata # get event y location
            if(xdata is None):
                return()
            if(ydata is None):
                return()

            if event.button == 'down':
                # deal with zoom in
                scale_factor = 1 / base_scale
            elif event.button == 'up':
                # deal with zoom out
                scale_factor = base_scale
            else:
                # deal with something that should never happen
                scale_factor = 1
                print(event.button)

            new_width = (cur_xlim[1] - cur_xlim[0]) * scale_factor
            new_height = (cur_ylim[1] - cur_ylim[0]) * scale_factor

            relx = (cur_xlim[1] - xdata)/(cur_xlim[1] - cur_xlim[0])
            rely = (cur_ylim[1] - ydata)/(cur_ylim[1] - cur_ylim[0])

            if(self.xzoom):
                ax.set_xlim([xdata - new_width * (1-relx), xdata + new_width * (relx)])
            if(self.yzoom):
                ax.set_ylim([ydata - new_height * (1-rely), ydata + new_height * (rely)])
            ax.figure.canvas.draw()
            ax.figure.canvas.flush_events()

        def onKeyPress(event):
            if event.key == 'x':
                self.xzoom = True
                self.yzoom = False
            if event.key == 'y':
                self.xzoom = False
                self.yzoom = True

        def onKeyRelease(event):
            self.xzoom = True
            self.yzoom = True

        fig = ax.get_figure() # get the figure of interest

        self.cidScroll = fig.canvas.mpl_connect('scroll_event', zoom)
        self.cidKeyP = fig.canvas.mpl_connect('key_press_event',onKeyPress)
        self.cidKeyR = fig.canvas.mpl_connect('key_release_event',onKeyRelease)

        return zoom

    def pan_factory(self, ax):
        def onPress(event):
            if event.inaxes != ax: return
            self.cur_xlim = ax.get_xlim()
            self.cur_ylim = ax.get_ylim()
            self.press = self.x0, self.y0, event.xdata, event.ydata
            self.x0, self.y0, self.xpress, self.ypress = self.press

        def onRelease(event):
            self.press = None
            ax.figure.canvas.draw()

        def onMotion(event):
            if self.press is None: return
            if event.inaxes != ax: return
            dx = event.xdata - self.xpress
            dy = event.ydata - self.ypress
            self.cur_xlim -= dx
            self.cur_ylim -= dy
            ax.set_xlim(self.cur_xlim)
            ax.set_ylim(self.cur_ylim)

            ax.figure.canvas.draw()
            ax.figure.canvas.flush_events()

        fig = ax.get_figure() # get the figure of interest

        self.cidBP = fig.canvas.mpl_connect('button_press_event',onPress)
        self.cidBR = fig.canvas.mpl_connect('button_release_event',onRelease)
        self.cidBM = fig.canvas.mpl_connect('motion_notify_event',onMotion)
        # attach the call back

        #return the function
        return onMotion 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-26T09:38:11.617

这是对上面代码稍作修改的建议 - 它使缩放居中更易于管理。

```
 cur_xrange = (cur_xlim[1] - cur_xlim[0])*.5
    cur_yrange = (cur_ylim[1] - cur_ylim[0])*.5
    xmouse = event.xdata # get event x location                                                                                                                                                                                                                            
    ymouse = event.ydata # get event y location                                                                                                                                                                                                                            
    cur_xcentre = (cur_xlim[1] + cur_xlim[0])*.5
    cur_ycentre = (cur_ylim[1] + cur_ylim[0])*.5
    xdata = cur_xcentre+ 0.25*(xmouse-cur_xcentre)
    ydata = cur_ycentre+ 0.25*(ymouse-cur_ycentre) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-15T14:01:53.450

据我所知，还有另一种方法。偶然我遇到了[Axis.zoom](https://matplotlib.org/3.1.3/api/_as_gen/matplotlib.axis.Axis.zoom.html#matplotlib.axis.Axis.zoom)方法。我不知道这是否更快或一般来说是一个好方法，但它有效并且肯定是更少的代码：

```
 def __init(self):
        ...

        self.cid_zoom = self.canvas.mpl_connect('scroll_event', self.zoom)

    def zoom(self, event):
        if event.inaxes == self.ax:
            scale_factor = np.power(self.zoom_factor, -event.step)*event.step
            self.ax.get_xaxis().zoom(scale_factor)
            self.ax.get_yaxis().zoom(scale_factor)
            self.ax.invert_yaxis()
            self.canvas.draw_idle() 
```

但是，如果您绘制图像，由于某种原因，您必须再次反转 y 轴。

您也可以通过这种方式实现[平移](https://matplotlib.org/3.1.3/api/_as_gen/matplotlib.axis.Axis.pan.html#matplotlib.axis.Axis.pan)，但效果并不理想。我不确定为什么：

```
 def __init(self):
        ...

        self.cid_motion = self.canvas.mpl_connect(
            'motion_notify_event', self.pan_move
        )
        self.cid_button = self.canvas.mpl_connect(
            'button_press_event', self.pan_press
        )

    def pan_press(self, event):
        if event.inaxes == self.ax:
            self.x_press = event.xdata
            self.y_press = event.ydata

    def pan_move(self, event):
        if event.button == 1 and event.inaxes == self.ax:
            xdata = event.xdata
            ydata = event.ydata
            dx = (xdata - self.x_press)/np.diff(self.ax.get_xlim())
            dy = (ydata - self.y_press)/np.diff(self.ax.get_ylim())
            self.ax.get_xaxis().pan(-dx)
            self.ax.get_yaxis().pan(-dy)
            self.ax.drag_pan(event.button, event.key, dx, dy)
            self.canvas.draw() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-16T11:38:34.317

使 tacaswell 的回答“顺利”

```
def zoom_factory(ax, base_scale=2.):
    prex = 0
    prey = 0
    prexdata = 0
    preydata = 0

    def zoom_fun(event):
        nonlocal prex, prey, prexdata, preydata
        curx = event.x
        cury = event.y

        # if not changed mouse position(or changed so little)
        # remain the pre scale center
        if abs(curx - prex) < 10 and abs(cury - prey) < 10:
            # remain same
            xdata = prexdata
            ydata = preydata
        # if changed mouse position ,also change the cur scale center
        else:
            # change
            xdata = event.xdata  # get event x location
            ydata = event.ydata  # get event y location

            # update previous location data
            prex = event.x
            prey = event.y
            prexdata = xdata
            preydata = ydata

        # get the current x and y limits
        cur_xlim = ax.get_xlim()
        cur_ylim = ax.get_ylim()

        cur_xrange = (cur_xlim[1] - cur_xlim[0]) * .5
        cur_yrange = (cur_ylim[1] - cur_ylim[0]) * .5

        # log.debug((xdata, ydata))
        if event.button == 'up':
            # deal with zoom in
            scale_factor = 1 / base_scale
        elif event.button == 'down':
            # deal with zoom out
            scale_factor = base_scale
        else:
            # deal with something that should never happen
            scale_factor = 1
            print(event.button)
        # set new limits
        ax.set_xlim([
            xdata - cur_xrange * scale_factor,
            xdata + cur_xrange * scale_factor
        ])
        ax.set_ylim([
            ydata - cur_yrange * scale_factor,
            ydata + cur_yrange * scale_factor
        ])
        plt.draw()  # force re-draw

    fig = ax.get_figure()  # get the figure of interest
    # attach the call back
    fig.canvas.mpl_connect('scroll_event', zoom_fun)

    # return the function
    return zoom_fun 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-20T12:53:03.953

其他答案使用`ax.set_xlim()`并`ax.set_ylim()`没有为设置轴速度慢的数字提供令人满意的用户体验。（对我来说，这是一个带有 pcolormesh 的轴）该方法`ax.drag_pan()`要快得多，我相信它更适合大多数情况：

```
def mousewheel_move( event):
    ax=event.inaxes
    ax._pan_start = types.SimpleNamespace(
            lim=ax.viewLim.frozen(),
            trans=ax.transData.frozen(),
            trans_inverse=ax.transData.inverted().frozen(),
            bbox=ax.bbox.frozen(),
            x=event.x,
            y=event.y)
    if event.button == 'up':
        ax.drag_pan(3, event.key, event.x+10, event.y+10)
    else: #event.button == 'down':
        ax.drag_pan(3, event.key, event.x-10, event.y-10)
    fig=ax.get_figure()
    fig.canvas.draw_idle() 
```

然后将您的图形与：

```
fig.canvas.mpl_connect('scroll_event',mousewheel_move) 
```

使用 TkAgg 后端和 python 3.6 使用 matplotlib 3.0.2 进行测试

# extjs - Extjs分页工具栏如何居中显示消息

> ID：11551051
> 
> 赞同：1
> 
> 时间：2012-07-18T22:03:57.283
> 
> 标签：extjs, extjs4

在 ext 分页工具栏中，是否有一种方法可以使显示消息居中

```
 xtype: 'pagingtoolbar',
            height: 26,
            width: 360,
            displayInfo: true,
            displayMsg: '{0} - {1} of {2}',
            border: false,
            store: 'myStore'
            dock: 'bottom' 
```

我想将 displayMsg 居中，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:08:49.557

当 displayInfo 为 true 时，默认分页工具栏会添加一个 tbfill 元素。要使您的文本居中，您可以在末尾添加另一个 tbfill。

```
grid.down('pagingtoolbar').add({xtype:'tbfill'}); 
```

这将使文本在工具栏的空白部分居中，如果你想在整个工具栏中居中，我认为你需要计算第一个 tbfill 的宽度，然后设置它。

# ruby-on-rails - Rails 3.2 无法从模型关系中获取要显示的数据

> ID：11551052
> 
> 赞同：0
> 
> 时间：2012-07-18T22:04:04.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个复杂的 Web 应用程序，当我选择一条记录时，它在页面的上半部分设置了多条记录，在页面的下半部分设置了单条记录详细信息，并且作为下部详细信息部分的一部分，我有部分要更新使用 AJAX 是来自模型关系的多记录表，但是我遇到的问题是，当我尝试通过记录集进行循环并尝试通过该记录的关系获取数据时，记录又回来了`nil`。这是我的意思的一个例子。

```
<table>
<% @file.file_entities.each do |i| %>
  <tr>
    <td id="name"><div><a href="#"><%= truncate("#{i.entity.FirstName} #{i.entity.LastName}", :length => 17) %></a></div></td>
    <td id="position"><select><option>Buyer</option><option>Seller</option><option>Lender</option><option>Referrer</option></select></td>
    <td id="pr"><%= check_box_tag('pr_out', i.PRSent, i.PRSent?) %></td>
    <% if EntityContact.where(:EntityID => i.entity.EntityID).phones_callable.first.inspect == nil -%>
      <td id="phone"><div>NONE</div></td>
    <% else %>
      <td id="phone"><div><%= EntityContact.where(:EntityID => i.EntityID).phones_callable.first.ContactDesc %>: <%= EntityContact.where(:EntityID => i.EntityID).phones_ca>
    <% end %>
  </tr>
<% end %>
</table> 
```

我在哪里使用它来获取价值`ContactDesc`

```
EntityContact.where(:EntityID => i.EntityID).phones_callable.first.ContactDesc 
```

它给了我一个 nil`EntityContact`模型对象，但是如果我只把`i.EntityID`它放在这个循环中，那么它给了我，`EntityID`并且如果我在上面的 where 子句中替换`i.EntityID`为一个实际`ID`的，那么它会很好地返回那个记录。所以我认为`i.EntityID`在我的 where 子句中不起作用，但我不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:18:47.407

我想通了，愚蠢的我没有意识到如果这种关系中没有记录，它会抛出异常，所以我只是添加了一个 if 语句，在提取数据之前先检查是否存在记录，我的错。

# android - 检查是否有来自广播接收器的电话

> ID：11551057
> 
> 赞同：1
> 
> 时间：2012-07-18T22:04:54.743
> 
> 标签：android

我有一个从广播接收器启动的应用程序，但如果用户当前正在通话中，我不想启动该应用程序。如果当前有电话通话，我将如何从我的广播接收器类中检查？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T22:32:01.580

您应该使用 PhoneStateListener 创建一个服务。确保在您从中获得所需内容后将其取消注册，并确保不要直接从广播接收器启动侦听器。[在这个问题](https://stackoverflow.com/questions/6883664/broadcastreceiver-with-a-listener-drains-battery-when-not-in-use)中有一些关于这个概念的更多细节。

# android - 更改首选项屏幕的布局

> ID：11551058
> 
> 赞同：1
> 
> 时间：2012-07-18T22:04:55.690
> 
> 标签：android

我有一个 Preference 屏幕和两个`EditTextPreference`.

我想更改其背景颜色和字体，并在其背景中添加图像。

我怎样才能做到这一点？

这里是 XML 布局的代码，如下所示：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory 
        android:title="Login Information"
        android:key="first_category">
        <EditTextPreference
            android:key="@string/txtusername"
            android:title="@string/username" 
            android:summary="@string/userNameSummary" />
    </PreferenceCategory>

    <PreferenceCategory
        android:title="Device Information"
        android:key="Device">
        <EditTextPreference
            android:key="welcome_message"
            android:title="DeviceId"
            android:summary="This is your mobile device ID"
            android:shouldDisableView="true" />
    </PreferenceCategory>
</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:11:56.033

实际上，您可能会因为偏好而无法在 XML 中使用[样式](http://developer.android.com/design/style/index.html)和[主题](http://developer.android.com/design/style/themes.html)。

不过，您可以在代码中进行不同的设置。创建首选项后，您将需要访问其视图并设置所需的更改。

*   要更改**背景图像**，请使用以下内容，其中`...`是可绘制对象。

`getView().setBackgroundDrawable(...);`

*   要更改**背景颜色**，请使用以下内容，其中`...`是颜色。

`getView().setBackgroundColor(...);`

*   要更改**字体**，请使用以下内容，其中`...`是字体类型。

`getView().setTypeFace(...);`

*   要更改**字体颜色**，请使用以下内容，其中`...`是颜色。

`getView().setTextColor(...);`

# javascript - jquery 动画绑定解除绑定

> ID：11551060
> 
> 赞同：1
> 
> 时间：2012-07-18T22:05:00.287
> 
> 标签：javascript, jquery, html, jquery-animate

问题是我第二次单击动画末尾的“#mas”div 时，它会自动运行 de 'arriba' 功能。

JS

```
$(document).ready(function() {
  $('#mas').bind('click', abajo);
   function abajo(e) {
    e.preventDefault();
    $('#mas').unbind();
    $('#contenido').animate({
      top: '-=470px'
    }, 11000, function() {
        $('#mas').hide();
    $('#menos').show();
    $('#mas').bind('click', abajo);
    });
  }
  $('#menos').bind('click', arriba);
  function arriba(e) {
   e.preventDefault();
   $('#menos').unbind();
   $('#contenido').animate({
     top: '+=470px'
   }, 11000, function() {
        $('#mas').show();
        $('#menos').hide();
    $('#mas').bind('click', arriba);
    });
 }

}); 
```

HTML

```
<div id="contenedor">
    <img src="asd.jpg" id="contenido"/>
    <div id="mas">mas</div>
    <div id="menos">menos</div>
</div> 
```

我的逻辑可能有问题或绑定/取消绑定功能的使用错误，我将非常感谢您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:08:12.457

您可以只检查动画，而不是绑定和取消绑定事件处理程序吗？

```
$('#mas').bind('click', abajo);
   function abajo(e) {
    e.preventDefault();

    // Check if there is animation, if yes, return.
    if($('#contenido').is(":animated")) return;

    $('#contenido').animate({
      top: '-=470px'
    }, 11000, function() {
       $('#mas').hide();
       $('#menos').show();
    });
  } 
```

# php - 如何通过连接从 MySQL 选择中获取嵌套数组

> ID：11551061
> 
> 赞同：0
> 
> 时间：2012-07-18T22:05:00.190
> 
> 标签：php, mysql, arrays, nested

我有模型用户、帖子、评论和标签。

*   用户创建帖子。
*   帖子可以有多个评论和标签。

每个模型都有自己的表格，因此有表格“帖子”、“评论”和“标签”。评论有一个外键叫做'post_id'，而标签有一个叫做'post_tags'的many_to_many关系表，其中有两个字段：'post_id'和'tag_id'。

我想得到一个嵌套数组，如下所示：

*   **我应该运行哪些 MySQL 查询？**
*   **我想我需要用 PHP 改变结果来获得我的嵌套数组。如何？**

非常感谢你的帮助 ：-）

```
 [0] => Array
    (
        [Post] => Array
            (
                [id] => 1
                [title] => First article
                [content] => aaa
                [created] => 2008-05-18 00:00:00
            )
        [Comment] => Array
            (
                [0] => Array
                    (
                        [id] => 1
                        [post_id] => 1
                        [author] => Daniel
                        [email] => dan@example.com
                        [website] => http://example.com
                        [comment] => First comment
                        [created] => 2008-05-18 00:00:00
                    )
                [1] => Array
                    (
                        [id] => 2
                        [post_id] => 1
                        [author] => Sam
                        [email] => sam@example.net
                        [website] => http://example.net
                        [comment] => Second comment
                        [created] => 2008-05-18 00:00:00
                    )
            )
        [Tag] => Array
            (
                [0] => Array
                    (
                        [id] => 1
                        [name] => Awesome
                    )
                [1] => Array
                    (
                        [id] => 2
                        [name] => Baking
                    )
            )
    )
    [1] => Array
    (
        [Post] => Array
            (... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:30:31.037

你最好做 3 个查询。

1.  首先获取帖子（如果需要，请加入用户），并将它们存储为：

    ```
    $list[$row['post_id']]['Post'] = $row; 
    ```

2.  然后获取所有帖子评论并将它们存储为

    ```
    $list[$row['post_id']]['Comment'][$row['comment_id']] = $row; 
    ```

3.  然后获取所有帖子标签

    ```
    $list[$row['post_id']]['Tags'][$row['tag_id']] = $row; 
    ```

这比尝试使用单个查询更有效，因为单个查询最终会多次发送相同的数据

# iphone - 如何在 iPhone 应用中播放 FLV？

> ID：11551064
> 
> 赞同：0
> 
> 时间：2012-07-18T22:05:18.543
> 
> 标签：iphone, youtube, flv

我需要在我的 iPhone 应用程序中显示 YouTube FLV 视频。有没有办法做到这一点？我需要特定的库/播放器还是不可能并且需要将源文件转换为另一种格式？

# r - 解析推文以提取 R 中的主题标签

> ID：11551065
> 
> 赞同：1
> 
> 时间：2012-07-18T22:05:28.420
> 
> 标签：r, parsing, hashtag

我想知道是否有人有一个快速的解决方案来从`R`. 例如，给定以下字符串，我如何解析它以提取带有主题标签的单词？

```
string <- 'Crowdsourcing is awesome. #stackoverflow' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T22:25:17.713

与[HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)不同，我希望您*可以*使用正则表达式解析主题标签。

```
library(stringr)
string <- "#hashtag Crowd#sourcing is awesome. #stackoverflow #question"
# I don't use Twitter, so maybe this regex is not right 
# for the set of allowable hashtag characters.
hashtag.regex <- perl("(?<=^|\\s)#\\S+")
hashtags <- str_extract_all(string, hashtag.regex) 
```

产生：

```
> print(hashtags)
[[1]]
[1] "#hashtag"       "#stackoverflow" "#question" 
```

请注意，如果`string`实际上是许多推文的向量，这也可以不加修改地工作。它返回一个字符向量列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:21:00.850

像这样的东西？

```
string <- c('Crowdsourcing is awesome. #stackoverflow #answer', 
    "another #tag in this tweet")
step1 <- strsplit(string, "#")
step2 <- lapply(step1, tail, -1)
result <- lapply(step2, function(x){
  sapply(strsplit(x, " "), head, 1)
}) 
```

# c# - log4net 的 LogManager.GetLogger() 在自定义 TraceListener 中使用时抛出 NullReferenceException

> ID：11551066
> 
> 赞同：2
> 
> 时间：2012-07-18T22:05:39.090
> 
> 标签：c#, log4net, tracelistener

我正在尝试将大型应用程序从使用`Trace`类转换为通过`log4net`. 因此，我编写了一个自定义`TraceListener`来将输出重定向到 log4net 的消息中（受[这篇文章](http://blog.catenalogic.com/post/2010/06/18/Log4net-TraceListener.aspx)的启发）。

```
public class Log4netTraceListener : TraceListener
{
    private static readonly ILog logger = LogManager.GetLogger("Log4netTraceListener"); // Line 19

    public Log4netTraceListener() { /* nothing special */ }

    public override void TraceEvent(TraceEventCache eventCache, string source, TraceEventType eventType, int id, string message)
    {
        // some switching based on the TraceLevel, but eventually something like:
        logger.Error(message);
    }
} 
```

控制台应用解决方案是三个项目：

1.  RunShipOrder - 作为应用程序入口点的控制台项目
2.  ShipOrderAPI - 一个包含与此流程相关的所有代码的类库项目
3.  CodeLibrary - 一个包含许多项目通用代码的类库项目。
    *   Log4netTraceListener 在这个项目中

在`RunShipOrder`项目内部，我可以调用`LogManager.GetLogger("Log4netTraceListener")`，它按预期工作。但是，如果我尝试对其调用方法，`Trace`则会引发异常。我已将其追溯到`LogManager.GetLogger("Log4netTraceListener")`对类内部的初始调用`Log4netTraceListener`。

抛出的异常是`ConfigurationErrorsException`，内部异常为`TypeInitializationException`，内部异常为`NullReferenceException`。最里面的异常的堆栈跟踪是：

```
 at log4net.Core.LoggerManager.GetLogger(Assembly repositoryAssembly, String name)
   at log4net.LogManager.GetLogger(Assembly repositoryAssembly, String name)
   at log4net.LogManager.GetLogger(String name)
   at CodeLibrary.Diagnostics.Log4netTraceListener..cctor() in Log4netTraceListener.cs:line 19 
```

关于从 log4net 代码库中可能引发此异常的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-20T15:46:45.067

@drovani - 很好的描述。我看到了同样的症状。我的问题是 app.config 中的 System.Diagnostics.Trace 输出被配置为自定义 System.Diagnostics.TraceListener 实现，该实现将跟踪转发到 log4net，同时通过 log4net.Internal 启用 log4net 的内部调试。 app.config 中的 Debug = True（或通过 log4net.Util.LogLog.InternalDebugging = true 的代码）。

可能发生的情况是您在静态初始化期间或就在记录之前在自定义 System.Diagnostics.TraceListener 实现中调用 LoggerManager.GetLogger()，这会产生静态初始化排序问题。log4net 在初始化时尝试记录某些内容，但在 LoggerManager 初始化之前。因此 LoggerManager.GetLogger() 抛出空引用异常。

在您的自定义 TraceListener 中，您可以通过使用静态属性在首次使用而不是在字段中初始化 ILogger 来防止这种情况，但您需要在这里小心。最好的办法是不记录，或者如果 log4net.Util.LogLog.InternalDebugging 为 true，则使用其他机制记录。这将是首选的解决方案。

查看 log4net.Util.LogLog 类的源代码。默认情况下，这会记录到 Trace，如果由此记录任何内容（例如附加程序错误），您最终将陷入死锁。在您的 TraceListener 实现中，我会确保在您的实现的构造函数中设置 log4net.Util.LogLog.EmitInternalMessages = false，并可能处理 LogLog.LogReceived 事件并以另一种方式记录这些消息。可悲的是，由于此设置，一些附加程序错误将不会被记录。log4net 源是你的朋友。

如果您想变得非常棘手，对性能产生巨大影响，则需要在记录消息和创建记录器之前检查 log4net.Util.LogLog.InternalDebugging 的设置。如果启用，您可以获得堆栈跟踪并遍历它以确保在调用 log4net 之前 log4net 不在堆栈中。如果 log4net 在堆栈跟踪中，您可以 pinvoke OutputDebugString() 或使用其他一些日志记录机制来跟踪 log4net 内部日志输出。您绝对不想将内部 log4net 调试消息重定向到 log4net，否则可能会出现与这个优秀站点类似的异常。

# postgresql - postgresql 年龄（时间戳）函数语义背后的基本原理

> ID：11551075
> 
> 赞同：0
> 
> 时间：2012-07-18T22:07:02.777
> 
> 标签：postgresql

这只是在工作中出现，我想知道这个功能背后的基本原理是什么

```
function        Description
age(timestamp)  Subtract from current_date (at midnight) 
```

有人问为什么这会从午夜减去给定的日期？而不是从 now() 中减去它？有原因吗？或者仅仅是因为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:13:00.167

两种形式都`age()`作为[`timestamp`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)参数，而不是`date`. 如果您提供 a ，它会在午夜`date`转换为相应的。`timestamp`

单参数形式根据今天午夜计算年龄，这显然是最有用的默认值：

*   如果你提供 a `timestamp`，你会得到一个天的间隔，加上到午夜的时差。
*   如果你提供 a `date`，你会得到一个天的间隔。

这些是稳定的、易于使用的、易于理解的结果。
如果要根据 来计算年龄`now()`，则这些都不是。您始终可以使用双参数形式明确地做到这一点。

所以这些表达式产生相同的结果：

```
SELECT age(now())
     , age(now()::date, now())
     , age(date_trunc('day', now()), now()); 
```

# java - 电话经理值是否可靠且可变（cdma）？

> ID：11551078
> 
> 赞同：3
> 
> 时间：2012-07-18T22:07:24.623
> 
> 标签：java, android, gsm, telephonymanager, cdma

我想知道我的应用程序是否可以依赖 Android 上的电话值（例如国家/地区、MCC 等）。我可以使用 setprop 在运行时更改它们吗？我尝试使用 setprop 进行更改，但似乎没有用。据我了解，电话管理器是一个代表 GSM 或 CDMA 硬件配置的类/接口。在 GSM 的情况下，这可能是 sim，而在 CDMA 的情况下，它可能是硬件。我的问题是：

*   谁是第一次在这两种情况下更新这些值？
*   这些值是否由操作系统保存为只读？
*   如果用户到不同的国家或地区旅行，国家代码和 MCC 值等一些值会自动更新吗？
*   我可以重置这些值吗？

我无意更改这些值中的任何一个，但想了解它的工作原理！如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:15:43.170

根据android文档

> 提供对设备上电话服务信息的访问。应用程序可以使用此类中的方法来确定电话服务和状态，以及访问某些类型的用户信息。应用程序还可以注册一个侦听器以接收电话状态更改的通知。

TelephonyManager 用于*读取*电话信息。关于您关于 MCC 和 MNC 代码的问题：是的，当手机在其他国家/地区时，它们**会改变。**您可以订阅接收这些事件并确定该用户现在在不同的国家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:19:47.910

@Bo CDMA 的工作方式与 GSM 不同。CDMA一直都有一个基地和许多访客基地的位置。您可以随时使用 TelephonyManager 方法了解访客运营商，这对于 CDMA 来说是不可靠的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:14:55.097

我决定也将其添加为答案...

我找到了一种在 CDMA 手机上解决这个问题的方法。如果它是 CDMA 手机，那么手机总是具有与 GSM 中的 SIM 卡相当的 ICC 硬件。您所要做的就是使用与硬件相关的系统属性。您可以通过编程方式使用 Java 反射来获取此信息。与 GSM 设备不同，即使系统扎根，这也是不可改变的。类 c=Class.forName("android.os.SystemProperties"); 方法 get = c.getMethod("get", String.class); String homeOperator = ((String) get.invoke(c, "ro.cdma.home.operator.numeric"));

# c# - 以编程方式将标签添加到 Windows 窗体（标签长度？）

> ID：11551079
> 
> 赞同：11
> 
> 时间：2012-07-18T22:07:36.167
> 
> 标签：c#, .net, label, windows-forms-designer

在我的代码中，我创建了一个带有以下内容的标签：

```
Label namelabel = new Label();
namelabel.Location = new Point(13, 13);
namelabel.Text = name;
this.Controls.Add(namelabel); 
```

在此之前定义了名为 name 的字符串，长度约为 50 个字符。但是，只有前 15 个显示在我表单的标签中。我尝试弄乱标签的MaximumSize，但无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T22:09:22.630

尝试添加 AutoSize 属性：

```
namelabel.AutoSize = true; 
```

当您使用设计编辑器在表单上放置标签时，此属性默认为 true，但如果您像以前那样在代码中创建标签，则默认值为 false。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T22:09:54.423

尝试属性 AutoSize = true;

[MSDN 参考](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.autosize.aspx)

另一种方法是使用 Graphics 类的 MeasureString 方法

```
Graphics e =  nameLabel.CreateGraphics();
SizeF stringSize = new SizeF();
stringSize = e.MeasureString(name, namelabel.Font);
nameLabel.Width = (int)stringSize.Width; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:10:57.187

您可以使用该属性`Label.AutoSize`自动调整标签的宽度，以正确适合存储在`Label.Text`.

值得一提的是，使用设计编辑器创建标签时，此属性默认为*true*，但当您以编程方式自行创建标签时，该属性默认为*false*。

```
namelabel.AutoSize = true; 
```

* * *

当然，您也可以使用以下内容手动设置标签的宽度来计算所需的宽度。

```
Graphics namelabel_g = namelabel.CreateGraphics ();

namelabel.Width = namelabel_g.MeasureString (
  namelabel.Text, namelabel.Font
); 
```

* * *

有关使用的文档`Label.AutoSize`可以在*msdn*上找到：

*   **[msdn.microsoft.com - Label.AutoSize 属性 (System.Windows.Forms)](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.autosize.aspx)**

* * *

有关的文档`Graphics.MeasureString`可以在这里找到：

*   **[msdn.microsoft.com - Graphics.MeasureString 方法（字符串、字体）（System.Drawing）](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-15T09:07:24.197

```
panel_saved.Controls.Add(
    new Label 
    { 
        Location = new Point(1, 2), 
        Size = new System.Drawing.Size(43, 18), 
        BorderStyle = BorderStyle.FixedSingle, 
        Text = "yourdata" 
    }); 
```

# java - 运行可执行 jar 时的 Spring Circular 占位符引用

> ID：11551083
> 
> 赞同：16
> 
> 时间：2012-07-18T22:08:06.343
> 
> 标签：java, spring, maven, maven-shade-plugin

我在尝试运行可执行 jar 文件时遇到“循环占位符引用”异常。这是详细的例外情况。

```
 org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'postProcessProperties' defined in class path resource [applicationContext.xml]: Circular placeholder reference 'processor.core.poolsize' in property definitions
     [echo]     at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:287)
     [echo]     at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:75)
     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)
     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)
     [echo]     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:139)
     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:83)
     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.start(PostProcessEngine.java:39)
     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.main(PostProcessEngine.java:29) 
```

这是一个 spring 应用程序，它使用外部属性文件在启动时读取值。这是弹簧的定义。到目前为止，这一直运作良好。

```
 <bean id="propertyConfig"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_NEVER" />
        <property name="ignoreResourceNotFound" value="true" />
        <property name="locations">
            <list>
                <value>classpath:/postprocess.properties</value>
            </list>
        </property>
        <property name="properties">
            <props>
                <prop key="processor.core.poolsize">${processor.core.poolsize}</prop>
                <prop key="processor.max.poolsize">${processor.max.poolsize}</prop>
            </props>
        </property>
    </bean>

    <bean id="postProcessProperties"
        class="org.springframework.beans.factory.config.PropertiesFactoryBean">
        <property name="properties">
            <props>
                <prop key="processor.core.poolsize">${processor.core.poolsize}</prop>
                <prop key="processor.max.poolsize">${processor.max.poolsize}</prop>
                <prop key="processor.polling.delay">${processor.polling.delay}</prop>
                <prop key="processor.polling.period">${processor.polling.period}</prop>
        </property>
    </bean> 
```

我正在使用 shade 插件来生成 jar 文件。这是一个片段

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>1.7.1</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <transformers>
                                <transformer
                                    implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                    <mainClass>com.test.postprocess.engine.PostProcessEngine</mainClass>
                                </transformer>
                                <transformer
                                    implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                    <resource>META-INF/spring.handlers</resource>
                                </transformer>
                                <transformer
                                    implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                    <resource>META-INF/spring.schemas</resource>
                                </transformer>
                            </transformers>
                            <filters>
                                <filter>
                                    <artifact>*:*</artifact>
                                    <excludes>
                                        <exclude>META-INF/*.SF</exclude>
                                        <exclude>META-INF/*.DSA</exclude>
                                        <exclude>META-INF/*.RSA</exclude>
                                    </excludes>
                                </filter>
                            </filters>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

我不确定是什么导致了这个问题，因为我之前在其他可执行 jar 文件中使用过类似的模式。

任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-07-30T07:48:33.973

回答这个问题可能为时已晚，但添加它是为了让面临类似问题的人受益。

我能够通过更改键名来修复它。例如

```
 <prop key="processor.core.poolsize">${processor.core.poolsize}</prop>
 <prop key="processor.max.poolsize">${processor.max.poolsize}</prop> 
```

被改为类似的东西

```
<prop key="processor.core.poolsize">${core.poolsize}</prop>
<prop key="processor.max.poolsize">${max.poolsize}</prop> 
```

属性占位符键和要过滤的属性值的键不能相同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-04-15T15:39:00.330

```
Circular placeholder reference XXXX in property definitions 
```

`spring-framework`当您的属性键名和值变量名完全相同时，将引发上述异常。

确保您的财产不应该看起来像 `key={$key}`. 为键和值保留**不同的名称将解决此问题。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T19:44:07.413

尝试使用 SpringJUnit4ClassRunner 运行弹簧集成测试时，我遇到了同样的问题。我不确定如何加载我的属性文件，在一些错误步骤之后，我找到了 @TestPropertySource 注释，它允许我定义所需的属性文件。

在此之前我曾尝试过@PropertySource，但当您运行这样的弹簧集成测试时它不起作用。

希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T22:37:22.890

它可能无法找到资源 - `postprocess.properties`。你能把这行删掉吗？

```
<property name="ignoreResourceNotFound" value="true" /> 
```

然后，如果找不到资源，则应显示适当的消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-19T11:23:31.613

在您的 java 代码中，如果您使用在某些**.properties**或**yaml**文件中声明的键，而不是`application.properties`or `application.yaml`，当您尝试运行 Spring 应用程序而不指定要使用的配置文件时，您将收到此异常。

解决方案：就我而言，我使用的是***Spring Boot 2.4***，这是告诉您的应用程序将使用哪些配置文件的一种方法：

**命令行：**

```
java -jar -Dspring.profiles.active=DEV myapp.jar 
```

如果您通过 IntelliJ 等 IDE 运行应用程序：

***运行 -> 编辑配置***

在 Spring Config 中，指定要激活的配置文件（用逗号分隔）：

[![在此处输入图像描述](../Images/8667f83e71a015a029ea2c7ddc204604.png)](https://i.stack.imgur.com/aoa1w.png)

# objective-c - -forwardInvocation 类方法

> ID：11551086
> 
> 赞同：3
> 
> 时间：2012-07-18T22:08:08.853
> 
> 标签：objective-c, nsobject, message-forwarding

我正在努力通过外观类转发类方法。

为了澄清，我将覆盖以下所有方法：

```
-(NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector
-(void)forwardInvocation:(NSInvocation *)anInvocation
+(BOOL)instancesRespondToSelector:(SEL)aSelector
+(NSMethodSignature *)instanceMethodSignatureForSelector:(SEL)aSelector
+(IMP)instanceMethodForSelector:(SEL)aSelector
+(BOOL)resolveClassMethod:(SEL)sel
+(BOOL)resolveInstanceMethod:(SEL)sel 
```

.. 然而，对于类方法，唯一要调用的是`+resolveClassMethod`. 从那里，无论我返回 YES 还是 NO，我都会立即得到一个无法识别的选择器异常。

这是怎么回事？
类消息转发与实例消息转发的工作方式不同吗？
同样，为什么没有`+forwardInvocation`类方法？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T06:47:31.207

所以你已经知道要让一个对象做`forwardInvocation`实例方法，你必须实现实例方法`-forwardInvocation:`和`-methodSignatureForSelector:`（其他的都是不必要的）。好吧，类方法只是类对象上的方法。类是对象并且像任何其他对象一样工作，并且支持根类的所有实例方法（`NSObject`在这种情况下）。

Objective-C 运行时不关心对象是类对象还是非类对象。消息转发机制相同。因此，当您向对象发送消息时，无论它是什么，它都找不到它，它只是查找对象上的`forwardInvocation:`and`methodSignatureForSelector:`方法。所以你需要在你的类对象上有这些方法。

即实现类方法`+forwardInvocation:`和`+methodSignatureForSelector:`

# javascript - 为什么我的 jsfiddle 可以工作，但我的网站却不行？

> ID：11551088
> 
> 赞同：-2
> 
> 时间：2012-07-18T22:08:12.303
> 
> 标签：javascript, jquery, html, jsfiddle

我不确定我在这里缺少什么

我有以下 JS 小提琴：

[http://jsfiddle.net/thetylercox/eeMva/3/](http://jsfiddle.net/thetylercox/eeMva/3/)

和网站：

[http://soldbybillcox.com/treasure/demo1.html](http://soldbybillcox.com/treasure/demo1.html)

我不确定我错过了什么，但我的网站无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:10:03.463

在第**68 行**，右括号后面有非法符号`}`。

![在此处输入图像描述](../Images/d655476e10ca29e5d15b2f3fdba10023.png)

删除它，代码应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T22:10:13.673

就在你的结束`</script>`标签之前，你有一个非法字符。尝试在 Chrome 中右键单击并“查看源代码”。你会看到的。第 68 行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T22:38:18.717

â€‹ 从小提琴复制和粘贴

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T22:10:55.697

打开你的控制台，它说：`Uncaught SyntaxError: Unexpected token ILLEGAL, demo.php:68`

```
 ...
    var total1 = document.getElementById("total1").value = total;

}â€‹ 
```

如果您使用不同的文件/包含来生成输出，这些可能是由[BOM引起的。](http://en.wikipedia.org/wiki/Byte_order_mark)否则，它可能只是一些复制/粘贴错误。只需删除`}â€‹&lt;/script>`以确保“不可见”字符消失`}`，`<`然后`}</script>`再次键入并完成它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T22:11:19.850

似乎工作得很好，除了你的末尾有一个随机的三个符号`<script>`，所以删除它们应该没问题。

# java - Log4j 不附加文件扩展名

> ID：11551092
> 
> 赞同：0
> 
> 时间：2012-07-18T22:08:34.343
> 
> 标签：java, tomcat, logging, log4j

我已将我的 log4j.properties 文件设置为以下配置

```
log4j.rootLogger=INFO, CATALINA

# Define all the appenders
log4j.appender.CATALINA=org.apache.log4j.DailyRollingFileAppender
log4j.appender.CATALINA.File=${catalina.base}/logs/catalina.
log4j.appender.CATALINA.Append=true
log4j.appender.CATALINA.Encoding=UTF-8
# Roll-over the log once per day
log4j.appender.CATALINA.DatePattern='.'yyyy-MM-dd'.log'
log4j.appender.CATALINA.layout = org.apache.log4j.PatternLayout
log4j.appender.CATALINA.layout.ConversionPattern = %d [%t] %-5p %c- %m%n 
```

问题是在创建我的日志时（我使用的是 OS x Lion 和 Tomcat 6.0.32），创建的日志没有扩展名，只是最后一个点。

但是，如果我在 Windows 框中使用相同的配置，它就可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:17:55.593

```
log4j.appender.CATALINA.File=${catalina.base}/logs/catalina. 
```

需要是：

```
log4j.appender.CATALINA.File=${catalina.base}/logs/catalina.log 
```

# apache - 在 htaccess 中强制 https

> ID：11551095
> 
> 赞同：0
> 
> 时间：2012-07-18T22:08:44.487
> 
> 标签：apache, .htaccess, mod-rewrite, https

我为我的网站获得了证书，现在我需要将其移至 https。这是我的 htaccess：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:12:30.750

有几种方法可以做到；这是一个：

```
## port requirement (bail if not 443)
RewriteCond %{SERVER_PORT} !^443$
## exceptions
RewriteCond %{REQUEST_URI} ^/somepath$ [OR]
RewriteCond %{REQUEST_URI} ^/anotherpath$
## force traffic to https equivalent
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

我添加了 2 个可选的 RewriteCond 条目，允许您根据 URI 的第一个组件指定异常。

# .net - 如何在 RedirectToAction new{} 中添加第二个参数？

> ID：11551096
> 
> 赞同：0
> 
> 时间：2012-07-18T22:08:43.830
> 
> 标签：.net, asp.net-mvc, parameters

我在一些控制器中有一个 RedirectToAction。我需要第二个参数，但我所有的尝试都失败了。

这是只使用一个参数的原始代码。

```
RedirectToAction("Rating", "contract", new { partnerUsername = partnerUsername }); 
```

第二个应该是：`?page=2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:18:57.063

```
RedirectToAction("Rating", "contract", new { partnerUsername = partnerUsername, page = 2 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:23:54.513

您可以传递任意数量的参数，您所要做的就是用逗号分隔它们

```
RedirectToAction("Rating", "contract", new { partnerUsername = partnerUsername, page = 2 }); 
```

# c++ - ::模板是什么意思？

> ID：11551097
> 
> 赞同：1
> 
> 时间：2012-07-18T22:08:58.717
> 
> 标签：c++, templates

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

从昨天开始，我从两个不相关的来源看到使用类似 的 C++11 代码，`ComplexTypeOrTypedef::template`例如在过去 2 小时内，我看到了它：

*   [http://accu.org/index.php/journals/c310/](http://accu.org/index.php/journals/c310/)（重载 109 PDF - p21 - 清单 4）
*   [https://stackoverflow.com/a/7420711/951426](https://stackoverflow.com/a/7420711/951426)

谷歌没有帮助我（它似乎不关心我搜索中的冒号：``::template c++11`），StackOverflow 搜索也没有，这很令人沮丧！

这些神秘`::template`的东西是什么意思？

# android - AppWidgets 中的 ViewFlipper 和不保留活动

> ID：11551098
> 
> 赞同：1
> 
> 时间：2012-07-18T22:09:02.747
> 
> 标签：android, viewflipper, android-appwidget

我正在尝试使用视图翻转器实现 Appwidget。我在视图中声明了两个视图，一切正常。现在从开发人员选项中选择“不保留活动选项”并返回主屏幕。你会发现带有 viewflipper 的 appwidget 挂了。

从屏幕上删除 appwidget 并重新安装。它将开始正常工作，直到您在主屏幕上。启动任何活动都会导致同样的问题。您的 appwidget 停止工作。

从日志中，您的 appwidget 提供商没有任何信息。每次我们启动任何活动时，主屏幕活动都会被杀死。

特别是 ViewFlipper 每次都会出现这个问题。

我真的很沮丧，谷歌的每一个新版本都增加了更多的不稳定性。Android 应该决定要么处理活动周期，要么像 iOS 一样简单地处理它。

如果有任何机构能够通过 Appwidget 上的 View Flippers 解决此问题，请赐教。或者如果有人认为最好不要在 appwidget 上使用 viewflipper，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:30:20.063

哦！这是我的问题，我以为我只是没有正确处理 appwidget id 的低内存情况

此应用程序在小部件上使用 viewflippers [https://play.google.com/store/apps/details?id=co.ccltd.maplights.nyc.freemium&feature=nav_result#?t=W251bGwsMSwxLDMsImNvLmNjbHRkLm1hcGxpZ2h0cy5ueWMuZnJlZW1pdW0iXQ](https://play.google.com/store/apps/details?id=co.ccltd.maplights.nyc.freemium&feature=nav_result#?t=W251bGwsMSwxLDMsImNvLmNjbHRkLm1hcGxpZ2h0cy5ueWMuZnJlZW1pdW0iXQ) ..

我所做的增加了小部件更新时间，现在是 30 分钟。对于我的特定应用，这已经足够了。基本上它的viewflippers和pendingintents将在android取消优先级后挂起（点击后甚至无法获得响应），但在小部件更新后它将再次工作。

或者我认为，需要更多的测试！但很高兴知道这不仅是我在内存不足的情况下对 appwidget id 的处理，而且可能是一个小故障

# database - 来自数据库列的 Tlistbox 项目

> ID：11551099
> 
> 赞同：1
> 
> 时间：2012-07-18T22:09:09.543
> 
> 标签：database, delphi, listbox, delphi-7

有没有办法`TListbox`用数据库列中的项目填充控件？

我知道正确的方法是简单地使用一个`DBLookupListbox`控件并将其设置为访问我想要的列，但问题是当我单击查找控件中的一个项目时，它会更改当前行数据集（预期行为），但我不希望这种情况发生。

相反，我希望仅在查找控件中的双击事件上更改当前行，并且由于我认为这种行为不可能改变，我认为简单地使用普通`TListBox`代替会更容易，但是因为我如上所述，我不确定它是如何完成的。

因此，我再次向专家寻求有关如何`Tlistbox`使用数据库列中的项目填充正常控件的一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T00:43:52.200

您没有指定 DB 您正在使用的组件，所以我使用 ADO 和 MySQL 编写了这个示例。

```
const
StrConnection='Driver={MySQL ODBC 5.1 Driver};Server=%s;Database=%s;User=%s; Password=%s;Option=3;';

procedure LoadColumn(Items:TStrings; const SqlStr :string);
Var
 AdoDataSet : TADODataSet;
begin
 AdoDataSet:=TADODataSet.Create(nil);
 try
  //you can share the connection too, in this case a new connection is made
  AdoDataSet.ConnectionString:=Format(StrConnection,['server','mydatabase','user','pass']);;
  AdoDataSet.CommandText:=SqlStr;
  AdoDataSet.Open;
  if not AdoDataSet.IsEmpty then
  begin
    Items.BeginUpdate;
    try
     Items.Clear;
     while not AdoDataSet.Eof do
     begin
       Items.Add(AdoDataSet.Fields[0].AsString);
       AdoDataSet.Next;
     end;
    finally
     Items.EndUpdate;
    end;
  end;
 finally
   AdoDataSet.Free;
 end;
end; 
```

像这样使用

```
 LoadColumn(ListBox1.Items, 'Select MyColumn FROM Table'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:17:02.180

有无数种方法可以解决您的问题。您可以创建一个 TDbLookupListBox 的黑客控制并覆盖 Click 方法以不执行任何操作。您还可以创建第二个数据集用于查找。但如您所愿，要填充 TListbox，您只需迭代数据集并将字段值添加到列表框，如下所示：

```
tLogin.first;
while not tLogin.eof do
begin
  Listbox1.Items.Add(tLogin.fieldbyname('fullname').asstring);
  tLogin.next;
end; 
```

如果您需要基于选择的键值，那么这不会完全解决您的问题。你最好不要破解 TDbLookupListbox 控件，imo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:01:31.477

使用[TDBLookupListBox](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.DBCtrls.TDBLookupListBox_Properties)。使用 ListField 属性并忽略 DataField 属性。

# biztalk - BizTalk：终止消息

> ID：11551103
> 
> 赞同：3
> 
> 时间：2012-07-18T22:09:38.263
> 
> 标签：biztalk, biztalk-2010

如果我需要构建一个专门的 Web 应用程序来终止由特定发送端口处理的消息，WMI 是一种选择。还有其他人吗？每种方法都有优点/缺点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T23:29:43.237

您应该能够通过引用 Microsoft.BizTalk.Operations.dll 程序集以编程方式终止消息。这将允许您使用BizTalkOperations 类的[`TerminateInstance`方法](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.operations.biztalkoperations.terminateinstance%28v=bts.10%29)，该方法允许您在不启用远程 WMI 管理访问的情况下引用远程 BizTalk 实例（使用[此构造函数）。](http://msdn.microsoft.com/en-us/library/ee822140%28v=bts.10%29)

您可能还需要在 Visual Studio 中引用 Microsoft.BizTalk.Pipeline.dll 以使 IntelliSense 工作。

BizTalk SDK 包含一个示例应用程序，您也可以查看该示例应用程序，以了解如何查找消息实例，您需要将其作为 TerminateInstance 方法的参数：http: [//msdn.microsoft.com/en-我们/图书馆/gg163868](http://msdn.microsoft.com/en-us/library/gg163868)

例如：

```
BizTalkOperations _operations = new BizTalkOperations()
IEnumerable messages = _operations.GetMessages();
foreach (BizTalkMessage msg in messages)
… 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T23:11:33.297

您是否考虑过“/null”发送端口适配器？这使您可以将消息发送到“空”端口，在那里它们会有效地消失。可以在[此处](http://biztalk.eliasen.dk/Adapters.aspx)找到源代码，尽管它自 BizTalk 2006 R2 以来一直没有更新。如果这与您要实现的目标无关，那么有关用例的一些其他信息可能会有所帮助。

# matlab - 如何在 Matlab GUI 中的轴上绘制垂直线？

> ID：11551121
> 
> 赞同：2
> 
> 时间：2012-07-18T22:10:50.167
> 
> 标签：matlab, user-interface, drawing, matlab-guide, axes

我有一个带有 3 个轴组件的 Matlab GUI。它们的标签是`predicted_ax`和。我想在第一个轴组件（带有 tag 的那个）的特定位置绘制垂直线。我怎么做？`cost_ax``error_ax``predicted_ax`

我试过这段代码：

```
ylim = get(handles.predicted_ax, 'ylim');
line([linePos, linePos], ylim); 
```

但它在不同的轴（带有标签的轴`error_ax`）上画线！我确定我没有混淆标签或轴组件。事实上另一个测试

```
ylim = get(handles.cost_ax, 'ylim');
line([linePos, linePos], ylim); 
```

给出完全相同的结果：这条线是在最后一个带有标签的轴组件上绘制的`error_ax`。那么如何在右轴上画线呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:17:56.273

您需要设置线的“父”属性，因为默认情况下它将始终是当前轴：

```
h = line([linePos, linePos], ylim);
set(h, 'parent', handles.predicted_ax); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:17:05.813

我认为您需要使用该`axes`命令来设置将在其上绘制线的当前轴。在您的命令 `axes(handles.predicted_ax);`之前尝试。`line`

（获取`ylim`轴的值显然不会使其成为当前值。）

# php - 需要帮助查找 Doctrine 2 xml 映射文件中的错误

> ID：11551125
> 
> 赞同：2
> 
> 时间：2012-07-18T22:10:58.083
> 
> 标签：php, xml, doctrine-orm

我是 Doctrine 2 的新手，所以我使用[docs.doctrine-project.org](http://docs.doctrine-project.org)上的文档作为模板来帮助我入门。我已经生成了我需要的所有文件（我认为），现在我正在尝试运行命令

```
doctrine orm:schema-tool:create 
```

但教义正在吐口水

```
[Doctrine\ORM\Mapping\MappingException]                                                          
Invalid mapping file 'QueryRequest.dcm.xml' for class 'QueryRequest'. 
```

这是我的**QueryRequest.dcm.xml**（我特别依赖[这些](http://docs.doctrine-project.org/en/latest/reference/xml-mapping.html#defining-fields)文档中的一个教义示例来生成文件）：

```
<?xml version="1.0" encoding="UTF-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                      http://raw.github.com/doctrine/doctrine2/master/doctrine-mapping.xsd">

    <entity name="RequestMetadata" table="request_metadata">
        <id name="id" type="bigint">
            <generator strategy="AUTO" />
        </id>

        <field name="snapshot" column="snapshot" type="smallint" nullable="true" />
        <field name="custID" column="cust_id" type="string" length="8" />
        <field name="ipAddress" column="ip_addr" type="string" length="15" />
        <field name="query" column="query" type="string" length="500" />
        <field name="createdOn" column="created_on" type="datetime" />

        <one-to-many field="httpRequestResponses" target-entity="HttpRequestResponse" mapped-by="queryRequest">
            <cascade>
                <cascade-persist />
            </cascade>
            <order-by>
                <order-by-field name="createdOn" direction="DESC" />
            </order-by>
        </one-to-many>
        <one-to-many field="queryResults" target-entity="QueryResults" mapped-by="queryRequest">
            <cascade>
                <cascade-persist />
            </cascade>
        </one-to-many>
    </entity>
</doctrine-mapping> 
```

这是**QueryRequest.php**：

```
class QueryRequest {
    protected $id;
    protected $snapshot;
    protected $custID;
    protected $ipAddress;
    protected $query;
    protected $createdOn;

    protected $httpRequestResponses = null;
    protected $queryResults = null;

    public function __construct() {
        $this->setCreatedOn(new DateTime("now"));
        $this->httpRequestResponses = new ArrayCollection();
        $this->queryResults = new ArrayCollection();
    }
    public function getID() {
        return $this->id;
    }
    public function getSnapshot() {
        return $this->snapshot;
    }
    public function setSnapshot($snapshot) {
        $this->snapshot = $snapshot;
    }
    public function getCustID() {
        return $this->custID;
    }
    public function setCustID($id) {
        $this->custID = $id;
    }
    public function getIpAddress() {
        return $this->ipAddress;
    }
    public function setIpAddress($ip) {
        $this->ipAddress = $ip;
    }
    public function getQuery() {
        return $this->query;
    }
    public function setQuery($query) {
        $this->query = $query;
    }
    public function getCreatedOn() {
        return $this->createdOn;
    }
    public function setCreatedOn($createdOn) {
        $this->createdOn = $createdOn;
    }
} 
```

由于我是新手，我很难发现问题 - 事实上，我什至不确定问题是否与 xml 文件有关。谁能帮我发现问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T23:02:58.083

我想通了：实体名称不正确。它应该像这样匹配类名：

```
<entity name="QueryRequest" table="request_metadata"> 
```

我更改了类名并错过了对 xml 映射文件的更新

# scheduled-tasks - DriveImage XML 2008 R2 任务计划

> ID：11551126
> 
> 赞同：2
> 
> 时间：2012-07-18T22:11:10.160
> 
> 标签：scheduled-tasks, windows-server-2008-r2

我正在尝试在两个不同的 Windows 2008 R2 服务器上创建计划任务，它们将使用 Runtime Software 的 Driveimage XML 创建磁盘映像。任务调度良好并在适当的时间运行，在观察运行的进程后，甚至 dixml.exe 也会显示在指定用户帐户下的服务器任务管理器的进程部分中。

用于运行任务的登录名具有管理员凭据以及 GPO 集以允许管理员在没有提示的情况下提升应用程序。

我尝试为程序编写一个批处理文件并运行它，如下所示：

```
"C:\Program Files (x86)\Runtime Software\DriveImage XML\dixml.exe" /bC /s /c1 
/v /t"X:\%date:~10,4%_%date:~4,2%_%date:~7,2%_%~0,3%" 
```

为了便于阅读，我将上面的脚本分成两行代码。

从 cmd 或双击手动运行此脚本时，将正确启动备份过程。但是，当作为文件附加到任务调度程序时，事件“开始”但程序本身不会开始备份。

我试过将批处理文件转换成这个动作：

```
Start a program: dixml.exe
Arguments: /bC /s /c1 /v /t"X:\%date:~10,4%_%date:~4,2%_%date:~7,2%_%~0,3%"
Start in: C:\Program Files (x86)\Runtime Software\DriveImage XML 
```

根据 2008 R2 中的 MS，在其任务调度程序中不识别尾随斜杠或引号，因此您将它们排除在外。

第二种方法运行任务效果相同，程序显示在进程树中，对应vent viewers PID code，但不做备份。

有人对这个令人困惑的问题有经验吗？

# bash - 试图让 sed 用另一个文件路径替换文件中的文件路径

> ID：11551127
> 
> 赞同：1
> 
> 时间：2012-07-18T22:11:09.900
> 
> 标签：bash, shell, sed

这是我当前的代码。我正在尝试用另一个文件名替换文件中的文件名字符串。但我目前收到错误

> "sed: 1: "s/directory = "[A-Za-z0 ...": 替代命令中的错误标志：'U'"

这段代码有什么问题？

```
function restart_existing ()
{
    old="directory = \"[A-Za-z0-9\/]\""
    new="directory = \"$1\""
    sed -i '' "s/$old/$new/" "$HOME/angelpretendconfig" 
}

restart_existing "$HOME/blahblahblah/shoot/blah" 
```

编辑：谢谢！我采纳了您的建议，并修改了代码。

```
function restart_existing ()
{
    old="directory = \"*\""
    printf -v new 'directory = "%s"' "$1"
    sed -i '' "s;$old;$new;" "$HOME/angelpretendconfig" 
}

restart_existing "Query" 
```

但是现在有问题的行来自

```
directory = "/home/jamie/bump/server"
directory = "Query"/home/jamie/bump/server" 
```

为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T22:14:14.763

*当您要替换的内容包含*正斜杠时，请勿在 sed 中使用正斜杠：

```
$ sed 's;foo/bar;baz/wuz;' <<< "where is the foo/bar?"
where is the baz/wuz? 
```

此外，有时避免手动转义引号更具可读性：

```
function restart_existing ()
{
    old='directory = "[A-Za-z0-9\/]"'
    printf -v new 'directory = "%s"' "$1"
    sed -i '' "s;$old;$new;" "$HOME/angelpretendconfig" 
}

restart_existing "$HOME/blahblahblah/shoot/blah" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:19:40.487

`$1`包含一些东西，它被解析为 sed 的特殊命令，在这种情况下可能是 a`/`标记替换字符串的结尾，后跟一些其他字符。

您必须先转义替换字符串：[为 sed 替换模式转义字符串](https://stackoverflow.com/questions/407523/escape-a-string-for-sed-search-pattern)。

# css - 使用 Foundation 3 和 CSS 边框框时，Fancybox 关闭按钮被切断

> ID：11551129
> 
> 赞同：1
> 
> 时间：2012-07-18T22:11:15.267
> 
> 标签：css, fancybox, fancybox-2, border-box

当使用 box-sizing:border-box 时，它会导致“关闭”按钮被切断。在使用 Zurb 的 Foundation 3 时尤其如此。

似乎导致fancybox出现问题的代码是这样的：

```
* {
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
} 
```

现在，也许作者在进行计算时需要考虑边框框，但我想知道是否有一种简单的方法可以用 CSS 覆盖行为。

这是一个演示正在发生的事情的小提琴。您可以看到关闭按钮是如何被切断的。[http://jsfiddle.net/jonthomas/SxZuR/4/](http://jsfiddle.net/jonthomas/SxZuR/4/)

另外，这里是 github 上的问题：[https ://github.com/fancyapps/fancyBox/issues/311](https://github.com/fancyapps/fancyBox/issues/311)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:18:04.950

[该插件的作者提供了解决此问题所需的 CSS](https://github.com/fancyapps/fancyBox/issues/311)。使用以下 CSS 来强制 fancybox 及其所有子元素使用 content-box 来调整框大小。

```
.fancybox-wrap, .fancybox-wrap * {
    box-sizing: content-box;
    -webkit-box-sizing: content-box;
    -moz-box-sizing: content-box;
}​ 
```

看到它在这里工作：http: [//jsfiddle.net/jonthomas/ut93u/2/](http://jsfiddle.net/jonthomas/ut93u/2/)

他还提到要确保您拥有最新的代码。我有 2.0.6，上面的代码很好地解决了这个问题。但是，您始终可以在此处获取最新代码：[https ://github.com/fancyapps/fancyBox/zipball/master](https://github.com/fancyapps/fancyBox/zipball/master)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T16:11:45.410

非常感谢您的解决方案。一个很大的帮助。不过有一件事。在我的安装中，fancybox-wrap 是一个 ID，而不是 CLASS。所以我使用：

```
#fancybox-wrap, #fancybox-wrap * {
    box-sizing: content-box;
    -webkit-box-sizing: content-box;
    -moz-box-sizing: content-box;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T01:15:55.530

我测试了 jsfiddle，但问题没有出现在 Firefox（14.0.1）中，但出现在 Chrome（20.0.1132.57 m）中

我发现的解决方法是添加这个 CSS 内联声明（在加载了 fancybox css 文件之后）：

```
.fancybox-wrap {
 overflow: visible !important;
} 
```

**注意**：这适用于 fancybox v2.0.6+

# jquery - 如何找到未隐藏的子div

> ID：11551143
> 
> 赞同：2
> 
> 时间：2012-07-18T22:12:30.977
> 
> 标签：jquery

我有代码：

```
<div id="parent">
   <div id="firstchild" style="display:none">
   <div id="secondchild">
   <div id="thirdchild" style="display:none">
</div> 
```

所以我想做的是在jquery中找到不隐藏的元素，即。第二个孩子。

我想我应该使用类似于 :hidden 的东西，但我实际上想做相反的事情并找到非隐藏的东西。

有人知道该怎么做吗？找到作为父母孩子的可见div并将其隐藏？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T22:13:47.370

您可以尝试`:visible`选择器：

```
$('#parent div:visible').hide() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T22:14:16.570

幸运的是还有一个`visible`：

```
$('#parent > :visible').hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:44:29.167

如果目标是隐藏可见元素，那么没有必要专门找到它们。相反，您可以简单地无条件地隐藏所有潜在元素。

```
$('#parent > div').hide(); 
```

那些可见的子 div 现在被隐藏了。那些已经隐藏的仍然隐藏。

*   一方面，这是低效的——它隐藏了已经隐藏的元素。
*   在另一个方面它是有效的 - 它不会浪费精力来识别可见的 div(s)。

实际上，在这和特定的隐藏之间没有太多选择。在这两种情况下，都必须解决所有潜在的元素——要么读取它们，要么写入它们，或者两者兼而有之。

# c# - 关闭窗口后对象状态不清晰

> ID：11551149
> 
> 赞同：1
> 
> 时间：2012-07-18T22:13:28.013
> 
> 标签：c#, .net, wpf

我有以下代码：

```
 private void ShowOfflineIMs(bool hasOffline)
    {
        if (hasOffline)
        {
            _offlineDisplayerThread = new Thread(OpenOfflineWindow);
            _offlineDisplayerThread.SetApartmentState(ApartmentState.STA);
            _offlineDisplayerThread.Start();
        }
    }

    private void OpenOfflineWindow()
    {
        var offlineWindow = new OfflineWindow();
        offlineWindow.Closed += (sender, args) => Dispatcher.ExitAllFrames();
        offlineWindow.Show();
        Dispatcher.Run();
    } 
```

在我关闭表单对象后，它们的状态保持在`Window`. `Window`关闭后如何处理。

提前致谢。

# c# - 如何在图片框之间切换？

> ID：11551153
> 
> 赞同：1
> 
> 时间：2012-07-18T22:13:37.267
> 
> 标签：c#, winforms, picturebox

我的项目中有很多图片框，想知道是否有代码可以在 C# 中轻松切换它们，例如：

```
// I dont' want to have to do this all the time
pictureBox38.Image = slagalica.Properties.Resources.grn_tick;
pictureBox39.Image = slagalica.Properties.Resources.grn_tick;

// I want something like this
int n = 38
pictureBox(n).Image = slagalica.Properties.Resources.grn_tick;
pictureBox(n+1).Image = slagalica.Properties.Resources.grn_tick; 
```

是否可以？欢迎任何代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:16:05.377

您可以遍历所有控件并将设置应用于那些是图片框：

```
foreach(Control control in Controls)
{
   if (control is PictureBox)       
      ((PictureBox)control).Image = slagalica.Properties.Resources.grn_tick;
} 
```

或者您可以创建自定义图片框并使用它来代替默认图片框：

```
public class SlagalicaPictureBox : PictureBox
{
    public SlagalicaPictureBox()
    {
        Image = slagalica.Properties.Resources.grn_tick;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:19:08.817

您可能想要创建图片框列表。然后你就可以写出类似的东西`pictureBoxes[0].Image=img;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:20:20.643

将它们添加到列表并使用索引器，例如 a`List<PictureBox>`或`PictureBox[]`：

```
var dir = new System.IO.DirectoryInfo(imagePath);
List<FileInfo> images = dir.GetFiles("*.jpg", System.IO.SearchOption.AllDirectories).ToList();
List<PictureBox> pictures = new List<PictureBox>();
foreach (FileInfo img in images) {
    PictureBox picture = new PictureBox();
    picture.Image = Image.FromFile(img.FullName);
    pictures.Add(picture);
} 
```

现在您可以按索引访问图片，例如：

```
var rnd = new Random();
int imgIndex = rnd.Next(0, 38);
PictureBox img = pictures[imgIndex]; 
```

或者在一个循环中

```
for(int i=0; i<38; i++)
{
    PictureBox img = pictures[i];
} 
```

**编辑**：如果您只想 `PictureBoxes`在表单上查找所有内容，则可以使用[`Enumerable.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)哪些过滤器并相应地转换控件：

```
IEnumerable<PictureBox> allPictures = this.Controls.OfType<PictureBox>();
foreach(var pic in allPictures)
{
    //....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T22:21:36.150

一定要考虑 Lazyberezovsky 的帖子。但是，如果您想快速迭代控件，您也可以构造一个控件数组。

您可以轻松地做到这一点：

```
List<PictureBox> list = new List<PictureBox>();
list.Add(pictureBox38);
list.Add(pictureBox39); 
```

然后您可以按如下方式遍历它们：

```
foreach (PictureBox pb in list) {
    pictureBox.Image = slagalica.Properties.Resources.grn_tick;
} 
```

如果你想更聪明一点，你甚至可以创建一个指定大小的数组并做同样的事情。

```
PictureBox[] pb_array = new PictureBox[50];
pb_array[38] = pictureBox38; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-18T22:16:48.513

```
while(n <= (number of pics)){
n++
pictureBox(n).Image = slagalica.Properties.Resources.grn_tick;
} 
```

是的，我知道这是 Objective-C，但你明白了主要思想

# windows - GetUniquePCID .NET 的函数

> ID：11551155
> 
> 赞同：0
> 
> 时间：2012-07-18T22:13:49.113
> 
> 标签：windows, vb.net, function, uniqueidentifier

我需要一个返回字符串的函数，使用硬件序列号并将它们混合在一起以获得单个序列号。

我搜索了尝试这样的功能，但找不到类似的功能，此功能需要识别具有许可系统的电脑。

我只需要每台计算机相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:54:58.533

这可能不是您想要的，但如果我正确理解您的问题，请使用下面的代码（不要在 Strict On 的情况下使用下面的代码）不是最好的想法，但它可以工作......

```
Private Function SystemSerialNumber() As String
    ' Get the Windows Management Instrumentation object.
    Dim wmi As Object = GetObject("WinMgmts:")

    ' Get the "base boards" (mother boards).
    Dim serial_numbers As String = ""
    Dim mother_boards As Object = _
        wmi.InstancesOf("Win32_BaseBoard")
    For Each board As Object In mother_boards
        serial_numbers &= ", " & board.SerialNumber
    Next board
    If serial_numbers.Length > 0 Then serial_numbers = _
        serial_numbers.Substring(2)

    Return serial_numbers
End Function

Private Function CpuId() As String
    Dim computer As String = "."
    Dim wmi As Object = GetObject("winmgmts:" & _
        "{impersonationLevel=impersonate}!\\" & _
        computer & "\root\cimv2")
    Dim processors As Object = wmi.ExecQuery("Select * from " & _
        "Win32_Processor")

    Dim cpu_ids As String = ""
    For Each cpu As Object In processors
        cpu_ids = cpu_ids & ", " & cpu.ProcessorId
    Next cpu
    If cpu_ids.Length > 0 Then cpu_ids = _
        cpu_ids.Substring(2)

    Return cpu_ids
End Function 
```

**来源：** [http ://www.vb-helper.com/howto_net_get_cpu_serial_number_id.html](http://www.vb-helper.com/howto_net_get_cpu_serial_number_id.html)

# php - 如何在 MySQL 查询中将简单的数学与字符串与 php 结合起来

> ID：11551168
> 
> 赞同：-1
> 
> 时间：2012-07-18T22:14:53.287
> 
> 标签：php

我想根据用户生日向我的 MySQL 查询添加一个过滤器。

提供：

```
$cur_year = 2012
$cur_month = 07
$cur_day = 18 
```

我如何做差异`$cur_year - $minAge`然后显示`-07-19`（月和日）

我正在尝试这个：

```
`Birthday` < $cur_year - $minAge'-$cur_month-$cur_day' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:42:31.993

我*有理由*确定你正在尝试做这样的事情：

```
$minAge = 18;

$query = "
  SELECT
    `somecol`, `someothercol`,
    IF(DATE_ADD(`Birthday`, INTERVAL ".((int) $minAge)." YEAR) < NOW(), 1, 0) AS `isOldEnough`
  FROM `tablename`
  WHERE `somecol` = 'someval'
"; 
```

在每个返回的行`isOldEnough`中，结果中的键将包含`1`用户是 18 岁还是`0`不是。

# c# - 有没有办法让它看起来像 foreach 看起来返回一个值？

> ID：11551169
> 
> 赞同：1
> 
> 时间：2012-07-18T22:14:57.490
> 
> 标签：c#, lambda

这是我一直想知道的事情，并且查了几次，但一直没有弄清楚。

所以基本上我想做的就是得到这样的效果：

```
List<string> strings = new List<string>(){"a","b","c"};
string aString = foreach(string s in strings){ if (s == "c") return s;} 
```

所以在那之后，aString 的值为“c”。

我尝试过使用 lambda 表达式，也许我只是无法让它们正常工作，或者也许没有办法做到这一点。

显然我想做一些比我上面的例子更复杂的事情，但它会以同样的方式工作。

可能的？不可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:16:59.417

您应该使用`FirstOrDefault`Extension 方法。

```
List<string> strings = new List<string>(){"a","b","c"};
return strings.FirstOrDefault(s=>String.Equals(s, "a")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T22:15:48.783

您可以使用 LINQ（对象）：

```
List<string> strings = new List<string>(){"a","b","c"};
string aString = strings.Where(x => x.Equals("a")).FirstOrDefault(); 
```

这些[`Where()`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)方法遍历可枚举，并“返回”每个满足 lambda 的元素。要获取第一个这样的元素，您可以链接方法（如果没有元素符合条件[`FirstOrDefault()`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)，它将返回。）`default(string)`

正如@MichaelGraczyk 指出的那样，您实际上可以将调用减少到 only `FirstOrDefault()`，因为它有一个接受谓词的重载：

```
string aString = strings.FirstOrDefault(x => x.Equals("a")); 
```

还有许多其他有用的方法可用，您可以[在此处阅读](http://msdn.microsoft.com/en-us/library/bb397919.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T22:20:18.330

在这个特定的例子中这有点毫无意义，因为你已经知道你想要的字符串，但无论如何我认为这就是你想要做的......

```
List<string> strings = new List<string>(){"a","b","c"};

string aString = strings.Find((string s) => s == "a"); 
```

# java - GWT 中的 AsyncCallback 问题

> ID：11551170
> 
> 赞同：0
> 
> 时间：2012-07-18T22:14:58.333
> 
> 标签：java, gwt, asynccallback

嗨，我是 gwt 编程的初学者，我已经解决了这个 AsyncCallback 的问题，我的代码是这样的：

但是当我调用这个方法时，它会在回调可以组成列表之前返回列表。

```
`public static ArrayList<Appointment> build(Usuario user,AppointmentStyle[] styles) {
        final ArrayList<Appointment> list = new ArrayList<Appointment>();
        callback = new AsyncCallback<List<Compromisso>>() {

            @Override
            public void onFailure(Throwable caught) {
                MessageBox.alert("Erro", "Contate o administrador", null);

            }

            @Override
            public void onSuccess(List<Compromisso> result) {
                compromissos = result;
            }

        };
        getServico().listCompromisso(user, callback);

        for (int i = 0; i < compromissos.size(); i++) {
            Date now = new Date();
            now.setDate(compromissos.get(i).getData().getDate());

            Date start = (Date) now.clone();
            int hour = compromissos.get(i).getHorai().getHours();
            int min = compromissos.get(i).getHorai().getMinutes();
            start.setHours(hour);
            start.setMinutes(min);

            Date end = (Date) now.clone();
            end.setHours(compromissos.get(i).getHoraf().getHours());
            end.setMinutes(compromissos.get(i).getHoraf().getMinutes());

            Appointment appt = new Appointment();
            appt.setStart(compromissos.get(i).getHorai());
            appt.setEnd(compromissos.get(i).getHoraf());

            if (compromissos.get(i).getPrivacidade().getCodigo() == "1") {
                appt.setTitle(compromissos.get(i).getTitulo());
                appt.setDescription(compromissos.get(i).getNota());
            } else if (compromissos.get(i).getPrivacidade().getCodigo() == "2") {
                appt.setTitle(compromissos.get(i).getTitulo());
                appt.setDescription("Dados n&atilde;o disponiveis.");
            } else {

                appt.setTitle("Ocupado");
                appt.setDescription("Dados n&atilde;o disponiveis.");
                appt.setStyle(AppointmentStyle.GREY);
            }
            if (compromissos.get(i).getPrioridade().getCodigo() == "1") {
                appt.setStyle(AppointmentStyle.RED);
            } else if (compromissos.get(i).getPrioridade().getCodigo() == "2") {
                appt.setStyle(AppointmentStyle.GREEN);
            } else if (compromissos.get(i).getPrioridade().getCodigo() == "3") {
                appt.setStyle(AppointmentStyle.GREEN);
            }
            list.add(appt);
        }

        return list;
    }` 
```

我该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:25:32.333

您应该异步处理您的请求。问题是`getServico().listCompromisso(user, callback);`不等待服务器响应。

在 onSuccess 中调用您的列表处理并更新 ui：

```
public static void updateModel (Usuario user,AppointmentStyle[] styles) { 
    final ArrayList list = new ArrayList();
    callback = new AsyncCallback>() {

        @Override
        public void onFailure(Throwable caught) {
            MessageBox.alert("Erro", "Contate o administrador", null);

        }

        @Override
        public void onSuccess(List<Compromisso> result) {
            compromissos = result;
            processResult();
            updateUi(); //TODO update your App(-UI)
        }

    };
    getServico().listCompromisso(user, callback);
 }

 /* I don't read all this stuff */
 processResult(){
     for (int i = 0; i < compromissos.size(); i++) {
        Date now = new Date();
        now.setDate(compromissos.get(i).getData().getDate());

        Date start = (Date) now.clone();
        int hour = compromissos.get(i).getHorai().getHours();
        int min = compromissos.get(i).getHorai().getMinutes();
        start.setHours(hour);
        start.setMinutes(min);

        Date end = (Date) now.clone();
        end.setHours(compromissos.get(i).getHoraf().getHours());
        end.setMinutes(compromissos.get(i).getHoraf().getMinutes());

        Appointment appt = new Appointment();
        appt.setStart(compromissos.get(i).getHorai());
        appt.setEnd(compromissos.get(i).getHoraf());

        if (compromissos.get(i).getPrivacidade().getCodigo() == "1") {
            appt.setTitle(compromissos.get(i).getTitulo());
            appt.setDescription(compromissos.get(i).getNota());
        } else if (compromissos.get(i).getPrivacidade().getCodigo() == "2") {
            appt.setTitle(compromissos.get(i).getTitulo());
            appt.setDescription("Dados n&atilde;o disponiveis.");
        } else {

            appt.setTitle("Ocupado");
            appt.setDescription("Dados n&atilde;o disponiveis.");
            appt.setStyle(AppointmentStyle.GREY);
        }
        if (compromissos.get(i).getPrioridade().getCodigo() == "1") {
            appt.setStyle(AppointmentStyle.RED);
        } else if (compromissos.get(i).getPrioridade().getCodigo() == "2") {
            appt.setStyle(AppointmentStyle.GREEN);
        } else if (compromissos.get(i).getPrioridade().getCodigo() == "3") {
            appt.setStyle(AppointmentStyle.GREEN);
        }
        list.add(appt);
    }
} 
```

**编辑：**

[您可以在GWT-Documentation](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)中找到关于异步远程服务器通信的好教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:45:36.260

我解决了将项目区域从 DB thx 加载到所有方法的问题。

# eclipse - JFace TreeViewer 第一列

> ID：11551171
> 
> 赞同：0
> 
> 时间：2012-07-18T22:15:06.887
> 
> 标签：eclipse, jface, treeviewer

![在此处输入图像描述](../Images/cd69c0e7f0bbb8e82f68015c1965880d.png)我有一个 2 列的 jface treeviewer。当我将鼠标悬停在第一列中的任何元素上时，我看到鼠标指针变成了我们在悬停 url 或网页链接时看到的那个（我的意思是手形指针）。并且该特定单元格的颜色也会变成白色，而不管它具有什么背景颜色。对于其他专栏，我没有看到这样的影响。仅在第一列中，我看到了这一点。如何为第一列禁用此“效果”？谢谢。请看下图。您可以在第一列中看到突出显示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:06:10.893

我发现突出显示是由于 treeviewer 上的框架默认选择单个单元格。将 SWT.FULL_SELECTION 设置为具有解决白色背景的完整行选择。

# regex - 如何使用正则表达式只返回文件名的一部分？

> ID：11551172
> 
> 赞同：0
> 
> 时间：2012-07-18T22:15:11.127
> 
> 标签：regex, sed, grep, expression

我无法创建一个只返回部分字符串的正则表达式。

传递以下字符串：

```
/path/of/the/file/1 - 2 - Lecture 1.2_ Max Bense (13_49).mp4
/path/of/the/file/1 - 3 - Lecture 1.3_ Michael Friedman (12_15).mp4
/path/of/the/file/2 - 1 - Lecture 2.1_ Paul Feyerabend (12_55).mp4
/path/of/the/file/2 - 2 - Lecture 2.2_ Alhazen (11_37).mp4
/path/of/the/file/3 - 2 - Lecture 3.2_ Study Case - Dominicus Gundissalinus (14_30).mp4 
/path/of/the/file/3 - 3 - Lecture 3.3_ Study Case - Carl Friedrich von Weizsacker (11_48).mp4 
```

它应该分别只返回以下部分：

```
Max Bense
Michael Friedman
Paul Feyerabend
Alhazen
Study Case - Dominicus Gundissalinus
Study Case - Carl Friedrich von Weizsacker 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:25:23.987

这似乎是一项轻松的工作`awk`。`_`它使用 chars或分割字段中的行`(`，因此名称将是第二个，然后删除该字段的前导和尾随空格：

```
awk '
    BEGIN { 
        FS = "[_(]" ;
    } 
    { 
        gsub( /^ *| *$/, "", $2 ); 
        print $2 ;
    }
' infile 
```

输出：

```
Max Bense
Michael Friedman
Paul Feyerabend
Alhazen
Study Case - Dominicus Gundissalinus
Study Case - Carl Friedrich von Weizsacker 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:26:31.007

### 使用 PCRE 和 Positive Lookbehind

如果您可以访问支持 PCRE 表达式的正则表达式引擎，则可以使用正向查找从 MP3 列表中获取您想要的文本。例如：

```
pcregrep -o '(?<=_ )([^(]+)' /tmp/foo 
```

### 使用 Sed

如果您没有与 Perl 兼容的 grep，则可以使用 sed 代替。它的可读性要低得多，但便携性要高得多。例如：

```
sed 's/.*_ \([^(]\+\).*/\1/' /tmp/foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:27:59.897

这是一个 JavaScript 解决方案：

```
var files=["/path/of/the/file/1 - 2 - Lecture 1.2_ Max Bense (13_49).mp4",
"/path/of/the/file/1 - 3 - Lecture 1.3_ Michael Friedman (12_15).mp4",
"/path/of/the/file/2 - 1 - Lecture 2.1_ Paul Feyerabend (12_55).mp4",
"/path/of/the/file/2 - 2 - Lecture 2.2_ Alhazen (11_37).mp4",
"/path/of/the/file/3 - 2 - Lecture 3.2_ Study Case - Dominicus Gundissalinus (14_30).mp4",
"/path/of/the/file/3 - 3 - Lecture 3.3_ Study Case - Carl Friedrich von Weizsacker (11_48).mp4​​​​"];
var regex=/_\s(.+)\s/;

​for (var i = 0; i < files.length; i++) {
    console.log(regex.exec(files[i])[1]);
}​ 
```

[http://jsfiddle.net/g8zPv/](http://jsfiddle.net/g8zPv/)

# c++ - C ++ multimap导致程序退出缓慢？

> ID：11551175
> 
> 赞同：0
> 
> 时间：2012-07-18T22:15:29.933
> 
> 标签：c++, stl, multimap

我有一个程序从 .csv 读取数据并创建一个`multimap`. 我在下面粘贴了一个简单的版本。它工作正常，但在退出时运行速度非常慢（即，一旦程序打印出输出并到达`return 0;`. 我正在处理相对较大的文件，例如，从 50 到几百兆字节不等。退出时的延迟不足为奇，与文件大小成正比。

我想知道有没有什么办法可以加快退出速度？我的猜测是它很慢，因为它正在从内存中清除数据。 `CTRL+c`但是，在终端窗口中会立即将其关闭。我看过但没有找到太多。

```
#include <iostream>
#include <sstream>
#include <fstream>
#include <string>
#include <vector>
#include <map>

int main (int argc, char* argv[])
{

std::string filename = "edge_data_mid.csv";

// obtain multimaps
std::ifstream fin;

fin.open(filename.c_str(), std::ios_base::in|std::ios_base::binary);
if (!fin.is_open()) {
    std::cout << "could not open the file '" << filename << "'" << std::endl;
    exit(EXIT_FAILURE);
}

std::multimap<std::string, std::string> gciting;

std::string line;

// this loop parses the file one line at a time
while (getline(fin, line)) {
    std::istringstream linestream(line);
    std::string item;

    std::string nodea;
    std::string nodeb;

    getline(linestream, item, ',');
    nodea = item;
    getline(linestream, item);
    nodeb = item;

    gciting.insert(std::pair<std::string, std::string>(nodeb, nodea));
}

fin.close();       

std::cout << gciting.count("3800035") << std::endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:20:33.560

是的，`std`如果容器的析构函数管理内存（在您的情况下，它们确实管理它们包含的`std::string`s 的内存）并且它们包含很多元素，则它们需要一段时间。

如果您不介意内存泄漏（这不是泄漏，因为它不是连续泄漏并且是受控的），您可以动态分配映射并*忘记*删除它：

```
std::multimap<std::string, std::string>* gciting = new std::multimap<std::string, std::string>;

std::string line;

// this loop parses the file one line at a time
while (getline(fin, line)) {
    std::istringstream linestream(line);
    std::string item;

    std::string nodea;
    std::string nodeb;

    getline(linestream, item, ',');
    nodea = item;
    getline(linestream, item);
    nodeb = item;

    gciting->insert(std::pair<std::string, std::string>(nodeb, nodea));
}

fin.close();       

std::cout << gciting->count("3800035") << std::endl;

//oooops forgot to delte gciting
return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T22:21:44.847

### 我怎样才能使我的对象不被破坏？

如果您真的想阻止对象释放自身并且它包含元素（因为您知道应用程序将终止），您可以使用在堆上分配它`new`，然后永远不要释放内存（通常通过 完成`delete`）。

通常不建议这样做，但当今的主要操作系统足够智能，可以在应用程序终止时将任何分配的内存释放回操作系统，因此使用这种方法**应该是安全的。**

* * *

**请注意**，我在上面使用了“*应该*”而不是“*将*”这个词。

标准中没有说分配的内存将被释放回操作系统，或者如果你不释放它会发生什么（除了你有泄漏）。

如果您正在编写要在小型系统（例如冰箱的控制器）上运行的代码，请在实际验证该平台是否确实会在终止后释放内存之前**不要使用此方法。**

**我们不希望我们的食物变质**。

* * *

### 除了内存释放之外，它变慢的潜在原因

如果您在调试模式下运行您的应用程序，那么将发生比帮助最终调试您的应用程序所需发生的更多的事情。

尝试打开优化标志并在（通常称为）发布模式下编译它。

* * *

### 使用放置新..

如果*出于某种奇怪的原因*，您仍然希望您的对象驻留在堆栈上，您可以使用*placement-new*，如下面的代码片段所示。*Placement-new*将尝试使用您传递给它的地址并将对象放在那里。

### [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")

```
#include <type_traits> 
```

```
typedef std::multimap<std::string,std::string> SSMap;

std::aligned_storage<
  sizeof(SSMap), std::alignment_of<SSMap>::value
>::type storage;

SSMap& gciting = * new (&storage) SSMap;

/* use gciting exactly as before */ 
```

* * *

### [c++03](/questions/tagged/c%2b%2b03 "显示标记为“c++03”的问题")

在 C++03 中，确保正确对齐的最佳/最简单方法是使用`malloc`分配内存，以满足可用的最严格对齐（适用于每种类型）。

话虽如此，没有简单的方法让对象仍然驻留在堆栈上，尽管使用对象的接口保持不变，但我们仍然可以创建对驻留在堆上的对象的引用。

```
#include <cstdlib> 
```

```
typedef std::multimap<std::string,std::string> SSMap;

char * storage = static_cast<char*> (std::malloc (sizeof (SSMap))); 
SSMap& gciting = *new (storage) SSMap;

/* use gciting exactly as before */ 
```

# c# - Bind an ObservableCollection to a ComboBox in WPF

> ID：11551176
> 
> 赞同：2
> 
> 时间：2012-07-18T22:15:29.460
> 
> 标签：c#, wpf, linq, entity-framework, data-binding

I'm using `Entity Framework` as my database source and need to convert a `Linq` query "var" type to an ObservableCollection. I then need to bind the ObservableCollection to a ComboBox on WPF form; binding to ItemsSource, DisplayMemeberPath, SelectedValuePath and SelectedValue.

Here is Code:

```
using (PulseContext pc = new PulseContext())
{
    var maritalcodes =  from m in pc.CodeMaster
                        where m.Type == "16"
                        select new { m.Code, m.Description };

    prop.ClientData.Options = new ObservableCollection<object>(maritalcodes);
} 
```

Problem is the `ComboBox` is showing this as "{ Code = ????, Description = ???? }" instead of bind to code for value and description for display. What do I have to do to get the ComboBox to bind to the individual elements?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:41:38.533

You need to set `SelectedValuePath` and `DisplayMemberPath` like this:

```
prop.ClientData.Options = new ObservableCollection<object>(maritalcodes);
prop.ClientData.Options.SelectedValuePath = "Code";
prop.ClientData.Options.DisplayMemberPath = "Description"; 
```

Or you can set them in xaml like this:

```
<ComboBox ItemsSource="{Binding Path=maritalcodes}"
          SelectedValuePath="Code"
          DisplayMemberPath="Description" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:32:55.717

```
<ComboBox ItemsSource="{Binding Path=maritalcodes}"
      SelectedValuePath="Code"
      DisplayMemberPath="Description" 
      SelectedValue="{Binding Path=Code}"/> 
```

I hope this will help.

# postgresql - 在 postgresql 数据库中查找包含非数字值的行

> ID：11551177
> 
> 赞同：4
> 
> 时间：2012-07-18T22:15:31.710
> 
> 标签：postgresql

我有一张表格，其中包含从气象观测中收集的数据。数据准备不足，因此在插入数据库时​​会出错。在最近的一次浏览中，我发现了不应该存在的非数字数据。

如何选择存在非数值的行？

该表的布局如下：

```
#\d data.tempe
               Table "data.tempe"
   Column   |         Type          | Modifiers 
------------+-----------------------+-----------
 id-station | integer               | 
 year       | integer               | 
 t1         | character varying(25) | 
 t2         | character varying(25) | 
 t3         | character varying(25) | 
 t4         | character varying(25) | 
 t5         | character varying(25) | 
 t6         | character varying(25) | 
 t7         | character varying(25) | 
 t8         | character varying(25) | 
 t9         | character varying(25) | 
 t10        | character varying(25) | 
 t11        | character varying(25) | 
 t12        | character varying(25) | 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-09-16T05:38:16.970

```
WHERE field !~ '^([0-9]+[.]?[0-9]*|[.][0-9]+)$' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T22:50:45.093

从[PostgreSQL 邮件列表中的这条消息中](http://archives.postgresql.org/pgsql-sql/2008-04/msg00168.php)，您应该能够使用正则表达式。

例如，这样的事情应该使 t1 中的无效值无效：

```
UPDATE data.tempe SET t1=NULL
    WHERE t1 !~ E'^[+-]?[0-9]+(\\\\.[0-9]*)?([Ee][+-]?[0-9]+)?\$'; 
```

（正则表达式可能取决于您期望的数据格式。）

# php - 使用 PHP 和 LDAP 连接到 Microsoft Office 365

> ID：11551181
> 
> 赞同：4
> 
> 时间：2012-07-18T22:15:56.323
> 
> 标签：php, authentication, ldap, office365

我工作的公司已将其本地交换迁移到托管的 Office 365 解决方案。我们正在构建几个外部（本地网络）托管网站，并希望使用 LDAP 身份验证来构建我们现有的托管用户群。

任何人都可以解释或指出一些使用 PHP 和 LDAP 连接到远程托管的 AD（在本例中为 Office 365）并对其用户进行身份验证的方法的文档吗？

感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:49:22.713

这个有可能。微软最近为其[Windows Azure](https://www.windowsazure.com/en-us/)云平台发布了开发者预览版，该平台的功能与许多其他云计算服务（[Amazon](http://aws.amazon.com/)、[Pagoda Box](https://pagodabox.com/)、[Heroku](http://www.heroku.com/)）类似。与此新产品一起，开发的应用程序能够使用您的 Office365 帐户凭据利用单点登录。

以下是一些介绍 PHP 过程的文章：

1.  [如何使用 Windows Azure Active Directory 实现单点登录 - PHP 应用程序](https://www.windowsazure.com/en-us/develop/php/how-to-guides/web-sso/)
2.  [开始使用 Windows Azure Active Directory](http://haishibai.blogspot.com/2012/07/guided-tour-of-windows-azure-active.html)

笔记：

*   示例一的来源位于 git repo 中。此 repo 不包含引用的 .csproj 文件，因此您必须使用包含的 3 个源文件构建项目。如果我能做到，你也能做到:)。
*   还应该注意的是，在 Office365 身份验证完成并重新路由回您的应用程序后，它期望返回 URL 为 HTTPS，如果不是，您将收到错误消息（或者至少我这样做了）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-18T22:41:47.077

我已经使用 php 完成了 ldap 身份验证和其他内容，这是基本身份验证，请确保您的 DN 在您尝试进行身份验证时是正确的。

```
 define("LDAPSERVER","192.168.0.1"); // your server
      define("LDAPBINDDN","cn=Worker,dc=mlonline,");
      define("LDAPBINDPW","FakePassword");

        $ds=ldap_connect(LDAPSERVER);
        if($ds){
            try{
                    $bind=ldap_bind($ds,LDAPBINDDN,LDAPBINDPW);
                    if($bind){
                            //yeah authenticated
                    }else{
                        throw new Exception('Cannot Connect to server Authentication Failed');
                    }

            }catch(Exception $e){
                throw $e;
            }
        }else{
           throw new Exception('Server Down');
        } 
```

# html - 傻瓜式的 Ajax 和 Grails

> ID：11551182
> 
> 赞同：0
> 
> 时间：2012-07-18T22:15:58.947
> 
> 标签：html, css, ajax, grails, web-applications

我是 Grails 新手用户，对 AJAX 完全陌生。我对AJAX的概念没有完全掌握，网上的资料比较零散。

据我了解，在 grails 中，如果我想在我的 HTML 文档的一部分加载时在我的一个控制器中执行一个方法，我可以简单地使用类似的东西

```
<div onload="${remoteFunction(action:"foo", update:"foo"...)}" ...> 
```

1.  对假设 foo 的调用的响应是如何返回的，如何在 js 函数中访问它？
2.  我可以从我假设的 foo 动作创建的类中返回一个对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:20:41.613

在 foo 操作返回时，您可以将简单的 html 作为文本或渲染一些可在视图中使用的对象。

这里有关于控制器“渲染”的所有信息

[http://grails.org/doc/latest/ref/Controllers/render.html](http://grails.org/doc/latest/ref/Controllers/render.html)

您可以使用该数据进行更新并在那里使用它。然后，您可以像往常一样使用 javascript 访问该“foo”div 中的 Html 和数据。

例如：

控制器.groovy

```
// renders text to response
render '<div id="bar" onclick="alert($('bar').val())>some text</div>' 
```

查看.gsp

```
//Makes the call and updates foo
<div onload="${remoteFunction(action:"foo", update:"foo"...)}" ...>
<div id="foo" name="foo"></div> 
```

输出

```
<div onload="theAjaxJavascriptFunctionThatGrailsWillInject" ...>
<div id="foo" name="foo">
    <div id="bar" onclick="alert($('bar').val())">some text</div>
</div> 
```

如果您从 Controller.grooy 返回一些对象，那么您必须在 View.gsp 中像这样对待它

```
//Makes the call and updates foo
<div onload="${remoteFunction(action:"foo", update:"foo"...)}" ...>
<div id="foo" name="foo">
    ${myObject.theValueIWant}
</div> 
```

我添加了一个 javascript 警报，但您可以按照自己喜欢的方式进行操作，有很多方法可以做到。

希望能帮助到你 ：）

# c# - 将字符串从“yyyy-MM-dd”转换为日期时间

> ID：11551185
> 
> 赞同：9
> 
> 时间：2012-07-18T22:16:05.930
> 
> 标签：c#, sql-server, datetime-format

尽管这个问题似乎已经被问了很多次，但我似乎找不到特定于我的问题的答案：

我有一个 C# XML 解析器从 XML 文件中读取的变量。它是一个字符串，格式为`"yyyy-MM-dd"`. 我想使用 将这个变量读入我们的数据库`SQL`，但它需要采用正确的日期时间格式才能执行此操作。不幸的是，我找不到任何日期时间格式`"yyyy-MM-dd"`。我错过了什么吗？

如果可能的话，我希望能够在必须打开`SQL`连接之前将变量转换为日期时间。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-18T22:19:25.760

> 如果可能，我希望能够在必须打开 SQL 连接之前将变量转换为日期时间。

```
DateTime result = DateTime.ParseExact("2012-04-05", "yyyy-MM-dd", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T22:25:04.483

也许 ParseExact 函数可以帮助你。

```
DateTime dResult = DateTime.ParseExact("2012-07-18", "yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T06:21:50.377

在 sql server 中，您可以使用查询
SELECT CONVERT(VARCHAR(10), GETDATE(), 120) AS [YYYY-MM-DD]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T22:27:11.107

如果您使用 LINQ to XML，您可以简单地将元素或属性转换为`DateTime`：

```
DateTime date = (DateTime) element; 
```

然后，您可以使用参数化 SQL 将其插入到您的数据库中。我*反对*Aaron 的建议：尽可能保持数据最自然的形式，在 vanilla .NET 中是`DateTime`. 您可以将数据保留在有意义的表示中的时间越多，IMO 就越好。

如果您不使用 LINQ to XML，那么 smink 和 Riera 的解决方案很好 - 但如果可以的话，我强烈建议您使用 LINQ to XML :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-25T20:58:29.507

如果您不确定它是否有效，您可以使用“TryParseExact”。如果它有效，“成功”将是真实的。这样您就不会冒解析异常的风险。

```
DateTime timestamp;
bool success = DateTime.TryParseExact("2015-12-25", "yyyy-MM-dd", CultureInfo.InvariantCulture, DateTimeStyles.AdjustToUniversal, out timestamp); 
```

# rest - 访问自动索引的不一致

> ID：11551187
> 
> 赞同：1
> 
> 时间：2012-07-18T22:16:34.060
> 
> 标签：rest, indexing, neo4j

我一直在玩 Neo4j 自动索引，我很困惑......

我正在使用什么：

*   neo4j-community-1.8.M05
*   ruby1.9.3p194

以下代码也在[https://github.com/LouisSayers/Neo4jChallenges](https://github.com/LouisSayers/Neo4jChallenges)

我的目的是创建具有唯一“uuid”值（由我生成）的节点。为了确保它们是唯一的，我的想法是检查索引，如果 uuid 值已经存在，那么我会生成一个新的 uuid 值。

我看到的是，对于我的一个 uuid（'blahblahuuid'）来说，这是可行的，但对于另一个它却没有......而且我不知道为什么（检查 Neo4j 监控工具控制台）。

如果您在 ruby​​1.9.3 上全新安装 neo4j（不更改属性等）尝试下面的代码，那么希望您会看到我所看到的行为！

这是我的代码：

宝石文件：

```
source "http://rubygems.org"
source "http://gems.rubyforge.org"
source "http://gemcutter.org"

#gem install bundler -v 1.2.0.pre --pre

ruby '1.9.3'
gem 'bundler', '1.2.0.pre'
gem 'neography', :git => 'https://github.com/maxdemarzi/neography' 
```

测试.rb：

```
require "rubygems"
require "bundler"
require 'digest/sha1'
require 'securerandom'
Bundler.setup(:default)

require 'neography'

$neo = Neography::Rest.new("http://localhost:7474")
$neo.create_node_index("node_auto_index")
$neo.set_node_auto_index_status(true)

$neo.execute_script("g.clear()")

def generate_uuid(deviceUUID)
  uuid = Digest::SHA1.base64digest deviceUUID
  existing_node_with_uuid = $neo.get_node_auto_index('uuid', uuid)

  until existing_node_with_uuid.nil?
    uuid = Digest::SHA1.base64digest (deviceUUID.to_s + SecureRandom.base64(8))
    existing_node_with_uuid = $neo.get_node_auto_index('uuid', uuid)
  end
  uuid
end

def generate_node(deviceUUID)
  uuid = generate_uuid(deviceUUID)
  secret = SecureRandom.base64(256)
  currentTime = DateTime.now

  $neo.create_node("uuid" => uuid, "deviceUUID" => deviceUUID,
                   "secret" => secret, "currentTime" => currentTime)
end

generate_node('blahblahuuid')
generate_node('blahblahuuid')
generate_node('4edb096b479588f6')
generate_node('4edb096b479588f6') 
```

运行代码：

```
ruby test.rb 
```

在 neo4j 控制台中列出结果：

```
start all = node(*)
return all; 
```

＃ 更新

我弄清楚出了什么问题 - 首先我没有正确索引 uuid，我需要添加： $neo.add_node_auto_index_property("uuid")

正如 Max 指出的那样，我的 uuid 中有一个“/”。

也正如 Russell Duhon 所指出的 (https://groups.google.com/forum/?fromgroups#!topic/neo4j/KyW0s5p5-fM)

我应该只使用一个 uuid 库 - 这就是我现在正在做的（使用 uuid gem - [https://github.com/assaf/uuid/](https://github.com/assaf/uuid/)）然后我不必检查是否存在相同的 uuid - 如uuid 应该是唯一的。

我还对通过neography 传递的所有参数进行编码-因为其中一些可能包含斜杠和'？& ='符号，它们可能会干扰其余的url！

感谢 Max 和 Russell 的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:43:14.077

它正在做：

```
existing_node_with_uuid = $neo.get_node_auto_index('uuid', '7sZfZnCgz4sL/TkE4tPqb5+GgF0=') 
```

将获取请求发送到：

```
/db/data/index/node/node_auto_index/uuid/7sZfZnCgz4sL/TkE4tPqb5+GgF0= 
```

我认为“/”把事情弄得一团糟。

# c - pthread_timedjoin_np 的替代方案

> ID：11551188
> 
> 赞同：7
> 
> 时间：2012-07-18T22:16:37.057
> 
> 标签：c, macos, pthreads

我试图弄清楚如何摆脱对 pthread_timedjoin_np 的依赖，因为我正在尝试在 OSX 上构建一些代码。

现在我有一个线程队列，我从中弹出，执行 pthread_timedjoin_np，如果它们不返回，它们会被推回队列。

为每个线程调用的 thread_function 的末尾执行 pthread_exit(0); 以便接收线程可以检查返回值是否为零。

我想我可能会尝试使用 pthread_cond_timedwait() 来达到类似的效果，但是我认为我错过了一步。

我想我可以让工作线程 A 发出一个条件信号，并且在互斥体中使用 pthread_exit()，然后工作线程 B 可以在信号上唤醒，然后是 pthread_join()。问题是，线程 B 不知道哪个线程抛出了条件信号。我是否需要明确地将其作为条件信号的一部分传递或什么？

谢谢

德里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T00:18:46.150

这是一个可移植的实现`pthread_timedjoin_np`。这有点贵，但它是一个完整的替代品：

```
struct args {
    int joined;
    pthread_t td;
    pthread_mutex_t mtx;
    pthread_cond_t cond;
    void **res;
};

static void *waiter(void *ap)
{
    struct args *args = ap;
    pthread_join(args->td, args->res);
    pthread_mutex_lock(&args->mtx);
    args->joined = 1;
    pthread_mutex_unlock(&args->mtx);
    pthread_cond_signal(&args->cond);
    return 0;
}

int pthread_timedjoin_np(pthread_t td, void **res, struct timespec *ts)
{
    pthread_t tmp;
    int ret;
    struct args args = { .td = td, .res = res };

    pthread_mutex_init(&args.mtx, 0);
    pthread_cond_init(&args.cond, 0);
    pthread_mutex_lock(&args.mtx);

    ret = pthread_create(&tmp, 0, waiter, &args);
    if (!ret)
            do ret = pthread_cond_timedwait(&args.cond, &args.mtx, ts);
        while (!args.joined && ret != ETIMEDOUT);

    pthread_mutex_unlock(&args.mtx);

    pthread_cancel(tmp);
    pthread_join(tmp, 0);

    pthread_cond_destroy(&args.cond);
    pthread_mutex_destroy(&args.mtx);

    return args.joined ? 0 : ret;
} 
```

由于我是在现场写的并且没有测试它，所以可能会有一些小错误，但是这个概念是合理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:11:30.707

生产者-消费者队列。让线程在它们退出之前将它们自己排队，以及它们的结果（如果有的话）到队列中。排队等候。

没有轮询，没有延迟。

对于您当前的设计，您必须 join() 返回的线程获取 valueptr 并确保它们被销毁。

也许您有时可以转移到一个真正的线程池，其中任务项排队到永不终止的线程（因此消除了线程创建/终止/销毁开销）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T01:49:14.193

解决方案`alarm`。

pthread 应该启用取消，因此它可以通过外部停止。（即使使用`pthread_timedjoin_np`）。

`pthread_timedjoin_np``ETIMEOUT`等待时间后返回。

1.  设置`alarm`，使用`alarm`也可以给出“TIMEOUT”信号。
2.  在处理程序中，只是`pthread_cancel`它。（只有超时运行这个）。
3.  `pthread_join`它在主线程中。
4.  重置`alarm`

我在这里写测试代码：[github](https://github.com/liuyang1/test/blob/master/lang/c/pthread/pthread_timedjoin.c)

# android - 来自通知的意图没有额外内容

> ID：11551195
> 
> 赞同：56
> 
> 时间：2012-07-18T22:16:59.880
> 
> 标签：android, android-intent, android-notifications

这似乎是一个常见问题，我已经解决了所有我能找到的相关问题： [活动没有接收新的意图](https://stackoverflow.com/questions/5628382/activity-isnt-picking-up-new-intent)，[为什么在 android 通知意图中没有发送额外的数据（整数）？](https://stackoverflow.com/questions/10456655/why-extra-data-integer-is-not-sent-in-android-notification-intent), [Notification 通过旧的 Intent Extras](https://stackoverflow.com/questions/7370324/notification-passes-old-intent-extras/9330144) , [Can't put extras for an intent in notification](https://stackoverflow.com/questions/7098893/cant-put-extras-for-an-intent-in-notification) , [android 挂起的意图通知问题](https://stackoverflow.com/questions/3009059/android-pending-intent-notification-problem); 但仍然无法弄清楚这一点。

问题是一样的。我设置了一个带有 PendingIntent 的通知，其中包含一些额外的信息，但我没有在另一边得到它。

下面是生成通知的代码：

```
Notification notification = new Notification(R.drawable.icon, getResources().getString(R.string.notification_ticker), System.currentTimeMillis());
notification.flags = Notification.FLAG_AUTO_CANCEL | Notification.FLAG_ONLY_ALERT_ONCE;

Intent start_test = new Intent(this, MyActivity.class);
start_test.putExtra("start_test", true);
start_test.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

PendingIntent pi = PendingIntent.getActivity(this, (int) System.currentTimeMillis(), start_test, PendingIntent.FLAG_CANCEL_CURRENT);
notification.setLatestEventInfo(this, getResources().getString(R.string.notification_title), getResources().getString(R.string.notification_content, expired), pi);
nm.notify(NOTIFICATION_ID, notification); 
```

另一方面：

```
boolean start_test=getIntent().getBooleanExtra("start_test", false); 
```

捆绑包实际上不存在（getExtras() 返回 null）。

`PendingIntent.getActivity`我尝试了( `FLAG_UPDATE_CURRENT`, `FLAG_CANCEL_CURRENT`, )的不同标志`FLAG_ONE_SHOT`，但这些都没有帮助。

如代码所示，我使用 getCurrentMillis 来确保 requestID 发生变化......

还发现在 MyActivity 中，`onCreate`并`onNewIntent`没有被调用。只有`onResume`是。即使`FLAG_ACTIVITY_NEW_TASK`设置...？

我错过了一些非常简单的东西吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-19T15:15:21.250

通知 Intent 的设置`FLAG_ACTIVITY_NEW_TASK`将导致以下情况：

*   如果 Activity**尚未**在任务中运行，则将启动一个新任务并将 Intent 传递给`onCreate()`

*   但是，如果活动已经在任务中运行，则该任务将被带到前台。就这样。Intent**不会**被传递，`onNewIntent()`也不会被调用。

如果您希望**实际交付**Intent，您需要指定：

```
start_test.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | 
                    Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

Activity 的存在与否**无关紧要**，您仍然必须在 Intent 中指定。`launchMode``singleTop``Intent.FLAG_ACTIVITY_SINGLE_TOP`

**注意：**如果 Activity 已经在任务中运行，并且该 Activity**不在**该任务中的 Activity 堆栈顶部，则该任务将被带到前台。就这样。Intent 将**不会**被交付。实现这一点的唯一方法是添加`Intent.FLAG_ACTIVITY_CLEAR_TOP`到其他 2 个标志，但这可能不是您想要发生的（取决于您的具体情况）。

[在http://code.google.com/p/android/issues/detail?id=17137](http://code.google.com/p/android/issues/detail?id=17137)上查看我在 Google 代码上的（仍然）未决问题

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-05-14T07:59:12.480

我刚刚将该`PendingIntent.FLAG_UPDATE_CURRENT`标志添加到我的待处理意图中，它开始为我工作（跳过了意图的所有标志）。

示例代码：

```
PendingIntent pendIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-17T13:38:37.867

1.  如果不需要，请**避免**将清单中的活动设置为单个任务。如果可以，请省略此行或将其更改为 singleTop：

    ```
     android:launchMode="singleTask” 
    ```

2.  如果您必须有一个任务，那么在待处理的意图中将标志设置为：意图。**FLAG_ACTIVITY_NEW_TASK** | 意图。**FLAG_ACTIVITY_CLEAR_TASK** 和 PendingIntent。**FLAG_CANCEL_CURRENT**。

    ```
    resultIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |Intent.FLAG_ACTIVITY_CLEAR_TASK);
    pIntent = PendingIntent.getActivity(context, 0, resultIntent,    PendingIntent.FLAG_CANCEL_CURRENT ); 
    ```

3.  **如果您有一个任务 - 通过setIntent(intent)**重置您在 onNewIntent() 中的活动中的额外内容；

     **```
    protected void onNewIntent(Intent intent) {
           setIntent(intent);
           ... 
     } 
    ```** 

 *** * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-20T12:41:26.477

您可以按照以下方式发送附加信息

```
PendingIntent contentIntent ;
Intent intent = new Intent(this,TestActivity.class);
intent.putExtra("extra","Test");
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);

stackBuilder.addParentStack(ArticleDetailedActivity.class);

contentIntent = stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT); 
```

要在测试活动类中获得 Intent 额外价值，您需要编写以下代码：

```
Intent intent = getIntent();
 String extra = intent.getStringExtra("extra") ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-02T03:33:14.240

更简单的方法：真正的问题是，指向同一个目标的意图被替换了。我刚刚通过创建一个新服务“NotificationDismissalService”解决了这个问题。访问该服务的唯一意图是 setDeleteIntent 项。因为它是一项独特的服务，所以参数不会被替换。NotificationDismissalService 的主体（它实际上是每个唯一意图类型的一个这样的解雇服务）是“onStartCommand”的一个简单实现，它将意图发送到首选服务（读取/写入正确的参数）。因为这是服务的实际发送，中间没有挂起的意图，所以它工作得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-16T10:35:35.217

我用过这样的东西

```
Intent myIntent = new Intent(context, DoSomething.class);
 PendingIntent pendingIntent = PendingIntent.getActivity(
        context, 
        0, 
        myIntent, 
        Intent.FLAG_ACTIVITY_NEW_TASK); 
```

[在此处](http://www.panayiotisgeorgiou.net/start-activity-once-notification-clicked/)查看完整示例

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-27T07:38:45.870

当应用程序未运行或处于后台并且用户单击托盘中的通知时，您可以获得额外的 Intent 并检查键：

```
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.d("RC","MainActivity.onCreate() called");

    if (getIntent().getExtras() != null){
        Bundle extra = getIntent().getExtras();
        Log.d("RC", "MainActivity.onCreate() : keys count = " + extra.keySet().size());

        for ( String key : extra.keySet()) {
            Log.d("RC","MainActivity.onCreate() : key = " + key + " = " + extra.getString(key));
        }

    }
} 
```

这将显示：

```
D/RC: MainActivity.onCreate() called
D/RC: MainActivity.onCreate() : keys count = 8
D/RC: MainActivity.onCreate() : key = google.delivered_priority = high
D/RC: MainActivity.onCreate() : key = google.sent_time = null
D/RC: MainActivity.onCreate() : key = google.ttl = null
D/RC: MainActivity.onCreate() : key = google.original_priority = high
D/RC: MainActivity.onCreate() : key = from = 631131412302
D/RC: MainActivity.onCreate() : key = google.message_id = 0:1627370460932539%952b1da9952b1da9
D/RC: MainActivity.onCreate() : key = gcm.n.analytics_data = null
D/RC: MainActivity.onCreate() : key = collapse_key = com.reflectcode.demo.cloudmessaging 
```**

# html - HTML 页面中 PDF 文件的 MIME 编码

> ID：11551197
> 
> 赞同：19
> 
> 时间：2012-07-18T22:17:04.760
> 
> 标签：html

PDF 是否可以进行 MIME 编码并作为 HTML 页面有效负载的一部分包含在内？该站点显示您可以在 HTML 页面中包含 MIME 编码的图像或 CSS：http: [//www.greywyvern.com/code/php/binary2base64/](http://www.greywyvern.com/code/php/binary2base64/) - 但我不知道标记的用途HTML 页面中包含的编码 PDF。谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-18T22:56:22.590

`iframe`我用and试过了`embed`，在 chrome、opera 和 safari 中工作过，没有 ie 或 ff

```
<iframe src="data:application/pdf;base64,base64encodedpdf"></iframe>
<embed src="data:application/pdf;base64,base64encodedpdf"> 
```

[http://jsfiddle.net/yLx2W/](http://jsfiddle.net/yLx2W/)
[http://jsfiddle.net/yLx2W/1/](http://jsfiddle.net/yLx2W/1/)

也许通过一些调整，你可以让他们为 ff 工作，也许 ie。

# php - 过滤获取和发布值

> ID：11551198
> 
> 赞同：0
> 
> 时间：2012-07-18T22:17:11.113
> 
> 标签：php, post, filter, get

我在其中调用我的主页 framework_ui.php 我需要 auth.php ，其中我有一个过滤器功能。

```
function filter($data)
{
   // normalize $data because of get_magic_quotes_gpc
   $dataNeedsStripSlashes = get_magic_quotes_gpc();
   if ($dataNeedsStripSlashes) {
       $data = stripslashes($data);
   }
   // normalize $data because of whitespace on beginning and end
   $data = trim($data);
   // strip tags
   $data = strip_tags($data);
   // replace characters with their HTML entitites
   $data = htmlentities($data);
   // mysql escape string    
   $data = mysql_real_escape_string($data);
   return $data;
} 
```

在每个带有 get 和 post 变量的页面上，我都会执行以下操作：（并调用我的 framework.php）

```
// filter GET values
foreach ($_GET as $key => $value) {
    $get[$key] = filter($value);
}
// filter post
foreach ($_POST as $key => $value) {
    $post[$key] = filter($value);
} 
```

如果我将上述函数设为并在每个页面上调用它，该函数是否仍能正常运行？

```
function filter_all() {
// filter GET values
foreach ($_GET as $key => $value) {
    $get[$key] = filter($value);
}
// filter post
foreach ($_POST as $key => $value) {
    $post[$key] = filter($value);
}
} 
```

我知道这不是最安全的方法，但是我想知道这种事情是否可能并且不会对我的代码产生负面影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:31:01.133

您的 filter_all() 函数不返回任何内容，并且它不会修改 $_GET 和 $_POST 全局变量，因此在您的函数完成运行这些原始变量后，您的 foreach 循环将实际上是相同的。如果您打算使用它们，则应该直接操作 $_GET/$_POST 或全局 $get/$post 或返回两者的某种组合。除此之外，您的计划并没有什么负面影响。

如果您打算每次都这样做，那么最好不要创建一个函数，而只包含一个文件（如您的 framework_ui.php），它只是执行循环并过滤变量。

zerkms 是正确的，尽管您的过滤器功能并不理想，因为它不安全，事实上，如果您计划重新显示用户提交的信息（以及许多其他事情），mysql_real_escape_string 会导致问题。

引用 OWASP ESAPI 项目页面：

> 不要编写自己的安全控制！在为每个 Web 应用程序或 Web 服务开发安全控制时重新发明轮子会导致时间浪费和大量安全漏洞。OWASP 企业安全 API (ESAPI) 工具包可帮助软件开发人员防范与安全相关的设计和实施缺陷。[http://code.google.com/p/owasp-esapi-php/](http://code.google.com/p/owasp-esapi-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:26:19.460

您只需进行一些调整以确保“过滤”值可用于其余代码。有几种方法可以做到这一点，将它们标记为`global`或返回它们；可能第二种选择通常被认为更清洁。这是一个例子：

```
function filter_all() {
    $get  = array();
    $post = array();

    // filter GET values
    foreach ($_GET as $key => $value) {
        $get[$key] = filter($value);
    }
    // filter post
    foreach ($_POST as $key => $value) {
        $post[$key] = filter($value);
    }
    return array(
            'get'  => $get,
            'post' => $post);
}

$aFilteredInput = filter_all();
$get  = $aFilteredInput['post'];
$post = $aFilteredInput['post']; 
```

# pagination - Kohana3 分页模块渲染不正确

> ID：11551200
> 
> 赞同：0
> 
> 时间：2012-07-18T22:17:16.077
> 
> 标签：pagination, kohana

我使用默认的 kohana 3.2 分页模块。搜索返回大约 100 页的结果。分页模块呈现所有 100 个链接。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:41:18.037

这是您的默认分页配置：

```
return array(

    // Application defaults
    'default' => array(
        'current_page'      => array('source' => 'query_string', 'key' => 'page'), // source: "query_string" or "route"
        'total_items'       => 0,
        'items_per_page'    => 10,
        'view'              => 'pagination/basic',
        'auto_hide'         => TRUE,
        'first_page_in_url' => FALSE,
    ),

); 
```

您所需要的只是将分页视图从 切换`pagination/basic`到`pagination/floating`. 或者您可以创建和使用自己的分页模板。

# wcf - 使用实体框架的 WCF 数据服务中的业务逻辑在哪里？

> ID：11551201
> 
> 赞同：1
> 
> 时间：2012-07-18T22:17:16.137
> 
> 标签：wcf, entity-framework, entity-framework-4, wcf-data-services, odata

我正在研究如何围绕实体框架上下文创建 WCF 数据服务，并且也可以将其用作 EF 上下文。

[在 30 分钟内为 StackOverflow 创建一个 OData API，包括 XML 和 JSON](http://www.hanselman.com/blog/CreatingAnODataAPIForStackOverflowIncludingXMLAndJSONIn30Minutes.aspx)

我真的刚开始看这个，但我想知道业务逻辑会去哪里？作为一项服务，我希望您不能在没有经过验证的情况下随意添加/删除等。

如果我编写一个 MVC 应用程序来使用此服务，我将如何最好地实现业务逻辑。不是您可以使用属性进行的简单属性级别验证，而是需要首先检查数据存储等的更复杂的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:35:08.163

您可以将一些放在数据服务类中，但您可以在那里做什么和不能做什么受到限制。然后当然你可以把一些放在服务上面的客户端中，但这也不理想。

我只花了几周时间使用 WCF 数据服务，但您强调了它的（其中一个）大问题 - 缺乏灵活性。它非常适合快速开发和开发 LOB 应用程序，但任何经过深思熟虑的设计都很难实现。我需要在我的实体模型中包含对象只是为了让它们通过服务公开，而我只是想用一个简单的属性来扩展这些类，我非常头疼。

我只建议将 WCF 数据服务用于需要极快开发的非常简单的应用程序 - 例如，一两天的开发周期。其他任何事情都值得用常规的 WCF 服务彻底完成，编写自己的数据层等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T03:08:52.103

听起来您需要一个自定义数据服务提供商[（msdn 链接）](http://msdn.microsoft.com/en-us/data/gg191846)。它们非常强大，可以让你完全控制所有的读/写逻辑。

例如，我编写了一个在更新提供程序中强制执行我们的许可逻辑的程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T15:59:18.300

根据您的具体需求，听起来 Web API 可能是一个不错的选择。Web API 可能永远无法获得 WCF 数据服务所具有的全部 OData 支持，但它确实使某些事情变得更容易（例如添加业务逻辑）。我非常有信心 Web API 对 OData 的初始支持将涵盖大量用例，并且这种支持会随着时间的推移而增长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T14:58:51.767

虽然自定义数据提供者肯定会做任何你想做的事情，如果你有一个复杂的架构，这对你来说可能是一个很好的解决方案，但当我试图通过客户端保存回来并发现我必须这样做时，我并没有很兴奋实现我的 IUpdatable 接口作为我的上下文的一部分。（我试图从我的上下文和数据服务中构建一个存储库模式）。

我确信它对许多人来说非常有用，但我真的只需要 EntityProvider 已经包含的功能，并且在我的项目计划中没有时间来确定自定义提供程序的 Iupdatable 部分，所以我的团队，特别是[Geoff](https://stackoverflow.com/users/1097/geoff)，坚持使用实体提供程序并使用更改和查询拦截器通过服务器上的业务逻辑类路由数据服务请求。它提供了一个中心控制点。我们使用这些来提供安全检查、运行计算和其他插入/更新等操作。结果非常好。您还可以使用服务方法作为另一种向客户提供特定业务逻辑功能的方式。

# c# - GTK# 窗口不可调整大小的错误

> ID：11551204
> 
> 赞同：1
> 
> 时间：2012-07-18T22:17:53.170
> 
> 标签：c#, mono, gtk, gtk#, gtkmm

我试图通过调用使窗口不可调整大小`myWindow.Resizable = false;`，但是当我这样做时，窗口的右边缘和底部会捕捉到按钮，而不是保持我指定的默认大小。是什么赋予了？

```
using System;
using Gtk;

class WindowTester
{
    static void Main ()
    {

        Application.Init ();
        Window myWindow = new Window ("This is a window");
        myWindow.DeleteEvent += OnDelete;
        myWindow.Resizable = false;    
        myWindow.SetDefaultSize(600, 400);

        //Put a button in the Window
        Button button = new Button ("Click");
        button.SetSizeRequest(75,30);
        Fixed container = new Fixed();
        container.Put(button, 500, 350);

        myWindow.Add (container);
        myWindow.ShowAll ();
        Application.Run ();
    }

    static void OnDelete (object o, DeleteEventArgs e)
    {
        Application.Quit ();
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:54:14.577

解决方法是在窗口的右下角添加一个空标签。他们应该真的解决这个问题。

# javascript - 如果我用 javascript 隐藏文本输入元素，其他 javascript 函数仍然可以访问输入的值吗？

> ID：11551207
> 
> 赞同：0
> 
> 时间：2012-07-18T22:18:02.823
> 
> 标签：javascript, jquery, html

我正在尝试使用此功能：

```
function storagecalc(){
var thediv=document.forms["boxes"];
var boxno=thediv.elements["numbofboxes"];
var howmany =0;    //If the textbox is not blank    */
if(boxno.value!="")    
{        
howmany=parseInt(quantity.value);    
}
return howmany;
document.getElementById('numberprice').innerHTML = "£"+howmany;
} 
```

要获取此处输入的值：

```
<form action="" id="boxes">

<input type="text" id="numbofboxes" value="" name="boxnumber"/>

<button id="smtbxno" onclick="storagecalc">

<img src="images/tick.gif" alt="proceed"/>

</button>

</form> 
```

并在此处显示：

```
<div id="grandtotal">

<p class="calctitles">

Grand Total

</p>

<p id="numberprice">

</p>

</div> 
```

当我在文本框中输入一个值并单击按钮时，什么都没有发生，这是因为该按钮还有隐藏自身的 jQuery 和单击时的文本框吗？如果没有任何关于为什么它不起作用的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:23:03.800

> 如果我用 javascript 隐藏文本输入元素，其他 javascript 函数仍然可以访问输入的值吗？

每一段可以获取输入元素引用（通过变量，带有 DOM 选择器）的 javascript 都可以访问它的值。该元素的可见性对任何这些操作都没有影响。仅当您将其从 DOM 中分离出来时，其他功能才无法使用 DOM 方法选择它。

* * *

好的，您给我们的文件有一些错误：

*   `<button onclick="storagecalc">`不执行任何操作，您将需要调用函数：`<button onclick="storagecalc();">`. 只有当用js给`onclick` *属性*赋值监听器时，才需要使用函数对象( `document.getElementById("smtbxno").onclick = storagecalc;`)。
*   在函数本身中，您使用的变量`quantity`是`undefined`（并引发异常）。我不知道如何解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:59:26.107

您正在分配函数但没有调用它：

```
<button id="smtbxno" onclick="storagecalc()" ... >...</button>
------------------------------------------^ 
```

此外，表单元素集合的成员应该由**name**引用，而不是 id。

```
var boxno=thediv.elements["boxnumber"]; 
```

我不明白为什么您有不同的名称和 ID，这会混淆 IE，至少在旧版本中，它不知道区别。

# php - symfony2：在课堂上插入王牌

> ID：11551209
> 
> 赞同：0
> 
> 时间：2012-07-18T22:18:22.780
> 
> 标签：php, symfony-2.1

当我尝试在类中添加 ace 时出现此错误：

> 警告：PDO::quote() 期望参数 1 是字符串，对象在 .../vendor/doctrine/dbal/lib/Doctrine/DBAL/Connection.php 第 568 行

我的代码：

```
$oid = new ObjectIdentity('class', new Post());

$aclProvider = $this->get('security.acl.provider');

try {
    $acl = $aclProvider->createAcl($oid);
} catch (AclAlreadyExistsException $exists) {
    return;
}

$builder = new MaskBuilder();
$builder->add('view');
$mask = $builder->get();

$acl->insertClassAce(new RoleSecurityIdentity('IS_AUTHENTICATED_ANONYMOUSLY'), $mask);

$aclProvider->updateAcl($acl); 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:58:17.823

尝试像这样定义您的对象身份：

```
$entityoid = new ObjectIdentity('class', 'YourComp\\YourBundleBundle\\Entity\\Post'); 
```

# c# - 如何使用 ADOX 在 C# 中设置 MS Access 字段标题属性

> ID：11551211
> 
> 赞同：1
> 
> 时间：2012-07-18T22:18:26.727
> 
> 标签：c#, ms-access, adox

你能告诉我如何使用 ADOX 在 C# 中设置 MS Access 字段标题属性吗？

我已经尝试过这个设置：

```
colFName.Properties["Caption"].Value = "First Name"; 
```

和

```
colFName.Properties["Jet OLEDB:Caption"].Value = "First Name"; 
```

但我遇到以下错误消息：

* * *

## **ADODB.属性**

## **在与请求的名称或序号对应的集合中找不到项目。**

谢谢

# c# - SilverSprite 作为白页运行

> ID：11551212
> 
> 赞同：0
> 
> 时间：2012-07-18T22:18:29.147
> 
> 标签：c#, silverlight, xna, silverlight-5.0

我一直在尝试使用 Silversprite 将我的一些 XNA 游戏带到网络上。但是，每当我运行这些应用程序时，它们都会显示为白屏。

我想知道是否有人对如何解决此问题有任何想法。

我完全按照教程进行（除了用我自己的替换他们使用的 XNA 应用程序）。没有任何工作。

有没有人想办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:46:17.630

使用 ExEn 而不是 Silversprite。

[http://exen.codeplex.com](http://exen.codeplex.com)

ExEn 是 XNA API 子集的高性能实现，可在 Silverlight、iOS 和 Android 上运行。

它已准备好生产。

以下是一些示例：

*   我的示例（如果需要，我可以将源代码上传给您）：

    *   吃豆人：http: [//vackup.blogspot.com.ar/2011/09/xna-3-pacman-ported-to-silverlight.html](http://vackup.blogspot.com.ar/2011/09/xna-3-pacman-ported-to-silverlight.html)

    *   乒乓：[http ://www.mylittlebets.com/Pong/TestPage.html](http://www.mylittlebets.com/Pong/TestPage.html)

*   来自 ExEn 创建者：

    *   [http://andrewrussell.net/2011/02/exen-home-stretch-y-arms/](http://andrewrussell.net/2011/02/exen-home-stretch-y-arms/)

    *   [http://andrewrussell.net/lightblocks/](http://andrewrussell.net/lightblocks/)

# ruby-on-rails - 如何在 rails_admin 的列表操作中显示图像？

> ID：11551214
> 
> 赞同：4
> 
> 时间：2012-07-18T22:18:35.760
> 
> 标签：ruby-on-rails, rails-admin

我有一个自关联模型，它允许用户定义“父照片”，以便将它们组合在一起。

我的模型：

```
class Photo < ActiveRecord::Base

  attr_accessible :image, :parent_photo

  has_attached_file :image, :styles => { :medium => "300x300>", :thumb => "100x100>" }

  validates_attachment :image, 
    :presence => true,
    :size => { :in => 20..2000.kilobytes },
    :content_type => { :content_type => [ 'image/jpeg', 'image/png' ] }

  belongs_to :parent, class_name: "Photo", foreign_key: :parent_photo

  def associated_photos
    Photo.find_by_parent_photo(id)
  end

end 
```

在我的 rails_admin 初始化程序中：

```
..

  config.model Photo do

    list do
      field :image
      field :associated_photos     
    end
  end
end 
```

如何检索实际缩略图以用于列表操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T23:59:59.877

这似乎[在 wiki 上的](https://github.com/sferik/rails_admin/wiki/Railsadmin-DSL)“字段 - 输出格式”标题下得到解决。

这样的事情会起作用吗？

```
config.model Photo do
  list do
    field :image do
      formatted_value do
        bindings[:view].tag(:img, { :src => bindings[:object].image.url }) << value
      end
    field :associated_photos     
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-02T17:07:20.437

要显示图像字段：

```
config.model Photo do
  list do
    field :image do
      pretty_value do
        bindings[:view].tag(:img, { :src => bindings[:object].image.url(:thumb) })
      end
    end
  end
end 
```

# api - Aweber API 变量 $account_id 和 $list_id 是什么？

> ID：11551215
> 
> 赞同：4
> 
> 时间：2012-07-18T22:18:36.680
> 
> 标签：api, subscriber, aweber

你可以在这里查看： [https ://labs.aweber.com/docs/code_samples/subs/create](https://labs.aweber.com/docs/code_samples/subs/create)

通过 api 向列表中添加新订阅者的脚本需要这两个信息……只是我一生都无法弄清楚这两个变量是什么！我已经了解了我的 Aweber 订阅者帐户和我的 Aweber Labs 帐户的各个方面……而且我在任何地方都找不到对这些变量的任何引用。我已经向他们提交了一些票，但尚未收到任何回复。

有人在这里有什么想法吗？我已经尝试了我的帐户名称，我的列表名称，但无济于事！

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～

好的，我知道了！在进行某些 api 调用后，您可以通过在 aweber api 中转储一些其他变量来获取这两个变量的值。

首先获取帐户ID：

```
$account = $aweber->getAccount($accessKey, $accessSecret); 
```

然后是 vardump 或 print_r $account。

接下来我们得到列表ID：

```
$account = $aweber->getAccount($accessKey, $accessSecret);
$list_url = 'https://api.aweber.com/1.0/accounts/<id>/lists';
$lists = $account->loadFromUrl($list_url); 
```

然后是 vardump 或 print_r $lists。

你都准备好了！我很高兴我发现了这一点，这该死的花了很长时间。希望这可以节省一些时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-02T16:51:03.523

我也为找到 $list_ID 而苦恼，所以去停用列表，并创建一个新列表，并“发现”如果您将鼠标悬停在停用按钮上，您将获得一个可以复制的 url，这同时提供了 %account和 %list Id

[https://www.aweber.com/users/lists/deactivate/$accountID/$lisID](https://www.aweber.com/users/lists/deactivate/) _

像这样...... [https://www.aweber.com/users/lists/deactivate/123456/123456](https://www.aweber.com/users/lists/deactivate/123456/123456)

希望这将有助于某人，因为它是一个超级简单的解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-01T09:57:41.770

正确的答案是安妮艾伦的答案，但是......

检查 /accounts 端点的返回。它应该返回与您在链接中检测到的帐户 ID 相同的帐户 ID，但我遇到了它们不同的情况（很奇怪，不是吗？）。使用 /accounts 端点和其他端点返回的帐户 id 来检索列表，订阅者等将开始工作。就像某些帐户有两个 ID，一个部分有效，另一个完全有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T16:29:50.640

首先，登录。

1) 点击**报告>设置**。您的**帐户 ID**将显示在框中，例如： `?id=XXXXX`

2) 单击**列表选项>列表设置**。在那里，您将在名称下看到**列表 ID**。

ps 要添加订阅者，您可以使用这个 -[自动添加到 weber 列表中](https://stackoverflow.com/questions/8579206/automatically-add-into-aweber-list)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T10:07:11.513

让我告诉您如何获取 $list_id 值...登录到您的 AWeber 帐户，然后创建一个新的列表，仅复制列表名称中的整数值。

# ruby-on-rails - Ruby on Rails 不需要的对象缓存行为

> ID：11551216
> 
> 赞同：0
> 
> 时间：2012-07-18T22:18:38.900
> 
> 标签：ruby-on-rails, class, caching, activerecord

我正在尝试运行一个简单的循环来增加数据库表中的属性，并且没有按预期增加。想象一下，我们的应用程序是一个每日交易网站。我正在使用 Rails 3.0.1，作为记录。

```
class Deal
  has_many :orders
end

class Order
  belongs_to :deal
end 
```

订单也有一个属性“数量”——例如某人购买了几件相同的东西。如果有人在购物车中购买了一堆订单，我们希望统计每笔交易的总数，以跟踪我们在每笔交易中卖出了多少。

```
@new_orders.each do |order|
  order.deal.update_attribute(:order_count, order.deal.order_count + order.quantity)
end 
```

首先，忽略这样一个事实，即可能有更好的方法来写这个。这是一个人为的例子，以达到我的观点。

现在，假设我们当前的情况是有人在购物车中购买了 3 个相同交易的订单（没有充分的理由 - 这个例子有点做作）。假设每个订单的数量为 1。

我本来预计，在循环结束时，交易的数量是 3。但是当我运行这段代码时，无论是在测试中、在浏览器上还是在控制台中，我都会得到 1。

似乎在循环的每次迭代中，当它拉取“order.deal”时——因为每个订单恰好属于同一个交易，所以它从缓存中拉取交易。因此，假设在此循环开始之前，交易的 order_count 为 0，每次它提取一个 order_count 为 0 的交易的缓存副本。

这是预期的行为吗？有没有办法关闭这种类型的缓存？更奇怪的是，我的一位同事试图在他的项目中运行类似的循环并得到预期的总数。还是我完全错过了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:47:49.017

你没有保存记录。在增量之后（但在循环内），您需要：

```
order.deal.save 
```

~~~~~~

根据您的评论：

```
@new_orders.each do |order|
  order_quantity = order.quantity
  order.reload
  order.deal.update_attribute(:order_count, order.deal.order_count + order_quantity)
end 
```

这会将新订单数量保存在变量中，从数据库重新加载订单，然后进行更新。

# ruby-on-rails - ruby on rails：公共目录，404

> ID：11551224
> 
> 赞同：0
> 
> 时间：2012-07-18T22:19:19.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api

**文件**app/views/layouts/application.html.erb

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <%= csrf_meta_tag %>
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
    <%= stylesheet_link_tag 'blueprint/print',  :media => 'print' %>
    <!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->
    <%= stylesheet_link_tag 'custom', :media => 'screen' %>
  </head>
  <body>
    <div class="container">
      <header>
        <%= image_tag("logo.png", :alt => "Sample App", :class => "round") %>
        <nav class="round">
          <ul>
            <li><%= link_to "Home", '#' %></li>
            <li><%= link_to "Help", '#' %></li>
            <li><%= link_to "Sign in", '#' %></li>
          </ul>
        </nav>
      </header>
      <section class="round">
        <%= yield %>
      </section>
    </div>
  </body>
</html> 
```

现在按顺序。

功能

```
stylesheet_link_tag 'blueprint/screen', :media => 'screen' 
```

灵魂回报：

```
<link href="/stylesheets/blueprint/screen.css" media="screen" rel="stylesheet"type="text/css" /> 
```

**但**她回来了：

```
<link href="/assets/blueprint/screen.css" media="screen" rel="stylesheet" type="text/css" /> 
```

同样的问题：

```
image_tag("logo.png", :alt => "Sample App", :class => "round") 
```

服务器给出 404 错误。[http://savepic.ru/3169970.jpg](http://savepic.ru/3169970.jpg)

我还以为是书上的错别字。但是 api.rubyonrails.org 说这本书不会出错。[http://savepic.ru/3168946.jpg](http://savepic.ru/3168946.jpg)

public\stylesheets\blueprint 中的 CSS 框架

public\images\logo.png 中的LOGO

如何解决这个问题？又或者是我的疏忽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:32:04.343

那不是预期的行为。在此处阅读有关新资产管道的信息：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

如果您正在关注一本书，请使用 rvm(rvm.io) 并设置该书使用的确切 ruby​​ 和 rails

# java - 如何减少 ssl 握手的等待时间？

> ID：11551226
> 
> 赞同：3
> 
> 时间：2012-07-18T22:19:24.997
> 
> 标签：java, networking, network-programming, sslhandshakeexception

我有来自[http://sanjaal.com/java/tag/get-public-key-of-ssl-certificate-in-java/](http://sanjaal.com/java/tag/get-public-key-of-ssl-certificate-in-java/)的以下代码，它创建一个套接字并启动 ssl 握手。

```
SSLSocketFactory factory = HttpsURLConnection
.getDefaultSSLSocketFactory();

System.out.println("Creating a SSL Socket For "+hostname+" on port "+port);

SSLSocket socket = (SSLSocket) factory.createSocket(hostname, port);

socket.startHandshake();
System.out.println("Handshaking Complete"); 
```

问题是，如果握手无法建立，在我看到异常之前有很长的等待时间：Connection timed out

如何设置最长等待时间？以及确保 ssl 握手不会成功的合适的最短时间是多少。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T22:38:56.643

“连接超时”与握手甚至 SSL 无关。当您调用 startHandshake() 时不会发生这种情况：它会在您创建套接字时发生。您的堆栈跟踪会告诉您这一点。

为了减少它，使用默认构造函数创建一个 Socket() ；调用connect(SocketAddress地址，长时间超时)；然后如果成功调用 SSLSocketFactory.createSocket(Socket, ...) 将其包装在 SSLSocket 中。

注意你引用的博客质量确实很差。它的一些问题：

1.  SSL 证书不会“启用加密”。它主要用于身份验证。它还在导致会话密钥的握手中扮演一个次要的、无关紧要的角色。

2.  TLS 提供的不仅仅是“防止 [ing] 窃听、篡改和消息伪造”：例如，它还可以防止重放和中间人攻击；它提供了更多的加密可能性，而不仅仅是具有 1024 或 2048 字节密钥的 RSA。

3.  建议“在浏览器级别，这仅意味着浏览器已经验证了服务器的证书”，并且为了安全起见，用户/应用程序必须“使用证书中包含的公钥加密某些内容并确保服务器可以理解它’完全是胡说八道。在 SSL 握手期间，浏览器已经通过数字签名机制检查了服务器是否拥有该证书。

4.  所有这一切：“锁定的挂锁”图标与服务器的 URL、DNS 名称或 IP 地址无关——否则是一种常见的误解。只有在服务器证书本身中指定 URL、名称或地址时，才能安全地建立这种绑定。'是完全不正确的。HTTPS*包括*根据嵌入在证书中的内容检查主机名：嵌入在证书中的内容被放在那里并由签名机构检查。

不要依赖这样的未经审查的未经审查的网站。使用官方产品文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T10:00:12.150

在执行 sslSocket.startHandshake() 之前；使用 sslSocket.setSoTimeout(timeout);

setSoTimeout 是读取超时，因此您在 setSoTimeout 中提供的超时值也适用于握手。

# android - 如何在 Android 的 ListView 中的列表项上设置默认选中项？

> ID：11551238
> 
> 赞同：0
> 
> 时间：2012-07-18T22:20:27.637
> 
> 标签：android, android-listview

我有一个 Checked ListView，里面有一些项目。这只是我如何创建它的一个简单示例：

```
public class SettingsActivity extends ListActivity {

  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      List<String> settingsitems = new ArrayList<String>();
      settingsitems.add("Item A");
      settingsitems.add("Item B");

      setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, settingsitems));

... 
```

如何设置加载列表时要检查的默认项目？例如，当显示列表时，我只想`Item B`被检查。

我尝试在之前和之后添加以下内容`setListAdapter`，但它不起作用：

```
this.getListView().setItemChecked(1, true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:37:52.110

[setItemChecked() 方法](http://developer.android.com/reference/android/widget/AbsListView.html#setItemChecked%28int,%20boolean%29)状态的文档：

> The is only valid if the choice mode has been set to CHOICE_MODE_SINGLE or CHOICE_MODE_MULTIPLE.

ListView 的默认选择模式是 CHOICE_MODE_NONE，这意味着如果您没有明确地将其设置为 SINGLE 或 MULTIPLE，您对 setItemChecked() 的调用将不会执行任何操作。

所以在调用 setItemChecked() 之前尝试添加这一行：

```
this.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

# idl-programming-language - 如何在 IDL 绘图标题中使用多个变量？

> ID：11551247
> 
> 赞同：1
> 
> 时间：2012-07-18T22:21:36.343
> 
> 标签：idl-programming-language

在 IDL 中，我想使用在程序中计算的变量名称和它们的值为我的绘图创建一个标题。对于单个变量，TITLE = var_name。

如何在 TITLE 关键字中列出两个变量名及其值？像 TITLE = "var1:" var1 "var2:" var2 这样的东西不起作用，引号和逗号的组合似乎也不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:11:26.367

`TITLE`关键字需要一个字符串。如果您有多个名称和值，则必须决定如何将它们变成一个字符串。例如，您可以以一种简单的方式对结构执行此操作：

```
IDL> s = { var1: 0., var2: 3\. }
IDL> t = ''
IDL> for i = 0, n_tags(s) - 1L do $
IDL>   t += string((tag_names(s))[i], s.(i), format='(A, ": ", F, " ")')
IDL> print, t
VAR1:       0.0000000 VAR2:       3.0000000 
```

当然，您可以随心所欲地使用格式代码。

# vba - 需要一种更快的方法来匹配这些数据集

> ID：11551254
> 
> 赞同：0
> 
> 时间：2012-07-18T22:22:17.337
> 
> 标签：vba, excel

我有一组 Excel 工作表，每个设置如下：

```
ID | imageName
--------------
1    abc.jpg
2    def.bmp
3    abc.jpg
4    xyz123.jpg 
```

此工作表对应于一个文件夹，其内容如下：

```
abc.pdf
ghijkl.pdf
def.pdf
def.xls
x-abc.pdf 
```

我正在尝试生成一个报告，该报告将每个实例`imageName`的最低值`ID`与与之匹配的 PDF 相匹配，并且还识别`imageName`工作表中不匹配的 PDF 和文件夹中不匹配的 PDF。带有“x-”前缀的文件名等同于没有前缀的文件名，因此该数据集的报告如下：

```
ID  imageName   filename
-----------------------
1   abc.jpg     abc.pdf
1   abc.jpg     x-abc.pdf
2   def.bmp     def.pdf
4   xyz123.jpg 
                ghijkl.pdf 
```

我目前的解决方案如下：

```
'sheetObj is the imageName set, folderName is the path to the file folder
sub makeReport(sheetObj as worksheet,folderName as string)

dim fso as new FileSystemObject
dim imageDict as Dictionary
dim fileArray as variant
dim ctr as long

'initializes fileArray for storing filename/imageName pairs
redim fileArray(1,0) 

'returns a Dictionary where key is imageName and value is lowest ID for that imageName
set imageDict=lowestDict(sheetObj)

'checks all files in folder and populates fileArray with their imageName matches
for each file in fso.getfolder(folderName).files
 fileFound=false
 'gets extension and checks if it's ".pdf"
 if isPDF(file.name) then 
  for each key in imageDict.keys
   'checks to see if base names are equal, accounting for "x-" prefix
   if equalNames(file.name,key) then 
    'adds a record to fileArray mapping filename to imageName
    addToFileArray fileArray,file.path,key  
    fileFound=true
   end if
  next
  'checks to see if filename did not match any dictionary entries
  if fileFound=false then 
   addToFileArray fileArray,file.path,""
  end if
 end if
next

'outputs report of imageDict entries and their matches (if any)
for each key in imageDict.keys
 fileFound=false
 'checks for all fileArray matches to this imageName
 for ctr=0 to ubound(fileArray,2)
  if fileArray(0,ctr)=key then
   fileFound=true
   'writes the data for this match to the worksheet
   outputToExcel sheetObj,key,imageDict(key),fileArray(0,ctr)
  end if
 next
 'checks to see if no fileArray match was found
 if fileFound=false then
  outputToExcel sheetObj,key,imageDict(key),""
 end if
next

'outputs unmatched fileArray entries
for ctr=0 to ubound(fileArray,2)
  if fileArray(1,ctr)="" then
   outputToExcel sheetObj,"","",fileArray(0,ctr)
  end if
next 
```

该程序成功输出报告，但速度很慢。由于嵌套的 For 循环，随着`imageName`条目和文件数量的增长，处理它们的时间呈指数增长。

有没有更好的方法来检查这些集合中的匹配项？如果我制作`fileArray`成字典可能会更快，但字典不能有重复的键，并且此数据结构需要在其字段中具有重复的条目，因为文件名可能匹配多个图像名称，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:53:18.207

感谢您的回复。

我最终通过在 中创建一个文件名数组来解决这个问题`folderName`，使用 WinAPI`FindFirstFile`和`FindNextFile`函数来遍历文件夹，因为它是通过网络进行的，所以遍历返回的集合`fso.getfolder(foldername).files`太慢了。

然后我从文件名数组中创建了一个文件名/基本名字典，如下所示：

```
key         | value
-----------------------
abc.pdf     | abc
x-lmnop.pdf | lmnop
x-abc.pdf   | abc 
```

从这本字典中，我制作了一个反向字典`fileConcat`，将重复的基本名称中的键连接起来，如下所示：

```
key         | value
-----------------------
abc         | abc.pdf,x-abc.pdf
lmnop       | lmnop.pdf 
```

然后，我能够将每个`imageDict`键的基本名称与 in 中的一个键匹配`fileConcat`，然后遍历由以下方式生成的串联值数组：

`split(fileConcat(key))`

其中`key`是`imageDict`密钥的基本名称。

正如@chrisneilsen 评论的那样，消除嵌套的 For 循环会将增长率降低到`O(ImageNames)+O(Files)`，并且该函数现在以令人满意的速度执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:28:13.593

这应该很快找到第一个。你可以在最后一个 if 语句的内部做任何你想做的事情。它使用 ADO 记录集，该记录集应该比嵌套的 for 循环更快

```
Sub match()
Dim sheetName As String: sheetName = "Sheet1"
Dim rst As New ADODB.Recordset
Dim cnx As New ADODB.Connection
Dim cmd As New ADODB.Command

    'setup the connection
    '[HDR=Yes] means the Field names are in the first row
    With cnx
        .Provider = "Microsoft.Jet.OLEDB.4.0"
        .ConnectionString = "Data Source='" & ThisWorkbook.FullName & "'; " & "Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'"
        .Open
    End With

    'setup the command
    Set cmd.ActiveConnection = cnx
    cmd.CommandType = adCmdText
    cmd.CommandText = "SELECT * FROM [" & sheetName & "$]"
    rst.CursorLocation = adUseClient
    rst.CursorType = adOpenDynamic
    rst.LockType = adLockOptimistic

    'open the connection
    rst.Open cmd

    Dim fso As FileSystemObject: Set fso = New FileSystemObject
    Dim filesInFolder As files, f As File
    Set filesInFolder = fso.GetFolder("C:\Users\Bradley\Downloads").files

    For Each f In filesInFolder
        rst.MoveFirst
        rst.Find "imageName = '" & f.Name & "'", , adSearchForward
        If Not rst.EOF Then
            Debug.Print rst("imagename") & "::" & rst("ID") '<-- Do what you need to do here
        End If
    Next f

End Sub 
```

仅供参考：我引用[了这篇](https://stackoverflow.com/a/2488991/726127)文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:43:01.603

另一种方式。

```
Sub Sample()
    Dim ws As Worksheet, wstemp As Worksheet
    Dim FileAr() As String
    Dim n As Long, wsLRow As Long

    Set ws = Sheets("Sheet1") '<~~ Which has imageNames   
    wsLRow = ws.Range("A" & ws.Rows.Count).End(xlUp).Row

    n = 0

    strFile = Dir("C:\Temp\*.*")

    Do While strFile <> ""
        n = n + 1
        ReDim Preserve FileAr(n)

        If Mid(strFile, Len(strFile) - 3, 1) = "." Then
            FileAr(n) = Mid(strFile, 1, Len(strFile) - 4)
        ElseIf Mid(strFile, Len(strFile) - 4, 1) = "." Then
            FileAr(n) = Mid(strFile, 1, Len(strFile) - 5)
        Else
            FileAr(n) = strFile
        End If

        strFile = Dir
    Loop

    Set wstemp = Worksheets.Add
    wstemp.Range("A1").Resize(UBound(FileAr) + 1, 1).Value = Application.Transpose(FileAr)

    ws.Range("B1:B" & wsLRow).Formula = "=IF(ISERROR(VLOOKUP(A1," & wstemp.Name & _
                                        "!A:A,1,0)),"""",VLOOKUP(A1," & wstemp.Name & "!A:A,1,0))"

    ws.Range("B1:B" & wsLRow).Value = ws.Range("B1:B" & wsLRow).Value

    Application.DisplayAlerts = False
    wstemp.Delete
    Application.DisplayAlerts = True
End Sub 
```

# javascript - 使用 JQuery 库跟踪丢弃的对象

> ID：11551257
> 
> 赞同：0
> 
> 时间：2012-07-18T22:22:22.770
> 
> 标签：javascript, jquery, drag-and-drop

我想知道以下项目的最佳实践是什么。我将使用 JQuery 进行拖放测验功能。在测验结束时，当按下提交按钮时，我想计算正确答案的正确框数。这意味着并非所有的盒子都会被丢弃。

例如，我正在考虑使用 Javascript 类来实例化对象（在本例中为框）并计算所有“droppedTrue”值设置为 true 的对象。或者我想我可以以某种方式在每个框（可能是 div）的 javascript 中设置一个属性，所以当按下提交按钮时，它会通过带有某个标记的所有框？

我想我的问题归结为如何为实际放置在正确盒子上的 div 设置某种类型的标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:14:07.093

好的，就是这样。我不确定您对两种猜测限制的意思是哪种情况（无论是答案还是问题）。我把它放在答案上，但你应该可以很容易地把它翻过来。

[演示](http://jsfiddle.net/Fauhq/1/)

# algorithm - 带方向的最近邻算法（左/右/上/下）

> ID：11551263
> 
> 赞同：3
> 
> 时间：2012-07-18T22:23:02.783
> 
> 标签：algorithm, math, optimization, data-structures, geometry

在 2D 几何中有*n 个*随机点，对于每个点，`p`我需要找到 4 个*（如果不存在，则更少）*最近的点*(* `qa`*,* `qb`*,* `qc`*,* `qd`*)*，其中*qa*是最近的***左上***点，*qb*是最近的***右上***点，*qc*是最接近***的左下***点，*qd*是最接近点*p****的右下***点。具有相同的*x*坐标被认为是左，具有相同的*y*坐标被认为是底部。

 ***存储点坐标及其最近邻引用的最佳***数据结构是什么？***什么***算法***最快或执行得最多？

注意：这个问题远远超过最近邻算法，因为每个点需要 4 个相邻点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:33:51.517

您可以尝试空间填充曲线和四叉树数据结构。空间填充曲线将 2 维减少到 1 维，并且在 2 个网格的功率下效果最佳。四叉树将平面分成 4 个四边形。空间填充曲线是采用 2 个变量并给出 1 个数字作为结果的数学函数。它也可以有 3,4,5 个变量，但最简单的是 2。因为它给出 1 个数字并接受 2 个变量，所以它可以帮助解决二维或更多维度的问题。

1.  [http://social.technet.microsoft.com/wiki/contents/articles/9694.tuning-spatial-point-data-queries-in-sql-server-2012.aspx](http://social.technet.microsoft.com/wiki/contents/articles/9694.tuning-spatial-point-data-queries-in-sql-server-2012.aspx)
2.  [https://www.google.com/search?q=nearest+neigbor+search+space+filling+curve](https://www.google.com/search?q=nearest+neigbor+search+space+filling+curve)

![在此处输入图像描述](../Images/efaa54afa142f2981e44e4c57ec9542f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:50:39.430

使用 k-dim 树索引（在这种情况下 k=2），因此是四叉树。这应该允许您有效地搜索您的点的左、右、上和下空间。您可能可以为此在 dmbs 中制定一个查询，但从概念上讲，我会搜索点自己的“四边形”，然后根据四边形中点的位置，我们可以知道我们是否在一个方向上找到了最近的点。然后我们知道要搜索其余点的四边形。

由于您对每个点都执行此操作，因此您知道存在对称性，即点 P1 将 P2 作为最近的左邻，因此 P2 将 P1 作为最近的右邻。所以相应地更新点对象。***

# javascript - 多个复选框选择延迟以检查其他复选框更改

> ID：11551266
> 
> 赞同：3
> 
> 时间：2012-07-18T22:23:39.737
> 
> 标签：javascript, jquery, jquery-mobile, asp-classic

我被迫使用 jQuery Mobile，尽管它是一个构建良好的系统，但我还是有些犹豫。所以，我有一个表单可以在任何复选框更改时提交。客户想要它，以便当他们单击一个页面时，页面会等待提交一段时间，因此如果选择了另一个，则不会触发先前的请求而新的请求会触发。它本质上是为了减少即时性并允许更有效的过滤/请求。我的代码是这样的：

```
$( function() {

    var sForm = "form[name='Waves']",
        sCboxes = "input[type='checkbox']",
        sWaves = "";

    var $Cboxes = $(sForm + " " + sCboxes),
        sChecked = sCboxes + ":checked";

    $Cboxes.change( function(event) {

        var $this = $(this);

        if ( $this.attr("id") != "ClearAll" ) {

            console.debug($(this));

            console.debug('Changing page.');

            sWaves = "";

            // Form the string for the selected waves with standard check-if-it's-the-last
            // element logic for comma generation.

            $.each( $(sChecked) , function(i, v) {

                var $this = $(this);

                var iIndex = v.value;

                sWaves += iIndex + ( ( i == $(sChecked).length - 1 ) ? "" : "," );

            } );

            console.debug("Waves to select: " + sWaves);

            $.mobile.changePage("default.asp", {

                data: { Wave: sWaves },     // Submit the previously formed string

                type: "post"

            } );

            //$(sForm).submit();

        } else {

            $(sChecked).add( $(this) ).attr("checked", false).checkboxradio("refresh");

            $.mobile.changePage("default.asp", {

                data: { Wave: "" },

                type: "post"

            } );

        }

    } );

    $("#ClearAll").click( function(event) {

        event.preventDefault();

    } );

    $(".slideout").click( function(){

        $(this).parents(".ui-collapsible").find(".ui-icon-minus").click();

    } );

} ); 
```

表单的 HTML：

```
<form ACTION="<%=ASP_SELF()%>" ID="Waves" METHOD="post" NAME="Waves">

<% ' Put the scripts we need here so that it loads with the page. %>
<script SRC="/base/scripts/scripts.js"></script>

<fieldset DATA-ROLE="controlgroup" DATA-TYPE="horizontal" STYLE="margin-left:5px; margin-bottom:0px; ">
       <input TYPE="checkbox" NAME="#" ID="#" VALUE="Select Waves" CLASS="custom"   />
       <label CLASS="no-hover" FOR="#">&nbsp;Waves:&nbsp;</label>
       <input TYPE="checkbox" NAME="Wave1" ID="Wave1" VALUE="1" CLASS="custom" STYLE="width:70px !important; " <% If Instr(request("Wave"),"1") OR WaveOne = "YES" Then response.write " checked=""checked""" End If %> />
       <label FOR="Wave1">&nbsp;1&nbsp;</label>
       <input TYPE="checkbox" NAME="Wave2" ID="Wave2" VALUE="2" CLASS="custom" STYLE="width:70px !important; " <% If Instr(request("Wave"),"2") OR WaveTwo = "YES" Then response.write " checked=""checked""" End If %> />
       <label FOR="Wave2">&nbsp;2&nbsp;</label>
       <input TYPE="checkbox" NAME="Wave3" ID="Wave3" VALUE="3" CLASS="custom" STYLE="width:70px !important; "<% If Instr(request("Wave"),"3") OR WaveThree = "YES" Then response.write " checked=""checked""" End If %> />
       <label FOR="Wave3">&nbsp;3&nbsp;</label>
       <input TYPE="checkbox" NAME="Wave4" ID="Wave4" VALUE="4" CLASS="custom" STYLE="width:70px !important; "<% If Instr(request("Wave"),"4") OR WaveFour = "YES" Then response.write " checked=""checked""" End If %> />
       <label FOR="Wave4">&nbsp;4&nbsp;</label>

       <input TYPE="checkbox" NAME="ClearAll" ID="ClearAll" VALUE="Clear" CLASS="custom" $('input[data-type="search"]').TRIGGER("CHANGE").VAL(""); />
       <label FOR="ClearAll">&nbsp;Clear&nbsp;&nbsp;</label>
</fieldset>
    </form> 
```

我需要将`$.mobile.changePage`呼叫延迟足够长的时间以允许其他相关复选框（在同一字段集中）也可以切换。我很感激任何意见！这是一件非常重要的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:38:10.033

```
var timer;
var waitTime = 2000;
$Cboxes.change( function(event) {

 if(timer)clearTimeout(timer);

 timer = setTimeout(function(){
  //your logic
  },waitTime);

 }); 
```

当更改事件被触发时，要执行的操作计划在 2000 毫秒之后进行，如果用户在此之前改变主意，只需清除间隔并创建一个新的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:50:22.270

延迟很容易实现。

```
$(function() {
    var $form = $("form[name='Waves']"),
        $Cboxes = $("input[type='checkbox']", $form),
        timer = null
        delay = 1000;

    $cboxes.not("#ClearAll").change(function() {

        // reset the current timer
        window.clearTimeout(timer);

        // create a new timer to delay form submission
        timer = window.setTimeout(function() {
            // get all the selected checkboxes as an array
            // and create a comma separated string
            var sWaves = $cboxes.is(":checked").map(function(item){
                return item.value;
            }).join(",");
            $.mobile.changePage("default.asp", {
                // Submit the previously formed string
                data: { Wave: sWaves },
                type: "post"
            });

        }, delay);
    });

    $("#ClearAll").change(function() {
        $cboxes.attr("checked", false).checkboxradio("refresh");

        $.mobile.changePage("default.asp", {
            data: { Wave: "" },
            type: "post"
        } );
    })
}); 
```

我还冒昧地简化了您的一些逻辑。尤其是字符串的创建在`Array.join()`.

# python - Python：使用图像文件发布请求

> ID：11551268
> 
> 赞同：6
> 
> 时间：2012-07-18T22:23:45.937
> 
> 标签：python, post, request, urllib2, urllib

我有一台服务器，我正在尝试构建一个发布请求以取回数据。我认为实现这一点的一种方法是在标头中添加参数并发出请求。但是我遇到了一些我不太了解的错误，无法继续前进。

HTML 表单

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  </head>
  <body>
     <form method="POST" action="http://some.server.com:61235/imgdigest" enctype="multipart/form-data">
        quality:<input type="text" name="quality" value="2"><br>
        category:<input type="text" name="category" value="1"><br>
        debug:<input type="text" name="debug" value="1"><br>
        image:<input type="file" name="image"><br>
        <input type="submit" value="Submit">
     </form>
  </body>
</html> 
```

Python代码：**我根据答案编辑了问题**

```
import urllib, urllib2
import base64

if __name__ == '__main__':
    page = 'http://some.site.com:61235/'
    with open("~/image.jpg", "rb") as image_file:
        encoded_image = base64.b64encode(image_file.read())
    raw_params = {'quality':'2','category':'1','debug':'0', 'image': encoded_image}
    params = urllib.urlencode(raw_params)
    request = urllib2.Request(page, params)
    request.add_header("Content-type", "application/x-www-form-urlencoded; charset=UTF-8")
    page = urllib2.urlopen(request)
    info = page.info() 
```

错误：

```
 page = urllib2.urlopen(request)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 406, in open
    response = meth(req, response)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 404: Not Found 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:53:26.530

添加一个这个标题：

```
request.add_header("Content-type", "application/x-www-form-urlencoded; charset=UTF-8") 
```

此外，您发送的图像参数是一个字符串，而不是图像文件的内容。您需要对其进行 b64 编码

```
import base64

with open("image.jpg", "rb") as image_file:
    encoded_image = base64.b64encode(image_file.read()) 
```

然后用' '`encoded_image`代替`~/image.jpg``raw_params`

# ruby-on-rails - 如何使用 Ruby on Rails 设置 MSSQL 用户身份验证？

> ID：11551270
> 
> 赞同：1
> 
> 时间：2012-07-18T22:24:05.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个在我的 MSSQL 数据库中创建数据库用户的当前系统。这些用户可以使用我们编写的其他客户端连接到数据库。我需要让用户输入已在数据库的 SQL Server 安全/登录中定义的用户名和密码。

我能够连接到数据库并使用 rails 创建表，但我找不到任何有关如何针对我正在连接的数据库进行身份验证的信息。

我们的模式中已经有一个表，其中包含用户信息，例如 usr_name、usr_desc、usr_email 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:59:47.707

假设您没有进行散列并且您的用户模型在您可以使用的 Rails 中正确设置

```
 #assuming your table/model is called user your user name field is called user_name and your password field is called password
     user = User.find_by_user_name_and_password

     if user
          #do authenticated stuff
     else
          #don't do authenticated stuff

     end 
```

查看[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

在底部，它谈到了动态查找器。这些是为 rails 模型中的每个字段创建的。这就是让在 Rails 中进行 sql 查询变得轻而易举的原因。

# jquery - 自动更新选择的字段选项

> ID：11551280
> 
> 赞同：0
> 
> 时间：2012-07-18T22:25:13.060
> 
> 标签：jquery, ruby-on-rails, forms, jquery-chosen

在 Rails 中，我的 Dish 页面上有一个表单，其中有一个名为 Side Dishs 的多选选择字段[。](http://harvesthq.github.com/chosen/)

如果用户从另一个浏览器窗口添加了另一个配菜，我想让我的配菜选择字段的选项自动更新（无需重新加载页面）。

我从选择的网站上查看了*[动态更新选择](http://harvesthq.github.com/chosen/)*的内容，但我不知道这是否是我正在寻找的和/或我是否正确理解它。

目前，我的`dishes.js.coffee`样子是这样的：

```
jQuery ->
  $(".chzn-side-dish").chosen()
  $(".chzn-side-dish").trigger "liszt:updated" 
```

但显然，这并不能解决问题。我的理解是，`.trigger`将定期刷新配菜列表并从配菜表中获取任何新添加（或删除）。

Dish 页面上的表单遵循以下约定：

```
= form_for @dish, :html => { :class => "form-horizontal" } do |f|
...
%fieldset
  .control-group
    =f.label :side_dish_ids, "Side Dish(es)", :class => 'control-label'
    .controls
      =f.collection_select :side_dish_ids, SideDish.order(:name), :id, :name, {}, {multiple: true, :class => 'chzn-side-dish'} 
```

PS——我已经查看了[其他 SO](https://stackoverflow.com/questions/11352207/jquery-chosen-plugin-add-options-dynamically)问题，但无法使其全部正常工作。同样，我不确定我是否理解`.trigger...`正确的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:34:22.790

您将需要手动处理，没有简单的方法。您可以进行轮询以检查是否有更改，然后重新创建您的列表，或者您可以使用 websockets 来避免需要轮询。如果您采用这种方法，有一个服务[http://www.pusherapp.com](http://www.pusherapp.com)可以帮助您使用 websockets。

从可用性的角度来看，我会非常小心，您不想在用户实际使用列表时重新加载列表，或者如果他们已经选择了某些内容。

# ruby-on-rails - 摆脱 Guard bundler 警告

> ID：11551281
> 
> 赞同：2
> 
> 时间：2012-07-18T22:25:15.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, guard

我怎样才能摆脱这个警告（永久）

```
Guard here! It looks like your project has a Gemfile, yet you are running
     `guard` outside of Bundler. If this is your intent, feel free to ignore this
     message. Otherwise, consider using `bundle exec guard` to ensure your
     dependencies are loaded correctly. 
```

...无需`bundle exec guard`每次启动时都运行？我曾与经验更丰富的测试开发人员合作过，他们以前设法摆脱了这个警告，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:16:53.033

Guard 检查您当前的工作目录是否包含 a`Gemfile`并向您显示您想要摆脱的 Bundler 警告。已添加此警告，因为已在 Guard 问题跟踪器中提交了许多由错误引起的问题`LOAD_PATH`，并且使用 Bundler 运行 Guard 可以解决大部分问题。

如果你在一个`Gemfile`带有`bundle exec`. 我在我的 ZSH 配置中使用了一个简单的别名，`alias be=bundle exec`并以`be guard`. 如果您更喜欢 binstub 解决方案，我建议使用[Rubygems bundler](https://github.com/mpapis/rubygems-bundler)：

```
gem install rubygems-bundler
gem regenerate_binstubs 
```

如果您知道自己在做什么并且不想看到此消息，则可以使用`--no-bundler-warning`（或简短版本`-B`）。如果您再也不想看到此消息，请创建一个别名`alias guard=guard -B`。

# css - 解决仅在 IE 8 和 9 中出现的各种 css 消失问题

> ID：11551284
> 
> 赞同：0
> 
> 时间：2012-07-18T22:25:23.677
> 
> 标签：css, internet-explorer, plugins, wordpress

我使用 wordpress 建立了我的网站。我安装了各种插件来增加网站的功能。除了使用 IE 8 和 9 查看网站时，一切正常并且看起来都很好。在 IE 中查看时，所有在网站上具有视觉效果的插件都会丢失所有 CSS。例如，表单在 IE 中查看时会丢失所有样式，所有可视化插件也是如此。他们都失去了他们的风格，但只在 IE 中。我已经与插件的开发人员进行了双重检查，并确保我使用的是最新版本的插件并且它们都与 IE 兼容，但我仍然遇到这个问题。我不是专业的网页设计师，但我愿意学习我需要的东西来解决这个问题。如果有人能给我一个很好的起点来解决问题，那将不胜感激。

PS我有最新版本的wordpress。该网站可以在这里找到[http://www.family1st-financial.com/home](http://www.family1st-financial.com/home)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:31:10.787

可能是其中一个插件引起了问题。您是否尝试过停用所有插件并逐个重新激活它们，每次启用另一个插件时检查 IE 中的样式？这可能有助于确定问题是否是由插件冲突引起的。

# regex - 匹配以“开头的字符串”的正则表达式是什么 " 并以 "" 结尾？

> ID：11551285
> 
> 赞同：0
> 
> 时间：2012-07-18T22:25:32.647
> 
> 标签：regex, regex-greedy

`<tag1 attribute="0">`匹配以 开头和结尾的字符串的正则表达式是什么`</tag>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:44:34.457

正则表达式：`<tag1 attribute=”0“&gt;.*?<\/tag>`

[测试代码](http://ideone.com/XlH17)：

```
using System;
using System.Text.RegularExpressions;

public class Test
{
  public static void Main()
  {
    string input = @"this is <tag1 attribute=""0""> and ends with </tag>, okay?";
    Console.WriteLine(input);
    Match match = Regex.Match(input, @"<tag1 attribute=""0"">.*?<\/tag>",
      RegexOptions.IgnoreCase);
    if (match.Success)
    {
      Console.WriteLine("Match!");
    }
  }
} 
```

# mysql - MySQL 从 2 列更新两行

> ID：11551287
> 
> 赞同：0
> 
> 时间：2012-07-18T22:25:48.260
> 
> 标签：mysql

有没有办法将这两个语句简化为一个？

```
UPDATE items
SET D1 = 'AAA'
WHERE D1 = 'BBB'

UPDATE items
SET D2 = 'AAA'
WHERE D2 = 'BBB' 
```

我想仅当 D1 为 BBB 时将 D1 设置为 AAA，仅当 D2 为 BBB 时才将 D2 设置为 AAA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:31:17.870

这是您可以在一个语句中执行此操作的最有效方法：

```
UPDATE items
SET D1 = IF(D1 = 'BBB', 'AAA', D1),
    D2 = IF(D2 = 'BBB', 'AAA', D2)
WHERE D1 = 'BBB' OR D2 = 'BBB'; 
```

为了获得最佳性能，请确保在`D1`和上有单独的索引`D2`。在这种情况下，查询规划器可以进行索引合并。不要只使用多列索引，否则查询规划器将不得不依赖表扫描。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:33:30.880

如果行不符合标准，您可以使用 if，并将列设置为 self

```
UPDATE items
SET
  D1 = IF(D1 = 'BBB', 'AAA', D1),
  D2 = IF(D2 = 'BBB', 'AAA', D2)
WHERE
  D1 = 'BBB' OR
  D2 = 'BBB' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:29:56.233

```
UPDATE items SET D1 = 'AAA', SET D2 = 'AAA' WHERE D1 = 'BBB' AND D2 = 'BBB' 
```

或取决于您想要实现的目标：

```
UPDATE items SET D1 = 'AAA', SET D2 = 'AAA' WHERE D1 = 'BBB' OR D2 = 'BBB' 
```

# objective-c - 无法使用 [NSString stringWithContentsOfFile] 加载文件？

> ID：11551289
> 
> 赞同：0
> 
> 时间：2012-07-18T22:26:11.053
> 
> 标签：objective-c, cocoa-touch

在 Xcode 的“支持文件”中包含一个文件，名为：`taxrates.csv`.

```
NSString *fileString = [NSString stringWithContentsOfFile:@"taxrates.csv" encoding:NSUTF8StringEncoding error:NULL];
NSLog(@"%@",fileString); // <-- just displays null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:29:04.843

这是因为应用程序的当前目录不是应用程序的路径，而是包含 UUID 文件夹的路径。

要修复，请尝试使用`[[NSBundle mainBundle] pathForResource:@"taxrates" ofType:@"csv"]`来获取文件的路径，而不是使用原始字符串。

# ios - 导航控制器弹出子视图后强制父视图刷新视图

> ID：11551290
> 
> 赞同：1
> 
> 时间：2012-07-18T22:26:14.127
> 
> 标签：ios

我有 secondViewController 可以在横向和纵向视图中显示内容。MainViewController（secondViewController 的父级）只能在横向模式下显示内容。

当 SecondView 处于纵向模式并弹出时，MainViewController 视图（应该仅在横向模式下显示内容）以纵向显示内容。它不会刷新到横向模式。

有没有办法强制 MainViewController 刷新内容？

在 MainViewController 的 viewWillAppear 方法上，我添加了 setNeedsDisplay 和 layoutSubviews 等。

```
-(void) viewWillAppear:(BOOL)animated {
    [self.view setNeedsDisplay];
    [self.view layoutIfNeeded];
    [self.view layoutSubviews];
} 
```

但它不会重新加载视图。我还尝试了导航控制器的委托方法 - willShowViewController 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:45:12.253

我通过不让用户“返回”到另一个视图来解决类似的问题，除非应用程序处于正确的方向（在本例中为横向）。你可以做的是提供你自己的“返回”按钮，如果视图是纵向的，弹出一个警告说请先旋转到横向（或者更好的是从屏幕底部或顶部动画一个小视图）。或者只是隐藏或禁用纵向的后退按钮（我隐藏了按钮）。

无论如何，让用户返回并在手机处于纵向模式时查看横向视图是一个糟糕的 UI 选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:48:55.373

看起来如果您删除视图并将其添加回来它可以工作

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
if (UIDeviceOrientationIsPortrait(orientation)){        
    NSLog(@"force to landscape mode ");
    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    UIView *view = [window.subviews objectAtIndex:0];
    [view removeFromSuperview];
    [window addSubview:view];        
} 
```

您也可以使用 CGAffineTransformMakeRotation 但它的旋转在导航控制器上不起作用

```
 if (orientation == UIDeviceOrientationPortraitUpsideDown) {
        [self.view setTransform:CGAffineTransformMakeRotation(M_PI/-2.0)];
        //[self.navigationController.view setTransform:CGAffineTransformMakeRotation(M_PI/-2.0)];
    } else if (orientation == UIDeviceOrientationPortrait) {
        [self.view setTransform:CGAffineTransformMakeRotation(M_PI/2.0)];
        //[self.navigationController.view setTransform:CGAffineTransformMakeRotation(M_PI/-2.0)];
    } 
```

# loops - 汇编语言中的CMP

> ID：11551295
> 
> 赞同：1
> 
> 时间：2012-07-18T22:26:50.147
> 
> 标签：loops, assembly, cmp

所以我有这行代码：

```
LOOP CMP Y, #0
BEQ DONE - When it is equal go to DONE.
ADD X, #1 - add decimal constant 1 to x.
SUB Y, #1 - subtract decimal constant 1 from y
B LOOP - branch loop (start the loop again)
DONE ... 
```

我刚刚读到 CMP 意味着从 Rn 中减去操作数（Y 减 0）而 CMN 意味着将操作数添加到 Rn 中（例如 0 + Y）

第一行 (LOOP CMP Y, #0)：我以为这只是将 Y 与数字 0 进行比较。这是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:38:21.540

是的—— `cmp`（至少在大多数汇编语言中）做减法。它根据减法的结果设置标志，然后丢弃结果本身。

# c# - 去饱和 OpenGL 纹理

> ID：11551298
> 
> 赞同：2
> 
> 时间：2012-07-18T22:27:21.083
> 
> 标签：c#, opengl, colors, grayscale, opentk

我有一个**透明度**需要去饱和的 .png。我读到我需要取位图的平均 R、G 和 B 值，然后使用：

```
G*.59
R*.3
B*.11 
```

我以这种方式计算平均颜色：

```
private Color Average_Color(Bitmap bitmap) {
  Color c = new Color();
  int pixel_number = 0;
  int r = 0;
  int g = 0;
  int b = 0;

  for (int i = 0; i < bitmap.Width; i++) {
    for (int j = 0; j < bitmap.Height; j++) {
      c = bitmap.GetPixel(i, j);
        r += c.R;
        g += c.G;
        b += c.B;
        pixel_number++;
    }
  }
  c = Color.FromArgb(1, r / pixel_number, g / pixel_number, b / pixel_number);
  return c;
} 
```

然后，首先绘制我的纹理，我以这种方式设置颜色：

```
rgb = Average(bitmap);
GL.Color3(rgb.R * 0.59, rgb.G * 0.3, rgb.B * 0.11);
//here I draw my texture 
```

我不知道为什么，但它不起作用（我得到了他原来颜色的纹理）。我想这是有问题的`Average_Color`。也许是因为它不是一个完全不透明的位图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:31:10.400

OpenGL 期望它的颜色是从 0 到 1 标准化的浮点数，但我怀疑你的位图报告的颜色是 0-255。

因此，我假设您将大于 1 的 RGB 值传递给 glColor，glColor 被限制为 1，因此您的纹理看起来相同。

尝试

`GL.Color3(rgb.R*0.59/255.f, rgb.G*0.3/255.f, rgb.B*0.11/255.f);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:14:40.427

尝试在除法之前将变量转换为浮点数

# javascript - 如何将其他内容放入fancybox iframe

> ID：11551301
> 
> 赞同：2
> 
> 时间：2012-07-18T22:27:35.553
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我无法弄清楚如何将一些额外的内容放入我用 fancybox 显示的 iframe 中。

我的基本设置：

```
$('.fancybox').fancybox({
    'autoScale': false,
    'transitionIn': 'none',
    'transitionOut': 'none',
    'type': 'iframe',
    'padding': 0,
    'closeClick': false,
    helpers: {
        overlay: {
            closeClick: false
        }
    }

<a class="fancybox" href ="http://my-iframe.example"/><img src="myimage.jpg" width="x" height="y" /></a> 
```

所以我需要在 iframe 下但在背景覆盖层之上放置几个自定义按钮和另一个 javascript 小部件。

我只是无法掌握最好的方法。我想我可以把这个内容放在一个div中，然后在fancybox完成加载后显示那个div？不过，我在使用回调函数时遇到了麻烦，所以我只需要一些关于最佳方法的总体指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T00:41:18.850

如果使用 fancybox v2.x，请尝试使用回调`afterShow`将附加内容附加到`.fancybox-inner`选择器，例如：

```
afterShow: function(){
 var customContent = "<div class='customHTML'>My custom content</div>"
 $('.fancybox-inner').append(customContent);
} 
```

使用 CSS 来设置和定位这些附加内容，例如

```
.customHTML {
 position: absolute; 
 z-index: 99999; /* this place the content over the fancybox */
 bottom: 0px;
 right: 0;
 background: #f2f2f2;
 width: 200px;
 height: 100px;
 display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:07:16.937

如果 iframe 来自同一个域，那么您可以使用`contents()`

```
$('#fancybox-frame').contents().find('h1').prepend('<a>Button</a>'); 
```

这对于跨域情况是不可能的。

如果您的案例还需要注入 javascript 小部件，那么注入 DOM 对您来说可能很困难，您最好选择`div`与`iframe`.

为此，只需让 div 显示在`onComplete`event 或`onStart`event 上，然后根据 fancybox 位置、高度等定位它。

为了让它在覆盖层之上，给它一些定位，你显然应该给它一个更高的 z-index 覆盖层。

```
#fancybox-overlay {
    display: none;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: 1100;
}
#mydiv{
    position:absolute;
    z-index:1101;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-31T23:42:00.627

您可以尝试数据属性（data-fancybox-title）并初始化fancybox以将其放置在顶部，如下所示：

```
$(".fancybox-video").fancybox({
  helpers : {
    title: {
      type: 'inside',
      position: 'top'
    }
  }
});
```

```
<a href="#" class="fancybox-video" data-fancybox-title="<h1>Title</h1><div>Other stuff</div>" data-fancybox-type="iframe" data-fancybox-href="https://www.youtube.com/XXXXX"></a>
```

您可以在此处找到更多信息：[Fancybox 说明](http://fancyapps.com/fancybox/#instructions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T11:53:38.110

我需要 FancyBox 1.3 的解决方案，就我而言，我使用了**onComplete**事件来更新内容

```
<a class="iframe" id="fancybox-preview-card" href="about:blank"></a> 
```

```
 $("#fancybox-preview-card").fancybox({
        'height': screen.availHeight * 0.9,
        'width' : 600,
        'onComplete' : updatePreviewContent,
        'overlayShow': false
    });

...

var contentUpdated = false;

function previewEcardTemplate() {
    contentUpdated = false;
    $("#fancybox-preview-card").attr("href", "about:blank").trigger("click");

}

function updatePreviewContent() {
    // if content has already been updated then back out 
    if (contentUpdated)
        return;

    contentUpdated = true;

    $.get('/template/mytemplate.htm', function (data) {
        // Any mods to the html can go here
        var ifrm = document.getElementById('fancybox-frame');
        ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;
        ifrm.document.open();
        ifrm.document.write(data);
        ifrm.document.close();
    })

} 
```

# c# - Sharepoint 2010 中的用户个人资料图片 - C#

> ID：11551302
> 
> 赞同：2
> 
> 时间：2012-07-18T22:27:36.480
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-2007, sharepoint-api

我们可以通过哪些方式从 sharepoint 2010 下载所有用户的所有个人资料图片。

我想开发一个可以从远程机器上运行的代码。

这可以使用 Sharepoint User Profile Service 完成吗？

我打算从共享点获取所有用户的图像，并通过 C# 将它们保存在不同的数据库中。

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:04:38.753

这里有几种不同的方法：

[http://spsatheesh.wordpress.com/2011/06/03/download-all-the-profile-pictures-through-powershell-using-web-service/](http://spsatheesh.wordpress.com/2011/06/03/download-all-the-profile-pictures-through-powershell-using-web-service/)

# ios - MPMoviePlayerController 循环的问题

> ID：11551305
> 
> 赞同：1
> 
> 时间：2012-07-18T22:27:44.983
> 
> 标签：ios, mpmovieplayercontroller

我只想要一个连续循环的视频。我这样设置播放器：

```
self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:someURL];
self.moviePlayer.controlStyle = MPMovieControlStyleNone;
self.moviePlayer.shouldAutoplay = YES;
self.moviePlayer.repeatMode = MPMovieRepeatModeOne;
self.moviePlayer.view.frame = self.container.frame;
[self.container addSubview:self.moviePlayer.view];

[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(moviePlayBackDidFinish:) name: MPMoviePlayerPlaybackStateDidChangeNotification
                                           object: self.moviePlayer];

- (void) moviePlayBackDidFinish:(NSNotification*)notification {

    NSLog( @"myMovieFinishedCallback: %@", notification );
    MPMoviePlayerController *movieController = notification.object;
    NSLog( @"player.playbackState = %d", movieController.playbackState );
} 
```

通知方法只是有人在这里建议的一种技巧：[iOS 中的平滑视频循环](https://stackoverflow.com/questions/7822808/smooth-video-looping-in-ios)

我有两个问题。视频循环仍然不是无缝的。循环之间有一个非常明显的停顿。其次，视频在任意循环次数后停止循环。通常在 2-4 个循环之间变化。这显然是我的应用程序的一个大问题。播放器真的有这么多问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:08:19.697

我在这里为视频创建了一个完整的无缝循环解决方案[seamless-video-looping-on-ios](http://iosgraphicsanimation.wordpress.com/2013/06/19/seamless-video-looping-on-ios/)。随意下载示例 xcode 应用程序并亲自尝试以了解我的方法。我发现 MPMoviePlayerController 和 AVPlayer 都不能用于这种类型的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T15:31:10.140

我也无法获得无缝循环使用`MPMoviePlayerController`——总是至少有 0.5 秒的黑色，并且偶尔会闪现 QuickTime 标志。

但是，我可以使用以下方法获得无间隙循环`AVPlayer`- 但需要几个条件才能实现：

1.  关于我的测试视频剪辑的编码意味着寻找开头总是会在每个循环开始时导致大约 0.5 秒的暂停。以`kCMTimeZero`容差将 1 秒插入剪辑使其无缝。如果没有显式的零查找容差，效果与查找到剪辑的开头相同。

2.  不玩而求是飘忽不定；它会导致我的 iPhone 4 挂起，但不会导致我的 iPad 3 挂起。两个替代修复（如下`#if`所示）是：

    1.  在再次调用之前等待搜索完成`play`，或者

    2.  等到特定时间（剪辑结束之前），然后从开头重新开始播放。

以下代码实现了这两个条件：

```
 self.player = [AVPlayer playerWithURL:url];

  self.playerLayer = [AVPlayerLayer playerLayerWithPlayer:self.player];
  self.playerLayer.frame = self.view.bounds;
  [self.view.layer addSublayer:self.playerLayer];

  [self.player seekToTime:CMTimeMakeWithSeconds(1, 1) toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];
  [self.player play];

#if 1
  [[NSNotificationCenter defaultCenter] addObserverForName:AVPlayerItemDidPlayToEndTimeNotification object:self.player.currentItem queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
    [self.player seekToTime:CMTimeMakeWithSeconds(1, 1) toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero completionHandler:^(BOOL finished) {
      [self.player play];
    }];
  }];
#endif

#if 0
  NSArray *times = [NSArray arrayWithObject:[NSValue valueWithCMTime:CMTimeMake(5, 1)]];
  [self.player addBoundaryTimeObserverForTimes:times queue:NULL usingBlock:^{
    [self.player seekToTime:CMTimeMakeWithSeconds(1, 1) toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];
  }];
#endif 
```

# java - Android：SQL - 代码行为不同

> ID：11551308
> 
> 赞同：0
> 
> 时间：2012-07-18T22:27:52.223
> 
> 标签：java, android, sqlite

我正在尝试在一个表中搜索具有相同行中的所有值`name`，然后将它们放入另一个表中。

我已经在我的应用程序的另一部分成功地做到了这一点，并在工作代码之后对此代码进行了建模，但由于某种原因它无法正常工作。它只会将一个值从一个表移动到另一个表。

我检查了它从中获取的表格，`DATABASE_FAV_EQUIP_TABLE`，其中有不止一行。

这是不起作用的代码：

```
//takes all equip data from saved equip set, and puts into equip table
public String AddSavedEquipToEquipTable(String name) {
        // TODO Auto-generated method stub
        String[] columns = new String[]{KEY_EQUIP, KEY_FAVNAME};
        ContentValues cv = new ContentValues();
        Cursor c = ourDatabase.query(DATABASE_FAV_EQUIP_TABLE, columns, KEY_FAVNAME + "='" + name + "'", null, null, null, null);

        if (c == null){
            return null;
        }
        else if(c != null && c.moveToFirst()) {
            do {
                int iEquip = c.getColumnIndex(KEY_EQUIP);                   

                String equipment = c.getString(iEquip);

                cv.put(KEY_EQUIP, equipment);
                ourDatabase.insert(DATABASE_EQUIP_TABLE, null, cv);

                } while (c.moveToNext() && KEY_FAVNAME == name);
            }

        return null;
    } 
```

这是在我的应用程序的另一部分中工作的代码：

```
//takes all rows in chest table and puts them into the chosen equipment database
public String AddToEquipmentDBFromChest(String equip) {
    // TODO Auto-generated method stub
    String[] columns = new String[]{KEY_REPS, KEY_EXERCISE, KEY_TIMETYPE};
    ContentValues cv = new ContentValues();
    Cursor c = ourDatabase.query(DATABASE_CHESTTABLE, columns, KEY_EQUIP + "='" + equip + "'", null, null, null, null);

    if (c == null){
        return null;
    }
    else if(c != null && c.moveToFirst()) {
        do {
            int iReps = c.getColumnIndex(KEY_REPS);
            int iExercise = c.getColumnIndex(KEY_EXERCISE);
            int iTimeType = c.getColumnIndex(KEY_TIMETYPE);

            String reps = c.getString(iReps);
            String exercise = c.getString(iExercise);
            String time = c.getString(iTimeType);

            cv.put(KEY_REPS, reps);
            cv.put(KEY_EXERCISE, exercise); 
            cv.put(KEY_TIMETYPE, time);

            ourDatabase.insert(DATABASE_CHOSEN_EQUIP_TABLE, null, cv);
            } while (c.moveToNext() && KEY_EQUIP == equip);
        }

    return null;
} 
```

我一遍又一遍地重复这个问题，我必须遗漏一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:48:26.880

函数内部都没有`KEY_FAVNAME`变化`name`，因此在循环的每次迭代中比较它们不会做任何有用的事情。鉴于您已经在查询中检查匹配的名称，我不明白您为什么还要尝试在循环中进行此检查。完全去掉`KEY_FAVNAME == name`比较。

* * *

顺便：

```
KEY_FAVNAME == name 
```

这不是您在 Java 中比较字符串的方式。这个更好：

```
KEY_FAVNAME.equals(name) 
```

* * *

更顺便说一句：您的代码是不必要的冗长。您不需要对游标进行空值检查，因为如果查询失败将引发异常。但是，您**确实需要在完成后关闭光标。**一个典型的模式是这样的：

```
Cursor c = db.query(....);
try {

    // do all your cursor iteration in here

} finally {
    c.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:31:23.597

```
while (c.moveToNext() && KEY_FAVNAME == name); 
```

一旦名称不正确，这将打破您的 do while 循环。你不想打破，你只想跳过那个记录。

# database - 如何以最有效的方式更新数据库？

> ID：11551312
> 
> 赞同：4
> 
> 时间：2012-07-18T22:28:19.310
> 
> 标签：database, performance, large-data-volumes

我正在建立一个价格比较网站，其中包含大约 300.000 种产品和数百个客户。

该网站每天都需要更新价格和供应商库存情况。

当供应商需要更新时，我正在考虑删除所有供应商信息，然后每次都提取并插入新信息。

这样做我不必担心供应商会删除产品。以一种简单的方式，我每天都会获得一组新数据。

另一方面，我需要检查自动增量计数器，如果他只更新了整个仓库中 3 种产品的价格，从供应商那里删除所有东西似乎是一种浪费。

但是更新也有它的缺点。我仍然需要读取所有数据，并将每个产品的价格/可用性与供应商的数据进行比较，一次一个产品。此外，要注意被供应商删除的产品也更加复杂。

如何以最有效和最简单的方式实现更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:37:31.943

我不确定您使用的是什么数据库技术。在任何情况下，数据库都支持处理多个表之间的关系。由您来实现这些概念。例如，您可以在创建引用表 B（例如通过主键）的表 A 时使用 CASCADE 选项，以确保表 B 中元组的更新/删除会级联（反映）表 A 中的相应元组。

查看CASCADING[示例](https://stackoverflow.com/questions/1481476/when-to-use-on-update-cascade)以及[何时使用](https://stackoverflow.com/questions/59297/when-why-to-use-cascading-in-sql-server)

# css - LESS CSS 将 mixin 作为参数传递给另一个 mixin

> ID：11551313
> 
> 赞同：16
> 
> 时间：2012-07-18T22:28:21.227
> 
> 标签：css, arguments, less, mixins, css-animations

有没有办法将一个 mixin 或样式的声明作为输入参数传递给另一个 mixin？

让我们看一个动画关键帧的例子。以下是我们如何在纯 CSS 中定义关键帧：

```
@-moz-keyframes some-name
{
    from { color: red; }
    to { color: blue; }
}

@-webkit-keyframes some-name
{
    from { color: red; }
    to { color: blue; }
}

@keyframes some-name
{
    from { color: red; }
    to { color: blue; }
} 
```

想法是使用 mixins 来简化这些声明，所以我们可以有如下内容：

```
.keyframes(name, from, to)
{
    // here we need somehow to reproduce structure
    // that we have in an example above
}

// define one animation
.my-from() { color: red; }
.my-to() { color: blue; }
// the following won't work because you cannot pass mixin as a parameter
// in way I have here, so I am looking for a way to solve this problem
.keyframes('some-name', .my-from, .my-to);

// define another animation
.another-from() { font-size: 1em; }
.another-to() { font-size: 2em; }
.keyframes('another-name', .another-from, .another-to); 
```

该系统将具有不同的模块，可以动态地附加到应用程序以及删除。所以，不建议我使用`@import`，因为事实并非如此。输出 CSS 使用有关模块和它们自己的 LESS 样式以及基本 LESS 依赖项（如 mixins 库等）的信息动态编译。

注意：如果您知道传递类定义而不是 mixin 的方法，它将对我有用。在上面的示例中，它将`.my-from`代替`.my-from()`等。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-21T03:33:40.767

## *为LESS* 1.7.0+ 更新（更简单）

[我们现在可以通过 1.7.0 更新和创建规则集](http://lesscss.org/features/#detached-rulesets-feature)以及在设置中使用[变量`@keyframes`](https://github.com/less/less.js/blob/master/CHANGELOG.md#170)的能力更直接地做到这一点。

现在我们真的可以通过规则集的参数传递一个mixin，或者我们可以传递属性stings本身。所以考虑一下：

**少（使用 1.7）**

```
.keyframes(@name, @from, @to) {
    @frames: {
        from { @from(); }
        to { @to(); }
    };
    @pre: -moz-keyframes;
    @-moz-keyframes @name
    {
       @frames();
    }

    @-webkit-keyframes @name
    {
       @frames();
    }

    @keyframes @name
    {
       @frames();
    }
}

.keyframes(testName, {color: red; .myMix(0);}, {color: blue; .myMix(1);});

.myMix(@value) {opacity: @value;} 
```

请注意，我同时传递了一个属性设置和一个 mixin 调用，我的输出是：

**CSS 输出**

```
@-moz-keyframes testName {
  from {
    color: red;
    opacity: 0;
  }
  to {
    color: blue;
    opacity: 1;
  }
}
@-webkit-keyframes testName {
  from {
    color: red;
    opacity: 0;
  }
  to {
    color: blue;
    opacity: 1;
  }
}
@keyframes testName {
  from {
    color: red;
    opacity: 0;
  }
  to {
    color: blue;
    opacity: 1;
  }
} 
```

注意规则集是如何在括号中传递的，`{...}`然后通过`@from()`and调用`@to()`（看起来很像 mixin 调用）。我正在使用这些传递的规则集来设置另一个规则集，`@frames`然后调用该规则集来填充关键帧定义。

**更一般地**

在这里，我将一个私有 mixin 传递给另一个 mixin，然后从另一个 mixin 调用它：

**较少的**

```
.someMixin(@class; @expectedMixin) {
    .@{class} {
      @expectedMixin();
      .myPrivateMix(0.6);
      test: 1;
    }
}

.someMixin(newClass; {.myClass;});

.myClass {
  .myPrivateMix(@value) {opacity: @value;}
} 
```

**CSS 输出**

```
.newClass {
  opacity: 0.6;
  test: 1;
} 
```

* * *

**保留以下信息以获取旧信息。**

## 更新（添加了 LESS 1.4.0+ 支持）

哇，这需要做一些事情，但我想我有一些你可以使用的东西。但是，它确实需要在模块中对 mixin 进行一些特殊定义，特别是使用[**模式匹配**](http://lesscss.org/features/#mixins-parametric-feature-pattern-matching)。所以...

## 首先，定义你的模块 Mixins

请注意，打算在特定的未来 mixin 中使用的模块 mixin 是如何使用*相同的 mixin name*定义的，但具有不同的模式名称。这是完成这项工作的关键。

```
// define one animation in a module
.from(my-from){ color: red; }
.to(my-to) { color: blue; }

// define one animation in another module
.from(another-from){ font-size: 1em; }
.to(another-to) { font-size: 2em; } 
```

**如果您还想**在模块中使用单独的 mixin 名称，您应该可以这样做：

```
// define one animation in a module
.my-from(){ color: red; }
.my-to() { color: blue; }

.from(my-from){ .my-from() }
.to(my-to) { .my-to() }   

// define one animation in another module
.another-from(){ font-size: 1em; }
.another-to() { font-size: 2em; }

.from(another-from){ .another-from() }
.to(another-to) { .another-to() } 
```

这应该允许人们调用直接混合`.my-from()`，或者使其在以后的混合中可变地访问，这些`.from()`混合通过模式匹配访问单个混合组。

## 接下来，定义你的 Mixin

对于您的`@keyframes`示例，这非常困难。实际上，[**堆栈溢出答案**](https://stackoverflow.com/questions/9166152/sign-and-variables-in-css-keyframes-using-less-css)对于帮助我解决应用 的问题至关重要，`@name`因为它遵循`@keyframes`定义，所以在正常的 LESS 规则下不适用。应用`@name`看起来讨厌的解决方案，但它的工作原理。不幸的是，它确实需要定义一个选择器字符串来播放动画（因为它使用该字符串来帮助构建最后一个`}`关键帧）。此命名限制仅适用于以`@`like`@keyframes`和可能开头的 css 字符串`@media`。

此外，因为我们在模块文件中使用了标准的 mixin 名称，我们可以在新的 mixin 中一致地访问它，同时传入一个变量以通过模式匹配选择该 mixin的*适当变体。*所以我们得到：

**LESS 1.3.3 或以下**

```
// define mixin in mixin file

.keyframes(@selector, @name, @from, @to) {
    @newline: `"\n"`; // Newline
    .setVendor(@pre, @post, @vendor) {
        (~"@{pre}@@{vendor}keyframes @{name} {@{newline}from") {
            .from(@from); 
        }    
        to  { 
            .to(@to);
        }
       .Local(){}
       .Local() when (@post=1) {
           (~"}@{newline}@{selector}") {
              -moz-animation: @name;
              -webkit-animation: @name;
              -o-animation: @name;
              -ms-animation: @name;
              animation: @name;
           } 
       }    
       .Local;
    } 
    .setVendor(""            , 0,    "-moz-");
    .setVendor(~"}@{newline}", 0, "-webkit-");
    .setVendor(~"}@{newline}", 0,      "-o-");
    .setVendor(~"}@{newline}", 0,     "-ms-");
    .setVendor(~"}@{newline}", 1,         "");
} 
```

**少 1.4.0+**

```
.keyframes(@selector, @name, @from, @to) {
    @newline: `"\n"`; // Newline
    .setVendor(@pre, @post, @vendor) {
        @frames: ~"@{pre}@@{vendor}keyframes @{name} {@{newline}from";
        @{frames} {
            .from(@from); 
        }    
        to  { 
            .to(@to);
        }
       .Local(){}
       .Local() when (@post=1) {
           @animationSector: ~"}@{newline}@{selector}";
           @{animationSector} {
              -moz-animation: @name;
              -webkit-animation: @name;
              -o-animation: @name;
              -ms-animation: @name;
              animation: @name;
           } 
       }    
       .Local;
    } 
    .setVendor(""            , 0,    "-moz-");
    .setVendor(~"}@{newline}", 0, "-webkit-");
    .setVendor(~"}@{newline}", 0,      "-o-");
    .setVendor(~"}@{newline}", 0,     "-ms-");
    .setVendor(~"}@{newline}", 1,         "");
} 
```

## 现在调用你的 Mixin

你可以给它你自己的名字，并且只传递直接模式（*都没*有点 [.] 也*没有*引号）来匹配模块 mixins 上的模式，但不要忘记你还需要一个选择器字符串（即引用）以使 mixin 正常工作：

```
.keyframes('.changeColor', some-name, my-from, my-to);
.keyframes('.changeFontSize', another-name, another-from, another-to); 
```

## 为您提供所需的输出

```
@-moz-keyframes some-name {
from {
  color: red;
}
to {
  color: blue;
}
}
@-webkit-keyframes some-name {
from {
  color: red;
}
to {
  color: blue;
}
}
@-o-keyframes some-name {
from {
  color: red;
}
to {
  color: blue;
}
}
@-ms-keyframes some-name {
from {
  color: red;
}
to {
  color: blue;
}
}
@keyframes some-name {
from {
  color: red;
}
to {
  color: blue;
}
}
.changeColor {
  -moz-animation: some-name;
  -webkit-animation: some-name;
  -o-animation: some-name;
  -ms-animation: some-name;
  animation: some-name;
}
@-moz-keyframes another-name {
from {
  font-size: 1em;
}
to {
  font-size: 2em;
}
}
@-webkit-keyframes another-name {
from {
  font-size: 1em;
}
to {
  font-size: 2em;
}
}
@-o-keyframes another-name {
from {
  font-size: 1em;
}
to {
  font-size: 2em;
}
}
@-ms-keyframes another-name {
from {
  font-size: 1em;
}
to {
  font-size: 2em;
}
}
@keyframes another-name {
from {
  font-size: 1em;
}
to {
  font-size: 2em;
}
}
.changeFontSize {
  -moz-animation: another-name
  -webkit-animation: another-name;
  -o-animation: another-name;
  -ms-animation: another-name;
  animation: another-name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:28:39.803

# 简化

我只是简化了一点 ScottS 的方式，将***@keframes***与***-animation***分开：

```
.keyframes(@name, @from, @to) {
    @newline: `"\n"`;
    .Local(@x){};
    .Local(@x) when (@x="") {(~"}@{newline}/*"){a:a}/**/};

    .setVendor(@pre, @vendor) {
        (~"@{pre}@@{vendor}keyframes @{name} {@{newline}from") {
            .from(@from);
        }
        to {
            .to(@to);
        }
        .Local(@vendor);
    }
    .setVendor(""            , "-webkit-");
    .setVendor(~"}@{newline}",    "-moz-");
    .setVendor(~"}@{newline}",      "-o-");
    .setVendor(~"}@{newline}",         "");
}

.animation(...) {
  -webkit-animation: @arguments;
     -moz-animation: @arguments;
       -o-animation: @arguments;
          animation: @arguments;
} 
```

## 采用：

```
.from(a1-from){ width: 10px; }
.to(a1-to) { width: 20px; }
.keyframes(a1-animation, a1-from, a1-to);

.selector {
    // some other css
    .animation(a1-animation 1s infinite linear);
} 
```

## 输出：

```
@-webkit-keyframes a1-animation {
from {
  width: 10px;
}
to {
  width: 20px;
}
}
@-moz-keyframes a1-animation {
from {
  width: 10px;
}
to {
  width: 20px;
}
}
@-o-keyframes a1-animation {
from {
  width: 10px;
}
to {
  width: 20px;
}
}
@keyframes a1-animation {
from {
  width: 10px;
}
to {
  width: 20px;
}
}
/* {
  a: a;
}
/**/

.selector {
  // some other css
  -webkit-animation: a1-animation 1s infinite linear;
  -moz-animation: a1-animation 1s infinite linear;
  -o-animation: a1-animation 1s infinite linear;
  animation: a1-animation 1s infinite linear;
} 
```

## 小问题：

所以动画现在与@keyframes 分开了，但我们**必须付出代价**。有一个讨厌的：

```
/* {
  a: a;
}
/**/ 
```

但这不应该是一个问题-> 可能我们所有人都通过任何类型的压缩器来推送 CSS 文件，这些压缩器会删除注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-29T09:21:57.767

您也可以使用我的解决方案生成 CSS 关键帧：[https ://github.com/thybzi/keyframes](https://github.com/thybzi/keyframes)

**特征：**

*   跨浏览器关键帧生成*（Firefox 5+、Chrome 3+、Safari 4+、Opera 12+、IE 10+）*
*   每个规则中最多 16 个时间点`keyframes`（如果需要，可以轻松增加数量）
*   Mixins、变量和函数可用于设置时间点的样式
*   关键帧是与规则分开创建的`animation`，因此：
    *   多个`animation`规则可以使用具有不同值的相同关键帧进行计时、重复等，
    *   可以在同一`animation`规则中使用多个动画
    *   动画可以在任何父选择器中应用（不是创建！）
*   轻量级和（几乎）整洁的 LESS 代码

**基本用法：**

```
// Preparing styles for animation points
.keyframes-item(fadeIn, 0%) {
    opacity: 0;
}
.keyframes-item(fadeIn, 100%) {
    opacity: 1;
}
// Generating keyframes
.keyframes(fadeIn);

// Applying animation to fade-in block in 1.5 seconds
.myBlock {
    .animation(fadeIn 1.5s);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T22:59:19.080

它并不是你将如何使用 mixins。

你应该按照以下方式做一些事情：

```
.mixin-one { ... }
.mixin-two { ... }
.target-style {
    .mixin-one;
    .mixin-two;
    font-family: 'Comic Sans MS';
    color: magenta;
} 
```

# ios - 不能做整数 == 比较

> ID：11551318
> 
> 赞同：0
> 
> 时间：2012-07-18T22:29:01.210
> 
> 标签：ios, if-statement

所以我有一个设置整数的方法：`-(void)setcurrentviewfromint:(int)currentint{`它在一个名为`MyView`. 从我的`viewDidLoad`方法中，我调用它，并将其设置为 1： `currentview`是 int 类型，在我的头文件中创建

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    MyView *myview = [[MyView alloc]init];
    [myview setcurrentviewfromint:1];
} 
```

然后，在 中`MyView.m`，我有这些课程：

```
-(void)setcurrentviewfromint:(int)currentint{
    currentview = currentint;
    NSLog("currentviewis:%d",currentview);
    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect {
    NSLog(@"drawRectCalled");
    if (currentview == 1) {
        NSLog(@"do something here");
        }
    }

} 
```

但是调试器会打印出：

```
2012-07-18 18:02:44.211 animation[76135:f803] currentviewis:1
2012-07-18 18:02:44.223 animation[76135:f803] drawRectCalled 
```

但不打印“在这里做点什么”。任何想法为什么`currentview`不等于1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:34:47.977

首先，关于你的问题。当前视图是什么数据类型？其次，它看起来像 setcurrentviewfromint 中的 NSLog：从不被调用。如果它被调用，您会看到“currentviewis:1”，因此请确保正确连接。

而且，我必须说，骆驼案！您的方法名称都是小写的，很难阅读。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:36:52.640

问题是您正在设置的 MYView 不是您正在从中读取 currentView 的那个。

在 viewDidLoad 中，您正在创建一个局部变量 myView，然后设置它的当前视图，然后这个 myView 成为内存泄漏，因为没有任何东西指向它。

假设 MyView 是 viewDidLoad 所在的类，并且 currentview 是该类的 int 属性（尽管为什么方法不是 setcurrentview :) 。我希望代码更像

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self setcurrentviewfromint:1];
} 
```

从而设置当前视图本身

正如其他人所说，请使用CamelCase的Objective C标准

# wcf - 使用 WCF 和业务逻辑层方案处理异常

> ID：11551321
> 
> 赞同：2
> 
> 时间：2012-07-18T22:29:19.350
> 
> 标签：wcf, exception, business-logic-layer, faultexception, faultcontract

我的服务只是调用放置整个业务逻辑的 BusinessLogicLayer 方法。我想知道处理 BL 引发的异常的最佳做法是什么？（不仅是致命异常，还有“逻辑”ApplicationExceptions，如我的 BL 在找不到用户时抛出的 UserNotFoundException）。

我应该在哪里将这些异常转换为客户将看到的 FaultExceptions？

我应该从 BL 抛出我的业务异常，然后将它们捕获到服务调用中并转换为 FaultException 并返回给客户端吗？或者 BL 应该引发已经“客户友好”的 FaultExceptions？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:30:43.317

我会说从业务逻辑层抛出业务异常，这将使您的业务逻辑层与 wcf 实现分离。在服务调用中，您可以覆盖 applydispatchbehaviour 并在那里添加错误处理程序，例如

**覆盖 IServiceBehavior.ApplyDispatchBehavior**

```
 void IServiceBehavior.ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
        {
            foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)
            {
                dispatcher.ErrorHandlers.Add(new FaultErrorHandler());
            }
        } 
```

**故障错误处理程序**

```
public class FaultErrorHandler : IErrorHandler
    {      

        void IErrorHandler.ProvideFault(System.Exception error, MessageVersion version, ref Message fault)
        {
            if (fault == null)
            {
                FaultException<[ExceptionType]> fe = new
                    FaultException<[ExceptionType]>([Exception cass],
                    error.Message, FaultCode.CreateReceiverFaultCode(new FaultCode("ServerException")));
                    MessageFault mf = fe.CreateMessageFault();
                    fault = Message.CreateMessage(version, mf, fe.Action);

            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-03T09:08:29.707

标准 .Net 异常在服务器端正确序列化，并在客户端反序列化。默认情况下，不是我们的。为什么 ？在调试会话期间向客户端发送业务异常可能是最佳实践：
- 无需将异常数据放入 [DataMember] 对象
- 比简单字符串 ( `ExceptionFault<ExceptionDetail>`)拥有更多信息

但是在将代码投入生产时注意不要发送异常。如果您的服务暴露在互联网上，可能会导致安全漏洞向黑客泄露详细信息！

为了将业务异常发送给客户端，最佳（和一些强制性）实践是：

1/`serviceDebugBehavior`打开

```
ServiceHost host = ...;
var debuggingBehavior = host.Description.Behaviors.Find<ServiceBehaviorAttribute>();
if (debuggingBehavior == null)
  debuggingBehavior = new ServiceBehaviorAttribute();
#if DEBUG
debuggingBehavior.IncludeExceptionDetailInFaults = true;
#else
debuggingBehavior.IncludeExceptionDetailInFaults = false;
#endif 
```

在xml中配置它也很容易

2/ 在服务接口上，声明一些 [FaultContract] ：

```
[ServiceContract(Namespace="your namespace")]
public interface IBillingService
{
  [OperationContract]
  [FaultContract(typeof(BusinessException))]
  void RaiseBusinessException();
} 
```

3/ 应将业务异常标记为可序列化

```
[Serializable]
public class BusinessException : Exception
{ ... } 
```

4/ 为了在客户端正确反序列化业务异常`FaultException<BusinessException>`，实现一个负责反序列化的构造函数很重要。否则你会得到一个通用的`FaultException`.

```
protected BusinessException(SerializationInfo info, StreamingContext context)
  : base(info, context)
{} 
```

5/ 如果您的异常中有一些额外的成员，请序列化/反序列化它们：

```
public DateTime CreationTime { get; set; }
protected BusinessException(SerializationInfo info, StreamingContext context)
: base(info, context)
{
  CreationTime = (DateTime)info.GetValue("CreationTime", typeof(DateTime));
}
public override void GetObjectData(SerializationInfo info, StreamingContext context)
{
  base.GetObjectData(info, context);
  info.AddValue("CreationTime", CreationTime);
} 
```

# javascript - 用于 JavaScript 的 Box2d：SetLinearVelocity() 不起作用

> ID：11551336
> 
> 赞同：1
> 
> 时间：2012-07-18T22:31:01.833
> 
> 标签：javascript, box2d

首先，这是我在 StackOverflow 上写的第一篇文章，而且我实际上是编程新手，所以如果我说错了，我很抱歉。

我尝试并尝试完成这项工作 - 我想模拟一个静止在空中的身体，为此我使用`SetLinearVelocity(new b2Vec2(0, 0))`.

正如我在其他帖子中所读到的，重力矢量似乎很重要：它是一个`b2Vec2(0, 30);`并且我的时间步长为 1/30 秒。

处理该特定主体机制的代码如下：

```
this.clocktick = function(deltaT) {
    this.body.SetLinearVelocity(new b2Vec2(0, 0));

    if(this.body.GetLinearVelocity().y != 15){
        console.debug(this.body.GetLinearVelocity().y);
    }
} 
```

我觉得很有趣的是，body 总是在下降，而且我已经遇到过这样的情况，即使它在下降，调试也会返回 0 值。

我只想听听解决方案或其他一些建议来模拟我打算模拟的内容。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:09:10.320

您需要施加一个力来抵消重力，而不是设置速度。如果你只是设置速度，重力仍然可以在每个时间步将它向下推一点。力需要与重力将施加的力相同，因此应考虑重力矢量和物体的质量：

```
body.ApplyForce( body.GetMass() * -world.GetGravity(), body.GetWorldCenter() ); 
```

...并且您需要在每个时间步骤**之前执行此操作。**

# xslt-1.0 - 从比较 XSL 中得到错误答案

> ID：11551343
> 
> 赞同：1
> 
> 时间：2012-07-18T22:31:50.723
> 
> 标签：xslt-1.0

所以我认为这相当简单，但它可能比我理解的更复杂。

无论如何，目前我只会包含我认为相关的代码，如果有人认为更多相关的代码，那么我会尝试包含更多。

我有两个说法：

```
<xsl:value-of select="$isOnlineColumnEmpty" />
<xsl:value-of select="not($isOnlineColumnEmpty = 'false')" /> 
```

第一个输出假。但是，第二个输出的是 true，这与我的预期相反。

除此之外，这两个语句重复多次，我只在一个部分中得到这个结果。但是，这两个语句之间绝对没有代码，所以没有什么可以改变变量的值。

只是想知道是否有什么我可以忽略的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:13:15.113

**而不是**：

```
<xsl:value-of select="not($isOnlineColumnEmpty = 'false')" /> 
```

**使用**：

```
<xsl:value-of select="not($isOnlineColumnEmpty = false())" /> 
```

**说明**：

*布尔值* 与*字符串*`false()`不同。 *`"false"`*

 *当一个布尔值与另一个值进行比较时，第二个值被转换为一个布尔值，然后进行比较。引用**[XPath 1.0 W3C 规范](http://www.w3.org/TR/1999/REC-xpath-19991116/#booleans)**：

> “*如果至少一个要比较的对象是布尔值，那么每个要比较的对象都被转换为布尔值，就像通过应用布尔函数一样*。”

因此，在这种具体情况下，字符串`"false"`被转换为布尔值。根据定义`boolean($someString)`，适用`true()`于任何非空字符串。

因此，转换后的两个布尔值`false()`和`true()`进行比较，结果为`false()`。因为在原始表达式中，这个结果是函数的参数`not()`，所以最终结果是`not(false())`，即`true()`。

**这是计算链**：

```
not($isOnlineColumnEmpty = 'false') ==> not(false() = 'false') ==>

not(false() = boolean(false())) ==> not(false() = true()) ==>

not(false()) ==> true() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:54:33.067

所以，我后来想通了。

将语句更改为：

```
<xsl:value-of select="$isOnlineColumnEmpty != false" /> 
```

为我解决了这个问题。*

# mysql - 如何在 django 中更新 id 表单

> ID：11551351
> 
> 赞同：0
> 
> 时间：2012-07-18T22:32:22.753
> 
> 标签：mysql, django, django-models

如何更新 Django 中的 id 字段，例如我有这个：

```
mysql> SELECT * FROM school_subjects;
+----+--------+---------+-------------+
| id | name   | user_id | delete_flag |
+----+--------+---------+-------------+
|  1 | Canada |       2 |           0 |
|  2 | USA    |       2 |           0 |
+----+--------+---------+-------------+ 
```

如果我删除它们，然后再次更新，我的 id 将不断增加：

```
mysql> SELECT * FROM school_subjects;
+----+--------+---------+-------------+
| id | name   | user_id | delete_flag |
+----+--------+---------+-------------+
|  3 | Canada |       2 |           0 |
|  4 | USA    |       2 |           0 |
+----+--------+---------+------------- 
```

+ 那么如何让 id 字段检查最低的字段，然后从那里增加呢？

```
#models.py
class Subjects(models.Model):
    """ Subject Database """
    name = models.CharField(max_length=64, unique=False) #Subject Names on left-menu 
    user = models.ForeignKey(User, unique=False)
    delete_flag = models.BooleanField(default=False)

    def __unicode__(self):
        return '%s %s' %(self.name, self.user.username) 
```

# mysql - SQL：根据一个字段的条件值

> ID：11551353
> 
> 赞同：1
> 
> 时间：2012-07-18T22:32:58.787
> 
> 标签：mysql, sql

我已经定义：
**表 X**

```
ID    AGE    HEIGHT   REGISTERED
1     23     1.83     1
2     24     1.81     0
3     24     1.72     0
4     22     1.91     1
5     32     1.76     0 
```

我想执行一个查询以返回有效值，但`*ONLY*`对于注册的 ID。那些不是，将得到0作为回报。像这样：

**结果**

```
ID    AGE    HEIGHT   REGISTERED
1     23     1.83     1
2     0      0        0
3     0      0        0
4     22     1.91     1
5     0      0        0 
```

定义该查询的方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:35:11.337

您可以使用 MySQL 特定的[`IF`](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html#function_if)表达式：

```
SELECT 
    ID,
    IF(REGISTERED, AGE, 0) AS AGE,
    IF(REGISTERED, HEIGHT, 0) AS HEIGHT,
    REGISTERED
FROM tablex 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/4b948/1)

您还可以使用标准 SQL`CASE`表达式：

```
SELECT 
    ID,
    CASE WHEN REGISTERED = 1 THEN AGE ELSE 0 END AS AGE,
    CASE WHEN REGISTERED = 1 THEN HEIGHT ELSE 0 END AS HEIGHT,
    REGISTERED
FROM tablex 
```

作为对您的评论的回应，如果您有很多列，这里可能会稍微容易一些：

```
SELECT id, AGE, HEIGHT, REGISTERED
FROM tablex
WHERE REGISTERED

UNION ALL

SELECT id, 0, 0, 0
FROM tablex
WHERE NOT REGISTERED

ORDER BY ID 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/4b948/3)

请注意，此查询中的列列表可以缩短为 just`SELECT *`并且查询[仍然有效](http://sqlfiddle.com/#!2/4b948/4)。但是`SELECT *`由于网站其他地方已经介绍过的各种原因，不建议在生产代码中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:36:05.843

您可以在 SQL 中使用 IF

```
SELECT
  ID,
  IF(REGISTERED = 1, AGE, 0) AS AGE,
  IF(REGISTERED = 1, HEIGHT, 0) AS HEIGHT,
  REGISTERED
FROM TableX 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:56:07.910

你也可以这样做

SELECT ID, Age, Height, Registered FROM (SELECT ID, Age, Height, Registered FROM TableX WHERE Registered = 1 UNION ALL SELECT ID, 0 AS Age, 0 AS Height, Registered FROM TableX WHERE Registered = 0) ORDER BY ID

# android - Android Market 更新后的内存管理

> ID：11551356
> 
> 赞同：0
> 
> 时间：2012-07-18T22:33:25.827
> 
> 标签：android

我将我的应用程序放到了 Android Market 上。现在我想更新它，但在我想更好地了解 Android 将如何管理我的应用程序的内存之前。特别是我以这种方式使用了内部存储器：

```
File f = context.getFileStreamPath(NAME_FILE);
if (f.exists()){
    FileInputStream stream = context.openFileInput(NAME_FILE);
    ObjectInputStream din = new ObjectInputStream(stream);
    myobject = (MyObject) din.readObject();
}else{
    FileOutputStream stream = ctx.openFileOutput(NAME_FILE, Context.MODE_PRIVATE);
        ObjectOutputStream dout = new ObjectOutputStream(stream);
        dout.writeObject(myobject);
        dout.flush();
        stream.getFD().sync();
} 
```

我用这个文件来存储一些可序列化的对象。在新版本中，我更改了这些对象的结构，所以我的问题是：

在新的更新中，Android 会删除这个文件，当我的应用程序尝试将对象（else 子句）存储到文件中时，它会创建一个新的空文件吗？或者Android会保留这个文件，当我的应用程序尝试从文件中匹配对象时（if子句）它会崩溃？

提前Tnx。弗拉门托斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:48:22.803

> 在新的更新中，Android 会删除这个文件吗...？

不，对以前安装的应用程序的更新不会删除以前保存的数据。

如果您的数据结构发生了变化，那么您的新版本需要检测以前存储的数据的存在，并在新（升级）版本第一次运行时删除/重新创建它。

# backbone.js - Backbone Marionette emptyView 模板被添加到 DOM 两次

> ID：11551359
> 
> 赞同：3
> 
> 时间：2012-07-18T22:33:55.873
> 
> 标签：backbone.js, marionette

当复合视图的集合没有模型时，我使用带有 emptyView 属性的 Marionette 复合视图来呈现简单模板。emptyView 在我的应用程序的多个位置都可以正常工作，但由于某种原因，在一个视图中，emptyView 在页面上呈现了两次。

我最初的想法是视图正在重新渲染，而不是在同步集合时自行删除。初始化函数中的 console.log 显示初始化只被调用一次。

```
class AllLists extends Backbone.Marionette.CompositeView
  itemView: List
  emptyView: NoLists
  template: AllListsTemplate
  className: 'lists'

  initialize: (options) ->
    @collection.fetch()
    console.log 'lists ', @collection, @model

class NoLists extends Backbone.Marionette.ItemView
  template: NoListsTemplate
  tagName: 'li'
  className: 'no-lists' 
```

正如你所看到的，这里没有什么太疯狂的事情。空列表模板只是一个简单的 h4 标签，其中包含一些文本。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:39:59.383

这是 v0.9.3 版本中的一个已知错误，并在即将发布的 v0.9.4 版本中修复。

该修复程序目前在 dev 分支中作为发布预览，如果您想立即获取它[https://github.com/derickbailey/backbone.marionette/tree/dev](https://github.com/derickbailey/backbone.marionette/tree/dev)

如果您想使用其中之一的代码修补您的版本，则有一些拉取请求提供了修复： [https ://github.com/derickbailey/backbone.marionette/pull/175](https://github.com/derickbailey/backbone.marionette/pull/175)

# python - 如何使 objects.filter 方法与接受字典的自定义模型字段一起工作 - Django？

> ID：11551361
> 
> 赞同：0
> 
> 时间：2012-07-18T22:34:11.620
> 
> 标签：python, django, django-models

我创建了一个自定义字段，允许用户传入字典。该字典在我的数据库中保存为字符串。这是我的 models.py 类的主要部分。

```
class OptionsField(models.Field):
    description = 'All options'
    #__metaclass__ = models.SubfieldBase

    def __init__(self, *args, **kwargs):
        kwargs['max_length'] = 2048
        kwargs['unique'] = False
        kwargs['null'] = True 
        super(OptionsField, self).__init__(*args, **kwargs) 

    def db_type(self, connection):
        return 'varchar(2048)'

    #Transforms database values to a python dictionary     
    def to_python(self, value): 
        if isinstance(value, dict):
            return value
        together = value.split(' \n')
        returnDictionary = {}
        for item in together:
            dictionaryField = item.split(' : ')
            returnDictionary[dictionaryField[0]] = dictionaryField[1]
        return returnDictionary

    #Transforms a python dictionary to database-compatible values (string)    
    def get_prep_value(self, dict): 
        databaseList = [] 
        print dict
        for key, value in dict.iteritems():
            listValue = ' : '.join([str(key), str(value)])
            databaseList.append(listValue)
        databaseList.sort()
        return ' \n'.join(databaseList) 
-------------------------------END OF CUSTOM FIELD---------------------

class MyModel(models.Model):
    options = OptionsField()

    class Meta:
        app_label = 'testingDB' 
```

在我的主要内容中，我可以执行以下操作

```
dictionary = {'a':'b', 'c':'d'}
example = MyModel(options = dictionary) 
example.save() 

example.options['ZZ'] = 'z'
example.options['a'] = 'grr'

example.save() 
```

第一次保存将以下内容放入数据库：

```
+----+--------+
| id | options| 
+----+--------+
|  1 | a : b  |  
|    | c : d  | 
+----+--------+ 
```

第二次保存将上述内容更改为：

```
+----+--------+
| id | options| 
+----+--------+
|  1 | a : grr|  
|    | c : d  | 
|    | ZZ : z |
+----+--------+ 
```

我如何在这个数据库中搜索呢？如果我做类似的事情 `test=MyModel.objects.filter(options['a'] = 'b')`

我得到了一个`SyntaxError: Keyword can't be an expression` 我假设我必须创建方法 get_prep_lookup，并且我已经尝试了很多东西，但它似乎不起作用。

文档：[https ://docs.djangoproject.com/en/1.4/howto/custom-model-fields/](https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:12:52.243

我想我想通了。对于其他希望在 Django 的主程序中使用字典的人来说，这就是我必须做的。

首先，我必须取消注释

```
__metaclass__ = models.SubfieldBase 
```

上面的行确保该`to_python`方法被自动调用。（我不完全理解，但在我附加的文档链接中进行了解释）。

`get_prep_lookup`之后我必须在 Field 类中完成该方法。这是出于搜索目的。这就是我所做的一切：

```
def get_prep_lookup(self, lookup_type, value):
    #value is a dictionary, eg: {'a': 'b', 'c':'d'}
    if lookup_type == 'exact':
        return self.get_prep_value(value) #this returns a 'database' string
    if lookup_type == 'contains':
        return self.get_prep_value(value) 
    if lookup_type == 'icontains':
        return self.get_prep_value(value) 
    else:
        raise TypeError('Lookup type %r not supported.' % lookup_type) 

def get_internal_type(self): 
#when creating the database, it'll make the columns CharFields
    return 'CharField' 
```

为了使用该类，我必须在主程序的搜索过滤器中进行一些修改；我不得不通过一本字典。

```
#First find all objects that contain the following dictionary 
#Because it's icontains, I could also search with {'A':'b'}, 
#as it's case insensitive. __contains isn't case sensitive
test = MyModel.objects.filter(options__icontains = {'a':'b'})
#Note: could've used 'get' instead of filter above, 
#as I know that just one value has dict value {'a':'b'}

#Change as desired
test[0].options['a'] = 'grr'
test[0].options['ZZ'] = 'z'

#save
test[0].save() 
```

这就是我获得第二张桌子的方式。

请注意，如果您错过了 __icontains 并且只写`filter(options = {'a':'b'})`了这将搜索**只有**字典值`{'a':'b'}`而没有其他内容的条目。另一个注意事项是，当然，您可以使用更大的字典进行搜索，它会起作用。

希望这会帮助一些人:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:05:49.563

您无法使用数据库中的键进行搜索，因为数据库只保存一个字符串，您可以做的是为您的表构建一个[管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)来帮助处理查询，也许使用正则表达式搜索可能会有所帮助，例如：

```
MyModel.objects.filter(options__regex=r'a : b')
MyModel.objects.filter(options__regex=r'.*c : d') 
```

这些可以是您的正常查询，您可以通过经理获取并使用该信息。

现在有一个流行的库用于在 python 类中保存字典，它会[腌制你的 dict](http://pypi.python.org/pypi/django-picklefield/)，我建议使用它。

# ruby - 无法运行 FileUtils.copy，因为当我需要“fileutils.rb”时收到错误消息

> ID：11551362
> 
> 赞同：2
> 
> 时间：2012-07-18T22:34:31.727
> 
> 标签：ruby, fileutils

在下面运行我的代码时，我收到以下错误

/Users/Castillo/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:1423:in `stat': No such file or directory - file.txt (Errno::ENOENT) from /Users/Castillo/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:1423:in`block in fu_each_src_dest' 来自 /Users/Castillo/.rvm/rubies/ruby- 1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:1439:in `fu_each_src_dest0' from /Users/Castillo/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/fileutils.rb:1421:in`fu_each_src_dest' 来自 /Users/Castillo/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/ fileutils.rb:391:in `cp' from learn3.rb:65:in`execute' from learn3.rb:83:in `block in execute' from learn3.rb:83:in`each' from learn3.rb:83:in `execute' from learn3.rb:103:in`'

几周前我在安装 BREW 时遇到了一些问题。这在某种程度上可能是问题的原因吗？

发布是我的代码

* * *

```
require 'fileutils.rb'

class Command
  # Allows us to read the description
  attr_reader(:description)

  # Initializes the class instance with the description command
  def initialize(description)
    @description = description
  end

  def execute
  end
end

class CreateFile < Command
  # Inherits from the Command class
  # Initialzied with two arguments 
  def initialize(path, contents)
    # Initialized description from parent class
    super("Create file: #{path}")
    @path = path
    @contents = contents
  end

  def execute
    # Open the file as writable
    f = File.open(@path, "w")
    # Write the contents to the file
    f.write(@contents)
    # Close the file
    f.close
  end
end

class DeleteFile < Command
  # Inherits from the Command class
  def initialize(path)
    # Initialize with the path
    super("Delete file: #{path}")
    # Inherits the description from Command class
    @path = path
  end

  def execute
    # Delete the file
    File.delete(@path)
  end
end

class CopyFile < Command
  def initialize(source, target)
    super("Copy file: #{source} to #{target}")
    @source = source
    @target = target
  end

  def execute
    FileUtils.cp(@source, @target)
  end
end

class CompositeCommand < Command
  # Inherits description and execute
  def initialize
    @commands = []
  end

  def add_command(cmd)
    @commands << cmd
  end

  def execute
    # Execute each command in the @commands array
    @commands.each { |cmd| cmd.execute }
  end

  def description
    description = ''
    # Each description neatly printed on its own line
    @commands.each { |cmd| description += cmd.description + "\n" }
    # Return all the descriptions 
    description
  end
end

cmds = CompositeCommand.new
puts cmds.description
cmds.add_command(CreateFile.new('file1.txt', "hello world\n"))
cmds.add_command(CopyFile.new('file.txt', 'file2.txt'))
cmds.add_command(DeleteFile.new('file1.txt'))
puts cmds.description
puts "Now executing all the commands"
cmds.execute
puts cmds.description 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:44:54.150

您在行的源文件名中有错字`cmds.add_command(CopyFile.new('file.txt', 'file2.txt'))`

将此行更改为`cmds.add_command(CopyFile.new('file1.txt', 'file2.txt'))`

# java - 使用码头服务器在 Eclipse 中进行远程调试

> ID：11551363
> 
> 赞同：1
> 
> 时间：2012-07-18T22:34:43.753
> 
> 标签：java, maven, jetty

我为远程调试我的 Maven 项目配置了调试配置。我将主机设置为 localhost，端口设置为 7000。由于启动不工作，我什至运行了以下命令：

```
java -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=7000,suspend=n 
```

但是它仍然没有启动远程 VM，我无法继续进行调试。

它给出了与以下相同的错误：

> 无法连接到远程 VM。连接被拒绝。

我应该如何着手解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:38:52.227

您可以从命令提示符发出以下命令。mvnDebug jetty:run-exploded antrun:run 然后你会知道你的码头正在监听哪个端口，然后从那里运行->调试配置，你可以调试你的服务器。在调试配置中，您可以在此处找到远程 Java 应用程序选项为新的远程 Java 应用程序创建一个新的调试配置，您还可以在这里再次定义您的新服务器**mvnDebug jetty:run-exploded** 现在您应该看到您的新端口。

# iphone - iOS 5 中的视图控制器

> ID：11551368
> 
> 赞同：1
> 
> 时间：2012-07-18T22:35:17.300
> 
> 标签：iphone, objective-c, ios, viewcontroller

我在 ViewController 中遇到问题。我正在使用 xcode 4.3.3，试图实现 iPhone 5.1 应用程序。每次我写一些关于 ViewController 的代码时，它都会报告相同的错误：使用未声明的标识符“viewController”。如果我用类型声明它`UIViewController`，它会出现运行时错误。

有些代码是这样的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{   
    self.window.rootViewController = [[UINavigationController alloc]initWithRootViewController:viewController];
    // Override point for customization after application launch.
    return YES;
} 
```

它在`AppDelegate`.m 文件中。

在 ios 4 和 5 中使用 viewController 有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:46:18.373

您实际上不需要为此修改 AppDelegate。

留空：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
} 
```

然后在你的故事板文件中选择你想成为第一个的视图控制器，并确保选择“是初始视图控制器”。

# c++ - 在 L1/L2 中快速合并 4K 浮点数的排序子集

> ID：11551369
> 
> 赞同：15
> 
> 时间：2012-07-18T22:35:38.833
> 
> 标签：c++, c, performance, algorithm, assembly

在现代（SSE2+）x86 处理器上合并多达 4096 个 32 位浮点数的数组的排序子集的快速方法是什么？

请假设以下情况：

*   整个集合的大小最多为 4096 个项目
*   子集的大小有待讨论，但我们假设最初在 16-256 之间
*   通过合并使用的所有数据最好适合 L1
*   L1 数据高速缓存大小为 32K。16K 已经用于数据本身，所以你有 16K 可以玩
*   所有数据都已经在 L1 中（尽可能高的置信度）——它刚刚被一个排序操作过
*   所有数据都是 16 字节对齐的
*   我们想尽量减少分支（原因很明显）

可行性的主要标准：比 L1 LSD 基数排序更快。

鉴于上述参数，我很想看看是否有人知道这样做的合理方法！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T02:45:31.303

这是一种非常幼稚的方法。（请原谅任何凌晨 4 点谵妄引起的伪代码错误；）

```
//4x sorted subsets
data[4][4] = {
  {3, 4, 5, INF},
  {2, 7, 8, INF},
  {1, 4, 4, INF},
  {5, 8, 9, INF}
}

data_offset[4] = {0, 0, 0, 0}

n = 4*3

for(i=0, i<n, i++):
  sub = 0
  sub = 1 * (data[sub][data_offset[sub]] > data[1][data_offset[1]])
  sub = 2 * (data[sub][data_offset[sub]] > data[2][data_offset[2]])
  sub = 3 * (data[sub][data_offset[sub]] > data[3][data_offset[3]])

  out[i] = data[sub][data_offset[sub]]
  data_offset[sub]++ 
```

**编辑：**
借助 AVX2 及其收集支持，我们可以同时比较多达 8 个子集。

**编辑 2：**
根据类型转换，在 Nehalem 上每次迭代可能会减少 3 个额外的时钟周期（mul：5，shift+sub：4）

```
//Assuming 'sub' is uint32_t
sub = ... << ((data[sub][data_offset[sub]] > data[...][data_offset[...]]) - 1) 
```

**编辑 3：**通过使用两个或多个值
，可以在某种程度上利用乱序执行，特别是当 K 变大时：`max`

```
max1 = 0
max2 = 1
max1 = 2 * (data[max1][data_offset[max1]] > data[2][data_offset[2]])
max2 = 3 * (data[max2][data_offset[max2]] > data[3][data_offset[3]])
...
max1 = 6 * (data[max1][data_offset[max1]] > data[6][data_offset[6]])
max2 = 7 * (data[max2][data_offset[max2]] > data[7][data_offset[7]])

q = data[max1][data_offset[max1]] < data[max2][data_offset[max2]]

sub = max1*q + ((~max2)&1)*q 
```

**编辑4：**

根据编译器的智能，我们可以使用三元运算符完全删除乘法：

```
sub = (data[sub][data_offset[sub]] > data[x][data_offset[x]]) ? x : sub 
```

**编辑5：**

为了避免昂贵的浮点比较，我们可以简单地`reinterpret_cast<uint32_t*>()`处理数据，因为这会导致整数比较。

另一种可能性是利用 SSE 寄存器，因为它们没有类型，并明确使用整数比较指令。

这是因为运算符`< > ==`在解释二进制级别的浮点数时产生相同的结果。

**编辑6：**

如果我们充分展开循环以使值的数量与 SSE 寄存器的数量相匹配，我们就可以暂存正在比较的数据。

在迭代结束时，我们将重新传输包含所选最大值/最小值的寄存器，并将其移位。

尽管这需要稍微修改索引，但它可能比在循环中乱扔`LEA`'s 更有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T23:46:19.220

这更像是一个研究主题，但我确实找到[了这篇论文](http://www.cs.au.dk/~gerth/papers/wads05.pdf)，它讨论了使用 d-way 合并排序最小化分支错误预测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T03:15:48.103

想到的最明显的答案是使用堆的标准 N 路合并。那将是 O(N log k)。子集的数量在 16 到 256 之间，因此最坏情况下的行为（256 个子集，每个子​​集 16 个项目）将是 8N。

缓存行为应该是……合理的，尽管并不完美。大部分操作所在的堆可能会始终保留在缓存中。被写入的输出数组部分也很可能在缓存中。

您拥有的是 16K 的数据（具有已排序子序列的数组）、堆（1K，最坏的情况）和已排序的输出数组（再次为 16K），并且您希望它适合 32K 缓存。听起来像一个问题，但也许不是。最有可能被换出的数据是插入点移动后输出数组的前面。假设排序后的子序列是相当均匀分布的，它们应该被足够频繁地访问以将它们保存在缓存中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T21:51:41.310

您可以免费合并 int 数组（昂贵的）分支。

```
typedef unsigned uint;
typedef uint* uint_ptr;

void merge(uint*in1_begin, uint*in1_end, uint*in2_begin, uint*in2_end, uint*out){

  int_ptr in [] = {in1_begin, in2_begin};
  int_ptr in_end [] = {in1_end, in2_end};

  // the loop branch is cheap because it is easy predictable
  while(in[0] != in_end[0] && in[1] != in_end[1]){
    int i = (*in[0] - *in[1]) >> 31;
    *out = *in[i];
    ++out;
    ++in[i];
  }

  // copy the remaining stuff ...
} 
```

注意 (*in[0] - *in[1]) >> 31 等价于 *in[0] - *in[1] < 0 等价于 *in[0] < *in[1]。我使用位移技巧而不是

```
int i = *in[0] < *in[1]; 
```

是不是所有的编译器都会为 < 版本生成无分支代码。

不幸的是，您使用的是浮点数而不是整数，这起初看起来像是一个炫技，因为我看不到如何真正实现 *in[0] < *in[1] 分支免费。然而，在大多数现代架构上，您将正浮点数的位模式（也不是 NAN、INF 或其他奇怪的东西）解释为整数并使用 < 进行比较，您仍然会得到正确的结果。也许您将此观察扩展到任意浮点数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-22T12:01:23.400

SIMD 排序算法已经被详细研究过。论文[Efficient Implementation of Sorting on Multi-Core SIMD CPU Architecture](http://pcl.intel-research.net/publications/sorting_vldb08.pdf)描述了一种高效算法，用于执行您所描述的（以及更多）。

核心思想是，您可以减少合并两个任意长的列表以合并*k*个连续值的块（其中*k*的范围可以从 4 到 16）：第一个块是`z[0] = merge(x[0], y[0]).lo`. 为了获得第二个块，我们知道剩余部分`merge(x[0], y[0]).hi`包含来自 的`nx`元素`x`和`ny`来自 的元素`y`，其中`nx+ny == k`。但是`z[1]`不能同时包含`x[1]`and中的元素`y[1]`，因为这需要`z[1]`包含多个`nx+ny`元素：所以我们只需要找出需要添加的`x[1]`和。`y[1]`具有较低第一个元素的元素必然首先出现在`z`，所以这只是通过比较它们的第一个元素来完成。我们只是重复这一点，直到没有更多的数据可以合并。

伪代码，假设数组以一个`+inf`值结尾：

```
a := *x++
b := *y++
while not finished:
    lo,hi := merge(a,b)
    *z++ := lo
    a := hi
    if *x[0] <= *y[0]:
        b := *x++
    else:
        b := *y++ 
```

（注意这与合并的通常标量实现有多么相似）

在实际实现中当然不需要条件跳转：例如，您可以有条件地交换`x`和`y`使用`xor`技巧，然后无条件地读取`*x++`。

`merge`本身可以用双调排序来实现。但是如果*k*低，就会有很多指令间依赖，导致高延迟。根据您必须合并的数组数量，您可以选择足够高的*k*以便`merge`屏蔽 的延迟，或者如果可能的话，可以交错几个双向合并。有关详细信息，请参阅论文。

* * *

**编辑**：下图是*k* = 4 时的图表。所有渐近线都假设*k*是固定的。

*   大的灰色框正在合并两个大小为*n* = *m* * *k*的数组（在图片中，*m* = 3）。

    ![在此处输入图像描述](../Images/c260e23f42f3fe6e249f2461f88c7cf3.png)

    1.  我们对大小为*k*的块进行操作。
    2.  “整体块合并”框通过比较两个数组的第一个元素逐块合并两个数组。这是一个线性时间操作，它不消耗内存，因为我们将数据流式传输到块的其余部分。性能并不重要，因为延迟将受到“merge4”块延迟的限制。
    3.  每个“merge4”框合并两个块，输出下面的*k*个元素，并将上面的*k*个元素馈送到下一个“merge4”。每个“merge4”框执行有限数量的操作，“merge4”的数量在*n*中是线性的。
    4.  所以合并的时间成本在*n*中是线性的。并且由于“merge4”的延迟比执行 8 次串行非 SIMD 比较低，因此与非 SIMD 合并相比会有很大的加速。
*   最后，为了扩展我们的 2 路合并以合并许多数组，我们以经典的分而治之的方式排列大灰色框。每个级别的复杂度与元素数量呈线性关系，因此总复杂度为 O( *n* log ( *n* / *n0* ))，其中*n0*是排序数组的初始大小，*n*是最终数组的大小。

    ![图表](../Images/790a82f6f209ed0fc1dbb6788f6a4a2c.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-21T04:34:16.033

你可以做一个简单的合并内核来合并 K 个列表：

```
float *input[K];
float *output;

while (true) {
  float min = *input[0];
  int min_idx = 0;
  for (int i = 1; i < K; i++) {
    float v = *input[i];
    if (v < min) {
      min = v;     // do with cmov
      min_idx = i; // do with cmov
    }
  }
  if (min == SENTINEL) break;
  *output++ = min;
  input[min_idx]++;
} 
```

没有堆，所以很简单。不好的部分是它是 O(NK)，如果 K 很大，这可能会很糟糕（与 O(N log K) 的堆实现不同）。因此，您只需选择一个最大 K（4 或 8 可能很好，然后您可以展开内部循环），并通过级联合并来做更大的 K（通过对列表组进行 8 路合并来处理 K=64，然后结果的8路合并）。

# php - 在选项列表中添加 php 错误

> ID：11551370
> 
> 赞同：0
> 
> 时间：2012-07-18T22:35:49.743
> 
> 标签：php, wordpress

下面的代码是 cart66 WordPress 插件的 php 文件的一部分。例如，当我列出我的项目的选项时，

T 恤数量：1 选项：红色、黄色、蓝色

第一个选项总是我放在列表中的第一位。因此，当我的客户不注意并在不查看列表的情况下添加到购物车时，他们会订购红色。我在顶部添加了“请选择一种模式”选项，但他们仍将其添加到购物车和结帐中。有没有办法添加一个选项并让它在选择该选项时出错？

```
 private function _buildOptionList($optNumber) {
    $select = '';
    $optionName = "options_$optNumber";
    if(strlen($this->$optionName) > 1) {
      $select = "\n<select name=\"options_$optNumber\" id=\"options_$optNumber\" class=\"cart66Options options_$optNumber\">";
      $opts = split(',', $this->$optionName);
      foreach($opts as $opt) {
        $opt = str_replace('+$', '+ $', $opt);
        $opt = trim($opt);
        $optDisplay = str_replace('$', CART66_CURRENCY_SYMBOL, $opt);
        $select .= "\n\t<option value=\"" . htmlentities($opt) . "\">$optDisplay</option>";
      }
      $select .= "\n</select>";
    }
    return $select;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:43:42.363

您可以使用 jQuery 和 Javascript 来显示警告框。

```
<script type="text/javascript">
    $(function() {
        $('#options').change(function() {
            if ($(this).attr('value') == "Please choose a pattern") {
                alert("Please pick a color!");
            }
        });
    });
</script> 
```

确保在您的页面中包含最近的 jQuery 副本，并将选择框的 id="" 值更改为选项（没有任何 PHP 变量）。

此外，如果用户提交了有效的颜色，请不要忘记仍然检查 PHP。这样做是因为如果用户禁用了 Javascript，他仍然可以选择“请选择模式”项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:48:48.483

那是一个商业插件（尽管有一个免费的“精简版”版本）。我首先建议查看他们的支持论坛：

[http://cart66.com/support/](http://cart66.com/support/)

如果您不介意自己编辑 PHP，那么也许我可以提供一些建议。

例如，您可以先有一个空白选项，然后在选择空白项目时让验证码拒绝将该项目添加到卡中。您粘贴的代码看起来像是将选项列表作为逗号分隔的字符串。因此，您可以通过以“，”开头的字符串来获得空白选项，例如“,Red,Yellow,Blue”。但这对用户来说不是很友好，最好将第一个命名为“Select Option”并且值为“”。由于上面的代码不允许这样做，您可以更改该代码，例如：

```
 private function _buildOptionList($optNumber) {
    $select = '';
    $optionName = "options_$optNumber";
    if(strlen($this->$optionName) > 1) {
      $select = "\n<select name=\"options_$optNumber\" id=\"options_$optNumber\" class=\"cart66Options options_$optNumber\">";
      $opts = split(',', $this->$optionName);
      foreach($opts as $opt) {
        if($opt == "<blank>") {
          $opt = "";
          $optDisplay = "Select One";
        } else {
          $opt = str_replace('+$', '+ $', $opt);
          $opt = trim($opt);
          $optDisplay = str_replace('$', CART66_CURRENCY_SYMBOL, $opt);
        }
        $select .= "\n\t<option value=\"" . htmlentities($opt) . "\">$optDisplay</option>";
      }
      $select .= "\n</select>";
    }
    return $select;
  } 
```

然后你可以让你的选项列表是“，红色，黄色，蓝色”。

您可能还需要修改 cart66 的验证码以确保它拒绝空白选择。我不知道它是否只是通过查看上面的代码片段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T23:07:15.427

有几种方法可以做到这一点。最简单的是，使用纯 Javascript 将其添加到`<form>`元素中：`<form onsubmit="if ( this.options_1.selectedIndex() == 0 ) { alert( 'Please select a colour' ); return false; >`

（`options_1`将需要与`$optNumber`用于生成下拉列表的匹配。`return false;`将阻止表单提交）

你可以使用 jQuery 来使它更整洁、更灵活；例如，给你的选项一个特殊的值，比如“_NOT_SELECTED_”，并使用类似的东西

```
<script type="text/javascript">
jQuery(function($) {
    $('form.cart66Form').bind('submit', function()
    {
        $('select.cart66Options').each( function()
        {
            if ( $(this).val() == '_NOT_SELECTED_' )
            {
                $('#incorrect_submission_message').show();
                return false;
            }
        }
        return true;
    }
});
</script> 
```

最后，当然，验证总是最好在服务器端完成，在这种情况下意味着在 PHP 中，因此您需要找到插件中“添加到购物篮”操作发生的位置（或者您可以添加一些操作的位置）到它）并添加一些东西来检查您的特殊值（“_NOT_SELECTED_”，或者只是“-”）是否已提交。

# javascript - jquery 迷你图：箱线图和一个值

> ID：11551371
> 
> 赞同：1
> 
> 时间：2012-07-18T22:35:55.513
> 
> 标签：javascript, boxplot, sparklines

我正在使用 Sparklines 并试图绘制一个简单的 blox 图，其中包含预定的最小值、最大值、胡须、四分位数和一个附加值——用户的值可能落在四分位数之内或之外（重点是向用户展示他/她的价值落在分布中）

这样做的适当方法是什么？我可以得到一个基本的盒子，但看不到如何在上面放置一个点。我也看不到如何设置最小值和最大值，但看起来异常值是这样做的。

这是我的代码：

```
<script type="text/javascript">
  $(function() {
    var myboxvalues = [0, 200, 450, 500, 550, 800, 1000];
    $('.inlinebox').sparkline( myboxvalues, {type: 'box', raw: true });
  });
</script>
</head>
<body>
<p>
My box: <span class="inlinebox"></span>
</p> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:25:35.287

标志是“目标：...”

```
{type: 'box', raw: true, target: 713 } 
```

# jquery - 如何在 iPhone 的 Web 应用程序中监听或绑定滚动事件（内置 PhoneGap）？

> ID：11551379
> 
> 赞同：1
> 
> 时间：2012-07-18T22:36:38.880
> 
> 标签：jquery, ios, html, cordova

我们已经阅读了关于是否建议使用 jQuery 绑定或收听滚动事件的相互矛盾的信息。

本质上，我们希望在用户向下滚动页面时在图像中制作动画，类似于 Google Plus iPhone 应用程序所做的。

是否有更好的方法来响应滚动事件（特别是，当隐藏的图像进入视野并且应该以动画形式显示时）？人们在绑定到滚动事件时做了什么？我们不应该使用 jQuery 并自己滚动一些东西吗？

# c# - c#从一个Formless Form2到from1窗口

> ID：11551382
> 
> 赞同：0
> 
> 时间：2012-07-18T22:36:59.743
> 
> 标签：c#, visual-studio-2012

我试图将任何类型的文本从 form2 获取到我使用的 1

```
button_click()
{
form1 text1 = new form1();
text1.textbox.text = "lol";
} 
```

但它不会用它从 1 更新。它只是发送空值然后我找到了这个类

[从 Form1 将值设置为 Class1 中的属性，然后使用 C# Windows Form 将 Class1 中的该属性的值获取到 Form2](https://stackoverflow.com/questions/7551379/set-value-into-a-property-in-class1-from-form1-then-get-value-of-that-property-i)

它得到了我想要的问题是我希望它尽快更新文本框，而不是按下两个表单上的按钮以使其更新，如果我可以让它从 form2 更新，那将是可怕的。

我什至试过

```
public form1(string text)
{
  textBox.Text = text;
} 
```

表格2

```
form1 textbox = new form1(textbox.text); 
```

[http://bildr.no/view/1232007](http://bildr.no/view/1232007)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:42:20.150

您可以使用该[`Application.OpenForms`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)来获取对其他表单的引用：

```
Form1 form1 = Application.OpenForms["Form1"] as Form1;
if(form1 != null)
{
    form1.SetTextBoxText("lol");
} 
```

您需要提供一个公共方法`SetTextBoxText`来`Form1`更改 TextBox 中的文本：

```
public void SetTextBoxText(String text)
{
    textBox.Text = text;
} 
```

# javascript - 使用expectjs进行摩卡测试，让模型匹配哈希？

> ID：11551384
> 
> 赞同：0
> 
> 时间：2012-07-18T22:37:13.113
> 
> 标签：javascript, testing, mocha.js

目前我正在这样做：

```
expect( tasks.at(0).get('title') ).to.be('Root')
expect( tasks.at(0).get('next') ).to.be(true) 
```

但似乎应该有更好的方法。我宁愿做这样的事情：

```
expect(tasks.at(0).attributes).to.eql({title:'Root', next:true}) 
```

但这不起作用，因为`tasks.at(1).attributes`有许多其他属性，所以它不严格匹配。有任何想法吗？我可以使用除 expectjs 以外的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:20:47.007

我不知道这是否是最好的方法，但我听取了@skizeey 的建议并制作了自己的测试扩展。换句话说，现在我调用（在咖啡脚本中）：

```
expect(tasks).to.have.modelAttributes
  1: title:'Root'
  2: title:'Child' 
```

我使用的代码非常特定于我正在使用的测试库（切换到 Chai），但总体思路是我遍历哈希，提取索引，然后查看每个键：值。这是我的代码的通用示例：

```
 # Check each index
    for index of properties
        # Iterate over each key:value in each index
        for key of properties[index] 
```

# apache - 生成 mod_rewrite.so

> ID：11551385
> 
> 赞同：0
> 
> 时间：2012-07-18T22:37:14.603
> 
> 标签：apache, mod-rewrite, apache2

我已经用命令编译了 apache2 ..

**./configure --enable-so --enable-module=rewrite**

我找不到文件 mod_rewrite.so

我需要做什么？怎么了？对不起我的英语不好。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:50:56.027

如果编译步骤顺利，您应该能够在系统中找到 mod_rewrite.so，如下所示：

```
updatedb && locate mod_rewrite.so 
```

或者您也可以使用查找：

```
find / -name mod_rewrite.so 
```

# java - 在一个 JDBC 准备语句中插入两个不同的表

> ID：11551386
> 
> 赞同：0
> 
> 时间：2012-07-18T22:37:17.530
> 
> 标签：java, mysql, sql, jdbc

这个命令：

```
INSERT INTO t1 values (d1)
INSERT INTO t2 values (d2) 
```

我想运行一个准备好的语句。从逻辑上讲，它们应该是事务性的，因此包装在一个块中。这在我理解的 JDBC 中是否可能每次更新都不允许多个 SQL 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:25:04.313

您需要开始一个事务，运行两个插入，然后提交。或者在您的 JDBC 连接参数中查看[allowMultiQueries=true 。](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)

# java - 如何控制注释元素出现的顺序？

> ID：11551400
> 
> 赞同：2
> 
> 时间：2012-07-18T22:38:26.913
> 
> 标签：java, annotations

创建新注释时

```
public @interface Invariant {
    String min();
    String max();
    String Default();
    String freeform();
} 
```

元素似乎按字母顺序出现。我想知道是否有办法强制与注释本身中建立的顺序相同？

我明白了

```
 @Invariant(Default = "", freeform = "", max = "", min = "") 
```

我想得到

```
 @Invariant(min = "", max = "", Default = "", freeform = "") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:04:03.610

注释中元素的顺序无关紧要，强制排序完全没有意义。不要在这上面浪费你的努力，这不值得——而且无论如何，你不能强制订购，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:00:43.283

不，我怀疑是否有办法强制属性的顺序。

# php - CakePHP 1.3：高 CPU 使用率

> ID：11551401
> 
> 赞同：0
> 
> 时间：2012-07-18T22:38:29.343
> 
> 标签：php, linux, cakephp, hosting, cpanel

我有一个在共享主机帐户上运行的 CakePHP 应用程序，提供商一直在困扰我很多 (A2HOSTING) 我的帐户过度使用 CPU 资源，有时是 100%。

仅在最近几个小时，CPanel 就报告 CPU 使用率很高。我和他们谈过，他们说一切都指向“webroot”目录。我只有`index.php`和`css.php`。

任何想法，可能导致此问题的原因，以及我可以做些什么来解决它，因为他们威胁要暂停我的帐户。

![在此处输入图像描述](../Images/f145e9f9a87f4152d2f3575dd8ac331e.png)

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:15:42.233

没有更多信息，没有太多可说的。现在，让我们从什么是使用 100% cpu 开始？MySQL 还是 PHP？此外，您使用的条件。任何关联等等...

如果在您的本地设置上一切正常，那么我将首先查看它与您的服务器之间的任何差异。CakePHP、PHP、MySQL 的版本……它们有什么不同吗？服务器是否运行其中一个臭名昭著的版本？

让我们责怪数据库：数据库结构和数据真的相同吗？仔细观察每一个细节。你有相同的内容吗？确切地？克隆您的开发数据库，​​包括所有表定义和数据。

有时我注意到我的逻辑失误，“干净”的数据库会导致问题，因为我在整个开发过程中都有数据，并且由于某种原因我错过了如果表为空某些东西（看似无关）将失败.

让我们责怪 PHP：当 PHP 最终达到 100% cpu 时，问题通常是它卡在某个地方的循环中。这条线附近有吗？如果你让请求运行，你会得到超时还是内存不足？

除非您的服务器加载了 200'000 条相关记录，否则查找“第一个”永远不会导致内存不足。尝试指定递归 -1。那就是：从任何其他表中绝对不加载任何内容。

参考：[https ://groups.google.com/forum/?fromgroups#!topic/cake-php/lS91s355_Pw](https://groups.google.com/forum/?fromgroups#!topic/cake-php/lS91s355_Pw)

[这篇文章](http://www.sks.com.np/article/4/reduce-high-cpu-usage-overload-problem-caused-by-mysql.html)可能会帮助您减少 CPU 过载。

# c++ - C++ 中“使用命名空间”的危险

> ID：11551409
> 
> 赞同：-4
> 
> 时间：2012-07-18T22:39:32.400
> 
> 标签：c++, namespaces, using

> **可能重复：**
> [为什么是“使用命名空间标准；” 在 C++ 中被认为是一种不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

之前有人告诉我，`using namespace ...;`在 C++ 中使用存在一些危险，因为它会乱扔全局命名空间或其他东西。这是真的吗？是否有任何真正的危险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:41:56.963

仅当在标头中使用 using namespace ... 时才存在危险。因为标题可能包含在任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:42:26.437

是的，它是真实的。网上有很多关于这个问题的文档。这是因为它使全局名称空间名称可用，以后您自己可以很好地使用这些名称空间名称。例如，如果您包含 std 命名空间，然后尝试编写 max() 或 min() 函数，您很可能会遇到编译器错误。

# .net - 如何使用 PRISM 创建 XAML 初始屏幕

> ID：11551410
> 
> 赞同：3
> 
> 时间：2012-07-18T22:39:36.763
> 
> 标签：.net, wpf, xaml, prism, unity-container

我将 PRISM 4.1 与 UNITY 一起用于我的应用程序。我想显示一个漂亮的初始屏幕，它将是一个显示进度条的 xaml 窗口。一旦加载了所有模块（其中一个模块在启动时执行冗长的数据库访问操作），启动屏幕应该关闭并显示 shell。我找不到任何示例，所有在线示例都使用仅指向静态图像的内置 SplashScreen。我希望我的启动画面是 xaml 而不仅仅是静态图像或动画 gif。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:13:47.553

要通过引导程序启动您自己的基于 XAML 的启动画面（在此示例中，他指的是基于 Window 的“他自己的”SplashScreen.xaml ....不要与内置的 SplashScreen 类混淆）：

*   [http://www.thejoyofcode.com/Showing_a_Splash_Screen_whilst_initializing_a_WPF_Prism_application.aspx](http://www.thejoyofcode.com/Showing_a_Splash_Screen_whilst_initializing_a_WPF_Prism_application.aspx)

要启动您自己在模块中定义的基于 XAML 的启动画面窗口：

*   [http://prismsplashscreen.codeplex.com/](http://prismsplashscreen.codeplex.com/)

要使用引用静态图像作为启动画面的内置 SplashScreen 类（请注意启动图像未设置为 Build Type=SplashScreen ...它设置为 Built Type=Resource ....因为资源被引用在构造函数中）：

*   [http://compositewpf.codeplex.com/discussions/258644/](http://compositewpf.codeplex.com/discussions/258644/)
*   [https://skydrive.live.com/?cid=12a8b70137345033&sc=documents&id=12A8B70137345033%21147](https://skydrive.live.com/?cid=12a8b70137345033&sc=documents&id=12A8B70137345033%21147)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-12T08:43:46.957

Try this example : Prism Splash Screen Module

This project is intended to demonstrade a neat way for developers to add splash screen to their Prism based applications. The main features are:1\. The splash screen is encapsulated in a Prism module, which can be loaded explicitly by bootstraper code or implicitly loaded fro...

[http://www.java2s.com/Open-Source/CSharp_Free_Code/Application/Download_Prism_Splash_Screen_Module.htm](http://www.java2s.com/Open-Source/CSharp_Free_Code/Application/Download_Prism_Splash_Screen_Module.htm)

# dependency-injection - 具有依赖注入 (IoC) 的 Outlook 加载项

> ID：11551411
> 
> 赞同：3
> 
> 时间：2012-07-18T22:39:39.253
> 
> 标签：dependency-injection, ioc-container, autofac, outlook-addin

我正在编写一个带有单独核心类库的 Outlook 加载项。我正在尝试使用 Ioc 容器（Autofac），但是对于如何将 Outlook 会话注册为我的服务的依赖项，我有点迷茫。

我是DI新手。

在我的 ThisAddIn.cs 文件中，我在我的类库中实例化了一个引导程序：

```
public override void BeginInit()
{
  _core = new AddInBootstrapper();

  base.BeginInit();
} 
```

AddInBootStrapper.cs 类在我的核心类库中。它的构造函数如下所示：

```
public AddInBootstrapper()
    {
        var containerBuilder = new ContainerBuilder();

        containerBuilder.RegisterType<OutlookService>().As<IOutlookService>();
        containerBuilder.RegisterType<EmailPrintService>().As<IPrintService<Microsoft.Office.Interop.Outlook.MailItem>>();

        _container = containerBuilder.Build();
    } 
```

我的 OutlookService 类依赖于 Outlook 会话（ThisAddIn.Application.Session）：

```
public OutlookService(Microsoft.Office.Interop.Outlook.NameSpace session)
    {
        _session = session;
    } 
```

我不确定如何以正确的方式连接它。我是否只是通过其构造函数将 Session 传递给 Bootstrapper 类，然后将其连接起来，还是有另一种/更好的方法？

```
_core = new AddInBootstrapper(this.Application.Session); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:28:47.907

我最终将会话从 ThisAddIn 类传递到 Core 类库，它工作正常。

```
public AddInBootstrapper(Microsoft.Office.Interop.Outlook.NameSpace session)
    {
        var containerBuilder = new ContainerBuilder();

        containerBuilder.Register(c => new OutlookService(session)).As<IOutlookService>();
        containerBuilder.RegisterType<EmailPrintService>().As<IPrintService<Microsoft.Office.Interop.Outlook.MailItem>>();

        _container = containerBuilder.Build();
    } 
```

# c# - 多个主要功能

> ID：11551412
> 
> 赞同：70
> 
> 时间：2012-07-18T22:39:48.317
> 
> 标签：c#, java, main

我对此有点陌生，所以请耐心等待。我目前正在学习 C# 和 Java，它们的相似之处之一是 main 函数需要封装在一个类中。例如

```
public class HelloWorld {
    public static void main(String[] args) {
        // Some Code
    }
} 
```

现在我明白了 main 通常是运行程序时的“入口点”。所以基本上，你的程序将在 main 函数所在的任何地方开始执行。但我相信在这两种语言中，您都可以在多个类中拥有多个主要功能。那么当我编译一个具有多个主要功能的项目时，“入口点”在哪里呢？编译器如何知道从哪里开始？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-18T22:42:19.947

在 Java 中，计算机在您实际执行程序时确定“入口点”，而不是在您编译时。例如，从命令行

```
java MyClass 
```

`main()`在 中搜索`MyClass`。所有其他`main()`功能都被忽略。

如果您使用的是 IDE，那么您可以设置哪个类包含`main()`您要使用的功能。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-07-18T22:42:27.153

在 .NET 中，您可以定义哪个类包含您在编译时要使用的 Main 方法。

[http://msdn.microsoft.com/en-us/library/x3eht538.aspx](http://msdn.microsoft.com/en-us/library/x3eht538.aspx)

在 Java 中，如果您要捆绑到一个 jar，您可以在 jar 的清单中定义您的入口点。

[http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-18T22:49:16.643

在 C# 中，您可以使用多种`Main`方法。

如果有多个`Main`方法，编译器不知道要使用哪个入口点，因此会显示错误。

*您*需要[指定要在编译时使用的`Main`方法](http://msdn.microsoft.com/en-us/library/x3eht538.aspx)：您可以在 Visual Studio 开发环境中或通过 csc 编译器指定要用作编译器选项的方法。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-07-18T22:59:38.347

主类是一个特殊的类，原因只有一个：当您运行 Java 虚拟机时，该函数就是 JVM 调用的函数。它本质上与任何其他函数一样，实际上您可以从另一个类调用一个类的主函数。

当你编译一个包含多个类的项目时，你告诉 JVM 使用你想要使用的主类来运行这个类，如下所示：

```
java SomeClass 
```

它将运行 SomeClass 的 main 方法，假设 SomeClass 已编译并且适当的编译文件在您的类路径中。（这是您必须使用特定操作系统解决的问题，但我认为 -cp 选项指定类路径是相当常见的）。所以这：

```
java -cp /home/MyName Someclass 
```

将运行目录 /home/MyName 中的 SomeClass 的主要功能

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-18T22:51:08.650

`/main:`在 C# 中，您使用编译器选项指定入口点。

考虑以下包含两个`main()`函数的代码：

```
namespace Application {
    class ClassOne {
        static void main () {
            // Code here
        }
    }

    class ClassTwo {
        static void main () {
            // Code here
        }
    }
} 
```

要`ClassOne.main()`用作您的入口点，您将在编译时指定以下内容：

```
csc /main:Application.ClassOne hello.cs 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-07-18T23:11:16.937

正如其他人指出的那样，在 Java 中，您在运行`java`命令时定义包含 main 函数的类。

但是您也可以构建一个可执行的 jar，它可以使用`java -jar my.jar`. 在这种情况下，您需要一个在 jar`MANIFEST.MF`文件夹中调用的清单文件。`META-INF`在此文件中，您使用以下语句指定包含主函数的类：`Main-Class: YourClass`.

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-07-19T02:26:57.607

对于多个主函数入口点可以声明为：

在 Visual Studio 开发环境中设置此编译器选项

打开项目的属性页面。

单击应用程序属性页。

修改启动对象属性。

参考：http: [//msdn.microsoft.com/en-us/library/x3eht538.aspx](http://msdn.microsoft.com/en-us/library/x3eht538.aspx)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-07-19T05:18:50.030

主要方法是静态的，这意味着它属于类而不是对象。所以对象内部根本不会有另一个主要方法。它不会有额外的 main 方法，因为 main 是静态的。所以每堂课一次。

如果您的项目中有多个主方法，您将在启动应用程序时指定要启动的主方法

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-25T03:56:23.093

事实上，在二进制文件中，例如windows中的PE格式和Linux或其他任何系统中的ELF格式，二进制文件的头部都会指定起始地址在哪里，并且只能有一个。

哪一个应该是切入点？这取决于链接器。就像@SetFreeByTruth 所说，您可以使用命令行参数指定它。许多链接器支持使用命令行参数指定入口点。例如，gnu 的gld 可以用参数-e 指定入口点。

我不知道 Java 的行为，因为它是由 Java 虚拟机加载的。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-12-12T20:40:44.400

在 Visual Studio 中，选择要作为入口点的项目，右键单击并设置为启动项目。

# vb.net - VB.NET 应用程序在目录上设置受限文件权限，这错误地限制了用户在同一目录中创建的文件

> ID：11551429
> 
> 赞同：2
> 
> 时间：2012-07-18T22:42:48.840
> 
> 标签：vb.net, permissions, file-permissions, ntfs, folder-permissions

我的 VB.NET 应用程序构建了一个访问受限的目录树。

访问权限应该是普通用户不能删除或重命名现有树。但是用户可以在树中的任何位置添加新文件/文件夹。用户创建的文件/文件夹应该可以被任何用户完全修改。

我遇到的问题是设置访问权限，以便无法更改应用程序创建的文件/文件夹，但任何用户都可以更改用户创建的文件/文件夹。

当前发生的情况是应用程序生成的文件/文件夹行为正确。但是当用户创建自己的文件/文件夹时，该文件/文件夹的权限仅列出当前用户。因此其他用户（甚至是应用程序创建的文件/文件夹的系统管理员）无法查看或修改此用户创建的文件/文件夹。

**当前代码：（** 当用户自己创建文件/文件夹时，此代码不授予对 UserGroup 或 AdminGroup 的访问权限，仅授予刚刚创建文件/文件夹的用户）

```
FolderAcl.AddAccessRule(New FileSystemAccessRule(UserGroup,
                        FileSystemRights.ReadAndExecute,
                        InheritanceFlags.None, PropagationFlags.None,
                        AccessControlType.Allow))
FolderAcl.AddAccessRule(New FileSystemAccessRule(UserGroup,
                        FileSystemRights.Write,
                        InheritanceFlags.None, PropagationFlags.None,
                        AccessControlType.Allow))

FolderAcl.AddAccessRule(New FileSystemAccessRule(AdminGroup,
                        FileSystemRights.FullControl,
                        InheritanceFlags.None, PropagationFlags.None,
                        AccessControlType.Allow))

FolderAcl.SetAccessRuleProtection(True, False) 
```

**另一个尝试：（** 当用户自己创建文件/文件夹时，此代码授予对 UserGroup 和 AdminGroup 的访问权限，但不授予对用户的访问权限。用户在 UserGroup 中，但 UserGroup 没有删除或修改权限，所以如果用户创建了一个文件/文件夹，他们甚至不能命名它。）

```
' same code as above except...
InheritanceFlags.None ---> InheritanceFlags.Container or InheritanceFlags.Object 
```

我已经尝试过 InheritanceFlags 和 PropagationFlags 的其他组合，但还没有运气。

有任何想法吗？
谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:59:31.973

**更新：**

您可以随时中断继承并决定保留继承的访问规则的副本或使用以下方法将其删除

```
SetAccessRuleProtection(True, True) 
```

第一个布尔参数，如果为真，则打破继承保护，第二个，如果为真，保留访问规则的副本，以便您可以仅删除不需要的那些。

以下示例应反映您评论的文件夹结构：

```
 ' folder structure
        '
        '---Level1
        '     |
        '     ---Level2
        '          |
        '          ---Level3

        'set access rules at level1 with inheritance

        Dim Level1DirSec As DirectorySecurity = Directory.GetAccessControl("c:\level1")

        Level1DirSec.AddAccessRule(New FileSystemAccessRule(New System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.BuiltinAdministratorsSid, Nothing),
         FileSystemRights.FullControl,
         InheritanceFlags.ContainerInherit + InheritanceFlags.ObjectInherit,
         PropagationFlags.None,
         AccessControlType.Allow))

        Level1DirSec.AddAccessRule(New FileSystemAccessRule(New System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.AuthenticatedUserSid, Nothing),
          FileSystemRights.ReadAndExecute,
          InheritanceFlags.ContainerInherit + InheritanceFlags.ObjectInherit,
          PropagationFlags.None,
          AccessControlType.Allow))

        Directory.SetAccessControl("c:\level1\", Level1DirSec)

        ' break inheritance at level3 and remove access rule for authenticated user group

        Dim Level3DirSec As DirectorySecurity = Directory.GetAccessControl("c:\level1\level2\level3")

        Level3DirSec.SetAccessRuleProtection(True, True)

        Level3DirSec.RemoveAccessRuleAll(New FileSystemAccessRule(New System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.AuthenticatedUserSid, Nothing), FileSystemRights.ReadAndExecute, AccessControlType.Allow))

        Directory.SetAccessControl("c:\level1\level2\level3", Level3DirSec) 
```

* * *

您可以使用[WellKnownSid](http://msdn.microsoft.com/en-us/library/system.security.principal.wellknownsidtype.aspx)指定组并将其设置在具有继承的根文件夹中：

```
 FolderAcl.AddAccessRule(New FileSystemAccessRule(New System.Security.Principal.SecurityIdentifier(WellKnownSidType.AuthenticatedUserSid, Nothing),
             FileSystemRights.ReadAndExecute,
             InheritanceFlags.ContainerInherit + InheritanceFlags.ObjectInherit,
             PropagationFlags.None,
             AccessControlType.Allow))

    FolderAcl.AddAccessRule(New FileSystemAccessRule(New System.Security.Principal.SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, Nothing),
             FileSystemRights.FullControl,
             InheritanceFlags.ContainerInherit + InheritanceFlags.ObjectInherit,
             PropagationFlags.None,
             AccessControlType.Allow)) 
```

这将为所有经过身份验证的用户提供 r/w 访问权限，以及对管理员组对您的根文件夹以及所有子文件夹和文件的完全访问权限。

# couchdb - 创建大量 couchdb 数据库来存储评论是个好主意吗？

> ID：11551432
> 
> 赞同：1
> 
> 时间：2012-07-18T22:43:02.027
> 
> 标签：couchdb

我需要做一个消息应用程序，我想使用 couchdb。

消息文档是这样的：

```
message = {
   'from':'uuid1',
   'to':'uuid2',
   'message':'asd asd asd',
   'date':1342643405.84
} 
```

我需要过滤以获取针对用户的消息并按日期进行分页。

所以为了过滤我创建了一个视图... emit([doc.from, doc.to], doc) ...

为了更好地进行分页而不是仅仅跟踪键，我想每天、每周或每月创建一个新的数据库来存储消息。数据库名称可以是这样的（这是按天计算的）：

```
...
message_2012/07/01
message_2012/07/02
message_2012/07/03
... 
```

这样我可以只打数据库的一部分，但我不知道这是一个好主意还是坏主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:19:40.917

CouchDB 构建索引的方式（使用 B 树）意味着只要您适当地创建视图，您就不必担心您担心的是什么。

您需要使用日期作为您发出的复合键中的第一个键来创建视图。并且您需要一个单独的视图来分页/分组/排序的每个日期类型。因此，如果您希望能够每天、每周、每月和每年选择文档，那么您将需要四个视图 - 一个用于每种不同类型的日期。

只需确保将您的日期转换为可以按词法排序/搜索/分组的格式。例如，您的每月视图可能是：

```
function(d) {
  if( d.from && d.to && d.date ) {
    var date = new Date( d.date ),
      month = ('0' + (1 + date.getMonth())).slice(-2),
      year = date.getYear();

    date_string = date.getFullYear() + '-' + month;

    emit( [ date_string, d.from, d.to ] );
  }
} 
```

# graph - 在 Neo4J 中，如何获得图中最大的节点 ID？

> ID：11551437
> 
> 赞同：1
> 
> 时间：2012-07-18T22:43:35.377
> 
> 标签：graph, neo4j, graph-databases, cypher

我正在运行一个遍历所有节点的脚本。最初，我认为最大节点 ID 将对应于我通过 REST 上的 Cypher 查询检索到的图中的节点总数：

```
START n=node(*) RETURN count(n) 
```

但是，当我遍历每个数字时，我发现某些 id 的节点根本不存在。所以，这意味着我的最大 id 节点是一个大于节点总数的数字。知道如何检索这个号码吗？我非常喜欢 Cypher 或 Rest。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:42:30.723

您可以通过 JMX 获取此号码，请参阅[http://docs.neo4j.org/chunked/1.4.2/operations-monitoring.html](http://docs.neo4j.org/chunked/1.4.2/operations-monitoring.html)或使用 Java 通过

```
Neo4jManager manager = new Neo4jManager( graphDb.getManagementBean( Kernel.class ) );
long nodeIDsInUse    = manager.getPrimitivesBean.getNumberOfNodeIdsInUse(); 
```

这也通过 REST 暴露给 Webadmin JMX 端点，从

```
http://localhost:7474/db/manage/server/jmx/domain/org.neo4j/instance%3Dkernel%230%2Cname%3DPrimitive%20count?_=1342719685294 
```

# ember.js - 使用对象作为选项时，如何设置 Ember.js 选择视图的值？

> ID：11551443
> 
> 赞同：3
> 
> 时间：2012-07-18T22:44:16.387
> 
> 标签：ember.js

在使用对象而不是字符串时，我在弄清楚如何让 Ember 的选择视图更新 dom 时遇到了一些麻烦。此示例的行为符合我的预期：

[http://jsfiddle.net/XZ9b7/](http://jsfiddle.net/XZ9b7/)

仅使用字符串数组作为值，通过单击按钮将绑定属性的值设置为新值将自动更新 dom 并将下拉列表设置为相同的值。

但是，在此示例中使用对象时：

[http://jsfiddle.net/pRBKt/](http://jsfiddle.net/pRBKt/)

我尝试将绑定属性的值设置为 id、值和选项对象本身的副本，但我无法让它影响选择视图。

使用对象作为选项时，我只需要一种方法来设置选择视图的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:00:08.850

我在你的小提琴中添加了另一个按钮：

```
<div><button onclick="App.someObject.set('letterSelection', App.someOptions.objectAt(0));">real a</button></div> 
```

[http://jsfiddle.net/Sly7/BYjk6/#base](http://jsfiddle.net/Sly7/BYjk6/#base)

我认为您必须使用相同的对象，但不能使用副本。因此，在您的情况下，您必须从绑定到 Ember.Select 的 content 属性的数组中获取对象。

编辑：jsfiddle 使用#each 和 {{action}}。我认为它清理了模板和代码。

[http://jsfiddle.net/Sly7/sCr8T/](http://jsfiddle.net/Sly7/sCr8T/)

```
<script type="text/x-handlebars">
  {{view Ember.Select
    contentBinding="App.someOptions"
    selectionBinding="App.someObject.letterSelection"
    optionLabelPath="content.val"
    optionValuePath="content.id"
  }}
  {{App.someObject.letterSelection.val}}
  {{#each option in App.someOptions}}
    <div>
      <button {{action "updateSelection" target="App.someObject" context="option"}}>{{option.val}}</button>
    </div>        
  {{/each}}
</script> 
```

JavaScript：

```
window.App = Ember.Application.create();

App.someObject= Ember.Object.create({
  title: "Some Title",
  letterSelection: null, 

  updateSelection: function(event){
    var newSelection = event.context;
    this.set('letterSelection', newSelection);
  }
});

App.someOptions = [
  {'id':'id_a','val':'a'},
  {'id':'id_b','val':'b'},
  {'id':'id_c','val':'c'},
  {'id':'id_d','val':'d'}
]; 
```

# ios - Monotouch 中的 DequeueReusableCell 导致单元格在滚动时重新排列

> ID：11551449
> 
> 赞同：1
> 
> 时间：2012-07-18T22:44:53.953
> 
> 标签：ios, uitableview, xamarin.ios, monotouch.dialog

我正在使用 Monotouch.Dialog 类来填充`UITableView`. 我正在使用自定义单元格，您可以在 Element 中看到获取单元格的代码如下：

```
public override UITableViewCell GetCell (UITableView tv)
{
var cell = tv.DequeueReusableCell(_key) as FoodItemCell;

if (cell == null)
   cell = new FoodItemCell(_foodItem, _key);
else
   cell.UpdateCell(_foodItem);

return cell;
} 
```

我从 Miguel De Icaza 的在线帖子中获得了这段代码，该帖子建议了为 MonoTouch.Dialog 创建自定义单元格的正确方法。

数据显示得当，但是当我有一个长列表并且我快速上下滚动时，单元格会以随机不可预测的方式交换位置。所以当我完成滚动时，行中的单元格可能会在第 4 行结束。

当我使用下面的代码时，这个问题得到了解决，但正如你所见，我没有将单元格出列，这可能会产生内存问题。

```
private FoodItemCell _currentCell;

public override UITableViewCell GetCell (UITableView tv)
{
    if(_currentCell == null)
    {
        _currentCell = new FoodItemCell(_foodItem, _key);
        return _currentCell;
    }
    else
    {
        return _currentCell;
    }
} 
```

这是完整的代码：

```
public class FoodItemElement: Element
{
    private static NSString _key = new NSString ("foodItemCell");
    private FoodItem _foodItem;
    public event EventHandler<ElementClickedEventArgs> ElementClicked;

    public FoodItemElement(FoodItem foodItem): base(null)
    {
        _foodItem = foodItem;
    }

    public override UITableViewCell GetCell (UITableView tv)
    {
        var cell = tv.DequeueReusableCell(_key) as FoodItemCell;

        if (cell == null)
            cell = new FoodItemCell(_foodItem, _key);
        else
            cell.UpdateCell(_foodItem);

        return cell;
    }
}

public class FoodItemCell: UITableViewCell
{    
    private FoodItemCellDataView _dataView;
    private FoodItem _foodItem;

    public FoodItemCell(FoodItem data, NSString key) : base (UITableViewCellStyle.Default, key)
    {
        _foodItem = (FoodItem)data;
        _dataView = new FoodItemCellDataView(_foodItem);

        ContentView.Add(_dataView);
        ConstructCell();
    }

    public override void LayoutSubviews ()
    {
        base.LayoutSubviews ();
        _dataView.Frame = ContentView.Bounds;
        _dataView.SetNeedsDisplay ();
    }

     /// <summary>
     /// Updates the cell.
     /// </summary>
    public void UpdateCell(FoodItem newData)
    {
        _dataView.Update(newData);
        SetNeedsLayout();
    }

    /// <summary>
    /// Constructs the cell.
    /// </summary>
    private void ConstructCell()
    {
        //This prevents the default blue color when selecting the cell.
        //this.SelectionStyle = UITableViewCellSelectionStyle.None;
        //this.ContentView.BackgroundColor = UIColor.White;

        var lblFoodItemName = new UILabel();
        lblFoodItemName.Frame = new System.Drawing.RectangleF(4,2,270,20);
        lblFoodItemName.TextColor = UIColor.Black;
        lblFoodItemName.Font = Fonts.H3;
        lblFoodItemName.BackgroundColor = UIColor.Clear;
        lblFoodItemName.Text = _foodItem.Name;

        var lblCalories = new UILabel();
        lblCalories.Frame = new System.Drawing.RectangleF(15,22,75,20);
        lblCalories.TextColor = UIColor.Black;
        lblCalories.Font = Fonts.Small;
        lblCalories.BackgroundColor = UIColor.Clear;
        lblCalories.Text = "CAL - " + _foodItem.CaloriesRounded.ToString();

        var lblPortion = new UILabel();
        lblPortion.Frame = new System.Drawing.RectangleF(95,22,190,20);
        lblPortion.TextColor = UIColor.Black;
        lblPortion.Font = Fonts.Small;
        lblPortion.BackgroundColor = UIColor.Clear;
        lblPortion.Text = "Portion - " + _foodItem.Portion.ToString();

        this.ContentView.AddSubview(lblFoodItemName);
        this.ContentView.AddSubview(lblCalories);
        this.ContentView.AddSubview(lblPortion);

        Accessory = UITableViewCellAccessory.DisclosureIndicator;
    }   
}

// I create a view that renders my data, as this allows me to reuse
// the data rendering outside of a UITableViewCell context as well.
public class FoodItemCellDataView : UIView {

     public FoodItemCellDataView(FoodItem foodItem)
     {
          Update (foodItem);
     }

     // Public method, that allows the code to externally update
     // what we are rendering.   
     public void Update(FoodItem foodItem)
     {
          SetNeedsDisplay();
     }
} 
```

有谁知道我如何正确地将单元格出列并且没有滚动问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T13:27:42.830

您的代码没有显示 _dataView.Update(newData) 的作用，但我认为它不会更改单元格布局上的任何内容，而只是用新数据刷新 UI 元素。在那种情况下（我一定很生气与 Miguel 相矛盾），您应该在每次访问 GetCell 时调用 cell.UpdateCell(_foodItem)，无论该单元格是出列还是新的，所以：

```
public override UITableViewCell GetCell (UITableView tv)
{
var cell = tv.DequeueReusableCell(_key) as FoodItemCell;

if (cell == null)
   cell = new FoodItemCell(_foodItem, _key);
// else  <- I would remove this
   cell.UpdateCell(_foodItem);

return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:30:13.380

很难确定为什么没有看到更多的源代码（见我的评论）。

这是一个工作示例 ( [BubbleCell](https://github.com/xamarin/monotouch-samples/blob/master/BubbleCell/BubbleCell/Bubble.cs) )，您可以使用它来比较您的代码。

一个重要的部分是调用[`SetNeedsLayout`](https://github.com/xamarin/monotouch-samples/blob/master/BubbleCell/BubbleCell/Bubble.cs#L79)你的`UpdateCell`方法。否则，*旧*内容可能会在刷新完成之前出现（在新的重用单元格中）。这可以解释你的问题。

# c++ - cpp中结构的未解析外部符号？

> ID：11551452
> 
> 赞同：3
> 
> 时间：2012-07-18T22:45:10.060
> 
> 标签：c++, windows, visual-studio-2010, compiler-construction, linker

我知道大多数时候你会因为不包括库或在类中没有正确定义函数而得到 UNRESOLVED EXTERNAL SYMBOL，但我在结构上得到同样的错误。我在其中一个 .hi 中定义了几个文件 .cpp 和 .h

```
extern struct MyDataStruct StructData; 
```

我将这个 .h 包含在我的 .cpp 文件中，但我得到了

```
'struct MyDataStruct StructData' unresolved external symbol 
```

我从任何类中定义了这个结构，并且我在没有任何类前缀的情况下访问它。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:57:18.940

您实际上需要在一个唯一的 .cpp 文件中定义它，即在目标文件中为其分配一些空间，例如

```
struct MyDataStruct StructData; 
```

注意在这种情况下没有外部。

虽然所有其他代码都通过保留 extern 的标头中的声明来访问它 - 这告诉编译器和链接器可执行文件中的其他地方有一些东西可以解析引用。

# objective-c - 从另一个类中的方法访问结果

> ID：11551458
> 
> 赞同：0
> 
> 时间：2012-07-18T22:45:20.133
> 
> 标签：objective-c, xcode, class, methods

嗨，我正在尝试从我的另一个类中的方法获取结果。该方法是CalculatorBrain.m 中的一个类方法。问题是 Class 方法使用了另一个类 graphingView.m 没有存储在其中的实例变量。GraphingView 仅在单击按钮并被连接到时才被调用。如何在没有适当变量的情况下调用此类方法来启动该方法？

此方法存储在计算器大脑中。我想在 graphingView 中访问它

```
+ (double)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues
{
  NSMutableArray *stack;
  if ([program isKindOfClass:[NSArray class]]) {
      stack = [program mutableCopy];
  }

  return [self popOperandOffProgramStack:stack];
} 
```

到目前为止，我有这个：

```
[CalculatorBrain runProgram:<#(id)#> usingVariableValues:<#(NSDictionary *)#> 
```

我不知道如何将我必须的值放入计算器大脑中的实例变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:50:15.740

将结果保存到属性中，然后您可以在另一个类中访问它们。

（我假设您在同一个视图控制器中并且正在从它访问两个模型。）

# iis - 使用 MsDeploy 和 MsDeployAgentService 部署到特定站点

> ID：11551459
> 
> 赞同：0
> 
> 时间：2012-07-18T22:45:29.210
> 
> 标签：iis, msdeploy

我正在尝试使用 MsDeploy 将站点从文件夹部署到我的 Web 服务器。Web 服务器安装了 MsDeployAgentService。我能够使用以下命令将站点部署到 msdeploy。

```
msdeploy -verb:sync -source:dirPath=C:\src\website -dest:auto,computerName='http://192.168.0.2/MsDeployAgentService',userName=Administrator,password=xxxxxx 
```

但是，我无法弄清楚这些文件是否已部署到服务器上。我想将文件部署到 Web 服务器上的特定站点，而不是“默认网站”

用于在 Web 服务器上指定目标站点的 msdeploy 开关或选项是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:52:06.893

我使用-source 和 -dest的 Web Deploy ' [contentPath ' 提供程序让它工作。](http://technet.microsoft.com/en-us/library/dd569034%28WS.10%29.aspx)工作命令如下所示：

```
msdeploy -verb:sync -source:contentPath=C:\src\website -dest:contentPath="d:\sites\mywebsite",computerName='http://192.168.0.2/MsDeployAgentService',userName=Administrator,password=xxxxxx 
```

# php - php更改选择框选项

> ID：11551460
> 
> 赞同：0
> 
> 时间：2012-07-18T22:46:00.010
> 
> 标签：php, drop-down-menu

我正在使用 php 并尝试使用 php 更改选项我的代码如下所示：

```
<?php
$ProductName = 'test2';
?>

<select id="product" name="product" value=<? echo $ProductName; ?> >
   <option value="test1">Option 1</option>
   <option value="test2">Option 2</option>
   <option value="test3">Option 3</option>
   <option value="test4">Option 4</option>
</select> 
```

但是以上内容并没有改变选项。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:51:22.383

有几种方法可以做到这一点。首先，您要查找的 HTML 是：

```
<option value="test2" selected="selected">Option 2</option> 
```

我自己更喜欢 Javascript/jQuery 方法，因为它不会把我的代码弄得一团糟。在`select`HTML 之后：

```
$("#product option[value='<?php echo $productName;?>']").attr('selected','selected'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:49:05.437

你必须这样：

```
<select id="product" name="product" value="" >
    <option value="test1"<? if($ProductName == "test1") echo " selected"; ?>>Option 1</option>
    <option value="test2"<? if($ProductName == "test2") echo " selected"; ?>>Option 2</option>
    <option value="test3"<? if($ProductName == "test3") echo " selected"; ?>>Option 3</option>
    <option value="test4"<? if($ProductName == "test4") echo " selected"; ?>>Option 4</option>
</select> 
```

但是最好将选项的值和名称放在一个数组中并在循环中进行检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:50:24.497

您需要将`selected`属性添加到`<option>`元素。你可能会考虑这样的事情：

```
<?php
$options = array('test1' => 'Option 1',
                 'test2' => 'Option 2', ...);

$selected = 'test1';
?>

<select id="product" name="product">
   <?php foreach ($options as $value => $text): ?>
      <option value="<?=$value?>"<?=$value == $selected ? ' selected' : ''?>>
        <?=$text?>
      </option>
   <?php endforeach; ?>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T22:48:05.887

使用选择框时，正确的 HTML 应该是这样的：

```
<select id="product" name="product">
   <option value="test1" selected>Option 1</option>
   <option value="test2">Option 2</option>
   <option value="test3">Option 3</option>
   <option value="test4">Option 4</option>
</select> 
```

因此，在您要选择的值的末尾添加“选定”字样。

在 PHP 中，您可以轻松地做到这一点：

```
<select id="product" name="product">
<?php
$options = array(1 => 'Option 1', 2 => 'Option 2', 3 => 'Option 3');
foreach ($options as $key => $value) { 
   echo '<option value="' . $key . '"' . ($key == $_GET["test"] ? ' selected="selected"' : '') . '>' . $value . '</option>';
} ?>
</select> 
```

# javascript - 如何引用 Firefox 扩展的数据目录中的文件？

> ID：11551467
> 
> 赞同：7
> 
> 时间：2012-07-18T22:46:43.130
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在开发 Firefox 扩展，我需要将 JavaScript 从内容脚本注入页面。在我的 Chrome 扩展程序中，我执行了以下操作：

```
this.initializeJplayerSupport = function() {
  var script = document.createElement('script');
  script.setAttribute('type', 'application/javascript');
  script.setAttribute('src', chrome.extension.getURL('js/custom-jplayer.js'));
  document.head.appendChild(script);
} 
```

该文件位于我的数据目录中。如何在 firefox 扩展内容脚本（我曾用于`chrome.extension.getURL()`Chrome）中引用 js 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T07:26:09.377

如果您在基于 SDK 的附加组件的 main.js 中，则需要并使用来自“self”对象的“data”助手：

```
var data = require('self').data;

console.log(data.url('somefile.js')); // prints the resource uri to the file. 
```

欲了解更多信息：

[https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/self#data](https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/self#data)

获得此资源 uri 后，您可以使用 self.postMessage 或 self.port.emit 将其提供给内容脚本：

[https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/Content_Scripts](https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/Content_Scripts)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-13T14:05:39.080

看起来从 Firefox 38 开始，`cfx`已被替换为`jpm`.

这可能就是为什么这条线对我不起作用：

```
var data = require('self').data; 
```

我只需要稍微重写一下：

```
var data = require('sdk/self').data; 
```

# sql-server-2005 - 在 SQL Server 2005 中，如何锁定特定行以防止读取和写入？

> ID：11551471
> 
> 赞同：0
> 
> 时间：2012-07-18T22:46:53.437
> 
> 标签：sql-server-2005, locking

我知道锁定一行以防止被读取可能有点不寻常，但在这种情况下它有点相关。对于 SQL Server 2005 中的行级锁，如何为读取和写入锁定一行？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:59:57.017

简短的回答是，它不能完成。

您可以通过页面锁定做出“最佳尝试”来防止对行进行读取（以对并发性产生相当大的负面影响为代价）。

```
SELECT ... WITH (PAGLOK,XLOCK) 
```

如果您可以在一个页面上获得排他锁，那么从其他会话对该页面的读取将被有效地阻止。但是注意：即使在聚集索引中的页面上获得了排他锁，仍然不会阻止读取器从非聚集索引中读取行值。所以你仍然没有真正阻止所有读取。

排他行锁（而不是表或页锁）对于阻塞读取器基本上是无用的，因为会话和查询可以轻松解决排他行锁。（会话可以解决具有事务隔离级别的锁，查询可以使用`WITH (NOLOCK)`提示解决它们。）

SQL Server 锁定是一个相当复杂的主题，我不打算在这里深入研究。

真正的问题（RThomas 在他的评论中强调，是弄清楚为什么你需要防止读取一行。无论是什么原因，很可能会证明获得排他行（或页）锁不是最好的（或对）解决您试图解决的问题。

# c - C中的Malloc和数组索引混淆

> ID：11551472
> 
> 赞同：7
> 
> 时间：2012-07-18T22:47:18.150
> 
> 标签：c, arrays, malloc

我试图掌握 C 中的 malloc 函数，并编写了以下代码：

```
int i;

int *arr = (int*)malloc(5*sizeof(int)); 

if(arr==NULL){

  printf("Failed to allocate memory for arr...\n");
  exit(1);

} 
```

我认为这意味着只能将 5 个元素添加到数组中。为了测试这是否属实，我添加了以下代码：

```
arr[0] = 1;
arr[1] = 2;
arr[2] = 3;
arr[3] = 4;
arr[4] = 5;
arr[5] = 6;
arr[6] = 7;
arr[7] = 8;
arr[8] = 9;

for(i=0;i<9;i++){

    printf("%d\n",arr[i]);

} 
```

令人惊讶的是，该代码编译并完美运行。这怎么可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T22:48:49.413

C 不强制执行*任何*数组边界检查，因此当您请求 5 个整数的空间时，您使用了更多。

事实上，您覆盖了 4 个内存位置，这些内存位置实际上并没有为您的特定目的留出。您的程序*经过*了为数组预留的内存区域，并开始将值存储在分配区域之外的内存中。

这个“有效”的事实只是纯粹的运气，而不是依赖的东西。它可能会在接下来的 100 次中工作，或者在您*下次*尝试时可能会失败，很可能会出现“分段错误”消息。

防御性编程，就像您通过明智地检查 malloc 的返回值所做的那样，注意*您*负责边界检查，编译启用了高警告级别的代码等，是防止此类错误的最佳防御措施。其他工具，例如[valgrind](http://valgrind.org/)、lint 类型检查器也可以提供帮助，但最终取决于您。

C 的最大优势之一，它可以自由地做各种事情，无论是低级还是高级，这也是其最大的弱点之一。如果 Java 是一辆沃尔沃，那么 C 可能更像是一辆有时断断续续的法拉利 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:49:31.730

C 不做边界检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:49:40.737

> 这怎么可能？

您正在写超出数组的末尾。这[不会导致程序](https://stackoverflow.com/a/6453028/65358)（立即）崩溃，因为在 C 中没有边界检查，但是，如果你写得足够远，它最终会导致错误。有时您可能能够编写数百个 int 值，而有时您可能无法编写任何额外的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T22:52:43.517

您计算机中的内存基本上是按顺序排列的。你要求`malloc`给你一小块内存——足够 5 个整数。您的计算机中的可用内存肯定比分配长度为 5 的数组所需的内存多。因此，如果您写入或读取`arr[8]`，您正在写入内存中的其他位置。

通常，现代计算机具有如此多的内存，以至于您可能正在编写未使用的某个地方。但偶尔，您会不小心覆盖其他一些`malloc`'d 数据。

请注意，*有时*您的程序会崩溃（如您所料）。这是因为您可能会尝试在分配的内存之外写这么远，以至于地址不再有效。您的操作系统通常会捕捉到这一点并为您崩溃您的程序。

# sockets - 为数据包注入构建radiotap头和ieee80211头结构

> ID：11551476
> 
> 赞同：2
> 
> 时间：2012-06-06T16:05:56.900
> 
> 标签：sockets

我正在尝试使用 Wifi 在两台笔记本电脑之间进行通信。我使用的radiotap头和ieee80211头的结构是：

```
 struct ieee80211_radiotap_header {
unsigned char it_version;
uint16_t it_len;        
uint32_t it_present;
 };

 /* Structure for 80211 header */

 struct ieee80211_hdr_3addr {
    uint16_t frame_ctl[2];
    uint16_t duration_id;
    unsigned char addr1[ETH_ALEN];
    unsigned char addr2[ETH_ALEN];
    unsigned char addr3[ETH_ALEN];
    uint16_t seq_ctl;
  };

struct packet {
   struct ieee80211_radiotap_header rtap_header;
   struct ieee80211_hdr_3addr iee802_header;
   unsigned char payload[30];

  };

  /* In main program */

   struct packet mypacket;
   struct ieee80211_radiotap_header ratap_header;
   struct ieee80211_hdr_3addr iee802_header;

   unsigned char addr1[ETH_ALEN] = {0xFF,0xFF,0xFF,0xFF,0xFF,0xFF};  /* broadcast address */
   unsigned char addr2[ETH_ALEN] = {0x28,0xcf,0xda,0xde,0xd3,0xcc};  /* mac address of   
                                                                      network card */
   unsigned char addr3[ETH_ALEN] = {0xd8,0xc7,0xc8,0xd7,0x9f,0x21};   /* mac address of   
                                                  access point i am trying to connect to */

  /* Radio tap header data */
   ratap_header.it_version = 0x00;
   ratap_header.it_len = 0x07;      
   ratap_header.it_present =  (1 << IEEE80211_RADIOTAP_RATE);

   mypacket.rtap_header = ratap_header;

   /* ieee80211 header data */

    iee802_header.frame_ctl[0] = IEEE80211_FC0_VERSION_0 | IEEE80211_FC0_TYPE_MGT | 
                                                          IEEE80211_FC0_SUBTYPE_BEACON;
iee802_header.frame_ctl[1] =IEEE80211_FC1_DIR_NODS;
    strcpy(iee802_header.addr1,addr1);
    strcpy(iee802_header.addr2,addr2);
    strcpy(iee802_header.addr3,addr3);
    iee802_header.seq_ctl = 0x1086;

    mypacket.iee802_header=iee802_header;

   /* Payload */

   unsigned char payload[PACKET_LENGTH]="temp";

   strcpy(mypacket.payload , payload); 
```

当我在同一台笔记本电脑上测试传输和接收时，我能够接收数据包。但是，我无法接收在另一台笔记本电脑上传输的数据包。Wireshark 也不显示数据包。

谁能指出我犯的错误？

# asp.net-mvc - 如何在视图上下文之外获取 ModelMetadata？

> ID：11551480
> 
> 赞同：12
> 
> 时间：2012-07-18T22:48:11.573
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我需要导出某种数据（构建一个文件），因此数据不会由 Views 生成（渲染），而是由视图之外的纯 C# 代码生成（渲染）。但我需要一些 ModelMetadata 信息。

我还问如何在单元测试中构建 ModelMetadata ，以及在 Views 之外？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T05:39:44.647

假设您有一个包含一些元数据的视图模型：

```
public class MyViewModel
{
    [DisplayName("Bar")]
    public string Foo { get; set; }
} 
```

您可以像这样检索此元数据：

```
ModelMetadata metadata = ModelMetadata.FromLambdaExpression<MyViewModel, string>(
    x => x.Foo, 
    new ViewDataDictionary<MyViewModel>()
);

Assert.AreEqual("Bar", metadata.DisplayName); 
```

* * *

更新：

根据评论部分的要求，如果在运行时只知道类型，这里是如何获取元数据：

```
var type = typeof(MyViewModel);
var metadata = ModelMetadataProviders.Current.GetMetadataForType(null, type); 
```

如果您想获取子属性的元数据，只需指定属性的名称：

```
var type = typeof(MyViewModel);
var metadata = ModelMetadataProviders.Current.GetMetadataForProperty(null, type, "Foo"); 
```

# .net - MSMQ 可靠度

> ID：11551482
> 
> 赞同：0
> 
> 时间：2012-07-18T22:48:18.127
> 
> 标签：.net, msmq, soa, reliable-message-delivery

最近我在域环境中使用本地帐户设置 msmq 通信通道时遇到了一些困难。这是很常见的场景，我需要在队列属性中授予匿名用户的访问权限。

但是从那一刻起有一件事困扰着我：当我的应用程序无法将消息发送到远程私有队列时，它们就消失在某个地方了。我的队列是事务性的，我将 DefaultPropertiesToSend.Recoverable 设置为 true。在发送消息的机器上创建了出站消息队列，但在发送尝试后，出站队列中没有等待消息，发送过程中也没有异常。这是设计使然吗？

# filesystems - 繁忙的照片网站 - 照片文件夹结构

> ID：11551490
> 
> 赞同：1
> 
> 时间：2012-07-18T22:49:03.390
> 
> 标签：filesystems, storage, server-side, photolibrary

我有一个繁忙的照片网站，其中包含大约 350,000 张照片。高分辨率、可下载的照片存储在 Amazon S3 存储桶中，但缩略图和预览存储在我的专用服务器上。

目前，我在 1 个照片文件夹中有 350,000 个缩略图，并且该网站正在快速增长。我最好将所有缩略图留在一个文件夹中，可能达到几百万，或者我应该开始以编程方式缩放文件夹结构，例如；photo1, photo2, photo3 并且每个文件夹中有 100k 个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:08:16.243

明确地将它们拆分为文件夹结构。我发现有用的一种方法是将文件夹结构设置为文件名的子字符串。

例如 `23155104112.jpg`：

```
..\231
..\231\551
..\231\551\041
..\231\551\041\23155104112.jpg 
```

这样你就不需要存储额外的路径数据，文件总是在你期望的地方，而且你永远不会在一个文件夹中得到太多的文件。

# heroku - Heroku 的 DNS 问题

> ID：11551500
> 
> 赞同：1
> 
> 时间：2012-07-18T22:50:17.337
> 
> 标签：heroku, dns

我正在尝试将子域 journal.mydomain.com 指向我的 Heroku 应用程序。我已按照[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)`heroku domains:add journal.mydomain.com`中的建议添加了域并设置了适当的 CNAME 记录。但是，它似乎没有按预期工作。当我在浏览器中访问 journal.mydomain.com 时，它有时可以工作，但通常只是加载 mydomain.com。当我运行时，我得到：`host journal.mydomain.com`

```
 % host journal.mydomain.com
journal.mydomain.com has address XX.XX.XX.XX
journal.mydomain.com is an alias for adeel-journal.herokuapp.com.
adeel-journal.herokuapp.com is an alias for ar.herokuapp.com.
ar.herokuapp.com is an alias for argon-stack-1879049447.us-east-1.elb.amazonaws.com.
journal.adeel.ru is an alias for adeel-journal.herokuapp.com.
adeel-journal.herokuapp.com is an alias for ar.herokuapp.com.
ar.herokuapp.com is an alias for argon-stack-1879049447.us-east-1.elb.amazonaws.com. 
```

第一行似乎是问题所在（XX.XX.XX.XX 当然是 IP 地址）。通配符记录是否可能与 CNAME 记录发生冲突？如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:35:48.573

嗯，它实际上并没有修复，但我只是最终切换了 DNS 提供商，现在很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:05:04.187

似乎您不小心创建了`A`和`CNAME`记录`journal.adeel.ru`- 这可以解释片状行为。

删除 A 记录并只使用 CNAME - 虽然看起来你可能已经解决了它，因为这是我从我的结尾看到的：

```
matt@indianajones:~$ host journal.adeel.ru
journal.adeel.ru is an alias for adeel-journal.herokuapp.com.
adeel-journal.herokuapp.com is an alias for ar.herokuapp.com. 
```

从 curl 发回的标头来看，我也肯定会点击您的 Heroku 应用程序。

# ruby - 如何让 Open4 以交互方式捕获所有标准输出？

> ID：11551505
> 
> 赞同：1
> 
> 时间：2012-07-18T22:50:35.693
> 
> 标签：ruby, open4

我正在尝试在 Ruby 脚本中执行 shell 命令。有问题的 shell 命令 ( `pg_dump`) 提示用户输入密码。我想做的是在子进程中执行 shell 命令，并让我的父进程以交互方式输入密码。

我希望所有人都`stdout`被`stderr`父进程捕获，这样它就不会显示给用户。

这是一些代码。它应该证明的是 Open4 能够`stdout`从 shell 命令中捕获。不幸的是，它没有这样做。

```
puts "Executing \"#{pg_dump_command}\""

stdin = ''
stdout = ''
stderr = ''

thread = Open4::background(pg_dump_command, 0 => stdin, 1 => stdout, 2 => stderr)

while(status = thread.status)
  puts '.'

  sleep 1
end

puts "STDOUT: #{stdout}"
puts "STDERR: #{stderr}" 
```

这是输出。请注意，它会打印“密码：”，尽管 Open4 传递了一个用于`stdout`.

```
Executing "pg_dump -U myuser -Fc mydb > /tmp/db.dump"
.
Password: .
.
(the dots continue for as long as a password is not entered)
STDOUT: 
STDERR: pg_dump: [archiver (db)] connection to database "mydb" failed: FATAL:  password authentication failed for user "myuser" 
```

我错过了什么？谢谢你的帮助。

# api - REST API 自定义资源对象和 url

> ID：11551507
> 
> 赞同：1
> 
> 时间：2012-07-18T22:50:41.807
> 
> 标签：api, rest, resources, salesforce

在考虑如何设计诸如 Salesforce 自定义对象之类的东西并通过 REST 公开它们。假设开发人员想要创建一堆自定义对象，例如教师、学生、班级。现在，这些对象中的每一个都可能被公开，您将如何处理 Rest URL 中的对象/资源冲突？

例如：

/v1/objects/teachers 是公开的

然后另一个开发人员决定他们也想创建一个教师对象并将其公开。好吧，教师显然在一个全局命名空间的对象集中，不再可用。看来 salesforce 通过使用对象的命名空间来处理这个问题，所以它变成了这样：

/v1/objects/命名空间/教师

我很好奇其他人想到其他方法来处理这个问题？

我考虑过让它们无论如何都生成唯一的资源名称......为每个创建的资源添加一个以资源为前缀的命名空间......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:40:03.730

一种选择是使用对象“创建的日期时间”而不是 url 中的命名空间。

/v1/objects/01112012002010/老师

除非有人在同一个实例中创建对象，否则这应该在 99.99% 的时间内有效。

阿努普

# php - 来自命令行的快速基准测试

> ID：11551509
> 
> 赞同：9
> 
> 时间：2012-07-18T22:50:49.300
> 
> 标签：php, bash, benchmarking

我想对 PHP 脚本进行基准测试，但这同样适用于可以从命令行运行的任何内容。

使用 bash 是否有一种简单的方法来对脚本进行基准测试，即多次运行命令并且需要多长时间？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T06:53:10.607

在命令行中，您可以：

```
$ time php foobar.php 
```

这`time`是一个内置的bash。

对于多次运行：

```
$ time for a in {1..10}; do php foobar.php; done
real    0m13.042s
user    0m0.021s
sys     0m0.044s 
```

但是，您需要手动计算平均时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:23:05.457

如果您只想对 PHP 脚本进行基准测试，为什么不为它编写一个单元测试。像：

```
<?php

function test() {
    require 'my_script_to_test.php';
}

for ($i = 0; $i < 1000; $i++) {
    $time = microtime(true);
    test();
    $time = microtime(true) - $time;
    echo 'test '.$i.': '.$time;
    // and then you can also average time and w/e 
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T13:52:03.853

如果不想手动计算平均值，请添加到[Xiè Jìléi 答案中：](https://stackoverflow.com/a/11555395/986896)

```
: > benchmark.tmp
for i in {1..10} ; do \
    /usr/bin/time --output benchmark.tmp --append --format "%e" -- custom-cmd-for-benchmark ; \
done
awk '{ total += $1; count++ } END { print total/count }' benchmark.tmp 
```

或单线：

```
RETRIES=10 ; CMD="custom-cmd-for-benchmark"; /usr/bin/time --output benchmark.tmp --format "%e" -- bash -c "for i in {1..${RETRIES}} ; do ${CMD} ; done" ; awk "{ print \$1/${RETRIES} }" benchmark.tmp 
```

注意：`{1..10}`定义退休人数

注意2：这不是使用内置的bash`time`来更好地控制输出流（以防`custom-cmd-for-benchmark`输出某些东西）！

警告：这会覆盖`benchmark.tmp`文件！

其他想法（为了更好的精度，但放弃标准输出，这可能会使基准产生偏差，因为写入`/dev/null`可能比终端更快）：

```
# This using bash built-in + TIMEFORMAT variable
( export TIMEFORMAT='%3R' ; time for i in {1..10} ; do custom-cmd-for-benchmark >/dev/null ; done ) 2>&1 | awk '{ print $1/10 }'

# This using `date` tool
( date +'%s.%N' | tr -d "\n"; for i in {1..10} ; do custom-cmd-for-benchmark >/dev/null ; done ; date +' %s.%N' ) | awk '{ printf "%.4f",($2 - $1)/10 }' 
```

# javascript - 如何让我的 Sencha Touch 2 Button 变成矩形？

> ID：11551510
> 
> 赞同：1
> 
> 时间：2012-07-18T22:50:52.057
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

我已经尝试过并且失败了。有谁知道怎么做？任何方法都可以，css、javascript 或其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:42:40.760

创建按钮时，只需向按钮添加一个`style`属性，如下所示：

```
{
  xtype:'button',
  text: 'Button',
  style:'border-radius:0'
} 
```

您还可以使用该`cls`属性将 CSS 类关联到您的按钮，然后将样式添加到链接到 HTML 文件的单独 CSS 文件中。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:14:46.237

在您的 custom-theme.scss 文件中，添加以下行

```
$button-radius: '0px'; 
```

然后使用命令“compass compile”编译 scss 文件。

这将为您创造奇迹。

# vb.net - 在 vb.NET 中的 Microsoft.VisualBasic.dll 中发生了“System.InvalidCastException”类型的第一次机会异常

> ID：11551513
> 
> 赞同：0
> 
> 时间：2012-07-18T22:51:01.347
> 
> 标签：vb.net, tostring, datetimepicker, sqlcommand, numericupdown

我是 Visual Studio 和 SQL Server 的新手。我对如何从 Visual Studio 应用程序插入数据感到困惑

我收到 System.InvalidCastException 错误。我很困惑是什么问题。

这是我的代码：

```
PatientInfoConnection.Open() 'open database connection

Dim sql As String = ""
sql = "insert into model (name, age, date_of_confinement, type_of_sickness, type_of_IVfluid, number_of_bottles, drop_rate)" & _
                   " values (@name, @age, @date_of_confinement, @type_of_sickness, @type_of_IV_fluid, @number_of_bottles, @drop_rate)"

Dim insert As New SqlCommand(sql, PatientInfoConnection)

insert.Parameters.AddWithValue("@name", txtName.Text)
insert.Parameters.AddWithValue("@age", nudAge.Value.ToString())
insert.Parameters.AddWithValue("@date_of_confinement", dtpDate.Value.ToString())
insert.Parameters.AddWithValue("@type_of_sickness", txtSickness.Text)
insert.Parameters.AddWithValue("@type_of_IV_fluid", txtFluid.Text)
insert.Parameters.AddWithValue("@number_of_bottles", txtBottle.Text)
insert.Parameters.AddWithValue("@drop_rate", nudDrop.Value.ToString())

insert.ExecuteNonQuery() 
```

我在想我的价值观有问题。nudAge.Value 是向上向下的数字，在我的 sql 数据库中，它是 Age(int, null)。我也有 dtpDate.Value。日期时间选择器。我想我不应该在上面使用 ToString() 但我不知道语法..

谁能帮我？任何帮助，将不胜感激。谢谢！

date_of_confinement 是我数据库中的日期时间。格式应该是这样的吗？insert.Parameters.AddWithValue("@date_of_confinement", dtpDate.Value.ToShortDateString)

另外，我做了 insert.Parameters.AddWithValue("@number_of_bottles", Int32.Parse(txtBottle.Text))

但我仍然得到错误。我很困惑。谢谢你的帮助！

这就是我现在所做的... insert.Parameters.AddWithValue("@date_of_confinement", Date.Parse(dtpDate.Value))

我还进行了如下更改：

```
 insert.Parameters.AddWithValue("@age", Convert.ToInt32(txtAge.Text))        
   insert.Parameters.AddWithValue("@number_of_bottles", Convert.ToInt32(txtBottle.Text)) 
   insert.Parameters.AddWithValue("@drop_rate", Convert.ToInt32(txtDrop.Text)) 
```

我不再有错误，但是当我单击保存时，它甚至关闭表单并打开另一个表单也没有做任何事情。什么都没做。

谢谢你的帮助！nn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:54:39.313

如果`date_of_confinement`是 db 中的日期时间，则应将其作为`Date`SqlParameter 传递。只需删除`ToString`. 值也是如此`NumericUpDown`。

```
insert.Parameters.AddWithValue("@name", txtName.Text)
insert.Parameters.AddWithValue("@age", nudAge.Value)
insert.Parameters.AddWithValue("@date_of_confinement", dtpDate.Value)
insert.Parameters.AddWithValue("@type_of_sickness", txtSickness.Text)
insert.Parameters.AddWithValue("@type_of_IV_fluid", txtFluid.Text)
insert.Parameters.AddWithValue("@number_of_bottles", Int32.Parse(txtBottle.Text))
insert.Parameters.AddWithValue("@drop_rate", nudDrop.Value) 
```

请注意，我还解析`txtBottle.Text`为整数，因为我假设这`number_of_bottles`是`int`db 中的一列。

# aptana - Aptana 高级搜索对话框

> ID：11551517
> 
> 赞同：0
> 
> 时间：2012-07-18T22:51:19.177
> 
> 标签：aptana

在 Aptana Studio 3 中，有两种方法可以在您正在处理的文档中进行搜索。

1.  底部的“查找栏”。
2.  打开一个与 Eclipse 中的查找对话框相同的对话框

当我按 ctrl+F 时，它会打开查找栏。虽然，我希望它打开我以前做过的对话框，但不知道该怎么做。

我怎样才能做到这一点？

PS 我**不是**在谈论用 ctrl+H 打开的文件搜索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:43:58.243

对此有偏好。

转到`Preferences -> Aptana Studio -> Find Bar`并取消选中“使用自定义查找栏...”选项。

# c++ - 非托管 C++ - 是否需要 C++/CLI dll 使用强名称来引用强名称？

> ID：11551521
> 
> 赞同：3
> 
> 时间：2012-07-18T22:51:38.427
> 
> 标签：c++, visual-studio-2010, strongname

我有一个非托管 C++ dll，将由托管 C++/CLI 包装器 .dll 使用，最终将由 C# 项目使用。

C# 项目是强命名的，包装器 .dll 也是。我尝试使用 /KEYFILE 对非托管 dll 执行相同的操作，但似乎不起作用。包装器抱怨：

```
.... is a strong-name signed assembly and embedding a manifest invalidates the signature 
```

我是否需要对非托管 C++ 进行强命名？如果没有，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:32:36.660

终于让一切正常了，即我的 C# 应用程序调用 C++/CLI 包装器 dll，它调用本机 C++ dll 中的一个类！

解决问题：

```
mt.exe : general warning 810100b3: ... MyWrapper.dll is a strong-name signed assembly and embedding a manifest invalidates the signature. You will need to re-sign this file to make it a valid assembly. 
```

重要提示：事实证明，引用类中的强名称不是问题。

事实证明，在这种情况下，VS 对包装 dll 进行签名的方式有问题。见链接：http: [//blogs.msdn.com/b/vcblog/archive/2011/03/11/10140139.aspx](http://blogs.msdn.com/b/vcblog/archive/2011/03/11/10140139.aspx)

简而言之，为了解决这个问题，在您的包装 C++ 类中，将其添加为您的 Post Build 命令以重新签名：

```
sn.exe -R $(SolutionDir)$(Configuration)\MyWrapper.dll MyKeyFile.snk 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T23:56:39.763

无法对本机 DLL 进行强命名。最重要的是因为这样做是没有意义的，只有 CLR 会验证强名称，并且只在 .NET 程序集上这样做。

以防万一：强名称*不能替代*代码签名证书。最大的暗示是因为您不必将一大笔钱交给任何人。

# ruby-on-rails - 如何使用 Kaminari（或 will_paginate）gem 对数组散列进行分页

> ID：11551522
> 
> 赞同：5
> 
> 时间：2012-07-18T22:51:44.100
> 
> 标签：ruby-on-rails, will-paginate, kaminari

我现在已经设法找到解决方法。现在，索引操作在调用页面之前有一个“订单”子句，然后按日期对餐食进行排序和分组。接下来是 hackey 位：视图中使用 @total_pages 和 @pages 提供分页链接，因为内置帮助器不适用于 @meals 返回的数组哈希。它有效（有点）但它是hackey。将视图内容移动到帮助程序中肯定会有助于清理它，这是我的下一步。

```
def index
  @meals = Meal.order('date DESC').page(params[:page]).text_search(params[:query]).sort_by(&:date).reverse.group_by(&:date)
  @total_pages = (Meal.all.size / 7.to_f).ceil
  @pages = (1..@total_pages).to_a 
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @meals }
end 
```

结尾

我真的需要帮助 - 这让我发疯了几天。我正在尝试对数组的哈希进行分页。我已经尝试过 will_paginate 和 Kaminari，但找不到对生成的哈希进行分页的方法。

我正在运行 Rails 3.2.6、Ruby 1.9.3 和 PostgreSQL 9.1.3 正在搜索...

在我的控制器（并使用 Kaminari）中，我有：

```
def index
  @meals = Meal.text_search(params[:query]).sort_by(&:date).reverse.group_by(&:date).page(params[:page])
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @meals }
  end
end 
```

在我的模型中，我进行了以下搜索：

```
def self.text_search(query)
  if query.present?
    where("description @@ :q or meal_time @@ :q", q: query)
  else
    scoped
  end
end 
```

在我的视图模板中：

```
<div class="container">
  <div class="row">
<%= form_tag meals_path, method: :get, :class => "well form-search" do %>
  <%= text_field_tag :query, params[:query], 
                     :class => "span3" %>
  <%= submit_tag "Search", name: nil, :class => "btn" %>
    <% if current_user %>
      <p class="pull-right"> 
    <%= link_to "Add a meal",
                new_meal_path,
                :class => 'btn btn-success' %>
    </p>
    <% else %>
    <% end %>
<% end %>       
</div>
<table class="table table-striped">
<tbody>
  <% @meals.each do |date, meals| %>
  <tr> 
    <td>
      <h2><%= date.to_s(:day_of_month) %></h2>
      <h6><%= date.to_s(:date_and_month) %></h6>
      <p><span class="badge badge-warning"><%= pluralize(meals.size, "meal") %></span></p>
    </td>
    <% meals.each do |meal| %>
      <td>
        <p>
          <strong>
            <%= meal.consumed_at.to_s(:just_the_time)%> 
            <%= meal.meal_time %> &#8212; 
            <%= meal.description %>
          </strong>
        </p>
        <%= link_to "Ingredients", meal_path(meal) %>
      </td>
      <% end %>
    </tr>
  <% end %>
</tbody>
</table> 
</div>
<%= paginate @meals %> 
```

这将返回以下错误：

```
NoMethodError in MealsController#index

undefined method `page' for Hash 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:04:13.777

```
Kaminari.paginate_array(ARRAY_OBJECT).page(params[:page]).per(50) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T04:15:00.183

这是我研究了一段时间后是否必须使用 will_paginate 的解决方案（Kaminari 更灵活且更易于使用）

```
 current_page = params[:page] || 1
  per_page = params[:per_page] || 20
  length = @data.length

  @data = WillPaginate::Collection.create(current_page, per_page, length) do |pager|
    pager.replace @data[pager.offset, pager.per_page].to_a
  end 
```

运行这些代码后，@data 将与带有 will_paginate 分页的 ActiveRecord 对象相同：

*   @data 是一个哈希数组

*   <%= will_paginate(@data) %> 是在视图中显示分页菜单的代码

希望这可以帮助其他有同样问题的人。

# visual-studio-2010 - 如何解释此 SQL Server CE 行为 - 不更新

> ID：11551524
> 
> 赞同：0
> 
> 时间：2012-07-18T22:51:46.753
> 
> 标签：visual-studio-2010, visual-studio, sql-server-ce

我正在构建 WinForms 应用程序，并且正在使用 SQL Server Compact Edition 3.5。

每当我运行 WinForms 应用程序并且之后在 Visual Studio 中打开查询编辑器时，我运行的任何更新查询都不会反映在应用程序中。如果我运行`Select`查询以查看更新的记录，我可以从查询结果中看到数据已更改但未反映在应用程序中。

如果我关闭应用程序并再次运行它，更新会反映在应用程序中。

这是正常的吗？对此最好的解释是什么？

**更新**

*来自 C#*

```
string sqlceConnString = @"Data Source=|DataDirectory|\medicstores.sdf"; 
```

*从 Visual Studio 中的新查询连接窗口*

```
C:\Users\user12345\...\Visual Studio 2010\Projects\StockPro\StockProFormUI\medicstores.sdf 
```

**更新**

我认为这可能是由于应用程序复制了数据库文件`\StockPro\StockProFormUI\bin\Debug\medicstores.sdf`而不是使用`\StockPro\StockProFormUI\medicstores.sdf`.

我认为`|DataDirectory|`是由应用程序解决`\StockPro\StockProFormUI\bin\Debug\medicstores.sdf`的，这使它成为物理文件的新副本，`\StockPro\StockProFormUI\medicstores.sdf`因此它们不一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:04:02.907

首先检查你的连接字符串。

断开服务器资源管理器上的 SQL CE 数据库。

我之前也遇到过这个问题。您需要获取 sqlce 数据库的确切位置，然后更改连接字符串。

首先对其进行测试以将 sqlce 放在驱动器 c:\ 上并添加 Persist Security Info=False; 最后。并使用准确的数据库文件路径。

```
private SqlCeConnection conn = new SqlCeConnection("Data Source=C:\\medicstores.sdf;Persist Security Info=False;"); 
```

您可以使用 SQL CE 工具来查看您的 SQLCE 数据库，而不是使用 Visual Studio。

[SQL Server CE 查询工具 - 代码项目](http://www.codeproject.com/Articles/33433/SQL-Server-CE-Query-Tool)

问候

# linux - 我可以在共享托管服务器上安装 git 吗？

> ID：11551527
> 
> 赞同：2
> 
> 时间：2012-07-18T22:51:51.220
> 
> 标签：linux, git, installation

我之前的[问题](https://stackoverflow.com/questions/11550029/how-to-install-git-on-linux/11550038#11550038)让我想到了这个问题 - 是否可以在无法使用 apt-get 的共享托管服务器上安装和使用 git（如果默认情况下未提供）？

我已经发送了一张关于这个问题的票（apt-get not working），并得到了这个回复；

> 这是一个共享主机帐户，您的用户无法在服务器上修改或安装/卸载新软件。
> 
> 此功能仅适用于我们的 VPS 托管解决方案。更多信息请参考以下链接： http: [//landahost.runhosting.de/vps-hosting.html](http://landahost.runhosting.de/vps-hosting.html)

由于我只需要 git，有没有办法“解决”这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:00:53.643

您将要编译 git 并将其移至服务器。这个 stackoverflow Q&A 很好地回答了你的问题：[Compile git for 32-bit linux on shared hosting](https://stackoverflow.com/questions/4147730/compile-git-for-32-bit-linux-on-shared-hosting)

祝你好运。快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:14:08.973

我遇到了几个客户的这个问题，最后我写了一个带有 php 助手的小 python 脚本来解决这个问题。

它并不完美，但比手动上传/检查文件要好。

检查我的[dvcs-helper](https://github.com/OneOfOne/dvcs-helper)。

# c# - 使用 GraphicsPath 裁剪图像

> ID：11551529
> 
> 赞同：0
> 
> 时间：2012-07-18T22:52:32.860
> 
> 标签：c#, .net

我的问题是通过 GraphicsPath 剪切图像。我有一个相当复杂的剪切路径（由各种弧组成），我只需要保存该路径内的那部分图像。

我有这样的课：

```
class A 
{
    private GraphicsPath GetGraphicsPath()
    { 
        ... some stuff ...
        return gp;
    }

    public void Draw(Graphics g)
    {
         g.DrawPath(pen, GetGraphicsPath());
    }

    public Save(Image img, string fileName)
    {
        Bitmap b = new Bitmap(img.Width, img.Height);
        Graphics bg = Graphics.FromImage(b);
        bg.Clip = new Region(GetGraphicsPath());
        bg.DrawImage(img, 0, 0);
        b.Save(fileName + ".png");
    }
} 
```

然后我有一个带有面板 pnMain 的表单，带有背景图像。我有两个具有以下功能的按钮：

```
 private void button1_Click(object sender, EventArgs e)
    {
        Graphics g = pnMain.CreateGraphics();
        a.Draw(g);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        Image img = pnMain.BackgroundImage;
        a.Save(img, "test");
    } 
```

（在这两种情况下，a 都是 A 的实例）。我的问题是屏幕上绘制的剪切区域（使用第一个按钮和方法 Draw）是我想要保存的，但是，通过第二个按钮和方法保存的剪切图像被扭曲、变小和移位。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:07:49.137

我想通了——它是面板中背景图像的分辨率。Bitmap img 的 Horizo​​ntalResolution 和 VerticalResolution 属性必须匹配 Graphics 的 DPIX 和 DPIY 属性。我不知道如何通过 C# 设置这些，但我能够在 Photoshop 中更改位图的分辨率，现在一切正常。

# python - 用于从远程 VPN 检索文件的 python 脚本

> ID：11551533
> 
> 赞同：0
> 
> 时间：2012-07-18T22:52:50.933
> 
> 标签：python, download, vpn

我需要编写一个 python 脚本登录到远程 VPN，然后将文件从某个目录复制到本地服务器上的目录。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:55:13.520

如果您具有 root 访问权限，最简单的解决方案是：

*   执行命令设置 VPN 连接
*   执行命令挂载远程目录
*   用于[`shutil.copyfile()`](http://docs.python.org/library/shutil.html#shutil.copyfile)执行复制。如果您需要，该模块还具有递归复制功能。

如果你不这样做，你可能会很困难，因为你需要实现 VPN 使用的协议并执行操作系统通常在你的脚本中执行的所有低级网络工作

# flash - flash player 11 检查 GPU 加速

> ID：11551539
> 
> 赞同：3
> 
> 时间：2012-07-18T22:53:55.217
> 
> 标签：flash, 3d, hardware-acceleration, flash-player-11

Flash 播放器 11 提供了 3D GPU 加速，但并不是每个显卡都能完成这项工作，当出现不受支持的显卡加速时，就会切换到软件。我可以检查是否可以使用硬件加速来自定义我的应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T00:25:36.140

您必须获得一个`Context3D`才能查看它`driverInfo`：

```
trace("3d mode: " + context3D.driverInfo); 
```

对我来说，这表明：

![上下文3d](../Images/62e1621abd4d01ca2e9fee7738a9ce67.png)

最容易测试软件渲染的硬件加速 GPU 将由 DirectX 或 OpenGL 指示。

这可以这样实现：

```
package
{
    import flash.display.Sprite;
    import flash.display.Stage3D;
    import flash.display3D.Context3D;
    import flash.display3D.Context3DRenderMode;
    import flash.events.Event;
    import flash.system.ApplicationDomain;
    import flash.system.Capabilities;

    public class X extends Sprite
    {
        public function X()
        {
            super();

            if (ApplicationDomain.currentDomain.hasDefinition("flash.display.Stage3D"))
            {
                stage.stage3Ds[0].addEventListener(Event.CONTEXT3D_CREATE, onContext3DCreate);
                stage.stage3Ds[0].requestContext3D();
            }
        }

        private function onContext3DCreate(event:Event):void
        {
            // obtain context
            var t:Stage3D = event.target as Stage3D;
            var context3D:Context3D = t.context3D;

            // detect software mode
            if ((context3D.driverInfo == Context3DRenderMode.SOFTWARE)
                || (context3D.driverInfo.indexOf('oftware') > -1))
            {
                trace("Software mode detected!");
            }

            trace("Flash Version: " + Capabilities.version);
            trace("3D mode: " + context3D.driverInfo);
        }

    }
} 
```

对于 GPU 加速的 StageVideo，请收听`StageVideoAvailabilityEvent`以确认`StageVideoAvailability.AVAILABLE`。

这可以实现为：

```
package
{
    import flash.display.Sprite;
    import flash.events.StageVideoAvailabilityEvent;
    import flash.media.StageVideoAvailability;

    public class X extends Sprite
    {
        public function X()
        {
            super();
            stage.addEventListener(StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY, onStageVideoState);
        }

        private function onStageVideoState(event:StageVideoAvailabilityEvent):void
        {
            if (event.availability == StageVideoAvailability.AVAILABLE)
                trace("available");
        }

    }
} 
```

拥有 StageVideo 后，渲染状态由 指示`StageVideoEvent.RENDER_STATE`。

```
var stageVideo = stage.stageVideos[0];
stageVideo.addEventListener(StageVideoEvent.RENDER_STATE, stageVideoStateChange);

function stageVideoStateChange(event:StageVideoEvent):void
{   
    trace("Render State: " + event.status);
} 
```

渲染状态由以下各项派生`StageVideoEvent.status`并包括：

*   `VideoStatus.ACCELERATED`- 解码和呈现都发生在硬件中。（最棒的表演。）
*   `VideoStatus.SOFTWARE`- 硬件演示，软件解码。（可接受的性能。）
*   `VideoStatus.UNAVAILABLE`- 没有可用于处理视频的 GPU 资源，并且没有任何显示。回退到 Video 对象。

# excel - 在 TFS 2012 中导出到 excel，错误代码：TF400422

> ID：11551541
> 
> 赞同：16
> 
> 时间：2012-07-18T22:54:07.783
> 
> 标签：excel, visual-studio-2012

我已经安装了 Visual Studio 2012 RC。

我正在使用 TFS2012，当我想将用户故事导出到 excel 时，出现以下对话框错误：

```
Microsoft Visual Studio
Team Foundation Error
TF400422: Failed to open in Microsoft Excel: Error loading type library/Dll.
(Exception from HRESULT: 0x80029C4A (TYPE_E_CANTLOADLIBRARY)) 
```

我正在使用`Microsoft Office Professional Plus 2010.` 版本：`14.0.6112.5000`（64 位）

**截屏**

![在此处输入图像描述](../Images/c7278b709866f22d6b40eb0ab848c91a.png)

**TF400422 代码是什么意思？**

我查看了[此页面](http://msdn.microsoft.com/en-us/library/aa337645%28v=vs.80%29.aspx)，其中包含错误代码含义列表，但代码：TF400422 不存在。也许这与[另一个](https://stackoverflow.com/questions/11469497/initializing-outlookemail-object-gives-exception-from-hresult-0x80029c4a-type)问题有关。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T11:27:25.110

对于迟到的答案，我很抱歉，但通过使用 TEAM 选项卡从 Excel 连接到 TFS，我设法避免了这个错误。然后我使用 TFS Query 创建了新列表，效果很好

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-30T09:36:13.850

最后我检查了 TFS 插件不适用于 64 位的办公室。

自 2010 年版本以来，它可能已经发生了变化，但如果仍然如此，我不会感到惊讶。

参考：本博客第一条评论 [http://geekswithblogs.net/blomqvist/archive/2010/10/25/integration-with-office-from-team-explorer-stopped-workingndashand-how-to.aspx](http://geekswithblogs.net/blomqvist/archive/2010/10/25/integration-with-office-from-team-explorer-stopped-workingndashand-how-to.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-12T02:44:59.243

解决这个问题很简单 - 有关详细信息，请参阅[此博客文章](http://blogs.msdn.com/b/dau-blog/archive/2012/04/20/how-to-solve-unable-to-cast-com-object-of-type-microsoft-office-interop-excel-applicationclass-to-interface-type-microsoft-office-interop-excel-application.aspx)。

从注册表中，当您在下面看到两个键时：

```
HKCR\TypeLib\{00020813-0000-0000-C000-000000000046}\ 
```

删除最高的。在我的情况下，这是 1.8，但这取决于您的 Excel/Office 版本（文章描述了删除 1.7）。这个问题似乎会在一段时间后再次出现（可能在补丁之后），所以很遗憾您可能不得不重新应用此修复程序。

# dynamic - 批处理文件从文件内容中复制文件

> ID：11551543
> 
> 赞同：2
> 
> 时间：2012-07-18T22:54:23.513
> 
> 标签：dynamic, batch-file, filenames, move

我有一个主文件 ( `File1.txt`)，其中一些名称保留在内容中。我必须在一个文件夹中找到所有具有这些名称（通配符）的文件，并使用批处理文件程序将它们移动到不同的文件夹中。

例如：`File1.txt`有内容

```
 abcd
  efgh 
```

现在在文件夹中说`c:\temp\Source`我有类似的文件

```
12abcd34.asc
56efgh78.asc
testing.asc 
```

我只需要将这两个文件移动到一个文件夹中，比如 c:\temp\Target。

这是我的代码，但它给出了错误，说 i*.* 目前是意外的。你能帮忙吗。

```
@Echo Off
title Test move files
set dir1=C:\temp\Source
dir %dir1%
Echo Directory Changed
FOR /f "eol=; delims=, " %i in (file1.txt) do move /y "*%i*.*" Target 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:07:02.903

干得好....

这就是我开始时的目录结构......

```
C:\Temp>tree /f
Folder PATH listing for volume OS
Volume serial number is XXXX-XXXX
C:.
│   file1.txt
│   run.bat
│
├───Source
│       12abcd34.asc
│       56efgh78.asc
│       testing.asc
│
└───Target 
```

这是我稍后将运行的 run.bat .. 包括错误修复...

```
C:\Temp>copy run.bat con
@Echo Off

title Test move files

set dir1=Source

dir %dir1%

Echo Directory Changed

FOR /f "eol=; delims=, " %%i in (file1.txt) do move /y "%dir1%\*%%i*.*" Target
        1 file(s) copied. 
```

现在我运行批处理文件...

```
C:\Temp>run.bat
 Volume in drive C is OS
 Volume Serial Number is XXXX-XXXX

 Directory of C:\Temp

19/07/2012  00:03    <DIR>          .
19/07/2012  00:03    <DIR>          ..
18/07/2012  23:59                 0 12abcd34.asc
18/07/2012  23:59                 0 56efgh78.asc
18/07/2012  23:59                 0 testing.asc
               3 File(s)              0 bytes
               2 Dir(s)  41,653,194,752 bytes free
Directory Changed
C:\Temp\Source\12abcd34.asc
        1 file(s) moved.
C:\Temp\Source\56efgh78.asc
        1 file(s) moved. 
```

现在这是最终的目录结构......所以你可以看到它正在工作......

```
C:\Temp>tree /f
Folder PATH listing for volume OS
Volume serial number is XXXX-XXXX
C:.
│   file1.txt
│   run.bat
│
├───Source
│       testing.asc
│
└───Target
        12abcd34.asc
        56efgh78.asc 
```

这是您需要的 for 循环...

```
FOR /f "eol=; delims=, " %%i in (file1.txt) do move /y "%dir1%\*%%i*.*" Target 
```

变化：

```
[1] within FOR you use %%i not %i.
[2] You need this format:

%dir1%  <-- Where
\       <-- path delimiter
*       <-- starts with anything
%%i     <-- contains what you want to search
*.*     <-- ends with anything 
```

希望这可以帮助。

# c++ - 构造函数、析构函数和指针（以及向量和数组以及删除等）

> ID：11551545
> 
> 赞同：0
> 
> 时间：2012-07-18T22:54:35.033
> 
> 标签：c++, pointers, constructor, destructor

时髦的标题，但老实说，我想不出更好的人了，对不起:(

在尝试使用指针时，我遇到了这个问题，我需要帮助来理解它。基本上，我创建了一个指向对象的指针向量。删除向量中的指针时，我希望原始对象也被删除。他们是一回事，不是吗？

这就是我认为我在下面的代码中所做的事情，我创建了一个动态分配的数组，然后将指向该数组一半元素的指针放入指针向量中。testDestructor 类的每个对象的每一步都知道它是在哪个“顺序”中创建的，它们都通过静态整数分配了一个递增的数字。

然后我 pop_back 并删除向量中的所有指针。我只使用 pop_back 是因为我想看看它们是否被矢量类删除，显然它们没有，但是如果我在那里遗漏了一些东西，那就别想了。重要的是我删除它。

现在，我期望发生的是这也会删除数组的相应元素。这是应该发生的，因为向量和数组元素指向内存中的相同位置。即，应该调用析构函数。

因此，当我然后删除数组时，我希望只有 5 个元素被删除，或者发生运行时错误（我之前尝试删除已经被删除的指针时发生过这种情况，但这可能是一个不同的场景idk）。也就是说，我希望只有析构函数应该只被调用五次。

然而，事实并非如此。构造函数被调用了 10 次，而析构函数被调用了 15 次。我错过了什么？我是否缺少构造函数（我只知道默认构造函数和复制构造函数，还有更多），还是其他？因为，在我看来，当析构函数消失时，对象就消失了。

抱歉，如果代码太多：

testDestructor.h：

```
#ifndef TESTDESTRUCTOR_H
#define TESTDESTRUCTOR_H

class testDestructor
{
public:
   testDestructor();
   testDestructor(const testDestructor &);
   ~testDestructor();

   static int maxTest;
   int test;
};

#endif 
```

testDestructor.cpp：

```
#include "testDestructor.h"
#include <iostream>

using namespace std;

int testDestructor::maxTest = 0;

testDestructor::testDestructor()
{
   test = maxTest++;
   cout << "testDestructor nr " << test << " created successfully\n";
}

testDestructor::testDestructor(const testDestructor &destructorToCopy)
{
   test = maxTest++;
   cout<< "testDestructor nr " << test << " created successfully (using the copy constructor\n";
}
testDestructor::~testDestructor()
{
  //maxTest--;
   cout << "testDestructor " << test << " destroyed successfully\n";
} 
```

主.cpp：

```
#include <iostream>
#include "testDestructor.h"
#include <vector>
using namespace std;

int main()
{
   cout << "   creating pointer array:\n\n";
   testDestructor *testPtr = new testDestructor[10];

   cout << "   intitiating vector\n\n";
   vector<testDestructor*> testVct;

   for (int i = 0; i < 5; i++)
   {

      cout << "   pushing back vector " << i << ":\n";
      testVct.push_back(testPtr + i);
      cout << "testDestructor " << testVct[i]->test << " pushed back\n";
   }
   cout << "\n";

   for (int i = 4; i >= 0; i--)
   {
      cout << "   popping back vector " << i << ":\n";
      cout << "testDestructor " << testVct[i]->test << " popped back\n";

      delete testVct[i];
      testVct.pop_back();

   }
   cout << "\n";

   cout << "   deleting pointer array\n\n";
   delete [] testPtr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:16:56.823

> 删除向量中的指针时，我希望原始对象也被删除。他们是一回事，不是吗？

不，它们不一样，您的术语“删除指针”意味着您需要重新阅读有关 C++ 中指针的一些基本内容。

`new`创建事物，并返回一个指向它所创建事物的指针。`delete`销毁事物并传递一个指向要销毁的事物的指针。指针没有改变——它只是在删除后没有指向任何有用的地方。

您要做的是`delete`使用创建的对象数组中的单个对象`new[]`。那根本做不到。您只能使用 delete[] 删除整个批次。如果您想拥有可单独删除的对象，请使用`std::vector<TestDestructor>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:59:42.163

这里的问题是前五个实例`testDestructor`被删除了两次：一次是`delete testVct[i]`，另一次是`delete [] testPtr;`。

**第一个`delete`是错误的。**

对象由拥有*，*`testVct`因此它们的销毁只能通过`delete[]`ion of 进行`testVct`。`delete`仅当对象由 分配时，您才可以单个对象`new`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T23:05:47.443

运算符`delete[]`将在删除数组本身之前调用数组中项的析构函数。如果您希望手动删除数组中的某些项目，您需要将其数组索引值设置为`NULL`之后。在同一个对象上调用析构函数两次是未定义的行为，希望对你来说会很糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T23:21:30.130

首先，让我们看看你的变量声明：

```
testDestructor *testPtr = new testDestructor[10];
vector<testDestructor*> testVct; 
```

这表示 testPtr 是指向 testDestructor 类型对象的指针，而 testVct 是指向 testDestructor 类型对象的指针向量。

此外，您使用 new 运算符分配一个 testDestructor 对象数组，并分配 testPtr 中第一个元素的地址。现在 testPtr 可以用作 testDestructor**对象**的数组。

请注意，您没有为任何单独的 testDestructor 对象分配内存。这意味着您删除指向数组中对象的任何指针都会导致未定义的行为。另一方面，在 testPtr 上使用 delete[] 来释放数组是允许的。

这里的一般规则是每个 delete 或 delete[] 必须有一个匹配的 new 或 new[] ，反之亦然。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T06:08:10.817

第一的

在我的测试中，这个程序将核心转储在'delete testVct[i];'

我的 g++ 版本是 4.1.6

也许你可以初始化 testPtr：

```
testDestructor *testPtr[10];
for(int i=0;i<10;i++)
    testPtr[i] = new testDestructor; 
```

第二

你删除一个指针两次 1) 删除 testVct[i]; 2) 删除[] testPtr；

# mysql - 如何编写用于更改变量的mysql查询

> ID：11551554
> 
> 赞同：0
> 
> 时间：2012-07-18T22:55:22.400
> 
> 标签：mysql, variables, loops

以下是我需要查询的三个表。

```
r601_shoppingcart_carts
  cart_id          user_id          customize 
   10               65                 1
   11               78                 1
   12               78                 0

r601_shoppingcart_items:
cart_item_id   cart_id     sobipro_entry     
    5              10            87
   39              11           194
   40              11           140 
   38              12           126

r601_sobipro_field_data
fid                sid          baseData
 45                194          cg_0059
 45                140          cg_0094_4
 45                141          cg_0011_2 
```

如果该项目（产品）是可定制的，则查询的所需结果将为特定用户（user_id）购物车提供基本数据（产品编号）

在这种情况下，正确的检索数据应显示 user_id 78 在他/她的购物车中有以下两个可定制的项目： cg_0059 cg_0094_4

早些时候，我在这里展示了一个 SELECT 语句，该语句位于左侧字段中。我发现以下 SELECT 语句实现了我的目标。我不知道这是否是一个有效的陈述。任何意见将不胜感激。

```
 SELECT
    r601_sobipro_field_data.baseData,
    r601_sobipro_field_data.sid,
    r601_shoppingcart_items.cart_id,
    r601_shoppingcart_carts.cart_id
 FROM
    r601_sobipro_field_data,
    r601_shoppingcart_items,
    r601_shoppingcart_carts
 WHERE
    r601_sobipro_field_data.fid = 45
 AND
    r601_sobipro_field_data.sid = r601_shoppingcart_items.sobipro_entry 
 AND
    r601_shoppingcart_items.cart_id = r601_shoppingcart_carts.cart_id
 AND
    r601_shoppingcart_carts.user_id = 78
 AND
    r601_shoppingcart_carts.customize = 1 
```

我确实收到了一条有用的信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:18:42.853

问题在于这条线：

```
$partNo = $sobiBaseData_rows[$i]->baseData; 
```

由于查询返回的值返回一个单独的数组，因此您无法访问 $i 元素。

如果每次只返回一个值，您可以按如下方式访问它：

```
$partNo = $sobiBaseData_rows[0]->baseData; 
```

如果返回多个值，您可以遍历这些值并将其存储在数组中。

# c# - System.Web.Caching 与 WebSockets

> ID：11551555
> 
> 赞同：0
> 
> 时间：2012-07-18T22:55:39.257
> 
> 标签：c#, asp.net, .net, caching, websocket

是否可以将`System.Web.Caching`命名空间中的类与使用 WebSockets 的 ASP.NET 应用程序一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:49:38.740

我假设您使用的是 ASP.NET 4.5，因为[ASP.NET WebSockets 仅从该版本开始本机可用](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097383)。

无论如何，我看不出有什么理由[`System.Web.Caching.Cache`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)不能在碰巧使用[ASP.NET WebSockets](http://msdn.microsoft.com/en-us/library/system.net.websockets.websocket%28v=vs.110%29.aspx)的 ASP.NET 应用程序中工作。

您是否看到某些特定问题使您认为这两个功能不兼容？如果是这样，请更改您的问题以提供有关特定问题的详细信息，并且有人可能会为您提供帮助。

跟进：

MSDN 说：

> Cache 类不适合在 ASP.NET 应用程序之外使用。它是为在 ASP.NET 中使用而设计和测试的，以便为 Web 应用程序提供缓存。对于其他类型的应用程序，例如控制台应用程序或 Windows 窗体应用程序，请使用 ObjectCache 类。

SuperSocket 将自己描述为：

> ... 一个轻量级、跨平台和可扩展的套接字应用程序框架.... SuperSocket 可以作为控制台应用程序和 Windows 服务运行。

这表明它与 ASP.NET 无关。因此，不，请遵循文档并且不要使用[`System.Web.Caching.Cache`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx). 试试[`System.Runtime.CachingObjectCache`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache.aspx)吧。

# r - 如何在ggplot2中的两个关联点之间添加多条线段？

> ID：11551560
> 
> 赞同：2
> 
> 时间：2012-07-18T22:56:02.200
> 
> 标签：r, ggplot2

我有一些想要可视化的序列特征信息。这是一些玩具数据（重新生成数据的具体r代码在最后）

```
 type index variable position
...
14         CDS    14    start 31129
15        exon    15    start 32196
16         CDS    16    start 32196
17  stop_codon    17    start 32247
18        exon     1      end 12166
19         CDS     2      end 12166
... 
```

我用来生成以下图的命令是

```
qplot(position,type,data=m2data,color=type)+xlim(11950,15000) 
```

![到目前为止我所拥有的](../Images/9968eef774b6899e86890bb3d300dd5c.png)

但是我想在“开始”和“结束”之间添加线段，它们共享相同的“索引”，就像我用油漆制作的一样。

![我想要的是](../Images/c67e906907ac126dabeed702021db58f.png)

如何在 R 中使用 ggplot2 实现这一点？

以下是数据

```
m2data<-structure(list(type = structure(c(2L, 1L, 3L, 2L, 1L, 2L, 1L, 
4L, 2L, 2L, 1L, 3L, 2L, 1L, 2L, 1L, 4L, 2L, 1L, 3L, 2L, 1L, 2L, 
1L, 4L, 2L, 2L, 1L, 3L, 2L, 1L, 2L, 1L, 4L), class = "factor", .Label = c("CDS", 
"exon", "start_codon", "stop_codon")), index = c("1", "2", "3", 
"4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", 
"16", "17", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"11", "12", "13", "14", "15", "16", "17"), variable = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L), .Label = c("start", "end"), class = "factor"), position= c(11955L, 
12026L, 12026L, 16677L, 16677L, 17745L, 17745L, 17787L, 18309L, 
28587L, 28658L, 28658L, 31129L, 31129L, 32196L, 32196L, 32247L, 
12166L, 12166L, 12028L, 16841L, 16841L, 17814L, 17786L, 17789L, 
18898L, 28798L, 28798L, 28660L, 31299L, 31299L, 32270L, 32246L, 
32249L)), .Names = c("type", "index", "variable", "position"), row.names = c(NA, 
-34L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T00:22:39.323

这是您的问题的解决方案。尽管您的问题与之前的问题非常相似，但我认为提供特定于您的数据集的答案仍然很有用。

```
library(ggplot2)
library(reshape2)

# Use dcast (in reshape2 package) to create separate columns for start and end.
dat = dcast(m2data, type + index ~ variable, value.var="position")

plot_1 = ggplot(dat, aes(x=start, xend=end, y=type, yend=type, colour=type)) +
         geom_segment(size=3) +
         geom_point(size=3) +
         geom_point(aes(x=end), size=3)

ggsave(filename="plot_1.png", plot_1, width=10, height=2.5) 
```

![在此处输入图像描述](../Images/4bbfdec7e8e721ce0d6e3c116a0b5055.png)

# box-api - 通过返回 500 错误的 API 将现有文件重新上传到 Box

> ID：11551564
> 
> 赞同：0
> 
> 时间：2012-07-18T22:56:18.500
> 
> 标签：box-api

我正在围绕 PHP 中的 api 包装器构建测试，当我尝试根据 API 文档重新上传现有文件时，我没有得到预期的响应。

根据文档：

> 如果文件夹中已经存在正在上传的文件名，则返回错误。

虽然从技术上讲，返回 500 响应代码是一个错误，但我认为预期的行为是以 API 文档中概述的错误格式返回的错误。

响应在其正文中包含以下内容，让我更加确信这不是预期的行为：

> ### 您的 Box 帐户暂时关闭 - 但您不应该这样做 - 因为我们很快就会启动并运行。
> 
> 感谢您的耐心……感谢您成为 Box 中最重要的部分。
> 
> 在暂停期间，您可以：
> 
> 刷新您的浏览器 查看我​​们的[博客以获取任何新闻](http://blog.box.net) 提交[支持票](http://support.box.com/tickets/new)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:57:16.640

您是否检查过通过 API 进行的正常文件上传是否正常工作？来自 Box 的 500 个错误代码通常意味着您应该转身重新尝试上传，因为暂时出现了一些错误。在某些情况下，这可能意味着您访问的 URL 对上传无效，或者服务器没有足够的信息来尝试确定您的 HTTP POST 尝试执行的操作。

如果您包含您的特定 POST，以及您返回的 JSON 或 XML 响应，我们可以帮助调试可能出现的问题。请不要包含您的实际 API 密钥和 Auth_token，因为这是一个公共论坛...

# c# - 验证 JSON 数据包到 iOS 设备的正确传输

> ID：11551565
> 
> 赞同：0
> 
> 时间：2012-07-18T22:56:20.017
> 
> 标签：c#, iphone

我想知道验证我的数据包已成功传输到 iPad 的简单而好方法是什么？

我想我可以做的是在服务器端使用 JSON 对象传递文件大小，并验证它在 iPad 上的大小相同。在服务器端，它是一个用 C# 编写的休息服务。我知道我可以获得正在传输的 FileInfo(file).length。但是，在 iPad 上，因为这个数据包被序列化为 JSON，所以我的制表符分隔的文本文件现在包含更多字符。因此，如果我将该文件写入磁盘，该文件将比原来大得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:01:59.143

如果您将其反序列化为 JSON 格式，它是否不起作用？您应该能够取回原始文件。

您可以生成一个摘要（例如 MD5 或 SHA1）来验证文件的内容是否完全相同，而不是检查文件长度。但这仍然取决于从 JSON 格式中获取确切的内容并转换为原始格式。

您还可以在 JSON 数据包服务器端生成摘要并进行比较，而不是比较普通文件的摘要。

# java - 延迟按键

> ID：11551568
> 
> 赞同：1
> 
> 时间：2012-07-18T22:56:53.027
> 
> 标签：java, awt, delay, keypress, awtrobot

我一直在寻找能够在按键之间有一点延迟的方法。我一直在制作这个程序，它使用 JIntellitype 库读取全局热键，然后触发您分配的任何按键序列，例如按 numpad1 将执行 AB C 序列。我的问题是，如果我使用 Thread.sleep 它只是延迟 X 时间，然后按下所有分配的键，在任何按键之间没有任何延迟。有没有人有关于如何解决这个问题的建议？提前致谢！

这就是我用来通过 Robot 类发送按键的方法

```
public void onHotKey(int identifier) {
    try {
        Robot bot = new Robot();
        if (output.elementAt(identifier - 1).length() == 1) {
            ch = output.elementAt(identifier - 1).charAt(0);
            bot.keyPress(ch);
        } else {
            int cmdSize = output.elementAt(identifier - 1).length();
            for (int c = 0; c < cmdSize; c++) {
                bot.keyPress((int) output.elementAt(identifier - 1).charAt(c));
                try {
                    Thread.sleep(50);
                } catch (InterruptedException ex) {
                    Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    } catch (AWTException ex) {
        Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:04:26.183

这些是您可能遇到的一些问题（我还在下面添加了一个“完整”示例）：

1.  您**只是在按键**，您也需要释放按键：

    ```
    robot.keyPress(c);
    robot.keyRelease(c); 
    ```

2.  您可以在 EDT 中运行机器人。*使用另一个线程来处理按键...*

3.  使用该类已经提供的“内置”[**自动延迟**](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html#setAutoDelay%28int%29)功能：`Robot`

    ```
    Robot robot = new Robot();
    robot.setAutoDelay(50); // ms
    ... 
    ```

* * *

## 例子：

这是一个如何实现此功能的示例，每次按`0`时，它都会`"hello"`使用自动延迟打印延迟每个键入的字符：

```
public static void main(String[] args) throws Exception {

    final BlockingQueue<Integer> queue = new ArrayBlockingQueue<Integer>(20);

    JTextArea area = new JTextArea(10, 40) {{
        addKeyListener(new KeyAdapter() {
            @Override public void keyPressed(KeyEvent e) {
                if (e.getKeyCode() == KeyEvent.VK_0) {
                    queue.offer(KeyEvent.VK_H);
                    queue.offer(KeyEvent.VK_E);
                    queue.offer(KeyEvent.VK_L);
                    queue.offer(KeyEvent.VK_L);
                    queue.offer(KeyEvent.VK_O);
                }
            }
        });
    }};

    JFrame frame = new JFrame("Test");
    frame.add(area);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);

    Robot robot = new Robot();
    robot.setAutoDelay(50);

    while (true) {
        final int c = queue.take();
        robot.keyPress(c);
        robot.keyRelease(c);
    }
} 
```

# git - 由于重命名，Git revert 会产生冲突“被我们删除”

> ID：11551570
> 
> 赞同：5
> 
> 时间：2012-07-18T22:57:10.467
> 
> 标签：git, merge-conflict-resolution, git-revert

我正在尝试恢复修改了已重命名的文件的提交。

修改过的文件曾经被调用`bin/internal/call_parser.rb`，当前被调用`lib/call_parser.rb`，我在尝试还原后进入了我的状态

```
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 16 commits.
#
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   modified:   other/unrelated/file
#
# Unmerged paths:
#   (use "git reset HEAD <file>..." to unstage)
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#   deleted by us:      bin/internal/call_parser.rb
# 
```

据我所知，lib/call_parser.rb 的当前版本和 bin/internal/call_parser.br 文件的当时版本应该足够相似，以至于 git 可以检测到共享内容（我听说 git 可以工作文件内容，而不是文件名）。我如何告诉 git 更加努力地工作以检测重命名并因此恢复为 lib/call_parser.rb 中的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:08:52.140

```
git mv lib/call_parser.rb bin/internal/call_parser.rb
# Do the revert
git mv bin/internal/call_parser.rb lib/call_parser.rb 
```

可能很老套，但为我工作（TM）。

# redis - Redis 不允许任何操作

> ID：11551576
> 
> 赞同：15
> 
> 时间：2012-07-18T22:57:55.373
> 
> 标签：redis

我有一个 Redis 服务器。当我尝试使用该`ping`命令或任何其他命令时，`redis-cli ping`我收到一条错误消息：

```
(error) ERR operation not permitted 
```

打字只`redis-cli`带我到提示：

```
redis 127.0.0.1:6379> 
```

在此之后，任何 redis 命令再次给出相同的错误。我不知道问题可能是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-19T00:27:56.460

在您的`redis.conf`文件中 - 是否`requirepass`设置了一个字段（并且没有用 注释掉`#`） - 如果是这样，您需要首先像这样进行身份验证：

```
AUTH Pwd  (replace Pwd with actual password phrase) 
```

一旦通过身份验证，您就可以发出新命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T05:06:36.747

`requirepass``redis.conf`默认情况下，可能会在您的配置文件中启用该选项

*   在命令后传递经过身份验证的`-a`参数：`redis-cli`

    ```
    $ redis-cli -a YourPass 
    ```

*   redis`auth`提示后执行命令：

    ```
    > auth YourPass 
    ```

# jquery - Jquery 对话框关闭按钮不关闭；对话框只打开一次

> ID：11551578
> 
> 赞同：1
> 
> 时间：2012-07-18T22:57:56.497
> 
> 标签：jquery, struts2, modal-dialog, jquery-ui-dialog

这个问题似乎很常见，在研究和尝试了所有对其他人有用的建议解决方案后，对我来说却不起作用。要补充的是，萤火虫也没有显示任何错误。

我正在使用 Jquery 模式对话框。该对话框将通过网格列上的链接打开。问题是它只打开一次，关闭按钮没有关闭对话框，但是我可以用右上角的 (X) 关闭它。但是，在尝试为不同的列值重新打开对话框时，该对话框未打开（尽管执行了服务器端操作类）。请帮助。

相关代码：父页面（jsp）

```
 <s:url id="testurl" action="openView"/>
 <script type="text/javascript">
 $(function(){
  $("#dialogOne").dialog({
      autoOpen: false,
      title: 'Details',
      modal:true,
      width:970,
      buttons: { "Close": function() { $(this).dialog("close"); } },
      open: function(event, ui) { $(".ui-dialog-titlebar-close").show(); }
      }); 
```

});

```
 function formatLink(cellvalue, options, rowObject) {
                                    return "<a href='#' onClick='javascript:openDialog("+cellvalue+");return false;'>" + cellvalue + "</a>";
                                    }
                                function openDialog(number) {
                                    $("#dialogOne").load("<s:property value="testurl"/>?Number="+number);
                                    $("#dialogOne").dialog('open');
                                } 
```

相关网格列：

```
 <sjg:gridColumn 
                                            name="number" 
                                            index="nsNumber" 
                                            title="View Action" 
                                            formatter="formatLink" 
                                            sortable="false" 
                                            width="80"

                                    /> 
```

我已经尝试了 ajax 解决方案，并记录了准备好的建议变体，但它不起作用。操作 openView 返回一个 jsp，我确保该页面上的 div id 都是唯一的，如果这有什么不同的话。Firebug 没有显示任何错误。对话框只打开一次，不能通过对话框关闭按钮关闭。并且，之后无法打开（/重新打开）对话框。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:28:25.677

我认为这是您的脚本配置的问题。事件处理程序未正确初始化，因此事件未按预期执行。

通常，您会希望在页面加载时对其进行初始化，并且我在将处理程序包装在 $(document).ready() 函数中方面取得了最大的成功。除此之外，您使用的 onClick 方法也值得怀疑。如果您使用 jQuery，最好避免将 onClick 分配给标签本身。通过使用 jQuery 及其绑定机制，您可以避免动态页面元素在事件处理程序方面无法按预期运行的问题。

```
 function formatLink(cellvalue, options, rowObject) {
          return "<a href='#' class='dialogLink' data-cell='cellvalue'>" + cellvalue + "</a>";
      }

 $(document).ready(Function(){

       $("#dialogOne").dialog({
            autoOpen: false,
            title: 'Details',
            modal:true,
            width:970,
            buttons: { "Close": function() { $(this).dialog("close"); } },
            open: function(event, ui) { $(".ui-dialog-titlebar-close").show(); }
       });

       // This will bind the event handler to any link with this class. The data 
       // attribute is used to set/get the cellvalue from the link that is clicked.
       $('.dialogLink').on('click', function(){
            var number = $(this).data('cell');
            $("#dialogOne").load("<s:property value="testurl"/>?Number="+number);
            $("#dialogOne").dialog('open');
        });

  }); 
```

# java - 使用 selenium 找不到 Xpath

> ID：11551585
> 
> 赞同：0
> 
> 时间：2012-07-18T22:58:52.707
> 
> 标签：java, selenium, automation

我正在研究自动化测试，我在谷歌上搜索 facebook 并希望获取数组列表中的链接。所以在我的程序中，我打开 www.google.com 使用 firefox 网络驱动程序，然后在搜索栏中输入 facebook，然后尝试扫描页面。我可以在搜索字段中打开浏览器和带有 facebook 的页面，但是当我使用`List<String>linksWOSpace=Arrays.asList(selenium.getAttribute("//li/div/h3/a"));`

它向我抛出了一个错误，即字符串索引超出范围 -1 它基本上无法通过该 xpath 获取元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:58:37.907

我不认为你想要的可以通过 Selenium RC 一步完成。你可以这样做：

```
List<String> linksWOSpace = new ArrayList<String>();

int numberOfLinks = selenium.getXpathCount("//li/div/h3/a");
for (int i = 1; i <= numberOfLinks; i++) {
    // gets the <a> elements one by one
    linksWOSpace.add(selenium.getText("xpath=(//li/div/h3/a)[" + i + "]"));
} 
```

输出应该是`List`所有锚文本中的一个。

# android - AdMob Android 2.2 错误

> ID：11551586
> 
> 赞同：-1
> 
> 时间：2012-07-18T22:59:01.037
> 
> 标签：android, admob

我正在使用适用于 android 2.2 的 AdMob 6，并且在 xml 布局中看到此消息“无法实例化以下类：-（打开类，显示错误日志）有关更多详细信息，请参阅错误日志（窗口 > 显示视图）。” 当我运行我的应用程序时，它显示“不幸的是......已停止。”

这就是我的清单的样子

```
<uses-permission android:name="android.permission.SET_WALLPAPER" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout" >
        > 
```

我能做些什么来让它工作吗？谢谢，-史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:03:36.493

添加`<meta-data....>`

如在

```
<meta-data android:value="......" android:name="ADMOB_PUBLISHER_ID" />
<activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout" >
        > 
```

当您注册您的 admob 帐户时，发布商 ID 会进入`value`标签。

# php - 如何在 Mac（或 Linux）上连接/运行 Joomla 到/与远程 Microsoft SQL 服务器？

> ID：11551596
> 
> 赞同：0
> 
> 时间：2012-07-18T22:59:51.373
> 
> 标签：php, sql-server-2008, joomla, pdo, joomla2.5

我正在 Joomla 中开始一个项目。Web 服务器是 Mac 上的 Apache。

我要运行的数据库是远程 Microsoft SQL 服务器。当我点击安装页面时，我只能选择使用 mysql 进行安装。

Microsoft 提供 PHP 驱动程序，但它们仅适用于 Windows。 [http://www.microsoft.com/en-us/download/details.aspx?id=20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:49:35.230

它不起作用，Joomla 目前不支持 MS SQL。您将遇到的问题是它们具有非常不同的 SQL 语法实现。基本上，用于 MySQL 的查询不一定适用于 MSSQL。您需要重写 Joomla 框架中的所有查询以使用 MSSQL 语法，这将是一项艰巨的任务，并且几乎不可能添加扩展或 Joomla 更新。

更多信息在这里 - [MySQL 和 SQL Server 之间的差异](https://stackoverflow.com/questions/10616/differences-between-mysql-and-ms-sql)

# asp.net-mvc-3 - 如何在新标签页中重定向到外部网页？

> ID：11551597
> 
> 赞同：1
> 
> 时间：2012-07-18T23:00:02.040
> 
> 标签：asp.net-mvc-3, redirect

在视图中使用 asp.net mvc。如何在新标签页中重定向到外部网页？

```
<%= Html.ActionLink("Paypal", "HowItWorksRedirect", null, new { @class = "Paypal" })%>

 public ActionResult HowItWorksRedirect()
        {
            return Redirect("https://www.paypal-deutschland.de/sicherheit/schutzprogramme.html");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:07:43.950

您不会将此传递给控制器​​操作，因为您没有链接到您自己的网站内。只需手动编写标记。如果你需要重复使用它，把它放在一个部分或部分视图中：

```
<a href="https://www.paypal-deutschland.de/sicherheit/schutzprogramme.html" target="_blank" class="Paypal">Paypal</a> 
```

# php - PHP - 使用 cURL 将信息发送到另一个页面

> ID：11551599
> 
> 赞同：0
> 
> 时间：2012-07-18T23:00:36.357
> 
> 标签：php, forms, curl

我正在尝试对表单进行验证，如果一切顺利，它应该转到第二页，它应该从 $_POST 获取信息。

有人告诉我，鉴于我这样做的方式，$_POST 不起作用，我应该尝试 cURL。我试图让它工作，但不知何故它不起作用。它正确地重定向到，`install2.php`但它没有向它传递任何变量。我做错了什么？

我的代码如下：

```
<?php 
//If the person pressed summit check for the information submited. If everything is correct move to the next page.
if (isset($_POST['submit'])) 
{
    // declare Variables
    $username = $_POST['username'];
    $password = $_POST['password'];
    $server = $_POST['server'];
    $message = "The following fields are empty: ";

    //Step 1 : Check if username & server are empty and if they are return the correct error
    if (empty($username) || empty($server) )
    {  
        if (empty($username)) { 
            $message .= "Username";
        }       
        if (empty($password)) {
            $message .= " Password";
        }
        if (empty($server)) {   
            $message .= " Server";
        }           
    }
    else 
    {       
        //Step 2: Attempt to connect to the DB with the information provided. if not sucessful return to correct error to the user.
        @$connection = mysql_connect($server,$username,$password);
        if (!$connection) 
        {
            $message = "Please check your details. the script was unable to connect to the db.";
        }
        else 
        { 
            //Step 3: Since the connection was stablished successfuly with the information provided then send the login details tot he next page
            // NOTE: For porpuses of this script I am only passing 1 variable... to make my life easier
            $ch = curl_init (); 
            curl_setopt ($ch, CURLOPT_URL, 'http://localhost/install2.php');
            curl_setopt ($ch, CURLOPT_POST, TRUE);
            curl_setopt ($ch, CURLOPT_POSTFIELDS, $username);
            curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);

            $response = curl_exec ($ch);

            curl_close ($responde);
            header ('location: install2.php');
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:11:39.933

这不是传递后字段的方式：

```
curl_setopt ($ch, CURLOPT_POSTFIELDS, $username); 
```

你应该创建一个字符串：

```
$data = "username=$username&password=$password"; 
```

并通过它：

```
curl_setopt ($ch, CURLOPT_POSTFIELDS, $data); 
```

其次，更好地编码您使用传递的参数`urlencode()`。

最后，它确实在您调用时传递参数：

```
$response = curl_exec ($ch); 
```

但是，您不会阅读响应，而只是将用户重定向到：

```
header ('location: install2.php'); 
```

这次是一个没有参数的调用来解释你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-06T15:44:01.670

我注意到你的变量名不一样。

```
$reponse and $responde 
$response = curl_exec ($ch);

curl_close ($responde);
header ('location: install2.php'); 
```

# node.js - 如何在 nodejs 中实现通知系统？

> ID：11551603
> 
> 赞同：2
> 
> 时间：2012-07-18T23:01:25.733
> 
> 标签：node.js, redis, websocket, socket.io

我正在做有关新消息的通知。我想我需要为每个用户打开套接字，并且服务器会在收到新消息时发送通知。我想使用 socket.io 和 redis pub/sub。当用户发送消息时，它会将此事件发布到将成为订阅者的 redis 和 nodejs 服务器，并将通知客户端新消息。但是在这种情况下，消息会立即从队列中删除，当用户更新页面时，他会收到通知说所有消息都已读取，因为队列为空，但实际上没有读取消息。如何决定这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:44:39.383

我已经为多页网络应用程序做了类似的事情，但现在它是单页的，我不再需要它了：

```
var notifications=[]
...
socket.on('notify', function(message)
{
    console.log('new notification received!');
    if(notifications[message.notificationId]!==message.notificationId){
        //notification never received in the current page

        notifications[message.notificationId]=message.notificationId;

        //display the notification code here

        //In a closure instead of 3 params in order to keep compatibility with IE
        setTimeout(function(){Confirm(message.notificationId);}, CONFIRM_INTERVAL);

    }
    else{
        //notification already received
        emitConfirm(message.notificationId);
        //or setTimeout(function(){Confirm(message.notificationId);}, CONFIRM_INTERVAL);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:06:40.237

如果我理解正确，所有用户都使用 socket.io 保持一个网络套接字打开，任何新消息都会立即发送给所有用户并标记为未读。问题很简单，如果用户刷新，那么应用程序不知道将哪些消息标记为已读和未读。

在这种情况下，您的消息可能有一个时间戳，您可以记录每个用户实际阅读的最后一条消息的时间戳（例如，从客户端向服务器发出一个消息读取事件），这样当用户刷新页面时，仍然有从中重建已读和未读消息列表的信息。

# android - 首选项中的 Android 列表图标

> ID：11551606
> 
> 赞同：0
> 
> 时间：2012-07-18T23:01:49.447
> 
> 标签：android, dialog, icons, settings

有谁知道Android设置中的“显示对话框”图标使用了哪个资源？

它是一个圆圈内的小向下箭头 - 默认情况下，相同的图标出现在列表对话框的标题栏中。

你会认为这很容易找到，但是....不:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:30:34.380

它被称为“更多”图标。可以使用以下代码来使用它：

```
 @android:drawable/ic_menu_more 
```

希望这是你想要的！

# css - CSS浮动在固定元素旁边

> ID：11551610
> 
> 赞同：2
> 
> 时间：2012-07-18T23:02:00.553
> 
> 标签：css

我需要一些关于 CSS 的帮助。

我想创建这个结构：

我想创建一个菜单，中心固定，960px；- 这很简单..

在与菜单相同的行上，我想创建两个 div：一个从显示器的左边框到离中间最近的 centered-div，另一个从居中的下一个到显示器的右边框.

我将尝试使用键来描述您。

| **left_div** | | **_fixed_centered_960px_div| |__right_div** |

左右 div 将是流动的，取决于屏幕分辨率。

任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:08:35.117

一些失败的想法： http: [//jsfiddle.net/kC35U/，http](http://jsfiddle.net/kC35U/) : [//jsfiddle.net/kC35U/1/](http://jsfiddle.net/kC35U/1/)

最终的解决方案：

[http://jsfiddle.net/kC35U/4/](http://jsfiddle.net/kC35U/4/)

带有额外标记的 HTML：

```
<div id="bar">
  <div class="left"><div>LEFT</div></div>
  <div class="right"><div>RIGHT</div></div>
  <div class="center">CENTER</div>
</div>
<div>
  Footer
</div>​ 
```

CSS：

中心 div，固定宽度，居中，没什么特别的：

```
.center {
    width: 500px;
    margin: 0 auto;
} 
```

现在，为左侧/右侧制作两个 50% 宽的包装 div。将它们的高度设置为 0 以保持所有三个 div 的顶部对齐：

```
.left {
    width: 50%;
    margin-right: auto;
    height: 0;
}

.right {
    width: 50%;
    margin-left: auto;
    height: 0;
} 
```

内部 div 填充其父级，但我们切断了中心 div 的一半宽度。

```
.left > div {
    margin-right: 250px;
}

.right > div {
    margin-left: 250px;
} 
```

如果你想在三列下面放一些东西，那么你必须使用一些奇怪的技巧：

```
.left:after, .right:after {
  content: '';
  float: left;
  height: 0;
}

#bar + * {
    clear: both;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:20:39.127

你可以像这样使用css

```
#fixed{
    margin:0 px auto;
    width: 960px;
}    
#container {
    padding-left: 205px;      /* LC fullwidth */
    padding-right: 205px;     /* RC fullwidth + CC padding */
    background:#FFFF99;
}

 #container .column {
    position: relative;
        float: left;
    }

    #center {
        padding: 20px 0px 20px 0px;       /* CC padding */
        width: 100%;
        height:auto;
    }
    #content{padding:10px;height:auto;border-right:1px dashed;color:#fed88e;}

    #right{
        width: 205px;             /* RC width */
        padding: 0px;          /* RC padding */
        margin-right: -100%;
    }
#left{
 width : 205px;
padding: 0px
margin-left:-100%;

} 
```

和html之类的

```
<div id="fixed">
<div id="container">
<div id="center" class="column"></div>
<div id="left" class="column"></div>
<div id="right" class="column"></div>
</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:55:30.300

我很确定你可以用这个得到你想要的：

[圣杯 3 列液体布局](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm)

只需添加：

`#col1 { margin: 0 auto; width: 960px; }`

您可能需要额外的修补。

# python - 如何将 k,v 变成 {k:v} ？

> ID：11551612
> 
> 赞同：-3
> 
> 时间：2012-07-18T23:02:49.313
> 
> 标签：python

如何将 k,v 转换为 {k:v}，尽可能短且 Python 化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T23:31:20.780

你有一个变量`v`和一个变量`k`，你想制作一个`dict`？`{k: v}`完全是pythonic

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T23:04:56.657

您可以将元组转换为字典。尝试这个：

```
>>> dict([('k', 'v')])
{'k': 'v'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:06:50.947

我假设`k, v`这里是您在某个变量中拥有的元组，我将其称为`x`. 这里有几个选项：

```
x = ('k', 'v')
d = dict([x]) 
```

或者...

```
d = {x[0]: x[1]} 
```

# amazon-web-services - 交换环境 URL 是如何工作的？

> ID：11551615
> 
> 赞同：9
> 
> 时间：2012-07-18T23:03:02.930
> 
> 标签：amazon-web-services, production-environment, amazon-elastic-beanstalk

我最近使用交换环境 URL 来升级我的 Elastic Beanstalk 应用程序，使用两个环境。我在映射到 beanstalk URL 的不同 URL 上有一条 CNAME 记录。然后我尝试推送到生产环境（现在位于测试 URL），然后再次交换，但这似乎无法正常工作。

我希望交换将测试环境映射到生产 URL，这意味着当我之前推送到测试环境进行测试时，现在我应该推送到生产环境，然后交换以进行另一次零停机升级。这可能非常令人困惑，所以我希望有人能对此有所了解，因为似乎缺乏关于 Elastic Beanstalk 和交换 URL 的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-10T16:46:11.763

请注意这里正在讨论哪个“交换 URL”功能...如果您指的是 AWS Elastic Beanstalk“操作”| “ **Swap Environment URLs** ”功能，我的经验是这个功能与DNS*无关*，与Route 53*无关。*

据我所知，**AWS EB 交换 URL**只是交换了 beanstalk 环境的面向公众的 URL……让您完全不必更改 DNS。

例子：

假设您有两个 EB 环境：

EB URL 为“quality-qq443224.elasticbeanstalk.com”的“质量”

EB URL 为“quality-patched1.elasticbeanstalk.com”的“quality-patched1”

如果您选择“quality-patched1”实例并选择“Swap Environment URL's”与您的“quality”实例......将会发生的一切是它们**现在将被列为**：

EB URL 为“quality-patched1.elasticbeanstalk.com”的“质量”

“quality-patched1”，EB URL 为“quality-qq443224.elasticbeanstalk.com”

因此，您现有的 DNS CNAME（假设在 Route 53 中并假设指向 /quality-qq443224.../）根本不需要更改...它们将被定向到您的**新**修补实例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T16:46:24.980

[URL 交换](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/using-features.CNAMESwap.html)是在两个 Green/Ready 环境之间交换 CNAME 的简单操作。它与 Route 53（或任何其他 DNS）无关。它唯一做的就是交换两个 CNAME。例如，您有一个`foo-1`带有 CNAME的环境`foo-1.example.com`，而另一个`foo-2`带有 CNAME的环境`foo-2.example.com`。交换操作环境后`foo-1`会在`http://foo-2.example.com`.

为了以零停机时间部署新版本的应用程序，此操作是必需的。您的 DNS 会将您`www.example.com`指向`foo-1`，它会通过几秒钟的 CNAME 交换即时更改。用户不会看到任何延迟，前提是您的应用程序知道如何共享资源（例如数据库）。

你可以看看[jcabi-beanstalk-maven-plugin](http://www.jcabi.com/jcabi-beanstalk-maven-plugin/)（我是一名开发人员）。这个 Maven 插件以完全自动化的方式执行此 CNAME 交换操作。

# c - 具有两个可用“工人”的加权间隔调度

> ID：11551617
> 
> 赞同：4
> 
> 时间：2012-07-18T23:03:07.393
> 
> 标签：c, algorithm, optimization

我正在尝试编写一段代码，该代码采用一组加权间隔，并将它们最佳地分布在两个“工人”之间，以最大化权重。输入示例如下。

```
9
1 2 1
1 3 3
2 4 1
3 5 1
4 6 2
5 7 1
6 8 2
7 9 1
8 10 2 
```

“9”是间隔的数量，列定义为

```
s f v

s=start time
f=finish time
v=weight 
```

到目前为止，我已经使用二进制搜索来确定最右边的前一个间隔的“p”值并将其存储在一个数组中。从那里我一次检查一个输入变量，以确定最大权重以及当前间隔是否应该包含在我将称之为“队列”的任一工作人员“队列”中。

到目前为止，这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

#define TABSIZE (100)

int n,s[TABSIZE],f[TABSIZE],v[TABSIZE],p[TABSIZE],M[TABSIZE],M2[TABSIZE];

int binSearchLast(int *a,int n,int key)
{
// Input: int array a[] with n elements in ascending order.
//        int key to find.
// Output: Returns subscript of the last a element <= key.
//         Returns -1 if key<a[0].
// Processing: Binary search.

int low,high,mid;
low=0;
high=n-1;

// subscripts between low and high are in search range.
// size of range halves in each iteration.
// When low>high, low==high+1 and a[high]<=key and a[low]>key.
while (low<=high){
    mid=(low+high)/2;
    if (a[mid]<=key)
        low=mid+1;
    else
        high=mid-1;
}

return high;
}

main()
{
int i,j,sum=0,sum2=0;

scanf("%d",&n);
f[0]=(-999999); // For binarySearchLast
for (i=1;i<=n;i++)
    scanf("%d %d %d",&s[i],&f[i],&v[i]);
for (i=2;i<=n && f[i-1]<=f[i];i++);
    if (i<=n){
        printf("Intervals not ordered by finish time %d\n",__LINE__);
        exit(0);
    }

for (i=1;i<=n;i++)
    p[i]=binSearchLast(f,n+1,s[i]);

M[0]=0;
M2[0]=0;

//checks to see if the resulting weight is bigger in a certain queue
for (i=1;i<=n;i++){
    if(v[i]+M[p[i]]>M[i-1] && !(v[i]+M2[p[i]]>M2[i-1]))
        M[i]=v[i]+M[p[i]];
    else if(v[i]+M2[p[i]]>M2[i-1] && !(v[i]+M[p[i]]>M[i-1]))
        M2[i]=v[i]+M2[p[i]];
    else
        M[i]=M[i-1];
}

printf("\n\nroom 1:\n\n");
for (i=n;i>0; ){
    if (v[i]+M[p[i]]>=M[i-1]){
        printf("%d %d %d\n",s[i],f[i],v[i]);
        sum+=v[i];
        i=p[i];
    }
    else
        i--;
}
printf("\n\nroom 2:\n\n");
for (i=n;i>0; ){
    if (v[i]+M2[p[i]]>=M2[i-1]){
        printf("%d %d %d\n",s[i],f[i],v[i]);
        sum2+=v[i];
        i=p[i];
    }
    else
        i--;
}

printf("sum 1 is %d\n",sum);
printf("sum 2 is %d\n",sum);
} 
```

这似乎适用于房间 1，但房间 2 出于某种原因出现完全相同的队列。这是我当前的输出：

```
room 1:

8 10 2
6 8 2
4 6 2
2 4 1
1 2 1

room 2:

8 10 2
6 8 2
4 6 2
2 4 1
1 2 1 
```

当“正确”输出应如下所示时：

```
room 1:

8 10 2
6 8 2
4 6 2
2 4 1
1 2 1

room 2:

7 9 1
5 7 1
3 5 1
1 3 3 
```

任何见解将不胜感激。

编辑**看着它，我认为它实际上可能与我在打印结果时确定哪些间隔包含在 M[] 和 M2[] 中的方式有​​关。看来这只是巧合，两个房间的输出相同。我仍然没有想出如何解决这个问题，但是我仍在寻求建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:10:38.053

**首先，**关于要求...

当你说你想“在两个工人之间以最佳方式分配任务以最大化权重”时，我假设你想将任务分配给工人，这样（a）没有工人有基于开始-完成间隔的重叠任务，但是（b）最可能的重量工作实际上分配给了工人。如果任务重叠太多，则可能由于重叠而无法将所有任务分配给两个工人。（使用您的测试数据，可以分配所有任务。）

如果是这样，这是[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的变体，但有两个背包。众所周知，这个问题是“NP 难题”，出于实际目的，这意味着它需要一个比您编码的更复杂的解决方案——毫无疑问，这是使用递归编程的东西。但是，有一些更简单的算法可以产生足够好的但通常不是最优的答案。

**其次，**关于您的解决方案...

代码的中心部分需要注意。你有：

```
M[0]=0;
M2[0]=0;

//checks to see if the resulting weight is bigger in a certain queue
for (i=1;i<=n;i++){
    if(v[i]+M[p[i]]>M[i-1] && !(v[i]+M2[p[i]]>M2[i-1]))
        M[i]=v[i]+M[p[i]];
    else if(v[i]+M2[p[i]]>M2[i-1] && !(v[i]+M[p[i]]>M[i-1]))
        M2[i]=v[i]+M2[p[i]];
    else
        M[i]=M[i-1];
} 
```

我冒昧地扩展了变量名：

```
// Cumulative weights of tasks assigned to workers 1 and 2.
// E.g., load1[5] is total weight of tasks, selected from
// tasks 1..5, assigned to worker 1\.     
load1[0] = 0;
load2[0] = 0;

// checks to see if the resulting weight is bigger in a certain queue
for (i = 1; i <= count; i++){
    if  (weight[i] + load1[prior[i]] > load1[i-1]
    && !(weight[i] + load2[prior[i]] > load2[i-1]))
        load1[i] = weight[i] + load1[prior[i]];
    else
    if  (weight[i] + load2[prior[i]] > load2[i-1]
    && !(weight[i] + load1[prior[i]] > load1[i-1]))
        load2[i] = weight[i] + load2[prior[i]];
    else
        load1[i] = load1[i-1];
} 
```

IF 语句只满足四种可能性中的两种：`weight[i]`在 中好`load1`但不在 中`load2`，或者在 中好`load2`但不在 中`load1`。您的代码不适合`weight[i]`在两者中都很好的情况`load1`和`load2`，或两者都不好。此外，对于 each `i`，代码分配给`load1[i]`或分配给`load2[i]`两者，因此在循环结束时，一半的数组值是未定义的。

`load1`正因为如此，您总是会使用填充零的默认 ELSE 。在循环结束时，`load1`全是零，并且`load2`是 undefined*（除了`load2[0]`）。

稍后在打印循环中，所有的零都会导致第一个打印循环向后跳到`prior`表格中以打印您看到的结果。可能未初始化的`load2`数组也恰好为零，因此第二个打印循环执行相同的操作。

**该怎么办？**如果您需要有保证的最优算法，建议您研究背包问题。如果一个“足够好”的算法可以，也许你可以尝试一些简单的算法（例如，将每个任务分发给第一个有能力的工人），看看它们在不同的测试数据集下运行得如何。

（*技术上，因为`load2`是在程序中隐式声明`static`，它会被 C 编译器初始化为零，但你不应该依赖这个。）

# android - 如何将 TextView 与另一个中断到下一行的 TextView 的右侧对齐？

> ID：11551620
> 
> 赞同：2
> 
> 时间：2012-07-18T23:03:16.487
> 
> 标签：android, android-relativelayout, textview

我遇到的问题是将第二个对齐到跨越两行`TextView`的右侧。`TextView`

我正在使用 a `RelativeLayout`，但是当我使用`layout_toRightOf`它时它会出现在屏幕顶部，而当我添加`layout_alignRight`它时它会消失。

我很困惑这是如何工作的。你会假设它会跟随第一个`TextView`结束的地方，但事实并非如此。哦，我正在使用`wrap_content`宽度和高度，以防有人认为这是问题所在。提前致谢。

XML

```
<TextView 
            android:id="@+id/edit_event_name_show"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="18dp"
            android:textStyle="bold"
            android:layout_marginBottom="5dp"
            android:scrollHorizontally="false"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true" />
        <TextView 
            android:id="@+id/show_event_type"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="10dp"
            android:scrollHorizontally="false"
            android:layout_toRightOf="@+id/edit_event_name_show"
            android:layout_alignBaseline="@+id/edit_event_name_show" /> 
```

**编辑**：对于尝试将事物与 TextViews 很好地对齐时遇到类似问题的任何人，默认情况下没有办法。但是您可以使用`SpannableString`和构建它们`SpannableStringBuilder`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:16:20.900

**使用 Spanables**

我已经离开谈话来摆弄 Spannables 并创建了这个：

```
public class Example extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TextView textView = new TextView(this);
        textView.setTextSize(18);

        String first = "A sentence that contains enough balderdash, blather and babble to wrap at least once.";
        String second = " (Normal)";

        Spannable span = new SpannableString(first + second);
        span.setSpan(new StyleSpan(Typeface.BOLD), 0, first.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        span.setSpan(new RelativeSizeSpan(0.7f), first.length(), span.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        textView.setText(span);
        setContentView(textView);
    }
} 
```

但是 prolink007 已经给了你一个通用的链接......哦，好吧。反正我要发了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T23:20:39.973

**第三次尝试（成功尝试）**

我相信这会对您有所帮助，并且比其他东西容易得多。

尝试使用此[参考](https://stackoverflow.com/questions/8405661/is-it-possible-to-change-the-text-color-in-a-string-to-multiple-colors-in-java/8405694#8405694)，但更改字体大小而不是颜色。

山姆的回答总结了链接。*（以防链接在某个时候失效。）*

**第二次尝试**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/edit_event_name_show"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:scrollHorizontally="false"
        android:text=" test 1     jfalksjdflkjasdfj"
        android:textSize="18dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/show_event_type"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/edit_event_name_show"
        android:layout_alignParentRight="true"
        android:scrollHorizontally="false"
        android:text="test2          adjfalsjdfla fa sdfasdf asf a"
        android:textSize="10dp" />

</RelativeLayout> 
```

* * *

图片：

![在此处输入图像描述](../Images/90d82391f3a81784709b31e8bd40876e.png)

* * *

**第一次尝试**

为什么不用`TextViews`. `LinearLayout`这将使他们更好地组织和更清洁。

试试这个，让我知道它是怎么回事：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/edit_event_name_show"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:scrollHorizontally="false"
            android:text="test1"
            android:textSize="18dp"
            android:textStyle="bold"
            android:layout_weight="1" />

        <TextView
            android:id="@+id/show_event_type"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:scrollHorizontally="false"
            android:text="test2"
            android:textSize="10dp"
            android:layout_weight="1" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

图片：

![在此处输入图像描述](../Images/49f544f9daa89c23bdb244fbf7ad26ef.png)

* * *

长文本：

![在此处输入图像描述](../Images/72d17a9351276fad6e04c3552fc29d86.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-18T04:42:11.783

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/news_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:singleLine="true"
        android:ellipsize="end"
        android:textSize="30sp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="10dp"
        android:textStyle="bold"
        android:text="hiangdnfaljiadnk" />

    <TextView
        android:id="@+id/news_summary"
        android:paddingTop="5dp"
        android:layout_below="@id/news_title"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="25sp"             android:text="hiangdnfaljiadnkfjfaingaldnfasidognkahiangdnfaljiadnkfjfaingaldnfasidognkahiangdnfaljiadnkfjfaingaldnfasidognka"
    />

    <TextView
        android:id="@+id/news_from"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="10dp"
        android:layout_below="@id/news_summary"
        android:layout_alignParentLeft="true"
        android:textSize="20sp"
        android:text="1111111" />

    <TextView
        android:id="@+id/news_comment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingRight="10dp"
        android:layout_below="@id/news_summary"
        android:layout_alignParentRight="true"
        android:textSize="20sp"
        android:text="3333333" />

</RelativeLayout> 
```

![图片](../Images/b1a9263fa829f88f1d491cd074b5a81f.png)

# javascript - iOS 仅防止滚动文档

> ID：11551622
> 
> 赞同：2
> 
> 时间：2012-07-18T23:03:34.993
> 
> 标签：javascript, html, css, ios, scroll

我一直在 Javascript 中使用它来防止滚动我的整个应用程序：

```
function preventBehavior(e) {
e.preventDefault();
}
document.addEventListener("touchmove", preventBehavior, false); 
```

但是，这也阻止了任何`overflow:scroll`元素具有这样做的能力。

同样令人讨厌的是，这会阻止 onClick 功能正常工作。在 jQuery 中，如果我将一个函数绑定到`click`事件，如果您点击该元素，该函数仍将执行，但在释放它之前将您的手指滑开。

有没有更好的方法来防止用户滚动文档（换句话说，我不希望窗口移动），不存在上述问题？

# java - insertBefore(int x, Link l) LinkedList Java

> ID：11551624
> 
> 赞同：0
> 
> 时间：2012-07-18T23:03:57.590
> 
> 标签：java, linked-list

我想实现一种方法，该方法将整数和链接作为输入，并将链接插入到 LinkedList 中的链接位置输入整数之前，我已经实现了：

```
public void insertBefore(int num, String data)
{
    Link current = head;
    int count = 0;
    while (current.next != null)
    {
        if(count == num) {
        Link n = new Link(data);
        n.next = current;
        current.next = n.previous;
        }
    }   
    current = current.next;
    count++;

    } 
```

但是，当我调用该方法时，什么也没有发生，也没有插入链接，所以有人知道该方法的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:11:48.193

如前所述，您的迭代构造在迭代机制之外。此外，您忘记将 current 的 next 元素设置为指向新链接。不确定您使用的是哪种链表，但这里有一个改进。

```
if (count == num) {
    Link n = new Link(data);
    n.next = current;
    current.previous.next = n;
    n.previous = current.previous;
    current.previous = n;
} 
```

针对以下评论，基于您的代码进行更完整的改进：

```
public void insertBefore(int num, String data)
{
    Link current =  head;
    for (int count = 0; count < num && current.next != null; ++count)
    {
        current = current.next;
    }
    Link n = new Link(data);
    n.next = current;
    if (current.previous != null)
        current.previous.next = n;
    n.previous = current.previous;
    current.previous = n;
} 
```

# postgresql - Postgres 隐式地塑造了临时表。我不知道的语法糖？

> ID：11551627
> 
> 赞同：0
> 
> 时间：2012-07-18T23:04:04.497
> 
> 标签：postgresql, stored-procedures, syntactic-sugar

我正在编写一个批处理模式更新函数，目前它看起来像这样：

```
CREATE OR REPLACE FUNCTION gen_category_counts()
RETURNS VOID as $$
BEGIN
    CREATE TEMPORARY TABLE category_stats ON COMMIT DROP AS
    WITH
        PC as(
            SELECT category_id, COUNT(*)
            FROM forum_posts fp
            INNER JOIN forum_topics ft
            ON ft.forum_id = fp.forum_id
            AND ft.id = fp.topic_id
            GROUP BY category_id
       ), 
        tc as(
            SELECT category_id, COUNT(*)
            FROM forum_topics
            GROUP BY category_id 
        )
    SELECT tc.category_id,tc.count AS topic_count, pc.count AS post_count
    FROM tc,pc
    WHERE tc.category_id = pc.category_id;

    UPDATE forum_category_nodes fcn 
    set post_count = category_stats.post_count, topic_count = category_stats.topic_count
    from category_stats
    where fcn.id = category_stats.category_id; 
END;
$$ LANGUAGE plpgsql; 
```

是否有一些语法糖比写出一个完整的句子来声明一个仅在函数期间存在的临时表更好？

Sql Server 有一个`select into #tablename`（不记得确切的语法，可能是@tablename）。我已经在邮件列表中看到了这种语法风格，但它在语法上是不正确的，EBBF`select into` [文档也提到了临时表，以及紧挨着`into`子句](http://www.postgresql.org/docs/9.1/static/sql-selectinto.html)。

因此，如果 postgres 确实为隐式定义的作用域临时表提供了更好的糖，那是什么？:D

ps，我将编写具有数百行逻辑的程序，这些东西加起来：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:20:47.507

好的，一个小捷径：

```
CREATE **TEMP** TABLE category_stats ON COMMIT DROP AS
```

除此之外，据我所知，您在问题中使用的是最简单的形式 - 在过去几年中，我一直在使用临时*表*。

老实说，我不明白为什么一些描述性的关键词会打扰我。

# javascript - 将数组放入 if 语句的变量中

> ID：11551632
> 
> 赞同：0
> 
> 时间：2012-07-18T23:04:30.387
> 
> 标签：javascript, arrays, if-statement

我试图将数组的内容放入一个变量中，然后在 if 语句中使用它。我的目标是找到一个数组的最大数量并用相应的“月份”显示它。我能够达到最大数量，但是 i = maxMonthIndex 应该怎样才能使 if 语句正常工作？

```
function displayHighestSalary() {

    console.log("Inside displayArrayContents function");

    var maxFinal;
    var max = monthlySales[0];
    var maxMonth;
    var maxMonthIndex;

    console.log("monthlySales.length = " + monthlySales.length);

    //Loop through array and build display string
    for (var i = 0; i < monthlySales.length; i++)  
    {
        if (monthlySales[i] > max) {
            max = monthlySales[i];
            maxMonthIndex = **??????**;
        }
    }

    console.log("max = " + max)

    if (maxMonthIndex = monthlySales[0]) {
        maxMonth = "january";
    }
    else if (maxMonthIndex = monthlySales[1]) {
        maxMonth = "February";
    }
    else if (maxMonthIndex = monthlySales[2]) {
        maxMonth = "March";
    }
    else if (maxMonthIndex = monthlySales[3]) {
        maxMonth = "April";
    }
    else if (maxMonthIndex = monthlySales[4]) {
        maxMonth = "May";
    }
    else if (maxMonthIndex = monthlySales[5]) {
        maxMonth = "June";
    }
    else if (maxMonthIndex = monthlySales[6]) {
        maxMonth = "July";
    }
    else if (maxMonthIndex = monthlySales[7]) {
        maxMonth = "August";
    }
    else if (maxMonthIndex = monthlySales[8]) {
        maxMonth = "September";
    }
    else if (maxMonthIndex = monthlySales[9]) {
        maxMonth = "October";
    }
    else if (maxMonthIndex = monthlySales[10]) {
        maxMonth = "November";
    }
    else if (maxMonthIndex = monthlySales[11]) {
        maxMonth = "December";
    }

    maxFinal = addCommas(max);

    //Display results
    document.getElementById('divDisplayHighest').innerHTML = "$" + maxFinal + " " +     maxMonth;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:11:14.057

设置`maxMonthIndex`为`i`：

```
//Loop through array and build display string
for (var i = 0; i < monthlySales.length; i++)  
{
    if (monthlySales[i] > max) {
        max = monthlySales[i];
        maxMonthIndex = i;
    }
} 
```

将赋值语句更改为`===`并比较索引（数字）而不是最大值：

```
if (maxMonthIndex === 0) {
    maxMonth = "january";
}
// and so on 
```

**更好的是：**

```
// add this up top with all of your other variable declarations
var monthLabels = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

//then...
//Loop through array and build display string
for (var i = 0; i < monthlySales.length; i++)  
{
    if (monthlySales[i] > max) {
        max = monthlySales[i];
        maxMonthIndex = i;
    }
}
// now that you know the maxMonthIndex, get the label
maxMonth = monthLabels[maxMonthIndex]; 
```

# javascript - 可以用 JS 序列化当前的 DOM 吗？

> ID：11551633
> 
> 赞同：5
> 
> 时间：2012-07-18T23:04:31.940
> 
> 标签：javascript, dom

我想使用 javascript 将 DOM 树的当前状态序列化为字符串。尽管我更喜欢 html，但生成的格式并不重要。

是否有捷径可寻？

作为记录，我想使用 PhantomJs 自动下载页面，使用 js 脚本对其进行操作，并保存页面的当前状态（但不是图像或 pdf 格式）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T06:56:55.630

您可以使用 XMLSerializer 序列化 dom 的任何元素或部分。这里是代码

```
 Element.prototype.innerText = function(){
var serializer = new XMLSerializer();
var serialized = serializer.serializeToString(this);
return serialized;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-05T12:14:58.630

您可以在浏览器控制台中运行它：

```
new XMLSerializer().serializeToString(document); 
```

替换`document`为任何节点。例如，结合 CSS 选择：

```
new XMLSerializer().serializeToString(document.querySelector('h1')); 
```

> "http://www.w3.org/1999/xhtml\" itemprop=\"name\" class=\"grid--cell fs-headline1 fl1 ow-break-word mb8\">可以用js序列化吗当前的 DOM？”

我们可以将其包装在一个函数中：

```
const serializeElement = el => {
  const serializer = new XMLSerializer();
  return serializer.serializeToString(el);
}; 
```

# php - PHP：在该行之后获取下一个完整行和文本

> ID：11551634
> 
> 赞同：0
> 
> 时间：2012-07-18T23:04:48.880
> 
> 标签：php

如果我有一个格式如下的文本文件：

```
00:00:00 Text 1
00:00:01 Text 2
00:00:02 Text 3
00:00:03 Text 4
00:00:04 Text 5
00:00:05 Text 6 
```

**我将如何创建一个 PHP 函数以在从**下一行开始的特定时间后获取所有文本？

示例：指定时间 00:00:03，从 00:00:04 获取所有行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:10:31.830

这不是家庭作业还是什么？

一种方法是读取文件，用换行符分割，循环直到找到有问题的行，然后抓取数组的其余部分，重新​​组合，返回。

当然，有很多方法可以做到这一点。

```
$contents = file_get_contents("/path/to/file.txt");
$lines = explode("\n",$contents);
for($i = 0; $i < count($lines); $i++) {
    $time = substr($lines[$i],0,8);
    if( $time == "00:00:03" ) {
        array_splice($lines, 0, $i+1) //removes 0 -- $i from $lines
        return implode("\n", $lines);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:11:27.743

查看 PHP 函数：

*   [fgets](http://php.net/manual/en/function.fgets.php)
*   [子串](http://php.net/manual/en/function.substr.php)

本质上，您将需要遵循以下过程：

1.  打开文件指针指向包含文本的文件
2.  使用 fgets 一次拉一条线
3.  使用 substr 获取时间，检查是否匹配
4.  如果不匹配继续；如果匹配，则设置一个标志并继续；
5.  如果满足 flag 则跳过 substr 检查并对数据执行某些操作（此时数据将是您所期望的）。

# java - 如何加载和显示位图

> ID：11551637
> 
> 赞同：0
> 
> 时间：2012-07-18T23:05:10.090
> 
> 标签：java, android, bitmap

我想在屏幕上显示某种图形。我知道我可以使用位图。我将图像保存在文件夹中`res/drawable-hdpi`，它是`player.png`.

现在我想将此图像加载到我的位图中，我该怎么做？像这样：

```
bitmap = BitmapFactory.decodeFile("/drawable-hdpi/player.png"); 
```

但它不起作用。如果有人能告诉我如何在绘图时显示此位图方法，我也将不胜感激，如下所示：

```
public void draw(Canvas canvas){    
  canvas.drawBitmap(bitmap, posX, posY, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:13:41.237

我想我可能对你有一个简单的解决方案，但如果这是你想要的，我不知道。请检查我的代码并让我知道是否有效！

```
Drawable drawable = Context.getResources().getDrawable(R.drawable.my_image);
Bitmap bitmap =((BitmapDrawable) drawable).getBitmap(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:28:34.020

这就是你想要的。

```
bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.player); 
canvas.drawBitmap(bitmap, 0, 0, null); 
```

编译过程将对所有资源的引用放在 R.java 文件中。

编辑：此代码是从继承自 View 的类中完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T01:34:45.840

您可以使用查询 android 库。它很容易使用。这是一个开源项目。仍处于测试阶段。但它非常稳定，我在所有应用程序中都使用它。

aq.id(R.id.image1).image("http://www.vikispot.com/z/images/vikispot/android-w.png");

[http://code.google.com/p/android-query/wiki/AsyncAPI?tm=6](http://code.google.com/p/android-query/wiki/AsyncAPI?tm=6)

# python - 计数线 Matplotlib Python

> ID：11551638
> 
> 赞同：0
> 
> 时间：2012-07-18T23:05:24.233
> 
> 标签：python, matplotlib, contour

如果我有一个包含每次都反映位置的元组的列表，我所需要的只是有一个图形，将这个向量显示为速度的计数线（另一个列表）。我该怎么做？

例如：

```
import matplotlib.pyplot as plt
import numpy as np
position = [(12,14), (12.22,13.22), (15, 17)]
velocity = [4.55,2.13,5] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:05:31.683

使用 griddata() 将散点转换为网格数据，这是一个示例：

```
import numpy as np
from scipy.interpolate import griddata
import matplotlib.pyplot as plt
np.random.seed(0)

x = np.random.normal(size=200)
y = np.random.normal(size=200)
v = np.sqrt(x**2+y**2)

xg, yg = np.mgrid[x.min():x.max():100j, y.min():y.max():100j]
vg = griddata((x, y), v, (xg, yg), method='cubic')
plt.contourf(xg, yg, vg)
plt.scatter(x, y, c=v)
plt.show() 
```

输出是：

![在此处输入图像描述](../Images/912ac44ae37b1097ead59801e5a659ed.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:07:42.280

如果你想绘制每个点的速度，那么你应该尝试`quiver`。它制作了一个方向场（箭头）图。由于速度是矢量，它同时具有 a`x`和`y`分量。

```
import pylab as plt

x=[12, 13, 14, 15, 16] # x-axis coordinates
y=[14, 15, 16, 17, 18] # y-axis coordinates

v_x=[6, 6, 6, 6, 6] # x-component of velocity
v_y=[1,4,3,2,1]     # y-component of velocity

plt.quiver(x,y,v_x,v_y)
plt.xlim(11,17)
plt.ylim(13,19)

plt.show() 
```

如果您想了解更多关于[.](http://matplotlib.sourceforge.net/examples/pylab_examples/quiver_demo.html)`quiver`

相反，`contour`是一些变量沿其具有恒定值的曲线。如果您想了解更多信息，请查看[此处。](http://matplotlib.sourceforge.net/examples/pylab_examples/contour_demo.html)

# django - 在 Django 管理界面中链接以直接从数据库中下载模型字段

> ID：11551642
> 
> 赞同：2
> 
> 时间：2012-07-18T23:05:42.880
> 
> 标签：django, postgresql, django-admin

我将二进制文件作为 base64 编码字符串存储在模型的 TextField() 中。我这样做是这样的：

```
class Foo(models.Model):
  _data = models.TextField(db_column='data', blank=True)

  def set_data(self, data):
    self._data = base64.encodestring(data)

  def get_data(self):
    return base64.decodestring(self._data)

  data = property(get_data, set_data) 
```

（[来自这个片段](http://djangosnippets.org/snippets/1597/)）。

如何提供从 Django 管理界面（最好是从模型实例的更改/编辑页面）下载这些文件（解码后）的链接？

我可以对它们进行解码并在页面上显示它们——就像任何其他模型字段一样——但它要么不显示，要么就是垃圾，因为它们是二进制文件。我想提供一个下载链接。

我可以在谷歌上搜索到的关于 Django 文件的大部分信息都假设我正在接受用户上传，或者我想直接从网络服务器提供静态（媒体）文件。也不是这样。我的文件很小，不经常使用，并且仅用于管理用途，因此直接将它们存储在数据库中或让 Django 自己提供它们并没有什么坏处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:35:44.160

查看 ModelAdmin.get_urls(self) 的文档：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)

有一个如何将视图添加到 ModelAdmin 对象的示例。您的自定义视图应该返回一个响应，其中内容是您存储的 base64 数据（尽管您可能希望将其从 base64 转换回二进制）。

然后，您可以覆盖该模型的管理模板以包含指向您的自定义视图的链接：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)

# prototypejs - 如何在 Prototype 中从 HTML 创建元素？

> ID：11551647
> 
> 赞同：1
> 
> 时间：2012-07-18T23:05:50.027
> 
> 标签：prototypejs, handlebars.js

有没有办法在原型中从 HTML 创建元素，类似于 jQuery 的`$('<div>Foo</div>')`？

基本上，我从 Handlebars 模板创建 HTML 块，并希望插入 DOM，但不想将其包装在其他元素中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:45:28.993

我将此功能作为“静态方法”添加到 Mustache 中，用于我最近的一个项目以解决相同的问题。我不相信 Prototype 内置任何东西来解决这个问题。我使用隐藏的文本区域来保存我的模板代码，因此`$F()`调用。最后 3 行更具体到您的问题 - 创建一个新 div，插入您应用的模板 html，然后返回第一个后代（此时作为元素）。这假设您的模板只有一个根元素。

```
Mustache.createElementFromTemplateId = function(templateId, data) {
    if (!this.cachedTemplates) this.cachedTemplates = {};

    var templateStr = this.cachedTemplates[templateId];
    if (!templateStr) {
        templateStr = $F(templateId);
        this.cachedTemplates[templateId] = templateStr;
    }

    var appliedTemplateStr = this.render(templateStr, data);

    var div = new Element("div");
    div.insert( appliedTemplateStr );
    return div.firstDescendant();
}; 
```

# php - 如果有任何免费平台或购买php平台的购物车，我在哪里可以得到

> ID：11551654
> 
> 赞同：0
> 
> 时间：2012-07-18T23:06:18.007
> 
> 标签：php

我做了一个网站，里面有一些产品，这个网站是用 php 制作的，我想在上面集成一张购物卡。

您能否向我推荐任何开源平台，或者您认为哪个是最好的。

说最好的我的意思也是，易于安装和集成。

还有一个问题，如果我有购物车，我是否也应该咨询任何一家银行，或者它通过提供我的信用卡详细信息来完成这项工作的脚本，我的意思是用于资金交易。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:13:16.307

我使用 zend cart（开源），它开箱即用，效果很好，而且很容易进行修改。他们还有一个很棒的社区它支持贝宝，离线信用卡处理等

还有osCommerce，但我没用过。

# c# - 如何可视化各种 DateTime 格式的显示方式？

> ID：11551655
> 
> 赞同：3
> 
> 时间：2012-07-18T23:06:22.013
> 
> 标签：c#, winforms, datetime, formatting, datetime-format

我希望能够快速参考各种 DateTime 格式的显示方式，而不是进行繁琐的编辑、编译、gawk 和递归直到满意为止。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T23:28:09.167

这显示了当前文化的所有格式：

```
StringBuilder sb = new StringBuilder();
foreach (string dateTimePattern in DateTimeFormatInfo.CurrentInfo.GetAllDateTimePatterns()) {
    sb.AppendFormat("{0} = {1}\r\n", dateTimePattern, DateTime.Now.ToString(dateTimePattern));
} 
```

StringBuilder 之后的内容：

```
M/d/yyyy = 7/18/2012
M/d/yy = 7/18/12
MM/dd/yy = 07/18/12
MM/dd/yyyy = 07/18/2012
yy/MM/dd = 12/07/18
yyyy-MM-dd = 2012-07-18
dd-MMM-yy = 18-Jul-12
dddd, MMMM dd, yyyy = Wednesday, July 18, 2012
MMMM dd, yyyy = July 18, 2012
dddd, dd MMMM, yyyy = Wednesday, 18 July, 2012
dd MMMM, yyyy = 18 July, 2012
dddd, MMMM dd, yyyy h:mm tt = Wednesday, July 18, 2012 4:25 PM
dddd, MMMM dd, yyyy hh:mm tt = Wednesday, July 18, 2012 04:25 PM
dddd, MMMM dd, yyyy H:mm = Wednesday, July 18, 2012 16:25
dddd, MMMM dd, yyyy HH:mm = Wednesday, July 18, 2012 16:25
MMMM dd, yyyy h:mm tt = July 18, 2012 4:25 PM
MMMM dd, yyyy hh:mm tt = July 18, 2012 04:25 PM
MMMM dd, yyyy H:mm = July 18, 2012 16:25
MMMM dd, yyyy HH:mm = July 18, 2012 16:25
dddd, dd MMMM, yyyy h:mm tt = Wednesday, 18 July, 2012 4:25 PM
dddd, dd MMMM, yyyy hh:mm tt = Wednesday, 18 July, 2012 04:25 PM
dddd, dd MMMM, yyyy H:mm = Wednesday, 18 July, 2012 16:25
dddd, dd MMMM, yyyy HH:mm = Wednesday, 18 July, 2012 16:25
dd MMMM, yyyy h:mm tt = 18 July, 2012 4:25 PM
dd MMMM, yyyy hh:mm tt = 18 July, 2012 04:25 PM
dd MMMM, yyyy H:mm = 18 July, 2012 16:25
dd MMMM, yyyy HH:mm = 18 July, 2012 16:25
dddd, MMMM dd, yyyy h:mm:ss tt = Wednesday, July 18, 2012 4:25:17 PM
dddd, MMMM dd, yyyy hh:mm:ss tt = Wednesday, July 18, 2012 04:25:17 PM
dddd, MMMM dd, yyyy H:mm:ss = Wednesday, July 18, 2012 16:25:17
dddd, MMMM dd, yyyy HH:mm:ss = Wednesday, July 18, 2012 16:25:17
MMMM dd, yyyy h:mm:ss tt = July 18, 2012 4:25:17 PM
MMMM dd, yyyy hh:mm:ss tt = July 18, 2012 04:25:17 PM
MMMM dd, yyyy H:mm:ss = July 18, 2012 16:25:17
MMMM dd, yyyy HH:mm:ss = July 18, 2012 16:25:17
dddd, dd MMMM, yyyy h:mm:ss tt = Wednesday, 18 July, 2012 4:25:17 PM
dddd, dd MMMM, yyyy hh:mm:ss tt = Wednesday, 18 July, 2012 04:25:17 PM
dddd, dd MMMM, yyyy H:mm:ss = Wednesday, 18 July, 2012 16:25:17
dddd, dd MMMM, yyyy HH:mm:ss = Wednesday, 18 July, 2012 16:25:17
dd MMMM, yyyy h:mm:ss tt = 18 July, 2012 4:25:17 PM
dd MMMM, yyyy hh:mm:ss tt = 18 July, 2012 04:25:17 PM
dd MMMM, yyyy H:mm:ss = 18 July, 2012 16:25:17
dd MMMM, yyyy HH:mm:ss = 18 July, 2012 16:25:17
M/d/yyyy h:mm tt = 7/18/2012 4:25 PM
M/d/yyyy hh:mm tt = 7/18/2012 04:25 PM
M/d/yyyy H:mm = 7/18/2012 16:25
M/d/yyyy HH:mm = 7/18/2012 16:25
M/d/yy h:mm tt = 7/18/12 4:25 PM
M/d/yy hh:mm tt = 7/18/12 04:25 PM
M/d/yy H:mm = 7/18/12 16:25
M/d/yy HH:mm = 7/18/12 16:25
MM/dd/yy h:mm tt = 07/18/12 4:25 PM
MM/dd/yy hh:mm tt = 07/18/12 04:25 PM
MM/dd/yy H:mm = 07/18/12 16:25
MM/dd/yy HH:mm = 07/18/12 16:25
MM/dd/yyyy h:mm tt = 07/18/2012 4:25 PM
MM/dd/yyyy hh:mm tt = 07/18/2012 04:25 PM
MM/dd/yyyy H:mm = 07/18/2012 16:25
MM/dd/yyyy HH:mm = 07/18/2012 16:25
yy/MM/dd h:mm tt = 12/07/18 4:25 PM
yy/MM/dd hh:mm tt = 12/07/18 04:25 PM
yy/MM/dd H:mm = 12/07/18 16:25
yy/MM/dd HH:mm = 12/07/18 16:25
yyyy-MM-dd h:mm tt = 2012-07-18 4:25 PM
yyyy-MM-dd hh:mm tt = 2012-07-18 04:25 PM
yyyy-MM-dd H:mm = 2012-07-18 16:25
yyyy-MM-dd HH:mm = 2012-07-18 16:25
dd-MMM-yy h:mm tt = 18-Jul-12 4:25 PM
dd-MMM-yy hh:mm tt = 18-Jul-12 04:25 PM
dd-MMM-yy H:mm = 18-Jul-12 16:25
dd-MMM-yy HH:mm = 18-Jul-12 16:25
M/d/yyyy h:mm:ss tt = 7/18/2012 4:25:17 PM
M/d/yyyy hh:mm:ss tt = 7/18/2012 04:25:17 PM
M/d/yyyy H:mm:ss = 7/18/2012 16:25:17
M/d/yyyy HH:mm:ss = 7/18/2012 16:25:17
M/d/yy h:mm:ss tt = 7/18/12 4:25:17 PM
M/d/yy hh:mm:ss tt = 7/18/12 04:25:17 PM
M/d/yy H:mm:ss = 7/18/12 16:25:17
M/d/yy HH:mm:ss = 7/18/12 16:25:17
MM/dd/yy h:mm:ss tt = 07/18/12 4:25:17 PM
MM/dd/yy hh:mm:ss tt = 07/18/12 04:25:17 PM
MM/dd/yy H:mm:ss = 07/18/12 16:25:17
MM/dd/yy HH:mm:ss = 07/18/12 16:25:17
MM/dd/yyyy h:mm:ss tt = 07/18/2012 4:25:17 PM
MM/dd/yyyy hh:mm:ss tt = 07/18/2012 04:25:17 PM
MM/dd/yyyy H:mm:ss = 07/18/2012 16:25:17
MM/dd/yyyy HH:mm:ss = 07/18/2012 16:25:17
yy/MM/dd h:mm:ss tt = 12/07/18 4:25:17 PM
yy/MM/dd hh:mm:ss tt = 12/07/18 04:25:17 PM
yy/MM/dd H:mm:ss = 12/07/18 16:25:17
yy/MM/dd HH:mm:ss = 12/07/18 16:25:17
yyyy-MM-dd h:mm:ss tt = 2012-07-18 4:25:17 PM
yyyy-MM-dd hh:mm:ss tt = 2012-07-18 04:25:17 PM
yyyy-MM-dd H:mm:ss = 2012-07-18 16:25:17
yyyy-MM-dd HH:mm:ss = 2012-07-18 16:25:17
dd-MMM-yy h:mm:ss tt = 18-Jul-12 4:25:17 PM
dd-MMM-yy hh:mm:ss tt = 18-Jul-12 04:25:17 PM
dd-MMM-yy H:mm:ss = 18-Jul-12 16:25:17
dd-MMM-yy HH:mm:ss = 18-Jul-12 16:25:17
MMMM dd = July 18
MMMM dd = July 18
yyyy'-'MM'-'dd'T'HH':'mm':'ss.fffffffK = 2012-07-18T16:25:17.0961142-07:00
yyyy'-'MM'-'dd'T'HH':'mm':'ss.fffffffK = 2012-07-18T16:25:17.0961142-07:00
ddd, dd MMM yyyy HH':'mm':'ss 'GMT' = Wed, 18 Jul 2012 16:25:17 GMT
ddd, dd MMM yyyy HH':'mm':'ss 'GMT' = Wed, 18 Jul 2012 16:25:17 GMT
yyyy'-'MM'-'dd'T'HH':'mm':'ss = 2012-07-18T16:25:17
h:mm tt = 4:25 PM
hh:mm tt = 04:25 PM
H:mm = 16:25
HH:mm = 16:25
h:mm:ss tt = 4:25:17 PM
hh:mm:ss tt = 04:25:17 PM
H:mm:ss = 16:25:17
HH:mm:ss = 16:25:17
yyyy'-'MM'-'dd HH':'mm':'ss'Z' = 2012-07-18 16:25:17Z
dddd, MMMM dd, yyyy h:mm:ss tt = Wednesday, July 18, 2012 4:25:17 PM
dddd, MMMM dd, yyyy hh:mm:ss tt = Wednesday, July 18, 2012 04:25:17 PM
dddd, MMMM dd, yyyy H:mm:ss = Wednesday, July 18, 2012 16:25:17
dddd, MMMM dd, yyyy HH:mm:ss = Wednesday, July 18, 2012 16:25:17
MMMM dd, yyyy h:mm:ss tt = July 18, 2012 4:25:17 PM
MMMM dd, yyyy hh:mm:ss tt = July 18, 2012 04:25:17 PM
MMMM dd, yyyy H:mm:ss = July 18, 2012 16:25:17
MMMM dd, yyyy HH:mm:ss = July 18, 2012 16:25:17
dddd, dd MMMM, yyyy h:mm:ss tt = Wednesday, 18 July, 2012 4:25:17 PM
dddd, dd MMMM, yyyy hh:mm:ss tt = Wednesday, 18 July, 2012 04:25:17 PM
dddd, dd MMMM, yyyy H:mm:ss = Wednesday, 18 July, 2012 16:25:17
dddd, dd MMMM, yyyy HH:mm:ss = Wednesday, 18 July, 2012 16:25:17
dd MMMM, yyyy h:mm:ss tt = 18 July, 2012 4:25:17 PM
dd MMMM, yyyy hh:mm:ss tt = 18 July, 2012 04:25:17 PM
dd MMMM, yyyy H:mm:ss = 18 July, 2012 16:25:17
dd MMMM, yyyy HH:mm:ss = 18 July, 2012 16:25:17
MMMM, yyyy = July, 2012
MMMM, yyyy = July, 2012 
```

我不确定为什么会重复几种模式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T06:58:17.950

**自定义日期时间格式**

有以下自定义格式说明符 y（年）、M（月）、d（日）、h（12 小时）、H（24 小时）、m（分钟）、s（秒）、f（秒小数）、F （第二个分数，尾随零被修剪），t（PM 或 AM）和 z（时区）。

以下示例演示了如何将格式说明符重写为输出。[C＃]

```
 // create date time 2008-03-09 16:05:07.123
    DateTime dt = new DateTime(2008, 3, 9, 16, 5, 7, 123);
    String.Format("{0:y yy yyy yyyy}", dt);  // "8 08 008 2008"   year
    String.Format("{0:M MM MMM MMMM}", dt);  // "3 03 Mar March"  month
    String.Format("{0:d dd ddd dddd}", dt);  // "9 09 Sun Sunday" day
    String.Format("{0:h hh H HH}",     dt);  // "4 04 16 16"      hour 12/24
    String.Format("{0:m mm}",          dt);  // "5 05"            minute
    String.Format("{0:s ss}",          dt);  // "7 07"            second
    String.Format("{0:f ff fff ffff}", dt);  // "1 12 123 1230"   sec.fraction
    String.Format("{0:F FF FFF FFFF}", dt);  // "1 12 123 123"    without zeroes
    String.Format("{0:t tt}",          dt);  // "P PM"            A.M. or P.M.
    String.Format("{0:z zz zzz}",      dt);  // "-6 -06 -06:00"   time zone 
```

您还可以使用日期分隔符/（斜杠）和时间分隔符：（冒号）。这些字符将被重写为当前 DateTimeFormatInfo.DateSeparator 和 DateTimeFormatInfo.TimeSeparator 中定义的字符。

```
 // date separator in german culture is "." (so "/" changes to ".")
    String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9/3/2008 16:05:07" - english (en-US)
    String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9.3.2008 16:05:07" - german (de-DE) 
```

以下是自定义日期和时间格式的一些示例：

```
 // month/day numbers without/with leading zeroes
    String.Format("{0:M/d/yyyy}", dt);            // "3/9/2008"
    String.Format("{0:MM/dd/yyyy}", dt);          // "03/09/2008"

    // day/month names
    String.Format("{0:ddd, MMM d, yyyy}", dt);    // "Sun, Mar 9, 2008"
    String.Format("{0:dddd, MMMM d, yyyy}", dt);  // "Sunday, March 9, 2008"

    // two/four digit year
    String.Format("{0:MM/dd/yy}", dt);            // "03/09/08"
    String.Format("{0:MM/dd/yyyy}", dt);          // "03/09/2008" 
```

**标准日期时间格式**

在 DateTimeFormatInfo 中，定义了当前文化的标准模式。例如，属性 ShortTimePattern 是包含值 h:mm tt 用于 en-US 文化和值 HH:mm 用于 de-DE 文化的字符串。

以下示例显示了 String.Format 方法中标准格式说明符的用法和结果输出。

```
 String.Format("{0:t}", dt);  //"4:05 PM"                           ShortTime
    String.Format("{0:d}", dt);  //"3/9/2008"                          ShortDate
    String.Format("{0:T}", dt);  //"4:05:07 PM"                        LongTime
    String.Format("{0:D}", dt);  //"Sunday, March 09, 2008"            LongDate
    String.Format("{0:f}", dt);  //"Sunday, March 09, 2008 4:05 PM"    LongDate+ShortTime
    String.Format("{0:F}", dt);  //"Sunday, March 09, 2008 4:05:07 PM" FullDateTime
    String.Format("{0:g}", dt);  //"3/9/2008 4:05 PM"                  ShortDate+ShortTime
    String.Format("{0:G}", dt);  //"3/9/2008 4:05:07 PM"               ShortDate+LongTime
    String.Format("{0:m}", dt);  //"March 09"                          MonthDay
    String.Format("{0:y}", dt);  //"March, 2008"                       YearMonth
    String.Format("{0:r}", dt);  //"Sun, 09 Mar 2008 16:05:07 GMT"     RFC1123
    String.Format("{0:s}", dt);  //"2008-03-09T16:05:07"               SortableDateTime
    String.Format("{0:u}", dt);  // "2008-03-09 16:05:07Z"             UniversalSortableDateTime 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T23:06:44.463

```
DateTime.Now.ToString("D") displays "Wednesday, July 18, 2012"
DateTime.Now.ToString("d") displays "7/18/2012"
DateTime.Now.ToString("F") displays "Wednesday, July 18, 2012 3:57:13 PM"
DateTime.Now.ToString("f") displays "Wednesday, July 18, 2012 3:57 PM"
DateTime.Now.ToString("G") displays "7/18/2012 3:57 PM"
DateTime.Now.ToString("g") displays "7/18/2012 3:57:30 PM"
DateTime.Now.ToString("M") displays "July 18"
DateTime.Now.ToString("R") displays "Wed, 18 Jul 2012 15:57:55 GMT"
DateTime.Now.ToString("s") displays "2012-07-18T15:58:02"
DateTime.Now.ToString("T") displays "3:56:38 PM"
DateTime.Now.ToString("t") displays "3:56 PM"
DateTime.Now.ToString("U") displays "Wednesday, July 18, 2012 10:58:09 PM"
DateTime.Now.ToString("u") displays "2012-07-18 15:58:17Z"
DateTime.Now.ToString("Y") displays "July, 2012"
DateTime.Now.ToString("42") displays "42" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T23:25:51.507

我这样做过一次......我所做的是创建一个 Windows 应用程序，在其上放置一个标签和一个 TextBox，然后附加到 TextBox Change 事件上

```
Label1.Text = DateTime.Now.ToString(TextBox1.Text) 
```

非常简单，可以帮助您立即尝试。

# css - 我在 iOS 中的网站上的填充过多

> ID：11551658
> 
> 赞同：1
> 
> 时间：2012-07-18T23:06:38.840
> 
> 标签：css, ios

这是我为朋友制作的网站，它看起来很棒，但是在 iOS（iPhone 和 iPad）上查看时，右侧有额外的填充。我什至从来没有告诉它有填充，所以我什至不确定我应该提供什么 CSS 片段。我用萤火虫看过，但找不到任何东西。

这就是我的 iPhone 上的样子 ![在此处输入图像描述](../Images/3a9ccbbb1846a4b1d74f3deea6ff1cb0.png)

谁能告诉我为什么我右边的填充物这么多？

链接WINERY位于第二行是否还有充分的理由？正如在 android 和桌面浏览器上看到的那样，它有足够的空间，但由于某种原因，它位于 iOS 的第二行。

```
#access {
    display: block;
    float: right;
    margin: 0 auto;
    width: 600px;
    margin-right: 20px;
    margin-top: 70px;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:15:00.890

您是否尝试过使宽度更大？我在我的设计中发现，有时宽度在 iOS 上的呈现略有不同，在许多情况下我通过稍微扩大宽度解决了这个问题。

此外，如果您使用列表来显示导航菜单，我发现将`<li>`元素上的填充或边距（如果有）减少几个像素可以帮助解决问题。

# events - ExtJS 4：如果不使用 ExtJS MVC 架构，应该在哪里查看事件？

> ID：11551670
> 
> 赞同：1
> 
> 时间：2012-07-18T23:07:25.877
> 
> 标签：events, extjs, grid

当使用 Sencha ExtJS 框架时，您的视图的事件存在于该视图的控制器内部。如果您不使用控制器，您将事件存储在哪里。

例如，假设我们的 MVC 应用程序，我们有一个用户网格（用户列表），我们有一个事件“itemdblclick”。我们将如何在非 MVC 应用程序中实现“itemdblclick”？

```
Ext.define('AM.view.user.List' ,{
    extend: 'Ext.grid.Panel',
    alias: 'widget.userlist',
    title: 'All Users',

    // we no longer define the Users store in the `initComponent` method
    store: 'Users',

...

});

Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',
    stores: ['Users'],
    models: ['User'],

    views: [
        'user.List',
        'user.Edit'
    ],

    init: function() {
        this.control({
            'viewport > userlist': {
                itemdblclick: this.editUser
            },
            'useredit button[action=save]': {
                click: this.updateUser
            }
        });
    },

    editUser: function(grid, record) {
        var view = Ext.widget('useredit');
        view.down('form').loadRecord(record);
    },

    updateUser: function(button) {
        console.log('clicked the Save button');

        var win = 
            button.up('window'),
            form = win.down('form'),
            record = form.getRecord(),
            values = form.getValues();

        record.set(values);
        win.close();

        // synchronize the store after editing the record
        this.getUsersStore().sync();
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:43:15.777

它们应该存在于组件（实际上是 Observable）的 listeners 属性中，如下所示：

[http://jsfiddle.net/3LCm4/7/](http://jsfiddle.net/3LCm4/7/)

文档：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Observable-cfg-listeners](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Observable-cfg-listeners)

# iphone - 我想使用 NSString filePaths 还是 NSURLs？

> ID：11551675
> 
> 赞同：2
> 
> 时间：2012-07-18T23:08:01.010
> 
> 标签：iphone, ios

许多类都有使用 NSStrings 作为 filePath 或 NSURLs 的版本。一个例子：

```
- (BOOL)copyItemAtPath:(NSString *)srcPath toPath:(NSString *)dstPath error:(NSError **)error
- (BOOL)copyItemAtURL:(NSURL *)srcURL toURL:(NSURL *)dstURL error:(NSError **)error 
```

是否有 /explicit/ 偏好使用一个而不是另一个？我正在寻找有关该主题的文档中的注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:18:04.247

这真的取决于你。但是有很多东西只使用 URL。

您可以轻松地从 NSURL 转到路径。但往另一个方向发展需要一些规范化。

例如，使用带有方案的路径会给你一个不正确的 URL。

```
NSString *pathString = @"file://localhost/etc..../Document.txt";
NSURL *fileURL = [NSURL fileURLWithPath:pathString];// This will not work. 
```

但是，如果初始化正确，您可以期望来自 URL 的路径是正确的路径。

```
NSURL *fileURL = [NSURL URLWithString:pathString];
NSURL *sanePath = fileURL.path; 
```

因此，您可以通过 3 个步骤获得正确的网址

```
NSURL *fileURL = [NSURL URLWithString:pathString];
NSURL *sanePath = fileURL.path;

// You can at this point use the Path and expect it will be correct.

fileURL = [NSURL fileURLWithPath:sanePath];

// You can at this point use fileURL and know it will be a correct fileURL with file://. 
```

或者，您可以检查该方案以查看它是否正确。但这是我在使用 AVAsset 时遇到的一个问题，因为它不会单独从路径加载 NSURL。它必须是一个文件URL

祝你好运。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:23:06.513

根据[这篇文章](https://stackoverflow.com/a/7769339/1536348)：

> “通常对于与路径相关的操作，您应该更喜欢 NSURL 而不是 NSString，因为路径信息可以更有效地存储在 NSURL 中（根据 NSFileManager 的类参考）。所以我建议您也使用 NSURL。
> 
> NSURL 也有 URLByAppendingPathComponent: 和 URLByAppendingPathExtension: 所以方便”

# ios - 在 ios 上动态加载 libspotify

> ID：11551676
> 
> 赞同：1
> 
> 时间：2012-07-18T23:08:03.343
> 
> 标签：ios, jailbreak, spotify, xbmc

我正在为 XBMC 媒体中心开发一个插件。

插件本身是用 python 编写的，依赖于 ctypes 模块来访问 libspotify 的功能。问题是我在 iOS 平台上发现了一个障碍，因为它的 libspotify 构建是一个静态库而不是 dylib，因此 ctypes 模块无法在运行时加载。

我知道将 iOS 应用程序与依赖 dylibs 的代码捆绑在一起会立即被 Apple 拒绝，但我认为这个限制不会影响这个插件，因为 XBMC 只能在越狱设备上运行。

所以问题是：

是否可以在 ios 上动态加载 libspotify 的当前（静态）构建？

也许创建一个单独的 dylib 并将 libspotify 静态链接到它可以解决问题？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:07:10.613

如果您的*插件*能够加载 iOS dylib，那么我不明白为什么您不能为 libspotify.a 库构建 dylib 包装器。

在 Xcode 中创建一个适用于 iOS 的 dylib 项目。请参阅[我的回答，了解如何做到这一点](https://stackoverflow.com/a/10509453/119114)。然后，该 dylib 将链接到 libspotify.a。

# c++ - 在没有 Visual Studio 的计算机上运行 opencv dll

> ID：11551677
> 
> 赞同：0
> 
> 时间：2012-07-18T23:08:07.623
> 
> 标签：c++, visual-studio-2010, opencv, c++-cli

我有一个在 VS2010 中使用 opencv 2.4 生成的 64 位 dll (Imageloc.dll)。在 Windows 7 上调用它时工作正常。但是，当我在 Windows 2000 服务器上运行它时，它给了我

未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集“Imageloc.dll”或其依赖项之一。指定的模块无法找到。在 Test.Program.Main(String[] args)

我在 Windows 2000 上设置了如下环境路径值，就像 Windows 7

C:\Applications\opencv\build\x64\vc10\bin; C:\Applications\opencv\build\common\tbb\intel64\vc10;

安装在 c:\Applications\opencv 中的 openCv 2.4 产品

Visual Studio 安装在 Windows 7 上，但未安装在 Windows 2000 上。

任何帮助表示赞赏。

更新：我在另一台装有 Windows 7 但没有 Visual Studio 的计算机上运行它，它给了我同样的错误。我用 Visual Studio 在 Windows 2000 上运行它，它工作正常。Visual Studio 如何使其工作？

dll 的程序是用 c++-cli 编写的，并在 /MD 中编译。它可能与 C 运行时库或 CLR dll 的某些 dll 有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:49:38.230

I imagine that you would have trouble running a 64-bit DLL on any 32-bit operating system, not just Windows 2000...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:12:03.163

如果在 Win2K 机器上安装 Visual Studio 可以使您的程序正常工作，那么您可能缺少 Visual C++ 运行时。您可以将 C++ 代码设置为不需要运行时进行编译，但对于单个部署，安装运行时同样容易。

x86：[http ://www.microsoft.com/en-us/download/details.aspx?id=5555](http://www.microsoft.com/en-us/download/details.aspx?id=5555)

x64：[http ://www.microsoft.com/en-us/download/details.aspx?id=14632](http://www.microsoft.com/en-us/download/details.aspx?id=14632)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T15:57:20.567

这是因为它缺少在编译 /clr /md 选项期间加载的 dll

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T18:41:25.657

这次更仔细地阅读了这个问题后，我可以指出 Visual Studio 2010 应用程序不会在早于 Windows XP Service Pack 2 的任何设备上运行，因为旧版本的 Windows 没有它使用的所有 API。但是，[在 Windows 2000 中使用 Visual Studio 2010 编译的 C++ DLL 的问题](https://stackoverflow.com/questions/2664607/)的[答案](https://stackoverflow.com/a/2668410)之一确实提出了一种可能的解决方法，即您可能能够提供一个存根库来实现缺失的导入。

# java - 如何将 Ant 编译器更改为 JDK 1.6

> ID：11551678
> 
> 赞同：12
> 
> 时间：2012-07-18T23:08:09.863
> 
> 标签：java, ant

我需要编译我的源代码以与 jre 1.6 兼容。但是，当我尝试将 javac 任务的编译器属性设置为 javac1.6 时，ant 仍然会使用 javac1.7 编译我的代码。我还尝试将编译器版本设置为“现代”，但这没有帮助。

```
<target name="compile-tests">
    <javac compiler="javac1.6" includeantruntime="false" srcdir="${test.dir}"
     destdir="${build.dir}" >
        <classpath refid="class.path" />
    </javac>
</target> 
```

我的 JAVA_HOME 设置为 JDK 1.6：

```
echo $JAVA_HOME </code> gives: <code>
/usr/lib/jvm/java-6-openjdk-amd64/ 
```

我的蚂蚁版本是：Apache Ant(TM) 版本 1.8.2

根据[这篇文章](https://stackoverflow.com/questions/10543336/which-javac-exe-is-used-by-ant-javac-task)，ant 使用自己的编译器。如何覆盖蚂蚁默认值？另外，根据[这篇文章](https://stackoverflow.com/questions/235363/override-the-compiler-attribute-in-an-ant-javac-task)和 ant 文档，我可以设置全局 build.compiler 属性。我将该属性设置为什么，我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-18T23:19:28.023

在任务中，尝试通过如下`javac`设置属性来指定 Java 编译器：`executable`

```
<property name="JDK1.6.dir" location="/usr/lib/jvm/java-6-openjdk-amd64" />
<property name="javac1.6" location="${JDK1.6.dir}/bin/javac" />

<target name="compile-tests">
  <javac executable="${javac1.6}" 
      fork="yes"
      includeantruntime="false" 
      srcdir="${test.dir}"
      destdir="${build.dir}" >
    <classpath refid="class.path" />
  </javac>
</target> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-02T21:59:46.957

我认为为这个问题添加一个更新的答案会很好，因为我最近处理了很多关于这个问题的头痛。我的具体用例：我的计算机使用 JRE1.8，但我需要 ant 来定位服务器上运行的 JRE1.7。对我来说，诀窍是结合使用以下属性（参考[文档](http://ant.apache.org/manual/Tasks/javac.html)）：

*   **srcdir**：java 文件的位置。
*   **destdir**：存储类文件的位置。
*   **includeantruntime**：是否在类路径中包含 Ant 运行时库。*通常最好*将此设置为 false，这样脚本的行为对其运行的环境不敏感。
*   **source** : 编译器接受的 Java 语言特性
*   **target**：为特定的 JVM 版本生成类文件（交叉编译）。
*   **fork**：是否在外部使用 JDK 编译器执行 javac。
*   **compiler**：要使用的编译器实现。

您*不必*指定可执行文件，除非您确实有特定的依赖项（例如，较新的企业版本而不是最新的免费版本）。

**例子：**

```
<javac srcdir="${source}"
       destdir="${java.output.dir}"
       includeantruntime="false"
       source="1.7"
       target="1.7"
       fork="yes"
       compiler="javac1.7">
</javac> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T00:06:38.383

我认为 Ant`compiler`属性只是为了知道编译器支持哪些属性。一般来说`javac`，传递给编译器的属性或选项是`target`.

您甚至不需要安装 Java 6 编译器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T16:16:21.077

使用 Ant javac 任务的“target”属性来定义您希望类文件兼容的 Java 版本（因此在您的情况下将其设置为“1.6”）。有关更多详细信息，请参阅[任务文档](http://ant.apache.org/manual/Tasks/javac.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-18T15:57:27.313

谈到 Ant 的基础知识，因为它需要一个 JVM 来运行，所以它识别一个 JRE 就足够了。但是，如果构建过程需要编译类，那么它将依赖于 Java 编译器，如果找不到，则构建将失败。

可以将 Ant 设置为使用几种 Java 编译器之一，但是我将重点关注 Oracle 的 javac 以进行下面的解释。以下是替代方案...

1.  如果 Ant 识别执行的 JRE 是 JDK 下的子目录，它将提升到 JDK 级别并识别所需的资源。

2.  如果 JAVA_HOME 环境变量设置为指向 JVM（不是 JRE），那么 ant 将能够编译 Java 工件

3.  或者，根据 Ant 文档，可以将 JAVACMD 设置在特定于操作系统的批处理文件（Windows 的 antrc_pre.bat）中，放置在您的主目录（而不是 Ant 的主目录）下，然后它将识别 JVM。请注意，JAVACMD 应该引用 bin 文件夹下的 Java.exe 的完整路径，而不是 JVM home 的完整路径。

4.  或者，Ant 命令行可以使用`-l`选项获取库列表。将 tools.jar 传递给`-l`选项就足够了。

5.  最后，JavaC 任务的 fork 属性可以如上所述设置。请记住，这是资源密集型的，不推荐。

# c# - 部署：并行安装导致“已安装此产品的另一个版本”错误

> ID：11551680
> 
> 赞同：0
> 
> 时间：2012-07-18T23:08:40.537
> 
> 标签：c#, deployment

部署 C# Windows 服务的另一个实例时，遇到以下错误消息：

> “该产品的另一个版本已经安装。此版本的安装无法继续。要配置或删除此产品的现有版本，请使用“控制面板”上的“添加/删除程序”</p>

**现在的问题是我们确实想要部署相同服务和版本的 2 个实例。**

在这种情况下，每项服务都为分销 2 个不同品牌的客户做同样的事情。与其创建多租户应用程序，不如向现有产品出售额外的许可证更容易。

所以我的问题：

1.  解决此问题以更改服务产品代码的 GUID 的唯一方法是什么？

2.  如果是这样，如何自动完成，这样我就不必在每次部署时重新构建？此错误消息在安装向导之前出现，因此在安装期间使用自定义屏幕不是解决此问题的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:22:08.257

如果您在解决方案资源管理器中选择安装项目，然后查看属性选项卡，则有一个“检测已安装的较新版本”属性，如果您将其设置为 false，它应该可以正常工作，但是请记住将应用程序安装在不同的位置..

# c# - 属性参数的 MVC 非常量与 Membership 属性同步

> ID：11551684
> 
> 赞同：0
> 
> 时间：2012-07-18T23:09:02.913
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0, membership-provider

首先，我对 MVC 相当陌生，但在 MVC3 中有一个现有项目并在使用 MVC4，因此对这两个版本的答案表示赞赏。

在我的 mvc 视图中，我有这一行：

```
Passwords must be at least @Membership.MinRequiredPasswordLength characters long. 
```

在模型中我有这个：

```
[Required]
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
[DataType(DataType.Password)]
[Display(Name = "Password")]
public string Password { get; set; } 
```

（这些是为 MVC 模板项目自动生成的）

我的 web.config MembershipProvider 有这个属性：

```
minRequiredPasswordLength="8" 
```

这样做的问题是，用户将被告知最小长度为 8，但实际验证为 6。当然，我可以将两者设置为相同的值，但我想知道是否有一种简单的方法来仅使用其中之一或同步两者。

我试过这个：

```
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = Membership.MinRequiredPasswordLength)] 
```

但得到错误'一个属性参数必须是一个常量表达式，......'

我知道编写自定义验证属性的选项，但我想避免这种情况，因为我基本上会编写已经存在的验证逻辑（值的来源除外）

或者，我可以在视图中显示模型的最小长度吗？

我怎么能只有一个地方进行更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:26:31.507

我不确定是否有更直接的方法（因为它必须是一个常量值），但是[您可以编写自己的 CustomValidationAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute%28v=vs.95%29.aspx)并检查其中的 web.config 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T15:10:12.210

我不确定这是否是一个好方法，但这是我所做的......

将其放入 MembershipHelper.cs：

```
namespace System.Web.Security
{
    public static class MembershipHelper
    {
        public const int MinRequiredPasswordLength = 6;// Membership.MinRequiredPasswordLength is defined in Web.Config
        public const int MaxRequiredPasswordLength = 30;
    }
} 
```

然后在视图中你可以这样做：

```
<p>
    Passwords must be at least @MembershipHelper.MinRequiredPasswordLength characters long. 
</p> 
```

在模型中，您可以这样做：

```
[Required(ErrorMessage = "Field is required.")]
[StringLength(MembershipHelper.MaxRequiredPasswordLength, ErrorMessage = "Must be between {2} and {1} characters long.", MinimumLength = MembershipHelper.MinRequiredPasswordLength )]
[DataType(DataType.Password)]
[Display(Name = "Password")]
public string Password { get; set; } 
```

我仍然需要在两个地方进行更改，但这比 3 个或更多要好。

如果有人看到这方面的任何问题，请告诉我。

# php - 如何在 php 中的字符串中回显变量？

> ID：11551685
> 
> 赞同：-1
> 
> 时间：2012-07-18T23:09:07.467
> 
> 标签：php, html

我正在尝试使用`$row['file_name']`复选框输入字段末尾的内容，并将其用于`value=""`.

```
 <?php 

        echo "<form action=\"process.php\" method=\"post\">";

          while($row = mysql_fetch_array($result))

          {
          echo "<input type=\"checkbox\" name=\"opt[]\"  value=\" \" /> " . $row['file_name'];

          echo "<br />";
          }

        echo "<br><br>";

        echo "<input type=\"submit\" name=\"formSubmit\" value=\"Send\" />";

        echo "</form>"; 

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:12:14.013

```
$variable = "world";
echo "Hello, $variable";

//or
echo "Hello, {$variable}"

//or
echo 'Hello, '.$variable.'!';  // .(dot) concatenates strings 
```

使用双引号（“）您可以直接在字符串中使用变量（例如1），使用单引号（'）变量内容不会：

```
 echo 'Hello, $variable'; //OUTPUT: Hello, $variable
  echo 'Hello, '.$variable; //OUTPU: Hello, world 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T23:11:51.803

您可以像这样在字符串中回显变量

```
echo "<input type=\"checkbox\" name=\"opt[]\"  value=\"$row[file_name]\" /> $row[file_name]"; 
```

为了做到这一点（在字符串中嵌入任何 php 变量），定义字符串的引号必须是双引号（正如您所拥有的那样）。

另请注意，在将数组元素嵌入字符串时，必须删除定义数组中字符串索引的引号，或将数组元素括在花括号中，如下所示：

```
echo "{$row['file_name']}"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T23:11:58.350

你可以做

```
 echo "<input type=\"checkbox\" name=\"opt[]\"  value=\"{$row['file_name']}\" /> " . $row['file_name']; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T23:36:23.010

如果您让 html 自己打印并使用 PHP 进行模板，您的代码看起来会更干净

```
<form action="process.php" method="post">

  <?php while($row = mysql_fetch_array($result)): ?>
    <input type="checkbox" name="opt[]"  value="<?php echo $row['file_name'] ?>" />
    <br />
  <?php endwhile; ?>

  <br /><br />
  <input type="submit" name="formSubmit" value="Send" />
</form> 
```

# asp.net-mvc - AppendHeader 不添加到 HttpResponseBase.Headers 集合

> ID：11551686
> 
> 赞同：1
> 
> 时间：2012-07-18T23:09:09.083
> 
> 标签：asp.net-mvc, unit-testing, mocking, moq, httpresponse

我一直在为 ASP.NET MVC 中的自定义 ActionFilter 编写单元测试。

一切正常，但我的单元测试中有一个奇怪的行为。[`AppendHeader`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.appendheader.aspx)似乎没有修改`HttpResponseBase.Headers`集合。当我调试以下代码时，我的集合中只有两个项目：`"A"`和`"C"`.

```
var responseStub = new Moq.Mock<HttpResponseBase>();
responseStub.Setup(r => r.Headers)
    .Returns(new WebHeaderCollection { { "A", "A" } });

var response = responseStub.Object;

response.AppendHeader("B", "B");
response.Headers.Add(new NameValueCollection { { "C", "C" } }); 
```

有人可以对此有所了解并解释为什么会这样吗？

如果我在我的 ActionFilter 中运行网站`AppendHeader`，我会得到标题。所以它通常有效，但正如我所说，我在我的`HttpResponseBase.Headers`收藏中缺少它进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:32:47.847

查看`HttpResponseBase.AppendHeader`您尝试调用的方法的实现，实际上该方法什么都不做并不奇怪。

```
public virtual void AppendHeader(string name, string value)
{
    throw new NotImplementedException();
} 
```

如果您希望此方法执行某些操作，则必须为此定义期望：

```
// arrange
var responseStub = new Moq.Mock<HttpResponseBase>();
responseStub.Setup(r => r.Headers)
    .Returns(new WebHeaderCollection { { "A", "A" } });
var response = responseStub.Object;
responseStub
    .Setup(r => r.AppendHeader(It.IsAny<string>(), It.IsAny<string>()))
    .Callback<string, string>((name, value) => response.Headers.Add(new NameValueCollection { { name, value } }));

// act
response.AppendHeader("B", "B");

// assert
Assert.AreEqual(2, response.Headers.Count); 
```

# ruby-on-rails - 将 AJAX 添加到 Rails 3 应用程序不会导致显示错误消息

> ID：11551689
> 
> 赞同：1
> 
> 时间：2012-07-18T23:09:23.070
> 
> 标签：ruby-on-rails, ajax

在我的 Rails 应用程序中添加`:remote => true`到我的编辑表单时，提交工作正常，但现在我的程序不显示错误消息。我尝试了多种解决方案，但都没有奏效。谁能指出我解决这个问题的正确方向？如果条目保存成功，则会在 div 中添加一条通知消息，这是我在 edit.js.erb 中编写的。我还尝试将“错误消息”添加到错误消息 div 中，但`@entry.errors.any?`在添加`:remote => true`.

这是我要更新的表单中的编辑 div。

```
<div id="errors">
  <% if @entry.errors.any? %>
      <h2><%= pluralize(@entry.errors.count, "error") %> prohibited this entry from being saved:</h2>

      <ul>
      <% @entry.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
  <% end %>
</div> 
```

我也有它的部分内容，我的 edit.js.erb 尝试用新呈现的部分更新 div，但现在 @entry.errors.any？不再在这里返回 true .. 这也是我的控制器...

```
# GET /entries/1/edit
def edit
  @entry = Entry.find(params[:id])

  respond_to do |format|
    format.html
    format.js
  end
end

def update
  @entry = Entry.find(params[:id])

  respond_to do |format|
    if @entry.update_attributes(params[:entry])
      format.html { redirect_to edit_entry_path(@entry), notice: 'Entry was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @entry.errors, status: :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:27:02.767

您可以将控制器更改为此：

```
def update
  @entry = Entry.find(params[:id])

  respond_to do |format|
    if @entry.update_attributes(params[:entry])
      format.html { redirect_to edit_entry_path(@entry), notice: 'Entry was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.js
    end
  end
end 
```

创建一个 app/views/my_controllers/update.js.erb 并放置如下内容：

```
//Just normal javascript and some JS
errors = '';
<% @entry.errors.full_messages.each do |msg| %>
  errors += '<%= msg %>\n';
<% end %>
alert(errors); 
```

**编辑：添加第二种方法**

你也可以这样做：

```
$("#my_form")
 .bind("ajax:success", function(event, data, status, xhr) {
  //Do my function
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:30:37.640

您想要响应`format.js`并将错误呈现添加到 your.js.erb

响应`.json`将仅返回数据，因此不会运行其响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:55:39.833

我创建了一个部分**_errors.html.erb**

```
<% if @entry.errors.any? %>
    <h2><%= pluralize(@entry.errors.count, "error") %> prohibited this entry from being saved:</h2>
    <ul>
    <% @entry.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
<% end %> 
```

我创建了**update.js.erb**

```
$("#errorlist").html("<%= escape_javascript(render('errors')) %>"); 
```

其中 #errors 指的是我的表单中的 a ，并且错误是部分的。最后我的控制器现在是这样的。# PUT /entries/1 # PUT /entries/1.json def update @entry = Entry.find(params[:id])

```
def update
  @entry = Entry.find(params[:id])

  respond_to do |format|
    if @entry.update_attributes(params[:entry])
      format.html { redirect_to edit_entry_path(@entry), notice: 'Entry was successfully updated.' }
      format.json { head :no_content }
    else
      format.html
      format.js
    end
  end
end 
```

另外，由于我只希望在我的编辑表单上使用 ajax，而不是我的创建表单（将 :remote => true 添加到 _form.html.erb 效果两者）我还在 _form.html.erb 中更改了这一行

```
<%= form_for @entry, :remote => true, :html => {:id => "editform", :multipart => true} do |f| %> 
```

至

```
<%= form_for @entry, :remote => current_page?(:controller => 'entries', :action => 'new') ? false : true, :html => {:id => "editform", :multipart => true} do |f| %> 
```

感谢您的帮助，那些帮助我实现解决方案的人。

# balanced-payments - 是否可以使用 Balanced Payments API 删除测试市场？

> ID：11551690
> 
> 赞同：2
> 
> 时间：2012-07-18T23:09:42.063
> 
> 标签：balanced-payments

我正在使用平衡支付[ruby​​ api](https://www.balancedpayments.com/docs/ruby)，并且不小心创建了几个额外的测试市场。虽然 api 公开了一个用于创建测试市场的清晰界面，但即使没有 api，我似乎也找不到任何方法来删除它。有人知道删除市场的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:13:58.937

目前在 Balanced 上测试市场的最佳实践是简单地忘记市场。**Balanced 将在最后一次记录活动后90**天自动清除未使用的*测试*市场。

 **生产市场永远不会被删除。

如果您希望确保*不*删除测试市场，则必须至少每 89 天在市场上执行一次经过身份验证的操作。这可能很简单，例如在市场上发出 GET 请求。**

# c# - 在第二列中使用组合框创建 datagridview

> ID：11551695
> 
> 赞同：-1
> 
> 时间：2012-07-18T23:10:25.870
> 
> 标签：c#

我正在尝试在第二列中创建一个带有组合框的 datagridview。

目前我的数据网格绑定到一个数据表。现场患者是我需要在组合框中拥有的。

下面的代码添加了该字段，但它位于网格的末尾并且是重复的……即有 2 个患者字段。

```
DataTable dt = new DataTable();
DataColumn dtColumn;

dtColumn = new DataColumn("ClmDate", typeof(String));
dt.Columns.Add(dtColumn);

dtColumn = new DataColumn("Patient", typeof(Decimal));
dt.Columns.Add(dtColumn);

dtColumn = new DataColumn("ClmAmt", typeof(Decimal));
dt.Columns.Add(dtColumn);

cService cservice = new cService();

var trans = cservice.ClmView(txtNo.Text.Trim());

if (trans != null)
{
    // Add items to datatable
    foreach (var t in trans)
    {
        //save to datatable
        DataRow row = dt.NewRow();
        row["clmdate"] = t.clmdate.ToShortDateString();
        row["patient"] = t.patient;
        row["clmAmt"] = t.clmamt;

        dt.Rows.Add(row);
    } 
}

Grid_Refresh();

private void Grid_Refresh()
{
    grdTrans.DataSource = dt;    

    DataGridViewComboBoxColumn cb = new DataGridViewComboBoxColumn();
    cb.HeaderText = "Patient";
    cb.Name = "Patient";
    cb.Items.Add("Foo");
    cb.Items.Add("Bar");
    grdTrans.Columns.Add(cb);        
} 
```

下面将是我试图复制的网格的图像......

[http://s13.postimage.org/aale668uf/grd.png](http://s13.postimage.org/aale668uf/grd.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:18:55.147

您将两次添加患者列。一次到数据：

```
dtColumn = new DataColumn("Patient", typeof(Decimal));
dt.Columns.Add(dtColumn); 
```

并且一旦明确地在`Grid_Refresh()`：

```
DataGridViewComboBoxColumn cb = new DataGridViewComboBoxColumn();
cb.HeaderText = "Patient";
cb.Name = "Patient";
cb.Items.Add("Foo");
cb.Items.Add("Bar");
grdTrans.Columns.Add(cb); 
```

我认为您需要设置并手动创建所有列。[`DataGridView.AutoGenerateColumns`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.autogeneratecolumns.aspx)`= false`

# dom - .on() 未检测到 dom 更改

> ID：11551696
> 
> 赞同：2
> 
> 时间：2012-07-18T23:10:29.523
> 
> 标签：dom, jquery

让我的`.on()`工作遇到一些问题。我的网站在[这里](http://www.eliteweb-creation.co.uk/dev/)。

如果您查看 www.eliteweb-creation.co.uk/dev/js/nav.js，我正在设置一些 on `mouseenter`&`mouseleave`事件处理程序`$('a.left.active')`

为了将来有人查看这篇文章，我已将代码添加到 jsfiddle：

[http://jsfiddle.net/TcbAP/](http://jsfiddle.net/TcbAP/)

锚点`.active`在单击时会动态添加到它们，因此使用`.on()`而不是`.click()`让 jQuery 检测到 dom 更改并添加事件处理程序。

在添加课程之前，我`.on("click")`的锚`.active`工作正常，问题似乎是`.on()`没有检测到课程更改。

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:17:42.083

使用`.on()`不会神奇地让您的代码检测到更改。

您必须从不变的祖先元素委派 click 事件处理程序：

```
$('.nav').on('click', 'a.active', function(e) {
    // Put your code here...        
}); 
```

您可以在[jQuery 文档中阅读更多相关信息：**直接和委托事件**](http://api.jquery.com/on/#direct-and-delegated-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:22:33.127

`.on`只会附加到*在运行时符合标准的*元素，这就是为什么他们建议将此类定义放在`document.ready`.

来自 jQuery API：

*事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上*

`.on`除非您再次运行定义，否则它不会重新评估您新修改的元素。如果需要，您可以更广泛地定义并检查其他类：

```
$('a.left').on("click", function(event){
  if($(this).hasClass('active')) {
    // Do fancy stuff here
  }
}); 
```

编辑：代码清理

# java - AmazonDynamoDBClient 的线程安全性/可重用性/寿命？

> ID：11551699
> 
> 赞同：4
> 
> 时间：2012-07-18T23:10:40.750
> 
> 标签：java, amazon-dynamodb

我很好奇`AmazonDynamoDBClient`Java SDK 中主要 DynamoDB 入口点的线程安全性和可重用性是什么？我在 JavaDocs 中注意到以下语句`DynamoDBMapper`：

> “这个类是线程安全的，可以在线程之间共享。它也非常轻量级，所以不需要。”

既然`DynamoDBMapper`引用了`AmazonDynamoDBClient`，这是否意味着`AmazonDynamoDBClient`相似？

我还以为我在某个地方看到了*鼓励*保留和分享的内容，`AWSCredentials`因为它可以更好地管理节流和会话？由于凭据是 的主要依赖项`AmazonDynamoDBClient`，这也可能支持它具有更长的使用寿命吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T20:15:41.223

它是完全线程安全的。我实际上并没有查看 AWS 代码，但我们为我们频繁使用的 Web 应用程序实例化了一个客户端，并且从未遇到任何问题。

如果映射器是线程安全的，则客户端*必须*是线程安全的

# sparql - 为什么 Jean 和 Sesame/OpenRDF 的 SPARQL 处理器对除法运算的解释会发生变化？

> ID：11551700
> 
> 赞同：4
> 
> 时间：2012-07-18T23:10:59.113
> 
> 标签：sparql, jena, sesame

以下 SPARQL 查询在两个流行的 SDK（[Jena](http://jena.apache.org/)和[Sesame / OpenRDF](http://www.openrdf.org/)）的 SPARQL 引擎上运行时会产生不同的结果：

```
PREFIX xsd:<http://www.w3.org/2001/XMLSchema#>

SELECT  ?v1 ?v2 ?v3 ?v4 ?v5 ?v6
WHERE
{
    BIND (            1    / 3             as ?v1)
    BIND (  xsd:float(1    / 3)            as ?v2)
    BIND (  xsd:float(1)   / 3             as ?v3)
    BIND ( (          1.0  / 3)            as ?v4)
    BIND (  xsd:float(1.0  / 3)            as ?v5)
    BIND (  xsd:float(1.0) / 3             as ?v6)
} 
```

Jena 最新版本的结果对我来说很有意义（为便于阅读而格式化）：

```
v1: 0.333333333333333333333333
v2: "0.333333333333333333333333"^^xsd:float
v3: "0.33333334"^^xsd:float
v4: 0.333333333333333333333333
v5: "0.333333333333333333333333"^^xsd:float
v6: "0.33333334"^^xsd:float 
```

另一方面，最新版本的 Sesame/OpenRDF 返回（为便于阅读而格式化）：

```
v1: "0"^^<http://www.w3.org/2001/XMLSchema#decimal>
v2: "0.0"^^<http://www.w3.org/2001/XMLSchema#float>
v3: "0.33333334"^^<http://www.w3.org/2001/XMLSchema#float>
v4: "0.3"^^<http://www.w3.org/2001/XMLSchema#decimal>
v5: "0.3"^^<http://www.w3.org/2001/XMLSchema#float>
v6: "0.33333334"^^<http://www.w3.org/2001/XMLSchema#float> 
```

强调一点：Jena 永远不会像 Sesame/OpenRDF 那样返回 0 或 0.0 或 0.3。任何人都可以解释为什么数字结果会有如此大的差异吗？以及如何对相同的 SPARQL 查询获得相同的结果？或者，哪一个是正确的（在正确实施 SPARQL 标准的意义上，无论数学正确性如何）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:34:34.957

差异可以通过 Sesame 的除法运算符实现中采用的不同舍入/缩放策略来解释。

第一个运算符：

```
1 / 3 as ?v 
```

将两个整数值相除并将结果绑定到 ?v，这将是一个十进制类型的值。

由于 1/3 是具有非终止小数扩展的分数，我们需要对结果进行四舍五入。但是，由于两个输入变量的小数位数（即小数位数）为零，因此 Sesame 的 MathUtil 也将结果的小数位数设置为零，因此除法的结果（0.3333...）被缩放为零位数并四舍五入，结果为 0。

您可以通过在输入值中显式添加比例来在 Sesame 中解决此问题。例如：

```
SELECT  ?v1 
WHERE
{
    BIND ( 1.0000 / 3 as ?v1)
} 
```

将导致：

```
?v1:  "0.3333"^^<http://www.w3.org/2001/XMLSchema#decimal> 
```

请注意，我们实际上在这里所做的是将您的输入值之一从整数更改为小数。这有点类似于在 Java 中执行 1/3 将导致 0，但您可以通过强制转换为 double 来解决这个问题。

据我所知，从 XPath 规范（定义 SPARQL 重用的除法运算符）中可以看出，Jena 和 Sesame 的行为都符合规范，因为数字运算的缩放数字的选择是实现定义的。

当然，这并不是说如果 Sesame 在做除法的时候对这样的重复分数真的使用了更高的精度就不会更实用。[在http://www.openrdf.org/issues/browse/SES-1063](http://www.openrdf.org/issues/browse/SES-1063)上记录为改进请求，由于这是一件微不足道的事情，因此将在下一个版本中支持。同时，我希望以上内容可以为您提供合适的解决方法。

# javascript - 在 Wikiitude SDK for iOS 中将 base64 编码图像插入 AR.ImageResource

> ID：11551704
> 
> 赞同：0
> 
> 时间：2012-07-18T23:11:16.507
> 
> 标签：javascript, html, ios, wikitude

我希望在 Wikiitude SDK iOS 中创建新的 AR.ImageResource 时插入 base64 编码的图像。

我可以使用 javascript 在 HTML img src 属性中直接执行此操作，如下所示

```
 document.getElementById("imageFooterId").src = "data:image/png;base64," + jsonObject[id].picData; 
```

但是要在Wikitude的aug视图中渲染图像，需要使用AR.ImageResource，并且插入base64编码图像有点困难。

我正在使用以下函数调用，但没有运气

```
 tmpImage = new AR.ImageResource("data:image/png;base64," + jsonObject[i].picData, {onError: errorLoadingImage}); 
```

他们对执行此操作有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:04:49.830

目前不支持此功能。我可以想象使用一个从 base64 图像生成 URL 的 Web 服务，您可以将其用于 AR.ImageResource。但是您仍然必须通过不是最佳的互联网发送/加载它。

也看看：http: [//forum.wikitude.com/home/-/message_boards/message/28074](http://forum.wikitude.com/home/-/message_boards/message/28074)

免责声明：我为公司工作。

# directx - C# XAML Metro 应用程序使用 WinRT 组件在异步方法上调用 task.wait() 或 task.get() 抛出：未处理的异常 0xc0000409

> ID：11551712
> 
> 赞同：2
> 
> 时间：2012-07-18T23:11:52.767
> 
> 标签：directx, microsoft-metro, windows-runtime, winrt-xaml, c++-cx

我最近一直在使用 Windows 8 进行大量试验，使用用 C++/CX 编写的 WinRT 组件编写 C# XAML Metro 风格的应用程序，以获得更好的性能并使用 C# 中不可用的功能，特别是 DirectX。

在我的 WinRT 组件中从我的应用程序包中加载资源时，我的应用程序抛出了以下内容：

TestResources.exe 中 0x0fd58ae3 (MSVCR110D.dll) 处未处理的异常：0xC0000409：0xc0000409。

我试图对新的 StorageFile API 进行异步调用（Windows::Storage::StorageFile::GetFileFromApplicationUriAsync 链接到其他调用以读取文件内容）并使用 concurrency::task.get() 同步生成的任务链。

它似乎没有工作。如果我没有调用 concurrency::task.get() 或 concurrency::task.wait()，则问题不会发生，但由于我的 DirectX 代码是如何编写的，我需要同步结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T23:11:52.767

原因是您正在从 UI 线程调用 concurrency::task.wait() 或 concurrency::task.get() ！该框架会引发异常以防止您冻结应用程序。请参阅：[在 C++ 中为 Metro 风格](http://msdn.microsoft.com/en-us/library/windows/apps/hh750082%28v=vs.110%29.aspx)的应用程序创建异步操作，底部有三个警告。最后一个警告说：

> 不要在 STA 上运行的延续主体中调用 concurrency::task::wait。否则，运行时会抛出 concurrency::invalid_operation，因为此方法会阻塞当前线程并可能导致应用程序无响应。

我编写了一个测试应用程序并验证我可以通过从单独的线程调用我的 WinRT 组件来使一切正常！

详情如下：

我的测试应用程序是 C# XAML Metro 应用程序，它调用 WinRT 组件以从文件中加载字符串。它有一个按钮和一个文本块。

资源加载器如下所示：

```
class WstringCaselessLess : std::binary_function< std::wstring, std::wstring, bool >
{
public:
    bool operator()( const std::wstring& s1, const std::wstring& s2 )
    {
        return _wcsicmp( s1.c_str(), s2.c_str() ) < 0;
    }
};

public ref class ComponentResourceLoader sealed
{
public:
    Platform::String^ GetStringResource( Platform::String^ uri )
    {
        auto key = std::wstring( uri->Data(), uri->Length() );
        auto findit = m_resourceMap.find( key );
        if ( findit != std::end( m_resourceMap ) )
            return ref new Platform::String( findit->second.c_str() );
        auto uriObj = ref new Windows::Foundation::Uri( uri );
        auto fileOp = Windows::Storage::StorageFile::GetFileFromApplicationUriAsync( uriObj );
        return concurrency::create_task( fileOp )
                .then( [this, &key]( Windows::Storage::StorageFile^ file )
                       -> Windows::Foundation::IAsyncOperation< Windows::Storage::Streams::IBuffer^ >^
                    {
                        return Windows::Storage::FileIO::ReadBufferAsync( file );
                    } )
                .then( [this, &key]( Windows::Storage::Streams::IBuffer^ buffer )
                       -> Platform::String^
                    {
                        auto reader = Windows::Storage::Streams::DataReader::FromBuffer( buffer );
                        auto str = reader->ReadString( buffer->Length );
                        this->m_resourceMap[key] = std::wstring( str->Data(), str->Length() );
                        return str;
                    } ).get();
    }
private:
    std::map< std::wstring, std::wstring, WstringCaselessLess > m_resourceMap;
}; 
```

损坏的按钮单击处理程序如下所示：

```
private void WinRT_Click_1(object sender, RoutedEventArgs e)
{
    TextContent.Text = m_loader.GetStringResource(@"ms-appx:///Assets/Hello.xml");
} 
```

如果我更改按钮处理程序以将字符串加载到单独的线程中，它会起作用：

```
private async void WinRT_Click_1(object sender, RoutedEventArgs e)
{
    var text = await Task.Run<string>(() => RunWinrtLoader());
    TextContent.Text = text;
}
private string RunWinrtLoader()
{
    return m_loader.GetStringResource(@"ms-appx:///Assets/Hello.xml");
} 
```

希望这对某人有帮助！这确实让我很生气一段时间，因为没有迹象表明从错误到真正的问题。

# java - 如何包装来自不同包的相似类

> ID：11551719
> 
> 赞同：0
> 
> 时间：2012-07-18T23:12:37.367
> 
> 标签：java, android

我为 android 开发了一个应用程序，它使用标准*android.database.sqlite.SQLiteDatabase*以及*net.sqlcipher.database.SQLiteDatabase*。

这些类非常相似，但我必须复制一些代码来处理这些不同的类型，即使我需要调用相同的方法。

任何人都可以建议什么是围绕这些类创建一些包装器以具有与两种类型交互的单一接口的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:25:55.703

我将创建一个包含所有共享方法以及您认为必要的任何其他方法的接口。然后编写一个工厂类，该类将创建一个`AbsSQLiteDatabase`from android 或`AbsCipherSQL`（将是私有或包类）并以接口的形式返回它。

# java - 运行项目时未出现 index.jsp 中的修改

> ID：11551722
> 
> 赞同：0
> 
> 时间：2012-07-18T23:12:56.197
> 
> 标签：java, mysql, eclipse, jsp, servlets

这是我的`index.jsp`：

```
<!DOCTYPE html>
<html>
<head><title>Bank application</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>
<table class="title">
  <tr><th>Bank application</th></tr>
</table>

<br/>
<fieldset>
  <legend>Bank Account Balance</legend>
  <form action="show-balance">
    Customer ID (id001, id002, id003):
    <input type="text" name="customerId"/><br/>
    <input type="submit" value="Show Balance"/>
  </form>
</fieldset>

<br/>
<fieldset>
  <legend>Random Number</legend>
  <form action="random-number"> 
    Range:  <input type="text" name="range"><br/>
    <input type="submit" value="Show Number">
  </form>
</fieldset>

<br/>
<fieldset>
  <legend>Registration</legend>
  <form action="register"> 
    First name: <input type="text" name="firstName"><br>
    Last name: <input type="text" name="lastName"><br>
    <input type="submit" value="Register">
  </form>
</fieldset>

<br/>
<fieldset>
  <legend>Prime Number</legend>
  <form action="find-prime"> 
    Length: <input type="text" name="primeLength"><br>
    <input type="submit" value="Calculate Prime">
  </form>
</fieldset>

<br/><br/><br/><br/><br/><br/>
</body></html> 
```

它看起来像这样：

![123](../Images/7dc56b075a5e357027ea4dd6077c6cb9.png)

但是，当我尝试对 进行一些修改时`index.jsp`，例如让我们采用最后一个`legend`：

```
<br/>
<fieldset>
  <legend>Prime QQQQQQQQQQQQQQQQQQQQQQQ Number</legend>
  <form action="find-prime QQQQQQQQQQQQQQQQQQQQQQQ "> 
    Length: <input type="text" name="primeLength"><br>
    <input type="suQQQQQQQQQQQQQQQQQQQQQQQ bmit" value="Calculate PrimQQQQQQQQQQQQQQQQQQQQQQQ e">
  </form>
</fieldset> 
```

我仍然得到相同的页面。

它出什么问题了 ？知道我在做什么错吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:16:33.140

*   您是否尝试过重新启动应用服务器？

*   您的应用服务器日志中是否有任何消息？

*   那么预编译的 JSP 呢？你能看到对应的 .java 文件吗？如果是这样，它也有你的变化吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:22:34.623

这将起作用：

```
1\. Stop the web/app server.
2\. Delete the app/war from the webapps dir
3\. Start web/app server.
4\. Re-deploy your app/war file. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T23:29:53.003

当您部署 Web 应用程序时，您的 JSP 将被复制到一个新位置。

然后它们要么被预编译，要么在有人第一次访问页面时被编译（基于应用服务器配置）。

如果您修改项目中的 JSP 页面，则没有理由期望相应的 JSP 反映您的更改，除非您重新部署。

有一个例外：

*   您可以在部署时将其复制到的位置编辑 JSP `in-place`。

这通常不是一个好主意，因为您不会对您的项目进行更改。

# ruby - 不兼容的字符编码 ruby

> ID：11551724
> 
> 赞同：1
> 
> 时间：2012-07-18T23:13:27.777
> 
> 标签：ruby, encoding

我的 Ruby 1.9 出现以下错误

我尝试使用（正如一些资源所建议的那样）

```
string.force_encoding('utf-8') 
```

但这没有帮助！

任何想法如何解决这个问题？有没有办法在保存到数据库之前消除这些字符？或者有没有办法让他们展示？

例如，当我要打印时：

```
Opowieść o kulcie przemocy 
```

我得到：

```
Opowie?? o kulcie przemocy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:37:57.160

我使用第一行代码使它工作：

```
# encoding: UTF-8

string = "Opowieść o kulcie przemocy"
p string.force_encoding('utf-8') 
```

当我写入数据库时​​，我使用 encode 而不是 force_encoding ，例如：

```
conn.exec(sql.encode("UTF-8")) 
```

其中 sql 是包含需要编码的文本的语句

# android - 读取和显示 WebP 图像

> ID：11551725
> 
> 赞同：0
> 
> 时间：2012-07-18T23:13:27.850
> 
> 标签：android, jar, bitmap, webp

我知道这个问题已经在某些地方（比如[这里](https://stackoverflow.com/questions/7032695/webp-for-android)）提到过，但是有没有一种简单的方法来读取 WebP 图像，比如使用 jar 文件？

即使在旧设备上最小化应用程序的图像大小也会很棒。

是否可以像使用其他格式一样将 WebP inputStream 读取到普通位图实例，即使在较旧的 android 版本（比 ICS 旧）上也是如此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T07:24:16.963

您提供的示例非常好，总结一下，您需要遵循以下步骤：

*   [在此处](https://code.google.com/p/webp/downloads/detail?name=libwebp-0.3.0.tar.gz)下载 webp 库，当前版本
*   在您的 Android “jni” 文件夹中创建，将 libwep 内容复制到其中
*   在 jni/Android.mk 添加：

    痛饮/libwebp_java_wrap.c \

    to`LOCAL_SRC_FILES := \` 和 remove `include $(BUILD_STATIC_LIBRARY)`, put 代替`include $(BUILD_SHARED_LIBRARY)`

*   转到您的项目目录并运行

    ./path-to-android-ndk/ndk-build

*   如果您不知道如何使用 ndk，请尝试[这里](https://stackoverflow.com/questions/4359720/how-to-use-ndk-in-android-project)

*   如果编译成功，您将获得 libwebp.jar，将其包含在您的项目构建路径中

*   在您的活动中，您首先提出：

    静态 { System.loadLibrary("webp"); }

*   然后您可以通过 InputStream 读取 .webp 文件（即从 assets 文件夹中）：

    InputStream is = getAssets().open("image.webp");

*   [从这里](http://commons.apache.org/proper/commons-io/download_io.cgi)下载 apache 库，将其包含在您的项目构建路径中

*   然后您可以将 InputStream 读取到字节数组：

    byte[] 编码 = IOUtils.toByteArray(is);

*   通过 libwebp 解码文件：

    整数 [] 宽度 = 新整数 [] { 0 };

    整数 [] 高度 = 新整数 [] { 0 };

    byte[] decoded = libwebp.WebPDecodeARGB(encoded, encoded.length, width, height);

*   转换为位图：

    int[] 像素 = 新 int[decoded.length / 4];

    ByteBuffer.wrap(decoded).asIntBuffer().get(pixels);

    位图bitamp = Bitmap.createBitmap（像素，宽度[0]，高度[0]，Bitmap.Config.ARGB_8888）；

*   最后几行在[这里形成](https://stackoverflow.com/questions/7032695/webp-for-android)

*   随心所欲地处理您的位图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-07T03:56:55.760

如果您的 webp 图像存储在 assets 文件夹中，则使用此代码读取并在 imageView 中显示

```
try {
            InputStream inputStream = context.getAssets().open("yourfilename.webp");
            BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);
            Bitmap bmp = BitmapFactory.decodeStream(bufferedInputStream);
            imageView.setImageBitmap(bmp);

        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# jquery - 如何重新打开以前的听众？

> ID：11551731
> 
> 赞同：0
> 
> 时间：2012-07-18T23:14:29.890
> 
> 标签：jquery, events, click, listener

抱歉，如果这已经发布了，但我已经看到了很多，并试图使用它们来获得解决方案，但它们都没有为我工作。

以下是我认为正确的方式（没有我正在做的其他编码）。触发时`F1`，应禁用单击。当我`F2`被触发时，它应该被启用：

# 1.

```
$('.head2, .head3').click(function(event) {
    var object = $(this).siblings('.head4');
    if (something) F1();
if (somethingelse)) F2();
    function F1() {
        object.siblings('.head3').children('.primary').off('click');
    }
    function F2() {
        object.siblings('.head3').children('.primary').on('click');
    }
}); 
```

ISSUE: 点击事件监听器没有关闭。

# 2.

```
$('.head2 li, .head3 li').click(function(event) {
    var object = $(this).parent().siblings('.head4');
    if (something) F1();
if (somethingelse)) F2();
    function F1() {
        object.siblings('.head3').children('.primary').off('click');
    }
    function F2() {
        object.siblings('.head3').children('.primary').on('click');
    }
}); 
```

ISSUE：`.primary`未重新分配单击事件侦听器

# 3.

```
func = $('.head2 li, .head3 li').click(function(event) {
    var object = $(this).parent().siblings('.head4');
    if (something) F1();
if (somethingelse)) F2();
    function F1() {
        object.siblings('.head3').children('.primary').off('click');
    }
    function F2() {
        object.siblings('.head3').children('.primary').on('click', func);
    }
}); 
```

问题：`ERROR: Uncaught TypeError: Object [object Object] has no method 'apply'`

为了更好地说明我在做什么，我试图关闭一组`li`附加了事件处理程序的 s 而不关闭其他的，仅当它被切换时。

例子：

```
<ul class="head">
    <li class="sub1"></div>
    <li class="sub2"></div>
    <li class="sub3"></div>
</div> 
```

当您单击任何 时`li`，会发生一些事情，然后`.sub1`删除其单击事件处理程序。然后，当您`li`再次单击任何一个 EXCEPT`sub1`时，操作将反转并`sub1`再次变为可单击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:51:33.683

事件委托

```
$('body').on('click','li',function(){
//do the logic for all li elements
});

$('body').on('click','li.active',function(){
//do the logic for active buttons here
}); 
```

现在切换 li 元素上的活动类以启用/禁用自定义部分。

使用单个事件侦听器，您可以执行类似的操作

```
$('body').on('click','li',function(){
     //do common stuff
    if($(this).hasClass('active')){
      //do stuff
      }
    else{
      //do other stuff
      }
    }); 
```

对于这两种情况

$(elem).toggleClass('active');

将切换自定义部件的运行

你的情况：

```
$('.head2, .head3').click(function(event) {
    var object = $(this).siblings('.head4');
    if (something) object.siblings('.head3').children('.primary').addClass('active');
    if (somethingelse)object.siblings('.head3').children('.primary').removeClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:19:16.610

您正在定义`F1()`并`F2()`在所有三个处理程序中，但您没有调用它们，因此它们永远不会被执行。如果您希望它们运行，则需要调用它们。 *[编辑-OP 已经解决了第一个问题-第二个问题仍然存在]。*

我也看不到您实际上要完成什么，因为在前两种情况下，该`F1()`函数删除了单击处理程序，但该`F2()`函数没有安装新的工作处理程序，因为它没有事件处理程序回调。回调函数不是可选的`.on()`。

* * *

我认为使用委托事件处理的想法可能是这里最简单的。

为 .head3 对象安装事件处理程序时，不要将它们直接安装在对象上。相反，将它们安装在父对象上。然后，您可以从目标对象中添加或删除一个类，以启用或禁用事件处理程序：

```
// the click handlers for .head3 objects
// these will only fire if the .head3 object does not have the disabled class on it
$(document.body).on('click', '.head3:not(.disabled) > .primary', function() {
    // your .head3 click handler code goes here
});

// then, turn an event handler on or off, you just add or remove the disabled class
// from it
$('.head2, .head3').click(function(event) {
    var object = $(this).siblings('.head4');
    function F1() {
        object.siblings('.head3').children('.primary').addClass("disabled");
    }
    function F2() {
        object.siblings('.head3').children('.primary').removeClass("disabled");
    }
    if (something) F1();
    if (somethingelse) F2();
}); 
```

现在，您还没有显示任何 HTML，也没有完全描述您真正想要做的事情，但这说明了总体思路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:43:08.630

感谢 jfriend00 和 sabithpocker 的持续帮助。

我把变量`func`放在错误的位置。我把它等同于函数，而不是监听器。

```
$('.head2 li, .head3 li').click(func = function(event) {
    var object = $(this).parent().siblings('.head4');
    if (something) F1();
if (somethingelse)) F2();
    function F1() {
        object.siblings('.head3').children('.primary').off('click');
    }
    function F2() {
        object.siblings('.head3').children('.primary').on('click', func);
    }
}); 
```

# zend-framework - zf2方式设置导航栏

> ID：11551736
> 
> 赞同：2
> 
> 时间：2012-07-18T23:14:49.410
> 
> 标签：zend-framework, configuration, navigation, zend-framework2, initialization

我正在努力将 ZF1 在引导程序中初始化事物的方式与 ZF2 从配置文件中注入事物的方式（看似）联系起来。

也就是说，在 ZF1 中，我的 boostrap 中有这样的东西：

```
protected function _initNavigation()
{
    $this->bootstrap('layout');
    $this->bootstrap('view');

    $navigation = new Zend_Navigation();

    // ...code to add pages...

    $layout = $this->getResource('layout');
    $view = $layout->getView();

    $view->navigation($navigation);
} 
```

在 ZF2 中，我什至不确定要开始寻找什么来完成类似的事情。

我读过的帖子是指：

```
public function onBootstrap (Event $e)
{
} 
```

以及您可以执行以下操作的方式：

```
$application = $e->getApplication();
$services    = $application->getServiceManager(); 
```

但是，相当于：

```
$layout = $this->getResource('layout');
$view = $layout->getView();
$view->navigation($navigation); 
```

我会在模块中这样做，还是在配置文件中更好地完成并注入？如果注入，如何注入？

我已经阅读了 Rob Allen 的教程，并且一直在网上搜索超出教程级别代码的示例。我发现的东西（像其他 ZF2 模块一样）更倾向于作为工作模块（可以理解），而不是通过将细微差别传达给其他人的示例......因为我在这个主题上找不到太多，我我假设我遗漏了一些小的、基本的东西——当我看到它时——这一切都会变得有意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T22:46:36.717

```
'service_manager' => array(
    'factories' => array(
        'Navigation' => 'Zend\Navigation\Service\DefaultNavigationFactory',
    ),
), 
```

在您的模块配置中添加这一行，它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:49:29.110

**如何制作导航的简单示例**

文件路径 module/Application/config/module.config.php

```
<?php 
return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route' => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action' => 'index',
                    ),
                ),
            ),
            'default' => array(
                'type' => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route' => '/[:namespace[/:controller[/:action]]]',
                    'constraints' => array(
                        'namespace' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        //'locale' => 'da_DK',
                        'namespace' => 'Application',
                        'controller' => 'index',
                        'action' => 'index',
                    ),
                ),
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'index' => 'Application\Controller\IndexController',
            'Application\Controller\Index' => 'Application\Controller\IndexController'
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'Navigation' => 'Zend\Navigation\Service\DefaultNavigationFactory',
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

接下来是导航配置

```
<?php
/*
 * This file path config/autoload/application.global.php
 */
return array(
    // All navigation-related configuration is collected in the 'navigation' key
    'navigation' => array(
        // The DefaultNavigationFactory we configured in (1) uses 'default' as the sitemap key
        'default' => array(
            // And finally, here is where we define our page hierarchy
            'home' => array(
                'label' => 'Home',
                'route' => 'home',
            ),
            'news' => array(
                'label' => 'News',
                'controller' => 'news',
                'action' => 'news',
                'route' => 'default',
                'pages' => array(
                    'add' => array(
                        'label' => 'Add news',
                        'controller' => 'news', /* or create a seperate route insteed*/
                        'action' => 'add',
                        'route' => 'default',
                    ),
                ),
            ),
        ),
    ),
); 
```

最后回显导航布局文件或视图文件

示例模块/Application/view/layout/layout.phtml

```
<?php echo $this->navigation('Navigation')->menu(); ?> 
```

# asp.net - 在 Windows Shell 中转义传递给 perl 脚本的参数

> ID：11551740
> 
> 赞同：3
> 
> 时间：2012-07-18T23:15:07.060
> 
> 标签：asp.net, perl, escaping, windows-shell

我有一个供应商提供的 perl 脚本，它带有一系列参数。我想通过 ASP 经典中的 Windows Shell 对象来调用它。

如果我在 Web 服务器的 cmd 行中键入以下内容，它就可以正常工作：

```
path_to_perl\perl.exe path_to_pl\myfile.pl --arg1 "something" --arg2 "somethingelse" 
```

如果我在 ASP 经典中执行以下操作，它将不起作用：

```
strCMD = "path_to_perl\perl.exe path_to_pl\myfile.pl --arg1 ""something"" --arg2  ""somethingelse"""
Set objWShell = CreateObject("WScript.Shell")
Set objCmd = objWShell.Exec("cmd.exe /c " & strCMD) 
```

问题是参数有各种特殊字符，所以我需要引用它们。我已经阅读了关于我应该如何逃避它们的相互矛盾的信息——通过插入符号或反斜杠。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:44:47.080

应该直接调用 Perl，像这样：

```
system_call_test( 'c:/complete/path_to_pl/myfile.pl --arg1 "something" ... ' ) 
```

请参阅此处的讨论：**[如何从 ASP 页面调用 perl 程序，](http://www.justskins.com/forums/how-to-call-perl-126458.html)** *特别是此处的Charles K. Clarkson*
的答案。

 *它将简化问题，因为您不必同时处理
ASP、CMD 和 Perl 的转义字符。

（在那次讨论中，问题最终是 Perl 脚本的语法错误，
但它仍然显示了如何在 ASP 中对其进行编码）。*

# android - cygwin 的 NDK 构建错误

> ID：11551742
> 
> 赞同：1
> 
> 时间：2012-07-18T23:15:25.810
> 
> 标签：android, cygwin, tesseract

我正在构建一个 tesseract 项目以用作我的项目的库。尝试在关闭用户帐户控制的 Windows 7 上构建时，我在 cygwin 上遇到此错误。

```
$ /cygdrive/c/android-ndk-r8/ndk-build
SharedLibrary  : liblept.so
C:/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/libgnustl_static.a: No such file: Permission denied
collect2: ld returned 1 exit status
/cygdrive/c/android-ndk-r8/build/core/build-binary.mk:369: recipe for target `obj/local/armeabi/liblept.so' failed
make: *** [obj/local/armeabi/liblept.so] Error 1 
```

请让我知道我应该做些什么来构建这个项目。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T16:05:19.453

抱歉这是我第一次回答问题。我遇到了和你一样的问题。然后我使用带有命令的 cygwin bash 解决它：`$ chmod -R 777 /cygdrive/c/android/workspace` `C:/Android/workspace`是我的 Eclipse 工作空间。[这里](http://forum.thegamecreators.com/?m=forum_view&t=194719&b=46)有人给了我洞察力

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T20:43:26.303

很多人在 Windows 下编译 tesseract 时遇到了困难，通常建议使用 Cygwin，但通常没有必要。

您是否尝试过查看github上的[tess-two项目？](https://github.com/rmtheis/tess-two)它的 tesseract 包装了一些方便的 android 类，编译运行只是一个例子：

1.  git clone git://github.com/rmtheis/tess-two tess
2.  光盘苔丝
3.  cd 苔丝二
4.  ndk 构建
5.  android 更新项目 --path 。
6.  蚂蚁释放

我已经能够在 3 台 windows7 机器、一台 mac 和 ubuntu 上编译上述内容，没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:35:25.350

如果您在 windows 下开发，请转到该文件，并将其权限更改为完全控制。

它将在 /obj 目录中

# arraylist - 使用字符串作为过滤器从另一个 ArrayList 过滤新的 ArrayList

> ID：11551743
> 
> 赞同：0
> 
> 时间：2012-07-18T23:15:26.010
> 
> 标签：arraylist, filtering

在我的程序中，a `Die`(dice for embroidery) 是一个具有不同领域的类。其中一个是类型`String`，它被称为`haveIt`。因此，如果程序的用户在`haveIt`字段中输入“是”一词，他应该能够在列表中跟踪`Dies`他拥有的所有内容的`myInventory`列表。

我该怎么做呢？我应该`myInventory` `ArrayList<Die>`在我的类的字段和构造函数上创建`Contoller`它，还是应该在该类的特殊方法中构建它？

我已经尝试了一切，但没有任何效果。但我对此真的很陌生。

这是我的最后一次尝试，创建一个循环以从我班级中的一个特殊方法创建新的`ArrayList<Die>`（在字段上显示“是” ）：`haveIt``getMyInventory``Controller`

```
public ArrayList<Die> getMyInventory(Die anyDie) {
    for (int counting = 0; counting <  
diesBigList.Count ; counting++); 
        {
        if 
(((Die)diesBigList[counting]).doIHaveIt.contains("Yes")) 

myInventory.add(diesBigList[counting]);

            return myInventory; 
        }   
} 
```

它不编译。它告诉我结果应该是一个`Array`类型，但它被解析为`ArrayList`......（我不理解）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:24:00.317

您缺少退货声明。如果这从来都不是真的呢？

```
if (((Die)diesBigList[counting]).doIHaveIt.contains("Yes")) 
```

你永远不会达到你的退货声明

这是答案

```
public ArrayList<Die> getMyInventory(Die anyDie) {
 ArrayList<Die> myInventory = new ArrayList<Die>();
    for (int counting = 0; counting <  diesBigList.Count; counting++) {
        if (((Die)diesBigList[counting]).doIHaveIt.contains("Yes")) {
               myInventory.add(diesBigList[counting]);
        }   
    }
            return myInventory; 
 } 
```

这也可能存在问题：`diesBigList.Count`我不知道你从哪里得到那个对象或者它的方法是什么样的，但我假设在我的代码中你正确地进行了调用。

# get - PHP 变量未显示。GETid 无法正常工作

> ID：11551746
> 
> 赞同：0
> 
> 时间：2012-07-18T23:16:13.547
> 
> 标签：get

我已经设置了所有登录脚本和配置文件。我有一个数据表，其中存储了所有配置文件信息，`plus_signup`但我似乎无法让这个`GET[id]`东西工作。我错过了什么吗？这就是我所拥有的。当我使用我现在拥有的代码查看页面时，PHP 应该填写变量的空白区域。

```
session_start();

include "include/z_db.php";

if ($_GET['id']){

$id = $_GET['id'];

} else if (isset($_SESSION['id'])) {

$id = $_SESSION['id'];

}
else {
print "important data to render this page is missing";
exit();

$sql = mysql_query("SELECT * FROM plus_signup WHERE id='$userid'");

while($row = mysql_fetch_array($sql)){

$userid = $row["userid"];
$name = $row["name"];
$location = $row["location"];
$sex = $row["sex"];
$aboutme = $row["aboutme"];

}

$check_pic = "users/$id/image01.jpg";
$default_pic = "users/0/image01.jpg";
if (file_exists($check_pic)){
$user_pic = "<img src=\"$check_pic\" width=\"175px\"/>";
} else {
$user_pic = "<img src=\"$default_pic\"/>";
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T16:23:29.207

我知道这有点晚了，你可能已经想出了这个问题的答案，但我遇到了同样的问题，只是想出来了。

您的 SQL 查询正在调用尚未定义的变量。

```
session_start();

include "include/z_db.php";

if ($_GET['id']){

$id = $_GET['id'];

} else if (isset($_SESSION['id'])) {

$id = $_SESSION['id'];

}
else {
print "important data to render this page is missing";
exit();

$sql = mysql_query("SELECT * FROM plus_signup WHERE id='$userid'");

while($row = mysql_fetch_array($sql)){

$userid = $row["userid"];
$name = $row["name"];
$location = $row["location"];
$sex = $row["sex"];
$aboutme = $row["aboutme"];

}

$check_pic = "users/$id/image01.jpg";
$default_pic = "users/0/image01.jpg";
if (file_exists($check_pic)){
$user_pic = "<img src=\"$check_pic\" width=\"175px\"/>";
} else {
$user_pic = "<img src=\"$default_pic\"/>";
}} 
```

您从 url 获取“id”并将其存储为 $id。当您调用查询时，您正在让它搜索 ID = $userid，而您确实应该让它搜索 ID = $id。

**确保您的变量始终相同！**

^希望能帮助一些人在试图弄清楚他们的功能为什么不起作用时避免一两个小时的挫败感！

# magento - 如何自定义日志目录？

> ID：11551748
> 
> 赞同：1
> 
> 时间：2012-07-18T23:16:27.397
> 
> 标签：magento

我正在尝试通过`log_dir`在 Mage::app() $options 中设置来自定义我的 Magento 的日志目录，但它仍在登录到`var/log/file.log`.

注意：我无法在 SO 或一般网络上很容易地找到此信息，所以我觉得需要 SO'd。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:16:27.397

所以事实证明（至少从 1.6.2.0 开始），Magento 实际上并没有使用`Mage::getBaseDir('log')`它的 log() 方法 - 弱酱，对吧？

它使用`Mage::getBaseDir('var')`并附加`log`您传入的文件名。

如果您想自定义更多目录，则必须弄脏您的手。例如，在我们的例子中，我们希望日志目录是：

```
var/username/log/file.log 
```

所以这就是你如何破坏它。把它放到你的 config.xml 中，告诉 Magento 你的新日志类：

```
 <log>
        <core>
            <writer_model>Name_Module_Model_Zend_Log_Writer_Stream</writer_model>
        </core>
    </log> 
```

然后，创建一个模型：

```
class Name_Module_Model_Zend_Log_Writer_Stream extends Zend_Log_Writer_Stream 
```

然后，继续做你需要做的事情。就我而言，它是这样的：

```
public function __construct($streamOrUrl, $mode = NULL)
{        
    $newLogPath = $this->_workMyMagicOnLogFilePath($streamOrUrl, $mode);

    return parent::__construct($newLogPath, $mode);
} 
```

# android - 我的应用程序可以在 android 模拟器上运行，但不能在我的设备上运行

> ID：11551756
> 
> 赞同：0
> 
> 时间：2012-07-18T23:17:33.713
> 
> 标签：android, android-emulator, facebook-login

*我的应用程序在模拟器上运行没问题，但它在我的手机Samsung Galaxy Nexus S*上不起作用。

该应用程序由不同的登录名组成，包括 Facebook、Twitter、Mendeley 和我自己的 Web 应用程序。

我不知道为什么它不起作用。在 Facebook 上，在应用程序设置中，我还添加了所需的哈希码，但它确实不起作用。也许这与`http`设备对服务器的请求有关。压力很大，求帮助

这是日志

```
07-18 23:23:32.826: D/AndroidRuntime(430): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
07-18 23:23:32.826: D/AndroidRuntime(430): CheckJNI is ON
07-18 23:23:33.725: D/AndroidRuntime(430): Calling main entry com.android.commands.pm.Pm
07-18 23:23:33.965: D/dalvikvm(249): GC_EXPLICIT freed 3K, 54% free 2545K/5511K, external 1625K/2137K, paused 77ms
07-18 23:23:33.965: W/ActivityManager(67): No content provider found for: 
07-18 23:23:34.371: W/ActivityManager(67): No content provider found for: 
07-18 23:23:34.405: D/PackageParser(67): Scanning package: /data/app/vmdl-873505620.tmp
07-18 23:23:34.745: I/PackageManager(67): Removing non-system package:com.facebook.android
07-18 23:23:34.745: I/ActivityManager(67): Force stopping package com.facebook.android uid=10034
07-18 23:23:34.865: I/Process(67): Sending signal. PID: 401 SIG: 9
07-18 23:23:34.865: I/ActivityManager(67):   Force finishing activity HistoryRecord{4059c7a0 com.facebook.android/.PushpinMobileActivity}
07-18 23:23:35.072: I/WindowManager(67): WIN DEATH: Window{40718cf0 com.facebook.android/com.facebook.android.PushpinMobileActivity paused=true}
07-18 23:23:35.085: E/InputDispatcher(67): channel '407dd068 com.facebook.android/com.facebook.android.Dashboard (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
07-18 23:23:35.085: E/InputDispatcher(67): channel '407dd068 com.facebook.android/com.facebook.android.Dashboard (server)' ~ Channel is unrecoverably broken and will be disposed!
07-18 23:23:35.145: I/WindowManager(67): WIN DEATH: Window{407dd068 com.facebook.android/com.facebook.android.Dashboard paused=false}
07-18 23:23:35.456: D/PackageManager(67): Scanning package com.facebook.android
07-18 23:23:35.485: I/PackageManager(67): Package com.facebook.android codePath changed from /data/app/com.facebook.android-1.apk to /data/app/com.facebook.android-2.apk; Retaining data and using new
07-18 23:23:35.526: I/PackageManager(67): Unpacking native libraries for /data/app/com.facebook.android-2.apk
07-18 23:23:35.715: W/InputManagerService(67): Got RemoteException sending setActive(false) notification to pid 401 uid 10034
07-18 23:23:36.130: D/installd(34): DexInv: --- BEGIN '/data/app/com.facebook.android-2.apk' ---
07-18 23:23:38.285: D/dalvikvm(439): DexOpt: load 135ms, verify+opt 948ms
07-18 23:23:38.646: D/installd(34): DexInv: --- END '/data/app/com.facebook.android-2.apk' (success) ---
07-18 23:23:38.646: W/PackageManager(67): Code path for pkg : com.facebook.android changing from /data/app/com.facebook.android-1.apk to /data/app/com.facebook.android-2.apk
07-18 23:23:38.646: W/PackageManager(67): Resource path for pkg : com.facebook.android changing from /data/app/com.facebook.android-1.apk to /data/app/com.facebook.android-2.apk
07-18 23:23:38.655: D/PackageManager(67):   Activities: com.facebook.android.PushpinMobileActivity com.facebook.android.OAuthAccessTokenActivity com.facebook.android.Dashboard com.facebook.android.MendeleyAcessTokenActivity
07-18 23:23:38.845: D/dalvikvm(67): GC_FOR_MALLOC freed 1240K, 48% free 4374K/8391K, external 3520K/3903K, paused 185ms
07-18 23:23:38.855: I/ActivityManager(67): Force stopping package com.facebook.android uid=10034
07-18 23:23:39.180: I/installd(34): move /data/dalvik-cache/data@app@com.facebook.android-2.apk@classes.dex -> /data/dalvik-cache/data@app@com.facebook.android-2.apk@classes.dex
07-18 23:23:39.180: D/PackageManager(67): New package installed in /data/app/com.facebook.android-2.apk
07-18 23:23:39.576: I/ActivityManager(67): Force stopping package com.facebook.android uid=10034
07-18 23:23:39.795: D/dalvikvm(159): GC_EXPLICIT freed 194K, 50% free 2942K/5831K, external 2985K/3727K, paused 205ms
07-18 23:23:39.915: D/dalvikvm(131): GC_EXPLICIT freed 68K, 50% free 2964K/5895K, external 4803K/5279K, paused 183ms
07-18 23:23:40.285: D/dalvikvm(183): GC_EXPLICIT freed 128K, 52% free 2758K/5703K, external 1625K/2137K, paused 422ms
07-18 23:23:40.445: I/dalvikvm(159): Jit: resizing JitTable from 512 to 1024
07-18 23:23:40.545: W/RecognitionManagerService(67): no available voice recognition services found
07-18 23:23:41.105: D/dalvikvm(67): GC_EXPLICIT freed 424K, 49% free 4285K/8391K, external 3511K/3903K, paused 108ms
07-18 23:23:41.245: I/installd(34): unlink /data/dalvik-cache/data@app@com.facebook.android-1.apk@classes.dex
07-18 23:23:41.295: D/AndroidRuntime(430): Shutting down VM
07-18 23:23:41.327: I/AndroidRuntime(430): NOTE: attach of thread 'Binder Thread #3' failed
07-18 23:23:41.335: D/dalvikvm(430): GC_CONCURRENT freed 101K, 72% free 295K/1024K, external 0K/0K, paused 3ms+1ms
07-18 23:23:41.335: D/jdwp(430): Got wake-up signal, bailing out of select
07-18 23:23:41.335: D/dalvikvm(430): Debugger has detached; object registry had 1 entries
07-18 23:23:41.545: I/Launcher(131): setLoadOnResume
07-18 23:23:42.055: D/AndroidRuntime(444): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
07-18 23:23:42.055: D/AndroidRuntime(444): CheckJNI is ON
07-18 23:23:42.985: D/AndroidRuntime(444): Calling main entry com.android.commands.am.Am
07-18 23:23:43.066: I/ActivityManager(67): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.facebook.android/.PushpinMobileActivity } from pid 444
07-18 23:23:43.135: I/ActivityManager(67): Start proc com.facebook.android for activity com.facebook.android/.PushpinMobileActivity: pid=452 uid=10034 gids={3003}
07-18 23:23:43.155: D/AndroidRuntime(444): Shutting down VM
07-18 23:23:43.175: D/dalvikvm(444): GC_CONCURRENT freed 102K, 69% free 320K/1024K, external 0K/0K, paused 4ms+1ms
07-18 23:23:43.205: I/AndroidRuntime(444): NOTE: attach of thread 'Binder Thread #3' failed
07-18 23:23:43.205: D/jdwp(444): Got wake-up signal, bailing out of select
07-18 23:23:43.205: D/dalvikvm(444): Debugger has detached; object registry had 1 entries
07-18 23:23:43.585: D/dalvikvm(32): GC_EXPLICIT freed 11K, 53% free 2538K/5379K, external 1625K/2137K, paused 456ms
07-18 23:23:43.755: D/dalvikvm(32): GC_EXPLICIT freed <1K, 53% free 2538K/5379K, external 1625K/2137K, paused 168ms
07-18 23:23:44.097: D/dalvikvm(32): GC_EXPLICIT freed <1K, 53% free 2538K/5379K, external 1625K/2137K, paused 324ms
07-18 23:23:44.567: I/ActivityManager(67): Displayed com.facebook.android/.PushpinMobileActivity: +1s447ms
07-18 23:23:45.145: W/IInputConnectionWrapper(159): showStatusIcon on inactive InputConnection
07-18 23:23:49.746: D/dalvikvm(237): GC_EXPLICIT freed 18K, 55% free 2597K/5703K, external 1625K/2137K, paused 85ms
07-18 23:23:54.886: D/dalvikvm(159): GC_EXPLICIT freed 23K, 50% free 2944K/5831K, external 3005K/3727K, paused 145ms
07-18 23:23:59.906: D/dalvikvm(249): GC_EXPLICIT freed 6K, 54% free 2544K/5511K, external 1625K/2137K, paused 111ms
07-18 23:24:05.186: D/dalvikvm(311): GC_EXPLICIT freed 3K, 54% free 2537K/5511K, external 1625K/2137K, paused 50ms
07-18 23:24:20.515: D/dalvikvm(452): GC_EXTERNAL_ALLOC freed 819K, 56% free 2723K/6151K, external 1793K/2137K, paused 74ms
07-18 23:24:25.196: W/InputManagerService(67): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40658160
07-18 23:24:30.906: I/Database(452): sqlite returned: error code = 14, msg = cannot open file at source line 25467
07-18 23:24:35.826: W/InputManagerService(67): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@406c8c70
07-18 23:24:53.035: D/dalvikvm(452): GC_CONCURRENT freed 1052K, 55% free 3042K/6727K, external 2079K/2562K, paused 20ms+11ms
07-18 23:25:03.306: I/fbID(452): 518993454
07-18 23:25:03.316: I/fb_token(452): <....>
07-18 23:25:03.436: D/dalvikvm(452): GC_CONCURRENT freed 803K, 55% free 3093K/6727K, external 2079K/2562K, paused 16ms+6ms
07-18 23:25:04.426: I/dalvikvm(452): Jit: resizing JitTable from 512 to 1024
07-18 23:25:08.706: I/System.out(452): Access Token = 
07-18 23:25:08.716: I/System.out(452): Backend Response to Token Request:
07-18 23:25:08.727: I/System.out(452): Access Token = <....>
07-18 23:25:08.727: I/System.out(452): UserID = 70
07-18 23:25:08.727: I/System.out(452): Username = <....>
07-18 23:25:08.727: I/System.out(452): Expiration Timestamp = 1342697101
07-18 23:25:08.727: I/System.out(452): Facebook Token = <....>
07-18 23:25:08.727: I/System.out(452): Twitter Token = <....>
07-18 23:25:08.727: I/System.out(452): Twitter Token Secret = <....>
07-18 23:25:08.727: I/System.out(452): Mendeley Token = 
07-18 23:25:08.739: I/System.out(452): Mendeley Token Secret = 
07-18 23:25:08.817: I/ActivityManager(67): Starting: Intent { cmp=com.facebook.android/.Dashboard (has extras) } from pid 452
07-18 23:25:09.586: I/System.out(452): Got it! Lets see what we found...
07-18 23:25:09.586: I/System.out(452): 200
07-18 23:25:09.656: D/dalvikvm(452): GC_FOR_MALLOC freed 405K, 55% free 3043K/6727K, external 2129K/2562K, paused 70ms
07-18 23:25:12.706: D/dalvikvm(452): GC_FOR_MALLOC freed 58K, 53% free 3220K/6727K, external 2150K/2562K, paused 78ms
07-18 23:25:12.706: I/dalvikvm-heap(452): Grow heap (frag case) to 7.872MB for 87396-byte allocation
07-18 23:25:12.846: D/dalvikvm(452): GC_FOR_MALLOC freed <1K, 52% free 3306K/6855K, external 2150K/2562K, paused 66ms
07-18 23:25:13.026: D/dalvikvm(452): GC_FOR_MALLOC freed 0K, 52% free 3306K/6855K, external 2150K/2562K, paused 106ms
07-18 23:25:13.026: I/dalvikvm-heap(452): Grow heap (frag case) to 7.956MB for 87396-byte allocation
07-18 23:25:13.216: D/dalvikvm(452): GC_FOR_MALLOC freed 0K, 52% free 3391K/6983K, external 2150K/2562K, paused 123ms
07-18 23:25:13.596: W/ImageDownloader(452): Incorrect URL: 
07-18 23:25:13.746: D/dalvikvm(452): GC_FOR_MALLOC freed 234K, 53% free 3319K/6983K, external 2272K/2562K, paused 57ms
07-18 23:25:14.956: I/ActivityManager(67): Displayed com.facebook.android/.Dashboard: +5s947ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:09:44.867

问题来了，因为我在 Android 上使用 scribe 库为 Mendeley 和 Twitter 使用 webview。我已经在这里解决了

[android webview函数onPagefinished被调用两次](https://stackoverflow.com/questions/11601134/android-webview-function-onpagefinished-is-called-twice)

而对于 Facebook，问题是因为我没有添加正确的哈希键，Facebook 页面上给出的 Windows 方法没有给你正确的哈希键。请安装 openSSL 以生成密钥。

# c# - EF 代码优先：插入多对多

> ID：11551760
> 
> 赞同：4
> 
> 时间：2012-07-18T23:18:11.293
> 
> 标签：c#, entity-framework, ef-code-first

一个帖子可以有多个主题。一个主题可以分配给许多帖子。添加从主题列表中选择的两个主题的帖子时，两个`NULL`主题也插入到我的主题表中。见`Id=34`和`35`。我做错什么了？不应更改主题。我正在添加一个新帖子并从固定数量的主题（下拉列表）中选择主题。它在 PostTopics 表（PostID、TopicID）中被跟踪。

话题表：

> ```
> Id    TopicName   TopicDesc       
> 31    Sports  Sports  
> 32    Game    Game    
> 33    Politics    Politics    
> 34    NULL    NULL    
> 35    NULL    NULL 
> ```

主题帖子表：

```
Topic_Id    Post_Id
34  11
35  11

public class Post
{
    public int Id { get; set; }
    public int UserId { get; set; }

    public virtual ICollection<Topic> PostTopics { get; set; }

}

public class Topic
{
    public int Id { get; set; }
    public string TopicName { get; set; }

    public virtual ICollection<Request> Requests { get; set; }

}

// insert code: I think the problem is here

  using (var context = new ChatContext())
  {
             // Post
             context.Posts.Add(pobjPost);

             pobjPost.PostTopics = new List<Topic>();
             // topics
             foreach (var i in pobjTopics)
             {

             pobjPost.PostTopics.Add(i);
             }

             context.SaveChanges();
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:53:13.563

您必须首先将主题附加到上下文以将它们置于状态`Unchanged`并告诉 EF 它们已经存在于数据库中。否则 EF 将假定主题是新的并将它们插入到数据库中。之后，您可以将帖子添加到上下文中，以便可以将帖子作为新实体与多对多连接表中的关系记录一起插入数据库：

```
using (var context = new ChatContext())
{
    pobjPost.PostTopics = new List<Topic>();
    foreach (var pobjTopic in pobjTopics)
    {
        context.Topics.Attach(pobjTopic); // topic is in state Unchanged now
        pobjPost.PostTopics.Add(pobjTopic);
    }
    context.Posts.Add(pobjPost); // post in state Added, topics still Unchanged
    context.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:37:01.447

要创建关系，应首先将两个相关对象附加到上下文中。

试试这个方法：

```
using (var context = new ChatContext())
      {
                 // Post
                 context.Posts.Attach(pobjPost);

                 pobjPost.PostTopics = new List<Topic>();
                 // topics
                 foreach (var i in pobjTopics)
                 {

                 pobjPost.PostTopics.Add(i);
                 } 
```

# sql - 存储博客评论/支持 - 跟踪用户？

> ID：11551761
> 
> 赞同：2
> 
> 时间：2012-07-18T23:18:12.657
> 
> 标签：sql, asp.net-mvc-3, database-design, schema

我正在使用 ASP .net MVC3 开发博客类型的网站。我试图弄清楚我将如何处理发布的赞成/反对票（我必须知道哪些用户已经在哪里投票以防止垃圾邮件投票）。对博客文章的评论是另一个问题。

到目前为止我的想法（我确信它们离题很远）：

**投票：**

*   在我的博客表的投票字段中存储用户 ID 列表。
*   对于我的用户表中的每个用户，存储他们投票的所有 PostID 的列表。

**注释：**

*   创建一个单独的 Comments 表，并在该表中有一个引用父博客文章的字段。
*   在我的 Blogs 表的 Comment 字段中存储一个 CommentID 列表。

我知道还有其他几种方法可以解决这个问题，但我正在尝试设置它，这样如果我有大量用户涌入，我就不必重写整个事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:04:04.480

您可能想考虑创建一个投票表，例如 User|Post|Type？约翰|43 |向上玛丽|43 |向下

使 User + Post 成为复合主键，从而通过两者进行索引...然后您可以轻松检查用户是否已经为帖子投票...如果需要，您还可以按用户或帖子创建其他索引.. .

我也是一个好主意，然后在博客表中包含“当前的起伏”，这样你就不必每次都计算它们......

# php - 组合两个数组的键和值

> ID：11551763
> 
> 赞同：-1
> 
> 时间：2012-07-18T23:18:25.923
> 
> 标签：php, arrays

> **可能重复：**
> [合并PHP数组，一个作为键，另一个作为值？](https://stackoverflow.com/questions/5422955/merging-php-array-one-as-keys-the-other-as-values)

我在 PHP 中有以下两个数组，它们代表大气气体及其成分：

```
Array
(
    [0] => nitrogen
    [1] => argon
    [2] => oxygen
    [3] => carbon dioxide
)

Array
(
    [0] => 78
    [1] => 1
    [2] => 21
    [3] => 0
) 
```

是否有一种优雅的方式来获取以下数组，键和值的组合：

```
Array
(
    "nitrogen" => 78
    "argon" => 1
    "oxygen" => 21
    "carbon dioxide" => 0
) 
```

我能想到的方法都涉及循环，不知道是不是把它复杂化了。有简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:21:49.023

[`array_combine()`](http://php.net/manual/en/function.array-combine.php)， 简单地：

```
$new_arr = array_combine($keys,$values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:23:18.087

使用[array_combine](http://php.net/manual/en/function.array-combine.php)

```
$key = array('nitrogen', 'argon', 'oxygen', 'carbon dioxide');
$values = array(78, 1, 21, 0 );

$return = array_combine($key, $values);

print_r($return); 
```

输出：

```
Array
(
    [nitrogen] => 78
    [argon] => 1
    [oxygen] => 21
    [carbon dioxide] => 0
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T23:23:31.023

array_combine() 示例：

```
<?php
print_r(array_combine(Array('a','a','b'), Array(1,2,3)));
?> 
```

返回：数组 ( [a] => 2 [b] => 3 )

如果两个密钥相同，则第二个优先。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T23:21:45.810

信不信由你 -`array_combine()`存在并且*正是*您正在寻找的！

[http://php.net/manual/en/function.array-combine.php](http://php.net/manual/en/function.array-combine.php)

> array_combine — 通过使用一个数组作为键和另一个作为其值来创建一个数组

* * *

改编自上述链接的示例 -

```
$a = array('Stack', 'Server', 'Super');
$b = array('Overflow', 'Fault', 'User');
$c = array_combine($a, $b);

print_r($c);

Array
(
    [Stack] => Overflow
    [Server] => Fault
    [Super] => User
) 
```

有了它 - 一个适合[tr](https://stackoverflow.com/) [ogy的](https://serverfault.com/)[数组](https://superuser.com/)。

# javascript - 如何根据力沿弯曲路径移动元素？

> ID：11551764
> 
> 赞同：1
> 
> 时间：2012-07-18T23:18:32.923
> 
> 标签：javascript, jquery, html, animation

**编辑：我在 Decker 的链接（[矢量移动演示](http://www.professorcloud.com/supercharged/vectors/sample02.htm)）中深入研究了文档非常完善的源代码，并且我相当有信心可以解决其中的一些代码。谢谢大家的帮助：D**

我正在为 javascript 中的游戏开发运动。左右箭头键旋转宇宙飞船的图像，而向上箭头则使其加速。使用旋转度数和速度，我可以用`x`和和来计算运动，但这意味着船像汽车一样操控。鉴于它应该在太空中，我想让船的旋转仅在加速时影响它的路径，并考虑到船的当前运动。`y``Math.sin()``Math.cos()`

我把它弄乱了很多，并尝试将运动分成两个独立的力量，当前方向和速度以及所需的方向，但似乎没有什么比它应该的感觉更接近。

抱歉，如果这令人困惑，这里是原始运动的简化代码：

```
function main()
{
if(keyStates[39]) // Right arrow pressed?
    ship.deg+=8; 
if(keyStates[37]) // Left arrow pressed? 
    ship.deg-=8; 
if(keyStates[38]) // Up arrow pressed?
{
    if(ship.speed<16)
        ship.speed+=1;
}
var shift=getXYshift(ship.deg,ship.speed);
function getXYshift(deg,speed)
{
    return {x:Math.round(Math.cos((90-deg)*Math.PI/180)*speed*-1), y:Math.round(Math.sin((90-deg)*Math.PI/180)*speed)};
}
setTimeout(function(){ main() }, 50);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:52:23.587

You can use one Vector to keep track of the ships speed and direction and alter the direction of that vector when the up arrow is pressed by checking the angle of a second Vector used to keep track of the ships current angle.

I recommend getting this book [Supercharged Javascript Graphics](https://rads.stackoverflow.com/amzn/click/com/1449393632) which explains in detail the use of vectors and much more.

You can also view the source code for one of the books examples here [at the authors website](http://www.professorcloud.com/supercharged/vectors/sample02.htm) which has a vector handling object that could prove useful to you.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:52:34.773

You should be using a mathematical concept known as a "vector" for your movement. A vector is simply a force and a direction. This vector will be applied to the X,Y coordinate of your ship (ignoring its direction) every frame when determining where to draw the ship. When you accelerate you will use the direction the ship is facing and a constant value assigned to acceleration to form a vector that can be applied to your movement vector for calculating its effect on velocity.

Here is a quick introduction to vectors: [http://www.khanacademy.org/science/physics/v/introduction-to-vectors-and-scalars](http://www.khanacademy.org/science/physics/v/introduction-to-vectors-and-scalars) , after watching the video you should have a good idea about what need to be looking for. From there Google should be your friend.

**EDIT:** Above when I said: "you will use the direction the ship is facing and a constant value assigned to acceleration to form a vector that can be applied to your movement vector for calculating its effect on velocity" I was referring to vector algebra. If you decide to use vectors to solve your problem, you will need to use the concept of vector addition to accelerate. When you press the arrow key, you will generate a vector of magnitude m (where m can be any real number indicating how fast you want to accelerate) and a direction d (more than likely this value will correspond with the direction the ship is facing). You will then add this new vector to the ships current vector to get the ships new vector after the acceleration for the current frame is applied. You can read more here: [http://emweb.unl.edu/Math/mathweb/vectors/vectors.html](http://emweb.unl.edu/Math/mathweb/vectors/vectors.html)

Cheers and happy Coding

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T00:04:11.240

根据我的低物理知识：

船有一个方向的速度。这可以表示为来自您空间的向量，例如 X 轴上的 x 像素，Y 轴上的 y 像素（可能还有更多维度）每秒。

然后它有一个旋转速度，比如每秒逆时针 α 度。

要计算你的船一秒钟的行程，只需将速度矢量添加到坐标中。并将旋转添加到当前方向。

要根据旋转和加速度更改速度矢量，您将在当前方向的方向上构建一个长度与加速度相关的矢量。然后将加速度矢量添加到速度矢量。

伪代码：

```
ship = {
   coordinates: [0, 0], // space units
   orientation: 0, // radiant
   speed: [0, 0], // space units / time frame
   rotation: 0 // radiant / time fram
}
function animatestep {
   coordinates[0] += speed[0];
   coordinates[1] += speed[1];
   orientation += rotation;
}
onaccelerate = function {
   speed[0] += cos(orientation) * acceleration;
   speed[1] += sin(orientation) * acceleration;
}
onleft = function {
   rotation++;
}
onright = function {
   rotation--;
} 
```

请注意，这使得太空船的行为真的像太空船，因为旋转可能很难停止。您可能需要允许逐步设置船的方向，而不是使用旋转速度 :-) 您还可以设置旋转和加速度的限制（否则船会爆裂）并使用最大速度（如光速，包括[不同速度的加法](http://en.wikipedia.org/wiki/Velocity-addition_formula#Special_theory_of_relativity)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T23:32:17.653

您在按右/左箭头后使用 getXYshift 吗？您应该只在按下向上箭头时使用它。这样，您的船将在不向任何方向加速的情况下旋转。仅在按下向上箭头键时更改速度，不按下时减速。不要用左右键改变速度，用它们来改变你的船的旋转。

# iphone - iPhone 网络 SSID

> ID：11551776
> 
> 赞同：0
> 
> 时间：2012-07-18T23:20:29.053
> 
> 标签：iphone, xcode, error-handling

我在实现这个问题的答案中的代码时遇到问题：[iPhone get SSID without private library](https://stackoverflow.com/questions/5198716/iphone-get-ssid-without-private-library)

我有 xcode 4.2 和 iOS 5.1。

```
 #import <SystemConfiguration/CaptiveNetwork.h>

- (id)fetchSSIDInfo
{
    NSArray *ifs = (id)CNCopySupportedInterfaces();
    NSLog(@"%s: Supported interfaces: %@", __func__, ifs);
    id info = nil;
    for (NSString *ifnam in ifs) {
        info = (id)CNCopyCurrentNetworkInfo((CFStringRef)ifnam);
        NSLog(@"%s: %@ => %@", __func__, ifnam, info);
        if (info && [info count]) {
            break;
        }
        [info release];
    }
    [ifs release];
    return [info autorelease];
} 
```

我收到以下错误：

![在此处输入图像描述](../Images/1c49b9cd7393318e7f7ca34bbcfde576.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:37:26.903

您需要将 CFNetwork.framework 添加到您的项目中。

您可以通过选择 Targets > Summary > Linked Framework and Libraries 来完成。

# python - 如何让 CMake 在生成 Visual Studio 解决方案后执行一些脚本

> ID：11551779
> 
> 赞同：10
> 
> 时间：2012-07-18T23:20:45.873
> 
> 标签：python, windows, visual-studio-2010, cmake

我正在使用 CMake 来构建一个项目。我想在 CMake 生成解决方案后执行一些脚本（比如 python 脚本），这样我就不必每次都手动执行它。我正在使用 Cmake 2.8。有人知道 Cmake 为此目的提供的任何用户挂钩或东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:46:39.580

如果要*在 CMake 构建期间*执行命令，请使用[execute_process](http://www.cmake.org/cmake/help/cmake2.6docs.html#command%3aexecute_process)。

# glassfish-3 - Glassfish - 跨重新部署保留会话 - 会话重新创建时不调用 SessionListener

> ID：11551788
> 
> 赞同：1
> 
> 时间：2012-07-18T23:21:31.157
> 
> 标签：glassfish-3, servlet-3.0

所以我做了一个简单的会话监听器——网上有很多：

```
import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;
import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

@WebListener
class SessionListener implements ServletContextListener, HttpSessionListener {

    private static final int MAX_INACTIVE_INTERVAL = 1000; // in secs
    // static AtomicInteger numOfSessions;
    // singleton ? static ?
    static int numOfSessions;
    static ServletContext context;

    @Override
    public void sessionCreated(HttpSessionEvent se) {
        se.getSession().setMaxInactiveInterval(MAX_INACTIVE_INTERVAL);
        increase();
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
        decrease();
    }

    private synchronized void increase() {
            ++numOfSessions;
            context.setAttribute("numberOfSessions", numOfSessions);
            System.out.println("SessionListener - increase - numberOfSessions = " +
                               numOfSessions);
    }

    private synchronized void decrease() {
            --numOfSessions;
            context.setAttribute("numberOfSessions", numOfSessions);
            System.out.println("SessionListener - decrease - numberOfSessions = " +
                               numOfSessions);
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
        System.out.println("SessionListener - contextDestroyed");
    }

    @Override
    public void contextInitialized(ServletContextEvent sce) {
        context = sce.getServletContext();
        System.out.println("SessionListener - contextInitialized : " +
                           context);
    }
} 
```

_重度_编辑_

我在 Eclipse Juno 上使用 Glassfish 3.1.2。会话是通过相关 servlet`request.getSession()`中的方法创建的。`doPost()`当我重新部署项目（保存时）时`decrease()`，会话自然会失效。

现在，Eclipse glassfish 插件中默认启用*“跨重新部署保留会话” - 所以当我再次在 Eclipse 中保存项目并重新部署时，我得到：*

```
INFO: SessionListener - decrease - numberOfSessions = -1 
```

含义：GF 重新创建会话但不调用侦听器 - 因此在重新部署时会话无效 - 但由于`sessionCreated()`未调用我的会话计数为 0。

***我需要一个解决方法！***

[历史](http://www.coderanch.com/t/360149/Servlets/java/know-which-users-system)（它帮助我了解发生了什么）：

> 如果您在运行 tomcat 的情况下修改并重新编译 java 程序，tomcat 首先通过调用会话侦听器删除所有会话，然后重新创建具有相同会话 ID 的新会话对象***edit****和除不可序列化对象 (?) **/edit***之外的所有属性，但是这次它不会调用注册的会话监听器。

注意：我对会话保存一无所知，并且由于会话没有被完全保存（POJO 会话属性被消灭了——据我所知，它现在应该是可序列化的——对吗？文档？）真的需要一段时间才能理解什么正在继续。

# grails - 在easyb中减慢Selenium进程

> ID：11551789
> 
> 赞同：0
> 
> 时间：2012-07-18T23:21:37.523
> 
> 标签：grails, selenium, groovy, easyb

我正在尝试使用 easyb 和自动 selenium 减慢 BDD 过程

```
 `selenium.waitForPageToLoad("3000000")` 
```

行，但它似乎不起作用是否还有其他我需要在每行之间添加的东西来减慢easyb测试中自动硒执行的每个步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:33:02.190

[`selenium.waitForPageToLoad("3000000")`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#waitForPageToLoad%28java.lang.String%29) 设置 Selenium 在超时之前等待页面加载的时间。

如果页面在 3000000 毫秒之前加载，那么它会立即继续。

要在单击元素等时实际减慢 Selenium，您可以设置： [`selenium.setSpeed("milliseconds")`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#setSpeed%28java.lang.String%29)

# php - 从mysql查询动态创建表

> ID：11551791
> 
> 赞同：0
> 
> 时间：2012-07-18T23:21:43.537
> 
> 标签：php, mysql, dynamic

我正在尝试创建一个页面，在其中输入一个 MYSQL 查询：`SELECT column1,column2 FROM table;`，并动态创建一个带有列标题的 HTML 表。

**编辑：**删除了我的大部分问题，只留下了问题部分。从那以后，我创建了一个执行此操作的脚本并将其作为答案包含在内。我希望其他人像我一样使用它（当我懒得登录phpmyadmin时......哈哈哈）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:24:30.710

我会尝试`mysql_fetch_assoc`返回一个关联数组（地图）。然后您可以使用 array_keys 来获取列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:31:03.787

这听起来可能与测试有关，有时您只需要吐出结果即可在屏幕上看到它们，所以我将把它放在这里......

php 类 dbug 是一个很棒的工具，可以快速从 php 数组甚至是 MySQL 结果中获取格式良好的表格：

[http://dbug.ospinto.com/](http://dbug.ospinto.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:07:29.140

好。以下是我完成此操作的方法，基于 webjprgm 使用 mysql_fetch_assoc 的提示：

`php code to dynamically create a table with column titles, from PHP to mysql to html! :)`

```
<head>
    <title>mysql Table maker</title>
</head>
<body>
    <center>
<?php

    /* posted data sent to this page (from this page)*/

    $pdatabase      = htmlentities($_POST['database'],  ENT_QUOTES);    // database
    $phost          = htmlentities($_POST['host'],      ENT_QUOTES);    // host
    $puser          = htmlentities($_POST['user'],      ENT_QUOTES);    // user
    $ppassword      = htmlentities($_POST['password'],  ENT_QUOTES);    // password

    $pcolumns       = htmlentities($_POST['columns'],   ENT_QUOTES);    // comma seperated columns
    $columns        = explode(",",$pcolumns);                           // array of column names

    $ptable         = htmlentities($_POST['table'],     ENT_QUOTES);    // table
    $pwhere         = str_replace(array(";",'"'),array('',''),$_POST['where']);    // WHERE clause
    if (!empty($pwhere)) {$pwhere = "WHERE $pwhere";}                   // if not empty, prepend with "WHERE"

    $porder         = htmlentities($_POST['order'],     ENT_QUOTES);    // ORDER BY clause
    $psort          = htmlentities($_POST['sort'],      ENT_QUOTES);    // SORTING (asc or desc)
    if (!empty($porder)) {$porder = "ORDER BY $porder $psort";}         // if order is not empty, prepend with "ORDER BY"

    $pgroup         = htmlentities($_POST['group'],     ENT_QUOTES);    // GROUP BY clause
    if (!empty($pgroup)) {$pgroup = "GROUP BY $pgroup";}                // if not empty, prepend with "GROUP BY"

    $plimit         = htmlentities($_POST['limit'],     ENT_QUOTES);    // LIMIT clause
    if (!empty($plimit)) {$plimit = "LIMIT $plimit";}

    /* The finished product....or query...so to speak...if you will */
    $query          = "SELECT $pcolumns FROM $ptable $pwhere $pgroup $porder $plimit";

    /* Safety precautions */
    $query          = str_replace(array("delete","drop","update","alter"),array('','','',''),$query);

    // print_r($columns);

?>
<form action="mysql-table.php" method="POST">
    <span style="position:fixed;top:0;left:0;width:100%;height:30px;background:#35AFE3">
    host:       <input name="host"      type="text"     value="<?php echo $phost;?>"/>
    user:       <input name="user"      type="text"     value="<?php echo $puser;?>"/>
    password:   <input name="password"  type="password" value="<?php echo $ppassword;?>"/>
    database:   <input name="database"  type="text"     value="<?php echo $pdatabase;?>"/>
    </span>

    <hr/>

    <span style="position:fixed;top:30px;left:0;width:100%;height:205px;background:#35FC39;">
    SELECT 
        <input name="columns"   type="text"     value="<?php echo $pcolumns;?>"/><br/>
    FROM 
        <input name="table"     type="text"     value="<?php echo $ptable; ?>"/><br/>
    WHERE 
        <input name="where"     type="text"     value="<?php echo trim(str_replace("WHERE","",$pwhere)); ?>"/><br/>
    ORDER BY 
        <input name="order"      type="text"     value="<?php echo trim(str_replace("ORDER BY","",$porder)); ?>"/><br/>    
    SORT 
        <select name="sort">
            <option value=""></option>
            <option value="ASC">ASC</option>
            <option value="DESC">DESC</option>
        </select><br/>    
    GROUP BY 
        <input name="group"     type="text"     value="<?php echo trim(str_replace("GROUP BY","",$pgroup)); ?>"/><br/>
    LIMIT 
        <input name="limit"     type="text"     value="100"/><br/>
    GO: 
        <input                  type="submit"   value="submit" />

    </span>
</form>

<span style="position:absolute;top:235px;left:0;width:100%;height:auto;background:#28c7d6;z-index:-1;">

<?php
if (!empty($_POST['columns']) && !empty($_POST['table'])) {

    echo "<h3><b>Query:</b> <i>$query</i></h3><hr/>";

    $mysqli = new mysqli($phost,$puser,$ppassword,$pdatabase);               // Connect to DB

    /* check connection */                                              // check for connection error
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    if ($result = $mysqli->query($query)) {

        echo "<table border='1' style='word-wrap:break-word'>";         // New table
        /* Column Title */
        echo "<tr>";                                                    // New Row for the titles

        foreach($columns as $c) {                                       // For each column, create a column
            echo "<td><b>$c</b></td>\r\n";
        }

        echo "</tr>";                                                   // Close the titles' row

        /* DATA RESULTS */
        while ($row = $result->fetch_assoc()) {                         // for each set of rows:
            echo "<tr>\r\n\r\n";                                        // create new row

            foreach($columns as $c) {                                   // for each column in the row:
                                                                        // create a cell 
                echo "
                    <td style='max-width:400px;'>
                        <div style='max-height:300px;overflow-y:auto;'>
                            $row[$c]
                        </div>
                    </td>";
            }

            echo "</tr>";                                               // end of that row

        }                                                               // end foreach results
        echo "</table>";                                                // closing of the table

        /* free result set */
        $result->free(); 
    } else {
        echo "query failed.<hr/>";
    }
    /* close connection */
    $mysqli->close();
} elseif (isset($_POST['columns']) || isset($_POST['table'])) {         // end of !empty columns,table
    echo "<b>MISSING IMPORTANT INFORMATION.<br/>
    For column, you entered: <u> ".$_POST['columns']." </u><br/>
    For table you entered: <u> ".$_POST['table']." </u>";
}
?>

</span>
    </center>
</body> 
```

# javascript - 乘以两位小数

> ID：11551794
> 
> 赞同：0
> 
> 时间：2012-07-18T23:21:59.693
> 
> 标签：javascript, jquery, html

我试图添加一个税字段。我有这个整数工作，但我需要能够输入“.5”我不知道如何解决这个问题，也许是因为 isNAN，但我认为这在这里没问题。

[http://jsfiddle.net/thetylercox/eeMva/3/](http://jsfiddle.net/thetylercox/eeMva/3/)

我当前的代码

```
$(document).ready(function() {
    calculateSum();
    $(".txt").keyup(function() {
        $(".txt").each(function() {
            calculateSum();
        });
    });
});

$("#tax").keyup(function() {
    $('#total1').val(parseInt($(this).val()) * parseInt($('#subtotal').val()));
);

function calculateSum() {
    var sum = 0;
    $("#sum").val(sum.toFixed(2));
    //iterate through each textboxes and add the values
    $(".txt").each(function() {
        //add only if the value is number
        if (!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });
    $("#sum").html(sum.toFixed(2));
    var subtotal = document.getElementById("subtotal").value == "";
    var subtotal = document.getElementById("subtotal").value = sum;

    function getTax(tax) {
        var taxFloat = parseFloat(tax)
        if (isNaN(taxFloat)) {
            return 1;
        } else {
            return taxFloat;
        }
    }

    var total = getTax($('#tax').val()) * sum;
    var total1 = document.getElementById("total1").value = total;
} ​ 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:39:51.517

试试这个：

*   将所有代码（包括函数）放入您的`$(document).ready(function(){...})`结构中。
*   在内部执行所有计算，包括税收`calculateSum()`。
*   始终使用 jQuery，特别是 '$(...)' 优先于`.getelementById(...)`.
*   附加`calculateSum`为所有用户可输入字段的“keyup”处理程序。
*   从代码中清除各种垃圾

它应该是这样的：

```
$(document).ready(function(){
    function getTax() {
        var taxFloat = parseFloat($("#tax").val());
        return isNaN(taxFloat) ? 1 : taxFloat;
    }

    function calculateSum() {
        var sum = 0;
        $(".txt").each(function() {
            if (this.value && !isNaN(this.value)) {
                sum += parseFloat(this.value);
            }
        });
        $("#subtotal").val(sum.toFixed(2));
            $("#total1").val((getTax()*sum).toFixed(2));
    }

    $(".txt, #tax").keyup(calculateSum);
}); 
```

**[演示](http://jsfiddle.net/eeMva/19/)**

您可能希望将税收算法更改为更合乎逻辑的东西。例如。对于输入的 5(%) 值，乘数应为 1.05 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:24:25.450

税收是按百分比计算的。进行以下更改：

```
$("#tax").keyup(function() { 
    //$('#total1').val(parseInt($(this).val()) * parseInt($('#subtotal').val()));
    calculateSum();
    });

...

function getTax(tax) {
        var taxFloat = parseFloat(tax)
        if (isNaN(taxFloat)) {
            return 1;
        } else {
            // 1(subtotal) + ?(tax%) -> total = (1 + tax%) * subtotal
            return 1 + (taxFloat/100);
        }
    }

    var total = getTax($('#tax').val()) * sum;
    // round to 2 decimal digits
    total = Math.round(total * Math.pow(10, 2)) / Math.pow(10, 2);
    var total1 = document.getElementById("total1").value = total; 
```

因此，对于 5%，您输入 5 对于 0.5%，您输入 0.5

**更新**：（不是真正的更新）当我看到更多答案出现时，我重复税务字段使用的逻辑错误。税收是全球范围内的百分比，这意味着问题不仅在于键盘处理，还在于税收价值的使用方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:37:32.580

发现你的错误：

```
$("#tax").keyup(function() {
     $('#total1').val(parseInt($(this).val()) * parseInt($('#subtotal').val()));
}); 
```

`parseInt`在这里，您使用而不是解析税款`parseFloat`，就像在函数中所做的那样`getTax`。`parseInt(".5")`给出 NaN。`.txt`在插入税后尝试在输入中插入值，它会在调用`calculateSum`函数时起作用。

我不明白为什么在字段中按下键时会使用与`#tax`其他字段中的正常按键不同的计算。只需使用相同的侦听器函数，或者，如果您想划分功能，请调用该函数以显示来自`#tax`keyhandler 和`calculateSum`函数的税款。

此外，当其中一个输入被更新时，无需执行`calculateSum()`四次。

[在更新的 fiddle](http://jsfiddle.net/eeMva/18/)中查看更好的结构化源代码。计算税收和总额的数学没有更正。

# azure - Tinymce ImageManager 连接到 Windows Azure Blob 存储

> ID：11551800
> 
> 赞同：1
> 
> 时间：2012-07-18T23:22:38.790
> 
> 标签：azure, tinymce

我正在考虑从专用服务器托管环境迁移到 Azure。我正在使用 ASP.NET Membership 提供程序，每个成员都有自己的文件夹来存放他们的图像（头像等）。我已经连接了 Tinymce ImageManager，以便登录用户在选择/上传图像时只会看到他们的文件夹。

有没有办法以类似的方式将 Tinymce ImageManager 连接到 Azure 的 blob 存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:10:51.993

我看到这完成的唯一方法是让您重写在 HDD 上执行 I/O 操作的图像管理器的部分。这不是一门可以实施的火箭科学。

迁移到 Azure 的另一种方法是将您的站点迁移到[Windows Azure](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:06:25.723

他们网站上的这个帖子表明这还不被支持：

[http://www.tinymce.com/forum/viewtopic.php?id=24776](http://www.tinymce.com/forum/viewtopic.php?id=24776)

# javascript - ScrollSpy“激活”事件不触发

> ID：11551802
> 
> 赞同：0
> 
> 时间：2012-07-18T23:23:04.737
> 
> 标签：javascript, jquery, twitter-bootstrap

我读了这个问题：[How to use Twitter Bootstrap ScrollSpy to execute a function](https://stackoverflow.com/questions/9343715/how-to-use-twitter-bootstrap-scrollspy-to-execute-a-function)，即先抓取事件，然后添加某个功能。首先，我对 jQuery 比较陌生，所以我不知道如何抓取事件。

这是我的代码：

```
$(".navbar").scrollspy();
$('[data-spy="scroll"]').each(function()
{
    $(this).scrollspy('refresh');
});
$("ul.nav li").on("activate", function()
{
    console.log("ACTIVATED");
}); 
```

当然，手动触发它会运行该功能，但无论我尝试做什么，它似乎都不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:07:21.073

您的代码是正确的，Bootstrap 的最新（2.1.0）版本解决了这个问题。

请参阅[https://github.com/twitter/bootstrap/issues/3316](https://github.com/twitter/bootstrap/issues/3316)并在此处访问工作脚本：[https](https://github.com/twitter/bootstrap/blob/2.1.0-wip/js/bootstrap-scrollspy.js) ://github.com/twitter/bootstrap/blob/2.1.0-wip/js/bootstrap-scrollspy.js .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:03:13.250

您的 li 元素可能缺少下拉类

```
li.dropdown 
```

否则它将不起作用，因为当您的元素具有匹配的父级时，他会专门寻找 .dropdown .dropdown-menu ...在我的情况下，它总是正确的。这是在引导程序中执行此操作的代码：

```
 active = $(selector)
      .parent('li')
      .addClass('active')

    if (active.parent('.dropdown-menu'))  {
      active = active.closest('li.dropdown').addClass('active')
    }

    active.trigger('activate') 
```

# c# - 在 C# winform 中，我得到：“仅支持 truetype 字体。这不是 TrueType 字体”

> ID：11551805
> 
> 赞同：24
> 
> 时间：2012-07-18T23:23:17.523
> 
> 标签：c#, fonts, truetype

我有 C# winform，我安装了几个 ttf 字体，但是当我将文本框字体设置为我下载的任何字体时，我收到这个错误即使我 100% 确定我安装的字体是 ttf ..为什么 ？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-08-10T09:54:01.233

当您在 Visual Studio 运行时安装新字体时会发生这种情况。关闭 Visual Studio，然后重新打开它。问题将得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-23T11:04:01.350

具有许可证“Source Sans Pro”的字体。在每个 MS 应用程序中安装和使用。对于 VS Forms-Project，我需要“重新安装”它

**右键单击字体并选择“为所有用户安装”**

VS重新启动后，误导性错误消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-14T19:30:23.007

下载字体后，我只需双击它并点击“安装”。但是，这不起作用，该字体未显示在 Win 10*字体设置*中，除了它位于*/Windows/Fonts/*文件夹中。有些程序确实找到了字体（例如 Gimp），而其他程序（例如 VS 甚至 Win10 本身）却没有找到它们。重新启动后，字体不再显示（直到新的双 ckicl/安装）。

* * *

### 解决方案：右键单击字体并选择*“为所有用户安装”*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-09T13:52:55.527

在 WPF 项目中使用 nuget [WpfColorFontDialog](https://www.nuget.org/packages/WpfColorFontDialog/)代替，这支持 OpenType 字体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-15T15:32:53.063

尝试

```
private void Form1_Load(object sender, System.EventArgs e) {
    label1.Font = new Font("myFont", 12, FontStyle.Regular);
} 
```

# jmeter - Jmeter If 控制器带有 http 代码

> ID：11551811
> 
> 赞同：4
> 
> 时间：2012-07-18T23:23:38.810
> 
> 标签：jmeter

我想在我的 jmeter 负载测试中使用 if 控制器。测试是：

1.  做一个帖子并取回访问令牌。
2.  使用该访问令牌获取下一个链接。

我的问题：

我有访问令牌并使用了 post-assertion-> 正则表达式提取器并从他的 http 响应中获取了访问令牌。但是现在我不知道如何使用 if 控件并要求它仅在 http 响应代码为 200 时才进行下一次测试。第二个问题是我仍然可以将访问令牌的正则表达式值传递给 if 循环的 http 标头管理器?

附上我的jmeter的屏幕截图。![在此处输入图像描述](../Images/129f0141a61540d2eb752bdb26cfbc17.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:33:39.020

尝试使用[响应断言](http://jmeter.apache.org/usermanual/component_reference.html#Response_Assertion)根据返回的响应代码处理 Request_Access_Token 请求的状态（成功/失败），然后使用 IfController 以及预定义的[JMeterThread.last_sample_ok](http://jmeter.apache.org/usermanual/functions.html#predefinedvars) jmeter 的变量 - 无论最后一个样本是否正常 - 真/假。

架构将如下所示：

```
**ThreadGroup**
    **Request_Access_Token**
        **Response Assertion**
        Response Field to Test: Response Code
        Pattern Matching Rules: Equals
        Patterns to Test: 200
        **Regex Extractor**          // your Access_Token extractor
    **IfController**
    Condition: ${JMeterThread.last_sample_ok}   // will be TRUE if Response Assertion above is TRUE (i.e. response code = 200)
        **HttpRequest**
        // send extracted Access_Token along with request
        ... 
```

# procedural-programming - 程序编程和数据公开

> ID：11551813
> 
> 赞同：1
> 
> 时间：2012-07-18T23:23:45.253
> 
> 标签：procedural-programming

考虑到在过程编程中您可以拥有本地范围，可以说以下陈述并不完全正确吗？

“在过程程序中，数据暴露给整个程序，而在 OOPs 程序中，它可以在对象中访问，这反过来又保证了代码的安全性。”

（我是学生，实习面试时被问到这个问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:36:06.937

我同意马克的观点，不完全正确的部分是“确保代码的安全性”。

面向对象的语言在底层做着与过程语言可能做的事情相同的事情：隐藏类型定义，然后将指针传递给包含数据的结构，而不是使用全局。一个例子是 C 的 pthreads 库，它使用不透明类型来防止 API 的用户修改内部数据结构。（不透明只是意味着结构是在私有标头中定义的，因此如果没有指针技巧，用户就无法看到它的内部。）

但是数据安全呢？不，因为您仍然可以使用指针在不透明结构中达到峰值，甚至可以检查堆栈上的数据。这也适用于 C++。黑客仍然可以尝试检查程序的内存（调试器、核心转储、其他技巧）。

# javascript - JQuery - 排序后以 50 个为一组包装 div

> ID：11551816
> 
> 赞同：2
> 
> 时间：2012-07-18T23:24:11.663
> 
> 标签：javascript, jquery

我有以下html：

```
<div class="backpack_all"> //wrapper for all on screen content
    ...
    <div class="backpack"> //main content to display
        <div class="item1">
        <div class="item2">
        <div class="item3">
        ...etc 
```

我将拥有这种格式的 200-500 件物品。我还积极地按这些项目的各种属性对这些数据进行排序。未排序时，它们由包含 50 个项目的 class="backpack_partition" 以 50 个为一组进行分区。为了对它们进行排序，我必须从它们各自的分区中解开所有项目。如何使用 jquery/javascript 重新包装它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:03:48.133

求助于一些好的老式 JS。

```
var divs = $('.backpack > .item');
for(var i = 0; i < divs.length; i+=50) {
    divs.slice(i, i+50).wrapAll("<div class='backpack_partition'></div>");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:26:39.540

你可以试试[`wrapAll()`](http://api.jquery.com/wrapAll/)方法：

> 围绕匹配元素集中的所有元素包裹一个 HTML 结构。

```
$('.backpack').wrapAll('<div class="backpack_all" />') 
```

或者：

```
$('.backpack:first').nextUntil('.backpack:eq(50)').end().wrapAll('<div class="backpack_all" />') 
```

# macos - Apple 帮助手册教程

> ID：11551817
> 
> 赞同：11
> 
> 时间：2012-07-18T23:24:14.870
> 
> 标签：macos, cocoa, apple-help

有人可以向我指出有关如何为 Cocoa 应用程序创建帮助书的最新教程。我在网上找到的所有东西都是旧的和过时的，Apple 文档并没有让它更清晰。我不知道的一件事是如何创建一个 .help 包。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T04:08:08.077

本文档包含有关帮助包布局的信息（以及一般的 Apple 帮助）：

[http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html%23//apple_ref/doc/uid/TP30000903-CH206-TPXREF104](http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html%23//apple_ref/doc/uid/TP30000903-CH206-TPXREF104)

另一方面，从来没有真正需要帮助包格式（在某些操作系统版本中，尽管苹果自己多年来一直使用它，但它并没有得到官方支持）。

我所做的只是设置`CFBundleHelpBookFolder`和`CFBundleHelpBookName`(in `Info.plist`)。后者是人类可读的标题，例如“YourApp Help”，它必须与`AppleTitle`HTML 中的 匹配。

我设置`CFBundleHelpBookFolder`为简单的名称“帮助”，并`Something.app/Contents/Resources/English.lproj/Help`在应用程序包中创建文件夹。在这个目录中，我放置`index.html`（包含所需的`<meta>`标签`AppleTitle`和`AppleIcon`）和`ExactMatch.plist`. （顺便说一句，如果*其他所有内容*都放在这一点以下的子文件夹中，这样帮助系统就不必搜索许多顶级文件，这实际上是一个好主意。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T19:22:28.647

问完这个问题，我就去书店买了这本书。它有一个关于如何创建帮助手册的非常好的分步教程。它回答了我所有的问题。

[http://www.peachpit.com/store/product.aspx?isbn=0321670418](http://www.peachpit.com/store/product.aspx?isbn=0321670418)

# objective-c - ios上的facebook登录错误

> ID：11551818
> 
> 赞同：1
> 
> 时间：2012-07-18T23:24:26.033
> 
> 标签：objective-c, facebook, ios5

我是 iOS 的新手，我想为我的应用程序登录 Facebook。

我对 facebook 的新 ios sdk 做了很多尝试。但我得到了错误。

代码是

```
-(IBAction)logIn:(id)sender;
{
    AppDelegate *appdelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    [appdelegate sessionOpener];
    FBRequest *me = [FBRequest requestForMe];
    [me startWithCompletionHandler: ^(FBRequestConnection *connection, 
                                      NSDictionary<FBGraphUser> *my,
                                      NSError *error) {
        NSLog(@"id %@", my.id);
        NSLog(@"name %@", my.first_name);

        greet.text = my.first_name;//this is a label to show the name
        user.userID = my.id;//this is a FBProfilePictureView to show 

    }];
    [UIView transitionFromView:self.view 
                        toView:userPage 
                      duration:0.5 
                       options:(UIViewAnimationOptionTransitionFlipFromRight | UIViewAnimationOptionTransitionFlipFromLeft)
                    completion:NULL];    }
`
and sessionOpener is;

    -(void) sessionOpener{
    [FBSession sessionOpenWithPermissions:nil 
                        completionHandler:^(FBSession *session, 
                                            FBSessionState status, 
                                            NSError *error) {
                            // session might now be open.  
                        }];

} 
```

现在我得到的错误是；当我在登录后第一次登录应用程序时返回 null 并且我收到 http 400 错误。

但是在我第二次运行应用程序时登录后，它会获取信息并打印我的名字。

我的模拟器 iphone 5.1 模拟器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:06:12.497

尝试创建会话对象并将其添加到请求中：

```
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"email", 
                        @"publish_stream"
                        nil]; 
FBSession facebook_session = [[FBSession alloc] initWithPermissions:permissions];`

[[[FBRequest alloc] initWithSession:facebook_session graphPath:@"me"] startWithCompletionHandler:
 ^(FBRequestConnection *connection, 
   NSDictionary<FBGraphUser> *user, 
   NSError *error) {
     if (!error) {
         // get the data from user object
     }else {
         NSLog(@"Error: %@",error);
     }
 }];` 
```

# sqlite - sqlite3 表的更好的视觉格式？

> ID：11551820
> 
> 赞同：0
> 
> 时间：2012-07-18T23:24:38.197
> 
> 标签：sqlite

如何在 sqlite 中格式化表格输出？例如，如果显示条目的默认行为在其中一列具有可变长度文本时难以阅读。如果我这样做，`select a,b,c from table`我会得到

```
a1|b1|c1
a2|b2|c2 
```

虽然我想要一些更好且易于阅读的格式，例如..

```
++++++++++++++++
| a1 | b1 | c1 |
| a2 | b2 | c2 |
++++++++++++++++ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:42:42.343

您可以使用 dot.commands ".mode columns / .width"

```
sqlite3 test.db <<SQL
.mode columns
.width 3 10 10 4
select  'ABCDEFGHIJKLM','ABCDEFGHIJKLM','ABC','ABCDEFGHIJKLM';
SQL 
```

将收到 ABC ABCDEFGHIJ ABC ABCD 但没有其他格式，如边框等，所以非常初级

蚂蚁

# c# - 绘制角度范围为 -360 到 360 度的圆弧

> ID：11551821
> 
> 赞同：3
> 
> 时间：2012-07-18T23:24:40.823
> 
> 标签：c#, wpf, geometry, trigonometry, autocad

我在尝试实现绘制圆弧时遇到了一些麻烦。基本上它应该像在 AutoCAD 中绘制 3 点圆弧一样绘制。我可以从 -180 度到 360 度的开始和结束角度绘制弧线，但如果我尝试超过 -180 度，弧线会翻转到 +180 度。我的问题是当角度超过-180 时我需要弧线继续。除了计算起始角度和结束角度之外，我在代码中的所有内容（我认为）都是正确的。提前感谢您的帮助。这是我的代码：

```
private void DrawArc()
{
    //fyi linept is of type List<Point3D>();

    Point3D currentPoint = (Point3D)GetPoints(e);
    double rad;
    Point3D center = GetCenterOfCircle(linept.ElementAt(0), linept.ElementAt(1), currentPoint, out rad);
    PieSliceVisual3D circle = new PieSliceVisual3D();
    circle.Center = center;
    circle.OuterRadius = rad;
    circle.InnerRadius = circle.OuterRadius + 3;
    circle.StartAngle = (Math.Atan2(linept.ElementAt(0).Y - center.Y, linept.ElementAt(0).X - center.X) * 180 / Math.PI);
    circle.EndAngle = (Math.Atan2(currentPoint.Y - center.Y, currentPoint.X - center.X) * 180 / Math.PI);

    //I've also tried these next 4 lines to no avail
    double startAngle = (Math.Atan2(linept.ElementAt(0).Y - center.Y, linept.ElementAt(0).X - center.X) * 180 / Math.PI);
    circle.StartAngle = (startAngle > 0.0 ? startAngle : (360.0 + startAngle));
    double endAngle = (Math.Atan2(currentPoint.Y - center.Y, currentPoint.X - center.X) * 180 / Math.PI);
    circle.EndAngle = (endAngle > 0.0 ? endAngle : (360.0 + endAngle));
} 
```

# php - 为每个组获取一行，包含顺序和限制

> ID：11551822
> 
> 赞同：1
> 
> 时间：2012-07-18T23:25:02.093
> 
> 标签：php, mysql, sql, group-by

我的数据库中有用户上传的照片记录。他们可以将上传的其中一张照片指定为封面照片。

我想查询我的数据库为每个用户名返回一张照片。如果他们有封面照片，请退回那张。如果没有，请拉一张普通照片。指定封面照片的列是tinyint，长度为1。该列是“0”（不是封面照片）或“1”（封面照片）。

我有以下内容可以返回用户名列表的所有照片

```
$usernames = array('bob', 'ted', 'jim');
$usernames = implode( "', '", $usernames );

$query = "SELECT * FROM Photos WHERE username IN('$usernames')"; 
```

但我需要将它与以下内容结合起来，如果有一个用户名，它会得到一张封面照片，如果没有一个用户名，它会得到一张普通照片。

```
$query = "SELECT * FROM Photos WHERE username = 'bob' ORDER BY cover DESC LIMIT 1"; 
```

我想我需要使用 GROUP BY 功能，但我不知道如何设置它。有什么建议么？

列是 id(bigint)、name(varchar(255))、cover(tinyint)、username(varchar(30))

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:06:32.097

假设您有一个 user 表并且 photo 表有一个 id 列

```
SELECT p.*
FROM Users u 
INNER JOIN Photo p ON p.id = (
    SELECT id FROM Photos p2 
    WHERE p2.username = u.username 
    ORDER BY cover DESC 
    LIMIT 1
)
WHERE u.username IN('$usernames'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:34:00.873

如果您只想要每个用户 1 张照片（如果存在封面，如果没有封面则正常）

```
SELECT max( cover ) , username, photo
FROM Photos
WHERE username IN('$usernames')
GROUP BY username 
```

如果您想要所有普通照片，并且只有 1 张封面照片（如果存在），您可以这样做

```
SELECT * FROM Photos WHERE cover = 1 AND username IN ('$usernames') GROUP BY username
UNION
SELECT * FROM Photos WHERE cover = 0 AND username IN ('$usernames') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:52:09.727

如果每条记录都有唯一标识符 ( `id`)，您可以执行以下操作：

```
SELECT P1.* FROM Photos P1
WHERE P1.id IN (SELECT P2.id FROM Photos P2 
                WHERE P2.username =P1.username 
                ORDER BY P2.cover DESC LIMIT 1)
AND P1.username IN ('$usernames')
ORDER BY P1.username 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T23:53:35.280

在 Mysql 中，您需要执行以下操作：

```
select p.*
from Photos p left outer join
     (select username, min(photoid) as minphotoid
      from photos p
      where cover = 0
      group by username
     ) pmin
     on p.username = pmin.username and
        (p.cover = 1 or p.photoid = pmin.minphotoid)
where p.username in ('$usernames') 
```

这本质上是在没有封面或封面的情况下找到一张照片（最少一张）。相关子查询对此有一些变化，这可能会更快。

顺便说一句，('$usernames') 中的 p.username 在 mysql 中有效吗？在其他数据库中，这仅适用于 $usernames 中的一个用户名。

# javascript - 在javascript中，如何更改类型为“数字”的属性的值？

> ID：11551825
> 
> 赞同：0
> 
> 时间：2012-07-18T23:25:11.130
> 
> 标签：javascript, jquery, jquery-ui

```
typeof document.getElementById('foo').bar('value') //returns "number" 
```

我想改变“价值”。

```
console.log(document.getElementById('foo').bar('value')) // 10 
```

我不能只是一个数字的值，它会正确地抛出一个错误：

```
document.getElementById('foo').bar('value')) = 12 // ReferenceError: Invalid left-hand side in assignment
10 = 12 // ReferenceError: Invalid left-hand side in assignment 
```

你将如何设置 bar 的值？

这个特定的实例是由 jquery 提供的滑块，所以实际的代码（我试图改变它的值看起来像这样：

```
$('#slider').slider.val(function (index, value) {
  return value + '' + deltaY + '%'}) 
```

但是我返回了一个很长的错误，粘贴在这里：[https ://gist.github.com/2e65bbf1578f7ea27bb0](https://gist.github.com/2e65bbf1578f7ea27bb0)

> “...}没有方法'val'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:30:14.643

如果要设置输入元素的 value 属性，它总是一个字符串（设置时会转换为一个）。

该`bar()`方法的调用返回一个值（不是“指针”），当然您不能分配给它。您需要做什么才能使函数返回不同的结果显然在很大程度上取决于该函数。

* * *

[您得到](https://gist.github.com/2e65bbf1578f7ea27bb0)的错误来自表达式`$('#slider').slider.val...`- `$.fn.slider`，您在此处访问的函数*没有属性“val”*（因此您无法调用）。你想在那里做什么？仔细阅读您使用的滑块插件的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:04:41.810

不管这是什么：

```
$('#slider').slider 
```

没有方法调用`val()`

因此调用`$('#slider').slider.val(...)`显然是行不通的。

还没有测试过，但也许`slider`应该是一个返回对象的函数？

`$('#slider').slider().val(...)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:24:16.380

我认为这个问题的标题和第一部分是红鲱鱼。

我相信您正在尝试使用 JQuery UI 滑块方法？如果是这样，那么按照 Bergi 的建议进行操作并阅读文档。如果我正确理解您的需求，那么您应该注意此处的以下内容：http: [//jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

在“值”部分的“选项”选项卡下：

代码示例
使用指定的值选项初始化滑块。

```
$( ".selector" ).slider({ value: 37 }); 
```

在 init 之后获取或设置 value 选项。

```
//getter
var value = $( ".selector" ).slider( "option", "value" );
//setter
$( ".selector" ).slider( "option", "value", 37 ); 
```

# jquery - 背景颜色动画jQuery

> ID：11551827
> 
> 赞同：1
> 
> 时间：2012-07-18T23:25:19.587
> 
> 标签：jquery

我几乎坚持使用[Color Animation jQuery插件](http://www.bitstorm.org/jquery/color-animation/)添加到网站的功能，我想要实现的是每3秒切换一次特定div的颜色，并且每次用户加载页面时颜色也会有所不同，加载的东西很好，但是当涉及到动画时，我遇到了麻烦，这是我的代码......

```
var colors = ["#00b6ad", "#fdbc5f", "#d91b5c", "#f1592a", "#8dc63f"];                
var rand = Math.floor(Math.random()*colors.length); 
var random_color = colors[rand];          
$('#slider-area').css("background-color", random_color);
setInterval(function(){
   $('#slider-area').animate({backgroundColor: random_color} 500);}
, 3000); ​ 
```

我认为这可能与在 animate 属性中传递变量有关，因为如果我在 backgroundColor 上设置颜色我没有问题我一直在谷歌搜索但我无法让它工作：S 所以任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:28:07.043

代码就是这样吗？因为您`random_color`在回调函数中选择了一次而不是选择新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T01:44:52.167

你“只是”需要 jQuery UI 来为背景设置动画：

## *[jsBin 演示示例](http://jsbin.com/matiqe/3/edit)*

```
var colors = ["#00b6ad", "#fdbc5f", "#d91b5c", "#f1592a", "#8dc63f"]; 

function generateColor(){
    var color = colors[ Math.floor(Math.random()*colors.length) ]; 
    $('#slider-area').stop().animate({backgroundColor: color}, 500);
}
generateColor();

setInterval(generateColor, 2000); 
```

# c++ - 如何在3dsmax sdk中获取当前打开的场景文件的完整路径？

> ID：11551828
> 
> 赞同：0
> 
> 时间：2012-07-18T23:25:22.657
> 
> 标签：c++, sdk, path, filenames, 3dsmax

我可以`GetIGameInterface()->GetSceneFileName()`，但它只给了我文件名。如何获取完整路径，例如 c:\myfiles\test.max ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:36:08.797

这有效：

GetCOREInterface()->GetCurFilePath();

# rcpp - rcpp 模块 c++ 对象终结器

> ID：11551829
> 
> 赞同：2
> 
> 时间：2012-07-18T23:25:26.667
> 
> 标签：rcpp

为什么在指定对象终结器时这个 Rcpp 模块暴露的 c++ 类不能编译？你能提供一个工作版本吗？

```
class Exposed{
     public:
        Exposed(){
          printf("constructor has been called\n");
        }

     private:
        int some_field;
} 
```

来自 Rcpp Modules 教程：class_ 的 .finalizer 成员函数可用于注册终结器。终结器是一个自由函数，它接受一个指向目标类的指针并返回 void。终结器在析构函数之前调用，因此对目标类的有效对象进行操作。可用于执行操作、释放资源等……终结器在封装C++对象的R对象被垃圾回收时自动调用。

```
 static void finalizer_of_exposed( Exposed* ptr ){
      printf("finalizer has been called\n");
 }

 RCPP_MODULE(yada){

    class_<Exposed>("exposed")
        .constructor("")
        .finalizer( &finalizer_of_exposed )    
    ;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:48:33.207

您是否尝试将其作为`void`没有 的功能`static`？

*2012 年 7 月 21 日编辑：* 您发现了一个错误！Module.h 的第 720 行需要更改：

```
Index: inst/include/Rcpp/Module.h
===================================================================
--- inst/include/Rcpp/Module.h  (revision 3697)
+++ inst/include/Rcpp/Module.h  (working copy)
@@ -717,7 +717,7 @@
     private:

         void SetFinalizer( finalizer_class* f ){
-            if( class_pointer->finalizer_pointer ) delete class_pointer->finalizer ;
+            if( class_pointer->finalizer_pointer ) delete class_pointer->finalizer_pointer ;
             class_pointer->finalizer_pointer = f ; 
         } 
```

我刚刚在 SVN 中修复了这个问题。谢谢！

# c++ - 可以定义另一个命名空间的少量用法吗？

> ID：11551830
> 
> 赞同：2
> 
> 时间：2012-07-18T23:25:27.890
> 
> 标签：c++, namespaces

在遇到许多关于为什么不使用`namespace`s like`std`和阅读文档的问题后，我有了这个想法，所以我不必`std::`每次都输入。

```
namespace leanandmean
{
 using std::cout; 
 using std::endl;
 using std::map;
}

using namespace leanandmean; 
```

所以我只会使用库和命名空间中我需要的方法。我一直想知道它可能导致的错误，所以最后一个问题是使用这种方法是否完全可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:28:44.263

方法没问题，如果您不在头文件中使用它并且可能在 .cpp 文件的全局命名空间中...

# payment - 平衡 - 将卡设置为默认资金来源

> ID：11551836
> 
> 赞同：1
> 
> 时间：2012-07-18T23:26:24.487
> 
> 标签：payment, balanced-payments

我有一个买家账户，里面有几张与之关联的有效卡。根据[Balanced 的](https://www.balancedpayments.com/) [文档](https://www.balancedpayments.com/docs/python#resources.Credit)，最近添加的卡是默认资金来源。如何在不要求用户重新提交其卡详细信息以创建新卡的情况下将另一张现有卡设置为默认资金来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:45:03.373

您目前无法设置备用资金来源，最近添加的卡始终是默认卡。要借记或贷记特定的资金工具，例如卡或银行帐户，您必须通过对象的 URI 作为参数`funding_source`或`funding_destination`分别传递：

```
buyer = balanced.Account.find(uri_of_account)
card = buyer.cards[x]
debit = buyer.debit(amount_in_cents, source_uri=card.uri)

merchant = balanced.Account.find(uri_of_account)
bank_account = merchant.bank_accounts[0]
credit = merchant.credit(amount_in_cents, destination_uri=bank_account.uri) 
```

# android - 有没有办法在不使用可运行对象的情况下从线程中使（更新）屏幕无效

> ID：11551837
> 
> 赞同：1
> 
> 时间：2012-07-18T23:26:28.660
> 
> 标签：android, multithreading, android-view

我有一个后台线程休眠 1/10 秒，然后重新循环。我希望它使屏幕无效，所以它会重绘并做一个简单的动画。似乎我可以使屏幕无效的唯一方法是如果我在 Runnable 中执行它，这假设有很多开销。

有没有办法在不使用可运行的情况下使线程内的屏幕无效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:57:49.837

Android SDK 有一个用于此目的的内置 API - [View.postInvalidate()](http://developer.android.com/reference/android/view/View.html#postInvalidate%28%29)：

> **公共无效postInvalidate（）**
> 
> 导致在事件循环的后续循环中发生无效。使用它来使来自非 UI 线程的视图无效。
> 
> 仅当此视图附加到窗口时，才能从 UI 线程外部调用此方法。
> 
> 也可以看看
> 
> ```
>  invalidate()  
>  postInvalidateDelayed(long) 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:34:53.630

从后台线程调用任何与 UI 相关的 API 都是不合法的。因此，您将需要使用`Runnable`.

如果后台线程唯一做的事情就是休眠，那么您可能无需使用线程就可以通过使用`CountDownTimer`类来实现相同的效果。或者，您可以使用`Handler.postAtTime()`API 安排 a`Runnable`在未来某个毫秒数在您的 UI 线程上运行（同样，无需使用单独的线程）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:37:06.877

我实际上认为开销可以忽略不计。但是你可以使用`AsyncTask`如下：

```
new AsyncTask<Void, Void, Void>() {
  /* (non-Javadoc)
   * @see android.os.AsyncTask#doInBackground(Params[])
   */
  @Override
  protected Void doInBackground(Void... params) {
    while(true) { //probably want some other challenge here
      Thread.sleep(1000 / 10);
      publishProgress();
    }
    return null;
  }

  /* (non-Javadoc)
   * @see android.os.AsyncTask#onProgressUpdate(Progress[])
   */
  @Override
  protected void onProgressUpdate(Void... values) {
    super.onProgressUpdate(values);
    mMyView.invalidate();
  }
}.execute(); 
```

这很好，因为 onProgressUpdate 会自动在 UIThread 上运行，因此您不必每次都创建新的可运行对象...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T02:35:35.850

尝试向线程中的处理程序发送消息并在 handleMessage 中无效。它可能会起作用。或者像 Salil Pandit 所说的那样使用 AsyncTask。我认为 Async 更好。

# ruby-on-rails - 错误：将 Rails 2.3.8 应用程序部署到 heroku

> ID：11551843
> 
> 赞同：0
> 
> 时间：2012-07-18T23:26:55.743
> 
> 标签：ruby-on-rails, ruby, heroku

希望能深入了解如何使用 Heroku 部署我的 Rails 2.3.8。当我尝试推送到 heroku 时，我收到以下错误消息：

```
 git push heroku master
    Enter passphrase:
    Counting objects:3, done.
    Compressing objects: 100 % (2/2), done.
    Writing onject: 100 % (3/3), 4.34 KiB, done.
    Total 3 (delta 0), reused 0 (delta 0)

    -----> Heroku receiving push
    Heroku push rejected, no Cedar-supported app detected

    To git@heroku.com: falling-sunrise.git
    [remote rejected] master -> master (pre-receive hook declined)
    error: failed to push some refs to 'git@heroku.com:falling-sunrise.git' 
```

我还附上了我的命令行屏幕的实际屏幕截图。我在某处读到我可能必须编写一个 gemfile 才能推动工作。我也这样做并将其添加到我的应用程序的根目录中，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:59:58.380

Can you provide the layout of your app? Make sure to run `bundle install` locally and to check your Gemfile; it may not be configured correctly, or you haven't added it the new files (including the ever-important `Gemfile.lock`) to git.

Also see [https://devcenter.heroku.com/articles/ruby-support#rails_2x_applications](https://devcenter.heroku.com/articles/ruby-support#rails_2x_applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:02:30.317

尝试捆绑您的 gemfile 并确保它是完整的。如果这不起作用，您可以尝试将您的应用推送到竹堆栈：

[https://devcenter.heroku.com/articles/bamboo](https://devcenter.heroku.com/articles/bamboo)

# c - 使用 C 传递未初始化的变量引发错误

> ID：11551848
> 
> 赞同：0
> 
> 时间：2012-07-18T23:27:35.887
> 
> 标签：c, memory-management, data-structures, tree

我有这个代码：

```
 typedef struct node
    {
        int data;
        struct node *left;
        struct node *right;
} node;

void Build (node *root , int i)
{
        if (i < 7)
    {
        root = (node *)malloc (sizeof(node));
        root->data = i;
        Build(root->left,2*i+1);
        Build(root->right,2*i+2);
    }
    else
        root = NULL;
}
void Print (node *root)
{
    if (root)
    {
        printf ("%d  ",root->data);
        Print(root->left);
        Print(root->right);
    }
}
void main()
{
    node *tree;

    Build(tree,0);
    Print(tree);
} 
```

我不明白的两件事，1.为什么我不能通过 Build(tree,0) ？它说它未初始化，但为什么我要关心它是否未初始化？我将立即分配所有需要的内存，因此它将指向新分配的节点。

如何修复此代码？谢谢你！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:30:49.720

您的`node *`to 树未初始化。

```
node *tree; 
```

这很重要，因为代码行

```
root = (node *)malloc (sizeof(node)); 
```

将内存分配给*root*的**本地副本**。*一旦您离开Build*的功能范围， *root*的副本就会超出范围。内存泄漏。

 ***请记住，C 中的所有内容都是按值传递的。

如果您真的希望*Build*分配内存，则签名必须是

```
void Build (node **root , int i) 
```

并且您在该方法中的代码必须引用`*root`而不是`root`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:42:35.190

参数是按值传递的——实际上并没有传递内存中的位置。因此，当您调用 Build 时，您只是传入了 tree 的值，而该值恰好是未初始化的。Build 函数使用该值创建一个局部根变量 - 当您`root = ...`在 Build 中设置时，您将用新值覆盖该未定义值，但该新值仍然只是在局部根变量中 - 它从未被main 中的树变量。

你真正想做的是让 Build 返回新创建的树指针：

```
node * Build(int i)
{
    node *root;
    ...
        root->left = Build(2*i+1)
    ...
    return root;
}

void main() 
{
    ...
    tree = Build(0);
    ...
} 
```***

# c++ - static_cast 可以在 C++ 中抛出异常吗？

> ID：11551853
> 
> 赞同：12
> 
> 时间：2012-07-18T23:28:21.827
> 
> 标签：c++, casting

假设 static_cast 永远不会抛出异常是否安全？

对于 Enum 转换的 int，即使它无效也不会抛出异常。我可以依靠这种行为吗？以下代码有效。

```
enum animal {
  CAT = 1,
  DOG = 2
};

int y = 10;
animal x = static_cast<animal>(y); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T23:35:48.043

*对于这种特定类型的强制转换（集成到枚举类型）*，可能会引发异常。

> **C++ 标准 5.2.9 静态转换 [expr.static.cast] 第 7 段**
> 
> 整数或枚举类型的值可以显式转换为枚举类型。如果原始值在枚举值 (7.2) 的范围内，则该值不变。**否则，生成的枚举值未指定/未定义（C++17 起）。**

请注意，由于 C++17 这种转换实际上可能会导致未定义的行为，*其中可能包括抛出异常。*

换句话说，在`static_cast`C++17 之前，您从整数中获取枚举值的特殊用法一直很好，如果您通过某种输入验证过程确保整数实际上表示有效的枚举值，那么它总是可以的。

有时输入验证过程完全消除了对 a 的需要`static_cast`，如下所示：

```
animal GetAnimal(int y)
{
    switch(y)
    {
    case 1:
        return CAT;
    case 2:
        return DOG;
    default:
        // Do something about the invalid parameter, like throw an exception,
        // write to a log file, or assert() it.
    }
} 
```

请考虑使用类似上述结构的东西，因为它不需要强制转换，并且让您有机会正确处理边界情况。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-18T23:58:08.827

> 假设`static_cast`永远不会抛出异常是否安全？

不会。对于用户定义的类型，构造函数和/或转换运算符可能会引发异常，从而导致明确定义的行为。

考虑这个程序的输出：

```
#include <iostream>

struct A {
  A(int) { throw 1; }
};

int main () {
  int y = 7;
  try {
    static_cast<A>(y);
  } catch(...) {
    std::cout << "caught\n";
  }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T23:30:40.487

`static_cast`不能抛出异常，因为`static_cast`不是运行时强制转换，如果无法强制转换，代码将无法编译。但是如果它编译并且强制转换是错误的 - 结果是未定义的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T00:11:03.600

（此答案专门针对您问题中的`int`转换`enum`。）

> 对于 Enum 转换的 int，即使它无效也不会抛出异常。我可以依靠这种行为吗？以下代码有效。

```
enum animal {   CAT = 1,   DOG = 2 };
int y = 10; 
animal x = static_cast<animal>(y); 
```

实际上，枚举并不局限于其定义中的枚举列表，这不仅仅是一些奇怪的怪癖，而是枚举的一个特意利用的特性——考虑一下枚举值如何经常被 OR 运算以将它们打包成单个值或 0当没有任何枚举适用时通过。

在 C++03 中，编译器将使用多大的后备整数不受程序员的显式控制，但范围保证跨越 0 和显式列出的枚举。

因此，10 不一定是一个有效的、可存储的值`animal`。即使支持值不足以存储您尝试转换为的整数值`animal`，也可以应用缩小转换 - 通常这将使用枚举支持类型可以容纳的许多最低有效位，丢弃任何额外的高阶位，但有关详细信息，请查看标准。

在实践中，PC 和服务器硬件上的大多数现代 C++03 编译器默认使用（32 位）`int`来支持枚举，因为这有助于调用以 32 位为标准的 C 库函数。

我*永远不会*期望编译器在使用`static_cast<>`.

# c# - Process.StartInfo 运行资源文件

> ID：11551856
> 
> 赞同：0
> 
> 时间：2012-07-18T23:28:34.150
> 
> 标签：c#, process.start

我正在尝试使用 Process.StartInfo() 启动（使用提升的权限）我构建的 exe 文件。我尝试了以下方法：
1\. 将 .exe 文件添加为嵌入式资源。
2.使用嵌入文件如下：

```
Assembly _assembly;
Stream _fileStream;
_assembly = Assembly.GetExecutingAssembly();
_fileStream = _assembly.GetManifestResourceStream("projectNamespace.filename.exe") 
```

3.从 _filestream 构建一个新文件，然后运行它。

但我不允许创建静态文件类型的实例。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:27:44.147

将要运行的文件添加到项目中。右键单击该文件并在解决方案资源管理器中将“构建操作”设置为“内容”。

# salesforce - 配置文件 SObject 中缺少“管理公共列表视图”权限

> ID：11551859
> 
> 赞同：2
> 
> 时间：2012-07-18T23:28:44.623
> 
> 标签：salesforce

我正在编写一个visualforce页面，其中包括允许创建队列的其他内容。但是，我想根据用户是否具有所需的权限来控制是否显示该部分。

根据文档：[创建队列](http://na10.salesforce.com/help/doc/en/setting_up_queues.htm)用户需要同时拥有这两个权限：

1.  “自定义应用程序”
2.  “管理公共列表视图”

我正在像这样查询个人资料：

```
Profile profile = [
    SELECT
        PermissionsCustomizeApplication
        //Was expecting: PermissionsManagePublicListViews
    FROM
        Profile
    WHERE
        Id = :UserInfo.getProfileId()]; 
```

但是我的问题是我不认为“管理公共列表视图”权限在 Profile 对象上公开。api名称是否如此不同我错过了它？有谁知道如何在代码中检查此权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:33:58.617

您无法在代码中检查这些权限，而 Lancey Snr 的建议可能是最简单的解决方法。但是，我个人不喜欢通过在构造函数中创建和删除对象来检查权限的想法。

相反，我会创建一个自定义设置来跟踪允许创建配置文件的配置文件（可能是纯文本）。自定义设置的优点是管理员可以在创建新配置文件或删除旧配置文件或重新配置权限时更新自定义设置。

将自定义设置与控制器代码中的“withsharing”关键字结合使用，可以确保无权创建队列的用户无法创建队列。

阿努普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:48:18.447

我决定将其仅限于具有“自定义应用程序”配置文件选项的人。

原因是这是重要的配置文件选项。人们需要公共列表视图选项的唯一原因是为每个新队列创建一个新视图。

正如我发现的那样，顶点代码中的队列对象没有安全性。因此，将队列创建仅限于使用“自定义应用程序”的用户似乎是最安全、最灵活的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:08:26.763

我不确定权限的名称，但是您可以运行一个方法来尝试在 init 方法或类似方法中插入（然后删除！）队列，如果成功，那么您知道他们拥有所有相关权限必需的。

当然，这里的障碍是您可能不希望它们能够删除队列（我假设它们在 CRUD 操作方面以系统中其他对象的方式工作）。

# javascript - 'require(...)' 是常见的 javascript 模式还是库函数？

> ID：11551861
> 
> 赞同：11
> 
> 时间：2012-07-18T23:29:13.207
> 
> 标签：javascript, require

我通常发现这是 node.js 脚本/模块以及 phantomJS、casperJS 等的第一行。我很好奇，这是否是服务器端 javascript (SSJS) 的常见模式（类似于`#include`C/C++ 或`import`在Java中）还是像RequireJS或LabJS这样的库被要求包含在内（我还没有机会在实践中使用它们）？

例如`var http = require('http')`或`var casper = require('casper').create()`

我很好奇这是一种已经为 SSJS*标准化*的模式，还是每个库/工具都调用现有函数？

请原谅这个问题的*n00b*维度，但我想知道它无处不在的“为什么”:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-18T23:39:29.153

该`require()`成语是称为[CommonJS](http://wiki.commonjs.org/wiki/CommonJS)的规范的一部分。具体来说，规范的那部分称为“模块”。[RequireJS](http://requirejs.org/)只是 CommonJS 的一种实现（它通常是浏览器端的实现——事实上，由于浏览器的异步特性，它采用了[不同的方法）。](http://requirejs.org/docs/whyamd.html)

如果您查看 CommonJS 站点上的实现列表，您会[看到 Node.js 已列出](http://wiki.commonjs.org/wiki/Implementations/node.js)。请注意，它实现了“模块”。因此，这就是它的来源——它非常内置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-13T11:16:14.460

PhantomJS 和 Node.js 中的`require`意思完全一样，区别在于没有一个基础模块匹配。尽管`fs`两者都存在该模块，但它们是不同的并且不提供相同的功能。

`require`在 PhantomJS 和 Node.js 中功能相同。CasperJS 建立在 PhantomJS 之上并使用它的`require`功能，但也对其进行修补。使用 CasperJS 还可以要求一个模块具有它的名称，例如，`require('module')`而不是`require('./module')`它是否在同一目录中。

完整矩阵（file.js 与执行脚本在同一目录中）：

```
            | 节点
            | | 幻影
            | | | 卡斯珀
            | | | | 更苗条
------------+---+---+---+--------
文件 | n | n | 是 | 是的
./文件 | 是 | 是 | 是 | 是的
文件.js | n | n | n | n
./file.js | n | n | n | n

```

PhantomJS 也可以`node_modules`像 node 一样使用特殊文件夹中定义的模块。它不能使用与 PhantomJS 中不存在的模块有依赖关系的实际节点模块。

## 可能需要的示例：

### m.js（用于函数）

```
module.exports = function(){
    return {
        someKey: [1,2,3,4],
        anotherKey: function(){
            console.log("module exports works");
        }
    }
}; 
```

### e.js（对于其他所有的 JS）

```
exports.someKey = {
    innerKey: [1,2,3,4]
};

exports.anotherKey = function(){
    console.log("exports works");
}; 
```

### a.json（任意 JSON）

```
[
    {
        "someKey": [ 1,2,3,4 ],
        "anotherKey": 3
    }
] 
```

### 脚本.js

```
var m = require("./m")();
m.anotherKey(); // prints "module exports works"

var e = require("./e");
e.anotherKey(); // prints "exports works"

var a = require("./a");
console.log(a[0].anotherKey); // prints "3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T07:20:15.213

其他人给出了很好的技术答案，但我想提供一个超级简化的答案，以防将来对某人有所帮助。“require”本身并不是一个库，但是当您想要访问模块（库和框架等）时使用它。所以它不像“require”是最受欢迎的库或类似的东西:)。

顺便说一句，许多旧代码要求您仍然使用“require”（注意我避免说它是必需的），但是已经使用“import”这个词开发了新语法（我猜是 ES6，从 2015 年开始）。我绝对更喜欢导入，它用于完全相同的目的，尽管它看起来有点不同。

无论如何，正如其他人提到的，“需要”意味着您需要（即访问）一个*模块*。但这并不一定意味着您可以访问*库*或*框架*……您实际上可能正在访问您自己创建的另一个页面！例如，您可能会看到：

```
 - var Comment = require("./models/comment"); 
```

这只是意味着“让我访问我在模型目录中创建的*评论文件”。*这也被认为是一个模块。

所以你可以这样想......你*需要*一些代码（或者你*导入*它）......这样你就可以按照你想要的方式使用它。如果你不需要/导入它，你就不会得到它。

# iphone - 发送几个方法参数与发送一个然后在目标方法中解码

> ID：11551867
> 
> 赞同：0
> 
> 时间：2012-07-18T23:29:31.250
> 
> 标签：iphone, ios, methods, method-parameters

我有一个有趣的决定需要帮助。

我正在从一个视图中向我的数据库发出请求，在该视图中我选择了几个 (18) 值（并非所有值都需要选择），然后这些值将从我的视图发送到我将参数放入 XML 的请求变量要求。

所以我想知道我是否创建了一个包含 18 个参数的方法，这些参数不一定都是必需的！？？或者从所有可能的变量中创建一个参数，将数据发送到目的地然后在那里解码？

这是如何工作的示例。

*   UIViewController，选择所有需要的值。
*   点击附加了一个方法的发送按钮，然后将所有值发送到我的 requestController
*   请求控制器然后将 XML 作为请求发送到 DB。

所以我的问题是将我的价值观从一种方法发送到另一种方法的最佳方法是什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:39:30.993

特别是如果它最终会变成 xml，那么 NSDictionary 可能是你最好的选择。用键（最终可以成为您的 xml 标记）和视图收集的值填充它。这是一个要传递的参数，缺少的键/值是发送不存在的可选参数的零开销方式。

# git - .gitignore 文件在 Aptana 3 中不起作用

> ID：11551873
> 
> 赞同：1
> 
> 时间：2012-07-18T23:29:54.653
> 
> 标签：git, version-control, github, aptana, aptana3

我在使用 Aptana 3 时遇到问题。我可以从 github 克隆一个项目。但我的问题是 gitignore 文件无法正常工作。当我修改 gitignore 列表中的文件时，它仍然显示在修改或提交列表中。

如果我通过控制台执行 git init，Aptana ui 不会显示文件修改。当我通过 UI 对其进行初始化时，修改后的文件会在修改时显示星号，但 gitignore 文件（来自 github 存储库）不起作用。有没有简单的方法解决这个问题？

谢谢。

我的 gitignore 文件中的示例

```
config/database.yml 
```

修改这个文件仍然显示 ![在此处输入图像描述](../Images/bf4cea4f01ddf608797a7ab3a76cc8ba.png)

Git状态返回以下...

```
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   .gitignore
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Gemfile.lock
#       modified:   config/database.yml
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       .project 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:03:29.383

config/database.yml 已经提交。此时 .gitignore 不再涉及。 *.gitignore 仅适用于 git 尚未跟踪的文件。* 如果您对不希望共享的文件进行了自定义修改，请参阅[https://gist.github.com/1423106](https://gist.github.com/1423106)了解人们解决此问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:45:17.983

您可能已经被我刚刚在这里看到的一个问题所困扰。看起来从构建 3.2.2.201208201020 开始，如果您打开提交窗口，然后编辑 gitignore，您必须重新启动 Aptana 才能获取更改。

如果您在不重新启动的情况下提交，无论 .gitignore 中有什么内容，它都会在提交窗口中显示任何内容：(

至于从 git 中获取文件，以下命令应该会有所帮助

```
cp config/database.yml config/database.yml.example # backup the file
git rm config/database.yml # remove the original from git
git commit -m "Untrack database.yml" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T18:10:00.347

您可能必须在本地提交`.gitignore`文件才能让 Aptana 忽略这些文件。

请注意不要将其推到原点。

# c++ - 链接器错误 - 其他包含目录问题？

> ID：11551875
> 
> 赞同：0
> 
> 时间：2012-07-18T23:30:10.640
> 
> 标签：c++, visual-studio-2010, linker

我从来没有在我的项目中添加任何额外的包含目录，所以我不确定我是否做对了所有事情。

我在属性菜单中添加了额外的包含目录——这些目录包括我链接到的项目的头文件和 .cpp 文件。

但是当我尝试编译时出现这些错误：

```
Error   36  error LNK2019: unresolved external symbol "unsigned int
__cdecl lodepng_decode32_file(unsigned char * *,unsigned int *,unsigned int *,char const *)" (?lodepng_decode32_file@@YAIPAPAEPAI1PBD@Z) referenced in function
"struct rgbaImage __cdecl getRGBA(char const *)"
(?getRGBA@@YA?AUrgbaImage@@PBD@Z)   C:\Users\Alex\Documents\Visual
Studio 2010\Projects\ovltest\ovltest\main.obj   ovltest 
```

除了那个，我还收到了 4 个链接器错误。

难道我做错了什么？

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:38:31.930

您可能需要将 .cpp 和 .h 文件显式添加到您尝试构建的项目中（我假设您在谈论 Visual Studio，对吗？）。或者，如果这些文件被构建到库中，则必须在项目属性中添加该库（链接器 -> 输入 -> 附加依赖项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:41:53.117

`include directories`告诉编译器在哪里可以找到你包含的头文件。您需要分别指定库所在的目录，并且（通常）必须在第三处指定库本身（位于该位置）：

![在此处输入图像描述](../Images/77f8d49c3e68480294f262fd5bb0eb2f.png) 包括目录

![在此处输入图像描述](../Images/e1bce5496b22ec85f2b53d1d7adb484a.png) 图书馆目录

![在此处输入图像描述](../Images/0f51781bfec5064e9a63b63b490d28ea.png) 实际库的文件名进入“附加依赖项”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:37:50.570

添加包含目录并不意味着其中包含的代码实际上会被编译。因此代码正在编译，因为您在这些目录中使用的任何内容的声明都在那里，但由于尚未生成目标代码而无法链接。

您需要将包含附加目录中的 CPP 文件的项目（或将 CPP 文件添加到现有项目）添加到您的解决方案。

# php - PHP/MYSQLi - 显示最后日期查询

> ID：11551876
> 
> 赞同：2
> 
> 时间：2012-07-18T23:30:10.440
> 
> 标签：php, mysql, mysqli

我的数据库表有 5 列：“id”、“date_visited”、“page_title”、“ip”和“total_views”。我无法显示 ORDER BY 'date_visited'。我的 PHP 查询是：

```
<?php
[...]
$query = "SELECT *,count(*) FROM table WHERE ip GROUP BY page_title";
$result = mysqli_query($link,$query) or die(mysqli_error($link). "Q=".$query);
if(!$result == 0) {
    while ($row = mysqli_fetch_array($result)) {
        $dataList_br .= '<tr>
                            <td>' .$row['date_visited']. '</td>
                            <td>' .$row['page_title']. '</td>
                            <td>' .$row['count(*)']. '</td>
                        </tr>';
    }
} else {
    $dataList_br .= '<p class="warning">No data found in database.</p>';
}
?> 
```

输出时，显示[日期][页面标题]和[总浏览量]。请有人帮助我，我如何显示查询的最后日期，而不是现在它显示访问页面的第一天。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:35:11.120

MySQL 对 的内容很宽容，`GROUP BY`如果列不在`GROUP BY` 但被`SELECT`ed 中，MySQL 会稍微随意地为组返回一行。在您的情况下，它只是为您提供了每个组的第一行（最低日期）。

获取每个组的行的 page_name`MAX(date_visited)`并将其与主表连接以从主表中提取剩余的列。

```
SELECT
  table.id,
  table.ip,
  table.total_views,
  maxdates.date_visited,
  maxdates.page_name,
  maxdates.thecount
FROM
  table
  JOIN (
    /* Subquery returns the aggregates to join against 
       the main table so other columns can be pulled in */
    SELECT 
      page_title, 
      MAX(date_visited) AS maxdate, 
      COUNT(*) AS thecount 
    FROM table 
    GROUP BY page_title
  ) maxdates
    ON table.page_name = maxdates.page_name 
       AND table.date_visited = maxdates.maxdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:33:10.440

你想用`ORDER BY`. 像这样：

```
$query = "SELECT *, count(*) 
            FROM table 
           WHERE ip 
        GROUP BY page_title 
        ORDER BY date_visited ASC"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:37:21.947

试试这个“ORDER BY”：

```
$query = "SELECT date_visited, page_title,count(*) FROM table WHERE ip ORDER BY page_title ASC";
$result = mysqli_query($link,$query) or die(mysqli_error($link). "Q=".$query);
if(!$result == 0) {
    while ($row = mysqli_fetch_array($result)) {
        $dataList_br .= '<tr>
                            <td>' .$row['date_visited']. '</td>
                            <td>' .$row['page_title']. '</td>
                            <td>' .$row['count(*)']. '</td>
                        </tr>';
    }
} else {
    $dataList_br .= '<p class="warning">No data found in database.</p>';
} 
```

# android - android按钮单击在程序中不起作用

> ID：11551880
> 
> 赞同：0
> 
> 时间：2012-07-18T23:30:38.713
> 
> 标签：android

大家好，我有一个问题，当我单击一个按钮时，它会保持原样，而不是开始新的活动。我在这个网站上搜索了他的问题并找到了一些解决方案，但没有一个对我有用，所以我在这里写下我的问题。

xml布局是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/profile_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/profile" />

    <Button
        android:id="@+id/create_profile"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="@string/create_profile" />

    <Button
        android:id="@+id/edit_profile"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/create_profile"
        android:text="@string/edit_profile" />

    <Button
        android:id="@+id/delete_profile"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/edit_profile"
        android:text="@string/delete_profile" />

    <Button
        android:id="@+id/activate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/delete_profile"
        android:text="@string/activate" />

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/create_profile"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/profile_title" />

    <TextView
        android:id="@id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/create_profile"
        android:layout_below="@id/profile_title"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/no_profiles" />

</RelativeLayout> 
```

活动是

```
package com.android.SmartSwitch;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Profile_Manager extends Activity {
    private Button createButton;
    private Button editButton;
    private Button deleteButton;
    private Button activateButton;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.profile);
        setUpViews();
    }

    private void setUpViews() {
        createButton = (Button)findViewById(R.id.create_profile);
        editButton = (Button)findViewById(R.id.edit_profile);
        deleteButton = (Button)findViewById(R.id.delete_profile);
        activateButton = (Button)findViewById(R.id.activate);

        createButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent(Profile_Manager.this, Add_Profile.class);
                startActivity(intent);
            }
        });

        editButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

            }
        });

        deleteButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

            }
        });

        activateButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

            }
        });
    }

} 
```

androidmanifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.SmartSwitch"

    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".SmartSwitchActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".Location_Manager" android:label="@string/app_name"/>
        <activity android:name=".Profile_Manager" android:label="@string/app_name"/>
        <activity android:name=".Schedule_Manager" android:label="@string/app_name"/>
        <activity android:name=".Location_In_Map" android:label="@string/app_name"/>
        <activity android:name=".Add_Profile" android:label="@string/app_name"/>
        <uses-library android:name="com.google.android.maps" />

    </application>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
</manifest> 
```

当我单击createButton时，它没有响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:36:00.773

作为您的主要活动，即**Profile_Manager**包含以下代码：

```
<activity
        android:label="@string/app_name"
        android:name=".SmartSwitchActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

您必须注意 Profile Manager 类是否是将要启动的类，即，如果 Profile_Manager 类是第一个屏幕，那么您应该在 AndroidManifest.xml 中创建上述代码，唯一的更改为 android:name=".Profile_Manager"而不是“SmartSwitchActivity”，另外为 Add_Profile 类添加了代码，如下所示

```
<activity
        android:label="@string/app_name"
        android:name=".Add_Profile" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

我想通过做这些改变，一切都会好起来的。

如果您无法理解上述工作，这里是完美工作示例和可用**源代码的链接**[- 按钮单击的正确工作](http://android.programmerguru.com/android-intent-example/)

# c# - 尝试从内抓还是从外抓？

> ID：11551884
> 
> 赞同：-1
> 
> 时间：2012-07-18T23:30:56.493
> 
> 标签：c#, exception-handling, try-catch

什么更好，为什么：

**这**

```
public void Main()
{
    SomeMethod();
}
public void SomeMethod()
{
  try
  {
     // code
  }
  catch(Exception)
  {
  }
} 
```

或这个：

```
public void Main()
{
    try
    {
        SomeMethod();
    }
    catch(Exception)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:35:32.193

答案是：“在知道如何处理它的*最低*级别捕获异常。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T23:47:42.637

有一个想法是，您应该在最接近它们发生的位置捕获异常（即尽可能/适当地在调用堆栈的高处）。一揽子异常处理程序通常不是一个好主意，因为它大大减少了您可用的控制流。粗粒度异常处理非常重要，但不是程序稳定性的合理解决方案。不幸的是，许多初学者开发人员认为是这样，并采取了这种笼统的 try-catch 语句这样的方法。

话虽如此，如果您在程序的其余部分中正确地使用了异常处理（以细粒度和特定于任务的方式），并在那里相应地处理了错误（而不仅仅是显示通用错误框），那么一般尝试-catch 在 Main 方法中的所有异常可能是一个有用的东西。这里要注意的一点是，如果你在这个 Main try-catch 中发现了 bug，那么你要么有 bug，要么你的本地化异常处理有问题。

这个 try-catch 与 Main 的主要用途纯粹是为了防止您的程序在非常不寻常的情况下崩溃，并且应该只向用户显示（模糊）用户友好的“致命错误”消息，或者只是留空，以及可能在某处记录错误和/或提交错误报告。

*学分：[诺多林](https://stackoverflow.com/users/44389/noldorin)*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T23:49:03.123

有关 C# 中异常处理的指南，请参阅[异常和异常处理（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173160.aspx)。 对Anders Hejlsberg 的[采访也提供了丰富的信息。](http://www.artima.com/intv/handcuffs.html)

这里的相关指南是：

> 不要捕获异常，除非您可以处理它并使应用程序处于已知状态。

通常，除非可以正确处理，否则不应捕获异常。这可能是`Main`或`SomeMethod`，具体取决于编码的内容。例如，`Main`可能包含一个通用的 catch 语句来处理通用异常（例如，向控制台写入一条错误消息）；但`SomeMethod`可能能够从某些异常中恢复并捕获这些异常。

一般`catch {}`应避免（吞咽除外）；无法处理异常的调用者应该简单地允许它向上传播。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T23:33:49.767

没有关于哪个更好的规则。您可以使用这两种方法。交易是您需要拥有最有可能在内部引发异常的代码，`try`这适用于所有编程语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T23:37:58.793

假设接下来会发生：

您希望每次失败都有一条有效消息。

```
public void Main()
{
    try
    {
        SomeMethod();
    }
    catch(Exception)
    {
    }
} 
```

上面的信息比捕获每个`try`内部信息少`SomeMethod()`，所以即使这样也没有区别，我建议捕获可能失败的小动作，以提供有关错误原因的有用数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T23:44:07.923

在我看来，您在 SomeMethod 超出之前捕获了异常，并且可能由于眼睛上没有立即的代码可见性而丢失

一件非常重要的事情是请尝试首先捕获特定的异常而不是任何东西

例如

如果 SomeMethod 正在做一些字符串到数字的转换，那么首先尝试捕获 FormatException 并将 Exception 类用于其他任何事情

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T23:48:58.323

我认为，自定义将是在最低级别引发更易于理解的异常的最佳方式。

首先定义您的自定义异常类

```
public class SomeException : Exception {}

public void SomeMethod()
{
  try
  {
     // code
  }
  catch(Exception e)
  { 
      throw new SomeException ("an error in somemethod",e);
  }
} 
```

现在，您将在任何地方更清楚地捕获异常。

# git - 即使在 gitignore 中排除子目录后，我也无法让 git 取消忽略子目录

> ID：11551885
> 
> 赞同：4
> 
> 时间：2012-07-18T23:31:05.247
> 
> 标签：git

在我的 .gitignore 文件中，我忽略了这样的目录：

`var`

然后我意识到我想跟踪`var/package`它的所有内容。因此，我已将该排除项添加到 gitignore。我已经尝试了很多组合，但为了看起来合乎逻辑，我选择了以下组合，[尤其是从这里的其他讨论](https://stackoverflow.com/questions/5533050/gitignore-exclude-folder-but-include-specific-subfolder)中。

```
!var/
var/*
!var/package
!var/package/
!var/package/* 
```

但是，每当将新文件写入 时`var/package`，都不会检测到它们。*如果我 --force专门*添加它们，但不是通过通常的程序，例如`git add .`

我需要发出一个命令来重置 .gitignore 以现在最终选择新的 gitignore 指令吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T23:43:30.773

从 .gitignore 中删除任何关于 var 的内容。使用以下内容创建一个 var/.gitignore：

```
/*
!/package 
```

你显然需要，`git add -f var/.gitignore`但在那之后一切都应该很好。

另一种选择是，在您的顶级 .gitignore 中，说：

```
/var/*
!/var/package 
```

如果其中任何一个都不起作用，请输入`find . -name .gitignore | xargs egrep .`并`cat .git/info/exclude`告诉我们它返回的内容。

# java - java --version 在命令行中不起作用

> ID：11551888
> 
> 赞同：41
> 
> 时间：2012-07-18T23:31:32.583
> 
> 标签：java, jvm

`java --version`我在命令行中尝试过，我得到：

```
Unrecognized option: --version
Error: Could not create the Java virtual machine
Error: A fatal exception has occurred. Program will exit. 
```

在我安装 jre 7 之前一切正常（我预装了 jdk 1.6）所以，我卸载了以前的版本，重新启动，然后安装了新的 jdk 7u5 windows i586。

我仍然遇到同样的问题。谁能帮我这个？
由于这个原因，我无法安装和运行 maven。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-07-18T23:33:21.437

你用了两个`-`标记。尝试一个：`java -version`。

**更新**：[由于 Java 9](https://docs.oracle.com/javase/9/tools/java.htm#JSWOR624) `java`和`javac`命令同时支持`--version`和`-version`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-07-15T16:01:04.630

```
java -version 
```

这是获取当前安装版本信息的命令

# c# - 为高度相关的实体寻找关于存储库模式的基本指针

> ID：11551889
> 
> 赞同：0
> 
> 时间：2012-07-18T23:31:33.620
> 
> 标签：c#, entity-framework-4, sql-server-ce

我正在使用 SQL Server CR E 3.5 在 C# 中编写一个数据库应用程序，并希望实现一个存储库模式。我在 Google 和 SO 上都进行了几次搜索；但是，我找不到符合我需求的实现，所以我会直接询问 SO 社区。

我的应用程序中的关键业务对象是：视频、演员、标签类别和标签。基本业务规则如下：

1.  每个标签都属于一个标签类别。
2.  一个视频可能有也可能没有多个与之关联的演员和标签。
3.  演员和标签可能有也可能没有多个与之关联的视频。

这对我来说是模糊的：

1.  我应该实现一个包含演员、标签类别和标签的视频存储库，还是每个业务对象都有自己的存储库？鉴于这些对象可以独立存在，我倾向于为每个对象创建一个存储库。

2.  如果每个对象都应该有自己的存储库，我该如何关联它们？例如，视频存储库是否应该包含查询标签存储库以查找匹配项的属性？

我正在寻找一些指导方针或最佳实践来进行设置。我了解存储库模式的基础知识，但我需要一些关于如何将它们连接在一起的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:41:48.373

您应该只有一个用于[聚合根](https://stackoverflow.com/questions/1958621/whats-an-aggregate-root)的存储库。

我不建议使用存储库来封装*所有*查询。存储库不是查询的大垃圾场——它们是在 DDD 最适用的场景中使用的特定工具。有关更多信息，请参阅本文：http: [//ayende.com/blog/3955/repository-is-the-new-singleton](http://ayende.com/blog/3955/repository-is-the-new-singleton)

不需要“连接”或“关联”存储库。

如果您想编写诸如“加载该用户借用的视频的所有标签”之类的查询，最好不要将其放入存储库中。此查询很可能特定于特定情况，例如 UI，并且应该写在需要查询的类内部或附近。查询的输出可能会映射到专为 UI 要求创建的只读数据传输对象，而不是您的实体。

# mysql - Web 开发最佳实践：使用存储过程来提高性能？

> ID：11551890
> 
> 赞同：1
> 
> 时间：2012-07-18T23:31:43.050
> 
> 标签：mysql, stored-procedures

我来自 c++/SQL 服务器背景，是 Web 开发的新手。我有几个新手问题。

一个。对我来说，通过 mysqli 使用存储过程而不是在我的 PHP 代码中调用直接查询是有意义的。优点是我可以在存储过程中进行大量内部计算并返回所需的结果。此外，如果我想更改它，我可以稍后修改存储过程而不更改 PHP 代码。但在 Web 开发世界中似乎并不经常使用它。我不明白为什么？它会影响缓存还是什么。只是纳闷。

# asset-pipeline - Rails 引擎中的 Jasmine 测试

> ID：11551895
> 
> 赞同：2
> 
> 时间：2012-07-18T23:32:38.833
> 
> 标签：asset-pipeline, ruby-on-rails-3.2, jasmine

我正在创建一个 gem（使用 创建`rails plugin new --full`），我想用 Jasmine 测试我的 JavaScript。

我已经`spec/javascripts`设置了这些东西，但它仍然无法将文件拉入`app/assets`（不是`spec/dummy/app/assets`）。

我已经尝试了这些帖子中的两种方法（基本上是试图强制编译资产）：

*   [Pivotal Labs：使用 Rails 3.1 和 Coffeescript 编写和运行 Jasmine 规范](http://pivotallabs.com/users/jdean/blog/articles/1778-writing-and-running-jasmine-specs-with-rails-3-1-and-coffeescript)
*   [使用 Jasmine 测试 Rails 3.1 引擎的 Javascript](http://sleeplessgeek.blogspot.com/2011/08/testing-rails-31-engines-javascript.html)

在这两种情况下，我都会收到此错误：

```
rake aborted!
Don't know how to build task 'tmp:cache:clear' 
```

在关键实验室解决方案的情况下，我还得到：

```
undefined method `static_root=' for #<Sprockets::Environment:0x007febe4348ac8> 
```

我的代码在这里：[https ://github.com/rmw/pixelator/tree/master/spec/javascripts](https://github.com/rmw/pixelator/tree/master/spec/javascripts)

我怎样才能让资产管道编译？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-03T05:15:17.890

你试过

> 茉莉花

宝石？

# javascript - jQuery不会更新高度

> ID：11551898
> 
> 赞同：0
> 
> 时间：2012-07-18T23:32:59.633
> 
> 标签：javascript, jquery

我在使用 jQuery .height() 函数时遇到问题。

最终结果应该是随着文本的变化而具有动态高度的 div。因此，我在该包装器中有一个包装器 div 和一个内容 div。文本位于 DOM 中其他隐藏 div 的位置，并使用 .html() 函数和模拟的淡入/淡出“导入”，将不透明度设置为 0，然后再设置为 1。

当我尝试更改内容时，包装器会调整大小，但使用旧的高度值。我只是无法获得内容 div 的当前值...

这就是魔法应该发生的地方......

```
nav.click(function() {
    contDiv.animate({opacity:0}, 200, function() {
        contDiv.html(currCont);
        contDiv.animate({opacity:1}, 200);
    });

    wrapper.animate({height:contDiv.height()},200);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:37:03.660

正如@MrOBrian 所说，您正在对 div 内容之前的高度进行动画处理，您可能需要在回调函数中调用此动画，如下所示：

```
nav.click(function() {
    contDiv.animate({opacity:0}, 200, function() {
        contDiv.html(currCont);
        wrapper.animate({height:contDiv.height()},200);
        contDiv.animate({opacity:1}, 200);
    });
}); 
```

# java - 为 JPanel 调用 repaint()

> ID：11551903
> 
> 赞同：0
> 
> 时间：2012-07-18T23:33:15.763
> 
> 标签：java, swing, jpanel, jlabel, repaint

当我 repaint() 放置 JLabels 的面板时，出现错误，但它仍然有效。我试着把 panel.repaint(); try 语句中的代码，但没有帮助。还有其他人对 JPanel 的 repaint() 有问题吗？

错误消息（从评论中复制）：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: No such child: 21 
at java.awt.Container.getComponent(Unknown Source) 
at javax.swing.JComponent.rectangleIsObscured(Unknown Source) 
at javax.swing.JComponent.paint(Unknown Source) 
at javax.swing.JComponent.paintToOffscreen(Unknown Source) 
at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source) 
at javax.swing.RepaintManager$PaintManager.paint(Unknown Source) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:05:31.683

我不太确定，但我想我之前偶然发现了同样的问题。我相信使用 SwingUtilities.invokeLater 帮助了我当时的支持。试试看，我不是很确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:49:30.480

确保对 UI 的所有修改都在事件调度线程中执行，这包括从容器中添加和删除组件。

正如 Leon 所说，使用该`invokeLater`方法将确保在 EDT 上正确执行操作。

# java - 使用 easymock 对方法进行单元测试

> ID：11551905
> 
> 赞同：0
> 
> 时间：2012-07-18T23:33:22.497
> 
> 标签：java, unit-testing, junit, easymock

所以我有下面的方法，我想对其进行单元测试。

```
public List<Project> getProjects(Task task) {

    Criteria<Project> criteria = this.myRepository.getCriteria(Project.class);
    criteria.add(Comparison.eq("order", task.getOrder()));
    criteria.addOrder(Order.asc("projectNumber"));
    return this.myRepository.findList(Project.class, criteria);
} 
```

所以它实际上获取了任务对象（它是一个 JPA 模型对象）并抛出项目表并找到所有具有该项目订单的项目。两个表中的顺序都很常见。

无论如何，查询本身并不是那么小。它查询数据库并返回一些数据。现在我的问题是如何使用easymock对此进行单元测试？

```
@Test
public void testGetProjects() throws Exception {
    myRepository = new CreateMyRepositoryWrapper(); --> This is a class which just returns the entityManger. but here we can consider this as a pojo.

    Task task = EasyMock.createNiceMock(Task.class);
    Order bom = EasyMock.createNiceMock(Order.class);        
    Project project= EasyMock.createNiceMock(Project.class);

    project.setProjectName("project"); ------> Can I call a seeter on a mocked object?

    project.setProjectNumber("1");

    EasyMock.replay(project);

    List projects= new ArrayList(Arrays.asList(project));
    bom.setProjects(projects);  ------------> Does it make sense to do this?

    EasyMock.expect(task.getOrders()).andReturn(bom);
    TestClass instance = new TestClass();
    instance.setMyRepository(myRepository);

    EasyMock.replay(task,bom);
   instance.getProjects(task);

} 
```

所以这通过了测试用例。但是我不确定所有那些嘲笑我实际测试的东西。因为它只是表明正在调用这些方法。但是由于他们被嘲笑，我不确定我是否可以使用 assertEquals ，即使我可以得到一个异常，因为我认为我必须在上面的代码中添加更多内容。

所以我的问题是：对于提到的方法，正确的单元测试用例应该是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:25:42.670

我认为你有这个嘲笑倒退。模拟 myRepostory，然后设置 myRepository 模拟以返回 Criteria 对象并在 Criteria 对象传递给 findList 时返回项目列表。

任务、订单和项目可能只是实例化。

现在， instance.getProjects(task) 将返回一些东西。您可以检查以确保返回的内容与您所说的应该从 findList 返回的内容相同。现在您实际上已经测试了一些东西，尽管没有什么特别有趣的。

您可能希望在将标准对象传递给 findList 之前验证它是否已正确设置。为此，您要么必须模拟标准，然后您可以设置您对调用哪些方法的期望。这里棘手的部分是 Hibernate Restriction 类没有非默认的 equals 实现，因此您必须编写自己的匹配器来检查传递给条件的限制是否与您期望的限制相同（功能上）。

另一种可能性是将标准设置为实际的 Criteria 对象。（您仍然设置您的 myRepository 模拟以返回它。）然后，在调用该函数后，您可以使用 toString() 方法上的某些子字符串匹配或您知道检查 Criteria 对象的任何其他方式检查内容。

最后一种（单元测试）可能性是不使用 Criteria 对象的模拟框架，而是使用您编写的一些手动编码的框架，允许您检查添加到其中的所有限制。

所有这些都为这种方法提供了一个很好的例子，实际上是用集成测试来测试的。您最终会做大量工作来验证一些不太有趣的事情，如果您尝试重构代码，您的测试可能会变得非常脆弱。（我自己做过，所以我根据经验说话。）

# r - 提取 psych 包的 fa.poly 函数中因子的相关矩阵

> ID：11551906
> 
> 赞同：0
> 
> 时间：2012-07-18T23:33:23.247
> 
> 标签：r, data-structures, extract

我正在使用[caracal 的一个很好的例子](https://stats.stackexchange.com/questions/31948/looking-for-a-step-through-an-example-of-a-factor-analysis-on-dichotomous-data/32136#32136)，对二分数据进行因子分析，现在我正在努力从`psych`包`fa.poly`函数产生的对象中提取因子。

谁能帮我从`fa.poly`对象中提取因素（并查看相关性）？

请参阅[caracal 的示例](https://stats.stackexchange.com/questions/31948/looking-for-a-step-through-an-example-of-a-factor-analysis-on-dichotomous-data/32136#32136)以获取工作示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:06:01.580

在此示例中，您创建一个对象：

```
faPCdirect <- fa.poly(XdiNum, nfactors=2, rotate="varimax")    # polychoric FA 
```

所以在 faPCdirect 的某个地方有你想要的。我建议使用`str()`来检查结构`faPCdirect`

```
> str(faPCdirect)

List of 5
 $ fa   :List of 34
  ..$ residual    : num [1:6, 1:6] 4.79e-01 7.78e-02 -2.97e-0...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:6] "X1" "X2" "X3" "X4" ...
  .. .. ..$ : chr [1:6] "X1" "X2" "X3" "X4" ...
  ..$ dof         : num 4
  ..$ fit      
      ...skip stuff....
  ..$ BIC         : num 4.11
  ..$ r.scores    : num [1:2, 1:2] 1 0.0508 0.0508 1
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:2] "MR2" "MR1"
  .. .. ..$ : chr [1:2] "MR2" "MR1"
  ..$ R2          : Named num [1:2] 0.709 0.989
  .. ..- attr(*, "names")= chr [1:2] "MR2" "MR1"
  ..$ valid       : num [1:2] 0.819 0.987
  ..$ score.cor   : num [1:2, 1:2] 1 0.212 0.212 1 
```

所以这表示这个对象是一个由五个组成的列表，第一个元素被称为`fa`并且包含一个称为`score.cor`2x2 矩阵的元素。我认为你想要的是非对角线。

```
> faPCdirect$fa$score.cor
          [,1]      [,2]
[1,] 1.0000000 0.2117457
[2,] 0.2117457 1.0000000 
```

# c# - 无论如何可以访问此文本块吗？

> ID：11551915
> 
> 赞同：0
> 
> 时间：2012-07-18T23:34:51.867
> 
> 标签：c#, windows-phone-7, listbox, parameter-passing, textblock

我想在绑定列表框中的“GameName”文本块后访问文本内容。

```
 <controls:PanoramaItem Header="games" Margin="0" Height="800" Foreground="White" VerticalAlignment="Center">
            <!--Double line list with text wrapping-->
            <ListBox x:Name="GamesListBox" Margin="0,0,-12,66"  Height="614" ItemsSource="{Binding dataFeed}" SelectionChanged="GamesListBox_SelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                            <!--Replace rectangle with image-->
                            <Image Height="100" Width="100"  Source="{Binding AllGamesImage}" Margin="12,0,9,0" VerticalAlignment="Top" HorizontalAlignment="Left" Stretch="UniformToFill" />
                            <StackPanel Width="311">
                                <TextBlock x:Name="GameName" Text="{Binding AllGamesTitle}" TextWrapping="Wrap" Foreground="White" Style="{StaticResource PhoneTextExtraLargeStyle}" Margin="0,0,0,1"/>
                                <TextBlock Text="{Binding AllGamesDescription}" TextWrapping="Wrap" Margin="0,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </controls:PanoramaItem> 
```

我想将任何设置为文本内容并将其作为参数或任何内容传递到另一个页面。

Shawn Kendrot 建议后的代码。

```
 private void GamesListBox_SelectionChanged(object sender, EventArgs e)
    {
        var myObject = GamesListBox.SelectedItem as NewGamesClass;
        string gameName = myObject.TitleCode;

        NavigationService.Navigate(new Uri("/Pages/AchivementListPage.xaml?gameName=" + gameName, UriKind.Relative));
    } 
```

返回此处的页面时，我得到一个 NullExeception：

字符串游戏名称 = myObject.TitleCode;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:53:12.607

既然可以访问对象的属性，为什么还要访问 Text 属性？

```
void GamesListBox_SelectionChanged(object sender, EventArgs e)
{
    var myObject = GamesListBox.SelectedItem as MyObject;
    string gameName = myObject.AllGamesTitle;
    // Do something with gameName
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:30:39.720

试试这个

```
ListBoxItem selItem = (ListBoxItem)(listboxWeight.ItemContainerGenerator.ContainerFromIndex(listboxWeight.SelectedIndex));

StackPanel weightpanel = (StackPanel)selItem.Content;

var child1 = weightpanel.Children[0] as TextBlock;
var child2 = weightpanel.Children[1] as TextBlock; 
```

# github - 是否可以在没有本地工作目录的情况下管理 github wiki（可能使用 gollum）？

> ID：11551917
> 
> 赞同：0
> 
> 时间：2012-07-18T23:35:09.270
> 
> 标签：github, gollum-wiki

我想构建一个与 github wiki 交互的（ruby）脚本。

[Gollum](https://github.com/github/gollum#readme)似乎想管理一个本地工作目录。

是否可以直接与 github wiki 交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:13:18.493

不，由于 Git 的*分布式*特性，您可以通过从本地存储库推送新提交来进行交互。
即使是最新的[Octopress 博客](http://octopress.org/)（使用[rake 命令创建新帖子](http://octopress.org/docs/blogging/)）也是本地克隆的基础，以及[到 GitHub 的部署过程](http://octopress.org/docs/deploying/github/)。

# iphone - FBFriendPickerViewController 崩溃

> ID：11551919
> 
> 赞同：2
> 
> 时间：2012-07-18T23:35:23.327
> 
> 标签：iphone, ios, xcode, facebook

几天前，我进行了这项工作，在您登录 facebook 后，您可以单击一个按钮，然后 FBFriendPickerViewController 将出现一个包含所有 facebook 朋友的列表。然而，突然间它开始因一些奇怪的错误而崩溃。这是我的代码：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [FBSession.activeSession handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {
// attempt to extract a token from the url
return [FBSession.activeSession handleOpenURL:url];
} 
```

在我家 viewcontroller.m

```
// Pick Friends button handler
- (IBAction)pickFriendsClick:(UIButton *)sender {
// Create friend picker, and get data loaded into it.
FBFriendPickerViewController *friendPicker = [[FBFriendPickerViewController alloc] init];
self.friendPickerController = friendPicker;

[friendPicker loadData];

// Create navigation controller related UI for the friend picker.
friendPicker.navigationItem.title = @"Pick Friends";

friendPicker.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]
                                                  initWithTitle:@"Done"
                                                  style:UIBarButtonItemStyleBordered
                                                  target:self
                                                  action:@selector(friendPickerDoneButtonWasPressed:)];
friendPicker.navigationItem.hidesBackButton = YES;

// Make current.
[self.navigationController pushViewController:friendPicker animated:YES];
}

// Handler for when friend picker is dismissed
- (void)friendPickerDoneButtonWasPressed:(id)sender {

[self.navigationController popViewControllerAnimated:YES];

NSString *message;

if (self.friendPickerController.selection.count == 0) {
    message = @"<No Friends Selected>";
} else {

    NSMutableString *text = [[NSMutableString alloc] init];

    // we pick up the users from the selection, and create a string that we use to update the text view
    // at the bottom of the display; note that self.selection is a property inherited from our base class
    for (id<FBGraphUser> user in self.friendPickerController.selection) {
        if ([text length]) {
            [text appendString:@", "];
        }
        [text appendString:user.name];
    }
    message = text;
}

[[[UIAlertView alloc] initWithTitle:@"You Picked:"
                            message:message
                           delegate:nil
                  cancelButtonTitle:@"OK"
                  otherButtonTitles:nil]
 show];
} 
```

最后，这是我在点击设置为 pickFriendsClick 方法的按钮时收到的错误消息：

2012-07-18 19:22:14.978 MeetUp[7213:1dc03]-[__NSDictionaryI 长度]：无法识别的选择器发送到实例 0xa9b7c70 2012-07-18 19:22:14.980 MeetUp[7213:1dc03] *** 由于未捕获而终止应用程序exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryI length]: unrecognized selector sent to instance 0xa9b7c70' *** First throw call stack: (0x1f626a2 0x13ede7e 0x1feda3d 0x1f522bc 0x1f5204e 0x1edd7d0 0x1ef5c98 0x1fcff7b 0x1ef5b42 0xde4d5a 0xe3ace8 0xe3ac93 0x20138 0x20718 0x410ffb 0x4110cf 0x3f9e1d 0x40a4db 0x3a79ba 0x14016be 0x25a53a6 0x259973c 0x2599550 0x2517690 0x25187fb 0x2518eb6 0x1f2b27e 0x1f2b1bd 0x1f08f22 0x1f086a4 0x1f0857b 0x1a7a913 0x1a7a798 0x358e17c 0x358e17c 0x205d 异常终止）

同样，我实现的登录和注销功能运行良好，不久前还运行良好，但现在它给我带来了麻烦。任何帮助将不胜感激。谢谢！

编辑：好的，所以我添加了这行代码：[friendPicker setItemPicturesEnabled:NO]; 现在它可以工作了，但显然我没有在 tableview 单元格中得到小缩略图。

我猜错误是它在尝试加载个人资料图片时由于某种原因崩溃（SIGABRT）。如果有人知道为什么会这样，那就太好了，尤其是在几天前看到它工作并加载了图片时。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-27T05:06:29.513

当我遇到相同的问题和 tldr 并错过了黑客解决方案时，要将您的内容添加到答案中。

堆栈跟踪显示在一行中抛出了一个异常：

```
[FBGraphObjectTableDataSource tableView:imageForItem:] 
```

人体工学设置：

```
self.friendPickerController.itemPicturesEnabled = NO; 
```

似乎解决了这个问题，因为它不会加载图像。

# jquery - ckeditor 图像对齐中心自定义

> ID：11551922
> 
> 赞同：3
> 
> 时间：2012-07-18T23:35:35.210
> 
> 标签：jquery, forms, layout, ckeditor, wysiwyg

在研究了至少十几个关于 ckeditor 的图像居中线程后，我想发布我在我们公司的一个应用程序中使用的内容，看看是否有其他极客有改进的提示或建议。我将其发布在 stackoverflow 上，因为这是我们所有人寻求帮助的地方，而且我知道其他人正在研究同一主题。

我们的编辑器用于电子邮件模板，所以我想确保样式属性也重新插入到 img 标签属性中：

```
<img align="left" alt="" height="169" src="http://local.app.com/includes/images/temp/cdn/events/2.png" style="width: 123px; height: 169px; float: left;" width="123"> 
```

在文件最底部的 ckeditor.js 文件中，添加以下代码块。如果您使用的是未压缩的 js 文件，请确保您位于文件的最后。我添加了一个评论块来确定。

```
//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
function configureHtmlOutput( ev )
{
   var editor = ev.editor,
      dataProcessor = editor.dataProcessor,
      htmlFilter = dataProcessor && dataProcessor.htmlFilter;

   // Out self closing tags the HTML4 way, like <br>.
   dataProcessor.writer.selfClosingEnd = '>';

   // Make output formatting behave similar to FCKeditor
   var dtd = CKEDITOR.dtd;
   for ( var e in CKEDITOR.tools.extend( {}, dtd.$nonBodyContent, dtd.$block, dtd.$listItem, dtd.$tableContent ) )
   {
      dataProcessor.writer.setRules( e,
         {
            indent : true,
            breakBeforeOpen : true,
            breakAfterOpen : false,
            breakBeforeClose : !dtd[ e ][ '#' ], 
            breakAfterClose : true
         });
   }
   // Output properties as attributes, not styles.
   htmlFilter.addRules(
      {
         elements :
         {
            $ : function( element )
            {
               // Output dimensions of images as width and height
               if ( element.name == 'img' )
               {
                  var style = element.attributes.style;

                  if ( style )
                  {
                     // Get the width from the style.
                     var match = /(?:^|\s)width\s*:\s*(\d+)px/i.exec( style ),
                     width = match && match[1];

                     // Get the height from the style.
                     match = /(?:^|\s)height\s*:\s*(\d+)px/i.exec( style );
                     var height = match && match[1];

                     // Get the border from the style.
                     match = /(?:^|\s)border-width\s*:\s*(\d+)px/i.exec( style );
                     var border = match && match[1];

                     // Get the float from the style.
                     match = /(?:^|\s)float\s*:\s*(\D+);/i.exec( style );notSet
                     var float = match && match[1];

                     if ( width )
                     {
                        element.attributes.width = width;
                     }

                     if ( height )
                     {
                        element.attributes.height = height;
                     }

                     if ( border )
                     {
                        element.attributes.border = border;
                     }

                     if ( float )
                     {
                        element.attributes.align = float;
                     }
                  }
               }

               if ( !element.attributes.style )
                  delete element.attributes.style;

               return element;
            }
         }
      } );
}
CKEDITOR.on('instanceReady',configureHtmlOutput); 
```

接下来打开 js 文件 /ckeditor/plugins/image/dialogs/image.js 中的图像插件`id: 'cmbAlign'`。如果您使用的是压缩版本，则必须先将其解压缩。我推荐这个实用程序[http://tools.arantius.com/tabifier（json](http://tools.arantius.com/tabifier)类型），它对我来说一直很有效。您将编辑“cmbAlign”代码块以匹配：

```
//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                  id: 'cmbAlign',
                  type: 'select',
                  widths: ['35%', '65%'],
                  style: 'width:90px',
                  label: b.lang.common.align,
                  'default': '',
                  items: [
                    [b.lang.common.notSet, ''],
                    [b.lang.common.alignLeft, 'left'],
                    [b.lang.common.alignRight, 'right'],
                    [b.lang.common.alignCenter, 'center']  //=> display: block; margin-left: auto; margin-right: auto;
                  ],
                  onChange: function () {
                    l(this.getDialog());
                    o.call(this, 'advanced:txtdlgGenStyle');
                  },
                  setup: function (B, C) {
                    if (B == d) {
                      var D = C.getStyle('float');
                      switch (D) {
                        case 'inherit':
                        case 'none':
                            D = '';
                      }!D && (D = (C.getAttribute('align') || '').toLowerCase());
                      this.setValue(D);
                    }
                  },
                  commit: function (B, C, D) {
                    var E = this.getValue();
                    if (B == d || B == f) {
                      if (E) {
                            switch (E) {
                            case 'left': 
                                C.setStyle('float', E);
                                break;
                            case 'right': 
                                C.setStyle('float', E);
                                break;
                            case 'center': 
                                C.setStyle('display','block');
                                C.setStyle('margin-left','auto');
                                C.setStyle('margin-right','auto');
                                break;
                            default: 
                                C.setStyle('float', E);
                          }
                      }
                      else {
                        C.removeStyle('float');
                        C.removeStyle('display');
                        C.removeStyle('margin-right');
                        C.removeStyle('margin-left');
                      }
                      if (!D && B == d) {
                        E = (C.getAttribute('align') || '').toLowerCase();
                        console.log(E);
                        switch (E) {
                            case 'left': 
                                break;
                            case 'right': 
                                break;
                            case 'center': 
                            break;
                          default: 
                            C.removeAttribute('align'); 
                        }
                      }
                    } else if (B == g){
                        C.removeStyle('float');
                        C.removeStyle('display');
                        C.removeStyle('margin-right');
                        C.removeStyle('margin-left');
                    }
                  }
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
```

这就是我能够重新整合图像居中的方式。不，它不漂亮，我敢肯定它不是 100% 准确的，但我对你的想法很感兴趣。到目前为止，这工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T10:01:27.820

Drupal 有一个专门用于解决这个问题的模块 [https://drupal.org/project/ckeditor_image](https://drupal.org/project/ckeditor_image) 你所要做的就是启用它它劫持图像按钮，所以我认为如果你不想破解 ckeditor 它是最好的解决方案，我检查它的源代码，它包含一个新的图像插件来替换核心中的那个

# java - java android R无法解析为变量错误

> ID：11551923
> 
> 赞同：0
> 
> 时间：2012-07-18T23:35:40.390
> 
> 标签：java, android, xml, eclipse

我正在为我们构建一个适用于 Android 的大炮应用程序游戏的课程进行练习，在此链接中显示。

[http://www.sci.tamucc.edu/~akatangur/su12/COSC4590/Androidfp_07.pdf](http://www.sci.tamucc.edu/~akatangur/su12/COSC4590/Androidfp_07.pdf)

整个演练在这里。所以如果我准确地复制说明应该没有问题。但我无法编译，因为我得到同样的错误 R 无法解析为变量“”

当我尝试清理项目时，我得到了这个：

```
[2012-07-18 16:19:34 - CannonGame]   C:\Users\Gaming\workspace\CannonGame\res\menu\main.xml:2: error: Error: No resource found that matches the given name (at 'title' with value '@string/menu_settings').
[2012-07-18 16:30:45 - CannonGame] W/ResourceType( 5384): Bad XML block: header size 169 or total size 0 is larger than data size 0 
```

我有点困惑有人可以解释这个以及如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:41:28.497

`menu_setting`您必须在`values/strings.xml`like中定义您的字符串

```
<resources>
<string name="menu_setting">Your String</string>
</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:21:40.570

将标题标签添加到您的 String.xml 文件

```
<string name="title_activity_main">MainActivity</string> 
```

# android - 从 android 应用程序中注销 google 用户

> ID：11551925
> 
> 赞同：0
> 
> 时间：2012-07-18T23:35:57.167
> 
> 标签：android, google-app-engine, authentication

我已经能够使用此博客文章从 android 应用程序向我的应用程序引擎站点验证用户； [http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)

首次登录；出现权限对话框。在允许该应用程序后，用户已通过身份验证。我怎样才能退出这个用户？如何删除授予的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:39:37.910

你不能。只有在您卸载应用程序后才会将其删除。所以如果这是为了测试，重新安装就可以了。否则你只能忍受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:08:42.757

如果你想撤销一个应用程序的权限，你必须在网络上输入你的帐户设置，然后安全->访问管理。这是我最喜欢的方式。一些链接喜欢：[https ://www.google.com/settings/u/1/security](https://www.google.com/settings/u/1/security)

# ios - 未找到符号：_objc_retainAutoreleasedReturnValue 在 iOS 4.3 上运行 ARC 编译代码

> ID：11551927
> 
> 赞同：4
> 
> 时间：2012-07-18T23:36:07.953
> 
> 标签：ios

我的代码是使用 5.1 的基本 SDK 和 4.0 的部署构建的，并且是使用 ARC 构建的。

我之前在 4.3 测试设备上运行它时没有遇到任何问题，但它只是第一次崩溃。

知道如何解决吗？

```
Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x00000001, 0xe7ffdefe
Crashed Thread:  0

Dyld Error Message:
  Symbol not found: _objc_retainAutoreleasedReturnValue
  Referenced from: /var/mobile/Applications/6AD37C1A-9642-4F0A-87E9-ED33EE45729D/Interactive Messages.app/Interactive Messages
  Expected in: /usr/lib/libobjc.A.dylib
  Dyld Version: 191.3

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   dyld                            0x2fe01080 dyld_fatal_error + 0
1   dyld                            0x2fe02a40 dyld::halt(char const*) + 48
2   dyld                            0x2fe02b00 dyld::fastBindLazySymbol(ImageLoader**, unsigned long) + 172
3   libdyld.dylib                   0x351d544e _dyld_fast_stub_entry(void*, long) + 30
4   libdyld.dylib                   0x351d5374 dyld_stub_binder + 12
5   Interactive Messages            0x00036aee 0x1000 + 219886
6   libobjc.A.dylib                 0x350af5d4 call_load_methods + 96
7   libobjc.A.dylib                 0x350af446 load_images + 50
8   dyld                            0x2fe03d7c _ZN4dyldL12notifySingleE17dyld_image_statesPK11ImageLoader + 64
9   dyld                            0x2fe0a6a8 ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 236
10  dyld                            0x2fe0aaaa ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) + 34
11  dyld                            0x2fe020dc dyld::initializeMainExecutable() + 324
12  dyld                            0x2fe06ffe dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**) + 1446
13  dyld                            0x2fe01286 dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*) + 506
14  dyld                            0x2fe01058 _dyld_start + 48 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:17:07.250

坠机发生在哪里？新的编译器突然开始发生同样的事情。

对我来说，我有一个`+(void) load`覆盖内的代码，该覆盖似乎在 arclite 代码正确链接之前被调用。我不确定这是可能的，但将相同的代码移入`+(void) initialize`工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:28:32.167

[这用于说 4.3 但我错了，所有文档都说它是 iOS 4。]

编辑：Grrr - 我一年前开始了我的项目，想使用 ARC 和块。那时我有充分的理由使用 4.3 而不是旧版本，必须获得管理层的许可，从此一切顺利。现在，我无法确定我为什么这样做。可能当时 SDK 是 4.3，我假设这就是我需要的。我强烈记得我有充分的理由要求 4.3（我刚从 WWDC 回来），但现在我当然找不到任何证据来证实我的答案。也就是说，原始海报似乎已经给了我这个答案 - 所以假设更改为 4.3 修复了他的运行时间问题。如果我找到原因，我会更新这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:35:22.780

我同意@Paul de Lange 的观点，让我再补充一点。

我不是 100% 确定，但似乎运行时机制自 Xcode 4.4 以来发生了轻微变化，启用 ARC 的项目将在调用类的 +(void)load 之后开始链接 libarclite_xxx.a（对于 iOS4）（以前，它是 BEFORE ）。

更详细地说，方法调用在 Xcode <= 4.3 中是这样的：

1.  链接 libarclite_xxx.a
2.  类的 +load
3.  类类别的 +load
4.  主函数（）
5.  类的 +initialize

在 Xcode >= 4.4 中：

1.  类的 +load
2.  链接 libarclite_xxx.a
3.  类类别的 +load
4.  主函数（）
5.  类的 +initialize

由于在类的 +load 中直接添加了@autoreleasepool，我的应用程序在首次启动时崩溃了，并且通过将其实现移动到类的 +initialize 或类类别的 +load 中，一切都很好。

# java - 将 JSONArray 嵌入到多个对象/数组中

> ID：11551930
> 
> 赞同：0
> 
> 时间：2012-07-18T23:36:46.017
> 
> 标签：java, json

我从服务器得到一个 JSON 响应，我需要获取的数组是嵌入在多个对象和数组中的一个值。我需要获取**formatIds** JSONArray。我的 JSON 看起来像这样：

```
{
    "entries": [
        {
            "title": "sample",
            "targets": [
                {
                    "format": "wav",`enter code here`
                    "description": "A wav file",
                    "formatCriteria": [
                        {
                            "formatSelectionTitle": "Find WAV files",
                            "formatSteps": {
                                "UniqueId": "214212312321",
                                "formatMatches": {
                                    "formatIds": [
                                        "WAV",
                                        "MP3"
                                    ]
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ]
} 
```

我能够弄清楚的唯一方法是嵌入一堆 for 循环：

```
String[] assetUri;
for (int i = 0; i < entriesArray.length(); i++) {
    entryJsonOjbect = entriesArray.getJSONObject(i);
    fileTargetArray = tempObj.getJSONArray("targets");
    //Loop through the targets array
    for (int j = 0; j < fileTargetArray.length(); j++) {
        tempObj = fileTargetArray.getJSONObject(j);
        fileCriteriaArray = tempObj.getJSONArray("formatCriteria");
        //Loop through fileCriteria Array
        for (int h = 0; h < fileCriteriaArray.length(); h++) {
            JSONObject fileCriteriaObj = fileCriteriaArray.getJSONObject(h);
            //Get the JSON Object 'formatSteps'
            JSONObject selectStepObj = fileCriteriaObj.getJSONObject("formatSteps");
            //Get the JSON Object 'formatMatches'
            JSONObject selectionMatches = selectStepObj.getJSONObject("formatMatches");
            //FINALLY. Get the formatIds ARray
            JSONArray assetTypeArray = selectionMatches.getJSONArray("formatIds");
                //Assign the values from the JSONArray to my class
                assetUri = new String[assetTypeArray.length()];
                for (int z = 0; z < assetTypeArray.length(); z++) {
                    assetUri[z] = assetTypeArray.getString(z);
            }

        }
    }
} 
```

由于所有嵌入式循环，这段代码真的很慢 x20。有没有办法让我得到这个 JSONArray 而不必有这个额外的代码？在 jQuery 中有一个**JSON.find**并且想知道在 Java 中是否有类似的东西？我已经尝试过 JSON API 调用**getJSONArray**并**获取**根 jsonObject 但它不起作用，除非你在 json 数组存在的对象中。我确信我可以做某种类型的递归解决方案，但这仍然很烦人。有什么建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:54:19.770

使用 -library 解析 JSON`org.json`就像使用 DOM 解析 XML：一步一步来。但是：您将需要所有这些循环。

如果您的 JSON 响应总是看起来像您发布的那个（每个数组中的单个元素），那么您的 JSON 非常无效。如果您只想要“第一个”条目，请不要遍历数组。

解析如此复杂的数据结构`org.json`可能会很痛苦。您是否尝试过（更自动化的）[google-gson](http://code.google.com/p/google-gson/)库？查看[示例](http://sites.google.com/site/gson/gson-user-guide)。虽然我不想说用 gson 解析它在 CPU 时间方面会更快，但在开发时间方面它会更快。

我最近也写了一篇关于这个主题的博客文章：[JSON 和 Java](http://codeisland.org/2012/json-and-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:25:12.377

您可以使用诸如 GSON 之类的库来为您解析成 Java 对象，而不是手动进行超越和循环。

[http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/](http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/)

# mysql - Django +所有大于今天的行

> ID：11551931
> 
> 赞同：-1
> 
> 时间：2012-07-18T23:36:51.137
> 
> 标签：mysql, django

我正在阅读与此类似的其他问题（[获取自上次登录以来创建的所有 Django 记录](https://stackoverflow.com/questions/9493342/get-all-django-records-created-since-last-login)），但找不到我正在寻找的确切答案。我有一张桌子，上面列出了正在发生的事件。我有一个`start_time`和`end_time`（都是`datetime`值）。我想获取所有尚未**结束**的事件。有没有办法用 Django 框架做到这一点？我知道如何通过直接 SQL 来做到这一点，但如果框架可以做到，我宁愿避免这样做。

**[编辑]**

这是模型的一部分。基本上我想要当前`datetime`值，并且想要得到任何小于`end_time`.

```
class Event(models.Model):
        class Meta:
            db_table = 'event'

        description = models.TextField()
        start_time = models.DateTimeField()
        end_time = models.DateTimeField() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T00:02:33.153

这可以在 Django 中轻松完成：

```
Event.objects.filter(end_time__gt=datetime.now()) 
```

`end_time__gt``end_time`表示您要在该字段上执行大于查询。

# c++ - 什么 BSD 许可证 c/c++ 库可以用来实现 http 客户端支持 http1.1 和 ssl

> ID：11551933
> 
> 赞同：0
> 
> 时间：2012-07-18T23:37:09.223
> 
> 标签：c++, c, http, ssl, https

我正在寻找实现或启用 HTTP 客户端实现的 ac/C++ 库。它也应该支持 http1.1 和 ssl。你会提出什么建议？

提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:40:29.710

`libcurl`支持 HTTP1.1、TLS，并且似乎在类似于 BSD 的许可下：

```
 All rights reserved.
 .
 Permission to use, copy, modify, and distribute this software for any purpose
 with or without fee is hereby granted, provided that the above copyright
 notice and this permission notice appear in all copies.
 .
 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. IN
 NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
 OR OTHER DEALINGS IN THE SOFTWARE.
 .
 Except as contained in this notice, the name of a copyright holder shall not
 be used in advertising or otherwise to promote the sale, use or other dealings
 in this Software without prior written authorization of the copyright holder. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-04T12:50:02.107

Beast 支持 HTTP/1.0 和 HTTP/1.1，它适用于 Boost.Asio 常规套接字或 SSL 流。它是 Boost 的一部分，包含大量文档，并基于 gcc、clang 和 Visual Studio 构建！[https://github.com/boostorg/beast/](https://github.com/boostorg/beast/)

这是一个完整的示例程序：使用 HTTP 从网站请求根页面并打印响应：

```
#include <beast/http.hpp>
#include <boost/asio.hpp>
#include <iostream>
#include <string>

int main()
{
    // Normal boost::asio setup
    std::string const host = "boost.org";
    boost::asio::io_service ios;
    boost::asio::ip::tcp::resolver r(ios);
    boost::asio::ip::tcp::socket sock(ios);
    boost::asio::connect(sock,
        r.resolve(boost::asio::ip::tcp::resolver::query{host, "http"}));

    // Send HTTP request using beast
    beast::http::request_v1<beast::http::empty_body> req;
    req.method = "GET";
    req.url = "/";
    req.version = 11;
    req.headers.replace("Host", host + ":" + std::to_string(sock.remote_endpoint().port()));
    req.headers.replace("User-Agent", "Beast");
    beast::http::prepare(req);
    beast::http::write(sock, req);

    // Receive and print HTTP response using beast
    beast::streambuf sb;
    beast::http::response_v1<beast::http::streambuf_body> resp;
    beast::http::read(sock, sb, resp);
    std::cout << resp;
} 
```

# git - 詹金斯 git 位置

> ID：11551937
> 
> 赞同：5
> 
> 时间：2012-07-18T23:37:34.350
> 
> 标签：git, jenkins

我正在尝试找到 jenkins 存储 git 存储库的目录，我需要能够设置 AWS 开发工具，以便我可以运行 shell 命令到 aws.push 到 beanstalk。出于某种原因，包含工作文件的目录似乎具有与其关联的不正确的分支信息。

```
jenkins@192.168.1.1:~/jobs/myPHPapp/workspace$ git status
# Not currently on any branch.
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   default/ 
```

从 github 导入的 jenkins 分支是我的“dev”分支，奇怪的是它只显示 master。Jenkins 是否将存储库的另一个副本保存在其他地方？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T06:15:56.047

你说得对，Jenkins 将 git 存储库克隆到作业工作区`${JENKINS_HOME}/jobs/<JOB_NAME>/workspace`

您应该尝试清除工作区，然后开始另一个构建。如果这有帮助，您可以设置 Jenkins 以在构建完成后自动清除工作区。如果这没有帮助，您必须仔细检查此作业生成的控制台输出，如果您需要进一步的帮助，可能会发布它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-18T13:05:01.827

截至 2020 年 2 月，Jenkins 将 git 存储库存储在`/var/lib/jenkins/workspace/folderName_jobname`

（詹金斯 2.... 在 Ubuntu 18.04 LTS 上）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-28T17:18:11.390

在詹金斯容器上，实际位置是

`/var/jenkins_home/workspace/repo_name`

注意：如果你在做清理操作，它不会出现，而是会出现`repo_name@tmp`。

# html - 地理编码器无法正常工作 HTML

> ID：11551940
> 
> 赞同：1
> 
> 时间：2012-07-18T23:37:50.663
> 
> 标签：html, google-maps, geocode

我正在努力让 GeoCoder 工作。我什至直接从 Google 中提取示例并粘贴到我的 HTML 中，但它仍然无法正常工作。这是代码。

我从我的字段中捕获的地址会很好地传递回地理编码功能。一切都注销到我的控制台。但地图只是刷新，没有任何反应。

我也将代码上传到我的网站。[http://voidkat.com/geo/index.html](http://voidkat.com/geo/index.html)

请帮忙！！谷歌地图多标记地址：

```
 <div id="map" style="width: 500px; height: 400px;"></div>

              <script type="text/javascript">
                var geocoder;
                var map;
                var address;
                  function initialize() {
                    geocoder = new google.maps.Geocoder();
                    var latlng = new google.maps.LatLng(-34.397, 150.644);
                    var mapOptions = {
                      zoom: 10,
                      center: latlng,
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                    }
                    map = new google.maps.Map(document.getElementById("map"), mapOptions);
                  }

                  function codeAddress() {
                    e.preventDefault;
                    var address = document.getElementById("address").value;
                     console.log(address);
                    geocoder.geocode( { 'address': address}, function(results, status) {
                      if (status == google.maps.GeocoderStatus.OK) {
                        map.setCenter(results[0].geometry.location);
                        var marker = new google.maps.Marker({
                            map: map,
                            position: results[0].geometry.location
                        });
                      } else {
                        alert("Geocode was not successful for the following reason: " + status);
                      }
                    });
                  }
              </script>
            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:46:30.060

您需要放在`onsubmit`表单上，​​而不是`onclick`按钮上。

另外，要调用一个函数，你*必须*在它后面加上括号，即使它不接受参数，所以它`e.preventDefault();`不是`e.preventDefault;`. 并且在`onsubmit`（或任何`on`）的情况下，无法在函数内部取消事件，您必须使用`onsubmit="event.preventDefault(); ..."`.

演示：http: [//jsfiddle.net/eEEpj/](http://jsfiddle.net/eEEpj/)

代码：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>Google Maps Multiple Markers</title>
  <script src="http://maps.googleapis.com/maps/api/js?sensor=false"
          type="text/javascript"></script>
</head>
<body onload="initialize()">
    <form id="addressForm" onsubmit="event.preventDefault();codeAddress();">
        <div>
        <label for="address">Address:</label>
        <input type="text" name="address" id="address" />
        <input type="submit" id="addressButton" value="Get Coordinates" />
        </div>
    </form>    

  <div id="map" style="width: 500px; height: 400px;"></div>

  <script type="text/javascript">
    var geocoder;
    var map;
    var address;
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 10,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map"), mapOptions);
  }

  function codeAddress() {
     var address = document.getElementById("address").value;
     console.log(address);
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }

    /*
    //de infowindowz
    var infowindow = new google.maps.InfoWindow();

    //de markers
    var marker, i;

    //de locationz
    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));

    }
    */
  </script>
</body>
</html> 
```

# php - authorize.net 支付分发

> ID：11551942
> 
> 赞同：2
> 
> 时间：2012-07-18T23:37:56.643
> 
> 标签：php, paypal, authorize.net

我正在寻找有关 authorize.net 支付分配的解决方案。

例如：有 3 个人和站点管理员（A、B、C 和站点管理员）

A 想使用该站点向 C 汇款。

现在 A 发送的钱会自动分成某些部分......

金额 1 -> 网站所有者将收取一定的佣金作为金额的佣金（比如说 2%）。

金额 2 -> B 将获得一些钱（比如说 100 美元）（用于一些预定义的额外服务）

金额 3 -> 我们还要求减去 paypal 或 authorize.net 等将收取的交易费用。

金额 4 -> 是 C 最后收到的金额。

A也可以使用任何类型的账户（CR.卡、DR.卡、Paypal、authorize.net等）支付（但该过程将使用Authorize.net进行交易）

而C&B拿到钱。

Que：我怎样才能使用 authorize.net 做到这一点？

此外，我们是否需要在 Authorize 上拥有 B 和 C 的帐户帐户，或者他们可以通过任何帐户类型（如贝宝、授权等）获得资金。？

以及如何获取更改详细信息并将其从实际金额中扣除。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:53:32.673

Authorize.Net 无法做到这一点。目前，您唯一真正的解决方案是使用专为这种情况设计的[Paypal Adaptive Payments 。](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:54:57.723

使用 PHP 来响应您的回答，如果他们也有 authorize.net 帐户，您可能会这样做。PHP API 需要资金流向的商家的 api 密钥。将 Authorize.net 视为客户和您的银行账户之间的中间人，而不是像 Paypal 那样在其自己的银行账户系统中保留资金。既然是这种情况，我几乎可以肯定你不能在账户之间转账或使用你的 Authorize.net API 向某人付款。

如果您有他们的 Authorize.net API，它将在他们的卡上显示为 2 笔不同金额的单独费用，这可能不好，因为客户会认为他们被收取了两次费用。总的来说，我认为这不是明智之举。

如果您愿意，您可以使用与同一个银行帐户绑定的 Paypal 帐户，然后可能在收费完成后使用 Paypal 的 API 来分配付款。

最终，我个人认为最好的方法是向客户收取一次费用，然后想办法削减支票或向其他相关方付款。多笔小额收费和 1 笔大笔收费肯定会看起来很可疑。

任何有经验的人，如果我错了，请随时纠正我。

# http - 带有 WAI 的斐波那契 Web 服务

> ID：11551945
> 
> 赞同：3
> 
> 时间：2012-07-18T23:38:28.573
> 
> 标签：http, haskell, haskell-wai

我正在尝试使用 WAI 编写一个简单的斐波那契网络服务器，但我就是不知道类型。这段代码是我想做的事情的本质，但它被破坏了。该`getQueryArg`函数返回一个`Maybe ByteString`，我想在我的`fibHandler`函数中使用它。

1.  如何正确处理`Maybe`我的`fibHandler`?
2.  如何在 Maybe 上调用 putStrLn？我正在尝试`fmap`，但我似乎无法做到这一点。

```
{-# LANGUAGE OverloadedStrings #-}
import Network.Wai
import Network.HTTP.Types
import Network.Wai.Handler.Warp (run)
import Data.ByteString.Lazy.Char8 ()  -- Just for an orphan instance
import Control.Monad.IO.Class (liftIO)
import Data.Conduit
import Data.String.Utils
import Data.ByteString as BS (ByteString, putStrLn)
import Data.ByteString.Char8 as B (unpack)
import Data.Text as T (intercalate, pack, unpack)

app :: Application
app req
    | rawPathInfo req == "/fib" = fibHandler req
    | otherwise = notFoundHandler

fibHandler :: Request -> ResourceT IO Response
fibHandler req = do
    let nStr = getQueryArg (queryString req) "n"
    fmap (liftIO . BS.putStrLn) n
    let n = read nStr
    return $ responseLBS
        status200
        [("Content-Type", "text/plain")]
        (show $ fib n)

fib :: Int -> Int
fib n = foldl (*) 1 [1..n]

getQueryArg :: Query -> BS.ByteString -> Maybe BS.ByteString
getQueryArg [] key = Nothing
getQueryArg ((k,v):qs) key
    | k == key = Just v
    | otherwise = getQueryArg qs key

notFoundHandler :: ResourceT IO Response
notFoundHandler = return $ responseLBS
    status404
    [("Content-Type", "text/plain")]
    "Not found"

main :: IO ()
main = do
    BS.putStrLn $ "http://localhost:8080/"
    run 8080 $ app 
```

[更新：此代码的工作副本在这里：[https](https://gist.github.com/3145317) ://gist.github.com/3145317 ]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T23:57:24.327

与值有关的最简单的事情`Maybe`是使用`case`.

```
case getQueryArg foo bar of
    Nothing -> {- something went wrong, write some code to report an error -}
    Just x  -> {- everything went okay, and x is the result of the successful computation -} 
```

一旦你这样做了几十次，你就可以毕业到速记版本：

```
maybe ({- went wrong -}) (\x -> {- successful x -}) (getQueryArg foo bar)
fromMaybe {- default value -} (getQueryArg foo bar)
traverse_ B.putStrLn (getQueryArg foo bar) -- this trick is a personal favorite 
```

# c# - 使用 c#.net winforms 从 mysql 数据库中选择 - 如何检查响应？

> ID：11551947
> 
> 赞同：1
> 
> 时间：2012-07-18T23:38:45.737
> 
> 标签：c#, .net, mysql, winforms

我正在将一条记录添加到远程 mysql 数据库中，然后我想检查它是否已添加 - 所以我想尝试选择这个特定的记录。

我的代码：

```
 public void Select(string filename)
    {
        string query = "SELECT * FROM banners WHERE file = '"+filename+"'";

        //open connection
        if (this.OpenConnection() == true)
        {
            //create command and assign the query and connection from the constructor
            MySqlCommand cmd = new MySqlCommand(query, connection);

            //Execute command
            cmd.ExecuteNonQuery();

            //close connection
            this.CloseConnection();
        }
    } 
```

如何检查服务器的响应？还是选定的记录？它是 c# windows 窗体应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:51:43.143

您可以扩展您的插入语句，而不是进行另一个往返（带有额外的选择）

```
SELECT LAST_INSERT_ID(); 
```

执行你的插入命令

```
command.ExecureQuery(); 
```

并获取最后插入记录的 ID。

看看[MySQL 信息函数](http://dev.mysql.com/doc/refman/5.6/en/information-functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:42:45.220

试试这个：

```
public void Select(string filename)
{
        string query = "SELECT * FROM banners WHERE file = '"+filename+"'";

        //open connection
        if (this.OpenConnection() == true)
        {
                //create command and assign the query and connection from the constructor
                MySqlCommand cmd = new MySqlCommand(query, connection);

                //Get the DataReader from the comment using ExecuteReader
                            MySqlDataReader reader = cmd.ExecuteReader(); 
                while (myReader.Read())  
                { 
                    //Use GetString etc depending on the column datatypes.
                    Console.WriteLine(myReader.GetInt32(0)); 
                } 

                //close connection
                this.CloseConnection();
        }
} 
```

检查此 URL 了解更多信息： http: [//msdn.microsoft.com/en-us/library/haa3afyz (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/haa3afyz(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:57:40.953

您可以在运行`command.ExecuteNonQuery()`for`INSERT`语句本身时执行此操作。`command.ExecuteNonQuery()`返回受影响的行数（在您的情况下插入）。所以

```
if(command.ExecuteNonQuery()>0)
{
 //inserted
}
else
{
 //Not inserted
} 
```

[http://dev.mysql.com/doc/refman/5.1/en/connector-net-ref-mysqlclient.html#connector-net-ref-mysqlclient-mysqlcommand-executenonquery](http://dev.mysql.com/doc/refman/5.1/en/connector-net-ref-mysqlclient.html#connector-net-ref-mysqlclient-mysqlcommand-executenonquery)

# php - 预匹配以从 XML 中的所有 URL 中删除跟踪代码

> ID：11551951
> 
> 赞同：1
> 
> 时间：2012-07-18T23:39:00.980
> 
> 标签：php, regex, preg-replace

我想从 XML 文件中提取所有 url，不包括 url 中的跟踪代码：

这是一个 URL 的示例，它们都遵循相同的格式

```
http://www.domain.com.au/category/pXXXXXX?uni_id=XXXXXX&cid=1_demo_1 
```

因此，域之间唯一变化的是 XXXXXX，它是一个数值

我想要的最终结果是

```
http://www.domain.com.au/category/pXXXXXX 
```

我试图在下面的代码中使用 preg_replace 但它最终用一个随机（我认为）数字替换了整个 URL

```
$data = preg_replace('/http\:\/\/www\.domain\.com.au\/[^\?]+([^.]+)/','',$data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:45:49.573

将 XML 中的 URL 与`preg_match()`:

```
preg_match("(http://[^\s]+|ftp://[^\s]+)", $input, $matches); 
```

然后，您应该使用`preg_replace()`并且应该只匹配需要删除的字符串部分：

```
foreach($matches as $value)
{
    preg_replace("(\?[^\s]+)","",$value);
} 
```

# asp.net-mvc-3 - IIS 7+ MVC 静态内容未在登录页面上呈现（对于未经身份验证的用户）

> ID：11551956
> 
> 赞同：2
> 
> 时间：2012-07-18T23:40:17.133
> 
> 标签：asp.net-mvc-3, iis-7, forms-authentication, http-status-code-302, iis-8

我有一个登录页面页面，未经身份验证的用户应该可以使用该页面。在我本地的 ASP.Net 开发服务器上，一切正常。但是，当部署在 IIS 7 上时，所有静态内容（例如图片和脚本）都不会下载。只有当用户第一次登录时，它才会返回图片和脚本。服务器为未经身份验证的用户返回 HTTP 302。我正在使用表单身份验证和 ASP.Net 会员提供程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T23:40:17.133

**第 1 步：** 确保已在 web.config（内部）中为“匿名身份验证”启用了相应的目录（MVC 默认为“内容”和“脚本”），例如：

```
<location path="Content">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location>
<location path="Scripts">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

**第 2 步：** 检查“IUSR”内置帐户是否具有对这些目录的读取权限。默认情况下，此用户用于所有匿名请求。

*注意：*您可以通过编辑 C:\Windows\System32\inetsrv\config 中的 applicationHost.config 来更改用于匿名访问的帐户。在 64 位机器上，此文件只能由 64 位应用程序（即不是 Visual Studio）编辑。记事本很好用。确保在编辑之前进行备份。您正在寻找下一行：

```
<anonymousAuthentication enabled="true" userName="IUSR" /> 
```

# java - 同步块可以比原子更快吗？

> ID：11551963
> 
> 赞同：8
> 
> 时间：2012-07-18T23:41:12.100
> 
> 标签：java, concurrency, java.util.concurrent

假设以下两个计数器实现：

```
class Counter {
  private final AtomicInteger atomic = new AtomicInteger(0);
  private int i = 0;

  public void incrementAtomic() {
    atomic.incrementAndGet();
  }

  public synchronized void increment() {
    i++;
  }
} 
```

乍一看，原子应该更快，更具可扩展性。他们是，我相信。但是它们总是比`synchronized`块快吗？或者当这个规则被打破时存在一些情况（例如SMP/单CPU机器，不同的CPU ISA，操作系统等）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T00:48:30.167

`incrementAndGet`可以很好地实现为 CAS 循环。在高度满足的情况下，可能导致*n* -1 个线程失败，从而导致 O( *n* ) 问题，对于*n 个*线程。

（对于@Geek：

通常`getAndIncrement`可以实现如下：

```
 int old;
 do {
     old = value;
 } while (!compareAndSet(value, old, old+1));
 return old; 
```

想象一下，您有*n 个*线程在同一个原子上执行此代码，并且它们恰好彼此同步。第一次迭代确实*有效*。只有一个 CAS 会成功。其他*n* -1 个线程将重复该练习，直到只剩下一个。所以总工作量是 O( *n* ^2)（最坏情况）而不是 O( *n* )。)

话虽如此，获取锁最多需要做类似的事情，而锁在激烈竞争时并不是最好的。在使用 CAS 循环之前，您不太可能看到锁有太多优势，这需要在 get 和 compareAndSwap 之前进行大量计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T00:00:34.167

> 或者当这个规则被打破时存在一些情况（例如SMP/单CPU机器，不同的CPU ISA，操作系统等）？

我一个都不知道。（我随时准备被纠正......如果有人知道一个具体的反例。）

但是（这是我的主要观点）没有*理论上*的理由为什么您不能拥有与类型`synchronized`相同或更快的硬件架构或实现不佳的 JVM `atomic`。（这两种同步形式的相对速度是一个*实现*问题，因此只能针对现有实现进行量化。）

当然，这并不意味着你永远不应该使用`synchronized`. 该`synchronized`构造有许多原子类没有解决的用例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T00:30:53.303

它依赖于实现——所以最终你需要在你的特定平台/JVM/配置上进行基准测试。

话虽如此，由于以下原因，原子*应该*总是更快：

*   原子的设计使 JVM 可以利用原子机器指令，这是大多数平台上最快的原子操作
*   `synchronized`对监控对象使用相对重量级的锁定方案，旨在保护潜在的大代码块。这种形式的锁定本质上比原子操作更复杂，因此您会期望它具有更高的运行时成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T07:55:11.340

正如其他人所说，这取决于实现。但请记住，如果您的程序不变量涉及多个变量，那么您**必须使用同步**来一起更新它们。您不能仅仅因为它们是原子类型就对两个相关变量一起进行原子操作。在这种情况下，您唯一的朋友是同步的。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-18T23:57:11.483

原子变量总是更快。

你可以看到 java.util.concurrent 包总是使用原子变量而不是同步块。

# php - 在 cron 作业和网站中包含带有 sub 的 php 文件

> ID：11551965
> 
> 赞同：0
> 
> 时间：2012-07-18T23:41:24.760
> 
> 标签：php, cron, require-once

我有一个网站使用一堆类，这些类都保存在单独的 PHP 文件中，其中一些文件子包含额外的类文件，如下所示：

> require_once($_SERVER['DOCUMENT_ROOT'].'/../models/database.model.php');

问题是我想运行一个使用同一组类文件的 cron 作业，但是当我执行子包含类文件的路径时会中断。

如何为包含的类文件指定路径，以便它们适用于我的网站和任何 cron 作业？

cron作业的路径：

> $HOME/bin/updatephotos.php

上课路径：

> $HOME/模型/....

公共网络根路径：

> $HOME/www/...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:55:29.400

您可以使用绝对路径解决

```
require_once(__DIR__ . '/../models/database.model.php'); 
```

另一种方法是使用一点（丑陋的）hack：您可以自己填充 $_SERVER['DOCUMENT_ROOT']

```
if (empty($_SERVER['DOCUMENT_ROOT'])) {
    $_SERVER['DOCUMENT_ROOT'] = __DIR__ . '/../www';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:20:05.060

经过进一步研究，我找到了以下解决方案：

```
function __autoload($class_name) {
    require_once realpath(dirname(__FILE__).'/../models/'.$class_name.'.model.php');
} 
```

这适用于我的 cron 工作和网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:33:47.147

您的包含框架正在将系统变量用于不打算用于的用途。它应该声明其他包含文件使用的自己的常量。然后你可以在一个中心位置声明它，最好是在你的框架的主要包含点。

# workflow-foundation-4 - WF4 - 复合自定义活动在使用 OutArgument 时抛出一个奇怪的异常

> ID：11551971
> 
> 赞同：1
> 
> 时间：2012-07-18T23:41:45.330
> 
> 标签：workflow-foundation-4, workflow-foundation, workflow-activity

我正在尝试使用应用正则表达式并在匹配时返回布尔值的复合自定义活动。模式是在设计时编码的东西。源文本来自一个活动。此活动也在设计时指定（我制作了一个允许将活动作为源删除的活动设计器）

但是我还需要返回与表达式匹配的子字符串，所以我添加了一个 OutArgument 来检索匹配的字符串，并捕获字符串。

这是代码：

```
public class RegularExpression : NativeActivity<bool>
{
    [RequiredArgument]
    public string Pattern { get; set; }

    public OutArgument<string> Captured { get; set; }

    [RequiredArgument]
    public Activity<string> RetrieveTextActivity { get; set; }

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        metadata.AddChild(this.RetrieveTextActivity);
    }

    protected override void Execute(NativeActivityContext context)
    {
        if (this.RetrieveTextActivity != null)
            context.ScheduleActivity<string>(this.RetrieveTextActivity, this.onRetrieveComplete);
    }

    private void onRetrieveComplete(NativeActivityContext context, ActivityInstance completedInstance, string result)
    {
        var regexp = new Regex(this.Pattern);
        var match = regexp.Match(result);

        this.Result.Set(context, match.Success);
        if (this.Captured != null)
            this.Captured.Set(context, match.Value);
    }
} 
```

如果我在*没有*将变量绑定到 Captured 参数的情况下执行此活动，它会按预期工作（正确设置了结果）。
但是如果我使用设计器添加一个变量，那么我将变量绑定到 Captured 参数这个错误弹出窗口：

> 不能使用“System.String”类型的参数。确保它在活动中声明。

执行此行时抛出异常：

```
this.Captured.Set(context, match.Value); 
```

有人知道为什么我不能设置参数吗？
我还读到我不应该测试 Captured 是否为空，运行时应该自动设置默认值。但是如果我不测试，当我没有将变量绑定到参数时，我有一个 NullReference ......

编辑：
我想添加有关工作流程本身的更多信息。我在[另一个主题](http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/298861e2-3535-4961-b7b5-3b3275958cca/)中读到它*可能*是 VS。在这里，我只想指定我正在使用重新托管的设计器来创建工作流（而*不是*VS）。然后，工作流以 XML 格式保存在数据库中。
当我需要启动一个新的工作流时，我会读取数据库，使用 XamlService.Load 并运行创建的工作流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:57:22.113

如果您在 中声明参数，错误会消失`CacheMetadata`吗？

```
protected override void CacheMetadata(NativeActivityMetadata metadata)
{
    metadata.AddChild(this.RetrieveTextActivity);

    RuntimeArgument argument = new RuntimeArgument("Captured", typeof(string), ArgumentDirection.Out);
    metadata.Bind(this.Captured, argument);
    metadata.AddArgument(argument);

} 
```

编辑：我太快了。上面的代码现在应该可以编译并有望解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-11T06:48:25.773

当我在添加后调用 base.CachMetadata(metadata) 时，我的问题就消失了。尝试：

```
protected override void CacheMetadata(NativeActivityMetadata metadata)
{
    metadata.AddChild(this.RetrieveTextActivity);
    base.CacheMetadata(metadata);
} 
```

您想在添加后执行此操作，因为您希望基类在您调用它时知道您添加了什么。我认为基类使用反射自动为您完成 Damir Arh 的回答。这样，您不必在每次添加或修改属性时都添加或修改所有代码。如果你有很多属性，它会很快变得很痛苦。

# java - OOP类设计

> ID：11551973
> 
> 赞同：3
> 
> 时间：2012-07-18T23:41:52.233
> 
> 标签：java, oop, if-statement

我的问题涉及 OOP 中的类设计。假设我们有 ItemBase，它是 Canceled、Modified 和 Additional 类的父类。我们还有 DueToBase 类——Provider 和 Distributor 的父类。

* * *

![简单图](../Images/a0355ec7cd8f5aecdfd314cc02d15a45.png)

* * *

ItemBase 可能会因 DueToBase 类而改变。

假设 ItemBase 具有 DueToBase 类型的属性，而 DueToBase 具有称为 compute() 的接口方法。计算算法与特定的**ItemBase**派生类相关。所以我们有六种不同的可能的 ItemBase-DueToBase 关系组合。

例子。

```
ItemBase ib = new Added();
ib.changed = new Provider(ib);
ib.changed.compute(); 
```

我的问题是如何在真正的面向对象编程中构建 ItemBase 和 DueToBase 之间的关系？我没有在计算方法中看到 swich/case 或 if 条件子句来检查 ItemBase 是哪种类型的实例。如果 DueToBase 有另一个 XXXBase 类，其中有另一个接口方法 YYY() ，则情况会变得更糟，该方法依赖于 DueToBase 的特定实例（甚至依赖于 ItemBase）。如何处理此类情况？这些事情有什么好的编程模式吗？也许我遵循的方向很糟糕。我会很感激你的帮助。

也许我的图表不清楚。问题在于以下...伪代码：

```
doSomething(){
   if(itemBase instanceof Cancelled){
      if(dueToBase instanceof Provider)
         algorithm1();
      else if(dueToBase instanceof Company)
         algorithm2();
   }else if(itemBase instanceof Modified){
      if(dueToBase instanceof Provider)
         algorithm3();
      else if(dueToBase instanceof Company)
         algorithm4();
   }else if(itemBase instanceof Added){
      if(dueToBase instanceof Provider)
         algorithm5();
      else if(dueToBase instanceof Company)
         algorithm6();
   }
} 
```

如果使用更深的 if 子句，情况会变得更糟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:45:41.217

你的`ItemBase`类可以是一个包含`compute()`方法的抽象类，所有子类都可以有自己的实现。

所以以后你可以做这样的事情，

```
ItemBase ib = new Added();
ib.changed = new Provider(ib);
ib.changed.compute(); 
```

现在，当您调用计算方法时`ib.changed`，它将执行`Added`类的计算实现。

* * *

在您的情况下，由于基类，添加一个区分`Provider`和的实例变量`Company`。像`boolean`旗帜或`int`.

`dueToBase instanceof Provider`然后，您可以创建 if 语句，而不是使用。所以你更新的伪代码将减少到几行。像这样的东西，

```
doSomething(){
      if(dueToBase.isProvider) {
         algorithm1(); //execute if Provider
      } else { 
         algorithm2(); //execute if Company
      }
} 
```

现在选择计算的复杂性将由抽象模式处理，然后您只需要担心它是公司还是提供商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:37:12.203

我会说策略模式

```
abstract class ItemBase {
  public DueToBase myDueToBase;
  public void partOfTheAlgorithmThatOnlySpecificIBKnows();
}

class Modified extends ItemBase {
  public void partOfTheAlgorithmThatOnlySpecificIBKnows() {
     //stuff only Modified knows
  }
}

abstract class DueToBase {
    public void partOfTheAlgorithmThatOnlySpecificDTBKnows();
}

class Provider extends DueToBase {
 //relevant code
  public ItemBase myItemBase;
  public void partOfTheAlgorithmThatOnlySpecificDTBKnows(){
       //stuff only provider knows
  }

  public void compute() {
       //you can also pass this but pointless since you all ready have the reference
       myItemBase.partOfTheAlgorithmThatOnlySpecificIBKnows();
       //some more code
  }
}

ItemBase ib = new Added();
ib.changed = new Provider(ib);
ib.changed.compute(); 
```

在示例中，这将调用：

```
1\. compute on Provider
2\. part of the algorithm that Modified knows how to calculate
3\. rest of the code for the algorithm 
```

因此，在`compute`函数中，您拥有继承类所需的所有特定方法，并且您可以改变`compute()`函数中的算法。

如果这不能解决您的问题，您可能只需要按照 Owl 所说的那样考虑需求的新设计。

* * *

也没有 ifs，但有更多的方法可以让你对 ifs 做同样的事情，你只是让继承机制为你做这件事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-30T13:32:37.893

你可以这样做：

```
interface Algorithm {
    void executeAlgorithm(DueToBase dueToBase);
} 
```

并有地图

```
Map<Class, Algorithm> algorithmMap = new HashMap<Class, Algorithm>(); 
```

每个算法都有课程

例如：

```
/**
  * this class is, for example, when itemBase instanceof Cancelled 
  */
class Algorithm1 implements Algorithm {

    public void executeAlgorithm(DueToBase dueToBase) {
        if ( dueToBase instanceof Provider ) {
            someAlgorithm();  // the algorithm specified somewhere, for provider
        } else if ( dueToBase instanceof Company ) {
            anotherAlgorithm(); // the algorithm or Company.
    }

    // this someAlgorithm() and anotherAlgorithm() are not same for different Algorithm classes
} 
```

您必须在某个地方构建 algorithmMap。

```
algorithmMap.add( Cancelled.class , new Algorithm1() );
algorithmMap.add( Modified.class , new Algorithm2() );
algorithmMap.add( Added.class , new Algorithm3() ); 
```

在 doSomething 方法中，您不必编写 if-else 块

```
doSomething() {
    Algorithm algorithm = algorithmMap.get( itemBase.getClass() );

    algorithm.executeAlgorithm(dueToBase);
} 
```

在我看来，这是这个问题的一个很好的 oop 解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-04T11:24:33.283

更好的方法是：

```
interface Algorithm {

    void executeAlgorithm();

} 
```

并具有实现算法接口的类，而不是函数。算法 1、算法 2、算法 3 等等。

并有表：

```
Algorithm[,] algorithmTable = { { new Algorithm1(), new Algorithm2() },
                                { new Algorithm3(), new Algorithm4() },
                                { new Algorithm5(), new Algorithm6() }
                              }; 
```

并有地图

```
Map< Class<?> , Integer > itemBaseMap = new HashMap<>();

Map< Class<?> , Integer > dueToBaseMap = new HashMap<>(); 
```

并在某处构建此地图

```
itemBaseMap.add( Canceled.class , 0 );
itemBaseMap.add( Modified.class , 1 );
itemBaseMap.add( Added.class , 2 );

dueToBaseMap.add( Provider.class, 0 );
dueToBaseMap.add( Company.class, 1 ); 
```

在 doSomething 方法中，您可以编写

```
void doSomething( ItemBase itemBase, DueToBase dueToBase ) {
    Integer itemBaseIndex = itemBaseMap.get( itemBase.getClass() );
    Integer dueToBaseIndex = dueToBaseMap.get( dueToBase.getClass() );

    Algorithm algorithm = algorithmTable[ itemBaseIndex, dueToBaseIndex ];

    algorithm.executeAlgorithm();
} 
```

# arrays - Perl 语法和可读性——在数组引用中查找元素

> ID：11551975
> 
> 赞同：2
> 
> 时间：2012-07-18T23:41:52.670
> 
> 标签：arrays, perl, reference

这个问题涉及 Perl 的可读性和良好实践。我做了一些检查：

*   如果我有变量 $array_ref，我只需要知道该数组是否至少有一个元素等于文本“匹配”。$array_ref 可能未定义，或者，如果 $array_ref 已定义，则它引用的数组为空（甚至未定义？这可能吗？）

*   我检查一个标量是否等于 1

*   我检查另一个标量是否等于“是”

这是我正在使用的当前代码：

```
 my $is_compatible = $array_ref and defined grep $_ eq 'match', @{$array_ref}
                     and $my_num = 1 and $my_text eq 'yes'. 
```

可以将其修复为更容易更改和阅读吗？此外，它是否适合 $array_ref 的值的所有可能用例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T01:06:44.703

从不使用开始`and`。您想坚持使用符号运算符来获得它提供的视觉提示。命名运算符通常出现在找到术语的地方，并且`and`通常`or`用于流量控制。这两个提示在这里都是错误的，所以你不想给出这些提示。

下面的安排很容易阅读。证据是，您在本`=`应使用的地方使用了`==`.

```
my $is_compatible = ( $array && grep $_ eq 'match', @$array )
    && $my_num == 1
    && $my_text eq 'yes'; 
```

如果您想使用 sub，以下就足够了。

```
sub is_compatible {
   my ($array, $my_num, $my_text) = @_;
   return 0 if !$array || !grep $_ eq 'match', @$array;
   return 0 if $my_num != 1;
   return 0 if $my_text ne 'yes';
   return 1;
} 
```

这两种方法都使相似的事物看起来相似而不同的事物看起来不同，从而实现了极其有效的代码扫描。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T23:53:47.143

```
sub is_compatible {
   my $array_ref = shift;
   defined( $array_ref )
       or return;
   ref $array_ref eq ref []
       or return;
   return unless grep $_ eq 'match', @$array_ref;

   my $my_num = shift;
   $my_num == 1
       or return;

   my $my_text = shift;
   $my_text eq 'yes'
       or return;

   return 1;
} 
```

# c# - 希望在 WPF 中将实时网页显示为 3d 对象上的纹理

> ID：11551979
> 
> 赞同：3
> 
> 时间：2012-07-18T23:42:22.080
> 
> 标签：c#, wpf, binding, awesomium, imagebrush

我将[http://awesomium.com/](http://awesomium.com/) (1.7 RC2) 用于 webview，将[http://perspective.codeplex.com/](http://perspective.codeplex.com/)用于 3d 对象。

XAML：

```
<p:Workshop3D>
    <p:Spherical3D ParallelCount="30" DefaultTextureMapping="True">
        <p:Spherical3D.Material>
            <DiffuseMaterial>
                <DiffuseMaterial.Brush>
                    <ImageBrush TileMode="None" Stretch="Fill" 
                                ImageSource="{Binding Path=WebTexture, ElementName=MyWpfWindow}" />
                </DiffuseMaterial.Brush>
            </DiffuseMaterial>
        </p:Spherical3D.Material>
    </p:Spherical3D>
</p:Workshop3D> 
```

代码背后：

```
public MainWindow()
{
    _webView = WebCore.CreateWebView(800, 600);
    _webView.LoadURL(new Uri(@"http://www.youtube.com"));

    while (_webView.IsLoading)
        WebCore.Update();

    var buffer = (BitmapSurface)_webView.Surface;
    var bitmap = new WriteableBitmap(800, 600, 96, 96, PixelFormats.Bgra32, null);
    buffer.CopyTo(bitmap.BackBuffer, 800, 4, false, false);

    WebTexture = bitmap;

    InitializeComponent();
}

private ImageSource _webTexture;
public ImageSource WebTexture
{
   get
   {
      return _webTexture;
   }
   set { _webTexture = value; RaisePropertyChanged("WebTexture"); }
} 
```

出于某种原因，甚至没有调用 WebTexture 的 get 访问器，所以我猜我在这里遗漏了一些东西（2 小时的 google/bing/duckduckgo 也没有带来任何东西）。

# iphone - Xcode 错误消息 - ViewController 没有可见的@interface 声明选择器

> ID：11551984
> 
> 赞同：1
> 
> 时间：2012-07-18T23:42:44.870
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

我有一个非常简单的方法，它允许我指定 UIButton 的名称，然后设置它的标题。我以前在我的主 ViewController 中有该方法，它运行良好。但后来我决定创建一个名为 CustomMethods.h/m 的新文件，并将我所有的方法都放在那里。

一旦我将方法移过并将#import标头导入主视图控制器，我就会收到以下错误消息

```
No visible @interface for ViewController declares the selector 'SetTitleOfButtonNamed:withTitle:' 
```

在我的 CustomMethods 文件中，我创建了如下方法：

```
-(void)setTitleOfButtonNamed:(UIButton *)button withTitle:(NSString *)buttonTitle
{
    [button setTitle:buttonTitle forState:(UIControlStateNormal)];
} 
```

在主 ViewController 的 viewDidLoad 中，我尝试调用此方法并将按钮标题设置如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *btnOneTitle = @"Button 1";
    [self setTitleOfButtonNamed:buttonOne withTitle:btnOneTitle]; // ERROR OCCURS HERE
} 
```

在我将该方法复制到它自己的文件中之前，它运行良好。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:57:36.787

您仍然在 ViewController 的“self”上调用 setTitleOfButtonNamed。您现在需要从实现该方法的 CustomMethods 类中调用它。

```
[self setTitleOfButtonNamed:buttonOne withTitle:btnOneTitle]; 
```

# java - Java：.nextLine() 和 .nextDouble() 区别

> ID：11551985
> 
> 赞同：4
> 
> 时间：2012-07-18T23:42:46.600
> 
> 标签：java, methods

`.nextLine()`我正在阅读 Java 的 API，因为我对和之间的区别有疑问`.nextDouble()`。在 API 中，它为`.nextLine()`：

> “将此扫描器前进到当前行并返回已跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。”

很简单......它会跳过您所在的当前行，然后返回您刚刚跳过的行。但是对于`.nextDouble()`，它是这样说的：

> “将输入的下一个标记扫描为双精度值。如果下一个标记无法转换为有效的双精度值，则此方法将抛出 InputMismatchException。如果转换成功，扫描仪会超过匹配的输入。”

那么这是否意味着它`.nextDouble()`不会跳到新行并且它只读取到双精度数的末尾然后在行尾停止？这将有助于我理解我现在正在开发的程序。谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T23:48:43.820

它读取下一个标记（在 2 个分隔字符之间，通常是白色字符），而不是接下来的 4 个字节。然后，如果可以的话，它会将该标记转换为双精度。

```
Ex: Bla bla bla 12231231.2121 bla bla. 
```

可以使用 nextDouble() 读取第 4 个令牌。它读取 13 个字符，并尽可能将该字符串转换为双精度字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:45:08.317

```
nextDouble() 
```

仅从构成双精度的输入流中读取接下来的 4 个字节，并且不会前进到下一行，而 nextLine() 会。另外我认为您需要了解字符串'\ n'指定了一个新行，并且显然一个数字不会包含换行符，因此'nextDouble（）'不会'前进'到下一行。

编辑：拉兹万是对的

# c - GCC 在初始化器周围缺少大括号

> ID：11551986
> 
> 赞同：32
> 
> 时间：2012-07-18T23:42:59.293
> 
> 标签：c, gcc, gcc-warning

我在下面的 C 中有这个结构，我想将其初始化为零。如何摆脱缺少大括号的警告？

```
typedef struct {
    uint32_t incoming[FRAME_TYPE_MAX];
    uint32_t outgoing[FRAME_TYPE_MAX];
    uint32_t timeouts;
    uint32_t crc_errors;
} pkt_t;

static pkt_t stats = {0}; 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-19T00:37:14.200

这是 GCC 错误 #53119：

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53119](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53119)

如果您希望看到它已修复，请在错误报告中发布后续内容，表明这对您来说是个问题。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-19T00:06:27.730

由于结构中的第一个成员是您需要的数组：

```
static pkt_t stats = {{0}}; 
```

外大括号用于结构，内大括号用于数组。但是，还有许多其他方法可以给这只猫剥皮。（例如，静态已经初始化为零）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T23:56:17.890

如果它是全局变量或局部静态变量，它会自动初始化。所以，简单地说：

```
static pkt_t stats; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-18T23:50:13.143

One way is to initialize every member of the struct inside the braces, rather than relying on the implicit zero filling. For array members, you need another {} which is likely causing the warning. Another is to just disable the warning, though this isn't recommended as it can also catch legitimate bugs.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-17T18:20:15.847

```
#define FRAME_TYPE_MAX 3

typedef struct {
    uint32_t incoming[FRAME_TYPE_MAX];
    uint32_t outgoing[FRAME_TYPE_MAX];
    uint32_t timeouts;
    uint32_t crc_errors;
} pkt_t;

static pkt_t stats1= { .incoming={5,6,20},
                       .outgoing={0,0,0},
                       .timeouts=0,
                       .crc_errors=0
                       };

static pkt_t stats2= { {5,6,20},
                       {0,0,0},
                       0,
                       0
                       };

static pkt_t stats3= {{0}};

pkt_t stats4 ;   // global

int main(void)
{

    stats1.incoming[0]= 35;
    stats1.timeouts=25;
    stats2.incoming[2]=10;  
    stats3.outgoing[2]=10;  
    stats4.timeouts=10;
    for (;;);
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-02T23:57:15.310

设置这个 gcc 编译器标志：-Wno-missing-braces

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-16T09:02:36.410

如果您仍然对忽略此错误警告的 g​​cc 版本感到高兴，那么在问题中使用这样的结构，您可以通过一些简单的重组来避免这个问题，如下所示：

```
typedef struct {
    uint32_t timeouts;
    uint32_t crc_errors;
    uint32_t incoming[FRAME_TYPE_MAX];
    uint32_t outgoing[FRAME_TYPE_MAX];
} pkt_t;

static pkt_t stats = {0}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-18T23:58:55.860

来自“信息 gcc”

> 作为 GNU 扩展，GCC 允许通过复合文字初始化具有静态存储持续时间的对象（这在 ISO C99 中是不可能的，因为初始化器不是常量）。如果复合文字和对象的类型匹配，则它的处理就像对象仅使用括号括起来的列表进行初始化一样。复合文字的初始化列表必须是常量。如果正在初始化的对象具有未知大小的数组类型，则大小由复合文字大小确定。

```
 static struct foo x = (struct foo) {1, 'a', 'b'};
 static int y[] = (int []) {1, 2, 3};
 static int z[] = (int [3]) {1}; 
```

> 以上几行等价于以下内容：

```
 static struct foo x = {1, 'a', 'b'};
 static int y[] = {1, 2, 3};
 static int z[] = {1, 0, 0}; 
```

您可以组合这些初始化程序以允许对数组进行特定于 gcc 的初始化，而无需指定数组中的每个元素。或者...您可以设置一个标志并在运行时在必要时对其进行初始化，或者...您可以发现变量是否在 BSS 中并且可能会自动归零（这是在函数的堆栈上还是在全局内存中）。

# python - python鼻子如何设置动态--xunit-file name

> ID：11551988
> 
> 赞同：1
> 
> 时间：2012-07-18T23:43:00.430
> 
> 标签：python, nose, xunit

如何设置`--xunit-file`结果文件以测试脚本的名称和当前目录名称命名？

我正在像这样运行我的测试：

```
[dir_name]$ nosetests --with-xunit --xunit-file=???? test/test_file_name.py 
```

`dir_name`理想情况下，xml 可以以和命名`test_file_name`。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T23:40:13.270

这是我放在一起的：

1）因为我在 shell 脚本中执行此操作，所以我可以访问 string `test/test_file_name.py`。我`--xunit-file=`根据我的测试脚本的名称设置

`dir_name`2）后处理I：为xml文件添加前缀

3）后处理II：在每个xml文件中，修改所有的`classname="class_name"`以包含`dir_name`，像这样，`classname="dir_name_class_name`

最后一步是必要的，因为我发现只修改 xml 文件名不起作用。要正确显示结果（在 Jenkins 中），还需要修改所有类名。

# c# - 当页面在多个选项卡中打开时，SignalR 站点未保持同步

> ID：11551993
> 
> 赞同：0
> 
> 时间：2012-07-18T23:43:49.977
> 
> 标签：c#, asp.net, asp.net-mvc, signalr

我正在完成一个 SignalR 演示，该演示在按下按钮时在列表中显示数据库信息。

My Hub 有两个功能：一个是从列表中删除数据库对象，另一个是重新添加数据库对象到该列表。

这些功能在我的视图中执行，并且在我只打开一次页面时执行得很好。但是如果我在另一个选项卡中打开页面（可以是相同的浏览器或不同的浏览器），页面不会保持同步。意思是，当一个页面的按钮被点击时，另一个页面没有正确显示数据。

通常一个页面会很好，而另一个页面会执行删除而不是添加！这令人难以置信。根据我的理解，它们应该只是彼此的反映。

有没有其他人遇到过类似的事情？提前感谢您的帮助！

这是我的集线器：

```
[HubName("hubtest")]
public class HubTest : Hub
{
    CmsContext db = new CmsContext();

    public void showdata()
    {
        var f = from x in db.Data
                select x;
        Clients.remove();

        Clients.add(f);
    }
} 
```

这是我的功能视图中的javascript：

```
<script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.signalR-0.5.2.min.js" type="text/javascript"></script>
<script src="/signalr/hubs" type="text/javascript"></script>
<script type="text/javascript">

$(function () {
    var hubtest = $.connection.hubtest;

    hubtest.remove = function () {
        //clear list of any prior values
        var list = document.getElementById('dataList');
        while (list.hasChildNodes()) {
            list.removeChild(list.childNodes[0])
        }
    };

    hubtest.add = function (data) {
        //populate with updated values
        for (var i = 0; i < data.length; i++) {
            var element = data[i];
            $('#dataList').append('<li>' + element.Question + '</li>');
        }

    };

    $("#broadcast").click(function () {
        hubtest.showdata();

    });

    // Start the connection
    $.connection.hub.start();
});
</script> 

<input type="button" id="broadcast" value="broadcast" />
<ul id="dataList">
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:32:43.400

首先感谢您的回复。我非常感谢您的反馈！
通过改变我的数据发送到视图的方式，我最终得到了在多个选项卡中打开时我的页面保持同步的位置。我在我的 Javascript 中执行 for 循环以显示每条数据，现在我在我的集​​线器中这样做：

```
[HubName("hubtest")]
public class HubTest : Hub
{
    CmsContext db = new CmsContext();

    public void showdata()
    {
        Clients.clearlist();
        var faqs = from x in db.Faqs
                select x;
        foreach (Faq faq in faqs)
        {
            Clients.add(faq.Question.ToString());
        }
    }
} 
```

然后我的 Javascript 只是将该常见问题解答问题附加到列表中：

```
$(function () {
    var hubtest = $.connection.hubtest;

    hubtest.clearlist = function () {
        var list = $('#datalist');
        list.empty();
    };

    hubtest.add = function (data) {            
        $('#datalist').append('<li>' + data + '</li>');
    };

    $("#broadcast").click(function () {
        hubtest.showdata();
    });

    // Start the connection
    $.connection.hub.start();
}); 
```

仅发送要单独打印的简单数据字符串似乎可以使我的页面保持同步。在我发送的数据之前是一个数据库对象列表，我的 Javascript 循环遍历每个对象并将该对象的问题列添加到列表中。不知道为什么会出现这样的问题 - 特别是因为它可以在一个打开的选项卡上工作，但不能在**所有**打开的选项卡上工作 - 但这个简单的更改解决了我的站点同步问题。
再次感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:19:46.780

试试这个：

```
<script type="text/javascript">
    $(function () {
        var hubtest = $.connection.hubtest;

        hubtest.add = function (data) {
            //clear the values first.
            var list = $('#dataList');
            list.empty();

            //populate with new values
            for (var i = 0; i < data.length; i++) {
                var element = data[i];
                list.append('<li>' + element.Question + '</li>');
            }

        };

        $("#broadcast").click(function () {
            hubtest.showdata();

        });

        // Start the connection
        $.connection.hub.start();
    });
</script> 
```

和这个：

```
[HubName("hubtest")]
public class HubTest : Hub
{
    TestDatabaseEntities db = new TestDatabaseEntities();

    public void showdata()
    {
        var f = from x in db.FAQs
                select x;

        Clients.add(f);
    }
} 
```

# python - 为什么我们需要 Python 中的“finally”子句？

> ID：11551996
> 
> 赞同：428
> 
> 时间：2012-07-18T23:44:40.560
> 
> 标签：python, exception-handling, try-finally

我不确定为什么我们需要`finally`在`try...except...finally`语句中。在我看来，这个代码块

```
try:
    run_code1()
except TypeError:
    run_code2()
other_code() 
```

与此相同，使用`finally`：

```
try:
    run_code1()
except TypeError:
    run_code2()
finally:
    other_code() 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：567
> 
> 时间：2012-07-18T23:46:02.240

如果你早点回来，情况会有所不同：

```
try:
    run_code1()
except TypeError:
    run_code2()
    return None   # The finally block is run before the method returns
finally:
    other_code() 
```

与此相比：

```
try:
    run_code1()
except TypeError:
    run_code2()
    return None   

other_code()  # This doesn't get run if there's an exception. 
```

其他可能导致差异的情况：

*   如果在 except 块内引发异常。
*   如果抛出异常`run_code1()`但不是`TypeError`.
*   其他控制流语句，如`continue`和`break`语句。

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2012-07-18T23:51:20.630

You can use `finally` to make sure files or resources are closed or released regardless of whether an exception occurs, *even if you don't catch the exception.* (Or if you don't catch that *specific* exception.)

```
myfile = open("test.txt", "w")

try:
    myfile.write("the Answer is: ")
    myfile.write(42)   # raises TypeError, which will be propagated to caller
finally:
    myfile.close()     # will be executed before TypeError is propagated 
```

In this example you'd be better off using the `with` statement, but this kind of structure can be used for other kinds of resources.

A few years later, I wrote [a blog post](http://www.engyrus.com/2015/03/spt-4-there-is-no-try.html) about an abuse of `finally` that readers may find amusing.

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-07-18T23:46:12.380

它们不是等价的。`finally`无论发生什么其他情况，代码都会运行*。它对于清理必须运行的代码很有用。

* * *

*****：正如[Mark Byers](https://stackoverflow.com/users/61974/mark-byers)评论的那样，任何导致进程立即终止的事情也会阻止`finally`-code 运行。后者可能是`os._exit().`断电或断电，但无限循环或其他东西也属于该类别。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2017-12-13T06:46:06.257

要添加到上面的其他答案，该`finally`子句无论如何都会执行，而该`else`子句仅在未引发异常时才执行。

***例如，写入没有异常的文件将输出以下内容：***

```
file = open('test.txt', 'w')

try:
    file.write("Testing.")
    print("Writing to file.")
except IOError:
    print("Could not write to file.")
else:
    print("Write successful.")
finally:
    file.close()
    print("File closed.") 
```

**输出：**

```
Writing to file.
Write successful.
File closed. 
```

***如果出现异常，代码将输出以下内容，（注意故意错误是由于保持文件为只读而导致的。***

```
file = open('test.txt', 'r')

try:
    file.write("Testing.")
    print("Writing to file.")
except IOError:
    print("Could not write to file.")
else:
    print("Write successful.")
finally:
    file.close()
    print("File closed.") 
```

**输出：**

```
Could not write to file.
File closed. 
```

我们可以看到`finally`无论是否有异常，该子句都会执行。希望这可以帮助。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-12-03T13:20:56.213

如[文档](https://docs.python.org/3/reference/compound_stmts.html#finally)中所述，该子句旨在定义**在所有情况下都**`finally`必须执行的清理操作。

 **> 如果`finally`存在，它指定一个“清理”处理程序。该`try` 子句被执行，包括任何`except`和`else`子句。如果任一子句发生异常且未处理，则暂时保存该异常。`finally`子句被执行。`finally` 如果存在已保存的异常，则会在子句末尾重新引发。

一个例子：

```
>>> def divide(x, y):
...     try:
...         result = x / y
...     except ZeroDivisionError:
...         print("division by zero!")
...     else:
...         print("result is", result)
...     finally:
...         print("executing finally clause")
...
>>> divide(2, 1)
result is 2.0
executing finally clause
>>> divide(2, 0)
division by zero!
executing finally clause
>>> divide("2", "1")
executing finally clause
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in divide
TypeError: unsupported operand type(s) for /: 'str' and 'str' 
```

如您所见，该`finally`子句在任何情况下都会执行。该子句`TypeError`不处理通过划分两个字符串引发的引发`except`，因此在执行该子句后重新引发`finally`。

在现实世界的应用程序中，finally 子句对于释放外部资源（如文件或网络连接）很有用，无论资源的使用是否成功。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-18T23:46:36.663

代码块不等价。如果抛出除 之外的异常，或者如果抛出异常，该`finally`子句也将运行，而在第一个版本中，在这些情况下不会运行。`run_code1()``TypeError``run_code2()``other_code()`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-07-18T23:47:41.467

In your first example, what happens if `run_code1()` raises an exception that is not `TypeError`? ... `other_code()` will not be executed.

Compare that with the `finally:` version: `other_code()` is guaranteed to be executed regardless of any exception being raised.

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2021-08-09T10:05:10.800

这是一段代码来澄清差异：

```
...

try: 
  a/b
  print('In try block')

except TypeError:
  print('In except block')

finally: 
  print('In finally block')

print('Outside') 
```

* * *

`a, b = 0, 1`

输出：

```
In try block 
In finally block 
Outside 
```

（没有错误，除了跳过了块。）

* * *

`a, b = 1, 0`

输出：

```
In finally block

Traceback (most recent call last):
a/b
ZeroDivisionError: division by zero 
```

（没有为 ZeroDivisionError 指定异常处理，**只执行 finally 块。**）

* * *

`a, b = 0, '1'`

输出：

```
In except block 
In finally block 
Outside 
```

（异常处理妥当，程序不中断。）

* * *

注意：如果您有一个*except*块来处理所有类型的错误，那么*finally*块将是多余的。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-03-16T06:12:18.040

多年来，专业地使用 delphi 教会了我使用 finally 来保护我的清理程序。Delphi 几乎强制使用 finally 来清理在 try 块之前创建的任何资源，以免导致内存泄漏。这也是 Java、Python 和 Ruby 的工作方式。

```
resource = create_resource
try:
  use resource
finally:
  resource.cleanup 
```

无论您在 try 和 finally 之间做什么，资源都会被清理。`try`此外，如果执行从未到达该块，它将不会被清理。（即`create_resource`本身引发异常）它使您的代码“异常安全”。

至于为什么您实际上需要 finally 块，并非所有语言都这样做。在 C++ 中，您自动调用析构函数，当异常展开堆栈时强制清理。我认为与 try...finally 语言相比，这是朝着更简洁的代码方向迈出的一步。

```
{    
  type object1;
  smart_pointer<type> object1(new type());
} // destructors are automagically called here in LIFO order so no finally required. 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-02-17T17:14:46.730

当您想在运行主要工作的代码之前运行“可选”代码并且该可选代码可能由于各种原因而失败时，也可以使用 finally。

在下面的示例中，我们并不确切知道`store_some_debug_info`可能会抛出什么样的异常。

我们可以运行：

```
try:
  store_some_debug_info()
except Exception:
  pass
do_something_really_important() 
```

但是，大多数 linter 会抱怨捕获的异常太模糊。此外，由于我们选择仅`pass`用于错误，因此该`except`块并没有真正增加价值。

```
try:
  store_some_debug_info()
finally:
  do_something_really_important() 
```

上面的代码与第一段代码的效果相同，但更简洁。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-05-15T17:59:29.023

`finally`用于定义**“清理动作”**。该`finally`子句在离开`try`语句之前的任何事件中都会执行，无论是否发生异常（即使您不处理它）。

我第二个@Byers 的例子。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-10-02T06:33:36.210

完美的例子如下：

```
try:
    #x = Hello + 20
    x = 10 + 20 
except:
    print 'I am in except block'
    x = 20 + 30
else:
    print 'I am in else block'
    x += 1
finally:
    print 'Finally x = %s' %(x) 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-10-07T04:10:27.783

一个 try 块只有一个强制子句：try 语句。except、else 和 finally 子句是可选的并且基于用户偏好。

finally：在 Python 离开 try 语句之前，它会在任何条件下运行 finally 块中的代码，即使它正在结束程序。例如，如果 Python 在运行 except 或 else 块中的代码时遇到错误，finally 块仍将在停止程序之前执行。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2021-03-09T17:13:02.100

尝试在没有 finally 块的情况下先运行此代码，

`1 / 0`导致除以零错误。

```
 try:
        1 / 0    
        print(1)

    except Exception as e:
        1 / 0
        print(e) 
```

然后尝试运行这段代码，

```
 try:
        1 / 0    
        print(1)

    except Exception as e:
        1 / 0
        print(e)

    finally:
        print('finally') 
```

对于第一种情况，您没有 finally 块，
因此当 except 块中发生错误时，程序执行将停止，并且您无法在 except 块之后执行任何操作。

但是对于第二种情况，
在程序停止之前发生错误，python首先执行finally块，然后导致程序停止。
这就是为什么你使用 finally 并做一些非常重要的事情。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-03-29T12:58:59.100

运行这些 Python3 代码来观察 finally 的需求：

情况1：

```
count = 0
while True:
    count += 1
    if count > 3:
        break
    else:
        try:
            x = int(input("Enter your lock number here: "))

            if x == 586:
                print("Your lock has unlocked :)")

                break
            else:
                print("Try again!!")

                continue

        except:
            print("Invalid entry!!")
        finally:
            print("Your Attempts: {}".format(count)) 
```

案例2：

```
count = 0

while True:
    count += 1
    if count > 3:
        break
    else:
        try:
            x = int(input("Enter your lock number here: "))

            if x == 586:
                print("Your lock has unlocked :)")

                break
            else:
                print("Try again!!")

                continue

        except:
            print("Invalid entry!!")

        print("Your Attempts: {}".format(count)) 
```

每次尝试以下输入：

1.  随机整数
2.  正确的代码是 586（试试这个，你会得到答案）
3.  随机字符串

** 在学习 Python 的早期阶段。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-22T10:53:24.043

我试图在我想阅读 excel 表的地方运行代码。问题是，如果有一个没有名为的文件的文件说：SheetSum 我无法将它移动到错误位置！我写的代码是：

```
def read_file(data_file):
    # data_file = '\rr\ex.xlsx'
    sheets = {}
    try:
        print("Reading file: "+data_file)
        sheets['df_1'] = pd.read_excel(open(data_file,'rb'), 'SheetSum')
    except Exception as excpt:
        print("Exception occurred", exc_info=True)
    return sheets

read_file(file)
shutil.move( file, dirpath +'\\processed_files') 
```

给出错误：

> [WinError 32] 进程无法访问该文件，因为它正被另一个进程使用

我必须添加完整`try except with finally`块并告诉`finally`我在任何情况下都需要关闭文件，例如：

```
def read_file(data_file):
    # data_file = '\rr\ex.xlsx'
    sheets = {}
    sheets_file = None
    try:
        print("Reading file: "+data_file)
        sheets_file = open(data_file,'rb')
        sheets['df_1'] = pd.read_excel(sheets_file, 'SheetSum')
    except Exception as excpt:
        print("Exception occurred", exc_info=True)
    finally:
        if sheets_file:
            sheets_file.close()
    return sheets

read_file(file)
shutil.move( file, dirpath +'\\processed_files') 
```

否则，文件仍然保持打开是背景。

> 如果`finally`存在，它指定一个**清理处理程序**。该`try` 子句被执行，包括任何`except`和`else`子句。如果任一子句发生异常且未处理， **则暂时保存该异常**。`finally`子句被执行。`finally` 如果存在已保存的异常，则会在子句末尾重新引发。如果`finally`子句引发另一个异常，则将保存的异常设置为新异常的上下文。

..更多[在这里](https://docs.python.org/3/reference/compound_stmts.html#finally)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-19T14:08:58.220

只是为了让[Abhijit Sahu对](https://stackoverflow.com/users/4417215/abhijit-sahu)[这个答案](https://stackoverflow.com/a/11552007/13914780)的评论更好地被看到并且语法突出显示：

像这样，您可以观察在以下情况下哪个代码块会发生什么：

```
try: 
    x = Hello + 20 
    x = 10 + 20 
except: 
    print 'I am in except block' 
    x = 20 + 30 
else: 
    print 'I am in else block' 
    x += 1 
finally: 
    print 'Finally x = %s' %(x) 
```**

# sql - 时间戳之间的差异是 15 分钟

> ID：11551997
> 
> 赞同：1
> 
> 时间：2012-07-18T23:44:41.497
> 
> 标签：sql, timestamp, hive

这是 CREATED_TIME `2012-07-17 00:00:22`，这是对应的 Timestamp `1342508427000`。这里`5 seconds`的时间戳比`CREATED_TIME`. 我需要看看下面的场景

目前我有一个查询，我正在加入 created_time 和 timestamp 这样的 -

```
ON (UNIX_TIMESTAMP(testingtable1.created_time) = (prod_and_ts.timestamps / 1000)) 
```

因此在上述情况下，它不会匹配，因为时间戳比 created_time 多 5 秒。但是我需要如果两者之间的差异在 15 分钟内，那么我需要匹配它。

所以我写了下面的 JOIN 查询——我不确定这是否是正确的方法？

```
ON ((UNIX_TIMESTAMP(testingtable1.created_time) - (prod_and_ts.timestamps / 1000)) / 60* 1000 <= 15) 
```

如果时间戳之间的差异在 15 分钟内，我该如何处理上述情况，那么数据将与上述情况匹配`ON clause`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:59:18.927

我更喜欢（专门为此目的设计的！）[日期和时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)，而不是使用时间戳进行所有这些类型的计算。你不会相信这会造成多大的麻烦。确保你阅读并理解[这个](http://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time)和[这个](http://infiniteundo.com/post/25509354022/more-falsehoods-programmers-believe-about-time-wisdom)