# StackOverflow 问答 10003000-10003999

# .net - WCF 仅签署正文

> ID：10003002
> 
> 赞同：1
> 
> 时间：2012-04-03T23:36:47.903
> 
> 标签：.net, wcf, sign

我正在尝试通过 WCF 连接到 Java 服务。该服务需要对正文进行签名，并且仅对 SOAP 消息的正文进行签名。

我正在使用 MutualCertificate 安全性进行自定义绑定，但似乎这不仅标志着正文，而且还签署了标题（或其中的一部分）。

真的吗？

如果是，我怎样才能只签署身体？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:20:34.967

我认为您可以使用：

`[MessageBodyMember(ProtectionLevel=ProtectionLevel.EncryptAndSign)]`

或者

```
[MessageBodyMember(ProtectionLevel=ProtectionLevel.Sign)] 
```

突出显示您想要签名/加密的内容？

# php - 在不强制用户登录的情况下访问图形数据

> ID：10003004
> 
> 赞同：0
> 
> 时间：2012-04-03T23:37:00.237
> 
> 标签：php, javascript, facebook, facebook-graph-api

我希望在没有用户身份验证的情况下将数据从 fb 页面提取到网站。

我希望在网页上显示的数据是fb页面的事件列表，页面和事件都是打开的，我可以抓取页面和事件数据，例如

[http://graph.facebook.com/PAGEID](http://graph.facebook.com/PAGEID) http://graph.facebook.com/EVENTID

但是要获取事件列表以获取事件ID，则需要访问令牌，例如

[http://graph.facebook.com/PAGEID/events](http://graph.facebook.com/PAGEID/events)

这是否可以在没有用户登录到 fb 并使用应用程序授权的情况下获取这些数据？我看过只是保存一个访问令牌，但这似乎过期了。

任何建议/指针都会很棒，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:24:44.620

为此提供快速解决方案设置应用程序并获取访问令牌，请注意最好缓存结果数据，以免在每次页面加载时进行 api 调用

```
<?php

//set your app id, client_secret and fb id
$client_id = 'xxx';
$client_secret = 'xxx';
$fbID = 'xxx';

//get an access token
$access_token = file_get_contents("https://graph.facebook.com/oauth/access_token?    type=client_cred&client_id=".$client_id."&client_secret=".$client_secret);

//use this access token to return the events
$jsonurl = "https://graph.facebook.com/$fbID/events?$access_token";
$json = file_get_contents($jsonurl,0,null,null);

// do stuff with $json
?> 
```

# c# - 动态创建具有多个过滤字段的新字段搜索组

> ID：10003011
> 
> 赞同：2
> 
> 时间：2012-04-03T23:37:37.290
> 
> 标签：c#, asp.net, sql

我进行了搜索，但找不到与我需要的类似的东西，因此我将感谢您的帮助。我有一个 aspx 页面，我想根据用户请求动态创建新的文本框字段（这是最简单的部分）。用户可以请求任意数量的字段，因为它们将用于过滤 SQL 服务器表。长话短说，该表有 23 列，用户可以为每列创建多个文本框，以便一般 SQL 查询根据他将在这些文本框中输入的文本进行搜索。例如 - 用户可以选择“类型”字段并创建 3 个文本框，他将在第一个输入“b”，第二个输入“c”，第三个输入“e”，因此查询看起来像这样：

```
SELECT *
FROM table_name
WHERE type like '%b%' or type like '%c%' or type like '%e%' 
```

我希望你能理解我在寻找什么，任何帮助都会很棒......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:03:43.693

使用所有相关的文本框为每个循环执行一次。在那里，您可以创建 SQL 查询并`or type like '%X%'`为用户创建的任何文本框添加块。这样，SQL 查询将始终具有动态计数`or type like '%c%'`

# jquery - 使用静态值更改 jQuery 中的 .css

> ID：10003015
> 
> 赞同：0
> 
> 时间：2012-04-03T23:38:35.447
> 
> 标签：jquery

我使用下面的 PHP 使用正则表达式来调整 html 页面的字体大小/行高。我想在 jQuery 中创建类似的功能。

有没有办法为像 .css() 这样的整个方法存储静态值，所以每次比例计算都基于原始值而不是当前值？

jQuery代码摘录：

```
$("#resume_holder").contents().find('body').children().css('font-size', '+=' + ui.value); 
```

PHP代码：

```
private function _font_size($output,$scale,$line_height_scale =  FALSE) {

        $callback = new Font_Callback($scale);
        $pattern = '%(\bfont-size:\s*)([0-9]+)%s';
        $output  = preg_replace_callback($pattern, array($callback, '_alter_font_size'), $output);  

        if ($line_height_scale === FALSE) {
        $callback = new Font_Callback($scale);
        } else { $callback = new Font_Callback($line_height_scale); }
        $pattern = '%(\bline-height:\s*)([0-9]+)%s';
        $output  = preg_replace_callback($pattern, array($callback, '_alter_font_size'), $output);  
        return($output);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:40:15.793

您可以为此使用 jQuery 的 .data() 。

```
$("img").data("yourvar", "yourvalue"); 
```

# internet-explorer-7 - IE7 边距自动无法正常运行

> ID：10003017
> 
> 赞同：0
> 
> 时间：2012-04-03T23:39:23.517
> 
> 标签：internet-explorer-7, margin

我知道这个问题被问了很多，但我已经浏览了几乎所有内容，但没有好的结果。

基本上我的包装器有一个边距：40px auto; 给它。它在我尝试过的每个浏览器中都很好地居中，除了 IE7。出于某种原因，它仅将导航菜单居中，然后就像包装器自动关闭一样，使其他所有内容都浮动到左侧。这是可怕的。

代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

        <head>

            <title>Demo</title>
            <meta http-equiv="content-type" content="text/html; charset=utf-8" />
            <link rel="StyleSheet" href="ext/styles/default.css" type="text/css" />
            <link href="ext/styles/jflow.style.css" type="text/css" rel="stylesheet"/>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
            <script src="ext/js/jflow.plus.js" type="text/javascript"></script>

            <script type="text/javascript">
                $(document).ready(function(){
                    $("#myController").jFlow({
                        controller: ".jFlowControl", // must be class, use . sign               
                        slideWrapper : "#jFlowSlider", // must be id, use # sign                    
                        slides: "#mySlides",  // the div where all your sliding divs are nested in                  
                        selectedWrapper: "jFlowSelected",  // just pure text, no sign                   
                        effect: "flow", //this is the slide effect (rewind or flow)                 
                        width: "783px",  // this is the width for the content-slider                    
                        height: "331px",  // this is the height for the content-slider                  
                        duration: 400,  // time in milliseconds to transition one slide                 
                        pause: 5000, //time between transitions                 
                        prev: ".jFlowPrev", // must be class, use . sign                    
                        next: ".jFlowNext", // must be class, use . sign                
                        auto: false                 
                    });
                });
            </script>

        </head>

        <body>

            <noscript>
                    <h1 style="float: left; color: red; margin-bottom: 5000px;">JavaScript behövs för att korrekt visa denna sida</h1>
            </noscript>

            <div id="wrapper">

                <div id="nav">
                    <div class="menu">
                        <ul>
                            <li class="start"><!-- /!/ --></li>
                            <div class="minus-left">
                                <li class="norm"><a class="active" href="#">hem</a></li>
                                <li class="norm"><a href="portfolio.html">portfolio</a></li>
                                <li class="norm"><a href="om.html">om</a></li>
                                <li class="norm"><a href="kontakt.html">kontakta</a></li>
                            </div>
                            <li class="end"><!-- /!/ --></li>
                        </ul>
                    </div>
                </div>

                <div id="rotator">
                    <div id="shadow"><img src="ext/imgs/img_shadow.png" alt="Shadow" /></div>

                    <div id="controller">
                        <div class="prev">
                            <img src="ext/imgs/left_arrow.png" class="jFlowPrev" alt="Left Arrow" />
                        </div>

                        <div class="next">
                            <img src="ext/imgs/right_arrow.png" class="jFlowNext" alt="Right Arrow" />
                        </div>
                    </div>

                    <div id="mySlides">
                        <div id="slide1" class="slide"> <img src="ext/slides/slide_1.png" alt="Slide 1 jFlow Plus" />
                            <div class="slideContent">
                                <h3>Bespoke Booklet...</h3>
                                <p>... for Offsite Design Studio to showcase their services.</p>
                            </div>
                        </div>
                        <div id="slide2" class="slide"> <img src="ext/slides/slide_2.png" alt="Slide 2 jFlow Plus" />
                            <div class="slideContent">
                                <h3>Aggregate</h3>
                                <p>Professional high-quality Wordpress theme from ElegantThemes.</p>
                            </div>
                        </div>
                        <div id="slide3" class="slide"> <img src="ext/slides/slide_3.png" alt="Slide 3 jFlow Plus" />
                            <div class="slideContent">
                                <h3>Deep Focus</h3>
                                <p>Professional high-quality Wordpress theme from ElegantThemes.</p>
                            </div>
                        </div>
                    </div>

                    <div id="myController"> 
                        <span class="jFlowControl"></span> 
                        <span class="jFlowControl"></span> 
                        <span class="jFlowControl"></span> 
                    </div>
                </div>

                <div class="content_sep_top" style="margin-top: 70px; margin-bottom: 15px;"></div>

                <div class="single_page line_height_15">
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam ac ante nisi, sed laoreet dui. Sed imperdiet euismod scelerisque. Quisque id massa a nunc convallis congue. Sed venenatis cursus rhoncus. Nam a purus in elit vehicula faucibus. Integer ornare elementum magna sed mattis. Duis dui velit, semper ac dignissim aliquet, eleifend sit amet augue. Donec at arcu quis ipsum volutpat rhoncus. Cras orci orci, congue at tincidunt ut, imperdiet at lorem. Duis ultricies diam a elit vulputate auctor. Nam congue leo et neque imperdiet elementum. Vestibulum vulputate, ante at consectetur eleifend, diam enim vulputate odio, sit amet facilisis neque nibh sed nisl.
                    </p>
                </div>

                <div class="content_sep_top" style="margin-top: 15px;"></div>

            </div>
        </body>
    </html> 
```

CSS 代码。

```
 * {
        margin: 0px;
        padding: 0px;
    }

    body {
        font-family: helvetica, arial, verdana, sans-serif;
        font-size: 13px;
        font-style: normal;
        font-variant: normal;
        font-weight: normal;
        line-height: 18px;
        background-image: url(../imgs/bg.png);
        background-repeat: repeat-y;
        background-color: #D7D7D7;
        background-position: center;
        text-align: center;
        color: #616161;
        width: 100%;
    }

    #wrapper {
        width: 801px;
        margin: 40px auto;
        text-align: left;
    }

    #nav {
        float: left;
        width: 801px;
        position: relative;
        height: 60px;
    }

    .menu {
        position: absolute;
        left: 50%;
        margin-left: -395px;
        background-image: url(../imgs/middle_nav.png);
        background-repeat: repeat-x;
        width: 791px;
    }

    .menu ul {
        list-style-type: none;
    }

    .menu li {
        float: left;
    }

    .menu li.start {
        background-image: url(../imgs/left_nav.png);
        float: left;
        background-repeat: no-repeat;
        height: 60px;
        width: 9px;
        margin-left: -9px;
    }

    .menu li.norm {
        background-image: url(../imgs/nav_sep.png);
        background-repeat: no-repeat;
        background-position: right;
        padding: 17px;
        text-transform: capitalize;
    }

    .menu li.norm a {
        color: #B2B2B2;
        text-decoration: none;
        font-size: 14px;
    }

    .menu li.norm a:hover {
        color: #747474;
    }

    .menu li a.active {
        color: #747474;
    }

    .menu li.end {
        background-image: url(../imgs/right_nav.png);
        float: right;
        background-repeat: no-repeat;
        height: 60px;
        width: 10px;
        margin-right: -10px;
    }

    #rotator {
        margin-top: 40px;
        float: left;
        background-color: white;
        width: 781px;
        height: 329px;
        padding: 10px 10px 10px 10px;
        position: relative;
    }

    #shadow {
        position: absolute;
        float: left;
        width: 801px;
        height: 379px;
        margin-left: -13px;
        margin-top: 0px;
        z-index: -1;
    }

    #controller {
        float: left;
        position: absolute;
        left: 50%;
        margin-left: -86px;
        margin-top: -18px;
        background-image: url(../imgs/controller.png);
        width: 172px;
        height: 54px;
        z-index: 2;
    }

    #mySlides {
        width: 781px;
        height: 329px;
    }

    #slide1, #slide2, #slide3 {
        width: 781px;
        height: 329px;
        border: 1px solid #c6c6c6;
    }

    .prev {
        float: left;
        margin-top: 16px;
        margin-left: 26px;
    }

    .next{
        float: right;
        margin-top: 16px;
        margin-right: 26px;
    }

    .next img,
    .prev img {
        border: 0px;
        outline: 0px;
        cursor: pointer;
    }

    ul, li {
        list-style-type: none;
    }

    .content_sep {
        background-image: url(../imgs/content_sep.png);
        background-repeat: repeat-x;
        width: 801px;
        height: 2px;
        float: left;
    }

    .content_sep_top {
        background-image: url(../imgs/content_sep.png);
        background-repeat: repeat-x;
        width: 801px;
        height: 2px;
        float: left;
    }

    .container {
        margin-top: 40px;
        float: left;
    }

    .left {
        width: 532px;
        float: left;
    }

    .left p {
        width: 500px;
    }

    .left ul {
        padding-left: 10px;
    }

    .img {
        width: 502px;
        height: 402px;
        padding: 10px;
        background-color: white;
        position: relative;
    }

    .left  .img img {
        border: 1px solid #c6c6c6;
    }

    .right {
        width: 265px;
        float: right;
        text-align: right;
    }

    .right li {
        float: left;
        margin-left: 10px;
        margin-bottom: 10px;
        width: 102px;
        height: 102px;
        padding: 10px;
        background-color: white;
    }

    .right li img {
        border: 1px solid #c6c6c6;
    }

    .info {
        width: 500px;
    }

    ul.side {
        padding: 0px;
        margin: 0px;
    }

    ul.head {
        margin-top: 30px;
    }

    .side {
        float: right;
        width: 350px;
    }

    .img_overlay {
        background: url("../imgs/contentBg.png") repeat scroll 0 0 transparent; 
        position: absolute; 
        padding: 10px; 
        width: 462px;
        left: 20px;
        bottom: 20px;
    }

    .img_overlay p {
        font-family: Georgia, serif; 
        color: #FFF;  
        margin: 0;
    }

    .single_page {
        width: 771px;
        padding-left: 15px;
        padding-right: 15px;
        float: left;
    }

    .left h1,
    .single_page h1 {
        text-align: center;
        font-family: Georgia, serif;
        color: #bababa;
        font-size: 28px;
        font-style: italic;
    }

    .line_height_15 {
        line-height: 15px;
    }

    .img h3 {
        font-family: Georgia, serif; 
        color: #FFF; 
        font-size: 28px; 
        font-style: italic; 
        margin: 5px 0 5px 0;
    }

    .left_top {
        margin-top: 40px;
        float: left;
        margin-left: 10px;
    }

    .padding_left_10 {
        padding-left: 10px;
    }

    .fields {
        outline: 0px;
        padding: 3px;
        width: 50%;
    }

    .width_70 {
        width: 70%;
        height: 150px;
    }

    .submit{
        float: right;
        margin-right: 140px;
        padding: 3px;
    }

    .minus-left {
        margin-left: -4px;
        float: left;
    } 
```

我希望能得到任何帮助。正如我上面所说，当我在 IE7 中查看源代码时，看起来包装器在导航后立即自行关闭，但我不知道如何。

我现在真的很绝望，也请不要评论代码的混乱/重复性，除非它真的有助于解决问题。代码现在只是一个草稿，我不想听起来粗鲁。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:03:26.623

你改变#rotator的一件小事删除浮动：左; 该技术如下我使用它的星号仅适用于 ie-7 。尝试这样做... #rotator { *float:none; } .single_page { *float:none; 文本对齐L：左；我为什么使用它的星号仅适用于 ie-7 。尝试这样做...

# c++ - C++ 运算符重载错误

> ID：10003024
> 
> 赞同：1
> 
> 时间：2012-04-03T23:40:16.370
> 
> 标签：c++

我正在尝试创建我自己版本的名为 safearray 的数组，以测试我对运算符重载和创建适当类等的知识。

我遇到两个错误。

SafeArray.h:11:15：错误：'const int SafeArray::operator' 不能重载

SafeArray.h:10:10: 错误: with 'int& SafeArray::operator'</p>

我的代码分为三个文件。

主文件

```
#include <cstdlib>
#include <iostream>

#include "SafeArray.h"

using namespace std;

int main(int argc, char** argv) {

    SafeArray a(10); // 10 integer elements

    for (int i = 0; i < a.length(); i++) {
        cout << i << " " << a[i] << "s" << endl; // values initialise to 0
    }

    cout << endl << a[1]; // Program exits here.

    a[3] = 42;
    cout << a[3];
    a[10] = 10;
    cout << a[10];
    a[-1] = -1; // out-of-bounds is "safe"?

    SafeArray b(20); // another array

    b = a; // array assignment

    for (int i = 0; i < b.length(); i++) {
        cout << b[i] << endl; // values copied from a
    }

    return 0;
} 
```

安全阵列.h

```
#ifndef SAFEARRAY_H
#define SAFEARRAY_H

class SafeArray {
public:
    SafeArray(int);              // int variable will be the array size
    int length();
    int boundsCheck(int y);       // constructor will call this function
//    const SafeArray operator= (const SafeArray&);
    int& operator[] (int y);
    const int operator [] (const int y); // you need this one too.

    SafeArray &operator=(SafeArray rhs) { 
    std::swap(array, rhs.array);
    std::swap(length_, rhs.length_);
        }

    SafeArray(SafeArray const &other);
    ~SafeArray();
private:
    int length_;
    int *array;
    //int array[];
};

#endif  /* SAFEARRAY_H */ 
```

安全阵列.cpp

```
#include "SafeArray.h"
#include <iostream>

SafeArray::SafeArray(int x) {
    length_ = x;
    array = new int[length];
    for (int i = 0; i < length_; i++) {
        array[i] = 0;
    }
}

int SafeArray::length() {
    return this->length_;
}

int SafeArray::boundsCheck(int y) {

}

int& SafeArray::operator[] (int y) {
    return array[y];
}

SafeArray::~SafeArray() { 
    delete [] array;
}

SafeArray::SafeArray(SafeArray const &other) { 
    int *temp = new int[rhs.size_];
    for (int i=0; i<rhs.size_; i++)
        temp[i] = rhs.array[i];
    std::swap(temp, array);
    delete [] temp;
    return *this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:43:36.697

您的类定义无效。`int array[]`是一个不完整的类型，它不能作为（非静态）类成员出现。一些编译器接受它作为 的同义词`int array[0]`，但零大小的数组在 C++ 中也无效（仅在 C99 中）。

简而言之，您不能按照自己的方式编写代码。您需要了解动态分配并管理自己的内存。看看是如何`std::vector`实现的。

在 C++11 中，我可能会推荐一种`std::unique_ptr<int[]> array`快速修复方法，将其初始化为`array(new int[x])`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T22:37:38.667

错误消息指的是这两行：

```
int& operator[] (int y);
const int operator [] (const int y); // you need this one too. 
```

您的错误消息说 (int y) 和 (const int y) 太相似了，不能成为 [] 运算符的两个不同重载。您不能在 (int y) 和 (const int y) 上重载，因为调用都是模棱两可的。

如果您的 SafeArray 是 const，您可能打算返回一个 const int，但如果您的 SafeArray 不是 const，则返回一个 int&。在这种情况下，您可以通过将单词 const 放在参数列表之后来声明要应用于 const SafeArray 的第二个函数。这是您应该在 SafeArray.h 中编写的内容：

```
int& operator[] (int y);
const int operator [] (int y) const; // you need this one too. 
```

然后，您必须在 SafeArray.cpp 中编写这两个函数：

```
int& SafeArray::operator[] (int y) {
    return array[y];
}

const int SafeArray::operator[] (int y) const { // you need this one too.
    return array[y];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:04:49.407

实际上 int array[] 是有效的，并且可能作为类成员出现。以下以严格的 C++11 一致性编译：

```
class foo 
{
public:
    foo() {}
    int length;
    int A[];
};

void ralph()
{
    foo *bar = (foo *)new int[ 21 ];
    bar->length = 20;
    bar->A[0] = 1;
} 
```

这是合法的，并且有其优势（偶尔）。虽然不常用。

但是，我怀疑 OP 想要更多类似的东西

```
class SafeArray {
public:
    SafeArray(int);              // int variable will be the array size
    int length();
    int boundsCheck(int y);       // constructor will call this function

    int& operator[] (int y);
    const int operator [] (const int y) // you need this one too.
private:
    int length_;
    int *array;
}; 
```

随着

```
SafeArray::SafeArray(int x) {
    length_ = x;
    array = new int[length];
    for (int i = 0; i < length_; i++) {
        array[i] = 0;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T00:05:27.497

正如@Kerrek 已经指出的那样，您的类定义显然是错误的（不应该编译）。

要修复它，您需要将定义更改为：

```
int *array; 
```

然后在你的默认ctor中你可以使用这样的东西：

```
SafeArray::SafeArray(unsigned size = 0) 
    : array(new int[size])
{ 
    for (unsigned i=0; i<size; i++)
        array[i] = 0;
} 
```

然后，是的，您需要编写一个赋值运算符。通常的方式称为复制和交换习语。您创建一个副本，然后将当前副本的内容与副本的内容交换：

```
SafeArray &operator=(SafeArray rhs) { 
    std::swap(array, rhs.array);
    std::swap(length_, rhs.length_);
} 
```

除此之外，您还需要一个复制构造函数来复制数据：

```
SafeArray::SafeArray(SafeArray const &other) { 
    int *temp = new int[rhs.size_];
    for (int i=0; i<rhs.size_; i++)
        temp[i] = rhs.array[i];
    std::swap(temp, array);
    delete [] temp;
    return *this;
} 
```

最后，您需要一个析构函数来销毁一个对象并（特别是）删除它所拥有的内存：

```
SafeArray::~SafeArray() { 
    delete [] array;
} 
```

然后意识到所有这些都是一个丑陋的烂摊子，永远不会真正运作良好。特别是，基本方法仅限于大小基本固定的数组。只要您只存储`int`s，就很容易忽略这些问题，并制作一个（有点）有效的动态数组。但是，当/如果您想存储其他类型时，您只需将分配内存与初始化该内存中的对象分开，这意味着基本上丢弃上面的所有代码，并将其替换为：

1.  分别跟踪数组大小和分配大小
2.  `::operator new`使用、 Allocator 对象或其他类似对象分配内存
3.  需要时使用placement new 来初始化内存中的对象。
4.  使用显式析构函数调用来销毁对象
5.  用于`::operator delete`释放内存

等等。总而言之，`std::vector`这*不是*一件微不足道的工作。

# sql-server-2008 - 带有 ADO.NET 的 SQL Server 的默认事务隔离级别是什么？

> ID：10003026
> 
> 赞同：57
> 
> 时间：2012-04-03T23:40:33.237
> 
> 标签：sql-server-2008, transactions, ado.net

带有 ADO.NET 的 SQL Server 的默认事务隔离级别是什么？我使用的是默认安装的 SQL Server 和普通的 System.Data.SqlClient 类。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-03T23:44:27.707

> READ COMMITTED 是 Microsoft SQL Server 数据库引擎的默认隔离级别。

资源：

*   [自定义事务隔离级别@MSDN](http://msdn.microsoft.com/en-us/library/ms175909.aspx)。

以下是它与其他隔离级别的比较：

*   [事务隔离级别@MSDN](http://msdn.microsoft.com/en-us/library/ms709374%28v=vs.85%29.aspx)。

MSDN 文档`SqlConnection.BeginTransaction()`还指出`Read committed`

> ... 将隔离级别重置为默认值 (READ COMMITTED) ...

*   [MSDN 文章](https://msdn.microsoft.com/en-us/library/5ha4240h%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-21T17:25:42.057

hkf 接受的答案为使用*手动*启动的事务提供了正确答案`SqlConnection.BeginTransaction()`。这里，默认级别是**ReadCommitted**。

但是，这不是在 ADO.NET 中启动新事务的唯一方法：还可以使用命名空间中的类*自动*`System.Transactions`创建事务，特别是通过创建一个`TransactionScope`.

与手动启动的事务相反，由`System.Transactions`基础设施（以及因此由 a `TransactionScope`）创建的事务是**Serializable**。

有关更多信息，请参见以下链接：

*   [IsolationLevel 枚举@MSDN](http://msdn.microsoft.com/en-us/library/system.transactions.isolationlevel%28v=vs.110%29.aspx)。

# unity3d - c++ dll的unity3d插件中的DllNotFoundException

> ID：10003028
> 
> 赞同：12
> 
> 时间：2012-04-03T23:40:38.853
> 
> 标签：unity3d

我正在开发 Unity Plugin 项目并尝试从 c# 文件导入 c++ 本机 dll。但我不断收到 dllnotfoundexception。

**c++ dll代码：** 

```
extern "C" {
extern __declspec( dllexport ) bool IGP_IsActivated();
} 
```

**c#代码：** 

```
[DllImport("mydll")]
    private static extern bool IGP_IsActivated(); 
```

Dll 已就位且 FIle.Exists 正常工作。所有依赖的 dll 都存在于同一层次结构中，但我仍然以 dllnotfound 异常告终。

任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-10-14T11:35:23.357

感谢这个[Unity 论坛帖子](http://forum.unity3d.com/threads/dllnotfoundexception-when-depend-on-another-dll.31083/#post-1042180)，我想出了一个很好的解决方案，它可以`PATH`在运行时修改 -environment 变量：

*   将**所有**DLL（包括 Unity 接口的 DLL 及其依赖的 DLL）放入`Project\Assets\Wherever\Works\Best\Plugins`.
*   将以下静态构造函数放入使用插件的类中：

    ```
    static MyClassWhichUsesPlugin() // static Constructor
    {
        var currentPath = Environment.GetEnvironmentVariable("PATH",
            EnvironmentVariableTarget.Process);
    #if UNITY_EDITOR_32
        var dllPath = Application.dataPath
            + Path.DirectorySeparatorChar + "SomePath"
            + Path.DirectorySeparatorChar + "Plugins"
            + Path.DirectorySeparatorChar + "x86";
    #elif UNITY_EDITOR_64
        var dllPath = Application.dataPath
            + Path.DirectorySeparatorChar + "SomePath"
            + Path.DirectorySeparatorChar + "Plugins"
            + Path.DirectorySeparatorChar + "x86_64";
    #else // Player
        var dllPath = Application.dataPath
            + Path.DirectorySeparatorChar + "Plugins";

    #endif
        if (currentPath != null && currentPath.Contains(dllPath) == false)
            Environment.SetEnvironmentVariable("PATH", currentPath + Path.PathSeparator
                + dllPath, EnvironmentVariableTarget.Process);
    } 
    ```

*   添加`[InitializeOnLoad]`到类以确保构造函数[在编辑器启动时运行](http://docs.unity3d.com/Manual/RunningEditorCodeOnLaunch.html)：

    ```
     [InitializeOnLoad]
     public class MyClassWhichUsesPlugin
     {
         ...
         static MyClassWhichUsesPlugin() // static Constructor
         {
             ...
         }
      } 
    ```

使用此脚本，无需复制 DLL。Unity 编辑器在`Assets/.../Plugins/...`-folder 中找到它们，而可执行文件在`..._Data/Plugins`-directory 中找到它们（在构建时它们会自动复制到该目录中）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-25T03:18:52.207

将 DLL(s) Unity 接口放在 Project\Assets\Wherever\Works\Best\Plugins 中。

将您的脚本不直接访问的任何依赖 DLL 放在 Project 中。这将允许您的程序在编辑器中运行。

构建时，再次复制依赖项 DLL 文件，这次复制到构建目录的根目录（就在生成的可执行文件旁边）。这应该允许您的应用程序在运行时加载它们。

（提示：您可以使用[Dependency Walker](http://dependencywalker.com/)查看您的 DLL 并查看它们所依赖的内容。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T20:24:55.573

好吧，我让它工作了。对于可能遇到此问题的其他人，如果您有多个 dll，则需要将辅助 dll 放在 Unity 编辑器的根级别（例如 C:\Program Files\Unity\Editor），并将脚本中实际引用的 dll 放入插件文件夹。这对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-26T21:31:35.597

确保满足以下检查清单：

*   插件都应该保存在一个名为 Plugins 的文件夹中。
*   您的 dll 构建的架构（x86 或 x86_64）必须与 Unity Editor 的架构版本相对应。Unity Editor 32 位不会加载 64 位插件，反之亦然。
*   如果您的目标是 32 位和 64 位架构，您应该将您的 dll 放在 Plugins 文件夹内的特殊命名文件夹中。32 位 dll 的名称是 Plugins/x86，64 位 dll 的名称是 Plugins/x86_64（x64 也可以）。
*   必须安装 Visual C++ Redistributables。我有2008年的所有东西。
*   当您构建所有 dll 时，应将其复制到可执行文件所在的根目录中（并再次为正确的 x86/x64 架构构建）

如果您不断收到命名空间错误，则意味着您正在导入的 dll 具有非托管代码，并且必须将其包装到另一个托管 dll Pugin 中才能工作。

这些线程有点过时但仍然相关

[DLLNotFoundException - Unity3D 插件](https://stackoverflow.com/questions/30163518/dllnotfoundexception-unity3d-plugin/31923615#31923615)

[使用自定义 dll 的 Unity 内部编译器错误](https://stackoverflow.com/questions/22386343/unity-internal-compiler-error-with-custom-dll)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-27T18:00:01.290

我花了一天时间处理这个错误。我的问题是 Android 没有得到库并且总是得到和 DDLNotFound 错误。我的解决方案是：

1.- 确保插件文件夹中有正确架构的库。

Plugins/Android/x86 和 Plugins/Android/armeabi-v7a 如果你的构建设置是 FAT(x86&arm)

2.- 检查 Unity 是否将它们识别为库。如果您在“项目”选项卡中选择它们，您应该将它们视为一个库，并且与平台和架构相关。

3.- 构建后（不要关闭 Unity 编辑器！），如果您的库在那里，您可以检查 Temp/StagingArea/libs。如果确实存在这些库，那么这些库将在 APK 中。作为仔细检查，您可以打开 APK（更改为 zip 扩展名）并查看 lib 文件夹中的库。

4.- 在 C# 中，您应该删除库名称中的任何 lib 前缀，例如：

如果您的库名称是“libdosomething.so”，则应将其称为

[DllImport ("dosomething")]

我希望这对你有用:)

干杯。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-08T10:40:49.740

只需将 dll 放在 Plugins 文件夹下，这对我有用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-18T05:37:25.510

就我而言，我有 DllNotFoundException: ovrplatiformloader

```
 Unity   : DllNotFoundException: ovrplatformloader
 Unity   :   at (wrapper managed-to-native) Oculus.Platform.CAPI.ovr_UnityInitWrapperAsynchronous(string)
 Unity   :   at Oculus.Platform.AndroidPlatform.AsyncInitialize (System.String appId) [0x00013] in <29065e843b82403894fca6c6f2974090>:0 
 Unity   :   at Oculus.Platform.Core.AsyncInitialize (System.String appId) [0x0004f] in <29065e843b82403894fca6c6f2974090>:0 
 Unity   :   at DBHelper.Start () [0x00019] in <29065e843b82403894fca6c6f2974090>:0 
```

我的解决方案是：

1.  重新导入不起作用的文件 (libovrplatformloader.so)
2.  重构平台/插件架构。**旧**：平台/插件/Android32/libovrplatformloader.so。**新**：Platform/Plugins/Android/x86/libovrplatformloader.so**和**Platform/Plugins/Android/armeabi-v7a/libovrplatformloader.so
3.  修改 libovrplatformloader.so 的导入设置。将任何平台更改为仅 Android 平台并启用“启动时加载”选项。在 armeabit-v7a 中选择 ARMv7 CPU，在 x86 文件夹中选择 x86 CPU。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-03T19:10:26.730

我遇到了同样的问题，这里描述的解决方案不起作用。我觉得我的情况有点不同。我认为我正在导入的 .dll 依赖于其他 .dll 文件。所以我导入了与该 .dll 相关的其他文件（我认为这是不必要的，因为我没有直接在 c# 代码上调用它们）并且解决了这个问题。

# php - 如何命名这些 PHP 数组？

> ID：10003030
> 
> 赞同：0
> 
> 时间：2012-04-03T23:41:00.260
> 
> 标签：php, syntax

假设我需要三个阵列，福特、雪佛兰和道奇。每个数组包含三个项目：

```
$ford['engine'] = 'something';
$ford['color'] = 'something';
$ford['price'] = 'something';

$chevy['engine'] = 'something';
$chevy['color'] = 'something';
$chevy['price'] = 'something';

$dodge['engine'] = 'something';
$dodge['color'] = 'something';
$dodge['price'] = 'something'; 
```

我可以把它写出来没问题，而且不需要太长时间。但是，假设我需要制作五十或六十个阵列，所有阵列都有十到二十个不同的项目。我想在每个数组文件的顶部放置一个变量来表示数组名称，但我对语法不太清楚，我不太熟悉 $$ 或者我如何将它与数组一起使用：

```
$name = 'ford';

$(I want this to be "$name")['engine'] = 'something';
$(I want this to be "$name")['color'] = 'something';
$(I want this to be "$name")['price'] = 'something'; 
```

我也考虑过这样做：

```
$name = 'ford';

$view[$name.'_engine'] 
$view[$name.'_color'] 
$view[$name.'_price'] 
```

我可以就解决此问题的最佳方法获得一些建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T23:45:01.157

写一个小函数来做到这一点

```
$cars = array(); //Create an array to hold the values    
function writeArray($car, $var1, $var2, $var3) {
     global $cars;
     $cars[$car] = array('engine' =>  $var1, 'color' => $var2, 'price' => $var2);
}
//Now use it like
writeArray('Chevy', $something, $something, $something);

//If you want to access the array in the form of $ford['engine'] then use this

extract($cars); //This will split the array into small array accessible by model 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T23:45:09.217

您可以使用[变量变量](http://php.net/manual/en/language.variables.variable.php)：

```
$var = 'ford';
$$var['engine'] = '...';
$$var['color'] = '...';

$var = 'chevy';
$$var['engine'] = '...';
$$var['color'] = '...'; 
```

或者只使用多维数组：

```
$cars = array();

$make = 'ford';
$cars[$make] = array();
$cars[$make]['engine'] = '...';
$cars[$make]['color'] = '...';

// or

$cars['ford'] = array(
    'engine' => '...',
    'color' => '...',
); 
```

# html - 防止页面大小减小时页面内容脱节

> ID：10003033
> 
> 赞同：0
> 
> 时间：2012-04-03T23:41:07.803
> 
> 标签：html, css, overflow

我刚刚完成了我一直在构建的网站的草稿。不幸的是，我开始注意到设计在较小分辨率的屏幕上以及当用户缩小他/她当前的屏幕尺寸时看起来多么糟糕。

我指的网站可以在[这里](http://nanisolutions.us/wordpress/)看到。此外，我正在寻找的功能可以在大多数专业网站上看到，但我特别注意到它在 IBM 的网站上。当屏幕最小化时，标题内容与站点的其余部分保持不变。我一直在寻找 overlow: auto 在他们的 css 中的某个地方，但我在任何地方都没有看到它。

我可以改变什么来解决这个问题？

PS：我认为链接到我的网站比在这里发布代码更容易。但是，如果您想要一些代码，请告诉我，我会在此处嵌入一些内容。

保重，埃文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:53:18.297

IBM.com 没有做任何与您有明显不同的事情。

如果您希望您的设计可以在不同的设备上访问和使用，您可以考虑响应式设计。但是，请确保值得您花时间。例如，您的用户可能不会使用 iPhone 来让您的时间值得。

在视觉上，让你的菜单水平而不是垂直怎么样？并且还将您的图像居中到其父容器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:18:52.480

```
#full-height-template-container {
width: 1300px;  <-----  in your app here now the width is in %
border: 1px solid #262626;
height: 515px;
margin: 0 auto 20px;
overflow: auto;
} 
```

如您所见，我使用了以像素为单位的宽度，这样网站就保持完整。如果这是您需要的，那么没关系.. 如果没有，请告诉我，我会看看还能做些什么。

# iphone - 使用 Objective-C iOS 以编程方式创建 TableVIew

> ID：10003034
> 
> 赞同：13
> 
> 时间：2012-04-03T23:41:19.863
> 
> 标签：iphone, objective-c, ios, xcode

我是开发 iOS 应用程序和 Objective C 本身的新手，所以我有一个可能非常简单的问题。

目前我有以下从工具栏按钮单击调用的方法。该方法旨在在框架变量*fr*中创建表格视图。

```
- (IBAction)addGolfer:(id)sender {
    CGRect fr = CGRectMake(101, 45, 100, 416);

    UITableView *tabrleView = [[UITableView alloc]
      initWithFrame:fr
      style:UITableViewStylePlain];

    tabrleView.autoresizingMask =
      UIViewAutoresizingFlexibleHeight |
      UIViewAutoresizingFlexibleWidth;
    tabrleView.delegate = self;
    tabrleView.dataSource = self;
    [tabrleView reloadData];

    self.view = tableView;
} 
```

调用此方法的结果不是我所期望的。表格视图不是在框架“fr”中创建表格视图，而是填满整个屏幕。

再次，我是全新的，将不胜感激任何答案和任何建议。谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T06:08:10.370

当您为 设置`dataSource`和`delegate`属性时`UITableView`，这意味着您必须至少为 编写以下方法`dataSource`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 
```

如果你不这样做，它就会崩溃。总结你会得到这个（**这段代码可能包含语法或逻辑错误**——我在记事本中写的）：

```
@interface YourViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> {
    UITableView *firstTableView;
    UITableView *secondTableView;
}

@end 
```

//

```
@implementation YourViewController

#pragma mark - Objects Processing

- (void)addGolfer:(UIBarButtonItem *)sender {
    if (secondTableView) {
        [secondTableView removeFromSuperView];
        secondTableView = nil;
    }

    secondTableView = [[UITableView alloc] initWithFrame:CGRectMake(101, 45, 100, 416)];
    secondTableView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    secondTableView.delegate = self;
    tabrleView.dataSource = self;

    [self.view addSubview:secondTableView];
}

#pragma mark - TableView DataSource Implementation

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView == firstTableView) { // your tableView you had before
        return 20; // or other number, that you want
    }
    else if (tableView == secondTableView) {
        return 15; // or other number, that you want
    }
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

    cell.backgroundView = [[UIView alloc] init];
    [cell.backgroundView setBackgroundColor:[UIColor clearColor]];
    [[[cell contentView] subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];

    if (tableView == firstTableView) { // your tableView you had before
        // ...
    }
    else if (tableView == secondTableView) {
        cell.titleLabel.text = [NSString stringWithFormat:@"Cell %d", indexPath.row + 1];
    }

    return cell;
}

@end 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-04T05:13:07.410

**第 1 步：**添加委托`UITableViewDataSource,UITableViewDelegate`

```
@interface viewController: UIViewController<UITableViewDataSource,UITableViewDelegate>
{
   UITableView *tableView;
} 
```

**第2步：**

```
-(void)viewDidLoad
{
    tableView=[[UITableView alloc]init];
    tableView.frame = CGRectMake(10,30,320,400);
    tableView.dataSource=self;
    tableView.delegate=self;
    tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
    [tableView reloadData];
    [self.view addSubview:tableView];
} 
```

**第 3 步：** tableview 的属性（行和列）

//-- 对于表中的行数

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   return 10;
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
} 
```

//-- 表头高度（如果需要）

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
   return 50;
} 
```

//-- 将数据分配给单元格

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"Cell";
   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier   forIndexPath:indexPath] ;

   if (cell == nil)
   {
     cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
   }
   cell.textLabel.text=[your_array objectAtIndex:indexPath.row]; ***(or)*** cell.textLabel.text = @"Hello";
   return cell;
} 
```

//-- 触摸单元格时的操作

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   // Your custom operation
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-03T23:43:54.697

而不是设置的视图`UIViewController`，将 tableView 添加为子视图。

代替：

```
self.view = tableView; 
```

做这个：

```
[self.view addSubview:tableView]; 
```

这将正确尊重您设置的框架。

# python - 在python中计算往返距离

> ID：10003036
> 
> 赞同：1
> 
> 时间：2012-04-03T23:41:25.990
> 
> 标签：python, graph-algorithm

我的任务是计算从开始位置到我从 Facebook 获取的所有活动位置的往返距离（以英里为单位），然后返回到开始位置。到目前为止我的代码：

```
import json
import re
from urllib import urlopen
import math

def getLatRad(latitude):
    return float(latitude) * (math.pi/180.0)
def getLongRad(longitude):
    return float(longitude) * (math.pi/180.0)
tuplist =[]
finaltuplist = []
#start_latitude = float(input('Pls enter the latitude co-ordinate of your starting location:'))
#start_longitude = float(input('Pls enter the longitude co-ordinate of your starting location:'))
start_latitude = 41.721194054071
start_longitude = -73.934258235003
longRad1= getLongRad(start_longitude)
latRad1 = getLatRad(start_latitude)
def main():

    eventids = [
                '264100516989470',
                '129843580476568',
                '158475914271199',
               ]
    for event in eventids:
        f = urlopen('http://graph.facebook.com/%s' % event)
        d = json.load(f)
        name = d['name']
        longitude = d["venue"]["longitude"]
        latitude = d["venue"]["latitude"]
        tuplist.append((name,longitude,latitude))
    for coordinates in tuplist:
        longRad2= getLongRad(coordinates[1])
        latRad2= getLatRad(coordinates[2])
        dlon = longRad2 - longRad1 
        dlat = latRad2 - latRad1
        a = math.sin(dlat/2)**2 + math.cos(latRad1) * math.cos(latRad2) * math.sin(dlon/2)**2
        c = 2 * math.asin(math.sqrt(a)) 
        m = 3960 * c
        sum = m + m
        print sum
if __name__ == '__main__':
    main() 
```

据我所知，这是我自己做的。有没有人可以指出我正确的方向以获得总往返距离而不是从起始位置的各个距离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:45:48.670

所以分解你的问题和你的解决方案。目前你可以得到start和event1之间的距离，但是你不能得到event1和event2之间的距离。您还可以获取 start 和 event2 之间的距离。您需要在计算中更改什么以获得从 event1 到 event2 的距离？

**编辑细化请求：**

latRad1 = getLatRad(start_latitude) longRad1= getLongRad(start_longitude)

dlon = longRad2 - longRad1 a = math.sin(dlat/2)**2 + math.cos(latRad1) * math.cos(latRad2) * math.sin(dlon/2)**2

上面的 2 在你的 for 循环之外并且没有改变（我注意到了）。因此，当您移动到新位置来计算距离时，您仍然会根据起始坐标进行计算。

# c# - 在 C# 中检查 Excel 文件是否为空

> ID：10003045
> 
> 赞同：2
> 
> 时间：2012-04-03T23:42:32.280
> 
> 标签：c#

任何人都可以建议，如何检查 xls 文件是否为空？我试过`FileInfo("fname").Length == 0` 但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T23:47:04.057

“空”的 Excel 文件仍会有 Excel 文件头，这就是您对 0 大小的测试失败的原因。

您可以使用[Excel 互操作](http://msdn.microsoft.com/en-us/library/ms262200%28v=office.11%29.aspx)来查看[UsedRange](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._worksheet.usedrange%28v=office.11%29.aspx)是什么：

[http://social.msdn.microsoft.com/Forums/en-US/exceldev/thread/b9cdfbd7-5ae9-41f7-b7e8-ebc00e835d45#546316e8-8745-42e8-9c0d-063d1373dfbe](http://social.msdn.microsoft.com/Forums/en-US/exceldev/thread/b9cdfbd7-5ae9-41f7-b7e8-ebc00e835d45#546316e8-8745-42e8-9c0d-063d1373dfbe)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-21T05:23:07.093

因为`.xls`你可以试试这个——它对我有用。

```
FileUpload1.SaveAs(Server.MapPath("~/FileUpload/") + path.Value);
                Workbook book = Workbook.Load(Server.MapPath(("~/FileUpload/") + FileUpload1.FileName));
                Worksheet sheet = book.Worksheets[0];
                sheetCount.Value = sheet.Cells.LastRowIndex.ToString();

                foreach (Worksheet ws in book.Worksheets)
                {
                    if (ws.Cells.Rows.Count != 0)
                    {
                        ddlSheets.Items.Add(ws.Name.ToString());
                    }
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:47:26.190

我认为没有与您所说的类似的简单解决方案。

您将不得不通过一些 Excel 解析器以编程方式实际读取文件并检查是否有一些数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-01T09:35:16.307

使用 Excel 互操作，我创建了这个函数。它作为功能区插件工作，但是您可以替换`Globals.ThisAddIn`为`Excel.Application`.

```
private bool IsEmptyFolder(Excel.Workbook wb)
        {
            try
            {
                foreach(Excel.Worksheet sheet in wb.Worksheets)
                {
                    if (Globals.ThisAddIn.Application.WorksheetFunction.CountA(sheet.Cells) != 0) return false;
                }
                return true;
            }
            catch
            {
                return false;
            }
        } 
```

如果它在单元格中找到任何具有值的工作表，则返回 false。否则返回 true（工作簿为空）。

# c# - 获取经过身份验证的用户的信息（不是计算机名称）

> ID：10003052
> 
> 赞同：2
> 
> 时间：2012-04-03T23:43:44.713
> 
> 标签：c#, asp.net, authentication

我有一个登录页面，它调用以下事件处理程序：

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{        
    if (Login1.UserName == "abc" && Login1.Password == "1234"){
        if (Request["ReturnUrl"] != null)
        {
            FormsAuthentication.SetAuthCookie(userName, false, "AdminPart/AdminHome.aspx");
            FormsAuthentication.RedirectFromLoginPage(userName, Login1.RememberMeSet);
        }
        else
        {              
            FormsAuthentication.SetAuthCookie(userName, false, "AdminPart/AdminHome.aspx");
            Response.Redirect("HomePage.aspx");
        }
    }    
} 
```

我的 web.config 文件是这样的：

```
<system.web>
  <authorization>
    <deny users="?" />
  </authorization> 
```

现在，我试图在我的 HomePage.aspx.cs 中获取经过身份验证的用户的用户名，但`User.Identity.Name`返回我的计算机的名称。我尝试将以下代码添加到配置文件：

```
<authentication mode="Forms">
    <forms loginUrl="~/login.aspx" timeout="10" protection="All"></forms>
</authentication> 
```

但是线路又出现了问题`<authentication mode="Forms">`。在我添加这一行之后，在我的主页中，IDE 给了我一个警告，第一行开始时`<% Page ... %>`会出现运行时错误。

我用过`HttpContext.Current.User.Identity.Name`，也不行。我只是想在项目的不同部分获取经过身份验证的用户的名称。因此，如果必须，我可以更改逻辑。任何帮助将不胜感激。

编辑：我在 Windows 7（64 位）上使用 Visual Web Devepoler 2008 Express。

EDIT2：**问题**以某种方式解决。答案如下。如何？为什么？不能以编程方式完成吗？我不知道，我想知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:48:42.740

这是我找到的解决方案：首先，我删除了`web.config`文件中的授权标签。然后在解决方案资源管理器窗口中，我单击`Properties`图标并打开了 ASP.NET 的配置网页。然后我点击了`Security tab->Set up authentication`。我选择了带有 Internet 连接的选项，现在我可以在`Page.User.Identity.Name`任何地方访问经过身份验证的用户名。

# android - 如何从膨胀的 Android 表中获取按钮的标签？

> ID：10003054
> 
> 赞同：0
> 
> 时间：2012-04-03T23:43:47.260
> 
> 标签：android, android-layout

如何从充气表中获取按钮的标签？到目前为止我有以下代码，现在当我按下按钮时如何从按钮中获取标签？

```
TableLayout table = (TableLayout)findViewById(R.id.scheduleTable);
for (int i = 0; i < jlen; i++) { 

    // Inflate
    TableRow row = (TableRow)LayoutInflater.from(UpdateScheduleActivity.this).inflate(R.layout.schedulerow, null);
    ((TextView)row.findViewById(R.id.attr_day)).setText(json_schedule.getString(KEY_DOW));
    ((TextView)row.findViewById(R.id.attr_start)).setText(json_schedule.getString(KEY_START));
    ((TextView)row.findViewById(R.id.attr_stop)).setText(json_schedule.getString(KEY_STOP));
    ((Button)row.findViewById(R.id.btnRemove)).setTag(sid);
    table.addView(row);

}
table.requestLayout(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:51:53.557

在你的情况下

```
btn = (Button)**row**.findViewById(R.id.btnRemove); 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:48:10.197

您应该在 onItemClick 或 onClickListener 中获得对按钮的引用，从那里只需使用 view.getTag()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:12:45.463

正如 ByteMe 所说，您需要为您的按钮设置 onClickListener。类似的东西可能会起作用：

```
((Button)row.findViewById(R.id.btnRemove)).setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        ((Button) v).getTag();
        // Do whatever you like when the button is pressed.
    }
 }); 
```

# java - hql 通过集合查找实体

> ID：10003061
> 
> 赞同：3
> 
> 时间：2012-04-03T23:44:44.877
> 
> 标签：java, hibernate, collections, hql

我有一个名为**User**的休眠实体，它有一个**Set `<Book`>**

**Book**是另一个具有**字符串 bookName 的实体；**

我想找到所有拥有确切书籍列表的用户，例如

```
List<Book> booksList = Arrays.AsList(
                           getBook("Tom Sawyer"), getBook("Christmas Carol"));

List<Book> usersHavingThoseBooks = getCurrentSession()
      .createQuery("from Users u inner join u.books b where b in (:booksList)")
      .setParameterList("booksList", booksList)
      .list(); 
```

但这不是解决方案。我试图查询书籍的 id，这看起来更好，但它并没有**只**给我拥有**确切**书籍集的用户。

例如，如果我在数据库中有以下用户：

*   用户（id=1，书籍={“汤姆索亚”，“圣诞颂歌”}）
*   用户（id=2，books={“汤姆索亚”，“爱丽丝梦游仙境”}）
*   用户（id=3，books={“汤姆索亚”，“圣诞颂歌”，“爱丽丝梦游仙境”}）
*   User(id=4, books={"爱丽丝梦游仙境", "Sql for dummies"})

IN 子句将返回用户 1、2、3，而我只想要用户 1，因为他正好有“Tom sawyer”和“Christmas carol”。

我需要的第二个查询是让用户**至少**拥有我提供的列表中的书籍作为参数。例如，拥有两本书“Tom Sawyer”和“Christmas Carol”的所有用户以及拥有这两本书和任何其他书籍（一本或多本）的所有用户......

有谁知道如何实现这两个查询？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:53:28.753

try this:

`select u from Users u left join u.books b where b in (:booksList)`

# sql - 如何执行这样的查询？

> ID：10003062
> 
> 赞同：0
> 
> 时间：2012-04-03T23:44:46.697
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 表中有以下列`t_list`：
`firstid, firstpoints, secondid, secondpoints`

我想在 SQL 查询中选择所有这些列，但以特定方式排序。

我想选择这些列中的前 400 个，`firstpoints`仅对列排序`firstid`，并且`secondpoints`仅对`secondid`一个查询中的列排序，例如：

```
SELECT TOP 400 firstid, firstpoints 
FROM t_list 
ORDER BY firstpoints desc 
```

和

```
select top 400 secondid, secondpoints 
FROM t_list 
ORDER BY secondpoints desc 
```

如何将上述两个查询放入一个查询中，返回如下输出

```
firstid, firstpoints, secondid, secondpoints

1\. firstidresult, firstpointresult, secondidresult, secondpointsresult
2\. etc... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:55:52.650

这适用于 MS SQL Server

```
Select t1.FirstID, t1.FirstPoints, t2.SecondID, t2.SecondPoints
From (Select Top 400 row_number() Over (Order By FirstPoints desc) As r, FirstID, FirstPoints From t_list) As t1
    Join (Select Top 400 row_number() Over (Order By SecondPoints desc) As r, SecondID, SecondPoints From t_list) as t2 on t1.r = t2.r 
```

希望我正确理解了您的问题。

![在此处输入图像描述](../Images/50531f4daccbd1b10285b06237609a8b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:58:45.610

```
 SELECT *
FROM (
    SELECT TOP 400 FirstId
        ,FirstPoints
    FROM t_list
    ORDER BY FirstPoints
    ) f

UNION

SELECT *
FROM (
    SELECT TOP 400 SecondId
        ,SecondPoints
    FROM t_list
    ORDER BY SecondPoints
    ) s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:59:04.847

```
WITH CTE1 AS 
(SELECT 1 as [Order],
    firstid, 
    firstpoints,
    Row_Number() OVER (ORDER BY firstpoints desc ) as RowNum
FROM t_list 
),
CTE2 AS 
(SELECT 
    2,
    secondid, 
    secondpoints,
    Row_Number() OVER (ORDER BY secondpoints) as RowNum
FROM t_list 
)
SELECT [Order],
    firstid as Id, 
    firstpoints  as Points
FROM CTE1
WHERE RowNum <= 400
UNION 
SELECT [Order],
     secondid, 
     secondpoints 
FROM CTE2
WHERE RowNum <= 400
ORDER BY [Order], RowNum 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T05:39:57.213

您只需使用“UNION ALL”将两个过滤器组合到一个表中

（SELECT TOP 400 firstid, firstpoints FROM t_list
ORDER BY firstpoints desc）

联合所有

（select top 400 secondid, secondpoints
FROM t_list
ORDER BY secondpoints desc ）

# php - 自动关闭 HTML 标签

> ID：10003068
> 
> 赞同：0
> 
> 时间：2012-04-03T23:45:11.233
> 
> 标签：php, verification, html

我允许用户使用`<pre></pre>`标签在评论和文章中显示代码，但我遇到了一个我正在努力解决的问题。当用户未能关闭 HTML 标记时，例如：

```
 <pre>
        <html>
            <head>

            </head>
    </pre> 
```

评论似乎是空白的。我正在寻找的是某种功能，它会自动关闭用户错过的任何 HTML 标记。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:08:02.397

好吧，如果您不使用框架，那将变得令人讨厌，但是您的勇气令人钦佩。希望这将推动正确的方向。

我能想到的最简单的非框架解决方案是在解析来自用户的字符串时使用堆栈来推送和弹出标签。

**伪代码**

```
userData = getUserData();
stack = array();
loop (line in userData) {
   matches = search for "<*>"; // may have multiple on one line
   loop (match in matches) {
      tagName = getTagNameFrom(match);
      if ("/" is not found) {
         push tagName on stack;
      } else if ("/" is found) {
         pop tagName off stack; 
         // There was an error if the stack is
         // empty or the tagName that was popped was not
         // the same.
      }
   }
} 
```

This is by no means comprehensive and a framework is really recommended here, but hopefully it can help out a bit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:48:06.693

您可以使用 HTML Tidy 来解决这个问题。自动查找并关闭未关闭的标签。

[项目页面](http://tidy.sourceforge.net/)

# objective-c - iOS：图像不会从数组中删除

> ID：10003070
> 
> 赞同：0
> 
> 时间：2012-04-03T23:45:16.377
> 
> 标签：objective-c, ios, nsmutablearray

我正在开发一个行为类似于照片库的应用程序，并且我正在实现让用户从他们的画廊中删除照片的选项。为此，我决定在每张图片上放置一个隐形按钮。当用户点击“编辑”按钮时，每张图片上隐藏的删除按钮将变为活动状态。为了简单起见，我在每个隐藏按钮上使用了相同的 IBOutlet，并且我在 Interface Builder 中适当地标记了每个按钮。当用户点击图片上的按钮时，会出现一个警告视图，询问他们是否真的要删除它。如果他们单击“是”，我将调用 removeObjectAtIndex。这是我正在使用的代码：

```
- (IBAction)deleteButtonPressed:(id)sender {
    NSLog(@"Sender is %@", sender);
    UIAlertView *deleteAlertView = [[UIAlertView alloc] initWithTitle:@"Delete"
                                                              message:@"Are you sure you want to delete this photo?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];
    [deleteAlertView show];
    int imageIndex = ((UIButton *)sender).tag;
    deleteAlertView.tag = imageIndex;

}

- (void)alertView: (UIAlertView *) alertView 
clickedButtonAtIndex: (NSInteger) buttonIndex
{

    if (buttonIndex != [alertView cancelButtonIndex]) {
        NSLog(@"User Clicked Yes.");
        [self.array removeObjectAtIndex: alertView.tag];
    }
    [self.user setObject:array forKey:@"images"];
} 
```

这里的问题是，当我在警报视图中单击“是”时，什么也没有发生。但是，如果我再次点击图像并单击“是”，应用程序崩溃，并且调试状态： **由于未捕获的异常 'NSRangeException' 导致应用程序终止，原因：'-[__NSCFArray removeObjectAtIndex:]: index (0) Beyond bounds (0)'**所以，我不知道从哪里开始，我对编程还是很陌生，一切对我来说都是正确的。非常感谢任何帮助，谢谢！

这是我将它们添加到数组中的方法：

```
////start of saving////
- (void)viewWillAppear:(BOOL)animated
{

    self.user = [NSUserDefaults standardUserDefaults];

    self.array = [[self.user objectForKey:@"images"]mutableCopy];
    while(self.array == nil)
    {
        [self.user setObject:[NSMutableArray arrayWithObject:@""] forKey:@"images"];
        self.array = [[self.user objectForKey:@"images"]mutableCopy];
        NSLog(@"%@",@"attempting to create an array to store the images in");
    }

}

- (void)applicationDidEnterBackground:(UIApplication*)application {
    NSLog(@"Image on didenterbackground: %@", imageView);
    self.array = [NSMutableArray arrayWithObject:[NSData dataWithData:UIImagePNGRepresentation(imageView.image)]];

    [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView2.image)]];
     [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView3.image)]];
      [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView4.image)]];
       [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView5.image)]];

            [self.user setObject:self.array forKey:@"images"];
    [user synchronize];

            }

- (void)viewDidLoad
    {
        self.user = [NSUserDefaults standardUserDefaults];
        NSLog(@"It is %@", self.user);
        self.array = [[self.user objectForKey:@"images"]mutableCopy];
        imageView.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:0]];
        imageView2.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:1]];
        imageView3.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:2]];
        imageView4.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:3]];
        imageView5.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:4]];
        imageView6.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:5]];

        UIApplication *app = [UIApplication sharedApplication];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(applicationDidEnterBackground:)
                                                     name:UIApplicationDidEnterBackgroundNotification
                                                   object:app];

        backToGalleryButton.hidden = YES;
        tapToDeleteLabel.hidden = YES;
        deleteButton1.hidden = YES;
        [super viewDidLoad];

    }

- (void)viewDidUnload
    {
        self.user = nil;
    }

////end of saving

///// shows the hidden and invisible "delete" button over each photo.
- (IBAction)editButtonPressed:(id)sender {
    grabButton.hidden = YES;
    editButton.hidden = YES;
    backToGalleryButton.hidden = NO;
    tapToDeleteLabel.hidden = NO;
    deleteButton1.hidden = NO;
}

- (IBAction)deleteButtonPressed:(id)sender {
    NSLog(@"Sender is %@", sender);
    UIAlertView *deleteAlertView = [[UIAlertView alloc] initWithTitle:@"Delete"
                                                              message:@"Are you sure you want to delete this photo?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];
    [deleteAlertView show];
    int imageIndex = ((UIButton *)sender).tag;
    deleteAlertView.tag = imageIndex;

}

- (void)alertView: (UIAlertView *) alertView 
clickedButtonAtIndex: (NSInteger) buttonIndex
{

    if (buttonIndex != [alertView cancelButtonIndex]) {
        NSLog(@"User Clicked Yes.");
        NSLog(@"Array: %@, index: %d", self.array, alertView.tag);
        [self.array removeObjectAtIndex: alertView.tag];
    }
    [self.user setObject:array forKey:@"images"];
}
@end 
```

**编辑：**这是我用来将对象从用户相机胶卷放入 UIImageView 的代码：

```
- (IBAction)grabImage {
    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.delegate = self;
    self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        _popover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
        [_popover presentPopoverFromRect:self.imageView.bounds inView:self.imageView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 

    else {
        [self presentModalViewController:imgPicker animated:YES];
    }
    [self.imgPicker resignFirstResponder];
}
// Sets the image in the UIImageView
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    if (imageView.image == nil) {
        imageView.image = img;
        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;

    }

    if (imageView2.image == nil) {
        imageView2.image = img;
        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView3.image == nil) {
        imageView3.image = img;
        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView4.image == nil) {
        imageView4.image = img;
        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

} 
```

当我添加 NSLog(@"Array: %@, index: %d", self.array, alertView.tag); 就在 removeAtIndex 之前，控制台说**2012-04-03 18:39:39.066 AppName[1631:f803] Array: (null), index: 0.**这可能是原因吗？我不确定为什么会这样，我认为代码看起来不错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:51:32.150

从阵列中删除图像并不是您必须采取的唯一步骤。您的代码对于从数组中删除图像是正确的，这就是为什么您第二次将图像越界，但您还需要从 UI 中删除图像，这样用户就不能再删除不存在的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T00:29:34.880

这段代码有很多奇怪之处，但我认为问题在于您没有在 viewwillappear 和 viewdidload 函数上调用 super 。我会摆脱您的 viewWillAppear 方法，因为它没有任何用处。

# c++ - 宏扩展至预处理器块

> ID：10003077
> 
> 赞同：0
> 
> 时间：2012-04-03T23:46:34.097
> 
> 标签：c++, c, visual-c++, macros

在每个函数定义之前，我的项目中都有以下预处理器（代码）块，以整理日志记录宏。

```
#ifdef FC_NAME
#undef FC_NAME
#endif

#define FC_NAME  "myFunctionName" 
```

但这本身看起来有点混乱。

所以，我正在考虑用看起来更简单的东西替换它并尝试了这个

```
#define REDEF_FC_NAME(funcName) #ifdef FC_NAME \
\                                 #undef FC_NAME \
\                               #endif \
\                               #define FC_NAME funcName \ 
```

但这给出了在宏中说宏 def 的错误。那么，有没有办法达到同样的效果呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:48:56.567

简短的回答是：你不能用宏来做到这一点。

但：

在 C++ 中，每个函数都有一个预定义的`__func__`变量。

GCC 将其作为 C 的扩展提供，我确信许多其他编译器也是如此。在 Windows 上，似乎有`__FUNCTION__`宏（参见[http://msdn.microsoft.com/en-us/library/b0084kay(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/b0084kay(v=vs.71).aspx)）。

# ios - 没有有效的 com.apple.developer.ubiquity-kvstore-identifier 权利 AD HOC iCloud

> ID：10003088
> 
> 赞同：1
> 
> 时间：2012-04-03T23:48:19.003
> 
> 标签：ios, icloud, key-value-store, nsubiquitouskeyvaluestore

我在使用 iCloud 键值存储时遇到问题。我目前有一个由 iCloud 同步的核心数据，但我无法让 KV Store 工作我得到：

```
com.domain.appname has no valid com.apple.developer.ubiquity-kvstore-identifier entitlement 
```

com.domain.appname 是我的 appid 的格式，为保护隐私而屏蔽。

这已经存在了一段时间，我见过有人遇到这个问题，重新安装应用程序时问题就消失了，但这不适用于我。不知道为什么。

我的权利：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.developer.ubiquity-container-identifiers</key>
    <array>
        <string>$(TeamIdentifierPrefix)com.domain.appname</string>
    </array>
    <key>com.apple.developer.ubiquity-kvstore-identifier</key>
    <string>$(TeamIdentifierPrefix)com.domain.appname</string>
    <key>keychain-access-groups</key>
    <array>
        <string>$(TeamIdentifierPrefix)com.domain.appname</string>
    </array>
</dict>
</plist> 
```

如果您还需要什么就问吧，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:06:27.610

[这个链接](http://dhilipsiva.com/2012/07/24/xcode-could-not-launch-app-no-such-file-or-directory-error.html)对我有用。尝试这个。重新安装应用程序并退出 xcode 并重新启动设备。它会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-08T18:58:08.647

简单地说，错误是在您启用 iCloud 功能时生成的权利文件中缺少**com.apple.developer.ubiquity-kvstore-identifier“密钥” 。**按照我附上的屏幕截图中的步骤操作：

或 1\. 只需转到权利文件并右键单击任何行并选择 Show Raw Keys/Values

2.  当您将鼠标悬停在授权文件行（顶部）上时，将出现一个加号按钮。

3.  单击它，将出现下拉列表，选择 com.apple.developer.ubiquity-kvstore-identifier 并为该值复制并粘贴此***$(AppIdentifierPrefix)YOUR_BUNDLE_ID***

4.  干净的。建造。享受。

![授权文件屏幕截图](../Images/fbe32a260d3a5e3d1f9034bb508b1068.png)

# design-patterns - 闭包设计模式

> ID：10003089
> 
> 赞同：5
> 
> 时间：2012-04-03T23:48:26.593
> 
> 标签：design-patterns, language-agnostic, groovy, closures

这些天我正在学习设计模式。有很多关于编程设计模式的文档，但我对闭包设计模式很感兴趣。

我找到了 Venkat Subramaniam 关于[Java 和 Groovy 中的设计模式](http://www.agiledeveloper.com/presentations/design_patterns_in_java_and_groovy.pdf)的演示文稿，并根据我自己的经验提取了该演示文稿中涉及闭包和其他模式的一些模式。

## 执行环绕方法

操作前后需要执行的一对操作。

```
def operations(closure) {
    println "Open"
    closure()
    println "Close"
}

operations { println "Operation" }

===> Open
===> Operation
===> Close 
```

## 可插拔行为

指定对象在运行时的行为。

```
def selectValues(number, closure) {
    def list = []
    1.upto(number) {
        if (closure(it)) list << it
    }
    return list
}

assert [2, 4, 6, 8, 10] == selectValues(10) { it % 2 == 0 }  // even
assert [1, 3, 5, 7, 9]  == selectValues(10) { it % 2 != 0 }  // odd 
```

## 迭代器模式

允许顺序访问元素。

```
def listNumbers(closure) {
    (0..5).each { closure it }
}

listNumbers {
    if (it < 3) println "$it is a little number"
    else println "$it is a big number"
}

===> 0 is a little number
===> 1 is a little number
===> 2 is a little number
===> 3 is a big number
===> 4 is a big number
===> 5 is a big number 
```

## 动态条件执行

创建并执行条件操作。

```
def greet(user, successClosure, failClosure) {
    if (isAdmin(user)) successClosure()
    else failClosure()
}

greet(user, { println "Hi Admin!" }, { println "Hello User" }) 
```

我想了解更多闭包设计模式。有没有关于这个话题的参考？随意用你最喜欢的编程语言编写一个新模式。

* * *

### 更新

我写了一篇关于这个主题的帖子（Groovy 和 Ruby，但内容相同）：
[闭包设计模式](http://arturoherrero.com/closure-design-patterns/)
[闭包设计模式。红宝石版](http://arturoherrero.com/closure-design-patterns-ruby-edition/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T00:23:48.087

我认为您将闭包与 lambda/匿名函数混淆了？

[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)是具有绑定变量的词法上下文。简而言之，如果您从函数内部定义函数，则内部函数可以访问外部函数中定义的变量。在这种情况下，“词汇上下文”是外部函数。

[Lambda](http://en.wikipedia.org/wiki/Anonymous_function)是没有变量赋值的函数。例如，在 Ruby 中，您可以将块传递给函数，而函数可以仅使用`yield`关键字在内部调用它。在 JavaScript 中，您可以定义一个函数并同时将其作为参数传递。你的例子就是这样。

[一等函数](http://en.wikipedia.org/wiki/First-class_function)是另一回事，它们是可以像常规对象一样传递的函数。您可以将它们作为参数传递给函数调用并保存对它们的引用。这就像 Ruby 的`Proc`. 在 JS 中，所有的函数都是一等的，所有的函数都是对象。

在 JavaScript 中，我们可以用一个愚蠢的例子来说明所有 3 个：

```
function foo(func) {
  func();
}
var bar = function() {    // bar is a first-class function
  var i = 5;
  foo(function() {        // this is the anonymous function (lambda)
    console.log(i);       // i is the closure-bound variable
  });
}
foo(bar);   // Prints 5 
```

因此，这使您的问题令人困惑。闭包是一种语言特性，而不是一种设计模式。有很多设计模式的实现*可以使用*闭包或 lambda 或模或构造函数或其他任何东西，正如您通过这些示例向自己展示的那样。虽然这些都不是[经典的设计模式](http://en.wikipedia.org/wiki/Design_Patterns)，但我不确定我是否会这样称呼它们。也许我会称它们为糖。

Java 可以实现各种设计模式，但没有这些特性。很多这类事情都是通过接口完成的，这是一种完全不同的语言特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:42:52.913

正如人们所说，这些并不是真正的“模式”，并且是特定于 Groovy 的，但是闭包的另外两个用途是：

### 1\. 可组合性

```
def sum    = { Collection a -> a.sum() }
def first2 = { Collection a -> a.take( 2 ) }

def take2andAdd = sum << first2

println take2andAdd( [ 1, 2, 3, 4 ] ) // Prints 3 
```

### 2.咖喱

```
def add = { a, b -> a + b }
def add2 = add.curry( 2 )

println add2( 3 ) // Prints 5 
```

当然，这些可以组合：

```
def square = { a -> a * a }
def add = { a, b -> a + b }
def add2 = add.curry( 2 )

def add2andSquare = square << add2

println add2andSquare( 3 ) // prints 25 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:08:13.283

我同意其他回应，因为谈论闭包设计模式并没有真正的意义（尤其是当您似乎真的在谈论一流的功能时；））。我认为您真正想要了解的重点是在实现设计模式时如何使用诸如一流函数、lambda 和闭包之类的工具。尽管它特定于 Groovy，但您可能会发现查看此页面很有用：http: [//groovy.codehaus.org/Design+Patterns+with+Groovy](http://groovy.codehaus.org/Design+Patterns+with+Groovy)

例如，“Loan my Resource Pattern”展示了如何以与“Execute Around Method”模式非常相似的方式使用闭包，而“Visitor Pattern”也很好地利用了闭包，但并未包含在你的清单。

# knockout.js - Knockout From 和 To datepicker 场景

> ID：10003097
> 
> 赞同：0
> 
> 时间：2012-04-03T23:49:42.070
> 
> 标签：knockout.js, jquery-ui-datepicker

我有一个场景，我使用 datetimepicker 输入 From 和 To 日期。如果我以“To”日期不能小于“From”日期的方式设置约束，则绑定不再起作用。这是小提琴：http: [//jsfiddle.net/ericpanorel/PkpP6/](http://jsfiddle.net/ericpanorel/PkpP6/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:47:39.510

如果您提供了 onselect，Datepicker 将不会触发更改事件。以下是来自 jquery ui 代码的部分：

```
var onSelect = this._get(inst, 'onSelect');
if (onSelect)
  onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback
else if (inst.input)
   inst.input.trigger('change'); // fire the change event 
```

为了解决您的问题，请在 onSelect （当用户从​​日期选择器窗口中选择日期时触发）和“onchange”（您仍然需要处理文本框编辑的最后一个）中更新模型

小提琴：

[http://jsfiddle.net/PkpP6/1/](http://jsfiddle.net/PkpP6/1/)

# java - Talend 的 JSON 解析器

> ID：10003100
> 
> 赞同：2
> 
> 时间：2012-04-03T23:50:05.783
> 
> 标签：java, json, talend

我需要一些帮助来设计一种在 Talend 作业（Java 作业，而不是 Perl）中解析 JSON 文档的策略。我正在使用 Talend 版本：5.0.2 并在 Mac 上开发，计划在 Linux 机器上运行。

不幸的是，由于我的文件格式，我无法使用 tFileInputJSON 组件——每个文件包含数百个 JSON 文档，一个完整的 JSON 文档占据文件中的一行。我认为正确的解决方案是逐行读取文件，然后将其传递到 JSON 解析器，然后从那里将结果发送到工作的其余部分。

在我看来，我的选择是：

a) 将行输入发送到某种 Java JSON 解析器。如果这是我需要采取的策略，我想要一些关于如何处理输出和获取的建议

b) 找到解析 JSON 文档的 Talend 组件，但在流中，而不是在有效 JSON 格式的单个文件中。

我四处寻找这个组件，但似乎找不到它。从我的搜索来看，tFileInputJSON 组件似乎也相对较新。

**我绝对知道这是 Java 可以轻松完成的事情。我的问题是让整个事情在 Talend 框架内同步。**

有人对我下一步应该转向哪里有一些建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T00:10:19.680

您是否尝试过创建自定义例程？您可以在代码下（在左侧的存储库窗口中）执行此操作，右键单击例程并创建您的自定义例程。这使您可以编写一个 Java 函数，然后可以从您工作中的某个位置（tMap、tJava 等）调用该函数。您可以读取您的输入文件并在每一行/元素上调用一个函数，或者任何您想做的事情。

与任何 Java 函数一样，该例程随后可以写入文件、打印到屏幕或返回一些列表对象，您可以在另一个 tJava、tJavaFlex、tJavaRow 或您工作中的任何 Talend 组件中进一步处理这些对象。

它可能会让人觉得有点 hacky，但您可以使用自定义例程做很多事情。

如果你想一路走下去，创建自己的组件，这可能是一个不错的入手方式：[http](http://www.talendforge.org/forum/viewtopic.php?id=17650) ://www.talendforge.org/forum/viewtopic.php?id= 17650 当然，创建组件远不止于此耗时，但如果您认为您将在多个项目/案例中重用此代码，则可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:13:12.090

逐行读取文件，并为每一行构造一个[JSON 对象](http://www.json.org/java/)。

```
final BufferedReader br = new BufferedReader(new FileReader(file));
String line;

while ((line = br.readLine()) != null)         // read until EOF
{
  final JSONObject json = new JSONObject(line);
  ...
}

br.close(); 
```

# android - MonoDroid 中的 GetItemIdAtPosition 返回什么？

> ID：10003104
> 
> 赞同：0
> 
> 时间：2012-04-03T23:51:17.847
> 
> 标签：android, event-handling, xamarin.android, arrays

我在网上找不到该功能的任何文档，谷歌甚至没有发现任何远程有用的东西。我试图找到原始代码但失败了:)（我怀疑我是否能理解它。）所以有人知道这个函数实际上是做什么的吗？它返回什么“项目 ID”？

我认为如果`GetItemAtPosition`返回项目中包含的字符串，`GetItemIdAtPosition`可能会返回“名称”属性的内容。但像往常一样，它并不像预期的那样。

我使用了基于此的微调器：

```
<string-array name="choices">
    <item>Choose action</item>
    <item name="3">Back to 3</item>
    <item name="2">Back to 2</item>
</string-array> 
```

从微调器中选择选项时使用 toast 进行输出：

```
private void choice_callback (object sender, ItemEventArgs e) {
    Spinner spinner = (Spinner)sender;
    string toast = string.Format ("Chosen action: {0} at pos {1} ID {2}", 
        spinner.GetItemAtPosition (e.Position), 
        e.Position, 
        spinner.GetItemIdAtPosition(e.Position));
    Toast.MakeText (this, toast, ToastLength.Short).Show ();
} 
```

输出“Chosen action: Back to 3 at pos 1 ID 1”和类似的；换句话说，返回的`spinner.GetItemIdAtPosition(e.Position)`似乎和它自己是一样的`e.Position`。

旁注：该应用程序基于此微调器教程：[http](http://docs.xamarin.com/android/tutorials/User_Interface/spinner) ://docs.xamarin.com/android/tutorials/User_Interface/spinner 。我只采用了您可以在上面看到的位来尝试查看下拉列表中的项目是否可以通过它们的位置以外的方式来识别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:31:27.603

它返回`GetItemId(int position)`适配器返回的值。这是一个显示如何的示例。它基于[http://docs.xamarin.com/android/tutorials/User_Interface/spinner](http://docs.xamarin.com/android/tutorials/User_Interface/spinner)教程：

```
protected override void OnCreate(Bundle bundle)
{
    base.OnCreate(bundle);

    SetContentView(Resource.Layout.Main);

    Spinner spinner = FindViewById<Spinner>(Resource.Id.spinner);

    spinner.ItemSelected += SpinnerItemSelected;
    spinner.Adapter =
        new MyAdapter(this, Android.Resource.Layout.SimpleSpinnerItem,
            Resources.GetStringArray(Resource.Array.planets_array));
}

private void SpinnerItemSelected(object sender, ItemEventArgs e)
{
    Spinner spinner = (Spinner) sender;
    string toast = string.Format("The planet is {0}",
        spinner.GetItemIdAtPosition(e.Position));
    Toast.MakeText(this, toast, ToastLength.Long).Show();
}

public class MyAdapter : ArrayAdapter
{
    private int[] _newIds = new[] {9, 7, 5, 3, 1, 8, 6, 4, 2};

    public MyAdapter(Context context, int textViewResourceId, object[] objects)
        : base(context, textViewResourceId, objects)
    {
    }

    public override long GetItemId(int position)
    {
        return _newIds[position];
    }
} 
```

发生的情况是，当您选择一个项目时，它会显示适配器返回的值。在这个例子中，我为每个位置使用了随机值。如果选择第二项，则返回`_newIds`数组中第二个位置的值，即`7`.

# java - 模式和匹配器：如何连接模式和字符串以进行文件搜索

> ID：10003110
> 
> 赞同：0
> 
> 时间：2012-04-03T23:52:43.227
> 
> 标签：java, class, amazon-s3, amazon-web-services, amazon

因此，我在 Java 中使用 AWS 开发工具包，并创建了一个类来下载 S3 服务器中的存储桶/对象。

我现在需要创建通配符或模式之类的东西来附加一个名为（“报告”）的字符串。我想出的唯一方法是创建一个模式匹配器变量，如下所示：

```
 Pattern p = Pattern.compile("[a-zA-Z][0-9]");
    Matcher m = p.matcher(prePattern);

    ObjectListing s3ObjectList = s3client.listObjects(new ListObjectsRequest()
                                               .withBucketName(bucketName)
                                               .withPrefix(m  + "reports"));+ 
```

谁能告诉我我正在尝试做的事情是否有更好的解决方案，或者我是否做得正确？

谢谢！

* * *

新代码：

```
 String bucketName = "blabla";
      String prePattern = "^[a-z0-9_-]{1,30}$";
      String prefixPat = " -- Insert Pattern Here -- ";
      ArrayList<String> objPrefix = new ArrayList();

    Pattern p = Pattern.compile(prePattern);
    Matcher m = p.matcher(prefixPat);

    for(int i=0; i<= objPrefix.size(); i++)
   {
        objPrefix.add(m + "reports");
        ObjectListing s3ObjectList = s3client.listObjects(new ListObjectsRequest()
                                               .withBucketName(bucketName)
                                               .withPrefix(objPrefix.get(i)));

   } 
```

大家想好了吗？真的很感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:26:04.210

对 AWS 了解不多，但这段`m + "reports"`代码正在调用`m.toString`它并将其与文字“报告”连接起来。Matcher 对象的 toString 通常没有那么有用。

从这段代码：

```
Pattern p = Pattern.compile("[a-zA-Z][0-9]");
Matcher m = p.matcher("test");
System.out.println( m +  "reports" ); 
```

我在 OS X 上得到这个：

```
 java.util.regex.Matcher[pattern=[a-zA-Z][0-9] region=0,4 lastmatch=]reports 
```

可能不是您想要传递给的内容`ObjectListing`。

您需要将 替换`m +`为对您的代码更有意义的内容。

# c++ - 如何更好地处理依赖于模板参数的类成员类型？

> ID：10003115
> 
> 赞同：1
> 
> 时间：2012-04-03T23:52:54.363
> 
> 标签：c++, templates, opencl, specialization

我正在尝试编写一些代码来将原生 C++ 类型的数组转换为 OpenCL 标准定义的适当大小的向量类型。

字节序和打包是特定于 OpenCL 实现的。OpenCL 类型不提供方便的运算符[]。（实际上 API 是 C ）另一个问题：`cl_int4`有一个`.s3`成员，但`cl_int2`没有。

我有一些在功能上可以工作的东西，但你可以看到我已经进入了模板疯狂的领域。

**这可以以更好的方式完成吗？** 这些函数不会经常被调用，所以*最好*是减少程序二进制大小和更少冗长的源代码的组合。

这是我到目前为止所得到的。我没有向您展示所有维度的特化（省略 3-6），而且我也想至少实现整数类型。

```
#include <CL/cl.h>

template < typename HOST_T, int NUM_DIM >
struct Payload_t;

// Vector length needs to be (for dims 1-6):  2, 4, 8, 8, 16, 16

//single precision

template < >
struct __attribute__((packed)) Payload_t <float, 1> { 
    cl_float2 vec;
    void setElement( int pos, float value )
    {
        switch (pos) {
            case 0: vec.s0 = value; return;
            case 1: vec.s1 = value; return;
            default: return;
        }
    }
};

template < >
struct __attribute__((packed)) Payload_t <float, 2> { 
    cl_float4 vec;
    void setElement( int pos, float value )
    {
        switch (pos) {
            case 0: vec.s0 = value; return;
            case 1: vec.s1 = value; return;
            case 2: vec.s2 = value; return;
            case 3: vec.s3 = value; return;
            default: return;
        }
    }
};

/// double-precision

template < >
struct __attribute__((packed)) Payload_t <double, 1> { 
    cl_double2 vec;
    void setElement( int pos, double value )
    {
        switch (pos) {
            case 0: vec.s0 = value; return;
            case 1: vec.s1 = value; return;
            default: return;
        }
    }
};

template < >
struct __attribute__((packed)) Payload_t <double, 2> { 
    cl_double4 vec;
    void setElement( int pos, double value )
    {
        switch (pos) {
            case 0: vec.s0 = value; return;
            case 1: vec.s1 = value; return;
            case 2: vec.s2 = value; return;
            case 3: vec.s3 = value; return;
            default: return;
        }
    }
}; 
```

我想你可能会好奇我会如何使用这个类。在一个示例中，我有一个以 REAL 类型为模板的类，该类具有以下成员类的实例，其中包含`Payload_t`.

```
template <int NUM_DIM >
struct cartesian_box_descriptor_t : cartesian_box_descriptor_base_t
{
    static const int vectorLengthArray[6];
    void set_dx( REAL * dx_vec )
    {
        for (int i = 0; i < NUM_DIM; ++i)
            payload.setElement( i, dx_vec[i] );
    };
    void set_startx( REAL * startx_vec )
    {
        for (int i = 0; i < NUM_DIM; ++i)
            payload.setElement( NUM_DIM + i , startx_vec[i] );
    };

    virtual WxAny getDescriptorStruct() const
    {
        return WxAny( payload ); // packages this simple structure as 'scalar' with hidden type
    };

    Payload_t< REAL, NUM_DIM> payload;
}; 
```

封装 OpenCL 支持的`getDescriptorStruct()`类型，我可以将其作为内核参数发送到 OpenCL API，所有字节都位于正确的位置。

如果有人正在考虑范式转变，我只需要一次设置整个向量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:12:38.253

我不确定是为此感到自豪还是感到羞耻，但它确实有效。您确实需要确保对 set() 的所有调用都使用正确的类型。它自动处理新的 cl_ 类型和新大小的 cl_ 类型，仅在 3 个位置进行更改。如果有人愿意，它可能会被进一步清理。

```
#include<iostream>
#include<assert.h>

struct cl_float1 {
  float s0;
};

struct cl_float2 {
  float s0;
  float s1;
};

#define ZERO_THROUGH_15(pre) \
  pre i0;            \
  pre i1;            \
  pre i2;            \
  pre i3;            \
  pre i4;            \
  pre i5;            \
  pre i6;            \
  pre i7;            \
  pre i8;            \
  pre i9;            \
  pre i10;           \
  pre i11;           \
  pre i12;           \
  pre i13;           \
  pre i14;           \
  pre i15

template<typename SIMD, typename POD>
struct offset {
  static POD SIMD::* data[16];
  ZERO_THROUGH_15(static bool);
  offset() {
    ZERO_THROUGH_15();
  }
};
template<typename SIMD, typename POD>
/*static*/ POD SIMD::* offset<SIMD,POD>::data[16];

template<int n>
struct offsetGetter {
  template<typename SIMD, typename POD>
  static POD SIMD::* get(...) {
    return NULL;
  }
};

#define GET_OFFSET(n) \
template<> \
struct offsetGetter<n> { \
  template<typename SIMD, typename POD, POD SIMD::* OFS> \
  struct check {}; \
\
  template<typename SIMD, typename POD> \
  static POD SIMD::* get(check<SIMD, POD, &SIMD::s ## n>*) { \
    return &SIMD::s ## n; \
  } \
\
  template<typename SIMD, typename POD> \
  static POD SIMD::* get(...) { \
    return NULL; \
  } \
  template<typename SIMD, typename POD> \
  static bool init() { \
    offset<SIMD,POD>::data[n] = get<SIMD,POD>(NULL);    \
  }; \
}; \
template<typename SIMD, typename POD> \
 /*static*/ bool offset<SIMD,POD>::i##n = offsetGetter<n>::init<SIMD,POD>()

GET_OFFSET(0);
GET_OFFSET(1);
GET_OFFSET(2);
GET_OFFSET(3);
GET_OFFSET(4);
GET_OFFSET(5);
GET_OFFSET(6);
GET_OFFSET(7);
GET_OFFSET(8);
GET_OFFSET(9);
GET_OFFSET(10);
GET_OFFSET(11);
GET_OFFSET(12);
GET_OFFSET(13);
GET_OFFSET(14);
GET_OFFSET(15);

template<typename SIMD, typename POD>
void set(SIMD& simd, int n, POD val) {
  offset<SIMD,POD> ignoreme;
  POD SIMD::* ofs = offset<SIMD,POD>::data[n];
  assert(ofs);
  simd.*ofs = val;
}

main(){
  cl_float2 x;
  set(x, 0, 42.0f);
  std::cout << x.s0 << std::endl; // prints 42
  set(x, 1, 52.0f);
  std::cout << x.s1 << std::endl; // prints 52
  cl_float1 y;
  set(y, 1, 42.0f); // assertion failure
} 
```

# linux - 如何为 Linux 编写低级设备驱动程序？

> ID：10003117
> 
> 赞同：3
> 
> 时间：2012-04-03T23:53:28.140
> 
> 标签：linux, driver

我记得在 Comp 大学教育快结束时读过一些关于 Linux 设备驱动程序的书。科学。不久之后，我找到了一份工作，并没有真正使用 Linux/Embedded（我现在主要做 java 的东西）。然而，这是我想研究的东西。

无论如何，我记得读过一篇在线文章（如果我能找到它，我会编辑帖子）关于为类似于这样的小型“USB 导弹炮塔”编写 Linux 的 USB 驱动程序： [http ://www.thinkgeek.com/geektoys/warfare/ 8a0f/](http://www.thinkgeek.com/geektoys/warfare/8a0f/)

无论如何，它详细介绍了如何在不提供驱动程序的情况下编写驱动程序（这个人刚刚在 ebay 上找到了一个通用的驱动程序……并想出了如何喜欢……仅通过查看组件等来编写驱动程序）。无论如何，这真是太棒了。

我对低级嵌入式东西的工作原理有一个很好的线索，但对于 AVR/PIC 微控制器之类的东西，我不知道如何为 PC 中的普通处理器编写这样的东西。

无论如何，我想我要问的是......你是如何弄清楚这种东西的，我在哪里可以找到这样的信息。

编辑：找到链接 [http://matthias.vallentin.net/blog/2007/04/writing-a-linux-kernel-driver-for-an-unknown-usb-device/](http://matthias.vallentin.net/blog/2007/04/writing-a-linux-kernel-driver-for-an-unknown-usb-device/)

（这比我想的更令人困惑，我没有意识到他对 Windows USB 驱动程序进行了逆向工程……我猜如果不窥探 Windows 驱动程序就不可能弄清楚？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:57:30.823

[Linux 内核和驱动程序](http://lxr.linux.no/#linux+v2.6.35/drivers)是GDFL[源代码](http://en.wikipedia.org/wiki/GDFL)。您可以阅读代码、更改它们、编译它们，并根据您的内心对它们进行试验。这是一个非常好的学习方法。

# javascript - 有没有一种内置的方法可以反向使用 JQuery 的 .each() ？

> ID：10003120
> 
> 赞同：2
> 
> 时间：2012-04-03T23:53:51.697
> 
> 标签：javascript, jquery

> **可能重复：**
> [JQuery .each() 向后](https://stackoverflow.com/questions/1394020/jquery-each-backwards)

`.each()`反向使用最简单的方法是什么？目前我正在这样做：

```
var temp = [];

$("#nav a").each(function()
{
    temp.push($(this));
});

temp.reverse();
for(var i = 0; i < temp.length; i++)
{
    var a = temp[i];

    // Work with a.
} 
```

如果我能做这样的事情会很好：

```
$("#nav a").reverse().each(function()
{
    // Work with $(this).

}); 
```

上下文是我有一个元素集合，使用`float: right`它以相反的顺序显示它们，我想像往常一样从左到右迭代它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T23:59:32.757

用这个

```
$($("#nav a").get().reverse()).each(function() { 
     //..........
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:59:47.780

我不能对此表示赞赏，因为我在 SO 的其他地方看到了它，但我认为这应该会有所帮助；像这样将功能添加到 jQuery 的原型中：

```
$.fn.reverse = [].reverse 
```

然后按照上面的说明使用它：

```
$('#nav a').reverse(); // returns a reversed array of elements 
```

希望这可以帮助 ：）

# android - 按“返回”按钮关闭应用程序

> ID：10003123
> 
> 赞同：0
> 
> 时间：2012-04-03T23:54:20.523
> 
> 标签：android, eclipse, back

我目前正在缓慢但稳步地制作一个 Android 应用程序，我目前正在学习如何创建一个新窗口并切换到它。这一切都很好，但我有一个小问题。当我按下“返回”按钮时，即使我在按下该按钮时选择返回，也会关闭应用程序。

```
@Override
public void onBackPressed() {
    finish();
    return;
} 
```

我错过了什么吗？

提前致谢。

**编辑**

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{       
    // Handle item selection
    switch (item.getItemId())
    {
    case R.id.menuItem1:
        setContentView(R.layout.about);
        return true;
    case R.id.menuItem2:
        System.exit(0);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

**编辑 2**：关于.java

```
package weather.right;

import weather.right.now.R;
import android.os.Bundle;

public interface About {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.about);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:07:18.853

您需要使用`Intents`“切换窗口”。“窗口”`Activity`在 Android 中称为 an，您可以`Activity`使用`setContentView()`调用`onCreate()`.`Activity`

`Activity`要从当前启动另一个`Activity`，只需创建一个`Intent`带有一些参数并`startActivity()`使用它调用`Intent`。这是一个例子：

```
Intent i = new Intent(this, TheNextActivity.class);
startActivity(i); 
```

不要忘记`Activity`在 Android 清单文件中包含您的第二个。您的应用程序中的所有`Activities`内容都必须包含在该文件中。

其他需要注意的是，您并没有真正`System.exit()`在 Android 中使用。只要打电话`finish()`。建议让 Android 管理应用程序及其资源，而不是自己做，但如果您想确保您的应用程序确实已关闭，请随意使用`System.exit()`。如果`onBackPressed()`您只调用`finish()`. 当您点击后退按钮时，这是 Android 中的标准行为。

此外，您不会`setContentView()`多次调用每个`Activity`. `Activity`当您需要更改视觉效果（或使用其中一个专门的小部件在布局之间切换）时，您可以开始一个新的。

这也解释了为什么您会遇到“问题”。您可能已经更改了`Activity`using的布局`setContentView()`，但仍然只有一个`Activity`正在运行 - 当您调用 时`finish()`，它`Activity`会关闭。如果您`Activity`以不同的布局开始第二个，就像您应该做的那样，Android 会关闭第二个`Activity`并将您返回到第一个。

# iphone - 有什么方法可以从 Iphone 上收到的短信中获取发件人电话号码？

> ID：10003128
> 
> 赞同：0
> 
> 时间：2012-04-03T23:54:51.700
> 
> 标签：iphone, ios

我意识到 ios 沙盒会阻止您查看 SMS 消息的内容，但有什么解决方法吗？如果将消息发送到 Skype 或 google 语音号码，那么 iPhone 应用程序可以访问这些号码吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:59:56.523

在沙盒环境中，不，您无法访问应用程序沙盒之外的其他应用程序或数据库中的信息。如果不越狱，根本就没有办法做到这一点。Apple 也不允许在 App Store 中出现这样的应用程序。

当您通过 Xcode 签署和打包您的应用程序（以提交到 iTunes App Store）时，它会被打包以通过一个非常特定的过程进行分发。以这种方式分发的应用程序是沙盒的。对于为 App Store 打包的应用程序，无法绕过此过程。

# javascript - OOO javascript：对象自引用返回未定义但控制台显示它存在

> ID：10003132
> 
> 赞同：2
> 
> 时间：2012-04-03T23:55:45.110
> 
> 标签：javascript, oop, object, reference

好的，所以我在发布之前做了一些搜索......没有运气（或者我可能只是愚蠢）。

我有这个数组，我称之为“myArray”，我将对象推送到它上面以填充一些变量：

```
myArray.push({
    time        : (y.moveTime - y.startTime),
    pos         : y.move,
    last        : myArray[y.recents.length-1].time
}); 
```

我的问题是为什么萤火虫抱怨“last”变量：“ *Uncaught TypeError: Cannot read property 'time' of undefined* ”。如果我做

```
last        : myArray[y.recents.length-1] 
```

一切安好。

我不明白的观察：当我有“.time”引用时，数组是空的，但如果我删除它，数组是满的。

**我在这里想念什么？**我不明白:(

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:02:14.993

该错误意味着评估值

```
myArray[y.recents.length-1] 
```

不是具有`time`属性的对象。这可能在您执行第一个时发生，`push`因为数组还没有任何元素。

如果您想隐藏错误并在这种情况下将`last`属性分配给`undefined`，您可以添加一个备用值：

```
last: (myArray[y.recents.length - 1] || {}).time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:02:18.320

的值`myArray[y.recents.length-1]`可以是任何东西（一些字符串、对象、数组、null 等）。你可以用它设置值，`last`不会出错。

但是，如果将属性设置为非对象（如 setting `time`），则会导致错误。

# c++ - 在 C++ 中生成随机无符号字符值

> ID：10003133
> 
> 赞同：4
> 
> 时间：2012-04-03T23:55:52.097
> 
> 标签：c++, random, unsigned-char

我想知道如何生成随机无符号字符值。我的想法;
`rand()%255;`因为无符号字符支持在 0-255 之间。我想知道这种方法是否可以改进（或者它是最合法的方法）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T02:02:28.337

如果您想坚持使用标准库，C++11 随机数库是最好的方法：

```
#include <random>

#include <functional>
#include <algorithm>
#include <iostream>
#include <iterator>
#include <climits>

int main() {
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};

    auto rand = std::bind(std::uniform_int_distribution<>(0, UCHAR_MAX),
                          std::mt19937(seed));

    std::generate_n(std::ostream_iterator<int>(std::cout," "), 25, rand);
} 
```

该库提供了一些统一的随机数引擎和适配器，以与它们一起使用以生成各种分布。这里我们使用一个`mt19937`引擎（种子使用`random_device`（如果可能的话，作为非确定性数据的来源），`seed_seq`并将足够的随机数据组合成一个适合填写 mt19937 内部状态的表格。然后我们`mt19937`使用 a 进行调整`uniform_int_distribution`。默认情况下，此分布将生成在其模板参数支持的范围内均匀分布的数字，在这种情况下`unsigned char`，因此我们创建的函数对象将生成范围 [0 256) 内的值。通过将 25 个值写入标准输出来演示其结果。

还有其他用途的分布，例如产生正态分布、模拟硬币翻转或从具有任意权重的集合中挑选物品（例如，挑选 3 个物品中的一个，其中第一个被挑选 50% 的时间，第二个被挑选 10 % 的时间，第三次，40% 的时间）。

为不同的质量和性能特性提供了其他引擎。例如，如果您需要一个加密随机数生成器，如果您的实现提供了这种功能，则 random_device 可能会提供它。

* * *

[一些](http://www.pcg-random.org/posts/ease-of-use-without-loss-of-power.html)额外的[资源](http://www.pcg-random.org/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T00:04:24.913

快很多会很简单

```
unsigned char a = (unsigned char) rand(); 
```

或者，您甚至可以对生成的整数进行 4 次移位（在 32 位架构上），以减少对以下的调用的四倍`rand()`：

```
int a = rand();
unsigned char r1 = (unsigned char) a;
unsigned char r2 = (unsigned char) a >> 8;
unsigned char r3 = (unsigned char) a >> 16;
unsigned char r4 = (unsigned char) a >> 24; 
```

或类似的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-13T23:39:54.700

[使用随机](http://www.cplusplus.com/reference/random/)库以 C++ 方式执行此操作的更简洁的方法是：

```
#include <random>

int myseed = 1234;

std::default_random_engine rng(myseed);
std::uniform_int_distribution<int> rng_dist(0, 255);
char mychar = static_cast<unsigned char>(rng_dist(rng)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T23:58:50.800

你可以使用`unsigned char n = (unsigned char)(rand() & 0x00ff);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T01:36:16.003

您应该知道，`rand()`就其输出的质量（随机性）而言，它是广泛可用的随机数生成器中最差的一种。在基于 UNIX 的系统上，以及其他一些系统上，`random()`以及`lrand48()`[和朋友] 要好得多。为了速度，使用这些的最佳方法是如上面@Pida 所述，您只调用一次以获得一个单词的随机位。字长取决于您使用的随机数生成器。

# linux - xterm-color 和 xterm-256color 有什么区别？

> ID：10003136
> 
> 赞同：30
> 
> 时间：2012-04-03T23:56:09.900
> 
> 标签：linux, macos, terminal, ncurses, xterm

在尝试将终端程序设置为使用颜色时，我遇到了这两个选项`xterm-color`，`xterm-256color`即您可以将`TERM`环境变量设置为任何一个。

我想知道是否有人可以描述两者之间的区别？

我在我的 Ubuntu 服务器和我的 mac 上搜索了文档，但没有找到任何文档。我只能在`/usr/share/terminfo`.

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-06T05:04:32.297

`xterm-256color`描述了支持 256 色的 Xterm。`xterm-color`描述了支持八种颜色的 Xterm 的旧分支。`xterm-color`不推荐使用，因为它描述了 Xterm 的一个变体，它功能较少，而且您不太可能使用。通常你会想要使用`xterm`,`xterm-16color`或`xterm-256color`.

尤其`xterm-256color`是从 Mac OS X 10.7 Lion 开始的终端的默认值，次优推荐值为`xterm-16color`或`xterm`（仅描述对八种 ANSI 颜色的支持）。在 10.7 之前，`xterm-color`这是默认设置，因为 Terminal 不支持推荐的 Xterm terminfo 值所描述的一些关键功能，例如，背景颜色擦除 (BCE)、用于切换主/备用屏幕的现代代码、256 色。

有时人们明确设置`TERM`为`xterm-color`（与推荐的 Xterm 值相反）以禁用功能或解决特定计算机上可用的 terminfo 值与正在使用的终端仿真器之间的不兼容问题。

请注意，从技术上讲，终端应该有自己的最新 terminfo 值，准确描述它支持的功能，而不是使用 Xterm 的值，但是：

1.  目前没有一个是最新的。`nsterm`代表终端在 NeXTSTEP 的祖先。显然有人`nsterm`最近更新了（过去几年的某个时候），但我不知道这是否已经进入 ncurses 发行版，而且它可能与 10.7 中的 Terminal 不完全同步。
2.  许多程序和外壳定制脚本明确检查是否`$TERM`以（或等于）开头`xterm`。因此，一些用户仍然需要了解如何在终端中使用推荐的 Xterm 值以与这些值兼容。

如果您不熟悉 terminfo 系统，请查看 x-man-page://5/terminfo 手册页。此外，您可以使用该`infocmp`命令查看当前的 terminfo 设置或比较两个不同的设置，例如，`infocmp xterm-color xterm-256color`将显示这两者之间的所有差异。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T00:17:03.153

这似乎`xterm-256color`是 OS/X 上的 Terminal.app。差异并不小 - 我在一个 Ubuntu 机器上进行了 infocmp'd`xterm-color`并`xterm-256color`对其进行了一些标准化，并得到了很多差异。我什至可以说`xterm-256color`不再是真正的 xterm 了。

通常，当您使用特定的终端仿真器时，您需要“只知道”哪个 terminfo 条目最适合它。它们是一对匹配的，尽管有时您可以，例如，在 vt220 终端上使用 vt100 terminfo 条目。

从好的方面来说，今天几乎所有东西都兼容 vt100。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-22T10:58:22.313

根据[ncurses FAQ](https://invisible-island.net/ncurses/ncurses.faq.html#xterm_color)，[xterm-color](https://invisible-island.net/ncurses/terminfo.src.html#tic-xterm-color)早已过时：

> 最初，xterm-color 对应于 1990 年代中期的 color_xterm。它在 1996 年被 XFree86 xterm 取代。

终端数据库提供详细信息。它最初的目的是作为一个通用的终端描述，但从一开始就从未成功，因为它与*XFree86 xterm*不匹配，特别是颜色行为（即[背面颜色擦除](https://invisible-island.net/ncurses/ncurses.faq.html#bce_mismatches)功能）。现在没有人使用*nxterm*。

[xterm-256color](https://invisible-island.net/ncurses/terminfo.src.html#tic-xterm-256color)终端描述是从 (XFree86) xterm 终端描述通过修改颜色行为（添加更多颜色，但不***添加***背景颜色擦除功能）构建的。使用[infocmp](https://invisible-island.net/ncurses/man/infocmp.1m.html)查看差异：

```
$ infocmp xterm-color xterm-256color |wc -l
122
$ infocmp xterm xterm-256color |wc -l
14
$ infocmp xterm xterm-256color
comparing xterm to xterm-256color.
    comparing booleans.
        ccc: F:T.
    comparing numbers.
        colors: 8, 256.
        pairs: 64, 32767.
    comparing strings.
        initc: NULL, '\E]4;%p1%d;rgb\:%p2%{255}%*%{1000}%/%2.2X/%p3%{255}%*%{1000}%/%2.2X/%p4%{255}%*%{1000}%/%2.2X\E\\'.
        oc: NULL, '\E]104\007'.
        rs1: '\Ec', '\Ec\E]104\007'.
        setab: '\E[4%p1%dm', '\E[%?%p1%{8}%<%t4%p1%d%e%p1%{16}%<%t10%p1%{8}%-%d%e48;5;%p1%d%;m'.
        setaf: '\E[3%p1%dm', '\E[%?%p1%{8}%<%t3%p1%d%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;%p1%d%;m'.
        setb: '\E[4%?%p1%{1}%=%t4%e%p1%{3}%=%t6%e%p1%{4}%=%t1%e%p1%{6}%=%t3%e%p1%d%;m', NULL.
        setf: '\E[3%?%p1%{1}%=%t4%e%p1%{3}%=%t6%e%p1%{4}%=%t1%e%p1%{6}%=%t3%e%p1%d%;m', NULL. 
```

因为 xterm-color 已经过时，它在很大程度上被忽略了，直到 Apple 的一些（当然是匿名的）开发人员决定将它重用于 Terminal.app（在 10.5 *Leopard*中），尽管它不适合。ncurses 中的[nsterm-16color](https://invisible-island.net/ncurses/terminfo.src.html#tic-nsterm-16color)描述由某人（显然在 Apple 之外）提供，以匹配 10.5 的行为。尽管 xterm-color 使用***8***种颜色，但 nsterm-16color 可能会使用***16***。也许这导致了用户的困惑。在任何情况下，Terminal.app 的终端描述选择对 Terminal.app 没有影响，除了设置`TERM`环境变量，许多应用程序使用它来决定如何使用终端。

有趣的是，尽管大部分 MacOS 用户空间来自 BSD，但它的 ncurses 配置却不是。与 BSD 不同，MacOS 具有 tic/infocmp 实用程序（尽管 Apple 已经有十多年没有更新它了：ncurses 5.7 于[2008](https://invisible-island.net/ncurses/ncurses.faq.html#other_versions)年发布）。在后来的 MacOS 版本中，Terminal.app 的开发人员更改了菜单以提供“xterm-256color”而不是“xterm-color”。这并没有改善用户体验，因为使用相应终端描述的终端行为仍然不同。[ncurses 常见问题解答](https://invisible-island.net/ncurses/ncurses.faq.html#xterm_color)提到：

> 此外，据报道 Mac OS X 10.7 使用 xterm-256color 作为默认 $TERM 值。这在几个方面与 xterm-color 不同，特别是对 bce 的支持。它也不同于推荐的 nsterm-256color（infocmp 报告 111 个差异）。

# php - Facebook 页面选项卡未发布 signed_request

> ID：10003141
> 
> 赞同：1
> 
> 时间：2012-04-03T23:56:42.550
> 
> 标签：php, facebook, facebook-php-sdk, facebook-page, facebook-canvas

我正在创建一个使用*Page Tab*的 Facebook 应用程序。但是，当我访问安装了应用程序的页面时，`signed_request`不会将参数发送到我的脚本。既没有`$_POST`也没有`$_REQUEST`被发送任何数据（*并且使用 Facebook PHP SDK`$facebook->getSignedRequest()`也不起作用*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:42:47.847

结果证明这是我的一个愚蠢的疏忽，我输入`http://example.com`了重定向到`http://www.example.com`重定向页面的内容，但没有发布数据。

# python - 如何切片双端队列？

> ID：10003143
> 
> 赞同：31
> 
> 时间：2012-04-03T23:56:46.287
> 
> 标签：python, slice, deque

我已经将一些使用列表的代码更改为使用双端队列。我不能再切入它，因为我得到了错误：

> TypeError：序列索引必须是整数，而不是“切片”

这是一个显示问题的 REPL。

```
>>> import collections
>>> d = collections.deque()
>>> for i in range(3):
...     d.append(i)
...
>>> d
deque([0, 1, 2])
>>> d[2:]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: sequence index must be integer, not 'slice' 
```

那么，是否有一种解决方法来支持在 Python 中切片成双端队列？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-04T00:04:46.637

试试`itertools.islice()`。

```
 deque_slice = collections.deque(itertools.islice(my_deque, 10, 20)) 
```

索引到 a`deque`需要每次从头开始跟随一个链表，因此`islice()`跳过项目以到达切片开头的方法将提供最佳性能（比将其编码为每个元素的索引操作更好）。

您可以轻松编写一个`deque`自动为您执行此操作的子类。

```
class sliceable_deque(collections.deque):
    def __getitem__(self, index):
        if isinstance(index, slice):
            return type(self)(itertools.islice(self, index.start,
                                               index.stop, index.step))
        return collections.deque.__getitem__(self, index) 
```

请注意，您不能将负索引或步长值与`islice`. 可以围绕这个编写代码，如果您采用子类方法，这样做可能是值得的。对于负开始或停止，您只需添加双端队列的长度；对于消极的一步，你需要`reversed()`在某个地方扔一个。我会把它留作练习。:-)

切片测试`deque`会略微降低从 中检索单个项目的性能。`if`如果这是一个问题，您可以使用 EAFP 模式来稍微改善这一点——代价是由于需要处理异常而使切片路径的性能稍微降低：

```
class sliceable_deque(collections.deque):
    def __getitem__(self, index):
        try:
            return collections.deque.__getitem__(self, index)
        except TypeError:
            return type(self)(itertools.islice(self, index.start,
                                               index.stop, index.step)) 
```

当然，与常规相比，其中还有一个额外的函数调用`deque`，所以如果你真的关心性能，你真的想添加一个单独`slice()`的方法等。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-04T00:27:07.920

如果性能是一个问题，请考虑[此答案](https://stackoverflow.com/a/7064292/989121)中建议的直接访问/理解方法。`islice`它比大型集合要快得多：

```
import timeit

setup = """
import collections, itertools
d = collections.deque(range(10000))
"""

print timeit.timeit('list(itertools.islice(d, 9000, 9010))', setup, number=10000)
## 0.631947040558
print timeit.timeit('[d[i] for i in range(9000, 9010)]', setup, number=10000)
## 0.0292208194733 
```

根据下面的@RaymondHettinger 评论，只有当切片很短时，理解方法才会更好。在较长的切片上，`islice`令人信服地获胜。例如，以下是从偏移量 6000 切分 10,000 个项目的双端队列的时间：

```
偏移长度 islice compr
 6000 10 400.496 46.611
 6000 50 424.600 183.988
 6000 90 432.277 237.894
 6000 130 441.289 352.383
 6000 170 431.299 404.596
 6000 210 456.405 546.503
 6000 250 448.895 575.995
 6000 290 485.802 778.294
 6000 330 483.704 781.703
 6000 370 490.904 948.501
 6000 410 500.011 875.807
 6000 450 508.213 1045.299
 6000 490 518.894 1010.203
 6000 530 530.887 1192.784
 6000 570 534.415 1151.013
 6000 610 530.887 1504.779
 6000 650 539.279 1486.802
 6000 690 536.084 1650.810
 6000 730 549.698 1454.687
 6000 770 564.909 1576.114
 6000 810 545.001 1588.297
 6000 850 564.504 1711.607
 6000 890 584.197 1760.793
 6000 930 564.480 1963.091
 6000 970 586.390 1955.199
 6000 1010 590.706 2117.491

```

理解的前几片非常快，但随着长度的增加，性能急剧下降。`islice`在较小的切片上速度较慢，但​​其平均速度要好得多。

这就是我测试的方式：

```
import timeit

size = 10000
repeats = 100

setup = """
import collections, itertools
d = collections.deque(range(%d))
""" % size

print '%5s\t%5s\t%10s\t%10s' % ('offset', 'length', 'islice', 'compr')

for offset in range(0, size - 2000, 2000):
    for length in range(10, 2000, 40):
        t1 = timeit.timeit('list(itertools.islice(d, %d, %d))' % (offset, offset + length), setup, number=repeats)
        t2 = timeit.timeit('[d[i] for i in range(%d, %d)]' % (offset, offset + length), setup, number=repeats)
        print '%5d\t%5d\t%10.3f\t%10.3f' % (offset, length, t1 * 100000, t2  * 100000) 
```

# android - 将视图动态添加到 ScrollView 内的 RelativeLayout

> ID：10003148
> 
> 赞同：8
> 
> 时间：2012-04-03T23:57:07.580
> 
> 标签：android, view, scrollview, android-linearlayout, android-relativelayout

我正在尝试将动态创建的几个RelativeLayouts 添加到一个LinearLayout 中，该LinearLayout 在一个RelativeLayout 内，它位于一个ScrollView 内。当所有视图的总高度超过手机屏幕的大小时，所有视图都正确显示。但是当动态添加的视图的总大小不足以填满屏幕时，只会显示第一个 RelativeLayout 元素，而其他元素则不会显示在屏幕中。我真的很绝望，不明白为什么。

这是在线性布局中动态填充视图的代码：

```
LinearLayout commentsLayout = (LinearLayout) findViewById(R.id.comments_layout);

LayoutInflater inflater = (LayoutInflater)
    this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

for(Comment c: commentsList) {

    RelativeLayout layoutItem = (RelativeLayout) inflater.inflate(
        R.layout.list_item_comment, null, false);

        TextView tv = (TextView) layoutItem.findViewById(R.id.textView);
        ImageView iv = (ImageView) layoutItem.findViewById(R.id.imageView);

        // set tv's text
        // set iv's image and onclicklistener, nothing fancy here, everything goes well

        commentsLayout.addView(layoutItem);
} 
```

这是 list_item_comment.xml：

```
<RelativeLayout
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
>
    <ImageView 
    android:id="@+id/imageView"
    android:layout_width="50dip"
    android:layout_height="50dip"
    android:layout_alignParentLeft="true"
    android:layout_marginTop="10dp"
    android:layout_marginLeft="10dp"
    />

    <TextView 
    android:id="@+id/textView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="10dp"
    android:textSize="16sp"
    android:layout_toRightOf="@id/imageView"
    />
</RelativeLayout> 
```

这是此活动的 xml 文件：

```
<RelativeLayout
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/main_layout"
>
...

    <ScrollView
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:id="@+id/scrollView"
    >

        <RelativeLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/relativeContainer"
        >

        ...

            <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/comments_layout"
            />

        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

以及截图：

没有足够的布局：（不**正确，需要显示 3 条评论）**

![一个不正确的](../Images/0eb74da77d29190568ceacd36c71a71a.png)

有足够的布局：（**正确的一个，屏幕已填满）**

![正确一个](../Images/307cf19b1a9a4cb22497b7c18854298f.png)

我只需要在第一种情况下显示所有三个评论：/提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:01:18.200

而不是`fill_parent`，尝试将您的`layout_height`更改为。`<RelativeLayout>``list_item_comment.xml``wrap_content`

另外，为什么您需要`<RelativeLayout>`在您`<ScrollView>`的活动的 xml 中使用另一个。这`LinearLayout`足以做您希望您的活动看起来像的样子。也许你可以删除它。

# python - Python“运行”和“重新加载”没有显示对我的代码的更改

> ID：10003152
> 
> 赞同：0
> 
> 时间：2012-04-03T23:57:37.807
> 
> 标签：python, matplotlib

我有一个简单的问题。我正在调试一些代码。我正在使用 Enthought Python 和“PyLab”程序。我使用 gEdit 编辑我的代码。我正在使用 Ubuntu 10.04.4 LTS。

我使用“run myfile.py”来运行程序。然后我测试 myfile(somearguments)，看看错误在哪里。

但是，当我对代码进行更改时，再次使用“run myfile.py”并不能正确更新 Python/PyLab 对我的代码所做的更改。结果是我将收到指向没有错误的行的错误消息，甚至不再有“麻烦”文本。我也尝试使用 import 和 reload ，但这不起作用。

如何让 Python/PyLab 看到对我的代码的新更改？我现在唯一的选择是修复错误，然后重新启动 PyLab 以确认修复。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:38:59.037

您是否尝试删除 pyc 文件？

当 pyc 文件存在时，PyLab 可能会在不重新加载文件的情况下继续读取它。

# lua - 定时循环内的回调

> ID：10003154
> 
> 赞同：1
> 
> 时间：2012-04-03T23:58:00.170
> 
> 标签：lua

我想要一个包含回调函数的定时循环。回调函数只能在时间段内调用

```
function my_callback( )
    ....
end

setCallback("my_callback")

time_limit = os.time() + 20

while (os.time() < time_limit) do

 -- I want my_callback to be callable in this loop for 20 seconds only

end 
```

获得这种效果的正确方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:57:51.073

我不确定您需要什么，但请查看[lalarm](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#lalarm)和[luasignal](https://github.com/doy/luasignal)。

# java - 混合jpa继承策略-inheritanceType.JOINED与inheritanceType.SINGLE_TABLE

> ID：10003155
> 
> 赞同：2
> 
> 时间：2012-04-03T23:58:09.620
> 
> 标签：java, hibernate, jpa

我的类结构看起来像这样......我在这里实现了两个单独的策略，但是根类的继承策略，即 InheritanceType.JOINED 正在整个层次结构中使用......

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "typeName", discriminatorType = DiscriminatorType.STRING, length =    100)
@Table(name="table_A")
public abstract class A{
...
}

@Entity
@Table(name = "table_B")
@PrimaryKeyJoinColumn(name = "ID_B")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorValue("SVC")
public abstract class B extends A {
...
}

@Entity
@DiscriminatorValue("C")
public class C extends B {
... 
}

@Entity
@DiscriminatorValue("D")
public class D extends B {
...
} 
```

当我创建一个'D'的实例并尝试持久化它时，hibernate正在寻找一个名为'D'的表......
我发现有几个人问同样的问题......但答案对我没有帮助...

[混合连接和单表继承以及查询所有对象](https://stackoverflow.com/q/8494367/926120)- 相同的问题..
[如何将继承策略与 JPA 注释和 Hibernate 混合？](https://stackoverflow.com/q/3915026/926120)- 将 single_table 与加入的混合......这对我来说没有帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:52:06.697

JPA 规范不允许您在继承树中混合策略；它要求您在根实体中设置继承策略。JDO 是唯一允许混合策略的规范。您可能会找到允许它的 JPA 实现，但它是不可移植的

# objective-c - 阅读此 Objective-C 语句的正确方法是什么？

> ID：10003157
> 
> 赞同：1
> 
> 时间：2012-04-03T23:58:13.330
> 
> 标签：objective-c, programming-languages

我开始学习如何在 Objective-C 中阅读消息语法，并希望加强对消息语法的理解（我来自 Java/C#/Ruby 背景）。

我目前正在查看声明：

```
[self.view addSubview:label]; 
```

“将此消息发送给addSubView方法，以label为参数，方法在self上的视图对象上。”

（“on”并不是描述对象“点符号”的好方法。我愿意用更好的方法来转录它！）

您如何阅读和解释上述陈述？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:04:02.240

这实际上是一个嵌套的消息发送，尽管点语法让人困惑。* ObjC 中消息和方法之间的区别起初也可能有点令人困惑。通常，可以将它们视为等价的，但严格来说，是向对象发送消息；在对象的方法列表中查找消息，然后调用关联的方法。**

可以重写：

```
[[self view] addSubview:label]; 
```

所以消息`view`被发送`self`给*接收者*。然后，其结果将位于另一条消息的接收方位置，即`addSubview:`. 你是对`label`的`addSubview:`。

那么，在英语中，这是：“添加`label`为`self`'s的子视图`view`”或“发送`addSubview:`，传递`label`，到发送到的结果`view`” `self`。

* * *

*点语法旨在作为属性访问的糖，即用于使用属性的 setter 和 getter 方法；默认情况下，getter 的名称与属性本身的名称相同。

**如果找不到方法，对象可以用消息做其他事情。这种方法/消息区别的唯一真正区别是与消息关联的方法可以在运行时更改——动态绑定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T00:03:07.743

它调用的方法`addSubView:`是（可能是其中的一个实例或子类的`UIView`一个属性，以 var 标签作为参数，可能是一个实例。`self``UIViewController``UILabel`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:03:15.740

该语句将您的视图`self.view`（即父视图“self”）告诉`addSubview` **`label`**.

# javascript - 地图上的多个位置

> ID：10003161
> 
> 赞同：0
> 
> 时间：2012-04-03T23:58:33.430
> 
> 标签：javascript, jquery, geolocation, jquery-events

我正在尝试在加载时为我的应用程序创建一个事件，以显示来自 CSV excel 文件的数据。

基本上，我正在尝试从 Excel CSV 文件中引用数据，这些数据又将使用文件 (CSV) 中的位置填充我的 Google 地图。

这使我可以更轻松地将数据添加到 CSV，并且始终能够使用最新数据填充我的地图。

我正在使用 Javascript 和 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:44:02.963

您将需要一个脚本来将 CSV 文件解析为数组或循环语句。我建议使用 PHP 的[`fgetcsv`](http://php.net/manual/en/function.fgetcsv.php)方法：

```
$row = 1;
$output_array = array();
if (($handle = fopen("file_name.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            $output_array[] = $data[$c];
        }
    }
    fclose($handle);
} 
```

这基本上打开文件，读取它，将所有行存储在一个数组中以供前端演示。在您看来，您可以执行以下操作：

```
echo '<script type="text/javascript">';
foreach($output_array as $data_chunk)
{
   echo 'JavaScript line for Geolocation';
}
echo '</script>'; 
```

# .net - POST 请求上的 Thread.CurrentPrincipal 列表，但不是 GET 请求

> ID：10003162
> 
> 赞同：1
> 
> 时间：2012-04-03T23:58:36.733
> 
> 标签：.net, wcf, rest, c#-4.0, httpcontext

我有一个托管在 WebProject 中的 RESTful WCF 应用程序。我正在使用 HttpModule 对传入请求的标头进行身份验证，如果标头和 URL 有效，我将两者都设置

```
System.Threading.Thread.CurrentPrincipal = myCustomPrincipal; 
```

这对于 GET 请求非常有效，但是当我执行 POST 并检查 Thread.CurrentPrincipal 时，它被设置为 WindowsPrincipal 类的实例。我在一些博客文章中读到 HttpContext.Current.User 和 Thread.CurrentPrincipal 都应该设置为相同的 IPrincipal 对象，但是当我分配

```
HttpContext.Current.User = myCurrentPrincipal; 
```

我的服务永远不会受到打击，并且正在发回我从未实际分配过的 401 UnAuthorized 消息。

*请注意*，我在我的 context_PostAuthorizeRequest 方法中分配了这些主体，该方法已附加到上下文的命名处理程序。

请帮忙。我究竟做错了什么？下面是我的 webconfig 的 httpModules 配置示例：

```
<httpModules>
  <add name="PublicServiceSecurity" type="Company.PublicService.PublicServiceSecurity,PublicService" />
  <add name="ErrorModule" type="Company.Web.ErrorModule,WebComponentLibrary" />
  <add name="HbnSessionModule" type="Company.Web.HbnSessionModule,WebComponentLibrary" />
</httpModules> 
```

# python - 什么是 pandas 进行 summaryBy(...,full.dimension=T) 的有效方法

> ID：10003171
> 
> 赞同：1
> 
> 时间：2012-04-03T23:59:41.820
> 
> 标签：python, r, pandas

使用 R 中的 doBy 包，我们对组进行汇总，并得到与原始数据相同形状和顺序的结果：

```
> require(doBy)
> df <- data.frame(
          first = c('bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux'),
          second = c('one', 'two', 'one', 'two', 'one', 'two', 'one', 'two'), 
          data = c(-0.424972, 0.567020, 0.276232, -1.087401, -0.673690, 0.113648, -1.478427, 0.524988))
> df
  first second      data
1   bar    one -0.424972
2   bar    two  0.567020*emphasized text*
3   baz    one  0.276232
4   baz    two -1.087401
5   foo    one -0.673690
6   foo    two  0.113648
7   qux    one -1.478427
8   qux    two  0.524988
> df['data.sum'] = summaryBy(data~first, data=df, FUN=sum, full.dimension=T)['data.sum']
> df
  first second      data  data.sum
1   bar    one -0.424972  0.142048
2   bar    two  0.567020  0.142048
3   baz    one  0.276232 -0.811169
4   baz    two -1.087401 -0.811169
5   foo    one -0.673690 -0.560042
6   foo    two  0.113648 -0.560042
7   qux    one -1.478427 -0.953439
8   qux    two  0.524988 -0.953439 
```

`DataFrame`当按多个索引之一分组时，有没有办法在熊猫中做同样的事情？

```
>>> from pandas import DataFrame
>>> df = DataFrame({ 
                 'first': ['bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux'],
                 'second': ['one', 'two', 'one', 'two', 'one', 'two', 'one', 'two'],
                 'data': [-0.424972, 0.567020, 0.276232, -1.087401, -0.673690, 0.113648, -1.478427, 0.524988] })
>>> df = df.set_index(['first', 'second'])
>>> s = df.groupby(level='first')['data'].sum()
>>> df.join(s, on='first', rsuffix='.sum')

KeyError: 'no item named first' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:24:34.690

怎么样：

```
df['data.sum'] = df.groupby('first')['data'].transform(np.sum) 
```

您还可以传递`as_index=False`给 groupby 以在聚合（或调用`reset_index`结果）时获得更多类似 R 的行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:15:43.610

怎么样

```
from pandas import *
df = DataFrame({ 
    'first': ['bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux'],
    'second': ['one', 'two', 'one', 'two', 'one', 'two', 'one', 'two'],
    'data': [-0.424972, 0.567020, 0.276232, -1.087401, -0.673690, 0.113648, -1.478427, 0.524988] 
})

df2 = df.join(df.groupby("first").sum().rename(columns={"data":"sum_data"}), 
              on="first") 
```

# android - 将 ULR 与字符串数组中的项目相关联

> ID：10003178
> 
> 赞同：0
> 
> 时间：2012-04-04T00:00:21.367
> 
> 标签：android, arrays

我想将 URL 与字符串数组中的项目相关联，以便在选择 ListView 中的项目时从 URL 中抓取数据。我想知道是否可以将 URL 作为元数据添加到 strings.xml 文件中？有人对如何进行有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:26:51.287

Strings.xml 不是正确的位置。您可以在 strings.xml 中一次一个地定义 URL，如下所示：

```
<string name="url1">http://foo1.com</string>
<string name="url2">http://foo2.com</string>
// etc 
```

然后在运行时创建一个数组，将所有这些值一一转储。但这很糟糕。

相反，在 res/values/ 中创建一个 xml 文件，将其命名为您想要的任何名称（例如，urlvals.xml），然后像这样填充它：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="urls">
        <item>http://foo1.com</item>
        <item>http://foo2.com</item>
    </array>
</resources> 
```

然后，在代码中，通过以下方式引用它：

```
String[] myUrls = getResources().getStringArray(R.array.urls); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:33:02.647

如果你想要一个字符串资源数组，你可以：

1）添加字符串`strings.xml`（根据@Alexander的回答），并按[此处](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)的值在 values/yourresourcename.xml 的数组中按名称引用它们。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="myLinks">
        <item>@string/link1</item>
        <item>@string/link2</item>
    </array> 
```

2）像@Alexander建议的那样直接将它们添加到字符串数组（逐字）

如何将它们与 ListView 中的元素相关联取决于您。我建议（如果内容是静态的）为（例如）您想要实际显示的字符串（而不是链接本身）创建一个匹配的字符串数组。

# php - PHP DOM 删除标签（不是内容）

> ID：10003188
> 
> 赞同：1
> 
> 时间：2012-04-04T00:02:15.640
> 
> 标签：php, dom, domdocument

```
$mystring="This is mystring. <a href='http://www.google.com'>Google.</a>"; 
$dom = new DOMDocument; 
$dom->loadHTML($mystring); 
$xPath = new DOMXPath($dom); 
$nodes = $xPath->query('//a');
if($nodes->item(0)) { 
    $nodes->item(0)->parentNode->removeChild($nodes->item(0)); 
} 
echo $dom->saveHTML(); 
```

我想得到输出：

> 这是我的字符串。谷歌。

但我得到了：

> 这是我的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:07:20.130

尝试以下操作：

```
if($nodes->item(0)) {
    $node = $nodes->item(0);
    $node->parentNode->replaceChild(new DOMText($node->textContent), $node); 
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T00:14:25.433

或者，使用简单的技术做简单的事情。

这是 strip_tags() 的替代方法

```
preg_replace('#<a.*?>(.*?)</a>#i', '\1', $text) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-04T00:09:00.533

“Google”是您要删除的节点的子节点。所以这种行为是意料之中的。我想你想要的是使用 PHP 的[strip_tags](http://us3.php.net/manual/en/function.strip-tags.php)函数。

```
echo strip_tags("This is mystring. <a href='http://www.google.com'>Google.</a>"); 
```

# events - 无法在 Flash Builder 的自定义组件中声明自定义事件

> ID：10003191
> 
> 赞同：0
> 
> 时间：2012-04-04T00:03:01.507
> 
> 标签：events, flex4, flash-builder

我正在尝试创建一个数据网格组件，并希望它在创建数据网格时向主应用程序发送一个事件。但是，我收到错误说

```
"Type was not found or was not a compile-time constant:dataGridComp"

"Call to a posibly undefined methoud dataGridComp" 
```

我的组件

```
<?xml version="1.0" encoding="utf-8"?>

<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"

         xmlns:s="library://ns.adobe.com/flex/spark"

         xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Metadata>   //declare my event

        [Event(name="dataGridComp", type="flash.events.Event")]

    </fx:Metadata>

    <fx:Script>

        <![CDATA[

            import mx.events.FlexEvent;

            protected function dataGrid_creationCompleteHandler(event:FlexEvent):void

            {

                // TODO Auto-generated method stub

                 var e:dataGridComp = new dataGridComp("dataGridComp"); //problem here

                dispatchEvent(e);   //want to dispatch my event object when the datagrid is created

            }

        ]]>

    </fx:Script>

    <s:DataGrid id="dataGrid" editable="true" x="51" y="34" width="734" height="153"

                creationComplete="dataGrid_creationCompleteHandler(event)" requestedRowCount="4">

      ........

      ..........

    </s:DataGrid>

</s:Group> 
```

知道如何解决这个问题吗？我很感激任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:47:28.190

您可以更改/考虑的几件事：

1）要调度您的自定义事件，您需要使用`Event`该类，或者创建一个扩展的自定义类`Event`，以便您可以调度一个真实的`Event`对象。在您的情况下，仅使用自定义事件类型，请使用如下`Event`类：

`dispatchEvent( new Event("dataGridComp") );`

2) 您正在使用的 creationComplete 事件在组件添加到阶段之前被调度。由不在显示列表中的事物调度的事件不一定会被您的主应用程序听到。

# ruby-on-rails - Rails：在后台进程中 Rjb 出现分段错误，不在后台时工作正常？

> ID：10003194
> 
> 赞同：7
> 
> 时间：2012-04-04T00:03:16.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, segmentation-fault, background-process, rjb

我正在运行 Resque 后台任务，并且在调用使用 Rjb 的 gem 时不断出现分段错误。一切正常，但不在后台运行时。这是 gem 中的一行，导致错误：

```
def self.rjb_initialize
  return if ::Rjb::loaded?
  ::Rjb::load(nil, self.jvm_args) #THIS IS WHERE THE ERROR TRACES TO
  set_java_logging if self.log_file
end 
```

如您所见，gem 会加载 .jar 文件，但同样，当不在后台时，一切正常。什么可能导致问题，是否可以解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T06:35:05.140

鉴于错误在作为后台任务运行时似乎失败，这很可能是由于未设置环境变量。根据[文档](http://www.artonx.org/collabo/backyard/?RubyJavaBridge)，需要 LD_LIBRARY_PATH 和 JAVA_HOME 设置才能在 Rails 中使用 rjb。我认为您可以将它们添加到您的**environment.rb**并确保**任务 'resque:setup' => :environment**用于加载 Rails 环境。

# sql - 从具有相同值的列中选择行

> ID：10003195
> 
> 赞同：0
> 
> 时间：2012-04-04T00:03:32.160
> 
> 标签：sql, database, postgresql, select

我有一个书籍作者表，并且正在尝试获取某个作者的书籍查询结果。

就像是

`SELECT * FROM mytable WHERE authors = Carl Sagan`

我需要匹配的每一行的所有列。

任何帮助将不胜感激，我是 SQL 新手。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T00:16:11.317

澄清一下，假设： 1.) Carl Sagan 在此表中创作了不止一项。2.) 您想要返回所有出现的 Carl Sagan。

原来的：`SELECT * FROM mytable WHERE authors = Carl Sagan`

应该：`SELECT * FROM mytable WHERE authors = 'Carl Sagan'`

仅供参考，我使用[HeidiSQL](http://www.heidisql.com/)来测试查询。让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T00:06:59.980

您的查询是正确的，只是您需要将要比较的文本分隔为字符串：

```
SELECT * FROM mytable WHERE authors='Carl Sagan' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T00:07:45.180

您的问题对我来说似乎不清楚，但通过放置一个来修改您的查询`single quote`

```
SELECT * FROM mytable WHERE authors = 'Carl Sagan' 
```

# android - 在 Mac 上的 Netbeans 上使用 Android SDK 时遇到问题

> ID：10003203
> 
> 赞同：0
> 
> 时间：2012-04-04T00:05:06.250
> 
> 标签：android, macos, netbeans, sdk

我已经使用本教程[http://www.youtube.com/watch?v=xDjkHJVC0R0](http://www.youtube.com/watch?v=xDjkHJVC0R0)安装了 Android SDK ，并且我使用了不同的教程（我无法再次找到它，它在谷歌的深处）链接 Netbeans 上的路径.

我设置了自动更新的 url，安装了每个版本，甚至安装了 google 文件。但是当我点击“新项目”时，我得到了正常的新项目页面，但“目标平台”窗口完全是空的。它使“下一步”和“完成”按钮变灰，并用红字表示“必须指定目标 Android 平台！”

我记得在某处我必须为我下载的 SDK 创建路径，我认为我做了正确的路径，但我认为我没有这样做。

我能做些什么？我什至无法开始制作新的空白应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:08:29.393

您必须按照[“安装 SDK”](http://developer.android.com/sdk/installing.html#AddingComponents)文档中的第 4 步添加平台。

# python - 将数据插入谷歌应用引擎数据存储

> ID：10003207
> 
> 赞同：0
> 
> 时间：2012-04-04T00:05:50.897
> 
> 标签：python, google-app-engine

Google_App-Engine 使用 put 语句删除我表中的所有内容。我不希望它这样做，每次添加某些内容时，它都会导致更多的代码不得不重新将所有内容放回表中。

基本上问题是 put 语句会删除所有内容。有没有办法保存我不想更新的内容？

这是代码：（（python web2py））

```
biography2 = bayside(key_name='bayside', Biography=form_biography.vars.one)
biography2.put()
redirect(URL("b1", "bayside")) 
```

put 语句将更新表bayside 下的传记，但它会删除该表中的所有其他内容（流派、歌曲等...）我希望它保留其他表元素并仅更新传记。那可能吗？现在，当我真的只想更新一个表格元素时，我不得不求助于更新所有表格元素。这是非常令人沮丧的，并且会产生大量额外的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T00:51:21.640

您首先需要`get`从数据存储中获取实体。然后，您可以修改实体并将`put`其放回数据存储区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:51:04.840

对我来说，您似乎正在覆盖现有实体，而不是获取和更新现有实体的属性。你应该看看文档。 [https://developers.google.com/appengine/docs/python/datastore/entities#Updating_an_Entity](https://developers.google.com/appengine/docs/python/datastore/entities#Updating_an_Entity)

# c# - 使用正则表达式替换

> ID：10003211
> 
> 赞同：1
> 
> 时间：2012-04-04T00:06:12.690
> 
> 标签：c#, regex

我想做一个从字符串中换行的函数。

例如：“1.” -> “\n1.”

所以我可以写这样的代码

```
string Input = "1\. First option";
Input += "2\. Second option";
Input += "3\. Third option";

Output = WriteMenu(Input); 
```

并得到一个这样的字符串

```
"1\. First option
\n2\. Second option
\n3\. Third option" 
```

模式将始终为 [number][dot][whitespace]。如果第一个选项带有新行，这不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:12:02.877

给这个人一个机会

```
Input = Regex.Replace(Input, @"(?<!^)(\d+\.)", "\n$1") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T00:19:34.000

```
Regex rgx = new Regex("(\\d+\\.\\s)");
String replaced = rgx.Replace(Input, Environment.NewLine + "$1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T00:33:18.413

像这样更短的表达式也可以：

```
Regex.Replace(Input, @"(?!^)\d+\.", "\n$0") 
```

# php - PHP在登录/退出时重新生成会话ID不起作用

> ID：10003212
> 
> 赞同：3
> 
> 时间：2012-04-04T00:06:14.557
> 
> 标签：php, security, session, sessionid

我无法让 PHP[`session_regenerate_id()`](http://php.net/manual/en/function.session-regenerate-id.php)在我正在开发的应用程序中工作。该应用程序使用（松散的）自制 MVC 框架并使用*通过**文件**重定向所有请求。`.htaccess``index.php`*

我正在尝试在注销时重新生成会话 ID，但它无法正常工作。

这是我的注销控制器中的一些代码 - expired 变量是对会话超时的检查：

```
 session_regenerate_id(true);        
    if(isset($_SESSION['expired']))
    {
        $this->registry->template->expired = true;
    }

    session_unset();
    session_destroy(); 
```

同样相关的是 index.php 文件开头的代码：

```
 session_cache_expire(20);
    session_start();
    session_name("TMU");
    //session_regenerate_id(); 
```

我在`session_id()`每个页面的底部回显结果，以查看它包含的内容以测试它是否已重新生成。

但是，当您注销时会话 ID 不会更改。当您再次登录时（即使使用另一个帐户），会话 ID 也是相同的。

您会注意到 index.php 文件的注释掉的第四行 - 如果我取消注释该行，ID 似乎会在每个页面上重新生成。但是，当我再次注释掉该行时，会话 ID 再次是我在索引文件中取消注释该行之前的原始 ID...

我只是想知道我怎样才能让 s`ession_regenerate_id()`工作。似乎它只是没有“提交”更改后的 ID。我试过使用`session_commit()`，但我不明白它是如何完全工作的，当我试图破坏会话时它给了我一个错误。

PHP 5.3.10 和 Apache 2.2.21

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:56:02.963

多次重温这个话题后，我想通了。有两个问题。

1.  `session_regenerate_id()`必须在显示任何 HTML 输出和/或发送标头之前调用。（它需要作为第一个函数之一调用，就像`session_start()`）。
2.  订单很重要。`session_name("TMU")`需要在`session_start()`获得预期结果之前调用 - 我之前没有发现这一点。

基本上发生在我身上的事情是在导致它设置两个会话 ID cookie - 两个会话 - 一个名为 TMU 另一个只是默认的 PHPSESSID`session_name("TMU")`之后调用。`session_start()`更改顺序解决了我的所有问题并重新生成 ID/销毁旧会话现在可以按预期工作。

对于在执行此操作时遇到问题的任何人，我建议您回显 $_SESSION 和 $_COOKIE 数组，以查看您的特定应用程序中发生了什么。

# image-processing - iOS CGImageRef 像素着色器

> ID：10003218
> 
> 赞同：0
> 
> 时间：2012-04-04T00:07:06.960
> 
> 标签：image-processing, opengl-es, shader, quartz-2d, cgimage

我正在为 iOS 开发一个图像处理应用程序，我的应用程序的各个阶段之一是基于矢量的图像分离/颜色检测。

现在，我已经编写了可以按像素确定分色后颜色的代码，但我想，如果是 iOS，则遍历图像中的每个像素对于处理器来说将是相当困难的。因此，我想知道是否可以改用图形处理器；

我想创建一种“像素着色器”，它使用 OpenGL-ES 或其他一些渲染技术来快速处理和分离图像。我不知道从哪里开始（我为 Unity3D 编写了简单的着色器，但从未为它们完成底层编程）。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:13:49.303

我打算从侧面来，建议你试试 Brad Larson 的[GPUImage 框架](https://github.com/BradLarson/GPUImage)，它把自己描述为“一个 BSD 授权的 iOS 库，可以让你将 GPU 加速的过滤器和其他效果应用于图像、实时摄像机视频和电影”。我没有使用过它，并假设您需要阅读一些 GL 来添加您自己的过滤器，但它会处理很多样板文件并提供很多预先打包的过滤器，这绝对值得研究。听起来您对 OpenGL 并不特别感兴趣，因此没有真正的理由去研究它。

我要补充一点，在 iOS 4 下，我发现在 CPU 上工作（使用 GCD 在内核之间分配）通常比在 GPU 上更快，因为在 GPU 上我需要能够在最后读取任何结果一种串行访问。这是因为 OpenGL 通常是这样设计的，即您上传图像，然后将其转换为它想要的任何格式，如果您想读回它，它会将其转换回您希望接收的一种格式并将其复制到你想要它。因此，您为 GPU 节省的费用是因为 GL 驱动程序必须分流和重新排列内存。从 iOS 5 开始，Apple 引入了一种特殊机制，可以有效地让 CPU 直接访问 OpenGL 的纹理存储，因此这可能不再是问题。

# ruby-on-rails - Rails database.yml 配置在开发、测试和生产中具有不同的套接字

> ID：10003221
> 
> 赞同：0
> 
> 时间：2012-04-04T00:07:23.740
> 
> 标签：ruby-on-rails, passenger

所以我在本地使用 Rails 3.2 和 mysql 进行开发。我的本地机器是 Mac，我用于开发的 database.yml 是：

```
development:
    adapter: mysql2
    database: dbname
    encoding: utf8
    host: localhost 
    port: 3306
    timeout: 5000
    socket: /tmp/mysql.sock 
```

为了测试它

```
test:
    adapter: mysql2
    database: dbname
    encoding: utf8
    host: localhost 
    port: 3306
    timeout: 5000
    socket: /var/lib/mysql/mysql.sock 
```

测试和生产服务器在 CentOS 上，并且套接字在部署到它们时可以正常工作。但是我只是去做了一个手动耙子并得到了

> 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

我的网站可以工作，但我很好奇我是否应该单独处理 database.yml 进行部署，因为它在我运行 rake 时会以某种方式查看开发？

寻找建议并没有看到相同的问题，如果我错过了，请提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:30:38.013

您可以在运行 Rake 任务时指定 Rails 环境。

```
rake db:migrate RAILS_ENV=production 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:22:59.093

我可以想到三种选择：

*   更改您的 database.yml 并且不要在更改中进行版本化
*   使用 capistrano 及其`shared`文件夹来处理不同的 database.yml
*   使用环境变量，即`ENV['TEST_SOCKET']`

# javascript - 谷歌地图显示 KML 数据

> ID：10003225
> 
> 赞同：0
> 
> 时间：2012-04-04T00:07:57.230
> 
> 标签：javascript, google-maps, kml, google-visualization, google-maps-markers

我有 KML 字符串，我想在 Google 地图上显示它。我有字符串而不是文件。这是因为我在 Fusion Tables 中有我的 KML 数据，我需要做类似的事情：[https ://developers.google.com/fusiontables/docs/samples/custom_markers](https://developers.google.com/fusiontables/docs/samples/custom_markers)

我只有 KML 数据，没有坐标，所以我不确定如何显示它。

我试过这个，但没有奏效：

```
var marker = new google.maps.Marker({
      map: map,
      position: '<polygon>....</polygon>',
      icon: new google.maps.MarkerImage('https://developers.google.com/fusiontables/docs/samples/images/fusion_tables-32.png')
 }); 
```

任何帮助深表感谢！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:02:41.113

我遇到了这一行：[https ://developers.google.com/fusiontables/docs/samples/change_infowindow_content](https://developers.google.com/fusiontables/docs/samples/change_infowindow_content)

它回答了我的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:19:19.690

看看这些

[geoxml3 项目致力于开发一个与 Google Maps JavaScript API 版本 3 一起使用的 KML 处理器，它现在允许访问从 KML 呈现的单个标记、折线和多边形。](http://code.google.com/p/geoxml3/)

[一些有用的 KML 演示](http://www.birdtheme.org/useful/v3tool.html)

# python - Python行列式计算（不使用外部库）

> ID：10003232
> 
> 赞同：3
> 
> 时间：2012-04-04T00:08:33.037
> 
> 标签：python, matrix, linear-algebra

我正在制作一个小型矩阵运算库，作为对自己的编程挑战（以及为了学习使用 Python 编写代码），并且我遇到了计算 2x2、3x3 和 4x4 矩阵的行列式的任务。

就我对线性代数的理解而言，我需要实现 Sarrus 规则才能完成前 2 个，但我不知道如何以 Python 方式或更大尺寸的矩阵来解决这个问题。任何提示、提示或指南将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T00:19:56.117

Sarrus 规则只是解决 3x3 行列式的助记符，超出该大小不会有帮助。

您应该研究用于计算任意大方阵行列式的莱布尼茨公式。这个公式的好处是`n*n`矩阵的行列式是它可以根据它的一些`(n-1)*(n-1)`子矩阵的行列式的组合来确定，这很好地适用于递归函数解决方案。

如果您能理解 Leibniz 公式背后的算法，并且您之前使用过递归函数，那么将其转换为代码（Python 或其他）将很简单，然后您就可以找到 4x4 矩阵及其他矩阵的行列式！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:50:20.390

如果 M 是浮点矩阵，这是一个丑陋的缩合方法（chio？），我认为它有效......
我使用的是 python 2.7.2

```
from itertools import product, islice

def det(M,prod=1):
    dim = len(M)
    if dim == 1:
        return prod * M.pop().pop()
    it = product(xrange(1,dim),repeat=2)
    prod *= M[0][0]
    return det([[M[x][y]-M[x][0]*(M[0][y]/M[0][0]) for x,y in islice(it,dim-1)] for i in xrange(dim-1)],prod) 
```

# awk - 使用 gawk 转置列和行

> ID：10003233
> 
> 赞同：5
> 
> 时间：2012-04-04T00:08:41.307
> 
> 标签：awk, row, transpose, gawk

我正在尝试转置一个非常长的文件，我担心它不会被完全转置。

我的数据看起来像这样：

```
Thisisalongstring12345678   1   AB  abc 937 4.320194
Thisisalongstring12345678   1   AB  efg 549 0.767828
Thisisalongstring12345678   1   AB  hi  346 -4.903441
Thisisalongstring12345678   1   AB  jk  193 7.317946 
```

我希望我的数据看起来像这样：

```
Thisisalongstring12345678 Thisisalongstring12345678 Thisisalongstring12345678 Thisisalongstring12345678
1                         1                         1                         1
AB                        AB                        AB                        AB
abc                       efg                       hi                        jk
937                       549                       346                       193
4.320194                  0.767828                  -4.903441                 7.317946 
```

第一个字符串的长度会被证明是一个问题吗？我的文件比这大约 2000 行长得多。也可以将第一个字符串的名称更改为Thisis234，然后转置吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T00:32:30.260

我不明白为什么它不会 - 除非你没有足够的内存。试试下面的，看看你是否遇到问题。

输入：

```
$ cat inf.txt 
a b c d
1 2 3 4
. , + -
A B C D 
```

awk 程序：

```
$ cat mkt.sh
awk '
{
  for(c = 1; c <= NF; c++) {
    a[c, NR] = $c
  }
  if(max_nf < NF) {
    max_nf = NF
  }
}
END {
  for(r = 1; r <= NR; r++) {
    for(c = 1; c <= max_nf; c++) {
      printf("%s ", a[r, c])
    }
    print ""
  }
}
' inf.txt 
```

跑：

```
$ ./mkt.sh 
a 1 . A 
b 2 , B 
c 3 + C 
d 4 - D 
```

学分：

*   [http://www.chemie.fu-berlin.de/chemnet/use/info/gawk/gawk_12.html#SEC121](http://www.chemie.fu-berlin.de/chemnet/use/info/gawk/gawk_12.html#SEC121)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T02:30:28.453

这可以通过`rs`BSD 命令完成：

[http://www.unix.com/man-page/freebsd/1/rs/](http://www.unix.com/man-page/freebsd/1/rs/)

查看`-T`选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-23T00:51:42.493

我尝试了 icyrock.com 的回答，但发现我必须改变：

```
for(r = 1; r <= NR; r++) {
  for(c = 1; c <= max_nf; c++) { 
```

至

```
for(r = 1; r <= max_nf; r++) {
  for(c = 1; c <= NR; c++) { 
```

获取 NR 列和 max_nf 行。所以 icyrock 的代码变成了：

```
$ cat mkt.sh
awk '
{
  for(c = 1; c <= NF; c++) {
    a[c, NR] = $c
  }
  if(max_nf < NF) {
    max_nf = NF
  }
}
END {
  for(r = 1; r <= max_nf; r++) {
    for(c = 1; c <= NR; c++) {
      printf("%s ", a[r, c])
    }
    print ""
  }
}
' inf.txt 
```

如果您不这样做并使用不对称输入，例如：

```
a b c d
1 2 3 4
. , + - 
```

你得到：

```
a 1 .
b 2 ,
c 3 + 
```

即仍然是 3 行 4 列（最后一个是空白的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-25T03:15:37.663

对于@ScubaFishi 和@icyrock 代码：

“如果（max_nf < NF）”似乎没有必要。我删除了它，代码工作得很好。

# pagination - 分页内容

> ID：10003234
> 
> 赞同：0
> 
> 时间：2012-04-04T00:08:45.383
> 
> 标签：pagination

我正在尝试为我的论坛进行分页。我试图从数据库中显示结果，尽管一切都无处不在。

这是我的代码：

```
<!-- start with the table -->
<table width="100%" border="0" align="center" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
  <tr>
<td width="53%" align="center" bgcolor="#E6E6E6" style="padding:5px;"><strong>Topic / Thread Starter</strong></td>
<td width="15%" align="center" bgcolor="#E6E6E6" style="padding:5px;"><strong>Replies/Views</strong></td>
<td width="13%" align="center" bgcolor="#E6E6E6" style="padding:5px;"><strong>Last Post By</strong></td>
</tr>

                <div id="p1" class="pagedemo _current" style="">
<?php

$sql="SELECT * FROM forum ORDER BY datetime DESC";
$result=mysql_query($sql);
$i = 1;
$z = 1; 

while($rows = mysql_fetch_array($result)){ // Start looping table row 
    if(($i % 4) != 0) 
    { ?>
    <tr>
<td bgcolor="#FFFFFF" style="padding:5px;"><a class="normal" href="view_topic.php?id=<? echo $rows['id']; ?>"><? echo $rows['topic']; ?></a><br /><span style="color:#666; font-size:12px;">Started By <?php echo "<a class='normal' href='http://www.example.com/view_profile.php?user=".getID($rows[username])."'>"; ?> <? echo $rows['username']; ?></a></span></td>
<td align="center" bgcolor="#FFFFFF">Replies: <? echo $rows['reply']; ?><br />Views: <? echo $rows['view']; ?></td>
<td align="center" background="http://example.com/images/forum_fade_bckg.png"><span style="color:#666; font-size:12px;">
<?php echo "<a class='normal' href='http://www.example.com/view_profile.php?user=".getID($rows[lastPoster])."'>"; ?> <?php  echo $rows['lastPoster']; ?></a><br /><?php $date = substr($rows['datetime'],0,12);
if($date == date("M d, Y")) { 
    echo "Today, " . substr($rows['datetime'],-8); 
} else {
    echo $rows['datetime'];
}?> </span></td>
</tr>
    <?php
        // do whatever for the page... (this is inside the div)
        $message = $row['message'];
        echo $i . " " . $message. "<br>";
        $i+=1;
    } 
    else 
    {
        $z+=1;
        // GET ONLY NUMBERS HERE THAT ARE DIVISIBLE BY 4!!!!
        // this is the end of the starting page, and the begining of the next page
        echo '<br>---end---</div>
        <div id="p'.$z.'" class="pagedemo" style="display:none;">---start---<br>NEXT PAGE!!!!!!!'; //
    }

}

?> 
</div> 
```

结果，不是停留在 div 中，而是实际上在 div 之下。`<tr>`当我用and取出所有东西时`</tr>`，它们都适合 div。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:26:25.097

如果您查看页面的来源，问题应该很明显。我看到一些可能是问题的错误。

片段顶部的 TABLE 结束 TR 标签，然后是 DIV 开始。DIV 应仅位于 TD、TH 或 TABLE 之外。同样在您提供的代码段中，没有结束表标签。对于所有其他问题，这可能是导致浏览器混乱的问题。

请调整结构与此类似：

```
<div>...</div>
<table>
   <tr>
      <td>Some tags in here(A, DIV, SPAN, etc.)</td>
   </tr>
   <tr>
      <td>...</td>
      <td>...</td>
   </tr>
</table>
<div>...</div> 
```

此外，将某些属性迁移到样式标签中的 css 属性也是值得的。例如，代码片段中的背景、bgcolor、对齐和宽度属性。

抱歉，如果这不能解决问题，则很难在无法看到问题的情况下进行调试。

# latex - 在 wordpress.com 上渲染方程式时遇到问题

> ID：10003235
> 
> 赞同：2
> 
> 时间：2012-04-04T00:08:53.607
> 
> 标签：latex, blogs

我试图将一些方程式合并到一个 wordpress 博客条目中。无需特殊安装，使用mathjax Wordpress自带的版本即可。

我的段落是

> 这个动作在世界表 $latex z \to z + \sum_{n = -\infty}^\infty \epsilon_n z^{n+1} $ 的共形对称下是不变的，其中 $latex z$ 参数化了世界表。在二维中，共形群特别大，并且 > 有无穷多个生成器 $latex \l_n: z \to z + \epsilon_n z^{n+1} $ 。

两个方程都给出了“公式不解析”。只有“z”才能正确渲染。如果我把它放到一个乳胶文件中，公式就会编译。你可以解释吗？

[常见问题](http://wordpress.org/extend/plugins/wp-latex/faq/)页面提供了提示，但没有解决我的问题。页面上的提示确实有效。

# build - CMake 根据库的存在有条件地构建目标

> ID：10003238
> 
> 赞同：6
> 
> 时间：2012-04-04T00:09:09.213
> 
> 标签：build, cmake

我有一个大型跨平台项目，需要在各个地方构建；在某些地方，可能会提供不同的 UI 工具包、声音 API 等，我正在尝试找出根据存在的库自动配置哪些目标的最佳方法。

我正在尝试的代码是，例如：

```
find_library(PC_EGL EGL)
find_library(PC_GLESv2 GLESv2)
find_library(PC_Xxf86vm Xxf86vm)
if (DEFINED PC_EGL AND DEFINED PC_GLESv2 AND DEFINED PC_Xxf86vm)
  add_executable(foo foo.cpp)
  target_link_libraries(foo ${PC_EGL} ${PC_GLESv2} ${PC_Xxf86vm})
endif() 
```

但是，如果我在没有可用 libGLESv2 的系统上构建它，我会收到错误消息：

```
CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
PC_GLESv2
    linked by target "foo" in directory /path/to/platform 
```

find_library 文档暗示应该设置变量 PC_EGL_NOTFOUND，但它不是（CMake 2.8.5）。那么，使用 find_library 来确定目标是否应该存在的合适方法是什么？好像使用

```
if (NOT PC_EGL MATCH "-NOTFOUND") 
```

有点脆弱和繁琐，那么有没有更好的机制来根据是否找到库来确定 CMake 命令路径？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T06:16:25.747

简直了

```
if(PC_EGL AND PC_GLESv2 AND PC_GLESv2) 
```

CMake 将`0`, `FALSE`, `OFF`,`ANYTHING-NOTFOUND`视为假。

# regex - Perl 正则表达式“非”（负前瞻）

> ID：10003250
> 
> 赞同：29
> 
> 时间：2012-04-04T00:12:31.397
> 
> 标签：regex, perl, regex-lookarounds

我不太确定这种正则表达式的正确措辞是什么，但基本上我想要做的是匹配任何以“/”开头但后面没有“bob/”的字符串，例如.

所以这些会匹配：

```
/tom/
/tim/
/steve 
```

但这些不会

```
tom
tim
/bob/ 
```

我确信答案非常简单，但是我很难在任何地方搜索“regex not”。我敢肯定，对于我想要的东西，有一个更漂亮的词会带来好的结果，但我不确定它会是什么。

编辑：我已更改标题以指示我正在寻找的正确名称

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-04T00:23:03.637

您可以使用负前瞻（[在 perlre 的“扩展模式”](http://perldoc.perl.org/perlre.html#Extended-Patterns)下记录）：

```
/^\/(?!bob\/)/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-07-05T19:25:43.533

## TLDR：负前瞻

如果你想要一个否定的前瞻只是为了找到`"foo"`它什么时候没有被`"bar"`......

```
$string =~ m/foo(?!bar)/g; 
```

[**在线工作演示**](https://ideone.com/k6HEcK)

## 来源

引用文档...

> `(?!pattern)`
> 
> `(*nla:pattern)`
> 
> `#(*negative_lookahead:pattern)`
> 
> 零宽度负前瞻断言。例如`/foo(?!bar)/`匹配任何出现的“foo”，但后面没有“bar”。但是请注意，lookahead 和lookbehind 不是一回事。您不能将其用于后视。（来源：[**PerlDocs**](https://perldoc.perl.org/perlre#Lookaround-Assertions)。）

## 您的案例的负面预测

接受的答案很好，但没有留下任何解释，所以让我添加一个......

```
/^\/(?!bob\/)/ 
```

*   `^`— 仅匹配字符串的开头。
*   `\/`— 匹配`/`我们需要转义的字符，因为它是正则表达式格式的字符（即`s/find/replacewith/`，等）。
*   `(?!...)`— 如果匹配后有 ，则不匹配`...`。
*   `bob\/`— 这是`...`值，不要匹配`bob/', once more, we need to escape the` /`。

# c# - 快速显示位图

> ID：10003252
> 
> 赞同：1
> 
> 时间：2012-04-04T00:12:35.367
> 
> 标签：c#, wpf, bitmap

我有一个 WPF 应用程序，我需要在其中添加一个功能，该功能将非常快速地显示一系列全屏位图。在大多数情况下，它将只有两个图像，本质上是切换两个图像。它们显示的速率应该是恒定的，每张图像大约 10-20 毫秒。我尝试使用计时器直接在 WPF 中执行此操作，但显示速率似乎有所不同。我也尝试使用 SharpGL（OpenGL 上的 .Net 包装器），但使用大图像时速度非常慢（我可能没有做最好的方法）。我将在编译时间之前预先准备好所有位图，因此只要不更改像素，就可以更改格式。

最好的方法是什么？

我已经落后于计划，所以我没有时间学习大量 API 或尝试大量选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:08:06.250

**“我尝试使用计时器直接在 WPF 中执行此操作，但显示速率似乎略有不同。”**

不要使用定时器，而是使用 Thread.Sleep(20)，因为它不会占用尽可能多的系统资源。这应该会给你一个立竿见影的改善。

听起来好像在图像快速切换时会有用户与应用程序交互，在这种情况下，将切换图像的代码放在后台线程中。请记住，UI- 不是线程安全的。

这些只是速战速决，但您可能需要使用 DirectX 进行[硬件加速](http://en.wikipedia.org/wiki/Hardware_acceleration)来绕过 HAL：

> Windows 的硬件抽象层 (HAL) 在 Hal.dll 中实现。HAL 实现了许多功能，这些功能由不同的硬件平台以不同的方式实现，在这种情况下，主要是指芯片组。然后操作系统中的其他组件可以在所有平台上以相同的方式调用这些函数，而不考虑实际的实现。

# c++ - 向量迭代器不兼容（分段错误）

> ID：10003254
> 
> 赞同：1
> 
> 时间：2012-04-04T00:12:49.383
> 
> 标签：c++, vector, iterator, queue, graph-algorithm

我试图实现一些图形算法，因此通过测试继续我在 GNU C++ 编译器中收到错误（分段错误）。在 Visual Studio 中，我看到原因是“向量迭代器不兼容”。但这是怎么发生的？当我尝试访问访问者对象的字段时，错误在“getName()”行中的 shortestPathBFS 函数中引发。访问者是 Vertice* 队列的一个元素，所以我认为它不能依赖于队列迭代器。如果你能解释我为什么，我将不胜感激。

```
#include <queue>
#include <stack>
#include <vector>
#include <set>
#include <string>
#include <iostream>

using namespace std;

//#define traverse(container,iterator) \
//for(typeof(container.begin()) iterator = container.begin(); iterator != container.end(); iterator++)

class Edge;
class Vertice
{
private:
    string name;
    vector<Edge*> incidences;
    bool visited;
public:
    Vertice() {name = "NULL"; visited = false;}
    Vertice(string name) {this->name = name; visited = false;}
    void setName(string name) {this->name = name;}
    string getName() {return name;}
    bool isVisited() {return visited;}
    void setVisited() {visited = true;}
    void setUnvisited() {visited = false;}
    void connectTo(Vertice*);
    void connectTo(Vertice*,int);
    void printNeighbors();
    vector<Vertice*> getNeighbors();
};

class Edge
{
private:
    int cost;
    Vertice *start,*end;
public:
    friend class Vertice;
    Edge() {cost = 0;}
    Edge(Vertice * start, Vertice * end) {this->start = start; this->end = end;} 
    Edge(Vertice * start, Vertice * end, int cost)
    {this->start = start; this->end = end; this->cost = cost;}
    Vertice* getEnd() {return end;}
    Vertice* getStart() {return start;}
};

void Vertice::connectTo(Vertice * w)
{
    incidences.push_back(new Edge(this,w));
}

void Vertice::connectTo(Vertice* w,int cost)
{
    incidences.push_back(new Edge(this,w,cost));
}

vector<Vertice*> Vertice::getNeighbors()
{
    vector<Vertice*> temp;
    for(vector<Edge*>::iterator it = incidences.begin(); it != incidences.end(); it++)
    {
        temp.push_back((*it)->getEnd());
    }
    return temp;
}

void Vertice::printNeighbors()
{
    for (vector<Edge*>::iterator i=incidences.begin(); i!= incidences.end(); i++)
    {
        cout<<(*i)->start->getName()<<"--"<<(*i)->cost<<"--"<<(*i)->end->getName()<<endl;
    }
}

class Graph
{
public:
    // using set for non-comparable elements are not good
    // but this is for exercising
    set<Vertice *> vertices;
public:
    void initGraph()
    {
        Vertice *v;
        v = new Vertice("IST");vertices.insert(v);
        v = new Vertice("ANK");vertices.insert(v);
        v = new Vertice("IZM");vertices.insert(v);
        v = new Vertice("BER");vertices.insert(v);
        v = new Vertice("TOR");vertices.insert(v);
        v = new Vertice("BEJ");vertices.insert(v);
        v = new Vertice("PER");vertices.insert(v);

        (*findByName("IST"))->connectTo(*findByName("ANK"),10);
        (*findByName("IST"))->connectTo(*findByName("IZM"),5);
        (*findByName("IST"))->connectTo(*findByName("BER"),61);

        (*findByName("IZM"))->connectTo(*findByName("ANK"),3);
        (*findByName("IZM"))->connectTo(*findByName("TOR"),98);
        (*findByName("IZM"))->connectTo(*findByName("BER"),70);

        (*findByName("BER"))->connectTo(*findByName("ANK"),59);
        (*findByName("BER"))->connectTo(*findByName("TOR"),91);

        (*findByName("ANK"))->connectTo(*findByName("PER"),77);
        (*findByName("ANK"))->connectTo(*findByName("BEJ"),151);

        (*findByName("BEJ"))->connectTo(*findByName("TOR"),48);
        (*findByName("TOR"))->connectTo(*findByName("ANK"),100);
        (*findByName("PER"))->connectTo(*findByName("BEJ"),162);
        (*findByName("TOR"))->connectTo(*findByName("PER"),190);
        (*findByName("BEJ"))->connectTo(*findByName("PER"),163);
    }

    set<Vertice*>::iterator findByName(string name)
    {
        for(set<Vertice*>::iterator it = vertices.begin(); it != vertices.end(); it++)
        {
            if ((*it)->getName() == name)
            {
                return it;
            }
        }
        return vertices.end();
    }

    int shortestPathBFS(Vertice * start, Vertice * finish)
    {
        queue<Vertice *> q;
        q.push(start);

        Vertice *visitor;
        while(!q.empty())
        {
            visitor = q.front();q.pop(); 
            visitor->setVisited();
            cout<<"BFS : "<<visitor->getName()<<endl;
            if (visitor->getName() == finish->getName())
            {
                break;
            }
            for(vector<Vertice*>::iterator it = (visitor->getNeighbors()).begin(); it != (visitor->getNeighbors()).end(); it++ )
            {
                if (!(*it)->isVisited())
                {
                    q.push((*it));
                }
            }
        }
        return 0;
    }

    void printAll()
    {
        for(set<Vertice*>::iterator it = vertices.begin(); it != vertices.end(); it++)
        {
            (*it)->printNeighbors();
        }
    }
};

int main(int argc, char **argv)
{
    Graph g;
    g.initGraph();
    g.printAll();
    g.shortestPathBFS(*(g.findByName("IST")),*(g.findByName("PER")));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:17:24.123

罪魁祸首是这一行`Graph::shortestPathBFS`：

```
for(vector<Vertice*>::iterator it = (visitor->getNeighbors()).begin(); it != (visitor->getNeighbors()).end(); it++ ) 
```

问题是你不能比较来自两个不同容器的迭代器（即使容器是相同的类型），但`visitor->getNeighbors()`每次调用它时都会返回一个新对象。因此，`it`从一个对象初始化，然后与来自不同对象的迭代器进行比较。

将循环重写为：

```
vector<Vertice*> neighbors = visitor->getNeighbors();
for(vector<Vertice*>::iterator it = neighbors.begin(); it != neighbors.end(); ++it)
{
    if (!(*it)->isVisited())
    {
        q.push((*it));
    }
} 
```

# booksleeve - 如何使用单例存储带有 Booksleeve 的 RedisConnection？

> ID：10003259
> 
> 赞同：1
> 
> 时间：2012-04-04T00:13:10.270
> 
> 标签：booksleeve

我正在使用 Booksleeve 1.1.0.6（最新的 nuget 包）。

我想为我的整个 Web 应用程序使用一个连接，所以我将它存储在一个单例中：

```
public static RedisConnection Conn = RedisConfig.GetUnsecuredConnection(waitForOpen: true); 
```

**RedisConfig.GetUnsecuredConnection**方法与 BookSleeve 测试中使用的方法相同。

当我尝试执行操作时，我得到一个*InvalidOperationException: The queue is closed*异常：

**[InvalidOperationException: 队列已关闭]** C:\Dev\BookSleeve\BookSleeve\MessageQueue.cs:73 BookSleeve.RedisConnectionBase.ExecuteVoid(RedisMessage message, Boolean queueJump) 中的 BookSleeve.MessageQueue.Enqueue(RedisMessage item, Boolean highPri) C: \Dev\BookSleeve\BookSleeve\RedisConnectionBase.cs:794 ASP.welisten_booksleevetests_aspx.SaveDictionaryToRedis(Dictionary`2 字典) +173 ASP.welisten_booksleevetests_aspx.Page_Load(Object sender, EventArgs e) +67 System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, 对象 o, 对象 t, EventArgs e) +25 System.Web.UI.Control.LoadRecursive() +71 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064

我尝试将**waitForOpen**参数设置为*true*和*false*

这是我要执行的代码：

```
 private void SaveDictionaryToRedis(Dictionary<string, string> dictionary)
    {
        using (Mp.Step("Saving Data to Redis"))
        {
            using (RedisConfig.Conn)
            {
                RedisConfig.Conn.Strings.Set(DB, dictionary);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:47:04.550

根据复制的内容，可能缺少对以下内容的调用：

```
theConnection.Open(); 
```

这将打开连接并执行各种握手。精简单例的情况，在初始化程序期间这样做是合理的。

然而！也许这里的问题是你的第二个例子是完全错误的。如果`Conn`是，如上所述，一个单例 - 那么它不属于该代码，你不应该使用`using`. 这意味着它只能使用一次，并且所有后续访问都将失败。只需访问连接；不在`using`这里。

# spring - Spring表单直接绑定到字段

> ID：10003263
> 
> 赞同：0
> 
> 时间：2012-04-04T00:14:11.203
> 
> 标签：spring, jsp, spring-mvc

有没有办法使用 Spring 的`form`标签来绑定字段而不是“setter”和“getter”方法？

像这样的东西：

```
public class Foo {
  public String bar;
}

<form:form modelAttribute="foo">
  <form:input path="bar" />
</form> 
```

但不使用多余的方法：

```
org.springframework.beans.NotReadablePropertyException: Invalid property 'bar' of bean class ... Bean property 'bar' is not readable or has an invalid getter method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:27:16.677

不幸的是，我认为模型对象需要具有 bean 样式的 getter（“getX()”或“isX()”）和 setter（“setX()”）才能使表单绑定标签正常工作。如果您发现将它们添加到模型类中很烦人，大多数 IDE 可以通过几次击键为您生成这些。

如果您担心对现有模型对象的修改，您还可以考虑专门为表单绑定维护单独的对象——当然这也会导致额外的维护。

# asp.net - 向我们希望与 Web 应用程序交互的现有桌面应用程序供应商提出的问题

> ID：10003265
> 
> 赞同：1
> 
> 时间：2012-04-04T00:14:15.200
> 
> 标签：asp.net

我目前正在参与一个范围界定项目，我们正在做的目标是

将在 .net 框架中创建的 Web 应用程序与用于 Microsoft 平台的 SQL Server 2008R2 连接，并且能够与各种患者管理系统（主要是桌面应用程序）链接，但可能与一些 Web 应用程序链接。

这个想法是，我们正在创建的 Web 应用程序将能够从患者管理系统中提取所选信息（使用患者 ID），并能够使用所选数据预先填充 Web 应用程序。Web 应用程序基本上是一个带有复选框、文本框和列表的表单。

所有数据输入的末尾都有一个功能，可以提取一些感兴趣的报告（现阶段我不确定这是否与问题的这一部分相关）。

我的问题是，我应该问不同的患者管理系统供应商什么样的问题才能使他们的系统与我们的 Web 应用程序链接？

非常感谢，凡妮莎

# c# - 通过枚举集合保存和解析的最快方法？

> ID：10003267
> 
> 赞同：1
> 
> 时间：2012-04-04T00:14:34.887
> 
> 标签：c#, performance, data-structures, enums, loops

在我正在创建的程序中，我有大量的枚举

```
enum kEvents
{
    Start = 0,
    End,
    EntityCreated,
} 
```

在这个程序中，有一个巨大的实体列表。每个实体都拥有一个“注册到”的“kEvents”列表

每次对象说“调用开始事件”时，我都必须遍历游戏中的每个实体，并确定它们是否在“监听”该事件。

注意：我知道 c# 有事件处理程序，但我希望从头开始创建这个枚举系统。

在这种情况下，最好的方法是：

1.  在每个实体对象中保存枚举的集合
2.  检查实体是否持有触发的枚举

我想知道枚举（基本上是数字）是否比`List<T>`对象具有更低级别、更快的处理方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:27:01.410

> 每次对象说“调用开始事件”时，我都必须遍历游戏中的每个实体，并确定它们是否在“监听”该事件。

你这样做是错的！遍历每个对象并检查它们是否已注册事件是非常低效的！这是典型的[观察者设计模式](https://stackoverflow.com/questions/1249517/super-simple-example-of-c-sharp-observer-observable-with-delegates)，有几种方法可以解决这个问题，这里有几个：

1.  有一个事件被引发并有一个事件类型的枚举参数（每个订阅者都得到它）。
2.  有一个枚举和相应事件的字典。

以下是**选项 1**的样子：

```
delegate void OnEventDelegate(kEvents anEvent);
public class MyEventObservable
{
    public event OnEventDelegate OnEvent;
}

public class MyEventObserver
{
    // Constructors and all
    // ...

    public void OnEventReceived(kEvents anEvent)
    {
        switch(anEvent)
        {
            // switch through all the events and handle the ones that you need
        }
    }
}

MyEventObserver observer = new MyEventObserver();
MyEventObservable observable = new MyEventObservable();
observable.OnEvent += new OnEventDelegate(observer.OnEventReceived); 
```

这是**选项2**：

```
public class MyEventObservable
{
    private Dictionary<kEvents, List<IObserver>> _observers;

    MyEventObservable()
    {
        // Initialize the dictionary with all the events
    }

    public void RegisterObserver(kEvents event, IObserver observer)
    {
        _observers[event].Add(observer);
    }
}

interface class IObserver
{    
    void Notify(kEvents anEvent);
}

public MyEventObserver: IObserver
{
    // Constructors and all
    // ...

    // Override the IObserver
    public void Notify(kEvents anEvent)
    {
        switch(anEvent)
        {
            // switch through all the events and handle the ones that you need
        }
    }
}

MyEventObserver observer = new MyEventObserver();
MyEventObservable observable = new MyEventObservable();
observable.RegisterObserver(kEvents.Start, observer); 
```

选项二将减少每个观察者必须处理的事件数量，但其代价是必须分别注册每个事件（这增加了编码复杂性）。这意味着选项 2 将工作得更快，因为要进行的函数调用更少。根据您想要获得的性能有多“疯狂”，可能还有其他选项可以帮助您加快速度，但这应该会让您走上正确的轨道。

PS 我没有编译任何代码，但它应该让你大致了解事情应该如何工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:20:33.577

在我看来，您想实现某种发布/订阅方案，一些集中的事件接收器，实体可以订阅事件并在该事件发生时提供回调，然后其他实体会引发事件并且事件接收器会调用所有订阅该事件的实体......但我可能不明白这个问题:)

就像是：

[如何访问其他类中的控件](https://stackoverflow.com/questions/9831930/how-to-access-controls-in-other-class/9832207#9832207)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T00:29:36.923

> 每次对象说“调用开始事件”时，我都必须遍历游戏中的每个实体，并确定它们是否在“监听”该事件。

如果我正确理解了您在做什么，那么您就是在倒退。实体正在侦听哪些事件的知识不能（仅）存在于事件本身中。*必须*有另一个数据结构来保存这些信息。

其他数据结构可以像从枚举常量到实体列表的 Map 一样简单。

# arrays - GCC：数组类型具有不完整的元素类型

> ID：10003270
> 
> 赞同：34
> 
> 时间：2012-04-04T00:15:08.223
> 
> 标签：arrays, c, gcc, multidimensional-array, incomplete-type

我已经声明了 a `struct`，并尝试将这些结构的数组（以及`double`双精度数组和整数）传递给函数。编译时，我从 gcc收到*“数组类型的元素类型不完整”消息。*我在如何将函数传递`struct`给函数时做错了什么？

```
typedef struct graph_node {
  int X;
  int Y;
  int active;
} g_node;

void print_graph(g_node graph_node[], double weight[][], int nodes); 
```

我也试过`struct g_node graph_node[]`，但我得到了同样的东西。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-04T00:35:12.803

这是在以下方面引起麻烦的数组：

```
void print_graph(g_node graph_node[], double weight[][], int nodes); 
```

必须给出第二个和后续维度：

```
void print_graph(g_node graph_node[], double weight[][32], int nodes); 
```

或者你可以只给一个指针指针：

```
void print_graph(g_node graph_node[], double **weight, int nodes); 
```

然而，虽然它们看起来很相似，但它们在内部却大不相同。

如果您使用的是 C99，则可以使用可变限定数组。引用 C99 标准中的一个示例（第 §6.7.5.2 节数组声明器）：

```
void fvla(int m, int C[m][m]); // valid: VLA with prototype scope

void fvla(int m, int C[m][m])  // valid: adjusted to auto pointer to VLA
{
    typedef int VLA[m][m];     // valid: block scope typedef VLA
    struct tag {
        int (*y)[n];           // invalid: y not ordinary identifier
        int z[n];              // invalid: z not ordinary identifier
    };
    int D[m];                  // valid: auto VLA
    static int E[m];           // invalid: static block scope VLA
    extern int F[m];           // invalid: F has linkage and is VLA
    int (*s)[m];               // valid: auto pointer to VLA
    extern int (*r)[m];        // invalid: r has linkage and points to VLA
    static int (*q)[m] = &B;   // valid: q is a static block pointer to VLA
} 
```

* * *

### 评论中的问题

> [...] 在我的 main() 中，我试图传递给函数的变量是 a `double array[][]`，那么我该如何将它传递给函数呢？传入`array[0][0]`它会给我不兼容的参数类型，`&array`和`&array[0][0]`.

在您的`main()`中，变量应该是：

```
double array[10][20]; 
```

或类似的东西；也许

```
double array[][20] = { { 1.0, 0.0, ... }, ... }; 
```

您应该能够使用如下代码传递它：

```
typedef struct graph_node
{
    int X;
    int Y;
    int active;
} g_node;

void print_graph(g_node graph_node[], double weight[][20], int nodes);

int main(void)
{
    g_node g[10];
    double array[10][20];
    int n = 10;

    print_graph(g, array, n);
    return 0;
} 
```

使用 GCC 4.2 (i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00)) 和 GCC Mac OS X 10.7.3 上的 4.7.0 使用命令行：

```
/usr/bin/gcc -O3 -g -std=c99 -Wall -Wextra -c zzz.c 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-04T00:36:58.480

编译器需要知道二维数组中第二维的大小。例如：

```
void print_graph(g_node graph_node[], double weight[][5], int nodes); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-02T09:38:44.227

`[]`发布此内容以防有人遇到此问题并想知道通常有效和无效的正式原因`[][]`。有各种规则在起作用：有效数组声明的规则以及数组如何作为参数传递给函数的规则“衰减”为指向第一个元素的指针。

C17 6.7.6.2/1 数组声明器：

> 元素类型不应是不完整类型或函数类型。

在 的情况下`double weight[][]`，元素类型是`double[]`，一个不完整的（数组）类型，不允许在任何地方声明，参数与否。因为此数组声明规则适用于函数参数的“数组衰减”规则，该规则可在 C17 6.7.6.3/7 函数声明符中找到：

> 将参数声明为 ''array of type'' 应调整为 ''qualified pointer to type''</p>

该规则假定我们已经有一个数组声明，这必须按照前面引用的 6.7.6.2 规则来完成。

如果是一维数组`double[]`，那么这是一个不完整的数组类型，但元素类型是`double`，这是一个完整的类型。根据 C17 6.7.6.2/4 允许这样的数组声明：

> 如果大小不存在，则数组类型是不完整的类型。

每当这样的数组与初始值设定项列表一起使用时，`double foo[] = { 1.0f };`C17 6.7.9/22 都会声明它的大小取决于初始值设定项，并在声明结束时变为完整类型：

> 如果初始化未知大小的数组，则其大小由具有显式初始化程序的最大索引元素确定。数组类型在其初始值设定项列表的末尾完成。

如果它没有被初始化，而只是函数参数列表的一部分，那么前面提到的“数组衰减”规则适用`double[]`并被替换为`double*`.

现在，如果我们有一个数组参数，例如`double [][3]`，那么它是一个不完整的数组类型，但元素类型`double [3]`是一个完整的数组类型，所以它是一个有效的声明。在这种情况下，参数被调整为指向这种元素类型的指针，`double (*)[3]`. 这就是为什么可以省略多维数组参数声明中最左边的数组维度的原因 - 实际上我们在那里键入的大小无关紧要。

# html - Chrome 边框顶部跨行流血

> ID：10003272
> 
> 赞同：0
> 
> 时间：2012-04-04T00:15:53.263
> 
> 标签：html, css, google-chrome, border

我有一些被渲染的 HTML，我遇到了 Chrome 的问题，其中 a 的边框`<td>`在行的其余部分流血。但是，只有顶部边框在流血。

[我已经能够在这里](http://jsfiddle.net/ydVDv/2/)重新创建问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T00:24:38.767

这是导致这种情况的border-collapse css 子句。这样做来修复它：

> ```
> table
> {
>     border-collapse: separate;
> } 
> ```

# 例子

[http://jsfiddle.net/DigitalBiscuits/ydVDv/4/](http://jsfiddle.net/DigitalBiscuits/ydVDv/4/)

# jpa - JPA ManyToMany 在用户和组的情况下？

> ID：10003274
> 
> 赞同：1
> 
> 时间：2012-04-04T00:16:15.427
> 
> 标签：jpa, many-to-many

[同样的问题在这里，但它没有帮助我](https://stackoverflow.com/questions/9687865/jpa-manytomany-set-update-by-list-of-ids-instead-of-list-of-actual-objects)

![DB：用户表、组和 group_has_user](../Images/262cf0ebaeccecb9bc59728b7a8e3c76.png)

我有三张桌子和多对多的连接。在我的 JSF 应用程序中，我正在尝试添加用户。在我的组表中有三个不同的组：管理员、客户和用户。

我做了什么：

1.  将数据插入 jsf-form 后，用户单击保存。
2.  名为 usersController 的 ManagedBean 从 groupsController 获取组（客户组）
3.  usersController ManagedBean 创建新用户并将其保存到 mySQL-db。
4.  问题是 groups_has_user-table 是空的

**和代码**

用户：

```
public class Users implements Serializable {
@ManyToMany(mappedBy = "usersCollection")
private Collection<Groups> groupsCollection; 
```

团体：

```
public class Groups implements Serializable {
    @JoinTable(name = "groups_has_user", joinColumns = {
        @JoinColumn(name = "groups_group_id", referencedColumnName = "group_id", nullable = false)}, inverseJoinColumns = {
        @JoinColumn(name = "user_username", referencedColumnName = "username", nullable = false)})
    @ManyToMany
    private Collection<Users> usersCollection; 
```

UsersController-managedBean

```
// current is type Users
current.setIsCustomer(Boolean.TRUE);

//BalusC!! Why this is not working but the one below is?
//FacesContext facesContext = FacesContext.getCurrentInstance();
//HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(false);
//GroupsController groupsC = (GroupsController)session.getAttribute("groupsController");

FacesContext context = FacesContext.getCurrentInstance();
GroupsController groupsC = (GroupsController) context.getApplication().evaluateExpressionGet(context, "#{groupsController}", GroupsController.class);

// Fetching group number 2, customer
Groups customerGroup = groupsC.getGroupByGroupId(new Integer(2));
List<Users> usersCollection = (List<Users>) customerGroup.getUsersCollection();
usersCollection.add(current);
//List<Groups> groupList = groupsC.getAllGroups();
customerGroup.setUsersCollection(usersCollection);
// Updating the group using GroupsController
groupsC.updateGroup(customerGroup);

//groupList.add(customerGroup);
//current.setGroupsCollection(groupList);
getFacade().create(current); 
```

我获得加入表（groups_has_user）的唯一方法是将组同时添加到组表中，但是每个用户都有自己的线路，我认为这不是目的。很多人都问过这个问题，但即使我读了这些我也想不通。

谢谢和抱歉！萨米人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:28:33.510

我让它工作了。我的代码很乱，我清理了它，它有帮助。我不太确定为什么更新组表会在用户表中插入一个新用户，但这对我来说没问题。起初我更新了组表并将用户插入到用户表中，但我总是遇到一个异常，即已经存在 pk（用户名是 pk）。所以它对用户表做了两次插入，但现在它工作得很好。没有更多的行到组表只是到联合表和用户表。

```
// Add current new user to the customer-group
            usersCollection.add(currentUser);
            customerGroup.setUsersCollection(usersCollection);

            // Updating the group using GroupsController, THIS INSERTS USER TO USERS-table as well!!
            groupsC.updateGroup(customerGroup); 
```

# maven - 使用 rpm-maven-plugin 时，如何在名称中包含带有空格的文件？

> ID：10003276
> 
> 赞同：1
> 
> 时间：2012-04-04T00:16:51.517
> 
> 标签：maven, rpm, rpm-maven-plugin

我正在尝试打包我自己的项目，其中包括其他项目的一部分。这是我的一个片段`pom.xml`：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>rpm-maven-plugin</artifactId>
  ...
  <mappings>
    ...
    <mapping>
      <directory>${install.target}/contrib</directory>
      <sources>
        <source>
          <location>src/main/resources</location>
          <includes>
            <include>contrib/**/*</include>
          </includes>
        </source>
      </sources>
    </mapping>
    ...
  </mappings>
</plugin> 
```

但是，当我尝试构建 rpm 时，它会出错并显示类似于以下的消息（重复几次）：

```
error: Two files on one line: /install/path/contrib/project/licences/Apache
error: File must begin with "/": Software
error: Two files on one line: /install/path/contrib/project/licences/Apache
error: File must begin with "/": Licence
error: Two files on one line: /install/path/contrib/project/licences/Apache
error: File must begin with "/": v2.0.txt 
```

自然地，在另一个项目中有一个文件叫做`Apache Software Licence v2.0.txt`

有没有办法告诉 maven 在生成规范文件时引用文件名？看起来实际上是 rpmbuild 令人讨厌，但我不完全确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:19:59.877

[http://jira.codehaus.org/browse/MRPM-102](http://jira.codehaus.org/browse/MRPM-102)描述了插件无法正确处理文件名中的空格的问题。解析器将空格解释为文件之间的分隔符，并且构建失败。补丁已提交，并于 2012 年 4 月 14 日接受，最终与插件的 2.1 版一起发布。不确定是否可以使用每晚构建。

# mysql - 通过单击图像按钮 PHP 更新 MySQL

> ID：10003281
> 
> 赞同：2
> 
> 时间：2012-04-04T00:17:34.507
> 
> 标签：mysql, facebook, facebook-javascript-sdk, facebook-php-sdk

我了解如何通过使用表单来更新活动用户数据...但是如何通过单击按钮来更新当前活动用户的特定列 没有表格例如...我有一个主页，用户可以通过以下方式登录facebook，当他们登录并接受权限时，它会将他们转发到我的应用程序的下一步，当他们成功验证所有信息时，所有信息都存储到我的本地 mysql 数据库中的用户表中。现在他们看到了由两个按钮组成的下一页。现在我想要的是，如果他们点击“医生”按钮，它会将“工作”列更新为医生，反之亦然，如果他们点击“程序员”，它会将“工作”列更新为程序员。

我试图完全避免让他们填写信息，我只想单击此按钮将其附加到该字段或单击此按钮将其附加。如果从那以后我没有做任何事情，请告诉我，我很乐意详细解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:51:45.693

Do you mean something like this?

**Update**

Your php file:

```
<?php

if($_POST['Doctor']){

    $sql =("UPDATE users SET job='Doctor' WHERE userid='$someactiveuserid'");
    $result = mysql_query($sql) or die(mysql_error());

} elseif($_POST['Programmer']){

    $sql =("UPDATE users SET job='Programmer' WHERE userid='$someactiveuserid'");
    $result = mysql_query($sql) or die(mysql_error());

}

?>

<html>
<body>
    <form method="post" name="form1" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="submit" name="Programmer" value="Programmer"></br>
    <input type="submit" name="Doctor" value="Doctor">
    </form> 
</body>
</html> 
```

Hope this helps!

# c# - Linq To SQL 等效分组依据，输出中有多个表列

> ID：10003282
> 
> 赞同：1
> 
> 时间：2012-04-04T00:17:36.523
> 
> 标签：c#, linq-to-sql, group-by

我刚刚开始了一个使用 Linq To SQL 的项目（原因有很多，但目前，这就是正在使用的，而不是 EF 或 ANOther ORM）。我的任务是迁移旧的（我在这里说的是 VB6）遗留代码。我主要来自 T-SQL 背景，所以我敲了一个查询，可以做我想做的事，但我必须使用 LINQ to SQL (c# 3.5)，我没有太多经验。请注意，数据库将是 SQL Server 2008 R2 和/或 SQL Azure

这是 T-SQL（简化）

```
SELECT TBS.ServiceAvailID, sum(Places) as TakenPlaces,MAX(SA.TakenPlaces)
FROM TourBookService TBS
JOIN TourBooking TB 
    ON TB.TourBookID=TBS.TourBookID 
JOIN ServiceAvail SA
    ON TBS.ServiceAvailID = SA.ServiceAvailID
WHERE TB.Status = 10
AND ServiceSvrCode='test' 
GROUP BY TBS.ServiceAvailID
HAVING sum(Places) <> MAX(SA.TakenPlaces) 
```

因此，有一个 TourBooking 表，其中包含客户预订的详细信息。这挂在 TourBookService 表上，该表包含他们预订的服务的详细信息。还有一个链接到 TourBookService 表的 ServiceAvail 表。现在， Places 的总和应该等于 ServiceAvail 表中的 Taken places 数量，但有时情况并非如此。如果不是这种情况，此查询会返回任何内容。我可以创建 Linq 来获取 sum(places) 详细信息，但我正在努力获取获取 TakenPlaces 的语法（请注意，这也不包括该`HAVING`子句）

```
var q = from tbs in TourBookServices
join tb in TourBookings on tbs.TourBookID equals tb.TourBookID
join sa in ServiceAvails on tbs.ServiceAvailID equals sa.ServiceAvailID
where (tb.Status == 10)
&& ( tbs.ServiceSvrCode =="test")
group tbs by tbs.ServiceAvailID
into g
select new {g.Key, TotalPlaces = g.Sum(p => p.Places)}; 
```

我需要以某种方式将 sa 表放入组中，以便我可以添加`g.Max(p=>p.PlacesTaken)`到选择中。

我是否试图强迫 T-SQL 思考 LINQ ？我可以有另一个查询，从 ServiceAvail 表中获取所有适当的详细信息，然后遍历两个结果集并匹配键，这很容易做到，但感觉不对（但这可能只是我！）任何评论将不胜感激。

* * *

**更新：** 根据下面接受的答案，这是 Linqer 给我的。我会玩一玩，看看它实际创建了什么 SQL。

```
from tbs in db.TourBookService
join sa in db.ServiceAvail on tbs.ServiceAvailID equals sa.ServiceAvailID
where
  tbs.TourBooking.Status == 10
  tbs.ServiceSvrCode == "test")
group new {tbs, sa} by new {
  tbs.ServiceAvailID
} into g
where   g.Sum(p => p.tbs.Places) != g.Max(p => p.sa.TakenPlaces)
select new {
  ServiceAvailID = (System.Int32?)g.Key.ServiceAvailID,
  TakenPlaces = (System.Int32?)g.Sum(p => p.tbs.Places),
  Column1 = (System.Int32?)g.Max(p => p.sa.TakenPlaces)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:36:06.717

在你的情况下，我会根据我的个人经验尝试使用某种转换器我使用了这个程序[http://sqltolinq.com/](http://sqltolinq.com/)它通常在将 sql 转换为 linq 时效果很好。

# ninject - 命名空间级别的 Ninject 拦截？

> ID：10003283
> 
> 赞同：0
> 
> 时间：2012-04-04T00:17:49.347
> 
> 标签：ninject, ninject-interception

他们是一种使用 Ninject.Extensions.Interception 扩展设置拦截的方法，以便将其应用于命名空间或程序集中的所有类？

当前，我必须像这样每堂课都这样做

```
 Kernel.Bind<MyClass>().ToSelf().Intercept().With<ILoggerAspect>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:55:07.520

`Ninject.Extensions.Conventions`应该注意这一点（尽管它不会影响`Bind`您可能没有通过约定模块生成的任何显式 ings）。

请参阅[Ninject.Extensions.Conventions wiki](https://github.com/ninject/ninject.extensions.conventions/wiki)。

# vb.net - 带有通用文件的 VS2010 项目

> ID：10003285
> 
> 赞同：1
> 
> 时间：2012-04-04T00:18:21.080
> 
> 标签：vb.net, visual-studio-2010

我有一个 vb.net 项目，其中包含 2 个构建的 exe 以及安装程序。这两个 exe 共享一堆公共文件。我不想拥有两个通用文件的副本，也不想让构建事件来复制周围的东西（如果可能的话）。

我的方法是在同一个文件夹中创建两个项目，并让它们指向他们需要的文件。这似乎有效，直到我尝试编译这两个应用程序，此时我在名为 Application.Designer.vb 的文件中收到错误。似乎项目文件在他们的文件夹中创建了这个文件，当我在同一个文件夹中有两个解决方案时，它们会发生冲突。

所以我的下一个努力是在它自己的文件夹中创建第二个项目，并根据需要添加项目。这里的问题是 VS2010 不保存指向不同文件夹中文件的链接，它将文件复制到新的项目文件夹中。

vs2010 完成此任务的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T00:57:14.643

You were almost there when you created your second project. Rather than adding the files to the second project, you need to link them.

When you add them, VS copies the source file to the current project's directory.

When you link a file, it leaves it in its current location and just adds a reference to the file to your project. This means that you are operating with a single source file instead of multiple copies.

To link a file, choose `Add Existing Item...` menu item from the `Project` menu, select the file(s) that you want to link, and then click the dropdown arrow next to the `Add` button on the file dialog and select `Add As Link`.

We have class files that are shared this way among a half-dozen projects, including Win Forms, Silverlight, ASP.Net, Services, and PocketPC.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T00:24:11.207

最简单的解决方案是将所有常见的东西推到一个公共项目中，然后简单地从其他两个解决方案中引用该项目。

*   解决方案 A：
    *   项目A
    *   项目 C
*   解决方案 B：
    *   项目 B
    *   项目 C

反正只是我的建议。

# jspx - 如何在JSPX中输出<而不被浏览器解释

> ID：10003288
> 
> 赞同：1
> 
> 时间：2012-04-04T00:18:56.127
> 
> 标签：jspx

我正在.JSPX 中编写一个 html 提示表，我希望用户看到

```
<b> 
```

所以，我写

```
&#60;b&#62; 
```

或者

```
&lt;b&gt; 
```

但是这两个都产生

```
<b> 
```

作为他们对浏览器的输出，之后的所有内容都变为粗体。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:20:14.820

JSPX 解析器正在处理您的实体。
您需要转义`&`以防止发生这种情况：`&amp;lt;`

# java - getJdbcTemplate().queryForObject 与 Spring JDBC

> ID：10003297
> 
> 赞同：1
> 
> 时间：2012-04-04T00:20:11.503
> 
> 标签：java, spring, jdbctemplate

```
String lastName = this.jdbcTemplate.queryForObject("select last_name from t_actor where id = ?", new Object[]{1212L}, String.class); 
```

我在搜索代码以使用 jdbc 模板从 sql 获取数据时得到了上述行。我想知道什么**`new Object[]{1212L}`**意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T01:18:04.310

每个 ”？” 在查询中代表一个 SQL 参数。Object 数组表示要用于参数的值。在这种情况下，只有一个参数，因此只有一个值。"L" 指定 long 类型的文字，以防您不熟悉该语法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T01:15:39.330

它是 的输入参数`?`，在本例中为数字 1212。​​通常，这将来自某些用户输入或其他数据，而不是在查询中硬编码。

# javascript - jquery 如何在单击此链接 ic 时仅更改链接类

> ID：10003299
> 
> 赞同：0
> 
> 时间：2012-04-04T00:20:16.850
> 
> 标签：javascript, html

我有一个 li 项目我需要更改点击项目的类别如下

*   从默认类中删除当前类
*   将当前类添加到单击的类

我的html代码在这里

```
 <ul class="filter">
                <li><a href="#" title="" class="current">recent</a></li>
                <li><a href="#" title="">top popularity</a></li>
                <li><a href="#" title="">top commented</a></li>
                <li><a href="#" title="">other ...</a></li>

            </ul> 
```

这是完成这项工作的jquery代码

```
 $(".filter > li a").click(function(){

      $(".filter li a.current").removeClass("current");
        $(this).addClass("current");
      }); 
```

它可以完美运行，否则当我单击任何其他链接时，这些链接会将代码应用于它，我只需将此代码应用于 ul.filter

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:16:31.753

可能这会更容易和更简单。它所做的只是删除其兄弟当前类并为其自身添加新的当前类。

```
$('.filter a').click(function(){
  $(this).addClass('current').siblings().removeClass('current');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:10:53.613

这个片段应该适合你！

```
$('.class a').on('click', function(){
  $('.class a').removeClass('current');
  $(this).addClass('current');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T00:29:08.063

使用 :not() 省略当前项

```
 $(".filter > li a").not(".current").on('click', function(){
       if(!$(this).hasClass("current")) {
           $(".filter").find("a.current").removeClass("current");
           $(this).addClass("current");
           alert($(this).html());
       }
   }); 
```

### [演示](http://jsfiddle.net/uEej7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T00:33:35.733

如果您希望点击处理仅发生在 ul.filter 中，那么您应该更新您的选择器以反映这一点：

```
$("ul.filter > li a") 
```

而不是

```
$(".filter > li a") 
```

如果您有多个具有“过滤器”类的 ul 元素，并且您只想将功能应用于其中一个，那么您应该为该特定 ul 提供一个 id 并更改您的选择器以使用该 id。

# c# - 为什么我的 IL 生成的程序集，由 C# 调用的 ilasm.exe 需要 UAC？

> ID：10003301
> 
> 赞同：3
> 
> 时间：2012-04-04T00:20:21.167
> 
> 标签：c#, .net, uac, cil, ilasm

我正在尝试将 IL 代码编译为程序集。`ilasm.exe`应该由我的 C# 应用程序调用。我正在`ilasm.exe`通过`ProcessStartInfo`实例调用。PE的生成工作正常，我的Assembly正在工作。

我的问题是我的应用程序创建的文件，之后需要管理员权限才能执行。

如果我`ilasm.exe`从命令行手动调用，则不需要管理员权限。

使用 ilasm.exe 命令： `ilasm.exe /qui /output="c:\test\newFile.exe" <path to il file>`

我的应用程序调用 ilasm.exe：

```
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.CreateNoWindow = false;
startInfo.UseShellExecute = false;
startInfo.FileName = @"C:\Windows\Microsoft.NET\Framework\v4.0.30319\ilasm.exe";
startInfo.WindowStyle = ProcessWindowStyle.Hidden;
startInfo.Arguments = ilFilePath + " /qui /output=" + outputPath + "testFile.exe";

try
{
    using (Process exeProcess = Process.Start(startInfo))
    {
        exeProcess.WaitForExit();
    }
}
catch
{
    // Log error.
} 
```

我做错什么了吗？从 C# 调用另一个进程时是否需要指定其他任何内容？

我正在运行我的应用程序和没有管理员权限的命令行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:27:46.887

它需要 UAC，因为您没有提供指向 中可写位置的路径`output`，因此它试图写入同一个文件夹`ilasm`（或您的应用程序的当前文件夹）。

`%WINDIR%`非管理员用户对(Windows 文件夹) 或下的任何内容都没有写访问权限`%ProgramFiles%`，因此它要求提升到对文件夹具有写访问权限的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:43:39.013

> 什么是补丁文件？

@Chris 的评论与这个谜题有关，我在问题中看不到它。您可能正在处理 Microsoft 需要使用 UAC 解决的难题。支持需要 UAC 权限但不需要 UAC 权限的旧程序，因为它们是在 Vista 之前编写的。像安装程序。和补丁程序。

我的水晶球说你的实际程序名称不是你的问题所说的 newFile.exe，而是有一个像“update.exe”或“patch.exe”这样的名称。此外，您在生成的程序中没有包含清单也不是很明显。一个清单，表明该程序对`<requestedExecutionLevel>`元素是 Vista 感知的。此外，同样不明显的是，当您从命令行手动运行此程序时，您为 .exe 使用了另一个名称。

这是很多猜测，但将它们放在一起就很有意义：Windows 运行“啊哈！旧程序，听起来它想要写入受限目录中的 .exe 文件。更好地显示 UAC 提示符”。

# java - Android onResume 有时会显示黑屏，有时它不会检测到用户交互

> ID：10003302
> 
> 赞同：2
> 
> 时间：2012-04-04T00:20:27.007
> 
> 标签：java, android

在我们的 Android 应用程序中，我有一个具有显示位图的网格视图的活动。单击一个时，它会调用我的 AdapterView.OnItemClickListener 的自定义实现，它会在其中创建一个新意图并调用 startActivity(intent)。一旦我进入新的活动并按下后退按钮，应用程序要么显示上一个活动的屏幕，但根本没有与之交互，或者如果需要一点时间才能回到上一个活动（由于断点），那么它只显示黑屏。这是最终启动新活动的活动的一些来源。

```
protected void onPause() {
    super.onPause();
    character_dbms.CloseDatabase();
    character_dbms = null;
}

protected void onResume() {
super.onResume();
if(character_dbms == null)
{
    character_dbms = new CharacterDBMS(this);
}
radio_group.setOnCheckedChangeListener(new RadioGroupListener());
character_selection_listener = new GridViewItemListener();
charactergrid.setOnItemClickListener(character_selection_listener);

} 
```

这是启动新活动的函数的覆盖

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub
    LinearLayout selectedview = (LinearLayout)arg1;
    Intent hi = new Intent(LessonActivity.this, WhiteboardActivity.class);
    MandarinCharacter temp = (MandarinCharacter)adapter.getItem(arg2);

    hi.putExtra("CharacterID", temp.GetID());
    startActivity(hi);
} 
```

启动的活动没有什么特别的，只是初始化变量。如果您需要更多信息或来源，请询问，因为我很乐意提供。

onCreate()

```
public void onCreate(Bundle savedInstanceState){
      super.onCreate(savedInstanceState);
      setContentView(R.layout.lessons);
   // LinearLayout 
      radio_holder = (LinearLayout)this.findViewById(R.id.linearLayout2);
      //RadioGroup 
      radio_listener = new RadioGroupListener();
      radio_group = new RadioGroup(this);
      radio_group.setOnCheckedChangeListener(radio_listener);
      radio_holder.addView(radio_group);

      charactergrid = (GridView)findViewById(R.id.gridView1);
      character_selection_listener = new GridViewItemListener();

      character_dbms = new CharacterDBMS(this.getApplicationContext());

      int numberoflessons = character_dbms.GetNumberOfLessons();

      radio_buttons = new RadioButton[numberoflessons];
      for(int iter = 0; iter < numberoflessons; iter++)
      {
          radio_buttons[iter] = new RadioButton(this);
          radio_buttons[iter].setText(character_dbms.GetLessonName(iter + 1));
          radio_buttons[iter].setId(iter);
          radio_buttons[iter].setTextColor(R.color.Black);
          radio_group.addView(radio_buttons[iter]);
      }
      String first_lesson_name = character_dbms.GetLessonName(1);
     charactergrid.setOnItemClickListener(character_selection_listener);

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:29:01.380

看起来这段代码应该在你的`onCreate()`方法中。调用后在`Activity`后台仍然存在`onResume()`，因此您不需要在此处重置点击侦听器。

```
radio_group.setOnCheckedChangeListener(new RadioGroupListener());
character_selection_listener = new GridViewItemListener();
charactergrid.setOnItemClickListener(character_selection_listener); 
```

此外，这可能只是死代码，但您永远不会`arg1`使用`onPause()`.

# wmi - DiskDrive 的 WMI 关联者，其中结果类为 MSStorageDriver

> ID：10003307
> 
> 赞同：0
> 
> 时间：2012-04-04T00:21:08.217
> 
> 标签：wmi, wql

试图将 DiskDrives 中找到`Win32_DiskDrive`的数据与`MSStorageDriver_ATAPISmartData`.

我尝试了以下 WQL 语句，但每次都没有返回任何内容。（我知道MSStorageDrive类中有相关数据）

`ASSOCIATORS OF {Win32_DiskDrive.DeviceID=[value]} WHERE RESULTCLASS = MSStorageDriver_ATAPISmartData`

有什么想法可以匹配数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:59:54.513

答案是这样的：

`SELECT * FROM MSStorageDriver_ATAPISmartData WHERE InstanceName='[PNPDeviceID]'`

只要确保双重转义任何反斜杠。因此，如果在 Win32_DiskDrive 中找到的 PNPDeviceID 是

`IDE\DISKHITACHI_HDT725050VLA360_________________V56OA7EA\5&276E2DE5&0&1.0.0`

获取值将返回什么

`IDE\\DISKHITACHI_HDT725050VLA360_________________V56OA7EA\\5&276E2DE5&0&1.0.0`

但是您需要在 WHERE 子句中发送的是

`IDE\\\\DISKHITACHI_HDT725050VLA360_________________V56OA7EA\\\\5&276E2DE5&0&1.0.0`

傻，不是吗？

哦，根据我收集到的信息，您还需要在设备 ID 的末尾加上 _0，因此您可以一起发送：

`SELECT * FROM MSStorageDriver_ATAPISmartData WHERE InstanceName='IDE\\\\DISKHITACHI_HDT725050VLA360_________________V56OA7EA\\\\5&276E2DE5&0&1.0.0_0'`

# ruby - 来自同一个 jRuby 项目的多个 gem

> ID：10003308
> 
> 赞同：0
> 
> 时间：2012-04-04T00:21:11.047
> 
> 标签：ruby, gem, jruby

我现在正在创建一个 jRuby gem，我可能需要向不同类型的用户公开不同的命令（来自 bin 文件夹）。这是创建不同 gem 的好标准吗，例如“_userX”或“_userY”？（而且 gem 名称可能与项目名称不同，我知道这不是标准）

所以我需要“mygem_for_admin_users”与“mygem_for_normal_users”之类的东西。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:06:49.220

它确实有效，而且肯定有人这样做（例如：[https](https://github.com/mongodb/mongo-ruby-driver) ://github.com/mongodb/mongo-ruby-driver ）。

这显然是非常主观的，但我个人觉得有一个与项目名称不匹配的 gemspec，或者单个项目中有多个 gemspec 是不好的做法。最终，如果它是解决问题的最干净的解决方案，那么它就是最干净的解决方案，你应该去尝试它，但首先要考虑其他解决方法：

*   您可以拥有一个基础 gem 和 2+ 个接口 gem，它们从基础 gem 中公开不同的命令集。

*   您可以以某种方式从库本身识别不同类别的用户，使所有命令都可用，但其中一些命令会受到限制，除非设置了正确的用户类型

*   您可以使用许多子命令（如 bundle 或 git）将所有内容构建到一个命令中，这些子命令对用户类型进行相同的推理

可能有更多选择。

TL;DR：这不是一个很好的做法，但人们这样做了，什么都不会着火。只要确保没有一种简单的方法可以首先避免它。

# c# - 在 C# 客户端中处理 COM 回调

> ID：10003309
> 
> 赞同：0
> 
> 时间：2012-04-04T00:21:18.053
> 
> 标签：c#, multithreading, com, callback, interop

这是应用程序的设计方式 - 我有一个 COM 服务器在某些条件下引发事件。我有一个 C# 客户端 UI，它应该处理这个 COM 服务器引发的这些事件。

我的 C# 客户端中有一个委托，我将它传递给 COM 服务器，它会回调一个事件。我有一个自定义包装器，它将委托编组为函数指针。像这样...

```
 Fxn1inCOMWrapper([In, MarshalAs(UnmanagedType.FunctionPtr)] Client.SetStatusDelegate StatusCallback); 
```

回调机制有效。这里的问题是，一旦我得到回调，我应该调用 COM 服务器中的另一个方法来调用进一步的处理。

我无法从 C# 回调方法对 COM 组件进行第二次函数调用，它破坏了 COM 中的堆栈并返回异常。我猜是这种情况，因为回调与创建 COM 对象和进行第一次调用的线程不同。是否有可能解决这个问题？

一种选择是在 C# 客户端的事件回调中设置一个标志。在主线程的计时器上，检查标志，如果是，则进行第二次调用。但肯定必须有一种更优雅的方式来做到这一点......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:42:48.383

尝试更改`Main()`函数的线程属性。例如，如果您有：

```
[STAThread]
static void Main() 
```

将其更改为：

```
[MTAThread]
static void Main() 
```

# c# - C#中的并行过滤算法

> ID：10003310
> 
> 赞同：0
> 
> 时间：2012-04-04T00:21:21.560
> 
> 标签：c#, filter, parallel-processing

我正在寻找C# 中[并行过滤算法的实现。](http://en.wikipedia.org/wiki/Filter_%28higher-order_function%29)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T00:26:46.533

```
myCollection.AsParallel().Where(...); 
```

来源：http: [//msdn.microsoft.com/en-us/library/dd460714.aspx](http://msdn.microsoft.com/en-us/library/dd460714.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T00:29:53.837

您可能正在寻找[`ParallelEnumerable.AsParallel Method`](http://msdn.microsoft.com/en-us/library/system.linq.parallelenumerable.asparallel.aspx)：

```
var data = Enumerable.Range(1, 100000000).Select(i => i);
var even = data.AsParallel().Where(i => i % 2 == 0); 
```

*   [http://msdn.microsoft.com/en-us/magazine/cc163329.aspx](http://msdn.microsoft.com/en-us/magazine/cc163329.aspx)（不是最新的）
    *   [自上述文章以来的更改列表](http://blogs.msdn.com/b/pfxteam/archive/2007/11/29/6558508.aspx)
*   [根据本主题的视频/文章概述](http://msdn.microsoft.com/en-us/concurrency/ee851578.aspx)
*   [PDF：何时使用 ParallelForEach 或 PLINQ](http://download.microsoft.com/download/B/C/F/BCFD4868-1354-45E3-B71B-B851CD78733D/WhenToUseParallelForEachOrPLINQ.pdf)
*   [PLINQ 何时会加速性能](http://msdn.microsoft.com/en-us/library/dd997399.aspx)

**编辑**：上面的例子**不是**PLINQ 的一个很好的候选者，因为 mudulo 操作还不够，并行化的开销将抵消大部分或全部加速。

我已经从[我自己关于同一主题的问题中](https://stackoverflow.com/questions/7582591/how-to-plinq-an-existing-linq-query-with-joins)复制了链接，它们都值得一读。

# javascript - 当我使用它来创建模板时，在 tinymce 中重新格式化代码

> ID：10003312
> 
> 赞同：1
> 
> 时间：2012-04-04T00:21:52.277
> 
> 标签：javascript, templates, tinymce

我使用 tinymce 来编辑模板，有时我会在表格标签中放入一些正则表达式，如下所示：

```
<table>
<tr><th>ID</th><th>Name</th></tr>
{table_rows}
</table> 
```

我想保存此模板以在其他页面中使用，但 tinymce 会将 {table_rows} 移动到外部表格标记，如下所示：

```
{table_rows}
<table>
<tr><th>ID</th><th>Name</th></tr>
</table> 
```

问题是：如何防止在 tinymce 中重新格式化代码，以便我可以保存免费的 html 代码。

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:44:39.483

这里的问题是你已经把你的`{table_rows}`外部 html 标记。Tinymce 将此类文本包装在适当的 html 标记中。

您应该将您的代码片段包装在一个有效的标签内。

# sql - 创建一个 SQLite 视图，其中一行依赖于前一行

> ID：10003313
> 
> 赞同：9
> 
> 时间：2012-04-04T00:22:03.960
> 
> 标签：sql, sqlite

我想在 SQLite 中创建一个视图，其中一行中的字段取决于前一行中字段的值。我可以使用`LAG`分析函数在 Oracle 中执行此操作，但不确定如何在 SQLite 中执行此操作。

例如，如果我的表看起来像：

```
ITEM        DAY           PRICE
apple       2011-01-07    1.25
orange      2011-01-02    1.00
apple       2011-01-01    1.00
orange      2011-01-03    2.00
apple       2011-01-08    1.00
apple       2011-01-10    1.50 
```

我希望我的视图看起来像`WHERE item = 'apple'`：

```
DAY           PRICE    CHANGE
2011-01-01    1.00     (null)
2011-01-07    1.25     0.25
2011-01-08    2.00     0.75
2011-01-10    1.50     -0.50 
```

编辑：

我正在寻找的查询的等价物会在 Oracle 中看起来像（还没有尝试过，但我认为这是正确的）：

```
SELECT day, price, 
       price - LAG( price, 1 ) OVER ( ORDER BY day ) AS change
  FROM mytable
 WHERE item = 'apple' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:33:07.720

它与另一个想法相同，但只是使用字段而不是 rowid。这正是您想要的：

```
 CREATE TABLE Prices (
    day DATE,
    price FLOAT
);

INSERT INTO Prices(day, price) VALUES(date('now', 'localtime', '+1 day'), 0.5);
INSERT INTO Prices(day, price) VALUES(date('now', 'localtime', '+0 day'), 1);
INSERT INTO Prices(day, price) VALUES(date('now', 'localtime', '-1 day'), 2);
INSERT INTO Prices(day, price) VALUES(date('now', 'localtime', '-2 day'), 7);
INSERT INTO Prices(day, price) VALUES(date('now', 'localtime', '-3 day'), 8);
INSERT INTO Prices(day, price) VALUES(date('now', 'localtime', '-4 day'), 10);

SELECT p1.day, p1.price, p1.price-p2.price 
FROM
    Prices p1, Prices p2,
    (SELECT t2.day AS day1, MAX(t1.day) AS day2 
    FROM Prices t1, Prices t2
    WHERE t1.day < t2.day
    GROUP BY t2.day) AS prev
WHERE p1.day=prev.day1
    AND p2.day=prev.day2 
```

如果要添加该`WHERE item='apple'`位，则将其添加到两个`WHERE`子句中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-17T19:31:22.977

Oracle 等效项是正确的。从[SQLite 3.25.0](https://www.sqlite.org/draft/windowfunctions.html)开始，您可以`LAG`本机使用：

```
WITH mytable(ITEM,DAY,PRICE) AS (
    VALUES
    ('apple',  CAST('20110107' AS DATE),    1.25),
    ('orange', CAST('20110102' AS DATE),    1.00),
    ('apple',  CAST('20110101' AS DATE),    1.00),
    ('orange', CAST('20110103' AS DATE),    2.00),
    ('apple',  CAST('20110108' AS DATE),    2.00),
    ('apple',  CAST('20110110' AS DATE),    1.50)
)
SELECT day, price, price-LAG(price) OVER (ORDER BY day) AS change
FROM mytable
WHERE item = 'apple'
ORDER BY DAY; 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=sqlite_3.27&fiddle=5a22ad903ef11915c3d0166c39967e5f)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-04T10:07:50.670

这应该对每个人都有效`item`（在 SQLite 上测试）：

```
SELECT 
    day
    ,price
    ,price - (SELECT t2.price 
              FROM mytable t2 
              WHERE 
                  t2.item = t1.item AND 
                  t2.day < t1.day      
              ORDER BY t2.day DESC
              LIMIT 1
             ) AS change
FROM mytable t1 
```

这假设 和 之间的组合`day`是`item`唯一的。它的工作方式是取所有**小于**给定的值，按**降序**`day`排序，然后只对第一个值进行排序，模拟一个函数。**`LIMIT``LAG`**

 **对于一个`LEAD`行为，只需翻转`<`到`>`和`DESC`to `ASC`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T00:37:40.853

假设您不删除这将起作用：

```
 SELECT t2.DAY, t2.price, t2.price-t1.price 
FROM TABLENAME t1, TABLENAME t2 
WHERE t1.rowid=t2.rowid-1 
```

这是有效的，因为即使您没有在`CREATE`语句中指定它，每一行都有自己的 rowid。

如果你删除，它变成：

```
 SELECT t2.day, t2.price, t2.price-t1.price 
FROM 
     (SELECT l1.day, l1.price, 
          (SELECT COUNT(*) 
          FROM TABLENAME l2 
          WHERE l2.rowid < l1.rowid) AS count
      FROM TABLENAME l1) AS t1,
     (SELECT l1.day, l1.price, 
          (SELECT COUNT(*) 
          FROM TABLENAME l2 
          WHERE l2.rowid < l1.rowid) AS count
      FROM TABLENAME l1) AS t2
WHERE t1.count=t2.count-1 
```

这是在 rowids 总是增加的假设下工作的。**

# objective-c - 比较 2 个字符串（即数字）

> ID：10003314
> 
> 赞同：0
> 
> 时间：2012-04-04T00:22:13.027
> 
> 标签：objective-c

> **可能重复：**
> [如何对 NSArray 进行自然排序？](https://stackoverflow.com/questions/2846301/how-to-do-a-natural-sort-on-an-nsarray)
> [比较版本号](https://stackoverflow.com/questions/5160216/comparing-version-numbers)

我将我的应用程序版本保存为 NSString。版本采用 xyz 或 xy 格式（其中 x,y,z 表示整数）。

如果我想比较 2 个版本（即：代表 2 个不同/相同版本的 2 个字符串），最好的方法是什么？

谢谢！

晴天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:36:33.970

我有同样的问题，无法让它工作。我终于决定用 NSNumber 保存版本...为我节省了很多时间...所以我建议你也这样做

如果您已经在 App Store 中拥有该应用程序......只需执行以下操作：

```
NSString *string = <get version>
if ([string isKindOfClass:[NSString class]]){
update version and save as NSNumber
} 
```

使用 NSString 保存版本一开始似乎是个好主意，但当您尝试更新应用程序时它会很棘手。使用 NSNumber 更容易，因为它......好吧..使用数字

所以我查看了[NSScanner 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)并提出了这个解决方案：

```
int i1,i2,i3;
NSScanner *scanner =[NSScanner alloc]initWithString:string];
BOOL scanI1 = [scanner scanInteger:&i1];
[scanner setScanLocation:3];
BOOL scanI2 = [scanner scanInteger:&i2];
[scanner setScanLocation:5];
BOOL scanI3 = [scanner scanInteger:&i3];
[scanner release]; 
```

它不漂亮，但应该可以

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:10:29.380

有大约一百万种方法可以解决这个问题，但这里有一个简单的例子：

```
void versionStringComponents(NSString* versionStr_, NSInteger* major__, NSInteger* minor__, NSInteger* bugfix__)
{
    NSArray* elements = [versionStr_ componentsSeparatedByString:@"."];
    *major__ = [[elements objectAtIndex:0] intValue];
    *minor__ = [[elements objectAtIndex:1] intValue];

    *bugfix__ = 0;
    if([elements count] > 2)
    {
        *bugfix__ = [[elements objectAtIndex:2] intValue];
    }
}

bool versionLessThan(NSString* versionStr1_, NSString* versionStr2_)
{
    NSInteger major1 = 0, minor1 = 0, bugfix1 = 0;
    versionStringComponents(versionStr1_, &major1, &minor1, &bugfix1);

    NSInteger major2 = 0, minor2 = 0, bugfix2 = 0;
    versionStringComponents(versionStr2_, &major2, &minor2, &bugfix2);

    return (
        major1 < major2 ||
        (major1 == major2 && minor1 < minor2) ||
        (major1 == major2 && minor1 == minor2 && bugfix1 < bugfix2)
    );
} 
```

显然这是一个快速的小技巧，因为`versionStringComponents()`只是盲目地将版本号与字符串分开，将它们转换为整数等。此外，它可以使用更多的比较函数，但我相信你可以弄清楚这些。

[正如Saphrosit](https://stackoverflow.com/questions/10003314/compare-2-strings-that-are-numbers#comment12787775_10003314)所提到的，[此链接](https://stackoverflow.com/questions/5160216/comparing-version-numbers)是完成相同任务的更短的方法，但需要使用 Sparkle 框架中的代码。

# .net - 验证 RavenDB 从 SQL Server 导入大量数据的好方法？

> ID：10003315
> 
> 赞同：1
> 
> 时间：2012-04-04T00:22:37.660
> 
> 标签：.net, sql, ravendb

我正在使用控制台应用程序将大量数据从 SQL Server 迁移到 RavenDB。

验证 RavenDB 中的数据是从 SQL Server 导入的最佳方法是什么？

我尝试从 RavenDB 创建对象列表，并将其与 Sql 中的相同对象列表进行比较。

我遇到的问题是数据太大，即使我查询特定数据，也无法将其全部放入一个集合中进行比较。

我一次只能在控制台应用程序中直接从 RavenDB（只有 128 个列表）检索少量数据。我知道可以在服务器端覆盖它，但这是我做不到的。我想也许索引可以在这种情况下帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:07:58.080

Moyler，您可以翻阅数据并进行比较。

# java - 数组设置长度和存储信息

> ID：10003321
> 
> 赞同：1
> 
> 时间：2012-04-04T00:23:06.723
> 
> 标签：java

这是家庭作业。我正在尝试使用数组，这是第一个使用它们的项目。我的书展示了各种示例，但他们编写示例的方式并不能完全满足作业的要求。

我正在尝试编写一个程序，要求用户将学生输入系统。该程序首先询问您将输入多少，然后它会提示您输入名字、姓氏和分数。

我试图用这部分代码完成的是询问用户他们将输入多少学生。那行代码说

```
 getStudentCount(); 
```

是一种收集该信息然后返回 studentCount 的方法

我试图将其编码为数组的长度将成为用户输入的数字，但它不起作用，所以我想寻求指导。理想情况下，如果这有效并且用户输入 3，那么系统将提示您输入信息 3 次。如果用户输入 0，那么程序不会询问您任何内容。

```
 public static void main(String[] args)
{

    System.out.println("Welcome to the Student Scores Application.");

    int studentCount = 1;

    getStudentCount();
    studentCount = sc.nextInt();

    String [] students = new String[studentCount];
    for (int i = 0; i < students.length; i++)
    {

        Student s = new Student();
        String firstName = getString("Enter first name: ");
        s.setFirstName(firstName);

        String lastName = getString("Enter last name: ");
        s.setLastName(lastName);

        int score = getScore("Enter score: ");
        s.setScore(score);

    }

} 
```

在我尝试编码之前，我在程序中所拥有的一切都正常工作

```
 String [] students = new String[studentCount];
    for (int i = 0; i < students.length; i++) 
```

这告诉我我这样做的方式有问题。

作业还要求我将信息存储在数组中。我不清楚如何调用它，或者我猜想存储它......我还有另一个带有 setter 和 getter 的课程。这足以存储它吗？我该怎么称呼它？同样，这是家庭作业，因此感谢您提供任何指导。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:29:19.713

好吧，这至少是一个家庭作业示例，显示了被问者的一些工作（并且写得很好），所以这里有一些帮助：

您将 studentCount 设置为 1 然后调用`getStudentcount()`，但从不将返回值分配给您的变量，因此变量保持为 1 （尽管您稍后会用`sc.nextInt()`它覆盖它，如果您已经有一个不错的方法，这可能不是您想要的）。修复只是将方法的返回值分配给变量 [1]

[1] 是的，我知道我不应该完全回答家庭作业问题，但我真的看不出有什么办法只能回答部分问题——尽管欢迎提出建议 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T00:34:49.260

我的提示：

1.  仔细看看你是如何计算学生人数的，以及你把它放在哪里。您似乎以两种不同的方式获得计数，这充其量是多余的，并且可能是一个错误。

2.  大概有一个堆栈跟踪。阅读！！

    堆栈跟踪将告诉您抛出了什么异常、它的诊断消息是什么、抛出的位置以及问题发生时它在代码中执行的位置。

3.  如果您难以想象正在发生的事情，请使用 Java IDE 的调试器并单步执行程序。

* * *

[根据您的后续评论，没有堆栈跟踪。但是，如果有的话，您应该阅读它:-)]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:32:16.343

我不明白你的台词

```
getStudentCount();
studentCount = sc.nextInt(); 
```

如果 getStudentCount() “返回”他们输入的数字（如您在文本中描述的那样），似乎您应该这样做

```
int studentCOunt = getStudentCount(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T01:02:36.563

我试图不完全为您完成作业，但请查看下面的代码以了解如何执行此操作：

```
 /* Some Declarations You're Going to Need */
private static Scanner scan = new Scanner(System.in); //Private, only need it in here
public static Student[] students; //Public, access it from any class you may need

public static void main(String[] args) {
    System.out.println("Welcome to the Student Scores Application.");
    System.out.print("Amount of students:");
    int studentCount = scan.nextInt();
    students = new Student[studentCount];
    for (int i = 0; i < students.length; i++) {
        students[i] = new Student();

        System.out.print("Enter first name:");
        String firstName = scan.next();
        students[i].setFirstName(firstName);

        System.out.print("Enter last name:");
        String lastName = scan.next();
        students[i].setLastName(lastName);

        System.out.print("Enter score:");
        int score = scan.nextInt();
        students[i].setScore(score);
    }
    scan = null; //Done with scanner
} 
```

# python - 是否存在要写入控制台的文件名或句柄之类的东西？

> ID：10003322
> 
> 赞同：1
> 
> 时间：2012-04-04T00:23:09.683
> 
> 标签：python

我`myFile.write("...")`经常使用，有时我想在控制台中查看输出，而不是重新打开更新的文件。我正在使用空闲。

所以，我想知道，在设置 myFile 变量时，我可以用 STDIO 之类的东西替换文件名（），而不是到处替换`myFile.write()`吗？`print()``output.txt`

```
myFile = open("output.txt", "w") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T00:27:30.713

您可以使用该`sys`模块...

```
import sys
myFile=sys.stdout
myFile.write("Hello!\n") 
```

`sys.stderr`也可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:27:51.777

给你：[sys.stdout](http://docs.python.org/library/sys.html#sys.stdout)。就像任何其他文件句柄一样使用它。例如

```
print >> sys.stderr, "Hi! I'm an error!" 
```

# c++ - 什么是实际应用过滤器？

> ID：10003324
> 
> 赞同：2
> 
> 时间：2012-04-04T00:23:20.543
> 
> 标签：c++, algorithm, image-processing

我正在尝试使用我不熟悉的概念来解决 C++ 中的一个具有挑战性的问题。

我正在尝试将过滤器应用于矩阵。但是，就像我说的那样，我对此很陌生，经过一番调查后，我发现此链接显示应用过滤器基本上是乘法

但是让我感到困惑的是，如果我的过滤器是 [0,1,0] 并且我必须将其应用于 5x5 矩阵。我怎么能做到这一点？

[带有内核的 GIMP 过滤](http://docs.gimp.org/en/plug-in-convmatrix.html)

[第一个链接的替代方案](http://micro.magnet.fsu.edu/primer/java/digitalimaging/processing/kernelmaskoperation/)

**编辑：**第二个链接真的让我很困惑。我现在几乎正在尝试决定“申请”过程。如果我遵循创建一个只有对角线 [0,1,0] 的 3x3 矩阵的想法，我会像在第二个链接中那样应用它，还是必须将它应用到矩阵中的每个单元格。或者，如果它真的是一维过滤器，我应该再次将它应用到每个单元格还是忽略边缘和角落？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:55:27.317

那是一个卷积核。

这个想法是你用它和它的邻居的加权平均值替换每个像素，其中权重由你的卷积核给出。该过程很好地解释了例如[here](http://www.aishack.in/2010/08/convolutions/)。

我发现你有一个一维卷积核（即适用于一维图像）很奇怪，当通常用于图像处理时使用二维卷积核（它也从上面/下面的行中获取像素） ，但可能是您的算法只需要使用当前行中的像素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T00:55:10.780

我认为被忽略的事情是使用输入数据的子集对输入数组的每个元素重复乘法。

GIMP 示例展示了如何使用 3x3 过滤器对单个像素过滤 5x5 图像：

```
. . . . .                  . . . . .
. - - - .     . . .        . . . . .
. - @ - .  x  . . .   ->   . . @ . . 
. - - - .     . . .        . . . . .
. . . . .                  . . . . . 
```

我用 a 标记了一个输入像素，用 标记了`@`它的邻居`-`。您使用较小的矩阵：

```
- - -     . . .
- @ -  x  . . .  = 3x3 array
- - -     . . . 
```

将生成的 3x3 数组中的数字相加，并将该值存储到*新*图像中，代替`@`像素。

举个例子，当使用 3x1 过滤器过滤 5x5 图像时：

```
. . . . .                  . . . . .
. . . . .                  . . . . .
. - @ - .  x  . . .   ->   . . @ . . 
. . . . .                  . . . . .
. . . . .                  . . . . . 
```

您将使用输入数组的较小子集来匹配您的内核；

```
- @ -  x  . . .  = 1x3 array 
```

然后，再次将结果数组中的数字相加，并将该值存储到新图像中以代替`@`像素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T01:11:19.383

您在答案中寻找的内容令人困惑。如果我们假设您的过滤器存储在`std::vector<double>`被调用`filter`并且您的图像实际上是 2D 并且具有类型`std::vector< std::vector<double> >`称为`image`，那么我们可以执行以下操作来应用 1-D 过滤器`[-1,0,1]`：

```
 std::vector< std::vector<double> > new_image;
 std::vector<double> filter;
 filter.push_back(-1.0); filter.push_back(0.0); filter.push_back(1.0);

 for(int i = 0; i < image.size(); i++){
     for(int j = 0; j < image.at(i).size(); j++){

         new_image.at(i).push_back( filter.at(0)*image.at(i).at(j-1)
                                    + filter.at(1)*image.at(i).at(j)
                                    + filter.at(2)*image.at(i).at(j+1) );

     }
 } 
```

例如，如果您想要一个像这样的二维过滤器

```
 [0 1 0]
 [1 0 1]
 [0 1 0] 
```

然后我们假设它也被存储为向量的向量，并且基本上也是如此。

```
 std::vector< std::vector<double> > new_image;

 for(int i = 0; i < image.size(); i++){
     for(int j = 0; j < image.at(i).size(); j++){

         top_filter_term = filter.at(0).at(0)*image.at(i-1).at(j-1)
                          + filter.at(0).at(1)*image.at(i-1).at(j)
                          + filter.at(0).at(2)*image.at(i-1).at(j+1);

         mid_filter_term = filter.at(1).at(0)*image.at(i).at(j-1)
                          + filter.at(1).at(1)*image.at(i).at(j)
                          + filter.at(1).at(2)*image.at(i).at(j+1);

         bot_filter_term = filter.at(2).at(0)*image.at(i+1).at(j-1)
                          + filter.at(2).at(1)*image.at(i+1).at(j)
                          + filter.at(2).at(2)*image.at(i+1).at(j+1);

         new_image.at(i).push_back(top_filter_term + mid_filter_term + bot_filter_term);

     }
 } 
```

**请注意**——我没有对过滤器数组进行边界检查，你真的应该只在远离图像边缘的地方应用它，或者添加代码来应用你想要的过滤器的任何类型的边界条件. 我也没有对此进行优化发表任何声明。对于大多数用途，使用矢量是一种很好的方法，因为它们可以动态调整大小并提供足够的内置支持来执行许多有用的图像操作。但是对于真正大规模的处理，您需要优化过滤操作等内容。

至于您关于过滤 3D 数组的问题，有几件事需要考虑。一，确保您确实想要过滤整个数组。对于许多图像处理任务，将所有颜色通道拆分为它们自己的 2D 数组，进行处理，然后将它们重新组合在一起会更好、更有效。如果您确实想要一个真正的 3D 过滤器，那么请确保您的过滤器实际上是 3D 的，也就是说，它将是一个由向量​​组成的向量。然后，您将使用与上述完全相同的逻辑，但您将为应用于图像的每个颜色通道或“切片”的过滤器部分添加一层额外的术语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T00:34:18.947

我认为您在谈论滤色器。从技术上讲，5X5 图像实际上是 5X5X3 (A)，其中“3”对应于 3 种基本颜色 (RGB)。现在，创建一个对角线为 [0,1,0] (T) 的 3X3 矩阵。

现在将这两个矩阵（AXT）相乘得到新的 5X5X3 图像矩阵。

# ruby-on-rails - 我在 Ubuntu 8.04.4 机器上安装 RVM 失败。我应该将它安装为多用户吗？

> ID：10003329
> 
> 赞同：1
> 
> 时间：2012-04-04T00:24:11.023
> 
> 标签：ruby-on-rails, ruby, ubuntu, rvm

我目前正在尝试使用 8.04.4 版在 Ubuntu 服务器上安装 RVM。

目前我正在尝试单用户安装。我是唯一一个管理这台机器的人，我对此仍然很不满意。我目前正在关注 RVM 站点上的安装指南，并将“k”标志添加到 curl 命令中。关于证书的投诉仍然没有消失。

```
$ bash -s stable < <(curl -sk https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)
Downloading RVM from wayneeseguin branch stable

curl: (77) error setting certificate verify locations:
  CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: none

Could not download 'https://github.com/wayneeseguin/rvm/tarball/stable'.
  curl returned status '77'. 
```

我的最终目标只是在这台机器上将 ruby​​ 从 v1.8.6 升级到 1.9.2。

我注意到很多人反对多用户安装，这就是为什么我还没有尝试过。是否建议我尝试多用户安装？如果没有，有人可以帮助我消除此证书问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:21:55.943

做单用户。不过，您的问题不是 RVM——而是 CA 证书。

阅读此链接并确保您的 SSL 是最新的，并且您已安装 CA 证书：

[https://help.ubuntu.com/community/OpenSSL](https://help.ubuntu.com/community/OpenSSL)

使用 apt 在 Ubuntu 上安装 ca 证书：

```
apt-get install ca-certificates 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:23:52.090

根据`man curl`这个问题是：

```
77     Problem with reading the SSL CA cert (path? access rights?). 
```

我猜你对上述文件的访问权限有问题：

```
/etc/ssl/certs/ca-certificates.crt 
```

确保所有用户都可以阅读：

```
sudo chmod 755 /etc/ /etc/ssl/ /etc/ssl/certs/
sudo chmod 644 /etc/ssl/certs/ca-certificates.crt 
```

# java - 为未知数量的表配置服务器端数据表

> ID：10003331
> 
> 赞同：0
> 
> 时间：2012-04-04T00:24:12.637
> 
> 标签：java, datatables, server-side

我正在使用 DataTables 和在与数据库对话的 java 控制器类中生成的表。给定一个类别 id，控制器类返回未知数量的预格式化 HTML 表，一个用于查询给定类别中的每个部分。理想情况下，我想在同一页面上将每个表显示为 DataTable，但不确定这是否可能，因为我不知道我将返回多少表，因此我无法在查询之前设置它们的行为。

当/当我从控制器获取表格时，有没有办法格式化表格？我试图在每个表前面加上自己的 .ready 块，但这似乎并没有奏效，尽管我对 jQuery 还很陌生，可能只是遗漏了一些东西。我使用了最简单的配置来尝试让它首先工作

```
 $(document).ready(function(){
            $("#results").dataTable({
                "bJQueryUI" : true
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T01:08:34.833

```
$(document).ready(function() {
$('.dataTable').dataTable();
} ); 
```

毕竟结果是可以工作的，但只有当您将表格指定为 class="dataTable" 时，它没有得到很好的记录或解释，希望这不会让其他人感到困惑！

# node.js - 是否可以将 NodeJS 作为脚本引擎包含在可执行文件中？

> ID：10003332
> 
> 赞同：4
> 
> 时间：2012-04-04T00:24:15.147
> 
> 标签：node.js

我有一个用 C 编写的应用程序。我想在这个应用程序中执行用 JavaScript 编写的用户定义脚本，并允许这些脚本与映射到 JavaScript 命名空间的我的内部 C 变量一起工作。

是否可以使用 NodeJS 将其编译为脚本引擎？

我知道我可以反之亦然：运行 NodeJS 并将我的 C 代码用作 NodeJS 的库，并将 C 变量正确绑定到 JS。但这是不可接受的，因为我的应用程序有一个 GUI 和许多其他模块作为库包含在内，并且很难重写代码以作为 NodeJS 库运行。

由于性能原因，每次我需要运行脚本时，我也不想将 NodeJS 作为外部可执行文件运行。我需要将 NodeJS 保存在内存中，并在整个进程周期中在同一个命名空间中运行脚本。

也许有一些专门用于此目的的 NodeJS 特殊版本？或者我可以这样编译它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:42:50.167

这是一个使用 v8 执行一些 javascript 的示例：

```
int main(int argc, char* argv[]) {

  // Create a string containing the JavaScript source code.
  String source = String::New("'Hello' + ', World'");

  // Compile the source code.
  Script script = Script::Compile(source);

  // Run the script to get the result.
  Value result = script->Run();

  // Convert the result to an ASCII string and print it.
  String::AsciiValue ascii(result);
  printf("%s\n", *ascii);
  return 0;
} 
```

来自：[https ://developers.google.com/v8/get_started](https://developers.google.com/v8/get_started)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:34:08.850

您需要的是 V8 javascript 引擎。在[这里](https://developers.google.com/v8/embed)查看更多详细信息...

`This document discusses these concepts further and introduces others that are key to embedding V8 within your own C++ application.`

您可以使用 nodejs 的目的可能是查看它的源代码，了解如何在 V8 引擎之上构建。

这是一个简单[的](https://developers.google.com/v8/get_started)例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:37:22.563

为什么不探索 Node 的内部结构并“复制”它正在做的事情。然后您可以在 V8 之上构建您的应用程序。毕竟，Node.JS 只是 V8 和几个库 (I/O) 之上的一层，以提供额外的功能。

# c - 使用 printf 和 scanf 的 C 程序在输入时崩溃

> ID：10003334
> 
> 赞同：2
> 
> 时间：2012-04-04T00:24:37.743
> 
> 标签：c, segmentation-fault, scanf

我正在编写以下 c 代码并收到错误：

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
char *prot;
char addr[20];
FILE *fp;
int i = 0;
int tos,pld;

prot = (char *)malloc(sizeof(char *));
//addr = (char *)malloc(sizeof(char *));

printf("\n enter the protocol for test::");
scanf(" %s",prot);
printf("\n enter the addr::");
scanf(" %s",addr);
printf("\n enter the length of the payload::");
scanf(" %d",pld);
printf("\n enter the tos :: ");
scanf(" %d",tos); 
```

输入值时出现以下错误。出现分段错误，谁能告诉我为什么会出现此分段错误：

```
enter the protocol for test::we

enter the addr::qw

enter the length of the payload::12

Segmentation fault 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T00:27:28.890

```
prot = (char *)malloc(sizeof(char *)); 
```

应该：

```
prot = malloc(sizeof(char) * SIZE); // SIZE is the no. of chars you want 
```

另一个问题是：您应该使用`&`for 中的整数`scanf()`！

随着变化：

```
printf("\n enter the length of the payload::");
scanf(" %d",&pld);
printf("\n enter the tos :: ");
scanf(" %d",&tos); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T00:28:19.497

分段错误是因为`scanf`需要一个*指向*应存储扫描值的变量的指针，但您传递了变量`pld`本身。这是未初始化的，因此当被解释为指向野外的指针时。同样的情况也发生在`tos`. 当然，您应该`prot`为另外指出的那样分配适当的空间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T00:28:41.480

您的内存分配为`prot`字符串分配了 4 个字节（在 32 位系统上）或 8 个字节（在 64 位系统上）。如果你读的比它多，你的缓冲区就会溢出。

除非有充分的理由不这样做，否则我会简单地使用：

```
char prot[128]; 
```

任何适合字符串的大小。

您还应该检查所有`scanf()`呼叫以确保它们成功；您可能应该对字符串的大小施加限制。对于 a `char prot[128];`，安全转换为`%127s`；null 不计入转换规范。

如果您的编译器没有就这些行向您发出警告：

```
scanf(" %d",pld);
scanf(" %d",tos); 
```

您需要打开更多警告或获得更好的编译器。如果它警告您，请注意您的编译器；它比你更了解 C（而且可能比我更了解它）。

```
scanf(" %d", &pld);
scanf(" %d", &tos); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T00:27:19.450

这可能不是您当前问题的根源，但它是一个错误：

```
prot = (char *)malloc(sizeof(char *)); 
```

我怀疑您是否打算制作一个大小为一个字符指针的缓冲区。

无论如何，要查明您的直接问题，请在 valgrind 和/或调试器下运行您的程序。在这种特殊情况下，仅启用编译器警告会引起您的问题，即您按值传递整数，而您应该通过指针传递给 scanf。只要您启用相关选项，编译器就可以解决这个问题，而不是找我们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T00:29:29.827

`scanf`期望指向您正在填充的变量的指针（字符串的情况除外，它已经是指向 的指针`char`）。

尝试

```
scanf(" %d", &pld); 
```

和一样`tos`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T05:06:02.420

scanf 函数族是作业中问题的主要来源。

1.  他们总是期望地址，因此它们可以用作输出。
2.  它们不能进行类型检查，因为该部分的原型是……，所以你可以在那里放任何东西。编译器不会抱怨。

当事情不起作用时，检查接收器参数，它们需要是要写入的项目的地址，并且类型必须与您在格式字符串中指定的内容相匹配。

# c++ - 在 VS2010 中：如何使 [tab] [tab] 片段快捷方式在 .CPP 文件上工作？

> ID：10003338
> 
> 赞同：0
> 
> 时间：2012-04-04T00:24:57.787
> 
> 标签：c++, visual-studio-2010, keyboard-shortcuts, intellisense, code-snippets

vs2010专业版。Windows 7的

我说的是像“for”“while”“class”“ctor”这样的片段。我注意到他们完美地处理 .cs 文件，所以它不是一个覆盖。当我处理 .cpp 文件时，它不会响应。不是选项卡选项卡快捷方式，也不是 ctrl+k ctrl+x 替代方案。

似乎默认配置在处理 cpp 时会忽略片段。请问我该如何更改？

# xcode - .trace 文件 xcode 仪器

> ID：10003339
> 
> 赞同：2
> 
> 时间：2012-04-04T00:25:05.537
> 
> 标签：xcode, instruments, ios-ui-automation

我无法打开 .trace 文件，该文件是在 Xcode-instruments 中运行的测试脚本的输出。当我尝试打开它时，它显示无法打开文件。

请建议是否有打开它的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:58:38.333

就我而言，我发现顶级 .trace 文件夹内还有第二个 .trace 文件夹，它们共享相同的名称。如果你把第二个拖出来，那么 Instruments 打开第二个就没有问题了。

我用 Xcode4.6（仪器 4.5）对此进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T23:17:00.937

从 Finder 中，获取文件的上下文菜单，选择“显示包内容”。在命令行 shell 中，只需将其导航到文件，就好像它是一个目录一样。

# php - 使用 PHP，如何将表单输入的文本显示到同一 PHP 页面的底部？

> ID：10003340
> 
> 赞同：0
> 
> 时间：2012-04-04T00:25:16.863
> 
> 标签：php, html

使用 PHP，如何将表单输入的文本显示到同一 PHP 页面的底部？

按下提交后，我试图在底部显示用户输入

```
<form name="assignment2" method="post" action="<?php echo $_SERVER['PHP_SELF'];?>"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:31:50.817

你不需要 AJAX 或 jQuery；您可以将其保留为简单的 PHP：

```
<?php

  echo '<form name="assignment2" method="post" action="'. $_SERVER['PHP_SELF'] .'">';

  // Other form elements

  echo '</form>';

  if(isset($_POST['submit']))
  {
     echo '<input type="text" value="'. $_POST['value_you_want'] .'">';
  }

?> 
```

正如 Basti 指出的那样，您应该始终对跨站点脚本的可能性保持谨慎，因此您应该只将上面的代码真正用于非敏感数据或远离数据库的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:31:58.400

由于您的表单是通过 POST 请求发送的，因此可以使用`$_POST`. 您可以简单地将它们作为`value`.

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">

    <input type="text" name="inputname" 
        value="<?php echo @htmlspecialchars($_POST["inputname"]); ?>" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:29:27.987

听起来你想要 AJAX。为此，表单应该向服务器发布一个 XMLHttpRequest；然后页面上的 JavaScript 应该动态修改页面 DOM 以显示您想要的文本。

如果您对它是静态的没意见，那么如果没有输入数据，则让 PHP 页面仅显示表单，如果有输入数据，则显示数据。

# javascript - 切换菜单 - 在当前页面上保持菜单打开

> ID：10003359
> 
> 赞同：0
> 
> 时间：2012-04-04T00:28:06.263
> 
> 标签：javascript, jquery, html, css

我有一个切换菜单，请参阅[JsFiddle中的代码和功能](http://jsfiddle.net/colemande/LcsLr/31/)

当您单击 h3 标签时，例如类别 1，它是一个标签，菜单打开并在链接/当前页面上保持打开状态。

但是，当您再次单击 h3 标记 (Category1) 或类别 1 的任何子菜单（例如选项 1）时，菜单会折叠关闭，然后在当前页面上再次打开。

当您单击当前页面上的任何链接时，有什么方法可以避免关闭和打开功能？

任何代码或示例将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:40:00.613

[http://jsfiddle.net/LcsLr/33/](http://jsfiddle.net/LcsLr/33/)

**HTML**

```
 <html>
    <head>
    <title>Test</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    </head>

<body>

  <div id="productmenu">
    <div class="submenublock" id="submenu1">

        <h3>
            <a href="#" class="link" >Category 1</a>
            <a href='#' class="arrow" ></a>             
        </h3>
        <ul class="second_level">
           <li><a href="#" class="linkx">Option 1</a></li>
           <li><a href="#" class="linkx">Option 2</a></li>
        </ul>
      </div>

      <div class="submenublock" id="submenu2">

      <h3><a href="#" class="link">Category 2</a></h3>

      </div>

      <div class="submenublock" id="submenu3">
          <h3>
              <a href="#" class="link">Category 3</a>
              <a href='#' class="arrow" ></a>
          </h3>
           <ul class="second_level">
               <li><a href="#" class="linkx">Option 1
                   </a></li>
               <li><a href="#" class="linkx">Option 2
                   </a></li>
               <li><a href="#" class="linkx">Option 3
                   </a></li>
           </ul>
      </div>

   </div>

</body>​ 
```

**JS**

```
 $(document).ready(function() {

    $('h3,.second_level li').each(function(){
        var href = $(this).children('a').attr('href');

        if(window.location.pathname.search(href) != -1) {
          $(this).children('a').addClass('currentPage')
        }
    });

    $('.currentPage').each(function(){

        var parent;

        if($(this).parent('h3').length > 0){
            parent = $(this).parent('h3');
        }
        else{
            parent = $(this).parents('ul').siblings('h3');
        }

        $(parent).children('.arrow').addClass('open');
        $(parent).siblings('ul').show();

    });

    $('.link').click(function() {

        OpenParent($(this).parent('h3'));

        window.location = $(this).attr('href');

    });

    $('.arrow').click(function(e){
        e.preventDefault();
        OpenParent($(this).parent('h3'));

    });        
});

function OpenParent(CurrentParent){
   var currentArrow = $(CurrentParent).children('.arrow');

   $('.open').not(currentArrow ).removeClass('open').parent().siblings('ul').slideUp('fast');

   currentArrow.toggleClass('open');

   $(CurrentParent).next().slideToggle('fast');

}​ 
```

**CSS**

```
 #sidebar {
   float:left;
   width:220px;
}

#productmenu { width:220px; margin-left: 0px;}

.submenublock{

    margin: 0px;
    padding: 0px;

}

.submenublock h3{
    font-family:Arial, Helvetica, sans-serif;
    font-size:15px;
    margin: 0px; 
    border-bottom:#CCC 1px solid;
}

.submenublock h3 a{
    font-family:Arial, Helvetica, sans-serif;
    font-size:15px;
    text-decoration:none;
    color: #000000;

}

.submenublock h3 a:hover, .submenublock h3 a:active, .submenublock h3 a:focus
{
color: #00aeef;
}

.second_level{
    list-style-type:none;
    list-style:none;
    margin:0px;
    padding:0px;

}

.second_level li{
    list-style-type:none;
    list-style:none;
    display: block;
    border-bottom:#CCC 1px dashed;
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    /* background:url(images/menuarrowright.gif) no-repeat right;*/
}

.second_level li a{
    display: block;
     margin-left:15px;
     text-decoration:none;
     color:#000000;

}

#productmenu ul li a:hover, #productmenu ul li a:active, #productmenu ul li a:focus
{
color: #00aeef;
}

.second_level{
  display:none;
}

a.currentPage{
  color:blue !important;
}

.link{
    padding:10px;15px;
    display:block;
}

.linkx{
    padding:10px;15px;
    display:block;
}

.arrow{
   background:url(http://www.worldhypertensionleague.org/Images/SmallDownArrow.png) no-repeat right 2px;

    float:right;
    height:17px;
    width:13px;
    margin-top:-27px;
}

.open{
   background:url(http://www.logan.ws/images/small_up_arrow_icon.gif) no-repeat right 2px;
}

</style>​ 
```

# ravendb - 如何使用 RavenDb 构造适当的 WHERE 子句

> ID：10003360
> 
> 赞同：1
> 
> 时间：2012-04-04T00:28:07.750
> 
> 标签：ravendb

我已经尝试了 2 种形式的调用，这个

```
 products = DocumentSession.Query<Product>()
      .Statistics(out stats)
      .Where(p => p.INFO2.StartsWith(term1))
      .Where(p => p.INFO2.StartsWith(term2))
      .Where(p => p.INFO2.StartsWith(term3)) 
      .OrderByField(columnToSortBy, columnToSortByAsc)
      .Skip(pageIndex * pageSize)
      .Take(pageSize)
      .ToList()
      ; 
```

这样

```
 products = DocumentSession.Query<Product>()
      .Statistics(out stats)
      .Where(p => p.INFO2.StartsWith(term1) & p.INFO2.StartsWith(term2) & p.INFO2.StartsWith(term3))
      .OrderByField(columnToSortBy, columnToSortByAsc)
      .Skip(pageIndex * pageSize)
      .Take(pageSize)
      .ToList()
      ; 
```

第一个返回的记录更符合我的预期，而第二个似乎返回所有 Product 类型的文档。从 LINQ 表达式的角度来看，两者之间有什么区别，我是否忽略了任何可能否定我想要完成的事情的事情，即 3 项查询并且每个项都被“与”在一起。

编辑：每个 Russ 的修改代码。

```
 string t1 = terms[0];
  string t2 = terms[1];
  string t3 = terms[2];

  products = DocumentSession.Query<Product>()
      .Statistics(out stats)
      .Where(p => p.INFO2.StartsWith(t1) && p.INFO2.StartsWith(t2) && p.INFO2.StartsWith(t3)) 
      .OrderByField(columnToSortBy, columnToSortByAsc)
      .Skip(pageIndex * pageSize)
      .Take(pageSize)
      .ToList()
      ; 
```

编辑 2：这是您将脸朝下砸在键盘或任何其他实体物体上的地方...必须使用标准 C# And and Or 回到这里的基本内容

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:33:35.767

在第二个块中，您正在执行 & 而不是 && 所以不是 AND 比较，而是尝试执行按位运算。

编辑：在第二种情况下，您可以更改：

```
.Where(p => p.INFO2.StartsWith(terms[0]) & p.INFO2.StartsWith(terms[1]) & p.INFO2.StartsWith(terms[2])) 
```

对此：

```
.Where(p => p.INFO2.StartsWith(terms[0]) && p.INFO2.StartsWith(terms[1]) && p.INFO2.StartsWith(terms[2])) 
```

这使它成为正确的 AND 子句。

第二次编辑：如果这是一个 AND 操作，那么您不需要 3 个术语 - 您需要一个术语，否则您将与同一字符串的 3 个实例进行比较。

```
terms[0] = "test";
terms[1] = "test";
terms[2] = "test";

.Where(p => p.INFO2.StartsWith(terms[0]) && p.INFO2.StartsWith(terms[1]) && p.INFO2.StartsWith(terms[2])) 
```

是相同的

```
string term = "test";

.Where(p => p.INFO2.StartsWith(term) && p.INFO2.StartsWith(term) && p.INFO2.StartsWith(term)) 
```

只是提到这一点，因为这可能会使您的代码在将来更难维护。

# java - 如何在 Play Framework 2.0 中加载 XML/HTML 资源

> ID：10003365
> 
> 赞同：1
> 
> 时间：2012-04-04T00:28:56.490
> 
> 标签：java, junit, playframework, junit4

我正在使用 Play Framework 2.0。在我的一个测试用例中，我想阅读一些 XML/HTML 文件的内容。我试过：

```
getClass().getResource("SomeFile.xml");
```

和

```
getClass().getResourceAsStream("SomeFile.xml");
```

但我得到一个空值。资源在我的测试用例的同一个包中。![在此处输入图像描述](../Images/175fd844531de1f2f655adbe31386ad7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:30:23.053

也许你可以试试这个方法：

```
/**
 * Retrieves a resource stream from the classpath.
 *
 * @param relativePath relative path of the resource to fetch
 * @return InputStream to the resource (may be null)
 */
play.Play.application().resourceAsStream(String resourceName) 
```

# iphone - IOS CS193p - 为什么 IBAction 连接被拖到 .m 文件而不是 .h？

> ID：10003366
> 
> 赞同：6
> 
> 时间：2012-04-04T00:28:56.777
> 
> 标签：iphone, objective-c, ios, cs193p

我注意到在斯坦福 CS193p 课程的计算器演示中，IBOutlet 连接被从标签拖到头文件中。但是，IBAction 连接是直接在 .m 文件中创建的。我尝试通读文档并在 Google 上搜索，但找不到背后的原因。

我认为 IBAction digitPressed 方法也应该在头文件中声明（它不应该是接口的一部分吗？）。

我显然对 Objective C 相当陌生（主要是在 Java 中工作），所以我确信我缺少一些基本的东西。

谁能解释一下？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T02:47:23.430

在类的头文件中声明事物使它们成为公共接口的一部分。这包括在视图控制器上定义的出口和动作。

是否应该公开某些东西是一个设计问题。一个好的原则是：只有在必须的时候。对于 ViewControllers 出口和操作，它们通常不必——因此也不应该——公开。

通常发生的情况是，您预先对公共接口应该包含的内容做出一些猜测，然后（如果您是一个整洁的开发人员）您在实现成熟时再次查看并删除任何不重要的内容。

# mobile - 我可以可靠地期望这个应用程序概念可以在哪些移动平台上运行？

> ID：10003378
> 
> 赞同：0
> 
> 时间：2012-04-04T00:30:07.797
> 
> 标签：mobile

我需要能够执行以下操作：

1）从收到的短信中读取电话号码。

2）发送短信。

3）最后，这不是必需的，但会是一个奖励：使手机振动。

据我所知，这在 iphone 或 windows mobile 上是不可能的，还有哪些其他手机类型不能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:43:36.720

考虑到 iPhone 中所有应用程序的限制，它可能无法在 iPhone 上运行。（可以说，应用程序在他们自己的小世界中）

振动：所有支持振动的东西。

在我看来，您应该专注于 Android，在那里您将能够完成您提到的所有事情。

# jquery - 导航下拉面板上的延迟悬停效果

> ID：10003379
> 
> 赞同：1
> 
> 时间：2012-04-04T00:30:27.297
> 
> 标签：jquery, css

我一辈子都想不通如何延迟这种悬停。如果您结帐 [http://forum.smartcanucks.ca](http://forum.smartcanucks.ca)，当悬停面板显示时，顶部会有一个菜单。

使它们显示的 CSS 是

```
#navigation li:hover > .panel {
    display: block;
} 
```

我正在寻找一个 jQuery 替代方案，以便当您将鼠标悬停在 #navigation li 上时，在 display:block; 之前有 0.5 秒的延迟；应用于 .panel ，然后当您离开 li 元素或 .panel 的悬停时，在 .panel 返回 display:none 之前有 0.3 秒的延迟；

我尝试了 CSS 选项但无法让它们工作，我还尝试实现我在互联网上找到的不同的 jQuery 片段，但无济于事。

延迟背后的原因是人们不小心将鼠标移动到 li 元素上，并且不需要的 .panel 显示很烦人。

我很感激任何帮助。

这是我尝试实现但无法使其工作的 CSS 选项：http: [//jsfiddle.net/gryzzly/JWk7V/4/](http://jsfiddle.net/gryzzly/JWk7V/4/)（这是一个示例 - 不是我的）我更喜欢 jQuery 解决方案是跨浏览器。

编辑

好的，我正在尝试让 .panel 框仅使用 jquery 而不是 CSS 显示

我正在尝试这个

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function() {
    $("#navigation li").hover(function() {  
        $('#navigation li:hover > .panel').addClass("displayblock");    
    },     
    function() {    
        $('.panel').removeClass("displayblock");     
    });
});
</script> 
```

这是类 .displayblock{display:block;}

使用 firebug 时，将 displayblock 类添加到面板元素但面板不显示。不知道我做错了什么。

我想使用 HoverIntent 但在我尝试之前我想只使用 jQuery 来显示面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:35:02.097

我建议使用 jQuery hoverintent 插件 - [http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

没有唯一的 CSS 解决方案，所以我的建议是应用一个类以允许 .panel 使用 CSS 显示，然后使用 jQuery 删除该类并使用悬停事件应用相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:22:35.427

您的 .panel 可能显示在页面上另一个元素的后面。尝试使用 CSS z-index 属性来解决这个问题。请记住为您尝试应用 z-indexes 的元素定义一个“位置”。

此外，CSS3 过渡完全支持[delays](http://www.w3.org/TR/css3-transitions/#transition-delay-property)，您可以使用它来创建这种下拉菜单，而无需一行 JS。

# jquery - 选中复选框时显示另一个选项

> ID：10003382
> 
> 赞同：1
> 
> 时间：2012-04-04T00:30:48.670
> 
> 标签：jquery, checkbox

选中复选框时，我在尝试显示“T 恤”尺寸时遇到问题。我正在使用 jQuery，但我无法让代码正常工作。到目前为止，这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#tshirt').attr('checked'); 
        $("#sizes").show();
    });
);
</script>

<b>Cool T-Shirt</b>: <input type="checkbox" id="tshirt" name="tshirt"> <span class="price">$15</span>            
<span id="sizes"><bSize</b>: <input type="checkbox" name="size" value="S"> <span class="price">Small</span></span> 
```

目前 ID“sizes”通过 CSS设置为*display: none 。*我遇到的困难是当用户选择 ID 为“tshirt”的复选框时，我希望显示 ID“sizes”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:34:22.757

您需要将代码放入`click()`处理程序中，如下所示：

```
$(document).ready(function () {
    $('input#tshirt').click(function () {
        if($(this).is(':checked')) {
            $("#sizes").show();
        } else {
            $("#sizes").hide();
        }
    });
}); 
```

这将`#sizes`在选中复选框时显示，并在未选中时再次隐藏它们。

目前尚不清楚为什么您`$('#tshirt').attr('checked');`在当前的 JS 中存在，因为您可以简单地添加`checked="checked"`到您的 JS`<input>`以使其在页面加载时检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T00:36:30.580

你应该能够做这样的事情：

```
$(document).ready(function() {
    $("#tshirt").change(function() {
        if($(this).is(":checked")) {
             $("#sizes").show();
        } else {
             $("#sizes").hide();            
        }
    });
}); 
```

然后只需确保默认情况下使用 CSS 隐藏：

```
#sizes {
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:34:25.870

.toggle() 应该照顾它。像这样的东西。。

```
$('#tshirt').click(function () {
$('#sizes').toggle('slow', function() { 
```

'slow' 你可以用'fast' 和其他参数替换。

# html - Chrome 和 Firefox 之间的文本/链接对齐不一致

> ID：10003383
> 
> 赞同：-1
> 
> 时间：2012-04-04T00:31:14.503
> 
> 标签：html, image, vertical-alignment

如果您查看[www.jrsteelers.com](http://www.jrsteelers.com)上的页脚，它在 Firefox 中看起来不错。然而，在 Chrome 中，Facebook 和 Twitter 链接无法正确对齐。我正在使用 Firefox 11 和 Chrome 18.x。我还没有检查IE。

这是怎么回事？我使用 Firebug 来获得更多洞察力，但我很难过。

链接：[我看到的截图](http://i1071.photobucket.com/albums/u517/prosnookerproducts/Misc/03042012_52658PM-1.png)

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:41:28.573

这似乎在 Chrome 控制台中起到了作用。 `<span>`在 Facebook 上像我们一样`</span>`

# java - Java图片颜色区域区分

> ID：10003387
> 
> 赞同：-1
> 
> 时间：2012-04-04T00:31:53.350
> 
> 标签：java, colors, photo, pixels, mouselistener

我有[这张](https://i1216.photobucket.com/albums/dd366/TylerDaddio/test.png)图片，我希望能够阅读每张图片，将其加载到绘画方法中，并将鼠标侦听器添加到每个颜色点，而不是任何黑色背景。我不希望将任何黑色背景作为“按钮”包含在内，只有彩色点有自己的鼠标侦听器，所以我可以区分我按下了哪个颜色点。有没有人有任何想法？谢谢！

![](../Images/8bd028c51398b39389e0707189be79cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:52:28.733

我想你可以这样处理：

```
List<Shape> buttons = ...

for each pixel in the picture, top left to bottom right {
   if the pixel is not black {
       if the pixel is not already contained in one of the buttons {
           iterate over every pixel towards the right until you reach a different color
           iterate over every pixel towards the bottom until you reach a different color

           // now you have the bounds of your button
           // create a new Rectangle and add it to your list.
       }
   }
} 
```

我从来没有尝试过这样的事情，也没有测试过上述方法，但对我来说它似乎应该有效。

为什么不能用`JButton`s 和`JPanel`s 复制图片并简化生活？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:19:26.020

mouseListener 返回一个位置，因此我将使用该位置检查相应像素处的图像，然后分支以执行所需的操作。如果像素变成黑色，你就什么也不做。

可以通过 BufferedImage 对象和 Raster 来检查图像。

或者，可以通过 BufferedImage 和光栅检查图像，并为每个定位的颜色方块创建相应的对象，分别打印和处理每个对象。

# asp.net-mvc-3 - 单元测试 Delete 控制器方法

> ID：10003400
> 
> 赞同：0
> 
> 时间：2012-04-04T00:33:58.350
> 
> 标签：asp.net-mvc-3, unit-testing

我正在尝试从我的控制器测试删除方法。

我有以下测试用例：

```
 [TestMethod()]
    [DeploymentItem("Courses.sdf")]
    public void RemoveCourseConfirmedTest()
    {

        CoursesController target = new CoursesController();
        int id = 50;

        ActionResult actual;
        CoursesDBContext db = new CoursesDBContext();
        Course courseToDelete = db.Courses.Find(id);
        List<CourseMeet> meets = db.Meets.Where(a => a.courseID == id).ToList();
        actual = target.RemoveCourseConfirmed(courseToDelete);
        foreach (CourseMeet meet in meets)
        {
            Assert.IsFalse(db.Meets.Contains(meet));
        }
        Assert.IsFalse(db.Courses.Contains(courseToDelete));

    } 
```

这是控制器方法

```
 [HttpPost, ActionName("RemoveCourse")]
    public ActionResult RemoveCourseConfirmed(Course course)
    {
        try
        {
            db.Entry(course).State = EntityState.Deleted;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        catch (DbUpdateConcurrencyException)
        {
            return RedirectToAction("RemoveMeet", new System.Web.Routing.RouteValueDictionary { { "concurrencyError", true } });
        }
        catch (DataException)
        {
            ModelState.AddModelError(string.Empty, "Unable to save changes. Try again.");
            return View(course);
        }

    } 
```

但是，当我运行测试用例时，出现以下异常。

```
System.InvalidOperationException: An entity object cannot be referenced by multiple instances of IEntityChangeTracker. 
```

我通过调试器运行了测试，发现问题在以下行：

```
db.Entry(course).State = EntityState.Deleted; 
```

我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:51:20.087

我在这里看到的最大问题是您直接针对数据库进行测试。您的单元测试应该特别模拟数据库依赖项。

但是，如果您一心想这样做，那么您得到的错误来自您的测试正在打开 a `CoursesDBContext`，然后您的被测代码似乎正在使用它自己的`CoursesDBContext`. 因此，错误是因为您不能尝试从不同的上下文中引用相同的实体。您将需要某种方式将您的上下文传递给您的类（公共属性或通过参数传递）

# dll - 将 32 位 dll 加载到 32 位进程中。在 64 位系统上

> ID：10003405
> 
> 赞同：1
> 
> 时间：2012-04-04T00:34:43.880
> 
> 标签：dll, x86, 64-bit

我有一个 32 位 dll，我正在尝试使用 LoadLibrary (C++) 将其加载到 64 位机器上的 32 位进程中

使用依赖walker，我被告知在所需的dll中，“找到了具有不同CPU类型的模块”

很明显，许多必需的 32 位 dll 中的一个或多个没有在 64 位环境中加载。

在 32 位世界中一切正常

如何说服 64 位系统搜索将获取所需 32 位 dll 的路径？

# c# - 如何将asp（服务器端）中的数组获取到javascript？

> ID：10003406
> 
> 赞同：0
> 
> 时间：2012-04-04T00:34:44.423
> 
> 标签：c#, javascript, asp.net

嗨我在服务器端有浮点数组我想把这个数组带到 javascript 我该怎么做？

我正在使用 C#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:13:38.587

作为一个简单的示例：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        // Convert your float array to below 
        var list = new List<string>() { "'1.00'", "'2.00'", "'3.00'", "'4.00'" };
        Page.ClientScript.RegisterArrayDeclaration("arr ", string.Join("," , list.ToArray()));
        Page.ClientScript.RegisterStartupScript(this.GetType(), "excute", "<script language='javascript'>alert(arr);</script>");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:48:43.327

这是一个使用客户端脚本注册值的示例：

在你的代码后面：

```
protected void Page_Load(object sender, EventArgs e)
{
  foreach(var f in myFloats)
     Page.ClientScript.RegisterArrayDeclaration("myFloats", f.ToString());
} 
```

您可以在此处看到更完整的示例：

[http://www.codeproject.com/Articles/92600/How-to-pass-ASP-NET-server-side-array-to-client-si](http://www.codeproject.com/Articles/92600/How-to-pass-ASP-NET-server-side-array-to-client-si)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:42:57.713

[http://blogs.microsoft.co.il/blogs/pini_dayan/archive/2009/03/12/convert-objects-to-json-in-c-using-javascriptserializer.aspx](http://blogs.microsoft.co.il/blogs/pini_dayan/archive/2009/03/12/convert-objects-to-json-in-c-using-javascriptserializer.aspx)

然后

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# ruby-on-rails - rails sphinx reindex 使用delayed_job rake任务

> ID：10003409
> 
> 赞同：3
> 
> 时间：2012-04-04T00:35:05.733
> 
> 标签：ruby-on-rails, rake, sphinx, thinking-sphinx

我在这个网站和其他网站上找到了一堆帖子，这些帖子给了我我需要的东西，但我无法将它们拼凑在一起。

对于搜索，我使用thinking sphinx gem 在我的网站上运行sphinx。每次用户向网站添加新帖子时，我都需要重新索引。我已经在我的网站上运行了delayed_job，所以我想做的是每次添加新帖子时，我想使用delayed_job 异步重新索引。我想我需要使用 handle_asynchronously 命令并在我的模型中调用一个方法，该方法将运行 rake 任务以重新索引..但是我读到的某处说 rake 不应该从代码中运行。

归根结底，完全糊涂了。有人可以建议如何去做吗？

我可以完全离开，但这就是我的想法..

```
# in post.rb
def reindex_database
  # run rake task  
end

# in posts_controller.rb
def add_post
  # add_post logic
  handle_asynchronously Post.reindex_database
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:11:48.290

如果有人关注这个，我最终通过在我的 post.rb 方法中添加一个系统调用来解决这个问题：

```
# in post.rb
def reindexDB
  `rake thinking_sphinx:rebuild`
end 
```

..然后每当我需要调用它时，我都会使用它：

```
Post.delay.reindexDB 
```

知道如何正确地解决这个问题仍然会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:02:01.997

你做错了。为此使用增量 - [http://freelancing-god.github.com/ts/en/deltas.html](http://freelancing-god.github.com/ts/en/deltas.html)

# iphone - CABasic 动画旋转

> ID：10003411
> 
> 赞同：0
> 
> 时间：2012-04-04T00:35:16.803
> 
> 标签：iphone, ios

我正在使用一个简单的 CABasic 动画来旋转视图中的图像。当用户触摸图像时，会调用 touches started 以允许开始旋转。当用户完成旋转图像时，将调用 Touches Ended。

一旦触摸结束，我就会再次将图像旋转到固定点。这是代码

```
CABasicAnimation *rotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];

double startRotationValue = 0;
rotation.fromValue = [NSNumber numberWithDouble:startRotationValue];
rotation.toValue = [NSNumber numberWithDouble:startRotationValue+0.25];
rotation.duration = 1.0;
rotation.fillMode = kCAFillModeForwards;
rotation.removedOnCompletion = NO;

[self.view.layer addAnimation:rotation forKey:@"rotating"]; 
```

在第二次选择图像之前，这可以正常工作。再次调用 Touches started 但图像无法旋转。事实上，图像根本无法移动，我知道这与它有关

```
rotation.fillMode = kCAFillModeForwards;
rotation.removedOnCompletion = NO; 
```

我曾尝试在 Touches 开始时调用 removedOnCompletion，但这并不能解决问题。

```
rotation.removedOnCompletion = YES 
```

这里最好的方法是什么，View 没有正确注册 rotation.removedOnCompletion。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:43:54.580

首先，您通常不应该混淆`fillMode`and `removedOnCompletion`。完全删除这些。那些告诉你惹他们的人几乎总是在解决错误的问题。

他们要解决的问题是，当动画完成并被移除时，对象会“弹回”到其旧位置。原因是您从未真正在模型上设置值。这会在以后产生各种烦人的小问题。

在这一行之后：

```
[self.view.layer addAnimation:rotation forKey:@"rotating"]; 
```

添加：

```
self.view.layer.transform.rotation = startRotationValue + 0.25; 
```

（您可能必须在这里使用一个临时变量来保存`transform`，修改它，然后将其设置回来。我自己通常不使用该`rotation`属性。）

这将设置底层模型层，使其与动画的最终状态相匹配。

# css - 在大 div 的顶部和底部放置一些按钮

> ID：10003412
> 
> 赞同：3
> 
> 时间：2012-04-04T00:35:22.613
> 
> 标签：css, layout

我有这些元素：

```
<div id="button1"></div>
<div id="button2"></div>
<div id="big"></div> 
```

...需要像这样显示：

```
|------------------|  |---------|
|                  |  | button1 |
|                  |  |---------|
|                  |
|       big        |
|                  |
|                  |  |---------|
|                  |  | button2 |
|------------------|  |---------| 
```

使用 CSS 使按钮与 big 的顶部和底部对齐的最干净的方法是什么`div`？我希望能够调整大的`div`. 此外，大`div`按钮和按钮之间的间距是像素常数。

添加一个包装器元素是可以的，但如果我不需要，我会更喜欢。无论如何，我也不知道如何使用包装器元素:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T00:41:59.023

将按钮放在“大”框中：

```
<div id="big">
    <div id="button1"></div>
    <div id="button2"></div>
</div> 
```

您可以将按钮相对于它们的容器定位，如下所示：

```
#big {
    position:relative;
    width:400px; height:400px;
    overflow:visible;
} #button1, #button2 {
    width:100px; height:50px;
    position:absolute;
    right:-120px;
} #button1 {
    top:0px;
} #button2 {
    bottom:0px;
} 
```

这是小提琴：http: [//jsfiddle.net/Rcnbk/1/](http://jsfiddle.net/Rcnbk/1/)

诀窍是设置父位置：相对和子位置：绝对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:39:48.670

在左列中创建一个两列布局的大 div，在右列中创建按钮 1 div 填充 div 和按钮 2 div。

包装教程：[http ://www.communitymx.com/content/article.cfm?cid=A8BBA](http://www.communitymx.com/content/article.cfm?cid=A8BBA)

```
|------------------|  |---------|
|                  |  | button1 |
|                  |  |---------|
|                  |  |---------|
|       big        |  | filldiv |
|                  |  |---------| 
|                  |  |---------|
|                  |  | button2 |
|------------------|  |---------| 
```

# php - XML 文档中的空行

> ID：10003413
> 
> 赞同：0
> 
> 时间：2012-04-04T00:35:38.853
> 
> 标签：php, iphone, xml, plist

我正在开发一个生成一些 plist 的 php web 服务，以便我可以在我的 iPhone 应用程序中使用它们。一切正常，除了出现在文档末尾的这个空白行，使我的应用程序无法读取它。会是什么呢？我确定所有标签都已正确打开和关闭。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:12:34.063

生成 xml 后，您可以添加这一步...

```
$xml = trim( file_get_contents( YOUR_XML_FILE_PATH ) );
file_put_contents( YOUR_XML_FILE_PATH, $xml ); 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:39:16.167

您的一个文件中的 PHP 结束标记后可能有一个换行符：

```
1\. <?php
2\. echo $xml;
3\. ?>
4\. 
```

出于这个原因，我发现最好不要关闭大多数文件中的最后一个 ?> 。PHP 将在文件末尾自动关闭。

```
1\. <?php
2\. echo $xml;
3\. 
```

# jquery - KnockoutJS postJSON 方法为什么会转义我的字符串？

> ID：10003415
> 
> 赞同：4
> 
> 时间：2012-04-04T00:35:43.567
> 
> 标签：jquery, asp.net-mvc-3, knockout.js

我是 KockoutJS 的新手，所以我可能会遗漏一些简单的东西。

我有一个表单中的文本区域：

```
<form method="POST" data-bind="submit: save" id="theForm">
    <textarea name="Text" rows="10" cols="100" data-bind="value: userText" ></textarea>
    <input type="submit" value="Save" />
</form> 
```

我有以下淘汰赛代码：

```
<script type="text/javascript">
    var MyViewModel = {
        userText: ko.observable('@Model.UserText'),
        save: function () {
              ko.utils.postJson('@Url.Action("modify")',{userText : this.userText});
            }
    }
</script> 
```

`@Model.UserText`文字字符串在哪里。我的 ASP.NET MVC 控制器方法`modify`定义如下：

```
[Authorize]
[HttpPost]
public ActionResult Modify(string userText)
{
  ...
} 
```

我的问题是**postJSON 方法将转义字符串发布到我的控制器方法，我不明白为什么。**我可以在提琴手中看到字符串作为`userText=%22some+text%22`

如果我使用普通的 jQuery ajax 而不是像这样使用 postJson：

```
$.ajax(
{
url: '@Url.Action("modify")',
contentType: 'application/json',
type: 'POST',
data: ko.toJSON({userText: ko.toJS(this.userText)}),
success: function(result) {
    ko.mapping.updateFromJS(this, result);
}
}); 
```

然后 JSON 对象`{'userText': 'some text'}`被传递给控制器​​方法，MVC 模型绑定器正确解析它并给我一个未转义的字符串。

**我可以让 postJson 传递与 jQuery ajax 方法传递的相同 JSON 对象吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T01:51:45.637

完整信息位于本文 [http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/)

您需要的是在您的操作中使用 [FromJson] 属性。

```
[Authorize]
[HttpPost]
public ActionResult Modify([FromJson]string userText)
{
  ...
} 
```

属性的实现：

```
using System.Web.Mvc;
using System.Web.Script.Serialization;

namespace koListEditor
{
    public class FromJsonAttribute : CustomModelBinderAttribute
    {
        private readonly static JavaScriptSerializer serializer = new JavaScriptSerializer();

        public override IModelBinder GetBinder()
        {
            return new JsonModelBinder();
        }

        private class JsonModelBinder : IModelBinder
        {
            public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
            {
                var stringified = controllerContext.HttpContext.Request[bindingContext.ModelName];
                if (string.IsNullOrEmpty(stringified))
                    return null;
                return serializer.Deserialize(stringified, bindingContext.ModelType);
            }
        }
    }
} 
```

只是一些评论：

ko.utils.postJson(urlOrForm, data, options) 将为您执行以下操作：

**1）**它将使用一组输入创建内部表单

**2)**它将迭代您的数据参数，并调用 ko.utils.stringifyJson(ko.utils.unwrapObservable(data[key]));

在每个属性上，并将结果保存到该输入。这在内部使用 JSON.stringify，所以在你的情况下它会调用

```
JSON.stringify('"some text"') 
```

这就是为什么你看到你的字符串“转义”（实际上它只是转换为 JSON）

**3）**如果您通过参数传递选项，它还将附加它们以供请求。

例子：

```
ko.utils.postJson('localhost',{ userText : '"some text"' }); 
```

**帖子：** 用户文本“\”一些文本\“”

```
ko.utils.postJson('localhost',{}, {params: { userText : '"some text"' } }); 
```

**帖子：** userText“一些文字”

所以在你的情况下，如果你不想用 [FromJson] 装饰，你可以添加到 options.params 而不是数据。但是，如果您需要传递更复杂的 json 对象（不是简单的字符串，而是一些 ViewModel），您仍然需要使用此 [FromJson] 属性。

# sencha-touch - 部署 Sencha Touch 应用程序

> ID：10003421
> 
> 赞同：4
> 
> 时间：2012-04-04T00:36:38.793
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我即将将我的应用程序部署到我的生产服务器，但注意到在我的 iPhone 上，应用程序的加载速度很慢。

我认为这可能与需要加载的 2.5Mb js 文件有关。

有没有办法将“sencha-touch-all-compat.js”文件最小化为仅包含您正在使用的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T22:39:23.653

我遇到了同样的问题——Sencha 的做事方式是生成一个 app.js，其中包含所有内容：你需要的所有 Ext.* 类，加上你的代码，适当地缩小。但有时您只想保持一切不变，只需将现有的 sencha-touch-all-debug.js 替换为仅包含您使用的东西的缩小版本。

经过一些实验（并`sencha app build`使用调试日志运行以查看它的作用），我发现了以下配方：

```
sencha compile --options=debug:false,logger:no,minVersion:3,product:touch union --recursive --file=app.js and exclude -namespace MyApp and concat -yui sencha-touch-depends.js 
```

这将产生一个 sencha-touch-depends.js，您可以使用它来替换 sencha-touch-all-debug.js 或其他任何东西。`-yui`如果您想看看它在做什么，请不要使用。

# css - 垂直居中文本 - div 尺寸未知

> ID：10003424
> 
> 赞同：2
> 
> 时间：2012-04-04T00:36:57.130
> 
> 标签：css

这是示例：http: [//jsfiddle.net/X2sMa/](http://jsfiddle.net/X2sMa/)

我需要将 div 内的文本垂直居中，我发现[了这种技术](http://css-tricks.com/centering-in-the-unknown/)，但是每当我将 div 设置为显示时：inline-block; 文字消失。任何想法如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:41:42.513

如果您不希望支持 IE7 及以下版本，则可以使用`display: table-cell`and `vertical-align: middle`，否则您将无法使用表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:58:03.463

您在代码中为 div.mask 使用绝对定位，因此您可以将段落定位为：

```
<div class="mask" style="position: absolute; top: 0; left: 0;">
    <p style="position: relative; top: 50%;">1500 notes</p>
</div> 
```

# c++ - c++ 异常处理通过引用传递：抛出的地址与捕获的地址不同？

> ID：10003429
> 
> 赞同：2
> 
> 时间：2012-04-04T00:38:08.183
> 
> 标签：c++

```
#include <iostream>
#include <exception>
using namespace std;

class myexception: public exception
{
  virtual const char* what() const throw()
  {
    return "My exception happened";
  }
};

int main ()
{
  try
  {
    myexception myex;
    printf("addr1:%x\n",&myex);
    throw myex;
  }
  catch (exception& e)
  {
    printf("addr2:%x\n",&e);
    cout << e.what() << endl;
  }
  return 0;
} 
```

# 该程序的输出：

```
addr1:6d78c020
addr2:20a1080
My exception happened 
```

问题：你看到 addr1 和 addr2 不同吗，知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T00:41:35.737

当抛出异常时，会生成一个副本。您正在查看该副本的地址。

（处理程序的异常怎么可能有相同的地址？当你抛出时，你退出了包含异常的块，所以它不再存在。你不能访问不存在的东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:43:27.773

这是有道理的。抛出异常时会复制异常，以便它可以在退出其来源的堆栈帧后继续存在。一旦该异常退出`{}`其起源的块，该堆栈帧就会弹出并且其中的所有本地人都消失了。所以必须复制。

# arrays - 大批 ^ temp0 = {"测试","测试2"}; 如何创建一个新实例以稍后填充它

> ID：10003433
> 
> 赞同：1
> 
> 时间：2012-04-04T00:38:43.613
> 
> 标签：arrays, visual-c++, c++-cli, initialization

```
array<System::Object^>^ temp0 = {"Test","Test2"}; 
```

这工作正常，但问题是创建它的一个新实例，我在互联网上特别是 msdn 上查找了它，我找不到与创建新实例和定义它的大小或动态分配它相关的任何内容。

我在想这样的事情：

```
array<System::Object^>^ temp0 (2) = new array<System::Object^>^(); 
```

但这显然行不通。有人知道如何定义具有定义大小或没有定义大小的新实例吗？我希望能够在如下之后从 for 循环中填充它：`temp0[3] = "Test3";`

我希望我足够清楚。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:02:41.620

您无法创建没有定义大小的数组。您可以创建一个具有定义大小和默认初始化元素的数组：

```
array<Object^>^ temp0 = gcnew array<Object^>(numElements); // numElements is int 
```

或具有特定值：

```
array<String^>^ temp0 = gcnew array<String^> { L"Test", L"Test2" }; 
```

# python - 在 PyQt 中使用 partial 为具有返回值的信号创建槽

> ID：10003435
> 
> 赞同：1
> 
> 时间：2012-04-04T00:38:57.060
> 
> 标签：python, pyqt

我有一本字典，它的键是我的 PyQT 界面中所有表盘的名称。与这些键关联的值是与需要传递给处理函数的每个刻度盘相关联的某些数值（以确定移动了哪个刻度盘），以及该刻度盘的新值。

我已经使用 functools.partial 为每个数值创建了处理函数的不同实例，但是“valueChanged”信号返回一个整数，我也不知道如何将它传递给偏函数。以下似乎不起作用，因为 dialChanged 函数最终从未被调用：

```
for dial, cc, in dialDict.iteritems():
    getattr(self.ui, dial).setRange(0,127)
    getattr(self.ui, dial).valueChanged.connect(
        lambda value: partial(self.windowHandler.dialChanged, 
                              mainWindowInstance=self, 
                              cc=cc, 
                              value=value)) 
```

我认为问题与在 for 循环和范围内使用 lambda 函数有关，但我不确定如何将 valueChanged 信号的返回值传递到由 partial 创建的插槽中。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:56:32.133

我实际上认为在此处使用 partial 并放弃 lambda 确实有意义，但要使您的`dialChanged`处理程序具有回调友好的签名：

```
# where ever this is defined
def dialChanged(value, mainWindowInstance=None, cc=None):
    pass

cbk = partial(
    self.windowHandler.dialChanged, 
    mainWindowInstance=self, 
    cc=cc)

.valueChanged.connect(cbk) 
```

将使用值 arg 调用该插槽，因此这应该与我认为的签名一致。仅当您无法控制 dialChanged 插槽函数并且需要通过环绕调用来完全重新格式化签名时，才需要 lambda。

# jquery - 带有 nivo 滑块 jquery 的图像

> ID：10003437
> 
> 赞同：0
> 
> 时间：2012-04-04T00:39:13.680
> 
> 标签：jquery, slider, nivo-slider

我使用 nivo 滑块 jquery 模板来制作带有图片的立体模型。我的问题是它正确显示了第一个图像，然后第二个图像显示在第一个图像上，但垂直显示，宽度可能只有 40px。所以我同时有两张图片，第一张尺寸合适，第二张没有。你知道我必须做什么吗？

这是我的代码的一部分：

```
<style> 
.nivoSlider {
    position:relative;
    width:618px; /* Change this to your images width */
    height:246px; /* Change this to your images height */
    background:url(images/loading.gif) no-repeat 50% 50%;
}
.nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
    display:none;
}
.nivoSlider a {
    border:0;
    display:block;
}
</style>
<script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider();
});
</script>    
<div id="slider" class="nivoSlider">

    <img src="/template/images/custom/popup_imgtest.jpg" alt="" />
    <img src="/template/images/custom/popup_imgtest2.jpg" alt="" />
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:33:52.587

我认为您的问题是您缺少 nivoSlider 为其精心制作的效果创建的切片样式。

它们就在您下载 nivoSlider 时获得的 zip 文件中。

```
/* The slices and boxes in the Slider */
.nivo-slice {
   display:block;
   position:absolute;
   z-index:5;
   height:100%;
}

.nivo-box {
   display:block;
   position:absolute;
   z-index:5;
} 
```

这就是我添加到您的样式块中的所有内容，并且代码对我有用。希望这可以帮助。

# jquery - bootstrap popover 添加 esc 按键检查并关闭

> ID：10003439
> 
> 赞同：2
> 
> 时间：2012-04-04T00:39:32.617
> 
> 标签：jquery, closures, twitter-bootstrap, popover

我正在尝试扩展引导弹出窗口以在手动模式下退出时关闭。我正在尝试扩展 popover 类继承的工具提示类，如下所示：

```
/* WHY CANT I CALL the HIDE FUNCTION WHEN ESC key press is intercepted????

   Why is the hide class undefined when the keypress is intercetped?
*/

!function ($) {

    "use strict"

    /* TOOLTIP PUBLIC CLASS DEFINITION
    * =============================== */

    var Tooltip = function (element, options) {
        this.init('tooltip', element, options)
    }

    Tooltip.prototype = {

        constructor: Tooltip

  , init: function (type, element, options) {
      //init logic here

      $(document).keypress(function (e) {
          if (e.which == 27) { this.hide };  
      });                    ^^^^^^^^^^^^^
                             this.hide is undefined on debug????
  }

  , hide: function () {
     //hide logic
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T01:22:57.107

你需要使用这个：

```
$tooltip = this;
$(document).keydown(function(e){
   if (e.keyCode === 27)
      $tooltip.hide();
}); 
```

您的问题是您想要的“this”实际上是文档，它没有隐藏功能。当 keypress/keydown 事件被触发时，函数内的“this”是触发事件的元素，因此是文档。请记住 JavaScript 具有函数作用域，这意味着在许多不同的函数中时，您需要对“this”变量保持谨慎。

# c# - c# Directory.GetDirectories 不包括文件夹

> ID：10003440
> 
> 赞同：4
> 
> 时间：2012-04-04T00:39:43.863
> 
> 标签：c#, getdirectories, system.io.directory

我正在尝试遍历“c:\Users”中 Windows 中的用户文件夹列表，但不包括 microsoft 内置用户文件夹，以下是我用来完成此壮举的代码段，但出于某种原因没有按预期工作。

```
private readonly List<String> _exclusion = new List<String>
                                                   {
                                                       "All Users",
                                                       "Default",
                                                       "LocalService",
                                                       "Public",
                                                       "Administrator",
                                                       "Default User",
                                                       "NetworkService"
                                                   };

public static bool FoundInArray(List<string> arr, string target)
{
    return arr.Exists(p => p.Trim() == target);
}

foreach (string d in Directory.GetDirectories(sDir).Where(d => !FoundInArray(_exclusion,d)))
{
    richTextBox1.Text += d + Environment.Newline;
} 
```

我不确定为什么这不起作用，任何人都可以为我提供一些见解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T00:46:44.527

Directory.GetDirectories() 返回目录的完整路径，而不仅仅是目录的最后一部分。

虽然您可以剥离 GetDirectories() 返回的路径的最后一个组成部分，并将其与当前数组中的内容进行比较，但这将导致误报和误报。

相反，使用[Environment.SpecialFolders](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)来获取特定于当前用户和操作系统版本的给定特殊文件夹的路径。

```
private readonly List<String> _exclusion = new List<String>
{
    Environment.GetFolderPath(Environment.SpecialFolder.MyMusic),
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T00:45:27.977

在您的 lambda 表达式中：'d' 是目录的全名（带有路径），因此实际上不在数组中。

你可以这样做：

```
public static bool FoundInArray(List<string> arr, string target)
{
    return arr.Any(p => new DirectoryInfo(target).Name == p);
} 
```

# java - 如何检查选择了哪个单选按钮？

> ID：10003441
> 
> 赞同：1
> 
> 时间：2012-04-04T00:39:47.260
> 
> 标签：java, android, radio-button, radio-group

我在一个单选组中有三个单选按钮。如何根据选择的按钮告诉 Java 做不同的事情？我声明了组和所有按钮：

```
final RadioGroup size = (RadioGroup)findViewById(R.id.RGSize);
        final RadioButton small = (RadioButton)findViewById(R.id.RBS);
        final RadioButton medium = (RadioButton)findViewById(R.id.RBM);
        final RadioButton large = (RadioButton)findViewById(R.id.RBL); 
```

我知道我会这样说：

```
if (size.getCheckedRadioButtonId().equals(small){

} else{

} 
```

但是equals不是正确的语法...我怎么问java选择了哪个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:49:07.690

尝试：

```
if (size.getCheckedRadioButtonId() == small.getId()){
 ....
}
else if(size.getCheckedRadioButtonId() == medium.getId()){
 ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:49:50.117

因为`getCheckedRadioButtonId()`返回一个整数，所以您试图将整数与 RadioButton 对象进行比较。您应该比较`small`( 是`R.id.RBS`) 和的 id `getCheckedRadioButtonId()`：

```
switch(size.getCheckedRadioButtonId()){
    case R.id.RBS: //your code goes here..
                    break;
    case R.id.RBM: //your code goes here..
                    break;
    case R.id.RBL: //your code goes here..
                    break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T00:50:43.153

```
int selected = size.getCheckedRadioButtonId();

switch(selected){
case R.id.RBS:
   break;
case R.id.RBM:
   break;
case R.id.RBL:
   break;

} 
```

# powershell - 如何控制powershell管道中的行分隔符？

> ID：10003453
> 
> 赞同：3
> 
> 时间：2012-04-04T00:41:49.220
> 
> 标签：powershell

假设下面的简单文件替换：

```
get-content db.cfg | %{$_ -replace 'a', 'b'} | out-file db.cfg.new -encoding default 
```

out-file 自动使用 \r\n 作为行分隔符。有没有办法强制使用不同的分隔符（如 \n）？

我正在寻找一个优雅的解决方案。除此之外，当然可以将整个文件构建为内存中的字符串，然后将其写出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:26:27.047

您可以像这样使用 StreamWriter 而不是 Out-File cmdlet：

```
$writer = [system.io.file]::CreateText("\path\to\db.cfg.new")
$writer.NewLine = "`n"
get-content db.cfg | %{$_ -replace 'a', 'b'} | % { $writer.WriteLine($_)}
$writer.Close() 
```

它不像单行那样流畅，但至少它很容易阅读，而且您仍然一次一行地流式传输文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:44:39.080

后期创作转换怎么样？

```
$fileToConvert = "db.cfg.new"
$filName = "db.cfg"

$text = ([IO.File]::ReadAllText($fileToConvert) -replace "`r`n?", "`n")
$encoding = New-Object System.Text.ASCIIEncoding
[IO.File]::WriteAllText("$filename", $text, $encoding) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:59:31.943

在管道末尾使用 out-file 时，似乎无法控制行分隔符。

但当然，您可以将文件构建为内存中的字符串或在保存文件后转换行尾。

我通过使用[Swiss File Knife](http://stahlworks.com/dev/swiss-file-knife.html)而不是 PowerShell 来执行替换解决了我的用例。为这样一个基本问题实施解决方法感觉不对。

# python - __init__(self, list=[]) 只为每个实例创建一个列表而不是一个新列表？

> ID：10003454
> 
> 赞同：1
> 
> 时间：2012-04-04T00:41:57.323
> 
> 标签：python, class, scope

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

为什么是这样：

```
class Test:
    def __init__(self, items=[]):
        self.items=items 
```

与此不同：

```
class Test2:
    def __init__(self, items=None):
        if items:
           self.items=items
        else:
           self.items = [] 
```

那些似乎他们应该做同样的事情，但是：

```
>>>t = Test()
>>>t.items.append("stuff")
>>>t.items
['stuff']
>>>t2 = Test()
>>>t2.items
['stuff'] 
```

好的，所以使用 Test()，只创建了一个列表，每个人都在访问它，尽管我认为是在构造函数中显式设置项目而不是将其放在类命名空间中。但是使用Test2：

```
>>>t = Test2()
>>>t.items.append("stuff")
>>>t.items
['stuff']
>>>t2 = Test2()
>>>t2.items
[] 
```

这正按我的预期工作。如果您使用空列表显式调用 Test 而不是让默认值完成工作，例如 t = Test([])，Test 也不会在实例之间共享数据。

那么默认值是否只在编译时创建一次，而不是动态创建？这是否仅适用于类定义，而不适用于一般的函数，或者这是在参数列表中使用默认值的更普遍的陷阱？（答案：它也发生在函数中。）

请注意，我使用字符串而不是列表对此进行了测试，并且在实例之间未共享数据的情况下获得了预期的行为。但它也确实发生在 dicts 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:46:50.737

[http://effbot.org/zone/default-values.htm](http://effbot.org/zone/default-values.htm)

# php - 在 php {php} 中获取 smarty 数组值

> ID：10003456
> 
> 赞同：1
> 
> 时间：2012-04-04T00:42:46.650
> 
> 标签：php, smarty

这是我的困境，我有 2 个变量，1 个是数组，一个不是。 `{$variable1}`值为“你好”； `{sp}`value 是一个多维数组。我用

```
{php}$xid = $smart->get_template_vars('variable1');{/php} 
```

为变量 $xid 分配值 hello。但是，当我使用相同的代码时：

```
{php}$sparray = $smart->get_template_vars('sp');{/php} 
```

这破坏了代码。所以页面不会加载。有什么建议么 ？ps：我试图在 {php} 标签中获取 {sp.options.colors} 的值

例如，如果我使用 {sp.options.colors} 它会返回“红色”。反正我可以得到 php 里面的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:16:13.390

我想通了：在 smarty 使用`$sparray = $this->get_template_vars('sp');` 和 php 中：`$sparray[options][colors];`

# java - 用于增加堆大小的 JAVA_OPTS

> ID：10003459
> 
> 赞同：20
> 
> 时间：2012-04-04T00:42:51.877
> 
> 标签：java, android, ubuntu, jvm, heap-memory

我想增加我的堆大小。我如何使用 JAVA_OPTS 这样做。我收到以下错误可能是因为堆大小低

```
UNEXPECTED TOP-LEVEL ERROR:
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOfRange(Arrays.java:3209)
    at java.lang.String.<init>(String.java:215)
    at java.lang.StringBuilder.toString(StringBuilder.java:430)
    at com.android.dx.rop.type.Prototype.withFirstParameter(Prototype.java:370)
    at com.android.dx.rop.code.Rops.ropFor(Rops.java:1210)
    at com.android.dx.cf.code.RopperMachine.run(RopperMachine.java:478)
    at com.android.dx.cf.code.Simulator$SimVisitor.visitConstant(Simulator.java:692)
    at com.android.dx.cf.code.BytecodeArray.parseInstruction(BytecodeArray.java:763)
    at com.android.dx.cf.code.Simulator.simulate(Simulator.java:95)
    at com.android.dx.cf.code.Ropper.processBlock(Ropper.java:684)
    at com.android.dx.cf.code.Ropper.doit(Ropper.java:639)
    at com.android.dx.cf.code.Ropper.convert(Ropper.java:252)
    at com.android.dx.dex.cf.CfTranslator.processMethods(CfTranslator.java:256) 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-04T00:46:23.280

您应该能够使用在[这篇文章](http://forums.opensuse.org/english/other-forums/development/programming-scripting/392905-java_opts.html)中找到的信息。

```
-Xmszzzm 
```

其中 zzz 是您的最小尺寸。

```
-Xmxzzzm 
```

其中 zzz 是您的最大尺寸。

```
JAVA_OPTS="-Xms128m -Xmx512m" 
```

[您可以在此处](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)找到有关 VM args 的更多信息。

如何在您的环境中全局设置它取决于您的操作系统。您使用的是哪个操作系统？

**编辑**：我现在看到“ubuntu”标签。

您应该能够将 JAVA_OPTs 行放入`etc/environment`. 修改`etc/environment`后，您必须注销并重新登录才能使更新的环境变量生效。

# php - 使用 PHP 从 JSON 字符串中提取特定值

> ID：10003460
> 
> 赞同：1
> 
> 时间：2012-04-04T00:42:55.160
> 
> 标签：php, json

所以我遇到了一个看起来很简单的问题，尽管在我缺乏编码知识的情况下，我无法解决这个问题。请原谅任何用词不当！所以我有一个 URL 标题指向一个页面，其中包含一个带有 JSON 字符串的签名请求（它是一个 Facebook 页面）。我需要检索该 JSON 字符串，然后仅提取其中的特定部分。我目前无法控制 URL 的格式。

在它转到的页面上，我有以下代码：

```
<?php
$signed_request = $_REQUEST['signed_request']; // Get the POST signed_request variable.

if(isset($signed_request)) // Determine if signed_request is blank.
{
 $pre = explode('.',$signed_request); // Get the part of the signed_request we need.
 $json = base64_decode($pre['1']); // Base64 Decode signed_request making it JSON.
 $obj = json_decode($json,true); // Split the JSON into arrays.

 echo $obj['app_data'];
}
 else
{
die('No signed request avaliable.'); //If there is no signed_request, stop processing script.
}
?> 
```

效果很好，并且 echo $obj['app_data']; 打印：{q:"id_src=abc123456789",}

对我来说，它本身就是一个 JSON 字符串，所以我想我可以在上面运行一个 json_decode，然后打印出 id_src=abc123456789。我试过这样：

```
$appdata = $obj['app_data'];
$idcode = json_decode($appdata,true); 
```

后跟 echo $idcode['q']，但这只是打印一个大括号。我尝试了各种变体，去除 ' ' 标记，去除 true 等。

我的最终目标是只提取 abc123456789 值，而不是 id_src 部分。我想问可能会更快，因为我不太可能在接下来的几天内弄清楚。

感谢大家的帮助！

编辑：添加了 $json 的片段。回声 $json; 打印以下内容

```
{"algorithm":"HMAC-SHA256","app_data":"{q:\"id_src=abc123456789\",}","issued_at":1333500860,"page":{"id":"380641958713853","liked":false,"admin":true},"user":{"country":"nz","locale":"en_GB","age":{"min":21}}} 
```

会不会是 id_src 值后面的逗号导致问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:56:26.193

You can extract what you want like this:

```
preg_match('/"\\w+?=(\\w+?)"/', $obj['app_data'], $matches);

print_r($matches); // Array ( [0] => "id_src=abc123456789" [1] => abc123456789 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:46:53.980

`{q:"id_src=abc123456789",}`不是有效的 JSON。尝试`{"q":"id_src=abc123456789"}`

# matlab - 在matlab中计算具有非常小的值的函数

> ID：10003462
> 
> 赞同：10
> 
> 时间：2012-04-04T00:43:10.613
> 
> 标签：matlab, precision, exponential, epsilon

我正在 matlab 中创建一个函数来计算以下函数：

![在此处输入图像描述](../Images/550e004062f14bb4f200d1c18ae2417d.png)

对于这个功能，我们有：

![在此处输入图像描述](../Images/820323326d9e74f4e6c0fee1e94c790c.png)

这是我在matlab中的函数实现：

```
function [b]= exponential(e)
%b = ? 
b= (exp (e) -1)/e; 
```

当我用非常小的值测试函数时，函数的极限确实是 1，但是当数字非常小时（例如 1*e-20）时，极限会变为零吗？这种现象的解释是什么？难道我做错了什么？。

```
x= 10e-1 , f (x)= 1.0517

x= 10e-5 , f (x)=  1.0000

x= 10e-10 , f (x)=  1.0000

x= 10e-20 , f (x)=  0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T01:35:03.163

问题是`exp(x)`approx ，但由于与浮点表示无法区分`1+x`而被评估。有一个 MATLAB 函数（针对 small 实现）可以避免该问题并且适用于小参数：`1``1``1+x``expm1(x)``exp(x)-1``x`

```
>> x=1e-100;expm1(x)/x
ans =
     1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T01:12:11.220

我不得不尝试我的[LIMEST](http://www.mathworks.com/matlabcentral/fileexchange/20058-adaptive-numerical-limit-estimation)工具。与任何自适应工具一样，它可能会被愚弄，但它通常非常好。

```
fun = @(x) (exp(x) - 1)./x; 
```

如您所见，乐趣的问题为零。

```
fun(0)
ans =
   NaN 
```

虽然如果我们评估 fun 接近 0，我们会看到它接近 1。

```
format long g
fun(1e-5)
ans =
          1.00000500000696 
```

LIMEST 成功，甚至能够提供限制的错误估计。

```
[lim,err] = limest(fun,0,'methodorder',3)

lim =
     1

err =
      2.50668568491927e-15 
```

LIMEST 使用一系列多项式近似值，并结合自适应理查森外推法来生成极限估计和对该极限不确定性的测量。

那么你看到了什么问题？您看到的失败是简单的减法取消错误。因此，看价值

```
exp(1e-20)
ans =
     1 
```

即使使用 long g 格式，exp(1e-20) 的双精度值也太接近 1，以至于当我们减去 1 时，结果是精确的零。将其除以任何非零值，我们得到零。当然，当 x 实际上为零时，我们有一个 0/​​0 条件，所以当我尝试这样做时，结果是 NaN。

让我们看看高精度会发生什么。我将使用我的 HPF 工具进行计算，并以 64 位十进制数字工作。

```
DefaultNumberOfDigits 64
exp(hpf('1e-20'))
ans =
1.000000000000000000010000000000000000000050000000000000000000166 
```

看到当我们减去 1 时，1 和指数值之间的差小于 eps(1)，所以 MATLAB 必须产生一个零值。

```
exp(hpf('1e-20')) - 1
ans =
1.000000000000000000005000000000000000000016666666666670000000000e-20 
```

未提出的问题是我将如何选择在 MATLAB 中准确地生成该函数。显然，您不想像我一样使用蛮力并定义乐趣，因为您会失去很多准确性。我可能只是在零附近的有限区域内扩展泰勒级数，并使用上面的 fun 来表示与零显着不同的 x。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T00:51:35.917

我认为这与您的数字的准确性有关。简而言之，MATLAB 的默认精度是 5 位。您可以使用 将其扩展到 15 `format long`。查看[本文](http://www.mathworks.com/help/toolbox/symbolic/f1-5556.html)以获取有关 MATLAB 精度的更多信息

# visual-studio-2010 - Web项目重命名，csproj丢失TFS绑定

> ID：10003464
> 
> 赞同：0
> 
> 时间：2012-04-04T00:43:26.440
> 
> 标签：visual-studio-2010, tfs

我在 VS2010 中重命名了一个 Web 项目并签入。

在 Team explorer 中，csproj 文件没有被重命名，因此我的同事遇到了无法加载的异常。他修复了路径，但现在项目加载了，但在我们的两台机器上，重命名的 web 项目旁边的锁定图标不再存在，尽管它的组成文件似乎仍然通过 tfs.xml 进行跟踪。似乎只有 csproj 的绑定已损坏。

我们已经尝试过

*   在 File > Source Control > Change Source Control 中取消绑定/重新绑定
*   删除项目，删除 .suo 文件并添加现有项目

解决方案中的其他项目不受影响。

是否有不涉及重新创建项目和复制的解决方案。我不想丢失我们所有的编辑历史。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:46:38.087

从您的故事中，我可以假设您从 Visual Studio 外部的 Windows 资源管理器重命名项目，在这种情况下，TFS 不会感觉到这种变化并产生您的问题。始终从 Visual Studio 进行任何编辑。

要解决此问题，您需要使用与第一次相同的方式将文件重命名为旧文件，然后在 Visual Studio 中再次重命名，好消息是 TFS 11 Beta 将通过引入新的支持 Visual Studio 之外的更改功能是本地工作区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:02:53.190

好的，我设法解决了这个问题。感谢其他回复，不幸的是我实际上是通过 VS 解决方案资源管理器编辑了名称。然而，修复需要一些人工干预。

我注意到我对 .sln .vssscc 文件有一个未决的更改。如果我退出 VS，撤消更改然后重新打开解决方案，有问题的项目似乎暂时被 TFS 拾取，然后这两个文件再次出现在我的待处理更改列表中，它又消失了。

对于将来遇到这种情况的人。解决方案是。

*   撤消所有更改，我确实获得了特定版本并覆盖了所有内容。
*   在团队资源管理器中，使用“将项目添加到文件夹”按钮手动添加 csproj
*   我将csproj名称编辑回原来的
*   删除了解决方案 .suo 文件
*   在文本编辑器中打开 .sln 文件并将所有路径/名称更改为正确的旧名称
*   打开解决方案并交叉手指。

希望这可以帮助某人。诅咒 TFS！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T08:08:10.893

我知道这是一个老问题，但实际上有更好的方法来解决这个问题。

您所要做的就是继续进行团队资源管理器并检查，然后在排除的更改部分，然后单击检测到的添加（s）。在那里您可以找到重命名的 csproj 并将其手动添加到 tfs。

[![在此处输入图像描述](../Images/7731cf1b556d8b58727f8a997f6e63ee.png)](https://i.stack.imgur.com/gD5EK.png)

# javascript - HTML5、canvas 和 strokeRect：一些线条太窄和模糊

> ID：10003468
> 
> 赞同：11
> 
> 时间：2012-04-04T00:44:01.440
> 
> 标签：javascript, html, canvas

一个愚蠢的简单画布用法：

```
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

ctx.strokeStyle = "#CCCC00";
ctx.lineWidth = 3;
ctx.strokeRect(0, 0, width, height); 
```

产生一个沿顶部和左侧具有较窄线条的矩形：

![在此处输入图像描述](../Images/87b14098ac82c61f592dc2af01ef964d.png)

为什么会这样？我需要用填充来抵消吗？这很烦人。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-04T00:59:53.693

2 件事。

首先，奇数 lineWidths (1, 3, 5, ...) 在整数像素值上绘制时永远不会干净地应用。这是因为 X 和 Y 指的是像素之间的空间，而不是它们的中心。因此，从`[1,1]`到的笔划 1 的`[1,10]`一半溢出到左侧像素列的像素中，一半溢出到右侧。如果你改为从`[1.5,1]`to画出那条线，`[1.5,10]`它会向左填充一半，向右填充一半，完美地填充整个像素列。

任何奇数宽度都会显示这种行为，但偶数不会因为它们在每一侧填充一个完整的像素，看起来很干净。

* * *

其次，盒子被画布的顶部遮住了。当您将 3px 笔画居中时，`[0,0]`它会向上和向左溢出，`[-1.5,-1.5]`超出画布的可见范围。所以它看起来只有它应该有的一半厚。

* * *

在此处查看差异证明：

```
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

// original box, eclipsed by canvas bounds
ctx.strokeStyle = "#CC0000";
ctx.lineWidth = 3;
ctx.strokeRect(0, 0, 20, 20);

// moved from canvas bounds
ctx.strokeStyle = "#CC0000";
ctx.lineWidth = 3;
ctx.strokeRect(25, 25, 20, 20);

// drawn on half pixel coordinated to precent blurry lines with odd integer line widths.
ctx.strokeStyle = "#CC0000";
ctx.lineWidth = 3;
ctx.strokeRect(50.5, 50.5, 20, 20);
```

```
body { margin: 10px }
```

```
<canvas id="canvas" width="100" height="100"></canvas>
```

应该呈现这个：

[![三盒](../Images/2c21e43d8d513525e742f76d8b682e7c.png)](https://i.stack.imgur.com/DUMKy.png)

第一个就像你的代码。第二个从左上边缘移开以显示其宽度均匀。第三个展示了如何在没有子像素模糊的情况下渲染 3px 笔画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:49:04.917

因为你告诉它在 0 处画一条宽度为 3 的线......所以它的 1/3 将离开你的画布......

[http://jsfiddle.net/mhFLG/](http://jsfiddle.net/mhFLG/)与[http://jsfiddle.net/mhFLG/1/](http://jsfiddle.net/mhFLG/1/)

# ios - 具有可达性的连接状态

> ID：10003469
> 
> 赞同：1
> 
> 时间：2012-04-04T00:44:02.450
> 
> 标签：ios, connection, reachability

我在我的项目中使用可达性，当我尝试获取有关连接类型的信息时，我收到了这个错误。

```
*** Assertion failure in -[Reachability currentReachabilityStatus],/myProjectPath/Reachability.m:530
2012-04-03 21:25:45.619 Traffic[7862:11603] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'currentNetworkStatus called with NULL reachabilityRef' 
```

我不知道我的代码有什么问题。我在 ReachabilityAppDelegate 中放置了相同的代码来获取连接状态。

我的代码：

```
// get type of user connection
NSString* statusString= @"NA";

Reachability *curReach = [[Reachability alloc] init];
NetworkStatus netStatus = [curReach currentReachabilityStatus];
BOOL connectionRequired= [curReach connectionRequired];

switch (netStatus)
{
    case NotReachable:
    {
        statusString = @"NA";
        //Minor interface detail- connectionRequired may return yes, even when the host is unreachable.  We cover that up here...
        connectionRequired= NO;
        break;
    }

    case ReachableViaWWAN:
    {
        statusString = @"WWAN";
        break;
    }
    case ReachableViaWiFi:
    {
        statusString= @"WIFI";
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-23T14:06:40.263

我有同样的问题。我`if reachability.currentReachabilityStatus() == NotReachable`在做之前正在检查

```
reachability = Reachability.forInternetConnection()
reachability.startNotifier() 
```

问题是您在启动通知程序之前询问状态，并且`_reachabilityRef`是零。

确保按照他们需要的顺序拨打电话。首先启动通知程序，然后仅在检查/询问状态之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:57:50.700

检查：

```
//Called by Reachability whenever status changes.
- (void) reachabilityChanged: (NSNotification* )note
{
    Reachability* curReach = [note object];
    NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
    [self updateInterfaceWithReachability: curReach];
} 
```

在应用程序委托中。NSParameterAssert 在我的情况下导致崩溃

# facebook - Facebook 传播其 DNS 需要多长时间？

> ID：10003471
> 
> 赞同：0
> 
> 时间：2012-04-04T00:44:19.707
> 
> 标签：facebook, caching, dns

我们最近不得不更改我们的 DNS 服务器……更改现在已在 36 小时后大量传播，但 Facebook 仍然无法解析我们的链接。我的猜测是 Facebook 需要一段时间来清除其 DNS 服务器上的缓存......知道他们需要多长时间才能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:29:24.403

传播需要多长时间取决于 NS 的 TTL 值和**旧**DNS 服务器上相应的 A 记录。只有您知道 TTL 是什么——可能是几分钟到几周。

In some cases of misconfiguration default TTL value stored in the TLD zone may take place, which is always 48 hours for .COM and .NET domains.

Facebook should not be any different from anything else.

# php - 为什么这个 AWS 调用只选择数组的第一个元素（PHP/AWS）

> ID：10003473
> 
> 赞同：0
> 
> 时间：2012-04-04T00:45:13.747
> 
> 标签：php, amazon-s3, amazon-web-services

首次使用 AWS PHP 开发工具包玩转 S3

```
$res = $s3->list_objects($bucket);
var_dump($res); 
```

显示我有一个`Contents`包含 4 个元素的数组

然而`var_dump($res->body->Contents)`，只产生一个 XMLObject 而不是一个带有 for 元素的 php 数组。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:47:39.947

S3 库读取 XML 响应并返回一个 XML/DOM 对象。它不能像普通数组一样打印。建议您像 PHP 手册中所说的那样对其进行迭代。

但是，对于快速测试，您可以作弊。

```
var_dump(json_decode(json_encode($xml))); 
```

就个人而言，我会看看是否可以返回 JSON 响应——它们通常比 DOMNode 或 DOMList 更小、解析更快并且更易于浏览。

# mule - Wrapper ping 超时和骡子被困

> ID：10003482
> 
> 赞同：1
> 
> 时间：2012-04-04T00:46:33.920
> 
> 标签：mule, java-service-wrapper

如标题所述。之后，wrapper 无法启动另一个 JVM，我的 mule 服务停止了。和这方面的线索？

服务器上有一点负载，但负载不应该太多。

以下是相关日志：

> 发送数据包 PING : ok
> 读取数据包 PING : ok
> 从 JVM 得到 ping 响应
> 发送数据包 PING : ping
> 发送数据包 PING : ping
> 发送数据包 PING : ping
> 发送数据包 PING : ping
> 发送数据包 PING : ping
> 发送数据包PING : ping
> 发送数据包 PING : ping
> JVM 出现挂起：等待来自 JVM 的信号超时。
> JVM 没有按请求退出，终止了在端口 32002 上侦听的服务器
> 。在启动另一个 JVM 之前等待 5 秒。
> 信号被困。详细信息：
> 信号编号=17 (SIGCHLD)，source="unknown"
> 收到 SIGCHLD，检查 JVM 进程状态。
> JVM 响应信号 SIGKILL (9) 退出。
> JVM 进程以代码 1 退出，但包装器退出代码已经为 1。
> 无法启动 JVM
> <--包装器已停止

这是我使用以下命令重新启动 mule 时的日志：mule start。

```
Working directory set to: /root
Spawning intermediate process...
Spawning daemon process...
--> Wrapper Started as Daemon
Using tick timer.
server listening on port 32000.
Classpath element, wrapper.java.classpath.1, does not exist: %MULE_LIB%
Command[0] : java
Command[1] : -Dmule.home=/opt/skybus
Command[2] : -Dmule.base=/opt/skybus
Command[3] : -Djava.net.preferIPv4Stack=TRUE
Command[4] : -XX:MaxPermSize=128m
Command[5] : -Djava.endorsed.dirs=/opt/skybus/lib/endorsed
Command[6] : -Xms2048m
Command[7] : -Xmx2048m
Command[8] : -Djava.library.path=%LD_LIBRARY_PATH%:/opt/skybus/lib/boot
Command[9] : -classpath
Command[10] : %MULE_LIB%:/opt/skybus/conf:/opt/skybus/lib/boot/mule-module-boot-        3.2.1.jar:/opt/skybus/lib/boot/log4j-1.2.14.jar:/opt/skybus/lib/boot/mule-module-reboot-3.2.1.jar:/opt/skybus/lib/boot/wrapper-3.2.3.jar:/opt/skybus/lib/boot/commons-cli-1.2.jar:/opt/skybus/lib/boot/mule-module-logging-3.2.1.jar
Command[11] : -Dwrapper.key=XmncggXh3D4jnC8q
Command[12] : -Dwrapper.port=32000
Command[13] : -Dwrapper.jvm.port.min=31000
Command[14] : -Dwrapper.jvm.port.max=31999
Command[15] : -Dwrapper.debug=TRUE
Command[16] : -Dwrapper.pid=30321
Command[17] : -Dwrapper.version=3.2.3
Command[18] : -Dwrapper.native_library=wrapper
Command[19] : -Dwrapper.service=TRUE
Command[20] : -Dwrapper.cpu.timeout=10
Command[21] : -Dwrapper.jvmid=1
Command[22] : org.mule.module.reboot.MuleContainerBootstrap
Command[23] : start0
Launching a JVM...
Starting the Mule Container...
WrapperManager class initialized by thread: main  Using classloader: sun.misc.Launcher$AppClassLoader@192d342
Wrapper (Version 3.2.3) http://wrapper.tanukisoftware.org
  Copyright 1999-2006 Tanuki Software, Inc.  All Rights Reserved.

Wrapper Manager: JVM #1
Running a 32-bit JVM.
Wrapper Manager: Registering shutdown hook
Wrapper Manager: Using wrapper
Load native library.  One or more attempts may fail if platform specific libraries do not exist.
Loaded native library: libwrapper-linux-x86-32.so
Calling native initialization method.
Inside native WrapperManager initialization method
Java Version   : 1.6.0_10-beta-b25 Java HotSpot(TM) Server VM
Java VM Vendor : Sun Microsystems Inc.

WrapperManager.start(org.mule.module.reboot.MuleContainerWrapper@192b996, args["start0"]) called by thread: main
Control event monitor thread started.
Startup runner thread started.
Communications runner thread started.
Open socket to wrapper...Wrapper-Connection
Opened Socket from 31000 to 32000
Send a packet KEY : XmncggXh3D4jnC8q
handleSocket(Socket[addr=/127.0.0.1,port=32000,localport=31000])
accepted a socket from 127.0.0.1 on port 31000
read a packet KEY : XmncggXh3D4jnC8q
Got key from JVM: XmncggXh3D4jnC8q
send a packet LOW_LOG_LEVEL : 1
send a packet PING_TIMEOUT : 30
send a packet PROPERTIES : (Property Values)
Start Application.
send a packet START : start
Received a packet LOW_LOG_LEVEL : 1
Wrapper Manager: LowLogLevel from Wrapper is 1
Received a packet PING_TIMEOUT : 30
PingTimeout from Wrapper is 30000
Received a packet PROPERTIES : (Property Values)
Received a packet START : start
calling WrapperListener.start()
Waiting for WrapperListener.start runner thread to complete.
WrapperListener.start runner thread started.
2012-04-01 14:53:42,297 INFO [org.mule.module.launcher.MuleContainer] - <
**********************************************************************
* Mule ESB and Integration Platform                                  *
* Version: 3.2.1 Build: 23380                                        *
* MuleSoft, Inc.                                                     *
* For more information go to http://www.mulesoft.org                 *
*                                                                    *
* Server started: 12-4-1 下午2:53                                    *
* JDK: 1.6.0_10-beta (mixed mode)                                    *
* OS: Linux (2.6.18-92.el5xen, i386)                                 *
* Host: localhost.localdomain (10.123.75.149)                        *
**********************************************************************> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:22:14.530

从第一个日志文件中，我可以看到 JVM 对 Wrapper 的 ping 请求没有响应：

> ```
> send a packet PING : ping
> send a packet PING : ping
> send a packet PING : ping
> send a packet PING : ping
> send a packet PING : ping
> send a packet PING : ping
> send a packet PING : ping 
> ```

因此 Wrapper 假定 JVM 已冻结，因此尝试停止并重新启动它。但实际上，由于负载过重，Wrapper 机器甚至无法启动另一个 JVM 实例。您可以扩展 wrapper.ping.timeout，如果您的机器上经常发生重负载，这将使 JVM 有更多时间处理 ping 请求。

[http://wrapper.tanukisoftware.com/doc/english/prop-ping-timeout.html](http://wrapper.tanukisoftware.com/doc/english/prop-ping-timeout.html)

希望这可以帮助你。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-07T18:14:53.267

[![来自 https://wrapper.tanukisoftware.com/doc/english/prop-backend-type.html](../Images/7ed049f61a487aa61a62e9988b1d8d2e.png)](https://i.stack.imgur.com/McjX0.png)

我们最近在生产中遇到了这个问题，奇怪的是 3 个容器中有 2 个失败了。启用 JVM 日志后，除了 JVM 在 10 分钟后退出并尝试重新启动这一事实之外，没有太多关于发生了什么的信息。

在我们将 mule 配置 wrapper.backend.type=PIPE 更改为 AUTO 后，问题似乎已经解决。

我们还计划增加超时时间、增加内存等，但这对我们现在很有效。

# python - 全屏打开cmd

> ID：10003489
> 
> 赞同：3
> 
> 时间：2012-04-04T00:47:00.953
> 
> 标签：python, python-3.x, cmd, cx-freeze

我想知道是否可以在默认情况下在 cmd 全屏中打开使用 cx_Freeze 制作的 python exe？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:27:31.620

如果您准备调用一些 Windows API 函数，那么您可以让您的控制台全屏显示，如下所示：

1.  调用[`GetStdHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683231.aspx)传递`STD_OUTPUT_HANDLE`以获取控制台句柄的句柄。
2.  调用[`SetConsoleDisplayMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686028.aspx)传递该控制台句柄和`CONSOLE_FULLSCREEN_MODE`.

此时您的控制台窗口将全屏显示。

我不知道这些函数是否可以在 win32 Python 模块之一中轻松使用，但使用 ctypes 调用它们非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-26T09:28:29.623

没有集成的 cx_Freeze 命令来执行此操作，但是如果您在 Windows 上运行，Ctypes 提供了一种使用 WinAPI 执行此操作的方法。

**示例代码：**

```
import ctypes

kernel32 = ctypes.WinDLL('kernel32')
user32 = ctypes.WinDLL('user32')

SW_MAXIMIZE = 3

hWnd = kernel32.GetConsoleWindow()
user32.ShowWindow(hWnd, SW_MAXIMIZE) 
```

**解释：**

`GetConsoleWindow()`：

查看[文档](https://docs.microsoft.com/en-us/windows/console/getconsolewindow)

> 检索与调用进程关联的控制台使用的窗口句柄。

基本上它获取终端的句柄，以便`ShowWindow()`知道要修改什么。

* * *

`ShowWindow(hWnd, SW_MAXIMIZE)`

查看[文档](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx)

> 设置指定窗口的显示状态。

即它告诉窗口它应该是什么样子。

我们将终端句柄（存储在 中`hWnd`）传递给该函数并调用`3`最大化。

[有关所有选项，](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx)请参阅该部分[`nCmdShow`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx)

# android - ANDROID OverlayItem - 传递值

> ID：10003491
> 
> 赞同：0
> 
> 时间：2012-04-04T00:47:11.083
> 
> 标签：android, android-maps, android-mapview

是否可以在 OverLayItem 中发送除标记、标题和片段以外的值。因为我想在单击地图中的气球时处理许多按钮，所以我需要额外的值，如 ID、状态等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:19:13.537

是的，你当然可以通过，OverlayItem 就像任何其他类一样，更改它的构造函数并为它传递你在类中需要的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:37:31.287

请尝试创建新的覆盖项类

```
import com.google.android.maps.OverlayItem;

import com.google.android.maps.GeoPoint;

public class MyOverlayItem extends OverlayItem{

    public String newvalue;

        public MyOverlayItem (GeoPoint point,String arg1,String  arg2,String newvalue)
        {
            super(point, arg1, arg2);
            this.newvalue=newvalue;
        }
} 
```

# jquery - 填充选择框 ASP+JQUERY

> ID：10003495
> 
> 赞同：0
> 
> 时间：2012-04-04T00:48:18.000
> 
> 标签：jquery, asp-classic

我已经创建了这个脚本，但我不知道为什么第二个选择框没有显示......

也许我的 ASP 错了？？

看：

[这](http://fakedc.com/sites/luilui/teste.asp)是演示页面

这是脚本：

```
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>

<%
    strConnection ="Provider=Microsoft.Jet.OLEDB.4.0;Data Source="& Server.MapPath("database/banco.mdb") &";"
    set objConn = Server.CreateObject("ADODB.Connection")
    objConn.open strConnection

    set rs_lojas = Server.Createobject("ADODB.RecordSet")
    rs_lojas.Open "select * FROM ondeencontrar WHERE estado = '"& request("estado")&"'", objConn

    If estado = "" Then
        estado = trim(Request("estado"))
        session("estado") = true
    End if

    If cidade = "" Then
        modelo = trim(Request("cidade"))
        session("cidade") = true
    End if
%>

<%  set rs_estado = Server.Createobject("ADODB.RecordSet")
    rs_estado.Open "SELECT distinct estado FROM ondeencontrar", objConn
%>

<script>
$("#first-choice").change(function() {
    $("#second-choice").load("estados.asp?estado=" + $("#first-choice").val());
    $("#second-choice").show("slow");   
});
$("#second-choice").change(function() {
    alter("TESTE");
});
</script>

<select id="first-choice">
    <option selected value="">Escolha um Estado</option>
    <%do while not rs_estado.eof%>
    <option value="<%=rs_estado("estado")%>"><%=rs_estado("estado")%></option>
    <%  rs_estado.MoveNext
    if rs_estado.EOF then Exit do %>
    <% Loop %>
</select>

<br /> <br />
<% 
If not trim(Request("estado")) = "" then
set rs_cidade = Server.Createobject("ADODB.RecordSet")
rs_cidade.Open "SELECT distinct cidade, estado  FROM ondeencontrar where estado = '"&estado&"'", objConn
%>
<select id="second-choice" style="display: none;">
    <option selected="<%=cidade%>"><%=cidade%></option>
    <% do while not rs_cidade.eof %>
    <option value="ondeencontrar.asp?estado=<%=request("estado")%>&cidade=<%=rs_cidade("cidade")%>"><%=rs_cidade("cidade")%></option>
<%
        rs_cidade.MoveNext
        if rs_cidade.EOF then Exit do
    %>
    <% Loop %>  
</select>
<%End If%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:21:22.653

您的 jQuery 选择器需要在 document.ready 内，或者在 body 标记结束之前移动到最后。您正在选择尚未呈现的元素。

像这样：

```
$(function(){
    $("#first-choice").change(function() {
        $("#second-choice").load("estados.asp?estado=" + $("#first-choice").val());
        $("#second-choice").show("slow");   
    });
    $("#second-choice").change(function() {
        alter("TESTE");
    });
}); 
```

此 URL (http://fakedc.com/sites/luilui/teste.asp) 还需要返回 JSON 或 XML 对象，以便可以将其加载到第二个选择项中。目前没有。

由于您正在执行 AJAX 请求，因此该行也不起作用。

```
If not trim(Request("estado")) = "" then 
```

第二个选择元素取决于第一个选择元素的选项选择，所以我会将第二个查询移动到 AJAX 调用中并填充第二个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:50:45.147

第二个选择甚至没有在页面中呈现，因为它没有通过`If not trim(Request("estado")) = "" then`条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:55:12.943

来自萤火虫：

```
"NetworkError: 404 Not Found - http://fakedc.com/sites/luilui/jquery-1.7.1.min.js" 
```

还：

```
$ is not defined 
```

您可能想要检查 jQuery 包含的源路径。

# c# - 从单词索引中获取完整句子

> ID：10003497
> 
> 赞同：2
> 
> 时间：2012-04-04T00:48:31.800
> 
> 标签：c#, regex, substring, indexof

我试图找到一种比下面的代码更优雅的方法来获取基于其中一个包含单词的索引的句子列表。因此，例如，如果我给它一个单词列表，例如用户名，它会找到所有这些单词的索引（这已经完成并且是 GetWordsMatches 方法）然后，使用该单词的索引，我想抓住整个句子。

我有两个问题，一，我不知道如何在单词之前查看到上一期，只是结尾一，二，如果最后一个单词匹配没有a，我不知道如何阻止它崩溃文件结束前的时间段。

```
public static List<string> GetSentencesFromWords(List<string> Words, string FileContents)
    {
        List<string> returnList = new List<string>();
        MatchCollection mColl = GetWordsMatches(Words,FileContents);
        foreach (Match ma in mColl)
        {
            int tmpInd = ma.Index;
            int endInd = FileContents.IndexOf(".", tmpInd);
            string tmp = FileContents.Substring(tmpInd,endInd);
            returnList.Add(tmp);
        }
        return returnList;
    } 
```

有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T00:57:58.533

只要快...

*   您可以使用`LastIndexOf(str, index)`从某个位置向后搜索，

*   对于“结束条件”，我猜你应该`if`在“ `.`”搜索中添加一个（如果它到达末尾，它会返回“ `-1`”），

...无论如何，拆分文件内容（作为分隔符）可能会更好`.`，这样你就不会遇到最后一个问题，因为它会拿起最后一行。然后搜索单词（在每一行中，`IndexOf`使用 current `index`）。或者我可能会使用 enumerator (w/ `yield return`) 扩展方法并行执行所有这些操作 - 并返回 IEnumerable 以便您可以更“实用”，向查询中添加其他内容。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T02:44:30.200

LINQ 驱动的解决方案怎么样：

```
 public static List<string> GetSentencesFromWords(List<string> words, string fileContents)
    {
        return fileContents.Split('.')
            .Where(s => words.Any(w => s.IndexOf(w) != -1))
            .Select(s => s.TrimStart(' ') + ".")
            .ToList();
    } 
```

# iphone - 调度后台执行

> ID：10003503
> 
> 赞同：0
> 
> 时间：2012-04-04T00:49:38.067
> 
> 标签：iphone, objective-c, ios, uilocalnotification

我想知道是否可以安排应用程序的后台执行。我正在尝试在我的应用程序上使用区域监控，但仅在特定日期，我可以看到它的唯一方法是在需要时添加区域并在不需要时删除它们，例如我想监控5 月 3 日的地区 我希望我的应用程序在 5 月 2 日在后台启动，以便添加要添加的地区，而不是从现在到那天一直跟踪它。有没有办法做到这一点？还是你能想到的其他方式？我认为本地通知可能会有所帮助，但不知道具体如何。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:27:59.343

听起来你是一个基于位置的应用程序。如果您是基于位置的应用程序，那么您可以获取移动通知。注册您最需要的，当它们不适用于您时，只需退出。您可以使用“重大位置更改”通知，这样您就不会收到比您想要的更多的通知（这基本上会在手机信号塔发生变化时为您提供通知）。但是从它的声音来看，你会想要经常收到通知，而忽略它们。

当用户没有请求时，无法在任意时间运行。如果您是批准的背景类型之一（例如位置），那么您可以根据它获得通知，这就是您必须使用的。没有“基于时间”的通知可以在没有用户参与的情况下运行您的代码。

# asp.net-mvc - Ajax.ActionLink 加载带有背景不透明度的图像定位

> ID：10003504
> 
> 赞同：5
> 
> 时间：2012-04-04T00:49:44.920
> 
> 标签：asp.net-mvc, asp.net-ajax, loading

当我单击 ajax.action 链接时，我想在页面中间显示带有背景不透明度的加载图像。

```
<img id="image_loading" alt="" src="../../images/site/loading.gif" style="position: fixed;     
     display: none;" /> 
```

这是我的代码

```
<nav class="ust_menu">
    <ul>
         <li>@Ajax.ActionLink("Home", "Index", "Home", new AjaxOptions { UpdateTargetId = "article_site", LoadingElementId = "image_loading" })</li>
         <li>@Ajax.ActionLink("Contact Us", "Contact", "Home", new AjaxOptions { UpdateTargetId = "article_site", LoadingElementId = "image_loading" })</li>
         <li>@Ajax.ActionLink("About", "About", "Home", new AjaxOptions { UpdateTargetId = "article_site", LoadingElementId = "image_loading" })</li>    
    </ul>
</nav> 
```

我可以显示没有背景不透明度的图像，而不是我想要的位置。如何在具有背景不透明度的页面中间显示加载图像。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T05:42:09.990

使图像居中：

```
<img id="image_loading" alt="" src="@Url.Content("~/content/loading.gif")" class="progress" /> 
```

并在 CSS 文件中：

```
.progress {
    display: none;
    position: fixed;
    top: 50%;
    left : 50%;
    margin-top: -50px;
    margin-left: -100px;
} 
```

现在，如果您想做一些更花哨的效果，您可以订阅`OnBegin`和`OnComplete`回调，您将可以更好地控制图像的显示方式：

```
@Ajax.ActionLink("Home", "Index", "Home", new AjaxOptions { 
    OnBegin = "onBegin",
    OnComplete = "onComplete",
    UpdateTargetId = "article_site"
}) 
```

进而：

```
function onBegin() {
    // TODO: show the progress image
}

function onComplete() {
    // TODO: hide the progress image
} 
```

# apache-flex - 如何在不循环的情况下将 SWF 中的 MovieClip 嵌入到 Flex 应用程序中？

> ID：10003505
> 
> 赞同：2
> 
> 时间：2012-04-04T00:49:46.210
> 
> 标签：apache-flex, actionscript, movieclip

我被这个难住了，但我忽略了这件事似乎很简单。

我的 Flex 应用程序嵌入（即编译）另一个 SWF 的 MovieClip，如下所示：

```
[Embed(source='assets/clips.swf', symbol='MyClip')] 
private var MyClip:Class; 
```

...然后使用`mx:Image`标签来显示它：

```
<mx:Image source="{MyClip}" width="300" height="100" /> 
```

...但由此产生的剪辑永远循环。我希望它只播放一次然后停止。

源剪辑`stop()`在其最后一帧中定义了一个动作，但我怀疑脚本在编译时被剥离，所以我想知道如何以某种方式告诉 Image 标签或 MyClip 类剪辑不应该连续循环.

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:54:52.470

我不使用 Flex，所以这些想法不是我通过实践知道的；但这是我发现的：

> 如果 SWF 文件包含任何 ActionScript 代码，Flex 会在编译期间打印一条警告，然后从嵌入符号中删除 ActionScript。这意味着您只能嵌入符号本身。-- [http://livedocs.adobe.com/flex/3/html/help.html?content=embed_4.html](http://livedocs.adobe.com/flex/3/html/help.html?content=embed_4.html)

另外，我相信舞台上的那个类`MyClip`是一个，而不是一个实例。`Class`所以 。. . 您必须执行以下操作：

```
<mx:Image source="{new MyClip()}" width="300" height="100" /> 
```

或创建一个变量并使用它，[例如 Adob​​e docs 中的这个示例](http://livedocs.adobe.com/flex/3/html/help.html?content=controls_16.html)。

如果这一切最终都在真理的领域，那么您可以像任何其他嵌入式 SWF 一样 play() 和 stop()。

# objective-c - 在 NavBar 中显示 UIBarButtonItem 的自定义图像（图像被覆盖）

> ID：10003508
> 
> 赞同：0
> 
> 时间：2012-04-04T00:50:14.623
> 
> 标签：objective-c, ios, ios5, uibarbuttonitem, navigationcontroller

提前致谢。我无法让我的自定义按钮在我的导航栏中正确显示。他们最终只是在上面显示了 iOS5 的“编辑”或“完成”或“返回”按钮。我为文本设置的属性的奇怪部分显示得很好，但图像却没有。

问题截图：

[http://i.stack.imgur.com/DLCPV.png](http://i.stack.imgur.com/DLCPV.png)

导航控制器中的代码：

```
AlarmViewController *alarmController = [[[AlarmViewController alloc] initWithNibName:@"AlarmViewController" bundle:nil] autorelease];
alarmController.title = @"Alarms";

// Set NavBar and TabBar Items
[alarmController.tabBarItem setFinishedSelectedImage:alarmsSelected withFinishedUnselectedImage:alarmsUnselected];
UINavigationController *navAlarmController = [[UINavigationController alloc] initWithRootViewController:alarmController];
UIBarButtonItem *editButton = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStyleBordered target:self action:nil];  
[[navAlarmController navigationItem] setRightBarButtonItem:editButton];

// Setup a navigational controller and push the alarm controller on it
[self.navigationController pushViewController:alarmController animated:YES];
alarmController.delegate = self.delegate; 
```

在目标视图的 viewDidLoad 中：

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

再次感谢。令人沮丧，因为我希望它与主题相匹配，但它不想合作。帮助！

# objective-c - 使用整数和某种不需要的类型转换初始化 NSMutableArray

> ID：10003510
> 
> 赞同：0
> 
> 时间：2012-04-04T00:50:32.323
> 
> 标签：objective-c, nsmutablearray

我想用 8 个整数初始化一个 NSMutableArray。我在 SO 档案中发现的内容让我觉得很疯狂，但它似乎确实有效：

```
_noClicks = [[NSMutableArray alloc] initWithObjects:[NSNumber numberWithUnsignedInteger:1], [NSNumber numberWithUnsignedInteger:1], [NSNumber numberWithUnsignedInteger:1], [NSNumber numberWithUnsignedInteger:1], [NSNumber numberWithUnsignedInteger:1], [NSNumber numberWithUnsignedInteger:1], [NSNumber numberWithUnsignedInteger:1], [NSNumber numberWithUnsignedInteger:1], [NSNumber numberWithUnsignedInteger:1],nil]; 
```

我知道 Objective-c 不是一种面向科学的语言，但必须有更好的方法来做到这一点（我想这是问题 1）。顺便说一下，这段代码在`init`名为 GameData 的单例方法中，并与其他数组一起放入字典中。

后来，我使用这个整数数组如下：

```
- (IBAction)buttonOneWasTouched:(id)sender {

    NSUInteger CAP = [[GameData gameData] getCurAnsPos];
    NSLog(@"%i", CAP); // CAP is current answer position and this seems to work
    NSMutableArray *noClks = [[GameData gameData].curData valueForKey:@"noClicks"];
    NSLog(@"%@", noClks); // gives the expected array of 1's
    NSLog(@"%@", [noClks class]); // _NSArrayM OK I think
    NSUInteger nC = [noClks objectAtIndex:CAP];
    NSLog(@"%i", nC); // This gives a crazy answer: 109613120
} 
```

所以这里出了点问题；记录的巨大数字`nC`向我表明它已被存储为非无符号整数，但我不明白为什么。所以这是问题#2。

最后，这可能是线索，编译器`Incompatible pointer to integer conversion initializing 'NSUInteger' (aka 'unsigned int') with an expression of type 'id';`在第 2 到最后一行给出警告，但奇怪的是，第 1 行具有相同的结构但没有给出错误。这一定是一件非常简单的事情，我最近的所有问题都是。蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:59:15.187

对于第一个问题，我建议类似

```
_noClicks = [[NSMutableArray alloc] initWithCapacity:n];

for(int i=0;i<n;i++)
    [_noClicks addObject:[NSNumber numberWithInt:1]]; 
```

正如方法名称所暗示的，`objectAtIndex`返回一个对象，而不是一个`NSUInteger`. 你可以做类似的事情

```
NSNumber *nC = [noClks objectAtIndex:CAP]; 
```

或者

```
NSUInteger nC = [[noClks objectAtIndex:CAP] intValue]; 
```

# orchardcms - Orchard CMS 中的链接列表

> ID：10003513
> 
> 赞同：1
> 
> 时间：2012-04-04T00:50:34.460
> 
> 标签：orchardcms

在 Orchard 中将列表链接在一起的最佳方法是什么？

例如-我有一份公司清单和一份项目清单。当我创建项目时，我想将它与公司相关联......理想情况下，一个下拉框预先填充了我创建的公司。

最好的方法是什么？

PS我正在使用果园1.3

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:28:04.613

要查看在编辑器视图中预填充复选框或下拉列表的示例，请查看 Orchard docs 1-N / NN 示例。

要查看通过下拉列表在两个不同部分之间建立关系的示例，请查看 Codeplex 或 Orchard 库上的 FeaturedItemSlider 或 ContentSlider（源自前者）Orchard 模块。

1.  更新 ProjectPart 以具有 CompanyPart 类型的属性（假设这些是您用于模型的名称）。
2.  在 Migrations.cs 中，更新 ProjectPartRecord 表，使其具有 int 类型的 CompanyPartRecord_Id 列。Orchard 将使用 NHibernate 设置映射，以便 ProjectPartRecord 表可以连接到 CompanyPartRecord 表。
3.  更新 ProjectPartDriver 类构造函数，使其具有 IRepository 类型的参数。将实例保存为相同类型的只读类属性（命名为 _companiesRepo）。
4.  更新 ProjectPartDriver .Editor() 方法以从 _companiesRepo 中提取公司列表。
5.  更新另一个 ProjectPartDriver .Editor() 方法（处理回发的方法）以将 ProjectPart 的 CompanyPart 属性设置为下拉列表中选择的公司。您使用下拉列表中的公司 ID 从数据库中查找 CompanyPart——我使用 viewModels 使事情变得更容易，所以我的版本如下所示：`projectPart.CompanyPart = _companiesRepo.Get(companyId)`
6.  更新 ProjectPart 的 editorTemplate 以呈现下拉列表。

我不确定你打算如何在前端使用这种关系。有两种方法可以解决。(1) 您可以创建一个具有匹配 Route 的自定义控制器，并且在控制器中有代码可以根据您设置的关系查找部件，或者 (2) 在 ProjectPartDriver.Display() 方法中您可以执行使用 IContentManager 查找。

# performance - MySQLd InnoDB 调优

> ID：10003514
> 
> 赞同：0
> 
> 时间：2012-04-04T00:50:40.017
> 
> 标签：performance, database-performance, mysql

在尝试为我的全 InnoDB 应用程序环境（当然，mysql DB 仍然是 MyISAM）配置我的 mysqld 时，我不断看到这个公式的变体来确定总内存使用量：

```
key_buffer_size + query_cache_size + tmp_table_size + innodb_buffer_pool_size + innodb_additional_mem_pool_size + innodb_log_buffer_size
+ max_connections * (read_buffer_size + read_rnd_buffer_size + sort_buffer_size + join_buffer_size + binlog_cache_size + thread_stack) 
```

这个总和大于我的可用物理内存，可能会导致分页。与我的备用服务器（具有更多内存）相比，我当然看到了性能下降。

我正在尝试并失败，以找出哪些变量对 InnoDB 无用（仅对 MyISAM 有用）并且可以大大减少以缩小我的总内存分配。

问题，我可以调低哪些配置变量来减少 MySQL 的总内存分配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:54:29.173

经过多次检查和大惊小怪，我发现这并不重要。显然 MySQLd 会稀疏地分配缓冲区，这意味着如果我不使用 MyISAM，仅对 MyISAM 有益的缓冲区不会增长到占用大量物理内存，并且计算出的“总内存分配”实际上不会被分配。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T01:51:11.610

你可以试试 Percona 的配置向导。这应该是一个好的开始。Percona 的人知道他们的 MySQL。

*警告*：它会要求您注册以获得最终结果。

[https://tools.percona.com/wizard](https://tools.percona.com/wizard)

您可能需要做一些基准测试来调整您的特定负载模式。

# xml - 带空白的 XSLT 数据透视表

> ID：10003519
> 
> 赞同：1
> 
> 时间：2012-04-04T00:51:29.937
> 
> 标签：xml, xslt, xslt-1.0

所以我有一个 xml 文档，它在决赛桌中不包含完整的叉积，但我需要 xslt 为我放入空白。如果你运行这个 xslt，你可以看到 GCM 应该在 ABC 下。我知道我必须计算结果然后添加一个空白，但我被卡住了。

```
<root>
  <Cell>
    <place>BRM</place>
    <test>DMC</test>
    <Score>70</Score>
    <Colour>#008000</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>GCM</place>
    <test>DMC</test>
    <Score>76</Score>
    <Colour>#008000</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>GRM</place>
    <test>DMC</test>
    <Score>72</Score>
    <Colour>#008000</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>NPM</place>
    <test>DMC</test>
    <Score>80</Score>
    <Colour>#008000</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>PDM</place>
    <test>DMC</test>
    <Score>88</Score>
    <Colour>#008000</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>PTM</place>
    <test>DMC</test>
    <Score>58</Score>
    <Colour>#FFA100</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>SRM</place>
    <test>DMC</test>
    <Score>62</Score>
    <Colour>#FFA100</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>SWC</place>
    <test>DMC</test>
    <Score>85</Score>
    <Colour>#008000</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>RVS</place>
    <test>DMC</test>
    <Score>84</Score>
    <Colour>#008000</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup> Process Plant</testgroup>
  </Cell>
  <Cell>
    <place>BWM</place>
    <test>SUR</test>
    <Score>66</Score>
    <Colour>#FFA100</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup>Survey</testgroup>
  </Cell>
  <Cell>
    <place>PDM</place>
    <test>SUR</test>
    <Score>85</Score>
    <Colour>#008000</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup>Survey</testgroup>
  </Cell>
  <Cell>
    <place>SRM</place>
    <test>SUR</test>
    <Score>41</Score>
    <Colour>#FFA100</Colour>
    <GenerateDate>2012-04-04 12:46:41</GenerateDate>
    <testgroup>Survey</testgroup>
  </Cell>
</root> 
```

XSLT

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output method="html" indent="yes"/>

  <xsl:key name="muench" match="/root/Cell/place" use="."/>

  <xsl:key name="test-key" match="/root/Cell/test" use="."/>

  <xsl:template match="/">
    <html>
      <head>
        <title>ABC test Report</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      </head>
      <body >
        <div >
          <header>
            <h2 >
              test group - <xsl:value-of select="/root/Cell/testgroup"/>
            </h2>
          </header>
          <div class="content">
            <table >
              <thead>
                <tr>
                  <th >Place</th>
                  <xsl:for-each select="/root/Cell/test[generate-id() = generate-id(key('test-key',.)[1])]">
                    <th >
                      <xsl:value-of select="."/>
                    </th>
                  </xsl:for-each>
                </tr>
              </thead>
              <tbody>
                <xsl:for-each select="/root/Cell/place[generate-id() = generate-id(key('muench',.)[1])]">
                  <xsl:call-template name="pivot">
                    <xsl:with-param name="place" select="."/>
                  </xsl:call-template>
                </xsl:for-each>
              </tbody>
            </table>
          </div>
          <footer >
            <p></p>
          </footer>
        </div>
      </body>
    </html>
  </xsl:template>

  <xsl:template name="pivot">
    <xsl:param name="place"/>
    <tr>
      <td >
        <xsl:value-of select="$place"/>
      </td>
      <xsl:for-each select="/root/Cell/test[generate-id() = generate-id(key('test-key',.)[1])]">
      <xsl:for-each select="/root/Cell[place=$place and test=.]">
        <xsl:choose>
            <xsl:when test="count(.)=1">
                <td>
                  <xsl:attribute name="style">
                    background-color:<xsl:value-of select="Colour"/>;
                  </xsl:attribute>
                  <xsl:value-of select="Score"/>%
                </td>
            </xsl:when>
            <xsl:otherwise>
                <td>
                </td>
            </xsl:otherwise>
        </xsl:choose>
      </xsl:for-each>
      </xsl:for-each>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

我想要的输出

```
<html>
  <table border="1">
    <thead>
      <th>Place</th>
      <th>DMC</th>
      <th>SUR</th>
    </thead>
    <tbody>
      <tr>
        <td>BRM</td>
        <td> 70</td>
        <td> </td>
      </tr>
      <tr>
        <td>BWM</td>
        <td> </td>
        <td> 66</td>
      </tr>
      <tr>
        <td>GCM</td>
        <td> 76</td>
        <td> </td>
      </tr>
      <tr>
        <td>GRM</td>
        <td> 72</td>
        <td> </td>
      </tr>
      <tr>
        <td>NPM</td>
        <td> 80</td>
        <td> </td>
      </tr>
      <tr>
        <td>PDM</td>
        <td> 88</td>
        <td> 85</td>
      </tr>
      <tr>
        <td>PTM</td>
        <td> 58</td>
        <td> </td>
      </tr>
      <tr>
        <td>RVS</td>
        <td> 84</td>
        <td> </td>
      </tr>
      <tr>
        <td>SRM</td>
        <td> 62</td>
        <td> 41</td>
      </tr>
      <tr>
        <td>SWC</td>
        <td> 85</td>
        <td> </td>
      </tr>
    </tbody>
  </table>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:47:48.190

**这种更短更简单的转换**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <xsl:key name="kTests" match="test" use="."/>
     <xsl:key name="kCellByPlace" match="Cell" use="place"/>

     <xsl:variable name="vTests" select=
      "/*/*/test
             [generate-id()
             =
              generate-id(key('kTests', .)[1])
             ]
      "/>

     <xsl:template match="/*">
      <html>
          <table border="1">
            <thead>
              <th>Place</th>
              <xsl:apply-templates select="$vTests"/>
            </thead>
            <tbody>
              <xsl:apply-templates select=
               "Cell[generate-id() = generate-id(key('kCellByPlace', place))]">
                <xsl:sort select="place"/>
              </xsl:apply-templates>
            </tbody>
          </table>
      </html>
     </xsl:template>

     <xsl:template match="test">
      <th><xsl:value-of select="."/></th>
     </xsl:template>

     <xsl:template match="Cell">
      <tr>
       <td><xsl:value-of select="place"/></td>
        <xsl:apply-templates select="$vTests" mode="row">
         <xsl:with-param name="pCells" select="key('kCellByPlace', place)"/>
        </xsl:apply-templates>
      </tr>
     </xsl:template>

     <xsl:template match="test" mode="row">
      <xsl:param name="pCells"/>

      <td>
        <xsl:value-of select=
         "concat('&#xA0;',$pCells[test=current()]/Score)"/>
      </td>
     </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<root>
    <Cell>
        <place>BRM</place>
        <test>DMC</test>
        <Score>70</Score>
        <Colour>#008000</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>GCM</place>
        <test>DMC</test>
        <Score>76</Score>
        <Colour>#008000</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>GRM</place>
        <test>DMC</test>
        <Score>72</Score>
        <Colour>#008000</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>NPM</place>
        <test>DMC</test>
        <Score>80</Score>
        <Colour>#008000</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>PDM</place>
        <test>DMC</test>
        <Score>88</Score>
        <Colour>#008000</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>PTM</place>
        <test>DMC</test>
        <Score>58</Score>
        <Colour>#FFA100</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>SRM</place>
        <test>DMC</test>
        <Score>62</Score>
        <Colour>#FFA100</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>SWC</place>
        <test>DMC</test>
        <Score>85</Score>
        <Colour>#008000</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>RVS</place>
        <test>DMC</test>
        <Score>84</Score>
        <Colour>#008000</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup> Process Plant</testgroup>
    </Cell>
    <Cell>
        <place>BWM</place>
        <test>SUR</test>
        <Score>66</Score>
        <Colour>#FFA100</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup>Survey</testgroup>
    </Cell>
    <Cell>
        <place>PDM</place>
        <test>SUR</test>
        <Score>85</Score>
        <Colour>#008000</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup>Survey</testgroup>
    </Cell>
    <Cell>
        <place>SRM</place>
        <test>SUR</test>
        <Score>41</Score>
        <Colour>#FFA100</Colour>
        <GenerateDate>2012-04-04 12:46:41</GenerateDate>
        <testgroup>Survey</testgroup>
    </Cell>
</root> 
```

**产生想要的结果**：

```
<html>
   <table border="1">
      <thead>
         <th>Place</th>
         <th>DMC</th>
         <th>SUR</th>
      </thead>
      <tbody>
         <tr>
            <td>BRM</td>
            <td>&nbsp;70</td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td>BWM</td>
            <td>&nbsp;</td>
            <td>&nbsp;66</td>
         </tr>
         <tr>
            <td>GCM</td>
            <td>&nbsp;76</td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td>GRM</td>
            <td>&nbsp;72</td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td>NPM</td>
            <td>&nbsp;80</td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td>PDM</td>
            <td>&nbsp;88</td>
            <td>&nbsp;85</td>
         </tr>
         <tr>
            <td>PTM</td>
            <td>&nbsp;58</td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td>RVS</td>
            <td>&nbsp;84</td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td>SRM</td>
            <td>&nbsp;62</td>
            <td>&nbsp;41</td>
         </tr>
         <tr>
            <td>SWC</td>
            <td>&nbsp;85</td>
            <td>&nbsp;</td>
         </tr>
      </tbody>
   </table>
</html> 
```

**说明**：

1.  `$vTests`我们创建一个包含`test`元素所有不同值的辅助变量。

2.  每当我们想要生成一个`tr`包含特定位置的特定测试分数的 a 时，我们为 中包含`td`的所有`test`元素生成“空” `$vTests`，其字符串值不等于特定`test`元素的字符串值，我们生成恰好当该元素的字符串值等于来自的当前元素时`Score`，特定元素的兄弟姐妹的字符串值。`test``test``test``$vTests`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T05:41:32.820

感谢 Dimetre 的帮助。他展示了如何更有效地使用模板并创建了变量。然后我用它来编辑他的脚本以提供我正在寻找的输出。

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kTests" match="test" use="."/>

 <xsl:variable name="vTests" select=
  "/*/*/test
         [generate-id()
         =
          generate-id(key('kTests', .)[1])
         ]
  "/>

  <xsl:key name="kPlaces" match="place" use="."/>

 <xsl:variable name="vPlaces" select=
  "/*/*/place
         [generate-id()
         =
          generate-id(key('kPlaces', .)[1])
         ]
  "/>

 <xsl:template match="/*">
  <html>
      <table border="1">
        <thead>
          <th>Place</th>
          <xsl:apply-templates select="$vTests">
           <xsl:sort select="." />
          </xsl:apply-templates>
        </thead>
        <tbody>
          <xsl:apply-templates select="$vPlaces">
           <xsl:sort select="." />
          </xsl:apply-templates>
        </tbody>
      </table>
  </html>
 </xsl:template>

 <xsl:template match="test">
  <th><xsl:value-of select="."/></th>
 </xsl:template>

 <xsl:template match="place">
  <tr>
   <td><xsl:value-of select="."/></td>
    <xsl:apply-templates select="$vTests" mode="row">
      <xsl:sort select="." />
     <xsl:with-param name="pPlace" select="."/>
    </xsl:apply-templates>
  </tr>
 </xsl:template>

 <xsl:template match="test" mode="row">
  <xsl:param name="pPlace"/>
  <td>
    <xsl:value-of select=
     "concat('&#xA0;',/root/Cell[test=current() and place=$pPlace]/Score)"/>
  </td>
 </xsl:template>

</xsl:stylesheet> 
```

# firefox - Firefox form analyzer plugin

> ID：10003525
> 
> 赞同：1
> 
> 时间：2012-04-04T00:52:10.247
> 
> 标签：firefox, firefox-addon

I would like to know if there is any firefox html form analyzer or for any other browser. Form analyzer is a tool that once you submit a POST form or any other type of form, will tell you the fields submitted together with their value. A good analyzer can by located in the following address

```
http://www.webbotsspidersscreenscrapers.com/form_analyzer.php?term=hello&sort=up 
```

but the problem with that analyzer is that the information is posted to this address. What I want to do is to post the data on my server and see if the data works correctly.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:38:39.757

您可能想查看[Live HTTP Headers Extension](https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/)和[Firebug Network Analysis 功能](http://getfirebug.com/network)。它们将让您分析从 Firefox 中提交的任何表单。

# ruby-on-rails - 你如何在 Rails 中找到每个用户的最新行？

> ID：10003528
> 
> 赞同：2
> 
> 时间：2012-04-04T00:53:04.477
> 
> 标签：ruby-on-rails, activerecord, distinct

查询每个 user_id 的最新课程计划记录的 Rails 方法是什么？

```
class LessonPlan < ActiveRecord::Base
    belongs_to :user
end 
```

我见过的所有帖子都包括连接或子查询。没有简单的方法可以做到这一点吗？

我试过了

```
LessonPlan.select(['distinct(user_id)', :id, :created_at]).where(:user_id => users).order('created_at DESC') 
```

这会产生类似的查询。

```
SELECT distinct(user_id), id, created_at FROM `lesson_plans` WHERE `lesson_plans`.`user_id` IN (110031, 110032, 110033, 110034) ORDER BY created_at DESC 
```

但是当我尝试这个查询时，它会返回具有重复 user_id 的行。

抱歉，如果这是一个重复的问题，我真的四处寻找解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:54:13.783

Rails#ActiveRecord：

```
LessonPlan.select([:user_id, :id, 'MAX(created_at)']).group(:user_id).limit(10) 
```

mysql：

```
select id, user_id, MAX(created_at) from lesson_plans group by user_id limit 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:35:15.413

可能是它的工作

```
LessonPlan.select([:user_id, :id, 'MAX(created_at)']).group(:user_id) 
```

# windows - 用于自动化的 Windows 脚本

> ID：10003530
> 
> 赞同：1
> 
> 时间：2012-04-04T00:53:27.817
> 
> 标签：windows

大约 20 年前，当我使用 MAC 时，它能够让您在应用程序中执行一些操作，并将这些操作保存到脚本中，您只需双击即可再次执行。

Windows 7有类似的东西吗？

前任; 我需要在计算机上的 2 个声源之间切换。现在，我必须加载控制面板，选择声音并进行更改。有一个脚本会很酷，我只需双击即可为我执行此操作。

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:58:01.327

您是否尝试过[Autoit](http://www.autoitscript.com/site/autoit/)或[winautomation](http://www.winautomation.com/)？

Windows 也有一个自动化 API： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ff486375 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff486375(v=vs.85).aspx)

# orchardcms - Orchard - 如何创建新的产品页面？

> ID：10003533
> 
> 赞同：0
> 
> 时间：2012-04-04T00:53:57.973
> 
> 标签：orchardcms

我必须创建这个“添加新产品”页面。该页面顶部将有四个单选按钮，用于不同的产品类型。根据选择的产品/单选按钮，我必须显示不同的输入字段。大约 50% 的字段对所有 4 种产品类型都是通用的，其余字段因每种产品类型而异。而且我想（必须）将数据保存在同一个数据库表中（每行中会有几个空列）。

关于如何实现此页面的任何建议？（一种内容类型、多种内容类型、内容部分、小部件......？）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:55:28.217

根据目前提供的信息，一种方法是编写客户端逻辑（在 Javascript 中）以将按钮添加到页面中的适当位置，并根据按下的按钮修改页面布局。为此，您无需在 Orchard 中修改任何内容。

您可以在 Orchard 中创建一个仅适用于特定路径下的页面的新“层”，以及将您的 javascript 注入该层的小部件。这也不需要对 Orchard 本身进行任何修改。

这对你有用吗？

# android - Application crashes upon opening

> ID：10003535
> 
> 赞同：0
> 
> 时间：2012-04-04T00:54:40.250
> 
> 标签：android, eclipse, crash-reports

When I'm testing my new update to my application for Android, the application crashes upon start when it trying to start the "optionsmenu" (what I know). Here's the code:

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
         Toast.makeText(this, "GPS'n är aktiverad på din mobilenhet", Toast.LENGTH_SHORT).show();
    }else{
        showGPSDisabledAlertToUser();
    }

    setContentView(R.layout.about);
    Button b = (Button) findViewById(R.id.menuItem1);
    b.setOnClickListener(new View.OnClickListener() {
       public void onClick(View arg0) {
       Intent i = new Intent(nowActivity.this, About.class);
       startActivity(i);
       } 
    });
} 
```

And the LogCat:

```
04-04 00:50:27.324: D/LocationManager(870): Constructor: service = android.location.ILocationManager$Stub$Proxy@44e95640
04-04 00:50:27.374: D/AndroidRuntime(870): Shutting down VM
04-04 00:50:27.374: W/dalvikvm(870): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-04 00:50:27.374: E/AndroidRuntime(870): Uncaught handler: thread main exiting due to uncaught exception
04-04 00:50:27.384: E/AndroidRuntime(870): java.lang.RuntimeException: Unable to start activity ComponentInfo{weather.right.now/weather.right.nowActivity}: java.lang.NullPointerException
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.os.Looper.loop(Looper.java:123)
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-04 00:50:27.384: E/AndroidRuntime(870):  at java.lang.reflect.Method.invokeNative(Native Method)
04-04 00:50:27.384: E/AndroidRuntime(870):  at java.lang.reflect.Method.invoke(Method.java:521)
04-04 00:50:27.384: E/AndroidRuntime(870):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-04 00:50:27.384: E/AndroidRuntime(870):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-04 00:50:27.384: E/AndroidRuntime(870):  at dalvik.system.NativeStart.main(Native Method)
04-04 00:50:27.384: E/AndroidRuntime(870): Caused by: java.lang.NullPointerException
04-04 00:50:27.384: E/AndroidRuntime(870):  at weather.right.nowActivity.onCreate(nowActivity.java:37)
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-04 00:50:27.384: E/AndroidRuntime(870):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-04 00:50:27.384: E/AndroidRuntime(870):  ... 11 more
04-04 00:50:27.404: I/dalvikvm(870): threadid=7: reacting to signal 3
04-04 00:50:27.424: E/dalvikvm(870): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

I'm currently learning to build a proper Android application so I don't know what's wrong here. Do you know what's wrong?

Thanks in advance!

**EDIT**: About.java

```
package weather.right;

import weather.right.now.R;
import android.app.Activity;
import android.os.Bundle;

public class About extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.about);
    }

} 
```

**EDIT**: nowActivity.java

```
package weather.right;

// import java.util.Calendar;

import weather.right.now.R;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.LocationManager;
import android.net.Uri;
import android.os.Bundle;
// import android.view.Menu;
// import android.view.MenuInflater;
// import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class nowActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
             Toast.makeText(this, "GPS'n är aktiverad på din mobilenhet", Toast.LENGTH_SHORT).show();
        }else{
            showGPSDisabledAlertToUser();
        }

        setContentView(R.layout.about);
        Button b = (Button) findViewById(R.id.menuItem1);
        b.setOnClickListener(new View.OnClickListener() {
           public void onClick(View arg0) {
           Intent i = new Intent(nowActivity.this, About.class);
           startActivity(i);
           } 
        });
    }

    @Override
    public void onBackPressed() {
        System.exit(0);
        return;
    }
 /*
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        // Calendar c = Calendar.getInstance();
        // int year = c.get(Calendar.YEAR);

        // Handle item selection
        switch (item.getItemId())
        {
        case R.id.menuItem1:
            // Toast.makeText(nowActivity.this, "Copyright " + year + " Erik Edgren", 3000).show();
            setContentView(R.layout.about);
            return true;
        case R.id.menuItem2:
            System.exit(0);
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }
    */

    public void goToSo(View view) {
        goToUrl("http://erik-edgren.nu/weather");
        System.exit(0);
    }

    private void goToUrl(String url) {
        Uri uriUrl = Uri.parse(url);
        Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);
        startActivity(launchBrowser);
        System.exit(0);
    }

    private void showGPSDisabledAlertToUser(){
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
            alertDialogBuilder.setMessage("GPS-mottagaren är inte aktiverad på din mobil. För att tjänsten ska kunna hitta dig, måste den vara aktiverad.")
         .setCancelable(false)
         .setPositiveButton("Gå till inställningarna",
              new DialogInterface.OnClickListener(){
              public void onClick(DialogInterface dialog, int id){
                      Intent callGPSSettingIntent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                      startActivity(callGPSSettingIntent);
                      System.exit(0);
              }
         });
         alertDialogBuilder.setNegativeButton("Stäng",
              new DialogInterface.OnClickListener(){
              public void onClick(DialogInterface dialog, int id){
                   dialog.cancel();
                   System.exit(0);
              }
         });
    AlertDialog alert = alertDialogBuilder.create();
    alert.show();
    }
} 
```

**EDIT**: AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="weather.right.now"
    android:versionCode="1"
    android:versionName="1.1" >

    <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:icon="@drawable/sun_icon"
        android:label="@string/app_name" >
        <activity
            android:name="weather.right.nowActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <application
        android:icon="@drawable/sun_icon"
        android:label="@string/app_name" >
        <activity
            android:name="weather.right.About"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**EDIT**: about.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="252dp"
        android:layout_height="wrap_content"
        android:layout_margin="15dp"
        android:text="@string/about" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:04:59.060

您看到`Caused by: java.lang.NullPointerException`日志中显示的那一行了吗？正下方是那条线`at weather.right.nowActivity.onCreate(nowActivity.java:37)`

这意味着您`NullPointerException`的. 如果您双击该行，它将打开并直接将您带到引发错误的位置。所以，请记住所有这些。`37``nowActivity``Activity`

我注意到的一件事是您在方法中使用`setContentView`了两次`onCreate`。看起来你会想`about.xml`在你的`About.class`. 此外，如果您认为`Exception`抛出的问题是由您的. 引起的`Menu`，那么您应该发布该代码，因为它与您的 OP 相关。

看起来 line`37`与启动你的`About.class`. 确保您已将其标记在您的文件中`Manifest`，并且您的`Button`文件是`Layout`您用于`nowActivity`.

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="weather.right.now"
android:versionCode="1"
android:versionName="1.1" >

<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
    android:icon="@drawable/sun_icon"
    android:label="@string/app_name" >
    <activity
        android:name="weather.right.nowActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="weather.right.About"
        android:label="@string/app_name" />
</application>

</manifest> 
```

无论`Activity`您想先开始，还是将出现在应用程序抽屉中的那个，都应该包括`Intent-Filter`我发布的标签，但其他`Activities`不需要包括那些特定的标签，有些可能需要`Intent-Filter`。此外，您的所有内容都`AndroidManifest`应该放在**ONE** `<manifest></manifest>`标签和**ONE** `<application></application>`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:24:25.197

在这里查看您的代码。你有 2 次调用 setContentView 这很奇怪。我猜关于框正在尝试显示，但我只会打电话，假设你真的想要`setContentView(R.layout.main);`

现在我也猜你`NullPointerException`是因为`Button b = (Button) findViewById(R.id.menuItem1);`是空的。我认为您通过在 menu/ 文件夹中创建菜单 XML 文件来创建菜单。您真正要寻找的是`layout/main.xml`that has中的一个按钮`android:id="menuItem1"`。如果存在，它将找到它，否则它将返回 null。这段代码暗示它是从一个菜单 xml 创建的，如果是这种情况，这就是你处理它的方式。

```
// Load the menu into the activity. Add this code to the activity class.
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.example_menu, menu);
    return true;
}

// Handler for menu selections.
@Override
public boolean onOptionsItemSelected(MenuItem item) {
  switch (item.getItemId()) {

  case R.id.menuItem1: {
    // do work.
  } break;
  default:
    return super.onOptionsItemSelected(item);
  }

  return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T01:06:15.800

尝试更改此行：

```
Intent i = new Intent(nowActivity.this, About.class); 
```

为了`Intent i = new Intent(getApplicationContext(), About.class);`

如果您在片段中，请使用：

```
Intent i = new Intent(getActivity().getApplicationContext(), About.class); 
```

好的，您正在使用 View.onOnclickListerner.. 尝试删除单词 View。:) 所以它看起来像这样：

```
b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        }); 
```

并确保您的布局中有按钮 ID。注意：由于`setContentView`您使用的最后一个是：`setContentView(R.layout.about);`，因此您的按钮的 id**必须**在该布局中。

# ruby-on-rails - Rails Showing Has_Many Linked Objects Photos

> ID：10003536
> 
> 赞同：0
> 
> 时间：2012-04-04T00:54:45.570
> 
> 标签：ruby-on-rails, controller, photos

I can bring in Companies linked Events data, but am not able to bring in the photo that is linked to that event.

Company has_many Events & Event has_many Photos

**Currently my code in Company/Show looks like**

```
<% if @company.events.exists? then %>
<% @company.events.offset(1).each do |event| %>
 <li><h3><%= link_to "#{event.name}", {:controller => "events", :action => "show", :id => event.id}, :rel => "external" %></h3>
<p>By <%= event.artist %></p></li>
<%= image_tag event.photo.photo.url(:large) %>
<% end %>
<% else %>
  <p> There are no current events attached</p>
 <% end %> 
```

**Company Controller**

```
 def show
   @company = Company.find(params[:id])
 end 
```

I am using Paperclip for my Images. Any help would be much appreciated.

Code form Event Model (Keep in mind I am trying to access from Company)

```
 class Event < ActiveRecord::Base
  attr_accessible :name, :description, :artist, :starttime, :startdate, :finishdate,   :company_id, :photos_attributes
    belongs_to :company
    has_many :photos
     accepts_nested_attributes_for :photos, :allow_destroy => true, :reject_if => lambda { |a| a[:photo].blank? }
     accepts_nested_attributes_for :company

     end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:06:45.753

你错过了

```
has_attached_file :photo, :styles => {...} 
```

参与你的`Event`模型。

请参阅此[回形针的简单示例，](https://github.com/thoughtbot/paperclip/wiki/Usage)如果您仍然遇到任何问题，请在此处发布。

# ruby - How to force external gems to be loaded from vendor folder

> ID：10003543
> 
> 赞同：2
> 
> 时间：2012-04-04T00:55:23.133
> 
> 标签：ruby, gem, jruby

I'm packaging up a gem with few external dependencies (such as 'liquid', 'fastercsv', etc..), the only requirement here is that the user installing the gem doesn't have access to the net (some proxy restrictions). I put my gems inside "vendor/bundle/jruby/1.9" folder, just wondering how I can force the user to use those gems instead of downloading them from [http://rubygems.org](http://rubygems.org)?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:19:51.153

如果您真的想这样做，您可以编辑 gem 的 Gemfile 并将这些 gem 作为依赖项删除。

这意味着当用户安装您的 gem 时，他不会下载任何其他 gem。

在您的宝石中，您需要使用您的每个内部宝石。

如果您想确保获得自己的内部 gem，而不是用户系统上预先存在的 gem，您可以使用加载路径：保存它，用您自己的覆盖它，加载您的 gem，然后恢复加载路径.

# asp.net - ASP.NET requery DropDownList after filter?

> ID：10003545
> 
> 赞同：0
> 
> 时间：2012-04-04T00:55:47.797
> 
> 标签：asp.net, combobox, reload

I have 2 DropDownListboxes. both are based on a SQLDataSource control. When the value of one is changed, it acts as a filter on the other. The event fires fine, I change the filter on the SQLDataSource, but the list in the second DropDownList doesn't change.

I have been looking for an answer to this for hours and it's frustrating me greatly. It seems like it should be something simple like a requery command. The code in question is below.

```
Protected Sub DropDownList1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles DropDownList1.SelectedIndexChanged
If Me.DropDownList1.SelectedValue > 0 Then
Me.SqlDataSource2.FilterExpression = "Arcft_Make_ID = " & Me.DropDownList1.SelectedValue
Else
Me.SqlDataSource2.FilterExpression = ""
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:01:23.650

如果我没记错的话，您实际上并没有通过应用 FilterExpression 做任何事情。您仍然需要再次执行查询。[请参阅此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.filterexpression.aspx)的 MSDN 文档。顶部的相关点：“获取或设置调用 Select 方法时应用的过滤表达式。”。所以需要再次调用 Select 方法。

# javascript - javascript将包含空格的字符串传递给函数在第一个空格处被截断？

> ID：10003552
> 
> 赞同：0
> 
> 时间：2012-04-04T00:56:31.250
> 
> 标签：javascript, function, parameters, whitespace

有人可以向我解释为什么不能将包含空格的字符串作为参数传递给 javascript 函数吗？

这是我的代码，它显示了这个问题，只需将鼠标悬停在链接上，你就会看到只有“mario”显示为标题，而不是“mario and luigi”

```
 var href='mario and luigi', subject=$('div').data('subject'), 
 size=$('div').data('reviewid'), 
      src=$('div').data('itemid'), className='mini';

      function formatLink(href, subject, src, size, className){            
                if(size=='mini')
                size='height:25px; width:25px;';
                else if(size=='medium')
                size='height:40px; width:40px;';
                else if(size=='large')
                size='height:125px; width:125px;';
                else if(size=='xlarge')
                size='height:180px; width:260px;';                
            return '<a class="pjax" href='+href+' title='+subject+'><span class='+className+'><span class="image-wrap" style="position:relative; display:inline-block; background:url('+src+') no-repeat center center;'+size+'" ><img style="opacity:0;"></span></span><span title='+subject+'>'+subject+'</span></a>';
        }
var link=formatLink(href, subject, src, size, className);
$('div').html(link);
​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T00:59:49.937

`title='+subject+'`应该是`title="'+subject+'"`。需要引用属性，否则标记无效。

作为奖励，这是一个 python`format`函数的模拟，它使这样的事情变得更容易：

```
format = function(str, params) {
    return str.replace(/\{(\w+)\}/g, function($0, $1) { return params[$1] });
} 
```

用法：

```
html = format(
    '<a class="pjax" href="{href}" title="{subject}"><span class="{className}"... etc',
    {
        href: "some_link",
        subject: "mario and luigi",
        className: "foobar"
    }
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T01:01:51.163

```
return '<a class="pjax" href='+href+' title='+subject+'><span 
```

您没有在 href 属性周围加上引号，因此您的 HTML 最终成为`href=mario and luigi`. 添加引号来修复它（并对标题做同样的事情）：

```
return '<a class="pjax" href="'+href+'" title="'+subject+'"><span 
```

# php - PHP How to get a random value from array

> ID：10003557
> 
> 赞同：0
> 
> 时间：2012-04-04T00:57:13.960
> 
> 标签：php, arrays, random

i have this array

`$row4 = mysql_fetch_array($sql_res);`

can anyone help me how to get a random value of `$row4['response']`?

the `$row4` does not have constant values...
but for now `$row4` contains

```
Array ( [0] => 3 [id] => 3 [1] => where is dryad [react] => where is dryad [2] => Dryad is found in the farthest part of the Dark wilderness. [response] => Dryad is found in the farthest part of the Dark wilderness. [3] => [review] => ) 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:07:42.430

由于您的代码现在是这样，您只会收到一个查询行。该行将仅包含该行的字段值。如果您确实只是想从该单行获取随机字段值，您将使用：

```
$randomKey = array_rand($row4,1); 
```

如果您打算从查询中请求随机行，您可以通过以下两种方式之一执行此操作：

1）`array_rand`用于抓取随机行并放入`$randomRow`：

```
while($row = mysql_fetch_array($sql_res)) $rows[] = $row;
$randomRow = array_rand($rows); 
```

2）在您的查询中，您可以指定只抓取 1 个随机行而不是每个结果：

`SELECT col1 FROM tbl ORDER BY RAND() LIMIT 1;`

# objective-c - 如何切换回已经加载的 UIViewController？

> ID：10003562
> 
> 赞同：47
> 
> 时间：2012-04-04T00:58:06.780
> 
> 标签：objective-c, ios, storyboard, segue

我在情节提要上有一个视图，它有一个按钮来执行某个操作。但是，要执行此操作，用户必须登录。按钮处理程序测试用户是否已登录，如果是，则执行一个 segue，如果不是，则执行另一个 segue。NO segues 推送到登录视图控制器。还有另一个 segue 连接回第一个视图控制器，所以如果登录成功，用户可以从他们离开的地方继续。视图控制器嵌入在导航控制器中。

问题是，'return' segue 正在加载视图控制器的全新实例，而不是引用原始实例，所以我最终在内存中得到了空的界面元素和该视图控制器的 2 个副本。

我怎样才能回到视图控制器的原始实例？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-04-04T01:57:19.160

假设您使用 " `push`" 意味着您正在使用 a `UINavigationController`，那么您可以使用以下内容返回堆栈顶部。

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

或者

```
UIViewController *prevVC = [self.navigationController.viewControllers objectAtIndex:<n>];
[self.navigationController popToViewController:prevVC animated:YES]; 
```

弹出到特定级别`<n>`的级别。

或者

```
[self.navigationController popViewControllerAnimated:YES]; 
```

如果您只想弹出一层备份导航堆栈。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-05-20T21:07:20.780

与其使用 segue 返回上一个控制器，不如使用与 segue 关联的事件，而不是关闭当前视图控制器（如果 segue 是模态的）或从导航控制器中弹出它（如果 segue 是push），之前的控制器会自动显示。

例如，如果在您按下登录屏幕上的按钮时正在执行返回的模态转场，则您从情节提要中删除转场，并在与您的操作链接的按钮的触摸内部事件中删除该转场，成功登录后将会通知：

```
 [self dismissViewControllerAnimated:YES completion:nil]; 
```

在情节提要上，您将右键单击按钮并将发送事件中的触摸向上拖动到视图控制器场景的第一响应者。这将执行执行 segue 转换时执行的反向转换。您可以为此使用模态转场，无需使用导航控制器。

如果您将登录视图推送到导航控制器上，那么您必须将其从堆栈中弹出（如果返回到前一个视图）。使用其中之一：

```
 [[self navigationController] popViewControllerAnimated:YES];  // goes back to previous view
[[self navigationController] popToViewController: myViewControllerAfterLogin animated:YES]; // goes back to specific view on stack. 
[[self navigationController] popToRootViewControllerAnimated:YES]; // goes back to first view on the stack 
```

动画过渡应该与 segue 上使用的过渡类型相反，因此当您关闭视图时 curl up 会向下卷曲。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-19T16:11:55.857

如果您使用 segue 前进，那么您应该使用 unwind segue 来返回。有关如何使用展开转场的详细信息，请参阅此[技术说明 TN2298 使用展开转场](https://developer.apple.com/library/ios/technotes/tn2298/_index.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-01T12:24:12.697

malhal 是对的 - 值得点击他的链接。

代码似乎与 Apple 的示例有所不同，而且更加灵活。我有三个场景，但只有一个自定义 ViewController .m 文件。我不想要导航堆栈。对后续场景的访问是通过按钮进行的​​。我在基本视图控制器 .m 文件中添加了这一行：

```
- (IBAction)unwindForSegue:(UIStoryboardSegue *)unwindSegue towardsViewController:(UIViewController *)subsequentVC{} 
```

然后在第三个场景中，我从一个按钮控制拖动到退出图标并选择了展开动作。它现在从场景 3 退回到场景 2，而无需调用 dismissViewController 方法。

# php - 搜索表单字段的名称

> ID：10003565
> 
> 赞同：-1
> 
> 时间：2012-04-04T00:58:25.173
> 
> 标签：php

我需要获取输入字段的名称。

所有这些都以开头，`inf_custom_InvitationCode`并且在结尾处附加了一个数字。

`inf_custom_InvitationCode0`

`inf_custom_InvitationCode1`

等等。它们可能因形式而异。

如何搜索并获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:08:19.270

如果字段名为“inf_custom_InvitationCode###”并且您控制提交到表单的数据源，则最好将创建客户端表单的代码更改为将输入字段命名为“inf_custom_InvitationCode[]” （他们都可以使用相同的名称）。如果您这样做，PHP 将获取所有输入值并将它们作为单个键添加到 $_REQUEST（和 $_GET 或 $_POST））数组中，然后您可以像使用任何数组一样使用它。

否则，您[的 PHP 手册](http://www.php.net/manual/en/function.array-keys.php#106973)包含的内容类似于您想要使用的内容。

# cocoa-touch - UITableView 单元格：selectedBackgroundView 不显示 backgroundView

> ID：10003569
> 
> 赞同：2
> 
> 时间：2012-04-04T00:58:49.983
> 
> 标签：cocoa-touch, ipad, uitableview

我想设置一个单元格的 2 个完全不同的外观（和内容）。（一个被选中，一个未被选中）。

这段代码有效，但是，因为所选单元格的图像是 50% 透明的，我可以在底部看到 BackgroundView。

显然， selectedBackgroundView 提供了一种很好的方式来填充单元格，其中元素仅在被选中时可见。除了 BackgroundView 是否有其他位置来填充单元格，一个位置如何不会出现在 selectedBackgroundView 上

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  NSString *cellIdentifier = @"hello";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
  }

    UIImage *image = [UIImage imageNamed:@"listview_btn.png"];
    UIImage *imageThumb = [UIImage imageNamed:@"01_thumb.jpg"];
    UIImageView* imageView = [[UIImageView alloc] initWithImage:imageThumb];
    [imageView setFrame:CGRectMake(0, 0, 50, 67)];
    [cell setBackgroundView:[[UIImageView alloc]initWithImage:image] ];
    [cell.backgroundView addSubview:imageView];

    UIImage *imageSel = [UIImage imageNamed:@"listview_btn_on.png"];
    UIImage *imageThumbSel = [UIImage imageNamed:@"01_thumb_Sel.jpg"];
    UIImageView* imageViewSel = [[UIImageView alloc] initWithImage:imageThumbSel];
    [imageViewSel setFrame:CGRectMake(110, 0, 50, 67)];
    [cell setSelectedBackgroundView:[[UIImageView alloc]initWithImage:imageSel] ];
    [cell.selectedBackgroundView addSubview:imageViewSel]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:00:39.840

Make the selected background view opaque. Since it is always inserted above the background view, you can composite them in Photoshop or another graphics editor and use the result as the selected background view.

If you cannot afford this approach (I still highly recommend it), you can subclass `UITableViewCell` and override both `setHighlighted:animated` and `setSelected:animated` to set the background view property to nil when selected/highlighted and restore it when deselected/unhighlighted. However it is a much more involved approach, IMHO.

# google-maps - 如何计算适当的谷歌地图缩放级别

> ID：10003577
> 
> 赞同：2
> 
> 时间：2012-04-04T01:00:39.093
> 
> 标签：google-maps, zooming

我有一个棘手的问题...我正在使用谷歌地图静态 API 创建带有标记的地图图像。考虑到我要显示的两个标记的位置，我正在努力做的是计算适当的缩放级别。

我有 latitudeA、longitudeA、latitudeB、longitudeB 和中心点（简单）。有谁知道解决缩放级别的公式？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T01:05:27.300

我在 11、12 和 13 级拍摄了 3 张静态地图，并使用了谷歌地图的“地图实验室”功能，在相应的最小/最大纬度/经度标记处按住 shift 键。然后我编写了一个 Perl 程序来计算纬度/经度范围、预期值（使用我通过检查数据预测的公式）和增量（即 abs(expected - range)），应该接近于零。一旦我确信我已经尽可能接近了，我的结果如下：

```
Z11:  LatRange[0.323999]  ExpLat[ 0.324]  DeltaLat[  0.0000000000000019]
Z11:  LonRange[0.439999]  ExpLon[  0.44]  DeltaLon[  0.0000000000000023]

Z12:  LatRange[0.161999]  ExpLat[ 0.162]  DeltaLat[  0.0000000000000010]
Z12:  LonRange[0.219999]  ExpLon[  0.22]  DeltaLon[  0.0000000000000011]

Z13:  LatRange[0.081000]  ExpLat[ 0.081]  DeltaLat[  0.0000000000000031]
Z13:  LonRange[0.109999]  ExpLon[  0.11]  DeltaLon[  0.0000000000000006] 
```

我使用的公式是：

```
ExpLat = 0.162 * (2 ** (12 - Z))
ExpLon = 0.220 * (2 ** (12 - Z)) 
```

其中 ExpLat、ExpLon 是预期的纬度和经度范围，Z 是缩放级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T02:17:51.913

即使您使用的是静态地图 api，您仍然可以引用常规地图脚本文件，然后进行边界框计算：

```
map = new GMap2(document.getElementById("map"));

// Define the two corners of the bounding box
var sw = new GLatLng(59.0, 13.12); //any lat,lng pair
var ne = new GLatLng(60.35, 16.90);

var bounds = new GLatLngBounds(sw, ne);

var zoom = map.getBoundsZoomLevel(bounds)); 
```

# c - 从 float 和 double 读取文件？

> ID：10003580
> 
> 赞同：3
> 
> 时间：2012-04-04T01:01:00.700
> 
> 标签：c, floating-point, readfile

我怎样才能对浮点数和双精度进行 fscanf，因为我在单精度 (float) 和双精度 (double) 中声明了一个全局精度......所以当我运行它时，我每次转换时都必须更改它不同的类型

双 (%lf) 单 (%f)

```
fscanf(fp1,"%lf", &a[i][j]); 
```

那么有没有一种对两者都有效且无需每次都更改的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:26:02.180

自从我在 C 中进行任何编码以来已经有一段时间了，所以你可能想通过实验来确认，但是所有单精度浮点数都是有效的双精度浮点数，所以你可以在 fscanf 中使用 '%lf'，存储到临时双精度浮点数，然后使用逻辑将其分配给正确的变量。

或者，如果您使用“#define”，您可以执行以下操作：

```
#define USE_DOUBLE
#ifdef USE_DOUBLE
#define STORTYPE double
#define SCANSTRING "%lf"
#else
#define STORTYPE float
#define SCANSTRING "%f"
#endif
...
STORTYPE a[x][y];
fscanf(fp1,SCANSTRING, &a[i][j]); 
```

# ruby-on-rails - 通过 Koala::GraphCollection 进行分页

> ID：10003581
> 
> 赞同：0
> 
> 时间：2012-04-04T01:01:10.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook-graph-api, koala

我正在编写一个 Rails 函数（应该）

1.  导入所有用户 '/me/music'
2.  以 50 个为一组更详细地查找每个页面（FB 批处理 API）

导入我工作得很好。批处理与我一起将循环限制为前 50 个，但我不确定如何使用偏移量重新运行循环。这是我当前的循环：

```
Koala::Facebook::BatchOperation.instance_variable_set(:@identifier, 0)
results = @graph.batch do |batch_api|
  @music.each do |artist|
    if(i == 50)
    break
    end
    batch_api.get_object(artist["id"])
    i=i+1
  end
end 
```

显然`@music[0..50] do |artist|`不是有效的语法，所以那里没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:40:34.527

对于 googlers，这就是我解决问题的方法：

```
artist_ids = music.each do |artist|
  artist["id"]
end
Koala::Facebook::BatchOperation.instance_variable_set(:@identifier, 0)
artist_ids.in_groups_of(50) do |artists|
  i=0
  results = graph.batch do |batch_api|
    for artist in artists do
      # ((Your code))
      i=i+1
    end
  end
  results.each do |artist|
      # ((Your code))
  end
end 
```

# javascript - jQuery 宽度变化（动画）导致 Firefox/IE 中的垂直移动有什么线索吗？

> ID：10003582
> 
> 赞同：0
> 
> 时间：2012-04-04T01:01:14.850
> 
> 标签：javascript, jquery, width, shift

此处示例（查看标题）：[http ://brendonoliverlamb.com/](http://brendonoliverlamb.com/)

使用此代码：

```
 $('.flipper').wrap('<span id="tmp"></span>');
    $('#tmp').css({ width: $('.flipper').outerWidth() + 'px' });
    $('.flipper').fadeOut(500, function () {
        $(this).html(flipWords[flipperCountCurrent]);
        $('#tmp').animate({ width: $(this).outerWidth() + 'px' }, 250);
        $(this).fadeIn(500, function () {
            $(this).unwrap();
        });
    }); 
```

我遇到的问题是在动画期间翻转的单词周围的单词正在移动......

我猜这可能与淡出有关，也可能与高度变化有关，但对于我的一生，我还没有找到解决方案......

我只想让“flipper”类元素平滑地改变单词——淡出，调整宽度，使文本适合，淡入。

也找不到这个插件：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:28:33.277

我发现了几个问题。在某些浏览器中，当您切换到较长的单词时会发生自动换行，而在所有浏览器中，都会出现垂直对齐问题。可以在这里以一种更孤立的方式看到问题：http: [//jsfiddle.net/jfriend00/BSmwF/](http://jsfiddle.net/jfriend00/BSmwF/)，您可以清楚地看到只有当较长的单词替换较短的单词导致临时换行时才会发生跳转。

我还大大简化了代码，不需要包装和展开。

如果您添加这个防止自动换行并修复对齐问题的 CSS，问题就会消失：

```
.flipper {
    white-space: nowrap;
    overflow: hidden;
    vertical-align: bottom;
} 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/EgfYU/](http://jsfiddle.net/jfriend00/EgfYU/)

而且，我更改为没有包装/解包的更简单的代码并使用`fadeTo()`了，因此跨度只改变了它的不透明度，并且永远不会设置为`display: none`：

```
//Flipper
var flipWords = ["a professional", "an experienced", "an innovational", "an enthusiastic"];

//Do not edit below//
//set initial
$(".flipper").html(flipWords[0]);
var flipperCountCurrent = 0;
setTimeout(flipper, 1500);
function flipper() {

    if (flipperCountCurrent < flipWords.length - 1) {
        flipperCountCurrent += 1;
    } else {
        flipperCountCurrent = 0;
    }

    //no animation
    // $(".flipper").html(flipWords[flipperCountCurrent]);

    var flipperSpan = $('.flipper');
    var origWidth = flipperSpan.width();
    flipperSpan.fadeTo(500, 0, function () {
        flipperSpan.html(flipWords[flipperCountCurrent]).css("width", "auto");
        var newWidth = flipperSpan.width();
        flipperSpan.width(origWidth)
            .animate({ width: newWidth + 'px' }, 250)
            .fadeTo(500, 1);
    });

    setTimeout(flipper, 1500);

} 
```

请注意，我修改了计时器时间，以便在调试时更快地循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:08:46.903

我认为这可能与 jQuery在动画中的某个时间点将`span`s设置为有关。`display: block`如果你设置`.flipper {display: inline !important}`它似乎对我有用。

# java - JAXRS/Spring/CXF 端点配置中的合约细节——命名空间、PublishedUrl 等

> ID：10003583
> 
> 赞同：1
> 
> 时间：2012-04-04T01:01:15.970
> 
> 标签：java, spring, jax-rs, cxf

如何在 JAXRS 中使用端点详细信息充实我的上下文配置？

这是我对 JAXWS 的了解：

```
<jaxws:endpoint id="s-myService" implementor="#myService" 
    serviceName="s2:MyService" 
    endpointName="e2:MyServiceEndpoint"
    address="/my-service/soap/base" 
    publishedEndpointUrl="http://localhost:8080/my-service/soap/base" 
    xmlns:s2="http://localhost:8080/example-service/ns" 
    xmlns:e2="http://localhost:8080/example-service/ns"
/> 
```

如何使以下 JAXRS 端点实现相同的细节？

```
<jaxrs:server id="r-myService" 
    address="/my-service/rest/base"> 
    <jaxrs:serviceBeans> 
        <ref bean="myRestService" /> 
    </jaxrs:serviceBeans> 
    <jaxrs:providers> 
        <bean class="org.codehaus.jackson.jaxrs.JacksonJsonProvider" /> 
        <ref bean="SomethingGives"/> 
    </jaxrs:providers> 
    <jaxrs:extensionMappings> 
        <entry key="json" value="application/json" /> 
        <entry key="xml" value="application/xml" /> 
    </jaxrs:extensionMappings> 
</jaxrs:server> 
```

我真的很想看到publishedEndpointUrl 在REST 服务中得到充实。[JAXRSServerFactoryBean](http://cxf.apache.org/javadoc/latest/org/apache/cxf/jaxrs/JAXRSServerFactoryBean.html)的 API暗示它可以通过继承的字段来完成。上下文配置应该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-29T08:43:25.333

您可以将 publishedEndpointUrl 用作 jaxrs 属性的一部分。

```
<jaxrs:server id="r-myService" 
address="/my-service/rest/base" publishedEndpointUrl="http://localhost"> 
<jaxrs:serviceBeans> 
    <ref bean="myRestService" /> 
</jaxrs:serviceBeans> 
<jaxrs:providers> 
    <bean class="org.codehaus.jackson.jaxrs.JacksonJsonProvider" /> 
    <ref bean="SomethingGives"/> 
</jaxrs:providers> 
<jaxrs:extensionMappings> 
    <entry key="json" value="application/json" /> 
    <entry key="xml" value="application/xml" /> 
</jaxrs:extensionMappings> 
```

# bash - 如何在 shell 脚本的文件中单独获取扩展名？

> ID：10003585
> 
> 赞同：-1
> 
> 时间：2012-04-04T01:01:24.177
> 
> 标签：bash

我只想`tar.gz`从以下字符串中提取。

```
/root/abc/xzy/file_tar_src-5.2.8.23.tar.gz 
```

或者

```
/root/abc/xyz/file_tar_src-5.2.tar.gz 
```

或者

```
/root/abc/xyz/file_tar_src-5.tar.gz 
```

在所有这些字符串（以及更多）中，我只需要`tar.gz`如何提取它们而不关心它们中的点数。我需要得到`tar.gz`一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:11:27.053

这很棘手，因为您不希望版本号匹配。我们需要的不仅仅是普通的通配符。我们可以使用 bash 的内置`=~`正则表达式运算符来完成工作。

```
$ filename='/root/abc/xzy/file_tar_src-5.2.8.23.tar.gz'
$ [[ $filename =~ \.([^0-9]*)$ ]]
$ ext=${BASH_REMATCH[1]}
$ echo "$ext"
tar.gz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:13:06.163

我真的不明白你为什么只需要`tar.gz`：

```
$ x=/root/abc/xyz/file_tar_src-5.tar.gz
$ y=${x##*[0-9].}
$ echo $y
tar.gz 
```

或者：

```
$ x=/root/abc/xyz/file_tar_src-5.tar.gz
$ y=`echo $x | grep -o 'tar\.gz$'`
$ echo $y
tar.gz 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:59:03.373

```
$ f='/root/abc/xzy/file_tar_src-5.2.8.23.tar.gz'
$ [[ $f =~ [^.]+\.[^.]+$ ]] && echo ${BASH_REMATCH[0]}
tar.gz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T10:02:12.673

另一个关于：

```
pathname="/root/abc/xzy/file_tar_src-5.2.8.23.tar.gz"

IFS='.'                               # field separator
declare -a part=( ${pathname} )       # split into an array
ext2="${part[*]: -2}"                 # use the last 2 elements
echo -e "${ext2}" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T04:12:30.227

不确定您在寻找什么。您是否尝试确定文件是否以 结尾`tar.gz`？

```
if [[ $filename == *.tar.gz ]]
then
     echo "$filename is a gzipped compressed tar archive"
else
     echo "No, it's not"
fi 
```

您是否正在尝试查找后缀是`tar.gz`还是`tar.bz2`plain `tar`？

```
$suffix=${file##*.tar}
if [[ "$suffix" = "$file" ]]
then
    echo "Not a tar archive!"
else
    suffix="tar.$suffix"
    echo "Suffix is '$suffix'"
fi 
```

您是否对后缀感兴趣，但如果是 tar.gz，您要考虑该后缀：

```
filename='/root/abc/xzy/file_tar_src-5.2.8.23.tar.gz'
suffix=${filename##*.}   #This will be gz or whatever the suffix
rest_of_file=${filename%%.$suffix}  #This is '/root/abc/xzy/file_tar_src-5.2.8.23.tar'

# See if the rest of file has a tar suffix.
# If it does, prepend it to the current suffix
[[ $rest_of_file == *.tar ]] && suffix="tar.$suffix"

echo "The file suffix is '$suffix'" 
```

# javascript - 嵌套的 ViewModel 依赖方法不起作用

> ID：10003589
> 
> 赞同：0
> 
> 时间：2012-04-04T01:02:13.350
> 
> 标签：javascript, mvvm, kendo-ui

我正在开发一个数据审计 Web 应用程序，它有一个模型，其中包含几个由旧值、新值和当前值字段组成的字段集。当前值是一个计算字段（按 KO 术语），它使用相当简单的逻辑来决定是否应将旧值或新值用于当前值（基本上如果有新值则使用它，否则显示旧值）。整个表单中包含大约 20 个这样的字段集，我想避免`kendo.bind`单独调用所有这些字段集。

这是我希望能够做的一个例子（并且文档有点说应该有效，但没有）：

```
<div id="practiceSection">
    <div id="phoneNumber">
        <h4>Phone Number</h4>
        <span>Display Value:</span>
        <input id="displayPhoneNumber" data-bind="value: phoneNumber.DisplayValue"/><br/>
        <span>Old Value:</span>
        <input id="oldPhoneNumber" data-bind="value: phoneNumber.OldValue"/><br/>
        <span>New Value:</span>
        <input id="newPhoneNumber" data-bind="value: phoneNumber.NewValue"/><br/>
    </div>
</div>​ 
```

和javascript：

```
String.IsNullOrEmpty = function(value) {
    var isNullOrEmpty = true;
    if (value) {
        if (typeof (value) == 'string') {
            if (value.length > 0)
                isNullOrEmpty = false;
        }
    }
    return isNullOrEmpty;
}

function FieldBlock(oldValue, newValue) {
    this.OldValue = oldValue;
    this.NewValue = newValue;

    this.DisplayValue = function() {
        var newValue = this.get("NewValue");
        if (String.IsNullOrEmpty(newValue))
            return this.get("OldValue");

        return newValue;
    };
}

kendo.bind($("#practiceSection"), kendo.observable({
    phoneNumber: new FieldBlock("111-111-1111", null) 
})); 
```

[jsfiddle](http://jsfiddle.net/3v6dy/)

上面的代码导致`FieldBlock.DisplayValue`始终返回未定义。奇怪的是，如果我将`FieldBlock`对象`kendo.observable`直接传递给（而不是作为匿名对象的属性值），则依赖方法确实有效。[这是一个 jsfiddle](http://jsfiddle.net/6hjzV/2/) ，它显示了有效的方法以及我试图避免的方法。

这是预期的行为，还是我错过了一些简单的东西？我正在使用 2012.01.322 版本。

如果我没有遗漏任何东西，我可以做些什么来在 Kendo UI 中进行这项工作（请注意，我不是 js 忍者，因此不太可能编辑他们的代码）？也许有更好的方法来实现这种行为？

[希望通过将此问题[重复发布](http://www.kendoui.com/forums/framework/mvvm/nested-viewmodel-dependent-methods-don-t-work.aspx)到我信任的社区，我可能会得到更积极的回应]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:46:20.793

我最终找到了一种解决方法（它有效，但我认为这不是真正的解决方案）。也许有更多 javascript 经验的人可以提供有关如何清理它的指示。[jsfiddle](http://jsfiddle.net/3v6dy/4/)

看来问题是我的依赖方法正在返回`undefined`，因为我`this.get("oldValue")`在应该使用`this.get("phoneNumber.oldValue")`. 这似乎是一个范围界定问题。为了处理要传递给的 fieldName 部分，`get`我将其作为函数对象的参数，如下所示：

```
function FieldBlock(oldValue, newValue, fieldName) {
    this.OldValue = oldValue;
    this.NewValue = newValue;

    this.DisplayValue = function() {
        var newValue = this.get(fieldName + ".NewValue");
        if (String.IsNullOrEmpty(newValue))
            return this.get(fieldName + ".OldValue");

        return newValue;
    };
}

kendo.bind($("#practiceSection"), kendo.observable({
    phoneNumber: new FieldBlock("111-111-1111", null, "phoneNumber"),
    faxNumber: new FieldBlock("999-999-9999", null, "faxNumber")    
})); 
```

就像我说的，这看起来很脏，但确实有效。我还不太确定在需要时如何处理另一层嵌套，但至少我知道问题出在哪里。

* * *

[收到](http://www.kendoui.com/forums/framework/mvvm/nested-viewmodel-dependent-methods-don-t-work.aspx#2058265)来自 Telerik 的 Atanas 的确认，这实际上是一个错误：

> 您好，感谢您的澄清。我确认这是一个错误。当存在嵌套视图模型时，“this”上下文是错误的。在您的示例中，“this”应该是“phone”对象，但它是“viewModel”。
> 
> 我找到了一个修复程序，它将成为下一个正式版本的一部分。在此之前，您可以使用您找到的解决方法。
> 
> 感谢您报告此问题。
> 
> 问候， Telerik 团队的 Atanas Korchev

希望当其他人开始采用他们的 MVVM 解决方案时，它会得到修复。

# javascript - 在 Rails 中显示 range_field 值

> ID：10003593
> 
> 赞同：2
> 
> 时间：2012-04-04T01:02:45.993
> 
> 标签：javascript, jquery, ruby-on-rails, ruby

我有一个 range_field，允许用户在表单中选择 0 到 100。我希望能够显示 range_field 的值，但我不知道该怎么做。我对 Rails 和 javascript 非常陌生，因此我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:38:57.493

老实说，我不会使用Javascript。我在我的应用程序中使用库存 rails range_field。你可以在这里查看：

[range_field](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-range_field)

这是我的应用程序中范围字段的示例代码片段：

```
<%= range_field :thing1, :in => 0..100, :step => '.1' %> 
```

这是一个不错的小滑块，在 iOS 和 Web 上运行良好，在 Android 上看起来也不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T17:07:42.280

此代码段将允许您在滑块更改时更新标签的值（或者如果您想在页面加载时显示它，您可以将 .change 更改为 .ready）。

在表格中

```
#form.html.erb
<%= form_for Foobar.new do |f| %>
  <%= f.label :some_size, "Current Value = " %>
  <%= f.range_field :some_size, :in => 0..100, :step => 1 %>
<% end %> 
```

然后是 jQuery

```
#form.js
$("#new_foobar").change(function() { 
  $form = $(this);
  $input_value = $form.children("#foobar_some_size").val();
  $label = $form.children("#foobar_some_size").siblings("label");
  $label.text("Current Value = " + $input_value);
}) 
```

# java - 将 3D 点投影到 2D 点

> ID：10003595
> 
> 赞同：2
> 
> 时间：2012-04-04T01:02:54.250
> 
> 标签：java, 3d, projection, perspective

我知道这是一个常见问题，网络上有大量资源，这里有几个问题处理这个领域，但我找不到我真正需要的东西。所以，提前道歉，这里是：

我有一个需要转换为 2D 点的 3D 点

我有：
点位置（Px，Py，Pz）
相机位置（Cx，Cy，Cz）
相机方向（我可以控制它，但我不知道如何表示它）

我试图遵循维基百科指南 - [http://en.wikipedia.org/wiki/3D_projection#Perspective_projection](http://en.wikipedia.org/wiki/3D_projection#Perspective_projection)

我的问题是：
我应该如何表示相机方向？
如何从维基百科指南中计算 Ex、Ey、Ez 的值，即“查看器相对于显示表面的位置”
还有什么我应该知道的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:14:42.707

旧教程很棒，大部分来自 T&L 和着色器之前的日子，甚至在硬件渲染之前。从了解它们开始，即/technical/math-and-physics/3d-matrix-math-demystified-r695">http://www.gamedev.net/page/resources//technical/math-and-physics /3d-matrix-math-demystified-r695 然后继续申请相机： http: [//www.codeguru.com/cpp/misc/misc/graphics/article.php/c10123/Deriving-Projection-Matrices。 htm](http://www.codeguru.com/cpp/misc/misc/graphics/article.php/c10123/Deriving-Projection-Matrices.htm)

基本上，您平移然后围绕相机旋转整个“宇宙”。所以你有你的意思：你为相机定义一个平移（运动），然后是一个旋转矩阵。您将它们应用于任何“世界内容”，即您的观点。然后，您可以“作弊”并简单地将 x 和 y 值除以 z 以投影到 2d 平面，但您*确实*应该进行正确地校正视野的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T05:31:57.590

如果您使用[Java 绑定](http://opencv-java-tutorials.readthedocs.io/en/latest/01-installing-opencv-for-java.html)编译 Opencv，您可以使用 [Calib3d 模块]( [http://docs.opencv.org/java/2.4.4/org/opencv/calib3d/Calib3d.html#projectPoints(org. opencv.core.MatOfPoint3f](http://docs.opencv.org/java/2.4.4/org/opencv/calib3d/Calib3d.html#projectPoints(org.opencv.core.MatOfPoint3f) , org.opencv.core.Mat, org.opencv.core.Mat, org.opencv.core.Mat, org.opencv.core.MatOfDouble, org.opencv.core.MatOfPoint2f))

# iphone - 多个按钮可以有一个插座吗？

> ID：10003601
> 
> 赞同：4
> 
> 时间：2012-04-04T01:04:57.123
> 
> 标签：iphone, objective-c, xcode, uibutton, iboutlet

有没有办法将多个 UIButtons 连接到一个 IBOutlet？我想这样做，以便我可以同时禁用和更改几个按钮的 alpha 设置，而不是为我要修改的每个按钮设置一个插座。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T01:09:14.373

听起来您可能正在寻找[`IBOutletCollection`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitConstantsReference/Reference/reference.html#//apple_ref/c/macro/IBOutletCollection)（为您链接的文档）。

我还没有真正使用过它，它只能与一系列东西一起使用。但我认为这些东西（在数组中）可能是按钮。

# ruby-on-rails - 寻求构建电子商务 Rails 应用程序的指导

> ID：10003605
> 
> 赞同：3
> 
> 时间：2012-04-04T01:06:00.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, web-applications

我正在为我在 RoR 中的个人项目寻找一些指导。我使用 Michael Hartl 的在线书籍学习了 RoR，现在我正在构建一个不同的应用程序来进行自己的启发。

我的 Web 应用程序将类似于电子商务网站，除了销售产品之外，我将销售餐厅的菜单项。我已经实现了一个存储基本信息（姓名、电子邮件等）的用户资源，但我正在寻求有关餐厅资源的指导。

餐厅“展示”页面应显示餐厅名称、餐厅的一段描述、3-5 张照片、一些描述性标签以及带有菜名和价格的完整菜单。我应该如何解决这个数据库问题？我正在考虑在这里创建三个模型，如下所示：

```
class Restaurant < ActiveRecord::Base
 has_many :dishes, :through => :menus
end

class Menu < ActiveRecord::Base
 belongs_to :restaurant
end

class Dish < ActiveRecord::Base
 belongs_to :menu
 has_one :restaurant, :through :menus
end 
```

这是正确的方法吗？

我对此有两个担忧：

1) 数据库中的字符串属性限制为 255 个字符，不足以存储餐厅描述。我如何在这里进行？我想让管理员用户轻松编辑描述。

2）我如何处理图片？我做了一些搜索，有些人建议使用 CarrierWave 上传附件。有没有人有任何其他建议或替代方案？管理员用户应该可以轻松更改这些照片，并且它们应该属于餐厅。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:12:55.337

是的，这是一个很好的方法。

要在数据库表字段中存储更多文本，请使用“文本”，如下所示：

```
create_table :products do |t|
  t.string :name
  t.text :description
end 
```

是的，选择 CarrierWave。一些替代方案：

*   回形针（很好）
*   自己动手（除非你喜欢学习，否则这是个坏主意）
*   各种 JavaScript/jQuery/AJAX 上传助手（非常漂亮但更复杂）

# java - GridLayout 移除 JPanel 之间的填充

> ID：10003610
> 
> 赞同：3
> 
> 时间：2012-04-04T01:07:19.643
> 
> 标签：java, arrays, swing, jpanel, margin

我正在从事计算机科学项目，但我无法找到任何解决我的问题的方法。我正在`JPanel`通过 s 创建一个包含图像的二维数组`GridLayout`。我想删除所有面板之间的填充/边距，以便它无缝地流入单个图像。但是， setHGap 和 setVGAp 方法似乎对我没有帮助。我会很感激任何回应。谢谢你。

```
import java.awt.GridLayout;
import java.util.Map;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class MapArray {

    static JPanel[][] tiles = new JPanel[11][11];

    public MapArray() {
    }

    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = Map.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setSize(325, 300);
                GridLayout layout = new GridLayout(10, 10);
                frame.setLayout(layout);

                for (int i = 0; i < 10; i++) {
                    for (int j = 0; j < 10; j++) {
                        tiles[i][j] = new JPanel();
                        tiles[i][j].add(new JLabel(
                            createImageIcon("tile-1.png")));
                        frame.add(tiles[i][j]);
                    }
                }

                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
                frame.validate();
                frame.repaint();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T01:27:10.233

几点注意事项：

*   给每个面板一个`GridLayout`.

*   将数组长度用于循环限制。

*   尽可能重构常量。

代码：

```
import java.awt.GridLayout;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class MapArray {

    private static final int SIZE = 4;
    private static final JPanel[][] tiles = new JPanel[SIZE][SIZE];

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setLayout(new GridLayout(SIZE, SIZE));
                for (int i = 0; i < tiles.length; i++) {
                    for (int j = 0; j < tiles[0].length; j++) {
                        tiles[i][j] = new JPanel(new GridLayout());
                        tiles[i][j].add(new JLabel(
                            new ImageIcon("image.gif")));
                        frame.add(tiles[i][j]);
                    }
                }
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

# git - 如何在没有历史记录的情况下分叉 Git 存储库的子集？

> ID：10003612
> 
> 赞同：5
> 
> 时间：2012-04-04T01:07:45.887
> 
> 标签：git, github

假设我有这样的 Git 存储库：

```
git-repo/
    directory_1/
    directory_2/
    directory_3/ 
```

这有很长的历史，并且历史包含一些我不希望任何人访问的代码。我也不想释放`directory_1`。

我想发布`directory_2`and `directory_3`，但没有历史信息。展望未来，我将继续在原始存储库中进行开发，并希望使用这些更改更新发布分支。

原始存储库现在作为私有存储库托管在 GitHub 上。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:28:49.273

鉴于您的澄清，听起来此设置对您有用：

1.  使用您要共享的私有存储库的[Git 导出](https://stackoverflow.com/questions/160608/do-a-git-export-like-svn-export/163769#163769)部分创建一个新的公共存储库。
2.  要更新，请将公共存储库的内容替换为来自私有存储库的新 git 导出。

公共存储库本质上不会与私有存储库共享任何历史记录，但听起来这对您的目的可能并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:49:04.323

我将首先转到您的私人存储库的下载页面。就像是：

[**github.com/jquery/jquery/downloads**](http://github.com/jquery/jquery/downloads)

在这里，您可以简单地从当前存储库中获取没有历史记录的文件。之后，您可以创建一个新存储库，并且`git commit`仅在新存储库中您想要的文件/文件夹中。

# unix - Unix中最奇怪的错误

> ID：10003613
> 
> 赞同：0
> 
> 时间：2012-04-04T01:08:03.673
> 
> 标签：unix

甚至不知道如何解释这一点，但我连接到远程计算机并执行一个命令，该命令将各种内容输出到标准输出大约 10 分钟。（我基本上是在一个工具上运行一些实验）。在执行过程中经过一段时间后，正在输出的英文字符奇怪地变成了如下字符，并且即使在执行完成后也保持不变。下面是我在命令行中键入 echo "what the hell"，然后是结果输出。除非我使用 ssh，否则这不会发生。到底是怎么回事？

```
°┤⎽␋⎺┼02% ␊␌␤⎺ "┬␤▒├ ├␤␊ ␤␊┌┌" 
 ┬␤▒├ ├␤␊ ␤␊┌┌
°┤⎽␋⎺┼02% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:14:30.927

通常，将可能包含二进制数据的任意文本输出到终端是不安全的。它可能包括终端逃逸等。

您可以将其添加到管道中以删除除可打印的 ascii 字符之外的所有内容：

```
somecommand | tr -cd '\11\12\15\40-\176' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T01:13:38.680

您的终端不仅仅显示文本，它还响应影响终端设置的各种转义序列，这些转义序列可以更改字体、字符集、大小和其他内容。

当您输出二进制数据时，无论是故意的，还是由于某些错误（例如打印出未初始化的数组），其中一些二进制数据恰好是终端解释的特殊代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T01:15:50.223

另一个尝试的技巧是`echo``Ctrl-V``Ctrl-O`。^O 字符移出 VT100 样式终端的备用字符集。

如果这不起作用（并且所有其他答案都不起作用），请关闭您的终端并重新连接。

# php - 如何使用 PJAX？（PJAX 与 PHP？）

> ID：10003615
> 
> 赞同：11
> 
> 时间：2012-04-04T01:08:10.847
> 
> 标签：php, jquery, ajax, pushstate, pjax

我试图让 PJAX 与我的 PHP 站点一起工作，这是我正在使用的代码：

```
<script src="js/jquery.js"></script> 
<script src="js/jquery.pjax.js"></script>
    <script type="text/javascript">
        $(function(){
            // pjax
            $('ul a').pjax('section')
        })
    </script> 
```

我只是使用他们在 PJAX 演示页面上使用的代码，但将他们使用的容器 (#main) 替换为我网站的容器，即 section 标签。控制台或页面上没有错误，但它也不起作用！在我使用之前

`$(function() { $('ul a').pjax('section') });` 和

```
$('document').ready(function(){
   $('ul a').pjax('section')
}); 
```

但是，当我不使用其中任何一个而只使用 $('ul a').pjax('section') 时，我会在控制台中看到此错误：

未捕获 jquery.pjax.js 中部分的 pjax 容器（行：353）

我能得到一些帮助吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T12:29:51.040

默认情况下，pjax 期望在没有 chrome 的情况下交付新页面 - 一个 HTML 片段，将用作容器的 innerHTML。

在您的示例中，容器将是`<section>`我想的第一个标签。我不知道 pjax 是否保证它将使用与选择器匹配的第一个元素——它可能只是替换每个匹配的元素。可能最好使用 ID 选择器，例如`#main`.

无论如何，听起来您没有提供 HTML 片段，而只是提供了整个页面。这几乎违背了 pjax 的目的，但可以通过在下载的内容中指定一个片段来支持它。几乎总是这将是一个匹配将被替换的容器的选择器。

所以，假设你使用一个容器，`@id=main`你可以调用 pjax

```
$(function() { $("ul a").pjax("#main", { fragment: "#main" }); }); 
```

确保在文档加载后调用 pjax，否则容器查找将失败。

顺便说一句，切换到 pushState 辅助导航的更简单方法是使用我的[HTMLDecor](http://github.com/shogun70/HTMLDecor)项目。它要求你改变你对生成 HTML 页面的看法，但是一旦你完成了，你只需将 HTMLDecor.js 脚本添加到你的页面中，并且在适当的时候会自动使用 pushState - 不需要配置。

# visual-studio-2010 - “发布”与“调试”模式下的项目设置

> ID：10003619
> 
> 赞同：3
> 
> 时间：2012-04-04T01:08:47.780
> 
> 标签：visual-studio-2010

*在 Visual Studio 中，您可以为发布*和*调试*模式指定不同的项目属性。但是，我通常希望它们具有相同的项目属性（即相同的包含和依赖项）。有没有办法将*Debug*模式的项目属性复制到*Release*模式而不进行逐行更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:52:35.650

是的。使用属性管理器添加新的属性表，进行所需的任何更改，然后将“添加现有”添加到其他模式。

列出的工作表只是链接，当工作表在一个地方更改时，它会全部更改。继承是分层的（可能不是一个词......）从下到上移动，实际项目最后继承，最低的属性表第一个。

在项目的属性页面中（在解决方案资源管理器中右键单击项目 →*属性*）将每个以粗体显示的元素设置为*"Inherit from parent or project defaults"*，它们将自动从下一个最低属性继承属性属性管理器中的页面。

# java - 用java下载文件，如何优化带宽

> ID：10003621
> 
> 赞同：0
> 
> 时间：2012-04-04T01:08:54.207
> 
> 标签：java, optimization, download, bandwidth

对于需要承载大量负载的网络，下载可能会消耗大量带宽。我见过的大多数下载管理器都允许您选择要使用的带宽量。有没有可能用 Java 编程来做到这一点？如果是这样，它将如何实现？

*   更多信息：我已经知道如何下载文件，我只需要了解带宽管理。我正在使用 HttpURLConnection 连接到 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:15:43.650

根据用于执行网络访问的类/库，您可能能够覆盖执行实际套接字连接的函数并更改代码以便 (1) 控制从连接的另一端请求多少，（2）在请求之间设置延迟，和/或（3）限制并发连接。

如果不知道你在做什么的细节，很难给出更具体的建议。

# c# - 在 Metro App 中创建样式 BasedOn StandardStyles.xaml

> ID：10003622
> 
> 赞同：4
> 
> 时间：2012-04-04T01:08:55.730
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime

我正在创建我的第一个 WPF Metro 应用程序。我正在尝试扩展作为 Metro 应用程序一部分的样式（在 Common/StandardStyles.xaml 文件中）

我没有修改那个文件。

相反，我创建了另一个名为 AppStyles.xaml 的资源文件（在根目录中）。我在其中放置了这种样式：

```
<!-- Apply to all textblocks-->
<Style BasedOn="{StaticResource BasicTextStyle}" TargetType="TextBlock">
    <Setter Property="Margin" Value="0,10,10,0"/></Style> 
```

但是当我运行应用程序时，我得到了这个错误。

```
Cannot find a Resource with the Name/Key BasicTextStyle [Line: 17 Position: 44] 
```

难道不能这样做吗？

（顺便说一句，在整个应用程序的任何地方都没有在任何文件的第 17 行使用或定义 BasicTextStyle，所以我不知道它实际上在抱怨哪个页面。）

顺便说一下，处理错误的文件是“App.gics”，它是通用错误处理程序。

如果我删除我创建的样式，该应用程序运行良好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T01:16:01.860

我对 Metro 特定应用程序一无所知，但这应该是标准的 XAML 内容。您的 AppStyles.xaml 文件中需要这样的内容：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Common/StandardStyles.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

一旦你有了它，你可以在你的自定义 XAML 文件中引用资源。顺便说一句，您得到的错误是指 AppStyles.xaml 文件本身。

# jsf - 使用 jsf 2 时获取 f:ajax 的未知标签警告

> ID：10003625
> 
> 赞同：0
> 
> 时间：2012-04-04T01:09:07.387
> 
> 标签：jsf

我正在使用日食。在 WEB-INF/lib 文件夹中，我有以下 jars。

```
jstl-api-1.2.jar
jstl-impl-1.2.jar
myfaces-api-2.0.2.jar
myfaces-impl.2.0.2.jar 
```

我收到以下警告

```
Multiple annotations found at this line:
    - Unknown tag (f:ajax).
    - Unknown tag (f:ajax). 
```

.

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>no</title>
</head>
<body>
<f:view>
    <h:form id="form1">
        <h:commandButton value="submit" type="submit" action="#{registrationBean.storeUserId}" >
             <f:ajax render="node1" />
        </h:commandButton>
        <br>
        <h:outputText id="node1" value="#{userIdBean.userId}" style="font-weight:bold" />
    </h:form>
</f:view>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:18:25.583

在古老的`<f:ajax>`JSP 视图技术中不支持。它仅在其继任者 Facelets 中受支持。

重命名`page.jsp`并`page.xhtml`重写代码符合 Facelets 语法：

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
>
    <h:head>
        <title>no</title>
    </h:head>
    <h:body>
        <h:form id="form1">
            <h:commandButton value="submit" type="submit" action="#{registrationBean.storeUserId}" >
                 <f:ajax render="node1" />
            </h:commandButton>
            <br>
            <h:outputText id="node1" value="#{userIdBean.userId}" style="font-weight:bold" />
        </h:form>
    </h:body>
</html> 
```

在学习 JSF 2.x 时，请确保您正在阅读 JSF 2.x 资源/教程/书籍，而不是 JSF 1.x 的。

### 也可以看看：

*   [Java EE 6 教程 - Facelets 简介](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)

# perl - 从 xml-url 读取 Rss

> ID：10003626
> 
> 赞同：0
> 
> 时间：2012-04-04T01:09:11.673
> 
> 标签：perl, rss-reader

这是我的代码

```
#!usr/bin/env perl
# Setup includes
use strict;
use XML::RSS;
use LWP::Simple;
# Declare variables for URL to be parsed
my $url2parse;
# Get the command-line argument
my $arg = shift;
# Create new instance of XML::RSS
my $rss = new XML::RSS;
# Get the URL, assign it to url2parse, and then parse the RSS content
$url2parse = get($arg);
die "Could not retrieve $arg" unless $url2parse;
$rss->parse($url2parse);
# Print the channel items
foreach my $item (@{$rss->{'items'}}) {
     next unless defined($item->{'title'}) && defined($item->{'link'});
     print "<li><a href=\"$item->{'link'}\">$item->{'title'}</a><BR>\n";
} 
```

当我输入 %perl myRss.pl [http://www.nytimes.com/services/xml/rss/userland/Education.xml](http://www.nytimes.com/services/xml/rss/userland/Education.xml)时，控制台会运行一段时间并返回 **“无法检索[http://www.engadget。 com/](http://www.engadget.com/rss.xml) rss.xml 在 myRss.pl 第 14 行。”** 我的代码哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:50:28.693

好吧，输出真的说明了一切：**在 myRss.pl 第 14 行**

```
die "Could not retrieve $arg" unless $url2parse; 
```

这意味着 LWP::Simple 未能获取您提供的 URL。如果您想知道*它*失败的原因，您可能应该切换到`LWP::UserAgent`. 这样的事情应该告诉你更多：

```
use LWP::UserAgent;
sub get {
    my $url = shift;
    my $ua = LWP::UserAgent->new();
    my $res = $ua->get($url);

    die ("Could not retrieve $url: " . $res->status_line) unless($res->is_success);
    return $res->content;
} 
```

只需从您的代码中删除 LWP::Simple，您就可以使用您的“自定义 get()”子例程。

# javascript - 为什么以下代码不会更改我在 Node.js 中的对象中的属性

> ID：10003628
> 
> 赞同：0
> 
> 时间：2012-04-04T01:09:17.007
> 
> 标签：javascript, node.js

假设我设置 test2.js 如下

```
module.exports.doPrint = doPrint;

var dummy = "initial";

function doPrint(callback) {
    setInterval(function() {
        console.log(dummy);
        callback();
    }, 1000);   
} 
```

然后我有 test1.js

```
var test2 = require("./test2");
test2.doPrint(function() {
    console.log("changing");
    test2.dummy = "new value";
}); 
```

当我运行 test1.js 时，我得到以下信息

```
initial
changing
initial
changing 
```

换句话说，test2.js 中 dummy 的值永远不会更改为新值。有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:17:02.720

它不会更改值，因为`dummy`它是一个局部变量（不能从外部访问 -[模块](http://nodejs.org/api/modules.html#modules_modules)的本地变量将是私有的）。要使其工作，您可以更改`test2.js`为：

```
module.exports.doPrint = doPrint;

function doPrint(callback) {
    var that=this;
    this.dummy = "initial";
    setInterval(function() {
        console.log(that.dummy);
        callback();
    }, 1000);   
} 
```

* * *

或使用：

```
module.exports.doPrint = doPrint;
module.exports.get = get;
module.exports.set = set;

var dummy = "initial";

function get(){
    return dummy
}

function set(new_value){
    dummy=new_value;
}

function doPrint(callback) {
    setInterval(function() {
        console.log(dummy);
        callback();
    }, 1000);   
} 
```

并`test2.set("new value");`更改该值，如果您希望它是一个局部变量。

# java - 更改 SWT 表/树中的行高

> ID：10003632
> 
> 赞同：2
> 
> 时间：2012-04-04T01:09:49.597
> 
> 标签：java, tree, swt

我有一棵树，其中填充了可能有图像的 TreeItems（带有缩略图的行）。我用 MeasureItem 监听器调整了行高，一切都很好。

但是，现在我想让这种变化动态化。我检查一行是否应该有图像，如果当前列出的行中的任何行有应该显示的图像，我将行高设置为 180px，并且所有行都具有该高度。如果没有包含图像的行，则行高应为 25px。

问题是，如果在任何时候将行高设置为 180 像素，我都无法将其更改回 25 像素。我的代码看起来像这样（简化）：

```
//this check is run on each page of paginated results fetched from DB
rowHeight=25;
for(Result r : results){
    if(r.hasImage()){
        rowHeight=180;
        break;
    }
}

    // resize the row height using a MeasureItem listener
    tree.addListener(SWT.MeasureItem, new Listener() {
        public void handleEvent(Event event) {
            event.height = rowHeight;
        }
    });

    //added 'event.height=rowHeight' here just to check if it will draw as I want
    tree.addListener(SWT.EraseItem, new Listener() {
        public void handleEvent(Event event) {
            if(event.index!=ColumnType.SCREENSHOT.toIndexNum()){
                event.detail &= ~SWT.FOREGROUND;
            }
            event.height=rowHeight;
        }
    }); 
```

rowHeight 变量设置为应有的值，MeasureListener 中的“event.height”也设置为相同的值。但仍然不想降低高度。在结果的每一页上，我都用`tree.removeAll()`. 也许我应该处置并重新创建表/树（我不想这样做）？

**那么，知道该怎么做吗？**

*PS 不要混淆，我不需要行的各种高度，我知道在 Windows/Mac 下这是不可能的。我只需要一种重置高度的方法。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T14:35:22.373

树和表的问题相同。setFont 悬停什么也不做。树和表有方法 setItemHeight(int itemHeigh) 通过反射你可以调用这个方法（见[https://bugs.eclipse.org/bugs/attachment.cgi?id=220735](https://bugs.eclipse.org/bugs/attachment.cgi?id=220735)）

对于表列，您可以在调整大小的单元格上添加侦听器并通过反射调用此方法（由链接描述）：

```
TableColumn column = new TableColumn(table, SWT.CENTER, i);
column.addListener(SWT.Resize, new Listener() {
    @Override
    public void handleEvent(Event event) {
        int min = 10;
        setItemHeight(table, min);
    }
}); 
```

min - 是单元格高度的最小值；

之后，在事件 SWT.MeasureItem 的表监听器中，您可以为单元格设置必要的高度：

```
table.addListener(SWT.MeasureItem, new Listener() {
      public void handleEvent(Event event) {
        TableItem item = (TableItem)event.item;
                String text = item.getText(event.index);
        Point size = event.gc.textExtent(text);
        event.height = Math.max(event.height, size.y);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:03:35.443

我为这个错误找到了另一种解决方法。当您调整窗口（表格）的大小时，我想调整表格行的高度，因为表格单元格中的手动换行。使用 SWT shell 的以下侦听器，表格单元格适当地减少了。

```
shell.addListener(SWT.Resize, new Listener() {
    @Override
    public void handleEvent(Event event) {
        table.setFont(table.getFont());
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:04:20.137

您不能降低行高的事实是一个[已知的错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=154341)。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-06-08T15:22:55.283

[http://www.exampledepot.com/egs/javax.swing.tree/RowHeight.html](http://www.exampledepot.com/egs/javax.swing.tree/RowHeight.html)

适用于动态行高。

```
// Create tree
JTree tree = new JTree();

// All rows will be given 15 pixels of height
tree.setRowHeight(15);

// Have the row height for each row computed individually
tree.setRowHeight(0);

// If the row height is 0 and the height of a row has dynamically changed, it is     necessary
// to flush the internal cache of row heights. The following calls flush the     internal     cache.
if (tree.getRowHeight() <= 0) {
// Temporary change to non-zero height
tree.setRowHeight(1);
}
tree.setRowHeight(0); 
```

# c# - 如何将 C# 控制台应用程序移植到 Windows Phone

> ID：10003634
> 
> 赞同：1
> 
> 时间：2012-04-04T01:10:14.747
> 
> 标签：c#, silverlight, web-services, windows-phone-7

基本上，控制台应用程序使用 Web 服务，我想对 windows phone 应用程序做同样的事情。我知道 WP7 在 Web 服务方面的工作方式有所不同，我想知道这是否可能。

控制台版本使用 wp7 不允许的命名空间 System.Web.Services。我怎么能达到同样的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:35:25.473

您必须编写一个 WCF 服务并使用该服务，您可以通过控制台应用程序执行您想要执行的所有功能。

然后将该 WCF 服务引用到您的 wp7 应用程序中，您就完成了。网上有很多帮助，这里有2个。希望这会对你有所帮助。

[链接1](http://blogs.msdn.com/b/andypennell/archive/2010/09/20/using-wcf-on-windows-phone-7-walk-through.aspx)

[链接2](http://msdn.microsoft.com/en-us/gg598947)

# c# - 从字符串生成文件并发送给用户 C#

> ID：10003638
> 
> 赞同：1
> 
> 时间：2012-04-04T01:10:56.933
> 
> 标签：c#, asp.net, .net

我很难理解如何做到这一点。

我有一个通过存储过程返回的 DataTable。然后我将通过它并根据返回的信息创建一个分隔文件。

我在这里没有任何问题。

我的问题是获取我的 StringBuilder 对象并用它创建一个 CSV 文件，然后将其发送给用户下载。由于权限，我无法在服务器上创建临时文件，所以我试图在内存中完成这一切。

我想我需要用 MemoryStream 做一些事情来创建“文件”，然后用 Response 提供它，但我不确定要采取什么步骤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T01:19:17.120

```
Response.Clear();
Response.ContentType = "application/CSV";
Response.AddHeader("content-disposition", "attachment; filename=\"" + filename + ".csv\"");
Response.Write(csvBuilder.ToString());
Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:19:37.877

我很确定这个答案会让你走上正轨。

确保将 contentType 设置为文件的适当值。最有可能的 `response.ContentType = "text/plain";`

[动态设置 PDF 文件名](https://stackoverflow.com/questions/4259873/setting-pdf-file-name-dynamically)

# cakephp - 如何安装 Miles J 的 cakephp 论坛插件？

> ID：10003642
> 
> 赞同：2
> 
> 时间：2012-04-04T01:11:11.753
> 
> 标签：cakephp

我很确定这是一个蛋糕 1.3 问题 - 该插件与 2.0 不兼容

我正在尝试为论坛的 cakephp 安装 Miles J 插件，可以在这里找到：http: [//milesj.me/code/cakephp/forum](http://milesj.me/code/cakephp/forum)

不过，我正在努力学习他的教程。叹。

所以，这就是我所做的 -

1.  下载了他的插件
2.  将他的插件移动到我的 /app/plugins/forum 文件夹中（所以内容是 Config、Console...View、webroot、readme.md - 例如 /app/plugins/forum/Config）
3.  下载了 cakedc utils 插件
4.  将其移至 /app/plugins/utils 文件夹（因此其内容为 Controller、Lib、locale...license.txt、readme.md - 例如 /app/plugins/utils/Controller）
5.  从我上面链接到的那个页面完成了步骤“2”和“3” - 其中“2”以：“论坛插件旨在与外部用户交互......”和“3”开头：“管理路由必须在 app/config/core.php 中启用。”
6.  现在它变得令人困惑。他写了一些关于某种安装程序的文章……最后两个步骤不是安装步骤吗？他们是分开的吗？我不知道！无论如何，我去运行他的“蛋糕”命令，我得到一个错误〜“蛋糕找不到”
7.  导航到：/cake_install/cake/console（当然，“cake_install”是我的蛋糕文件夹的基本路径）
8.  运行 cake 命令……但这次我完全不确定 Miles 所写的“/path/to/app”是什么意思。它是插件的路径（这对我来说很有意义）还是 cake_install 文件夹的路径（我的意思是，我已经*在*里面了，似乎有点多余）。
9.  尝试这两个 - 每次我收到“错误：无法加载类 InstallShell”。错误，这不是很有用。

关于我接下来应该做什么的任何想法？我不介意手动安装，但我在正确的轨道上吗？步骤“2”和“3”应该在哪里运行？有什么更简单的方法可以让这个东西正常工作吗？

如果您不知道，有人可以推荐一个简单的论坛插件/工具/我可以购买的东西，我可以使用吗？我现在并不特别依赖这个论坛插件......

干杯！

奖励问题：在步骤“3”结束时，Miles 很有帮助地建议：“在您的 app/tmp 文件夹中创建一个“论坛”文件夹并将其更改为 777 也是一个好主意。”

一切都很好，但我*只*需要制作一个论坛文件夹，还是我需要告诉 cakephp 使用它？为什么制作论坛文件夹是个好主意？我是不是该？如果我不这样做会怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:42:45.547

首先，您似乎混淆了蛋糕 1.3 和 2.0。请阅读文档和教程。像这样的插件在 2.0 中的正确路径是 /APP/Plugin/PluginName/... （还要注意非常重要的大小写）。

正如您已经指出的那样，论坛插件是一个“插件”。因此它需要一个周围的应用程序（应用程序）才能工作。如果您将其命名为“站点”，则您的论坛将在`/site/Plugin/Forum/`

那么你应该`/site`用你的shell导航到这个文件夹并在那里执行`cake`命令。还要确保在引导程序中通过 CakePlugin::loadAll() 加载了插件。然后它会找到插件外壳。

2.0 文档可以在这里找到：http: [//book.cakephp.org/2.0/en/](http://book.cakephp.org/2.0/en/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:18:48.443

这是另一个可以帮助您运行 shell 命令的线程。 [在 cakephp 2.0 中运行插件的外壳](https://stackoverflow.com/questions/6979442/run-plugins-shell-in-cakephp-2-0)

您将运行的命令将类似于 C:\xampp\htdocs\mysite\app> ..\lib\Cake\Console\cake Forum.install

# javascript - 对象值 undefined 和 NaN

> ID：10003646
> 
> 赞同：-1
> 
> 时间：2012-04-04T01:11:31.017
> 
> 标签：javascript

我有一个创建值对象的函数，但我在控制台日志中得到了这个：

```
 x: Array[4]
 0: undefined
 1: NaN
 2: undefined
 3: NaN
 length: 4
 y: Array[4]
 0: undefined
 1: NaN
 2: undefined
 3: NaN
 length: 4 
```

该函数在一个由 json 编码的 PHP 文件创建的对象上循环：

```
 var sdata = {"4":{"7":["1","7","2","2"]},"3":{"3":["2","8","1","1"]}}; 
```

我的功能是：

```
function populate_collisions(){
gcollision = { 
    x: [],
    y: []    
    };

for(var key in sdata){
    gcollision.x.push( sdata[key][0] );
    gcollision.x.push( sdata[key][0] + (sdata[key][2]-1) );
    gcollision.y.push( sdata[key][1] );
    gcollision.y.push( sdata[key][1] + (sdata[key][3]-1) );
}
console.log(gcollision);
} 
```

我很想知道为什么我得到 undefined 和 NaN？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:23:16.457

您的“对象/数组混合”是 3D（3 级深度）。

```
var sdata = {
    "4": {                       
        "7": ["1", "7", "2", "2"]
    },
    "3": {
        "3": ["2", "8", "1", "1"]
    }
}; 
```

在第一个项目中，你有键“4”，然后在它下面，一个键“7”，然后是你的数组。[你缺少一个额外的循环](http://jsfiddle.net/Qjg8L/)：

```
function populate_collisions() {
    gcollision = {
        x: [],
        y: []
    };

    for (var key in sdata) {
        for (var keyTwo in sdata[key]) {
            gcollision.x.push(sdata[key][keyTwo][0]);
            gcollision.x.push(sdata[key][keyTwo][0] + (sdata[key][keyTwo][2] - 1));
            gcollision.y.push(sdata[key][keyTwo][1]);
            gcollision.y.push(sdata[key][keyTwo][1] + (sdata[key][keyTwo][3] - 1));

        }
    }
    console.log(gcollision);
} 
```

# python - 每次更新网格中每个单元格的值需要太多时间。（蚂蚁，AIChallenge.org）

> ID：10003659
> 
> 赞同：2
> 
> 时间：2012-04-04T01:12:08.427
> 
> 标签：python, breadth-first-search

上周我偶然发现了 aichallenge.org，我认为这款“蚂蚁”游戏是学习 Python 和学习 AI 编码的好方法。

游戏是一个 (x,y) 网格，最多可以包含一只蚂蚁。瓷砖可以表示为土地或水，这是不可逾越的。

我的 AI 做得很好，通过广度优先搜索算法派蚂蚁去收集食物，并使用 A* 寻路攻击敌人的山丘。

但是，我尝试实现的探索算法花费了太多时间，大约 700 毫秒。我的 AI 每转只允许 500 毫秒，这意味着它被取消资格。

为了进行探索，我想为每个图块分配一个“ExploreValue”。这个值在游戏开始时从 0 开始，每转一圈增加 1 块隐藏在战争迷雾下。当瓷砖可见时，我希望将探索值重置为 0。每只蚂蚁的视线半径为 10 个方格。

首先，我对每只蚂蚁进行广度优先搜索，将图块标记为“可见”。每只蚂蚁大约需要 10 毫秒。之后，我遍历地图上的每个图块以更新它们的“ExploreValue”。如果它们被标记为可见，则该值将重置为 0，否则将其增加 1。

在必须约为 100x100 的地图上，这需要半秒多的时间。

这是代码，你认为我能做些什么来让它运行得更快？我已经将我的列表转换为集合，因为它们应该更快。

def do_setup 在游戏开始时运行一次，def do_turn 在游戏中每回合运行一次。

```
def do_setup(self, ants):
  self.tile_visible = set() 

  self.explorevalue = {}  
  for row in range(ants.rows):
     for col in range(ants.cols):
        self.explorevalue[(row, col)]=0

def do_turn(self, ants):
    self.tile_visible = [] # empty visible list

#Define visible tiles set:
    ants_tiles_scan_distance=10

    for ant in ants.my_ants(): #start bfs of length ants_tiles_can_distance
        tiles_dist = {} #dict visited tiles
        tiles_from = {} #dict previous tiles
        from_nodes=[]
        from_nodes.append(ant)
        to_nodes=[]
        close_friends_count[ant]=0

        steps=1
        while (steps<=ants_tiles_scan_distance and len(from_nodes)>=1):
            for from_node in from_nodes:
                for new_loc in ants.tiles_voisins[(from_node)]:

                    if (new_loc not in tiles_dist):
                        tiles_dist[new_loc]=steps
                        to_nodes.append(new_loc)

                        if new_loc not in self.tile_visible:
                            self.tile_visible.append(new_loc)

            from_nodes=to_nodes
            to_nodes=[]
            steps=steps+1

#Update ExploreValues : 
    for tile in self.explorevalue.keys() :
        if (tile in self.tile_visible):
            self.explorevalue[tile]=0
        else:
            self.explorevalue[tile]=self.explorevalue[tile]+1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:27:49.587

[这里](http://forums.aichallenge.org/viewtopic.php?f=24&t=2077)提到的普通 python 有一些更快的替代品，例如[Cython](http://cython.org/)和[pypy](http://pypy.org/)。

我个人在 AI Challenge 中使用 Cython 来加速我的部分代码。您不必进行太多更改，它可以为您提供显着的速度提升。[这里](http://docs.cython.org/src/userguide/tutorial.html)有一个很好的 Cython 介绍。

更新：

如果您在查找哪些图块可见时遇到问题，我建议您查看[此入门包](http://forums.aichallenge.org/viewtopic.php?f=25&t=1663)。它有一个显示可见图块的 2d numpy 数组。

# string - 在 iOS5 中创建 JSONObject

> ID：10003661
> 
> 赞同：0
> 
> 时间：2012-04-04T01:12:16.590
> 
> 标签：string, json, ios5, nsstring, nsobject

[这个答案](https://stackoverflow.com/a/8356946/209512)似乎展示了如何制作 JSONObject。

```
NSString *jsonString = @"[{\"id\": \"1\", \"name\":\"Aaa\"}, {\"id\": \"2\", \"name\":\"Bbb\"}]";
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError *e = nil;
NSMutableArray *json = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&e];
NSLog(@"%@", json); 
```

输出看起来像一个 json 对象。但后来我尝试了以下方法：

```
NSLog(@"%@", [NSJSONSerialization dataWithJSONObject:json options:NSJSONWritingPrettyPrinted error:nil ]); 
```

我得到的是

> <5b0a2020 7b0a2020 20202269 6422203a 20223122 2c0a2020 2020226e 616d6522 203a2022 41616122 0a20207d 2c0a2020 7b0a2020 20202269 6422203a 20223222 2c0a2020 2020226e 616d6522 203a2022 42626222 0a20207d 0a5d>

这似乎表明它不是真正的 JSONObject。你怎么做一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:17:51.263

它*可能*是一个真正的 JSONObject，但 NSLog 不知道如何显示原始数据...... `"%@"`NSLog 中的位需要一个带有编码的 NSString，而不是 NSData。

有两种方法可以让我从头顶上看出事情是否顺利。

#1) 使用[`[isValidJSONObject:]`](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/occ/clm/NSJSONSerialization/isValidJSONObject%3a)方法

或者

#2) 重新解析您刚刚创建的 JSON 对象，看看它是否以您创建它的方式出现。您可以通过执行以下操作打印出 NSData：

```
NSError * error = nil;
NSData * jsonData = [NSJSONSerialization dataWithJSONObject:json options:NSJSONWritingPrettyPrinted error:&error ];
if(jsonData == nil)
{
    NSLog( @"error in parsing json data is %@", [error localizedDescription] );
} else {
    NSString * jsonString = [[NSString alloc] initWithData: jsonData encoding: NSUTF8StringEncoding];    
    NSLog( "json data is %@", jsonString );
} 
```

# php - 字体不显示某些字符

> ID：10003664
> 
> 赞同：0
> 
> 时间：2012-04-04T01:12:42.920
> 
> 标签：php, mysql, html, font-face

[我正在开发的网站](http://auto-sal.es)上使用自定义字体，并且没有显示一些基本字符。似乎是什么问题？

另外我正在从 MYSQL 获取内容。

![字体字符](../Images/56eff87d165f8fa985f0a23100d0b2c4.png)

字体不好吗？

```
@font-face {font-family: Cabin_Regular; src: url('fonts/Cabin_Regular.ttf');}
@font-face {font-family: Lobster; src: url('fonts/Lobster.ttf');}
body, select, input, textarea {font-family: 'Cabin_Regular';color:white;font-size: 16px;text-shadow: 0.1em 0.1em 0.2em black;}
h1, h2, h3, h4, h5, h6 {font-family: 'Lobster'; margin-bottom: 0;padding-bottom: 0;margin-top: 0; padding-top: 0;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:15:11.457

首先检查字符是否被编码，例如版权符号应该`&copy;`在数据库中。

其次检查字体是否甚至支持某些字体没有您想要的所有字形的字符。角色应该是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:20:00.830

检查 MySQL 数据库中的编码。如果不是 UTF-8，你会遇到问题

如果不是 UTF-8，请在连接到数据库并即将执行查询后使用以下内容

> ```
> mysql_set_charset('utf8',$database_Connection); 
> ```

还要确保您的`<head>`html 文档中定义了字符集

> ```
> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
> ```

...实际上，在使用设置为 Latin1 的客户数据库时，我自己也遇到过这个问题。第一次弄清楚真的很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T01:19:05.497

这几乎可以肯定是一个编码问题。有关一些解决方案，请参阅[http://ask.metafilter.com/mefi/28045](http://ask.metafilter.com/mefi/28045)。

澄清一下，所有东西（PHP、MySQL，甚至它们彼此的连接）都需要以相同的编码进行通信，否则相同的实体将呈现不同的呈现方式。标准是 utf-8，但重要的问题不是真正使用哪个，而是统一使用。在上面的链接中有关于如何在同一页面上获取所有内容的很好的建议。

# java - Android AsyncTask 将文件下载为目录

> ID：10003665
> 
> 赞同：1
> 
> 时间：2012-04-04T01:12:45.527
> 
> 标签：java, android, android-asynctask

我正在尝试下载一个文件，但它作为一个目录下载它，我不确定问题是什么。我在其他项目中使用 ive 的课程没有问题。

outfile 是输出目录的完整路径，/mnt/sdcard/file.ext

```
public class DownloadFile {
    String outfile;
    String zipfile;
    Context c;
    Notification notification;
    NotificationManager notificationManager;
    ProgressBar progressBar;
    private int progress = 10;
    public DownloadFile(String url, String out, String zip, Context ctx) {        
        c = ctx;
        zipfile = zip;
        outfile = out;

        notificationManager = (NotificationManager) c.getSystemService(
                c.NOTIFICATION_SERVICE);

        new Download().execute(url);
    }

    private class Download extends AsyncTask<String, Integer, String>{
        @Override
        protected String doInBackground(String... urls) {
            int count;
            try {
                URL url = new URL(urls[0]);
                URLConnection conexion = url.openConnection();
                conexion.connect();
                int lenghtOfFile = conexion.getContentLength();

                InputStream input = new BufferedInputStream(url.openStream());
                //LINE 55 is below
                OutputStream output = new FileOutputStream(outfile);

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    publishProgress((int)(total*100/lenghtOfFile));
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
            return zipfile;
        }

        protected void onPreExecute() {                     
            Intent intent = new Intent(c, DownloadFile.class);
            final PendingIntent pendingIntent = PendingIntent.getActivity(c, 0, intent, 0);

            notification = new Notification(R.drawable.ic_launcher, "simulating a download", System
                    .currentTimeMillis());
            notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
            notification.contentView = new RemoteViews(c.getPackageName(), R.layout.download_progress);
            notification.contentIntent = pendingIntent;
            notification.contentView.setImageViewResource(R.id.status_icon, R.drawable.ic_launcher);
            notification.contentView.setTextViewText(R.id.status_text, "simulation in progress");
            notification.contentView.setProgressBar(R.id.status_progress, 100, progress, false);

            notificationManager.notify(42, notification);
        }       

        protected void onProgressUpdate(Integer... args){
            notification.contentView.setProgressBar(R.id.status_progress, 100, args[0], false);         
        }

        protected void onPostExecute(String f) {
            Toast.makeText(c, "DONE WITH "+f, 9965454).show();
            notificationManager.cancel(42);
        }
    }
} 
```

这是它抛出的错误。

```
W/System.err(15992): java.io.FileNotFoundException: /mnt/sdcard/t3hh4xx0r/romCrawler/imoseyon_leanKernel_v1.9.0gnexus.zip: open failed: EISDIR (Is a directory)
W/System.err(15992):    at libcore.io.IoBridge.open(IoBridge.java:406)
W/System.err(15992):    at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
W/System.err(15992):    at java.io.FileOutputStream.<init>(FileOutputStream.java:128)
W/System.err(15992):    at java.io.FileOutputStream.<init>(FileOutputStream.java:117)
W/System.err(15992):    at com.t3hh4xx0r.romcrawler.DownloadFile$Download.doInBackground(DownloadFile.java:55)
W/System.err(15992):    at com.t3hh4xx0r.romcrawler.DownloadFile$Download.doInBackground(DownloadFile.java:1)
W/System.err(15992):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
W/System.err(15992):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
W/System.err(15992):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
W/System.err(15992):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
W/System.err(15992):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
W/System.err(15992):    at java.lang.Thread.run(Thread.java:856)
W/System.err(15992): Caused by: libcore.io.ErrnoException: open failed: EISDIR (Is a directory)
W/System.err(15992):    at libcore.io.Posix.open(Native Method)
W/System.err(15992):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
W/System.err(15992):    at libcore.io.IoBridge.open(IoBridge.java:390)
W/System.err(15992):    ... 11 more 
```

为什么它试图将文件下载为目录？

**编辑** 有关该问题的更多信息，错误中列出的`/mnt/sdcard/t3hh4xx0r/romCrawler/imoseyon_leanKernel_v1.9.0gnexus.zip`路径是我尝试下载的文件的路径和文件名。但是，它不会下载，而是创建一个具有该名称的文件夹。我的 SD 卡上有一个文件夹，`imoseyon_leanKernel_v1.9.0gnexus.zip`名为``/mnt/sdcard/t3hh4xx0r/romCrawler/`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T16:57:25.177

您必须确保没有同名的目录。我有一个类似的问题。就我而言，它是由`File.mkdirs()`.

我会尝试在创建之前删除目录`FileOutputStream`：

```
new File(outfile).delete(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:32:19.060

通向您尝试下载文件的位置的所有文件夹是否存在？FileOutputStream 不创建文件夹，只创建文件，并且仅当指向该文件的路径存在时。

# php - 检索PHP 中的所有标签

> ID：10003671
> 
> 赞同：0
> 
> 时间：2012-04-04T01:13:09.783
> 
> 标签：php, regex

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:28:02.810

试试正则表达式

```
$regex = '/(<a href="([^"]+)\.jpg")[^>]*>/iU'; 
```

并替换为 '\1>'。

笔记：

*   删除了 "; 前面的转义符，没有必要（尽管您可以根据需要将它们留在里面，但这并没有什么不同）
*   `\.jpg`在最后一个之前添加了一个显式，`"`以仅匹配以 . 结尾的链接`.jpg`。您可能会考虑`\.jpe?g`允许“.jpeg”和“.jpg”（尽管前者并不常见）
*   `[^>]*`在第一个之前添加了`>`一个`<a href=...>`以允许可选的额外属性，例如`name="asdf"`
*   在位周围添加了捕获括号，`(<a href="xxx")`以便我可以*替换*为`\1>`（因此去除了所有额外的属性）。

**重新生成正则表达式的工具**，我不知道任何*生成*正则表达式的工具。我认为你最好的选择是自己学习正则表达式，然后使用交互式测试器快速开发它。

我强烈推荐[regexr.com](http://regexr.com?30hra)。

如果你点击那个链接，你会看到我输入的正则表达式和一些测试数据。

然后您可以使用正则表达式并实时查看结果——这对正则表达式的快速开发非常有帮助。

（虽然，regexr.com 不提供不贪婪的“U”标签；只需在正则表达式中将所有转换`+`为`+?`和`*`转换`*?`以模拟这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:23:13.077

我不知道你到底在使用这个正则表达式是为了什么，但我认为这应该适合你：

```
$your_string = '<a href="http://site.com/folder/img1.jpg" name="test">';
preg_match('@<a href="(.*?)".*?>(.*<\/a>)?@', $your_string, $matches);

print_r($matches) // Array ( [0] => http://site.com/folder/img1.jpg ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T01:24:24.500

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T11:05:26.937

这将做你想做的事，也许与你期望的不同......

```
<?php
// set up to parse our input
$dom = new DOMDocument();
$dom->loadHTMLFile("input.html");
$xpath = new DOMXPath($dom);

$anchors = $xpath->query("//a[contains(@href, 'http') and contains(@href, '.jpg')]");

foreach ($anchors as $anchor) {
  echo $anchor->C14N() . "\n";
}
?> 
```

# c# - C# 编译器 /optimize 命令行选项会影响 JITter 吗？

> ID：10003672
> 
> 赞同：5
> 
> 时间：2012-04-04T01:13:11.037
> 
> 标签：c#, compilation

我一直在阅读[Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert)关于 C# 编译器的 /optimize 命令行选项的文章[。](http://blogs.msdn.com/b/ericlippert/archive/2009/06/11/what-does-the-optimize-switch-do.aspx)这篇文章描述了编译器执行了什么样的优化。但是，我仍不清楚此选项是否也会影响 JIT 优化。并非不可想象，此选项会使编译器发出一些元数据，抖动可以理解以更改“优化模式”。如果此选项确实影响 JITter，是否有任何参考可以确认或以其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T02:40:45.650

> 如果此选项确实影响 JITter，是否有任何参考可以确认或以其他方式？

根据 Jeffrey Richter 在他的 CLR via C# book, 3rd edition（第 1 章，第 13 页）中的说法，确实如此。该`/optimize+`开关将优化 C# IL 代码以及 JIT 编译器生成的本机代码。至于它实际上是*如何*做到的，我不确定。我的疯狂猜测是它可能与[CorDebugJITCompilerFlags](http://msdn.microsoft.com/en-us/library/ms232499%28v=vs.90%29.aspx)枚举有关。

# javascript - 如何从 JavaScript 中的字符串中提取数字？

> ID：10003683
> 
> 赞同：462
> 
> 时间：2012-04-04T01:14:18.680
> 
> 标签：javascript, regex, string, numbers

我在 JavaScript 中有一个字符串（例如`#box2`），我只想要`2`它。

我试过：

```
var thestring = $(this).attr('href');
var thenum = thestring.replace( /(^.+)(\w\d+\w)(.+$)/i,'$2');
alert(thenum); 
```

它仍然`#box2`在警报中返回，我怎样才能让它工作？

它需要适应末尾附加的任何长度数字。

* * *

## 回答 #1

> 赞同：745
> 
> 时间：2012-04-04T01:16:33.743

对于这个具体的例子，

```
 var thenum = thestring.replace( /^\D+/g, ''); // replace all leading non-digits with nothing 
```

在一般情况下：

```
 thenum = "foo3bar5".match(/\d+/)[0] // "3" 
```

由于这个答案由于某种原因而广受欢迎，这里有一个好处：正则表达式生成器。

```
function getre(str, num) {
  if(str === num) return 'nice try';
  var res = [/^\D+/g,/\D+$/g,/^\D+|\D+$/g,/\D+/g,/\D.*/g, /.*\D/g,/^\D+|\D.*$/g,/.*\D(?=\d)|\D+$/g];
  for(var i = 0; i < res.length; i++)
    if(str.replace(res[i], '') === num) 
      return 'num = str.replace(/' + res[i].source + '/g, "")';
  return 'no idea';
};
function update() {
  $ = function(x) { return document.getElementById(x) };
  var re = getre($('str').value, $('num').value);
  $('re').innerHTML = 'Numex speaks: <code>' + re + '</code>';
}
```

```
<p>Hi, I'm Numex, the Number Extractor Oracle.
<p>What is your string? <input id="str" value="42abc"></p>
<p>What number do you want to extract? <input id="num" value="42"></p>
<p><button onclick="update()">Insert Coin</button></p>
<p id="re"></p>
```

* * *

## 回答 #2

> 赞同：279
> 
> 时间：2013-01-04T20:37:38.267

您应该尝试以下方法：

```
var txt = "#div-name-1234-characteristic:561613213213";
var numb = txt.match(/\d/g);
numb = numb.join("");
alert (numb);​ 
```

结果

```
1234561613213213 
```

* * *

## 回答 #3

> 赞同：142
> 
> 时间：2013-10-21T13:47:31.350

我认为这个正则表达式将满足您的目的：

```
var num = txt.replace(/[^0-9]/g,''); 
```

`txt`你的字符串在哪里。

它基本上撕掉了任何不是数字的东西。

我认为您也可以通过使用它来实现相同的目标：

```
var num = txt.replace(/\D/g,''); 
```

* * *

## 回答 #4

> 赞同：74
> 
> 时间：2015-06-12T05:12:10.693

尝试以下操作：`string.replace(/[^0-9]/g, '');`这将删除所有非数字字符，只在字符串中留下数字

```
function retnum(str) { 
    var num = str.replace(/[^0-9]/g, ''); 
    return parseInt(num,10); 
} 
```

```
console.log('abca12bc45qw'.replace(/[^0-9]/g, ''));
console.log('#box2'.replace(/[^0-9]/g, ''));
```

* * *

## 回答 #5

> 赞同：57
> 
> 时间：2012-04-04T01:19:24.403

使用匹配功能。

```
var thenum = "0a1bbb2".match(/\d+$/)[0];
console.log(thenum);
```

* * *

## 回答 #6

> 赞同：40
> 
> 时间：2015-12-16T11:56:34.197

这是一个使用货币和格式提取价格的片段：

```
var price = "£1,739.12";
parseFloat(price.replace( /[^\d\.]*/g, '')); // 1739.12 
```

* * *

## 回答 #7

> 赞同：34
> 
> 时间：2014-01-28T16:12:10.300

**用这个代码尝试了上面引用的所有组合**并让它工作，是唯一一个在那个字符串上工作的组合 - >`(12) 3456-7890`

```
var str="(12) 3456-7890";
str.replace( /\D+/g, ''); 
```

**结果：** `"1234567890"`

**Obs：**我知道这样的字符串不会出现在 attr 上，但无论如何，解决方案更好，因为它更完整。

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2014-05-14T09:05:11.830

你可以使用很棒的 parseInt 方法

它将前导数字转换为数字

```
parseInt("-10px");
// will give you -10 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2020-04-24T13:41:24.877

您可以使用正则表达式从字符串中提取数字：

```
let string = "xxfdx25y93.34xxd73";
let res = string.replace(/\D/g, "");
console.log(res); 
```

输出：25933473

将其包装成 vanilla javascript 函数：

```
function onlyNumbers(text){
    return text.replace(/\D/g, "");
} 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2012-04-04T01:19:22.797

对于诸如 之类的字符串`#box2`，这应该有效：

```
var thenum = thestring.replace(/^.*?(\d+).*/,'$1'); 
```

jsFiddle：

*   [http://jsfiddle.net/dmeku/](http://jsfiddle.net/dmeku/)

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2020-05-28T05:01:02.987

```
function justNumbers(string) 
{
   var numsStr = string.replace(/[^0-9]/g,'');
   return parseInt(numsStr);
}

console.log(justNumbers('abcdefg12hijklmnop'));
```

你可以做这样的功能

```
function justNumbers(string) 
    {
        var numsStr = string.replace(/[^0-9]/g,'');
        return parseInt(numsStr);
    } 
```

请记住：如果数字前面有零，则 int 不会有它

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-04-04T01:20:33.073

您可以使用正则表达式。

```
var txt="some text 2";
var numb = txt.match(/\d/g);
alert (numb); 
```

这将提醒 2。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2021-04-13T20:52:47.477

如果您想解析价格为 6,694.20 美元的数字。
可以这样做：

```
parseFloat('$6,694.20'.replace( /^\D|,+/g, '')) 
```

或通过功能：

```
function parsePrice(value) {
  return parseFloat(value.replace( /^\D|,+/g, ''))
}
parsePrice('$6,694.20') // 6694.2 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-05-07T14:38:44.847

您可以使用下划线字符串库如下

```
var common="#box"
var href="#box1"

_(href).strRight(common) 
```

结果将是：1

请参阅：[https ://github.com/epeli/underscore.string](https://github.com/epeli/underscore.string)

**演示： http:**
[//jsfiddle.net/abdennour/Vyqtt/](http://jsfiddle.net/abdennour/Vyqtt/)
**HTML 代码：**

```
<p>
    <a href="#box1" >img1</a>
    <a href="#box2" >img2</a>
    <a href="#box3" >img3</a>
    <a href="#box4" >img4</a>
</p>
<div style="font-size:30px"></div> 
```

**JS代码：**

```
var comm="#box"
$('a').click(function(){
  $('div').html(_($(this).attr('href')).strRight(comm))}) 
```

如果你有如下后缀：

```
href="box1az" 
```

您可以使用下一个演示：

[http://jsfiddle.net/abdennour/Vyqtt/1/](http://jsfiddle.net/abdennour/Vyqtt/1/)

```
function retrieveNumber(all,prefix,suffix){
 var left=_(all).strRight(prefix);
 return _(left).strLeft(suffix);

} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-07-15T18:07:42.760

使用**正则表达式**，如何从字符串中获取数字，例如：

```
String myString = "my 2 first gifts were made by my 4 brothers";
myString = myString .replaceAll("\\D+","");
System.out.println("myString : " + myString); 
```

结果`myString`是“ `24`”

您可以在此处查看此运行代码的示例：http: **[//ideone.com/iOCf5G](http://ideone.com/iOCf5G)**

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2015-07-31T23:00:29.777

这是一个解决方案。不检查数据

```
var someStr = 'abc'; // add 123 to string to see inverse

var thenum = someStr.match(/\d+/);

if (thenum != null )
{
    console.log(thenum[0]);
}
else
{
 console.log('no number');
} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-10-21T00:50:34.527

如果有人需要在提取的数字中保留点：

```
var some = '65,87 EUR';
var number = some.replace(",",".").replace(/[^0-9&.]/g,'');
console.log(number); // returns 65.87 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-10-08T12:32:15.300

使用此单行代码获取字符串中的第一个数字而不会出错：

```
var myInt = parseInt(myString.replace(/^[^0-9]+/, ''), 10); 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2017-04-20T04:43:03.230

请检查下面的javaScripts，在那里你只能得到数字

```
var txt = "abc1234char5678#!9";
var str = txt.match(/\d+/g, "")+'';
var s = str.split(',').join('');
alert(Number(s));
```

输出 ：`1234567789`

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2019-06-16T09:30:16.087

```
var elValue     = "-12,erer3  4,-990.234sdsd";

var isNegetive = false;
if(elValue.indexOf("-")==0) isNegetive=true;

elValue     = elValue.replace( /[^\d\.]*/g, '');
elValue     = isNaN(Number(elValue)) ? 0 : Number(elValue);

if(isNegetive) elValue = 0 - elValue;

alert(elValue); //-1234990.234 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-02-05T07:45:05.743

**这个答案将涵盖大部分情况。当用户尝试复制粘贴电话号码时，我可以遇到这种情况**

```
 $('#help_number').keyup(function(){
    $(this).val().match(/\d+/g).join("")
  }); 
```

**解释：**

```
str= "34%^gd 5-67 6-6ds"

str.match(/\d+/g) 
```

> 它将给出一个字符串数组作为输出 >> ["34", "56766"]

```
str.match(/\d+/g).join("") 
```

join 会将数组数据转换并连接成单个字符串

> 输出>>“3456766”
> 
> 在我的示例中，我需要输出为 209-356-6788 所以我使用了替换

```
 $('#help_number').keyup(function(){
    $(this).val($(this).val().match(/\d+/g).join("").replace(/(\d{3})\-?(\d{3})\-?(\d{4})/,'$1-$2-$3'))
  }); 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-07-08T02:07:28.030

您需要添加 "(/\d+/g)" 这将删除所有非数字文本，但此时它仍然是一个字符串。如果通过匹配创建变量和“parseInt”，则可以将新变量设置为数组值。这是我如何让它工作的一个例子：

```
 var color = $( this ).css( "background-color" );
    var r = parseInt(color.match(/\d+/g)[0]);
    var g = parseInt(color.match(/\d+/g)[1]);
    var b = parseInt(color.match(/\d+/g)[2]); 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2021-11-09T12:52:18.470

要从字符串返回 int，您可以执行以下代码。它删除所有非数字字符并返回整数。

```
Number("strin[g]3".replace(/\D+/g, "")) 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-12-06T08:46:55.817

```
changeStrangeDate(dateString: string) {
var sum = 0;
var numbers = dateString.match(/\d+/g);
if (numbers.length > 1) {
  numbers.forEach(element => {
    sum += parseInt(element);
  }
  );
}
console.log(new Date(sum).toDateString());
return new Date(sum).toUTCString(); 
```

}

您可以这样做，然后在需要的地方使用参数调用函数。

```
this.changeStrangeDate('/Date(1551401820000-0100)/'); 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-10-31T16:42:34.487

在我的一个项目中，我必须从字符串中获取评级值，这就是我使用的：

```
 let text = '#xbox2'
  let num = text.trim().
  split('').
  map(num => Number(num)).
  filter(x => Number.isInteger(x) 
```

)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-11-15T19:10:09.863

不使用正则表达式编写

```
// Without Regex 

function extractNumber(string) {
  let numArray = string.split('').map(item => {
    if (typeof +item === 'number' && !isNaN(+item)) return +item
  })
  return +numArray.join('')
}

extractNumber('@1200milion$')  // 1200
```

# css - Bootstrap .pull-right 不影响 .navbar-search

> ID：10003686
> 
> 赞同：6
> 
> 时间：2012-04-04T01:14:35.167
> 
> 标签：css, twitter-bootstrap

我想在 Boostrap 中使用 .navbar-search 类，但我想将它与 .pull-right 一起使用。但是 .pull-right 似乎不会影响搜索栏，因为 .navbar-search 有一个 float: left 在其中，似乎覆盖了 .navbar-search。

是否有一种明显的方法可以使其与 Bootstrap 一起使用，或者我是否需要为浮动右导航搜索添加自定义 css？

HTML（从 Rails 应用程序中的 HAML 生成）

```
<form accept-charset="UTF-8" action="/search" class="navbar-search pull-right" method="get">
  <div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="✓">
  </div>
  <input class="search-query" id="q" name="q" placeholder="Search" type="text">
 </form> 
```

生成的 CSS：

```
.navbar-search {
  position: relative;
  float: left;
  margin-top: 6px;
  margin-bottom: 0;
}
bootstrap.css:236

.pull-right {
  float: right;
}
bootstrap.css:525 
```

完整导航（从 HAML 生成）：

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      ...
      <form accept-charset="UTF-8" action="/search" class="pull-right navbar-search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
                <input class="search-query" id="q" name="q" placeholder="Search" type="text">
      </form>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T12:24:25.180

在使用最新的工作`bootstrap.css`表测试该类后，我们发现`.pull-right`该类在旧版本的引导程序下不可用，因此更新该问题修复了该问题。

[与最新引导表一起使用的类演示](http://jsfiddle.net/N6vGZ/4/)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-04T01:17:44.793

添加 !important 到 .pull-right

```
.pull-right {
  float: right !important;
} 
```

# command-line - TFS 命令行崩溃

> ID：10003687
> 
> 赞同：1
> 
> 时间：2012-04-04T01:14:42.050
> 
> 标签：command-line, tfs, crash

我正在尝试设置一个包含签入 TFS 2010 的代码的构建脚本。在 IDE 中一切正常，但是每次我尝试访问它时命令行函数都会崩溃。具体来说，“tf workspace”和“tf workspaces”工作得很好，但是“tf history”、“tf get”和其他任何可能有用的东西都会创建一个未处理的异常。无论我如何格式化这些命令，程序仍然崩溃。我在互联网上到处寻找解决这个问题的关键，但无济于事。这让我发疯了。这是一个示例，从“Visual Studio 命令提示符”运行：

```
tf history * /version:T
Unhandled Exception: System.NullReferenceException: Object reference not set to
an instance of an object.
at Microsoft.TeamFoundation.VersionControl.Controls.DialogHistory.set_Workspace(Workspace value)
at Microsoft.TeamFoundation.VersionControl.CommandLine.CommandHistory.Run()
at Microsoft.TeamFoundation.VersionControl.CommandLine.VersionControlCommandLine.RunCommand(String commandName, String[] args, Boolean& showExitCode)
at Microsoft.TeamFoundation.Client.CommandLine.RunCommand(String[] args)
at Microsoft.TeamFoundation.Client.CommandLine.Run(String[]& args)
at Microsoft.TeamFoundation.VersionControl.CommandLine.VersionControlCommandLine.Main(String[] args) 
```

如果命令的使用完全错误，我深表歉意，但鉴于我输入的所有内容都会使其崩溃，我没有参考框架。

更新：

[我最初发布了这条评论，但由于版主认为它更像是一个“更新”而不是一个答案，它被删除了。]

谢谢大家的提示。我发布此消息的那天，我们的 TFS 服务器崩溃了，必须重新创建。我没有更改任何代码或工作区。当我们的 IT 人员重新创建它时，一切正常。为了后代，我试图找到新旧服务器之间的一些区别，但我没有发现任何东西。

# javascript - 如何在 JavaScript 中公开全局变量

> ID：10003691
> 
> 赞同：0
> 
> 时间：2012-04-04T01:15:10.677
> 
> 标签：javascript, asp.net-mvc

将全局变量从 MVC Layout Master 公开给子视图的最佳方法是什么。

这是流程：

布局：

```
var myPlugin = $("#myPlugiv").MyPlugin(); 
```

子视图：

```
var returnValue = myPlugin.GetValue(); 
```

这显然有效，因为 myPluin 变量对子视图可见，但是是否有另一种推荐的模式用于在主布局和子视图之间共享全局值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:05:57.663

您总是可以将它们组织到一个命名空间中以限制全局范围变量的数量。就像是：

```
window.ViewModel = {
    myPlugin: $('#myPlugin').MyPlugin()
};

var returnValue = ViewModel.myPlugin.GetValue(); 
```

# git - 我 git-subtree 从不相关的仓库多次添加到同一个前缀，现在我不能子树推送

> ID：10003692
> 
> 赞同：1
> 
> 时间：2012-04-04T01:15:10.923
> 
> 标签：git, git-subtree

我正在使用 git-subtree (https://github.com/apenwarr/git-subtree) 来管理我项目中的供应商存储库。

不久前，我重新设计了项目的布局，其中一部分涉及删除一些供应商代码并使用 git-subtree 从供应商 repo 的新副本中读取它。供应商 repo 的新副本是相同的代码，但是因为我从头开始重新创建它，所以没有常见的提交。

以下是相关的提交（从下到上阅读）：

```
commit df47ba0d6437737473aba206fdc9f2b902fbb073
Merge: 4bc6a27 80b6bb7
Author: User <user@user.com>
Date:   Fri Dec 2 01:48:30 2011 -0500

    Merge commit '80b6bb7ae01fdda2fe7e0c545004136724cbf059' as 'External/Libraries/stlsoft'

commit 80b6bb7ae01fdda2fe7e0c545004136724cbf059
Author: User <user@user.com>
Date:   Fri Dec 2 01:48:30 2011 -0500

    Squashed 'External/Libraries/stlsoft/' content from commit 03149e3

    git-subtree-dir: External/Libraries/stlsoft
    git-subtree-split: 03149e3a4c3289b5a88fc3f7ae17fb11c44c4d68

# Repo containing 6324cb1724fcdf87294b2e4f438dedf5920a3156 is deleted, External/Libraries/stlsoft 
# is deleted and re-'git subtree add'ed from a new repo in the commits above.

commit e235b6c46d10b83c56d5c9f70d2b00df1137fbb3
Merge: 98ee319 79b7a31
Author: User <user@user.com>
Date:   Mon Apr 11 16:09:54 2011 -0400

    Merge commit '79b7a31fe4bc2d5beaca64cd6be0be4d0c971e4a' as 'External/Libraries/stlsoft'

commit 79b7a31fe4bc2d5beaca64cd6be0be4d0c971e4a
Author: User <user@user.com>
Date:   Mon Apr 11 16:09:54 2011 -0400

    Squashed 'External/Libraries/stlsoft/' content from commit 6324cb1

    git-subtree-dir: External/Libraries/stlsoft
    git-subtree-split: 6324cb1724fcdf87294b2e4f438dedf5920a3156 
```

现在，如果我尝试将“git subtree push”返回到供应商存储库（包含 03149e3a4c3289b5a88fc3f7ae17fb11c44c4d68 的“新”存储库），我会收到以下错误：

```
$ git subtree push -P "External/Libraries/stlsoft/" /f/vendor/stlsoft mod2
git push using:  f:/vendor/stlsoft mod2
fatal: bad object 6324cb1724fcdf87294b2e4f438dedf5920a3156
Couldn't push, 'git subtree split' failed. 
```

因为 git-subtree-dir 与我给定的前缀匹配，但不再有任何提交 6324cb1724fcdf87294b2e4f438ddf5920a3156 并且我无法获取它，因为该 repo 不再存在。

关于如何解决这个问题的任何建议？我现在可以看到两个选项： 1\. 在新目录下重新添加（原则上我真的不想这样做）。2\. 手动删除导致损坏的先前提交中的子树数据（一般不建议这样做，但我认为在这种情况下我可以摆脱它，因为这个 repo 的其他副本并不多） .

# ruby-on-rails - Ruby on Windows 使用 Ruby irb，以及如何设置 RoR

> ID：10003701
> 
> 赞同：0
> 
> 时间：2012-04-04T01:16:00.890
> 
> 标签：ruby-on-rails

我开始在 Windows 上使用 Ruby。我下载了 Ruby 并使用 Ruby 命令行启动它。

我输入`irb`了命令提示符，它变成了 irb 命令提示符。

然后我开始尝试像 1 => 1; 这样的命令。和其他东西，但我没有输出。我只是去下一个提示。我到底在做什么？:)

我应该怎么做才能确保我已设置 RoR 并开始创建应用程序？

感谢并为这个普遍困惑的问题感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:24:54.630

虽然我更喜欢在 Mac 上使用 Ruby on Rails，但我心里对 Windows 有一个柔软的地方，所以不久前我在我的 Windows 机器上设置了 RoR。但请注意，您可能会让自己承受一些心痛和痛苦。除了错误和坏处，Ruby 在 Windows 上的运行速度要慢得多。我强烈建议使用 Linux 设置双启动或虚拟机，然后将 Rails 放在你的 Linux 操作系统上，而不是尝试在 Windows 上设置它。如果你想走虚拟机路线，你可以使用[Windows Virtual PC或类似的东西。](http://answers.oreilly.com/topic/366-how-to-run-linux-under-windows-7s-windows-virtual-pc/)

但是，如果您仍然想坚持使用 Windows，我认为安装所有内容的最简单方法之一是使用 Wayne Seguin 的[RailsInstaller](http://railsinstaller.org/)。沿着这些思路，我使用[Rails 的敏捷 Web 开发](http://pragprog.com/book/rails4/agile-web-development-with-rails)来帮助我了解设置 Rails 的过程并构建我的第一个应用程序。很棒的书。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T00:23:45.817

在`irb`您可以判断您的当前行是否未终止不以`>`.

```
irb(main):001:0> "I'm gonna wait
irb(main):002:0" to finish this string"    # The string isn't terminated
=> "I'm gonna wait\nto finish this string"
irb(main):003:0> 
```

但更有趣的是`irb`，分号 ( `;`) 似乎不会终止该行。因为分号 ( `;`) in`Ruby`不是必需的，只是[用作语句分隔符](http://www.caliban.org/ruby/rubyguide.shtml#semicolon)。**直到你结束一个没有**分号`irb`的语句时才会真正运行你的语句。*也不是一个有效的**陈述**。****`1 => 1``Ruby`***

 **```
irb(main):001:0> string = ""
  => ""
irb(main):002:0> string << "I'm gonna run this line\n";
irb(main):003:0* string << "Plus this line\n"
  => "I'm gonna run this line\nPlus this line\n"
irb(main):004:0> string << "Semi-colons are not cool in Ruby"
  => "I'm gonna run this line\nPlus this line\nSemi-colons are not cool in Ruby"
irb(main):005:0> 
```

所以你的问题应该通过**永远不要**使用分号来解决`Ruby`

此外，所有这些示例都是使用 Powershell 在 Windows 7 上运行的

```
PS C:\Users\Justin> ruby -v
ruby 1.9.3p0 (2011-10-30) [i386-mingw32] 
```

正如 Aaron 所说，最好的入门方法可能是[RailsInstaller](http://railsinstaller.org/)。我没有亲自使用过它，但它看起来几乎可以为你做所有事情。

*我使用[RubyInstaller](http://rubyinstaller.org/)并自己设置我的 Rails 环境。RailsInstaller 为您完成所有这些工作。***

# generics - 如何查找泛型类型是否为 List<>

> ID：10003703
> 
> 赞同：0
> 
> 时间：2012-04-04T01:16:04.963
> 
> 标签：generics, c#-4.0, generic-list

我有一个通用方法定义如下

```
public T MyMethod<T>(extra params) 
```

我的方法可以接收和返回单个实体类型，也可以接收和返回列表。如何确定传递的 T 是单个实体类型还是列表，在这种情况下如何获取内部类型 T1 的类型？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:35:55.597

您可以使用[`Type`](http://msdn.microsoft.com/en-us/library/system.type.aspx)类的方法来做到这一点：

```
var type = typeof(T);
if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(List<>)) {
    var innerType = type.GetGenericArguments()[0];
} 
```

# c# - 确定用户是否登录的服务

> ID：10003705
> 
> 赞同：1
> 
> 时间：2012-04-04T01:16:23.437
> 
> 标签：c#, .net, windows, login

我有一个包含服务和应用程序的 .NET 应用程序。我要求服务在应用程序未运行时提醒我，反之亦然。这在 1000 多台具有不同登录凭据的机器上运行（正常登录用户名，即机器 1-PC、2-PC、3-PC 的 bob、sam、fred）。

我想知道应用程序什么时候没有运行，以便我可以解决它，但是当计算机重新启动并在登录屏幕上等待时，我经常被告知我的应用程序没有运行，但实际上没有人登录。有没有如何查看用户是否登录？我见过一些技巧，但没有具体/没有优雅的方法来实现这一点。

这样我将能够看到服务正在运行，但在有人登录机器之前不要期望应用程序正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:38:21.103

这几个链接可能很有用

*   [http://www.codeproject.com/Articles/10937/Retrieving-Logged-In-User-Name-using-a-Windows-Ser](http://www.codeproject.com/Articles/10937/Retrieving-Logged-In-User-Name-using-a-Windows-Ser) - 通过检查谁（如果有）运行 explorer.exe 来检查当前是否有登录用户.
*   [如何在 .NET 中检索已登录/已连接用户的列表？](https://stackoverflow.com/questions/132620/how-do-you-retrieve-a-list-of-logged-in-connected-users-in-net)- 使用 Win32 PInvoke 获取用户信息。

注意：很有可能有更好的内置方式 - serverfault 可能是一个更好的站点来询问有关管理大量机器的问题（除非您使用工具进行可疑活动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:25:34.270

如果您的服务坚如磐石（即很少崩溃），我会在服务启动时在某处（文件、注册表、数据库）写入一个临时值。

然后，当您第一次看到应用程序运行时清除该标志。

此后，如果未设置标志且应用程序未运行，则存在问题。

这种方法不能解决用户注销的情况，只能解决重启的情况，所以我不能 100% 确定这对你有用，但你只提到了重启的情况，所以我希望这能给你一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T09:07:10.137

```
var ntuser = new NTAccount(UserName);

var securityIdentifier = (SecurityIdentifier)ntuser.Translate(typeof(SecurityIdentifier));

var okey = Registry.Users.OpenSubKey(securityIdentifier + @"\Control Panel\Desktop", true); //any key is ok

if (okey != null)
//login
else
//not login 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T01:28:07.717

您可以在应用程序中使用`Global\MYUniqueEvent`对象并在其上提供必要的安全凭证，以便您的服务可以检查它。

您还可以侦听`Microsoft.Win32.SystemEvents.SessionSwitch`以确定用户正在登录。（我没有亲自使用过，但知道它在那里）。看看这个例子[http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.asp](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.asp)

# javascript - 将字符串数组表示形式转换回数组

> ID：10003706
> 
> 赞同：19
> 
> 时间：2012-04-04T01:16:23.890
> 
> 标签：javascript

我有一个数组的字符串表示：

```
'["item1", "item2", "item3"]' 
```

我正在尝试将其转换回数组。

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-04T01:19:16.310

只需使用`JSON.parse('["item1", "item2", "item3"]');`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T01:19:04.490

尝试[JSON.parse](https://developer.mozilla.org/En/Using_native_JSON#Parsing_JSON.C2.A0strings)：

```
 ary = JSON.parse(s); 
```

大多数浏览器本机支持它，对于其他浏览器，您需要[json.js](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T01:24:33.957

你也可以使用

```
var genericList = eval('(' + s + ')');

for(i=0;i<genericList.lengthl;i++){
   alert("element : " + genericList[i]);
} 
```

# haskell - 如果包存在，可选择运行代码

> ID：10003718
> 
> 赞同：1
> 
> 时间：2012-04-04T01:17:54.777
> 
> 标签：haskell

在 Python 中，如果给定的包存在，我可以选择运行一些代码，如下所示：

```
try:
  import asd
  # do something with asd
except ImportError:
  print "no module asd" 
```

有没有等效的 Haskell？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T01:30:40.840

不是直接的，因为模块导入是在编译时用 GHC 解析的。但是，如果您使用的是[Cabal （而且您应该是！），您可以根据](http://www.haskell.org/cabal/)[配置标志](http://www.haskell.org/cabal/users-guide/#configurations)有条件地依赖一个包，然后`CPP`根据该依赖项是否存在使用扩展来编译代码：

```
#if MIN_VERSION_somepackage(0,0,0)
...code using somepackage...
#else
...code not using somepackage...
#endif 
```

不过，这有点尴尬，所以我不建议使用它，除非你真的需要它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:21:11.133

不会。Haskell 编译器会拒绝任何导入它找不到的模块的程序，就像它会拒绝使用未定义的函数一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:16:27.013

[此外，如果您使用plugins](http://hackage.haskell.org/package/plugins)，您可能能够在运行时使用新库。

# ruby-on-rails - 安装 gem sqlite3 时出错 - centos5.6

> ID：10003721
> 
> 赞同：1
> 
> 时间：2012-04-04T01:18:38.927
> 
> 标签：ruby-on-rails, sqlite, sqlite3-ruby

我正在尝试在 Rails 上安装用于 ruby​​ 的 sqlite3 gem 并收到此错误...我已经通过 yum 成功安装了 sqlite3。

```
Building native extensions.  This could take a while...
ERROR:  Error installing sqlite3:
    ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for sqlite3.h... yes
checking for sqlite3_libversion_number() in -lsqlite3... yes
checking for rb_proc_arity()... yes
checking for sqlite3_initialize()... no
checking for sqlite3_backup_init()... no
checking for sqlite3_column_database_name()... no
checking for sqlite3_enable_load_extension()... no
checking for sqlite3_load_extension()... no
creating Makefile

make
compiling database.c
database.c: In function ‘initialize’:
database.c:47: error: ‘SQLITE_OPEN_READWRITE’ undeclared (first use in this function)
database.c:47: error: (Each undeclared identifier is reported only once
database.c:47: error: for each function it appears in.)
database.c:47: error: ‘SQLITE_OPEN_CREATE’ undeclared (first use in this function)
database.c:79: error: ‘SQLITE_OPEN_READONLY’ undeclared (first use in this function)
database.c:81: warning: implicit declaration of function ‘sqlite3_open_v2’
database.c: In function ‘set_sqlite3_func_result’:
database.c:285: error: ‘sqlite3_int64’ undeclared (first use in this function)
database.c:285: error: expected expression before ‘long’
database.c: In function ‘collation’:
database.c:628: warning: implicit declaration of function ‘sqlite3_create_collation_v2’
database.c: In function ‘load_extension’:
database.c:657: warning: implicit declaration of function ‘sqlite3_load_extension’
database.c: In function ‘enable_load_extension’:
database.c:678: warning: implicit declaration of function ‘sqlite3_enable_load_extension’
make: *** [database.o] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sqlite3-1.3.5 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/sqlite3-1.3.5/ext/sqlite3/gem_make.out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:05:34.673

[较早的指南](http://www.sheepguardingllama.com/2008/11/installing-ruby-sqlite3-on-red-hat-or-centos-linux/)显示了如何安装 sqlite 和所有开发包，以及其他一些技巧。看起来你只是在玩教程，但如果你要开发，我建议安装一个“真正的”数据库。一个具有更多功能，什么不是。MySQL 或 PostgreSQL。

还要确保您也通过 64 位操作系统安装它，因为它看起来需要从该错误堆栈中获取它，或者正在寻找它。

# php - php解密一个加密函数并运行它？

> ID：10003723
> 
> 赞同：2
> 
> 时间：2012-04-04T01:18:56.163
> 
> 标签：php, eval

这不是关于如何加密和解密。我想知道在从文本文件中检索和解密后是否可以运行函数。

例如，我将创建一个定义数据库密码的函数，然后像它只是一个文本字符串一样对其进行加密并将其写入文本文件。

然后我有将数据库密码定义为加密不可读混乱的函数。

当我需要密码时，我会获取文件内容并对其进行解密，但此时我需要能够将其作为函数运行，因此它将定义 DB_PASSWORD 常量，但它现在只是字符串中的文本。

就像我刚刚这样做一样：

```
$var = "function define_password(){
   if(!defined('DB_PASSWORD')){define('DB_PASSWORD', 'password');}
}"; 
```

很明显，我能做的就是回显它，因为它只是变量中的文本。

那么，有没有办法让 php 将其视为函数而不是字符串变量？

谢谢

即使它是多余的，它也是有教育意义的，所以我发布了使用 Xenon 指出的 eval() 方法的结果。这是 www 外部目录中名为 .nothing 的加密和隐藏文件，对 root 拥有的 www-data 具有只读访问权限：

```
Pswo0DlrEPMNEs7ExyFs8Zh2n+bSj6yr4NI9zV7gTP9qFiesrFKLxsjoo3R3CnsYJNkojeo0v2gQtI4iJGLzKUS8zdhePLElk3BwhliB3dxYwvRkJFMqbtw7k/UBo0pHPLR/jVRnWq+cTByr0xp8p7X9v8Olbfrz4zwo+VXIDwLA6GsOJTK14Hy0E4jksgeuEQ7/PDtxCgWoMPQ2OomPwjFjukdrAofbF5jxU9zCUK5Cs1UZ8+PYA79w0lccEpUA9vWBPZ6Xuwhr4KuGeyoUCchK9wGgaXDD6Oc845OsmnR/wi+EMnYacvGGeLxN96wEAt9vh/dwmYIkHmpuBtPWUP1vRT/HzTv39HfXoFFKx1kGww4Xph/cjS8joYwAgh+C+LT61sBjlfazkDRNabpmZFd2yyocD+6lQeHrmKuvYxa0cfMSYa8ScAQaBz6Ycg99ldOinEbd+mTnZKltFialAoHOvha4Surc0XZX7vtFx1TxSMctjkgCmLw4bHhJ6B3htLkhOysb6Oz5M1rniogFwEZnFaqLsqD1etpYv1RpceB8FPSss7/Zu0vGwbGeSMldr06FeHylRlB6n25QiH3qaKieHuD8ErKvQjm3YAVCshU04ydR0lTU5ckKnFGGxAGtiXjK9rV3Hle69vk7RjtYJVVuPCbmdSETdE/zHem+w1THKw4/NUROdxiOIDYQtQ6oDY0ORiwAqjU9QHlqwFyadPrDG37AYXSCzLgwFCw76J6uGyYzDsIVDUnP6Dv3yV1yvjrpxAFb5lA9APrnU8qIgNrgEoaZAznpX91QQxt6ztgJFVHyOSyUP8DkkFpsPamHwg22jb1oUZlOVsCgzMSj9G1M4sgokW6lpQjXCtuDYXVrAwoWHk6Bh+UiBXVUoOPIvEjG4PtCIRQl84lEtKiUPAQSWA/7rgN1O308j9tRtNBzho2xYMTPg2g5DOS82RRSS7/ehGxEWlbh9cqig6Xux+oyLLXK4uIp8qA4kLqvuVX9w/UAfJRRfV89t5xQsshMP8TnFn3KrAZtGJ7lQDOduzMiHXpu9Wu91IsEfbHr/v2U0CD+sMc7h9K755fYpdNUptpaRvyz0sVZW96sldPsxY26LktnQaKIAAoDNgcIFbNOmGOBnIuUVOQBUVxbC+e2cYJy8xQsjsJBe0AChfTZB+Vi0TiERyA28OCti4T4PTA= 
```

我使用下面代码中的 encrypt 函数实现了它，该函数来自 stackoverflow 上的某个人。

```
<?php 
define('SALT', 'whateveryouwant');

function encrypt($text) 
{ 
    return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, SALT, $text, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)))); 
}

function decrypt($text) 
{ 
    return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, SALT, base64_decode($text), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))); 
}

$dec_db = decrypt(file_get_contents('.nothing'));

eval($dec_db);

defineit();
echo ET_APP_USERNAME; 
```

加密部分是一个函数，它为 3 个不同的数据库定义用户名和密码，但回显第一个用户名表明它运行良好。当然，正如所指出的，如果有人可以访问服务器，他们将看到 SALT 常量和加密/解密函数，并从 file_get_contents 方法中知道它在哪里，所以我想这对我来说只是教育性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:29:24.707

我只是假设您希望在这里获得的好处是，如果您的网站被黑客入侵，攻击者将无法读取数据库密码。基于这个假设，我会说：

1.  可以获得加密密码代码的攻击者很可能也可以获得解密密码的代码并自己解密密码。一无所获。
2.  为什么必须是设置密码的*代码*？只需加密密码本身。然后当你解密它时，你将拥有一个字符串形式的密码，这个问题就变得无关紧要了。我看不出要求需要执行的代码有什么好处。
3.  要求执行任意代码只会让您面临*更多*安全问题和可能的代码注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:37:26.730

如果你没有解释你想用这个实现什么，我什么都不会说。但是，由于您说您要通过所有这些实现的目的是读取存储在文件中的密码（出于某种原因在函数内部），我强烈建议您查看您的攻击方法。

我将引导您了解`parse_in_file()` [http://www.php.net/manual/en/function.parse-ini-file.php的好处](http://www.php.net/manual/en/function.parse-ini-file.php)

如果可能，不要存储一个函数来简单地定义一个变量——有更好的方法可以做到这一点，使用 ini 文件是一个非常好的/更好的选择。`define()`如果您想更轻松地访问信息，您甚至可以拥有密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T01:24:18.190

我认为您可能正在寻找的是[`eval()`](http://php.net/manual/en/function.eval.php)，它接受一个字符串并将其作为 PHP 代码执行。

使用它时要非常小心，并注意警告：

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

因此，例如，您可以这样做：

```
$var = "function define_password(){
   if(!defined('DB_PASSWORD')){define('DB_PASSWORD', 'password');}
}";

eval($var); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T06:32:49.700

尝试**create_function()**。然后调用它。如果失败，则返回 NULL 或 FALSE 或 smth。

# javascript - Jquery clicktracking mousedown vs click

> ID：10003726
> 
> 赞同：0
> 
> 时间：2012-04-04T01:19:07.647
> 
> 标签：javascript, jquery, ajax, click-tracking

我需要从我们网站上的一个目录中跟踪出站点击，并希望这样做，以便实际的 url 在 href 中。就像是：

```
 <a href="http://www.example.com" id="a24" class="link" >Go to Example</a> 
```

这是我在下面使用的 JQuery。click.php文件基本上就是查找链接id，然后将点击信息插入到一个mysql表中。

即使 click.php 需要很长时间才能完成，这似乎也可以正常工作。换句话说，即使我将 click.php 设置为在完成前休眠 10 秒，用户也会立即链接到目标 URL。

我正在使用**$('a.link').mousedown**而不是**$('a.link').click** 当我使用 .click 时，它不起作用（不记录点击）。我只是好奇为什么它不能使用**.click**函数，只能使用**.mousedown**函数。

这是用 JQuery 捕获点击的好方法还是有更好的方法？（我意识到任何关闭 Javascript 的人都不会被计算在内）。

```
$('a.link').mousedown( function(e){

        var my_id = $(this).attr('id');

        $.ajax({    
          type: "GET",
          url: "/tiger/sal/clicks/click.php?id=my_id"
        });

        return true;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:22:51.993

在浏览器指示之前，您没有给 jQuery 足够的时间来计算所有内容。你为什么不尝试类似的东西：

```
$('a.link').click( function(e){

   // Prevent the browser from running away
   e.preventDefault();

   // I've changed this to POST to make it a bit more secure
   // You can access the link ID with $_POST['link_id'] now
   $.post('/tiger/sal/clicks/click.php', { link_id: $(this).attr('id') });

   // Wave goodbye
   window.location.href = $(this).attr('href');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:31:06.970

我不明白为什么它不起作用。

这在我测试时有效，但需要在您的 AJAX 调用中修复 url 端点：

```
$(function(){
  $('a.link').click( function(e){
    var my_id = $(this).attr('id');
    var href = $(this).attr('href');
    $.ajax({    
      type: "GET",
      url: "/tiger/sal/clicks/click.php?id=" + my_id,
      success: function(d){
          // allow it to successfully call the server before redirecting.
          window.location = href;
      }
    });
    return false;
  });
}); 
```

我不会在“mousedown”中这样做，因为这并不能保证用户实际点击了链接。

# wpf - 将控件添加到样式 wpf

> ID：10003735
> 
> 赞同：0
> 
> 时间：2012-04-04T01:19:48.447
> 
> 标签：wpf, templates, xaml, styles

```
 <Style x:Key="MyButton" TargetType="{x:Type Border}">
        <Style.Resources>
            <Style TargetType="{x:Type TextBlock}">                    
                <Setter Property="FontSize" Value="24"/>
                <Setter Property="Foreground" Value="{StaticResource FontColor}"/>                    
                <Setter Property="HorizontalAlignment" Value="Center"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="FontWeight" Value="DemiBold" />
                <Setter Property="Effect">
                    <Setter.Value>
                        <BlurEffect Radius="2" ></BlurEffect>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="FontWeight" Value="ExtraBold" />
                    </Trigger>                                                
                </Style.Triggers>
            </Style>
        </Style.Resources>
    </Style> 
```

我想创建自己的包含边框和文本块的按钮样式。如何为我的样式添加控件？我实际上想添加一个额外的文本块，以便我可以模糊后面的文本框，使其看起来像发光。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:53:11.173

我不确定您希望您的第二个模糊文本块看起来如何，但下面的 xaml 应该可以让您顺利创建您所追求的按钮模板。

每个文本块以及边框都有自己的样式，因此您可以单独设置它们的样式并将它们全部包装在按钮样式的控件模板中：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Style x:Key="MainTextBlock" TargetType="{x:Type TextBlock}">
        <Setter Property="FontSize" Value="24"/>
        <Setter Property="Foreground" Value="Blue"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="FontWeight" Value="DemiBold" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="FontWeight" Value="ExtraBold" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="BlurTextBlock" TargetType="{x:Type TextBlock}">
        <Setter Property="FontSize" Value="24"/>
        <Setter Property="Foreground" Value="Blue"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="FontWeight" Value="DemiBold" />
        <Setter Property="Effect">
            <Setter.Value>
                <BlurEffect Radius="2" ></BlurEffect>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="BorderStyle" TargetType="Border">
        <Setter Property="BorderBrush" Value="Orange" />
        <Setter Property="BorderThickness" Value="2" />
    </Style>

    <Style x:Key="MyButton" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Style="{StaticResource BorderStyle}">
                        <Grid>
                            <TextBlock Style="{StaticResource MainTextBlock}" Text="{TemplateBinding Content}" />
                            <TextBlock Style="{StaticResource BlurTextBlock}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Grid>
    <Button Style="{StaticResource ResourceKey=MyButton}" Height="30" Width="100" Content="BUTTON" />
</Grid></Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:06:28.017

Button 没有 Text 属性，它有 Content 属性。

Content 属性可以是字符串，但您不能期望它始终是字符串。

问题是你想为内容设置样式但你不能。它是一个容器。您可以将图像或网格或整个 xaml 层次结构添加到内容属性。

所以你需要在 Content 中添加一个 TextBlock。

```
<Button HorizontalAlignment="Left" Margin="190,113,0,0" VerticalAlignment="Top" Width="75">
    <Button.Content>
        <Grid>
            <TextBlock Text="Click Me!" />
            <TextBlock Text="Click Me!">
                <TextBlock.Effect>
                    <BlurEffect Radius="2" />
                </TextBlock.Effect>
            </TextBlock>
        </Grid>
    </Button.Content>
</Button> 
```

所以这似乎不需要样式，它只需要您将属性 Content 添加到 Button.Content 属性。

# algorithm - 贪心算法对最小化最大和的数字进行配对

> ID：10003739
> 
> 赞同：4
> 
> 时间：2012-04-04T01:20:17.290
> 
> 标签：algorithm, language-agnostic, greedy

输入是一个实数序列 x1, x2, ..., x2n。我们想将这些数字配对成 n 对。对于第 i 个对 (i = 1, 2, ..., n)，让 Si 表示该对中的数字之和。（例如，如果将 x(2i−1) 和 x2i 作为第 i 对配对，则 Si = x(2i−1) + x2i）。我们希望将这些数字配对，以使 Maxi[Si] 最小化。设计一个贪心算法来解决这个问题。

* * *

这就是问题所在; 我的解决方案是简单地对数字进行排序并配对倒数第一的元素和加一/减一索引并重复。该算法尝试对每一对进行优化，从而使其变得贪婪。我只是想知道是否有一个线性时间算法可以做到这一点？

PS：这不是作业，但我知道这看起来很像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:51:37.597

如果你想要贪婪和近似，你可以在数据上运行一个固定大小的窗口，一次，并且只在窗口内配对数字 - 窗口左端的一个与窗口中的任何其他数字 - 标记一个不在左端，所以你不要重复使用它，并推进窗口，所以左端的那个不会被重复使用。从仅局部最优的意义上说，这是贪婪的。如果您知道该列表是均匀随机的，则它可能是接近的，并且是线性的，因为对恒定长度 k 的列表进行排序是相对于 N 的恒定时间。借助有关列表分布的其他知识，您可以使用以下变体仍然是 O(N) 并且只是近似值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:45:00.510

不，不可能有一个线性时间算法来为你完成这项工作。输入数字可以是任何顺序，因此您无法立即使用 min Maxi[Si] 完成配对。您当前的解决方案既简单又好。

改善运行时间的建议：

您可以从输入数字中创建一个二叉树（这需要 O(nlog(n)) 时间）。对树进行顺序遍历并从 (first+i, last-i) 元素（i 从 0 到 n/2）创建对

# html - 使用列表中选定项目的值相应地重定向浏览器 [HTML]

> ID：10003742
> 
> 赞同：0
> 
> 时间：2012-04-04T01:20:54.577
> 
> 标签：html, redirect, listbox, onclick, option

假设我有一个包含不同项目的列表框，每个项目都有唯一的值，并且它下面有一个“Enter”按钮。我希望能够在单击时获取所选项目的值，然后在具有按钮属性时：

```
ONCLICK="window.location.href='http://somewebsite.com/somefile.php?id="thisvalue"'" 
```

例如，像----

```
<SELECT NAME = ParticipantList STYLE = "WIDTH: 187" SIZE = 18>
    <OPTION VALUE='hi'> hello </OPTION>
<SELECT>
<INPUT TYPE="submit" VALUE="Info" ONCLICK="window.location.href='http://helloworld.com/this.php?="hi"'"/> 
```

谁能帮我解决这个问题？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:59:50.730

当 HTML 表单的方法是 GET 时，HTML 表单就是为了做到这一点：

```
<form action="http://helloworld.com/this.php" method="get">
  <select name="ParticipantList">
    <option value="hi">Hello</option>
  </select>

  <input type="submit">
</form> 
```

这会将用户发送到`http://helloworld.com/this.php?ParticipantList=hi`. 无需 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:09:17.503

**Javascript**

```
<script type="text/javascript">
function doAction(){
    var selected = document.getElementById('ParticipantList').value;
    if (selected == 'hello'){
        window.location.href = 'http://somewebsite.com/somefile.php?id=1';
    } else if (selected == 'bye'){
        window.location.href = 'http://somewebsite.com/somefile.php?id=2';
    } else {
        alert('unknown option selected');
    }
}
</script> 
```

**的HTML**

```
<select name="ParticipantList" id="ParticipantList">
    <option value="hello">hello</option>
    <option value="bye">bye</option>
</select>

<input type="button" name="action" id="action" value="Submit" onclick="doAction()" /> 
```

# spring - 如何在 Spring MVC 中将枚举与代码一起使用？

> ID：10003745
> 
> 赞同：0
> 
> 时间：2012-04-04T01:21:03.677
> 
> 标签：spring, enums

**枚举**

```
public enum ArticlePublishStatus {
    DRAFT ("DRAFT"),
    SUBMITTED ("SUB"),
    PUBLISHED ("PUB");

    private final String code;

    private ArticlePublishStatus(String code) {   
        this.code=code;   
    }   
} 
```

**屏幕对象（又名表单支持对象）**

```
public class ArticleHeaderEditScreenObject extends EditScreenObject {
    private Integer articleId;
    private String title;
    private ArticlePublishStatus publishStatus; 
```

**看法**

```
<form:select path="publishStatus"
    items="${screenObject.getArticlePublishStatusOptionList()}" 
    itemLabel="label" 
    itemValue="value" /> 
```

**html**

```
<select id="publishStatus" name="publishStatus">
    <option value="DRAFT" selected="selected">Draft</option>
    <option value="SUB">Submitted</option>
    <option value="PUB">Published</option>
</select> 
```

**例外**

草稿工作正常，因为相应枚举的名称和代码是相同的。保存已提交或已发布的页面失败。

`org.springframework.core.convert.ConversionFailedException: Failed to convert from type java.lang.String to type com.siteadmin.domain.ArticlePublishStatus for value 'PUB'; nested exception is java.lang.IllegalArgumentException: No enum constant com.siteadmin.domain.ArticlePublishStatus.PUB`

`org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:41)`

`java.lang.IllegalArgumentException: No enum constant com.siteadmin.domain.ArticlePublishStatus.PUB java.lang.Enum.valueOf(Enum.java:236)`

我看到它在根据其代码选择枚举时遇到问题，但我仍然不知道该怎么做。有很多关于枚举的主题，但没有找到任何可以帮助这个主题的东西。是否有一种方法需要实现枚举来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:57:33.187

没有看到 的实现`getArticlePublishStatusOptionList()`，这有点猜测......

如果您使用 的`toString`值`ArticlePublishStatus`作为从 返回的 Option 的值部分`getArticlePublishStatusOptionList()`，那么 Spring MVC 枚举转换器可以使用 绑定您的枚举`.valueOf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T00:04:53.597

你应该使用

```
<option value="SUB">Submitted</option>
<option value="PUB">Published</option> 
```

春天使用 .valueOf("SUBMITTED"); 将值转换为枚举。它与枚举内部值无关。

请参阅[What is the reason for java.lang.IllegalArgumentException: No enum const class 即使迭代 values() 工作得很好？](https://stackoverflow.com/questions/12639791/what-is-the-reason-for-java-lang-illegalargumentexception-no-enum-const-class-e)

# ruby-on-rails - 无论扩展如何，如何使正则表达式匹配所有互联网域

> ID：10003749
> 
> 赞同：2
> 
> 时间：2012-04-04T01:21:30.840
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3

我需要进行模型验证来阻止个人电子邮件帐户。

我有以下内容：

```
PERSONAL_DOMAINS = %w[
 yahoo.
 ymail
 verizon
] 
```

正则表达式验证：

```
:format => {
  :without => /#{PERSONAL_DOMAINS.map{|a| Regexp.quote(a)}.join('|')}/
} 
```

雅虎在末尾有一个点的原因是允许 yahoo-inc.com 但阻止所有个人域，如 yahoo.com、yahoo.fr、yahoo.uk 等......

这个正则表达式失败并导致 yahoo-inc.com 被拒绝......关于如何更新它以使上述用例通过的任何建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:37:42.267

尝试在没有 Rails 的情况下进行匹配，以帮助缩小正在发生的事情：

```
PERSONAL_DOMAINS_REGEXP = /#{PERSONAL_DOMAINS.map{|a| Regexp.quote(a)}.join('|')}/
=> /yahoo\.|ymail|verizon/

"yahoo-inc.com".match(PERSONAL_DOMAINS_REGEXP)
=> nil

"yahoo.com".match(PERSONAL_DOMAINS_REGEXP)
=> #<MatchData "yahoo."> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:43:52.407

尝试以下正则表达式：

```
/(^|\.)(#{PERSONAL_DOMAINS.map{|a| Regexp.quote(a)}.join('|')})\.[^.]+$/i 
```

这将匹配其第二个组件恰好是列表之一的所有域。

所以它会匹配：

```
yahoo.com
Yahoo.fr
sub.yahoo.id 
```

等等，但不是

```
yahoo-inc.com
notyahoo.com
yahoo.other.com 
```

（将“雅虎”改回“雅虎”）

还要注意末尾的“/i”。域不区分大小写，因此您将需要它。

# python - 从 2 个单独列表中的数据填充字典的 Python 过程

> ID：10003751
> 
> 赞同：5
> 
> 时间：2012-04-04T01:21:31.377
> 
> 标签：python, dictionary

我正在尝试创建一个使用两个单独的列表来创建字典的自动化 python 过程，但到目前为止我失败了。我有两个排序列表，其中第一个列表中的第 n 个项目对应于第二个列表中的第 n 个项目，我想将它们组合成一个字典。

例如，2 个列表的子集如下；

```
name = ['Adam', 'Alfred', 'Amy', 'Andy', 'Bob']
year = [1972, 1968, 1985, 1991, 1989] 
```

我希望我的输出是：

```
birth_years = {'Adam':1972, 'Alfred':1968, 'Amy':1985, 'Andy':1991, 'Bob':1989} 
```

我试图用 for 循环来做到这一点，但我无法让它工作。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T01:24:13.377

使用`zip`and`dict`函数从元组列表中构造字典：

```
birth_years = dict(zip(name, year)) 
```

如果你很好奇，这就是我尝试使用`for`循环的方式：

```
birth_years = {}

for index, n in enumerate(name):
  birth_years[n] = years[index] 
```

我想我更喜欢第一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:32:54.570

```
birth_years = {}
for i in range(len(name)):
    birth_years[name[i]] = year[i] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T12:23:48.477

尝试字典理解：

```
birth_years = {nm:year[idx] for idx, nm in enumerate(name)} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T15:28:42.533

您的列表最好命名为`names`和`years`。`for`通过尝试使用循环来实现，您有了一个良好的开端。大多数实际的数据处理问题都涉及错误检查，这对于单行来说有点困难。例子：

```
birth_years = {}
for i, name in enumerate(names):
    if name in birth_years:
        log_duplicate(i, name, years[i]))
    else:
        birth_years[name] = years[i] 
```

# google-closure-compiler - ClojureScript extern 'on' 事件

> ID：10003752
> 
> 赞同：0
> 
> 时间：2012-04-04T01:21:54.650
> 
> 标签：google-closure-compiler, clojurescript

我正在尝试将 Twitter Bootstrap 的模态对话框 jQuery 插件与 ClojureScript 一起使用，该插件无需高级优化即可正常工作，但是当 Google Closure 处理方法名称时，该`on`方法变为`za`.

我一直在尝试`on`通过使用 externs 文件来防止被修改，但到目前为止，创建一个修复此问题的定义还没有运气。提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:16:37.127

最终奏效的是：

```
var jQuery;
jQuery.fn = {
  on: function() {}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:06:44.807

使用高级，您可以使用 goog.exportSymbol 或 window['object']['on'] = object['on']

# c# - 重命名 MainWindow 的最佳方法

> ID：10003760
> 
> 赞同：7
> 
> 时间：2012-04-04T01:22:48.113
> 
> 标签：c#, wpf, visual-studio, visual-studio-2010, xaml

在 Visual Studio 2010 中，如果我创建一个作为 WPF 应用程序的新项目，则它的`MainWindow`子类将`Window`作为默认的第一个窗口提供。我一直在重命名的步骤`MainWindow`是：

*   使用解决方案资源管理器重命名`MainWindow.xaml`.
*   重命名 中的类`MainWindow.xaml.cs`。
*   从重命名的类旁边显示的“更新对重命名对象的引用的选项”弹出菜单中选择“重命名'MainWindow' to ...”选项。
*   相应地更新`StartupUri`。`App.xaml`

有没有更好的办法？:-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T01:37:20.747

> 1.  获取 ReSharper
> 2.  使用[重命名](http://www.jetbrains.com/resharper/features/code_refactoring.html#Rename)
> 3.  ？？？
> 4.  利润

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T01:36:22.757

我想不出更好的办法。另一种可能会减少步骤的方法是创建一个新窗口，然后将 StartupUri 设置为新窗口的名称。

然后由您决定是否要保留 MainWindow 或删除它（如果您根本不使用它，这将是有意义的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T19:14:59.490

Visual C# 2010 Express 有一个内置选项来解决这个问题。您可以看到菜单栏有一个“重构”选项，您可以在其中看到两个子菜单重命名和重构。要更改任何名称，您只需将光标放在名称（图像中的计算器）并单击右键。然后转到重构并单击重命名。您将看到一个对话框出现，然后您将要为属性赋予的新名称。

![在此处输入图像描述](../Images/40c37790b93585f9e697320950b67bc8.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-21T16:35:50.793

您可以使用[Resharper for .NET](https://www.jetbrains.com/resharper/)

[![在此处输入图像描述](../Images/34a817d531bb41f7c44d74dec73d3ee4.png)](https://i.stack.imgur.com/rOpeZ.png)

[![在此处输入图像描述](../Images/167ac97c59dfb02df3153eef18162623.png)](https://i.stack.imgur.com/iueL7.png)

它将处理对 MainWindow 的所有引用（包括**App.xaml**）

# javascript - 将所有加载的数据存储到一个 Javascript 对象中

> ID：10003767
> 
> 赞同：1
> 
> 时间：2012-04-04T01:23:38.683
> 
> 标签：javascript, jquery, ajax, object

我只需要一些关于这是否明智的建议。我主要通过 AJAX 请求加载我的站点数据。为了节省加载时间和服务器调用，我将所有加载到全局对象的数据保存起来，如果用户再次选择该页面，则只回收该数据。

我想知道将整个站点缓存到一个对象上是否明智，例如：

```
var page = ['level 1','level 2','level 3','level 4'];
var mysiteobj = [];
if (page[0] == 'level 1')
   if (!mysiteobj['level 1'])
      $.ajax(/*load data*/).done(function(data){ mysiteobj['level 1'] = data; /*display data*/ });
   else /*display mysiteobj['level 1']*/
   if (page[1] == 'level 2')
      if (!mysiteobj['level 1']['level 2'])
         $.ajax(/*load data*/).done(function(data){ mysiteobj['level 1']['level 2'] = data; /*display data*/ });
      else /*display mysiteobj['level 1']['level 2']*/
 ...etc 
```

……等等。为了澄清这个相当奇怪的符号，“级别 1”是用户可能查找的所有地理区域，“级别 2”是用户可能查看的地理区域中的所有部门，“级别 3”是部门中的类别在地理区域中，并说“4 级”将是地理区域中部门类别中列出的产品或条目。

现在，我的方法是，我有一个包含所有地理区域的对象，每次加载新的地理区域时，第二个对象都会被新的部门列表覆盖，第三个对象包含我的类别，第四个对象包含我的列表/产品。

如果这有道理，请指教。我想简化的问题是，在对象变得笨拙并阻塞浏览器之前，您可以制作多大的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:28:24.430

如果尚未加载，为什么不根据需要加载数据。

例如，您可以加载级别 1。

然后，当用户选择级别 2 时，如果还没有，则加载它，然后继续。

因此，您可以保留已加载的内容，但只需告知他们您正在检索数据，如果这需要时间，否则人们可能会理解您正在加载它。

就个人而言，我会告诉用户有一个加载请求，所以他们知道发生了什么。

IMO，预加载整个站点是一种浪费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:35:06.473

考虑到让 ajax 请求返回大型数据集是不明智的......

我认为您可以将这些数据存储到 Redis/Memcached 服务器中，并制作一个 javascript 函数来准确捕获您想要的内容。将大量数据放入全局变量并让您的用户为此付费是不明智的。

# c++ - 如何使用 MinGW + Code::Block 编译的 GUI 程序的控制台框

> ID：10003777
> 
> 赞同：7
> 
> 时间：2012-04-04T01:24:57.547
> 
> 标签：c++, mingw, codeblocks

当我使用命令行在 MinGW+MSys 中编译并运行一个简单的 Win32 GUI 程序时：

`$ g++ main.cpp -o app -std=c++0x`

`$ ./app`

只显示一个对话框。但是当我将这个程序放入 Code::Blocks IDE 并编译它时，它总是会导致一个带有对话框的黑色控制台框。添加`-mwindows`链接选项无效。

**主.cpp：**

```
#include <windows.h>
int WinMain(HINSTANCE,HINSTANCE,LPSTR,int)
{
    MessageBox(0,"Hello, Windows","MinGW Test Program",MB_OK);
    return 0;
} 
```

我怎样才能摆脱控制台？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T01:38:47.857

把它放在一个项目中，在项目设置中有一个没有控制台窗口的选项。

如果您不介意将它放在项目中，调用`ShowWindow (GetConsoleWindow(), SW_HIDE);`会使它在屏幕上闪烁然后消失。请注意，您必须在包含 windows.h 之前使用`#define _WIN32_WINNT`as`0x0500`或更高版本才能访问`GetConsoleWindow()`. 我稍后会返回一个特定的位置来禁用它。

```
//hide console window at start
#define _WIN32_WINNT 0x0501 //this is for XP
#include <windows.h>

int main()
{
    ShowWindow (GetConsoleWindow(), SW_HIDE);
    //rest of program here
} 
```

EDIT: Found it, here's how to not have a console window:

1.  Click Project on the CodeBlocks menu.
2.  Click Properties.
3.  Click the second tab, Build Targets.
4.  On the right, where it says Type: Console application, change it to GUI application.
5.  Rebuild the project.

# python-3.x - 字典中有键列表，如何打印以便首先打印列表中值最少的键？

> ID：10003779
> 
> 赞同：0
> 
> 时间：2012-04-04T01:25:15.367
> 
> 标签：python-3.x

因此，我尝试广泛地执行此操作，但无济于事。我正在编写一个程序，该程序采用具有列表的名称字典以及列表中事物数量的数值。我想打印列表中的每个名称，以便打印的第一个名称是列表中值最少的名称，打印的姓氏是列表中值最多的名称.. 这里是我的代码。它只打印作为键的名称，然后打印整个值列表。然后它打印 e 结束。所以

"anna" 3 4 5 6 e "dan" 3 4 6 e "cilla" 3 4 e "billy" 6 e ...等等

```
for GPS in GNR:

    print('"'+GPS+'"')
    for s in GNR[GPS]:
        print(s)
    print("e") 
```

这是字典及其值。

GNR = {"安娜":[3,4,5,6],"比利":[6],"cilla":[3,4],"dan":[3,4,6]}

所以我想要的结果不是上面的，而是这个：

“比利” 6 e “cilla” 3 4 e “丹” 3 4 6 e “安娜” 3 4 5 6 e

如您所见，它首先打印列表中值最少的名称，然后是其余的。

我不知道如何做到这一点:(我知道我需要将每个值与其他值进行比较，然后将其保存在某个地方，但我不知道在哪里。任何帮助都会得到帮助 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:41:00.337

要获取按相应列表中元素数量排序的键，您可以执行以下操作：

```
ascending = sorted(GNR, key=lambda x: len(GNR[x]))
# ascending is ['billy', 'cilla', 'dan', 'anna']

for key in ascending:
    li = GNR[key]
    # print them etc. 
```

# java - JSF 2\. h:selectBooleanCheckbox。意外行为

> ID：10003784
> 
> 赞同：0
> 
> 时间：2012-04-04T01:25:44.623
> 
> 标签：java, jsf-2, mojarra

如代码所示，我有几个嵌套表。当用户单击复选框时，ajax 调用被发送到服务器，然后返回到客户端。如果服务器中的进程正常工作，则在获取回调时，使用 jquery 从 html 代码中删除单击的操作行。然后，当用户尝试删除**同一操作表**中的另一行时，发送到服务器的值**不**正确。**该调用发送下一行值**：#{trade.murexId}、#{operation.id} 和 #{operation.operation}，但**不是**正确的。Javascript 和 jquery 回调函数工作正常。我正在使用最新版本的 Mojarra。为什么会这样？我该如何解决？

HTML：

```
 <table id="trades">
        <th class="image_cell"></th>
        <th>Murex Id</th>
        <th>Type</th>
        <th>Portfolio</th>
        <th>Log</th>
            <ui:repeat var="trade" value="#{controller.errorTrades}">
                <h:form>
                    <tr class="trade error">

                            <td class="image_cell error"><h:graphicImage styleClass="expandable" url="resources/images/plus.png"></h:graphicImage></td>
                            <td id="murex_id" class="error">#{trade.murexId}</td>
                            <td id="type" class="error">#{trade.type}</td>
                            <td class="error">#{trade.portfolio}</td>
                            <td class="error">
                                <h:commandButton image="resources/images/log_big.jpg" action="#{controller.onLogTrade(trade.murexId)}">
                                    <f:ajax render="log_big" />
                                </h:commandButton>
                                <h:panelGroup id="log_big">
                                    <h:outputScript  rendered="#{not empty controller.result}">
                                        onLogProcess("#{controller.result}");
                                    </h:outputScript>
                                </h:panelGroup>
                            </td>
                    </tr>
                    <tr class="operations">
                        <td id="#{trade.murexId}" class="operation_row" colspan="5">
                            <table id="operations">
                                <tr class="header">
                                    <th class="empty_cell"></th>
                                    <th class="operation_cell">Operation</th>
                                    <th>Murex Status</th>
                                    <th>GBO Status</th>
                                    <th>GBO Id</th>
                                    <th>OPICS Id</th>
                                    <th>Time Transaction</th>
                                    <th>Comment</th>
                                    <th id="delete">Delete</th>
                                    <th>Log</th>
                                </tr>
                                <ui:repeat var="operation" value="#{trade.operationsSortDescList}" varStatus="status">
                                    <tr class="operation">
                                        <th class="empty_cell"></th>
                                        <td id="operation" class="operation_cell color">#{operation.operation}</td>
                                        <td class="color">#{operation.statusMurex}</td>
                                        <td id="status_gbo" class="color">#{operation.statusGbo}</td>
                                        <td id="gbo_id" class="color">#{operation.gboId}</td>
                                        <td id="opics_id" class="color">#{operation.opicsId}</td>
                                        <td class="color">#{operation.datetimeToString}</td>
                                        <td class="color">#{operation.coment}</td>
                                        <td class="color checkbox">
                                            <h:selectBooleanCheckbox>
                                                <f:ajax execute="@form" event="click" listener="#{controller.onDelete}" onevent="onDeleteProcess" />
                                                <f:attribute name="murexId" value="#{trade.murexId}" />
                                                <f:attribute name="operationId" value="#{operation.id}" />
                                                <f:attribute name="operation" value="#{operation.operation}" />
                                            </h:selectBooleanCheckbox> 
                                        </td>
                                        <td class="color log">
                                            <h:commandButton image="resources/images/log_small.jpg" action="#{controller.onLogOperation(operation)}">
                                                <f:ajax execute="@form" render="small_log" />
                                            </h:commandButton>
                                            <h:panelGroup id="small_log">
                                                <h:outputScript  rendered="#{not empty controller.result}">
                                                    onLogProcess("#{controller.result}");
                                                </h:outputScript>
                                            </h:panelGroup>
                                        </td>
                                    </tr>
                                </ui:repeat>
                            </table>
                        </td>
                    </tr>
                </h:form>
            </ui:repeat>
   </table> 
```

提前致谢！

**重新编辑：**

我将 h:selectBooleanCheckbox 更改为 h:commandButton。

看法：

```
 <table id="operations">
                                <tr class="header">
                                    <th class="empty_cell"></th>
                                    <th class="operation_cell">Operation</th>
                                    <th>Murex Status</th>
                                    <th>GBO Status</th>
                                    <th>GBO Id</th>
                                    <th>OPICS Id</th>
                                    <th>Time Transaction</th>
                                    <th>Comment</th>
                                    <th id="delete">Delete</th>
                                    <th>Log</th>
                                </tr>
                                <ui:repeat var="operation" value="#{trade.operationsSortDescList}" varStatus="status">
                                    <tr class="operation">
                                        <th class="empty_cell"></th>
                                        <td id="operation" class="operation_cell color">#{operation.operation}</td>
                                        <td class="color">#{operation.statusMurex}</td>
                                        <td id="status_gbo" class="color">#{operation.statusGbo}</td>
                                        <td id="gbo_id" class="color">#{operation.gboId}</td>
                                        <td id="opics_id" class="color">#{operation.opicsId}</td>
                                        <td class="color">#{operation.datetimeToString}</td>
                                        <td class="color">#{operation.coment}</td>
                                        <td class="color checkbox">
                                            <h:commandButton image="resources/images/log_small.jpg" action="#{controller.onDelete(operation)}">
                                                <f:ajax execute="@form" render="small_log" onevent="onDeleteProcess" />
                                            </h:commandButton>
                                        </td>
                                        <td class="color log">
                                            <h:commandButton image="resources/images/log_small.jpg" action="#{controller.onLogOperation(operation)}">
                                                <f:ajax execute="@form" render="small_log" />
                                            </h:commandButton>
                                            <h:panelGroup id="small_log">
                                                <h:outputScript  rendered="#{not empty controller.result}">
                                                    onLogProcess("#{controller.result}");
                                                </h:outputScript>
                                            </h:panelGroup>
                                        </td>
                                    </tr>
                                </ui:repeat>
                            </table> 
```

控制器：

```
public void onDelete(Operation operation) 
{
    Trade trade = operation.getTrade();
    Boolean result = false;

try {
    if (trade.getOperations().size() == 1) {
        result = Modelo.deleteTrade(trade);
        if (result)
            this.trades.remove(trade);
    } else {
        result = Modelo.deleteOperation(operation);
        if (result)
            trade.getOperations().remove(operation);
    }          
} catch(Exception ex) {
    ConfigUtil.LOGGER.error(ex);
} 
```

}

当我删除一个操作时，这就是问题所在。没有，因为 jquery。我对此很确定，因为我测试过它。当我删除一个操作并单击下一个操作时，它会向服务器发送错误的操作。知道为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:31:16.320

首先，我建议使用`datatable`而不是原始 html table 。Datatable 将以任何方式生成类似的 html，但好处是您可以访问服务器组件树。

你真的不需要使用`jQuery`，但我会留到这个，因为如果你必须使用它，你可以使用它，但在这种情况下使用改变

```
<table id="trades"> 
```

至

```
<table id="trades" jsfc="h:dataTable binding="#{controller.dataTable}"> 
```

假设`h`是您对 JSF html 标记库的命名空间引用。

`private javax.faces.component.html.HtmlDataTable dataTable ;`在您的托管 bean 中声明要使用的接缝`controller`。

现在在您的代码中，`listener="#{controller.onDelete}"`您必须在返回之前从服务器端删除它。

* * *

虽然这会实现，但它确实看起来很老套，你最好不要使用`jQuery`，而只是重新渲染数据表，而不是比其他选项更昂贵..

* * *

您可能会发现[此链接](http://balusc.blogspot.com.au/2006/06/using-datatables.html#SelectRowByRadioButton)很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:38:11.710

这可能是因为您在服务器端不知道的情况下更改了视图中的元素。尽量不要直接使用 JQuery 来改变 DOM，而是使用 JSF2 Ajax funcionalities，with`render`和`rerender`属性。

查看[这个问题的答案](https://stackoverflow.com/questions/8922308/how-to-maintain-state-of-the-dom-manipulated-by-jquery-javasscript-when-rerender)

# macos - 在 Mac OS X 上部署 Interbase ToGo

> ID：10003785
> 
> 赞同：0
> 
> 时间：2012-04-04T01:25:46.090
> 
> 标签：macos, delphi, deployment, delphi-xe2, interbase

以下是实验条件：

1.  Interbase ToGo 已获得许可
2.  包括许可证文件夹在内的 Interbase 文件夹与我的名为 myPgm.app 的多平台应用程序位于同一文件夹中，该应用程序由 Delphi XE2 作为 HD-FMX 应用程序开发。

当右键单击 myPgm.app 并从下拉菜单中选择 Show Package Contents 时，我得到以下列表：

内容

```
Info.plist
Mac
    myPgm
    myPgm.rsm
    libcgunwind.1.0.dylib
    libibtogo.dylib
Resources
    Icon.icns 
```

在尝试在 Mac OS XI 上运行基于 Interbase 的应用程序进行大量实验后，得出以下观察结果：

*   如果 Interbase 组件的 DatabaseName 属性没有任何值，myPgm.app 会显示消息：“Database name is missing”</li>
*   如果我用错误或正确的任何值填充该属性，我会收到消息：“产品 INTERBASE 未获得许可”。

按照逻辑，当服务器未嵌入时，DatabaseName 必须以 localhost: 或服务器的实际地址开头，我怀疑 Embarcadero 计划开发人员在实际 .ib 或 .gbd 文件的开头放置一些“魔术”词。

我正在寻找如何将 myPgm.app 与 myIBDb.ib 连接的解决方案，myIBDb.ib 与 myPgm.app 位于同一文件夹中。

遗憾的是 Embarcadero 出售这些 ToGo 许可证（我以 60 美元购买了一个），并且没有关于在 Mac OS X 上指定数据库的路径和名称的指南。相反，在 Win 系统上没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:58:54.157

我想我必须自己提供答案。它是在与 Embarcadero 的支持人员来回交换信息之后发生的。正如您从我的问题中可以感觉到的那样，我从一开始就感觉到这是一个路径问题。本着 FireMonkey 的精神，我通过在任何地方插入 interbase 文件夹来玩“猴子”，但我从未想到的最后一个地方是包内容层次结构的底部，即 MacOS 文件夹内。作为一个 Mac 应用程序，我认为它会遵循 Apple 关于应用程序包的根路径的指南——.app 文件的级别——但不是。查看包内容的快照。（对不起，我没有发布图片的权限）

现在值得庆幸的是，Embarcadero 可以放心地开发桌面数据库驱动的应用程序，从而创建唯一桌面播放器 FileMaker 的替代品。请记住，Mac OS 没有 MS Access 数据库。

# c - 添加元素时的链表段错误

> ID：10003787
> 
> 赞同：0
> 
> 时间：2012-04-04T01:26:12.527
> 
> 标签：c, pointers, linked-list, segmentation-fault, structure

为什么我会遇到分段错误？我用 gdb 运行它，它在`tail_playlist -> next = p_playlist;`.

```
struct playlist_ {
  int album;
  int track_num;
  struct playlist_ *next;
};
typedef struct playlist_  playlists;

struct users_ {
  int user_ID;
  struct playlist_ *playlist;
  struct users_ *next;
};
typedef struct users_ users;

int add_playlist(users *user_pointer,int user_ID,int album_ID,int track_num){

  playlists *head_playlist,*tail_playlist,*curr_playlist,*p_playlist;
  users *curr_users;

  curr_users = user_pointer;
  while(curr_users){

    /* Find this user in link list */
    if(curr_users -> user_ID == user_ID){
      curr_playlist = curr_users -> playlist;

      /* Check if playlist is empty for this user if so, update the empty list*/
      if(curr_playlist -> album == NULL && curr_playlist -> track_num == NULL){
        curr_playlist -> album = album_ID;
        curr_playlist -> track_num = track_num;
        curr_playlist -> next = NULL;
      }else{

        /*Creates a new playlist node with the request album and track number*/
        p_playlist = (playlists *)malloc(sizeof(playlists ));
        p_playlist -> album = album_ID;
        p_playlist -> track_num = track_num;
        p_playlist -> next = NULL;

        /*Traverse Playlist, find the tail node*/
        for(curr_playlist = curr_users -> playlist; curr_playlist -> next; curr_playlist = curr_playlist -> next){

          /*Adds the playlist at the end*/

          tail_playlist = curr_playlist;
        };

        tail_playlist -> next = p_playlist;
      }
      break;
    }
    curr_users = curr_users -> next;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:31:43.853

你有

```
for (curr_playlist = curr_users -> playlist; curr_playlist -> next; curr_playlist = cure_playlist -> next){
    tail_playlist = curr_playlist;
} 
```

如果`curr_playlist -> next`在`NULL`第一次迭代中会发生什么？Then`tail_playlist`永远不会被设置，但它在下一行被取消引用：

```
tail_playlist -> next = p_playlist; 
```

# objective-c - 释放对象后调用方法？

> ID：10003790
> 
> 赞同：0
> 
> 时间：2012-04-04T01:26:35.417
> 
> 标签：objective-c, uinavigationcontroller, release

我正在阅读这段代码，发布`setRegions`后在哪里调用`RootViewController`：我觉得有点奇怪：这是否意味着`RootViewController`仍然可以访问，即使它已发布并`self.navigationController`“拥有”它？

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

    // Create the navigation and view controllers
    RootViewController *rootViewController = [[RootViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *aNavigationController = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    self.navigationController = aNavigationController;
    [aNavigationController release];
    [rootViewController release];

    [rootViewController setRegions:[Region knownRegions]];

    // Configure and display the window
    [window addSubview:[navigationController view]];
    [window makeKeyAndVisible];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T01:33:13.023

这是糟糕的代码。

只要一个对象关心另一个对象，它就应该保留另一个对象。在这种情况下，这条规则被打破了。被`rootViewController`释放，然后正如您所注意到的，在其上调用了一个方法。这可能很危险。

在这种情况下，它可以工作。这是因为`rootViewController`被传递给另一个对象，该对象保留它。所以当我们释放它时，它仍然有一个正的保留计数并且没有被释放。所以我们对它的引用仍然有效，并且调用它的方法工作正常。

但是可以说一些实现发生了变化，`initWithRootViewController:`现在由于某种原因不再保留它的论点（一个你不能一直做的假设）。突然这一切都崩溃了，因为`rootViewController`被释放了。

要解决此问题，您只需移动`[rootViewController release];`到此函数中该对象的最后一个有用引用之后。然后，您的代码变得更加健壮和正确。

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

    // Create the navigation and view controllers
    RootViewController *rootViewController = [[RootViewController alloc] initWithStyle:UITableViewStylePlain];
    [rootViewController setRegions:[Region knownRegions]];
    UINavigationController *aNavigationController = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    self.navigationController = aNavigationController;

    // Release temporary objects since we've now sent them to other other objects
    // which may or may not retain them (we don't really care which here)
    [aNavigationController release];
    [rootViewController release];

    // Configure and display the window
    [window addSubview:[navigationController view]];
    [window makeKeyAndVisible];
} 
```

* * *

最后要注意的是：`release`和`dealloc`是非常不同的东西。 `release`不一定会破坏对象。它只是将`retain`计数减一。如果该`retain`计数变为零，*则只有在那时*才会释放对象。所以这段代码有效，因为 a`release`发生但没有触发 a `dealloc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:31:21.917

以上是非常危险的代码。它可能会起作用，但它只是变得幸运。释放变量后，您永远不应该访问它。事实上，`nil`如果变量没有立即超出范围，最好在释放变量后立即将其设置为。有些人只在发布模式下这样做，因此创建一个宏，如：

```
#ifdef DEBUG
#define RELEASE(x) [x release];
#else
#define RELEASE(x) [x release]; x = nil;
#endif 
```

这样做的原因是为了帮助在调试模式下捕获错误（通过崩溃而不仅仅是一个静默`nil`指针），同时在发布模式下更安全一些。

但在任何情况下，您都不应该在释放变量后访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T01:41:09.447

```
RootViewController *rootViewController = [[RootViewController alloc] initWithStyle:UITableViewStylePlain]; 
```

（objectA创建，retain count为1，rootViewController指向它）

```
UINavigationController *aNavigationController = [[UINavigationController alloc] initWithRootViewController:rootViewController]; 
```

（objectB创建，retain count为1，aNavigationController指向它）（objectA的retain count现在为2，rootViewController和self.aNavigationController中的一些属性都指向它）

```
self.navigationController = aNavigationController; 
```

（objectB 保留计数现在为 2，aNavigationController 和 self.navigationController 都指向它；假设 self.navigationController 是一个保留属性）

```
[aNavigationController release]; 
```

（objectB 保留计数现在为 1，但是，aNavigationController 和 self.navigationController 都指向它）

```
[rootViewController release]; 
```

（objectA 的保留计数现在为 1，但是 rootViewController 和 self.aNavigationController 中的某些属性都指向它）

```
[rootViewController setRegions:[Region knownRegions]]; 
```

（使用rootViewController访问objectA）（这样不好）

以下是我推荐的方式：

```
RootViewController *rootViewController = [[[RootViewController alloc] initWithStyle:UITableViewStylePlain] autorelease];
[rootViewController setRegions:[Region knownRegions]];

UINavigationController *aNavigationController = [[[UINavigationController alloc] initWithRootViewController:rootViewController] autorelease];
self.navigationController = aNavigationController; 
```

# c - 非线程安全库和线程

> ID：10003792
> 
> 赞同：0
> 
> 时间：2012-04-04T01:26:44.857
> 
> 标签：c

对线程使用非线程安全库。假设我有一个与服务器建立连接的库。而且它是非线程安全的。我可以在 2 个线程内使用启动库吗？

IE：

```
thread_1(){
telnet_lib_t *connection1;

while(1){
do_somestuff
}

free_telnet(connection1);
}

thread_2(){
telnet_lib_t *connection2;

while(1){
     do_somestuff;
}

free_telnet(connection2);
} 
```

这行得通吗？现在我有 2 个独立的库实例正在运行。所以他们不会互相干扰，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:31:57.643

不，你不能这样做。如果库没有全局状态并且它的函数只是内部非线程安全的，您可以通过让整个库受互斥锁保护并且只允许一个线程一次访问它来解决问题（但这可能会令人望而却步，特别是如果库执行任何缓慢或阻塞的任务）。但是，如果库从根本上具有它使用的单一全局状态，并且无法保存/恢复/交换状态，那么根本无法在多个线程中使用它（甚至无法在非线程程序中交替使用多个上下文）。这样的库通常被认为是垃圾，应该被替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:31:10.013

这取决于为什么它不是线程安全的。

例如，如果库使用一些静态变量，那么它仍然会在两个线程之间共享。

所以，通常这是一个坏主意。如果某些东西不是线程安全的，请不要在线程中使用它，但是，您可以派生一个子进程然后使用它，这比线程重，但更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T01:31:18.283

如果不了解更多关于非线程安全库的细节，就不可能按照您的建议说它是安全的。

如果库有任何全局共享资源（例如全局变量），两个线程很可能会互相踩踏，以库编写者不希望的方式覆盖该全局变量。

问题是，再多的测试都无法确定您*最终*不会引发冲突。

如果您必须并行使用库，我能想到的唯一安全方法是使用进程隔离...创建多个子进程，每个子进程都加载库的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T01:35:30.667

只有当您知道 the`telnet_lib_t`及其方法不适用于任何全局状态（即它们不依赖于全局变量）时，您才能这样做。如果您知道库的状态包含在其内部， **请确保**使用它，否则不要这样做。即使您在测试过程中没有遇到任何问题，也并不意味着某个地方没有问题。

# asp.net - NHibernate 关系

> ID：10003793
> 
> 赞同：0
> 
> 时间：2012-04-04T01:26:45.967
> 
> 标签：asp.net, nhibernate, fluent-nhibernate

我正在使用 NHibernate，我得到以下代码：

```
public class User
{
  public User()
  {
    public virtual int Id { get; set; }
    public virtual IList<UserConfirmation> UserConfirmation { get; set; }
    public virtual string Email;
  }

  public User()
  {
    UserConfirmation = new List<UserConfirmation>();
    }
}

public class UserConfirmation
{
  public virtual int Id { get; set; }
  public virtual User { get; set; }
}

public class UserMap :      ClassMap<User>
{
  public UserMap()        
  {
  Id(x => x.Id);            
  Map(x => x.Email);           
  HasMany(x => x.UserConfirmation)
    .Inverse()
    .Cascade.All();
  Table("user");
} 
```

}

```
public class UserConfirmationMap : ClassMap<UserConfirmation>
{
    public UserConfirmationMap()
      {
        Id(x => x.Id);            
        References(x => x.User);
        Table("user_confirmation");
    }
} 
```

但是当我尝试这样查询时：

```
QueryOver<UserConfirmation>().Where(x => x.User.Email).Take(1).SingleOrDefault() 
```

比它说我没有属性User.Email。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:53:50.577

问题是您正在使用 x => x.User.Email 这应该使用另一个别名来完成，这将是用户

```
UserConfirmation userConfirmationAlias;
User userAlias;

    QueryOver<UserConfirmation>(() => userConfirmationAlias)
    .joinAlias(() => userConfirmationAlias.User , () => userAlias)
    .Where(() => userAlias.Email).Take(1).SingleOrDefault() 
```

像上面这样的东西应该可以解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:38:36.267

我想你想要这样的东西。

```
QueryOver<User>().Where(x => x.Email).Take(1).SingleOrDefault() 
```

x 应该已经是用户了。如果不是，我会使用智能感知来查看它认为它是什么类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T04:53:43.570

尝试做：

```
IQueryOver<UserConfirmation,User> qo = _Session.QueryOver<UserConfirmation,User>().Where(x => x.User.Email).Take(1).SingleOrDefault(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T13:14:54.927

您可以使用 LINQ 而不是 QueryOver：

```
Query<UserConfirmation>().Where(x => x.User.Email).Take(1).SingleOrDefault() 
```

顺便说一句，`.Take(1).SingleOrDefault()`可能不需要。如果`Email`是唯一的，`.SingleOrDefault()`就足够了。否则，您可以使用`.FirstOrDefault()`

# haskell - Haskell 函数从左到右

> ID：10003796
> 
> 赞同：19
> 
> 时间：2012-04-04T01:27:14.153
> 
> 标签：haskell, clojure

我有一个经常使用的函数，它允许我以一种对我来说更自然的方式编写代码。

```
infixl 6 $:
($:) :: a -> (a -> b) -> b
a $: f = f a 
```

这让我可以做类似的事情

```
let x = getData
        $: sort
        $: group
        $: aggregate 
```

代替

```
let x = aggregate 
        $ group 
        $ sort 
        $ getData 
```

我最近了解到 Clojure 内置了类似的东西（我不太了解 Clojure，但我认为它会被编写`(-> getData sort group aggregate)`？）这让我想知道 Haskell 是否也内置了它。不过， Hoogle[没有任何结果](http://www.haskell.org/hoogle/?hoogle=a+-%3E+%28a+-%3E+b%29+-%3E+b)。

是否有包含类似内容的标准库？如果我有这样一个共同的部分是特殊的，它可能会让其他人难以阅读我的代码。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-04T01:32:41.697

没有内置这样的东西，但[`Control.Category.(>>>)`](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Control-Category.html#v%3a-62--62--62-)很接近：它是`flip (.)`，所以你可以写

```
f x = x $: sort $: group $: aggregate 
```

作为

```
f = sort >>> group >>> aggregate 
```

您的组合器[不乏定义和名称。](http://holumbus.fh-wedel.de/hayoo/hayoo.html?query=a%20-%3E%20%28a%20-%3E%20b%29%20-%3E%20b&start=0)`($:)`我认为函数往往比简单的应用程序更适合管道风格，所以我觉得对它没有太大的需求；`(>>>)`不过有点难看。

（此外，Haskell 的非严格语义意味着数据的流动不一定是箭头指向的方向；毕竟，它甚至可以在有机会查看参数`aggregate`之前提供第一个构造`sort`函数。所以我倾向于只需使用`(.)`and `($)`；我已经习惯了这个顺序。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-15T14:07:00.687

您所描述的反向应用程序运算符现在是标准包`base`（自 4.8.0 起）的一部分，作为[`&`operator](https://hackage.haskell.org/package/base-4.8.2.0/docs/Data-Function.html#v:-38-)。

请注意，此运算符的定义优先级低于您建议的 ( `infixl 1`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-06T13:59:53.947

在 Hackage 中有一个名为 Flow ( [https://hackage.haskell.org/package/flow-1.0.10/docs/Flow.html](https://hackage.haskell.org/package/flow-1.0.10/docs/Flow.html) ) 的库，由 Taylor Fausak 为这个确切的需求而创建。

它使用`|>`运算符（受 F# 启发）充当最后一个线程。

例如：

```
3 |> succ |> recip |> negate
-0.25 
```

# ruby-on-rails - 如何在 Rails 中以嵌套形式更新子对象

> ID：10003806
> 
> 赞同：2
> 
> 时间：2012-04-04T01:28:16.230
> 
> 标签：ruby-on-rails, view, controller, parent-child, nested-forms

我有一个嵌套表单 Parent，它接受 Child 的属性。在我的控制器#new 中，我这样做了

```
 @parent = Parent.new
  @parent.childs.build 
```

嵌套形式工作正常

为了更新父母和孩子，在我的控制器#edit中，我有

```
 @parent = Parent.find(params[:id])
  @parent.childs.build unless not @parent.childs.empty? 
```

现在，如果我去编辑页面，只会显示父字段。我的问题是：如何让 Rails 知道我想要 Parent 和 Child 的表单，而不仅仅是 Parent？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T02:56:46.697

使用`fields_for`助手 - 它几乎可以为你做所有事情。

```
<%= form_for @parent do |f| %>
  <%= f.text_field :name %>
  <%= f.fields_for :children, @parent.children do |c| %>
    <%= c.text_field :name %>
  <% end %>
<% end %> 
```

*   [Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

# testng - TestNG - 带有故障安全插件的自定义报告侦听器问题

> ID：10003812
> 
> 赞同：2
> 
> 时间：2012-04-04T01:28:39.127
> 
> 标签：testng, maven-failsafe-plugin

我有一个项目，我在其中使用 maven`fail-safe`插件来运行集成测试。我正在使用`Maven + TestNG`框架组合。为了项目的目的，之前我已经修改了TestNG的默认***XML报告***来定制项目的需要。

我在扩展 TestNG接口的*CustomReporter*类中实现了上述要求。`IReporter`早些时候我使用`surefire`插件来运行这些测试方法，并`listener mechanism`在surefire插件中添加按预期工作。

现在对于某些项目需求，我需要迁移到故障安全插件。所以我通过配置POM文件绕过了`test`阶段执行。`surefire`

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
            <skip>true</skip>
        </configuration>
</plugin> 
```

然后我在 POM 文件中添加了故障安全配置，如下所示；

```
 <

plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.12</version>
    <executions>
        <execution>
            <id>fail-safe-myplug</id>
            <phase>integration-test</phase>
            <goals>
                <goal>integration-test</goal>
            </goals>
            <configuration>
                <skip>false</skip> 
                    <properties>                
                        <property>  
                        <name>listener</name>
                            <value>com.CustomXmlReport</value>
                                </property>
                            </properties>
                            <includes>
                                <include>**/*Test.java</include>
                            </includes>                     
                        </configuration>
                    </execution>
                </executions>

            </plugin> 
```

使用这个新的 POM，使用插件的集成测试调用`failsafe`失败。以下是日志；

```
Running com.myPack.AppTest
Configuring TestNG with: org.apache.maven.`surefire`.testng.conf.TestNGMapConfigurator@ab50cd
org.apache.maven.surefire.util.`SurefireReflectionException: java.lang.reflect.InvocationTargetException`; nested exception is java.lang.reflect.InvocationTargetException: null
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
Caused by: java.lang.IncompatibleClassChangeError: Expected static method org.testng.reporters.XMLReporterConfig.getTimestampFormat()Ljava/lang/String;
    at com.myPack.CustomSuiteResultWriter.getTestResultAttributes(CustomSuiteResultWriter.java:175)
    at com.myPack.CustomSuiteResultWriter.addTestResult(CustomSuiteResultWriter.java:138)
    at com.myPack.CustomSuiteResultWriter.addTestResults(CustomSuiteResultWriter.java:117)
    at com.myPack.CustomSuiteResultWriter.writeAllToBuffer(CustomSuiteResultWriter.java:76)
    at com.myPack.CustomSuiteResultWriter.writeSuiteResult(CustomSuiteResultWriter.java:56)
    at com.myPack.CustomXmlReportGenerator.writeSuiteToBuffer(CustomXmlReportGenerator.java:102)
    at com.myPack.CustomXmlReportGenerator.writeSuite(CustomXmlReportGenerator.java:65)
    at com.myPack.CustomXmlReportGenerator.generateReport(CustomXmlReportGenerator.java:42)
    at org.testng.TestNG.generateReports(TestNG.java:780)
    at org.testng.TestNG.run(TestNG.java:766)
    at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:76)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:112)
    at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:115)
    ... 9 more 
```

尽管我`failsafe`在阶段使用插件，但`integration-test`我得到了异常

*使用：org.apache.maven 配置 TestNG。`surefire`.testng.conf.TestNGMapConfigurator@ab50cd org.apache.maven.surefire.util.`SurefireReflectionException*

如何解决这个问题？

注意：当我尝试使用`surefire`插件执行测试时，**侦听器机制**按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:50:12.967

实际上问题在于`Failsafe`与`TestNG`版本的兼容性。我正在`TestNG 5.9v`使用`failsafe plugin 2.12v`. 这是问题的根本原因。

I downgraded the `Failsafe` version to `2.5v` and the issue got resolved.

Thanks to google groups for guiding me to think in version perspective. [http://groups.google.com/group/testng-users/browse_thread/thread/b54417e5a61c5c62](http://groups.google.com/group/testng-users/browse_thread/thread/b54417e5a61c5c62)

# javascript - 访问backbone.js中两个视图的集合

> ID：10003815
> 
> 赞同：0
> 
> 时间：2012-04-04T01:28:58.043
> 
> 标签：javascript, backbone.js, requirejs

嗨，我有一个集合和两个视图。在我的 view1 上，我正在将数据添加到我的集合中，而 view2 只会渲染和显示有关集合的任何更改。但我无法让它工作。问题最初是我正在这样做

```
return new CartCollection(); 
```

但是他们说这是一种不好的做法，所以我删除更改了它。但是当我在 view1 上实例化购物车集合时，它会添加但似乎 view2 没有看到更改并且什么也不呈现。

有任何想法吗？

这是我的购物车收藏。

```
define([
 'underscore',
 'backbone',
 'model/cart'
], function(_, Backbone, CartModel) {
var CartCollection = Backbone.Collection.extend({
model : CartModel,
initialize: function(){
}
});
return CartCollection;
}); 
```

这是我的 itemView ( view1 )

```
AddToCart:function(ev){
    ev.preventDefault();
    //get data-id of the current clicked item
    var id = $(ev.currentTarget).data("id");
    var item = this.collection.getByCid(id);
    var isDupe = false;
    //Check if CartCollection is empty then add
    if( CartCollection.length === 0){
        CartCollection.add([{ItemCode:item.get("ItemCode"),ItemDescription:item.get("ItemDescription"),SalesPriceRate:item.get("RetailPrice"),ExtPriceRate:item.get("RetailPrice"),WarehouseCode: "Main",ItemType : "Stock",LineNum:1 }]);
    }else{
        //if check if the item to be added is already added, if yes then update QuantityOrdered and ExtPriceRate
        _.each(CartCollection.models,function(cart){
            if(item.get("ItemCode") === cart.get("ItemCode")){
                isDupe = true;
                var updateQty = parseInt(cart.get("QuantityOrdered"))+1;
                var extPrice = parseFloat(cart.get("SalesPriceRate") * updateQty).toFixed(2);
                cart.set({ QuantityOrdered: updateQty });
                cart.set({ ExtPriceRate: extPrice });
            }
        });
        //if item to be added has no duplicates add new item
        if( isDupe == false){ 
            var cartCollection = CartCollection.at(CartCollection.length - 1);
            var lineNum = parseInt( cartCollection.get("LineNum") ) + 1;
            CartCollection.add([{ItemCode:item.get("ItemCode"),ItemDescription:item.get("ItemDescription"),SalesPriceRate:item.get("RetailPrice"),ExtPriceRate:item.get("RetailPrice"),WarehouseCode: "Main",ItemType : "Stock",LineNum:lineNum}]); 
            }
    }
    CartListView.render();
} 
```

我的购物车视图 (view2)

```
render: function(){
  this.$("#cartContainer").html(CartListTemplate);
  var CartWrapper = kendobackboneModel(CartModel, {
     ItemCode: { type: "string" },
     ItemDescription: { type: "string" },
     RetailPrice: { type: "string" },
     Qty: { type: "string" },
  });
  var CartCollectionWrapper = kendobackboneCollection(CartWrapper);
  this.$("#grid").kendoGrid({
    editable: true,
    toolbar: [{ name: "save", text: "Complete" }],
    columns: [
        {field: "ItemDescription", title: "ItemDescription"},
        {field: "QuantityOrdered", title: "Qty",width:80},
        {field: "SalesPriceRate", title: "UnitPrice"},
        {field: "ExtPriceRate", title: "ExtPrice"}
    ],
    dataSource: {
      schema: {model: CartWrapper},
      data: new CartCollectionWrapper(CartCollection),
     }
  });

}, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T07:49:30.850

问题是您创建了 2 个不同的 CartCollection 实例。因此，当您将数据更新或获取到一个实例中时，另一个实例不会更改但保持不变。

相反，您需要在 2 个视图中使用相同的 CartCollection 实例（或者保持 2 个不同步）。假设两个视图都在同一个 require.js 模块中，您需要：

1) 实例化 CartCollection 实例并将其存储在两个视图都可以访问的位置。你可以把它放在路由器、父视图或其他任何地方。例如

```
var router = Backbone.Router.extend({});
router.carts = new CartCollection(); 
```

2）您需要将 CartCollection 实例传递给您的每个视图。例如

```
var view1 = new ItemView({ collection: router.carts });
var view2 = new CartView({ collection: router.carts }); 
```

您可能还想将 Cart 模型传递给 CartView 而不是整个集合。例如

```
var cartModel = router.carts.get(1);
var view2 = new CartView({ model: cartModel }); 
```

# php - 如何制作将逗号分隔的文本文件 .csv 转换为 mysql 数据库字段的脚本？

> ID：10003818
> 
> 赞同：-1
> 
> 时间：2012-04-04T01:29:14.923
> 
> 标签：php, mysql, database, csv, converter

感谢您的帮助！！！

好的...所以我正在尝试编写一个脚本，该脚本将获取 .csv 文件的内容并将它们导入到 mySQL 数据库中的单个表中。我希望脚本在该表中为 .csv 文件中的每个列/标题创建字段。

我的 .csv 数据如下所示（我只包括前两行）：

```
<?php
    "PROGRAMNAME","PROGRAMURL","CATALOGNAME","LASTUPDATED","NAME","KEYWORDS","DESCRIPTION","SKU","MANUFACTURER","MANUFACTURERID","UPC","ISBN","CURRENCY","SALEPRICE","PRICE","RETAILPRICE","FROMPRICE","BUYURL","IMPRESSIONURL","IMAGEURL","ADVERTISERCATEGORY","THIRDPARTYID","THIRDPARTYCATEGORY","AUTHOR","ARTIST","TITLE","PUBLISHER","LABEL","FORMAT","SPECIAL","GIFT","PROMOTIONALTEXT","STARTDATE","ENDDATE","OFFLINE","ONLINE","INSTOCK","CONDITION","WARRANTY","STANDARDSHIPPINGCOST"
    "TeesforAll.com & WearYourBeer.com","http://www.teesforall.com, http://www.wearyourbeer.com","Product Catalog","10/01/2012","Karate Kid Cobra Kai All Valley '84 Gold Graphic T-Shirt","Karate Kid","Officially licensed Karate Kid Cobra Kai All Valley '84 Gold T-Shirt.  Features the Cobra Kai circle logo with '84 on the front.  100% cotton.","ey_84_Gold_Graphic_TShirt-p-2778.html","Karate Kid","","","","USD","","12.99","","","http://www.jdoqocy.com/click-4110789-10569779?url=http%3A%2F%2Fwww.teesforall.com%2FKarate_Kid_Cobra_Kai_All_Valley_84_Gold_Graphic_TShirt-p-2778.html","http://www.ftjcfx.com/image-4110789-10569779","http://www.teesforall.com/images/Karate_Kid_Cobra_Kai_Gold_Shirt.jpg","Mens - Shirts","","","","","","","","","","","","","","","","YES","","","" 
```

所以我想我会使用这样的东西：

```
$source_file  = "catalogs/tees4all.txt";
$handle = fopen("catalogs/tees4all.txt", "r");

while (($data = fgetcsv($handle)) !== FALSE) {
  var_dump($data);
} 
```

$data 的 var_dump 输出这个...基本上每一行都是一个数组：

```
array(40) { [0]=> string(11) "PROGRAMNAME" [1]=> string(10) "PROGRAMURL" [2]=> string(11) "CATALOGNAME" [3]=> string(11) "LASTUPDATED" [4]=> string(4) "NAME" [5]=> string(8) "KEYWORDS" [6]=> string(11) "DESCRIPTION" [7]=> string(3) "SKU" [8]=> string(12) "MANUFACTURER" [9]=> string(14) "MANUFACTURERID" [10]=> string(3) "UPC" [11]=> string(4) "ISBN" [12]=> string(8) "CURRENCY" [13]=> string(9) "SALEPRICE" [14]=> string(5) "PRICE" [15]=> string(11) "RETAILPRICE" [16]=> string(9) "FROMPRICE" [17]=> string(6) "BUYURL" [18]=> string(13) "IMPRESSIONURL" [19]=> string(8) "IMAGEURL" [20]=> string(18) "ADVERTISERCATEGORY" [21]=> string(12) "THIRDPARTYID" [22]=> string(18) "THIRDPARTYCATEGORY" [23]=> string(6) "AUTHOR" [24]=> string(6) "ARTIST" [25]=> string(5) "TITLE" [26]=> string(9) "PUBLISHER" [27]=> string(5) "LABEL" [28]=> string(6) "FORMAT" [29]=> string(7) "SPECIAL" [30]=> string(4) "GIFT" [31]=> string(15) "PROMOTIONALTEXT" [32]=> string(9) "STARTDATE" [33]=> string(7) "ENDDATE" [34]=> string(7) "OFFLINE" [35]=> string(6) "ONLINE" [36]=> string(7) "INSTOCK" [37]=> string(9) "CONDITION" [38]=> string(8) "WARRANTY" [39]=> string(20) "STANDARDSHIPPINGCOST" } 

array(40) { [0]=> string(33) "TeesforAll.com & WearYourBeer.com" [1]=> string(54) "http://www.teesforall.com, http://www.wearyourbeer.com" [2]=> string(15) "Product Catalog" [3]=> string(10) "10/01/2012" [4]=> string(56) "Karate Kid Cobra Kai All Valley '84 Gold Graphic T-Shirt" [5]=> string(10) "Karate Kid" [6]=> string(142) "Officially licensed Karate Kid Cobra Kai All Valley '84 Gold T-Shirt. Features the Cobra Kai circle logo with '84 on the front. 100% cotton." [7]=> string(37) "ey_84_Gold_Graphic_TShirt-p-2778.html" [8]=> string(10) "Karate Kid" [9]=> string(0) "" [10]=> string(0) "" [11]=> string(0) "" [12]=> string(3) "USD" [13]=> string(0) "" [14]=> string(5) "12.99" [15]=> string(0) "" [16]=> string(0) "" [17]=> string(150) "http://www.jdoqocy.com/click-4110789-10569779?url=http%3A%2F%2Fwww.teesforall.com%2FKarate_Kid_Cobra_Kai_All_Valley_84_Gold_Graphic_TShirt-p-2778.html" [18]=> string(44) "http://www.ftjcfx.com/image-4110789-10569779" [19]=> string(68) "http://www.teesforall.com/images/Karate_Kid_Cobra_Kai_Gold_Shirt.jpg" [20]=> string(13) "Mens - Shirts" [21]=> string(0) "" [22]=> string(0) "" [23]=> string(0) "" [24]=> string(0) "" [25]=> string(0) "" [26]=> string(0) "" [27]=> string(0) "" [28]=> string(0) "" [29]=> string(0) "" [30]=> string(0) "" [31]=> string(0) "" [32]=> string(0) "" [33]=> string(0) "" [34]=> string(0) "" [35]=> string(0) "" [36]=> string(3) "YES" [37]=> string(0) "" [38]=> string(0) "" [39]=> string(0) "" } 
```

我希望有人可以帮助我从 $data 获取列和行匹配的数据库表......与 CSV 的标题和行！

谢谢你 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:45:30.337

如果你想用 php 做这个，试试这个。

```
<?

$source_file  = "catalogs/tees4all.txt";
$handle = fopen("catalogs/tees4all.txt", "r");

$col_names = implode(",", fgetcsv($handle)); // Getting comma separated list of col names

$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
mysql_select_db("yourdbhere");
while (($data = fgetcsv($handle)) !== FALSE) {
    $values = "";
    foreach($data as $key => $value) {
        if ($key != 0) $values .= ", ";
        $values .= "'".mysql_escape_string($value)."'";
    }
    mysql_query('INSERT INTO yourtablehere ('.$col_names.') VALUES ('.$values.')');
} 
```

或者只是使用[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# view - 多租户应用程序中的自定义标头

> ID：10003819
> 
> 赞同：0
> 
> 时间：2012-04-04T01:29:22.553
> 
> 标签：view, symfony1, symfony-1.4

我有一个带有自定义标题的多租户应用程序，基本上是客户的徽标和一些链接。

标题在大多数模块中都是可见的，但需要从数据库中读取徽标设置。我如何最好地组织这个？

如果我使用一个组件，我必须将它粘贴到所有模块中。我可以更好地集中插槽吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:31:09.140

您有 2 个选项。

首先，一个[component_slot](http://www.symfony-project.org/book/1_2/07-Inside-the-View-Layer#chapter_07_component_slots)（链接到 1.2 文档，但在 1.4 中没问题）。您为应用程序定义了它，您可以为特定模块重新定义它。

二是[基本组成部分](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/19#chapter_19_language_switching)。它将始终执行相同的操作，您无法重新定义它。您不必将其粘贴到所有模块中，您可以在模块 Y 的模板中从模块 X 调用组件。

# objective-c - Cocoa Mac 表圆角（如 Xcode 4）

> ID：10003824
> 
> 赞同：6
> 
> 时间：2012-04-04T01:30:12.293
> 
> 标签：objective-c, macos, cocoa

有谁知道如何制作圆角的可可片，如下图所示？

## Xcode 4 圆角表

![Xcode 4 表 - 圆角](../Images/2bbb399ba1e32b773522ac75583e3d3e.png)

我已经看遍了，但我似乎找不到任何东西。我不确定我是否在寻找错误的地方，或者这不是一种常见的做法。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T02:15:46.843

**编辑：**事实证明，如果您的目标是 OS X Lion 或更高版本，这种行为会更容易——只需调用`[sheet setOpaque:NO]`就足以启用圆角。

* * *

这种行为很容易重现。将您的工作表初始化为透明的无边框窗口：

```
self.sheet = [[NSWindow alloc] initWithContentRect:NSMakeRect(0, 0, 300, 300) styleMask:NSBorderlessWindowMask backing:NSBackingStoreBuffered | NSTitledWindowMask defer:YES];
[self.sheet setOpaque:NO];
[self.sheet setBackgroundColor:[NSColor clearColor]]; 
```

将自定义视图添加为子视图：

```
[[self.sheet contentView] addSubview:[[IFWindowView alloc] initWithFrame:[[self.sheet contentView] frame]]]; 
```

该自定义视图应按如下方式进行绘制：

```
#define RADIUS 5.0
NSBezierPath *bezierPath = [NSBezierPath bezierPathWithRoundedRect:NSMakeRect(self.bounds.origin.x, self.bounds.origin.y + RADIUS, self.bounds.size.width, self.bounds.size.height) xRadius:RADIUS yRadius:RADIUS];
[[NSColor windowBackgroundColor] set]; // In production, use the appropriate color with alpha for transparency.
[bezierPath fill]; 
```

下面是一些示例代码来演示这一点：http: [//d.pr/l9DB](http://d.pr/l9DB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:43:17.393

据我所知，这是窗口的一个属性。如果是面板，它有方角，如果是窗口，则有圆角。至少这就是在 Mac OS 下发生的事情——不能保证 iOS。

# android - android中带有文本的内联图像

> ID：10003827
> 
> 赞同：1
> 
> 时间：2012-04-04T01:30:59.923
> 
> 标签：android, html

我正在尝试下载网页供用户稍后查看。到目前为止，我已经下载了 html 和图像。我可以让 HTML 以很好的格式显示出来，但我无法让图像内联。

到目前为止我使用的代码：

这是我获取文章的方法。

```
MyImageGetter mig = new MyImageGetter(this, urlId);

Spanned span = Html.fromHtml(contents[1], mig, null);
contents[1] = span.toString();

titleView.setText(contents[0]);
content.setText(contents[1]); 
```

contents[] 是一个包含两个字符串的数组。contents[0] 是一个简单的字符串，contents[1] 是一个带有 HTML 标记的字符串。

MyImageGetter：

```
public class MyImageGetter implements Html.ImageGetter{

String urlId = null;
Context c = null;

public MyImageGetter(ArticleViewer articleViewer, String urlId2) {
    c = articleViewer;
    urlId = urlId2;
}

public Drawable getDrawable(String source) {
    String[] brokenUrl = source.split("/");
    String imgName = brokenUrl[brokenUrl.length-1];

    File image = new File("/data/data/com.theHoloDev.Reader/Offline/" + urlId + "/" + imgName);
    Log.w("MyApp", image.getAbsolutePath());
    Bitmap bm = BitmapFactory.decodeFile(image.getAbsolutePath());

    Drawable d = new BitmapDrawable(c.getResources(), bm);

    return d;
}

} 
```

当我记录`image.getAbsolutePath()`它时，它会出现一个存在于 ddms 中的文件。文本内容完美无缺，但每个图像中仍有小黑框显示 obj。我原以为 textview 仍然能够以这种方式显示图像，但要么我做错了什么，要么有另一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:49:35.930

你想要的最终结果是什么？看到您正在显示 html 但您希望用户看到页面......没有 html 或者您这样做是为了调试，这令人困惑？我假设用户不会看到 html 而是页面本身。在这种情况下，我会选择 webview。 [http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

我不认为文本视图应该像您使用它一样使用。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:13:58.247

我想到了。代替：

```
Spanned span = Html.fromHtml(contents[1], mig, null);
contents[1] = span.toString();

content.setText(contents[1]); 
```

我需要：

```
Spanned span = Html.fromHtml(contents[1], mig, null);
content.setText(span); 
```

我在将跨度设置为字符串时遇到了问题。

# python - Python如何区分作为类成员的回调函数？

> ID：10003833
> 
> 赞同：31
> 
> 时间：2012-04-04T01:31:28.597
> 
> 标签：python

请看简单的例子：

```
class A:
  def __init__(self, flag):
    self.flag = flag

  def func(self):
    print self.flag

a = A(1)
b = A(2)
callback_a = a.func
callback_b = b.func

callback_a()
callback_b() 
```

结果是：

```
1
2 
```

它按预期运行。但我有一个问题。在 C 中，回调函数作为指针传递。在 Python 中，它应该有类似的方法来执行此操作，因此调用者知道函数的地址。但是在我的例子中，不仅传递了函数指针，还传递了参数（self），因为同一个类的同一个方法打印出不同的结果。所以我的问题是：

1.  Python中的这种方法是否在内存中只有一个副本？我的意思是任何方法的代码都只有一个副本，在我的示例中，该方法本身不会被克隆。我认为它应该只有一个副本，但在这里我仍然提出这个问题以获得更多输入。

2.  我记得 Python 中的一切都是对象。那么在我的示例中，是否有两个具有不同参数但只有一份代码副本的函数实例？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-04T01:34:33.413

在 Python 中，回调不仅仅是对成员函数的引用。相反，它被“绑定”到它在创建时引用的对象。因此`a.func`创建了一个绑定到的可调用对象`a`，并`b.func`创建了一个绑定到 的可调用对象`b`。

Python 只需要一种`func()`在内存中的实现，但它可能会在运行时创建一个或多个“蹦床”函数来完成绑定（我不确定这方面的内部细节，无论如何 Python 实现之间会有所不同）。

如果你打印`id(callback_a)`，`id(callback_b)`你会得到不同的结果，表明它们确实是不同的可调用对象。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-04T01:42:59.113

特定于 CPython，函数对象只有一份副本。在实例创建期间，该类将其命名空间中的未绑定函数包装为绑定方法。但是它们都包装了相同的功能。

这是您的示例扩展以显示正在发生的事情。

```
class A(object):
  def __init__(self, flag):
    self.flag = flag

  def func(self):
    print self.flag

a = A(1)
b = A(2)

callback_a = a.func
callback_b = b.func

print "typeof(callback_a) = {0}".format(type(callback_a))
print "typeof(callback_b) = {0}".format(type(callback_b))

print "typeof(callback_a.__func__) = {0}".format(type(callback_a.__func__))
print "typeof(callback_b.__func__) = {0}".format(type(callback_b.__func__))

print "'callback_a.__func__ is callback_b.__func__'  is {0}".format(callback_a.__func__ is callback_b.__func__)

callback_a()
callback_b() 
```

此代码输出

```
typeof(callback_a) = <type 'instancemethod'>
typeof(callback_b) = <type 'instancemethod'>
typeof(callback_a.__func__) = <type 'function'>
typeof(callback_b.__func__) = <type 'function'>
'callback_a.__func__ is callback_b.__func__'  is True 
```

您可以使用`is`运算符清楚地看到两个`instancemethod`类共享同一个函数对象。

# ajax - 转换AJAX调用避免跨域问题

> ID：10003837
> 
> 赞同：0
> 
> 时间：2012-04-04T01:32:16.803
> 
> 标签：ajax, cordova, cross-domain

我正在尝试将以下代码转换为另一个 AJAX 调用，以免出现跨域问题！

这是我的原始代码：

```
<script>   
        $(document).ready(function() {
            $("#os").load('http://www.a.gr/os #livesos');
            var refreshId = setInterval(function() {
               $("#os").load('http://www.a.gr/os #livesos');
            }, 60000);
            $.ajaxSetup({ cache: false });
        });     
</script> 
```

这是我想做的示例代码，但我不知道如何...

```
$.ajax({
type: "GET",
cache: false,
url: 'http://www.a.gr/os',
dataType: "???",
.
.
.
.
}); 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:44:32.410

避免跨域问题的最佳选择是让电话呼叫您的服务器，服务器可以呼叫其他服务器以获取所需的数据。

这样做有几个好处，一个是您可以缓存最近的调用，如果它不经常更改，并且更快地将其发送回客户端。

此外，如果您想稍后更改 url 或进行其他调用以返回更丰富的数据，您可以在不影响客户端的情况下执行此操作。

# c# - Visual C# 错误：命名空间“System.IO”中不存在类型或命名空间名称“Compression”

> ID：10003838
> 
> 赞同：1
> 
> 时间：2012-04-04T01:32:17.843
> 
> 标签：c#, build, compiler-errors, visual-c#-express-2010

我正在尝试编译一个平铺地图编辑器，以便可以使用它来处理游戏，但是当我尝试时出现错误“名称空间‘System.IO’中不存在类型或名称空间名称‘压缩’”在 Visual C# 中构建。有谁知道我该如何解决这个问题？我试过谷歌，但我什么也没找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T01:33:59.700

您可能没有对 .NET 的引用`System.dll`，或者您使用的是 .NET 2.0 版之前的版本。

# javascript - 画布错误中的旋转和缓存

> ID：10003840
> 
> 赞同：0
> 
> 时间：2012-04-04T01:32:28.340
> 
> 标签：javascript, html, caching, object, canvas

我正在制作一个游戏，我希望能够使用缓存的画布而不是每帧旋转图像。我想我做了一个添加对我有意义的图像的功能，但是我在每一帧都收到一个错误，告诉我画布对象不再可用。

> INVALID_STATE_ERR：DOM 异常 11：尝试使用不可用或不再可用的对象。

您可能还需要知道我正在使用 object.set(); 继续将该图像添加到renderArray。这可能会影响画布对象是否仍然可用？

这是返回缓存画布的函数，（我从本网站上的帖子中获取：D）

```
rotateAndCache = function(image, angle){
    var offscreenCanvas = document.createElement('canvas');
    var offscreenCtx = offscreenCanvas.getContext('2d');
    var size = Math.max(image.width, image.height);
    offscreenCanvas.width = size;
    offscreenCanvas.height = size;
    offscreenCtx.translate(size/2, size/2);
    offscreenCtx.rotate(angle + Math.PI/2);
    offscreenCtx.drawImage(image, -(image.width/2), -(image.height/2));
    return offscreenCanvas;
} 
```

这是一些更多标记的代码：

```
var game = {
    render:function(){
    //gets called every frame
        context.clearRect(0, 0, canvas.width, canvas.height);
        for(i = 0; i < game.renderArray.length; i++){
            switch(game.renderArray[i].type){
                case "image":
                    context.save();
                    context.translate(game.renderArray[i].x, game.renderArray[i].y);
                    context.rotate(Math.PI*game.renderArray[i].rotation/180);
                    context.translate(-game.renderArray[i].x, -game.renderArray[i].y);
                    context.drawImage(game.renderArray[i].image, game.renderArray[i].x, game.renderArray[i].y);
                    context.restore();
                    break;
            }
            if(game.renderArray[i].remove == true){
                game.renderArray.splice(i,1);
                if(i > 1){
                    i--;
                }else{
                    break;
                }
            }
        }
    },
    size:function(width, height){
        canvas.height = height;
        canvas.width = width;
        return height + "," + width;
    },
    renderArray:new Array(),
    //initialize the renderArray
    image:function(src, angle){
        if(angle != undefined){
                    //if the argument 'angle' was given
            this.tmp = new Image();
            this.tmp.src = src;
                    //sets 'this.image' (peach.image) to the canvas. It then should get rendered in the next frame, but apparently it doesn't work...
            this.image = rotateAndCache(this.tmp, angle);
        }else{
            this.image = new Image();
            this.image.src = src;
        }
        this.x = 0;
        this.y = 0;
        this.rotation = 0;
        this.destroy = function(){
            this.remove = true;
            return "destroyed";
        };
        this.remove = false;
        this.type = "image";
        this.set = function(){
            game.renderArray.push(this);    
        }
    }
};

var canvas, context, peach;

$(document).ready(function(){
    canvas = document.getElementById("canvas");
    context = canvas.getContext("2d");
    //make the variable peach a new game.image with src of meme.jpg and an angle of 20.
    peach = new game.image('meme.jpg', 20);
    peach.set();
    game.size(700,500);
    animLoop();
}); 
```

如果你愿意，这里是托管在我的网站上的这个项目：http: [//keirp.com/zap](http://keirp.com/zap)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:24:31.530

您的页面上没有错误，至少我看不到或看不到。

问题很可能是未完成加载的图像。例如，如果您尝试使用尚未完成的加载图像制作画布图案，则会发生该错误。使用[pxloader 之](http://thinkpixellab.com/pxloader/)类的工具或您自己的图像加载功能，以确保在开始绘制之前所有图像都已完成。

无论如何，几乎不可能弄清楚发生了什么或正在发生什么，因为您的代码实际上并没有给出任何错误（不再）。

# html - 无法删除徽标图像的白边

> ID：10003843
> 
> 赞同：0
> 
> 时间：2012-04-04T01:33:10.387
> 
> 标签：html, css

我很难解决我遇到的这个问题。基本上，我无法弄清楚为什么我的徽标图像显示左侧和底部 1px 白色。

作为测试，我已将该徽标图像放在具有黑色背景的空白页面上，以查看它是否没有那些白色边距并且没有。看起来没问题。

所以，我相信问题出在 div 标签的某个地方。

这是我的代码的样子：

**HTML 代码：**

```
<div id="wrapper">
    <div id="top_header">
       <div id="logo"><img src="img/logo.jpg" align="left" alt="Logo"></div>
       <div id="title">BlaBla <br>Blah</div>
       <div id="contact"> E-mail: blabla@mydomain.tld<br> Phone: 0980980984324 </div>
    </div>
<!-- ... rest of the code --> 
```

**CSS 代码：**

```
#wrapper {
  margin:      0 auto;
  width:       978px;
  _height:     100%;
  min-height:  100%;
}
#top_header { 
  padding-top:     12px;
  /*padding-bottom:  5px; */
  margin:          0;
  overflow:        hidden; 
  width:           978px; 
  background-color:#C50918;
  display:         block;
}

div#logo img {
  float:          left;
  margin:         0;
  padding:        0;
  /*padding-bottom: 6px; */
  overflow:       hidden; 
  display:        block;
}
#title {
  font:            "Trebuchet MS", Arial, Helvetica, sans-serif;
  font-size:       18px;
  vertical-align:  middle;
  color:           #FFF;
  text-decoration: none;
  margin:          0;
  padding-left:    20px;
  display:         block;
}

#contact {  
  background:      url(../img/phone.jpg) no-repeat scroll left transparent;
  float:           right;
  font:            "Trebuchet MS", Arial, Helvetica, sans-serif;
  font-size:       12px;
  text-align:      right;
  color:           #FFF;
  text-decoration: none;
  margin:          0;
  padding:         0;
  display:         block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:44:13.897

尝试#logo {边框：无；}

并且在 "div#logo img" 中使用border: none ，id。

检查您的图像，这可能在边缘有一条白线。

哪些浏览器会发生这种情况？

# java - 如何仅在 ImageView 中显示某个位图？

> ID：10003846
> 
> 赞同：2
> 
> 时间：2012-04-04T01:33:21.977
> 
> 标签：java, android, android-layout, progress-bar

这是针对安卓的。我需要显示一个类似于进度表的位图。我希望从左到右显示前 x 个像素。我不想缩小图像，我想做一些更像裁剪的事情。我知道我可以以编程方式减小位图的大小，但希望有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:21:16.230

我认为这可能有助于 [如何使进度条使用图像来显示进度而不是在 Android 中使用颜色](https://stackoverflow.com/questions/6781675/how-to-make-a-progress-bar-use-an-image-to-show-progress-instead-of-using-a-colo)

用户公民 conn 也发布了他的 github 解决方案以获取类似的东西，看看他的链接 [https://gist.github.com/5c08cd2e99b1b572b497/83a00627dc68862b2c25aa27fc1ad346ad41ac6e](https://gist.github.com/5c08cd2e99b1b572b497/83a00627dc68862b2c25aa27fc1ad346ad41ac6e)

# matlab - MATLAB集成情况

> ID：10003849
> 
> 赞同：0
> 
> 时间：2012-04-04T01:33:40.230
> 
> 标签：matlab, integral, singular

我想评估这个函数的积分：

```
(cos(t^2)*sin(t)^2)^(1/2) 
```

在此期间

```
-15*pi:50*pi 
```

我正在使用这些：

```
f=@(t) (cos(t.^2).*sin(t).^2).^(1/2);
quad(f,-15*pi,50*pi) 
```

但我收到警告：

```
Warning: Maximum function count exceeded; singularity likely.
> In quad at 110
In PPEL at 6

ans =

35.8252 +54.5673i 
```

很可能有一些愚蠢的东西我不知道数学的理论部分，比如 MATLAB 所说的一些奇点。

此外，当我想用​​这个符号化地评估这个函数时：

```
int((cos(t.^2).*sin(t).^2).^(1/2)) 
```

它说：警告：找不到显式积分。

```
ans =

int((cos(t^2)*sin(t)^2)^(1/2), t) 
```

有什么解决办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:36:44.863

在不尝试积分的情况下绘制函数。

我注意到的是，您将取负数的平方根。我怀疑这不是你想要做的......

# emacs - Emacs - 固定标签宽度

> ID：10003853
> 
> 赞同：1
> 
> 时间：2012-04-04T01:33:58.760
> 
> 标签：emacs

我正在编辑一个以自己的方式设置样式的文本文档，Emacs 无法识别该标记，并以基本模式打开它。制表符缩进是最成问题的行为。

我可以使用运行时命令修复选项卡宽度，仅适用于当前会话吗？

特别是我会避免任何永久的文件内配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:37:03.663

您可以使用`M-x set-variable`在运行时设置变量并且仅用于该缓冲区和会话，理想情况下您可以设置偏移变量（例如在 c-common-mode 中它是 c-basic-offset）并且您可以将此值更改为所需的选项卡宽度（虽然我建议您使用空格而不是制表符来保持一致性，因为制表符字符`\t`通常是 8 个空格宽。

# iphone - 如何将值添加到属性列表字典中的字典

> ID：10003856
> 
> 赞同：0
> 
> 时间：2012-04-04T01:34:32.540
> 
> 标签：iphone, ios, plist, nsdictionary

我目前正在为我的 plist 创建一个控制器类。在这个 plist 中，我有一个根字典，其中包含多种类型（数字、字符串和字典），在我的控制器类中，我检查了一个 plist，然后将其添加到文档中，所以我可以读取和写入它。

从这里我阅读了我当前 plist 中的内容，并将这些值传递给我在这个类中设置的 tempvar。

这就是我的 plist 控制器类中的 read 方法的样子。

```
-(void) readPlistData
{
    // Data.plist code
    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"EngineProperties.plist"];

    // check to see if Data.plist exists in documents
    if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
    {
        // if not in documents, get property list from main bundle
        plistPath = [[NSBundle mainBundle] pathForResource:@"EngineProperties" ofType:@"plist"];
    }

    // read property list into memory as an NSData object
    NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
    NSString *errorDesc = nil;
    NSPropertyListFormat format;
    // convert static property liost into dictionary object
    NSDictionary *temp = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
    if (!temp)
    {
        NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
    }
    // assign values
    self.protocolSignature = [temp objectForKey:@"Protocol"];
    self.requestNumber = [temp objectForKey:@"RequestNumber"];

    //How do I add the dictionary values here?
} 
```

我将数据放入变量的原因是因为后者我将使用这些值来测试我想要对我的数据库执行的检查。确保我收到正确的请求号等。

更新:: 我将它们添加到根字典中的字典的想法是这样的。我认为这甚至不接近，但它可能会给你一个更好的线索来了解我正在尝试做什么。

```
self.cacheValue = [temp objectForKey:@"Cache Value"];
self.manufacturers = [cacheValue objectForKey:@"Manufacturers"];
    self.models = [cacheValue objectForKey:@"Model"];
    self.subModels = [cacheValue objectForKey:@"SubModels"]; 
```

任何帮助将不胜感激。

![在此处输入图像描述](../Images/21ea14756e50b6367709f55fc1fb9ced.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:40:09.867

我相信您想要执行以下操作：

将 .h 中的 cacheValue 属性定义为可变字典。

```
NSMutableDictionary *cacheValue; 
```

将 plistXml 序列化为 NSMutableDictionary：

```
// This is the root Dictionary
NSMutableDictionary *temp = (NSMutableDictionary *)[NSPropertyListSerialization propertyListWithData:plistXML options:NSPropertyListMutableContainersAndLeaves format:NSPropertyListXMLFormat_v1_0 error:&error]; 
```

由于一切都是可变的，您现在可以读取、更新、插入、删除字典的任何部分或其子内容。例如，获取可变字典“缓存值”只是：

```
self.cacheValue = [temp objectForKey:@"Cache Value"]; 
```

请记住检查对象是否为 nil，以防键没有值。密钥必须与 plist 中显示的**完全相同。**

更新可变字典中的值很容易：

```
[self.cache setValue:@"New Value" forKey:@"Sub"]; 
```

最后，将根 Mutable Dictionary 中的更改保存回 plist：

```
/*
 The flag "atomically" specifies whether the file should be written atomically or not.
 If flag is YES, the receiver is written to an auxiliary file, and then the auxiliary file is renamed to path.
 If flag is NO, the dictionary is written directly to path.
 The YES option guarantees that path will not be corrupted even if the system crashes during writing.
 */
[self.temp writeToFile:plistPath atomically:YES]; 
```

希望这会有所帮助，干杯！

# delphi - ManualFloat 未使用指定的 Rect

> ID：10003858
> 
> 赞同：7
> 
> 时间：2012-04-04T01:34:48.453
> 
> 标签：delphi, docking

如果（在德尔福）我做

```
Panel1.ManualFloat(Rect(500,500,600,600)); 
```

面板不是在指定的 Rect 位置浮动，而是在某种窗口默认位置。如何让面板（或其他控件）浮动在指定位置。然而，它似乎确实具有正确的形状。我需要设置其他一些属性以使其正常工作吗？

**编辑：**只是为了让事情清楚。我希望上面的代码可以使面板成为相对于屏幕左上角 (500x500) 的 100x100 正方形，但事实并非如此。形状正确，但位置不正确。如果后续控件浮动，它们会在屏幕下方层叠。

**Edit2：**这在 Delphi 7 中似乎不是问题，但在 Delphi 2007 到 XE2 中（可能更早）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:12:17.280

不要再看了：它是 VCL 中的一个错误。

`ManualFloat`创建一个浮动窗口并设置它的`Top`,`Left`值，`TControl.CreateFloatingDockSite(Bounds: TRect)`然后设置它的`ClientWidth`.

这是一个错误，因为这样做会强制创建 WindowHandle（它还没有 Handle）

```
function TCustomForm.GetClientRect: TRect;
begin
  if IsIconic(Handle) then // <=== 
```

这调用了窗口的默认定位（级联 yadda yadda ...）重置`Top`和`Left`

解决方法是在设置`ClientWidth`and属性`ClientHeight`之前设置`Top`and`Left``TControl.CreateFloatingDockSite(Bounds: TRect)`

**更新：Controls.pas 中的固定代码**

```
function TControl.CreateFloatingDockSite(Bounds: TRect): TWinControl;
begin
  Result := nil;
  if (FloatingDockSiteClass <> nil) and
    (FloatingDockSiteClass <> TWinControlClass(ClassType)) then
  begin
    Result := FloatingDockSiteClass.Create(Application);
    with Bounds do
    begin
      // Setting Client area can create the window handle and reset Top and Left
      Result.ClientWidth := Right - Left;
      Result.ClientHeight := Bottom - Top;
      // It is now safe to position the window where asked
      Result.Top := Top;
      Result.Left := Left;
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:04:07.537

就像[函数](http://docwiki.embarcadero.com/VCL/en/Controls.TControl.ManualFloat)`TRect`的参数名称一样-已经说过了，坐标是屏幕单位而不是父单位的坐标。`ScreenPos`

如果您希望面板保持在原来的位置，请转换相对于屏幕的坐标：

```
 with Panel1.ClientToScreen(Point(0, 0)) do
    Panel1.ManualFloat(Bounds(X, Y, 100, 100)); 
```

或者，要包括面板的边框：

```
 if Panel1.HasParent then
    with Panel1.Parent.ClientToScreen(Panel1.BoundsRect.TopLeft) do
      Panel1.ManualFloat(Bounds(X, Y, 100, 100)); 
```

或者，要转换为相对于父级的特定坐标，请使用：

```
 if Panel1.HasParent then
    with Panel1.Parent.ClientOrigin do
      Panel1.ManualFloat(Bounds(X + 500, Y + 500, 100, 100)); 
```

# php - Twitter Bootstrap 和 CodeIgniter 的 Validation_Errors

> ID：10003862
> 
> 赞同：1
> 
> 时间：2012-04-04T01:35:14.317
> 
> 标签：php, codeigniter, twitter-bootstrap

我正在使用 Twitter Bootstrap 为注册页面设置validation_errors 样式：

```
<?php
echo "<div class='alert alert-error span4'>";
echo validation_errors(); 
echo "</div>";
?> 
```

验证工作并显示，但部分样式始终存在（div 标签具有红色背景）。有没有办法让样式仅在validation_errors 存在时显示。我已经尝试了一些事情（在 php 标签中嵌入 html 并将 php 包含在 div 标签中），但结果是一样的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T02:35:56.560

div结构仍然出现的原因是因为它在回显，而不考虑是否有错误。

您可以将变量的值设置为`validation_errors()`控制器中函数的结果，然后仅在实际出现错误时才在视图中显示警报 div...

您的控制器将分配变量来保存（潜在的）错误：

```
$this->data['reported_error'] = validation_errors();
$this->load->view('view_name', $this->data); 
```

然后，如果出现错误，您的视图只会显示警报 div：

```
if ( isset($reported_error) )
{
    echo "<div class='alert alert-error span4'>".$reported_error."</div>";
} 
```

这要求您的`validation_errors`函数仅在出现错误时返回一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:24:38.700

你可以试试这样的东西，它对我有用。

```
<?php if(validation_errors()):?>
<div class='alert alert-error span4'><?php echo validation_errors(); ?></div>
<?php endif;?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:07:15.753

我使用以下构造将带有特殊类的错误放在它们引用的字段旁边：

```
<div class="<?php echo my_error_class('fieldname') ?>">
<input type="whatever" name="fieldname" />
<span class="whatever"><?php echo my_error_msg('fieldname') ?></>
</div> 
```

在 CI 帮助程序中具有以下功能：

```
<?php
    if ( ! function_exists('my_error_class')) {
      function my_error_class($field, $error_class = "error") {
        if (FALSE === ($OBJ =& _get_validation_object())){
            return '';
          }
        if(isset($OBJ->_field_data[$field]['error']) && !empty($OBJ->_field_data[$field]['error'])) {
          return $error_class;
          }
        else {
          return '';
        }
      }
    }

if ( ! function_exists('my_error_msg')) {
  function my_error_msg($field,$default = '') {
    if (FALSE === ($OBJ =& _get_validation_object())){
        return $default;
      }
    if(isset($OBJ->_field_data[$field]['error']) && !empty($OBJ->_field_data[$field]['error'])) {
      return $OBJ->_field_data[$field]['error'];
      }
    else {
      return $default;
    }

  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-06T01:27:36.100

我遇到了同样的问题。我将validation_errors() 分配给控制器中的一个变量并将其传递给视图。

离开詹姆斯的解决方案，我不得不改变：

```
if ( isset($reported_error) ) 
```

到：

```
if (!empty($reported_error)) 
```

一旦我这样做了，只有在出现错误时才会显示警报块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T19:06:50.460

我没有在指南中找到这个，但显然validation_errors 需要两个可选参数作为前缀和后缀......所以你可以这样做：

```
validation_errors('<p class="text-warning">', '</p>'); 
```

# c# - 如何将数据从 Winform 传回标签页

> ID：10003864
> 
> 赞同：0
> 
> 时间：2012-04-04T01:35:21.650
> 
> 标签：c#

```
 if (!existed_channel.Contains(channel_name))
            {

                if (x)
                {
                    tabpagex.BackColor = Color.Ivory;

                    tabControl1.TabPages.Add(tabpagex);

                    client_chat c = new client_chat(channel_name, owner);   //Here the client_chat is my Winform that do all the chatting thing.
                    c.TopLevel = false;
                    c.Visible = true;
                    c.BackColor = Color.Ivory;
                    c.FormBorderStyle = FormBorderStyle.None;
                    c.Dock = DockStyle.Fill;
                    tabControl1.TabPages[tab_index].Controls.Add(c);   //Here i fill up the tabpage with client_chat winform

                    tab_index++;                        //Increment the index everytime i add an tabpage.
                    existed_channel.Add(channel_name);  //Add the name of the page to an arraylist, to make sure everytime there is no duplicate page
                }
            } 
```

如您所见，当我关闭其中一个 Winform（在标签页上）时，我必须发回数据并修改 tab_index。我可以同时关闭 Winform 和标签页，但很难将数据发回。我知道如何将数据从 childForm 发送回 parentForm，但这里的情况略有不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:37:28.327

您可以在所有控件都可以访问的父级上使用全局属性

# python - HTTP 服务器在接受数据包时挂起

> ID：10003866
> 
> 赞同：6
> 
> 时间：2012-04-04T01:35:27.283
> 
> 标签：python, http

我编写了一个简单的 http 服务器来处理 POST 请求：

```
class MyHandler( BaseHTTPServer.BaseHTTPRequestHandler):
    def do_POST( self ):
        ctype, pdict = cgi.parse_header(self.headers.getheader('content-type'))
        postvars = {}
        try:
          if ctype == 'application/x-www-form-urlencoded':
              length = int(self.headers.getheader('content-length'))
              postvars = cgi.parse_qs(self.rfile.read(length), keep_blank_values=1)

          self.send_response( 200 )
          self.send_header( "Content-type", "text")
          self.send_header( "Content-length", str(len(body)) )
          self.end_headers()
          self.wfile.write(body)
        except:
          print "Error"

def httpd(handler_class=MyHandler, server_address = ('2.3.4.5', 80)):
    try:
        print "Server started"
        srvr = BaseHTTPServer.HTTPServer(server_address, handler_class)
        srvr.serve_forever() # serve_forever
    except KeyboardInterrupt:
        server.socket.close()

if __name__ == "__main__":
    httpd( ) 
```

服务器运行良好，但有时它只是挂起。当我按`CTRL`+`C`时，它会出现以下错误，然后继续接收数据：

```
Exception happened during processing of request from ('1.1.1.2', 50928)
Traceback (most recent call last):
  File "/usr/lib/python2.6/SocketServer.py", line 281, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/usr/lib/python2.6/SocketServer.py", line 307, in process_request
    self.finish_request(request, client_address)
  File "/usr/lib/python2.6/SocketServer.py", line 320, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/lib/python2.6/SocketServer.py", line 615, in __init__
    self.handle()
  File "/usr/lib/python2.6/BaseHTTPServer.py", line 329, in handle
    self.handle_one_request()
  File "/usr/lib/python2.6/BaseHTTPServer.py", line 312, in handle_one_request
    self.raw_requestline = self.rfile.readline()
  File "/usr/lib/python2.6/socket.py", line 406, in readline
    data = self._sock.recv(self._rbufsize)
KeyboardInterrupt 
```

有人可以告诉我如何纠正这个问题吗？我无法理解错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T13:18:41.587

我完全重写了我的解决方案，以解决两个缺点：

*   即使客户端只打开了一个连接但没有开始通信，它也可以处理超时。
*   如果客户端打开一个连接，就会派生一个新的服务器进程。一个慢的客户端不能阻塞其他的。

它尽可能基于您的代码。它现在是一个完整的独立演示。如果您在 http://localhost:8000/ 上打开浏览器并将“模拟错误”写入表单并按提交，它会模拟运行时错误。

```
from http.server import HTTPServer, BaseHTTPRequestHandler
from socketserver import ForkingMixIn
from urllib.parse import parse_qs

class MyHandler(BaseHTTPRequestHandler):
    def do_POST(self):
        ctype, pdict = self.headers.get_params(header='content-type')[0]
        postvars = {}
        try:
            if ctype == 'application/x-www-form-urlencoded':
                length = int(self.headers['content-length'])
                postvars = parse_qs(self.rfile.read(length), keep_blank_values=1
                                    encoding='utf-8')
                assert postvars.get('foo', '') != ['bar']  # can simulate error
            body = 'Something\n'.encode('ascii')
            self.send_response(200)
            self.send_header("Content-type", "text")
            self.send_header("Content-length", str(len(body)))
            self.end_headers()
            self.wfile.write(body)
        except Exception:
            self.send_error(500)
            raise

    def do_GET(self):
        # demo for testing POST by web browser - without valid html
        body = ('Something\n<form method="post" action="http://%s:%d/">\n'
                '<input name="foo" type="text"><input type="submit"></form>\n'
                % self.server.server_address).encode('ascii')
        self.send_response(200)
        self.send_header("Content-type", "text/html")
        self.send_header("Content-length", str(len(body)))
        self.end_headers()
        self.wfile.write(body)

class ForkingHTTPServer(ForkingMixIn, HTTPServer):
    def finish_request(self, request, client_address):
        request.settimeout(30)
        # "super" can not be used because BaseServer is not created from object
        HTTPServer.finish_request(self, request, client_address)

def httpd(handler_class=MyHandler, server_address=('localhost', 8000)):
    try:
        print("Server started")
        srvr = ForkingHTTPServer(server_address, handler_class)
        srvr.serve_forever()  # serve_forever
    except KeyboardInterrupt:
        srvr.socket.close()

if __name__ == "__main__":
    httpd() 
```

`SocketServer.ForkingMixIn`可以通过从代码中删除类来禁用分叉，例如调试目的。

编辑为 Python 3 更新，但应注意 Python 3 文档的警告：

> 警告：不建议将 http.server 用于生产。它只实现基本的安全检查。

# jquery - 当结果来自我的 java servlet 时，如何设置页面以持续更新？

> ID：10003868
> 
> 赞同：0
> 
> 时间：2012-04-04T01:35:46.597
> 
> 标签：jquery, servlets

我是 jQuery 新手，当结果来自我的 java servlet 时，我很难让我的页面不断更新。我想在网页上设置一个计时器效果，因为新的时间值来自 servlet。

在我的网页上，我有这样的东西：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script> 
<script>$(document).ready(function(){$.get("/timer", function(data){$('H1').append(data);  })})(); </script> 
```

在我的 servlet 计时器中，我有一个 while 循环，它使用 response.getWriter() 为 30 次迭代写入新的时间值：

```
//this is in my doGet function
while(count <30 ){
count++;
out.println(count);
} 
```

问题是当我加载页面时，在 30 次迭代完成之前，没有任何内容附加到页面上。有没有办法让每次迭代打印出来显示在页面上？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:46:18.990

out.flush() 会将缓冲区中的任何内容写入浏览器。

请记住，如果您有一个长时间运行的服务器操作，您可能需要一个更好的机制，以便服务器知道客户端何时离开/停止操作，以便服务器也可以停止处理。此外，通过利用 javascript，您无需导航到另一个页面，可以获得更好的用户体验

通常，javascript 计时器/轮询用于获取操作的状态（在服务器上，您可能让操作在单独的线程上运行 - 这也可以作为服务器的保持活动消息 - 如果服务器没有收到一个活着的，它可能想停止处理以提高效率）

长轮询和 html5 网络套接字（您需要服务器支持网络套接字）是其他方法 -

见： [http ://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

# asp.net - 对 ASP.NET 3.5 网站使用 Windows 身份验证

> ID：10003871
> 
> 赞同：0
> 
> 时间：2012-04-04T01:36:11.900
> 
> 标签：asp.net, iis, iis-7, active-directory, dns

如果我有一个在 DomainA 上运行的用户群，以及一个在 DomainB 上驻留/运行的 ASP.NET 网站，如果他们通过浏览器访问，我可以使用 Windows 身份验证作为身份验证类型吗？两个域上的 AD 和用户群将相互匹配，但即使用户通过浏览器从另一个域访问我的网站应用程序，这是否重要？调用者在点击页面时是否解析到目标域的 AD？这是如何运作的？

Server2008R2/IIS7...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:17:02.793

来自不同域的不同用户对象是不同的。DomainA\User 向 DomainB 上的网站验证的唯一方法是 DomainB 是否与 DomainA 建立了信任关系。即使在这种情况下，用户也不会自动映射到 DomainB\User 帐户，它会以 DomainA\User 的权限登录。

# php - 选择不在数据库中的 ID

> ID：10003874
> 
> 赞同：-1
> 
> 时间：2012-04-04T01:36:22.833
> 
> 标签：php, mysql, arrays, select

我有一系列产品 ID，我需要找到数据库中不存在的 ID。当然我可以这样做：

```
// IDs in database: 1, 2, 3, 4, 5.
$products = array(4, 5, 6, 7);

$in_db = $db->exec("SELECT `id` FROM `table` WHERE `id` IN (" . implode($products) . ");");    
$in_db_ids = array();

foreach($in_db as $i){
    $in_db_ids[] = $i['id'];
}

$missing = array_diff($products, $in_db_ids); 
```

但这又长又无聊。我也想过这样的事情：

```
// this query would be generated with PHP using an implode or something
$query = "
    SELECT `t`.`id` as `missing`
    SELECT 4 as `id` UNION SELECT 5 UNION SELECT 6 UNION SELECT 7
    LEFT JOIN `table` USING(`id`)
    WHERE `missing` is NULL;
";
$missing = $db->exec($query); 
```

但这太不雅了。我认为应该有一种正确的方法来编写它`SELECT x UNION SELECT y UNION SELECT z`，或者可能有另一种很好的方法来进行此检查。你们觉得怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:05:21.743

要在 MySQL 数据库中执行此操作，您需要一个表或临时表，其行数等于您正在扫描的表中是否存在缺失空白的最高索引。没有办法解决这个问题——MySQL 总是通过表“循环”，它不是一种您可以设置自己的循环的过程语言。

话虽如此，如果您创建或拥有足够大小的表，则可以使用用户变量创建自然数序列。让我们称之为大表`bigtable`（其中有哪些列并不重要——我们只需要其中一列的名称——我使用“acolumn”）。

```
set @row = 0;
select n from 
  (select @row := @row + 1 as n from bigtable) as t 
left join mytable on mytable.id = t.n 
where mytable.acolumn is null; 
```

让我知道这是否需要更多解释。

# python - Python中的错误单子-我做对了吗？

> ID：10003876
> 
> 赞同：4
> 
> 时间：2012-04-04T01:36:33.083
> 
> 标签：python, monads

问题：

*   这是单子吗？
*   这是否表明对错误单子的合理理解？
*   我错过了什么？
*   我还能用这段代码做什么来更多地弯曲单子？
*   我对成功/失败与“返回”/“结果”/“提升”的关系感到困惑（我认为这些都是相同的概念）。
*   我们怎样才能让问题变得更复杂，这样 monad 才能帮助我们解决我们的痛点？monad 在这里有帮助，因为我们抽象了`if result != None`管道，我还想抽象哪些其他类型的管道，以及 monad（或“monad 组合器”）如何帮助这种痛苦？

我有点不知所措。

```
# helpers for returning error codes
def success(x): return (True, x)
def fail(x): return (False, x)

# bind knows how to unwrap the return value and pass it to
# the next function
def bind(mv, mf):
    succeeded = mv[0]
    value = mv[1]

    if (succeeded): return mf(value)
    else: return mv

def lift(val): return success(val)

def userid_from_name(person_name):
    if person_name == "Irek": return success(1)
    elif person_name == "John": return success(2)
    elif person_name == "Alex": return success(3)
    elif person_name == "Nick": return success(1)
    else: return fail("No account associated with name '%s'" % person_name)

def balance_from_userid(userid):
    if userid == 1: return success(1000000)
    elif userid == 2: return success(75000)
    else: return fail("No balance associated with account #%s" % userid)

def balance_qualifies_for_loan(balance):
    if balance > 200000: return success(balance)
    else: return fail("Insufficient funds for loan, current balance is %s" % balance)

def name_qualifies_for_loan(person_name):
    "note pattern of lift-bind-bind-bind, we can abstract further with macros"
    mName =    lift(person_name)
    mUserid =  bind(mName, userid_from_name)
    mBalance = bind(mUserid, balance_from_userid)
    mLoan =    bind(mBalance, balance_qualifies_for_loan)

    return mLoan

for person_name in ["Irek", "John", "Alex", "Nick", "Fake"]:
    qualified = name_qualifies_for_loan(person_name)
    print "%s: %s" % (person_name, qualified) 
```

输出：

```
Irek: (True, 1000000)
John: (False, 'Insufficient funds for loan, current balance is 75000')
Alex: (False, 'No balance associated with account #3')
Nick: (True, 1000000)
Fake: (False, "No account associated with name 'Fake'") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:12:33.347

**这是单子吗？**见[单子定律](http://www.haskell.org/haskellwiki/Monad_Laws)：

> Monad 类的所有实例都应该遵守：
> 
> 1.  “左身份”：返回 a >>= f ≡ fa
> 2.  “正确的身份”： m >>= return ≡ m
> 3.  “关联性”： (m >>= f) >>= g ≡ m >>= (\x -> fx >>= g)

*（`return`表示成功，`>>=`表示绑定）*

1.  留下身份。在您的实施中，这可能是：

    ```
    bind(success(x), balance_qualifies_for_loan) == balance_qualifies_for_loan(x) 
    ```

    其中`x`是一些值并且`f`是一元函数。

2.  正确的身份。同样，这可能是：

    ```
    bind(m, success) == m 
    ```

    哪里`m`是一元值。

3.  关联性。这可能是：

    ```
    bind(bind(m,  userid_from_name), balance_from_userid)) ==
      bind(m, lambda x: bind(userid_from_name(x), balance_from_userid)) 
    ```

所有这些都可以编写为单元测试，以快速检查这些属性是否适用于许多输入值。

**什么不见​​了？**

*   每个 monad 都需要不同的`success`and实现`bind`。将这些放入接口将允许您在所有已实现的 monad 上编写通用代码。
*   基于[Haskell 方法](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aMonad)，您可能想要实现一些通用的 monad 组合子，例如`>>`,`sequence`和`mapM`. 这些使 monad 使用起来非常方便。

# javascript - 表单提交时文本输入消失

> ID：10003880
> 
> 赞同：1
> 
> 时间：2012-04-04T01:37:05.677
> 
> 标签：javascript, jquery

当您将鼠标悬停在“登录”链接上时，我会弹出一个登录表单。单击表单会导致登录表单隐藏。我的问题是，当我提交表单（通过提交按钮或按 Enter）时，用户名会从表单中消失。这只发生在 IE9 中（不确定以前版本的 IE）。它在 FF、Chrome、Safari 和 Opera 中运行良好。我还确认表单上的所有文本字段都丢失了内容，而密码字段在提交时保留了它们的值。

我难住了。任何帮助将不胜感激！

这是我的表单代码：

```
<fieldset id='signin_menu'>
<form name='headlogin' method='post' id='signin' action='/login'>
<label for='username'>Username</label>
<input type='text' name='username' size='13' maxlength='20'>
</p>
<p>
<label for='password'>Password</label>
<input type='password' name='password' size='13' maxlength='20'>
</p>
<p class='remember'>
<input type='submit' id='signin_submit' value='Sign in'>
<input type='checkbox' id='remember' name='keeplogin'>
<label for='remember'>Remember me</label>
</p>
<p class='forgot'> <a href='/forgot-password' id='resend_password_link'>Forgot your password?</a> </p>
<input type='hidden' name='submit' value='1' />
</form>
</fieldset> 
```

这是我的javascript：

```
$(document).ready(function() {

    $(".signin").mouseover(function(e) {
        e.preventDefault();
        $("fieldset#signin_menu").show();
        $(".signin").toggleClass("menu-open");
    });

    $("fieldset#signin_menu").mouseup(function() {
        return false
    });
    $(document).mouseup(function(e) {
        if($(e.target).parent("a.signin").length==0) {
            $(".signin").removeClass("menu-open");
            $("fieldset#signin_menu").hide();
        }
    });

}); 
```

# grails - 缺少所需的源文件夹 .link_to_grails_plugins/jquery-1.7.1/grails-app/i18n

> ID：10003881
> 
> 赞同：10
> 
> 时间：2012-04-04T01:37:11.050
> 
> 标签：grails, sts-springsourcetoolsuite

我的项目编译良好，没有任何问题。我退出 Eclipse 并返回内部并收到此错误。我的项目中不存在这些文件夹。我不认为是 Grails 的一部分，似乎是 STS 创建了它们。问题是什么？

STS 2.9，Grails 2.0.1

非常感谢先进

![在此处输入图像描述](../Images/5fdc8ec1e570035f548589fabac41e54.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-04T02:02:01.217

右键单击项目树中的项目节点并选择 Grails Tools | 刷新依赖。它将根据已安装的插件重新配置类路径和源文件夹。

# jquery - jQuery验证插件内联

> ID：10003883
> 
> 赞同：0
> 
> 时间：2012-04-04T01:37:21.447
> 
> 标签：jquery

我有

`<input type="text" class="required" ... />`

我是否可以在课堂上写我只需要特定字段编号

我试过

`<input type="text" class="number" ... />`和`<input type="text" class="{required:true, number:true}" ... />`

有可能吗，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:43:03.067

试试看[这里](http://docs.jquery.com/Plugins/Validation#source)`class="required number"`的jQuery 示例，或者运行[这个小提琴](http://jsfiddle.net/3d9y9/)：

```
<html>
    <head>
        <script type="application/javascript">

        $(document).ready(function(){
            $("#test-form").validate();
            // don't really process form
            $("#test-form").submit(function() { return false; });
        });​

        </script>
    </head>
    <body>
        <form id="test-form" action="" >
            <input type="text" class="required number" />
            <input type="submit" />
        </form>
    </body>
</html> 
```

​</p>

另外，请参阅我的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:45:38.853

也许您可以为输入文本使用掩码？

请参阅：[http ://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

# php - PHPExcel - 如何四舍五入？

> ID：10003884
> 
> 赞同：2
> 
> 时间：2012-04-04T01:37:22.413
> 
> 标签：php, windows, phpexcel

我可以知道使用百分比符号将列值四舍五入为 2 个小数点的函数是什么？例如：1.88% 而不是 1.88230293

$worksheet_details->setCellValue("D14", "=SUM((F33 / F34))");

如何对单元格 D14 中的值进行四舍五入？

* * *

解决方案：

顺便说一句，在我继续从互联网上寻找解决方案之后，我得到了这个......

```
$percentageFormat = '#.## \%;[Red]-#.## \%';
$worksheet_details->setCellValue("C14", "=SUM((C33 / C34) * 100)");
$worksheet_details->getStyle('C14')->getNumberFormat()->setFormatCode($percentageFormat); 
```

如果您希望它以 0.xx 格式显示，只需将第一个 # 更改为 0 ...否则它将仅显示 .xx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T01:39:42.860

如果您只想将其作为字符串输出：

```
echo '%'.number_format($your_number,2); 
```

如果要将其保留为数字浮点值（但要在百分比上妥协）：

```
echo round($your_number,2); 
```

如果您正在寻找 Excel 函数，请使用：

```
$worksheet_details->setCellValue('D14', '=TEXT(F33/F34,"0.00%")'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T01:55:56.133

我猜你正在寻找[`ROUND()`](http://office.microsoft.com/en-us/excel-help/round-a-number-HP003056144.aspx)功能：

```
=ROUND(10/3; 2) 
```

或者，在您的情况下：

```
$worksheet_details->setCellValue("D14", "=ROUND(SUM((F33 / F34)); 2)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T01:42:08.183

如果您打算在 PHP 中进行舍入，则可以使用[round()](http://php.net/round "圆形的（）")指定浮点数的精度：

```
echo round(1.95583, 2) . "%";  // 1.96% 
```

如果您要在 Excel 中舍入，可以使用[ROUND 函数](http://spreadsheets.about.com/od/excelfunctions/qt/070809_round.htm)：

```
$worksheet_details->setCellValue("D14", "=TEXT(SUM((F33 / F34)), '###.##%')"); 
```

或者

```
$worksheet_details->setCellValue("D14", "=TEXT(SUM((F33 / F34)/100), '###.##%')"); 
```

如果这个数字已经是一个百分比。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T08:55:40.120

如果你想以百分比数字格式显示，你可以试试这个。

```
$percentVal = '95.6';

PHPExcel_Cell::setValueBinder( new PHPExcel_Cell_AdvancedValueBinder() );

$percentCell->setValue($percentVal . '%');
$sheet->getStyleByColumnAndRow($percentCellIndex, $dataRow)->getNumberFormat()->setFormatCode('0.0%'); 
```

// 输出 95.6% 并在 Excel 中格式化为数字

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-18T14:21:54.540

正如@ariefbayu 所说，

```
$worksheet_details->setCellValue("D14", "=ROUND(SUM((F33 / F34)); 2)"); 
```

应该可以工作，但对我来说它抛出了错误：

```
PHP Fatal error:  Uncaught PHPExcel_Calculation_Exception 
```

所以我换了`;`一个`,`。

结果：

```
$worksheet_details->setCellValue("D14", "=ROUND(SUM((F33 / F34)), 2)"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-12T20:59:41.890

您可以将单元格的格式设置为自动将值四舍五入为整数。

```
$activeSheet->getStyle("A1")->getNumberFormat()->setFormatCode('##'); 
```

# objective-c - UIImage 按钮（圆角矩形按钮）

> ID：10003890
> 
> 赞同：0
> 
> 时间：2012-04-04T01:38:20.167
> 
> 标签：objective-c, ios

我希望能够在用户按下按钮时更改任何按钮的图像，然后当他们释放时，之前的图像被放回。

所以基本上当他们将手指按在按钮上时，图像会发生变化，当他们松开时，我在 IB 中指定的原始图像会被放回。

我怎样才能做到这一点？这是我到目前为止的代码。

```
- (IBAction)btnOne:(id)sender {
    result.text = [self appendresult:@"1"];

    //Changes the button image upon touch
    [btnOne setImage:[UIImage imageNamed:@"NumberBtn1.png"] forState:UIControlStateNormal]; 
    [btnOne setImage:[UIImage imageNamed:@"NumberBtn1Alt.png"] forState:UIControlStateHighlighted];
    [btnOne setImage:[UIImage imageNamed:@"NumberBtn1Alt.png"] forState:UIControlStateSelected];
    btnOne.showsTouchWhenHighlighted = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:49:19.803

把你的代码...

```
 [btnOne setImage:[UIImage imageNamed:@"NumberBtn1.png"] forState:UIControlStateNormal]; 
    [btnOne setImage:[UIImage imageNamed:@"NumberBtn1Alt.png"] forState:UIControlStateHighlighted];
    [btnOne setImage:[UIImage imageNamed:@"NumberBtn1Alt.png"] forState:UIControlStateSelected];
    btnOne.showsTouchWhenHighlighted = YES; 
```

in`viewDidLoad`而不是 in `IBAction`，然后只需确保您的按钮 in`Interface Builder`正确链接到`IBOutlet`您为其创建的按钮。

# php - Zend 路由在 Ubuntu 11.10 上不起作用时出了什么问题

> ID：10003893
> 
> 赞同：0
> 
> 时间：2012-04-04T01:38:35.317
> 
> 标签：php, zend-framework, frameworks, nginx, parallels

我在 10.04 LTS 中的所有内容都相同，在本地并行 7 在 ec2 实例上我有相同的 11.10 设置，它运行良好。本地设置的唯一区别是我将 /media/psf/Home/Sites 符号链接到 /var/www 但这在其他 ubuntu 10.04 上以相同的方式运行良好。

我收到诸如在模块/和模型/服务以及那些文件夹中找不到类之类的错误。所以看起来自动加载器在模块上不能正常工作。所以我假设这些部分不起作用

```
resources.modules = ""
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules" 
```

但正如我所说，这一切都适用于 ec2 实例。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:05:57.290

作为测试（暂时），尝试将整个站点从 /media/psf/* 复制到 /var/www/* 之类的位置。

如果可行，则问题可能是区分大小写的问题。您的主机是 OSX 还是 Windows？

# java - Android“主机未知”错误

> ID：10003898
> 
> 赞同：0
> 
> 时间：2012-04-04T01:38:52.080
> 
> 标签：java, android, eclipse, rest, windows-7

我从 Android 收到“主机是未知服务器：80”的错误。我正在尝试从虚拟机上的 Android Emulator 访问服务器上的 WCF Rest 服务。是否支持此场景？顺便说一句，我可以访问该服务的帮助页面，所以我知道该服务正在运行。我可以从那个虚拟机访问它。

任何帮助表示赞赏。我的开发环境是 Windows 7 64 BIT，使用最新的 Eclipse 版本。这些服务位于 Win 2008 R2 机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:08:55.340

我的猜测是您错误地配置了主机名。

根据错误消息，您似乎提供了“:80”作为主机名或 IP 地址。如果平台认为该字符串应该是 DNS 名称并尝试进行 DNS 查找，则查找将失败，从而导致某种“未知主机”诊断。

如果这就是问题所在，那么有几个观察结果。

*   如果您尝试在静态配置文件（或其他任何内容）中引用“此设备”，您可以使用其主机名或 IP 地址（如果您知道它们），或者环回接口的 IP 地址（很可能） “127.0.0.1”。空字符串可能不起作用。

*   端口号（例如“80”）不应包含在主机名/IP 地址中……除非您在解析主机字符串之前将其解析出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:45:14.470

一旦此错误的潜在原因是忘记包含互联网许可或未将其放在正确的位置。确保 manifest.xml 中有以下应用程序标记之外的内容：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:58:19.137

我不得不使用[10.0.2.2 替代 IP](http://developer.android.com/tools/devices/emulator.html)，因为模拟器使用 localhost IP。

# javascript - Jquery/Javascript 跳线？

> ID：10003907
> 
> 赞同：0
> 
> 时间：2012-04-04T01:41:24.630
> 
> 标签：javascript, jquery, json, boolean

我正在尝试运行一个搜索外部 JSON 文件的 jQuery/Javascript 函数，`true`如果找到给定变量作为 JSON 的用户名之一，则返回。

这就是我所拥有的：（给定的变量`player`等于`a`）

```
function loggedIn(player) {
    var result = false;
    var liurl = "liplay.json";
    $.getJSON(liurl, function (json) {
        $.each(json, function (key, value) {
            if (value.username == player) {
                alert();
                result = true;
            } else {}
        });
    });
    return result;
} 
```

外部 JSON 文件 (liplay.json) 如下所示：

```
[{"username":"a"},{"username":"q"}] 
```

出于某种原因，代码总是返回 false。

我尝试一次运行它，但我发现无论出于何种原因，Chrome 都会运行前几行代码 until `$.getJSON(liurl, function(json){`，然后跳过 until `return result;`。我不知道为什么它会跳过运行 if/else 语句的部分。关于为什么会发生这种情况以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:52:58.937

$.getJSON 调用在回调中执行您的函数，因此您无法返回结果，因为它会脱离调用并跳转到 return 语句。一旦 JSON 调用完成加载，您将不得不重构事物以便使用回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:57:11.180

$.getJSON 是一个异步方法——传入它的函数回调是在异步方法执行完成后执行的，但在那之前，主函数的其余部分会继续执行，并且不可避免地返回 false。

# regex - 正则表达式匹配行首和行尾以快速查找和替换

> ID：10003908
> 
> 赞同：0
> 
> 时间：2012-04-04T01:41:26.170
> 
> 标签：regex, ide, replace, myeclipse

嘿伙计们，我有很多 HTML 可以用来格式化

```
myString + "<somehtml></somehtml>"; 
```

需要 2 个正则表达式，一个用来替换所有新行，`myString + "` 一个用来替换所有行尾`";`

只需使用 MyEclipse，查找和替换启用正则表达式。谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:47:09.067

各个正则表达式引擎可能会有所不同，但一般来说，'^' 将匹配行首，而 '$' 将匹配行尾。

# maven - 如何更改 Maven 构建项目的反应堆构建顺序

> ID：10003909
> 
> 赞同：0
> 
> 时间：2012-04-04T01:41:33.350
> 
> 标签：maven

如何更改构建顺序以允许在 [EJB] 之前构建 [Object]？

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] Car Booking Management Microsite Application
[INFO] Car Booking Management Microsite Application [EJB]
[INFO] Car Booking Management Microsite Application [Object]
[INFO] Car Booking Management Microsite Application [Web]
[INFO] Car Booking Management Microsite Application [DAO]
[INFO] Car Booking Management Microsite Application [EAR] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:20:16.147

最简单的方法是添加从 EJB 到 Object 的依赖项。

但是如果这种依赖不存在，你为什么要关心哪个先构建呢？

# javascript - 在单个网页上淡入/更改背景

> ID：10003913
> 
> 赞同：0
> 
> 时间：2012-04-04T01:42:17.217
> 
> 标签：javascript, jquery, background, slider, fade

我花了很长时间弄清楚如何实现这一点——我很惊讶这在整个网络上并不常见，尽管我离题了。

我正在构建一个小型站点，我试图将其保留在一个页面上 - 最后该站点将存在于 USB 上，因此事情应该尽可能独立（文件明智）。目前我有一个垂直导航菜单（即第 1 页、第 2 页、第 3 页），当您从菜单中选择一个链接时，该部分的新内容就会出现。多亏了修改后的 Coda-Slider 脚本（参见此处：[http](http://codysilfies.com/orn/) ://codysilfies.com/orn/ ），我已经完成了这部分。

我想不通的部分是，除了在单击菜单项时更改内容之外，我还想更改背景。因此 Menu_Item_1 将显示 BGImage1.jpg、Menu_Item_2 - BGImage2.jpg 等等。很像这样的东西：[http](http://brewfestgb.com/#!/merriment) ://brewfestgb.com/#!/merriment - 虽然该页面上有很多附加功能......我真的不知道如何削减。必须有一种更简单的方法来做到这一点。

有大量的“单击单个链接以更改图像”教程 - 但没有多个链接。我还尝试对背景使用相同的滑块代码 - 但我无法将图像调整为浏览器窗口的大小并让滑块工作（它显然需要设置宽度 - 这对于内容位是可行的，但不是当我希望背景使用浏览器调整大小时）。

有什么建议……或线索吗？在我看来，有人应该知道一些事情。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:47:43.700

当点击处理程序被触发时，您可以更改背景图像：

```
$('a.link').click(function(){
   // Find the image value
   var background = 'BGImage' + $(this).data('bg') + '.jpg';

   // Change CSS background-image
   $('body').css('background-image',background);
}); 
```

您的链接必须如下所示：

```
<a href="path/to/link1" class="link" data-bg="1">Link 1</a>
<a href="path/to/link2" class="link" data-bg="2">Link 2</a>
<a href="path/to/link3" class="link" data-bg="3">Link 3</a> 
```

# c - 获取分段错误

> ID：10003917
> 
> 赞同：2
> 
> 时间：2012-04-04T01:42:58.027
> 
> 标签：c, segmentation-fault

为机器问题编写一些代码；我们刚刚开始使用指针等，所以我不太确定哪里出了问题。运行调试表明它是抛出错误的行：for(i=0; i<*y;i++)，尽管我确信 for(j=0;j<*x 中的任何错误也是错误的;j++) 空间。任何帮助将不胜感激。

```
 int readImage(char* fileName,
                  int image[MAX_IMAGE_SIZE][MAX_IMAGE_SIZE][NUM_CHANNELS],
                  int* x,
                  int* y,
                  int* max)
    {
        /* Variable declarations*/
        int i=0; 
        int j=0;
        int k=0;
        int num=0;
        char c;
        /* Opens file, skips first line*/
        FILE *input=fopen(fileName, "r");
        if(!input)
            return -1;
        do
            c=getc(input);
        while(c!='\n');
        /*Saves the x and y components into a variable */
        fscanf(input,"%d",&x);
        fscanf(input,"%d",&y);
        fscanf(input,"%d",&max);
        /*Cycles through file, reading it into the array */
        for(i=0; i<*y;i++)
        {
            for(j=0;j<*x;j++)
            {
                for(k=0;k<NUM_CHANNELS; k++)
                {
                    /*Takes input */
                    fscanf(input, "%d",&num);
                    /*Stores into the array in the form of array[x][y][color] */
                    image[j][i][k]=num;
                }
            }
        }
        /*Closes input  */
        fclose(input);
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:52:30.707

变量`x, y and max`已经是指针。所以你不需要`&`在 fscanf() 中使用 address-of。此外，如果调用者没有，您需要为它们分配内存。

只需使用：

```
 fscanf(input,"%d",x);
  fscanf(input,"%d",y);
  fscanf(input,"%d",max); 
```

并确保调用者为它们分配了内存。否则，使用[`malloc()`](http://linux.die.net/man/3/malloc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T02:00:14.167

你有一个错误的地方：你不应该将 &x 或 &y 传递给`scanf`. 只需传递 x 和 y。

解释如下：

x 和 y，由函数的参数定义，是指向存储和 int 的内存位置的指针，即在 x 和 y 的内存空间上，有一个内存地址指示实际 int 的存储位置。

然后是地址运算符 (&)。该运算符为您提供参数的内存地址。

`scanf`通常要求一个内存地址，它将存储读取的值，因此通常当您有一个 int 变量（`int i`例如 ）时，您使用 & ( `&i`) 为 scanf 提供其内存地址。但是在这种情况下，您不是在询问 int 的内存地址，而是在询问指针的内存地址。例如，如果您键入值“5”，那么它将存储在 y 上（同样，它是一个指针，而不是 int），然后，当您使用 *y 时，程序将尝试读取地址 5 上的内存很可能不是您的程序的有效地址（因此是分段错误）。

哇，在我说话的时候不给你画图，这真的很难解释，我希望你明白这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:29:01.620

正如其他人所说，参数`scanf()`需要是指针。由于您已经有一组指针（x、y 和 max），因此在将它们传递给时不需要取消引用它们`scanf()`

所以，而不是使用：

```
 fscanf(input,"%d",&x);
fscanf(input,"%d",&y);
fscanf(input,"%d",&max); 
```

你应该使用：

```
 fscanf(input,"%d",x);
fscanf(input,"%d",y);
fscanf(input,"%d",max); 
```

你说错误就行了： `for(i=0; i<*y;i++)`

那是因为 的内容`*y`没有被分配任何东西（至少在我们可以看到的代码中）。 `scanf()`将为 分配一个值`&y`，这将破坏 的原始值`y`，然后您尝试取消引用（即。`*y`）

如果第二个`scanf()`取值，比如 1024，那么您的`for()`循环将尝试取消引用地址 1024。

# dojo - 在 Dojo 中，当向其中添加新内容时，我无法在 StackContainer 中获得嵌套的 ContentPane 来调整大小

> ID：10003919
> 
> 赞同：0
> 
> 时间：2012-04-04T01:42:59.827
> 
> 标签：dojo, resize

我有一个包含多个 ContentPanes 的 StackContaner。当我尝试将内容添加到嵌套的 ContentPane 时（在创建和渲染之后），它不会调整大小，它始终保持其初始大小。有没有简单的方法来解决这个问题？这是它的布局方式：

```
StackContainer
-ContentPane
--ContentPane (nested)
-ContentPane 
```

这是工作示例：

[http://jsfiddle.net/zzdyM/1/](http://jsfiddle.net/zzdyM/1/)

单击示例中的添加按钮，我想让 div 自动调整高度以显示新内容，而不是使用滚动条保持相同的高度。单击该按钮应将另一个 span 元素添加到 innerPane，而不是替换当前存在的元素。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:30:53.153

您是想实现特定的布局还是只是用新内容替换现有内容“Blah Blah Blah”？

如果您只想用新内容替换现有内容，以下是最佳选择：

```
 dijit.byId('innerPane').attr('content','<span>Added Content</span>'); 
```

请参阅更新的小提琴：http: [//jsfiddle.net/YdZyZ/1/](http://jsfiddle.net/YdZyZ/1/)

# javascript - 使用 Javascript 在段落中显示图像替代

> ID：10003920
> 
> 赞同：1
> 
> 时间：2012-04-04T01:42:59.697
> 
> 标签：javascript

基本上我有一个滑块，当它悬停时，我想在段落中显示图像的 alt。我正在尝试使用 getElementByID 使用图像的 alt 内容设置一个变量，并使用 JavaScript 将其插入该段落中。我是新手...我得到了

```
 <script>
function linkDescription(){
           onmouseover=function() {
                         var newText = document.getElementById("website").alt
                         var placeToInsert = document.getElementById("description")
                         placeToInsert.appendChild(newText);
                     }
                     nodeAt.onmouseout=function() {
                           this.className="";
                     }
              }

window.onload=linkDescription;

</script>

<ul>
                    <li class="slider"><a href="http://www.thelollypot.co.nz" target="_blank"><img src="images/thelollypot.jpg" alt="The Lolly Pot" id="website"></a></li>
                    <li class="slider"><a href="http://www.tussockpeak.co.nz" target="_blank"><img src="images/tussockpeak.jpg" alt="Tussock Peak Motor Lodge" id="website"></a></li>
                    <li class="slider"><a href="http://www.mbbh.co.nz" target="_blank"><img src="images/mbbh.jpg" alt="Monteith's Hanmer" id="website"></a></li>
                    <li class="slider"><a href="http://www.hanmerevents.co.nz" target="_blank"><img src="images/hanmerevents.jpg" alt="HanmerEvents" id="website"></a></li>
                    <li class="slider"><a href="http://www.hanmersecurity.co.nz" target="_blank"><img src="images/hsss.jpg" alt="HSSS" id="website"></a></li>
                    <li class="slider"><a href="http://www.hanmersprings.info" target="_blank"><img src="images/hanmerspringsinfo.jpg" alt="HanmerSprings.info" id="website"></a></li>
                    <li class="slider"><a href="http://www.hanmertech.com" target="_blank"><img src="images/hanmertech.jpg" alt="HanmerTech" id="website"></a></li>
                    <li class="slider"><a href="http://www.chantellinis.com" target="_blank"><img src="images/chantellinis.jpg" alt="Chantellinis" id="website"></a></li>
                    <li class="slider"><a href="http://www.theplanner.co.nz" target="_blank"><img src="images/theplanner.jpg" alt="The Planner" id="website"></a></li>
                    <li class="slider"><a href="http://www.hanmerweddings.co.nz"><img src="images/hanmerweddings.jpg" alt="Hanmer Weddings" id="website"></a></li>
                    <li class="slider"><a href="http://www.kiwistamps.co.nz"><img src="images/kiwistamps.jpg" alt="KiwiStamps" id="website"></a></li>
                    <li class="slider"><a href="http://www.tailormadesuits.co.nz"><img src="images/tailormadesuits.jpg" alt="Tailor Made Suits" id="website"></a></li>
                    <li class="slider"><a href="http://www.buybodybuildingsupplements.co.nz"><img src="images/buybbs.jpg" alt="Bodybuilding Supplements" id="website"></a></li>
                    <li class="slider"><a href="http://www.whatever-brass.co.nz"><img src="images/whatever.jpg" alt="Whatever! Brasserie" id="website"></a></li>
                    <li class="slider"><a href="http://www.grumstours.com"><img src="images/grumstours.jpg" alt="Grums Tours" id="website"></a></li>
                    <li class="slider"><a href="http://www.activityhanmer.co.nz"><img src="images/activityhanmer.jpg" alt="Activity Hanmer" id="website"></a></li>
                    <li class="slider"><a href="http://www.annerleigh.co.nz"><img src="images/annerleigh.jpg" alt="Annerleigh B & B" id="website"></a></li>
                    <li class="slider"><a href="http://www.hanmerfashion.co.nz"><img src="images/hanmerfashion.jpg" alt="Hanmer Fashion" id="website"></a></li>
                </ul>
                <p style="text-align: center;" id="description">TEXT</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:57:26.057

使用您的 html，此小提琴将遍历每个 img 标签并在悬停时添加一个事件，该事件会更改描述段落内部 html 以匹配图像的 alt 文本。您可能应该为您想要的图像添加一个类并只处理这些图像，因为这会将效果添加到页面上的每个 img 标签。

[http://jsfiddle.net/HPfv7/](http://jsfiddle.net/HPfv7/)

好东西：

```
images = document.getElementsByTagName('img');
for (var i = 0; i < images.length; i++) {
    image = images[i];
    image.addEventListener( 'mouseover', function() {
        document.getElementById('description').innerHTML = this.alt;
    }); // end addEvent
} // end for​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:01:16.643

我认为你可以使用 CSS 来做到这一点。以下是使用 CSS 和 Javascript 进行此操作的好链接：

*   [用于链接、文本和图像的 CSS 鼠标悬停](http://www.scientificpsychic.com/etc/css-mouseover.html)

*   [创建鼠标悬停替代文字效果](http://www.actionscript.org/forums/showthread.php3?t=60258)

*   [Alt Text-like 效果：是否存在 JS 事件/行为](http://www.webmasterworld.com/forum91/365.htm)

让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:10:54.330

需要处理的问题太多，所以这里有一个工作示例：

```
<script type="text/javascript">

    function showAlt(evt) {

    // W3C event model uses event.target, IE event model uses event.srcElement
    var tgt = evt.target || evt.srcElement
    var el = document.getElementById('description');

    // Make sure tgt and el aren't undefined
    if (tgt && el) {

      // Use if el has no other content
      // Deal with the case where tgt doesn't have an alt property,
      // or the property has no value
      el.innerHTML = tgt.alt || '';
    }
}

</script>

<!-- Delegate event to parent element so only one listener -->
<!-- Pass the event object to the function, fixes cross browser issues -->
<ul onmouseover="showAlt(event);">
  <li><a href="#"><img src="a.jpg" alt="I am a"></a>
  <li><a href="#"><img src="b.jpg" alt="b am I"></a>
</ul>

<p style="text-align: center;" id="description"></p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T02:13:20.383

这应该工作得很好而且很有效

```
<ul>
    <li class="slider"><a href="http://www.thelollypot.co.nz" target="_blank"><img src="images/thelollypot.jpg" alt="The Lolly Pot" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.tussockpeak.co.nz" target="_blank"><img src="images/tussockpeak.jpg" alt="Tussock Peak Motor Lodge" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.mbbh.co.nz" target="_blank"><img src="images/mbbh.jpg" alt="Monteith's Hanmer" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.hanmerevents.co.nz" target="_blank"><img src="images/hanmerevents.jpg" alt="HanmerEvents" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.hanmersecurity.co.nz" target="_blank"><img src="images/hsss.jpg" alt="HSSS" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.hanmersprings.info" target="_blank"><img src="images/hanmerspringsinfo.jpg" alt="HanmerSprings.info" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.hanmertech.com" target="_blank"><img src="images/hanmertech.jpg" alt="HanmerTech" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.chantellinis.com" target="_blank"><img src="images/chantellinis.jpg" alt="Chantellinis" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.theplanner.co.nz" target="_blank"><img src="images/theplanner.jpg" alt="The Planner" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.hanmerweddings.co.nz"><img src="images/hanmerweddings.jpg" alt="Hanmer Weddings" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.kiwistamps.co.nz"><img src="images/kiwistamps.jpg" alt="KiwiStamps" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.tailormadesuits.co.nz"><img src="images/tailormadesuits.jpg" alt="Tailor Made Suits" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.buybodybuildingsupplements.co.nz"><img src="images/buybbs.jpg" alt="Bodybuilding Supplements" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.whatever-brass.co.nz"><img src="images/whatever.jpg" alt="Whatever! Brasserie" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.grumstours.com"><img src="images/grumstours.jpg" alt="Grums Tours" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.activityhanmer.co.nz"><img src="images/activityhanmer.jpg" alt="Activity Hanmer" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.annerleigh.co.nz"><img src="images/annerleigh.jpg" alt="Annerleigh B & B" onmouseover="onhover(this)"/></a></li>
    <li class="slider"><a href="http://www.hanmerfashion.co.nz"><img src="images/hanmerfashion.jpg" alt="Hanmer Fashion" onmouseover="onhover(this)"/></a></li>
</ul>
<p style="text-align:center" id="description"></p>
<script>
(function() {
    "use strict";
    var desc = document.getElementById("description");
    function out(e) {
        e || (e = window.event);
        desc.innerHTML = "";
        delete (e.target || e.srcElement).onmouseout;
    }
    window.onhover = function(img) {
        desc.innerHTML = img.alt;
        img.onmouseout = out;
    };
}());
</script> 
```

# arrays - 如何判断两个数组是否是彼此的排列（无法对它们进行排序）

> ID：10003929
> 
> 赞同：4
> 
> 时间：2012-04-04T01:43:37.807
> 
> 标签：arrays, algorithm, permutation

如果我有两个不同的数组，而我所能做的就是检查数组中的两个元素是否相等（换句话说，没有比较函数（除了相等）来对元素进行排序），是否有任何有效的方法来检查一个数组是否是另一个数组的排列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T02:13:52.483

像 Jared 的蛮力解决方案这样的词应该有效，但它是 O(n^2)。

如果元素是可散列的，则可以实现 O(n)。

```
def isPermutation(A, B):
    """
    Computes if A and B are permutations of each other.
    This implementation correctly handles duplicate elements.
    """
    # make sure the lists are of equal length
    if len(A) != len(B):
        return False

    # keep track of how many times each element occurs.
    counts = {}
    for a in A:
        if a in counts: counts[a] = counts[a] + 1
        else: counts[a] = 1

    # if some element in B occurs too many times, not a permutation
    for b in B:
        if b in counts:
            if counts[b] == 0: return False
            else: counts[b] = counts[b] - 1
        else: return False

    # None of the elements in B were found too many times, and the lists are
    # the same length, they are a permutation
    return True 
```

根据字典的实现方式（作为哈希集与树集），这将需要 O(n) 用于哈希集或 O(n log n) 用于树集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T01:56:22.340

这个实现可能是错误的，但总体思路应该是正确的。我刚刚开始使用python，所以这也可能是一种非常规或非pythonic的风格。

```
def isPermutation(list1, list2):
    # make sure the lists are of equal length
    if (len(list1) is not len(list2)):
        return False

    # keep track of what we've used
    used = [False] * len(list1)

    for i in range(len(list1)):
        found = False

        for j in range(len(list1)):
            if (list1[i] is list2[j] and not used[j]):
                found = True
                used[j] = True
                break

        if (not found):
            return False

    return True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T01:49:12.050

如果您的对象类型的散列有意义，您可以使用临时散列集插入数组 A 中的所有项目。然后在遍历数组 B 时，确保每个项目都已经在临时散列集中。

这应该比简单的嵌套 O(n^2) 循环更快（ O(n) ）。（除了小型或琐碎的数据集，更简单的朴素算法可能会胜过它）

请注意，这将占用 O(n) 额外的内存，并且这种方法仅在您没有重复项（或不想将它们计为比较的一部分）时才有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T02:02:04.440

假设两个数组的长度相等，并且一个元素可能多次出现在数组中，您可以创建另一个长度相同的 boolean 类型的数组，初始化为 false。

然后遍历其中一个数组并为每个元素检查该元素是否出现在另一个数组中相应布尔值为假的位置——如果出现，则将相应的布尔值设置为真。如果第一个数组中的所有元素都可以这样计算，那么两个数组相等，否则不相等（并且您发现至少有一个差异）。

内存需求为O(n)，时间复杂度为O(n^2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T02:10:40.257

因为我还不能发表评论（没有足够的代表），所以我将在这里提到这一点作为对其他答案之一的回复：Python 的 set() 不能很好地处理对象。

如果您有可散列的对象，则此代码应该适合您：

```
def perm(a, b):
        dicta = {}; dictb = {}
    for i in a:
            if i in dicta: dicta[i] += 1
            else: dict[i] = 1
    for i in b:
        if i in dictb: dictb[i] += 1
        else: dict[i] = 1
    return dicta == dictb 
```

构造 a 中对象的 hashmap 以及它们出现的次数。对于 b 中的每个元素，如果该元素不在 hashmap 中或出现不匹配，则它不是排列。否则，它是一个排列。

```
>>> perm([1,2,4], [1,4,2])
True
>>> perm([1,2,3,2,1], [1,2,1,2,3])
True
>>> perm([1,2,4], [1,2,2])
False 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-16T23:45:13.120

// C# 代码，l1 和 l2 是非排序列表

```
 private static bool AreListContainedEachOther(List<int> l1, List<int> l2)
        {​
            if (l1.Equals(null) || l2.Equals(null))​
                return false;​
​
            bool isContained = true;​
​
            foreach (int n in l1)​
            {​
                if (!l2.Contains(n))​
                    return false;​
            }​
​
            return isContained;​
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-01T07:58:07.540

前面的答案很棒。只需添加，在 Python 中，就像在 Python 中一样，它真的很简单。

如果 ：

1.  数组的长度相等。
2.  数组 B 中没有不存在于数组 A 中的元素。
3.  没有任何元素在数组 B 中的出现次数比在数组 A 中的次数多。

数组是彼此的排列

```
from collections import defaultdict

def is_permutation(a, b):
    if len(a) != len(b):
        return False
    counts = defaultdict(int)
    for element in a:
        counts[element] += 1
    for element in b:
        if not counts[element]:
            return False
        counts[element] -= 1
    return True 
```

# python - 异步运行一些 Python 代码的正确方法是什么？

> ID：10003933
> 
> 赞同：11
> 
> 时间：2012-04-04T01:44:07.160
> 
> 标签：python, flask, upstart

我需要从我的普通 Flask 应用程序发送邮件，所以我认为最简单的方法是使用 smtplib 发送邮件。但我必须异步执行 - 你不能只在请求中插入 3 秒延迟 - 对吧？因此，我将电子邮件添加到队列（psql 表）中，然后从另一个读取该表并使用 smptlib 的程序发送它。

第二个程序（maildonkey）作为一个独立的进程在一个独立的 upstart 服务中运行。

现在我需要另一个小的异步服务，我正在考虑是否应该编写另一个 python 脚本（第三个，计算我的 Flask 应用程序和“maildonkey”）或者我应该使用 Python 的“多进程”甚至“线程”之类的东西' 并重写第二个程序？

*（当我在 Clojure 中编程时，我可以很容易地使用“futures”在单独的线程中运行代码，所以通常我会这样做。）*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T01:46:18.213

您应该考虑使用[Celery](http://www.celeryproject.org/)。它在 Web 框架中非常广泛地用于异步处理，并支持许多不同的后端，如 AMQP、数据库等。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-04T02:29:19.520

试试[Gevent](http://gevent.org)。
您可以为您的长期任务创建 Greenlet 对象。
这个greenlet是[绿色线程](http://en.wikipedia.org/wiki/Green_threads)。

```
from gevent import monkey
monkey.patch_all()
import gevent
from gevent import Greenlet

class Task(Greenlet):
    def __init__(self, name):
        Greenlet.__init__(self)
        self.name = name    
    def _run(self):
        print "Task %s: some task..." % self.name

t1 = Task("long task")
t1.start()
# here we are waiting task
gevent.joinall([t1]) 
```

你也可以使用 Gevent 作为 Flask 的[服务器](http://flask.pocoo.org/docs/deploying/others)：

```
from gevent.wsgi import WSGIServer
from yourapplication import app

http_server = WSGIServer(('', 5000), app)
http_server.serve_forever() 
```

# javascript - 有没有办法在 display:none 中制作图像：浏览器不会下载？

> ID：10003935
> 
> 赞同：2
> 
> 时间：2012-04-04T01:44:38.137
> 
> 标签：javascript, jquery, html, css

我希望浏览器（尤其是移动 webkit）不下载`display:none`div 内的图像。现在，它们被下载而不是渲染。

有没有一个jQuery插件来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:59:16.907

你可以使用`data-*`属性。这样，您可以让 jQuery 按需加载它们：

```
<img data-source="image_path">

//this one gets all images and loads them
$('img').each(function(){
    //loads the source from data-source
    this.src = this.getAttribute('data-source');
});

<img data-source="image_path" class="foo">
<img data-source="image_path" class="foo">

//this one gets all images that have class foo and loads them
$('img.foo').each(function(){
    //loads the source from data-source
    this.src = this.getAttribute('data-source');
}); 
```

当然，您需要将其包装在一个函数中，以便您可以按需调用哪些图像。喜欢：

```
function loadImg(selector){
    $(selector).each(function(){
        this.src = this.getAttribute('data-source');
    });
}

//load images with class foo:
loadImg('.foo'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:08:08.253

我不这么认为。可以肯定的是，您将需要您的原始 HTML DOM 来排除隐藏图像，您可以使用基于用户代理嗅探的服务器端编程来执行此操作（尽管不推荐这样做）。`document.ready`在或之后修改 DOM`document.load`意味着浏览器已经有机会从服务器请求资源，即使它们可能不会显示。

这将是不寻常的，但如果您仍想使用 jQuery，您可以遵循@Pointy 的建议并在您的标记中制作所有图像占位符。然后`:visible`使用属性作为数据源将占位符替换为您想要的图像。不需要插件，只需使用诸如[replaceWith()](http://api.jquery.com/replaceWith/)或[attr()](http://api.jquery.com/attr/)之类的东西来替换您要下载的图像的占位符节点或更改`src`属性。

我会使用 1x1 透明 gif 作为具有正确高度和宽度属性的占位符，而不是没有`<img>`占位符的来源。这样，当页面呈现时，页面流将被正确确定，因此它不会在您的图像延迟加载时跳来跳去。

# xcode - 我需要一个包含 iPad 视网膜显示的 iOS 模拟器版本

> ID：10003936
> 
> 赞同：3
> 
> 时间：2012-04-04T01:44:54.953
> 
> 标签：xcode, ios-simulator

我正在尝试获取包含 iPad 视网膜显示器的 iOS 模拟器的副本。我按照[这个线程上](https://stackoverflow.com/questions/9679008/how-to-get-retina-display-ipad-simulator-in-xcode-4-2-mac-os-10-6-8-snow-loepa)的建议，下载了 Xcode 的最新副本：[https ://developer.apple.com/xcode/](https://developer.apple.com/xcode/)

然而，下载后，它实际上并没有更新模拟器，它仍然缺乏对 iPad 视网膜显示器的支持。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T23:35:59.127

好的，我找到了答案，考虑到文档为零，我很惊讶其他人能够找到模拟器。这是您到达那里的方法：

1.  右键单击 Xcode 文件并选择 Show Package Contents
2.  转到内容 --> 开发人员 --> 平台 --> iPhoneSimulator.platform --> 开发人员 --> 应用程序 --> iOS 模拟器

直觉吧？

为什么 Apple 决定在整个 iOS SDK 中埋葬可以说是最常用的工具，我可能永远也不会知道。

# jquery - 如何仅定位 youtube iframe 网址？

> ID：10003941
> 
> 赞同：4
> 
> 时间：2012-04-04T01:45:33.540
> 
> 标签：jquery, youtube

我正在寻找一种仅将这个 jquery 定位到其中包含“youtube.com”的 src url 的方法。我尝试使用 :contains 选择器，但无法正常工作。

```
jQuery(document).ready(function($){

    $('iframe').each(function() {
        var url = $(this).attr("src")
        $(this).attr("src",url+"&amp;wmode=transparent")
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T01:49:51.020

使用属性选择器仅定位具有`src`包含的iframe `youtube.com`：

```
jQuery(document).ready(function($){

    $('iframe[src*="youtube.com"]').each(function() {
        var url = $(this).attr("src")
        $(this).attr("src",url+"&amp;wmode=transparent")
    }); 

}); 
```

# java - runtime.exec 立即发送 EOF 输入？

> ID：10003942
> 
> 赞同：0
> 
> 时间：2012-04-04T01:45:34.043
> 
> 标签：java, command-line, process, exec

这是我通过 java 在 Windows 中启动进程的代码（并吞噬输出）。

```
 public static void main(String[] args) throws Exception {
    String[] command = new String[3];
    command[0] = "cmd";
    command[1] = "/C";
    command[2] = "test.exe";
    final Process child = Runtime.getRuntime().exec(command);
    new StreamGobbler(child.getInputStream(), "out").start();
    new StreamGobbler(child.getErrorStream(), "err").start();
    BufferedWriter out = new BufferedWriter(new OutputStreamWriter(
            child.getOutputStream()));
    out.write("exit\r\n");
    out.flush();
    child.waitFor();
}

private static class StreamGobbler extends Thread {
    private final InputStream inputStream;
    private final String name;

    public StreamGobbler(InputStream inputStream, String name) {
        this.inputStream = inputStream;
        this.name = name;
    }

    public void run() {
        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    inputStream));
            for (String s = in.readLine(); s != null; s = in.readLine()) {
                System.out.println(name + ": " + s);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

不知何故，有问题的程序（进程）立即收到 EOF（就像在我跨过“exec”行之后一样），因此在调用 runtime.exec 后立即抛出错误（检测到，无效）消息。我可以通过命令提示符手动运行该程序而不会出现此问题，但已确认在 Windows 上发送 ctrl-z 是导致此消息的原因。

有谁知道这可能是什么原因造成的？

如果重要的话，我已经尝试直接将进程作为“test.exe”而不是 cmd /c test.exe 运行，但是当我这样做时，我无法通过 inputStream 看到输出。当我在没有 /c 的情况下执行 cmd test.exe 时，没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:48:26.747

您的代码看起来应该可以工作（有一个警告，见下文）。

我将您的代码逐字替换`test.ext`为`sort`，它可以从管道标准输入中读取。

如果我按原样运行代码，它会启动等待输入的排序命令。它挂起是`child.waitFor()`因为您没有关闭输出流以指示 EOF。当我添加`close()`呼叫时，一切正常。

我建议您查看`test.exe`并确定它是否能够从管道标准输入读取，或者期待控制台输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:50:57.013

摆脱“cmd”和“/c”。目前您正在将输出提供给 cmd.exe，而不是 test.exe。

# java - 固定到单核时，Java 应用程序/JVM 运行速度极慢

> ID：10003951
> 
> 赞同：0
> 
> 时间：2012-04-04T01:46:45.417
> 
> 标签：java, linux

我编写了一个非常简单的单线程 java 应用程序，它简单地迭代（几次） Integer:s 列表并计算总和。当我在我的 Linux 机器（Intel X5677 3.46GHz 四核）上运行它时，程序大约需要 5 秒才能完成。同时，如果我使用任务集将 jvm 限制为两个特定的内核（这是完全可以预料的，因为应用程序是单线程的，并且所有内核上的 cpu 负载<0.1%）。但是，当我将 jvm 限制为单核时，程序突然执行异常缓慢，需要 350 多秒才能完成。我可以理解，当 jvm 除了主线程之外还运行其他几个线程时，它是否只是在限制为单个内核时稍微慢一些，但我无法理解这种极端差异。我在一台单核的旧笔记本电脑上运行相同的程序，它在大约 15 秒内执行。有谁知道这里发生了什么，或者有没有人成功地将 jvm 限制为多核系统上的单核而没有遇到类似的事情？顺便说一句，我用热点 1.6.0_26-b03 和 1.7.0-b147 都试过了——同样的问题。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:02:40.487

是的，这似乎违反直觉，但简单的解决方案是不这样做。让 JVM 使用 2 个内核。

FWIW，我的理论是 JVM 正在查看操作系统报告的内核数量，假设它将能够使用所有这些内核，并根据该假设进行自我调整。但是，您已将 JVM 固定到单个内核的事实使这种调整变得很糟糕。

一种可能性是 JVM 已打开自旋锁定。这是一种策略，其中无法立即获取锁的线程将“旋转”（反复测试锁）一段时间，而不是立即重新调度。如果您有多个核心并且锁被持有很短的时间，这可以很好地工作，但如果只有一个核心可用，那么自旋锁是一种反优化。

（如果这是问题的真正原因，我相信您可以设置一个 JVM 选项来关闭自旋锁。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:24:02.047

如果您有两个或多个相互依赖的线程，这将是正常行为。想象一个程序，其中两个线程在它们之间乒乓球消息或数据。当它们都在运行时，每个乒乓球可能需要 10 - 100 ns。当它们必须进行上下文切换才能运行时，它们可能需要 10 - 100 微秒。增加 1000 倍我不会感到惊讶。

如果您想将程序限制在一个核心上，您可能需要重新编写它的一部分，以便将其设计为在一个核心上有效地运行。

# ftp - FTP 客户端不接受欢迎消息

> ID：10003953
> 
> 赞同：0
> 
> 时间：2012-04-04T01:46:56.600
> 
> 标签：ftp, response, wireshark, filezilla

好吧，作为一个更大项目的一部分，我正在端口 2121 上开发一个 FTP 服务器。

现在客户端连接并且一切正常服务器向客户端发送 202 响应代码（这意味着几乎可以继续）

我已经连接了客户端并且可以确认数据包正在通过。

很好奇 FileZilla 做了什么，我对他们的服务器响应进行了 wireshark 处理，然后发送了相同的响应，不用说它不起作用，表明它不是 220 响应，而是其他我不知道的响应。

* * *

找到解决方案 :: 将 \r\n 添加到查询末尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-06T15:26:30.270

我很久以前就问过这个问题并且已经解决了这个问题，我正在回答它，以防有人搜索并遇到类似的问题。

该问题是由于在请求末尾未包含回车符引起的，请确保您这样做:)

# iphone - 用于移动开发的深度图形

> ID：10003961
> 
> 赞同：0
> 
> 时间：2012-04-04T01:48:44.247
> 
> 标签：iphone, graphics

我是一名长期的开发人员，在移动领域拥有丰富的经验。
我现在觉得自己欠缺的领域是对UI内部和性能的理解，可能更多的是在传统的计算机图形领域。

我正在寻找推荐的资源来增加对这些领域的理解，希望不需要通读 OpenGL 等的整个参考书目。

这可能吗？推荐的来源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:51:09.627

查看[http://www.RayWenderlich.com](http://www.RayWenderlich.com)有大量的图形相关教程，从 2D 到 3D，包括 CoreGraphics 和 OpenGL。

Apple 文档也有一些关于图形性能的很好的信息。你真的应该潜入然后在这里发布具体问题。

# objective-c - 断点指出“objc_autoreleaseNoPool”

> ID：10003962
> 
> 赞同：16
> 
> 时间：2012-04-04T01:49:03.823
> 
> 标签：objective-c, ios, xcode, breakpoints

所以我正在调试一个应用程序，为它的应用程序发布做准备，我为“所有异常”启用了一个通用断点。从那时起，每次我运行应用程序时，控制台都会打印：

> Catchpoint 2 (throw)Pending breakpoint 1 - "objc_exception_throw" 已解决
> 
> **objc [11765]：__NSCFLocale 类的对象 0x8f18ff0 自动释放，没有适当的池 - 只是泄漏 - 在 objc_autoreleaseNoPool() 上中断以进行调试**
> 
> **objc [11765]：__NSCFNumber 类的对象 0x8f190a0 自动释放，没有适当的池 - 只是泄漏 - 在 objc_autoreleaseNoPool() 上中断以进行调试**
> 
> **objc [11765]：__NSCFLocale 类的对象 0x8f1fef0 自动释放，没有适当的池 - 只是泄漏 - 在 objc_autoreleaseNoPool() 上中断以进行调试**

字面印刷3次。我不知道这意味着什么，但看起来很糟糕。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-05T20:31:18.247

**新信息**

我通过创建一个混合的自动释放方法来确定我的问题所在。

除非您知道自己在做什么，否则我不建议您这样做，但是这是我发现的。

```
+ (void) load; //Method is called outside the original autorelease pool.
+ (void) initialize; // Method is called outside the original autorelease pool. 
```

NSThread 创建自己的线程，被调用的方法应该包装在一个自动释放池中。

当使用“dispatch_...”命令时，Grand Central Dispatch 负责适应自动释放池。但是，当您手动发送时。您可能希望将其包装在自动释放池中。

此外，ARC 不会让您知道自动释放将在池外发生。

因此，如果您使用 ARC 并且知道您将在自动释放池之外。你对此无能为力。您将要避免所有方便的方法。

用这个。

```
[[NSString alloc] initWithFormat:@"%@",myObject]; 
```

而不是这个

```
[NSString stringWithFormat:@"%@",myObject]; 
```

这将允许 arc 系统保留和释放，但通过便捷方法完成的底层自动释放将被跳过，因为您不会使用便捷方法。

希望有帮助。

**原始答案**

好的，我觉得这个问题的回答不够详细。

呈现的信息是

```
objc[1310]: Object 0x34f720 of class SimpleKeychain autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug 
```

调试器指出了一个可能的断点，可以帮助您调试情况。现在虽然这个断点对调试情况几乎没有帮助。我认为知道如何将断点添加到调试器很重要，因此我花时间修补它（在搜索互联网并一无所获之后），直到我让它打破那个错误。

中断所有错误并没有捕捉到这一点有点烦人，但这里是将断点添加到调试器的步骤。

您要做的第一件事是选择调试器的断点导航器

![导航工具栏](../Images/35ef9cfe187aada33fae601f01503c3a.png)

通过单击此选项卡

![断点按钮](../Images/e034e2457eb11a5912cded6729e242be.png)

接下来，您查看导航器窗格的底部并按加号按钮

![添加异常断点](../Images/6ad86df0dc866041e842445e2a33ed0a.png)

这将允许您手动添加断点。

我选择了一个 C++ 断点并将消息名称输入到名称文本字段中。

![添加自定义 C++ 异常](../Images/9396244e5363f94bcae8a7922b998657.png)

添加此异常后，它实际上确实中断了。

但是，这对作为 Objective C 开发人员的您可能有用，也可能没用。这闯入了汇编代码。

![实现断点处的汇编代码。](../Images/6554b3a3454f385ea7f109dd8d15153d.png)

不幸的是，它只在线程的调用堆栈上显示了这一点。

![线程列表](../Images/332f3be43f36e111bd8bc094bd63a16c.png)

事实证明，自动释放问题是因为在 dispatch_once 调用中有一个名为 autorelease 的类。进一步调查显示 +(void) 负载；类上的方法在其他任何事情之前被调用。这是通过 call_load_methods 函数完成的，并且位于 main 方法的线程之外。

![错误调用和堆栈](../Images/ba21956b223f7cb9664523e6ccf8632f.png)

为了纠正这个问题，我只是在调用周围添加了自动释放池包装器。

![更新错误调用](../Images/d83a68e1d713c087b3715cf439a03593.png)

另一种解决方案可能是在 +(void)load 中添加自动释放池；方法。但这对我的用途来说已经足够了。

**注意：我将其添加到此处的帖子中，因为我不喜欢发现问题并且无法找出结果答案的所有路径。如果调试器告诉您向列出的函数添加断点，那么在某处应该有一些信息可以获取该信息。希望这会降低一些试图找到这个答案的人的挫败感。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:58:57.023

cocoa api 中的许多方法都返回自动释放的对象。特别是那些返回不以 开头的对象的方法`init`，例如`[NSNumber numberWithLong:]`. 如果您没有适当的自动释放池，这些对象将被泄露。`NSAutoreleasePool`您可以在[文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)中找到有关使用的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T02:20:45.420

这意味着您需要在它发生的线程上创建一个自动释放池。否则，您分配的对象将不会被销毁（如消息所示）。因此，在符号处中断/暂停，然后将堆栈向上移动到您的线程（或程序）条目并添加一个自动释放池。就这样。

# c++ - Windows 服务问题

> ID：10003967
> 
> 赞同：-2
> 
> 时间：2012-04-04T01:49:30.657
> 
> 标签：c++, windows, service

我正在尝试使用 c++ 让 Windows 服务正常工作。该服务在此刻没有做任何特别的事情。服务运行的代码是

```
int main(int argc, char** argv) {

    if (argc != 1) return -1;

    ofstream fTestFile;
    fTestFile.open("C:\\ABC\\ServiceTest.txt", ios::app);

    fTestFile << "argc=" << argc << endl;
    for (int i=0;i <argc;i++)
        fTestFile << "argv " << i << "=: " <<argv[i] << endl;

    for (int i=0; i<100000; i++) {
        fTestFile << i << ",";
        if (i % 50 == 0) fTestFile << "\n";
        Sleep(10);
    }
    fTestFile << "\n";
    return 0;
} 
```

当我通过该服务上的 services.msc 单击“开始”时，该服务尝试启动但失败（1053 错误响应时间太长）。在 servicetest.txt 文件中，我看到了一些数据，比如我看到了调试语句，我看到了 2663 之前的数字或其他东西。

有没有我遗漏的步骤，非常感谢任何帮助。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:15:57.093

您的服务需要与服务管理器 (services.exe) 通信以报告和更新其当前状态。

在这里阅读[http://msdn.microsoft.com/en-us/library/windows/desktop/ms687414%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687414%28v=vs.85%29.aspx)

# excel - 在 vba 中粘贴链接

> ID：10003968
> 
> 赞同：1
> 
> 时间：2012-04-04T01:49:32.873
> 
> 标签：excel, vba

我想将链接从一张纸粘贴到另一张纸上

```
Range("A1:D1").Select
Range("D1").Activate
Selection.Copy
Sheets("Sheet2").Select
ActiveSheet.Paste Link:=True 
```

但是，代码会使工作表从 Sheet1 切换到 Sheet2。无论如何，我可以在不切换工作表的情况下粘贴链接吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:37:31.427

这将起作用：

```
ThisWorkbook.Worksheets("Sheet2").Range("D1").Formula = "=Sheet1!D1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:35:14.290

我想这就是你正在尝试的？

```
Sub Sample()
    Dim i As Long
    For i = 1 To 4
        Sheets("Sheet2").Cells(1, i).Formula = "=Sheet1!" & _
                Split(Cells(, i).Address, "$")(1) & "1"
    Next i
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:50:04.150

此代码将与您的代码片段执行相同的操作，而无需更改活动工作表。

```
Range("A1:D1").Copy
Worksheets("Sheet2").Paste Link:=True 
```

请注意，这（和您的代码）将从活动工作表中复制。如果要从活动工作表以外的工作表复制，请使用类似

```
Worksheets("Sheet1").Range("A1:D1").Copy
Worksheets("Sheet2").Paste Link:=True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-04T07:18:08.327

我刚才也遇到了同样的问题。那时我才意识到，当我尝试运行我的代码时，TightVNC 已连接到另一台机器。当我关闭它时，代码照常运行。

发生这种情况可能是因为某些软件可能正在控制您的剪贴板。只需关闭您不需要的任何东西，例如 VNC 或虚拟机。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T05:33:31.743

如果不选择工作表，您的 LINK 愿望将无法完成。但是你可以让它做这件事的事实是肉眼看不见的。

```
Option Explicit

Sub test()
    Application.ScreenUpdating = False

    Sheets("Sheet1").Range("A1:D1").Copy
    With Sheets("Sheet2")
        .Activate
        .Range("A1").Select
        ActiveSheet.Paste Link:=True
    End With
    Sheets("Sheet1").Activate

    Application.CutCopyMode = False
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-28T17:37:17.380

您可以使用`Application.ScreenUpdating = False` ，然后在粘贴完成后将其返回为 true。

例子：

```
Application.ScreenUpdating = False
Worksheets("Sheet1").Range("D1").Copy    
Worksheets("Sheet2").Activate   
Range("Range You Want To Paste").Select    
ActiveSheet.PasteSpecial Link:=True  
Worksheets("Sheet1").Activate
Range("A Range You Want Active").Activate   
Application.ScreenUpdating =true 
```

# php - PHP-FPM 和 Nginx：502 错误网关

> ID：10003978
> 
> 赞同：79
> 
> 时间：2012-04-04T01:50:19.423
> 
> 标签：php, nginx, amazon-ec2, fastcgi, fpm

**配置**

*   Ubuntu 服务器 11.10 64 位
*   Amazon AWS，Ec2，托管在云上
*   t1.micro 实例

在我写其他东西之前，我想声明我已经检查了[nginx 502 bad gateway](https://stackoverflow.com/questions/4252368/nginx-502-bad-gateway)和[Nginx + PHP-FPM 502 Bad Gateway](https://stackoverflow.com/questions/3616191/nginx-php-fpm-502-bad-gateway)线程，不幸的是在这方面没有帮助我。

这个问题似乎很常见：nginx 或 php-fpm 的错误配置可能会导致`502 Bad Gateway`错误，这是我无法摆脱的。请注意，*即使我转到我的域 root 时也会*出现这种情况，而没有指定任何特定目录。

我正在运行一个 Amazon EC2 网络服务器，启用了端口 9000，打开了端口 80 等。

特别是问题是，我怎样才能摆脱这个讨厌的错误？或者，更好的是，我怎样才能`php5-fpm`真正*开始工作*。

**到目前为止我所做的尝试**

主要是对配置文件进行一致的编辑，尤其是`php-fpm.conf`和`nginx.conf`.

**一世。** *php-fpm.conf*

我添加了以下内容，但并没有太大帮助：

```
;;;;;;;;;;;;;
; Fpm Start ;
;;;;;;;;;;;;;

;pm.start_servers = 20
;pm.min_spare_servers = 5
;pm.max_spare_servers = 35 
```

现在，之后我尝试包含我的配置文件：

`include=/etc/php5/fpm/*.conf`

这只会让我更进一步。

***完整配置***

```
;;;;;;;;;;;;;;;;;;;;;
; FPM Configuration ;
;;;;;;;;;;;;;;;;;;;;;

; All relative paths in this configuration file are relative to PHP's install
; prefix (/usr). This prefix can be dynamicaly changed by using the
; '-p' argument from the command line.

; Include one or more files. If glob(3) exists, it is used to include a bunch of
; files from a glob(3) pattern. This directive can be used everywhere in the
; file.
; Relative path can also be used. They will be prefixed by:
;  - the global prefix if it's been set (-p arguement)
;  - /usr otherwise
;include=/etc/php5/fpm/*.conf

;;;;;;;;;;;;;;;;;;
; Global Options ;
;;;;;;;;;;;;;;;;;;

[global]
; Pid file
; Note: the default prefix is /var
; Default Value: none
pid = /var/run/php5-fpm.pid

; Error log file
; Note: the default prefix is /var
; Default Value: log/php-fpm.log
error_log = /var/log/php5-fpm.log

; Log level
; Possible Values: alert, error, warning, notice, debug
; Default Value: notice
log_level = notice

; If this number of child processes exit with SIGSEGV or SIGBUS within the time
; interval set by emergency_restart_interval then FPM will restart. A value
; of '0' means 'Off'.
; Default Value: 0
;emergency_restart_threshold = 0

; Interval of time used by emergency_restart_interval to determine when 
; a graceful restart will be initiated.  This can be useful to work around
; accidental corruptions in an accelerator's shared memory.
; Available Units: s(econds), m(inutes), h(ours), or d(ays)
; Default Unit: seconds
; Default Value: 0
emergency_restart_interval = 0

; Time limit for child processes to wait for a reaction on signals from master.
; Available units: s(econds), m(inutes), h(ours), or d(ays)
; Default Unit: seconds
; Default Value: 0
;process_control_timeout = 0

; Send FPM to background. Set to 'no' to keep FPM in foreground for debugging.
; Default Value: yes
daemonize = no

;;;;;;;;;;;;;
; Fpm Start ;
;;;;;;;;;;;;;

;pm.start_servers = 20
;pm.min_spare_servers = 5
;pm.max_spare_servers = 35

;;;;;;;;;;;;;;;;;;;;
; Pool Definitions ; 
;;;;;;;;;;;;;;;;;;;;

; Multiple pools of child processes may be started with different listening
; ports and different management options.  The name of the pool will be
; used in logs and stats. There is no limitation on the number of pools which
; FPM can handle. Your system will tell you anyway :)

; To configure the pools it is recommended to have one .conf file per
; pool in the following directory:
include=/etc/php5/fpm/pool.d/*.conf 
```

**二**、*nginx.conf*

老实说，这个配置只是我访问过的几个网站的一小部分，但我可以告诉你，在这个 502 Bad Gateway 业务之前，服务器运行良好（没有 PHP 工作。期间。）。

问题主要在于某些事情是非常非常错误的。而现在，当我尝试做 a 时`service php5-fpm restart`，它会挂在我猜是无限循环或其他东西中，我什`CTRL`至无法`C`摆脱它。

***完整配置***

```
user www-data;
worker_processes 1;
pid /var/run/nginx.pid;

events {
    worker_connections 64;
    # multi_accept on;
}

http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush off;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;

    server {
        listen 80;
        server_name ec2-xx-xx-xx-xx.compute-x.amazonaws.com;

        location ~ ^(.+\.php)(.*)$ {
            root   /home/wayvac/public;
            fastcgi_pass   unix:/var/run/php5-fpm.pid;  
            #fastcgi_pass   127.0.0.1:9000; #Un-comment this and comment "fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock;" if you are not using php-fpm.
            fastcgi_index  index.php;
            set $document_root2 $document_root;
            if ($document_root2 ~ "^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$") { set $document_root2 $1$2; }
            if ($document_root2 ~ "^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$") { set $document_root2 $1$2; }
            if ($document_root2 ~ "^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$") { set $document_root2 $1$2; }
            if ($document_root2 ~ "^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$") { set $document_root2 $1$2; }
            if ($document_root2 ~ "^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$") { set $document_root2 $1$2; }
            fastcgi_split_path_info ^(.+\.php)(.*)$;
            fastcgi_param   SCRIPT_FILENAME $document_root2$fastcgi_script_name;
            fastcgi_param   PATH_INFO   $fastcgi_path_info;
            fastcgi_param   PATH_TRANSLATED $document_root2$fastcgi_path_info;
            include fastcgi_params;
            fastcgi_param  DOCUMENT_ROOT      $document_root2;
        }       

        access_log /var/log/nginx/access.log;
        error_log /var/log/nginx/error.log;

        location / {
            root /home/wayvac/public;   
            index index.html index.htm index.php;
        }

        location ~* \.(?:ico|css|js|gif|jpe?g|png)$ {
            # Some basic cache-control for static files to be sent to the browser
            expires max;
            add_header Pragma public;
            add_header Cache-Control "public, must-revalidate, proxy-revalidate";
        }

        #include drop.conf;
        #include php.conf;
    }
} 
```

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-01-28T10:40:06.817

如果有人通过遇到与我相同的问题找到此页面，我在[这里](http://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-lemp-on-ubuntu-12.04-lts)找到了答案。

对于那些懒得点击并自己解决的人... ;)

**条件：**

带有 NGINX 和 PHP 5.3 的 Ubuntu 或 Debian 服务器工作正常，但将 PHP 升级到 5.4 会出现 502 Bad Gateway 错误。寻找在端口 9000 上运行的服务（通常是运行的`netstat -lp`或类似的）不会返回任何结果。

**修复：**

打开`/etc/php5/fpm/pool.d/www.conf`并记下“listen”参数（在我的例子中`/var/run/php5-fpm.sock`）：

```
; The address on which to accept FastCGI requests.
; Valid syntaxes are:
;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific address on
;                            a specific port;
;   'port'                 - to listen on a TCP socket to all addresses on a
;                            specific port;
;   '/path/to/unix/socket' - to listen on a unix socket.
; Note: This value is mandatory.
listen = /var/run/php5-fpm.sock 
```

并将您的 vhost 中的 fastcgi_pass 变量替换为您刚刚记下的位置。

所以这个示例 symfony2 配置（取自[这里](http://wiki.nginx.org/Symfony)）：

```
 # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
  location ~ ^/(app|app_dev)\.php(/|$) {
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    include fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
    fastcgi_param  HTTPS              off;
  } 
```

变成这样：

```
 # pass the PHP scripts to FastCGI server at /var/run/php5-fpm.sock
  location ~ ^/(app|app_dev)\.php(/|$) {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    include fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
    fastcgi_param  HTTPS              off;
  } 
```

然后重启nginx：

```
sudo /etc/init.d/nginx restart 
```

**注意：**如果您不在 SF2 上，请替换`~ ^/(app|app_dev)\.php(/|$) {`为**`~ ^/index\.php(/|$) {`

希望这可以节省一些时间:)

**编辑**

当然，您可以将其更改`listen = /var/run/php5-fpm.sock`为`listen = 127.0.0.1:9000`in`/etc/php5/fpm/pool.d/www.conf`然后重新启动 php5-fpm（这将使您不必更改虚拟主机），但您必须假设他们更改了 php5-fpm 以通过套接字运行，而不是在端口 9000 上监听原因。

**编辑2**

如果您仍然遇到 502 错误，请参阅此[答案](https://stackoverflow.com/questions/23443398/nginx-error-connect-to-php5-fpm-sock-failed-13-permission-denied/23487409#23487409)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-22T06:51:19.013

尝试设置这些值，它解决了 fast-cgi 中的问题

```
fastcgi_buffer_size 16k;
fastcgi_buffers 4 16k; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-22T00:58:46.780

我做了所有这些类似的调整，但有时我会收到 501/502 错误（每天）。

这是我在**/etc/php5/fpm/pool.d/www.conf**上的设置，以避免 501 和 502 nginx 错误……服务器有 16Gb RAM。此配置适用于 8Gb RAM 服务器，因此...</p>

```
sudo nano /etc/php5/fpm/pool.d/www.conf 
```

然后设置以下值

```
pm.max_children = 70
pm.start_servers = 20
pm.min_spare_servers = 20
pm.max_spare_servers = 35
pm.max_requests = 500 
```

在此更改后重新启动 php-fpm

```
sudo service php-fpm restart 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-30T05:25:07.893

如果你像我一样在升级 php-fpm 后遇到问题，试试这个：打开 /etc/php5/fpm/pool.d/www.conf 取消注释以下行：

```
listen.owner = www-data
listen.group = www-data
listen.mode = 0666 
```

然后重新启动 php-fpm。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-11T06:45:17.613

别忘了这`php-fpm`是一项服务。安装后，确保启动它：

```
# service php-fpm start
# chkconfig php-fpm on 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-23T18:40:52.943

对于其他努力追根究底的人，我尝试按照建议调整超时，因为我不想停止使用 Unix 套接字……经过大量故障排除并且没有太多工作要做后，我发现这个问题是由通过几个月前我在 php-fpm 中启用的 APC 扩展。禁用此扩展解决了间歇性 502 错误，最简单的方法是注释掉以下行：

```
;extension = apc.so 
```

这对我有用！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-04T07:07:25.127

该端口在 5.4 中更改为 9001，只是在 nginx conf 和 php-fpm 配置中将端口从 9000 更改为 9001 对我有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-12T15:37:07.620

希望这个技巧能挽救别人的生命。就我而言，问题是我的内存不足，但只是轻微地，很难考虑。浪费了3个小时。我建议运行：

```
sudo htop 
```

或者

```
sudo free -m 
```

...以及在服务器上运行有问题的请求以查看您的内存是否没有用完。如果在我的情况下确实如此，您需要创建交换文件（除非您已经有一个）。

我已按照本教程在 Ubuntu Server 14.04 上创建交换文件，它工作得很好： [http ://www.cyberciti.biz/faq/ubuntu-linux-create-add-swap-file/](http://www.cyberciti.biz/faq/ubuntu-linux-create-add-swap-file/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-25T05:04:37.960

您应该会看到错误日志。默认情况下，它的位置在 /var/log/nginx/error.log

就我而言，502 之所以成功，是因为：

```
GET /app_dev.php HTTP/1.1", upstream: "fastcgi://unix:/run/php/php7.0-fpm.sock:", host: "symfony2.local"
2016/05/25 11:57:28 [error] 22889#22889: *3 upstream sent too big header while reading response header from upstream, client: 127.0.0.1, server: symfony2.local, request: "GET /app_dev.php HTTP/1.1", upstream: "fastcgi://unix:/run/php/php7.0-fpm.sock:", host: "symfony2.local"
2016/05/25 11:57:29 [error] 22889#22889: *3 upstream sent too big header while reading response header from upstream, client: 127.0.0.1, server: symfony2.local, request: "GET /app_dev.php HTTP/1.1", upstream: "fastcgi://unix:/run/php/php7.0-fpm.sock:", host: "symfony2.local"
2016/05/25 11:57:29 [error] 22889#22889: *3 upstream sent too big header while reading response header from upstream, client: 127.0.0.1, server: symfony2.local, request: "GET /app_dev.php HTTP/1.1", upstream: "fastcgi://unix:/run/php/php7.0-fpm.sock:", host: "symfony2.local" 
```

当我们确切地知道出了什么问题时，然后修复它。对于这些错误，只需修改缓冲区：

```
fastcgi_buffers 16 512k; 
fastcgi_buffer_size 512k; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-09T22:53:50.757

我还发现将 json_encoded() 数据写入 MySQL 时可能会导致此错误。为了解决这个问题，我使用 base64_encode() JSON。请注意，在解码时，JSON 编码会改变值。NB。24 可以变成 24.00

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-29T15:39:50.153

好吧，在尝试了网络上的所有解决方案之后，我最终用非常简单的方法解决了这个问题，首先我检查了 php-fpm err log

```
cat /var/log/php5-fpm.log 
```

最重复的错误是

```
" WARNING: [pool www] server reached pm.max_children setting (5), consider raising it " 
```

我编辑 PHP-fpm 池设置

```
nano /etc/php5/fpm/pool.d/www.conf 
```

I chenged 这条线

```
pm.max_children = 5 
```

新价值

```
pm.max_children = 10 
```

顺便说一句，我使用的是 128MB ram 的低端 VPS，因为我认为 redusing 的其他人`pm.max_children`会让我的服务器运行得更快，消耗更少的内存，但是我们使用的设置太低，甚至无法启动 PHP-fpm 进程。我希望这对其他人有所帮助，因为我在 24 小时测试和失败后发现了这一点，我的虚拟主机支持无法解决这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-28T15:44:28.360

我玩这个游戏已经很晚了，但是当我在服务器上升级 php 时，我的问题就开始了。我能够删除 .socket 文件并重新启动我的服务。然后，一切正常。不知道为什么会有所不同，因为文件大小为 0 并且所有权和权限相同，但它有效。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-17T14:33:29.077

在弄乱 Nginx 配置之前，请先尝试禁用 ChromePHP。

### 1 - 打开 app/config/config_dev.yml

### 2 - 评论这些行：

```
chromephp:
    type:   chromephp
    level:  info 
```

ChromePHP 将调试信息 json-encoded 打包在 X-ChromePhp-Data 标头中，这对于带有 fastcgi 的 nginx 的默认配置来说太大了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-05-23T17:32:46.833

在您的 NGINX vhost 文件中，在`location ~ \.php$ {`通过 FastCGI 处理您的 PHP 文件（通常是 ）的 location 块中，确保您有下一行：

```
proxy_buffer_size          128k;
proxy_buffers              4 256k;
proxy_busy_buffers_size    256k;
fastcgi_buffer_size        16k;
fastcgi_buffers            4 16k; 
```

之后不要忘记重新启动 fpm 和 nginx。

* * *

**额外的：**

*NGINX 虚拟主机路径*

*   `/etc/nginx/sites-enabled/`- Linux
*   '/usr/local/etc/nginx/sites-enabled/' - Mac

*重启 NGINX：*

*   `sudo service nginx restart`- Linux
*   `brew service restart nginx`- 苹果电脑

*重启 FPM：*

确定fpm进程名：`systemctl list-unit-files | grep fpm`--Linux `brew services list | grep php`--Mac

然后使用以下命令重新启动它：

*   `sudo service <service-name> restart`- Linux
*   `brew services restart <service-name>`- 苹果电脑

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-12T01:37:35.407

也许这个答案会有所帮助：

[nginx error connect to php5-fpm.sock failed (13: Permission denied)](https://stackoverflow.com/questions/23443398/nginx-error-connect-to-php5-fpm-sock-failed-13-permission-denied/59700194#59700194)

解决方案是用 /var/www/php/fpm/pool.d/www.conf 中的 nginx 替换 www-data

并分别修改socket凭证：

```
$ sudo chmod nginx:nginx /var/run/php/php7.2-fpm.sock 
```

# javascript - ASP.Net 在 mouseOver 上更改 ImageButton.ImageUrl

> ID：10003985
> 
> 赞同：0
> 
> 时间：2012-04-04T01:51:16.933
> 
> 标签：javascript, asp.net, imagebutton

我正在学习 ASP.Net。我有一个动态创建的 ImageButton，我想在用户将鼠标悬停在控件上时更改 ImageURL。我已经尝试过了，但它不起作用：

```
 imgStars.Attributes.Add("onmouseover", "this.src= '~/Images/4Stars.png'") 
```

如果我将代码隐藏中的 imgStars.ImageURL 设置为 ~/Images/4Stars.png 它可以工作。但它在javascript中不起作用。

请帮忙。我已经尝试了几个小时来寻找我的答案，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:50:48.903

“xanadont”回答正确，但您的解决方案不适用于每种情况。为确保客户端可以使用每个相对目录，请使用以下代码片段：

```
imgStars.Attributes.Add("onmouseover", "this.src= '" + this.Page.ResolveClientUrl("~/Images/4Stars.png") + "'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T06:49:09.220

在 VB 中，您应该使用以下代码：

```
 *imgBtnRegister.Attributes.Add("onmouseover", "this.src='" + Page.ResolveClientUrl("~/Images/Register_2.jpg") + "'")
        imgBtnRegister.Attributes.Add("onmouseout", "this.src='" + Page.ResolveClientUrl("~/Images/Register_1.jpg") + "'")*

use *Page.ResolveClientUrl("~/Images/Register_2.jpg")* instead of *this.Page.ResolveClientUrl("~/Images/Register_2.jpg")* 
```

# java - 我不断收到 NullPointerException 但找不到我犯错的地方

> ID：10003989
> 
> 赞同：0
> 
> 时间：2012-04-04T01:51:39.287
> 
> 标签：java, android, nullpointerexception

据我所知，我使用的每个变量都不会在没有先被赋值的情况下使用。nullpointerexception 发生在此活动开始的那一刻。抱歉，我不能更具体。

```
package pd.wilson.com;

import android.app.Activity;
import android.content.Intent;
 import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;

public class Page3 extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.page3);
        final RadioGroup size = (RadioGroup)findViewById(R.id.RGSize);
        final RadioGroup crust = (RadioGroup)findViewById(R.id.RGCrust);
        final RadioButton small = (RadioButton)findViewById(R.id.RBS);
        final RadioButton medium = (RadioButton)findViewById(R.id.RBM);
        final RadioButton large = (RadioButton)findViewById(R.id.RBL);
        final RadioButton regular = (RadioButton)findViewById(R.id.RBRegular);
        final RadioButton thin = (RadioButton)findViewById(R.id.RBThin);

        final String sizeS, crustS;
        if (size.getCheckedRadioButtonId() == small.getId()){
            sizeS = "Small";
            }
            else if(size.getCheckedRadioButtonId() == medium.getId()){
            sizeS = "Medium";
            }   
            else{
            sizeS = "Large";
            }
        if (crust.getCheckedRadioButtonId() == regular.getId()){
            crustS = "Regular";
            }
            else{
            crustS = "Thin";
            }

        TextView size1 = (TextView)findViewById(R.id.tvsize);
        size1.setText(sizeS);
        TextView crust1 = (TextView)findViewById(R.id.tvcrust);
        crust1.setText(crustS);

            final CheckBox sausage = (CheckBox)findViewById(R.id.cbsausage);
                int i1 = Ifchecked.gettrue(sausage);
            final CheckBox mushrooms = (CheckBox)findViewById(R.id.cbmushrooms);
                int i2 = Ifchecked.gettrue(mushrooms);
            final CheckBox pepperoni = (CheckBox)findViewById(R.id.cbpepperoni);
                int i3 = Ifchecked.gettrue(pepperoni);
            final CheckBox onions = (CheckBox)findViewById(R.id.cbonions);
                int i4 = Ifchecked.gettrue(onions);
            final CheckBox ham = (CheckBox)findViewById(R.id.cbham);
                int i5 = Ifchecked.gettrue(ham);
            final CheckBox peppers = (CheckBox)findViewById(R.id.cbpeppers);
                int i6 = Ifchecked.gettrue(peppers);
            final CheckBox beef = (CheckBox)findViewById(R.id.cbbeef);
                int i7 = Ifchecked.gettrue(beef);
            final CheckBox tomatoes = (CheckBox)findViewById(R.id.cbtomatoes);
                int i8 = Ifchecked.gettrue(tomatoes);
            final CheckBox bacon = (CheckBox)findViewById(R.id.cbbacon);
                int i9 = Ifchecked.gettrue(bacon);
            final CheckBox green = (CheckBox)findViewById(R.id.cbgreen);
                int i10 = Ifchecked.gettrue(green);
            final CheckBox olives = (CheckBox)findViewById(R.id.cbolives);
                int i11 = Ifchecked.gettrue(olives);
    int numtop = i1+i2+i3+i4+i5+i6+i7+i8+i9+i10+i11;

}
} 
```

堆栈跟踪：

```
04-04 01:41:46.536: D/AndroidRuntime(676): Shutting down VM 
04-04 01:41:46.536: W/dalvikvm(676): threadid=1: thread exiting with uncaught exception (group=0x40015560) 
04-04 01:41:46.556: E/AndroidRuntime(676): FATAL EXCEPTION: main 
04-04 01:41:46.556: E/AndroidRuntime(676): java.lang.RuntimeException: Unable to start activity ComponentInfo{pd.wilson.com/pd.wilson.com.Page3}: java.lang.NullPointerException 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647) 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663) 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.app.ActivityThread.access$1500(ActivityThread.java:117) 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.os.Handler.dispatchMessage(Handler.java:99) 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.os.Looper.loop(Looper.java:123) 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.app.ActivityThread.main(ActivityThread.java:3683) 
04-04 01:41:46.556: E/AndroidRuntime(676): at java.lang.reflect.Method.invokeNative(Native Method) 
04-04 01:41:46.556: E/AndroidRuntime(676): at java.lang.reflect.Method.invoke(Method.java:507) 
04-04 01:41:46.556: E/AndroidRuntime(676): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 
04-04 01:41:46.556: E/AndroidRuntime(676): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
04-04 01:41:46.556: E/AndroidRuntime(676): at dalvik.system.NativeStart.main(Native Method) 
04-04 01:41:46.556: E/AndroidRuntime(676): Caused by: java.lang.NullPointerException 
04-04 01:41:46.556: E/AndroidRuntime(676): at pd.wilson.com.Page3.onCreate(Page3.java:29) 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
04-04 01:41:46.556: E/AndroidRuntime(676): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
04-04 01:41:46.556: E/AndroidRuntime(676): ... 11 more 
04-04 01:41:48.256: I/Process(676): Sending signal. PID: 676 SIG: 9 
04-04 01:45:18.077: D/AndroidRuntime(733): Shutting down VM 
04-04 01:45:18.077: W/dalvikvm(733): threadid=1: thread exiting with uncaught exception (group=0x40015560) 
04-04 01:45:18.099: E/AndroidRuntime(733): FATAL EXCEPTION: main 
04-04 01:45:18.099: E/AndroidRuntime(733): java.lang.RuntimeException: Unable to start activity ComponentInfo{pd.wilson.com/pd.wilson.com.Page3}: java.lang.NullPointerException 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647) 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663) 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.app.ActivityThread.access$1500(ActivityThread.java:117) 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.os.Handler.dispatchMessage(Handler.java:99) 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.os.Looper.loop(Looper.java:123) 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.app.ActivityThread.main(ActivityThread.java:3683) 
04-04 01:45:18.099: E/AndroidRuntime(733): at java.lang.reflect.Method.invokeNative(Native Method) 
04-04 01:45:18.099: E/AndroidRuntime(733): at java.lang.reflect.Method.invoke(Method.java:507) 
04-04 01:45:18.099: E/AndroidRuntime(733): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 
04-04 01:45:18.099: E/AndroidRuntime(733): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
04-04 01:45:18.099: E/AndroidRuntime(733): at dalvik.system.NativeStart.main(Native Method) 
04-04 01:45:18.099: E/AndroidRuntime(733): Caused by: java.lang.NullPointerException 
04-04 01:45:18.099: E/AndroidRuntime(733): at pd.wilson.com.Page3.onCreate(Page3.java:29) 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
04-04 01:45:18.099: E/AndroidRuntime(733): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
04-04 01:45:18.099: E/AndroidRuntime(733): ... 11 more 
04-04 01:46:10.457: D/AndroidRuntime(767): Shutting down VM 
04-04 01:46:10.457: W/dalvikvm(767): threadid=1: thread exiting with uncaught exception (group=0x40015560) 
04-04 01:46:10.496: E/AndroidRuntime(767): FATAL EXCEPTION: main 
04-04 01:46:10.496: E/AndroidRuntime(767): java.lang.RuntimeException: Unable to start activity ComponentInfo{pd.wilson.com/pd.wilson.com.Page3}: java.lang.NullPointerException 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647) 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663) 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.app.ActivityThread.access$1500(ActivityThread.java:117) 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.os.Handler.dispatchMessage(Handler.java:99) 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.os.Looper.loop(Looper.java:123) 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.app.ActivityThread.main(ActivityThread.java:3683) 
04-04 01:46:10.496: E/AndroidRuntime(767): at java.lang.reflect.Method.invokeNative(Native Method) 
04-04 01:46:10.496: E/AndroidRuntime(767): at java.lang.reflect.Method.invoke(Method.java:507) 
04-04 01:46:10.496: E/AndroidRuntime(767): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 
04-04 01:46:10.496: E/AndroidRuntime(767): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
04-04 01:46:10.496: E/AndroidRuntime(767): at dalvik.system.NativeStart.main(Native Method) 
04-04 01:46:10.496: E/AndroidRuntime(767): Caused by: java.lang.NullPointerException 
04-04 01:46:10.496: E/AndroidRuntime(767): at pd.wilson.com.Page3.onCreate(Page3.java:29) 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
04-04 01:46:10.496: E/AndroidRuntime(767): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
04-04 01:46:10.496: E/AndroidRuntime(767): ... 11 more 
04-04 01:46:12.348: I/Process(767): Sending signal. PID: 767 SIG: 9 
04-04 01:55:31.597: D/AndroidRuntime(800): Shutting down VM 
04-04 01:55:31.597: W/dalvikvm(800): threadid=1: thread exiting with uncaught exception (group=0x40015560) 
04-04 01:55:31.607: E/AndroidRuntime(800): FATAL EXCEPTION: main 
04-04 01:55:31.607: E/AndroidRuntime(800): java.lang.RuntimeException: Unable to start activity ComponentInfo{pd.wilson.com/pd.wilson.com.Page3}: java.lang.NullPointerException 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647) 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663) 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.app.ActivityThread.access$1500(ActivityThread.java:117) 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.os.Handler.dispatchMessage(Handler.java:99) 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.os.Looper.loop(Looper.java:123) 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.app.ActivityThread.main(ActivityThread.java:3683) 
04-04 01:55:31.607: E/AndroidRuntime(800): at java.lang.reflect.Method.invokeNative(Native Method) 
04-04 01:55:31.607: E/AndroidRuntime(800): at java.lang.reflect.Method.invoke(Method.java:507) 
04-04 01:55:31.607: E/AndroidRuntime(800): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 
04-04 01:55:31.607: E/AndroidRuntime(800): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
04-04 01:55:31.607: E/AndroidRuntime(800): at dalvik.system.NativeStart.main(Native Method) 
04-04 01:55:31.607: E/AndroidRuntime(800): Caused by: java.lang.NullPointerException 
04-04 01:55:31.607: E/AndroidRuntime(800): at pd.wilson.com.Page3.onCreate(Page3.java:29) 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
04-04 01:55:31.607: E/AndroidRuntime(800): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
04-04 01:55:31.607: E/AndroidRuntime(800): ... 11 more 
04-04 01:55:33.357: I/Process(800): Sending signal. PID: 800 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:03:00.530

根据您的堆栈跟踪：

```
04-04 01:41:46.556: E/AndroidRuntime(676): Caused by: java.lang.NullPointerException 
04-04 01:41:46.556: E/AndroidRuntime(676): at pd.wilson.com.Page3.onCreate(Page3.java:29) 
```

看起来该文件的第 29 行是问题所在：

```
if (size.getCheckedRadioButtonId() == small.getId()){ 
```

要么 要么`size`可能`small`是一个空引用，所以你应该检查一下。

如果事实证明其中一个*是*空的（可能），那么谷歌搜索`android findviewbyid return null`就会发现很多潜在的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:58:05.853

根据您的堆栈跟踪：

```
Caused by: java.lang.NullPointerException
E/AndroidRuntime(676): at pd.wilson.com.Page3.onCreate(Page3.java:29) 
```

因此，我会检查**Page3.java的第****29**行。是从该行抛出的，因此您应该查看该行并尝试推断您要取消引用的变量（取消引用运算符 = ）**`NullPointerException``.`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:39:44.410

```
 final String sizeS, crustS;
        if (size.getCheckedRadioButtonId() == small.getId()){
            sizeS = "Small";
            }
            else if(size.getCheckedRadioButtonId() == medium.getId()){
            sizeS = "Medium";
            }   
            else{
            sizeS = "Large";
            }
        if (crust.getCheckedRadioButtonId() == regular.getId()){
            crustS = "Regular";
            }
            else{
            crustS = "Thin";
            } 
```

查看上面的行，您将 sizeS 声明为 final，这意味着它不能再次更改。然而，这不是崩溃的问题..

size.getCheckedRadioButtonId() 或 small.getId() 为空。**

# java - 如果有条件，每个条件单独起作用，但不能一起起作用

> ID：10003995
> 
> 赞同：0
> 
> 时间：2012-04-04T01:52:34.103
> 
> 标签：java, android, if-statement

我单独测试了每个语句并且它有效，但是当我使用 || 它忽略了语句的 !driver.getText().toString().equals("") 部分。有任何想法吗？

```
 if((!driver.getText().toString().equals(""))|| (canDrive>=0) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:01:19.493

`||`运算符表示*或*-因此，如果任一条件为真，则测试成功。如果您希望这两个条件都为真，请使用`&&`.

更多阅读：[http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:54:39.223

如果要执行条件的两个部分，请使用“|” 操作员。IE

```
if(driver.getText().toString().length() > 0 | canDrive >= 0) 
```

虽然，应该始终执行语句的左侧部分：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.24](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.24)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:01:46.227

如果编译器发现 canDrive >=0 肯定会忽略其余部分条件，因为您正在使用 || （或）条件，所以这会发生，

其他明智的完美，

我试过看代码。

```
class test{
    public static void main(String[] arr){
    String str = TestString";
    int canDrive = 1;
    if(!str.toString().equals("") || canDrive >=0)
        System.out.println("pass");
        else
        System.out.println("fail");
    }
} 
```

# java - 使用 Runnable 类与 Java 服务器进行 URL 解析

> ID：10003998
> 
> 赞同：0
> 
> 时间：2012-04-04T01:52:50.720
> 
> 标签：java, url, runnable

如何使用这样的系统解析 URL 查询。

例如，在变量中获取这些 URL 参数。

[http://localhost?format=json&apikey=838439873473kjdhfkhdf](http://localhost?format=json&apikey=838439873473kjdhfkhdf)

[http://tutorials.jenkov.com/java-multithreaded-servers/multithreaded-server.html](http://tutorials.jenkov.com/java-multithreaded-servers/multithreaded-server.html)

我制作了这些文件

**WorkerRunnable.java**

```
package servers;

import java.io.InputStream;
import java.io.OutputStream;
import java.io.IOException;
import java.net.Socket;

/**

*/
public class WorkerRunnable implements Runnable{

protected Socket clientSocket = null;
protected String serverText   = null;

public WorkerRunnable(Socket clientSocket, String serverText) {
    this.clientSocket = clientSocket;
    this.serverText   = serverText;
}

public void run() {
    try {
        InputStream input  = clientSocket.getInputStream();
        OutputStream output = clientSocket.getOutputStream();
        long time = System.currentTimeMillis();
        output.write(("HTTP/1.1 200 OK\n\nWorkerRunnable: " +
                this.serverText + " - " +
                time +
                "").getBytes());
        output.close();
        input.close();
        System.out.println("Request processed: " + time);
    } catch (IOException e) {
        //report exception somewhere.
        e.printStackTrace();
    }
  }
 } 
```

**多线程服务器.java**

```
package servers;

import java.net.ServerSocket;
import java.net.Socket;
import java.io.IOException;

public class MultiThreadedServer implements Runnable{

protected int          serverPort   = 8080;
protected ServerSocket serverSocket = null;
protected boolean      isStopped    = false;
protected Thread       runningThread= null;

public MultiThreadedServer(int port){
    this.serverPort = port;
}

public void run(){
    synchronized(this){
        this.runningThread = Thread.currentThread();
    }
    openServerSocket();
    while(! isStopped()){
        Socket clientSocket = null;
        try {
            clientSocket = this.serverSocket.accept();
        } catch (IOException e) {
            if(isStopped()) {
                System.out.println("Server Stopped.") ;
                return;
            }
            throw new RuntimeException(
                "Error accepting client connection", e);
        }
        new Thread(
            new WorkerRunnable(
                clientSocket, "Multithreaded Server")
        ).start();
    }
    System.out.println("Server Stopped.") ;
}

private synchronized boolean isStopped() {
    return this.isStopped;
}

public synchronized void stop(){
    this.isStopped = true;
    try {
        this.serverSocket.close();
    } catch (IOException e) {
        throw new RuntimeException("Error closing server", e);
    }
}

private void openServerSocket() {
    try {
        this.serverSocket = new ServerSocket(this.serverPort);
    } catch (IOException e) {
        throw new RuntimeException("Cannot open port 8080", e);
    }
}

} 
```

**调度.java**

```
 package servers;

 public class Dispatch {

/**
 * @param args
 */
public static void main(String[] args) {
    MultiThreadedServer server = new MultiThreadedServer(9000);
    new Thread(server).start();

    try {
        Thread.sleep(20 * 1000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    System.out.println("Stopping Server");
    server.stop();

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:38:13.633

到目前为止你做得很好。

一次从 InputStream 中读取数据（BufferedReader 可能会有所帮助）。阅读并学习 HTTP 协议（​​请参阅此处的请求消息部分：[http](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol) ://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol ）。

客户端发送的第一行将遵循该格式：`GET /foo.html?x=y&a=b HTTP/1.1`后跟 \n\n 即方法、URL（带有查询参数）和协议。拆分该行（在空格上...），然后根据规范分解 URL。

您需要的一切都可以在用于解析数据的 String 类中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:10:26.063

您忘记阅读客户发送的内容。在 http 中，客户端打开连接，然后发送请求并等待服务器回复。

要阅读请求，您有两个选择。使用 BufferedReader 或逐字节读取。BufferedReader 更容易。您为每一行获得一个字符串，并且可以轻松地将其拆分或替换字符或其他任何内容；）

读取每个字节的速度要快一些，但只有在您需要每秒处理大量请求时才有意义。比这真的可以有所作为。我只是把这些信息告诉你；）

我已经在您的 WorkerRunnable.java 中包含了阅读所需的部分。这会读取并打印出整个客户端请求。

启动服务器，打开浏览器并输入：[http://127.0.0.1:9000/hello?one=1&two=2&three=3](http://127.0.0.1:9000/hello?one=1&two=2&three=3) 控制台上的第一行将显示：**GET /hello?one=1&two=2&three=3 HTTP /1.1**

在关闭 OutputStream 之前，请务必调用 flush() 方法。这将强制写出任何缓冲的字节。如果您不这样做，则可能会丢失一些字节/字符，并且您可能会花费很长时间来寻找错误。

```
try {
    InputStream input  = clientSocket.getInputStream();

    // Reading line by line with a BufferedReader
    java.io.BufferedReader in = new java.io.BufferedReader(
        new java.io.InputStreamReader(input));
    String line;
    while ( !(line=in.readLine()).equals("") ){
        System.out.println(line);
    }

    OutputStream output = clientSocket.getOutputStream();
    long time = System.currentTimeMillis();
    output.write(("HTTP/1.1 200 OK\n\nWorkerRunnable: " +
            this.serverText + " - " +
            time +
            "").getBytes());
    output.flush();
    //Flushes this output stream and forces any buffered output bytes to be written out.
    output.close();
    input.close();
    System.out.println("Request processed: " + time); 
```

我不知道你在那里做什么。您刚刚告诉我们您需要解析 URL，但也许更好的方法是使用 simpleframework (http://www.simpleframework.org) 它就像一个嵌入式 HTTP-Server，您可以查看教程。它将为您提供一个请求对象，您可以从那里轻松获取 url 中的参数。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-04T02:05:46.667

从技术上讲，你可以，但它会让你自己实现 http 协议。

更好的选择是使用 Oracle 的 Java Http Server。有关提示，请参阅以下文章[http://alistairisrael.wordpress.com/2009/09/02/functional-http-testing-with-sun-java-6-httpserver/](http://alistairisrael.wordpress.com/2009/09/02/functional-http-testing-with-sun-java-6-httpserver/)