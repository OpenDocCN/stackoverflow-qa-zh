# StackOverflow 问答 10794000-10794999

# java - 如何在 Eclipse RCP 应用程序 (SWT) 中绑定组合的 selectionIndex 和 Integer？

> ID：10794003
> 
> 赞同：3
> 
> 时间：2012-05-29T06:19:09.290
> 
> 标签：java, eclipse, data-binding, jface, rcp

对于绑定字符串和组合，我可以使用以下代码：

```
IObservableValue comboTypeObserveTextObserveWidget = SWTObservables.observeText(comboType);
IObservableValue typeObserveValue = PojoObservables.observeValue(router.getParameters(), "type.data");
bindingContext.bindValue(comboTypeObserveTextObserveWidget, typeObserveValue, updateStrategy, null); 
```

其中“type.data”是字符串。

但我想将组合的 selectionIndex 与整数值绑定。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T09:16:17.007

您可以`org.eclipse.jface.databinding.swt.SWTObservables.observeSingleSelectionIndex(Control)`用于此目的...

```
package test123;

import java.beans.PropertyChangeListener;

import org.eclipse.core.databinding.AggregateValidationStatus;
import org.eclipse.core.databinding.DataBindingContext;
import org.eclipse.core.databinding.UpdateValueStrategy;
import org.eclipse.core.databinding.beans.BeansObservables;
import org.eclipse.core.databinding.observable.Realm;
import org.eclipse.core.databinding.observable.value.IObservableValue;
import org.eclipse.core.databinding.validation.IValidator;
import org.eclipse.core.databinding.validation.ValidationStatus;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.jface.databinding.swt.ISWTObservableValue;
import org.eclipse.jface.databinding.swt.SWTObservables;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.DisposeEvent;
import org.eclipse.swt.events.DisposeListener;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Combo;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;

public class Test123 extends Shell {

    private static class Pojo<T> {
        private T data;

        public T getData() {
            return data;
        }

        public void setData(T data) {
            this.data = data;
        }

        public void addPropertyChangeListener(PropertyChangeListener l) {
        }

        public void removePropertyChangeListener(PropertyChangeListener l) {
        }
    }

    /**
     * Launch the application.
     * 
     * @param args
     */
    public static void main(String args[]) {
        try {
            final Display display = Display.getDefault();
            Realm.runWithDefault(SWTObservables.getRealm(display),
                    new Runnable() {

                        @Override
                        public void run() {
                            Test123 shell = new Test123(display);
                            shell.open();
                            shell.layout();
                            while (!shell.isDisposed()) {
                                if (!display.readAndDispatch()) {
                                    display.sleep();
                                }
                            }

                        }
                    });

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the shell.
     * 
     * @param display
     */
    public Test123(Display display) {
        super(display, SWT.SHELL_TRIM);
        setLayout(new GridLayout(1, false));

        Combo combo = new Combo(this, SWT.READ_ONLY);
        combo.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1,
                1));
        combo.setItems(new String[] { "Test 1", "Test 2", "Test 3" });
        createContents();
        final Pojo<Integer> pojo = new Pojo<Integer>();
        ISWTObservableValue swtObs = SWTObservables
                .observeSingleSelectionIndex(combo);

        Label lblNewLabel = new Label(this, SWT.NONE);
        lblNewLabel.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, false,
                false, 1, 1));
        IObservableValue modelObs = BeansObservables.observeValue(pojo, "data");
        final DataBindingContext dataBindingContext = new DataBindingContext();
        dataBindingContext.bindValue(swtObs, modelObs, new UpdateValueStrategy(
                UpdateValueStrategy.POLICY_CONVERT)
                .setAfterConvertValidator(new IValidator() {
                    @Override
                    public IStatus validate(Object value) {
                        if ((Integer) value == 1) {
                            return ValidationStatus
                                    .error("Test 2 is not allowed");
                        }
                        return ValidationStatus.ok();
                    }
                }), null);
        addDisposeListener(new DisposeListener() {
            @Override
            public void widgetDisposed(DisposeEvent e) {
                // this is neccessary since POLICY_CONVERT does not
                // automatically set the value to the model.
                dataBindingContext.updateModels();
                System.out.println(pojo.getData());
            }
        });
        ISWTObservableValue valiObs = SWTObservables.observeText(lblNewLabel);
        dataBindingContext.bindValue(valiObs, new AggregateValidationStatus(
                dataBindingContext.getBindings(),
                AggregateValidationStatus.MAX_SEVERITY));

    }

    /**
     * Create contents of the shell.
     */
    protected void createContents() {
        setText("SWT Application");
        setSize(450, 300);

    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }
} 
```

# java - 自动创建junit

> ID：10794008
> 
> 赞同：8
> 
> 时间：2012-05-29T06:19:20.343
> 
> 标签：java, jboss, junit

有什么方法我不需要编写 junit 测试用例，它会自动生成。

实际上我有一个经过全面测试但没有为它编写的junit的应用程序。所以我确信它是完整的并且没有太多错误。但我的客户想要一份同样的代码覆盖率报告。

有没有可以自动生成测试用例的工具。

我正在使用 java、jboss 门户。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T06:51:13.773

为了写作或覆盖而编写单元测试是一个坏主意。应该编写单元测试来实际测试您的代码。在您的情况下，您可以先开始为更重要的类编写测试，然后逐渐增加代码覆盖率。您甚至可能会在此过程中发现一些真正的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-18T10:24:27.363

Randoop 是你需要的框架[https://randoop.github.io](https://randoop.github.io)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T06:23:19.353

检查谷歌的 CodePro Analytix。它甚至可以选择使用模拟生成测试用例。还有一个eclipse插件。 [http://code.google.com/javadevtools/codepro/doc/features/junit/test_case_generation.html](http://code.google.com/javadevtools/codepro/doc/features/junit/test_case_generation.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-14T15:24:05.707

对于数学公式，请尝试[https://github.com/junit-team/junit/wiki/Theories](https://github.com/junit-team/junit/wiki/Theories)

以及生成测试的工具示例： [https://developers.google.com/java-dev-tools/codepro/doc/features/junit/test_case_generation](https://developers.google.com/java-dev-tools/codepro/doc/features/junit/test_case_generation) [http://sourceforge.net/projects/junitgenerator/](http://sourceforge.net/projects/junitgenerator/)

*   Eclipse [https://wiki.openmrs.org/display/docs/Generate+Test+Case+Plugin](https://wiki.openmrs.org/display/docs/Generate+Test+Case+Plugin)
*   IntelliJ [http://plugins.jetbrains.com/plugin/5847?pr=idea](http://plugins.jetbrains.com/plugin/5847?pr=idea)

也许将 Cucumber 和 Datatable 输入用于不同的场景 [http://jeannotsweblog.blogspot.com/2013/02/cucumber-4-advanced-gherkin.html](http://jeannotsweblog.blogspot.com/2013/02/cucumber-4-advanced-gherkin.html)

我正在考虑尝试 Json 输入 [http://collectiveidea.com/blog/archives/2011/07/12/test-your-api-with-cucumber-and-json_spec/](http://collectiveidea.com/blog/archives/2011/07/12/test-your-api-with-cucumber-and-json_spec/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T11:33:12.507

我同意生成测试绝对不是要走的路，但可能是编写真正测试的起点。小心：CodePro 有时会生成非常愚蠢的测试！但是当您说您的代码已经过全面测试时，我假设您已经编写了某种主要方法来完成所有测试工作。为这些基于主方法的测试生成测试报告类似于 JUnit 测试覆盖率报告。例如，通过使用 cobertura，您首先检测已编译的类，启动您的 test-main 方法并使用“sonar”检查生成的覆盖报告文件。

如果您手动测试应用程序用例的用例，同样应该工作。但在这种情况下，我强烈建议至少使用 selenium 等工具自动化这些测试。

# javascript - jquery Supersize显示IE错误

> ID：10794009
> 
> 赞同：1
> 
> 时间：2012-05-29T06:19:21.660
> 
> 标签：javascript, jquery, wordpress, supersized

我正在尝试将[超大型 Jquery](http://buildinternet.com/project/supersized/)集成到 Wordpress 中。

我知道那里有一个 WP 插件，但我更喜欢手动执行此操作，因为我正在为幻灯片使用自定义标题、自定义模板和 wp-ecommerce 产品帖子（很难与插件集成）

一切都很好，除了由于最后的幻灯片逗号没有被删除而在 IE 中出现错误。

IE 错误是：消息：'base.options.slides[...].thumb' is null or not an object

====================

编辑：我更新了下面的代码以反映 Naor 的答案 - 他的建议非常有效（感谢 Naor ！！）

```
<!--
Supersized 3.2.7 - Fullscreen Background jQuery Plugin
www.buildinternet.com/project/supersized

By Sam Dunn / One Mighty Roar (www.onemightyroar.com)
Released under MIT License / GPL License

    Adapted for Wordpress (WP Supersized 3.0.2) by Benoit De Boeck / World in my Eyes (www.worldinmyeyes.be)
-->    
    <script type="text/javascript"> 

var slides=[];

<?php $my_query = new WP_Query
( array(
        'post_status' => 'publish',
        'post_type'   => 'wpsc-product',
  //'numberposts' => 5,
        'orderby'     => 'title',
    'order'       => 'ASC',
        // 'wpsc_product_category'=>'phones, laptops', // leave this out if you want to show all, or comma separate to specify categories
    'showposts'   => 50 )); 

while( $my_query->have_posts() ) : $my_query->the_post();  ?>

slides.push({image : '<?php echo wpsc_the_product_image(); ?>', title : '<div class="slidecaptioninside"><a href="<?php echo wpsc_the_product_permalink(); ?>"><?php echo wpsc_the_product_title(); ?></a> <br /><div class="slidedescription"><?php $excerpt = wpsc_the_product_description(); echo string_limit_words($excerpt,5)."...";?>  <br />Priced from- <?php echo wpsc_the_product_price(); ?> - <a href="<?php echo wpsc_the_product_permalink(); ?>">find out more</a></div>', url : '<?php echo wpsc_the_product_permalink(); ?>'});

<?php endwhile; ?>

jQuery(document).ready(function($) {
            $.supersized({

                //Functionality
                slideshow               :   1,      //Slideshow on/off
                autoplay                :   1,      //Slideshow starts playing automatically
                start_slide             :   1,      //Start slide (0 is random)
                slide_interval          :   6000,   //Length between transitions
                random                  :   0,
                transition              :   1,      //0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                transition_speed        :   800,    //Speed of transition
                new_window              :   1,      //Image links open in new window/tab
                pause_hover             :   0,      //Pause slideshow on hover
                keyboard_nav            :   1,      //Keyboard navigation on/off
                performance             :   1,      //0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
                image_protect           :   1,      //Disables image dragging and right click with Javascript
                image_path              :   '<?php bloginfo('template_url'); ?>/supersized/img/', //Default image path

                //Size & Position
                min_width               :   0,      //Min width allowed (in pixels)
                min_height              :   0,      //Min height allowed (in pixels)
                vertical_center         :   1,      //Vertically center background
                horizontal_center       :   1,      //Horizontally center background
                fit_portrait            :   1,      //Portrait images will not exceed browser height
                fit_landscape           :   0,      //Landscape images will not exceed browser width

                //Components
                //navigation              :   1,        //Slideshow controls on/off
                thumbnail_navigation    :   1,      //Thumbnail navigation
                thumb_links             :    1,
                slide_counter           :   1,      //Display slide numbers
                slide_captions          :   1,      //Slide caption (Pull from "title" in slides array)
                slides                  :   slides,

                slide_links     : 'blank',
                progress_bar    : 1,                        
                mouse_scrub     : 1                                             
            }); 
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:37:56.803

我不熟悉 php，但您可以在超大初始化之前准备幻灯片数组，如下所示：

```
var slides=[];

<?php while( $my_query->have_posts() ) : $my_query->the_post();  ?>

slides.push({image : '<?php echo wpsc_the_product_image(); ?>', title : '<div class="slidecaptioninside"><a href="<?php echo wpsc_the_product_permalink(); ?>"><?php echo wpsc_the_product_title(); ?></a> <br /><div class="slidedescription"><?php $excerpt = wpsc_the_product_description(); echo string_limit_words($excerpt,5)."...";?>  <br />Priced from- <?php echo wpsc_the_product_price(); ?> - <a href="<?php echo wpsc_the_product_permalink(); ?>">find out more</a></div>', url : '<?php echo wpsc_the_product_permalink(); ?>'});

<?php endwhile; ?> 
```

然后初始化超大：

```
 $.supersized({
                 ....
                 ....
                 ....
                 slides: slides,
                 ....
                 ....
    }); 
```

希望这会有所帮助。

祝你好运！

# mysql - 这个简单的 CREATE TABLE 有什么问题？

> ID：10794017
> 
> 赞同：-3
> 
> 时间：2012-05-29T06:19:52.413
> 
> 标签：mysql

这个查询有什么问题？MySQL 不再喜欢 longblob 了？？

```
mysql> CREATE TABLE WGS(1 longblob);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1 longblob)' at line 1 
```

编辑：我更改了一封信的列，它也不起作用。Mysql 似乎只允许列名至少包含 3 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:20:58.980

-- 编辑我原来的答案，这是完全错误的，对此感到抱歉 --

`MySQL`如果它只是数字，则要求您引用您的表格列：

[http://dev.mysql.com/doc/refman/5.0/en/identifiers.html](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

> 标识符可以以数字开头，但除非引用，否则可能不仅仅由数字组成

我建议更改命名，但每次都引用您的标识符非常烦人

```
`1` longblob 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:22:41.297

```
CREATE TABLE `test`.`WGS` (
`1` LONGBLOB NOT NULL
) ENGINE = InnoDB; 
```

这是正确的语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T06:23:08.187

试试这个它应该工作：

```
 CREATE TABLE WGS(`1` LONGBLOB); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T06:22:04.817

`CREATE TABLE "table_name" ("column_name" "data_type_for_column_name")`相反，您有`1`column_name。它必须是字母数字，并以字母作为第一个符号。

# android - 强制 Listview 中的最小行数

> ID：10794024
> 
> 赞同：0
> 
> 时间：2012-05-29T06:20:47.303
> 
> 标签：android, listview, android-listview

我希望强制我的 Listview 显示最少的行数。

换句话说，如果数据中只有 3 行，我仍然想在屏幕上显示 8 行。我将确保在 getView 中为空行返回正确的数据。

我尝试覆盖 getCount()

```
 @Override
    public int getCount() {
    return Math.min(NUM_OF_ITEMS_DISPLAYED,SearchableListScreen.this._results.size());
} 
```

但是当我将“日志”条目放入我的 getView 时，我发现它只被调用用于最初存在于我的数据中的行，而现在用于额外的行。除了向我的数据实际添加虚拟行之外，还有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:35:02.277

`List`始终在您的或`Array`用于填充的条目中至少有 8 个条目`ListView`。这样，您将至少有 8 行。

# java - 在jsp中添加一个后退按钮

> ID：10794027
> 
> 赞同：1
> 
> 时间：2012-05-29T06:21:02.903
> 
> 标签：java, javascript, jsp, servlets, back-button

我有`3 jsp pages(index.jsp, result1.jsp,result2.jsp)`一个`servlet`。处理如下：

索引.jsp

```
<form method="post" action="MYSERVLET" >
<input type="text" name="studentname" id="studentname"/>
<input type="submit" value="click" />// goes to a servlet named as MYSERVLET
</form> 
```

MYSERVLET

```
 String t=request.getParameter("studentname");
------fetching data from database and sending to result1.jsp------

      String nextJSP = "/result1.jsp";
      RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(nextJSP);
      dispatcher.forward(request,response); 
```

结果1.jsp

// 从 servlet 中检索数据并在其中显示数据`result1.jsp`并将相同的值传递给`result2.jsp`

```
out.println(retrieved result from servlet);
<a  href="result2.jsp?somestring=<%out.println(retrieved result from servlet);%>"> <%out.println(retrieved result from servlet);%></a>// after clicking on "retrieved result from servlet" i am passing this retrieved value to another jsp result2.jsp and also retrieving some data from database as follows: 
```

结果2.jsp

```
String w=request.getParameter("somestring");
out.println(w); 
```

我想给出一个`back button here (in result2.jsp)`，以便在单击`back button`后将我带到`result1.jsp`可以看到以前显示的数据的位置`(out.println(retrieved result from servlet);)`。但是，当我单击浏览器后退按钮（在 result2.jsp 中）时，每次警报即将到来`"Confirm Form Resubmission"` ，然后我重新加载该页面以查看`(out.println(retrieved result from servlet);)`，我想避免此警报，我该如何避免呢？我怎样才能在没有任何警报的情况下直接看到该页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:57:34.737

我认为您的问题在于您在 servlet 中放置的“转发”操作。“转发”只发生在服务器上，浏览器不知道服务器上发生了什么。事实上，即使您在 result1 页面上，您也应该在 url 栏中看到“MYSERVLET Url”。因此，当您继续使用 result2.jsp 时，单击“返回”只会再次将您带到 Servlet url，而不是“result1.jsp”。由于您的 servlet 是表单提交的目标，因此您会收到该警报。

为避免这种情况，您应该在 servlet 中尝试“redirect”或“sendRedirect”而不是“forward”。在这种情况下，您的浏览器将知道地址的更改，您也可以使用后退按钮。

但是请注意，通过重定向，您发送到 servlet 的所有请求数据都不能直接传递给 result1.jsp，您应该将它们保存在 Session 中。试试看[这个](http://www.javapractices.com/topic/TopicAction.do?Id=181)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:40:38.207

请通过使用将会话中的所有数据保留在第一页本身，`session.setAttribute("name",value);`并在登陆到第二页后，单击按钮指定没有任何数据的第一页的地址并在第一页显示之前的数据，使用`session.getAttribute("name");` 这样每次你在页面之间切换，它将重新加载页面并获取会话值。

# java - 捕获大量 JTextField 的文本变化

> ID：10794029
> 
> 赞同：1
> 
> 时间：2012-05-29T06:21:08.933
> 
> 标签：java, swing

我正在开发一个摇摆应用程序，并决定什么是保存大量 JTextField 值的最佳方法。应用程序从某个网络位置读取属性文件。属性文件为每个特定用户提供大约 10-12 个属性，例如 propertyA_1 是用户 1 的属性，propertA_2 是用户 2 的属性。一个属性中将有大约 10-12 个用户，因此它将产生大约 80 个 JTextField 来显示值。每个用户的属性都将显示在 JTabbedPane 上。我现在要做的是，当用户更改每个 JTabbedPane 中显示的任何用户的任何 JTextField 的值并单击“保存”按钮时，应该保存该属性的值。告诉我处理大量 JtextField 的最佳方法是什么。我想有两种方法

1.  单击“保存”按钮时，通过从所有 JTextField 获取值来保存属性的每个值。
2.  某种方法可以仅获取更改了文本的那些 JTextField 并保存它们的值。

我不确定如何通过选项 2 来做这件事。但我认为这是最好的方法。

这是我的代码：

```
public class IOSAutomationTool1 implements ActionListener {

       JButton saveButton  = new JButton("Click to Save");

    /**
     * @param args the command line arguments
     */

    public  void Test() throws IOException {

         File file = new File("C:\\Documents and Settings\\test\\Desktop\\test.properties");

         if( file != null ){

             Properties property = new Properties();

             property.load(new FileInputStream(file));

              JFrame frame = new JFrame("IOSAutomationToolFourthPage");
              frame.setLayout(new FlowLayout());
              JPanel framePanel = new JPanel();
              JPanel buttonPanel = new JPanel();
              framePanel.setSize(700,700);
               frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
              String numberOfClients = property.getProperty("numberOfClients");
              System.out.println("number of clients: "+numberOfClients);

                saveButton.addActionListener(this);
                buttonPanel.add(saveButton);
              if (!numberOfClients.isEmpty()) {

                   int numberOfClientNumb = Integer.parseInt(numberOfClients);

                      System.out.println("numberOfClientNumb ::" + numberOfClientNumb);

                       JTabbedPane tab = new JTabbedPane();

                      // JTabbedPane tab2 = new JTabbedPane();
                    for( int i=1; i<=numberOfClientNumb; i++){

                       JPanel panel = new JPanel();
                      panel.setSize(400, 400);
                      panel.setLayout(new GridBagLayout());
                      GridBagConstraints gbc = new GridBagConstraints();
                       gbc.insets = new Insets(1, 1, 1, 1);

                        gbc.fill = GridBagConstraints.BOTH;
                        gbc.weightx = 0;
                        gbc.gridx = 0;

                      //Remote IP 
                      JLabel remoteIPLbl = new JLabel("Remote IP : ");
                      panel.add(remoteIPLbl,gbc);
                      JLabel userNameLbl = new JLabel("User Name : ");
                      panel.add(userNameLbl,gbc);
                      JLabel remotePasswordLbl = new JLabel("Remote Password : ");
                      panel.add(remotePasswordLbl,gbc);
                      JLabel remotePathLbl = new JLabel("Remote Path : ");
                      panel.add(remotePathLbl,gbc);
                      JLabel deviceOrSimulatorLbl = new JLabel("Device or Simulator : ");
                      panel.add(deviceOrSimulatorLbl,gbc);

                      gbc.gridx = 1;
                      gbc.weightx = 1;

                      String remoteIPVal = property.getProperty("remoteIP_"+i);
                      JTextField remoteIPField = new JTextField(remoteIPVal);
                      //remoteIPLbl.setBounds(50, 100, 2, 2);
                     remoteIPField.setBounds(200, 100, 2, 2);
                      remoteIPField.setColumns(30);
                      panel.add(remoteIPField,gbc);    

                      //Remote User Name

                      String userNameVal = property.getProperty("remoteUserName_"+i);
                      JTextField userNameField = new JTextField(userNameVal);
                     // userNameLbl.setBounds(50, 200, 2, 2);
                      userNameField.setBounds(200, 200, 2, 2);
                      userNameField.setColumns(20);
                      panel.add(userNameField,gbc);   

                      //Remote Password

                      String remotePasswordVal = property.getProperty("remotePassword_"+i);
                      JTextField remotePasswordField = new JTextField(remotePasswordVal);
                     // remotePasswordLbl.setBounds(50, 300, 2, 2);
                      remotePasswordField.setBounds(200, 300, 2, 2);
                      remotePasswordField.setColumns(20);
                      panel.add(remotePasswordField,gbc); 

                      //Remote Path

                      String remotePathVal = property.getProperty("remotePath_"+i);
                      JTextField remotePathField = new JTextField(remotePathVal);
                     // remotePathLbl.setBounds(50, 400, 2, 2);
                     remotePathField.setBounds(200, 400, 2, 2);
                      remotePathField.setColumns(100);
                      panel.add(remotePathField,gbc); 

                      //deviceOrSimulator

                      String deviceOrSimulatorVal = property.getProperty("deviceOrSimulator_"+i);
                      JTextField deviceOrSimulatorField = new JTextField(deviceOrSimulatorVal);
                      //deviceOrSimulatorLbl.setBounds(50, 500, 2, 2);
                      deviceOrSimulatorField.setBounds(200, 500, 2, 2);
                      deviceOrSimulatorField.setColumns(1);
                      panel.add(deviceOrSimulatorField,gbc); 

                      tab.add("Client "+i,panel);
                      System.out.println(""+i);                     
                   }

                    framePanel.add(tab);

                    frame.add(framePanel);

                   // frame.setLayout(new Lay);
              }
               //frame.add(saveButton);
               frame.add(buttonPanel);
              frame.setSize(800, 800);
              frame.pack();
              frame.setVisible(true);

         }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        //throw new UnsupportedOperationException("Not supported yet.");

        if(e.getSource() == saveButton){
            System.out.print("button clicked...........");
        }
    }

    public static void main(String[] args) throws IOException{

        IOSAutomationTool1 obj = new IOSAutomationTool1();
        obj.Test();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:03:56.040

为了详细说明@nlcE cOw 的建议，你可以做的是这样的：

1) 使您的财产最终确定：

```
 final Properties property = new Properties(); 
```

2）在你的for循环之前，创建一个`DocumentListener`：

```
 DocumentListener listener = new DocumentListener() {

        private void updatePropertyForEvent(final Properties property, DocumentEvent e) {
            Document document = e.getDocument();
            Object value = document.getProperty("key");
            if (value !=null)
                try {
                    property.setProperty((String) value, document.getText(0, document.getLength()));
                } catch (BadLocationException e1) {
                    // Should not happpen
                    e1.printStackTrace();
                }
        }

        @Override
        public void removeUpdate(DocumentEvent e) {
            updatePropertyForEvent(property, e);
        }

        @Override
        public void insertUpdate(DocumentEvent e) {
            updatePropertyForEvent(property, e);                
        }

        @Override
        public void changedUpdate(DocumentEvent e) {
            updatePropertyForEvent(property, e);                
        }
    }; 
```

3) 对于您创建的每个文本字段，您在关联文档上放置一个属性，该属性将存储它所代表的属性，并将侦听器添加为 DocumentListener：

```
String remotePasswordVal = property.getProperty("remotePassword_"+i);
JTextField remotePasswordField = new JTextField(remotePasswordVal);
remotePasswordField.getDocument().putProperty("key", "remotePassword_"+i);
remotePasswordField.getDocument().addDocumentListener(listener); 
```

4) 当您按下“保存”时，您只需保存`property`到 outputStream。

这是快速而肮脏的解决方案。更简洁的选择是使用适当的 MVC 模式。

# android - 以编程方式将图像添加到图库中的网格项目

> ID：10794033
> 
> 赞同：0
> 
> 时间：2012-05-29T06:21:51.743
> 
> 标签：android, gridview, gallery

我有一个 2x5 的网格。网格中的每个元素都包含一个图像。当我长按图像时，我应该被带到画廊，在那里我可以在那里选择一张图片并将其分配给这个网格项目。这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:43:20.223

我认为您可以使用网格视图并将其与 View pager 结合使用。这是一个如何做到这一点的例子。

```
 public class GridGallery extends BaseAdapter {

    Context context;

    public GridGallery(Context context) {
        this.context = context;
    }

    @Override
    public int getCount() {
        return numberOfImages;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        final ImageView view;

        if(convertView == null) {

            view = new ImageView(context);

            view.setScaleType(ImageView.ScaleType.FIT_CENTER);
            view.setLayoutParams(new GridView.LayoutParams(screenWidth/4, screenHeight/4));
            view.setAdjustViewBounds(false);
            view.setPadding(2, 2, 2, 2);

            view.setOnLongClickListener(new View.OnLongClickListener() {

                @Override
                public boolean onLongClick(View v) {
                    // You can set your View Pager adapter here
                    //
                    return false;
                }
            });

        if(view!=null) {
            // Here you can download your images from internet. 
            thumbnailLoader.DisplayImage(urlList.get(position), view);
            notifyDataSetChanged();  //Calling this helped to solve the problem.

            view.setTag(position);
        }

        return view;
    }       
} 
```

# iphone - 当使用逗号而不是小数点时，我的 iOS 应用程序会计算数字吗？

> ID：10794036
> 
> 赞同：4
> 
> 时间：2012-05-29T06:22:03.740
> 
> 标签：iphone, ios, numbers, decimal, comma

iOS 开发新手，我只是为初学者制作一个小工资类型的计算器。我正在探索不同的功能，包括在法国和其他非英语母国提供该应用程序。

但是，由于我的应用程序严重依赖计算其中包含小数点的数字，我想知道如果使用逗号作为小数点，iOS 是否会计算该数字，因为像法国这样的国家使用这种表示法：

澳大利亚/美国/其他国家：

```
12.5 * 15.8 = 197.5 
```

法国/其他国家：

```
12,5 * 15,8 = 197,5 
```

我几乎在问a）如果插入逗号而不是小数点，它是否仍会在本地设备上计算，并且b）如果没有，我应该在我的应用程序中包含什么代码以便它可以计算这个符号？（请注意，我不是要求逗号作为分隔符，而是相当于小数点。）

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:27:17.667

实际上，iOS 内置了一个方便的类来处理数值的本地化。它被称为[NSNumberFormatter](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)并且它特别具有[-setDecimalSeparator:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumberFormatter/setDecimalSeparator%3a)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:51:52.830

在使用该图之前，您应该通过将其转换为 NSNumber 来“规范化”它。就是这样：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];    
NSNumber *myNumber = [formatter numberFromString:@"197.5"]; 
```

这是正确的做法，使用这种方法会考虑到区域偏好、逗号分隔符等。

此时，myNumber 可以用作小数、浮点数、整数等。

```
float myFloat = [myNumber floatValue]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:46:16.967

> 当使用逗号而不是小数点时，我的 iOS 应用程序会计算数字吗？

**是的。**只要您使用`NSNumberFormatter`.

> 我想知道如果使用逗号作为小数点，iOS 是否会计算该数字，因为像法国这样的国家使用这种表示法......

有关如何格式化数字和日期等信息由`NSLocale`班级管理。`NSNumberFormatter`使用当前语言环境来确定如何解释和显示数字，因此当您使用该`-numberFromString:`方法时，格式化程序将使用适当的小数分隔符。使用 . 生成数字的字符串表示时也是如此`-stringFromNumber:`。

出于您的目的，您可能不必担心语言环境。只需使用数字格式化程序来解释输入并生成输出，格式化程序将使用适合用户的语言环境。但是，如果您希望您的应用程序提供本地化为用户语言或地区的信息，您可以使用该[`-setLocale:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumberFormatter/setLocale%3a)方法设置数字格式化程序以使用特定的语言环境。

# php - 加密 MongoDB 文档中的元素

> ID：10794038
> 
> 赞同：1
> 
> 时间：2012-05-29T06:22:07.207
> 
> 标签：php, mongodb, encryption

> **可能重复：**
> [MongoDB 数据库加密](https://stackoverflow.com/questions/8803332/mongodb-database-encryption)

我将敏感数据（服务器详细信息）存储到`MongoDB`and`MySQL`中，幸好使用 MySQL在列查询级别存储数据时我可以简单地使用`AES_ENCRYPT()`and 。`AES_DECRYPT()`如何使用 MongoDB 复制此功能？

目前我没有看到加密/解密文档的本地方式。我必须在应用程序级别进行加密/解密吗？假设我使用的是 PHP 并且有类似的东西，这看起来会如何：

```
Array
(
  [servers] => Array
    (
        [0] => stdClass Object
            (
                [id] => srv_MvffqtLdit4fad9bdecba8dwuDUy
                [label] => WEB1
                [address] => web1.domain.com
                [ssh_username] => root
                [ssh_port] => 3050
                [added] => 2012-05-11 16:08:14
                [modified] => 2012-05-11 16:08:14
            )
        [1] => stdClass Object
            (
                [id] => srv_Omkb8x2gOF4fbd8e86aceffaKHnA
                [label] => WEB2
                [address] => web2.domain.com
                [ssh_username] => root
                [ssh_port] => 3050
                [added] => 2012-05-23 18:27:34
                [modified] => 2012-05-23 18:27:34
            )

    )
) 
```

我希望加密的数据密钥只有`address, ssh_username, ssh_port`.

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:35:53.153

MongoDB 相关数据的加密完全取决于您和您的应用程序。MongoDB 无法以任何方式帮助您。

[MongoDB数据库加密](https://stackoverflow.com/questions/8803332/mongodb-database-encryption)

[https://security.stackexchange.com/questions/3026/encrypting-with-mongo](https://security.stackexchange.com/questions/3026/encrypting-with-mongo)

# performance - (InternalError): script too large stack... 在 Firefox 中请求 50000+ 条记录时

> ID：10794041
> 
> 赞同：2
> 
> 时间：2012-05-29T06:22:13.670
> 
> 标签：performance, firefox, smartgwt, listgrid

我正在使用智能 GWT 2.4。

我正在显示一个包含大约 20 列的报告，这些列是字符串、数字和日期类型的组合。当我请求的记录少于 50000 条时，该报告在 Fire Fox 中有效。但是当我请求超过 50000 条记录时，它会引发以下错误并在不显示报告的情况下中断。

(InternalError): script too large stack: vjb([object Object], fileName:......

即使对于 100,00 多条记录，相同的报告在 Chrome 中也能正常工作。我尝试了从 8.0 到 12.0 的各种版本的 Firefox。

您能否建议解决此问题并能够在 Firefox 中显示 100,000 条记录的解决方法。非常感谢任何帮助。

谢谢， 瓦姆西

# javascript - 在 less 中使用 javascript 计算值

> ID：10794043
> 
> 赞同：8
> 
> 时间：2012-05-29T06:22:17.010
> 
> 标签：javascript, css, less

在 LESS 中，我使用以下代码来获取窗口的高度。

```
@winheight:`$(window).height()` 
```

我得到的是一个数字，但是当我在`px`那里添加单元时，

```
height: @winheight px; 
```

它会编译成类似`height: 910 px`.

我也尝试在 javascript 评估后拥有该单元。但我得到了同样的结果。

```
@winheight:`$(window).height()`px
height: @winheight;
...

height:910 px; 
```

我怎样才能到达`height:910px`那里（数字和单位之间没有空格）？

* * *

编辑：

至于前四个结果，它会创建一个`height:"910px"`未正确呈现的字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T21:29:27.190

只需使用[字符串插值](http://lesscss.org/#-string-interpolation)，然后使用以下方法从字符串中[转义](http://lesscss.org/#-escaping)`~`：

```
@winheight:`$(window).height()`;

height: ~"@{winheight}px"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:57:46.060

给出这个代码，看看你得到了什么。

```
@winheight:0px + `$(window).height()' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:58:57.977

取而代之`.css(height)`-`.height()`这将返回值 + 单位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T06:25:24.613

更换空白空间对您有帮助吗？尝试阅读以下答案：[Replaceing spaces with underscores in JavaScript?](https://stackoverflow.com/questions/441018/replacing-spaces-with-underscores-in-javascript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T06:26:19.637

试试这个

```
@winheight:`$(window).height()+"px"`
height: @winheight; 
```

因为**.height()**只返回**无单位的像素值。**
**或者**使用以下

```
@winheight:`$(window).css("height")`
    height: @winheight; 
```

.css("height") 返回一个带有单位的值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T06:26:23.990

那这个呢：

```
@winheight:`$(window).height().toString() + "px"` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-29T06:29:26.657

这可能取决于我不太了解的LESS。

阅读文档这是一种可能性。

```
@winheight:0px + `$(window).height()` 
```

# magento - 如何在 Magento 的 CMS 页面中按类别显示产品？

> ID：10794046
> 
> 赞同：1
> 
> 时间：2012-05-29T06:22:26.407
> 
> 标签：magento, categories, product

我有一页名为“产品”。在此页面中，我需要显示由其相应类别名称分隔的所有项目。结构如下所示

```
category 1

item1   item2

category 2

item1 item2 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T08:02:08.837

```
{{block type="catalog/product_list" category_id="8" template="catalog/product/featured.phtml"}} 
```

在 cms 页面中添加上述代码并在目录/产品中添加 features.phtml 文件并将此代码

```
 <?php $_productCollection=$this->getLoadedProductCollection() ?>
<?php if(!$_productCollection->count()): ?>
<div class="note-msg">
    <?php echo $this->__('There are no products matching the selection. Please provide a category ID.') ?>
</div>
<?php else: ?>

<?php // Grid Mode ?>

  <ul id="featured" class="jcarousel-skin-tango">

<?php $_collectionSize = $_productCollection->count() ?>
    <?php $i=0; foreach ($_productCollection as $_product): ?>
        <?php if($i++%4==0): ?>

                <?php endif ?>

             <li><a class="preview" rel="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(300, 300); ?>" href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>">
                        <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(105, 105); ?>" width="105" height="105" alt="<?php echo $this->htmlEscape($_product->getName()) ?>" />
                    </a> </li>

            <?php if ($i%4==0 && $i!=$_collectionSize): ?>

            <?php endif ?>

    <?php endforeach ?>

</ul>

<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:54:54.007

您可以使用以下方法在 CMS 中加载 phtml：

```
{{block type="catalog/product" template="catalog/product/view/custom.phtml"}} 
```

现在对于你想要展示上述结构的分类，你可以在分类模型中加载它们，并在custom.phtml中获取所有产品

# java - 休眠一对多关系以将数据保存到多个表

> ID：10794050
> 
> 赞同：0
> 
> 时间：2012-05-29T06:22:50.707
> 
> 标签：java, hibernate, entity-relationship

我有以下两个带有 hibernate 的表：一对多关系。

1) 通知

`<class name="Notification" table="notifications" > <id name="id" column="id"><generator class="native"/></id>`

`<set name="Preference" table="preference" cascade="all" inverse="true" lazy="false" fetch="select"> <key> <column name="user_id" not-null="true" /> </key>`

`<one-to-many class="Preference" /> </set> </class>`

* * *

> （注意：在 Notification 类中，我有一个类似的成员
> `Set<Preference> Preference`）

* * *

2) 偏好

`<class name="Preference" table="preference"> <id name="id" column="id"> <generator class="native"/> </id>`

`<property name="userId" column="user_id" />`

`<property name="sectorId" column="sector_id" />`

`<property name="stateId" column="state_id" /> </class>`

我使用过的Hiberante**查询。**

通知通知 = ......; （对象被插入到这个**Notification**对象中）

> getHibernateTemplate().merge(通知);

所以，问题是 Preference 的对象没有保存。但通知的数据已正确保存。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:36:02.137

我已经在自己身上找到了答案。答案是将（一对多）休眠配置中的属性**inverse="true"**更改为**false**。如果我将 inverse 设置为**true**，我必须配置另一个类中的另一个多对一配置。

如果我在上面提出的问题的**invese="true"** ，则要进行更改。

2) 偏好

```
<class name="Preference" table="preference"> <id name="id" column="id"> 
<generator class="native"/> </id>
......
<many-to-one name="notification" class="Notification" fetch="select">
   <column name="id" not-null="true" />
</many-to-one>
</class> 
```

多谢你们！！

# ajax - 使用ajax重新加载页面时如何保持“记住”复选框的选择

> ID：10794052
> 
> 赞同：2
> 
> 时间：2012-05-29T06:22:54.530
> 
> 标签：ajax, jsp

我是ajax的新手。我正在使用 ajax 和 jsp 从数据库中检索数据。当新数据插入数据库时​​，新数据会自动显示在 Jsp 页面中。所以在 ajax 代码中我设置了`Timeout()`. 在针对每个数据行的 jsp 页面中，都有一个复选框。如果我选中复选框，则重新加载页面时复选框会更改。但是我想在重新加载页面时保持复选框不变...

```
<html>
<body onload="Ajax()">

<script type="text/javascript">

function Ajax()
{
    var xmlHttp;

        try
        {   
            xmlHttp=new XMLHttpRequest();// Firefox, Opera 8.0+, Safari
        }
        catch (e)
        {
            try
                {
                xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); //       Internet Explorer
                }
        catch (e)
        {
            try
                {
                xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
        catch (e)
        {
            alert("No AJAX!?");
            return false;
        }
    }
}

    xmlHttp.onreadystatechange=function()
    {
        if(xmlHttp.readyState==4 && xmlHttp.status==200)
        {
                   document.getElementById('ReloadThis').innerHTML=xmlHttp.responseText;
            setTimeout('Ajax()',10000);
        }
    }

    xmlHttp.open("GET","ajaxCalled.jsp",true);
    xmlHttp.send(null);

} 
```

默认文本

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"  import="dbbean.DBBean,java.sql.*" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript">
function checkboxCheck()
{
var checkbox1=document.getElementsById("checkbox0")

if(checkbox1.checked)
    {
    alert(checkbox1);
    checkbox1.checked="true";

    }
else
    {
    alert(checkbox1);
    }
}
</script>
</head>
<body onLoad="checkboxCheck()">

        <table border=1 cellspacing=0 cellpadding=10>
            <tr>
                <th>checkbox</th>

<%
    DBBean db=new DBBean();
    Connection con=null;
    ResultSet rs=null;
    int count=0;
    String checkName="checkbox";
    String checkbox1="";
    try
    {
        con=db.getDBConnection();
        rs=db.execSQL("select * from login_history");
%>                  

                <th>user_id</th>
                <th>ip_address</th>
                <th>login_status</th>
            </tr>

    <%
        while(rs.next())
        {
            checkbox1=checkName+count;
            count++;
            out.println(checkbox1);
        %>

        <tr>
            <td><input type="checkbox" id="<%= checkbox1 %>"  ></td>
            <td><%=rs.getString(1) %></td>
            <td><%=rs.getString(2) %></td>
            <td><%=rs.getString(3) %></td>
        </tr>

<%
    /* out.println(rs.getString(1));
    out.println(rs.getString(2));
    out.println(rs.getString(3));
    out.println("</br></br>");*/    
    }
%>

    </table>
<%
    rs.close();
    con.close();
}
catch(Exception e)
{
    e.printStackTrace();
}
%>

<div id="disp" style="visibility:hidden">
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:04:07.583

如果是这样，我假设您正在使用 servlet；然后将选择值保存在请求集属性上，并在返回页面重新加载时分配它，例如：

```
request.setAttribute("attributeName",attributeValue); 
```

在 Servlet 请求中设置属性并通过表达式语言**EL**直接在 jsp 中或通过**javascript**操作检索它

# authentication - 使用 twisted.web 的基于表单的身份验证

> ID：10794054
> 
> 赞同：1
> 
> 时间：2012-05-29T06:23:08.673
> 
> 标签：authentication, twisted

谁能给我一个简单的例子，说明如何使用twisted.web 实现基于表单的身份验证？我只找到[http://blog.vrplumber.com/index.php?/archives/1640-Adding-user-authentication-to-your-Twisted-web-site-Another-HowTo-for-undocumented-features... .html](http://blog.vrplumber.com/index.php?/archives/1640-Adding-user-authentication-to-your-Twisted-web-site-Another-HowTo-for-undocumented-features....html)似乎很旧。

更新：正如 Jean-Paul 所要求的，我会尝试更具体一点。我正在寻找一个简单的起点，它允许我使用自己的用户数据库来检查凭据。因此，理想情况下，我希望有一些模块或库来处理安全 cookie，存储和检查加盐密码，......可以很容易地集成到 twisted 中。想象一下，您有一个小型 Web 应用程序，您可以在其中注册一个帐户并在之后登录。你会如何用 Twisted 做这样的事情。没有像 AD 这样的花哨的“企业”要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T23:30:31.880

您应该查看 Twisted 文档的[Web 应用程序开发](http://twistedmatrix.com/documents/current/web/howto/web-development.html)部分。此外，如果您还没有，您应该查看一些 Twisted 的[示例代码](http://twistedmatrix.com/documents/current/web/examples/index.html)。

[该线程](https://stackoverflow.com/questions/4840444/which-way-to-go-with-twisted-and-web-programming)也可能对您有所帮助。在 Twisted 之上编写 Web 应用程序时，您似乎可以采取多种方式——线程中提到的两个是[Nevow](https://launchpad.net/nevow)和[Django 。](https://www.djangoproject.com/)Twisted 的文档还提到您可能会使用 Nevow。

# java - 通过 ITextRenderer 在 PDF 中设置分页符

> ID：10794063
> 
> 赞同：4
> 
> 时间：2012-05-29T06:23:48.083
> 
> 标签：java, jsp, itext, html-to-pdf

我通过 ITextRenderer 的帮助制作 PDF

代码是

```
StringBuffer buf = new StringBuffer("content for showing in PDF");

javax.xml.parsers.DocumentBuilder builder = javax.xml.parsers.DocumentBuilderFactory.newInstance().newDocumentBuilder();
org.w3c.dom.Document doc = builder.parse(new java.io.StringBufferInputStream(buf.toString()));
response.setContentType("application/pdf");
response.setHeader("Content-Disposition", "attachment; filename=\"" + (type.equals("0") ? "sales_list" : "lettings_list") + ".pdf\"");

java.io.OutputStream os = response.getOutputStream();

org.xhtmlrenderer.pdf.ITextRenderer renderer = new org.xhtmlrenderer.pdf.ITextRenderer();

renderer.setDocument(doc, null);

renderer.layout();

renderer.createPDF(os);

os.close(); 
```

因此，在内容中，我有几条记录要在 PDF 中显示。

现在我希望这些单独的记录显示在同一页面中，这意味着我不想显示相关内容出现在两个页面上。

如果当前页面没有足够的空间，则整个内容将转移到下一页，而不是分成两页。

# android - WVGA854 和 160dpi 的 AVD 使用了错误的布局

> ID：10794066
> 
> 赞同：1
> 
> 时间：2012-05-29T06:24:09.200
> 
> 标签：android, android-layout, avd, hdpi, mdpi

有两种布局：layout-sw480dp-hdpi 和 layout-sw480dp-mdpi WVGA854 和密度 160dpi 的 AVD

在这个 AVD 上，我的应用程序总是使用 layout-sw480dp-hdpi，而不是 layout-sw480dp-mdpi。我认为应该使用 layout-sw480dp-mdpi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:08:16.343

尝试使用具有所需密度的 480x854 固定分辨率，而不是使用 WVGA854 的内置配置。

WVGA854 的配置意味着它是 hdpi ，所以可能是 AVD 管理器有冲突。

# javascript - 在谷歌地图中设置城市周围的边界

> ID：10794067
> 
> 赞同：2
> 
> 时间：2012-05-29T06:24:12.137
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-styled

我正在寻找一种使用 JavaScript 在 Google 地图 API V3 中围绕特定城市/城镇设置边界的方法

API 中是否支持这种类型的东西？

基本上，我不希望我的用户能够在城市范围内更远地浏览地图，包括乡村地区，而不仅仅是城市范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:47:06.867

可以完成您想要提供给城市/城镇的边界。您只需要绘制指定城市边界坐标的折线或多边形。
访问[Gmap V3 中叠加层的演示和文档](https://developers.google.com/maps/documentation/javascript/overlays)

尝试以下代码来限制用户跨区域平移。

```
 // Bounds for North America
   var strictBounds = new google.maps.LatLngBounds(
     new google.maps.LatLng(28.70, -127.50), 
     new google.maps.LatLng(48.85, -55.90)
   );

   // Listen for the dragend event
   google.maps.event.addListener(map, 'dragend', function() {
     if (strictBounds.contains(map.getCenter())) return;

     // We're out of bounds - Move the map back within the bounds

     var c = map.getCenter(),
         x = c.lng(),
         y = c.lat(),
         maxX = strictBounds.getNorthEast().lng(),
         maxY = strictBounds.getNorthEast().lat(),
         minX = strictBounds.getSouthWest().lng(),
         minY = strictBounds.getSouthWest().lat();

     if (x < minX) x = minX;
     if (x > maxX) x = maxX;
     if (y < minY) y = minY;
     if (y > maxY) y = maxY;

     map.setCenter(new google.maps.LatLng(y, x));
   }); 
```

这将限制用户在北美地区平移

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:38:21.920

您需要获取城市边界的点，然后您可以创建折线。例如，一个想法可能与此类似：

```
limitCoord = [
    new google.maps.LatLng(42.49956716,-7.019005501),
    new google.maps.LatLng(42.49947126,-7.029286373),
    new google.maps.LatLng(42.50904062,-7.049299123),
    new google.maps.LatLng(42.50722622,-7.069103626),
    new google.maps.LatLng(42.50452387,-7.000150672),
    new google.maps.LatLng(42.49348015,-6.983058917),
    new google.maps.LatLng(42.49843269,-6.971666546),
    new google.maps.LatLng(42.51765791,-6.956909023),
    new google.maps.LatLng(42.52010069,-6.927429186),
    new google.maps.LatLng(42.50992238,-6.914231493),
    new google.maps.LatLng(42.50096695,-6.879679821),
    new google.maps.LatLng(42.48775868,-6.857775832),
    new google.maps.LatLng(43.23907504,-3.293216584)], "#000000", 5);

var boundries = new google.maps.Polyline({
    path: limitCoord,
    strokeColor: "#000000",
    strokeOpacity: 1.0,
    strokeWeight: 2
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T06:40:18.720

1.  使用`map.fitBounds()`或`map.setCenter()`使城市/国家/地区在地图上居中。
2.  使用`draggable: false`选项禁用平移。

# java - 通过将文件放在安全的网络连接后面来保护文件

> ID：10794077
> 
> 赞同：0
> 
> 时间：2012-05-29T06:25:00.827
> 
> 标签：java, security, data-security

我正在用 JAVA (J2SE) 开发桌面应用程序。
我的应用程序。存储有关用户的一些数据。应用程序。是多用户，将安装在单个站点上。
每个用户都可以有一些应该存储在文件系统中的文档（例如图像、音频……）
我需要保护这些文件不被未经授权的用户直接访问。
用户在应用程序本身中定义（我需要文件只能通过应用程序访问）

如何保护这些文件免受未经授权的访问？

我考虑将文件存储在另一个系统中并通过网络访问它们。
如何在 JAVA 中执行此操作（在安全的网络计算机中存储/检索文件）？

这是一个好方法吗？有更好的解决方案吗？

谢谢

**编辑：**
说明：
我的用户在应用程序中定义：所有用户使用同一台计算机；所有用户在操作系统中使用相同的用户名登录；每个用户使用自己的用户/通行证登录应用程序；每个用户都应该有权访问应用程序决定的文件。
因此，用户不能打开文件管理器并遍历存储文件的目录并复制它们（虽然无权访问它们）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:00:19.043

由于所有用户都使用相同的操作系统登录帐户，因此不可能使用操作系统的设施来实施访问控制，因为操作系统将每个人都视为一个人。我只能想到一个不需要另一台计算机的（不太好，或者实际上很糟糕）解决方案：使用每个用户的密码加密文件。但是，这意味着每次用户更改密码时都必须重新加密所有文件，这会引入不可接受的延迟并使用大量计算能力。

还有很多其他方法可以向用户隐藏信息，并且只允许从您的程序访问。隐藏可以阻止大多数平庸的用户访问数据，但具有编程技能的坚定的人将能够使数据可访问。一个简单的例子是对程序中的所有字节进行异或运算，和/或用多个固定模式置换字节。如果数据不是那么关键，这是一个可能的“解决方案”。

我不确定是否有其他方法不需要另一台计算机。

这样就只剩下将信息存储在单独的计算机上的选项了。我认为这是可能的，但我不知道这里的细节。

* * *

然后出现这个问题：用户A从他的应用程序帐户打开一个文件，使用它，然后他退出应用程序帐户，并退出普通操作系统帐户，然后用户B登录普通操作系统帐户。您必须确保在用户 A 退出应用帐户后，用户 B 无法看到用户 A 正在处理的文件。

我不确定这是否应该处理该应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:54:12.463

与其推出自己的安全解决方案——这会很麻烦，几乎可以肯定有漏洞，而且很可能容易受到各种攻击——只需使用操作系统的文件系统权限。

最简单的方法是将用户数据写入当前用户的[主目录](https://stackoverflow.com/a/494742/35070)。除非用户明确配置目录的权限以允许他们访问，否则其他用户将无法访问它。

如果需要，您还可以进一步[限制目录的权限](https://stackoverflow.com/questions/664432/how-do-i-programmatically-change-file-permissions)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:22:54.283

一种选择是使用[SFTP](https://stackoverflow.com/questions/14617/java-what-is-the-best-way-to-sftp-a-file-from-a-server)。这样您就可以利用 SFTP 安全功能。但是当然，这将需要围绕它编写一些管道代码。

# osgi - 蓝图：如何检查是否满足可选依赖项？

> ID：10794082
> 
> 赞同：10
> 
> 时间：2012-05-29T06:25:26.597
> 
> 标签：osgi, blueprint-osgi

在`blueprint.xml`中，我以这种方式声明了一个可选依赖项：

```
<reference id="RepositoryListener"
    interface="ru.focusmedia.odp.server.datastore.api.RepositoryListener"
    availability="optional" />

<bean id="Repository"
    class="ru.focusmedia.odp.server.datastore.jpa.repository.RepositoryImpl">
    <jpa:context property="entityManager" unitname="ODP_Server" />
    <tx:transaction method="*" value="Required" />
    <property name="repositoryListener" ref="RepositoryListener" />
</bean> 
```

在 中`RepositoryImpl`，我有

```
public void setRepositoryListener(RepositoryListener repositoryListener) {
    logger.info("Repository listener set");
    this.repositoryListener = repositoryListener;
} 
```

`RepositoryListener`正如预期的那样，即使没有可用的服务，蓝图也会调用此方法。问题是，我以后如何检查是否有*服务*？

```
 if (repositoryListener != null) {
        repositoryListener.notifyDelete(node);
    } else {
        logger.warn("No repository listener set!");
    } 
```

不起作用，因为`repositoryListener`is not `null`，而是蓝图代理。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-29T08:41:31.667

有三个选项。

*   通常，如果尝试使用（缺少的）可选服务，您将延迟五分钟，而蓝图会等待支持服务出现，然后是`ServiceUnavailableException`. 因此，一种选择是设置一个非常短的蓝图超时，并捕获 ServiceUnavailableException。
*   一个可以说是更干净的选择是使用引用侦听器来监视服务的生命周期。这具有需要额外代码的缺点。
*   最简单的 - 因此也是最懒惰的 - 选项是使用可选引用列表而不是可选引用。如果不存在令人满意的服务，则列表将为空。当然，如果存在多个令人满意的服务，您将不得不考虑您想要发生什么。

要设置更短的超时，只需在可选服务引用中添加一个属性：

```
<reference
    id="someReference"
    interface="org.some.service.ServiceInterface"
    availability="optional"
    timeout="100" /> 
```

要使用引用侦听器，您需要在蓝图 xml 中添加类似以下内容（在[Enterprise OSGi in Action](http://www.manning.com/cummins "企业 OSGi 在行动")的第 6 章中有更详细的示例和讨论）：

```
<reference
        id="someReference"
        interface="org.some.service.ServiceInterface">
        <reference-listener
            ref="someBean"
            bind-method="bind"
            unbind-method="unbind" />
    </reference> 
```

`bind`和方法在`unbind`您的服务出现和消失时调用（或者，如果您使用的是参考列表，则在您的参考列表中添加和删除服务时）。

使用引用列表实际上并不需要代码示例 - 只需使用一个`<reference-list`元素并确保您的 setter 方法采用一个列表。

# xna - 在 WP7 XNA 游戏中，如何在屏幕上创建一个半透明的矩形作为通知消息框？

> ID：10794091
> 
> 赞同：2
> 
> 时间：2012-05-29T06:26:14.750
> 
> 标签：xna, message, transparent

是否可以创建一个可以在其上写入多行文本的透明消息框（矩形）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T21:12:29.707

Andy 的解决方案就足够了，但可能需要尝试几次才能找到所需的透明度，并且它还涉及在程序中创建和加载新资源。幸运的是，您可以避免这种情况，并且可以通过在运行时生成单个透明像素来使该过程可配置，该像素将延伸到调用中`Rectangle`参数的范围`SpriteBatch.Draw(Texture2D, Rectangle, Nullable<Rectangle>, Color)`：

```
//You can probably turn this in to a re-useable method
Byte transparency_amount = 100; //0 transparent; 255 opaque
Texture2D texture = new Texture2D(Device,1,1,false,SurfaceFormat.Color);
Color[] c = new Color[1];
c[0] = Color.FromNonPreMultiplied(255,255,255,transparency_amount);
texture.SetData<Color>(c); 
```

现在在您的绘图调用中使用新`texture`变量。

至于多行文本，有一个`SpriteBatch.DrawString()`接受 StringBuilder 参数的重载。这意味着你理论上可以去：

```
//configure
StringBuilder sb = new StringBuilder();
sb.AppendLine("First line of text");
sb.AppendLine("Second line of text");

//draw
SpriteBatch.DrawString(font, sb, position, Color.White); 
```

我会给你另一个提示，帮助你确定纹理的绘制矩形的大小：

```
//spits out a vector2 *size* of the multiline text
Vector2 measurements = font.MeasureString(sb); //works with StringBuilder 
```

然后，您可以`Rectangle`根据这些信息创建一个，甚至给它一些填充：

```
Rectangle rectangle = new Rectangle(window_x, window_y, (int)measurements.X, (int)measurements.Y);
rectangle.Inflate(5); //pad by 5 pixels 
```

然后把所有东西都放到draw call中，包括绘制窗口的颜色

```
SpriteBatch.Draw (texture, rectangle, Color.Black); //draw window first
SpriteBatch.DrawString(font, sb, position, Color.GreenYellow); //draw text second 
```

结果看起来更好看、更自动化和可配置。您应该能够将所有这些东西包装到一个可重用的可配置类中，用于通知消息。

注意：除了绘图代码之外的任何东西都应该在 LoadContent() 或其他地方，而不是实际游戏的 Draw() 调用。

请原谅任何语法错误，我只是把它写在我的脑海里.. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:29:37.890

在诸如 Paint.NET（免费）之类的东西中创建一个纹理，允许您编辑颜色的 alpha 值。

将纹理的一小部分区域设置为白色，alpha 值类似于 255,255,255,100 (r,g,b,a)，下图在红色正方形内有您需要的内容，尽管它没有明显显示在白色上。

![白方块](../Images/c7d3a51ee0b11ba71373055219a2ab7e.png)

现在使用[SpriteBatch.Draw](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.draw.aspx)，您可以将纹理绘制到屏幕上，它会显示您在纹理中设置的 alpha 值。

```
// Texture2D is a reference to the texture from above.
// Rectangle is the screen rectangle you want to draw your grey box at.
// Nullable<Rectangle> is the location of the white data inside the red box.
// Color is the colour that you want your grey box to be (grey?)
SpriteBatch.Draw (Texture2D, Rectangle, Nullable<Rectangle>, Color) 
```

使用 SpriteFont 覆盖您想要的文本。

# sql - 如何显示年份的具体数据

> ID：10794099
> 
> 赞同：0
> 
> 时间：2012-05-29T06:26:59.267
> 
> 标签：sql, oracle, stored-procedures, plsql, oracle10g

我必须返回将显示表中缺失数据的过程。

```
CREATE OR REPLACE PROCEDURE GETEMPLOYEE_INFO
(
P_CPNCOD in varchar2,
P_PAYDAT in date,
P_PAYTYP in varchar2,
P_ERV out varchar2)
is
R_DI_FILLODINF NUMBER(20);
BEGIN
   FOR i IN (SELECT * FROM DI_ELEMOD)
   LOOP
     SELECT COUNT(*) INTO R_DI_FILLODINF
     FROM DI_FILLODINF
     WHERE P_CPNCOD=i.CPNCOD and
           P_PAYDAT=i.PAYDAT and
           P_PAYTYP=i.PAYTYP ;

    if nvl(R_DI_FILLODINF,0)<=0
     then   
    dbms_output.put_line ('missing data : ' ||     i.CPNCOD  ||     i.PAYDAT  ||     i.PAYTYP   );
    end if;
    end loop;
    EXCEPTION
       WHEN OTHERS THEN NULL;
 end;
/ 
```

但现在我的问题是，如果我输入日期“01-JUN-12”，那么输出应该显示缺失的数据，但只显示 2012 年的数据。请帮忙

非常感谢提前

```
DECLARE
V_INSTY DI_FILLODINF.INSTYP%TYPE;
BEGIN
GETEMPLOYEE_INFO ('CO','01-JUN-12','D',V_INSTY);
END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:43:07.187

如果我理解正确，那么您需要做的是在外部查询中仅选择正确年份的值：

```
SELECT * FROM DI_ELEMOD
WHERE PAYDAT >= trunc(P_PAYDAT, 'yyyy') 
AND PAYDAT <= trunc(add_months(P_PAYDAT,12),'yyyy')-1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:55:14.597

如果您只想发送特定日期的年份，您可以使用 Substring 或更多来使用作物数据。

# django - 递归关系获取记录的id

> ID：10794101
> 
> 赞同：0
> 
> 时间：2012-05-29T06:27:01.667
> 
> 标签：django

我有一个名为“活动”的表，对于每个活动，我可以有零个或多个前辈。

我需要的是在这个表中有一个 ManyToManyField，链接到自身，并存储前一个活动的 id。

有没有人可以帮助解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:42:07.927

```
predecessor = models.ManyToManyField('self', symmetrical=False, null=True, blank=True) 
```

# android - 'android:launchMode="singleInstance"' 不允许结果更新的活动

> ID：10794102
> 
> 赞同：1
> 
> 时间：2012-05-29T06:27:01.730
> 
> 标签：android, android-activity, notifications, single-instance

当设置为单个实例时，Activity 不允许另一个 Activity 使用 Activity for results 方法对其进行更新。我应该设置什么标志，这样我就不必将初始启动模式作为单实例删除？

注意：我正在使用另一个活动作为图像加载器，它会更新启动器活动。启动器活动应该是单个实例，因为我使用它来使用状态栏进行通知。

这是一个挑战，所以我不能使用另一个活动来通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:29:29.583

是的，即使我也面临同样的问题。这就是为什么我无法将 Activity 用于将启动模式作为单个实例的结果，因为我发现我在活动 B 启动时收到 onActivityResult 的调用。

# hadoop - 如何使用 MAP-REDUCE java 程序将 HBASE 表加载到 HDFS

> ID：10794103
> 
> 赞同：1
> 
> 时间：2012-05-29T06:27:02.570
> 
> 标签：hadoop, mapreduce, hbase, hdfs

如何编写一个`MAP-REDUCE`java程序来加载任何`HBASE`表`HDFS`？

而不是使用以下命令，

我如何编写一个`TRANSFORMATION`使用`MAP-REDUCE`java 程序，它将导出任何表`HBASE`并加载到`HDFS`？

```
bin/hbase org.apache.hadoop.hbase.mapreduce.Driver export hdfs://user/etc*** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:18:32.253

看hbase自带[的Export函数的代码](http://svn.apache.org/viewvc/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/Export.java?revision=1342856&view=markup)

# smalltalk - 使用 Gem Tools 将 ST 归档到 GemStone 服务器

> ID：10794104
> 
> 赞同：3
> 
> 时间：2012-05-29T06:27:06.050
> 
> 标签：smalltalk, pharo, seaside, gemstone

```
1) I have the GemStone server running.
2) I have a Pharo 1.0 image with the gemStone Tools loaded.
3) I could succesfully login to the server after creating a session. 
```

现在我有一个`"abc.st"`文件由我在另一个`Pharo-Image`.

我找不到任何可以帮助我 使用该工具`filein`将此 ST 插入`gemStone`服务器的界面`gemStone`。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:06:29.050

使用 GemTools 将代码传输到 GemStone 的首选机制是使用 Monticello 包。如果您不熟悉使用 Monticello，请阅读[Pharo By Example Monticello 章节](https://gforge.inria.fr/frs/download.php/27018/Monticello.pdf)(pdf)。那里描述的基本原则可以应用于 Pharo 和 GemStone。

话虽如此，您可以通过执行以下操作来归档 .st 文件：

```
(BinaryOrTextFile openReadOnServer: 'full path to abc.st') 
  fileIn;
  close. 
```

戴尔

# java - Java泛型，将嵌套列表转换为嵌套数组

> ID：10794108
> 
> 赞同：2
> 
> 时间：2012-05-29T06:28:08.750
> 
> 标签：java, arrays, list, generics, multidimensional-array

我必须与一些使用嵌套数组的旧代码交互，因此我必须将嵌套列表转换为嵌套数组。

我心想，这样的功能应该已经在一些现有的库中实现了。我在 Google/StackOverflow 上进行了搜索，但没有任何结果。我检查了 Apache Commons 和 Guava，但没有找到等效的功能。

这是我的代码，我担心这可以以更简单的方式完成。任何想法、建议、改进都受到热烈欢迎。

```
@SuppressWarnings("rawtypes")
public static <E> Class getNestedListClass(List<List<E>> list){
    if (list == null) {
        return null;
    }

    for (final List<E> innerList: list) {
        if (innerList == null || innerList.isEmpty()) {
            continue;
        }
        return innerList.get(0).getClass();
    }
    return null;
}

@SuppressWarnings({ "unchecked", "rawtypes" })
public static <E> E[][] convertNestedList(List<List<E>> list){
    final Class<?> clazz = getNestedListClass(list);
    if (clazz == null) {
        return null;
    }
    final E[][] result = (E[][]) Array.newInstance(clazz, list.size(), 0);

    for (int i = 0; i < list.size(); i++) {    
        final List<E> innerList = list.get(i);
        if (innerList == null) {
            continue;
        }
        result[i] = innerList.toArray((E[]) Array.newInstance(clazz, innerList.size()));
    }
    return result;
}

@Test
public void testConvertNestedList() {
    final List<List<String>> list = new ArrayList<List<String>>();
    list.add(new ArrayList<String>());
    list.get(list.size() - 1).add("0.0");
    list.get(list.size() - 1).add("0.1");
    list.get(list.size() - 1).add("0.2");
    list.add(new ArrayList<String>());
    list.get(list.size() - 1).add("1.0");
    list.get(list.size() - 1).add("1.1");
    list.get(list.size() - 1).add("1.2");
    list.get(list.size() - 1).add("1.3");
    list.add(new ArrayList<String>());
    list.get(list.size() - 1).add("2.0");
    list.get(list.size() - 1).add("2.1");

    final String[][] array = convertNestedList(list);

    final String[][] expected = new String[][] { 
            { "0.0", "0.1", "0.2" }, 
            { "1.0", "1.1", "1.2", "1.3" },
            { "2.0", "2.1" } };
    assertArrayEquals(expected, array);

} 
```

**编辑**添加了一些测试用例：

```
@Test
public void testConvertNestedListCaseNull() throws NetLineMarketException {
    List<List<Object>> list = null;
    Object[][] array = ArrayUtils.convertNestedList(list);
    Object[][] expected = null;
    assertArrayEquals(expected, array);
}

@Test
public void testConvertNestedListCaseNullElement() throws NetLineMarketException {
    List<List<Object>> list = new ArrayList<List<Object>>();
    list.add(null);
    Object[][] array = ArrayUtils.convertNestedList(list);
    Object[][] expected = new Object[][] { null };
    assertArrayEquals(expected, array);
}

@Test
public void testConvertNestedListCaseNullElement2() throws NetLineMarketException {
    List<List<Object>> list = new ArrayList<List<Object>>();
    list.add(new ArrayList<Object>());
    list.get(0).add(null);
    Object[][] array = ArrayUtils.convertNestedList(list);
    Object[][] expected = new Object[][] { { null } };
    assertArrayEquals(expected, array);
}

@Test
public void testConvertNestedListCaseEmpty() throws NetLineMarketException {
    List<List<Object>> list = new ArrayList<List<Object>>();
    Object[][] array = ArrayUtils.convertNestedList(list);
    Object[][] expected = new Object[][] { };
    assertArrayEquals(expected, array);
}

@Test
public void testConvertNestedListCaseString() throws NetLineMarketException {
    final String string = "string";
    List<List<Object>> list = new ArrayList<List<Object>>();
    list.add(new ArrayList<Object>());
    list.get(0).add(string);
    Object[][] array = ArrayUtils.convertNestedList(list);
    Object[][] expected = new Object[][] { { string } };
    assertArrayEquals(expected, array);
}

@Test(expected=MyException.class)
public void testConvertNestedListCaseMix() throws NetLineMarketException {
    final String string = "string";
    List<List<Object>> list = new ArrayList<List<Object>>();
    list.add(new ArrayList<Object>());
    list.get(0).add(string);
    list.get(0).add(Boolean.TRUE);
    Object[][] array = ArrayUtils.convertNestedList(list);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:10:46.817

您的代码存在一些问题。例如：

*   `List<Object>(null)`被转换为`null`而不是`Object[] { null }`
*   `List<Object>("string")`被转换为`String[] { "string" }`而不是`Object[] { "string" }`
*   `List<Object>("string", Boolean.TRUE)`产生运行时错误。

我的建议：

```
public static <T> T[][] toArray(List<List<T>> list, Class<T> clazz) {
    if (list == null) {
        return null;
    }
    List<T[]> temp = new ArrayList<>();
    @SuppressWarnings("unchecked")
    T[] inner = (T[]) Array.newInstance(clazz, 0);
    for (List<T> sublist : list) {
        temp.add(sublist == null ? null : sublist.toArray(inner));
    }
    @SuppressWarnings("unchecked")
    T[][] outer = (T[][]) Array.newInstance(inner.getClass(), temp.size());
    return temp.toArray(outer);
} 
```

# login - 如何只允许访问特定路线

> ID：10794109
> 
> 赞同：0
> 
> 时间：2012-05-29T06:28:10.437
> 
> 标签：login, backbone.js, routes, restriction

我已经使用主干定义了一组路由

例如：

```
Backbone.Routes.prefix = Onethingaday.Routers
Backbone.Routes.map

"!*splat":
  "HomeRouter" : "reroute"

"":
  "NavbarRouter"  : "index"
  "SidebarRouter" : "index"
  "HomeRouter"    : "index"

"all":
  "NavbarRouter"  : "index"
  "SidebarRouter" : "index"
  "HomeRouter"    : "all"

"news":
  "NavbarRouter"        : "index"
  "SidebarRouter"       : "index"
  "NotificationsRouter" : "index"

"popular/threads":
  "NavbarRouter"   : "index"
  "SidebarRouter"  : "index"
  "DiscoverRouter" : "popularThreads" 
```

现在，我想限制对某些路由的访问，即只有在用户“isLoginedIn”时才能访问“所有”和“新闻”路由。我如何在这里进行检查？例如，如果用户尝试访问“所有”和“新闻”页面，我可以检查和比较并将用户重定向到单独的登录页面吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:05:32.993

根据您存储当前用户状态的方式，无论是 a`SessionController`还是`CurrentUser`模型，您始终可以按照`currentUser.isLoggedIn()`.

我不完全确定您的映射，因为 Backbone 只为路由公开一个单深度哈希图（您是否使用其他东西来定义您的路由？）

在我的一个 Backbone 应用程序中，我的代码如下：

```
home: function homeFn()
{
    if (this.app.currentUser.isAnonymous())
    {
        this.app.page('index');
    }
    else
    {
        this.app.page('dashboard');
    }
} 
```

这使您可以直接控制路线映射。如果你不喜欢这样，你总是可以扩展 Backbone.Router 对象来拥有之前/之后的过滤器。在撰写本文时，[这个插件](https://github.com/angelo0000/backbone_filters)是我以前使用过的插件，它帮助我很好地完成了你想要实现的目标。

# asp.net-mvc - 将控件返回给用户后，继续在后台递归执行函数

> ID：10794114
> 
> 赞同：1
> 
> 时间：2012-05-29T06:28:22.747
> 
> 标签：asp.net-mvc, multithreading, recursion

我在 .Net MVC 中开发了一个 twitter 应用程序，它可以在指定的时间自动发送消息。

应用程序的核心功能基本上包含一个递归函数，发布推文并不断调用自身，直到数据库字段设置为 false，它将在下一次运行中检查。

问题是当我通过 url 运行应用程序或函数时，浏览器进入“等待响应...”模式，而函数在后台以递归循环正确运行指定时间，直到浏览器返回页面未找到错误，我认为这是浏览器中设置的默认时间，它们在网站在指定时间内没有返回响应后停止连接，并且在此之后当浏览器停止连接时，该功能也停止执行。

**我想要的是让这个函数在后台递归调用自身，但也将控件返回到界面**，直到我单击关闭按钮并将`status`数据库中的字段更改为 false，*比如多线程？*

所以基本没有，我怎样才能让一个函数在后台运行并将控件返回到前台界面。请帮忙。

```
public ActionResult twitter_post(string msg)
    {

        bool status = //retrieve from database;

        while(status==true){
            //post Tweets;
            twitter_post(msg);
        }
        return View();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:00:28.980

您可以使用 jquery timer 插件来完成，通过 json 调用服务器端函数，直到获得所需的结果。

```
 $(document).everyTime('60s', function (i) {
               // Send your JSON call Here
         }, 1000); 
```

此函数将在每 60 秒后继续调用您的函数。当您需要输出时，请使用

```
 $(document).stopTime(); 
```

# sql-server-ce - SQL CE - 选择最新日期

> ID：10794116
> 
> 赞同：0
> 
> 时间：2012-05-29T06:28:55.280
> 
> 标签：sql-server-ce

我在使用 SQL CE 时遇到了很多问题，这只是其中之一。

我正在尝试从另一个表中获取最新日期的一行，但此查询出现错误：

> 选择 Projects.Client、Projects.Name、Projects.PO_No、Projects.PO_Date、Projects.Facility、
> 
> （SELECT top (1) Remarks FROM Status WHERE Proj_ID = @1 ORDER BY Date DESC ），
> 
> ...这里还有几列...
> 
> FROM Projects LEFT OUTER JOIN Collections AS b ON Projects.Proj_ID = b.Proj_ID LEFT OUTER JOIN Imp AS c ON Projects.Proj_ID = c.Proj_ID LEFT OUTER JOIN Acceptance AS d ON Projects.Proj_ID = d.Proj_ID LEFT OUTER JOIN Billing AS e ON Projects.Proj_ID = e.Proj_ID WHERE (Projects.Proj_ID = @1)

有任何想法吗？

编辑：这是错误

> -------------------------- Microsoft Visual C# 2010 Express ------------------ --------- SQL 执行错误。
> 
> 执行的 SQL 语句：SELECT Projects.Client、Projects.Name、Projects.PO_No、Projects.PO_Date、Projects.Facility、
> 
> (SELECT top (1) 备注
> 
> 从状态
> 
> 按日期顺序排序），
> 
> ```
>  ... 
> ```
> 
> 错误来源：SQL Server Compact ADO.NET 数据提供程序错误消息：解析查询时出错。[令牌行号= 4，令牌行偏移量= 2，错误令牌= SELECT]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-19T05:01:39.097

您不能`select`加入 SQL CE，这就是问题所在。

# asp.net - Ajax 控制日历工具包验证

> ID：10794120
> 
> 赞同：1
> 
> 时间：2012-05-29T06:29:24.743
> 
> 标签：asp.net, vb.net, calendar, ajaxcontroltoolkit

我有一个旅游申请表，它有 2 个日期，从日期和到日期。现在我使用 dd/MM/yyyy 格式输入日期，我需要验证 To date，例如 To date 必须大于或等于 start date。早些时候应该被禁用，我想用比较验证器来做到这一点..

目前我正在使用带有 ajax 控制工具包日历的文本框。

因此，如果有人有任何提示，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:48:43.080

you can try as bellow:

```
<asp:CompareValidator ID="cmpVal1" ControlToCompare="txtStartDate" 
         ControlToValidate="txtEndDate" Type="Date" Operator="GreaterThanEqual"   
         ErrorMessage="*Error message" runat="server"></asp:CompareValidator> 
```

but there can be issue with date format, Check this [answer](https://stackoverflow.com/questions/9735836/asp-net-compare-validator-issue-while-specifying-date-format-in-calender-extende) for more information.

# visual-studio-2010 - Visual Studio 32 位和 64 位强程序集名称问题

> ID：10794126
> 
> 赞同：1
> 
> 时间：2012-05-29T06:30:10.610
> 
> 标签：visual-studio-2010, c++-cli

尝试构建使用托管 C++/CLI 的项目，并且在 64 位构建配置中成功编译。当我切换到 Win32 配置时，托管 C++/CLI dll 不是强命名程序集的选址失败。切换配置时，我已验证两者都具有项目 -> 配置属性 -> 链接器 -> 高级 -> 密钥文件条目具有 snk 文件的正确路径（$（SolutionDir）key.snk）

不确定我是否在这里遗漏了什么。我在谷歌上找不到任何东西...

**[更新]**

如果我在 C++/CLI 项目中使用构建后事件，输出窗口会显示以下错误：

```
c:\path\file.dll does not represent a strongly named assembly 
```

我正在使用以下构建后事件：

```
sn -Ra "$(TargetPath)"  "$(SolutionDir)key.snk" 
```

再一次 - 上面的构建后事件适用于 x64 配置，但不适用于 win32。（我尝试在 32 位和 64 位机器上编译，结果相同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:46:31.650

今天刚遇到同样的问题，经过一番挖掘，看起来这是由 Microsoft Visual Studio 2010 SP 1 中引入的错误引起的。

可以在以下链接中找到导致错误的原因和解决方法的描述：

[http://blogs.msdn.com/b/vcblog/archive/2011/03/11/10140139.aspx](http://blogs.msdn.com/b/vcblog/archive/2011/03/11/10140139.aspx)

# django - django 和 sqlite 在生产中！我的 db 文件什么都没有，为什么？

> ID：10794127
> 
> 赞同：0
> 
> 时间：2012-05-29T06:30:12.643
> 
> 标签：django, sqlite

我又陷入了一个问题。我一直在 django 本地开发我的项目。一切正常，现在我将所有项目上传到服务器（虚拟）。现在我的数据库不工作了，我的意思是，一旦我点击应该从数据库中获取数据的按钮，它就不会从数据库中带来任何东西。难道是我在服务器上以错误的方式配置了我的 sqlite？

基本上我在服务器上什么也没做，所以我认为我应该首先在服务器上配置我的 sqlite 然后它会正常工作吗？你能帮我怎么做吗？操作系统是linux。我希望，Linux的操作系统版本之间的配置没有太大差异。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:41:04.040

您是否安装了项目的依赖项？

你是在运行 virtualenv 还是系统环境？

“单击按钮”是什么意思，将脚本发布在其后面

您的生产环境是否运行服务器没有错误？

尝试命令行并检查错误：

```
./manage.py syncdb 
```

错误？

```
./manage.py runserver 
```

错误？

```
./manage.py shell

>> from django.contrib.auth.models import User
>> print User.objects.all() 
```

错误？

```
>> import sqlite3 
```

错误？

# ember.js - Emberjs Handlebars #each helper 在绑定到计算属性时变慢

> ID：10794136
> 
> 赞同：7
> 
> 时间：2012-05-29T06:31:00.153
> 
> 标签：ember.js

当我使用 #each 帮助程序或绑定到 Ember.ArrayController 的某些计算属性的集合视图呈现项目列表时，我遇到了性能问题。10 - 20 个项目的小列表的性能很好，但在 50 - 100 个左右它开始明显滞后。尝试检查一些待办事项或单击“添加待办事项”

示例代码在这里：http: [//jsfiddle.net/Jonesy/ed3ZS/4/](http://jsfiddle.net/Jonesy/ed3ZS/4/)

我注意到 DOM 中的 childViews 每次更改都会重新渲染，这很可能是目前的预期行为，但我更希望能够从未完成的 todos 列表的 DOM 中删除一个 todo单独并附加到完成的待办事项列表的底部，这在理论上成本要低得多。

我希望回答的是我是否正在查看 Ember 集合视图的性能问题，或者显示从计算属性填充的列表是一个坏主意，如果是这样，我是否需要手动管理 todo 模型的位置在视图层中，因为它从未完成变为已完成，反之亦然。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T08:00:07.857

`{{#each}}`这是（和`CollectionView`，这是它的动力）如何工作的副作用。

在内部，`CollectionView`使用称为*数组观察者*的东西。数组观察者允许您订阅使用`Ember.Array`的突变方法（、、、`replace`等`pushObject`）对数组进行的突变。[此处描述](http://docs.emberjs.com/symbols/Ember.Array.html#method=addArrayObserver)`popObject`了数组观察者的 API 。

这意味着，如果您将新对象推送到集合视图中，它将在 DOM 中插入渲染一个新元素并将其余元素保留在原处。

`Array`但是，在您发布的示例中，数组并没有发生变化——每次添加或删除新项目时，您都会创建一个全新的对象。当绑定同步时，它会用新数组*替换*旧数组。To `{{#each}}`，这与删除所有元素然后重新添加它们没有什么不同。

该问题的解决方案是使用单个数组，而不是每次更改时返回不同数组对象的计算属性。您可以查看[联系人应用程序，了解如何执行此操作的示例](https://github.com/emberjs/examples/tree/master/contacts)。

Obviously this is a very common pattern, and we'd like to add some kind of filtering that does the right thing by default to `Ember.ArrayController` down the road.

# database - 从 SQLite 移植到 Redis

> ID：10794142
> 
> 赞同：1
> 
> 时间：2012-05-29T06:31:36.407
> 
> 标签：database, redis, key-value

我将 SQLite 用于我曾经在其中存储 8-10 列的应用程序。我曾经根据任意数量的这些属性的组合来检索数据。现在我想移植到 Redis。所以我正在为它构建一个测试应用程序。

但是我无法想到如何设计我的 redis 系统，以便我能够根据这些属性中的任何一个检索数据。大家有什么建议/经验吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T08:25:12.253

我认为最好的建议是在将某些东西从 RDBMS 移植到 Redis 时避免坚持使用关系模型。除了模型之外，一个重要的区别是关注数据访问路径以及数据结构。

Redis 不包含查询语言（而是命令 la memcached），因此无法回复任意查询。如果数据的访问路径不是数据结构的一部分，则无法有效地检索数据。

在支持任意查询方面，Redis 并不是最好的 NoSQL 存储。例如，MongoDB 之类的东西会更好地为您服务。

现在，如果你真的想用 Redis 实现你的东西，你可以尝试使用类似于标记引擎的策略。您的记录可以存储在哈希对象中。对于您需要支持的任意查询的每一列部分，您使用集合构建反向索引。

例如：

```
# Set up the records: one hash object per record
hmset user:1 name Bilbo type Hobbit job None
hmset user:2 name Frodo type Hobbit job None
hmset user:3 name Gandalf type Maiar job Wizard
hmset user:4 name Aragorn type Human job King
hmset user:5 name Boromir type Human job Warrior

# Set up the indexes: one set per value per field
sadd name:Bilbo 1
sadd name:Frodo 2
sadd name:Gandalf 3
sadd name:Aragorn 4
sadd name:Boromir 5
sadd type:Hobbit 1 2
sadd type:Maiar 3
sadd type:Human 4 5
sadd job:None 1 2
sadd job:Wizard 3
sadd job:King 4
sadd job:Warrior 5

# Perform a query: we want the humans who happen to be a king
# We just have to calculate the intersection of the corresponding sets
sinterstore tmp type:Human job:King
sort tmp by nosort get user:*->name get user:*->job get user:*->type
1) "Aragorn"
2) "King"
3) "Human" 
```

通过结合并集、交集、差集，可以实现更复杂的查询。对于非离散值或基于范围的查询，必须使用有序集 (zset)（并且可以与普通集组合）。

如果值有足够的判别力，这种方法通常很快。请注意，您没有 RDBMS 的灵活性（没有正则表达式，没有前缀搜索，范围查询很难处理，等等......）

# virtual - Liferay：更改公共虚拟主机设置后，无法登录

> ID：10794144
> 
> 赞同：2
> 
> 时间：2012-05-29T06:32:03.830
> 
> 标签：virtual, liferay, host

我犯了一个错误，如果可以修复，我似乎无法单独修复它。我的 Liferay URL 如下所示`http://192.168.10.10:8080/web/guest`：我想`'/web/guest'`从地址中删除该部分，因此从管理 - > 设置写入`192.168.10.10:8080`公共虚拟主机字段。保存后，我无法登录了。每次我写`http://192.168.10.10:8080/login`（就像我以前一样）时，它都会进入索引页面而不是登录页面。

然后如果我写了`login`after `'web/guest'`，我可以进入登录页面，但是当我填写用户名和密码字段并点击提交按钮时，它无处可去，那是没有采取任何行动，这很可能是因为我的权限已经设置较早。只有所有者拥有全部权利。

我想在数据库（MySql）的某个地方我可以清除我写到公共虚拟主机字段的内容，但是从表名中无法判断哪个表是用于该字段的。现在我正在尝试从数据库更改用户权限，还没有结果。我什至从 2 周前的转储中恢复了数据库，但似乎公共虚拟主机更改保存在其他地方而不是数据库。

我感谢任何帮助或对此的见解。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:10:09.113

终于解决了问题。我只需要从数据库中修复虚拟主机。

这是我的脚本，以防有人做了我所做的事情:)

```
update LayoutSet SET
    -> virtualHost = '192.168.10.10'
    -> WHERE virtualHost = '192.168.10.10:8080'; 
```

# php - 在同一个类的函数中调用一个类的函数内的函数

> ID：10794146
> 
> 赞同：-4
> 
> 时间：2012-05-29T06:32:11.857
> 
> 标签：php, class, function, codeigniter, call

从函数 abc();
1\. 如何调用“A 类中的函数 a”？（$this->a(); 返回错误）？
2\. 如何访问公共变量$bbb？

（-我知道结构不好，但 'require_once' 部分是动态的等等......）

```
 class AAA extends CI_Controller 
    {
        public $bbb;

    function ccc ()
    {
    }

    function index ()
    {
        require_once '1.php';
    }
    } 
```

// 在 1.php 中

```
function abc ()
{
 // how do i call method a of Class A?
 $this->ccc(); // returns error - Using $this when not in object context in ...
$this->bbb; //
}

abc(); // etc etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:41:08.803

你正在尝试做一些`require()`它不是设计用来做的事情，也不起作用。

> 但是，包含文件中定义的所有函数和类都具有全局范围。

[http://us.php.net/manual/en/function.include.php](http://us.php.net/manual/en/function.include.php)这也适用于`require()`.

`abc()`在全局范围内定义，因此没有使用所需的对象上下文`$this`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:40:06.297

正如琥珀提到`require`的，这里没有帮助。你不能只传递对函数的引用吗？

```
function abc (&$ref)
{
  $ref->ccc();
  $ref->bbb;
} 
```

在课堂之外通常需要它，然后只需调用

```
function index ()
{
  abc($this);
} 
```

不确定它会起作用，但我相信值得一试

# java - 对整数数组列表的数组列表进行排序

> ID：10794148
> 
> 赞同：4
> 
> 时间：2012-05-29T06:32:26.547
> 
> 标签：java, arraylist

我正在寻找对整数数组列表的数组列表进行排序，我需要帮助吗？

我被告知我需要实现比较器或比较器，然后使用 collection.sort 按顺序对列表列表进行排序......

```
ArrayList<ArrayList<Integer>> g = new ArrayList<ArrayList<Integer>>()

If you look at the list of list as the following example:
C1 – 5,4,10
C2 – 3,2,1
C3 – 7,8,6
First it will be sorted like this:
C1 – 4,5,10
C2 – 1,2,3
C3 – 6,7,8
Then it will be sorted like this
C1 – 1,2,3
C2 – 4,5,6
C3 – 7,8,10 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T06:40:02.487

没有对空列表的错误检查，但在这里。

```
List<List<Integer>> list = Arrays.asList(Arrays.asList(10, 5, 4), 
        Arrays.asList(3, 2, 1), Arrays.asList(7, 8, 6));
for (List<Integer> l : list) {
    Collections.sort(l);
}
Collections.sort(list, new Comparator<List<Integer>>() {
    public int compare(List<Integer> o1, List<Integer> o2) {
        return o1.get(0).compareTo(o2.get(0));
    }
});
System.out.println(list); 
```

使用 Java 8，它变得更加简洁：

```
List<List<Integer>> list = Arrays.asList(Arrays.asList(10, 5, 4),
                Arrays.asList(3, 2, 1), Arrays.asList(7, 8, 6));
list.forEach(Collections::sort);
Collections.sort(list, (l1, l2) -> l1.get(0).compareTo(l2.get(0)));
System.out.println(list); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T06:40:25.753

您可以单独对每个列表进行排序。将`Collections.sort(collection)`自动按升序对整数进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:19:14.620

如果 sort 没有你需要的，你可以试试这个算法：

```
package drawFramePackage;
import java.awt.geom.AffineTransform;
import java.util.ArrayList;
import java.util.ListIterator;
import java.util.Random;
public class QuicksortAlgorithm {
    ArrayList<AffineTransform> affs;
    ListIterator<AffineTransform> li;
    Integer count, count2;
    /**
     * @param args
     */
    public static void main(String[] args) {
        new QuicksortAlgorithm();
    }
    public QuicksortAlgorithm(){
        count = new Integer(0);
        count2 = new Integer(1);
        affs = new ArrayList<AffineTransform>();
        for (int i = 0; i <= 128; i++){
            affs.add(new AffineTransform(1, 0, 0, 1, new Random().nextInt(1024), 0));
        }
        affs = arrangeNumbers(affs);
        printNumbers();
    }
    public ArrayList<AffineTransform> arrangeNumbers(ArrayList<AffineTransform> list){
        while (list.size() > 1 && count != list.size() - 1){
            if (list.get(count2).getTranslateX() > list.get(count).getTranslateX()){
                list.add(count, list.get(count2));
                list.remove(count2 + 1);
            }
            if (count2 == list.size() - 1){
                count++;
                count2 = count + 1;
            }
            else{
            count2++;
            }
        }
        return list;
    }
    public void printNumbers(){
        li = affs.listIterator();
        while (li.hasNext()){
            System.out.println(li.next());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-11T09:37:24.093

这对我有用

```
Collections.sort(list, new Comparator<List<Integer>>() { 
            public int compare(List<Integer> o1, List<Integer> o2) { 
                int min = Math.min(o1.size(),o2.size());
                for(int i=0;i<min;i++)
                {
                     if(o1.get(i)!=o2.get(i))
                     {
                         return o1.get(i).compareTo(o2.get(i));
                     }
                }
                return (o1.size()<=o2.size())? -1:1;                
            }
        }); 
```

# android - 在 Eclipse 中管理项目依赖项

> ID：10794158
> 
> 赞同：1
> 
> 时间：2012-05-29T06:33:18.370
> 
> 标签：android, eclipse, build, dependency-management, robotium

我看到很多关于这个的帖子，但我仍然在努力。

我有一个包含两个项目的工作区，一个带有robotium 库，一个使用它（我们称之为foo）。我想在 foo 上单击运行，并让它重新编译 robotsium 到一个 jar 中，将它添加到 foo 的构建路径，然后运行 ​​foo。我怎样才能做到这一点？

另外，我开始学习 maven，所以我不反对这样做，我只是不知道怎么做——我一直假设这是 Eclipse 可以独立完成的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:41:29.470

您还可以将 android 项目设置为库，并在 foo 项目中引用该库。

```
project properties -> android -> libraries -> add project in workspace 
```

通过这种方式，您可以让您的 robotsium 项目进行更改，并且当您运行 foo 项目时，它将编译并链接库项目，这也用于将您的项目分隔在公共库等中。

您将需要在您的工作区中使用 Robotium 项目 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:39:18.007

使用 maven，您应该将 robotsium 项目定义为主项目的依赖项。还建议有一个父 pom，其中所有项目都定义为模块，包括主项目。如果您随后在父项目上启动 maven 构建，则将首先构建所有模块。

在[这本书](http://www.sonatype.com/books/mvnex-book/reference/multimodule-web-spring.html)中，您可以找到详细解释的 Maven 多模块项目的逐步设置（带有可下载的代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:25:46.100

你在eclipse中试过这个吗？Myproject(Foo) > Rightclick > Properties > Java Build Path > Libraries > Add Class Folder (robotium)

# cakephp - 延长 CakePHP 会话 Cookie 的寿命

> ID：10794164
> 
> 赞同：0
> 
> 时间：2012-05-29T06:33:41.467
> 
> 标签：cakephp

在我的 Cake 2 应用程序中，我在 APP/Config/core.php 中有以下代码：

```
Configure::write('Session', array(
    'defaults' => 'database',
            'cookie' => 'mycookie',
            'timeout' => 4320 //3 days
)); 
```

这主要按预期工作。会话存储在数据库中，cookie 命名正确，cookie 在 3 天后被删除。

我从[http://book.cakephp.org/2.0/en/development/sessions.html#built-in-session-handlers-configuration得到了上面的例子](http://book.cakephp.org/2.0/en/development/sessions.html#built-in-session-handlers-configuration)

不幸的是，这并不是我想要的。我希望在 3 天后删除 cookie，但我希望在用户最后一次在网站上处于活动状态后 3 天。换句话说：

1) 用户周一访问网站，cookie 设置为周三到期。但是，他周二回来，所以现在 cookie 将在周四到期。

2) 用户周一访问网站，直到周四才再次访问，因此必须生成一个新的 cookie。

起初我认为这可能是添加的问题，`Session.autoRegenerate`但这似乎没有任何帮助。即使使用此设置，即使用户在整个 3 天期间都在网站上处于活动状态，cookie 似乎仍然会在 3 天后被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:36:17.630

由于 PHP 会自动更新每个请求的会话 cookie，因此您应该考虑在会话中存储一个单独的超时变量并在您的`/Controller/AppController.php`文件中处理它。

可能是这样的。

**/控制器/用户控制器.php**

```
public login() {
  if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->Session->write('Auth.timeout', strtotime('+3 days'));
            return $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
        }
    }
} 
```

**/Controller/AppController.php**

```
public function beforeFilter() {
  if ($this->Auth->user() && $this->Session->read('Auth.timeout') <= strtotime('now')) {
    $this->Auth->logout();
    $this->Session->setFlash(__(Your session expired.'), 'default', array(), 'auth');
  }
} 
```

# php - 从传入电子邮件触发脚本的最简单方法（并从该电子邮件中读取一段数据）

> ID：10794165
> 
> 赞同：0
> 
> 时间：2012-05-29T06:33:43.270
> 
> 标签：php, email, soap, authsmtp

我正在使用 authsmtp 发送电子邮件。当订阅者将电子邮件报告为垃圾邮件时，他们会向我发送一封带有收件人地址的电子邮件。然后我将该地址复制到我的界面，以将其添加到被阻止的电子邮件列表中。

自动化这个最简单的方法是什么？我可以更改我的界面，但需要一个服务来接收电子邮件，从电子邮件正文中提取电子邮件地址并将我的界面称为肥皂调用（最好使用身份验证）。

有任何想法吗 ？

（顺便说一下，这些电子邮件是合法的，大约万分之一）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:04:21.893

为此，我有一个运行 php 脚本的 crontask 以连接到回复地址（unsubscribe@domain）的邮件帐户，然后我的 php 脚本将获取并处理任何新邮件。

因此，您将能够处理每封邮件并通过您想要的任何方式传递给您的 API。

对于 php - 通常通过 IMAP 连接 - 手边没有我自己的代码，但之前的这篇文章涵盖了您正在寻找的内容。[使用 PHP 脚本处理传入的电子邮件](https://stackoverflow.com/questions/3971423/processing-incoming-e-mail-with-php-script)

# java - 获取 javax.servlet.ServletException：在 Tomcat 上运行时

> ID：10794168
> 
> 赞同：0
> 
> 时间：2012-05-29T06:34:02.863
> 
> 标签：java, ssh, servletexception

谢谢大家，我得到

```
javax.servlet.ServletException: java.lang.ClassCastException: java.lang.Object cannot be       cast to java.util.List 
```

一天后在 tomcat 上运行我的 Web 应用程序时。如果我单击任何操作将有机会获得此异常。但不是每次都如此。任何人都可以帮助我吗？下面是异常描述

```
 description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: java.lang.ClassCastException: java.lang.Object cannot be cast to java.util.List
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:515)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:422)
    OnLineExam.Util.CkFilter.doFilter(CkFilter.java:31)
root cause

java.lang.ClassCastException: java.lang.Object cannot be cast to java.util.List
    OnLineExam.Operation.Library.GetLibraryTree.GetListByHql(GetLibraryTree.java:50)
    OnLineExam.Controller.LibraryController.getLibraryByParentIdAsc(LibraryController.java:53)
    OnLineExam.Controller.LibraryController.Manager(LibraryController.java:61)
    sun.reflect.GeneratedMethodAccessor540.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
    OnLineExam.Util.AuthorizationInterceptor.intercept(AuthorizationInterceptor.java:25)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:184)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:422)
    OnLineExam.Util.CkFilter.doFilter(CkFilter.java:31) 
```

> GetLibraryTree.java 下面的第 50 行代码

```
List<Tblibrarytree> resultList=(List<Tblibrarytree>) helper.getMySqlList(hqlStr, null); 
```

获取MySqlList：

```
 public Object getMySqlList(String HqlCmdStr,List<ParamsModel> ParamsList)
{
    Object  Result=new Object();
    try
    {    
        beginSessionAndTransaction();
        org.hibernate.Transaction tx=session.beginTransaction();
        Query q=session.createQuery(HqlCmdStr);
        //为参数化查询提供参数
        if(ParamsList!=null)
        {
            for(int i=0;i<ParamsList.size();i++)
            {
                q.setString(ParamsList.get(i).getParamsName(), ParamsList.get(i).getParamsValues());
            }
        } 
        Result=q.list(); 
        tx.commit();

    }
    catch(Exception e)
    {
        System.out.println(e.getMessage());
    }
    finally
    {
        //session.close();
    }
    return Result;
} 
```

现在，> getMySqlList() 更改为下面

```
public List<T> getMySqlList(String HqlCmdStr,List<ParamsModel> ParamsList)
    {
        List<T> Result=null;
        try
        {    
            beginSessionAndTransaction();
            org.hibernate.Transaction tx=session.beginTransaction();
            Query q=session.createQuery(HqlCmdStr);
            //为参数化查询提供参数
            if(ParamsList!=null)
            {
                for(int i=0;i<ParamsList.size();i++)
                {
                    q.setString(ParamsList.get(i).getParamsName(), ParamsList.get(i).getParamsValues());
                }
            } 
            Result=q.list(); 
            tx.commit();

        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
        finally
        {
            //session.close();
        }
        return Result;
    } 
```

关于这些代码的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:43:16.197

From the look of the exception it looks like you are trying to cast a single object to list of objects. Please check the hql executed in this scenario and run the query manually on the database to check what is actually retrieved.

# java - 在运行删除/加载数据脚本之前锁定 oracle 数据库

> ID：10794169
> 
> 赞同：2
> 
> 时间：2012-05-29T06:34:03.253
> 
> 标签：java, oracle, maven

我们每天午夜从 CI 运行 Junit 和 Selenium 测试用例。我们使用 Maven-SQL 插件预填充数据，如下所示。

```
 <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>sql-maven-plugin</artifactId>
                <version>1.3</version>
                <executions>
                    <execution>
                        <id>create-database-tables</id>
                        <phase>process-test-resources</phase>
                        <goals>
                            <goal>execute</goal>
                        </goals>
                        <configuration>
                            <autocommit>false</autocommit>
                            <onError>continue</onError>
                            <srcFiles>
                                <srcFile>../sql/delete_data.sql</srcFile>
                                <srcFile>../sql/load_data.sql</srcFile>
                            </srcFiles>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

由于不同用户同时构建，我们经常面临数据库死锁。我们认为的解决方案是在运行数据库脚本之前锁定数据库。

我们可以在运行脚本之前锁定数据库访问权限并在运行脚本后解锁它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:28:49.447

用于测试的共享数据库从来都不是一个好主意，大概您知道这就是为什么您要询问如何一次限制对一个用户的访问。

抛开讲道......我想提供一个[liquibase](http://www.liquibase.org/)的左字段解决方案来管理数据库模式和数据填充。具有许多有用的功能，其中之一是它会自动锁定数据库并防止两个 liquibase 实例相互干扰。

# 例子

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myspotontheweb.db</groupId>
    <artifactId>liquibase-demo</artifactId>
    <version>1.0-SNAPSHOT</version>
    <properties>
        <!-- Liquibase settings -->
        <liquibase.url>jdbc:h2:target/db1/liquibaseTest;AUTO_SERVER=TRUE</liquibase.url>
        <liquibase.driver>org.h2.Driver</liquibase.driver>
        <liquibase.username>user</liquibase.username>
        <liquibase.password>pass</liquibase.password>
        <liquibase.changeLogFile>com/myspotontheweb/db/changelog/db-changelog-master.xml</liquibase.changeLogFile>
        <liquibase.promptOnNonLocalDatabase>false</liquibase.promptOnNonLocalDatabase>
    </properties>
    <dependencies>
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>1.3.162</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.liquibase</groupId>
                <artifactId>liquibase-maven-plugin</artifactId>
                <version>2.0.2</version>
                <executions>
                    <execution>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>update</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:23:14.270

这实际上取决于您如何使用数据库。如果不同的用户是不同的oracle用户，应该没有问题，因为每个用户都可以有自己的表，不应该互相干扰。

如果每个用户都连接到同一个 Oracle 用户，则可能存在冲突。如果每个测试都需要对所有资源的独占访问，您可以构建一个控制表来控制允许访问和不允许访问的人员。这应该在测试准备和测试结束步骤中进行编码才能有效。可以进行简单的插入表并检查“您的”插入是否是第一个。使用 dbms_lock 也是一个类似的选项。

另一种方法是使用 Oracle 资源管理器，并将最大会话限制设置为 1，用于运行独占测试的 Oracle 数据库帐户。这样做，每次连接都会被拒绝，直到测试用户断开连接后连接槽再次可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:44:06.450

您可以执行以下操作：

在脚本开始时尝试锁定一个表。

```
lock table <some_table> in exclusive mode nowait; 
```

只有在没有其他进程锁定此表时，这才会成功。如果失败，另一个进程已经在运行。

如果您获得了锁，请运行脚本的其余部分。请注意，脚本中的任何提交或回滚都会结束锁定，因此只能在脚本的最后提交或回滚。

还要确保锁定一个表，该表的唯一目的是锁定某些东西以便专门运行您的脚本。

# c# - 从 wcf 服务函数调用 windows 应用程序的函数

> ID：10794175
> 
> 赞同：1
> 
> 时间：2012-05-29T06:34:35.593
> 
> 标签：c#, wcf

我可以从wcf服务函数调用windows应用程序的一个函数吗，整个应用程序的主要目的是：windows服务会检测到一些事件，并会在windows窗体应用程序上显示一些东西，以便用户识别事件。Windows 服务和 Windows 窗体应用程序应该通过 WCF 服务相互通信。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:38:18.937

通常，Web 服务被开发为由客户端调用。

将消息发送到客户端，这是您的情况下的 Windows 窗体应用程序可以完成

1.  [长轮询](http://blogs.msdn.com/b/silverlightws/archive/2009/09/30/having-a-pollingduplex-service-and-any-other-wcf-service-in-the-same-website-causes-silverlight-calls-to-be-slow.aspx)或
2.  [WCF TCP/IP 绑定](http://msdn.microsoft.com/en-us/library/ff647180.aspx)。

# php - 仅获取部分消息并仅重新加载一个 div

> ID：10794179
> 
> 赞同：0
> 
> 时间：2012-05-29T06:34:50.047
> 
> 标签：php, ajax, codeigniter

这是一种将数据插入数据库并应该显示新内容的 ajax 方法。

```
 <script type = "text/javascript">

        $(document).ready(function() {

                $('#submit').live('click', function(eve) {

                    eve.preventDefault() ; 

                    var form_data = {

                        title: $('#title').val()

                    };

                    $.ajax({

                    url: "http://localhost/ci/index.php/chat/comment",
                    type: 'POST',
                    data: form_data,
                    success: function(msg) {

                            alert(msg);

                    }

                    });

                });

        });

    </script> 
```

但是在我的/chat/comment 中，我再次加载视图，即用户提交评论，再次加载视图并且评论应该在那里。我来自服务器的响应是视图的 HTML。然而，视图带有所有 div 并且其中有很多。我只需要从成功的ajax 中检索部分div，例如#commentspace。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:42:38.297

看看[jQuery`$.load()`函数](http://api.jquery.com/load/)？

## 例子

在“firstpage.html”里面

```
$('#content').load('secondpage.html #content'); 
```

# javascript - 用 JavaScript 转换时间戳

> ID：10794180
> 
> 赞同：0
> 
> 时间：2012-05-29T06:34:52.993
> 
> 标签：javascript, date, time

我有一个看起来像这样的时间戳：“2012-12-29T20:00:00Z”。将其转换为月份和日期的最佳方法是什么？类似的东西`Dec 29`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:37:08.763

我不认为有一个简单的方法可以做到这一点。但是有一些为此目的的库。像这个

[http://momentjs.com/](http://momentjs.com/)

如果您不关心本地化问题，只需使用内部 Date 对象的原型。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:52:51.043

使用内置[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)对象。

```
// Date.parse parses an ISO date
var d = new Date( Date.parse( '2012-12-29T20:00:00Z' ) );

console.log( d.toString() ); // "Sat Dec 29 2012 21:00:00 GMT+0100 (Paris, Madrid)"

console.log( d.toString().substr( 4, 6 ) ); // "Dec 29" 
```

请注意，这`substr`将始终有效，因为天总是有 3 个字符，月份总是有 3 个字符，而日期总是有 2 个字符。

如果您不想使用`substr`，则无法直接获得“Dec”。但是，您可以使用映射数组，如下所示：

```
console.log( d.getMonth() ); // 11

var mapping = [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ];

console.log( mapping[ d.getMonth() ] + ' ' + d.getDate() ); // "Dec 29" 
```

这利用了数组的索引从 0 开始这一事实，就像`d.getMonth()`.

对于 IE8 支持`Date.parse`，我建议您使用以下 shim（来自[ES5-shim](https://github.com/kriskowal/es5-shim)）：[https ://gist.github.com/303249](https://gist.github.com/303249)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:55:16.040

您可以将字符串转换为日期对象`new Date("2012-12-29T20:00:00Z")`，在我的时区中使用该对象导致`Sat Dec 29 2012 21:00:00 GMT+0100 (W. Europe Standard Time)`. 有一些数据时间框架可供选择用于格式化，例如[datejs](http://www.datejs.com/)。我[在这个 jsfiddle 中](http://jsfiddle.net/KooiInc/TmZyh/)做了一个简单的，可能是你的起点。我已将您的 ISO 日期添加到示例中。它也适用于较旧的浏览器。

# jquery - jQuery 移动点击事件触发了两次

> ID：10794181
> 
> 赞同：12
> 
> 时间：2012-05-29T06:34:54.767
> 
> 标签：jquery, jquery-mobile

我用 jquery mobile 'tap' 事件进行了测试，发现它触发**了两次**，每次触发。html页面的代码如下：

```
<!DOCTYPE html>
<html>
<head>
    <title>Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>    
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.js"></script>      
    <style>
        #box{
            background-color:red;
            width:200px;
            height:200px;
        }   
    </style>
</head>
<body>
    <div id="box">
        tapped me
    </div>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#box').bind('tap',function(event) {
                alert('why');
            }); 
        });
    </script>
</body>
</html> 
```

更具讽刺意味的是，当我通过 jsfiddle 测试它时，它只触发了一次**事件**。

这是链接。 [http://jsfiddle.net/mochatony/tzQ6D/6/](http://jsfiddle.net/mochatony/tzQ6D/6/)

经过进一步测试后，我发现将 javascript 放在标题部分中的错误已经消失。

```
<!DOCTYPE html>
<html>
<head>
    <title>Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.js">
    </script>
    <style type="text/css">
        #box{ background-color:red; width:200px; height:200px; }
    </style>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#box').bind('tap', function(event) {
                alert('halo');
            });
        });
    </script>        
</head>
<body>
    <div id="box">
        tapped me
    </div>
</body>
</html> 
```

我无法解释为什么正文和标题部分的位置会有所不同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T18:23:04.517

我忘记了我在哪里看到的，但问题是 jQuery Mobile 绑定到触摸和鼠标事件以模拟“点击”，并且在某些情况下 Android 会触发两者。

对我有用的技巧是`preventDefault`在事件处理程序中调用事件。这将防止重复事件触发。

至于为什么只是有时会出现这种情况，我知道如果有人不听触摸版本，移动浏览器只会尝试触发事件的鼠标版本。检测或 jQuery 的委托可能存在使启发式方法混淆的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-29T07:12:21.683

您遇到了幽灵点击问题...这是一个已知的“错误”并且难以解决。

那里有更多信息：

[http://forum.jquery.com/topic/tap-fires-twice-with-live-tap](http://forum.jquery.com/topic/tap-fires-twice-with-live-tap) [https://developers.google.com/mobile/articles/fast_buttons](https://developers.google.com/mobile/articles/fast_buttons) [http://philosopherdeveloper.wordpress.com/2011/ 11/01/ghost-clicks-in-jquery-mobile/](http://philosopherdeveloper.wordpress.com/2011/11/01/ghost-clicks-in-jquery-mobile/)

在第一个链接中，您会发现一个可以解决问题的技巧。据我所知，没有简单的解决方案:(

顺便说一句：即使它不能解决您的问题，@Sagiv 也是对的。JQuery mobile 经常使用 ajax 来改变页面，因此不会触发 document.ready 事件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-29T06:42:20.030

来自[jQuery Mobile 页面](http://jquerymobile.com/test/docs/api/events.html)：

> **重要提示：使用 $(document).bind('pageinit')，而不是 $(document).ready()**
> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数内的代码，这样一切都会执行一旦加载了DOM。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。此事件在本页底部有详细说明。

所以跳过`$(document).ready()`. 更多信息[在这里](http://jquerymobile.com/test/docs/api/events.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-04T18:35:42.170

与这个问题相关，我在另一个事件之后得到了两个事件“点击”和“点击”。这里的所有想法都很鼓舞人心，但我最终找到了另一个解决方案。我将以下代码添加到我的 JavaScript 控制器中，以根据时间戳区分连续的重复事件，幸运的是，这两个重复事件完全相同。基本上，如果我决定使用该事件，我所做的是存储上次使用的时间戳。第二次具有相同时间戳的事件我只是丢弃了它。

```
var _lastEventTimestamp;
var checkAndPreventDuplicatedEvent = function (e) {
    if (e.timeStamp === _lastEventTimestamp) return true;
    else _lastEventTimestamp = e.timeStamp;
    return false;
}
```

然后，在我的每个处理程序中，我在开头添加了这个过滤代码：

```
var onTapSomething = function (e) {
   if (checkAndPreventDuplicatedEvent(e)) return;        
   //do here whatever you would do in the case of legitimate event...   
}
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-20T00:31:31.070

```
$("#buttonID").tap(function(event){
        if(localStorage.JQMGostClick == 0 || localStorage.JQMGostClick == "" || typeof(localStorage.JQMGostClick) === "undefined")
            localStorage.JQMGostClick = 1;
        else if(localStorage.JQMGostClick == 1){
            localStorage.JQMGostClick = 0;
            return false;
        }
.....
}); 
```

它对我有用，因为如果您使用的是移动环境，那么您可能正在使用一种存储

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-04T06:14:35.260

这可能不是最好的解决方案，只在某些情况下有效，但对我有用的是在点击事件开始后立即将该元素的 CSS“指针事件”设置为“无”。然后使用 JS 的 setTimeout 在 500 毫秒后将“指针事件”重置为自动。

对我来说，300 毫秒对于 Android 设备来说已经足够了，但 iPhone 需要 500 毫秒来防止双击。

```
function yourEvent(evt){

  $(el).css('pointer-events', 'none');

  setTimeout(function(){
      $(el).css('pointer-events', 'auto');
  }, 500);

  //do you stuff

}
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T16:57:56.403

我发现在我的情况下，添加`data-role="page"`到我的页面容器可以防止点击事件被触发两次。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-07T19:24:12.823

我以前经历过这样的事情，这是因为我的表格不在一个`data-role="page"`

我的建议是用 jQuery Mobile html 结构包装你的代码，这样你的代码应该看起来像这样

```
<div data-role="page" class="ui-page ui-page-theme-a ui-page-active">
  <div class="ui-content">
    <div id="box">
        tapped me
    </div>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#box').bind('tap',function(event) {
                alert('why');
            }); 
        });
    </script>
   </div>
</div> 
```

# asp.net - 在拦截器上检查时，HttpContext.Current 为空

> ID：10794183
> 
> 赞同：0
> 
> 时间：2012-05-29T06:35:06.867
> 
> 标签：asp.net, wcf, rest, interceptor

我的 asp.net 应用程序具有表单身份验证。当用户登录时，他被重定向到一个新页面 abc.aspx。在此页面上，在 javascript 中，在 document.ready 上，对某些启用了 AspNetCompatibilityMode 的服务进行了服务调用。在服务的拦截器中，我尝试找到 HttpContext.Current 但是当它对应用程序的第一个请求时，拦截器没有获取 HttpContext.Current 并且发现为空。之后，它永远不会为空，而仅在对应用程序的第一次请求时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:29:49.157

如果使用 WCF，则 wcf 中没有 HttpContext.Current。您必须在 Session 中使用 Service 类的 InstanceContextMode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:40:16.747

Peer 正确地说，WCF 中没有 HttpContext。您可以使用 OperationContext.Current.RequestContext

您必须按照以下链接

[http://www.danrigsby.com/blog/index.php/2008/05/23/understanding-instancecontext-in-wcf/](http://www.danrigsby.com/blog/index.php/2008/05/23/understanding-instancecontext-in-wcf/)

# eclipse-plugin - 如何在 SWT LABEL 中同时添加文本和图像

> ID：10794190
> 
> 赞同：8
> 
> 时间：2012-05-29T06:35:30.677
> 
> 标签：eclipse-plugin, swt, eclipse-rcp

有没有办法在单行中添加 SWT 标签中的文本和图像。一旦我添加图像，文本就会消失。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T09:08:24.747

不，您不能在其中同时包含图像和文本`Label`（除非您自定义绘制它）。其他用途`org.eclipse.swt.custom.CLabel`：

**`Code:`**

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.CLabel;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class LabelTest {
    public static void main(String[] args) 
    {
        final Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());

        Image image = new Image(display, "next.png");

        CLabel label = new CLabel(shell, SWT.BORDER);
        label.setImage(image);
        label.setText("This is a CLabel !!");

        shell.pack();
        shell.open();

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        if(image != null)
        {
            image.dispose();
            image = null;
        }
        display.dispose();

    }
} 
```

**`Output:`**

![在此处输入图像描述](../Images/d4f7b9898e9d5f7528042890e01d4cfe.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T08:41:16.437

按钮单击以打开文件对话框并选择要在特定标签上显示文本的任何图像。

```
import org.eclipse.swt.custom.CLabel 
```

支持对齐文本和/或图像以及不同边框样式的标签。

我希望这个答案是有用的。

请访问此页面： [如何加载图像以在 RCP 中查看？](https://stackoverflow.com/questions/23752432/how-to-load-image-to-view-in-rcp/41997511#41997511)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T17:17:02.247

是的，使用具有正确布局的中间组合

```
 Composite composite = new Composite(parent, SWT.NONE);
    composite.setLayout(new RowLayout(SWT.HORIZONTAL));
    Label imageLabel = new Label(composite, SWT.NONE);
    mageLabel.setImage(...);
    Label textLabel = new Label(composite, SWT.NONE);
    textLabel.setText(...) 
```

# java - 从处理程序中断循环

> ID：10794191
> 
> 赞同：1
> 
> 时间：2012-05-29T06:35:31.810
> 
> 标签：java, android, loops, handler

我需要从该循环中的处理程序中断我的循环，但有一个问题：

```
break cannot be used outside of a loop or a switch 
```

这是我的代码：

```
 Handler mHandler = new Handler();
        for (int i = 0; i < 10; i++) {
            mHandler.post(new Runnable() {

                @Override
                public void run() {
                    if (Break)
                        break;
                }
            });
        } 
```

我也不能使用标签中断，比如这个链接：[Return and Break statements 之间的区别](https://stackoverflow.com/questions/6620949/difference-between-return-and-break-statements)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:39:16.170

`break`只能让你停止一个循环（for/while）或一个开关。

如果你想阻止一个方法继续运行，你应该调用`return`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:45:25.663

没门。run() 异步执行，并且可能在循环执行完所有 10 次迭代后开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T06:45:47.243

我认为您可以使用布尔值来完成您的任务。

```
 boolean isBreak = false;
                 Handler mHandler = new Handler();
                 for (int i = 0; i < 10; i++) {
                        if(!isbreak)
                        {

                           mHandler.post(new Runnable() {

                            @Override
                            public void run() {
                           if (Break)
                          isBreak = true;
                        }
                      });

                       }
                      } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T06:50:29.277

您正在添加 10 个 Runnable 以由与 Handler 关联的线程运行，然后尝试在 Runnable 内部停止添加。

如果您想在某个时候停止剩余的可运行程序运行，那么如果您的代码中的可运行程序是相同的，那么您可以添加相同的可运行程序 10 次，然后使用[removeCallback](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29)删除剩余的可运行程序。

如果 Runnable 不同，您可以在每个 run() 方法的开头和`return`早期检查您的标志，以便运行可运行但不做太多事情，或者您可以让每个 Runnable 添加下一个运行，如果未设置标志。

# objective-c - 未找到 NSXMLNode 变量名称

> ID：10794195
> 
> 赞同：0
> 
> 时间：2012-05-29T06:35:49.967
> 
> 标签：objective-c, cocoa, nsxmlelement

这里有奇怪的错误......对于这段代码：

```
NSXMLNode *root = [[ads_user_defined_manufacturer_model objectAtIndex:i] parent];
NSXMLNode *make = [root childAtIndex:0]; 
```

第一行返回错误“未使用的变量根”，第二行返回错误“'root'未在此范围内声明..

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:37:34.327

其实不是，你是对的。它在代码中很靠前。我在上面的代码之前有一个 if 语句，没有任何 { } 。因此，只有第一个语句在 if 语句中完成，另一个在外面完成。

因此无法看到变量减速。

@gaige如果您想将您的回复作为答案，我很乐意将其标记为答案。谢谢。

# android - 片段隐藏不起作用

> ID：10794196
> 
> 赞同：1
> 
> 时间：2012-05-29T06:35:51.820
> 
> 标签：android, android-fragments

我只创建了用于片段隐藏和显示的示例应用程序。在第一个片段被正确添加到视图中。但是在菜单按下隐藏片段时它不会被隐藏。我发布了我的代码如下..

```
public class SwapfragActivity extends Activity
{

FrameLayout fr;
FragmentManager fm = getFragmentManager();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    fr = (FrameLayout) findViewById(R.id.fm1);

    frag f = new frag();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    menu.add("SHOW");
    menu.add("HIDE");
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
    frag f = new frag();
    if (item.getTitle() == "SHOW")
    {
        if (!f.isAdded()) 
        {
            FragmentTransaction ft = fm.beginTransaction();
            ft.add(R.id.fm1, f);
            ft.commit();
        }
        else if (f.isHidden())
        {
            FragmentTransaction ft = fm.beginTransaction();
            ft.show(f);
            ft.commit();
        }
    }
    else
    {
        if (f.isAdded()) 
        {
            FragmentTransaction ft = fm.beginTransaction();
            ft.hide(f);
            ft.commit();
        }
    }

    return true;
}
}

class frag extends Fragment 
{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {
        return inflater.inflate(R.layout.a, container, false);
    }
} 
```

# php - 将 UTC 日期/时间存储到 MongoDB

> ID：10794205
> 
> 赞同：0
> 
> 时间：2012-05-29T06:36:48.097
> 
> 标签：php, mongodb, date

如何使用 PHP 驱动程序将日期/时间 (UTC) 存储到 MongoDB？所以在 PHP 中，如果我这样做：

```
$utc = gmmktime(); 
```

我可以简单地做：

```
$utc = new MongoDate($utc); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:47:09.287

Yeap, this is the solution:

```
new MongoDate(gmmktime()); 
```

# hbase - HBase 不以 OpenJDK 开头

> ID：10794215
> 
> 赞同：2
> 
> 时间：2012-05-29T06:37:45.967
> 
> 标签：hbase, java

我们已经安装了 OpenJDK 6 并且 JAVA_HOME 当前指向它。我刚刚安装了 hbase-0.94.0，我们无法启动 HBase 服务器 (start-hbase.sh)，因为它正在寻找 Sun Java。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:26:49.363

请将您的日志详细信息粘贴到您的 hbase 文件夹中。HBase 将支持开放的 JDK 6，但最好使用 oracle jdk。下载 Oracle JDK 1.6 并更改 hbase-env.sh `JAVA_HOME=/usr/lib/jdk` （您安装的 Java 路径）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T10:56:54.770

请打印启动 HBase 时出现的错误，并重新检查您的 hbase-env.sh 并检查您是否设置了正确的 JAVA_HOME 路径。

# android - android中的面积图

> ID：10794217
> 
> 赞同：0
> 
> 时间：2012-05-29T06:37:56.283
> 
> 标签：android

我想在android中实现一个面积图。我更喜欢面积图，因为我想为我的图形的区域着色。图形是使用一些计算绘制的。任何人都知道如何实现面积图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T10:12:20.637

这就是你要找的答案：[点击这里](http://wptrafficanalyzer.in/blog/android-drawing-area-chart-using-achartengine/)

# c# - 如何在asp.net的iframe中加载pdf文件？

> ID：10794227
> 
> 赞同：0
> 
> 时间：2012-05-29T06:39:09.170
> 
> 标签：c#, asp.net

我想在 iframe 控件中显示 Pdf 文件。我在下面添加了我的代码。

```
in asp page,

<iframe width=500 height=500 runat="server" id="myPDF" src="pdf_003.pdf"></iframe>

in page_load

myPDF.Attributes.Add("src", "pdf_003.pdf"); 
```

当我运行项目时，在 iframe 中看不到 pdf 文件。相反，它显示了另存为对话框以保存到磁盘或在 pdf 阅读器中打开。

它在 Internet Explorer 中正确显示，但在任何其他浏览器中均未正确显示...

如何在所有其他浏览器中查看 iframe 控件中的 pdf 文件？

请指导我摆脱这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:43:39.340

您需要更改 Acrobat Reader 的设置，以便它在浏览器本身上显示 PDF 文件。

请参阅[此](http://kb2.adobe.com/cps/331/331025.html)Adob​​e 知识库文章

# css - - 跨浏览器中的 webkit 支持

> ID：10794230
> 
> 赞同：0
> 
> 时间：2012-05-29T06:39:20.177
> 
> 标签：css, webkit, cross-browser, mozilla

我正在使用`-webkit-border-radius:5px; -moz-border-radius:5px;`div 的半径。它在 chrome 和 sfari 中运行良好，但在 Mozilla Firefox 和 IE8 中运行良好。我该如何解决

```
<div style="background-color:#f7f7f7; width:340px; height:175px; -webkit-border-radius:6px;-moz-border-radius:6px;">
              <div style="padding-top:20px;text-align:center"><input name="email" type="text" class="required emailcheck" placeholder="Enter your email address" id="email" style="height:25px; width:200px;-moz-border-radius:5px; -webkit-border-radius:5px; "></div>

              <div style="padding-top:20px;text-align:center"><input type="password" name="password" id="password" placeholder="Password"  class="required" style="height:25px; width:200px; -webkit-border-radius:5px;-moz-border-radius:5px;"></div>

          </div>​ 
```

JS 小提琴[http://jsfiddle.net/ranasaani/uHHLX/](http://jsfiddle.net/ranasaani/uHHLX/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:50:49.030

除非您使用图像或用于圆角的行为 htc 文件，否则您无法使其工作。

[要检查对某些东西的支持，请](http://caniuse.com/#search=border-radius)使用 caniuse.com：http://caniuse.com/#search=border-radius

要在 IE8 及以下版本中获得圆角，请查看以下页面：

[http://jonraasch.com/blog/css-rounded-corners-in-all-browsers](http://jonraasch.com/blog/css-rounded-corners-in-all-browsers)

尽管这些解决方案不太理想，但我担心它们是唯一的方法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:44:40.523

IE8及以下不支持border-radius(css3)
为mozilla和IE9工作，你可能需要包含
border-radius:5px;

# c++ - 在 VC++ 中调试时在幕后发生了什么

> ID：10794231
> 
> 赞同：3
> 
> 时间：2012-05-29T06:39:28.197
> 
> 标签：c++, visual-c++, visual-studio-debugging

好吧，我现在使用 VC++ 已经有一段时间了，但是我想更深入地了解，当我们编译和调试代码时，幕后会发生什么，以及调试器是如何进行调试的。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:40:24.710

阅读杰夫罗宾斯的非常好的[书](https://rads.stackoverflow.com/amzn/click/com/0735615365)。

# asp.net-mvc - 在返回 Json 的方法中刷新 ViewData

> ID：10794232
> 
> 赞同：0
> 
> 时间：2012-05-29T06:39:30.840
> 
> 标签：asp.net-mvc, partial-views, viewdata

我有一个控制器，它有一个返回部分视图并生成 ViewData 的方法。然后，我有一些方法，每个方法都返回 Json 对象和 ViewData。但是， ViewData 没有得到刷新。如何刷新它？这可能吗？

```
public ActionResult FirstMethod() {
    ViewData["someList"] = ...;
    return PartialView(someOtherList);
}

public JsonResult SomeMethod()
{
    ViewData["someNewList"] = ...;
    return new JsonResult { ... };
} 
```

但是，虽然 SomeMethod() 是在 FirstMethod() 之后调用的，但我在视图中使用的 ViewData 是 someList。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:45:26.923

> 这可能吗？

不，这是不可能的。ViewData 是一个弱类型字典，可以用来（虽然我不推荐使用它）在控制器和视图之间传递信息。它的生命周期与控制器动作执行管道的生命周期相关。所以一旦视图被渲染，它就结束了。不再存在控制器、视图、ViewData……。仅在客户端浏览器中呈现 HTML。

然后再次向服务器发送 AJAX 请求。这是一个全新的请求，与第一个请求（最初用于渲染视图）无关，因此使用自己的 ViewData 创建控制器的新实例。在返回 JSON 的控制器操作中设置 ViewData 是没有用的，因为由于此操作将使用 javascript 调用，因此您希望从控制器传递到 javascript 成功处理程序的所有信息都必须是您返回的 JSON 对象的一部分。

# javascript - 使用没有 CSS 的 jquery 更改图像

> ID：10794235
> 
> 赞同：2
> 
> 时间：2012-05-29T06:39:37.573
> 
> 标签：javascript, jquery

作为我正在工作的站点的结帐过程的一部分，我可以编辑 CSS 以设置页面样式，但有一些链接是我想要更改的图像。

基本上我需要改变每个实例：

```
<img src="images/button.png"> 
```

在页面内

```
<img src="http://somewhereelse.com/images/newbutton.png"> 
```

此图像没有附加 css ID 或类，也无法添加。

这可以用JS或JQ完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:41:44.773

使用 jquery：

```
$('img[src=images/button.png]').attr('src','http://somewhereelse.com/images/newbutton.png'); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T06:41:50.833

```
$('img').attr('src', 'http://somewhereelse.com/images/newbutton.png'); 
```

或者

```
$('img[src=images/button.png]').attr(
'src', 'http://somewhereelse.com/images/newbutton.png'
); 
```

# bash - 使用 shell 脚本删除目录内容

> ID：10794236
> 
> 赞同：1
> 
> 时间：2012-05-29T06:39:39.387
> 
> 标签：bash, shell

我是 Shell 脚本的新手。我想删除用户 HOME 目录中的目录的所有内容，并删除一些与我的条件匹配的文件。谷歌搜索了一段时间后，我创建了以下脚本。

```
#!/bin/bash
#!/sbin/fuser

PATH="$HOME/di"

echo "$PATH";

if [ -d $PATH ]
then
 rm -r $PATH/*
 fuser -kavf $PATH/.n*
 rm -rf $PATH/.store
 echo 'File deleted successfully :)'
fi 
```

如果我运行脚本，我会收到如下错误，

```
/users/dinesh/di
dinesh: line 11: rm: command not found
dinesh: line 12: fuser: command not found
dinesh: line 13: rm: command not found
File deleted successfully :) 
```

有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:55:11.383

您正在修改`PATH`变量，操作系统使用该变量定义了查找实用程序的路径（这样您就可以调用它而无需键入二进制文件的完整路径）。系统在当前指定的文件夹中找不到`rm`and （因为你用要删除的目录覆盖了它），所以它打印错误。`fuser``PATH`

tl;dr 不要`PATH`用作您自己的变量名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:54:56.520

这一行：

```
PATH="$HOME/di" 
```

从您的 PATH 中删除所有标准目录（因此`rm`通常可以在其中找到`/bin`或`/usr/bin`“丢失”之类的命令）。你应该写：

```
PATH="$HOME/di:$PATH" 
```

这保留了 $PATH 中已经存在的内容，但放在`$HOME/di`了前面。这意味着如果您在该目录中有自定义命令，它将被调用，而不是在`/usr/bin`任何地方调用标准命令。

如果您打算删除目录`$HOME/di`，那么您不应该使用 $PATH 作为变量。你可以使用`$path`; 变量名区分大小写。或者您可以使用`$dir`任何其他名称。您确实需要了解关键环境变量并避免破坏或滥用它们。在关键的环境变量中，`$PATH`是最关键的一个（$HOME 是另一个；实际上，在这两个之后，其余的大部分相对不太重要）。按照惯例，大写名称是为环境变量保留的；对脚本中的局部变量使用小写名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T07:01:09.103

PATH 是一个特殊变量，用于控制系统在何处查找命令可执行文件（如`rm`、`fuser`等）。当您将其设置为 时`/users/dinesh/di`，它会在那里查找所有后续命令，并且（当然）找不到它们。解决方案：使用不同的变量名。实际上，我建议在 shell 脚本中使用小写变量——有许多大写的保留变量名，如果你尝试使用其中的任何一个，你都会遇到麻烦。坚持小写是避免这种情况的简单方法。

顺便说一句，通常最好在使用它们时将变量括在双引号中，以避免在替换它们后对 shell 进行一些解析时遇到麻烦。例如，使用`[ -d "$path" ]`代替`[ -d $path ]`. `$path/*`有点复杂，因为`*`在引号内不起作用。解决方案：`rm -r "$path"/*`。

随机其他注释：该`#!/sbin/fuser`行没有做任何事情。只有脚本的第一行可以充当 shebang。此外，不要费心`;`在 shell 脚本中添加行尾。

```
#!/bin/bash

path="$HOME/di"

echo "$path"

if [ -d "$path" ]
then
 rm -r "$path"/*
 fuser -kavf "$path"/.n*
 rm -rf "$path/.store"
 echo 'File deleted successfully :)'
fi 
```

# java - 如何创建新的 UserPrincipal？

> ID：10794237
> 
> 赞同：0
> 
> 时间：2012-05-29T06:39:43.803
> 
> 标签：java, jsf, authentication

我想用 JSF 创建一个登录表单，它还在外部上下文中创建一个新的 UserPrincipal。

当我想在 External FacesContext 中创建新的 UserPrincipal 时，我需要做什么？

我将 WebSphere Application Server 8 与 JSF 2 一起使用。

我想做这样的事情：

```
FacesContext context = FacesContext.getCurrentInstance();
Principal principal = context.getExternalContext().getUserPrincipal(); 
```

最好的问候投票

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:25:13.270

据我所知，我认为我们不必明确创建`UserPrincipal`。您必须使用某种机制（例如`JAAS`// `NTLM`）对用户进行身份验证，`SPNEGO`以便容器在其`javax.servlet.http.HttpServletRequest`实现中为您创建它

# python - 使用 Python 从文件中删除空格和空行

> ID：10794245
> 
> 赞同：6
> 
> 时间：2012-05-29T06:40:27.910
> 
> 标签：python, file

我有一个包含值 2000,00 的文件。

但它包含 2000,00 和空行之后的空格。

我想删除所有的空格和空行，如果有人可以给出一些想法，我尝试了很多方法但没有成功。

我累的一种方法如下

```
 # Read lines as a list
fh = open("transfer-out/" + file, "r")
lines = fh.readlines()
fh.close()
# Weed out blank lines with filter
lines = filter(lambda x: not x.isspace(), lines)
# Write "transfer-out/"+file+".txt", "w"
fh = open("transfer-out/"+file, "w")
#fh.write("".join(lines))
# should also work instead of joining the list:
fh.writelines(lines)
fh.close() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T06:44:31.770

`strip()`删除前导和尾随空白字符。

```
with open("transfer-out/" + file, "r") as f:
    for line in f:
        cleanedLine = line.strip()
        if cleanedLine: # is not empty
            print(cleanedLine) 
```

然后，您可以将脚本重定向到文件`python clean_number.py > file.txt`中，例如。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T06:47:39.350

另一个具有列表理解的：

```
clean_lines = []
with open("transfer-out/" + file, "r") as f:
    lines = f.readlines()
    clean_lines = [l.strip() for l in lines if l.strip()]

with open("transfer-out/"+file, "w") as f:
    f.writelines('\n'.join(clean_lines)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T06:51:23.143

更改您的“行”行以使用以下生成器，它应该可以解决问题。

```
lines = (line.strip() for line in fh.readlines() if len(line.strip())) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T06:45:30.503

这应该如您所愿：

```
file(filename_out, "w").write(file(filename_in).read().strip()) 
```

**编辑：**虽然以前的代码在 python 2.x 中工作，但它在 python 3 中不起作用（见@gnibbler 评论）对于两个版本都使用这个：

```
open(filename_out, "w").write(open(filename_in).read().strip()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T07:20:45.123

功能一：）

```
import string
from itertools import ifilter, imap

print '\n'.join(ifilter(None, imap(string.strip, open('data.txt'))))
# for big files use manual loop over lines instead of join 
```

用法：

```
$ yes "2000,00  " | head -n 100000 > data.txt
$ python -c "print '\n'*100000" >> data.txt
$ wc -l data.txt 
200001 data.txt
$ python filt.py > output.txt
$ wc -l output.txt 
100000 output.txt 
```

# java - 如何使用 Web 服务访问动态 Web 项目的方法？

> ID：10794246
> 
> 赞同：0
> 
> 时间：2012-05-29T06:40:43.980
> 
> 标签：java, web-services

我只知道核心java并开始学习J2EE。我对动态 Web 项目有疑问。

目前我有一个动态 Web 项目，JBOSS 服务器，我必须使用 Web 服务从它访问方法。我对此感到困惑并尝试了不同的方法，例如导入包，导入它的 JAR 等。

但我不知道如何在网络服务的帮助下做到这一点。我也不知道如何创建网络服务？

请告诉我如何从中访问方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:52:36.513

如果你可以用 servlet 做你想做的事，那么*就不要*创建一个成熟的 Web 服务。servlet 更容易、更高效，并且可以说对更广泛的潜在客户来说更便携。

如果由于某种原因，您不能使用 servlet（并且无论出于何种原因，您*必须*创建一个 Web 服务），那么请考虑使用 REST 而不是 SOAP。

例如：

*   [RESTEasy](http://www.jboss.org/resteasy)或

*   [JAX-RS](https://docs.jboss.org/author/display/AS7/Java+API+for+RESTful+Web+Services+%28JAX-RS%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:59:29.363

如果您想在 Windows 操作系统上从 wsdl 文件创建存根文件，您可以通过在批处理文件中使用 (.bat ) 扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:43:38.563

看看apache轴。 [http://axis.apache.org/axis/](http://axis.apache.org/axis/)

# objective-c - 类别标题导入不起作用

> ID：10794251
> 
> 赞同：1
> 
> 时间：2012-05-29T06:41:17.200
> 
> 标签：objective-c, categories, objective-c-category

我有一个工作区，里面有两个项目。第一个项目本质上是一个测试和开发项目，在我担心将所有东西真正捆绑在一起之前，我已经开始工作了。第二个项目是将我所有单独开发的视图控制器放在一个故事板中。

在其中一个视图控制器上，我有一堆滑动手势和相当多的 UIView 动画调用，它们的格式很好地为可读性而设计，因此占用了大量空间。我选择将它们作为一个类别移出。

问题是编译器没有在主头文件中看到实例变量声明。

让我大吃一惊的是，我在第一个项目中就这样做了，而且一切正常。所以我仔细比较了我的第二个项目和第一个项目的内容，我没有发现任何差异。

以下是一些文件片段，可帮助演示我如何/在何处定义事物，然后是类别文件中尝试访问它们的代码片段：

GSBViewController.h

```
@interface GSBViewController : UIViewController

@property (strong, nonatomic) IBOutlet UISegmentedControl *roundPicker;
@property (strong, nonatomic) IBOutlet UIView *roundsSectionView; 
```

GSBViewController.m

```
#import "GSBViewController+Swipe.h"

@interface GSBGameBuilderViewController ()
{
    UIBarButtonItem *rightGatherBarButton;

    NSInteger previousRound;
}
@end

@implementation GSBViewController
@synthesize roundPicker;
@synthesize roundsSectionView; 
```

GSBViewController+Swipe.h

```
#import "GSBViewController.h"

@interface GSBViewController (Swipe)

- (void)establishSwipeGestures;

@end 
```

GSBViewController+Swipe.m

```
#import "GSBViewController+Swipe.h"

@implementation GSBViewController (Swipe)

- (void)establishSwipeGestures
{
    UISwipeGestureRecognizer *swipeLeft = 
       [[UISwipeGestureRecognizer alloc] 
           initWithTarget:self 
                   action:@selector(roundsSectionLeft:)];

    [swipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [swipeLeft setNumberOfTouchesRequired:1];
    [roundsSectionView addGestureRecognizer:swipeLeft];
// bunch-o-code snipped -- for the time being it's actually all commented out
// as a test and because the LLVM compiler was giving up after too many errors
// and I wanted to see if there was more it would like to tell me about this first --
// and very representative -- problem.
}
@end 
```

编译器的抱怨是“使用未声明的标识符'roundsSectionView'”

如果我在向其中添加手势识别器的那行代码中单击使用 roundsSectionView，则弹出窗口正确地描述了它，如 GSBViewController.h 中所声明的那样

所以我很难过。

我可以在 Xcode 中做些什么（发帖时为 4.3.2 :-) 让我看看包含的文件是什么？或者是否需要一些非基于文件的东西来将一个类别与它正在扩充的类联系起来？我不记得以前有什么必要的。事实上，我为这个类别生成文件的方式是通过 Xcode 的 File -> New File... Objective-C Category 模板。然后我只是复制了旧的 ...+Swipe.h 和 ...+Swipe.m 文件的内容，并将它们粘贴到新项目中各自的文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:53:41.757

合成的 ivar 是私有的。编译器不允许您在任何地方访问它，除了在`@implementation`它创建的块中。类别和子类都不能直接访问 ivar；他们必须使用以下属性：`[self roundsSectionView]`。

早期的 Clangs 没有将合成的 ivars 设为私有的可能性很小。要么就是这样，要么你在早期的项目中并没有真正做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:05:44.060

@Jacques Cousteau 说的是正确的。

由于您刚刚定义了一个属性并且没有支持 ivar，因此该类别将无法访问它。如果您使用`self.roundsSectionView`它将使用为该属性生成的 getter 方法，因此它将起作用。

或者你可以在你的界面中定义一个支持变量

```
@interface GSBViewController : UIViewController
{
    UIBarButtonItem *roundsSectionView;
} 
```

在这种情况下，类别将能够访问该变量。但不是任何其他类。

# ios - 从 Facebook Connect iOS 检索朋友的生日信息

> ID：10794253
> 
> 赞同：3
> 
> 时间：2012-05-29T06:41:21.303
> 
> 标签：ios, facebook

当我从 iOS 应用程序登录 Facebook Connect 时，是否可以通过与 iOS 应用程序集成的 Facebook Connect 检索朋友的“生日”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:51:28.790

您可以使用 Graph api 获取此信息检查[http://developers.facebook.com/docs/reference/api/user](http://developers.facebook.com/docs/reference/api/user)

# mysql - MySQL比较两个指定精度的日期时间字段

> ID：10794254
> 
> 赞同：2
> 
> 时间：2012-05-29T06:41:24.890
> 
> 标签：mysql

使用 MySQL 进行精确的日期时间比较的方法是什么？就像我想比较两个 dateTime 字段，看看它们是否相等，忽略分钟和秒，说：

```
[compare with precision down to hours] 
Is 2011-05-05 14:32:49 equal to 2011-05-05 14:46:22 ?
=> TRUE 
```

我不确定有什么，谷歌也没有帮助（精度只是带来了一堆关于毫秒和微秒垃圾的结果）。也许这种类型的比较来自另一个函数，并且在 MySQL 中没有带精度的日期比较？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:43:35.097

You could try:

```
DATE(dt1) = DATE(dt2) AND HOUR(dt1) = HOUR(dt2) 
```

Take a look at MySql [Date-Time functions](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# iphone - 是否可以在 MPMoviePlayerController 上绘制任何内容

> ID：10794256
> 
> 赞同：0
> 
> 时间：2012-05-29T06:41:36.137
> 
> 标签：iphone, mpmovieplayercontroller

是否可以在 MPMovieplayercontroller 中在线添加一个点。如果是，那么如何..Becoz 因为可以在视图上绘制线。那么 MPMovieplayerconteoler 也只是一个视图..

```
- (void)drawSquiggle:(Squiggle *)squiggle inContext:(CGContextRef)context
{
   // set the drawing color to the squiggle's color
   UIColor *squiggleColor = squiggle.strokeColor; // get squiggle's color
   CGColorRef colorRef = [squiggleColor CGColor]; // get the CGColor
   CGContextSetStrokeColorWithColor(context, colorRef);

   // set the line width to the squiggle's line width
   CGContextSetLineWidth(context, squiggle.lineWidth);

   NSMutableArray *points = [squiggle points]; // get points from squiggle

   // retrieve the NSValue object and store the value in firstPoint
   CGPoint firstPoint; // declare a CGPoint
   [[points objectAtIndex:0] getValue:&firstPoint];

   // move to the point
   CGContextMoveToPoint(context, firstPoint.x, firstPoint.y);

    // draw a line from each point to the next in order
   for (int i = 1; i < [points count]; i++)
   {
      NSValue *value = [points objectAtIndex:i]; // get the next value
      CGPoint point; // declare a new point
      [value getValue:&point]; // store the value in point

      // draw a line to the new point
      CGContextAddLineToPoint(context, point.x, point.y);
   } // end for

   CGContextStrokePath(context);   
} // end method drawSquiggle:inContext: 
```

结束方法 touchesBegan:withEvent:

这是我使用的代码.. mpPlayer 是 mpvideoplayer 对象

但它无法在 mpvideoplayer 上绘制点。有什么办法吗。请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:31:07.903

IOS SDK 中有一个示例，它在播放的电影上具有覆盖视图。这应该是一个好的开始。

[https://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html)

# javascript - 从使用 CodeMirror 创建的内联代码中删除填充

> ID：10794257
> 
> 赞同：1
> 
> 时间：2012-05-29T06:41:38.307
> 
> 标签：javascript, css, codemirror

我正在一个项目上实现[CodeMirror](http://codemirror.net/)，需要使用它来语法高亮代码块和内联代码。

这是我整理的一个示例，以演示我正在尝试做的事情：[http ://students.susanbuck.net/storage/code/code-mirror/](http://students.susanbuck.net/storage/code/code-mirror/)

该语法在这两种情况下都有效，但我陷入困境的是找到一种方法来仅在`.inline`代码元素上终止填充，这样它们就不会在段落中的行之间添加多余的空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:35:26.770

您想要定位`.CodeMirror-lines`跟随`textarea.code.inline`元素的 div。这可以使用以下 CSS 选择器来实现：

```
textarea.code.inline + div.CodeMirror div.CodeMirror-lines {
    padding: 0px!important; /* added !important as padding is an inline stlye */
} 
```

`div.CodeMirror-scroll`您可能希望避免在子项中设置一个高度值。您可以使用以下 CSS 使此高度冗余：

```
textarea.code.inline + div.CodeMirror > div.CodeMirror-scroll { 
    max-height: 1em;
} 
```

# jquery - 当 jquery 分配给 innerHtml 时会触发哪些事件

> ID：10794258
> 
> 赞同：2
> 
> 时间：2012-05-29T06:41:42.723
> 
> 标签：jquery

当我单击 navMenu 中的链接时，我有以下代码将一些 html（包括锚点）加载到 div 中。当我逐步浏览它时，`<p>'s`它们是隐藏的，但是当页面最终出现时它们并没有隐藏。显示页面后，contentClickFunction 会按预期隐藏/显示`<p>'s`。

我相信我需要“准备好”之类的东西，但要分配给 innerHtml。有没有我可以监听的事件，所以我的隐藏调用不会被覆盖？

我知道我可以通过添加 css 设置来实现我的目标，`#content li>p { display:none; }`但我想了解发生了什么。

```
$(document).ready(function(){
    $("#content").on("click", "li>a", contentClickFunction);
    $("#navMenu a").click(function(event){
        var href = $(this).attr("href");
        event.preventDefault();
        $.get( href , function(data){
            $("#content").html(data);
        });
        $("#content li > p").hide();
    });
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:53:32.510

DOM`ready`只触发一次。

您可以使用[突变事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)( `DOMNodeInserted`)，但它们已被弃用。

您还可以创建自定义事件：

```
function handler(){
    // Do stuff
}

$('#content').on('insert', handler);

$.get( href , function(data){
    $("#content").html(data).trigger('insert');
}); 
```

最后一个选项似乎最适合您。

# html - 当文本太长时，我简单的两列布局会中断。我究竟做错了什么？

> ID：10794261
> 
> 赞同：0
> 
> 时间：2012-05-29T06:41:48.463
> 
> 标签：html, css, layout, css-float

我正在构建一个非常简单的网页，它有一个页眉、一个左侧导航框和一些内容，以及一个页脚。它`CSS`用于控制布局。如果我的内容区域中的文本很短，它可以正常工作，但是如果文本的长度太长（即在几乎所有情况下），内容区域会下降到导航框下方，而不是很好地坐在导航旁边。

`HTML`看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB">
    <head>
        <title>Title Goes Here</title>
        <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />

        <!-- local style sheet -->
        <link rel="stylesheet" type="text/css" href="styles/screen.css" media="screen" />
    </head>
    <body>
        <div id="header">
            <h1>The Header</h1>
        </div>
        <div id="wrapper">
            <div id="navigation"><!-- Navigation -->
                <ul>
                    <li><a href="#">Navigation</a></li>
                    <li><a href="#">Options</a></li>
                    <li><a href="#">Go</a></li>
                    <li><a href="#">Here</a></li>
                </ul>
            </div><!-- Navigation end -->
            <div id="content"><!-- Main Content Area -->
                <h2>Your Content Goes Here</h2>
                <p>Whatever content you like can go here but if the text is too long it seems to
                break the floating of the content and ends up below the navigation div.
                This is really very annoying and I'd love to know how to fix it.</p>
            </div><!-- Main Content Area end -->
        </div>
        <div id="footer">
            <ul>
                <li><a href="#">Some</a></li>
                <li><a href="#">Footer</a></li>
                <li><a href="#">Links</a></li>
            </ul>
        </div>

    </body>
</html> 
```

`CSS`看起来像这样：

```
body {
    background:#000;
    -webkit-background-size:1920px 1200px /* dimensions of graphic */
    font-family:helvetica,arial,sans-serif;
    margin:0;
    padding:0;
    border:0;           /* This removes the border around the viewport in old versions of IE */
    min-width:600px;    /* Minimum width of layout - remove line if not required */
                        /* The min-width property does not work in old versions of Internet Explorer */
    font-size:90%;
    width:100%;
}
#header, #wrapper, #footer {
    width:100%;
}
/* Header styles */
#header {
    clear:both;
    float:left;
}

/* main container that wraps the content */
#wrapper {
    position:relative;  /* This fixes the IE7 overflow hidden bug */
    clear:both;
    float:left;
    overflow:hidden;    /* This chops off any overhanging divs */
    background:#fff;    /* right column background colour */
    margin-top:20px;
    -moz-border-radius:25px;
    border-radius:25px;
}
#content {
    float:left;
    position:relative;
    margin-left:20px;
    padding:0 0 1em 0;
}
#navigation {
    float:left;
    position:relative;
    background:#000;
    width:150px;
    font-size:.9em;
    margin:40px 0 0 0;
    padding:0 0 1em 0;
    z-index:1002;
}
#navigation li{color:#FFF;background:#000;list-style-type:none;}
#navigation a{text-decoration:none;color:#FFF;display:block;padding:5px 15px;}
#navigation li:hover{}
#navigation li:hover a{color:#FFF;display:block;background:#4f81bd;}
#navigation li:hover ul{display:block;}

#footer {
    clear:both;
    float:left;
    font-size:.75em;
    margin-top:30px;
}
#footer p {
    padding:10px;
    margin:0;
}
#footer ul{margin:0;padding:0;}
#footer li, #footer li a{color:#aeaeae;display:inline;padding:0 5px;}
#footer li{list-style-type:none;padding:2px 0;}
#footer li a{font-weight:normal;text-decoration:none;text-transform:none;}
#footer li a:hover{text-decoration:underline;}

h1,h2,h3,h4{color:#4f81bd;}
    h1{font-size:1.6em;}
    h2{font-size:1.3em;}
    h3{font-size:1.2em;}
    h4{font-size:1em;} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:48:57.343

不要浮动内容 div，而是给它足够的左边距以清除导航 div。

简单的两列布局在这里说明[http://jsfiddle.net/DFvyb/](http://jsfiddle.net/DFvyb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:47:15.913

我建议尝试使用开源网格系统，而不是尝试使用自己的网格系统。

有很多，你可以看看这个，例如： [https ://github.com/stubbornella/oocss/wiki](https://github.com/stubbornella/oocss/wiki)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:55:36.923

h2 和 p 标签应该在 div 中并在下面的 div 检查链接上应用宽度

[http://jsfiddle.net/DzQRR/](http://jsfiddle.net/DzQRR/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:37:12.217

设置**#content div****的**属性，例如900px

# android - android中的SMSlog备份

> ID：10794263
> 
> 赞同：0
> 
> 时间：2012-05-29T06:41:52.340
> 
> 标签：android

请帮我找到在android中存储短信日志的代码。我必须在应用程序上工作来存储calllog和smslog。我得到了calllog的代码，但是smslog我无法得到正确的代码。我只需要从电话中获取 smslog 的名称、号码、msgtext、日期和时间。请帮我获取一些代码。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:03:28.610

这是您的解决方案...

调用此方法...根据需要捕获异常，这将在 LogCat 上打印所有短信详细信息...它还返回找到的短信数量...

```
public int getAllData() throws Exception {
    // Declarations
    int dataCount = 0;
    // Details to get
    String type = null;
    String number = null;
    String body = null;
    String _date = null;
    String date = null;
    // Query details
    Uri dbUri = Uri.parse("content://sms");
    String[] projection = { "type",
                            "address",
                            "body",
                            "date" };
    String selection = null;
    String[] selectionArgs = null;
    String sortOrder = null;
    // Getting results of query
    Cursor smsInfoCursor = getContentResolver().query(dbUri, projection, selection, selectionArgs, sortOrder);
    // Displaying data
    Log.i(TAG, "Displaying SMS info");
    if (smsInfoCursor.getCount()>0) {
        smsInfoCursor.moveToFirst();
        do {
            // type
            type = smsInfoCursor.getString(0);
            if (type == null)
                   type = "";
            Log.v("type", type);
            // number
            number = smsInfoCursor.getString(1);
            if (number == null)
                   number = "";
            Log.v("number", number);
            // body
            body = smsInfoCursor.getString(2);
            if (body == null)
                   body = "";
            Log.v("body", body);
           // date time of message
           date = smsInfoCursor.getString(3);
           if (date == null)
               date = "";
           Log.v("Date", date);
           Log.v("-----", "-----");
        } while(smsInfoCursor.moveToNext());
    }
    dataCount = smsInfoCursor.getCount();
    }
    smsInfoCursor.close();
    return dataCount;
} 
```

您还必须在清单中添加以下权限...

```
<uses-permission android:name="android.permission.READ_SMS" /> 
```

您还可以根据需要修改选择参数...

希望这有效... :)

# c# - 如何绕过 n+1，正确的域 -> ViewModel.FromMyDomain 方法

> ID：10794269
> 
> 赞同：1
> 
> 时间：2012-05-29T06:42:14.850
> 
> 标签：c#, asp.net-mvc-3, linq, nhibernate, viewmodel

假设我有一个带有一些字段的实体和一个像这样的集合

```
Entity
int Id {get; set;}
string Name {get; set;}
string Title {get; set;}
List<Order>Orders {get; set;}

Order
int Id {get; set;}
string Name {get; set;}
Entity Entity {get; set;} 
```

现在我想创建 EntityOrderViewModel，它只代表两个实体的几个属性。像这样

```
EntityOrderViewModel
int Id {get; set;}
string EntityName {get; set;}
string EntityTitle {get; set;}
string OrderName {get; set;}
int OrderId {get; set;}

EntityOrderViewModel(Entity x)
{
   Id = 1; 
   EntityName = x.Name; 
   EntityTitle = x.Title;
   foreach(Order order in x.Orders)
   {
      OrderName = order.Name;
   }
}

public static List<EntityOrderViewModel> FromMyDomain(IList<Entity> x)
{
    List<EntityOrderViewModel> vm= new List<EntityOrderViewModel>();

    foreach (Entity e in x)
    {
        vm.Add(new EntityOrderViewModel(e));
    }
    return vm;
} 
```

现在从我的控制器我想调用所有这样的实体

```
//opensession
   // open transaction
      List<Entity> data = session.Query<Entity>().ToList();
   //end transaction
      transaction.commit();
//end session      
      return EntityOrderViewModel.FromMyDomain(data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:39:35.030

既然你在控制器中有你的会话，为什么不直接水合视图模型呢？

```
from entity in session.Query<Entity>()
join order in session.Query<Order> join entity.EntityId on order.Entity.EntityId
select new EntityOrderDTO // or anon 
{
  EntityId = entity.EntityId,
  Name = entity.Name,
  OrderName = order.OrderName
} 
```

加入会照顾你的 n+1

# java - 访问 plsql 函数时出错：名称模式无效

> ID：10794272
> 
> 赞同：0
> 
> 时间：2012-05-29T06:42:23.400
> 
> 标签：java, oracle, jdbc, plsql

我有一个返回数组的函数，我从 java 调用这个函数来获取值。

PL/SQL 代码

```
create or replace type dates
       is array(10000) of varchar2(32) 
```

功能

```
CREATE OR REPLACE function datefunc (    
    id1    IN number,
    id2    IN NUMBER    

)
    RETURN dates
AS
    datearray          dates;
    sdate       VARCHAR2 (32);
    edate       VARCHAR2 (32);
BEGIN 
```

Java 代码

```
 connection = datacon.getConnection();
                    callablestatement = 
    connection.prepareCall("begin ? :=datefunc(?,?,?); end;");
                    callablestatement.registerOutParameter
(1, OracleTypes.ARRAY,"dates");
                    callablestatement.setInt(2, param1);
                    callablestatement.setInt(3, param2);
                    callablestatement.execute(); 
```

但是当我执行我的代码时，我得到了

```
java.sql.SQLException: invalid name pattern: schema.dates 
```

这可能是什么原因，我该如何解决这个错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:52:54.527

它必须是大写的：

```
callablestatement.registerOutParameter(1, OracleTypes.ARRAY,"DATES"); 
```

更新：哦，我发现在哪里看到了类似的问题：[https ://stackoverflow.com/a/2787880/617455](https://stackoverflow.com/a/2787880/617455)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:54:58.003

您定义了 4 个参数：

```
connection.prepareCall("begin ? :=datefunc(?,?,?); end;"); 
```

但只设置其中三个：

```
callablestatement.registerOutParameter(1, OracleTypes.ARRAY,"dates");
callablestatement.setInt(2, param1);
callablestatement.setInt(3, param2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-04T19:07:59.617

我遇到了同样的问题，但是这些解决方案都不适合我。

我发现我意识到的 PL/SQL 中缺少一些**类型。**

# postgresql - eclipselink change schema at EntityManager callbacks

> ID：10794278
> 
> 赞同：0
> 
> 时间：2012-05-29T06:43:08.280
> 
> 标签：postgresql, eclipselink, glassfish-3, saas, multi-tenant

i have a **multi-tenant** application and i need to **change the schema name at runtime** so it is gonna be shared DB seperate schema **SaaS** design.

because creating an EntityManagerFactory is very expensive, i would like to create the EMF application-scoped and specify the schema before every DB calls after initiating the EntityManger. i am using **Postgresql** 8.1 and because Postgesql doesn't support schema selection at setting up the DB connection, i thought the only way to query from tables for different schemas is querying '**SET search_path = "my.schema"**' before making the required DB calls.

i have tried;

```
StringBuilder sb = new StringBuilder();                
sb.append("SET search_path TO my.schema");            
entityManager_.createNativeQuery(sb.toString()).executeUpdate(); 
```

i have got an exception saying '**java.lang.IllegalStateException: You cannot call executeUpdate() on this query. It is the incorrect query type**'

i am using **eclipselink** as PersistenceProvider and **glassfish** as application manager

is there anyway i can get this done ?

i am open to any suggesstions if there is a better way of accomplishing this

thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:46:53.677

由于您正在执行租户每个模式，您是否还使用租户特定的数据库登录角色（用户 ID）？如果是这样，您可以将默认搜索路径绑定到您的用户：

```
ALTER USER thetenant SET search_path = 'thetenant'; 
```

如果您还：

```
REVOKE ALL ON SCHEMA thetenant FROM public;
GRANT ALL ON SCHEMA thetenant TO tenant; 
```

您将在更大程度上将用户彼此隔离，尽管他们仍然会看到`pg_catalog`和中的内容`INFORMATION_SCHEMA`。

这要求您为每个租户使用一个登录角色。在使用连接池的情况下，这可能很困难，因为 Java 连接池通常不能切换池连接的用户 ID，并且必须为每个用户 ID 保留一个池。PostgresSQL 的[`SET SESSION AUTHORISATION`](http://www.postgresql.org/docs/current/static/sql-set-session-authorization.html)语句很有用，它允许您以单个主用户身份登录，然后切换到特定工作所需的用户，但我不知道是否有任何 Java 池直接支持它。您可以使用外部连接池，如 PgBouncer 和 PgPool-II 有`SET SESSION AUTHORISATION`意识的，或者查看是否有任何方法可以编写拦截器，以便您可以`SET SESSION AUTHORISATION`在连接从池中检出时发出连接，以及`RESET SESSION AUTHORISATION`当它们被检回时在。

即使您不能使用基于角色的访问，我也会对您的搜索路径尝试相同的方法：看看您是否可以在连接池的帮助下通过捕获连接来完成它，因为它们已从池中签出以执行任务，并且在发布时重新签入。但是，如何做到这一点取决于连接池，您可能不想深入了解它的细节。

顺便说一句，你到底为什么要使用这样一个史前版本的 PostgreSQL？

我不知道为什么 EclipseLink 拒绝你的命令。从表面上看，它看起来很合理。你也在使用其他东西的古代版本吗？您使用的是哪个 Glassfish 和 EclipseLink 版本？

# php - 仅 CLI 的 PHP MongoDB 扩展/类问题

> ID：10794279
> 
> 赞同：4
> 
> 时间：2012-05-29T06:43:14.847
> 
> 标签：php, mongodb, command-line-interface

*   cd /etc/php5
*   `apache2/php.ini`并且`cli/php.ini`是相同的
*   `apache2/conf.d/mongo.ini`并且`cli/conf.d/mongo.ini`是相同的

当我尝试通过命令行执行脚本时，mongo 扩展没有被加载（我得到一个类未找到错误）。通过 apache 完美运行。

有任何想法吗？（我写了这个小脚本来检查）：

```
<?php
    echo class_exists('Mongo') ? "Mongo class found" : "Mongo class not found" . PHP_EOL;
?> 
```

当这个文件通过 apache 被命中时，它通过 CLI 回显肯定，否定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T13:15:15.777

那么你很可能使用了错误的 php 文件。用于`php --ini`查看它加载了哪些。您还可以设置`php.ini`设置`display_errors=1`并`display_startup_errors=1`查看未加载的原因。

# c++ - 类型擦除的 C++ 输出迭代器

> ID：10794286
> 
> 赞同：8
> 
> 时间：2012-05-29T06:43:35.160
> 
> 标签：c++, boost, stl, type-erasure

如何从输出迭代器中擦除类型`std::insert_iterator`和`std::back_insert_iterator`？是否可以使用 boost`any_iterator`来做到这一点？

```
#include <boost/range.hpp>
#include <boost/range/detail/any_iterator.hpp>
#include <vector>

typedef boost::range_detail::any_iterator<
    int, boost::incrementable_traversal_tag, int &, std::ptrdiff_t > It;

int main()
{
    std::vector<int> v;
    It outIt( v.begin() ); // compiles
    It inserter( std::back_inserter(v) ); // does not compile
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T07:50:33.070

`any_iterator`不是为与*输出迭代器*一起使用而设计的，这就是`back_insert_iterator`（或者，就此而言，*输入迭代器*）。

`back_insert_iterator`被定义为继承自`iterator<output_iterator_tag, void, void, void, void>`它的`value_type`,`reference_type`和are all `distance_type`，但希望能够通过其支持迭代器间接指向非空值。也许它会更好地命名；但它是一个类模板。`pointer_type``void``any_iterator``any_value_iterator``detail`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T10:56:50.323

所以我使用Boost实现了我自己的一个。

```
#include <boost/function_output_iterator.hpp>
#include <boost/function.hpp>

template < class T >
class AnyInserter : public boost::function_output_iterator< boost::function< void ( const T & value ) > >
{
private:
    typedef typename boost::function_output_iterator< boost::function< void ( const T & value ) > > BaseType;
    template < class OutIt > struct Insert
    {
        Insert( OutIt it ) : m_it(it) {}
        void operator () ( const T & value ) { m_it++ = value; }
        OutIt m_it;
    };
public:
    template < class OutIt >
        explicit AnyInserter( const OutIt & it ) : BaseType( Insert< OutIt >(it) ) {}
};

template < class OutIt >
    inline AnyInserter< typename OutIt::container_type::value_type >
    makeAnyInserter( const OutIt & it ) 
    {
        return AnyInserter< typename OutIt::container_type::value_type >(it);
    } 
```

# visual-c++ - 查找 DWORD 大小

> ID：10794290
> 
> 赞同：0
> 
> 时间：2012-05-29T06:43:45.537
> 
> 标签：visual-c++

我是 vc++ 的新手……我对 vc++ 有一个疑问。GetTickCount() 函数的大小是多少。GetTickCount() 的返回类型是 DWORD。请任何人回答我的问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:00:12.370

函数的大小是指属于该函数的代码所占用的字节数。您可以使用 Windbg 之类的调试器找到此问题。但在大多数情况下，这不是有用的信息。要获取数据类型的大小，可以使用`sizeof`运算符。由于返回类型`GetTickCount`是`DWORD`（4 字节），您可以执行`sizeof(DWORD)`或`sizeof(GetTickCount())`获取它的大小。还有一个函数名`GetTickCount64`，它返回`ULONGLONG`一个 64 位无符号值（8 个字节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:47:38.240

`GetTickCount()`返回`DWORD`4 个字节的 a。函数本身可以使用它的起始地址（函数指针）来表示，它的大小等于`void*`32 位系统上的 4 个字节和 64 位系统上的 8 个字节的大小。查找函数占用的代码大小可能会有问题，而且很少需要。

# git - 如何为 TeamCIty 中的待处理更改编写 git 日志

> ID：10794300
> 
> 赞同：12
> 
> 时间：2012-05-29T06:44:32.427
> 
> 标签：git, github, teamcity, commit

我有一个配置为构建我的 XCode 项目的 TeamCity 代理，并且我使用 github。我想在我的发行说明中自动包含 TeamCity 中所有待处理提交的描述。

如何从 github 获取它们并将它们存储在 teamcity 中？一旦我将它们放入 teamcity 变量中，我就可以轻松地将它们添加到我的构建脚本中。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-31T20:56:37.130

这就是我最终使用 bash 脚本执行此操作的方式：

```
#!/bin/bash 

curl -o lastBuild.tmp "http://localhost:8111/app/rest/buildTypes/id:bt2/builds/status:SUCCESS" --user rest:rest
last_commit=`xpath lastBuild.tmp  '/build/revisions/revision/@version'| awk -F"\"" '{print $2}'`

echo "##Last commit = $last_commit"
# prepare build notes
NOTES=`git log --pretty=format:"- %s" $last_commit..origin/master`

echo "this is it:$NOTES" 
```

一些解释：

1.  用于`curl`从您的构建配置中获取最后一个成功的构建。在我的示例中，这是 bt2，请确保将其替换为您的
2.  使用 XPath/AWK 解析 XML 响应并获取最后一个 git 版本
3.  用于`git log`从上次构建中获取所有更改并根据需要格式化它们。我只想获取提交描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:02:19.183

您可以使用“[从构建步骤添加或更改构建参数](http://confluence.jetbrains.net/display/TCD65/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-AddingorChangingaBuildParameterfromaBuildStep)”功能，以便直接从构建步骤更新一些构建参数。

从 GitHub 获取之后，您需要一个调用步骤`git log origin/master..master`（参见“ [git: list commits not push to the origin yet](https://stackoverflow.com/questions/3080509/git-list-commits-not-pushed-to-the-origin-yet) ”）。
（有关使用 GitHub 的 TeamCity 配置，请参阅“[通过 Git 使用 Team City](http://devlicio.us/blogs/mike_nichols/archive/2010/06/12/using-team-city-with-git.aspx) ”，并确保您的[TeamCity 使用正确的帐户运行](https://stackoverflow.com/questions/5203436/how-to-set-git-commit-author-properly-from-rake-running-under-localsystem-acco)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-21T00:11:37.653

当我实现上述答案时，我发现了几个问题，这些问题在这里更新：

```
#!/bin/bash 

curl -o lastBuild.tmp "http://localhost:8111/app/rest/buildTypes/id:%system.teamcity.buildType.id%/builds/status:SUCCESS" --user rest:rest
last_commit=`xpath lastBuild.tmp '/build/revisions/revision/@version'| awk -F"\"" '{print $2}'`

git log --pretty=format:"- %%s" $last_commit..origin/master > changes.txt 
```

一些更详细的事情：

1.  用于`curl`从您的构建配置中获取最后一个成功的构建。您可以使用 teamcity 的替换来输入构建 ID。
2.  请注意，curl 命令依赖于名为 rest 的 TeamCity 用户，密码为“rest”。建议修改密码。

3.  使用 XPath/AWK 解析 XML 响应并获取最后一个 git 版本

4.  用于`git log`从上次构建中获取所有更改并根据需要格式化它们。我只想获取提交描述并将它们写入文件。您需要通过将 git 设置为在构建之间进行清理，以确保文件在构建之间消失。注意：如果您要构建除 master 以外的任何东西，则需要在此处使用正确的分支规范。

5.  请注意，`git log`格式选项使用 %，它是 teamcity 替换标记，因此需要转义为 %%。

6.  您需要配置 TeamCity 以使 .git 目录可访问。请参阅[在 TeamCity 构建步骤中使用 git 命令](https://stackoverflow.com/questions/11632624/using-git-commands-in-a-teamcity-build-step)

7.  更改现在位于 changes.txt 文件中。在我的应用程序（编辑改进问题）中，我使用此文件提交给 crashlytics 以获取 iOS 测试版分发。

# objective-c - Is there a pattern to override a property?

> ID：10794303
> 
> 赞同：6
> 
> 时间：2012-05-29T06:45:03.073
> 
> 标签：objective-c, accessor, mutability, declared-property

The [Objective-C runtime](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html#//apple_ref/doc/uid/TP40008048-CH101-SW1) keeps a list of declared properties as meta-data with a Class object. The meta-data includes property name, type, and attributes. The runtime library also provides a couple of functions to retrieve these information. It means a declared property is more than a pair of accessor methods (getter/setter). My first question is: **Why we (or the runtime) need the meta-data?**

As is well known, a declared property cannot be overridden in subclasses (except readwrite vs. readonly). But I have a scenario that guarantees that needs:

```
@interface MyClass : MySuperClass <NSCopying, NSMutableCopying>

@property (nonatomic, copy, readonly) NSString *string;

- (id)initWithString:(NSString *)aString;

@end

@interface MyMutableClass : MyClass

@property (nonatomic, strong, readwrite) NSMutableString *string;

- (id)initWithString:(NSString *)aString;

@end 
```

Of course, the compiler won't let the above code pass through. My solution is to substitute the declared property with a pair of accessor methods (with the readonly case, just the getter):

```
@interface MyClass : MySuperClass <NSCopying, NSMutableCopying> {
    NSString *_string;
}

- (id)initWithString:(NSString *)aString;

- (NSString *)string;

@end

@implementation MyClass

- (id)initWithString:(NSString *)aString {
    self = [super init...];
    if (self) {
        _string = [aString copy];
    }
    return self;
}

- (NSString *)string {
    return _string;
}

- (id)copyWithZone:(NSZone *)zone {
    return self;
}

- (id)mutableCopyWithZone:(NSZone *)zone {
    return [[MyMutableClass alloc] initWithString:self.string];
}

@end

@interface MyMutableClass : MyClass

- (id)initWithString:(NSString *)aString;

- (NSMutableString *)string;
- (void)setString:(NSMutableString *)aMutableString;

- (void)didMutateString;

@end

@implementation MyMutableClass

- (id)initWithString:(NSString *)aString {
    self = [super init...];
    if (self) {
        _string = [aString mutableCopy];
    }
    return self;
}

- (NSMutableString *)string {
    return (NSMutableString *)_string;
}

- (void)setString:(NSMutableString *)aMutableString {
    _string = aMutableString;

    // Inform other parts that `string` has been changed (as a whole).
    // ...
}

- (void)didMutateString {
    // The content of `string` has been changed through the interface of
    // NSMutableString, beneath the accessor method.
    // ...
}

- (id)copyWithZone:(NSZone *)zone {
    return [[MyClass alloc] initWithString:self.string];
}

@end 
```

Property `string` needs to be mutable because it is modified incrementally and potentially frequently. I know the constraint that methods with the same selector should share the same return and parameter types. But I think the above solution is appropriate both semantically and technically. For the semantic aspect, a mutable object *is a* immutable object. For the technical aspect, the compiler encodes all objects as *id*'s. My second question is: **Does the above solution make sense? Or it's just odd?**

I can also take a hybrid approach, as follows:

```
@interface MyClass : MySuperClass <NSCopying, NSMutableCopying> {
    NSString *_string;
}

@property (nonatomic, copy, readonly) NSString *string;

- (id)initWithString:(NSString *)aString;

@end

@interface MyMutableClass: MyClass

- (id)initWithString:(NSString *)aString;

- (NSMutableString *)string;
- (void)setString:(NSMutableString *)aMutableString;

- (void)didMutateString;

@end 
```

However, when I access the property using the dot syntax like `myMutableObject.string`, the compiler warns that the return type of the accessor method does not match the type of the declared property. It's OK to use the message form as `[myMutableObject string]`. That suggests another aspect where a declared property is more than a pair of accessor methods, that is, more static type checking, although it is undesirable here. My third question is: **Is it common to use getter/setter pair instead of declared property when it is intended to be overridden in subclasses?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:50:26.640

我对此的看法会略有不同。在`@interface`Objective-C 类的情况下，您正在声明该类与所有与之通信的类一起使用的 API。通过将`NSString*`copy 属性替换为`NSMutableString*`strong 属性，您正在创造一种可能会发生意外副作用的情况。

特别是，`NSString*`复制属性应该返回一个不可变对象，这对于在许多情况下使用`NSMutableString*`对象是安全的（字典中的键，元素名称`NSXMLElement`）。因此，您真的不想以这种方式替换它们。

如果您需要底层证券`NSMutableString`，我会建议以下内容：

*   在字符串属性之外添加一个`NSMutableString*`属性，并命名`-mutableString`
*   重写`-setString:`方法以创建`NSMutableString`并存储它
*   覆盖该`-string`方法以返回可变字符串的不可变副本
*   仔细评估是否可以用 NSMutableString 替换内部 ivar。如果您无权访问原始类并且不确定是否对类内部字符串的可变性做出了假设，这可能是一个问题

如果您这样做，您将保持当前界面而不会中断该类的现有用户，同时扩展行为以适应您的新范例。

在可变对象和不可变对象之间进行更改的情况下，您确实需要小心不要破坏对象的 API 契约。

# android - 我们如何远程查看Android 2.3浏览器？

> ID：10794321
> 
> 赞同：0
> 
> 时间：2012-05-29T06:46:53.047
> 
> 标签：android, browser

如何在 PC 上远程查看 android 2.3 浏览器以便调试代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:54:03.630

这太容易了。只需在 PC 上使用 adobe shadow 远程 android 浏览器。要了解更多信息，请查看此链接... [http://labs.adobe.com/technologies/shadow/](http://labs.adobe.com/technologies/shadow/)

# ios - Friend Invite System for iPhone

> ID：10794323
> 
> 赞同：-1
> 
> 时间：2012-05-29T06:47:02.250
> 
> 标签：ios, social-networking

I am looking for information on how to implement a friend system within my iPhone app. The app is going to use a web server to check login's. So would the logical thing be to have the friend system setup through the web server as well? I am clueless on what I need to brush up on to be able to implement such a thing so any information/tutorials/open-source code/guides would be helpful to help me understand how it works. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:08:35.967

询问新用户他们的电子邮件（登录名）和密码。还允许用户通过以下方式邀请他/她的朋友加入您的应用：

1.  直接输入已知的电子邮件地址。
2.  从 iOS 通讯录中选择朋友（您还需要一个电子邮件地址）。

然后只需在服务器端（或服务器端和客户端）维护朋友的电子邮件列表。

# actionscript-3 - Is there any method in as3 that flash can write file's last modified date

> ID：10794327
> 
> 赞同：1
> 
> 时间：2012-05-29T06:47:08.960
> 
> 标签：actionscript-3

Is there any method in as3 that flash can write file's last modified date.

Its stand alone flash application which had external swf loading. I want to check the last modified date of the swf during the loading. please suggest any possible methods. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:50:15.240

在 AIR 中，有`File`带`modificationDate`属性的类。但是在普通的 AS3 中，根本没有文件的概念。如果使用 Loader 加载 swf，则只能获取数据，而**不能**获取文件的属性（如果通过 URL 加载某些内容，文件可能根本不存在。）

# android - Ant build 比 eclipse build 需要更长的时间（通过 ADT）

> ID：10794329
> 
> 赞同：0
> 
> 时间：2012-05-29T06:47:10.550
> 
> 标签：android, performance, ant, build

我有时使用 eclipse 来构建我的 android 项目（使用 ADT 19）。如果我只修改了 1 个文件，那么从 Eclipse（使用 Ctr+B）快速构建。但是如果我使用 ant 脚本（我使用“ant debug”）命令来构建它需要更长的时间。我相信这是因为它正在重新构建所有文件。

基本上，ant build 与 clean build 所需的时间相同。有什么方法可以加快 ant build 的速度吗？

这是蚂蚁脚本的输出......

```
 set-mode-check:

-set-debug-files:

-set-debug-mode:

-debug-obfuscation-check:

-setup:
     [echo] Creating output directories if needed...
     [echo] Gathering info for Astro...
    [setup] Android SDK Tools Revision 19
    [setup] Project Target: Android 2.3.3
    [setup] API level: 10
    [setup] 
    [setup] ------------------
    [setup] Resolving library dependencies:
    [setup] No library dependencies.
    [setup] 
    [setup] ------------------
    [setup] API<=15: Adding annotations.jar to the classpath.
    [setup] 
    [setup] ------------------

-build-setup:

-pre-build:

-code-gen:
     [echo] ----------
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Found Deleted Target File
     [aapt] Generating resource IDs...
     [echo] ----------
     [echo] Handling BuildConfig class...
[buildconfig] No need to generate new BuildConfig.

-pre-compile:

-compile:
    [javac] Compiling 3 source files to C:\Sample\bin\classes

-post-compile:

-obfuscate:

-dex:
      [dex] Found Deleted Target File 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:25:31.167

自己修好了。我的 IDE 设置为清理项目并每次都构建它。它有 ant clean 调试。删除“干净”，它的工作原理......

# python - 如何设置 AxesSubPlot 的宽度？

> ID：10794332
> 
> 赞同：0
> 
> 时间：2012-05-29T06:47:23.247
> 
> 标签：python, matplotlib

我有一个 640 点的数据集，但在子图中绘制它会将**轴缩放**到 700。如何将 x 轴设置为从 0 到 640 本身而不是缩放？

通常，如何将轴设置为任意度量？请解释设置轴的选项。

* * *

这是我正在使用的代码：

```
 self.figure = Figure()
    self.figure.set_size_inches( (15,3) )
    self.figure.set_dpi(80)

    self.picture = self.figure.add_subplot(211)
    #self.picture.xlim(xmax=640)
    self.intensity = self.figure.add_subplot(212)

self.picture.imshow(pic)
#... where projection happens to be 640 px wide
self.intensity.plot(projection) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:08:22.690

假设我正确理解了这个问题，您可以使用该[`Axes.set_xlim()`](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_xlim)功能。您的问题几乎是正确的，但是您的调用`set_xlim`并不完全正确，必须在您绘制数据之后：

```
import matplotlib.pyplot as plt

hf = plt.figure()
hf.set_size_inches( (15,3) )
hf.figure.set_dpi(80)

ha = hf.add_subplot(211)

pic = ...

ha.imshow(pic)

ha.set_xlim((0,640)) # This sets the x axis to range from 0 to 640. 
```

如果您只想调整 x 轴的上限或下限，可以使用 的`left`和`right`关键字参数`Axes.set_xlim`。例如，将 x 轴的上限设置为 640，但将下限保留为您可以使用的任何值

```
ha.set_xlim(right=640) 
```

这里需要注意两点：

*   这些关键字参数不同于`Axes.set_ylim`，后者接受关键字参数`bottom`和`top`。

*   这也不同于`matplotlib.pyplot.xlim`，它接受关键字参数`xmin`and `xmax`（这是@tsyu80 实际上正在谈论的函数），and `matplotlib.pyplot.ylim`，它接受`ymin`and `ymax`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:05:35.690

首先要遵循一些设置代码：

```
import numpy as np
import matplotlib.pyplot as plt

figure, (picture, intensity) = plt.subplots(nrows=2, figsize=(15, 3))
figure.set_dpi(80)
picture.imshow(np.random.uniform(size=(5, 50)))
intensity.plot(np.random.random(size=641)) 
```

请注意对`plt.subplots`(`s`结尾很重要；没有`s`) 的调用需要 matplotlib 1.1 或更高版本。但是您的原始示例设置也可以。另请注意，轴被缩放为 700 而不是 640，因为 matplotlib 更愿意在 700 处绘制一个刻度，并且认为额外的空白并不是什么大问题。

*编辑：*我只是想指出`figsize`参数、`dpi`设置和`picture`轴与原始问题无关，但我添加它们以匹配原始示例。

正如克里斯提到的，你可以打电话

```
intensity.set_xlim((0, 640)) 
```

您可以改为传入关键字参数以仅调整所需的参数：

```
intensity.set_xlim(right=640) 
```

如果您知道需要严格的轴限制，但又不想手动设置，则轴对象可以根据已绘制的数据计算出来。

```
intensity.autoscale(tight=True) 
```

或者，如果您只想缩放`x`-axis：

```
intensity.autoscale(axis='x', tight=True) 
```

注意`autoscale`是特殊的，因为如果您的数据限制发生变化（例如，如果您绘制另一个具有 680 个点的数据集），它将重新调整。

或者，您可以使用以下`margins`方法：

```
intensity.margins(0) 
```

这会将轴限制*和* `x`轴限制设置为数据限制并`y`添加指定的填充——在本例中为 0。如果您实际上想要在 -`y`方向上留一些间距，那么您可以编写：

```
intensity.margins(0, 0.1) 
```

这增加了等于`y`数据间隔的 10% 的间距。这些函数都做你想做的事，但它们不同的调用签名（和行为）在不同的情况下很有用。

*编辑*`set_xlim`：根据 Chris 的建议修复了关键字参数。

# mysql - Django - MySQL 数据库日期时间字段被清除

> ID：10794334
> 
> 赞同：1
> 
> 时间：2012-05-29T06:47:30.437
> 
> 标签：mysql, django, forms, datetime, django-models

当我通过 POST 请求保存 datetime 的值时，它会保存在数据库中（我通过随后查询它来记录该值来验证）。但是当我重新加载页面时，该值设置为 0000-00-00 00:00:00

```
# models.py
class Assignment(models.Model):   
  temp = models.CharField(max_length = 32)
  deadline = models.DateTimeField(default=lambda: datetime.datetime.now() + datetime.timedelta(days=14))

# views.py
def some_function(request):
  deadline = request.POST['deadline']
  assignment.deadline = datetime.timedelta(int(deadline)) + datetime.datetime.now() 
```

当我在整个函数中记录 assignment.deadline 值时，它始终是我所期望的（当前日期 + 无论 POST 请求中的值是什么）。但是，当页面重新加载时，该值设置回 0000-00-00 00:00:00

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:02:58.170

你没有忘记调用你的作业的[save()](https://docs.djangoproject.com/en/dev/ref/models/instances/#saving-objects)方法吗？

# image - Delete width and height attributes from image on DRUPAL 7

> ID：10794336
> 
> 赞同：2
> 
> 时间：2012-05-29T06:47:34.793
> 
> 标签：image, drupal, height, width

How can I delete the automatic attributes that Drupal 7 puts on images?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T18:56:32.390

使用 Drupal 7，您只需要实现`hook_preprocess_image()`，因为每个主题功能都会执行预处理功能，而不仅仅是使用模板文件的功能。在您的情况下，以下代码应该足够了。

```
function mymodule_preprocess_image(&$variables) {
  foreach (array('width', 'height') as $key) {
    unset($variables[$key]);
  }
} 
```

由于`$variables['attributes']`还包含图片属性，下面的代码比较完整。

```
function mymodule_preprocess_image(&$variables) {
  $attributes = &$variables['attributes'];

  foreach (array('width', 'height') as $key) {
    unset($attributes[$key]);
    unset($variables[$key]);
  }
} 
```

将*mymodule*替换为您的模块/主题的短名称。

当您需要更改传递给主题函数/模板文件的变量时，最好使用预处理函数。仅当您需要更改它们返回的输出时，才应覆盖主题函数。在这种情况下，您只需要更改变量，因此无需重写主题函数。使用预处理钩子，您的代码将与未来的 Drupal 版本兼容。

# mysql - MySql将值从最高到最低排序，除了零，分组依据

> ID：10794343
> 
> 赞同：0
> 
> 时间：2012-05-29T06:48:02.280
> 
> 标签：mysql, sorting

这是我的查询

```
SELECT name, price, MIN(price) AS minprice 
FROM c, cp 
WHERE c.id = cp.id 
GROUP BY id 
ORDER BY minprice = 0, minprice ASC 
```

但错误显示“不支持参考 minprice（参考组函数）”。

任何人都可以帮我解决这个问题吗？

我遇到了另一个问题，希望您的专家能告诉我如何解决它

例如：

```
id  name         price
 1     apple          0
 1     green apple    20
 2     orange         10
 3     strawberry     0 
```

由于组 1 的 minprice 以上的数据结果为 0 但我不希望 min price 取零，但如果我给出条件 minprice > 0 原因，这是不正确的

我希望我的结果变成这样

```
2  orange         10 
1  green apple    20
3  strawberry      0 
```

是否可以？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:56:01.827

不要使用 minprice 等参考。而不是直接使用 MIN(price)。

# c# - 如何在 c# 中创建所需的属性？

> ID：10794346
> 
> 赞同：11
> 
> 时间：2012-05-29T06:48:49.223
> 
> 标签：c#

我有一个自定义类的要求，我想让我的一个属性成为必需的。

如何使以下属性成为必需？

```
public string DocumentType
{
    get
    {
        return _documentType;
    }
    set
    {
        _documentType = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-29T06:53:17.727

如果您的意思是“用户必须指定一个值”，则通过构造函数强制它：

```
public YourType(string documentType) {
    DocumentType = documentType; // TODO validation; can it be null? blank?
}
public string DocumentType {get;private set;} 
```

现在您无法在不指定文档类型的情况下创建实例，并且在此之后无法将其删除。您也可以允许`set`但验证：

```
public YourType(string documentType) {
    DocumentType = documentType;
}
private string documentType;
public string DocumentType {
    get { return documentType; }
    set {
        // TODO: validate
        documentType = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:53:40.290

如果你的意思是你希望它**总是**被客户端代码赋予一个值，那么你最好的办法是在构造函数中要求它作为参数：

```
class SomeClass
{
    private string _documentType;

    public string DocumentType
    {
        get
        {
            return _documentType;
        }
        set
        {
            _documentType = value;
        }
    }

    public SomeClass(string documentType)
    {
        DocumentType = documentType;
    }
} 
```

`set`您可以在属性的访问器主体或构造函数中进行验证（如果需要） 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T06:54:42.227

向属性添加必需的属性

```
Required(ErrorMessage = "DocumentTypeis required.")]
public string DocumentType
        {
            get
            {
                return _documentType;
            }
            set
            {
                _documentType = value;
            }
        } 
```

有关自定义属性详细信息，请[单击此处](http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T08:51:31.040

我使用了另一种解决方案，不完全是您想要的，但对我来说很好，因为我首先声明了对象，并且根据具体情况我有不同的值。我不想使用构造函数，因为我不得不使用虚拟数据。

我的解决方案是在类上创建私有集（公共获取），您只能通过方法设置对象上的值。例如：

```
public void SetObject(string mandatory, string mandatory2, string optional = "", string optional2 = "") 
```

# c# - 如何从数据集中获取数据到列表中？

> ID：10794349
> 
> 赞同：0
> 
> 时间：2012-05-29T06:48:56.510
> 
> 标签：c#, asp.net

我是 Web 开发的新手。我在 ASP.net 中使用 C#

我创建了一个包含 TableAdapters 的数据集。

即，对于我的表 Product_family，我创建了 ProductFamilyTableAdapter，其中包括以下列 prfm_description1、prfm_description2、prfm_description3 等...

我有一个方法 GetAllProductFamilies。

之后，我创建了一个包含相同功能的业务逻辑层类 ProductFamiliesBLL.cs。

在我创建的母版页的 Page_Load 事件中

```
ProductFamiliesBLL prfLogic = new ProductFamiliesBLL() 
```

我可以绑定到 Datagrid

```
datagrid1.Datasource = prfLogic.GetAllProductFamilies();
datagrid1.Databind(); 
```

我的问题是我是否可以将此数据添加到数组或列表中以及如何添加？如何逐个读取检索到的行并从特定列的第一行、第二行、...、n 行获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:53:47.207

如下所示，您可以遍历该行的每一行和每一列...。您的代码将是这样的...

```
foreach (DataRow dr in prfLogic.GetAllProductFamilies())
{
   foreach(DataColumn dataColumn in myDataTable.Columns)
    {
        string fieldValue = dr[dataColumn].ToString();   
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T07:04:09.383

你可以这样做。试试这个代码。

```
List<DataRow> list = new List<DataRow>(ds.tables(0).select()); 
```

如果这对您有帮助，请不要忘记标记为答案。

# nginx - Nginx 配置文件仅适用于 ''/"

> ID：10794350
> 
> 赞同：1
> 
> 时间：2012-05-29T06:49:03.623
> 
> 标签：nginx

我将 nginx 设置为一种静态文件服务器。出于某种原因，它仅在我转到 123.123.123.123/ 或 123.123.123.123 时才有效。但是，当我转到 123.123.123.123/static/content/ 或 123.123.123.123/static/content/another.mp3 时，它返回 404 not found。这是位于`/etc/nginx/sites-available`并链接到`/etc/nginx/sites-enabled`. 我真的很困惑为什么它不起作用。

任何指针或提示将不胜感激。

```
服务器 {
    听 123.123.123.123:80；
    服务器名称 ””;

     地点 / {
         根 /srv/主页；
         索引 index.html;
     }

     位置/静态/内容/{
         根/srv/静态/内容；
         索引歌曲.mp3；
     }

}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:38:09.667

查看日志。好像 nginx 试图打开像 /srv/static/content/static/content/file.mp3 这样的路径你需要在这里重写 url，试试这个：

重写 /static/content/(.*) /$1 中断；

# javascript - 父窗口没有通过 javascript 在 asp.net 网页中被禁用

> ID：10794352
> 
> 赞同：0
> 
> 时间：2012-05-29T06:49:28.243
> 
> 标签：javascript, asp.net

我想打开一个弹出窗口并禁用父窗口。下面是我正在使用的代码。由于某种原因，父窗口没有被禁用。我是否需要一些额外的代码或者是什么情况？我还想在父页面被禁用时将其显示为灰色，所以也请帮助我。

```
<script type="text/javascript">

    var popupWindow = null;
    function OpenPopup() {
        popupWindow = window.open("ClockPopUP.aspx", "Time", "scrollbars=no,resizable=no,width=550,height=350,left=300,top=300");
        return false;
    }

    function parent_disable() {
        if (popupWindow && !popupWindow.closed)
            popupWindow.focus();
            document.onmousedown = focusPopup;
            document.onkeyup = focusPopup;
            document.onmousemove = focusPopup;
        }
        function focusPopup() {
            if (popupWindow && !popupWindow.closed) { popupWindow.focus(); }
        } 
    function CheckDateEalier(sender, args)
     {
        var toDate = new Date();
        toDate.setMinutes(0);
        toDate.setSeconds(0);
        toDate.setHours(0);
        toDate.setMilliseconds(0);
        if (sender._selectedDate < toDate)
         {
            alert("You can't select day earlier than today! In Case if you are selecting Previous date then, By default it will take current Date.");
            sender._selectedDate = toDate;
            //set the date back to the current date
            sender._textbox.set_Value(sender._selectedDate.format(sender._format))
        }
        if (sender._selectedDate > toDate) 
        {
            document.getElementById('<%= txtTimeSpent.ClientID%>').disabled = false;
        }
    } 
```

```
<asp:Content ID="Content1" ContentPlaceHolderID="cphTop" runat="server" >
<asp:ScriptManager ID="ScriptManger1" runat="server">
        <%--<Scripts>
            <asp:ScriptReference Path="js/Progress.js"/>
        </Scripts>--%>
    </asp:ScriptManager>
<asp:UpdatePanel runat="server" ID="updProduction">
    <ContentTemplate>
    <div id="counter" >
    </div>
    <div id="content">
    <div id="right">
    &nbsp
        <asp:Button ID="Button1" runat="server" Text="Lunch" CausesValidation="false" CssClass="bigbuttons" style="background:url(../App_Themes/Images/green-box.gif)" Font-Bold="True"  ForeColor="White" Font-Size="Large"  /> <br />
        <asp:Button ID="Button2" runat="server" Text="Break" CausesValidation="false" CssClass="bigbuttons"  style="background:url(../App_Themes/Images/red-box.gif)"  Font-Bold="True"  ForeColor="White" Font-Size="Large"   /> <br />
        <asp:Button ID="Button3" runat="server" Text="L&amp;D Training " CausesValidation="false" CssClass="bigbuttons" style="background:url(../App_Themes/Images/green-box.gif)"   Font-Bold="True"  ForeColor="White" Font-Size="Large"  /> <br />
        <asp:Button ID="Button4" runat="server" Text="Shift End" CausesValidation="false"  CssClass="bigbuttons" style="background:url(../App_Themes/Images/red-box.gif)"  Font-Bold="True"  ForeColor="White" Font-Size="Large"  /> <br />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:38:41.357

您可以创建一个具有灰色半透明背景的 div，将其绝对定位在父窗口的内容之上（使用 z-index）。然后，您可以在此 div 上绑定 onclick 事件以将焦点放在另一个窗口上。

像这样的东西：

```
var disableDiv = document.createElement("div");
disableDiv.style.zIndex = 1000;
disableDiv.style.position="absolute";
disableDiv.style.width = "1024px"; //adjust this to your spec
disableDiv.style.height = "800px"; //adjust this to your spec
disableDiv.style.background = "rgba(100,100,100, .5)";

if(document.attachEvent){   
  disableDiv.attachEvent('onclick', function (e) {
    //do IE stuff
  })
}else{
  disableDiv.addEventListener("click", function (e) {
    //do stuff
  }, false);
}

document.body.appendChild(disableDiv); 
```

# sql-server - Insert Sub Query inside view

> ID：10794355
> 
> 赞同：0
> 
> 时间：2012-05-29T06:49:34.563
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

I have created a view in which I have inserted another select statement and labelled that statement as another fields with "alias"

The view got executed successfully but when trying to fire select statement from view (select * from view) it throws an error of

```
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression 
```

Now I'm aware the reason of this error coming. It is because of that the inner select query returns more than 1 row. I cannot go for TOP 1 as I need to have more than one row.

```
 ALTER VIEW [dbo].[TestView_new]
    AS

            SELECT TOP ( 100 ) PERCENT
                        dbo.DataRepository.PeriodStatus ,
                        dbo.DataRepository.TimesheetName ,
                        dbo.DataRepository.TimesheetLineClass ,
                        dbo.DataRepository.TimesheetLineClassUID ,
                        dbo.MSP_EpmResource_UserView.ResourceName ,
                                                    dbo.MSP_EpmProject_UserView.ProjectName AS ProjectName ,
                        ( SELECT MSP_EpmProject_UserView.ProjectName
                          FROM      dbo.MSP_EpmProject_UserView
                                    LEFT JOIN dbo.DataRepository ON dbo.MSP_EpmProject_UserView.[ProjectUID] = dbo.DataRepository.[ProjectUID]
                          WHERE     LTRIM(RTRIM(dbo.DataRepository.[ProjectUID])) IS NOT NULL
                                    OR LTRIM(RTRIM(dbo.DataRepository.[ProjectUID])) <> '') AS ProjectName2 ,

        FROM    dbo.DataRepository
                    INNER JOIN dbo.MSP_TimesheetActual ON dbo.DataRepository.TimesheetLineUID = dbo.MSP_TimesheetActual.TimesheetLineUID
                    LEFT OUTER JOIN dbo.MSP_EpmResource_UserView ON dbo.DataRepository.ResourceUID = dbo.MSP_EpmResource_UserView.ResourceUID
                    LEFT OUTER JOIN dbo.MSP_EpmProject_UserView ON dbo.DataRepository.ProjectUID = dbo.MSP_EpmProject_UserView.ProjectUID 
```

My Question: Is there any way that the error can be resolved?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:18:26.737

尝试在子查询上获得多个结果是不可能的。您似乎正在尝试在内部查询和主查询的第二个 LEFT OUTER JOIN 上加入 MSP_EpmProject_UserView 和 DataRepository 。如果没有这些表的结构，我猜你有几个不同的 ProjectUID 用于一个项目名称，这就是返回多行的原因。如果是这种情况，DISTINCT 可能会很有用。如果没有，请尝试使用 GROUP BY 子句。再一次，在不知道表格结构的情况下，我无法说出更多信息。希望能帮助到你。

# facebook - facebook api，带有多个给（朋友）的私人消息

> ID：10794356
> 
> 赞同：1
> 
> 时间：2012-05-29T06:49:38.180
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我使用 facebook api 开发 facebook 私人消息以进行邀请。

```
<script>
    FB.init({ appId: 'xxxxxxxxxx', xfbml: true, cookie: true });
    FB.ui({
        method: 'send',
        to: ['1736383768','590528674'],

        // picture: 'http://thinkdiff.net/iphone/lucky7_ios.jpg',
        //Can be page, popup, iframe, or touch. 
        display: 'popup',
        name: 'yyyyyy',
        link: '<%=Request.QueryString["link"]%>'
    });

 </script> 
```

但只添加了大副。

如何给多个好友发私信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:03:26.400

```
 var publish = 

    {
              method: 'stream.publish',
              message: 'Some kind of test',
              uid: uid,
              attachment: {
                name: 'Test',
                caption: 'Facebook API Test',
                description: ('Sure hope it worked!'),
                href: 'http://www.test.com/',
                media: [
                  {
                    type: 'image',
                    href: 'http://test.com/',
                    src: 'http://test.com/image.jpg'
                  }
                ]
              },
              action_links: [
                { text: 'Your text', href: 'http://www.test.com/' }
              ],
              user_prompt_message: 'Share your thoughts about test'
    };

    publish.target_id = friendID;
    FB.ui(publish);

    publish.target_id = friendID;
    FB.ui(publish);

            return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:18:12.267

你不应该使用stream.publish。正如 facebook 所说：“我们正在弃用 REST API，因此如果您正在构建一个新应用程序，则不应使用此功能。而是使用 Graph API 并将 Post 对象发布到`feed`User 对象的连接"

所以，现在你剩下了[send](http://developers.facebook.com/docs/reference/dialogs/send/)和 feed 方法。

您不能用多个用户 ID 填写发送方法（只有当您被 facebook 列入白名单时才可以，但我不太了解如何执行此操作，我也不会指望它）。

您可以使用 feed 方法在许多用户的朋友墙上发布类似这样的内容

```
FB.api('/USERID/feed', 'post', {
  name:postName,
  link:postLink,
  picture:postPicture,
  description:postDescription,
  message:postMessage
}, function (postResponse) { //DO SOMETHING HERE }); 
```

但是这样做，如果有人将其标记为垃圾邮件，您将冒着被 Facebook 删除的风险。

据我所知，通过应用程序向多个朋友发送消息被 facebook 视为不良/垃圾邮件，因此他们不再允许这样做。

您仍然可以通过[应用程序请求对话框](http://developers.facebook.com/docs/reference/dialogs/requests/)（方法 apprequests）邀请任意数量的朋友，但我不确定这是否是您想要的。

# magento - Magento：如何使用 page.xml 文件在自定义 2column-left 页面中添加 js 或 css 文件

> ID：10794357
> 
> 赞同：4
> 
> 时间：2012-05-29T06:49:38.917
> 
> 标签：magento

在 Magento 中，如何使用 page.xml 文件在自定义的两栏左侧页面中添加 js 或 css 文件。

我在 page.xml 的第 168 行使用以下代码

```
<page_two_columns_left translate="label">
  <label>All Two-Column Layout Pages (Left Column)</label>  
  **<reference name="head">
    <action method="addJs"><script>sidebar_menu.js</script></action>
    </reference>**
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-left.phtml</template>  </action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
    </reference>
</page_two_columns_left> 
```

我可以通过将 js/css 放入 2column-left.phtml 来使用它，但我不认为这是一种方便的方式。我想使用 xml 添加。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T07:03:38.770

你的代码上真的有两个星号吗？如果没有，基本上你在做什么是正确的。然而：

```
<handle>
    <reference name="head">
        <action method="addJs"><script>prototype/prototype.js</script></action> <!-- adds a js referencing to the /js directory -->
        <action method="addCss"><stylesheet>css/custom.css</stylesheet></action> <!-- adds CSS looking at the skin/ directories ( in reverse order: base/default, default/default, default/yourtheme, yourpackage/yourtheme -->
        <action method="addItem"><type>skin_js</type><name>js/custom_script.js</name><params/></action> <!-- adds a js at the skin/ directories in the same manner as the above addCss directive -->
    </reference>
<handle> 
```

请注意，可以替换为`default`，`modulename_controller_action`例如`catalog_cart_index`或在您的情况下，`page_two_columns_left`

如果您有自定义皮肤可以使用，最好`local.xml`在内部进行修改。`app/design/frontend/yourpackage/yourtheme/layout/`

尽可能不要触摸目录`page.xml`内部`app/design/frontend/base/default/layout/`。

# cocoa - 可可目标c pdfview未加载

> ID：10794359
> 
> 赞同：0
> 
> 时间：2012-05-29T06:50:12.847
> 
> 标签：cocoa

我是 MAC 开发的新手，我有一个简单的 Cocoa 应用程序，使用`NSViewController`我有一个主视图和 2`NSViewController`并动态翻转它们。我添加`PDFView`了`NSViewController`视图以显示在运行时翻转的 pdf 页面。但是当动态添加视图时我的问题是`PDFView`在调整窗口大小后我可以看到 pdf 页面。我尝试使用`[[pdfViewOutlet1 view] setNeedsDisplay:YES];`两种视图。

```
FirstView *FirstViewController = [[FirstView alloc] initWithNibName:kFirstView bundle:nil];

[FirstViewController setPdfDoc:pdfDoc];
[FirstViewController setPageCnt:pageCnt];
self.myCurrentViewController = FirstViewController;
[[_myCurrentViewController view] setNeedsDisplay:YES];
[transition setSubtype:kCATransitionFromLeft];

[[_myTargetView animator] addSubview: [_myCurrentViewController view]]; 
```

在`awakeFromNib:`第一个视图的方法中，我有：

```
if(pdfDoc==nil )
        return;

[pdfViewOutlet1 setDisplayMode: kPDFDisplaySinglePageContinuous]; //kPDFDisplaySinglePage or    kPDFDisplayTwoUp;
[pdfViewOutlet1 setDocument:pdfDoc];

NSRect myRect = { { 0,0 }, { 450, 200 } };
[pdfViewOutlet1  setFrame: myRect];

[pdfViewOutlet1 goToPage: [[pdfViewOutlet1 document] pageAtIndex: pageCnt]];
[pdfDoc release];
[[pdfViewOutlet1 view] setNeedsDisplay:YES]; 
```

如何在不使用鼠标调整视图大小的情况下查看 pdf 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:19:40.750

问题已解决，我在创建问题的父视图上使用 setWantsLayer。

# c# - How to get device information using Onvif library c#?

> ID：10794361
> 
> 赞同：4
> 
> 时间：2012-05-29T06:50:14.550
> 
> 标签：c#, device, windows-applications, onvif

I am making a c# windows application which collects the devices connected to my network using an open source library Onvif.

i am doing in this way.

```
 ServicePointManager.Expect100Continue = false;
    var endPointAddress = new EndpointAddress("http://ip_address:port/onvif/device_service");
    var httpBinding = new HttpTransportBindingElement();            
    var bind = new CustomBinding(httpBinding);
    var temp = new DeviceClient(bind, endPointAddress);
    var request = new GetDeviceInformationRequest();
    var response = temp.GetDeviceInformation(request); ////// Error Here described bellow
    string firm = response.FirmwareVersion;
    string manu = response.Manufacturer;
    string serial = response.SerialNumber;
    string model = response.Model; 
```

Error Message :: There was no endpoint listening at http:// something:port/onvif/device_service that could accept the message.this is often caused by an incorrect address or SOAP action

can any one help me?

I think i am not making proper connection with the server, is it so? if so then how to resolve it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:32:36.107

也许 WS-DISCOVERY 会为您提供额外的信息。我会尽量不要在摄像机 IP 之后使用任何端口。

当测试向多播地址 239.255.255.250、端口 3702 (WS-Discovery) 发送 UDP 时，这是相机的答案：

```
<?xml version="1.0" encoding="utf-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:d="http://schemas.xmlsoap.org/ws/2005/04/discovery" xmlns:dn="http://www.onvif.org/ver10/network/wsdl">
  <SOAP-ENV:Header>
    <wsa:MessageID>uuid:cb3dea50-aa60-11e1-88b9-00408cb972aa</wsa:MessageID>
    <wsa:RelatesTo>uuid:5bca11ff-61b8-4d07-8a26-90274ad51db8</wsa:RelatesTo>
    <wsa:To SOAP-ENV:mustUnderstand="true">http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:To>
    <wsa:Action SOAP-ENV:mustUnderstand="true">http://schemas.xmlsoap.org/ws/2005/04/discovery/ProbeMatches</wsa:Action>
    <d:AppSequence SOAP-ENV:mustUnderstand="true" MessageNumber="1" InstanceId="1338367479"></d:AppSequence>
  </SOAP-ENV:Header>
  <SOAP-ENV:Body>
    <d:ProbeMatches>
      <d:ProbeMatch>
        <wsa:EndpointReference>
          <wsa:Address>urn:uuid:65a142fc-a41e-11e1-9cc8-00408cb972aa</wsa:Address>
        </wsa:EndpointReference>
        <d:Types>dn:NetworkVideoTransmitter</d:Types>
        <d:Scopes>
            onvif://www.onvif.org/type/video_encoder 
            onvif://www.onvif.org/type/ptz 
            onvif://www.onvif.org/hardware/P5534-E 
            onvif://www.onvif.org/name/AXIS%20P5534-E 
            onvif://www.onvif.org/location/ 
        </d:Scopes>
        <d:XAddrs>
            h##p://zeroconfIP/onvif/device_service 
            h##p://unicastIP/onvif/device_service
        </d:XAddrs>
        <d:MetadataVersion>1</d:MetadataVersion>
      </d:ProbeMatch>
    </d:ProbeMatches>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

尝试发现响应并查看是否有任何 XAddrs 不是您期望的默认值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-05T11:55:01.460

Foscam FI9805E 对 ONVIF GetCapabilities 的肥皂响应

-

-

```
-<tds:GetCapabilitiesResponse>

  -<tds:Capabilities xsi:type="tt:Capabilities">

    -<tt:Analytics xsi:type="tt:AnalyticsCapabilities">

      <tt:XAddr>http://192.168.1.210:8888/onvif/device_service</tt:XAddr>

      <tt:RuleSupport>true</tt:RuleSupport>

      <tt:AnalyticsModuleSupport>true</tt:AnalyticsModuleSupport>

    </tt:Analytics>

    -<tt:Device xsi:type="tt:DeviceCapabilities">

      <tt:XAddr>http://192.168.1.210:8888/onvif/device_service</tt:XAddr>

      -<tt:Network xsi:type="tt:NetworkCapabilities">

        <tt:IPFilter>false</tt:IPFilter>

        <tt:DynDNS>true</tt:DynDNS>

      </tt:Network>

      -<tt:System xsi:type="tt:SystemCapabilities">

        <tt:DiscoveryResolve>true</tt:DiscoveryResolve>

        <tt:DiscoveryBye>true</tt:DiscoveryBye>

        <tt:RemoteDiscovery>false</tt:RemoteDiscovery>

        <tt:SystemBackup>true</tt:SystemBackup>

        <tt:SystemLogging>true</tt:SystemLogging>

        <tt:FirmwareUpgrade>true</tt:FirmwareUpgrade>

        -<tt:SupportedVersions xsi:type="tt:OnvifVersion">

          <tt:Major>2</tt:Major>

          <tt:Minor>21</tt:Minor>

        </tt:SupportedVersions>

      </tt:System>

      -<tt:Security xsi:type="tt:SecurityCapabilities">

        <tt:TLS1.1>false</tt:TLS1.1>

        <tt:TLS1.2>false</tt:TLS1.2>

        <tt:OnboardKeyGeneration>false</tt:OnboardKeyGeneration>

        <tt:AccessPolicyConfig>true</tt:AccessPolicyConfig>

        <tt:X.509Token>false</tt:X.509Token>

        <tt:SAMLToken>false</tt:SAMLToken>

        <tt:KerberosToken>false</tt:KerberosToken>

        <tt:RELToken>false</tt:RELToken>

      </tt:Security>

    </tt:Device>

    -<tt:Events xsi:type="tt:EventCapabilities">

      <tt:XAddr>http://192.168.1.210:8888/onvif/device_service</tt:XAddr>

      <tt:WSSubscriptionPolicySupport>false</tt:WSSubscriptionPolicySupport>

      <tt:WSPullPointSupport>true</tt:WSPullPointSupport>

      <tt:WSPausableSubscriptionManagerInterfaceSupport>false</tt:WSPausableSubscriptionManagerInterfaceSupport>

    </tt:Events>

    -<tt:Imaging xsi:type="tt:ImagingCapabilities">

      <tt:XAddr>http://192.168.1.210:8888/onvif/device_service</tt:XAddr>

    </tt:Imaging>

    -<tt:Media xsi:type="tt:MediaCapabilities">

      <tt:XAddr>http://192.168.1.210:8888/onvif/device_service</tt:XAddr>

      -<tt:StreamingCapabilities xsi:type="tt:RealTimeStreamingCapabilities">

        <tt:RTPMulticast>false</tt:RTPMulticast>

        <tt:RTP_TCP>true</tt:RTP_TCP>

        <tt:RTP_RTSP_TCP>true</tt:RTP_RTSP_TCP>

      </tt:StreamingCapabilities>

    </tt:Media>

    -<tt:PTZ xsi:type="tt:PTZCapabilities">

      <tt:XAddr>http://192.168.1.210:8888/onvif/device_service</tt:XAddr>

    </tt:PTZ>

    -<tt:Extension xsi:type="tt:CapabilitiesExtension">

      -<tt:DeviceIO xsi:type="tt:DeviceIOCapabilities">

        <tt:XAddr/>

        <tt:VideoSources>1</tt:VideoSources>

        <tt:VideoOutputs>0</tt:VideoOutputs>

        <tt:AudioSources>1</tt:AudioSources>

        <tt:AudioOutputs>0</tt:AudioOutputs>

        <tt:RelayOutputs>0</tt:RelayOutputs>

      </tt:DeviceIO>

    </tt:Extension>

  </tds:Capabilities>

</tds:GetCapabilitiesResponse> 
```

# jquery - Trying to build a toggle button that will show and hide a div box using bootstrap and jquery

> ID：10794362
> 
> 赞同：3
> 
> 时间：2012-05-29T06:50:18.730
> 
> 标签：jquery, twitter-bootstrap

I am trying to build a feature into my site where I have a toggle button. When the button is depressed a div should show and when the button is normal, the div should be invisible. There is also a close 'X' on the div itself, which, if clicked, should make the button normal (ie not depressed)

The problem is that I don't know how to un-activate the button. I can remove the class `active`, which updates the DOM, but it comes back from somewhere within bootstrap (Chrome breakpoint on DOM change showed me a stack trace)

Here is my code:

```
 var addInputButton = function(id, txt, clk) {
  var btn = $('<a>')
      .text(txt)
      .attr("id", id)
      .addClass("btn")
      .addClass("btn-mini")
      .attr("data-toggle", "button")
      //.addClass("btn-info")
      .click(clk);
  $('#input_help_section')
    .append(btn);
  return btn;
};

// CHEATSHEET -----------------
(function() {
  var toggleName = "markdownCheatSheetIsVisible";
  var btnId = "markdownCheatsheetToggleButton";
  var box = $("#markdownCheatsheet");

  var showBox = function() {
    var cheatSheetButton = $('#' + btnId);
    if (!cheatSheetButton.hasClass("active")) {
      cheatSheetButton.toggle();
      cheatSheetButton.show();
    }
    box.show();
  };

  var hideBox = function() {
    var cheatSheetButton = $('#' + btnId);
    if (cheatSheetButton.hasClass("active")) {
      cheatSheetButton.toggle();
      cheatSheetButton.show();
    }
    box.hide();
  };

  addInputButton(btnId, "Markdown cheatsheet", function(event) { 
    if ($('#' + btnId).hasClass("active") === false) {
      showBox();
    } else {
      hideBox();
    }
  });

  $("#markdownCheatsheetClose").click(function() {
    hideBox();
  });

  // start shown
  showBox();

})(); 
```

There are a bunch of odd things here:

*   I tried to do `addClass('active')` and `removeClass('active')` in the `showBox` and `hideBox` functions, but a trigger somewhere in bootstrap kept on adding the `active` class back after I removed it.
*   The `toggle` method is defined in bootstrap and as far as I can figure it out is meant to toggle the `active` class, but it also hides it (somewhere) and I can't toggle it away from an active state, which I don't quite understand.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-02T11:19:02.597

我找到了一个不需要 Javascript 的解决方案：

```
<div class="btn-group" data-toggle="buttons-checkbox">
    <a class="btn collapse-data-btn" data-toggle="collapse" href="#details">Show details</a>
</div>
<div id="details" class="collapse">
    <p>Details details details details details details details details...</p>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T20:57:57.937

我认为 periklis 是正确的，你有几个到多个切换修饰符。

我在这里创建了一个 jsfiddle.net 示例，因为您缺少几个小的 html 标记来使您的代码正常工作。见[http://jsfiddle.net/WHXbm/](http://jsfiddle.net/WHXbm/)

简而言之，这里是变化：

从 addInputButton 中删除：

```
.attr("data-toggle", "button") 
```

从 showBox() 中删除

```
if (!cheatSheetButton.hasClass("active")) {
      cheatSheetButton.toggle();
      cheatSheetButton.show();
} 
```

添加到 showBox()

```
$("#markdownCheatsheetToggleButton").addClass("active"); 
```

从 hideBox() 中移除

```
if (cheatSheetButton.hasClass("active")) {
      cheatSheetButton.toggle();
      cheatSheetButton.show();
} 
```

添加到 hideBox()

```
$("#markdownCheatsheetToggleButton").removeClass("active"); 
```

# css - CSS Image Hover with Rotation - Web Kit 问题/在 Firefox 中运行良好

> ID：10794365
> 
> 赞同：1
> 
> 时间：2012-05-29T06:50:23.843
> 
> 标签：css, webkit, hover, rotation, css-transforms

*示例链接已删除*

问题：Webkit 浏览器（Chrome 和 Safari）对我在页面上创建的旋转类有问题。如果我删除内容 div 上的旋转类，悬停时出现的大图像会出现在正确的位置。

Firefox 对旋转的内容 div 没有任何问题。我在 Mac 上，所以我无法测试 IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:15:38.237

你已经给了这个`.thumbnail`类`position:relative`，所以它正在创建它自己的位置上下文。您给出的固定位置`.thumbnail:hover span`将使用它的 0 顶部位置作为`.thumbnail`父级的顶部。

只需取走并将位置设置为`position: relative`您想要放置的值（相对于现在，相对于窗口的顶部，因为它具有.`.thumbnail``top``.thumbnail:hover span``position: fixed`

希望我的解释足够清楚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:19:28.737

首先，只在里面设置就够了，`.thumbnail:hover span{visibility:visible}` 剩下的代码应该是这样的

```
.thumbnail span { 
    position: absolute;
    padding: 0px;
    visibility: hidden;
    color: black;
    text-decoration: none;
    height:530px;
    overflow: hidden;
    top: 0;
    left: 460px; 
} 
```

位置应该是一样的。在您的代码中，您编写了*absolute*但在悬停模式下设置了*fixed*。如果您希望图像出现在同一位置，则应将其相对于***#portfolio***而不是***.thumbnail 定位***。所以添加这些：

```
#portfolio {position:relative} 
```

消除

```
.thumbnail {position:relative} 
```

# android - 网络服务问题

> ID：10794369
> 
> 赞同：1
> 
> 时间：2012-05-29T06:50:38.820
> 
> 标签：android, web-services, soap, ksoap2

我正在使用 Soap WEB 服务，但我遇到了这样一个问题：soap:Server' faultstring: 'Server was unable to process request。---> 位置 0 处没有行。故障者：'空

我的代码是

```
public class GetData extends Activity {
    private static final String SOAP_ACTION="http://xxx.mobi/GetMobileContentMetaData";
    private static final String METHOD_NAME="GetMobileContentMetaData";
    private static final String NAMESPACE ="http://xxx.mobi/";
    private static final String URL = "http://webservices.xxx.mobi/MobileLMSServices.asmx";
    SoapObject request;
    Button submit;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getdata);   
        submit=(Button)findViewById(R.id.submit);
        submit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                request = new SoapObject(NAMESPACE, METHOD_NAME);
                request.addProperty("SiteURL","http://heaklthcare.xxx.mobi/");
                request.addProperty("ContentID","62b90739-57b9-47cc-884a-8be2ef265304");
                request.addProperty("UserID",809);
                request.addProperty("DelivoryMode",2);
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet = true;
                SoapObject result = null;
                envelope.setOutputSoapObject(request);
                AndroidHttpTransport sab = new AndroidHttpTransport(URL);
                sab.debug = true;
                try {
                    sab.call(SOAP_ACTION, envelope);
                    if (envelope.getResponse() != null) 
                    {
                        result = (SoapObject) envelope.bodyIn;
                        for (int i1 = 0; i1 < 1; i1++) {
                            Object property = result.getProperty(i1);
                            if (property instanceof SoapObject) {
                                SoapObject countryObj = (SoapObject) property;
                                Log.d("country" ,"object"+countryObj);
                            }
                        }
                    }
                }catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:33:48.420

应该是服务器返回的错误。如果可以，请从 .net 调用 Web 方法（或者如果您有 Web 服务的 localhost 副本，请在浏览器中输入参数）。

今天早上我遇到了这个错误，然后我做了一个小的（5 行）.net 应用程序来调用 web 方法。然后我收到了更清晰的错误消息。也证明我的java代码一直没有问题。

# android - 在 Android 模拟器上运行的 mGWT 应用程序的 JSONP 调用失败

> ID：10794370
> 
> 赞同：0
> 
> 时间：2012-05-29T06:50:40.947
> 
> 标签：android, json, gwt

Rest Web 服务使用 Jersey 从 GUICE 框架公开，我可以从浏览器 url 测试这些服务。此外，我们有从 GWT 客户端到服务器的 RPC 调用，我用 JSONP 替换了这个 Rest 服务调用，它工作得很好。

现在，应用程序使用 mGWT 移动小部件进行了修改，并部署在 Android Emulator 上。但是在测试时，它总是会因为调用 restful WS 的超时错误而失败。我在 LogCat 中看不到任何日志，也没有调用服务。

这里可能是什么问题？我没有使用 gwt-phonegap，而是直接编译代码并按照 Cordova 站点中针对 android apk 文件的建议创建 phonegap 项目。

请建议。

# jquery - 传递参数时遇到问题，缓存值在 jquery mobile 中传递

> ID：10794382
> 
> 赞同：0
> 
> 时间：2012-05-29T06:51:41.293
> 
> 标签：jquery, jquery-mobile

我通过解析 xml 数据动态生成和添加列表项。

代码看起来像

```
 $(document).ready(function(){       

    var xml = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><contactDetails xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><user><name>Abc </name><phone>1234</phone></user><user><name>Xyz</name><phone>45678</phone></user></contactDetails>",

    xmlDoc = $.parseXML(xml),
    $xml = $( xmlDoc),
    $title = $xml.find("user").each(function(){
    name = $(this).find("name").text();
    phone = $(this).find("phone").text();
    txt = '<li><a  href="#details?phone='+escape(phone)+'">' + name +'</a></li>';   
    $('#myul').append(txt);     
    });     

    $('#myul').listview('refresh');
    }); 
```

其中 details 是内部页面

```
<div id="details" data-role="page" >
<div data-role="header">
    <a data-role="button" data-rel="back" data-icon="back">back</a>
    <h1>Contacts</h1>
</div>
<div data-role="content" >    

</div> 
```

**预期行为：**

单击列表项时，需要在其他页面上显示其详细信息。在这种情况下的电话号码。

**问题：**

按下后退按钮后，最后单击的项目的值会在单击项目时传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:34:57.940

添加`data-ajax="false"`以摆脱问题

# java - 读取 Socket 服务器中的特殊字符

> ID：10794384
> 
> 赞同：0
> 
> 时间：2012-05-29T06:51:44.390
> 
> 标签：java, networking

我正在使用 Java Networking API 创建客户端/服务器。我的客户端会在消息前后向服务器发送特殊的 unicode 字符。在消息之前它将发送`\uc001B`和消息之后`\uc00C`。再次成功发送消息后，客户端将发送`\r`到服务器。服务器可以通过接收到这个来识别消息发送完成。但我的问题是如何在服务器中检查来自客户端的消息是否有`\r`.

```
DataOutputStream outToServer = new DataOutputStream( clientSocket.getOutputStream());
BufferedReader inFromServer = new BufferedReader(new InputStreamReader(
    clientSocket.getInputStream()));
outToServer.writeBytes("\uc001B");
outToServer.flush();
outToServer.writeBytes(message.toString());
outToServer.writeBytes("\uc001C");
outToServer.flush();
outToServer.writeBytes("\r");
outToServer.flush(); 
```

这是我的服务器代码，用于从客户端读取消息

```
in = new BufferedReader(new InputStreamReader(m_clientSocket.getInputStream()));
out = new PrintWriter(new OutputStreamWriter(   m_clientSocket.getOutputStream()));
String receivingMessage = "";
while (m_bRunThread) {
   String clientCommand = in.readLine().toString();
   receivingMessage += clientCommand;
   System.out.println("Client Says :" + clientCommand);
   if (in.equals("\r")) {
      System.out.print("Message Receiving from Client Done : "+ m_clientID);
      m_bRunThread = false;
   }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:12:35.810

您正在使用`readLine().`它删除换行符，无论它是什么：它理解所有这些。因此，您不可能说出换行符是什么。你也不可能在乎。您阅读的每一行都以换行符结尾。但是，将 STX 和 ETX 与 Reader 结合使用，您处于相当危险的境地。您似乎有一个协议定义问题：您正在发送 STX/ETX 并且*还*期待换行符。为什么？

# asp.net-mvc-3 - MVC3 应用程序的查询/搜索构建器控件？

> ID：10794385
> 
> 赞同：3
> 
> 时间：2012-05-29T06:51:47.587
> 
> 标签：asp.net-mvc-3, search

我要求我们的网络应用程序有一个相当复杂的“搜索引擎”，它允许用户指定一些标准来对我们的数据库进行搜索。

我需要的是用户从一组下拉框中设置他们的搜索条件。这将包括 >、<、!=、== 逻辑条件以及能够将（AND 和 OR）多个条件组合在一起。

我见过的例子

*   搜索 TFS 票证时 VS2010 内部的搜索引擎很棒（虽然不是 Web 应用）
*   [http://opl.bibliocommons.com/search](http://opl.bibliocommons.com/search)

有很多网站都有这种搜索功能，所以与其重新发明轮子，我认为可能有一些现成的组件和/或技术可以查看 - 但是我'我很难找到这样的东西。

任何人都可以建议一些我们可能会考虑的控件吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:58:32.920

Lucene 是最常见和最好的之一。他们制作了一个.Net 版本。

# iphone - 如何在 iOS SDK 中使用 Glyph 获取 UIBezierpath

> ID：10794388
> 
> 赞同：9
> 
> 时间：2012-05-29T06:52:02.630
> 
> 标签：iphone, objective-c, ipad, uibezierpath, glyph

我们如何`UIBezierPath`从使用`Glyph`iOS SDK 的角色中获取信息。

我经历过[这个](https://github.com/ole/Animated-Paths)，但它显示双线，我只想要单线..

因为我是这项研究的新手..请帮我解决这个问题..我不想要任何代码，但想从你那里得到参考..

实际上我想`UIBezierPath`描述每个字母的形状..

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:04:35.203

我碰巧不得不为我正在从事的一个项目这样做，我发现这个参考非常有用：[Low-level text rendering](http://www.codeproject.com/Articles/109729/Low-level-text-rendering)。

我用来从字形创建路径的核心代码（针对您的情况进行了调整）：

```
CGGlyph glyph = ...;
CTFontRef font = CTFontCreateWithName((__bridge CFStringRef)@"Helvetica", 25, NULL);
CGAffineTransform transform = CGAffineTransformIdentity;
CGPathRef path = CTFontCreatePathForGlyph(font, glyph, &transform);
UIBezierPath *bezier = [UIBezierPath bezierPathWithCGPath:path];
CGPathRelease(path);
CFRelease(font); 
```

# javascript - 选择的 jquery 插件的输入限制

> ID：10794389
> 
> 赞同：0
> 
> 时间：2012-05-29T06:52:18.203
> 
> 标签：javascript, jquery

我想使用以下代码将输入（字母数字）限制为文本字段：

```
$('input').bind('keypress', function (event) {
    var regex = new RegExp("^[a-zA-Z0-9]+$");
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    if (!regex.test(key)) {
       event.preventDefault();
       return false;
    }
}); 
```

上面的代码在标准输入字段上效果很好，但是当我输入由 Chosen 生成的字段时，该功能不适用。选择的插件确实会生成一个包含`<input type="text">`但`$('input')`似乎没有触及它的 div。我猜这是由于应用上述代码的时间..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:54:39.733

而不是`.bind()`，考虑使用[`.on()`](http://api.jquery.com/on/)which 将适用于动态创建的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:01:15.387

杰克的回答有效。但要理解的重要一点是按键事件会冒泡，因此您可以在节点层次结构的任何位置，在非动态生成的节点处捕获它。

[http://jsfiddle.net/KWv7Z/6/](http://jsfiddle.net/KWv7Z/6/)

```
$(document).bind('keypress', function (event) {
    // Will fire for all elements, we only care for inputs
    // Also allow navigation keypresses
    if (event.target.tagName.toUpperCase() != "INPUT" ||
            $.inArray(event.which, [8,9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46]) ) {
      return;
    }
    var regex = new RegExp("^[a-zA-Z0-9]+$");
    // jQuery already normalizes event.which
    var key = String.fromCharCode(event.which);
    if (!regex.test(key)) {
       event.preventDefault();
       return false;
    }
}); 
```

This is also more memory friendly since it doesn't install a separate handler per input on the page.

# android - 安卓模拟器中的蓝牙

> ID：10794390
> 
> 赞同：4
> 
> 时间：2012-05-29T06:52:21.597
> 
> 标签：android, bluetooth

在我的应用程序中，我正在使用蓝牙功能，但是蓝牙适配器返回 null 意味着该模拟器中没有蓝牙选项（使用 2.1 版）。任何人请帮助我是否可以在模拟器中使用蓝牙。如果没有，那么如何我可以检查我的申请吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:02:56.820

avd内部有一些限制，毕竟这不是一个真实的设备，只是一个真正的android设备的模拟。

根据[Android 开发人员指南](http://developer.android.com/guide/developing/devices/emulator.html)，以下是 avd 的限制：

模拟器限制

模拟器的功能限制包括：

*   不支持拨打或接听实际电话。但是，您可以通过模拟器控制台模拟电话（拨打和接听）。
*   不支持 USB 连接
*   不支持连接设备的耳机
*   不支持确定网络连接状态
*   不支持确定电池充电水平和交流充电状态
*   不支持确定 SD 卡插入/弹出
*   不支持蓝牙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T19:00:24.053

限制文档似乎已过时。请参阅[http://wiki.qemu.org/download/qemu-doc.html](http://wiki.qemu.org/download/qemu-doc.html)。-bt 选项于 2008 年实施[http://copilotco.com/mail-archives/qemu.2008/msg08744.html](http://copilotco.com/mail-archives/qemu.2008/msg08744.html)。

由于 -bt 可用，如何在模拟器中启用蓝牙？target/board/emulator/BoardConfig.mk`BOARD_HAVE_BLUETOOTH := true`本身并没有启用蓝牙。

# android - Android：蓝牙、wifi、网络信息与广播接收器在设备/模拟器中不起作用

> ID：10794402
> 
> 赞同：2
> 
> 时间：2012-05-29T06:53:00.663
> 
> 标签：android, bluetooth, broadcastreceiver, wifi

我被我的应用程序卡住了，我使用广播接收器在 wifi、蓝牙打开/关闭时显示 toast

当我添加蓝牙代码时，应用程序崩溃了，在此之前，对于 wifi 和网络连接，它在模拟器中显示“已连接”（尽管模拟器中的 wifi /网络连接已关闭）

如何解决这个问题，我不知道我错在哪里。

这是我的代码

```
public class BroadCastSampleActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.registerReceiver(this.mConnReceiver, new IntentFilter(
            ConnectivityManager.CONNECTIVITY_ACTION));
        this.registerReceiver(this.mConnReceiver, new IntentFilter(
            WifiManager.WIFI_STATE_CHANGED_ACTION));
        this.registerReceiver(this.mConnReceiver, new IntentFilter(
            BluetoothAdapter.ACTION_STATE_CHANGED));
    }

    private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {

        public void onReceive(Context context, Intent intent) {
            boolean noConnectivity = intent.getBooleanExtra(
                ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent
                .getStringExtra(ConnectivityManager.EXTRA_REASON);
            boolean isFailover = intent.getBooleanExtra(
                ConnectivityManager.EXTRA_IS_FAILOVER, false);
            boolean noConnectivity1 = intent.getBooleanExtra(
                BluetoothAdapter.ACTION_STATE_CHANGED, false);
            boolean isfailover = intent.getBooleanExtra(
                BluetoothAdapter.EXTRA_STATE, false);
            NetworkInfo currentNetworkInfo = (NetworkInfo) intent
                .getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            NetworkInfo otherNetworkInfo = (NetworkInfo) intent
                .getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);
            NetworkInfo currentwifiInfo = (NetworkInfo) intent
                .getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
            NetworkInfo otherwifiInfo = (NetworkInfo) intent
                .getParcelableExtra(WifiManager.NETWORK_STATE_CHANGED_ACTION);
            NetworkInfo currentbluetoothinfo = (NetworkInfo) intent
                .getParcelableExtra(BluetoothAdapter.EXTRA_STATE);
            NetworkInfo otherbluetoothinfo = (NetworkInfo) intent
                .getParcelableExtra(BluetoothAdapter.ACTION_STATE_CHANGED);
            if (currentNetworkInfo.isConnected()) {
                Toast.makeText(getApplicationContext(),
                    "Internet Connected", Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(),
                    " Internet Not Connected", Toast.LENGTH_LONG).show();
            }
            if (currentwifiInfo.isConnected()) {
                Toast.makeText(getApplicationContext(), "wifi Connected",
                    Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(),
                    " WIFI Not Connected", Toast.LENGTH_LONG).show();
            }
            if (currentbluetoothinfo.isAvailable()) {
                Toast.makeText(getApplicationContext(),
                    "Bluetooth Connected", Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(),
                    "Bluetooth Not Connected", Toast.LENGTH_LONG).show();
            }
        }
    };
} 
```

这是我的清单

```
 <uses-sdk android:minSdkVersion="10" />
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WIFI_STATE_CHANGED" />
 <uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".BroadCastSampleActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

当我添加蓝牙代码时，logcat 显示这些错误

```
05-29 06:39:27.457: E/AndroidRuntime(384): FATAL EXCEPTION: main
05-29 06:39:27.457: E/AndroidRuntime(384): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000000 (has extras) } in com.raghav.broadcast.BroadCastSampleActivity$1@40518c50
 05-29 06:39:27.457: E/AndroidRuntime(384):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
 05-29 06:39:27.457: E/AndroidRuntime(384):     at android.os.Handler.handleCallback(Handler.java:587)
05-29 06:39:27.457: E/AndroidRuntime(384):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-29 06:39:27.457: E/AndroidRuntime(384):  at android.os.Looper.loop(Looper.java:123)
05-29 06:39:27.457: E/AndroidRuntime(384):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-29 06:39:27.457: E/AndroidRuntime(384):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 06:39:27.457: E/AndroidRuntime(384):  at java.lang.reflect.Method.invoke(Method.java:507)
 05-29 06:39:27.457: E/AndroidRuntime(384):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-29 06:39:27.457: E/AndroidRuntime(384):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-29 06:39:27.457: E/AndroidRuntime(384):  at dalvik.system.NativeStart.main(Native Method)
05-29 06:39:27.457: E/AndroidRuntime(384): Caused by: java.lang.NullPointerException
05-29 06:39:27.457: E/AndroidRuntime(384):  at com.raghav.broadcast.BroadCastSampleActivity$1.onReceive(BroadCastSampleActivity.java:80)
 05-29 06:39:27.457: E/AndroidRuntime(384):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
05-29 06:39:27.457: E/AndroidRuntime(384):  ... 9 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:29:35.730

模拟器不支持蓝牙和 WiFi。您必须使用真实的设备。

# meteor - Meteor - 使用订阅数据自动更新画布？

> ID：10794409
> 
> 赞同：11
> 
> 时间：2012-05-29T06:53:33.447
> 
> 标签：meteor

我可能遗漏了一些东西，但似乎 Meteor 的“魔法”围绕着将数据绑定到 DOM 元素，并通过把手更新文本和 HTML 片段：http: [//docs.meteor.com/#reactivity](http://docs.meteor.com/#reactivity)

这很棒，*但是*，当尝试编写一个在 <canvas> 元素中显示实时数据的流星应用程序时，我无法弄清楚当实时数据更改时更新我的​​画布的“流星方式”，因为画布是通过 JS 填充的代码如：

```
var g = canvas.getContext('2d')
g.fillRect(x, y, w, h) 
```

而不是 HTML 模板中的数据支持文本。

我正在尝试使用 Meteor.Collection 中的数据在画布上绘图。

我唯一的想法是将画布绘图 JS 代码嵌入 HTML 模板中由把手变量填充的脚本标记中，但这似乎是错误的，因为流星的事件和数据绑定代码已经是客户端 JS。

是否有某种方法可以监听实时数据更改，从而触发通过 JS 而不是 HTML 元素/文本在画布上绘图？

如果我能以某种方式澄清这个问题，请告诉我

**更新：** Tom 在下面的回答让我注意到 Meteor.deps，它看起来允许在反应式上下文中执行任意代码：http: [//docs.meteor.com/#on_invalidate](http://docs.meteor.com/#on_invalidate)

如果可行，我将尝试并在此处更新。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T07:12:02.823

也许您的问题的答案是使用`Collection.observe`（[http://docs.meteor.com/#observe](http://docs.meteor.com/#observe)）并在各种回调中触发相关的重绘代码。

例如，类似：

```
Rectangles.observe({
  added: function(rect) {
    var g = canvas.getContext('2d');
    g.fillRect(rect.x, rect.y, rect.w, rect.h);
  },
  // etc
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T17:10:07.330

这有效：

```
var Shapes = new Meteor.Collection('shapes')

if (Meteor.is_client) {
  // Function that redraws the entire canvas from shapes in Meteor.Collection
  function drawShapes() {
    var shapes = Shapes.find({})
    shapes.forEach(function(shape) {
      // draw each on canvas
    })
  }

  var startUpdateListener = function() {
    // Function called each time 'Shapes' is updated.
    var redrawCanvas = function() {
      var context = new Meteor.deps.Context()
      context.on_invalidate(redrawCanvas) // Ensures this is recalled for each update
      context.run(function() {
        drawShapes()
      })
    }
    redrawCanvas()
  }

  Meteor.startup(function() {
    startUpdateListener()
  })
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-30T16:00:32.683

我在更新画布时遇到了一些麻烦，所以我创建了这个简单的游戏演示： [https ://github.com/randompast/Meteor-SimpleGame](https://github.com/randompast/Meteor-SimpleGame)

# php - 在 5-7 天内查找下一个营业日期，在 php 中跳过周末或非工作日？

> ID：10794413
> 
> 赞同：0
> 
> 时间：2012-05-29T06:53:49.047
> 
> 标签：php, api, date

我正在与一家购物网站合作，该网站通过英国邮件交付货物，预计交付时间为 7 天。

所以我将预计交货日期设置为：

```
 // gives me the date 7 days into the future
      $expectedDate=Date('Y:m:d', strtotime("+7 days")); 
```

一切正常，直到我传递日期的英国邮件 API 返回以下错误：

```
[Errors] => stdClass Object
  (
      [UKMWebError] => stdClass Object
          (
              [Code] => 8200
              [Description] => Validation failed. 05/06/2012 is not a working day.
          )
   ) 
```

例如，2012 年 5 月 6 日是星期二，但我不知道这是假期。因为是假期，所以被拒绝了。

我想做的事：

1.  确定 5-7 天范围内的预期交货日期

2.  跳过周末

3.  如果我在数组中有假期列表，则跳过这些日期或给我 5-7 天范围内的日期

4.  我还想补充一件事，例如现在需要跳过的假期数组只包含这个值你能更新你的答案“05/06/2012”吗

是否可以？有人可以展示一个工作示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:23:18.687

```
$holidays = array('05/06/12');

$deliverable_days = 1;
$any_day = 1;

while($deliverable_days<=7)
{

 $ts= strtotime("+{$any_day} days");
 $this_date = date('d/m/Y',$ts);
 $this_day = date('w',$ts);

 if(!in_array($this_date,$holidays) && !in_array($this_day,array(0,6)))
 {
  $deliverable_days++;
 }
 if($deliverable_days==7)
 {
   break;
 }
 $any_day++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:09:36.487

这不会解决您的问题，但您可以使用它来检查周末、节假日或工作日的未来日期：

```
// M/d/Y 
$holidays = array(
    '05/06/2012',
    '10/07/2012',
);

$expectedDate = strtotime("+7 days"); 

if (in_array(date('l', $expectedDate), array('Saturday', 'Sunday'))) {
    echo 'weekend';
} else if (in_array(date('m/d/Y', $expectedDate), $holidays)) {
    echo 'holiday';
} else {
    echo date('Y:m:d', $expectedDate) . ' is working day!';
} 
```

**更新：**

Pinaldesai 的回答非常好。可以这样简化：

```
$offset = date('N') < 5 ? 7 : (5 + (7 - date('N')));
$delivery_date = date('Y/m/d', "+$offset days")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:15:59.903

以下代码将为您提供 5-7 天之间的交货日期，不包括周末

```
$working_day    = date('N');

if($working_day < 5)
{
    $delivery_date = date('Y/m/d', strtotime("+7 days")); 
}
else
{
    if($working_day == 6)
        $delivery_date = date('Y/m/d', strtotime("+6 days")); 
    if($working_day == 7)
        $delivery_date = date('Y/m/d', strtotime("+5 days")); 
} 
```

# iphone - 从图像数组中随机设置按钮的背景

> ID：10794416
> 
> 赞同：0
> 
> 时间：2012-05-29T06:54:10.047
> 
> 标签：iphone

```
else if (setIndexPath == 4)
{
    viewWithButtons.frame = CGRectMake(5, 40, 310, 390);

    int ch = 6;
    int cv = 6;

    for ( int i = 0 ; i < cv ; ++i )
    {
        for ( j = 0 ; j < ch ; ++j )
        {
            btnMatrix = [[[UIButton alloc] initWithFrame:CGRectMake(10+pw*j, 51+ph*i, width, height)] autorelease];
            btnMatrix.tag = i*ch+j;
            btnMatrix.userInteractionEnabled = TRUE;
            [btnMatrix addTarget:self action:@selector(changeImage:) forControlEvents:UIControlEventTouchDown];
            [btnMatrix setBackgroundImage:imgDefaultBG forState:UIControlStateNormal];

            [viewWithButtons addSubview:btnMatrix];

            [arrButton addObject:btnMatrix];
        }
    }
}
[self.view addSubview:viewWithButtons]; 
```

我根据所选矩阵动态生成按钮，如 4 * 4、4 * 5、4 * 6、5 * 6、6 * 6 等。

按钮完全按照上面选择的矩阵设置（代码为 6 * 6 矩阵）。

现在我必须设置这些按钮的随机背景图像。

我无法设置这种动态按钮的背景。

有没有任何有效的方法可以为每个单独的按钮以随机顺序动态设置背景？

```
 for (intimg = 1; intimg <= 15; intimg++)
    {
        arr_FirstSet = [[NSMutableArray alloc] initWithObjects:[NSString stringWithFormat:@"%d_f_2.png",intimg], nil];
    }
    for (intimgSET2 = 1; intimgSET2 <= 15; intimgSET2++) {
        arr_SecondSet = [[NSMutableArray alloc] initWithObjects:[NSString stringWithFormat:@"%d_s_2.png",intimgSET2], nil];
    } 
```

我正在将这种格式的图像添加到 NSMutableArray。

如何从上面使用的数组中选择随机图像。我必须匹配两个数组图像并在按钮上给出结果。如果两者都匹配，假设我按下一个按钮将显示 1_f_2.png 并按下另一个按钮将显示 1_s_2.png （作为背景）然后这两个按钮将从视图中删除。

我已经尝试了很多逻辑来得到这个。

我没有得到我感兴趣的按钮触地得分。

请建议任何代码片段或链接或代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:03:52.767

```
- (UIImage*)randomImage {
    NSInteger imageCount = [[self imageArray] count]
    return [[self imageArray] objectAtIndex:arc4random() % imageCount]; 
} 
```

如果你想要配对。使用带有两个图像的字典，或包含两个图像的简单类。

# .net - GAC 文件实际上位于何处？

> ID：10794417
> 
> 赞同：3
> 
> 时间：2012-05-29T06:54:12.077
> 
> 标签：.net

`GAC`关于文件位置，我有些不明白...

当我在`GAC`-哪里安装一些组件时，实际的组件位置在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:59:20.437

它是`%WINDIR%\Assembly`

PS 查看此文件夹的最佳方法是使用 Windows 资源管理器，因为自定义文件管理器可能会显示不需要的技术文件夹等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:57:39.317

程序集缓存通常存储在`%windir%\assembly`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:37:54.983

他们在

> %windir%\程序集

它通过资源管理器中的外壳扩展显示。

如果您想查看底层物理文件将驱动器映射到该位置，例如。

> \%compname%\c$\Windows\程序集

你会得到完整的视图。

# jslint - 如何使用 jslint 纠正“预期字符串而不是看到”“”？

> ID：10794420
> 
> 赞同：9
> 
> 时间：2012-05-29T06:54:19.203
> 
> 标签：jslint

我有一个正则表达式：

```
return (str+'').replace(/^(.)|\s(.)/g, function ( $1 ) { return $1.toUpperCase ( ); } ); 
```

我收到以下 jslint 错误：

```
Expected String instead saw "" 
```

我该如何纠正这个错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T20:12:25.167

它想让你使用

```
String(str) 
```

而不是

```
(str+'') 
```

将 String 函数作为“cast”调用是一种将某些内容从其他类型转换为字符串的更简洁的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T10:28:05.300

```
Use toString();
(new Date()).getTime()+""; instead (new Date()).getTime().toString(); 
```

# javascript - 混淆javascript中的数字比较

> ID：10794422
> 
> 赞同：0
> 
> 时间：2012-05-29T06:54:33.557
> 
> 标签：javascript, comparison

代码很简单：

```
 var i = 0.5;
    if (i < 0) {
        console.log('small');
    } else {
        console.log('big');                    
    } 
```

但结果是`big!`，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:56:13.230

if 语句的 else 部分计算`i >= 0`. 和`0.5 >= 0`。

也许你想写：

```
if (i >= 0 and i < 1) {
    console.log('small');
} 
```

但我不知道你会认为什么小;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:06:02.127

您的代码没有任何问题，让我们深入研究一下您的“if”条件，您会得到**0.5 > 0的答案**

你可能想写这个

```
 var i = 0.5;
        if (i > 0) {
            console.log('big');
        } else {
            console.log('small');                    
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T07:11:47.167

你的代码逻辑是完全正确的......

```
0.5 is greater than 0 
```

# iphone - 如何从iphone中的视频中获取帧

> ID：10794429
> 
> 赞同：0
> 
> 时间：2012-05-29T06:55:08.533
> 
> 标签：iphone, video, frame

我想从视频中获取 Frame 并将其显示在 UIImageView 上。请帮助我如何从视频中获取帧并将其显示在我的 UIImageview 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:52:29.867

现在我已经使用这段代码解决了这个问题

```
UIImage *thumbnail = [moviePlayer thumbnailImageAtTime:0.0
  timeOption:MPMovieTimeOptionNearestKeyFrame]; 

imageView.image = thumbnail; 
```

谢谢
dheerendra singh

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:21:58.810

尝试

```
 CGRect rect = [UIScreen mainScreen].applicationFrame ; 
```

它将以点为单位返回应用程序屏幕区域的框架（即整个屏幕减去状态栏，如果可见）

如果你蚂蚁生成图像。你也可以试试 AVAssetImageGenerator。

# php - 使用复选框、php 和 mysql 更新数据库表

> ID：10794430
> 
> 赞同：0
> 
> 时间：2012-05-29T06:55:08.833
> 
> 标签：php, mysql, checkbox

我正在尝试创建一个表单，允许您使用复选框向数据库上的用户添加管理员控件。目前我可以列出用户。当用户选中复选框并单击提交时，我不知道如何更新数据库。这是我到目前为止所拥有的；

```
<table class="fileTable" border="1">
  <tr>
    <th scope="col">Username</th>
    <th scope="col">First Name</th>
    <th scope="col">Surname</th>
    <th scope="col">Email Address</th>
    <th scope="col">Enabled</th>
  </tr>
  <?php do { ?>

  <tr>

    <td><?php echo $row_Recordset1['username']; ?></td>
    <td><?php echo $row_Recordset1['fName']; ?></td>
    <td><?php echo $row_Recordset1['sName']; ?></td>
    <td><?php echo $row_Recordset1['email']; ?></td>

    <form action="" method="post">
    <td>
    <input type="checkbox" name="enable" id="enable"></td>
    </td>

  </tr>
  <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?>
     <input class="submit" type="submit" value="Submit" name="submit">
    </form>
</table>

if(isset($_POST['submit'])){

$query = mysql_query("UPDATE student SET enable = 1 WHERE");    

} 
```

任何帮助将不胜感激谢谢

更新

我想我在这方面有所进展。到目前为止，我有这个，它会更新数据库。

```
<?php require_once('Connections/localhost.php'); ?>
<? ob_start(); ?>
<?php

if(isset($_POST['submit'])){

foreach($_POST['enable'] as $enable) {
    $query = mysql_query('UPDATE student SET enable = 1');
}

}
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$colname_Recordset1 = "-1";
if (isset($_GET['1'])) {
  $colname_Recordset1 = $_GET['1'];
}
mysql_select_db($database_localhost, $localhost);
$query_Recordset1 = sprintf("SELECT * FROM student WHERE enable = 0", GetSQLValueString($colname_Recordset1, "int"));
$Recordset1 = mysql_query($query_Recordset1, $localhost) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);
$sql="SELECT * FROM student";
?>

<p class="headText">Enable Student</p>

<p>Click the check box for each of the students you would like to enble and click the submit button</p>
<form id="submit" action="" method="post">
<table class="fileTable" border="1">
  <tr>
    <th scope="col">Username</th>
    <th scope="col">First Name</th>
    <th scope="col">Surname</th>
    <th scope="col">Email Address</th>
    <th scope="col">Enabled</th>
  </tr>
  <?php do { ?>

  <tr>

    <td><?php echo $row_Recordset1['username']; ?></td>
    <td><?php echo $row_Recordset1['fName']; ?></td>
    <td><?php echo $row_Recordset1['sName']; ?></td>
    <td><?php echo $row_Recordset1['email']; ?></td>

    <td>
    <input type="checkbox" name="enable[]" value="<?php echo $row_Recordset1['id'] ?>"/>
    </td>

  <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?>
     <input class="submit" type="submit" value="Submit" name="submit">
    </form>
    </tr>
</table>
 </form>

<?php

mysql_close();

mysql_free_result($Recordset1);
?>
<? ob_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:25:58.777

您的`$row_Recordset1`数组似乎包含数据库的数据。使用每一行的主键（例如用户名或id）并将其放入复选框的值。因此，您可以使用这样的 html 代码

```
<input type="checkbox" name="enable[]" value="<?php echo $row_Recordset1['id'] ?>"> 
```

在 PHP 中，您将获得一个数组，`$_POST['enable']`其中包含选中复选框的所有值。循环遍历数组并使用类似于以下代码的内容来更新数据库

```
<?php
foreach($_POST['enable'] as $enable) {
    $query = mysql_query('UPDATE student SET enable = 1 WHERE id = '.$enable);
    // ...
} 
```

不要忘记`$_POST`在循环之前清理值以防止不需要的输入！

对您的 html 代码的一条评论：将`<form>`标签放在桌子周围。您使用表单标签的方式将导致无效代码。您为每个 do 循环创建一个表单标签，但在最后只使用一个标签来关闭所有标签`</form>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:11:37.377

注意事项：

```
<input type="checkbox" name="enable" id="enable"> 
```

应该具有应该包含特定行 val 的值，例如 [这里我们假设 username 作为唯一字段，但建议**使用 id 而不是 username** ]：

```
<input type="checkbox" name="enable[]" id="enable" value="<?php echo $row_Recordset1['username'];?>"> 
```

为了获得它的价值，我们使用：`$_POST['enabled']`

所以就像使用它可能是这样的：

```
$query1 = mysql_query("UPDATE student SET enable = 0;");
if( isset( $_POST['enabled'] ){
     $strAllUsernameCombined = implode("','", $_POST['enabled']);
     $query1 = mysql_query("UPDATE student SET enable = 0 where username in ('{$strAllUsernameCombined}');");
} 
```

以及列出使用 while 而不是 do while 的最终建议

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:19:29.313

```
<input type="checkbox" name="enable" id="enable" value='something' />

<?php
   if(isset($_POST['submit'])){
      if(!empty($_POST['enable'])) {
          //do your update query
      }
   }
?> 
```

希望能帮助到你。

# drupal-7 - Drupal 7 - 在影子框中显示一个块？

> ID：10794434
> 
> 赞同：0
> 
> 时间：2012-05-29T06:55:23.287
> 
> 标签：drupal-7, shadowbox

如何在阴影框中显示一个块？

我用过这个

```
<a href="node_popup/15" rel="shadowbox;height=600;width=800;">My link</a> 
```

当我单击它时，它没有显示在阴影框中....

问题是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:23:09.527

如果锚点跟随`href`内容，这意味着 Shadowbox 被忽略，那么问题是 Shadowbox 没有正确安装或`Shadowbox.init();`在 Head Section 中初始化。

如果您看到的只是**变暗的背景**，则说明没有安装正确的 Shadowbox Player，或者内容不在指定的**href 位置**。

# sql - 如何选择`Only String`和`Only Int`

> ID：10794437
> 
> 赞同：0
> 
> 时间：2012-05-29T06:55:31.630
> 
> 标签：sql, sql-server-2008, select, int, nvarchar

我的数据库中有一些`nvachar`数据。

aaaa，bb1b，c+cc，1234，dser，5896

我需要两个选择 for`Only String`和`Only Int`。这是意思：

第一次选择的结果是 : `aaaa`,`dser`

第二次选择的结果是 : `1234`,`5896`

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:25:21.443

您可以使用[`LIKE`](http://msdn.microsoft.com/en-us/library/ms179859.aspx)来执行此比较。通过使用双重否定，您可以使用单个表达式执行测试：

```
declare @t table (val varchar(10) not null)
insert into @t(val)
select 'aaaa' union all
select 'bb1b' union all
select 'c+cc' union all
select '1234' union all
select 'dser' union all
select '5896'

select * from @t where val not like '%[^A-Z]%'
select * from @t where val not like '%[^0-9]%' 
```

第一个`select`说“给我所有**不**包含**非字母**字符的字符串”。同样，第二个说“给我所有**不**包含**非数字**的字符串”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:17:39.703

您需要检查正则表达式。

在您的示例中，查询如下所示：

```
SELECT * FROM example WHERE foo LIKE '%[0-9]%' AND foo NOT LIKE '%[A-Z]%' 
```

和

```
SELECT * FROM example WHERE foo NOT LIKE '%[0-9]%' AND foo LIKE '%[A-Z]%' 
```

也许您必须为不区分大小写的检查执行 UPPERCASE(foo) 。并在 NOT LIKE 表达式中添加其他字符，如 +、- 等。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms187489 (SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms187489(SQL.90).aspx)

# objective-c - 使 NSXMLElement 成为父级

> ID：10794442
> 
> 赞同：1
> 
> 时间：2012-05-29T06:56:25.027
> 
> 标签：objective-c, cocoa, nsxmldocument

有没有办法让 NSXMLElement 成为父节点，而不是 NSXMLNode？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:19:52.630

好的解决了......类型转换似乎可以解决问题。

```
NSXMLNode *manufacturer = [someNode parent];
NSXMLElement *manufacturer_element = (NSXMLElement *)manufacturer; 
```

# c# - Unity 游戏内无法接收 UDP 数据包

> ID：10794443
> 
> 赞同：4
> 
> 时间：2012-05-29T06:56:30.533
> 
> 标签：c#, thread-safety, udp, unity3d, udpclient

所以，我有这个用 Unity 编写的游戏，它应该通过 UDP 实时接收数据。数据将通过无线方式从一个用 Java 编写的 Android 设备传来，而 Unity 程序是用 C# 编写的。我的问题是，每当我尝试声明一个`UdpClient`对象，并在 Unity`Receive()`的`Update()`方法中调用它的方法时，游戏就会挂起。这是我试图放入我的`Update()`方法中的代码 -

```
UdpClient client = new UdpClient(9877);
IPEndPoint receivePoint = new IPEndPoint(IPAddress.Parse("192.168.1.105"), 9877);
byte[] recData = client.Receive(ref receivePoint); 
```

但这会导致游戏挂起。

然后我尝试了另一种方法 - 我尝试在单独的线程中接收数据。*如果我所要做的就是接收* `byte` *数组*，它就像魔术一样工作。没有问题。除了我还需要将接收到的数据用作实际游戏中使用的函数的参数（现在，假设我需要在主游戏窗口中将接收到的数据字节显示为字符串）。但是，我不知道 Unity 中的跨线程是如何工作的。我试过这个 -

```
string data = string.Empty;
private IPEndPoint receivePoint;

void OnGUI()
{
    GUI.Box(new Rect(20, 20, 100, 40), "");
    GUI.Label(new Rect(30, 30, 100, 40), data);        
}

void Start()
{
    LoadClient();
}

public void LoadClient()
{
    client = new UdpClient(9877);
    receivePoint = new IPEndPoint(IPAddress.Parse("192.168.1.105"), 9877);
    Thread startClient = new Thread(new ThreadStart(StartClient));
    startClient.Start();
}

public void StartClient()
{
    try
    {
        while (true)
        {
            byte[] recData = client.Receive(ref receivePoint);

            System.Text.ASCIIEncoding encode = new System.Text.ASCIIEncoding();
            data = encode.GetString(recData);
        }
    }
    catch { }
} 
```

但是如果我尝试上述方法，我的程序就会挂起。那么，我到底错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:09:18.100

它为您挂起的原因是因为这`Receive`是定义的方式。它会阻止您当前的代码，直到网络连接（即底层套接字）上有可用数据。您应该为此使用后台线程是正确的。

但请注意，在游戏对象脚本中创建线程可能会很危险，例如，如果您同时将脚本附加到多个对象。您不希望同时运行此脚本的多个版本，因为它们都会尝试绑定到同一个套接字地址（这不起作用）。如果游戏对象死亡，您还需要注意关闭线程（这在 C# 中不会自动完成 -*您*必须停止线程）。

也就是说，当您使用多个线程时，您需要确保线程安全。这意味着您需要保护数据，以便在写入时无法读取它。最简单的方法是使用[C# 锁](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)：

```
private readonly Object _dataLock = new Object();
private string _sharedData = String.Empty;

void OnGUI()
{
    string text = "";
    lock (_dataLock)
        text = _sharedData;
}

void StartClient()
{
    // ... [snip]
    var data = Encoding.ASCII.GetString(recData);
    lock (_dataLock)
        _sharedData = data;
} 
```

请注意，锁可能会稍微损害性能，尤其是在频繁使用的情况下。在 c# 中还有其他方法可以保护数据，这些方法性能更高（但稍微复杂一些）。有关一些示例，请参阅Microsoft 的[此指南](http://msdn.microsoft.com/en-us/library/1c9txz50%28v=vs.80%29.aspx)。

# jquery - jQuery在选择时触发事件

> ID：10794444
> 
> 赞同：0
> 
> 时间：2012-05-29T06:56:31.817
> 
> 标签：jquery, select, selected

我正在编写一个代码，其中在 document.ready 函数中我动态地创建了一些`<select>`带有预定义选项的元素，每个元素都有一个特定的 id。
（例如#Select1、#Select2、...）。

每次按下按钮，您都可以创建一个新的选择元素。我的问题是 jquery 中是否有任何方法，所以每次选择一个选项时都能看到我选择了哪个选项以及来自哪个选择元素？类似于`.change()`和`option:selected`jQuery 函数，但唯一的区别是我不知道元素的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:58:22.187

您需要使用`delegate event`like `on`：

```
$('#containerId').on('change', 'select', function(){
    this.id // the select id.
    this.value // this is the selected option value
    $(this).val() // this is the selected option value that works in all browsers
}); 
```

这将为具有 id 的元素下的每个元素添加一个`change`回调，无论它们是何时创建的。`<select>``containerId`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:00:03.893

```
$('#container').on('change', 'select[id^=Select]', function() {

  // get the select id
  console.log(this.id);

  // get the select value
  console.log(this.value); // or $(this).val();

  // To get the selected option's text
  console.log($('option:selected', this).text());
}); 
```

`#container`是所有`select`s 的父级。

`select[id^=Select]`检测所有`select`，其`id`开头为`Select`

**笔记：**

`.selected()`在 jQuery中没有任何东西。

# ruby-on-rails - 如何验证该对象的所有者正在修改它？（并写一个测试）

> ID：10794445
> 
> 赞同：0
> 
> 时间：2012-05-29T06:56:32.387
> 
> 标签：ruby-on-rails, validation, rspec, devise, bdd

我试图开始测试以确认用户只能在 current_user.id 和 model.user_id 匹配时修改对象。

我觉得这是模型的验证。所以我可能会写这样的东西：

```
class UserLocked < ActiveModel::Validator  
  def validate(record)  
    unless record.user_id == current_user.id  
      record.errors[:name] << "Sorry you cannot modify something that is not your's"  
    end  
  end  
end 
```

哪个可能没问题... **（我可以把它放在一个集中的地方吗？我需要做一些特别的事情来引用它吗？）**

为此编写测试也不错。但是，我还需要防止控制器显示表单以编辑表单。我应该创建一个单独的视图还是让它成为编辑页面的一部分？我如何在 rspec 中为此编写测试...

我可能想多了，但我想弄清楚其他人在做什么。一个例子会很棒！我以前在其他语言/框架中做过这个，但我正在尝试“以正确的方式做事”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:38:31.340

授权属于控制器而不属于模型。所以你可以像这样实现一个 before_filter ：

```
class UsersController < ApplicationController
  before_filter :correct_user,   only: [:edit, :update]
  ...
  private

  def correct_user
    @user = User.find(params[:id])
    redirect_to root_path unless current_user? @user
  end
end 
```

当然，您需要某种方法来检测当前用户是谁。

您可以使用 RSpec 和 Capybara 使用请求规范对此进行测试。逻辑很简单：您使用一个用户登录并期望在尝试编辑另一个用户的信息时会显示一条错误消息。否则应显示相关的表单字段。

有关示例，请参见[http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code:edit_update_wrong_user_tests](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code:edit_update_wrong_user_tests)

# multithreading - Powershell：冻结图形用户界面

> ID：10794455
> 
> 赞同：2
> 
> 时间：2012-05-29T06:57:24.123
> 
> 标签：multithreading, function, user-interface, powershell

只是一个快速的。我创建的一个简单工具有一个问题，该工具可以在一段时间内使用一个小框来获取 CPU 使用率，该小框显示正在使用的 CPU 的百分比（我已经为下面的代码删除了 GUI ）。

```
function loop
{
$get = read-host
for($start = 0; $start -le 100;$start++)
{
cls
$pro_percentage = Get-WmiObject win32_processor -computer $get -property Loadpercentage | select loadpercentage
$percentage = "Processor usage is: " + $pro_percentage.loadpercentage + "%"
$percentage
}
}
loop 
```

我创建的 GUI 还有其他一些内容，但我注意到一个主要问题，这适用于我创建的其他 GUI 应用程序。每当按下“开始”按钮从对话框启动脚本时，GUI 就会冻结。我在 GUI 中创建的菜单栏冻结，无法按下其他按钮。

我应该在不同的线程中运行每个函数吗？类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T07:28:18.540

尝试添加：

```
[System.Windows.Forms.Application]::DoEvents() 
```

在你的循环中。[然而，又快又脏](https://stackoverflow.com/questions/5181777/use-of-application-doevents/5183623#5183623)。

# c# - 具有精确格式的 xml 编辑

> ID：10794456
> 
> 赞同：0
> 
> 时间：2012-05-29T06:57:30.407
> 
> 标签：c#, xml

在某些特定情况下，我需要将属性添加到大型 xml。但是我必须保留精确的格式->即使其中有些不一致，
例如

```
name="one"/>   
name = "one" /> 
```

或（压痕长度）：

```
 <newtag .../>
  <newtag ... />
 <netag .../> 
```

谁能知道如何做到这一点？在 XMLDocument 中设置 preservewhitespaces 会导致读取某些 XMLNode 失败（因为有空格而不是 < 开始标记并且会抛出 nullreferenceexception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:29:05.203

我知道没有标准的现成 XML 解析器可以保留属性之间的“=”符号周围的空格等细节。

我认为除非通过编写自己的 XML 解析器（或修改现有的解析器），否则这个要求是无法实现的。

# c - C：低级字符格式化：（回车+换行）使用 fgetc

> ID：10794458
> 
> 赞同：2
> 
> 时间：2012-05-29T06:57:33.677
> 
> 标签：c, newline, enter, fgetc

我正在开发一个 C 项目，该项目读取文本文件并将其转换为布尔数组。首先我将文件读入一个大小的字符串`n`（是一个无符号字符数组），然后我使用一个函数将该字符串转换为一个大小为布尔数组`n * 8`。该功能完美运行，对此毫无疑问。

我使用以下代码从文件中获取字符串：

```
unsigned char *Data_in; // define pointer to string
int i;

FILE* sp = fopen("file.txt", "r"); //open file

fseek(sp, 0, SEEK_END);            // points sp to the end of file
int data_dim = ftell(sp);          // Returns the position of the pointer (amount of bytes from beginning to end)
rewind(sp);                        // points sp to the beginning of file

Data_in = (unsigned char *) malloc ( data_dim * sizeof(unsigned char) ); //allocate memory for string
unsigned char carac; //define auxiliary variable 

for(i=0; feof(sp) == 0; i++)       // while end of file is not reached (0)
{
   carac = fgetc(sp);              //read character from file to char
   Data_in[i] = carac;             // put char in its corresponding position
}
//

fclose(sp);                        //close file 
```

问题是在 Windows XP 中有一个由记事本制作的文本文件。在里面我有这个 4 个字符串`":\n\nC"`（冒号、输入键、输入键、大写 C）。

这就是 HxD（十六进制编辑器）的样子：`3A 0D 0A 0D 0A 43`.

这张表更清楚了：

```
character             hex      decimal    binary
 :                    3A       58         0011 1010
 \n (enter+newline)   0D 0A    13 10      0000 1101 0000 1010    
 \n (enter+newline)   0D 0A    13 10      0000 1101 0000 1010
 C                    43       67         0100 0011 
```

现在，我执行程序，该程序以二进制形式打印该部分，所以我得到：

```
character      hex      decimal      binary
 :             3A         58         0011 1010
 (newline)     0A         10         0000 1010    
 (newline)     0A         10         0000 1010
 C             43         67         0100 0011 
```

好吧，既然显示了这一点，我提出以下问题：

*   读法正确吗？
*   如果是这样，为什么要取出 0D？
*   这是如何运作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:01:45.000

制作`fopen`二进制文件：

```
fopen("file.txt", "rb");
                    ^ 
```

否则你的标准库只会吃掉`\r`( `0x0D`)。

* * *

附带说明一下，以二进制模式打开文件还可以缓解另一个问题，即文件中间的某个序列看起来像 DOS 上的 EOF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:04:18.890

这是因为您将该文件视为 ASCII 文件。如果将其视为二进制文件，您将能够看到这两个字符。为此，在打开文件时使用“rb”作为模式。还可以使用 fread 来读取文件内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:16:35.647

除了“rb”问题之外，还有一个错误：你会在最后读取一个额外的字符，因为`feof(sp)`读取最后一个字符后仍然为 0。*只有在您尝试*读取 EOF之后，它才会设置为 1 。这是初学者的常见错误。迭代输入字符的惯用 C 代码是

```
int c;   /* int, not char due to EOF. */

while ((c = fgetc(sp)) != EOF) {
   /* Work with c. */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T07:17:55.997

其他答案讨论了二进制与文本模式输入。

您的代码实际上有一个单独的问题。这个成语适用于 Pascal，而不是 C：

```
for (i = 0; feof(sp) == 0; i++)
{
   carac = fgetc(sp);
   Data_in[i] = carac;
} 
```

麻烦的是，当`fgetc()`获取 EOF 时，您将其视为一个字符（可能将其映射为 ÿ、y-变音符号、U+00FF、带有分音符号的拉丁小写字母 Y）。测试`feof()`错位；它不会在尝试读取下一个字符之前检测到 EOF。此外，该函数`fgetc()`及其亲属`getc()`都`getchar()`返回一个`int`，而不是一个`char`。你必须学会​​使用标准的 C 习语：

```
int c;
for (i = 0; (c = fgetc(sp)) != EOF; i++)
   Data_in[i] = c; 
```

习语是作业和测试的结合。围绕它的计数不太标准。事实上，这可能相当罕见。但这并没有错；它适用于您的程序。

`feof()`在大多数 C 代码中不需要使用；几乎任何时候你使用它，它都是一个错误。不总是; 它的存在是有目的的。但是这个目的是在一个函数返回 EOF 之后区分 EOF 和错误`fgetc()`，而不是在读取函数说它已经到达 EOF 之前测试你是否已经到达 EOF。（在我所有的数百个程序中，我认为对 的引用并不多`feof()`：2884 个源文件，18 个对 的引用`feof()`，以及大部分由其他人最初编写的代码。）

# facebook-javascript-sdk - FB.api post 使用 get

> ID：10794461
> 
> 赞同：0
> 
> 时间：2012-05-29T06:57:36.450
> 
> 标签：facebook-javascript-sdk

我正在尝试使用 js sdk 向流帖子发表评论。我的代码是这样的：

`FB.api(linkPage, 'post', {message: comment}, function(res){});`

其中 linkpage 是使用 graph api 的流帖子的正确 URL，comment 是有效字符串。但是，当此代码运行时，Chrome 的网络窗格显示“post”参数不会使 sdk 执行 http post，而是附加查询字符串参数“method=post”。请求方法仍然是 GET，api 以看起来有效的 commentid 响应，但是评论在流帖子中永远不可见。使用图形 api explorer POST 到与 linkPage 设置为完全相同的 api 入口点并使用相同的注释完美地工作。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:09:25.397

对我来说`FB.api('/me/feed', 'post', {message:'Hello'}, callback);`，创建一个仅在我的页面上可见的状态更新。它在新闻提要页面上不可见。

`FB.api`呼叫发送`GET`请求而不是请求不是错误`POST`。

这是因为浏览器的安全性。

# php - Paypal 会话数据未检索到

> ID：10794466
> 
> 赞同：0
> 
> 时间：2012-05-29T06:57:51.437
> 
> 标签：php, paypal, paypal-adaptive-payments

我在我的网站中使用 Paypal 自适应付款方式。

当我点击存款按钮时，我调用 deposit() 函数，然后贝宝为我提供类似于[https://www.sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=PAY_KEY的重定向 URL](https://www.sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=PAY_KEY)

但是当我完成交易后返回我的网站时，我无法从贝宝获取会话中的支付密钥。

这是我的代码片段

```
function deposit() {
    try {
        $PayPalConfig = array('Sandbox' => true,
            'DeveloperAccountEmail' => xxx@yyy.com,
            'ApplicationID' => APP_ID,
            'DeviceID' => DEVICE_ID,
            'IPAddress' => IP_ADDRESS,
            'APIUsername' => API_USERNAME,
            'APIPassword' => API_PASSWORD,
            'APISignature' => API_SIGNATURE,
            'APISubject' => API_SUBJECT);
        $PayPal = new PayPal_Adaptive($PayPalConfig);
        // Prepare request arrays
        $PayRequestFields = array(
            'ActionType' => 'PAY', 
            'CancelURL' => CANCEL_URL, 
            'CurrencyCode' => 'USD',
            'FeesPayer' => 'SENDER',
            'IPNNotificationURL' => '',
            'Memo' => '',
            'Pin' => '', 
            'PreapprovalKey' => '',
            'ReturnURL' => RETURN_URL,
            'ReverseAllParallelPaymentsOnError' => '', 
            'SenderEmail' => '', 
            'TrackingID' => ''
        );
        $Receivers = array();

        $Receiver = array(
            'Amount' => 10,
            'Email' => MY_PAYPAL_ACCOUNT,
            'InvoiceID' => '',
            'PaymentType' => '',
            'PaymentSubType' => '',
            'Phone' => array('CountryCode' => '', 'PhoneNumber' => '', 'Extension' => ''), 
            'Primary' => 'false'
        );
        array_push($Receivers, $Receiver);

        $PayPalRequestData = array(
            'PayRequestFields' => $PayRequestFields,
            'Receivers' => $Receivers,
        );

        $PayPalResult = $PayPal->Pay($PayPalRequestData);

        if ($PayPalResult['Ack'] != 'Success')
            return FALSE;
        else if ($PayPalResult['PaymentExecStatus'] == CREATED)
            header('Location: '.$PayPalResult['RedirectURL']);
    } catch (Exception $ex) {
        die('Exception in API Call');
    }
} 
```

# ruby-on-rails - 在 Heroku 或 Amazon Webservices 上运行 Ruby on Rails 网站更好吗？

> ID：10794468
> 
> 赞同：1
> 
> 时间：2012-05-29T06:57:56.023
> 
> 标签：ruby-on-rails, heroku, amazon-web-services

在 Heroku 或 Amazon Webservices 上运行 Ruby on Rails 网站更好吗？我们计划使用 MySQL……

不确定价格如何比较，也不确定实际体验。

你有什么建议？

提前致谢！C。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:16:19.470

这在很大程度上取决于您的需求以及您愿意花多少钱。Heroku 本身运行在 AWS 之上，并在其之上提供了一个非常好的平台（我们称其为 PaaS - 平台即服务），它隐藏了您在 Amazon EC2 中管理自己的服务器时需要执行的许多管理任务。

另一方面，您为此付出了代价，这使得 Heroku 比 EC2 更昂贵，特别是如果您将来需要扩展您的应用程序。我从未尝试过 Heroku 的大型应用程序，但我想它很快就会变得昂贵。然而，它仍然是一个很棒的平台，如果钱不是问题的话，对我来说是一件很容易的事。对于小型应用程序和测试而言，它非常有用，因为您可以在几分钟内启动并运行应用程序，并且扩展和安装插件非常容易。

在 EC2 中，您将拥有配置自己的服务器的管理任务，这也是一项相当大的工作量。但是，与 Heroku 相比，它更便宜。

无论如何，正如我所说，没有实际的最佳选择，但两者都有优势和权衡，并且对于他们愿意提供的服务来说都是很棒的服务！

希望这可以帮助。

# jquery - 如何使应用程序浏览器兼容

> ID：10794469
> 
> 赞同：0
> 
> 时间：2012-05-29T06:57:57.803
> 
> 标签：jquery, css, cross-browser

我正在构建一个在 IE8 和 Mozilla Firefox 中运行良好但在 IE7 中运行良好的应用程序。我喜欢萤火虫，我喜欢用它来调试我的应用程序，但目前我正在努力解决浏览器兼容性问题。我发现开发的应用程序在 IE8、FF11 中运行，但在 IE7 中不运行（主要是布局受到高度影响）。我正在将 jquery 用于与浏览器相关的功能，并且 jquery 的东西似乎正在工作..我应该怎么做才能使布局在 IE7 中正常工作？使用的框架是spring3，hibernate..我有大量的CSS我认为粘贴在这里没有任何帮助。我使用了相对位置并使用了顶部，左侧位置一些东西..使用了填充和边距，但没有那么多。 .这是原因吗？什么是可能的建议？为什么 IE7 和 IE8 以不同的方式呈现事物？我应该为 IE7 加载不同的 CSS 集吗？使用弹簧？这是一个好的解决方案吗？如果是，那么在春天怎么做？我应该放弃使用 firebug 并依赖 IE8 调试器，因为我们的客户端主要使用 IE7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:13:24.603

浏览器兼容性是一个非常冗长的话题，它涵盖了多个正确执行的领域。

如果 IE 7 或 IE 浏览器是您唯一的问题，那么`CSS Conditional comments`就是您的**完美**解决方案。

创建一个单独的样式表，其中包含 IE7 浏览器的所有必要修复。那么调用脚本就是这样的方式，只有IE 7才会渲染它。

```
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" media="screen" href="ie7fix.css" />
<![endif]--> 
```

现在，上面的样式表仅适用于浏览器是 IE 7 的情况。因此，您的所有修复都将被应用，因此布局将被修复。:)

* * *

*^(要了解有关条件注释的更多信息，请阅读[这篇文章](http://www.quirksmode.org/css/condcom.html)。)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:10:13.083

您的应用程序的 UI 也可以针对 IE7 进行优化。您必须为那些在 IE7 中引起问题的属性（如位置等）添加一些特定于 IE7 的 css。在您的 css 属性之前添加一个点。喜欢。

```
h1{
    font-size: 28px;
    color: #d39933;
    padding-bottom: 5px;
    .padding-bottom: 10px; //For IE7
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:15:48.030

IE7 和 IE8 有不同的 CSS 支持，有不同的错误和奇怪之处。通常的做法是在这些浏览器中有条件地加载 CSS，以解决与解释 CSS 的标准化方式的偏差。您可以使用 IE 条件注释加载额外的 CSS：

```
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="/css/ie7.css" />
<![endif]--> 
```

这是一篇关于条件评论的文章，​​您可能有兴趣阅读：[http ://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T07:22:21.040

在您的情况下没有神奇的解决方案，您将不得不受苦;=)，但我可以给您一些有用的提示。

1/ IE的内置调试器在不同版本上进行了改进，因此您应该使用最新版本的IE进行调试，并使用调试器窗口（F12）中的“浏览器模式”组合框将其设置为“Internet Explorer 7”，它工作得非常好，我从来没有发现这种模式和真正的 IE 7 有什么区别，而且你有 IE 9 的调试能力。

2/ IE7 中存在一些错误，在某些情况下您必须使用特定的 CSS 或 javascript 来解决，但布局的差异并不总是错误。IE7 中的布局问题通常是由不同浏览器以不同方式解决的有问题的约束造成的。典型例子：在绝对位置，你指定left、right和width，约束太多，不同的浏览器不会以完全相同的方式处理。

3/ IE 特定的 css

```
<!--[if IE 7]> 
<link rel="stylesheet" type="text/css" src="/css/ie7.css" /> 
<![endif]--> 
```

# c - 如何保存和获取链表中的下一个和上一个数据？

> ID：10794471
> 
> 赞同：0
> 
> 时间：2012-05-29T06:58:09.190
> 
> 标签：c, linux, list, linked-list

再会。任何人都知道如何在 c 中使用链表来处理下一个和上一个数据？在我获得链表中的前一个数据后，我得到 NULL 值，如果我移动到右键（传递我想要获取的索引），则获取下一个数据没有任何问题，但是如果我将键移到左侧，我得到了NULL 值，即使我再次传递索引并获取我需要的数据。这是我的示例添加和获取链表代码。

```
typedef struct samp{
int idx;
char *name;
struct samp *next;
}sampLink;

sampLink *head=NULL,tail=NULL,test;
int addList(int idx,char *name){
  sampLink *tryi=NULL;
  tryi=(sampLink*)calloc(1,sizeof(sampLink));
  tryi->idx=idx;
  tryi->name=strdup(name);
  tryi->next=NULL;

  if(head==NULL){
    head=tryi;
    tail=tryi;
  }else{
    tail->next=tryi;
    tail=tail->next;
  }
  return 0;
}

sampLink *getList(int idx){
do{
    if(idx==head->idx){
      return head;
    }
    head=head->next;
  }while(head!=NULL);
  return head;
} 
```

右移

```
void moveRight(){
int i=0;
test=getList(i);
i++;
} 
```

左边只是减号。希望有人能帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:46:30.877

如果您真的想实现左/右移动，那么仅添加减号是行不通的。您需要实现一个双向链表，以便能够在两个方向上移动。

向左移动时可能会返回 NULL，因为向右移动时正在更改头指针，并且一旦更改头指针就会丢失一些节点，因为您的搜索不是双向的，因为它不是双向链表，因此返回结束节点 (无效的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:22:16.387

从您的问题来看，您要达到的目标并不是很清楚。但是，您仍然可以在下面找到一些提示：

1.  始终建议始终维护指向链表“头”的指针。但是，您在 moveRight 函数中不断修改它。
2.  如果你想无缝地左右移动，那么最好实现一个双向链表。

使用您当前的单链表解决方案，您可以尝试下面的 getList 代码

```
sampLink *getList(int idx)
{ 
  sampLink *temp = head;
  do{     
       if(idx==temp->idx)
       {       
         return temp;     
       }     
      temp=temp->next;   

    }while(temp!=NULL);   //Now, the function only keeps modifying the temp pointer rather than the head pointer, so each time you call the function, if idx is valid, it will return a pointer.

 return NULL; //If you had encountered a node which is having idx, you would have returned in the loop itself, so returning NULL here.
} 
```

# sql - 如何根据内部查询添加where子句

> ID：10794472
> 
> 赞同：1
> 
> 时间：2012-05-29T06:58:11.107
> 
> 标签：sql, oracle

我正在尝试编写一个查询来获取每个部门的员工人数。我正在使用内部查询进行此操作。我面临的问题是我需要过滤掉计数小于 10 的记录。这是我的查询的外观-

```
SELECT 
   DPT.ID, 
   DPT.NAME, 
   (SELECT COUNT(1) FROM EMPLOYEE E WHERE E.DEPARTMENT_ID=DPT.ID) EMP_COUNT
FROM 
   DEPARTMENT DPT
WHERE 
   EMP_COUNT >=10; -- this part is not working 
```

谁能建议我可以代替的东西`EMP_COUNT >=10` ？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:09:14.970

为什么要使用子查询？在大多数 RDBMS-es 上这可能会更快

```
SELECT     DPT.ID 
,          DPT.NAME 
,          COUNT(*) EMP_COUNT
FROM       DEPARTMENT DPT
INNER JOIN EMPLOYEE E
ON         DPT.ID = E.DEPARTMENT_ID
GROUP BY   DPT.ID 
,          DPT.NAME
HAVING     COUNT(*) >= 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:02:16.867

```
SELECT DPT.ID, DPT.NAME, DEPT_EMP_COUNT
FROM DEPARTMENT DPT, (SELECT E.DEPARTMENT_ID , COUNT(1) AS DEPT_EMP_COUNT 
                      FROM EMPLOYEE E
                      GROUP BY E.DEPARTMENT_ID ) EMP_COUNT 
WHERE EMP_COUNT.DEPARTMENT_ID = DPT.ID AND DEPT_EMP_COUNT > 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:15:29.813

尝试这个

```
select dept.deptId,
dept.deptName,
count(emp.empid) as numb_of_emps
from department dept inner join employee emp
on dept.deptid = emp.deptid
group by dept.deptid,dept.deptName
having count(emp.empid) >= 10 
```

# javascript - SWF 如何将内容注入网页

> ID：10794475
> 
> 赞同：7
> 
> 时间：2012-05-29T06:58:34.353
> 
> 标签：javascript, html, actionscript-3, security

通过嵌入以下 SWF 代码，当在单个页面中运行时，新标签会出现所需的 URL 和顶部的广告栏。不需要用户交互。

```
<embed width="1" height="1" align="middle"
       pluginspage="http://www.macromedia.com/go/getflashplayer"
       type="application/x-shockwave-flash" allowscriptaccess="sameDomain"
       name="blog" bgcolor="000000" wmode="transparent" quality="high"
       src="http://i1177.photobucket.com/albums/x348/hosting504/red.swf" 
       flashvars="web=www.agitehabbero.com/index.php&creador=supercito"> 
```

如果代码嵌入到框架中，则不会创建新选项卡，而是修改框架以添加 html 页面。

**编辑：页面上没有 JAVASCRIPT。**

SWF 文件如何做到这一点？（将内容注入网页）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T18:29:44.160

此 ActionScript3.0 代码将注入一个匿名函数，然后在传递单个参数“hello”时执行它：（ `ExternalInterface.call("function(msg){ alert(msg); }", "hello");`这将像下面的 Javascript 代码一样执行：）`function(msg){ alert(msg); }("hello");`。

由于您可以注入代码，因此您可以编写代码来操作文档（添加元素、修改样式、更改元素值等）。例如这个 AS3 代码：`ExternalInterface.call("function(){ document.write(\"Hello, world!\"); }");`将显示“Hello, world!” 在 HTML 页面上。

此外，来自[文档](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/external/ExternalInterface.html)：

*   在包含 HTML 页面的 SWF 文件的对象标记中，设置以下参数： `<param name="allowScriptAccess" value="always" />`
*   在 SWF 文件中，添加以下 ActionScript： `flash.system.Security.allowDomain(sourceDomain)`

我测试了以上所有内容，它在我的浏览器上运行良好：Google Chrome 19、Internet Explorer 8、Firefox 12。

根据您的要求，文档方面没有 javascript :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T02:59:21.403

知道了！
正如你所说，没有Javascript。
偷偷摸摸的代码，我不完全理解为什么，但设法让它工作。下载并反编译red.swf，有2帧，只有第二帧有以下代码（评论是我的）

```
 /*

flashvars are loaded to the _root as following:
_root.web = www.agitehabbero.com/index.php&creador=supercito
oddly the amperesand (&) gets interpreted too so we also get.
_root.creador=supercito

*/
    stop();
    var url = _root.web;
    if ("supercito" == _root.creador) {//verifies that the url passed has a value pair creador=supercito I guess to avoid it being used for something else?
        getURL ("http://supercito.com.ar/g3/web.php?url=" + url, "glu");
        /* the getURL calls this site, in a new window (frames are treated as windows by browsers) 
        somehow flash , as it doesn't find the frame or window, converts it into a pop up */
    } else {
        getURL ("http://supercito.com.ar/404", "glu");
    } 
```

哦，这几乎不是 ActionScript 2，看起来像 AS1（它使用相同的 VM）。

为了进一步测试，我简化了 flash 代码并上传到服务器：

```
stop();
getURL ("http://supercito.com.ar/g3/web.php?url=" + _root.web, _root.marco); 
```

现在在服务器中，我们可以玩不同的输入，看看会发生什么。链接是： http: [//m0.cl/t/dwit/assets/no-usr/testing-odd.php](http://m0.cl/t/dwit/assets/no-usar/testing-odd.php)

（对不起，我在其他事情中间的凌乱地址）
如果我们为框架参数使用任何值，http://supercito.com.ar 页面将加载并使窗口成为弹出窗口，除非我们使用 _self。
问题是我看不到这个新窗口变成弹出窗口的部分，也许它隐藏在它加载的 jquery 文件中。打败我。甚至与查尔斯核对过。如果有人有想法，请告诉我，我会尝试。
希望这可以帮助。
这是我第一次发帖 ：）

**编辑：**
我上传了一个修改以进行更好的测试。
现在我们也可以更改主 URL。

```
stop();
getURL (_root.main + _root.web, _root.marco); 
```

**编辑 Nº2**
这是闪光！
使用新设置，您可以尝试任何 URL，只要目标窗口不是 _self 或 _top，它就会使其成为弹出窗口，事实是，Chrome 将其解释为弹出窗口，但 IE 只是读取它作为 _blank 窗口。
对我来说似乎是一个错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T07:02:37.787

AS中有一个类叫做[`ExternalInterface`](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/external/ExternalInterface.html). 它帮助 flash 与 JS 通信（调用 js 函数或 JS 调用 flash 函数）。然后抛出 DOM 可以将内容添加到页面中。可能是这个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T13:21:54.573

一个例子

AS3

```
package {
    import flash.display.Sprite;
    import flash.external.ExternalInterface;
    import flash.events.*;

    public class MyApp extends Sprite {

        private var btn:Sprite;

        public function MyApp() {
            //add an entry point from js (html page) to swf, so js can call the swfFunc
            ExternalInterface.addCallback('swfFunc', swfFunc);

            btn = new Sprite();
            btn.mouseEnabled = true;
            btn.x = 0;
            btn.graphics.beginFill(0xFF0000, 0);
            btn.graphics.drawRect(0, 0, 300, 50);
            btn.graphics.endFill();
            btn.addEventListener(MouseEvent.CLICK, jsFunc);
            addChild(btn);
        }

        public function jsFunc(evt:MouseEvent):void {
            // call the js function named jsFunc 
            ExternalInterface.call('jsFunc', 'Test JS');
        }

        //this method is called from the js
        public function swfFunc(text:String):void {
            trace(text);
        }
    }
} 
```

HTML

```
<object id='MySWF' type='application/x-shockwave-flash' data='MyApp.swf' width='300' height='50'>
    <param name='movie' value='MyApp.swf' />
    <param name='allowscriptaccess' value='always' />
    <param name='swliveconnect' value='true' />
</object>

<div id="container">
    A Text
</div>
<button type="button" onclick="swfFunc();">Call SWF</button> 
```

JS

```
function jsFunc(text) {
    document.getElementById('container').innerHTML = text;
}

function swfFunc() {
    var swfObj =  window['MySWF'] || documment['MySWF'];
    swfObj.swfFunc('Test SWF');
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T20:14:27.477

不确定这是否可能。

现代浏览器具有相当强大的弹出窗口阻止程序，在大多数情况下，如果没有用户交互，则不允许打开新窗口/选项卡。

即使您设法欺骗了一个浏览器，它也有可能无法在不同的浏览器/操作系统中运行。

顺便说一句，如果页面上没有 JS 并且您无法编辑 HTML，您可以使用“伪协议”直接从 Flash 运行 JS：

```
var req:URLRequest = new URLRequest('javascript:void(alert('This is called from Flash'))');
navigateToURL(req); 
```

因此，理论上，您可以将相当复杂的 JS “注入”到您的 HTML 页面中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-03T18:32:24.917

有几种方法可以从 Flash 打开一个新的浏览器窗口（没有 HTML 页面的帮助）：[http ://helpx.adobe.com/flash-player/kb/create-pop-browser-windows-flash.html](http://helpx.adobe.com/flash-player/kb/create-pop-browser-windows-flash.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-04T18:31:56.023

首先，您应该确保您使用的是 window.top.document。从那里尝试打开窗口——如果您的窗口句柄为空，则打开 100% iframe。

```
 /**
     *  @public
     */
    public function JSTest():void {

        ExternalInterface.call('eval', [

            "window.createFrame = function() {",
                "var doc                = window.top.document;",
                "var ifrm               = doc.createElement('IFRAME');",
                "ifrm.style.position    = 'absolute';",
                "ifrm.style.left        = '0';",
                "ifrm.style.top         = '0';",
                "ifrm.style.width       = '100%';",
                "ifrm.style.height      = '100%';",
                "ifrm.setAttribute('src', 'http://vimeo.com');",
                "doc.body.appendChild(ifrm);",
            "}",

            // try opening window, otherwise, open an iframe
            "if (!window.open('http://www.vimeo.com', '_top')) {",
                "window.createFrame();",
            "}"

        ].join('\n'));

    } 
```

# embedded - 写入闪存是 IO 映射，而从闪存读取是内存映射...可能是什么原因

> ID：10794476
> 
> 赞同：0
> 
> 时间：2012-05-29T06:59:07.180
> 
> 标签：embedded, bootloader, spi, flash-memory

我正在使用 Broadcom CFE（通用框架环境）引导加载程序……SOC 来自 Broadcom……并使用串行 NOR 闪存**N25Q032**作为引导设备。从闪存读取它使用内存映射技术，而写入它使用 SPI 接口（IO 映射）。

在我看来，这种设计背后的原因是：

1.  IO 映射读/写是阻塞调用，因此在读取以保持 CPU 空闲时，它是使用内存映射实现的。

2.  它没有实现来检查...闪光。

....请解释这种设计背后的原因....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:53:15.307

根据定义，串行存储器本身不能进行存储器映射。在这种情况下，我想（没有查看数据表）NOR闪存控制器将数据读取到微控制器中的专用内存映射页面中，因此它将块串行读取到随机存取存储器中。

写入时，数据已经在随机存取存储器中，NOR 闪存控制器将其直接序列化到存储设备中。将它从一个内存映射区域复制到另一个内存映射区域然后序列化它是没有意义的。

# shell - 如何在脚本中的特定 HTML 标记之间提取文本

> ID：10794477
> 
> 赞同：0
> 
> 时间：2012-05-29T06:59:12.123
> 
> 标签：shell, unix

鉴于我在表单中有一些 HTML：

```
<html>
  <body>
    <div id="1" class="c">some other html stuff</div>
  </body>
</html> 
```

如何使用 Unix 脚本提取它？

```
some other html stuff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:06:53.200

您可以检查[html-xml-utils](http://www.w3.org/Tools/HTML-XML-utils/)和[`hxselect`](http://www.w3.org/Tools/HTML-XML-utils/man1/hxselect.html)允许您提取与 CSS 选择器匹配的元素的命令：

```
hxselect '.c' < test.htm 
```

这假定您的输入是格式良好的 XML 文档。如果不是，您可能需要求助于正则表达式及其[可能的后果](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-25T15:13:30.573

对于简单的使用，可以使用 Ex 编辑器，例如：

```
$ ex +'/<div/norm vity' +'%d|pu 0|%p' -scq! file.html
some other html stuff 
```

它在哪里找到`div`标记，然后选择找到的标记的内部 HTML 标记 ( `vit`)，拉出它 ( `y`) 以便用它替换缓冲区 ( `%delete`, `put 0`)，然后打印它 ( `%print`)，然后退出 ( `-cq!`)。

其他带有演示 URL 的示例：

```
$ ex +'/<div/norm vity' +'%d|pu 0|%p' -Nscq! http://example.com/ 
```

优点是它`ex`是大多数 Linux/Unix 发行版中可用的标准 Unix 编辑器。

也可以看看：

*   [如何在匹配的 HTML/XML 标签之间跳转？](https://vi.stackexchange.com/q/780/467)在 Vim SE
*   [如何有条件地删除html标签的内部内容？](https://vi.stackexchange.com/q/3299/467)在 Vim SE

# sql-server - 使用传递查询访问记录集和 SQL Server - 如果我更新记录集中的字段，它会更新服务器吗？

> ID：10794481
> 
> 赞同：0
> 
> 时间：2012-05-29T06:59:32.267
> 
> 标签：sql-server, ms-access, recordset

我目前有一个使用 Microsoft SQL Server 的后端数据库，并且正在使用 Microsoft Access 构建一个前端界面。Access通过传递查询的方式与后端进行交互，因此所有的SQL语句都通过表单收集，在VBA中构造，然后直接发送到服务器。这是因为网络延迟问题，我的理解是 Access 在使用链接表时效率低下，如果它必须将 Access 查询转换为 T-SQL 查询。

我现在需要`SELECT`从数据库中创建一个表单，更新一个或多个记录/字段，然后创建`UPDATE`数据库。是否最有效：

*   使用自己的查询单独更新每条记录（用户必须单击“保存”按钮或其他东西
*   将表加载到 Recordset 对象中，在本地进行更改，然后向服务器发送一个查询以进行批量更新。我可以在 VBA 中进行更改或将 Recordset 附加到表单并让 Access 处理 Recordset 的更新

在后一种情况下，如果对 Recordset 对象进行更新，如果在 VBA 代码中使用 QueryDef 填充记录集，Access 是否会自动写入 SQL 服务器？

# sql - 如何引用另一个表中的多行？

> ID：10794482
> 
> 赞同：1
> 
> 时间：2012-05-29T06:59:40.703
> 
> 标签：sql, database, database-design

假设我有一个角色表，例如，

```
Roles
-----
ID  Name
0   Salesman
1   Client
2   Manager 
```

我们还假设这些角色不是相互排斥的：也就是说，一个人可以同时是推销员、客户和经理。

如果我有一个`Person`带有`Role`字段的表，我如何能够引用`Roles`表中的多行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T07:02:51.580

您引入了一个引用两个原始表的新表：

```
CREATE TABLE PersonRoles (
    PersonID int not null,
    RoleID int not null,
    constraint PK_PersonRoles PRIMARY KEY (PersonID,RoleID),
    constraint FK_PersonRoles_Persons FOREIGN KEY (PersonID) references Person (ID),
    constraint FK_PersonRoles_Roles FOREIGN KEY (RoleID) references Role (ID)
) 
```

假设多重性为`m:n`，以上是正确的。我做了一个假设（在你的问题中没有列出），一个以上的人可以是例如推销员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:02:53.367

您必须创建另一个具有（至少）两列的表：

```
PersonId, RoleId 
```

所以你可以插入（例如）

```
1, 0
1, 2
2, 1 
```

id=1 的人将是销售员和经理，而 id=2 的人将是客户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:06:28.210

为此，您需要建立“nm 关系”。你需要一张额外的桌子，例如。称为“person_role”，其中包含其他两个表的外键：

人物 <===> 人物角色 <===> 角色

所以你将有3张桌子：

```
Person
------------
ID
Name
etc.

Role
---------
ID
Name

PersonRole
------------
PersonID
RoleID 
```

您还应该将 PersonID 和 RoleID 设置为唯一的复合键，以避免任何重复

/ 卡斯滕

# java - getresultlist - 查询正常，但列表中的数据重复

> ID：10794483
> 
> 赞同：0
> 
> 时间：2012-05-29T07:00:01.047
> 
> 标签：java, hibernate, list, duplicates

我有一个问题`getResultList()`。我的查询在执行并返回 700 个结果时正常。在返回列表中，我有 700 个结果，但列表包含重复数据。所以我没有所有的结果。

```
 public List<EscaleCatalogueKaravel> obtenirListeEscaleKaravelSelonMarche(Integer refMarche, Integer refLangue) {
    List<EscaleCatalogueKaravel> listeEscales = entityManager.createQuery("select distinct  p from EscaleCatalogueKaravel p " +
            "where p.refMarche=:refMarche and p.refLangue=:refLangue group by idEscale  ")
            .setParameter("refMarche", refMarche)
            .setParameter("refLangue", refLangue)
            .getResultList();

    if (listeEscales == null || listeEscales.size() == 0) {
        return null;
    }
    return listeEscales;

} 
```

你有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:43:47.003

你用的是 MySQL，对吧？Oracle 不会执行查询，而是抛出错误。

为了正确使用 group by 子句，您只能选择 group by 子句中也提到的行（或表达式）。如果您选择的行不在 group by 子句中，则该行对于一个组的成员可能具有不同的值。数据库应该返回哪些值？MySQL 任意返回一个可能的值，但这是不正确的。

在您的查询中，您要么只做，要么`select distinct idEscale from ...`按所有必要的列分组，只选择那些列，或者删除您的`group by`子句。顺便说一句，distinct 也可以在没有 group by 的情况下使用，并且仅在确实需要时才应使用 distinct，因为它会使查询变慢。

# php - 服务器负载均衡算法

> ID：10794486
> 
> 赞同：2
> 
> 时间：2012-05-29T07:00:13.223
> 
> 标签：php, apache

我对负载均衡器的了解是：-

当我们网站上的流量很高，或者我们使用多台服务器时，就会在所有服务器前建立一个负载均衡器。并且任何 http 请求都直接命中负载均衡器，并从那里到达相应的服务器，具体取决于服务器负载。

Q1 谁能准确解释一下负载均衡器用来均衡多台服务器负载的算法。

Q2 我们是否可以创建自己的负载均衡器，或者我们是否必须从梭子鱼网络等其他网络或其他网络中获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:09:05.310

1) 有多种方法可以做到这一点（循环，最少连接，加权，......）一个很好的概述：[http ://www.centos.org/docs/5/html/Virtual_Server_Administration/s2-lvs- sched-VSA.html](http://www.centos.org/docs/5/html/Virtual_Server_Administration/s2-lvs-sched-VSA.html)

2）“创造我们自己的”——你可能不想重新发明轮子，周围有很多现有的产品，包括商业和开源/免费软件。其中一些专门处理 http 请求，另一些则支持各种协议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:05:44.060

Q1：最简单的算法是循环。它只是通过每个现有的服务器，并将下一个服务器用于下一个请求。

Q2：当然，您可以创建自己的，或者您在其中一台服务器上安装可用的开源或商业产品之一。

# css - 条件样式表 Rails 3.1

> ID：10794487
> 
> 赞同：0
> 
> 时间：2012-05-29T07:00:22.997
> 
> 标签：css, ruby-on-rails-3, stylesheet

我正在跨浏览器测试我的网站，当然 IE 让我最头疼。我知道我必须使用条件样式表，但不确定将它们放在哪里，因此它们仅在 IE7 或 IE8 时呈现。我看过一个关于堆栈溢出的例子，但他似乎在使用 HAML，而我没有。

以前有没有人遇到过这个问题，如果有，你是怎么做的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:27:15.383

```
<head>

<!--[if IE 7]>
<link href="ie7.css" rel="stylesheet" type="text/css" />
<![endif]-->

<!--[if IE 8]>
<link href="ie8.css" rel="stylesheet" type="text/css" />
<![endif]-->

</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:22:05.843

假设您正在使用资产管道，到目前为止我找到的唯一解决方案是不包含您的样式表，以便将它们编译到一个文件中，而只需在`head`标签中单独包含您的 IE 样式表你的布局文件，你通常会。

# python-2.7 - Python 中的多线程，带有线程和队列模块

> ID：10794490
> 
> 赞同：0
> 
> 时间：2012-05-29T07:00:32.407
> 
> 标签：python-2.7

我有一个包含数十万行的文件，每一行都需要经历相同的过程（计算协方差）。我打算使用多线程，因为它需要很长时间。然而，我看到的所有示例/教程对于我想做的事情来说都相当复杂。如果有人能给我指出一个很好的教程来解释如何一起使用这两个模块，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:16:16.560

每当我必须并行处理某些东西时，我都会使用类似的东西（我只是从现有脚本中删除了它）：

```
#!/usr/bin/env python2
# This Python file uses the following encoding: utf-8

import os, sys, time
from multiprocessing import Queue, Manager, Process, Value, Event, cpu_count

class ThreadedProcessor(object):
  def __init__(self, parser, input_file, output_file, threads=cpu_count()):
    self.parser = parser

    self.num_processes = threads
    self.input_file = input_file
    self.output_file = output_file

    self.shared_proxy = Manager()

    self.input_queue = Queue()
    self.output_queue = Queue()

    self.input_process = Process(target=self.parse_input)
    self.output_process = Process(target=self.write_output)

    self.processes = [Process(target=self.process_row) for i in range(self.num_processes)]

    self.input_process.start()
    self.output_process.start()

    for process in self.processes:
      process.start()

    self.input_process.join()

    for process in self.processes:
      process.join()

    self.output_process.join()

  def parse_input(self):
    for index, row in enumerate(self.input_file):
      self.input_queue.put([index, row])

    for i in range(self.num_processes):
      self.input_queue.put('STOP')

  def process_row(self):
    for index, row in iter(self.input_queue.get, 'STOP'):
      self.output_queue.put([index, row[0], self.parser.parse(row[1])])

    self.output_queue.put('STOP')

  def write_output(self):
    current = 0
    buffer = {}

    for works in range(self.num_processes):
      for index, id, row in iter(self.output_queue.get, 'STOP'):
        if index != current:
          buffer[index] = [id] + row
        else:
          self.output_file.writerow([id] + row)
          current += 1

          while current in buffer:
            self.output_file.writerow(buffer[current])
            del buffer[current]
            current += 1 
```

基本上，您有两个进程管理文件的读/写。一个读取并解析输入，另一个从“完成”队列中读取并写入您的输出文件。产生了其他进程（在这种情况下，数量等于您的 CPU 拥有的总处理器内核数）并且它们都处理来自输入队列的元素。

# c++ - 带有指针和内存泄漏的递归

> ID：10794492
> 
> 赞同：0
> 
> 时间：2012-05-29T07:00:45.680
> 
> 标签：c++, pointers, memory-management, memory-leaks, recursion

我试图编写一个简单的程序，将数字转换为单词（即，它将 123 转换为 123）。代码完全编译。该代码使用指针和递归，在 C++ 中，就内存管理而言，我总是觉得这很棘手。任何人都可以指出以下代码在执行时是否会发生内存泄漏？提前致谢。

```
#include <iostream>
#include <string>
using namespace std;
char *convert_number(int, int);

const char *tens[]={"","ten", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety"};
const char *words[]={"zero","one", "two", "three", "four", "five", "six", "seven", "eight", "nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen", "eighteen","ninteen"};
const char *place[]={"","thouands","million","billion","trillion"};

int main(int argc, char **argv)
 {
int number,conv_num,places;
places=1;
char *string= new char[1000];
char *temp_string = new char[100];
cout<<"Enter a number:";
cin>>number;
string = convert_number(number,0);
cout<<"The word is :"<<string<<endl;
}

char *convert_number(int number,int places)
{
int divisor;
char *word;
int conv_num;
char *temp_string = new char[100];
word = new char[100];
divisor=10;

if (number>=1000)
{   
    conv_num = number % 1000;
    number = (number-conv_num)/1000;
    places++;
    temp_string = convert_number(number,places);    
    word = strcat(word, temp_string);
    word = strcat(word, place[places]);
    word =strcat(word," ");
}
else
{
    conv_num = number;
}
if (conv_num>=100)
{
    word =strcat(word,words[conv_num/100]);
    word =strcat(word," hundred ");
    conv_num=conv_num%100;
}

if(conv_num >=20)
{
 word=strcat(word,tens[conv_num/10]);
 word =strcat(word," ");
 if(conv_num%divisor>=1)
 {
    word=strcat(word,words[conv_num%divisor]);  
    word =strcat(word," ");
  }
}

if(conv_num<20) 
{ 
    word=strcat(word,words[conv_num]);
    word =strcat(word," ");
}       
delete[] temp_string;       
return word;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:10:41.617

> “有人能指出以下代码在执行时是否会发生内存泄漏？”

是的，它可以。

```
char *temp_string = new char[100];  // first assignment

[...]

if (number>=1000)
{   
[...]
    temp_string = convert_number(number,places); 
```

当您以这种方式重新分配 temp_string 时，第一次分配的内存变得不可访问，并且尚未被释放。你应该`delete[]`先这样。

# java - 幕后发生了什么？

> ID：10794493
> 
> 赞同：0
> 
> 时间：2012-05-29T07:00:49.300
> 
> 标签：java, android, sqlite

我遇到了以下代码，我需要对此代码进行一些说明。

[http://www.vogella.com/articles/AndroidSQLite/article.html#contentprovider_overview](http://www.vogella.com/articles/AndroidSQLite/article.html#contentprovider_overview)

```
private void checkColumns(String[] projection) {
        String[] available = { TodoTable.COLUMN_CATEGORY,
                TodoTable.COLUMN_SUMMARY, TodoTable.COLUMN_DESCRIPTION,
                TodoTable.COLUMN_ID };
        if (projection != null) {
            HashSet<String> requestedColumns = new HashSet<String>(
                    Arrays.asList(projection));
            HashSet<String> availableColumns = new HashSet<String>(
                    Arrays.asList(available));
            // Check if all columns which are requested are available
            if (!availableColumns.containsAll(requestedColumns)) {
                throw new IllegalArgumentException(
                        "Unknown columns in projection");
            }
        }
    } 
```

我的问题是：因为 hashset 用于比较幕后发生的值？hashset 中是否存储了表的数据？如果是，那么我可以在另一个程序中使用这个值并在控制台中打印出来吗？

我不确定发生了什么，请解释一下。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:07:56.293

您粘贴的代码的目的只是检查用户没有在投影中提供表格中不存在的列。没有对指定的表进行查询，也没有提取数据。这只是一个有效性检查。

# php - 如何使用 API 发布 LinkedIn 公司状态更新？

> ID：10794494
> 
> 赞同：2
> 
> 时间：2012-05-29T07:01:03.103
> 
> 标签：php, api, linkedin

无论如何通过API调用使用PHP更新公司页面中链接的公司状态，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:01:53.957

目前还没有办法为公司创建 LinkedIn 所说的“股份”。[这是他们论坛上](https://developer.linkedin.com/forum/share-company-profile-not-personal-profile)与此相关的帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T14:48:11.253

这是一个非常快速的指南。看看我使用 LinkedIn API 的决定。请记住，在这样做之前：

1.  您必须在 LinkedIn 中拥有个人资料；
2.  您的公司必须在 LinkedIn ( [http://www.linkedin.com/company/yourcompanyname](http://www.linkedin.com/company/yourcompanyname) ) 中有公司页面；
3.  您必须是您公司页面的管理员（以便代表您的公司发布更新）。

满足上述条件后，请访问[https://www.linkedin.com/secure/developer](https://www.linkedin.com/secure/developer)并使用您的个人资料凭据登录。添加一个新应用程序以获取 API 密钥、密钥、OAuth 用户令牌和 OAuth 用户密钥。

用于发布公司股票的 LinkedIn API 的 PHP 代码：

```
require 'OAuth.php'; // .. or install the PECL extension.. Google it

$apiKey = 'xxxxxxx'; // take it from your application
$apiSecret = 'yyyyyyyyy'; // take it from your application
$accessToken = 'zzzzzzzzz'; // take it from your application
$accessToken = 'kkkkkkkkkkk'; // take it from your application
$oauth = new OAuth($apiKey, $apiSecret);
$oauth->setToken($accessToken, $accessTokenSecret);

$body = new stdClass();
$body->comment = 'Some comment';
$body->content = new stdClass();
$body->content->title = 'Some title';
$body->content->description = 'Some description';
$body->content->{'submitted-url'} = 'http://www.mycompany.com/article_id/123456'; // ID of your company page in LinkedIn
$body->visibility = new stdClass();
$body->visibility->code = 'anyone';
$body_json = json_encode($body);

$oauth->fetch('http://api.linkedin.com/v1/companies/12345678/shares', $body_json, OAUTH_HTTP_METHOD_POST, array(
  "Content-Type" => "application/json",
  "x-li-format" => "json"
));
$response = json_decode($oauth->getLastResponse()); 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-13T14:00:58.107

此问题的已接受答案不再有效，并且链接到现在可用的公告的另一个答案有两个断开的链接

澄清一下，您现在*可以*发布公司状态更新/分享，相关文档位于[https://developer.linkedin.com/docs/company-pages#company_share](https://developer.linkedin.com/docs/company-pages#company_share)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-06T21:33:57.210

自 2013 年 8 月起，LinkedIn 的 API 支持分享到公司页面。

[公告](https://developer.linkedin.com/blog/introducing-company-page-posting-and-analytics-linkedin-platform)。

[官方文档](https://developer.linkedin.com/creating-company-shares)。

# iphone - 如何在制作计算器的标签中添加运算符符号“+、-、/、*、mod”等？

> ID：10794496
> 
> 赞同：1
> 
> 时间：2012-05-29T07:01:11.600
> 
> 标签：iphone, ios, xcode, uibutton, calculator

我已经为简单的操作制作了一个计算器，但我不知道如何在我输入的数字旁边添加操作符符号。

我在输入的数字上创建了 2 个函数 1

```
 -(IBAction)buttonDigitPressed:(id)sender 
```

另一个用于操作

```
-(IBAction)buttonOperationPressed:(id)sender. 

calculatorScreen.text = [NSString stringWithFormat:@"%.2f",result]; 
```

这是为了在标签calculatorScreen 上显示结果。

我想要的结果是计算器屏幕上的“1+2*3/4”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:14:40.190

您可以将字符附加到calculatorScreen 上已有的任何内容。或者，您可以将当前输入保存在实例变量中并在适当的位置显示。

这只是一个指导方针，因为我不知道您的计算器在此输入的情况下的行为：（`1 + 2 * 3`简单计算器将返回 9，科学将返回 7）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:13:33.953

抱歉，如果我误解了您的问题，但您想要在计算器应用程序上显示您迄今为止输入的完整方程式（例如 63+42-62）。

像任何其他计算器一样，您应该有 2 个标签，一个用于当前输入，一个用于显示您输入的所有内容。（我猜您需要后者）

使用第二个标签，您可以将 append 功能添加到您的 digitpressed、enter/= 功能、操作功能中。如果你想调整它，这样 16+23-32 将显示为 1) 16+23 2) 39-32 3) 39-32=7

那么您必须添加自己的特定代码。否则标签将输入为 16+23-32 = 7

# javascript - 在移动屏幕中从纵向移动到横向再回到纵向时，窗口元素在垂直方向上变得不可见？

> ID：10794500
> 
> 赞同：3
> 
> 时间：2012-05-29T07:01:17.133
> 
> 标签：javascript, jquery, css, mobile

在移动应用程序中，我在页面上有一个 div。在这个 div(data-role="page") 中，我还有另一个 div(data-role="content")。现在在这个 div 中我有一个 iframe，我的菜单页面在这个 iframe 中打开。问题是当我以横向打开应用程序并将方向更改为纵向时，我的菜单的一半垂直削减。请帮助我缺少什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:18:46.037

这是在IOS上吗？

如果是这样，这是一个苹果错误。可以在此处找到修复程序；

[https://github.com/RatioInteractive/HTML5-Mobile-Boilerplate/blob/master/js/helper.js](https://github.com/RatioInteractive/HTML5-Mobile-Boilerplate/blob/master/js/helper.js)

另外，请查看 index.html 中的此类内容；

```
 <!-- Mobile viewport optimization h5bp.com/ad -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width">
  <!-- ========== --> 
```

# svn - 每天晚上在 TeamCity 上强制清洁结帐

> ID：10794503
> 
> 赞同：3
> 
> 时间：2012-05-29T07:01:33.343
> 
> 标签：svn, teamcity

我有一个构建设置来触发更改。我还有一个每晚 00:00 的构建触发器。但我希望那个人强制进行干净的结帐。有没有办法在触发器或类似设备上执行此操作，还是我必须创建一个全新的设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T15:21:58.887

在 teamcity 7.x 中，当您添加新的计划触发器时，您有一个复选框（“在构建之前清理检出目录中的所有文件”）。

[http://confluence.jetbrains.net/display/TCD7/What%27s+New+in+TeamCity+7.0#What%27sNewinTeamCity7.0-Cleansources](http://confluence.jetbrains.net/display/TCD7/What%27s+New+in+TeamCity+7.0#What%27sNewinTeamCity7.0-Cleansources)

请参阅更改日志。

只更新到这个版本。

# iphone - 重播选项不在 UIWebView 中显示 youtube 视频？

> ID：10794512
> 
> 赞同：2
> 
> 时间：2012-05-29T07:02:27.240
> 
> 标签：iphone, ipad, uiwebview, youtube

目前我正在尝试在我的应用程序 UIWebView 中播放一个 youtube 视频。第一次播放时，视频播放完美，我可以看到和收听视频和音频，但是当视频完全播放并且我选择视频屏幕中存在的重播选项时，视频没有显示任何内容（它只是显示黑色屏幕），但我可以听到音频。

我哪里出错了，如何解决这个问题？

使用的工具：XCode：4.3.2，iOS：5.1

# android - 使用媒体播放器播放音频文件的 Android 问题

> ID：10794514
> 
> 赞同：2
> 
> 时间：2012-05-29T07:02:48.183
> 
> 标签：android, audio, media-player

我从本地服务器下载音频文件，并保存本地路径，然后播放我有问题的音频文件，我附上了编码和 logcat，请任何人解决我的问题，

## 编码

公共类 MainActivity 扩展 Activity {

```
 private static String fileName = "e1.mp3";
 String PATH="/data/data/com.ismail/sounds";
 @Override
 public void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try {
       // URL url = new URL("http://commonsware.com/misc/test2.3gp");
         URL url = new URL("http://192.168.0.2/supplications/A.1.1.1.mp3");
        HttpURLConnection c = (HttpURLConnection) url.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();

       // String PATH = Environment.getExternalStorageDirectory()+ "/download/";
        Log.v("log_tag", "PATH: " + PATH);
        File file = new File(PATH);
        file.mkdirs();
        File outputFile = new File(file, fileName);
        FileOutputStream fos = new FileOutputStream(outputFile);

        InputStream is = c.getInputStream();

        byte[] buffer = new byte[1024];
        int len1 = 0;
        while ((len1 = is.read(buffer)) != -1) {
            fos.write(buffer, 0, len1);
        }
        fos.close();
        is.close();
    } catch (IOException e) {
        Log.d("log_tag", "Error: " + e);
    }
    Log.v("log_tag", "Check: ");

    Button btn=(Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
            try {
                audioPlayer(PATH,fileName);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    });
}

 public void audioPlayer(String path, String fileName) throws FileNotFoundException{
        //set up MediaPlayer    
        MediaPlayer mp = new MediaPlayer();

        FileInputStream fileInputStream = new FileInputStream(PATH);

        try {
            mp.setDataSource(fileInputStream.getFD());
           // mp.setDataSource(path+"/"+filename.mp3);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            mp.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mp.start();
    }
 } 
```

## LOGCAT 错误

```
05-28 20:48:08.604: V/log_tag(6165): PATH: /data/data/com.ismail/sounds
05-28 20:48:18.893: V/log_tag(6165): Check: 
05-28 20:49:06.513: E/MediaPlayer(6165): Unable to to create media player
05-28 20:49:21.778: W/System.err(6165): java.io.IOException: setDataSourceFD failed.: status=0x80000000
05-28 20:49:21.813: W/System.err(6165):     at android.media.MediaPlayer.setDataSource(Native Method)
05-28 20:49:21.834: W/System.err(6165):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:749)
05-28 20:49:21.853: W/System.err(6165):     at com.ismail.MainActivity.audioPlayer(MainActivity.java:84)
05-28 20:49:21.874: W/System.err(6165):     at com.ismail.MainActivity$1.onClick(MainActivity.java:67)
05-28 20:49:21.903: W/System.err(6165):     at android.view.View.performClick(View.java:2408)
05-28 20:49:21.936: W/System.err(6165):     at android.view.View$PerformClick.run(View.java:8816)
05-28 20:49:21.964: W/System.err(6165):     at android.os.Handler.handleCallback(Handler.java:587)
05-28 20:49:21.983: W/System.err(6165):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-28 20:49:22.004: W/System.err(6165):     at android.os.Looper.loop(Looper.java:123)
05-28 20:49:22.023: W/System.err(6165):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-28 20:49:22.055: W/System.err(6165):     at java.lang.reflect.Method.invokeNative(Native Method)
05-28 20:49:22.084: W/System.err(6165):     at java.lang.reflect.Method.invoke(Method.java:521)
05-28 20:49:22.103: W/System.err(6165):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-28 20:49:22.134: W/System.err(6165):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-28 20:49:22.143: W/System.err(6165):     at dalvik.system.NativeStart.main(Native Method)
05-28 20:49:23.664: E/MediaPlayer(6165): prepareAsync called in state 1
05-28 20:49:55.144: W/System.err(6165): java.lang.IllegalStateException
05-28 20:49:55.164: W/System.err(6165):     at android.media.MediaPlayer.prepare(Native Method)
05-28 20:49:55.173: W/System.err(6165):     at com.ismail.MainActivity.audioPlayer(MainActivity.java:97)
05-28 20:49:55.194: W/System.err(6165):     at com.ismail.MainActivity$1.onClick(MainActivity.java:67)
05-28 20:49:55.223: W/System.err(6165):     at android.view.View.performClick(View.java:2408)
05-28 20:49:55.244: W/System.err(6165):     at android.view.View$PerformClick.run(View.java:8816)
05-28 20:49:55.274: W/System.err(6165):     at android.os.Handler.handleCallback(Handler.java:587)
05-28 20:49:55.303: W/System.err(6165):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-28 20:49:55.334: W/System.err(6165):     at android.os.Looper.loop(Looper.java:123)
05-28 20:49:55.354: W/System.err(6165):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-28 20:49:55.374: W/System.err(6165):     at java.lang.reflect.Method.invokeNative(Native Method)
05-28 20:49:55.394: W/System.err(6165):     at java.lang.reflect.Method.invoke(Method.java:521)
05-28 20:49:55.423: W/System.err(6165):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-28 20:49:55.474: W/System.err(6165):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-28 20:49:55.495: W/System.err(6165):     at dalvik.system.NativeStart.main(Native Method)
05-28 20:49:59.664: E/MediaPlayer(6165): start called in state 1
05-28 20:50:09.786: D/dalvikvm(6165): Debugger has detached; object registry had 456 entries 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:15:59.997

如下修改您的代码并尝试：

```
 @Override
    public void onClick(View v) 
    {
        try {
             Uri uri = Uri.fromFile(outputFile);
             audioPlayer(PATH,uri);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

public void audioPlayer(String path, Uri uri) throws FileNotFoundException{
    //set up MediaPlayer    
    MediaPlayer mp = MediaPlayer.create(this, uri);
    mp.setLooping(false); // Set looping
    mp.start();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T14:44:21.063

确保在清单中包含 INTERNET 权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# ibm-mq - MQ 选择性出队速度有时很糟糕

> ID：10794521
> 
> 赞同：3
> 
> 时间：2012-05-29T07:03:50.077
> 
> 标签：ibm-mq, spring-jms

我有一个进程用于`JMSTemplate`根据 JMS 标头值选择性地从 MQ 队列中出列。

当 dequeue 查询匹配队列前面的消息时，dequeue 速率大约为 60-70 msg/秒。但是，当查询仅匹配深度为 50、100 或 200 条消息的消息时，出队率下降到 1 msg / 3-4 秒。

快速出队查询是`ThreadId='24' or ThreadId='PRIMARY'`. 慢出队查询是`ThreadId='24'`.

处理时间缓慢的真正原因可能是其他原因，但我观察到处理时间的变化只不过是取消选择查询的变化。

我怀疑这种处理速度并不常见。可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:33:37.617

不建议按标题查询深度队列，因为标题没有被索引。这可能是问题所在。CorrelationId 和 MessageId 上的查询（如果它们的格式为“ID：48-hex-digits”）将被编入索引并且速度非常快（约 1 毫秒/在非常深的队列上查询，具体取决于设置）。

我们也遇到了这个问题，并选择在相关 id 标头中而不是在 JMS 字符串属性 (MQRFH2/usr) 标头中编码相关标识符。

这是在 MQ 7.0 上

# java - 使用 JAXB 未显示元素

> ID：10794522
> 
> 赞同：2
> 
> 时间：2012-05-29T07:03:52.733
> 
> 标签：java, jaxb

我正在尝试将具有表名、行数和列列表的表 bean 输出到 XML。如果我将它们注释为属性，它们会显示：所以这个定义：

```
@XmlRootElement(name = "table")
public class Table {

    private String tableName;
    private int rowCount;
    private List<Column> columnList;

    @XmlAttribute(name = "name")
    public String getTableName() {
        return tableName;
    }

    @XmlAttribute(name = "rowCount")
    public int getRowCount() {
        return rowCount;
    }

    @XmlElement(name = "column")
    public List<Column> getColumnList() {
        return columnList;
    }

} 
```

输出这个：

```
 <tables>
     <table name="GGS_MARKER" rowCount="19190">
     <column>
      <columnName>MARKER_TEXT</columnName>
      <datatype>VARCHAR2</datatype>
      <length>4000.0</length>
     </column>
... 
```

但是，如果我用@XmlElement 更改@XmlAttribute，它只会显示：

```
 <tables>
     <table>
     <column>
      <columnName>MARKER_TEXT</columnName>
      <datatype>VARCHAR2</datatype>
      <length>4000.0</length>
     </column>
... 
```

我应该在课堂上放什么来获得“名称”和“行数”作为元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:55:11.237

在您的示例中，您需要做的就是更改`@XmlAttribute`为`@XmlElement`. 如果像在您的帖子中那样，您只有`get`方法而不是`set`方法，则需要显式添加`@XmlElement`注释，因为在此用例中不会应用默认注释（默认情况下，假定所有未映射的属性都有`@XmlElement`注释）。

**桌子**

```
package forum10794522;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "table")
public class Table {

    static Table EXAMPLE_TABLE;
    static {
        EXAMPLE_TABLE = new Table();
        EXAMPLE_TABLE.tableName = "GGS_MARKER";
        EXAMPLE_TABLE.rowCount = 19190;
        List<Column> columns = new ArrayList<Column>(2);
        columns.add(new Column());
        columns.add(new Column());
        EXAMPLE_TABLE.columnList = columns;
    }

    private String tableName;
    private int rowCount;
    private List<Column> columnList;

    @XmlElement(name = "name")
    public String getTableName() {
        return tableName;
    }

    @XmlElement(name = "rowCount")
    public int getRowCount() {
        return rowCount;
    }

    @XmlElement(name = "column")
    public List<Column> getColumnList() {
        return columnList;
    }

} 
```

**演示**

```
package forum10794522;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Table.class);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(Table.EXAMPLE_TABLE, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<table>
    <column/>
    <column/>
    <rowCount>19190</rowCount>
    <name>GGS_MARKER</name>
</table> 
```

# cocos2d-iphone - 应用程序在目标 c 中的 NSException 处崩溃

> ID：10794524
> 
> 赞同：1
> 
> 时间：2012-05-29T07:04:01.930
> 
> 标签：cocos2d-iphone

这是我的代码。在此我的应用程序在“CheckIntersectOrNot”方法处崩溃。在此方法中，它在“[self DifferentColorBalls:loBall];”行崩溃。在这我也使用异常它不起作用。

```
 -(void)CheckIntersectOrNot:(BallImage *)loBall{
        BallImage *loTar = (BallImage *)[self getChildByTag:200];
        if (CGRectIntersectsRect([loTar boundingBox], [loBall boundingBox])) {
            [loTar stopAllActions];
            checkCollsionEnable = YES;
            if (loTar.BallColor == loBall.BallColor) {
                //same color
                [self SameColorBall:loBall TargetBall:loTar];
            }
            else{
                //different color balls
                @try {
                    if (loBall != nil ) {
                        [loBall retain];
                        if (GameOverCompleted == 2) {
                            return;
                        }
                        [self DifferentColorBalls:loBall];
                    }
                }
                @catch (NSException *exception) {
                    NSLog(@"exception:%@",exception);
                }
            }
            checkCollsionEnable = NO;
        }
    }

    -(void)DifferentColorBalls:(BallImage *)loBall{
        if (GameOverCompleted == 2 ) {
            return;
        }
         [[SimpleAudioEngine sharedEngine] playEffect:@"BallSound2.wav"];
        @try {

            CGPoint tarPoint;
            BallImage *loTar = (BallImage *)[self getChildByTag:200];
            int index = [self.mBallImageArray indexOfObject:loBall];
            tarPoint = loBall.position;
            int ballangle = loBall.ballAngle;
            int ballDirection = loBall.BallDirection;
            for (int i = index; i>= 0; i--) {
                BallImage *loba = [self.mBallImageArray objectAtIndex:i];
                [self Movenext:loba];
            }
            [loTar setTag:-1];
            loTar.BallAnimationEnable = 1;
            loTar.position = tarPoint;
            loTar.ballAngle = ballangle;
            loTar.BallDirection = ballDirection;
            @try {
                if (loTar != nil) {
                    [self.mBallImageArray insertObject:loTar atIndex:++index];
                }
            }
            @catch (NSException *exception) {
                NSLog(@"differnet loTar ball :%@",exception);
            }

            [self CreteTargetBallImage];
        }
        @catch (NSException *exception) {
            NSLog(@"exception DifferentColorBalls :%@",exception);
        }
        @finally {

        }

    }
    -(void)Movenext:(BallImage *)loBall{
        int loop = loBall.contentSize.width/AnimationMoveLength;
        for (int i = 0; i<loop; i++) {
            @try {
                [self BallNextposition:loBall];
            }
            @catch (NSException *exception) {
                NSLog(@"Movenext exception :%@",exception);
            }
        }

    }
    -(void)BallNextposition:(BallImage *)loBall{

        [self DisableForBallAnimation:loBall];
        if (!loBall.BallAnimationEnable) {
            return;
        }
        if (loBall.BallForwardEnable == 0) {
            [self MoveBackPosition:loBall];
            return;
        } 
        CGPoint point1, point2, point3;
        CGPoint ballPosition = loBall.position;
        CGRect BoxRect = CGRectMake(40, 40, 22, 244);
        CGRect BoxRect2 = CGRectMake(40, 0, 100, 40);
        CGRect BoxRect3 = CGRectMake(94, 40, 22, 207);
        CGRect BoxRect4 = CGRectMake(94, 245, 100, 44);
        CGRect BoxRect12 = CGRectMake(363, 10, 80, 34);
        CGRect BoxRect13 = CGRectMake(418, 40, 24, 233);
        CGRect BoxRect14 = CGRectMake(405, 272, 50, 50);
        if (CGRectContainsPoint(BoxRect, ballPosition) && loBall.BallDirection == 0) {        
            point1 = CGPointMake(50, 283);
            point2 = CGPointMake(50, 40);
           loBall.position =  [self DrawStrightLine:point1 SecondPoint:point2 BallMovementlength:AnimationMoveLength t:loBall.ballAngle];
            loBall.ballAngle++;
            if (CGRectContainsPoint(BoxRect2, loBall.position)) {
                loBall.ballAngle = 1;
                loBall.BallDirection = 1;
            }
        }
        else if (CGRectContainsPoint(BoxRect2, ballPosition) && loBall.BallDirection == 1) {
            point1 = CGPointMake(50, 40);
            point2 = CGPointMake(77, 10);
            point3 = CGPointMake(104, 40);
            loBall.position = [self DrawCurve:point1 secondPoint:point2 thirdPoint:point3 BallMovementlength:AnimationMoveLength t:loBall.ballAngle];
            loBall.ballAngle++;
            if (CGRectContainsPoint(BoxRect3, loBall.position)) {
                loBall.ballAngle = 1;
                loBall.BallDirection = 2;
            }
        }
        else if (CGRectContainsPoint(BoxRect13, ballPosition) && loBall.BallDirection == 13){
           // AnimationMoveLength = 4;
          //  loBall.BallForwardEnable = 0;
            GameOverCompleted = 2;
            [self GameOver];
            [self RemoveBallsFromBG:loBall];

        }
        else{
            NSLog(@"loBall.position:%@",NSStringFromCGPoint(loBall.position));
        }
    }

    -(void)RemoveBallsFromBG:(BallImage *)loBall{
        [loBall runAction:[CCScaleTo actionWithDuration:0.1 scale:.1]];
        [self.mBallImageArray removeObject:loBall];
        [self removeChild:loBall cleanup:YES];
        loBall = nil;
        BallImage *loTarSpr = (BallImage *)[self getChildByTag:200];
        [self removeChild:loTarSpr cleanup:YES];
        loTarSpr = nil;
        if ([self.mBallImageArray count] == 0) {
            [self unscheduleAllSelectors];
            [self LossGame];
        }
    }
    -(void)GameOver{

        static int i = 0;
        if (i == 0) {
            i++;
            for (int loop = 0; loop < [self.mBallImageArray count]; loop++) {
                BallImage *loBall = [self.mBallImageArray objectAtIndex:loop];
                loBall.BallAnimationEnable = 1;
            }
            [self unscheduleAllSelectors];
            [self schedule:@selector(MoveBall:)];
        }
        if ([self.mBallImageArray count] == 0) {
            [self LossGame];
            [self unscheduleAllSelectors];
            i = 0;
        }
    }

    -(void)WinGame{
        GameOverCompleted = 2;
        NSLog(@"WinGame");
        [[SimpleAudioEngine sharedEngine] stopBackgroundMusic];
        [CommonUserDetails sharedUserDetails].GameWinOrNot = 1;
        [CommonUserDetails sharedUserDetails].GameScore = TotalScore;
        [[CommonUserDetails sharedUserDetails].HighScoreArray addObject:[NSString stringWithFormat:@"%d",TotalScore]];
        if ([[CommonUserDetails sharedUserDetails].HighScoreArray count] > 50) {
            [[CommonUserDetails sharedUserDetails].HighScoreArray removeObjectAtIndex:0];
        }
        [[CommonUserDetails sharedUserDetails] saveToUserDefaults];
        [self unscheduleAllSelectors];
        [[CCDirector sharedDirector] replaceScene:[GameOverScene node]];
    }
    -(void)LossGame{
        GameOverCompleted = 2;
        [[SimpleAudioEngine sharedEngine] stopBackgroundMusic];
        [CommonUserDetails sharedUserDetails].GameWinOrNot = 0;
        [CommonUserDetails sharedUserDetails].GameScore = TotalScore;
        [[CommonUserDetails sharedUserDetails].HighScoreArray addObject:[NSString stringWithFormat:@"%d",TotalScore]];
        if ([[CommonUserDetails sharedUserDetails].HighScoreArray count] > 50) {
            [[CommonUserDetails sharedUserDetails].HighScoreArray removeObjectAtIndex:0];
        }
        [[CommonUserDetails sharedUserDetails] saveToUserDefaults];
        [self unscheduleAllSelectors];
        [[CCDirector sharedDirector] replaceScene:[GameOverScene node]];
        NSLog(@"Loss Game");
    } 
```

任何人请帮我解决这个问题。为什么它会崩溃并对此问题提出任何建议非常感谢

# c# - 在 c# 中创建一个 xml 文档并将该文件存储到项目的 bin 文件夹中

> ID：10794525
> 
> 赞同：3
> 
> 时间：2012-05-29T07:04:04.373
> 
> 标签：c#, linq-to-xml

我想创建一个 xml 文件。我知道如何使用 linq to xml 概念创建一个 xml 文件。但我想将该文件保存在我项目的 bin 文件夹中。怎么做。

```
 XDocument changesetDB = new XDocument(
                    new XElement("changes",
                            new XElement("change",
                                new XAttribute("path", changedFile),
                                new XAttribute("changesetID", changesetID),
                                new XAttribute("JIRAID", issueID)))); 
```

现在我想将它保存在 bin 文件夹中。有没有可能这样做。谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T07:10:10.280

试用：[XmlDocument.Save 方法（字符串）](http://msdn.microsoft.com/en-us/library/dw229a22.aspx)

```
string path =  Path.GetDirectoryName(Application.ExecutablePath) ;
changesetDB .Save( Path.Combine( path , "data.xml")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T07:14:42.277

```
changesetDB.Save(Path.Combine(AppDomain.CurrentDomain.BaseDirectory,"myfile.xml")); 
```

它将保存`myfile.xml`在`bin/debug`文件夹中

但是，如果要将文件保存到`bin`文件夹，而不是调试或发布，则必须从路径中删除路径的调试部分。您可以执行以下操作。

```
string binDir = AppDomain.CurrentDomain.BaseDirectory.TrimEnd(@"Debug\\".ToCharArray());
 changesetDB.Save(Path.Combine(binDir,"myfile.xml")); 
```

这会将文件保存到`myfile.xml`文件`bin`夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:10:16.807

您的 exe 将在 bin\Debug 或 bin\Rease 中创建，因此 ..\ 将是 bin 文件夹。但是当你使用你的程序时，看看你的目录。

```
changesetDB.Save("..\changesetDB.xml"); 
```

# qt - 如何在不改变其他 Qt 小部件的位置的情况下使 Qt 小部件不可见？

> ID：10794532
> 
> 赞同：47
> 
> 时间：2012-05-29T07:04:24.637
> 
> 标签：qt, layout

我有一个充满 QPushButtons 和 QLabels 以及各种其他有趣的 QWidgets 的窗口，所有这些都使用各种`QLayout`对象动态布局......我想做的是偶尔让其中一些小部件变得不可见。也就是说，不可见的小部件仍会占用窗口布局中的正常空间，但不会被渲染：相反，用户只会在小部件的矩形/区域中看到窗口的背景颜色。

`hide()`和/或`setVisible(false)`不会成功，因为它们会导致小部件从布局中完全移除，从而允许其他小部件扩展以占用“新可用”空间；我想避免的影响。

我想我可以将覆盖（等）的每种`QWidget`类型的子类设置为无操作（在适当的时候），但我更喜欢不需要我创建三打不同子类的解决方案。`paintEvent()``mousePressEvent()``QWidget`

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2016-01-07T18:58:54.973

这个问题在 Qt 5.2 中得到了解决。可爱的解决方案是：

```
QSizePolicy sp_retain = widget->sizePolicy();
sp_retain.setRetainSizeWhenHidden(true);
widget->setSizePolicy(sp_retain); 
```

[http://doc.qt.io/qt-5/qsizepolicy.html#setRetainSizeWhenHidden](http://doc.qt.io/qt-5/qsizepolicy.html#setRetainSizeWhenHidden)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-31T20:36:32.533

我知道的唯一体面的方法是将事件过滤器附加到小部件，并过滤掉重绘事件。无论小部件多么复杂，它都可以工作 - 它可以有子小部件。

下面是一个完整的独立示例。但是，它带有一些警告，需要进一步开发才能完成。只有绘制事件被覆盖，因此您仍然可以与小部件进行交互，只是看不到任何效果。

鼠标点击、鼠标进入/离开事件、焦点事件等仍然会到达小部件。如果小部件依赖于在重绘时完成的某些事情，可能是由于在这些事件上触发了 update()，则可能会出现问题。

至少您需要一个 case 语句来阻止更多事件——比如鼠标移动和单击事件。处理焦点是一个问题：您需要将焦点移到链中的下一个小部件，如果小部件在获得焦点时被隐藏，并且每当它重新获得焦点时。

鼠标跟踪也引起了一些担忧，如果小部件之前正在跟踪，您可能想假装它丢失了鼠标跟踪。正确地模拟这需要一些研究，我不知道 Qt 呈现给小部件的确切鼠标跟踪事件协议是什么。

```
//main.cpp
#include <QEvent>
#include <QPaintEvent>
#include <QWidget>
#include <QLabel>
#include <QPushButton>
#include <QGridLayout>
#include <QDialogButtonBox>
#include <QApplication>

class Hider : public QObject
{
    Q_OBJECT
public:
    Hider(QObject * parent = 0) : QObject(parent) {}
    bool eventFilter(QObject *, QEvent * ev) {
        return ev->type() == QEvent::Paint;
    }
    void hide(QWidget * w) {
        w->installEventFilter(this);
        w->update();
    }
    void unhide(QWidget * w) {
        w->removeEventFilter(this);
        w->update();
    }
    Q_SLOT void hideWidget()
    {
        QObject * s = sender();
        if (s->isWidgetType()) { hide(qobject_cast<QWidget*>(s)); }
    }
};

class Window : public QWidget
{
    Q_OBJECT
    Hider m_hider;
    QDialogButtonBox m_buttons;
    QWidget * m_widget;
    Q_SLOT void on_hide_clicked() { m_hider.hide(m_widget); }
    Q_SLOT void on_show_clicked() { m_hider.unhide(m_widget); }
public:
    Window() {
        QGridLayout * lt = new QGridLayout(this);
        lt->addWidget(new QLabel("label1"), 0, 0);
        lt->addWidget(m_widget = new QLabel("hiding label2"), 0, 1);
        lt->addWidget(new QLabel("label3"), 0, 2);
        lt->addWidget(&m_buttons, 1, 0, 1, 3);
        QWidget * b;
        b = m_buttons.addButton("&Hide", QDialogButtonBox::ActionRole);
        b->setObjectName("hide");
        b = m_buttons.addButton("&Show", QDialogButtonBox::ActionRole);
        b->setObjectName("show");
        b = m_buttons.addButton("Hide &Self", QDialogButtonBox::ActionRole);
        connect(b, SIGNAL(clicked()), &m_hider, SLOT(hideWidget()));
        QMetaObject::connectSlotsByName(this);
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Window w;
    w.show();
    return a.exec();
}

#include "main.moc" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-08T20:26:49.733

您可以使用 QStackedWidget。将您的按钮放在第一页上，将空白 QWidget 放在第二页上，并更改页面索引以使您的按钮在保留其原始空间的同时消失。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T15:18:27.770

我有3个解决方案：

1）子类化您的 QWidget 并使用特殊/自己的 setVisible() 替换方法来打开/关闭小部件的绘画（如果小部件不可见，只需使用覆盖的 paintEvent() 方法忽略绘画）。这是一个肮脏的解决方案，如果您可以通过其他方式做到这一点，请不要使用它。

2) 使用[QSpacerItem](http://qt-project.org/doc/qt-4.8/qspaceritem.html)作为占位符，并将其可见性设置为要隐藏的 QWidget 的对面，但在布局中保留它的位置+大小。

3）您可以使用一个特殊的容器小部件（从 QWidget 继承），它根据子/子小部件的大小获取/同步它的大小。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-14T19:58:54.093

我遇到了类似的问题，最后我在我关心的尺寸和`Expanding`sizeType 的尺寸为 0 的控件旁边放置了一个垫片。然后我用`Expanding`sizeType 标记控件本身并将其拉伸设置为 1。这样，当它可见时，它优先于分隔符，但当它不可见时，分隔符扩展以填充控件通常占用的空间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-29T07:33:47.307

可能是 QWidget::setWindowOpacity(0.0) 是你想要的？但这种方法并不适用于任何地方。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-29T07:55:35.817

一种选择是实现一个新的 QWidgetItem 子类，它总是返回 false `QLayoutItem::isEmpty`。我怀疑由于 Qt 的 QLayout 示例子类[文档](http://doc-snapshot.qt-project.org/4.8/layout.html#further-notes)，这将起作用：

> 我们忽略 QLayoutItem::isEmpty(); 这意味着布局会将隐藏的小部件视为可见的。

但是，您可能会发现在布局中添加项目有点烦人。特别是，如果您这样做，我不确定您是否可以轻松地在 UI 文件中指定布局。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-01T20:32:48.943

[这是来自Kuba Ober](https://stackoverflow.com/users/1329652/kuba-ober)的答案的 C++ Hider 类的 PyQt 版本。

```
class Hider(QObject):
    """
    Hides a widget by blocking its paint event. This is useful if a
    widget is in a layout that you do not want to change when the
    widget is hidden.
    """
    def __init__(self, parent=None):
        super(Hider, self).__init__(parent)

    def eventFilter(self, obj, ev):
        return ev.type() == QEvent.Paint

    def hide(self, widget):
        widget.installEventFilter(self)
        widget.update()

    def unhide(self, widget):
        widget.removeEventFilter(self)
        widget.update()

    def hideWidget(self, sender):
        if sender.isWidgetType():
            self.hide(sender) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-31T20:46:24.747

我相信您可以使用[QFrame](http://qt-project.org/doc/qt-4.8/qframe.html)作为包装器。虽然可能有更好的主意。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-29T07:52:16.370

试试`void QWidget::erase ()`。它适用于 Qt 3。

# c# - 如何安排 C# 代码执行

> ID：10794534
> 
> 赞同：4
> 
> 时间：2012-05-29T07:04:59.473
> 
> 标签：c#, asp.net, web-services

我正在使用 ASP.Net 和 C#。我想在特定时间同步某些东西。我做了一个方法来做到这一点，它的工作。但我的问题是如何每天在特定时间调用此方法。

客户端不信任任何第三方工具，因此无法使用。

Windows 服务不是一个好的解决方案。

如果我做一个网络服务，我应该如何在每天的特定时间调用它？

例如，我想每天晚上 7 点运行方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T07:15:20.237

在启动时，向 HttpRuntime.Cache 添加一个具有固定过期时间的项目。当缓存项过期时，做你的工作，比如 WebRequest 或者你有什么。将项目重新添加到具有固定过期时间的缓存中。

```
private static CacheItemRemovedCallback OnCacheRemove = null;

protected void Application_Start(object sender, EventArgs e)
{
    AddTask("DoStuff", 60);
}

private void AddTask(string name, int seconds)
{
    OnCacheRemove = new CacheItemRemovedCallback(CacheItemRemoved);
    HttpRuntime.Cache.Insert(name, seconds, null,
        DateTime.Now.AddSeconds(seconds), Cache.NoSlidingExpiration,
        CacheItemPriority.NotRemovable, OnCacheRemove);
}

public void CacheItemRemoved(string k, object v, CacheItemRemovedReason r)
{
    // do stuff here if it matches our taskname, like WebRequest
    // re-add our task so it recurs
    AddTask(k, Convert.ToInt32(v));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:08:57.920

您可以使用 windows 计划任务来运行应用程序 (exe) 或[创建 windows 服务并使用 timer](https://stackoverflow.com/questions/503564/how-might-i-schedule-a-c-sharp-windows-service-to-perform-a-task-daily)。看看它也可以使用的[Quartz.NET 。](http://quartznet.sourceforge.net/)

# c# - 在 MTM 测试运行中获取当前内部版本号/环境设置

> ID：10794535
> 
> 赞同：4
> 
> 时间：2012-05-29T07:05:00.403
> 
> 标签：c#, tfs, microsoft-test-manager

我一直在尝试找到一种方法来从 MTM 访问当前内部版本号和/或当前环境设置，以便作为构建的一部分运行测试套件。我希望在我自己的自定义报告中使用此信息，因为 MTM 提供的信息并不能捕获我需要的所有信息。

任何人都能够做到这一点？我读过很多人尝试的帖子，但它们似乎都以死胡同或 Test Scribe 结尾，它只在 word doc 中输出相同的数据并且受到相当的限制（没有要保存的自定义文件路径，并且在测试期间不运行）。

不幸的是，我没有代码来展示我尝试过的东西，因为我什至还没有接近。尽管我已经非常仔细地查看了 VisualStudio2010 中的 TestContext，但它似乎并没有在当前运行的 TestCase 之外获取太多 MTM 信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T09:15:00.737

您可以为此使用[TFS API](http://msdn.microsoft.com/en-us/library/bb130146.aspx)。

我们已经实现了一个外部项目（不是作为团队构建的一部分），它通过作为参数传递`TestResults`a或. 我认为，如果您将它用作构建的一部分，您将能够以某种方式在运行时将其作为参数传递，或者只是获取最新的构建。`TestRun``TestRunId``BuildNumber`

您可以查看以下链接以获取更多详细信息：

*   [获取最新版本](http://www.woodwardweb.com/dotnet/tfs_build_api_b_1.html)
*   [获取构建定义和构建详细信息](http://blogs.microsoft.co.il/blogs/shair/archive/2011/01/11/tfs-api-part-33-get-build-definitions-and-build-details.aspx)
*   [获取详细的构建测试结果](http://geekswithblogs.net/TarunArora/archive/2012/05/16/get-detailed-build-test-results-using-the-tfs-api.aspx)
*   [获取构建设置](http://blogs.microsoft.co.il/blogs/shair/archive/2012/05/23/tfs-api-part-46-vs11-team-settings.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T05:32:54.207

您好，您可以使用以下代码通过 MTM 获取计划和构建详细信息

```
WorkItemStore workitemstore = tfsserv.GetService<WorkItemStore>();
        Project tfsproject = workitemstore.Projects[tfsprojectname];
        ITestManagementService Mtmserveice = (ITestManagementService)tfsserv.GetService(typeof(ITestManagementService));
        ITestManagementTeamProject mtmproj = Mtmserveice.GetTeamProject(tfsproject.Name);

        ITestPlan plan = mtmproj.TestPlans.Find(planid);
        Console.WriteLine("Test Plan: {0}", plan.Name);
        Console.WriteLine("Plan ID: {0}", plan.Id);
        Console.WriteLine("Build Currently In Use: {0}", plan.BuildNumber); 
```

# flex4 - flex：如何使一些 sparkgrid 列可编辑

> ID：10794538
> 
> 赞同：1
> 
> 时间：2012-05-29T07:05:24.047
> 
> 标签：flex4, grid

我想让两个火花网格列在复选框单击事件上可编辑。我为此编写了以下代码。但我没有java函数来实现这个。所以任何人都可以帮助我..？

```
<s:DataGrid id="dataGrid" x="3" y="44" width="792" height="243" editable="true"  fontSize="15"
requestedRowCount="4" dataProvider="{getSalesReturnCgt.lastResult}">
<s:columns>
<s:ArrayList>
<s:GridColumn dataField="selectFlag" rendererIsEditable="true"  headerText="SrNo"      width="60" editable="false">
<s:itemRenderer>
<fx:Component>
<s:GridItemRenderer>
<s:layout>
<s:HorizontalLayout horizontalAlign="center" verticalAlign="middle"/>
</s:layout>
</fx:Script>
<s:Label id="srno" text="{cgtsrobj.sr_no}" />
<s:CheckBox id="chkBox" click="chkBox_clickHandler(event)" />   
</s:GridItemRenderer>
</fx:Component>
</s:itemRenderer>
</s:GridColumn>
<s:GridColumn dataField="lot_Id" headerText="Item"></s:GridColumn>
<s:GridColumn dataField="lot_Description" headerText="Item Description"></s:GridColumn>
<s:GridColumn dataField="local_Price" headerText="Rate"></s:GridColumn>
<s:GridColumn dataField="discount" headerText="Discount"></s:GridColumn>
<s:GridColumn dataField="available_qty" headerText="Avail Qty"></s:GridColumn>
<s:GridColumn dataField="return_qty" headerText="Return Qty" id="txtReturn">
<s:itemEditor>
<fx:Component>
<s:TextInput  restrict="0-9" width="20" visible="true" />
</fx:Component>
</s:itemEditor>
</s:GridColumn>
<s:GridColumn dataField="sales_qty" headerText="Sales Qty" >
<s:itemEditor>
<fx:Component>
<s:TextInput restrict="0-9" width="20" visible="true" />     
</fx:Component>
</s:itemEditor>
</s:GridColumn>
<s:GridColumn dataField=" " headerText="Amount"></s:GridColumn>
</s:ArrayList>
</s:columns> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:26:09.170

First of all, you dont need java code for this, now to achieve this, write the chkBox_clickHandler function, from there you should dispatch an event which you should handle in GridItemEditor

# solr - Solr Jira 1143 - 获取部分结果

> ID：10794551
> 
> 赞同：0
> 
> 时间：2012-05-29T07:06:34.447
> 
> 标签：solr, solrj

我意识到当我的一个分片死机/缓慢时，我必须应用 Solr Jira [1143中提到的补丁来返回部分结果。](https://issues.apache.org/jira/browse/SOLR-1143)但是补丁没有明确指定版本。我正在使用 Solr 3.5.0，我可以将补丁应用到我的安装中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:38:54.660

那是一个过时的补丁。

使用此问题中描述的功能：[https ://issues.apache.org/jira/browse/SOLR-3134](https://issues.apache.org/jira/browse/SOLR-3134)

那是在后备箱里。

如果您添加`&shards.tolerant=true`到请求中，它不会因错误（超时或其他）而中止。

# c# - 实体框架：将项目添加到集合不会保留在数据库中

> ID：10794552
> 
> 赞同：1
> 
> 时间：2012-05-29T07:06:45.123
> 
> 标签：c#, .net, entity-framework, many-to-many

我使用模型优先方法创建了一个项目，在我的模型中，我声明了实体之间的多对多关系，`Musician`并且`Session`（代表某种排练或表演）。正如预期的那样，这在我的数据库中生成了一个数据透视表来处理关系，但没有用于中间表的 C# 模型类。所以，在我的`Session`对象上，我有一个`Musicians`声明为的集合`ICollection`：

```
public virtual ICollection<Musician> Musicians { get; set; } 
```

`HashSet`在构造函数中初始化为 a `Session`：

```
public Session()
{
    this.Musicians = new HashSet<Musician>();
} 
```

现在，在我的解决方案的其他地方（在 MVC 控制器中，如果重要的话），我想将现有分配`Musician`给给定的`Session`，所以我有这个代码：

```
Musician musician = db.Musicians.First(m => m.Id == selectedMusician);
session.Musicians.Add(musician);
db.SaveChanges(); 
```

就在`session.Musicians.Add(musician)`调用之后，我检查了音乐家是否已添加到集合中，但调用`db.SaveChanges`似乎不会将更改持久化到数据库中。

顺便说一句，db 是我的存储库，其中包含我所有的模型，例如，这段代码成功地`Session`向数据库添加了一个新的：

```
db.Sessions.Add(session);
db.SaveChanges(); 
```

如果有人能指出我在这种情况下如何将对象添加到集合中的正确方向，那将是一个很大的帮助。

干杯

编辑：原来问题与它是一个集合的事实无关。就像我在帖子中提到的那样，我试图从 ASP MVC 项目中的控制器类进行更改/保存。会话对象是从视图中传入的，但我发现我对这个对象所做的任何更改都不会保留在数据库中（哦，愚蠢的我，应该马上检查一下）。看起来视图传入的对象只是一个副本，因为它不是直接来自上下文（在这种情况下，是我的 db 对象）。为了解决这个问题，我只是在上下文中查询`Session`具有相同 ID 的对象，以便访问我的更改实际上会持续存在的对象。

# meteor - 有什么方法可以知道流星订阅何时“有效”？

> ID：10794555
> 
> 赞同：5
> 
> 时间：2012-05-29T07:06:53.247
> 
> 标签：meteor, publish-subscribe

如果我更改`Session`var 并通过触发重新订阅`autosubscribe`，是否有任何回调机制等到“最新”数据从服务器关闭？[1]

如果你看一下[这个要点](https://gist.github.com/2823011)，你会看到一些代码随着订阅的变化记录集合的内容。输出的相关部分：

```
at Subscribed; comments are: first post on #1 - second post on #1 
at Flushed; comments are: first post on #1 - second post on #1 
at Subscription complete; comments are: first post on #1 - second post on #1 - first post on #2 - second post on #2 
```

因此，即使在 (a) 调用`.subscribe`, (b) 调用`Meteor.flush`(c)之后在;的`onReady`回调中 `.subscribe`集合中仍然有陈旧的数据，只有在第三种情况下才是“正确”的数据。

我意识到响应式模板`.observe`最终会接收到正确的数据，并且事情将“稳定”到正确的状态。但是有什么方法可以告诉我们我们还没有到达那里吗？

例如，大多数流星示例应用程序（以及我自己的应用程序）在从订阅的集合中添加和删除数据时都容易出现抖动（类似于 FOUC）。如果我们可以判断订阅正在“加载”，我们可以对此做一些事情。

[1] 显然，服务器上的数据在不断变化，但正如您将在要点中看到的那样，我无法（没有超时）找到它甚至正确的点。因此，我在问题中使用了“有效”。

**一个非常简单和常见的用例**

使用 makewith 应用程序；当您第一次加载它时，似乎没有注册任何应用程序，直到数据通过网络传输并且应用程序突然出现。

这样做的原因是`Meteor.subscribe`已调用，但数据尚未传出。但是模板没有简单的方法来告诉数据是待处理的并且它应该显示一个“加载”模板。在[madewith](https://github.com/meteor/madewith/blob/master/client/startup.js)中，它们实际上在数据加载时会做一些事情，但这是一个回调，因此打破了正常的meteor做事方式（即反应式编码）。

能够编写如下内容会更好（IMO）：

```
 {{unless apps_loaded}}{{> loading}}{{/unless}} 
```

和

```
 Template.madewith.apps_loaded = function() { return !Apps.isComplete(); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:44:41.333

有趣的问题。

通知新订阅的正确位置是`onReady`回调。请注意那里发生的日志记录总是包含您的新数据。检查 (a) 和 (b) 没有用，因为在调用`subscribe`和所有数据从服务器到达之间存在延迟。

潜在的问题是，一旦刚刚停止的订阅的数据被删除，就没有等效的`onRemove`回调运行。此外，`autosubscribe`在停止旧的潜艇之前故意启动新的潜艇，以避免闪烁。

真正的用例是什么？大多数时候这样的回调是不必要的，因为模板也可以将它们的查询限制在应该在范围内的数据上。在您的示例中，呈现评论的模板助手可能只查询当前`post_id`会话中的评论，因此在数据库中添加额外的评论并没有什么坏处。像这样的东西：

```
Template.post.comments = function () {
  return Comments.find({post_id: Session.get('post_id')});
}; 
```

这允许策略比通用`autosubscribe`功能更复杂，例如订阅用户查看的最后三个帖子的评论。或者，订阅每个帖子的前几条评论，然后仅在选择该帖子时单独订阅帖子的完整评论集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T10:31:41.953

我参加流星派对有点晚了，所以我不知道添加流星功能的历史，但为了完整起见，现在可以使用模板级订阅和 'subscriptionsReady' 来做到这一点：

```
[js]
Template.myTemplate.onCreated(function() {
  this.subscribe('myData');
});

[html]
<template name="myTemplate">
  <h2>my Template</h2>
  {{#if Template.subscriptionsReady}}
    // code to loop/display myData
  {{else}}
    <p>Please wait..</p>
  {{/if}}
</template> 
```

# javascript - 如何在 javascript/jquery 循环中的 x 项之后包装元素？

> ID：10794558
> 
> 赞同：1
> 
> 时间：2012-05-29T07:06:59.397
> 
> 标签：javascript, jquery, json, loops

我在这里遇到了javascript循环的小问题。

我有一个点击方法，它从 json 文件接收数据并将该内容放入 div。

在 jquery ajax 成功方法看起来像这样。

```
'success' : function(data) {
                items.push('<div class="home-page-slide-item"><ul>');   
        $.each(data, function(i, item) {
            if(!item.noData) {
                if(i % 7 == 0) {
                items.push('</ul></div><div class="home-page-slide-item"><ul>');
            }

            items.push('<li><a href="' + item.link + '"><img src="' + item.poster + '" /><span>' + item.title + '</span></a></li>');
            }
                });
                $("div#" + $.cookie('type') + "-slides .home-page-slides").html(items.join(''));
        } 
```

在每 7 个列表项之后，它必须包含在 ul 和 div 标签中。
它确实包装了，但它还在此循环之前添加了第一个额外的 div > ul 标签，我该如何删除它？如何在成功方法“items”数组中重新排序以获得想要的结果？

这是我得到的屏幕。

![这是我得到的屏幕。](../Images/699596b138d61948b00a98ec709a5326.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:13:26.513

```
if(i % 7 == 0  && i > 0) { //skip first occasion since 0 % 7 === 0

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:13:27.440

我认为您在推送之前检查了 if(i % 7 == 0) 。你必须在推后尝试这个

```
'success' : function(data) {
                items.push('<div class="home-page-slide-item"><ul>');   
        $.each(data, function(i, item) {

            items.push('<li><a href="' + item.link + '"><img src="' + item.poster + '" /><span>' + item.title + '</span></a></li>');

            if(!item.noData) {
                if(i % 7 == 0) {
                items.push('</ul></div><div class="home-page-slide-item"><ul>');
            }

            }
                });
                $("div#" + $.cookie('type') + "-slides .home-page-slides").html(items.join(''));
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:13:33.263

改变

```
if(i % 7 == 0) { 
```

到

```
if(i > 0 && i % 7 == 0) { 
```

那是因为`0 % 7 == 0`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T07:17:51.123

不是 0 % 7 = 0 吗？我认为您还应该检查 i = 0 并删除这种情况，有点像这样： if(!item.noData && i != 0) { ... }

# android - 单击检查数据按钮时出现空指针异常

> ID：10794559
> 
> 赞同：2
> 
> 时间：2012-05-29T07:07:01.647
> 
> 标签：android

> **可能重复：**
> [单击按钮时引发空指针异常](https://stackoverflow.com/questions/11080994/nullpointer-exception-raises-when-i-click-on-the-button)

当我单击 Checkdata 按钮时，我在 CheckData.java **DataManipulator.createCertificatesEntry( (Certificates) testCertificates) 中得到空指针异常；**

```
public class DataManipulator {
    public static final String KEY_IMG = "image";

     private DatabaseHelper mDbHelper;
        private SQLiteDatabase mDb;

        private static final String DATABASE_NAME = "DBtest";
        private static final int DATABASE_VERSION = 1;

    private static final String CERTIFICATES_TABLE = "certificates";

    private static final String CREATE_CERTIFICATES_TABLE = "create table "+CERTIFICATES_TABLE+" (" +KEY_IMG+" blob not null) ";

    private final Context mCtx;
    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_CERTIFICATES_TABLE);
        }

        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS "+CERTIFICATES_TABLE);
            onCreate(db);
        }
    }
    public void Reset() { mDbHelper.onUpgrade(this.mDb, 1, 1); }

    public DataManipulator(Context ctx) {
        mCtx = ctx;
        mDbHelper = new DatabaseHelper(mCtx);
    }

    public DataManipulator open() throws SQLException {
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() { mDbHelper.close(); }

    public void createCertificatesEntry(Certificates certificates) {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        certificates.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
        ContentValues cv = new ContentValues();
        cv.put(KEY_IMG, out.toByteArray());
        mDb.insert(CERTIFICATES_TABLE,  null, cv);
    }
    public Certificates getFirstCertificatesFromDB() throws SQLException {
        Cursor cur = mDb.query(true, CERTIFICATES_TABLE,  new String[] {KEY_IMG}, null, null, null, null, null, null);
        if(cur.moveToFirst()) {
            byte[] blob = cur.getBlob(cur.getColumnIndex(KEY_IMG));
            ByteArrayInputStream inputStream = new ByteArrayInputStream(blob);
            Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
            cur.close();
            return new Certificates(bitmap);
        }
        cur.close();
        return null;
    }    
} 
```

这是 DataManipulator.java **certificate.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out) 的第 60 行；**

```
public class CheckData extends ListActivity  {     
    TextView selection;
    DataManipulator dm;
    private DataManipulator DataManipulator;
    protected void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);
            setContentView(R.layout.check);
        dm = new DataManipulator(this);

        LinearLayout layout = new LinearLayout(this);
        ImageView image = new ImageView(this);
        DataManipulator = new DataManipulator(this);

        Certificates testCertificates = new Certificates(BitmapFactory.decodeFile(Context.STORAGE_SERVICE));

        DataManipulator.open();
        DataManipulator.createCertificatesEntry( (Certificates) testCertificates);
        DataManipulator.close(); 

        DataManipulator.close();

        testCertificates = null;

        DataManipulator.open();
        testCertificates = DataManipulator.getFirstCertificatesFromDB();
        DataManipulator.close();

        image.setImageBitmap(((Certificates) testCertificates).getBitmap());
        setContentView(layout);
    }
} 
```

这是我的 CheckData.java **DataManipulator.createCertificatesEntry( (Certificates) testCertificates);的第 29 行**

这是我的日志猫

```
05-29 14:51:46.908: E/AndroidRuntime(741): FATAL EXCEPTION: main
05-29 14:51:46.908: E/AndroidRuntime(741): java.lang.RuntimeException: Unable to start activity ComponentInfo{list.certificates/list.certificates.CheckData}: java.lang.NullPointerException
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.os.Looper.loop(Looper.java:137)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.app.ActivityThread.main(ActivityThread.java:4340)
05-29 14:51:46.908: E/AndroidRuntime(741):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 14:51:46.908: E/AndroidRuntime(741):  at java.lang.reflect.Method.invoke(Method.java:511)
05-29 14:51:46.908: E/AndroidRuntime(741):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-29 14:51:46.908: E/AndroidRuntime(741):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-29 14:51:46.908: E/AndroidRuntime(741):  at dalvik.system.NativeStart.main(Native Method)
05-29 14:51:46.908: E/AndroidRuntime(741): Caused by: java.lang.NullPointerException
05-29 14:51:46.908: E/AndroidRuntime(741):  at list.certificates.DataManipulator.createCertificatesEntry(DataManipulator.java:60)
05-29 14:51:46.908: E/AndroidRuntime(741):  at list.certificates.CheckData.onCreate(CheckData.java:29)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.app.Activity.performCreate(Activity.java:4465)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-29 14:51:46.908: E/AndroidRuntime(741):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
05-29 14:51:46.908: E/AndroidRuntime(741):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:23:51.610

当您在 DataManipulator.createCertificatesEntry( (Certificates) testCertificates) 行传递 Activity 中为空的“对象 testCertificates”时；

在 DataManipulator.createCertificatesEntry 方法中，证书为空，因此 certificate.getBitmap() 将在这里通过空指针 excption

```
 public void createCertificatesEntry(Certificates certificates) 
    { 
     ByteArrayOutputStream out = new ByteArrayOutputStream();
     certificates.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
     ContentValues cv = new ContentValues();
     cv.put(KEY_IMG, out.toByteArray());
     mDb.insert(CERTIFICATES_TABLE, null, cv);
     } 
```

所以要么检查 createCertificatesEntry 方法

或者

使用此行在 Activity 中的 DataManipulator.createCertificatesEntry 中传递非空值

证书 testCertificates = new Certificates(BitmapFactory.decodeFile(Context.STORAGE_SERVICE));

以上

DataManipulator.createCertificatesEntry((Certificates) testCertificates);

# powershell - 如何将帮助内容通过管道传输到 PowerShell 中的选择字符串？

> ID：10794564
> 
> 赞同：7
> 
> 时间：2012-05-29T07:07:14.187
> 
> 标签：powershell

我只是想在有关某些命令的帮助中找到特定部分：

```
help rd | select-string -pattern 'cmd' 
```

但我得到的只有错误。怎么了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T08:33:10.760

在 ISE 中，帮助函数发出 MamlCommandHelpInfo 对象。在内部，帮助功能通过管道将 Get-Help 的输出传送到“更多”实用程序（在控制台中启用帮助分页）。在 ISE 中，“更多”只是简单地写入管道，无论它得到什么。

要解决此问题，请将输出转换为字符串。这将在 ISE 和 PowerShell 控制台中工作：

```
help rd | out-string -stream | select-string cmd 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T07:10:48.920

```
help rd | Select-String -Pattern 'cmd' 
```

为我工作。或者，试试这个

```
help rd | ? {$_ -match 'cmd'} 
```

# django - django-guardian 示例源代码

> ID：10794566
> 
> 赞同：4
> 
> 时间：2012-05-29T07:07:30.913
> 
> 标签：django, permissions, user-permissions, database-permissions, django-permissions

谁能推荐一个使用 django-guardian 的优秀开源应用程序？我在理解 API 时没有遇到问题，但我很想看一个例子来了解实现最佳实践（数据库设计等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:57:33.253

如果你克隆[django-guardian](https://github.com/lukaszb/django-guardian)源代码，你就有了一个如何使用它的工作示例。在此[链接](https://github.com/lukaszb/django-guardian/blob/master/docs/userguide/admin-integration.rst)中是与 django admin 集成的说明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:09:47.500

Django userena 使用 Django-guardian：[https ://github.com/bread-and-pepper/django-userena](https://github.com/bread-and-pepper/django-userena)

# algorithm - AVL 树：向每个节点添加一个新字段：其树的“大小”，同时插入操作

> ID：10794567
> 
> 赞同：1
> 
> 时间：2012-05-29T07:07:31.850
> 
> 标签：algorithm, graph-algorithm, avl-tree

我正在尝试`Insert`在将新元素插入 AVL 树时更新操作。对操作的更新`insert`将向每个节点添加其根树的大小。

现在，由于我自下而上插入我的元素，那么如果我只是`+1`为巡视时通过的每个节点添加一个，那么在某些情况下这将不起作用，例如当我需要在新树之后平衡树时不平衡，既然我改变了指针，那么计算就不会正确。

任何想法或提示我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:14:38.520

一个简单的解决方案可能是简单地使用大小的定义来修改它。

给出叶子`size = 1`，并且对于每个节点，它是到根节点的一部分，或者是滚动（从下往上）集合的一部分：

```
size(v) = size(v.left) + size(v.right) + 1
            ^                 ^          ^
        size of left     size of right   size of "root"
           subtree        subtree 
```

这将是正确的，因为您在每个步骤中都修改了所有已更改的顶点，并且由于您是自下而上进行的，因此可以正确计算您修改的每个节点的大小。

请注意，它不会影响复杂性，因为对于每个这样的顶点 - 您正在执行恒定数量的 OP，并且您只对您本来会遍历的顶点执行此操作。

# bash - 什么是 shell 脚本（bash）中的 ${ } 命令

> ID：10794568
> 
> 赞同：3
> 
> 时间：2012-05-29T07:07:43.990
> 
> 标签：bash, shell, sh

好吧，我正在学习 Shell Script，这件事让我很烦恼，我找不到 ${ } 应该做的事情

我四处搜索发现 ${ } 用于替换

但我无法理解的是[这里](http://www.cyberciti.biz/faq/finding-bash-shell-array-length-elements/)

如果 ${ } 假设要进行替换，那么

```
distro=("redhat" "debian" "gentoo")

echo ${distro[0]}
echo ${distro[2]}

echo ${#distro[@]} 
```

当没有任何替换时，它怎么会运行上面的代码。

我错了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:12:23.110

`man bash`，搜索`${`with `/\${`，按`n`几下，瞧..

> 可以使用 ${name[subscript]} 引用数组的任何元素。

和

> ${#name[subscript]} 扩展为 ${name[subscript]} 的长度。如果下标是 * 或 @，则扩展是数组中的元素数。

检查前面的段落，您还会发现：

> Arrays are assigned to using compound assignments of the form name=(value1 ... valuen), where each value is of the form [subscript]=string. Indexed array assignments do not require the bracket and subscript.

# jquery-ui - 当我选择特定的 jquery-UI 选项卡时如何触发事件？

> ID：10794571
> 
> 赞同：0
> 
> 时间：2012-05-29T07:07:58.927
> 
> 标签：jquery-ui, jquery-ui-tabs

当我选择一个特定的选项卡而不是任何选定的选项卡时，我正在尝试触发事件。例如，我有 3 个选项卡，如果我选择 tabs-1、tabs-2 或 tabs-3，我想要不同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:14:27.233

```
jQuery(document).ready(function() {
    jQuery(".Tabs").tabs();
    jQuery(".Tabs").tabs("disable",1);
    jQuery(".Tabs").tabs("disable",2);
    jQuery(".Tabs").tabs("disable",3);
    jQuery('.Tabs').bind('tabsselect', function(event, ui) {    
        ui.tab 
        ui.panel
        ui.index
        if (ui.index==0) {
        }else if (ui.index==3) {
            loadFirstTabData();
         }else if (ui.index==3) {
            loadSecondTabData();
        } 
}); 
```

这就是它的工作原理。.Tabs 是选项卡的类属性`<li class='Tabs'>` **注意**：这是一个工作代码

# iphone - 代码如何将单个数组划分为多个数组？

> ID：10794573
> 
> 赞同：-3
> 
> 时间：2012-05-29T07:08:29.473
> 
> 标签：iphone, ios5, nsarray

> **可能重复：**
> [将单个数组分成两个数组的代码如何？](https://stackoverflow.com/questions/10793400/how-is-the-code-for-separation-of-single-array-into-two-arrays)

大家好，当我使用来自所需 URL 的 JSON 解析时，我得到的响应低于单个数组，但在这里我必须将单个数组响应分成三个数组集，一组将具有 TB3257、TB3259、TB3261、TB3263、TB3257、TB3260 和第二个阵列集将具有 TB3258、TB3260、TB3262、TB3259、TB3258 和 TB3261，第三个阵列集将具有 TB3258。那么如何在iphone中将单个数组分成三个数组集的代码？

```
(
    "    TB3257    TB3258",
    "    TB3259    TB3260",
    "    TB3261    TB3262",
    "    TB3263    TB3259",
    "    TB3257    TB3258    TB3258",
    "    TB3260    TB3261" 
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:17:43.743

我刚刚尝试了以下代码：

```
NSArray *yourArray = [NSArray arrayWithObjects:@"TB3257 TB3258", @"TB3259 TB3260", @"TB3261 TB3262", @"TB3263 TB3259", @"TB3257 TB3258 TB3258", @"TB3260 TB3261", nil];
NSMutableArray *firstArray = [NSMutableArray array];
NSMutableArray *secondArray = [NSMutableArray array];
NSMutableArray *thirdArray = [NSMutableArray array];
for (int i = 0; i < [yourArray count]; i++) {
    NSArray *tempArray = [[yourArray objectAtIndex:i]componentsSeparatedByString:@" "];
    [firstArray addObject:[tempArray objectAtIndex:0]];
    [secondArray addObject:[tempArray objectAtIndex:1]];
    if ([tempArray count] == 3) {
        [thirdArray addObject:[tempArray objectAtIndex:2]];
    }
}
NSLog(@"yourArray: %@\nfirst: %@\nsecond: %@\nthird: %@", yourArray, firstArray, secondArray, thirdArray); 
```

输出是：

```
yourArray: (
    "TB3257 TB3258",
    "TB3259 TB3260",
    "TB3261 TB3262",
    "TB3263 TB3259",
    "TB3257 TB3258 TB3258",
    "TB3260 TB3261"
)
first: (
    TB3257,
    TB3259,
    TB3261,
    TB3263,
    TB3257,
    TB3260
)
second: (
    TB3258,
    TB3260,
    TB3262,
    TB3259,
    TB3258,
    TB3261
)
third: (
    TB3258
) 
```

希望能帮助到你

# visual-studio-2008 - Crystal Report XI 中的子报表

> ID：10794576
> 
> 赞同：0
> 
> 时间：2012-05-29T07:08:53.530
> 
> 标签：visual-studio-2008, crystal-reports, report

我对子报告有疑问。如您所知，当您在 Visual Studio 中运行报表并且有子报表时，它们可能会被选中并在另一个窗口中打开。

我必须做什么才能无法选择子报告？

我使用 Visual Studio 2008 和 Crystal Reports XI。

我希望我解释得很好，对不起我的英语：P

问候，

ikermi89

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:58:44.647

到目前为止，我发现唯一可行的方法是将文本对象放在子报表的顶部。如果您知道子报表的大小并且子报表不跨越一页，则此方法有效。

# ruby - Ruby Tk 条目小部件不会更新文本变量

> ID：10794578
> 
> 赞同：1
> 
> 时间：2012-05-29T07:08:59.580
> 
> 标签：ruby, tk

我正在尝试使用 TK 为 Mad Libs 程序在 Ruby 中编写 GUI。本质上，它需要从 Entry 小部件中获取用户的输入，并用该信息替换一行文本中的某些单词。以下是相关代码（$content为父窗口）：

```
$name=TkVariable.new()
name=Tk::Tile::Entry.new($content) {width 7; textvariable $name}.grid(:column =>1, :row  =>0, :sticky => 'we')
# Mad Lib base text
$text=TkVariable.new("My name is #{name.get}.")

# Displays end result
def showResult
display=Tk::Tile::Label.new($content) {textvariable $text}.grid(:column =>0, :row     => 6, :sticky => 'we')
end

# Button to replace input in base text.
# Clicking this button adds a new Label widget containing the text. The variables,
#however, retain whatever value they were initialized to (in this case, nothing)
Tk::Tile::Button.new($content) {text 'Submit'; command 'showResult'}.grid(:column => 1,     :row => 5, :sticky => 'we') 
```

据我了解，name.get 应该给我在 Entry 小部件字段中输入的任何内容。然而 name 和 $name 都没有更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:21:31.330

文本变量不能以这种方式工作。看来您正试图将一个文本变量嵌入到另一个中。当您这样做时`"My name is #{name.get}."`，它会在*执行此语句时*`name`获取变量的值，它不会动态更新。

 *如果您希望条目小部件和标签保持同步，它们需要共享相同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T00:37:02.437

不确定但尝试....

```
def showResult
   $text.value = "My name is #{name.get}."
   display=Tk::Tile::Label.new($content) {textvariable $text}.grid(:column =>0, :row     =>    6, :sticky => 'we')
end 
```

这应该在每次调用 showResult 时更新变量，但不能完全确定使用输入框

这就是我更新 TkVariables 的方式*

# nhibernate - Nhibernate 无法执行查询 - Oracle 过程返回 refcursor

> ID：10794581
> 
> 赞同：0
> 
> 时间：2012-05-29T07:09:10.787
> 
> 标签：nhibernate

我的包包含以下过程-->

包体 myNewack 作为过程 DisplayEmployees(Emplist OUT refCursor) 开始打开 ​​Emplist 用于从员工中选择 EmpId、FirstName、LastName；结尾; 结束我的新包；

我的 hbm 映射文件包含以下命名查询 -->

```
<sql-query name="mytestsp" callable="true">
 call MYNEWPACK.DISPLAYEMPLOYEES()
</sql-query> 
```

从.net，我使用以下代码调用此过程

```
public IList<NhbHelper.Employee> GetEmployees()
{
  IList<NhbHelper.Employee> myList;
  ISession session = NHibernateHelper.GetCurrentSession();
  var query= session.GetNamedQuery("mytestsp");
  return query.List<NhbHelper.Employee>();
} 
```

每当我执行此代码时，我都会收到错误“无法执行查询 [调用 MYNEWPACK.DISPLAYEMPLOYEES()] [SQL:call MYNEWPACK.DISPLAYEMPLOYEES()]”

请帮我解决这个问题，我如何执行返回 refcursor 的 oracle 程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:04:01.883

我猜您缺少 hbm 映射文件中的返回定义。
它应该是这样的：

```
<sql-query name="mytestsp" callable="true">
    <return class="NhbHelper.Employee, NhbHelper" />
    call MYNEWPACK.DISPLAYEMPLOYEES()
</sql-query> 
```

几个月前我在同样的问题上苦苦挣扎。我正在使用 PACKAGES 并想出了这个[解决方案](https://stackoverflow.com/a/9416382/219406)。

如果您想了解更多信息，可以阅读一篇对我有很大帮助的好[文章。](http://mikaelkoskinen.net/post/fluent-nhibernate-oracle-stored-procedure-mapping.aspx)

更新：

您可以混合[使用 HBM 和流利的映射](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-configuration)。

# javascript - Jquery：一次设置/删除两个属性

> ID：10794583
> 
> 赞同：3
> 
> 时间：2012-05-29T07:09:19.150
> 
> 标签：javascript, jquery

我即将学习jquery。有谁知道如何一次设置两个适合以下示例的属性？

**目前我只能给它一个属性。我的目标是能够为选择框“禁用”和“隐藏”提供两个属性**

```
obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true); 
```

**删除属性也是如此：“禁用”和“隐藏”**

```
obj.next('.update').html(data.list).removeAttr('disabled'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T07:11:00.410

```
obj.nextAll('.update')
 .attr({
    disabled: true,
    hidden: true
 })
 .html('<option value="">----</option>'); 
```

根据@nnnnnn 的评论`.prop()`可能比`.attr()`

IE

```
obj.nextAll('.update')
 .prop({
    disabled: true,
    hidden: true
 })
 .html('<option value="">----</option>'); 
```

**[添加多个属性的DEMO](http://jsfiddle.net/yU89X/1/)**

去除

```
// from jQuery1.7, it can be a space-separated list of attributes.

obj.next('.update').html(data.list).removeAttr('disabled hidden'); 
```

**[删除多个属性的演示](http://jsfiddle.net/LxsFs/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:12:45.610

你可以这样做：

```
obj.attr({ firstAttr:firstVal,  secondAttr:secondVal}); 
```

# objective-c - 在编辑模式下，uitextview 上的单个选项卡，关闭键盘

> ID：10794585
> 
> 赞同：1
> 
> 时间：2012-05-29T07:09:37.680
> 
> 标签：objective-c, ios, keyboard, uitextview

当用户单击`uitextview`并处于编辑模式时，我想关闭键盘。有谁知道这是怎么做到的吗？

`touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`没有被解雇。
虽然我不能使用`textViewDidBeginEditing`。

已经包含`UITextViewDelegate`在我的头文件中。在*.m 文件*中，我已将委托设置为`self.textView.delegate = self`以下是捕获触摸事件的代码

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{ 
    [super touchesBegan:touches withEvent:event]; 
    if([self.textView isFirstResponder]) 
    { 
        [self.textView resignFirstResponder]; 
    } 
} 
```

但它没有被我正在使用的 textView 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:57:56.273

当使用捏和触摸事件时，您必须初始化触摸事件。我不记得我的头顶，但它就像

```
 UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:nil];
 tap.numberOfTapsRequired = 1; 
```

把它放在你的 viewDidLoad 中，然后 touchesBegan 应该在你点击屏幕时被调用，哦不要忘记像这样将 (tapGesture) 添加到视图中

```
[self.view addGestureRecognizer:tapGesture]; 
```

希望这可以帮助。

# c++ - 继承的友谊

> ID：10794586
> 
> 赞同：2
> 
> 时间：2012-05-29T07:09:54.107
> 
> 标签：c++

现在，在你们开始肆虐之前，让我出来。是的，我承认它实际上是为了友谊而不是继承，我只是想找到一些方法来获得类似的东西。这是我的情况（没有真正的代码，只是理论）。我正在研究一个简单的抽象游戏引擎框架，起初，我只是要做简单的面向对象/继承方法来分解对象类型。现在，它在纸面上听起来非常好，将实体分解为物理、动画和不动的场景及其所有子类别的子类别。然而，这变成了一个危险的，难以处理完全不同的对象的混乱和相当多的危险转换，如果我错过了我需要强制执行而不是编译器的东西，很容易导致问题，

因此，我提出了一种抽象表示对象的不同方法。我希望有一个实体类，所有实体派生自该实体类都包含一个向量，或者其他一些效果最好的动态可增长数组，它将包含我称之为行为的对象。行为将在指定的时间后更新，这将影响指定对象的成员。这里有些例子。

```
class Force : behavior;               
/*this would be a force, added to the behavior list and apply a constant 
acceleration vector to the object until removed from the behavior list. (or
it's lifetime is exhausted) */

class attackThought : behavior;  
/* For an ai, this would change how it reacts to a scenario by replacing or
even adding actions that it should perform given the change in position
or environment at update.*/

class animation : behavior;
/* You could create an animation, specify the animation that it is to perform, 
add it to the behavior list, and during the time update, it will adjust the 
vertex buffer accordingly, removing itself from the list when the animation
is done */ 
```

问题是，我想从一个基行为类派生，它以不同的方式实现它的一些虚函数，这些虚函数将主要更改实体对象的私有成员（例如对象顶点缓冲区）。我不想操作太多的基本实体代码，以便（在大多数情况下）可以与其他对象类似地对待，我只希望它们的行为完全可操作/可导出。任何人都可以想办法让这个系统在 C++ 中工作，因为我认为它可能真的很酷：P。

顺便说一句，通过友谊，我的意思是基类行为与一些派生实体类交朋友，这可以影响它的私有成员。例如，假设我有一个派生自实体的模型类，并且我想与一个名为动画的派生行为类交朋友，然后由于某种原因从模型派生一个类到更具体类型的对象，如何动画对象操纵这个新模型派生对象的私有成员。

或者可以吗？也欢迎就这种方法的可行性提出意见（只要它们实际上包含批评）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:37:27.923

多年来，我已经看到关于友谊以及它如何影响封装有两种不同的观点：

*   它通过不将成员公开给所有人，而只让受控的实体子集访问它们来帮助改进封装。
*   由于对象应该是自包含的并且应该是修改其内部部分的唯一实体等明显的经典原因，它减少了封装。

我倾向于避免使用友谊并尝试解决它。我更喜欢封装所有内容，不仅仅是为了使其私有化，而是为了能够在不影响类用户的情况下更改其内部实现方式。如果您希望基类能够修改派生类的属性，也许您可​​以考虑使用[模板方法](http://en.wikipedia.org/wiki/Template_pattern)设计模式。基类在派生类上协调调用方法，并确保在基类中定义了通用的抽象操作方法。

至于将类的所有属性都公开“以防万一”，（听起来很危险）我认为最好先将它们全部设为私有，并在需要时考虑将个别属性公开。

# java - 如何使用@ComponentScan 注解扫描多个路径？

> ID：10794587
> 
> 赞同：101
> 
> 时间：2012-05-29T07:09:54.140
> 
> 标签：java, spring, annotations

`@Configuration`我正在使用 Spring 3.1 并使用and`@ComponentScan`属性引导应用程序。

实际开始完成

```
new AnnotationConfigApplicationContext(MyRootConfigurationClass.class); 
```

此 Configuration 类带有注释

```
@Configuration
@ComponentScan("com.my.package")
public class MyRootConfigurationClass 
```

这很好用。但是，我想更具体地了解我扫描的包，所以我尝试了。

```
@Configuration
@ComponentScan("com.my.package.first,com.my.package.second")
public class MyRootConfigurationClass 
```

然而，这失败了，错误告诉我它找不到使用`@Component`注释指定的组件。

做我所追求的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-05-29T07:21:12.470

[@ComponentScan](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/annotation/ComponentScan.html)使用字符串数组，如下所示：

```
@ComponentScan({"com.my.package.first","com.my.package.second"}) 
```

当您只在一个字符串中提供多个包名时，Spring 会将其解释为一个包名，因此无法找到它。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2014-01-24T12:55:24.340

除了将基本包位置指定为字符串之外，还有另一种**类型安全的** *替代方法。*[请参阅此处的 API](http://docs.spring.io/spring/docs/3.1.4.RELEASE/javadoc-api/org/springframework/context/annotation/ComponentScan.html#basePackageClasses%28%29)，但我也在下面进行了说明：

```
@ComponentScan(basePackageClasses = {ExampleController.class, ExampleModel.class, ExmapleView.class}) 
```

将**basePackageClasses**说明符与您的类引用一起使用将告诉 Spring 扫描这些包（就像提到的*替代*方法一样），但是这种方法既是**类型安全的**，又为未来的重构添加了**IDE 支持——在我的书中这是一个巨大的优势。**

从 API 中读取，Spring 建议在您希望扫描的每个包中创建一个无操作标记类或接口，除了用作此属性的引用之外，没有其他用途。

IMO，我不喜欢标记类*（但话又说回来，它们与包信息类非常相似）*，但类型安全、IDE 支持以及大幅减少此扫描所需包含的基本包的数量毫无疑问，这是一个更好的选择。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-29T07:23:11.040

单独提供你的包名，它需要一个[`String[]`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/ComponentScan.html#basePackages())for 包名。

而不是这个：

```
@ComponentScan("com.my.package.first,com.my.package.second") 
```

用这个：

```
@ComponentScan({"com.my.package.first","com.my.package.second"}) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-02-10T14:19:35.210

另一种方法是使用该`basePackages`字段；这是 ComponentScan 注释内的一个字段。

```
@ComponentScan(basePackages={"com.firstpackage","com.secondpackage"}) 
```

如果您从 jar 文件中查看 ComponentScan 注释 .class，您将看到一个 basePackages 字段，该字段接受字符串数组

```
public @interface ComponentScan {
String[] basePackages() default {};
} 
```

或者您可以明确提及这些类。包含类数组

```
Class<?>[]  basePackageClasses 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-11-24T07:07:41.203

您使用 ComponentScan 扫描多个包

`@ComponentScan({"com.my.package.first","com.my.package.second"})`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-16T20:48:04.140

您还可以使用 @ComponentScans 注释：

```
@ComponentScans(value = { @ComponentScan("com.my.package.first"),
                          @ComponentScan("com.my.package.second") }) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-01T10:20:08.257

确保您已在 pom.xml 中添加此依赖项

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-21T11:38:28.657

我用：

```
@ComponentScan(basePackages = {"com.package1","com.package2","com.package3", "com.packagen"}) 
```

# sharepoint-2010 - SPWebPartManager 隐藏每个用户的 web 部件

> ID：10794599
> 
> 赞同：1
> 
> 时间：2012-05-29T07:10:47.540
> 
> 标签：sharepoint-2010

我可以使用`SPWebPartManager`以编程方式隐藏每个用户的 Web 部件吗？如：获取`SPWebPartManager`实例，遍历Web Parts，`visible = false`根据用户设置。`webpart.visible = false`当您为所有用户设置此设置时，我从某处听说，这是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:32:59.087

您需要在用户范围内打开 Web 部件才能更新用户特定的属性。使用[PersonalizationScope 枚举](http://msdn.microsoft.com/EN-US/library/567ey2e9)相应地打开 SPLimitedWebPartManager：

```
SPWeb web = // ...
using (SPLimitedWebPartManager mgr = web.GetLimitedWebPartManager(
                                       "<path to page>",
                                       PersonalizationScope.User))
{
  WebPart wp = mgr.WebParts[<ID of the web part to update>];
  wp.Hidden = true; // hide the web part.
  mgr.SaveChanges(wp);
} 
```

**注意：**为了更新`PersonalizationScope.User`属性中的 peropery，需要将其标记为个人 Web 部件存储 ( `[WebPartStorage(Storage = Storage.Personal)]`)：

用户 PersonalizationScope 范围的 MSDN 描述：

> 当提到 WebPartManager 控件上的范围时，用户范围意味着为页面上的所有可个性化控件加载特定于用户的个性化数据以及适用于所有用户的个性化数据。只有用户特定的个性化数据才能保存在页面上。当引用与 Web 部件控件属性关联的范围时，用户范围表示该属性只能在共享范围内的页面上运行时加载和存储适用于所有用户的数据。但是，当属性的控件在用户范围内的页面上运行时，将加载并合并属性的每个用户和所有用户的数据。但是，在这种情况下，当页面在用户范围内运行时，只会保存每个用户的数据。

# python - 在python中追加字符串

> ID：10794600
> 
> 赞同：2
> 
> 时间：2012-05-29T07:10:47.587
> 
> 标签：python, append, string-formatting

我正在尝试在文件的每一行前面加上“（在“之后的 2 个空格/制表符”）并附加字符串-“\r\n”+”。此操作之前的文件行如下所示。

```
 <!--You have a CHOICE of the next 5 items at this level-->
        <!--Optional:-->
        <urn:Account id=\"?\">
           <!--Optional:-->
           ............
           ............. 
```

我正在使用以下代码，

```
inf=open("req.txt","r")

outf=open("out.txt","w")

for line in inf.readlines():

    outf.write("\"          "+line+"\\r\\n\" +")

inf.close()

outf.close() 
```

前置正在按预期发生，但附加没有正确发生。最终结果是除第一行外，所有行都以 - \r\n" +" 开头。第一行仅以 " 开头。

我希望每一行都以 " 开头并附加 "\r\n"+"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:29:32.107

您可能应该使用 python 的内置字符串格式。

```
outf.write("%s%s%s" % ('"          ', line, '\r\n" +')) 
```

然而！在更改数据之前，您不会从数据中删除换行符。结果，您将获得格式，整行（包括换行符），然后是第二部分。

您需要通过 python 的内置`rstrip`方法运行它。

```
outf.write("%s%s%s" % ('"          ', line.rstrip(), '\r\n" +')) 
```

您要注意的一件事是 rstrip 将删除任何空白，如果您只想删除换行符，则可以使用：

```
outf.write("%s%s%s" % ('"          ', line.rstrip("\r\n"), '\r\n" +')) 
```

但是，一旦你这样做了，你就需要在你的字符串的末尾再放一个新行。

```
outf.write("%s%s%s%s" % ('"          ', line.rstrip("\r\n"), '\r\n" +', "\r\n")) 
```

然而！根据您的操作系统，您的默认行尾可能会有所不同，要正确执行此操作，您需要`import os`：

```
outf.write("%s%s%s%s" % ('"          ', line.rstrip(os.linesep), '\r\n" +', os.linesep)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:34:48.313

您是否有理由不使用 xml 模块来读取/写入 xml 文件？因为它可以简化你的代码。

编辑：这是[PyMOTW ElementTree](http://www.doughellmann.com/PyMOTW/xml/etree/ElementTree/parse.html)教程和文档[python.org/xml.etree.ElementTree](http://docs.python.org/library/xml.etree.elementtree.html "python.org/xml.etree.elementtree")

# ruby-on-rails - 在 Rails 3.0 中使用 rsyslogd

> ID：10794602
> 
> 赞同：7
> 
> 时间：2012-05-29T07:10:58.367
> 
> 标签：ruby-on-rails, rsyslog

我在 Debian 服务器上运行了几个 Rails 3.0 站点。目前所有日志都进入 RAILS_ROOT/log/production.log （每个站点的 RAILS_ROOT）

我想更改它，以便所有日志记录都通过 rsyslog 并放置在：

```
/var/log/rails/site1.log
/var/log/rails/site2.log
etc. 
```

并且还要让这些日志每天自动轮换。

这是怎么做到的？

/ 卡斯滕

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T17:26:28.340

过去我曾`syslog-logger`为此使用过宝石

您可以在初始化程序中进行设置：

```
config.logger = Logger::Syslog.new("site1", Syslog::LOG_LOCAL5) 
```

在最近的 ruby​​ 版本`syslog/logger`中，标准库中也有 - 用法几乎相同。

开始记录到 syslog 而不是默认的文本文件。接下来发生的是 syslog 配置 - 您需要创建 rsyslog 规则来定义数据的去向

最简单的可能是

```
!site1 /var/log/site1.log 
```

它使用程序名称“site1”（Logger::Syslog 的第一个参数）指示所有内容。

您可以做更多事情，例如，您可以将日志消息转发到中央日志服务器，该服务器将它们全部聚合到一个文件中，这样您就不必为每个应用程序实例查看一个日志文件。

对于日志轮换，我使用 logrotate - 我相信 rsyslog 实际上可以在内部处理这类事情，但我不知道细节。

# c++ - 检测物理链路状态和丢包的C程序

> ID：10794605
> 
> 赞同：1
> 
> 时间：2012-05-29T07:11:07.587
> 
> 标签：c++, c, linux

我正在尝试编写一个基于事件的 c/c++ 程序，该程序检测网络电缆或物理链路（载波信号）中断的次数以及链路中有多少数据包丢失。对于丢包，我希望它每秒检查一次。理想情况下，伪代码应该是这样的；

```
 //C program for checking how many times physical link went down  
    if(event==physical_link_down)
    {
    link_down++;
    }

//separate C program for packet loss
    while(true)
    {
    check_packet_loss;
    sleep(1);
    } 
```

如果我是正确的，我可以通过执行 ifconfig 获得以下信息，其中“RUNNING”一词表示我们有一个活动的物理链路，并且可以从丢弃/错误字段中计算数据包丢失。

顺便说一句，我正在使用 Ubuntu 操作系统。

我正在考虑通过我的 C 程序对 ifconfig 进行 grep 以获取所需的信息。我的方法正确吗？其次，我如何通过 C 程序 grep，因为我不知道该怎么做？已经提出了类似的问题，但大多数问题是针对 Windows 环境提出的。任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:24:19.387

[您可以通过getifaddrs](http://www.kernel.org/doc/man-pages/online/pages/man3/getifaddrs.3.html)获取链接状态。这是Linux中的C api，大致相当于从命令行调用ifconfig。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:05:17.953

只要我知道getifaddrs，只允许知道RX或TX字节，丢包......，但不知道物理链路的状态。

用于知道链路是打开还是关闭的接口是 ETHTOOL 或 MII（使用 ethtool 和 mii-tool 用户空间应用程序实现），其中一个接口应该在您的网络驱动程序中实现。

我知道这个任务最好的代码是 debian-installer 的一部分，它决定了一个链接是否已经启动。它尝试使用 ethtool，如果使用 mii-tool 不成功。[在这里](http://netcfg.sourcearchive.com/documentation/1.60/ethtool-lite_8c_source.html)你可以找到代码。

# hadoop - 蜂巢中 ORDER BY 的替代方案

> ID：10794606
> 
> 赞同：3
> 
> 时间：2012-05-29T07:11:29.757
> 
> 标签：hadoop, hive, bigdata, hadoop-streaming

通过在 hive 中使用 ORDER BY，它只使用单个 reducer。所以 ORDER BY 是低效的。是否有可用于 ORDER BY 的替代解决方案。

问候， 拉托

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T17:25:41.883

您可能希望使用 DISTRIBUTE BY 和 SORT BY 的组合。DISTRIBUTE BY 将确保具有特定值的所有键最终都在同一个数据节点上。SORT BY 然后将对每个节点上的数据进行排序。

例如：

```
SELECT a, b, c 
FROM table
DISTRIBUTE by a
SORT BY a, b 
```

ORDER BY 会将**所有**数据排序在一起，这就是它必须通过一个 reducer 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:18:35.740

[SORT BY](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+SortBy)应该可以解决问题。这将对每个 reducer 中的数据进行排序，因此给定键的值将按顺序排列，但不能保证键按顺序排列。您可以为 SORT BY 使用任意数量的减速器。

# .net - 在 .net 中访问 google calendar api v3

> ID：10794608
> 
> 赞同：1
> 
> 时间：2012-05-29T07:11:36.217
> 
> 标签：.net, oauth, google-calendar-api

我正在尝试将我的 asp.net (vb.net) 应用程序连接到谷歌日历，以便我可以在谷歌日历上发布活动。

到目前为止，我已经设法获得了访问令牌和刷新令牌。我计划存储刷新令牌，以便我的应用程序可以在用户注销很久后访问特定的谷歌日历。

所以，我有我的访问令牌和刷新令牌，现在怎么办？我找不到任何可以仅使用访问令牌连接到谷歌日历 api v3 的示例 - 所有示例，即使在谷歌网站上，都涉及使用客户端库获取访问令牌（我已经获得），并创建一个没有传递参数的新 CalendarService() 对象。

是否可以创建一个 CalendarService 类并给它一个我已经拥有的访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T17:47:01.063

花了一些时间来弄清楚 oauth 工作流程，所以我创建了一个小项目，其中包含基本概念的编码

1.  通过 oauth 获取访问权限
2.  刷新过期令牌
3.  使用访问令牌做一些事件

该项目托管在这里[https://code.google.com/p/csharp-googlecalendar-api-v3-oauth2/](https://code.google.com/p/csharp-googlecalendar-api-v3-oauth2/)和它在 csharp 但我确实尽可能简单

您可能需要查看此特定文件[https://code.google.com/p/csharp-googlecalendar-api-v3-oauth2/source/browse/CalChecker/simpleEvent.aspx.cs](https://code.google.com/p/csharp-googlecalendar-api-v3-oauth2/source/browse/CalChecker/simpleEvent.aspx.cs)

```
string accesstoken = "usersaccesstoken";
string client_id = "getclientidfromcloud";
string client_secret = "getclientsecretfromcould";
string useremailaccount = "whosecal@email.com";

var httpWebRequest1 = (HttpWebRequest)WebRequest.Create("https://www.googleapis.com/calendar/v3/calendars/" + WebUtility.HtmlEncode(useremailaccount) + "/events");
httpWebRequest1.ContentType = "text/json";
httpWebRequest1.Method = "GET";
httpWebRequest1.Headers["Authorization"] = "Bearer " + accesstoken;
var httpResponse1 = (HttpWebResponse)httpWebRequest1.GetResponse();
using (var streamReader = new StreamReader(httpResponse1.GetResponseStream()))
{
    var result = streamReader.ReadToEnd();
} 
```

代码所做的只是创建一个 GET WebRequest，注意授权标头。这就是您传递访问令牌以调用需要 Auth 的事件的方式。

希望能帮助到你

# css - CSS类选择器

> ID：10794610
> 
> 赞同：2
> 
> 时间：2012-05-29T07:11:41.333
> 
> 标签：css

我想选择一个 div `class = "c" & id = "i"`：

```
 .c
 {
   color: red;
   border:1px;
   font-size:25px;
   background-color: yellow;
   width:200px;
 }

 <div id="i" class="c">change</div> 
```

现在我怎样才能只改变这个 div 的 class="c" 属性的宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:14:15.563

你可以这样做：

```
.c#i { width:400px } 
```

这会改变带有类`c`AND id的 div 的宽度`i`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:14:12.613

> 现在我怎样才能只改变这个 div 的 class="c" 属性的宽度？

选择一个带有 class 的 div `c`：

```
div.c {width: yourValue;} 
```

`c`用 class AND id更改 div `i`：

```
.c#i {width: yourValue;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:18:52.160

嘿，你可以这样做

```
#i.c{
width:xxx; //your value
} 
```

# php - 禁用 apache2 日志

> ID：10794612
> 
> 赞同：2
> 
> 时间：2012-05-29T07:11:56.037
> 
> 标签：php, apache, apache2, debian

我的服务器上只有 32GB，而且日志很快就耗尽了这个空间。所以我想禁用日志。

我想我找到了在哪里做，但由于我在服务器方面是一个完全的菜鸟，我不想在不确定它们不会使服务器崩溃的情况下开始改变事情。

在 etc/apache2/apache2.conf 中，我发现了这个：

```
 #
# The following directives define some format nicknames for use with
# a CustomLog directive (see below).
# If you are behind a reverse proxy, you might want to change %h into %{X-Forwarded-For}i
#
LogFormat "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %O" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent 
```

在 etc/apache2/conf.d/other-vhost-access-log 中，我发现了这个：

```
# Define an access log for VirtualHosts that don't define their own logfile
CustomLog ${APACHE_LOG_DIR}/other_vhosts_access.log vhost_combined 
```

我需要做什么来禁用日志？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T07:20:53.890

如果你真的想禁用日志，你必须在你的 Apache 配置文件中注释掉任何`ErrorLog`和指令。`CustomLog`在 Debian 上，这些将位于（基本配置）和`/etc/apache2/httpd.conf`（特定虚拟主机配置）中。`/etc/apache2/apache2.conf``/etc/apache2/sites-available/*`

您可以通过在它们前面添加一个“#”字符来将它们注释掉。

进行更改后，运行`/etc/init.d/apache2 restart`以使更改生效。

IMO，一个更好的解决方案 - 因为日志通常非常方便 - 是按照上面的 Sergey 建议安装日志轮换。在 Debian 中，运行以下命令：

```
 sudo apt-get install logrotate 
```

logrotate 将在其默认配置中每天拆分日志并压缩旧日志，从而节省大量磁盘空间，同时保留日志本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-06T10:21:51.570

这里接受的答案是错误的。注释掉该行不会禁用错误日志，它只是将其恢复为 apache2 默认值。从 apache2 [ErrorLog 文档](http://httpd.apache.org/docs/2.2/mod/core.html#errorlog)：

> 默认值：ErrorLog logs/error_log (Unix) ErrorLog logs/error.log（Windows 和 OS/2）

换句话说，这将位于 apache 安装根“logs”目录中的某个位置。

要禁用，我认为您需要在不支持日志记录的情况下重新编译（甚至不确定是否可能），或者将 ErrorLog 传输到 /dev/null：

> 错误日志“|/dev/null”

# java - 连接表时正确使用BeanListHandler

> ID：10794613
> 
> 赞同：3
> 
> 时间：2012-05-29T07:12:02.237
> 
> 标签：java, apache-commons, apache-commons-dbutils

我在我的简单项目中使用[DBUtils 。](http://commons.apache.org/dbutils/)我有`Item`实体`Person`类（`persons`以及`items`作为数据库中的表）。这简化了课程以更好地说明我的意思。现在我需要使用[BeanListHandler](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/handlers/BeanListHandler.html)获取具有登录名的项目列表。为此，我添加了`login`属性`Item`，但这是丑陋的解决方案。这样做并利用[BeanListHandler](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/handlers/BeanListHandler.html)的优势是否更好？

```
public class Person {
   private Long id;
   private String login;
}

public class Item {
   private Long id;
   private String name;
   // ... a lot more properties of item

   private Long personId;  // this is real column in "items" table
   private String login;   // UGLY (login is not in "items" table, only for BeanListHandler)
}

QueryRunner q = new QueryRunner(getDataSource());
String sql = "select i.*, p.login from items i, persons p where p.id = i.personId";
List<Item> l = (List<Item>) q.query(sql, new BeanListHandler<Item>(Item.class)); 
```

# android - 如何在动画期间检测碰撞？

> ID：10794615
> 
> 赞同：1
> 
> 时间：2012-05-29T07:12:04.873
> 
> 标签：android, android-animation

我成功地制作了一个箭头以沿着预定义的路径移动。现在我想在路径中放置一些随机移动的物体，并想检测箭头是否击中物体的天气。以下是我用于动画的代码。

```
 public void doAnimation(){
        Matrix mxTransform=new Matrix();
        PathMeasure pm=new PathMeasure(path,false);
        float fSegmentLen = (float)((pm.getLength())/50);
        if(iCurStep<=50){
            pm.getMatrix(fSegmentLen * iCurStep, mxTransform,
                    PathMeasure.POSITION_MATRIX_FLAG + PathMeasure.TANGENT_MATRIX_FLAG);
             canvas.drawBitmap(bt, mxTransform, null);
             iCurStep++;
             invalidate();
        }
        else{           
            iCurStep=0;
            animate=0;
            canvas.drawPoint((float)range-10,0f,forPoint);
        }
    } 
```

变量 iCurStep 是全局声明的，上面的函数将在 onDraw() 方法中调用。我是安卓的初学者。所以我很难编码。所以我恳请你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:17:56.037

您可以通过这种方式获取和。`current position`在任何时间点，检查箭头的 x 坐标和移动对象的 x 坐标。同样检查它的 y 坐标。`Arrow``moving objects``intersects`

希望这会帮助你。

# asp.net - Asp.Net 输出缓存不起作用

> ID：10794619
> 
> 赞同：2
> 
> 时间：2012-05-29T07:12:23.893
> 
> 标签：asp.net, caching, configuration, outputcache

我正在尝试缓存我的一些 ASP.Net 页面。

我遵循本教程并设法使其正常工作：http: [//msdn.microsoft.com/en-us/library/sfw2210t%28v=VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/sfw2210t%28v=VS.90%29.aspx)。

现在，当在我的 ASP.Net 网站上应用完全相同的技术时，我绝对没有任何缓存......当在我的页面上按 F5 时，它只是一次又一次地重新加载相同的页面......

我在我的 aspx 页面上添加了这个：

```
<%@ OutputCache Duration="15" VaryByParam="none"%> 
```

然后在我的 Load 方法上，基本上是写当前时间来检查它是否更新，就像上面的例子一样......不幸的是，每次我按 F5 时时间都会改变......

我在这里想念什么？一些配置或？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:37:02.647

我发现我们的项目使用了一个调用以下代码的框架：

```
 Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetExpires(DateTime.Now.AddSeconds(-1));
    Response.Cache.SetNoStore(); 
```

那是我问题的根源......

# javascript - Firebase REST API - 如何设置字符编码？

> ID：10794621
> 
> 赞同：2
> 
> 时间：2012-05-29T07:12:29.333
> 
> 标签：javascript, node.js, post, utf-8, firebase

我正在从 Node.js 进程调用 Firebase REST API。我看到的问题是当帖子正文包含非 ASCII 字符时 POSTS 失败。尽管请求返回“200”状态和节点名称（实际上并未创建），但还是会出现这种情况。

我目前正在尝试这样的事情：

```
function push(path, object, callback) {
    console.log("Pushing to "+path+" on: "+firebase.host);
    var fullPath=firebase.basePath+path;
    console.log("fullPath="+fullPath);
    var body = JSON.stringify(object);
    var options = {
        host: firebase.host,
        port: 80,
        method: "POST",
        path: fullPath, //gamma.firebase.com/...
        agent: false,
        headers: {
            'content-type': 'application/json',
            'Content-Length': body.length,
         }
    };
    var req = http.request(options, function(response) {
        var result = "";
        console.dir(response.headers);
        response.on('data', function(chunk) {               
            result+=chunk;
        });
        response.on('end', function() {
            console.error("POST response result: "+result);
            try {
                callback(JSON.parse(result));
            } catch(e) {
                callback({ error: e });
            }
        });
        response.on('error', function(e) {
            console.error("POST response error: "+error);
            callback({error: e});
        });
    });
    req.on('error', function(error) {
        console.error("POST request error: "+error);
    });
    req.write(body);
    req.end();
} 
```

“object”的内容可以很简单：

```
{"text": "test\u00a0text"} 
```

我得到的结果是状态 200，以及一个看起来合理的子名，实际上并没有创建它。

我尝试将 content-type 设置为一堆不同的东西（例如，添加 ; charset="UTF-8"），它似乎根本不会影响结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T22:07:11.950

我们处理某些类型的输入的方式存在错误，导致错误的 200 状态。我们将很快推出修复程序。同时，要解决此问题，您可以省略发送 Content-Length 标头。这将允许您发布 ASCII 和非 ASCII 数据。

# blackberry - 直接在黑莓中打开撰写电子邮件窗口

> ID：10794622
> 
> 赞同：0
> 
> 时间：2012-05-29T07:12:30.603
> 
> 标签：blackberry

> **可能重复：**
> [如何打开 Blackberry 电子邮件应用程序，准备向给定地址撰写电子邮件？](https://stackoverflow.com/questions/2762034/how-to-open-the-blackberry-email-app-ready-to-compose-an-email-to-a-given-addre)

我正在单击一个按钮。单击按钮后，用户应移至“撰写电子邮件”屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:21:09.857

```
 MessageArguments ma = new MessageArguments(MessageArguments.ARG_NEW, <recipients>, <subject>, <body>);
    //Alternatively, if you don't want to provide default values: ma = new MessageArguments(MessageArguments.ARG_NEW);

    Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES, ma); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:27:16.653

这工作正常，试试这个，

```
public void SendMail() 
        {

            String htmlContent =  "Body part";

            Message msg = new Message(); 
            try 
            { 
                final Address address = new Address("",""); 
                Address[] addresses = {address}; 
                msg.addRecipients(net.rim.blackberry.api.mail.Message.RecipientType.TO, addresses); 
                msg.setContent(htmlContent); 
                msg.setSubject("Subject"); 

                Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES, new MessageArguments(msg));

            } 
            catch (AddressException e) 
            { 
                e.printStackTrace(); 
                System.out.println("AddressException -->"+e.getMessage()); 
            } 
            catch (MessagingException e) 
            { 
                e.printStackTrace(); 
                System.out.println("MessagingException -->"+e.getMessage()); 
            }
        } 
```

# java - 内存分析器

> ID：10794627
> 
> 赞同：2
> 
> 时间：2012-05-29T07:12:58.110
> 
> 标签：java, memory, memory-management, profiling, profiler

需要创建我们自己的Java profiler。CPU 分析部分是在 IBM 的 Build your own profiler 文章的帮助下完成的。现在也在检查类似的内存分析。在搜索中找到了 Hprof，但它对我没有用。我想要的是获取类中每个方法消耗的内存（以字节为单位）

例如：

考虑一个类`test1`，类`test2`等在java文件中

`method1()`存在于 test1 中

`method2()`存在于 test2 中

许多变量将在每个方法中声明所以我想要的是

test1/method1 = 12 字节（如果可能，显示跟踪，即它是如何产生这么多字符数 + 整数数等的）

测试 2/方法 2 = 18 字节

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:25:26.220

*如果您对给定方法在堆栈上*占用多少内存感兴趣，那么[类文件](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html#1546)中有两个属性可以提供相关信息：

`max_locals`告诉您为局部变量保留了多少空间（以 32 位为增量，即乘以 4 得到字节）。

`max_stack`告诉您在执行此方法期间操作数堆栈可以增长到的最大值。

将这两个相加将使您*粗略估计*调用此方法时堆栈将增长多少。除了这些值之外，还会有额外的（可能是恒定的）开销，但这些应该是主要的可变因素。

您可以使用[BCEL](https://commons.apache.org/bcel/)等字节码操作库来读取 .class 文件并提取这些属性。

# javascript - 从 iframe 加载时隐藏 div

> ID：10794628
> 
> 赞同：2
> 
> 时间：2012-05-29T07:13:05.230
> 
> 标签：javascript, facebook

我的这段代码有什么问题？感谢您提供任何线索。

```
<script language="javascript"> 
   if(window.name != "") {document.getElementById("toggleText").style.display = 'none';}
</script>

 <div id="toggleText"> Hello </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:14:40.703

将此代码`<div id="toggleText"> Hello </div>`放在脚本标记上方

您试图隐藏不在 DOM 中的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:29:57.483

在准备好的函数上编写代码，实际上您正在尝试在将元素加载到 DOM 之前访问它

像那样

```
 $(document).ready(function () {
 try {
       if(window.name != "") 
       {
         document.getElementById("toggleText").style.display ='none';
       }   
     }  
    catch (e) { alert("Error:  " + e); }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:15:59.023

您正在尝试访问尚未解析的 div。将 javascript 放在 HTML 代码之后，或使其在 onLoad （或 document.ready 等）上运行

# c# - 列表排序不正确

> ID：10794632
> 
> 赞同：0
> 
> 时间：2012-05-29T07:13:15.467
> 
> 标签：c#, list, sorting

我有以下代码

```
List<TimeZoneInfo> timeZoneList = new List<TimeZoneInfo>(TimeZoneInfo.GetSystemTimeZones());
timeZoneList.Sort((item1, item2) => { return string.Compare(item2.Id, item1.Id); }); 
```

但它没有正确排序列表。（使用 linq.OrderBy() 产生相同的结果）。
但以下代码排序正确。

```
List<string> timeZoneList1 = new List<string>();
foreach (TimeZoneInfo timeZoneInfo in TimeZoneInfo.GetSystemTimeZones())
            timeZoneList1.Add(timeZoneInfo.Id);
timeZoneList1.Sort((item1, item2) => { return string.Compare(item1, item2); }); 
```

问题是什么？我错过了什么？

真的吗？
没有人知道答案吗？

- - - - - - - - - - - - - - 编辑 - - - - - - - - - - - --------------
当我将列表分配给组合框时，它会以错误的顺序出现，但是当我设置组合框的 DisplayMember 时它将被修复。任何人都可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:21:30.367

您在比较函数中交换了 item1 和 item2 的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:28:01.860

在您的第一个示例中，您有以下行：

```
timeZoneList.Sort((item1, item2) => { return string.Compare(item2.Id, item1.Id); }); 
```

这不应该是：

```
timeZoneList.Sort((item1, item2) => { return string.Compare(item1.Id, item2.Id); }); 
```

`string.Compare`在您的第一个示例中，您在方法中使用了错误的方法中的项目 ID 。在您的第二个示例中，它们是正确的方法，这就是正确排序的原因。

# android - Android 4.0.3 (ICS) 上的广播接收器

> ID：10794639
> 
> 赞同：1
> 
> 时间：2012-05-29T07:13:33.970
> 
> 标签：android, broadcastreceiver, android-4.0-ice-cream-sandwich

一段时间以来，我一直在尝试使用`BroadcastReceiver`on ICS。我尝试了各种解决方案，但对我没有任何效果。

这是我的清单文件的样子......

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sp.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".XYZActivity"
            android:label="@string/app_name"
            android:windowSoftInputMode="adjustResize" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".ScreenOffReceiver">
            <intent-filter>
                <action android:name="android.intent.action.SCREEN_OFF" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

这是我的接收器代码...

```
package com.sp.android;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class ScreenOffReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        Log.e("AppSearch", "Message");
    }
} 
```

活动类中有一些代码。但是现在这个广播接收器似乎永远不会被注册。该`onReceive()`方法不会被调用。我找不到任何解决方案。所有线程都提到我需要至少有一个活动，但我已经有了。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:43:38.487

您还需要至少启动一次活动（通过启动器），否则您的应用程序将处于“停止”状态，并且不会收到任何广播。

# c# - Bloomberglp.Blpapi.RequestQueueOverflowException：队列大小：128

> ID：10794640
> 
> 赞同：2
> 
> 时间：2012-05-29T07:13:46.757
> 
> 标签：c#, bloomberg, blpapi

我不知道彭博 API 有什么问题。

每次我尝试下载历史财务数据时，这意味着为 5000 种工具创建一个数据请求，为期 3 天，一次用于欧元货币，一次用于本地货币，我得到这个队列异常。

真正令人困惑的是，该程序仍然会继续处理第一个请求，其中包含仪器的欧元价格，但第二个则没有。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:32:18.093

好吧，既然您没有收到缓慢的消费者警告，我敢打赌您只是在一次请求中请求大量数据。
尝试将您的请求分成几个块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:12:19.573

每个请求的Queue Size为1024，如果size > 1024，会抛出BloombergOverFolowException

# events - 推特分享按钮推特意图检索数据 url

> ID：10794641
> 
> 赞同：3
> 
> 时间：2012-05-29T07:13:49.737
> 
> 标签：events, url, twitter, share

我在一个页面上有多个 twitter 分享按钮，我想通过使用 data-url 属性来确定哪个按钮用于发送推文，这样我就可以记录推文计数。我正在使用 twitter 意图。如何获取推文引用的页面网址？这必须是一个共同的要求。

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.example.com" data-lang="ja" data-counturl="http://www.example.com">ツイート</a>

twttr.ready(function (twttr) {
            twttr.events.bind('tweet', function (event) {
                alert(event.target);

            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:58:18.173

我解决了这个问题， event.target 是一个 iframe ，所以我使用正则表达式从 src 标签解析 url。

```
twttr.ready(function (twttr) {
    twttr.events.bind('tweet', function (event) {
        var url = unescape(event.target.src.match("url=(.*?)(&|$)")[1]);
        UpdateCounts("Tweet", url);

    });
}); 
```

# android - 检测 Webview 滚动是否到达末尾

> ID：10794647
> 
> 赞同：5
> 
> 时间：2012-05-29T07:14:23.077
> 
> 标签：android, scroll, android-webview

我试图找出可以达到的**最大滚动**位置`WebView`，我已经尝试过了，`webView.pageDown(true)`但结果被延迟了（我不能向下滚动，然后在用户面前向上滚动，而且这种方法每次都不起作用），我' 也尝试过，但**阿拉伯文**内容`webView.getContentHeight()`的高度不正确。

 **请指教

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T06:28:59.150

好的，我想出了答案

您可以使用获得真实的内容高度

> (int) Math.floor(webView.getContentHeight() * webView.getScale());

当您获得真实高度时，只需覆盖 webview 中的滚动方法以侦听滚动事件，如果滚动达到真实高度，则您的 webview 位于滚动底部。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-05T16:01:42.873

```
@Override
public void onScroll(int l, int t) {
    int height = (int) Math.floor(webView.getContentHeight() * webView.getScale());
    int webViewHeight = webView.getHeight();
    int cutoff = height - webViewHeight - 10; // Don't be too strict on the cutoff point
    if (t >= cutoff) {
        setDisclaimerButtonEnabled(true);
    }
} 
```

非严格是必须的，因为我在三星S5上发现最底部的滚动值距离最底部的值只有1个像素值！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-17T10:59:36.440

仅当 webview 到达/滚动到底部时加载/可见按钮。

创建 JavaScript 类：

```
public class JavaScriptInterface {

  @android.webkit.JavascriptInterface
  public void didScrollToBottom() {
    Log.d(TAG, "Scroll to Bottom");
    myHandler.post(new Runnable() {
      @Override
      public void run() {
         btnAccept.setVisibility(View.VISIBLE);

          }
       });
      }
    } 
```

在 onCreate() ：

```
final JavaScriptInterface jsInterface = new JavaScriptInterface();
myWebView.addJavascriptInterface(jsInterface, "AndroidFunction"); 
```**

# jquery - sortable 在 ajax 选项卡中不起作用

> ID：10794648
> 
> 赞同：2
> 
> 时间：2012-05-29T07:14:26.990
> 
> 标签：jquery, prototypejs, jquery-ui-tabs, jquery-ui-sortable

在我的页面中，我使用prototypejs 使用Ajax 选项卡。其中一个包括一个可排序的。虽然 sortable 单独工作，但当我将其放入选项卡时，它不起作用。我怎么解决这个问题？谢谢。

我的标签如下：

```
<div id="container">
<div class="tabs" id="tab1">Tab 1</div>
<div class="tabs" id="tab2">Tab 2</div>
<div class="tabs" id="tab3">Tab 3</div>
</div> 
```

我的可排序列表如下：

```
<ul id="list">
    <li>now</li>
    <li>works</li>
    <li>this</li>
</ul>

<script type="text/javascript">
    Sortable.create("list");
</script> 
```

我的ajax函数如下

```
function init () {

    var tabs = document.getElementsByClassName('tabs');
   for (var i = 0; i < tabs.length; i++) {
    $(tabs[i].id).onclick = function () {
        getTabData(this.id);
    }
}
}
function getTabData(id) {
var url = 'demos/ajax-tabs/process.php';
var rand = Math.random(9999);
var pars = 'id=' + id + '&rand=' + rand;

var myAjax = new Ajax.Request( 
        url, {
              method: 'get', 
              parameters: pars, 
              onLoading: showLoad, 
              onComplete: showResponse
              });

}
function showLoad () {
$('load').style.display = 'block';
    Sortable.create("list");

}
function showResponse (originalRequest) {
//Sortable.create("list");
var newData = originalRequest.responseText;
$('load').style.display = 'none';
$('content').innerHTML = newData;

}
init(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:21:43.273

如果你调用 Sortable.create("list"); 函数，它会在你的页面中搜索所有id为“list”的元素，使它们可以排序。

但是：使用 Ajax，您需要在成功加载内容后再次调用 Sortable.create()，因为您需要再次将 sortable 应用于新内容。

```
function showResponse (originalRequest) {
    var newData = originalRequest.responseText;
    $('load').style.display = 'none';
    $('content').innerHTML = newData;   // make sure that newData contains <ul id="list">.....</ul>
    Sortable.create("list");
} 
```

# c# - C# 中的“使用”关键字与数据集

> ID：10794658
> 
> 赞同：3
> 
> 时间：2012-05-29T07:14:51.257
> 
> 标签：c#, .net, interface, dataset

我对 IDisposable 接口和 C# 中的 using 关键字有点困惑，我们可以在哪些类上使用它。

```
using (DataSet studentDS = GetMyStudentDS())
{
    // here comes some code
} 
```

我发现垃圾收集器没有最终确定从 DataSet 类继承的类，如果是这样，将其放在 using 块中以便在其工作完成后手动完成是一个好习惯。为了所有人的利益，有人可以简要介绍一下。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:21:39.293

> > 把它放在 using 块中是一个好习惯吗

是的。作为[DataSet](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)实现 IDisposible 接口。DataSet 扩展[了 MarshalByValueComponent](http://msdn.microsoft.com/en-us/library/system.componentmodel.marshalbyvaluecomponent.aspx)类。[MarshalByValueComponent](http://msdn.microsoft.com/en-us/library/system.componentmodel.marshalbyvaluecomponent.aspx)类实现 IDisposable。

任何派生类型也将实现 IDisposable。如果它没有显式实现（换句话说，重写 IDisposable.Dispose），则将调用基方法 (DataSet.Dispose)。

关于[Finalizer](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=vs.100%29.aspx)，这是一个单独的概念，用于确保即使开发人员未能调用 Dispose 方法（或忘记使用块）也能清理非托管资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T07:22:05.110

我个人不会将它用于`DataSet`. `using`当我需要关闭连接并处理它时，我会使用语句，例如文件阅读器、数据库或 SharePoint 连接。C# 是一种托管语言，CLR 将为您处理垃圾收集，在使用 DataSet 等情况下，我仍然会坚持这一原则（让 CLR 为您完成）。

[http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.80).aspx)

[http://www.w3enterprises.com/articles/using.aspx](http://www.w3enterprises.com/articles/using.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T07:20:23.863

终结器（析构函数）和 IDisposable 模式之间存在区别。GC 在不确定的时间调用终结器，用于清理与类关联的非托管资源并释放实例占用的内存。当析构函数运行时，它是你无法控制的。

IDisposable 用于在确定的时间清理对象。它不会释放对象占用的内存，但通常用于关闭文件、数据库连接……

所以一般规则是，如果一个对象实现了 IDisposable，最好将其实例包装在`using`关键字中，以便尽快释放资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T07:25:35.857

DataSet 实现`IDisposable`了 ，但它们抑制了它们的终结。
所以真的不需要，他们没有引入任何非托管代码。
不要用`using`语句包装它，但是不要忘记`using`在 sql 连接或数据读取器周围使用关键字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T07:41:01.540

C# 允许您`using`在所有实现`IDisposable`. 为什么？因为 using 只是一种语法糖。`using(obj){/*somecode*/}`实际上是这样的：

```
try
{
    /*somecode*/
}
finally
{
    if(obj!=null) obj.Dispose();
} 
```

如果您使用的是 Typed`DataSet`您可能已经注意到您的自动生成的类不会覆盖`Dispose(bool)`。因此`Dispose`，对您的自动生成的表和列没有任何作用。为了帮助您的数据集释放内存（它确实有问题）覆盖`Dispose(bool)`在您的自动生成的 TypedDataSet（在部分文件中）。做这样的事情：

```
protected override void Dispose(bool disposing)
{
    foreach (DataTable tab in this.Tables)
    {
        if (tab != null)
        {
            tab.Clear();
            tab.Columns.Clear();
            tab.Dispose();
        }
    }
    this.Tables.Clear();
    base.Dispose(disposing);
} 
```

现在使用`using`它`SataSet`会很有意义。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-29T07:23:47.327

> 是的，绝对可以在 using 块中使用任何对象初始化代码。使用它没有副作用。在任何情况下，如果您想 100% 确定对象的垃圾收集，请将其保留在 using 块中。

# c - 操作系统的低级指针处理

> ID：10794661
> 
> 赞同：2
> 
> 时间：2012-05-29T07:15:26.363
> 
> 标签：c, pointers, operating-system

操作系统如何处理指针？

例如，它们是首先被拦截还是指针直接从 C 中的函数调用访问内存？

编辑：

当运行时执行一个进程并且该进程当前执行一个指针时，内核是否立即链接到该段，或者之间是否有一个层拦截函数调用，并在完成它所做的任何事情后访问数据？

如果是这样，是否有人知道负责实际执行此操作的源代码，例如处理虚拟内存指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:19:38.533

C中的指针指向[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)地址。

操作系统（通常与硬件结合使用）检查您要访问的地址是否有效（在进程虚拟内存域中），如果有效，则将其转换为[物理地址](http://en.wikipedia.org/wiki/Physical_address)。

硬件还检查地址是否已经存储在[缓存](http://en.wikipedia.org/wiki/CPU_cache)中（如果系统有 CPU 缓存），如果是 - 它避免从 RAM 读取（因为它很慢），并直接从缓存中读取。

它实际上还有更多内容 - 它是如何完成的，可以在几门学术课程中涵盖 - 但这些是基础知识的基础。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:20:25.107

> 操作系统如何处理指针？

指针只是内存中的一个地址。操作系统参与“处理”指针的唯一原因是操作系统提供虚拟内存。在这种情况下，内存管理单元将负责将虚拟内存空间中的地址映射到物理地址。如果指针指向虚拟内存空间中不可用的位置，则 MMU 会生成页面错误，并且操作系统会介入以将页面与请求的地址交换。不过，这一切都发生在低级别，在正常运行的系统中，您可以忽略它。

# facebook - 为 Facebook 应用设置国家限制？

> ID：10794663
> 
> 赞同：2
> 
> 时间：2012-05-29T07:15:31.340
> 
> 标签：facebook, facebook-graph-api

我有个问题，

我有一个 Facebook 应用程序，目标受众是美国。我想在“高级设置”中使用国家限制，以便只有来自美国的人才能登录我的应用程序。

似乎每当我这样做时，我的一些团队成员（不是来自美国）都无法登录我的应用程序......即使他们具有“管理员”角色。

我怎样才能让我的应用程序的“美国以外”开发人员仍然能够登录它？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:52:48.220

即使该人没有登录，signed_request 也会包含有关国家/[地区的信息。](https://developers.facebook.com/docs/authentication/signed_request/)

您可以使用它来限制用户。

```
Array ( [algorithm] => HMAC-SHA256 [issued_at] => 1338280574 [page] => Array ( [id] => 171340959572434 [liked] => 1 [admin] => ) [user] => Array ( [country] => in [locale] => en_US [age] => Array ( [min] => 21 ) ) ) 
```

或者

您可以添加多个国家/地区以允许。因此，您还必须允许您的开发人员所在的国家/地区，并通过对这些开发人员所在国家/地区的人员使用上述方法显示一些错误消息

# javascript - 将项目吐出到不同的数组中并将其取回

> ID：10794665
> 
> 赞同：2
> 
> 时间：2012-05-29T07:15:40.070
> 
> 标签：javascript, jquery, if-statement

这与我之前提出的问题有关，并感谢这里帮助我学习编码的每一个人：D

我以前正在研究一个撤消按钮，该按钮可以工作但还没有:(

这是我所做的[点击这里](http://hybridimaginations.com/lambada/test.html)。但问题是，由于它一步一步地倒退，它必须等到前一个颜色应用于同一部分的项目。有没有办法我可以拆分像这样的东西[点击这里](http://jsfiddle.net/LdV4s/)这个想法会奏效吗？

这是测试html代码：

```
 <div id="colour">
    <input type="submit" name="r1" id="r1" value="1" />
    <input type="submit" name="r2" id="r2" value="2" />
    <input type="submit" name="r3" id="r3" value="3" />
    <input type="submit" name="r4" id="r4" value="4" />
    <input type="submit" name="r5" id="r5" value="5" />
    <input type="submit" name="r6" id="r6" value="6" />
 </div>
 <div id="map">
    <input type="radio" name="radio" id="layer_a" value="a" />
    <label for="layer">layer_a</label>
    <input type="radio" name="radio" id="layer_b" value="b" />
    <label for="layer">layer_b</label>
    <input type="radio" name="radio" id="layer_c" value="c" />
    <label for="layer">layer_c</label>
    <input type="radio" name="radio" id="layer_d" value="d" />
    <label for="layer">layer_d</label>
 </div>
 <input name="selected" id="selected" type="hidden" value="" />

 <input type="submit" name="undo" id="undo" value="undo" />

 <div id="result"></div> 
```

这是测试 jQuery 代码：

```
 $("#colour input").click(function() {
    $("input[name='selected']").val(this.id);
 });
 var arraymap = [];
 var array_a = [];
 var array_b = [];
 var array_c = [];
 var array_d = [];

 $("#map input").click(function() {
    var mape = $(this).attr('id');
    var ccurrent = $("input[name='selected']").val();
    arraymap.push(mape);

    // trying to split it into diffrent arrays //
    if (mape == "layer_a") {
            array_a.push(ccurrent);
            var araycurrent = array_a;
    } else if (mape == "layer_b") {
            array_b.push(ccurrent);
            var araycurrent = array_b;
    } else if (mape == "layer_c") {
            array_c.push(ccurrent);
            var araycurrent = array_c;
    } else if (mape == "layer_d") {
            array_d.push(ccurrent);
            var araycurrent = array_d;
    };

    var mapid = arraymap[arraymap.length - 1];
    var colid = arraycurrent[arraycurrent.length - 1];

    var loca = mapid + colid;

    $("#result").append(mapid);
 });

 $("#undo").click(function() {
    arraymap.pop();
    var remover_map = arraymap[arraymap.length - 1];

    // trying get it back from split arrays //
    if (remover_map == "layer_a") {
            array_a.pop();
            var remover_col = array_a[array_a.length - 1];
    } else if (remover_map == "layer_b") {
            array_b.pop();
            var remover_col = array_b[array_b.length - 1];
    } else if (remover_map == "layer_c") {
            array_c.pop();
            var remover_col = array_b[array_c.length - 1];
    } else if (remover_map == "layer_d") {
            array_d.pop();
            var remover_col = array_a[array_d.length - 1];
    };

    var remove = remover_map + remover_col;

    $("#result").append(remove);

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:03:34.837

您可以将图层数组存储在对象中以将其用作关联数组。这样您就可以通过图层名称轻松引用它们。

这是我的示例版本：（工作演示：http: [//jsfiddle.net/qbdyp/](http://jsfiddle.net/qbdyp/)）

```
var step_layer = [];  // layers affected by each step
var step_colour = {  // selected colours by layer
    "a": [],
    "b": [],
    "c": [],
    "d": []
};

var $map = $("#map"), $result = $("#result");  // cache
$("#colour > input").click(function() {
    var layer = $map.find("input[name='radio']:checked").val();  // current layer
    var colour = this.value;  // selected colour
    step_layer.push(layer);
    step_colour[layer].push(colour);
    $result.append("Added " + colour + " to layer " + layer + "<br/>");
});

$("#undo").click(function() {
    var layer = step_layer.pop();  // get most recently changed layer
    if (typeof layer === "undefined") {
        $result.append("(Nothing to undo)<br />");
        return;
    }
    var colour = step_colour[layer].pop();  // get latest change in that layer
    $result.append("Removed " + colour + " from layer " + layer + "<br/>");        
}); 
```

这是一个更详细的示例，希望更接近您想要实现的目标：http: [//jsfiddle.net/uWUve/](http://jsfiddle.net/uWUve/)

# passwords - Gradle uploadArchives 通过 scp 提示输入密码多次

> ID：10794667
> 
> 赞同：1
> 
> 时间：2012-05-29T07:15:48.053
> 
> 标签：passwords, repository, gradle, scp, wagon

我正在尝试使用 Gradle 并尝试使用 Wagon SCP 将 jar 上传到我的 Nexus 存储库，如 Gradle 用户指南中所述。我已按照用户指南中的说明获取构建文件：

```
configurations {
    deployerJars
}

repositories {
    mavenCentral()
}

dependencies {
    deployerJars "org.apache.maven.wagon:wagon-ssh:1.0-beta-2"
}

uploadArchives {
    repositories.mavenDeployer {
        name = 'sshDeployer' // optional
        configuration = configurations.deployerJars
        repository(url: "scp://repos.mycompany.com/releases") {
            authentication(userName: "me", password: "myPassword")
        }
    }
} 
```

（当然，除了 URL 和凭据适用于我的存储库。）

现在，当运行*gradle uploadArchives*时，构建会在一段时间后冻结。我取消了构建并在打开信息日志的情况下重新启动它，发现脚本提示我输入密码：

```
gradle -i uploadArchives
Starting Build
Settings evaluated using empty settings file.
Projects loaded. Root project using build file '/Users/developer/Slask/ex24/build.gradle'.
Included projects: [root project 'ex24']
Evaluating root project 'ex24' using build file '/Users/developer/Slask/ex24/build.gradle'.
All projects evaluated.
Selected primary task 'uploadArchives'
Tasks to be executed: [task ':compileJava', task ':processResources', task ':classes', task ':jar', task ':uploadArchives']
:compileJava
Executing task ':compileJava' due to:
No history is available for task ':compileJava'.
[ant:javac] Compiling 1 source file to /Users/developer/Slask/ex24/build/classes/main
[ant:javac] warning: [options] bootstrap class path not set in conjunction with -source 1.5
[ant:javac] 1 warning
:processResources
Skipping task ':processResources' as it has no source files.
:processResources UP-TO-DATE
:classes
Skipping task ':classes' as it has no actions.
:jar
Executing task ':jar' due to:
No history is available for task ':jar'.
:uploadArchives
Task ':uploadArchives' has not declared any outputs, assuming that it is out-of-date.
Publishing configuration: configuration ':archives'
:: loading settings :: url = jar:file:/usr/local/Cellar/gradle/1.0-milestone-7/libexec/lib/ivy-2.2.0.jar!/org/apache/ivy/core/settings/ivysettings.xml
Publishing to Resolver org.gradle.api.publication.maven.internal.ant.DefaultGroovyMavenDeployer@53c0f47a
[ant:null] Deploying to scp://192.168.0.100/mynexusrepo
[INFO] Retrieving previous build number from remote
Password:: 
```

显然，构建脚本中配置的密码被忽略了。

无论如何，我输入了密码，然后又被提示了几次，我服从并重新输入了密码。

最后，构建成功完成。

之后我检查了我的 repo，工件已成功上传。

因此，将 jars 上传到 repo 是可行的。

但是，gradle 提示我输入密码对我不起作用，因为我计划在 Jenkins 的自动构建过程中使用它。

现在我的问题：有谁知道是否有办法关闭此密码提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-01T23:33:16.663

我不知道为什么它会提示您输入密码。这可能是在较新版本的旅行车中要解决的问题。我知道您可以使用它来避免需要密码：

```
repository(url: 'scp://example.com/var/repos') {
            authentication(userName: "me", privateKey: "/home/me/.ssh/id_rsa")
        } 
```

# symfony - 如何提供包含视图数组的 json 提要？

> ID：10794669
> 
> 赞同：1
> 
> 时间：2012-05-29T07:15:55.333
> 
> 标签：symfony, twig

我有一个*项目*的看法。*当我在我的 ProjectController 中对方法showProjects()*进行 Ajax 调用时，我会得到一个 json 提要，其中包含每个项目的模板数组。

实际上，我尝试过，但我得到了一个包含*请求对象*的 json 提要，而不是模板。我不想为每个项目显示一个模板，因为我想在 js 中处理它们。

```
#ProjectController.php

public function showProjects() {
    $em = $this->getDoctrine()->getEntityManager();

    $projects = $em->getRepository('BtaskBoardBundle:Project')->findAll();
    if (!$projects) {
        throw new NotFoundHttpException();
    }

    $projects_template = array();
    foreach ($projects as $project) {
        $projects_template[] = $this->render('MyBundle::project.html.twig', array(
            'project' => $project,
            ));
    }

    return new Response(json_encode($projects_template), 200);
}

#project.html.twig

<a class="project" data-id="{{ project.id }}" href="#">{{ project.name }}</a> 
```

怎么了？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:20:19.280

你得到的响应对象应该有一个`getContent()`方法。查看[文档](http://api.symfony.com/2.0/)`Symfony\Component\HttpFoundation\Response`中的类以获取更多信息。你应该可以这样做：

```
foreach ($projects as $project) {
    $projects_template[] = $this->render('MyBundle::project.html.twig', array(
        'project' => $project,
        ))->getContent();
} 
```

# wcf - Windows Server 2003 和 XP 上的 TLS 1.2

> ID：10794670
> 
> 赞同：5
> 
> 时间：2012-05-29T07:15:55.390
> 
> 标签：wcf, ssl, transport-security

我在使用传输安全的 IIS 上托管了 WCF 服务。我需要将 TLS 版本限制为 1.2。

我发现 Windows Server 2008 和 Windows 7 支持 TLS 1.2。

对于服务器的 Windows Server 2003 和客户端的 Windows Vista 和 XP，我能否将 TLS 的使用限制为 1.2 版？这些较旧的操作系统是否支持 1.2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T08:44:46.970

Win Server 2003、XP 或 Vista 不支持 TLS 1.1 和 TLS 1.2。将操作系统服务用于 TLS 的应用程序将无法在这些平台上使用 TLS 1.1 或 1.2。

如果您有一个应用程序、浏览器或其他任何东西，它处理它自己的 TLS，那么它可以使用 TLS 1.1 或 1.2。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa380512%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380512%28v=vs.85%29.aspx)

# asp.net - 查找 RadGrid 的动态列

> ID：10794674
> 
> 赞同：3
> 
> 时间：2012-05-29T07:16:00.920
> 
> 标签：asp.net

```
I created Dynamic columns (textBox) in RadGrid on a Click Event. How do I find those Controls on another Click Event.

  for (int i = 0; i < objISTUserDetailsObjectList.Count; i++)
            {
                tempCol = new GridTemplateColumn();
                tempCol.ItemTemplate = new DynamicTemplateCoulmn("txtQuantity" + i, "numericTextBox");        
                tempCol.UniqueName = "Users" + i;
                tempCol.HeaderStyle.HorizontalAlign = HorizontalAlign.Right;
                tempCol.ItemStyle.HorizontalAlign = HorizontalAlign.Right;
                tempCol.FooterStyle.HorizontalAlign = HorizontalAlign.Right;
                gvwISTProduct.MasterTableView.Columns.Add(tempCol);

        } 
```

我无法在另一个 Click 事件中找到“txtxQuantity”，尽管我在 Grids ItemDataBound 事件中找到了它。提前致谢。

# linux - 在 OpenWRT Linux 上使用 C/C++ 从 IP 上的串行端口转发字节

> ID：10794677
> 
> 赞同：1
> 
> 时间：2012-05-29T07:16:07.217
> 
> 标签：linux, serial-port, ip, openwrt

我在我的串行端口上接收到 35 字节的数据包，并且只想通过以太网转发/隧道它们。我想知道是否有人有任何有用的代码片段。我知道这可以使用 netcat 完成，但我希望一个简单的 C/C++ 程序可以作为后台进程运行。我正在运行一个 Flash 非常有限的 OpenWrt Linux。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:36:45.373

您可以编写一个小程序，打开串行端口进行读取，并打开一个套接字进行传出通信。

在一个循环中，从串行端口读取，然后将读取的内容写入套接字。

在伪代码中：

```
int ser = open("/dev/ttyS0");
int sock = socket_connect();

for (;;)
{
    ssize_t r = read(ser, data, MAXLEN);
    if (r > 0)
        write(sock, data, r);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:03:22.877

您可以使用 ser2net 来执行此操作。[ser2net](http://sourceforge.net/projects/ser2net/)

# c# - nHibernate Linq 中的期货

> ID：10794680
> 
> 赞同：1
> 
> 时间：2012-05-29T07:16:33.067
> 
> 标签：c#, linq, nhibernate, membership-provider, linq-to-nhibernate

我对如何使用 Futures 计算有 Linq 的东西感兴趣。我对 Criteria api 不感兴趣，只是对普通 linq 感兴趣。

如果我有：

```
IEnumerable<User> dbUsers = userquery.Future<User>(); 
IFutureValue<long> count = totalcountQuery.FutureValue<long>(); 
```

直接翻译应该是：

```
var dbUsers = userQuery.ToFuture();     
var count = userQuery.LongCount(); 
```

**现在我需要访问计数查询以了解填充记录的确切数量；**

像这样的东西，虽然这段代码不会编译：

```
totalRecords = (int)count.Value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:17:09.303

NHibernate 不直接支持这一点，但它很容易实现（在这篇[博](http://sessionfactory.blogspot.com/2011/02/getting-row-count-with-future-linq.html)文中有解释）。您需要编写一个新的扩展方法。

```
public static IFutureValue<TResult> ToFutureValue<TSource, TResult>
    (this IQueryable<TSource> source, Expression<Func<IQueryable<TSource>, TResult>> selector)
    where TResult:struct  where TSource: class
{
    var provider = (INhQueryProvider) source.Provider;
    var method = ((MethodCallExpression) selector.Body).Method;
    var expression = Expression.Call(null, method, source.Expression);
    return (IFutureValue<TResult>) provider.ExecuteFuture(expression);
} 
```

然后很容易得到分页查询

```
var query = session.Query<User>().Where(...);
var count = query.ToFutureValue(u => u.Count());
var results = query.OrderBy(u => u.FullName).Skip(n).Take(m).ToFuture() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:40:01.353

应该是这样的：

```
var users = Session.Query<User>().ToFuture();
var totalCount = users.Count(); 
```

# sql - 在 sql 查询中查找控制值和运行时间

> ID：10794688
> 
> 赞同：2
> 
> 时间：2012-05-29T07:17:58.457
> 
> 标签：sql, ms-access

我在 MS Access 中有一个查询，在`where`子句中我有：

```
WHERE (((tb_KonzeptFunktionen.Konzept)=[Formulare]![frm_Fahrzeug]![ID])); 
```

运行需要很长时间，但是当我删除此`where`子句时，查询运行不到一秒。

我可以说传递`[Formulare]![frm_Fahrzeug]![ID]`作为参数没有效率吗？或者查找控制值会减慢速度？如果是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:54:07.973

db 引擎应该几乎立即检索控件的值。如果该`WHERE`条件显着降低了查询速度，则很可能是由于数据库引擎必须执行额外的工作来检索匹配的行。您可以通过暂时用静态已知值代替控件的值来检查此假设。

```
WHERE tb_KonzeptFunktionen.Konzept=1; 
```

如果带有静态值的版本同样慢，请创建索引并重`tb_KonzeptFunktionen.Konzept`试。

# c# - 创建委托令牌 - 无法创建 SecurityTokenService

> ID：10794689
> 
> 赞同：8
> 
> 时间：2012-05-29T07:18:07.250
> 
> 标签：c#, visual-studio-2012, .net-4.5, adfs2.0

我正在尝试构建一个使用 ADFS 和声明的系统。目前，这只是一个“玩具”实现。

我构建了一个非常简单的 MVC Web 应用程序，使用 Visual Studio 中的“身份和访问...”向导对其进行设置，以与 ADFS 2.0 服务器通信，并将其部署到 IIS 服务器。一切正常，我可以检查并列出收到的索赔。

下一步是构建一个基于 Web API 的 REST 服务（代表 MVC 应用程序将依赖的后端服务），所以我想将凭据传递给该后端服务器，以便它可以进行适当的授权决定。

所以第一步是我创建委托令牌（然后，我希望根据`HttpClient`类来确定如何处理它以进行其余调用）。我有这个：

```
//We need to take the bootstrap token and create an appropriate ActAs token
var rst = new RequestSecurityToken
{
    AppliesTo = new EndpointReference("https://other-iis.example.com/Rest"),
    RequestType = RequestTypes.Issue,
    KeyType = KeyTypes.Symmetric,
    ActAs = new SecurityTokenElement(((BootstrapContext)((ClaimsIdentity)User.Identity).BootstrapContext).SecurityToken)
};

var sts = new SecurityTokenService(); //This line isn't valid
var resp = sts.Issue(System.Threading.Thread.CurrentPrincipal as ClaimsPrincipal, rst); 
```

但是，问题是`SecurityTokenService`抽象的。`System.IdentityModel`我在nor中找不到从此类派生的任何类型`System.IdentityModel.Services`，并且上面不包含对 ADFS 服务器的任何引用，我显然需要在某些时候提供。

当然，我也可能完全走错了路，或者只是碰到了一个小绊脚石，而没有看到远处有一个更大的绊脚石，所以对此的任何建议也将不胜感激。

* * *

例如，我已经看过[Identity Delegation Scenario](http://msdn.microsoft.com/en-us/library/ee517269.aspx)，但是它使用`CreateChannelActingAs`，我认为当我与休息服务（或者会吗？）交谈时它不会起作用，而且似乎也不起作用适用于 .NET 4.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:32:43.613

我正在从 ADFS 2.0 请求令牌以进行缓存和查看 DisplayToken。也许这可以帮助您入门。

这是我能做的：

```
 public SecurityToken GetToken(out RequestSecurityTokenResponse rstr)
    {
        Console.WriteLine("Connecting to STS...");

        WSTrustChannelFactory factory = null;

        try
        {
            if (_useCredentials)
            {
                // use a UserName Trust Binding for username authentication
                factory =
                    new WSTrustChannelFactory(
                        new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential),
                        "https://<adfs>/adfs/services/trust/13/UsernameMixed");

                factory.TrustVersion = TrustVersion.WSTrust13;

                // Username and Password here...
                factory.Credentials.UserName.UserName = "username";
                factory.Credentials.UserName.Password = "password";
            }
            else
            {
                // Windows authentication over transport security
                factory = new WSTrustChannelFactory(
                    new WindowsWSTrustBinding(SecurityMode.Transport),
                    "https://<adfs>/adfs/services/trust/13/windowstransport") { TrustVersion = TrustVersion.WSTrust13 };
            }

            var rst = new RequestSecurityToken
                          {
                              RequestType = RequestTypes.Issue,
                              AppliesTo = SvcEndpoint,
                              KeyType = KeyTypes.Symmetric,
                              RequestDisplayToken = true
                          };

            Console.WriteLine("Creating channel for STS...");

            IWSTrustChannelContract channel = factory.CreateChannel();

             Console.WriteLine("Requesting token from " + StsEndpoint.Uri);
             SecurityToken token = channel.Issue(rst, out rstr);
             Console.WriteLine("Received token from " + StsEndpoint.Uri);

            return token;
        }
        finally
        {
            if (factory != null)
            {
                try
                {
                    factory.Close();
                }
                catch (CommunicationObjectFaultedException)
                {
                    factory.Abort();
                }
            }
        }
    } 
```

如果您想使用它，您可能必须在 ADFS 2.0 中激活 UsernameMixed Endpoint，并且不要忘记之后重新启动服务！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:39:09.020

来自[msdn](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.securitytokenservice.securitytokenservice.aspx)

要创建 STS，您必须从 SecurityTokenService 类派生。在您的自定义类中，您必须至少覆盖 GetScope 和 GetOutputClaimsIdentity 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:02:20.800

不确定这对您有多大帮助，但您不应该创建 SecurityTokenService。您没有在此处创建新令牌，并且您的应用程序不应该充当 STS - 这就是 AD FS 的用途。
您的应用程序应仅将从 AD FS 收到的令牌委托给服务（您在问题中提供的 msdn 链接中描述了该概念）

我猜 web api 很有可能也会支持这一点，因为它建立在 wcf 之上，并且从 http 的角度来看 - 它没有理由不支持 ws-federation/saml 2 令牌。

编辑：
[这个](http://www.microsoft.com/sv-se/showcase/details.aspx?uuid=ffc61019-9756-4175-adf4-7bdbc6dee400)视频（从 35:00+- 开始）展示了一种方法，我认为，用 ws-federation saml 令牌来实现你正在寻找的东西。我猜它也可能使用 saml2 令牌

# android - 我可以每 1 小时自动开始活动吗？

> ID：10794690
> 
> 赞同：1
> 
> 时间：2012-05-29T07:18:14.860
> 
> 标签：android

现在我正在制作一个应用程序，每 20 秒将数据发送到我在互联网上的数据库服务器。但是当我的活动运行到 2 小时时，我的应用程序没有响应，也没有再次向数据库服务器发送数据。我可以在没有用户帮助的情况下每 1 小时自动开始活动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:55:16.400

是的，您可以为此目的使用**[AlarmManager](http://justcallmebrian.com/?p=129)**类或**[TimerTask](http://www.java2s.com/Tutorial/Java/0120__Development/SchedulingaTimerTasktoRunRepeatedly.htm)**类。`AlarmManager`您可以安排每个小时的活动。与`TimerTask`您可以安排每小时的活动相同。

# linq - 复杂的 LINQ 或 EF 查询

> ID：10794698
> 
> 赞同：3
> 
> 时间：2012-05-29T07:19:09.617
> 
> 标签：linq, entity-framework, linq-to-sql, entity-framework-4, linq-to-entities

我有以下 3 节课。

工作流配置具有一个品牌和一种工作流类型。

我需要 linq 或 EF 中的一种方法，它可以让我获得现有工作流配置的所有品牌，而另一种方法可以让我获得所有品牌的非现有工作流配置。

我迷路了，因为我不知道从哪里开始。

```
public class Brand
    {
        public int BrandId { get; set; }
        public string Name { get; set; }
    }

  public class WorkflowType
    {
        public int WorkflowTypeId { get; set; }
        public string Name { get; set; }
    }

 public class WorkflowConfiguration
    {
        public int WorkflowConfigurationId { get; set; }
        public WorkflowType WorkflowType { get; set; }
        public Brand Brand { get; set; }
        public virtual ICollection<Approver> Approvers { get; set; }

    } 
```

**Update1** 以下是我的表格的外观和预期结果

**品牌**

1.  奥迪

2.  大众汽车

3.  梅赛德斯

**工作流类型**

1.  1型

2.  类型 2

3.  3型

**工作流配置**

**品牌标识，工作流类型标识**

1 ------------ 1

1 -------------2

**`List<string> GetBrandsForExistingWorkflowType(string worfklowtype)`**

如果我将 type1 传递给此方法，它应该返回：Audi 因为对于 type1，audi 存在于表中

**`List<string> GetBrandsForNonExistingWorkflowType(string workflowType)`**

如果我将 type1 传递给此方法，它应该返回。大众和梅赛德斯，因为对于 type1，这两个品牌不在关系中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:40:27.760

我认为这就是你想要的：

```
List<string> GetBrandsForExistingWorkflowType(string worfklowtype)
{
    var result = db.WorkflowConfigurations
                 .Where(x => x.WorkflowType.Name == worfklowtype)
                 .Select(x => x.Brand);
    return result;
}

List<string> GetBrandsForNonExistingWorkflowType(string workflowType)
{
    var excluded = GetBrandsForExistingWorkflowType(string worfklowtype);
    var result = db.Brands.Except(excluded);
    return result;
} 
```

# clojure - 发生异常时存储函数调用及其参数的最佳方法是什么？

> ID：10794702
> 
> 赞同：3
> 
> 时间：2012-05-29T07:19:29.930
> 
> 标签：clojure

这是[Clojure 的后续：编译时插入 pre/post 函数](https://stackoverflow.com/questions/10792581/clojure-compile-time-insertion-of-pre-post-functions)

我的目标是调用调试函数而不是抛出异常。我正在寻找存储堆栈帧、函数调用及其参数列表的最佳方法，以完成此任务。

我想要一个函数（my-uber-debug），这样当我调用它（而不是抛出异常）时，会发生以下事情：

*   弹出一个新的 Java 窗口
*   有当前*clojure*栈帧的记录
*   对于每个堆栈帧，都有传递给函数的参数的记录

这样我就可以向上/向下移动堆栈帧，并检查传递的参数以到达当前点。[如果不知何故，神奇地，我们可以得到在“让”环境中定义的变量，那也太棒了。]

## 目前的想法

我将有一个线程局部变量*uber-debug*，其类型为： List of StackFrames where StackFrame = function + arguments

在每次函数调用时，它将推送（将当前函数 + 参数传递给*uber-debug*），然后在函数调用结束时，它将从*uber-debug中删除第一个元素*

然后，当我调用 (my-uber-debug) 时，它只是弹出一个新的 java 窗口，让我与*uber-debug交互*

## 问题

到目前为止，我的想法可能并不适合设置它。解决这个问题的正确方法是什么？

## 编辑：

问题不在于 Swing/GUI 部分。它是关于如何存储堆栈帧的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:35:33.153

你的答案可能取决于很多因素，所以我将通过给出我的想法来回答这个问题。

如果您只想在发生异常时存储函数调用及其参数，则可以编写宏或函数作为包装器来完成此操作。然后，您必须将所有要调用的函数传递给此包装器。包装器将执行 try catch 操作以及您需要的任何其他操作。

除了编写包装器之外，您可能还想查看[Clojure 元数据](http://clojure.org/special_forms)，因为您正在运行的代码可以查看它的元数据并根据它做出一些决定。我从未使用过元数据，但链接上的信息看起来很有希望。

作为最后的想法，通过编辑原始帖子并将信息放在那里，进一步描述您想要完成的任务可能会有所帮助。

例如，这些堆栈跟踪是针对库还是主程序？

至于存储所有这些信息，是多个线程需要它，还是只需要一个？

您可以通过将信息存储在程序最高级别的 let 绑定中来获得，还是需要类似 ref 的东西？

# c# - 如何将数组发送到asp.net mvc中的另一个控制器方法？

> ID：10794703
> 
> 赞同：4
> 
> 时间：2012-05-29T07:19:33.277
> 
> 标签：c#, asp.net-mvc

客户是一个`List<string>`。

```
RedirectToAction("ListCustomers", new { customers = customers }); 
```

当我发送列表时，它包含 4 个项目，但是当我在控制器方法中收到它时，它只有一个项目，并且它是通用列表类型。这似乎不是我想要的。但是如何在控制器方法之间传递比字符串和整数更复杂的数据呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T07:22:40.400

重定向时不能发送复杂对象。重定向时，您正在向目标操作发送 GET 请求。发送 GET 请求时，您需要将所有信息作为查询字符串参数发送。这仅适用于简单的标量属性。

因此，一种方法是在重定向之前将实例保存在服务器上的某个位置（例如在数据库中），然后仅将 id 作为查询字符串参数传递给目标操作，该操作将能够从存储对象的位置检索对象：

```
int id = Persist(customers);
return RedirectToAction("ListCustomers", new { id = id }); 
```

在目标动作内部：

```
public ActionResult ListCustomers(int id)
{
    IEnumerable<string> customers = Retrieve(id);
    ...
} 
```

另一种可能性是将所有值作为查询字符串参数传递（请注意查询字符串的长度有限制，该限制会因浏览器而异）：

```
public ActionResult Index()
{
    IEnumerable<string> customers = new[] { "cust1", "cust2" };
    var values = new RouteValueDictionary(
        customers
            .Select((customer, index) => new { customer, index })
            .ToDictionary(
                key => string.Format("[{0}]", key.index),
                value => (object)value.customer
            )
    );
    return RedirectToAction("ListCustomers", values);
}

public ActionResult ListCustomers(IEnumerable<string> customers)
{
    ...
} 
```

另一种可能性是使用 TempData （不推荐）：

```
TempData["customer"] = customers;
return RedirectToAction("ListCustomers"); 
```

进而：

```
public ActionResult ListCustomers()
{
     TempData["customers"] as IEnumerable<string>;
    ...
} 
```

# javascript - 如何告诉我单击了哪个元素来触发模糊事件处理程序？

> ID：10794706
> 
> 赞同：2
> 
> 时间：2012-05-29T07:20:00.027
> 
> 标签：javascript, html, events

非常简单。我有一个触发函数的 blur() 事件处理程序，我希望在单击某个元素触发模糊时不触发该函数。

我尝试了 document.activeElement 但我得到了一个 HTMLBodyElement 而不是我点击的元素。

代码：

```
$j(".input_filtrare_camp").blur(
    function(event) {
    nr_img = this.parentNode.id.split("_")[1];
    //alert(document.activeElement);
    if(document.activeElement.id.indexOf("img_exact") < 0) //run only if the id of the element I clicked on doesn't contain "img_exact"
        enter_input_filtrare(event.target);                                                                         
}); 
```

当然，警报用于故障排除。

我使用techfoobar的解决方案如下：

```
var currElem = null;

$(document).mousedown(function(e) {
    currElem = e.target;
});

$j(".input_filtrare_camp").blur(
    function(event) {
    nr_img = this.parentNode.id.split("_")[1];
    if(currElem.id.indexOf("img_exact") < 0) //run only if the id of the element I clicked on doesn't contain "img_exact"
        enter_input_filtrare(event.target);                                                                         
}); 
```

查看 PointedEars 的回答，了解有关此问题的一些重要信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T17:17:35.437

下面的代码会告诉你焦点在哪里，它需要一个`setTimeout`，因为就像其他人所说的那样，当模糊触发时，新元素可能没有获得焦点。不过，真正的诀窍是要知道`document.activeElement`拥有焦点的元素。即使焦点因单击以外的其他原因而改变，此答案也将起作用

[http://jsfiddle.net/mendesjuan/crenZ/](http://jsfiddle.net/mendesjuan/crenZ/)

**HTML**

```
<input id="inp1" />
<input id="inp2" /> 
```

​</p>

**JS**请参阅[使用 JavaScript 或 jQuery 检测哪个表单输入具有焦点](https://stackoverflow.com/questions/354718/detect-which-form-input-has-focus-using-javascript-or-jquery/4455401#4455401)

```
$('input').blur(function(){
    // Need a setTimeout
    // There is no guarantee of where the focus went, but after the 
    // current event is processed, it will be available
    setTimeout(function(){
        // The currently focused element 
        console.log(document.activeElement);
    }, 0);
})​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:36:55.177

检查这个小提琴：

[http://jsfiddle.net/pHQwH/](http://jsfiddle.net/pHQwH/)

该解决方案在文档的 mousedown 上设置活动元素，该元素会为文档中的所有元素触发，并使用它来确定是否在 blur 事件中执行代码。

**代码**

* * *

```
var currElem = null;

$(document).mousedown(function(e) {
    currElem = e.target;
});

$('#f1').blur(function() {
    if(currElem != null && currElem.id != "f3") {
        $(this).val('F1: clicked elem is not f3, blur event worked');
        // do your blur stuff here
    }
    else {
        // for demo only, comment this part out
        $(this).val('F1: clicked elem is f3, no blur event');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:22:47.483

使用`event.target`- 目标事件属性产生触发事件的元素。

```
<html>
<head>

<script type="text/javascript">
  function getEventTrigger(event)
  {
    var x=event.target;
    window.alert("The id of the triggered element: " + x.id);
  }
</script>

</head>
<body >

<p id="p1" onmousedown="getEventTrigger(event)">
Click on this paragraph. An alert box will
show which element triggered the event.</p>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:29:43.427

`blur`仅使用事件*侦听*器是不可能的。`blur`当元素失去焦点时，会触发该事件。该`click`事件发生在元素获得焦点之后，`focus`在同一元素的事件之后。结果，中间存在两个元素都没有焦点的状态：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>DOM Test Case: Event Order</title>
    <script type="text/javascript">
      function debugEvent (event)
      {
        /* or window.alert(…); */
        console.log(event, "on", event.target || window.event.srcElement);
      }

      function body_load ()
      {
        var elements = document.forms[0].elements;
        var foo = elements["foo"];
        var bar = elements["bar"];
        foo.onblur = bar.onfocus = bar.onclick = debugEvent;
      }
    </script>
  </head>
  <body onload="body_load()">
    <h1>DOM Test Case: Event Order</h1>
    <form action="">
      <div>
        <input name="foo">
        <input name="bar">
      </div>
    </form>
  </body>
</html> 
```

另请参阅：[DOM 2 级事件规范：HTML 事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents)

您可以做的是对事件之前发生的`blur`事件使用侦听器。@techfoobar 建议的`mousedown`事件似乎是这样的事件（在 Chromium 18.0.1025.168（开发人员构建 134367 Linux）中），但没有标准，甚至没有规范草案来支持它¹。另请参阅：[JavaScript 中的事件优先级是什么？](https://stackoverflow.com/questions/282245/what-is-the-event-precedence-in-javascript)

无论如何，该解决方案是不完整的，因为`blur`事件和`click`事件都可以通过例如按键（组合）来触发。处理该`keydown`事件应该会有所帮助，但解决方案仍然不完整。

因此，您的方法很可能是错误的。

* * *

¹ 当然，如果您将自己限制在 jQuery 和类似库（`$j()`调用表明），您也可以满足自己在他们声称支持的浏览器子集中进行测试。但是您必须使用每个新浏览器以及每个新版本的浏览器和库重新测试它。

# wix - 如何在 WiX 中使用 wxs 中的 * 产品代码创建补丁

> ID：10794707
> 
> 赞同：1
> 
> 时间：2012-05-29T07:20:18.907
> 
> 标签：wix, installation, patch

我有一个现有的大型 WiX 安装，该安装已经发布，产品代码为 *. 我需要为几个已更改的文件创建一个小型安装。由于产品代码被提及为 *，WiX 不允许创建`msp`文件，因为产品代码不同。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:47:14.227

如果您使用[Purely WiX 方法制作补丁](http://wix.sourceforge.net/manual-wix3/wix_patching.htm)，您可以创作一个带有属性的[Validate](http://wix.sourceforge.net/manual-wix3/wix_xsd_validate.htm)元素`ProductId='no'`。像这样：

```
<Media Id="..." Cabinet="my.cab">
  <PatchBaseline Id="...">
    <Validate ProductId="no" />
  </PatchBaseline>
</Media> 
```

您可能想探索`Validate`元素的其他选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:45:45.877

您不能使用主要升级来创建次要升级补丁。在构建较新版本之前，您需要更改 Product/@Id 以匹配目标产品的产品代码。

# java - Java：为 UPnP 重新创建 SOAP 请求

> ID：10794710
> 
> 赞同：0
> 
> 时间：2012-05-29T07:20:33.833
> 
> 标签：java, android, soap, upnp

我正在尝试在 UPnP 中使用肥皂调用事件。我从网络上嗅到了这个命令，我想重现它，但我不知道从哪里开始 + 我应该使用哪个“框架/lib”。

有什么建议可以在java中完成吗？

此代码需要复制：

```
POST /_urn-upnp-org-serviceId-SwitchPower.0001_control HTTP/1.1
SOAPACTION: "urn:schemas-upnp-org:service:SwitchPower:1#SetTarget"
CONTENT-TYPE: text/xml; charset="utf-8"
HOST: 192.168.1.18:1451
Content-Length: 347

<?xml version="1.0" encoding="utf-8"?>
<s:Envelope s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"      xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
  <u:SetTarget xmlns:u="urn:schemas-upnp-org:service:SwitchPower:1">
     <newTargetValue>0</newTargetValue>
  </u:SetTarget>
</s:Body>
</s:Envelope>HTTP/1.1 200 OK
EXT: 
CONTENT-TYPE: text/xml; charset="utf-8"
SERVER: Windows NT/5.0, UPnP/1.0
Content-Length: 290

<?xml version="1.0" encoding="utf-8"?>
<s:Envelope s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"     xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <u:SetTargetResponse xmlns:u="urn:schemas-upnp-org:service:SwitchPower:1" />
  </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:55:54.293

具体来说，这个请求是对 DimmableLight DCP 的调用，因为我已经在这里回答了你

[UPnP：intel：生成堆栈：java android：在网络灯样本上调用操作](https://stackoverflow.com/questions/10755083/upnp-intel-generate-stack-java-android-invoking-actions-on-network-light-sam/10755543#10755543)

是的，它是 SOAP。虽然使用一些通用 SOAP 工具集复制它是绝对可能的，但它不会让您有任何收获。要实际发送请求，您需要知道 DimmableLight 设备在哪个套接字上公开其 DCP。这意味着控制点（您正在繁琐地尝试重现的请求的来源）必须侦听来自 UPnP 网络的 NOTIFY 数据包。SOAP 不会帮助你。

我建议从@simonc 提到的文档包中阅读 UPnP-arch-DeviceArchitecture，以便您了解 UPnP 的工作原理，然后再开始复制一些随机嗅探的数据包。然后使用现成的库之一。我不能为 Java 说话，但 C++ Platinum 中有很多可以理解的例子。UPnP 只是一个有据可查的已知和广泛技术的合并。

# python - 在python中测试两个函数的相等性

> ID：10794714
> 
> 赞同：4
> 
> 时间：2012-05-29T07:21:05.053
> 
> 标签：python, function, metaprogramming, equality

我想让两个函数彼此相等，如下所示：

```
 def fn_maker(fn_signature):
  def _fn():
    pass
  _fn.signature = fn_signature
  return _fn

# test equality of two function instances based on the equality of their signature values
>>> fa = fn_maker(1)
>>> fb = fn_maker(1)
>>> fc = fn_maker(2)
>>> fa == fb # should be True, same signature values
True
>>> fa == fc # should be False, different signature values
False 
```

我该怎么做？我知道我可能会覆盖`**eq**`，`**ne**`如果 fa、fb、fc 是某个类的实例。但是这里**eq**不在 dir(fa) 中，并且将其添加到列表中不起作用。我想出了一些解决方法，比如使用缓存，例如，

```
 def fn_maker(fn_signature):
  if fn_signature in fn_maker.cache:
    return fn_maker.cache[fn_signature]
  def _fn():
    pass
  _fn.signature = fn_signature
  fn_maker.cache[fn_signature] = _fn
  return _fn
fn_maker.cache = {} 
```

通过这种方式，可以保证相同的签名值只有一个函数（有点像单例）。但我真的在寻找一些更整洁的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T07:23:49.693

如果你把你的函数变成了一些覆盖`__call__()`以及比较运算符的类的实例，那么很容易实现你想要的语义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:14:11.237

It is not possible to override the `__eq__` implementation for functions (tested with Python 2.7)

```
>>> def f():
...   pass
...
>>> class A(object):
...   pass
...
>>> a = A()
>>> a == f
False
>>> setattr(A, '__eq__', lambda x,y: True)
>>> a == f
True
>>> setattr(f.__class__, '__eq__', lambda x,y: True)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can't set attributes of built-in/extension type 'function' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:01:48.497

我不认为这是可能的。

但是覆盖`__call__`对我来说似乎是一个不错的解决方案。

# sql - SQL 更新导致死锁

> ID：10794717
> 
> 赞同：3
> 
> 时间：2012-05-29T07:21:10.117
> 
> 标签：sql, sql-server-2005, deadlock

我们最近将一些代码从 C# 移至 SQL (SQL Server 2005) 以尝试防止并发问题。然而，在 SQL 中，我们现在遇到了死锁。我无法重新创建获得死锁的步骤，但是我能够在 SQL 跟踪中捕获它。

表上没有触发器，但有几个索引支持搜索。

根据跟踪，死锁是由两个人在同一条记录上运行相同的更新语句引起的：

```
UPDATE myTable
SET
  col2 = @var2 + col2
  ,col3 = CASE WHEN (@Var2 <= 0 OR @Var2 + Col2 <= 0)
            THEN Col3
          ELSE
            CONVERT
            (
               dbo.MoneyInfo,
               @var3 + ':' + @Var4 + ':' + @Var5
            )
          END
OUTPUT INSERTED.Col0,
       Inserted.Col2,
       Inserted.Col3
WHERE Col0 = @Var1 
```

`dbo.MoneyInfo`是自定义 CLR 类型。该表看起来像：

```
create table myTable
(
    col0 int,
    col1 int,
    col2 decimal(18,2),
    col3 dbo.MoneyInfo
) 
```

col0 是非聚集主键（PK_Stock），col1 是聚集索引（IX_Item）

这是跟踪中的死锁图：

![死锁图](../Images/39a6a7a64e160295cb71cd315c6383a3.png)

我不明白运行完全相同的存储 proc 语句的 2 个人如何最终会在同一个语句上陷入死锁。第一个连接不应该锁定记录，迫使第二个连接等待它可用吗？对于造成这种僵局的原因，我还有什么可以调查的吗？可能是因为 OUTPUT 语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:51:44.370

是的，有可能两个人执行相同的语句而不锁定第一次执行。我也生成了相同的场景。SQL 脏读问题。通过使用**ISOLATION LEVEL READ COMMITTED transactions**提供了相同的解决方案。它指定语句不能读取已被其他事务修改但未提交的数据。这可以防止脏读。当前事务中的各个语句之间的其他事务可以更改数据，从而导致不可重复读取或幻像数据。有关详细信息，请参阅 Microsoft 知识库 [http://msdn.microsoft.com/en-us/library/ms173763.aspx]

***摘要： - 只需将您的查询放在事务中 [prefer - ISOLATION LEVEL READ COMMITTED transactions]***

# jquery - wordpress 画廊 - 我如何自定义它/添加 jquery 到它？

> ID：10794719
> 
> 赞同：1
> 
> 时间：2012-05-29T07:21:24.460
> 
> 标签：jquery, wordpress, gallery

您好我正在尝试通过添加 jquery 来循环浏览我的图像而不是将其显示为单个图片链接来操作 wordpress 中的默认图库。但是，我似乎找不到要更改的文件 - 我想弄清楚如何自定义默认画廊（最好没有插件）。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:03:29.333

## 您可以过滤默认画廊简码并将其替换为您自己的简码函数。

`add_filter( 'post_gallery', 'your_gallery_func', 10, 2);`

### 在`your_gallery_func`您将需要模仿默认画廊并提取 atts：

```
/*
* Extract default gallery settings
*/
extract(shortcode_atts(array(
    'order'      => 'ASC',
    'orderby'    => 'menu_order ID',
    'id'         => $post->ID,
    'itemtag'    => 'dl',
    'icontag'    => 'dt',
    'captiontag' => 'dd',
    'columns'    => 3,
    'size'       => 'thumbnail',
    ), $attr)); 
```

### 接下来，您将需要获取附加到帖子的所有图像，如果没有则返回：

```
$attachments = get_children( array('post_parent' => $id, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) );
    if ( empty( $attachments ) )
        return ''; 
```

### 接下来编写要输出的代码，将其分配给变量，然后在函数末尾返回它。

这只是一个例子：

```
/**
 * Open the gallery <div>
 */
$output .= '<div id="gallery-'.$id.'" class="content gallery gallery-'.$id.'">'."\n";
$output .= '<div id="thumbs" class="navigation">'."\n";

/**
 * Loop through each attachment
 */
foreach ( $attachments as $id => $attachment ) :

/**
 * Open each gallery item
 */
$output .= "\n\t\t\t\t\t<li class='gallery-item'>";
$output .= '<a class="thumb" href="' .  $link[0] . '" title="' . $title . '">';
$output .= '<img src="' . $img[0] . '" alt="' . $title . '" title="' . $title . '" />';
$output .= '</a>';
/**
 * Close individual gallery item
 */
$output .= "\n\t\t\t\t\t</li>";

    endforeach;

/**
 * Close gallery and return it
 */
 $output .= '</ul><!--.thumbs-->'."\n";
 $output .= '</div><!--#gallery-wrap-->'."\n";

    return $output; 
```

# asp.net - 生成本地资源后缺少服务器标签

> ID：10794721
> 
> 赞同：5
> 
> 时间：2012-05-29T07:21:36.717
> 
> 标签：asp.net, visual-studio, resources

`Generate Local Resources`我通过“ ”工具为我的页面生成了本地资源`VS2010`。VS 为所有具有文本或工具提示等属性的控件添加元资源键。一切都很好。

但我在我的 aspx 代码服务器标签`<% if(condition) { %> my aspx code <% { %>`中已被删除。为什么？现在我必须在生成前后手动比较文件。你知道如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T14:18:13.610

生成本地资源工程静态控件或值。如果您想动态内容或扩展条件，请使用 **资源提供者模型**，或者您可以使用文字。

# c# - 在 C# 中 P/调用 C++ 类

> ID：10794725
> 
> 赞同：1
> 
> 时间：2012-05-29T07:21:56.327
> 
> 标签：c#, .net, mono, pinvoke

我想在 C# 应用程序中使用[rasterbar libtorrent 。](http://www.rasterbar.com/products/libtorrent/ "rasterbar libtorrent")它是用非托管 C++ 编写的。

我是使用 DLL 的新手，在网上找到了这篇文章：[如何编组 C++ 类](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)

它描述了无法直接编组/调用 C++ 类，您必须在 C（或托管 C++）中编写桥接器才能在托管 C# 代码中使用该库。

这篇文章来自 2007 年，我想知道现在是否有更好的解决方案来使用 C++ DLL。我正在寻找也适用于 Mono 平台的解决方案。`libtorrent`是跨平台的，所以应该可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:47:41.703

首先，您应该为 Windows 构建**libtorrent dll。**[这里的这个链接](http://softwerkz.net/2009/09/libtorrent/)可以帮助你。然后，为了从托管代码（在本例中为 C#）调用非托管代码（在本例中为 C++），您可以使用[Platform Invocation Services (PInvoke)](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)。它允许托管代码调用在 DLL 中实现的非托管函数。例如看看这个 MSDN 代码

```
// PInvokeTest.cs
using System;
using System.Runtime.InteropServices;

class PlatformInvokeTest
{
    [DllImport("msvcrt.dll")]
    public static extern int puts(string c);
    [DllImport("msvcrt.dll")]
    internal static extern int _flushall();

    public static void Main() 
    {
        puts("Test");
        _flushall();
    }
} 
```

更好的方法是在 C# 中为**libtorrent** dll 编写一个包装器类，使用 PInvoke 包装它的方法并在整个项目中使用包装器。

# android - android 似乎不支持 statfs()

> ID：10794730
> 
> 赞同：0
> 
> 时间：2012-05-29T07:22:10.273
> 
> 标签：android, linux, android-ndk, linux-kernel

我想检查android是否支持系统调用，statfs（）。所以，我制作了以下代码来检查它（它是通过ndk编译的）：

```
#include <sys/vfs.h>
#include <stdio.h>

int main()
{
    struct statfs diskInfo;
    statfs("/data",&diskInfo);
    perror("statfs,/data");
    unsigned long long blocksize = diskInfo.f_bsize;
    unsigned long long totalsize = blocksize * diskInfo.f_blocks;
    printf("new TOTAL_SIZE == %lu MB/n",totalsize>>20);
    unsigned long long freeDisk = diskInfo.f_bfree*blocksize;
    printf("DISK_FREE == %ld MB/n",freeDisk>>20);

 return 0;
} 
```

并且编译时没有报错，但是通过adb在android模拟器中运行时，提示如下：

```
kaiwii@ubuntu:~$ adb shell /data/pwrite/test2
statfs,/data: No such file or directory
new TOTAL_SIZE == 0 MB/nDISK_FREE == 0 MB/n 
```

有什么想法吗？thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:19:20.197

实际上，在 Android 中使用 statfs 来发现可用空间。正如@MH 指出的那样，起点是`StatFs.java`课堂。您可以在 中找到本机函数的实现 `frameworks/base/core/jni/android_os_StatFs.cpp`。例如，为了获得空闲块，它实现了以下函数：

```
static jint
android_os_StatFs_getFreeBlocks(JNIEnv *env, jobject thiz)
{
    struct statfs *stat = (struct statfs *)env->GetIntField(thiz, fields.context);
    return stat->f_bfree;
} 
```

因此，问题不在于 Android 不支持`statfs`syscall，而在于您的代码。在我看来，与`android_os_StatFs.cpp`您使用错误标题的代码进行比较。其中`android_os_StatFs.cpp`使用了以下标题：

```
#if INCLUDE_SYS_MOUNT_FOR_STATFS
#include <sys/mount.h>
#else
#include <sys/statfs.h>
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-05T15:06:38.143

我遇到了同样的问题（statfs 返回 0 个字节可用）。我修复了它，用 fstatfs(...) 替换了 statfs(...) 调用。以下代码适用于我（在 Android 4.2 和 5.0 上测试）：

```
#include <sys/statfs.h>

typedef unsigned long long msize;
msize getAvailableDiskSpace() {
    struct statfs data;
    if (fstatfs(NULL, &data) < 0)
        return 0;
    return (msize)data.f_bsize * data.f_bfree;
} 
```

可能您还需要允许访问 mainfest 文件中的内部存储（不确定，我没有检查如果删除用户权限会发生什么）。

# algorithm - 最快最可靠的分解方法

> ID：10794731
> 
> 赞同：4
> 
> 时间：2012-05-29T07:22:16.143
> 
> 标签：algorithm, math

现在使用的最快和最可靠的分解方法是什么？我已经了解了
Fermat 的因式分解和 Pollard 的 rho 因式分解方法，想知道是否有更好的编码和实现方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T07:31:00.743

请查看维基百科的文章。它几乎有你想找到的一切：[http ://en.wikipedia.org/wiki/Integer_factorization](http://en.wikipedia.org/wiki/Integer_factorization)

解决方案实际上取决于数字的范围，有时还取决于数字的属性。

根据维基百科，对于大约或小于 100 位的大数字，二次筛是最好的。对于较大的数字，一般数字场筛更好。

我不谈论小案例，因为您已经提到了波拉德的 rho，这应该是微不足道的。

# c# - 检查数据库中的新行 - 使用轮询或 SQL 依赖项？

> ID：10794734
> 
> 赞同：2
> 
> 时间：2012-05-29T07:22:29.757
> 
> 标签：c#, sql-server, wcf

我在数据库中有几行。我创建了一个 Windows 服务，它每 5 分钟更新一次数据库中的新行。

现在我想跟踪新行，如果有的话，WCF 服务中......并向客户端发送通知。

数据库就是SQL Server，轮询数据库或者这个SQL依赖有什么办法呢？一个代码片段会有很大帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:28:57.580

对于 5 分钟的更新频率，最好使用 Query Notifications（即。[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)）。有关示例，请参阅[从 WCF 前端删除数据更改池。](http://rusanu.com/2007/11/01/remove-pooling-for-data-changes-from-a-wcf-front-end/)如果您使用 LINQ，那么您还可以使用[LinqtoCache](http://code.google.com/p/linqtocache/)，它为 LINQ 查询提供 SqlDependency 支持的缓存失效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:04:18.137

在您的表中添加一个`date`或`datetime`（取决于您的 SQL Server 版本）字段，即“发送到客户端”日期。默认为`NULL`.

为您的服务编写一个存储过程来调用它返回一个包含`NULL`日期的所有行的结果集。在同一过程中，将所有 NULL 日期设置`CURRENT_TIMESTAMP`为将它们标记为“发送到客户端”

根据需要经常轮询该过程。

# facebook - 无法向 Facebook 用户发送批量应用请求

> ID：10794735
> 
> 赞同：0
> 
> 时间：2012-05-29T07:22:33.587
> 
> 标签：facebook, facebook-graph-api

我正在尝试通过执行如下所示的 curl 命令向应用程序用户发送 facebook 批处理请求：

`curl -F 'access_token=<FB-APP-ACCESS-TOKEN>' -F 'batch=[{"method":"POST", "relative_url":"<FB-USER-ID>/apprequests", "body":"message=Hi!"}]' https://graph.facebook.com`

但是请求没有被发送。

curl命令执行后的响应：

```
[
{"code":200,"headers":[{"name":"Access-Control-Allow-Origin","value":"*"},
{"name":"Cache-Control","value":"private, no-cache, no-store, must-revalidate"},
{"name":"Connection","value":"close"},{"name":"Content-Type","value":"text\/javascript; charset=UTF-8"},
{"name":"Expires","value":"Sat, 01 Jan 2000 00:00:00 GMT"},
{"name":"Pragma","value":"no-cache"}]
,"body":"{\"request\":\"<REQUEST-ID>\",\"to\":[\"<FB-USER-ID>\"]}"}
] 
```

我究竟做错了什么？

参考：http: [//developers.facebook.com/docs/reference/api/batch/](http://developers.facebook.com/docs/reference/api/batch/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:02:13.470

根据您作为样本提供的响应，您的请求已发送并具有`id` `<REQUEST-ID>`（在该请求的响应`body`字段中指示）

可能您的问题不是发送请求的问题，而是显示有关该请求的通知的问题，请注意，通知仅针对用户到用户的请求发送，而通知不会针对应用程序到用户的请求显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:01:21.717

消息“正文”应该在相对 URL 中作为称为“消息”的 url 编码参数

[https://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

# sql-server - SQL将数据与用户输入一起从表插入到另一个表

> ID：10794736
> 
> 赞同：0
> 
> 时间：2012-05-29T07:22:37.283
> 
> 标签：sql-server, select, insert

```
[Table1 Columns: Server, Site, App_Name]
[Table2 Columns: Event, Server, Site, App_Name]

INSERT INTO Table2 Values(Server, Site, App_Name)
SELECT * FROM Table2 WHERE Site IN ('ABC');
UPDATE Table2 SET Event = 'XYZ' WHERE Site IS NOT NULL; 
```

我想为在 query1 中创建的所有行设置相同的事件值。如果我确实更新，它会破坏一些以前的数据。如何将第二个查询作为 INSERT 的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:30:07.573

试试这个..

```
 INSERT INTO Table2 Values(Server, Site, App_Name)
SELECT Server,'XYZ',App_Name FROM Table2 WHERE Site IN ('ABC'); 
```

# actionscript-3 - 如何在flex 4.6中显示列表中选定的项目数

> ID：10794743
> 
> 赞同：0
> 
> 时间：2012-05-29T07:23:07.170
> 
> 标签：actionscript-3, apache-flex, flex4.6

我有一个包含 20 个项目的列表，我有 4 个按钮，分别是 button1、button2、button3 和 button4。现在我想在单击 button1 时显示列表的前 5 个项目，在单击 button2 时显示后 5 个项目，依此类推，怎么做？谁能帮助我？

```
<s:List id="list" visible="true" height="105" x="100" y="100">
    <s:dataProvider>
        <s:ArrayCollection>
            <fx:String>1</fx:String>
            <fx:String>2</fx:String>
            <fx:String>3</fx:String>
            <fx:String>4</fx:String>
            <fx:String>5</fx:String>
            <fx:String>6</fx:String>
            <fx:String>7</fx:String>
            <fx:String>8</fx:String>
            <fx:String>9</fx:String>
            <fx:String>10</fx:String>
            <fx:String>11</fx:String>
            <fx:String>12</fx:String>               
            <fx:String>13</fx:String>
            <fx:String>14</fx:String>
            <fx:String>15</fx:String>
            <fx:String>16</fx:String>
            <fx:String>17</fx:String>
            <fx:String>18</fx:String>
            <fx:String>19</fx:String>
            <fx:String>20</fx:String>
        </s:ArrayCollection>
    </s:dataProvider>
</s:List> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:23:55.207

为您的 ArrayCollection创建一个[filterFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#filterFunction)

# jquery - 搜索 jquery

> ID：10794746
> 
> 赞同：0
> 
> 时间：2012-05-29T07:23:14.257
> 
> 标签：jquery

挤出机 jquery 的站点在他们这边有另一个功能，他们的 jquery 没有提供：http: [//pupunzi.com/#mb.components/mb.extruder/extruder.html](http://pupunzi.com/#mb.components/mb.extruder/extruder.html) 我一直在寻找一种方法来创建他们在屏幕左侧的滑动图像，悬停时会弹出一点（未悬停时返回），但最好在单击时将用户发送到页面而不是他们使用的功能，一个弹出窗口。

有没有人知道我可以使用什么脚本/css技巧来为我的网站获得类似的东西？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:30:20.743

我认为你应该检查`jQuery.animate()`方法。作为参数，您必须放置一个带有 CSS 样式的文字对象。

方程：

```
// showing
$.css("position","absolute").animate({
    top: 30,
    left: 0,
    // ... etc.
});

// hiding
$.animate({
    left: "-500px"
}); 
```

这简单。您只能使用动画功能更改颜色。其余的 CSS 属性可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:52:49.280

[http://code.google.com/p/jqueryrotate/wiki/Examples](http://code.google.com/p/jqueryrotate/wiki/Examples)

找到这个

# foreach - 如何将 foreach 绑定 (knockout.js) 与 $data 对象一起使用

> ID：10794748
> 
> 赞同：1
> 
> 时间：2012-05-29T07:23:20.663
> 
> 标签：foreach, knockout.js

由于某种原因，我无法让 foreach 绑定与其中的 $data 对象一起使用，我已在[JSfiddle上发布了代码](http://jsfiddle.net/danieltulp/PYbzF/)

对我来说奇怪的是

```
<div data-bind="template: { name: 'input-template', foreach: $root.geometries['Kubus'].invoer }"></div> 
```

有效，并且 $data 是 'Kubus'

但那

```
<div data-bind="template: { name: 'input-template', foreach: $root.geometries[$data].invoer }"></div> 
```

给出一个 javascript 错误消息：

> 无法解析绑定。消息：TypeError：$root.geometries[$data] 未定义；绑定值：模板：{名称：'input-template'，foreach：$root.geometries[$data].invoer}

1.  你能解释为什么会这样吗？
2.  你能告诉我应该怎么做才能不显示错误吗？
3.  有没有办法用更高效的代码来做我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:37:18.443

`with: dimSelect`对我来说，你对and太棘手了`with: geoSelect`。为什么不直接使用`dimSelect()`and`geoSelect()`呢？

[http://jsfiddle.net/jearles/PYbzF/12/](http://jsfiddle.net/jearles/PYbzF/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:44:57.713

如果您使用 $data 它是一个对象，而不是像“Kubus”这样的字符串。

您应该将“name”之类的新字段添加到“geometries”并添加方法“getGeometryByName”，您将在其中执行以下操作：

```
 self.getGeometryByName = function (geometryName) {
        var result= null;
        $.each(self.geometries(), function (index, value) {
            if (value.name() == geometryName) {
                result= value;
                return false;
            }
        });

        return result;
    } 
```

当您直接按名称而不是使用模型字段时，也更容易理解视图代码*：+ $data*（来自自己的开发经验）

# android - 如何在 Android 中将圆形页面指示器置于最前面

> ID：10794749
> 
> 赞同：12
> 
> 时间：2012-05-29T07:23:38.860
> 
> 标签：android, android-viewpager, indicator

我在视图底部有一个视图寻呼机库和一个圆形页面指示器。如果可能的话，我想将页面指示器放在视图寻呼机前面并使其透明，就像在 iphone 图片库中一样。你知道怎么做吗？

![在此处输入图像描述](../Images/b6ab550d6caa068d206c5fc455c6fe0a.png)

**解决方案：**

这是作为解决方案的xml代码。感谢@sanna

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000">

<android.support.v4.view.ViewPager
    android:id="@+id/gallery_view"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    />

<com.viewpagerindicator.CirclePageIndicator
    android:id="@+id/indicator"
    android:padding="10dip"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_alignParentBottom="true"
    />
</RelativeLayout> 
```

这是我画廊的新外观。

![在此处输入图像描述](../Images/f0f351744c9aafb0a0e37c431c666169.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-29T07:32:28.227

我会先将 RelativeLayout 与您的 Pager 一起使用覆盖整个视图，然后使用 parentAlignBottom=true 添加指示器视图。

# c# - EF 中 lambda 表达式中的 SQL 函数“无法转换为存储表达式”/“无法解析为有效类型或函数”

> ID：10794754
> 
> 赞同：2
> 
> 时间：2012-05-29T07:23:55.363
> 
> 标签：c#, entity-framework, lambda

我有一个 SQL 函数，我想在使用实体框架的 lambda 表达式中使用它。假设 SQL 服务器函数是“fooFunction”。我在 EDMX 的概念模型中映射了这个函数，如下所示：

```
<Function Name="fooFunction" ReturnType="Edm.String">
   <Parameter Name="param1" Type="Edm.Int32" />
   <Parameter Name="param2" Type="Edm.String" />
   <DefiningExpression>
     dbo.fooFunction(param1, param2)
   </DefiningExpression>
 </Function> 
```

我有一个静态类，在其中我将此函数映射到代码如下：

```
[EdmFunction("Model", "fooFunction")]
   public static string fooFunction(int param1, string param2)
   {
       throw new NotImplementedException("Direct calls are not supported.");
   } 
```

但是，当我尝试调用此方法（在已编译查询上）时，出现“无法转换为存储表达式”错误：

```
CompiledQuery.Compile<...> ....  .Where(fooFunction(0,"")=="value") 
```

我一直在挠头，但我就是不明白。

有人可以帮我吗？谢谢！

编辑：哎呀，我的 EdmFunction-attribute（空格）中有一个错字：

```
[EdmFunction("Model", " fooFunction")] 
```

但是，现在我得到“fooFunction 无法解析为有效的类型或函数。”-错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:00:55.850

谢谢你的贡献，丹尼斯。然而，这不是问题的答案。我想使用 UDF，而不是存储过程。

终于弄清楚了：我必须在存储模型中添加到 SQL UDF 的映射，如下所述：http: [//blogs.msdn.com/b/alexj/archive/2009/08/07/tip-30-如何使用-a-custom-store-function.aspx](http://blogs.msdn.com/b/alexj/archive/2009/08/07/tip-30-how-to-use-a-custom-store-function.aspx)

代码类似于概念模型中的映射：

```
<Function Name="fooFunc"
  IsComposable="true"
  Schema="dbo"
  Aggregate="false"
  BuiltIn="false"
  ReturnType="nchar">
  <Parameter Name="param1" Type="int" />
  <Parameter Name="param2" Type="nchar" />
</Function> 
```

我不得不稍微调整一下 ReturnType 和 Parameter Types。我发现它们必须匹配映射 UDF 的数据类型。（本机 SQL 数据类型而不是 .NET 数据类型）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T07:49:18.167

您将 Function（由 Entity SQL 表达式定义）与 FunctionImport（按名称映射到数据源中的存储过程）混淆了[，](http://msdn.microsoft.com/en-us/library/dd468056)这[必须](http://msdn.microsoft.com/en-us/library/cc716710.aspx)在您的情况下使用。

# symfony - 使用 Doctrine2 保存的电子商务购物车

> ID：10794756
> 
> 赞同：0
> 
> 时间：2012-05-29T07:24:12.820
> 
> 标签：symfony, doctrine-orm

我需要使用 Doctrine2 将购物车内容保存到数据库中。目前，我坚持提出实体的建议。我不知道如何按顺序保存每个项目的数量。我知道它应该是[这样的](https://stackoverflow.com/questions/10027068/saving-cart-details-into-database)，但我不知道如何实现这一点。

```
class Order
{
    …

    /**
     * @ORM\ManyToOne(targetEntity="Acme\EcommerceBundle\Entity\Client", inversedBy="orders")
     */ 
    private $client;

    /**
     * @ORM\ManyToMany(targetEntity="Acme\EcommerceBundle\Entity\Item")
     */    
    private $items;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:26:02.623

`Item`您必须创建新实体，而不是直接使用实体`OrderItem`：

```
class OrderItem
{
    …

    private $qty;

    /**
     * @ORM\ManyToOne(targetEntity="Acme\EcommerceBundle\Entity\Order")
     */ 
    private $order;

    /**
     * @ORM\OneToOne(targetEntity="Acme\EcommerceBundle\Entity\Item")
     */    
    private $item;
} 
```

并在您的`Order`实体中使用以下映射：

```
class Order
{
    …

    /**
     * @ORM\OneToMany(targetEntity="Acme\EcommerceBundle\Entity\OrderItem")
     */    
    private $items;
} 
```

# ios - 如何安装 iOS 框架？我收到“LRResty/LRResty.h”文件未找到

> ID：10794762
> 
> 赞同：1
> 
> 时间：2012-05-29T07:24:45.203
> 
> 标签：ios, frameworks

我正在尝试从[http://projects.lukeredpath.co.uk/resty/getting-started.html](http://projects.lukeredpath.co.uk/resty/getting-started.html)安装 LRResty 。

这些是我采取的步骤：

1.  从 github 查看了源代码
2.  我在 XCode 中将“LRResty.xcodeproj”拖到我的项目中
3.  我添加了 ObjC 和 all_load 链接器标志
4.  然后我将#import 添加到 AppDelegate.h

此时我尝试构建，但找不到“LRResty/LRResty.h”文件

1.  我还尝试添加以下内容：LRResty to Target Dependency。

但是，我无法让它发挥作用。有任何想法吗？

截图：http: [//imgur.com/RVAAB](http://imgur.com/RVAAB)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:37:55.027

我认为：您应该根据他们的文档下载并安装框架，并尝试编译您的项目。根据文档，您可以将项目构建为框架，然后使用您刚刚构建的框架。如果您只想将其拖到您的项目中，您应该编辑它们和您的项目设置：1.将它们构建到静态库，导出头文件。2.让你的项目链接静态库，找到头文件，也许他们的项目有图片等资源，你应该把它们复制到你的项目中。它是如此复杂。

最好的方法是：下载代码，将项目构建到框架中，然后将框架拖到目标项目中。

如果你想使用 REST 风格的 Web 服务，RestKit 也是一个选择：http://restkit.org/

# objective-c - UIView animateWithDuration：持续时间：动画：完成：似乎有一个默认的过渡？

> ID：10794763
> 
> 赞同：15
> 
> 时间：2012-05-29T07:24:51.960
> 
> 标签：objective-c, ios, animation, uiview

在我的程序中，我想创建一个以恒定速度移动的动画。动画似乎开始缓慢，加速，然后缓慢结束。有什么办法可以改变这个吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-29T07:28:52.060

您可以使用`animateWithDuration:delay:options:animations:completion:`替代方法更改此设置。发送`UIViewAnimationOption`选项参数的掩码。这些是您感兴趣的选项：

```
 UIViewAnimationOptionCurveEaseInOut 
 UIViewAnimationOptionCurveEaseIn   
 UIViewAnimationOptionCurveEaseOut 
 UIViewAnimationOptionCurveLinear 
```

文档说这`UIViewAnimationOptionCurveEaseInOut`是默认值。

有关更多详细信息，请参阅文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-29T09:45:52.703

你应该使用，这将解决你的问题

```
[UIView animateWithDuration:duration delay:0 options:UIViewAnimationOptionCurveLinear  animations:^{
        //code with animation
    } completion:^(BOOL finished) {
        //code for completion
    }]; 
```

# android - 我的 android 服务 onDestroy 方法没有被调用。会不会是因为内存低？

> ID：10794765
> 
> 赞同：1
> 
> 时间：2012-05-29T07:24:57.717
> 
> 标签：android, service, ondestroy

我有一个充满活力的银河。不久前我在上面安装了 ICS rom。我注意到我以前在 2.2 上使用的视频捕获程序现在在我捕获视频时突然退出而没有通知。然后我继续了解到 ICS 使用大量内存。

我现在正在开发一个通过服务意图创建对象数组的应用程序。该服务是一种粘性服务。因此，据我了解，它会尽可能长时间地存在。在我的 onDestroy 方法中，我将我的对象数组序列化为一个文件，以便当我的服务再次启动时，加载该数组（如果文件存在）。所以我测试了我的应用程序，一切运行良好，然后我退出了活动（意图仍应在后台运行）。然后我运行 ICS 互联网浏览器并从我的应用程序中获得强制关闭。

我的系统是否有可能杀死我的服务并且永远不会调用 ondestroy？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:32:19.660

**与活动一样，onDestroy 方法在服务即将终止时被调用。当没有更多的客户端启动或绑定到它时，Android 将终止服务。与活动一样，Android 也可能在内存不足时终止服务。如果发生这种情况，Android 将在内存压力过去时尝试重新启动服务，因此如果您的服务需要为重新启动存储持久信息，最好在 onStart 方法中这样做。**

```
Could it be because of low ram? 
```

正如我之前提到的，是的。

**来源**：`OReilly.Android.Application.Development`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T13:32:09.840

使用`onLowMemory()`服务的方法。[http://developer.android.com/reference/android/app/Service.html#onLowMemory%28%29](http://developer.android.com/reference/android/app/Service.html#onLowMemory%28%29)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-29T07:29:31.973

当您的程序即将关闭时，您应该调用 yourActivity.finish()，它会调用 onDestroy()。

当 Android 系统完成应用程序时，并不总是调用 onDestroy。

# .net - MiniProfiler，摆脱对自己资源的请求

> ID：10794773
> 
> 赞同：1
> 
> 时间：2012-05-29T07:25:36.250
> 
> 标签：.net, mvc-mini-profiler

摆脱有关 MiniProfiler 自己的资源的分析信息的最简单方法是什么，例如`http://localhost:9591/admin/mini-profiler-resources/results`

**Application_Start 中的设置**

```
GlobalFilters.Filters.Add(new ProfilingActionFilter());
MiniProfilerEF.Initialize_EF42(true);
MiniProfiler.Settings.SqlFormatter = new SqlServerFormatter();

var viewEnginesCopy = viewEngines.ToArray();
viewEngines.Clear();
foreach (var viewEngine in viewEnginesCopy)
    viewEngines.Add(new ProfilingViewEngine(viewEngine)); 
```

**在 _Layout 之前`</body>`**

```
@StackExchange.Profiling.MiniProfiler.RenderIncludes() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:28:23.577

这是 2.0.1 版本中的一个开放错误，它已被修复并部署到 nuget。

# windows - 如何检测鼠标是否在图片框中的图像上？

> ID：10794775
> 
> 赞同：0
> 
> 时间：2012-05-29T07:25:47.053
> 
> 标签：windows, visual-c++, picturebox

我想检测图片框中的鼠标悬停在图像上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:52:17.653

如果图片框的意思是MS所谓的图片控件，则父窗口接收鼠标消息。

# sql - Facebook FQL UNION 操作

> ID：10794779
> 
> 赞同：0
> 
> 时间：2012-05-29T07:26:49.287
> 
> 标签：sql, facebook, union, facebook-fql

能否请任何人都可以在 FQL 中显示两个 SELECT 语句的 UNION 操作结果。当我尝试使用 UNION 操作执行 FQL 查询时，我收到以下错误 error_msg=Parser error: unexpected 'UNION' at position 171., error_code=601}。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:29:09.060

facebook 不支持 fql 中的联合。

您可以使用[fql 多查询](https://developers.facebook.com/docs/reference/rest/fql.multiquery/)

# iphone - 哪个 windows phone 7 控件的工作方式与 IOS 中的 UIPageViewController 相同？

> ID：10794780
> 
> 赞同：0
> 
> 时间：2012-05-29T07:26:59.403
> 
> 标签：iphone, windows-phone-7, windows-phone-7.1

我想在 Windows Phone 7 中制作电子书阅读器应用程序。当我单击下一页或上一页时，我发现图书馆支持效果。[它](http://www.techotopia.com/images/a/ab/Iphone_ios_5_uipageviewcontroller_app.jpg)的工作原理与 IOS 中的相同。请告诉我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:03:53.673

我从不使用它，但有一个控件似乎与您的查询相同：[this](http://beemobile4.net/products/metropolis/controls/bookcontrol)（免费试用）或[this](http://forums.create.msdn.com/forums/p/68632/68632.aspx)（免费）

如果这不是您想要的，有两种可能性：

*   你自己重新创造这个效果
*   您使用现有控件，但与您想要的略有不同（例如[VolumeGrid](http://www.youtube.com/watch?v=hCp0BA9_xy0)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:59:44.483

您可以获得的最接近（无需自己创建控件）是[PhoneApplicationPage](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage%28v=vs.92%29)控件。可以使用[Silverlight for Windows Phone Toolkit](http://silverlight.codeplex.com/)添加效果。

# php - pg_query_params 在 24464 个参数处失败，它有上限吗？(PHP)

> ID：10794786
> 
> 赞同：2
> 
> 时间：2012-05-29T07:27:35.890
> 
> 标签：php, postgresql

我在 8 个字段中构建了一个包含 10,000 行的大型多行插入查询，这意味着我将 90,000 个值作为数据数组传递给 pg_query_params。

我收到了这个错误：

> 警告：pg_query_params()：查询失败：错误：绑定消息提供 24464 个参数，但准备好的语句“”在第 57 行的 class.postgresql.php 中需要 90000

我仔细检查了 SQL 和数据数组，肯定有 90,000 个值被传递，但由于某种原因，它只检测到 24464 的幻数。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:06:57.680

postgres 使用的[有线协议](http://www.postgresql.org/docs/devel/static/protocol-message-formats.html)表明使用的参数数量作为有符号的 2 字节整数传递，90000 显然不适合。

看起来 php 驱动程序只是忽略了不适合 2 字节整数的内容 - 90000 是 0x015f90，如果你只取它的低 2 个字节，那么你会得到 0x5f90，即 24464。将插入分成更小的批次，你应该没事

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T08:20:33.830

<clippy>您似乎正在尝试使用大型多记录`INSERT`语句将数据批量加载到您的 PostgreSQL 数据库中。这是低效且笨拙的，尽管比使用单个插入而不围绕显式事务要好得多。您应该重写您的代码以使用[pg_copy_from()](http://nl3.php.net/manual/en/function.pg-copy-from.php)[`COPY`](http://www.postgresql.org/docs/current/static/sql-copy.html) ，通过 PHP 的 postgresql 驱动程序提供给它的漂亮接口来使用 PostgreSQL 的高效批量加载接口。</clippy>

说真的，`COPY`这是要走的路，看起来 Pg PHP 驱动程序支持它。如果您需要更多控制，似乎您也可以使用[pg_put_line()](http://nl3.php.net/manual/en/function.pg-put-line.php)和显式来完成。`COPY`

# oracle - 在 Oracle 过程中检查 UDT 表的可空性

> ID：10794787
> 
> 赞同：0
> 
> 时间：2012-05-29T07:27:42.383
> 
> 标签：oracle, user-defined-types

```
type NumberTable is table of number index by binary_integer;

create procedure TestNumberTable
(
    p_NumTable         IN NumberTable Default Cast(Null as NumberTable)
)
as
    /* code body */ 
```

两个问题：

1.  如何在存储过程中检查参数的可空性？

2.  如何在存储过程中找到参数的count(*) [即行数]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:06:56.480

您不能使用“二进制整数索引”创建 UDT，您可以这样做：

```
create type NumberTable is table of number; 
```

Q1：“可空性”是指“是否为空”？如果是这样，这将起作用：

```
create procedure TestNumberTable
( p_NumTable IN NumberTable Default null)
as 
  if p_NumTable is null then
     ... 
```

Q2：计数：

```
create procedure TestNumberTable
( p_NumTable IN NumberTable Default null)
as 
  dbms_output.put_line ('count is '||p_NumTable.count);
  ... 
```

# java - 每次事务后的休眠提交使其变慢

> ID：10794788
> 
> 赞同：0
> 
> 时间：2012-05-29T07:27:50.010
> 
> 标签：java, hibernate

嗨，我有一个应用程序，其中当请求带有一个数组时，我必须从表中选择数据，如果找不到，则生成新值并插入表中，然后再次循环统计检查下一个值等等. 对于一个新请求，这将完成大约 50000 次。

我在用

```
 public void save(Object obj,Session session)  {       

        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            session.save(obj);
            //session.saveOrUpdate(obj);
            //session.flush();

            session.clear();
            tx.commit();
        }
        catch (HibernateException e) {
            e.printStackTrace();
            logger.error(e.getMessage(), e);            

            if(tx!=null){
                tx.rollback();
            }
        } 
} 
```

提交方法，并为每个生成的新值调用它。就像每个请求它被调用 50000 次。我必须为每个值提交我的事务，因为我不希望在表中生成重复值，所以如果一个新请求带有相同的数据并且前一个正在运行，则应该从表中获取该值。所以我认为我将不得不提交每个事务。但是如果我使用经典的 JDBC 而不是休眠，这会变得非常快吗？与它相比，我做错了什么吗？因为我认为大部分时间都花在了开始和一次又一次地提交事务上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:41:34.587

你正在做的是*批处理*。

几个想法

*   使交易更大（跨度超过 1 个插入）
*   使用乐观锁定：如果发生冲突，请重试
*   配置 JDBC 批量大小

为避免重复插入，请添加一个包含*自然键*并具有唯一约束的额外列。

# ios - iOS UIScrollView 将图像复制到背景

> ID：10794789
> 
> 赞同：0
> 
> 时间：2012-05-29T07:27:55.587
> 
> 标签：ios, uiscrollview

再会，

我的问题如下：我有一个滚动视图，我向它们添加了多个窗口。他们之间是一个小的空白空间。当我滚动图像时，图像会移动，但它们的“副本”会留在背景上。如果我没有图像之间的空白，您将看不到它，但是用颜色填充它不是解决方案，因为主视图具有应该通过间隙可见的背景图像。

有人知道吗？

代码：

```
 lookbookScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f, 490.0f, 768.0f, 375.0f)];
[lookbookScroll setScrollEnabled:YES];
[lookbookScroll setContentSize:CGSizeMake(([books count] * 275) + 20, 375)];
[self.view addSubview:lookbookScroll];

for (int i = 0; i < [books count]; i++) 
{
    UIButton *tmpButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [tmpButton setFrame:CGRectMake((i * 275) + 20, 0, 265, 375)];
    [tmpButton setBackgroundColor:[UIColor blackColor]];
    [tmpButton setBackgroundImage:[[books objectAtIndex:i] valueForKey:@"Image"] forState:UIControlStateNormal];
    [tmpButton setTag:[[books objectAtIndex:i] valueForKey:@"Id"]];
    [tmpButton addTarget:self action:@selector(readBook:) forControlEvents:UIControlEventTouchUpInside];
    [lookbookScroll addSubview:tmpButton];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:51:49.227

adig 是对的，它被放置在视图中确实加载并被调用了两次。现在把它放在init中，就解决了这个问题。非常感谢您的快速回复。

# qt - 如何在 QT 的另一个小部件中绘制小部件的内容？

> ID：10794790
> 
> 赞同：2
> 
> 时间：2012-05-29T07:28:12.227
> 
> 标签：qt, qpainter

我想将现有的小部件 A 绘制到另一个小部件 B 上，（使 A 作为 B 的子级可能有效，但这是另一个故事）

在网上搜索后，在 qtcenter 有一个[线程](http://www.qtcentre.org/threads/8426-Draw-contents-of-widget-in-another-widget)说：

```
 QPixmap w1Pix = QPixmap::grabWidget(w1); // can work 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:25:00.580

一种（不知道其他）替代方法是使用`QWidget`'s[`render`](http://qt-project.org/doc/qt-4.8/qwidget.html#render)方法，它允许您指定要渲染到的 a`QPaintDevice`或 a `QPainter`、要渲染到该画家的位置、要绘制小部件的哪个区域以及[渲染标志](http://qt-project.org/doc/qt-4.8/qwidget.html#RenderFlag-enum)。特别是，这些标志让您可以指定是否要绘制孩子。

这比 灵活一点`grabWidget`，但是请阅读文档，调用这些函数时，设备或目标的画家必须处于特定状态。

# gcc - 从 Netbeans 编译失败，但从终端工作

> ID：10794792
> 
> 赞同：1
> 
> 时间：2012-05-29T07:28:51.180
> 
> 标签：gcc, netbeans, compilation, include, libraries

让 Netbeans 按我想要的方式编译有问题。我无法让 Netbeans 编译我的程序。当我在 Ubuntu 终端中时，我可以使用以下命令编译我的程序：

```
gcc -L/usr/local/lib -I/usr/local/include/libxml++-2.6 -I/usr/local/lib/libxml++-2.6/include  -I/usr/include/libxml2 -I/usr/include/glibmm-2.4  -I/usr/lib/i386-linux-gnu/glibmm-2.4/include -I/usr/include/sigc++-2.0  -I/usr/lib/i386-linux-gnu/sigc++-2.0/include -I/usr/include/glib-2.0  -I/usr/lib/i386-linux-gnu/glib-2.0/include -L/usr/local/lib   build/Debug/GNU-Linux-x86/cardObject.o  build/Debug/GNU-Linux-x86/visualisation.o  build/Debug/GNU-Linux-x86/monitoring.o build/Debug/GNU-Linux-x86/main.o  build/Debug/GNU-Linux-x86/player.o  build/Debug/GNU-Linux-x86/detectBiddings.o  build/Debug/GNU-Linux-x86/gameStatsObject.o  build/Debug/GNU-Linux-x86/cardOCR.o  build/Debug/GNU-Linux-x86/cardModifications.o  build/Debug/GNU-Linux-x86/geometry.o  build/Debug/GNU-Linux-x86/boardNumber.o  build/Debug/GNU-Linux-x86/cardSuit.o  build/Debug/GNU-Linux-x86/bidObject.o  build/Debug/GNU-Linux-x86/dummyCorner.o  build/Debug/GNU-Linux-x86/trayCorner.o  build/Debug/GNU-Linux-x86/logicConnection.o  build/Debug/GNU-Linux-x86/bidSuit.o  build/Debug/GNU-Linux-x86/bmCommunication.o  build/Debug/GNU-Linux-x86/imageProcessing.o  build/Debug/GNU-Linux-x86/bidOCR.o -lclsocket -lopencv_core  -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml  -lopencv_video -lcurl -lxml++-2.6 -pthread -lxml++-2.6  -lxml2 -lglibmm-2.4 -lgobject-2.0 -lsigc-2.0 -lglib-2.0  -o dist/Debug/GNU-Linux-x86/trunk 
```

那行得通，但是如何在 Netbeans 中设置包含的库、附加选项、编译选项和包含的目录，让它像上面的命令一样编译？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:23:44.577

我终于在 Netbeans 中找到了问题所在。如果您在 Netbeans 中包含库（在链接器选项卡中），则无需手动添加所有 -l... 文件。从 Addition Options 行中删除 -l... 文件为我解决了这个问题。

# java - 从 Java Web 应用程序中的 WebLogic 10.3 内部密钥库中检索一些信息

> ID：10794794
> 
> 赞同：3
> 
> 时间：2012-05-29T07:28:57.527
> 
> 标签：java, weblogic, keystore

我需要从 Web 应用程序访问存储在 WebLogic 使用的内部密钥库中的一些信息。通常，我需要为特定环境配置一些用于从我的 Web 应用程序访问另一个系统的用户/密码，因此我正在考虑将其存储在服务器密钥库中。我找不到任何可用的文档，所以我猜是否有人曾经这样做过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T08:07:32.587

这就是[KeyStore](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html)类的全部意义所在。周围已经有一些类似的问题。 [java - 如何将密钥存储在密钥库中](https://stackoverflow.com/questions/13894699/java-how-to-store-a-key-in-keystore)

# android - 应用程序未在 ICS 中启动

> ID：10794796
> 
> 赞同：0
> 
> 时间：2012-05-29T07:29:29.123
> 
> 标签：android, android-4.0-ice-cream-sandwich

我已经在 samsungapps.com 上为三星 Galaxy Note 提交了一个适用于 Android 2.3.3+ (GingerBeard) 的绘画应用程序（使用它的 S-pen）。问题是我有 7-8 个买家的问题是应用程序没有启动（1 周内 1000+ 次下载），或者立即崩溃。它们都有一个共同点，它们都是 Android 4.0 版本。我已经在带有 Android 2.3.4 的 Galaxy Note 和带有 Android 4.0 的模拟器上进行了测试；应用程序在两者上的工作方式相同。

我无法升级到 ICS，因为三星尚未正式为印度（为我的国家）推出更新，而且我被困在 GingerBeard 上。因此，我无法使用 ICS 在设备上测试该应用程序。

另外我不知道是否每个拥有 ICS 的人都有问题。我不知道从哪里开始调试，因为在模拟器中它按预期工作。

应用程序也需要一些时间来生成所有视图，而且它们有很多；这会是问题的原因吗？即 ICS 可能有更短的等待时间让应用程序给出响应。

我的应用程序也占用了相当大的堆空间，尽管 Galaxy Note 有很多（128 MB）；也许更新降低了设备的堆大小；我不知道那件事。

我已经向他们询问（回复）了他们的确切型号，但没有人回复。很难让客户保持专注。他们的非英语问题当然没有帮助。只有2个英文问题。

我应该怎么办？我在哪里可以找到问题的可能原因？这一点非常重要，因为三星正在推动其所有主要设备上的 ICS，并且预计很快也会在印度推出，但我不想等到那时。或者我应该不关心这些问题。我什至不知道这个问题是否属于SO。请帮忙！

S层 [http://www.samsungapps.com/topApps/topAppsDetail.as?productId=G00006385310&listYN=Y](http://www.samsungapps.com/topApps/topAppsDetail.as?productId=G00006385310&listYN=Y)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:04:11.707

您是否检查了开发人员控制台的堆栈跟踪？如果应用程序崩溃并且用户提交报告，您应该在此处的开发控制台中获取它们：

```
https://play.google.com/apps/publish/Home?dev_acc=<acc_id>#FeedbackOverviewPlace:p=<your package> 
```

# android - 实现一个android webkit插件，在哪里可以找到官方文档？

> ID：10794797
> 
> 赞同：0
> 
> 时间：2012-05-29T07:29:31.867
> 
> 标签：android, plugins, browser, webkit

我正在尝试实现一个 webkit 插件。我知道 webkit 插件采用 NPAPI，所以我从 mozilla 网站上查找，发现它很有帮助（对于 moziila，它是 Gecko 插件，但也采用 NPAPI）。好吧，还是有一些问题，例如，当我编写 NPP_Destroy 方法时，我需要调用 NPNetscapeFuncs 的释放对象。我从android源代码中检查了NPNetscapeFuncs的定义，releaseobject的定义是这样的：

```
typedef struct _NPNetscapeFuncs {
uint16_t size;
uint16_t version;

NPN_GetURLProcPtr geturl;
NPN_PostURLProcPtr posturl;
NPN_RequestReadProcPtr requestread;
NPN_NewStreamProcPtr newstream;
NPN_WriteProcPtr write;
NPN_DestroyStreamProcPtr destroystream;
NPN_StatusProcPtr status;
NPN_UserAgentProcPtr uagent;
NPN_MemAllocProcPtr memalloc;
NPN_MemFreeProcPtr memfree;
NPN_MemFlushProcPtr memflush;
NPN_ReloadPluginsProcPtr reloadplugins;
NPN_GetJavaEnvProcPtr getJavaEnv;
NPN_GetJavaPeerProcPtr getJavaPeer;
NPN_GetURLNotifyProcPtr geturlnotify;
NPN_PostURLNotifyProcPtr posturlnotify;
NPN_GetValueProcPtr getvalue;
NPN_SetValueProcPtr setvalue;
NPN_InvalidateRectProcPtr invalidaterect;
NPN_InvalidateRegionProcPtr invalidateregion;
NPN_ForceRedrawProcPtr forceredraw;

NPN_GetStringIdentifierProcPtr getstringidentifier;
NPN_GetStringIdentifiersProcPtr getstringidentifiers;
NPN_GetIntIdentifierProcPtr getintidentifier;
NPN_IdentifierIsStringProcPtr identifierisstring;
NPN_UTF8FromIdentifierProcPtr utf8fromidentifier;
NPN_IntFromIdentifierProcPtr intfromidentifier;
NPN_CreateObjectProcPtr createobject;
NPN_RetainObjectProcPtr retainobject;
NPN_ReleaseObjectProcPtr releaseobject;
NPN_InvokeProcPtr invoke;
NPN_InvokeDefaultProcPtr invokeDefault;
NPN_EvaluateProcPtr evaluate;
NPN_GetPropertyProcPtr getproperty;
NPN_SetPropertyProcPtr setproperty;
NPN_RemovePropertyProcPtr removeproperty;
NPN_HasPropertyProcPtr hasproperty;
NPN_HasMethodProcPtr hasmethod;
NPN_ReleaseVariantValueProcPtr releasevariantvalue;
NPN_SetExceptionProcPtr setexception;
NPN_PushPopupsEnabledStateProcPtr pushpopupsenabledstate;
NPN_PopPopupsEnabledStateProcPtr poppopupsenabledstate;
NPN_EnumerateProcPtr enumerate;
NPN_PluginThreadAsyncCallProcPtr pluginthreadasynccall;
NPN_ConstructProcPtr construct;
NPN_GetValueForURLProcPtr getvalueforurl;
NPN_SetValueForURLProcPtr setvalueforurl;
NPN_GetAuthenticationInfoProcPtr getauthenticationinfo;
NPN_ScheduleTimerProcPtr scheduletimer;
NPN_UnscheduleTimerProcPtr unscheduletimer;
NPN_PopUpContextMenuProcPtr popupcontextmenu;
NPN_ConvertPointProcPtr convertpoint; 
```

} NPNetscapeFuncs;

但是 NPN_ReleaseObjectProcPtr（实际上是大多数功能）显然没有在 mozilla 中声明。所以我无法得到任何帮助。

我是否在 Mozilla 中向错误的地方求助？有人知道吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:33:01.873

之前没有实现过，但是已经使用了[http://permalink.gmane.org/gmane.comp.documentfoundation.libreoffice.devel/18620](http://permalink.gmane.org/gmane.comp.documentfoundation.libreoffice.devel/18620)中的文档来做其他事情。希望这可以帮助

# iphone - 无法删除 iphone 键盘后面的单元格？

> ID：10794804
> 
> 赞同：0
> 
> 时间：2012-05-29T07:29:59.300
> 
> 标签：iphone

在 tableView 中，当我处于编辑模式时，我会提供一个键盘供用户键入，但我也希望他能够删除单元格。

问题是，当键盘出现时，我无法访问表格底部的单元格，即使我向上滚动，它也会返回，所以我可以删除我可以看到的单元格和我可以滚动看到的单元格，而不是极端的。

那么我应该将 tableView 的高度降低到键盘顶部吗？如果是，我该如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:35:55.140

要设置 UITableview 的高度，您可以使用以下命令：
[https ://stackoverflow.com/a/2908129/200272](https://stackoverflow.com/a/2908129/200272)

与您的类似问题的解决方案也在：
[https ://stackoverflow.com/a/494028/200272](https://stackoverflow.com/a/494028/200272)

并获取有关键盘尺寸检查官方文档的信息：http:
[//developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

亲切的问候，
博

# asp.net-mvc-3 - MVC 3 Generate - JSON 的破折号属性

> ID：10794809
> 
> 赞同：0
> 
> 时间：2012-05-29T07:30:26.443
> 
> 标签：asp.net-mvc-3, c#-3.0

我需要使用 ASP.NET MVC 3.0 或更高版本生成如下 JSON 对象。除了一些属性有 - 'dash' 例如 scale-x 之外，一切都很好。C# 不喜欢这个，有没有办法解决这个问题？

```
{
    "Data" : [
        {
            "scale-x":{
                "values":["1","2"],
            },
            "scale-y":{
                "line-width":"1px",
                }
            },
            "series" : [
                {
                    "values" : [2, 5]
                }
            ]
        }
    ]
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:00:44.590

你可以使用[ClaySharp](http://clay.codeplex.com/) Hanselman 的 一个很好的例子[是here](http://www.hanselman.com/blog/NuGetPackageOfTheWeek6DynamicMalleableEnjoyableExpandoObjectsWithClay.aspx)

```
var person = New.Person();
person["FirstName"] = "Louis";
person["LastName"] = "Dejardin"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:42:13.453

将此用作属性的属性：

```
[DataMember(Name = "scale-x")] 
```

此外，您必须在 System.Runtime.Serialization.Json 中使用序列化程序。看看[这个](https://stackoverflow.com/questions/6020889/asp-net-mvc-3-controller-json-method-serialization-doesnt-look-at-datamember-n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:54:10.420

匿名类型不能使用属性，最好的办法是将代理对象定义为您自己的类型并将其与序列化程序一起使用，然后使用上述答案。

# nservicebus - NServiceBus 和池化

> ID：10794811
> 
> 赞同：1
> 
> 时间：2012-05-29T07:30:39.957
> 
> 标签：nservicebus

我必须使用包含三个方法的外部 Web 服务：启动作业、检查作业状态、获取作业结果。我可以使用NServiceBus 的**Schedule**功能来检查 web 服务是否完成了他的工作，或者我应该使用超时的 sagas 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:05:20.487

这对我来说听起来像是一个工作流程，所以我会高度考虑使用 Saga。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T15:40:13.023

为什么不使用 Quartz.net 提供一个简单的 Windows 服务？

# php - $_POST 的 foreach 循环

> ID：10794812
> 
> 赞同：-1
> 
> 时间：2012-05-29T07:30:42.353
> 
> 标签：php, mysql, loops, foreach

我有包含许多输入字段的表单。但是我需要使用 foreach 循环从表单中获取一个字段。

```
foreach ($_POST['image'] as $image):
//mysql query to insert 
endforeach; 
```

如何使用每个循环获取“图像”的发布值？我需要使用这个 foreach 循环来获取每个图像名称。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:58:37.263

如果您使用了 input type="file" 您必须检查以下内容

1.  您的表单必须在表单标签中包含属性 enctype="multipart/form-data"。

2.  您不能从 $_POST 数组中获取文件名，而应该使用 $_FILES['fieldname']['name'];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:05:21.690

您需要使用 $_FILES。在您的表单中，如果图像输入是......

...输入类型=“文件”名称=“图像”ID=“图像”/>

...要获取图像名称，您需要使用 $_FILES['image']['name']

# eclipse - 用于在多个版本的类路径之间进行选择的 Ant 脚本

> ID：10794813
> 
> 赞同：0
> 
> 时间：2012-05-29T07:30:45.707
> 
> 标签：eclipse, ant, rad

我是 Ant 脚本的新手。

以下是需求说明

在我的工作区中，有各种项目，我必须让我的项目在 RAD 和 eclipse IDE 以及 Websphere 、 tomcat 和 jboss 环境上运行。我已经进行了项目特定设置，以使项目在 RAD 和 websphere 和 eclipse 上运行tomcat n jboss..

但是有几个文件有变化，比如类路径 n 几个配置文件。

这给我留下了三个版本的工作区。

但我的想法是拥有一个具有多个版本的类路径的工作区，例如。classpath_eclipse、classpath_rad 等.. 并有一个 ant 脚本，它将在构建期间根据哪个 ide 在正确的文件之间进行选择。

因此，请大家提出一些方法，我该如何实施这种方法。对蚂蚁来说是全新的。.:/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:55:47.053

我建议使用[Apache ivy](http://ant.apache.org/ivy/)来管理复杂的类路径。它将您的构建依赖项外部化到一个单独的**ivy.xml**文件中。

其次，ivy 可以自动下载此类依赖项，从而在源代码控制下减少项目的大小。

最后，乍一看，这个解决方案可能看起来非常复杂。[它的优点是它与Maven](http://maven.apache.org/)等其他构建技术兼容。

# 例子

## 常春藤.xml

Ivy 使用“配置”来管理 jar 的逻辑分组。

在此示例中，代码针对 SLF4J api jar 进行编译，但在运行时使用不同的日志记录实现：

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Required to compile application"/>
        <conf name="runtime.simple"  description="Runtime environment with minimal logging" extends="compile"/>
        <conf name="runtime.complex" description="Runtime environment with logback enabled" extends="compile"/>
        <conf name="test"    description="Required for test only" extends="runtime.simple"/>
        <conf name="build"   description="ANT tasks used by build"/>
    </configurations>

    <dependencies>
        <!-- compile dependencies -->
        <dependency org="org.slf4j" name="slf4j-api" rev="1.6.4" conf="compile->default"/>

        <!-- simple runtime dependencies -->
        <dependency org="org.slf4j" name="slf4j-simple" rev="1.6.4" conf="runtime.simple->default"/>

        <!-- complex runtime dependencies -->
        <dependency org="ch.qos.logback" name="logback-classic" rev="1.0.3" conf="runtime.complex->default"/>

        <!-- test dependencies -->
        <dependency org="junit" name="junit" rev="4.10" conf="test->default"/>

        <!-- Build dependencies -->
        <dependency org="org.codehaus.groovy" name="groovy-all" rev="1.8.6" conf="build->default"/>
    </dependencies>

</ivy-module> 
```

**笔记：**

*   **extends**属性可以创建 jar联合集
*   默认情况下，ivy 将从[Maven Central](http://search.maven.org/)（一个开放的存储库，现在托管大约 90% 的 Java 开源软件）下载。
*   使用**conf**属性，您可以将依赖关系与一个或多个本地定义的配置相关联。
*   Ivy 还可用于管理 3rd 方 ANT 任务依赖项

## 构建.xml

ivy ANT 任务作为[antlib](http://ant.apache.org/manual/Types/antlib.html)导入。ivy [cachepath](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)任务用于将 ivy 托管配置转换为正常的 ANT[路径](http://ant.apache.org/manual/using.html#path)，而 ivy [report](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)任务生成依赖关系报告。

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="init">
        <ivy:resolve/>

        <ivy:report todir='${ivy.reports.dir}' graph='false' xml='false'/>

        <ivy:cachepath pathid="compile.path" conf="compile"/>
        <ivy:cachepath pathid="runtime.simple.path" conf="runtime.simple"/>
        <ivy:cachepath pathid="runtime.complex.path" conf="runtime.complex"/>
        <ivy:cachepath pathid="test.path"    conf="test"/>
        <ivy:cachepath pathid="build.path"   conf="build"/>
    </target>
    ..
    .. 
```

ivy[检索](http://ant.apache.org/ivy/history/latest-milestone/use/retrieve.html)任务用于在应用程序的打包阶段填充目录：

```
<target name="war">
    <ivy:retrieve pattern="${build.dir}/libs/[artifact].[ext]" conf="runtime.complex"/>

    <war destfile="myapp.war" webxml="src/metadata/myapp.xml">
        <fileset dir="${src.dir}/html/myapp"/>
        <fileset dir="${src.dir}/jsp/myapp"/>
        <lib dir="${build.dir}/libs"/>
        <classes dir="${build.dir}/classes"/>
    </war>
</target> 
```

# IDE 配置文件

常春藤的[Eclipse 插件](http://ant.apache.org/ivy/ivyde/)可用。

*   [http://ant.apache.org/ivy/ivyde/](http://ant.apache.org/ivy/ivyde/)

也可以使用嵌入式[groovy](http://groovy.codehaus.org/The+groovy+Ant+Task)任务生成 IDE 配置文件。以下是一个 Eclipse 示例：

```
<target name="eclipse">
    <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

    <ivy:cachefileset setid="libfiles" conf="compile"/>

    <groovy>
    <arg value="${src.dir}"/>
    <arg value="${build.dir}/classes"/>

    import groovy.xml.MarkupBuilder

    //
    // Generate the project file
    //
    project.log("Creating .project")

    new File(".project").withWriter { writer ->
        def xml = new MarkupBuilder(writer)

        xml.projectDescription() {
            name(project.name)
            comment()
            projects()
            buildSpec() {
                buildCommand() {
                    name("org.eclipse.jdt.core.javabuilder")
                    arguments()
                }
            }
            natures() {
                nature("org.eclipse.jdt.core.javanature")
            }
        }
    }

    //
    // Generate the classpath file
    //
    // The "lib" classpathentry fields are populated using the ivy artifact report
    //
    project.log("Creating .classpath")

    new File(".classpath").withWriter { writer ->
        def xml = new MarkupBuilder(writer)

        xml.classpath() {
            classpathentry(kind:"src",    path:args[0])
            classpathentry(kind:"output", path:args[1])
            classpathentry(kind:"con",    path:"org.eclipse.jdt.launching.JRE_CONTAINER")

            project.references.libfiles.each {
                classpathentry(kind:"lib", path:it)
            }
        }
    }
    </groovy>        
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:06:50.317

我想分享我最终实施的方法。

有`classpath`，`settings`还有一些`project config xmls`依赖于运行时。

在每个项目中，我们创建了每个文件的`runtime_classpah`&`runtime_settings`和`configxml_runtime`版本。

创建了一个`target`以参数为参数的`ant`in `runtime`，遍历每个项目并复制`classpath_runtime`to`classpath`的内容`setting_runtime to settings`。

和一个覆盖`configxml`内容的目标`configxml_runtime`

# asp.net - 在 asp.net 中使用 SAML2.0 的 SSO

> ID：10794817
> 
> 赞同：14
> 
> 时间：2012-05-29T07:31:01.347
> 
> 标签：asp.net, saml-2.0

我的要求是在 asp.net 中使用 SAML2.0 实现 SSO。我确实有 2 个供应商。想要将用户从一个站点传递到另一个站点而不登录第二个站点。我以前从未使用过 SAML2.0。任何人都可以帮助我如何完成它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-29T14:29:50.003

First let's differentiate protocol with token format. I assume you are talking about the protocol and not the token format. But just in case here are the differences:

*   SAML 2 token format. This is simply the format of the token that your application will udenrstand. This is supported by WIF out of the box.
*   SAML 2 Protocol. This is the HTTP interactions your application will have to understand to get a token in the app. This is not supported by WIF but there is an extension you can download ([http://connect.microsoft.com/site1168/Downloads/DownloadDetails.aspx?DownloadID=36088](http://connect.microsoft.com/site1168/Downloads/DownloadDetails.aspx?DownloadID=36088))

On the other hand you have a scenario in which there are multiple identity providers. The book that Wiktor suggested (which I co-authored) explains this scenario in more detail on the [Federated Identity with Multiple Partners chapter](http://msdn.microsoft.com/en-us/library/hh446524). I recommend you to read it to get the concepts behind identity federation. Let me give you the short version of the article and some implementation details. There are two ways of solving this:

*   Implementing it at the application level. WIF will allow you to trust on more than one identity provider token (this is done with X509 certificates). Then you will have to generate sign in requests for each identity provider depending on a url (like [https://idp1.yourapp.com](https://idp1.yourapp.com) or [https://yourapp.com/idp1](https://yourapp.com/idp1)) or the user choosing (by having a home page with two links, one for each identity provdier). You will also have to normalize the claims coming from those identity provider (maybe one of them will send you a "name" claim and the other a "upn" claim).

    ```
    YourApp --> Identity Provider 1
            \-> Identity Provider 2 
    ```

*   Using what is called a "federation provider". This is another server that will issue tokens to your application and it will have the trust relationships against your identity provider. Instead of having your application trust the two identity providers, you trust only on your federation provider and the fed provider will trust the identity providers. It's a trust chain.

    ```
    YourApp --> Federation Provider --> Identity Provider 1
                                    \-> Identity Provider 2 
    ```

This architecture allows you to:

*   grow your identity providers without touching your application
*   if you later have a second application you just copy your implementation of the first one
*   you get single sign on for free
*   you get a claim transformation engine (if you use something like ADFS)
*   if you use something like ADFS you get SAML 2 protocol built in (instead of having to implement it by hand with the extension mentioned below)

Of course the downside is that you now have something else to mantain (the ADFS server).

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-29T19:21:21.263

我们编写了一个非常简单的开源 C# 组件来与 ASP.NET 应用程序一起使用：[https](https://github.com/jitbit/AspNetSaml) ://github.com/jitbit/AspNetSaml （包括代码示例）

它非常简短和基本，但这就是目标。无需添加庞大的第 3 方包，只需将一个简短的 C# 文件放入您的项目中，您就可以使用 SAML。这个东西已经为我们工作了很多年，甚至在 .NET 3.x 上

[免责声明] 我是贡献者之一。

PS。非常欢迎分叉和贡献。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-29T07:59:31.940

我建议您使用 Windows Identity Foundation 子系统，它可以简化处理基于 SAML 的身份验证。

该主题相当广泛，因此您需要一本好的手册，幸运的是，有一本免费的 MS 手册：

[http://msdn.microsoft.com/en-us/library/ff423674.aspx](http://msdn.microsoft.com/en-us/library/ff423674.aspx)

简而言之：要在两台服务器之间传递身份，其中一个应该实现身份提供者服务（安全令牌服务），第二个必须接受由第一个创建和签名的 SAML 令牌。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-01T02:05:35.170

我会推荐使用 ComponentSpace。它们提供了适用于 SAML 2.0 令牌和 SAML 2.0 协议的所有用例的库。WIF 目前不支持 SAML 2.0 协议和令牌格式，但 CTP 除外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-23T12:55:58.813

您可以为您的 asp.net 站点试用[miniOrange 的 SAML SSO 模块](https://plugins.miniorange.com/asp-dot-net-saml-2-0-single-sign-sso-connector)。它实际上是一个 httpmodule，可以添加 SSO 作为 ASP.NET 站点的登录方法，这里的主要内容是它是一个非常简单的设置。该模块本身为 SSO 配置提供了一个管理控制台。它有助于保护我网站的私人页面不被公众访问，并只允许存储在他的广告中的我的客户用户访问。我认为这可能是最适合你的。干杯！！

# android - 在 UI 中显示整数

> ID：10794819
> 
> 赞同：0
> 
> 时间：2012-05-29T07:31:10.033
> 
> 标签：android, android-activity

如何`int a;`在另一个活动 A2 中显示整数（存在于活动 A1 中）。我的意思是在访问 A2 时在 UI 中打印它。

请告诉在 java 文件和 XML 文件中写什么。提前ThnX。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:36:34.897

活动A1

您在哪里推动活动 A2

```
intent.putExtra("keyName", "somevalue"); 
```

活动A2

创建函数

```
Bundle extras = getIntent().getExtras(); 
if(extras !=null)
{
int value = extras.getInt("keyName");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:39:44.227

在 Activity1 类中

```
 int a=2;
    Intent act2=new Intent(this,Activity2.class);
        act2.putExtra("A",a);
        startActivity(act2); 
```

在 Activity2 类中

```
 Intent i = getIntent();
    Bundle extras = getIntent().getExtras(); 
    int a = extras.getInt("A");
    tv.setText(a);//considering textView id is tv.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:52:00.003

更好的是，您可以使用全局变量来存储它，方法是使用一个类 x 扩展应用程序并将变量 getter setter 声明该类在应用程序标记的 Manifests 文件中。因此您可以像 getter setter 一样访问项目中任何地方的变量。

# c++ - istream::read 和 istream::operator 之间的区别>>

> ID：10794820
> 
> 赞同：2
> 
> 时间：2012-05-29T07:31:14.930
> 
> 标签：c++

以下是我最初认为应该等效的两个代码片段：

```
{
    std::ifstream stream("test.bin", std::ios_base::in | std::ios_base::binary);
    unsigned char count = 128;
    unsigned char read = 0;
    unsigned char scanline[128];
    long long start = stream.tellg();
    while (count--) {
        stream >> scanline[read++]; // <---- This is the only line which differs
    }
    long long end = stream.tellg();
    std::cout << end - start << "\n";
}

{
    std::ifstream stream("test.bin", std::ios_base::in | std::ios_base::binary);
    unsigned char count = 128;
    unsigned char read = 0;
    unsigned char scanline[128];
    long long start = stream.tellg();
    while (count--) {
        stream.read((char*)&scanline[read++], 1); // <---- This is the only line which differs
    }
    long long end = stream.tellg();
    std::cout << end - start << "\n";
} 
```

我的问题是第一个版本输出 153（可能取决于输入数据），第二个版本输出 128（这是我所期望的）。这一定与第一个版本中数据的提取方式有关，但我不明白为什么它不起作用。它不应该只是调用：

```
istream& operator>> (istream& is, unsigned char& ch); 
```

并每次将filepos移动一个字节？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T07:49:47.223

如果您阅读`operator>>`（例如[此处](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)）的描述，那么您会看到它在阅读之前跳过了空白，直到它再次遇到空白。空白不仅是空格 ( `0x20`)，而且是制表符 ( `0x09`) 和换行符 ( `0x0a`) 之类的东西。

因此，如果您的二进制数据包含被视为文本文件空白的字节，`operator>>`则将读取但不存储它们，这将扭曲`tellg`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T07:50:44.480

`operator>>`在二进制文件中打开流时使用 不是一个好主意。
我假设在您的情况下，您的流中有某种空白字符（例如 0x20）。
您可以使用`skipws`那些也被读取的修饰符。

# linux - 恢复 .bak 文件

> ID：10794821
> 
> 赞同：5
> 
> 时间：2012-05-29T07:31:16.120
> 
> 标签：linux, bash, shell

我运行了一个 perl 脚本使用

```
perl -p -i.bak -e "..." *.sh dir/*.sh 
```

这创建了每个文件的副本，例如

```
script.sh
script.sh.bak 
```

我现在想从`.bak`文件中恢复。我怎样才能轻松做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:01:07.467

```
for file in *.sh.bak dir/*.sh.bak; do cp "$file" "${file//.bak}"; done 
```

或者您可以使用`mv`而不是`cp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:20:11.833

`find -name '*.bak'|sed 's:.bak$::'|xargs -n 1 -I % cp %.bak %`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T13:21:23.530

感谢您的修复。

我一直在使用下面的代码组合来修复 Joomla 站点中的“eval（base64_decode”）。

查找： grep -lr --include=*.php "eval(base64_decode" ./

删除： grep -lr --include=.php "eval(base64_decode" ./ | xargs sed -i.bak 's/eval(base64_decode[^;];/\n/g'

撤消：find -name '*.bak'|sed 's:.bak$::'|xargs -n 1 -I % cp %.bak %

# maven - 如何使用 maven-embedder 从 java/scala 调用 maven mojo

> ID：10794823
> 
> 赞同：2
> 
> 时间：2012-05-29T07:31:18.663
> 
> 标签：maven, maven-plugin, maven-embedder

我想直接从 java/scala 调用 help:effective-pom mojo。

**是否有一个最小的示例如何设置 maven-runtime 并调用 mojo？**

我假设在调用这个问题的答案中假设的东西之前需要一些上下文：

[和它的孩子一起阅读 POM](https://stackoverflow.com/questions/2855185/reading-poms-with-its-children)

例如

[http://svn.apache.org/viewvc/maven/plugins/tags/maven-help-plugin-2.1.1/src/main/java/org/apache/maven/plugins/help/EffectivePomMojo.java?view=标记](http://svn.apache.org/viewvc/maven/plugins/tags/maven-help-plugin-2.1.1/src/main/java/org/apache/maven/plugins/help/EffectivePomMojo.java?view=markup)

具体来说，有效的 pom mojo 向 xml 写入了一些不需要的丑陋前缀和后缀，我想稍后直接在 xml 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:10:36.960

嗯。如果我检查内容，它没有垃圾。输出将生成单个文件。如果你喜欢阅读 pom，你应该看一下[aether lib](http://www.sonatype.com/people/2010/08/introducing-aether/)，但问题是可以用它来阅读 pom 但你想执行一个 mojo 而不是需要构建一个非常复杂的 Maven 环境。看看[这里，了解它的外观](https://github.com/khmarbaise/maven-mojo-execution/tree/master/src/main/java/com/oneandone/devel/modules/pws/pwsp/embedder)。

一段时间后，我发现[它看起来更像](https://github.com/TimMoore/mojo-executor)你喜欢使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T10:53:16.010

使用[Maven 嵌入](http://maven.apache.org/ref/3-LATEST/maven-embedder/index.html)器 /MavenCli

## Java 代码

```
MavenCli cli = new MavenCli();
cli.doMain(new String[]{"help:effective-pom"}, "project_dir", System.out, System.out); 
```

## 项目配置

```
<dependencies>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-embedder</artifactId>
        <version>3.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.aether</groupId>
        <artifactId>aether-connector-wagon</artifactId>
        <version>0.9.0.M2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.wagon</groupId>
        <artifactId>wagon-http-lightweight</artifactId>
        <version>2.5</version>
    </dependency>
</dependencies> 
```

# android - ListView 中的有限项

> ID：10794824
> 
> 赞同：-1
> 
> 时间：2012-05-29T07:31:24.193
> 
> 标签：android, android-layout

我在我的项目中遇到的问题是：

-我有一个包含 1000 多个项目的列表视图。我不希望我的 listView 一次加载所有 1000 个项目。我只想在屏幕上显示 10 个项目，并在列表底部显示“更多”。当我单击“更多”时，它将向我的 listView 添加更多 10 个项目，而我的 listView 将有 20 个项目。它可以滚动并且“更多”按钮仍然存在，直到我的列表包含所有 1000 个项目。

有人有建议或代码示例吗？

在此先感谢，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:38:27.877

首先 - 如果您不希望所有 1000 个项目都加载的原因是您认为它使 UI “沉重”，因为它包含 1000 个视图，那么您就错了。列表视图有一个机制，它只负责在内存中保存假定可见的项目。当列表适配器的 getView() 方法的实现正确地重新使用转换视图参数时，它工作得最好。

如果不是原因 - 那么您可以通过实现适配器在每个模块 10 位置返回来实现它 - 一个实现 onClick 侦听器的按钮，该侦听器将项目添加到逻辑数据，然后调用 notifyDataSetChanged() 以将 UI 正确刷新到新数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:38:35.790

经过一个小时的研究，我解决了我的问题是：

-我实现`setOnScrollListener`获取我的 ListView 的 lastIndex

-创建一个线程来更新数据以`adapter`使用 lastIndex 添加 10 个项目。

这里是描述

```
 gtumcaDynamicListView.setOnScrollListener(new OnScrollListener() {

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        // what is the bottom iten that is visible
        int lastInScreen = firstVisibleItem + visibleItemCount;
        if((lastInScreen == totalItemCount) && !(loadingMore)) {
            //Run background thread
            Thread tt = new loadBackgroung(lastInScreen, adaptor);
            tt.start();
        }
    }
});

class loadBackgroung extends Thread{
public int lastIndex;
public MyCustomAdaptor adaptor;

public loadBackgroung(int lastIndex, MyCustomAdaptor adaptor) {
    super();
    this.lastIndex = lastIndex;
    this.adaptor = adaptor;
}

@Override
public void run() {

    handler.post(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            for(int i = 0;i<10;i++){
                gtuMcaBean.add(new GtuMcaBean((lastIndex + i)+" First", (lastIndex + i)+" Last", (lastIndex + i)+" Birthdate"));
            }
            adaptor.notifyDataSetChanged();
        }
    });
    loadingMore = false;

} 
```

完整代码在：[http ://code.google.com/p/dynamic-listview/source/checkout](http://code.google.com/p/dynamic-listview/source/checkout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:12:01.553

如果您使用的是网络服务。尝试创建一个存储过程，在其中给出项目的数量。每次多按一次按钮。存储过程将检索以前的数据+ 10 个数据项？这也许是一个选择

# c - 如何在 C 中返回二维指针？

> ID：10794825
> 
> 赞同：11
> 
> 时间：2012-05-29T07:31:24.700
> 
> 标签：c, pointers

正如标题所示，如何返回这样的指针：

```
xxxxxxx foo() {

    static int arr[5][5];
    return arr;
} 
```

顺便提一句。我知道我必须至少指定一个维度的大小，但是如何？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T11:34:51.470

返回类型将是`int (*)[5]`（指向 5 元素数组的指针`int`），如下所示

```
int (*foo(void))[5]
{
  static int arr[5][5];
  ...
  return arr;
} 
```

它分解为

```
 foo             -- foo
      foo(    )       -- is a function
      foo(void)       --   taking no parameters
     *foo(void)       -- returning a pointer
    (*foo(void))[5]   --   to a 5-element array       
int (*foo(void))[5]   --   of int 
```

请记住，在大多数情况下，“N-element array of `T`”类型的表达式被转换为“pointer to `T`”类型。表达式的类型`arr`是“5 元素数组的 5 元素数组`int`”，所以它被转换为“指向 5 元素数组的指针`int`”，或者`int (*)[5]`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-29T07:35:53.447

为此使用 typedef 会有所帮助：

```
typedef int MyArrayType[][5];

MyArrayType * foo(void)
{
    static int arr[5][5];
    return &arr;   // NB: return pointer to 2D array
} 
```

如果您出于某种原因不想使用 typedef，或者只是好奇上述函数的裸版本会是什么样子，那么答案是这样的：

```
int (*foo(void))[][5]
{
    static int arr[5][5];
    return &arr;
} 
```

希望您能明白为什么在这种情况下使用 typedef 是一个好主意。

# iphone - 计算2次之间的时间差 - 逻辑问题

> ID：10794827
> 
> 赞同：-1
> 
> 时间：2012-05-29T07:31:50.913
> 
> 标签：iphone, objective-c, nsstring, nsdate, nsdateformatter

我有一个格式为`Tue May 22 2012 11.00 pm`. 现在我需要将其转换为`NSDate`然后获取当前的日期和时间形式`NSDate *currentDate = [NSDate today];`。

然后找出两者`Seconds`之间的时间差。

我无法解决这个问题，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:38:28.483

> 我有一个格式为 Tue May 22 2012 11.00 pm 的字符串。现在我需要把它转换成 NSDate

好的，这部分你需要一个`NSDateFormatter`

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"EEE MM dd yyyy hh.mm a"];
NSDate *dateFromString =[df dateFromString:yourString]; 
```

这是第一部分。

现在对于

> 然后找到 2 之间的时间差（以秒为单位）。

```
NSTimeIntervall diffInSeconds = [dateFromString timeIntervalSinceNow]; 
```

这将计算从现在到`dateFromString`现在的秒数。

有关在可可中使用日期和时间的更多信息，我强烈推荐 Ole Begemenans [“在可可系列中使用日期和时间”](http://oleb.net/blog/2011/11/working-with-date-and-time-in-cocoa-part-1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:41:04.693

使用 NSDateFormatter 将您的字符串日期 Tue May 22 2012 11.00 pm 转换为 NSDate。您还需要在 nsdateformatter 中设置字符串日期的时区。

例子：

```
 NSDateFormatter * frmt;
    frmt = [[NSDateFormatter alloc] init];
    frmt.dateFormat = @"yyyy-MM-dd HH:mm:ss";
    frmt.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0]; 
```

您将需要使用与您的字符串相对应的 dateFormat。

然后你得到你的 nsdate 使用

```
[frmt dateFromString:(NSString *)dateString] 
```

那么你可以使用比较两个 NSDate`-timeIntervalSinceDate`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:35:33.743

将两者都转换为`time_t`（可能使用[`mktime`](http://linux.die.net/man/3/mktime)）然后减去。从理论上讲，您应该使用[`difftime`](http://linux.die.net/man/3/difftime)来计算差异，但实际上`time_t`在大多数典型系统（几乎可以肯定包括 MacOS）上是自一个纪元（POSIX 为 1970 年 1 月 1 日午夜）以来的整数秒数，因此减法工作正常。

当然，夏令时有一些皱纹，其中一些会造成无法解决的歧义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T07:38:30.840

`-dateFromString:`类方法[`NSDateFormatter`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)应该有帮助。

然后`-timeIntervalSinceNow`of`NSDate`给出时间间隔。您不需要中间步骤`[NSDate today]`。

# ruby-on-rails - 是否有任何完整的集成 Rails gemset 可供下载？

> ID：10794828
> 
> 赞同：1
> 
> 时间：2012-05-29T07:31:52.920
> 
> 标签：ruby-on-rails, ruby, rubygems

因为我在工作中使用代理，因此很难轻松安装 ruby​​gems 我很好奇是否有可能下载已包含所有依赖项的“自包含”gemset？

我知道 BitNami 基础设施和应用程序堆栈非常好，但有点太多了。我只想要 gems 而不是 MySQL 服务器、HTTP 服务器等等……

在通过互联网进行了一些毫无结果的研究后，我希望这里有人可以为我解答。

谢谢！

# mediawiki - 有没有办法在不编码的情况下显示背景图像 url？

> ID：10794829
> 
> 赞同：0
> 
> 时间：2012-05-29T07:32:05.823
> 
> 标签：mediawiki

作为话题？我可以让 mediawiki 在没有 base64 编码的情况下正常显示背景 URL 吗？对其进行编码有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:17:47.967

如果您不介意编辑代码，则可以。编辑包含/libs/CSSMin.php 并更改：

```
const EMBED_SIZE_LIMIT = 0; 
```

Base64 编码图像有点折衷。由于您将图像直接嵌入到页面中，因此它会使网页尺寸稍大一些，但它也减少了浏览器必须向 Web 服务器发出的请求数量（因为它请求的图像更少）。

以下是对base64编码图像的一些分析以及优缺点：[http ://davidbcalhoun.com/2011/when-to-base64-encode-images-and-when-not-to](http://davidbcalhoun.com/2011/when-to-base64-encode-images-and-when-not-to)

# drupal-7 - 如何将此 hook_nodeapi() 转换为 drupal 7 钩子？

> ID：10794830
> 
> 赞同：0
> 
> 时间：2012-05-29T07:32:07.250
> 
> 标签：drupal-7

我有实现 hook_nodeapi() 的 drupal 6 模块。我必须将其转换为 drupal 7。需要建议。任何帮助都会很棒。

*   “alter”：$node->content 数组已被渲染，因此节点主体或预告片被过滤，现在包含 HTML。仅当需要文本替换、过滤或其他原始文本操作时才应使用此操作。
*   “delete”：正在删除节点。
*   “delete revision”：节点的版本被删除。您可以删除与该修订相关的数据。
*   “插入”：节点刚刚被创建（插入到数据库中）。
*   “load”：节点即将从数据库中加载。这个钩子此时可以用来加载额外的数据。
*   “准备”：节点即将显示在添加/编辑表单上。
*   “准备翻译”：正在克隆节点以进行翻译。从 $node->translation_source 加载附加数据或复制值。
*   “print”：准备一个节点视图进行打印。用于 book_module 中的打印机友好视图
*   “rss item”：生成一个 RSS 提要。该模块可以返回要添加到为此节点生成的 RSS 项的属性。有关示例，请参见 comment_nodeapi() 和 upload_nodeapi()。还可以修改传递的 $node 以向提要项添加或删除内容。
*   “搜索结果”：节点显示为搜索结果。如果您想在结果中显示额外信息，请将其返回。
*   “presave”：节点通过验证，即将被保存。模块可以使用它在节点保存到数据库之前对其进行更改。
*   “update”：该节点刚刚在数据库中更新。
*   “更新索引”：正在索引节点。如果您希望通过nodeapi“视图”对其他信息进行索引，那么您应该在此处返回它。
*   “验证”：用户刚刚完成编辑节点并尝试预览或提交。这个钩子可以用来检查节点数据。应使用 form_set_error() 设置错误。
*   "view"：渲染前正在组装节点内容。该模块可以在渲染之前添加元素 $node->content 。这个钩子会在 hook_view() 之后被调用。$node->content 的格式与 Forms API 使用的格式相同。

    ```
     function px_nodeapi(&$node, $op, $teaser, $page) {
        // px_logger(PX_INFO, 'nodeapi', $op, $node);
        switch ($op) {
            case 'delete_revision':
                switch ($node->type) {
                    case 'case':
                    case 'case_slide':
                    case 'case_fov':
                        px_case_delete_revision($node);
                        break;
                    default:
                        break;
                }
                break;
            case 'insert':                // apply uploadpath logic to images
            case 'update':
                if ($node->type == 'image') {
                    //px_logger(PX_INFO, 'uploadpath', $op, $node);
                    if (isset($node->images) && user_access('upload files') && $node->new_file == 1) {
                        px_set_tokens($node);
                        foreach ($node->images as $size => $src_file) {
                            if (!isset($src_file) or empty($src_file)) {
                                continue;
                            }
                            $fid = db_result(db_query("SELECT fid FROM {image} WHERE nid=%d and image_size='%s' LIMIT 1", $node->nid, $size));
                            $base_file_name = basename($src_file);
                            //px_logger(PX_INFO, 'uploadpath', '$base_file_name='.$base_file_name);

                        //get the token path pattern
                        $pattern = variable_get('uploadpath_prefix_'.$node->type, 'px/users/[case-owner]/[case-handle]/images');

                        if(variable_get('uploadpath_clean_filenames', false)){
                            //get path info of file
                            $file_info = pathinfo($src_file);
                            px_logger(PX_INFO, 'uploadpath', '$file_info=', $file_info);
                            /*crop lowercase node title to max
                             replace anything except numbers and letters with underscore
                             add 10 digit unique id and file extension*/
                            $file_name = substr($file_info['filename'], 0, 50);
                            //replace anything except numbers and letters with an underscore
                            //$file_name = preg_replace("/([^a-z0-9])/", '_', strtolower($file_name));
                            $file_name = preg_replace("/([^a-zA-Z0-9])/", '_', $file_name);
                            //replace multiple underscores with a single one
                            $file_name = preg_replace("/_+/", '_', $file_name);
                            //$file_name .= '_'. substr(uniqid(rand(), true),0,5). '.'. $file_info['extension'];
                            $file_name .= '.' . $file_info['extension'];
                            // apply new, prefixed file name by token replacing the path pattern
                            $file_path = token_replace($pattern . '/', 'node', $node);
                            $file_name = $file_path . $file_name;
                        }else{
                            // apply new, prefixed file name by token replacing the path pattern
                            $file_name = str_replace(array(' ', "\n", "\t"), '_', token_replace($pattern . '/', 'node', $node)) . $base_file_name;
                        }

                        //px_logger(PX_INFO, 'uploadpath', 'new path is '.$file_name);

                        // SECURITY NOTE:
                        // Tokens include user supplied information and could provide an attack vector.
                        // The current method of creating directories prevents the use of .. or other malicious
                        // paths, but future developers should keep this in mind when modifying the following code
                        // Create the directory if it doesn't exist yet.
                        $dirs = explode('/', dirname($file_name));
                        $directory = file_directory_path();
                        $file_name = $directory.'/'.$file_name;
                        while (count($dirs)) {
                            $directory .= '/' . array_shift($dirs);
                            file_check_directory($directory, FILE_CREATE_DIRECTORY);
                        }
                        px_logger(PX_INFO, 'uploadpath', 'about to move file from '.$src_file.' to '.$file_name);

                        //move file to new subfolder
                        if (file_move($src_file, $file_name, FILE_EXISTS_RENAME)) {
                            //update node file array with new path, if needed
                            $node->images[$size] = $file_name;
                            // update file record in database
                            db_query("UPDATE {files} SET filepath = '%s' WHERE fid = %d", $file_name, $fid);
                        }
                        //px_logger(PX_INFO, 'uploadpath', 'node', $node);
                    }
                }
            }
            break;
        case 'presave':
            //   if ($node->type == 'case_slide') {
            //     $node->title = $test_type;
            //   }
            break;
        case 'view':
            if (($node->type == 'case' or $node->type == 'case_slide' or $node->type == 'case_fov')
            and $teaser and !$node->iid) {
                $node->content['image_attach'] = array(
                      '#value' => theme("image_attach_teaser", $node),
                      '#weight' => variable_get("image_attach_weight_teaser_{$node->type}", 0),
                );
            }
            if ($node->type == 'group' and !$teaser) {
                $num_members = db_result(db_query('SELECT COUNT(*) FROM {og_uid} WHERE is_active = 1 and nid = %d', $node->nid));
                $num_cases = db_result(db_query('SELECT COUNT(*) FROM {og_ancestry} WHERE group_nid = %d', $node->nid));
                unset($node->content['og_mission']);
                $case_user = user_load(array('uid' => $node->uid));
                $node->content['group_details'] = array(
                      '#value' => '
                        <div id="group_desc">
                            <!--div class="value">'.$node->og_description.'</div-->
                        </div>',
          '#weight' => -10,
                );
                if (!empty($node->body)) {
                    $node->content['group_details']['#value'] = '<div id="group_body">'.$node->body.'</div>' . $node->content['group_details']['#value'];
                }
                $node->content['group_details']['#value'] = '<div id="group_created">Created on '.px_case_format_date($node->created).' by '.theme('username', $case_user).'</div>' . $node->content['group_details']['#value'];
                $group_members = '<ul>';
                $ml = 5;
                $result = db_query('SELECT uid, created FROM {og_uid} WHERE is_active = 1 and nid = %d ORDER BY created DESC LIMIT '.$ml, $node->nid);
                while ($row = db_fetch_array($result)) {
                    $member = user_load(array('uid' => $row['uid']));
                    $group_members .= '<li>'.theme('username', $member).'</li>';
                }
                $group_members .= '</ul>';
                $node->content['group_members'] = array(
                      '#value' => '
                          <div id="group_recent_members">
                            <span class="stats"><a href="/og/users/'.$node->nid.'">All members ('.$num_members.')</a></span>
                            <span class="label">Recent members</span>
                            <div class="value">'.$group_members.'</div>
                          </div>',
                      '#weight' => -8,
                );
                $node->content['view']['#value'] = '
                      <div id="group_recent_cases">
                        <span class="stats"><a href="/node/'.$node->nid.'/cases">All cases ('.$num_cases.')</a></span>
                        <span class="label">Recent cases</span>
                        <div class="value">'.$node->content['view']['#value'].'</div>
                      </div>';
                // px_logger(PX_INFO, 'nodeapi', 'node is', $node);
            }
        default:
            // px_logger(PX_INFO, 'nodeapi', 'op is '.$op.' type is '.$node->type);
            break;
    } 
    ```

    }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:14:46.593

使用`hook_node_load()`, `hook_node_view()`, `hook_node_insert()`, `hook_node_presave()`,`hook_node_update()`已`hook_nodeapi()`弃用。还必须根据 drupal 7 面向对象的查询结构更改相关查询。

问题解决了。

# java - 使用 Http 连接上传文件并计算上传字节的百分比

> ID：10794831
> 
> 赞同：3
> 
> 时间：2012-05-29T07:32:14.807
> 
> 标签：java, blackberry, java-me

我想使用 HttpConnection 将文件上传到服务器。所以我想制作一个代表上传作业百分比的 GaugeField。

但是我在 OutputStream 中能找到的只是`.flush()`将整个输出流刷新到服务器一次。所以我无法计算在特定时间上传的字节数

如何做到这一点？任何想法？

我使用了以下内容，但大多数情况下都会出错：

```
 while (position < length) {
                try {
                    os.write(postDataBytes, position, length100);
                    position += length100;
                    int location = position * 100 / length;
                    gaugeField.setValue(location);
                    os.flush();
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:45:25.040

**有两种方法可以做到这一点：**

*   **客户端：**识别客户端写入的字节（这不是正确的方法，因为您不知道数据是否实际到达服务器）。在这种情况下，您应该通过为您提供自定义 SocketFactory 并包装底层套接字来计算写入的字节数。
*   **服务器端：**最好的方法是保持会话中服务器读取数据的计数，让客户端发出请求以了解上传进度。

**以下是实现此目的的步骤：**

1) 在服务器端的 Upload Servlet 中更新会话中的读取字节。

```
 session.setAttribute(pBytesRead); 
```

2) 编写一个将进度写入响应的 servlet UploadProgressServlet。

```
response.getOutputStream().write(session.getAttribute("uploadprogress")); 
```

3) 让客户端向 UploadProgressServlet 发出请求以了解进度

您还可以使用支持 Progress Listener 的[Apache Commons Upload API。](http://commons.apache.org/fileupload/using.html)在这种情况下，您必须以多部分格式写入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:47:42.397

你可以使用方法

```
write(byte[] b, int off, int len); 
```

并根据`offset`变量计算百分比。

# java - 从 Array 到 hashMap 的值

> ID：10794833
> 
> 赞同：0
> 
> 时间：2012-05-29T07:32:19.763
> 
> 标签：java, jdbc

我从 pl/sql 函数中检索到值，并将其存储为

```
Array arr = callablestatement.getArray(1); 
```

我想将值存储在 HashMap 中，例如

```
 hashMap.put("Dt", arr.get(0)); 
```

我怎样才能做到这一点？或者有没有其他有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:37:37.413

这里**arr**是**java.sql.Array**类型。所以你必须把它改成java数组类型。

```
String[] array = (String[]) arr.getArray(); //as getArray() returns an java.lang.Object 
```

现在您可以使用

```
hashMap.put("key1", array[0]);
hashMap.put("key2", array[1]);
....... 
```

# sql - id 以 150 开头。 sql server 和之后的数据传输

> ID：10794834
> 
> 赞同：0
> 
> 时间：2012-05-29T07:32:25.863
> 
> 标签：sql, sql-server

我有一个带有数据的表。我将在两个表之间传输数据（使用 Insert INTO SELECT 命令）。在 pld 表 id 以 150 开头（自动增量）。当我试图将该数据复制到新表时..问题。因为新表 ID 列也自动递增字段。

我想将数据传输到旧表到新表。（删除新表自动增量）和数据传输完成后。我可以重新声明自动增量归档吗？（现在新表有数据且没有自动增量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:40:16.537

你想用旧ID插入新表吗？

您可以通过使用 identity_insert 来做到这一点

```
SET IDENTITY_INSERT [table name] ON
GO

INSERT INTO table (ID, Name) VALUES (1, 'value')
GO

SET IDENTITY_INSERT [table name] OFF
GO 
```

见[identity_insert](http://msdn.microsoft.com/en-us/library/ms188059.aspx)

# c# - 从一个arrayList复制到另一个

> ID：10794838
> 
> 赞同：0
> 
> 时间：2012-05-29T07:32:52.307
> 
> 标签：c#, arraylist, .net-1.1

我有这个问题。我有一个arrayList，我想将一些对象复制到另一个。更重要的是，每个对象都有一个特定的属性，我将其用作过滤器来复制。不幸的是，我必须使用 .NET 1.1，所以我不能使用 lamda 表达式。

你有什么想法吗？我想把这个做好。我有解决方案，只需使用 foreach 循环，但我想尽可能地优化它。

对不起我的英语不好。

```
ArrayList list = new ArrayList();
//Insert to list few objects
ArrayList specificList = get few objects from list using filter. For example Object.Name 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T07:34:25.030

我认为没有什么比在 .Net 1.1 中过滤数组的循环更好的了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:35:35.847

为 .Net 1.1 使用传统循环

你说`but I want to make this as good optimize as I can.`

与 LINQ 相比，循环是迭代集合时最好的优化器。

根据您的示例，您可以执行此操作。

```
ArrayList list = new ArrayList();
//Insert to list few objects

ArrayList specificList = new ArrayList(); 

for (int i = 0; i < list.Count ; i++)
{
    if (((MyObject)list[i]).Name.Contains("ogrod87"))
        specificList.Add(list[i]);
} 
```

# sql - 从多个表中选择数据的 SQL 查询

> ID：10794843
> 
> 赞同：0
> 
> 时间：2012-05-29T07:33:00.917
> 
> 标签：sql, sql-server-2008

我有多个具有相同元数据的表（列名相同）。我想从这些表中选择最新记录，按顺序排列`CreationDate`（所有表中都存在这样的列）。 ![像这样的东西](../Images/02a2a9dd57e629f5f9d3df74fba92531.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:35:15.303

不确定 MSSQL 中的正确语法，但您应该能够：

```
SELECT ... FROM table1 UNION table2 
```

（其中 table1 和 table2 具有相同的列）

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:36:49.300

为什么不为表使用别名并选择两个表的所有列并根据表名给列赋予不同的名称。我认为这可以帮助你。

谢谢，迪帕

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:55:59.713

```
SELECT newTable.MyData, newTable.CreationDate FROM
(SELECT MyData, CreationDate FROM Table1
UNION
SELECT MyData, CreationDate FROM Table2) AS newTable
ORDER BY newTable.CreationDate DESC 
```

# php - 使用子模板和插件进行 Smarty 渲染

> ID：10794845
> 
> 赞同：1
> 
> 时间：2012-05-29T07:33:03.027
> 
> 标签：php, smarty, smarty3

我很难让我的通知框出现在我的模板中，由 Smarty 提供支持。

我有我的 main.tpl 模板：

```
{include file='header.tpl'}
{include file='notification.tpl'}
<h1>Welcome</h1>
{eval var=$content}
{include file='footer.tpl'} 
```

在 notification.tpl 中：

```
{if $notification}
<div id="notifications">
{foreach $notification as $detail}
    <div class="{$detail.type}">
        <p><span class="title">{$detail.title}</span><br>{$detail.content}</p>
    </div>
{/foreach}
</div>
{/if} 
```

在我的 index.php 页面中，它支持 smarty，包括类等，它的基础有：

```
$smarty = new Smarty();

// some details removed for simplicity

// $content is from the database
$smarty->assign("content", $content);
$smarty->assign("notification", $registry->notifications->render());
echo $smarty->fetch('main.tpl'); 
```

在上面的 $content 中，包括以下内容：

```
<p>Have an account with us? Login to your account below:</p>
{widget name="login"} 
```

我已经制作了一个插件和一个类来处理我的小部件插件 - 以上工作完美（包含表单并且可以登录）。但是，如果输入了错误的用户名/密码，我会尝试向主模板的通知区域添加一些详细信息，但由于某种原因，我似乎无法在我的小部件插件中执行此操作。

我的 function.widget.php 文件：

```
function smarty_function_widget($params, $template){
    if(empty($params['name'])){
        user_error('Widget is missing name.', E_USER_ERROR);
    }
    if(file_exists($controller = sprintf('%s/controller.php', WIDGETS_PATH . strtolower($params['name'])))){
        require_once($controller);
    } else {
        // Hide the unfound widget from the end user
        eval(sprintf('class %s extends Smarty_Widget {}', strtolower($params['name'])));
    }

    $widget = call_user_func($params['name'] . '::factory', $params);
    $widget->loadView($template->smarty)->execute($widget);
} 
```

我的小部件类，widget.class.php：

```
class Smarty_Widget {

    protected $smarty;
    protected $view = 'default';
    public $ext = '.tpl';
    public $_vars = array();
    public $widget_dir = WIDGETS_PATH;
    public $widget_template_dir;
    public $registry;

    final public static function factory($params = array()){
        $className = get_called_class();
        return new $className($params);
    }

    private function __construct($params){
        global $registry;

        $this->registry = $registry;
        $this->_vars = $params;
        unset($params, $this->_vars['name']);
    }

    final public function loadView($smarty){
        $this->smarty = $smarty;
        $this->smarty->assign($this->_vars);
        $this->widget_template_dir = $this->smarty->getTemplateDir('0') . 'widgets/';

        return $this;
    }

    final protected function display(){
        $className = strtolower(get_called_class());

        if(is_file($this->widget_template_dir . $className . '/' . $this->view . $this->ext)){
            // Only display is exists
            $this->smarty->display($this->widget_template_dir . $className . '/' . $this->view . $this->ext);
        }
    }

    public function execute(){
        return $this->display();
    }
} 
```

如果我在呈现通知的 index.php 中添加通知，我的通知类就可以工作。但是，由于某种原因，如果我将它们添加到小部件的插件 (function.widget.php) 中，这些通知不会出现。是否有一些我应该分配通知详细信息的预渲染位置，因为似乎所有子项目都在很晚才处理，但由于它已经被声明，所以它不会添加它。

所以我的问题是，我应该在哪里正确分配通知部分，因为我总是可以在一个页面上有 2 个小部件，所以不想显示每个错误两次。

# c - c 正则表达式和负向前看

> ID：10794846
> 
> 赞同：3
> 
> 时间：2012-05-29T07:33:10.143
> 
> 标签：c, regex

我有一个这样的字符串：

`"result is abcdefg hij!klm </td"` （或其他所有内容，而不是 abcd ...）

我制作的正则表达式是：
`"result is ([^<]+) </td"`

这很有效，因为找到了结果。但是当字符串是：
`"result is not found </td"`
...我怎样才能避免提取单词“未找到”？

我知道有负面的前瞻表达式，但这些在 C99 的 regex.h 中不起作用。

*   `"(?!not found)"`-> 错误的正则表达式
*   `"([^n][^o][^t][^ ][^f]..)"`-> 不匹配“现在”，例如
*   `"(([^<]+)&(!not found))"`-> 错误的正则表达式

（没有'&'运算符，我认为解决方案可以是`a&&b == !a||!b`：）

--EDIT--
这是计算正则表达式的代码部分。

```
pmatch=malloc(nmatch*sizeof(regmatch_t));  

printf("regex: %s\n",patrn);

if (regcomp(&rgT,patrn,REG_EXTENDED | REG_NEWLINE) != 0)
{
    snprintf(globals.err_buff,MAX_BUFF,"bad regex: \"%s\"",patrn);
    w_report_error(globals.err_buff,__FILE__,__LINE__,__func__,0,0,error);
    return EXIT_FAILURE;
} 
```

-- 编辑 --
也许我找到了一个解决方案：
我自己的正则表达式函数返回第 N 个反向引用，如果将一个数字 > 0 作为参数传递给它，所以...
注意：`./regex`只是一个重定向 argv[...] 的 C 程序到我自己图书馆的 w_regexp。

```
$ ./regex "result is crack </td" 'result is (not found) </td|result is ([^<]+) </td' 3
regex: result is (not found) </td|result is ([^<]+) </td
"crack"
""
"result is crack </td"
$ ./regex "result is not found </td" 'result is (not found) </td|result is ([^<]+) </td' 3
regex: result is (not found) </td|result is ([^<]+) </td
""
"not found"
"result is not found </td" 
```

所以，我认为在我的结构中添加一个数字，这意味着用于提取数据的反向引用的索引可以是一个解决方案，但我仍然会在另一天等待更好的方法，或者 2.
提前致谢.

--EDIT--（太多次:)）
它有效！我已经把我想避免追随者的字符串放在'|' 以及正确字符串的模式。
这是正则表达式：
`"result is not found </td|result is ([^<]+) </td"`
再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:56:58.973

Aztaroth 的作品也是`result is ((?!not found)[^<]+) </td`- 不同之处在于他注册的是空匹配，而我的没有注册匹配。

经测试

```
result is abcdefg hij!klm </td
result is not found </td
result is not this </td
result is note this </td
result is ote this </td 
```

**编辑：**耻辱，好吧 - 这很懒惰而且有点恶心，但是用正则表达式两次通过怎么样？第一个检查 'not found' 上的匹配项`result is (not found) </td`。然后，使用原始正则表达式进行不匹配，去掉结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:47:55.983

也许像`"result is (?:not found)?([^<]+)</td"`什么？

# android - 在android上以编程方式打开/关闭大写锁定和shift键

> ID：10794848
> 
> 赞同：0
> 
> 时间：2012-05-29T07:33:16.993
> 
> 标签：android, keyboard

我正在开发一个 android 应用程序（键盘驱动程序），首先我将蓝牙键盘与 android 设备连接，在我的 Inputmethod 服务中成功连接后，我正在接收按键并将其发送到当前打开的编辑器。问题是我无法弄清楚如何在 android 中打开/关闭大写锁定和 shift 键功能。

任何帮助！

这是从蓝牙键盘接收按键的广播接收器

```
private BroadcastReceiver key3Receiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        int key = Integer.parseInt(intent
                .getStringExtra(BluezService.COLONY_KEYPRESS_KEY));
        int action = intent.getIntExtra(BluezService.EVENT_KEYPRESS_ACTION,
                KeyEvent.ACTION_DOWN);
        Log.d("++++ key recieved   ", Integer.toString(key));

        InputConnection ic = getCurrentInputConnection();
        long eventTime = SystemClock.uptimeMillis();

        // ********* Hacks
        if(key==8)
        {
            key=127;
        }

        if (key < 130) {                
            ic.sendKeyEvent(new KeyEvent(eventTime, eventTime, action,COLONYKEYCODE[key],
                    0, COLONYKEYCODE[key], 0, 0, KeyEvent.FLAG_SOFT_KEYBOARD));
        }

    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:09:18.210

在您的 EditText （或任何适当的地方）中使用该属性：

```
android:inputType="textCapCharacters" 
```

默认情况下将所有字母大写。阅读[inputType](http://developer.android.com/reference/android/R.attr.html#inputType)以了解其其他功能。

# python - 获取边缘 g.edge_iter 末尾的节点

> ID：10794849
> 
> 赞同：1
> 
> 时间：2012-05-29T07:33:20.003
> 
> 标签：python, nodes, networkx

我在networkx python中使用edges_iter函数......我希望从图中随机提取边，然后使用这些边，获取每一端的节点......我听说edge_iter可以帮助我获得随机边（我需要随机边）但我不知道如何连接节点。我已经以 gpickle 格式保存了图形并加载它...然后我使用 a=G.edges_iter() print a 并且我得到这表明边缘的出现...我接下来想要的是找出节点附在这个边缘的末端......帮我解决这个问题......非常感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:56:52.703

`edges_iter`返回一个生成器对象，所以我想你想遍历你得到的边缘。

无论如何，边已经包含有关它们关联的节点的信息，因为每条边都可以看作是两个节点的元组。考虑这个例子：

```
import networkx as nx

g = Graph()
g.add_edges_from([(1, 2), (2, 3), (4,5), (1, 5), (2, 4)])
# Nodes are automatically added

for edge in g.edges_iter():
    print edge
    print 'Node 1:', edge[0]
    print 'Node 2:', edge[1] 
```

`edge[0]`将是一个节点，`edge[1]`将是第二个。

但是，我看不出用这种方法如何获得随机边缘。另一种解决方案可能是使用[`random.choice`](http://docs.python.org/library/random.html#random.choice)并选择边缘：

```
from random import choice

... # Initialize graph

random_edge = choice(g.edges()) 
```

如果您想选择多个随机边，您可以使用[`random.sample`](http://docs.python.org/library/random.html#random.sample)：

```
from random import sample

... # Initialize graph

# Get 2 random edges
random_edges = sample(g.edges(), 2) 
```

# c++ - 如何将矩阵分解为核矩阵的乘积？

> ID：10794850
> 
> 赞同：8
> 
> 时间：2012-05-29T07:33:22.813
> 
> 标签：c++, math, matrix, linear-algebra

问题陈述：

> 假设我们有一组核方阵 = {K1, K2, .., Kn}。给定一个矩阵 A 找到涉及最少矩阵乘法的乘积，它给出： A = Ki * Kj * ... * Kz

例子：

```
Say we have these two matrices in the set of Kernel matrices:
K1 = (1 2)    K2 = (5 6)
     (3 4)         (7 8)

Then we have a solution for A=K1*K2=(19 22) and also for B=K1*K1*K2=(105 122)
                                    (43 50)                         (229 266) 
```

是否有任何现有的 C 或 C++ 库可用于查找解决方案？如果没有，是否有任何已知的算法/启发式？

PS这不是作业问题或理论问题或其他一些小题大做。对于我在日常工作中从事的一个副项目，这是我需要解决的一个真正的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:40:27.443

您可能会查看矩阵的迹线和行列式。由于可以比完全乘法更有效地计算乘积的迹和行列式，因此它们可以帮助您有效地排除组合。

[http://en.wikipedia.org/wiki/Trace_(linear_algebra)#Trace_of_a_product](http://en.wikipedia.org/wiki/Trace_(linear_algebra)#Trace_of_a_product) http://en.wikipedia.org/wiki/Determinant#Multiplicativity_and_matrix_groups

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T22:59:37.573

trace 减少组合的想法很好，除了 tr(A*B) 不等于 tr(A)*tr(B)，所以你必须使用行列式而不是 det(A*B)=det(A) *det(B)。

det(M) 的整数因式分解可能会帮助您减少组合，除非您的内核有一些 det(Ki)=+/-1...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T21:47:48.773

我认为您想要的是进行矩阵运算的工具。本征可能适合你。**http://eigen.tuxfamily.org/index.php?title=Main_Page**

# iphone - NSURLConnection 在设备上不起作用

> ID：10794854
> 
> 赞同：1
> 
> 时间：2012-05-29T07:34:03.450
> 
> 标签：iphone, objective-c, ios, ipad, nsurlconnection

我有一个问题`NSURLConnection`。

我正在使用以下方式向服务器发送请求：

```
 [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

但我收到“连接超时”错误。

如果我使用 wi-fi 连接它就可以了。我的手机上有一个成熟的 3g 网络，可以以相当快的速度访问其他应用程序和网站。

我不明白为什么我的请求没有发送到服务器。

请帮忙。

我刚试过：

```
 [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES ]; 
```

但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:44:29.373

有没有使用 NSURLConnection 的具体原因，

我有类似的问题并且能够使用 NSURLRequest 参考下面的代码

```
-(NSString *)sendFile:(NSString*)url File:(NSString*)pFileName Handler:(NSObject*) sender{

    NSString *base64Data = [AppUtil compressAnd64EncodedString:pFileName];

    NSMutableString* requestURL = [[NSMutableString alloc] init];
    [requestURL appendString:url];

    NSMutableString* requestBody = [[NSMutableString alloc] init];
    [requestBody appendString:@"request="];
    [requestBody appendString:@""]; 

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: [NSString stringWithString:requestURL]]];

    // assume we are going to have data of 100 kb 
    NSMutableString *pRequestBody = [[NSMutableString alloc]initWithCapacity:100*1024];

    // append 
    [pRequestBody appendString:SOAP_START_PACKET];

    [pRequestBody appendString:base64Data];

    [pRequestBody appendString:SOAP_END_PACKET];

    [request setHTTPMethod: @"POST"];
    [request setValue:@"application/soap+xml" forHTTPHeaderField:@"content-type"];
    [request setValue:@"utf-8" forHTTPHeaderField:@"charset"];

    NSData *requestData = [NSData dataWithBytes: [pRequestBody UTF8String] length: [pRequestBody length]];

    [request setHTTPBody: requestData];

    [request setTimeoutInterval:HTTP_TIME_OUT];

    NSError        *error = nil;
    NSURLResponse  *response = nil;

    debugLog<<" sending request "<<endl;

    NSData *pData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    if(pData){
        NSString *pRespString = [[[NSString alloc] initWithData:pData
                                                       encoding:NSUTF8StringEncoding] autorelease];

        debugLog<<"Response of length = "<<(int)[pRespString length]<<endl;

        // write file depending upon the response 
        NSString *pAppFileName = [self parseAndGenerateFile:pRespString];

        // done with the data 
        //  [pData release];

        if(!pAppFileName){

            [self setErrorString:@"Server Error"];

            return nil;

        }

        return pAppFileName;

    }else{
        debugLog<<" data is NULL"<<endl;

        NSString *pErrorMessage = [error localizedDescription];

        [self setErrorString:pErrorMessage];

        /* Must be the Network error, lets show it to the user */

    }
    return nil;

} 
```

# ruby-on-rails-3 - 请求 json 格式的资源 - curl:(7) 无法连接到主机

> ID：10794856
> 
> 赞同：0
> 
> 时间：2012-05-29T07:34:23.163
> 
> 标签：ruby-on-rails-3, json, ruby-on-rails-3.2

我正在尝试从教程中学习如何使用 Rails 作为 iPhone 应用程序的后端。看来我很早就失败了。教程说，在我创建脚手架“目标”后，我应该将 JSON 处理添加到目标控制器操作中的 respond_to 块：

```
def index
  @goals = Goal.all

  respond_to do |format|
    format.html
    format.xml  { render :xml => @goals }
    format.json { render :json => @goals }
  end
end 
```

顺便说一句，这就是我的脚手架控制器之前的填充方式：

```
 def index
    @goals = Goal.all

    respond_to do |format|
      format.html # index.html.erb
        format.json { render json: @goals }
    end
  end 
```

当我想使用 json 格式请求资源时会发生错误（是的，我已经用数据填充了表格）：

```
$ curl http://localhost:3000/goals/1.json
curl: (7) couldn't connect to host 
```

我的问题： 1\. 如果已经有一些 json 代码（即使使用不同的语法），这一步对我来说是否必要？2.如何解决问题？我只是按照说明进行操作，仅此而已...

一些附加说明：本教程涉及 Rails 3.0，我的机器上有 Rails 3.2。有一些语法差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:55:18.647

你有没有通过运行来启动你的 Rails 服务器`rails s`？看来你还没有启动你的 Rails 服务器。运行此命令后，您应该能够在终端中看到传入的请求。

另一件事是您的代码是关于`index`操作的，而您对操作提出了请求`show`。

```
index
http://localhost:3000/goals.json

show
http://localhost:3000/goals/1.json 
```

# android - Android，如何增加列表适配器中的行高？

> ID：10794857
> 
> 赞同：2
> 
> 时间：2012-05-29T07:34:24.497
> 
> 标签：android, android-listview, listadapter

我有三个字符串数据数组，我想通过适配器将它们膨胀到列表中。问题是行的高度是固定的，即使我放了 30dip、50dip、100dip，我也会增加，高度没有生效:(

这是我的 XML 代码行：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout 
    xmlns:android                   = "http://schemas.android.com/apk/res/android"
    android:layout_width            = "fill_parent"
    android:layout_height           = "fill_parent" // even when i change it to 30dip, 50dip and etc. doesn't take effect
    android:background              = "@color/septator_grey_light">

    <TextView 
        android:id                      = "@+id/tvStatisticsTitle"
        android:layout_width            = "wrap_content"
        android:layout_height           = "wrap_content"
        android:layout_centerInParent   = "true"
        android:gravity                 = "center_vertical|center"
        android:text                    = "@string/test_10"
        style                           = "@style/simpletopic.black" />

    <TextView
        android:id                      = "@+id/tvStatisticsHost"
        android:layout_width            = "wrap_content"
        android:layout_height           = "wrap_content"
        android:layout_alignBaseline    = "@+id/tvStatisticsTitle"
        android:layout_alignBottom      = "@+id/tvStatisticsTitle"
        android:layout_alignParentLeft  = "true"
        android:layout_marginLeft       = "20dp"
        android:text                    = "@string/test_02"
        style                           = "@style/simpletopic.black.big" />

    <TextView
        android:id                      = "@+id/tvStatisticsGeust"
        android:layout_width            = "wrap_content"
        android:layout_height           = "wrap_content"
        android:layout_alignBaseline    = "@+id/tvStatisticsTitle"
        android:layout_alignBottom      = "@+id/tvStatisticsTitle"
        android:layout_alignParentRight = "true"
        android:layout_marginRight      = "20dp"
        android:text                    = "@string/test_02"
        style                           = "@style/simpletopic.black.big" />

</RelativeLayout> 
```

我的适配器代码如下。

```
public class StatisticsAdapter extends BaseAdapter {

    private final String TAG = "*** StatisticsAdapter ***";
    private final String[] TITLE = {"Shots on Target", "Shots Wide", "Offsides", "Corners", "Possession", "Fouls"};

    private LayoutInflater myInflater;

    private String[] hostInfo;
    private String[] guestInfo;

    public StatisticsAdapter(Context context) {
        myInflater = LayoutInflater.from(context);

        Log.i(TAG, "Adapter setuped successfully.");
    }

    public void setData(Statistics statisticsItems) {

        hostInfo  = new String[6];
        guestInfo = new String[6];

        hostInfo[0]  = statisticsItems.getHomeTeamShotsTarget();
        hostInfo[1]  = statisticsItems.getHomeTeamShotsWide();
        hostInfo[2]  = statisticsItems.getHomeTeamOffsides();
        hostInfo[3]  = statisticsItems.getHomeTeamCorners();
        hostInfo[4]  = statisticsItems.getHomeTeamPossession();
        hostInfo[5]  = statisticsItems.getHomeTeamFouls();

        guestInfo[0] = statisticsItems.getAwayTeamShotsTarget();
        guestInfo[1] = statisticsItems.getAwayTeamShotsWide();
        guestInfo[2] = statisticsItems.getAwayTeamOffsides();
        guestInfo[3] = statisticsItems.getAwayTeamCorners();
        guestInfo[4] = statisticsItems.getAwayTeamPossession();
        guestInfo[5] = statisticsItems.getAwayTeamFouls();

        Log.i(TAG, "Data passed to the adapter.");
    }

    @Override
    public int getCount() {
        return TITLE.length;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;        

        if (convertView == null) {
            convertView = myInflater.inflate(R.layout.list_statistics_adapter, null);
            holder      = new ViewHolder();
            holder.tvStatisticsHost   = (TextView) convertView.findViewById(R.id.tvStatisticsHost);
            holder.tvStatisticsTitle  = (TextView) convertView.findViewById(R.id.tvStatisticsTitle);
            holder.tvStatisticsGeust  = (TextView) convertView.findViewById(R.id.tvStatisticsGeust);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.tvStatisticsHost.setText(hostInfo[position]);
        holder.tvStatisticsTitle.setText(TITLE[position]);
        holder.tvStatisticsGeust.setText(guestInfo[position]);

        return convertView;
    }

    static class ViewHolder {
        TextView tvStatisticsHost;
        TextView tvStatisticsTitle;
        TextView tvStatisticsGeust;
    }
} 
```

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:15:07.903

尝试在您的 getView() 中使用`myInflater.inflate(R.layout.list_statistics_adapter, parent, false)`而不是。`myInflater.inflate(R.layout.list_statistics_adapter, null)`指定 parent 时，RelativeLayout 效果更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T07:41:46.463

高度必须是 wrap_content。添加一些具有固定高度和宽度的视图（空视图）并将它们用作边距。

```
<View
    android:id="@+id/view1"
    android:layout_width="wrap_content"
    android:layout_height="20dp" /> 
```

这应该够了吧。您甚至可以将他们的背景更改为您想要的任何内容。（但是，如果要显示该背景，则应设置一些宽度）

# codeigniter - Sermepa 支付系统和 CodeIgniter

> ID：10794859
> 
> 赞同：1
> 
> 时间：2012-05-29T07:34:38.957
> 
> 标签：codeigniter, payment

我正在尝试使用西班牙系统 Serpema 建立在线支付系统。我正在使用在线确认：在接受付款后，系统会向我发送一个带有确认数据的 POST，这就是我遇到问题的地方，因为 CI 拒绝来自外部服务器的该帖子（我认为）是由于 csrf 保护。

我没有发布代码，因为我需要知道的是获取该帖子的某种方式。CI 说“不允许您请求的操作”，当我看到支付系统日志时，它已返回 500 错误。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:01:00.327

这是 CSRF 保护。您可以为在 Hooks 中获取帖子的控制器-> 功能禁用它

# iphone - 模型 dismissviewcontroller 或出现另一个模型错误

> ID：10794862
> 
> 赞同：0
> 
> 时间：2012-05-29T07:35:13.750
> 
> 标签：iphone, objective-c, ios

我的应用程序中有 facebook 连接；
一旦用户打开应用程序，masterViewController 就会激活；
我检查了用户是否在 masterViewController 中登录，如果没有登录，我展示了 facebook 登录的模型视图控制器，
然后当用户按下通过 facebook 的连接和 facebook 返回成功时 iside facebooklogin 控制器我想展示另一个视图控制器来确认一些信息 ; 我通过这段代码在masterviewController中展示了facebook

```
if( ![user islogged] )
{
    self.fbLogin = [[facebookLogin alloc] initWithNibName:@"facebookLogin" bundle:nil];
    [self.navigationController presentModalViewController:fbLogin animated:YES];
} 
```

在我写的 facebooklogin 控制器“请求确实加载”委托中

```
- (void)request:(FBRequest *)request didLoad:(id)result {

       if ([result isKindOfClass:[NSArray class]] && ([result count] > 0)) {
            result = [result objectAtIndex:0];
       }

       NSLog(@"user data %@",result);

       [self dismissModalViewControllerAnimated:YES];

        userData = nil;
        nameID  = nil;
} 
```

但是模型没有返回，我还尝试在 facebook 请求中展示另一个模型，请求确实加载但它也没有响应，请告知我如何展示另一个模型然后在这种情况下将其关闭？

# c++builder - 如何使用 C++ Builder 打开带有按钮的新表单？

> ID：10794869
> 
> 赞同：2
> 
> 时间：2012-05-29T07:35:38.380
> 
> 标签：c++builder

我有一个带有 Form1 和 Form2 的程序。如何从 form1 单击按钮打开 form2？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T21:12:15.960

再多一点信息

在你的 Project.cpp 中有这个： Application->CreateForm(__classid(TForm2), &Form2); 表示将在您启动应用程序时创建表单。

如果您想在单击按钮时创建自己的表单，请执行以下操作

```
TForm2 *Form = new TForm2( this );
Form->ShowModal(); 
```

例如，如果您需要使用自定义构造函数，您还可以创建一个新表单，传入您需要的任何值。例如

```
TForm2 *Form = new TForm2( this, "My New Form" , Now() );
Form->ShowModal(); 
```

除了设置表单的所有者之外，上述方法还传入一个字符串和一个 TDateTime，然后您可以在表单构造函数中使用它们来做一些事情。

请记住，如果您自己创建这些表格，您将需要删除它们。

要允许其他按钮或控件也可以访问您的表单，您需要执行以下操作

在标题的私有部分添加以下内容

```
TForm2 *Form; 
```

现在回到 cpp，您需要先创建表单，然后才能使用它，这与之前的略有不同

```
Form = new TForm2( this );
Form->ShowModal(); 
```

但是现在如果你想访问表格来更新标题，你可以简单地做

```
Form->Caption = "Changed Caption"; 
```

表格上的标题现在将被更改

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T07:47:12.987

博兰什么？德尔福？C++ 生成器？

对于Delphi：确保Delphi`Form2`在Project.dpr中创建了一个实例：`Application.CreateForm(TForm2, Form2);` 然后将`Form2`单元名称添加到单元中的一个`uses`子句中`Form1`，然后可以使用`Form2.Show;`或`Form2.ShowModal;`。

对于 C++：确保 C++ Builder`Form2`在 Project.cpp 中创建了一个实例：`Application->CreateForm(__classid(TForm2), &Form2);` 然后在该单元的 .cpp 文件中添加一个`#include`用于该单元的 .hpp 文件的语句，然后您可以使用或。`Form2``Form1``Form2->Show();``Form2->ShowModal();`

# sql-server - 使用具有相同源和目标表的 SQL Server MERGE 命令

> ID：10794870
> 
> 赞同：3
> 
> 时间：2012-05-29T07:35:39.373
> 
> 标签：sql-server, merge

我正在尝试使用 MERGE 命令插入或更新单个表，但是我总是得到“0行受影响”。我的目标很简单：如果存在更新，否则插入。我究竟做错了什么？

注意：表的主键是一个组合键 = [date]+sip+dip+port 其中 date 是 datetime 并且所有其他字段都是 int

```
merge iplog as t
using (SELECT * from iplog Where [date]='20120101' and sip=1 and dip=2 and port=80) as s
on t.[date]=s.[date] and t.sip=s.sip and t.dip=s.dip and t.port=s.port
when matched then
    update set t.size=t.size+s.size
when not matched then
    insert values ('20120101',1,2,80,1); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-29T07:48:49.373

`date`如果当前没有匹配的,和，我认为您想要插入一个新值`sip`，但目前尚不清楚您想要的条件大小。我选了1：`dip``port``UPDATE`

```
create table iplog (
    [date] date not null,
    sip int not null,
    dip int not null,
    port int not null,
    size int not null
)
GO
merge iplog as t
using (SELECT '20120101' as [date] , 1 as sip , 2 as dip , 80 as port) as s
on t.[date]=s.[date] and t.sip=s.sip and t.dip=s.dip and t.port=s.port
when matched then
    update set t.size=t.size+1 --What should this be?
when not matched then
    insert values ('20120101',1,2,80,1);

select * from iplog 
```

您会注意到源现在根本没有引用目标表。

* * *

旁注 - 我建议避免使用 SQL 关键字，例如`date`列名。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T08:23:04.130

我猜你的逻辑是错误的。

你的逻辑是：

```
if source is empty* then insert my row 
```

*源为空时

```
SELECT '20120101' as [date] , 1 as sip , 2 as dip , 80 as port 
```

返回 0 行..

所以实际上你正在尝试将目标与空源合并。是逻辑错误。

你应该写这样的东西

```
IF EXISTS(SELECT * from iplog Where [date]='20120101' and sip=1 and dip=2 and port=80)
BEGIN
 UPDATE
   iplog 
 SET 
   t.size=t.size+1
 WHERE
   [date]='20120101' and sip=1 and dip=2 and port=80
END
ELSE
BEGIN
  INSERT INTO iplog VALUES ('20120101',1,2,80,1)
END 
```

**更新：** 想象一下 MERGE 是如何工作的：你有空源而不是空目标。

`MERGE`可以有两种`WHEN NOT MATCHED`从句

第一的，

```
[ WHEN NOT MATCHED [ BY TARGET ] [ AND <clause_search_condition> ]
        THEN <merge_not_matched> ] 
```

这意味着对于源中没有一对目标的每一行，您都可以插入目标。因此，如果您有空源，则没有机会做任何`INSERT`.

```
<merge_not_matched>::=
{
    INSERT [ ( column_list ) ] 
        { VALUES ( values_list )
        | DEFAULT VALUES }
} 
```

第二，

```
[ WHEN NOT MATCHED BY SOURCE [ AND <clause_search_condition> ]
    THEN <merge_matched> ] [ ...n ] 
```

这意味着对于目标中没有一对源的每一行，您可以在目标上执行 UPDATE 或 DELETE。不可能进行 INSERT。

```
<merge_matched>::=
    { UPDATE SET <set_clause> | DELETE } 
```

要为您制作`MERGE`作品，您无需使用源代码。您的来源是`SELECT`with`WHERE`子句，因此它可能成为一个空来源。因此，您应该使用某种代码逻辑使其非空，使用一些临时表或表变量或棘手的 JOIN 或 UNION .. 但这样您的代码可能对您来说变得不可读。最好在那种情况下完全放弃想法`MERGE`并做经典的条件`UPDATE`or `INSERT`。

# r - 估计 R 中具有不规则时间间隔的时间序列的 phi

> ID：10794873
> 
> 赞同：0
> 
> 时间：2012-05-29T07:35:55.027
> 
> 标签：r, time-series

我有多次访问多个位置的时间序列数据，我需要检查数据中是否存在时间自相关。我可以使用 lme4 库中的 corAR1 函数来构造和初始化 corstruct 对象，但无论我提供什么 phi 的起始值，它都会向我吐回相同的值。这似乎表明 corAR1 用于估计 phi 的任何方法都不满意我的数据。

是否有其他（简单）方法可以以某种方式估算 phi？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:37:10.033

corAR1() 不太可能与 lme4 包一起使用。它来自 nlme 包。处理不规则时间序列时，请查看 corCAR1() 或 corExp()。并确保正确指定时间变量。例如 corExp(form = ~ Time)

# delphi - 鼠标输入/离开消息不起作用？

> ID：10794876
> 
> 赞同：5
> 
> 时间：2012-05-29T07:36:19.297
> 
> 标签：delphi, custom-controls, mouseevent, delphi-xe2, windows-messages

我正在尝试检测鼠标输入/离开消息`CM_MOUSEENTER`，`CM_MOUSELEAVE`但它没有捕捉到它。我在这里做错了什么？

```
type
  TMyControl = class(TCustomControl)
  private
    procedure CMMouseEnter(var Message: TMessage); message CM_MOUSEENTER;
    procedure CMMouseLeave(var Message: TMessage); message CM_MOUSELEAVE;
    procedure WMNCHitTest(var Message: TWMNCHitTest); message WM_NCHITTEST;
  end;

procedure TMyControl.CMMouseEnter(var Message: TMessage);
begin
  //Handle mouse entering
  //Breakpoint never reached, procedure never called
end;

procedure TMyControl.CMMouseLeave(var Message: TMessage);
begin
  //Handle mouse leaving
  //Breakpoint never reached, procedure never called
end;

procedure TMyControl.WMNCHitTest(var Message: TWMNCHitTest);
var
  Ch: Bool;
begin
  if csDesigning in ComponentState then
    Message.Result := HTCLIENT
  else begin
    Ch:= False;

    //Do checks and pass `Ch:= True;` if something changed...

    if Ch then Invalidate;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:06:09.710

我发现了我的问题：我也在使用`WM_NCHITTEST`，我没有通过`inherited;`。我添加了这个，现在它工作正常。

# android - 我不希望通知管理器打开活动

> ID：10794880
> 
> 赞同：2
> 
> 时间：2012-05-29T07:36:41.213
> 
> 标签：android, notificationmanager

我不希望通知管理器（状态栏）打开活动。相反，当单击通知时，它只是被取消，并且不会发生任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:41:47.193

当你创建`PendingIntent`一个空的 Intent`new Intent()`

```
PendingIntent pending = PendingIntent.getActivity(getApplicationContext(), 0, new Intent(), 0) 
```

并为通知设置 FLAG_AUTO_CANCEL 标志

```
notification.flags |= Notification.FLAG_AUTO_CANCEL; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T07:46:14.507

```
final NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
final Notification notification = new Notification(R.drawable.icon,"A New Message!",System.currentTimeMillis());

notification.defaults=Notification.FLAG_ONLY_ALERT_ONCE+Notification.FLAG_AUTO_CANCEL;
Intent notificationIntent = new Intent(this, null);
PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,notificationIntent, 0);

notification.setLatestEventInfo(AndroidNotifications.this, title,message, pendingIntent);
notificationManager.notify(NOTIFICATION_ID, notification); 
```

与其在意图中传递类，不如传递 null 或使用 intent() 默认构造函数。如果有助于欣赏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:41:25.850

`finish()`创建一个从中调用的空活动`onCreate()`并将其设置在`PendingIntent`. 一个空的（null）是不允许的，所以这是你最好的选择，AFAIK。

# jakarta-ee - 持久性的Maven依赖

> ID：10794881
> 
> 赞同：1
> 
> 时间：2012-05-29T07:36:41.857
> 
> 标签：jakarta-ee, maven, import, dependencies, persistence

我使用 Maven、Tomcat Java EE，我想为此导入添加一个依赖项：

```
import javax.persistence.Entity 
```

我已经尝试过这些，但它们不起作用：

```
<dependency>
  <groupId>javax.persistence</groupId>
  <artifactId>persistence-api</artifactId>
  <version>1.0.2</version>
</dependency> 
```

还有这个：

```
<dependency>
  <groupId>javax</groupId>
  <artifactId>javaee-api</artifactId>
  <version>6.0</version>
  <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:51:17.257

为什么将 JPA 1 与 Java EE 6 一起使用？Java EE 6 已经包含 JPA 2，并且该`javaee-api`工件提供了该类。它行不通，不管你不在这里工作是什么意思。摆脱这个 JPA 1 依赖并重试。

# c# - 创建文件后访问文件

> ID：10794883
> 
> 赞同：0
> 
> 时间：2012-05-29T07:36:47.147
> 
> 标签：c#, sharepoint, sharepoint-2007, moss

我有以下代码在内存中创建一个 XML 文件，对其进行更新，然后将其添加到表单库中。

```
// Creates a new XML document in memory
XmlDocument newCRF = new XmlDocument();

// Loads an existing XML file into that in-memory document
newXMLdoc.Load("Template.xml");

// Write the XML file to a document library
using (SPSite newSite = new SPSite("http://sharepoint/newsite"))
{
    using (SPWeb newWeb = newSite.OpenWeb())
    {
        SPList newLibrary = newWeb.Lists["Test Library"];
        byte[] xmlData = System.Text.Encoding.UTF8.GetBytes(newXMLdoc.OuterXml);

        // Save file to form library
        using (MemoryStream ms = new MemoryStream(xmlData))
        {
            SPFile newFileInLibrary = newLibrary.RootFolder.Files.Add("Filename.xml", ms);
        }
    }
} 
```

如何访问“newFileInLibrary”对象，以便更改它的属性（例如“创建者”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:39:42.413

您可以`SPListItem`使用以下代码获取对象：

```
 // Save file to form library
    SPFile newFileInLibrary = null;
    using (MemoryStream ms = new MemoryStream(xmlData))
    {
        newFileInLibrary = newLibrary.RootFolder.Files.Add("Filename.xml", ms);
    }
    SPListItem fileItem = newFileInLibrary.Item;
    DoSomethingWith(fileItem["Created"]); 
```

Ps：你考虑过在[http://sharepoint.stackexchange.com](http://sharepoint.stackexchange.com)上发帖吗？

# joomla - Joomla 脚本问题

> ID：10794889
> 
> 赞同：0
> 
> 时间：2012-05-29T07:37:07.830
> 
> 标签：joomla, joomla1.5

我是 joomla 平台的初学者。我想将 mootools.js 和 caption.js 从页眉移动到页脚。有可能吗？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:10:51.480

按照此链接将其`http://www.pbwebdev.com.au/blog/removing-mootools-core-js-caption-js-joomla`剪切代码`JHtml::_('behavior.caption');`并将其粘贴到页脚中..或者您可以通过评论直接将它们从头中删除`

```
if ($debug || $konkcheck) {
            JHTML::script('mootools-uncompressed.js', 'media/system/js/', false);
        } else {
            //JHTML::script('mootools.js', 'media/system/js/', false);
        }
        $loaded = true;
        return;
    }

        function caption() {
        //JHTML::script('caption.js');
    }
`in behavior.php from the following path. **libraries\joomla\html\html** 
```

# java - 为什么ArrayList的默认容量是10？

> ID：10794890
> 
> 赞同：37
> 
> 时间：2012-05-29T07:37:12.250
> 
> 标签：java, collections, arraylist

看了ArrayList的java doc，发现ArrayList的初始容量是10。

```
 /**
 * Constructs an empty list with an initial capacity of ten.
 */
public ArrayList() {
this(10);
} 
```

我认为如果它是 2 的任何幂都是有意义的，但为什么是 10？

我还检查了 HashMap 的初始容量，它是 16，这是有道理的。

```
/**
 * The default initial capacity - MUST be a power of two.
 */
static final int DEFAULT_INITIAL_CAPACITY = 16;

/**
 * Constructs an empty <tt>HashMap</tt> with the default initial capacity
 * (16) and the default load factor (0.75).
 */
public HashMap() {
    this.loadFactor = DEFAULT_LOAD_FACTOR;
    threshold = (int)(DEFAULT_INITIAL_CAPACITY * DEFAULT_LOAD_FACTOR);
    table = new Entry[DEFAULT_INITIAL_CAPACITY];
    init();
} 
```

数字 10 背后有什么具体原因吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-29T07:45:23.773

是简单的`ArrayList`增长数组。当尝试添加元素时，缓冲区大小超出了，它只是在增长。所以初始大小可以是任何正值。

1太少了。即使有一些元素，我们也会有一些调整大小的操作。

100 将是空间的损失。

所以，10是妥协。为什么是 10 而不是 12 或 8？第一个提示是，分析了典型的用例，这是性能损失和空间损失之间的最佳匹配。然而，我认为，看到 Sun 的原始代码，它没有被分析得如此深入，它是一个任意的“不太小，也不太大”的数字。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-29T07:41:30.610

对于列表，容量为 2 的幂没有任何优势。事实上，任何特定的启动能力都没有真正的优势。它必须足够大，以避免在小列表的常见情况下进行多次调整大小步骤，并且必须足够小，以免在相同情况下将内存浪费在未使用的容量上。选择 10 可能仅仅是因为它在满足这些要求的正确范围内并且因为它是“圆形的”。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-29T07:48:28.277

`Vector`，从 JDK 1.0 开始，默认初始容量为 10，因此`ArrayList`在 1.2 中引入它们时保持一致可能是有意义的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-29T07:41:21.107

完全随意的选择。

没有理由说明 2 的幂在这里更有意义。由于散列的工作方式，它在 HashMap 中是有意义的。事实上，它*必须是*二的幂（根据源中的评论）。

注意 java.util.Vector（ArrayList 的老大哥）也有 10 个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T07:40:58.703

对于默认的元素数量，10 可能是一个或多或少的任意数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T07:42:48.107

除非代码中有注释，否则我们永远无法确定。然而，我想在某个时候，一位 Sun 工程师已经收集了有关 ArrayList 在大量实际应用程序中的使用情况的统计数据，并确定……凭经验……平均而言，这 10 个结果大致上是最好的。（这就是他们调整诸如优化器、字节码设计等之类的东西的方式。）

并且，其他人指出，使用大小为 2 的幂的大小没有计算优势（或劣势）`ArrayList`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-01T06:16:59.267

**ArrayList 只是一个可以自动增长的数组。**

> 是的..默认大小是 10

而且我认为这个初始/默认值背后没有太多考虑。默认值 10 似乎不太大，也不太小。（这可能是原因）。如果超出数组的默认初始容量怎么办..？数组的下一个容量由 -

```
New capacity=(current capacity*3)/2+1
So next size would be (10*3)/2+1= 16
And next (16*3)/2+1= 25
And So on... 
```

# javascript - 使用 jquery 以厘米为单位获取 div 的高度？

> ID：10794891
> 
> 赞同：13
> 
> 时间：2012-05-29T07:37:15.537
> 
> 标签：javascript, jquery

我有一个 div ，我在其中动态添加数据，我想以厘米为单位获取特定 div 的高度。因为我需要根据高度来控制该 div 中可以显示的数据量。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-29T07:46:54.637

```
1px = 0.02645833 cm; 
```

或者

```
1 cm = 37.795276px; 
```

请参阅以下链接：

[如何通过 javascript 访问屏幕显示的 DPI 设置？](https://stackoverflow.com/questions/476815/can-you-access-screen-displays-dpi-settings-in-a-javascript-function)

[如何使用 JavaScript 检测屏幕 DPI](https://stackoverflow.com/questions/9292156/how-to-detect-the-screen-dpi-using-php-or-javascript)

[像素到厘米？](https://stackoverflow.com/questions/1341930/pixel-to-centimeter)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-11T07:11:07.983

这是一个将 CSS 像素转换为厘米的小 javascript 函数：

```
function px2cm(px) {
  var d = $("<div/>").css({ position: 'absolute', top : '-1000cm', left : '-1000cm', height : '1000cm', width : '1000cm' }).appendTo('body');
  var px_per_cm = d.height() / 1000;
  d.remove();
  return px / px_per_cm;
} 
```

它在页面中插入一个 1000cm x 1000cm 的空白`<div>`，然后以 CSS 像素为单位读取其高度。通过不使用魔法值（如上面建议的 1px = 0.02645833 cm，仅当您的屏幕 DPI 为 96 时才有效），它确保考虑当前屏幕 DPI。

由于屏幕的 DPI 永远不会改变，因此您应该缓存`px_per_cm`以避免在任何时候调用此函数时对性能造成任何影响

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-29T07:45:00.003

首先，您需要确定您正在查看多少 DPI（每英寸点数）。在屏幕上，这通常在 72 到 100 之间。让我们以 72 为例。

每英寸 72 个点（像素）。
即每 2.54 厘米有 72 个像素
所以 1 厘米是 28.35 像素

现在只需以像素为单位获取高度，然后进行转换。

# javascript - 带有 2 个输入的 java 脚本对话框

> ID：10794892
> 
> 赞同：0
> 
> 时间：2012-05-29T07:37:15.807
> 
> 标签：javascript, html, forms

为了保持与 java 脚本中的警报和提示对话框的一致性，我想知道是否有一个对话框接受 2 个输入而不是一个输入？

我尝试了几种方法，例如：

创建表单

```
<form id="management_form">
Enter Option: <input type="text" id="optiontb" name="option">
<input type="button" onclick="myfunction(this.form)" value="submit"> </form> 
```

并打电话

```
document.management_form.submit(); in the java script method 
```

这将显示表单代码在 htmlfile 中的任何位置。而不是在调用表单时

并创造

使用表格

```
var newdiv = document.createElement();
newdiv.innerHTML = "Entry  <br><input type='text' name='myInputs[]'>";
document.appendChild('newdiv'); 
```

为此，我看到了错误 Uncaught error:NOT_FOUND_ERROR:DOM Exception8

有没有更好的方法来做到这一点？

编辑：按照 Girish 的建议执行一些操作后：

html代码如下：

```
<title>
<style>
 I have include the code for the style
</style>
<script>
 function request()// renamed it here 
   { // this is exactly same the code in the sample web site
      } 
```

我如何调用这个 java 脚本方法

```
 function myfunction(frm)
  {
var opt=frm.option.value;  
request();
$( "#dialog-form" ).dialog( "open" ); 
```

} 这被调用

```
 <form name="management_form">
  Enter Option: <input type="text" id="optiontb" name="option"> 
 <input type="button" onclick="myfunction(this.form)" value="submit"> </form> 
```

可以在此处添加任何内容以便将其显示为对话框而不是 html 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:54:35.230

我认为你想要这种类型的功能，所以你可以检查这个 URL

[http://jqueryui.com/demos/dialog/modal-form.html](http://jqueryui.com/demos/dialog/modal-form.html)

如果您喜欢这个，请下载它的代码并将其实现到您的代码中.....

# python - 如何透明地拦截 stdin/out/err

> ID：10794894
> 
> 赞同：1
> 
> 时间：2012-05-29T07:37:35.223
> 
> 标签：python, stdout, stdin, intercept

我想捕获命令行程序（即 GDB，但为了简单起见目前已更改为`ls`或`cat`）的所有输入和输出，并将其重定向到文件中，以供以后分析。

我无法接近工作，但我不明白出了什么问题。这是我的最后一次尝试：

```
#!/usr/bin/env python2

import subprocess
import sys
import select
import os

def get_pipe():
  fd_r, fd_w = os.pipe()
  return os.fdopen(fd_r, "r"), os.fdopen(fd_w, "w")

out_r, out_w = get_pipe()
err_r, err_w = get_pipe()
in_r, in_w = get_pipe()

proc = subprocess.Popen(["ls"] + sys.argv[1:], stdin=in_r, stdout=out_w, stderr=err_w)

out_w.close()
err_w.close()
in_r.close()

running = True
while running:
  input_lst, output_lst, x_lst = select.select([sys.stdin],[out_r, err_r],  [], 0.5)

  if out_r in output_lst+input_lst:
    data = out_r.readlines()
    print "*",data,"*"
  if err_r in output_lst+input_lst:
    data = err_r.readlines()
    print "+",data,"+"
  if sys.stdin in input_lst:
    data = sys.stdin.readline()
    print "-", data, "-"
    in_w.write(data)

  # don't try to quit if we received some data
  if len(input_lst+output_lst+x_lst) != 0:
    continue
  retcode = proc.poll()
  if retcode is not None:
    running = False

out_r.close()
err_r.close()
in_w.close
exit(retcode) 
```

我尝试了其他几个选项，例如 - 编写一个文件包装器，它应该将所有写入 stdin / 从 stdout-err 读取的内容写入外部文件 - 命名管道 - ...

但我得到的最好的是“ls”的第一行。

而且GDB依赖于`readline`CLI版，感觉透明抓起来没那么容易！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:31:01.967

所以经过一段时间的研究，我找到了解决这个问题的方法：

对于`non blocking`读取和写入，我们只需要等待输入文件用完数据（并抛出异常），然后对输出（stdout 和 stderr）进行相同的操作：

```
#!/usr/bin/python2

import sys, os
import subprocess
import fcntl

dump = open("/tmp/dump", "w")
dump.write("### starting %s ###" % " ".join(sys.argv))

proc = subprocess.Popen(["<real app>"] + sys.argv[1:], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

def nonblocking(fd):
  fl = fcntl.fcntl(fd, fcntl.F_GETFL)
  fcntl.fcntl(fd, fcntl.F_SETFL, fl | os.O_NONBLOCK)

nonblocking(proc.stdin)
nonblocking(proc.stdout)
nonblocking(proc.stderr)

nonblocking(sys.__stdin__)
nonblocking(sys.__stdout__)
nonblocking(sys.__stderr__)

def me_to_proc():
  x_to_y(sys.__stdin__, proc.stdin, "~in> ")

def proc_to_me():
  x_to_y(proc.stdout, sys.__stdout__, "<out~ ")

def proc_to_me_err():
  x_to_y(proc.stderr, sys.__stderr__, "<err~ ")

def x_to_y(x, y, prefix=""):
  try:
    while True:
       line = x.readline()
       to_dump = "%s%s" % (prefix, line)
       print >> dump, to_dump
       print to_dump
       y.write(line)
       y.flush()
       dump.flush()
  except:
    pass

recode = None
while recode is None:
  proc_to_me()
  #proc_to_me_err()
  me_to_proc()

  retcode = proc.poll()

exit(retcode) 
```

只需用此脚本替换您的原始二进制文件，然后更改`<real app>`以创建实际过程。输入和输出信息将被写入屏幕并转储到`/tmp/dump`.

（但我不确定终止标准，我没有详细检查）

# objective-c - 如何在按钮操作中提供 Web 服务和解析 xml？

> ID：10794897
> 
> 赞同：0
> 
> 时间：2012-05-29T07:37:38.147
> 
> 标签：objective-c, xml, web-services, ios5, uinavigationcontroller

在处理 Web 服务调用时，我发现很难从一个页面导航到另一个页面。这是我的问题，

我能够成功调用 Web 服务并获取 xml，还能够解析 xml 并获取所需的标签。我的问题是我在按钮操作中完成所有这些过程。Web 服务和解析完成后，我想导航页面。但我不能这样做，因为我的页面在服务调用和解析完成之前正在导航。

下面是我正在做的代码

```
- (IBAction)CIS_Login:(id)sender
{

WebServiceAuth *service = [[WebServiceAuth alloc]init];
NSString *username,*password;

username = CIS_Username.text;
password = CIS_Password.text;
[service getUsername:username getPassword:password]; (Calling Web service)

NSString *getSessionToken = [USERDEFAULTS objectForKey:@"sessionToken"];

if (getSessionToken)
{
    [self receivedSessionTokenFromCloud];
}
else
{
    [self receivedErrorMessageFromCloud];
}
} 
```

网络服务页面

```
-(void)getUsername:(NSString *)usernameAuth getPassword:(NSString *)passwordAuth
{
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
                         "<session xmlns=\"http://schemas.XYZ.com/ABC/2011\">"
                         "<account>\n"
                         "<username>%@</username>\n"
                         "<password>%@</password>\n"
                         "</account>\n"
                         "</session>",usernameAuth,passwordAuth];

NSLog(@"%@",soapMessage);

NSURL *url = [NSURL URLWithString:@"https://XYZ.com/sessions"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue:@"Token" forHTTPHeaderField:@"Code"];
[theRequest addValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"application/xml" forHTTPHeaderField:@"Accept"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSLog(@"%@",[theRequest allHTTPHeaderFields]);

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if(theConnection)
{
    Data = [NSMutableData data];
}
else
{
    NSLog(@"theConnection is NULL");
}
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
NSLog(@"DONE. Received Bytes: %d", [Data length]);
NSString *theXML = [[NSString alloc] initWithBytes: [Data mutableBytes] length:[CiscoData length] encoding:NSUTF8StringEncoding];
NSLog(@"%@",theXML);
UserOAuthXML *xmlOAuth = [[UserOAuthXML alloc]init]; (Xml Parsing is done here)
[xmlOAuth getDataFromUserOAuth:Data];
} 
```

Xml 解析器页面

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
if([elementName isEqualToString:@"code"])
{
    recordResult = FALSE;
    NSLog(@"%@",soapResults);
    [USERDEFAULTS setValue:soapResults forKey:@"code"];
}
else if ([elementName isEqualToString:@"message"])
{
    recordResult = FALSE;
    NSLog(@"%@",soapError);
    [USERDEFAULTS removeObjectForKey:@"value"];

}
} 
```

我希望你能理解我的询问。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:44:06.640

```
-(IBAction)send_report
{

NSLog(@"self.get_hardstring-------------===:%@",self.get_hardstring);
NSLog(@"self.get_softstring-------------===:%@",self.get_softstring);

NSString *sopMessage=[NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                      "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                      "<soap:Body>"
                      "<BreakDown xmlns=\"http://swag.test.com/swag/\">"
                       "<hardstring>%@</hardstring>"
                      " <softstring>%@</softstring>"
                      "</BreakDown>"
                      "</soap:Body>"
                      "</soap:Envelope>",self.get_hardstring,self.get_softstring];

NSURL *url=[NSURL URLWithString:@"http://swag.test.com/webservice.asmx"];//
NSMutableURLRequest *req=[NSMutableURLRequest requestWithURL:url];
NSString *msglength=[NSString stringWithFormat:@"%d",[sopMessage length]];
[req addValue:@"text/xml;charset=utf-8"  forHTTPHeaderField:@"Content-Type"];
[req addValue:@"http://swag.test.com/swag/BreakDown" forHTTPHeaderField:@"SOAPAction"]; //

[req addValue: msglength forHTTPHeaderField:@"Content-Length"];
[req setHTTPMethod:@"POST"];
[req setHTTPBody:[sopMessage dataUsingEncoding:NSUTF8StringEncoding]];

if (conn) 
{
    webData = [[NSMutableData data]retain];

}

NSError *error1;

error1 = [[[NSError alloc] init] autorelease];

NSData *returnData1 = [NSURLConnection sendSynchronousRequest:req returningResponse:nil error:&error1];
NSString *returnString = [[NSString alloc] initWithData:returnData1 encoding:NSUTF8StringEncoding];
NSLog(@"returnString===:%@",returnString);

NSRange match;
NSRange match1;

match = [returnString rangeOfString: @"<BreakDownResult>"];

//NSLog (@"match found at index %i", match.location);   [soapResults setString:@""];

match1 = [returnString rangeOfString: @"</BreakDownResult>"];

//NSLog (@"match found at index %i", match1.location);  [soapResults setString:@""];    

//
//NSString *str=match.location
int t1= match.location+match.length;
int t2=match1.location-t1;

NSString *string2;

string2 = [returnString substringWithRange: NSMakeRange (t1, t2)];

if ([string2 isEqualToString:@"inserted SuccessFully!"])
{
    UIAlertView *alrt1 = [[UIAlertView alloc]initWithTitle:nil message:@"Statement Successfully Send" delegate:self
                                         cancelButtonTitle:nil 
                                         otherButtonTitles:@"Ok",nil];
    [alrt1 show];
    [alrt1 release];

}
else 
{
    UIAlertView *alrt1 = [[UIAlertView alloc]initWithTitle:nil message:@"Statement Not Send" delegate:self
                                         cancelButtonTitle:nil 
                                         otherButtonTitles:@"Ok",nil];
    [alrt1 show];
    [alrt1 release];    
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:41:19.893

尝试使用这个

```
- (IBAction)CIS_Login:(id)sender
{
    [self performSelectorOnMainThread:@selector(Action:) withObject:sender waitUntilDone:YES];   
}

-(void) Action{
WebServiceAuth *service = [[WebServiceAuth alloc]init];
NSString *username,*password;

username = CIS_Username.text;
password = CIS_Password.text;
[service getUsername:username getPassword:password]; (Calling Web service)

NSString *getSessionToken = [USERDEFAULTS objectForKey:@"sessionToken"];

if (getSessionToken)
{
    [self receivedSessionTokenFromCloud];
}
else
{
    [self receivedErrorMessageFromCloud];
}
} 
```

希望它有帮助..快乐编码:)

# fork - 使用 waitpid 分叉输出

> ID：10794899
> 
> 赞同：2
> 
> 时间：2012-05-29T07:37:50.093
> 
> 标签：fork, waitpid

```
int main()
{
    if(Fork() == 0)
    {
       printf("a");
    }
    else
    {
       printf("b");
       waitpid(-1, NULL, 0);
    }

    printf("c");
    exit(0);
} 
```

上面的代码询问可能的输出是什么？

我发现，acbc、abcc、bacc 但答案包括 bcac。bcac 怎么可能是一个答案？父进程是在子进程创建之前退出还是某事。别的？我很困惑，欢迎任何解释。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:47:54.613

唯一的保证是`waitpid`在孩子的状态信息可用之前不会返回（除非它被中断）。只要你打电话`exit(0)`，0就可以了。所以`waitpid`可以在孩子的输出被刷新*之前返回。*

POSIX 说：“wait() 函数应暂停调用线程的执行，*直到调用进程的已终止子进程之一的状态信息可用*，或者直到传递一个信号，该信号的动作是执行信号捕获函数或终止进程。” （它还说*waitpid*在这方面是相同的。）

我不知道发生这种情况的任何实际平台，只能想象它发生在在用户空间中模拟 POSIX 的操作系统上，因此有一些用户空间代码来向父母发出孩子正在终止而不是使用其实际终止的信号给家长发信号。但这是标准允许的。

这真的很模糊，我想知道这是否是该序列的预期理由。我想不出别的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T21:19:18.790

答案是不要总是相信教科书！

从[勘误表](http://csapp.cs.cmu.edu/public/errata.html)：

> 页。772，练习题 8.3 的解法。序列 bcac 是不可能的。删除倒数第二句。最后一句应该是“有三种可能的序列：acbc、abcc 和 bacc。” 请参阅 Web Aside 页面上的 Web Aside ECF:GRAPHS 以获取过程图的示例。

# python - Python 多处理和多处理.Queue

> ID：10794903
> 
> 赞同：2
> 
> 时间：2012-05-29T07:37:56.050
> 
> 标签：python, queue, multiprocessing

我正在尝试使用多处理和队列来实现生产者-消费者场景；主进程是生产者，两个子进程从队列中消费数据。这在没有任何*异常*情况发生的情况下有效，但问题是我希望能够重新启动工作人员以防他们死亡（`kill -9 workerpid`）。但是，当我杀死一个或两个工人时，即使主进程一直在队列中填充数据，他们也会开始说“队列为空”。

我在这里想念什么？（在 Ubuntu 12.04 上使用 Python 2.7.3）

```
import sys
import time

import multiprocessing
from Queue import Empty

workers = []
fqueue = multiprocessing.Queue()

class Worker(multiprocessing.Process):
    def run(self):
        queue = self._args[0]
        print "{0} starting up, queue at: {1}".format(self.pid, queue)
        while True:
            try:
                obj = queue.get(block=True, timeout=1)
                print "{0}: got from queue: {1}".format(self.pid, obj)
            except Empty:
                print "{0}: queue was empty".format(self.pid)
                continue
            except IOError, e:
                print "{0}: got IOError on queue: {1}".format(self.pid, e)
                return

if __name__ == "__main__":
    print "zipper starting up (2 workers)"
    for _ in range(0, 2):
        p = Worker(args=(fqueue,)) 
        workers.append(p)
        p.start()

    cnt = 0
    while True:
        for i in range(0, len(workers)):
            p = workers[i]
            if not p.is_alive():
                print "main: worker {0} is not alive".format(p.pid)
                p = Worker(args=(fqueue,))
                print "main: restarted worker: {0}".format(p)
                p.start()
                workers[i] = p
        print "main: tick"
        cnt += 1
        fqueue.put(cnt)
        time.sleep(2) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T08:50:24.543

您是否看到[文档中的警告](http://docs.python.org/library/multiprocessing#pipes-and-queues)？：

> 警告
> 
> 如果一个进程在尝试使用队列时被 Process.terminate() 或 os.kill() 杀死，那么队列中的数据可能会损坏。这可能会导致任何其他进程在稍后尝试使用队列时出现异常。

所以杀死一个正在使用队列的进程可以使整个队列不可用。

# java - 使用相同的servlet和不同的请求参数在一个jsp中显示三个图表

> ID：10794908
> 
> 赞同：0
> 
> 时间：2012-05-29T07:38:17.503
> 
> 标签：java, jsp, jfreechart

我的jsp中有以下代码

```
<div id="ReloadThis">
            <img alt=""
                src='<%=url+"/chartDemo/servlet/ChartServlet?CHARTTYPE=HOUR"%>'>

            <img alt=""
                src='<%=url+"/chartDemo/servlet/ChartServlet?CHARTTYPE=MONTH"%>'>

            <img alt=""
                src='<%=url+"/chartDemo/servlet/ChartServlet?CHARTTYPE=YEAR"%>'>
        </div> 
```

但它只调用一次 servlet。当我直接输入 servlet URL 时，它非常适合所有人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:26:51.077

我认为浏览器正在**缓存** `<img>`. 尝试为不同的操作提供不同的 url，并将所有 url 映射到同一个 servlet。

网址应该喜欢：

*   /chartDemo/servlet/YearChartServlet
*   /chartDemo/servlet/MonthChartServlet
*   /chartDemo/servlet/HourChartServlet

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:44:21.487

尝试这个 -

```
 <div id="ReloadThis">
    <img alt=""
        src='"<%=url%>" + "/chartDemo/servlet/ChartServlet?CHARTTYPE=HOUR"'/>

    <img alt=""
        src='"<%=url%>" + "/chartDemo/servlet/ChartServlet?CHARTTYPE=MONTH"'/>

    <img alt=""
        src='"<%=url%>" + "/chartDemo/servlet/ChartServlet?CHARTTYPE=YEAR"'/>
</div> 
```

# iis - 无法让默认文档与 ColdFusion 和 IIS 一起使用

> ID：10794915
> 
> 赞同：1
> 
> 时间：2012-05-29T07:38:40.997
> 
> 标签：iis, coldfusion, coldfusion-10

我已经尝试了所有我能想到的东西，而且它肯定已经配置好了，但是我无法让 IIS 与 ColdFusion 10 和默认文档一起使用。

我正在寻找一些关于尝试什么的帮助或建议，我已经添加了条目，验证了它们在 web.config 等中，重新启动了 IIS，重新启动了 Web 服务器，但它只是无法工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:11:58.410

你把`web.config`文件放在哪里了？您是否将其放在特定应用程序/站点的顶级目录中？

我这样做了，而且效果很好。

```
<configuration>
   <system.webServer>
    <defaultDocument>
        <files>
            <add value="index.cfm" />
        </files>
    </defaultDocument>
   </system.webServer>
</configuration> 
```

# javascript - 通过javascript连续（2-3秒间隔）到apache服务器

> ID：10794917
> 
> 赞同：0
> 
> 时间：2012-05-29T07:38:42.917
> 
> 标签：javascript, servlets

我开发了一个 Web 应用程序，在其中我使用 AJAX 轮询服务器页面，即 servlet，并在每 2-3 秒后获取更新的数据，它工作正常，60-70 个并发用户 ping 服务器以获取数据会影响服务器负载很多？会不会导致服务器崩溃？

我的 Servlet 正在从 Web 服务获取数据，并且一切正常。但是对服务器负载了解不多。

请帮帮我。

谢谢，阿斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:43:36.483

对于推送渠道，我建议您使用

1) 像[http://socket.io/](http://socket.io/)这样设计的库，它使用 WebSockets 并回退到长轮询

2）您不使用未设计用于处理此类流量的 Apache，而是使用更好地支持事件连续流式传输的 Web 服务器。最终使用 Apache，您将遇到可伸缩性和其他问题。

# java - 在java中创建动态xml

> ID：10794921
> 
> 赞同：1
> 
> 时间：2012-05-29T07:39:32.383
> 
> 标签：java

我是创建 xmls 的新手。我可以创建小 xml，但是，我需要根据用户发送的信息创建动态 xml，所需的 xml 格式是

谁能帮我创建上面的xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:01:52.570

我建议你试试[StAX](http://en.wikipedia.org/wiki/StAX)。它是标准 java api 的一部分，使用起来非常简单。

这是从 StAX 开始的[很棒的教程](http://www.vogella.com/articles/JavaXML/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:48:34.163

如果只需要 XML 格式，您可以选择[NanoXML](http://devkix.com/nanoxml.php)，它非常轻量级且 API 简单。

如果要将 Java 对象转换为 XML，最好的选择可能是[XStream](http://xstream.codehaus.org/)，其中 object-to-XML 是单行指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:47:23.840

您只想创建 XML 的字符串表示形式吗？那么到目前为止，最实用的方法就是简单地使用字符串。例如：

```
public class Person {
    private String name;

    public Person(String name) {
        this.name = name;
    }

    public String asXML() {
        return String.format("<person><name>%s</name></person>", name);
    }
} 
```

您可以通过这种方式组合对象图，调用`asXML`顶级对象并获取整个文档。

# ios - 在 redis 上使用 ObjCHiredis for ios

> ID：10794928
> 
> 赞同：0
> 
> 时间：2012-05-29T07:39:50.317
> 
> 标签：ios, redis

我需要为我的 iOS 应用程序使用 Redis，我从[https://github.com/lp/ObjCHiredis](https://github.com/lp/ObjCHiredis)下载了库并在我的计算机上安装了 Redis。然后我创建了一个小程序来看看它是否可以工作。这是我在下面得到的输出，您可以在[http://pastebin.com/uduB92cf](http://pastebin.com/uduB92cf)阅读代码。

```
2012-05-29 10:32:34.186 RedisVideo[19023:707] loaded
2012-05-29 10:32:34.262 RedisVideo[19023:707] redis created
2012-05-29 10:32:34.276 RedisVideo[19023:707] __NSCFString
2012-05-29 10:32:34.277 RedisVideo[19023:707] subscribe
2012-05-29 10:32:34.280 RedisVideo[19023:707] __NSCFString
2012-05-29 10:32:34.281 RedisVideo[19023:707] CHANNELZ
2012-05-29 10:32:34.283 RedisVideo[19023:707] __NSCFNumber
2012-05-29 10:32:34.284 RedisVideo[19023:707] 1
2012-05-29 10:32:34.290 RedisVideo[19023:707] command sent
2012-05-29 10:32:34.291 RedisVideo[19023:707] ERR only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context
2012-05-29 10:32:34.320 RedisVideo[19023:707] command sent
2012-05-29 10:32:34.321 RedisVideo[19023:707] there was a response
2012-05-29 10:32:34.323 RedisVideo[19023:707] ERR only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context
2012-05-29 10:32:34.325 RedisVideo[19023:707] command time over 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:52:03.573

我不得不在惰性证实方法中删除订阅频道的调用。

```
-(ObjCHiredis*) redis
{
    if(!redis)
    {
        redis = [ObjCHiredis redis:@"10.0.0.5" on:[NSNumber numberWithInt:6379] db:[NSNumber numberWithInt:0]];
        NSLog(@"redis created");
//        [redis command:@"SUBSCRIBE CHANNELZ"];
//        id retVal =  [redis command:@"SUBSCRIBE CHANNELZ"];
//        if( [retVal isKindOfClass:[NSString class]] )
//        {
//            NSLog(@"%@",(NSString*)retVal);
//        }
//        else if( [retVal isKindOfClass:[NSArray class]] )
//        {
//            for (id foo in retVal)
//            {
//                NSLog(@"%@",[foo class]);
//                if( [foo isKindOfClass:[NSString class]] )
//                {
//                    NSLog(@"%@",(NSString*)foo);
//                }
//                else if( [foo isKindOfClass:[NSNumber class]] )
//                {
//                    NSLog(@"%d",[(NSNumber*) foo intValue]);
//                }
//            }
//        }
    }
    return redis;
} 
```

# javascript - 尝试使用多个函数时无法使用全局变量 - JavaScript - 初学者

> ID：10794931
> 
> 赞同：0
> 
> 时间：2012-05-29T07:40:08.243
> 
> 标签：javascript, functional-programming, global-variables

作为 JavaScript 初学者，我在尝试使用多个函数时无法使用全局变量。代码如下 -

```
<script type="text/javascript">

        /* Global Variable example! Not working as one function called onClick. */

        function make_name_variable () { var y_name = document.getElementById('y_name').value; }
        function make_date_variable () { var y_date = document.getElementById('y_date').value; }
        function make_month_variable () { var y_month = document.getElementById('y_month').value; }
        function make_year_variable () { var y_year = document.getElementById('y_year').value; }

        function test(){
                    /*var y_name = document.getElementById('y_name').value;
                    var y_date = document.getElementById('y_date').value;
                    var y_month = document.getElementById('y_month').value;
                    var y_year = document.getElementById('y_year').value;*/

                    document.getElementById('Result').innerHTML = y_date + y_month +  y_year;

                    return true;
            }

        function compute () {

            make_name_variable ();
            make_date_variable ();
            make_month_variable ();
            make_year_variable ();
            test(); 
           }
    </script> 
```

用作：-

```
<input type="submit" value="Submit" onclick="compute ()"> 
```

无法得到预期的结果。我想在整个页面中使用数据，因此希望将其保持为全局以供所有功能使用。我也无法以传统方式将其设置为全局。在函数中声明变量会给出预期的结果。由于您必须意识到我是一个完全的菜鸟，所以如果有其他方法可以完成这些事情，请赐教。不知何故，我觉得必须有一个更好，更简单的方法来解决这个问题。

提前致谢。:)

PS：这里的第一个问题。原谅我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:49:34.770

`var`关键字在当前范围内声明一个变量。如果`var`在函数内部声明 a，它只会存在于函数内部。[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope)通常非常好。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-29T08:07:21.300

在 Javascript 中声明全局变量的一种好方法是`window.globalVariableName`，或者`var globalVariableName;`如果您没有在浏览器中运行应用程序，则用特定于该环境的全局对象替换窗口。

无论您在全局范围内还是在函数中，第一个声明都将起作用。

声明全局变量的错误方法是

```
globalVariableName = 'Foo'; 
```

因为它不是一个明显的声明，看起来很像只是忘记了 var。

最后 globalVariables 不是一个好用的东西。因此，请谨慎使用它们。尝试检查它们是否还没有被另一个脚本使用，这样说

```
if(window.globalVariableName === undefined) window.globalVariableName = 'Bar'; 
```

尝试阅读 JavaScript Patterns Stoyan Stefanov 的第一章以获得更多解释。

更新：awsering Andreas Rossberg

例如，Definitive Javascript Guide 中的 David Flanigan 在 4.6.1 中指出什么是全局变量，它们是全局对象的属性。您也可以在 MDN 上确认这一点。

关于不好的风格，我可以同意，但只是部分同意，因为如果您不使用*Single var Pattern*进行这样的变量声明

```
(function(){ 
    var someVar1 = '', 
        someVar2 = null, 
        someVar3 = undefined; 
})(); 
```

你的代码看起来一样糟糕。

至于 EcmaScript 的下一个版本，你的参考有点太简短了。我只读过`this`在严格的 Javascript 中会以不同方式处理的内容。如果我理解正确，这个例子就是你所指的

```
function someFunction() 
{
    //'use strict';
    console.log(this); //Window or undefined
    console.log(window);// Window or Window
}
someFunction(); 
```

取消注释“使用严格”；将在第一个日志中为此给出 undefined，但第二个日志仍为 Window。

# php - Wordpress 查询以显示 X 天内评论最多的文章

> ID：10794934
> 
> 赞同：1
> 
> 时间：2012-05-29T07:40:26.143
> 
> 标签：php, wordpress, widget

我正在创建一个 wordpress 小部件来显示过去 4 天内评论最多的文章。

到目前为止我有这个

```
global $wpdb;
global $pagepost;

function filter_where( $where = '' ) {
    // posts in the last 4 days
    $where .= " AND post_date > '" . date('Y-m-d', strtotime('-4 days')) . "'";
    return $where;
}

add_filter( 'posts_where', 'filter_where' );
$the_query = new WP_Query( 'posts_per_page=4;orderby=comment_count' );

remove_filter( 'posts_where', 'filter_where' );
?>
    <ul>
    <?php while ( $the_query->have_posts() ) : $the_query->the_post();
    echo "<li>";
    echo "<a href='".get_permalink()."' class='linkTitle'>";
    echo get_the_title();
    echo "</a>";
    woo_post_meta(); 
    echo "<div class='fix'>";
    echo "</li>";   
 endwhile;
    echo "</ul>";
wp_reset_postdata(); 
```

从我可以在 wordpress 网站上找到的内容中，应该返回由 comment_count 排序的过去 4 天的文章

但它只是向我展示了我最近的 4 篇文章，我确信我在这里做的事情很明显是错误的，但我无法理解

我想要最近 4 天发表文章的评论最多的 4 篇文章。

有人请保存我剩下的小头发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:33:37.287

感谢@swapnesh，我找到了答案。

我的查询不正确，应该是这样的

```
 $the_query = new WP_Query(array( 'posts_per_page' => 4, 'orderby' => 'comment_count', 'order'=> 'DESC' )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T06:27:59.410

$querystr = " SELECT $wpdb->posts.* FROM $wpdb->posts WHERE 1=1 AND $wpdb->posts.post_status = 'publish' AND $wpdb->posts.post_type = 'post' ORDER BY $wpdb ->posts.comment_count DESC ";

使用此自定义查询

$pageposts = $wpdb->get_results($querystr, OBJECT); 回声'

```
'; print_r($pageposts); 回声'
```

';

# java - 没有任何输出

> ID：10794935
> 
> 赞同：-1
> 
> 时间：2012-05-29T07:40:27.020
> 
> 标签：java, android, sqlite

这是将数据库中特定列的数据存储到数组列表的代码。

```
ArrayList<String> mArrayList = new ArrayList<String>();
        Cursor mCursor = null;
        mCursor.moveToFirst();
        while(!mCursor.isAfterLast()) {
             mArrayList.add(mCursor.getString(mCursor.getColumnIndex(DBAdapter.SOURCE_NODE_ID)));
             mCursor.moveToNext();
        }

for(String d1:mArrayList) {
                    System.out.println(d1);} 
```

但是在运行程序后，输出中没有任何内容。

这个程序有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:41:59.910

不要`System.out.println`在android中使用，而是使用`Log.d`：

```
for(String d1:mArrayList) {
    Log.d("myApp", d1);
} 
```

正如其他人指出的那样，`mCursor`为 null，但我认为这只是您在此处编写的内容，而不是您的实际代码，因为此类代码将导致**NullPointerException**和应用程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:45:01.860

这应该给出 NullPointerException ，因为您正在尝试使用 null 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:48:01.427

它将通过空指针异常：

```
Cursor mCursor = null;
mCursor.moveToFirst(); 
```

# sed - bsd sed 和双引号

> ID：10794936
> 
> 赞同：0
> 
> 时间：2012-05-29T07:40:27.423
> 
> 标签：sed, bsd

考虑文件`test.txt`：

```
#include "foo.h"
#include "bar.h"
#include "baz.h" 
```

使用 GNU sed 4.2.1 版（在 Ubuntu 10.04.4 LTS 上），我可以提取 foo.h、bar.h 和 baz.h：

```
SHELL$) sed -n -e 's:^\s*\#include\s*"\(.*\)".*:\1:p' test.txt
foo.h
bar.h
baz.h 
```

使用 BSD sed（在 Mac OS X lion 上），并修改上述命令，我可以提取 foo.h、bar.h 和 baz.h，但使用双引号：

```
SHELL) sed -n -e 's:^\s*\#include\s*\(.*\).*:\1:p' test.txt
 "foo.h"
 "bar.h"
 "bar.h" 
```

如何使用 BSD sed 提取没有引号的名称？这些命令的输出为空：

```
SHELL) sed -n -e 's:^\s*\#include\s*"\(.*\)".*:\1:p' test.txt
SHELL) sed -n -e 's:^\s*\#include\s*\"\(.*\)\".*:\1:p' test.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:37:31.617

BSD `sed`（毫不奇怪，真的）不支持`\s`Perlism——它被解释为只是一个文字`s`. 试试这个；

```
 sed -n -e 's!^[[:space:]]*\#include[[:space:]]*"\(.*\)".*!\1!p' test.txt 
```

字符类`[[:space:]]`应该适用于所有 POSIX 正则表达式实现。（其他`sed`s 在分组括号之前可能需要也可能不需要反斜杠。）

# c# - 在 C# 中创建包含 mdf 文件的 zip 文件

> ID：10794938
> 
> 赞同：1
> 
> 时间：2012-05-29T07:40:30.000
> 
> 标签：c#, sql, dotnetzip

我的本地设备中有 .mdf 和 .ldf 文件。我想创建两个文件的 zip。我使用 DonetZip。但它没有向我显示任何错误，而且程序也无法正常工作。我应该怎么做，我想要一些示例来压缩 .mdf 和 .ldf 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:45:10.157

怎么样

```
using (ZipFile zip = new ZipFile())
{
    zip.AddFile(@"C:\SomeFile.mdf");
    zip.AddFile(@"C:\SomeFile.ldf");
    zip.Save(@"C:\zippedfolder.zip");
} 
```

# html - 表格右上角的 CSS 位置图标

> ID：10794939
> 
> 赞同：5
> 
> 时间：2012-05-29T07:40:31.067
> 
> 标签：html, css

我对 CSS 比较陌生。我的页面上有一个宽度为 70% 的表格。我需要在表格右侧上方放置一个小图标，以便图标与其下方表格的右边距对齐。我怎样才能做到这一点？

所以一般来说，这个问题是如何使用 CSS 相对于页面上其他元素的位置定位元素？

谢谢，卡尔文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T07:47:29.183

嗨，现在您可以根据您的布局轻松地将**Position** Give扔到`Parent Position Relative`并`child to give position Absolute`做**右上角**

现场演示

[http://jsfiddle.net/srgJh/](http://jsfiddle.net/srgJh/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T07:43:41.320

在 CSS 中你应该写：

```
.myclass {
    position:relative;
} 
```

或者

```
<img style="position:relative;" /> 
```

那么你可以通过“top”、“left”、“right”、“bottom”语句来控制位置。例子：

```
<img src="position: relative; top: 20px;" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T07:49:11.720

```
<div style="position:relative;float:left;overflow:hidden">
<table>
...
</table>
<div class="icon"></div>
</div>

.icon {
position:absolute;
width:10px;
height:10px;
top:0;
right:0; 
} 
```

如果希望图标在表之外，则用减号写入值，例如：

```
top:-10px; /* above the table */
right:-10px; /* on the right side the table */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T07:47:25.567

给这个CSS：

```
.classname {
    position:relative;
} 
```

我希望你的问题会得到解决

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T07:52:37.893

上面的人已经回答了这个问题，但是如果您想知道它是如何工作的，请尝试查看： [http ://www.tizag.com/cssT/position.php](http://www.tizag.com/cssT/position.php)

在创建整个页面的布局时，您还应该考虑使用 Divs 而不是表格： [http ://www.tizag.com/htmlT/htmldiv.php](http://www.tizag.com/htmlT/htmldiv.php)

# visual-studio-2008 - 解决分页符

> ID：10794943
> 
> 赞同：-1
> 
> 时间：2012-05-29T07:41:02.167
> 
> 标签：visual-studio-2008, crystal-reports, crystal-reports-2008

![在此处输入图像描述](../Images/62a3d4269940746ee097d3c11064093a.png)![在此处输入图像描述](../Images/217525a2eb583e266b00698525ab334d.png)如何解决重定向到 rpt 文件时发生的分页符。样本，

```
AWARDS:

[large space]

settled by:Jake 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:16:29.040

尝试取消选中文本框的“保持对象在一起”复选框。

# jsf-2 - 最初在 Web 应用程序启动时隐藏属性

> ID：10794944
> 
> 赞同：0
> 
> 时间：2012-05-29T07:41:03.523
> 
> 标签：jsf-2, show-hide

我正在开发一个 JSF 应用程序。
我最近遇到了一个问题，即如何在应用程序启动时进行`hide`任何操作。 例如**-** 我有一个用于显示表格的属性，但我只想在单击 a 时显示这个表格，在这里我可以让它用于显示/隐藏，但只能从第二次开始。 我想要的是在应用程序加载此视图时使用隐藏此表，我告诉我已经实现了后面的部分。 如果有人在启动时引用它作为一般隐藏，将不胜感激。 `attribute`
 **`h:panelGrid``checkbox`
`h:panelGrid`** 

 **谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:49:05.077

在此页面使用的 ManagedBean 中创建一个布尔属性并将其设置为 false（例如在 PostConstruct 方法中）。然后将其用作您的渲染属性，`<h:panelGrid>`它将默认隐藏。

比方说

```
 @ManagedBean
 @RequestScoped
 public class Bean {
     private boolean visible = false;
     //setters and getters
 }
 //later on page
 <h:panelGrid rendered="#{bean.visible} /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:21:39.403

我明白了......
在panelGrid集`style="visibility:hidden"`
和checkBox中以某种方式像这样，调用javascript函数并在那里设置

```
if (show) 
{
    obj.style.display = "block";
    obj.style.visibility="visible";
} 
else 
{
    obj.style.display = "none";
} 
```

它成功了。
感谢彼得的帮助。**

# twitter - Call data from Twitter API

> ID：10794958
> 
> 赞同：0
> 
> 时间：2012-05-29T07:41:36.240
> 
> 标签：twitter

I am trying to write some code in php to show on a website exactly how many times a particular url has been tweeted on Twitter.

I assume I use the info in this page; [http://api.tweetmeme.com/url_info?url=http://dori.co.nz/](http://api.tweetmeme.com/url_info?url=http://dori.co.nz/)

But what code would I need to add to the header of a Wordpress theme to call those values?

Many thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:36:54.953

```
<?php
$url = "http://api.tweetmeme.com/url_info?url=http://dori.co.nz/"; 
$test = file_get_contents($url);

$xml = simplexml_load_string($test); 
echo $xml->story->url_count;
?> 
```

Here we go.

# rest - REST WebApi 用户名/密码安全

> ID：10794967
> 
> 赞同：2
> 
> 时间：2012-05-29T07:42:17.017
> 
> 标签：rest, http-headers, asp.net-web-api, basic-authentication

我正在使用新的 microsoft asp.net mvc 4 WebApi 设计一系列 Web 服务。

对于对任何这些服务的任何调用，每次都必须传递用户名和密码，并且必须在 sql server 中检查这些详细信息以授权用户。

问题：

1）每次使用基本身份验证标头或自定义http标头传递用户名和密码是否正确？问题是我不想在每次调用中干扰查询字符串或请求正文，并且更喜欢标头。

2）一旦传入标头，我如何使用授权属性来调用我的方法来验证用户在 sql 中是否有效？我需要滚动自定义授权属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:15:39.103

1.  是的，只要它通过 HTTPS - 看看这里写你自己的消息处理程序，[http://sixgun.wordpress.com/2012/02/29/asp-net-web-api-basic-authentication/](http://sixgun.wordpress.com/2012/02/29/asp-net-web-api-basic-authentication/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:39:25.003

已经有一些实现，最好是 Dominick 的 Baier：

[http://leastprivilege.com/2012/05/26/thinktecture-identitymodel-and-asp-net-web-api/](http://leastprivilege.com/2012/05/26/thinktecture-identitymodel-and-asp-net-web-api/)

这是使用属性：

[http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)

# ruby-on-rails-3 - Rails 3 & i18n：“对象必须是日期、日期时间或时间对象”错误

> ID：10794970
> 
> 赞同：0
> 
> 时间：2012-05-29T07:42:37.453
> 
> 标签：ruby-on-rails-3, internationalization

我正在尝试翻译我的 Rails 3 应用程序，在[http://guides.rubyonrails.org/i18n.html#adding-date-time-formats](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)阅​​读入门，然后从[https://github.com下载相应的 yml 文件/svenfuchs/rails-i18n/tree/master/rails/locale](https://github.com/svenfuchs/rails-i18n/tree/master/rails/locale)（`de.yml`在我的例子中）。

在我的一个观点中，我有这个代码（`some_model#index`）......

```
<td><%= time_ago_in_words(some_model.created_at) %></td> 
```

...我改变了...

`<td><%=l time_ago_in_words(some_model.created_at) %></td>`.

不幸的是，这给了我这个错误：

```
Object must be a Date, DateTime or Time object. "etwa ein Monat" given. 
```

知道为什么这会失败吗？该`created_at`列已通过标准 Rails 脚手架在数据库中创建（数据库是使用 mysql2 gem 的 mysql）。

如果我从代码中删除`time_ago_in_words`助手......

`<td><%=l some_model.created_at %></td>`.

...翻译工作-但现在的日期时间对我来说当然太长了`<td>`。

我还尝试复制该`distance_in_words`部分`de.yml`并将其重命名为，`time_ago_in_words`但这也不起作用。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:34:53.693

好的，这里有两种不同的方法：

1.  该`l`方法采用日期、时间或日期时间对象，并根据您的 I18n 规则返回格式化版本。

2.  接受`time_ago_words`相同的参数并使用 I18n 吐出格式化的字符串。

在您的示例中，您正在尝试同时使用两者！简而言之，您所需要的只是`<%= time_ago_in_words(some_model.created_at) %>`.

# javascript - 全局范围内由 Web 应用程序声明的全局变量

> ID：10794971
> 
> 赞同：0
> 
> 时间：2012-05-29T07:42:41.367
> 
> 标签：javascript, firefox, memory-leaks

有什么方法可以找出 Web 应用程序在全局范围（窗口）中声明/注入的所有变量？我想从身体上卸载窗口上删除所有这些声明的东西，以便在关闭选项卡时会释放它的内存。

这样做的理由：Firefox 为所有选项卡维护全局堆。因此关闭选项卡不会占用内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:47:01.480

> 这样做的理由：Firefox 为所有选项卡维护全局堆。因此关闭选项卡不会占用内存。

你能提供一个引用吗？我确信 Firefox 确实会在某个时候释放相关内存。否则它将很快成为一个无法使用的内存猪。

回答您实际提出的问题：您可以`window`在加载应用程序之前构建属性名称列表：

```
var name;
var names = [];

for (name in window) {
    names.push(name);
} 
```

...然后删除最后不在该列表中的任何内容：

```
for (name in window) {
    if (names.indexOf(name) === -1) {
        window[name] = undefined; // See below for why not `delete`
    }
} 
```

请注意，在大多数情况下，您将无法实际删除该属性（例如，`delete window.foo;`大多数情况下将无法使用），因为 A）如果该属性是通过 创建的`var`，则无法删除它，并且 B）大多数版本的IE不会让你`delete` *拥有*. `window`但你可以分配`undefined`给他们。

或者，如果您使用对象，则稍后检查属性名称可能比数组更容易：

```
var name;
var names = {};

for (name in window) {
    names[name] = 1;
} 
```

然后检查变为：

```
for (name in window) {
    if (!names.hasOwnProperty(name)) {
        window[name] = undefined; // See above for why not `delete`
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:57:37.620

另请查看此线程以了解许多不同的方法： [检测和报告用户定义的全局变量](https://groups.google.com/d/topic/jsmentors/pocyKCgm7cU/discussion)

值得一提的一个值得注意的技巧是创建一个 iframe 并将 iframe 的窗口对象属性与您当前的窗口对象属性进行比较。这种方法的优点是您可以随时使用它，即使在您的应用程序启动后，您甚至可以定期运行它。

# asp.net-mvc - 在 MVC 中保护文件夹

> ID：10794980
> 
> 赞同：5
> 
> 时间：2012-05-29T07:43:05.507
> 
> 标签：asp.net-mvc, model-view-controller

我的内容文件夹中有一些文件，我不希望用户在未经授权的情况下下载这些文件。如何防止用户通过在地址栏中键入 ...Content/{filename} 来访问文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:48:24.973

有几种可能性。第一个包括`<location>`在 web.config 中使用标签：

```
<location path="Content">
    <system.web>
        <authorization>
            <deny users="?" />
        </authorization>
    </system.web>
</location> 
```

另一种可能性是将这些文件放在没有人可以访问的文件夹中（例如 App_Data 文件夹），然后有一个控制器操作将服务于那些将用该`[Authorize]`属性修饰的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:47:22.457

一种方法是将它放在 IIS 的上下文之外，而不是将它们放在下面`C:\inetpub\wwwroot`

将其更改为类似`C:\temp\files`.

在您的数据库中有一个与文档名称关联的 GUID，并使用 GUID 显示文件的链接。

在您的控制器操作中，您只需接受 GUID，获取文件名，然后在您的响应中提供文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T07:35:52.293

它对我不起作用。

```
<configuration>
    <appSettings>
    ...
    </appSettings>
    <system.web>
    ...
    </system.web>
    <system.webServer>
    ...
    </system.webServer>
    <location path="Content">
        <system.web>
            <authorization>
                <deny users="?" />
            </authorization>
        </system.web>
    </location>
</configuration> 
```

我运行我的 MVC 4.0 应用程序，登录和注销，无法访问任何应用程序页面，但仍然可以通过直接链接访问文件，例如

```
http://localhost:80966/Content/Files/home.jpg 
```

# css - 根据内容设置div宽度

> ID：10794991
> 
> 赞同：2
> 
> 时间：2012-05-29T07:44:14.413
> 
> 标签：css, html, width

我需要将 div 宽度设置为浏览器默认宽度。这个 div 包含 'ul' 和 'li' 元素。我需要增加 div 宽度当“li”内容增加时，并且当浏览器最小化时，这个 li 元素不应该下降（现在发生），而是浏览器应该提供水平栏。有什么帮助吗？

div结构是

```
<div style="position:relative;border:1px solid red; line-height:16px;width:100%">
    <ul style="position:relative;background:green;height:30px; width:100%;list-style:none; margin:0;">
        <li style="position:relative; display:inline-block; padding-left:20px; float:left; background:red" >Welcome</li>
        <li style="position:relative; display:inline-block; padding-left:20px; float:left; background:red" >Welcome</li>
        <li style="position:relative; display:inline-block; padding-left:20px; float:left; background:red" >Welcome</li>
        <li style="position:relative; display:inline-block; padding-left:20px; float:left; background:red" >Welcome</li>

    </ul>

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T07:53:52.737

嗨，像这样使用**显示属性**

```
ul li{
display:inline-block;
} 
```

现场演示[http://jsfiddle.net/cL9FB/](http://jsfiddle.net/cL9FB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:34:54.703

Rohit 很接近，但`display: inline-block`需要应用于 . 而`div`不是`li`. 此外，`width: 100%`在您的身上`div`，`ul`实际上会做与您想要的相反的事情；把它取下来。

此外，您不需要自动换行 - 我不确定这是否可以通过浮点数实现，但可以使用`display: inline-block`，它几乎可以完成相同的事情。这意味着删除`float: left`，因为这将覆盖任何显示声明。之后，只需添加或`white-space: nowrap`以防止自动换行。`div``ul`

使用`display: inline-block`确实会产生烦人的怪癖，即`li`s 之间的任何空格都会产生可见的间隙 - 所以你不能在`li`s 之间放置任何空格，甚至换行符也不行。我喜欢通过将结束`>`符号移动到下一个标签的开始符号之前来处理`<`这个问题 - 这解决了问题，因为只有和之间的空格才算`>`数`<`。

更新代码：

```
<div style="position:relative; border:1px solid red; line-height:16px; display:inline-block">
    <ul style="position:relative; background:green; height:30px; list-style:none; margin:0; white-space: nowrap"
        ><li style="position:relative; padding-left:20px; display:inline-block; background:red" >Welcome</li
        ><li style="position:relative; padding-left:20px; display:inline-block; background:red" >Welcome</li
        ><li style="position:relative; padding-left:20px; display:inline-block; background:red" >Welcome</li
        ><li style="position:relative; padding-left:20px; display:inline-block; background:red" >Welcome</li
    ></ul>
</div> 
```

jsFiddle：http: [//jsfiddle.net/gncGX/2/](http://jsfiddle.net/gncGX/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:00:04.100

```
div {
    width:auto;
} 
```

任务完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T07:51:09.113

我真的不明白你想做什么，但我会尽力而为。我认为您需要将 div 宽度以百分比表示

```
div {
  width: 100%;
} 
```

你所有的其他元素也应该有百分比宽度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T07:54:27.410

以百分比设置所有元素（特别是 ）的宽度值`<li>`，而不是像素；例如，如果你有 5 里，给他们宽度：20%。他们父母的宽度应该是 100%

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T08:20:32.403

听上去你想要一个流畅的布局，无论分辨率、浏览器大小或设备如何，都能保持其基本设计、形状和内容布局。老实说，流畅的布局最适合这一点，并且有许多开源解决方案。

看看这个[http://cssgrid.net/](http://cssgrid.net/)

# google-drive-api - 我想弄清楚如何在谷歌驱动器文件中设置“IndexableText”字段。有人可以在java中提供代码示例吗？

> ID：10794995
> 
> 赞同：1
> 
> 时间：2012-05-29T07:44:35.213
> 
> 标签：google-drive-api

我想弄清楚如何在谷歌驱动器文件中设置“IndexableText”字段。有人可以在java中提供代码示例吗？另外，每次更新文件时是否需要重写该字段？如果是，那么有没有办法读取这个字段的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:23:44.293

在插入或更新文档时，您只需使用`setIndexableText`File 类的方法。

从[https://developers.google.com/drive/v1/reference/files/insert#examples](https://developers.google.com/drive/v1/reference/files/insert#examples)的示例开始，并按照以下代码段进行编辑：

```
File body = new File();
body.setTitle(title);
body.setDescription(description);
body.setMimeType(mimeType);

// add this line
body.setIndexableText(new IndexableText().setText("your text content")); 
```

每次更新文件时都必须重写可索引文本字段，但它是只写字段，因此您无法读取其内容。

# ios - 无法在 UILabel（iPad 应用程序）中设置自定义字体

> ID：10794998
> 
> 赞同：4
> 
> 时间：2012-05-29T07:44:47.710
> 
> 标签：ios, ipad, fonts, custom-font

我从包中加载视图并尝试为其中的标签设置自定义字体，但没有任何变化。此视图和标签的出口位于文件的所有者中。这是我的代码：

```
 self.rikView = (RIKMainToolbar*)[[[NSBundle mainBundle] loadNibNamed:@"RIKMainToolbarPort" owner:self options:nil] objectAtIndex:0];
    label.font = [UIFont fontWithName:@"PFDinTextCondPro-Medium.ttf" size:46]; 
```

我究竟做错了什么？

UPD：我在 iPhone 应用程序中使用这种字体，但它在 ViewController 中用于标签并在 viewDidLoad 函数中设置。它有效。所以，我认为问题出在 loadWithNibName 或 iPad 上。

解决了，感谢@voromax。问题是标签的出口属于文件的所有者。我已经用类替换它并且一切正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:22:44.367

我不确定我是否完全遵循您的代码，但假设您在 initWithFrame of 中进行 label.font 分配`RIKMainToolbarPort`，请尝试将其移至该`awakeFromNib`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:48:43.373

您没有使用正确的字体名称。您似乎使用的是字体文件的名称，而不是字体名称。例如，在我当前的应用程序中，我有 Opal_1.ttf 文件。但是，我使用“Opal”作为字体名称。

[编辑]嗯，在这里查看示例：[https](https://stackoverflow.com/a/1384206/855738) ://stackoverflow.com/a/1384206/855738 再说一遍，你的字体名称是**错误**的。那是你的问题... 为什么投反对票？：/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:51:13.693

打开 FontBook 应用程序，然后选择“查看字体信息”。复制所需字体的后脚本名称，并在 Obj-C 代码中使用它

# c - 启用非阻塞套接字

> ID：10794999
> 
> 赞同：0
> 
> 时间：2012-05-29T07:44:48.200
> 
> 标签：c, sockets, nonblocking, asyncsocket

我有一个用 C/C++ 编写的服务器。我将连接的包装器设置如下：

```
 //START WRAPPER
    void Server::init_address(int port)
    {
memset(&(this->serv_addr), 0, sizeof(this->serv_addr));
this->serv_addr.sin_family = AF_INET;
this->serv_addr.sin_port = htons(port);
this->serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    }

    int Server::w_socket()
    {
int retv;
retv = socket(PF_INET, SOCK_STREAM, 0);
//FIXME
//fcntl(retv, F_SETFL, O_NONBLOCK);
if(retv == -1)
{
    std::string err_msg(strerror(errno));
    err_msg = "[socket] " + err_msg;
    throw err_msg;
}
else
{
    int reuse_opt = 1;

    if(setsockopt(retv, SOL_SOCKET, SO_REUSEADDR, &reuse_opt, sizeof(int))==-1)
    {
        perror("setsockopt error");
        exit(1);
    }
    return retv;
}
    }

    void Server::w_bind()
    {
int retv;
retv = bind(this->sock_fd,
        (struct sockaddr*) &(this->serv_addr),
        sizeof(this->serv_addr));

if(retv == -1)
{
    std::string err_msg(strerror(errno));
    err_msg = "[bind] " + err_msg;
    throw err_msg;
}
    }

    void Server::w_listen()
    {
int retv;
retv = listen(this->sock_fd, 3);
if (retv == -1)
{
    std::string err_msg(strerror(errno));
    err_msg = "[listen] " + err_msg;
    throw err_msg;
}
    }

    int Server::w_accept(struct sockaddr_in* client_addr)
    {
int retv;
int socklen = sizeof(sockaddr_in);

retv = accept(this->sock_fd, (struct sockaddr*)client_addr, (socklen_t*)&socklen);
if(retv == -1)
{
    std::string err_msg(strerror(errno));
    err_msg = "[accept] " + err_msg;
    throw err_msg;
}
else
{
    return retv;
}
            }

    int Server::recvtimeout(int s, char *buf, int len, int timeout)
    {
fd_set fds;
int n;
struct timeval tv;
// set up the file descriptor set
FD_ZERO(&fds);
FD_SET(s, &fds);
// set up the struct timeval for the timeout
tv.tv_sec = timeout;
tv.tv_usec = 0;
// wait until timeout or data received
n = select(s+1, &fds, NULL, NULL, &tv);
if (n == 0){
    return -2; // timeout!
}
if (n == -1){
    return -1; // error
}
// data must be here, so do a normal recv()
return recv(s, buf, len, 0);
    }
    // END WRAPPER 
```

我的目标是启用非阻塞套接字模式。我试过做**fcntl(retv, F_SETFL, O_NONBLOCK);** 就像Beej手册说的，但是我收到错误：*[accept] Resource暂时不可用* 解决这个问题的方法是使用**select**函数，但是我已经在recvtimeout函数中使用了它，总是像Beej guide说的那样。

所以，我不知道如何解决这个问题以启用非阻塞套接字模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T07:59:26.173

您收到错误*是因为*套接字是非阻塞的。

当您收到该错误`errno`时，您要么执行繁忙的循环（检查`accept`返回或返回`-1`的时间）。另一种推荐的解决方案是使用查看套接字何时可读，然后您可以调用.`EWOULDBLOCK``EAGAIN``select``accept`

**编辑：**如何做到这一点`select`

您需要在更高级别有一个事件循环，以检查是否可以读取侦听套接字或连接的套接字。如果监听套接字是可读的，那么你可以接受一个新的连接，如果连接的套接字是可读的，那么你可以从中读取。

就像是：

```
for (;;)
{
    fd_set readset;

    FD_ZERO(&readset); 
    FD_SET(listening_socket, &readset);
    int maxfd = listening_socket;

    if (connected_socket >= 0)
    {
        FD_SET(connected_socket, &readset);
        maxfd = max(maxfd, connected_socket);
    }

    // NULL timeout (5-th argument) means wait until event
    select(maxfd + 1, &readset, NULL, NULL, NULL);

    if (FD_ISSET(listening_socket, &readset))
    {
        accept_new_connection(listening_socket);
    }

    if (connected_socket >= 0 && FD_ISSET(connected_socket, &readset))
    {
        if (!read_from_socket(connected_socket))
        {
            close(connected_socket);
            connected_socket = -1;
        }
    }
} 
```

如果您有多个连接的套接字，请将它们放在一个简单的链表中并循环添加/检查它们。关闭时从列表中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:05:01.793

在您的解决方案中，您使用`select`call 连接套接字，但您没有使用相同的`listen socket`.

如果您已将也更改为`listen socket`非阻塞，则必须`listen socket`在调用之前使用 select for `accept`。