# StackOverflow 问答 10415000-10415999

# iphone - 从相同代码给出的两个不同 GPS 位置

> ID：10415003
> 
> 赞同：0
> 
> 时间：2012-05-02T13:42:46.483
> 
> 标签：iphone, xcode, gps, cllocation

所以我对编程非常非常非常非常陌生，但到目前为止我一直在摸索：我正在创建一个 Iphone 应用程序，我的目标是创建一个自动秒表；在预设位置开始并在预设位置停止的东西（两者都由用户设置）。如果预设 gps 位置和实际 gps 位置相等，则计时器将启动/停止。我通过按下按钮将位置设置为变量来完成此操作。

这就是问题所在：这两个值永远不会相等。预设的开始和结束位置包含比“实际”位置更多的小数（值本身，而不仅仅是打印的值），如果它们永远不相等，则计时器将不会启动。

任何帮助表示赞赏！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:51:33.653

您可以简单地计算两个坐标之间的距离，并在距离开始或结束位置的距离低于某个阈值（例如 50m）时启动/停止计时器。

`CLLocation`提供了一种方便的方法：

```
- (CLLocationDistance)distanceFromLocation:(const CLLocation *)location 
```

例如：

```
 double lat = 51.7;
 double lng = 7.0;
 CLLocation *locationStart = [[CLLocation alloc] initWithLatitude:lat longitude:lng];
 CLLocation *currentLocation = ...; // received from location services

 if ([locationStart distanceFromLocation:currentLocation] < 50) {
     // start timer 
 } 
```

您也可以考虑使用`horizontalAccuracy`当前位置的属性而不是任意的 50m。但请注意，精度可能低至几公里。类似的东西`MIN(horizontalAccuracy, 50)`可能会很好用。

# java - Eclipse：获取项目名称作为 VM 参数？

> ID：10415007
> 
> 赞同：3
> 
> 时间：2012-05-02T13:43:02.407
> 
> 标签：java, eclipse, configuration, jvm-arguments

考虑一个配置类，它需要为每个 Eclipse 项目解析不同的配置文件。

例如，如果`Configuration`class 被调用 from `Project1`，它应该 parse `special/path/fileX`，如果它被调用 from `Project2`，它应该 parse `special/path/fileY`。

我尝试过[使用 Eclipse 的`{project_name}`](http://it%20should%20parse%20%60special/path/fileX%60)，但令人惊讶的是，它被解析为光标突出显示的项目，而不是当前类的父项目。

任何想法如何在 Eclipse Runtime 中区分一个项目与另一个项目，最好使用 JVM 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:04:42.407

这是您描述的问题的解决方法，但我想这是一个更好的解决方案，因为它独立于 Eclipse 并且也可以轻松地在生产中工作。

只需从类路径加载相同的文件，无论您从哪个项目开始：

```
/my/file/from/classpath.txt 
```

但仅将此文件放在 Project1 / Project2 中，以便各种文件根据您的设置相互排除：

```
/Project1/src/my/file/from/classpath.txt
/Project2/src/my/file/from/classpath.txt 
```

`src`Java源文件夹在哪里。现在您仍然可以使用您的 JVM 参数来覆盖它，或者如果缺少上述内容，则可以提供默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:02:39.110

我认为最简单的方法是使用 eclipse 的运行配置。只需根据需要创建任意数量的配置，提供所需的所有 JVM 参数，然后使用它们来启动。这也将非常接近您将在生产模式下执行的操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T02:40:17.703

或者您可以转到 Eclipse 的已安装 JRE 并将配置设置为 JVMArgs，就像您在 prod 中的方式一样。

如果需要，您可以拥有每个环境的 JRE 的差异副本。

此外，如果从 IDE 运行，您可以获得 System.getProperty("user.dir") ，它应该是项目的根目录。

该系统属性可用于跟踪被调用者。更好的是，将 Installed JRE 的 JVM Args 设置为类似这样

```
-Dtheflaginprod=${project_loc}

project_loc = absolute path of the the project (/usr/projects/project1)
project_path = project name relative to the workspace  (/project1) 
```

# c# - 如何在sql语句结果的末尾插入文本？

> ID：10415010
> 
> 赞同：1
> 
> 时间：2012-05-02T13:43:06.010
> 
> 标签：c#, asp.net, sql, sql-server

例如，我的 sql 命令返回这个

```
 01234567 
```

那么我如何能够插入文本，以便在语句末尾返回它。所以如果我返回多个值，那么 TEXT 只会出现在最后。

```
 01234567TEXT 
```

我似乎无法在网上找到太多的帮助，但我知道这是可能的。我当前的sql命令如下：

```
 SqlCommand command = new SqlCommand("SELECT PID = RIGHT(REPLICATE('0',8) + CAST(PID AS VARCHAR(8)),8) FROM dbo.MDRMASTER WHERE PARENTPID = @PARENTPID",con); 
```

任何帮助或指向正确方向的方法都会很棒。非常感谢

**更新**我一开始就用错了这个问题。我要在最后一个陈述的末尾说。感谢 Siva 澄清这一点。不过，我确实对每个人都竖起了大拇指。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:45:55.950

您只需要在结果末尾连接您的字符串：

添加：

```
+ 'TEXT' 
```

sql命令将是

```
 SqlCommand command = new SqlCommand("SELECT PID = RIGHT(REPLICATE('0',8) + CAST(PID AS VARCHAR(8)),8) + 'TEXT' FROM dbo.MDRMASTER WHERE PARENTPID = @PARENTPID",con); 
```

Based on your Edit I think you only want the TEXT appended to the final record. If so, then you could do the following:

```
create table temp
(
    field varchar(10)
)

insert into temp values ('12345678')
insert into temp values ('23456789')
insert into temp values ('34567890')
insert into temp values ('45678901')
insert into temp values ('56789012')

select field
from temp
WHERE field != (SELECT Max(field) from temp)
UNION
select field + 'TEXT'
from temp
WHERE field = (SELECT Max(field) from temp)

drop table temp 
```

If you just need the TEXT as the last row then you would do:

```
create table temp
(
    field varchar(10)
)

insert into temp values ('12345678')
insert into temp values ('23456789')
insert into temp values ('34567890')
insert into temp values ('45678901')
insert into temp values ('56789012')

select field
from temp
UNION
select 'TEXT'

drop table temp 
```

Your SQLCommand would be

```
SqlCommand command 
    = new SqlCommand("SELECT PID = RIGHT(REPLICATE('0',8) + CAST(PID AS VARCHAR(8)),8) 
                      FROM dbo.MDRMASTER 
                      WHERE PARENTPID = @PARENTPID 
                      UNION 
                      SELECT 'TEXT'",con); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T13:47:23.733

If database value is a string, concatenation is as simple as this...

```
SELECT T.col + 'TEXT'
FROM Table AS T 
```

If database value is not a string, you might need to cast before concatenating, like this...

```
SELECT CAST(T.col AS nvarchar)  + 'TEXT'
FROM Table AS T 
```

From your code, it would be more like this...

```
SqlCommand command = new SqlCommand("SELECT RIGHT(REPLICATE('0',8) + CAST(PID AS VARCHAR(8)),8) + 'TEXT' AS PID FROM dbo.MDRMASTER WHERE PARENTPID = @PARENTPID", con); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T13:45:44.020

您可以在 SQL 中附加文本 -

```
SqlCommand command = new SqlCommand("SELECT PID = RIGHT(REPLICATE('0',8) + CAST(PID AS VARCHAR(8)),8) + 'TEXT' FROM dbo.MDRMASTER WHERE PARENTPID = @PARENTPID",con); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T13:46:03.843

You just have to use the "`+`" operator in your SQL `SELECT` statement:

```
SELECT PID = RIGHT(REPLICATE('0',8) + CAST(PID AS VARCHAR(8)),8) + 'TEXT' 
```

This would end up making your code look like this:

```
SqlCommand command = new SqlCommand(@"SELECT PID = RIGHT(REPLICATE('0',8) + CAST(PID AS VARCHAR(8)),8) 
                                      FROM dbo.MDRMASTER 
                                      WHERE PARENTPID = @PARENTPID"
    ,con); 
```

See the MSDN article on [String concatenation in Transact SQL](http://msdn.microsoft.com/en-us/library/ms177561.aspx).

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-02T13:55:57.720

If I understand correctly, you need the text at the end of the result. Then you need to perform a **`UNION`**.

*Code*:

```
SqlCommand command = new SqlCommand("
SELECT PID = RIGHT(REPLICATE('0',8) + 
CAST(PID AS VARCHAR(8)),8) 
FROM dbo.MDRMASTER 
WHERE PARENTPID = @PARENTPID 
UNION SELECT 'TEXT'",
con); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-30T05:42:39.473

If you want to input a text, for example "text" then just do this:

select 'text'

You can then add it above or below the result of your actual query with UNION

# include - Oracle 服务总线 (11.1.1.6.0)： 问题

> ID：10415011
> 
> 赞同：0
> 
> 时间：2012-05-02T13:43:07.933
> 
> 标签：include, osb

如果我使用此架构：

```
<?xml version="1.0" encoding="UTF-8"?>
 <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
elementFormDefault="qualified">
<xsd:element name="Chick">
   <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="count" type="xsd:decimal" />
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>
</xsd:schema> 
```

有了这个wsdl：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:tns="http://www.example.org/test/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="test"
xmlns:chi="chick"
targetNamespace="http://www.example.org/test/">
<wsdl:types>
    <xsd:schema targetNamespace="http://www.example.org/test/">
        <xsd:include schemaLocation="testschema.xsd"></xsd:include>
        <xsd:include  id="ada" schemaLocation="testschema.xsd" />
        <xsd:element name="doTheRightThing">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element ref="Chick" />
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
        <xsd:element name="doTheRightThingResponse">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="out" type="xsd:string" />
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </xsd:schema>
</wsdl:types>
<wsdl:message name="doTheRightThingRequest">
    <wsdl:part element="tns:doTheRightThing" name="parameters" />
</wsdl:message>
<wsdl:message name="doTheRightThingResponse">
    <wsdl:part element="tns:doTheRightThingResponse" name="parameters" />
</wsdl:message>
<wsdl:portType name="test">
    <wsdl:operation name="doTheRightThing">
        <wsdl:input message="tns:doTheRightThingRequest" />
        <wsdl:output message="tns:doTheRightThingResponse" />
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="testSOAP" type="tns:test">
    <soap:binding style="document"
        transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="doTheRightThing">
        <soap:operation
            soapAction="http://www.example.org/test/doTheRightThing" />
        <wsdl:input>
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="test">
    <wsdl:port binding="tns:testSOAP" name="testSOAP">
        <soap:address location="http://www.example.org/" />
    </wsdl:port>
</wsdl:service>
    </wsdl:definitions> 
```

我收到此错误消息：

**为 WSDL 构建模式类型系统时出错：D:\Oracle\Middleware_11.1.1.6.0\user_projects\domains\osb_cookbook_domain\test:0：错误：src-resolve.a：找不到元素“Chick”。您的意思是指名为 Chick@http://www.example.org/test/ 的元素（在测试模式中）？**

如果我在 wsdl 中更改这一行：

```
 <xsd:element ref="Chick" /> 
```

对此：

```
 <xsd:element ref="tns:Chick" /> 
```

我无法部署，OEPE 返回此错误消息：

**WSDL 在语义上无效：错误：src-resolve: element 'Chick@http://www.example.org/test/' not found..**

这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:25:56.943

补丁 14003546 解决了这个问题：

**带有嵌入式架构的 WSDL 包括无命名空间验证失败**

# ios - 如何在崩溃后自动重启应用程序（就像 Skype 4.0 一样）

> ID：10415013
> 
> 赞同：1
> 
> 时间：2012-05-02T13:43:13.223
> 
> 标签：ios

也许你们都听说过 Skype 用他们的 iOS 应用程序做了什么；它会在崩溃时自动重启：http: [//bytenow.net/2012/04/30/skype-releases-4-0-update-for-ios-brings-ui-redesign-and-auto-relaunch](http://bytenow.net/2012/04/30/skype-releases-4-0-update-for-ios-brings-ui-redesign-and-auto-relaunch)

我想知道这是怎么做到的。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T19:33:56.877

我不知道 Skype 是怎么做的，就我而言，我制作了一个在“iPad Kiosk”中运行的应用程序，所以万一它崩溃了，我需要该应用程序自动重启，所以我所做的就是将我的 iPad 置于“ **Kiosk 模式**”并且操作系统会在崩溃的情况下自动重新启动应用程序。

看一眼：

[http://www.webascender.com/Blog/ID/447/How-to-Setup-Kiosk-Mode-Lock-Your-iPad-to-Just-One-App](http://www.webascender.com/Blog/ID/447/How-to-Setup-Kiosk-Mode-Lock-Your-iPad-to-Just-One-App)

干杯，

# image - System.Windows.Controls.Image - 尝试获取某个像素的颜色

> ID：10415015
> 
> 赞同：0
> 
> 时间：2012-05-02T13:43:21.773
> 
> 标签：image, c#-4.0

WPF 表单上有一个 System.Windows.Controls.Image，它有一个位图。如何`image1.Source`通过其坐标获得某个像素的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:47:04.717

看一下[Bitmap.GetPixel(x, y)](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)方法：

> 参数
> 
> x 类型：System.Int32 要检索的像素的 x 坐标。y 类型：System.Int32 要检索的像素的 y 坐标。
> 
> 返回值
> 
> 类型：System.Drawing.Color 表示指定像素颜色的 Color 结构。

# css - 是否可以针对 CSS 中的最后一个列表元素？

> ID：10415016
> 
> 赞同：7
> 
> 时间：2012-05-02T13:43:24.470
> 
> 标签：css, html-lists

我正在生成一个页面菜单，其结构类似于以下嵌套列表：

```
<ul>
    <li>Page 1</li>
    <li>Page 2</li>
    <li>
        Page 3
        <ul>
            <li>Subpage 1</li>
            <li>Subpage 2</li> <!-- Can I target ONLY this element? -->
        </ul>
    </li>
</ul> 
```

请注意，此列表是动态的。**项目的数量和级别的数量是不可预测的**。所以，这样的事情不够灵活：

```
/* I know this does not have great browser support - just an example */
ul > li > ul > li:last-child {
    /* CSS here */
} 
```

我意识到我可以修改我的服务器代码以向最后一项添加一个类，但我首先想知道这在 CSS 中是否可行。

更复杂的是，我想针对所有主流浏览器以及 IE 7+。

**是否可以使用 CSS 定位最后一个列表项？**

基本上，我需要解决这个[小提琴](http://jsfiddle.net/NaJas/)（通过@Pumbaa80）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:46:04.123

### CSS3 方式 (IE9+)

如果您确切知道最后一项的深度，您可以重复调用`:last-child`：

```
li:last-child li:last-child {
    color: red;
} 
```

[根据http://caniuse.com/#search=last-child](http://caniuse.com/#search=last-child)，在 9 版之前的 IE 中不支持这种伪类选择器。当然，如果你不知道这个列表项有多深，那么这种方法并没有真正的帮助。

### The JavaScript Way

You can target the very last list item via JavaScript as well:

```
var items = document.getElementById("mylist").getElementsByTagName("li"),
    _item = items[ items.length - 1 ];

_item.className == "" 
  ? _item.className = "last" 
  : _item.className += " last" ; 
```

This is raw JavaScript, which requires no additional frameworks or libraries. If you're using a popular framework like jQuery, this could be even simpler:

```
$("#mylist li:last").addClass("last"); 
```

I wouldn't suggest you use jQuery *just* for something like this. Raw JavaScript would be far faster, and far less bloat.

### The Preprocessor way

Depending on how your navigational menu is constructed, you may be able to use a server-side language to identify the last list-item, and mark it as such. For example, we could perform the following using the `DOMDocument` class in PHP:

```
$d = new DOMDocument();
$d->loadHTML( $html );

$a = $d->getElementsByTagName("li");
$l = $a->item( $a->length - 1 );

$c = $l->getAttribute("class");

empty( $c ) 
  ? $l->setAttribute("class", "last") 
  : $l->setAttribute("class", "last $c");

echo $d->saveHTML( $l ); 
```

This finds the last list item in the HTML and adds a new class of "last" to it. The benefit to this is that it doesn't require complicated, and often times poorly-supported, CSS3 selectors. Further, it doesn't require the addition of large JavaScript libraries to do trivial things.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T13:45:20.037

您发布了正确的方法：

```
li:last-child 
```

如果你需要确定你可以使用 javascript / jQuery 来做到这一点。但是你可能会遇到问题：“如果人们禁用了js？”......没办法。

使用`li:last-child`.

* * *

编辑：

如果你能添加至少一个类`UL`就很容易了。否则，如果您确定只有两个列表：

```
ul ul li:last-child { /* code */ } 
```

* * *

另一个编辑：

[http://jsfiddle.net/toroncino/4NXg2/](http://jsfiddle.net/toroncino/4NXg2/)

双重解决方案，js和css。

* * *

再次编辑：

你的小提琴：http: [//jsfiddle.net/toroncino/NaJas/1/](http://jsfiddle.net/toroncino/NaJas/1/)

```
$('ul').last().addClass('last');​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:54:46.020

In short : no. The constraints you're giving make CSS solutions impractical due to the (very) poor support for 'advanced css' in IE7.

Would the use of javascript be an option in your case? With jquery the following comes to mind:

```
$('ul li').last().css('color', 'red'); 
```

edit: This will also bypass your 'unknown tree depth' issue as child nodes of the last li would automatically be further down in the list of matching items but child nodes of earlier li items would not :

*   1st element
*   2nd element
*   3rd element
    *   4th element
*   5th element

edit: i've updated your fiddle here [http://jsfiddle.net/NaJas/4/](http://jsfiddle.net/NaJas/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T14:09:02.123

It is not possible. Your constraint

> The number of items and number of levels are not predictable.

means that CSS2 selectors, and even CSS3 selectors are not sufficient:

Suppose you have a selector that works for list depth 2\. Now adding a third list level in that item would have to invalidate that selector, i.e. the selector would have to depend on the element's child elements. Selectors like that don't exist yet and [will be introduced in CSS4](http://www.w3.org/TR/selectors4/#subject), where this would be a solution to your problem:

```
/* CSS4 */
li:last-child:not($li li) {
    /**/
} 
```

The selector `$li li` means "an `li` that has some `li` descendant".

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T13:46:43.357

You can use li:last-child in your CSS

# php - Zend_Mail 多部分/混合内联图像和 pdf 附件

> ID：10415018
> 
> 赞同：3
> 
> 时间：2012-05-02T13:43:31.223
> 
> 标签：php, zend-framework, zend-mail

我想使用 Zend 发送一封电子邮件，其中包含很少的内联图像和一个 pdf 文件作为附件，电子邮件的代码应如下所示：

```
From - Wed Apr 18 12:09:29 2012

[...]

Content-Type: multipart/mixed; boundary=mixed6455A4FA01BD9CFD334A87E206713ED8

[...]

--mixed6455A4FA01BD9CFD334A87E206713ED8
Content-Type: multipart/related; boundary=related6455A4FA01BD9CFD334A87E206713ED8

--related6455A4FA01BD9CFD334A87E206713ED8
Content-Type: multipart/alternative; boundary=alternative6455A4FA01BD9CFD334A87E206713ED8

--alternative6455A4FA01BD9CFD334A87E206713ED8
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit

Email as plain text

best regards

--alternative6455A4FA01BD9CFD334A87E206713ED8
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit

Email as <b>html</b><br />

<img src = 'cid:dvb_small.jpg' border = '0'/><br /><br/ >

best regards

<img src = 'cid:signature.gif' border = '0'/>

--alternative6455A4FA01BD9CFD334A87E206713ED8--

--related6455A4FA01BD9CFD334A87E206713ED8
Content-Type: image/jpeg
Content-Transfer-Encoding: base64
Content-ID: <dvb_small.jpg>
Content-Disposition: inline

[IMAGE CONTENT]

--related6455A4FA01BD9CFD334A87E206713ED8
Content-Type: image/gif
Content-Transfer-Encoding: base64
Content-ID: <signature.gif>
Content-Disposition: inline

[IMAGE CONTENT]

--related6455A4FA01BD9CFD334A87E206713ED8--

--mixed6455A4FA01BD9CFD334A87E206713ED8
Content-Type: application/octetstream; name="invoice_7293.pdf"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="invoice_7293.pdf"

[PDF CONTENT]

--mixed6455A4FA01BD9CFD334A87E206713ED8-- 
```

有没有办法使用 Zend_Mail 获取这样的代码？我现在在做什么是：

```
$mail = new Zend_Mail;

[...]

//Adding inline images
$att = $mail->createAttachment(file_get_contents($filePath));
$att->type = $fileType['mime'];
$att->disposition = Zend_Mime::DISPOSITION_INLINE;
$att->encoding = Zend_Mime::ENCODING_BASE64;
$att->filename = $fileName;
$att->id = md5($att->filename);

//Adding PDF file
$invoiceAt = $mail->createAttachment(file_get_contents($invoicePdf));
$invoiceAt->type = 'application/octetstream';
$invoiceAt->disposition = Zend_Mime::DISPOSITION_ATTACHMENT;
$invoiceAt->encoding = Zend_Mime::ENCODING_BASE64;
$invoiceAt->filename    = 'invoice_' . $id . '.pdf'; 
```

最后要做的是设置正确的电子邮件内容类型。如果我使用：

```
$this->setType(Zend_Mime::MULTIPART_MIXED); 
```

内联文件不显示，它们附加到电子邮件中。

如果我这样做：

```
$this->setType(Zend_Mime::MULTIPART_RELATED); 
```

内联文件正确显示，但 pdf 附件不显示（它在那里并且可以打开它，但在 Thunderbird 中，您只有在单击邮件后才能看到附件标志）。我认为其他邮件客户端也会遇到问题。

在这种情况下，生成的电子邮件代码如下所示：

```
From - Wed May 02 15:12:18 2012

[...]

Content-Type: multipart/related;
 boundary="=_c3a05d0d4a6abdbfcb3fc03ac8abf402"
Content-Transfer-Encoding: quoted-printable

[...]

--=_c3a05d0d4a6abdbfcb3fc03ac8abf402
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

[HTML]

--=_c3a05d0d4a6abdbfcb3fc03ac8abf402
Content-Type: application/octetstream
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="invoice_123.pdf"

[PDF_CONTENT]

--=_c3a05d0d4a6abdbfcb3fc03ac8abf402
Content-Type: image/jpeg
Content-Transfer-Encoding: base64
Content-ID: <e783669dda40eced6adef6cd056d9887>
Content-Disposition: inline; filename="dvb_logo.jpg"

[IMAGE CONTENT]

--=_c3a05d0d4a6abdbfcb3fc03ac8abf402
Content-Type: 
Content-Transfer-Encoding: base64
Content-ID: <0c6120573af00f1160ee7049be5835c3>
Content-Disposition: inline; filename="signature.gif"

[IMAGE CONTENT]

--=_c3a05d0d4a6abdbfcb3fc03ac8abf402-- 
```

那么，Zend 有没有办法像我的问题一样生成电子邮件代码？

# python - Pyplot 映射 图矩阵上的对

> ID：10415020
> 
> 赞同：2
> 
> 时间：2012-05-02T13:43:37.203
> 
> 标签：python, string, text, matplotlib

我想用 pyplot 做以下事情，但找不到办法，也许不可能：

给定一组字符串 S 和自然数 N。给定一组项目 I，它们附加一组 (字符串 € S,number € N) 对 p。给定一个坐标系，S 在 y 轴上，N 在 x 轴上。

现在我想在这个坐标系中映射每一对 p ，以便特定项目的所有相应点都通过线连接。

然后对于每个项目，我在这个坐标系中都有一个图表。

一个问题是，如果有一个字符串 s € S 不包含在附加到某个项目的对中，那么我有某种 NULL 值。这不应被解释为 (s,0) 而只是被忽略...

比如说，我有 (1) 使用的所有字符串的列表 L1，(2) 一个项目 I1 和 (3) 一个项目 I2：

```
L1 = [London, Paris, Tokio, Berlin, Barcelona, Reykjavik]
I1 = [[London,0],[Paris,10],[Barcelona,23]]
I2 = [Paris,10],[Tokio,19],[Berlin,21],[Reykjavik,23]] 
```

现在我希望将 I1 和 I2 映射到在 y 轴上具有 L1 并且在 x 轴上具有自然数的坐标系。每个项目的“点”应该结合起来。

我希望我的意思很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:35:01.597

这是你想要的吗？ ![在此处输入图像描述](../Images/511970dc554e4b5fe7ee55273a157578.png)

```
from pylab import *

L1 = ['London', 'Paris', 'Tokio', 'Berlin', 'Barcelona', 'Reykjavik']
pos = arange(len(L1))
yticks(pos, L1)

I1 = [['London',0],['Paris',10],['Barcelona',23]]
I2 = [['Paris',10],['Tokio',19],['Berlin',21],['Reykjavik',23]]

I1_y = [L1.index(el[0]) for el in I1]
I1_x = [el[1] for el in I1]

I2_y = [L1.index(el[0]) for el in I2]
I2_x = [el[1] for el in I2]

plot(I1_x, I1_y, 'o-')
plot(I2_x, I2_y, 'x-')
grid(True)
savefig('countries.png')
show() 
```

# asp.net-mvc-3 - 如何在 MVC3 中生成具有多个参数的链接？

> ID：10415024
> 
> 赞同：0
> 
> 时间：2012-05-02T13:44:07.950
> 
> 标签：asp.net-mvc-3, razor

我有一个看起来像的控制器方法

```
public ViewResult Index(string id, string participant="", string flagged = "") 
```

`id`是我 global.asax 中此控制器的路由值。我想将其他值作为常规参数传递，所以链接看起来像

```
.../controller/Index/id?participant=yes&flagged=no 
```

有没有办法在 MVC 3 中使用 Razor 脚本生成这样的链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T13:47:15.230

`routeValues`您可以在 ActionLink 方法的参数中传递所有参数：

```
@Html.ActionLink(
    "go to index",                  // linkText
    "index",                        // actionName
    new {                           // routeValues
        id = "123", 
        participant = "yes", 
        flagged = "no" 
    }
) 
```

假设默认路由设置，这将生成：

```
<a href="/Home/index/123?participant=yes&amp;flagged=yes">go to index</a> 
```

* * *

更新：

为了进一步详细说明您发布的评论，如果 ActionLink 生成了一个 url，`Length=6`例如这意味着您使用了错误的重载。例如这是**错误**的：

```
@Html.ActionLink(
    "go to index",             // linkText
    "index",                   // actionName
    "home",                    // routeValues
    new {                      // htmlAttributes
        id = "123", 
        participant = "yes", 
        flagged = "no" 
    }
) 
```

从我对每个参数名称的注释中可以看出为什么这是错误的。因此，请确保您仔细阅读 Intellisense（如果您有幸让 Intellisense 在 Razor 中工作 :-)）来选择正确的辅助方法重载。

在您要指定控制器名称的情况下，正确的重载如下：

```
@Html.ActionLink(
    "go to index",             // linkText
    "index",                   // actionName
    "home",                    // controllerName
    new {                      // routeValues
        id = "123", 
        participant = "yes", 
        flagged = "no" 
    },
    null                       // htmlAttributes
) 
```

注意`null`作为最后一个参数传递的那个。这就是`htmlAttributes`参数对应的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T13:47:13.157

您可以为此使用 ActionLink：

```
@Html.ActionLink("Title",
                 "ActionName", 
                  new {id = 1, participant = "yes", flagged = "no"}) 
```

# python - 如何恢复传递给 multiprocessing.Process 的函数的返回值？

> ID：10415028
> 
> 赞同：273
> 
> 时间：2012-05-02T13:44:34.523
> 
> 标签：python, python-multiprocessing

在下面的示例代码中，我想恢复 function 的返回值`worker`。我该怎么做呢？这个值存储在哪里？

**示例代码：**

```
import multiprocessing

def worker(procnum):
    '''worker function'''
    print str(procnum) + ' represent!'
    return procnum

if __name__ == '__main__':
    jobs = []
    for i in range(5):
        p = multiprocessing.Process(target=worker, args=(i,))
        jobs.append(p)
        p.start()

    for proc in jobs:
        proc.join()
    print jobs 
```

**输出：**

```
0 represent!
1 represent!
2 represent!
3 represent!
4 represent!
[<Process(Process-1, stopped)>, <Process(Process-2, stopped)>, <Process(Process-3, stopped)>, <Process(Process-4, stopped)>, <Process(Process-5, stopped)>] 
```

我似乎无法在存储在`jobs`.

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2012-05-02T13:55:08.283

使用[共享变量](http://docs.python.org/library/multiprocessing.html#sharing-state-between-processes)进行通信。例如像这样：

```
import multiprocessing

def worker(procnum, return_dict):
    """worker function"""
    print(str(procnum) + " represent!")
    return_dict[procnum] = procnum

if __name__ == "__main__":
    manager = multiprocessing.Manager()
    return_dict = manager.dict()
    jobs = []
    for i in range(5):
        p = multiprocessing.Process(target=worker, args=(i, return_dict))
        jobs.append(p)
        p.start()

    for proc in jobs:
        proc.join()
    print(return_dict.values()) 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2015-03-01T21:09:38.773

我认为@sega_sai 建议的方法更好。但它确实需要一个代码示例，所以这里是：

```
import multiprocessing
from os import getpid

def worker(procnum):
    print('I am number %d in process %d' % (procnum, getpid()))
    return getpid()

if __name__ == '__main__':
    pool = multiprocessing.Pool(processes = 3)
    print(pool.map(worker, range(5))) 
```

这将打印返回值：

```
I am number 0 in process 19139
I am number 1 in process 19138
I am number 2 in process 19140
I am number 3 in process 19139
I am number 4 in process 19140
[19139, 19138, 19140, 19139, 19140] 
```

如果您熟悉`map`（Python 2 内置），这应该不会太具有挑战性。否则，请查看[sega_Sai 的链接](http://docs.python.org/library/multiprocessing.html?highlight=pool#multiprocessing.pool.AsyncResult)。

请注意需要多少代码。（还要注意如何重用流程）。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2016-06-09T21:41:44.947

对于其他寻求如何从`Process`using中获取价值的人`Queue`：

```
import multiprocessing

ret = {'foo': False}

def worker(queue):
    ret = queue.get()
    ret['foo'] = True
    queue.put(ret)

if __name__ == '__main__':
    queue = multiprocessing.Queue()
    queue.put(ret)
    p = multiprocessing.Process(target=worker, args=(queue,))
    p.start()
    p.join()
    print(queue.get())  # Prints {"foo": True} 
```

请注意，在 Windows 或 Jupyter Notebook 中，`multithreading`您必须将其保存为文件并执行该文件。如果您在命令提示符下执行此操作，您将看到如下错误：

```
 AttributeError: Can't get attribute 'worker' on <module '__main__' (built-in)> 
```

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2017-08-23T02:47:23.907

出于某种原因，我找不到如何在`Queue`任何地方执行此操作的一般示例（即使 Python 的文档示例也不会产生多个进程），所以这是我在尝试 10 次后得到的工作：

```
def add_helper(queue, arg1, arg2): # the func called in child processes
    ret = arg1 + arg2
    queue.put(ret)

def multi_add(): # spawns child processes
    q = Queue()
    processes = []
    rets = []
    for _ in range(0, 100):
        p = Process(target=add_helper, args=(q, 1, 2))
        processes.append(p)
        p.start()
    for p in processes:
        ret = q.get() # will block
        rets.append(ret)
    for p in processes:
        p.join()
    return rets 
```

`Queue`是一个阻塞的线程安全队列，可用于存储子进程的返回值。所以你必须将队列传递给每个进程。这里不太明显的是，您必须在es`get()`之前从队列中退出，否则队列会填满并阻塞所有内容。`join``Process`

**面向对象的**更新（在 Python 3.4 中测试）：****

 **```
from multiprocessing import Process, Queue

class Multiprocessor():

    def __init__(self):
        self.processes = []
        self.queue = Queue()

    @staticmethod
    def _wrapper(func, queue, args, kwargs):
        ret = func(*args, **kwargs)
        queue.put(ret)

    def run(self, func, *args, **kwargs):
        args2 = [func, self.queue, args, kwargs]
        p = Process(target=self._wrapper, args=args2)
        self.processes.append(p)
        p.start()

    def wait(self):
        rets = []
        for p in self.processes:
            ret = self.queue.get()
            rets.append(ret)
        for p in self.processes:
            p.join()
        return rets

# tester
if __name__ == "__main__":
    mp = Multiprocessor()
    num_proc = 64
    for _ in range(num_proc): # queue up multiple tasks running `sum`
        mp.run(sum, [1, 2, 3, 4, 5])
    ret = mp.wait() # get all results
    print(ret)
    assert len(ret) == num_proc and all(r == 15 for r in ret) 
```

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2016-06-09T23:56:07.450

此示例显示如何使用[multiprocessing.Pipe](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.Pipe)实例列表从任意数量的进程返回字符串：

```
import multiprocessing

def worker(procnum, send_end):
    '''worker function'''
    result = str(procnum) + ' represent!'
    print result
    send_end.send(result)

def main():
    jobs = []
    pipe_list = []
    for i in range(5):
        recv_end, send_end = multiprocessing.Pipe(False)
        p = multiprocessing.Process(target=worker, args=(i, send_end))
        jobs.append(p)
        pipe_list.append(recv_end)
        p.start()

    for proc in jobs:
        proc.join()
    result_list = [x.recv() for x in pipe_list]
    print result_list

if __name__ == '__main__':
    main() 
```

**输出：**

```
0 represent!
1 represent!
2 represent!
3 represent!
4 represent!
['0 represent!', '1 represent!', '2 represent!', '3 represent!', '4 represent!'] 
```

此解决方案使用的资源少于使用的[multiprocessing.Queue](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.Queue)

*   管道
*   至少一个锁
*   缓冲区
*   一根线

或使用[multiprocessing.SimpleQueue](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.multiprocessing.queues.SimpleQueue)

*   管道
*   至少一个锁

查看每种类型的来源非常有启发性。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-05-02T14:05:58.337

看来您应该改用[multiprocessing.Pool](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.AsyncResult)类并使用方法 .apply() .apply_async(), map()

[http://docs.python.org/library/multiprocessing.html?highlight=pool#multiprocessing.pool.AsyncResult](http://docs.python.org/library/multiprocessing.html?highlight=pool#multiprocessing.pool.AsyncResult)

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2016-04-06T17:15:28.007

您可以使用`exit`内置设置进程的退出代码。可以从`exitcode`进程的属性中获取：

```
import multiprocessing

def worker(procnum):
    print str(procnum) + ' represent!'
    exit(procnum)

if __name__ == '__main__':
    jobs = []
    for i in range(5):
        p = multiprocessing.Process(target=worker, args=(i,))
        jobs.append(p)
        p.start()

    result = []
    for proc in jobs:
        proc.join()
        result.append(proc.exitcode)
    print result 
```

**输出：**

```
0 represent!
1 represent!
2 represent!
3 represent!
4 represent!
[0, 1, 2, 3, 4] 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2019-06-19T21:53:38.620

[pebble](https://pythonhosted.org/Pebble/)包有一个很好的抽象利用`multiprocessing.Pipe`，这使得这非常简单：

```
from pebble import concurrent

@concurrent.process
def function(arg, kwarg=0):
    return arg + kwarg

future = function(1, kwarg=1)

print(future.result()) 
```

示例来自：[https ://pythonhosted.org/Pebble/#concurrent-decorators](https://pythonhosted.org/Pebble/#concurrent-decorators)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-12-26T09:41:45.353

以为我会简化从上面复制的最简单的示例，在 Py3.6 上为我工作。最简单的是[`multiprocessing.Pool`](https://docs.python.org/3/library/multiprocessing.html#using-a-pool-of-workers)：

```
import multiprocessing
import time

def worker(x):
    time.sleep(1)
    return x

pool = multiprocessing.Pool()
print(pool.map(worker, range(10))) 
```

您可以使用，例如，设置池中的进程数`Pool(processes=5)`。但是它默认为 CPU 计数，因此对于 CPU 密集型任务将其留空。（无论如何，I/O-bound 任务通常都适合线程，因为线程大部分都在等待，因此可以共享一个 CPU 内核。）`Pool`也适用于[分块优化](https://stackoverflow.com/a/54032744/1308967)。

（请注意，工作方法不能嵌套在方法中。我最初在调用 的方法中定义了工作方法`pool.map`，以使其完全独立，但随后进程无法导入它，并抛出“AttributeError ：不能腌制本地对象outer_method..inner_method”。更多[在这里](https://stackoverflow.com/a/52283968/1308967)。它可以在一个类中。）

（欣赏原始问题指定打印`'represent!'`而不是`time.sleep()`，但没有它，我认为某些代码不是同时运行的。）

* * *

Py3[`ProcessPoolExecutor`](https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor)也是两行（`.map`返回一个生成器，所以你需要`list()`）：

```
from concurrent.futures import ProcessPoolExecutor
with ProcessPoolExecutor() as executor:
    print(list(executor.map(worker, range(10)))) 
```

* * *

使用纯[`Process`](https://docs.python.org/3/library/multiprocessing.html#the-process-class)es：

```
import multiprocessing
import time

def worker(x, queue):
    time.sleep(1)
    queue.put(x)

queue = multiprocessing.SimpleQueue()
tasks = range(10)

for task in tasks:
    multiprocessing.Process(target=worker, args=(task, queue,)).start()

for _ in tasks:
    print(queue.get()) 
```

[`SimpleQueue`](https://docs.python.org/3/library/multiprocessing.html#pipes-and-queues)如果您只需要`put`和 ，请使用`get`。第一个循环启动所有进程，然后第二个循环进行阻塞`queue.get`调用。我也不认为有任何理由打电话`p.join()`。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-27T09:51:46.520

如果您使用的是 Python 3，则可以将[`concurrent.futures.ProcessPoolExecutor`](https://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor)其用作方便的抽象：

```
from concurrent.futures import ProcessPoolExecutor

def worker(procnum):
    '''worker function'''
    print(str(procnum) + ' represent!')
    return procnum

if __name__ == '__main__':
    with ProcessPoolExecutor() as executor:
        print(list(executor.map(worker, range(5)))) 
```

输出：

```
0 represent!
1 represent!
2 represent!
3 represent!
4 represent!
[0, 1, 2, 3, 4] 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-12-17T22:58:09.280

一个简单的解决方案：

```
import multiprocessing

output=[]
data = range(0,10)

def f(x):
    return x**2

def handler():
    p = multiprocessing.Pool(64)
    r=p.map(f, data)
    return r

if __name__ == '__main__':
    output.append(handler())

print(output[0]) 
```

输出：

```
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-11T21:43:31.140

我修改了 vartec 的答案，因为我需要从函数中获取错误代码。（感谢vertec !!!这是一个很棒的技巧）

这也可以用 a 来完成，`manager.list`但我认为最好将它放在一个 dict 中并在其中存储一个列表。这样，我们就可以保留函数和结果，因为我们无法确定列表的填充顺序。

```
from multiprocessing import Process
import time
import datetime
import multiprocessing

def func1(fn, m_list):
    print 'func1: starting'
    time.sleep(1)
    m_list[fn] = "this is the first function"
    print 'func1: finishing'
    # return "func1"  # no need for return since Multiprocess doesnt return it =(

def func2(fn, m_list):
    print 'func2: starting'
    time.sleep(3)
    m_list[fn] = "this is function 2"
    print 'func2: finishing'
    # return "func2"

def func3(fn, m_list):
    print 'func3: starting'
    time.sleep(9)
    # if fail wont join the rest because it never populate the dict
    # or do a try/except to get something in return.
    raise ValueError("failed here")
    # if we want to get the error in the manager dict we can catch the error
    try:
        raise ValueError("failed here")
        m_list[fn] = "this is third"
    except:
        m_list[fn] = "this is third and it fail horrible"
        # print 'func3: finishing'
        # return "func3"

def runInParallel(*fns):  # * is to accept any input in list
    start_time = datetime.datetime.now()
    proc = []
    manager = multiprocessing.Manager()
    m_list = manager.dict()
    for fn in fns:
        # print fn
        # print dir(fn)
        p = Process(target=fn, name=fn.func_name, args=(fn, m_list))
        p.start()
        proc.append(p)
    for p in proc:
        p.join()  # 5 is the time out

    print datetime.datetime.now() - start_time
    return m_list, proc

if __name__ == '__main__':
    manager, proc = runInParallel(func1, func2, func3)
    # print dir(proc[0])
    # print proc[0]._name
    # print proc[0].name
    # print proc[0].exitcode

    # here you can check what did fail
    for i in proc:
        print i.name, i.exitcode  # name was set up in the Process line 53

    # here will only show the function that worked and where able to populate the 
    # manager dict
    for i, j in manager.items():
        print dir(i)  # things you can do to the function
        print i, j 
```**

# android - 单击地图位置标记图标时显示对话框？

> ID：10415033
> 
> 赞同：0
> 
> 时间：2012-05-02T13:44:45.690
> 
> 标签：android, dialog, maps

当我在 android 中单击地图中的某个位置时，它会显示警报对话框？您想将该位置保存到特定列表中，例如我的位置或收藏夹，以便我可以将该位置移动到特定列表中。

提前致谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:50:04.197

```
public class MapViewer extends MapActivity {

MapView mapView;

MapController mapController;

GeoPoint mgeoPoint;

Drawable marker;

MyLocationOverlay mLocationOverlay;

MotionEvent e;

@Override
protected void onCreate(Bundle icicle) {

    // TODO Auto-generated method stub
    super.onCreate(icicle);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapView);

    mapController = mapView.getController();

    mapView.setBuiltInZoomControls(true);

    mapView.setStreetView(true);

    marker = getResources().getDrawable(R.drawable.pushpin);

    marker.setBounds(0, 0, marker.getIntrinsicWidth(), marker
            .getIntrinsicHeight());

    mapView.getOverlays().add(new MapOverlay(marker));

    mLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(mLocationOverlay);

    setViewLocation();
}

@Override
protected Dialog onCreateDialog(int id) {

    // TODO Auto-generated method stub

    switch (id) {
        case 0:
            return new AlertDialog.Builder(this).setTitle("Hello").setIcon(
                    R.drawable.ic_launcher).setPositiveButton("Yes",
                    new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog , int which) {

                            // TODO Auto-generated method stub

                        }
                    }).setCancelable(true).setNegativeButton("Cancel",
                    new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog , int which) {

                            // TODO Auto-generated method stub

                        }
                    })

            .setOnCancelListener(new OnCancelListener() {

                @Override
                public void onCancel(DialogInterface dialog) {

                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Dismiss",
                            Toast.LENGTH_SHORT).show();
                }

            }).create();

        default:
            break;
    }
    return null;
        }

private void setViewLocation() {

    String[] coordinates = { "22.716221", "75.896816" };

    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);
    mgeoPoint = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

    mapController.animateTo(mgeoPoint);
    mapController.setZoom(15);

    mapView.invalidate();

}

@Override
protected boolean isRouteDisplayed() {

    // TODO Auto-generated method stub
    return false;
}

Point scrPoint;

private GeoPoint getPoint(double lat , double lon) {

    return (new GeoPoint((int) (lat * 1E6), (int) (lon * 1E6)));
}

class MapOverlay extends
        com.google.android.maps.ItemizedOverlay<OverlayItem> {

    List<OverlayItem> ListofGeopoints = new ArrayList<OverlayItem>();

    public MapOverlay(Drawable defaultMarker ) {

        super(defaultMarker);

        ListofGeopoints.add(new OverlayItem(getPoint(22.716221, 75.896816),
                "IN", "India"));

        populate();

    }

    @Override
    protected boolean onTap(int index) {

    switch (index) {
            case 0:
                Toast.makeText(getApplicationContext(), "GeoLocation : 0",
                        Toast.LENGTH_LONG).show();
                showDialog(0);
            break;
        }

        return true;
    }

    String add = "";

    List<Address> add_List = new ArrayList<Address>();

    private void getAddress() {

        add_List = ReverseGeocode
                .getFromLocation(35.594227, -105.223618, 2);

    }

    @Override
    protected OverlayItem createItem(int i) {
        return (ListofGeopoints.get(i));
    }

    @Override
    public int size() {
        return ListofGeopoints.size();
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:39:41.150

您是否尝试过覆盖您的 customOverlays 中的 onTap 方法？

```
public class CustomOverlays extends ItemizedOverlay<OverlayItem>
{
    @Override
    public boolean onTap(GeoPoint arg0, MapView arg1) {
        // TODO Auto-generated method stub
        return super.onTap(arg0, arg1);
    }
} 
```

# python - 如何使用 bsddb3 将（长）整数值写入 Berkeley DB？

> ID：10415036
> 
> 赞同：1
> 
> 时间：2012-05-02T13:44:54.437
> 
> 标签：python, berkeley-db, bsddb

我正在尝试使用 Berkeley DB 来存储频率表（即带有字符串键和整数值的哈希表）。该表将从 Python 中写入、更新和读取；所以我目前正在试验bsddb3。这看起来可以完成我想要的大部分工作，只是它看起来只支持字符串值？

如果我理解正确，Berkeley DB 支持任何类型的二进制键和值。有没有办法使用 bsddb3 有效地将原始长整数传入/传出 Berkeley DB？我知道我可以将值转换为字符串/从字符串转换，这可能是我最终要做的，但有没有更有效的方法？即通过存储“原始”整数？

* * *

背景：我目前正在使用一个大的（可能是数十，如果不是数亿，数百万个键）频率表。这目前是使用 Python 字典实现的，但是当它开始交换到虚拟内存时我中止了脚本。是的，我查看了 Redis，但这会将整个数据库存储在内存中。所以我要试试 Berkeley DB。我应该可以通过使用短期内存缓存来提高创建效率。即创建一个内存中的 Python 字典，然后定期将其添加到主伯克利数据库频率表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:28:49.567

您是否需要从 python 以外的语言读回数据？如果没有，您可以在 python 长整数上使用 pickle，并在您读回它们时取消它们。您可能能够（可能能够）使用该`shelve`模块，它会自动为您执行此操作。但即使没有，您也可以手动腌制和取消腌制这些值。

```
>>> import cPickle as pickle
>>> pickle.dumps(19999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999, pickle.HIGHEST_PROTOCOL)
'\x80\x02\x8a(\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7fT\x97\x05p\x0b\x18J#\x9aA\xa5.{8=O,f\xfa\x81|\xa1\xef\xaa\xfd\xa2e\x02.'
>>> pickle.loads('\x80\x02\x8a(\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7fT\x97\x05p\x0b\x18J#\x9aA\xa5.{8=O,f\xfa\x81|\xa1\xef\xaa\xfd\xa2e\x02.')
19999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999L 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T20:09:34.407

Python [`struct`](https://docs.python.org/3/library/struct.html) to convert an integer to bytes in Python 3 or string in Python 2\. Depending on your data you might use different packing format for *unsigned long long* or `uint64_t` :

```
struct.unpack('>Q', my_integer) 
```

This will return the byte representation of `my_integer` on **bigendian** which match the lexicographical order required by bsddb key values. You can come with smarter packing function (have a look at [`wiredtiger.intpacking`](https://github.com/wiredtiger/wiredtiger/blob/155fec24f63b3ffb845110d2baed47799c400dd8/lang/python/wiredtiger/intpacking.py#L75)) to save a space.

You don't need a Python cache, use [`DBEnv.set_cache_max` and `set_cache`](https://www.jcea.es/programacion/pybsddb_doc/dbenv.html#set_cache_max).

# ruby-on-rails - :som ething 和 somethingelse 中的冒号位置有什么区别：

> ID：10415039
> 
> 赞同：18
> 
> 时间：2012-05-02T13:45:01.537
> 
> 标签：ruby-on-rails, ruby

我正在努力理解 :symbol 和 text: 之间关于冒号位置的区别。我的理解是，当我们使用 :symbol 时，我们指的是这个对象以及它包含的任何内容，其中 text: 用于为文本赋值，就像我们为变量一样。这是正确的还是有人可以详细说明用法。谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-02T13:49:16.360

`:whatever`是一个符号，你说得对。

当您使用哈希时，这是您在 1.8x ruby​​ 中定义它的方式：

```
{:key => value, :another_key => another_value} 
```

这被称为 hashrocket 语法。在 ruby​​ 1.9x 中，这变为：

```
{key: value, another_key: another_value} 
```

向后兼容性仍然会加载 hashrocket 语法......但是，在 1.9 中，'key:' 是一个符号

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-02T13:50:56.983

这`{:key => value}`是 ruby​​ 中的旧哈希语法，现在我们有了一个更像 json 的新哈希语法，所以

```
{:key => value} 
```

是相同的

```
{key: value} 
```

旧的，我们都熟悉的是：

```
old_hash = {:simon => "Talek", :lorem => "Ipsum"} 
```

这一切都很好，花花公子，但它可以更简单，更干净。查看 Ruby 1.9 风格，它有点像 JSON：

```
new_hash = {simon: "Talek", lorem: "Ipsum"} 
```

但现在你仔细观察并问，“但以前钥匙是一个明确的符号，现在这是怎么回事？”。

好吧，你是对的，新符号是最常见的哈希样式的语法糖，即所谓的对象哈希符号。如果您在 irb 中执行此操作，您将看到 ruby​​ 返回旧学校哈希，其中符号用作键：

```
> new_hash = {simon: "Talek", lorem: "Ipsum"}
=> {:simon=>"Talek", :lorem=>"Ipsum"} 
```

如果您需要将任意对象作为散列键，您仍然必须使用老式方法。

参考：[http ://breakthebit.org/post/8453341914/ruby-1-9-and-the-new-hash-syntax](http://breakthebit.org/post/8453341914/ruby-1-9-and-the-new-hash-syntax)

# azure - 单击“确定”后 Azure Cloud Director 不工作 - 没有错误消息，没有别的

> ID：10415040
> 
> 赞同：0
> 
> 时间：2012-05-02T13:45:02.877
> 
> 标签：azure, cloud

现在我想尝试这个程序（链接： http: [//www.cogno-sys.com/azure-cloud-management/azure-cloud-director-single-click-azure-deployment/](http://www.cogno-sys.com/azure-cloud-management/azure-cloud-director-single-click-azure-deployment/)）因为我有一些部署问题我的应用到 Azure。所以我下载了它，它需要先添加一个订阅 ID。但是在我填写完所有字段后，我单击按钮 OK 但没有任何反应......（我也添加了认证路径和密码）没有错误消息，没有别的。这个弹出窗口仍然在屏幕上（当我添加 Certhumprint 然后 clikc 到 Check 时，问题是一样的，但没有再次出现。如果我现在单击 OK 按钮，错误消息显示首先单击检查按钮）

你在用这个吗？你有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:59:45.830

首次登录时有一个设置向导。它应该指导您设置帐户。最初有一个订阅的手动输入表单，它已被设置向导取代，它应该可以正确指导您。

如果您无法获得相同的信息，请转到帮助或应用程序菜单并选择“重置数据”，它将使用向导重新启动并清除所有本地数据。

如果您仍然需要帮助，请提出支持票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:03:23.720

我使用过它，发现您确实需要填写“添加订阅”对话框中的所有字段。由于您已经是 Windows Azure 用户，您可能已经在桌面上安装了自签名证书，并导出了其 PFX 和 CER，其中 CER 已上传到 Azure 管理门户。

如果您已准备好上述设置，请重试“Cloud Director”和“添加订阅”对话框中的“添加订阅”选项：

1.  首先单击“证书指纹”选项并包含上传到 Azure 管理门户的证书的 ThumbID，然后按“检查”按钮。Thumb ID 颜色将从红色变为绿色，表示已验证。

2.  现在单击“本地 PFX 文件”选项并使用“...”按钮选择 PFX 文件，并在“密码”文本框中输入 PFX 密码。

填写完所有 3 个与证书相关的输入字段后，按“确定”，您将看到进度条处于活动状态。

如果“Cloud Director”团队能看懂这个，请让这个过程更直观、更简单。

# gwt - 如果 FocusPanel 在 GWT PopupPanel 上，鼠标滚轮事件不会在 GWT FocusPanel 上触发（仅在 Chrome 和 Safari 中）

> ID：10415056
> 
> 赞同：0
> 
> 时间：2012-05-02T13:45:44.457
> 
> 标签：gwt

这是代码：

```
public class MyEntryPoint implements EntryPoint {

    PopupPanel      popupPanel = new PopupPanel(false,true);
    FocusPanel      focusPanel = new FocusPanel();
    VerticalPanel   popupContent = new VerticalPanel();

    public void onModuleLoad() {

        popupContent.add(new Label("Simple popup test"));
        popupContent.add(new Label("_"));

        focusPanel.add(popupContent);
        popupPanel.setWidget(focusPanel);

        popupPanel.center();

        focusPanel.addMouseWheelHandler(new MouseWheelHandler(){
            public void onMouseWheel(MouseWheelEvent event) {
                System.out.println("deltaY = " + event.getDeltaY());
            }
        });

    }
} 
```

如果您在 Firefox 中运行 GWT 应用程序，将鼠标移到文本“Simple popup test”上并滚动鼠标滚轮，就会调用 onMouseWheel。

如果此应用程序在 Chrome 或 Safari 中运行，请将鼠标放在文本“Simple popup test”上并滚动鼠标滚轮，然后不会调用 onMouseWheel。如果您将鼠标光标不在 GWT Label 上并滚动鼠标滚轮，则该事件将被调用 onMouseWheel。

也许有人已经纠正了这个？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:40:13.237

可以在 GWT 问题跟踪器上找到该错误：

[http://code.google.com/p/google-web-toolkit/issues/detail?id=7349](http://code.google.com/p/google-web-toolkit/issues/detail?id=7349)

问题文本中有一个指向 Google goups 讨论的链接。

我通过将弹出窗口设置为 modal = false 解决了这个问题。

# bash - 如何在bash中简单地计算两个变量的最小值？

> ID：10415064
> 
> 赞同：54
> 
> 时间：2012-05-02T13:46:02.953
> 
> 标签：bash, logical-operators

我有一个 bash 脚本检查平台上的 CPU 数量，以有效地使用`-j`make、repo 等选项。我使用这个：

```
JOBS=$(cat /proc/cpuinfo | grep processor | tail -1 | sed "s,^.*:.*\([0-9].*\)$,\1,")
echo -e "4\n$JOBS" | sort -r | tail -1 
```

它工作正常。但是，我想知道是否有任何内置函数可以做同样的事情（即计算最小值或最大值）？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-05-02T13:52:07.700

如果你的意思是 get `MAX(4,$JOBS)`，使用这个：

```
echo $((JOBS>4 ? JOBS : 4)) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-08-12T15:35:21.953

有一个类似的情况，我必须从**几个**变量中找到最小值，而我发现有用的一个稍微不同的解决方案是`sort`

```
#!/bin/bash

min_number() {
    printf "%s\n" "$@" | sort -g | head -n1
}

v1=3
v2=2
v3=5
v4=1

min="$(min_number $v1 $v2 $v3 $v4)" 
```

我想这不是最有效的技巧，但对于少量恒定数量的变量，它应该无关紧要 - 它比嵌套三元运算符更具可读性。

* * *

**编辑**：参考尼克的精彩评论 - 这种方法可以扩展到任何类型的排序用法：

```
#!/bin/bash

min() {
    printf "%s\n" "${@:2}" | sort "$1" | head -n1
}
max() {
    # using sort's -r (reverse) option - using tail instead of head is also possible
    min ${1}r ${@:2}
}

min -g 3 2 5 1
max -g 1.5 5.2 2.5 1.2 5.7
min -h 25M 13G 99K 1098M
max -d "Lorem" "ipsum" "dolor" "sit" "amet"
min -M "OCT" "APR" "SEP" "FEB" "JUL" 
```

# java - 解析xml时如何检查空标签？

> ID：10415069
> 
> 赞同：4
> 
> 时间：2012-05-02T13:46:16.727
> 
> 标签：java, xml, parsing, nullpointerexception

我正在使用 Document 对象从 xml 中提取所有标签。如果 xml 有一个空标签，我会得到一个空指针异常。我该如何防范呢？如何检查空标签？

```
<USTrade>
<CreditorId>
<CustomerNumber>xxxx</CustomerNumber>
<Name></Name>
<Industry code="FY" description="Factor"/>
</CreditorId>
<DateReported format="MM/CCYY">02/2012</DateReported>
<AccountNumber>54000</AccountNumber>
<HighCreditAmount>0000299</HighCreditAmount>
<BalanceAmount>0000069</BalanceAmount>
<PastDueAmount>0000069</PastDueAmount>
<PortfolioType code="O" description="Open Account (30, 60, or 90 day account)"/>
<Status code="5" description="120 Dys or More PDue"/>
 <Narratives>
<Narrative code="GS" description="Medical"/>
<Narrative code="CZ" description="Collection Account"/>
</Narratives>
</USTrade>
<USTrade> 
```

所以，当我使用：

```
 NodeList nm = docElement.getElementsByTagName("Name");
                if (nm.getLength() > 0)
                    name = nullIfBlank(((Element) nm.item(0))
                            .getFirstChild().getTextContent()); 
```

Nodelist 给出的长度为 1，因为有一个标签，但是当我执行 getTextContent() 时，它会命中空指针，因为 FirstChild() 没有为 tag = Name 返回任何内容

而且，我已经为每个 xml 标签做了这个。在每次提取标签之前我可以做一个简单的检查吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T13:54:16.167

我要做的第一件事就是解开你的电话。这将使您有机会准确确定哪个引用为空，以及您需要对哪个引用进行空检查：

```
 NodeList nm = docElement.getElementsByTagName("Name");
                if (nm.getLength() > 0) {
                    Node n = nm.item(0);
                    Node child = n.getFirstChild();
                    if(child == null) {
                        // null handling
                        name = null;
                     }
                    else {
                       name = nullIfBlank(child.getTextContent());
                    }

                 } 
```

另外，请查看`hasChildNodes()`Node 上的方法！[http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html#hasChildNodes%28%29](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html#hasChildNodes%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:48:29.153

```
while(current != null){
                if(current.getNodeType() == Node.ELEMENT_NODE){
                    String nodeName = current.getNodeName();
                    System.out.println("\tNode: "+nodeName);
                    NamedNodeMap attributes = current.getAttributes();
                    System.out.println("\t\tNumber of Attributes: "+attributes.getLength());
                    for(int i=0; i<attributes.getLength(); i++){
                        Node attr = attributes.item(i);
                        String attName = attr.getNodeName();
                        String attValue= attr.getNodeValue();
                        System.out.println("\t\tAttribute Name: "+ attName+ "\tAttribute Value:"+ attValue);
                    }
                } 
```

您是否还想打印出节点的值？如果是这样，在我的示例中，您必须添加一行代码，我也可以分享它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:54:46.067

你有没有尝试过这样的事情？

```
NodeList nm = docElement.getElementsByTagName("Name");
if ((Element) nm.item(0))
 name = nullIfBlank(((Element) nm.item(0)).getFirstChild().getTextContent()); 
```

# asp.net - 实体框架 MVC 页面加载缓慢

> ID：10415070
> 
> 赞同：4
> 
> 时间：2012-05-02T13:46:29.457
> 
> 标签：asp.net, sql-server, asp.net-mvc-3, entity-framework

我有一个在 Windows Azure 上运行的 Web 应用程序。它是使用 ASP.Net 4.0、MVC 3、Entity Framework 4.1、SQL Server 2008 使用存储库模式构建的。

直到最近，该应用程序的表现都非常好。我们的大多数客户都有几百行数据，但其中一个开始达到 2000+。这大大减慢了他们的页面加载时间（某些页面为 15 - 20 秒）。

我们刚开始使用 MiniProfiler，这表明我们有一个非常健谈的应用程序——带有重复的 SQL 调用。

为了提供尽可能多的细节并弄清楚我们如何才能做得更好，我将解释一些正在做的事情。

我们有一个包含两个受保护对象（CurrentUser 和 CurrentCompany）的基本控制器。我们在 Actions 中使用了很多这些，但它每次都会命中数据库。所以，我假设我们需要在第一次将这些对象存储在会话中。围绕这些对象集结是否有很大的开销？以后如何访问他们的关系（CurrentCompany.Offices.First() 等）？

我们根据这些对象获取每个页面的数据：选择、排序、过滤它们的关系，例如：

```
CurrentCompany.Employees.Where(r => r.StatusId = Enums.Statuses.Active); 
```

此处“CurrentCompany.Employees”返回一个 EntityCollection，但 Where 将其更改为 IEnumerable。我听说 IQueryable 是要走的路？

我还读到 EF 非常适合快速启动和运行，但您必须进行一些调整以确保它在处理大量数据时表现良好。根据我的阅读，即使您只要求 2 列，它也会带回整行？

因此，考虑到所有这些 - 有人可以指出我应该做些什么来为更大的客户制作这个规模。毕竟 2000 多行并不多。我们应该使用视图/存储过程吗？

那里有大量的资源来解释如何使用基本选择等进行 EF 设置 - 但一旦数据集变得更大，就没有真正的缩放它。

任何帮助将不胜感激。布赖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:59:17.207

奇怪的是，线索可能在 2000 行中。SQL changes the way it accesses data when the choice passes 0.1% of the dataset. 您没有说表上是否有适当的索引。 [http://www.sqlteam.com/article/sql-server-indexes-the-basics](http://www.sqlteam.com/article/sql-server-indexes-the-basics) 可能会有所帮助 如果您运行 SQL 管理工作室，那么缺少索引功能 [http://msdn.microsoft.com/en-us/库/ms345524.aspx](http://msdn.microsoft.com/en-us/library/ms345524.aspx)

高温高压

也在这里 [http://blogs.msdn.com/b/sqlazure/archive/2010/08/19/10051969.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/08/19/10051969.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:05:50.477

你在做多少急切的加载？这是我们发现对性能造成重大影响的一件事，为了解决这个问题，我们开始使用[Entlib 缓存应用程序块](http://msdn.microsoft.com/en-us/library/ff647280.aspx)缓存属性 ，然后将它们从缓存中合并到对象中，而不是从数据库中获取它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:43:32.220

根据我自己的经验，EF 非常慢，因为它使用 LINQ（非常慢）我有一个个人网站（一个显示多种数据的主页，所以我必须在 LINQ 中向数据库服务器发出多个请求）。它非常慢，我尝试使用延迟加载选项等调整 EF .edmx……我找到的唯一解决方案是摆脱 linq，并在 ado.net 中重写它，这需要更多时间代码，但我摆脱了速度问题.....LINQ请求必须翻译成sql，在它到达数据库之前有很多步骤，当它获取数据（select *）时，它将它翻译成一个列表EF 中的对象模型。感谢您

# google-drive-api - 创建内部 Google Drive 应用程序而不在 Chrome Web Store 上发布

> ID：10415073
> 
> 赞同：3
> 
> 时间：2012-05-02T13:46:52.290
> 
> 标签：google-drive-api, chrome-web-store

是否可以使用 Google Drive API 创建 Google Drive Web 应用程序**而不**将应用程序发布到 Chrome 网上应用店？

我试图实现它。身份验证现已完成，但现在它抱怨：“403：经过身份验证的用户尚未安装客户端 ID {clientid} 的应用程序”

提前致谢！

问候，

佩德罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:37:34.053

编辑：这现在是完全可能的。仅希望使用 Drive API 的应用程序没有 chrome webstore 限制。

* * *

目前，不可以，您必须从 Chrome 网上应用店创建和安装。请注意，您可以将您的应用程序发布到[受信任的测试人员的私人小组，](https://developers.google.com/drive/listing#publishing_to_test_accounts)这将阻止它显示在主列表中（这在开发过程中会很糟糕）。

我们知道这是使用 API 的障碍，并且正在寻找解决方案。

# ios - 将对齐数组 uint8[8] 转换为 double

> ID：10415074
> 
> 赞同：0
> 
> 时间：2012-05-02T13:46:54.467
> 
> 标签：ios, c, double, bit-manipulation, core-foundation

尝试将对齐的数组转换`uint8[8]`为`double`. 使用位操作转换为特别容易，但我知道`uint8[4]`就符号位而言可能会变得混乱？`long``double`

在Java中我只是使用`ByteBuffer.wrap(bytes).getDouble()`，但我认为它在C中并不容易。

我试图实现这段代码，但最后一个命令给出了错误`Expression is not assignable`并且`Shift count >= width of type`

```
long tempHigh = 0; 
long tempLow = 0;
double sum = 0;
tempHigh |= buffer[0] & 0xFF;
tempHigh <<= 8;
tempHigh |= buffer[1] & 0xFF;
tempHigh <<= 8;
tempHigh |= buffer[2] & 0xFF;
tempHigh <<= 8;
tempHigh |= buffer[3] & 0xFF;

tempLow |= buffer[4] & 0xFF;
tempLow <<= 8;
tempLow |= buffer[5] & 0xFF;
tempLow <<= 8;
tempLow |= buffer[6] & 0xFF;
tempLow <<= 8;
tempLow |= buffer[7] & 0xFF;

sum |= ((tempHigh & 0xFFFF) <<= 32) + (tempLow & 0xFFFF); 
```

如何正确完成此过程*或*仅解决我犯的错误？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:48:25.037

`double`是浮点类型；它不支持按位运算，例如`|`.

您可以执行以下操作：

```
double sum;

memcpy(&sum, buffer, sizeof(sum)); 
```

但请注意字节顺序问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:38:45.527

可移植的方法是使用按位算术将符号、指数和尾数值读出到整数变量中，然后调用`ldexp`以应用指数。

好的，这里有一些代码。请注意，它可能有不匹配的括号或一对一的错误。

```
unsigned char x[8]; // your input; code assumes little endian
long mantissa = ((((((x[6]%16)*256 + x[5])*256 + x[4])*256 + x[3])*256 + x[2])*256 + x[1])*256 + x[0];
int exp = x[7]%128*16 + x[6]/16 - 1023;
int sign = 1-x[7]/128*2;
double y = sign*ldexp(0x1p53 + mantissa, exp-53); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:18:41.837

工会怎么样？像你一样写长部分，然后双精度自动正确。像这样的东西：

```
union 
{
   double sum;
   struct
   {
       long tempHigh;
       long tempLow;
   }v;
 }u;

 u.v.tempHigh = 0; 
 u.v.tempHigh |= buffer[0] & 0xFF;
 u.v.tempHigh <<= 8;
 u.v.tempHigh |= buffer[1] & 0xFF;
 u.v.tempHigh <<= 8;
 u.v.tempHigh |= buffer[2] & 0xFF;
 u.v.tempHigh <<= 8;
 u.v.tempHigh |= buffer[3] & 0xFF;

 u.v.tempLow |= buffer[4] & 0xFF;
 u.v.tempLow <<= 8;
 u.v.tempLow |= buffer[5] & 0xFF;
 u.v.tempLow <<= 8;
 u.v.tempLow |= buffer[6] & 0xFF;
 u.v.tempLow <<= 8;
 u.v.tempLow |= buffer[7] & 0xFF;

 printf("%f", u.sum); 
```

# java - 使用与 xml 适配器一起使用的自定义类型编组空值

> ID：10415075
> 
> 赞同：4
> 
> 时间：2012-05-02T13:47:00.287
> 
> 标签：java, jaxb, jersey

我正在使用带有 XmlType 的 POJO 对象作为我为编组字符串映射而构建的自定义 XML 适配器。但是，我遇到了问题，让我可以正确使用空值。我能够让它工作，但我对它生成的 XML 不满意。

这是我目前正在使用的我想要工作的东西，但正如您在示例 XML 结果中看到的那样，它不包括正确的 xmlns:xsi="http://www.w3.org/2001/XMLSchema -instance" xsi:nil="true" 值

```
@XmlType(name="element")
public class RestMapElements {

  @XmlAttribute(name="name")
  public String key;
  @XmlValue
  public String value;

  public RestMapElements(String key, String value) {
    this.key = key;
    this.value = value;
  }
} 
```

生成的 XML（精简为相关数据）。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
...
    <element-list>
        <item name="activated_date">2012-03-29 11:34:14.323</item>
        <item name="some_null_value"/>
    </element-list>
... 
```

但是，我能够让它与它一起工作，我只是不满意 XML 必须在 item 标记内添加一个额外的“值”标记才能使其工作。（旁注，为什么将它命名为 item 而不是我试图在 XmlType 名称声明中指定的元素？）

```
@XmlType(name="element")
public class RestMapElements {

  @XmlAttribute(name="name")
  public String key;
  @XmlElement(nillable = true)
  public String value;

  public RestMapElements(String key, String value) {
    this.key = key;
    this.value = value;
  }
} 
```

同样，生成的 XML（精简为相关数据）。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
...
<element-list>
    <item name="activated_date"><value>2012-03-29 11:34:14.323</value></item>
    <item name="some_null_value"><value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/></item>
</element-list>
... 
```

真的，我可以使用第二个，因为它可以解决我的问题。我只是想将其用作学习经验，以查看使用注释的 JAXB 是否允许将其弯曲到我正在寻找的内容，而不必在项目标签下添加额外的值标签，这样我就可以支持空值. 现在，当它在第一个示例中解组时，我最终得到的是空字符串而不是 null。在第二个示例中，我得到了我期望的空值。

仅供参考：我目前正在使用 Jersey 1.11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:00:26.397

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以使用 MOXy 的`@XmlNullPolicy`扩展来映射此用例：

**休息地图元素**

```
package forum10415075;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.*;

@XmlType(name="element")
public class RestMapElements {

  @XmlAttribute(name="name")
  public String key;

  @XmlValue
  @XmlNullPolicy(nullRepresentationForXml=XmlMarshalNullRepresentation.XSI_NIL)
  public String value;

} 
```

**根**

```
package forum10415075;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Root {

    @XmlElementWrapper(name="element-list")
    @XmlElement(name="item")
    public List<RestMapElements> items = new ArrayList<RestMapElements>();

} 
```

**jaxb.properties**

要将 MOXy 用作您的 JAXB (JSR-222) 提供程序，您需要添加一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其内容如下：

```
javax.xml.bind.context.factory = org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum10415075;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum10415075/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <element-list>
      <item name="activated_date">2012-03-29 11:34:14.323</item>
      <item name="some_null_value" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
   </element-list>
</root> 
```

**笔记**

如果您在 GlassFish 3.1.2 中使用 Jersey，则 MOXy 或 WebLogic 12.1.1 已包含：

*   [http://blog.bdoughan.com/2012/02/glassfish-312-is-full-of-moxy.html](http://blog.bdoughan.com/2012/02/glassfish-312-is-full-of-moxy.html)
*   [http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:37:27.690

我看到了你的问题。只有通过将您（或其他）中的相应条目设置为 ，才能生成带有的`item`元素，从而丢失属性。我认为没有太多的解决方案。`xsi:nil="true"``RestMapElements``ArrayList``null`

一种选择是从您的帖子开始使用您的编组，并使用以下内容解组：

如果你正在做这样的事情：

```
@XmlElementWrapper(name="element-list")
@XmlElement(name="item")
public ArrayList<RestMapElements> list; 
```

您可以使用 a`XmlAdapter`检查是否`value`为空`String`并将其设置`null`为：

```
@XmlElementWrapper(name="element-list")
@XmlElement(name="item")
@XmlJavaTypeAdapter(ItemAdapter.class)
public ArrayList<RestMapElements> list; 
```

并且`ItemAdapter`：

```
public class ItemAdapter extends XmlAdapter<RestMapElements, RestMapElements> {

    @Override
    public RestMapElements unmarshal(RestMapElements v) throws Exception {
        if (v.value.equals("")) v.value = null;
        return v;
    }
} 
```

虽然这仍然是不雅的恕我直言。如果你想生成正确的`xsi:nil="true"` `item`元素，这显然不是你想要的。

祝你好运。

# php - Android：难以置信的 StringIndexOutOfBoundsException

> ID：10415078
> 
> 赞同：0
> 
> 时间：2012-05-02T13:47:09.810
> 
> 标签：php, android, string, exception

我向网络服务器上的 php 脚本发送了一个获取请求，该脚本返回 3 行文本。我像这样处理来自服务器的响应：

```
BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent())); 
```

比我解析这样的行：

```
line = "";
while ((line = rd.readLine()) != null) {
    String a = line.substring(0, line.indexOf('_'));
    String b = line.substring(line.indexOf('_') + 1);
} 
```

这不断抛出 StringIndexOutOfBounds 异常，我真的不明白为什么。我已经在我的项目的其他地方使用了类似的方法（使用不同的 PHP 脚本返回不同的文本行和不同的解析）并且它工作得非常好。当我记录返回的行以查看它们是否从服务器正确返回时，它们与 PHP 脚本发送的行相同。

这是有趣的部分。当我变得非常绝望时，我尝试使用以下方法测量线：

```
int l = line.length(); 
```

这用我的线路返回了 11。比，当我只是尝试使用以下方式显示某些内容时：

```
line.charAt(5); 
```

它抛出了 StringIndexOutOfBoundsException: 5。我真的不知道这有什么问题。有人有想法吗？谢谢！

编辑

这是 PHP 脚本

```
$query = mysql_query("SELECT * FROM users");
while($row = mysql_fetch_array($query)) {
    print("{$row['id']}\n{$row['number']}\n");
} 
```

这是我的java代码：

```
while ((line = rd.readLine()) != null) {
    Log.v("connection - user list", line); //This line logs: 1_485963
    //But this doesent work
    String a = line.substring(0, line.indexOf('_'));
    String b = line.substring(line.indexOf('_') + 1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:54:28.723

最有可能`indexOf`返回 -1 并`line.substring(0, -1);`抛出`StringIndexOutOfBoundsException`

**编辑**
可能是您可能正在逐行阅读不可见的字符/`1_485963`行吗？

假设输入是这样的：

```
1_485963\n\n 
```

然后在日志中你只会看到`1_485963`但第二次循环运行它会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:12:23.683

首先尝试调试。或者试试这个

我很确定 line.indexOf('_') 在给定的字符串中不可用

1）首先打印字符串的日志并检查'_'字符是否可用。

试试这个以避免 StringIndexOutOfBoundsException

```
while ((line = rd.readLine()) != null) {
if (line.indexOf('_') != -1) {
   String a = line.substring(0, line.indexOf('_'));
   String b = line.substring(line.indexOf('_') + 1);
    }else{
   // means that index is not found
   }
 } 
```

最后你告诉字符串 len = 11 并且在位置 5 打印 char 时抛出错误。

检查你在打印字符串的 len 和在位置 5 打印 char 之间做了什么。

最后，有时您可能会从缓冲区输入流中获得垃圾字符。因为它是从 n/w 传过来的。也检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:43:40.413

也许我老了，瞎了，但这是怎么回事

```
 print("{$row['id']}\n{$row['number']}\n"); 
```

生产

```
1_485963 
```

一定

```
print("{$row['id']}_{$row['number']}\n"); 
```

是你需要的。如果那不是有效的 PHP，我深表歉意，因为它的语法一直拒绝留在我的脑海中。

# java - 全称

> ID：10415087
> 
> 赞同：0
> 
> 时间：2012-05-02T13:47:26.330
> 
> 标签：java, eclipse, abstract-syntax-tree, qualified-name

我需要提取 Java 源代码中存在的所有完全限定名称。谁能指出我正确的方向？我必须将所有限定名称转换为导入说明。更多细节：做 ctl+shift+M 做的事情。并且它必须对用户完全抽象，并且在每次修改源代码后都会询问功能。java 源代码文件是由其他生成器（元语言）生成的，我无法修改生成器。我不能使用 shift+ctrl+M 因为它必须是自动的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:52:29.253

也许你可以使用[JavaCC](http://javacc.java.net/)。已经有一个 Java[语法](http://java.net/projects/javacc/downloads/directory/contrib/grammars)可用于检测源中所需的所有 FQN。

# ruby-on-rails - I18N 键，用于在模块中分组的导轨模型

> ID：10415088
> 
> 赞同：16
> 
> 时间：2012-05-02T13:47:30.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, internationalization

我有几个模型分组在这样的模块中：

```
 #/app/models/blobs/small_text.rb
  class Blobs::SmallText < ActiveRecord::Base

        #.. class implementation

  end 
```

我想将人类班级名称设置为法语中的“Texte Court”：

```
 I18n.locale = "fr"
  Blobs::SmallText.model_name.human # should return "Texte Court" 
```

我在类定义的模块部分以及如何将其包含在语言环境文件中遇到问题。我在我的语言环境文件中尝试了几种组合，但都不起作用。以下是我尝试过的一些组合：

* * *

```
 # /config/locales/models/blobs.fr.yml

  # first attempt (does not work)
  fr:
    activerecord:
      models:
         blobs_small_text: "Texte Court" 
```

* * *

```
 # /config/locales/models/blobs.fr.yml   
  # second attempt(does not work) 
  fr:
    activerecord:
      models:
         blobs:
           small_text: "Texte Court" 
```

* * *

有任何想法吗？感谢：D。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-02T13:57:09.577

行。我觉得我找到了答案。当您不知道类密钥时，只需在 rails 控制台中运行以下指令：

```
 Blobs::SmallText.model_name.i18n_key  # this returns :"blobs/small_text" 
```

现在我可以相应地更新我的语言环境文件：

```
# /config/locales/models/blobs.fr.yml
# last attempt (it works)
fr:
  activerecord:
    models:
       blobs/small_text: "Texte Court" 
```

所以现在它可以工作了。但是，仅仅是我还是这个命名约定不尊重 Ruby on Rails 中的一般命名约定？

# hibernate - org.springframework.orm.hibernate4 替代 spring hibernateTemplate？

> ID：10415089
> 
> 赞同：1
> 
> 时间：2012-05-02T13:47:30.677
> 
> 标签：hibernate

在 Hibernate3 我正在使用

```
String[] paramNames = {PARAMS};
Object[] values = { VALUES};
Collection coll= this.getHibernateTemplate().findByNamedQueryAndNamedParam(Person.QUERY_STATUS, paramNames, values); 
```

但是现在我必须使用hibernate 4.1.1。但是org.springframework.orm.hibernate4不支持hibernateTemplate。现在该怎么做？请指教..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:53:13.660

在 SPring 3.1 和 Hibernate 4 中不支持 HibernateTemplate，因此您应该使用本机 Hibernate API。

> 不再推荐使用 HibernateTemplate（大约自 hibernate 3.0.1 发布以来）没有更多的附加值，因此对于 hibernate 4 将不再存在。只需使用普通的 SessionFactory 并使用 getCurrentSession 方法获取当前的事务会话（不要使用 openSession ！！！），你很高兴......

# sql - MS Access SQL，对几个字段求和并比较值

> ID：10415094
> 
> 赞同：1
> 
> 时间：2012-05-02T13:47:56.563
> 
> 标签：sql, ms-access

我的表叫做“table1”，如下所示：

面积 | 所有者 | 编号 | 平均的

1200 | 美联储_G | 998 | 1400

1220 | 隐私 | 1001 | 1600

1220 | 本地_G | 1001 | 1430

1220 | Prov_G | 1001 | 1560

1220 | 隐私 | 1674 | 1845年

1450 | Prov_G | 1874 | 1982年

理想情况下，我想做的是将平均列中的几行相加，如果：1.它们具有相同的numberid（假设三行都有一个numberid=1000，那么它们的平均值将加在一起）2.Area=1220

然后将其附加到现有表中，同时将 Owner 字段设置为“ALL”。

我刚开始使用 Access，所以我不确定该怎么做，这是我可怕的尝试：

```
SELECT ind.Area, ind.Owner, ind.numberid, 
(SELECT SUM([Average]) FROM   [table1] 
WHERE [numberid]=ind.numberid) AS Average
FROM [table1] AS ind
WHERE (((ind.numberid)>="1000" And (ind.numberid)<"10000") AND ((ind.Area)="1220")) 
```

谁能指导我完成我应该做什么？我不习惯 sql 语法。

我尝试使用“ind”作为比较变量。

到目前为止，它给了我列名但没有输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:08:24.983

我仍然不确定我是否明白你想要什么。因此，我将为您提供此查询，并让您告诉我们结果是否是您想要的，或者它与您想要的有什么不同。

```
SELECT
    t.Area,
    'ALL' AS Owner,
    t.Numberid,
    Sum(t.Average) AS SumOfAverage
FROM table1 AS t
GROUP BY t.Area, 'ALL', t.Numberid; 
```

使用您的示例数据，该查询为我提供了这个结果集。

```
Area Owner Numberid SumOfAverage
1200 ALL        998         1400
1220 ALL       1001         4590
1220 ALL       1674         1845
1450 ALL       1874         1982 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:54:51.123

如果您改进问题的措辞，也许我可以（也许）给您一个更好的答案。

但是，对于 <>，您需要选择`average`列和[分组依据](http://www.w3schools.com/sql/sql_groupby.asp) `numberid`和`Area`列。由于 Owner 字段是 <> 我想在这个查询中我写的并不重要：

```
SELECT numberid, area, SUM(average)
FROM table1
WHERE owner = 'your-desired-owner-equal-to-all'
GROUP BY numberid, area
ORDER BY numberid, area 
```

# c++ - MacPorts Clang 3.1 缺少标准库安装？

> ID：10415095
> 
> 赞同：5
> 
> 时间：2012-05-02T13:47:57.850
> 
> 标签：c++, c++11, clang, macports, c++-standard-library

我正在尝试使用 MacPorts 安装的 clang 在 C++11 中初始化列表功能。编译这个简单的代码时：

```
#include <vector>

int main()
{
    std::vector<int> a {1, 3, 5};
    return 0;
} 
```

我收到了这个错误：

```
stephen-chus-mac-pro:~ stephenchu$ clang -std=c++0x -c text.cxx -I/opt/local/include -v
clang version 3.1 (trunk 154872)
Target: x86_64-apple-darwin10.8.0
Thread model: posix
 "/opt/local/libexec/llvm-3.1/bin/clang" -cc1 -triple x86_64-apple-macosx10.6.0 -emit-obj -mrelax-all -disable-free -main-file-name text.cxx -pic-level 2 -mdisable-fp-elim -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 127.2 -v -coverage-file text.o -resource-dir /opt/local/libexec/llvm-3.1/bin/../lib/clang/3.1 -I /opt/local/include -fmodule-cache-path /var/folders/UL/ULMxdJJtEQuI+WuToNAFpk+++TI/-Tmp-/clang-module-cache -std=c++0x -fdeprecated-macro -fdebug-compilation-dir /Users/stephenchu -ferror-limit 19 -fmessage-length 80 -stack-protector 1 -mstackrealign -fblocks -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o text.o -x c++ text.cxx
clang -cc1 version 3.1 based upon LLVM 3.1svn default target x86_64-apple-darwin10.8.0
#include "..." search starts here:
#include <...> search starts here:
 /opt/local/include
 /usr/include/c++/4.2.1
 /usr/include/c++/4.2.1/i686-apple-darwin10/x86_64
 /usr/include/c++/4.2.1/backward
 /usr/include/c++/4.0.0
 /usr/include/c++/4.0.0/i686-apple-darwin8
 /usr/include/c++/4.0.0/backward
 /usr/local/include
 /opt/local/libexec/llvm-3.1/bin/../lib/clang/3.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
text.cxx:5:19: error: no matching constructor for initialization of
      'std::vector<int>'
        std::vector<int> a {1, 3, 5};
                         ^ ~~~~~~~~~
/usr/include/c++/4.2.1/bits/stl_vector.h:255:9: note: candidate constructor
      [with _InputIterator = int] not viable: no known conversion from 'int' to
      'const allocator_type' (aka 'const std::allocator<int>') for 3rd argument;
        vector(_InputIterator __first, _InputIterator __last,
        ^
/usr/include/c++/4.2.1/bits/stl_vector.h:213:7: note: candidate constructor not
      viable: no known conversion from 'int' to 'const allocator_type' (aka
      'const std::allocator<int>') for 3rd argument;
      vector(size_type __n, const value_type& __value = value_type(),
      ^
/usr/include/c++/4.2.1/bits/stl_vector.h:201:7: note: candidate constructor not
      viable: requires at most 1 argument, but 3 were provided
      vector(const allocator_type& __a = allocator_type())
      ^
/usr/include/c++/4.2.1/bits/stl_vector.h:231:7: note: candidate constructor not
      viable: requires 1 argument, but 3 were provided
      vector(const vector& __x)
      ^
1 error generated. 
```

它似乎包括来自系统 gcc (4.2) 的标头。而且我找不到任何特定于铿锵声的标题。我应该从 MacPorts 安装什么软件包才能使其正常工作？还是我需要安装和构建 clang 的 libc++？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:43:27.460

首先，您需要使用“-stdlib=libc++”设置标准库

那么您可能需要更新标题。最新的 libc++ 头文件将适用于随 OS X 10.7 及更高版本安装的 libc++ 库。

我不知道 macports 有 libc++，但由于您只需要头文件，您应该能够简单地下载它们并将它们放入与安装 clang 的位置相邻的包含目录中。

# python - 在使用 python-wnck 生成和移动之后，窗口位置有点偏离

> ID：10415097
> 
> 赞同：2
> 
> 时间：2012-05-02T13:48:17.260
> 
> 标签：python, terminal, pygtk, wnck

我制作了这个 Python 脚本：

```
from gi.repository import Gtk, Gdk, GdkX11, Wnck
from subprocess import PIPE, Popen

class WindowError(Exception):
    pass

def undecorate(aWindow):
    gdkdis = GdkX11.X11Display.get_default()
    gdkwin = GdkX11.X11Window.foreign_new_for_display(gdkdis, aWindow.get_xid())
    gdkwin.set_decorations(Gdk.WMDecoration.BORDER)

def dropdown(aTitle):
    Gtk.main_iteration()

    screen = Wnck.Screen.get_default()
    screen.force_update()

    for window in screen.get_windows():
        if window.get_name() == aTitle:
            timestamp = Gtk.get_current_event_time()

            undecorate(window)

            window.set_skip_pager(True)
            window.set_skip_tasklist(True)
            window.stick()
            window.pin()

            window.maximize_horizontally()
            window.set_geometry(Wnck.WindowGravity.STATIC, 
                                Wnck.WindowMoveResizeMask.Y, 
                                0, 0, -1, -1)

            window.activate(timestamp)
            window.unminimize(timestamp)

            break
    else:
        raise WindowError('Window with title "{}" not found'.format(aTitle))

def getActive():
    Gtk.main_iteration()

    screen = Wnck.Screen.get_default()
    screen.force_update()

    return screen.get_active_window()

def main():
    active = getActive()

    if active.get_name() == 'Dropdown Terminal':
        if active.is_minimized():
            dropdown('Dropdown Terminal')
        else:
            active.minimize()
            return
    else:
        try:
            dropdown('Dropdown Terminal')
        except WindowError:
            Popen(['roxterm', '--profile=Dropdown'], stdout=PIPE, stderr=PIPE)
            dropdown('Dropdown Terminal')

if __name__ == "__main__":
    main() 
```

它的作用是让 roxterm 表现得像 Guake。我遇到的唯一问题是当我打开一个新的 roxterm 实例并将窗口移动到 (0,0) 之后，窗口的最终 y 位置向下几个可见像素。我使用 wnck 库中的 set_geometry 函数来执行此操作。关于如何解决它的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:38:49.073

哎呀，忘了提到我解决了这个问题。我更改了代码中的一些内容，但我认为使用 GdkWindow 重新定位而不是 Wnck 可以解决定位问题。此版本保持下拉终端打开，直到再次按下热键。顺便说一句，我通过在 Gnome 的键盘首选项中添加自定义热键将热键映射到此脚本。

```
from gi.repository import Gtk, Gdk, GdkX11, Wnck
from subprocess import PIPE, Popen

class WindowError(Exception):
    pass

def getScreen():
    Gtk.main_iteration()

    screen = Wnck.Screen.get_default()
    screen.force_update()

    return screen

def getGDKWindow(aWindow):
    gdkdisplay = GdkX11.X11Display.get_default()
    gdkwindow  = GdkX11.X11Window.foreign_new_for_display(gdkdisplay, aWindow.get_xid())

    return gdkwindow

def getWindow(aTitle):
    screen = getScreen()
    active = screen.get_active_window()

    if active.get_name() == aTitle:
        return active

    for window in screen.get_windows():
        if window.get_name() == aTitle:
            return window

    return None

def adjust(aWindow):
    gdkwindow = getGDKWindow(aWindow)

    gdkwindow.set_decorations(Gdk.WMDecoration.BORDER)
    gdkwindow.move(0,0)

    aWindow.set_skip_pager(True)
    aWindow.set_skip_tasklist(True)

    aWindow.maximize_horizontally()

    aWindow.stick()
    aWindow.make_above()

def onWindowOpen(aScreen, aWindow, aData):
    if aWindow.get_name() == aData:
        adjust(aWindow)

        Gtk.main_quit()

def main():
    timestamp = Gtk.get_current_event_time()
    window      = getWindow('Dropdown Terminal')

    if window:
        if window.is_minimized():
            window.activate(timestamp)
            window.unminimize(timestamp)
        else:
            window.minimize()
    else:
        Popen(['roxterm', '--separate', '--profile=Dropdown', '--directory=.'])

        getScreen().connect('window-opened', onWindowOpen, 'Dropdown Terminal')

        Gtk.main()

if __name__ == "__main__":
    main() 
```

# git - 想要从“git diff”中排除文件

> ID：10415100
> 
> 赞同：323
> 
> 时间：2012-05-02T13:48:34.857
> 
> 标签：git, diff, git-diff

我正在尝试`db/irrelevant.php`从 Git 差异中排除文件 ()。我尝试将一个文件放在使用该行`db`调用的子目录中， 并且我还尝试创建一个名为 contains 的文件。`.gitattributes``irrelevant.php -diff``.git/info/attributes``db/irrelevant.php`

在所有情况下，该`db/irrelevant.php`文件都作为 Git 二进制补丁包含在 diff 中。我想要的是 diff 命令忽略对该文件的更改。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：444
> 
> 时间：2016-10-09T12:40:04.857

Omg，驱动程序和 awk 排除一个糟糕的文件？从[git 1.9 开始，](https://stackoverflow.com/a/21079437/281545)您可以：

```
git diff -- . ':(exclude)db/irrelevant.php' ':(exclude)db/irrelevant2.php' 
```

（在 Winodws 上，用`'`双引号替换单引号`"`。）

啊，优雅！请参阅引用的答案，有关详细信息，请参阅@torek 的[答案](https://stackoverflow.com/a/39937070/281545)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-05-02T20:43:41.890

您可以使用 no op 命令设置自定义差异驱动程序，并将其分配给那些应该被忽略的文件。

**使用此命令**创建存储库特定的差异驱动程序****

 **```
git config diff.nodiff.command /bin/true 
```

或所有您的回购与`--global`.

（如果`/bin/true`MacOS 中不存在，则可以使用`/usr/bin/true`或`echo`）。

**然后，将新的差异驱动程序分配给您希望在文件中忽略**的那些`.git/info/attributes`文件。

```
irrelevant.php    diff=nodiff 
```

如果这个状态应该与其他开发人员共享，您可以使用`.gitattributes`而不是与您的同行`.git/info/attributes`共享`git config`命令（通过文档文件或其他东西）。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2018-01-15T08:30:09.477

这种方法比接受的答案短。

```
git diff 987200fbfb 878cee40ba -- ':!*.cs' 
```

有关不同包含/排除可能性的更多信息，请阅读[其他帖子](https://stackoverflow.com/questions/5685007/making-git-log-ignore-changes-for-certain-paths/21079437#21079437)

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2019-11-13T21:07:23.253

## 最简单的答案

```
git diff ':!db/irrelevant.php' 
```

就`':!<path>'`在您的 diff 命令之后。diff 命令可以随心所欲地复杂化，如果需要，您可以使用通配符`*.min.js`或添加多个排除项（用空格分隔引用的块）。

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2012-05-02T18:00:27.030

您还可以使用[patchutils程序集合的](http://cyberelk.net/tim/software/patchutils/)[filterdiff](http://www.linuxmanpages.com/man1/filterdiff.1.php)程序来排除差异的某些部分。例如：

```
git diff | filterdiff -p 1 -x db/irrelevant.php 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2018-12-20T17:30:58.873

[KurzedMetal](https://stackoverflow.com/users/236871/kurzedmetal)对我需要做的事情给出了非常好的回答，即能够看到文件已更改，但不能生成差异，在我的情况下，差异可能很大。

但我的一位同事提出了更简单且对我有用的方法：

`.gitattributes`在要忽略的文件所在的目录中添加文件，`git diff`内容如下：

`file-not-to-diff.bin -diff`

这仍然可以让`git status`“查看”文件是否更改。`git diff`还将“看到”文件已更改，但不会生成`diff`.

`.bin`示例中文件的扩展名是故意的。我确实意识到这是 git 对二进制文件的默认行为，它不需要对`.gitattributes`. 但在我的情况下，这些文件被 git 和“文件”实用程序识别为文本文件，这就成功了。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2012-05-02T20:45:38.803

这种单线解决方案不需要其他实用程序/下载：

```
git diff `git status -s |grep -v ^\ D |grep -v file/to/exclude.txt |cut -b4-` 
```

`file/to/exclude.txt`当然，您要排除的文件的名称在哪里。

编辑：[感谢 ksenzee](https://stackoverflow.com/users/281622/ksenzee)修复了破坏差异的已删除文件。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2019-09-11T15:56:35.187

## 相对于git根目录

`git diff`接受可选的排除

```
git diff -- ":(exclude)thingToExclude" 
```

## 您可能想要添加一些通配符

```
git diff -- ":(exclude)*/thingToExclude/*" 
```

## 针对特定文件类型

```
git diff -- ":(exclude)*/$1/*.png" 
```

### 或者为您的 dotfiles 放置一个小脚本

### 比如`.bash_profile`或`.zshrc`

```
gde() {
    # git diff exclude files or folders 
    # usage: 
    # gde fileOrFolderNameToExclude
    git diff -- ":(exclude)*/$1/*"
} 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-07-26T00:42:33.133

在现有答案的基础上，如果您想排除文件模式，无论它在目录中的什么位置，请使用相应的[git pathspec](https://git-scm.com/docs/gitglossary#Documentation/gitglossary.txt-aiddefpathspecapathspec)值`**`：

```
git diff -- ':!**/yarn.lock' 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-16T14:27:01.470

这很简单，您可以使用标准的 unix 命令排除您想要的内容，即使在 windows 环境下，这些命令也可以在 git bash 下使用。下面的示例显示了如何排除 pom.xml 文件的差异，首先检查 diff to master 仅用于文件名，然后使用 'grep -v' 排除您不想要的文件，然后再次运行 diff to master 并使用准备好的列表：

```
git diff master `git diff --name-only master | grep -v pom.xml` 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-05-28T14:48:29.837

我执行以下操作：

```
git add *pattern_to_exclude*
git diff
git reset HEAD . 
```

我知道这不是一个优雅的解决方案，有时无法使用（例如，如果您已经准备好东西），但它可以解决问题，而无需输入复杂的命令

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-09-11T03:08:57.873

类似于[Ben Roux 的](https://stackoverflow.com/users/779919/ben-roux)解决方案，但无论如何都要分享：

```
git status --porcelain | grep -v $PATTERN_TO_EXCLUDE | awk '{print $2}' | xargs git diff 
```

或者，如果更改已在本地提交：

```
git diff --name-only origin/master | grep -v $PATTERN_TO_EXCLUDE | xargs git diff origin/master 
```

例子：

```
git status --porcelain | grep -v docs | awk '{print $2}' | xargs git diff origin/master

git diff --name-only origin/master | grep -v docs | xargs git diff origin/master 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-02-06T20:41:01.997

如果您只想通过目视检查差异来执行此操作，则可视差异工具（如[Meld](http://meldmerge.org/)）将让您使用易于记忆的简短命令完成此操作。

首先，如果您还没有设置差异工具。

```
$ git config --global diff.tool = meld 
```

然后，您可以运行目录差异。

```
$ git difftool --dir-diff 
```

您将能够在 Meld（或您选择的工具）中浏览差异（按文件）。只需不要打开您要忽略的文件。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-06-17T12:58:11.357

```
git diff remote/master..master --name-only -- ':!README.rst' 
```

给我（git 版本 2.11.0）

```
fatal: There is nothing to exclude from by :(exclude) patterns.
Perhaps you forgot to add either ':/' or '.' ? 
```

```
git diff remote/master..master --name-only -- './*' ':!README.rst' 
```

工作得很好，来源：[https ://stackoverflow.com/a/30084612/5155484](https://stackoverflow.com/a/30084612/5155484)**

# c# - 如何为不同的角色使用通用母版页？

> ID：10415103
> 
> 赞同：3
> 
> 时间：2012-05-02T13:48:46.043
> 
> 标签：c#, asp.net, master-pages

我想将 common`master-page`用于不同的角色，我只想根据角色设置不同的主题和菜单项，有人可以指导我如何在同一个母版页的会员代码中使用吗？

对于我当前的代码，我从为不同角色设置不同母版页的 codeplex 下载了会员代码，但是我看到当我必须为所有要根据角色访问的角色创建一些通用页面时，我必须制作页面每个角色文件夹中的页面，并且必须根据角色将其设置为母版页菜单，所以我想为所有人使用一个通用母版页....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:54:00.913

您可以在该方法期间以编程方式更改母版页`OnPreInit`：

```
protected override void OnPreInit(EventArgs e)
{
    base.OnPreInit(e);    

    if (Roles.IsUserInRole("Admins"))
    {         
        Page.MasterPageFile = "AdminDefault.master";
        return;
    }

    Page.MasterPageFile = "Default.master";
} 
```

如果此功能将被多个或更多页面使用，我会考虑将其放在页面可以继承的基类中。

# wcf - ProcessModel 是否影响 WCF 窗口服务

> ID：10415104
> 
> 赞同：0
> 
> 时间：2012-05-02T13:48:49.147
> 
> 标签：wcf, machine.config

这可能是一个愚蠢的问题，因为 ProcessModel 仅用于 IIS（如 MSDN 所述），但是，在我的负载测试中，一个 BizTalk 应用程序调用 Windows 服务托管 WCF，我将 processModel 从 autoConfig 更改为 false，并设置 minWorkThreads和 maxWorkerThreads。性能神奇地提高了... google了一下还是不明白是什么原因？有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:50:31.257

是的，它确实。由于 WCF 服务在通过 IIS 通过 HTTP/HTTPS 公开服务时使用 ASP.NET ThreadPool，因此它由 processModel 管理，就像常规 ASP.NET 请求一样。

您可以从此处获取此行为的详细说明：

[http://www.scottmillersnotes.com/?p=167](http://www.scottmillersnotes.com/?p=167)

但是，WCF 3.5 的线程池管理中存在一个错误，导致 WCF 服务无法扩展超出某个点。在 WCF 4.0 中，该错误已得到修复。您可以阅读本文的详细故事以及我与 Microsoft WCF 团队的交流以了解详细信息：

[http://omaralzabir.com/tweaking-wcf-to-build-highly-scalable-async-rest-api/](http://omaralzabir.com/tweaking-wcf-to-build-highly-scalable-async-rest-api/)

有帮助吗？

# vb6 - 如何在 Visual Basic 6.0 中读取 Excel 文件(97-03)

> ID：10415105
> 
> 赞同：6
> 
> 时间：2012-05-02T13:49:00.047
> 
> 标签：vb6

谁能告诉我如何在 Visual Basic 6.0 中读取 Excel 文件并将所有值导入到列表视图或数据网格视图中，想要使用一种简单有效的技术来实现这一点。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T13:54:26.817

这应该将数据从 Excel 文件导入 ListView：

```
 Dim ExcelObj As Object
    Dim ExcelBook As Object
    Dim ExcelSheet As Object
    Dim i As Integer

    Set ExcelObj = CreateObject("Excel.Application")
    Set ExcelSheet = CreateObject("Excel.Sheet")

    ExcelObj.WorkBooks.Open App.Path & "\ExcelFile.xls"

    Set ExcelBook = ExcelObj.WorkBooks(1)
    Set ExcelSheet = ExcelBook.WorkSheets(1)

    Dim l As ListItem
    lvwList.ListItems.Clear
    With ExcelSheet
    i = 1
    Do Until .cells(i, 1) & "" = ""
        Set l = lvwList.ListItems.Add(, , .cells(i, 1))
        l.SubItems(1) = .cells(i, 2)
        l.SubItems(2) = .cells(i, 3)
        l.SubItems(3) = .cells(i, 4)
        i = i + 1
    Loop

    End With

    ExcelObj.WorkBooks.Close

    Set ExcelSheet = Nothing
    Set ExcelBook = Nothing
    Set ExcelObj = Nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:05:42.110

我更有可能为此使用某种网格控件而不是 ListView，但是...

由于您只是在没有元数据（格式化）的情况下引入值，您可以使用 Jet 的 Excel IISAM 之一来执行此操作，它甚至可以在未安装 Excel 的机器上工作！

```
Dim SheetName As String
Dim RS As ADODB.Recordset
Dim LI As ListItem
Dim I As Integer

'Look up 1st Worksheet (or just hardcode its Name).
'
'Notes:
'  o Can use Excel 8.0 or Excel 5.0 to read most Excel 7.0/97
'    Workbooks, but there is no IISAM specifically for Excel 7.0.
'  o Use HDR=Yes if your Worksheet has a header row.
With CreateObject("ADOX.Catalog")
    .ActiveConnection = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source='" _
                      & App.Path & "\sample.xls';" _
                      & "Extended Properties='Excel 5.0;HDR=No'"
    SheetName = .Tables(0).Name
    Set RS = New ADODB.Recordset
    Set RS.ActiveConnection = .ActiveConnection
End With
'The "Table" name can be a range too, e.g. [Sheet1$A1C7]
With RS
    .Open "[" & SheetName & "]", _
          , _
          adOpenForwardOnly, _
          adLockReadOnly, _
          adCmdTable
    ListView.ListItems.Clear
    ListView.View = lvwReport
    For I = 0 To .Fields.Count - 1
        ListView.ColumnHeaders.Add , , .Fields(I).Name
    Next
    Do Until .EOF
        Set LI = ListView.ListItems.Add(, , CStr(.Fields(0).Value))
        For I = 1 To .Fields.Count - 1
            LI.SubItems(I) = CStr(.Fields(I).Value)
        Next
        .MoveNext
    Loop
    .Close
End With 
```

# php - 获取表单字段的值并保存在数据库中

> ID：10415109
> 
> 赞同：-5
> 
> 时间：2012-05-02T13:49:16.710
> 
> 标签：php

我有一个表单，其中我使用二维数组作为字段名称。字段名称如下

我的表格[消息][]

我的表格[名称][]

我的表格[添加][]

这意味着有三个数组。每个数组里面都有数组。当我在输入值并提交它之后 var_dump 我的表单时。我得到了下面的二维数组结构。

```
array
  ''message'' => 
    array
      0 => string 'adnan' (length=5)
      1 => string 'khan' (length=4)
      2 => string 'salman' (length=6)
  ''name'' => 
    array
      0 => string 'khan' (length=4)
      1 => string 'kamran' (length=6)
      2 => string 'khan' (length=4)
  ''add'' => 
    array
      0 => string 'asad' (length=4)
      1 => string 'khan' (length=4)
      2 => string 'abrar' (length=5) 
```

正如您所看到的关联数组。我想将消息、名称和添加的值存储在一个数据库表中，该表具有三个字段来存储消息、名称和添加字段的值，方法是使用一些循环（如 foreach）在单个查询中。当我使用此代码时

```
foreach($_REQUEST['myform'] as $val)
 foreach($val as $v)

  {
    echo $v;
  } 
```

我得到了数组的所有值。但我想我无法将它保存到数据库表中

因为所有的值都在变量 $v 中。如何将消息存储在消息字段中，名称字段中的名称以及添加到数据库表中的添加字段中。

请指教。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:04:31.030

循环是最简单的部分。

```
if (isset($_REQUEST['myform']))
{
  foreach($_REQUEST['myform'] as $key=>$value)
  {
    // DO SOMETHING 
  }
} 
```

困难的部分是知道你想做什么。您说将其放入数据库中，但您没有提供有关内容或位置的任何真实信息。只需确保在存储之前仔细转义任何用户输入，或者最好使用准备好的查询。

# objective-c - 保存自定义对象的 NSArray

> ID：10415111
> 
> 赞同：2
> 
> 时间：2012-05-02T13:49:21.613
> 
> 标签：objective-c, ios, inheritance, nskeyedarchiver, nscoding

我创建了 UIImage (UIImageExtra) 的子类，因为我想包含额外的属性和方法。

我有一个包含此自定义类实例的数组。但是，当我保存数组时，UIImageExtra 类中的额外数据似乎没有保存。

UIImageExtra 符合 NSCoding，但没有调用 initWithCoder 或 encodeWithCoder，因为我添加的 NSLog 语句没有打印。

我保存数组的方法如下所示：

```
- (void)saveIllustrations {
if (_illustrations == nil) {
    NSLog(@"Nil array");
    return;
}

[self createDataPath];
//Serialize the data and write to disk
NSString *illustrationsArrayPath = [_docPath stringByAppendingPathComponent:kIllustrationsFile];
NSMutableData *data = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
[archiver encodeObject:_illustrations forKey:kIllustrationDataKey];
[archiver finishEncoding];
[data writeToFile:illustrationsArrayPath atomically: YES];
} 
```

并且 UIImageExtra 具有以下用于保存的委托方法：

```
 #pragma mark - NSCoding

- (void)encodeWithCoder:(NSCoder *)aCoder {
    NSLog(@"Encoding origin data!");
    [super encodeWithCoder:aCoder];
    [aCoder encodeObject:originData forKey:kOriginData];
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:(NSCoder *) aDecoder]) {
        NSLog(@"Decoding origin data");
        self.originData = [aDecoder decodeObjectForKey:kOriginData];
    }
    return self;
} 
```

我首先创建数组的代码如下所示（以防提供任何线索）

```
 for (NSDictionary *illustrationDict in illustrationDicts) {
        NSString *illustrationString = [illustrationDict objectForKey:@"Filename"];
        NSNumber *xCoord = [illustrationDict objectForKey:@"xCoord"];
        NSNumber *yCoord = [illustrationDict objectForKey:@"yCoord"];
        UIImageExtra *illustration = (UIImageExtra *)[UIImage imageNamed:illustrationString];

        //Scale the illustration to size it for different devices
        UIImageExtra *scaledIllustration = [illustration adjustForResolution];
        NSValue *originData = [NSValue valueWithCGPoint:CGPointMake([xCoord intValue], [yCoord intValue])];
        [scaledIllustration setOriginData:originData];
        [self.illustrations addObject:scaledIllustration];
    } 
```

还是我只是想以错误的方式保存这些数据？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:16:52.530

您初始化数组的代码实际上并没有创建 UIImageExtra 子类的实例。

```
UIImageExtra *illustration = (UIImageExtra *)[UIImage imageNamed:illustrationString]; 
```

返回一个 UIImage。铸造它不会做你想要的。

```
UIImageExtra *scaledIllustration = [illustration adjustForResolution]; 
```

仍然只是一个 UIImage *。*

解决此问题的一种直接但冗长的方法是使 UIImageExtra 成为UIImage 的*包装器*。包装器将有一个从 UIImage 初始化的类方法：

```
+ (UIImageExtra)imageExtraWithUIImage:(UIImage *)image; 
```

然后，您要调用的每个 UIImage 方法都必须转发到已包装的 UIImage 实例——还要小心重新包装例如的结果，`-adjustForResolution`以免您再次以未包装的 UIImage 实例结束。

*更复杂的 Objective-C 方法是在 UIImage 上的Category*中添加您想要的功能，然后使用*方法 swizzling*将 NSCoding 方法替换为您的类别实现。棘手的部分（除了所需的 Objective-C 运行时体操）是存储“额外”数据的位置，因为您无法在类别中添加实例变量。[标准的答案是有一个由 UIImage 实例的适当表示（如包含其指针值的 NSValue）作为键的后备字典，但正如您可以想象的那样，簿记会很快变得复杂。]

退一步说，我对新 Cocoa 程序员的建议是：“想一个更简单的方法。如果你想做的事情这么复杂，那就试试别的吧。” 例如，编写一个`ImageValue`具有`-image`方法和`-extraInfo`方法（并实现 NSCoding 等）的简单类，并将其实例存储在数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:52:59.760

初始化后不能将对象添加到 NSArray。使用 NSMutableArray，这可能是问题所在。

# java - 线程池中的线程本地内存泄漏

> ID：10415113
> 
> 赞同：4
> 
> 时间：2012-05-02T13:49:29.770
> 
> 标签：java, tomcat, thread-local, threadpool

我在 Tomcat 中遇到线程本地内存泄漏错误，我正在使用 ThreadPool，但在我的 web 应用程序中没有实现 ThreadLocal。

> 严重：Web 应用程序 [/myWebApp] 创建了一个 ThreadLocal，其键类型为 [org.a pache.http.impl.cookie.DateUtils$DateFormatHolder$1]（值 [org.apache.http.imp l.cookie.DateUtils$DateFormatHolder $1@4c2849]）和类型为 [java.lang.ref.SoftReference] 的值（值 [java.lang.ref.SoftReference@1e67280]），但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。

我不明白为什么我没有实现线程本地错误？我想摆脱这些消息，所以我搜索了网络，在[这里](https://stackoverflow.com/questions/3869026/how-to-clean-up-threadlocals)写到为了清理我需要使用的线程本地：

```
ThreadLocal.remove() 
```

但我没有 ThreadLocal 的实现。如果有人告诉我一个方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:14:22.837

问题出在您的第三方库中。您不能在线程池环境中使用线程本地，除非您在每个请求结束后真正清理它们。

这篇文章解释了这个问题： [http ://blog.maxant.co.uk/pebble/2008/09/23/1222200780000.html](http://blog.maxant.co.uk/pebble/2008/09/23/1222200780000.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-26T10:04:34.827

这是 HttpClient JIRA：[https ://issues.apache.org/jira/browse/HTTPCLIENT-1216](https://issues.apache.org/jira/browse/HTTPCLIENT-1216)

从 4.2.2 版本开始，有一个 clearThreadLocal() 方法，从 4.3 开始，cookie-DateUtils 已被弃用，取而代之的是 org.apache.http.client.utils.DateUtils。

在关闭时调用 DateUtils.clearThreadLocal() 一次是不够的，它只会清除当前线程的 ThreadLocal，因此您需要在该线程上执行解析/格式化日期的 HTTP 请求后调用它。不过，这消除了使用 ThreadLocal 的大部分性能优势。

或者，如果您从您控制的线程（不是由 Tomcat 创建）执行 HTTP 请求，请记住在应用程序关闭时关闭任何线程池/执行程序。

最大的遗憾是 HttpClient 可以很容易地修改为不覆盖 ThreadLocal，然后 ThreadLocal 不会引用 webapp 及其类加载器，避免了我相信的大部分泄漏:(

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:21:31.950

显然，*有些东西*正在创建那个/那些 ThreadLocal 实例。如果它不是您的代码，那么它一定是您正在使用的某个库，或者（不太可能）Tomcat 本身。

我将首先查看可能创建的实例

```
 org.apache.http.impl.cookie.DateUtils$DateFormatHolder$1 
```

（顺便说一句，这是嵌套类中的匿名类`DataUtils`......所以除非发生奇怪的事情，否则`DateUtils.java`文件中将发生创建。）

如果检查源代码没有帮助，请尝试调试 Tomcat 实例并在 ThreadLocal 构造函数上设置断点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T14:23:42.430

ThreadLocal 显然是由您使用的某个框架或库创建的（看看哪个正在使用[HttpClient）](http://hc.apache.org/httpcomponents-client-ga/)，但正如您在日志中看到的那样，该值是一个 SoftReference，它应该可以最大限度地减少内存泄漏。

事实上，您可以在 DateUtils 的[代码](http://hc.apache.org/httpcomponents-client-ga/httpclient/clover/org/apache/http/impl/cookie/DateUtils.html)中看到它正在创建 Threadlocal...

# ruby-on-rails - Builder::XmlMarkup 使用

> ID：10415114
> 
> 赞同：2
> 
> 时间：2012-05-02T13:49:32.237
> 
> 标签：ruby-on-rails, ruby, xml, refactoring

我正在使用 ::Builder::XmlMarkup ，如下所示：

```
 # This is a class method in /lib, run ascynchronously using delayed_job. 
 # Bunch of file io / header stuff, then... 
 books.each do |book|
        xml.Product do
          xml.RecordReference "com.domain-#{book.id}"
          xml.NotificationType book.notification unless book.notification.blank?
          xml.ProductIdentifier do
            xml.ProductIDType "15"
            xml.IDValue book.isbn unless book.isbn.blank?
          end
          book.productcodes.each do |productcode|
            unless productcode.idtype == "15"
              xml.ProductIdentifier do
                xml.ProductIDType productcode.idtype unless productcode.idtype.blank?
                xml.IDValue productcode.idvalue unless productcode.idvalue.blank?
              end
            end
          end
          xml.ProductForm book.format unless book.format.blank?
          xml.ProductFormDetail book.format_detail unless book.format_detail.blank?
          xml.ProductFormDescription book.format_description unless book.format_description.blank? 
```

等等。麻烦的是，它又持续了 250 行。这就是您要构建充满少量元素的 XML 文件的方式吗？它看起来不是很Rubyish。

# html - 如何使列表可点击？

> ID：10415117
> 
> 赞同：0
> 
> 时间：2012-05-02T13:49:37.990
> 
> 标签：html, html-lists

我目前正在研究一个需要作为链接[的纯 CSS 调色板。](http://reversl.net/banner/)我使用无序列表创建了这个调色板，然后将其包装在`<a>`标签中。我怀疑这不是很语义化。实现这一目标的正确方法是什么？

**HTML**

```
<div class="color-palette">
<a href="#">Modern Feminine</a>
<a href="#">
    <ul class="color-chips group">
        <li class="grey">#999999</li>
        <li class="slate">#666666</li>
        <li class="lilac">#99878D</li>
        <li class="blush">#7E4A5C</li>
        <li class="plum">#372129</li>
    </ul><!--.color-chips group-->
</a>
</div><!--.color-palette--> 
```

**CSS**

```
.color-palette {
    width: 280px;
    margin: 0 auto;
    padding: 0;
}

ul.color-chips {
    margin: 0 auto;
    padding: 0;
}

ul.color-chips li {
    float: left;
    margin: 0;
}

ul.color-chips li {
    float: left;
    width: 55px;
    height: 55px;
    text-indent: -9999px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:52:29.833

您不能将列表放在锚点内。

您需要使列表中的每个单独项目成为单独的链接。

```
<ul class="color-chips group">
        <li class="grey"><a href="">#999999</a></li>
        <li class="slate"><a href="">#666666</a></li>
        <li class="lilac"><a href="">#99878D</a></li>
        <li class="blush"><a href="">#7E4A5C</a></li>
        <li class="plum"><a href="">#372129</a></li>
    </ul><!--.color-chips group--> 
```

如果您不需要链接，因为您实际上并没有链接到任何东西（即您正在执行页面上的操作），只需将所有锚点一起删除。附加 Javascript onclick 事件时不需要它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:53:57.083

```
<ul class="color-chips group">
    <li class="grey"><a href="javascript:;">#999999</a></li>
    <li class="slate"><a href="javascript:;">#666666</a></li>
    <li class="lilac"><a href="javascript:;">#99878D</a></li>
    <li class="blush"><a href="javascript:;">#7E4A5C</a></li>
    <li class="plum"><a href="javascript:;">#372129</a></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:56:05.443

点击后您想做什么？触发点击时是否使用 javascript 事件？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T14:20:51.760

由于您已经在使用 JS 处理点击，我认为锚点纯粹是装饰性的。在这种情况下，您可以使用 CSS：

```
.color-chips:hover {
    cursor:pointer;
} 
```

# zend-studio - 如何将“作为 CLI 应用程序运行”添加到 Zend studio 9 运行/调试工具栏？

> ID：10415118
> 
> 赞同：0
> 
> 时间：2012-05-02T13:49:41.317
> 
> 标签：zend-studio

在新工作区中的默认配置下，我在运行/调试工具栏菜单中有“作为 Web 应用程序运行”。

我应该如何配置工作区|项目以将“作为 CLI 应用程序运行”添加到菜单项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:34:43.203

另一种方法是在 zend studio 首选项中的 php 调试配置中启用“启用 CLI 调试”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:40:12.030

只是为了在 mac os x 10.6，zendstudio 9 上提供一些参考

**对于一个项目**

1.  右键单击项目
2.  选择属性
3.  选择php调试
4.  启用项目特定设置
5.  从 php 可执行文件 PHP 5.3.15 (CLI) 或任何适用的选项中选择
6.  选中启用 CLI 调试复选框

**Zend工作室**

1.  进入菜单 Zend Studio
2.  选择首选项
3.  打开 PHP 部分
4.  选择调试子菜单
5.  从 php 可执行文件 PHP 5.3.15 (CLI) 或任何适用的选项中选择
6.  选中启用 CLI 调试复选框

然后您可以右键单击一个 php 文件并作为 PHP CLI 应用程序运行

# reporting-services - 在 CRM 2011 中隐藏 SSRS 参数

> ID：10415119
> 
> 赞同：1
> 
> 时间：2012-05-02T13:49:43.543
> 
> 标签：reporting-services, hide, dynamics-crm-2011

我以不同的方式描述我的问题，我可以使用以下代码打开报告

```
var url="/"+orgname+"/crmreports/viewer/viewer.aspx?action=run&helpID=OppClients.rdl&id=%7bC7D34446-7F90-E111-A8F3-080027EA7FF9%7d&p:nomclient=aziza boulabyar";

window.open(url, "", "height=" + (screen.availHeight * .75)
     + ",width=" + (screen.availWidth * .75)
     + ",toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=0"); 
```

现在我想隐藏报告中的参数，当我添加`&rc:parameters=false`到 url 时，我得到一个错误，如下图所示

有人可以告诉我如何解决这个问题

* * *

下面是日志文件的内容：

```
at ErrorInformation.LogError()
at ErrorInformation..ctor(Exception exception, Uri requestUrl, Boolean logError)
at MainApplication.Application_Error(Object sender, EventArgs eventArguments)
at EventHandler.Invoke(Object sender, EventArgs e)
at HttpApplication.RaiseOnError()
at ApplicationStepManager.ResumeSteps(Exception error)
at HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
at HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr)
at ISAPIRuntime.ProcessRequest(IntPtr ecb, Int32 iWRType)
>MSCRM Error Report:
--------------------------------------------------------------------------------------------------------
Error: Une exception de type 'System.Web.HttpUnhandledException' a été levée.
Error Message: CRM Parameter Filter - Invalid parameter 'rc:parameters=false' in Request.QueryString on page /Manhattan/crmreports/viewer/viewer.aspx
The raw request was 'GET /Manhattan/crmreports/viewer/viewer.aspx?action=run&helpID=OppClients.rdl&id=%7bC7D34446-7F90-E111-A8F3-080027EA7FF9%7d&rc:parameters=false&p:nomclient=aziza%20boulabyar' called from .
Error Details: Une exception de type 'System.Web.HttpUnhandledException' a été levée.
Source File: Not available
Line Number: Not available
Request URL: http://localhost:5555/Manhattan/crmreports/viewer/viewer.aspx?action=run&helpID=OppClients.rdl&id=%7bC7D34446-7F90-E111-A8F3-080027EA7FF9%7d&rc:parameters=false&p:nomclient=aziza%20boulabyar
Stack Trace Info: [InvalidOperationException: CRM Parameter Filter - Invalid parameter 'rc:parameters=false' in Request.QueryString on page /Manhattan/crmreports/viewer/viewer.aspx
The raw request was 'GET /Manhattan/crmreports/viewer/viewer.aspx?action=run&helpID=OppClients.rdl&id=%7bC7D34446-7F90-E111-A8F3-080027EA7FF9%7d&rc:parameters=false&p:nomclient=aziza%20boulabyar' called from .]
à Microsoft.Crm.Application.ParameterFilter.ValidateParameter(HttpRequest request, ArrayList parameterCollection, String key, String value, ParameterSources source, EntityType pageEntityType, FormAdditionalAllowedParameters additionalAllowedParameters)
à Microsoft.Crm.Application.ParameterFilter.ValidateParameters(Page page, EntityType pageEntityType, Boolean alwaysEnableParameterChecking, FormAdditionalAllowedParameters formAdditionalAllowedParametersTemp)
à Microsoft.Crm.Application.ParameterFilter.ValidateParameters(Page page, EntityType pageEntityType, Boolean alwaysEnableParameterChecking)
à Microsoft.Crm.Application.Controls.AppPage.ValidatePageParameters()
à Microsoft.Crm.Application.Controls.AppPage.OnInit(EventArgs e)
à System.Web.UI.Control.InitRecursive(Control namingContainer)
à System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
[HttpUnhandledException: Une exception de type 'System.Web.HttpUnhandledException' a été levée.]
à System.Web.UI.Page.HandleError(Exception e)
à System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
à System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
à System.Web.UI.Page.ProcessRequest()
à System.Web.UI.Page.ProcessRequest(HttpContext context)
à System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
à System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:09:43.853

![工作样本](../Images/5eb8a0d1481d6fa9cee68dddfd4d3b1a.png)

我的解决方案涉及几个步骤，大部分不受支持 - 但它有效。

1.  将现有 C:\Program Files\Microsoft Dynamics CRM\CRMWeb\CRMReports\viewer\viewer.aspx 克隆到 .\viewerNoToolbar.aspx

2.  在 viewerNoToolbar.aspx 中更新以下代码以从 SSRS 中删除工具栏：-

    ```
    function reportLoaded()
    {

    if (oFrame.readyState === "complete")
    {
        addToRecent();
    } 
    ```

    至

    ```
    function reportLoaded()
    {

    if (oFrame.readyState === "complete")
    {
        addToRecent();
        var frameDoc = oFrame.contentDocument || oFrame.contentWindow.document; 
        var reportViewerToolbar = frameDoc.getElementById("reportViewer_Toolbar");
        reportViewerToolbar.style.display = "none";
    } 
    ```

3.  插入 DIV 以隐藏现有 CRM 工具栏并将现有 resultFrame IFrame 移出 DIV

    ```
    </div>
    <table cellspacing="0" cellpadding="0" width="100%" height="100%"> 
    ```

    至

    ```
    </div>
    <div style="display: none">
        <table cellspacing="0" cellpadding="0" width="100%" height="100%"> 
    ```

    也可以通过更改以下内容来关闭它

    ```
     </table>
     </body> 
    ```

    to（并删除与 resultFrame 相关的现有 td 块）

    ```
     </table>
        </div>
        <table cellspacing="0" cellpadding="0" width="100%" height="100%">
            <tr style="height: 100%;">
                <td colspan="2" style="padding-top: 5px; padding-bottom: 10px; border-width: 2px;
                    border-color: #000000">
                    <div id="divResultFrame">
                        <iframe name="resultFrame" id="resultFrame" src="/_static/blank.htm" style="border: 0px;
                            margin: 0px; padding: 0px; width: 100%; height: 100%;"></iframe>
                    </div>
                </td>
            </tr>
        </table>
    </body> 
    ```

4.  将您的查询更改为

    ```
    var url="/"+orgname+"/crmreports/viewer/viewerNoToolBar.aspx? 
    ```

    不用担心 rc:Toolbar

祝格伦好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:51:21.660

根据这篇文章[在 SQL Reporting Services 中使用 URL 传递参数和选项，](http://www.mssqltips.com/sqlservertip/1336/pass-parameters-and-options-with-a-url-in-sql-reporting-services/)您做得对。

但是当我尝试做同样的事情时，我得到了这个错误，它完全没有说明什么。

![错误](../Images/108c377d436d74be1ee1d98284a0e7fa.png)

要查看发生了什么，我建议您使用跟踪，请参阅这篇文章[CrmDiagTool 2011](http://mscrmtools.blogspot.com/2011/04/new-tool-crmdiagtool-2011.html)，该工具将使使用它变得更加容易。我的猜测是您需要以某种方式使这些参数成为可选参数。

抱歉，没时间深入研究。如果你在几天内没有解决它，请告诉我我们会解决的。

# vim - 在 Vim 中设置编辑范围

> ID：10415121
> 
> 赞同：2
> 
> 时间：2012-05-02T13:49:48.833
> 
> 标签：vim, range

有没有办法在 Vim 中设置文件的编辑范围，以便它适用于任何后续命令？我即将对一个函数进行一些重大重构，并且我想将我的所有更改（在本例中为替换）限制为该函数。过去我只是将函数复制到新缓冲区，进行更改并将其复制回主文件，但我希望有更聪明的方法。

我知道我可以在函数的开头和结尾设置一个标记，并将标记用于替代命令的范围，我知道我可以使用可视模式来选择行的范围，做一些事情，使用 gv 重新选择然后执行下一个命令，但这两种方法都依赖于我记住在每个命令之前指定范围。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:53:59.563

这是一个很酷的折叠技巧：

1.  折叠你的整个功能。

2.  执行替换，`:s/foo/bar/c<Enter>`注意`c`“确认”标志，这在 Vim 中进行重构时至关重要。替换将应用于折叠中的每一*行*。AFAIK，您可以以这种方式运行任何 Ex 命令，但我从未将这个技巧与其他任何东西一起使用`:s`和`:g`/ `:v`。

3.  点击`y/n`接受/拒绝每个替换。

4.  在您接受/拒绝最后一个替换后，折叠立即返回其“关闭”状态：您不必为下一个替换键入范围。

5.  `GOTO 2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:23:07.377

使用 vim [http://www.vim.org/scripts/script.php?script_id=3075](https://github.com/chrisbra/NrrwRgn)的 Narow Region Plugin将它们放在您的 vim 文件夹中并像这样使用：

`:[range]NR`

请参阅此页面：[https ://github.com/chrisbra/NrrwRgn](https://github.com/chrisbra/NrrwRgn)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:04:38.423

假设 vim 是用 +textobjects 编译的，你可以选择函数作为一个块。所以也许你正在寻找：

```
va{:s/foo/bar 
```

仅在当前的 {} 括号函数中将 foo 替换为 bar。如果您的函数没有用大括号分隔，您可以编写一个函数来根据一些语法规则选择范围，但这可能足以满足您的需要。

# java - java字符串变量未设置

> ID：10415129
> 
> 赞同：0
> 
> 时间：2012-05-02T13:50:20.357
> 
> 标签：java, string, null

这是我正在处理的类文件的一个非常简化的版本，我刚刚使用这些类来展示我的问题。

```
public class Test {
    private String string1 = null;
    private String string2 = null;

    private void setString(String s) {
        s = "hello";
    }

    private void set() {
        setString(string1);
        setString(string2);
    }

    public void print() {
        System.out.println(string1);
        System.out.println(string2);
    }

    public void initialise() {
        set();
        print();
    }  
}

public class StringTest {
    public static void main(String[] args) {
        Test test = new Test();
        test.initialise();
    }
} 
```

无论如何，基本上，在这之后两个字符串变量仍然为空。是什么导致了这个问题？我怎样才能绕过它？（仍在学习 Java 的基础知识——如果相关的话）。

非常感谢任何帮助/指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:51:56.827

因为 String 是不可变的，所以您在方法内所做的任何更改都将是该方法的本地更改。

```
private void setString(String s) {
   s = "hello";
} 
```

`s`无法更改。

我可以想到两个选择。

**选项1**

`s`创建一个实例变量（字段）并更改您的方法。

公共类测试 { 私有字符串 string1 = null; 私有字符串 string2 = null; 私有字符串；

```
private void setString(String s) {
    this.s = "hello";
} 
```

**选项 2**

传入`StringBuilder`/`StringBuffer`而不是`String`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T13:52:28.480

您的问题是[Java 是按值传递的](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)，因此您的 setString 方法不执行任何操作。要更改 的值`string1`，您需要`string1 = xxxx;`在代码中包含某个位置。例如：

```
private void set() {
    string1 = getDefaultString();
    string2 = getDefaultString();
}

private String getDefaultString() {
    return "hello";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:57:22.727

您正在设置“s”的值而不是 string1 或 string2

尝试类似的东西。

```
private void setString(String s) {
        string1 = "hello";
        string2 = "world";
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T14:30:00.033

通过进行此分配

```
 s = "hello"; 
```

磨损创建一个新对象。它将具有与传递的内存地址不同的内存地址`setString(string1);`

我们需要更改收到的对象

```
 private void setString(StringBuilder  s) { ... } 
```

而不是创建一个新的。我们需要使用与此方法中传递的完全相同的对象。无法创建一个新的，因为调用者方法不会注意到（Java 中的参数永远不是输出参数）。

由于 Java 的 String 是**不可**变的，我们不能改变它的内容：只需创建一个新的 String 对象。

正如@adarshr 指出的那样，我们可以使用可变的`StringBuilder`or`StringBuffer`来更改它们的内容。但我们不能只在你的代码中`String`替换。`StringBuilder`我们必须确保：

1.  在`StringBuilder`被传递给 之前被初始化`setString()`。
2.  内部`StringBuilder`没有再次创建`setString()`（我们使用的是我们通过的同一个）。

因此，在您的代码中替换它应该可以工作：

```
private StringBuilder string1 = new StringBuilder();
private StringBuilder string2 = new StringBuilder();

private void setString(StringBuilder  s) {
    s.append("hello");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T13:53:45.817

你对java参数传递的误解，试试`public void setString1(String s) { string1 = s; }`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T13:59:39.797

你试图初始化和的值是`string1`什么`string2`？两个成员变量开始是`null`.

如果我将`Test`类视为 POJO（普通的旧 Java 对象），我将添加 getter/setter 方法，如下所示：

```
public class Test {

  private String string1;
  private String string2;

  public String getString1() {
    return this.string1;
  }

  public String getString2() {
    return this.string2;
  }

  public void setString1(String s) {
    this.string1 = s;
  }

  public void setString2(String s) {
    this.string2 = s;
  }

  /*
   * Additional methods
   */
  public void set() {

    setString1("hello");
    setString2("world");
  }

  public void print() {

    System.out.println(this.string1);
    System.out.println(this.string2);
  }

  public void initialize() {

    set();
    print();
  }
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-02T13:54:25.320

您的应用程序正在参数 s 中分配 hello 词。但变量 s 是一个参数类型，即 s 的反映将在 setString() 方法块中...不在其他任何地方...使用实例变量或静态变量看到你的任务的反映。

# javascript - 散列键/值作为数组

> ID：10415133
> 
> 赞同：65
> 
> 时间：2012-05-02T13:50:35.830
> 
> 标签：javascript, hashmap

我找不到 PHP `array_keys()`/的 JavaScript 等价物`array_values()`。

对于不熟悉 PHP 的人，给出以下 JavaScript 哈希：

```
var myHash = {"apples": 3, "oranges": 4, "bananas": 42} 
```

我怎样才能得到一个键数组，即

```
["apples", "oranges", "bananas"] 
```

与价值观相同的问题，即

```
[3, 4, 42] 
```

可以使用 jQuery。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-05-02T13:53:22.823

在[ES5](https://en.wikipedia.org/wiki/ECMAScript#5th_Edition)支持*（或填充）*的浏览器中......

```
var keys = Object.keys(myHash);

var values = keys.map(function(v) { return myHash[v]; }); 
```

* * *

来自 MDN 的垫片...

*   [对象键](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys#Compatiblity)

*   [Array.prototype.map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map#Compatibility)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-02T13:53:24.490

```
var a = {"apples": 3, "oranges": 4, "bananas": 42};    

var array_keys = new Array();
var array_values = new Array();

for (var key in a) {
    array_keys.push(key);
    array_values.push(a[key]);
}

alert(array_keys);
alert(array_values); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-01-17T02:39:52.883

第二个答案（在撰写本文时）给出：

```
var values = keys.map(function(v) { return myHash[v]; }); 
```

但我更喜欢使用 jQuery 自己的`$.map`：

```
var values = $.map(myHash, function(v) { return v; }); 
```

由于 jQuery 负责跨浏览器的兼容性。再加上它更短:)

无论如何，我总是尽可能地发挥作用。单行比循环更好。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-02-11T14:29:03.127

[查看Lodash](https://en.wikipedia.org/wiki/Lodash)或[Underscore.js](https://en.wikipedia.org/wiki/Underscore.js)中的 _.keys() 和 _.values() 函数：

*   [下划线.js _.keys](http://underscorejs.org/#keys)
*   [下划线.js _.values](http://underscorejs.org/#values)
*   [Lodash _.keys](http://lodash.com/docs#keys)
*   [Lodash _.values](http://lodash.com/docs#values)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-02T13:54:25.687

```
function getKeys(obj){
    var keys = [];
    for (key in obj) {
        if (obj.hasOwnProperty(key)) { keys[keys.length] = key; }
    } 
    return keys;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-02T13:54:14.823

我不知道它是否有帮助，但是“foreach”会遍历所有键：

```
for (var key in obj1) {...} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-02T13:55:08.610

以下是[phpjs.org](http://phpjs.org)的实现：

*   [数组值](http://phpjs.org/functions/array_values:348)
*   [数组键](http://phpjs.org/functions/array_keys:324)

这*不是*我的代码。我只是向您指出一个有用的资源。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-09T15:56:00.433

采用：

```
var myHash = {"apples": 3, "oranges": 4, "bananas": 42}
vals=(function(e){a=[];for (var i in e) a.push(e[i]); return a;})(myHash).join(',')
keys=(function(e){a=[];for (var i in e) a.push(  i ); return a;})(myHash).join(',')
console.log(vals,keys) 
```

基本上：

```
array=(function(e){a=[];for (var i in e) a.push(e[i]); return a;})(HASHHERE) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-05-02T13:55:59.207

这是`array_keys`来自[PHP.js 库](http://phpjs.org/functions/array_keys:324)的一个很好的例子：

```
function array_keys (input, search_value, argStrict) {
    // Return just the keys from the input array, optionally only for the specified search_value

    var search = typeof search_value !== 'undefined',
        tmp_arr = [],
        strict = !!argStrict,
        include = true,
        key = '';

    for (key in input) {
        if (input.hasOwnProperty(key)) {
            include = true;
            if (search) {
                if (strict && input[key] !== search_value) {
                    include = false;
                }
                else if (input[key] != search_value) {
                    include = false;
                }
            }

            if (include) {
                tmp_arr[tmp_arr.length] = key;
            }
        }
    }

    return tmp_arr;
} 
```

`array_values`（来自同[一个 PHP.js 库](http://phpjs.org/functions/array_values:348)）也是如此：

```
function array_values (input) {
    // Return just the values from the input array

    var tmp_arr = [],
        key = '';

    for (key in input) {
        tmp_arr[tmp_arr.length] = input[key];
    }

    return tmp_arr;
} 
```

# exception - 实体框架 4.3.1 上的文化错误

> ID：10415140
> 
> 赞同：0
> 
> 时间：2012-05-02T13:51:09.647
> 
> 标签：exception, culture, entity-framework-4.3

我已将我在 EF 4.0 中的项目更新为 EF 4.3.1。但是，当我创建一个新的 Context 对象时，会引发异常：

```
Culture is not supported.
Parameter name: name
2.3.2 is an invalid culture identifier. 
```

完整的堆栈跟踪：

```
at System.Globalization.CultureInfo..ctor(String name, Boolean useUserOverride)
at System.Globalization.CultureInfo..ctor(String name)
at System.Reflection.AssemblyName.nInit(RuntimeAssembly& assembly, Boolean forIntrospection, Boolean raiseResolveEvent)
at System.Reflection.AssemblyName..ctor(String assemblyName)
at System.Data.Metadata.Edm.MetadataAssemblyHelper.ComputeShouldFilterAssembly(Assembly assembly)
at System.Data.Common.Utils.Memoizer`2.<>c__DisplayClass2.<Evaluate>b__0()
at System.Data.Common.Utils.Memoizer`2.Result.GetValue()
at System.Data.Common.Utils.Memoizer`2.Evaluate(TArg arg)
at System.Data.Metadata.Edm.DefaultAssemblyResolver.<GetAlreadyLoadedNonSystemAssemblies>b__0(Assembly a)
at System.Linq.Enumerable.WhereArrayIterator`1.MoveNext()
at System.Data.Metadata.Edm.DefaultAssemblyResolver.GetAllDiscoverableAssemblies()
at System.Data.Metadata.Edm.DefaultAssemblyResolver.GetWildcardAssemblies()
at System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource.LoadResources(String assemblyName, String resourceName, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver resolver)
at System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource.CreateResourceLoader(String path, ExtensionCheck extensionCheck, String validExtension, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver resolver)
at System.Data.Metadata.Edm.MetadataArtifactLoader.Create(String path, ExtensionCheck extensionCheck, String validExtension, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver resolver)
at System.Data.Metadata.Edm.MetadataCache.SplitPaths(String paths)
at System.Data.Common.Utils.Memoizer`2.<>c__DisplayClass2.<Evaluate>b__0()
at System.Data.Common.Utils.Memoizer`2.Result.GetValue()
at System.Data.Common.Utils.Memoizer`2.Evaluate(TArg arg)
at System.Data.EntityClient.EntityConnection.GetMetadataWorkspace(Boolean initializeAllCollections)
at System.Data.Objects.ObjectContext.RetrieveMetadataWorkspaceFromConnection()
at System.Data.Objects.ObjectContext..ctor(EntityConnection connection, Boolean isConnectionConstructor)
at System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName)
at Stoque.ECM.Modelo.Contexto..ctor() in D:\ECM 2.0\Stoque.ECM\Stoque.ECM.Modelo\Stoque.Modelo.Designer.cs:line 159
at Stoque.ECM.Servico.ServicoECM.ObterUsuarioPorLogin(String login) in D:\ECM 2.0\Stoque.ECM\Stoque.ECM.Servico\Classes\Usuarios.cs:line 331 
```

我不知道这个问题...

我会很高兴有任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:13:03.740

看起来您的一个程序集的文化不正确。出于性能原因，默认情况下，Entity Framework 会过滤掉很可能没有实体的程序集，例如属于 .NET Framework 的程序集或 Microsoft 提供的程序集。实体框架正在使用公钥令牌来过滤掉这些程序集。要获取公钥令牌，AssemblyName 对象是使用 assembly.FullName 创建的。如果 assembly.FullName 不是有效的程序集名称，您将看到上述异常。

# c# - 如何将多个字符串添加到列表 ?

> ID：10415141
> 
> 赞同：3
> 
> 时间：2012-05-02T13:51:10.223
> 
> 标签：c#

我想在不使用字符串数组的情况下将两个字符串添加到字符串 [] 列表中。我使用了一个名为 str 的字符串数组，但我想将 d.Name 和 d.AvailableFreeSpace 直接添加到列表中。有没有办法做到这一点？

```
public static List<string[]> GetReadyDrives()
{
    DriveInfo[] drives = DriveInfo.GetDrives();
    List<DriveInfo> readyDrives = new List<DriveInfo>();
    List<string[]> parsedReadyDrives = new List<string[]>();

    for (int i = 0; i < drives.Length; i++)
    {
        if (drives[i].IsReady)
        {
             readyDrives.Add(drives[i]);
        }
    }
    foreach (DriveInfo d in readyDrives)
    {
        string[] str=new string[2];
        str[0] = d.Name;
        str[1] = d.AvailableFreeSpace.ToString();
        parsedReadyDrives.Add(str);
    }
    return parsedReadyDrives;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:56:13.413

```
public static List<string[]> GetReadyDrives()
{
    return DriveInfo.GetDrives()
        .Where(d => d.IsReady)
        .Select(d => new[] { d.Name, d.AvailableFreeSpace.ToString() })
        .ToList();
} 
```

...但是，老实说，你最好这样做：

```
class ReadyDriveInfo
{
    public string Name { get; set; }
    public string AvailableFreeSpace { get; set; }
}

public static List<ReadyDriveInfo> GetReadyDrives()
{
    return DriveInfo.GetDrives()
        .Where(d => d.IsReady)
        .Select(d => new ReadyDriveInfo
            {
                Name = d.Name,
                AvailableFreeSpace = d.AvailableFreeSpace.ToString()
            })
        .ToList();
} 
```

...但是，即使在那里，您为什么要将可用空间作为字符串？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:54:08.907

a 的每个元素都是 的`List<string[]>`一个实例`string[]`。因此，如果您想`string`单独添加 s ，则不能。但是您可以将它们作为单个元素添加到`string[]`. 因此：

```
parsedReadyDrives.Add(new[] { d.Name });
parsedReadyDrives.Add(new[] { d.AvailableFreeSpace.ToString()); 
```

如果您希望它们作为 的双元素实例的两个元素`string[]`，您会说：

```
parsedReadyDrives.Add(new[] { d.Name, d.AvailableFreeSpace.ToString() }); 
```

坦率地说，我认为传递 a`List<string[]>`真的很讨厌。一个主要的担忧是，您给调用者带来了非常沉重的负担，因为您需要深入了解 的结构`List<string[]>`以及每个元素的每个元素的含义。此外，更改起来并不健壮（如果您想更改其中任何元素的任何单个元素的含义，或者如果您想添加其他元素，那么您将**面临维护的噩梦**`List<string[]>`。您可能需要考虑一个更正式的数据结构，更恰当地概括了您的顾虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:52:27.407

你不能这样做吗？

```
parsedReadyDrives.Add(new []{d.Name, d.AvailableFreeSpace.ToString()}); 
```

不过，这只是语法糖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:55:05.780

是的，你可以这样做：

```
parsedReadyDrives.Add(new string[]{d.Name, d.AvailableFreeSpace.ToString()}); 
```

所以尝试使用一些LINQ。而不是你的代码尝试这个来返回你想要的：

```
return DriveInfo.GetDrives().Where(x => x.IsReady).Select(x => new string[]{x.Name, x.AvailableFreeSpace.ToString()}.ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T13:55:36.773

您的列表由字符串数组组成，所以不，您不能向列表中添加不是字符串数组的内容。

您可以创建一个由两个字符串组成的对象，如果这对您尝试执行的操作更有意义，但您仍然必须在添加该对象之前对其进行初始化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T13:56:44.960

您可以使用单个 LINQ 查询来完成：

```
public static List<string[]> GetReadyDrives()
{
    return DriveInfo.GetDrives()
        .Where(d => d.IsReady)
        .Select(d => new string[] { d.Name, d.AvailableFreeSpace.ToString() })
        .ToList();
} 
```

更新：我会拆分找到准备好的驱动器的代码和准备写入文件的代码。在这种情况下，我不需要查看方法来了解字符串数组中包含的内容：

```
public static IEnumerable<DriveInfo> GetReadyDrives()
{
    return DriveInfo.GetDrives()
        .Where(d => d.IsReady);
} 
```

然后只写你需要的：

```
foreach(var drive in GetReadyDrives())
    WriteToFile(drive.Name, drive.AvailableFreeSpace); 
```

甚至是这种方式（但我喜欢更多带有描述性方法名称的选项）：

```
foreach(var drive in DriveInfo.GetDrives().Where(d => d.IsReady))
    WriteToFile(drive.Name, drive.AvailableFreeSpace); 
```

# google-maps - 如何根据谷歌地图中标记的相对位置制作多边形？

> ID：10415143
> 
> 赞同：1
> 
> 时间：2012-05-02T13:51:19.770
> 
> 标签：google-maps, google-maps-api-3, maps

我有一个要在周围创建多边形的标记列表（显示标记周围的区域，而不是标记本身）。因此，我希望多边形“环绕”标记周围以显示它们周围的相对区域，而不是让多边形成为标记的直接纬度/长度。

关于如何完成这样的事情的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:16:08.600

这称为**凸包**。[http://www.geocodezip.com/v3_map-markers_ConvexHull.asp](http://www.geocodezip.com/v3_map-markers_ConvexHull.asp)有一个示例，它使用[http://softsurfer.com/Archive/algorithm_0203/algorithm_0203.htm中描述的算法](http://softsurfer.com/Archive/algorithm_0203/algorithm_0203.htm)

# php - PHP：获取父类属性值

> ID：10415147
> 
> 赞同：0
> 
> 时间：2012-05-02T13:51:31.890
> 
> 标签：php, oop

我有一个由子类扩展的抽象类。

我需要从抽象类内部的方法中检索抽象类的所有属性及其值的数组。

除了这段代码之外，还有没有更简单的方法可以做到这一点：

```
$options = get_object_vars($this);
foreach ($options as $var => $value) {
    if (!property_exists(get_class(), $var)) {
        unset($options[$var]);
    }
} 
```

`get_object_vars($this)`返回所有属性及其值，但包括子类的属性-我不想要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:16:06.523

```
$options = get_class_vars(get_class());

foreach($options as $key=>$val)
    echo $key . " : " . $val . " => " . $this->$key; 
```

这将给出一个输出为

*属性名：标准值 => 动态值*

# extjs - Extjs4 中的嵌套存储

> ID：10415150
> 
> 赞同：0
> 
> 时间：2012-05-02T13:51:44.663
> 
> 标签：extjs, extjs4

我只是想知道我们是否可以有一个嵌套存储，类似于 Extjs4 中的嵌套模型。我之所以这么想是因为，我有 10 个下拉菜单和 10 个使用相同模型的网格。因此，我有 10 个下拉商店和 10 个网格商店。

在 10 个下拉存储中，2 个下拉将进行 ajax 调用以从服务器检索数据，其他存储将使用上述 2 的响应数据并使用响应加载其独立存储。类似的也适用于网格。

那么这是正确的方法吗？以及在同一页面上拥有多个商店（大约 20 :O）的任何缺点。

请建议。:)

小更新以清除我的问题。我不是指嵌套商店，因为它指的是相同的模型。在 Extjs4 中，我们可以有一个 ABCModel.js 并定义许多扩展模型的组件。因此，为了再次清除我的问题，我有 10 个商店（即 10 个 .js 文件）和 10 个网格（同样是 10 个商店的 js 文件）。那么这是正确的方法还是我们可以将所有这些推送到单个 .js 文件下。

谢谢普尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:29:06.643

这不是真正的“嵌套”商店......他们使用相同模型的事实与嵌套无关。

例如，我不会担心页面上的商店数量，然后我会担心网格的数量。在您的情况下，商店只会扮演数据数组的角色。

从服务器加载两个（或四个）存储，然后为其他控件创建本地副本。如果它们显示不同的数据集，您将无法将相同的存储对象用于不同的控件。您需要做的是过滤一个商店并在另一个商店对象中创建结果的克隆。而且由于您基本上只需要这些本地商店中的一两个字段 - 您可能想要创建一个简单的模型（[id, name] 或类似的东西）。

# c# - 值类型何时会包含引用类型？

> ID：10415157
> 
> 赞同：17
> 
> 时间：2012-05-02T13:52:04.903
> 
> 标签：c#, value-type, reference-type

我知道在引用类型上使用值类型的决定应该基于语义，而不是性能。我不明白为什么值类型可以合法地包含引用类型成员？这有几个原因：

一方面，我们不应该构建一个需要构造函数的结构。

```
public struct MyStruct
{
    public Person p;
    // public Person p = new Person(); // error: cannot have instance field initializers in structs

    MyStruct(Person p)
    {
        p = new Person();
    }
} 
```

其次，由于值类型语义：

```
MyStruct someVariable;
someVariable.p.Age = 2; // NullReferenceException 
```

编译器不允许我`Person`在声明时进行初始化。我必须把它移到构造函数，依赖调用者，或者期待一个`NullReferenceException`. 这些情况都不是理想的。

.NET Framework 是否有值类型中的引用类型示例？我们什么时候应该这样做（如果有的话）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T13:55:17.757

值类型的实例从不*包含*引用类型的实例。引用类型对象位于托管堆上的某个位置，值类型对象可能包含对该对象的*引用*。这样的参考具有固定的大小。这样做很常见——例如每次在结构中使用字符串时。

但是，是的，您不能保证在 a 中初始化引用类型字段，`struct`因为您不能定义无参数构造函数（也不能保证它永远被调用，如果您用 C# 以外的语言定义它）。

你说你应该“不应该构建一个`struct`需要构造函数”。我说不然。由于值类型*几乎总是*不可变的，因此您*必须*使用构造函数（很可能通过工厂到私有构造函数）。否则它永远不会有任何有趣的内容。

使用构造函数。构造函数很好。

如果您不想传入`Person`to initialize的实例，则`p`可以通过属性使用延迟初始化。（因为显然公共领域`p`只是为了演示，对吧？对吧？）

```
public struct MyStruct
{
    public MyStruct(Person p)
    {
        this.p = p;
    }

    private Person p;

    public Person Person
    {
        get
        {
            if (p == null)
            {
                p = new Person(…); // see comment below about struct immutability
            }
            return p;
        }
    }

    // ^ in most other cases, this would be a typical use case for Lazy<T>;
    //   but due to structs' default constructor, we *always* need the null check.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T16:55:29.010

对于包含类类型字段的结构，有两个主要有用的场景：

1.  该结构包含对不可变对象的可能可变引用（“String”是迄今为止最常见的）。对不可变对象的引用将表现为可空值类型和普通值类型之间的交叉；它没有前者的“Value”和“HasValue”属性，但它将 null 作为可能（和默认）值。请注意，如果通过属性访问字段，则当字段为 null 时，该属性可能会返回非 null 默认值，但不应修改字段本身。
2.  该结构持有对可能可变对象的“不可变”引用，并用于包装对象或其内容。`List.Enumerator` 可能是使用这种模式的最常见的结构。让结构字段假装是不可变的是一种狡猾的构造（*），但在某些情况下它可以很好地工作。在应用此模式的大多数情况下，结构的行为本质上将类似于类的行为，只是性能会更好（**）。

(*) 该语句`structVar = new structType(whatever);`将创建 的新实例`structType`，将其传递给构造函数，然后通过*将该`structVar`新实例中的所有公共和私有字段复制到`structVar`*; 一旦完成，新实例将被丢弃。因此，所有结构字段都是可变的，即使它们“假装”其他；假装它们是不可变的可能是狡猾的，除非人们知道`structVar = new structType(whatever);`实际实施的方式永远不会造成问题。

(**) 结构在某些情况下会表现得更好；类将在其他方面表现更好。一般来说，所谓的“不可变”结构会在预期表现更好的情况下被选择而不是类，并且它们的语义与类的语义不同的极端情况不会造成问题。

有些人喜欢假装结构就像类，但效率更高，并且不喜欢以利用结构*不是*类这一事实的方式使用结构。这样的人可能只会倾向于使用上面的场景（2）。场景 #1 对于可变结构非常有用，尤其是`String`对于本质上表现为值的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:10:04.900

我想补充 Marc 的答案，但我有太多话要说。

如果您查看 C# 规范，它会说 struct 构造函数：

> 使用 new 运算符调用结构构造函数，但这并不意味着正在分配内存。结构构造函数不是动态分配对象并返回对它的引用，而是简单地返回结构值本身（通常在堆栈上的临时位置），然后根据需要复制该值。

（您可以在下面找到规范的副本
`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC#\Specifications\1033`）

因此，结构构造函数本质上不同于类构造函数。

除此之外，预计结构将按值复制，因此：

> 对于结构，每个变量都有自己的数据副本，并且对一个变量的操作不可能影响另一个变量。

每当我在结构中看到引用类型时，它都是一个字符串。这是有效的，因为字符串是不可变的。我猜您的`Person`对象不是不可变的，并且由于与结构的预期行为不同，可能会引入*非常奇怪和严重的错误。*

话虽如此，您在结构的构造函数中看到的错误可能是您有一个`p`与参数同名的公共字段，`p`并且没有引用结构的`p`as `this.p`，或者您缺少关键字`struct`。

# objective-c - 如何使用 GNUstep makefile 编译程序的简单方法？

> ID：10415159
> 
> 赞同：1
> 
> 时间：2012-05-02T13:52:08.363
> 
> 标签：objective-c, makefile, gnustep

```
int main (int argc, char *argv[])
{

  NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

  NSLog(@"Hello World!");

  [pool drain];
  return 0;
} 
```

这是我的程序。我在朋友的 iMac 上运行过，代码没有问题。如何制作我在 GNUstep 上听说过的 makefile？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:05:19.517

你看过[GNUstep Makefile 教程](http://www.gnustep.it/nicola/Tutorials/WritingMakefiles/)吗？还有[GNUstep 制作文档](http://www.gnustep.org/resources/documentation/make_1.html)？您应该`common.make`在已安装的软件包中找到。

# jquery - jQuery自动完成标签，选择时不同字段中的值

> ID：10415160
> 
> 赞同：1
> 
> 时间：2012-05-02T13:52:10.050
> 
> 标签：jquery, asp.net, autocomplete, jquery-autocomplete

我正在使用 jQuery 自动完成 (http://jqueryui.com/demos/autocomplete/) 并让它工作，但是当用户选择一个项目时，它会将值放在文本框中。我希望这样当用户选择一个项目时，标签被用作文本框中的文本，并且值被插入到隐藏字段“cId”中。

我环顾四周，似乎可以找到解决方案。

我的值在一个名为 ClientCsv 的字符串中，例如：

```
[ { label: "ClientId1", value: "ClientName1" }, { label: "ClientId2", value: "ClientName2" } ] 
```

我目前使用的jquery是：

```
$(function () {
var availableTags = [ " & ClientCsv() & " ]; $('#tags').autocomplete({ source: availableTags});
}); 
```

表格代码：

```
<asp:TextBox ID="tags" runat="server"></asp:TextBox>
<asp:HiddenField ID="cId" runat="server" /> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:09:18.973

您需要为自动完成连接 select 事件，然后阻止在搜索字段中填充值的默认操作。

```
var availableTags = [{ label: "ClientId1", value: "ClientName1" }, { label: "ClientId2", value: "ClientName2"}];

$(function () {
    var txt = $('#tags');
    txt.autocomplete({ 
        source: availableTags,
        select: function(event, ui){
            //put the label in your text field
            txt.val(ui.item.label);

            //put the value in your hidden field
            $('#cId').val(ui.item.value);

            //cancel the event to prevent it populating the value
            event.preventDefault();
        }
    });
}); 
```

# c# - 将跟踪侦听器自动加载到所有新的跟踪源

> ID：10415162
> 
> 赞同：1
> 
> 时间：2012-05-02T13:52:22.167
> 
> 标签：c#, trace, system.diagnostics, tracelistener

我正在转换一些代码以使用 Microsoft 跟踪。我想要的是在一个项目中定义所有侦听器，然后从其他程序集中使用它们，而不必在那里显式加载它们。

为了澄清，这就是我现在正在做的事情：

```
<?xml version="1.0" encoding="utf-8" ?>
  <configuration>
    <system.diagnostics>
      <trace autoflush="true">
        <listeners>
          <add name="myListener" type="ConsoleApplication4.LogListener, ConsoleApplication4"/>
          <remove name="Default" />
        </listeners>
      </trace>
    </system.diagnostics>
  </configuration> 
```

在 C# 代码中：

```
var b = Trace.Listeners;
TraceSource tr = new TraceSource("Blah", SourceLevels.All);
tr.Listeners.Add(b["myListener"]);
tr.TraceEvent(TraceEventType.Warning, 5, "Hello"); 
```

我想要的`myListener`是自动添加到我创建的任何新跟踪源中，而不必像现在这样查找它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:14:35.707

在配置中定义跟踪源及其侦听器：

```
<system.diagnostics>
  <sources>
    <source name="Blah" switchValue="Warning">
      <listeners>
        <add name="myListener" />
      </listeners>
    </source>
  </sources>
  <!-- Note these are in sharedListeners rather than trace -->
  <sharedListeners>
    <add name="myListener" ... />
  </sharedListeners>
  <!-- Autoflush still works as expected -->
  <trace autoflush="true" />
</system.diagnostics> 
```

然后按照你已经存在的方式在代码中构造 TraceSource（它的跟踪级别将被`switchValue`in 配置覆盖），*不要*向它添加任何侦听器并正常登录到它。

# cytoscape-web - 离散映射器示例

> ID：10415163
> 
> 赞同：1
> 
> 时间：2012-05-02T13:52:24.977
> 
> 标签：cytoscape-web

我想使用 CytoscapeWeb 2.0 的离散映射器（即基于 jQuery 的 CytoscapeWeb），但需要一些示例代码来说明我必须做什么。

我已经尝试过从基于 Flash 的 CytoscapeWeb 中获取的一些代码并尝试过

> ```
> var entityColorMapper = {
>     attrName: "etype",
>     entries: [ { attrValue: "protein", value: "#ff0000" },
>                { attrValue: "compound", value: "#00ff00" },
>                { attrValue: "group", value: "#0000ff" } 
>              ]
> }; 
> ```

然后在我的“风格”结构中

> ```
>  "node.E": {
>         fillColor: {
>             discreteMapper: entityColorMapper
>         }
>     } 
> ```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:40:59.587

在 Cytoscape Web 2 中有所不同： [https ://github.com/cytoscape/cytoscapeweb/wiki/StyleObject](https://github.com/cytoscape/cytoscapeweb/wiki/StyleObject)

```
 // example discrete mapper
  fillColor: {
    defaultValue: "grey",
    discreteMapper: {
      attr: "type", // field in ele.data() to map to
      mapped: {
        "foo": "red", // field value : visual property value
        "bar": "blue"
      }
    }
  } 
```

您实际上并不需要使用离散映射器，因为您可以在您的风格中使用选择器：

```
"node[type='foo']": { fillColor: "red", borderColor: "pink" },
"node[type='bar']": { fillColor: "blue" } 
```

最好使用第二种方法，因为您可以`[type='blah']`一次将多个视觉属性的样式分开（例如`borderColor`），就像 CSS 一样。

请记住：确保在 Cytoscape Web 2 期间始终使用最新的预发布版本，直到发布第一个正式版本。 [https://github.com/cytoscape/cytoscapeweb/downloads](https://github.com/cytoscape/cytoscapeweb/downloads)

# jquery - Jquery 插件——动态绑定到元素

> ID：10415170
> 
> 赞同：0
> 
> 时间：2012-05-02T13:52:29.920
> 
> 标签：jquery, plugins, element, bind

我创建了一个 jquery 插件，现在我想将它绑定到由 php 脚本创建的 DOM 元素。

使用以下标记作为示例：

```
<div class="showcase_window">

<div id='mywhatever'></div>
<div id='mywhatever2'></div>
<div id='mywhatever3'></div>

</div> 
```

这有效：

```
$(document).ready(function(){

    $('#mywhatever').showcase();
    $('#mywhatever2').showcase();
    $('#mywhatever3').showcase();
}); 
```

但是由于标记是由 php 脚本创建的，所以我试图让这样的事情起作用：

```
 $(document).ready(function(){

    $('.showcase_window').children().on('showcase');

  }); 
```

但我有点困惑......我知道'on'用于附加事件，但我不知道该怎么做......

非常感谢！

PS：插件如下：

```
 $.fn.showcase = function () {

     return this.each(function() {

      var $this = $(this);

      $this.find(".sc_itm_display").hover(function() {
            $this.find(".sc_img_front").stop(true,true).fadeOut("slow");
            }, function() {
        $this.find(".sc_img_front").stop(true,true).fadeIn("slow");
        });

    $this.find('.sc_color_select img').click(function() {

    var color_path_1 = $(this).attr("src").replace("color","1");
    var color_path_2 = $(this).attr("src").replace("color","2");

    $this.find('.sc_itm_display .sc_img_back img').attr("src",color_path_1);
    $this.find('.sc_itm_display .sc_img_front img').attr("src",color_path_2);

    });
    });
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:58:28.920

`on`将处理程序附加到事件。事件可以是用户操作或进程完成/失败等。

您不是附加事件而是附加函数，在这种情况下，jQuery 会为您完成。

`$('.showcase_window').children()`或者只是`$('.showcase_window>div')`包含由您的脚本创建的三个示例 div。

`$('.showcase_window').children().showcase();`（或更有效地`$('.showcase_window>div').showcase();`）

`showcase()`将为这些 div 中的每一个执行一次。inside 将是 div ('mywhatever') 本身`this`。`showcase`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:58:36.147

如果您的 PHP 正在生成您想要操作的元素，请使用它来输出一个脚本，其中包含一串以逗号分隔的 id 值作为目标。然后将这些目标用于您的插件。

PHP 输出：

```
var target_ids = "#this, #that, #the_other"; 
```

在你的 jQuery 中：

```
$(target_ids).showcase(); 
```

或者，使用唯一的类来标记您想要定位的所有元素，而您不需要知道它们的 id。

```
$(".mywhatevers").showcase(); 
```

# groovy - 如何在 Eclipse 中运行 Spock 测试

> ID：10415171
> 
> 赞同：14
> 
> 时间：2012-05-02T13:52:44.137
> 
> 标签：groovy, junit, spock

我尝试在 Eclipse 中运行我的第一个 Spock 测试，但它不起作用。

我在我的 pom.xml 中添加了所有 Maven 依赖项和插件，但是当我使用 jUnit 运行我的测试时，会弹出一个带有此警告消息的窗口：“未找到 jUnit 测试”。

你已经看到这种消息了吗？

为了在 Eclipse 中运行 Spock 测试，必须进行哪些配置？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-16T11:54:01.343

它与运行 Junit 测试用例相同。右键单击该类并作为 4Junit 测试运行器运行。请参阅下面的完整配置和运行 spock 测试。

使用 Eclipse、Gradle、Groovy 运行 Spock 框架：源代码 - [Krzysztof Goralski，博客](https://krzysztofgoralski.wordpress.com/2015/08/22/spock-guide-with-eclipse-gradle-groovy/)

> - 安装 Gradle 插件，在这里查看
> 
> - 从 Eclipse Marketplace 安装 Groovy-Eclipse for Juno 或 Indigo（或者可能是用于 Eclipse 的 Groovy/Grails Tool Suite）
> 
> - 如果需要，从 Eclipse Marketplace 安装 Spock 插件，请在此处查看
> 
> - 通过 Gradle Import 将项目导入 Eclipse
> 
> - 将这些行添加到 build.gradle：

```
apply plugin: ‘groovy’
testCompile ‘org.spockframework:spock-spring:1.0-groovy-2.3’ (for Spring) 
```

> 这很重要，版本可能会产生一些冲突
> 
> - 在此之后 *.groovy 和 *.gradle 文件可能看起来不同，语法颜色突出显示等。请记住，您可以右键单击例如。build.gradle -> Open with -> Open With Minimalist gradle Editor 等。
> 
> - 可能你需要为 *.groovy 测试文件创建额外的文件夹创建新的 *.groovy 文件，类
> 
> -基本测试示例，从 Spock 框架扩展规范，并在使用 Spring 运行时需要特定的注释
> 
> - 现在您可以使用 Eclipse 中的 JUnit 运行它。对于集成测试，您不能使用 @RunWith(SpringJUnit4ClassRunner.class)，上下文应该如下所示 @ContextConfiguration(locations = [ “/restTestContext.xml” ]) ，而不是 {}大括号，但是 [ ]
> 
> -Spock 也可以用于 Mocks。像这样： Subscriber subscriber1 = Mock() ，subscriber1.isActive() >> true ，所以，记住 >> 模拟操作符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:25:11.373

右键单击项目 > Properties > Java Build Bath > Add External Jars 并添加 spock-core-0.6-groovy-1.8.jar 并检查 Groovy Libraries 是否存在于 Build Path 中。如果没有单击 Add Library 并选择 Groovy Runtime Libraries 并重新启动 Eclipse。现在你应该可以运行了。如果仍然无法运行，请尝试创建新配置并将测试运行器更改为 Junit4 并运行它...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T14:21:36.713

检查您的测试所在的文件夹是否是源文件夹。

# jasper-reports - Jasperreports：如何使页脚始终固定在每个页面的底部？

> ID：10415176
> 
> 赞同：5
> 
> 时间：2012-05-02T13:52:59.837
> 
> 标签：jasper-reports, footer, fixed

我在 jasperreports 中的页脚有问题。我想将页脚固定在每页的底部。如果详细信息带中只有一条记录，则页脚紧跟在页面中间的详细信息带之后。我已将页脚中元素的“位置类型”设置为“相对于底部固定”。但它不起作用。我不能增加细节带的高度，因为它也会增加每条记录之间的空白。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T13:53:49.097

不确定@mdahlman 的答案是否涵盖/修复/理解原始问题，但我可能是错的。

要让页脚始终出现在页面/纸张最底部的固定位置，我相信最好的方法是将页脚（字段/文本/图形）放在背景带中。

并确保有一个带有空白空间的 PageFooter 带，以确保没有 Detail-data 打印在 Background-band 的固定页脚顶部。您仍然可以打印带有页面摘要字段的 PageFooter，但您需要在 PageFooter 底部留出空白空间以容纳背景带中的固定页脚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:28:52.350

页脚始终位于页面底部。我认为您无法获得所描述的行为。列页脚和组页脚执行您所描述的操作。但是您可以使用组属性“页脚位置”将组页脚强制到页面底部。尝试将其设置为“底部强制”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T10:58:05.500

使用 positionType="FixRelativeToBottom" 是将页脚保持在页面底部的最佳方法。

```
<pageFooter>
    <band height="320">
     <frame><reportElement isRemoveLineWhenBlank="true"  stretchType="NoStretch"  x="0" y="0" width="607" height="318"  positionType="FixRelativeToBottom" /> 
```

# c# - PostPublish 目标不适用于 vs 2010

> ID：10415178
> 
> 赞同：1
> 
> 时间：2012-05-02T13:53:02.900
> 
> 标签：c#, msbuild, msbuild-task

我需要在发布完成后运行一个批处理文件。当我在我的 Web 项目的右键菜单中使用发布项进行发布时，然后选择文件系统作为发布类型。

我在 csproj 文件上放置了如下目标，以便在发布后执行 .bit 文件，但它对我不起作用！

我在 csproj 中使用的代码

```
<Target Name="AfterPublish"> 
   <Exec Command="echo %time%" />
</Target> 
```

我真正想做的是运行 bat 文件，它将 *.pdb 文件从 bin 文件夹复制到备份文件夹。问题是发布后没有执行任何操作！任何帮助将不胜感激.. :)

# php - CakePHP“致命错误：找不到类'调试器'”在不引用调试器的文件中

> ID：10415181
> 
> 赞同：7
> 
> 时间：2012-05-02T13:53:20.170
> 
> 标签：php, cakephp-2.0, public

我从一个不引用 Debugger 类的文件中得到标题中引用的错误。如果我手动导入调试器，错误仍然出现。最后一个}中错误引用的行号结束了文件中的类定义。} 后面没有任何内容（也没有 ?>）。据我所知，我收到错误的文件并没有直接引用 Debugger（例如，没有明确使用 Debugger）。

这是堆栈跟踪：

```
( ! ) Fatal error: Class 'Debugger' not found in /home/gregg/workspace/Fueled/dapprly/backend/app/Plugin/Facebook/Controller/Component/FapiComponent.php on line 107
Call Stack
#   Time    Memory  Function    Location
1   0.0003  245664  {main}( )   ../index.php:0
2   0.0168  1657712 Dispatcher->dispatch( ) ../index.php:100
3   0.0237  2753568 Dispatcher->_invoke( )  ../Dispatcher.php:85
4   0.0237  2753768 Controller->constructClasses( ) ../Dispatcher.php:99
5   0.0237  2755712 ComponentCollection->init( )    ../Controller.php:638
6   0.0255  3057112 ComponentCollection->load( )    ../ComponentCollection.php:52
7   0.0255  3057600 class_exists ( )    ../ComponentCollection.php:99
8   0.0255  3057896 App::load( )    ../ComponentCollection.php:0
9   0.0257  3091416 ErrorHandler::handleError( )    ../ComponentCollection.php:551 
```

这是第 107 行的上下文：

```
class FapiComponent extends Component {
    // -- snip -- //

    public function method()
    {
        $url = urlencode('http://url');

        $param = array(
        'access_token' => '##' ,
        'object' => 'user',
        'fields' => 'feed', 
        'callback_url' => $url);
        $id = $this->facebook->getAppId();
        $subs = $this->facebook->api('/' . $id . '/subscriptions' , 'POST' , $param);
    }
} // <-- line 107 ... nothing after this 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T23:16:13.150

这是由于一个[PHP 错误](https://bugs.php.net/bug.php?id=65322)没有对编译时错误执行自动加载（例如，`E_STRICT`）。

这已在[PHP 5.4.21](https://secure.php.net/ChangeLog-5.php#5.4.21)中修复，并且CakePHP 接受了一个[解决方法拉取请求。](https://github.com/cakephp/cakephp/issues/7376)

要手动解决此问题并免除`E_STRICT`CakePHP 的错误处理程序：

1.  在您喜欢的编辑器中打开`core.php`（您可以通过执行类似的操作找到该文件`find . -name core.php`）。
2.  找到以下行：`'level' => E_ALL & ~E_DEPRECATED,`
3.  将其替换为：`'level' => E_ALL & ~E_DEPRECATED & ~E_STRICT,`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T14:17:14.713

我发现了错误。

我展示的这个类实现了初始化方法。但它被实施为

```
public function initialize($controller) 
```

这是一个 E_STRICT 错误，因为它与父方法的不同之处在于省略了类型提示。我的设置正在捕获 E_STRICT 错误。此错误导致它寻找调试器。我不确定为什么它无法自动加载它，但将方法更改为

```
public function initialize(Controller $controller) 
```

解决了我遇到的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T22:52:25.873

每当您有 E_STRICT 错误时，都会发生这种情况。我的主要问题是在运行 PHP 5.4 时，您需要拥有**public、private 和 protected 函数声明**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-11T13:47:46.907

问题是低于版本 5.4.21 的 php 在 E_STRICT 错误上的自动加载器存在问题。（E_STRICT 是编译时错误）

[https://bugs.php.net/bug.php?id=65322](https://bugs.php.net/bug.php?id=65322)

我在一些旧项目上遇到了完全相同的问题，它已在 2.7.4 中修复。

[https://github.com/cakephp/cakephp/issues/7376](https://github.com/cakephp/cakephp/issues/7376)

所以真正的解决方案是至少升级到 5.4.21 或者等待 CakePHP 2.7.4

# c# - 在 .NET 中暂停子进程？

> ID：10415197
> 
> 赞同：2
> 
> 时间：2012-05-02T13:54:20.550
> 
> 标签：c#, java, .net, process, minecraft

去年我在 .NET 中编写了一个小型守护程序应用程序，它基本上启动了一个 Minecraft 服务器，并提供了一个基于 Web 的 GUI 来管理它。它会做其他事情，例如在进程崩溃时重新启动进程，以及其他有用的功能。

我们公司最近听说一家法国托管公司已经设置了他们的服务器，当最后一个玩家断开连接时，服务器会关闭，直到另一个玩家加入。现在，我一直在思考这怎么可能，并想看看对此有何想法。我的守护进程已经可以知道连接了多少玩家，所以这不是问题。

我的伪思维过程是...

*   最后一名玩家与服务器断开连接
*   守护进程接管服务器端口上的连接监听
*   收到连接后，保存连接包数据并重启服务器子进程
*   将保存连接传递给 Minecraft java 进程

我真的不知道如何处理最后一步，但这是我想出的最佳解决方案。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:29:06.967

您不能“保存” TCP 网络连接，然后将其重定向到不同的进程。实现这一点的唯一方法是让您的工具充当代理服务器，接受所有连接并将所有数据发送到在不同端口上运行的服务器。

在这样的设置中，您可以在第一个传入连接时启动服务器。

唯一的其他解决方案将需要对网络接口的直接读取访问，例如 Wireshark/Pcap 库使用的方式。他们将能够检测 TCP SYN 数据包并在它们进入时启动服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:35:00.487

也许你会有更多的玩家想要一次连接，所以你可能会遇到这种方法的问题（因为我猜你的服务器不会立即启动）。

您应该有一个守护进程等待连接并将它们放在队列或其他东西上，直到服务器启动，然后将连接（或连接数据包或其他）提供给它。服务器启动后，所有连接都转发给它，让你的守护进程“停止”（也就是死或停止阻塞端口）

希望这可以帮助。

# macos - 减少空 CSS 文件的编译

> ID：10415198
> 
> 赞同：5
> 
> 时间：2012-05-02T13:54:21.953
> 
> 标签：macos, osx-lion, less

我一直在写更少的东西，并且使用 Codekit 在本地编译。

一切都编译到正确的目的地，因为它应该..*但是*

每次我保存一个 less 文件时，它都会在我的硬盘上的相同位置创建一个空的 CSS 文件。当 Codekit 关闭时会发生这种情况，因此它似乎不是程序本身的问题。

我不知道是什么导致了这种行为，我没有其他服务正在运行。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T00:38:08.930

对于遇到此问题的其他人，通常是属性上缺少或重复的分号或导致此特定问题的简单事物。最困难的部分是追踪特定的错误，所以最好的办法是尝试几个不同的编译器，并希望得到一个错误日志，它至少可以告诉你是哪个 .less 文件导致了问题。尝试 node.js 与 lessc、less.app、winless 或你的操作系统上可用的任何其他东西。这是一个常见问题，因此值得拥有另一个方便调试的“备份”编译器。

# cuda - 如何创建 CUDA 上下文？

> ID：10415204
> 
> 赞同：5
> 
> 时间：2012-05-02T13:54:38.747
> 
> 标签：cuda, cuda-context

如何创建 CUDA 上下文？CUDA 的第一次调用很慢，我想在启动内核之前创建上下文。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T14:37:07.873

强制运行时 API 上下文建立的规范方法是调用`cudaFree(0)`. 如果您有多个设备，请`cudaSetDevice()`使用要在其上建立上下文的设备的 ID 调用，然后`cudaFree(0)`建立上下文。

编辑：请注意，从 CUDA 5.0 开始，上下文建立的启发式方法似乎略有不同，并且`cudaSetDevice()`它本身会在设备上建立上下文。所以`cudaFree(0)`不再需要显式调用（尽管它不会伤害任何东西）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:00:39.840

使用运行时 API: `cudaDeviceSynchronize`、`cudaDeviceGetLimit`或任何实际访问上下文的东西都应该可以工作。

我很确定您没有使用驱动程序 API，因为它不会进行那种延迟初始化，但为了其他人的利益，驱动程序调用将是`cuCtxCreate`.

# gwt - 在 GWT 的 CellTable 列中添加图标

> ID：10415205
> 
> 赞同：1
> 
> 时间：2012-05-02T13:54:40.920
> 
> 标签：gwt, gwt2, uibinder

使用 textcoloumn 中的所有值。

我想添加图像单元格。

**我不想使用 Gwt-Ext 或 Smart 客户端。**

我的代码

```
private CellTable<FDocument> getDocumentTable() {
        if (documentTable == null) {
            documentTable = new CellTable<FDocument>();
            documentTable.setSize("600px", "300px");
            documentTable.addColumn(nameColumnD, "NAME");
            documentTable.addColumn(sizeColumnD, "SIZE");
            documentTable.addColumn(modified_by_ColumnD, "MODIFIED BY");
            documentTable.addColumn(dateColumnD, "MODIFIED ON");
            documentTable.addColumn(majorVersion, "Major Version");

        }
        return documentTable;
    }

TextColumn<FDocument> nameColumnD = new TextColumn<FDocument>() {
            @Override
            public String getValue(FDocument object) {
                return object.getName();
            }
        };          
        TextColumn<FDocument> sizeColumnD = new TextColumn<FDocument>() {
            @Override
            public String getValue(FDocument object) {
                return object.getSize();                            
            }
        };

..// similarly all the coloumn. 
```

我想添加到图像单元格。怎么做。

* * *

**已编辑**

```
ImageCell imageCell=new ImageCell();
        Column<FDocument,String> iconColumn = new Column<FDocument, String>(imageCell){

            @Override
            public String getValue(FDocument object) {
                // TODO Auto-generated method stub
                return object.getImageUrl(object);
            }

        }; 
```

在 FDocument 类中

公共字符串 getImageUrl(FilenetDocument 对象){

```
 if(object.getMimeType().equals("text/plain")){
        return "url(Txt16.gif)";
    }else{
        if(object.getMimeType()=="application/x-filenet-publishtemplate"){
            return "url(PublishTemplate16.gif)";
        }else{
            if(object.getMimeType()=="application/x-filenet-filetype-msg"){
                return "url(Msg16.gif)";
            }else{
                if(object.getMimeType()=="application/x-filenet-workflowdefinition"){
                    return "url(WorkflowDefinition16.gif)";
                }else{
                    if(object.getMimeType()=="application/msword"){
                        return "url(Doc16.gif)";
                    }else{
                        return "url(Txt16.gif)";
                    }

                }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:35:18.203

`render`可用于将任何类型的`HTML`内容添加为 CellTable 中的列的覆盖方法

```
TextColumn<FDocument> iconColumn = new TextColumn<FDocument>() {
        @Override
        public String getValue(FDocument object) {
            return "";                          
        }

    @Override
        protected void render(Context context, SafeHtml value, SafeHtmlBuilder sb) {
        if (value != null) {
          sb.appendHtmlConstant("<p style=\"textalign:center;\"><img src=\"icon.gif\"\></p>"); 

        }
       }    
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:21:50.717

在您的函数`getImageUrl()`中，返回的是 CSS 样式，而不是图像的路径...

因此，要么实现一个使用您提供的样式渲染的新 Cell，要么使用带有静态图标的[ImageResourceCell ，或者尝试](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/cell/client/ImageResourceCell.html)[Hardik Mishra](https://stackoverflow.com/a/10416986/426350)提供的渲染方法，但更新`getImageUrl()`以返回图像的 PATH。

# html - 用于移动应用的开源 html5 文档查看器

> ID：10415210
> 
> 赞同：3
> 
> 时间：2012-05-02T13:54:56.207
> 
> 标签：html, pdf, documentviewer, document-conversion

我正在使用 Phonegap 为 Android 和 iOS 平台构建移动应用程序。我想使用**html5 文档查看器**在移动应用程序中显示**pdf、ppt和所有内容。**

我看到了鳄鱼。它很好，但我需要一些我可以修补的开源。

您能否建议目前是否有任何开源解决方案可以在移动应用程序中显示文档？

# hadoop - 如何使用 hadoop Map reduce 处理/提取 .pst

> ID：10415213
> 
> 赞同：3
> 
> 时间：2012-05-02T13:55:00.013
> 
> 标签：hadoop, mapreduce, mapi, apache-tika, pst

我正在使用**MAPI**工具（它的 microsoft lib 和 .NET 中），然后使用**apache TIKA**库来处理并从 Exchange 服务器中提取**pst**，这是不可扩展的。

如何使用 MR 方式处理/提取 pst ... java 中是否有任何可用的工具、库可以在我的 MR 工作中使用。任何帮助都会很棒。

Jpst Lib 内部使用：`PstFile pstFile = new PstFile(java.io.File)`

问题在于**Hadoop API**的我们没有任何接近的东西`java.io.File`。

以下选项始终存在但效率不高：

```
 File tempFile = File.createTempFile("myfile", ".tmp");
  fs.moveToLocalFile(new Path (<HDFS pst path>) , new Path(tempFile.getAbsolutePath()) );
  PstFile pstFile = new PstFile(tempFile); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:46:18.963

看看 Behemoth (http://digitalpebble.blogspot.com/2011/05/processing-enron-dataset-using-behemoth.html)。它结合了 Tika 和 Hadoop。

我也编写了自己的 Hadoop + Tika 作业。模式是：

1.  将所有 pst 文件包装成序列或 avro 文件。
2.  编写一个仅映射作业，从 avro 文件中读取 pst 文件并将其写入本地磁盘。
3.  跨文件运行 tika。
4.  将 tika 的输出写回序列文件

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:19:45.930

无法在映射器中处理 PST 文件。经过长时间的分析和调试，发现API没有正确暴露，这些API需要本地文件系统来存储提取的pst内容。它不能直接存储在 HDFS 上。那是瓶颈。并且所有这些 API（提取和处理的库）都不是免费的。

我们可以做的是在 hdfs 之外提取，然后我们可以在 MR 作业中处理

# css - 边框长度属性 CSS

> ID：10415218
> 
> 赞同：0
> 
> 时间：2012-05-02T13:55:13.023
> 
> 标签：css, border

我目前正在为我的网站制作一个启动页面，并且需要有关我想在主文本下方运行的边框的帮助，该主文本将以页面为中心。在我将边框设置为 800px 的那一刻，它与上面的文本保持左对齐，所以它不均匀。我是 CSS 新手，感谢您提供任何帮助。这是我的代码：

```
#logo
{
width: 800px;
position: relative;
top: 150px;
left: 250px;
border-bottom: 1px solid white;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:02:33.317

尝试这个：

```
#logo {
  display:block; /* Unless it already is */
  width: 800px;
  margin: 100px auto;
  border-bottom: 1px solid white;
} 
```

# php - 这个 php 可以安全使用吗？

> ID：10415219
> 
> 赞同：-2
> 
> 时间：2012-05-02T13:55:14.990
> 
> 标签：php, javascript, jquery

在博客系统中，我正在将具有特定 url 的图像转换为 iframe。这也会生成一个javascript，但我不确定这是否真的安全。所以请在这里帮助我。

```
preg_match_all('~<img src="http://the-image.jpg" ([^>]+)>~i', $blog_entry, $matches);
        $iframe = array();
        foreach ($matches[1] as $str) {
            preg_match_all('~([a-z]([a-z0-9]*)?)=("|\')(.*?)("|\')~is', $str, $pairs);
            $iframe[] = array_combine($pairs[1], $pairs[4]);
        }

$iframe_width = htmlspecialchars($iframe['0']['width']);
        $iframe_src = mysql_real_escape_string($iframe['0']['alt']);
        $iframe_id = htmlspecialchars($iframe['0']['border']);
        $iframe_width = strip_tags($iframe_width);
        $iframe_src = strip_tags($iframe_src);
        $iframe_id = strip_tags($iframe_id);

        $t_blog_entry = preg_replace('~<img src="http://the-image.jpg" ([^>]+)>~i','<iframe src="'. $iframe_src .'" scrolling="no" frameborder="0" width="'. $iframe_width .'" height="0" style="border:none; overflow:hidden;" allowTransparency="true" id="'. $iframe_id .'-iframe"></iframe>',$blog_entry); 
```

这也会生成一个像这样的javascript：

```
<script type="text/javascript">
        $(document).ready(function() {
            $.getJSON("http://api.votelr.com/api-height.php?id=<?php echo ''. $votelr_id .''; ?>&callback=?", function(datavotelr){
                $('#<?php echo ''. addslashes($votelr_id) .''; ?>-iframe').css('height', datavotelr);
            });
        }); 
```

也许我在这里疯了，这完全不安全？让用户以某种方式操纵 javascript 或其他东西，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:00:41.090

mysql_real_escape_string 需要 mysql 连接才能工作。
htmlspecialchars 与 htmlentities 的效果不同，我相信最后一个更好。

无论是 int 类型，都将它
转换为 $id = (int) $value_int;

但是，如果您只想将图像转换为 iframe 内，则可以只使用 javascript 而不需要 php 创建 Element iframe 并将 img 标签“添加”到其中。

# c# - 是否可以使用母亲的对象字段而不将它们传递给方法的参数

> ID：10415220
> 
> 赞同：1
> 
> 时间：2012-05-02T13:55:16.037
> 
> 标签：c#, object

假设我们有 2 个类：

```
public class object1
{
string hehe = "xd";
void function()
   {
   if (x != 5) {} // here!
   }
}

public class object2
{
int x;
int y;
object1 z;
} 
```

我想在 object1 中的一个方法中使用 x (From object 2)，该方法存储在 object2 中。那可能吗？我知道，我可以使用方法参数传递数据，但我想知道是否有可能以某种方式避免这种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:01:48.683

要访问另一个类中的属性，您需要传递对象的瞬间或值本身。或者，如果属性是静态的，您可以在类定义中访问它。您还需要考虑为您的字段、属性和方法显式指定访问修饰符，以便它们更“可见”。

```
public class ClassOne
{
    public static int MyStaticInteger { get { return 1; } }

    public int x { get; set; }
    public int y { get; set; }
}

public class ClassTwo
{
    public const string hehe = "xd";

    public void doSomething(ClassOne myOtherClass)
    {
        if (myOtherClass.x != 5)
        {

        }

        if (ClassOne.MyStaticInteger != 5)
        {

        }
    }
} 
```

# replication - SQL Server 2012 中的镜像和可用性组

> ID：10415225
> 
> 赞同：1
> 
> 时间：2012-05-02T13:55:24.417
> 
> 标签：replication, mirroring, sql-server-2012

我一直在研究 SQL Server 2012 的新功能，以及它如何帮助我当前的情况。

目前我们使用的是 SQL Server 2008R2，并通过事务复制将两个 OLTP 数据库服务器复制到单个报告服务器。然后我们使用这些复制的数据库进行报告。

我对 SQL Server 2012 和可用性组是否可以替换它感兴趣 - 因此，我将使用新的可用性组并将两个 OLTP 服务器镜像到复制服务器而不是事务复制 - 报告将能够访问的位置只读副本。

我不确定这是否会运作良好，甚至根本无法运作。

有没有人有任何好的例子或经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:01:59.953

我个人认为这将比事务复制工作得更好，尽管我没有在真正的迁移场景中对两者进行任何正式比较。我知道，与事务复制相比，即使与标准镜像（这是对它的升级）相比，人们在事务复制方面遇到的麻烦也很多，你肯定会遇到更少的问题。

最大的好处是可以将辅助节点标记为只读-因此您可以根据需要运行所有报告，并且根本不会影响镜像。您只需要更强大的 tempdb（因为它本质上使用 rcsi 来执行此操作）。

当然，您确实需要知道 AG 的双方都需要获得完全许可才能将副本用于只读操作。双方都需要在支持 FCI 的 Windows 版本上运行（在 Windows Server 2008 R2 或更低版本上为 Enterprise 或更高版本；在 Windows Server 2012 及更高版本上为 Standard 或更高版本）——AG 中的 SQL 实例不需要集群，但它们需要位于操作系统中的基础设施之上。

# c# - 为什么在这种情况下将整数转换为字符串？

> ID：10415227
> 
> 赞同：9
> 
> 时间：2012-05-02T13:55:31.700
> 
> 标签：c#, operators, evaluation, associativity

下面发生了什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

public class DotNetPad
{
    public static void Main(string[] args)
    {
        int i = 10;
        string k = "Test";
        Console.WriteLine(i+k);
        Console.WriteLine(k+i);
    }
} 
```

`i`在这两种情况下都被转换为字符串。我对运算符优先级的概念（尽管这个例子没有显示太多）和评估方向感到困惑。有时评估是从左到右进行的，反之亦然。我不完全了解如何评估表达式的科学......

为什么`i`在上面的例子中被转换为字符串，而实际上并没有给出编译错误？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T13:58:25.863

来自 C# 规范 - 第 7.7.4 节加法运算符：

> **字符串连接**：
> 
> ```
> string operator +(string x, string y);
> string operator +(string x, object y);
> string operator +(object x, string y); 
> ```
> 
> 当**一个或两个** 操作数都是字符串类型时，二元 + 运算符执行字符串连接。如果字符串连接的操作数为 null，则替换为空字符串。否则，通过调用从类型 object 继承的虚拟 ToString 方法，将任何非字符串参数转换为其字符串表示形式。如果 ToString 返回 null，则替换为空字符串。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-02T15:16:17.420

> 我对运算符优先级和评估方向的想法感到困惑。

不，你不是。是的，这经常被混淆，但这不是你混淆的事情，因为优先级和评估顺序都与整数是否转换为字符串，或者为什么将整数添加到字符串是合法的问题*相关*.

为了首先让您对您声称感到困惑的点感到困惑，规则非常简单：

*   表达式根据运算符优先级和关联性加括号。
*   子表达式按从左到右的顺序计算。

这就是你需要知道的所有事情。假设 Q() 返回一个对象，该对象有一个带有 setter 的索引器，而其他方法都返回整数：

```
Q()[R()] = A() * B() + C() / D(); 
```

根据优先级和关联性用括号括起来：

```
Q()[R()] = ( ( A() * B() ) + ( C() / D() ) ); 
```

现在**每个**子表达式都是从左到右计算的。**每个子表达式**，包括本身具有子表达式的子表达式。所以这相当于程序：

```
var q = Q(); 
var r = R(); 
var a = A(); 
var b = B(); 
var t1 = a * b; 
var c = C();
var d = D();
var t2 = c / d;
var t3 = t1 + t2; 
```

最后，使用索引 r 和值 t3 调用 q 上的索引设置器。

请注意，左侧的**每个**子表达式都在右侧的每个子表达式之前进行评估。`A() * B()`是左边的`C() / D()`，所以它首先发生。

这与你的问题无关。你的问题是基于一个误解。

> 我想知道为什么 i 在上面的示例中被转换为字符串，而实际上并没有给出编译错误

有你的误会。`i`没有**被**转换为字符串。它正在转换为`object`. 您的程序完全等同于：

```
 int i = 10;
   string k = "Test";
   string t1 = System.String.Concat((object)i, (string)k);
   Console.WriteLine(t1);
   string t2 = System.String.Concat((string)k, (object)i);
   Console.WriteLine(t2); 
```

如您所见，首先没有从`i`到字符串的转换。`i`通过装箱转换转换为对象，然后传递给`String.Concat`方法。然后该方法调用`object.ToString()`装箱整数。

所以这涉及前半部分：

> 我想知道为什么 i 在上面的示例中被转换为字符串，而实际上并没有给出编译错误

后半部分是：为什么没有编译错误？

为什么会出现编译错误？C# 规范说您可以将任何字符串添加到任何对象，或将任何对象添加到任何字符串。int 是一个对象，因此您可以将其添加到字符串中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-02T13:57:12.567

在这两种情况下，您都拥有`+`将字符串作为操作数*之一*的运算符。没有涉及重载的用户定义运算符，因此编译器将使用*这两种*作为字符串连接的情况。

据我所知，如果存在用户定义的重载（例如运算符），C# 编译器只会在编译时`x + y`where or is a expression 的情况下不*使用* 字符串连接。`x``y``string`[`XName operator +(XNamespace, string)`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.op_addition.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:04:52.007

实际上，“+”运算符用于连接。在 int 和 string 之间进行连接将给出一个字符串（自动将 int 转换为字符串）

# ruby - 为什么 :key.hash != 'key'.hash 在 Ruby 中？

> ID：10415234
> 
> 赞同：0
> 
> 时间：2012-05-02T13:55:57.860
> 
> 标签：ruby, hash, dictionary, rhodes

我现在正在为[Rhodes](http://rhomobile.com/products/rhodes/)移动应用程序框架学习 Ruby，遇到了这个问题：Rhodes 的 HTTP 客户端将 JSON 响应解析为 Ruby 数据结构，例如

```
puts @params # prints {"body"=>{"results"=>[]}} 
```

由于这里的键“body”是一个字符串，所以我的第一次尝试`@params[:body]`失败了 (is `nil`) 而它必须是`@params['body']`. 我觉得这是最不幸的。

有人可以解释为什么字符串和符号具有不同的哈希值的理由，即`:body.hash != 'body'.hash`在这种情况下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T14:03:45.240

符号和字符串有两种不同的用途。

字符串是您熟悉的老朋友：可变且可垃圾回收。每次使用字符串文字或`#to_s`方法时，都会创建一个新字符串。您使用字符串来构建 HTML 标记、将文本输出到屏幕等等。

另一方面，符号是不同的。每个符号只存在于一个实例中并且它始终存在（即，它不是垃圾收集的）。因此，您应该非常小心地制作新符号（`String#to_sym`和`:''`文字）。*这些属性使它们成为命名事物*的良好候选者。例如，在宏中使用符号（如`attr_reader :foo`.

如果您从外部源获取哈希（例如，您反序列化了 JSON 响应）并且想要使用符号来访问其元素，那么您可以使用 HashWithIndifferentAccess（正如其他人指出的那样），或者从 ActiveSupport 调用帮助器方法：

```
require 'active_support/core_ext'

h = {"body"=>{"results"=>[]}}
h.symbolize_keys # => {:body=>{"results"=>[]}}
h.stringify_keys # => {"body"=>{"results"=>[]}} 
```

*请注意，它只会触及顶层，不会进入子哈希。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T14:26:38.657

符号和字符串从不`==`：

```
:foo == 'foo'  # => false 
```

这是一个（非常合理的）设计决定。毕竟，它们有不同的类、方法，一个是可变的，另一个不是，等等......

因此，它们永远是强制性的`eql?`：

```
:foo.eql? 'foo'  # => false 
```

两个对象`eql?`通常不具有相同的散列，但即使它们具有相同的散列，散列查找也会使用`hash` *then* `eql?`。所以你的问题真的是“为什么符号和字符串不是`eql?`”。

Rails 使用`HashWithIndifferentAccess`字符串或符号无差别地访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:02:22.137

在 Rails 中，params 哈希实际上是一个 HashWithIndifferentAccess 而不是标准的 ruby​​ 哈希对象。这允许您使用像 'action' 这样的字符串或像 :action 这样的符号来访问内容。

无论您使用什么，您都将获得相同的结果，但请记住，这仅适用于 HashWithIndifferentAccess 对象。

复制自：[Params 哈希键作为符号与字符串](https://stackoverflow.com/questions/6428318/params-hash-keys-as-symbols-vs-strings)

# ubuntu - Ubuntu、opencv 和链接

> ID：10415236
> 
> 赞同：5
> 
> 时间：2012-05-02T13:55:59.737
> 
> 标签：ubuntu, opencv, linker

前几天安装了Ubuntu，用apt-get安装了build_essentials、opencv、highgui等。g++是4.6.1，opencv好像是2.1.0..我没有从源码构建opencv..

我们有一些使用 opencv 功能的软件。让我们假设源文件名为 a.cpp 和 b.cpp。我编译为 ao 和 bo，然后将它们放入一个 .so 库（称为 libab.so）。

最后，有一个包含 main 的文件（称为 z.cpp）。我尝试从中构建一个可执行文件，但我收到大量 cv:: 东西的“未定义引用”错误。我的链接线看起来像这样：

```
g++ -fPIC -g z.cpp -L../lib -lab -lml -lcvaux -lhighgui -lcv -lcxcore -o z.out 
```

然后我得到未定义的参考错误（所有这些都是 cv:: stuff）。

有趣的是，如果我直接链接到我的 .o 文件，它构建得很好。所以这：

```
g++ -fPIC -g z.cpp a.o b.o -lml -lcvaux -lhighgui -lcv -lcxcore -o z.out 
```

作品。

我读过的所有内容似乎都暗示这可能是一个链接线排序问题，但我已经尝试了所有排序排列并遇到了同样的问题，所以我真的不认为这是我的问题，但我仍然可能是错的。任何人都知道如何使用我的库构建它，以及如果我使用库中的完整 .o 文件成功构建但不能使用库本身构建，为什么会有不同的行为？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T19:46:27.137

您可以将以下标志传递给 g++：

```
`pkg-config --libs opencv` 
```

例如：

```
g++ myprogram.cpp `pkg-config --libs opencv` -o myprogram 
```

pkg-config 为编译器提供有关库的信息。

你可以看看：

/usr/local/lib/pkgconfig/opencv.pc

该文件包含编译的所有相关信息：

```
prefix=/usr/local
exec_prefix=${prefix}
libdir=${exec_prefix}/lib
includedir_old=${prefix}/include/opencv
includedir_new=${prefix}/include

Name: OpenCV
Description: Open Source Computer Vision Library
Version: 2.3.1
Libs: -L${libdir} -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann
Cflags: -I${includedir_old} -I${includedir_new} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T14:34:59.573

在我看来，您正在链接旧的 C 库。今天的 OpenCV 链接命令更像：`-lopencv_core -lopencv_flann -lopencv_highgui...`.

我通常首先链接核心模块，因为顺序很重要，然后按照字母顺序（以确保我不会忘记一个模块）。

**- 编辑 -**

您是否尝试将 -lab 放在 opencv libs 之后？这可能会奏效，因为库是按照命令行的顺序链接的。

# syntax - Go 代码中的“err.(*exec.ExitError)”是什么？

> ID：10415240
> 
> 赞同：16
> 
> 时间：2012-05-02T13:56:19.813
> 
> 标签：syntax, go

例如，在这个答案中：

[https://stackoverflow.com/a/10385867/20654](https://stackoverflow.com/a/10385867/20654)

```
...
if exiterr, ok := err.(*exec.ExitError); ok {
... 
```

`err.(*exec.ExitError)` 那叫什么？它是如何工作的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-02T14:03:53.110

这是类型断言。我无法比[规范](http://golang.org/ref/spec#Type_assertions)更好地解释它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-22T07:04:11.060

这是一个类型断言。该`if`语句正在检查是否`err`也是一个`*exec.ExitError`. 让`ok`你知道它是不是。最后，`exiterr`is `err`，但“转换”为`*exec.ExitError`. 这仅适用于`interface`类型。

`ok`如果您 100000% 确定基础类型，您也可以省略。但是，如果你省略`ok`并且事实证明你错了，那么你会得到一个`panic`.

```
// find out at runtime if this is true by checking second value
exitErr, isExitError := err.(*exec.ExitError)

// will panic if err is not *exec.ExitError
exitErr := err.(*exec.ExitError) 
```

顺便说一句，这`ok`不是语法的一部分。它只是一个布尔值，您可以随意命名。

# asp.net - MS Outlook 2007 不支持电子邮件格式

> ID：10415242
> 
> 赞同：0
> 
> 时间：2012-05-02T13:56:25.023
> 
> 标签：asp.net, outlook, outlook-2007, inline-code

我正在从我的代码隐藏创建电子邮件格式。因为我正在使用`<div>`标签和`<a>`标签。对他们来说，我正在应用 style`background:url`属性。使用这种方式，我会收到带有图像和样式的电子邮件。它在 Thunderbird 中正常工作，但在 MS Outlook 2007 中不能正常工作。它会阻止内联图像表单呈现。

有没有其他方法可以内联插入图像。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:03:03.470

大多数电子邮件客户端（如 Outlook）无法正确呈现 div 尝试执行以下操作

1.  不要使用 Div。
2.  仅使用表格并在每个表格单元格上使用以像素为单位的固定宽度等。
3.  仅使用内联样式。
4.  确保您的图像可访问。像 www.mywebsite.com/image1.gif 这样 Outlook 可以下载它。

还有更多，但这些是需要解决的基本问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:06:45.017

你的问题是`div`。由于电子邮件模板不支持 div，因此您必须`table`改用。而不是`background`use `image`，但将`border`which 设置为 0。

```
<img src="yourimage" alt="My Image" /> 
```

-->>查看[HTML 图片](http://www.w3schools.com/html/html_images.asp)

你可以看看这篇关于[电子邮件模板的文章](http://www.codeproject.com/Articles/14367/Email-Templates)

# css - CSS 跨浏览器字体支持 - 粗体和斜体不起作用

> ID：10415243
> 
> 赞同：2
> 
> 时间：2012-05-02T13:56:26.607
> 
> 标签：css

我有一个页面需要使用非默认字体，并不是每个人都有这些字体，所以我使用了 CSS 的跨浏览器字体技巧。代码是这个

```
@font-face {
            font-family: 'Bebas';
            src: url('Bebas.eot');
            src: local('Bebas'), 
                 local('Bebas'), 
                 url('Bebas.ttf') format('truetype'),
                 url('Bebas.svg#font') format('svg'); 
        } 
```

现在这段代码完美地适用于我尝试过的所有不同字体，所以我对它非常满意。然而，我的问题是，如果我尝试将文本设置为粗体或斜体，除非安装了字体，否则它不起作用。有没有办法解决这个问题？或者这是跨浏览器字体支持的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:00:55.273

您需要做的就是添加另一个 @font-face 指定粗体文件并将 font-weight 属性设置为粗体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:00:50.167

我不确定您是否会考虑这样做，但 Google 有一种巧妙的方法可以将未安装的字体添加到您的网站[Google Fonts](http://www.google.com/webfonts)。它得到了很好的支持。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-02T13:59:32.867

无论您在网站上以粗体和斜体等`HTML`方式显示您的内容，如果它在 css 中是不可能的`HTML Tag``<strong></strong>``<i></i>`

# c# - 如何使用 Icommand 在 wpf 中切换两个菜单项

> ID：10415244
> 
> 赞同：0
> 
> 时间：2012-05-02T13:56:37.033
> 
> 标签：c#, wpf, binding, mvvm, icommand

我有两个 menuItems 绑定到相同的命令“显示图片”和“隐藏图片”，我希望任何时候只有一个项目显示或显示或隐藏。

除了参数之外，Execute 的语法相同。

是否有可能我只能同时显示一个，如果我按下该项目，它会切换到另一个？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:02:48.270

您可以使用 ElementName 将 Visibility 绑定到其他控件的可见性。然后使用转换器来翻转可见性。

```
Visibility="{Binding ElementName=otherControl,Path=Visibility,Converter={StaticResource HiddenToVisibleConverter}}" 
```

# html - JayData 与 Upshot（跨平台 HTML5 应用程序）

> ID：10415246
> 
> 赞同：2
> 
> 时间：2012-05-02T13:56:46.647
> 
> 标签：html, cross-platform, hybrid, upshot, jaydata

我正处于开发我的 iPhone/iPad/Android 应用程序的计划阶段。

基本上，该应用程序将从远程数据源查询数据并将其存储在本地。由于数据管理将是这个应用程序的关键功能，所以在这种情况下 UI 并不是一个重要的工厂。我决定开发一个基于 HTML5 和 JavaScript 的混合应用程序，并使用 PhoneGap/Cordova 进行部署。

我是 .NET 开发人员，我使用 Visual Studio 11 进行 Web 开发，所以我找到了单页应用程序模板，它默认使用 Upshot.js。

通过探索替代方案，我找到了 JayData [http://jaydata.org](http://jaydata.org)库。在我看来，它类似于 upshot.js。

您能否分享您的意见，我应该采用哪种方式构建跨平台的 HTML5 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:08:26.953

Upshot 和 JayData 看起来很相似，但实际上它们完全不同，这使您的选择更容易。有一些东西，但是两者都提供

两者都有优点和缺点（就像生活中的一切一样）

Upshot.js 由 Microsoft 提供支持，主要关注 oData + Knockoutjs 支持。它包含在 Visual Studio 中。您可以使用程序查询语言查询 oData 端点。Upshot 支持读/写操作，还支持实时更新。

JayData 支持多种数据源，其中包括 oData 以及设备本地 webSql，以及其他一些提供程序。JayData 让您可以使用相同的 JavaScript 函数查询 oData 或 webSql，因此您不必学习 sql 和 oData uri 语法。JayData 提供读/写操作，但实时更新需要少量用户代码。

# cakephp - 为 AuthComponent 定义自定义表

> ID：10415247
> 
> 赞同：1
> 
> 时间：2012-05-02T13:56:49.330
> 
> 标签：cakephp, authentication, cakephp-2.0, cakephp-2.1

我创建了一个简单的 CMS 来管理几个基于 CakePHP 的小型网站。在成功将插件从 1.3 迁移到 2.0 后，我在将 Cake 更新到最新版本 2.1.2 后遇到了 AuthComponent 问题。

插件的类名都以插件名称为前缀以避免重复的类名，因为应用程序与插件共享其大部分表。所以在某些情况下，我有一个`UsersController`用于主应用程序和一个`PluginNameUsersController`用于我的 CMS 插件（或 a`PostsController`和 a `PluginNamePostsController`）。插件模型依赖于`$useTable`找到正确的数据库表（所以`PluginNamePostsController`仍然使用`posts`）。

自从升级到 Cake 的 2.1.* 分支以来`AuthComponent`，它已经停止工作，因为它期望一个不存在的`pluginname_users`表而不是引用`users`.

是否可以为 定义自定义表，`AuthComponent`或者是否有任何其他方法可以使其正常工作？另外，这种行为是预期的吗？

组件配置`PluginNameAppController`如下：

```
 public $components = array(
    'Session', 'RequestHandler',
    'Auth'=> array(
      'loginAction' => array(
        'controller' => 'pluginname_users',
        'action' => 'login',
        'plugin' => 'pluginname'
      ),
      'loginRedirect' => array(
        'controller' => 'pluginname_posts',
        'action' => 'index',
        'plugin' => 'pluginname'
      ),
      'authenticate' => array(
        'Form' => array(
          'userModel' => 'PluginNameUser',
          'fields' => array('username', 'password')
        )
      )
    )
  ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:24:56.740

AuthComponent 实际上不知道表等。通过使用自定义模型，您可以`$table`在其上定义以在不同的表上工作。因此，第一件事是设置插件的模型以使用正确的表：

```
class PluginNameUser extends PluginAppModel {
  public $table = 'users';
} 
```

然后，通过使用点语法告诉您的身份验证方法使用插件的模型。

```
'authenticate' => array(
   'Form' => array(
     'userModel' => 'PluginName.PluginNameUser',
     'fields' => array('username', 'password')
   )
 ) 
```

现在，当 FormAuthenticate 尝试进行身份验证时，它将尝试使用该模型查找用户，它现在知道该模型在 PluginName 中。它加载您设置为使用该`users`表的模型，并在那里查找用户。

# django - 在控制器中获取复选框值

> ID：10415248
> 
> 赞同：0
> 
> 时间：2012-05-02T13:56:53.340
> 
> 标签：django

我有一个创建文本输入字段和复选框的模板。当复选框未被选中时，文本字段被禁用并清除，当它被选中时，它被启用，并且用户可能已经或可能没有输入它。在我的控制器中，我需要区分未选中复选框和选中复选框但文本字段为空白的两种情况。我可以获取文本字段的值，但不能获取复选框的值。有没有办法做到这一点？我用谷歌搜索了这个，我看到这里被问了几次，但没有一个解决方案似乎对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:53:03.443

你在找这个吗？

```
def myview(request):
    form = MyForm()

    if request.method == 'POST':
        form = MyForm(request.POST)

        if form.is_valid():
            checkbox = request.POST.get('my_checkbox', False) # will be True if checked

            if checkbox:
                # check textfield content
            else:
                # do something else

            return render_to_response(template, kwvars, context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:23:28.227

```
request.POST.get('my_checkbox_field') 
```

PS 在 Django 中，它们被称为“视图”而不是控制器。

**更新（基于评论）**

我将“控制器”表示为“视图”，因为 Django 没有控制器的概念并且它们最接近视图。如果不是这样，请务必纠正我。鉴于此，所有基于函数的视图*至少*都需要一个`request`参数。如果您使用的是基于类的视图，则`request`只是存储在视图对象上，因此您只需将其修改为`self.request`. 我建议您花更多时间彻底阅读文档，因为这几乎是有据可查的最低限度的理解内容。

# javascript - 如何在单页应用程序中加载新脚本？

> ID：10415250
> 
> 赞同：0
> 
> 时间：2012-05-02T13:57:05.490
> 
> 标签：javascript, html, web-applications

我正在尝试构建一个具有多个视图（屏幕、页面内容）的单页应用程序

我的应用程序的 UI 有一个永久菜单栏和一个“视图区域”，它根据菜单选择通过 Ajax 检索视图。这对于简单的 HTML 内容非常有用，并且可以让我的菜单脚本在后台运行，而不管正在显示哪个视图。

但是如果我的视图需要一个额外的脚本呢？由于视图更改（=由于单击按钮而加载页面片段），您如何加载和执行脚本，当我选择不同的视图时如何摆脱该脚本？

我知道我可以在页面片段中嵌入一个脚本标签并在那里编写代码，但我真的在寻找一种更强大的方法来做到这一点，最好是在加载视图时创建一个对象的实例并且然后在视图更改时丢弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:00:15.283

[yepnope.js](http://yepnopejs.com/)是一个很棒的条件加载器。您可以在加载脚本之前使用它来检查某些条件（例如视图、状态）。不过，我认为它无法*删除*已经加载的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:06:03.133

`<script>`您可以像添加任何其他标签一样使用 javascript 添加标签。

最困难的部分是知道在哪里放置它，但如果你可以控制你的标记，这不是太大的障碍。

这些方面的东西：

```
function DST(url)
{
    var s = document.createElement(’script’);
    s.type=’text/javascript’;
    s.src= url;
    document.getElementsByTagName(’head’)[0].appendChild(s);
} 
```

如果您需要在加载该脚本时自动发生某些事情，您应该能够使用[自执行匿名函数](http://briancrescimanno.com/2009/09/24/how-self-executing-anonymous-functions-work/)来完成这项工作。

```
(function(){alert('this happened automatically');})(); 
```

如果您需要将任何内容传递给函数，它将如下所示：

```
(function($){alert('this happened automatically');})(jQuery); 
```

如果您确实需要丢弃脚本，您可以删除节点，但最好保留它们，以防用户重新激活视图，因此您不必进行 AJAX 调用和关联的 HTTP 请求，允许页面加载速度更快。

# sql - 在sql中加入两个日期不完全匹配的表

> ID：10415257
> 
> 赞同：1
> 
> 时间：2012-05-02T13:57:29.073
> 
> 标签：sql, sql-server, tsql

我有一张桌子，日期比另一张桌子早大约 1 个月。

例如，一个表报告第一季度结束于 3 月 31 日，而另一个表报告第一季度结束于 2 月 28 日（或 29 日），但无论两个日期不完全相同，都可以在日期之前将它们连接在一起。

请有任何建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:00:40.947

您可以加入 DateDiff(dd, Date1, Date2) < x

或者更准确地说

```
select endOfMonth.*, begOfMonth.* 
from endOfMonth join begOfMonth 
on DATEADD (dd , 1 , endOfMonth.date ) = begOfMonth.Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:01:13.773

如果我正确理解您并且您在这些表中具有相同数量的列，那么您应该`UNION`在 SQL 查询中使用。在此处查看更多信息`UNION`：[http](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29) ://en.wikipedia.org/wiki/Set_operations_%28SQL%29 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:01:43.740

一种方法是使用返回任何给定日期的[DATEPART() 函数。](http://www.w3schools.com/sql/func_datepart.asp)`quarter`然后，您将能够加入返回的季度。

示例 SQL：

```
SELECT *
FROM 
(
    SELECT DATEPART(QUARTER,date_column) AS t1_quarter
    FROM table1
    UNION ALL
    SELECT DATEPART(QUARTER,date_column) AS t2_quarter
    FROM table2
) AS temp
WHERE temp.t1_quarter = temp.t2_quarter; 
```

将您需要的任何其他字段（最有可能是 ID 字段）放在内部 SELECTS 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:02:35.863

您的 ON 子句可以查看匹配的年份和季度：

```
ON TABLE1.YEAR([1st quarter end ]) = TABLE2.YEAR([1st quarter end ])
AND TABLE1.QUARTER([1st quarter end ]) = TABLE2.QUARTER([1st quarter end ]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T14:10:59.923

```
select val1 From Table1 T1 inner Join Table2 t2 on MONTH(T1.date1) = MONTH(t2.date1)
And YEAR(T1.date1) = YEAR(t2.date1) 
```

# php - Banner过期变量，如何跨页面抓取？

> ID：10415260
> 
> 赞同：0
> 
> 时间：2012-05-02T13:57:36.660
> 
> 标签：php

我有一个页面在大型显示器上显示多个横幅。横幅被手动放置在一页上的数组中（每个显示的主索引页），然后在内容轮换代码上完成包含。

我最近陪审团操纵了代码，以便在横幅上的事件过去后我们的网页设计师不在时更改横幅上的过期时间。我在索引页面上创建了第二个数组，并用“mktime(0,0,0,0,0,2020)”（不会很快过期）作为日期在与第一个横幅相同的数组点中填充数组（第一个数组中的 [1] 将对应于第二个数组中的 [1]），然后将代码添加到内容轮播页面以仅在日期减去今天 (time()) 大于 0 时显示标题页.

这是我作为 java 程序员的执行......显然我想将过期时间嵌入到各个页面中，但我不知道足够的 PHP 知道如何从每个页面中提取 $expire 变量，除非我是想太多像一个java程序员。无论如何，有没有更好的方法在 php 中执行这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:09:08.790

1.  将所有与横幅相关的代码放在一个单独的文件中。我们称之为**banner.php**
2.  使用[require](http://php.net/require)在所有页面上自动包含此文件

我还会考虑将有关横幅的所有内容放在同一个数组中。让每个数组元素是一个带有横幅地址和到期日期的新数组。甚至更好（这对于作为 Java 程序员的你来说应该很熟悉）：为横幅创建一个类，并让数组中的每个元素成为横幅类的对象。让对象具有到期日期作为属性！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:08:17.820

也许尝试使用会话和会话变量？[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

# vim - 为 Mac 安装 wget

> ID：10415261
> 
> 赞同：6
> 
> 时间：2012-05-02T13:57:39.887
> 
> 标签：vim, wget

从[http://ftp.gnu.org/gnu/wget/](http://ftp.gnu.org/gnu/wget/)下载 wget 1.13 后，我正在安装它。我按照此处的说明进行操作[http://krypted.com/mac-os-x/howto-install-wget-for-mac-os-x/](http://krypted.com/mac-os-x/howto-install-wget-for-mac-os-x/)。运行 ./configure 时出现问题。我在终端收到的输出是

```
error: --with-ssl was given, but GNUTLS is not available 
```

因此，我无法继续

```
make
make install 
```

谁知道我在这里想念什么？

非常感谢所有帮助。

如果有帮助，我正在 Mac 10.7.3 上运行。

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T13:59:39.063

我建议使用[Homebrew](https://brew.sh/)。

这是一个非常简单易行的安装，完成后，您只需输入`brew install wget`，它就会自动为您完成所有工作。

# c# - 如何从存储过程插入表（用户定义类型）并传递给c#

> ID：10415262
> 
> 赞同：0
> 
> 时间：2012-05-02T13:57:40.203
> 
> 标签：c#, sql, sql-server-2008, c#-4.0

如何从**存储过程****插入**表（用户定义类型）并传递给c#

 ****表结构：**

```
CREATE TABLE [dbo].[RegisterChoiceUserInitial](
    [RegisterChoiceUserInitialID] [int] IDENTITY(1,1) NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [RegisterChoiceUserInitialJob] [nvarchar](50) NULL,
    [RegisterChoiceUserInitialOrganization] [nvarchar](50) NULL,
    [RegisterChoiceUserInitialUnit] [nvarchar](50) NULL,
    [RegisterChoiceUserInitialMembershipType] [nvarchar](50) NULL,
    [RegisterChoiceUserInitialStart] [nvarchar](10) NULL,
    [RegisterChoiceUserInitialEnd] [nvarchar](10) NULL,
 CONSTRAINT [PK_RegisterChoiceUserInitial] PRIMARY KEY CLUSTERED 
(
    [RegisterChoiceUserInitialID] ASC
) 
```

**用户自定义类型：**

```
CREATE TYPE [dbo].[TableTypeInitial] AS TABLE(
    [ID] [int] NULL,
    [InitialJob] [nvarchar](50) NULL,
    [InitialOrganization] [nvarchar](50) NULL,
    [InitialUnit] [nvarchar](50) NULL,
    [InitialMembershipType] [nvarchar](50) NULL,
    [InitialMembershipStart] [nvarchar](10) NULL,
    [InitialMembershipEnd] [nvarchar](10) NULL
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:07:10.530

无法将数据表作为输出参数返回。将表结果从 xp 返回到 c# 的唯一方法是使用 xml 参数或以下方式。

**sql脚本：**

```
create procedure sp_returnTable
    body of procedure
    **select * from RegisterChoiceUserInitial**
end 
```

**示例 C# 代码：**

```
 string connString = "<your connection string>";
    string sql = "name of your sp";

SqlConnection conn = new SqlConnection(connString);

try {
   SqlDataAdapter da = new SqlDataAdapter();
   da.SelectCommand = new SqlCommand(sql, conn);
   da.SelectCommand.CommandType = CommandType.StoredProcedure;

   DataSet ds = new DataSet();   
   da.Fill(ds, "result_name");

   DataTable dt = ds.Tables["result_name"];

   foreach (DataRow row in dt.Rows) {
               //manipulate your data
   }

} catch(Exception e) {
   Console.WriteLine("Error: " + e);
} finally {
   conn.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:04:28.073

您应该为您的类型进行序列化/反序列化，并将序列化对象的字符串写入 SQL，然后当您需要获取它时，您从表中读取字符串并将其反序列化为您的类型。

**编辑**

关于序列化你可以在这里阅读[csharp-tutorial-serialize-objects-to-a-file](http://www.switchonthecode.com/tutorials/csharp-tutorial-serialize-objects-to-a-file)他们使用序列化到文件，但将其转换为字符串并不难**

# powershell - 远程运行 Get-EventLog 会擦除实际事件日志

> ID：10415266
> 
> 赞同：3
> 
> 时间：2012-05-02T13:57:56.327
> 
> 标签：powershell, powershell-remoting

我编写了一个脚本来远程获取 PowerShell 中的事件日志，但我不喜欢该脚本创建自己的事件日志条目的方式。

具体来说，此脚本会抓取几种类型的事件 ID，包括登录/注销事件。最近我被要求运行脚本来获取另一个用户的事件，并且必须在几个小时内获取这些数据。通常我会启动脚本并让它运行一天中的大部分时间（因为这里通常有很多数据），但是这次为了加快进程，我启动了 4 个脚本实例来更快地获取这些数据通常。脚本的每个实例都在查看不同的时间范围，因此所有 4 个脚本组合都在我被要求的时间范围内获取。

在 3 个小时左右的时间里，我在这台远程计算机上对我的用户 ID 进行了超过一百万次不同的登录尝试。我有太多的登录信息，以至于我最终覆盖了我最初被要求获取的事件日志数据。

吸取的教训，我现在正在研究如何使这更快、更高效、更可靠。

这是我的代码的核心，非常简单明了，并且在大多数情况下都有效。

```
$output = Get-EventLog `
    -instanceID 4672,4647,4634,4624,4625,4648,4675,4800,4801,4802,4803 `
    -logName Security `
    -after (Get-Date $inStartDate) `
    -before (Get-Date $inEndDate).addDays(1) `
    -message ("*" + $InUserID + "*") `
    -computerName $inPCID 
```

我想到目前为止，我的研究中有几个问题是我无法弄清楚的。为什么 Get-EventLog 需要建立如此多的连接？是因为连接不断下降还是什么？

获取此数据的最快方法是什么 -`Get-EventLog`通过指定 a 使用本机命令`-ComputerName`，或者我应该使用类似`Enter-PSSession`or的东西`Invoke-Command`。

将`Enter-PSSession`和`Invoke-Command`两者都有我遇到的相同问题`Get-EventLog`吗？

我想避免使用`Enter-PSSession`，`Invoke-Command`因为我不能保证公司中的所有机器都启用远程执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:42:21.293

所以，问题在于`Get-EventLog`最终擦除了我试图获取的远程事件日志。不知道为什么，但是`Get-EventLog`做了超过一百万个“连接”，显示为登录/注销事件，从而覆盖了我的日志。

根据@Richard 的评论，我做了一些研究，并决定使用`Get-WinEvent`. 的更新和更强大的替代品进行测试`Get-EventLog`。在对此进行了一周的测试后，我遇到的最坏情况是我的脚本创建了 4 个登录/注销事件。这是完全可以接受的，并且比超过一百万个事件要好得多。

我与该主题相关的一个附带问题是性能。因为我们正在收集许多远程日志，所以有时我们需要尽快完成这项工作。我的问题是`Get-WinEvent`，与 an`Enter-PSSession`或`Invoke-Command`.

对于这个问题的范围，`Get-WinEvent`既满足速度要求又满足事件要求，并且依靠 cmdlet 执行我的远程处理效果很好。

我的代码很简单，但出于记录原因，我会发布它：

```
Get-WinEvent `
    -computerName $inPCID `
    -FilterHashtable @{LogName="Security";Id=4672,4647,4634,4624,4625,4648,4675,4800,4801,4802,4803; `
                       StartTime = $inStartDate; EndTime = $inEndDate} | Where-object {$_.message -like ("*" + $InUserID + "*")} `
    | export-csv $fullOutputFile 
```

# javascript - 用于更改 html 文本中最后一个字符的字体的 JQuery 或 Javascript 代码

> ID：10415267
> 
> 赞同：2
> 
> 时间：2012-05-02T13:57:56.477
> 
> 标签：javascript, jquery, css, string

我知道这听起来很奇怪，但我想创建一个 html 类来更改标记文本中**最后一个**字符的字体。

虽然 css 允许您更改某些字符串的**第一个字符**的字体大小和颜色，但遗憾的是没有什么可以更改最后一个字符的字体。

最好`charAt(length-1)`在 JS 中使用，还是在 JQuery 中有某种方式来更改所选类的最后一个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:08:20.430

您必须获取、更改然后重新命名文本的 html 内容。

我做了一个小提琴来说明它：

[http://jsfiddle.net/dystroy/3maG5/](http://jsfiddle.net/dystroy/3maG5/)

请注意存在风险：如果您的段落（或其他文本）以元素结尾，则如果不进行更多分析，您可能会遇到问题。

编辑：我只是看到 eyurdakul 在我之前几秒钟做出了一个非常相似的答案。我也觉得他说的很对。我让这个答案作为补充，给出一个可测试的例子。当然，如果应该接受一个答案，那可能是 eyurdakul 的答案，他更快:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:07:34.947

给他们一些选择器的类，例如.last；

```
$(".last").each(function(){
     var inner = $(this).html();
     var firstPart = inner.substring(0, (inner.length-1));
     var secondPart = inner.substring((inner.length-1), inner.length);
     $(this).html(firstPart);
     $("<span/>").css("font", "Arial").html(secondPart).appendTo($(this));
}); 
```

# java - 在 JSP 提交按钮中使用 Servlet 变量

> ID：10415271
> 
> 赞同：2
> 
> 时间：2012-05-02T13:58:00.807
> 
> 标签：java, jsp, servlets

我正在寻找一些关于我试图解决的 Servlet/JSP 问题的建议和技巧。我需要在通过 request.setAttribute 传递的 JSP 页面中访问一个 Servlet 变量，然后该变量需要通过 doPost 传递到另一个 Servlet。我可以将它传递给页面并可以显示/打印，但我希望它不显示，而只是传递给提交按钮。

这是我的 Servlet 代码：

```
request.setAttribute("jsession", jsession); 
```

我可以执行以下操作并且它可以工作，但它会在页面上显示它并且最终用户不需要看到这个：

```
<select name="jsession">
    <c:forEach var="jsession" items="${jsession}">
        <option value="${jsession}">${jsession}</option>
     </c:forEach>
</select> 
```

但是，我想做这样的事情：

```
String sess = ${jsession}. 
```

然后这将被传递到提交按钮上，也许我想多了。一些退伍军人能否指出我正确的方向。我感谢退伍军人在这里付出的所有努力。太感谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:02:23.777

如果我理解正确，您只需要一个隐藏字段而不是您的选择框：

```
<input type="hidden" name="jsession" value="<c:out value="${jsession}"/>"/> 
```

# c# - 如何检查变量的类型是否与存储在变量中的类型匹配

> ID：10415276
> 
> 赞同：105
> 
> 时间：2012-05-02T13:58:20.127
> 
> 标签：c#, reflection, types

```
User u = new User();
Type t = typeof(User);

u is User -> returns true

u is t -> compilation error 
```

如何以这种方式测试某个变量是否属于某种类型？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-05-02T14:51:39.820

其他答案均存在重大遗漏。

`is`运算符不*检查*操作数的运行时类型是否*正是*给定类型；相反，它检查运行时类型*是否与给定类型兼容*：

```
class Animal {}
class Tiger : Animal {}
...
object x = new Tiger();
bool b1 = x is Tiger; // true
bool b2 = x is Animal; // true also! Every tiger is an animal. 
```

但是使用反射检查类型*标识是为了检查**身份*，而不是为了*兼容性*

```
bool b5 = x.GetType() == typeof(Tiger); // true
bool b6 = x.GetType() == typeof(Animal); // false! even though x is an animal

or with the type variable
bool b7 = t == typeof(Tiger); // true
bool b8 = t == typeof(Animal); // false! even though x is an 
```

如果这不是您想要的，那么您可能需要 IsAssignableFrom：

```
bool b9 = typeof(Tiger).IsAssignableFrom(x.GetType()); // true
bool b10 = typeof(Animal).IsAssignableFrom(x.GetType()); // true! A variable of type Animal may be assigned a Tiger.

or with the type variable
bool b11 = t.IsAssignableFrom(x.GetType()); // true
bool b12 = t.IsAssignableFrom(x.GetType()); // true! A 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-02T13:59:30.937

`GetType()`每个框架类型都存在，因为它是在基本`object`类型上定义的。因此，无论类型本身如何，您都可以使用它来返回底层`Type`

所以，你需要做的就是：

```
u.GetType() == t 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-02T14:00:03.650

您需要查看您的实例的类型是否等于类的类型。要获取实例的类型，请使用以下[`GetType()`](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)方法：

```
 u.GetType().Equals(t); 
```

或者

```
 u.GetType.Equals(typeof(User)); 
```

应该这样做。显然，如果您愿意，可以使用 '==' 进行比较。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-05T14:39:55.047

为了检查一个对象是否与给定的类型变量兼容，而不是写

```
u is t 
```

你应该写

```
typeof(t).IsInstanceOfType(u) 
```

# java - Java ListView 类？

> ID：10415278
> 
> 赞同：0
> 
> 时间：2012-05-02T13:58:28.530
> 
> 标签：java, android, xml

listview 布局 xml 和 Listview Java 类有什么区别？当用户输入文本并按下回车键时，我试图让它出现在右侧的设定位置，但是当用户收到回复时，它会显示在列表视图的左侧。就像安卓手机上的短信一样。有谁知道我该怎么做？使用 java 类还是 xml 布局？我也想要列表视图上的动画和动态内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:01:34.703

`ListActivity`为您提供所有的内置功能和方法，`ListView`但只能`ListView`添加到整个`Activity`. 通过`ListView`在 xml 中使用，您可以`Buttons`在`EditText`同一个`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:03:17.450

基本上，xml 用于将设计（视觉效果）与代码（功能）分开。尽管您可以通过 xml 执行一些功能，但通常最好在您的类中的 Java 代码中执行此操作。

我想您可以创建一个 ListView 来遍历 2 个不同的列表项：

第一个将在左侧显示数据（您的案例中的文本），第二个条目将在右侧显示。对于每个列表输入，您将创建一个不同的 xml 布局，其中的小部件根据需要左右对齐。

# java - AbstractRoutingDataSource + JPA 不会创建除 defaultTargetDataSource 之外的表

> ID：10415284
> 
> 赞同：5
> 
> 时间：2012-05-02T13:58:54.983
> 
> 标签：java, spring, hibernate, orm

我使用 JPA 注释（Hibernate 实现）来初始化我的数据库模式。我按照文章[DYNAMIC DATASOURCE ROUTING](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)来实现动态数据源路由类。

但是，我有两个数据库（映射 2 个数据源）。我将第一个数据源设置为 defaultTargetDataSource。然后启动我的应用程序。当我的应用程序尝试访问第二个数据源时，它告诉我该表不存在。似乎 AbstractRoutingDataSource 只为默认数据源创建表，而为其他数据源创建表。

有什么想法在所有数据库中创建模式吗？

PS.我正在使用 AbstractRoutingDataSource 来实现我自己的数据库分片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-16T23:35:38.247

我猜你正在使用hibenate配置：

```
spring:
  jpa:
    hibernate:
      ddl-auto: update 
```

将实体更改反映到数据库架构。只要我们使用配置为在启动时连接的单个数据源，这就可以正常工作。

但是，如果您有多个数据源，则无法使用此功能。一般的方法`AbstractRoutingDataSource`是在启动时没有数据源，但在运行时选择它。

如果您选择一个主数据源，那么它将仅应用于主数据源，因为休眠在启动时应用此功能，但不会迁移其余数据库。

要反映对所有数据库的更改，您可以使用数据库迁移工具，例如 Flyway 或 Liquibase。

Flyway 使用 SQL 并且非常易于配置和使用。

# arrays - 如果满足条件，则向数组添加值

> ID：10415285
> 
> 赞同：6
> 
> 时间：2012-05-02T13:58:59.967
> 
> 标签：arrays, perl, if-statement, perl-data-structures

我正在构建一个数组哈希数组

```
my @array = (
    {label => 'first hash'},
    {label => 'second hash',
     innerarray => [
        {label => 'first inner hash'},
        {label => 'second inner hash'},
      ]
    },
); 
```

有没有办法仅在满足条件时才添加第二个内部哈希？像这样的东西：

```
my @array = (
    {label => 'first hash'},
    {label => 'second hash',
     innerarray => [
        {label => 'first inner hash'},
        {label => 'second inner hash'} if 1==1,
      ]
    },
); 
```

我尝试使用 push 重写我的代码：

```
my @innerarray = ();
push @innerarray, {label => 'first inner hash'};
push @innerarray, {label => 'second inner hash'} if 1==1;

my @array = (
    {label => 'first hash'},
    {label => 'second hash',
     innerarray => \@innerarray
    },
); 
```

但它变得非常难以辨认，因为我必须在使用它们之前预定义所有内部数组，在某些情况下，这比用法要多 100 行代码。

有没有办法直接在我插入数组元素的地方添加 if 条件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T14:09:45.753

使用[条件运算符](http://p3rl.org/op#Conditional-Operator)，可用作表达式。

```
my @array = (
    {label => 'first hash'},
    {
        label      => 'second hash',
        innerarray => [
            {label => 'first inner hash'},
            (1 == 1)
                ? {label => 'second inner hash'}
                : (),
        ]
    },
); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T14:06:03.063

您在`innerarray`（示例 1）中存储了一个数组引用，但在您的重写中，您尝试存储该数组。
试试这个：

```
my @innerarray = () ;
push @innerarray, {label => 'first inner hash'};
push @innerarray, {label => 'second inner hash'} if 1==1; # Not a real condition ...

my @array = (
    {label => 'first hash'},
    {label => 'second hash',
     innerarray => \@innerarray
    },
) ; 
```

你也错过了`;`两次。

对于您关于内联某些内容的问题...

```
my @array = (
    {label => 'first hash'},
    {label => 'second hash',
     innerarray => [
        {label => 'first inner hash'},
        ( $condition == 1 ? {label => 'second inner hash'} : () ) ,
      ]
    },
) ; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T14:10:44.400

你可以做：

```
#!/usr/bin/env perl

use strict; use warnings;

my @array = (
    {label => 'first hash'},
    {label => 'second hash',
     innerarray => [
        {label => 'first inner hash'},
        1 == 0 ? {label => 'second inner hash'} : (),
      ]
    },
);

use YAML;
print Dump \@array; 
```

输出：

```
---
- 标签：第一个哈希
- 内部数组：
    - 标签：第一个内部哈希
  标签：第二个哈希
```

但是，*为什么*？

你也可以这样做：

```
 ({label => 'second inner hash'}) x (1 == 0), 
```

但是，再次，*为什么*？

具体来说，将其嵌入到数据结构的初始化中，在视觉上隐藏了代码读者正在发生的事情。如果条件稍微复杂一点，就必然会引入难以追踪的错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-02T15:53:11.320

除了条件运算符（有时与它结合使用）外，`map`通常在类似情况下很有用。

```
my @labels = (
    'first inner hash',
    'second inner hash',
);

my @array = (
    {label => 'first hash'},
    {
        label      => 'second hash',
        innerarray => [
            ( map { { label => $_ } } @labels ),
        ]
    },
); 
```

# linq - 如何使用 linq 简化数字范围的生成？

> ID：10415286
> 
> 赞同：2
> 
> 时间：2012-05-02T13:59:03.573
> 
> 标签：linq

如果我有一个`x`可以改变的数字，现在就说出来`25`......我如何以更简单的方式执行以下操作？

```
colQty.DataSource = new List<Int16> { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25 }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T14:02:28.327

就像是

```
 var range = Enumerable.Range(start: 1, count: x).ToList(); 
```

你可以使用`ToList<Int16>()`，但我不会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T14:02:25.973

用这个：

```
var numbers = Enumerable.Range(1, 25); 
```

这将创建`IEnumerable<int>`数字 1 到 25 的 a。如果您需要 a ，请在之后`List<int>`添加：`.ToList()``Range`

```
var numbers = Enumerable.Range(1, 25).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:02:38.060

```
var list = new List<int>();

for(var i = 1; i <= x; i++){ list.Add(i);}

colQty.DataSource = list; 
```

# regex - 正则表达式：在单词“Inst”或“Ins titution”之前但后面没有作为同一单词一部分的单词组的任何字符集

> ID：10415287
> 
> 赞同：1
> 
> 时间：2012-05-02T13:59:07.370
> 
> 标签：regex

使用正则表达式，我似乎无法使以下工作。在单词“ **Inst** ”或“ Ins **​​titution** ”之前但后面没有作为同一单词一部分的单词组的任何字符集。例如，我不想匹配“ **m_InstitutionGroup** ”，但我确实想要“ **m_Institution blah blah Group** ”

其他示例：

```
Inst - include
inst - include 
institution - include
rtertInstitutionsdfdf – include
345_rtertInstitutionssdf45d454fdf – include
InstXXX555_group - exclude
Institution456eretGroup - exclude 
```

我努力了：

```
inst(itution)(?!(Group)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:14:44.593

尝试这个

```
[Ii]nst(itution)?(?!(\w*[Gg]roup)) 
```

[在 Regexr 上](http://regexr.com?30r1v)查看

这将匹配`[Ii]nst`一个可选的`(itution)?`跟随，但前提是没有`[Gg]roup`跟随`\w`之间只有字符（字母、数字和_）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:06:19.803

这个正则表达式：

```
inst(itution)(?!(Group)) 
```

只会匹配`institution`，而不是`inst`，因为您没有`itution`选择。此外，它仅在紧随`Group` **其后**`institution`时才有效。

尝试：

```
[Ii]nst(?:itution)?(?!\S*[Gg]roup) 
```

读作`Inst`, `inst`, `Institution`, or`institution`后跟任何内容直到下一个空格，只要任何内容​​不包含字符串`group`或`Group`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:08:15.183

您需要在搜索词之间匹配一个空格：

```
\w+(?=[iI]nst(itution)?.* .*Group) 
```

请注意，这些匹配第一个字母是任何大小写 - 即`i`或`I`- 因为你的尝试表明你想要这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:18:40.887

```
\w*inst(itution)?\w*(?<!group)\b 
```

您似乎忽略了大小写，因此将相应的标志添加到正则表达式函数中。

[正则表达式链接](http://regexr.com?30r1s)

# objective-c - iOS 同步 - Core Data 对象知道它必须被推送到服务器的好方法是什么？

> ID：10415289
> 
> 赞同：0
> 
> 时间：2012-05-02T13:59:25.517
> 
> 标签：objective-c, ios, core-data, ios5, synchronization

我正在 iPad 和 Web 服务器之间构建同步功能。我使用的方法与[此处描述](https://stackoverflow.com/a/5052208/34290)的方法非常接近。我只有一种类型的对象，我们称它为 Story，它必须是同步的。它是一个核心数据实体（托管对象）。

我必须解决的剩余问题是知道“无论何时发生变化并需要同步到服务器”。一种方法是找到修改故事的每一段代码，并设置一些需求同步标志。这似乎并不优雅，而且似乎随着时间的推移，开发人员可能会忘记更新标志以进行新的修改类型。

Core Data 对象是否有办法观察自己，所以任何时候进行任何更改，都会执行特定的方法？这将使这很容易。

另一种选择可能是在对托管对象上下文执行保存操作之前使用 isUpdated 方法。您要么必须仅在一个地方调用 save ，要么在您保存的每个地方都执行此操作（听起来像第一个选项）。我想我可以制作一个辅助方法，在保存之前遍历所有 Story 对象，看看它们中的任何一个是否需要设置它们的标志。唯一的缺点是我会遍历系统中的所有 Story 对象以进行任何保存，即使是与 Story 无关的保存。

无论如何，我将不再试图大声猜测解决方案 - 有没有人有过这样做的好方法的经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:10:14.433

SDK 为您服务。请参阅[NSManagedObjectContext 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)，在页面的最后，MOC 将发布您可以订阅的通知，包括 NSManagedObjectContextObjectsDidChangeNotification。您可以收听这些并在保存 MOC 的同时进行更新调用。

# jquery - jquery 可拖动集包含

> ID：10415298
> 
> 赞同：0
> 
> 时间：2012-05-02T13:59:46.627
> 
> 标签：jquery, jquery-ui, drag-and-drop

我有一个可拖动的 div，我想将其设置为包含 80% 的父级。我怎样才能做到这一点？

```
$( ".content-columns-sep" ).draggable({
            axis: "x",
            containment: "parent",
            cursor: "crosshair",
            grid: [10, 0],
            drag: function(event, ui) {
                ..
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:16:51.897

正如 Neil 建议的那样，您可以使用其父级大小的 80% 的内部 div，然后将约束拖动到该 div 内。这是[jsfiddle 上](http://jsfiddle.net/UgMWv/)的一个简单粗暴的示例。

作为参考，标记是：

```
<div style="background-color: grey" class="draggable ui-widget-content">
    <div class="internal-area">
      <p style="background-color: red" id="draggable5" class="ui-widget-header">
        I'm contained within a percentage of my parent
      </p>
    </div>
</div> 
```

样式是：

```
.draggable { width: 300px; height: 300px; padding: 0.5em; float: left; margin: 0 10px 10px 0; }
.internal-area { width: 80%; height: 80%; background-color: white; margin-left: 30px; margin-top: 30px;}
#draggable, #draggable2 { margin-bottom:20px; }
#draggable { cursor: n-resize; }
#draggable5 { cursor: e-resize; width: 70px;}
#containment-wrapper { width: 90%; height:150px; border:2px solid #ccc; padding: 10px; } 
```

代码是：

```
$( "#draggable5" ).draggable({ containment: "parent" }); 
```

# actionscript-3 - 如何在 Flash AS3 中将多个 mp3 合并为一个可下载的 mp3 文件？

> ID：10415310
> 
> 赞同：1
> 
> 时间：2012-05-02T14:00:34.727
> 
> 标签：actionscript-3, flash, mp3

我有几个简短的 mp3 文件，用户可以在时间线上重新组织。之后，我想将结果保存为一个 mp3 文件，结合六个短文件。在其他项目中，我完成了麦克风录音，使用 alchemy ShineMP3Encoder 压缩为 mp3，并将其保存为文件。

我看到至少两种方法：

1.  从加载的 Sound 对象中提取所有 ByteArray 数据，将其连接到一个新的 ByteArray 中并使用 Shine 对其进行压缩。但是 Sound.extract 中的 ByteArray 似乎与编码器不兼容，告诉我“错误：输入不是 MS-RIFF 文件”
2.  以某种方式组合原始 MP3 文件而不需要解码和编码。但这意味着必须剥离文件头信息等。

如果在 Flash 中不可能或效率很低，我会考虑使用 PHP 的服务器端解决方案。所以如果这很容易，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:52:21.733

这些是否需要物理组合成一个文件？即 Flash 是否需要实际生成单个 MP3？或者只是像一个长文件一样回放给用户？

Flash 没有任何内置的 MP3 编码能力，尽管我相信各种 Flash 媒体服务器都有这种能力（Red5 等）。实际上，在探索中，这里有一个人的链接，他声称他拥有可以让您录制 MP3 客户端的技术，尽管它似乎更多地用于来自内置麦克风的音频录制：

[http://fms.denniehoopingarner.com/](http://fms.denniehoopingarner.com/)

也许你可以和他一起修改代码以使用现有的声音文件并生成一个新的。否则，您可能需要使用一些花哨的服务器端步法来完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T08:19:37.207

事实证明，合并多个 mp3 文件实际上很容易。您可以连接他们的原始数据并将其保存为新的 mp3 文件。有几个条件适用：

1.  确保所有压缩设置相同且非动态。比特率、频率、立体声/单声道等。
2.  您的操作系统或 mp3 播放器指示的最终结果长度可能是错误的，并且仅显示第一段的长度。这是标题数据。大多数播放器，包括 Flash，只会播放整个文件，所以在大多数情况下，这可能不是问题。

在这个例子中，我使用了 Greensock 的 LoaderMax 库。DataLoader 是您要使用的特定加载器类型（默认情况下应为二进制）。*请注意，我稍后使用 url 作为名称来标识加载程序，并且需要将一些 *_variables* 声明为类成员* 当然，您也可以使用本地方式或不同的库来加载文件。

```
for each ( var mp3FileURL : String in _mp3FileURLs )
{
    var loader : DataLoader = new DataLoader( mp3FileURL, mp3FileURL ) );
    _preloadQueue.append( loader );
} 
```

加载队列完成后，您可以开始处理来自加载器的数据。

```
_audioEditMP3 = new ByteArray();

for each ( var mp3FileURL : String in _mp3FileURLs )
{
    var content : * = _preloadQueue.getContent( mp3FileURL );
    _audioEditMP3.writeBytes( content );
} 
```

您现在可以保存文件了！

```
var file : FileReference = new FileReference();
file.save( _audioEditMP3, "myAudioCompilation.mp3" ); 
```

# python - django-rest-framework 使用视图返回 500 和 POST

> ID：10415316
> 
> 赞同：0
> 
> 时间：2012-05-02T14:00:42.433
> 
> 标签：python, django, django-views

我试图让以下工作：[http](http://django-rest-framework.org/examples/views.html) ://django-rest-framework.org/examples/views.html在我自己的 django 应用程序中。当我执行 GET 时，它返回 200 并提供正确的响应。但是，当我尝试 POST 时，我得到的只是 500 错误。我完全被难住了，看起来很简单，我无法弄清楚我做错了什么。

***网址.py：***

```
from django.conf.urls.defaults import patterns, url
from test.testapp.views import ws_list

urlpatterns = patterns('test.testapp.views',
    ...
    url(r'^ws/List/$', ws_list.as_view()),
    url(r'^ws/List/(?P<pk>\d+)/$', ws_list.as_view()),
) 
```

***视图.py：***

```
...
from djangorestframework.views import View

class ws_list(View):

    def get(self, request, pk=0):
        if pk == 0:
            rtStr = 'GET the whole list'
        else:
            rtStr ="GET request to List %s" % pk
        return rtStr

    def post(self, request, pk=0):
        return "POST request to List %s, with content: %s" % (pk, repr(self.CONTENT)) 
```

我也尝试添加 forms.py 进行验证，但就像我怀疑的那样，它没有做任何事情。似乎这应该很容易，我只是不明白为什么它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:53:02.083

忘记将试用 / 添加到 Web 服务调用...打开调试有帮助！

# java - 在给定坐标处创建带有文本的pdf（PDFBox？）

> ID：10415319
> 
> 赞同：2
> 
> 时间：2012-05-02T14:00:46.127
> 
> 标签：java, pdf, svg, creation, pdfbox

**我的情况：**

*   我正在用java编程
*   使用来自我大学的人的图书馆，我可以阅读 pdf 并从中创建 XML 文档
*   此 XML 文档包含附加信息，例如原始文档中文本的坐标

**我的问题**

*   我想再次创建读取的 PDF，内容设置在其原始坐标（再次：我有坐标）

**我的问题：**

-> 你知道一种创建pdf并将pdf文本设置在给定坐标处的方法吗？<-

这些天我正在做很多研究，但也许我尝试了错误的谷歌搜索词，因为我找不到很多有用的结果。所以我想我可以在这里提问，在我年轻的“程序员生活”中迄今为止我找到最多帮助的论坛中：）

即使在这里，我得到的大多数结果都是关于人们试图获取坐标的，但我已经有了它们。

我在讨论中听说 PDFBox 可能能够做到这一点，但我也很高兴与任何其他能够解决我的问题的框架或库一起工作。

感谢您的每一个帮助，并认为您正在与我分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:32:02.813

非常感谢您的评论。最后，我决定使用 iText，它允许我以一种非常简单有效的方式完成所有任务（将文本放置在绝对坐标处，根据某些标准为其赋予背景颜色）。

如果这里有人正在寻找灵感并且有类似的任务，请查看我在 stackoverflow 上的相关帖子以获取一些代码片段[如何使用 iText 为我的 (pdf-) 文本添加背景颜色以使用 Java 创建它](https://stackoverflow.com/questions/12020658/how-can-i-add-a-background-color-to-my-pdf-text-using-itext-to-create-it-with)

# windows-phone-7 - WP7 如何更改数据透视项目第二个标题的颜色

> ID：10415320
> 
> 赞同：0
> 
> 时间：2012-05-02T14:00:47.067
> 
> 标签：windows-phone-7, pivot

例如，是否可以将全景控件的标题的前景设为红色，而将另一个标题（我们可以开始看到，因为它是一个枢轴项目）设为灰色？

标题 1 ：红色，阴影标题 2 为灰色。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:16:59.540

您可以像这样编写 xaml 文件：

```
 <controls:Pivot Title="My application" Foreground="Red">
        <controls:PivotItem>
            <controls:PivotItem.Header>
                <TextBlock Text="first" Foreground="Gray"></TextBlock>
            </controls:PivotItem.Header>
            <TextBlock Text="content"></TextBlock>
        </controls:PivotItem>
    </controls:Pivot> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:34:53.930

您可以使用 SelectionChanged 事件处理程序。如果您将标题定义为 TextBlocks：-

```
 <controls:Pivot Title="MY APPLICATION"
                    SelectionChanged="Pivot_SelectionChanged">
        <controls:PivotItem>
            <controls:PivotItem.Header>
                <TextBlock Text="first"
                           Foreground="Red" />
            </controls:PivotItem.Header>
        </controls:PivotItem>
        <controls:PivotItem>
            <controls:PivotItem.Header>
                <TextBlock Text="second"
                           Foreground="Red" />
            </controls:PivotItem.Header>
        </controls:PivotItem>
        <controls:PivotItem>
            <controls:PivotItem.Header>
                <TextBlock Text="third"
                           Foreground="Red" />
            </controls:PivotItem.Header>
        </controls:PivotItem>
        <controls:PivotItem>
            <controls:PivotItem.Header>
                <TextBlock Text="fourth"
                           Foreground="Red" />
            </controls:PivotItem.Header>
        </controls:PivotItem>
    </controls:Pivot> 
```

然后，您可以在后面的 C# 代码中更改 TextBlocks 的前景：-

```
 private void Pivot_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count > 0)
        {
            PivotItem currentItem = e.AddedItems[0] as PivotItem;

            if (currentItem != null)
            {
                (currentItem.Header as TextBlock).Foreground = new SolidColorBrush(Colors.White);
            }
        }

        if (e.RemovedItems.Count > 0)
        {
            PivotItem currentItem = e.RemovedItems[0] as PivotItem;

            if (currentItem != null)
            {
                (currentItem.Header as TextBlock).Foreground = new SolidColorBrush(Colors.Red);
            }
        }
    } 
```

# ios - 我的 iOS 应用程序在使用多线程保存时挂起

> ID：10415324
> 
> 赞同：1
> 
> 时间：2012-05-02T14:01:03.647
> 
> 标签：ios, multithreading, core-data, objective-c-blocks

当我在 2 个屏幕之间切换几次时，我的 iOS 应用程序挂起。它属于存储数据，但这只是冻结而没有错误。有人知道我该如何解决这个问题吗？

```
self.fetchF = dispatch_queue_create(label, NULL);
dispatch_async(self.fetchF, ^{

    NSArray *feeds = [FeedFetcher getData:self.pageTitle downloadBy:@"up"];

    NSManagedObjectContext *newContext = self.managedObject;

    for (NSDictionary *feedInfo in feeds) {
        [Feed FeedWithInfo:feedInfo InManageObject:newContext];
    }

    dispatch_async(dispatch_get_main_queue(), ^{

        NSError *error = nil;
        if (newContext != self.managedObject)
            [newContext save:&error];

        if (error)
            NSLog(@"Error save : %@", error);

        [self setupFetchedResultsController];

        [self downloadImages:feeds];
    });        
}); 
```

编辑 ：

我改变了我的 managedobjectcontext，所以它让每个线程都有一个新线程。但是现在当我在 2 个屏幕之间切换几次时，它会冻结在 [self.fetchedResultsController performFetch:&error]; 没有错误..有人有解决方案的想法吗？

```
- (void)performFetch
{
    if (self.fetchedResultsController) {
        if (self.fetchedResultsController.fetchRequest.predicate) {
            if (self.debug) NSLog(@"[%@ %@] fetching %@ with predicate: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName, self.fetchedResultsController.fetchRequest.predicate);
        } else {
            if (self.debug) NSLog(@"[%@ %@] fetching all %@ (i.e., no predicate)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName);
        }
        NSError *error;
        if (self.fetchedResultsController != nil)
            [self.fetchedResultsController performFetch:&error];

        if (error) NSLog(@"[%@ %@] %@ (%@)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), [error localizedDescription], [error localizedFailureReason]);
    } else {
        if (self.debug) NSLog(@"[%@ %@] no NSFetchedResultsController (yet?)", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
    }
    [self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:18:00.333

Core Data 通常不是线程安全的。经验法则是为`NSManagedObjectContext`每个线程创建一个。我相信您正在线程之间重用您的上下文，这就是导致问题的原因。

核心数据并发文档：

> Core Data 使用线程（或序列化队列）限制来保护托管对象和托管对象上下文（请参阅“Core Data 的并发性”）。这样做的结果是上下文假定默认所有者是分配它的线程或队列——这由调用其 init 方法的线程确定。因此，您不应该在一个线程上初始化上下文，然后将其传递给另一个线程。相反，您应该将引用传递给持久存储协调器，并让接收线程/队列创建一个从中派生的新上下文。如果使用 NSOperation，则必须在 main（对于串行队列）或 start（对于并发队列）中创建上下文。

# c# - 为什么 DataObject.SetText(String) 不接受空字符串？

> ID：10415337
> 
> 赞同：4
> 
> 时间：2012-05-02T14:01:51.323
> 
> 标签：c#, winforms

这部分是咆哮，部分是真正的好奇心。有谁知道为什么[System.Windows.Forms.DataObject 的 SetText(String)](http://msdn.microsoft.com/en-us/library/hytkyb6y.aspx)方法不接受空字符串作为其参数？它指出这将引发 ArgumentNullException（即使它实际上不是 null）。

我可以理解它不接受空值，但它不允许空字符串似乎很不寻常。我在这里遗漏了什么，或者这只是 API 设计者的一些任意决定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:36:27.047

消息[来源](http://www.telerik.com/products/decompiler.aspx) [说](http://www.codinghorror.com/blog/2012/04/learn-to-read-the-source-luke.html)：

```
public virtual void SetText(string textData, TextDataFormat format)
{
    if (!string.IsNullOrEmpty(textData))
    {
        //
    }
    else
    {
        throw new ArgumentNullException("textData");
    }
} 
```

但这不是您问题的答案，因为您问*为什么*会这样。浏览源代码我找不到答案，在快速扫描 MSDN 时也找不到。

# jquery - jQuery ZendX 设置

> ID：10415339
> 
> 赞同：0
> 
> 时间：2012-05-02T14:01:55.967
> 
> 标签：jquery, jquery-ui, zend-framework, zendx

我正在尝试测试 jQuery 是否在我的应用程序中工作我的引导程序中有以下内容：

引导程序：

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
protected function _initView()
{
$view = new Zend_View();
$view->doctype('XHTML1_STRICT');
$view->headMeta()->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8');
$view->headTitle()->setSeparator(' - ');
$view->headTitle('IMR - BI System');
$view->env = APPLICATION_ENV;
$view->baseUrl = Zend_Registry::get('config')->root_path;

$view->addHelperPath("ZendX/JQuery/View/Helper", "ZendX_JQuery_View_Helper");
$view->jQuery()->addStylesheet($view->baseUrl . '/js/jquery/css/ui-lightness/jquery-ui-1.8.20.custom.css');
$view->jQuery()->setLocalPath($view->baseUrl . '/js/jquery/js/jquery-1.7.2.min.js');
$view->jQuery()->setUiLocalPath($view->baseUrl .'/js/jquery/js/jquery-ui-1.8.20.custom.min.js');
$view->jQuery()->enable();
$view->jQuery()->uiEnable();
$viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer();
$viewRenderer->setView($view);
Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);

return $view;
}
} 
```

然后在我看来：

```
<?php echo $this->datePicker("dp1", '', array('defaultDate' => date('Y/m/d', time()))); ?> 
```

我得到了文本框，但出现以下错误-> [http://pastebin.com/7Hv7d2Qf](http://pastebin.com/7Hv7d2Qf)

同样在引导文件中，我必须删除以下行：

```
 $view->baseUrl = Zend_Registry::get('config')->root_path; 
```

否则我得到这个错误-> [http://pastebin.com/tde4J7L1](http://pastebin.com/tde4J7L1)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:16:52.690

在您的 _initView 方法上方添加此方法

```
public function _initSetup()
    {
        Zend_Registry::set('config', new Zend_Config($this->getOptions()));

    } 
```

在你的 application.ini 添加这一行

```
 phpSettings.date.timezone = "Europe/London" 
```

如果您正在使用布局，请在您的 layout.phtml 中执行此操作，否则将其粘贴到您的日期选择器上方

```
<?php echo $this->jQuery(); ?> 
```

# ruby-on-rails-3.1 - rails 3 option_from_collection_for_select 与选定的空值

> ID：10415341
> 
> 赞同：0
> 
> 时间：2012-05-02T14:01:59.770
> 
> 标签：ruby-on-rails-3.1, form-helpers

当所选值为nil时，我正在申请option_from_collection_for_select的一些问题。

我有用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :locale
end 
```

和一个预订：

```
class Reservation < ActiveRecord::Base
  belongs_to :user
end 
```

在预订添加/编辑页面中有一个选择，用户将与预订相关联：

```
<%= select_tag('user_id', 
  options_from_collection_for_select(@users, :id, :username, @reservation.user.id)) %> 
```

当@reservation.user.id 不是 nil 但我在添加页面中收到 nil 错误时，这在编辑页面中有效。现在我检查@reservation.user.id 是否为nil，我根据是否为nil 放置所选值；这行得通，但我不喜欢这个解决方案。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:27:13.883

可能有很多方法可以解决这个问题：

至少，您必须为ofcfs 的最后一个参数设置一个条件。

```
options_from_collection_for_select(
  @users, :id, :username, 
  @reservation.user.blank? ? 0 :  @reservation.user.id) 
```

然后，在您的创建操作中，您必须预先添加适当的哈希：

```
@users = User.all
@users.insert(0, {:id=>0,:username=>'PLEASE SELECT A USER'}) 
```

然后，您必须在保存预订之前验证从选择返回的值不是 0。

我能想到的至少还有三四件事可以解决这个问题

# delphi - 我可以将 Base 类型转换为 Derived 接口类型吗？

> ID：10415344
> 
> 赞同：2
> 
> 时间：2012-05-02T14:02:02.793
> 
> 标签：delphi, soap, interface

我可以将基本接口类型转换为派生接口吗？

我怎样才能像德尔福一样

Delphi 生成代码/Delphi 7：

```
function TXMLBook.Get_Id: IXMLId;
begin
   Result := ChildNodes['id'] as IXMLId;
end; 
```

ChildNodes['id'] 是基本类型 IXMLNode

IXMLId 是从 IXMLNode 派生的类型

我的示例代码是：

```
type
IBase = interface(IInterface)
['{5CEA3668-36CB-444C-8D3E-06644070A2B4}']
  function Test:AnsiString;
end;

TBase =class(TInterfacedObject,IBase)
  function Test:AnsiString;
end;

IDerived =interface (IBase)
['{8CDB2982-43B0-4636-B6F5-2561C0D419A9}']
  function Test2: AnsiString;
end;

TDerived=class (TBase,IDerived)
  function Test:AnsiString;
  function Test2:AnsiString;
end;

{ TBase }

function TBase.Test: AnsiString;
begin
   Result:='Base Test';
end;

{ TDerived }

function TDerived.Test: AnsiString;
begin
  Result:='Derived Test';
end;

function TDerived.Test2: AnsiString;
begin
   Result:='Derived Test2';
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  b:IBase;
  d: IDerived;
begin
  b:=TBase.Create;
  d:=b as IDerived; // Error : Interface not supported 

  ShowMessage(b.Test);
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:06:48.263

您的`TBase`类目前没有实现`IDerived`，它只实现`IBase`。您的`TDerived`类同时实现`IBase` *（通过继承自`TBase`）*和`IDerived` *（显式）*。

你应该要么

1.  `TBase`将您的声明更改为

    `TBase =class(TInterfacedObject,IBase, IDerived)`

    并实现中的`IDerived`方法`TBase`。

2.  或更改`b:=TBase.Create;`为`b:=TDerived.Create`；

# php - 在插入时添加带有回调函数的日期时，Datepicker 不会在 GroceryCrud 中加载

> ID：10415346
> 
> 赞同：1
> 
> 时间：2012-05-02T14:02:05.553
> 
> 标签：php, codeigniter, grocery-crud

当我尝试使用这样的回调函数用当前时间填充日期框时：

```
<?php    
// in controller:
$this->grocery_crud->callback_add_field('date',array($this,'_date_fill_now'));

protected function _date_fill_now()
{
        return '<input name="date" type="text" value="'. current_time() . '" maxlength="19" class="datetime-input">';
} 
```

datepicker js 文件不会被加载，所以当我点击日期字段时不会弹出 datepicker。我怎样才能以正确的方式加载它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:19:28.527

在不改变杂货 CRUD 核心的情况下，一种快速的方法是在控制器中添加以下代码行：

```
$this->grocery_crud->set_js('assets/grocery_crud/js/jquery-1.7.1.min.js');
$this->grocery_crud->set_js('assets/grocery_crud/js/jquery_plugins/jquery.ui.datetime.js');
$this->grocery_crud->set_js('assets/grocery_crud/js/jquery_plugins/config/jquery.datetime.config.js');
$this->grocery_crud->set_js('assets/grocery_crud/js/jquery_plugins/jquery-ui-1.8.10.custom.min.js');
$this->grocery_crud->set_js('assets/grocery_crud/js/jquery_plugins/config/jquery.datepicker.config.js');

$this->grocery_crud->set_css('assets/grocery_crud/css/ui/simple/jquery-ui-1.8.10.custom.css');
$this->grocery_crud->set_css('assets/grocery_crud/css/jquery_plugins/jquery.ui.datetime.css'); 
```

# select - 有没有办法一键选择this-my-own-text？

> ID：10415350
> 
> 赞同：2
> 
> 时间：2012-05-02T14:02:23.917
> 
> 标签：select, text, keyboard-shortcuts

假设我有：

> this_my_own_text

双击鼠标左键，我可以选择整个文本。但是，如果文本是：

> 这是我自己的文本

我只能选择一个词，即鼠标悬停的那个词，这对于 CSS 类名称 ( `.container-div-father`) 的工作（例如）非常无聊。

当有`-`分隔符时，有没有办法（在 Windows 上）选择所有文本？也许用其他钥匙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:05:15.047

我可以想到两种方法：用鼠标左键三次单击 - 这将选择整个段落 - 或者单击要选择的文本的开头，按住 Shift 按钮，然后单击末尾您要选择的文本。后一种方法还可以让您在单词中间开始和结束选择。

# ios - iPhone游戏，一部手机比另一部快

> ID：10415354
> 
> 赞同：0
> 
> 时间：2012-05-02T14:02:30.217
> 
> 标签：ios, objective-c, cordova

这是一个很奇怪的问题。我正在创建一个 iPhone 游戏，它在 iPhone 4s 上运行。在我用来测试它的手机中，它运行良好。然而，当我在完全不同的 iPhone 4s 上运行它时，它的运行速度几乎是原来的两倍。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:07:54.957

如果它在一台设备上运行良好，如果它在另一台设备上以两倍的速度运行有什么问题？如果您的动画是基于时间的，则没有问题。
对于问题本身：也许您的是调试版本，而另一台设备已从应用商店发布？

# algorithm - 编码/解码后的额外字节

> ID：10415357
> 
> 赞同：0
> 
> 时间：2012-05-02T14:02:36.567
> 
> 标签：algorithm, encoding, byte, decoding, extra

我目前正在编写程序来通过纠错循环码对消息进行编码和解码。我的算法适用于单个消息，但我在解码字符串时遇到了一些问题。编码和解码工作如下：

1.  编码算法接收*K*位，结果返回*N*位。
2.  解码算法接收*N*位并作为结果返回*K*位。

例如，我想对字符串进行编码和解码。我将字符串转换为字节数组并逐位读取，直到读取 K 位。然后我对这个*K*位进行编码，并在字节数组中逐位写入所有接收到的*N位。*等等。解码是相同的，但我解码*N*位并在字节数组中逐位写入*K*位。有一个我的问题的例子。

如果 K = 9 （每行都是*K*的长度来可视化我的问题）

> 0 **][** 11100000 **]**
> 00 **][** 0011101
> 010 **][** 111000
> 0000 **][** 00111
> 11010 **][** 1110
> 111010 **][** 001
> 0111010 **][** 11
> ***_* __ *_* __ *_* _** **[** 0

最后一行有一个零，它不适合前 9 位。所以我将它编码为完整的*K*位消息。当然，解码后我收到*K*位消息并出现额外的字节。

> **[** 00000000 **][** 0

而且我不知道如何确定这个额外的字节。可能这个零字节在编码之前就在那里。你能给我一些建议，我应该如何处理我的问题。也许我应该改变我的算法（也许我不应该一点一点地阅读它）。我会很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:19:18.150

基于可变长度比特序列的编码算法在“自然”中相当普遍。在 Rosetta Code中查看[Bitwise IO](http://rosettacode.org/wiki/Bitwise_IO)的解决方案，它们可能会给您一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:53:46.537

我决定用 0xFF 字节填补这个空白。我使用 UTF8 编码，它不能有 0xFF 字节，所以我在解码后删除了消息末尾的所有 0xFF 字节。

# mysql - 将日期范围与表 VBA 中的日期进行比较

> ID：10415361
> 
> 赞同：0
> 
> 时间：2012-05-02T14:02:47.033
> 
> 标签：mysql, ms-access, vba, date

我使用 MS Access 作为 MySQL 服务器数据库的前端。在数据库中，我有一个名为 PubHol（意思是公共假期）的表格，列出了公共假期的日期 dd/mm/yyyy。我有一个表格（链接到一个单独的表格），我在其中输入 course_start 日期和 course_end 日期。我想创建一个函数，它在一个字段的 lostfocus 上触发自身，该函数检查输入 course_start 和 course_end 的日期范围是否与 PubHol 中列出的日期一致。例如，如果客户的课程开始时间为 2012 年 1 月 1 日，课程结束时间为 2012 年 1 月 1 日，并且 PubHol 中有一个日期介于 2012 年 10 月 1 日之间，我想收到一个 MsgBox 说些什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:19:17.157

听起来您只想`BETWEEN`向 MySQL 发出查询：

```
SELECT HolidayDate FROM PubHol
WHERE HolidayDate BETWEEN ? AND ? 
```

`Course_Start`...并使用您感兴趣的和值填写查询的参数`Course_End`。（我假设 VBA 可以处理参数化查询。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:19:24.647

假设您在数据库中使用日期数据类型而不是字符串数据类型，则在 VBA 中测试属于日期范围的假期将如下所示

```
Dim condition As String
Dim course_start As Date, course_end As Date

course_start = ...
course_end = ...
condition = "[Holiday] Between #" & Format$(course_start,"yyyy\/mm\/dd") & _
            "# AND #" & Format$(course_end,"yyyy\/mm\/dd") & "#"
If DCount("*", "PubHol", condition) > 0 Then
    MsgBox ...
End If 
```

* * *

我在我的 Access 库中找到了这个函数

```
Public Function JetSqlDate(ByVal d As Variant) As String
    If IsNull(d) Then
        JetSqlDate = "NULL"
    Else
        JetSqlDate = Format$(d, "\#mm\/dd\/yyyy hh\:nn\:ss\#")
    End If
End Function 
```

使用它可以简化条件

```
condition = "[Holiday] Between " & JetSqlDate(course_start) & _
            " AND " & JetSqlDate(course_end) 
```

* * *

注意：如果 MySQL 表通过 ODBC 链接到 Access DB，您可以只使用 Access (Jet) SQL 语法。Access（或准确地说是 ODBC-Driver）会自动将其转换为 MySQL 语法。

# jasper-reports - 在DynamicReports中，如何设置报表元素的绝对坐标

> ID：10415366
> 
> 赞同：2
> 
> 时间：2012-05-02T14:02:57.137
> 
> 标签：jasper-reports, dynamic-reports

在 JasperReports 中，您始终为定位报表元素设置绝对 x 和 y 坐标。例如，以下示例呈现一个黑色矩形（左上角 (0,0)），其中包含一个从 x=70 开始的白色文本字段“Hello World”：

```
<rectangle>
    <reportElement x="0" y="0" width="557" height="20" backcolor="#000000" />
    <graphicElement fill="Solid">
        <pen lineWidth="0"/>
    </graphicElement>
</rectangle>

<textField>
    <reportElement x="70" y="2" width="100" height="14" style="pageLayoutFont"/>
    <textElement textAlignment="Left" verticalAlignment="Middle" />
    <textFieldExpression class="java.lang.String">
        <![CDATA["Hello World"]]>
    </textFieldExpression>
</textField> 
```

现在，我想使用 DynamicReports 实现相同的目标。它应该与此类似：

```
report().addDetail(
    cmp.rectangle()
       .setDimension(557, 20).setStyle(...),
    cmp.text("Hello World").setStyle(...)   
); 
```

但是，我找不到确定定位的方法（在上面的 Java 示例中，文本呈现在矩形下方，而不是在矩形内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:20:38.403

对于这种特殊情况（一个矩形作为文本字段的周围框），可以使用`horizontalList`s. 水平列表将矩形作为背景（颜色）并具有固定尺寸。要将文本移动到 y=2 您可以添加一个细`gap`元素（相同宽度）作为第一个水平列表包含，然后附加一个`newRow`. *然后，在文本字段Hello World*后面加上 with=70 的第二个间隙。或者，您可以省略间隙并向文本字段添加填充样式。

```
cmp.horizontalList()
    .setFixedDimension(557, 20)
    .setBackgroundComponent(...)
    .add(
        //1\. a thin gap element
        cmp.gap(557,2)
    )
    .newRow()
    .add
    (
        //2\. a gap of width 70
        cmp.gap(70,13),
        //3\. the text field
        cmp.text("Hello World").setStyle(...)
    ) 
```

虽然这适用于这种情况，但它是一种间接方法，很容易让人混淆。此外，我想知道是否有针对您能想到的每一项定位任务的解决方案。

# php - 基于 PHP 的简单快速框架的 PHP 组件

> ID：10415367
> 
> 赞同：0
> 
> 时间：2012-05-02T14:03:01.963
> 
> 标签：php, components, pear

我想构建一个简单的 PHP 框架。我曾在 CI 和 Kohana 工作过。并且对 Yii 有基本的了解。但我也使用过 Django，对 django 印象深刻。我想开始一个基于 Crud 或登录等的小项目，所以我也在考虑用它创建一个小框架。因此，在下一个项目中，我可以有更好的起点，并且下次肯定会添加更多内容。为此，我需要一些组件。我在 django 中喜欢的基本内容是，它不只是生成像 Yii 这样的代码，这些代码生成更多的代码，从而产生更大的代码库，需要在维护时进行管理。它只是用更少的代码渲染很多东西。因此开发人员可以更轻松地维护更少的代码。虽然他可以通过覆盖他想要的方法来简单地修改事物。

我没有太多时间，所以我肯定会从一些可用的较小组件开始。现在我喜欢 PHPActiveRecordPattern 库。用于数据库访问。我认为它在低级别使用 PDO。现在我想为其他组件提供建议，如下所述。

1.  我想要 django 或更好的“表单”库。我可以集成到我的框架中。我想我可以从 PEAR 那里得到一些东西？带有可以通过验证扩展的表单处理器。

2.  一些登录、注册相关的库。如果有一些灵活且好的东西已经可用。似乎我需要根据自己的要求自己编写它，虽然它很简单。

3.  一些视图和模型渲染器，用于实现简单的 MVC 层。

4.  一些 PHP 库。那可以生成一些文件吗？尽管这些文件中不会有太多代码，但用于基本结构。

5.  一些更好的路由库。

6.  缩略图和电子邮件类

虽然已经有这么多的框架具有上述的一些东西，那么编写我自己的框架的目的是拥有一个简单的框架，即快速、简单并且在开发人员结束时减少代码维护开销。这样一位优秀的开发人员可以以更少的开销快速开发更好的网站，而无需了解不同的事物等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:07:45.087

“我想创建一个 PHP 框架”和“我没有太多时间”不能很好地结合在一起。我强烈反对你这样做。

2012年很多框架都达到了相当不错的水平。如果您将创建自己的框架，那么您将浪费时间重新发明轮子，而它已经存在。

不同的情况是，如果您想这样做是为了学习目的，那没关系。

# windows - 以轻松的方式从漫游配置文件切换到文件夹重定向

> ID：10415369
> 
> 赞同：0
> 
> 时间：2012-05-02T14:03:13.757
> 
> 标签：windows, active-directory, profiles, gpo

我们有一个 Windows 2008 域。我们曾经有指向“\nas\homes\\Profile.V2”的漫游配置文件。现在我们要切换到本地配置文件 + 重定向文件夹（桌面和我的文档）。

这就是我们所做的：

*   进入 AD 并清空“配置文件路径”和“主文件夹”属性。
*   进入用户计算机，然后进入计算机>用户配置文件>从“漫游”更改为“本地”
*   应用桌面和我的文档重定向策略。

现在，桌面和我的文档文件夹已正确重定向。问题是配置文件。例如，AppData 文件夹仍然是与漫游配置文件一起使用的文件夹，因此如果我删除它，客户端计算机上的用户配置文件将无法使用。

我如何告诉客户他们需要将配置文件保存在本地计算机上？

我希望我已经清楚地解释了这个问题。

提前致谢。

马泰奥

**编辑**

我没有提到有将 AppData 重定向到共享文件夹的策略，但现在它已被禁用（通过客户端上的 gpresult 检查）。不幸的是，AppData 文件夹仍然指向那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:51:21.930

AppData 文件夹的重定向是通过组策略完成的，而不是通过指定漫游配置文件。您没有提到删除或恢复此组策略设置，所以我猜这就是问题所在。

使用 gpresult 检查是否仍有策略。您将在文件夹重定向下找到它，与重定向桌面和文档文件夹的策略相同。

请注意，即使组策略不再适用，文件夹重定向策略也可以选择保持重定向。因此，您可能必须使用“重定向到本地用户配置文件位置”选项显式设置新策略。

# html - 在 Web 应用的网页之间滑动

> ID：10415372
> 
> 赞同：8
> 
> 时间：2012-05-02T14:03:16.940
> 
> 标签：html, webkit, web-applications

我想创建一个网络应用程序（以避免必须为 iPhone、Android、BB 等单独编程）并且正在寻找滑动效果。是否有 HTML5 或 webkit 代码只是说“滑动到下一个/上一个页面”？（我知道它会比这更详细的代码，但这就是我想要的要点）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T14:10:35.343

您可以使用 div 在网络浏览器中滑动而不是整个页面。即，您只能在滑动影响后在 div 中加载页面，而不能移动整个页面本身。

仅适用于 chrome、safari。

如果您使用jquery mobile，这是一个代码。

```
$('body').live('swipeleft swiperight',function(event){
    if (event.type == "swiperight") {
       alert("swipped right side");      
    }
    if (event.type == "swipeleft") {
        alert("swipped left side");
    }
    event.preventDefault();
}); 
```

在此处参考更多[滑动检测](http://sreevathsabv.blogspot.in/2012/03/swipe-detection-for-androidipad-device.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T01:04:24.353

@sree 让我大部分时间都在那里，但这是我最终使用的代码

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<title>jQuery Mobile: Demos and Documentation</title>
    <link rel="stylesheet"  href="css/themes/default/jquery.mobile-1.1.0.css" />
    <link rel="stylesheet" href="docs/_assets/css/jqm-docs.css" />
    <script src="js/jquery.js"></script>
    <script src="docs/_assets/js/jqm-docs.js"></script>
    <script src="js/jquery.mobile-1.1.0.js"></script>

</head>

<body>

<p>random page to test on</p>
<p>Swipe1 </p>
<script type="text/javascript">
$('body').live('swipeleft swiperight',function(event){
    if (event.type == "swiperight") {
       jQuery.mobile.changePage("page2.html",{transition:'slide'});      
    }
    if (event.type == "swipeleft") {
        jQuery.mobile.changePage("page1.html",{transition:'slide'});
    }
    event.preventDefault();
});
            </script>
</body>
</html> 
```

...我下载了[jquery mobile kit](http://jquerymobile.com/download/)并保持 CSS/JS 文件具有相同的文件结构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T02:54:50.257

我为此制作了[https://github.com/caktux/swipy](https://github.com/caktux/swipy)。我想从其他开发人员那里获得反馈，如果有兴趣，可能会使其成为“作为 web 应用程序的响应式网站”的首选插件。

# javascript - 在javascript中创建一个多维数组

> ID：10415387
> 
> 赞同：3
> 
> 时间：2012-05-02T14:04:29.250
> 
> 标签：javascript

我知道 javascript 不允许真正的多维数组，但是您可以通过在数组中包含数组来将它们“组合”在一起。

我有 2 个问题；

1) 将 10 个数组转换为 1 个包含 10 个数组的多维数组会改善、损坏还是对网页的性能没有影响？

2）我希望创建一个包含 100 个元素的数组，每个元素都是 2 个元素的数组，最后每个元素都是长度不确定的数组。

我有以下代码来创建这个“多维”数组：

```
var RouteArray = new Array(100);
for (var i=0; i <100; i++)
{
RouteArray[i]=new Array(2);
    for (var j=0; j <2; j++)
    {
    RouteArray[i][j] = new Array();
    }
} 
```

这段代码合理吗？还是您有经验的编码员能够提出更好的方法？

我还假设我可以使用以下代码添加到上述多维数组中的不确定数组：

```
RouteArray[88][0].push(ValueToPush); 
```

最后我可以使用以下方法调用我刚刚推送的值吗？

```
Var ValueAdded = RouteArray[88][0][0]; 
```

提前感谢您的时间，如果这个问题已在其他地方得到解答，我深表歉意，我确实尝试搜索，但要么无法理解以前的帖子，要么发现它们与我的情况如此不同，以至于我无法应用他们的建议。

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:11:08.253

> 1) 将 10 个数组转换为 1 个包含 10 个数组的多维数组会改善、损坏还是对网页的性能没有影响？

几乎可以肯定没有性能影响，但它会对你理解代码和编写更少错误的能力产生巨大影响。

> 2）我希望创建一个有 100 个索引的数组，每个索引都将填充 2 个索引的数组，最后这 2 个索引中的每一个都有一个不确定长度的数组。

这将与您的示例代码大纲完全相同，如果您想弄湿自己的脚，这是一个很好的起点。在实践中，具有多维的数组并不总是最好的数据结构来建模你的代码使用的任何东西，主要是因为它们不是“可发现的”：你必须事先知道每个维是什么。

很有可能有一种更好的方法可以在任何特定场景中构建数据，但我们必须具体讨论。无论如何，您提供的代码将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:30:12.393

需要考虑的事情：http: [//jsperf.com/arraynew](http://jsperf.com/arraynew)

# seo - 避免在 Google 中出现重复的搜索页面

> ID：10415390
> 
> 赞同：1
> 
> 时间：2012-05-02T14:04:43.043
> 
> 标签：seo, robots.txt, sitemap

我有一个带有 4 个下拉菜单的搜索网站。这些下拉列表中的每一个都重定向回有问题的页面，但带有一个 url 参数来告诉它如何对结果进行排序。第一个下拉菜单有 13 个选项，其他三个每个有 4 个选项。当然，谷歌会看到重复的内容并为此吃掉我的 SEO。

因为包含 13 个选项的下拉列表是一个类别分类器，所以我已经能够稍微降低重复的内容，所以我用它来更改每个页面上的标题以帮助阻止整个重复的内容，但是其他 3 个是纯粹的sorters 并且不能真正用于更改页面的标题（也不应该）。

所以我想出了一个解决方案：

*   禁止 robots.txt 中的页面 (/search)
*   将 13 个页面（来自类别分类器）添加到 sitemap.xml，因为它们有单独的标题，它应该可以很好地工作。

问题是我应该在排序器链接中添加一个 nofollow 以阻止 Google 获取它们，还是站点地图可以只索引该 url 而不关注其中的其他链接？

或者，还有更好的方法？

也作为旁注：

如果我在 sitemaps.xml 中有一个 URL，例如：

/user/view?id=1

但我有一个 robots.txt 行，例如：

禁止：/user/view

谷歌仍然可以索引站点地图网址吗？阻止访问这样的动态页面是一种好习惯吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:07:41.110

采用[`rel="canonical"`](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:07:48.937

处理此问题的更好方法是使用[规范 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。这将告诉 Google 哪个页面是“主”页面并将其包含在其索引中，并且与其重复的其他页面应被视为同一页面（并且不包含在搜索结果中）。这可以防止您不得不阻止页面，或者更糟糕的是，在内部页面上使用 nofollow。事实上，在我链接到他们提供的示例的博客文章中，这些示例几乎与您的用例相同。

# xna - 命令行 MP4 到 WMV9 转换器

> ID：10415398
> 
> 赞同：0
> 
> 时间：2012-05-02T14:05:04.517
> 
> 标签：xna, ffmpeg, mp4, wmv, ms-media-foundation

所以 XNA 似乎需要 WMV9 格式的视频，而我有 MP4 文件。我找到了一个不错的工具，叫做 ffmpeg，但它只支持 wmv8 格式。有谁知道任何免费提供的工具

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:07:29.293

如果您可以进行一些编程，而不仅仅是开箱即用的工具，那么 Media Foundation 示例[`MFSimpleEncode`](http://blogs.msdn.com/b/mf/archive/2009/12/02/mfsimpleencode.aspx)可能就是您正在寻找的：

> MFSimpleEncode.exe - 这是一个命令行工具，可将文件从一种媒体格式转码为另一种媒体格式。如果您编写自己的转码应用程序，将提供源代码作为参考。此工具使用 Windows 7 中引入的 Media Foundation 转码 API。
> 
> 例子： [...]
> 
> 1.  将 MPEG-4 转码为 ASF：MFSimpleencode.exe –i input.mp4 –o output.wmv –p TranscodeProfileASF.xml

# jquery - jquery 检测某些类的 div 已添加到 DOM

> ID：10415400
> 
> 赞同：96
> 
> 时间：2012-05-02T14:05:15.123
> 
> 标签：jquery

我`.on()`用来绑定页面加载后创建的 div 事件。它适用于单击、鼠标输入...但我需要知道何时添加了 MyClass 类的新 div。我正在寻找这个：

```
$('#MyContainer').on({

  wascreated: function () { DoSomething($(this)); }

}, '.MyClass'); 
```

我该怎么做呢？我已经设法在没有插件的情况下编写了整个应用程序，并且我想保持这种方式。

谢谢。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-02T14:17:58.017

以前可以挂钩到 jQuery 的`domManip`方法来捕获所有 jQuery dom 操作并查看插入了哪些元素等，但是 jQuery 团队在 jQuery 3.0+ 中关闭了它，因为以这种方式挂钩到 jQuery 方法通常不是一个好的解决方案，而且他们'已经做到了，因此内部`domManip`方法在核心 jQuery 代码之外不再可用。

突变事件也已被弃用，因为以前可以做类似的事情

```
$(document).on('DOMNodeInserted', function(e) {
    if ( $(e.target).hasClass('MyClass') ) {
       //element with .MyClass was inserted.
    }
}); 
```

应该避免这种情况，而今天应该使用 Mutation Observers 来代替，它的工作原理是这样的

```
var observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        console.log(mutation)
        if (mutation.addedNodes && mutation.addedNodes.length > 0) {
            // element added to DOM
            var hasClass = [].some.call(mutation.addedNodes, function(el) {
                return el.classList.contains('MyClass')
            });
            if (hasClass) {
                // element has class `MyClass`
                console.log('element ".MyClass" added');
            }
        }
    });
});

var config = {
    attributes: true,
    childList: true,
    characterData: true
};

observer.observe(document.body, config); 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2015-02-04T01:03:37.297

这是我的插件，可以做到这一点 - [jquery.initialize](https://github.com/AdamPietrasiak/jquery.initialize)

用法与您使用`.each`函数相同，但`.initialize`在元素上使用函数，不同之处`.each`在于它还将初始化将来添加的元素而无需任何额外代码 - 无论您是否使用 AJAX 或其他任何方式添加它。

**Initialize 的语法与 .each 函数完全相同**

```
$(".some-element").initialize( function(){
    $(this).css("color", "blue");
}); 
```

**但是现在如果新的元素匹配 .some-element 选择器将出现在页面上，它将被立即初始化。添加新项目的方式并不重要，您不需要关心任何回调等。**

```
$("<div/>").addClass('some-element').appendTo("body"); //new element will have blue color! 
```

插件基于`MutationObserver`

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-07-22T03:08:58.957

在查看了这篇文章和其他几篇文章后，我试图将我认为最好的东西提炼成简单的东西，让我能够检测何时插入了一类元素，然后*对这些元素采取行动*。

```
function onElementInserted(containerSelector, elementSelector, callback) {

    var onMutationsObserved = function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length) {
                var elements = $(mutation.addedNodes).find(elementSelector);
                for (var i = 0, len = elements.length; i < len; i++) {
                    callback(elements[i]);
                }
            }
        });
    };

    var target = $(containerSelector)[0];
    var config = { childList: true, subtree: true };
    var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;
    var observer = new MutationObserver(onMutationsObserved);    
    observer.observe(target, config);

}

onElementInserted('body', '.myTargetElement', function(element) {
    console.log(element);
}); 
```

对我来说重要的是，这允许a）目标元素存在于“添加的节点”中的任何深度，b）仅在最初插入时处理元素的能力（无需搜索整个文档设置或忽略“已处理”标志）。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-05-20T19:57:00.580

3年后的经验，这就是我听*“添加到DOM的某个类的元素”的方式*`html()`：您只需在jQuery函数中添加一个钩子，如下所示：

```
function Start() {

   var OldHtml = window.jQuery.fn.html;

   window.jQuery.fn.html = function () {

     var EnhancedHtml = OldHtml.apply(this, arguments);

     if (arguments.length && EnhancedHtml.find('.MyClass').length) {

         var TheElementAdded = EnhancedHtml.find('.MyClass'); //there it is
     }

     return EnhancedHtml;
   }
}

$(Start); 
```

如果您使用的是 jQuery，这很有效，我就是这样做的。而且它不依赖于浏览器特定的事件`DOMNodeInserted`，它不是跨浏览器兼容的。我还为`.prepend()`

总的来说，这对我来说就像一个魅力，希望对你也一样。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-02T14:15:51.803

你可以使用突变事件

[http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)

编辑

来自 MDN：[https ://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events)

已弃用 此功能已从 Web 中删除。尽管某些浏览器可能仍然支持它，但它正在被删除。不要在旧项目或新项目中使用它。使用它的页面或 Web 应用程序可能随时中断。

突变观察者是 DOM4 中突变事件的提议替代品。它们将包含在 Firefox 14 和 Chrome 18 中。

[https://developer.mozilla.org/en/docs/Web/API/MutationObserver](https://developer.mozilla.org/en/docs/Web/API/MutationObserver)

`MutationObserver`为开发人员提供了一种对 DOM 中的更改做出反应的方法。它旨在替代 DOM3 事件规范中定义的突变事件。

示例用法

以下示例取自[http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/](http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)。

```
// select the target node
var target = document.querySelector('#some-id');

// create an observer instance
var observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    console.log(mutation.type);
  });    
});

// configuration of the observer:
var config = { attributes: true, childList: true, characterData: true };

// pass in the target node, as well as the observer options
observer.observe(target, config);

// later, you can stop observing
observer.disconnect(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-01T08:09:24.613

adeneo 的答案有两个补充：

(1) 我们可以换行

```
return el.classList.contains('MyClass'); 
```

到

```
if( el.classList ) {
    return el.classList.contains('MyClass');
} else {
    return false;
} 
```

所以我们不会看到`"Uncaught TypeError: Cannot read property 'contains' of undefined"`错误。

(2) add `subtree: true`in`config`在所有添加的元素中递归查找添加的节点。

# android - 更改 ListView 上的布局时，OnItemClickListener 没有响应

> ID：10415423
> 
> 赞同：0
> 
> 时间：2012-05-02T14:06:44.153
> 
> 标签：android, listview, adapter, viewflipper

这是我的代码中的一些行：

```
vFlipper = (ViewFlipper) findViewById(R.id.viewflipper);<BR>
listView = (ListView) findViewById(R.id.firstlayout);<BR>
listView.setAdapter(stationaryAdapter); 
```

对象列表，当我单击它们时，我会获得有关每个对象的更多信息。此时它可以正常工作。但是当我点击一个按钮时，它应该读入一些其他对象，但布局不同，可点击功能停止工作。

单击时会读取这些行：

```
vFlipper.setDisplayedChild(1);<BR>
listView = (ListView) findViewById(R.id.secondlv);<BR>
listView.setAdapter(mobileAdapter); 
```

在不更改布局的情况下，它适用于新列表。

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:46:06.827

当您调用适配器以在您单击“adapter.get(position)”的位置获取项目时，您可能仍在使用第一个适配器而不是第二个。

对于第一个布局，您应该做的是：

```
listView.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent,View view, int position, long id) {
stationaryAdapter.getItem(position));

}
}); 
```

对于第二个布局：

```
listView.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent,View view, int position, long id) {
mobileAdapter.getItem(position));

}
}); 
```

# python - 如何在我的 Tornado 应用程序中使用 Django ORM？

> ID：10415429
> 
> 赞同：22
> 
> 时间：2012-05-02T14:06:59.333
> 
> 标签：python, django, tornado

我有一个现有的 Django 应用程序，其中包含一个数据库和相应的**models.py**文件。

我有一个新的 Tornado 应用程序，它为其他应用程序提供 Web 服务。它需要从同一个数据库读取/写入，并且我想使用的模型文件中有代码。

如何在我的 Tornado 请求处理程序中最好地使用 Django 数据库和模型？**是否像创建一个指向models.py** Django 项目文件夹的符号链接、导入 Django 模块并使用它一样简单？我想我必须做**settings.configure()**，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T14:23:48.367

[这里](https://bitbucket.org/yml/dj_tornado/src/c9a11ce11d4c/dj_tornado.py)有一个关于如何在 Tornado 中使用 django ORM 和 django 表单的示例。您可以阅读[在 Tornado Web 服务器中使用 Django 以](http://lincolnloop.com/blog/2009/sep/15/using-django-inside-tornado-web-server/)获取一些信息。以下代码取自那里：

```
import sys
import os

import tornado.httpserver
import tornado.ioloop
import tornado.web

# django settings must be called before importing models
from django.conf import settings
settings.configure(DATABASE_ENGINE='sqlite3', DATABASE_NAME='dev.db')

from django import forms
from django.db import models

# Define your Model
class Message(models.Model):
    """
    A Django model class.
    In order to use it you will need to create the database manually.

    sqlite> CREATE TABLE message (id integer primary key, subject varchar(30), content varchar(250));
    sqlite> insert into message values(1, 'subject', 'cool stuff');
    sqlite> SELECT * from message;
    """

    subject = models.CharField(max_length=30)
    content = models.TextField(max_length=250)
    class Meta:
        app_label = 'dj'
        db_table = 'message'
    def __unicode__(self):
        return self.subject + "--" + self.content

# Define your Form
class DjForm(forms.Form):
    subject = forms.CharField(max_length=100, required=True)
    content = forms.CharField()

# Define the class that will respond to the URL
class ListMessagesHandler(tornado.web.RequestHandler):
    def get(self):
        messages = Message.objects.all()
        self.render("templates/index.html", title="My title",
                    messages=messages)

class FormHandler(tornado.web.RequestHandler):
    def get(self):
        form = DjForm()
        self.render("templates/form.html", title="My title", form=form)

    def post(self):
        data = {
            'subject':self.request.arguments['subject'][0],
            'content':self.request.arguments['content'][0],
        }
        form = DjForm(data=data)
        if form.is_valid():
            message = Message(**form.cleaned_data)
            message.save()
            self.redirect('/')
        else:
            self.render("templates/form.html", title="My title", form=form)

# map the Urls to the class          
application = tornado.web.Application([
    (r"/", ListMessagesHandler),
    (r"/form/", FormHandler),
])

# Start the server
if __name__ == "__main__":
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

这是django 和 tornado的另一个[演示......](https://github.com/bdarnell/django-tornado-demo/tree/master/testsite)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T14:14:18.680

将 Django 项目的路径添加到 Tornado 应用程序的 PYTHONPATH env-var 并适当地设置 DJANGO_SETTINGS_MODULE。然后，您应该能够导入您的模型，然后像往常一样使用 Django 来处理第一次导入时的初始设置。

您不应该需要任何符号链接。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-20T16:06:58.160

我无法让它与 Django 1.8 中@aragon 提供的信息一起使用。由于在搜索 Django + Tornado 集成时，此问题是 Google 中的最佳结果之一，因此我是如何让它**在 Django 1.8**中工作的：

```
from django import forms
from django.db import models

from models import Operation #Own model
import django

DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.sqlite3',
    'NAME': 'database.db',
    }
}
settings.configure(DATABASES=DATABASES)

if django.VERSION[:2] > (1,5):
    django.setup() 
```

# xml - 关于 Eclipse 中 XML 编辑器的问题

> ID：10415436
> 
> 赞同：0
> 
> 时间：2012-05-02T14:07:36.267
> 
> 标签：xml, editor

我正在使用 Eclipse（用于 RCP）创建 XML 文件，我注意到 xml 文件有 Design 和 Source 选项卡，请参阅下面的照片了解更多详细信息：http: [//img6.ph.126.net/_XEDpd6P2MvYWt4mkYH7rg ==/2686115702767268286.jpg](http://img6.ph.126.net/_XEDpd6P2MvYWt4mkYH7rg==/2686115702767268286.jpg)

我有两个问题： 1\. 如何查看“设计”选项卡的 UI 源代码？（它属于哪个 jar？） 2\. Design 选项卡如何与 Source 选项卡关联？它们如何同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:20:19.537

您需要[Eclipse Web 工具项目 (WTP)](http://www.eclipse.org/webtools/)。不幸的是，下面链接上的许多文档都已过时，我不确定他们是否已将源代码从 CVS 迁移到 Git（Eclipse 平台已迁移到 Git）。如果您不知道如何从下面的链接访问 XML 编辑器源，我会在 WTP 论坛中发布这个问题。

# mysql - 使用联接表中的条件限制 SUM() 中包含的结果？

> ID：10415444
> 
> 赞同：1
> 
> 时间：2012-05-02T14:07:55.160
> 
> 标签：mysql, sql, join

我正在尝试列出我的产品表，但带有指向我的交货订单的链接，以便为我提供某些状态下的库存总和；分配、派送等

有一个“状态”字段来定义当前交货的位置，例如；1 = 已分配，2 = 已发送，3 = 已交付等

这是我目前为止

```
SELECT product.*, sum(quantity) AS allocated FROM product 
    LEFT JOIN delivery_product ON ( product.id = product_id ) 
    LEFT JOIN delivery ON ( delivery_id = delivery.id AND delivery.status = 1 ) 
GROUP BY code           
ORDER BY code 
```

它包括来自delivery_product的所有数量匹配，而我只想包括那些交货订单状态= 1的。我认为这是因为我在状态限制开始之前首先加入delivery_product表，但我还能怎么做呢？

如果你能看到一个更好的方法来完成我的任务，那就加分:)

-

```
product
id  code   stock
1   ABC    1000
2   DEF    2000

delivery
id  status   date   etc
1   1        etc    etc

delivery-product
id  delivery_id   product_id   quantity
1   1             1            500

results
product.id product.code product.stock allocated
1          ABC          1000          500
2          DEF          2000          0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:12:50.180

我认为对您的查询进行小修改应该可以：

```
SELECT product.*
,   sum(case when delivery.status = 1 then quantity else 0 end) AS allocated
FROM product 
    LEFT JOIN delivery_product ON ( product.id = product_id ) 
    LEFT JOIN delivery ON ( delivery_id = delivery.id AND delivery.status = 1 ) 
GROUP BY code           
ORDER BY code 
```

您可以通过将联接从左外部转换为内部来避免条件，但如果产品缺少状态为 的交货记录，`delivery`则查询不会返回为零的行。`quantity``1`

# jquery - jQuery拆分器在cookie中保存位置

> ID：10415446
> 
> 赞同：1
> 
> 时间：2012-05-02T14:07:55.750
> 
> 标签：jquery, cookies

我的两个 div 之间有一个拆分器，我可以移动拆分器并更改两个容器的大小。我想要做的是保存拆分器的位置，缓存中两个容器的宽度，并且在刷新浏览器时我希望能够保留这些宽度和位置。这是代码片段，

```
var separatorPos = $('.content-columns-sep').position().left;           
var leftColumnWidth = $('.content-left').width();
var rightColumnWidth = $('.content-right').width();
if ($.cookie('columnPos')) {
    var cookieVars = $.cookie('columnPos').split(',');           
    var newPos = cookieVars[0];
    var newWidth = cookieVars[1];
    var newRightWidth = cookieVars[2];
    var posDiff = newPos - separatorPos;
    $('.content-columns-sep').offset({
        left: newPos});            
        separatorPos = newPos;
        $('.content-left').width(newWidth);
        $('.content-right').width(newRightWidth);
        leftColumnWidth = newWidth;        
        rightColumnWidth = newRightWidth;        
}            
$( ".content-columns-sep" ).mouseover(function(){
    $('.content-columns-sep').css('cursor', 'crosshair');
});
$( ".content-columns-sep" ).draggable({
    axis: "x",
    containment: "parent",
    cursor: "crosshair",
    grid: [10, 0],
    drag: function(event, ui) {
        var newPos = $('.content-columns-sep').position().left;
        var posDiff = newPos - separatorPos;
        separatorPos = newPos;
        var newWidth = leftColumnWidth + posDiff ;
        var newRightWidth = rightColumnWidth - posDiff;
        $('.content-left').width(newWidth);
        $('.content-right').width(newRightWidth);
        leftColumnWidth = newWidth;        
        rightColumnWidth = newRightWidth;
    },
    stop: function(event, ui) {
        var newPos = $('.content-columns-sep').position().left;
        var posDiff = newPos - separatorPos;
        separatorPos = newPos;
        var newWidth = leftColumnWidth + posDiff ;
        var newRightWidth = rightColumnWidth - posDiff;
        $('.content-left').width(newWidth);
        $('.content-right').width(newRightWidth);
        leftColumnWidth = newWidth;        
        rightColumnWidth = newRightWidth;
        $.cookie('columnPos', separatorPos+','+newWidth+','+newRightWidth);
    }
});     

       But I am unable to get the result as expected, splitter always overlaps one of the div by some 35 pixel or so, what could be the possible reasons ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:17:12.333

你得到的职位是

```
$('.content-columns-sep').position().left; 
```

但是您使用该值将其设置为：

```
$('.content-columns-sep').offset({ left: newPos}); 
```

这可能是您重叠的原因吗？偏移量与位置不同。

当你设置[`offset`](http://api.jquery.com/offset/)时，你是在设置元素相对于整个文档的位置，但是当你得到时[`position`](http://api.jquery.com/position/)，你得到的是相对于偏移父级的位置，它可能是文档，但不一定是.

两者都应该没问题，只要您在整个代码中使用相同的。

# foxpro - 使用 SET PROCEDURE TO 时出错

> ID：10415447
> 
> 赞同：2
> 
> 时间：2012-05-02T14:07:59.763
> 
> 标签：foxpro, visual-foxpro

首先让我说我对 FoxPro 非常非常陌生，并且发现只是基础知识有点学习曲线。

我正在尝试创建一个程序文件 (.prg)，其中包含一些可以从我的主代码调用的公共函数。我添加了程序文件“ **publicfunctions.prg** ”并包含一个返回硬编码文字的简单函数（只是试图使机制工作）

```
*!* This function is in the publicfunctions.prg file
FUNCTION GetFieldValue
    RETURN 'This is the value'
ENDFUNC 
```

然后在我的主程序中我尝试使用它，但我收到文件不存在的错误。这是主程序中的全部代码

```
*!* This is the main program logic    
SET PROCEDURE TO publicfunctions.prg

PRIVATE sFieldValue = ''

sFieldValue = GetFieldValue() 
```

我得到的错误是在“ **SET PROCEDURE TO publicfunctions.prg** ”语句中。它是：“**文件'publicfunctions.prg”不存在。**"

我猜它找不到它，因为默认目录未设置为文件所在的路径。我尝试在“ **SET PROCEDURE TO** ”语句之前添加“ **SET DEFAULT TO** ”语句，但它根本没有改变结果。

 **我不想对路径进行硬编码，所以我想我的问题是：

1.  我对默认目录的假设是否正确？
2.  如果 #1 为真，那么如何将默认目录设置为主程序文件所在的目录？
3.  我是否正确调用该函数？（如果能找到当然）

**更新****Per** **Hank**的问题
如下_ **_**在文件系统文件夹中。

 ******![在此处输入图像描述](../Images/b4d2179484d688bcfed4de578d1aac37.png)

![在此处输入图像描述](../Images/f2cb003c149bcf0b8f6fec4482ddba28.png)

**我正在使用 Microsoft Visual FoxPro 9.0**

任何和所有的帮助将不胜感激。

谢谢，
道格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:26:13.583

VFP 维护一个搜索路径（与 Windows/DOS 搜索路径不同），它将搜索您在代码中引用的任何 PRG、DBF 等。

您可以使用 SET('PATH') 函数检查其当前设置，并使用 SET PATH TO 进行设置。除了当前默认目录（您可以使用 SET('DEFAULT') 和 CURDIR() 函数验证）之外，还会搜索这些位置。

这将显示这些当前是什么：

```
WAIT WINDOW 'Path: ' + SET('PATH') + CHR(13)+CHR(10) + 'Default drive: ' + SET('Default') + CHR(13)+CHR(10) + 'Current directory: ' + CURDIR() 
```

这些在 VFP 的帮助中有很好的记录 - 检查那里以获得更好的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T20:21:27.907

这里还有另一条评论。由于您是 VFP 的新手，因此您不妨从右脚开始。大多数 VFP 专家建议不要使用过程文件。将每个函数或过程放在一个单独的 PRG 文件中，以例程名称作为文件名。例如，您的 GetFieldValue 函数应位于 GetFieldValue.PRG 中。

SET PROCEDURE 可以追溯到早期的 Xbase 时代，当时还没有项目经理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T01:52:33.500

正如 Tamar 提到的试图避免使用这样的“SET PROCEDURE”文件，我强烈建议为您的项目提供一个结构良好的目录。将所有文件都放在一个地方可能会很痛苦......从历史上看，我做过类似的事情

```
C:\SomeFolder\MyProject
C:\SomeFolder\MyProject\classes
C:\SomeFolder\MyProject\data
C:\SomeFolder\MyProject\forms
C:\SomeFolder\MyProject\graphics
C:\SomeFolder\MyProject\prgs
C:\SomeFolder\MyProject\reports 
```

然后，分别将您的文件放在各自的位置。您以相同的方式将它们添加到您的项目经理并保留文件的“相对”路径。

如上所述，将应用程序的“数据”分开可以在需要时轻松复制/粘贴备份、模拟、调试数据集测试。尝试打开文件时，您可以根据使用“SET PATH”的限定路径 + 表名 INSTEAD 来引用打开文件。过去有太多次我的系统依赖于“SET PATH”，并且会阻塞，或者找到一个旧版本的文件，而不是预期的文件。我的方法是......如果我找不到它为什么。找到它，把它放在适当的位置，然后继续。

如数据所述，假设您在“数据”目录中有“客户”和“订单”表。您可以有一个变量并在查询或打开文件时引用它......

```
PUBLIC myDataPath as String
myDataPath = "Data\"

use ( myDataPath + "Customers" )
select 0
use ( myDataPath + "Orders" ) 
```

如果尝试查询，您可以执行类似的操作

```
select ;
      c.FirstName, ;
      c.LastName, ;
      o.OrderID, ;
      o.OrderDate ;
   from ;
      ( myDataPath + "Customers" ) c ;
         JOIN ( myDataPath + "Orders" ) o ;
            on c.CustomerID = o.CustomerID ;
   into ;
      cursor C_SomeSampleResult READWRITE 
```

这样你就永远不会有一个模棱两可的表版本，它认为它试图从中获取数据。同样，如果它找不到该文件，那么您首先要解决一个更大的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T06:24:29.597

如果您希望您的应用程序在您想要放入程序和表格的任何地方运行。

你只需要添加这个...

```
SET DEFAULT TO SYS(5)+CURDIR()
SET PATH TO SYS(5)+CURDIR() 
```

**附言**。请注意，这仅在项目仅在分布式 (.exe) 代码中时才会生效。您必须在程序的开发阶段设置路径和默认值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T14:39:29.963

使用 FoxPro，文件“必须”位于搜索路径中。因此，如果您正在构建项目，请将文件 publicfunctions.prg 添加到代码选项卡下的项目文件中，如果您不构建项目，请确保在选项中您有可以看到 prg 所在的文件夹。

如果我们知道您使用的是什么版本的 Fox，也会有所帮助。********

# javascript - 在保存时编译一些 CoffeeScript 文件

> ID：10415449
> 
> 赞同：3
> 
> 时间：2012-05-02T14:08:02.840
> 
> 标签：javascript, vim, coffeescript

我在 Node 和浏览器中使用**CoffeeScript**，只想编译用于浏览器的文件。

如果文件具有扩展名，我已设置**vim**以编译该文件`.js.coffee`，但它会写入一个具有扩展名的文件`.js.js`。我可以将参数传递给编译命令，但是我需要**vim**知道文件名，然后删除额外的`.js`.

这是我的 vimrc 文件的相关部分。

```
au BufWritePost *.js.coffee CoffeeMake! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:50:56.900

一般来说，每次保存都编译不是很方便。我建议您使用[***Vim CoffeeScript 扩展***](https://github.com/vim-scripts/vim-coffee-script)，因为它会在每次保存时检查您的语法。像这样，您将立即获得反馈您的代码是否有意义，测试将需要额外的步骤（继续阅读）:-)

另一个建议是使用 .coffee 作为扩展名，而不是 .js.coffee。它只是更有意义，你不会有 .js.js 结果。

回到编译，当你写出不错的代码时，你可以使用[***cake***](http://coffeescript.org/documentation/docs/cake.html)将你的 .coffee 文件编译成 .js 文件，这样你就可以刷新浏览器并进行测试。Cakefile 用作控制咖啡脚本编译顺序的配置 - 对于较大的项目非常方便。

安装和设置非常容易，在编辑项目时从 vim 调用 cake 就很简单了

```
:!cake build 
```

您可以刷新浏览器并查看结果。

由于我也忙于学习构建文件的最佳方法以及结合主干和蛋糕使用咖啡脚本，我[***在github上创建了一个小项目***](https://github.com/pericazivkovic/coffeescript-backbone-sample)作为自己的参考，也许它也会帮助你蛋糕和一些基本的东西。所有编译的文件都在**www**文件夹中，以便您可以在浏览器中打开它们，并且所有源文件（除了 cake 配置）都在**src**文件夹中。在此示例中，所有 .coffee 文件都被编译并组合在**一个**输出 .js 文件中，然后将其包含在 html 中。如果需要，您可以修改 cake 设置以创建多个 .js 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:29:40.477

您可以使用：

1.  [守卫](https://github.com/guard/guard)和守卫-咖啡脚本。
2.  蛋糕文件+文件观察器
3.  带有 -w 参数的“咖啡”命令[http://coffeescript.org/#usage](http://coffeescript.org/#usage)

# php - 通过 unix 脚本运行 php

> ID：10415450
> 
> 赞同：3
> 
> 时间：2012-05-02T14:08:05.337
> 
> 标签：php, linux, shell

我有上面的 shell 脚本。

```
#!/bin/bash

# a shell script that keeps looping until an exit code is given

nice php -q -f ./data.php -- $@
ERR=$?

exec $0 $@ 
```

我有几个疑问

1.  什么是`$0`什么`$@`
2.  什么是`ERR=$?`
3.  `-- $@`第 5 行做什么
4.  我想知道是否可以将 data.php 作为参数传递。所以我只有我所有类型的执行的 shell 脚本。说，我想运行“sh ss.sh data1.php”那么这应该运行data1.php，如果运行“ss ss.sh data2.php”它应该运行data2.php -</li>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:16:47.057

1)`$0`是可执行文件的名称（在您的情况下是脚本，例如：如果您的脚本被调用，`start_me`则为）`$0``start_me`

2)`ERR=$?`获取返回码`nice php -q -f ./data.php -- $@`

3）`-- $@`做两件事，首先它告诉`php`命令所有后续参数都应传递给`data.php`并将`$@`所有给定参数传递给脚本`./data.php`（例如`./your_script_name foo bar`将转换为`nice php -q -f ./data.php -- foo bar`）

4）简短的回答是的，但是您必须将脚本更改为

```
 YOUR_FILE=$1
 shift #this removes the first argument from $@
 nice php -q -f ./$YOUR_FILE -- $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:13:23.230

```
$0 
```

是脚本的名称。

```
$@ 
```

是给脚本的参数

```
ERR=$? 
```

捕获上一条命令的状态码

```
php_command="php -q -f $1"
shift
nice $php_command -- $@ 
```

您获取 f 标志的第一个参数，然后将其从参数列表中移出，并在双破折号后传递其余参数。

# objective-c - 使用 ARC 时访问综合属性

> ID：10415468
> 
> 赞同：0
> 
> 时间：2012-05-02T14:09:25.593
> 
> 标签：objective-c, ios, automatic-ref-counting

当我声明合成一个这样的属性时：

```
@syntesize myObject = _myObject; 
```

我可以`_myObject`直接在代码中访问，同时避免合成的 getter 和 setter。

但是，如果我像这样合成属性

```
 @syntesize myObject = myObject; 
```

我将不再能够访问隐藏在后面的实例变量`= myObject`吗？我是否应该偏好使用其中一种。因为我`BAD_ACCESS`在使用`_myObject`而不是`self.myObject`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:14:39.007

在这两种情况下，您都可以访问底层 ivar。在这两种情况下，您都应该避免这样做。除了 init、dealloc 和访问器本身之外，在任何地方都使用访问器。这将避免许多令人头疼的问题，无论有没有 ARC。

也就是说，如果您`EXC_BAD_ACCESS`在 ARC 下访问 ivar 时遇到问题，您可能正在执行以下操作之一：

*   不正确的使用`__bridge`
*   使用`assign`或`__unsafe_unretained`不安全

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:15:09.510

如果您创建一个属性，那么您应该使用属性访问器并避免直接使用实例变量。唯一的例外是在你的`-init`and`-dealloc`方法中，在大多数情况下也可以在那里使用访问器。不要避开访问器，*使用*它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T14:15:46.090

使用`_myObject`本身不应该导致内存管理问题。原因几乎可以肯定在其他地方，或者比简单地使用下划线前缀的 ivar 名称要微妙得多。无论如何，如果您将 ivar 命名为与属性相同的名称，您仍然可以像往常一样仅使用其名称来访问实例变量。只有当您通过访问器方法（例如使用`self.myObject`or 或`[self myObject]`）访问它时，您才不会直接访问 ivar。您也可以使用 访问它`self->myObject`，这相当于 just `myObject`。

综上所述，我认为仅在访问器方法实现本身内部直接访问 ivars 以及`init`（`dealloc`如果不使用 ARC）是一种很好的做法。

# c# - c#中的文本框值

> ID：10415471
> 
> 赞同：1
> 
> 时间：2012-05-02T14:09:38.047
> 
> 标签：c#, winforms, dataset

我刚刚将 StudentID 和 StudentName 更新到数据库中。

我使用以下代码查看文本框中的值，但是当我想选择行时，它应该是 ID 行而不是 StudentID。

我的意思是我想看到 StudentID 的价值，而不是 ID 行。

我不想使用 ID 行来查看 StudentName。

我想在输入 StudentID 时看到 StudentName。

```
sql = new SqlConnection(@"Data Source=PC-PC\PC;Initial Catalog=Test;Integrated Security=True");
adapter = new SqlDataAdapter("select * from Entry",sql);
dt = new DataTable();
adapter.Fill(dt);
textBox1.Text = dt.Rows[3]["StudentName"].ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:20:55.607

如果 studentID 是表的主键，则使用：

```
DataRow row = dt.Rows.Find(studentID);
if (row != null)
    textBox1.Text = row["StudentName"].ToString(); 
```

否则使用`dt.Select`方法。顺便说一句，将数据访问代码与 UI 代码混合并不是一个好主意

更新：你也可以使用 LINQ

```
string name = (from row in dt.AsEnumerable()
              where row.Field<int>("StudentID") == studentID
              select row.Field<string>("StudenName"))
              .Single(); 
```

更新：如果您正在输入学生 id 并想要获取学生姓名，那么您可以从数据库中检索学生姓名，将参数传递给 sql 命令：

```
private string GetStudentName(int studentID)
{
    string connString = @"Data Source=PC-PC\PC;Initial Catalog=Test;Integrated Security=True";
    using (SqlConnection conn = new SqlConnection(connString))
    {
        string query = "SELECT StudentName FROM Entry WHERE StudentID = @studentID";
        SqlCommand cmd = new SqlCommand(query, conn);
        cmd.Parameters.Add("@studentID", SqlDbType.Int).Value = studentID;
        conn.Open();
        return (string)cmd.ExecuteScalar();
    }
} 
```

还考虑只返回第一个条目（如果 StudentID 不是 PK）并验证 DbNull。

更新：如果您需要检索学生的多个属性，那么我创建了学生类：

```
public class Student
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Grade { get; set; }
} 
```

并从数据阅读器中填充其属性：

```
private Student GetStudent(int studentID)
{
    string connString = @"Data Source=PC-PC\PC;Initial Catalog=Test;Integrated Security=True";
    using (SqlConnection conn = new SqlConnection(connString))
    {
        string query = "SELECT * FROM Entry WHERE StudentID = @studentID";
        SqlCommand cmd = new SqlCommand(query, conn);
        cmd.Parameters.Add("@studentID", SqlDbType.Int).Value = studentID;
        conn.Open();
        SqlDataReader reader = cmd.ExecuteReader();

        if (!reader.Read())
             throw new Exception("Student not found");

        return new Student()
        {
            Id = (int)reader["StudentID"],
            Name = (string)reader["StudentName"],
            Grade = (string)reader["Grade"]
        };
    }
} 
```

然后，当您在文本框中输入学生 ID 时，从数据库中检索学生并在控件中显示其属性：

```
int studentID = Int32.Parse(idTextBox.Text);
Student student = GetStudent(studentID);
nameTextBox.Text = student.Name;
gradeTextBox.Text = student.Grade; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:23:48.777

如果您正在寻找一组学生，请显示姓名列表

当您获得选择时，获取所选行的 ID...

你应该使用组合框/列表框

1.  将 DataSource 设置为您的 DataTable
2.  将 ValueMember 设置为“rowID”
3.  设置 DisplayMember = "学生姓名"

现在你有一个像

```
-Tomer Weinberg
-aliprogrammer
-some freek 
```

并且当您查询 *myComboBox.SelectedValue*时 ，您将获得该学生的 ID，如果没有选择，则为 NULL。

**编辑**

![截屏](../Images/cc36c699ac6b78c1a3ced2c34c196952.png)

把它放在带有标签和列表框的表单中（可以是组合框）

```
 private DataTable dataTable1;
    public Form1()
    {
        InitializeComponent();

        dataTable1 = new DataTable("myTable");
        dataTable1.Columns.Add("id", typeof (int));
        dataTable1.Columns.Add("name", typeof(string));

        dataTable1.Rows.Add(1, "Tomer");
        dataTable1.Rows.Add(2, "Ali");
        dataTable1.Rows.Add(3, "Some Other");

        listBox1.SelectedValueChanged += new EventHandler(listBox1_SelectedValueChanged);

        listBox1.DataSource = dataTable1; // collection of Rows
        listBox1.ValueMember = "id"; // what is the value of the row.
        listBox1.DisplayMember = "name"; // what should be visible to user
        listBox1.Refresh();
    }

    void listBox1_SelectedValueChanged(object sender, EventArgs e)
    {
        label1.Text = string.Format("Selected: {0}", listBox1.SelectedValue);
    } 
```

祝你好运，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T09:56:19.797

在我的旧帖子的评论之后，这是一个对话框示例

```
public class MySearchForm
{
public string SelectedSID { get; private set;}
// code to show a list of Students and StudentsIDs.
}

public class myMainForm
{
    public void SearchButton_Click(object sender, EventArgs ea)
    {
        using(MySearchForm searchForm = new MySearchForm())
        {
            if(DialogResult.OK == searchForm.ShowDialog())
            {
                 mySutdentIDTextBox.Text = searchForm.SelectedSID;
            }
        }
    }
} 
```

您可以在调用 ShowDialog() 之前使用构造函数和设置参数自定义对话框

您可以添加更多信息以从对话框中获取...

真的，它有点像使用 OpenFileDialog 形式。获取用户选择的文件

祝你好运，享受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:29:08.737

您也可以使用 DataTable.Select 方法。您可以在其中传递过滤器表达式。它返回 DataRow 数组

```
DataRow [] rowCollection= dt.Select("StudentID=" + <From Some Control> or method argument) 
```

**这是链接** [http://msdn.microsoft.com/en-us/library/det4aw50.aspx](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)

您可以通过这种方式使用 Select ：

```
DataTable dt = new DataTable("Test");
            dt.Columns.Add("ID") ;
            dt.Columns.Add("StudentID");
            dt.Columns.Add("StudentName");

            object[] rowVals = new object[3];
            rowVals[0] = "1";
            rowVals[1] = "ST-1";
            rowVals[2] = "Kunal Uppal";

            dt.Rows.Add(rowVals);
            string studentID = "ST-1"; //this can come from a textbox.Text property
            DataRow[] collection= dt.Select("StudentID=" + "'" + studentID + "'");
            string studentName = Convert.ToString(collection[0]["StudentName"]); 
```

# java - 如何使用备用端口号发送邮件

> ID：10415473
> 
> 赞同：1
> 
> 时间：2012-05-02T14:09:51.587
> 
> 标签：java

如何修复异常

`Could not connect to SMTP host: localhost, port: 25`

从 java 应用程序发送电子邮件时，如何使用备用端口号发送除**端口号：25**以外的邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:13:06.770

您必须找出 SMTP 服务器正在侦听的端口，或者找到另一个*正在*侦听端口 25 的主机服务器。

没有别的办法。你是一个请求者，提出一个请求。如果主机无法实现它，那么您最终无法改变它。

我的建议是找到 SMTP 主机所有者并询问您的客户应该如何联系他们。确保您有足够的防火墙规则和权限来执行此操作。

# symfony - Doctrine2 : 在多对多关联上分离/合并

> ID：10415474
> 
> 赞同：3
> 
> 时间：2012-05-02T14:09:52.247
> 
> 标签：symfony, doctrine-orm

我一直在努力使用这些功能（[附加/合并功能](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-objects.html#detaching-entities)）。

我的需求很简单，我有一个`BookFilterType`过滤`Book`对象集合的方法。

直到现在，当做

```
public function indexAction()
{
    $book = new Book($this->getUser());
    $filters = $this->getFilters();
    $form = $this->createForm(new BookFilterType(), $filters);

    ...
    return array(...);
} 
```

我收到一个**错误**：`Entities passed to the choice field must be managed`因为在过滤器中它们是其他实体。

所以基本上，在会话中保存过滤器标准时，我只需要存储 ID，然后使用`find($id)`.

但这很难看，我的代码变得不可读！

所以我决定使用这个`detach / merge`功能。

存储分离的实体后，我想再次合并它们以重新注入表单中的值，看来我需要`cascade={"merge"}`在我的对象上使用，因为我得到：

`Class Doctrine\Common\Collections\ArrayCollection is not a valid entity or mapped super class.`

**问题（最后）**

**我在哪里放`cascade={"merge"}`: 在`joinColumns`OR上`inverseJoinColumns`？或两者 ？? `ManyToMany`因为我在那些过滤器中只有关联**

```
/**
 * @ORM\ManyToMany(targetEntity="MyTargetedEntity")
 * @ORM\JoinTable(name="target_entity_nn",
 *      joinColumns={@ORM\JoinColumn(name="some_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="other_id", referencedColumnName="id")}
 *      )
 *
 **/
private $contributors; 
```

PS：我正在使用`Symfony2.1`/ `Doctrine master`。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:19:14.053

你可以把它放在@ORM\ManyToMany

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#manytomany](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#manytomany)

# php - UPDATE 查询不适用于 LIMIT

> ID：10415478
> 
> 赞同：1
> 
> 时间：2012-05-02T14:10:19.050
> 
> 标签：php, mysql, limit

嗨，我正在使用限制为 0,1 的 UPDATE 查询，我必须更新与我在查询中给出的条件匹配的第一行

```
mysql_query("UPDATE `product_option` SET `input_value`='$color_a',`input_price`='$color_price_a' WHERE `product_id`='$_REQUEST[pid]' and `input_type`='option' LIMIT 0,1"); 
```

在我的 sql 表中，$_request[pid] 重复了很多次，所以在 $_request[pid] 匹配的行上，我想更新它的第一行但是这个查询没有做任何事情数据仍然相同我已经添加了。

任何建议将不胜感激

这是桌子的图像

![在此处输入图像描述](../Images/63e3334b2ed6e1ebd1aa81cf5f15b9ce.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:11:34.267

它应该是`LIMIT 1`

`LIMIT 0,1`表示`OFFSET 0 LIMIT 1`，但`UPDATE`不支持偏移量。

即使它会起作用（它不起作用），您仍然**必须始终**提供一个`ORDER`子句，否则它将是一个随机行。

# .net - 将 web.config 部分复制到所有配置

> ID：10415479
> 
> 赞同：2
> 
> 时间：2012-05-02T14:10:23.840
> 
> 标签：.net, web-config

我的 Web.config 文件中有一个部分，我希望 .NET 自动复制到我所有配置（最新版本、IAT、UAT、发布等）中的所有 Web.config 文件。我可以在我的 Web.config 中为该节文件键入什么神奇的咒语来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:16:59.943

如果您询问如何确保在部署时复制链接的配置文件（使用`configSource`in `web.config`），请确保将它们`Build Action`设置为`Content`.

您可以通过右键单击解决方案资源管理器中的文件并选择`Properties`(Alt + Enter) 来进行设置。

* * *

更新：

由于您正在谈论配置转换 - 这些仅在您*部署*Web 项目时应用。

您可以使用[slow cheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)扩展来获取转换以应用于编译。

# c# - 禁用的组合框在 Win7 上看起来已启用

> ID：10415480
> 
> 赞同：1
> 
> 时间：2012-05-02T14:10:27.257
> 
> 标签：c#, winforms, windows-7, combobox

在我们的项目中，我们使用了许多表单和控件。我们的一个表单显示了许多包含的控件。第一次显示表单时，所有控件都应该被禁用（有一个额外的“编辑”按钮）。

但我`ComboBoxes`看起来他们已启用。它们的行为不是这样的——你不能点击它们，也不会触发任何事件。如果触发了绘制事件（例如调整窗口大小），它们实际上是正确绘制的。

此行为仅适用于 Windows 7，不适用于 Windows XP。我该怎么做才能正确绘制组合框？它不是每次都发生，所以我认为这不是我的组合框的问题... ...它也发生了一些组合框被正确绘制而其余的被绘制错误！

![左侧绘制的组合框错误 - 右侧绘制正确](../Images/424e6850e01acea07a733475d6db550b.png)

我能做些什么来避免这种情况？

**更新：**我刚刚发现只有在 Windows 7 中选择“经典”以外的另一个主题时才会发生这种行为。

我还通过 WindowMessages 对我进行了调试，发现某些消息丢失/未发送。我会告诉你不同的读数，但文件只有几百行：/

在经典中，一切都正确绘制。什么会导致这种行为？

**UPDATE2：**也许只是一点点更新——在我为整个应用程序激活双缓冲（在主窗体中使用 WS_EX_COMPOSITED）之后，行为不再存在。但这仍然很奇怪，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:15:30.020

如果绘画事件修复它，您可以通过调用强制重绘

`this.Invalidate()`;

# multithreading - 如何终止具有单独消息循环的线程？

> ID：10415481
> 
> 赞同：4
> 
> 时间：2012-05-02T14:10:28.450
> 
> 标签：multithreading, delphi, delphi-2007, message-loop

我正在为`SetWindowsHookEx`API 编写一个实用单元。

要使用它，我想要一个这样的界面：

```
var
  Thread: TKeyboardHookThread;
begin
  Thread := TKeyboardHookThread.Create(SomeForm.Handle, SomeMessageNumber);
  try
    Thread.Resume;
    SomeForm.ShowModal;
  finally
    Thread.Free; // <-- Application hangs here
  end;
end; 
```

在我当前的实现中，`TKeyboardHookThread`我无法使线程正确退出。

代码是：

```
 TKeyboardHookThread = class(TThread)
  private
    class var
      FCreated                 : Boolean;
      FKeyReceiverWindowHandle : HWND;
      FMessage                 : Cardinal;
      FHiddenWindow            : TForm;
  public
    constructor Create(AKeyReceiverWindowHandle: HWND; AMessage: Cardinal);
    destructor Destroy; override;
    procedure Execute; override;
  end;

function HookProc(nCode: Integer; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
var
  S: KBDLLHOOKSTRUCT;
begin
  if nCode < 0 then begin
    Result := CallNextHookEx(0, nCode, wParam, lParam)
  end else begin
    S := PKBDLLHOOKSTRUCT(lParam)^;
    PostMessage(TKeyboardHookThread.FKeyReceiverWindowHandle, TKeyboardHookThread.FMessage, S.vkCode, 0);
    Result := CallNextHookEx(0, nCode, wParam, lParam);
  end;
end;

constructor TKeyboardHookThread.Create(AKeyReceiverWindowHandle: HWND;
  AMessage: Cardinal);
begin
  if TKeyboardHookThread.FCreated then begin
    raise Exception.Create('Only one keyboard hook supported');
  end;
  inherited Create('KeyboardHook', True);
  FKeyReceiverWindowHandle     := AKeyReceiverWindowHandle;
  FMessage                     := AMessage;
  TKeyboardHookThread.FCreated := True;
end;

destructor TKeyboardHookThread.Destroy;
begin
  PostMessage(FHiddenWindow.Handle, WM_QUIT, 0, 0);
  inherited;
end;

procedure TKeyboardHookThread.Execute;
var
  m: tagMSG;
  hook: HHOOK;
begin
  hook := SetWindowsHookEx(WH_KEYBOARD_LL, @HookProc, HInstance, 0);
  try
    FHiddenWindow := TForm.Create(nil);
    try
      while GetMessage(m, 0, 0, 0) do begin
        TranslateMessage(m);
        DispatchMessage(m);
      end;
    finally
      FHiddenWindow.Free;
    end;
  finally
    UnhookWindowsHookEx(hook);
  end;
end; 
```

AFAICS 只有在线程中有消息循环时才会调用挂钩过程。问题是我不知道如何正确退出这个消息循环。

我尝试使用`TForm`属于线程的隐藏来执行此操作，但消息循环不处理我发送到该窗体的窗口句柄的消息。

如何正确执行此操作，以便消息循环在线程关闭时终止？

编辑：我现在使用的解决方案看起来像这样（并且像魅力一样工作）：

```
 TKeyboardHookThread = class(TThread)
  private
    class var
      FCreated                 : Boolean;
      FKeyReceiverWindowHandle : HWND;
      FMessage                 : Cardinal;
  public
    constructor Create(AKeyReceiverWindowHandle: HWND; AMessage: Cardinal);
    destructor Destroy; override;
    procedure Execute; override;
  end;

function HookProc(nCode: Integer; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
var
  S: KBDLLHOOKSTRUCT;
begin
  if nCode < 0 then begin
    Result := CallNextHookEx(0, nCode, wParam, lParam)
  end else begin
    S := PKBDLLHOOKSTRUCT(lParam)^;
    PostMessage(TKeyboardHookThread.FKeyReceiverWindowHandle, TKeyboardHookThread.FMessage, S.vkCode, 0);
    Result := CallNextHookEx(0, nCode, wParam, lParam);
  end;
end;

constructor TKeyboardHookThread.Create(AKeyReceiverWindowHandle: HWND;
  AMessage: Cardinal);
begin
  if TKeyboardHookThread.FCreated then begin
    raise Exception.Create('Only one keyboard hook supported');
  end;
  inherited Create('KeyboardHook', True);
  FKeyReceiverWindowHandle     := AKeyReceiverWindowHandle;
  FMessage                     := AMessage;
  TKeyboardHookThread.FCreated := True;
end;

destructor TKeyboardHookThread.Destroy;
begin
  PostThreadMessage(ThreadId, WM_QUIT, 0, 0);
  inherited;
end;

procedure TKeyboardHookThread.Execute;
var
  m: tagMSG;
  hook: HHOOK;
begin
  hook := SetWindowsHookEx(WH_KEYBOARD_LL, @HookProc, HInstance, 0);
  try
    while GetMessage(m, 0, 0, 0) do begin
      TranslateMessage(m);
      DispatchMessage(m);
    end;
  finally
    UnhookWindowsHookEx(hook);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T14:27:42.743

您需要将 WM_QUIT 消息发送到该线程的消息队列以退出线程。[如果GetMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644936%28v=vs.85%29.aspx)从队列中提取的消息是 WM_QUIT，则返回 false，因此它将在接收到该消息时退出循环。

为此，请使用[PostThreadMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644946%28v=vs.85%29.aspx)函数将 WM_QUIT 消息直接发送到线程的消息队列。例如：

```
PostThreadMessage(Thread.Handle, WM_QUIT, 0, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:31:31.503

消息泵永远不会退出，因此当您释放线程时，它会无限期地阻塞等待 Execute 方法完成。从线程调用 PostQuitMessage 以终止消息泵。如果您希望从主线程调用它，那么您需要将 WM_QUIT 发布到线程。

此外，您的隐藏窗口是一场等待发生的灾难。您不能在主线程之外创建 VCL 对象。您必须使用原始 Win32 创建窗口句柄，或者更好的是使用 DsiAllocateHwnd。

# windows-phone-7 - 先知碰撞

> ID：10415483
> 
> 赞同：0
> 
> 时间：2012-05-02T14:10:32.913
> 
> 标签：windows-phone-7, xna, farseer

我正在使用 farseer 物理引擎来检测 N 个盒子之间的碰撞。其中一个放置在屏幕底部。当您单击屏幕时，会出现其他人。它们出现在某个高度的严格的第一个隔间上。当它们落在一个盒子上时，1 号是碰撞，但盒子的行为就像它们是橡胶一样（物理而不是图像）。在屏幕上，它看起来像一个盒子从下半部分掉下来，然后爬到盒子的顶部。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:15:38.917

我认为你的盒子有很强的归还价值。恢复原状使身体反弹。

例如：

```
Body body = BodyFactory.CreateBody(world, Vector2.Zero);

body.Restitution = (play with some float value.); 
```

我希望这是您问题的答案。

# javascript - 如何在Javascript中提取包括return语句在内的通用逻辑？

> ID：10415487
> 
> 赞同：0
> 
> 时间：2012-05-02T14:10:56.367
> 
> 标签：javascript, refactoring

这是我的代码：

```
function function1() {
    var ids = GetIds(); // predefined function
    if (ids.length === 0) {
        alert("Please select at least one item to procees.");
        return;
    }

    ...
}

function function2() {
    var ids = GetIds(); // predefined function
    if (ids.length === 0) {
        alert("Please select at least one item to procees.");
        return;
    }

    ...
}

function function3() {
    var ids = GetIds(); // predefined function
    if (ids.length === 0) {
        alert("Please select at least one item to procees.");
        return;
    }

    ...
} 
```

如何提取公共部分？如何重构代码？return 语句很难处理。是否有任何与重构此代码有关的模式？

提前致谢！

```
 if (ids.length === 0) {
        alert("Please select at least one item to procees.");
        return;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:51:14.883

这非常适合[装饰器模式](https://en.wikipedia.org/wiki/Decorator_pattern)。

```
function decorateGetId(f) {
  return function () {
    var ids = GetIds();
    if (ids.length === 0) {
      alert("Please select at least one item to process.");
      return;
    } else {
      return f(ids);
    }
  };
} 
```

然后要么

```
function function1(ids) {
  // ...
}
function1 = decorateGetId(function1); 
```

或者我的偏好，因为函数语句对提升做了奇怪的事情。

```
var function2 = decorateGetId(function (ids) {
  // function 2 body ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:16:42.393

你不能。你唯一能做的就是移动`alert()`到`GetIds()`. 但是，在这种情况下，函数名称会有点混乱。

```
var ids = GetIds();
if(!ids) return; 
```

或者你可以像这样改变它：

```
GetIds(function(ids) {

}); 
```

您的`GetIds`函数将如下所示：

```
function GetIds(callback) {
    var ids = ....;
    if(!ids) alert('...');
    else callback(ids);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:18:34.517

你可以试试：

```
function checkId(ids) {
    if (ids.length === 0) {
        alert("Please select at least one item to procees.");
        return false;
    }
    return true;
}

function function1() {
    var ids = GetIds();
    if (!checkId(ids)) return;

    // More code here
} 
```

# android - Android 在用户之间同步数据

> ID：10415489
> 
> 赞同：27
> 
> 时间：2012-05-02T14:11:01.010
> 
> 标签：android, database, synchronization, cloud, android-contentprovider

我有一个维护不同地理位置的本地 SQLite 数据库的 android 应用程序。

现在我想将该数据库连接到“云”以完成以下任务：

*   首次安装应用程序时（或根据要求）对所有内容进行初始下载

*   已在本地添加的新位置应上传到云端（自动）

*   应不时检查在线数据库是否有新的在线条目，并将其下载到本地数据库。

我在完成这个过程中遇到了很多问题。

首先是**如何去做**。我认为它涉及 contentProviders 和 syncProviders，但我不确定如何。我是否需要在 contentProvider 中复制我的 SQLite 数据库，或者我在底层设计中犯了一个错误以直接使用数据库，而不是通过自定义内容提供程序？

其次，位置记录不能简单地从在线数据库中上下复制，因为它们将具有冲突的 ID 号。我有几个关系表，例如将标签 ID 与位置 ID 相关联的“标签”。我的标签 ID 不一定与其他用户的标签 ID 匹配。与位置 ID 相同。因此，传输中需要涉及一些逻辑。 **应该在哪里/如何正确处理**？这是 contentResolver 的角色吗？（不确定那是什么）

第三，如果两个用户同时添加相同的位置（可能有不同的描述和细节）会发生什么？ **是否有合并**这些记录的最佳实践？

最后，**构建/托管在线组件的最简单方法是什么？** 这部分对我来说是全新的。我可以将主数据库放在公共保管箱文件夹中，还是需要从头开始构建自定义 php web 应用程序？或者是否有一个预先打包的解决方案可以使这部分更容易？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-02T14:36:13.537

你绝对应该使用`ContentProvider`and `SyncAdapters`。你应该：

*   `ContentProvider`使用界面包装您的数据库功能
*   设置一个`SyncService`匹配的权限`ContentProvider`
*   在您的`SyncAdapter`专业中，您将覆盖`onPerformSync()`
*   使用`SharedPreferences`存储来跟踪您的同步参数，例如 lastSync 时间等。

    ```
    final SharedPreferences syncMeta =
                        mContext.getSharedPreferences("sync:" + account.name, 0);
    long lastSyncTime = syncMeta.getLong(LAST_SYNC, 0);
    long lastServerSyncTime = syncMeta.getLong(SERVER_LAST_SYNC, 0); 
    ```

*   这可以很容易地告诉您它是否是第一次同步，您可以在此处进行初始处理

*   您将在此处编写同步算法，即一种/两种方式。
*   我发现在您的 Android 记录中记录时间戳和服务器数据库 ID 以帮助同步很有用。这可以帮助您制定合并策略。
*   在此处使用 ContentProvider 进行数据库操作。ContentProviders 提供了一种从应用程序和同步适配器访问数据的统一方式。他们将通知系统更新，以便框架和计划同步。如果您选择这样做，它们也可以作为您的数据与其他应用程序的公共接口。

*   此外，通过使用 SyncService，您可以节省电池电量。系统将使用网络 Tickles 来启动同步操作，如果它们为所有应用程序一起批处理而不是每个应用程序唤醒系统，则最好

最后，

您应该查看两个示例。它们几乎涵盖了我解释的所有内容

1.  JumpNote - [http://code.google.com/p/jumpnote/source/browse/](http://code.google.com/p/jumpnote/source/browse/)
2.  SampleSyncAdapter - [http://developer.android.com/resources/samples/SampleSyncAdapter/index.html](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)

这两个应用程序都使用 Google App Engine 作为云组件。它很容易上手，所以一定要探索这些选项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T14:40:38.437

首先在android中创建一个本地数据库。并保存位置详细信息。保存后发送到云/服务器数据库。

接下来偶尔你需要同步哪个云/服务器数据库。所以在 android 中编写一个服务，比如采取特定的时间间隔并与 clound/server DB 同步。

合并所以在表中取一个时间戳。并检查该时间戳并相应更新。

# android - 安卓：谷歌地图视图IOException

> ID：10415492
> 
> 赞同：0
> 
> 时间：2012-05-02T14:11:13.403
> 
> 标签：android

我正在构建一个使用 mapview 的应用程序。使用一个 MapActivity，一切正常。但是，当我添加另一个 MapActivity 使用包含 mapview 的不同 xml（但相同的地图键）时，两个地图都停止工作并抛出 IOExceptions

谁能帮我解决这个问题？

在模拟器上运行时，Log 只显示

```
05-02 19:56:05.975: INFO/Mapcoordinates(398): java.io.IOException: Service not Available 
```

我正在使用两个 mapactivities，它们使用两个不同的地图视图但具有相同的键

该应用程序需要两个活动的地图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:52:06.267

多亏了[NickT](https://stackoverflow.com/users/440010/nickt)，我才知道我不能在名称进程下拥有两个地图视图。但是在不同的过程中进行每项活动对我来说似乎是一件冒险的事情。所以这是我的解决方法：

1.  为包含两者使用的组件的两个地图活动创建一个通用布局 xml。

2.  在地图活动的自定义实现中，将其他活动的组件的可见性设置为 View.GONE

3.  如果您使用的是相对布局，请根据需要调整布局参数。

就是这样..但这只是对我有用的解决方法。如果有人有更好的方法，请分享！

# jsf-2 - 我们应该将 Facelet 区域包装在一个 div 中吗？

> ID：10415493
> 
> 赞同：0
> 
> 时间：2012-05-02T14:11:15.517
> 
> 标签：jsf-2, facelets

我已经看到了创建 Facelets 页面模板的示例，其中每个定义的“区域”都包含在具有定义 id 的 div 标记中。将这些区域包装在具有已定义 id 的 div 标签中是最佳做法吗？有哪些实际示例可以说明为什么有人可能会从包含定义 id 的 div 标签中受益，如下例所示？

```
 <div id="header">
    <ui:insert name="header" >
        <ui:include src="/template/common/commonHeader.xhtml" />
    </ui:insert>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:39:49.887

实际的好处更多在于生成的 HTML。在这种特殊情况下，它只是网页“标题”的[语义](http://en.wikipedia.org/wiki/Semantic_HTML)分离。然后，您可以使用纯 CSS 以您想要的方式设置整个标题的样式和位置。然后，您可以使用纯 JS 以您想要的方式操作整个标题。

请注意，在 HTML5 中，这样的 a`<div id="header">`应该被一个[`<header>`](http://html5doctor.com/the-header-element/)元素替换。但是我们还没有达到超过 95% 的使用浏览器支持 HTML5 的阶段。

JSF/Facelets 本身并不关心这一切。毕竟它“只是”一个 HTML 代码生成器。

# elasticsearch - Elasticsearch按数组中的单个嵌套文档键排序

> ID：10415494
> 
> 赞同：7
> 
> 时间：2012-05-02T14:11:25.383
> 
> 标签：elasticsearch

我有看起来像这样的文件（这里有两个例子）：

```
{
    "id": 1234,
    "title": "the title",
    "body": "the body",
    "examples": [
        {
            "evidence_source": "friend",
            "source_score": 15
        },
        {
            "evidence_source": "parent",
            "source_score": 12
        }
    ]
} 
```

和

```
{
    "id": 6346,
    "title": "new title",
    "body": "lots of content",
    "examples": [
        {
            "evidence_source": "friend",
            "source_score": 10
        },
        {
            "evidence_source": "parent",
            "source_score": 27
        },
        {
            "evidence_source": "child",
            "source_score": 4
        }
    ]
} 
```

数组中子文档的格式`examples`总是有 an`evidence_source`和 a`source_score`但是这些子文档的数量是可变的，每个都有不同的`evidence_source`值。

我想知道是否可以根据`source_score`与特定值匹配的值之一对具有这种格式的文档进行排序`evidence_source`。我真的很想能够做到这一点：

*   按相关的`source_score`位置降序对文档进行排序。文档s 的结果排序将是 1234,6346。`evidence_source``friend``id`
*   按相关的`source_score`位置降序对文档进行排序。文档s 的结果排序将是 6346,1234。`evidence_source``parent``id`

我为做这样的事情而得出的最接近的结果是[1](https://stackoverflow.com/questions/6465852/how-to-search-by-array-elements-in-elasticsearch)和[2](http://elasticsearch-users.115913.n3.nabble.com/Query-Syntax-for-arrays-and-nested-objects-td212582.html)，但我不相信它们完全符合我想要做的事情。

关于我如何解决这个问题的任何想法？我已经考虑了一些基于`examples`单独索引这些子文档的想法，但我对弹性搜索相当陌生，因此我正在寻找一些关于如何以最直接的方式实现我的目标的建议（这可能是一个梦想...)

**更新**：[elasticsearch 邮件列表](https://groups.google.com/forum/?fromgroups#!topic/elasticsearch/ldRIB0YYbB4/discussion)上的帖子似乎表明这是不可能的，但我想知道这里的其他人是否有任何不同的想法！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-23T13:59:47.783

在 0.90 中，elasticsearch 添加了对基于嵌套文档内的字段进行排序的支持：

[https://github.com/elasticsearch/elasticsearch/issues/2662](https://github.com/elasticsearch/elasticsearch/issues/2662)

> 嵌套字段支持的排序在现有的排序选项之上具有以下参数：
> 
> *   `nested_path`- 定义要排序的嵌套对象。实际的排序字段必须是此嵌套对象内的直接字段。默认是使用从排序字段中最直接继承的嵌套对象。
> *   `nested_filter`- 嵌套路径内的内部对象的过滤器应匹配，以便通过排序考虑其字段值。常见的情况是在嵌套过滤器或查询中重复查询/过滤器。默认情况下 no`nested_filter` 处于活动状态。

鉴于您的示例数据，以下查询应该为您提供您所追求的：

```
{
  "query": {
    "match_all": {}
  },
  "sort": [
    {
      "examples.source_score": {
        "order": "desc",
        "nested_path": "examples",
        "nested_filter": {
          "term": {
            "examples.evidence_source": "friend"
          }
        }
      }
    }
  ]
} 
```

# java - 严重：管理器 [localhost#/]：无法通过 TCP 通道接收消息

> ID：10415500
> 
> 赞同：2
> 
> 时间：2012-05-02T14:11:48.903
> 
> 标签：java, tomcat, tomcat6, liferay

我目前正在搭建一个tomcat 6集群环境，liferay 6.0.6。具有会话复制的 4 个节点。没有粘性会话。

因此，按照本网站提供的指南，我执行了以下操作：

webapps/conf/context.xml 添加：webapps/ROOT/WEB-INF/web.xml 添加：到文件顶部，在第一个括号之后。我还向我的所有自定义 portlet web.xml 添加了 distributable。在 setenv.sh 中：-Djava.net.preferIPv6Addresses=false -Djava.net.preferIPv4Stack=true

在 webapps/conf/server.xml

```
<Engine name="Catalina" defaultHost="localhost" jvmRoute="tomcatA" /> 
```

跨节点的tomcatA/B/C/D。

```
<Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"
    channelSendOptions="8">
    <Manager className="org.apache.catalina.ha.session.DeltaManager"
        expireSessionsOnShutdown="false" notifyListenersOnReplication="true" />
    <Channel className="org.apache.catalina.tribes.group.GroupChannel">
        <Membership className="org.apache.catalina.tribes.membership.McastService"
            address="228.0.0.10" port="45564" frequency="500" dropTime="3000" />
        <Receiver className="org.apache.catalina.tribes.transport.nio.NioReceiver"
            address="auto" port="4000" autoBind="100" selectorTimeout="5000"
            maxThreads="6" />
        <Sender className="org.apache.catalina.tribes.transport.ReplicationTransmitter">
            <Transport
                className="org.apache.catalina.tribes.transport.nio.PooledParallelSender" timeout="30000" />
        </Sender>
        <Interceptor
            className="org.apache.catalina.tribes.group.interceptors.TcpFailureDetector" />
            <Interceptor
            className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor" />
    </Channel>
    <Valve className="org.apache.catalina.ha.tcp.ReplicationValve"
        filter=".*\.gif;.*\.js;.*\.jpg;.*\.png;.*\.css;.*\.txt;" />
    <ClusterListener
        className="org.apache.catalina.ha.session.ClusterSessionListener" />
</Cluster> 
```

在启动时，每个节点都会互相检测到，并且似乎可以正常工作。然而，当有人试图修改网页内容时，我们会得到一个错误：

```
SEVERE: Manager [localhost#/]: Unable to receive message through TCP channel
java.lang.IllegalStateException: setAttribute: Session already invalidated
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1326)
    at org.apache.catalina.ha.session.DeltaSession.setAttribute(DeltaSession.java:594)
    at org.apache.catalina.ha.session.DeltaRequest.execute(DeltaRequest.java:164)
    at org.apache.catalina.ha.session.DeltaManager.handleSESSION_DELTA(DeltaManager.java:1487)
    at org.apache.catalina.ha.session.DeltaManager.messageReceived(DeltaManager.java:1437)
    at org.apache.catalina.ha.session.DeltaManager.messageDataReceived(DeltaManager.java:1171)
    at org.apache.catalina.ha.session.ClusterSessionListener.messageReceived(ClusterSessionListener.java:92)
    at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:901)
    at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:882)
    at org.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:269)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
    at org.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:110)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)
        at org.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:241)
    at org.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:225)
    at org.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:188)
    at org.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:91)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我的 liferay-ext.properties ：

```
cluster.link.autodetect.address=www.google.com:80
lucene.replicate.write=true
cluster.link.enabled=true

net.sf.ehcache.configurationResourceName=/cache/hibernate-clustered.xml
ehcache.multi.vm.config.location=/cache/liferay-multi-vm-clustered.xml 
```

我还在所有节点上创建了一个 jsp

```
<td>
  Session ID</td>
<td><%= session.getId() %></td>
<% session.setAttribute("abc","abc"); %>
</tr>
<tr>
<td>
  Created on</td>
  <td><%= new java.util.Date(session.getCreationTime()).toString() %></td>
</tr>
</table>
</body>
</html> 
```

使用同一个用户，我可以切换服务器，并且会话似乎可以毫无问题地复制。但是，当我在 liferay 中修改某些内容时，我仍然会得到堆栈跟踪。

我已经被困了一段时间了。我们检查了所有服务器和 JVM 时间是否与 NTP 服务器正确同步。没有端口被阻塞。服务器无法访问互联网。它们都在VM上运行。

有人知道我做错了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:48:50.917

一些笔记...

1.) 您报告的问题可能与用于*channelSendOptions*的值有关。

> 严重：管理器 [localhost#/]：无法通过 TCP 通道接收消息 java.lang.IllegalStateException：setAttribute：会话已失效

您当前的配置将*channelSendOptions*设置为值*8*。这意味着在您的节点之间发送的消息是异步发送的。这对速度很有好处，但是，这意味着数据可能会乱序到达 [1]。

错误消息表明它收到了更新会话属性的消息，但是要更新的会话已经失效（即删除）。出现此错误的一个常见原因是收到的消息乱序。

在大多数情况下，您可以通过将*channelSendOptions*设置为*6*来纠正此问题。这将同步发送消息，从而保证顺序。

[1] - [https://tomcat.apache.org/tomcat-6.0-doc/config/cluster.html#Attributes](https://tomcat.apache.org/tomcat-6.0-doc/config/cluster.html#Attributes)

2.) 另一种可能性（虽然可能性较小）是您在 Tomcat 中遇到了错误。您没有列出您正在使用的 Tomcat 的具体版本，但升级到最新的 Tomcat 6.0.x 版本也是一个好主意。

3.）您表示“没有粘性会话就无法复制会话”。这是不正确的。会话复制和会话粘性是两个独立的过程。虽然它们经常一起使用，但会话复制不需要粘性会话，粘性会话不需要会话复制。

会话复制（Tomcat 称为“集群”）是跨多个 Tomcat 服务器复制会话数据的过程。当会话数据跨多个节点复制时，用户的请求发送到哪个节点并不重要，因为它们都具有相同的会话数据。

会话“粘性”由负载均衡器执行，它是负载均衡器的过程，可确保始终将一个会话定向到同一后端 Tomcat 服务器。

例如，负载平衡器将请求定向到 Tomcat 服务器 A，并且该请求会导致创建会话。启用会话粘性后，负载均衡器将向 Tomcat 服务器 A 发送具有相同会话 id 的每个附加请求。其他请求，没有会话或具有不同会话，将继续正常进行负载均衡。

像巧克力和花生酱一样，粘性会话和会话复制经常一起使用，但这不是必需的。只能使用粘性会话执行基本负载平衡，但是如果后端 Tomcat 节点发生故障，用户将丢失会话数据。通过会话复制和粘性会话，用户不会受到后端 Tomcat 节点之一故障的影响。它们将由负载平衡器自动路由到不同的节点，并且该节点将拥有用户会话数据的副本。

# c# - 用于 c# 设置项目的连接 UI.Dialog

> ID：10415502
> 
> 赞同：5
> 
> 时间：2012-05-02T14:11:50.797
> 
> 标签：c#, dialog, connection

![在此处输入图像描述](../Images/693fff69c3ccbc3766e4dda0562d8e7b.png)

我将 Microsoft.Data.ConnectionUI.Dialog.dll 和 Microsoft.Data.ConnectionUI.dll dll 添加到我的项目中，并使用以下代码：

```
 Microsoft.Data.ConnectionUI.DataConnectionDialog dcd = new Microsoft.Data.ConnectionUI.DataConnectionDialog();

        Microsoft.Data.ConnectionUI.DataSource.AddStandardDataSources(dcd);

        if (Microsoft.Data.ConnectionUI.DataConnectionDialog.Show(dcd) == System.Windows.Forms.DialogResult.OK)
        {
            //
        }
        else
        {
            //
        } 
```

当我在普通的 Windows 应用程序中使用它时，一切似乎都很好（显示带有高级按钮的标准 VS 数据连接对话框）。当我在 SETUP PROJECT 中使用它时，它只显示高级对话框并且“确定”按钮被禁用。用户可以测试连接但不能按确定按钮。

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:26:01.793

**根据设置启用/禁用按钮。**

在这篇文章中：[http](http://erikej.blogspot.com.au/2010/04/using-adonet-data-connection-dialog-in.html) ://erikej.blogspot.com.au/2010/04/using-adonet-data-connection-dialog-in.html作者“硬编码”了数据源，从而禁用了“更改”按钮。

设置 DataSource 名称时，应启用 OK 按钮。我挖出 `Data Connection Dialog Source Code`代码给你看：http: [//archive.msdn.microsoft.com/Connection/Release/ProjectReleases.aspx?ReleaseId =3863](http://archive.msdn.microsoft.com/Connection/Release/ProjectReleases.aspx?ReleaseId=3863)

在 Micrsost.Data.ConnectionUI.Dialog 项目中，打开 DataConnectionDialog.cs 类，您可以看到这是事件：

```
private void ConfigureAcceptButton(object sender, EventArgs e)
{
try
{
acceptButton.Enabled = (ConnectionProperties != null) ? ConnectionProperties.IsComplete : false;
}
catch
{
acceptButton.Enabled = true;
}
} 
```

上述事件与 ConnectionProperties 方法挂钩，并在每次触发 PropertyChange 事件时被调用：

```
properties.PropertyChanged += new EventHandler(ConfigureAcceptButton); 
```

要启用 OK 按钮，您需要满足 ConnectionProperties.IsComplete 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:14:37.630

当我从 PowerPoint 插件运行 DataConnectionDialog 时，我遇到了和你一样的问题。

问题是 SqlConnectionUIControl 必须在 STA 线程中运行。这是我开始工作的代码。

单击加载按钮，在线程中启动数据连接器。

```
private void dataSourceSelectionButton_Click(object sender, EventArgs e)
{
  Thread browseThread = new Thread(promptForConnectionString);
  browseThread.TrySetApartmentState(ApartmentState.STA);
  browseThread.Start();  
} 
```

打开对话框。

```
public string ConnectionString { get; set; }

private void promptForDataConnection()
{
  DataConnectionDialog dataConnection = new DataConnectionDialog();
  DataConnectionConfiguration connectionConfiguration = new DataConnectionConfiguration(null);
  connectionConfiguration.LoadConfiguration(dataConnection);

  if (DataConnectionDialog.Show(dataConnection) == DialogResult.OK)
  {
    connectionConfiguration.SaveConfiguration(dataConnection);

    this.ConnectionString = dataConnection.ConnectionString;
  }
} 
```

如果这没有帮助，可能会选择[DataConnectionDialog Source](http://archive.msdn.microsoft.com/Connection/Release/ProjectReleases.aspx?ReleaseId=3863)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T03:04:12.243

我无法通过以管理员身份运行 VS2008 来解决此问题。我通过禁用 Winform 项目中的“启用 Visual Studio 托管进程”选项来解决此问题。

# wpf - 在带有 MVVM 的 WPF 的主视图中并排放置视图？

> ID：10415506
> 
> 赞同：0
> 
> 时间：2012-05-02T14:12:12.797
> 
> 标签：wpf, mvvm, view, datatemplate

我有一个使用 MVVM 构建的 WPF 桌面应用程序，并且在 MainWindow.xaml 中提供了所有视图。问题是视图是按照它们在 Window.Resources 中出现的顺序列出的，每个视图都在屏幕上伸展。我希望 2 个视图并排显示在主窗口中。

澄清一下，有一个包含树形可视化的 tabcontrol 视图，旁边是 2 个扩展器，用于从选项卡内部打开和显示信息。因为应用程序列出了视图，所以扩展器位于选项卡区域下方。我希望他们躺在旁边并弹出（部分遮挡）标签。

这将获得 observableCollection ViewModels (MainWindow.xaml)：

```
<ItemsControl Grid.IsSharedSizeScope="True" ItemsSource="{Binding ViewModels}" 
```

并因此将它们添加到 MainWindow ViewModel 类中：

```
SearchExpanderViewModel viewModel6 = new SearchExpanderViewModel(decisiontreeRepository);
    this.ViewModels.Add(viewModel6); 
```

当我无法将它们放在网格中时，如何在 MainWindow 视图中并排放置 2 个视图？

提前致谢！

**编辑：**截图我不能添加图像或任何东西，因为声誉，链接在这里：http: [//imgur.com/7y1yj](http://imgur.com/7y1yj)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:10:14.510

这是在 mainWindowViewModel 中将“坐标”添加到这些行：

```
ExpandersViewModel expanderStackpanelViewModel = new ExpandersViewModel(2,1,1,1,
decisiontreeRepository);
this.ViewModels.Add(expanderStackpanelViewModel); 
```

并在 xaml 文件中使用网格，并将行和列的 getter 和 setter 添加到特定视图的视图模型中：

```
 public class PathExpanderViewModel : ViewModelBase{  
    public int Row { get; set; }
    public int Col { get; set; }

    public PathExpanderViewModel(int row, int col){
         Row = row;
         Col = col;
    }
} 
```

我希望这可以帮助其他有同样问题的人，尽管我仍然不是 100% 清楚 :)

# jquery - 在转到网站的第一个真实页面之前，使用 jQuery 淡入/淡出启动页面（不是我的想法）

> ID：10415507
> 
> 赞同：3
> 
> 时间：2012-05-02T14:12:23.220
> 
> 标签：jquery, fadeout

我正处于建立网站的最后阵痛中，而客户想要一个启动页面。我的不是质疑为什么，我的目的是获得报酬并飞...

所以，这是我正在寻找的事件序列：

启动页面打开。徽标淡入。使用点击进入。徽标淡出。网站的第一个“真实”页面打开。

我已经完成了前三个事件，第四个。在打开第一个真实页面之前，它会让徽标淡出。

这是我所拥有的：

```
<div class="logo_container link" data="commercials.php">
<img src="images/logo_intro.jpg" alt="intro" />
</div>

<script type="text/javascript">

$(function() {

    $('.logo_container').hide();

    $('.logo_container').fadeIn(1000);

   $(".link").click(function(e) {
        $('.logo_container').fadeOut(1000);
        window.location = $(this).attr("data");
    });
});

</script>

</div> 
```

但我没有得到淡出。它只是跳转到window.location中调用的属性，即commercials.php。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T14:14:03.220

你必须`window.location`像这样在你的回调方法中使用：

```
$(".link").click(function(e) {
        $('.logo_container').fadeOut(1000, function(){
           window.location = $(this).attr("data");
        }); 
}); 
```

否则`window.location`将与淡出事件同时调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:14:32.890

您需要使用回调来查看淡出何时完成。

文档中的示例：

```
$('#clickme').click(function() {
  $('#book').fadeOut('slow', function() {
    // Animation complete.
  });
}); 
```

将动画完整行替换为`window.location = $(this).attr("data");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:16:53.030

开始淡出后立即更新，因此`window.location`您永远没有机会看到它。`.location`通过适合您的框架的方法延迟更改（例如，在 MooTools 中它将是链式的 - 我不知道 jquery），或者只是使用标准将其安排在未来 1000 毫秒后发生`setTimeout()`。

# regex - 如何将 URL 重写从 Apache 转换为 Hiawatha

> ID：10415509
> 
> 赞同：1
> 
> 时间：2012-05-02T14:12:25.477
> 
> 标签：regex, hiawatha

我正在使用[Hiawatha 网络服务器](http://www.hiawatha-webserver.org/)，需要将以下 Apache URL 重写规则转换为[URL 工具包](http://www.hiawatha-webserver.org/howto/url_toolkit)规则。

```
RewriteRule ^symphony\/api(\/(.*\/?))?$ extensions/rest_api/handler.php?url=$1&%{QUERY_STRING} [NC,L] 
```

`%{QUERY_STRING}`不能在 Hiawatha 的 URL 工具包中使用。

我已经尝试了一些东西，但我的正则表达式很差。

这是基本的 Hiawatha URL 重写格式：

```
Match <originalurl> Rewrite <rewrittenurl> 
```

需要重写的示例 URL：

```
http://domain.co.uk/symphony/api/entries/photos/?auth-token=019ccc6e 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:07:51.890

只是猜测，试试

```
Match ^symphony\/api(\/(.*\/?))?\?(.*)$ Rewrite extensions/rest_api/handler.php?url=$1&$2
Match ^symphony\/api(\/(.*\/?))?$ Rewrite extensions/rest_api/handler.php?url=$1 
```

# scala - 使用虚拟类型（抽象类型）实现协方差

> ID：10415510
> 
> 赞同：1
> 
> 时间：2012-05-02T14:12:41.413
> 
> 标签：scala, covariance, abstract-type

为了确保协方差，有三种方法：

1.  纯协方差：使用埃菲尔语言，
2.  模拟协方差：使用强制转换和重载
3.  使用 F 有界多态或虚类型

因此，我正在使用虚拟类型测试解决方案，在以下示例中使用 scala Abstract 类型：

*   我们定义了 3 个抽象类：Graph、Node、Edge
*   Graph 类定义了 2 个方法：attachNode(Node) 和 detachNode(Node)
*   Node 类定义了 2 个方法：attachToGraph(Graph) 和 detachFromGraph()

使用 inheretence 我们将为不同的域创建不同的子类：

*   对于网络 : `class Network extends Graph`, 和`class Host extends Node`, ..
*   对于化学：`class Molecule extends Graph`, 和`class Atom extends Node`,..
*   ...

唯一的限制是通过例如将 Atom 附加到网络来避免创建“嵌合体”。所以模型比较简单：

```
abstract class Graph {
  type CompatibleNode <: Node
  protected var myNodes = new ArrayBuffer[CompatibleNode]()

  def attachNode(node : compatibleNode) = {
      .... 

      // Inform the node about the attachement so it can do update
      node.attachToGraph(this)

      // save the node
      myNodes += node
  }
}

abstract class Node {
  type CompatibleGraph >: scala.Null <: Graph
  protected var myGraph : CompatibleGraph = null

  def attachToGraph(graph : compatibleGraph) = {
      .... 

      // Inform the graph about the attachement so it can do update
      graph.attachNode(this)

      // save the node
      myGraph = graph
  }
} 
```

在创建特殊图表之后，我们只需覆盖虚拟类型：

```
class Network extends Graph { override type CompatibleNode = Host}
class Host extends Node { override type CompatibleGraph = Network}

class Molecule extends Graph { override type CompatibleNode = Atom}
class Atom extends Node { override type CompatibleGraph = Molecule} 
```

这应该工作得很好（它在 NIT 语言中工作）但我有不同的错误：

*   首先，在调用`graph.attachNode(this)`这个时输入不匹配`graph.CompatibleNode`，找到：`Graph`，所以我投了这个：

    graph.attachNode(this.asInstanceOf[graph.CompatibleNode])

请注意，NIT 语言会隐式进行强制转换。

*   其次，在 detachFromGraph() 方法之后：

    类节点{

    ```
    ...

    def detachFromGraph() = {

         ....

         // inform my graph 
         myGraph.detachNode(this.asInstanceOf[myGraph.CompatibleNode])

         ...
     } 
    ```

    }

我得到了错误：`myGraph.compatibleNode : requiered stable identifier`，在搜索和阅读规范后，我发现：->一个稳定的标识符是以标识符结尾的路径->`p.x`是一个路径，如果`p`是一个路径并且`x`是一个稳定的成员->稳定的成员是.. ...或非易失性类型的值定义 -> 易失性类型：类型参数或抽象类型，...。

所以简而言之，我不能在路径中使用抽象类型的对象，为什么？我不知道！

所以如果有人有建议，或者即使可以使用 scala 抽象类型作为虚拟类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T17:35:34.060

这有效（并且也消除了无限循环）。该包只是为了能够说明包私有方法。

```
package foo {
  abstract class Graph {
    type CompatibleNode <: Node
    protected var myNodes = new ArrayBuffer[CompatibleNode]()

    def attachNode(node: CompatibleNode)
                  (implicit ev: this.type <:< node.CompatibleGraph) {

      // Inform the node about the attachement so it can do update
      node.backAttach(ev(this))

      // save the node
      myNodes += node
    }

    private[foo] def backAttach(node: CompatibleNode) { myNodes += node }
  }

  abstract class Node {
    type CompatibleGraph >: scala.Null <: Graph
    protected var myGraph: CompatibleGraph = null

    def attachToGraph(graph: CompatibleGraph)
                     (implicit ev: this.type <:< graph.CompatibleNode) {

      // Inform the graph about the attachement so it can do update
      graph.backAttach(ev(this))

      // save the node
      myGraph = graph
    }

    private[foo] def backAttach(graph: CompatibleGraph) { myGraph = graph }
  }
} 
```

现在：

```
class Network extends foo.Graph { override type CompatibleNode = Host}
class Host extends foo.Node { override type CompatibleGraph = Network}

class Molecule extends foo.Graph { override type CompatibleNode = Atom}
class Atom extends foo.Node { override type CompatibleGraph = Molecule} 
```

并尝试一下：

```
object GraphTest {
  val n = new Network()
  val h = new Host()

  n.attachNode(h)

  val a = new Atom()

  n.attachNode(a) // fails: type mismatch;
  // found : Atom required: GraphTest.n.CompatibleNode (which expands to) Host
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:42:27.783

这是一种解决方法：

```
 def detachFromGraph () {
      detachFromThisGraph (myGraph)
  }

  def detachFromThisGraph (graph : CompatibleGraph) {
      graph.detachNode(this.asInstanceOf[graph.CompatibleNode])
  } 
```

我一点也不知道什么是稳定标识符，或者为什么在这里需要它。

# maven-2 - 存在 activeByDefault 配置文件时未应用 Maven releaseProfiles

> ID：10415513
> 
> 赞同：0
> 
> 时间：2012-05-02T14:12:54.307
> 
> 标签：maven-2, maven-release-plugin

我有（为SO目的而简化）maven配置如下：

*   2 个配置文件 DEV 和 PROD，其中 DEV 为*activeByDefault*，因此如果我只是进行 SNAPSHOT 构建或从命令行构建，我将拥有 DEV 配置。配置文件是互斥的——它们设置了相同的属性集。

> ```
>  <profile>
>      <activation>
>        <activeByDefault>true</activeByDefault>
>       </activation>
>       <id>DEV</id>
>       <properties>
>         <some.property>devSpecific</some.property>
>       </properties>
>     </profile>
> 
>     <profile>
>       <id>PROD</id>
>       <properties>
>         <some.property>prodSpecific</some.property>
>       </properties>
>     </profile> 
> ```

*   现在我将我的发布插件设置为激活 PROD 配置文件，因为每当我发布时，我都想要一个 PROD 版本。

> ```
> <plugin>
>   <artifactId>maven-release-plugin</artifactId>
>   <version>2.2.2</version>
>   <configuration>
>     <releaseProfiles>EU-PROD</releaseProfiles>
>     <goals>deploy assembly:assembly</goals>
>   </configuration>
> </plugin> 
> ```

所以我认为发布插件将在此处激活 PROD 配置文件，因此*activeByDefault*将不适用。

但随着发布，我仍然得到 DEV 包 - DEV 配置文件已激活。我的假设哪里出错了？

谢谢

# c++ - 为什么从 write() 调用 __kernel_vsyscall() 永远不会返回？

> ID：10415514
> 
> 赞同：0
> 
> 时间：2012-05-02T14:12:59.870
> 
> 标签：c++, variadic-functions, cout, hung

我的 C++ 程序挂起，我将它附加到调试器并找到了这个堆栈跟踪，第 0 帧永远不会完成。这里出现问题的可能问题是什么？如果我可以收集更多信息，我仍然可以在调试器中使用它。还有其他线程。

```
#0  0xffffe410 in __kernel_vsyscall ()
#1  0x0083929b in write () from /lib/libc.so.6
#2  0x007d9cd4 in _IO_new_file_write () from /lib/libc.so.6
#3  0x007d9995 in new_do_write () from /lib/libc.so.6
#4  0x007d9c7f in _IO_new_do_write () from /lib/libc.so.6
#5  0x007da56e in _IO_new_file_overflow () from /lib/libc.so.6
#6  0x007d9b6c in _IO_new_file_xsputn () from /lib/libc.so.6
#7  0x007d012f in fwrite () from /lib/libc.so.6
#8  0x009a96f6 in ?? () from /usr/lib/libstdc++.so.6
#9  0x009ac66b in std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) () from /usr/lib/libstdc++.so.6
#10 0x0822aa2c in printErrorMsg (format=0x848675f "#%2i %s: %s(...) %s [%p]\n") at myAssert.cpp:66 
```

第 10 帧源代码为：

```
void
printErrorMsg(const char *format, ...)
{
  va_list ap;
  const int size = 4096;
  char buffer[size];

  va_start(ap, format);

  vsnprintf(buffer, size, format, ap);

  va_end(ap);

  std::clog << buffer;
  std::cout << buffer; // Code is hung here in frame 10.
} 
```

该代码正在尝试打印堆栈跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:54:30.183

问题似乎是在通过 ssh 调用其父进程并且启动它的 ssh 连接已退出的情况下，fork()ed 子进程没有有效的 cout。

解决方法是在召唤过程退出后停止使用 cout。clog 工作正常，因为它会发送到由 fork()ed 子进程设置的日志文件。

# iphone - UITableViewController 不显示工具栏项目？

> ID：10415515
> 
> 赞同：3
> 
> 时间：2012-05-02T14:13:01.070
> 
> 标签：iphone, ios, uitableview, uitoolbar

我一直在谷歌上搜索这个问题。我有一个带有导航栏和底部工具栏的表格视图控制器。我能够显示工具栏

```
self.navigationController.toolbaHidden = NO; 
```

然后我像这样向工具栏添加了一些项目

```
UIButton *button = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain];
button.titleLabel.text = @"Button";
UIBarButtonItem *buttonItem = [[[UIBarButtonItem alloc] initWithCustomView:button] autorelease];
[self setToolbarItems:[NSArray arrayWithObject:buttonItem] animated:NO];
[button release]; 
```

但是它永远不会起作用。我认为这是正确的做法，但不知何故它在工具栏上什么也没显示。有谁知道是什么原因？或者，如果您知道添加工具栏项目的正确方法，请告诉我？非常感谢你们。

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:45:48.000

```
 UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:nil];
     UIBarButtonItem *buttonItem2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemPlay target:self action:nil];
  self.toolbarItems=[NSArray arrayWithObjects:buttonItem,buttonItem2,nil];
    self.navigationController.toolbarHidden = NO; 
```

似乎因为您在未显示的 barbutton 中添加圆形按钮，尝试使用系统提供的 barbutton 添加工具栏它肯定会工作

# javascript - 使用开发人员工具时，IE9 是否启用“某些东西”？

> ID：10415519
> 
> 赞同：7
> 
> 时间：2012-05-02T14:13:20.733
> 
> 标签：javascript, google-maps, internet-explorer, ie-developer-tools

我使用 Google Maps Javascript API V3，最近我的地图上的图标没有出现在 IE9 中。

为了深入了解它，**我打开了 IE 的开发者工具。当我刷新地图时，图标出现了！**但是，*当我关闭 IE 并重新开始时，图标不存在*。再一次，如果我打开开发者工具并刷新，图标就会出现。

我的问题是这个主题的标题，在访问 IE 的开发者工具时启用了什么，它允许我的谷歌地图上的图标出现？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T14:23:28.623

如果您的代码中有任何控制台打印，如果在关闭开发人员工具时加载页面，这些将引发异常（因此会破坏其后的 javascript）。

要解决此问题，请将打印结果包装在 if 语句中：

```
if (console) {
   console.log('...');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:21:54.883

对全局对象的任何引用`console`只有在 IE 开发者工具打开时才有效。如果开发人员工具已关闭，则全局`console`对象未定义。

例如，以下代码仅在开发人员工具打开的情况下才会运行。如果它们被关闭，它们会抛出一个关于控制台未定义的错误：

```
console.log("test"); 
```

# cocoa - 我怎样才能让窗口的内容视图“拥抱”它的子视图

> ID：10415521
> 
> 赞同：2
> 
> 时间：2012-05-02T14:13:23.587
> 
> 标签：cocoa, nsview, nsviewcontroller, autolayout

像[这个问题](https://stackoverflow.com/questions/9034527)一样，我有一个 NSView，它是 NSWindow 的 contentView，它包含几个垂直堆叠的子视图。其中一些是固定大小的，其中一些可以使用展开按钮展开或折叠。

我想实现一种“手风琴”效果，其中展开或折叠其中一个子视图会使其他所有内容调整并相应地调整超级视图和窗口的大小。

看起来确实应该能够通过使用自动布局设置正确的一组约束来实现这一点，我现在可以很好地完成初始布局。但我不知道如何设置约束，以便超级视图自动调整大小以拥抱子视图。

上面链接的问题中的 OP 从来没有得到答案，并提供了他自己的解决方案，就像我开始独立实施的那个一样，但我想我会再次把它扔在那里，以防万一有任何自动布局大师知道一个技巧. 似乎应该有一种方法可以通过利用自动布局让超级视图拥抱子视图，而无需手动计算子视图的大小并手动重置超级视图的大小。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T18:50:47.040

自动布局既酷又全面。和奥术。

我很努力，但无法想出一套可以做我想做的事情的约束。在我看来，如果您在超级视图中垂直堆叠一些 NSView 并设置约束，以便将顶部子视图固定到超级视图的顶部并沿着子视图堆栈向下，您将每个子视图的顶部固定到底部边缘上面的一个，然后最后将最后一个子视图的底部边缘固定到超级视图的底部边缘，然后以编程方式调整一个或多个子视图的大小，它应该能够在超级视图的底部向上拉或向下推到让它拥抱它的子视图。

除了最后一块，一切都按预期工作。当您尝试将底部子视图固定到父视图的底部时，自动布局无法满足所有约束。似乎调整超级视图的大小以满足约束不在算法中。要么，要么我错过了一些其他需要设置的约束。

当我谈到这个主题时，看着调试器，似乎在窗口的 contentView 和窗口框架之间存在不可设置的约束。我有点想知道是否能够弄乱这些约束会让原始方案发挥作用。

无论如何，我确实提出了一个使用自动布局的解决方案，它非常接近我希望自动布局能做的事情，因为所需要的只是子类化 NSView 并将几行代码放入intrinsicSize 方法，然后使用该子类超级视图。

[我创建了一个 xcode 项目，其中包含我的可折叠视图基类和整个github](https://github.com/PlexusLLC/PLXCollapsibleView)上的工作演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T04:58:37.570

我可以确认，在像您这样的情况下，Xcode 自行安装的自动约束可能会破坏布局。例如，如果您的可变垂直视图没有明确的约束，那么 IB 很可能会添加一个自动约束以使布局明确。稍后，当您尝试通过在其上安装另一个约束来更改该视图的大小时，您将收到一个自动布局错误。

一种可能的解决方案（缺少实现`-intrinsicContentSize`和/或其他子类化）是在 IB 中查找所有可能会干扰您的布局的自动约束，并尝试在其位置设置显式的具有较低优先级的约束。但是，这并不总是有效。

另一个残酷的解决方案是删除你的所有约束`-awakeFromNib`，然后只设置你需要的那些。当然，您可以尝试以编程方式仅删除那些阻碍您的约束，但这并不可靠，因为下次您更改 .xib 中的某些内容时，问题可能会在完全不同的地方再次出现。

通常，我必须同时做一些事情才能让一切正常工作。

# c# - WPF 书本式应用程序

> ID：10415523
> 
> 赞同：1
> 
> 时间：2012-05-02T14:13:45.760
> 
> 标签：c#, wpf, xaml, richtextbox, flowdocumentreader

我想开发一个行为像一本书的 WPF 应用程序。将有两个页面，用户将能够对其进行编辑。

我不能使用 FlowDocumentReader，因为它不是用户可编辑的。我还考虑过根据具有焦点的页面（在 FlowDocument 内）使用移动的richtextbox，但是当文本太长（我不想要滚动条）时它没有分页行为，就像 FlowDocumentReader 有.

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:57:28.203

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <RichTextBox Margin="5,42,5,5" Name="richTextBox1" FontSize="{Binding ElementName=slider1, Path=Value}" />
    <RichTextBox Margin="5,42,5,5" Name="richTextBox2" Grid.Column="1" FontSize="{Binding ElementName=slider1, Path=Value}"/>
    <Button Content="NextPage" Grid.Column="1" Height="23" Margin="0,12,4,0" Name="button1" VerticalAlignment="Top" HorizontalAlignment="Right" Width="90" Click="button1_Click" />
    <Button Content="PreviousPage" Height="23" HorizontalAlignment="Left" Margin="5,12,0,0" Name="button2" VerticalAlignment="Top" Width="94" Click="button2_Click" />
    <Slider Height="23" HorizontalAlignment="Left" Margin="204,12,0,0" Name="slider1" VerticalAlignment="Top" Width="100" Grid.ColumnSpan="2" Minimum="8" Maximum="25" Value="12" />
</Grid>
</Window> 
```

代码背后：

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        List<Page> book = new List<Page>();
        int pageNumber = -2;
        public MainWindow()
        {
            InitializeComponent();

            for(int i=1; i<10; i++)
                book.Add(new Page("This is page number "+i+"\n\nContent goes in here."));

            // open the book on first page
            button1_Click(null, null);

        }

        class Page
        {
            public Page(string text)
            {
                this.Text = text;
            }
            public string Text { get; set; }
        }

        public void setTextToPage(ref RichTextBox page, string text)
        {
            // Create a FlowDocument to contain content for the RichTextBox.
            FlowDocument myFlowDoc = new FlowDocument();

            // Add paragraphs to the FlowDocument.
            myFlowDoc.Blocks.Add(new Paragraph(new Run(text)));

            page.Document = myFlowDoc;

        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            if (book.Count < (pageNumber + 4))
            {
                return;
            }

            pageNumber += 2;
            setTextToPage(ref richTextBox1, book[pageNumber].Text);
            setTextToPage(ref richTextBox2, book[pageNumber+1].Text);

        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            if (pageNumber < 2)
                return;

            pageNumber -= 2;
            setTextToPage(ref richTextBox1, book[pageNumber].Text);
            setTextToPage(ref richTextBox2, book[pageNumber + 1].Text);
        }
    }
} 
```

# java - 在 Java 中获取 XML 标记

> ID：10415525
> 
> 赞同：0
> 
> 时间：2012-05-02T14:13:50.993
> 
> 标签：java, xml, web-services, xsd

我有以下 XML 架构（实际上它是 Web 服务的 XSD）：

```
<xs:element name='serviceMethod'>
    <xs:complexType>
        <xs:sequence><xs:element name='valueIWantToKnow'/></xs:sequence>
    </xs:complexType>
</xs:element> 
```

在 Java 中，我确实知道“serviceMethod”，但我想知道嵌套在 servicemethod 元素中的元素的 name 属性的值。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:30:28.957

此链接解释了使用 dom 解析器进行的所有 XML 解析，请看一下，它应该可以解决您的问题。

[http://www.java-samples.com/showtutorial.php?tutorialid=152](http://www.java-samples.com/showtutorial.php?tutorialid=152)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:53:10.177

您可以使用[XPath](http://www.w3schools.com/xpath/)（[java 示例](http://www.roseindia.net/tutorials/xPath/java-xpath.shtml)）

```
//serviceMethod/valueIWantToKnow 
```

# matlab - Matlab：我如何使用 ANFIS（模糊逻辑工具箱）进行预测

> ID：10415529
> 
> 赞同：1
> 
> 时间：2012-05-02T14:14:11.547
> 
> 标签：matlab, fuzzy-logic

Matlab 的新手，我可以看到 ANFIS(http://www.mathworks.com/help/toolbox/fuzzy/fp715dup12.html) 在 Matlab 中是如何工作的。您可以输入人口并对其进行训练和测试。我想知道如何使用 ANFIS 进行预测（将来）。有没有办法根据您的规格/规则构建 ANFIS 模型，或者无论如何我可以让它生成一个方程。换句话说，在你训练和测试之后会发生什么？并对误差幅度感到满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:07:14.857

我的理解是，“测试”阶段就像预测一个被保留的集合（一个未来的、看不见的集合）。因此，要在未来使用 ANFIS 进行预测，您将遵循为测试给出的相同步骤。如果这不能完全满足您的需求，您能否澄清一些有关您的数据和您想要执行的预测任务的信息？

# java - 从 Java 中的两个 long 计算百分比的溢出安全方法

> ID：10415531
> 
> 赞同：14
> 
> 时间：2012-05-02T14:14:16.930
> 
> 标签：java

我有两个非负多头。它们可能很大，接近 Long.MAX_VALUE。我想从这两个数字中计算一个百分比。

通常我会这样做：

```
 long numerator = Long.MAX_VALUE / 3 * 2;
    long denominator = Long.MAX_VALUE;

    int percentage = (int) (numerator * 100 / denominator);
    System.out.println("percentage = " + percentage); 
```

如果分子在 Long.MAX_VALUE 的两个数量级内，则这是不正确的。

什么是正确、简单和快速的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T14:19:24.403

我会使用：

```
int percentage = (int)(numerator * 100.0 / denominator + 0.5); 
```

从该`100.0`点开始强制浮点数学运算，并`+ 0.5`舍入到最接近的整数而不是截断。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T14:18:11.473

```
int percentage = (int) (0.5d + ((double)numerator/(double)denominator) * 100); 
```

如果您将 a`long`与 a相除，`long`您将得到 a `long`，这对百分比不利。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T14:56:48.003

伙计们按照以下方式实现，因为建议使用 BigDecimal 和 BigInteger 进行计算。这是实现：

```
 BigDecimal n = new BigDecimal(Long.MAX_VALUE);
    BigDecimal d = new BigDecimal(Long.MAX_VALUE);
    BigDecimal i = new BigDecimal(100);
    int percentage = n.multiply(i).divide(d).intValue();
    System.out.println(percentage); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T14:19:14.427

`float`最简单的方法是在进行计算之前或之前都进行转换`double`，代价是精度略有下降。与替代品相比，它也很慢。

一种替代方法是将每个值拆分为两个 32 位分量，然后进行长乘和长除。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-02T14:47:32.583

除非我遗漏了一些明显的东西，否则你不能写：

```
public class round {
  public static void main(String[] argv) {
    long numerator = Long.MAX_VALUE / 3 * 2;
    long denominator = Long.MAX_VALUE;

    int percentage = (int) (numerator / (denominator / 100));
    System.out.println("percentage = " + percentage);

  }
} 
```

反而？即在除法之前不要让分子变大，而是让分母变小。由于您知道分母很大，因此除法不会给出 0，这就是通常`(n * 100) / d`在不使用浮点数时编写的原因。

# c# - 映射具有多级 NHibernate 子类的类

> ID：10415534
> 
> 赞同：0
> 
> 时间：2012-05-02T14:14:28.260
> 
> 标签：c#, .net, sql, nhibernate, nhibernate-mapping

我正在尝试使用 NHibernate 映射多个级别的子类，我必须承认我是新手。我正在映射的数据是网络数据包捕获。

基本上，我希望能够在我的数据库中的表上拆分对象的不同继承级别，例如，当我收到 TCP 数据包时，时间戳等非常一般的数据存储在“数据包”表中，并且更具体的数据存储在其各自的表中，例如“IP”表中的IP头和“TCP”表中的TCP头。

我的映射

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="WindowsFormsApplication1.BasePacket, WindowsFormsApplication1" table="Packets" lazy="false">

    <id name="ID" column="ID">
      <generator class="identity" />
    </id>

    <property name="timeStamp" column="timeStamp" type="datetime"></property>

    <joined-subclass table="IP" name="WindowsFormsApplication1.IP, WindowsFormsApplication1" lazy="false">
      <key column="IPID"/>

      <property name="identification" column="identification" type="UInt16"></property>
      <property name="sourceIP" column="sourceIP" type="BinaryBlob" ></property>
      <property name="destinationIP" column="destinationIP" type="BinaryBlob"></property>
      <property name="version" column="version" type="int"></property>
      <property name="IPHeaderLength" column="IPHeaderLength" type="byte"></property>
      <property name="sizeOfDatagram" column="sizeOfDatagram" type="UInt16"></property>
      <property name="reserved" column="reserved" type="bool"></property>
      <property name="dontFragment" column="dontFragment" type="bool"></property>
      <property name="moreFragments" column="moreFragments" type="bool"></property>
      <property name="fragmentOffset" column="fragmentOffset" type="UInt16"></property>
      <property name="timeToLive" column="timeToLive" type="byte"></property>
      <property name="protocol" column="protocol" type="int"></property>
      <property name="headerChecksum" column="headerChecksum" type="UInt16"></property>
      <property name="additionalData" column="additionalData" type="BinaryBlob"></property>

      <joined-subclass table="TCP" name="WindowsFormsApplication1.TCP, WindowsFormsApplication1" lazy="false">
        <key column="TCPID"/>

        <property name="sourcePort" column="sourcePort" type="UInt16"></property>
        <property name="destinationPort" column="destinationPort" type="UInt16"></property>
        <property name="ISN" column="ISN" type="long"></property>
        <property name="ASN" column="ASN" type="long"></property>
        <property name="innerProtocolHeaderLength" column="innerProtocolHeaderLength" type="byte"></property>
        <property name="FIN" column="FIN" type="bool"></property>
        <property name="SYN" column="SYN" type="bool"></property>
        <property name="RST" column="RST" type="bool"></property>
        <property name="PSH" column="PSH" type="bool"></property>
        <property name="ACK" column="ACK" type="bool"></property>
        <property name="URG" column="URG" type="bool"></property>
        <property name="windowSize" column="windowSize" type="UInt16"></property>
        <property name="checksum" column="checksum" type="UInt16"></property>
        <property name="urgentPointer" column="urgentPointer" type="UInt16"></property>
        <property name="options" column="options" type="BinaryBlob"></property>
        <property name="payload" column="payload" type="BinaryBlob"></property>
        <property name="anomalies" column="anomalies" type="string"></property>
      </joined-subclass>

      <joined-subclass table="UDP" name="WindowsFormsApplication1.UDP, WindowsFormsApplication1" lazy="false">
        <key column="UDPID"/>

        <property name="sourcePort" column="sourcePort" type="UInt16"></property>
        <property name="destinationPort" column="destinationPort" type="UInt16"></property>
        <property name="length" column="length" type="UInt16"></property>
        <property name="checksum" column="checksum" type="UInt16"></property>
        <property name="payload" column="payload" type="BinaryBlob"></property>
      </joined-subclass>

      <joined-subclass table="ICMP" name="WindowsFormsApplication1.ICMP, WindowsFormsApplication1" lazy="false">
        <key column="ICMPID"/>

        <property name="type" column="type" type="byte"></property>
        <property name="code" column="code" type="byte"></property>
        <property name="checksum" column="checksum" type="UInt16"></property>
        <property name="additionalDataICMP" column="additionalDataICMP" type="BinaryBlob"></property>
      </joined-subclass>
    </joined-subclass>
  </class>
</hibernate-mapping> 
```

当我尝试使用此映射运行我的程序时，我收到此错误消息，或类似的错误消息，指的是不同的子类。

* NHibernate.dll 中发生了“NHibernate.Exceptions.GenericADOException”类型的未处理异常

附加信息：无法插入：[WindowsFormsApplication1.UDP][SQL: INSERT INTO Packets (timeStamp) VALUES (?);SELECT LAST_INSERT_ID()]*

我确信这只是因为我对 NHibernate 缺乏了解，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:59:27.217

您的身份列 (ID) 是否在数据库中实际定义为自动增量/身份？

您的时间戳是数据库时间戳列吗？如果是你需要 access="readonly" 因为 nhibernate 正在尝试插入它。

此外，您的第一个加入的子类缺少或者它似乎在最后一个 ICMP 表之后的错误位置.. 除非我错过了您的意图并且您希望它们嵌套。

# java - 为什么线程类不是最终的？你为什么要扩展一个线程呢？

> ID：10415541
> 
> 赞同：6
> 
> 时间：2012-05-02T14:14:44.997
> 
> 标签：java, multithreading

我得到了这个作为面试问题。

> 为什么线程类不是最终的？你为什么要扩展一个线程呢？

我想不出现实世界的用例。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T14:17:42.020

来自[Oracle 的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)：

> 有两种方法可以创建一个新的执行线程。一种是将类声明为 Thread 的子类。这个子类应该重写类 Thread 的 run 方法。创建线程的另一种方法是声明一个实现 Runnable 接口的类。

所以答案是“你可能想要子类化`Thread`来覆盖它的`run()`方法”。

引用的段落可以追溯到 JDK 1.1 的 Java 文档中。Java 添加了其他方便的类来管理并发，最值得注意的是评论中提到的执行器，可能会减少或消除扩展的需要`Thread`。然而，他们无法做到这一点`final`，因为这会破坏向后兼容性。

就*实际*原因而言，我认为您今天可能想要扩展`Thread`而不是实现的唯一原因是覆盖它的方法，*而不是*. 例如，您可能想要添加日志记录或额外的清理。`Runnable` *`run()`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:34:01.137

这几乎只是取自 John Vint 的评论，但我认为这是最好的答案。

我唯一能想到*可以*扩展`Thread`而不是实现的地方`Runnable`——或者更好的是，只使用`ExecutorService`带有 a 的`Future`——是当我需要重写`Thread.interrupt()`以进行一些清理时。否则，我看不到任何实际扩展的实际理由`Thread`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T11:14:44.233

让我这样说：在设计一种语言时，它是一种与其他任何工具一样的工具，应该考虑利弊，而不是仅仅限制工具，因为我们无法看到适用的真实用例。通过这样做，我们能够从理论上理解这些决定。基本上，这个练习是反其道而行之。

> 为什么线程应该是最终的？

让我进入正题。

* * *

（*我不包括向后兼容性的论点，就我个人而言，我不喜欢它，因为我认为我们应该始终专注于本地改进*）

为了能够讨论这样的主题，我们需要了解将一个类声明为 final 与否的好处。

## 表现

[这里](https://stackoverflow.com/a/3961939/1550082) **TofuBeer**说：

> 虚拟（覆盖）方法通常是通过某种表（vtable）实现的，该表最终是一个函数指针。每个方法调用都有必须通过该指针的开销。当类被标记为 final 时，所有方法都不能被覆盖，并且不再需要使用表 - 这更快。
> 
> 一些虚拟机（如 HotSpot）可能会更智能地做事，并且知道方法何时/未被覆盖，并酌情生成更快的代码。

## 安全

[这里](http://www.oracle.com/technetwork/java/seccodeguide-139067.html)oracle 亮点：

> 最好在设计 API 时考虑到安全性。尝试在现有 API 中改进安全性更加困难且容易出错。例如，将类设为 final 可防止恶意子类添加终结器、克隆和覆盖随机方法。

不变量和[敏感信息](https://www.securecoding.cert.org/confluence/display/java/OBJ07-J.+Sensitive+classes+must+not+let+themselves+be+copied)也[存在问题](https://www.securecoding.cert.org/confluence/display/java/OBJ00-J.+Limit+extensibility+of+classes+and+methods+with+invariants)。但是，所有安全问题都是项目特定的，不适用于可用于非安全问题场景的工具。

## 方便

andersoj[在这里](https://stackoverflow.com/a/3961937/1550082)提到了这篇不错的 IBM 文章：

> final 类和方法在编程时可能会给您带来很大的不便——它们限制了您重用现有代码和扩展现有类的功能的选择。虽然有时一个类被定为 final 是有充分理由的，例如强制不变性，但使用 final 的好处应该超过不便之处。性能增强几乎总是损害良好的面向对象设计原则的一个不好的理由，当性能增强很小或不存在时，这确实是一个不好的权衡。

因此，从我的角度来看，如果将类设置为 final 没有很大的好处，如果 JVM 能够进行这样的性能优化，我会说方便的论点获胜。

因此，我们可以扩展 Thread 类并用它做任何我们想做的事情，一些初始化/终结的东西，比如日志记录、更改线程名称、线程类型......这取决于你！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T14:18:11.417

两种情况：

1.  创建一种新的`Thread`，也许是在完成后清理一些资源等
2.  覆盖该`run()`方法，而不是向`Runnable`构造函数提供 a （注意：避免这种模式 - 这不是正确的方法）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T14:44:15.310

另一个`Thread`不是最终的原因是，在 Java 的早期，覆盖`run()`被认为是一种很好的设计模式。（我想，在匿名类之前的日子里，人们认为子类比`Thread`创建一个实现 . 的独立类更“整洁” `Runnable`。）

无论如何，一旦 Java 1.0 发布，因为不可能通过更改`Thread`为最终版本来解决问题。那会破坏很多现有的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-23T20:06:42.547

它可能是在派生`Thread`类中保存线程局部变量的字段。`run()`当方法没有被覆盖并且线程`Runnable`像往常一样执行时，这些变量也可以访问。这样的自定义线程可以由标准管理，`ExecutorService`在自定义中创建它们`ThreadFactory`并根据需要丢弃。

我知道还有`ThreadLocal`，但是如果字段需要清理（比如它们是数据库连接），这可以通过调用`super.run()`process`Runnable`并在方法返回之前立即完成`run`（因此线程终止）来完成。*

# fluent-nhibernate - Fluent Nhibernate 一对一映射问题

> ID：10415542
> 
> 赞同：0
> 
> 时间：2012-05-02T14:14:51.030
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我必须表格，表格人物和个人资料。Profile 的 Person 的 PK 为 FK。我也有两门课：

```
public class Person
{
  public int Id
  { 
    get;set;
  }

  public Profile Profile
  { 
    get;set;
  }
}

public class Profile
{
  Public int PersonId
  {
    get;set;
  }

Public string Language
  {
    get;set;
  }
} 
```

我的映射是：

```
public class ProfileMap : ClassMap<Profile>
{

    public ProfileSettingsMap()
    {
        Id(x => x.PersonId).GeneratedBy.Assigned();
        Map(x => x.Language, "LanguageId");
    }
}

public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        HasOne(p => p.ProfileSettings).Cascade.All();
    }
} 
```

现在，当更新现有的 Profile 对象时，它可以正常工作，但是当尝试插入新的 Profile 时，我得到：

无法执行批处理命令。[SQL: SQL 不可用]

PersonId is Profile 对象为0（调试时）

我怎样才能解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:41:40.933

您告诉 NH，您正在自己维护一对一 ( `GeneratedBy.Assigned()`)

要么将其映射为onetoone

```
public class ProfileMap : ClassMap<Profile>
{

    public ProfileMap()
    {
        Id(x => x.PersonId).GeneratedBy.Foreign("Person"); // assuming you have a reference to Person in Profile
        Map(x => x.Language, "LanguageId");
    }
}

public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        HasOne(p => p.ProfileSettings).Cascade.All();
    }
} 
```

或将配置文件映射为 Person 的组件

```
public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        Join("Profiles", join => 
        {
            join.Component(p => p.ProfileSettings, c =>
            {
                c.Map(x => x.LanguageId);
            });
        }
    }
} 
```

更新：控制台应用程序中的此代码适用于 FNH 1.2

```
public class Person
{
    public virtual int Id { get; set; }
    public virtual Profile Profile { get; set; }
}

public class Profile
{
    public virtual int RecordsPerPage { get; set; }
}

public class PersonMap : ClassMap<Person>
{ 
    public PersonMap()
    { 
        Id(x => x.Id).GeneratedBy.Identity();
        Join("Profile", join =>
        {
            join.Component(p => p.Profile, c =>
            {
                c.Map(x => x.RecordsPerPage, "RecordsPerPage");
            });
        });
    }
}

static void Main(string[] args)
{
    var config = Fluently.Configure()
        .Database(SQLiteConfiguration.Standard.InMemory().ShowSql())
        .Mappings(m => m.FluentMappings.Add<PersonMap>())
        .BuildConfiguration();

    using (var sf = config.BuildSessionFactory())
    using (var session = sf.OpenSession())
    {
        new SchemaExport(config).Execute(true, true, false, session.Connection, null);

        using (var tx = session.BeginTransaction())
        {
            session.Save(new Person { Profile = new Profile { RecordsPerPage = 5 } });
            tx.Commit();
        }
    }
} 
```

# c# - C#文化信息/为货币设置一个特定的tostring

> ID：10415545
> 
> 赞同：2
> 
> 时间：2012-05-02T14:15:01.070
> 
> 标签：c#, tostring, cultureinfo

我正在寻找一种客户十进制格式。如果我执行“(3003.3003d).ToString(#,###.00##”)，我现在得到的是“3,003.3003”。我想要获得的格式是“3'003.300,3”。

我可以使用客户方法 math.floor 并自己将其分解，但我很好奇是否有一种方法可以使用文化信息来做我正在寻找的事情。有人知道这样做的方法吗？

用自定义 IFormatprovider 写了这个人作为答案，因为教程非常好，但我不相信当前的文化存在我需要的东西。这是我的最终答案：

```
private string ToCustomDecimal(decimal Input, int MaxLenPostDec, int MinLenPostDec)
    {
        string CustD;
        string[] Split = Input.ToString().Split('.');
        string BigNum = Split[0];
        string SmallNum = "0";
        if (Split.Length > 1)
            SmallNum = Split[1];
        int Spot = 0;
        bool FirstD = false;
        string OutBigNum = "";
        for (int Locc = BigNum.Length - 1; Locc >= 0; Locc--)
        {
            Spot++;
            if (FirstD == false)
            {
                OutBigNum = BigNum.Substring(Locc, 1) + OutBigNum;
                FirstD = true;
            }
            else
                OutBigNum = (Spot % 3 == 1 ? "'" : "") + BigNum.Substring(Locc, 1) + OutBigNum;
        }
        Spot = 0;
        FirstD = false;
        string OutSmallNum = "";
        for (int Locc = 0; Locc < SmallNum.Length; Locc++)
        {
            Spot++;
            if (FirstD == false)
            {
                OutSmallNum += SmallNum.Substring(Locc, 1);
                FirstD = true;
            }
            else
            {
                OutSmallNum += (Spot % 3 == 1 ? "," : "") + SmallNum.Substring(Locc, 1);
            }
            if (Locc >= MaxLenPostDec - 1)
                break;
            if (Locc == SmallNum.Length - 1 && MinLenPostDec > Locc)
            {
                for (int Locc2 = Locc; Locc2 < MinLenPostDec - 1; Locc2++)
                {
                    Spot++;
                    OutSmallNum += (Spot % 3 == 1 ? "," : "") + 0;
                }
            }
        }
        CustD = OutBigNum + "." + OutSmallNum;
        return CustD;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:20:32.980

你应该调查超载`ToString("#,###.00##", myFormatProvider)`

所以你需要一个[自定义的 IFormatprovider](http://www.csharp-examples.net/custom-iformatprovider/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:19:14.033

这似乎可以工作，但我没有测试它。

```
(3003.3003d).ToString(@"#\'###.00#\,##") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:19:54.630

看看使用 IFromatProvider的[Decimal.ToString重载。](http://msdn.microsoft.com/en-us/library/18sthszb.aspx)我猜你要么想用特定的（CultureInfo.CreateSpecificCulture（））或当前的文化（CultureInfo.CurrentCulture）向用户显示货币。

# maven - 用于分叉的 Maven 项目的版本标签是什么？

> ID：10415550
> 
> 赞同：18
> 
> 时间：2012-05-02T14:15:12.683
> 
> 标签：maven, versioning

我经常不得不分叉一个使用 Maven 的 Java 项目（通常在 github 上）。

当我 fork 项目并进行更改时，我通常希望将发布版剪切到我自己的私有（但在 Internet 上）maven 存储库。

因此，我的自定义版本应该是什么版本标签的问题。我不能这样做`SNAPSHOT`，因为我需要它来发布。有时我会在项目后缀`.ADAMGENT`（因为我是个自恋者）。可以说我 fork `1.0.4-SNAPSHOT`。我可能会将其更改为`1.0.4.ADAMGENT`. 我不知道这是否是个好主意。在某些情况下，我什至不能为它加上后缀，`.ADAMGENT`因为 Spring 的 Gradle 构建工具不喜欢这样。因此，对于我所做的 Spring 项目，`.ADAMGENT.RELEASE`或者`.ADAMGENT.M1`如果它是一个里程碑。

**别人做什么？**

**更新：** *虽然我说的是分叉，但我提到了更多的补丁级别更改。另一方面，赏金（由不同的用户）可能是 fork 和/或 patch*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-12-03T14:25:25.993

因为您正在分叉，所以请使用不同的组 ID。

现实情况是，一旦您开始对本地分叉进行更改，它*就是*一个不同的工件。由您的组织制作的工件，而不是您从中获取的工件。

关于版本号，如果您的更改始终是次要的，我会在分叉时使用源树的主要版本号和可能的次要版本号，否则，我会从 1.0.0 重新开始，在项目 POM 中记下我从哪个版本分叉它。

例如：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.adamgent</groupId>
    <artifactId>project-xyz</artifactId> <!-- same artifact ID -->
    <version>1.0.0-RELEASE</version>
    <name>My Project XYZ</name> <!-- different display name -->
    <description>My fork of project XYZ created from v5.42.0 of original sources.</description>
    .... 
```

为依赖项切换组 ID 并不比切换版本 ID 更难。这两种机制都可用于轻松获得所需的发布工件。但是，通过更改组 ID，您可以获得以下优势：

1.  您可以更轻松地在 Nexus 中跟踪您的分叉
2.  您消除了可能因拥有非他们创建的组织的工件而引起的任何混淆
3.  您遵守Maven 版本标识符的[标准准则](http://maven.apache.org/guides/mini/guide-naming-conventions.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T09:39:00.257

我通常会添加一个后缀（例如名称），然后添加一个运行编号，以避免混淆我基于上游版本制作的多个版本。在您的设置中，这可能会转化为如下内容：

```
1.0.4-ADAMGENT-1 
```

`1.0.4-ADAMGENT-2`如果您必须进行另一次更改，则随后会执行此操作。

绝对保留原始项目中的`artifact`和`group`ID 以及您更改所基于的版本，如果您必须找出您一直在处理的版本，这将在以后派上用场。如果您的更改包含在上游，它可以更轻松地切换到正式版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:35:18.803

如果它是一个快照，我建议使用原始修订号（这可能与 git

例如

```
1.0.4-2011-09-12.ADAMGENT 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-05T17:36:58.540

我确实想出了自己的解决方案。我不会将其标记为正确，因为我认为@DavidH 确实有一些有效点，如果 Maven 具有 Ivy 替换 groupid 的配置级别（和/或我在 sonatype 中想出了如何做到这一点）我可能会标记它正确的。否则，我坚信 fork 应该是不同的命名空间，Java 包名称应该与您的项目 groupid 有点内联。同样对于我的情况，我经常需要这样做来修复错误，所以它不是分叉。

这就是我所做的，它基于 maven 如何读取版本号以及 Sonatype 在某种程度上做了什么：

首先，我设置了我自己的公共但非中央存储库，我将在其中发布我的版本。您可以使用 github 和/或 googlecode 来托管这样的 repo。网上有关于如何做到这一点以及如何发布到它的指南，所以我不会深入探讨。

对于版本号，除了 Spring 之外，我遵循这种格式，因为 Spring 的构建系统有我的问题中提到的奇怪要求：

`1.0.4-ADAMGENT-1`

更多更改和发布：

`1.0.4-ADAMGENT-2`

[通过查看代码](http://maven.apache.org/ref/3.1.1/maven-artifact/xref/org/apache/maven/artifact/versioning/DefaultArtifactVersion.html)，您可以看到 Maven 大多会理解这种格式。问题是`ADAMGENT`限定符。Maven 只能正确理解几个限定词[“alpha”、“beta”、“milestone”、“rc”、“snapshot”、“”、“sp”` 和“ga”、“final”、“cr”](http://maven.apache.org/ref/3.1.1/maven-artifact/xref/org/apache/maven/artifact/versioning/ComparableVersion.html#150)。

它不是词汇排序的（`ADAMGENT`在这种情况下）这很好，我想`4`如果这是一个问题，你可以升级增量版本（）。

# security - Web API 中的安全性

> ID：10415551
> 
> 赞同：2
> 
> 时间：2012-05-02T14:15:15.840
> 
> 标签：security, rest, asp.net-web-api

我刚刚使用 apicontroller 创建了我的第一个休息服务。我将它与 Web 表单而不是 mvc-4 一起使用。我如何才能在 Web 服务中实现安全性。请记住，除了浏览器之外的客户端可能会使用服务，如何继续设置安全性。当我们从浏览器对使用表单身份验证的 asp.net 应用程序进行身份验证时，该应用程序返回一个身份验证 cookie，该 cookie 在每个后续请求中由浏览器转发，并且应用程序通过解密 cookie 知道用户已登录。
我正在看一个[关于复数视力的教程](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=aspnetwebapi)关于 web api 的安全性。他们主张我们应该只有一个方法，如果传递 json 数据，就可以登录用户。登录后，该方法将向客户端（浏览器和其他服务客户端）返回身份验证 cookie，客户端应在每个后续请求中发送此 cookie 以授权自己。这种身份验证方案对于 Web 服务是正常的还是有其他推荐的方式？问题更多是关于实施什么而不是如何实施？

**编辑：**我从@AliOstad 对这个[问题的回答中得到的想法](https://stackoverflow.com/questions/10060846/asp-net-web-api-custom-authentication-requirement-for-mobile-client)是我应该为我的服务创建一个单独的登录方法，理想情况下应该在 https 上工作，并且这个方法应该返回一个加密的 auth 标头，包括用户的电子邮件和发布时间。一旦客户端获得了令牌，他就可以通过在 auth 标头中传递这个令牌（到 andriod 应用程序等）继续使用该服务，如果数据服务（而不是应该在 https 上工作的登录服务）是，我认为没有问题在 http 上运行，因为令牌将在 x 分钟后过期。在服务器端它完全没问题但是我的客户怎么知道他的令牌已经过期并且他需要在从数据服务获取数据之前去获取另一个令牌？我的第二个问题是，如果我以这种方式实现它，我将如何处理由 asp.net 应用程序（asp.net 应用程序）对数据服务进行的 ajax 调用。net 应用程序和 web api 在同一个应用程序上运行）。在那里（在 javascript 中），我需要身份验证令牌或用户名和密码来获取身份验证令牌，但它们似乎都不可行？
任何想法我应该如何处理这些情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:41:36.377

Dominick Baier 是该主题的权威，在他的博客中有关于该主题的系列文章。[在此处](http://www.leastprivilege.com/ASPNETWebAPISecurity1IntroducingThinktectureIdentityModelHttp.aspx)查看该系列的第一篇。

我无法真正总结出一个明智的小答案，我认为您需要阅读这些帖子。

* * *

# 更新

> 我的客户怎么知道他的令牌已过期

与表单身份验证不同，当用户拥有过期令牌并重定向到登录屏幕时，Web API 与 HTTP 响应代码进行通信——因为客户端很可能是一台机器而不是人类用户。

所以客户端代理不会知道它是否有过期的令牌，而是当它使用过期的令牌连接您的 API 时，会返回**401**（未授权）响应。此时客户端将尝试获取新令牌。

> 我将如何处理由 asp.net 应用程序对数据服务进行的 ajax 调用

他们不会进行 AJAX 调用，他们会：

*   如果在同一个盒子上，直接调用（创建对象和调用方法）
*   使用 HttpClient 调用服务并使用数据

# html - Ipad 显示标题-图像的标签

> ID：10415553
> 
> 赞同：3
> 
> 时间：2012-05-02T14:15:33.023
> 
> 标签：html, ipad

在台式计算机上，我可以使用图像元素的标题属性作为工具提示。如何在 iPad 上处理这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:33:34.173

我不确定，但您可以在 jquery 工具提示的帮助下查看图像的工具提示。在这里检查。[http://code.drewwilson.com/entry/tiptip-jquery-plugin](http://code.drewwilson.com/entry/tiptip-jquery-plugin)

您将不得不解决该问题以获得图像上的视图。该插件用于获取链接的工具提示视图。这在 ipad 上也适用于链接。试试这个，可能对你有帮助。

# c# - C# System.IO.Directory.CreateDirectory - 创建带有 utf-8 字符的目录？

> ID：10415558
> 
> 赞同：4
> 
> 时间：2012-05-02T14:15:55.780
> 
> 标签：c#, utf-8

我从 utf-8 编码文件中读取数据。然后将该文件的部分内容用作新创建的文件夹的名称。但是，我的文件夹名称是：

bohou�_120328 而不是 bohouš_120328

如何为新创建的文件夹的名称设置正确的编码？谢谢。

**编辑：**

我正在以这种方式从文件中读取信息：

```
System.IO.StreamReader file = new System.IO.StreamReader(nameOfFile);

 while ((j = file.ReadLine()) != null) { 
    //manipulating string in j
 } 
```

然后创建目录

```
if (Directory.Exists(folder) == false) {
                                    Console.WriteLine("creating directory " + folder);
                                    System.IO.Directory.CreateDirectory(@folder);
                                } 
```

如果我在我的 Windows 7 64 位计算机上运行我的应用程序，一切都很好。但是，如果我在其他具有旧系统（如 WinXP）的计算机上运行，​​编码就是错误的，看起来像这样

```
bohou�_120328 
```

在使用变量创建文件夹之前，我将 i 写入输出，但一切都很好。甚至文件夹名称也可以。但不幸的是，就在我的电脑上。

**编辑2**：

事情变得更加奇怪了。我使用了这段代码[如何从 .NET 中的字符串中删除变音符号（重音符号）？](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)删除变音符号，因为没有变音符号的名字对我来说很好。

然而，再次：

1.  在我的计算机上运行代码会生成 bohous_120328
2.  在其他计算机上运行代码和我的闪存盘生成 bohou�_120328

我发誓它是相同的代码，因为我复制了我的 .exe 文件。

调试器说在创建文件夹之前问题已经存在于我的字符串变量中。我不明白，在这种情况下，环境如何影响我的变量。

会很高兴解释:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:32:33.623

在 Windows 上，您不指定文件或目录名称的编码。在 NTFS 上，它们总是使用本质上是 UTF-16 的编码。只要您正确读取字符串， CreateDirectory 就会做您想做的事情。我怀疑您要么没有将 UTF-8 文件读取为 UTF-8，要么您的文件实际上不是 UTF-8。在使用它调用 CreateDirectory 之前，在调试器中查看字符串值是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T15:32:00.550

我认为你读错了文件。您应该先检查阅读的文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:10:19.593

a 的默认编码`StreamReader`是 UTF-8。如果您的文件不是 UTF-8 编码的，您将永远无法确保在操作系统的本地化版本上获得正确的字符。

我是说 ：

*   **文件内容为 UTF-8 &`new StreamReader(path)`** : 编码匹配 : 没问题

*   **文件内容为 UTF-8 &`new StreamReader(path, Encoding.Default)`** : 部分匹配，只有当前操作系统代码页对应的字符会被正确解码

*   **文件内容为[ANSI](http://en.wikipedia.org/wiki/Windows_ANSI_code_page)（Windows 上的默认值）&`new StreamReader(path)`**：编码不匹配，AFAIK 仅解码[ASCII](http://en.wikipedia.org/wiki/Ascii)字符

*   **文件内容为 ANSI &`new StreamReader(path, Encoding.Default)`** : 部分匹配，只有当前操作系统代码页对应的字符才会被正确解码

检查您的文件编码和操作系统默认代码页可能会帮助您找到问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T15:30:15.337

StreamReader[尝试检测](http://msdn.microsoft.com/en-us/library/ms143456.aspx)编码，默认不使用 UTF8。

我建议在构造函数中提供 Encoding.UTF8 。
如果这没有帮助，我的猜测是您的文件内容不是真正的 UTF8，并且您依赖于计算机的区域设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T16:54:23.627

我怀疑这与您的代码如何读取文本或如何将其作为目录名称写出无关。我敢打赌，这是您在其中创建目录的操作系统或分区类型的限制。我的猜测是操作系统/分区无法处理带有变音符号的字符，或者它被正确写入只是为了*显示*不正确。

本文提供了一些有关如何扩展文件系统以允许使用变音符号的信息（无论如何，对于 NTFS）：

[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/fsutil_behavior.mspx](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/fsutil_behavior.mspx)

其他分区类型可能有类似的信息（您仍然没有回答 Sixlettervariables 的评论，询问您正在使用什么分区类型）。

# c# - 如何通过 [WebMethod] 返回数据表

> ID：10415563
> 
> 赞同：6
> 
> 时间：2012-05-02T14:16:10.270
> 
> 标签：c#, web-services, datatable

我有一个 Web 服务，它应该返回我收件箱中的前 5 封电子邮件，并将它们显示在数据网格中。我把我的数据`DataTable`放在第一位。但不断收到错误

这是我的代码，我是否遗漏了任何内容或声明了错误？

```
[WebMethod]
    public DataTable DisplayMailList(String inMailServer, String inPort, bool inSSlCheck, String inUsername, String inPassword)
    {   
        objClient.Connect(inMailServer, int.Parse(inPort), inSSlCheck);
        objClient.Authenticate(inUsername, inPassword);

        int count = objClient.GetMessageCount();

        DataTable dtMessages = new DataTable(); // Creating datatable.
        dtMessages.Columns.Add("MessageNumber");
        dtMessages.Columns.Add("From");
        dtMessages.Columns.Add("Subject");
        dtMessages.Columns.Add("DateSent");
        dtMessages.TableName = "dtMessages";

        int counter = 0;
        for (int i = count; i >= 1; i--)
        {
            OpenPop.Mime.Message msg = objClient.GetMessage(i);

            dtMessages.Rows.Add();
            dtMessages.Rows[dtMessages.Rows.Count - 1]["MessageNumber"] = i; //Populateing Datatable
            dtMessages.Rows[dtMessages.Rows.Count - 1]["Subject"] = msg.Headers.Subject;
            dtMessages.Rows[dtMessages.Rows.Count - 1]["DateSent"] = msg.Headers.DateSent;

            counter++;
            if (counter > 5)
            {
                break;
            }
        }
        return dtMessages;
    } 
```

认为问题是公共**DataTable**我将它声明为一个对象，但它不起作用……叹息，我应该将它声明为什么？
这是错误....

> System.InvalidOperationException：生成 XML 文档时出错。---> System.InvalidOperationException：无法序列化 DataTable。未设置数据表名称。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T14:35:27.067

`dtMessages.DataTable`正如错误消息所示，为 name分配一个值将停止序列化错误。

```
 [WebMethod]
    public DataTable GetDataTable()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Col1", typeof(string));
        dt.Rows.Add("testing");
        dt.TableName = "Blah";  // <---
        return dt;
    } 
```

但我同意 Bob Horn 的观点，即最好为返回值定义一个类，而不是使用 DataTable。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-21T06:59:02.437

创建数据表对象时只需给出表名

```
DataTable dt = new DataTable("tablename"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T10:35:56.527

这对我有用：

在您的应用程序中

```
 public void app()
      {
        try
        {
            DataTable dtInput = new DataTable();
            DataRow drRow;
            dtInput.Columns.Add("ID");
            dtInput.Columns.Add("Name");
            drRow = dtInput.NewRow();
            drRow["ID"] = 1;
            drRow["Name"] = "Star";
            dtInput.Rows.Add(drRow);
            dtInput.TableName = "Input";//Table name is mandatory to avoid serialization exception 
            DataTable dtOutput = new DataTable();
            dtOutput.TableName = "Output";//Table name is mandatory to avoid serialization exception 
            service.TestService(dtInput ,ref dtOutput);
        }
        catch (Exception ex)
        {
        }
      } 
```

为您服务

```
 DataTable dtOutput= new DataTable();
      [WebMethod]
      public void TestService(DataTable dtInput , ref DataTable dtOutput)
      {
        DataRow drRow;
        drRow= dtInput.NewRow();
        drRow["ID"] = 2;
        drRow["Name"] = "Success";
        dtInput.Rows.Add(drRow);
        dtOutput= dtInput;
       } 
```

# git - 如何将多个提交还原为单个提交的一部分

> ID：10415565
> 
> 赞同：73
> 
> 时间：2012-05-02T14:16:17.900
> 
> 标签：git, revert

这不是一个大问题，只是我想知道是否可能。

假设我们有两个提交，`abcd123`和`wxyz789`，它们发生在不相邻的不同位置，远在回购的历史上。现在假设我们要还原它们。正在做

```
git revert abcd123 wxyz789 
```

将导致两个单独`abcd123`的提交，一个 reverting 和另一个 reverting `wxyz789`。

这一切都很好，但是如果我们要在两个提交中修复的错误在逻辑上是相关联的，并且出于自我文档的目的，我们希望进行一个包含一个“*我现在破坏了一些东西”的单个提交我正在恢复文件 x、y 和 z* " 评论？是否有执行此操作的 git 命令？

（我当然知道可以创建一个提交，我只需手动修复所有更改然后推送。由于所有明显的原因，这很痛苦。）

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-02T14:25:07.403

你可以做：

```
git revert abcd123
git revert --no-commit wxyz789
git commit --amend 
```

...然后编写适当的提交消息，描述恢复两个提交的综合效果。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-10-23T08:47:12.900

在复杂的还原的情况下，它们会相互改变，这`revert --no-commit`可能是有问题的。

我的简单解决方案是做真正的还原，还有壁球：

```
git revert <all commits>
git rebase -i 
```

然后将除第一个之外的所有还原标记为`squash`，以创建单个提交。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-12-08T02:08:20.920

```
git revert -n <commits>
git commit 
```

第一个命令将执行所有还原而不创建任何提交并暂存最终结果（-n 选项）。之后，commit 命令创建一个提交。

# asp.net-mvc - 在 MVC3 中使用 IOC 容器，会话之间是否共享对象？

> ID：10415567
> 
> 赞同：0
> 
> 时间：2012-05-02T14:16:20.550
> 
> 标签：asp.net-mvc, asp.net-mvc-3, session, ioc-container

我已经阅读了几篇解释在 MVC Web 应用程序中使用静态类的文章。从这些文章中，我创建了一个小示例来证明静态变量确实在用户会话之间共享。

我使用 2 个不同的浏览器、Windows 身份验证和 2 个不同的用户帐户登录到我的站点。如果变量为空，则在用户登录时设置特定变量。在第一个用户登录变量 = 1 之后。当我在用户 2 开始他的会话时访问它时，我可以清楚地看到它仍然 = 1，正如预期的那样。到目前为止，它工作正常。

真正的问题是：我们正在为 IOC 使用一个名为 MemoryContainer 的类。由于这个 Memorycontainer 类的一部分是静态的，在这个容器中注册的类是否也在 mvc 中的用户会话之间共享？

完整代码：

```
public class MemoryContainer
{
    #region Singleton
    private static volatile MemoryContainer instance;
    private static object syncRoot = new Object();

    private MemoryContainer()
    {}

    private void Initialize()
    {
        myContainer = new Dictionary<Type, object>();
    }

    public static MemoryContainer Instance
    {
        get
        {
            if (instance == null)
            {
                lock (syncRoot)
                {
                    if (instance == null)
                    {
                        instance = new MemoryContainer();
                        instance.Initialize();
                    }
                }
            }

            return instance;
        }
    }
    #endregion

    Dictionary<Type, object> myContainer = null;

    private Dictionary<Type, object> Container
    {
        get { return this.myContainer; }            
    }

    public void RegisterInstance(Type type, object instance)
    {
        if (!myContainer.ContainsKey(type))
            myContainer.Add(type, instance);

    }

    public void UpdateInstance(Type type, object newInstance)
    {
        if (this.myContainer.ContainsKey(type))
            myContainer[type] = newInstance;
    }

    public T Resolve<T>(Type t) where T : class
    {            
        T item =  (T) myContainer[t];
        myContainer.Remove(t);
        return item;
    }

    public T TryResolve<T>(Type t) where T : class
    {
        if (this.myContainer.ContainsKey(t))
            return (T) Resolve<T>(t);
        return null;
    }

    public T Peek<T>(Type t) where T : class
    { 
        if (this.myContainer.ContainsKey(t))
            return (T) myContainer[t];
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:19:05.323

由于您使用的是单例模式，因此只会`MemoryContainer`创建该类的一个实例。这意味着每当您*触摸*该`Instance`属性时，您总是指向内存中的同一位置。因此，多个用户将共享相同的数据。

还应注意，由于此类使用 a`Dictionary<TKey, TValue>`用于内部存储，因此此类不是线程安全的，不应在 ASP.NET 应用程序等多线程环境中使用，除非您正确同步对该资源的访问或使用线程安全的数据结构（例如一个[`ConcurrentDictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)例子）。所以这个自定义构建的 IoC 容器很好，但不应该在多线程应用程序中使用，除非它是线程安全的。

# haskell - Haskell 格式化问题

> ID：10415570
> 
> 赞同：1
> 
> 时间：2012-05-02T14:16:22.157
> 
> 标签：haskell

```
main :: IO ()
main = do 
    contents <- readFile "text.txt"
    let database = (read contents :: [Film])
    putStr "Please enter your username: "
    userName <- getLine
    menu database        
    where menu newDb = do putStrLn "\nPlease select an option:"
                          putStrLn "1: Display all films currently in the database"
                          putStrLn "2: Add a new film to the database"
                          putStrLn "3: Search for films by director"
                          putStrLn "5: Exit"
                          putStr "\nSelected option: "
                          option <- getLine
                          case option of 
                                        "1" -> putStrLn(formatDatabase newDb)
                                        "2" -> do putStr "Name of film: "
                                               title <- getLine
                                               putStr "Name of director: "
                                               director <- getLine
                                               putStr "Year of release: "
                                               year <- getLine
                                               putStrLn(formatDatabase $ addFilm title director (read year) [] newDb)
                                        "3" -> do putStr "Name of director: "
                                               director <- getLine
                                               putStrLn $ formattedByDirector director
                          menu newDb 
```

返回错误：

```
Parse error in pattern: putStr

On the line: "2" -> do putStr "Name of film: " 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:17:48.897

您必须将块中的所有行缩进到 .*之后*的`do`第一个标记的级别。这同样适用于案例 3。*`do`*

 *```
case option of 
  "1" -> putStrLn(formatDatabase newDb)
  "2" -> do putStr "Name of film: "
            title <- getLine
            putStr "Name of director: "
            director <- getLine
            putStr "Year of release: "
            year <- getLine
            putStrLn(formatDatabase $ addFilm title director (read year) [] newDb)
  "3" -> do putStr "Name of director: "
            director <- getLine
            putStrLn $ formattedByDirector director 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:24:10.797

请不要以许多教科书中的方式缩进您的代码。它在纸上看起来不错，但实际使用起来很糟糕。

这是一个更理智的风格指南：[https ://github.com/tibbe/haskell-style-guide](https://github.com/tibbe/haskell-style-guide)*

# excel - 复制和粘贴值 - 带颜色

> ID：10415575
> 
> 赞同：0
> 
> 时间：2012-05-02T14:16:47.163
> 
> 标签：excel, excel-2007, vba

我正在为工作簿中的各种工作表开发导出宏。话虽如此，我需要使用带有导出宏的工作表来导出指定范围（命名范围）的值以及它们从条件格式中保存的颜色格式。

我不需要的一件事是复制创建着色的条件格式。我只想要范围内各个单元格的结果颜色。

我已经这样做了，代码如下，但是当我打开汇总文件时，所有有问题的单元格都有与之关联的条件格式模式，这会导致着色问题。

```
ws.range("rngAreaMetricDetail").Copy   'Area Mgr Store Metrics
newws.range("V3").PasteSpecial xlPasteValues    'Paste Values
newws.range("V3").PasteSpecial xlPasteFormats  'Paste Coloring
newws.Names.Add "rngAreaMetricDetail", Selection   'Create Named-Range from Selection 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:40:18.977

Excel 没有简单的方法将条件格式转换为条件格式的结果。您必须手动完成所有操作：

*   检查是否在每个单元格上使用了 FormatCondition。
*   从 FormatCondition 手动分配格式。( `Borders`, `Font`, `Interior`, & `NumberFormat`)
*   如果您有多个 FormatCondition，则后面的格式会覆盖前面的格式，除非`StopIfTrue`已设置。

如果您安装了 Microsoft Word，您可以将您的范围复制到 Word，然后再复制回 Excel，让 Word 负责转换格式。

```
Sub CopyConditionalFormattingThruWord(sAddress As String)
   Dim appWord As Word.Application, doc As Word.Document
   Dim wbkTo As Workbook

   ' copy from original table
   ThisWorkbook.Activate
   ThisWorkbook.Names!rngAreaMetricDetail.RefersToRange.Copy

   ' paste into word application and recopy
   Set appWord = New Word.Application
   With appWord
      .Documents.Add DocumentType:=wdNewBlankDocument
'      .Visible = True
      .Selection.PasteExcelTable LinkedToExcel:=False, WordFormatting:=False, RTF:=False
      .Selection.HomeKey Unit:=wdStory, Extend:=wdExtend
      DoEvents
      .Selection.Copy
   End With

   ' copy to new workbook
   Set wbkTo = Excel.Application.Workbooks.Add
   wbkTo.Worksheets(1).Range(sAddress).Select
   wbkTo.ActiveSheet.Paste
   DoEvents

   ' close Word
   appWord.Quit SaveChanges:=False

   MsgBox "Done."

End Sub 
```

**注意：**这不会 100% 正确地复制格式，但对于大多数情况来说，它可能已经足够好了。在下面的示例中，我将 3 种条件格式应用于左侧表格中的第 1-9 行。右边的表格是运行的结果 `CopyConditionalFormattingThruWord sAddress:="B3"`。

![运行上述代码的示例](../Images/aaa8e6a11c833b46ae4812dff58f86e3.png)

**Excel 2010：** 如果您使用的是 Excel 2010，并且不想使用 Word，则可以使用范围的新`DisplayFormat`成员跳过 FormatCondition 测试。从帮助文件：

> 更改范围的条件格式或表格样式等操作可能会导致当前用户界面中显示的内容与 Range 对象的相应属性中的值不一致。使用 DisplayFormat 对象的属性返回在当前用户界面中显示的值。

您仍然必须手动分配其`Borders`, `Font`, `Interior`, &`NumberFormat`等中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:33:08.937

这是你正在尝试的吗？

我假设您只检查一个条件。我没有做任何错误处理。希望你也能照顾好它。

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet, newws As Worksheet

    Set ws = Sheets("Sheet1")
    Set newws = Sheets("Sheet2")

    '~~> Area Mgr Store Metrics
    ws.Range("rngAreaMetricDetail").Copy

    newws.Activate

    '~~> Paste Values
    Range("V3").PasteSpecial xlPasteValues

    Selection.Interior.ColorIndex = GetColor(Range("rngAreaMetricDetail"))
End Sub

Public Function GetColor(rng As Range)
    Dim oFC As FormatCondition

    Set rng = rng(1, 1)
    If rng.FormatConditions.Count > 0 Then
        For Each oFC In rng.FormatConditions
            GetColor = oFC.Interior.ColorIndex
            Exit For
        Next oFC
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T02:20:47.270

试试这个代码......我有时使用的旧代码。我不得不做一些事情来让它对你有好处。

```
Sub move()
Dim lrow As Long
Dim lrow2 As Long
Dim rng As Range

Sheets(3).Cells.Clear

With Sheets(1)
    lrow = .Cells(Rows.Count, 1).End(xlUp).Row
    Set rng = Range(.Cells(2, 1), .Cells(lrow, 9))
    rng.Copy Sheets(3).Cells(Rows.Count, 1).End(xlUp).Offset(1, 0)
End With

With Sheets(3)
    lrow = .Cells(Rows.Count, 1).End(xlUp).Row
    Set rng = Range(.Cells(2, 1), .Cells(lrow, 9))
    rng.Interior.Color = vbYellow
End With

With Sheets(2)
    lrow = .Cells(Rows.Count, 1).End(xlUp).Row
    Set rng = Range(.Cells(2, 1), .Cells(lrow, 9))
    rng.Copy Sheets(3).Cells(Rows.Count, 1).End(xlUp).Offset(1, 0)
End With

With Sheets(3)
    lrow2 = .Cells(Rows.Count, 1).End(xlUp).Row
    Set rng = Range(.Cells(lrow2 - (lrow - 2), 1), .Cells(lrow2, 9))
    rng.Interior.Color = vbRed
End With

End Sub 
```

# asp.net-mvc - MVC EDMX Codebehind 使用 ObjectContext 与 DBContext

> ID：10415576
> 
> 赞同：4
> 
> 时间：2012-05-02T14:16:48.310
> 
> 标签：asp.net-mvc, entity-framework

我是 EF 的新手。我的模型有一个单独的项目。我安装了 EF 4.3.1.0。我看到 Context 的基类是 ObjectContext 而不是 DbContext。当我在前端项目中搭建我的控制器时，这成为一个问题，在编辑操作中它调用

```
context.Entry(status).State = EntityState.Modified; 
```

但条目未知。我发现Entry 是新的DbContext。

如何让生成的代码生成正确的东西？

这是一个 DB First 项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:08:33.403

您必须将[EF 4.x DbContext Generator](http://visualstudiogallery.msdn.microsoft.com/7812b04c-db36-4817-8a84-e73c452410a2)应用到 Visual Studio 中的 EDMX 模型。您可以从 Visual Studio 扩展管理器安装生成器模板。

安装模板后，请按照本文第 4 点中的步骤操作：

[http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-model-amp-database-first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-model-amp-database-first-walkthrough.aspx)

（用安装的“EF 4.x DbContext Generator”替换帖子中的“ADO.NET DbContext Generator”，这是 EF 4.3.1 的最新和重命名版本）

该模板将生成 POCO 类和一个派生`DbContext`自您的 EDMX 模型的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:48:43.803

查看这篇文章“[使用 DbContext 查询模型优先/数据库优先 EDMX 模型](http://alexandrebrisebois.wordpress.com/2012/10/14/using-dbcontext-to-query-model-firstdatabase-first-edmx-models/)”，这将允许您继续使用现有代码而无需进行任何更改。

# google-app-engine - 带有 get_serving_url 的谷歌云存储

> ID：10415583
> 
> 赞同：17
> 
> 时间：2012-05-02T14:17:06.370
> 
> 标签：google-app-engine, google-cloud-storage

我想使用 Images API 在 Google Cloud Storage 上提供图像文件`get_serving_url`。可以`get_serving_url`接受 Google Cloud Storage 上的文件吗？

我试过了：

```
from google.appengine.api import blobstore
from google.appengine.api import images
bkey = blobstore.create_gs_key('/gs/bucket/object')
url = images.get_serving_url(bkey) 
```

`InvalidBlobKeyError`生产环境发生错误`get_serving_url`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T17:26:06.733

每个人都会喜欢的，从 1.7.0 版本开始就可以了！

您可以将`get_serving_url()`用于 Google Cloud Storage 存储分区。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T19:30:47.557

从 GAE 1.6.5 开始， images.Image 类构造函数可以将 GCS 文件名作为参数，例如

```
 img = images.Image(filename='/gs/bucket/object') 
```

然后，您可以对该对象执行转换并提供服务等。

# vb.net - 用另一个覆盖一个组框并使用可见属性显示一个

> ID：10415589
> 
> 赞同：1
> 
> 时间：2012-05-02T14:17:16.343
> 
> 标签：vb.net, winforms

赢表格。VB.NET VS 2010 专业版。所以我正在构建一个表单，它的一侧有 3 个单选按钮......然后在左侧我有 2 个名为 Group1 和 Group2 的组框，用于我放置在设计器中的这个问题，以便一个覆盖另一个一个并将两个组框的可见属性都设置为false。当用户单击第二个单选框时 group1.visible 更改为 true 并且 group2.Visible 更改为 false ..当用户单击第三个单选框 group1.visible 更改为 false 和 group2.visible 更改为 true。如果用户单击第一个单选按钮 group1 和 group2 可见更改为false...现在问题...这根本不起作用..只有一个组框显示...如果我打开设计器并且仅改变哪个在底部然后它会显示而不是另一个..

```
Private Sub SP_Radio_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SP_Radio.GotFocus
    SP_Radio.Checked = True
    OP_Radio.Checked = False
    AP_Radio.Checked = False
    If SP_Radio.Checked = True Then
        unitType = 0
        ApartmentGroup.Visible = False
        OfficeGroup.Visible = False
        Call _setLabelColors(False)
    End If
    p_saveChangesButton.Focus()
End Sub

Private Sub OP_Radio_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OP_Radio.GotFocus
    OP_Radio.Checked = True
    AP_Radio.Checked = False
    SP_Radio.Checked = False
    If OP_Radio.Checked = True Then
        unitType = 1
        ApartmentGroup.Visible = False
        OfficeGroup.Visible = True
        Call _setLabelColors(True)

    End If
    p_saveChangesButton.Focus()
End Sub

Private Sub AP_Radio_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles AP_Radio.GotFocus
    AP_Radio.Checked = True
    OP_Radio.Checked = False
    SP_Radio.Checked = False
    If AP_Radio.Checked = True Then
        unitType = 2
        OfficeGroup.Visible = False
        ApartmentGroup.Visible = True
        Call _setLabelColors(True)
    End If
    p_saveChangesButton.Focus()
End Sub 
```

有任何想法吗？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:53:16.340

> **您不能将一个组框放在另一个组框上。如果这样做，这个重叠的组框将成为下面的组框的孩子。您可以使用 Panel 控件来实现这一点。**

将您的单选按钮放在组框中，然后将两个组框分开放置（不应相互重叠）。现在使用以下代码，它可以工作。

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
        {
            if (radioButton1.Checked)
            {
                groupBox1.Visible = false;
                groupBox2.Visible = false;
            }
        }

        private void radioButton2_CheckedChanged(object sender, EventArgs e)
        {
            if (radioButton2.Checked)
            {
                groupBox1.Visible = true;
                groupBox2.Visible = false;
            }
        }

        private void radioButton3_CheckedChanged(object sender, EventArgs e)
        {
            if (radioButton3.Checked)
            {
                groupBox1.Visible = false;
                groupBox2.Visible = true;
            }
        } 
```

现在变化不大，将两个面板控件相互重叠并检查：

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
        {
            if (radioButton1.Checked)
            {
                panel1.Visible = false;
                panel2.Visible = false;
            }
        }

        private void radioButton2_CheckedChanged(object sender, EventArgs e)
        {
            if (radioButton2.Checked)
            {
                panel1.Visible = true;
                panel2.Visible = false;
            }
        }

        private void radioButton3_CheckedChanged(object sender, EventArgs e)
        {
            if (radioButton3.Checked)
            {
                panel1.Visible = false;
                panel2.Visible = true;
            }
        } 
```

现在它将按您的意愿工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:29:35.197

您在触发相应单选按钮上的 CheckedChanged 事件的 checkedChanged 事件中设置了 checked 属性。这将根据上次触发的 CheckedChanged 事件更改当前可见的左侧 GroupBox。

一个简单的方法是在更改选中的属性之前禁用所有事件处理程序，并在完成后重新启用它们

```
Try
    RemoveHandler AP_Radio.CheckedChanged, AddressOf AP_Radio_CheckedChanged
    RemoveHandler OP_Radio.CheckedChanged, AddressOf OP_Radio_CheckedChanged
    RemoveHandler SP_Radio.CheckedChanged, AddressOf SP_Radio_CheckedChanged

    ' do your work

Finally
    AddHandler AP_Radio.CheckedChanged, AddressOf AP_Radio_CheckedChanged
    AddHandler OP_Radio.CheckedChanged, AddressOf OP_Radio_CheckedChanged
    AddHandler SP_Radio.CheckedChanged, AddressOf SP_Radio_CheckedChanged
End Try 
```

为了安全起见，将所有内容封装在 Try/Finally 块中。
这样，事件处理程序将在出现异常时重新启用。

# extjs4 - Sencha Architect 2：onLaunch 从未调用过

> ID：10415591
> 
> 赞同：0
> 
> 时间：2012-05-02T14:17:25.840
> 
> 标签：extjs4, sencha-architect

我有一个由 Sencha Architect 2 创建的小应用程序。我已经多次注意到我可以很好地覆盖 Controller 和 Application 对象的 onLaunch，该函数永远不会被调用。我正在使用试用版 2.0.0，构建 412。这是应用程序代码：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    views: [
        'MyContainer',
        'MyGridPanel'
    ],
    autoCreateViewport: true,
    name: 'MyApp',

    onLaunch: function() {
        var container = Ext.getCmp ('glbContainer');

        var cfg = [
        { dataIndex: 'ID', text: 'ID' },
        { dataIndex: 'DISPLAYNAME', text: 'Displayname' }
        ];

        var theGridPanel = this.getComponent ('theGridPanel');

        var config = [];

        for (var jj=0; jj<cfg.length; jj++) {
            var configElem = {};
            configElem.xtype = 'gridcolumn';
            configElem.dataIndex = cfg [jj].dataIndex;
            configElem.text = cfg [jj].text;
            configElem.width = 200;
            config.push (configElem);
        }

        alert (config.length);

        theGridPanel.reconfigure (config);

    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:45:22.553

我认为我们没有`onLaunch`方法可以覆盖。应该是`launch`。看看文档。Application 或 Controller 类没有 onLaunch 属性。引用文档：

> 启动方法：在应用程序自己的启动函数被调用后立即由控制器的应用程序调用。这通常是运行应用 UI 初始化后必须运行的任何逻辑的好地方。另请参见 init，它在应用程序的启动函数之前调用。

例子：

```
Ext.application({
    name: 'MyApp',
    launch: function() {
        Ext.create('Ext.container.Viewport', {
            items: {
                html: 'My App'
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:50:05.760

Launch 是在这里使用的正确方法。

虽然 Application 是一个 Ext.app.Controller 它并不总是完全像控制器一样。另请注意，您没有在这里使用 Ext.define 来定义您的应用程序，您不应该这样做。但是，您正在调用方法 Ext.application({ config });

设置应用程序启动方法的正确方法

```
Ext.application({
    name: 'MyApp',
    controllers: [
        'MyController'
    ],

    launch: function() {

    }

}); 
```

设置控制器启动方法的正确方法

```
Ext.define('MyApp.controller.MyController', {
    extend: 'Ext.app.Controller',

    onLaunch: function() {

    }

}); 
```

# javascript - Javascript“改变”屏幕上的锚点位置

> ID：10415592
> 
> 赞同：0
> 
> 时间：2012-05-02T14:17:33.110
> 
> 标签：javascript, anchor

当 document.ready 时，我的一些 css div 高度是由 javascript 编写的。

副作用是页面中的锚标记正在从 DOM 准备好时变为 js 之后出现在屏幕上的内容。

因此，单击 将您带到 javascript 发挥其魔力之前的位置。

我有什么解决办法？

编辑 这个问题似乎比其他浏览器更容易绊倒 Firefox。但是看到我想修复它而不考虑浏览器（因为无论如何问题出在逻辑而不是代码 - 即页面实际上正在做我要求它做的事情！），解决方案不应该依赖于浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:20:56.760

完成修改后，使用[jQuery 插件](http://demos.flesler.com/jquery/scrollTo/)`location.hash`之类的脚本滚动到正确的元素。

# ios - 从 xcode 中删除旧的/未使用的配置文件

> ID：10415594
> 
> 赞同：2
> 
> 时间：2012-05-02T14:17:41.440
> 
> 标签：ios, xcode, xcode3.2

我最初为我的 ios 应用程序配备了一个 beta 测试人员。最终这个数字逐渐增加到 4 个。所以我不时地不断修改相同的配置文件。在网站上，它显示了一个配置文件，这很好。

但是在 xcode 中，它显示了我使用过的所有配置文件，如何从 xcode 中删除它们以便只显示最新的配置文件（如网站上所示）。

Xcode：3.2.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:22:44.703

转到管理器-> 设备-> 配置文件，现在您可以通过右键单击删除配置并删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T03:17:45.087

Xcode 6.1.1 在菜单窗口中 ==> 设备 ==> 选择设备 ==> 单击鼠标右键 ==> 显示配置文件

您可以在该菜单中删除未使用的配置文件。

# orm - 插入子表的 ColdFusion ORM 错误

> ID：10415596
> 
> 赞同：1
> 
> 时间：2012-05-02T14:17:45.557
> 
> 标签：orm, coldfusion

我在 ColdFusion 中的 ORM 应用程序遇到了另一个问题。当我尝试插入新的子对象时，出现以下错误。更新工作正常。

> 此异常的根本原因是：coldfusion.orm.hibernate.HibernateSessionException: [Macromedia][Oracle JDBC Driver][Oracle]ORA-01400: cannot insert NULL into ("AKC"."T_BREED_PAGE_TEXT_CONTENT_WEB"."KEY_TEXT_CONTENT")。

这是 orm cfc：

```
<cfcomponent persistent="true"
      table="T_BREED_PAGE_TEXT_CONTENT_WEB" 
      schema="akc"  >

    <cfproperty name="KEY_TEXT_CONTENT" fieldtype="id"   generator="sequence" params="{sequence='akc.seq_breed_page_display'}" />
    <cfproperty name="TEXT_TITLE_TEXT" />
    <cfproperty name="TEXT_ICON_IMAGE" />
    <cfproperty name="TEXT_CONTENT" />
    <cfproperty name="KEY_BREED_PAGE" />
    <cfproperty name="CDE_BLOCK_ID"  />
    <cfproperty name="breedPage" cfc="breedPage" fieldtype="many-to-one" fkcolumn="KEY_BREED_PAGE" />
    <cfproperty name="pageBlocks" cfc="pageBlocks" fieldtype="many-to-one" fkcolumn="CDE_BLOCK_ID" />
</cfcomponent> 
```

我已经尝试使用冷融合增量生成器以及手动设置值并生成相同的错误。使用该序列的普通 cfquery 插入工作正常。关于解决此问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:02:46.133

奇怪的是，在发布之前的答案后，我遇到了一个非常相似的问题。在深入了解 hibernate 日志记录并分析我的 save 方法实际上在做什么之后，我发现在使用地址对象数组保存用户对象时，在删除地址后，hibernate 试图通过设置来删除地址地址记录中的 FK 用户 ID 字段为 NULL，但我的架构不允许为空。将 inverse="true" 放在 Addresses 属性上解决了它。也许你的问题有点相似。

当您说要插入一个新孩子时，究竟是在哪里抛出异常？我很想知道你在调用什么 ORM 函数。

不知道该叫什么对象，但为了论证，我们称它为 SubBreed() 你在做 SubBreed.setBreedPage(new BreedPage); 然后 entitySave（SubBreed）？还是完全不同的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:19:19.587

您是否尝试过 generator="identity" 并让数据库自动增加 P​​K？

# c# - foreach 获取下一项

> ID：10415601
> 
> 赞同：2
> 
> 时间：2012-05-02T14:18:00.420
> 
> 标签：c#, loops, foreach, ienumerable, enumerator

我有以下功能，但它很长，很脏，我想优化它：

```
 //some code
        if (use_option1 == true)
        {
            foreach (ListViewItem item in listView1)
            {
                //1\. get subitems into a List<string>
                //
                //2\. process the result using many lines of code
            }
        }
        else if (use_option2 = true)
        {
            //1\. get a string from another List<string>
            //
            //2\. process the result using many lines of code
        }
        else
        {
            //1\. get a string from another List<string> (2)
            //
            //2\. process the result using many lines of code
        } 
```

这工作得很好，但很脏我想用这样的东西：

```
 //some code
        if (use_option1 == true)
        {
            List<string> result = get_item();//get subitems into a List<string>
        }
        else if (use_option2 = true)
        {
            //get a string from another List<string>
        }
        else
        {
            //get a string from another List<string> (2)
        }

            //process the result using many lines of code

        private void get_item()
        {
            //foreach bla bla
        } 
```

**我应该如何让 get_item 函数每次都获取列表中的下一个项目？**

我读了一些关于 GetEnumerator 的东西，但我不知道这是否是我的问题的解决方案或如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:50:05.857

看一下[yield 关键字](http://msdn.microsoft.com/en-us/library/9k7k7cf0%28v=vs.100%29.aspx)，效率很高，返回一个 IEnumerable。考虑以下示例：

```
 List<string> list = new List<string> { "A112", "A222", "B3243" };

        foreach(string s in GetItems(list))
        {
            Debug.WriteLine(s);
        } 
```

您有如下定义的 GetItems 方法：

```
public System.Collections.IEnumerable GetItems(List<string> lst)
{
    foreach (string s in lst)
    {
        //Some condition here to filter the list
        if (s.StartsWith("A"))
        {
            yield return s;
        }
    }
} 
```

在你的情况下，你会有类似的东西：

```
public System.Collections.IEnumerable GetItems()
{
    for (ListViewItem in ListView)
    {
        //Get string from ListViewItem and specify a filtering condition
        string str = //Get string from ListViewItem
        //Filter condition . e.g. if(str = x)
        yield return str;
    }
} 
```

如果您想更进一步并使用 LINQ，那么它将归结为一行：

```
public System.Collections.IEnumerable GetItems(List<string> lst)
{
    return lst.Where(T => T.StartsWith("A"));
} 
```

希望这是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:19:49.863

您可以在官方文档中阅读此内容 - 示例：[MSDN 参考](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator.aspx)

# .net - MonoTouch 应用程序到 Mono Android

> ID：10415602
> 
> 赞同：3
> 
> 时间：2012-05-02T14:18:02.817
> 
> 标签：.net, windows-phone-7, mono, xamarin.ios, xamarin.android

我是 Mono 新手，我的第一个问题是，是否可以在 Monotouch 中创建一个应用程序，然后为 iOS、Android 和 Windows Phone 构建它？！我的意思是，我可以有一个源代码吗？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T20:23:58.757

不完全是。[如果您使用类似MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的模型构建应用程序，那么您可以轻松地在所有这些平台之间共享**大量代码。**

一个很好的例子是 Xamarin 的[MWC 2012 示例应用程序](http://blog.xamarin.com/2012/02/24/mwc_2012/)。它向您展示了如何为 iPhone、iPad、Android 和 Windows Phone 应用程序重用除 UI 之外的几乎所有内容。

# web-services - RESTful Web 服务发布 API

> ID：10415604
> 
> 赞同：0
> 
> 时间：2012-05-02T14:18:04.863
> 
> 标签：web-services, rest, jakarta-ee

我正在开发一个执行 CRUD 操作的 RESTful Web 服务。有没有办法为我的数据对象 XML 发布 API？

有描述服务的 WADL，但没有（据我所知）告诉消费者服务期望或作为 XML 数据对象返回什么。

是否有发布此内容的常见做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:32:10.343

我们在文档页面中为请求和响应提供了 xsd 模式和示例。REL 可以指向这些文档页面。这是一个使用 HAL 的示例，该示例具有文档的占位符。我们还提供额外的链接关系。我们还提供资源的业务描述

[http://hal-shop.heroku.com/hal_browser.html#/](http://hal-shop.heroku.com/hal_browser.html#/)

# java - Jersey 客户端 + 设置代理

> ID：10415607
> 
> 赞同：14
> 
> 时间：2012-05-02T14:18:14.403
> 
> 标签：java, proxy, client, jersey-1.0

嗨，我有一个球衣客户端，我用它来上传文件。我尝试在本地使用它，一切正常。但是在生产环境中我必须设置代理。我浏览了几页，但无法得到确切的解决方案。有人可以帮我吗？

这是我的客户代码：

```
File file = new File("e:\\test.zip");
FormDataMultiPart part = new FormDataMultiPart();
part.bodyPart(new FileDataBodyPart("file", file, MediaType.APPLICATION_OCTET_STREAM_TYPE));
WebResource resource = null;

if (proxy.equals("yes")) {
    // How do i configure client in this case?
} else {
    // this uses system proxy i guess
    resource = Client.create().resource(url);
}

String response = (String) resource.type(MediaType.MULTIPART_FORM_DATA_TYPE).post(String.class, part);
System.out.println(response); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T16:44:36.140

如果您想避免遗留项目中的更多库并且不需要代理身份验证，则有一种更简单的方法：

首先你需要一个实现的类`HttpURLConnectionFactory`：

```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.InetSocketAddress;
import java.net.Proxy;
import java.net.URL;

import com.sun.jersey.client.urlconnection.HttpURLConnectionFactory;

public class ConnectionFactory implements HttpURLConnectionFactory {

    Proxy proxy;

    private void initializeProxy() {
        proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("myproxy.com", 3128));
    }

    public HttpURLConnection getHttpURLConnection(URL url) throws IOException {
        initializeProxy();
        return (HttpURLConnection) url.openConnection(proxy);
    }
} 
```

二是实例化一个`com.sun.jersey.client.urlconnection.URLConnectionHandler`

```
URLConnectionClientHandler ch  = new URLConnectionClientHandler(new ConnectionFactory()); 
```

第三是使用`Client`构造函数而不是`Client.create`：

```
Client client = new Client(ch); 
```

当然你可以在`ConnectionFactory`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-26T08:53:45.947

幸运的答案应该有效。这是我的版本：

```
ClientConfig config = new DefaultClientConfig();
Client client = new Client(new URLConnectionClientHandler(
        new HttpURLConnectionFactory() {
    Proxy p = null;
    @Override
    public HttpURLConnection getHttpURLConnection(URL url)
            throws IOException {
        if (p == null) {
            if (System.getProperties().containsKey("http.proxyHost")) {
                p = new Proxy(Proxy.Type.HTTP,
                        new InetSocketAddress(
                        System.getProperty("http.proxyHost"),
                        Integer.getInteger("http.proxyPort", 80)));
            } else {
                p = Proxy.NO_PROXY;
            }
        }
        return (HttpURLConnection) url.openConnection(p);
    }
}), config); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T15:11:57.300

干得好：

```
 DefaultApacheHttpClient4Config config = new DefaultApacheHttpClient4Config();
      config.getProperties().put(
      ApacheHttpClient4Config.PROPERTY_PROXY_URI, 
      "PROXY_URL"
 );

 config.getProperties().put(
      ApacheHttpClient4Config.PROPERTY_PROXY_USERNAME, 
      "PROXY_USER"
 );

 config.getProperties().put(
      ApacheHttpClient4Config.PROPERTY_PROXY_PASSWORD, 
      "PROXY_PASS"
 );     

 Client c = ApacheHttpClient4.create(config);
 WebResource r = c.resource("https://www.google.com/"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-22T05:27:20.583

```
System.setProperty("http.proxyHost","your proxy url");
System.setProperty("http.proxyPort", "your proxy port"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-15T12:46:37.983

首先我创建了这个类

```
 import com.sun.jersey.client.urlconnection.HttpURLConnectionFactory;
    import java.io.IOException;
    import java.net.HttpURLConnection;
    import java.net.InetSocketAddress;
    import java.net.Proxy;
    import java.net.URL;
    import java.security.KeyManagementException;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;

/**
 *
 * @author Aimable
 */
public class ConnectionFactory implements HttpURLConnectionFactory {

    Proxy proxy;

    String proxyHost;

    Integer proxyPort;

    SSLContext sslContext;

    public ConnectionFactory() {
    }

    public ConnectionFactory(String proxyHost, Integer proxyPort) {
        this.proxyHost = proxyHost;
        this.proxyPort = proxyPort;
    }

    private void initializeProxy() {
        proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyHost, proxyPort));
    }

    @Override
    public HttpURLConnection getHttpURLConnection(URL url) throws IOException {
        initializeProxy();
        HttpURLConnection con = (HttpURLConnection) url.openConnection(proxy);
        if (con instanceof HttpsURLConnection) {
            System.out.println("The valus is....");
            HttpsURLConnection httpsCon = (HttpsURLConnection) url.openConnection(proxy);
            httpsCon.setHostnameVerifier(getHostnameVerifier());
            httpsCon.setSSLSocketFactory(getSslContext().getSocketFactory());
            return httpsCon;
        } else {
            return con;
        }

    }

    public SSLContext getSslContext() {
        try {
            sslContext = SSLContext.getInstance("SSL");
            sslContext.init(null, new TrustManager[]{new SecureTrustManager()}, new SecureRandom());
        } catch (NoSuchAlgorithmException ex) {
            Logger.getLogger(ConnectionFactory.class.getName()).log(Level.SEVERE, null, ex);
        } catch (KeyManagementException ex) {
            Logger.getLogger(ConnectionFactory.class.getName()).log(Level.SEVERE, null, ex);
        }
        return sslContext;
    }

    private HostnameVerifier getHostnameVerifier() {
        return new HostnameVerifier() {
            @Override
            public boolean verify(String hostname,
                    javax.net.ssl.SSLSession sslSession) {
                return true;
            }
        };
    }

} 
```

然后我还创建了另一个名为 SecureTrustManager 的类

```
 import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import javax.net.ssl.X509TrustManager;

/**
 *
 * @author Aimable
 */
public class SecureTrustManager implements X509TrustManager {

    @Override
    public void checkClientTrusted(X509Certificate[] arg0, String arg1)
            throws CertificateException {
    }

    @Override
    public void checkServerTrusted(X509Certificate[] arg0, String arg1)
            throws CertificateException {
    }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
        return new X509Certificate[0];
    }

    public boolean isClientTrusted(X509Certificate[] arg0) {
        return true;
    }

    public boolean isServerTrusted(X509Certificate[] arg0) {
        return true;
    }

} 
```

然后在创建这个类之后，我像这样调用客户端

```
URLConnectionClientHandler cc = new URLConnectionClientHandler(new ConnectionFactory(webProxy.getWebserviceProxyHost(), webProxy.getWebserviceProxyPort()));
    client = new Client(cc);
    client.setConnectTimeout(2000000); 
```

将 webProxy.getWeserviceHost 替换为您的 proxyHost，将 webProxy.getWebserviceProxyPort() 替换为代理端口。

这对我有用，它也应该对你有用。请注意，我使用的是 Jersey 1.8，但它也应该适用于 Jersey 2

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-08T14:04:02.813

我拿了 user67871 并对其进行了一些更改。这种方法的好处在于它可以与 Windows 上的系统代理一起使用。如果您在 Windows 上并且在 IE 中配置了代理，那么此代码将获取该代理。当您运行 Fiddler 时，它还会设置系统代理，因此这使得将 Jersey 和 Fiddler 一起使用变得非常容易。

```
 Client client = new Client(new URLConnectionClientHandler(
            new HttpURLConnectionFactory() {
        Proxy p = null;

        @Override
        public HttpURLConnection getHttpURLConnection(URL url)
                throws IOException {
            try {
                if (p == null) {
                    List<Proxy> proxies = ProxySelector.getDefault().select(url.toURI());
                    if (proxies != null) {
                        // just use the first one, I don't know if we should sometimes use a different one
                        p = proxies.get(0);
                    }
                    if (p == null) {
                        p = Proxy.NO_PROXY;
                    }
                }
                return (HttpURLConnection) url.openConnection(p);
            } catch (URISyntaxException ex) {
                throw new IOException(ex);
            }
        }
    }), config); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-18T22:20:10.790

这是其他人提出的简化版本：

```
Proxy proxy = ...;
Client client = ClientBuilder.newClient(new ClientConfig()
    .connectorProvider(new HttpUrlConnectorProvider()
        .connectionFactory(url -> (HttpURLConnection) url.openConnection(proxy)))); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-24T22:05:58.767

能够配置代理覆盖提供给 newClient 的客户端配置。这适用于版本 24。

```
return ClientBuilder.newClient(new ClientConfig().connectorProvider(new ConnectorProvider() {
    // figured this out from digging through jersey source code
    @Override
    public Connector getConnector(Client client, Configuration runtimeConfig) {
        HttpUrlConnectorProvider customConnProv = new HttpUrlConnectorProvider();
        customConnProv.connectionFactory(new ConnectionFactory() {
            @Override
            public HttpURLConnection getConnection(java.net.URL url) throws IOException {
                Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyHost, proxyPort));
                return (HttpURLConnection) url.openConnection(proxy);
            }
        });
        return customConnProv.getConnector(client, runtimeConfig);
    }
})); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-31T09:11:05.437

多尔吉。我这样做是为了在 Jersey 客户端实例化中添加 3 个功能：启用 SSL TLSv1.1（需要 JVM >= 1.7），配置 conex。汇集。要增加连接，请设置系统代理。

```
 # My props file    
 # CONFIGURAR EL CLIENTE
 #PROXY_URI=http://5.5.5.5:8080
 #SECURITY_PROTOCOL=TLSv1.2
 #POOLING_HTTP_CLIENT_CONNECTION_MANAGER.MAXTOTAL=200
 #POOLING_HTTP_CLIENT_CONNECTION_MANAGER.DEFAULTMAXPERROUTE=20

 import java.util.Properties;
 import javax.net.ssl.SSLContext;
 import javax.ws.rs.client.Client;
 import javax.ws.rs.client.ClientBuilder;

 import org.apache.http.config.Registry;
 import org.apache.http.config.RegistryBuilder;
 import org.apache.http.conn.socket.ConnectionSocketFactory;
 import org.apache.http.conn.socket.PlainConnectionSocketFactory;
 import org.apache.http.conn.ssl.SSLConnectionSocketFactory;
 import org.apache.http.impl.conn.PoolingHttpClientConnectionManager;

 import org.glassfish.jersey.SslConfigurator;
 import org.glassfish.jersey.apache.connector.ApacheClientProperties;
 import org.glassfish.jersey.apache.connector.ApacheConnectorProvider;
 import org.glassfish.jersey.client.ClientConfig;
 import org.glassfish.jersey.client.ClientProperties;
 import org.glassfish.jersey.jackson.JacksonFeature;

 public class JerseyClientHelper {
     private static Client cliente;
     private static final Properties configuracion = SForceConfiguration.getInstance();

     public static synchronized Client getInstance() {
         if (cliente == null) {            
             SSLContext sslContext = SslConfigurator.newInstance().securityProtocol(configuracion.getProperty("SECURITY_PROTOCOL")).createSSLContext(); // Usar TLSv1.2

             SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(sslContext);
             Registry<ConnectionSocketFactory> socketFactoryRegistry = RegistryBuilder.<ConnectionSocketFactory>create()
             .register("http", PlainConnectionSocketFactory.getSocketFactory())
             .register("https", socketFactory)
             .build();

             // Para configurar las conexiones simultaneas al servidor
             int maxTotal = Integer.parseInt(configuracion.getProperty("POOLING_HTTP_CLIENT_CONNECTION_MANAGER.MAXTOTAL"));
             int defaultMaxPerRoute = Integer.parseInt(configuracion.getProperty("POOLING_HTTP_CLIENT_CONNECTION_MANAGER.DEFAULTMAXPERROUTE"));
             PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager(socketFactoryRegistry);
             connectionManager.setMaxTotal(maxTotal);
             connectionManager.setDefaultMaxPerRoute(defaultMaxPerRoute);

             ClientConfig config = new ClientConfig();
             config.property(ApacheClientProperties.CONNECTION_MANAGER, connectionManager);
             config.connectorProvider(new ApacheConnectorProvider());
             config.property(ClientProperties.PROXY_URI, configuracion.getProperty("PROXY_URI")); // Debemos poner el PROXY del sistema

             cliente = ClientBuilder.newBuilder().sslContext(sslContext).withConfig(config).build();

         }        
         return cliente;
     }

 } 
```

# php - Position a block on product page below tabs - Magento

> ID：10415623
> 
> 赞同：0
> 
> 时间：2012-05-02T14:18:55.557
> 
> 标签：php, xml, zend-framework, magento

I am working on Magento CE 1.6.2 and have an extension installed which display 'Other Customers also Bought' which displays fine exactly below the tabs.

Now I would like to position 'Recently viewed products' on Product page right at the bottom, just before the footer.

So I want some thing like this

```
 Tabs
      'other customers also bought'
      'Recently Viewed products'
  Footer Starts here... 
```

But for some reason my 'Other Customers also bought' is getting over lapped with 'Recently Viewed Products'

I tried changing the layout files but to no success

Layout file for other customers also bought otherbought.xml

```
 <catalog_product_view>
    <reference name="content">
        <block type="relatedproducts/relatedproducts" name="catalog.product.awrelated.community" as="othersbought_products" after="info_tabs" template="catalog/product/list/awrelated.phtml">
            <action method="setTarget">
                <alias>community</alias>
            </action>                   
        </block>    
    </reference>        
</catalog_product_view> 
```

Layout for Recently Viewed Products reports.xml

```
 <catalog_product_view translate="label">
    <reference name="content">
        <block type="reports/product_viewed" name="right.reports.product.viewed" as="recently_viewed" template="reports/product_viewed.phtml" />
    </reference>
</catalog_product_view> 
```

And for tabs i'm using EasyTabs extension, easytabs.xml

```
 <reference name="product.info.additional">
            <action method="unsetChild" ifconfig="easy_tabs/general/tagstabbed"><name>product_tag_list</name></action>
            <block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs">
                <action method="setTemplate" ifconfig="easy_tabs/general/enabled"><template>easytabs/tabs.phtml</template></action>
                <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/descriptiontabbed"><alias>description_tabbed</alias><title>Description</title><block>catalog/product_view_description</block><template>easytabs/description.phtml</template></action>
                </block>
    </reference> 
```

I guess a `before` or `after` element can be used but its not working. Or If there is any way to directly show 'Recently Viewed Products' right at the bottom of product page just before the footer ?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:45:44.220

The position in the `content` area is not controlled using the `before` and `after` tags, but is determined by where they are positioned in `view.phtml` or the files that control the blocks in that such as `tabs.phtml`.

Try looking for things of this form:

```
<?php echo $this->getChildHtml('addtocart') ?> 
```

Which indicate a block defined in a layout with name `addtocart` is being called.

If you want to know which template file controls which part you can try turning on `Template Path Hints` in the `System->Configuration->Developer` (admin panel), and then visit the page. Obviously not on a live site! Note you can't do this for the default configuration, so you need to choose a store view.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:38:52.167

I commented reports.xml and took the line from that file putting it into 'othersbought.xml'. So now my othersbought.xml file looks like this :

```
 <catalog_product_view>
   <reference name="content">
    <block type="relatedproducts/relatedproducts" name="catalog.product.awrelated.community" as="othersbought_products" after="info_tabs" template="catalog/product/list/awrelated.phtml">
        <action method="setTarget">
            <alias>community</alias>
        </action>                   
    </block> 
   <!-- Added Recently viewed products here below 'Others Bought' block --->   
   <block type="reports/product_viewed" name="right.reports.product.viewed" as="recently_viewed" template="reports/product_viewed.phtml" />
   <!-- ************ -->
   </reference>        
   </catalog_product_view> 
```

This makes the 'Recently Viewed products' block to appear exactly below 'Other also bought' block which is what I had wanted.

May be not the most right way to do it, but works for me for now.

# c++ - 如何返回智能指针？

> ID：10415636
> 
> 赞同：0
> 
> 时间：2012-05-02T14:19:22.020
> 
> 标签：c++, c++11, smart-pointers

我在二叉搜索树的类中有一个键和一个指向结构中定义的左右节点的指针。

我在类的复制辅助函数中遇到 parasoft 错误，因此建议将代码更改为：

```
BinaryTree::Node* BinaryTree::copyHelper(const Node* other)
{
    if(other == NULL)
    {
        return NULL; // If there's no Node to copy, return NULL.
    }
    else
    {
        //Node* newNode  = new Node; 

        typedef std::unique_ptr<Node> NodePtr;  
        NodePtr newNode(new Node); 

        if(newNode)
        {
            newNode->name  = other->name;
            newNode->left  = copyHelper(other->left); 
            newNode->right = copyHelper(other->right);
        }

        return newNode;
    }
} 
```

现在我在 newNode 的 return 语句上收到错误：

> IntelliSense：没有合适的转换`NodePtr`函数`BinaryTree::Node *`

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:32:56.767

啊啊。您无法将 a 转换`unique_ptr<T>`为`T*`. 它们不是同一类型，并且它们没有相同的语义，特别是在它们被复制时。这就是为什么`unique_ptr<T>`没有转换运算符到`T*`. `T*`不是一个类，因此您不能像返回声明的返回类型的子类那样依赖多态性来为您完成工作（实际上`unique_ptr`，语义差异意味着子类化无论如何都是错误的关系）。

所以你在这里别无选择 - 你必须返回 a`unique_ptr<T>`并让你的调用者处理后果，因为他们需要知道它是 a`unique_ptr<T>`并且表现得像一个。如果您觉得这负担过重，我建议您阅读智能指针，以更好地了解它们是什么以及它们为您做了什么。

您可能还需要考虑它是否是正确类型的智能指针类，因为它可能`shared_ptr<T>`具有更适合您的语义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T14:50:16.300

如果我理解它`copyHelper`是一个内部函数，而不是接口的一部分。如果是这样，那么最简单的解决方案是更改签名以返回 a`unique_ptr`而不是原始指针。

另一种方法是`release`在`unique_ptr`内部调用`copyHelper`以放弃所有权，并让调用者自己收回它`unique_ptr`（因为你需要使用它`reset`），但是当你将它存储在原始指针时没有意义a`unique_ptr`在接下来的步骤中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:40:33.563

这是你的功能：

```
BinaryTree::Node* BinaryTree::copyHelper(const Node* other) { ...} 
```

它返回 a `BinaryTree::Node*`，并且应该返回 a `unique_ptr<Node>`：

```
std::unique_ptr<BinaryTree::Node> BinaryTree::copyHelper(const Node* other) { ...} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T14:36:51.480

函数的返回类型和您实际返回的值具有不同的类型，并且在您返回的内容与您的函数声明返回的内容之间不存在隐式转换。

# android - Android：SQLite 数据库中的光标错误

> ID：10415637
> 
> 赞同：0
> 
> 时间：2012-05-02T14:19:24.120
> 
> 标签：android, database, sqlite, cursor

我已经编写了一些运行良好的代码，但是在对一些代码进行了小幅清理之后，我得到了这个错误，我已经将其追溯到代码中的光标操作。它记录`Log.d("Start-up",name)`但不记录`Log.d("Start-up","Efter")`. 我真的不知道出了什么问题，我希望你能帮助我！

```
db.execSQL("CREATE TABLE " + DATABASE_TABLE2 + " (" + 
            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            NAME + " TEXT NOT NULL, " +
            PLAYER_1 + " TEXT NOT NULL, " +
            PLAYER_2 + " TEXT NOT NULL, " +
            PLAYER_3 + " TEXT NOT NULL, " +
            PLAYER_4 + " TEXT NOT NULL, " +
            PLAYER_5 + " TEXT NOT NULL, " +
            ANTAL + " TEXT NOT NULL, " +
            OVERSIDDER + " TEXT NOT NULL, " +
            G + " TEXT NOT NULL, " +
            LOFT + " TEXT NOT NULL);"
            );

    public boolean doesNameExist(String name){
    String[] columns = new String[]{NAME};
    Log.d("Start-up",name);
    Cursor c = ourDatabase.query(DATABASE_TABLE2, columns, NAME + " = '"+ name + "'", null, null, null, null);
    Log.d("Start-up","Efter");
    return c.moveToFirst();
} 
```

这是我的日志：

```
05-02 16:20:58.168: W/dalvikvm(22533): threadid=1: thread exiting with uncaught exception (group=0x400259f8)
05-02 16:20:58.178: E/AndroidRuntime(22533): FATAL EXCEPTION: main
05-02 16:20:58.178: E/AndroidRuntime(22533): java.lang.NullPointerException
05-02 16:20:58.178: E/AndroidRuntime(22533):    at com.jesper.whist.DBHelpeR.doesNameExist(DBHelpeR.java:217)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at com.jesper.whist.Indstillinger$2.onClick(Indstillinger.java:87)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at android.view.View.performClick(View.java:2408)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at android.view.View$PerformClick.run(View.java:8817)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at android.os.Handler.handleCallback(Handler.java:587)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at android.os.Looper.loop(Looper.java:144)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at android.app.ActivityThread.main(ActivityThread.java:4937)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at java.lang.reflect.Method.invokeNative(Native Method)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at java.lang.reflect.Method.invoke(Method.java:521)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
05-02 16:20:58.178: E/AndroidRuntime(22533):    at dalvik.system.NativeStart.main(Native Method) 
```

编辑：全班

```
package com.jesper.whist;

public class Indstillinger extends Activity{

//Variables
public static final String MY_SETTINGS = "MySettings";
EditText name,G,loft,player1,player2,player3,player4,player5;
String antal;
TextView playertext5, overskrift;
Typeface tf;
CheckBox femSpiller;
SharedPreferences settings;
Toast display;
int id;
Button ok_inst;
DBHelpeR entry;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Remove app-name
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    // Set heading font
    setContentView(R.layout.indstillinger);
    tf = Typeface.createFromAsset(getAssets(), "FargoFaroNF.ttf");
    overskrift = (TextView) findViewById(R.id.indstillinger);
    overskrift.setTypeface(tf);

    // Setting up Shared prefenceres and database
    settings = getSharedPreferences(MY_SETTINGS, 0);
    entry = new DBHelpeR(Indstillinger.this);

    // More variables
    G = (EditText) findViewById(R.id.etG);
    G.setText("15");
    loft = (EditText) findViewById(R.id.etLoft);
    loft.setText("10000");
    name = (EditText) findViewById(R.id.etName);
    player1 = (EditText) findViewById(R.id.etPlayer1);
    player2 = (EditText) findViewById(R.id.etPlayer2);
    player3 = (EditText) findViewById(R.id.etPlayer3);
    player4 = (EditText) findViewById(R.id.etPlayer4);
    player5 = (EditText) findViewById(R.id.etPlayer5);
    playertext5 = (TextView) findViewById(R.id.tvPlayer5);
    femSpiller = (CheckBox) findViewById(R.id.cb_fem);
    ok_inst = (Button) findViewById(R.id.bInst);

    // Toast
    display = Toast.makeText(this, "Navnet er optaget! Vælg et nyt!", Toast.LENGTH_SHORT);

    // Get id from Shared Preferences
    id = settings.getInt("game_id", 0);

    // Hvis 5-spillere-checkboxen checkes, vis indstillingsmuligheder
    femSpiller.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
        @Override
        public void onCheckedChanged(CompoundButton buttonView,
        boolean isChecked) {
            playertext5.setVisibility(View.VISIBLE);    // Vis TextView
            player5.setVisibility(View.VISIBLE);    // Vis EditText
        }
        });

    // Ved klik på ok-knappen
    ok_inst.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            // Check if name exist
            if(entry.doesNameExist(name.getText().toString())==true){
                display.show();     // Vis toast
            }
            // Hvis navnet ikke eksistere
            else{
                if(femSpiller.isChecked()){antal = "5";}    // Hvis der er 5 spillere
                else{antal = "4";}      // Hvis der er 4 spillere

                entry.open();

                // Lav entry i Spil_table: spil navn, spillernavne, antal, oversidder=5 så sidste man sidder over i første runde, grundtakst, loft
                entry.createEntrySpil(name.getText().toString(), player1.getText().toString(), player2.getText().toString(), player3.getText().toString(), player4.getText().toString(), player5.getText().toString(), antal,"5", G.getText().toString(), loft.getText().toString());
                entry.createEntryPenge(id,"0","0","0","0","0"); // Lav en nul-entry så det virker
                entry.close();

                // Start WHIST! og afslut denne proces
                startActivity(new Intent("com.jesper.whist.WHIST"));
                finish();
                }

        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:17:59.663

好吧，从你的 logcat 我会看两个地方......

87 号线附近的 Indstillinger

和

217 号线附近的 DBHelpeR

发布这些代码部分，也许我们可以提供更多帮助。

**编辑**

好的，我看到光标位已发布（刚刚醒来，抱歉）。我真的看不出那个查询有什么问题（假设你已经定义了`ourDatabase`，因为你没有在你发布的代码中显示它），所以我会看看第 87 行的 Indstillinger。这似乎是第一个参考您在错误日志中的代码。

第二次编辑

您使用的方法要求在打开数据库之前先打开它。在调用 dosNameExist 之前执行 entry.open()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:26:19.457

如果没有特定错误，这只是一个猜测，但是：

> 在一些代码中进行小的清理后，我得到了这个错误

您是否更改了表结构？如果是这样，您需要重建数据库，最简单的方法是增加 DATABASE_VERSION。

**添加**

空指针异常意味着一个变量，可能`ourDatabase`，尚未定义。

# c++ - 使用 for 循环删除对象数组

> ID：10415640
> 
> 赞同：4
> 
> 时间：2012-05-02T14:19:31.233
> 
> 标签：c++, algorithm, memory-management, memory-leaks

我无法弄清楚如何删除作业中的对象数组。

声明如下所示：

```
Sprite*     gCharacter[64] ; 
```

然后在 WndProc 函数中。

```
case WM_DESTROY:
        for(int i = 0; i < 64;i++){
            delete gCharacter[i];
        }
        delete gBackground;
        delete gBackBuffer;
        DeleteDC(ghSpriteDC);
        PostQuitMessage(0);
        return 0; 
```

使用这个 for 循环，我得到断言错误，就像我尝试这样的事情：

```
delete gCharacter[0];
delete gCharacter[0]; 
```

我无法弄清楚为什么会发生这种情况以及如何正确删除该数组。如果没有，我将手动输入：`delete gCharacter[from 0 to 63]`但这看起来很混乱。

这固定

```
for(int i = 0; i < 180; i++){
            gCharacter[i] = 0;
            delete gCharacter[i];
        } 
```

这个错误：`_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)` 但我不知道为什么我必须先设置 NULL 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:59:36.200

鉴于您发布的代码有限，有两种明显的情况会在循环中获得断言：

1) 64 个指针中的一个（或多个）未正确初始化。如果你一开始没有初始化你的指针`NULL`，并且没有一一调用`new`它们中的每一个，那么这 64 个删除中的一个将失败，因为它会尝试释放尚未分配的内存（删除`NULL`指针是有效并且什么都不做，但不断言）

2）你的 64 个指针中的一些指向同一个`Sprite`实例。在这种情况下，当第一个指针被删除时，第二个指针仍然指向相同的内存地址，该地址已经被释放（甚至可能同时为不同的目的重新分配）。对同一内存地址的第二次删除将因双重释放断言而失败。

显然在其他情况下您可以获得断言，但您没有发布足够的代码来彻底调试，而我列出的 2 个是最常见的。

# javascript - 链接的jQuery事件处理

> ID：10415641
> 
> 赞同：4
> 
> 时间：2012-05-02T14:19:31.493
> 
> 标签：javascript, jquery

我开始使用 jquery 并按照此处找到的官方网站上的教程进行操作。 [http://docs.jquery.com/How_jQuery_Works#jQuery:_The_Basics](http://docs.jquery.com/How_jQuery_Works#jQuery:_The_Basics)

我在标有在文档就绪时启动代码的部分。如果您注意到，他们提供了两个示例。一个是在将您带到 jquery 站点之前弹出一个警报框，另一个是警报框阻止您访问该站点。

假设我想要两个链接。一个出现警告框并单击“确定”后，它会继续访问 jquery 的站点，另一个出现警告框但阻止您访问 jquery 的站点。我只想能够找出不同链接的不同响应。我需要给它某种ID吗？

这是代码。

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
<title>Demo</title>
  </head>
  <body>
<script src="jquery.js"></script><br/>
<a href="http://jquery.com/" id="1">jQuery</a><br/> <!--first link: will display message and then proceed to site -->
<script>
 $(document).ready(function(){
    $("a#1").click(function(event){
      alert("Thanks for visiting!");
    });
  });
</script>
<a href="http://jquery.com/" id="2">jQuery</a> <!-- second link: message appears and does not continue to site -->
<script>
   $(document).ready(function(){
      $("a#2").click(function(event){
        alert("As you can see, the link no longer took you to jquery.com"); 
        event.preventDefault();
      });
    });
</script> 
```

编辑 - 将 id 添加到锚点。谢谢你们，它的工作原理。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T14:21:31.157

是的，使用 id 是引用锚点的最直接方式。

```
<a id="anchor1" href="..">anchor 1</a> 
```

允许

```
$("#anchor1").click(function(event){
   alert("Thanks for visiting!");
   event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T14:29:33.887

是的，`$('a')`选择所有锚元素（“a”标签）。如果您全部选择它们，就像您没有进一步指定选择器一样，事件处理程序将与所有它们挂钩。因此，您可以通过添加 id 来选择不同的锚点，如另一个答案中所述：

```
<a id="anchor1" href="..">anchor 1</a> 
```

允许

```
$('#anchor1').click(...); 
```

或者，您可以使用 a-tag 的其他属性（如 ref-attribute 或 data-* 属性）来优化选择，如下所示：

```
<a rel="preventme" href="..">anchor 1</a> 
```

允许

```
$('a[rel="preventme"]').click(...); 
```

和

```
<a data-mode="disable-link" href="..">anchor 2</a> 
```

这使得

```
$('a[data-mode="disable-link"]').click(...) 
```

你甚至可以通过他们的协议选择所有外部链接，比如

```
$("a[href^='http://']").click(...); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T14:30:09.227

是的。

现在，`$('a')`抓取页面上的所有`<a>`元素。您需要的是一种区分两者的方法，以仅抓住其中一个元素。有很多方法可以做到这一点，但最简单的方法是添加一个 ID。ID 充当页面上的唯一标识以设置样式、操作和/或抓取单个元素。

从那里，如[@Sam Tyson](https://stackoverflow.com/a/10415685/422184)的回答所述，您可以使用以下 jQuery 选择器：

```
 $('#id1').click( 
```

这个 jQuery 选择器使用 ID `id1`，并在其前面加上`#`，用于告诉 jQuery 您正在寻找具有该 ID 的内容。

另一种方法是使用类。例如，如果您希望阻止页面上有多个链接继续到下一页，则可以使用类名将它们组合在一起以同时处理它们。类，而不是 ID，用于对元素进行分组，以便可以对它们进行样式设置、操作或抓取。向您的链接添加一个类将允许您执行以下操作：

```
$('.do_not_follow_link').click(function (e) {
    e.preventDefault();
}); 
```

这将找到所有具有类名的链接，`do_not_follow_link`并阻止它们继续访问它们链接到的页面。

现在，在 jQuery 中使用选择器，有很多方法可以做到这一点，但这些是您现在应该担心的重要方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T14:26:13.053

在绑定事件时，您确实应该为链接分配一个 ID 并引用此 ID。有关工作示例，请参阅此[jsFiddle 。](http://jsfiddle.net/w6TG6/)

```
<a href="http://jquery.com/" id="link1">jQuery</a><br/> <!--first link: will display message and then proceed to site -->
<a href="http://jquery.com/" id="link2">jQuery</a> <!-- second link: message appears and does not continue to site --> 
```

然后绑定事件：

```
$(document).ready(function() {
    $("#link1").click(function(event) {
        alert("As you can see, the link no longer took you to jquery.com");
        event.preventDefault();
    });

    $("#link2").click(function(event) {
        alert("Thanks for visiting!");
    });
});​ 
```

# sql-server - SQLServer 的 JPA 连接配置

> ID：10415643
> 
> 赞同：1
> 
> 时间：2012-05-02T14:19:43.490
> 
> 标签：sql-server, jpa, configuration, driver

有谁知道为什么我会收到以下错误？

```
javax.persistence.PersistenceException: Exception [EclipseLink-4003] (Eclipse     Persistence Services - 2.3.2.v20111125-r10461):      org.eclipse.persistence.exceptions.DatabaseException
Exception Description: Configuration error.  Class     [com.microsoft.sqlserver.jdbc.SQLServerDriver] not found.
    org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:517)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(Entity    ManagerFactoryDelegate.java:188)
    org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
mobilelink.entityservice.CheckVouchService.findAllCheckVouch(CheckVouchService.java:21)
warehouseservice.jaxrs.StockTake.getStockTakeTasks(StockTake.java:40)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
java.lang.reflect.Method.invoke(Unknown Source)
com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:187)
com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:70)
com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:279)
com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:86)
com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:136)
com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:74)
com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1357)
com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1289)
com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1239)
com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1229)
com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:420)
com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:497)
com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:684)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我的 persistence.xml 中的设置如下

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="MobileLink" transaction-type="RESOURCE_LOCAL">
        <class>mobilelink.entity.ComputationUnit</class>
        <class>mobilelink.entity.Inventory</class>
        <class>mobilelink.entity.InventoryClass</class>
    <class>mobilelink.entity.CheckVouch</class>
    <class>mobilelink.entity.CheckVouchs</class>
    <class>mobilelink.entity.Department</class>
    <class>mobilelink.entity.Person</class>
    <class>mobilelink.entity.Warehouse</class>
    <properties>
        <property name="javax.persistence.jdbc.url" value="jdbc:sqlserver://localhost:1433;databaseName=UFDATA_666_2009"/>
        <property name="javax.persistence.jdbc.user" value="sa"/>
        <property name="javax.persistence.jdbc.password" value="160497"/>
        <property name="javax.persistence.jdbc.driver" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
        <property name="eclipselink.cache.shared.default" value="false"/>
    </properties>
</persistence-unit> 
```

在项目构建路径中，我已经包含了从 Microsoft 下载的 sqljdbc4.jar。
感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:35:46.567

将*sqljdbc4.jar*移动到应用服务器中包含库的文件夹。

# solr - 如何指示 ExtractingRequestHandler 仅解析文档的正文？

> ID：10415645
> 
> 赞同：2
> 
> 时间：2012-05-02T14:19:46.900
> 
> 标签：solr, apache-tika

我如何指示提取请求处理程序在构造我发送给它的文档的“内容”时忽略元数据/标题等？

例如，我创建了一个 MS Word 文档，其中只包含单词“SEARCHWORD”而没有其他内容。但是，当我将此文档发送到我的 solr 索引时，它的内容将映射到我的“正文”字段，如下所示：

```
<str name="body">
    Last-Printed 2009-02-05T15:02:00Z Revision-Number 22 Comments stream_source_info 
    myfile Last-Author Inigo Montoya Template Normal.dotm Page-Count 1 subject Application-Name
     Microsoft Macintosh Word Author Jesus Baggins Word-Count 2 xmpTPg:NPages 1 Edit-Time 
    108600000000 Creation-Date 2008-11-05T20:19:00Z stream_content_type application/octet-stream 
    Character Count 14 stream_size 31232 stream_name /Applications/MAMP/tmp/php/phpHCIg7y 
    Some Company Content-Type application/msword Keywords Last-Save-Date 
    2012-05-01T18:55:00Z SEARCHWORD
</str> 
```

我想要的只是文档的正文，在本例中是“SEARCHWORD”一词。

为了进一步参考，这是我的提取处理程序：

```
 <requestHandler name="/update/extract" 
                 startup="lazy"
                 class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <!-- All the main content goes into "text"... if you need to return
           the extracted text or do highlighting, use a stored field. -->
      <str name="fmap.content">body</str>
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>
    </lst>
  </requestHandler> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T13:16:33.413

solr-user 邮件列表上的优秀人员已经查到了这个问题的底部。事实证明，字段名称“meta”是一种特殊情况：ExtractingRH 将所有元数据复制到该字段。就我而言，我也正在获取内容，因为我自己的 ERH 中的 fmap.contents 映射。我将我的“元”字段重命名为其他内容，现在它只接收文档的内容。

Solr wiki 当前未记录此行为。我希望这可以帮助其他人，他们可能在他们的架构中有一个名为“元”的字段，他们正在向其中提取文档内容（不太可能，我知道）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:03:50.690

您是否尝试将[XPath 参数](http://wiki.apache.org/solr/ExtractingRequestHandler#XPath)添加到默认值：

```
<str name="XPath">/xhtml:body</str> 
```

您可以使用 url 快速测试它，如上面的链接所示。

# c# - 如何从 XobotOS 构建/使用锐化？

> ID：10415650
> 
> 赞同：5
> 
> 时间：2012-05-02T14:19:50.527
> 
> 标签：c#, java, android, sharpen-tool, xobotos

我克隆了 git://github.com/xamarin/XobotOS.git 并按照[https://github.com/xamarin/XobotOS/blob/master/sharpen/README中的说明进行操作](https://github.com/xamarin/XobotOS/blob/master/sharpen/README)

显然，mono 的团队已经预先构建了与自述说明相关的版本，因为添加提供的站点目录不会在 eclipse 的“安装新软件”对话框中添加锐化插件。我想它必须建造。

那么如何构建这个eclipse插件呢？它似乎没有任何 ant/maven 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:37:55.220

你必须使用 Eclipse 3.4 [http://www.eclipse.org/downloads/packages/eclipse-classic-342/ganymedesr2](http://www.eclipse.org/downloads/packages/eclipse-classic-342/ganymedesr2)

但是我在源代码中有错误。

# shell - 以管理员身份运行批处理文件 - Windows 7 - 来自网络文件系统的命令“运行方式”

> ID：10415653
> 
> 赞同：7
> 
> 时间：2012-05-02T14:19:56.487
> 
> 标签：shell, batch-file, cmd, dos, administration

我需要设置程序安装程序的交付。

该程序有一个 program_installer.exe 和一个文件夹，我在创建安装程序时无法将其包含在安装程序中。

因此，当用户需要安装程序时，我会通过 MAIL 向他发送一个 BATCH 文件

```
@echo off
if DEFINED PROGRAMFILES(X86) (
SET TOOL_INSTALL_DIR="%PROGRAMFILES(X86)%\myfolder"
) else (
SET TOOL_INSTALL_DIR="%PROGRAMFILES%\myfolder"
)

MKDIR %TOOL_INSTALL_DIR%
copy /y \\rk0012352\Public\lkh5iwwh.m4s %TOOL_INSTALL_DIR%

START %PROGRAMFILES%\program_installer.exe 
```

问题是，当用户执行 BATCH 并运行 COPY 命令时，在 Windows 7 上该命令将失败，因为他没有 ADMIN 权限。

如何使该复制命令在 XP 和 7 上都以管理员身份运行？

你可能会说：当用户收到带有 INSTALL.BAT 的 EMAIl 时，他不能点击 RUN AS ADMINISTRATOR 吗？

不幸的是，答案是他们中的大多数人不会这样做，只是抱怨它不起作用。而且Outlook等很多邮件客户端会提示“打开”“保存”选择面板，大部分用户会直接点击打开（产生无权限错误）

“运行方式”命令需要指定机器的管理员名称，我不知道如何在每台计算机上调用管理员用户。

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T14:26:26.497

这有点棘手，但可以做到。

首先，您必须（从批处理文件）知道用户是否是管理员。如果是，那么您可以简单地继续安装。如果不是，您可以运行另一个 cmd.exe 实例以管理员身份运行批处理文件（使用`runas`命令）。

要检测用户是否是管理员，请查看这篇文章：[http](http://www.tomshardware.co.uk/forum/169421-36-determine-batch-file-user-administrator) ://www.tomshardware.co.uk/forum/169421-36-determine-batch-file-user-administrator （有完整的代码来提升批次本身也是如此）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-14T14:01:21.110

不是一回事。

如果您在管理员组中，则提升您自己的权限范围与仅在您的范围内运行是有区别的。

简单地使用`runas /user:username@domain.com program.exe`似乎与右键单击然后选择“以管理员身份运行”不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-17T09:53:48.773

在 PowerShell 中有一种[方法可以做到这一点：](https://stackoverflow.com/a/7691218/1500805)

```
PS> Start-Process powershell -Verb runAs 
```

# http - 在 Gradle 中传递代理信息是怎么回事？

> ID：10415654
> 
> 赞同：2
> 
> 时间：2012-05-02T14:20:01.033
> 
> 标签：http, proxy, installation, gradle, proxy-server

在 gradle 中，我如何设置我可以传递给我的代理服务器需要的信息，例如 ANT -Dhttp.proxyHost=myproxyhost -Dhttp.proxyPort=8080 -Dhttp.proxyUser=C770 -Dhttp.proxyPassword=gagapwd -Dhttp.auth。偏好=基本

为 ANT 和 MAVEN 和 JSVN 工作定义，今天测试。为gradel这样做根本没有。

gradle 会以某种方式自行处理吗？如果是，那么我在哪里可以找到对 gradle 源代码中“代理”这个词的一点参考？我找不到任何这样的词。有人可以解释一下吗？

我在一封电子邮件中被 gralde 破解等指示在 gradle.properties 下设置以下 systemProp.http.proxyHost=myproxyserver.com systemProp.http.proxyport=8080 systemProp.http.proxyUser=C770 systemProp.http .proxyPassword=orbxorbx systemProp.http.nonProxyHosts=localhost systemProp.http.auth.preference=基本

两种设置都绝对没有效果——我用 WireShark 检查它——我猜我知道为什么：因为过去我经常像我的 svnkit 一样检查 svn；然后在糟糕的一天，maven pom 和 ant 构建在哪里；用更好的东西代替。毕业。由于 gradle.bat，无论您如何修剪它，都无法在我的代理服务器后面工作，也没有将上述给出的任何信息传递给线路，我为 gardle 感到非常难过。这不是我开始相信 gradle 所需要的。另外 - 我试图下载最新的 gradle 工具包。-all 和 -bin 工具包版本正在交付我的 zip 档案，但文件意外结束；结果 ; 无法解压。而 gradle-src 套件真的很聪明。今天 gradle 怎么了？

Josef - 非常难过 MVN 和 ANT 已从 svnkit 项目中移除，并被替换为在对现有长期项目进行 svn 更新后不起作用的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:44:02.433

我通过在 JAVA_OPTS 环境变量中设置适当的选项来实现这一点。假设您在 Windows 中在命令提示符下输入这样的内容应该可以解决问题。

```
set JAVA_OPTS=-Dhttp.proxyHost=myproxy.com -Dhttp.proxyPort=8080 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:37:20.583

是的-使用带有代理的gradle同样的问题。

[http://forums.gradle.org/gradle/topics/proxy_error-1r4f6](http://forums.gradle.org/gradle/topics/proxy_error-1r4f6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T12:57:36.393

目前正在按照以下步骤为我工作：

1.  确保文件 $HOME/.gradle/gradle.properties 和 $YOUR_GRADLE_PROJECT_ROOT_FOLDER/gradle.properties 之间没有重复。在这种情况下，只保留其中一个并删除另一个，您选择哪个文件。

2.  按以下方式在 gradle.properties 中配置您的 http 和 https 代理

-

```
systemProp.http.proxyHost=your proxy host, ie: 123.456.789.10
systemProp.http.proxyPort=your proxy port, ie: 8080
systemProp.http.proxyUser=username
systemProp.http.proxyPassword=password
systemProp.http.nonProxyHosts=localhost|other.host.to.ignore
systemProp.http.keepAlive=true

systemProp.https.proxyHost=your proxy host, ie: 123.456.789.10
systemProp.https.proxyPort=your proxy port, ie: 8080
systemProp.https.proxyUser=username
systemProp.https.proxyPassword=password
systemProp.https.nonProxyHosts=localhost|other.host.to.ignore
systemProp.https.keepAlive=true 
```

[http://www.gradle.org/docs/current/userguide/build_environment.html](http://www.gradle.org/docs/current/userguide/build_environment.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T15:35:23.577

我收到了很多来自 maven 的警告，它无法通过我们要求 NTLM-v2 登录的公司代理服务器。

由于我在实验室顶部使用 Cntlm 作为第一个代理服务器，并给他用户名、密码和域名，然后将其作为服务启动；然后通过 service.xlm 重定向 maven 以在不同端口作为代理服务器与 Cntlm 对话，并将其全部转发到公司代理，从那时起 Cntlm 管理登录并作为客户端访问真正的代理，maven 不在乎只要所有都通过第一个和第二个代理并从 maven-central 迅速重新调整，就可以与 Cntlm 作为代理交谈。

也许您应该尝试使用 Gradel 的 Cntlm，如果它不起作用，请告诉我。

# windows-phone-7 - windows phone 7 必应地图

> ID：10415656
> 
> 赞同：0
> 
> 时间：2012-05-02T14:20:13.977
> 
> 标签：windows-phone-7

我在我的 wp7 应用程序中显示 RoadMode 上的 bing 地图。但我想在我的 wp7 应用程序中使用**显示咖啡馆或类似地点的 bing 地图。**那个 bing 地图的模式是什么？我怎样才能获取那个地方的位置信息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-18T05:36:02.347

您需要使用 BING Maps 的不同 API 来获取数据。像下面的 bing 地图的兴趣点或空间数据服务一样，该链接将帮助您使用空间数据服务从 Bing 地图获取数据

[http://msdn.microsoft.com/en-us/library/hh757509.aspx](http://msdn.microsoft.com/en-us/library/hh757509.aspx)

# eclipse - Eclipse：与编辑器键盘快捷键链接？

> ID：10415661
> 
> 赞同：15
> 
> 时间：2012-05-02T14:20:28.553
> 
> 标签：eclipse, keyboard-shortcuts

Eclipse 中是否有“与编辑器链接”功能的键盘快捷键？

如果没有，有什么方法可以在 Eclipse 上使用键盘快捷键映射 ui 元素？（自定义插件/RCP 代码等？）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T14:24:37.633

默认情况下没有，但您可以自己定义。进入 Preferences -> General -> Keys，然后在搜索框中输入“link”。您需要“使用编辑器切换链接”命令。然后，您可以通过填写下面的“绑定”框来定义键绑定。

# .net - 从 SQL 数据库中保存的数据生成代码：我应该在存储过程中还是在 Web 服务器上进行

> ID：10415662
> 
> 赞同：0
> 
> 时间：2012-05-02T14:20:29.237
> 
> 标签：.net, sql-server, performance, code-generation, sql-server-2008-r2

我有一个 SQL Server 2008 数据库，其中包含我需要用来生成代码的数据*（实际上它是一个 SQL 脚本，我需要生成以填充另一个具有不同结构的数据库，但请不要被它误导 - 这个是一个关于基本上基于数据生成一大块文本的问题）。*

我担心性能。因此，一般来说，是否会更高效

a)**在 SQL Server 上的存储过程中生成代码：**

**优点：**数据不必通过网络移动，因此延迟问题更少（尽管必须发送完整的文本块，这可能更大）

**缺点：**操作数据很麻烦（游标），并且在 T-SQL（我想）中操作字符串比在 Web 服务器（.NET）上慢

b)**检索我需要的数据并在 Web 服务器上生成代码：**

**优点：**更快、更灵活的字符串处理

**缺点：**从 SQL 框中取回所有数据

为了这个问题，让我们考虑使用大约 100,000 行的数据

* * *

**更新：** 我没有提到我的目标是从表单提交生成脚本并将结果直接发送回浏览器。因此，在这种情况下，使用 SSIS 之类的解决方案可能会受到限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:27:18.167

研究使用 SSIS（SQL Server 集成服务）。SSIS 允许转换，并且应该能够处理大型集合的批处理等。

当然，如果您需要立即响应操作，那么 SSIS 不会有太大帮助。如果转换不是非常复杂并且可以在单个查询中完成，您可以选择使用 CLR，正如这里已经建议的那样。我编写了一个名为 SQL# (SQLsharp) 的 SQL CLR 函数和过程库，可以在以下网址找到：[http ://www.SQLsharp.com/](http://www.SQLsharp.com/)并且大部分是免费的。您可以使用 DB_BulkCopy 存储过程来执行此操作（同样，取决于转换的复杂性）。DB_BulkCopy 过程在免费版本中可用，它基于 .Net SqlBulkCopy 类（如果您想编写自己的 SQL CLR 方法）。但这确实允许您定义一个查询，该查询将用于将结果集发送到目标连接（SQL Server 或 Oracle）。此过程处理批处理操作，因此如果您不希望传输 100,000 行，则不会是单个事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:28:15.763

从纯粹的经验水平来看，SQL Server 执行字符串操作比代码慢得多。

我重构了几个程序，这些程序从一个源获取数据，对其进行操作，然后将其放入另一个源，第一个，最佳性能提升是通过使用 DataSets 和 System.Text.StringBuilders 将所有字符串操作转移到代码中来实现的。

我终于找到了一些文档来支持这一点：http: [//msdn.microsoft.com/en-us/library/ms131075.aspx](http://msdn.microsoft.com/en-us/library/ms131075.aspx)

> 此外，与 Transact-SQL 相比，托管代码在过程代码、计算和字符串操作方面具有决定性的性能优势。计算密集型且不执行数据访问的 CLR 函数最好用托管代码编写。

也就是说，尝试两者并对它们进行基准测试然后权衡您的选择可能没有什么坏处。除了性能之外，还要考虑可读性、未来维护的便利性等因素。如果在基准测试时性能差异不是那么好，其他因素可能会变得更重要。

**阅读您对其他答案的其他注释，*可能*是安全性而不是性能应该是决定因素。** 一般来说，在代码中操作字符串并清理任何可能不受信任的用户输入以防止 SQL 注入、XSS 等要容易得多。在纯 T-SQL 中转义字符串是可能的，但在代码中，您可以根据输入创建参数化查询，[这（根据 OWASP）比](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)转义字符串更好。这在 T-SQL 中几乎是不可能的。

来自 OWASP：

> 第三种技术是在将用户输入放入查询之前对其进行转义。如果您担心将动态查询重写为准备好的语句或存储过程可能会破坏您的应用程序或对性能产生不利影响，那么这可能是您的最佳方法。但是，与使用参数化查询相比，这种方法是脆弱的。仅应谨慎使用此技术以具有成本效益的方式改造遗留代码。从头开始构建的应用程序或需要低风险容忍度的应用程序应该使用参数化查询来构建或重写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T14:31:41.170

我更喜欢字母 A，但我建议您忘记在 SQL Server 中使用游标和操作数据。从现有数据库中获取您的数据并使用 C# 代码将其转换为 XML，然后如果您想转换您的数据结构，您可以使用 XSLT 转换 XML，XSLT 以强大的数据转换而广为人知。

希望[这个](http://www.w3schools.com/xsl/default.asp)链接可以帮助你。

# vba - 遍历工作表 1 中的网格，在工作表 2 的列中返回带有公式的单元格引用

> ID：10415671
> 
> 赞同：1
> 
> 时间：2012-05-02T14:20:41.660
> 
> 标签：vba, excel

我在表 1 中有一个非常大的网格，有 365 列，每一列是一年中的一天，从 1 月 1 日开始。

这些行对应于制造地点，其中也有很多。

表 2 中没有任何内容，但我想要的是表 2 第一列中的一个大列表，其中包含网格的所有单元格引用。

更具体地说，我希望 VBA 插入`IF(ISBLANK("A1","","A1))`，以便如果单元格为空，则不返回任何内容，如果有值，则返回该值。

我仍在学习 VBA，但我不确定如何在第一列上运行循环，然后移动到第二列，运行循环....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:36:06.837

如果你真的想使用 vba，你可以这样做将公式复制到整个范围：

```
Sub doIt()

  Dim lastRow As Long

  lastRow = Sheets("Sheet1").UsedRange.Rows.Count

  With Sheets("Sheet2")
    .Range("A1:NA" & lastRow).FormulaR1C1 = "=IF(ISBLANK(Sheet1!RC),"""",Sheet1!RC)"
  End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:40:16.430

尝试这个 ：

```
Sub copyFilledCells()

Dim r As Range, c As Range
Dim position As Integer

position = 1

Set r = ActiveWorkbook.Sheets("Sheet_1").Range("A:AZ")

For Each c In r
    If (c.Value <> "") Then
        ActiveWorkbook.Sheets("Sheet_2").Range("A" & position).Value = c.Value
       ' Try this if you want to insert the cell address as Formula
       'ActiveWorkbook.Sheets("Sheet_2").Range("A" & position).Formula = "=" & c.Parent.Name & "!" & c.Address(External:=False)

        position = position + 1
    End If

Next c

End Sub 
```

# java - 如何把地图的钥匙放进去在 JSP 上我有下一个问题。在 JSP 中，我写了下一个 <select name="subject"><option>${subjects.get(subjectID).getName() }</option></select> 我从 Map 中获取值

> ID：10415676
> 
> 赞同：0
> 
> 时间：2012-05-02T14:20:53.880
> 
> 标签：java, jsp, servlets, map, jstl

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:30:39.260

假设“主题”是你的`HashMap`

```
<select name='subject'>  
   <c:forEach var="subject" items="${subjects}">
       <option id="${subject.key}" value="${subject.value.getName()}">${subject.value.getName()}</option>   
   </c:forEach>
</select> 
```

如果您想`Key`作为值传递，请更改为`value="${subject.key}"`.So，在提交表单时。您的 r 键将被传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T14:26:26.897

```
<select name='subject'>    
    <c:forEach items="${yourMap}" var="yourEntry">
        <option>${yourEntry.key}</option>
    </c:forEach>
</select> 
```

或者，如果您想访问密钥上的属性。

```
<select name='subject'>    
    <c:forEach items="${yourMap}" var="yourEntry">
        <option>${yourEntry.key.theProperty}</option>
    </c:forEach>
</select> 
```

`.value`您可以使用代替访问关联的值`.key`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:45:46.460

```
<select name='subject'>
    <c:forEach items="${subjects}" var="subject" >                  
        <option value="${subject.key}">
            ${subject.value.getName()}
        </option>                    
    </c:forEach>
</select> 
```

然后在 servlet 上我做了下一个

```
Integer subjectIdByName = Integer.valueOf(request.getParameter("subject")); 
```

# networking - 如何知道 DHCP 返回的所有信息？

> ID：10415680
> 
> 赞同：1
> 
> 时间：2012-05-02T14:21:12.953
> 
> 标签：networking, dhcp

如果我是正确的，DHCP 也会返回 SNTP 地址。CMD（DOS ...）中是否有类似于“测试”DHCP的命令，意思是我可以运行它并告诉我DHCP返回的所有内容？IP 地址、网关地址、SNTP 地址等。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:01:19.303

首先，确保在您的 dhcp 服务器中配置了 SNTP 地址。

您可以安装wireshark 并调试dhcp 数据包并查找选项4（这是SNTP 服务器的选项）。

这在dos中是看不到的

问候

# jquery - 以编程方式在绘图上设置标记

> ID：10415683
> 
> 赞同：2
> 
> 时间：2012-05-02T14:21:24.290
> 
> 标签：jquery, jqplot

我想知道是否可以以编程方式突出显示绘图上的标记。

我有一个折线图和一个单独的数据网格。

单击折线图中的标记将突出显示数据网格中的相关行，单击数据网格中的行将突出显示折线图中的相关标记。

在下面的示例中，我可以完成第一个要求。`$('#chartdiv').bind('jqplotDataClick', function (ev, seriesIndex, pointIndex, data)`返回可用于查找相关数据网格行的数据点。

但我被困在相反的地方。

在我的示例中，为简单起见，我用按钮替换了数据网格。

有没有`SetSelectedMarker`我不知道的或类似的方法？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
   <title>jqPlot examples</title>   
  <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="js/jquery.jqplot.1.0.0r1095/dist/excanvas.min.js"></script><![endif]-->
  <!-- jQuery runtime minified -->
  <script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.7.1.min.js" type="text/javascript"></script>

      <style type="text/css">        
   ul.tooltip
   {
    list-style-type:none;
    padding:0px;
    margin:0px;
   }        
      </style>

    <script class="include"  type="text/javascript" src="js/jquery.jqplot.1.0.0r1095/dist/jquery.jqplot.min.js"></script>
    <script class="include" type="text/javascript" src="js/jquery.jqplot.1.0.0r1095/dist/plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script class="include" type="text/javascript" src="js/jquery.jqplot.1.0.0r1095/dist/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
    <script class="include" type="text/javascript" src="js/jquery.jqplot.1.0.0r1095/dist/plugins/jqplot.highlighter.js"></script>

      <script type="text/javascript">
        // We use a document ready jquery function.
          $(document).ready(function () {

              // Some simple loops to build up data arrays.
              var cosPoints = [];
              for (var i = 0; i < 2 * Math.PI; i += 0.4) {
                  cosPoints.push([i, Math.cos(i)]);
              }

              var plot3 = $.jqplot('chartdiv', [cosPoints],
                {
                    highlighter: {
                        show: true
                        , showTooltip: true
                        , tooltipLocation: 'ne'
                        , tooltipAxes: 'xy'
                        , useAxesFormatters: null
                        , formatString: '<div><ul class="tooltip"><li>%.4f</li><li>%.6f</li></ul></div>'
                    },
                    title: 'Line Style Options',
                    // Series options are specified as an array of objects, one object
                    series: [
                      {
                          // Change our line width and use a diamond shaped marker.
                          lineWidth: 2,
                          color: 'red',
                          markerOptions: { style: 'dimaond', color: 'black' }
                      },
                      {
                          // Don't show a line, just show markers.
                          // Make the markers 7 pixels with an 'x' style
                          showLine: false,
                          markerOptions: { size: 7, style: "x" }
                      },
                      {
                          // Use (open) circlular markers.
                          markerOptions: { style: "circle" }
                      },
                      {
                          // Use a thicker, 5 pixel line and 10 pixel
                          // filled square markers.
                          lineWidth: 5,
                          markerOptions: { style: "filledSquare", size: 10 }
                      }
                  ]
                  , cursor: { show: true, showTooltip: true }
                }
              );

              $('#chartdiv').bind('jqplotDataClick', function (ev, seriesIndex, pointIndex, data) {
                  alert(data);
              });

              $('#button').bind("click", function () {
                  DoSomeThing(plot3);
              });
          });

          function DoSomeThing(plot) {
             // *** highlight point in plot ***
          }

    </script>
</head>
<body>

<!--plot container-->
<div id="chartdiv" style="height:400px;width:600px; "></div>
<input id="button" type="button" value="click"/>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:28:07.003

我想出了一些答案。如果@Mark 知道如何弹出荧光笔，我认为他可能知道更好的选择。由于我知道如何获得您所追求的适当位置，只是我不确定如何调用荧光笔然后在此坐标处进行绘制。

[这是我的答案。](http://jsfiddle.net/Boro/5QA8r/)

我只是以像素为单位获取网格的坐标。然后抓起高光画布在那里画一个圆圈，事先总是要求`replot()`有一个新鲜的情节。尝试使用该按钮几次，以查看它如何遍历数据的每个点。如果你知道如何改进它，例如，如何避免每次都重新绘制，那么请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:17:33.087

您可以只实现高亮插件中使用的绘图功能，如此处所示。另一种选择可能是更改插件本身并创建一个新事件或公开绘图功能等。

一旦您将鼠标移到折线图中的另一个标记上，突出显示的标记就会改变，但这是意料之中的。

当标记设置为突出显示时显示工具提示会很好。

```
function DoSomeThing(plot) {

    var hl = plot.plugins.highlighter;
    var s = plot.series[0];
    var smr = s.markerRenderer;
    var mr = hl.markerRenderer;
    mr.style = smr.style;
    mr.lineWidth = smr.lineWidth + hl.lineWidthAdjust;
    mr.size = smr.size + hl.sizeAdjust;
    var rgba = $.jqplot.getColorComponents(smr.color);
    var newrgb = [rgba[0], rgba[1], rgba[2]];
    var alpha = (rgba[3] >= 0.6) ? rgba[3]*0.6 : rgba[3]*(2-rgba[3]);
    mr.color = 'rgba('+newrgb[0]+','+newrgb[1]+','+newrgb[2]+','+alpha+')';
    mr.init();
    mr.draw(s.gridData[3][0], s.gridData[3][1], hl.highlightCanvas._ctx);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:49:08.877

如果您想更改颜色，请尝试使用新系列颜色修改您的选项字符串，因为该函数仅返回单击点。但是您必须自己手动更改颜色。

# javascript - Spotify 中的 Google Analytics（分析）——每次通话都是唯一的访问者

> ID：10415684
> 
> 赞同：0
> 
> 时间：2012-05-02T14:21:29.227
> 
> 标签：javascript, google-analytics, spotify

我在 Spotify 中使用谷歌分析框架，代码如下：

```
googletracker = sp.require("sp://import/scripts/googletracker")
...

tracker = new googletracker.GoogleTracker("XXXXXXXXX");

...

function track(pagename) {
  if(pagename !== undefined) {
    tracker.track( pagename );
  }
} 
```

问题是，每个呼叫都像来自唯一访问者一样被处理，并且来自会话的呼叫没有捆绑在一起。但问题出在哪里？这就是我的分析概述的样子：

![在此处输入图像描述](../Images/ada3f48995f6c65149622f27476c3be1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:10:40.630

由于 cookie 错误，此包装器无法正常工作。

现在在 0.8.3 中已修复此问题，但不推荐使用包装器。您现在可以直接在您的应用程序中使用 GA js。

[https://developers.google.com/analytics/devguides/collection/gajs/asyncTracking](https://developers.google.com/analytics/devguides/collection/gajs/asyncTracking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:15:48.347

如果没有看到您的代码触发的实际页面，很难判断。这是在 Spotify 上托管的？我的第一个猜测可能是 spotify 有他们自己的 GA 代码，它覆盖了你的 GA 的 cookie（我去了 spotify.com，我确实看到 GA 代码弹出......）

# java - Spring Security：部署时的 ClassNotFoundException 或 IllegalArgumentException

> ID：10415687
> 
> 赞同：5
> 
> 时间：2012-05-02T14:21:37.777
> 
> 标签：java, spring, tomcat, spring-security

我正在学习 Spring，我对 Spring Security 的实验失败了。如果我从 Eclipse 启动并部署到 Tomcat，我会得到一个**ClassNotFoundException**。将 Maven 构建 WAR 部署到独立的 Tomcat 时，我得到一个**IllegalArgumentException**。

我究竟做错了什么？

**弹簧依赖**：

*   弹簧核心 3.1.1.RELEASE
*   spring-webmvc 3.1.1.RELEASE
*   弹簧安全核心 3.1.0.RELEASE
*   弹簧安全配置：3.1.0.RELEASE
*   spring-security-web 3.1.0.RELEASE

**网页.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/security-context.xml
    </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>timetracking</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>timetracking</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

**安全上下文.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<user-service id="userService">
    <user name="user1" password="user1" authorities="USER_ROLE"/>
    <user name="user2" password="user2" authorities="USER_ROLE,ADMIN_ROLE"/>
</user-service>

<authentication-manager>
    <authentication-provider user-service-ref="userService"/>
</authentication-manager>

<http auto-config="true">
    <intercept-url pattern="/**" access="USER_ROLE"/>
</http>

</beans:beans> 
```

**来自 Eclipse 的日志**：

```
[INFO ] ContextLoader - Root WebApplicationContext: initialization started
[INFO ] XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Wed May 02 15:45:07 CEST 2012]; root of context hierarchy
[INFO ] XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/security-context.xml]
[ERROR] ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/spring/security-context.xml]; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.config.SecurityNamespaceHandler]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/core/SpringSecurityCoreVersion
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.config.SecurityNamespaceHandler]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/core/SpringSecurityCoreVersion
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:104)
at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:129)
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1414)
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1409)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
... 28 more
Caused by: java.lang.NoClassDefFoundError: org/springframework/security/core/SpringSecurityCoreVersion
at org.springframework.security.config.SecurityNamespaceHandler.<init>(SecurityNamespaceHandler.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
... 37 more
Caused by: java.lang.ClassNotFoundException: org.springframework.security.core.SpringSecurityCoreVersion
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
... 43 more 
```

**从独立 Tomcat 登录**：

```
[INFO ] ContextLoader - Root WebApplicationContext: initialization started
[INFO ] XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Wed May 02 16:02:08 CEST 2012]; root of context hierarchy
[INFO ] XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/security-context.xml]
[INFO ] SpringSecurityCoreVersion - You are running with Spring Security Core 3.1.0.RELEASE
[INFO ] SecurityNamespaceHandler - Spring Security 'config' module version is 3.1.0.RELEASE
[INFO ] AuthenticationConfigBuilder - No login page configured. The default internal one will be used. Use the 'login-page' attribute to set the URL of the login page.
[INFO ] HttpSecurityBeanDefinitionParser - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 300, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 800, Root bean: class [org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1000, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1200, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1300, Root bean: class [org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1400, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1700, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1800, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1900, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2000]
[INFO ] DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@74ece555: defining beans [userService,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#0]; root of factory hierarchy
[INFO ] DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@74ece555: defining beans [userService,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#0]; root of factory hierarchy
[ERROR] ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'org.springframework.security.web.DefaultSecurityFilterChain#0' while setting bean property 'sourceList' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.DefaultSecurityFilterChain#0': Cannot resolve reference to bean 'org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0' while setting constructor argument with key [10]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Unsupported configuration attributes: [USER_ROLE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)
    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.DefaultSecurityFilterChain#0': Cannot resolve reference to bean 'org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0' while setting constructor argument with key [10]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Unsupported configuration attributes: [USER_ROLE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:616)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 40 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Unsupported configuration attributes: [USER_ROLE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 54 more
Caused by: java.lang.IllegalArgumentException: Unsupported configuration attributes: [USER_ROLE]
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.afterPropertiesSet(AbstractSecurityInterceptor.java:155)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 61 more
May 02, 2012 4:02:09 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:45:29.017

Tomcat 的堆栈跟踪表明不支持您命名角色的方式。

在默认配置下，角色必须以前缀“ROLE_”开头。如果要保持角色的命名方式，则必须使用自定义配置。

参考：[如何在 Spring Security 中使用自定义角色/权限？](https://stackoverflow.com/questions/986892/how-do-i-use-custom-roles-authorities-in-spring-security)

# listbox - Tkinter Listbox 将焦点设置在最后一项上

> ID：10415693
> 
> 赞同：1
> 
> 时间：2012-05-02T14:22:02.290
> 
> 标签：listbox, tkinter

如何选择我的 Tkinter 列表框中的最后一项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:37:23.113

调用`selection_clear()`删除任何现有的选择，然后按`selection_set("end")`[2] 选择最后一个元素。您可能还需要调用`see("end")`以确保它已滚动到视图中。

# objective-c - 如何通过 CBCentralManager 创建与 BLE 外围设备的安全连接？

> ID：10415694
> 
> 赞同：1
> 
> 时间：2012-05-02T14:22:05.793
> 
> 标签：objective-c, ios, core-bluetooth, bluetooth-lowenergy

我是 iOS 和 Core 蓝牙的新手。我想知道的是如何创建与设备的安全连接。

我的理解是：

```
[manager connectPeripheral:peripheral options:nil] 
```

是提供用于连接 BLE 设备的 API。由此，我如何建立安全连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:34:12.887

所有 BT4.0 连接均由设备/传感器和 iOS 保护和管理，您无法控制。

BT4.0 设备也有有界和无界连接。

有界连接以某种方式与 iOS 设备“配对”。一旦有界，它们将不会与任何其他设备通信。这可确保设备始终与受限制的 iOS 设备建立安全连接。边界由操作系统 (iOS) 控制。当需要有界连接的设备与 iOS 设备通信时，iOS 设备将显示一个警报视图，询问您是否希望连接到该设备。

无限制的设备不断广播它们的服务，并允许任何 iOS 设备连接到它。操作系统不会记住设备信息，通常应用程序会存储 UUID，以便下次建立与同一设备的连接。这是大多数 BT4.0 传感器的正常/推荐方法。

注意：尽管不受限制的设备不会与 iOS 设备“配对”，但它们在任何时候都只会与单个 iOS 设备通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:01:15.480

您如何定义“安全连接”？根据低功耗蓝牙规范，当两个不同的 BLE 设备之间建立一个 BLE 连接时，该连接是安全的，并为此连接生成 Link-layer 数据包中的 AccessAddress 字段。AccessAddress 的值与其他连接的值不同。如果您想了解更多详情，请参阅第 36 页，共 138 页，蓝牙核心规范 4.0 [vol. 6]。

如果您担心有人会嗅探通过此 BLE 连接传输的数据，我不得不看到这并不容易。只有一个 BLE slave 连接到与您的 BLE 传感器相同的 Master 才能有能力嗅探您的 BLE 数据包，并且该功能在 Controller 端实现，只有少数可以访问 Controller 固件代码的公司可以启用嗅探器功能。

此外，如果您仍然担心传感器数据，Bluetooth Low Energy 还为 BLE 数据包提供加密。

# c# - 创建 ac# 工厂

> ID：10415702
> 
> 赞同：4
> 
> 时间：2012-05-02T14:22:36.123
> 
> 标签：c#, .net, design-patterns, factory

所以我不确定这是否是一个合法的工厂。我看到的大多数工厂在客户端都有这样的东西：

```
if(//something)
    factory = new Type1Factory();
else
    factory = new RegularFactory(); 
```

然后他们通过像这样创建对象`factory.Create();`

所以基本上检查你想要哪个工厂的条件就在调用代码中。我宁愿隐藏它并在工厂本身拥有条件，我想这将不再被称为工厂？

像这样的东西：

```
DateScheduleRequest request = new DateScheduleRequest();
DateScheduleBuilder dateScheduleBuilder = new DateScheduleBuilderFactory(request).Create(); 
```

根据发送到工厂构造函数的请求，`dateScheduleBuilder`对象基本上属于某种类型。

是否有另一种模式，或者这只是一种做工厂的方式？

基本上，`DateScheduleBuilder`它将是一堆其他类型的构建器继承的父类，但我的调用代码知道这个抽象类有一个方法，它不需要知道请求类型，只需知道它的事实需要将其传递给工厂并调用一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:29:30.733

我认为您在第二部分中描述了工厂模式。第一部分不是因为它依赖于调用者知道如何构建所需的对象。在您的示例中，`DateScheduleBuilderFactory`将能够知道如何解释`request`对象中的信息并返回派生自`DateScheduleBuilder`.

简而言之，就像上面所说的 Johm Dom 一样。你已经在那里了...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:33:56.683

首先，第一个片段非常好。我宁愿花时间添加功能，修复错误而不是重构它。

如果我从头开始设计这段代码，我会将`if`eg 隐藏在构造函数中。一个好的经验法则：“只要图书馆可以为消费者轻松做某事，它就应该这样做”。

第三种选择是将 if 语句移动到 vtable - 多态性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T14:45:15.973

你有什么没问题。

另一种选择是拥有工厂工厂。所以你有一个类，它有一个基于请求获取工厂实现的方法（类似于`IDateScheduleBuilderFactory GetDateSceduleBuilderFactory(request)`然后消费者调用`Create()`来`IDateScheduleBuilderFactory`获取构建器对象。

它稍微复杂一些，但意味着您有一个具有单一职责的类（即一个类的工作是将请求转换为正确类型的工厂，而其他类是实际不同类型的工厂），您将能够更容易地测试这一点。现在给定特定请求，您将如何测试是否使用了正确类型的工厂？您必须通过 create 的结果来确定这一点，而不仅仅是检查 `GetDateSceduleBuilderFactory()`方法返回的类型。

您还可以让您当前的工厂公开一个方法，例如`public bool CanHandleRequest(request)`允许每个工厂决定它是否是特定请求的正确工厂，然后工厂工厂可以在其构造函数中接受工厂集合，并且在`GetDateSceduleBuilderFactory(request)`调用该方法时它可以循环遍历所有工厂，询问每个工厂是否可以处理请求，并在找到可以处理请求的工厂时返回。

这样做的好处是，当您添加新工厂时，您不需要更改任何逻辑，您可以只使用一些代码来获取所有通过反射实现接口的工厂，然后当您添加新工厂时，它们将自动被选中向上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:50:43.033

严格来说，它不是工厂，因为它不使用类型来决定创建哪个对象，但它是如此常见（且有用）的习惯用法，以至于 Head First Design Patterns 书将其称为简单工厂。

在我看来这是完全合法的，并且在正确的地方非常有用（例如，如果创建策略），

# sql-server - 将分区模式与用户定义的函数一起使用

> ID：10415704
> 
> 赞同：0
> 
> 时间：2012-05-02T14:22:42.493
> 
> 标签：sql-server, partitioning, user-defined-functions

我正在使用 SQL Server 2008 R2。我正在尝试一些分区的东西并且有一些问题。

这是一个非常简单的例子：

```
CREATE PARTITION FUNCTION MyPartitionFunction (int)
AS RANGE LEFT FOR VALUES (1,2)

CREATE PARTITION SCHEME MyPartitionScheme AS
PARTITION MyPartitionFunction ALL TO ([PRIMARY])

CREATE FUNCTION CalcPartitionValue (@value int) RETURNS int
WITH SCHEMABINDING AS
BEGIN
   if @value % 2 = 0 return 1
   return 2
END

CREATE TABLE MyTable
(ID INT NOT NULL)
ON MyPartitionScheme (dbo.CalcPartitionValue(ID)); 
```

我想使用用户定义的函数作为分区函数的输入。有什么办法可以让这个工作吗？

我知道可以使用用户定义的函数创建计算列。但是对超过 3 亿行的表进行模式更新不会那么快。这就是为什么我要问是否可以直接使用用户定义的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:25:49.053

尝试持久计算列并将函数用作列公式。在函数定义中使用“With Schemabinding”选项，它会正常工作。

# c# - Autofac：注册依赖于其他类的特定实例的类

> ID：10415708
> 
> 赞同：4
> 
> 时间：2012-05-02T14:22:56.433
> 
> 标签：c#, dependency-injection, autofac

我只是在学习 Autofac 并试图了解如何解决服务之间的依赖关系。

假设我有以下课程：

```
class ClassA {}
class ClassB {}
class ClassC {}

class Classes
{
    public Classes(ClassA classA, ClassB classB, ClassC classC)
    {
        ...
    }
} 
```

并且我想注册这些类，以便它模仿以下行为。

```
var classA1 = new ClassA("A1");
var classB1 = new ClassB("B1");
var classC1 = new ClassC("C1");
var classes1 = new Classes(classA1, classB1, classC1);

var classA2 = new ClassA("A2");
var classB2 = new ClassB("B2");
var classC2 = new ClassC("C2");
var classes2 = new Classes(classA2, classB2, classC2); 
```

简而言之，取决于`Classes`和 的特定实例。我怎么做？`ClassA``ClassB``ClassC`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:06:55.320

如果您希望能够创建 Classes 类的多个唯一实例，我将使用Autofac的[参数传递功能构建我的注册。](http://code.google.com/p/autofac/wiki/ResolveParameters)我的代码看起来像

```
var builder = new ContainerBuilder();
builder.Register((c,p) => new ClassA(p.Named<string>("a")));
builder.Register((c,p) => new ClassB(p.Named<string>("b")));
builder.Register((c,p) => new ClassC(p.Named<string>("c")));
builder.Register((c,p) => new Classes(
    c.Resolve<ClassA>(new NamedParameter("a", p.Named<string>("ClassA"))),
    c.Resolve<ClassB>(new NamedParameter("b", p.Named<string>("ClassB"))),
    c.Resolve<ClassC>(new NamedParameter("c", p.Named<string>("ClassC")))));

var container = builder.Build();
var classes = container.Resolve<Classes>(
    new NamedParameter("ClassA", "AAAA"),
    new NamedParameter("ClassB", "BBBB"),
    new NamedParameter("ClassC", "CCCCC")); 
```

前三个寄存器调用告诉 Autofac，当它想要构建 ClassA（或 B 或 C）的实例时，它必须使用从名为“a”（或“b”或“c）的 NamedParameter 实例中提取值") 并将该值传递给 ClassA 的构造函数。NamedParameter 对象将作为 Resolve 调用的一部分传递，例如`Resolve<ClassA>(new NamedParameter("a", "AAAA"))`.

最后的 register 调用告诉 Autofac 它必须解析 ClassA、ClassB 和 ClassC 的实例，并将这些实例传递给 Classes 的构造函数。为了解决这些依赖关系，Autofac 必须从传入的一些 NamedParameter 实例中提取值，并将这些值传递到新 NamedParameter 实例中的 Resolve 中。

有两点需要注意。

1.  可以在类的 Register 调用中重用 NamedParameter 实例，而不是创建新实例。匿名函数的 p 参数是一个 IEnumerable，所以它可能是可能的。
2.  此代码使用最新版本的 Autofac (2.6.1) 进行了测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T14:41:56.693

最简单的方法是使用生命周期范围。像这样注册您的课程：

```
builder.RegisterType<ClassA>().InstancePerLifetimeScope();
builder.RegisterType<ClassB>().InstancePerLifetimeScope();
builder.RegisterType<ClassC>().InstancePerLifetimeScope(); 
```

而不是像这样创建一个生命周期范围：

```
var scope = container.BeginLifetimeScope(); 
```

`scope`现在您可以像从容器中解析实例一样，但是每个范围都有一个单独的`ClassA`,`ClassB`和实例`ClassC`。

# java - 增加一个作为日期的长值

> ID：10415709
> 
> 赞同：2
> 
> 时间：2012-05-02T14:23:05.113
> 
> 标签：java, calendar

我有一个表示日期的长值，即已将日期转换为长，现在我想将长值本身增加到下一个日期，如何对长值执行操作以获得下一个日期。

```
long endDate=1454756400000 
```

表示今天的日期长值，单位为毫秒（格林威治标准时间 00:00:00，1970 年 1 月 1 日）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:25:37.990

代表作是什么？自某个时代以来的秒数？

如果是秒，可以每天加秒（60*60*24）？然后隐蔽回可打印。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:26:46.690

您使用日历类

```
Calendar rightNow = Calendar.getInstance();
rightNow.add(Calendar.DATE, 1); //add one day

long nextDayInMillis = rightNow.getTimeInMillis() 
```

日历的 Java API：http: [//docs.oracle.com/javase/7/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:29:57.143

1 天 = 86 400 000 毫秒

所以：

```
final long DAY_TO_MS = 86400000;
long today = 1454756400000;

long tomorrow = today + DAY_TO_MS; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T14:32:05.633

```
long endDate=1454756400000L;
Calendar calendar = Calendar.getInstance();
calendar.setTime(new Date(endDate));;
calendar.add(Calendar.DAY_OF_YEAR, 1);
Date newDate = calendar.getTime();
long newEndDate = newDate.getTime(); 
```

使用固定的 long 值表示一天有多长会错过闰秒（和其他极端情况）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T14:25:46.647

长长值 = ...;

java.util.Date dateValue = new java.util.Date(longvalue);

现在，您可以增加日期，然后将其转换回长。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T14:27:26.373

如果我明白你想要什么：

```
long endDate=1454756400000L;
        GregorianCalendar calendar = new GregorianCalendar();
        calendar.setTime(new Date(endDate));
        calendar.add(Calendar.DAY_OF_MONTH, 1);
        System.out.println(calendar.getTime().getTime()); 
```

这将在日期上增加 1 天并输出相应的长时间

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-02T14:29:47.870

你可以使用java的日历：

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(<YourLongValue>); 
```

然后添加：

```
calender.add(Calendar.DAY, 1); 
```

# jquery - 当“http://www.google.com/jsapi”脚本也被链接时，jquery ui 将无法工作

> ID：10415719
> 
> 赞同：3
> 
> 时间：2012-05-02T14:23:50.610
> 
> 标签：jquery, jquery-ui, google.load

我正在使用 jquery UI`div`在悬停时向上滑动。它本身可以正常工作，但是当它`<script src="http://www.google.com/jsapi" type="text/javascript"></script>`也安装时我无法正常工作，（我将它用于`.load`页面上其他地方的某些内容）如果我删除任何一个脚本它们工作正常，但 jquery UI 一起停止在职的。

这些是我正在使用的脚本——你知道最好的解决方法吗？提前致谢。

```
<script src="http://www.google.com/jsapi" type="text/javascript"></script>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T14:29:20.840

使用 Google jsapi 时，必须仅使用 load 方法加载 jquery 和 jquery UI：

```
 <script type="text/javascript">
      google.load("search", "1");
      google.load("jquery", "1.4.2");
      google.load("jqueryui", "1.7.2");
    </script> 
```

（来自[https://developers.google.com/loader/](https://developers.google.com/loader/)）

这就是重点：当您使用 Google API（和服务器）时，您不需要自己包含（和提供）jquery 文件。

# c# - 在 c# 中访问可为空值的最佳方法

> ID：10415722
> 
> 赞同：9
> 
> 时间：2012-05-02T14:23:55.787
> 
> 标签：c#, nhibernate, nullable, hibernate-criteria

在我们的 C# 代码中，我们已经在尝试访问变量之前测试了它是否为空。

```
if (myInt.HasValue) {
  var yourInt = myInt;

  // do something with yourInt
} 
```

我的问题：使用可空属性是否有区别，就好像它不是在经过测试之后与以下一样？

```
if (myInt.HasValue) {
  var yourInt = myInt.Value; // see the difference?

  // do something with yourInt
} 
```

这只是一个偏好问题，还是`.Value`即使在可空对象通过了该测试之后使用也有明显的原因或性能影响？

**更新**

我扩展了我的第二个示例，我们已经使用 进行了测试`HasValue`，但是我们使用它`.Value`来访问该值。

**更新 2**

我更新了使用`var`s 的示例，因为在我们的代码中我们实际上并没有使用`int`类型，很抱歉这个糟糕的示例。在我们的代码中，我们实际上只是使用 NHibernate Criteria 查询中的对象 -`Expression.Eq("thing", myInt)`查询。

这不会引发编译错误。我试图在不涉及 NHibernate 的情况下简化示例以找到问题的根源。抱歉，如果这会使某些答案无效。我只是想看看如果我们强制使用另一种方法来查找值而不是显式调用，是否会影响性能`.Value`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-02T15:31:18.663

更新：这个问题是[我在 2012 年 12 月 20 日的博客的主题](http://ericlippert.com/2012/12/20/nullable-micro-optimizations-part-one/)。我将在 2013 年 12 月下旬和 2013 年 1 月上旬对此优化提出更多想法。感谢您提出的好问题！

* * *

> 我只是想看看如果我们强制另一种方法来查找值而不是显式调用 .Value 是否会影响性能

首先，如果你有一个性能问题，那么**你是唯一可以回答这个问题的人**，你可以通过*秒表两种方式来回答，看看哪个更快*。为什么人们经常在 StackOverflow 上问这个问题对我来说是个谜。这就像在说“嘿，互联网，这是两匹马的照片。哪一匹跑得更快？” 我们应该怎么知道？ **与他们比赛，然后你就会知道。**他们是*你的马。*

其次，您在一般意义上提出了错误的问题。问题不应该是“对性能有影响吗？”，而应该是“对性能有*不可接受*的影响吗？” 再说一次，我们不知道您可以接受或不接受什么。

第三，您在非常具体的意义上提出了错误的问题。在这里要问的正确问题是，如果您对纳米级优化感兴趣*，使用 Value getter 或 GetValueOrDefault 方法哪个更快？*

答案是通常 GetValueOrDefault 方法比 Value 更快。为什么？因为区别在于：

```
if (this.HasValue) return this.value; else throw new Exception(); 
```

和

```
return this.value; 
```

那里有什么区别？ **抖动可能不会内联前一种方法**，因此您要付出**高达几纳秒**的代价来进行额外的调用间接。

如果几纳秒的惩罚与您相关，那么（1）恭喜您编写了一个仅在几微秒内运行的程序，以及（2）您将需要*非常仔细地*测量以查看是否有任何真正的差异，因为纳秒非常小。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-02T14:24:37.337

> 这只是偏好问题还是有明显的原因

```
int yourInt = myInt.Value; 
```

`HasValue`如果is会抛出`false`。

因此，如果您不想体验`InvalidOperationException`s，请先检查`HasValue`。

注意

```
int yourInt = myInt; 
```

是不合法的（编译时失败），因为没有从`int?`to的隐式转换`int`（如果值是`null`; 没有合理的值来转换`int?`to）。你可以说：

```
int yourInt = (int)myInt; 
```

请注意，这将抛出 if `myInt`is `null`，就像访问`Value`.

最后一点，如果您可以接受默认值，您可以使用[null 合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)并说：

```
int yourInt = myInt ?? defaultValue; 
```

这相当于：

```
int yourInt;
if(myInt.HasValue) {
    yourInt = myInt.Value;
}
else {
    yourInt = defaultValue;
} 
```

> 这不会引发编译错误。我试图在不涉及 NHibernate 的情况下简化示例以找到问题的根源。抱歉，如果这会使某些答案无效。我只是想看看如果我们强制使用另一种方法来查找值而不是显式调用.Value，是否会对性能产生影响。

不。性能在这里完全无关紧要，尤其是在涉及数据库的情况下。这绝对不会有任何有意义的性能差异，也肯定不会成为瓶颈。只写最清晰的代码。坦率地说，我觉得`.Value`是最清楚的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:26:46.967

此代码无效：

```
if (myInt.HasValue) {
  int yourInt = myInt;

  // do something with yourInt
} 
```

如果您不想使用该`Value`属性，则必须改用显式强制转换，或空合并运算符，或`GetValueOrDefault`，例如

```
int yourInt = (int) myInt; 
```

无论如何，演员表最终被编译为对该`Value`属性的访问，IIRC。

所以是的，即使你测试了一个值是非空的，你仍然需要做*一些事情*来将它转换为基础值——只是为了让它编译。编译器不会尝试分析“可能的无效性”（例如，想象一下它是否是一个实例变量，它可能由于访问之间的线程而改变）。它只是遵循允许您对可空表达式执行的操作的规则，并且隐式转换为不可空类型*不是*您被允许执行的操作之一......

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-02T14:29:02.513

您不能直接调用是有原因的：当为空时，`.Value`您期望 的值是多少？`yourInt``myInt`

当您希望它具有默认值（例如：0）时，您可以在可为空的 int 上创建一个扩展方法，例如`.ValueOrDefault()`.

# git - Git 管道命令找出给定修订版中哪些文件已更改

> ID：10415723
> 
> 赞同：5
> 
> 时间：2012-05-02T14:23:57.057
> 
> 标签：git, githooks

我创建了一个钩子，当开发人员将更新推送到他的共享存储库时，它会发送通知电子邮件。此电子邮件包含已更改文件的列表，例如：

```
A   __classes/Page/Activity.php
M   __config/Scheme.php 
```

我使用以下 bash 生成：

```
$(git diff "$newrev"^ "$newrev" --name-status) 
```

这工作正常。但是，我现在正尝试将所有这些移植到著名的[post-receive-email 挂钩](http://git.kernel.org/?p=git/git.git;a=blob_plain;f=contrib/hooks/post-receive-email;hb=HEAD)。这个钩子确实有一个`hooks.showrev`配置指令，但我认为这只允许在命令`%s`中使用*一次修订号（ ）。*所以这不起作用：

```
showrev = "git diff %s^ %s --name-status" 
```

必须有一个“管道”命令可以做到这一点。谁能指出我正确的方向？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:37:03.607

如何使用以下内容？

```
showrev = "git show --name-status --pretty=format: %s" 
```

`git show`是瓷器而不是管道，但我认为这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:51:19.593

`git whatchanged -1 <rev>`可能是一个很好的起点，并且有许多用于按摩输出格式的附加选项。不确定你是否能得到你上面引用的格式，但你应该能够得到类似的东西。

# entity-framework - 具有通用对象类型的 Fluent API 复合外键

> ID：10415727
> 
> 赞同：0
> 
> 时间：2012-05-02T14:24:15.233
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, fluent-interface

我有一个组织类和一个用户类，如下所示，并且我希望能够为每个单独分配一个地址 - 不需要两个单独的多对多表用于 AddressUser 和 AddressOrganization、AddressAnything 等。原因是我可能有多个实体，我想为其分配一个地址，并且不希望每个需要地址记录的单个实体都有一个中间连接表。

我也不想为需要与其关联的地址的每个实体存储像 Address.OrganizationId 或 Address.UserId 这样的外键。

有没有办法 Fluent API 或 Code-First Data Annotations 可以容纳某种具有对象类型的复合通用外键？

像 DomainObjectType 表？

**域对象类型：**

```
public class DomainObjectType
{
    [Key]
    public int Id { get; set; } // seeded

    public string ObjectType { get; set; } // User or Organization
} 
```

DomainObjectType 将被播种：

```
var objTypes = new List<DomainObjectType>
  { 
      new DomainObjectType() { Id = 1, ObjectType = "User" },
      new DomainObjectType() { Id = 2, ObjectType = "Organization" }
  };
objTypes.ForEach(c => context.DomainObjectTypes.Add(c));
context.SaveChanges(); 
```

**组织：**

```
public class Organization
    {    
        // Primary key
        [Key]
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }

        #region Navigation Properties

        public virtual ICollection<User> Users { get; set; }
        public virtual ICollection<Address> Addresses { get; set; }

        #endregion

    } 
```

**用户**

```
public class User
{
    [Key]
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int OrganizationId { get; set; }

    [ForeignKey("OrganizationId")]
    public virtual Organization Organization { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
} 
```

**地址**

```
public class Address
{
    // Primary Key
    public int Id { get; set; }
    public string Address1 { get; set; }
    public string Address2 { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip { get; set; }
    public string AddressType { get; set; }

    #region Foreign Keys

    // not completely sure about this? (maybe move to many-to-many "join" table)
    public int DomainObjectId { get; set; } // Composite key; would be either an OrganizationId or UserId
    public string DomainObjectTypeId { get; set; } // Composite key

    #endregion

    #region Navigation Properties

    public virtual ICollection<Organization> Organizations { get; set; }
    public virtual ICollection<User> Users { get; set; }

    #endregion

} 
```

**流利的 API 东西：**

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // Configure Code First to ignore PluralizingTableName convention
        // If you keep this convention then the generated tables will have pluralized names.
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        // one-to-many Organization-to-Users
        modelBuilder.Entity<User>()
            .HasRequired(u => u.Organization)
            .WithMany(o => o.Users)
            .HasForeignKey(u => u.OrganizationId);

        // what goes here for generic AddressDomainObjectType?
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:49:40.857

您可以通过为这些“其他实体”创建一个基类来实现您想要的 - 在“其他实体”和“其他实体”之间只有一个多对多表`Address`，例如：

```
public abstract class DomainObjectWithAddresses
{
    public int Id { get; set; }

    public virtual ICollection<Address> Addresses { get; set; }
}

public class User : DomainObjectWithAddresses
{
    // other properties but without Id which is inherited from base class
}

public class Organization : DomainObjectWithAddresses
{    
    // other properties but without Id which is inherited from base class
}

public class Address
{
    public int Id { get; set; }
    // other properties

    public virtual ICollection<DomainObjectWithAddresses> DomainObjects
                                                                 { get; set; }
} 
```

使用 Fluent API 进行映射：

```
modelBuilder.Entity<DomainObjectWithAddresses>()
    .HasMany(d => d.Addresses)
    .WithMany(a => a.DomainObjects)
    .Map(x =>
    {
        x.ToTable("DomainObjectAddresses");
        x.MapLeftKey("DomainObjectId");
        x.MapRightKey("AddressId");
    });

modelBuilder.Entity<User>()
    .ToTable("Users");           // TPT inheritance mapping

modelBuilder.Entity<Organization>()
    .ToTable("Organizations");   // TPT inheritance mapping 
```

你`DbContext`有一个`DbSet`基本类型：

```
public DbSet<DomainObjectWithAddresses> DomainObjects { get; set; } 
```

我不喜欢它。我更愿意为与地址具有多对多关系的每种类型引入多个连接表。我怀疑在域模型中引入抽象只是为了在数据库中保存一些表是一个好主意。这个抽象`DomainObjectWithAddresses`类是一个非常技术性的（“table-savings-helper”）工件，在您的领域模型中没有任何价值。**对我来说，说一个用户有**地址，一个组织**有**地址，而不是说一个用户**是**一个有地址的对象，一个组织**是**一个有地址的对象，这听起来要自然得多。从长远来看，这只会使您的模型变得复杂。

# android - 为大屏幕启动 AVD

> ID：10415732
> 
> 赞同：0
> 
> 时间：2012-05-02T14:24:36.147
> 
> 标签：android

我想针对大型设备测试我的应用程序。我已经使用 -scale 160 dpi 参数启动了 /layout-large/ 文件夹和 AVD(WVGA854)，但由于某种原因，它没有选择正确的布局，而是选择了 /layout/ 文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:43:24.173

大意味着至少 640dp x 480dp，注意“dp”，而不是“像素”。

您的 WVGA854 为 854 像素，因此 160 dpi 您应该变大（854dp 大于 640dp）

您确定要使用 160dpi 启动吗？您是在使用 eclipse 插件并从那里启动，还是从命令行启动？大多数具有 854 的设备可能都在 hdpi (~240dpi) 附近，因此请确保您没有从中获得任何预设。它是否在任何地方显示屏幕尺寸，如果是这样，那就是一个提示。

另请注意，由于 Android 3.2“大”等不是执行此操作的首选方式：http: [//developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts) 简而言之，它现在与宽度有关。

# java - 使用 TLS 证书到 Oracle 数据库的 JDBC 连接

> ID：10415733
> 
> 赞同：3
> 
> 时间：2012-05-02T14:24:37.070
> 
> 标签：java, oracle, jdbc

我正在尝试在 java 中编写一个连接类以使用 jdbc 驱动程序连接到 oracle 数据库，但我想保护用于连接到 oracle 数据库的 jdbcurl/username/password 等参数。

我必须使用 TLS 证书概念来连接到 java 中的 oracle 数据库。我试图寻找一个可行的例子，但找不到。

谁能给我一个如何实现它的想法，并且后期我还必须向它添加连接池概念。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T14:27:13.950

有关详细信息，请参阅下面链接的白皮书。

> JDBC URL 必须使用*tcps*协议才能在 JDBC Thin 驱动程序中激活 SSL。
> 
> 例如，以下 URL 激活 SSL：
> 
> ```
> jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=tcps)(HOST=servername
>      )(PORT=2484))(CONNECT_DATA=(SERVICE_NAME=servicename))) 
> ```

此答案假定您已经在 oracle 服务器上正确配置了 TLS。如果没有，请参阅[SSL With Oracle JDBC Thin Driver](http://www.oracle.com/technetwork/database/enterprise-edition/wp-oracle-jdbc-thin-ssl-130128.pdf)白皮书。

本白皮书还包括更高级的选项，如身份验证、密码选择等。

# active-directory - AD 链接服务器查询在一台服务器上工作而在另一台服务器上失败？

> ID：10415736
> 
> 赞同：0
> 
> 时间：2012-05-02T14:24:43.217
> 
> 标签：active-directory, linked-server

我正在获取要加入我的应用程序安全用户列表的普通用户 Jane 列表。

我正在将数据库从一台服务器移植到新服务器，此代码在旧服务器中有效，在新服务器中失败:)

select * from OPENQUERY(ADSI, 'SELECT cn, company, department, displayname, distinctname, givenname, HomeDirectory, HomeDrive, mail, manager, name, samaccountname, sn, title, UserPrincipalName, phonenumber FROM ''LDAP://DC=OurName ,DC=OurPlace'' WHERE objectCategory = ''person'' AND objectClass = ''user'' ' ) AS A

新服务器将开始接收列表，您可以在显示界面中看到它。然后它就消失了，然后它将显示此错误：消息 7330，级别 16，状态 2，第 1 行无法从链接服务器“ADSI”的 OLE DB 提供程序“ADsDSOObject”中获取行。

它似乎是链接服务器的相同设置。旧的拉了 1000 行。

我应该看什么？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:09:56.093

我想你和我一样有一个用于活动目录的链接服务器。链接服务器有一个安全上下文，您应该在其中设置查询活动目录时将使用的用户和密码。

您用于链接服务器的用户可能不同，没有足够的权限查询您的 AD。

# fluent-nhibernate - Fluent NHibernate 一对多无法插入（外键约束）

> ID：10415737
> 
> 赞同：2
> 
> 时间：2012-05-02T14:24:47.103
> 
> 标签：fluent-nhibernate, nunit, one-to-many

**使用NUnit**测试我的**Fluent NHibernate**映射时出现错误。当 Fluent NHibernate在持久化它的子对象（**ContactType ）之前尝试在数据库中持久化一个对象（** **Contact** ）时会出现问题，从而给我一个外键违规：

 ******```
NHibernate.Exceptions.GenericADOException : could not insert: Contact [...]
----> System.Data.SqlClient.SqlException : The INSERT statement conflicted with 
the FOREIGN KEY constraint [...] with table ContactType 
```

**编辑：修改供应商映射以在 HasMany() 上使用 Inverse()。还提供了我的映射测试示例。**

现在，细节。

我有一个有很多**联系人**（一对多）的**供应商。****Contact**与另一个表**ContactType**具有多对一的关系。请记住，我在这里简化了模型，以便我们可以专注于问题。

 ******```
public class SupplierMap : ClassMap<Supplier>
{
        public SupplierMap() 
        {
            Table("Supplier");
            LazyLoad();
            Id(x => x.Id).GeneratedBy.Identity().Column("id");
            HasMany(x => x.Contacts).KeyColumn("supplierId").Cascade.All().Inverse();
        }
}
public class ContactMap : ClassMap<Contact> 
{
    public ContactMap() 
    {
        Table("Contact");
        LazyLoad();
        Id(x => x.Id).GeneratedBy.Identity().Column("id");
        References(x => x.ContactType).Column("contactTypeId");
        References(x => x.Supplier).Column("supplierId").Cascade.All();
    }
}
public class ContactTypeMap : ClassMap<ContactType> 
{

    public ContactTypeMap() {
        Table("ContactType");
        LazyLoad();
        Id(x => x.Id).GeneratedBy.Identity().Column("id");
    }
} 
```

现在，当我测试**ContactMap**时，测试运行良好，没有错误。但是，当我运行 SupplierMap 测试时，这就是我得到错误的地方。正如预期的那样，当我运行 ContactMap 测试时，我在跟踪中得到了类似的东西：

```
INSERT INTO ContactType [...]
INSERT INTO Contact [...]
SELECT [...]
[...] 
```

ContactMap 测试：

```
[Test]
    public void CanCorrectlyMapContact()
    {
        new PersistenceSpecification<Contact>(Session)
    .CheckProperty(c => c.Id, 1)
    .CheckReference(c => c.ContactType, new ContactType() { Id = 1, Archived = false, DescriptionEn = Constants.LOREM_IPSUM_255, DescriptionFr = Constants.LOREM_IPSUM_255, NameEn = Constants.LOREM_IPSUM_50, NameFr = Constants.LOREM_IPSUM_50 })
    .CheckReference(c => c.Title, new Title() { Id = 1, Archived = false, NameEn = Constants.LOREM_IPSUM_255, NameFr = Constants.LOREM_IPSUM_255, SortOrder = 0})
    .CheckReference(c => c.Region, new Region() { Id = 1, Archived = false, NameEn = Constants.LOREM_IPSUM_128, NameFr = Constants.LOREM_IPSUM_128, SortOrder = 0 })
    .VerifyTheMappings();
    } 
```

但是，对于**SupplierMap**测试，我尝试先插入**Contact**（而不尝试插入**ContactType**）。

供应商地图测试：

```
[TestFixture]
public class SupplierMapTest : DatabaseSetup
{
    private IList<Contact> tmpList;

    public SupplierMapTest()
   {
       Contact tmpContact = new Contact()
       {
           Id = 1,
           FirstName = Constants.LOREM_IPSUM_128,
           LastName = Constants.LOREM_IPSUM_128,
           Address = Constants.LOREM_IPSUM_128,
           City = Constants.LOREM_IPSUM_128,
           Email = Constants.LOREM_IPSUM_128,
           FaxNumber = Constants.PHONE_NUMBER_50,
           PhoneNumber = Constants.PHONE_NUMBER_50,
           PostalCode = Constants.POSTAL_CODE_10,
           Archived = false
       };
       tmpContact.ContactType = new ContactType { Id = 1, Archived = false, DescriptionEn = Constants.LOREM_IPSUM_255, DescriptionFr = Constants.LOREM_IPSUM_255, NameEn = Constants.LOREM_IPSUM_50, NameFr = Constants.LOREM_IPSUM_50 };
       this.tmpList = new List<Contact>();
       this.tmpList.Add(tmpContact);
   }

    /// <summary>
    /// Verify if the maping is successfull
    /// </summary>
    [Test]
    public void CanCorrectlyMapSupplier()
    {

        new PersistenceSpecification<Supplier>(Session)
        .CheckProperty(x => x.Id, 1)
        .CheckList(x => x.Contacts, this.tmpList)
        .VerifyTheMappings();
    } 
```

此测试导致本文顶部出现错误。

在此先感谢您的帮助。如果需要，我还可以提供更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:59:55.770

```
HasMany(x => x.Contacts).KeyColumn("supplierId").Inverse(); 
```

看到[这里](http://notherdev.blogspot.de/2012/04/nhibernates-inverse-what-does-it-really.html)了解更多信息************

# java - 为什么 PriorityQueue 不像队列那样工作？

> ID：10415738
> 
> 赞同：7
> 
> 时间：2012-05-02T14:24:51.593
> 
> 标签：java, stack, queue, priority-queue

我正在使用`PriorityBlockingQueue`优先级字段。在我的测试中，我使用`System#currentTime()`了优先级——相同的优先级是通过计算机获得的速度如此之快以至于毫秒是相同的（或者更像是 PC 上的毫秒有误差范围）。

当优先级相同时，队列就好像它是一个堆栈，这看起来很奇怪。当元素的优先级相同时，是否有另一种方法可以使队列像普通队列一样（即 FIFO 而不是 LIFO 行为）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T14:27:05.027

> 此类上的操作不保证具有相同优先级的元素的顺序。如果您需要强制执行排序，您可以定义自定义类或比较器，它们使用辅助键来打破主要优先级值的关系。

`PriorityBlockingQueue`文档[本身会](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)告诉您这一点，以及如何在需要时解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:27:11.080

我认为优先级队列不能保证获得相等元素的顺序。一种选择是使优先级更复杂 - 在推送元素及其优先级时推送队列大小的负数，并比较这些值以获得相同优先级的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T15:39:03.840

只需使用您自己的 Comparator 创建一个 PriorityBlockingQueue 并考虑创建时间（请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html#PriorityBlockingQueue(int, java. util.Comparator）](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html#PriorityBlockingQueue%28int,%20java.util.Comparator%29)）。您可能必须将键从简单的 Date 更改为 Date 和 counter 的类，后者将随着每次创建而全局递增（新键类的静态字段）；它不是真正的先进先出，而是先创建先出。

或者，只需实现您自己的 PriorityQueueFifo 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T14:47:09.940

另一种解决方案是在您的测试中维护一个用于优先级的计数器，并在每次插入时增加该计数器。这样，您的优先级队列将在您的测试中具有 FIFO 排序，但它看起来像一个任意优先级队列。

# gdb - 当我尝试恢复时，gdb 给了我无限的“程序接收信号 SIGTSTP”

> ID：10415739
> 
> 赞同：5
> 
> 时间：2012-05-02T14:24:56.337
> 
> 标签：gdb, pthreads

我在 gdb 中运行 vlc 并使用 ^Z 中断它（因​​为 ^C 不工作）。在检查了一些堆栈帧和变量后，我尝试使用“cont”来恢复程序，但它一直给我

```
Program received signal SIGTSTP, Stopped (user). 
[Switching to Thread 0x7fffd8d8e700 (LWP 19285)] 
0x00007ffff700247c in pthread_cond_wait@@GLIBC_2.3.2 ()
    from /lib64/libpthread.so.0 
```

实际上，只有第一行是相同的。LWP id 在 19285 和 19284 之间循环，地址和功能也交替出现。

我试过“cont -a”，但它说“-a”在全停模式下毫无意义。

恢复两个线程的正确程序是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:13:37.743

虽然调用“cont”足够多次（每个线程一次）应该恢复应用程序，但最适合我从 ^Z 恢复的方法是

```
signal SIGCONT 
```

请注意，先尝试“cont”然后再尝试“signal SIGCONT”可能会使 gdb 处于奇怪的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T16:05:58.767

我相信这是因为没有处理 SIGTSTP 信号。当您恢复执行时，程序会看到信号并再次停止。

根据[GDB 的文档](http://www.delorie.com/gnu/docs/gdb/gdb_120.html)

> 或者，如果信号为零，则继续执行而不给出信号。当您的程序因信号而停止并且在使用 continue 命令恢复时通常会看到信号时，这很有用；`signal 0`导致它在没有信号的情况下恢复。

因此，要回答您的问题，请尝试`signal 0`在 GDB 中执行该命令，它应该会恢复执行。

此外，如果您不希望程序在 SIGTSTP 或任何信号处停止，您可以使用该`handle`命令定义 GDB 在收到信号时的行为。[在此处](http://www.delorie.com/gnu/docs/gdb/gdb_39.html)查看有关如何执行此操作的更多说明。

# jquery - 在flexslider中动态改变#container div的高度

> ID：10415742
> 
> 赞同：1
> 
> 时间：2012-05-02T14:25:03.890
> 
> 标签：jquery, flexslider

我正在使用 flexslider 并且容器 div 有一个背景图像，它的作用就像一个设置在它底部的边框。我需要做的是让容器 div 像实际的 flexslider div 一样响应。因此，当您从右向左缩小窗口时，容器 div 的高度应该改变高度，如果这有意义的话。图像尺寸为 1680x748。目前容器 div 的高度为 805px，宽度设置为 100%。所以宽度并不重要。只需要改变高度。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-10T09:50:46.937

尝试这个 。

**平滑高度：真，**

```
function _flexslider(){
  $('.flexslider').flexslider({
    animation: "slide",
    animationLoop: false,
    pauseOnHover: true,
    smoothHeight: true,
    itemWidth: 280,
    itemMargin: 0,
    minItems: 1,
    maxItems: 1,
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T23:59:13.483

选择`.flexslider .slides img`器已`max-width`设置为 100%，但添加`height: 748px;`到 CSS 中，它会将滑块带到该高度，这意味着您的所有图像都应该适合。

```
.flexslider .slides img {
     max-width: 100%; 
     height: 748px; 
     display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T23:24:59.443

所以我遇到了同样的问题，我注意到我正在将图像宽度切割到确切的 itemWidth 值。诀窍是让实际图像比该值大得多。因为如果插件无法将图像缩放得更大，那么就是实际大小。它可以减小其宽度以保持纵横比。

# actionscript-3 - as3 动态类在运行时转换

> ID：10415745
> 
> 赞同：1
> 
> 时间：2012-05-02T14:25:16.497
> 
> 标签：actionscript-3, class, dynamic, runtime

这就是我得到的：

```
public var myDynamicClass:MovieClip; 
```

我想在运行时将其转换为此类。

```
public class MyWishClass extends MovieClip{
    public var myId:String;
} 
```

一个解决方案是做下一件事：

```
 myDynamicClass.myId = null as String; 
```

问题在于我在下一行中变得错误：

```
myDynamicClass instanceOf MyWishClass 
```

我能做些什么？

**编辑：** 基本上我在运行时更改动态类，通过添加他的属性，我想将它转换为另一个已经获得这些属性的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:57:05.887

找到了，

答案是否定的:(这是不可能的......

我所做的唯一工作是创建新的 MyWishClass 并将 myDynamicClass 传递给他，所以他基本上是在扭曲他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:28:49.587

不完全理解你的问题，但是..

你不能这样做吗？

```
public var myDynamicClass:MyWishClass;
/* --- */
myDynamicClass = new MyWishClass();
myDynamicClass.myId = "some string"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:12:05.813

您将其键入为 MovieClip，因此它将始终是 MovieClip，除非您将其创建为 MyWishClass 或按以下方式键入：

```
public class MyWishClass extends MovieClip{
    public var myId:String;
} 
```

然后在其他地方：

```
public var myDynamicClass:MovieClip = new MyWishClass();

MyWishClass(myDynamicClass).myId = "test"; 
```

或将其创建为：

```
public var myDynamicClass:MyWishClass = new MyWishClass(); 
```

# java - 用户定义的异常是已检查或未检查的异常

> ID：10415747
> 
> 赞同：3
> 
> 时间：2012-05-02T14:25:28.003
> 
> 标签：java

在我的 Web 应用程序中创建了一个用户定义的异常扩展了 Exception.Is it Checked or unchecked exception

```
public class InvalidDataException extends Exception{

        public InvalidDataException() {
        super();
        // TODO Auto-generated constructor stub
    }
    /**
     * @param arg0
     */
    public InvalidDataException(String message) {
        super(message);
        // TODO Auto-generated constructor stub
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T14:26:51.230

只有那些属于 的子类的异常才被[`RuntimeException`](http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimeException.html)认为是*unchecked*。

你的不是，因此是一个*检查*异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:44:46.543

这是一个检查异常类。任何扩展 Exception 类的类都是用户定义的**Checked**异常类。任何扩展 RuntimeException 的类都将是**Unchecked**异常类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:35:35.600

您可以使用[IllegalArgumentException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html)。

此异常未检查，而您的异常已检查为 @duffymo 和 @aix 评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-05T15:31:19.490

用户定义的异常是已检查的异常，因为它们是使用 Exception 类扩展的，该类是所有发生异常的超类，而未检查的异常是使用运行时异常扩展的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-04T02:06:51.483

有两个类调用为部分检查异常。

1.) 异常类

2.) 可抛出类

它调用部分检查，因为它们的一些子类是未检查的。所以你已经扩展了 Exception 类然后它是 Checked 异常

# ruby-on-rails - 使用 cancan 测试特定用户

> ID：10415748
> 
> 赞同：0
> 
> 时间：2012-05-02T14:25:31.123
> 
> 标签：ruby-on-rails, ruby, cancan

如何使用 cancan 为这种情况设置适当的权限级别？

帖子有很多评论。

帖子的作者可以删除任何评论。

评论的作者只能删除他/她的评论。

目前我有：

```
authorize!(:remove_comment, @post) 
```

和

```
can :remove_comment, Post, :user_id => user.id 
```

目前它只允许帖子的作者删除评论，但我希望评论者也删除他/她自己的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:37:49.123

你不能做类似的事情：

```
can :destroy, Comment, :user_id => user.id 
```

# python - 如何将字符串处理成子列表层

> ID：10415752
> 
> 赞同：8
> 
> 时间：2012-05-02T14:25:44.530
> 
> 标签：python, list, recursion, sublist

这是示例表格，我稍后会尝试用文字解释。我有一个分解字符串的列表...

说

```
[a, a, a, b, a, a, b, a, c, a, b, a, a, c, a, c, a] 
```

其中 b 是标准 1，c 是标准 2

我想把它分解成这样的列表：

```
[a, a, a, [b, a, a, [b, a, c], a, [b, a, a, c], a, c], a] 
```

所以我想处理字符串，这样当我遍历它时，如果项目符合条件 1，则打开一个新列表，如果项目符合条件 2，则关闭列表并返回上一级。

我试过做这样的事情，但效果不是很好。

```
def sublist(self, l):
  for line in list:
    if not b:
    self.data.append(line)
  else:
    sublist(l[line:])       #<-----  not sure how to recurse it. 
```

我之前在stackoverflow上看到过将列表分成大小相等的列表，但没有一个使用一组标准进入子列表。

我对python相当陌生，所以我对数据结构和迭代器工具不太熟悉。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T14:42:09.590

干得好：

```
lst = "aaabaabacabaacaca"

def go(it):
    for x in it:
        if x == 'b':
            yield [x] + list(go(it))
        else:
            yield x
            if x == 'c':
                break 

print list(go(iter(lst))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:33:39.127

```
addlist = []
alllists = []
for item in mylist:
    if item == b:
       newlist = [item]
       addlist.append(newlist)
       alllists.append(addlist)
       addlist = newlist
    elif item == c:
       addlist.append(item)
       addlist = alllists.pop()
    else:
       addlist.append(item) 
```

只要您`b`和`c`分隔符平衡，上述方法就可以工作；特别是，如果你有多余的`c`s，你将有一个堆栈下溢。

虽然我经常喜欢递归解决方案，但这具有使堆栈显式的优点，在这种情况下，在我看来，这会导致更容易 grok 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:06:46.987

有一个堆栈：

```
def parseList(inList):
    stack = [[]]
    for element in inList:
        if element == 'b':
            stack.append([element])
            stack[-2].append(stack[-1])
        elif element == 'c':
            stack.pop().append(element)
        else:
            stack[-1].append(element)
    return stack[0] 
```

如果 'c's 比 'b's 多，这将中断

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T05:05:15.470

这个问题有很好的答案，我特别喜欢 thg435 的使用生成器的递归解决方案和 Marcin 的迭代解决方案，它将元素添加到引用列表中。

我还发现一些解决方案修改输入列表或使用全局状态令人不安。恕我直言，这违背了递归解决方案的真正精神。下面是我对 Python 中纯函数式递归解决方案的尝试——当然，有更多惯用和有效的方法来解决这个问题，但我想写一个答案，因为我会用纯函数式编程语言编写它：

```
# lst: the list to be processed
# acc: accumulated result
# stk: temporary stack
def process(lst, acc, stk):
    if not lst:
        return acc
    elif lst[0] == 'b':
        return process(lst[1:], [lst[0]], [acc] + stk)
    elif lst[0] == 'c':
        return process(lst[1:], stk[0] + [acc + [lst[0]]], stk[1:])
    else:
        return process(lst[1:], acc + [lst[0]], stk)

lst = ['a', 'a', 'a', 'b', 'a', 'a', 'b', 'a', 'c', 'a', 'b', 'a', 'a', 'c', 'a', 'c', 'a']
process(lst, [], [])
> ['a', 'a', 'a', ['b', 'a', 'a', ['b', 'a', 'c'], 'a', ['b', 'a', 'a', 'c'], 'a', 'c'], 'a'] 
```

需要注意的一些细节：

*   我不使用局部变量或全局变量，只使用函数参数来跟踪状态
*   我不使用赋值运算符
*   没有迭代器或循环用于遍历输入列表，只有递归
*   It's a tail-recursive solution, although that's irrelevant in Python
*   Only expressions are used; operations like `append` or `extend` (which return `None`) are avoided
*   No lists are ever modified (including the input list), instead new lists are created as needed (using array slices for that)
*   It's a rather short and elegant solution, but that might be a subjective opinion :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T14:38:14.237

以下将做到这一点：

```
a, b, c = 1, 2, 3

def sublist(l):
  ret = []
  while l:
    val = l.pop(0)
    if val == b:
      ret.append([val] + sublist(l))
    else:
      ret.append(val)
      if val == c: break
  return ret

l = [a, a, a, b, a, a, b, a, c, a, b, a, a, c, a, c, a]
print l
print sublist(l) 
```

请注意，这具有修改`l`. 通过复制来改变它是微不足道的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T16:10:06.497

在真正的递归风格中，您可以执行以下操作：

```
x = yourlist
i = 0
def lets_parse():
    global i
    fnlist = []
    while i < len(x)
        if x[i] == 'c':
            fnlist.append(x[i])
            i += 1
        return fnlist
        elif x[i] == 'b':
            i += 1
            f = lets_parse()
            f.insert(0, 'b')
            fnlist.append(f)
        else:
            fnlist.append(x[i])
            i += 1
return fnlist

print lets_parse() 
```

注意全局变量的使用。许多批评者可能会反对它，因为它是糟糕的编码风格。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T16:44:22.300

```
import ast    
mylist = '[a, a, a, b, a, a, b, a, c, a, b, a, a, c, a, c, a]'
mylist = mylist.replace('a','"a"')
mylist = mylist.replace('b','["b"')
mylist = mylist.replace('c','"c"]')
print ast.literal_eval(mylist)
#Output:
['a', 'a', 'a', ['b', 'a', 'a', ['b', 'a', 'c'], 'a', ['b', 'a', 'a', 'c'], 'a', 'c'], 'a'] 
```

# java - Java RESTful 服务 - QueryParam 和 PathParam 在使用方面有什么区别？

> ID：10415755
> 
> 赞同：19
> 
> 时间：2012-05-02T14:26:02.127
> 
> 标签：java, rest

QueryParam 和 PathParam 在使用方面有什么区别？

我知道可以使用它们两者将数据传递给服务。PathParam 是前面的数据吗？在 URL 和 QueryParam 中是 ? 之后的名称值数据。但我想知道这些究竟是如何使用的。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-02T14:45:00.390

`@QueryParam`用于访问 URL 的查询字符串中的键/值对（? 之后的部分）。例如在 url`http://example.com?q=searchterm`中，您可以使用`@QueryParam("q")`来获取`q`.

`@PathParam`用于匹配URL的一部分作为参数。例如，在表单的 url 中`http://example.com/books/{bookid}`，您可以使用它`@PathParam("bookid")`来获取一本书的 id。

有关JAX-RS 中使用的示例，请参阅[此页面。](https://cwiki.apache.org/confluence/display/WINK/JAX-RS+Parameters)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T22:06:00.093

在实践中，这个问题可能没有一个正确的答案，因为在“野外”中使用了许多不同的 URL 方案。然而，查看它的一种有用方法是 REST URL 处理。在 REST（REpresentational State Transfer）中，其想法是能够唯一标识您想要提供访问权限的每个资源。在常见的 REST 方案中，可以将 URL 的路径部分视为 N 空间中的一组坐标（即 x, y, z => //myApp/x/y/z），查询参数为进一步的说明符。这些进一步的说明符可用作不完整路径说明的搜索条件，以返回匹配资源的列表。

有关 REST URL 的更多示例，请参阅[以下问题](https://stackoverflow.com/q/4024271/433348)。

**编辑：** @marcok 有一个很好的技术答案，但是随着您更新的评论的曝光，您似乎对何时选择一个而不是另一个更感兴趣。通常，如果您要创建“纯”RESTful API，则作为路径一部分的任何内容都应通过其身份唯一标识资源。通常，这可能会使您的 URL 以 ID 值结尾，作为唯一标识资源的路径的一部分。

但是，如果您的 API 直接公开了按属性搜索/过滤的能力（可能不包括 ID），那么您更有可能将其编码为查询参数。

这些只是示例，对于一个好的 API 需要什么，更具体地说，一个 API 需要多么纯 RESTful，有不同的看法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-10T08:20:41.767

@QueryParam：用于以键值对的形式获取参数，根据QueryParam中的key可以从URL中获取key的值。例如 example.com/id=searchParam

**@QueryParam("id") 然后值将是 searchParam**

@PathParam：用于从 URL 中获取参数（如果参数包含 URL）。例如 abc.com/searchParam/{empId}

**@PathParam("empId")**

# ruby-on-rails - 访问时不存在的关联记录如何创建？

> ID：10415757
> 
> 赞同：4
> 
> 时间：2012-05-02T14:26:03.787
> 
> 标签：ruby-on-rails, model, associations

我该怎么做这个伪代码？我想防止例如“nil 类的未定义方法 zip_code”，因为我的现有用户已经有了我们的个人资料。因此，当调用 user.profile 时，如果它不存在，我想创建它。

```
class User < ActiveRecord::Base
...
  # Associations:
  has_one :profile

  # example call current_user.profile.zip_code
  def profile
    if self.profile exists <-- use super?
      self.profile
   else
     # create association record and return it
     self.build_profile.save
     self.profile
   end
  end
...
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:51:37.283

你可以使用`after_initialize`回调：

```
class User
  # ..
  after_initialize do
    self.profile ||= self.build_profile
  end
  # ..
end 
```

# asp.net - TextBoxFor 默认文本的 MVC asp.net VB 语法

> ID：10415758
> 
> 赞同：3
> 
> 时间：2012-05-02T14:26:06.883
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

如何为 TextBoxFor 元素设置默认文本（在创建视图中）：

```
 @Html.TextBoxFor(Function(model) model.QualityM1s, New With {Key .text="0"}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:28:06.973

不完全确定你的意思是*default text*。如果你想用一些值预初始化文本框，你可以使用一个普通的文本框：

```
@Html.TextBoxFor(Function(model) model.QualityM1s) 
```

然后您可以在将模型传递给视图之前将相应的视图模型属性设置为控制器操作中的默认值：

```
model.QualityM1s = "some default text"
return View(model) 
```

然后，TextBoxFor 助手将使用您的模型属性的值来填充相应的文本框。

如果要应用*水印*效果，有两种可能性：

*   使用新的 HTML 5[占位符属性](http://davidwalsh.name/html5-placeholder)（这显然假设客户端浏览器支持它）：

    ```
    @Html.TextBoxFor(Function(model) model.QualityM1s, New With { Key .placeholder = "some default text"}) 
    ```

*   使用 JavaScript。例如有[很多 jQuery 水印插件](http://www.google.com/#hl=en&safe=active&output=search&sclient=psy-ab&q=jquery+watermark&oq=jquery+watermark&aq=f&aqi=&aql=&gs_l=hp.3...644.2657.0.2737.16.8.0.0.0.0.0.0..0.0...0.0.35cra7PVypQ&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=a2177ce5120cae1&biw=1680&bih=945)。

# html - 当 iFrame 从本地 html 文件加载本地 html 文件时，Chrome 的未来版本是否可能支持 contentWindow/contentDocument？

> ID：10415759
> 
> 赞同：3
> 
> 时间：2012-05-02T14:26:08.580
> 
> 标签：html, dom, iframe, dns, local

当我在 Chrome 的 iFrame (frame.src=) 中让本地 html 加载另一个本地 html 文件时，我无法通过 contentWindow 或 contentDocument 访问其文档（即使 contentWindow 的验证是文档本身），因为 Chrome 似乎没有当涉及本地 html 文件时不允许它。此功能是否可能会在 Chrome 的下一个版本中发生变化？注意：它适用于 Safari 和 Opera、IE、WebKit（contentDocument 或 contentWindow）。这似乎是一个安全问题，但 contentDocument 和 contentWindow 来自 W3C。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:28:45.453

这是因为 Chrome 限制称为同源策略。默认情况下，本地文件被认为属于不同的来源，并且不允许从另一个来源访问。要解决此问题，您可以使用`--allow-file-access-from-files`命令行开关启动 Chrome 应用程序。

# ubuntu - 使用 gnuplot 烛台移动数据

> ID：10415766
> 
> 赞同：0
> 
> 时间：2012-05-02T14:26:30.347
> 
> 标签：ubuntu, plot, gnuplot

几个数据文件看起来像

```
1 342 345 564 
2 254 543 432
3 341 988 343
4 454 324 342
... 
```

都具有相同的第一列。我打算使用 gnuplot 烛台来绘制数据。这是我正在使用的功能：

```
plot 'file1.txt' using 1:3:2:6:5:xticlabels(7) with candlesticks title '1' whiskerbars,
'file2.txt' using 1:3:2:6:5:xticlabels(7) with candlesticks title '2' whiskerbars lt 1 linecolor 3, 
'file3.txt' using 1:3:2:6:5:xticlabels(7) with candlesticks title '3' whiskerbars lt 1 linecolor 7 
```

但是，这些行是重叠的，我希望 file1.txt 数据从例如开始。10、file2.txt数据从12开始，file3.txt数据从14开始。每个增量应该是10。这样，我希望获得不同文件的行分组，并在它们之间进行分隔。

这怎么可能实现？gnuplot 适应或输入文件适应都是可以接受的（后者意味着我首先自动将一个文件的第一列更改为 10 的倍数，另一个自动更改为 10 的倍数加 2...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:46:55.603

如果要操作第一列，可以使用`using`. 例如：

```
 plot 'datafile' using 1:2, \
      'datafile' using (10*$1):2, \
      'datafile' using ((10+2)*$1):2

... 
```

第一个图的 x 值等于第一列，第二个图的 x 值等于`10*first_column`，第三个图的 x 值等于`12*first_column`...

# java - 检查对象的空白变量

> ID：10415771
> 
> 赞同：1
> 
> 时间：2012-05-02T14:26:42.527
> 
> 标签：java, string

我有一个 pojo 课

```
class Foo{
 String a
 String b
 .
 .
 // nearly 250 data members
 // all have getters and setter

} 
```

现在，当我创建类对象时，如何检查对象中的任何数据成员是否为空白

我正在使用以下方法

```
public  boolean clearBlank()
{

    if(StringUtils.isBlank(this.getA()))
        return true;
    if(StringUtils.isBlank(this.getB()))
        return true;
    if(StringUtils.isBlank(this.getC()))
        return true;
    .
    .
    .
    // similarly for all 250 data member
    return false;

} 
```

通过调用所有 250 个对象的 getter 来检查是否有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T14:27:51.670

是的，您可以使用 Java 反射来遍历对象的所有字段并获取它们的值来进行比较。

像这样：

```
public static boolean hasBlankVariables(Object obj) throws IllegalArgumentException, IllegalAccessException {
    for (Field field : obj.getClass().getDeclaredFields()) {
        if (!field.isAccessible()) {
            field.setAccessible(true);
        }
        // Danger!
        String str = (String) field.get(obj);
        if (StringUtils.isBlank(str)) {
            return true;
        }
    }
    return false;
} 
```

# powershell - Powershell：从用户交换已发送文件夹中提取 SentTo？

> ID：10415775
> 
> 赞同：0
> 
> 时间：2012-05-02T14:26:55.633
> 
> 标签：powershell, com, exchange-server

有没有办法从用户交换已发送文件夹中提取 SentTo 电子邮件地址？我们使用的是 Exchange 2007，我拥有管理员权限。纯文本就可以了。

谢谢

# java - 警报和 baseAdapter [android 应用程序]

> ID：10415787
> 
> 赞同：1
> 
> 时间：2012-05-02T14:27:35.120
> 
> 标签：java, android, listview, adapter, alarm

我有一个`listView`in `Activity(A)`，其中包含两个按钮。创建行时应禁用其中之一，并在警报响起时启用它。

我编写了一个代码来执行此操作，但是当警报响起时，它会启用按钮并将我`activity (A)`移至`Activity (A)``getView()`

即使警报将我转移到`Activity (A)`... ，我怎样才能启用它？

注意：我的适配器扩展：`baseAdapter`

任何建议提前谢谢

莫奈拉...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:20:07.257

您的适配器包含一些数据。您应该为每一行提供属性，指示是否应启用按钮。例如 boolean isButtonEnabled = false。当闹钟设置为 isButtonEnabled = true; 在 getView 检查按钮是否启用，并根据它启用或禁用按钮

# php - 尝试向亚马逊 MWS 提交产品 Feed 时出现错误 13043

> ID：10415792
> 
> 赞同：0
> 
> 时间：2012-05-02T14:27:57.070
> 
> 标签：php, amazon-mws

我正在使用 MWS 向亚马逊发送产品提要。

这是我使用以下类型发送的（在产品提要中，而不是价格提要中）：_POST_PRODUCT_DATA_

为什么我收到错误消息说我的价格不好？

```
<?xml version="1.0" encoding="utf-8"?>
   <AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
   <Header>
   <DocumentVersion>1.01</DocumentVersion>
   <MerchantIdentifier></MerchantIdentifier>
   </Header>
   <MessageType>Product</MessageType>
           <Message>
                   <MessageID>1</MessageID>
                   <OperationType>Update</OperationType>
                   <Product>
                           <SKU>WAL-0011</SKU>

                           <ProductTaxCode>A_GEN_TAX</ProductTaxCode>
                           <Condition>
                                   <ConditionType>New</ConditionType>
                           </Condition>
                           <DescriptionData>
                                   <Title><![CDATA[ FLAMES FIRE TRIFOLD 4" LEATHER NEW Biker WALLET & CHAIN ]]></Title>
                                   <Description><![CDATA[ The awesome, Black, soft leather, tri-fold four inch wallet. This wallet includes a detachable chain with snapping belt loop as well as a "Flame" screen print. This great functional and stylish wallet makes a great gift! <BR ]]></Description>

                           </DescriptionData>
                           <ProductData>

                                   <Miscellaneous>
                                           <ProductType>Misc_Other</ProductType>
                                   </Miscellaneous>
                           </ProductData>
                   </Product>
           </Message>
           <Message>
                   <MessageID>2</MessageID>
                   <OperationType>Update</OperationType>
                   <Product>
                           <SKU>WAL-0028</SKU>

                           <ProductTaxCode>A_GEN_TAX</ProductTaxCode>
                           <Condition>
                                   <ConditionType>New</ConditionType>
                           </Condition>
                           <DescriptionData>
                                   <Title><![CDATA[ TOO LOUD TOO BAD 4" SOFT LEATHER Biker WALLET & CHAIN!! ]]></Title>
                                   <Description><![CDATA[ The awesome, 4" Leather Wallet with Chain Black, soft leather, tri-fold four inch wallet. This wallet includes a detachable chain snapping belt loop This great functional and stylish wallet makes a great gift! <BR ]]></Description>

                           </DescriptionData>
                           <ProductData>

                                   <Miscellaneous>
                                           <ProductType>Misc_Other</ProductType>
                                   </Miscellaneous>
                           </ProductData>
                   </Product>
           </Message>
           <Message>
                   <MessageID>3</MessageID>
                   <OperationType>Update</OperationType>
                   <Product>
                           <SKU>WAL-0017</SKU>

                           <ProductTaxCode>A_GEN_TAX</ProductTaxCode>
                           <Condition>
                                   <ConditionType>New</ConditionType>
                           </Condition>
                           <DescriptionData>
                                   <Title><![CDATA[ PAISLEY Ladies TRIFOLD 7.5 x 4 NEW LEATHER Biker WALLET ]]></Title>
                                   <Description><![CDATA[ The awesome, Ladies Paisley Design Leather Wallet 7.5" x 4" Trifold Wallet ID &amp; Credit Card Slots and Change Pocket. This great functional and stylish wallet makes a great gift! ]]></Description>

                           </DescriptionData>
                           <ProductData>

                                   <Miscellaneous>
                                           <ProductType>Misc_Other</ProductType>
                                   </Miscellaneous>
                           </ProductData>
                   </Product>
           </Message>
           <Message>
                   <MessageID>4</MessageID>
                   <OperationType>Update</OperationType>
                   <Product>
                           <SKU>WAL-0022</SKU>

                           <ProductTaxCode>A_GEN_TAX</ProductTaxCode>
                           <Condition>
                                   <ConditionType>New</ConditionType>
                           </Condition>
                           <DescriptionData>
                                   <Title><![CDATA[ SKULL & ROSE TATTOO Ladies 7.5 x 4 LEATHER Biker WALLET ]]></Title>
                                   <Description><![CDATA[ The awesome, Ladies Skull and Rose Tattoo Leather Wallet 7.5" x 4" Trifold Wallet ID &amp; Credit Card Slots and Change Pocket. This great functional and stylish wallet makes a great gift! ]]></Description>

                           </DescriptionData>
                           <ProductData>

                                   <Miscellaneous>
                                           <ProductType>Misc_Other</ProductType>
                                   </Miscellaneous>
                           </ProductData>
                   </Product>
           </Message> 
```

这是我得到的错误

```
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
<Header>
    <DocumentVersion>1.02</DocumentVersion>
    <MerchantIdentifier>M_HEYGIDDAY_10799467</MerchantIdentifier>
</Header>
<MessageType>ProcessingReport</MessageType>
<Message>
    <MessageID>1</MessageID>
    <ProcessingReport>
        <DocumentTransactionID>5153491920</DocumentTransactionID>
        <StatusCode>Complete</StatusCode>
        <ProcessingSummary>
            <MessagesProcessed>4</MessagesProcessed>
            <MessagesSuccessful>0</MessagesSuccessful>
            <MessagesWithError>4</MessagesWithError>
            <MessagesWithWarning>0</MessagesWithWarning>
        </ProcessingSummary>
        <StatusCode>Complete</StatusCode>
        <ProcessingSummary>
            <MessagesProcessed>4</MessagesProcessed>
            <MessagesSuccessful>4</MessagesSuccessful>
            <MessagesWithError>0</MessagesWithError>
            <MessagesWithWarning>0</MessagesWithWarning>
        </ProcessingSummary>
        <StatusCode>Complete</StatusCode>
        <ProcessingSummary>
            <MessagesProcessed>4</MessagesProcessed>
            <MessagesSuccessful>4</MessagesSuccessful>
            <MessagesWithError>0</MessagesWithError>
            <MessagesWithWarning>0</MessagesWithWarning>
        </ProcessingSummary>
        <Result>
            <MessageID>1</MessageID>
            <ResultCode>Error</ResultCode>
            <ResultMessageCode>13043</ResultMessageCode>
            <ResultDescription>0.00 price (standard or sales) will not be accepted. Please ensure that every SKU in your feed has a price at least equal to or greater than 0.01</ResultDescription>
            <AdditionalInfo>
                <SKU>WAL-0011</SKU>
            </AdditionalInfo>
        </Result> 
```

等等每个项目...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:00:23.207

好的，我在亚马逊的帮助下修复它。很好的支持。他们告诉我只提交价格信息并修复它。这就是写给我的。我检查了您的提要，我建议您上传另一个提要，这是您在批次 ID 5153415118 中提到的所有 sku 的价格提要。请输入所有 sku 的价格并上传，然后重新上传提要您为批次 id 5153415118 上传的。我相信不会再有问题了

# wpf - WPF TwoWay ComboBox 绑定未更新

> ID：10415793
> 
> 赞同：0
> 
> 时间：2012-05-02T14:27:57.303
> 
> 标签：wpf, binding

我创建了一个非常简单的 ViewModel，其中包含以下集合

```
 public ObservableCollection<Reader> Readers 
    { 
        get
        {
            if(_readers == null)
            {
                _readers = new ObservableCollection<Reader>();
            }

            return _readers;
        }

        set
        {
            _readers = value;
        }
    } 
```

并且当数字选择器更改时，我将 Reader 添加到集合中，如下所示：

```
_activeServer.Readers.Add(Readers.Instance.AllReaders[0]); 
```

我已将 DataContext 设置为包含 Readers 集合的类，并尝试将 ComboBoxes 的 ListBox 绑定到项目，如下所示：

```
 <ListBox Name="_lbLanes"
                     BorderThickness="0"
                     Height="200"
                     ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                     ItemsSource="{Binding Readers}"    >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <ComboBox Name="_cbReaders"
                              Margin="0,0,0,10"
                              ItemsSource="{Binding Source={x:Static models:Readers.Instance}, Path=AllReaders}"
                              DisplayMemberPath="Name"
                              SelectedItem="{Binding Path=., Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              MinWidth="400">
                        </ComboBox>
                    </DataTemplate>
                </ListBox.ItemTemplate>

                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Vertical"/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
            </ListBox> 
```

您可以看到我正在绑定到自身并将模式设置为 TwoWay。

我也尝试过将 SelectedValue 和 SelectedItem 绑定，并且都产生以下问题......

当我单击保存提交页面时，我检查了该项目的 Readers 集合的内容，并且所有内容都设置为其初始值，该值等于 Readers.Instance.AllReaders[0] 我猜如果我没有这样做是正确的想要双向绑定，但我愿意，这可能还是我必须去手动获取所有组合框中选择的项目？

提前感谢您抽出宝贵时间回复

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:30:04.060

我不认为你可以像这样绑定 TwoWay。

也许[这](http://codecopy.wordpress.com/2009/09/10/implicit-two-way-binding/)就是你想要的。

仅仅因为“双向绑定需要 Path 或 XPath”。并不意味着您应该将其设置为相同的值。您应该真正为您的 ListBox 创建特定对象，该对象将包含 Reader 作为属性。

# android - 刷新使用延迟加载和 JSON 实现的 ListView

> ID：10415794
> 
> 赞同：1
> 
> 时间：2012-05-02T14:28:04.453
> 
> 标签：android, json, facebook-graph-api, android-listview

我已经实现了 Fedor 的延迟加载代码来实现我的应用程序的一个子集。我正在使用 facebook sdk 提取数据并在活动中显示带有评论的新闻源帖子，例如计数等。还有一个评论框，您可以使用它向新闻源帖子发表评论。这个功能工作得很好。然而，我想要做的是，在用户将他的评论发布到线程后，列表应该刷新并显示他刚刚发布的评论。在发布评论后，我尝试`adapter.notifyDataSetChanged();`在 onClick 方法中调用。列表视图从不刷新。

如果我在这里错了，请纠正我，但我最好的猜测是，我用来保存数据的数组列表没有刷新。这是代码的（我认为）相关部分。如果需要更多，请告诉我。

onCreate 方法：初始化 ArrayLists 并使用 JSONObject 和 JSONArray 拉取数据

```
arrayUserID = new ArrayList<String>();
arrayProfilePic = new ArrayList<String>();
arrayFromName = new ArrayList<String>();
arrayMessage = new ArrayList<String>();

try {

    JOFeedDetails = new JSONObject(apiResponse);
    JAFeedDetails = JOFeedDetails.getJSONArray("data");

    for (int i = 0; i < JAFeedDetails.length(); i++) {
        json_data = JAFeedDetails.getJSONObject(i);

        // GET THE POST'S FROM USER NAME AND ID
        JSONObject joFromName = new JSONObject();
        joFromName = json_data.optJSONObject("from");

        if (joFromName.has("id"))   {
            String getCommentersID = joFromName.getString("id");
            arrayUserID.add(getCommentersID);
            String fromProfilePic = "https://graph.facebook.com/"+ getCommentersID +"/picture?type=square" + "&access_token=" + Utility.mFacebook.getAccessToken();;
            arrayProfilePic.add(fromProfilePic);
        } else {
            String getCommentersID = "";
            arrayUserID.add(getCommentersID);
        }

        if (joFromName.has("name")) {
            String getCommentersName = joFromName.getString("name");
            arrayFromName.add(getCommentersName);
        } else {
            String getCommentersName = "";
            arrayFromName.add(getCommentersName);
        }

        if (json_data.has("message"))   {
            String getMessage = json_data.getString("message");
            arrayMessage.add(getMessage);
        } else {
            String getMessage = "";
            arrayMessage.add(getMessage);
        }

        // GET THE POST'S TIME STAMP
        if(json_data.has("created_time"))   {

            String dateStr = json_data.optString("created_time");
            SimpleDateFormat formatter = getDateFormat();
            ParsePosition pos = new ParsePosition(0);
            long then = formatter.parse(dateStr, pos).getTime();
            long now = new Date().getTime();

            long seconds = (now - then)/1000;
            long minutes = seconds/60;
            long hours = minutes/60;
            long days = hours/24;

            String friendly = null;
            long num = 0;
            if (days > 0) {
                num = days;
                friendly = days + " day";
            } else if (hours > 0) {
                num = hours;
                friendly = hours + " hour";
            } else if (minutes > 0) {
                num = minutes;
                friendly = minutes + " minute";
            } else {
                num = seconds;
                friendly = seconds + " second";
            }
            if (num > 1) {
                friendly += "s";
            }
            String postTimeStamp = friendly.toUpperCase() + " AGO";
            arrayTimeStamp.add(postTimeStamp);
        } else {
            String postTimeStamp = "";
            arrayTimeStamp.add(postTimeStamp);
        }

        if (json_data.has("likes")) {
            String getCommentLikes = json_data.getString("likes");
            arrayCountLikes.add(getCommentLikes);
        } else {
            String getCommentLikes = "0";
            arrayCountLikes.add(getCommentLikes);
        }
    }

} catch (Exception e) {
}

stringUserID = new String[arrayUserID.size()];
stringUserID = arrayUserID.toArray(stringUserID);

stringProfilePics = new String[arrayProfilePic.size()];
stringProfilePics = arrayProfilePic.toArray(stringProfilePics);

stringFromName = new String[arrayFromName.size()];
stringFromName = arrayFromName.toArray(stringFromName);

stringMessage = new String[arrayMessage.size()];
stringMessage = arrayMessage.toArray(stringMessage);

stringTimeStamp = new String[arrayTimeStamp.size()];
stringTimeStamp = arrayTimeStamp.toArray(stringTimeStamp);

stringCountLikes = new String[arrayCountLikes.size()];
stringCountLikes = arrayCountLikes.toArray(stringCountLikes);

getNewsfeedDetailsHeader();

adapter = new NewsFeedDetailsAdapter(this, stringUserID, stringFromName, stringProfilePics, 
        stringMessage, stringTimeStamp, stringCountLikes);

list.setAdapter(adapter); 
```

以及发布评论的 onClick 事件：

```
public OnClickListener listener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            try {
                Bundle parameters = new Bundle();
                parameters.putString("message", txtCommentBox.getText().toString());
                parameters.putString("description", getString(R.string.app_desc));
                parameters.putString("caption", getString(R.string.app_name));

                Utility.mFacebook.request(fetchedThreadID + "/comments", parameters, "POST");

                adapter.notifyDataSetChanged();

                InputMethodManager inputManager = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);
                inputManager.hideSoftInputFromWindow(txtCommentBox.getWindowToken(), 0);
                txtCommentBox.setText("");
            } catch (Exception e) {
            }
        }
    }; 
```

我真的很感谢你耐心看完这篇长文。但我真的认为理解流程可能会有所帮助。我希望这里有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:24:35.910

一旦我的 ArrayLists 没有更新，我遇到了类似的问题。

在 adapter.notifyDataSetChanged() 之前尝试在您的 Arraylist 上调用 .clear() 这对我有用。祝你好运！

# android - 在 Android 的 Textview 中对齐文本（使用 Html.fromhtml()）

> ID：10415796
> 
> 赞同：1
> 
> 时间：2012-05-02T14:28:06.897
> 
> 标签：android, html, android-layout, formatting, textview

我正在尝试显示此信息表。

目前看起来像

![[这个]](../Images/496b00824ceb6e7a50baf121d1e43587.png)

我希望它看起来像

![[这个]](../Images/efda1d34f9183e3bc1eb2fbc3b81b69f.png)

反正有没有得到这种对齐？

现在，所有这些文本都在一个 TextView 中，并由 Html.fromhtml()

所以，可以想象，如果这个问题有一个 html 解决方案，我可以将它应用到这个 textview 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:39:56.067

传统的响应是编写 XML 布局并单独设置字段。您也可以保持 HTML 原样并使用 WebView 而不是 TextView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:50:36.770

字符串 styledText = "sessionaID:1"; textView.setText(Html.fromHtml(styledText))

我想你也这样做。如果您只需要 HTML 形式的解决方案，那么只需在 1\. 前面附加空格标记，也类似于下一个字段。表示所有可能的 HTML 标记都具有相同的外观。解决方案）

更好的方法是设计一个 XML 并且 U 可以为文本视图设置重力和其他参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:45:42.727

您可以使用 html table 来实现这一点。前任：

```
<table>
<tr><td>Session Id</td><td>1</td></tr>
<tr><td>Start time</td><td>xyz</td></tr>
</table> 
```

# c# - 如何在 C# 中并行化事件处理程序执行

> ID：10415801
> 
> 赞同：5
> 
> 时间：2012-05-02T14:28:36.010
> 
> 标签：c#, multithreading, parallel-processing, kinect

我有一个 Kinect 设备，我正在使用 C# 开发一个程序。

为了管理设备，我使用`AllFramesReady`了事件来处理深度和颜色信息。

我创建了一个事件处理程序来处理名为`EventHandler1`. 我在这个事件处理程序中做了很多处理。

我想在名为`EventHandler2`.

是否可以在主进程的 2 个不同线程上运行这 2 个事件处理程序，它们基本上是 2 个并行函数？如果可能的话，你能给我一个示例代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:51:22.030

这很容易总结在一个类中；但是，在订阅所需事件之前，您需要将所有事件处理程序聚合到一个事件处理程序中。

这是一个快速而肮脏的课程来证明这一点。提供的第一个事件与事件调用内联运行，而所有其他事件都在默认线程池上执行。

```
class ParallelEvent<TEventArg> where TEventArg : EventArgs
{
    private readonly EventHandler<TEventArg> _handler1;
    private readonly EventHandler<TEventArg>[] _moreHandlers;

    public ParallelEvent(EventHandler<TEventArg> handler1, params EventHandler<TEventArg>[] moreHandlers)
    {
        if (handler1 == null)
            throw new ArgumentNullException("handler1");
        if (moreHandlers == null)
            throw new ArgumentNullException("moreHandlers");
        _handler1 = handler1;
        _moreHandlers = moreHandlers;
    }

    public void Handler(Object sender, TEventArg args)
    {
        IAsyncResult[] asyncResults = new IAsyncResult[_moreHandlers.Length];
        for (int i = 0; i < _moreHandlers.Length; i++)
            asyncResults[i] = _moreHandlers[i].BeginInvoke(sender, args, null, null);

        _handler1(sender, args);

        for (int i = 0; i < _moreHandlers.Length; i++)
            _moreHandlers[i].EndInvoke(asyncResults[i]);
    }
} 
```

现在要使用它，我们构建一个 ParallelEvent 类，为它提供我们想要并行运行的所有事件处理程序。然后我们使用类的 Handler 方法订阅事件 'test'。最后，我们将事件称为“测试”并查看输出。考虑以下示例：

```
private static event EventHandler<EventArgs> test;

static void Main()
{
    var e = new ParallelEvent<EventArgs>(Test1, Test2);
    test += e.Handler;
    test(null, EventArgs.Empty);
}

static void Test1(Object sender, EventArgs args)
{
    Console.WriteLine("Start Test 1");
    Thread.Sleep(100);
    Console.WriteLine("End Test 1");
}

static void Test2(Object sender, EventArgs args)
{
    Console.WriteLine("Start Test 2");
    Thread.Sleep(100);
    Console.WriteLine("End Test 2");
} 
```

正如预期的那样，上面的程序并行运行它们，如以下输出所示：

```
Start Test 1
Start Test 2
End Test 2
End Test 1 
```

最后，您需要了解有关多线程代码的其他问题。现在任何正在更改的共享状态都需要同步，等等。

通过一些工作，您可以调整上述类以公开事件，以便侦听器可以随意订阅和取消订阅。然后在 Handler 方法中，您将通过[Delgate.GetInvocationList](http://msdn.microsoft.com/en-us/library/system.delegate.getinvocationlist.aspx) () 提取委托列表。一旦你有了一个委托列表，你就可以像上面现有的 Handler 方法一样处理它们。

# javascript - IE7：李的行为很糟糕

> ID：10415802
> 
> 赞同：2
> 
> 时间：2012-05-02T14:28:37.787
> 
> 标签：javascript, jquery, html, css, internet-explorer-7

JSFiddle：http: [//jsfiddle.net/F6LBV/1/](http://jsfiddle.net/F6LBV/1/)

IE7 给我和我的网站带来了巨大的痛苦。尽管我很想在一条黑暗的小巷里见到微软并一劳永逸地解决这个问题，但我希望你们中的一个人能提供帮助。

IE7 以两种方式伤害了我的`li`标签，第一种是不尊重它们的`width:auto;`属性，而不是扩大到最宽的宽度`li`，每个都`li`缩小到它自己的副本加上填充的大小。

可以在这里看到：

![诅咒你IE7](../Images/739f8d1ef3180d339981e74cbed8be48.png)

接下来，IE7 不尊重我的 jQuery。我有一个功能，`ul`当您将鼠标悬停在每个 parent 上时，它会为向下滑动设置动画`li`。`display: none`然而IE7出于某种原因（我相信它`ul`与

可以在这里看到：

![Shuttupa你的脸，你没有尊重](../Images/1d159a6eab7c275a573e9da673815d8e.png)

所以这是我的下拉菜单的标记：

```
<div class="container_16">
    <div class="grid_16">
        <div id="breadcrumbs">
            <a href="http://rcnhca.org.uk/sites/first_steps" id="home"></a>
            <ul id="parent" class="grid_15 omega">
            <li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/">Personal and people development </a><ul class="child"><li><a href="http://rcnhca.org.uk/sites/first_steps/getting-started/">Getting started</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/communication/">Communication</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/health-safety-and-security/">Health, Safety and Security</a></li><li class="active" ><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/">Personal and people development </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/quality/">Quality</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/equality-diversity-and-rights/">Equality, diversity and rights </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/clinical-skills/">Clinical skills</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/additional-material/">Additional material</a></li></ul></li><li><a href="#">Select a topic</a><ul class="child"><li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/performance-appraisal/">Performance appraisal </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/personal-development-planning/">Personal development planning</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/learning-and-development-opportunities/">Learning and development opportunities </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/lifelong-learning/">Lifelong learning </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/reflection/">Reflection</a></li></ul></li>                         </ul>

        </div>
    </div>
    <div id="supplements" class="grid_16">
        <div class="left">
            <a href="#" class="button alpha"><img src="http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/library/images/book-icon.png" alt="book icon">View competencies checklist</a>
        </div>
        <div class="right">
            <a href="#" class="button alpha bold"><img src="http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/library/images/rcn-icon.png" alt="rcn icon">Join the RCN</a>

            <a href="#" class="button omega">Reasons to joins</a>
        </div>
    </div>
</div> 
```

和要启动的css：

```
#breadcrumbs {
    position: relative;
    z-index: 4;
    height: 39px;
    padding-bottom: 3px;
    background: #ffffff;
    border: 0px solid;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

#breadcrumbs ul {
    list-style: none; 
    list-style-image: none; 
    margin: 0;
}

#breadcrumbs #home{
    display: block;
    position: relative;
    height: 39px;
    width: 54px;
    float: left;
    background-image: url(library/images/home_icon.png);
    background-repeat: no-repeat;
    background-position: 19px center;   
    text-indent: -999em;
}

#breadcrumbs ul#parent {
    display: block;
    height: 39px;
    float: right;
    right: 3px;
    position: relative;
    background: #f38630;
    -webkit-box-shadow: inset 0px -2px 0px 0px #cf7229;
    -moz-box-shadow: inset 0px -2px 0px 0px #cf7229;
    box-shadow: inset 0px -2px 0px 0px #cf7229;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

#breadcrumbs ul#parent li {
    position: relative;
    height: 39px;
    float: left;
    min-width: 1px; /* required to fix Opera bug */
    padding: 0 47px 0 15px;
    background-image: url(library/images/breadcrumb_seperator.png);
    background-repeat: no-repeat;
    background-position: right;
    line-height: 39px;
    zoom: 1;
}

#breadcrumbs ul#parent li a {
    display: block;
    height: 42px;
    position: relative;
    font-size: 15px;
    font-weight:900;
    color: #ffffff;
    text-decoration: none;
    text-shadow: 0px 2px 0px #cf7229;
}

#breadcrumbs ul li a:visited {
    color: #ffffff;
}
#breadcrumbs ul#parent li:first-child ul {
    left: -5px;
}
#breadcrumbs ul#parent li ul {
    position: absolute;
    z-index: 9998;
    left: -28px;
    top: 42px;
    background: #ffffff;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    padding: 0 3px 0 3px;
    list-style-position: outside;
    min-width: 200px;
    width: auto;
    -webkit-box-shadow: 0px 6px 6px -6px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0px 6px 6px -6px rgba(0, 0, 0, 0.5);
    box-shadow: 0px 6px 6px -6px rgba(0, 0, 0, 0.5);
}

.js #breadcrumbs ul#parent li ul {
    display:none;
}

.no-js #breadcrumbs ul#parent li ul {
    left: -999em;
}

#breadcrumbs ul#parent li ul li {
    float: none;
    display: block;
    position: relative;
    height: 26px;
    margin-bottom: 3px;
    padding: 0 15px;
    background-image: url(library/images/arrow-icon.png);
    background-position: -25px 50%;
    background-repeat: no-repeat;
    background-color: #738793;
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    line-height: 26px;
    white-space: nowrap;
    zoom: 1;
    width: auto;
}

#breadcrumbs ul#parent li ul li a{
    display: block;
    color: #ffffff;
    text-decoration: none;
    text-shadow: none;
    font-weight: 100;
}

#breadcrumbs ul#parent li ul li.active, #breadcrumbs ul#parent li ul li:hover{
    background-color: #3393b5;
}

#breadcrumbs ul#parent li ul li.active, .no-js #breadcrumbs ul#parent li ul li:hover{
    background-position: 0px 50%;
    text-indent: 10px;
}

.no-js #breadcrumbs ul#parent li:hover ul, .no-js #breadcrumbs ul#parent li:focus ul {
    left: -5px;
} 
```

和动画它的jQuery：

```
$(document).ready(function(){

    // Fix background-position < IE8
    if ($('html').hasClass('oldie')) {
        $("ul.child li:not(.active)").each(function() {
            $(this).css('backgroundPosition', '-25px 50%');
        });
        $("#breadcrumbs ul")
    }

    //Animate dropdown menu
    $("#breadcrumbs>ul:not(.child)>li").each(function() {
        crumbWidth = $(this).width();
        if($(this).width() > $(this).children('ul.child').width()) {
            $(this).children('ul.child').width(crumbWidth + 43);
        }
    });
    $("#breadcrumbs>ul:not(.child)>li").hover(
      function () {
        var raquo = "&raquo;";
        $(this).children('ul.child').hoverFlow('mouseenter', {'height': 'show'},250).children('li:not(.active)').hover(
            function() {
                $(this).hoverFlow('mouseenter', {textIndent: 10, backgroundPosition: '-0px 50%'}, 250);
            },
            function () {
                $(this).hoverFlow('mouseleave', {textIndent: 0, backgroundPosition: '-25px 50%'}, 250);
            }
        );
      }, 
      function () {
        $(this).children('ul.child').hoverFlow('mouseleave', {'height': 'hide'}, 250).children('li').unbind();
      }
    );
}); 
```

现场直播：[http ://rcnhca.org.uk/sites/first_steps/](http://rcnhca.org.uk/sites/first_steps/)

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:11:04.127

`width:100%``#breadcrumbs ul#parent li ul`似乎解决了这两个问题。[http://jsfiddle.net/F6LBV/4](http://jsfiddle.net/F6LBV/4)

到目前为止在 IE7 和 Chrome 中进行了测试。

# freebase - 登录 Freebase 进行 MQLWrite 操作

> ID：10415804
> 
> 赞同：2
> 
> 时间：2012-05-02T14:28:48.650
> 
> 标签：freebase, mqlwrite

我尝试使用 Freebase 存储库。可以发出 MQLRead 请求，但为此无需登录存储库本身。MQLRead 操作在 Freebase wiki 站点上有详细记录，但没有 MQLWrite 规范存在。旧文档存在，但似乎对我不起作用。首先，我无法使用单独的登录名/密码进行 www.freebase.com 注册，因为这种方式不可用 - 只能使用 Google 或 Yahoo 帐户注册。如何使用新的 Google 凭据进行 Freebase 注册？我可以从 Google 获得 access_token，但不能将它用于我的应用程序。是否有必要像旧文档所说的那样使用 cookie 进行注册？或不？我应该使用哪个 URL 进行注册：[http](http://api.sandbox-freebase.com/api/account/login) ://api.sandbox-freebase.com/api/account/login或[https://www.googleapis.com/freebase/v1-sandbox](https://www.googleapis.com/freebase/v1-sandbox)还是别的什么？

我知道 Google Refine 项目可以使用 Freebase 作为存储库，它可以将数据写入 Freebase，但对我来说，找到一种工作方式需要时间。

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:36:02.897

写入服务尚未移植到新 API，在旧 API 弃用之前可能无法使用；查看来自 Freebase 产品经理之一 Jason Douglas 的[邮件](http://lists.freebase.com/pipermail/freebase-discuss/2012-April/008844.html)。

# c# - 从 WPF Windows 应用程序输出 Console.WriteLine 到实际控制台

> ID：10415807
> 
> 赞同：29
> 
> 时间：2012-05-02T14:28:50.960
> 
> 标签：c#, wpf, batch-file, cmd

*背景：我正在努力向现有的 WPF Windows Application*添加命令行和批处理功能。当我在启动时检测到一些选项时，我会抑制窗口出现，进行一些处理并立即退出。现在，因为没有 UI，我想将一些消息输出到 stdout/stderr。考虑以下代码：

```
namespace WpfConsoleTest
{
    public partial class App : Application
    {
        protected override void OnStartup(StartupEventArgs e)
        {
            Console.WriteLine("Start");
            System.Threading.Thread.Sleep(1000);
            Console.WriteLine("Stop");
            Shutdown(0);
        }
    }
} 
```

当我从命令行运行时，我希望得到以下输出：

```
Start
Stop 
```

但反而：

```
C:\test>WpfConsoleTest.exe

C:\test> 
```

但是，您**可以**重定向输出：

```
C:\test>WpfConsoleTest.exe > out.txt

C:\test>type out.txt
Start
Stop 
```

不幸的是，重定向到 CON 不起作用：

```
C:\test>WpfConsoleTest.exe > CON

C:\test> 
```

另一个问题是**WpfConsoleTest.exe**在启动后立即退出。所以：

```
C:\test>WpfConsoleTest.exe > out.txt & type out.txt

C:\test> 
```

但：

```
C:\test>WpfConsoleTest.exe > out.txt & ping localhost > nul & type out.txt
Start
Stop 
```

到目前为止，我能想到的最好的解决方案是使用`start /B /wait`：

```
C:\test>start /B /wait WpfConsoleTest.exe > out.txt & type out.txt
Start
Stop 
```

这种方法大部分都可以——如果你把它包装在一个蝙蝠中，你可以保留错误代码等等。一个巨大的缺点是您在应用程序结束后获得输出，即您无法跟踪进度，您必须等待正在发生的事情完成。

因此，我的问题是：**如何从 WPF *Windows 应用程序*输出到父控制台？**另外，为什么从 WPF 中获取 stdout/stderr 这么难？

我知道我可以在项目设置中将应用程序类型更改为*控制台应用程序*，但这有一个令人讨厌的副作用 - 控制台窗口始终可见，即使您只是双击 exe。[这个解决方案](https://stackoverflow.com/a/718505/461632)也不行，因为它会创建**一个新的**控制台，即使应用程序是从 cmd 运行的。

编辑：澄清一下，如果有一个控制台，我希望我的应用程序输出到**现有**控制台，如果它丢失，则**不要**创建一个新控制台。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-21T10:01:47.940

经过一番挖掘，我找到[了这个答案](https://stackoverflow.com/a/3058921/461632)。现在的代码是：

```
namespace WpfConsoleTest
{
    public partial class App : Application
    {
        [DllImport("Kernel32.dll")]
        public static extern bool AttachConsole(int processId);

        protected override void OnStartup(StartupEventArgs e)
        {
            AttachConsole(-1);
            Console.WriteLine("Start");
            System.Threading.Thread.Sleep(1000);
            Console.WriteLine("Stop");
            Shutdown(0);
        }
    }
} 
```

直接调用 exe 仍然有一个讨厌的副作用，与调用立即返回有关：

```
C:\test>WpfConsoleTest.exe

C:\test>Start
Stop

^^^^
The cursor will stay here waiting for the user to press enter! 
```

解决方案是再次使用*start*：

```
C:\test>start /wait WpfConsoleTest.exe
Start
Stop 
```

感谢您的输入！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-02T14:48:37.850

我过去所做的是使其成为控制台应用程序，并在显示 WPF 窗口后调用 P/Invoke 隐藏应用程序的关联控制台窗口：

```
//added using statements per comments...
using System.Diagnostics;
using System.Runtime.InteropServices;

    internal sealed class Win32
    {
        [DllImport("user32.dll")]
        static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

        public static void HideConsoleWindow()
        {
            IntPtr hWnd = Process.GetCurrentProcess().MainWindowHandle;

            if (hWnd != IntPtr.Zero)
            {
                ShowWindow(hWnd, 0); // 0 = SW_HIDE
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-02T14:42:20.823

WPF 应用程序默认没有控制台，但您可以轻松地为其创建一个控制台，然后像在控制台应用程序中一样对其进行写入。我以前使用过这个助手类：

```
public class ConsoleHelper
{
    /// <summary>
    /// Allocates a new console for current process.
    /// </summary>
    [DllImport("kernel32.dll")]
    public static extern Boolean AllocConsole();

    /// <summary>
    /// Frees the console.
    /// </summary>
    [DllImport("kernel32.dll")]
    public static extern Boolean FreeConsole();
} 
```

要在您的示例中使用它，您应该能够这样做：

```
namespace WpfConsoleTest
{
    public partial class App : Application
    {
        protected override void OnStartup(StartupEventArgs e)
        {
            ConsoleHelper.AllocConsole(); 
            Console.WriteLine("Start");
            System.Threading.Thread.Sleep(1000);
            Console.WriteLine("Stop");
            ConsoleHelper.FreeConsole();
            Shutdown(0);
        }
    }
} 
```

现在，如果您从命令行运行它，您应该会看到“开始”和“停止”写入控制台。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T14:47:44.407

在项目属性中，您可以将项目类型从 Windows 应用程序更改为控制台应用程序，AFAIK 唯一的区别是您可以在应用程序的整个生命周期中使用控制台。不过，我还没有用 WPF 尝试过。

如果要打开和关闭控制台，则应使用`Alloc/FreeConsole`，但更改项目类型通常更简单。

# cookies - CookieContainer 数据丢失，为什么？[C#，网页表单]

> ID：10415809
> 
> 赞同：0
> 
> 时间：2012-05-02T14:28:53.420
> 
> 标签：cookies, httpwebrequest, httpwebresponse, cookiecontainer

网页表格：

```
<form id="form1" runat="server">
    <div>
        <asp:TextBox ID="txtBxEmail" runat="server"></asp:TextBox>
        <asp:TextBox ID="txtBxPassword" runat="server"></asp:TextBox>
        <asp:Button ID="btnLogin" runat="server" Text="Login" OnClick="btnLogin_Click" />
        <br /><br />
        <asp:TextBox ID="txtBxLink" runat="server" Text="http://example.com/elements/13579642/"></asp:TextBox>
        <asp:Button ID="btnDisplay" runat="server" Text="Display" OnClick="btnDisplay_Click" />
        <br /><br />
        <asp:TextBox ID="txtBxSource" runat="server" TextMode="MultiLine" Width="600" Height="600"></asp:TextBox>
        </div>
    </form> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {

    }

    CookieContainer loginCookie;

    public void btnLogin_Click(object sender, EventArgs e)
    {
        string postData = "type=0&user=" + txtBxEmail.Text + "&password=" + txtBxPassword.Text + "&remember=0";
        CookieContainer tempCookies = new CookieContainer();
        UTF8Encoding encoding = new UTF8Encoding();
        byte[] byteData = encoding.GetBytes(postData);

        HttpWebRequest postReq = (HttpWebRequest)WebRequest.Create("http://example.com/ajax/login.ajax.php");
        postReq.Method = "POST";
        postReq.KeepAlive = true;
        postReq.CookieContainer = tempCookies;
        postReq.ContentType = "application/x-www-form-urlencoded";
        postReq.Referer = "http://example.com/ajax/login.ajax.php";
        postReq.UserAgent = "Opera/9.80 (Windows NT 6.1; U; en) Presto/2.10.229 Version/11.61";
        postReq.ContentLength = byteData.Length;

        Stream postreqstream = postReq.GetRequestStream();
        postreqstream.Write(byteData, 0, byteData.Length);
        postreqstream.Close();
        HttpWebResponse postresponse = null;

        postresponse = (HttpWebResponse)postReq.GetResponse();
        tempCookies.Add(postresponse.Cookies);
        loginCookie = tempCookies;
        StreamReader postreqreader = new StreamReader(postresponse.GetResponseStream());
    }

    public void btnDisplay_Click(object sender, EventArgs e)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(txtBxLink.Text);
        request.CookieContainer = loginCookie;
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string linkSourceCode = reader.ReadToEnd();

        txtBxSource.Text = linkSourceCode;
    } 
```

您必须登录才能查看*http://example.com/elements/13579642/*子页面。单击“*显示”*按钮时，它应该填充`txtBxSource`元素源代码，但事实并非如此。相反，它显示了*http://example.com/home/*源代码。如果我在一切正常的情况下移动整个代码`public void btnLogin_Click`，否则它不会。

1.  我的问题的解决方案是什么？

2.  **问题：**一旦我把整个东西放在一个网站/网络主机上并且有人（通过这个网页）在*http://example.com/* 网站上登录并使用这个迷你应用程序，*http： //example.com/*网站会收到自己的IP还是webhost的IP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:11:29.790

您遇到的问题是，当页面回发时，CookieContainer 的信息是明确的。你可以通过两种方式解决这个问题，创建一个不会影响回发的 CookieContainer 的视图状态，或者你可以创建一个包含多个子脚本的脚本。您可以为第二个按钮的脚本创建一个单独的公共空白，并像序列一样在第一个按钮中调用此脚本。

# facebook-graph-api - Facebook 图形 API - 使用电子邮件地址获取用户 ID

> ID：10415819
> 
> 赞同：0
> 
> 时间：2012-05-02T14:29:25.693
> 
> 标签：facebook-graph-api

我知道在 FB 图形 API 中，当您拥有用户的 Facebook 名称或用户 ID 时，您可以从图形 API 获取该用户的所有功能信息。当您只有一个用户的电子邮件地址时，您能否从与该电子邮件地址关联的图形 API 中获取 fb 用户 ID？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:41:38.057

您可以通过电子邮件进行查询，并使用图形 API 接收 ID、姓名、个人资料网址等。不幸的是，这有时有效，有时无效。它一直在工作，然后报告了这个错误：

使用电子邮件地址搜索 Facebook 个人资料不再使用 Graph API

[http://developers.facebook.com/bugs/292220680814266?browse=search_4fa1307a895f67895398056](http://developers.facebook.com/bugs/292220680814266?browse=search_4fa1307a895f67895398056)

然后在3月2日修复。

就在今天早上，它似乎又坏了。使用搜索 api，我可以按名称搜索并获取结果，但是用电子邮件替换名称会返回一个空列表。

希望这是一个间歇性问题。

# jquery - index.html 应该清除会话/cookies

> ID：10415824
> 
> 赞同：0
> 
> 时间：2012-05-02T14:29:34.507
> 
> 标签：jquery, html, iframe

我有以下框架：

```
<iframe src="http://www.eggsandbacon.jquery.js"></iframe> 
```

在我的`index.html`文件里面。

我想在每个用户玩完我的 jQuery 游戏后重置和删除所有会话 cookie。有没有办法在不改变游戏内容的情况下做到这一点？游戏在另一台服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:31:07.910

不可以。您不能触摸[不同来源的](http://en.wikipedia.org/wiki/Same_origin_policy)cookie 。

# facebook - Facebook 应用中的附属链接 - 违反应用政策？

> ID：10415828
> 
> 赞同：3
> 
> 时间：2012-05-02T14:29:55.787
> 
> 标签：facebook, facebook-apps, policy

与其说是技术问题，不如说是政策问题。

在开发应用程序时，如果它构成您内容的一部分，您是否可以显示附属公司提供的链接？例如，专门用于从 Affiliate Window 中查找特定类型的黑胶唱片的应用程序。不好的例子，但本质上策略用法是相同的。

我主要关心的是这个 - [https://developers.facebook.com/policy/](https://developers.facebook.com/policy/) - 特别是 III.E.2

任何指针都会是王牌，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:46:55.713

根据 III.E.2，您只能在此列表中销售产品或宣传产品：http: [//developers.facebook.com/adproviders/](http://developers.facebook.com/adproviders/)

有没有人找到更多这方面的信息？

# jsp - 未知的 Http 响应长度

> ID：10415830
> 
> 赞同：1
> 
> 时间：2012-05-02T14:29:58.557
> 
> 标签：jsp, jakarta-ee, servlets

我们知道，在 Java EE servlet/jsp 中，客户端可以为一个 http 请求获得一个 http 响应。我想实现一些http响应长度未知的东西。在客户端发送第一个 http 请求后，我希望服务器继续为客户端推送数据。在那种情况下，我不想使用 AJAX，因为 AJAX 的重量很重。

例如，我想创建一个网页，可以从 Web 服务器检索 Log Message，当从另一个模块生成 Log 消息时，Web 服务器可以发送 Log 消息（所以在这种情况下，时间间隔是未知的，我们假设这里不建议定期检查计时器）。日志消息附加到 Web 浏览器，这意味着 Web 浏览器无法刷新，例如：

日志 12:00 pm ..... 日志 12:03 pm ..... 日志 12:04 pm ..... . .

我怎样才能通过仅发送一个 http 请求并继续检索 http 响应来做到这一点？

* * *

@dystroy

你的意思是，我可以在 doPost/doGet 结束之前多次刷新打印机（当有新的日志数据时）？

请忽略语法错误！我没有使用IDE。

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp){

    PrintWriter pw = resp.getWriter();

    pw.println("<html><body>Testing for the streaming.</body></html>");
    pw.flush();

    /*
    The syntax could not be correct, please focus on logic.
    This while loop check the log sent by web server is finised or not and flush the data to the 
    client, after that the javascript will change the content of the inner Html. Is the logic below
    valid?
    */
    while(!log.finish()){
        pw.println("document.setInnerHtml("+log.newLog()+")");
        pw.flush(); 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:30:18.593

当然，您需要考虑使用`keep-alive`.

它允许客户端重复使用现有的连接来不断地从服务器读取数据。下面，只是从下面列出的链接中复制了示例。

```
try {
    URL a = new URL(args[0]);
    URLConnection urlc = a.openConnection();
    is = conn.getInputStream();
    int ret = 0;
    while ((ret = is.read(buf)) > 0) { // here it try to read response using existing connection.
      processBuf(buf);
    }
    // close the inputstream
    is.close();
} catch (IOException e) {
    try {
        respCode = ((HttpURLConnection)conn).getResponseCode();
        es = ((HttpURLConnection)conn).getErrorStream();
        int ret = 0;
        // read the response body
        while ((ret = es.read(buf)) > 0) {
            processBuf(buf);
        }
        // close the errorstream
        es.close();
    } catch(IOException ex) {
        // deal with the exception
    }
} 
```

使用上面显示的技术来加载日志文件。

这是一个很好的解释：[持久连接](http://docs.oracle.com/javase/1.5.0/docs/guide/net/http-keepalive.html)

* * *

另一种选择很简单，考虑制作`Ajax Request`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:17:38.153

您始终可以使用长的 http 答案并定期刷新它们，它可以工作，至少在网络上出现短问题之前是有效的。您不必在 HTTP 标头中发送答案的长度。

正确的解决方案是使用 ajax 进行一些拉动或使用 websockets，它们非常轻巧且快速，但并非所有浏览器都支持（请参阅[http://caniuse.com/websockets](http://caniuse.com/websockets)）。

关于“重量级”ajax，请注意成本本质上是http查询+答案之一。如果您不要求小于 100 毫秒的延迟并且有正常的连接，您会发现 ajax 相当快（更喜欢使用 servlet 而不是 jsp）。只是不要以太重的格式封装您的日志。

# codeigniter - 删除 CodeIgniter 站点中一个链接的基本 url

> ID：10415833
> 
> 赞同：0
> 
> 时间：2012-05-02T14:30:03.633
> 
> 标签：codeigniter, hyperlink

CodeIgniter 问题。我想向我的一个 CI 站点添加一个外部链接，因此我不想包含基本 URL。不管我做什么，我总是得到这样的东西：`http://www.ourwayproj.net/index.php/www.yahoo.com`. 当我想要的是这个：`http://www.yahoo.com`。如何从我要添加的这个链接中删除基本 URL？

这是我要使用的标签：`<a target="_blank" href=<?=$account->getUrl().".webbiz.biz";?>><img alt="moores78 (9K)" src="moores78.jpg" height="240" width="240" /></a>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:17:07.083

*评论中的漂亮答案*；

对于外部链接，地址需要在协议前面加上，例如**http://**

```
<a target = "_blank" href = <?="http://".$account->getUrl().".webbiz.biz";?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-27T07:28:50.997

我在我的项目中这样做并使用：

```
<a href="<?php echo 'http://' . $row->ip_address; ?>" target="_blank">Show</a> 
```

它会生成一个存储在我的数据库中的 IP 地址

```
http://172.xx.xx.xx 
```

# c#-4.0 - AutoMapper：如何在嵌套属性上配置 opt.NullSubstitute？

> ID：10415835
> 
> 赞同：1
> 
> 时间：2012-05-02T14:30:09.087
> 
> 标签：c#-4.0, automapper

我正在尝试在嵌套属性上设置 NullSubstitute 选项。

这是我到目前为止所拥有的：

```
public class HomeViewModel
{
    public IEnumerable<JobRecord> JobRecords { get; set; }
}

public ActionResult Index()
{
    var jobRecords = _jobInfoService.GetAll().ToList();
    var viewModel = new HomeViewModel();

    Mapper.Map(jobRecords, viewModel);
    // Not sure how to properly map the nested property here

    return View(viewModel);
}

private static void CreateMapForHomeViewModel()
{
    Mapper.CreateMap<List<JobRecord>, HomeViewModel>()
        .ForMember(dto => dto.JobRecords, x => x.MapFrom(src => src));

    // Not sure if this is correct
    Mapper.CreateMap<CompanyInfo, CompanyInfo>()
            .ForMember(dto => dto.CompanyName, opt => opt.NullSubstitute(""));
} 
```

我的理解是我必须为内部源/目标设置另一个配置，设置 NullSubstitute 然后调用 Map；一直想不通。

任何帮助，将不胜感激。

# git - 分支的交互式 rebase 及其与 master 的分歧点

> ID：10415837
> 
> 赞同：30
> 
> 时间：2012-05-02T14:30:11.730
> 
> 标签：git, rebase

假设我有一个主题分支，我想重写它的整个历史，因为它最初是从 master 为拉取请求创建的。`git log`无论出于何种原因，使用它来确定我想要传递给的提交哈希并不容易或显而易见

```
git rebase -i <commit> 
```

我知道我可以使用它`git merge-base <branch1> <branch2 || master>`来查找两个引用可以追踪其祖先的提交，并可以使用它来确定提交。我想知道的是，是否有比使用更好的方法来交互式地重新设置整个分支（无论 master 是否先进）

```
git rebase -i `git merge-base my_branch master` 
```

编辑：我不想更改在此分支上进行的第一次提交的父级，因此`git rebase -i master`只有在创建分支后两个 master 都没有前进并且分支是从当前指向的提交 master 创建的情况下才有效。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T16:31:03.507

也许我误解了你的问题，但我认为`git rebase -i master`应该做你想做的。它将找出合并基础并将整个分支从该点重新设置为当前 HEAD，以便它看起来是从 master 的当前尖端分支的。

此外，如果 master 没有进阶，那么 rebase 几乎是无操作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-15T16:01:59.320

我只发现对您列出的命令的一项迭代改进。你的命令：

```
git rebase -i `git merge-base my_branch master` 
```

一个改进是不必记住要变基的分支的名称。假设您当前位于要变基的分支上（根据我的经验，这几乎总是如此），您可以使用：

```
git rebase -i `git merge-base HEAD master` 
```

# php - 如何从php中的四维数组中提取一系列值？

> ID：10415839
> 
> 赞同：1
> 
> 时间：2012-05-02T14:30:15.927
> 
> 标签：php, arrays

我有一个四维数组

要访问我的数组中的一个值，我将使用以下代码：

```
$class = $schedule[$week][$day][$room][$hour]; 
```

我希望能够将一系列房间的特定周、日和小时的所有值提取到一个较小的数组中，而无需重组我的数组。

我在想类似的事情：

```
$classes = $schedule[$week][$day][range(1,10)][$hour]; 
```

我将如何实现这样的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:37:39.510

不确定这是否是您想要的：

```
for($i=1;$i<=10;++$i){
   echo $schedule[$week][$day][$i][$hour];
} 
```

这将回声房间从 1 到 10

您还可以将 10 个房间存储在`Array`以下位置：

```
 for($i=1;$i<=10;++$i){
     $classes[] = $schedule[$week][$day][$i][$hour];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:39:52.867

如果它始终是一个范围，您可以使用：

```
$classes = array();
for($current_room = 1; $current_room <= 10; $current_room++){
  $classes[$week][$day][$current_room] = $class[$week][$day][$current_room][$hour];
} 
```

如果您希望能够使用某些特定的房间号

```
$classes = array();
foreach(array(1,2,6,8) as $current_room){
  $classes[$week][$day][$current_room] = $class[$week][$day][$current_room][$hour];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:39:07.247

如果我说对了：

```
$classes = array();

for($a=1; $a<=10; $a++){
    $classes[$week][$day][$a][$hour] = $schedule[$week][$day][$a][$hour];
} 
```

或者

```
$classes = array();    

while($a<11){
    $classes[$week][$day][$a][$hour] = $schedule[$week][$day][$a][$hour];
    $a++;
} 
```

# html - 使用标记在 HTML 中嵌入 Google 地图代码

> ID：10415842
> 
> 赞同：25
> 
> 时间：2012-05-02T14:30:33.197
> 
> 标签：html, google-maps

我有几个地方的经纬度。我想在谷歌地图中显示它们。没关系，我不能在特定的经纬度位置显示标记。

例如，如果我有以下代码，是否可以仅放置一个选项来显示市场，因为所有纬度、经度坐标都来自数据库并与 php 相呼应

```
<iframe width="425" height="350" frameborder="0" scrolling="no" 
        marginheight="0" marginwidth="0" 
        src="http://maps.google.mu/?ie=UTF8&amp;ll=-20.234496,57.603722&amp;spn=0.093419,0.169086&amp;t=m&amp;z=13&amp;
        output=embed"></iframe>
        <br />
        <small><a href="http://maps.google.mu/?ie=UTF8&amp;ll=-20.234496,57.603722
                  &amp;spn=0.093419,0.169086&amp;t=m&amp;z=13&amp;source=embed"
               style="color:#0000FF;text-align:left">View Larger Map
               </a>
        </small> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-07-07T06:59:34.893

我建议这样，一行 iframe。根本不需要javascript。在查询 ?q=,

```
<iframe src="http://maps.google.com/maps?q=12.927923,77.627108&z=15&output=embed"></iframe>
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T14:39:49.300

您发布的元素看起来只是从 Google 地图嵌入功能中复制粘贴而来。

如果您想为您拥有的位置放置标记，您需要编写一些 JavaScript 来执行此操作。我也在学习如何做到这一点。

查看以下内容： [https ://developers.google.com/maps/documentation/javascript/overlays](https://developers.google.com/maps/documentation/javascript/overlays)

它有几个示例和代码示例，可以很容易地重复使用并适应您当前的问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-04T19:35:48.710

无需 javascript 或第三方“工具”，请使用：

```
<iframe src="https://www.google.com/maps/embed/v1/place?key=<YOUR API KEY>&q=71.0378379,-110.05995059999998"></iframe> 
```

place 参数提供标记

'q' 参数的格式有几个选项

确保您的 API 中启用了 Google Maps Embed API 和 Static Maps API，否则 google 将阻止该请求

有关更多信息，请[在此处查看](https://developers.google.com/maps/documentation/embed/guide)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-10T20:45:57.117

学习 Google 的 JavaScript 库是一个不错的选择。如果您不想开始编码，您可能会发现[Maps Engine Lite](https://mapsengine.google.com/map/)很有用。

它是 Google 最近发布的一个工具，您可以在其中创建您的个人地图（创建标记、绘制几何图形并调整颜色和样式）。

这是我发现的一个有用的教程： [快速提示：嵌入新的 Google 地图](http://webdesign.tutsplus.com/tutorials/applications/quick-tip-embedding-new-google-maps/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-07T09:26:32.750

使用这个，别忘了从

[https://console.developers.google.com/apis/credentials](https://console.developers.google.com/apis/credentials)

并替换它

```
 <div id="map" style="width:100%;height:400px;"></div>

<script>
function myMap() {

var map = new google.maps.Map(document.getElementById("map"), mapOptions);
  var myCenter = new google.maps.LatLng(38.224905, 48.252143);
  var mapCanvas = document.getElementById("map");
  var mapOptions = {center: myCenter, zoom: 16};
  var map = new google.maps.Map(mapCanvas, mapOptions);
  var marker = new google.maps.Marker({position:myCenter});
  marker.setMap(map);
}
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=myMap"></script> 
```

# sql - 为什么使用 DISTINCT 关键字时，这个查询结果没有变化？

> ID：10415843
> 
> 赞同：3
> 
> 时间：2012-05-02T14:30:36.873
> 
> 标签：sql, distinct

为什么两次查询的结果是一样的？（*我正在使用北风数据库。*）

```
SELECT      ContactTitle
        ,   COUNT(CustomerID) AS NumberOfCustomer
FROM        dbo.Customers
WHERE       ContactTitle LIKE '%sales%'
GROUP BY    ContactTitle
HAVING      COUNT(*) >= 5
ORDER BY    NumberOfCustomer desc 
```

和

```
SELECT 
DISTINCT    ContactTitle
        ,   COUNT(CustomerID) AS NumberOfCustomer
FROM        dbo.Customers
WHERE       ContactTitle LIKE '%sales%'
GROUP BY    ContactTitle
HAVING      COUNT(*) >= 5
ORDER BY    NumberOfCustomer desc 
```

结果是：

```
ContactTitle           NumberOfCustomer
---------------------  ----------------
Sales Representative         17
Sales Manager                11
Sales Associate               7
Sales Agent                   5 
```

以我自己的理解，第二个查询获取不同的标题并计算其记录，所以我希望结果不会是因为每个标题的记录数只有 1。我说的对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T14:33:31.967

`DISTINCT`在其他操作之后完成。首先，它执行 GROUP BY 已经使每一行都不同，所以`DISTINCT`是多余的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T14:33:59.090

distinct 应用于标题*和*计数。一旦您的选择完成计算，它就会从中创建不同的列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T14:34:04.570

`DISTINCT`将从结果集中过滤重复记录。由于在这种情况下没有重复记录，`DISTINCT`因此 没有效果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-02T14:38:46.530

这就是查询执行的工作方式。在您的第二条语句中，**`DISTINCT`**不执行任何附加功能，因为您**`GROUP BY`**包含相同的列名`ContactTitle`已经为您执行了该操作。

```
1\. FROM
2\. WHERE
3\. GROUP BY <-- You have specified the column `ContactTitle`, 
-- which means the results would be grouped by that column to product unique 
--result.
4\. HAVING
5\. SELECT <-- Adding DISTINCT on ContactTitle column here doesn't make much 
-- difference and it is actually redundant. DISTINCT is applied to the whole
-- row but the resultset already contains distinct rows grouped by the column 
-- `ContactTitle`.
6\. ORDER BY 
```

# c# - ASP.NET MVC 数据库访问

> ID：10415846
> 
> 赞同：4
> 
> 时间：2012-05-02T14:30:39.643
> 
> 标签：c#, database, asp.net-mvc, view

我一直在尝试在我的 ASP.NET MVC 项目中使用预先存在的数据库。我为我的（Microsoft SQL）数据库（“.\SQLEXPRESS.Databases”）创建了一个“数据连接”，其中包含“Test”表。该表有两列，“ID (int)”和“name (nvarchar(MAX))”。

在“模型”文件夹中，我放置了这个新类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

using System.Data.Entity;

namespace MvcMovie.Models
{
    public class Test
    {
        public int ID { get; set; }
        public string name { get; set; }
    }
} 
```

然后（在“控制器”中）我有一个新的控制器，“HelloWorldController”。在这个我有这个功能：

```
 public ActionResult Index()
    {
        DataSet data;
        DataTable table;

        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();

            SqlCommand select = new SqlCommand("SELECT * FROM Test", connection);

            SqlDataAdapter adapter = new SqlDataAdapter();
            adapter.SelectCommand = select;

            data = new DataSet();
            adapter.Fill(data, "Test");

            table = data.Tables[0]; //is the [0] really correct?
        }

        return View(/* HOW DO I GET THE TABLE TO THE VIEW? */);
    } 
```

现在我想在我的“Index.cshtml”文件（在“视图”中）显示表格的行。如何将表格从控制器获取到视图？我发现的是“@model”和“IEnumerable”，但这不起作用，因为我无法转换我的表格。

```
@model IEnumerable<MyProject.Models.Test>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@foreach (var item in Model) {
    <p>blaaaah</p>
} 
```

现在有三个问题：
1\. 我做错了什么吗？（DB-Access 的方法，..）
2\. 有更简单的方法吗？（没有所有适配器，.. 东西）
3\. 如果 !1&&!2，我如何让它工作？（获取视图文件以“了解”我的表）

感谢您的帮助，
问候，
卡巴

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T14:41:41.507

我建议您使用视图模型并摆脱 DataSets 和 Tables。让我们忘记那些数据类型。他们是遗产。

例如，您可以有一个方法（您最终会将其外部化到存储库中，以避免使用数据库访问污染您的控制器代码）：

```
public IEnumerable<Test> GetTests()
{
    using (var conn = new SqlConnection(connectionString))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "SELECT ID, name FROM Test";
        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                yield return new Test
                {
                    ID = reader.GetInt32(reader.GetOrdinal("ID")),
                    name = reader.GetString(reader.GetOrdinal("name")),
                }
            };
        }
    }

} 
```

然后你的控制器动作：

```
public ActionResult Index()
{
    IList<Test> tests = GetTests().ToList();
    return View(tests);
} 
```

到现在为止还挺好。最后对应的强类型视图来显示结果：

```
@model IList<Test>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
        </tr>
    </thead>
    <tbody>
        @for (var i = 0; i < Model.Count; i++)
        {
            <tr>
                <td>@Html.DisplayFor(x => x[i].ID)</td>
                <td>@Html.DisplayFor(x => x[i].name)</td>
            </tr>
        }
    </tbody>
</table> 
```

或者[`WebGrid`](http://weblogs.asp.net/andrebaltieri/archive/2010/11/01/asp-net-mvc-3-working-with-webgrid.aspx)如果您愿意，可以使用助手：

```
@model IList<Test>
@{
    var grid = new WebGrid(Model);
}
@grid.GetHtml() 
```

# android - 如何正确设计内容提供者？

> ID：10415848
> 
> 赞同：0
> 
> 时间：2012-05-02T14:31:00.460
> 
> 标签：android, android-contentprovider

这可能是一个明显的问题，但我不知何故无法弄清楚..

所以我是android开发的新手，并且正在构建一个实践应用程序。在我的应用程序中，我有几个模型。有一个用户，一个用户可以有很多店铺，每个店铺可以有很多产品。

所以它基本上是用户、商店、产品。

我应该为每个模型/表创建一个内容提供者吗？还是它是一个内容提供者，但取决于传入的 Uri，它决定从哪个模型/表创建/更新/删除/查询？

在我看来，内容提供者几乎就像一个内部 REST api。如果是这种情况，我想我只会有一个内容提供者，并且我会像在我的 REST api 中那样做所有的 CRUD 操作。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:46:01.177

经过大量研究后，我发现如果域是相关的，则将它们全部放在一个内容提供商中是可行的方法。

一个很好的例子是来自 android的[联系人内容提供者。](https://github.com/android/platform_packages_providers_contactsprovider/tree/master/src/com/android/providers/contacts)您可以从单个内容提供商的不同表中查找各种数据。

这个[答案](https://stackoverflow.com/questions/3814005/best-practices-for-exposing-multiple-tables-using-content-providers-in-android)也非常有用。

# javascript - jQuery 将类设置为内部 div

> ID：10415858
> 
> 赞同：0
> 
> 时间：2012-05-02T14:31:40.337
> 
> 标签：javascript, jquery

我正在尝试将一类无线电检查设置为一个 div 和所有以前的 div 鼠标悬停并在鼠标移出时删除。问题是它设置为围绕每个 div 的“a”标签。

有没有办法设置为内部 div？

```
 $(function() {
    $('.radio-fx').live( "mouseenter", function() { // Handles the mouseover
            var $self = $(this);
            $self.addClass('radio-checked').prevAll().addClass('radio-checked');
            $self.nextAll().removeClass('radio-checked');
    }).live ( "mouseout", function() { // Handles the mouseout
            $(this).removeClass('radio').prevAll().removeClass('radio');
    });
});   

  <div class="voteGroup">
       <input type="radio" id="price_0" value="1" name="price" style="display: none;" class="radio-checked">
       <a href="#" class="radio-fx price radio-checked" title=" check me ">
              <div class="radio"></div>
       </a>
       <input type="radio" id="price_1" value="2" name="price" style="display: none;" class="radio-checked">
       <a href="#" class="radio-fx price radio-checked" title=" check me ">
              <div class="radio"></div></a>
       <input type="radio" id="price_2" value="3" name="price" style="display: none;" class="radio-checked">
       <a href="#" class="radio-fx price radio-checked" title=" check me ">
               <div class="radio"></div>
       </a>
       <input type="radio" id="price_3" value="4" name="price" style="display: none;" class="radio-checked">
       <a href="#" class="radio-fx price radio-checked" title=" check me ">
               <div class="radio"></div>
       </a>
       <input type="radio" id="price_4" value="5" name="price" style="display: none;" class="radio-checked" checked="checked">
       <a href="#" class="radio-fx price radio-checked" title=" check me ">
               <div class="radio-checked"></div>
       </a>
   </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:36:12.850

试试这个：

```
$self.prevAll().andSelf().children('div').addClass('radio-checked'); 
```

它寻找先前元素的子元素。

其他行应该是：

```
$self.nextAll().children('div').removeClass('radio-checked'); 

$(this).prevAll().andSelf().children('div').removeClass('radio'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:41:35.020

```
$(function() {
    $('.radio-fx').live( "mouseenter", function() { // Handles the mouseover
            var $self = $(this);
            $self.prevAll().andSelf().find('div').addClass('radio-checked');
            $self.nextAll().find('div').removeClass('radio-checked');
    }).live ( "mouseout", function() { // Handles the mouseout
            $(this).prevAll().andSelf().find('div').removeClass('radio-checked');
    });
}); 
```

顺便说一句，`live` [在最新版本的 jQuery 中已弃用](http://api.jquery.com/live/)-请`on`改用。

**更新**这里是使用的版本`on`：

```
$(function() {
    $('.radio-fx').on("mouseenter", function() { // Handles the mouseover
            var $self = $(this);
            $self.prevAll().andSelf().find('div').addClass('radio-checked');
            $self.nextAll().find('div').removeClass('radio-checked');
    }).on("mouseout", function() { // Handles the mouseout
            $(this).prevAll().andSelf().find('div').removeClass('radio-checked');
    });
}); 
```

jsFiddle[示例](http://jsfiddle.net/8HcKP/)。

# dll - 注册 32 位和 64 位 DLL

> ID：10415861
> 
> 赞同：3
> 
> 时间：2012-05-02T14:31:53.447
> 
> 标签：dll, com, 64-bit, 32-bit, regsvr32

我指的是这个线程

[如何安装 32 位和 64 位版本的 COM DLL 和“自动选择”？](https://stackoverflow.com/questions/4403501/how-do-i-install-both-32-bit-and-64-bit-versions-of-a-com-dll-and-auto-select)

我们的情况完全相同。来自同一个项目的具有相同 CLSID 应用 ID 的命名空间扩展 Dll 32 位和 64 位。现在注册这两个 Dll 可以完美地工作。注销会带来一些错误。第一次注销有效，但第二次失败。因为我认为windows（？）认为DLL已经被注销......

这两个 Dll 需要不同的 CLSID 和/或 App ID 吗？？？

亲切的问候，迈克尔

编辑：这是 DllUnregisterServer 所做的：

```
STDAPI DllUnregisterServer(void){

    _AtlModule.UpdateRegistryAppId(FALSE);
    HRESULT hRes2 = _AtlModule.UnregisterServer(TRUE);
    if (hRes2 != S_OK)
        return hRes2;
    AFX_MANAGE_STATE(_afxModuleAddrThis);

    if (!COleObjectFactoryEx::UpdateRegistryAll(FALSE))
        return ResultFromScode(SELFREG_E_CLASS);

     return NOERROR;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:44:37.940

Windows 不在乎 - 它`regsvr32`执行注册。您`regsvr32`对 32 位 DLL 使用 32 位版本，对 64 位 DLL 使用 64 位版本。

两个版本都只是加载 DLL，找到`DllRegisterServer()`/`DllUnregisterServer()`入口点，调用它并观察返回值。无论进入什么都不是`regsvr32`生意。

您的问题是这些功能之一工作错误。你必须调试这个。一个好的开始是使用 Process Monitor 实用程序来观察执行了哪些注册表访问以及它们是否是您所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:53:57.257

[从 sharptooth 向答案](https://stackoverflow.com/a/10416117/501196)添加更多信息，如果您通过执行 regsvr32 以编程方式注销您的 dll，那么您可能调用了错误的 regsvr32 文件。您需要确保调用 regsvr32`System32`来注销 64 位 dll，调用 regsvr32 来`SysWow64`注销 32 位版本。您可以 p/Invoke 函数[GetSystemWow64Directory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724405%28v=vs.85%29.aspx)以检索 SysWow64 文件夹位置。

# php - jquery php在用户进入房间时加载

> ID：10415866
> 
> 赞同：0
> 
> 时间：2012-05-02T14:32:09.937
> 
> 标签：php, jquery, setinterval

我正在开发一个多人棋盘游戏。哪个用户进入一个空房间，并等待其他人加入以便他们可以开始玩。我面临的问题是，当第一场比赛加入空房间时。房间是空的，他的名字显示为迈克尔。当第二个玩家（彼得）从另一个浏览器加入房间时，迈克尔将被列为玩家 1，他为玩家 2。但是我怎样才能使显示的迈克尔浏览器（彼得加入房间）。我正在考虑使用 jquery setInterval，但我不觉得这很有效，因为它一直在调用服务器。有什么建议么？示例：Michael 前往 www.board.com/game=1 并等待有人加入 Peter 前往 www.board.com/game=1 并加入。在 Peters 浏览器中，他可以看到房间里的 Micael。但在MICHAELS 浏览器中他看不到。如果有人加入了房间，我如何让 michael 通知？jQuery setinterval 只是解决方案吗？不是效率低吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:46:16.797

你可以从浏览器打开一个网络套接字...

[http://www.websocket.org/](http://www.websocket.org/)

但否则，您将不得不定期轮询服务器以获取更新的数据。我将设置一个 php 文件来提供一个带有您的界面更改的 json blob（仅限游戏/聊天数据），然后使用 jquery，设置一个 ajax 调用php 文件每 10-20 秒关闭一次。如果您只是轮询数据，则不会占用太多资源..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:51:19.570

HTTP 不是为这种情况而设计的，但我有个好消息，互联网已经发展，您可以通过不同的方式实现实时应用程序。首先，更新、更好但兼容性较差的 HTML5 WebSockets。或者使用 Ajax 定期请求更新您的页面或使用诸如“彗星编程”之类的技术发送请求并让它们保持打开状态，直到服务器有响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:37:06.530

HTTP 的本质是您**不能**调用用户的浏览器，也不能使其从服务器重新加载（或加载信息）。只有浏览器可以随时访问服务器上的内容。这就是为什么唯一的选择（如果您不想重新加载页面）是使用 jQuery 并使用短时间间隔调用服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:37:39.930

如果结果不符合您的需求，您可以执行 ajax 请求并在回调之外再次发出相同的请求，并且可能使用 window.setTimeout("method()", 1000); 延迟它

# html - Max-height 和 margin-bottom 在 Webkit 中可以正常工作，而不是在 Firefox 中

> ID：10415869
> 
> 赞同：1
> 
> 时间：2012-05-02T14:32:14.413
> 
> 标签：html, css

我的目标是使第二个 div 占用尽可能多的空间。如果浏览器窗口太小，滚动条应该出现在 div 中。在 Webkit 中工作正常，但在 Firefox 中不行。

我猜这个问题与：

*   最大高度
*   高度：100%
*   最大高度和边距。

如果我给 HTML 和 BODY***高度***和/或***max-height***，那么 max-height 正在工作，但身体上的额外边距不起作用——不在 Webkit 或 Firefox 中。

**你可以在这里找到代码：http:** [//dl.dropbox.com/u/514866/uploaded/box-test.html](http://dl.dropbox.com/u/514866/uploaded/box-test.html)

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:46:16.207

您选择的 doctype`<!HTML>`不会触发标准模式，因此您的页面以 quirks 模式显示。

尝试将您的文档类型更改为`<!DOCTYPE html>`，然后重复您的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:50:13.260

使用这些

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

# html - 由特定单元格确定的表格行高

> ID：10415871
> 
> 赞同：2
> 
> 时间：2012-05-02T14:32:26.423
> 
> 标签：html, css

我有以下代码：

```
<table>
    <tr>
        <td class="first">
            <img src="ReallyLargeImage.png" />
        </td>
        <td class="second">
            One line of text<br />
            Another line of text<br />
        </td>
    </tr>
    <tr>
        <td class="first">
            <img src="AnotherReallyLargeImage.png" />
        </td>
        <td class="second">
            This<br />
            has<br />
            four<br />
            lines<br />
        </td>
    </tr>
    ...
</table> 
```

我希望高度`td.second`来确定每行的高度，并且图像按`td.first`比例缩小（保持它们的大小比例）以适应该高度。

如果我可以只使用 CSS/属性来保持整洁，那就太好了，javascript 也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:38:41.133

**CSS**

```
.first img { display: none; } 
```

**JS**

```
$("table tr").each(function(){
    $(this).find(".first img").css("max-height", 
        $(this).find(".second").height()).show();
});​ 
```

首先，您可以使用 css 隐藏图像，以便`height()`计算不会因图像大小而出现偏差。如果它没有隐藏，那么高度计算似乎由于某种原因而偏离了。也许是一个 jQuery 错误？然后，一旦您设置了，`max-height`您就可以显示图像。

* * *

**示例：http: [//jsfiddle.net/hunter/c3jP6/](http://jsfiddle.net/hunter/c3jP6/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:39:58.590

你可以使用这个：

```
<img style="width:100%;height:100%;"/> 
```

只是为了自动适应/缩放您的图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:40:11.430

你想动态改变图像的大小吗？所以你必须得到 td.second 的高度，你不能用 CSS 做到这一点，你肯定需要 javascript。

你可以像这样得到元素的高度

```
var divh=document.getElementById('id').offsetHeight; 
```

这适用于 div，但我不确定表格单元格，无论如何我发现了一些其他形式的讨论，看看你是否可以从他们那里得到任何帮助

[使用 Javascript 获取表格单元格高度](http://dsgdev.wordpress.com/2007/03/07/get-table-cell-heights-with-javascript/)
[如何获取 div 的像素高度？](http://www.codingforums.com/showthread.php?t=66352)

获得元素的高度后，您可以使用 javascript 设置图像的高度。

# node.js - 使用 Express 在 Node.js 应用程序中显示表单验证错误的最佳方式？

> ID：10415873
> 
> 赞同：3
> 
> 时间：2012-05-02T14:32:32.337
> 
> 标签：node.js, express

我们的注册和登录表单需要服务器端验证逻辑。我想提出在客户端上为每个输入块显示消息的最佳方式。

申请流程：

1.  客户端表单提交
2.  节点验证
3.  重定向到在步骤 1 中呈现表单的视图。

我倾向于`req.flash()`显示表单输入消息，但也许有更多的 OOP 方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:59:07.350

我有一个验证中间件来验证表单数据。如果验证失败，我可以告诉中间件要重新呈现什么表单，并且它将有一个带有字段名称的错误对象和该字段具有的错误数组。

我的表格最终看起来像这样：

```
include ../mixins/form-helpers

mixin errors()

form(action=url('messages_create'), method='post')

  mixin csrf()

  fieldset

    legend contact

    mixin field('text', 'subject', 'Subject')
    mixin field('textarea', 'message', 'Message')

  .form-actions
    mixin submit('Send') 
```

如果我在没有主题和消息的情况下发布此表单，我将设置以下对象。

```
var errors = { subject: ['is required'], message: ['is required'] }; 
```

我的错误混合将呈现所有错误，我的字段混合将添加一个错误类，因此我可以为失败的字段添加红色边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T08:17:15.187

检查[有效性](https://github.com/afincha/validity)。它专为将验证和错误附加到表单输入字段并适当地呈现它们而设计。

# ruby-on-rails - Ruby on Railsprotect_from_forgery，为什么不在幕后默认？

> ID：10415874
> 
> 赞同：1
> 
> 时间：2012-05-02T14:32:36.003
> 
> 标签：ruby-on-rails

我刚刚开始学习 Ruby/Rails，遵循了一些指南和视频。基本上，从我收集的信息来看，rails 的重点是假设默认值，并将它们隐藏在幕后，然后当您想要更改功能时，您可以。

当我创建一个新项目时，我注意到 ApplicationController 中的“protect_from_forgery”行。为什么当我在 IDE 中创建项目时会在文件中创建它，而不是在幕后/超类中保持默认设置？似乎对我所读的内容有点反常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:02:10.623

我认为答案是您需要知道默认情况下，csrf 保护在任何地方都是开箱即用的。这只是一种确保您知道它的方法，以防您在某些情况下需要禁用它。如果它被隐藏在幕后，并且您想为某些操作禁用它，则必须四处挖掘并找出如何首先启用 csrf 保护。Rails 说：“看这很重要，如果您想要的不是默认行为，请从这里开始！”

# android - MIFARE CLASSIC 没有回应

> ID：10415876
> 
> 赞同：0
> 
> 时间：2012-05-02T14:32:45.983
> 
> 标签：android, authentication, nfc

我正在尝试验证 MIFARE 经典卡的任何扇区。我正在使用 twinlinx mymax 贴纸（几乎可以启用任何蓝牙设备 NFC）。它将命令发送到连接的 NFC 标签。我已经使用 Ultralight C 标签建立了连接并发送和接收了数据，但到目前为止，我还没有成功访问 Mifare Classic。这是我的验证码：

```
 private boolean authenticate(int sector, byte[] key, boolean keyA) {

    byte[] cmd = new byte[12];

    // First byte is the command
    if (keyA) {
        cmd[0] = 0x60; // phHal_eMifareAuthentA
    } else {
        cmd[0] = 0x61; // phHal_eMifareAuthentB
    }

    // Second byte is block address
    cmd[1] = (byte) 0x03;

    // Next 6 bytes are the key
    System.arraycopy(key, 0, cmd, 2, 6);

    // Next 4 bytes is the UID
    System.arraycopy(Answer, 3, cmd, 8,4);

    byte[] test = null;

    //this makes a connection to the NFC tag (and this works)
    TR.ConnectToExternalCard(AUTH, (byte)0x00);

    //checking if the tag is still connected
    if (TR.isCardPresent() == true){

    //sending command to authenticate
    test = TR.SendCommandPropAndWaitResponse(cmd, (byte) 0x00);
    }

    try {
        if (test != null) {

            return true;
        }
    } 
```

我使用的是标准的 MIFARE Classic 钥匙，标签是新出厂的。发送到标签的完整命令（以字节为单位）是：

[0x60, 0x3, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf3, 0xf4, 0xa9, 0xfb]

有任何想法吗？该标签似乎没有响应...尝试访问其他经典标签但也没有成功。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:46:46.153

使用不公开的 SDK 很难说你做错了什么。但是，API 看起来很熟悉，所以无论如何我都会尝试一下。我可以想到一些你可以尝试的事情（按可能性降序排列）：

1.  UID 字节的顺序可能有误，因此请尝试颠倒它们。
2.  也许`Answer`不仅包含 UID，还包含其他字节（例如 SAK），并且您从中复制了错误的字节。
3.  您拥有的 MIFARE Classic 标签可能有一个 7 字节的 UID，而您没有使用正确的 4 个字节。
4.  可能`TR.SendCommandPropAndWaitResponse()`是使用错误的方法。或许 MIFARE Classic 有专门的方法。
5.  MyMax 贴纸可能不支持 MIFARE Classic。我没有在他们的网站上看到他们这样做的明确确认。但是，有迹象表明他们的解决方案基于 NXP 硬件，该硬件始终支持 MIFARE Classic。

# regex - Perl文件复制复制输出

> ID：10415877
> 
> 赞同：0
> 
> 时间：2012-05-02T14:32:48.997
> 
> 标签：regex, perl, file-io, duplicates

我正在尝试编写一个菜单驱动的模块化 perl 脚本，该脚本将捕获用户输入并自动化网络配置过程。该脚本必须能够安装所需的 Arch 软件包，配置 AP 模式，为用户选择的接口配置 DHCP 或静态地址，并提供启用桥接的选项。（编辑：脚本还需要能够启用和配置 dhcpd 服务）

我现在坚持的部分是创建 rc.conf 文件的备份，读取文件并编辑需要修改的行（如果已经静态配置了网络接口）。这个脚本是在 ArchLinux 中使用的，我做了一些搜索，没有找到任何满足我需求的东西。

使用通用输入 `$ip = 1.1.1.1; $Bcast = 2.2.2.2; $netmask = 3.3.3.3; $GW = 4.4.4.4;`

我花了大约两个小时阅读有关文件 I/O 的内容，并尝试了一些不起作用的方法，包括废弃多文件 IO 方法并使用类似的方法：`while(<IS>){s/^interface.?=(.*)$/"interface=@if[0] \n"/;}`为每个需要替换且不能的值输入输入不能让它真正做任何事情。

```
 if (system ("cat","/etc/rc.conf","|","grep","interface")){   
    use File::Copy "cp";
    $filename = "/etc/rc.conf"; 
    $tempfile = "/etc/rc.tmp";  
    $bak = "/etc/rc.bak";
    cp($filename,$bak);
    open(IS, $filename); 
    open(OS, ">$tempfile"); 
    while(<IS>){ 
        if($_ =~ /^interface.?=(.*)$/){ print OS"interface=@if[0] \n";}
        if($_ =~ /^address.?=(.*)$/){ print OS "address=$ip\n";}
        if($_ =~/^netmask.?=(.*)$/){ print OS "netmask=$netmask\n";}
        if($_ =~/^broadcast.?=(.*)$/){ print OS "broadcast=$Bcast\n";}
        if($_ =~/^gateway.?=(.*)$/){ print OS "gateway=$GW\n"; }
        else {print OS $_;} 
    }
    close(IS); close(OS); 
    unlink($filename); rename($tempfile, $filename);
} 
```

rc.conf 之前

```
#
# /etc/rc.conf - Main Configuration for Arch Linux

. /etc/archiso/functions

LOCALE_DEFAULT="en_US.UTF-8"
DAEMON_LOCALE_DEFAULT="no"
CLOCK_DEFAULT="UTC"
TIMEZONE_DEFAULT="Canada/Pacific"
KEYMAP_DEFAULT="us"
CONSOLEFONT_DEFAULT=
CONSOLEMAP_DEFAULT=
USECOLOR_DEFAULT="yes"

LOCALE="$(kernel_cmdline locale ${LOCALE_DEFAULT})"
DAEMON_LOCALE="$(kernel_cmdline daemon_locale ${DAEMON_LOCALE_DEFAULT})"
HARDWARECLOCK="$(kernel_cmdline clock ${CLOCK_DEFAULT})"
TIMEZONE="$(kernel_cmdline timezone ${TIMEZONE_DEFAULT})"
KEYMAP="$(kernel_cmdline keymap ${KEYMAP_DEFAULT})"
CONSOLEFONT="$(kernel_cmdline consolefont ${CONSOLEFONT_DEFAULT})"
CONSOLEMAP="$(kernel_cmdline consolemap ${CONSOLEMAP_DEFAULT})"
USECOLOR="$(kernel_cmdline usecolor ${USECOLOR_DEFAULT})"

MODULES=()

UDEV_TIMEOUT=30
USEDMRAID="no"
USEBTRFS="no"
USELVM="no"

HOSTNAME="archiso"

DAEMONS=(hwclock syslog-ng)

interface=eth0
address=192.168.0.99
netmask=255.255.255.0
broadcast=192.168.0.255
gateway=192.168.0.1 
```

rc.conf 之后

```
#
# /etc/rc.conf - Main Configuration for Arch Linux

. /etc/archiso/functions

LOCALE_DEFAULT="en_US.UTF-8"
DAEMON_LOCALE_DEFAULT="no"
CLOCK_DEFAULT="UTC"
TIMEZONE_DEFAULT="Canada/Pacific"
KEYMAP_DEFAULT="us"
CONSOLEFONT_DEFAULT=
CONSOLEMAP_DEFAULT=
USECOLOR_DEFAULT="yes"

LOCALE="$(kernel_cmdline locale ${LOCALE_DEFAULT})"
DAEMON_LOCALE="$(kernel_cmdline daemon_locale ${DAEMON_LOCALE_DEFAULT})"
HARDWARECLOCK="$(kernel_cmdline clock ${CLOCK_DEFAULT})"
TIMEZONE="$(kernel_cmdline timezone ${TIMEZONE_DEFAULT})"
KEYMAP="$(kernel_cmdline keymap ${KEYMAP_DEFAULT})"
CONSOLEFONT="$(kernel_cmdline consolefont ${CONSOLEFONT_DEFAULT})"
CONSOLEMAP="$(kernel_cmdline consolemap ${CONSOLEMAP_DEFAULT})"
USECOLOR="$(kernel_cmdline usecolor ${USECOLOR_DEFAULT})"

MODULES=()

UDEV_TIMEOUT=30
USEDMRAID="no"
USEBTRFS="no"
USELVM="no"

HOSTNAME="archiso"

DAEMONS=(hwclock syslog-ng)

interface=eth0 
interface=eth0
address=1.1.1.1
address=192.168.0.99
netmask=3.3.3.3
netmask=255.255.255.0
broadcast=2.2.2.2
broadcast=192.168.0.255
gateway=4.4.4.4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:43:26.480

问题是你的`if`/////链，应该是/////链。`if`_ 每行不匹配的触发器，包括匹配的触发器，等等。`if``if``if``else``if``elsif``elsif``elsif``elsif``else``else { print OS $_ }``gateway=``interface``address`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:44:29.377

我不会评论你剧本其余部分的智慧，但你有：

```
if (system ("cat","/etc/rc.conf","|","grep","interface")){ 
```

[系统](http://perldoc.perl.org/functions/system.html)返回`0`成功。

`system`因此，只有当该调用失败时，您才会进入该块。

事实上，我现在在 Windows 系统上没有（`/etc/rc.conf`但感谢[Cygwin](http://www.cygwin.com/)。运行以下脚本：`cat``grep`

```
#!/usr/bin/env perl

use strict; use warnings;

if (system ("cat","/etc/rc.conf","|","grep","interface")){
    print "*** it worked! ***\n";
    if ($? == -1) {
        print "failed to execute: $!\n";
    }
    elsif ($? & 127) {
        printf "child died with signal %d, %s coredump\n",
            ($? & 127),  ($? & 128) ? 'with' : 'without';
    }
    else {
        printf "child exited with value %d\n", $? >> 8;
    }
} 
```

产生输出：

```
cat: /etc/rc.conf: 没有这样的文件或目录
cat: |: 没有这样的文件或目录
cat: grep: 没有这样的文件或目录
cat：接口：没有这样的文件或目录
*** 有效！***
孩子以值 1 退出
```

这意味着`system`返回了一个失败代码。现在，如果你想使用 shell 管道和重定向，你应该传递`system`一个字符串，而不是一个列表，然后像这样检查：

```
if (system ('cat /etc/rc.conf | grep interface') == 0) { 
```

另一方面，我宁愿不信任传播退出状态的 shell。

以下内容应为您指明更好的方向：

```
#!/usr/bin/env perl

use strict;use warnings;

my %lookup = (
    eth0 => {
        address => '1.1.1.1',
        broadcast => '2.2.2.2',
        netmask => '3.3.3.3',
        gateway => '4.4.4.4',
    },
    wlan0 => {
        address => '5.5.5.5',
        broadcast => '6.6.6.6',
        netmask => '7.7.7.7',
        gateway => '8.8.8.8',
    },

);

while (my $line = <DATA>) {
    if (my ($interface) = ($line =~ /^interface=(\S+)/)) {
        print $line;
        if (exists $lookup{$interface}) {
            $line = process_interface(\*DATA, $lookup{$interface});
            redo;
        }
    }
    else {
        print $line;
    }
}

sub process_interface {
    my ($fh, $lookup) = @_;
    my $keys = join '|', sort keys %$lookup;

    while (my $line = <DATA>) {
        $line =~ s/\A($keys)=.+/$1=$lookup->{$1}/
            or return $line;
        print $line;
    }

    return;
}

__DATA__
#
# /etc/rc.conf - Main Configuration for Arch Linux

. /etc/archiso/functions

# stuff

interface=eth0
address=192.168.0.99
netmask=255.255.255.0
broadcast=192.168.0.255
gateway=192.168.0.1
interface=wlan0
address=192.168.0.99
netmask=255.255.255.0
broadcast=192.168.0.255
gateway=192.168.0.1 
```

输出：

```
#
# /etc/rc.conf - Arch Linux 的主要配置

. /etc/archiso/functions

＃ 东西

接口=eth0
地址=1.1.1.1
网络掩码=3.3.3.3
广播=2.2.2.2
网关=4.4.4.4
接口=wlan0
地址=5.5.5.5
网络掩码=7.7.7.7
广播=6.6.6.6
网关=8.8.8.8
```

# javascript - IE9：设置 document.domain 时访问被拒绝

> ID：10415878
> 
> 赞同：1
> 
> 时间：2012-05-02T14:32:52.573
> 
> 标签：javascript, internet-explorer, dom, same-origin-policy, cleditor

在 IE9 上使用带有 CLEditor 的 document.domain 时出现问题。当我添加 document.domain 时，我收到错误消息“SCRIPT5：访问被拒绝。”。它适用于 Firefox 以及当我删除 document.domain 时。我仍然没有使用跨子域 iframe，所有 iframe 都在同一个域中。

如何在不删除 document.domain 的情况下修复它？

这是我设置 document.domain 的方式：

```
 <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
  <script type="text/javascript">
    document.domain = 'mydomain.com';
  </script>
  <script type="text/javascript" src="jquery.cleditor.js"></script> 
```

这是出现错误的 CLEditor 代码的一部分：

```
 // Create a new iframe
    var $frame = editor.$frame = $('<iframe frameborder="0" src="javascript:true;" id="iframe">')
      .hide()
      .appendTo($main);

    // Load the iframe document content
    var contentWindow = $frame[0].contentWindow,
      doc = editor.doc = contentWindow.document,     // here is the error message
      $doc = $(doc); 
```

这是 CLEditor 的完整源代码：http: [//premiumsoftware.net/cleditor/jquery.cleditor.js](http://premiumsoftware.net/cleditor/jquery.cleditor.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:05:20.823

要使用`document.domain`，它需要在通信双方设置为相同的字符串——这里，在 iFrame 和 parent 中都设置。

# php - 使用 PHP shell_exec 将网络上的 PDF 自动打印到网络打印机不工作

> ID：10415881
> 
> 赞同：0
> 
> 时间：2012-05-02T14:33:00.073
> 
> 标签：php, pdf, wamp, tcpdf, shell-exec

我正在使用 shell_exec() 使用以下 PHP 代码（全部在一行上）通过 Adob​​e Reader 将存储在 LAN 上的 PDF 自动打印到 LAN 上的打印机：

```
shell_exec("'C:\Program Files\Adobe\Reader 10.0\Reader\AcroRd32.exe' 
/t \\hnurensp01\RepairTickets\179694.pdf \\hnurenfp01\Accounts_FS-1128MFP"); 
```

我希望这样做是打开 adobe reader，在网络上打开 PDF 并打印到网络打印机。使用此行运行 PHP 脚本时，它不会打开 adobe reader 或打印它。但是，当我复制该代码并在命令提示符（客户端）中执行时，它可以工作并打印。对命令行只有轻微的修改（都在一行上）：

```
"C:\Program Files\Adobe\Reader 10.0\Reader\AcroRd32.exe"
/t \\hnurensp01\RepairTickets\179694.pdf \\hnurenfp01\Accounts_FS-1128MFP 
```

它与在服务器端执行的 PHP 脚本有关吗？我试过在服务器上运行相同的命令行，它也可以工作。似乎只是当它通过 PHP 时，它什么也没做。

我的最终结果必须是打印出一个服务器端 PDF，而最终用户的交互尽可能少。注意：这是一个 WAMP 环境。

有任何想法吗？

谢谢。

**更新：** 尝试将代码放入批处理文件并以这种方式调用它，但仍然无效。尝试使用`exec()`，`shell_exec()`但仍然没有乐趣。出于某种原因，当我通过双击运行批处理文件时，它工作正常。当我使用 PHP 调用它时，它除了打开两个未关闭的 acrord32.exe 实例之外什么都不做，因此 PHP 脚本似乎永远不会完成。我好糊涂...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:10:13.163

试试这个：

```
echo "'C:\Program Files\Adobe\Reader 10.0\Reader\AcroRd32.exe' /t \\hnurensp01\RepairTickets\179694.pdf \\hnurenfp01\Accounts_FS-1128MFP" 
```

它返回：

```
'C:\Program Files\Adobe\Reader 10.0\Reader\AcroRd32.exe' /t \hnurensp01\RepairTickets9694.pdf \hnurenfp01\Accounts_FS-1128MFP 
```

在 PHP 中，反斜杠用作“特殊”字符，因为它用于生成制表符和换行符`\t`以及`\n`. 转义反斜杠的正确方法是在前面加上另一个：作为输出`\\`生成。`\`

这就是为什么您的 PHP 脚本不起作用的原因。双反斜杠将被打印到外壳上，就好像您只输入了一个一样！您将需要转义该代码行中的*每个*反斜杠：

```
shell_exec("'C:\\Program Files\\Adobe\\Reader 10.0\\Reader\\AcroRd32.exe' 
    /t \\\\hnurensp01\\RepairTickets\\179694.pdf \\\\hnurenfp01\\Accounts_FS-1128MFP"); 
```

# facebook - FB.init 已被调用

> ID：10415884
> 
> 赞同：53
> 
> 时间：2012-05-02T14:33:09.277
> 
> 标签：facebook, facebook-opengraph

我正在构建 facebook iframe 应用程序。我的应用程序被加载一次（我收到了一次签名请求），然后我使用内部域链接浏览 iframe 中的页面。我注意到我在 Chrome 和 Firefox 中都看到了这些奇怪的消息

```
FB.init has already been called - this could indicate a problem 
```

我很确定这个方法只被调用一次，而且 Facebook 似乎希望我在每次应用程序加载时调用它一次（而不是每页一次）。

```
window.fbAsyncInit = function() {
  FB.init({
    appId: param('facebook_app_id'),
    frictionlessRequests: true,
    oauth: true,
    channelUrl: site_url('/channel.html')
  })
} 
```

我在这里犯了什么错误（如果有的话）？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-05-02T20:38:40.513

从您将参数传递给`js.src`like的那一刻起`#xfbml=1&appId=X`，FB SDK 将自动初始化，因此`FB.init`将尝试重新初始化。所以在您的代码中，您不必删除该`FB.init`函数，只需确保您没有在异步加载 JS SDK 的代码。

替换这个：

```
js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=X"; 
```

和 ：

```
js.src = "//connect.facebook.net/en_US/sdk.js"; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-02T19:38:55.700

如果你真的需要多次调用 init ，你可以这样做：

```
FB._initialized = false;
FB.init(); 
```

但这对我来说毫无意义，我有一点不同的问题，但它也与`FB.init has already been called - this could indicate a problem`消息有关。

我有基于 AJAX 的网站，在每个页面加载后，我需要从从 AJAX 请求获得的 HTML 呈现 XFBML（注释，如按钮和其他）：

```
 <div class="fb-comments" data-href="{REMOVED}" data-num-posts="5" data-width="760" colorscheme="dark"></div> 
```

为此，您可以在需要渲染 XFBML 时运行它：

```
FB.XFBML.parse(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:13:09.430

我也遇到过这个问题。我只是删除`FB.init({...})`了一部分，它开始使用以下代码：

```
window.fbAsyncInit = function () {
    FB.Event.subscribe('auth.logout', function () {
        // subscribe parts
    });

    // here is where fb.init() code was
};
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=X";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 
```

我猜它现在会自动初始化代码，因此无需手动执行。现在我的代码又可以工作了。我希望这有帮助。

# android - 需要有关 android 安装 SDcard 的帮助

> ID：10415885
> 
> 赞同：-1
> 
> 时间：2012-05-02T14:33:15.800
> 
> 标签：android

我正在处理“mount ntfs sdcard”这就是问题：-如果我将 sdcard 挂载到**/mtn/sdcard**以外的**另一个文件夹**，那么我的 sdcard 工作会找到 - 如果我将它挂载到**/mnt/sdcard**，那么 android 不会例外：“SD 卡是当前未安装”在**adb shell**中，我键入**mount**命令，看到我的 SD 卡已**安装**到**/mnt/sdcard**

 ******但事实上 SDcard 文件夹无法访问。我认为android除了在/mnt/sdcard上挂载**ntfs** **sdcard**之外没有，因为它编程在/mnt/sdcard上挂载**vfat** sdcard。

 ****现在的问题是：插入SD卡时我在哪里可以找到android的安装代码或安装程序？我想修改它以接受 ntfs sdcard。

P/S：我在 GB 2.3.6 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:39:20.357

这是一个非常具体的问题，我怀疑你会在这里得到答案。您可能想尝试从可以在此处找到的源代码中自己找到它：

[https://sites.google.com/a/android.com/opensource/download](https://sites.google.com/a/android.com/opensource/download)

我做了一些谷歌搜索，发现了这个：

[http://cateee.net/lkddb/web-lkddb/NTFS_FS.html](http://cateee.net/lkddb/web-lkddb/NTFS_FS.html)，你可能需要修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:44:03.660

在 Android 上，sdcard 的安装由 vold 守护进程管理。

如果您想要一个稳定的系统，您可能需要获取vold 来管理您的自定义安装，从系统中删除vold 并自己完成整个工作，或者以某种方式获取它和您的自定义解决方案以避开彼此的方式。

许多自定义 ROM 以不同的方式使用 vold - 对 sdcard 进行分区并添加用于存储应用程序的 unix 样式文件系统，将整个备用 android 安装放在 sdcard 或平板电脑内部存储区域等。您可能会通过以下方式获得一些想法看那些，阅读他们的发展讨论历史，等等。**********

# e-commerce - Commerce Server 2009 API - 获取所有配置文件

> ID：10415886
> 
> 赞同：0
> 
> 时间：2012-05-02T14:33:22.300
> 
> 标签：e-commerce, microsoft-commerce-server

有没有办法使用 CS2009 API 来获取所有配置文件？我试图迁移到 CS2009 API，我需要能够从自定义配置文件中获取所有配置文件。

看起来使用“CommerceQuery”时，您需要传递一个“主要”、“唯一”或“加入”字段。这限制了我获取所有个人资料的能力。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:10:49.463

CS 2099 上没有获取所有配置文件的 API……您可以使用 CS 2007 核心 API 在配置文件系统 [http://ecommerceondotnet.blogspot.it/2009/12/search-on-profile-system 上进行搜索。 html](http://ecommerceondotnet.blogspot.it/2009/12/search-on-profile-system.html) ...甚至更好地对您的数据库进行sql查询..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:58:59.973

我同意 Stelio 的观点。我还建议使用自定义 SQL 编写您自己的序列组件来执行此操作，它可以让您更好地控制查询和性能。我不建议使用 API。使用 .NET 反射器检查配置文件 API 代码，或者查看 _profiles 数据库中的存储过程，您就会明白我的意思。

# php - 在 PHP 字符串中保留特殊字符

> ID：10415888
> 
> 赞同：0
> 
> 时间：2012-05-02T14:33:28.593
> 
> 标签：php, special-characters

我有一个发布到 PHP 的 HTML 表单。我在 PHP 中得到了一堆变量，例如：

```
$firstname = $_POST['firstname']; 
```

等等。稍后，这些变量会打印到我使用 PHP 生成的 PDF 文件中。

然而，很多时候表单是用“特殊字符”提交的，比如 ë、é、ü 等等。我想保留这些字符。此时，这些字符将打印到 PDF 中：

```
Ã© Ã« 
```

如何保留重音字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:36:28.030

确保字符编码正确：

*   表单应位于具有 UTF-8 字符集的页面上
*   您可能需要调用`utf8_encode`or `utf8_decode`，根据您在服务器上获得的值
*   仔细检查 PDF 的字符编码是否为 UTF-8。

# java - 如何检查上次访问时是否设置了cookie？

> ID：10415899
> 
> 赞同：0
> 
> 时间：2012-05-02T14:33:51.367
> 
> 标签：java, web-applications, cookies

在 java web 应用程序中，我想检查登录的用户是否是返回用户。如何检查是否已经存在在早期登录时设置的 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:36:42.877

在`HttpServletRequest`你有一个`getCookies()`方法，它会给你一个客户端与他的请求一起发送的 cookie 数组。

[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getCookies%28%29](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getCookies%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:39:35.393

用户登录时设置cookie：

```
Cookie c = new Cookie("visit", "old")
c.setMaxAge(3600*24*365*1000); // 1 year (for example)
response.addCookie(new Cookie("visit", "old")); 
```

现在您可以在具有新会话的用户进入系统时检查此 cookie: `request.getCookies()`，然后遍历返回的数组并找到“您的”cookie。如果 cookie 存在，这是“旧”用户，否则是新用户。

# c# - “public new virtual void Method()”是什么意思？

> ID：10415900
> 
> 赞同：16
> 
> 时间：2012-05-02T14:33:51.320
> 
> 标签：c#

什么时候使用新的虚拟关键词来装饰方法？感情是什么？就像定义一个接口，并添加一个类来继承接口。而是使用新的virtual来实现接口方法。

```
 interface IPrinter
{
    void Print();
}

 public class PrinterOne : IPrinter
{
    public void Print() 
    {
        Console.WriteLine("PrinterOne.");
    }
}

public class PrinterTwo : PrinterOne
{
    public new virtual void Print()
    {
        Console.WriteLine("PrinterTwo.");
    }
}

public class PrinterThree : PrinterTwo
{
    public override void Print()
    {
        Console.WriteLine("PrinterThree.");
    }
}

public class PrinterFour : PrinterThree
{
    public override void Print()
    {
        Console.WriteLine("PrinterFour.");
    }
}

 static void Main(string[] args)
    {
        IPrinter iprinter = new PrinterFour();
        iprinter.Print();//the output is PrinterOne? why???
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T14:36:11.430

`new`并且`virtual`是两个（大部分）不相关的关键字。

`new`意味着它会影响基本方法。
`virtual`允许子类覆盖它。

通过接口调用方法会导致调用基方法，因为基方法不是`virtual`并且派生类没有显式地重新实现接口（这会导致方法被重新映射）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-02T14:36:02.677

像这样使用的`new`关键字是成员隐藏。

请注意，我从未见过它与`virtual`关键字一起使用。它只是允许派生自方法实现`PrinterTwo`的`override`类型。`Print`

以这种方式使用的`new`关键字允许类型隐藏基类型的成员，但前提是您使用的是类型本身的变量。

例如，如果您要这样做：

```
PrinterOne one = new PrinterTwo();
one.Print(); 
```

它**不会**调用该方法，`PrinterTwo`因为它不是继承链的一部分。

至于你什么时候会这样做......当你真的，真的需要出于一些我想不出的奇怪原因（也许是反思？）并且你不能在`PrinterOne`.

就个人而言，我永远不会这样做。

至于为什么输出是打印机一...调用`IPrinter.Print`将调用它定义的类型（`PrinterOne`在这种情况下），这将使您回到我上面的示例中，`new`除非您与具有它的类型交谈，否则该关键字被忽略.

基本上，使用`IPrinter`类似于`PrinterOne`我上面的小例子中的使用。

要解决问题，请制作`PrinterOne`方法`virtual`并完全删除`new virtual`in的使用`PrinterTwo`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T14:42:43.803

### 新修饰符

[http://msdn.microsoft.com/en-us/library/435f1dw2.aspx](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)

> 当用作修饰符时，new 关键字显式隐藏从基类继承的成员。

这意味着该方法不会覆盖虚拟基类方法，但在派生类的实例上调用时仍具有优先权。换句话说，新方法只影响派生类的一个变量，而不影响基类。

### 虚拟修饰符

[http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx](http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx)

> virtual 关键字用于修改方法、属性、索引器或事件声明，并允许在派生类中重写它。

这意味着可以在派生类中重写该方法。当您在基类变量上调用虚拟方法时，该变量包含已覆盖虚拟方法的派生类的实例，将调用派生类实现。这与 new 关键字的行为相反。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T14:38:29.270

这称为方法隐藏。当您需要为无法覆盖的方法提供自己的实现时，您可以使用它。因为`PrinterOne.Print`不是虚方法，所以不能被覆盖。相反，该`new`关键字用于创建隐藏原始方法的相同方法签名。将改为使用新方法。向此添加`virtual`关键字，允许您的新方法被派生类覆盖。

`PrintTwo`只有当您通过定义容器（例如。 ）调用它时，才会调用隐藏原始的新方法。通过接口调用它调用原始方法。请注意，该方法从未被删除或替换，因此通过直接访问接口，原始实现仍然存在。

# java - 如何使矢量线可选？

> ID：10415911
> 
> 赞同：2
> 
> 时间：2012-05-02T14:34:17.520
> 
> 标签：java, swing, vector

我正在为大学做一个项目，我必须制作自己的原始矢量编辑器，我有两个问题：

1.  通过保存它的起点坐标、终点坐标、颜色和点的宽度来制作矢量线对象是否正确，它将由哪些组成？`Point`也是我的课，画在`JPanel`.
2.  如果它是正确的，我怎样才能使这条线可选？我唯一能想到的就是检查鼠标坐标是否在线宽之内。

我也有一个限制，不能使用任何标准函数来绘制线条、样条曲线等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:41:50.740

1.  是的，这是正确的。或者你可以用极坐标表示它
2.  最好的办法实际上是把你的行变成一个`Area`，它实现`Shape`并包含，这是你想要的方法。`Area`是一个很好的抽象，因为它可以表示任何形状，但一切都以相同的方式进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:12:10.253

您可以使用 Line2D 形状。要检查选择，您可以从 BasicStroke 中 gt 描边 Shape 并检查描边 Shape 是否包含单击点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:47:14.703

To Point 1：您还需要保存矢量的方向。

第 2 点：有一些像[GEF](http://www.eclipse.org/gef/)这样的框架可以为您完成这项工作。在这里你必须改变你的模型。你需要两个类：Point 和 Connection

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:12:20.567

1.  `Vector`如果你有一个类`start`，你可以使用一个类`end` `Point`，如果你愿意，你可以这样做。
2.  你可以有这样的方法：

    ```
    private static Shape generateVector(Point start, Point end) 
    ```

    在这种方法中，您可以使用“区域”的一个对象来**构建**矢量，使用`Line2D`. 树线如果你想要一个*箭头*。

    或者您可以使用`GeneralPath`for 构建它。

对于用鼠标选择一个特定的向量，你可以得到坐标，用`getX()`和`getY()`，用方`MouseEvent`​​法询问形状对象，`contains`用其他颜色重新绘制。

祝你好运！

# javascript - 尝试加载外部 js 文件时 ie8 和 7 Permission Denied

> ID：10415912
> 
> 赞同：1
> 
> 时间：2012-05-02T14:34:18.747
> 
> 标签：javascript, html, permission-denied

使用[http://html5shim.googlecode.com/svn/trunk/html5.js](http://html5shim.googlecode.com/svn/trunk/html5.js)在较旧的 ie 浏览器中启用 html5（客户端需要 html5）。

但是当页面加载时，我收到“Permission Denied”错误，然后出现一大堆其他错误，我认为这些错误与 html5.js 文件无法正常工作有关。

我对javascript不太了解，所以对此的任何想法都会非常有帮助。

这是我页面的链接： http: [//supermarchepa.com/v3/eng/index.html](http://supermarchepa.com/v3/eng/index.html)

提前致谢

编辑：好的，修复了 flowplayer 问题，现在也在本地链接到 html5.js 并且仍然有同样的问题。![在此处输入图像描述](../Images/26bf49f9808e013c8dae3280509aba4d.png)

jquery 文件现在也在本地链接。

更新已修复：问题是以下代码：

window.addEventListener("load",function() { setTimeout(function(){ window.scrollTo(0, 1); }, 0); });

把它包裹起来，即忽略它，现在一切都很好。

感谢所有帮助我度过难关的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:43:47.883

固定的：

问题是以下代码：

```
window.addEventListener("load",function() { 
    setTimeout(function(){ 
        window.scrollTo(0, 1); 
    }, 0); 
}); 
```

我将它包装在条件注释标签 ( `<!--[if !IE]><!-->`) 中，以便 Internet Explorer 忽略它，现在一切都很好。

故事的寓意是，如果您在使用脚本时遇到问题，页面上的任何内容都可能是问题所在，而不仅仅是给您错误消息的脚本。

感谢所有帮助我度过难关的人。

# sql-server-2008 - 从 sql server 中的 sys.sysobjects 中检索对象 ID

> ID：10415916
> 
> 赞同：0
> 
> 时间：2012-05-02T14:34:42.870
> 
> 标签：sql-server-2008

如何使用 MS sql server 中的表名和列名从 sys.sysobjects 表中检索对象 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:38:14.200

我想你正在寻找这个-

```
USE [DatabaseName]
SELECT OBJECT_ID(N'[SchemaName].[ObjectName]',N'ObjectType') 
```

如果你想找出一个表的对象 id，那么试试这个——

```
USE [DatabaseName]
SELECT OBJECT_ID(N'[SchemaName].[TableName]',N'TT') 
```

更多关于`OBJECT_ID()` [去这里](http://msdn.microsoft.com/en-us/library/ms190328.aspx)和了解`Object Type` [去这里](http://msdn.microsoft.com/en-us/library/ms190324.aspx)

# php - 将数据库写入 CSV 文件

> ID：10415918
> 
> 赞同：-4
> 
> 时间：2012-05-02T14:34:45.970
> 
> 标签：php

> **可能重复：**
> [PHP - 向用户发送文件](https://stackoverflow.com/questions/2882472/php-send-file-to-user)

我编写了一个脚本，可以成功地将用户数据输出到我服务器上的 CSV 文件。

我的问题：有没有办法让 CSV 文件弹出以便用户可以打开它？照原样，打开文件的唯一方法是直接从服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:40:40.450

```
<?php
    $csv_file = '/path/to/yourfile.csv'; // path to the csv file you're generating on the server

    header('Content-type: text/csv');
    header('Content-Disposition: attachment; filename="'.basename($csv_file));

    readfile($csv_file);
?> 
```

# asp.net - 带有文本的工具提示 + databinder.eval

> ID：10415920
> 
> 赞同：3
> 
> 时间：2012-05-02T14:34:47.110
> 
> 标签：asp.net, visual-studio-2010, c#-4.0

如何将工具提示添加到 asp:label 中，其中包含来自 DB 的值和文本？

我目前有

```
Tooltip= '<%# DataBinder.Eval(Container.DataItem, "ID") %> ' 
```

例如，它成功返回了 ID `100`，但我希望它返回`ID:100`。如何将字符串 ID 与 Databinder.Eval 的结果连接起来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:48:47.270

试试这个 (C#) ...

```
Tooltip='<%# "ID:" + DataBinder.Eval(Container.DataItem, "ID") %>' 
```

# python - 单元测试 python“__init__() 正好需要 2 个参数（1 个给定）”

> ID：10415921
> 
> 赞同：-2
> 
> 时间：2012-05-02T14:34:53.520
> 
> 标签：python, unit-testing, init

我的单元测试有问题，我不知道为什么，我得到了以下堆栈：

```
 Traceback (most recent call last):
  File "novaapiclient_tests.py", line 11, in test_create_server
    nova = novaapiclient.NovaAPIClient()
TypeError: __init__() takes exactly 2 arguments (1 given) 
```

按照我的测试代码：

```
class TestFunction(unittest.TestCase):

    def setUp(self):
        self.nova = novaapiclient.NovaAPIClient()

    def test_create_server(self):
        self.setUp()
        lsbf = self.nova.lst_of_servers(self.nova.listServers())
        image = "3f9e6696-2ed2-4e06-ae16-c828062addbe"
        flavor = "m1.tiny"
        name = "testing_unit"
        self.nova.createServer(image, flavor, name)
        time.sleep(60)
        lsaf = self.nova.lst_of_servers(self.nova.listServers())
        if(len(lsbf) < len(lsaf)):
            assertTrue(True)
        else:
            assertTrue(False)

    def delete_server(self):
        self.setUp()
        serv_id = "13e0c3de-d736-47ec-bc22-3a794aa3e2a9"
        self.nova.deleteServer(serv_id)
        ls = self.nova.lst_of_servers(self.nova.listServers())
        j = 0
        fin = False
        while(j < 3 and not fin):
            time.sleep(75)
            for i in range(len(ls)):
                if(serv_id == str(ls[i])):
                    assertTrue(False)
                    break

                assertTrue(True)
                fin = True              
                break
            j += 1 
```

我试图创建一个 init 方法并在方法中删除“self”，但我继续打印错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:42:05.390

构造`novaapiclient.NovaAPIClient`函数需要接收一个参数，但您没有传递任何参数。

在您的[这个问题](https://stackoverflow.com/questions/10350655/weird-str-object-is-not-callable-python)中，您确实将参数传递给`novaapiclient.NovaAPIClient`，所以我认为您需要做类似的事情。

# asp.net - 如何动态生成列？

> ID：10415924
> 
> 赞同：-1
> 
> 时间：2012-05-02T14:35:07.763
> 
> 标签：asp.net, sql-server-2008

我有一定数量的列的表。

我想用**Table1**的特定列的数据动态填充其他表作为**table2**的列。

当我说动态时，我的意思是说，当任何数据添加到**Table1**的列时， **table2**都会填充尽可能多的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:55:59.277

出于多种原因，动态更改架构确实不是一个好主意。根据您的描述，我认为您最好为此使用视图。视图将为您提供您正在寻找的动态功能，并且副作用更少。

请参阅这篇文章： [如何在 SQL Server 中创建视图](http://msdn.microsoft.com/en-us/library/ms187956.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:31:53.403

我将再次重复声明，这是一个坏主意，很多事情都可能出错，而且我确信对于您要解决的任何潜在问题都有更好的解决方案。也就是说，无论如何要回答明确的问题，以下是如何执行此操作的示例：

```
USE tempdb;
GO
CREATE TABLE dbo.Table1(Description VARCHAR(32));

CREATE TABLE dbo.Table2(ID INT);

GO
CREATE TRIGGER dbo.CatchNewTable1Data
ON dbo.Table1
FOR INSERT
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX) = N'';

    SELECT @sql += CHAR(13) + CHAR(10) +
        'ALTER TABLE dbo.Table2 ADD '
        + QUOTENAME(d) + ' VARCHAR(255);' -- guessing on destination data type
    FROM
    (
        SELECT DISTINCT d = LEFT([Description], 128) -- identifier <= 128
        FROM inserted AS i
        WHERE NOT EXISTS
        (
          SELECT 1 FROM sys.columns 
           WHERE name = LEFT(i.[Description], 128)
           AND [object_id] = OBJECT_ID('dbo.Table2')
        )
    ) AS x;

    EXEC sp_executesql @sql;
END
GO 
```

现在，让我们试试吧！尝试一个已经存在的列，一个已经存在一个列的多行插入，一个带有欺骗的多行插入，等等。我没有发布大于 255 的值，也没有处理任何会导致问题。为什么？因为最终我不想让你使用这个解决方案，我想解决真正的问题。但对于谷歌人来说，我想表明存在解决上述问题的方法。

```
-- does nothing:
INSERT dbo.Table1 SELECT 'ID';

-- only adds column 'foo':
INSERT dbo.Table1 SELECT 'ID'
UNION ALL SELECT 'foo';

-- adds both of these columns:
INSERT dbo.Table1 SELECT 'bar'
UNION ALL SELECT 'splan foob';

-- only adds one of these:
INSERT dbo.Table1 SELECT 'blat'
UNION ALL SELECT 'blat';

SELECT * FROM dbo.Table2; 
```

结果：

```
ID          foo          bar          splan foob   blat
----------- ------------ ------------ ------------ ------------ 
```

不要忘记清理：

```
DROP TABLE dbo.Table1, dbo.Table2; 
```

# android - 文本和图像的 JSON 对象解析

> ID：10415925
> 
> 赞同：0
> 
> 时间：2012-05-02T14:35:10.180
> 
> 标签：android, json, parsing

我正在尝试解析以下由返回的 JSON 字符串`httpResponse`：

```
{ "message" : "List of top ten checkin Men.",
  "success" : "True",
  "top_ten_checkin_men" : [ { "City_name" : "Mumbai",
        "is_block" : "no",
        "is_favorite" : "no",
        "is_friend" : "no",
        "last_step_in" : "Pride Hotels",
        "online" : "1",
        "points" : "3800",
        "request_pending" : "no",
        "user_thumbphoto" : "",
        "userage" : "26",
        "userbodytype" : "3",
        "userfname" : "John",
        "usergender" : "Male",
        "userid" : "191",
        "userlname" : "Aarmani",
        "userlookingfor" : "Female",
        "useronlinestatus" : "Yes",
        "userphoto" : ""
      },
      { "City_name" : "New York",
        "is_block" : "no",
        "is_favorite" : "no",
        "is_friend" : "no",
        "last_step_in" : "The House of MG",
        "online" : "1",
        "points" : "4450",
        "request_pending" : "no",
        "user_thumbphoto" : "http://anburaj.com/lockme/uploads/users/188/thumb_121840970.jpg",
        "userage" : "31",
        "userbodytype" : "3",
        "userfname" : "Williams",
        "usergender" : "Male",
        "userid" : "188",
        "userlname" : "Johens",
        "userlookingfor" : "Female",
        "useronlinestatus" : "Yes",
        "userphoto" : "http://anburaj.com/lockme/uploads/users/188/121840970.jpg"
      }
    ]
} 
```

等等。

我应该接受什么，应该放弃`jsonarray`什么`jsonobject`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:38:52.337

[] 定义了一个`JSONArray`（例如`top_ten_checkin_men`）。{} 定义一个`JSONObject`.

值得花时间在[这里](http://www.json.org/)了解一下 JSON 格式：

![http://json.org/array.gif](../Images/85fea2dffcd7ad3b7e70dea2285fb15b.png)

![在此处输入图像描述](../Images/daeeff2f779e8efe37b12b9f7813590f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:39:10.190

“[]”代表数组，“{}”是一个对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T14:40:02.203

您在这里拥有的是`JSONObject`成功和消息字段以及`JSONArray`top_ten_checkin_men

所以像：

```
JSONObject json = new JSONObject(yourString);
String message = json.getString("message");
String success = json.getString("success");
JSONArray array = json.getJSONArray("top_ten_checkin_men"); 
```

应该做你想做的

# sql - SQL - 对数字进行四舍五入

> ID：10415926
> 
> 赞同：0
> 
> 时间：2012-05-02T14:35:15.180
> 
> 标签：sql, rounding, hour, minute

> **可能重复：**
> [舍入数字的准确性](https://stackoverflow.com/questions/10416762/accuracy-in-rounding-numbers)

我有以下要求-

1.  从 TableA 中获取所有行的 A_MINUTES 列值
2.  对 A_MINUTES 求和。
3.  将总分钟值转换为小时 - 除以 60
4.  将最终小时值四舍五入到小数点后 2 位。

这需要用 SQL 编写。你认为下面的查询会有任何舍入错误吗？

```
SELECT ROUND ( (SUM(A_MINUTES)/60.0) , 2) FROM TABLEA 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:56:42.983

如果点 3.Sum 要考虑的小时值，则缺少一个 SUM 函数。

```
SELECT ROUND ( SUM(SUM(A_MINUTES)/60.0) , 2) FROM TABLEA 
```

# ios - 如何为 UITableView 中的不同部分动态定义不同的行数？

> ID：10415930
> 
> 赞同：1
> 
> 时间：2012-05-02T14:35:26.353
> 
> 标签：ios, uitableview

我有一个表格视图，我在其中动态返回每个部分的节数和行数。我可以这样实现

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(  section == 0)
    return [array count];

    if(  section == 1)
    return [array2 count];

    if(  section == 2)
    return [array3 count];
} 
```

如果我知道我有 3 个部分，我可以按照上述方式进行操作。但是如何动态定义不同部分的行数。例如：- 你有 if(section == 0)。我不想在这里硬编码 0,1,2 的值。我不确定部分的总数。我们要如何动态返回不同部分的行数？我有一个数组来显示没有的部分和不同的数组来显示每个部分的行数。如何在方法“numberOfRowsInSection”中动态提及？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T14:42:56.843

在这里您可以遵循这种方法，您可以将所有可数数组放在另一个中`NSMutableArray`，例如 tmpArray （例如，`tmpArray[0] = array`或`tmpArray[1] = array2`，或仅通过附加`[tmpArray addObject:array] ..)`，

然后你可以这样

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return [[tmpArray objectAtIndex:section] count];
} 
```

我希望这能帮助你解决你的问题..

# jquery - 动态更改 jQuery 图像 src

> ID：10415932
> 
> 赞同：3
> 
> 时间：2012-05-02T14:35:27.903
> 
> 标签：jquery, dynamic, slideshow, jquery-backstretch

我看到只是想知道如何每隔 5 秒就更改一个 src，

我在用

```
$.backstretch("site.com/images/home5.jpg"); 
```

是否可以像幻灯片一样将“home5.jpg”与其他图像（比如 home6.jpg 和 home7.jpg）交换？我不确定如何动态更改它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:40:34.397

如果您想每 5 秒更改一次，则需要使用`setInterval()`：

```
var loop = 1;
setInterval(function() {
    var imgNumber = loop % 5; // assuming there are 5 images.
    $.backstretch("site.com/images/home" + imgNumber + ".jpg");
    loop++;
}, 5000); 
```

**更新**

阅读文档后，该功能似乎已经内置在插件中：

[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

为代码选择“在幻灯片中使用后伸”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:38:58.203

为此，您可以使用 JavaScript 函数`setInterval`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:40:00.927

您可以使用 .html() 更改您选择的对象的 html。

$(#thing).html("<img src='mypic.jpg'/>");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:40:47.187

您可以使用[`setInterval`](https://developer.mozilla.org/en/DOM/window.setInterval)或类似的功能来定期更改图像。要实际交换图像，您只需`backstretch`再次调用即可。从[项目页面](https://github.com/srobbin/jquery-backstretch)：

> **1.2版**
> 
> 您现在可以调用 backstretch 两次，它将替换现有图像。

例如：

```
$.backstretch("site.com/images/home6.jpg"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T14:41:55.483

> 功能滑动开关（）{
> 
> ```
> var $active = $('#slideshow IMG.active');
> 
> $active.src = //change src here (you can use array with src-s)// } 
> ```
> 
> $(function() { setInterval( "slideSwitch()", 5000 ); });

# sql - SQL Server 在启动时运行 SP - 魔法在哪里？

> ID：10415934
> 
> 赞同：1
> 
> 时间：2012-05-02T14:35:29.607
> 
> 标签：sql

我们有几个**SQL Server 2008 R2**环境**（开发、QA、生产）**，其中包含用于**ASP.NET**应用程序的数据库。

此应用程序使用**ASP.NET 成员资格**和**SQL Server 会话提供程序**，因此我们有一个**ASPState 数据库**。

这些提供程序的功能被扩展为限制每次登录一个活动会话。我们的实现将表添加到**TempDB**中，一个存储`proc ASPState.dbo.CreateTempTables`来创建这些表，另一个存储`proc Master.dbo.ASPState_Startup`调用**ASPState**中的**SP**。

 **在我的开发机器和生产环境中，当**SQL Server**启动时`Master.dbo.ASPState_Startup`执行并创建表。

我正在设置一个新的**QA 环境**，但无法弄清楚这是如何发生的（因此在**QA**中，表在**启动**时未添加到**TempDB**中）。**我通过Red Gate 的比较工具**手动比较了架构和权限，并没有发现任何差异。

 ****我检查了作业，但没有人调用这些存储过程中的任何一个。

关于魔法隐藏在哪里的任何想法？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:42:21.010

[`sp_procoption`](http://msdn.microsoft.com/en-us/library/ms181720.aspx)是“魔法”：

> 设置或清除自动执行的存储过程。每次启动 SQL Server 实例时，都会运行一个设置为自动执行的存储过程。

```
EXEC sp_procoption @ProcName = 'ASPState_Startup' 
, @OptionName = 'startup' 
, @OptionValue = 'on'; 
```******

# python - 线程会话在 SQLAlchemy 上到期？

> ID：10415935
> 
> 赞同：0
> 
> 时间：2012-05-02T14:35:32.443
> 
> 标签：python, multithreading, sqlalchemy

这很难描述或显示很多代码，但我会尝试。本质上，我有一个多线程桌面应用程序，它将经常处理线程中表的添加/删除/更改。根据我的阅读，我应该使用 scoped_session 并将其传递给各个线程来完成工作（我认为？）。下面是一些基本的代码示例：

```
class SQL():
    def __init__(self):        
        self.db = create_engine('mysql+mysqldb://thesqlserver')
        self.metadata = MetaData(self.db)
        self.SessionObj = scoped_session(sessionmaker(bind=self.db, autoflush=True))

db = SQL()
session = db.SessionObj()
someObj = Obj(val, val2)
session.add(someObj)
session.commit() 
```

上面的类是我用作 SQL 东西的一般访问的。在创建新会话、执行查询并对其进行更新/添加后，在 session.commit() 上，我收到以下错误：

```
Traceback (most recent call last):
  File "core\taskHandler.pyc", line 42, in run
  File "core\taskHandler.pyc", line 184, in addTasks
  File "core\sqlHandler.pyc", line 35, in commit
  File "sqlalchemy\orm\session.pyc", line 624, in rollback
  File "sqlalchemy\orm\session.pyc", line 338, in rollback
  File "sqlalchemy\orm\session.pyc", line 369, in _rollback_impl
  File "sqlalchemy\orm\session.pyc", line 239, in _restore_snapshot
  File "sqlalchemy\orm\state.pyc", line 252, in expire
AttributeError: 'NoneType' object has no attribute 'expire' 
```

然后下一个如果另一个 sql 尝试通过：

```
Traceback (most recent call last):
  File "core\taskHandler.pyc", line 44, in run
  File "core\taskHandler.pyc", line 196, in deleteTasks
  File "sqlalchemy\orm\query.pyc", line 2164, in scalar
  File "sqlalchemy\orm\query.pyc", line 2133, in one
  File "sqlalchemy\orm\query.pyc", line 2176, in __iter__
  File "sqlalchemy\orm\query.pyc", line 2189, in _execute_and_instances
  File "sqlalchemy\orm\query.pyc", line 2180, in _connection_from_session
  File "sqlalchemy\orm\session.pyc", line 729, in connection
  File "sqlalchemy\orm\session.pyc", line 733, in _connection_for_bind
  File "sqlalchemy\orm\session.pyc", line 249, in _connection_for_bind
  File "sqlalchemy\orm\session.pyc", line 177, in _assert_is_active
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back by a nested rollback() call.  To begin a new transaction, issue Session.rollback() first. 
```

这大约是我所知道的，我认为这是我能描述的最好的。关于我*应该*在这里做什么的任何想法？对我来说都是泥巴。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:04:05.383

有趣的是，您错过了“从中提取代码”的答案中最关键的部分，即**中间**有一个 Python 函数，它正在执行一些抽象操作（它被标记为`func()`）。该代码说明了一个函数的事务包装器，在上面的示例中，您改为调用一个对象方法`commit()`，该方法不会以其他方式调用任何带有`Session`.

在这里，您有一种称为 SQL() 的会话保持对象，它并没有真正为您的程序增加任何用处，反而使程序变得不必要地复杂，并且可能也是问题的根源。除非您的应用程序打算在不同时间连接到许多不同的数据库，并使用`SQL()`对象来表示该状态，否则构建一个名为“SQL”的类并带有一个“引擎”并没有多大用处。只需将引擎以及您的 scoped_session() 粘贴在某个模块中即可。

engine 和 scoped_session 代表了一种称为[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)的模式——它们是创建一些其他有用对象的对象，在这种情况下 scoped_session 创建一个`Session`，并且在`Engine`内部使用`Session`来创建一个`Connection`与数据库对话的对象。将对象与and`Session`一起放置为兄弟成员没有多大意义- 您将随身携带工厂（and ）或它们创建的对象本身（the ），这一切都取决于您'正在尝试做。`Engine``scoped_session``Engine``scoped_session``Session`

本身，请记住，`Session`这里我们谈论的**是工厂创建的东西**（`Session`），而不是工厂本身（`Engine`和`scoped_session`），它**根本不是线程安全的**。它是你通常只**在函数本地**创建的东西——它不应该是全局的，如果你实际上`SQL()`跨线程使用单个对象，这可能是这里的问题。你得到的实际错误，我不太确定那是什么，如果我知道这里使用的 SQLAlchemy 的确切版本，我只能有更好的线索，尽管错误的随机性表明你有某种线程问题，其中一个线程中的某物变为无，因为另一个线程期望存在相同的对象。

所以你需要在这个程序中确定一个特定的执行线程何时开始，它在执行过程中需要对数据库做什么，然后什么时候结束。当您可以为此建立一致的模式时，您可以将单个链接`Session`到该线程，该线程在该线程的生命周期内有效，并且**永远不会共享**。此会话生成的所有对象也不得共享给其他线程 - 它们是会话状态的扩展。如果您正在使用“工作线程”，则这些工作线程应根据需要在自己的会话中加载自己的数据。Session 代表一个实时数据库事务，您通常希望事务本地到单个线程。

由于这不是一个 Web 应用程序，您可能希望放弃使用`scoped_session`，除非您确实有一个地方可以使用线程本地模式。

# iphone - ObjectAtIndex 导致应用程序崩溃

> ID：10415938
> 
> 赞同：0
> 
> 时间：2012-05-02T14:35:44.087
> 
> 标签：iphone, objective-c, nsmutablearray, nsarray, nslog

当我对 NSMutableArray 的内容执行 NSLog 时，它返回：

```
(
    hat,
    hat
) 
```

那么为什么当我像这样执行 NSLog 时`NSLog(@"%@", [pro.matches objectAtIndex:0]);`它会因错误而崩溃：`*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'`

这么奇怪

这是我填写的地方：

```
[self.matches removeAllObjects];

         NSArray *JSONarray = [[NSArray alloc] initWithArray:[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:nil]];
         int i;

         for (i=0; i<[JSONarray count]; i++) {
             //[self.matches addObject:[JSONarray objectAtIndex:i]];
             [self.matches addObject:@"hat"];
         }
         //NSLog(@"boys with bo%@", [[matches objectAtIndex:1] objectForKey:@"host"]);
         block();
         //JSON and add to matches.
     }
     }];
    block(); 
```

这就是我所说的：

```
[pro refreshMatchesWithCallback:^ 
    {
        //[self.tableView reloadData];
        NSLog(@"the count of a lifetime is %@", [pro.matches objectAtIndex:0]);
    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:52:22.737

当您第一次记录由于完成块的工作方式而没有任何内容的内容时，请尝试以下操作：

```
[pro refreshMatchesWithCallback:^ 
{
    //[self.tableView reloadData];
    if(pro.matches.count > 0) {
       NSLog(@"the count of a lifetime is %@", [pro.matches objectAtIndex:0]);
    }
}]; 
```

希望这可以帮助！

山姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:56:44.137

```
always prefer to use this approach

for(Object* obj in arra)
{
...

} 
```

如果计数器大于 0，这将进入循环。不需要检查

欢呼：P

# php - PHP“for循环”收集数据

> ID：10415940
> 
> 赞同：-1
> 
> 时间：2012-05-02T14:35:47.983
> 
> 标签：php, loops, for-loop

**如何循环这个东西来收集多个 $objectId 的数据？比如从 $objectId 1038 到 1048。**

下面是可以收集数据的完整脚本。排队 `$objectId = ""; //I want to gather info about IDs lets say from 1038 - 1048`应该是我认为的循环，但我做得不好。

```
<form name="myForm" action="" method="post" id="myForm">
  <table cellpadding="2" border="1">
    <tr>
      <td width="264" rowspan="2" valign="top"><?php 

    function transformHTML($string)
    {
        $string = trim($string);
        $string = utf8_decode($string);
        $string = htmlentities($string, ENT_NOQUOTES);
        $string = str_replace("#", "&#35;", $string);
        $string = str_replace("%", "&#37;", $string);

        return $string;
    }

    function get_string_between($string, $start, $end){
        $string = " ".$string;
        $ini = strpos($string,$start);
        if ($ini == 0) return "";
        $ini += strlen($start);
        $len = strpos($string,$end,$ini) - $ini;
        return substr($string,$ini,$len);
    }

    if($_POST['submit']) { 

        $objectId = ""; //I want to gather info about IDs lets say from 1038 - 1048

            $error_B = "<span class=error>Error #2:<br> Does the item exist (ID: " . $objectId . ")?</span><br>";

            $lines = file('http://services.runescape.com/m=itemdb_rs/viewitem.ws?obj=' . $objectId);
            foreach ($lines as $line_num => $line) {
                $lineCrawl = htmlspecialchars($line);
                $StringSum = "$StringSum$lineCrawl";
            }
            $parsedGuidePrice = get_string_between($StringSum, "Current guide price", "Today");
            $parsedItemName = get_string_between($StringSum, "&lt;title&gt;", " - Grand Exchange - RuneScape&lt;/title&gt;");
            $parsedItemIconUrl  = get_string_between($StringSum, '&lt;meta property=&quot;og:image&quot; content=&quot;', '&quot; /&gt;');

            $guideprice = preg_replace("/[^\.kbm0-9]/", "", $parsedGuidePrice);

            if (strpos($guideprice,'k') !== false) {
                $guideprice = preg_replace("/[^0-9]/", "", $parsedGuidePrice);
                $guideprice *= 100;
            } else if (strpos($guideprice,'m') !== false) {
                $guideprice = preg_replace("/[^0-9]/", "", $parsedGuidePrice);
                $guideprice *= 100000;
            } else if (strpos($guideprice,'b') !== false) {
                $guideprice = preg_replace("/[^0-9]/", "", $parsedGuidePrice);
                $guideprice *= 100000000;
            } 
            if ($guideprice == "") { 
                echo $error_B; 
            } else { 
                echo "<img src='" . $parsedItemIconUrl . "' class='parsedItemIconUrl'>";
                echo "<br>";
                echo "<strong>" . $parsedItemName . "</strong> guide price: <strong>" . $guideprice . "</strong>"; 
                echo "<br>";
                echo "<small>(Item ID: " . $objectId . ")</small><br><br><br>";
            }
    }
    ?></td>
      <td width="172"></td>
      <td width="99"><input type="submit" name="submit" alt="Get yesterday's averge market price" title="Get yesterday's averge market price"></td>
    </tr>
    <tr valign="top">
      <td></td>
      <td><input value="Reset" type="button" name="reset" alt="Reset the form" title="Reset the form" onClick="javascript:window.location = '';"></td>
    </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:45:39.720

```
<form name="myForm" action="" method="post" id="myForm">
  <table cellpadding="2" border="1">
    <tr>
      <td width="264" rowspan="2" valign="top"><?php 

    function transformHTML($string)
    {
        $string = trim($string);
        $string = utf8_decode($string);
        $string = htmlentities($string, ENT_NOQUOTES);
        $string = str_replace("#", "&#35;", $string);
        $string = str_replace("%", "&#37;", $string);

        return $string;
    }

    function get_string_between($string, $start, $end){
        $string = " ".$string;
        $ini = strpos($string,$start);
        if ($ini == 0) return "";
        $ini += strlen($start);
        $len = strpos($string,$end,$ini) - $ini;
        return substr($string,$ini,$len);
    }

    function echoObjectIdStuff($objectId) {
        $error_B = "<span class=error>Error #2:<br> Does the item exist (ID: " . $objectId . ")?</span><br>";

        $lines = file('http://services.runescape.com/m=itemdb_rs/viewitem.ws?obj=' . $objectId);
        foreach ($lines as $line_num => $line) {
            $lineCrawl = htmlspecialchars($line);
            $StringSum = "$StringSum$lineCrawl";
        }
        $parsedGuidePrice = get_string_between($StringSum, "Current guide price", "Today");
        $parsedItemName = get_string_between($StringSum, "&lt;title&gt;", " - Grand Exchange - RuneScape&lt;/title&gt;");
        $parsedItemIconUrl  = get_string_between($StringSum, '&lt;meta property=&quot;og:image&quot; content=&quot;', '&quot; /&gt;');

        $guideprice = preg_replace("/[^\.kbm0-9]/", "", $parsedGuidePrice);

        if (strpos($guideprice,'k') !== false) {
            $guideprice = preg_replace("/[^0-9]/", "", $parsedGuidePrice);
            $guideprice *= 100;
        } else if (strpos($guideprice,'m') !== false) {
            $guideprice = preg_replace("/[^0-9]/", "", $parsedGuidePrice);
            $guideprice *= 100000;
        } else if (strpos($guideprice,'b') !== false) {
            $guideprice = preg_replace("/[^0-9]/", "", $parsedGuidePrice);
            $guideprice *= 100000000;
        } 
        if ($guideprice == "") { 
            echo $error_B; 
        } else { 
            echo "<img src='" . $parsedItemIconUrl . "' class='parsedItemIconUrl'>";
            echo "<br>";
            echo "<strong>" . $parsedItemName . "</strong> guide price: <strong>" . $guideprice . "</strong>"; 
            echo "<br>";
            echo "<small>(Item ID: " . $objectId . ")</small><br><br><br>";
        }
    }

    if($_POST['submit']) { 
        for($id = 1038;  $id <= 1048; $id++) {
            echoObjectIdStuff($id);
        }
    }

    ?></td>
      <td width="172"></td>
      <td width="99"><input type="submit" name="submit" alt="Get yesterday's averge market price" title="Get yesterday's averge market price"></td>
    </tr>
    <tr valign="top">
      <td></td>
      <td><input value="Reset" type="button" name="reset" alt="Reset the form" title="Reset the form" onClick="javascript:window.location = '';"></td>
    </tr>
  </table>
</form> 
```

# python-3.x - Python sys.platform = Linux2 但不是 Linux3？

> ID：10415942
> 
> 赞同：11
> 
> 时间：2012-05-02T14:35:54.107
> 
> 标签：python-3.x

我正在阅读的书`sys.platform`在 python3 中向我展示，在 Windows 上运行良好，但在 Linux 中，即使我的内核是 Linux3，我也会不断返回“Linux2”。

在 StackOverflow 上进行搜索，我看到人们提到`platform.system`和`os.name`. 其中第一个将告诉您 Linux/Windows，但不告诉您是什么版本，后者为您提供 NT/Posix 中的技术名称。

对于经验丰富的 python 编码人员使用的最准确和首选的方法，我有点困惑。是否可以获得“windows7”或Linux3？

非常感谢。附言。stackoverflow 还是新手，希望能正确格式化我的问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-03T10:42:25.250

你不应该依赖这个数字，因为正如你所指出的，它是不一致的。它实际上显示了编译 Python 的系统上内核的主要版本。

此外，它已在 Python 3.3 中删除：

> [问题](http://bugs.python.org/issue12326)12326：在 Linux 上，sys.platform 不再包含主要版本。它现在总是“linux”，而不是“linux2”或“linux3”，具体取决于用于构建 Python 的 Linux 版本。如果您不需要支持较旧的 Python 版本，请替换`sys.platform == 'linux2'`为`sys.platform.startswith('linux')`, 或直接替换。[–] [[Python 3.3 的新特性](http://docs.python.org/3.3/whatsnew/3.3.html)][»][[移植 Python 代码](http://docs.python.org/3.3/whatsnew/3.3.html#porting-python-code)]`sys.platform == 'linux'`

也可以看看：[`sys.platform`](http://docs.python.org/dev/library/sys.html#sys.platform)

因此，确定系统是否为 Linux 的首选方法是`sys.platform.startswith('linux')`. 它适用于所有版本的 Python 和 Linux。

似乎没有办法在标准库中更准确地找出操作系统名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T10:38:22.123

检查文档here，它都解释了为什么'linux2'以及如何以向后兼容的方式对待它：

[https://docs.python.org/2/library/sys.html](https://docs.python.org/2/library/sys.html)

在 2.7.3 版更改：由于大量代码检查 sys.platform == 'linux2'，并且 Linux 2.x 和 3.x 之间没有本质的变化，sys.platform 始终设置为 'linux2'，即使在 Linux 3.x 上。在 Python 3.3 及更高版本中，该值将始终设置为 'linux'，因此建议始终使用startswith ...

# visual-studio - 在 Visual Studio 中开发 OpenSocial 小工具

> ID：10415954
> 
> 赞同：1
> 
> 时间：2012-05-02T14:36:30.700
> 
> 标签：visual-studio, opensocial

我们即将实现一堆 OpenSocial 小工具。它们不会在 Facebook 或任何其他社交网络上运行，而是在我们自己的内部 Apache Shindig 服务器上运行。（我们使用 iframe 将这些小工具嵌入到普通的 ASP.NET MVC cshtml 视图中）

根据[http://docs.opensocial.org/display/OSREF/OpenSocial+Tutorial](http://docs.opensocial.org/display/OSREF/OpenSocial+Tutorial)，一个小工具的结构是这样的：

```
<?xml version="1.0" encoding="UTF-8" ?>
 <Module>
   <ModulePrefs title="Hello World!">
     <Require feature="opensocial-0.8" />
   </ModulePrefs>
   <Content type="html">
     <![CDATA[
       Hello, world!
     ]]>
   </Content>
 </Module> 
```

而 HTML、CSS 和 JS 嵌入在标签中。如果我们想在 Visual Studio 中以 XML 格式开发这样的文件，它会使语法高亮、IntelliSense、IntelliTrace 和 JavaScript 调试变得不可能。那不是很舒服。

**问题 1：**您是否知道 Visual Studio 的任何可用（！）扩展，可以重新启用这些 OpenSocial XML 小工具的所有这些功能？

**问题 2：**如果没有，你们中是否有人尝试过相同的方法并找到解决这些障碍的好方法？

* * *

**更新：**我们已经完成了使用构建后步骤的概念验证，该步骤采用纯 HTML 文件、纯 JS 文件和 XML 骨架并将它们合并到一个小工具中。在调试模式下，我们可以想象直接包含纯文件，而在部署过程中，我们使用来自后期构建步骤的合并 XML 文件调用 Shindig：

```
if (@Html.IsDebugMode())
{
    <iframe src="/Gadgets/HelloWorld.html"/>
}
else
{
    <iframe src="http://example.org/shindig?url=http://example.org/Gadgets/Merged/HelloWorld.xml"/>
} 
```

这是解决方案的工作原理：

1.  添加一个 Gadgets\HelloWorld.js 文件
2.  添加包含 js 文件的 Gadgets\HelloWorld.html 文件。
3.  `<Content>`添加一个带有小工具 XML 的 Gadgets\HelloWorld.xml 文件，但标签为空。
4.  使用 iframe 创建一个 CSHTML 页面，该页面在调试模式下包含纯 HTML 文件，但在发布模式下包含小工具。
5.  定义一个 Post Build Event，它读取 HelloWorld.html 的内容并将其粘贴到 XML 的 Content 标记中。此外，它从 JS 文件中读取 JS 代码，并将 HTML 中包含的脚本替换为具有相应代码`<script src="HelloWorld.js" />`的内联 JavaScript 。`<script>...</script>`

**优点：**

*   逻辑（JS 文件）、表示（HTML 文件）和元数据（XML 文件）的清晰分离。
*   在处理 HTML 时完成 Visual Studio HTML 创作支持。
*   在处理 JS 时完成 Javascript 创作支持。
*   JSLint 等工具可用于检查 JavaScript 样式。

**注意事项：**

*   在调试模式下，如果我们调用 Shindig 来渲染小工具，我们无法在 Visual Studio 中打开 JavaScript 并设置断点。但是，如果 JS 代码中出现任何错误，Visual Studio 将在 JS 代码上打开一个视图并标记错误的行。一旦该视图打开，我们也可以使用它来设置断点。但无法进行实时编辑，因为原始 JS 文件仅在构建过程中合并到 XML 中。
*   另一方面，如果我们将纯 HTML 文件包含为 iframe 而不是让 Shindig 渲染它，我们就可以直接在相应的文件中进行实时编辑和调试。当然，所有的 Shindig 功能都不是有效的。特别是，所有由 Shindig 自动添加的脚本都丢失了，或者必须手动包含在内。

理想情况下，在调试模式下运行应用程序时，HTML 或 JS 文件中的每一次更改都会立即更新合并的 Gadget XML 文件，因此即使在使用 Shindig 时也可以进行生命编辑。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T05:13:07.307

A2：您可以在单独的 js 文件中开发您的 javascript，然后将其包含在小工具 xml 中，就像您使用包含 js 包含的 html 文件一样。此外，您可以在小工具 html 中使用框架，但这可能会阻止您使用 Shindig 提供的一些 js API。

# imagej - ImageJ - 批量堆叠的图像

> ID：10415955
> 
> 赞同：1
> 
> 时间：2012-05-02T14:36:35.910
> 
> 标签：imagej

我有 .tiff 文件，每个文件包含 25 个堆栈部分。有没有办法批量使用“Image to Stack”命令？每个数据集包含所有三个颜色通道的 60 个 tiff。

谢谢克里斯汀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:22:16.410

了解如何执行这些操作的一般方法是使用宏记录器，您可以在`Plugins > Macros > Record ...`. 如果您然后像往常一样转到`File > Import > Image Sequence...`并选择序列的第一个文件，您应该会在记录器中看到类似以下内容：

```
run("Image Sequence...", "open=[/home/mark/a/1.tif] number=60 starting=1 increment=1 scale=100 file=[] or=[] sort"); 
```

为了让它适用于任意数量的切片（我的示例恰好有 60 个），只需省略该`number=60`位即可。因此，例如，要从命令行将此文件目录转换为单个文件，您可以执行以下操作：

```
imagej -eval 'run("Image Sequence...", "open=[/home/mark/a/1.tif] starting=1 increment=1 scale=100 file=[] or=[] sort"); saveAs("Tiff", "/home/mark/stack.tif");' -batch 
```

# asp.net - url 有 /errorpath

> ID：10415956
> 
> 赞同：0
> 
> 时间：2012-05-02T14:36:36.973
> 
> 标签：asp.net, .net

我在尝试访问 ASPX 页面时遇到问题。这个 aspx 页面除了带有 codeFile 和继承的 page 属性外什么都没有。其对应的 aspx.cs 文件具有写入 aspx 文件的代码。在我的开发环境中一切正常。当我尝试在测试服务器中部署相同内容并通过单击超链接访问页面时，我得到了以下网址

```
 http://tb..hosting.net/review/Search.aspx?aspxerrorpath=/review/Create-xml-writer.aspx 
```

并登陆 search.aspx 而不是 Create-xml-writer.aspx

但网址应该是，

```
http://tb.hosting.net/review/Create-xml-writer.aspx 
```

我做了几个构建和部署。我仍然遇到同样的问题。这个 errorpath=/ 是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:30:42.350

errorpath 部分是在 ASP.Net 中发生错误时传递到自定义错误页面的内容，它包含有问题的页面的路径。

search.aspx 是否定义为 web.config 文件中的自定义错误页面？在 web.config 文件中关闭自定义错误，您应该会看到实际的错误消息。

# ruby - Ruby正则表达式同时选择多个单词

> ID：10415959
> 
> 赞同：1
> 
> 时间：2012-05-02T14:36:54.190
> 
> 标签：ruby, regex

我有一个哈希，我正在使用正则表达式来选择我想要的键/值对。这是我写的方法：

```
def extract_gender_race_totals(gender, race)
  totals = @data.select {|k,v| k.to_s.match(/(#{gender})(#{race})/)}
  temp = 0
  totals.each {|key, value| temp += value}
  temp
end 
```

哈希看起来像这样：

```
 @data = {
:number_of_african_male_senior_managers=>2,
:number_of_coloured_male_senior_managers=>0,
:number_of_indian_male_senior_managers=>0,
:number_of_white_male_senior_managers=>0,
:number_of_african_female_senior_managers=>0,
:number_of_coloured_female_senior_managers=>0,
:number_of_indian_female_senior_managers=>0,
:number_of_white_female_senior_managers=>0,
:number_of_african_male_middle_managers=>2,
:number_of_coloured_male_middle_managers=>0,
:number_of_indian_male_middle_managers=>0,
:number_of_white_male_middle_managers=>0,
:number_of_african_female_middle_managers=>0,
:number_of_coloured_female_middle_managers=>0,
:number_of_indian_female_middle_managers=>0,
:number_of_white_female_middle_managers=>0,
:number_of_african_male_junior_managers=>0,
:number_of_coloured_male_junior_managers=>0,
:number_of_indian_male_junior_managers=>0,
:number_of_white_male_junior_managers=>0,
:number_of_african_female_junior_managers=>0,
:number_of_coloured_female_junior_managers=>0,
:number_of_indian_female_junior_managers=>0,
:number_of_white_female_junior_managers=>0
} 
```

但它在 SQL 查询之后重新填充了数据。

我想这样做，以便密钥必须同时包含种族和性别，以便它返回一些东西。否则它必须返回 0。这是正确的还是正则表达式语法关闭？

它全部返回 0，这是不应该的。

所以这个例子是

```
 %td.total_cell= @ee_demographics_presenter.extract_gender_race_totals("male","african") 
```

这将返回 4，有 4 位非洲男性经理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:17:30.447

尝试这样的事情。

```
def extract_gender_race_totals(gender, race)
  @data.select{|k, v| k.to_s.match(/#{race}_#{gender}/)}.values.reduce(:+)
end

extract_gender_race_totals("male", "african")
# => 4 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T15:18:01.067

[gmalete 的](https://stackoverflow.com/users/929772/gmalette)回答给出了一个优雅的解决方案，但这只是解释为什么你的正则表达式不太正确。如果您更正了正则表达式，我认为您的方法*会*起作用，它只是不像惯用的 Ruby。

`/(#{gender})(#{race})/`与 number_of_african_male_senior_managers 不匹配有两个原因：

1）比赛在哈希键中的性别之前出现，2）哈希键中有一个下划线，需要在正则表达式中。例如

```
/(#{race})_(#{gender})/ 
```

会工作，但不需要括号，所以这可以简化为

```
/#{race}_#{gender}/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:46:08.593

您可以使用通用方法以任何顺序查询任何属性，而不是使用特定方法来查询您的密钥片段（即“gender_race”）：

```
def extract_totals(*keywords)
  keywords.inject(@data) { |memo, keyword| memo.select { |k, v| k.to_s =~ /_#{keyword}(?:_|\b)/ } }.values.reduce(:+)
end 
```

用法：

```
extract_totals("senior")
extract_totals("male", "african")
extract_totals("managers") # maybe you'll have _employees later...
# etc. 
```

不完全符合您的要求，但也许会有所帮助。

# java - 如何在java中获取父面板？

> ID：10415963
> 
> 赞同：2
> 
> 时间：2012-05-02T14:37:04.187
> 
> 标签：java, swing, panel, jtree

我创建了 3 个面板。在我添加的根面板中`JTabbedPane`，在我添加的第二个选项卡中`Panel`，`BorderLayout`最后在`BorderLayout.WEST`第三个选项卡中。在第三个里面我添加了一个`JTree`with `PopupMenu`。

*如何在 actionPerformed of 中获取根面板`PopupMenu`？*

```
menuItem.addActionListener(new AbstractAction() {
    public void actionPerformed(ActionEvent e) {
        System.out.println("one:"+tree.getParent().getName());
        System.out.println("two:"+tree.getParent().getParent().getName());
        System.out.println("three:"+tree.getParent().getParent().getParent().getName());
        new UnzipFile(file, file.getParentFile(),
        (rootPanel) tree.getParent().getParent().getParent() ).run();
    }
}); 
```

**输出：**

```
Exception in thread "AWT-EventQueue-1" java.lang.ClassCastException: de.util.scanners.view.FileTreePanel
at de.util.scanners.view.FileTreePanel$2$1.actionPerformed(FileTreePanel.java:109)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1849)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2169)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:420)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:258)
at javax.swing.AbstractButton.doClick(AbstractButton.java:302)
at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:1050)
at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:1091)
at java.awt.Component.processMouseEvent(Component.java:5517)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3129)
at java.awt.Component.processEvent(Component.java:5282)
at java.awt.Container.processEvent(Container.java:1966)
at java.awt.Component.dispatchEventImpl(Component.java:3984)
at java.awt.Container.dispatchEventImpl(Container.java:2024)
at java.awt.Component.dispatchEvent(Component.java:3819)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4212)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3892)
one:null
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3822)
two:null
three:null
at java.awt.Container.dispatchEventImpl(Container.java:2010)
at java.awt.Window.dispatchEventImpl(Window.java:1791)
at java.awt.Component.dispatchEvent(Component.java:3819)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:463)
at be.azvub.webutil.gui.WebEventQueue.dispatchEvent(WebEventQueue.java:34)
at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:110) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T14:47:51.973

您可以使用[SwingUtilities.getAncestorOfClass](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#getAncestorOfClass%28java.lang.Class,%20java.awt.Component%29)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:48:45.983

我认为让父母链尝试查找特定组件来更新它不是一个好主意。如果您想将该 JTree 放在其他位置，或者只是重新构建您的布局，该怎么办。你将被迫改变所有这些事情。

您可以尝试使用 MVC。JTree 向控制器发送一个事件，该控制器将具有到 JTree 本身和根窗格的接口。当您实例化您的控制器时，将所有视图作为控制器的协作者传递。

我不知道您的面板在哪里实例化。但是，如果您在根级别实例化您的控制器应该很容易获得对您需要的所有组件的引用。

# javascript - 在 JavaScript 中按时间排序（格式：hh:mm a）以用于 DataTables

> ID：10415972
> 
> 赞同：3
> 
> 时间：2012-05-02T14:37:33.800
> 
> 标签：javascript, datatables

我正在尝试在 JavaScript 中按时间对数据进行排序。

[How do I sort by time (format: 5:40 PM) in javascript for use with DataTables 中](https://stackoverflow.com/questions/8752172/how-do-i-sort-by-time-format-540-pm-in-javascript-for-use-with-datatables)的答案？适用于数据集，但如果您包含更多时间，例如。晚上 9 点 30 分，上午 8 点 15 分，这些时间排序出现故障并处理不当。

我正在做同样的事情，但一次不少于 50 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:22:38.993

您可以使用以下排序功能：

```
jQuery.fn.dataTableExt.oSort['string-case-asc']  = function(x,y) {

  x = getTimeValue(x);
  y = getTimeValue(y);

  return x<y?-1:x>y?1:0;

};

jQuery.fn.dataTableExt.oSort['string-case-desc'] = function(x,y) {

  x = getTimeValue(x);
  y = getTimeValue(y);

    return x<y?1:x>y?-1:0;
}; 
```

和 getTimeValue() 方法：

```
function getTimeValue(x) {
  var time = x.match(/(\d+)(?::(\d\d))?\s*(P?)/);
  var h = parseInt(time[1],10) + (time[3] ? 12 : 0);
  if(!time[3] && parseInt(time[1],10)==12) h = 0;
  if(time[3] && parseInt(time[1],10)==12) h = 12;
  return h * 60 + ( parseInt(time[2],10) || 0 );
} 
```

[这里的工作示例](http://live.datatables.net/erefom/19/edit)

# drupal - 查看整页的模板覆盖

> ID：10415973
> 
> 赞同：-1
> 
> 时间：2012-05-02T14:37:35.817
> 
> 标签：drupal, drupal-7, views, drupal-templates

我需要为我创建的视图创建一个模板（我知道该怎么做），但我不希望页面被包装在 drupal html.php 代码中。我希望结果页面只是我创建的模板文件中的内容。

我该怎么做呢？

我确实发现这可以满足我对内容类型的需求`lab`

```
function yourthemename_preprocess_html(&$vars) {
  if ($node = menu_get_object()) {
    if($node->type == "lab") {
      $vars['theme_hook_suggestions'][] = 'html__lab';
    }
  }
} 
```

然后创建了一个名为：html--lab.tpl.php 的文件

这个方法可以用于我的视图吗？它必须是`if($node->type == "lab")`吗？我可以使用类似的东西吗`if($view == "viewname")`

谢谢 C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:33:03.597

我认为当您说“创建视图”时，您的意思是视图+页面显示。因此，当您浏览到[http://mystite.com/mypage](http://mystite.com/mypage)时，它​​会显示视图的内容。

在这种情况下，您可以通过一些小的修改来使用您的代码。

```
function yourthemename_preprocess_html(&$vars) {
  if (arg(0) == 'mypage') {        
    $vars['theme_hook_suggestions'][] = 'html__mypage';        
  }
} 
```

您必须创建正确的 .tpl.php 文件并清除缓存。

# sql - SQL 将多列拆分为多行

> ID：10415979
> 
> 赞同：5
> 
> 时间：2012-05-02T14:37:52.817
> 
> 标签：sql, sql-server-2008

我在这个问题上遇到了困难。

我有一个具有这种结构的表：

```
OrderID | Manager   | Worker      
1       | John      | Sally       
2       | Tim       | Kristy 
```

我需要一个 SQL 查询来获得这样的结果集：

```
OrderID | Employee       
1       | John           
1       | Sally    
2       | Tim 
2       | Kristy 
```

这可以执行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T14:40:59.170

我能想到的最简单的方法是（假设您不在乎 Tim 是在 Kristy 之前还是之后列出的）：

```
SELECT OrderID, Employee = Manager FROM dbo.table
UNION ALL
SELECT OrderID, Employee = Worker FROM dbo.table
ORDER BY OrderID; 
```

如果订单很重要，并且您总是首先需要经理，那么：

```
SELECT OrderID, Employee FROM
(
  SELECT r = 1, OrderID, Employee = Manager
  FROM dbo.Table
  UNION ALL
  SELECT r = 2, OrderID, Employee = Worker
  FROM dbo.table
) AS x
ORDER BY OrderID, r; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T14:43:13.660

您可以为此使用 UNPIVOT。

```
SELECT p.OrderID, p.Employee
FROM (SELECT OrderID, Manager, Worker FROM table) a
UNPIVOT (Employee FOR FieldName IN (Manager, Worker)) p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:42:50.227

尝试类似的东西

```
SELECT OrderID, Manager AS Employee, 'Manager' AS EmployeeRole From Employess
UNION ALL
SELECT OrderID, Worker AS Employee, 'Worker' AS EmployeeRole From Employess 
```

# c# - 如何在服务器路径写入文件期间传递凭据？

> ID：10415980
> 
> 赞同：1
> 
> 时间：2012-05-02T14:38:01.840
> 
> 标签：c#, file-upload, filestream

我想在服务器路径上写一个文件，但是当我尝试这样做时，我们得到了异常，我们无权这样做。我们有一个有权在服务器路径上写入的应用程序 ID 和密码，但我不知道如何传递此凭据：

我当前的代码：

```
//Create a new GUID, extract the extension and create a new unique filename
string strFileGUID = System.Guid.NewGuid().ToString();
string extension = Path.GetExtension(attachment.AttachmentFileName);
string tempfilename = strFileGUID  + extension;  

string path = "ServerPath";

//Open a filestream and write the contents of the file at server path
FileStream fs = new FileStream(path, FileMode.Create, FileAccess.Write );
fs.Write(fileContent.Content, 0, fileContent.Content.Length);
fs.Flush();
fs.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:42:41.353

```
[DllImport("advapi32.dll", SetLastError = true)]
    public static extern bool LogonUser(
            string lpszUsername,
            string lpszDomain,
            string lpszPassword,
            int dwLogonType,
            int dwLogonProvider,
            out IntPtr phToken); 
```

**例子：**

```
IntPtr userToken = IntPtr.Zero;

bool success = External.LogonUser(
  "john.doe", 
  "domain.com", 
  "MyPassword", 
  (int) AdvApi32Utility.LogonType.LOGON32_LOGON_INTERACTIVE, //2
  (int) AdvApi32Utility.LogonProvider.LOGON32_PROVIDER_DEFAULT, //0
  out userToken);

if (!success)
{
  throw new SecurityException("Logon user failed");
}

using (WindowsIdentity.Impersonate(userToken))
{
  // put your code here
} 
```

# android - 如何通过 HttpPost 将数据作为表单发送到 Android 中的服务器？

> ID：10415984
> 
> 赞同：1
> 
> 时间：2012-05-02T14:38:18.140
> 
> 标签：android, xml, http, http-post

我正在开发一个 android 项目，在该项目中我需要使用 post 方法将两个 xml 作为参数发送到服务器（即我想以表单形式发送）。我尝试使用以下代码发送数据，但它不起作用。远程数据库中没有数据。

```
private void postFormData(List<DataItem> ti,String ex,String getExpensesXml)
{    
//Create a new Http Client 
HttpClient httpclient = new DefaultHttpClient(); 
HttpPost httppost = new HttpPost(url); 
try
{ 
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("sync","true"));
    nameValuePairs.add(new BasicNameValuePair("tt",ti));
    nameValuePairs.add(new BasicNameValuePair("te",ex)); 

    UrlEncodedFormEntity form; 
    form = new UrlEncodedFormEntity(nameValuePairs,"UTF-8");  
    httppost.setEntity(form); 

    HttpResponse response = httpclient.execute(httppost); 
    HttpEntity entity = response.getEntity();  
    String line = EntityUtils.toString(entity);    
    System.out.println(line);

} catch (ClientProtocolException e) {
       e.printStackTrace();
    } catch (IOException e) {
       e.printStackTrace();
    } 
} 
```

我找不到问题所在。如果有人设法找到问题并建议我解决方案，那就太好了。

我还有两个问题？我在尝试正确的代码吗？有没有其他方法可以通过 Form 将 xml 数据发送到服务器？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:41:55.333

最后我找到了解决方案，我使用以下代码将数据作为从服务器发送到服务器

```
URL siteUrl;
    try {
        siteUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection) siteUrl
                .openConnection();
        conn.setRequestMethod("POST");
        conn.setDoOutput(true);
        conn.setDoInput(true);

        DataOutputStream out = new DataOutputStream(conn.getOutputStream());
        String content1 = ""; 

        Set getkey = param.keySet();
        Iterator keyIter = getkey.iterator();
        String content = "";
        for (int i = 0; keyIter.hasNext(); i++) {
            Object key = keyIter.next();
            if (i != 0) {
                content += "&";
            }
            content += key + "=" + param.get(key);
            System.out.println("Content" + content);
        }

        System.out.println(content);
        out.writeBytes(content.trim());
        out.flush();
        out.close();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                conn.getInputStream()));
        String line = "";
        while ((line = in.readLine()) != null) {
            System.out.println(line);
        }
        in.close();

    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
    db.close();
} 
```

它可能对像我这样的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:40:59.240

面临同样的问题。但最终设法将数据发布到服务器。你的代码绝对是它应该的方式，除了你必须编码你的`String`to`Base64`然后将它传递给`NameValuePair`. 在服务器端，您必须`String`从`Base64`. 它会起作用的。如果你需要，我可以分享代码。

# javascript - 如何根据鼠标移动画线

> ID：10415985
> 
> 赞同：1
> 
> 时间：2012-05-02T14:38:19.477
> 
> 标签：javascript

我正在寻找一种在鼠标开始到结束上画线的方法。例如，我有 DIV，并且我以圆形方式移动了鼠标。但我想在鼠标移动的路径中画一条线。

我不是在寻找任何 HTML5 解决方案。我希望它甚至可以在所有现代浏览器中使用。

请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:45:04.627

如果您希望它适用于所有现代浏览器，请使用 HTML5

如果您想支持旧浏览器，那么您可以使用[http://raphaeljs.com/](http://raphaeljs.com/) JS 库

如果可用，Raphael 使用 SVG，如果没有，则使用 VML。基本上除了 IE8 及以下的所有浏览器都会使用 SVG。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:07:22.433

我在 8 年前写了一些东西，6 年前对其进行了修改，现在检查了它 - 仍然有效。它是通过单击屏幕上的两个点来绘制线条，但只需稍作调整即可将其更改为鼠标移动。

它使用纯 JavaScript，本质上是将像素大小的图像附加到文档中。

我将按原样在这里编写代码。请注意，它真的很旧，而且在工作时，可能不是最佳实践。

```
 var PIXEL_PATH="http://i.stack.imgur.com/QXTrN.gif";
  var ST_LINE=1;
  var ST_CIRCLE=2;

  var strImageData="";
  var strUserInput="";
  var strImageName="";
  var iPointsCount=0;
  var iNumCalls=0;
  var loadComplete=false;
  var arrLines=new Array();
  var arrRedo=new Array();
  var strPoints="";
  var arrImages;
  var objWin;
  var INFINITY=-999999;
  var iLastX=INFINITY, iLastY=INFINITY;
  var drawStyle=ST_LINE;
  var arrPoints=new Array();
  var iCurrentImage=0;
  var blnLineFinished=true;
  var blnLoading=true;
  var strCurrentPoints="";

  document.onclick = DocumentClick;
  document.onkeyup = DocumentKeyup;
  self.onload=Init;

  function Init()
  {
   DrawPoint(0, 0);
   CommitDraw();
  }

  function DrawImage()
  {
   var x1, x2, y1,  y2;
   var iStep=12;
   blnLoading = true;
   for (j=0; j<document.images.length; j++)
       document.images[j].style.visibility = "hidden";
   if (objWin)
      objWin.close();
   arrLines = new Array();
   arrRedo = new Array();
   document.forms[0].redo.disabled = true;
   iLastX=INFINITY;
   iLastY=INFINITY;
   DrawPoint(0, 0);
   CommitDraw();
   if ((strImageData.length % 12) != 0)
      iStep = 13;
   for (i=0; i<strImageData.length; i+=iStep)
   {
      drawStyle = (iStep == 12)?ST_LINE:ToNumber(strImageData.substr(i, 1));
      x1 = ToNumber(strImageData.substr(i+iStep-12, 3));
      y1 = ToNumber(strImageData.substr(i+iStep-12+3, 3));
      x2 = ToNumber(strImageData.substr(i+iStep-12+6, 3));
      y2 = ToNumber(strImageData.substr(i+iStep-12+9, 3));
      Line(x1, y1, x2, y2);
   }
   return true;
  }

  function Random()
  {
   event.cancelBubble = true;
   var x1, x2, x1_old;
   var y1, y2, y1_old; 
   var z=0;
   if (drawStyle == ST_CIRCLE)
   {
      x1=Rnd(document.body.clientWidth-100)+100;
      y1=Rnd(document.body.clientHeight-100)+100;
      x2 = x1+MIN(ABS(x1-100), ABS(document.body.clientWidth-100-x1));
      y2 = y1+MIN(ABS(y1-100), ABS(document.body.clientHeight-100-y1));
      x1_old = x1;
      y1_old = y1;
      while ((R(x1, y1, x2, y2) >= ABS(x2-x1_old)) || (R(x1, y1, x2, y2) >= ABS(y2-y1_old)))
      {
         x1 += (ABS(x1-100) > ABS(document.body.clientWidth-100-x1))?-1:1;
         y1 += (ABS(y1-100) > ABS(document.body.clientHeight-100-y1))?-1:1;
         z++;
         if (z >= 100)
         break;
      }
   }
   else
   {
      x1=Rnd(document.body.clientWidth-30)+30;
      y1=Rnd(document.body.clientHeight-30)+30;
      x2=Rnd(document.body.clientWidth-30)+30;
      y2=Rnd(document.body.clientHeight-30)+30;
   }
   ClearLastPoint();
   Line(x1, y1, x2, y2);
   arrRedo = new Array();
   document.forms[0].redo.disabled = true;
   return true;
  }

  function ToNumber(str) {return (str*(-1)*(-1));}

  function Rnd(num) {return parseInt(Math.random()*num);}

  function DocumentClick()
  {
   var iCurX=window.event.x, iCurY=window.event.y;
//   blnLoading=false;
   if ((iLastX != INFINITY )&&(iLastY != INFINITY))
   {
      Line(iLastX, iLastY, iCurX, iCurY);
      if (drawStyle != ST_CIRCLE)
      {iLastX = iCurX; iLastY = iCurY;}
   }
   else
   {
      iLastX = iCurX;
      iLastY = iCurY;
   }
   arrRedo = new Array();
   document.forms[0].redo.disabled = true;
   return true;
  }

  function DocumentKeyup()
  {
   if (document.forms[0].all("load"))
      return false;
   strUserInput += String.fromCharCode(self.event.keyCode);
   if (strUserInput.toLowerCase().indexOf("shadow")>=0)
   {
      var objInput=document.createElement("INPUT");
      objInput.name = objInput.id = "load";
      objInput.type = "button";
      objInput.value = "Load";
      objInput.onclick = Load;
      document.forms[0].appendChild(objInput);
      return true;
   }
   if (strUserInput.length > 999)
      strUserInput.length = "";
   return false

  }

  function Line(x1, y1, x2, y2)
  {
   arrLines[arrLines.length] = drawStyle+AddZeros(x1, 3)+AddZeros(y1, 3)+
                               AddZeros(x2, 3)+AddZeros(y2, 3);

   blnLineFinished = false;
   strCurrentPoints = "";
   document.forms[0].undo.disabled = false;
   arrPoints = new Array();
   iCurrentImage = 0;

   if (!blnLoading)
   {
      divMsg.style.visibility = "visible";
      divMsg.style.left = x1+"px";
      divMsg.style.top = y1+"px";
   }

   arrImages=new Array();

   if (drawStyle == ST_CIRCLE)
      return Circle(x1, y1, x2, y2);

   if (x1 == x2)
   {
      for (y=MIN(y1, y2); y<=MAX(y1, y2); y++)
          DrawPoint(x1, y);
      return EndLine();
   }
   if (ABS((x2-x1))>=ABS((y2-y1)))
   {
      for (x=MIN(x1, x2); x<=MAX(x1, x2); x++)
          DrawPoint(x, Y(x, x1, y1, x2, y2));
      return EndLine();
   }
   else
   {
      for (y=MIN(y1, y2); y<=MAX(y1, y2); y++)
          DrawPoint(X(y, x1, y1, x2, y2), y);
      return EndLine();
   }
  }

  function Circle(x1, y1, x2, y2)
  {
   var y, x, r=R(x1, y1, x2, y2);
   var iFirst=(x1-r);
   var iLast=(x1+r);
   var iFirst2=(y1-r);
   var iLast2=(y1+r);
   for (x=iFirst; x<=iLast; x++)
   {
      y = Y2(r, x, x1, y1);
      DrawPoint(X2(r, y, x1, y1), y);
      DrawPoint(X3(r, y, x1, y1), y);
      y = Y3(r, x, x1, y1);
      DrawPoint(X2(r, y, x1, y1), y);
      DrawPoint(X3(r, y, x1, y1), y);
   }
   for (y=iFirst2; y<=iLast2; y++)
   {
      x = X2(r, y, x1, y1);
      DrawPoint(x, Y2(r, x, x1, y1));
      DrawPoint(x, Y3(r, x, x1, y1));
      x = X3(r, y, x1, y1);
      DrawPoint(x, Y2(r, x, x1, y1));
      DrawPoint(x, Y3(r, x, x1, y1));
   }
   iLastX=INFINITY;
   iLastY=INFINITY;
   return EndLine();
  }

  function R(x1, y1, x2, y2)
  {
   return Math.sqrt(((x2-x1)*(x2-x1))+((y2-y1)*(y2-y1)));
  }

  function EndLine()
  {
   CommitDraw();

   strPoints = strPoints.substr(0, strPoints.length-1)+"|";
   HideMessage();
   if (!blnLoading)
      divPointsCount.innerHTML = "0";
  }

  function HideMessage()
  {
   if (blnLineFinished)
   {
      divMsg.style.visibility = "hidden"; return true;
   }
   setTimeout("HideMessage();", 100);
  }

  function Y(x, x1, y1, x2, y2)
  {
   return (((y2-y1)/(x2-x1))*(x-x1))+y1;
  }

  function X(y, x1, y1, x2, y2)
  {
   return (((x2-x1)/(y2-y1))*(y-y1))+x1;
  }

  function Y2(r, x, x0, y0)
  {
   return (y0+Math.sqrt(ABS((r*r)-((x-x0)*(x-x0)))));
  }

  function X2(r, y, x0, y0)
  {
   return (x0+Math.sqrt(ABS((r*r)-((y-y0)*(y-y0)))));
  }

  function Y3(r, x, x0, y0)
  {
   return (y0-Math.sqrt(ABS((r*r)-((x-x0)*(x-x0)))));
  }

  function X3(r, y, x0, y0)
  {
   return (x0-Math.sqrt(ABS((r*r)-((y-y0)*(y-y0)))));
  }

  function ABS(n) {return (n>=0)?n:(n*-1);}

  function MAX(a1, a2) {return (a1>=a2)?a1:a2;}

  function MIN(a1, a2) {return (a1<=a2)?a1:a2;}

  function AddZeros(iNumber, iZeros)
  {
   var strZeros="";
   for (j=0; j<iZeros; j++)
       strZeros += "0";

   return (strZeros.substr(0, iZeros-(iNumber+"").length)+iNumber+"");
  }

  function DrawPoint(x, y)
  {
   if (PointExists(parseInt(x), parseInt(y)))
      return false;
   iPointsCount++;
   var objImage=document.createElement("IMG");
   objImage.id = "i"+iPointsCount;
   objImage.name = "i"+iPointsCount;
   objImage.src = PIXEL_PATH;
   objImage.width = objImage.height = 1;
   objImage.border = 0;
   objImage.style.position = "absolute";
   objImage.style.top = parseInt(y)+"px";
   objImage.style.left = parseInt(x)+"px";
   strCurrentPoints += parseInt(x)+","+parseInt(y)+"|";
   arrPoints[arrPoints.length] = objImage;
//   document.body.appendChild(objImage);
   strPoints += "i"+iPointsCount+",";
   return true;
  }

  function CommitDraw()
  {
   if (iCurrentImage >= arrPoints.length)
   {
      blnLineFinished = true; return true;
   }
   if (blnLoading)
   {
      for (iCurrentImage=0; iCurrentImage<arrPoints.length; iCurrentImage++)
          document.body.appendChild(arrPoints[iCurrentImage]);
      blnLineFinished = true;
   }
   else
   {
      document.body.appendChild(arrPoints[iCurrentImage]);
      iCurrentImage++;
      divPointsCount.innerHTML = (parseInt(divPointsCount.innerHTML)+1)+"";
      setTimeout("CommitDraw();", 1);
   }
  }

  function PointExists(x, y)
  {
   return (strCurrentPoints.indexOf(parseInt(x)+","+parseInt(y)+"|")>=0);
  }

  function GetImageData()
  {
   var strAns="";
   for (k=0; k<arrLines.length; k++)
       strAns += arrLines[k];

   return strAns;
  }

  function Undo()
  {
   event.cancelBubble=true;
   if (arrLines.length>0)
      ClearLastLine();
   arrRedo[arrRedo.length] = arrLines[arrLines.length-1];
   document.forms[0].redo.disabled = false;
   var arrTemp=new Array();
   for (i=0; i<arrLines.length-1; i++)
       arrTemp[i] = arrLines[i];
   arrLines = arrTemp;
   document.forms[0].undo.disabled = (arrLines.length == 0);
   if ((drawStyle == ST_CIRCLE)||(arrLines.length == 0))
   {
      iLastX=INFINITY;
      iLastY=INFINITY;
   }
   else
   {
      iLastX=parseInt(document.getElementById("i"+iPointsCount).style.left);
      iLastY=parseInt(document.getElementById("i"+iPointsCount).style.top);
   }
  }

  function Redo()
  {
   event.cancelBubble=true;
   if (arrRedo.length == 0)
      return false;
   var strLine=arrRedo[arrRedo.length-1];
   drawStyle = ToNumber(strLine.substr(0, 1));
   var x1=ToNumber(strLine.substr(1, 3));
   var y1=ToNumber(strLine.substr(4, 3));
   var x2=ToNumber(strLine.substr(7, 3));
   var y2=ToNumber(strLine.substr(10, 3));
   Line(x1, y1, x2, y2);
   var arrTemp=new Array();
   for (i=0; i<arrRedo.length-1; i++)
       arrTemp[i] = arrRedo[i];
   arrRedo = arrTemp;
   document.forms[0].redo.disabled = (arrRedo.length == 0);
   if (drawStyle == ST_CIRCLE)
   {
      iLastX=INFINITY;
      iLastY=INFINITY;
   }
   else
   {
      iLastX = x2;
      iLastY = y2;
   }
  }

  function ClearLastLine()
  {
   var strToClear="";
//alert("points: "+strPoints);
   for (j=strPoints.length-2; (j>=0)&&(strPoints.charAt(j) != "|"); j--)
       strToClear += strPoints.charAt(j);
   strPoints = strPoints.substr(0, strPoints.length-strToClear.length-1);
   var strTmp="";
   for (k=strToClear.length-1; k>=0; k--)
       strTmp += strToClear.charAt(k);
   strToClear = strTmp;
   var arrTmp=strToClear.split(",");
   iPointsCount -= arrTmp.length;
   for (i=0; i<arrTmp.length; i++)
       document.body.removeChild(document.getElementById(arrTmp[i]));
  }

  function ClearLastPoint()
  {
   iLastX=INFINITY;
   iLastY=INFINITY;
   event.cancelBubble=true;
  }

  function ToggleShape(a)
  {
   event.cancelBubble=true;
   if (drawStyle == ST_CIRCLE)
   {
      a.value = "Circle";
      drawStyle = ST_LINE;
      return ClearLastPoint();
   }
   if (drawStyle == ST_LINE)
   {
      a.value = "Line";
      drawStyle = ST_CIRCLE;
      return ClearLastPoint();
   }
   return false;
  } 
```

它带有这样的 HTML：

```
<form>
    <input name="clear" id="clear" type=button value="*" onclick="ClearLastPoint();" />
    <input name="undo" id="undo" type=button value="Undo" onclick="Undo();" DISABLED />
    <input name="redo" id="redo" type=button value="Redo" onclick="Redo();" DISABLED />
    <input name="random" id="random" type=button value="Random" onclick="Random();" />
    <input name="circle" id="circle" type=button value="Circle" onclick="ToggleShape(this);" />
</form> 
```

[你可以在这个小提琴](http://jsfiddle.net/AHwn5/)中看到它。​​它使用单像素图像，你可以[在这里](http://i.stack.imgur.com/QXTrN.gif)下载它。（右键单击并选择另存为）

最初它还支持将绘图保存到服务器并使用经典 ASP 加载保存的绘图，但我认为它与您无关，所以我在代码中省略了它。

# database - Sitecore AdvancedDatabaseCrawler 优势/优势

> ID：10415994
> 
> 赞同：0
> 
> 时间：2012-05-02T14:38:56.687
> 
> 标签：database, search, module, sitecore, web-crawler

我尝试使用 Sitecore.Search 命名空间，它似乎可以做一些基本的事情。我现在正在评估 Alex Shyba 的 AdvancedDatabaseCrawler 模块。使用这个模块而不是编写自己的爬虫和搜索功能有什么好处？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:48:39.227

**优点**：

*   你不必写任何东西。
*   它处理您需要编写甚至查询 Sitecore 的大量代码，例如基本搜索、具有字段级排序的基本搜索、字段级搜索、关系搜索（查找字段的 GUID 匹配）、多字段搜索、数字范围和日期范围搜索等。
*   它使用逻辑运算符处理组合搜索
*   [您可以访问代码](http://svn.sitecore.net/AdvancedDatabaseCrawler/Branches/v2/)。
*   [该视频](http://www.youtube.com/watch?feature=player_embedded&v=m9av3C_tPH8)显示了运行各种搜索类型的代码和前端示例。

**缺点**：

*   我没有想到，因为如果您发现问题或扩展它的方法，您可以完全访问代码并且可以根据您的需要对其进行修改。我以前通过为类创建`GetHashCode()`and`Equals()`方法来做到这一点`SkinnyItem`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:35:40.207

首先，访问 Lucene 索引的“旧”方式非常简单，但不幸的是，它已从 Sitecore 6.5 中弃用。访问 Lucene 索引的“新”方式非常复杂，因为可能性是无穷无尽的。Alex Shyba 的实现是使使用“新”方式变得明智的缺失部分。

看看这篇博文：http: [//briancaos.wordpress.com/2011/10/12/using-the-sitecore-open-source-advanceddatabasecrawler-lucene-indexer/](http://briancaos.wordpress.com/2011/10/12/using-the-sitecore-open-source-advanceddatabasecrawler-lucene-indexer/)

这是关于如何配置 AdvancedDatabaseCrawler、如何进行简单搜索以及如何进行多字段搜索的 3 部分描述。如果没有 Alex 的 AdvancedDatabaseCrawler，这些任务将需要将近 100 行代码。使用 AdvancedDatabaseCrawler，只需 7 行代码。

因此，如果您需要索引解决方案，这就是要使用的解决方案。

# opencv - 相机校准和重新映射是否会产生针孔相机模型？

> ID：10415999
> 
> 赞同：1
> 
> 时间：2012-05-02T14:39:15.577
> 
> 标签：opencv, computer-vision, camera-calibration, calibration

我正在使用 opencv 来测量一些物体。在进行相机校准并重新映射原始图像后，我可以将生成的图像视为由针孔相机模型产生的吗？（所以我可以使用 x = Xf/Z 的简单方程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:58:18.517

是的，在消除镜头畸变后，相机模型估计为针孔相机模型。但是你没有提到 x、X、Z 和 f 是什么。因为你写的方程式真的是错误的。因此，如果您对此或坐标系有疑问，请随时澄清/扩展您的问题。