# StackOverflow 问答 000828000-000828999

# c++ - 使用 SubclassDlgItem 更改控件类型

> ID：828000
> 
> 赞同：1
> 
> 时间：2009-05-06T04:20:44.577
> 
> 标签：c++, mfc, user-interface

我有一个带有对话框的 C++ MFC 应用程序，我想根据组合框中的选择动态更改控件的类型。对话框资源从一个普通的旧编辑控件开始，然后我调用 SubclassDlgItem 以更改为自定义控件类型。

到目前为止，一切都很好。现在，当用户更改屏幕上不同组合框中的选择时，我想将此控件更改为不同的自定义类型。因此，我通过在指向该控件的自定义类的指针上调用 delete 来销毁现有控件。然后我调用 ::CreateEx 来重新创建我的编辑控件并再次调用 SubclassDlgItem 来创建新的自定义控件。

我的问题是这闪烁了很多，我想我正在使用 ::CreateEx 在我的自定义控件之上创建编辑控件。关于如何摆脱闪烁的任何想法，特别是如果用户正在快速更改控制组合框的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T04:23:59.123

您可以在父窗口的同一区域创建一组所有可能的控件，并仅显示相关的控件并隐藏所有其他控件。当用户导致控件更改时，您隐藏活动控件并显示新的相关控件。这应该看起来更平滑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T15:51:54.103

我的一位同事建议在我进行切换之前调用 CWnd::LockWindowUpdate()。所以，它归结为这样的事情：

```
CRect r;
DWORD dwStyle = WS_CHILD|WS_TABSTOP|WS_VISIBLE;
m_pParent->GetDlgItem(m_nID)->GetWindowRect(&r);
m_pParent->ScreenToClient(r);
m_pParent->LockWindowUpdate();
m_pParent->InvalidateRect(r);
delete m_pCust;   // Delete the old custom control
m_pCust = NULL;
::CreateWindowEx(0, "EDIT", "", dwStyle, r.left, r.top, r.Width(), r.Height(), m_pParent->m_hWnd, (HMENU)m_nID, AfxGetInstanceHandle(), NULL);
m_pCust = new CustomCtrl();
pCust->SubclassDlgItem(m_nID, m_pParent);
m_pParent->UnlockWindowUpdate() 
```

由于我的自定义控件的作用，有一点涉及。我最终调用 m_pParent->InvalidateRect(r) 让我的控件在最后正确绘制。

另外，原来 ::CreateEx 编辑控件的重叠是因为我在删除旧的自定义控件之前调用了 UnsubclassDlgItem

# c# - CMS -WYSIWYG 用于傻瓜

> ID：828004
> 
> 赞同：0
> 
> 时间：2009-05-06T04:21:49.537
> 
> 标签：c#, .net, asp.net, content-management-system, wysiwyg

因此，我正在为我的公司开展一个项目，该项目涉及允许用户创建自己的网页的能力。例如，知道自己在做什么的真正内容管理器会制作所有的主页面。然后，用户可以创建自己的页面来描述他们所做的事情并与他人共享项目。现在要注意的是，这些用户的经验为零，我的意思是制作网页的经验为零。我的目标是制作 10 个可供他们选择的模板，然后他们可以拖放这些模板来制作网页。我看过像 Ektron 和其他 CMS 系统这样的项目，但价格是按用户计算的，我们的用户数以千计。如果没有使用易于使用的所见即所得编辑器制作整个自定义 CMS，有什么可以帮助的吗？我知道有所见即所得的编辑器，但我只是想获得一些想法。还，

谢谢，

乔乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T04:44:04.117

维基呢？[融合](http://www.atlassian.com/software/confluence/)是体面的imo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T04:47:50.800

[tinymce](http://tinymce.moxiecode.com/)非常棒且易于实现。Wordpress 使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T15:39:21.280

您要求的是“大型网站工厂”。并非所有 CMS 都是针对此类业务案例而设计的。

请注意，您的要求是经典但并非微不足道的。如果管理不善（在编辑和浏览模式下），成千上万用户的个性化网站不会引起性能问题。

因此，您应该专注于为此类要求设计的 CMS，而不是为支持重负载而设计的 CMS。

我可以推荐 Jahia（www.jahia.com，请参阅“我的门户”功能[http://www.jahia.com/jahia/Jahia/site/jahiacom/portal](http://www.jahia.com/jahia/Jahia/site/jahiacom/portal)，定价不基于每个用户：[http://www. jahia.com/jahia/Jahia/Home/products/Pricing/pid/594](http://www.jahia.com/jahia/Jahia/Home/products/Pricing/pid/594)）

我同意这肯定不是为 webfactory 设计的唯一一个（即使我最喜欢！），但您可以查看在线演示并发表您的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T07:56:40.173

我个人会避免使用 OpenWYSIWYG；文档不是很好，并且有一段时间没有更新。

我建议查看[YUI 富文本编辑器](http://developer.yahoo.com/yui/editor/ "YUI 富文本编辑器")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T04:41:52.420

[OpenWYSIWYG](http://www.openwebware.com/)怎么样......（开源:)）。我没有尝试过，但似乎值得检查..

我不确定 Wiki 是否适合您的场景。但如果你这么认为，[MediaWiki](http://www.mediawiki.org/)是另一个有用的产品。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T04:47:52.530

[TinyMCE](http://tinymce.moxiecode.com/)是一个非常好的所见即所得编辑器，具有可扩展的插件架构。

# c# - 更改独占锁定对象时的奇怪行为 - Monitor.Enter(x)

> ID：828014
> 
> 赞同：1
> 
> 时间：2009-05-06T04:25:45.593
> 
> 标签：c#, multithreading, monitor

我想看看如果你改变一个被 Monitor.Enter() 锁定的对象的引用会发生什么。正如预期的那样，抛出了 SynchronizationLockException。但是我很惊讶地看到在抛出异常之前有几个线程通过了监视器。

这是下面的代码正在做的事情。

1.  创建并启动 100 个线程
2.  让所有线程等待，直到设置 ManualResetEvent。
3.  设置 ManualResetEvent - 有点像在 Indy 比赛中挥舞绿旗。
4.  在 x 上设置排他锁 (Monitor.Enter(x))
5.  更改 x 的参考。

在这一点上，我预计会引发某种异常，但直到 Monitor.Exit(x) 才会发生这种情况。真正奇怪的是，在引发异常之前，似乎有 10 - 20 个线程能够通过锁。这是怎么发生的？似乎不应该。当然，更改独占锁定对象的引用是不行的。我永远不会在真正的代码中这样做，但我仍然惊讶地看到其他线程通过监视器。你的意见？

```
using System;
using System.Threading;

namespace ThreadingPlayground
{
  class Program
  {
    private int _value;
    object x = new object();

    ManualResetEvent _event = new ManualResetEvent(false);

    static void Main()
    {
      Program p = new Program();
      p.StartThreads();
      Console.ReadLine();
    }

    private void StartThreads()
    {

      for(int i = 0;i<100;i++)
      {
        Thread t = new Thread(IncrementValue);
        t.Start();
      }
      _event.Set();
    }

    private void IncrementValue()
    {
      WaitHandle.WaitAll(new WaitHandle[] {_event});

      Monitor.Enter(x);

      // Change the reference of the exclusively locked object. This 
      // allows other threads to enter, should this be possible?
      x = Thread.CurrentThread.ManagedThreadId.ToString();

      Console.WriteLine(++_value);

      // throws a SynchronizationLockException 
      // but not until 10 - 20 more lines are written
      Monitor.Exit(x);
    }
  }
} 
```

[![控制台输出，看起来有些线程通过了监视器？？](https://i.stack.imgur.com/ilFwL.jpg)](https://i.stack.imgur.com/ilFwL.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T04:30:00.110

你看到的是预期的行为。用于将引用传递给`Monitor.Enter()`. 更改引用不应阻止其他线程获取排他锁，因为变量具有新值，并且该引用不会在任何地方锁定。

您的问题来自`Exit`，因为调用的线程`Exit`对传入的引用没有独占锁。另一个线程很可能对其有锁，但您正在执行的线程没有。

如您所知，这就是为什么最好使用其引用永远不会改变的变量进行锁定。如果您的资源变量可能发生变化，请使用新的引用。

这足够清楚吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T04:33:44.530

'x' 是对对象的引用；它不是对象本身。当你这样做

```
 x = Thread.CurrentThread.ManagedThreadId.ToString(); 
```

您已经丢弃了 x 之前引用的锁定对象，并使 x 引用了其他对象。现在当你做

```
 Monitor.Exit(x); 
```

你得到了异常，因为这个对象实际上没有被锁定 - 你锁定的对象现在是垃圾收集器收集的垃圾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T15:57:10.157

这种行为的原因是您在此处更改 x 的值：

```
x = Thread.CurrentThread.ManagedThreadId.ToString(); 
```

所以当你到达

```
Monitor.Exit(x) 
```

您正在使用不同的对象释放锁。就好像你用一把钥匙放了一把挂锁，然后试着用另一把挂锁的钥匙取下挂锁。

此外，与其他指令相比，Console.Writeline 指令成本高昂，因此在其中一个线程接近终点线之前，有几个线程会进入 Monitor。

这是一个示例运行：

你启动了一堆线程。

*   线程`T1`使用 object 获取锁`x`。
*   `T2`尝试使用 object 获取锁`x`。这个线程不走运，因为我们知道它会永远等待。
*   `T1`变化`x`。它现在是一个新对象。我会打电话`x'1`的。
*   `T3`尝试获取锁。但变量`x`实际上引用了对象`x'1`。没有人锁定`x'1`，所以他通过了。
*   `T3`变化`x`。它现在是一个名为 的新对象`x'3`。
*   `T1`写入控制台。
*   `T3`写入控制台。
*   `T1`尝试使用`x`指向对象的变量释放锁`x'3`......
*   对象说： “`Monitor`嘿，你以为你在做什么？你没有那个锁！吃这个**例外**的小吸盘”
*   **鳍**

# html - 使用流量面板进行绝对定位

> ID：828015
> 
> 赞同：0
> 
> 时间：2009-05-06T04:25:50.417
> 
> 标签：html

这可以做到吗？

看起来这应该是可能的。一般来说，我希望整个面板 (div) 像您通常期望的那样在体内流动。但是，我想绝对将控件定位在面板中。

我的经验是，当我尝试在流面板中绝对定位控件时，控件不会被视为包含在具有容器相对坐标的面板中。

您可以使用 WinForms 中的流程面板来执行此操作，我喜欢这些方法的组合。在我看来，这将是两全其美的结果，尽管我希望回应说这将是一件坏事。

评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T04:35:38.613

鉴于此 HTML：

```
<div class="panel">
  <h2>Panel title</h2>
  <div class="close">x</div>
  <div class="content">Panel content</div>
</div> 
```

你可以使用这个 CSS：

```
div.panel{
  position:relative;
}
div.panel h2,
div.panel div.close,
div.panel div.content{
  position:absolute;
} 
```

`<div class="panel">`将保留在通常的文档流中，而它的每个孩子都将绝对定位在该面板中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T04:36:19.750

将 CSS 的“位置”属性更改`<div>`为“相对”。如果您的 HTML 看起来像：

```
<body>
    <div id="container">
        <a id="control">start</a>
    </div>
</body> 
```

然后将 CSS 更新为：

```
#container {
    position: relative;
}
#control {
    position: absolute;
    top: 0;
    left: 0;
} 
```

#control 元素现在将相对于#container。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T04:37:18.250

如果将 div 设置为 position: relative，则 div 的任何子元素都可以通过将它们设置为 position: absolute 来绝对定位在 div 内。

例子：

HTML：

```
<div id='panel'>
    <div id='control'>I'm positioned absolutely!</div>
</div> 
```

CSS：

```
#panel { position: relative; width: 300px; height: 100px;}
#control { position: absolute;  top: 10px; left: 20px; 
```

# jquery - 带有 ajax 友好参数的 Zend Framework 路由

> ID：828019
> 
> 赞同：0
> 
> 时间：2009-05-06T04:28:58.847
> 
> 标签：jquery, api, zend-framework, rest

我正在使用 Zend Framework 构建一个 REST API。我有映射到我建模的所有资源的路线设置。我还创建了一个 RESTful 控制器插件来将不同类型的请求（PUT、GET 等）引导到正确的控制器操作。

我正在使用 jQuery 进行 ajax 调用，默认情况下它将 GET 参数附加到 ajax 调用的 URL。我想将这些参数作为我的资源的过滤器传递。

**如何让 Zend Framework 将这些参数传递到我的控制器中？希望不必编写控制器插件来完成这项工作......**

### 工作网址

```
http://myapp.com/catalog/products/categories/max_results/20/start_index/5 
```

### 我想要的是

```
http://myapp.com/catalog/products/categories/?max_results=20&start_index=5 
```

### Zend 框架路由

```
routes.catalog_product_categories.type = "Zend_Controller_Router_Route"
routes.catalog_product_categories.route = "catalog/products/categories/*"
routes.catalog_product_categories.defaults.controller = "categories"
routes.catalog_product_categories.defaults.action = "productcategories"
routes.catalog_product_categories.defaults.RESTful = true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T19:25:31.000

将 Lighttpd 重写规则更改为此修复它：

```
url.rewrite-once = (
".*\?(.*)$" => "/index.php?$1",
".*\.(js|ico|gif|jpg|png|css)$" => "$0",
"" => "/index.php"
) 
```

[http://framework.zend.com/issues/browse/ZF-2901?focusedCommentId=20029#action_20029](http://framework.zend.com/issues/browse/ZF-2901?focusedCommentId=20029#action_20029)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T10:54:38.030

也许您可能想要更改您的 Ajax 调用以强制将参数发送到脚本：

```
$.get("/catalog/", { max_results: "20", start_index: "5" } );
$.post("/catalog/", { max_results: "20", start_index: "5" } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-08T04:41:03.373

您可以使用以下方法访问该参数：

```
$params = $this->getRequest()->getRequestUri(); 
```

在您的控制器操作上。为了方便访问该参数，您可以使用：

```
$array = parse_url($params, PHP_URL_QUERY); 
```

我认为您不需要自定义路线来完成这项工作。希望这可以帮到你。

# sharepoint - 如何访问列表中的列表项

> ID：828034
> 
> 赞同：4
> 
> 时间：2009-05-06T04:37:06.427
> 
> 标签：sharepoint

我正在尝试在网格视图中显示 ListItems。

请帮助我找到访问列表项的方法。

```
using (SPSite site = new SPSite("http://mysitehere......"))
{
    using (SPWeb web = site.OpenWeb())
    {
        SPList list = web.Lists["TestList"];
        .......
        .......
    }
} 
```

请帮助我访问列表项值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T06:37:23.407

下面的代码应该可以解决问题，[从 msdn 此处获取完整文章](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitem.aspx)

```
using (SPSite site = new SPSite("http://mysitehere......"))
{
    using (SPWeb web = site.OpenWeb())
    {
        SPList list = web.Lists["TestList"];
        SPListItemCollection collListItems = list.Items;
        foreach (SPListItem oListItem in collListItems)
        {
           string value = SPEncode.HtmlEncode(oListItem["Field1_Name"]);
           // do something with value
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T06:45:24.323

您可以使用以下任何一种：

 `````
 SPList list;
        foreach (SPListItem item in list.Items)
        {
            string title = item["Title"];
        }

        SPQuery query = new SPQuery();
        query.ViewFields = "<FieldRef Name='Title'/>";
        SPListItemCollection items = list.GetItems(query);
        foreach (SPListItem item in list.Items)
        {
            string title = item["Title"];
        }

        for (int i = 0; i < list.Items.Count; i++ )
        {
            string title = list.Items[i]["Title"];
        } 
````  `从性能的角度来看，我建议使用 SP Query，因为这样您就可以指定要获取哪些字段以及是否要获取与列表项相关的任何元数据。这导致更少的数据库调用。

亲切的问候，

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T06:04:44.623

使用[SPDataSource](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.spdatasource.aspx)在网格视图中显示列表项，即创建和配置SPDataSource 对象并将其绑定到[SPGridView](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.spgridview.aspx)控件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-22T19:31:07.077

为了在 gridview 中显示项目（如果您不想使用 SPGridView），我会使用[GetDataTable](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitemcollection.getdatatable.aspx)方法，而不是像许多答案那样使用 foreach 循环。

```
if (items.Count > 0)
{
    DataTable dt = items.GetDataTable();
    GridView1.DataSource = dt;
    GridView1.DataBind();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T05:21:58.643

好吧，我没有做过任何共享点工作，但我相信你可以使用：

```
foreach (SPListItem item in list.Items) 
```

或者

```
foreach (SPListItem item in list.GetItems(view)) // or query 
```

或通过索引或 guid 访问：

```
SPListItem item = list.Items[10];
SPListItem item = list.Items[guid]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-09T13:50:55.247

如果您使用的是 .NET 3.5，我建议您使用 linq 数据源和 spgridview 将 splistitems 绑定到 gridview。为您节省大量时间。我的博客上有一个[例子](http://johanleino.spaces.live.com/blog/cns!6BE273C70C45B5D1!328.entry)。要显示图像，您必须获取图像的 url。这是一个例子：

```
SPListItem item = GetItem();
string imagefieldhtml = item["NameOfImageField"].ToString();
ImageFieldValue imagefield = new ImageFieldValue(imagefieldhtml);

var url = imagefield.ImageUrl; 
```

url 变量现在将保存图像 url。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-06T18:26:11.597

unknown(yahoo) 建议的 SPQuery 方法是可行的方法，但是您应该记住 SPQuery 的默认行限制为 100：

```
try
        {
            using (SPSite site = new SPSite(theURL))
            {
                SPWeb web = site.OpenWeb();
                SPList list = web.Lists["TheNameOfTheList"];

                //search each ListItem where the date is after 1/1 2009
                SPQuery query = new SPQuery();

                //the default is 100, which is less then the expected max
                query.RowLimit = 500;

                // The U2U CAML Query builder rules :-)
                query.Query = "<Where><Gt><FieldRef Name='StartDate' /><Value Type='DateTime'>";
                query.Query += "2009-01-01T00:00:00Z</Value></Gt></Where>";
                SPListItemCollection resultset = list.GetItems(query);
                foreach (SPListItem item in resultset)
                {
                    // do something  
                }
            }
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-09-06T13:02:08.967

好的，我已经解决了上面的问题。在我的例子中，我不需要使用 SPEncode.HTML，所以我已经注释掉了所有不需要的东西。如果其他人需要，这是固定代码：

```
using (SPSite site3 = SPContext.Current.Site)
{
    using (SPWeb web2 = site3.OpenWeb())
    {

        // SPWeb site3 = SPContext.Current.Site.RootWeb;
        SPList list2 = web2.Lists["Configuration"];
        SPListItemCollection collListItems = list2.Items;

        foreach (SPListItem oListItem in list2.Items)
        {
            //string value = SPEncode.HtmlEncode.ToString(oListItem["List name"]);
            string valueListName = oListItem["List name"].ToString();
            string valueListURL = oListItem["List URL"].ToString();
        }
    }
} 
```

# active-directory - 如何使用 WinNT 协议从 Active Directory 获取用户 GUID？

> ID：828036
> 
> 赞同：1
> 
> 时间：2009-05-06T04:38:00.573
> 
> 标签：active-directory

我正在尝试从 Active Directory 获取用户 GUID。我的代码：

```
DirectoryEntry entry = new DirectoryEntry("WinNT://DOMAIN/UserName");
Console.WriteLine("The GUID of the ADS object:" + entry.Guid);
Console.WriteLine("The Native GUID of the ADS object:" + entry.NativeGuid); 
```

无论用户和域如何，上面的代码总是返回 d83f1060-1e71-11cf-b1f3-02608c9e7553。

是否可以使用 WinNT 协议获取用户 GUID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T04:58:08.637

查看 Richard Mueller 的[Hilltop Lab](http://www.rlmueller.net/UserAttributes.htm)，他有很多电子表格，显示了各个提供商公开的所有属性。特别是，他的 WinNT 提供程序公开的属性列表显示没有诸如用户的“GUID”或 OID 之类的东西或任何类似的东西公开。

请注意 - WinNT 提供程序仅用于向后兼容，并且实际上仅适用于本地计算机帐户。

如果您想访问 DOMAIN 帐户，您应该使用 LDAP 提供程序来代替 - 它可以让您访问用户帐户上的所有 LDAP 属性。

马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T03:55:53.403

也许您的意思是 SID（安全标识符）。像 GUID 一样，它是唯一的，至少在域树中是独一无二的。我认为该属性是“objectSid”。它是二进制的（字节[]）。我不记得它有多大（28 字节？），但我很确定它不是 GUID。

# performance - 将应用程序日志 (Coldfusion/J2EE) 与 IIS 日志相关联，以调试客户端网络问题

> ID：828037
> 
> 赞同：0
> 
> 时间：2009-05-06T04:38:01.807
> 
> 标签：performance, http, iis, logging, isapi

我最近看到一些客户抱怨我的网站运行缓慢，我很确定问题与他们的网络有关。我希望能够更彻底地向自己证明这一点，并且能够更主动地联系那些似乎遇到网络问题的客户，然后再敲我的门。

如果我正在运行 ASP.Net，我会尝试使用[Response.AppendToLog 方法](http://msdn.microsoft.com/en-us/library/ms524861.aspx "Response.AppendToLog 方法")并附加一个令牌，以便我可以将所有内容绑定回我的自定义应用程序级别日志记录（用户、客户端、处理时间等）。如果没有 ASP.net，我似乎无法找到一种方法。我猜它是内置在 ASP 的 ISAPI 中的。我的请求通过 IIS 到 JRun 的 ISAPI 到 Coldfusion（*.cfm/* .cfc 文件）。

我最感兴趣的是了解**客户端接收内容**所花费的时间，而不仅仅是处理请求所花费的时间。

如果还有其他我不认为值得一看的地方/信息，请告诉我。也许我应该以某种方式从 HTTP.sys 记录信息？

我知道我可以在每个请求上设置一个 cookie 并由 IIS 记录，我只是希望有一个更好的解决方案。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T02:23:36.747

见[Jiffy](http://code.google.com/p/jiffy-web/)。它“是一个端到端的真实世界网页仪器和测量套件”。

介绍[性视频](http://blip.tv/file/1018527)提供了一个很好的概述。

# algorithm - 对无向图 KSPA 的建议

> ID：828041
> 
> 赞同：5
> 
> 时间：2009-05-06T04:39:27.607
> 
> 标签：algorithm, graph-theory, shortest-path

有一个 KSPA 的自定义实现需要重新编写。当前实现使用修改后的 Dijkstra 算法，其伪代码大致解释如下。我认为它通常被称为使用边缘删除策略的 KSPA。（我是图论的新手）。

```
Step:-1\.  Calculate the shortest path between any given pair of nodes using the Dijkstra algorithm. k = 0 here.
Step:-2\.   Set k = 1
Step:-3\.   Extract all the edges from all the ‘k-1’ shortest path trees. Add the same to a linked list Edge_List.
Step:-4\.  Create a combination of ‘k’ edges from Edge_List to be deleted at once such that each edge belongs to a different SPT (Shortest Path Tree). This can be done by inspecting the ‘k’ value for each edge of the combination considered. The ‘k’ value has to be different for each of the edge of the chosen combination.
Step:-5\.   Delete the combination of edges chosen in the above step temporarily from the graph in memory.
Step:-6\.   Re-run Dijkstra for the same pair of nodes as in Step:-1.
Step:-7\.   Add the resulting path into a temporary list of paths. Paths_List.
Step:-8\.   Restore the deleted edges back into the graph.
Step:-9\.   Go to Step:-4 to get another combination of edges for deletion until all unique combinations are exhausted. This is nothing but choosing ‘r’ edges at a time among ‘n’ edges => nCr.
Step:-10\. The ‘k+1’ th shortest path is = Minimum(Paths_List).
Step:-11\. k = k + 1 Go to Step:-3, until k < N.
Step:-12\. STOP 
```

据我了解该算法，为了获得第 k 条最短路径，将在每个源-目的地对之间找到“k-1”个 SPT，并且对于每个组合同时删除一个 SPT 中的每个“k-1”个边。显然，该算法具有组合复杂性，并且在大图上阻塞了服务器。人们向我推荐了 Eppstein 的算法（[http://www.ics.uci.edu/~eppstein/pubs/Epp-SJC-98.pdf](http://www.ics.uci.edu/~eppstein/pubs/Epp-SJC-98.pdf)）。但是这份白皮书引用了一个“有向图”，我没有看到提到它只适用于有向图。我只是想问这里的人们是否有人在无向图上使用过这个算法？

如果没有，是否有好的算法（就时间复杂度而言）在无向图上实现 KSPA？

提前致谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-08-25T08:50:05.123

时间复杂度：O(K*(E*log(K)+V*log(V)))

O(K*V) 的内存复杂度（+O(E) 用于存储输入）。

我们执行修改后的 Djikstra 如下：

*   对于每个节点，而不是从起始节点保持当前已知的最佳路由成本。我们保留从起始节点开始的最佳 K 条路线
*   在更新节点的邻居时，我们不检查它是否改进了当前已知的最佳路径（如 Djikstra 所做的那样），我们检查它是否改进了 K' 最好的当前已知路径中最差的路径。
*   在我们已经处理了节点的 K 个最佳路由中的第一个之后，我们不需要找到 K 个最佳路由，而只剩下 K-1 个，然后再找到一个 K-2 个。这就是我所说的K'。
*   对于每个节点，我们将为 K' 当前已知的最佳路径长度保留两个优先级队列。
    *   在一个优先级队列中，最短路径位于顶部。我们使用这个优先级队列来确定 K' 中的哪一个是最好的，并将在常规 Djikstra 的优先级队列中用作节点的代表。
    *   在另一个优先级队列中，最长的路径位于顶部。我们使用这个来将候选路径与 K' 路径中最差的路径进行比较。

# linux - 如何链接到 GCC 中特定版本的共享库

> ID：828053
> 
> 赞同：46
> 
> 时间：2009-05-06T04:44:49.310
> 
> 标签：linux, gcc, linker, debian

我正在编译一些在 Debian Linux 系统上使用 libcurl 的代码。我的开发机器正在运行 Debian 5，但我希望二进制文件也可以在较旧的 Debian 4 系统上使用。

我发现如果我指定**-lcurl**它将链接到 libcurl.so.4 但 Debian 4 系统只有 libcurl.so.3

有什么方法可以告诉 GCC 链接到 libcurl.so.3（在 Debian 4 和 5 中都存在）或 libcurl.so 以便它使用任何可用的版本？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-06-25T10:24:01.467

而不是使用“-lcurl”使用“-l:libcurl.so.3”当然也使用“-L _installed_pa​​th_”

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-05-06T04:47:10.740

您可以在链接器命令行上传递实际的 .so 文件而不是 -l ，它应该可以执行您想要的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T04:47:58.163

如何为您的项目创建一个链接到 .3 的本地符号链接，然后您可以在编译时使用 -L 。我不确定您是否会遇到名称冲突，但您始终可以将其称为 libcurl-old.so 以防万一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-30T17:51:07.903

我认为正确的方法是使用链接器的`--filter`and`--auxiliary`标志。

它们的文档记录不多，但应该允许您根据安装的机器从同一库的不同版本中加载符号。

# functional-programming - 在 Haskell 函数定义中应用 DRY 的指南

> ID：828061
> 
> 赞同：3
> 
> 时间：2009-05-06T04:47:39.490
> 
> 标签：functional-programming, dry, haskell

我有一个问题，关于应用 DRY 原则的特定方式是否被认为是 Haskell 中的良好实践。我将举一个例子，然后询问我所采用的方法是否被认为是良好的 Haskell 风格。**简而言之，问题是这样的：当你有一个很长的公式，然后你发现自己需要在其他地方重复该公式的一些小子集时，你是否总是将重复的公式子集放入一个变量中，这样你就可以保持 DRY ? 为什么或者为什么不？**

**示例：** 假设我们正在获取一串数字，并将该字符串转换为其对应的 Int 值。（顺便说一句，这是来自“Real World Haskell”的练习）。

这是一个有效的解决方案，只是它忽略了边缘情况：

```
asInt_fold string = fst (foldr helper (0,0) string)
  where
    helper char (sum,place) = (newValue, newPlace)
      where 
        newValue = (10 ^ place) * (digitToInt char) + sum
        newPlace = place + 1 
```

它使用 foldr，累加器是下一个位置值和到目前为止的总和的元组。

到现在为止还挺好。现在，当我去实现边缘情况检查时，我发现我需要在不同的地方使用一小部分“newValue”公式来检查错误。例如，在我的机器上，如果输入大于 (2^31 - 1)，则会出现 Int 溢出，因此我可以处理的最大值为 2,147,483,647。因此，我进行了 2 次检查：

1.  如果位值 9（十亿位）且数字值 > 2，则存在错误。
2.  如果 sum + (10 ^ place) * (digitToInt char) > maxInt，则有错误。

这 2 项检查使我重复了部分公式，因此我引入了以下新变量：

*   digitValue = digitToInt 字符
*   newPlaceComponent = (10^place) * digitValue

*我引入这些变量的原因仅仅是 DRY 原则的自动应用：*我发现自己重复了公式的那些部分，所以我定义了它们一次且仅一次。

但是，我想知道这是否被认为是好的 Haskell 风格。有明显的优点，但我也看到了缺点。它确实使代码更长，而我见过的大部分 Haskell 代码都非常简洁。

**那么，您是否考虑过这种良好的 Haskell 风格，您是否遵循这种做法？为什么/为什么不？**

对于它的价值，这是我处理许多边缘情况的最终解决方案，因此具有相当大的 where 块。由于我应用了 DRY 原则，您可以看到块有多大。

谢谢。

```
asInt_fold "" = error "You can't be giving me an empty string now"
asInt_fold "-" = error "I need a little more than just a dash"
asInt_fold string | isInfixOf "." string = error "I can't handle decimal points"
asInt_fold ('-':xs) = -1 * (asInt_fold xs) 
asInt_fold string = fst (foldr helper (0,0) string)
  where
    helper char (sum,place) | place == 9 && digitValue > 2 = throwMaxIntError
               | maxInt - sum < newPlaceComponent      = throwMaxIntError
                   | otherwise                             = (newValue, newPlace)
            where
              digitValue =  (digitToInt char)
              placeMultiplier = (10 ^ place)
              newPlaceComponent = placeMultiplier * digitValue
              newValue = newPlaceComponent + sum
              newPlace = place + 1
              maxInt = 2147483647
              throwMaxIntError = 
                        error "The value is larger than max, which is 2147483647" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T05:10:13.943

DRY 在 Haskell 中的原则与其他任何地方一样好 :) 您在 Haskell 中所说的简洁背后的很多原因是许多成语被提升到库中，而且您看到的那些示例通常是仔细考虑以使它们简洁:)

例如，这是实现数字到字符串算法的另一种方法：

```
asInt_fold ('-':n) = negate (asInt_fold n)
asInt_fold "" = error "Need some actual digits!"
asInt_fold str = foldl' step 0 str
    where
        step _ x
            | x < '0' || x > '9'
            = error "Bad character somewhere!"
        step sum dig =
            case sum * 10 + digitToInt dig of
                n | n < 0 -> error "Overflow!"
                n -> n 
```

需要注意的几点：

1.  我们在溢出发生时检测溢出，而不是通过决定我们允许的数字的任意限制。这显着简化了溢出检测逻辑 - 并使其适用于从 Int8 到 Integer 的任何整数类型[只要溢出导致回绕、不发生或导致加法运算符本身的断言]
2.  通过使用不同的折叠，我们不需要两个单独的状态。
3.  不要重复我们自己，即使没有竭尽全力把事情说出来——它自然不会重新陈述我们想说的话。

现在，仅仅改写算法并消除重复并不总是可能的，但退后一步并重新考虑你一直在思考这个问题的方式总是有用的:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-07T21:43:42.503

正如 所指出的`bdonlan`，您的算法可能更简洁——语言本身检测溢出特别有用。至于你的代码本身和风格，我认为主要的权衡是**每个新名称都会给读者带来小的认知负担**。何时命名中间结果成为判断调用。

我个人不会选择命名`placeMultiplier`，因为我认为 的意图`place ^ 10`要清楚得多。我会`maxInt`在 Prelude 中寻找，因为如果在 64 位硬件上运行，您将面临严重错误的风险。否则，我发现您的代码中唯一令人反感的是多余的括号。所以你所拥有的是一种可以接受的风格。

（我的凭据：此时我已经编写了大约 10,000 到 20,000 行 Haskell 代码，并且我已经阅读了大约两到三倍。我在 ML 语言家族方面也有十倍的经验，这需要程序员做出类似的决定。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T05:02:26.647

我认为你这样做的方式是有道理的。

如果避免重复计算很重要，您当然应该始终将重复计算分解为单独定义的值，但在这种情况下，这看起来没有必要。尽管如此，分解出来的值具有易于理解的名称，因此它们使您的代码更易于遵循。我不认为您的代码因此而更长的事实是一件坏事。

顺便说一句，您可以使用 (maxBound :: Int) 代替硬编码最大 Int，这可以避免您犯错的风险，或者使用不同的最大 Int 破坏您的代码的其他实现的风险。

# visual-studio - MS nmake 相当于 $(MAKECMDGOALS)

> ID：828065
> 
> 赞同：5
> 
> 时间：2009-05-06T04:48:25.230
> 
> 标签：visual-studio, makefile, nmake

我使用的是（有些过时的）Microsoft 版本的 nmake，它通常与 Visual Studio 6.0 一起打包。（如果有新的 nmake 的相关答案 - 请告诉我，我可能会考虑升级）。

我希望更改现有的 makefile，以便它不会包含依赖列表，如果它与`nmake dpndfull`目标一起运行，它应该构建依赖列表。

使用 GNU make 我会测试 if `dpndfull`is in `MAKECMDGOALS`，如果是，我不会包含（可能不存在的）依赖项列表。

任何想法如何使用nmake找到当前的make目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-01T15:48:18.407

这个问题已经存在了五年，没有人接触过。所以它认为一个答案是合适的。

答案很简单。**没有**。`MAKECMDGOALS`Microsoft NMAKE中没有明显的等价物。在 makefile 的执行过程中，无法发现调用它的命令行上提供了什么。有宏`$(MAKEFLAGS)`，但只显示标志而不是目标。

实现所要求的唯一方法是为目标规则制定目标规则`dpndfull`，然后在该位置使用构建依赖关系的方法。关于如何为 NMAKE 构建这些的讨论可以在[makedepend equivalent for use with nmake?](https://stackoverflow.com/questions/946105/makedepend-equivalent-for-use-with-nmake) .

# c++ - 可以基于继承专门化模板的模式吗？

> ID：828067
> 
> 赞同：3
> 
> 时间：2009-05-06T04:49:28.847
> 
> 标签：c++, templates

因此，我经常遇到的一个问题模式是如何提供基于模板参数派生的类型的模板特化。例如，假设我有：

```
template<typename T>
struct implementPersist;

template<typename T>
void persist( T& object )
{
   implementPersist::doPersist( object );
} 
```

我希望persist 的用户能够为在上述之后声明的类型提供implementPersist::persist 的实现。原则上这很简单，但在实践中很麻烦，但用户需要为每种类型提供一个 implementPersist。

为了更清楚，假设我有：

```
struct Persistent { virtual void myPersist() = 0; };
struct MyClass : public persistent { virtual void MyPersist() { ...implementation...} };

// Persists subclasses of Persistent using myPersist
template<>
struct implementPersist<Persistent>{ void doPersist(Persistent& p) { p->myPersist(); } };

struct X{};

template<>
struct implementPersist<X>{ void doPersist(X& p) { ...implementation...} };

// Persists subclasses of Persistent using boostPersist
struct MyBoostPersistedObject { virtual void boostPersist() = 0 };
struct Z : public MyBoostPersistedObject { virtual void boostPersist() = 0 };

template<>
struct implementPersist<myBoostPersistedObject>{ void boostPersist() { ...implementation... } }; 
```

我的意图是为*Persist*的所有子类提供一个模板实现，为 myBoostPersistedObject 的所有子类提供另一个模板实现，为不在有趣的类结构中的杂类（例如各种 POD 类型）提供另一个模板实现。然而在实践中，

```
implementPersist<Persistent>::doPersist 
```

仅在调用 ::persist(T&) 时才会调用，其中 T*恰好是*一个*持久*对象。它回退到 T=myClass 的（缺失的）通用情况。一般来说，我希望能够以基于继承的通用方式专门化模板。这有点令人沮丧，因为显然编译器知道如何做到这一点，并在决定基于参数调用函数时做到这一点，例如

无效持久（持久&）；无效坚持（X&）；无效持久（myBoostPersistedObject&）；

但据我所知，模板无法进行类似的匹配。

一种解决方法是执行以下操作：

```
class persist;

template<typename T, bool hasMyPersistMethod=isDerivedFrom(T,persist)::value >
struct implementPersist;

template<typename T, bool true >
struct implementPersist<T,true>
{
   template<> struct implementPersist<X>{ void doPersist(T& p) { p->myPersist(); } }
}; 
```

（有关 isDerivedFrom，请参见[此处](https://stackoverflow.com/questions/281725/template-specialization-based-on-inherit-class)）。

但是，这要求implementPersist 的初始声明知道提供实现的类的类型。我想要更通用的东西。

我经常发现这种模式的用途，以避免为我的系统中的每个类添加明确的专业化。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T05:49:13.913

是的，您可以使用 enable_if 执行此操作。

```
#include <iostream>
#include <boost/type_traits.hpp>
using namespace std;

template <bool Enable, typename T = void>
struct enable_if
{
    typedef T type;
};

template <typename T>
struct enable_if<false, T>
{
};

template <typename T, typename Enable = void>
struct persist_t {};

struct A
{
    virtual void foo() const = 0;
};

template <typename T>
struct persist_t<T, typename enable_if<boost::is_base_of<A, T>::value>::type>
{
    static void persist(T const& x)
    {
        x.foo();
    }
};

struct B : A
{
    virtual void foo() const { cout << "B::foo\n"; }
};

template <typename T>
void persist(T & x)
{
    persist_t<T>::persist(x);
}

int main()
{
    B b;
    persist(b);
} 
```

Boost 有一个更好的[enable_if](http://www.boost.org/doc/libs/1_39_0/libs/utility/enable_if.html)实现，为了完整起见，我只是在这里提供了它。Boost 还有一个使用它的示例，与我上面的示例非常相似。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T05:37:00.853

尝试使用基类型的引用来引用派生类型：

```
MyClass x(...);
Persistent * p = &x;
implementPersist<Persistent> ip;
ip.doPersist(*p); 
```

# sql - 如何优化此 SQL 查询？

> ID：828069
> 
> 赞同：0
> 
> 时间：2009-05-06T04:50:42.087
> 
> 标签：sql, sql-server-2005, tsql

现在我有这个有效但总是超时的 SQL 查询：

```
SELECT 
(
SELECT (MAX(WP_ODOMETER) - MIN(WP_ODOMETER)) / DATEDIFF(DAY, MIN(WP_DATETIME), MAX(WP_DATETIME))
FROM WAYPOINTS
WHERE WP_DATETIME BETWEEN DATEADD(DAY,-14,GETDATE()) AND GETDATE()
AND WP_VTDID = 'L088'
)
AS MAXD, 
(
SELECT MAX(WP_ODOMETER) 
FROM WAYPOINTS
WHERE WP_DATETIME BETWEEN DATEADD(DAY,-14,GETDATE()) AND GETDATE()
AND WP_VTDID = 'L088'
)
AS MD 
```

我想根据上面的 SQL 查询创建一个视图。像这样的东西：

```
SELECT L_VTDID
(
SELECT (MAX(WP_ODOMETER) - MIN(WP_ODOMETER)) / DATEDIFF(DAY, MIN(WP_DATETIME), MAX(WP_DATETIME))
FROM WAYPOINTS
WHERE WP_DATETIME BETWEEN DATEADD(DAY,-14,GETDATE()) AND GETDATE()
AND WP_VTDID = LOCOMOTIVES.L_VTDID
)
AS MAXD, 
(
SELECT MAX(WP_ODOMETER) 
FROM WAYPOINTS
WHERE WP_DATETIME BETWEEN DATEADD(DAY,-14,GETDATE()) AND GETDATE()
AND WP_VTDID = LOCOMOTIVES.L_VTDID
)
AS MD
FROM LOCOMOTIVES 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T06:19:36.930

信不信由你，客户端语言实际上非常有能力做减法和除法等。所以，如果由我决定，我会简化查询（特别是因为这个版本会带来麻烦）：

```
SELECT MAX(WP_ODOMETER) AS MAX_ODO,
       MIN(WP_ODOMETER) AS MIN_ODO, 
       MIN(WP_DATETIME) AS MIN_DATE,
       MAX(WP_DATETIME) AS MAX_DARE
  FROM WAYPOINTS
 WHERE WP_DATETIME BETWEEN DATEADD(DAY,-14,GETDATE()) AND GETDATE()
   AND WP_VTDID = 'L088' 
```

如果在客户端处理日期计算存在重大问题，那么我承认您可能需要在服务器上生成 MAX_DATE 和 MIN_DATE 之间的差异，但获得允许您的宿主语言可能会更好做日期计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T05:00:29.350

由于它们具有相同的 where 子句，您可以将它们组合起来：

```
SELECT 
MAX(WP_ODOMETER),
(MAX(WP_ODOMETER) - MIN(WP_ODOMETER)) / 
DATEDIFF(DAY, MIN(WP_DATETIME), MAX(WP_DATETIME))
FROM WAYPOINTS
WHERE WP_DATETIME BETWEEN DATEADD(DAY,-14,GETDATE()) AND GETDATE()
AND WP_VTDID = 'L088' 
```

WP_VTDID 和 WP_DATETIME 上的索引可以加快速度。您还可以在索引中包含 WP_ODOMETER，以将书签查找从索引保存到表本身。

如果由于其他人锁定表而发生超时，请尝试将 from 语句更改为：

```
FROM WAYPOINTS (NOLOCK) 
```

如果查询使用 NOLOCK 运行良好，则另一个进程正在使用该表并阻止您的查询锁定行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T04:55:46.287

WAYPOINTS 是否在 WP_DATETIME 和 WP_VTDID 上编制索引？

# c# - 在 C# 中跟踪注册表操作

> ID：828070
> 
> 赞同：1
> 
> 时间：2009-05-06T04:50:52.227
> 
> 标签：c#, registry

我有个问题。我需要跟踪各种不同程序对注册表的所有读/写操作。

我需要从 C# 程序中执行此跟踪。

我可以这样做，还是不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T04:58:01.260

答案是你可以.... :)

Sysinternals 开发了一个名为[Regmon](http://technet.microsoft.com/en-au/sysinternals/bb896652.aspx)的实用程序来执行此操作。那么就没有理由成为这个“不可能”

但肯定需要一些时间来了解这样做的过程..

更新：我找到了一种方法。

[MSDN 线程](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/0b8fd7c7-8abb-4423-a2b5-8f1c8f2ed16e/)

[代码项目文章](http://www.codeproject.com/KB/system/registrymonitor.aspx)

# .net - 通过 WCF 使用 Reporting Services 的 Excel

> ID：828071
> 
> 赞同：0
> 
> 时间：2009-05-06T04:50:56.500
> 
> 标签：.net, wcf, excel, reporting-services

使用 Excel 作为客户端通过 WCF 报告服务的最佳方式是什么？

我想按照 Excel 调用 WCF 服务的方式做一些事情，该服务将报告在报告服务器上的 URL 发送回，然后显示它。

我该怎么办？我需要什么 excel 插件（如果有），如何让 Excel 了解我的 WCF 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-05-27T18:21:00.570

[这是一个教程](http://damianblog.com/2009/07/05/excel-wcf/)，可能是其他人将来可能会寻找的。

# python - 我如何限制 SCons 命令构建器仅在其依赖项发生更改时才运行？

> ID：828075
> 
> 赞同：4
> 
> 时间：2009-05-06T04:53:18.680
> 
> 标签：python, scons

我在 scons 中使用命令生成器来指定需要调用特定脚本来生成特定文件。

我只想运行脚本，如果它自先前生成文件以来已被修改。命令生成器的默认行为似乎总是运行脚本。我怎样才能改变这个？

这是我目前的 SConstruct：

```
speed = Command('speed_analysis.tex','','python code/speed.py')
report = PDF(target = 'report.pdf', source = 'report.tex')
Depends(report, speed) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2010-03-25T03:43:09.080

首先，它似乎`code/speed.py`无法控制输出文件名......硬编码的输出文件名通常被认为是 scons 中的不良做法（请参阅 yacc 工具）。像这样读起来会更好：

```
speed = Command('speed_analysis.tex', [], 'python code/speed.py -o $TARGET') 
```

现在，PDF 目标生成一个`report.pdf`from `report.tex`。我猜从`report.tex`to有一个隐含的依赖关系`speed_analysis.tex`（通过 Tex include 或类似的东西）。

这：

```
Depends(report, speed) 
```

如果缺少该依赖关系，则表达该依赖关系是正确的。虽然我很惊讶 PDF 构建器的扫描仪没有看到隐式依赖...

您应该使用以下方法验证 dep 树：

```
scons --tree=all 
```

它应该看起来像这样：

```
+ report.pdf
  + report.tex
  + speed_analysis.tex
    + code/speed.py
    + /usr/bin/python
  + /usr/bin/pdflatex 
```

现在，要回答您关于脚本 ( `speed.py`) 始终运行的问题，这是因为它没有输入。scons 没有什么可以检查的。该脚本文件必须读取*某些*内容作为输入，如果只是 py 文件本身的话。您需要告诉 scons 所有直接和隐式依赖关系，以使其短路后续运行：

```
Command('speed_analysis.tex', 'code/speed.py', 'python $SOURCE -o $TARGET') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T15:07:13.650

也许您的示例不完整，但您不应该这样做：

```
env = Environment()
env.Command(.... 
```

我认为您需要将依赖项指定为 Command 的第二个参数：

```
Command('speed_analysis.tex','code/speed.py','python code/speed.py') 
```

# java - 在 servlet 中使用 URI userinfo 组件 http://userinfo@hostname:port/path 进行身份验证

> ID：828076
> 
> 赞同：2
> 
> 时间：2009-05-06T04:53:50.830
> 
> 标签：java, uri

我需要根据 URI 子集来识别用户。它具有以下模式`http://userinfo@hostname:port/path`。

[java.net.URI](https://docs.oracle.com/javase/1.5.0/docs/api/java/net/URI.html)实现表示 URI 。但是，在 servlet 中，我无法检索到包含“userinfo”URI 组件的 URL/URI。我认为 HttpServletRequest.getRequestURL() 方法会返回一个完整的 URL，但在某个阶段“userinfo”组件被抑制或忽略。

我意识到，当使用 curl 而不是 Firefox 请求 servlet 时，它会在标头中添加一个 http 基本授权。那么，它可能与 HTTP 客户端实现有关吗？调用者可以抑制“用户信息”组件吗？

以下代码只是遍历标头并尝试读取用户信息组件。

```
@SuppressWarnings("unchecked")
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // 
    try {

        PrintWriter out = response.getWriter();

        String header;
        for (Enumeration e = request.getHeaderNames(); e.hasMoreElements();) {
             header = e.nextElement().toString();
             out.println(header + ": " + request.getHeader(header));
        }

        URI uri = new URI(request.getRequestURL().toString());

        out.println("request uri: " + request.getRequestURI());
        out.println("request url: " + request.getRequestURL());
        out.println("userinfo: " + uri.getUserInfo());
    } catch (URISyntaxException e) {
        e.printStackTrace();
    }

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T04:59:32.813

用户名和密码作为 HTTP 身份验证的一部分传递，而不是 URL 的一部分。特别是，浏览器永远不会发送它，除非它通过 401 未授权响应被要求发送。

您可以在此处查看如何在 servlet 中实现 HTTP 身份验证的一些示例：http: [//docstore.mik.ua/orelly/java-ent/servlet/ch08_01.htm](http://docstore.mik.ua/orelly/java-ent/servlet/ch08_01.htm)

# wpf - WinForms 或 WPF 应用程序中的 HTML 编辑

> ID：828086
> 
> 赞同：4
> 
> 时间：2009-05-06T05:01:03.637
> 
> 标签：wpf, windows, winforms

我正在寻找一种在 Windows 应用程序（WinForms 或 WPF）中编辑一段 HTML（如电子邮件文本）的方法。因此，这应该与我在 stackoverflow 网站上可用的小编辑器不同（好吧，除了更多所见即所得，我猜），除了我想在 WPF/WinForms 中做同样的事情。

不管怎样：你明白了：在 Windows 应用程序中进行 HTML 编辑，就像以前可以使用旧的 DHTML 编辑控件一样。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-07-03T00:00:11.053

你可以试试[ModelText HTML 控件](http://www.modeltext.com/html/)（披露：我写的）。

这*是*您所要求的，并且据我所知是唯一的同类：即在 Winforms 中编辑 HTML，而不依赖于浏览器和互操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-12T06:54:04.960

对于 WPF，您可以使用[Smith HTML Editor](http://smithhtmleditor.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T02:10:33.213

我在我的 WinForms 应用程序中使用了这个基于 IE Web 浏览器控件的 HTML 编辑器。它运行良好，尽管有一个 10MB 的大型 COM 互操作依赖文件。

[http://www.codeproject.com/KB/edit/editor_in_windows_forms.aspx](http://www.codeproject.com/KB/edit/editor_in_windows_forms.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T05:39:37.197

WinForms 有一个富文本控件，您可以在一定程度上使用，但任何 RTF 到 HTML 都将是第三方的（[这里只是一个示例](http://blogs.msdn.com/jmstall/archive/2006/10/20/rtf_5F00_html.aspx)）。我无法回答 WPF，但似乎 FlowDocument 和 RichTextBox 将是那里的想法。我认为您会遇到类似的问题，将 RTF 转换为 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-05T13:25:38.437

我发现这个[编辑器](http://www.itwriting.com/htmleditor/)不需要 Microsoft.mshtml。然而，它需要一些额外的工作来获得一个漂亮的格式化按钮栏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T12:01:57.917

看看 codeplex ( [http://winformhtmltextbox.codeplex.com/](http://winformhtmltextbox.codeplex.com/) ) 上的 HTMLTextbox 库。我知道，它也使用浏览器控件，但效果很好。我在自己的应用程序中使用它（这里是一个例子： http: [//www.code4ward.net/main/Flash/Gallery/large/5C9816C8-7C8F-4A47-8607.png](http://www.code4ward.net/main/Flash/Gallery/large/5C9816C8-7C8F-4A47-8607.png)）

# .net - 序列化类时如何删除默认的xmlns条目

> ID：828087
> 
> 赞同：0
> 
> 时间：2009-05-06T05:01:06.710
> 
> 标签：.net, xml, serialization, xml-serialization

我已经实例化了一个可序列化的类，并将其序列化到一个文件中，但它总是将以下属性放在我的根元素中：

```
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
```

我怎么能阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T05:13:25.340

这已经在 Stack Overflow 上被问过了

[Xml 序列化后删除空的 xmlns=""](https://stackoverflow.com/questions/616328/remove-empty-xmlns-after-xml-serialization)

# asp.net - 是否可以在开发机器上模拟子域？

> ID：828089
> 
> 赞同：2
> 
> 时间：2009-05-06T05:02:23.493
> 
> 标签：asp.net, iis-7, subdomain, localhost

我正在尝试在我的网站上设置一个子域，但我很难让它工作。特别是因为我可以测试它的唯一方法是将我的开发机器所需的所有文件发送到托管服务器（有时会破坏网站）。我在 IIS7 服务器上使用 asp.net

有没有一种简单的方法可以在开发机器上进行设置？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-06T05:09:07.330

您可以做的一件事是编辑“<windows 目录>\system32\drivers\etc\hosts”文件，并将域名指向 127.0.0.1。

通过在文件底部添加一行来执行此操作：

```
127.0.0.1    subdomain.testdomain.com 
```

问题是关于 ASP.NET 和 IIS，所以我假设是 Windows，但以防万一有人读到这个想知道 Linux 的等价物，你需要编辑文件“/etc/hosts”，并添加一行相同的格式。

**非常重要的注意事项：**如果您像这样将真实域名重定向到您的本地机器，请不要忘记您已经这样做了，否则当您无法弄清楚为什么您上传到现场的更改时，它会让您发疯网站没有做任何事情。不是我从经验或任何事情中知道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T05:08:57.580

你说的模拟是什么意思？您可以轻松地在主机文件中添加子域

\system32\drivers\etc\hosts

只需确保您有这个新域的 dns 条目。因此，请联系负责创建它们的人。

希望这可以帮助。

# java - Python-style integer division & modulus in C

> ID：828092
> 
> 赞同：28
> 
> 时间：2009-05-06T05:02:42.167
> 
> 标签：java, c++, c, modulo, division

In Python and Ruby, signed integer division truncates towards negative infinity, and signed integer modulus has the same sign the second operand:

```
>>> (-41) / 3
-14
>>> (-41) % 3
1 
```

However, in C and Java, signed integer division truncates towards 0, and signed integer modulus has the same sign as the first operand:

```
printf("%d\n", (-41) / 3); /* prints "-13" */
printf("%d\n", (-41) % 3); /* prints "-2" */ 
```

What is the simplest and most efficient way in C to perform the same kind of division and modulus as in Python and Ruby?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T06:07:52.400

The direction for rounding with signed integer division is not specified in older C standards. However, in C99 it is specified to round towards zero.

Here's portable code which works with all versions of the C standards and CPU architectures:

```
int py_div(int a, int b)
{
  if (a < 0)
    if (b < 0)
      return -a / -b;
    else
      return -(-a / b) - (-a % b != 0 ? 1 : 0);
  else if (b < 0)
      return -(a / -b) - (a % -b != 0 ? 1 : 0);
    else
      return a / b;
}

int py_mod(int a, int b)
{
  if (a < 0)
    if (b < 0)
      return -(-a % -b);
    else
      return -a % b - (-a % -b != 0 ? 1 : 0);
  else if (b < 0)
      return -(a % -b) + (-a % -b != 0 ? 1 : 0);
    else
      return a % b;
} 
```

I did some superficial tests and it appears to give the same results as Python. This code may not be maximally efficient, but a good C compiler can probably optimize it adequately, especially if you put the code in a header as static functions.

You may also want to take a look at this closely related question: [Integer division rounding with negatives in C++](https://stackoverflow.com/questions/319880/integer-division-rounding-with-negatives-in-c).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-06T12:41:33.657

For modulo, I find the following simplest. It doesn't matter what the implementation's sign convention is, we just coerce the result to the sign we want:

```
r = n % a;
if (r < 0) r += a; 
```

Obviously that's for positive a. For negative a you need:

```
r = n % a;
if (r > 0) r += a; 
```

Which (perhaps a little confusingly) combines to give the following (in C++. In C do the same thing with int, and then tediously write a duplicate for long long):

```
template<typename T> T sign(T t) { return t > T(0) ? T(1) : T(-1); }

template<typename T> T py_mod(T n, T a) {
    T r = n % a;
    if (r * sign(a) < T(0)) r += a;
    return r;
} 
```

We can use a cheapskate two-valued "sign" function because we already know a!=0, or the % would be undefined.

Applying the same principle to division (look at the output rather than the input):

```
q = n / a;
// assuming round-toward-zero
if ((q < 0) && (q * a != n)) --q; 
```

The multiplications arguably could be more expensive than necessary, but can be micro-optimised later on a per-architecture basis if need be. For instance if you have a division op that gives you quotient and remainder, then you're sorted for division.

[Edit: there might be some edge cases where this goes wrong, for instance if the quotient or the remainder is INT_MAX or INT_MIN. But emulating python maths for large values is a whole other question anyway ;-)]

[Another edit: isn't the standard python implementation written in C? You could trawl the source for what they do]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-17T14:41:48.133

There is a solution to this question that is much shorter (in code) than the already presented ones. I will use the format of Ville Laurikari's answer for mine:

```
int py_div(int a, int b)
{
    return (a - (((a % b) + b) % b)) / b);
}

int py_mod(int a, int b)
{
    return ((a % b) + b) % b;
} 
```

Unfortunately, it seems that the above solutions are not performing well. When benchmarking this solution against the one of Ville Laurikari, it becomes apparent that this solution performs only half as fast.

The lesson is: While branching instructions make code slow, division instructions are much worse!

I thought I nevertheless post this solution if only for its elegance.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-02T01:14:21.923

Here is a simple implementation of floored division and modulus in C89:

```
#include <stdlib.h>

div_t div_floor(int x, int y)
{
    div_t r = div(x, y);
    if (r.rem && (x < 0) != (y < 0)) {
        r.quot -= 1;
        r.rem  += y;
    }
    return r;
} 
```

Here, `div` is used because it has [well-defined behavior](https://stackoverflow.com/a/11726016/440302).

If you're using C++11, here is a templated implementation of floored division and modulus:

```
#include <tuple>

template<class Integral>
std::tuple<Integral, Integral> div_floor(Integral x, Integral y)
{
    typedef std::tuple<Integral, Integral> result_type;
    const Integral quot = x / y;
    const Integral rem  = x % y;
    if (rem && (x < 0) != (y < 0))
        return result_type(quot - 1, rem + y);
    return result_type(quot, rem);
} 
```

In C99 and C++11, you can avoid using `div` since the behavior of division and modulus in C are no longer depend on the implementation.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-20T07:16:57.213

The question asked about how to emulate Python-style integer division and modulo. All of the answers given here assume the operands of this operation to be integers themselves but Python can also use floats for its modulo operation. Thus, I think the following answer solves the problem even better:

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

int pydiv(double a, double b) {
    int q = a/b;
    double r = fmod(a,b);
    if ((r != 0) && ((r < 0) != (b < 0))) {
        q -= 1;
    }
    return q;
}

int main(int argc, char* argv[])
{
    double a = atof(argv[1]);
    double b = atof(argv[2]);
    printf("%d\n", pydiv(a, b));
} 
```

And for the modulo:

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

double pymod(double a, double b) {
    double r = fmod(a, b);
    if (r!=0 && ((r<0) != (b<0))) {
        r += b;
    }
    return r;
}

int main(int argc, char* argv[])
{
    double a = atof(argv[1]);
    double b = atof(argv[2]);
    printf("%f\n", pymod(a, b));
} 
```

I tested the above two programs against how Python behaves using the following test code:

```
#!/usr/bin/python3
import subprocess
subprocess.call(["cc", "pydiv.c", "-lm", "-o", "cdiv"])
subprocess.call(["cc", "pymod.c", "-lm", "-o", "cmod"])
def frange(start, stop, step=1):
    for i in range(0, int((stop-start)/step)):
        yield start + step*i
for a in frange(-10.0, 10.0, 0.25):
    for b in frange(-10.0, 10.0, 0.25):
        if (b == 0.0):
            continue
        pydiv = a//b
        pymod = a%b
        cdiv = int(subprocess.check_output(["./cdiv", str(a), str(b)]))
        cmod = float(subprocess.check_output(["./cmod", str(a), str(b)]))
        if pydiv != cdiv:
            exit(1)
        if pymod != cmod:
            exit(1) 
```

The above will compare the behaviour of Python division and modulo with the C implementations I presented on 6320 testcases. Since the comparison succeeded, I believe that my solution correctly implements Python's behaviour of the respective operations.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-06T05:32:56.057

It delves into the ugly world of floats, but these give correct answers in Java:

```
public static int pythonDiv(int a, int b) {
    if (!((a < 0) ^ (b < 0))) {
        return a / b;
    }
    return (int)(Math.floor((double)a/(double)b));
}

public static int pythonMod(int a, int b) {
    return a - b * pythonDiv(a,b);
} 
```

I make no assertions about their efficiency.

# visual-studio-2008 - 数据集可视化器

> ID：828103
> 
> 赞同：4
> 
> 时间：2009-05-06T05:10:02.103
> 
> 标签：visual-studio-2008, visual-studio-2005

我遇到了 2005 年和 2008 年附带的数据集可视化工具的问题。我现在不记得这个错误，但我认为这是因为它是断断续续的，它依赖于数据。再说一次，可视化器应该能够显示可以放入 ds 的任何内容，或者至少不会炸毁。

有谁知道一个好的替代 ds 可视化工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-07-06T15:57:46.733

试试[右手数据集调试器可视化工具](http://blog.rthand.com/page/Righthand-Dataset-Debugger-Visualizer.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T07:10:50.860

您可能有兴趣查看[Mole](http://karlshifflett.wordpress.com/mole-for-visual-studio/)。

我没有广泛使用它，但我确实喜欢它，因为我很少使用它。它似乎是一个非常强大的可视化工具。我还听说它在微软的内部开发中获得了关注。

# php - PHP AJAX 文件上传器

> ID：828105
> 
> 赞同：3
> 
> 时间：2009-05-06T05:10:35.067
> 
> 标签：php, ajax, file-upload

有谁知道使用 AJAX 的基于**PHP的良好文件上传器？**

下面的演示看起来很有希望，但它适用于 ASP.Net

[http://mattberseth2.com/demo/Default.aspx?Name=ASP.NET+File+Upload+with+*实时*+Progress+Bar&Filter=All](http://mattberseth2.com/demo/Default.aspx?Name=ASP.NET+File+Upload+with+*Real-Time*+Progress+Bar&Filter=All)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T08:07:19.540

我更喜欢自己编写尽可能多的代码，这是一个很棒的教程，其中包含使用 jQuery 库的工作示例：http: [//valums.com/ajax-upload/](http://valums.com/ajax-upload/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-07T19:43:03.563

I've had great success with this one:

[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T05:13:20.490

您可以尝试查看[ibm 示例。](http://www.ibm.com/developerworks/opensource/library/os-php-v525/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T05:14:45.273

这是一个不错的 ajax 文件上传器：

[http://www.ajaxf1.com/product/ajax-file-upload.html](http://www.ajaxf1.com/product/ajax-file-upload.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T18:39:39.377

这是一个简单而好用的文件上传器，它可以以异步方式从一个表单上传许多文件。我们已经在我们的应用程序中使用并且工作（运行）正常。[http://webcheatsheet.com/php/jquery_file_upload.php?print=Y](http://webcheatsheet.com/php/jquery_file_upload.php?print=Y)

它还包含帮助您编辑它的文档。

# c++ - 为什么 C++ 中的 ClassName ClassName 变量定义可以正常编译和工作？

> ID：828106
> 
> 赞同：2
> 
> 时间：2009-05-06T05:10:56.593
> 
> 标签：c++, compiler-construction, definition

假设我有一个类定义：

```
class CustomClass {
    int member;
}; 
```

为什么以下变量定义可以正确编译和工作：

```
CustomClass CustomClass; // the variable is properly constructed 
```

这不应该混淆编译器并导致它指示错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-06T05:18:29.103

类名和变量名占据两个独立的命名空间。编译器能够确定第一个`CustomClass`是类型，第二个`CustomClass`是变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T05:20:37.787

所要求的疑问不一定与 C++ 的区分大小写模式有关，而是与上面定义的类同名的变量声明。我认为您的 c++ 编译器足够聪明，可以推断出它正在解析的令牌的类型..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T05:42:45.533

我认为它的编译器魔法使它工作。我同意你的观点，理想情况下这应该是一个编译器错误（至少让我感到困惑）。

如果你尝试类似

```
#include <iostream>
class Test { public: int member; };
Test Test;   // comaeu warns 'expression has no effect!'
Test.member = 10; // dosen't compile!

int main(){
  Test Test;   
  Test.member = 10; // compiles fine after global 'Test's are commented!!
  std::cout<<Test.member<<std::endl;
  return 0;
} 
```

在全局范围内使用“Test.member”不会编译，但在两个全局“Test”都被注释后，在“main()”中同样有效。

C++ 有足够的复杂性来激发程序员，编译器也有贡献吗:-)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T12:52:10.603

[这个](https://stackoverflow.com/questions/828106/why-is-classname-classname-variable-definition-in-c-compiling-and-working-prope/828125#828125)答案间接说明了可以在 C++ 中执行此操作的主要原因。它归结为与 C 的向后兼容性。在 C 中，类型具有不同的命名空间，因此可以声明类型和对象，或者具有相同名称的类型和函数。

为了与 C 兼容，C++ 添加了一些特殊规则，允许对象或函数隐藏类型的声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-23T13:51:02.283

当然，为什么不呢？现在如何再次定义类CustomClass？简单：使用关键字“class”，像这样：class；类 CustomClass CustomClassAgain;

# c - HashTable中的内存分配问题

> ID：828108
> 
> 赞同：1
> 
> 时间：2009-05-06T05:12:39.133
> 
> 标签：c, memory, memory-management

***请不要关闭这个说[重复的问题](https://stackoverflow.com/questions/827986/why-this-code-doesnt-allocate-memory-in-c-please-help)。我做了一个重要的改变，以免混淆人们，我重新提交了这个更清晰的代码。***

请帮我解决这个内存分配问题。我正在研究一个 HashTable，这就是我所拥有的（仅限部分代码）

**主程序**

```
HashTablePtr hash;
hash = createHashTable(10);
insert(hash, "hello");
insert(hash, "world"); 
```

**哈希表.c**

```
 HashTablePtr createHashTable(unsigned int capacity){
    HashTablePtr hash;
    hash = (HashTablePtr) malloc(sizeof(HashTablePtr));
    hash->size = 0;
    hash->capacity = capacity;          
    hash->list = (ListPtr *)calloc(capacity, sizeof(List)); /*NO MEMORY ALLOCATION HERE*/
    return hash; 
```

**列表.h**

```
typedef struct list List;
typedef struct list * ListPtr;

struct list {
    int size;
    NodePtr head;
    NodePtr tail;
};
...
... 
```

**哈希表.h**

```
 typedef struct hashtable * HashTablePtr;
    typedef struct hashtable HashTable;
    struct hashtable {
        unsigned int capacity;
        unsigned int size;
        ListPtr *list;
        unsigned int (*makeHash)(unsigned int, void *);
    };
...
... 
```

当我运行我的调试器（Netbeans C/C++ 调试器，我看到没有内存分配给 hash->list。在上面的例子中，我的尝试是让它成为一个包含 10 个列表的数组。

请帮我解决这个问题。

如果有帮助的话，我不是 C 方面的专家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T05:16:24.663

这条线

```
hash = (HashTablePtr) malloc(sizeof(HashTablePtr)); 
```

应该读

```
hash = (HashTablePtr) malloc(sizeof(HashTable)); 
```

我还建议您遵循上一篇文章中给您的建议，不要通过 typedef'ing 隐藏指针。只需使用`List *`

[每当你看到一个 alloc 语句时，你分配的类型是一个指针，你分配的类型应该是类型（而不是指向类型的指针）]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T05:28:40.157

您也可以使用一个很好的成语，例如：

```
hash = (HashTablePtr) malloc(sizeof(*hash)); 
```

通过不对分配中的任何类型进行硬编码，可以大大降低混淆的可能性。

请注意，此处实际上并未取消引用 'hash' - sizeof() 始终在编译时进行评估，因此编译器只需确定 *hash /would/ 的类型，并获取其大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T05:21:07.833

在这一行：

```
hash->list = (ListPtr *)calloc(capacity, sizeof(List)); 
```

该`calloc`函数将为 分配一些内存`List`，然后返回一个指向已分配内存的指针，这将是`List*`（或者，`ListPtr`由于`typedef`.）

在代码中，指针然后被强制转换为`(ListPtr*)`，这实际上是`List**`which 不是`List*`预期的类型。因此，更改`ListPtr*`to`ListPtr`并查看是否可以修复该行。

**编辑**

正如 leiz 和 Klathzazt 在评论中指出的那样，`Hashtable.list`类型是`ListPtr*`or `List**`：

```
struct hashtable {
    ...
    ListPtr *list; 
```

这就是为什么尝试分配`ListPtr`返回和强制转换的类型`calloc`会导致编译器错误的原因。与其在 中存储指向 List 指针的指针，不如`Hashtable`只保存指向列表的指针：

```
struct hashtable {
    ...
    ListPtr list; 
```

这应该消除编译器错误，因为类型`Hashtable.list`和类型转换都将是`ListPtr`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T14:25:40.350

就我个人而言，我不是使用 typedef 的超级粉丝，尤其是当您是初学者时。我认为这可能是让你感到困惑的部分原因。你最好避免这样的事情：

```
typedef struct hashtable * HashTablePtr; 
```

使用过多的 typedef 将使您的代码更难阅读，因为您也需要不断地查找它们所指的内容。

主要问题是您为哈希表/列表指针的大小分配内存，而不是为它们所尊重的结构的大小分配内存。我认为下面的代码很好地说明了这一点。您还需要检查您的分配是否有效。如果是 malloc、calloc、realloc。等失败他们返回NULL。如果发生这种情况并且您没有检查这种情况，您将收到一个段错误并且您的程序将崩溃。

还要遵循 c99 标准，并将所有变量声明放在函数的开头。

[c99标准](http://www.open-std.org/JTC1/SC22/wg14/www/docs/n1124.pdf)

[malloc 手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html)

```
struct hashtable *
createHashTable(unsigned int capacity){
    struct hashtable *hash;
    struct list *mylist;

    /* You want to allocate size of the hash structure not the size of a pointer. */
    hash = malloc(sizeof(struct hashtable)); 
    // always make sure if the allocation worked.
    if(hash == NULL){
        fprintf(stderr, "Could not allocate hashtable\n");
        return NULL;
    }

    hash->size = 0;
    hash->capacity = capacity;

    /* Unless you need the memory to be zero'd I would just use malloc here
     * mylist = calloc(capacity, sizeof(struct list)); */
    mylist = malloc(capacity * sizeof(struct list));
    if(mylist == NULL){
        fprintf(stderr, "Could not allocate list\n");
        free(hash); /* free our memory and handle the error*/
        return NULL;
    }

    mylist->head = NULL;
    mylist->size = 0;
    mylist->tail = NULL;    
    hash->list = mylist;

    return hash;
} 
```

还记得在释放哈希表之前释放你的列表：

```
free(myhash->list);
free(myhash); 
```

# windows - 以辅助功能模式运行的 Windows 操作系统？

> ID：828109
> 
> 赞同：2
> 
> 时间：2009-05-06T05:12:47.010
> 
> 标签：windows, accessibility

我们如何检测在 Windows 操作系统中是否以可访问性模式运行？我们基本上需要检查用户在启动应用程序时是否打开了任何辅助功能。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T16:15:54.437

询问用户他们想要启用哪些功能。你不应该在你的应用程序中对他们需要什么做出假设，因为你可能会错（也许他们正在使用放大镜，因为他们正在查看 Where's Waldo 谜题）。

Windows 中没有“辅助功能模式”，就像现实世界中没有“辅助功能模式”一样。提供提高可访问性可能需要的个别功能，并让用户决定最适合他们的功能。

# .net - 以编程方式将 *My Network Place* 快捷方式添加到 sharepoint Web 文件夹

> ID：828121
> 
> 赞同：0
> 
> 时间：2009-05-06T05:16:26.177
> 
> 标签：.net

我在框架中看到了一些用于创建常规快捷方式的内容，但没有在我们的 Intranet 上的 Sharepoint 站点中看到文件的“网上邻居”快捷方式。

我找到了一个 kludge，但它并不总是适用于所有文件夹名称，不确定它在哪里失败。kludge 对现有的快捷方式进行逆向工程，而不是为此目的使用函数（如果存在的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T05:37:46.763

我的网上邻居的 UNC 路径是`%userprofile%\nethood`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T12:10:19.410

[http://karlshifflett.wordpress.com/mole-for-visual-studio/http://www.microsoft.com/technet/scriptcenter/resources/qanda/may05/hey0509.mspx](http://karlshifflett.wordpress.com/mole-for-visual-studio/http://www.microsoft.com/technet/scriptcenter/resources/qanda/may05/hey0509.mspx)

# java - 有哪些替代 Java Swing GUI 的选项？

> ID：828127
> 
> 赞同：3
> 
> 时间：2009-05-06T05:20:20.520
> 
> 标签：java, swing, apache-flex, extjs, richfaces

我们有一个用 Swing 开发的桌面客户端应用程序。此应用程序使用 Servlet 与后端服务器交互。

新的要求是制作一个基于 Web 的客户端。我读过有关 JavaFX、Flex、ExtJS 等的信息。

我想知道哪种解决方案最适合替换摇摆应用程序？有没有人有这样做的经验？

* * *

**（根据评论编辑）**

该应用程序在小部件方面很重。当然，在制作基于 Web 的客户端时，我们会进行一些重新设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T05:36:14.070

您可以考虑使用 Google Web Toolkit (GWT) 来制作基于 Web 的客户端。在 GWT 中制作用户界面有点类似于在 Java Swing 中制作，但最终结果是动态 Web 客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T05:32:05.560

你知道 Swing 可以在网页中运行！还有许多其他选项，包括 PHP、ASP、Ajax 等。Swing 应用程序有多“重”，即有很多小部件吗？这是一个非常开放的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T06:25:21.923

由于您已经了解 Swing，并且您应该制作一个基于 Web 的客户端/界面，因此您应该考虑[Apache Wicket](http://wicket.apache.org/)，它在结构上与 Swing 有很多相似之处（它的一个原始开发人员与您现在的情况相似）。

如果您需要使用 Ajax 和其他此类 Web 技术不容易完成的重量级功能，我建议将 Flash/Flex 组合用于 UI，主要是因为那里有很多人知道如何使用这两者那些技术。

***快速编辑：*** [另请参阅this answer to another question](https://stackoverflow.com/questions/789075/how-to-create-java-custom-web-controls/789118#789118)，它可以帮助您更好地理解手头的实际问题。

# php - Levenshtein 距离：如何更好地处理单词交换位置？

> ID：828132
> 
> 赞同：35
> 
> 时间：2009-05-06T05:21:21.607
> 
> 标签：php, algorithm, levenshtein-distance, similarity, edit-distance

我在使用 PHP [levenshtein](http://us2.php.net/levenshtein)函数比较字符串方面取得了一些成功。

但是，对于包含交换位置的子字符串的两个字符串，算法将它们计为全新的子字符串。

例如：

```
levenshtein("The quick brown fox", "brown quick The fox"); // 10 differences 
```

被视为具有*以下共同点*：

```
levenshtein("The quick brown fox", "The quiet swine flu"); // 9 differences 
```

我更喜欢一种算法，它看到*前两个*更相似。

我怎么能想出一个比较函数来识别已经切换位置的子字符串与编辑不同？

我想到的一种可能的方法是在比较之前将字符串中的所有单词按字母顺序排列。这将单词的原始顺序完全排除在比较之外。然而，这样做的一个缺点是，仅更改单词的第一个字母会造成比更改单个字母更大的干扰。

我想要实现的是比较关于人的两个作为自由文本字符串的事实，并确定这些事实表明相同事实的可能性有多大。事实可能是某人就读的学校，例如他们的雇主或出版商的名称。两个记录可能有相同的学校拼写不同，单词的顺序不同，多余的单词等，所以如果我们要很好地猜测它们指的是同一所学校，匹配必须有点模糊。到目前为止，它在拼写错误方面效果很好（我使用的是类似于变音位的语音算法），但如果你切换学校中常见的单词顺序，效果就很差：“xxx 学院”vs “xxx学院”。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2011-02-21T22:41:19.623

### N-gram

使用[N-gram](http://en.wikipedia.org/wiki/N-gram#n-grams_for_approximate_matching)，它支持**跨整个文本的多字符换位**。

一般的想法是，您将有问题的两个字符串拆分为所有可能的 2-3 个字符子字符串（n-gram），并将两个字符串之间共享的 n-gram 的数量视为它们的相似性度量。然后可以通过将共享数除以较长字符串中的 n-gram 总数来规范化。这是微不足道的计算，但相当强大。

对于例句：

```
A. The quick brown fox
B. brown quick The fox
C. The quiet swine flu 
```

A 和 B 共享**18 个** *2 克*

A 和 C 只共享**8** *个 2 克*

总共有**20**个可能。

[Gravano 等人](http://www1.cs.columbia.edu/~pirot/publications/deb-dec2001.pdf)对此进行了更详细的讨论。[纸](http://www1.cs.columbia.edu/~pirot/publications/deb-dec2001.pdf)。

### tf-idf 和余弦相似度

一个不那么简单但基于信息论的替代方案是使用[术语词频-逆文档频率 (tf-idf)](https://en.wikipedia.org/wiki/Tf%E2%80%93idf)来衡量标记，构造句子向量，然后使用[余弦相似度](https://en.wikipedia.org/wiki/Cosine_similarity)作为相似度度量。

算法是：

1.  计算每个句子的 2 字符标记频率 (tf)。
2.  计算逆句子频率 (idf)，它是语料库中所有句子的数量（在本例中为 3）除以特定标记在所有句子中出现的次数的对数。在这种情况下， *th*在所有句子中，因此它的信息内容为零（log（3/3）=0）。 ![以色列国防军公式](https://i.stack.imgur.com/Y6qe7.png)
3.  通过将 tf 和 idf 表中的相应单元相乘来生成 tf-idf 矩阵。 ![tfidf](https://i.stack.imgur.com/yfEzMm.png)
4.  最后，计算所有句子对的余弦相似度矩阵，其中 A 和 B 是 tf-idf 表中相应标记的权重。范围从 0（不相似）到 1（相等）。
    ![余弦相似度](https://i.stack.imgur.com/QiVH6m.png)
    ![相似矩阵](https://i.stack.imgur.com/EL8iMm.png)

### Levenshtein 修改和 Metaphone

关于其他答案。[Damerau–Levenshtein修改仅支持](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)**两个相邻**字符的转置。[Metaphone](http://en.wikipedia.org/wiki/Metaphone)旨在匹配听起来相同的单词，而不是用于相似性匹配。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-06T05:24:34.173

这简单。只需在单词而不是字母上使用[Damerau-Levenshtein](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)距离。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-06T17:06:14.910

在空间上爆炸，对数组进行排序，内爆，然后进行 Levenshtein。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T09:34:45.557

你也可以试试这个。（只是一个额外的建议）

```
$one = metaphone("The quick brown fox"); // 0KKBRNFKS
$two = metaphone("brown quick The fox"); // BRNKK0FKS
$three = metaphone("The quiet swine flu"); // 0KTSWNFL

similar_text($one, $two, $percent1); // 66.666666666667
similar_text($one, $three, $percent2); // 47.058823529412
similar_text($two, $three, $percent3); // 23.529411764706 
```

这将表明第一和第二比一和三以及二和三更相似。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-05T19:44:12.203

我一直在拼写检查器中实施 levenshtein 。

您要求的是将转置计为 1 次编辑。

如果您只想计算一个单词的换位，这很容易。然而，对于 2 个或更多单词的转置，算法的添加是最坏的情况`!(max(wordorder1.length(), wordorder2.length()))`。向已经是二次的算法添加非线性子算法不是一个好主意。

这就是它的工作方式。

```
if (wordorder1[n] == wordorder2[n-1])
{
  min(workarray[x-1, y] + 1, workarray[x, y-1] + 1, workarray[x-2, y-2]);
}
  else
{
  min(workarray[x-1, y] + 1, workarray[x, y-1] + 1);
} 
```

只是为了触摸换位。如果您想要所有换位，则必须从该点开始对每个位置进行向后比较

```
1[n] == 2[n-2].... 1[n] == 2[0].... 
```

所以你明白他们为什么不把它包括在标准方法中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T17:24:49.200

接受[此答案](https://stackoverflow.com/questions/135777/a-stringtoken-parser-which-gives-google-search-style-did-you-mean-suggestions/707367#707367)并进行以下更改：

```
void match(trie t, char* w, string s, int budget){
  if (budget < 0) return;
  if (*w=='\0') print s;
  foreach (char c, subtrie t1 in t){
    /* try matching or replacing c */
    match(t1, w+1, s+c, (*w==c ? budget : budget-1));
    /* try deleting c */
    match(t1, w, s, budget-1);
  }
  /* try inserting *w */
  match(t, w+1, s + *w, budget-1);
  /* TRY SWAPPING FIRST TWO CHARACTERS */
  if (w[1]){
    swap(w[0], w[1]);
    match(t, w, s, budget-1);
    swap(w[0], w[1]);
  }
} 
```

这是在 trie 中进行字典搜索，但对于匹配单个单词，这是相同的想法。你在做分支和绑定，在任何时候，你都可以做任何你喜欢的改变，只要你给它一个成本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-06T17:41:49.627

消除两个字符串之间的重复单词，然后使用 Levenshtein。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-08-07T20:57:56.987

我相信这是使用[向量空间搜索引擎](http://en.wikipedia.org/wiki/Vector_space_model)的一个典型例子。

在这种技术中，每个文档本质上都变成了一个向量，其维度与整个语料库中的不同单词一样多；然后类似的文档会占据该向量空间中的相邻区域。该模型的一个很好的特性是查询也只是文档：要回答查询，您只需计算它们在向量空间中的位置，您的结果就是您能找到的最接近的文档。我确信那里有 PHP 的 get-and-go 解决方案。

要模糊向量空间的结果，您可以考虑使用词干提取/相似自然语言处理技术，并使用 levenshtein 为出现在您的整体词汇表中的相似词构建辅助查询。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-01-29T23:48:41.283

如果第一个字符串是 A，第二个字符串是 B：

1.  将 A 和 B 拆分为单词
2.  对于 A 中的每个单词，找到 B 中的最佳匹配单词（使用 levenshtein）
3.  从 B 中删除该单词并将其放入 B* 中与 A 中匹配单词相同的索引处。
4.  现在比较 A 和 B*

例子：

```
A: The quick brown fox
B: Quick blue fox the
B*: the Quick blue fox 
```

您可以通过多次执行来改进第 2 步，首先只找到完全匹配，然后在 A 中找到 B* 中没有同伴的单词的紧密匹配，然后是不太紧密的匹配，等等。

# winapi - 使用 Windows 挂钩禁用键

> ID：828134
> 
> 赞同：3
> 
> 时间：2009-05-06T05:21:58.050
> 
> 标签：winapi, keyboard-hook

我正在尝试使用低级键盘挂钩完全禁用键盘上的字母“a”。问题是当我从keyboardproc返回0时，键没有被禁用，但是当我返回1时它被禁用。我认为从keyboardproc返回而不调用CallNextHookEx会阻止消息。返回 0 和返回 1 有什么区别吗？

```
LRESULT CALLBACK LowLevelKeyboardProc(int code, WPARAM wParam, LPARAM lParam)
{
    KBDLLHOOKSTRUCT* details = (KBDLLHOOKSTRUCT*) lParam;

    if(code == HC_ACTION && wParam == WM_KEYDOWN)
    {
        if(details->vkCode == 0x41)
        {
            return 1;
        }
    }

    return CallNextHookEx(g_hhkKeyboard, code, wParam, lParam);     
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-07T08:51:21.033

从[`LowLevelKeyboardProc`MSDN 文档](http://msdn.microsoft.com/en-us/library/ms644985(VS.85).aspx)：

> 如果钩子过程处理了消息，它可能会返回一个**非零**值，以防止系统将消息传递给钩子链的其余部分或目标窗口过程。

*[强调我的]*

所以它没有完全有据可查，如果你真的`return 0`. 我猜这个值会导致系统调用链中的下一个钩子过程，它最终会被你的默认窗口过程处理。

我最近编写了一个简单的应用程序，要求您按住 Caps Lock 一段时间才能切换它，并且每当我实际处理我的这个键时`LowLevelKeyboardProc`，我总是返回 1，否则

```
CallNextHookEx( NULL, nCode, wParam, lParam ); 
```

*附加说明：如果你的目标是 NT/XP/2003 和更新的系统，你可以传入`NULL`第一个`CallNextHookEx`参数，因为它被忽略了。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-07T19:51:35.920

如果你 CallNextHook() 调用链中的下一个钩子。如果返回非零，则目标窗口不会收到消息（从而阻止窗口接收键盘消息）。如果您返回零，则目标窗口会收到消息。

如果按下的键是“a”，则您想要的行为是返回非零，否则返回零。

# iphone - presentModalViewController 需要很长时间并且屏幕变白

> ID：828138
> 
> 赞同：0
> 
> 时间：2009-05-06T05:23:03.960
> 
> 标签：iphone

我正在尝试添加 UiActivityStatus 并在 presentModalViewController 加载时显示“请等待图像”，这需要 16 - 20 秒...

图像出现，但随后屏幕立即变白并在那里停留 16-20 秒。我猜对 presentModalViewController 的调用会立即返回。

当调用 presentModalViewController 需要很长时间时，是否仍然显示状态。

PS：在该视图中加载大约 100 张图片需要很长时间

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T06:08:53.193

我假设您正在 viewControllers loadView 中加载图像。`[myViewController view]`您可以通过向其发送将导致加载发生的视图消息来预加载视图。将视图添加到子视图时会显示该视图。所以你的代码是：

1.  显示活动指示器
2.  发送查看消息
3.  推模态视图控制器
4.  隐藏活动指示器

我建议你修改你的设计。没有用户交互的 16-20 秒的停顿是不好的。为什么不让模式视图在图像进入时处于活动状态。您可以首先加载每个可见的图像，然后在它们加载时您可以在它们的位置显示一个微调器。

# python - Python 双指针

> ID：828139
> 
> 赞同：4
> 
> 时间：2009-05-06T05:23:05.270
> 
> 标签：python, ctypes

我正在尝试从指向浮点数组的指针中获取值，但它在 python 中返回为 c_void_p

C 代码

```
double v;
const void *data;  
pa_stream_peek(s, &data, &length);  
v = ((const float*) data)[length / sizeof(float) -1]; 
```

到目前为止的 Python

```
import ctypes
null_ptr = ctypes.c_void_p()
pa_stream_peek(stream, null_ptr, ctypes.c_ulong(length)) 
```

问题是 null_ptr 有一个 int 值（内存地址？）但是没有办法读取数组？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T05:31:40.710

我的 ctypes 生锈了，但我相信你想要 POINTER(c_float) 而不是 c_void_p。

所以试试这个：

```
null_ptr = POINTER(c_float)()
pa_stream_peek(stream, null_ptr, ctypes.c_ulong(length))
null_ptr[0]
null_ptr[5] # etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T16:29:23.390

要以模仿您的 C 代码的方式使用 ctypes，我建议（而且我已经过时，并且未经测试）：

```
vdata = ctypes.c_void_p()
length = ctypes.c_ulong(0)
pa_stream_peek(stream, ctypes.byref(vdata), ctypes.byref(length))
fdata = ctypes.cast(vdata, POINTER(float)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T07:55:41.253

您可能还希望使用 byref 传递 null_ptr，例如

```
pa_stream_peek(stream, ctypes.byref(null_ptr), ctypes.c_ulong(length)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T16:43:52.810

当您在不使用 ctypes.pointer 或 ctypes.byref 的情况下传递指针参数时，它们的内容只会被设置为内存地址的整数值（即指针位）。这些参数应该与`byref`（或`pointer`，但`byref`开销较小）一起传递：

```
data = ctypes.pointer(ctypes.c_float())
nbytes = ctypes.c_sizeof()
pa_stream_peek(s, byref(data), byref(nbytes))
nfloats = nbytes.value / ctypes.sizeof(c_float)
v = data[nfloats - 1] 
```

# compiler-construction - 什么是 A 范式？

> ID：828144
> 
> 赞同：15
> 
> 时间：2009-05-06T05:27:44.290
> 
> 标签：compiler-construction, compiler-development

我正在阅读各种中间形式，但除了类似 wiki 的条目之外，我无法获得有关 A-normal 形式的信息。这里有人知道这件事或有很好的资源吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T05:42:27.440

请参阅[管理范式](http://en.wikipedia.org/wiki/Administrative_normal_form)。

> 在计算机科学中，管理范式（缩写为 ANF）是程序的规范形式，由 Flanagan 等人在 1993 年引入，用作功能编译器中的中间表示，以使后续对机器代码的转换更加直接。

> 在 ANF 中，函数的所有参数都必须是微不足道的。也就是说，每个参数的评估必须立即停止。

> ## 语法
> 
> 以下 BNF 文法描述了为支持 ANF 的约束而修改的纯 λ 演算：
> 
> ```
> EXP ::= VAL 
>       | let VAR = VAL in EXP
>       | let VAR = VAL VAL in EXP
> 
> VAL ::= VAR
>       | λ VAR . EXP 
> ```
> 
> 编译器或研究中使用的 ANF 变体通常还允许使用常量、记录、元组、多参数函数、原始操作和条件表达式。

弗拉纳根，科马克；萨布里，阿米尔；杜巴，布鲁斯 F.；费莱森，马蒂亚斯。[“The Essence of Compiling with Continuations”](http://citeseer.ist.psu.edu/flanagan-essence.html)可能是权威来源。

还发现了一些关于[cs252r 的注释：高级函数式编程](http://www.eecs.harvard.edu/%7Egovereau/cs252r/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-21T23:50:38.630

从本质上讲，管理范式中的 lambda 项可以被解读为评估自身的过程，因为应用程序的所有参数都必须已经处于“评估”状态，因此必须明确评估参数的顺序。

[在这篇独立有趣的论文](https://www.microsoft.com/en-us/research/wp-content/uploads/2016/08/tacc-hs09.pdf)中有一个有趣的概述，关于用于编译惰性函数语言的严格中间语言。第 3.1 节等，尤其是图 7，它为行政规范形式的严格语言提供了小步操作语义。

# javascript - 如何在 jQuery 中修复不稳定的动画

> ID：828145
> 
> 赞同：0
> 
> 时间：2009-05-06T05:28:07.160
> 
> 标签：javascript, jquery, animation

我在 jQuery 中构建了一个简单的菜单

[http://vanquish.websitewelcome.com/~toberua/](http://vanquish.websitewelcome.com/~toberua/)

这是菜单示例

```
<ul>
  <li id="your-residences">
    <strong>Your Residences</strong>

    <ul>
      <li class="menu-1"><a href=
      "/~toberua/your-residences/deluxe-ocean-front-bure/">Deluxe
      Ocean Front Bure</a></li>

      <li class="menu-2"><a href=
      "/~toberua/your-residences/premium-ocean-front-bure/">Premium
      Ocean Front Bure</a></li>
    </ul>
  </li>

  <li id="your-island">
    <strong>Your Island</strong>

    <ul>
      <li class="menu-1"><a href=
      "/~toberua/your-island/where-is-toberua/">Where is
      Toberua?</a></li>

      <li class="menu-2"><a href=
      "/~toberua/your-island/island-facilities/">Island
      Facilities</a></li>

      <li class="menu-3"><a href=
      "/~toberua/your-island/massage-and-spa/">Massage &amp;
      Spa</a></li>
    </ul>
  </li>
</ul> 
```

这是我的 jQuery：

```
var menu = {

  init: function() {

    $('#header > ul > li').hoverIntent(function() {
      $(this).find('ul').show().css({opacity: '0.3'}).height(0).animate({height: '88px', opacity: '1.0'}, 800);

    }, function() {

      $(this).find('ul').animate({height: '0', opacity: '0.3'}, 400, function() { $(this).hide();  }); 

    });

  }

} 
```

这会产生一些古怪的行为。例如，有时菜单会向下滑动，然后继续上下滑动。其他麻烦是菜单完美地向下滑动，然后在再次返回之前闪烁到空白背景。

有没有人指出我可能做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T05:39:07.430

我立即注意到的唯一问题是，您的代码会很高兴地将另一个动画排队，而不会清除已经运行的动画队列 - 因此，如果您稍微晃动一下鼠标，您将重复打开和关闭菜单，恶作剧风格！

幸运的是，这是一个简单的解决方法：只需在[`stop()`](http://docs.jquery.com/Effects/stop)每次调用之前[`animate()`](http://docs.jquery.com/Effects/animate)调用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T05:38:19.850

有一个您可能想要查看的 jquery 插件，它与您正在尝试的内容很接近： [这里](http://www.codenothing.com/archives/jquery/single-drop-down-menu/)：

# javascript - 如何在 HTML 输入元素中获取光标/插入符号的位置？

> ID：828147
> 
> 赞同：1
> 
> 时间：2009-05-06T05:28:17.207
> 
> 标签：javascript

应该很简单，但我似乎无法在 Google 中找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-17T22:29:31.163

您将使用元素的`selectionStart`or`selectionEnd`属性。`input`

```
setInterval(function(){
  console.log([document.getElementById("test").selectionStart, document.getElementById("test").

selectionEnd
------------

]);
}, 1000);
```

```
<input type="text" id="test"></input>
```

# c# - 光标聚焦在 WPF/C# 中的文本框上

> ID：828155
> 
> 赞同：20
> 
> 时间：2009-05-06T05:31:50.617
> 
> 标签：c#, wpf, textbox

我目前正在创建屏幕键盘。我正在使用 routedcommands 处理按钮单击。问题是当我单击键盘面板中的按钮时，焦点会转移到按钮而不是文本框上。该要求规定光标应始终出现在文本框中，以指示将插入下一个字符的位置。有没有一种方法可以让我在单击按钮时将注意力集中在文本框上。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-06T07:01:13.630

将逻辑焦点设置到输入控件

```
FocusManager.SetFocusedElement(this, textboxJack);     // set logical focus 
```

将键盘焦点设置到输入控件

```
Keyboard.Focus(textboxJill);                             // set keyboard focus 
```

了解逻辑焦点和键盘焦点的区别

[输入概述 - 专注](http://msdn.microsoft.com/en-us/library/ms754010.aspx#focus)于 MSDN

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-17T09:13:21.317

获取特定控件的引用（在这种情况下为 TextBox）。点击后，在 Button_Click 方法中粘贴：

```
Dispatcher.BeginInvoke((ThreadStart)delegate
            {
                control.Focus();
            }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-01-20T17:40:11.847

我喜欢这些为我做家庭作业的问题；“要求状态”......无价之宝。对于通过 Google 找到此内容的人，在 WPF 文本框中以编程方式移动光标的技巧是使用 SelectioNStart 属性。

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    textBox.Focus();
    textBox.SelectionStart = textName.Text.Length;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T06:48:26.133

```
Textbox.Focus(); 
```

这将专注于文本框

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-12-22T16:35:24.363

我解决这个问题的方法是设置`focusable=false`键盘上的所有按钮/控件。这样你就不会失去对当前控制的关注。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-01-17T05:48:59.893

您的问题可以通过为您的“键盘”使用单独的焦点范围来解决。只需将以下属性应用于包含所有按钮的控件，然后它们将位于单独的焦点范围内，并且在单击时不会将焦点设置给它们

```
FocusManager.IsFocusScope="True" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-06T23:37:54.117

我不得不用它来获得我想要的结果

```
FocusManager.SetFocusedElement(this, UserNameautoCompleteBox);

Key key = Key.Enter;                    // Key to send
var target = Keyboard.FocusedElement;    // Target element
RoutedEvent routedEvent = Keyboard.KeyDownEvent; // Event to send

target.RaiseEvent(
    new KeyEventArgs(
        Keyboard.PrimaryDevice,
        PresentationSource.FromVisual(UserNameautoCompleteBox),
        0,
        key) { RoutedEvent = routedEvent }
); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-01T10:37:14.530

我想做同样的事情，但似乎没有什么对我有用。当我使用 MVVM 时，我真的需要一个纯粹在 XAML 中工作的答案。

我终于找到了这个例子： [http ://spin.atomicobject.com/2013/03/06/xaml-wpf-textbox-focus/](http://spin.atomicobject.com/2013/03/06/xaml-wpf-textbox-focus/)

并将其修改为：

在“资源”部分：

```
 <Style x:Key="FocusTextBox" TargetType="Grid">
        <Style.Triggers>
            <DataTrigger Binding="{Binding ElementName=textBoxName, Path=IsVisible}" Value="True">
                <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=textBoxName}"/>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

在我的网格定义中：

```
<Grid Style="{StaticResource FocusTextBox}" /> 
```

# php - 与dojo集成的PHP框架

> ID：828158
> 
> 赞同：0
> 
> 时间：2009-05-06T05:32:17.697
> 
> 标签：php, dojo

我正在寻找与dojo 集成的最简单的php 框架。我不需要 MVC 或重新学习一个巨大的框架。有没有人有建议或例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T05:36:48.357

“最简单的 PHP 框架”根本没有告诉我们您在寻找什么。

然而，为了猜测，我仍然认为 Zend 在大多数情况下是最好的......它包括 MVC 功能，但*不需要*使用 MVC 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-14T09:00:58.463

也许[http://www.comodojo.org](http://www.comodojo.org)可以满足您的需求......它仍处于 alpha 阶段，但它在大多数情况下都有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T05:33:46.633

zend 框架[http://www.zendframework.com/](http://www.zendframework.com/)

# c# - 使用位图时asp.net参数无效

> ID：828161
> 
> 赞同：0
> 
> 时间：2009-05-06T05:33:36.523
> 
> 标签：c#, asp.net

```
private void LoadButtonImage()
{
    if(buttonPicture != null)
        buttonPicture.Dispose();

    string templateFileName = "PicTemplate/RoundedRectangle.png";
    buttonPicture = new Bitmap(templateFileName);
} 
```

这是我的编码.....参数在运行时无效......我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T15:58:12.560

您很可能指向错误的位置。尝试切换到

```
new Bitmap(Server.MapPath(templateFileName)). 
```

# c# - 我对这段代码的理解正确吗？

> ID：828165
> 
> 赞同：1
> 
> 时间：2009-05-06T05:34:28.877
> 
> 标签：c#

我正在审查我们的一位承包商的一些代码：

```
if (userLists != null)
{
    Int32 numberOfItems = userLists.Count;
    if ((numberOfItems & 1) == 1)
    {
        var emptyList = new tblList();
        userLists.Add(emptyList);
    }
} 
```

现在，我试图理解这一点，所以，有人可以与我确认我是否正确吗？

1.  我们有用户列表的实例吗？
2.  是的。获取 userLists 对象中的项目数。
3.  如果（项目数等于 1（是/真）且 1 等于 1（是/真））且结果等于 1（是/真），则将一个空列表对象添加到列表中。
4.  其他：什么都没有。

如果是这样（WTFFFFFFFFFFFFFFFFFFFF !!!!!!!!!!），那可以重构为

```
if (numberOfItems == 1)
{
..
} 
```

但即使这样也很糟糕，因为我不想要一个包含“空”项目的列表。

那么我是否正确阅读了那段代码？

`Int32`哦，对vs `Int`:(的使用再叹一口气（但我离题了）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T05:38:28.913

将数字与 1 进行按位与运算检查该数字是奇数还是偶数（如果奇数则返回 1）。这段代码所做的是确保列表有偶数个项目，如果有奇数个项目，则添加另一个项目。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T05:45:18.320

这`&`就是所谓的按位运算符。而操作员`&&`测试两个布尔值：

```
TRUE && FALSE => FALSE
TRUE && TRUE => TRUE 
```

运算符`&`可以处理整数值：

```
 00101101 (45)
& 01011011 (91)
---------------
= 00001001 (9) 
```

**每个位**都对其进行了布尔运算（和）。因此，对于您的代码示例，它询问“最后一位是 1 吗？” - 也就是说“奇怪吗？” 例如，如果数字是 23：

```
 00010111 (23)
& 00000001 (1)
---------------
= 00000001 (1) 
```

所以它添加到列表中，因为 1 == 1。但是如果数字是 22：

```
 00010110 (22)
& 00000001 (1)
---------------
= 00000000 (0) 
```

所以它不会添加到列表中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T05:37:41.973

检查奇数，也可以`i % 2 != 0`

我建议查看[BitMasks](http://www.texastoo.com/post/Bitmasking-in-c-example.aspx)，它们可能非常方便，但不在您问题的代码中，如果您需要偶数/奇数，我更喜欢模块化。

```
 static void Main(string[] args)
    {
        for (int i = 0; i < 100; i++ )
            Console.WriteLine( i & 1);
        Console.ReadLine();
    }

1
0
1
0
1
0 
```

最重要的是，这里有一些扩展方法

```
 class Program
    {
        static void Main(string[] args)
        {
            List<int> ints = new List<int>();

            for (int i = 0; i < 100; i++)
            {
                Console.WriteLine("Mod: {0}", i % 2 );
                Console.WriteLine("BitWise: {0}", i & 1 );

                ints.Add(i);
                Console.WriteLine("Extension: {0}", ints.IsEven() );
            }
            Console.ReadLine();
        }
   }

    public static class ListExtensions
    {
        public static bool IsEven<T>(this ICollection<T> collection)
        {
            return (collection.Count%2) == 0;
        }

        public static bool IsOdd<T>(this ICollection<T> collection)
        {
            return (collection.Count%2) != 0;
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T05:48:37.563

既然我们傻...

```
public static class Extensions
{
    public static bool IsEven(this Int32 integer)
    {
        return (integer % 2 == 0);
    }
} 
```

让你做...

```
numberOfItems.IsEven() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T05:39:34.217

(numberOfItems & 1) == 1

更像 numberOfItems%2 != 0

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T05:39:49.690

对于 (numberOfItems &1)==1，这是一个按位与。它似乎正在检查 numberOfItems 是否为奇数，如果是，则添加一个空列表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T05:39:57.617

```
((numberOfItems & 1) == 1) 
```

& with 1 测试第 0 位。对于整数数据类型，所有奇数值都设置了第 0 位，所有偶数值都将其清除。上面的代码有效地测试了值是否为奇数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T05:40:50.453

可以重构为更易于理解/维护：

```
if (userLists != null)
{    
    EnsureListHasAnEvenNumberOfItems(userLists);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-06T05:43:10.307

零元素可以吗？

x = (0 & 1) 那么 (x == 1) 是假的...

我认为您应该要求您的承包商更多地评论他们的代码。

# security - 如何保护 Web 服务器的图像上传目录？

> ID：828172
> 
> 赞同：15
> 
> 时间：2009-05-06T05:37:40.070
> 
> 标签：security, upload, webserver, chmod

对于我的 Web 应用程序，人们可以将图像从 Web 表单上传到我的 Web 服务器。

**我应该为该图像上传目录设置 CHMOD 设置，以便人们可以将图像（从 Web 服务器）上传到该目录，但出于安全原因不能执行他们上传的任何文件。**

chmod 设置会是什么？：

```
chmod 744 directory/ 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-06T08:51:39.933

There are two possible meanings for "executable" in this context, and both are things you need to configure against.

1.  An executable binary file that may run from the command line by typing the file's name into a shell

2.  A file that may be *read* and processed as script by a web server.

**Handling binary-executable**

To configure against case 1 on a un*x system, you need to ensure that your upload directory, and files therein, are owned by the web server user and only readable by that user. The directory must be executable; this means that the files inside that directory can be accessed). If the web user needs to list the files in the directory, it must also be readable. It, of course, must also be writable to allow new files to be created.

Thus the octal set you want would be

```
chown <web-server-user> <upload-dir>
chmod 0700 <upload-dir> 
```

The files must not be executable and should only be readable and writable by the web server,so these should be

```
chmod 0600 <uploaded-file> 
```

Please note that this means that *only the web server user* will be able to see these files. This is the best situation for security. However, if you really do need other local users to be able to see these files,then use

```
chmod 0755 <upload-dir>
chmod 0644 <uploaded-file> 
```

**Handling web-server excutable**

Coding against case 2 is web server specific.

One option is to place the upload directory outside of the webroot, dissalowing direct URL access to the uploaded files completely and only to serve them via server-side code. Your code reads and echoes the file content, thus ensuring it is never processed as script by the web server

The other option is to configure your web server to not allow script processing of files in the upload directory. This configuration is web-server specific. However, for example, in Apache you can achieve this this by entering into your server configuration:

```
<Directory "path-to-upload-dir">
  AllowOverride None
  Options -ExecCGI
</Directory> 
```

AllowOverride None is important, as it stops anyone uploading a .htaccess file to your uploads directory and re-configuring the web server permissions for that directory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T05:54:28.830

目录上的 chmod 无法做到这一点，而且无论模式是什么，您的 Web 服务器都可能将 .php 解释为可执行文件。您可能想要指定您正在使用的服务器，可能有一个 .htaccess 或类似的指令您可以使用。

请注意，目录上的“执行”意味着“可以访问目录中的文件”，因此如果您希望您的 Web 服务器可以访问其中的文件，则必须进行设置...

# xaml - 如何调整 xaml 标签中的填充

> ID：828185
> 
> 赞同：9
> 
> 时间：2009-05-06T05:40:10.440
> 
> 标签：xaml, label, padding

如何使以下标签中的顶部和底部填充更小？正如我所看到的，边界框比它需要的大得多，但填充设置为 0，所以它不能更小。

```
<Label Background="AliceBlue" Content="1800" FontSize="170" FontWeight="Bold" Foreground="Gray" Padding="0" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-07-08T19:55:17.447

您可以使用保证金。

使用边距，您可以设置要向左、向右、上、下移动的数量

我的意思是`Margin="0,0,0,0"`那个意思。你什么都没有。

它通过以下方式进行：`Margin ="left, top, right, bottom`

所以如果我有`margin ="2,5,3,5"`

这意味着我有一个距左侧 2 个像素的边距，距顶部 5 个像素，距右侧 3 个像素和距底部 5 个像素的边距。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:31:17.520

刚刚在标签周围有边框的地方点击了这个，我设置了一个负边距。

```
<Border BorderBrush="Black" BorderThickness="1">
    <Label Margin="-5" Content="Unable to report/>
</Border> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-08T19:37:49.707

填充在 XAML 中不存在于`FrameworkElement`. 使用保证金。

填充可以应用于三个元素：`Block`，`Border`并且`Control`因为这些元素有一个外边缘。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-07T12:04:17.547

Try to wrap the Label in a Layout for example StackLayout and give padding to that Layout, then Label will align accordingly. This code may helps you.

```
<StackLayout Padding="10">
    <Label x:Name="TitleLbl"></Label>
</StackLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-11T19:32:50.933

通过设置边距并将其包装在 StackLayout 中来调整标签填充

```
<StackLayout VerticalOptions="StartAndExpand" Margin="0,0,0,0" BackgroundColor="Red">
            <Label Text="Login to your account" TextColor="White" Margin="10,10,10,10"  />
        </StackLayout> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-30T14:23:30.243

制作自定义渲染器 **PCL：**

```
 public class SALabel : Label
    {

        public static readonly BindableProperty PaddingProperty = BindableProperty.Create("Padding", typeof(Thickness), typeof(SALabel),default(Thickness));

        public Thickness Padding
        {
            get { return (Thickness)GetValue(PaddingProperty); }
            set { SetValue(PaddingProperty, value); }
        }
} 
```

**在安卓中**

```
Control.SetPadding((int)saElement.Padding.Left, (int)saElement.Padding.Top, (int)saElement.Padding.Right, (int)saElement.Padding.Bottom); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-17T20:05:33.770

如果您可以更改为使用 TextBlock，那么您可以更好地控制填充。Label 的目的似乎是通过其内部样式固定填充。请参阅“[如何删除 WPF 标签中文本周围的边距？](https://stackoverflow.com/questions/11501380/how-can-i-remove-the-margins-around-text-in-a-wpf-label) ”。

# c - 如何在 Mac OS X 上安装 nano-hmac？

> ID：828191
> 
> 赞同：3
> 
> 时间：2009-05-06T05:42:24.320
> 
> 标签：c, macos, haskell, openssl, cabal

“nano-hmac”是一个 Haskell 包，通常可以使用 Cabal 安装。但是，Mac OS X 的 OpenSSL 库与它预期的不同，因此它无法编译绑定。

我可以从 openssl.org 安装 openssl 版本，但我不确定如何指示 Cabal 使用它而不是 Mac OS X 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T20:01:04.020

macports 有自己的 openssl、ghc 和 hs-cabal。您是否尝试过通过 macports 安装所有内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T19:50:36.527

免责声明：我不是 Haskell 开发人员。（*我知道，我知道……*）

也就是说，我建议研究使用[Fink](http://www.finkproject.org/)，它为[GHC](http://pdb.finkproject.org/pdb/browse.php?summary=haskell)以及[openssl](http://pdb.finkproject.org/pdb/browse.php?summary=openssl)和许多（大多数？）常见的 FOSS 包提供支持。

# delphi - 我可以使 TTreeNode 不可见吗？

> ID：828194
> 
> 赞同：6
> 
> 时间：2009-05-06T05:42:47.190
> 
> 标签：delphi, vcl, delphi-2007

TTreeNode 没有 Visible 属性，因此不存在明显的选项。有没有其他方法可以使 TTreeNode 及其所有子节点不可见？当然，我希望以后能够让它再次可见。

这是德尔福2007。

注意#1：我知道替代的 TVirtualTreeView，如果没有简单的方法可以使用 TTreeView 完成此操作，我会检查它。

注意#2：我只需要顶级节点的选项。我想隐藏的那些通常甚至没有孩子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-07T02:29:39.377

**将数据与用户界面分开**是个好主意，树视图的这个问题就是一个很好的例子——**不要将数据存储在树视图**中。我经常有一个包含存储数据的结构化类的非可视单元。用户界面单元可以有一个树视图，可以显示来自该类的数据（可配置的子集）。有多种方法可以在两者之间移动数据。这种类型的隔离需要一些计划，但提供了更大的灵活性和稳定性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T07:04:10.347

如果你想使用更好的树组件，为什么不使用 Virtualtreeview。它是为 Delphi 开发的最好的组件之一，并且可以免费使用源代码！但是隐藏 ttreenode 可能存在逻辑问题！当没有节点可见时，树是否应该显示 + 号？

[http://wiki.lazarus.freepascal.org/VirtualTreeview](http://wiki.lazarus.freepascal.org/VirtualTreeview)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T06:58:51.217

TTreeView 是标准 Windows 树视图的包装器，它（从[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/bb760017(VS.85).aspx)判断）不允许隐藏树节点。这也很有意义，因为已知树视图不会扩展到大量节点，因此隐藏树节点而不是删除所有不必要的东西将是一个坏主意。

如果您只删除和插入顶级节点（您希望隐藏的节点），并在重新添加节点的*OnExpanding事件中创建所有子节点，您可以让您的生活更轻松一些。*为此，您只需将节点的*HasChildren*属性设置为 true。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-01T20:06:11.397

在 TTreeView 中“隐藏”节点的唯一方法是实际删除它。然后，要“显示”该节点，您只需再次重新插入它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-07T16:26:47.187

我是如何使用标准 TTreeView 在 DXE5 中实现的。我认为这对某些人会有所帮助。我做了简单的例子：

**1.必须隐藏的项目。我将它的 ImageIndex 设置为 2。**

```
 var
    Node:TTreeNode;
  begin
  ...
  Node:=Tree.Items.AddChild(ParentNode,'Text');
  Node.ImageIndex:=2; 
```

**2\. 现在我设置了TTreeView 的onAdvancedCustomDrawItem 事件。**

```
 if Node.ImageIndex=2 then
  begin
    DefaultDraw:=false;
    Node.Parent.HasChildren:=false;
  end; 
```

**3.用TTreeView的onClick事件检查：**

```
var
 Tree:TTreeView;
 Node:TTreeNode;
begin
  Tree:=Sender as TTreeView;
  if Tree.Selected.Index>-1 then
   if Tree.Selected.HasChildren then
    if Tree.Selected.getFirstChild.ImageIndex=2 then
     showmessage(Tree.Selected.getFirstChild.Text); 
```

完毕。我希望它会帮助你。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-03T02:40:05.400

我通过将节点移动到另一个非扩展节点来解决这个问题，反之亦然。我在扩展事件处理程序中完成了它。

# jquery - 为什么从 NOSCRIPT 中检索 html 会返回 htmlentities？

> ID：828195
> 
> 赞同：4
> 
> 时间：2009-05-06T05:42:56.393
> 
> 标签：jquery

考虑代码：

```
<noscript><div>FOO</div></noscript> 
```

跑步

```
$('noscript').html(); 
```

返回`&lt;div&gt;FOO&lt;/div&gt;`

但运行

```
$('noscript').text(); 
```

返回原始 html。

这与我的预期相反。对此有解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:03:58.863

似乎有一个 PhantomJS 错误似乎逃脱了 page.content 中 noscript 标记中的实体。此功能将使它们恢复到应有的形式。[S 对象](https://npmjs.org/package/string)来自 npmjs.org 上可用的字符串包。

```
function fixNoScript(content) {
  var noscript = /<\s*noscript\s*>([^<]+)<\s*\/\s*noscript\s*>/ig;
  var matches = content.match(noscript);
  for ( var i = 0; match && i < matches.length; i++ ) {
    var decoded = S(matches[i]).decodeHTMLEntities().s;
    var index = content.indexOf(matches[i]);
    content = content.substring(0, index) + 
              decoded +
              content.substring(index + matches[i].length);

  }
  return content;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T06:24:14.157

这更像是一个 DOM 怪癖而不是 jQuery 怪癖：

```
$("<noscript><div>FOO</div></noscript>")[0].innerHTML == "&lt;div&gt;FOO&lt;/div&gt;"

$("<noscript><div>FOO</div></noscript>")[0].textContent == "<div>FOO</div>" 
```

基本上，此操作的行为并不一致，正[如此答案](https://stackoverflow.com/questions/620896/access-contents-of-noscript-with-javascript/620955#620955)所解释的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-11-26T08:06:57.570

是的，这是完全不一致的，因为 htmlentities 被破坏了。© 在 BOTH 函数中总是转换为版权字符。基本上应该有一个函数可以直接提取 html，而不进行任何转换。

# jquery - jQuery切换菜单不起作用

> ID：828199
> 
> 赞同：0
> 
> 时间：2009-05-06T05:48:36.003
> 
> 标签：jquery

如果我单击当前项目，它应该打开和关闭并关闭所有其他项目（如果它是打开的）。当我点击menu1时，它只是保持打开状态。我想要一些功能，比如当它打开时它应该关闭，当它关闭时它应该打开。请看网址

```
<script language="javascript" type="text/javascript">
    $(document).ready(function() {

        $(".toggle_container").hide();

        $("li.trigger").click(function() {
            $(".toggle_container").hide();
            $(this).next(".toggle_container").slideToggle("slow,");
            $("li.trigger").removeClass("active");
            $(this).addClass("active");
            return false;
        });

    });
</script>
<ul>
    <li class="trigger" id="t1">Menu 1</li>
    <li class="toggle_container">Menu 1 content</li>
    <li class="trigger" id="t2">Menu2</li>
    <li class="toggle_container">Menu2 content</li>
    <li class="trigger" id="t3">Menu3</li>
    <li class="toggle_container">Menu3 content</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T05:53:33.090

我不确定您的问题是什么，但我确实在您的代码 ( `...slideToggle("slow,")`) 的第三行末尾看到了一个额外的逗号。那可能不应该在那里。

编辑：检查提供的网址后，我现在看到了问题所在。首先，您应该为该类添加一个新样式`.toggle_container`：

```
li.toggle_container { display: none; } 
```

这会阻止子菜单的初始显示。接下来，如果单击活动或非活动链接，您应该在 jQuery 脚本中考虑：

```
$(document).ready(function() {
    $("li.trigger").click(function() {
        $(this).next(".toggle_container").slideToggle("slow");
        if (!$(this).hasClass("active")) {
            $(".toggle_container").hide();
            $(".active").toggleClass("active");
            $(this).toggleClass("active");
        }
        return false;
    });
}); 
```

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T05:59:16.633

在你的代码上试试这些，

```
$("selector").addClass("class").siblings().removeClass("class");
or
$("selector").slideToggle("slow").siblings().hide("slow"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T14:08:23.387

您可以使用 a 扩展 jQuery，`toggleClass`如下所示：

```
//extend jquery
(function($) {
    $.fn.toggleClass = function(check, replace) {
        return this.each(function() {
            if ($(this).hasClass(check)) {
                $(this).removeClass(check);
                $(this).addClass(replace);
            } else {
                if ($(this).hasClass(replace))
                    $(this).removeClass(replace);
                $(this).addClass(check);
            }
        });
    };
})(jQuery); 
```

所以你可以做这样的事情：

```
<input type="button" value="Toggle" 
onclick="$('#myDiv').toggleClass('expanded','collapsed')"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-23T11:54:11.033

总体而言，这是一个更简单的解决方案：

```
$(function(){
  $(".toggle_container").hide();
  $("li.trigger").click(function(){
     $(".toggle_container").not($(this).next()).hide();
     $(this).addClass("active").next(".toggle_container").slideToggle("slow")
            .end().siblings().removeClass("active");
  });
}); 
```

但是请注意，修复原始代码所需的唯一事情是排除您想要隐藏的元素，以便切换正常工作（它总是在切换之前被隐藏，所以切换总是“显示”），您可以通过像这样添加[`.not()`](http://api.jquery.com/not/)：

```
$(".toggle_container").hide();
$(".toggle_container").not($(this).next()).hide(); 
```

# sql-server-2005 - 如何在存储过程中使用案例？

> ID：828204
> 
> 赞同：0
> 
> 时间：2009-05-06T05:50:25.813
> 
> 标签：sql-server-2005

我必须在我的gridview中显示日期时间，问题是当我向数据库插入值时，默认日期我传递“1/1/1900”，所以在检索数据时我发现值“01/01/ 1900 年 12:00:00 AM”在网格视图中。

如果日期时间是“01/01/1900 12:00:00 AM”我希望它为空值或相应的日期，我可以在存储过程中检查它吗？请帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T05:53:15.400

```
SELECT
    CASE
        WHEN DateField = '01/01/1900 12:00:00 AM' THEN NULL
        ELSE DateField
    END AS DateField
FROM
   Wherever 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T17:07:40.800

代替存储默认日期，您可以在插入时将日期设置为 null 以避免将来出现错误并使用 like.why 让事情变得混乱只需使用

```
Select ISNULL(DateField,'what everyou want to show in Grid when NULL') as DateField From YOURTABLE 
```

或者

```
Select DateField from YOURTABLE 
```

# mysql - Mysql 查询：如果存在 Where 子句

> ID：828205
> 
> 赞同：2
> 
> 时间：2009-05-06T05:50:42.240
> 
> 标签：mysql, exists

我有一个 MySQL 数据库，其中有一个名为 ProductMaster 的表，其中包含 6 个字段“Product_Id、Product_Name、Model、Opening_date、Closing_Date、Status”。Opening_Date 和 Closing Date 可以接受空值。因此某些记录具有该字段的值

我有以下查询来显示该表中的记录。

```
"select Product_Id,Product_Name,Model from ProductMaster  where Status=1" 
```

现在我想将查询更改为对 Opening_Date 和 Closing_Date 进行过滤（如果它们不为空）

例如：如果记录的 Opening_Date 为 05/01/2009，Closing Date 为 05/30/2009 那么我想检查今天是否是这两个日期之间的日期，如果是，则返回记录

如果两个字段值都为空，则返回记录

任何人都可以帮助我构建查询吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T06:10:27.667

查询的`WHERE`一部分（“`WHERE`子句”）只是一个长布尔表达式。这是什么意思？MySQL 只是希望它返回 true 或 false，它理解为“是的。在结果中包含这一行。” 或“不。不要在结果中包含这一行。”

如果我理解正确，你想做两件事：

1.  检查`opening_date`and`closing_date`是否`null`
2.  检查今天是否在这两个日期之间。

并且您希望 #2 仅在 #1 为真时发生。这可以表示为：

```
#1 AND #2 
```

如果 #1 或 #2 为假，则将其评估为假。

这可以翻译为：

1.  `(opening_date IS NOT NULL) AND (closing_date IS NOT NULL)`
2.  `NOW() >= opening_date AND NOW <= closing_date`

因此，如果我们在我们说要使用 ( `#1 AND #2`) 的表达式中将这两个视为 #1 和 #2 ，那么我们得到：

```
((opening_date IS NOT NULL) AND (closing_date IS NOT NULL)) 
AND (NOW() >= opening_date AND NOW <= closing_date`) 
```

这就是`WHERE`您需要的条款。

# coding-style - 你对硬编码的态度是什么？

> ID：828207
> 
> 赞同：9
> 
> 时间：2009-05-06T05:52:56.790
> 
> 标签：coding-style, hard-coding

我的是这样的：

> 硬编码才是王道！我所有的问题都消失了。只需一一编码即可。问题又回来了，会扼杀你的一天。

我绝对讨厌它，但事实是“商务人士”倾向于喜欢它，因为获得他们想要的东西需要更少的时间。作为一名特别是在企业环境中工作的软件开发人员，大多数人会说：“是的，何必麻烦，只需硬编码即可”。你对硬编码的态度是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-06T05:59:11.627

> 硬编码是应该尽可能避免的事情。

如果您在代码上硬编码某些内容，它将在很大程度上完全“破坏”代码的[可移植性。](http://en.wikipedia.org/wiki/Software_portability)即使使用独立于平台的语言，您也无法说“编译一次，随处运行”。由于这不是一个好的软件工程实践，我认为避免硬编码更好。

但我知道在某些情况下我们需要它，特别是在调试代码时。我建议的方法是：先用硬代码开发代码，使其稳定并消除硬代码然后......

由于安全问题等原因，在某些情况下我们需要硬编码:)。您可能不允许使用注册表、配置文件等任何东西，因为它们会增加攻击面。但我认为这是一种罕见的情况。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-06T06:40:53.773

IT 中不存在灵丹妙药。

*   如果聪明就去做。
*   如果它愚蠢，请不要这样做。

如果有人告诉您做愚蠢的事情，请保存电子邮件线程并保存您的工作

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-05-06T06:22:56.437

只要出于正确的原因，硬编码就没有错！

“做对了”意味着将所有的硬编码集中在一两个模块中。

对于 C 来说，在 code.h 中定义所有值，对于 Java，有一个 codes.java 类，该类充满了公共常量。

硬编码有几个“正确的理由”。

*   简单。
*   支持 - 如果您的值在外部配置文件中，您将无法保护自己免受愚蠢配置的影响，并且您无法测试所有可能的配置，如果它是硬编码的，那么您知道您在处理什么。
*   表现。
*   可读性。您可以在编辑会话中看到您需要知道的一切！

还有几个原因可以避免过于复杂的配置文件。如果你有足够的参数和选项，你最终只会用一种不太好的语言进行编程。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-06T06:32:09.427

从概念上讲，我不喜欢太多的硬编码。

但在实践中，我倾向于硬编码一些值。硬编码的主要原因是：

*   按照规范应该有这个值，它不应该被改变。**使其可更改可能会使软件不稳定。**
*   该值可能稍后会更改，但不知道由谁以及如何更改，因此您不知道它属于哪里。它可能属于配置文件、资源文件、数据库、注册表或其他地方。**把它放在错误的地方比硬编码更糟糕。**

我认为有一些**“硬编码最佳实践”**永远不会过度设计：

*   硬编码值应始终在常量的中心位置声明。
*   即使一个值是硬编码的，它仍然应该作为参数传递给组件，而不必关心值来自哪里。它使您的组件可重用。

这使得以后可以将硬编码值移动到其他位置。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-06T06:01:03.417

作为一个在我早期有过硬编码经验的人（不要告诉任何人），我可以自信地告诉你，它会再次困扰你。我制作的这个应用程序（我*现在不谈*）必须*完全*重写，因为它有很多硬编码的内容。那是1998年的伙伴。

除非您将来不想支持该客户，否则不要这样做。您现在节省的时间将用于以后修复。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-06T07:44:58.517

在嵌入式和关键软件中，硬编码有两个主要优点：

*   它更快
*   它更简单

这意味着更少的 CPU 负载，即更少的功耗，更少或没有动态内存分配，更少的算法复杂性，即更容易调试，...

通常，硬编码数据被放在一个单独的头文件中以提高可维护性。

此外，从数据库自动生成该头文件提供了灵活性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-06T07:07:03.647

我认为对默认值进行硬编码是解决可能需要配置的所有内容的方法：

在我们的 GUI 代码（客户端-服务器）中，我们使用三步查找：我们向偏好实例询问具有默认值的偏好。但是这个传递的默认值会被配置文件覆盖（如果存在）。

这样我们以后有两个选择。如果客户想要不同的东西，我们可以在配置文件中进行更改。我们还可以配置我们的设置对话框以使其用户可配置。

如此有效地，我们有硬代码，可以被配置覆盖，可以被用户偏好覆盖。

唯一的问题是记录所有首选项键...

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-06T07:18:43.200

通常花费在维护代码上的时间和金钱比最初编写代码要多。代码总花费的 80% 通常用于维护期间。因此，任何使维护变得更加困难的事情最终都会比第一次做对的成本更高。硬编码绝对是使维护变得更加困难的一件事，因此是一个坏主意。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-06T05:59:27.163

硬编码是要走的路！

但正如 Anthony 提到的，我将可配置的值放在他们自己的类中。通过这种方式，它们可以在编译时进行配置，但不会增加外部 xml/txt 文件进行配置所带来的复杂性。

我只在绝对必要的情况下使用 xml/txt 文件进行配置。否则，您只是过度设计，这可能与硬编码一样糟糕，甚至更糟糕。更不用说人们在配置文件中放入了很多你不希望客户端更改的东西。

如果您需要为不同的客户端进行不同的配置，没问题，将硬编码的值放在他们自己的程序集/dll中，并为每个客户端部署不同的配置程序集。

正如[Ayende](http://ayende.com/Blog/Default.aspx)所说，[对所有内容进行硬编码](http://ayende.com/Blog/archive/2008/08/21/Enabling-change-by-hard-coding-everything-the-smart-way.aspx)是实现变革的关键。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-06T05:56:36.937

我通常尝试将值放入配置文件而不是硬编码。如果一个值必须是硬编码的，我会用硬编码的值创建一个常量，并且代码中的任何地方都引用同一个常量。如果值需要更改，可以在一个地方完成。

对于应用程序范围的常量，我通常创建一个类并在其中创建常量。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-06T06:07:20.560

涉及的几个因素很难做出涵盖所有情况的断言。

如果这是一个有几个周期的长项目，那么如果你开始硬编码，它们很可能很快就会再次弹出。因此，在这些情况下，最好使用适当的解决方案进行修复。

但是，如果您有一个周期短的项目，或者有预定义的时间表，并且无论如何您都必须交付产品，那么大多数客户都会对产品的工作感到满意，他们不会关心内部结构。但在这些情况下，我更喜欢硬编码解决方案，但让路径开放，以便将来很容易做出正确的解决方案。

无论如何，硬编码是不好的，但是我正确地记录它可以使下一个人的生活更轻松，并且可能不会诅咒你，至少不会太多;)。

但根据我的经验，我开始避免从头开始硬编码，只有在别无选择时才使用它们，并且总是记录这些情况，以便以后有时间时可以正确修复它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-06T06:25:27.180

> 得到他们想要的东西需要更少的时间。

这几乎就像是在说：“我喜欢编写不带注释的代码，因为得到我想要的东西需要更少的时间。”

当然，这并不是说硬编码*总是*一件非常糟糕的事情。（我的意思是，在配置文件中存储诸如 π、e 或普朗克常数之类的数学常数有点愚蠢。此外，硬编码查找表以查找正弦/余弦值可能会比从文件中加载要高效得多。）但是*纯粹为了方便而对*数据进行硬编码并不是一个聪明的主意。它不灵活，并且使以后修改数据比必须的要麻烦得多。

此外，硬编码会使本地化变得极其困难，即使在许多情况下并非不可能。如果它是某个公司的内部应用程序，那么我想这在某种程度上并不重要，但这并不能使它成为一个好的软件开发实践。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-06T07:02:19.103

如果我需要 a`char *`指向 12 个字符，我可以安全地写`malloc(12)`，因为`sizeof(char)`它总是 1。如果我需要 a`int *`指向 12 个整数，我写`malloc(12 * sizeof(int))`.

硬编码一些*绝对* **不会**改变的东西。对于其他所有事情，它需要额外的两秒钟，所以为什么不继续做呢？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-06T07:12:41.543

如果硬编码正确完成，它可能是一个奖励。例如，如果您对数组大小进行硬编码而不是进行动态分配，则可以很容易地进行调试，因为您确切地知道数组在内存中的位置。这是假设您实际上想知道这些事情。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-06T22:02:28.817

我总是创建一个常量，但尽可能接近/明智地使用它的“唯一”用途。

如果我在单元的其他地方需要它，它会被移动到单元的顶部。

如果在另一个单元中需要它，则常量将移动到设置单元。

如果有人希望它可以更改，它会被移动到设置单元（如果还没有），并从配置文件等中设置。

归根结底，您给事物起的名字就是它的文档，至少这意味着您不会将您的 73 与其他人的 73 混淆。如果您明白我的意思。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-09T21:16:48.403

关于 C/C++ 中的硬编码字符串；我通常将它们#define 作为避免硬编码的最简单方法（尽管在某种意义上仍然是硬编码）。原因是定义的标识符拼写错误将被编译器捕获，而引号之间的任何内容都不会。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-05-09T21:57:48.900

我对配置的态度？它经常做得很差而且太随意 - 随着用户试图了解 100 多个可配置值，TCO 会增加。仅在证明有必要时才添加可配置性（软编码）。

必要时... 应以与用户输入相同的不信任来对待可配置值，并在输入错误时提供清晰的错误消息。大多数组件应该与配置基础设施隔离 - 就像您将大多数组件与任何数据访问基础设施隔离一样。一旦与配置基础设施隔离，您就可以并且应该测试组件如何处理来自配置系统的各种“输入”。最重要的是，该程序应该可以在最少的配置下正常工作。

但是，这种类型的反模式非常常见：

```
File.Open(configuration["widgetsFileStorage"] + "/" + widgetImage) 
```

或者这个（你会不会将用户输入直接放入一个 href 中？我不会。不知何故，很多人过于信任配置值）。

```
LinkWriter.href=configuration["supportUrl"] 
```

什么时候配置？正如你证明你需要。良好的关注点分离将使以后可以轻松地使值可配置。我会放弃将文件定位到文件定位器中的责任。

```
File.Open(new WidgetFileLocater().GetUncPath(widgetImage)) 
```

在我的文件定位器后面的某个地方，我可能会或可能不会引用配置文件、数据库。我可能会开始硬编码到应用程序目录中的“图像”目录。当我们有一个灵活性用例（有人想把它放在 SAN 上？）而不是之前，配置就会出现。无论如何，无论是否配置，大多数应用程序都不应该。我可能会在文件定位器上使用一些依赖注入来验证它是否正确处理了来自配置文件的糟糕输入。

另外：配置几乎总是松散类型，未编译，因此比代码危险得多。开发人员很少尊重这种风险（但系统管理员非常尊重这种风险）。我已经讨论过使用像 python / ironpython / boo 这样的脚本语言来满足配置需求。我将获得在编译后更改内容的能力，其语法和类型检查比 xml 或文本更自由。

警告：我的态度假设一个迭代的发布周期。如果你有一个 2-10 年的发布周期，比如 Microsoft，你会倾向于倾向于配置更多的值。

# python - python中的文件处理

> ID：828214
> 
> 赞同：3
> 
> 时间：2009-05-06T05:55:17.080
> 
> 标签：python

提前致谢。我编写了一个适用于小文件的程序。但这不适用于 1 GB 的文件。请告诉我有什么方法可以处理大文件。这是代码。

```
fh=open('reg.fa','r')
c=fh.readlines()
fh.close() 
s=''  
for i in range(0,(len(c))):  
    s=s+c[i]  
    lines=s.split('\n')
    for line in s:
            s=s.replace('\n','')
s=s.replace('\n','')          
print s 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-06T06:05:40.253

该`readlines`方法读入**整个**文件。对于相对于物理内存大小而言较大的文件，您不希望这样做。

解决方法是以小块读取文件，并单独处理这些文件。例如，您可以执行以下操作：

```
for line in f.xreadlines():
    ... do something with the line 
```

`xreadlines`不返回行列表，而是一个迭代器，当循环调用它时，它一次返回一行`for`。一个更简单的方法是：

```
for line in f:
    ... do something with the line 
```

根据您所做的工作，逐行处理文件可能容易或困难。我并没有真正了解您的示例代码试图做什么，但看起来应该可以通过行来完成。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-06T08:41:32.657

The script is not working because it reads all lines of the file in advance, making it nescessary to keep the whole file in memory. The easiest way to iterate over all lines in a file is

```
for line in open("test.txt", "r"):
    # do something with the "line" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-06T05:59:43.823

使用 readlines() 您可以一次读取整个文件，因此您使用 1 GB 内存。安装此尝试：

```
f = open(...)
while 1:
   line = f.readline()
   if not line:
     break
   line = line.rstrip()
   ... do something with line
   ... 
f.close() 
```

如果您只需要删除 \n ，则不要逐行执行，而是使用文本块执行：

```
import sys

f = open('query.txt','r')
while 1:
    part = f.read(1024)
    if not part:
        break
    part = part.replace('\n', '')
    sys.stdout.write(part) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T11:23:06.433

您的程序非常多余。看起来你所做的一切都可以使用这些行来完成：

```
import sys
for line in open('reg.fa'):
    sys.stdout.write(line.rstrip()) 
```

足够了。该程序**与问题中的原始代码给出了相同的结果，**但更简单、更清晰。它还可以处理任何大小的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-08T07:41:09.753

从您的编码中可以清楚地看出您想要单行的字符串缓冲区。从编码的角度来看，将整个文件内容存储在一个字符串缓冲区中是不好的。然后你处理了你的要求。并且代码包含太多的局部变量。

您可以使用以下代码块。

f = 打开（文件名，模式）

对于 f 中的行：

```
"""

Do the processing 

""" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-07T06:03:12.133

```
import sys
import os 
```

如果没有创建文件，则使用 wb+ 模式，这将创建文件并写入数据！

```
f = open('f_name.txt','wb+')
while 1:
    part = f.read(1024)
    if not part:
        break
    part = part.replace('\n', '')
    sys.stdout.write(part) 
 f.close() 
```

# .net - 回发后 Asp.net 数据绑定丢失

> ID：828229
> 
> 赞同：1
> 
> 时间：2009-05-06T06:02:47.203
> 
> 标签：.net, asp.net, data-binding

大家好，我遇到了以下问题，这真的让我发疯了。

例如，在我执行任何类型的回发后，几个控件不会重新绑定自己

带有附加 ObjectDataSource（在我的情况下为 ObjectContainerDataSource）的 DetailsView 未显示 LoggedInTemplate，但 LoginStatus 显示我已登录。

我几乎绝望了，我想知道您过去是否遇到过相同或类似的问题，可以给我一些提示。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T08:28:57.120

如果在 Page_Load 方法中执行绑定，请确保它在 if not postback 循环内。

```
if (!IsPostBack)
    {
        //Your code to bind data
    } 
```

每次回发后，都会触发页面加载事件。因此，如果未在上述给定循环内绑定控件，则每次回发时都会进行绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T06:07:52.650

在没有看到任何实际代码的情况下，我建议您查看页面和各个控件的 EnableViewState 设置。

这是一篇关于[管理视图](http://www.dotnet-guide.com/viewstatemanagement.html)状态的好文章。

您还应该在 page_load() 的类似部分中查找代码

```
if(!IsPostback)
{
    // code to bind some of your controls
} 
```

该代码只会在您第一次进入页面时被调用，而不是在回发中。如果您离开页面并返回，那么该绑定代码将再次运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T06:14:00.547

您的数据绑定是否发生在 page_load 事件中？如果没有，您是否在重新加载页面时重新绑定？

你的控件是动态加载的吗？

# java - 是否可以重构此 Java 代码？

> ID：828236
> 
> 赞同：1
> 
> 时间：2009-05-06T06:07:13.293
> 
> 标签：java, refactoring

我在下面有一个简单的代码：

```
import java.util.ArrayList;

public class BoidList extends ArrayList
{
  synchronized public Boid GetBoid( int idx_ ) throws ArrayIndexOutOfBoundsException
  {
    if( idx_ <  super.size() &&
        idx_ >= 0 )
    {
      return (Boid) super.get(idx_);
    }
    else
    {
      throw new ArrayIndexOutOfBoundsException();
    }
  }
  synchronized public void RemoveBoid( int idx_ ) throws ArrayIndexOutOfBoundsException
  {
    if( idx_ <  super.size() &&
        idx_ >= 0 )
    {
      super.remove(idx_);
    }
    else
    {
      throw new ArrayIndexOutOfBoundsException();
    }    
  }
} 
```

这两种方法之间有很多相似之处，但它们做了两件不同的事情。有可能重构这个吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-06T06:23:32.567

的真正目的是`BoidList`什么？考虑以下：

```
List<Boid> boids = Collections.synchronizedList(new ArrayList<Boid>()); 
```

这行代码或多或少等同于您尝试创建的子类：

*   类型安全在编译时强制执行
*   `ArrayList``IndexOutOfBoundsException`如果索引无效，已经抛出
*   `Collections.synchronizedList()`确保同步访问列表

根据您提供的源代码，我认为没有任何理由创建您自己的子类。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-06T06:31:52.547

```
public class BoidList extends ArrayList<Boid> {

    private void checkIndex(int idx) {
        if (idx >= super.size() || idx < 0) {
            throw new ArrayIndexOutOfBoundsException(String.valueOf(idx));
        }
    }

    synchronized public Boid getBoid(int idx) {
        checkIndex(idx);
        return super.get(idx);
    }

    synchronized public void removeBoid(int idx) {
        checkIndex(idx);
        super.remove(idx);
    }
} 
```

这可以通过多种方式修复您的代码：

*   checkIndex() 方法是你想要的
*   永远不要声明抛出 RuntimeException，因为它是一个编程错误
*   遵循 Java 命名约定（GetBoid -> getBoid、RemoveBoid -> removeBoid）
*   删除无用的演员，只需扩展 ArrayList

**编辑**

您可能还想检查[CopyOnWriteArrayList](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html) <Boid>

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T06:22:36.330

仅供参考，[`ArrayList`](http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html)该类具有执行边界检查的[`get`](http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html#get(int))and方法，如果指定的索引超出列表范围，则抛出一个。[`remove`](http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html#remove(int))[`IndexOutofBoundsException`](http://java.sun.com/javase/6/docs/api/java/lang/IndexOutOfBoundsException.html)

除非目标平台在 Java 5 下，否则使用[泛型](http://java.sun.com/j2se/1.5.0/docs/guide/language/generics.html)可能是更可取的方法。`ArrayList`使用泛型，可以确保`ClassCastException`.

例如：

```
List<String> list = new ArrayList<String>();
list.add("Hello");
list.add("World");
String s = list.remove(0);    // No need for typecasting.

list.add(10);                 // Compile error, as 10 is not of type String. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T06:13:31.840

您可以将检查有效性的代码提取到单独的方法中：

```
private void checkIndex(int i) throws ArrayIndexOutOfBoundsException
{
  if (idx < 0 || idx_ >= super.size()) {
    throw new ArrayIndexOutOfBoundsException();
  }
}

synchronized public void RemoveBoid( int idx_ ) throws ArrayIndexOutOfBoundsException
{
  checkIndex(idx_);
  super.remove(idx_);
} 
```

此外，您还想扩展 java.util.ArrayList[Boid]。

但是扩展 java.util.ArrayList 似乎是个坏主意。你为什么要这样做？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T06:09:59.603

我认为它们完全不同，一个通过指定索引获取对象，另一个删除它，无论是否存在代码相似之处，方法执行的任务都完全相反。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T06:32:41.407

你为什么要打扰？

更少的代码不是目标（除了 perl one liner 竞赛:-)）。

编码风格应该有三个目标：清晰、正确和运行时效率。

原始代码足够清晰，它可能是正确的，并且可以像使用 java 集合的任何东西一样高效地运行。

任何重构尝试都会使类本身变得不那么清晰，并且使使用该类的任何代码都变得不那么清晰。任何更改都可能引入错误，因此它的正确性会降低，并且不太可能更有效地使用数组类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T06:17:24.157

您可以编写如下函数：

```
private boolean checkIndex( int _idx ) throws ArrayIndexOutOfBoundsException {
    if ( idx_ <  super.size() && idx_ >= 0 ) {
         return true;
    } else {
         throw ArrayIndexOutOfBoundsException();
    }
} 
```

然后使用此方法进行检查。但是，与您已经使用的代码相比，这可能只会提供一点优势。

您绝对不应该做的是尝试从您已有的 2 种方法中制作 1 种方法。这基本上违反了我所知道的每一个 OO 原则；-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T06:17:56.277

您可以将其重构为 getOrRemoveBoid 方法，其中参数可以处理决策。但这看起来像代码气味。这些方法具有不同的语义，应该分开。

这门课的大部分内容是关于异常处理和语言语法。你不应该混合这些方法，它们已经足够干燥了。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-05-06T06:24:22.003

不要仅仅为了它而重构！

唯一可能的部分：

```
idx_ <  super.size() && idx_ >= 0 
```

可能会浪费时间（如果您多次执行新的“isValidIndex(int)”方法，与未修改的代码相比，可能会造成性能损失）。

# ruby - 无法安装宝石

> ID：828241
> 
> 赞同：2
> 
> 时间：2009-05-06T06:09:29.650
> 
> 标签：ruby

**尝试安装任何**[gem](http://gems.rubyforge.org/)[时](http://gems.rubyforge.org/)出现 此错误 [rubyforge.org/](http://gems.rubyforge.org/)

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T12:50:39.233

也许您的网络中有一个 http 代理？当您直接（使用浏览器）访问[http://gems.rubyforge.org/](http://gems.rubyforge.org/)页面时，您会看到什么？或者甚至更好：如果您获取 url ' [http://gems.rubyforge.org/yaml](http://gems.rubyforge.org/yaml) ' 会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T09:01:23.153

您可能需要[更新 ruby​​gems](http://rubygems.org/read/chapter/3#page14)。

# java - 如何在我的 Eclipse 插件中监听用户出口？

> ID：828248
> 
> 赞同：4
> 
> 时间：2009-05-06T06:11:17.323
> 
> 标签：java, eclipse-plugin

我正在为一个大学项目编写一个 Eclipse 插件，并且需要能够在用户退出时运行代码并且我找不到正确的侦听器来使我能够执行此操作。下面显示了一个类似代码的示例，我在其中侦听成功完成的保存事件并在发生这种情况时调用方法。

```
public class ExecutionListener implements IExecutionListener{

private DataCollector dataCollector;

public ExecutionListener(DataCollector dataCollector)
{
    this.dataCollector = dataCollector;
}

public void postExecuteSuccess(String action, Object arg1) 
{
    if (action.equals("org.eclipse.ui.file.save")) {
        dataCollector.writeDatabase();
    }
} 
```

所以我想要的是一个监听器，它允许我监听退出事件并在发生这种情况时调用一个方法来运行我的代码。我想我无法确保在运行代码之前成功完成退出，但“预退出”侦听器可以正常工作。此外，如果有人确实知道正确的侦听器，他们是否也可以告诉我退出事件所需的 commandId（例如，上例中保存事件的 commandId 是“org.eclipse.ui.file.save”）。

谢谢，雅各布

编辑：回复 javamonkey79 的问题：

我像这样添加监听器：

```
/* Adds a listener to listen for file save events if needed. */
if (executionListener == null) {
    ICommandService service = (ICommandService) Activator.getDefault().getWorkbench().
    getService(ICommandService.class);
    executionListener = new ExecutionListener();
    service.addExecutionListener(executionListener);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-07T11:33:20.783

插件的 Activator 类包含一个 stop() 方法。Activator 是插件中扩展插件类的类，它在 Manifest.MF 中的“Bundle-Activator”标签处被引用。 [OSGi 文档包含关于插件生命周期的描述。](http://www.ibm.com/developerworks/library/os-ecl-osgi/index.html)

当工作区关闭时，所有插件都将停止。然后，您可以在本节中添加您需要的任何清理代码。

```
public void stop(BundleContext context) throws Exception {
    plugin = null;
            // Code to clean up here...

    super.stop(context);
} 
```

[API 描述了何时调用此方法](http://help.eclipse.org/help32/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/Plugin.html)。来自 API 的有趣片段：

> 注1：如果插件已经自动启动，平台关闭时会自动调用该方法。

The advantages of using this method instead of using a listener on the UI, is that you know that it will be called regardless of how the user leaves the workspace.

# javascript - （简单）是否允许 HTML 属性在赋值之间有空格

> ID：828262
> 
> 赞同：6
> 
> 时间：2009-05-06T06:18:49.690
> 
> 标签：javascript, html

我正在将一些属性解析为字符串，所以我需要知道如何在 HTML/XHTML 元素属性中使用空格：

```
 <div id='myid' width='150px' /> 
```

这也是正确的吗？

```
 <div id = 'myid' width = '150px' /> 
```

如果有人知道使用 JavaScript 遍历属性及其值的其他方法，我很想知道。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T06:24:03.063

是的，两者都是正确的。您需要使用 DOM，而不是字符串解析。查看[jquery](http://jquery.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T06:24:11.927

空格是允许的。如果您正在解析属性，为什么不让浏览器解析？如果您使用的是innerHTML，那么您将获得具有属性列表的元素

# java - 在 Android 中发出异步 HTTP 请求是否有公认的最佳实践？

> ID：828280
> 
> 赞同：42
> 
> 时间：2009-05-06T06:24:46.230
> 
> 标签：java, android, http

我见过很多例子，它们似乎都以不同的方式解决了这个问题。基本上我只想要最简单的方法来发出不会锁定主线程并且可以取消的请求。

我们（至少）有 2 个 HTTP 库可供选择，java.net.*（例如 HttpURLConnection）和 org.apache.http.* 也无济于事。

对最佳实践有什么共识吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-05-13T00:05:10.780

Android 1.5 SDK 引入了一个新类[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，旨在使在后台线程上运行任务并将结果与​​ UI 线程通信更简单一些。[Android 开发者博客](http://android-developers.blogspot.com/2009/05/painless-threading.html)中给出的一个例子给出了如何使用它的基本思路：

```
public void onClick(View v) {
   new DownloadImageTask().execute("http://example.com/image.png");
}

private class DownloadImageTask extends AsyncTask {
   protected Bitmap doInBackground(String... urls) {
      return loadImageFromNetwork(urls[0]);
   }

   protected void onPostExecute(Bitmap result) {
      mImageView.setImageBitmap(result);
   }
} 
```

该`doInBackgroundThread`方法在一个单独的线程上调用（由一个线程池管理`ExecutorService`），并将结果传递给`onPostExecute`在 UI 线程上运行的方法。您可以调用`cancel(boolean mayInterruptIfRunning)`您的`AsyncTask`子类来取消正在运行的任务。

至于使用`java.net`or`org.apache.http`库进行网络访问，这取决于您。我发现当简单地尝试发出 a并阅读结果时，这些`java.net`库使用起来非常愉快。`GET`这些`org.apache.http`库几乎可以让你做任何你想做的事情`HTTP`，但它们使用起来可能有点困难，而且我发现它们对于简单的`GET`请求表现不佳（在 Android 上）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-06T20:57:32.247

实际上，AsyncTasks 的设计存在一些缺陷，使其无法真正用于网络。一个简单的例子是，您将失去 AsyncTask 和 Activity 之间的链接……只需旋转您的设备。

看看[这个线程](https://stackoverflow.com/q/3357477/693752)：你会看到 AsyncTask 也很容易造成内存泄漏。

AsyncTask 文档清楚地说明了这一点：AsyncTask 应该只用于短期任务，而且很明显，网络不属于该类别。

所以，我真的建议你看看[RoboSpice](https://github.com/octo-online/robospice)。这个库是为异步网络设计的，它是一种非常健壮的实现方式。如果您只有几秒钟的时间可以说服，请查看此[信息图表](http://goo.gl/jxNin)。

RoboSpice 也作为商店中的演示应用程序：[RoboSpice Motivations](http://goo.gl/pzqH4)，它将深入解释有关 Android 上的异步网络的一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T12:33:18.280

引用托管在 Activity 或其他片段中`AsyncTask`的**静态保留片段（没有 UI）的情况如何？**没有内存泄漏，在单独的线程中优雅的异步操作，没有对象引用丢失。

我认为这对于 http 请求是可以的，但对于文件上传/下载则不行。如果你仔细阅读，有一句话：

*如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如 Executor、ThreadPoolExecutor 和 FutureTask。*

但他们没有提到，具有单独线程的[服务](http://developer.android.com/guide/components/services.html)也可能是一个不错的选择。这意味着无论用户做什么，都将继续在后台执行任务。（dg，如果他上传了一些文件，你不想停止这个，因为他已经离开了活动）

此示例[链接](http://developer.android.com/tools/samples/index.html)- 找到 RetainedFragment.java

AsyncTask 的此[链接](http://developer.android.com/reference/android/os/AsyncTask.html) 。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-11T12:49:38.840

您可以使用适用于 Android 的异步任务。要发出 http 请求，您可以使用 HttpURLConnection 类。

# asp.net - ASP.NET 网站的广告管理

> ID：828283
> 
> 赞同：0
> 
> 时间：2009-05-06T06:26:06.990
> 
> 标签：asp.net, ads

我正在寻找可以帮助我在我的网站上托管广告的广告管理软件。我已经检查了 BanManPro，但它的成本太高了。Google Ad Manager 存在问题，支持系统目前不是很活跃。

有没有人创建可在 ASP.NET 网站上使用的开源广告管理软件。

如果解决方案成本不高，我准备购买。

感谢您提前回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T07:45:41.073

stackoverflow 刚刚为他们的广告实施[了 BanManPro](http://www.banmanpro.com/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T07:30:38.707

你可以考虑

[http://www.xigla.com/absolutebmnet/index.htm](http://www.xigla.com/absolutebmnet/index.htm)

单个站点大约 200 美元

# c# - 如何根据 4 个基本条件进行搜索？

> ID：828285
> 
> 赞同：1
> 
> 时间：2009-05-06T06:27:40.013
> 
> 标签：c#

我正在开发一个应用程序来根据 4 个搜索条件执行搜索：

*   关键字（文本框）
*   经验（下拉列表）
*   位置（文本框）
*   功能区（下拉列表）

没有必填字段，那么如何执行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T07:23:32.517

如果我理解了这个问题......如果您可以访问 LINQ，那么它就变得简单了：

（如果您使用的是 LINQ-to-Objects，请替换`IQueryable<T>`为）`IEnumerable<T>`

```
IQueryable<YourType> query = ctx.SomeObjects;

if(!string.IsNullOrEmpty(name)) {
    query = query.Where(x => x.Name == name);
}
if(activeOnly) {
    query = query.Where(x => x.IsActive);
}
if(minDate != DateTime.MinValue) {
    query = query.Where(x => x.Date >= minDate);
}
if(maxDate != DateTime.MinValue) {
    query = query.Where(x => x.Date <= maxDate);
}
var results = query.ToList(); 
```

如果您正在使用常规 ADO.NET 与数据交谈，您可以使用动态查询组合，或者您可以调用在内部执行相同操作的 SP（或类似的） - 例如（第一个）：

```
StringBuilder sql = new StringBuilder(
     "SELECT * FROM [SOME_TABLE] WHERE 1=1");
if(!string.IsNullOrEmpty(name)) {
    sql.Append(" AND [Name]=@name");
}
if(activeOnly) {
    sql.Append(" AND IsActive = 1");
}
if(minDate != DateTime.MinValue) {
    sql.Append(" AND [Date]>=@minDate");
}
if(maxDate != DateTime.MinValue) {
    sql.Append(" AND [Date]<=@maxDate");
}
// create connection, create command, add parameters, use ExecuteReader etc 
```

# sql - 在指定行设置列值

> ID：828286
> 
> 赞同：0
> 
> 时间：2009-05-06T06:28:44.770
> 
> 标签：sql

如何在指定行设置列值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T06:37:22.330

要了解有关 SQL 的更多信息：http: [//www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)

有关插入的更多信息：http: [//www.w3schools.com/sql/sql_insert.asp](http://www.w3schools.com/sql/sql_insert.asp)

有关更新的更多信息：http: [//www.w3schools.com/sql/sql_update.asp](http://www.w3schools.com/sql/sql_update.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T06:33:21.933

不确定您是尝试插入新行还是更新满足特定条件的行。如果第二个是真的，你需要：

```
UPDATE table_name 
SET column1 = value, column2 = value2 
WHERE some_column = some_value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T06:56:25.390

尝试查看 UPDATE 而不是 INSERT。

# java - Java - 等待并通知所有

> ID：828288
> 
> 赞同：7
> 
> 时间：2009-05-06T06:29:46.450
> 
> 标签：java, wait

当您在未等待的对象上调用 notifyAll 方法时会发生什么？应该有例外还是正常情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T06:54:00.310

正如您在此处看到的，在未等待的对象上调用 notifyAll() 没有任何效果。

![替代文字](https://www.fh-wedel.de/%7Esi/vorlesungen/java/OOPMitJava/Multithreading/threadStates.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-06T06:32:25.523

这是完全正常的。您只能在一台显示器上通知所有等待的人。其他人都不感兴趣。您调用 notifyAll 的对象只是其他人正在等待的监视器。如果没有人在等待，则无需通知任何人

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T08:38:30.060

对象“等待”，而不是等待自己。线程是等待的那个。如果没有人在等待，没有人会醒来，也不会发生什么特别的事情。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T08:51:10.060

完全正常的情况。

假设您有一个队列，其中一个生产者线程将元素放入其中，一个消费者线程从中删除元素。

现在消费者可能已经清空了队列并且仍然忙于处理，所以没有人在等待队列变为非空。现在生产者将一个新元素添加到队列中。如果消费者正在等待，他必须调用 notifyAll() 来唤醒消费者。添加额外的逻辑来检查是否有人在等待，并且在这种情况下只调用 notifyAll() 会给场景增加相当大的（并且非常容易失败）复杂性 - 每次调用 notifyAll() 会容易得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T06:57:20.207

只有等待的对象会收到通知。Object.wait() 阻塞直到超时或通知 - 所以问题仍然是你认为非等待对象会如何或为什么会得到通知？这没有道理。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-20T16:03:46.417

我可能只是分裂头发;-) 在 notifyAll 上将线程从“等待”状态置于“运行”状态可能并不完全正确；至少不是没有通知线程做的第一件事就是重新获取监视器锁。而且由于通知的线程中只有一个可以抢到它，因此其他线程将被**阻塞**。**BLOCKED** ( **Thread.State.Blocked** ) 是线程状态。但是阻塞**与等待不同，**因为被阻塞的线程不需要另一个 notify() 信号来恢复。[*好吧，我知道虚假唤醒，但对于某些 JVM 实现来说，情况可能正好相反——错过了通知？*]

```
public class HellBoy {
    public static class MyThread extends Thread {
        static final public Object sharedLock = new Object();

        public void run() {
            synchronized (sharedLock) {
                System.out.println("Gonna wait...");
                try {
                    sharedLock.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("Woken up but sleeping with the lock");
                try {
                    Thread.sleep(2500);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("exiting and unlocking");
            }
        }
    }

    public static void main(String[] args) throws Exception {
        new MyThread().start();
        new MyThread().start();
        new MyThread().start();
        new MyThread().start();
        Thread.sleep(200);
        synchronized (MyThread.sharedLock) {
            MyThread.sharedLock.notifyAll();
        }
    }
} 
```

# windows - 使用空 BSTR 记录在哪里？

> ID：828299
> 
> 赞同：5
> 
> 时间：2009-05-06T06:32:56.647
> 
> 标签：windows, com, interop, com-interop, bstr

将空 BSTR（空 WCHAR* 指针）视为空字符串并相应地设计所有操作 BSTR 的代码至少是一种常见的做法。[这个问题](https://stackoverflow.com/questions/171641/should-there-be-a-difference-between-an-empty-bstr-and-a-null-bstr)的答案是一样的。

这种做法记录在哪里？有没有描述这个约定的官方文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T06:39:11.983

好吧，该问题的已接受答案中给出的链接是 Eric Lippert 的一篇文章，[Eric's Complete Guide To BSTR Semantics](http://blogs.msdn.com/ericlippert/archive/2003/09/12/52976.aspx)。虽然它绝对*不是*官方文档，但 Lippert 是 COM 的知名权威（尤其是在脚本领域）。

但是，[官方文档](http://msdn.microsoft.com/en-us/library/cc237580.aspx)有这样的说法：

> 没有数据元素的 BSTR 要么是空 BSTR，要么是 NULL BSTR。空 BSTR 表示存在但长度为零的数据值。NULL BSTR 表示不存在的数据值。

因此，正式地它们都是`BSTR`没有数据元素的 s，但语义略有不同（尽管没有什么可以说这两种情况需要在您的应用程序中以不同方式处理）。在这种情况下，我当然会听从 Lippert 的建议，对他们一视同仁。对我来说，他在实际实现工作方面的实际经验比官方 BSTR 文档中的一句话更重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T06:57:37.353

Michael Burr 给出了我认为应该被接受的答案。不幸的是[`BSTR`](http://msdn.microsoft.com/en-us/library/ms221069.aspx)，MSDN 中的页面没有记录这种做法。

此外，您可以从 MSDN 文档中的这些页面推断此行为：

*   [`SysFreeString`](http://msdn.microsoft.com/en-us/library/ms221481.aspx)page 报告 if `bstr`is`null`函数简单地返回。
*   [`SysStringLen`](http://msdn.microsoft.com/en-us/library/ms221240.aspx)`null`page 报告为参数传递 a`bstr`返回字符串长度为零。
*   [`SysStringByteLen`](http://msdn.microsoft.com/en-us/library/ms221097.aspx)页面报告相同的行为；`null`表示零长度。

但是，文档并不完整：

*   [`SysReAllocString`](http://msdn.microsoft.com/en-us/library/ms220986.aspx)没有提到如果`*pbstr`是会发生什么`null`。
*   [`SysReAllocStringLen`](http://msdn.microsoft.com/en-us/library/ms221533.aspx)没有提到如果`*pbstr`是会发生什么`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-03T14:05:17.710

将空 BSTR 处理为空字符串接缝是一种常见做法，但在 Microsoft 找到的技术文档实际上指出这两者之间存在**差异**。

> 对于同时引用 [MS-DTYP] 和 [MS-OAUT] 的任何文档，在线路表示上下文中指定 BSTR 必须被视为对传输的 BSTR 类型的引用，而在内存表示上下文中指定 BSTR 必须被视为引用到呈现的 BSTR 类型（[MS-DTYP] 第 2.2.5 节）。反映用于呈现的 BSTR 的术语，NULL BSTR，或 NULL 传输的 BSTR，被定义为 NULL 呈现的 BSTR 的线表示；一个空的 BSTR，或空传输的 BSTR，被定义为一个零长度的 BSTR 的线表示。**Preserving this distinction in the wire representation enables clients and servers to distinguish between NULL presented BSTRs and zero-length presented BSTRs, and thus associate possibly different, application-specific semantics to these two values.**

[https://msdn.microsoft.com/en-us/library/cc237580.aspx](https://msdn.microsoft.com/en-us/library/cc237580.aspx)

So it's up to the implementations whether they handle both equal or not.

# wcf - wcf 和 A DO 实体框架

> ID：828302
> 
> 赞同：0
> 
> 时间：2009-05-06T06:35:21.070
> 
> 标签：wcf

我们在 WCF 服务中使用 Linq to Entities。我们创建了一个 edmx 文件，其中包含自动生成的实体。在创建代理时，即使数据协定和数据成员属性存在，实体也不会出现在代理类中。我们发现问题是因为自动生成的实体是从名为 System.Data.Objects.DataClasses.EntityObject 的东西继承的，但是如果我们创建一个没有任何继承的类，则该类出现在代理中。有没有办法解决这个问题？

问候塞卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-22T04:36:38.710

我们这样做的方式是：

*   自动生成实体框架实体
*   创建要在数据合同中使用的单独类
*   编写映射代码以从一个合约类转换为实体类，然后返回

这可能有点麻烦，但它可以工作（它还将您的服务与数据库中的更改隔离开来）。在实体框架的下一个版本中，这应该会变得容易得多。

# c# - C# 4.0“动态”关键字是否使泛型变得多余？

> ID：828303
> 
> 赞同：10
> 
> 时间：2009-05-06T06:36:16.983
> 
> 标签：c#, .net, generics, reflection, dynamic

我对 C# 中的动态特性（[C#4 动态关键字 - 为什么不呢？](https://stackoverflow.com/questions/245318/c4-dynamic-keyword-why-not)）感到非常兴奋，特别是因为在我的代码的某些库部分中，我使用了很多反射。

我的问题是双重的：

**1.“动态”是否会取代泛型，如下例所示？**

泛型方法：

```
public static void Do_Something_If_Object_Not_Null<SomeType>(SomeType ObjToTest) {

        //test object is not null, regardless of its Type
        if (!EqualityComparer<SomeType>.Default.Equals(ObjToTest, default(SomeType))) {
            //do something
        }
    } 
```

动态方法（??）：

```
public static void Do_Something_If_Object_Not_Null(dynamic ObjToTest) {

        //test object is not null, regardless of its Type?? but how?
        if (ObjToTest != null) {
            //do something
        }
    } 
```

**2\. “动态”现在是否允许方法返回匿名类型，如下例所示？：**

```
 public static List<dynamic> ReturnAnonymousType() {
        return MyDataContext.SomeEntities.Entity.Select(e => e.Property1, e.Property2).ToList();
    } 
```

酷，干杯

**编辑：**

仔细考虑了我的问题，并根据答案，我发现我完全搞砸了主要的通用/动态问题。它们确实是完全不同的。所以，是的，感谢您提供的所有信息。

但是第2点呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-06T07:18:08.177

`dynamic`可能会简化有限数量的反射场景（您预先知道成员名称，但没有接口） - 特别是，它可能有助于泛型运算符（[尽管存在其他答案](http://www.yoda.arachsys.com/csharp/genericoperators.html)） - 但除了泛型运算符技巧之外，与泛型几乎没有交叉。

泛型允许您（在编译时）了解您正在使用的类型 - 相反，`dynamic`不*关心*类型。特别是-泛型允许您指定和证明*有关*类型的许多条件-即它可能实现某些接口，或者具有公共无参数构造函数。`dynamic`两者都无济于事：它不支持接口，而且比简单地不关心接口更糟糕的是，这意味着我们甚至**看不到**使用`dynamic`.

此外，`dynamic`确实是 的一个特例`object`，所以拳击开始发挥作用，但带有报复性。

实际上，您应该将使用限制在`dynamic`以下几种情况：

*   COM 互操作
*   DLR 互操作
*   *也许是*一些轻便的鸭子打字
*   *也许*一些通用运算符

对于所有其他情况，泛型和常规 C# 是要走的路。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-06T07:15:26.623

回答你的问题。**不。**

*   泛型为您提供“**算法重用**”——您编写独立于数据类型的代码。动态关键字不做任何与此相关的事情。我定义`List<T>`然后我可以将它用于字符串列表、整数等...
*   **类型安全**：整个编译时检查的争论。动态变量不会以编译时警告/错误提醒您，以防您出错，如果您尝试调用的方法丢失，它们只会在运行时爆炸。静态与动态类型之争
*   **性能**：泛型将使用值类型的算法/代码的性能提高了一个显着的数量级。它可以防止花费我们 pre-Generics 的整个装箱-拆箱周期。动态也没有为此做任何事情。

`dynamic`关键字会给你什么

*   更简单的代码（当您与 Excel 互操作时，可以说..）您不需要指定类的名称或对象模型。如果您调用正确的方法，则运行时将负责调用该方法（如果该方法当时存在于对象中）。即使未定义该方法，编译器也会让您摆脱困境。然而，这意味着这将比进行编译器验证/静态类型的方法调用要慢，因为 CLR 必须在调用动态 var 字段/方法之前执行检查。
*   动态变量可以在不同的时间点保存不同类型的对象 - 您不受特定系列或对象类型的限制。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-06T06:39:49.313

要回答您的第一个问题，泛型是在编译时解析的，在运行时是动态类型。因此在类型安全性和速度上存在一定的差异。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-06T06:47:09.280

动态类和泛型是完全不同的概念。使用泛型，您可以在编译时定义类型。它们不会改变，它们不是动态的。您只需在某个类或方法上放置一个“占位符”，以使调用代码定义类型。

动态方法是在运行时定义的。你那里没有编译时类型安全。动态类类似于您有对象引用并使用反射通过其字符串名称调用方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-06T06:49:56.560

回答第二个问题：您可以在 C# 3.0 中返回匿名类型。将类型转换为对象，返回它并使用反射来访问它的成员。动态关键字只是语法糖。

# c# - 文本框只允许字母

> ID：828309
> 
> 赞同：1
> 
> 时间：2009-05-06T06:39:17.177
> 
> 标签：c#, asp.net

我需要一些有关文本框的帮助：

文本框只允许包含字母。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T06:41:30.387

在这里查看：[如何使文本框只接受字母字符](https://stackoverflow.com/questions/790378/how-do-i-make-textbox-to-only-accept-alphabets-appear-error-if-is-not-an-alphabet/)，有一些不同的方法可供选择。

编辑：我在标签上看到我们正在谈论 asp.net，我提到的问题从 WinForms 的角度讨论了这个问题。可能是您想使用 JavaScript 中的 onKeyPress 事件来做类似的事情。

[w3schools.com 上的这篇文章](http://www.w3schools.com/jsref/jsref_onkeypress.asp)包含一个示例代码，可以完全满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T07:54:55.000

您可以为此使用正则表达式验证并使用以下正则表达式 **“^[a-zA-Z]+$”**

这是最简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T06:53:48.343

您可以使用 javascript 来过滤掉您接受的字符，但如果您可以使用 Asp.net AJAX，那么您可以将 FilteredTextBoxExtender 添加到文本框并且只允许大写和/或小写字母。

要在 Visual Studio 2008 中添加 FilteredTextBoxExtender，您可以执行以下操作：

*   在设计模式下查看页面并找到文本框
*   单击文本框右侧的箭头以打开 TextBox Tasks 菜单并选择 Add Extender。
*   然后选择 FilteredTextBoxExtender 并单击 OK
*   现在您的文本框应该在设计器中有一个可用的新属性。确保选择了文本框，然后单击 F4 打开属性设计器。
*   在属性设计器中找到新属性。它应该被命名为 YOURTEXTBOXNAME_FilteredTextBoxExtender。找到 FilterType 属性并选择 UppercaseLetters 或 LowercaseLetters。
*   如果您需要大写和小写字母，则必须直接编辑标记并将其值设置为“UppercaseLetters, LowercaseLetters”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T06:59:06.333

Javascript/JQuery 是您的朋友，可以让 UI 只接受字母。但是，您必须确保在回发时验证文本框的内容，否则您可能会在人们绕过 javascript 的地方获得不良数据。

# javascript - 如何遍历 HTML 元素中的所有属性？

> ID：828311
> 
> 赞同：51
> 
> 时间：2009-05-06T06:39:39.173
> 
> 标签：javascript, html, dom

我需要 JavaScript 代码来遍历 HTML 元素中的填充属性。

这个[Element.attributes](http://reference.sitepoint.com/javascript/Node/attributes) ref 说我可以通过索引访问它，但没有指定它是否得到很好的支持并且可以使用（跨浏览器）。

还是有其他方法？（不使用任何框架，如 jQuery / Prototype）

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-06T06:48:46.563

这适用于 IE、Firefox 和 Chrome（有人可以测试其他的吗？-谢谢，@Bryan）：

```
for (var i = 0; i < elem.attributes.length; i++) {
    var attrib = elem.attributes[i];
    console.log(attrib.name + " = " + attrib.value);
} 
```

编辑：IE 迭代*所有*有问题的 DOM 对象支持的属性，无论它们是否实际在 HTML 中定义。

您必须查看`attrib.specified`布尔属性以确定该属性是否确实存在。Firefox 和 Chrome 似乎也支持这个属性：

```
for (var i = 0; i < elem.attributes.length; i++) {
    var attrib = elem.attributes[i];
    if (attrib.specified) {
        console.log(attrib.name + " = " + attrib.value);
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-11-22T10:18:24.943

另一种方法是使用以下方法将属性集合转换为数组[`Array.from`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from)：

```
Array.from(element.attributes).forEach(attr => {
  console.log(`${attr.nodeName}=${attr.nodeValue}`);
}) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-26T16:55:13.073

如果有人对过滤版本感兴趣，或者正在尝试构建 CSS 属性选择器，请点击此处：

```
let el = document.body;
Array.from(el.attributes)
    .filter(a => { return a.specified && a.nodeName !== 'class'; })
    .map(a => { return '[' + a.nodeName + '=' + a.textContent + ']'; })
    .join('');

//outputs: "[name=value][name=value] 
```

您当然可以删除连接以检索数组或为“样式”添加过滤器，因为在大多数 Web 应用程序中，样式标签被小部件广泛操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-21T11:43:06.197

更高效

```
Array.prototype.forEach.call(elm.attributes, attr => console.log(attr)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-08T09:39:58.817

最简单的方法是使用扩展运算符。

```
const el = document.querySelector('div');

[...el.attributes].forEach((attr) => {
  console.log(attr.name + ' = ' + attr.value);
});
```

```
<div class="foo" id="bar"></div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-02T18:17:15.910

这是一个很老的问题，但是对@N-ate 的回答做出反应，这是一个遵循相同函数式编程方法的版本，它返回一个 JS 对象，其中键是属性名称，哪些值是属性的关联值：

```
Array.from(element.attributes)
    .filter(a => a.specified)
    .map(a => ({[a.nodeName]: a.nodeValue}))
    .reduce((prev, curr) => Object.assign(prev || {}, curr)) 
```

这变成了：

```
<div class="thingy verse" id="my-div" style="color: red;"><p>Hello</p></div> 
```

进入

```
{
    class: "thingy verse",
    id: "my-div",
    style: "color: red;"
} 
```

# java - 如何使用 XStream 在 XML 文件中存储多个输入

> ID：828315
> 
> 赞同：0
> 
> 时间：2009-05-06T06:40:25.333
> 
> 标签：java, xstream

我想为此编写一个程序：在一个文件夹中，我有 n 个文件；首先读取一个文件并执行一些操作，然后将结果存储在一个单独的 XML 文件中，读取的第二个文件再次执行操作并将结果保存在同一个 XML 文件中，甚至对于 n 个文件的相同过程。程序一个一个地读取所有文件，并使用 X-Stream 将每个文件的结果存储在单个 xml 文件中。请举例说明我将如何做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T07:00:43.570

使用列表属性构建一个特殊结构，将输入读入此列表并在最后序列化此列表。

```
public class MyEntityList{
  public List<MyEntity> list;
}

public static void main(..){
   MyEntityList myEntityList ...

   foreach file in directory..
      MyEntity m = deserialize xml from file
      myEntitiyList.list.add(m);

   myEntityList.serializeToXml....
} 
```

# php - 如何在 PHP 中获取 15 天/1 个月后的日期？

> ID：828332
> 
> 赞同：23
> 
> 时间：2009-05-06T06:48:59.090
> 
> 标签：php, date, date-arithmetic

在我的 PHP 代码中，我的变量“$postedDate”中有一个日期。
现在我想得到 7 天、15 天、1 个月和 2 个月后的日期。

我应该使用哪个日期功能？

输出日期格式应为美国格式。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-05-06T07:22:16.013

使用 strtotime。

```
$newDate = strtotime('+15 days',$date) 
```

$newDate 现在将在 $date 之后 15 天。$date 是 unix 时间。

[http://uk.php.net/strtotime](http://uk.php.net/strtotime)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-06T06:52:54.603

试试这个

```
$date = date("Y-m-d");// current date

$date = strtotime(date("Y-m-d", strtotime($date)) . " +1 day");
$date = strtotime(date("Y-m-d", strtotime($date)) . " +1 week");
$date = strtotime(date("Y-m-d", strtotime($date)) . " +2 week");
$date = strtotime(date("Y-m-d", strtotime($date)) . " +1 month");
$date = strtotime(date("Y-m-d", strtotime($date)) . " +30 days"); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-25T19:49:23.140

从 PHP 5.2.0 开始，`DateTime`内置类可用

```
$date = new DateTime($postedDate);

$date->modify('+1 day');

echo $date->format('Y-m-d'); 
```

[http://php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-05-23T13:12:35.030

```
$date=strtotime(date('Y-m-d'));  // if today :2013-05-23

$newDate = date('Y-m-d',strtotime('+15 days',$date));

echo $newDate; //after15 days  :2013-06-07

$newDate = date('Y-m-d',strtotime('+1 month',$date));

echo $newDate; // after 1 month :2013-06-23 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-22T17:50:50.397

这很简单；试试这个：

```
$date = "2013-06-12"; // date you want to upgade

echo $date = date("Y-m-d", strtotime($date ." +1 day") ); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-06T08:21:36.043

无论如何输入格式是什么？

1) 如果您的日期是年、月和日的数组，那么您可以 mktime (0, 0, 0, $month, $day + 15, $year) 或 mktime (0, 0, 0, $month + 1，$ 天，$ 年）。请注意，mktime 是一个智能函数，它将正确处理越界值，因此 mktime (0, 0, 0, 13, 33, 2008)（即 2008 年第 33 天第 13 个月）将返回 2 月的时间戳, 2, 2009 年。

2) 如果您的日期是时间戳，那么您只需添加 15*SECONDS_IN_A_DAY，然后将其与日期一起输出（/* 任何格式 */, $postedDate）。如果您需要添加一个月 30 天当然不会总是正常工作，因此您可以先将时间戳转换为月、日和年（使用 date() 函数），然后使用 (1)。

3）如果你的日期是一个字符串，你首先解析它，例如用strtotime()，然后做你喜欢的。

# cruisecontrol.net - 检查修改问题

> ID：828334
> 
> 赞同：1
> 
> 时间：2009-05-06T06:49:52.050
> 
> 标签：cruisecontrol.net, clearcase

我对 ccnet 的使用有疑问，我创建了一个名为“MY_Source”的测试文件夹，我把所有的源文件放在那里。所以当我运行 ccnet 时，我发现它正在检查所有不需要的文件夹的 mdifications。我只需要我的 ccnet检查特定文件夹（即 MY_Source）中的修改。因此，是否有任何其他标记需要与仅检查 VOB 中特定文件夹而不是整个 VOB 中的修改的视图路径一起提及。

2.如果发现有任何修改，也应该下载整个源文件并开始编译过程。那么如何在ccnet中进行配置。

感谢和问候麦迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T07:18:33.060

这是一个示例配置。我用于 ClearCase 的块：

```
<sourcecontrol type="clearCase">
  <viewPath>Y:\Mobi-Info\Source\Components</viewPath>
  <autoGetSource>true</autoGetSource>
  <useLabel>false</useLabel>
  <branch>main</branch>
</sourcecontrol> 
```

`viewPath`指定要检查修改的 ClearCase 视图中的根目录（在我的例子中是**Components**目录）。因此，如果您希望 CCNet 仅对您的**MY_Source**目录修改做出反应，请直接在`viewPath`.

# c# - 将 IEnumerator 转换为通用 IEnumerator 的最佳方法是什么？

> ID：828342
> 
> 赞同：31
> 
> 时间：2009-05-06T06:54:12.353
> 
> 标签：c#, enumeration, ienumerator

我正在为 C#.NET 3.5 中的自定义 ConfigurationHandler 编写自定义 ConfigurationElementCollection，并且我想将 IEnumerator 公开为通用 IEnumerator。

实现这一目标的最佳方法是什么？

我目前正在使用代码：

```
公共新 IEnumerator<GenericObject> GetEnumerator()
{
  var list = new List();
  var baseEnum = base.GetEnumerator();
  而（baseEnum.MoveNext（））
  {
    var obj = baseEnum.Current 作为 GenericObject；
    如果 (obj != null)
      list.Add(obj);
  }
  返回列表.GetEnumerator();
}

```

干杯

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-06T07:18:45.867

我不相信框架中有任何内容，但您可以轻松编写一个：

```
IEnumerator<T> Cast<T>(IEnumerator iterator)
{
    while (iterator.MoveNext())
    {
        yield return (T) iterator.Current;
    }
} 
```

`Enumerable.Cast<T>`只从 LINQ 调用然后调用结果是很诱人`GetEnumerator()`的——但是如果你的类已经实现`IEnumerable<T>`并且`T`是一个值类型，那么它就充当一个无操作，所以`GetEnumerator()`调用递归并抛出一个`StackOverflowException`. 使用`return foo.Cast<T>.GetEnumerator();`when`foo`绝对是一个*不同*的对象（它不会委托回这个对象）是安全的，但否则，您最好使用上面的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T06:57:16.027

`IEnumerable<T>`已经派生自，`IEnumerable`因此无需进行任何转换。您可以简单地对其进行强制转换......实际上它是隐含的，不需要强制转换。

```
IEnumerable<T> enumerable = GetGenericFromSomewhere();
IEnumerable sadOldEnumerable = enumerable;
return sadOldEnumerable.GetEnumerator(); 
```

使用 LINQ 反过来并不困难：

```
var fancyEnumerable = list.OfType<GenericObject>();
return fancyEnumerable.GetEnumerator(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T13:18:43.787

您可以使用`OfType<T>`和`Cast<T>`。

```
public static IEnumerable Digits()
{
    return new[]{1, 15, 68, 1235, 12390, 1239};
}

var enumerable = Digits().OfType<int>();
foreach (var item in enumerable)
    // var is here an int. Without the OfType<int(), it would be an object
    Console.WriteLine(i); 
```

要获得一个`IEnumerator<T>`而不是一个，`IEnumerable<T>`您只需拨打电话即可`GetEnumerator()`

```
var enumerator = Digits().OfType<int>().GetEnumerator(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-10T23:17:05.937

我遇到了一些评论中提到的相同的堆栈溢出问题。在我的情况下，这是因为 GetEnumerator 调用需要对 base.GetEnumerator 进行，否则您将在自己的 GetEnumerator 重新定义中循环。

这是引发堆栈溢出的代码。foreach 语句的使用调用了我试图重载的同一个 GetEnumerator 函数：

```
public new IEnumerator<T> GetEnumerator()
{
    foreach (T type in this)
    {
        yield return type;
    }
} 
```

我最终得到了原始帖子的简化版本，因为您不需要使用列表持有者。

```
public class ElementCollection<T> : ConfigurationElementCollection, IList<T>
    ...
    public new IEnumerator<T> GetEnumerator()
    {
        var baseEnum = base.GetEnumerator();
        while (baseEnum.MoveNext())
        {
            yield return baseEnum.Current as T;
        }
    }
    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-16T17:37:12.607

这对我有用。

```
IEnumerator<DataColumn> columnEnumerator = dt.Columns.Cast<DataColumn>().GetEnumerator(); 
```

# c# - 允许用户创建表的自定义查询

> ID：828356
> 
> 赞同：0
> 
> 时间：2009-05-06T06:58:05.807
> 
> 标签：c#, datatable, dataview

我正在编写一个生成单个大型信息表的程序。该表由两种类型的列组成，包含数量的列和包含属性的列。数量是可以求和的数值，属性是赋予数量值的定性值。

如果数据在数据库中的表中，我可以编写一个查询来选择特定属性和数量，并对所选属性具有相同值的数量求和。

**例子：**

桌子：

```
Quanity1    Quanity2    Quanity3    Property1   Property2   Property3
12          43            12           RED        Long      Rough
43        23            23          Blue       Short     Smooth
43        90            34           RED        Fat     Bumpy 
```

**询问：**

```
SELECT sum(Quanity1), sum(Quanity2), Property1 FROM Table Group By Property1 
```

**结果：**

```
Quanity1    Quanity2    Property1
43         23            Blue
55           133         Red 
```

我想要做的是为用户提供一个图形界面来执行此操作，而无需知道如何编写 SQL 查询或任何与此相关的代码。例如一组列表框，他们在其中选择他们想要查看的属性和数量，并显示一个表格，其中显示了带有数量总和的选定字段。稍后我可能还想为用户添加执行其他 SQL 查询的功能，例如基于特定条件的过滤等操作。我也知道以后我需要能够根据这些用户查询生成漂亮的报告。

一般来说，我对 ADO 和 .NET 很陌生。但我认为最好的方法是将我的数据导出到 System.Data.DataTable 中，然后通过为其 RowFilter 属性生成字符串来为用户创建一个创建 System.Data.DataView 的接口。虽然，对我来说，我不仅可以过滤和排序 DataTable，还可以生成另一个只包含大型主表中特定列的表或视图，这对我来说并不明显。

总的来说，这听起来像是最好的选择，还是我应该考虑另一种方法？有没有人对我应该如何实施这个有任何具体的提示或建议？我还质疑使用 LINQ 是否会更容易做到这一点。

**更新** 我很欣赏使用 Access 或其他可用工具的建议，但这真的不是一个选择。访问对于这里的用户来说太复杂了，无法弄清楚，而且比我实际需要的要复杂得多。我总是将 Access 作为高级用户的一个选项。但是我仍然想设置一个基本的查询功能，用户可以选择他们想要的列，并且软件会自动创建选择和汇总适当列的视图/查询。

除了复杂之外，Access 的另一个问题是在更改我的数据结构中的某些内容和查看报告中的更改之间有很多点击。我不希望用户必须更改某些内容，重新导出以访问，打开另一个程序，然后打开报告以查看更改的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T07:08:20.493

考虑购买现成的查询工具，而不是重新发明轮子。可以做这种事情的最便宜的是 Excel 中的 MS Access 或 MSQuery。更详细地说，您可以使用 Report Builder（如果您的数据库基于 SQL Server - 它是免费提供的）或第三方工具，例如 Business Objects 或 Brio。

如果您可以在没有紧密集成的情况下生活，这比尝试构建自己的临时查询工具要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T07:11:20.220

我也强烈推荐现成的——尤其是早期。如果以后很明显用户*确实*需要您编写自定义解决方案，那么一定要去做。但是，在早期，我认为您花费的时间和精力不值得。

# asp.net-3.5 - 如何以编程方式检测 ASP.NET 3.5？

> ID：828357
> 
> 赞同：0
> 
> 时间：2009-05-06T06:58:43.793
> 
> 标签：asp.net-3.5

我正在为 ASP.NET 创建一个诊断页面，并希望以编程方式检测服务器上是否已安装 ASP.NET 3.5。关于如何最好地做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T07:03:15.920

System.Environment.Version 为您提供 CLR 版本。
对于 ASP.NET 2.0、3.0 和 3.5，它将返回相同的 CLR 版本：2.0.50727.3053
对于 ASP.NET 4.0，CLR 版本将更改为 4.*

# actionscript-3 - 单个加载器到多个 Sprite 可能吗？

> ID：828361
> 
> 赞同：0
> 
> 时间：2009-05-06T06:59:10.437
> 
> 标签：actionscript-3

我查看了有关此主题的各种资源，在我看来，我需要为每个包含图像文件 (png) 的 Sprite 加载一个加载器。

我正在尝试制作一个 Tile Rendering System，并创建了一个 X by Y sprites 网格，但它们实际上都引用了相同的图像文件。有没有其他方法可以做到这一点？（使精灵共享同一个png数据文件）

我所做的一些示例代码。

```
// Create an array of X * Y Loaders
var cTileLoaders:Array = new Array( 100 ); // for example 10 by 10 grid
var cTiles:Array = new Array( 100 );
var nIndex:int = 0;
var nImgLoadCount:int = 0;
for ( ; 100 > nIndex; ++nIndex ) {
    cTileLoaders[ nIndex ] = new Loader();
    cTiles[ nIndex ] = new Sprite();
    // perform more sprite initialization
    ....
    cTileLoaders[ nIndex ].contentLoaderInfo.addEventListener( Event.COMPLETE, ImageLoaded
    cTileLoaders[ nIndex ].Load( new URLRequest( "some image path" ) );
}
// handler for image loaded
function ImageLoaded( eEvent:Event ):void {
    ++nImgLoadCount;
    // when all 100 sprite data are loaded
    // assuming there is no i/o error
    if ( 100 == nImgLoadCount ) { 
        cTiles[ nIndex ].addChild( cTileLoaders[ nIndex ].content );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T07:58:32.557

我认为您的情况的答案是利用您正在加载的图像中包含的位图数据，如下所示：

```
var tilesWide:uint = 10;
var tilesHigh:uint = 10;

var tileHolder:Sprite = new Sprite();
this.addChild(tileHolder);

var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImgLoaded);
loader.load(new URLRequest("tile.png"));

function onImgLoaded(e:Event):void
{
    /* Create a template bitmap to hold the image info */
    var templateBitmap:Bitmap = e.target.content;
    var templateBitmapData:BitmapData = templateBitmap.bitmapData;

    /* Loop through your tiles */
    for (var a:uint = 0; a < tilesWide; a++)
    {
        for (var b:uint = 0; b < tilesHigh; b++)
        {
            var tile:Sprite = new Sprite();
            /* Attach the template BitmapData to each tile */
            var tileBitmap:Bitmap = new Bitmap(templateBitmapData);
            tile.addChild(tileBitmap);

            tile.x = a * tile.width;
            tile.y = b * tile.height;

            tileHolder.addChild(tile);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-06T22:00:05.800

您还可以使用[SpriteFactory](http://cdmckay.org/blog/projects/spritefactory/)，这是我专门为此编写的一个小库：

```
var tilesWide:uint = 10;
var tilesHigh:uint = 10;
var tileHolder:Sprite = new Sprite();
var tilePath:String = "some/image/path.png";

var factory:SpriteFactory = new SpriteFactory();
factory.loadBitmap("tile", tilePath);

for (var a:uint = 0; a < tilesWide; a++)
{
    for (var b:uint = 0; b < tilesHigh; b++)
    {
        var tile:Sprite = factory.newSprite("tile");                        
        tile.x = a * tile.width;
        tile.y = b * tile.height;

        tileHolder.addChild(tile);
    }
} 
```

这里的优点是您可以立即使用精灵，并且一旦加载到位图，它们就会自动填充位图。

# apache-flex - Flex/AS3：为什么我未能监听模块的就绪事件

> ID：828370
> 
> 赞同：0
> 
> 时间：2009-05-06T07:03:38.757
> 
> 标签：apache-flex, actionscript-3, module

以下是代码片段

```
 var depTree:IModuleInfo=ModuleManager.getModule('modules/depTree.swf');
        if(!depTree.loaded){
            depTree.addEventListener(ModuleEvent.ERROR, onModuleError);
            depTree.addEventListener(ModuleEvent.PROGRESS,onModuleProgress);
            depTree.addEventListener(ModuleEvent.SETUP,onModuleSetup);
            depTree.addEventListener(ModuleEvent.READY,onDepTreeModuleReady);
            depTree.load();
        }

    private function onDepTreeModuleReady(event:ModuleEvent):void{
        logger.debug("depTree module was ready");
        var moduleInfo:IModuleInfo = event.currentTarget as IModuleInfo;
        Panel(component).addChild(moduleInfo.factory.create() as Module);
    } 
```

当我运行我的应用程序时，我收到“[SWF] modules/depTree.swf - 336,967 bytes after decompression”消息，所以我确定 depTree 模块已加载，depTree.read 也是如此。但是 onDepTreeModuleReady 函数似乎从未被调用过，我没有在其中收到调试消息，应用程序的 UI 也没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-04T14:47:37.133

它的 SDK 错误移至 3.4

# mysql - 从服务器上存储过程中的临时表，设置为只读

> ID：828376
> 
> 赞同：3
> 
> 时间：2009-05-06T07:06:37.970
> 
> 标签：mysql, stored-procedures, replication, innodb

我们已经建立了一个复制方案主/从，最近我们遇到了问题，因为一些用户直接在从而不是主上写，使得整个设置不一致。

为了防止这些问题再次发生，我们决定从访问从站的用户中删除插入、删除、更新等权限。问题是某些存储过程（用于读取）需要临时表。

我读到将全局变量 read_only 更改为 true 会做我想做的事情并允许存储过程正常工作（[http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html# sysvar_read_only](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_read_only)），但我不断收到错误：

> MySQL 服务器使用 --read-only 选项运行，因此无法执行此语句 (1290)

我使用的存储过程（用于测试目的）是这个：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `test_readonly` $$
CREATE DEFINER=`dbuser`@`%` PROCEDURE `test_readonly`()
BEGIN

CREATE TEMPORARY TABLE IF NOT EXISTS temp
(
`BT_INDEX` int(11),
`BT_DESC` VARCHAR(10)
);

INSERT INTO temp (BT_INDEX, BT_DESC) VALUES (222,'walou'), (111,'bidouille');

DROP TABLE temp;

END $$

DELIMITER ; 
```

创建临时表和删除表与 readonly 标志一起工作正常 - 如果我评论 INSERT 行，它运行正常 - 但每当我想从该临时表中插入或删除时，我都会收到错误消息。

我使用 Mysql 5.1.29-rc。我的默认存储引擎是 InnoDB。

在此先感谢，这个问题真的让我发疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T07:25:59.030

对于 6.0 测试版，似乎有一个关于此的错误：

> [http://bugs.mysql.com/bug.php?id=33669](http://bugs.mysql.com/bug.php?id=33669)
> 
> [2008 年 1 月 3 日 19:26] 菲利普·斯托耶夫
> 
> 说明：使用--read-only 启动服务器时，不允许更新Falcon 临时表。

您可能想在此处添加您的发现。

# c# - 如何创建二叉树

> ID：828398
> 
> 赞同：8
> 
> 时间：2009-05-06T07:16:21.817
> 
> 标签：c#, data-structures, binary-tree

我的意思不是二叉搜索树。

例如，如果我将值 1,2,3,4,5 插入到二叉搜索树中，则中序遍历将给出 1,2,3,4,5 作为输出。

但是如果我将相同的值插入到二叉树中，则中序遍历应该给出 4,2,5,1,3 作为输出。

可以使用动态数组创建二叉树，其中对于索引 n 中的每个元素，2n+1 和 2n+2 分别代表其左右子节点。

所以表示和级别顺序遍历在这里非常容易。

但我认为，按序、后序、预购是困难的。

我的问题是我们如何创建像二叉搜索树一样的二叉树。IE。有一个包含数据、左右指针而不是数组的树类。这样我们就可以递归地进行遍历。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-14T14:53:15.570

如果我理解正确，您想从数组创建二叉树

```
int[] values = new int[] {1, 2, 3, 4, 5};
BinaryTree tree = new BinaryTree(values); 
```

这应该使用值 1 - 5 预先填充二叉树，如下所示：

```
 1
   / \
  2   3
 / \
4   5 
```

这可以使用以下类来完成：

```
class BinaryTree
{
    int value;
    BinaryTree left;
    BinaryTree right;

    public BinaryTree(int[] values) : this(values, 0) {}

    BinaryTree(int[] values, int index)
    {
        Load(this, values, index);
    }

    void Load(BinaryTree tree, int[] values, int index)
    {
        this.value = values[index];
        if (index * 2 + 1 < values.Length)
        {
            this.left = new BinaryTree(values, index * 2 + 1);
        }
        if (index * 2 + 2 < values.Length)
        {
            this.right = new BinaryTree(values, index * 2 + 2);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T07:28:57.450

树类声明部分当然不是这里的难点。您在问题中基本上说明了如何声明它：

```
class BinaryTree
{
private:
    int data;
    BinaryTree *left, *right;
}; 
```

这支持各种形式的遍历，如下所示：

```
void Inorder(const BinaryTree *root)
{
  if(root == 0)
    return;
  Inorder(root->left);
  printf("now at %d\n", root->data);
  Inorder(root->right);
} 
```

您应该能够从中推断出订单前和订单后的遍历。在实际实现中，树可能会被模板化以存储随机数据，遍历例程会更通用（使用用户数据输入，或者可能是用户提供的每个节点回调，或其他），当然。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T14:15:59.233

由于我没有收到任何关于我提出的问题的答案，我将发布我自己的使用数组的二叉树实现。现在我知道数组实现比我想象的要容易，但我仍然不知道如何使用链表来实现。

代码在c#中

```
 class BinaryTree
    {
        private static int MAX_ELEM = 100;      //initial size of the array
        int lastElementIndex;
        int?[] dataArray;

        public BinaryTree()
        {
            dataArray = new int?[MAX_ELEM];
            lastElementIndex = -1;
        }

        //function to insert data in to the tree
        //insert as a complete binary tree
        public void insertData(int data)
        {
            int?[] temp;
            if (lastElementIndex + 1 < MAX_ELEM)
            {
                dataArray[++lastElementIndex] = data;
            }
            else
            {  //double the size of the array on reaching the limit
                temp = new int?[MAX_ELEM * 2];
                for (int i = 0; i < MAX_ELEM; i++)
                {
                    temp[i] = dataArray[i];
                }
                MAX_ELEM *= 2;
                dataArray = temp;
                dataArray[++lastElementIndex] = data;
            }
        }

        //internal function used to get the left child of an element in the array
        int getLeftChild(int index) {
            if(lastElementIndex >= (2*index+1))
                return (2*index + 1);
            return -1;
        }

        //internal function used to get the right child of an element in the array
        int getRightChild(int index) {
            if(lastElementIndex >= (2*index+2))
                return (2*index + 2);
            return -1;
        }
        //function to check if the tree is empty
        public bool isTreeEmpty() {
            if (lastElementIndex == -1)
                return true;
            return false;
        }

        //recursive function for inorder traversal
        public void traverseInOrder(int index) {
            if (index == -1)
                return;
            traverseInOrder(getLeftChild(index));
            Console.Write("{0} ", dataArray[index]);
            traverseInOrder(getRightChild(index));
        }

        //recursive function for preorder traversal
        public void traversePreOrder(int index) {
            if (index == -1)
                return;
            Console.Write("{0} ", dataArray[index]);
            traversePreOrder(getLeftChild(index));
            traversePreOrder(getRightChild(index));
        }

        //recursive function for postorder traversal
        public void traversePostOrder(int index) {
            if (index == -1)
                return;
            traversePostOrder(getLeftChild(index));
            traversePostOrder(getRightChild(index));
            Console.Write("{0} ", dataArray[index]);
        }

        //function to traverse the tree in level order
        public void traverseLevelOrder()
        {
            Console.WriteLine("\nPrinting Elements Of The Tree In Ascending Level Order\n");
            if (lastElementIndex == -1)
            {
                Console.WriteLine("Empty Tree!...press any key to return");
                Console.ReadKey();
                return;
            }
            for (int i = 0; i <= lastElementIndex; i++)
            {
                Console.Write("{0} ", dataArray[i]);
            }
            Console.WriteLine("\n");
        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T16:09:31.440

如果您正在寻找全面的 BinaryTree 实现的源代码，您可以从[The C5 Generic Collection Library](http://www.itu.dk/research/c5/)中学习。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-14T05:08:46.603

```
 class BstNode
    {
        public int data;
        public BstNode(int data)
        {
            this.data = data;
        }
        public BstNode left;
        public BstNode right;
    }
    class Program
    {
        public static BstNode Insert(BstNode root, int data)
        {
            if (root == null) root = new BstNode(data);
            else if (data <= root.data) root.left = Insert(root.left, data);
            else if (data > root.data) root.right = Insert(root.right, data);

            return root;
        }

public static void Main(string[] args)
        {
            // create/insert into BST
            BstNode Root = null;
            Root = Insert(Root, 15);
            Root = Insert(Root, 10);
            Root = Insert(Root, 20);
            Root = Insert(Root, 8);
            Root = Insert(Root, 12);
            Root = Insert(Root, 17);
            Root = Insert(Root, 25);
         }

} 
```

# sql - 对于 Microsoft.NET 应用程序，Oracle 存储过程是否比内联 SQL 更快？

> ID：828399
> 
> 赞同：1
> 
> 时间：2009-05-06T07:16:37.510
> 
> 标签：sql, oracle, stored-procedures, odp.net

我们正在开发一个使用 Oracle 9i 作为后端的 Visual Studio.NET 2008 应用程序。存储过程的使用是否会比内联 SQL 更快？这是与我的合作程序员的一场辩论。

我们正在使用 Oracle 的 ODP.NET（Oracle Data Provider for .NET）。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T07:25:19.267

虽然我很想回答“不”或“我不这么认为”，但要知道这个问题的答案的唯一真正方法是自己**去测量它**。使用像 JetBrains dotTrace 这样的分析器和 TOAD 自己的分析器来找出答案。

所有其他答案都是推测性的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T07:38:15.587

它应该是。当您将内联 SQL 发送到数据库时，引擎必须对其进行解析并执行。存储过程在创建时被解析（和编译）。所以至少你正在获得解析时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T08:34:06.480

我希望存储过程在几乎所有情况下都更快。
但这主要取决于您的代码。
例如，如果您从数据库中获取结果集，然后使用此数据执行其他查询，那么您最终会在网络流量中产生大量开销。如果您忘记对请求使用单个连接，则尤其如此。
然后，使用单个存储过程返回聚合数据可能会更有效（当然，如果可能的话）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T07:24:35.837

如果您构建存储过程（PL/SQL 包）以减少在数据库和客户端之间传输的数据的方式，它会更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T13:23:37.347

[Jon Limjap](https://stackoverflow.com/questions/828399/are-oracle-stored-procedures-faster-than-in-line-sql-for-a-microsoft-net-applicat/828418#828418)说：“所有其他答案都是推测性的。”

这句话有很多道理。有这么多因素：数据库服务器是如何设置的？网络速度/可靠性如何？SQL 怎么样？PL/SQL 怎么样？如果我愿意，我可以编写非常慢的 SQL 和/或 PL/SQL（并且在过去的项目中无意中拥有！）。因此，如果可以，请尝试两者。

# perl - HTML::StripScripts 对于删除现代漏洞仍然安全吗？

> ID：828400
> 
> 赞同：3
> 
> 时间：2009-05-06T07:17:59.177
> 
> 标签：perl, security, xss

我需要一种在 Perl 中去除顽皮东西的方法，例如 XSS、图像插入和作品。

我找到了[HTML::StripScripts](http://search.cpan.org/dist/HTML-StripScripts)，但它已经有近两年没有更新了，而且我也不了解所有新的漏洞。

安全吗？

您会使用哪些其他标记语言（在 Perl 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T07:35:02.393

XSS 是一个广泛的话题，每隔一天就会出现漏洞。

仅删除脚本不会使您的代码/站点安全。

最好不要尝试剥离（黑名单）某些东西。将您允许在您的网站上的 html/特殊字符列入白名单更为安全。IE`<b>, <i>`

[Defang](http://search.cpan.org/~kurianja/HTML-Defang-1.01/lib/HTML/Defang.pm)似乎是 cpan 上 perl 的最新/最好的反 XSS 库

[黑名单与白名单](http://michaelcoates.wordpress.com/2007/12/19/cross-site-scripting-blacklist-protection/)

[OWASP XSS 备忘单](http://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)

我建议使用[CAL9000](http://www.owasp.org/index.php/Category:OWASP_CAL9000_Project)来了解 XSS 的广泛性/棘手程度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-03T17:02:41.107

HTML::StripScripts 是一个白名单，可以使用基于树的解析器，应该和白名单一样安全。

# .net - 如何在 SQLServer 2000 中将数据传输到其他数据库！

> ID：828413
> 
> 赞同：1
> 
> 时间：2009-05-06T07:22:45.093
> 
> 标签：.net, sql-server

我有两个数据库，DB1 和 DB2。如何在 SQL Server 2000 中将 DB1 特定表的数据传输到 DB2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T07:26:19.513

使用 DTS 怎么样？

[http://msdn.microsoft.com/en-us/library/cc917688.aspx](http://msdn.microsoft.com/en-us/library/cc917688.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T07:57:32.293

如果您需要通过代码（.NET 标记）执行此操作，那么`SqlBulkCopy`您的朋友就是您的朋友 - 理想情况`ExecuteReader`下与源代码混合。[像这样](https://stackoverflow.com/questions/565732/copy-from-one-database-table-to-another-c/565830#565830)：

```
using (SqlConnection connSource = new SqlConnection(csSource)) // source db
using (SqlCommand cmd = connSource.CreateCommand())
using (SqlBulkCopy bcp = new SqlBulkCopy(csDest)) { // destination db
    bcp.DestinationTableName = "SomeTable"; // destination table
    cmd.CommandText = "SELECT * FROM [Foo]"; // source table
    cmd.CommandType = CommandType.Text;
    connSource.Open();
    using(SqlDataReader reader = cmd.ExecuteReader()) {
        bcp.WriteToServer(reader);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T07:27:42.570

右键单击 DB2 和 Tasks-> Import 将启动 DTS 向导。这很简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T07:28:03.160

有关此转移的一些其他上下文将很有用。例如，这是一次性传输、常规传输、您希望为 DB1 中的每个事务维护的东西还是其他东西。

我将假设这是一次性或周期性发生的，因此，我建议在 SQL Server 2000 中使用数据转换服务 (DTS)：

[http://msdn.microsoft.com/en-us/library/cc917688.aspx](http://msdn.microsoft.com/en-us/library/cc917688.aspx)

# ruby-on-rails - 具有更改设置的 AR Mailer？

> ID：828422
> 
> 赞同：2
> 
> 时间：2009-05-06T07:26:06.753
> 
> 标签：ruby-on-rails, ruby, email, mailer, ar-mailer

我们现在正在我们的一个项目中运行 ARMailer。它工作正常，但由于允许不同的客户通过此服务发送确认电子邮件，我们希望为他们提供使用他们自己的 SMTP 设置的可能性。

有没有办法即时更改 ARMailer 设置？

或者是否有一个 ARMailer 替代方案可以更好地抽象这个？

谢谢

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T18:57:33.970

this: [Using multiple SMTP accounts with Rails & ActionMailer](http://broadcast.oreilly.com/2009/03/using-multiple-smtp-accounts-w.html) 有一个很好的例子，使用 yaml 来存储多个配置，但可以很容易地适应使用 db

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T06:30:25.093

我最终所做的是：我拿走了 ARMailer gem 并复制了一份。之后，修改电子邮件传递操作并从我的新自定义文件夹启动守护程序。工作正常。总有一天会创建一个自定义...

# unit-testing - 什么时候可以更改“已完成”的单元测试？

> ID：828427
> 
> 赞同：9
> 
> 时间：2009-05-06T07:28:25.810
> 
> 标签：unit-testing

我已经迈出了单元测试的第一步，并且由于对域的更好理解，我对破坏单元测试的域模型进行了更改。所以这就提出了一个问题：

**什么时候可以更改以前工作的单元测试？**

我想我在不得不问这个问题时错过了单元测试的一个重要方面......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T07:33:59.277

对于“正确”的 TDD，您首先更改测试，*然后*更改代码。

所以实际上你*从来*没有破坏过的测试，只有破坏的代码。您应该始终努力使测试成为正确功能的明确表达，因此是先验正确的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T07:35:47.150

每个特定单元测试的重点不是它永远不会中断，而是只要它测试的功能也有效，它就会继续工作。这样，对已测试功能的意外更改会导致您发现的测试失败，而不是最终用户。

如果该功能是故意更改的，那么您应该会看到一些测试中断。如果你不这样做，那么你在测试套件中没有足够的功能覆盖。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-06T07:31:12.700

当您进行破坏测试的更改时：

1) 首先查明测试现在是否被破坏，或者您的更改是否破坏了它不应该有的测试。

2）。如果是前者，请修复测试。否则修复您的更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T07:38:52.947

当需求发生变化时。无论您是否更改代码，然后查看哪些测试因什么原因中断（如 Mitch 建议的那样），或者更改您的测试然后更改您的代码（如 Visage 所暗示的），测试只会在功能*应该*改变的情况下发生变化做一些不同的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-06T07:39:29.873

每次你需要。

*   如果测试变得不准确或不再遵循规范，则应更改测试。
*   如果测试变得无关紧要，则应将其删除。

关键是，您的测试应该准确地描述您的软件应该如何工作。诚然，这将有点难以维护，而且确实这是 TDD 的最大障碍之一，仅次于测试优先编程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T08:38:24.397

测试是程序行为的规范。当您需要更改规范时，您会更改它们，因为它们是规范。我想到的一些...

*   当代码要求发生变化并且测试与新行为不匹配时，您应该更新它们。
*   当某些要求过时时，应删除指定该行为的测试。

测试代码需要具备的主要品质是可读性。因此，您应该定期更改测试，因为...

*   如果一个测试难以阅读并且不能揭示程序员的每一个意图，则应该对其进行重构以提高其可读性。

还有一些测试被破坏的情况，例如并发代码的脆弱测试，即使代码是正确的，大多数情况下也会通过但偶尔会失败。在这种情况下，测试应该被修复为更可重复（它可能需要更改代码以更容易测试 - 最好的办法是避免/限制使用合适的设计模式的并发）。

# access-denied - PSEXEC，访问被拒绝错误

> ID：828432
> 
> 赞同：78
> 
> 时间：2009-05-06T07:30:58.473
> 
> 标签：access-denied, psexec, windows-scripting

当我使用 PSEXEC.exe 时，远程系统出现“访问被拒绝”错误。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-31T16:05:16.640

嗨，我在这里从许多在线来源汇总了“拒绝访问”的各种解决方案：大多数信息都可以在此处找到（包括所需的要求） [-sysinternal 帮助](http://forum.sysinternals.com/topic15919.html)

1.  正如有人提到的那样，添加这个 reg 密钥，然后重新启动计算机：

    > 注册添加 HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f

    阅读[这篇知识库文章](https://support.microsoft.com/en-us/kb/947232)，了解它的作用以及为什么需要它

2.  禁用防火墙（注意 - 这将使您没有任何防火墙保护）

    > netsh advfirewall 设置 allprofiles 状态关闭

3.  如果目标用户有一个空白 PW 而您不想添加一个，请在目标上运行：

    > [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa] "LimitBlankPasswordUse"=dword:00000000

4.  这对我不起作用，但我在几个地方读过它对其他人有用，目标执行：

    > 开始 -> 运行 -> secpol.msc -> 本地策略 -> 安全选项 -> 网络访问：共享 > 本地帐户的安全模型 > 经典 - 本地用户以自己的身份进行身份验证

    如果已经在“经典”中：

    > 移动到“仅限访客 - ..”从提升的命令提示符 gpupdate \force 运行回到“经典 - ..”再次从提升的命令提示符 gpupdate \force 运行

5.  这个解决了我的问题：

    > 从提升的命令提示符“net use”在目标上运行查看输出图表和远程列中列出的共享（我只删除了断开连接的共享 - 你可以全部尝试）运行“net use [remote path from before list] /delete " 然后运行 ​​'net use \target\Admin$ /user:[user name]' 输入提示密码请求（如果为空 PW 只需按 Enter 键），viola 应该可以工作。

祝你好运，希望这可以节省某人的时间。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2011-12-25T15:20:30.137

我刚刚通过创建注册表值`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system\LocalAccountTokenFilterPolicy`并将其设置为 1解决了相同的症状。[更多详细信息可在此处获得](https://docs.microsoft.com/en-us/troubleshoot/windows-server/windows-security/user-account-control-and-remote-restriction)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-10-15T09:45:36.107

[这](http://forum.sysinternals.com/psexec-access-denied-when-using-explicit-logon_topic17497.html)对我有帮助：

```
cmdkey.exe /add:<targetname> /user:<username> /pass:<password>
psexec.exe \\<targetname> <remote_command> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-05-06T08:37:33.260

PsExec has whatever access rights its launcher has. It runs under regular Windows access control. This means whoever launched PsExec (be it either you, the scheduler, a service etc.) does not have sufficient rights on the target machine, or the target machine is not configured correctly. The first things to do are:

1.  Make sure the launcher of PsExec is familiar to the target machine, either via the domain or by having the same user and password defined locally on both machines.
2.  Use command line arguments to specify a user that is known to the target machine (-u user -p password)

If this did not solve your problem, make sure the target machine meets the minimum requirements, [specified here](https://social.technet.microsoft.com/Forums/en-US/0f02208a-feae-4914-9f2d-56c2d71484f9/psexec-could-not-start?forum=pstools).

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-07T03:45:24.137

你可以试试命令

```
net use \\computername\ipc$ /user:adminname password 
```

在使用 psexec 之前获得远程 PC 上的管理员权限。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-05T11:04:48.973

尝试在目标（远程）机器上设置此键，然后重新启动机器：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System]
"LocalAccountTokenFilterPolicy"=dword:00000001 
```

请参阅：http: [//forum.sysinternals.com/topic10924.html](http://forum.sysinternals.com/topic10924.html)和[http://www.brandonmartinez.com/2013/04/24/resolve-access-is-denied-using-psexec-with-a-local-管理员帐户/](http://www.brandonmartinez.com/2013/04/24/resolve-access-is-denied-using-psexec-with-a-local-admin-account/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-09-26T18:42:20.393

我有同样的问题。经过一番努力，我找到了一个简单而完整的解决方案：

1.  我使用**runas**在管理员帐户中运行脚本
2.  我使用**psExec**中的 -s 参数在系统帐户中运行
3.  在 PsExec 中，我**再次**使用管理员帐户登录
4.  您可以使用**& 运行多个命令**
5.  请记住将 [USERNAME]、[PASSWORD]、[COMPUTERNAME]、[COMMAND1] 和 [COMMAND2] 替换为实际值

代码如下所示：

```
runas /user:[USERNAME] "psexec -e -h -s -u [USERNAME] -p [PASSWORD] \\[COMPUTERNAME] cmd /C [COMMAND1] & [COMMAND2]" 
```

如果您想在另一台机器上调试脚本，请运行以下模板：

```
runas /user:[USERNAME] "psexec -i -e -h -s -u [USERNAME] -p [PASSWORD] \\[COMPUTERNAME] cmd /C [COMMAND1] & [COMMAND2] & pause" 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-04-29T06:38:42.267

我刚刚添加了“-с”参数。它使 Psexec 复制可执行到远程机器。因此它可以正常工作而不会出现访问错误。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-03-12T21:16:32.410

我发现 Sophos 一直将 psexec.exe 放入 Quarantine 部分。一旦我授权它，它运行良好。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-04-08T11:43:01.297

我有一个案例，AV 正在隔离 Psexec - 必须禁用按访问扫描

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-01-17T14:57:40.387

我找到了 PSEXEC（和其他 PS 工具）失败的另一个原因 - 如果某些东西（...比如说，病毒或木马）隐藏了 Windows 文件夹和/或其文件，那么 PSEXEC 将失败并出现“访问被拒绝”错误，PSLIST将给出错误“找不到处理器性能对象”，而您将一无所知。

您可以在 RDP 中；您可以访问 admin$ 共享；您可以远程查看驱动器内容等，但没有迹象表明文件或文件夹被隐藏是原因。

我将把这些信息发布在昨天我正在阅读的几页上，同时试图确定这个奇怪问题的原因，所以你可能会在其他地方逐字看到这个 - 只是以为我会在其他人拔掉头发之前把这个词说出来从根本上试图理解为什么性能计数器与 PSEXEC 运行有关。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-11-11T07:39:58.857

`psexec`即使在 win 10 上，我仍然使用。将`psexec.exe`Windows 10`win32`文件夹中的 替换为旧版本即可使用 -> 我使用版本 2.11.0.0。我使用的 Windows 10 版本只会在远程计算机上将 .bat 文件作为后台/隐藏进程运行。花了一整天才弄清楚这一点。

从上面添加注册表项到远程计算机也有帮助：

```
 reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-04-01T13:01:29.763

以下工作，但只有在我从 Microsoft 将 PSEXEC 升级到 2.1 之后。

> [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System] "LocalAccountTokenFilterPolicy"=dword:00000001 参见：http: [//forum.sysinternals.com/topic10924.html](http://forum.sysinternals.com/topic10924.html)

我有一个稍旧的版本，但无法正常工作。我用它通过戴尔 kace 做一些 USMT 工作，工作很愉快 :)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-01-15T21:45:38.457

For anybody who may stumble upon this. There is a recent (Dec 2013) Security Update from Microsoft Windows on Windows 7 that is preventing remote execution. See [http://support.microsoft.com/kb/2893294/en-us](http://support.microsoft.com/kb/2893294/en-us)

I uninstalled the Security Update by going to Control Panel\Programs\Programs and Features\Installed Updates

It worked right after that.

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-07-20T13:01:35.560

在 Windows Server 2012 R2 上，我无法从用户帐户运行

```
psexec -u administrator -p password \\machinename -h -s -d -accepteula cmd.exe 
```

但是如果你不带参数运行它就可以了`-h -s`。这就是为什么我用它来解决我的问题：

```
psexec -accepteula -u administrator -p password \\machinename %PathToLocalUtils%\psexec.exe -h -s -d  cmd.exe 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-24T12:21:30.947

*除非我禁用了UAC*，否则我无法访问远程机器。

这必须在本地完成，无论是从控制面板还是通过 cmd 运行以下命令：

```
reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d 0 /f 
```

*启用UAC*后，请确保以**管理员身份运行***cmd*。

 *** * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-03-27T21:47:28.367

我尝试了很多方法，但我无法使用*psexec*。它给出“拒绝访问”。将目标用户帐户类型从**Standard**更改为**Admin**后，我通过 psexec 连接了机器。

我研究了需要管理员类型帐户的原因，然后我找到[了这个答案。](https://serverfault.com/questions/280482/how-to-use-psexec-without-admin-privileges-on-target-machine#answer-280756)

您可以通过以下方式更改目标机器用户帐户：控制面板 -> 用户帐户 -> 更改帐户类型。如果您登录标准帐户，则必须输入管理员帐户和密码才能更改该帐户。

之后，我使用以下命令登录：`psexec \\remotepcname -u remoteusername -p remotepassword cmd`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-06-29T09:01:12.433

对于不同的命令，我决定将网络从公共更改为工作。
再次尝试使用 psexec 命令后，它再次起作用。
因此，要让 psexec 工作，请尝试将您的网络类型从公共更改为工作或家庭。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-11-03T04:14:27.727

尝试了上述所有建议，但仍然无法解决错误。最后，一旦我进行了以下更改，我就可以成功运行 PSexec 命令。

事实证明，当您启用 UAC 时，psexec 无法按预期工作。我们需要设置`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System\EnableLUA`为 0，然后 psexec 开始按预期工作。

# sharepoint - Sharepoint 的默认登录域

> ID：828439
> 
> 赞同：0
> 
> 时间：2009-05-06T07:35:08.090
> 
> 标签：sharepoint, authentication, login, wss

使用 Windows 身份验证 (NTLM) 运行 Sharepoint (WSS 3.0) 时，外部用户必须以*DOMAIN\username*的形式提供其用户名。这是有道理的，因为您可以拥有多个域、它们之间的信任等。但是在我的情况下，我只有一个域，并且我希望我的用户能够仅使用他们的纯用户名登录。有没有办法使用默认登录域配置 Sharepoint 以使其正常工作？

将身份验证更改为基本或表单不是我的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T13:22:50.123

这是一个 Windows/IIS 问题，而不是特定于 sharepoint 的问题。

[您可以在http://forums.iis.net/t/1151401.aspx](http://forums.iis.net/t/1151401.aspx)找到更详细的解释，但由于集成身份验证的设计，基本上不可能 - 客户端在联系服务器之前必须知道域。

您最接近默认域的是服务器上的本地登录 - 如果用户是真正的外部用户，这可能是一个解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T13:57:43.847

意识到可以将某些浏览器配置为自动提供 NTLM 凭据。例如，IE 可以做到这一点。我相信默认情况下它适用于本地 Intranet 中的站点，甚至可能适用于受信任的站点（如果不是，您可以更改它以便它会）。

如果用户的计算机是您域的一部分，则有软件可以将这些设置（策略）推送给用户。

# c++ - 如果变量是 C++ 中的类、结构或基本类型，有没有办法编译时断言？

> ID：828442
> 
> 赞同：1
> 
> 时间：2009-05-06T07:37:29.877
> 
> 标签：c++, templates, typechecking

我正在尝试实现一个模板类，它能够告诉我变量是类、结构还是基本类型。

到目前为止，我已经有了这个：

```
template< typename T >
class is_class
{
private:
    template< typename X >
    static char ( &i_class( void(X::*)() ) )[1];
    //
    template< typename X >
    static char ( &i_class( X ) )[2];
public:
    static bool const val = sizeof( i_class< T >(0) ) == 1;
}; 
```

和用法：

```
is_class< int >::val; // false
is_class< some_class_type >::val; // true 
```

问题是现在我需要在可以与此代码一起使用的每个类中编写一个空白 void 函数。

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T07:53:42.413

`is_class`是 Boost.Type_Traits 库的成员。该实现可能与您已经拥有的类似。如果合适，您可以与 结合使用`enable_if`来创建函数：

```
template <class T>
   typename enable_if_c<boost::is_class<T>::value>::type 
     foo() {  } 
```

或等价物：

```
template <class T>
   typename enable_if<boost::is_class<T>>::type 
     foo() {  } 
```

该函数`foo`仅在类型`T`为类类型时生成。

函数的返回值，如果生成的话，是`enable_if`模板的第二个参数（省略）（默认为`void`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T07:42:44.390

使用 boost 的[类型特征](http://www.boost.org/doc/libs/1_38_0/libs/type_traits/doc/html/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T07:45:09.750

如果它只是在编译时断言，你可以使用`BOOST_STATIC_ASSERT`Boost.TypeTraits[来](http://www.boost.org/doc/libs/1_38_0/libs/type_traits/doc/html/index.html)检查类型是否合适。如果您想为特定类型启用模板，您可能会成功使用 Boost 的[enable_if](http://www.boost.org/doc/libs/1_38_0/libs/utility/enable_if.html)。

# c# - 在我的网络中查找 IP 地址

> ID：828443
> 
> 赞同：0
> 
> 时间：2009-05-06T07:37:35.510
> 
> 标签：c#

如何在我的内部网络 juz 中找到所有 ipaddress，如 IPMSG？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T07:53:36.000

[Enumerate All the IP Addresses on the Network W/O ActiveDirectory](http://www.codeproject.com/KB/IP/ipaddresses.aspx)应该有你需要的信息。代码在 C# 中。

阅读文章的评论以获得一些额外的想法。

# c# - 按下“TAB”键时聚焦下一个控件

> ID：828445
> 
> 赞同：1
> 
> 时间：2009-05-06T07:37:57.177
> 
> 标签：c#, datagridview

我有一个 DataGridView，我在其中使用`Tab`键导航时手动管理聚焦的单元格。例如，当最后一行的第一个单元格是可以在 DataGridView 中导航的最后一个单元格时，我希望在按下`Tab`焦点转到下一个可聚焦控件（按钮）时。

SendKeys.Send("{TAB}") 将不起作用 - 焦点将转到最后一行的第二个单元格

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T07:47:47.387

如果将该`StandardTab`属性设置为 True，则 Tab 键的行为将从移动到下一个网格单元格变为移动到窗体上的下一个控件。这可能是你想要的。

如果您想控制哪个网格单元格/列/行获得焦点，那么您可以处理代码中的`ProcessDialogKey`和`ProcessDataGridViewKey`事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T07:43:12.640

您是否尝试过[SelectNextControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.selectnextcontrol.aspx)方法？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T07:51:58.767

就像 Rune Grimstad 所说，如果您想要除默认提供的选项卡或 StandardTab 之外的任何选项卡行为，您将必须实现自己的选项卡行为。

创建一个继承自 DataGridView 的新类。

```
protected override bool ProcessDialogKey(Keys keyData)
{
    case Keys.Tab | Keys.Shift:
        // implement your logic here.
        break;
    case Keys.Tab:
        // implement your logic here.
        break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T07:43:50.127

```
Control nextControl = this.dataGridView1.Parent.GetNextControl(this.dataGridView1, true);
Control prevControl = this.dataGridView1.Parent.GetNextControl(this.dataGridView1, false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-09T22:19:57.323

您可以简单地使用[DataGridView 的 StandardTab 属性](https://msdn.microsoft.com/en-us/library/cccah80b(v=vs.110).aspx)。

```
dataGridView1.StandardTab = true; 
```

请注意，用户可以使用带有`CTRL`+`TAB`组合的非 StandardTab 来执行此操作，StandardTab 会反转此行为。

# sql - 如何在另一列中插入一系列键

> ID：828452
> 
> 赞同：0
> 
> 时间：2009-05-06T07:40:05.207
> 
> 标签：sql, sql-server, tsql

我刚才一片空白。我与三个表有多对多的关系。我们称它们为 A、B 和 C。C 存储其他两个表的主键。

现在，我想将表 A 中的所有主键插入表 C 中，假设 B 中的主键 1 插入表 C。我只是不明白。我想出的只是一些存储过程，它使用游标通过 A 的所有主键运行，并将它们与 1 插入到 C 中。猜猜，有一种更简单的方法可以做到这一点。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T07:49:14.467

我会说：

```
INSERT INTO C
SELECT A_Id, 1
FROM A 
```

其中 1 是来自 的单个主键`B`。

[在此处](http://msdn.microsoft.com/en-us/library/ms174335.aspx)查看有关该`INSERT`声明的更多信息。

# html - HTML 网站开发：用于导航和菜单的 div 与 ul

> ID：828453
> 
> 赞同：5
> 
> 时间：2009-05-06T07:40:12.757
> 
> 标签：html, css, code-organization

我正在开发一个 Web 2.0 站点，并且一直在研究站点如何处理菜单和导航栏。许多网站（如 twitter）使用 UL，而诸如 stackoverflow 之类的网站使用 div，它们是包含链接的 ID。

除了消除一些 IE 错误之外，不使用 UL 是否有优势？

使用 UL 有优势吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-06T07:44:06.773

这取决于您如何看待它，UL代表无序列表。将事物放入 UL 元素是一种语义方式，即元素 children ( `<li>`) 是列表项，因此是一个逻辑组。这比一堆 div 标签赋予了 html 块更多的结构/意义。

菜单是列表吗？我认同。因此，如果您可以为这样的事情选择 ul。

ul 可能更难用 css 设置样式，尤其是当菜单是水平的时。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-06T07:49:26.603

我个人使用 ul/li 来满足我所有的菜单需求，因为即使是无样式的浏览器（例如链接）也可以清楚地知道它是某种菜单，并且它们是通向网站上不同部分的各种链接。

不仅如此，标记非常简单，并且允许使用 ul、li 和 a 来完成非常有趣的事情，使用带有各种选项的 CSS 和 CSS sprite 背景来制作很棒的菜单。

使用 div 也可以实现这一点，但会使意图变得不那么清晰。使用正确 CSS 布局的浏览器，您不会注意到差异，唯一知道的是您和执行视图源的用户。

如果您需要使用 javascript 解析 dom，它可能会有所不同，它可能不会......

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-06T07:45:43.990

UL 对屏幕阅读器更友好，并且是一种强制您保持菜单与其他 html 无关的方法。如果你愿意的话，li-tags 基本上可以像 div 一样处理。

所以基本上区别在于 ul-tag 更专业一些，但可以提供与 div 基本相同的东西。

# iphone - 如何在不连接设备而仅使用设备 ID 的情况下安装我们的 iPhone 项目？

> ID：828454
> 
> 赞同：0
> 
> 时间：2009-05-06T07:40:13.333
> 
> 标签：iphone, objective-c

我想只使用设备 ID 构建我的 iPhone 应用程序，而不将设备连接到我的苹果电脑。我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T15:07:16.760

如果我没看错您的问题，您想在不实际连接手机的情况下将应用程序放在手机上吗？

如果是这样，那是不可能的。您必须连接手机才能加载您开发的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T06:39:40.990

您是否建议您不想在发布之前在真实设备上测试您的应用程序？请不要那样做。在设备或模拟器上测试应用程序时存在很多差异。

如果您想在不将设备连接到 Mac 的情况下为临时测试创建构建，您可以通过简单地为临时测试创建一个 mobileprovision 文件来实现，您可以在其中指定多达 100 个设备 ID。为此，您需要成为 Apple Developer Program 的成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T10:27:08.253

你可以使用模拟器，永远不要在设备上开发。你是这个意思吗？在那种情况下，当我从应用商店购买该应用时，我不想成为您的客户之一 - 会有很多缺陷。

如果您不是那个意思，您将如何在您的设备上获取该应用程序？我很困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T11:22:05.610

如果您是注册的 iPhone 开发人员，您可以通过定义您希望应用程序使用的设备 ID 创建 Ad Hoc 分发（步骤在苹果开发人员网站的“程序门户用户指南”中列出）。然后您可以通过 iTunes 在您的设备上安装该应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-05T15:58:10.543

好吧，您不能仅根据设备编号或其他内容进行安装。有两种解决方案： 1/但你可以在不插电的情况下将你的应用程序发布到一些测试平台上，如 TestFlight 或 Answers。您输入用户的电子邮件地址，他们就可以收到电子邮件。2/您可以设置一个配置文件来声明您的 OS X 服务器地址。并将 iPhone 添加到您的服务器开放目录中。然后，您可以将应用程序发送并部署到 iPhone 设备。如果您有未来的问题，请发表评论。

# mysql - 导轨窗口问题

> ID：828455
> 
> 赞同：0
> 
> 时间：2009-05-06T07:40:33.677
> 
> 标签：mysql, ruby-on-rails

我刚刚在windows上的rails上安装了ruby。

安装mysql并创建一个新项目。然后我更改了 database.yml 以使用我自己的 mysql 服务器，如下所示

开发：适配器：mysql 数据库：mytools 用户名：test 密码：test

当我尝试访问故事控制器（[http://localhost:3000/stories](http://localhost:3000/stories)）时，错误显示

“SQLite3::SQLException：没有这样的表：故事：SELECT * FROM “故事””

为什么我会收到此错误？我没有使用mysql...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T07:45:54.600

默认情况下，Rails 创建和使用 SQLite 数据库而不是 MySQL。

您可以在创建 Rails 应用程序时使用 -d 标志指定要使用的数据库。例如，使用 mysql 作为数据库创建一个名为“sample”的 rails 应用程序：

```
rails sample -d mysql 
```

取自[Rails 入门](http://guides.rubyonrails.org/getting_started.html#creating-the-blog-application)指南。

您可能还想查看同一文档中有关[配置 MySQL 数据库的部分。](http://guides.rubyonrails.org/getting_started.html#configuring-a-mysql-database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T07:47:57.153

据我所知——虽然我很久以前在 Rails 中编码，但那里有 3 个独立的数据库：开发、生产和测试。也许您正在尝试使用测试或生产并且您没有配置它们？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T14:34:21.403

您是否尝试在网络服务器上重新启动？

检查 RAILS_ENV 是否设置为生产，如果是，请将其设置为开发：

```
set RAILS_ENV=development 
```

# perl - 如何在 Perl 中 sprintf 一个大数字？

> ID：828462
> 
> 赞同：4
> 
> 时间：2009-05-06T07:43:00.863
> 
> 标签：perl, printf, bignum

在 Windows 32 位平台上，我必须阅读一些数字，这是出乎意料的，它们的值可能高达 99,999,999,999，但仅此而已。尝试对`sprintf("%011d", $myNum)`它们输出溢出：-2147483648。

我不能使用 BigInt 模块，因为在这种情况下，我应该深入更改代码。我无法将格式管理为字符串, `sprintf("%011s", $numero)`，因为减号处理不正确。

我该如何管理？打包/解包会有所帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T11:18:54.837

尝试将其格式化为没有小数部分的浮点数：

```
$ perl -v
This is perl, v5.6.1 built for sun4-solaris
...

$ perl -e 'printf "%011d\n", 99999999999'
-0000000001

$ perl -e 'printf "%011.0f\n", 99999999999'
99999999999 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T08:48:22.203

是的，Perl 的数字盲点之一是格式化。Perl 会自动很好地处理将数字表示为整数或浮点数，但是当使用`printf`数字格式时，即使不合适，也会将它们强制转换为其中一种。并且`printf`根本不真正处理 BigInts（除非将它们视为字符串并将其转换为数字，但会丢失精度）。

使用 %s 而不是 %d 与您不确定是否在适当范围内的任何数字是一个很好的解决方法，除非您注意负数。要处理这些，您将不得不编写一些 Perl 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-23T09:52:12.987

在一定程度上，浮点数可以工作。

```
perl -e "printf qq{%.0f\n}, 999999999999999"
999999999999999 
```

但仅在一定程度上

```
perl -e "printf qq{%.0f\n}, 9999999999999999999999999999999999999999999999"
9999999999999998663747590131240811450955988992 
```

Bignum 在这里没有帮助。

```
perl -e "use bignum ; printf qq{%.0f\n}, 9999999999999999999999999999999999999999999999"
9999999999999999931398190359470212947659194368 
```

问题是printf。（你真的需要 printf 吗？） print 可以工作吗？

```
perl -e "use bignum;print 9999999999999999999999999999999999999999999999"
9999999999999999999999999999999999999999999999 
```

说了这么多，关于 perl 的好处是它始终是您自己的选项。

例如

```
my $in = ...;
my $out = "";
while($in){
  my $chunk=$in & 0xf;
  $in >>= 4;
  $out = sprintf("%x",$chunk).$out;
}
print "0x$out\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T07:51:15.460

我不是 Perl 专家，也许我在这里错过了某种对 bignums 的自动处理，但这不只是整数溢出的情况吗？32 位整数不能容纳 99,999,999,999 这样大的数字。

无论如何，我在我的 32 位 Linux 机器上使用 Perl v5.8.8 得到了相同的结果，而且带有 "%d" 的 printf 似乎不能处理更大的数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T08:30:39.623

我认为您的 Perl 副本必须被破坏，这是来自 CygWin 的版本（5.10）：

```
pax$ perl -e 'printf("%011d\n", 99999999999);'
99999999999

pax$ perl -v

This is perl, v5.10.0 built for cygwin-thread-multi-64int
(with 6 registered patches, see perl -V for more detail)

Copyright 1987-2007, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page. 
```

您正在运行什么版本（输出`perl -v`）？

您可能需要获得支持 64 位的 Perl 版本 [可能还有新的 64 位生产机器]（请注意`"cygwin-thread-multi-64int"`我的输出中的 ）。这至少可以避免更改代码的需要。

我是在您不想大幅更改代码的基础上说明这一点的（即，您害怕破坏事物）。新硬件的解决方案虽然有点贵，但几乎可以肯定根本不需要您更改*软件*。这取决于您的优先事项。

另一种可能性是 Perl 本身可能正确地存储了数字，但由于存在`printf()`缺陷而只是显示错误。在这种情况下，您可能想尝试：

```
$million = 1000000;
$bignum = 99999999999;
$firstbit = int($bignum / $million);
$secondbit = $bignum - $firstbit * million;
printf ("%d%06d\n",$firstbit,$secondbit); 
```

把它放在一个函数中并调用该函数以返回一个字符串，例如：

```
sub big_honkin_number($) {
    $million = 1_000_000;
    $bignum = shift;
    $firstbit = int($bignum / $million);
    $secondbit = $bignum - $firstbit * $million;
    return sprintf("%d%06d\n", $firstbit, $secondbit);
}
printf ("%s", big_honkin_number (99_999_999_999)); 
```

请注意，我在 64 位平台上对此进行了测试——您需要在 32 位平台上进行自己的测试，但您可以使用您想要的任何缩放因子（如果需要，包括两个以上的段）。

**更新：**这个`big_honkin_number()`技巧在 32 位 Perl 上运行良好，所以看起来它*只是*让你感到厌烦的`printf()`函数：

```
pax@pax-desktop:~$ perl -v

This is perl, v5.8.8 built for i486-linux-gnu-thread-multi

Copyright 1987-2006, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.

pax@pax-desktop:~$ perl qq.pl
99999999999 
```

# c# - 对象的可空类型

> ID：828464
> 
> 赞同：2
> 
> 时间：2009-05-06T07:43:30.907
> 
> 标签：c#

使用 dotnet 2.0。以下代码的风格可以改进吗？

```
 private object GetObj_Version1(int? num)
    {
        return num ?? (object)DBNull.Value;
    } 
```

演员阵容对我来说有点乱。下面的版本 2 避免了演员表，但它冗长：

```
 private object GetObj_Version2(int? num)
    {
        object numObj;
        if (num.HasValue)
            numObj = num.Value;
        else
            numObj = DBNull.Value;

        return numObj;
    } 
```

你能想出一个既短又避免演员表的替代方案吗？TIA。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T07:47:30.477

在这种情况下，演员表在运行时什么也不做——它纯粹是为编译器而存在的。如果你真的讨厌它，也许：

```
 static readonly object NullObject = DBNull.Value;
    private object GetObj_Version1(int? num)
    {
        return num ?? NullObject;
    } 
```

但我会自己留下。顺便说一句 - 因为无论如何你都要装箱，你可以省去超载，只需使用`object`- 那么你甚至不需要该`static`字段：

```
 private object GetObj_Version1(object value)
    {
        return value ?? DBNull.Value;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T07:46:21.370

如果要向数据库插入值，则可以直接将可为空的类型作为过程的参数传递。

```
param.Add("@Param1", nullableParam); 
```

# windows-ce - 我可以在普通 PC 上运行 Windows Embedded CE 6.0 吗？

> ID：828468
> 
> 赞同：1
> 
> 时间：2009-05-06T07:44:41.187
> 
> 标签：windows-ce

由于我只需要硬 RT 功能，我可以在普通 PC 上安装和运行 Windows Embedded CE 6.0 吗？（戴尔左右？），以及UDP输出一些数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T08:30:42.230

You can install Windows CE in a PC, but you would need to create your own image. See this [tutorial](http://msdn.microsoft.com/en-us/library/ms905319.aspx) in MSDN. Also google for CEPC.

Finally visit [Mike Hall's blog](http://blogs.msdn.com/mikehall/). I remember reading a related article there, but I can't find it now. Anyhow, this blog is a great resource for Windows Embedded.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T08:00:09.353

（从使用 Windows CE 5.0 开始，因此可能存在一些差异，YMMV。）

您应该能够在模拟器中运行 Windows CE 并作为主机操作系统安装在设备本身上。

在第一种情况下，您只需要一个模拟器，它随开发工具包提供，并且在更昂贵的 Visual Studio 版本中。这将使操作系统运行良好，尽管根据您选择为其构建来宾操作系统的体系结构会有点慢。

在第二种情况下，您实际上需要为要运行和使用的硬件查找或编写驱动程序。这将需要 Platform Builder 应用程序（我相信它现在是 Visual Studio 的插件）和您正在运行的硬件的知识。Windows CE 本身确实支持 x86 处理器，尽管我不记得它是支持所有 x86 处理器（指令集）还是仅支持 486。

如果您想走第二条路线，您还可以获得 Intel Atom 或 AMD Geode 板支持包 (BSP)，这将帮助您开发驱动程序。

# performance - 对接口而不是实现进行编码是否意味着性能下降？

> ID：828476
> 
> 赞同：4
> 
> 时间：2009-05-06T07:47:00.633
> 
> 标签：performance, oop, interface

在日常程序中，我什至不会考虑针对接口而不是实现进行编码可能对性能造成的影响。优势在很大程度上超过了成本。因此，请不要对良好的 OOP 提出一般性建议。

尽管如此，在[这篇](http://forums.xna.com/forums/p/30645/173406.aspx#173406)文章中，XNA（游戏）平台的设计者作为他的主要论点给出了没有针对可能会影响性能的接口设计他的框架的核心类。看到它是在游戏开发的背景下，每个 fps 都可能很重要，我认为这是一个有效的问题来问自己。

有人有这方面的统计吗？我看不到测试/测量这个的好方法，因为不知道我应该记住这样一个游戏（图形）对象的含义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T07:55:29.693

对接口进行编码总是会更容易，因为接口如果做得好，会简单得多。使用接口编写正确的程序显然更容易。

正如那句古老的格言所说，让一个正确的程序快速运行比让一个快速的程序正确运行更容易。

因此，对界面进行编程，让一切正常工作，*然后*进行一些分析以帮助您满足您可能有的任何性能要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T08:06:35.440

首先，我要说的是，通常的概念是程序员的时间通常更重要，并且当实现发生变化时，与实现相反的工作可能会迫使更多的工作。

其次，使用适当的编译器/Jit 我会假设与针对实现本身工作相比，使用接口需要花费非常少的额外时间。此外，模板等技术可以将接口代码从运行中移除。

第三引用 Knuth 的话：“我们应该忘记小的效率，大约 97% 的时间说：过早的优化是万恶之源。”
所以我建议先好好编码，只有当你确定接口有问题时，我才会考虑改变。

另外我会假设，如果这种性能影响是真的，大多数游戏都不会使用 C++ 的 OOP 方法，但事实并非如此，本文对此进行了[详细](http://www.gamearchitect.net/Articles/WhyC++.html)说明。

很难以一般的形式谈论测试，当然一个糟糕的程序可能会在糟糕的接口上花费大量时间，但我怀疑这是否适用于所有程序，所以你真的应该查看每个特定的程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T08:17:25.663

[托管代码的成本](http://msdn.microsoft.com/en-us/library/ms973852.aspx)

“静态调用、实例调用、虚拟调用或接口调用的原始成本似乎没有显着差异。”

这取决于在编译时有多少代码被内联或不内联，这可以将性能提高约 5 倍。

对接口进行编码也需要更长的时间，因为您必须对合约（接口）进行编码，然后再对具体实现进行编码。

但是以正确的方式做事总是需要更长的时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T20:38:44.350

接口通常意味着对性能的一些影响（但这可能会根据所使用的语言/运行时而改变）：

1.  接口方法通常通过编译器的虚拟调用来实现。正如另一位用户指出的那样，编译器无法内联这些，因此您失去了潜在的收益。此外，他们至少添加了一些指令（跳转和内存访问）以在代码段中获得正确的 PC。
2.  多种语言中的接口也暗示了一个图，并且需要一个 DAG（有向无环图）来正确管理内存。在各种语言/运行时，您实际上可以通过循环图在托管环境中获得内存“泄漏”。这对系统中的垃圾收集器/内存施加了很大的压力（显然）。注意循环图！
3.  某些语言使用 COM 样式接口作为其底层接口，每当接口分配给本地接口或按值传递给函数（用于生命周期管理）时，都会自动调用 AddRef/Release。这些 AddRef/Release 调用可以加起来并且非常昂贵。一些语言已经考虑到这一点，并且可能允许您将接口作为“const”传递，这不会自动生成 AddRef/Release 对，从而减少这些调用。

这是一个循环图的小示例，其中 2 个接口相互引用，并且由于它们的引用计数始终大于 1，因此不会自动收集任何一个。

```
interface Parent {
  Child c;
}

interface Child {
  Parent p;
}

function createGraph() {
  ...
  Parent p = ParentFactory::CreateParent();
  Child c = ChildFactory::CreateChild();

  p.c = c;
  c.p = p;      
  ...  // do stuff here

  // p has a reference to c and c has a reference to p.  
  // When the function goes out of scope and attempts to clean up the locals
  // it will note that p has a refcount of 1 and c has a refcount of 1 so neither 
  // can be cleaned up (of course, this is depending on the language/runtime and
  // if DAGS are allowed for interfaces).  If you were to set c.p = null or
  // p.c = null then the 2 interfaces will be released when the scope is cleaned up.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T07:59:12.243

我认为对象生命周期和您正在创建的实例数量将提供一个粗略的答案。

如果您谈论的是具有数千个实例且生命周期较短的东西，我想用结构而不是类可能会更好，更不用说实现接口的类了。

对于更像组件的东西，实例数量少，寿命中等到长，我无法想象它会产生很大的不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-16T10:07:14.050

IMO 是的，但出于基本的设计原因，它比虚拟调度或类似 COM 的接口查询或运行时类型信息所需的对象元数据或类似的东西要微妙和复杂得多。所有这些都会产生开销，但这在很大程度上取决于所使用的语言和编译器，还取决于优化器是否可以在编译时或链接时消除此类开销。然而，在我看来，为什么对接口进行编码意味着（而不是保证）性能下降有一个更广泛的概念原因：

> 对接口进行编码意味着您与要访问和转换的具体数据/内存之间存在障碍。

这是我看到的主要原因。作为一个非常简单的示例，假设您有一个抽象的图像界面。它完全抽象出它的具体细节，比如它的像素格式。这里的问题是，通常最有效的图像操作需要那些具体的细节。我们无法使用有效的 SIMD 指令来实现自定义图像过滤器，例如，如果我们必须`getPixel`一次一个，一次`setPixel`一个，而忽略底层像素格式。

当然，抽象图像可以尝试提供所有这些操作，并且这些操作可以非常有效地实现，因为它们可以访问实现该接口的具体图像的私有内部细节，但只要图像存在接口提供了客户想要对图像做的一切。

通常在某些时候，一个接口不能希望为整个世界提供所有可以想象的功能，因此，当这些接口面临性能关键问题同时需要满足广泛的需求时，往往会泄露它们的具体细节。例如，抽象图像可能仍然通过一种方法提供指向其底层像素的指针，这种`pixels()`方法在很大程度上违背了对接口进行编码的许多目的，但在性能最关键的领域往往成为必需品。

总的来说，许多最高效的代码通常必须在某种程度上针对非常具体的细节编写，例如专门为单精度浮点编写的代码、专门为 32 位 RGBA 图像编写的代码、专门为 GPU 编写的代码，特别是针对 AVX-512，特别是针对移动硬件等。因此，至少对于我们目前拥有的工具而言，存在一个基本障碍，我们无法将所有这些都抽象出来，而只是将代码编码到一个没有隐含惩罚的接口。

当然，如果我们可以编写代码，我们的生活会变得容易得多，而忽略所有这些具体细节，例如我们是在处理 32 位 SPFP 还是 64 位 DPFP，我们是否在有限的移动设备上编写着色器或高端桌面，并让所有这些都是最具竞争力的高效代码。但我们离那个阶段还很远。我们当前的工具仍然经常要求我们针对具体细节编写性能关键代码。

最后，这是一种粒度问题。自然，如果我们必须逐个像素地处理事物，那么任何抽象出像素具体细节的尝试都可能导致严重的性能损失。但是，如果我们在图像级别表达诸如“alpha 将这两个图像混合在一起”之类的内容，即使存在虚拟调度开销等等，这也可能是一个非常微不足道的成本。因此，当我们致力于更高级别的代码时，通常对接口编码的任何隐含性能损失都会减少到变得完全微不足道的程度。但是总是需要低级代码来做一些事情，比如逐个像素地处理事情，每帧循环数百万次，并且接口编码的成本可以带来相当大的成本。重罚，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T07:52:20.543

在我个人看来，所有真正繁重的图形处理工作都交给了 GPU。这些可以释放你的 CPU 来做其他事情，比如程序流和逻辑。我不确定在对界面进行编程时是否会影响性能，但考虑到游戏的本质，它们不需要可扩展。也许是某些类，但总的来说，我认为游戏不需要在编程时考虑到可扩展性。所以继续，编写实现代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T18:55:13.600

> 这意味着性能受到影响

设计师应该能够证明他的观点。

# visual-studio-2008 - ReSharper 卸载 - Visual Studio 不再显示正确的错误突出显示

> ID：828477
> 
> 赞同：70
> 
> 时间：2009-05-06T07:47:08.560
> 
> 标签：visual-studio-2008, resharper, uninstallation

我一直在试用 ReSharper，并决定卸载它。但是，在这样做之后，Visual Studio 不再显示它通常用来识别代码中错误位置的红色下划线突出显示。

到目前为止，这已经发生在我们的两台 PC 上。我试过重新安装和修复，但没有运气。有什么想法可以恢复 Visual Studio 中的突出显示吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2009-05-06T07:56:17.727

转到**Tools → Options → Text Editor → C# → Advanced**，检查以下选项：

*   下划线编辑器中的错误
*   显示实时语义错误

![替代文字](https://i.stack.imgur.com/lO3Je.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-13T21:25:25.373

事实上，Resharper（从 8.1 开始）破坏的不仅仅是错误高亮设置。例如，卸载后 XAML 文件的自动完成功能被破坏；并且根据 Resharper 的支持，其他各种键绑定也被破坏了。我强烈怀疑 Visual Studio 2012 以各种方式被卸载彻底破坏。

在 Visual Studio 2012 中，解决方案似乎是将所有 Visual Studio 设置重置为默认值。

转到“工具”菜单，选择“导入和导出设置...”。选择“重置所有设置”单选按钮，然后单击“下一步”。

单击“下一步”后，系统将提示您输入保存当前（已损坏）设置的位置。有趣的是，“导出设置”对话框的默认目录指向一个已被 Resharper 安装程序孤立的目录。恰好那里已经有一个导出文件。尝试恢复该设置文件可能会很有趣。我的日期似乎是或大约在我安装 Resharper 的时间。我怀疑这是他们的安装程序生成的保存文件（但被他们的卸载程序忽略）。

反正。重置对我有用。如果您有勇气，您可以尝试使用 Resharper 安装程序留下的导出文件。

一般投诉（因为我对这一切感到非常恼火......到目前为止，StackExcange 上此页面的浏览量已超过 11,000 次，在该线程启动 3 年后）。Resharper 技术支持有一个四年前的错误报告，涵盖了卸载造成的损害。四年后，它仍然没有修复。根据我粗略的粗略计算，我猜想他们的演示版本的 Resharper 卸载已经破坏了大约 30,000 名开发人员的 Visual Studio。它被丢弃了。让没有错误。尽管不是立即显而易见，但 Visual Studio 的主要功能已被禁用，结果是一个完全无法用于开发的 Visual Studio 实例。粗制滥造。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-06T07:54:35.873

转到工具 -> 选项并在环境下选择字体和颜色节点。

选择显示文本编辑器的设置并在显示项目列表框中查找项目“语法错误”并修复设置。

另一种选择可能是使用相同选项表单顶部的“使用默认值”按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-15T16:08:12.860

我有一个类似的问题 - 不确定它是否是由 Resharper 卸载带来的 - 它通过安装 VS 2008 SP 1 得到修复。

[http://www.microsoft.com/downloads/details.aspx?FamilyId=FBEE1648-7106-44A7-9649-6D9F6D58056E&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=FBEE1648-7106-44A7-9649-6D9F6D58056E&displaylang=en)

# testing - 是否有支持 VBScript 的 Web 界面测试工具？

> ID：828478
> 
> 赞同：1
> 
> 时间：2009-05-06T07:47:09.917
> 
> 标签：testing, vbscript, automated-tests

我必须对基于 Web 的旧遗留工具进行测试，并大量使用 VBScript，而不是 JavaScript。所以，是的，它是一个仅限 IE 的工具。

通常，我倾向于使用 WebTest 来执行此类测试，但它不支持 VBScript，因此在这种情况下无法使用。

那么，有没有支持 VBScript 的测试框架呢？（请，请，请！！！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-24T21:06:33.237

有一个名为 TestComplete 的商业工具可让您使用 VBScript 进行 Web 测试。请参阅[网页](http://www.testcomplete.com)了解更多详情。

# matlab - 神经网络优化 w/ 遗传算法

> ID：828486
> 
> 赞同：11
> 
> 时间：2009-05-06T07:51:08.613
> 
> 标签：matlab, neural-network, mathematical-optimization, genetic-algorithm

遗传算法是优化隐藏节点数量和人工神经网络训练量的最有效方法吗？

我正在使用 Matlab 中的 NNToolbox 对神经网络进行编码。我对优化技术的任何其他建议持开放态度，但我最熟悉 GA。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T08:21:20.973

实际上，您可以使用 GA 对 NN 进行优化。您可以优化结构（节点数、层数、激活函数等）。您也可以使用 GA 进行训练，这意味着设置权重。

遗传算法永远不会是最有效的，但它们通常在您不知道要使用什么数字时使用。

对于训练，您可以使用其他算法，包括反向传播、[nelder-mead](http://en.wikipedia.org/wiki/Nelder-Mead_method)等。

您说您想优化隐藏节点的数量，为此，遗传算法可能就足够了，尽管远非“最佳”。您正在搜索的空间可能太小而无法使用遗传算法，但它们仍然可以工作并且 afaik，它们已经在 matlab 中实现，所以没什么大不了的。

优化完成的训练量是什么意思？如果您的意思是时期数，那很好，只要记住训练在某种程度上依赖于起始权重并且它们通常是随机的，因此用于 GA 的适应度函数实际上并不是一个函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-07-03T02:45:41.323

神经网络和遗传编程的一个很好的例子是 NEAT 架构（增强拓扑的神经进化）。这是一种寻找最优拓扑的遗传算法。它还擅长减少隐藏节点的数量。

他们还用它制作了一款名为 Nero 的游戏。相当独特和非常惊人的有形结果。

斯坦利博士的主页：

[http://www.cs.ucf.edu/~kstanley/](http://www.cs.ucf.edu/~kstanley/)

Here you'll find just about everything NEAT related as he is the one who invented it.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T09:30:15.317

遗传算法可以有效地应用于优化神经网络，但你必须考虑一下你想要做什么。

大多数“经典”神经网络训练算法，例如反向传播，只优化神经元的权重。遗传算法可以优化权重，但这通常效率低下。但是，正如您所问的，它们可以优化网络的拓扑结构以及您的训练算法的参数。但是，您必须特别警惕创建“过度训练”的网络。

使用改进的遗传算法的另一种技术可用于克服反向传播的问题。反向传播通常会找到局部最小值，但它会准确快速地找到它们。将遗传算法与反向传播相结合，例如，在拉马克 GA 中，具有两者的优点。[在GAUL 教程](http://gaul.sourceforge.net/tutorial/nn.html)中简要介绍了此技术

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-09-05T00:04:22.573

It is sometimes useful to use a genetic algorithm to train a neural network when your objective function isn't continuous.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T08:07:28.730

我不确定您是否应该为此使用遗传算法。

我想您的遗传算法的初始解决方案群体将包括您的神经网络的训练集（给定特定的训练方法）。通常，初始解决方案群体由您的问题的随机解决方案组成。然而，随机训练集并不能真正训练你的神经网络。

遗传算法的评估算法将是所需训练量、神经网络解决特定问题的质量和隐藏节点数量的加权平均值。

因此，如果您运行此程序，您将获得在神经网络质量（= 训练时间、隐藏节点数量、网络的问题解决能力）方面提供最佳结果的训练集。

还是您正在考虑采用完全不同的方法？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T08:30:14.867

我不完全确定你正在处理什么样的问题，但 GA 在这里听起来有点矫枉过正。根据您使用的参数范围，详尽的（或其他不智能的）搜索可能会起作用。尝试绘制关于前几个值的隐藏节点数量的 NN 性能，从小处开始并以越来越大的增量跳跃。以我的经验，许多神经网络的性能出乎意料地早早地趋于稳定。您可能能够很好地了解隐藏节点编号的范围最有意义。

NN 的训练迭代通常也是如此。更多的训练在一定程度上有助于网络，但很快就不再有太大的影响。

在大多数情况下，这些 NN 参数不会以非常复杂的方式影响性能。通常，增加它们会在一段时间内提高性能，但随后会出现收益递减。在这种简单曲线上找到一个好的值并不是真正需要 GA ；如果隐藏节点（或训练迭代）的数量确实会导致性能以复杂的方式波动，那么像 GA 这样的元启发式算法可能是合适的。但在采取这条路线之前，请先尝试一下蛮力方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T09:42:20.857

我倾向于说遗传算法是一个好主意，因为您可以从最小解决方案开始并增加神经元的数量。您想要为其找到最佳点的“质量函数”很可能是平滑的并且只有很少的颠簸。

如果您必须经常找到此最佳 NN，我建议您使用优化算法，并在您的情况下使用数值配方中描述的准牛顿，这对于函数评估成本高昂的问题是最佳的。

# python - Python - 保存上下文

> ID：828494
> 
> 赞同：1
> 
> 时间：2009-05-06T07:52:51.587
> 
> 标签：python, serialization, pickle

我需要在退出之前保存程序的上下文......我已经将所有需要的东西放到了我之前创建的对象中，我尝试了很多次来挑选它，但没有办法！我不断有错误，如：

*   PicklingError：无法腌制“SRE_Match”对象：<_sre.SRE_Match object at 0x2a969cd9c0>

*   OSError: [Errno 1] Operation not allowed: [我引用的文件是 rwx for all]

我使用的代码是：

```
f = open ("/xxxx/yyyy/toto/titi/important_stuff//impo/tmp/contest.obj", 'w').close()
os.chmod("/xxxx/yyyy/toto/titi/important_stuff//impo/tmp/contest.obj", 0777)
f = open ("/xxxx/yyyy/toto/titi/important_stuff//impo/tmp/contest.obj", 'w')
pickle.dump(useCaseList, f) 
```

有谁知道我该如何解决这些问题或有其他解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T08:27:36.263

请参阅 python 文档[What can be pickle 和 unpickled](http://docs.python.org/library/pickle.html#what-can-be-pickled-and-unpickled)。您有无法腌制的对象。

# vba - 如何检索这台计算机的 IP 地址？

> ID：828496
> 
> 赞同：11
> 
> 时间：2009-05-06T07:53:27.140
> 
> 标签：vba, excel, msinet

检索机器 IP 地址（打开的第一个接口）的最简单（模块包含、代码长度等）方法是什么？我知道一些使用 MSINET 的解决方案，但我相信我们可以做得更好。不回复

```
Function HomeIP() as Atring
HomeIP= "127.0.0.1"
End Function 
```

因为它不是那么有趣……或者正确。该场景是一个关于我试图为其建立回复的[文档 ID 功能的问题。](https://stackoverflow.com/questions/730052/implement-auto-increment-with-word-macro)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-06-04T11:34:38.573

[这是来自Technet](http://www.microsoft.com.nsatc.net/technet/scriptcenter/scripts/network/client/list/nwlsvb01.mspx?mfr=true)的改编示例：

```
Function GetIPAddress()
    Const strComputer As String = "."   ' Computer name. Dot means local computer
    Dim objWMIService, IPConfigSet, IPConfig, IPAddress, i
    Dim strIPAddress As String

    ' Connect to the WMI service
    Set objWMIService = GetObject("winmgmts:" _
        & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

    ' Get all TCP/IP-enabled network adapters
    Set IPConfigSet = objWMIService.ExecQuery _
        ("Select * from Win32_NetworkAdapterConfiguration Where IPEnabled=TRUE")

    ' Get all IP addresses associated with these adapters
    For Each IPConfig In IPConfigSet
        IPAddress = IPConfig.IPAddress
        If Not IsNull(IPAddress) Then
            strIPAddress = strIPAddress & Join(IPAddress, ", ")
        End If
    Next

    GetIPAddress = strIPAddress
End Function 
```

它要求您在项目的引用中有 Microsoft WMI 脚本库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T08:18:11.603

我发现了几个例子：-

[http://www.everythingaccess.com/tutorials.asp?ID=Get-all-IP-Addresses-of-your-machine](http://www.everythingaccess.com/tutorials.asp?ID=Get-all-IP-Addresses-of-your-machine)

[http://puremis.net/excel/code/079.shtml](http://puremis.net/excel/code/079.shtml)

编辑

这是第一个链接的代码，稍作修改

```
Option Explicit

' VBA MODULE: Get all IP Addresses of your machine
' (c) 2005 Wayne Phillips (http://www.everythingaccess.com)
' Written 18/05/2005
'
' REQUIREMENTS: Windows 98 or above, Access 97 and above
'
' Please read the full tutorial here:
' http://www.everythingaccess.com/tutorials.asp?ID=Get-all-IP-Addresses-of-your-machine
'
' Please leave the copyright notices in place.
' Thank you.
'
'Option Compare Database

'A couple of API functions we need in order to query the IP addresses in this machine
Public Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (Destination As Any, Source As Any, ByVal Length As Long)
Public Declare Function GetIpAddrTable Lib "Iphlpapi" (pIPAdrTable As Byte, pdwSize As Long, ByVal Sort As Long) As Long

'The structures returned by the API call GetIpAddrTable...
Type IPINFO
    dwAddr As Long         ' IP address
    dwIndex As Long         ' interface index
    dwMask As Long         ' subnet mask
    dwBCastAddr As Long     ' broadcast address
    dwReasmSize As Long    ' assembly size
    Reserved1 As Integer
    Reserved2 As Integer
End Type

Public Function ConvertIPAddressToString(longAddr As Long) As String

    Dim IPBytes(3) As Byte
    Dim lngCount As Long

    'Converts a long IP Address to a string formatted 255.255.255.255
    'Note: Could use inet_ntoa instead

    CopyMemory IPBytes(0), longAddr, 4 ' IP Address is stored in four bytes (255.255.255.255)

    'Convert the 4 byte values to a formatted string
    While lngCount < 4

        ConvertIPAddressToString = ConvertIPAddressToString + _
                                    CStr(IPBytes(lngCount)) + _
                                    IIf(lngCount < 3, ".", "")

        lngCount = lngCount + 1

    Wend

End Function

Public Function GetFirstNonLocalIPAddress()

    Dim Ret As Long, Tel As Long
    Dim bytBuffer() As Byte
    Dim IPTableRow As IPINFO
    Dim lngCount As Long
    Dim lngBufferRequired As Long
    Dim lngStructSize As Long
    Dim lngNumIPAddresses As Long
    Dim strIPAddress As String

On Error GoTo ErrorHandler:

    Call GetIpAddrTable(ByVal 0&, lngBufferRequired, 1)

    If lngBufferRequired > 0 Then

        ReDim bytBuffer(0 To lngBufferRequired - 1) As Byte

        If GetIpAddrTable(bytBuffer(0), lngBufferRequired, 1) = 0 Then

            'We've successfully obtained the IP Address details...

            'How big is each structure row?...
            lngStructSize = LenB(IPTableRow)

            'First 4 bytes is a long indicating the number of entries in the table
            CopyMemory lngNumIPAddresses, bytBuffer(0), 4

            While lngCount < lngNumIPAddresses

                'bytBuffer contains the IPINFO structures (after initial 4 byte long)
                CopyMemory IPTableRow, _
                            bytBuffer(4 + (lngCount * lngStructSize)), _
                            lngStructSize

                strIPAddress = ConvertIPAddressToString(IPTableRow.dwAddr)

                If Not ((strIPAddress = "127.0.0.1")) Then

                    GetFirstNonLocalIPAddress = strIPAddress
                    Exit Function

                End If

                lngCount = lngCount + 1

            Wend

        End If

    End If

Exit Function

ErrorHandler:
    MsgBox "An error has occured in GetIPAddresses():" & vbCrLf & vbCrLf & _
            Err.Description & " (" & CStr(Err.Number) & ")"

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T08:12:33.147

您可以执行 shell 命令`ipconfig`并解析返回的结果吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T15:49:52.703

还有另一种使用 ipconfig 的简单方法。 [http://www.vbaexpress.com/kb/getarticle.php?kb_id=537](http://www.vbaexpress.com/kb/getarticle.php?kb_id=537)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T08:31:19.420

Codeproject 有一篇关于如何使用 .net 执行此操作的好文章：http: [//www.codeproject.com/KB/cs/network.aspx](http://www.codeproject.com/KB/cs/network.aspx)

您总是可以从中创建一个控制台可执行文件，并从 VBA 调用它。

反渗透

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T22:45:31.357

`nbtstat -n`无论如何都可以在 XP 上完成这项工作。不确定其他 Windows 版本或其他语言的本地化。部分样本输出：

> C:\Documents and Settings\colin>nbtstat -n
> 
> 本地连接：节点 IpAddress：[192.168.1.100] 范围 ID：[]
> 
> ```
>  NetBIOS Local Name Table 
> ```

等等

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-09T16:02:58.053

```
Option Explicit
Sub Main()

Dim wsh As Object
Dim strIPOutputFile As String, strSingleLine As String, strIP As String, strToFind As String
Dim intSourceFile As Integer, intLocation As Integer

    Set wsh = CreateObject("WScript.Shell")

    strIPOutputFile = "C:\Users\MeMeMeMe\Desktop\txtfile.txt"

'Save ipconfig info to file
    wsh.Run "%comspec% /c ipconfig/all> """ & strIPOutputFile & """

'Close any open text files
   Close

'Get the number of the next free text file
   intSourceFile = FreeFile

   Open strIPOutputFile For Input As intSourceFile

    strToFind = "IPv4 Address. . . . . . . . . . . :" 'This will probably depend on your file
   Do Until EOF(intSourceFile)
        Input #intSourceFile, strSingleLine
      If InStr(1, strSingleLine, strToFind) > 0 Then
        Exit Do
      End If
    Loop

    intLocation = Len(strToFind)
   strIP = Trim(Mid(strSingleLine,1 + intLocation,Len(strSingleLine) - intLocation))

    intLocation = Len(strIP)
    While Not IsNumeric(Mid(strIP,intLocation,1))
       strIP = Left(strIP, Len(strIP) - 1)
       intLocation = Len(strIP)
    Wend

    Close

   MsgBox strIP

End Sub 
```

# c# - DataBindingComplete 被多次调用

> ID：828505
> 
> 赞同：5
> 
> 时间：2009-05-06T07:56:23.967
> 
> 标签：c#, winforms, data-binding, datagridview

我正在用 C# 创建一个 Windows 应用程序，

我有 1 个 Datagridview，在我设置它的 DataSource 后它应该有 3 行。

我已将 2 个 Event Habdlers 附加到 Datagrdview

```
void dgvProductList_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)<br>
{
     //this gets called 4 times
}

private void dgvProductList_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{            
    //gets called 2 times.
} 
```

为什么会发生这种情况，我将如何解决？

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-24T08:03:59.217

[来自 msdn 在线 DataBindingComplete 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.databindingcomplete.aspx)

> > 当数据源的**内容更改或****DataSource**、**DataMember**或**BindingContext**属性的值更改时，将引发此事件。

例如，如果您分配数据源，然后添加 3 行 --> 4 次事件触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T08:49:54.167

I believe it depends on your other methods, where you're actually setting the DataSource. It seems to me like you're either setting the DataSource twice or calling DataBind twice, and on each DataBind you're actually getting two rows into the DataGridView, thus the 4 total.

Some additional code might help...

Some things to try: search for DataBind(), DataSource(), etc in your code and make sure it's only being called in the appropriate places.

Additionally, it's not necessarily bad for the DataBind to be called twice, assuming something changes between the databinds... some change of state... really hard to say without background.

# tomcat - 我已经卸载了 Plone，但它的主页一直显示在 http://localhost:8080/

> ID：828514
> 
> 赞同：0
> 
> 时间：2009-05-06T07:59:33.320
> 
> 标签：tomcat, liferay, uninstallation, plone

我已经卸载了 Plone，但它的主页一直显示在[http://localhost:8080/](http://localhost:8080/)

也就是说，当我访问[http://localhost:8080/](http://localhost:8080/)时，我看到：

克隆

Zope & Plone 现已启动并运行。

```
* Your Plone site has not been added yet: Click here to create a Plone site.
* Use the Zope Management Interface.
* Plone.Org — documentation, add-ons, support, community. 
```

我已经安装了 Liferay，需要开始使用它。[当我访问http://localhost:8080](http://localhost:8080)时，我需要能够看到 Liferay 主页——它不是缓存页面，因为我已经清除了好几次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T23:48:00.253

从您的描述看来，您可能已经从 Zope 数据库中删除了 Plone 实例，但您仍然在运行 Zope。Plone 是一款在 Zope 应用平台内运行的产品。终止 Zope 进程，它将不再绑定到端口 8080。

# jquery - jQuery中没有图像时不显示

> ID：828516
> 
> 赞同：0
> 
> 时间：2009-05-06T08:00:03.473
> 
> 标签：jquery, attributes

我正在使用 jquery 获取要显示的图像的 src：当 src="" 时无。看起来是这样的，

```
<div class="parent">
    <img src="images_path/or nothing" class="Images"/>
    <div class="content"></div>
</div> 
```

类内容向左浮动以适应父 div 中的图像宽度。现在我想在图像源为空时检测图像源，我通过 selft 更改了类 content.width 以适应父 div。我的jquery代码是这样的

```
var CustomizeImage = $(".CategoryNews-left").find(".Images").attr("src");
alert(CustomizeImage);
if(CustomizeImage == ""){
    alert("ko co gi");
    $(".CategoryNews-left").find(".Images").css("display","none");
    $(".CategoryNews-left").find(".news").css("width","320px");
    $(".CategoryNews-left").find(".Content").css("width","320px");
} 
```

但是课程内容即使 src=empty 也没有得到新的宽度，有人帮我解决这个问题，非常感谢阅读我的笔记！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T08:33:43.283

thanks Tobias and Birman alot, I've just check out my class name in css file is Content. and I mean I have s list of parent div. But my code just alert the first one when I code like that:

```
var CustomizeImage = $(".CategoryNews-left").find(".Images").attr("src");
alert(CustomizeImage);
if(CustomizeImage == ""){
    alert("ko co gi");
    $(".CategoryNews-left").find(".Images").css("display","none");
    $(".CategoryNews-left").find(".news").css("width","320px");
    $(".CategoryNews-left").find(".Content").css("width","320px");
} else {
    if(CustomizeImage.indexOf('src=""') > 0){
        alert("co nhung rong");
        $(".CategoryNews-left").find(".Images").css("display","none");
        $(".CategoryNews-left").find(".news").css("width","320px");
        $(".CategoryNews-left").find(".Content").css("width","320px");
    }
} 
```

and my html code look like this:

```
<div class="CategoryNews-left">
    <div class="Images">
        <img src="images/Anhto_listtin_trai.gif" alt="anh tin" />
</div>
<div class="news">
    <h3>blahblahblahblahblah</h3>
    <p>blahblah- blahblahblah</p>
</div>
<div class="Content">blahblahblahblahblahblah</div>
<div class="relateNews">
<ul>
    <li><a href="">blahblahblahblahblahblahblahblahblahblah</a> <font>VnExpress</font></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T08:10:00.313

尝试在脚本中小写“.Content”（更改为“.content”）。因为在 HTML 中你只有 class="content"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T08:25:53.693

由于类名在 CSS 中区分大小写，`.Content`因此不匹配`class="content"`

在 HTML中将类更改为`class="Content"`（无论如何这似乎是您的命名约定），或者将选择器更改为`.content`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T20:18:33.060

不完全确定您要做什么，但您的第一个选择是错误的。

```
$(".CategoryNews-left").find(".Images").attr("src"); 
```

找到**div** “图像”，并寻找它的`src`. div 没有 src。你应该试试

```
$(".CategoryNews-left .Images img").attr("src"); 
```

另外，请记住`attr("src")`，即使您有很多，也只会返回第一个 img 的 src。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T20:55:44.153

非常感谢科比和其他人！现在我知道如果我想拥有它们的属性，我必须让循环遍历所有元素。现在它运行了。再次非常感谢！

# mysql - mysql for ruby on rails 的问题

> ID：828520
> 
> 赞同：0
> 
> 时间：2009-05-06T08:01:26.403
> 
> 标签：mysql, ruby-on-rails, ruby

啊……对我来说，开始使用 ruby​​ on rails 并不容易……

我正在尝试使用 mysql 进行 ruby​​ on rails 开发。

当我执行“gem install mysql”时，出现以下错误。

错误：为 mysql-2.8.3-x86-mswin32 生成文档时...消息：未处理的特殊：特殊：type=17...bla bla...

如何在 Rails 上为 ruby​​ 安装 mysql！？？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T15:43:57.413

如果您在 Windows 上并想避免 mysql 问题，只需使用 v 2.1.2，就在他们删除 mysql 连接器并将其放入 mysql gem 之前。最好这样，但我在工作中在 Windows XP 机器上安装它时遇到了很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T08:18:28.250

确保您的 gems 版本是最新的。

您应该能够使用以下方法更新它：

```
gem update --system 
```

由于您的错误，它无法生成 Gem 的文档，尽管它可以按原样安装它。首先检查它是否安装，使用：

```
gem list --local 
```

并检查 MySQL 驱动程序是否已经在列表中。

如果不是，请确保您安装了正确版本的驱动程序，mswin32 或 ruby​​ 都应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T09:17:00.747

这是关于 rdoc 生成的错误。如果您执行以下命令，您将不会收到任何错误：

```
gem install --no-rdoc mysql 
```

我相信为日文本地化版本的文档生成 rdoc 存在一些问题。无论如何，mysql gem 已安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-13T06:38:13.747

您可以轻松安装 MySQL gem

将 MySQL 安装在安装了所有 gem 的 ruby​​ 文件中，或者您可以按照以下路径：

**C:\Ruby192\lib\ruby\gems\1.9.1\gems**

执行以下命令：

**宝石安装 MySQL**

希望这对你有帮助！

# nhibernate - NHibernate 映射文件帮助

> ID：828530
> 
> 赞同：0
> 
> 时间：2009-05-06T08:06:45.003
> 
> 标签：nhibernate, model, nhibernate-mapping, mapping, dns

NHibernate 菜鸟在这里。寻找有关如何映射以下常见场景的建议：

**[商店]**
id pk
名称

**[StockItem]**
id pk
名称

**[StockItemStore]**
id pk
StockItemId fk
StoreId fk
ParLevel

我创建了一个域模型，它允许使用 AssignToStore(Store store) 方法通过 StockItem 实体将各种 StockItems 分配给各种商店。

我现在使用 nhibernate 创建我的数据库模式。如何为这个基本场景设置映射文件？

非常感谢任何提示。

雪佛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T08:34:36.480

我强烈建议阅读 nHibernate。这是一个很好的起点：

[nHibernate 常见问题解答](https://web.archive.org/web/20110227204838/http://blogs.hibernatingrhinos.com/nhibernate/Default.aspx)

我还建议您在前几次手动进行映射。之后，您应该查看 Fluent nHibernate。Fluent nHibernate 可以（除其他外）自动从您的域模型为您生成映射，还可以帮助您生成数据库模式。它是一个非常灵活的工具，并且越来越好。你会在这里找到它：

[流畅的 nHibernate](http://fluentnhibernate.org/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T19:31:44.840

不幸的是，这种关系并不是在 nHibernate 中建模的最简单的事情，并且在尝试对链接表中的数据进行查询时会遇到一些固有的问题，这将需要一些复杂的解决方法，但是一旦你设置好了它效果很好。

我的方法是将其设置为两个多对一映射，在 Store 映射中具有以下关系，在 StockItem 映射中具有反向关系。

```
<bag name="StockItems" table="StockItemStore" lazy="true">
  <key column="StoreId" />
  <composite-element class="SuperStore.Components.StockItemStore, SuperStore.Components">
    <property name="ParLevel" type="Int32" />
    <many-to-one name="StockItem" column="StockItemId" class="SuperStore.Components.StockItem, SuperStore.Components" fetch="join" cascade="all" />
  </composite-element>
</bag> 
```

Store 类将具有以下集合：

`public virtual IList< StockItemStore > StockItems {get;set;}`

而 StockItem 将再次反转：

`public virtual IList< StockItemStore > Stores {get;set;}`

StockItemStore 对象能够包含对象（Store 或 StockItem）和链接表中的任何附加信息。（在这种情况下只是 ParLevel。

根据您从 Store 或 StockItem 查看 StockItemStore 对象的哪一侧，该对象将为空。它可以分为两个类，但我发现这种方法更容易使用。它只要求您作为开发人员知道您从哪一边接近它，但在我看来，这是使代码更简单和更可重用的一个很好的权衡

```
public class StockItemStore
{
    private StockItem stockItem;
    private Store store;

    public virtual StockItem StockItem
    {
        get
        {
            if (stockItem == null)
            {
                stockItem = new StockItem();
            }

            return stockItem;
        }
        set
        {
            stockItem = value;
        }
    }

    public virtual Store store
    {
        get
        {
            if (store == null)
            {
                store = new Store();
            }

            return store;
        }
        set
        {
            store = value;
        }
    }

    public virtual int ParLevel { get; set; }

} 
```

我的方法不使用您在问题中定义的 StockItemStore 中的单个唯一标识符，而是使用链接表中的复合键。但总体而言，它在过去对我很有帮助。我敢肯定，如果你真的需要它，你可以以某种方式硬塞那个 id。

这种方法非常适合使用 HQL 进行查询。如果您尝试使用 ICriteria 查询，它往往会有点不稳定。有一些解决方案可以使用数据库视图来模拟另一个表以用于对我有用的查询。

如果您需要进行 ICriteria 查询，请告诉我，我可以发布一些示例代码。

*   最大限度

# validation - struts2 中的 action-validation.xml（validation.xml 中不同字段的验证失败时打开不同的页面）

> ID：828534
> 
> 赞同：0
> 
> 时间：2009-05-06T08:08:15.170
> 
> 标签：validation, struts2

我正在使用struts2。

我的`action-validation.xml`. 我希望如果验证在第一个字段失败，它将转到某个 jsp 页面（例如`a.jsp`），如果验证在第二个字段失败，那么它将转到另一个 jsp（例如`b.jsp`）。

因为它总是在验证失败时返回“输入”，所以目前我只能针对它定位一个 jsp 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-30T11:00:47.123

void 返回类型不能返回任何东西

你设计了一个工作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-11T09:41:42.313

[如果在提交时调用的操作中应用逻辑， Rich 的解决方案](https://stackoverflow.com/questions/828534/action-validation-xml-in-struts2-open-different-pages-when-validation-fails-at/830171#830171)是非常实用的......

```
public String actionBeingCalledOnSubmit() {
  if(!isFieldAValid()) {
    return "DISPLAY_A";
  }

  if(!isFieldBValid()){
    return "DISPLAY_B";
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-06T15:25:27.023

您将需要在您的操作中创建自定义验证方法，返回自定义结果：

```
public void validate() {
  if(!isFieldAValid()) {
    return "DISPLAY_A";
  }

  if(!isFieldBValid()){
    return "DISPLAY_B";
  }
} 
```

然后在您的 struts.xml 中，您将需要添加自定义结果：

```
<result name="DISPLAY_A">/a.jsp</result>
<result name="DISPLAY_B">/b.jsp</result> 
```

# .net - 每次 Cruise Control .NET (ccnet) 自动签出源时如何运行命令？

> ID：828545
> 
> 赞同：1
> 
> 时间：2009-05-06T08:14:04.767
> 
> 标签：.net, svn, continuous-integration, cruisecontrol.net

基本上我想运行一个脚本来检查每个新版本是否存在某种文件类型。

Subversion 用于源代码控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T08:21:07.247

在您的项目配置中（在 内`ccnet.config`）有一个`<tasks>`元素，您可以在其中定义触发集成时执行的各种操作。在您的情况下，您将设置一个看起来像这样的触发器：

```
<triggers>
  <intervalTrigger name="continuous" 
                   seconds="60"
                   buildCondition="IfModificationExists" />
</triggers> 
```

CruiseControl.NET 包含多种类型的任务。该文档包括一个[完整的列表](http://confluence.public.thoughtworks.org/display/CCNET/Task+Blocks)，解释了如何使用它们以及可用的选项。

# c# - 文本框的 C# 输入验证：float

> ID：828546
> 
> 赞同：3
> 
> 时间：2009-05-06T08:14:50.613
> 
> 标签：c#, textbox, floating-point, validation, maskedtextbox

这个看似简单的任务让我有些头疼。我只是想让用户`float.TryParse`在 Textboxish 控件中输入任何成功的文本。

我可以使用普通的 TextBox 并检查一些 btnOK_Click 中的文本，但这显然是蹩脚的。此外，还有一个不错的内置 MaskedTextBox 控件，但我未能将其掩码设置为等于`float.TryParse`. 此外，它似乎仅在发生焦点更改时检查有效性。

在网上四处搜索带来了一些有趣的想法，但没有一个像我想要的那样好。

你是如何解决这个问题的？我只是错过了一个明显的解决方案，还是我必须自己实现这个功能？

我知道SO上有一些类似的线程，但没有找到可行的解决方案。

**更新：**是的，WinForms。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T08:20:06.873

**编辑**

好吧，这让它变得更容易......只需在`Validating`您的文本框中添加一个事件处理程序并`TryParse`在后面的代码中执行。如果无效，则提示用户。

当用户完成输入并将焦点从 TextBox 移开时，验证将触发，因此如果您需要进行动态检查，您可以处理 TextChanged 或 KeyPress/KeyUp 事件处理程序

**原来的**

这是在 asp.net 还是 winforms/wpf

如果它的 asp.net，您可以使用`RegularExpressionValidator`（以考虑逗号分隔、1 个小数点等）和 a 的`RangeValidator`组合来设置浮点数的最小/最大值。

除此之外，保证它的唯一方法是将文本框包装在更新面板中，在其上粘贴 CustomServerValidator，然后在服务器验证功能中，`TryParse`对`TextBox.Text`值执行操作，如果成功，则为有效，如果失败，无效

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T08:51:49.777

小心使用`Validating`和验证为假。您可能会发现，除非您输入有效数据，否则您无法将焦点从文本框移开，这是一个非常大的可用性问题。

我通过简单地尝试解决这个`TryParse()`问题`LostFocus`，如果 TryParse 失败，我将文本框背景着色为淡红色，以明显表明有问题。

# sql-server - 将数据库表转换为 XML 模式文件

> ID：828549
> 
> 赞同：2
> 
> 时间：2009-05-06T08:16:28.300
> 
> 标签：sql-server, database, xsd, schema

我正在使用 SQL Server 2005。是否有任何命令或 GUI 工具（例如 SQL Server 管理工作室的任何菜单/功能）将数据库表转换为 XML 模式文件 (.xsd)？

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T08:22:38.240

我找到了这个。试试看

```
Select CourseID, Name, CoursePrice
FROM CouseMaster.Course Course
FOR XML AUTO, XMLSCHEMA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T07:21:13.380

声明@SQL nvarchar(1000) SET @SQL= 'bcp.exe '+ '"select * from yourdbname.yourschema.yourtablename for xml path (''record''), ROOT (''tabel'')"' +' queryout '+ 'c:\yourfilename.xsd' +' -w -r -t -SyourServerName -T'

打印@SQL EXEC Master..xp_CmdShell @SQL

相应地替换所有以“您的”开头的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T13:47:01.067

您可以像这样写入文件：

```
bcp.exe "select top 0 * from (select 1 as iCol) as t for xml auto, xmlschema" queryout outfile.xsd -T -c 
```

我正在使用 TOP 0 排除实际查询数据的 xml，因为您只需要架构。-c 使其成为输出中的纯字符数据，如果您想要 utf-16 (unicode) 输出，请使用 -w 代替。

编辑 - 如果您想更改 xml 结构，请查看带有 FOR XML 的 PATH。

# apache-flex - flex 3 并使用名称/值对

> ID：828556
> 
> 赞同：0
> 
> 时间：2009-05-06T08:19:39.980
> 
> 标签：apache-flex, actionscript-3

有人对在 Flex 中使用名称/值对有什么建议吗？

上下文：我想创建一个用于更新数据库表的 Flex UI。我希望 UI 包含字段名称（只读）和当前字段值（可编辑）。我使用 WebService 组件来检索字段值，然后将其分配给具有硬编码字段名称的对象，例如

```
private function resultHandler(event:ResultEvent):Object
{
var resultsObj:Object;
resultsObj = {
name:event.result.name as String, 
```

然而，这种方法增加了表结构/字段名称永远不会改变的依赖关系。使用对象类型还要求我编写自己的算法来对输出进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-08T13:32:39.467

我不确定我是否理解这个问题。

如果要避免此时从事件返回的属性的依赖性，只需使用 event.result 对象，它已经是一个[关联数组](http://livedocs.adobe.com/flex/3/html/help.html?content=10_Lists_of_data_4.html "Flex 3 Livedocs - 关联数组")。

至于排序，我们需要更多关于您尝试排序的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:23:33.540

这很简单。不要使用 for each in 循环。使用 For-In 循环演示如下所示。

```
var dicEntry:Object = new Object();

dicEntry["Name"] = "Raj";
dicEntry["sal"] = 10000;
dicEntry["age"] = 33;

for(var key:Object in dicEntry)
{
    trace("Object Key: "+key+" Object Value:  +dicEntry[key]);
} 
```

就是这样。

# path-finding - 如何在寻路情况下处理不同大小的物体（A*、A-star）

> ID：828559
> 
> 赞同：6
> 
> 时间：2009-05-06T08:20:10.337
> 
> 标签：path-finding, a-star

我正在开发一款使用 A-star (A*) 进行路径查找的游戏，但我已经到了这样一个地步，即我有一些大于单个网格正方形的对象。

我在 16*16px 的网格上运行。墙段为 16*16，因此使单个正方形无法通过。我的一些坏人是 32*32，所以他们需要检查一个间隙是否至少有 2 个方格宽，以便能够通过它。

我不能简单地将网格设置为 32*32，因为设计需要薄壁（16 像素），并且有几个较小的坏蛋只占用一个 16*16 的正方形。

如何实现这种多分辨率环境？A-star 仍然是正确的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T08:48:39.300

对于一个相对简单的解决方案，我会坚持使用与 16x16 大小的对象相同的 A* 算法，但评估正方形是否可步行的方式略有不同。

*   一个 16x16 大小的物体可以在一个正方形上行走，如果该正方形是可行走的。
*   一个 32x32 大小的物体可以在一个正方形上行走，如果该正方形和它的邻居都可以行走的话。

# asp.net - ASP.NET MVC：使用 LINQ to XML 呈现 (X)HTML

> ID：828560
> 
> 赞同：2
> 
> 时间：2009-05-06T08:20:28.183
> 
> 标签：asp.net, asp.net-mvc, linq-to-xml, html-helper

已经有很多关于 ASP.NET MVC 的*视图引擎*的讨论，以及对带有 for 循环之类的内联“标签汤”的一些批评。

替代或补充是使用 HTML 助手，它们只是内联方法调用。

当我今天查看 ASP.NET MVC 的 HTML 助手时，他们正在使用一个名为*TagBuilder*的类。

我的建议是**使用 LINQ to XML 来获得强类型和正确格式的 (X)HTML**：

```
XDocument output = new XDocument();
XElement root = new XElement("div",
    new XAttribute("class", "root_item"));

XElement iconImage = new XElement("img",
    new XAttribute("src", ResolveUrl("~/image.gif")),
    new XAttribute("alt", "This is an image"));

XElement link = new XElement("a",
    new XAttribute("class", "link"),
    new XAttribute("href", "http://google.com"),
    new XText("Link to Google"));

root.Add(link);
root.Add(iconImage);
output.Add(root); 
```

我喜欢它，因为它就像 WebForms 中的强类型控件，您可以在其中新建一个 Button 并将其添加到另一个控件的 Control 集合中。

**这有什么明显的问题或限制吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T18:40:49.183

这是一个好主意！我看到的唯一问题是使用 C#。;) VB.NET 通过它的 XML 文字特性对生成 XML 有更好的支持。

您在问题中列出的代码可以在 VB.NET 中这样编写。（添加文本*“这是一个链接”*`a` ，因为您的示例在元素中不包含任何文本。）

```
Dim root = <div class="root_item">
               <img src=<%= ResolveUrl("~/image.gif") %> alt="This is an image"/>
               <a class="link" href="http://google.com">This is a link</a>
           </div> 
```

仍然有`<%= ... %>`标签，但在编译时会检查它们的有效性。如果此代码作为返回 XElement 类型的函数的返回值，则该 Xhtml 片段可以在站点的其他地方重用。

[我在 CodePlex 上有一个项目，它在http://vbmvc.codeplex.com](http://vbmvc.codeplex.com)上使用 VB.NET XML Literals 作为自定义 ASP.NET MVC 视图引擎。它基于[Dmitry Robsman](http://blogs.msdn.com/dmitryr/archive/2008/12/29/asp-net-mvc-view-engine-using-vb-net-xml-literals.aspx)的代码，他是 Microsoft 的 ASP.NET 产品单元经理。视图是 VB.NET 类，母版页是基类。您**新建了**部分视图类，而不是通过名称字符串引用它们，因此这也是一个额外的编译时检查。代替返回字符串的 HtmlHelper 类，有一个返回 XElement 的 XhtmlHelper 类，其工作方式与您建议的类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T12:44:35.657

我可以想到上述方法的两个问题。第一的，

```
XElement iconImage = new XElement("img",
new XAttribute("src", ResolveUrl("~/image.gif")),
new XAttribute("alt", "This is an image")); 
```

参考你上面写的，我们可以有类似的东西：

```
<img src=<%=whatever%> alt=<%=whatever%> /> 
```

这可能是个人判断或什么，但我肯定会投票给后一个更“人类”可读的。是的，使用 LINQ 2 XML 可能会摆脱在我的 aspx 页面中徘徊的奇怪 <% } %> ，但同时，你会让那些“好孩子”看起来很笨拙。

其次可能会出现性能问题。我认为解析和执行 LINQ 2 XML 可能会很慢，尽管我没有任何关于此的数据。

就我个人而言，我仍在尝试 MVC 框架，感觉就像回到了 ASP 或 PHP 3.X 之类的旧时代，因为几乎所有的交互部分都是显式处理的，而不是面向窗口/GUI-OOP 的 ASP Dot Net 框架。我认为我将使用 MVC 的主要原因是它可以保证最优质的客户端 HTML 代码。

# .net - 小型 Windows 窗体聊天应用程序的想法？

> ID：828561
> 
> 赞同：0
> 
> 时间：2009-05-06T08:20:45.343
> 
> 标签：.net, windows, winforms, chat

我有一个小应用程序，我正在构建一个聊天应用程序，到目前为止我有发布消息的功能！

我不需要登录，因为只有少数用户，我将使用他们的 Windows 用户名进行识别。

有没有人做过类似的事情？我还需要添加什么？它不需要全是唱歌和跳舞，因为它只是在一个小型开发团队中使用。

任何想法都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T08:37:30.933

聊天记录 ;)

启用 SSL 的通信

要求：它不应该给系统添加不必要的漏洞，因为它与Windows身份验证有关+有开放的端口所以很有可能出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T08:30:47.970

夫妻心得：

1.  系统托盘图标，轻松隐藏/恢复等。
2.  由于您拥有 Windows 帐户，因此如果他们处于离线状态，请向他们发送电子邮件（如果您有交换/广告电子邮件集成）。
3.  Windows 启动时自动启动
4.  单击一次/自动更新
5.  基于 Web 和/或基于移动设备的版本。
6.  复制/粘贴（能够粘贴图像）
7.  不确定它是否有用，但它会很酷：向给定的“机器人”发送消息......假用户名......例如通讯组名称，向通讯组发送电子邮件，然后将电子邮件发送到该通讯组被发布到该对话中
8.  “向其他用户显示我的屏幕”-> 迷你屏幕帽等。
9.  源代码控制/错误跟踪意识。

只是一些随机的想法，让我知道结果如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T08:35:02.237

文件共享、网络摄像头、自动离开、时间戳！（这是 Live Messenger 失败的地方；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T08:38:20.433

*   可搜索的聊天记录 - 可从桌面搜索中搜索
*   在同一对话中与多人聊天的能力
*   /away 或 /busy 的状态通知

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T08:44:08.033

在不转移注意力的情况下让用户注意新消息会很有用，也许在类似于 Mac OS X 上的 Growl的[Snarl消息传递程序中实现挂钩？](http://www.fullphat.net/index.php)

这确实意味着您需要在每个工作站上安装 Snarl 系统。

# apache-flex - 如何将助记符添加到 Flex 中的常规按钮？（需要快捷方式）

> ID：828562
> 
> 赞同：1
> 
> 时间：2009-05-06T08:20:45.513
> 
> 标签：apache-flex, flex3

如何将助记符添加到 Flex 中的常规按钮？给我看一些例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T11:59:49.317

第一种解决方案：

<?xml 版本="1.0" 编码="ISO-8859-1"?>

<mx:应用程序 xmlns:mx="http://www.adobe.com/2006/mxml">

只需设置 mxml 文件的编码值，您就可以直接输入特殊字符。ISO-8859-1 编码类型适用于我与 © 符号。

第二种解决方案：

举个例子，© 转义序列只为 HTML 定义，而不是 XML。根据 W3C XML 1.0 建议，只定义了少数这样的助记符转义序列。但是，您可以通过指定其 Unicode 代码点来使用数字字符引用来包含其他字符。

见： [http ://www.w3.org/TR/REC-xml/#syntax](http://www.w3.org/TR/REC-xml/#syntax)

**例如，版权符号可以表示为（不带双引号）：“©”或“&xA9;” （十六进制）。** 如果您使用的字体具有您所引用的代码点的字形，这将起作用（因为 Unicode 定义了来自非常广泛的各种语言的字符和符号，其中许多不会存在于所有字体中。

有关所有 Unicode 字符及其代码点的列表，您可以在此处查阅 Unicode 代码表：

[http://www.unicode.org/charts/](http://www.unicode.org/charts/)

您还可以在线列出一些更常见符号的代码点，并且大多数操作系统现在都带有一个字符或符号选择器（例如 Microsoft Windows 的字符映射实用程序），它通常也会列出字符的代码点.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-07T19:13:46.217

这是一个扩展按钮组件，可以帮助您处理任务：

```
package test
{
import mx.controls.Button;
import flash.text.TextFormat;

public class ShortcutButton extends Button
{
    private static const underlineTF:TextFormat = new TextFormat(null, null, null, null, null, true);

    public function ShortcutButton()
    {
        super();
    }

    protected var shortcutPosition:int = -1;

    override public function set label(value:String):void
    {
        shortcutPosition = value.indexOf("~");
        if (shortcutPosition >= 0)
            value = value.substring(0, shortcutPosition) + value.substring(shortcutPosition + 1);
        super.label = value;
    }

    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
    {
        super.updateDisplayList(unscaledWidth, unscaledHeight);
        if (shortcutPosition > -1 && shortcutPosition < textField.text.length - 1)
            textField.setTextFormat(underlineTF, shortcutPosition, shortcutPosition+1);
    }
}
} 
```

只需在要下划线的符号前放置“~”符号即可显示它是快捷助记符。

示例（您必须添加`xmlns:test="test.*"`到容器组件）：

```
<test:ShortcutButton label="~Update" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T08:37:15.320

[http://livedocs.adobe.com/flex/3/html/help.html?content=accessible_7.html](http://livedocs.adobe.com/flex/3/html/help.html?content=accessible_7.html)

# javascript - 除了 p 标签之外，从 JavaScript 中的 Text 中去除 Html？

> ID：828572
> 
> 赞同：3
> 
> 时间：2009-05-06T08:23:07.490
> 
> 标签：javascript

我需要使用 JavaScript 更改 RichEditor 和 TextEditor 模式，现在我需要将 Html 转换为实际上仍处于 Html 编辑器模式的 Text，所以我只需要 p 标签，但可以剥离其他 Html。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T08:39:49.790

正则表达式替换（全局，不区分大小写）：

```
</?(?:(?!p\b)[^>])*> 
```

与空字符串。

解释：

```
<          # "<"
/?         # optional "/" 
(?:        # non-capture group
  (?!      #   negative look-ahead: a position not followed by...
    p\b    #     "p" and a word bounday
  )        #   end lock-ahead
  [^>]*    #   any char but ">", as often as possible
)          # end non-capture group
>          # ">" 
```

这是将正则表达式应用于 HTML 可以实际工作的少数情况之一。

有些人可能会反对并说在属性值中使用文字“<”实际上并没有被禁止，因此可能会破坏上述正则表达式。他们是对的。

*在这种*情况下，正则表达式会中断，替换下划线部分：

```
<p class="foo" title="unusual < title">
                              --------- 
```

如果您的输入可以实现这样的事情，那么您可能必须使用更高级的工具来完成这项工作 - 解析器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T08:38:13.990

这应该有帮助

```
var html = '<img src=""><p>content</p><span style="color: red">content</span>';
html.replace(/<(?!\s*\/?\s*p\b)[^>]*>/gi,'') 
```

我的正则表达式的解释：

更换所有零件

1.  以“<”开头，
2.  后面没有 (?!
    *   任意数量的空白字符“\s*”
    *   可选的“/”字符
    *   和标签名称后跟一个单词边界（这里是“p\b”）
3.  包含任何不等于“>”的字符 - [^>]*
4.  并以“>”字符结尾

# java - 将 BufferedWriter.write 推迟到另一个线程

> ID：828575
> 
> 赞同：3
> 
> 时间：2009-05-06T08:24:05.723
> 
> 标签：java, multithreading, file, bufferedwriter

我有一个事件处理方案，它最终也应该写入文件；我不能在文件被刷新时延迟事件，即等待 BufferedWriter.write(String) 结束。

我正在寻找实现这一目标的最简单方法（是否有图书馆这样做？我认为我不是唯一遇到此问题的人）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T09:39:49.147

您可以使用单线程执行器为每个事件执行文件写入。

```
ExecutorService executor = Executors.newSingleThreadExecutor();

// for each event
executor.submit(new Runnable() {
  public void run()
  {
     // write to the file here
  }
}); 
```

只有一个线程，执行程序将负责排队。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T08:29:48.877

Basically, you want the writing to the file not interrupt your flow of event handling.

In this case, all you need to do is delegate the file handling away to a separate thread.

Your code should look something like this:

```
// event handling starts

Runnable fileHandlingThread = new Runnable() {
    public void run() {
        // open the file
        // write to the file
        // flush the file
    }
};

new Thread(fileHandlingThread).start();

// continue doing other things in the mean time 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T10:00:41.280

只要您保持相同的线程，您就可以使用它`java.io.PipedOutputStream`来存储数据并从匹配`PipedInputStream`文件中获得单独的线程副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T08:30:40.653

You could make a queue based system, where you put the events on a queue/list and then have another thread which takes the events to be written, and write them out. This way the file writer will be asynchronous to the rest of the system, and your only delay will be adding an element to a list.

# python - 列出字典

> ID：828578
> 
> 赞同：1
> 
> 时间：2009-05-06T08:25:47.233
> 
> 标签：python, list, dictionary

在列表中追加是可能的。但是我如何实现在字典中追加？

```
 Symbols from __ctype_tab.o:
Name                  Value   Class        Type         Size     Line  Section
__ctype             |00000000|   D  |            OBJECT|00000004|     |.data
__ctype_tab         |00000000|   r  |            OBJECT|00000101|     |.rodata

Symbols from _ashldi3.o:
Name                  Value   Class        Type         Size     Line  Section
__ashldi3           |00000000|   T  |              FUNC|00000050|     |.text

Symbols from _ashrdi3.o:
Name                  Value   Class        Type         Size     Line  Section
__ashrdi3           |00000000|   T  |              FUNC|00000058|     |.text

Symbols from _fixdfdi.o:
Name                  Value   Class        Type         Size     Line  Section
__fixdfdi           |00000000|   T  |              FUNC|0000004c|     |.text
__fixunsdfdi        |        |   U  |            NOTYPE|        |     |*UND* 
```

我怎样才能创建一个字典，如：

```
dictOfTables {'__ctype_tab.o':{'__ctype': Name:...,Value:...,Class:...,Type:...,Size:...,Line:...,Section:...}} etc. 
```

对于上面的文字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T08:51:50.400

Appending doesn't make sense to the concept of dictionary in the same way as for list. Instead, it's more sensible to speak in terms of inserting and removing key/values, as there's no "*end*" to append to - the dict is unordered.

From your desired output, it looks like you want to have a dict of dicts of dicts, (ie `{filename : { symbol : { key:value }}`. I think you can get this from your input with something like this:

```
import re

header_re = re.compile('Symbols from (.*):')

def read_syms(f):
    """Read list of symbols from provided iterator and return dict of values"""
    d = {}
    headings=None
    for line in f:
        line = line.strip()
        if not line: return d  # Finished.

        if headings is None:
             headings = [x.strip() for x in line.split()]
             continue # First line is headings

        items = [x.strip() for x in line.split("|")]
        d[items[0]] = dict(zip(headings[1:], items[1:]))
    return d

f=open('input.txt')
d={}
for line in f:
    m=header_re.match(line)
    if m:
        d[m.group(1)] = read_syms(f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T08:29:33.857

Look into using an [ordered dictionary](http://www.python.org/dev/peps/pep-0372/). I don't think this is in official Python yet, but there's a reference implementation available in the PEP.

# .net - Setter.Value 不是 ContentProperty 有充分的理由吗？

> ID：828579
> 
> 赞同：11
> 
> 时间：2009-05-06T08:25:52.290
> 
> 标签：.net, wpf, xaml, setter, contentproperty

每次我写出一个`Value`属性值不可内联描述的 setter 时，我都会诅咒 API 没有用 标记`Setter`类的事实`[ContentProperty("Value")]`，这将允许这样做：

```
<Setter Property="BitmapEffect">
  <Setter.Value>
    <OuterGlowBitmapEffect GlowColor="#AAC" Opacity="0.2" GlowSize="1.25" />
  </Setter.Value>
</Setter> 
```

...简化为：

```
<Setter Property="BitmapEffect">
  <OuterGlowBitmapEffect GlowColor="#AAC" Opacity="0.2" GlowSize="1.25" />
</Setter> 
```

所以我的问题有点双重。首先，没有以这种方式配置 API 是否有充分的理由？`XamlReader`其次，即使我不控制 WPF API ，是否有什么阻止我以某种方式提供此元数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-05-24T03:14:32.337

在问了这个问题十年零十八天之后，新开源的 WPF 提交了一个 PR 来解决这个问题：

[https://github.com/dotnet/wpf/pull/745](https://github.com/dotnet/wpf/pull/745)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T17:09:41.717

确实是好点...但是您可以轻松地创建自己的从 System.Windows.Setter 继承的 Setter 类，将 ContentProperty 属性放在它上面，然后使用它来代替标准的 Setter。

# c# - 如何在 winforms 应用程序中连接到远程 sql server 数据库？

> ID：828581
> 
> 赞同：2
> 
> 时间：2009-05-06T08:25:54.427
> 
> 标签：c#, sql-server, winforms

标题不言自明。我正在构建一个**winforms** C# 2.0 应用程序。有什么教程或启发性的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T08:33:32.160

ADO.NET 是一个很大的话题 - 但在这里搜索的关键字是`SqlConnection`, `SqlCommand`,`SqlDataReader`等。如果你喜欢`DataSet`（我不是粉丝，但有些人喜欢它们），那么数据集设计器会为你做很多事情。

另一种选择是使用 .NET 2.0 Web 服务 (asmx) 通过中央应用服务器进行数据访问 - 使其成为“智能客户端”。

对于更高的 .NET 版本，WCF (.NET 3.0)、LINQ-to-SQL (.NET 3.5)、实体框架 (.NET 3.5 SP1) 和 ADO.NET 数据服务 (.NET 3.5 SP1) 成为选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T08:41:20.597

本地 SQL Server 实例和远程实例之间没有太大区别。您只需`Server=sqlserver.remote-machine.com`在连接字符串中设置类似的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T08:37:39.420

升级到 C# 3.5 并使用 Add->New Item->Linq to Sql Class... 迄今为止我见过的最简单的方法，您可以从服务器资源管理器中拖动您想要的表...否则...

在 2.0 中要困难得多，直到你把你的节奏降下来，正如之前的海报，我会推荐 SqlConnection 和 SqlDataReader 等。在 .NET 3.5 之前，我们有一个古老的帮助方法，它只是做了类似下面的事情

DataAccessLayer dal = new DataAccessLayer("连接字符串"); SQLDataReader sr = dal.getDataReader("SQLCOMMANDSTRING"); sr.关闭（）；dal.runProcess("SQLCOMMANDSTRING");

ETC..

有关如何使用 SQL 对象的一些细节，请查看以下内容：http: [//www.developerfusion.com/article/4278/using-adonet-with-sql-server/2/](http://www.developerfusion.com/article/4278/using-adonet-with-sql-server/2/)

# sql - SQL：主键还是不主键？

> ID：828582
> 
> 赞同：3
> 
> 时间：2009-05-06T08:26:14.783
> 
> 标签：sql, indexing, primary-key

我有一个包含用户设置集的表，它具有以下列：

```
UserID INT
Set VARCHAR(50)
Key VARCHAR(50)
Value NVARCHAR(MAX)
TimeStamp DATETIME 
```

UserID 与 Set 和 Key 一起是唯一的。因此，特定用户不能在一组特定设置中拥有两个相同的键。设置是按集合检索的，因此如果用户从某个集合中请求某个密钥，则会下载整个集合，这样下次需要同一集合中的密钥时，就不必去数据库了.

我应该在所有三列（userid、set 和 key）上创建一个主键，还是应该创建一个具有主键的额外字段（例如，一个名为 SettingID 的自动增量整数，我猜这是个坏主意），还是不创建一个主键键，只是创建一个唯一的索引？

- - - 更新 - - -

只是为了澄清一下：这是行表的结尾，无论如何它都没有加入。UserID 是用户表的 FK。Set 不是 FK。它几乎是我的 GUI 的辅助表。举个例子：用户第一次访问网站的某些部分时会得到一个帮助气球，如果他们愿意，他们可以关闭它。一旦他们点击它，我将在“GettingStarted”集中添加一些设置，表明他们的 helpballoon X 已被禁用。下次当用户访问同一页面时，该设置将声明不再显示帮助气球 X。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T08:30:03.573

拥有复合唯一键通常不是一个好主意。

将任何业务相关数据作为主键也会给您带来麻烦。例如，如果您需要更改值。如果在应用程序中无法更改该值，则可能会在将来发生，或者必须在升级脚本中进行更改。

最好创建一个代理键，一个没有任何商业意义的自动编号。

**更新后编辑**：

在这种情况下，您可以考虑在**概念上没有主键**，并使这三列成为复合唯一键的主键（使其可更改）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T08:29:14.993

> 我应该在所有三列上创建一个主键吗`(userid, set, and key)`

做这个。

使用代理主键将导致额外的列不用于其他目的。

与代理主键一起创建`UNIQUE INDEX`与创建非集群主键相同`PRIMARY KEY`，并且会导致额外的`KEY lookup`，这对性能来说更糟。

创建一个`UNIQUE INDEX`没有 a`PRIMARY KEY`的`HEAP-organized`表将需要一个额外`RID lookup`的值来访问值：也不是很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T08:39:05.110

你有多少钥匙和套装？这些需要是 varchar(50) 还是可以指向查找表？如果您可以将此 Set 和 Key 转换为 SetId 和 KeyId ，那么您可以在 3 个整数值上创建主键，这会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T08:32:37.203

我可能会尝试确保 UserID 是唯一标识符，而不是在整个代码中重复 UserID。复合键在您的代码生命周期的后期往往会变得混乱。

我假设这是某种配置值的查找字段，因此如果是这种情况，您可能会使用复合键。数据已经存在。您可以使用主键来保证它的唯一性。如果您改变主意并稍后决定它不适合您，您可以轻松添加 SettingId 并使原始复合键成为唯一索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T08:33:05.437

创建一个单独的主键。无论业务逻辑将如何变化，都必须将哪些新规则应用于您的 Key VARCHAR(50) 字段 - 拥有一个主键将使您完全独立于业务逻辑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T08:33:27.030

以我的经验，这完全取决于有多少表将使用该表作为 FK 信息。您是否希望其他表中的 3 个额外列只是为了结转 FK？

就我个人而言，我会创建另一个 FK 列并在其他三列上放置一个唯一约束。这使得这张表的外键更容易被吞下。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T08:38:04.943

最好将 UserID 作为 32 位 newid() 或唯一标识符，因为作为 int 的 UserID 为可能的 UserID 的用户提供了提示。这也将解决您的复合键问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T13:08:21.097

我不是复合键的支持者，但在这种情况下，作为行表的结尾，它可能是有道理的。但是，如果您允许在这三个字段中的任何一个字段中使用空值，因为在插入时其中一个或多个值是未知的，则可能会有困难，唯一索引可能会更好。

# java - 如何使桌面应用程序模块化？

> ID：828591
> 
> 赞同：7
> 
> 时间：2009-05-06T08:28:46.010
> 
> 标签：java, desktop, desktop-application, modularity

如何使 Java 桌面应用程序模块化？模块应该如何分类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T08:39:03.223

作为设计目标，模块化意味着您希望拥有一个由单独的部分（模块）组成的应用程序，其中每个部分都有其职责范围并包含与该区域相关的所有类（高[内聚](http://en.wikipedia.org/wiki/Cohesion_(computer_science))），并且这些部分之间的通信通过窄，定义良好且文档化的接口（[松散耦合](http://en.wikipedia.org/wiki/Loose_coupling)）。

您可以通过事先规划设计并在实施过程中不断调整这些平面和重构代码来实现这一点。

区分技术模块（如 GUI、网络通信或 DB 访问）（通常形成层，尽管这些可能被细分为多个模块）和包含特定于应用程序逻辑但通常不包含的域模块是有用的t 形成层。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T08:37:15.630

看看 OSGi 技术。应用程序的每个模块（称为包）都是一个单独的 jar，OSGi 负责依赖解析和动态加载包类路径等。

对于桌面应用程序，我强烈建议您查看[www.dynamicjava.org](http://www.dynamicjava.org)的 DA-Launcher 。它使部署您的应用程序变得非常容易。他们还有一些东西，比如对任何 OSGi 应用程序都很有用的动态 JPA。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T08:36:08.690

你的意思是像Eclipse这样的模块化？

如果您的 Java 桌面应用程序基于 Eclipse RCP 或 NetBeans RCP，您将“免费”获得模块化（几乎 ;-)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-08T13:29:19.927

您的问题的答案实际上取决于您所说的*“模块化”*是什么意思。

在使您的应用程序模块化时，您必须考虑几个级别的问题。

首先，您必须考虑您寻求的“模块化”是*架构模块化*、*部署时间模块化*还是*运行时模块化*。

在任何情况下，每个连续级别都意味着所有之前的级别。

对于初学者 - 要使您的应用程序模块化，您必须从架构开始。将您的关注点分成明确定义的清晰部分，这些部分具有明确定义的“外部世界”接口。使用良好的[设计模式](http://en.wikipedia.org/wiki/Design_pattern_(computer_science))和[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)以及针对[单元可测试性](http://en.wikipedia.org/wiki/Unit_testing)进行设计在实现良好的关注点分离方面大有帮助，这是模块化设计的基石。

从小处着手，但要牢记大局。在设计更大的系统块（或模块）时，请确保它们具有尽可能少的重叠区域。每个模块都应该对它们运行的​​环境几乎不做任何假设，并且只服务一个单一的关注点。它需要从它的对等点提供的任何服务都应该由外部初始化显式提供（最好使用*依赖注入*将模块粘合到一个工作应用程序中）。

如果您的架构是模块化的，那么将关注点分离到它们自己的部署单元（以*项目*、*jar*、*捆绑包*、*插件*、*扩展*或其他形式）是一项简单的任务，并且您可以在部署过程中轻松开始混合和匹配各种模块部署以获得特定应用程序实例所需的确切功能集。这就是我所说的*部署时间模块化*。

在实现部署时间模块化方面还有很长的路要走，*依赖注入*框架，如[Guice](http://code.google.com/p/google-guice/)、[Spring framefork](http://www.springsource.org/)等。

*运行时模块化*我认为这类似于 Eclipse 和 NetBeans 插件或 Mozilla 扩展提供的模块化，您可以在部署/安装后更改应用程序模块的配置和设置。

这意味着某种架构和基础设施可以在应用程序初始化时或在运行时动态识别新插件/扩展。

后者还意味着您的所有模块都必须在隐含假设的情况下构建，即模块使用的任何服务都可以在任何时间点轻松消失，从而付出额外的努力来确保在这个不稳定的世界中运行的代码的健壮性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T09:39:26.963

我也会推荐 Eclipse RCP 或者看看 Netbeans RCP。两者非常相似。将它们分开的一件事是 Eclipse RCP 使用本机 GUI 库而不是 Netbeans 使用的 Swing。

优点和缺点是 Elcipse 可能会更快一些，尽管您更受限于操作系统提供的控制类型。Netbeans 使用大多数 Java 开发人员可能更熟悉的 Swing，并且开发自定义控件的能力是无穷无尽的。

自从我使用 Eclipse RCP 以来已经有一段时间了，所以我在 Eclipse RCP 中开发自定义控件可能是错误的。

他们的共同点是开发智能和模块化桌面应用程序很有趣，而且您可以在更短的时间内获得具有专业外观的应用程序！

祝你好运！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T12:07:16.313

您还可以查看 Java Plug-in Framework，

[http://jpf.sourceforge.net/](http://jpf.sourceforge.net/)

> JPF 可以极大地提高 Java 系统的模块化和可扩展性，并将支持和维护成本降至最低。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T12:54:04.907

试试 Spring RCP

[http://www.springsource.org/spring-rcp](http://www.springsource.org/spring-rcp)

在组织应用程序的 GUI 部分时...

# c# - How To add another constructor with parameter in linq class(Table)

> ID：828611
> 
> 赞同：1
> 
> 时间：2009-05-06T08:33:12.833
> 
> 标签：c#, asp.net, linq, linq-to-sql

I am using LINQ to SQL in an ASP.NET project. While inserting the table I need to convert the values to the particular table object and I need to insert.

For that I created a new constructor in that table with parameter so that I can assign my value to that table object , the assign the functionality is working but while inserting (`obj.TS_Questions.InsertOnSubmit(mytableobject);`) I get null exception.

my code::

```
default constructor for my table

public TS_Question()
        {
            this._TS_Options = new EntitySet<TS_Option>(new Action<TS_Option>(this.attach_TS_Options), new Action<TS_Option>(this.detach_TS_Options));
            this._TS_QuestGroups = new EntitySet<TS_QuestGroup>(new Action<TS_QuestGroup>(this.attach_TS_QuestGroups), new Action<TS_QuestGroup>(this.detach_TS_QuestGroups));
            this._TS_QuestRecords = new EntitySet<TS_QuestRecord>(new Action<TS_QuestRecord>(this.attach_TS_QuestRecords), new Action<TS_QuestRecord>(this.detach_TS_QuestRecords));
            this._TS_Admin = default(EntityRef<TS_Admin>);
            this._TS_LevelType = default(EntityRef<TS_LevelType>);
            this._TS_OptionTypeLT = default(EntityRef<TS_OptionTypeLT>);
            OnCreated();
        } 
```

* * *

constructor created by me

```
 public TS_Question(Guid Quest_QuestIDBL, string Quest_NameBL, Nullable<Guid> Quest_OptionTypeIDBL, Guid Quest_AdminIDBL, Guid Ques_LevelIDBL, int Quest_TimeBL, int Quest_MarkBL, string Qest_ExplanationBL, Nullable<bool> Qest_IsMultipleAnswerBL)
    {

        this._TS_Options = new EntitySet<TS_Option>(new Action<TS_Option>(this.attach_TS_Options), new Action<TS_Option>(this.detach_TS_Options));
        this._TS_QuestGroups = new EntitySet<TS_QuestGroup>(new Action<TS_QuestGroup>(this.attach_TS_QuestGroups), new Action<TS_QuestGroup>(this.detach_TS_QuestGroups));
        this._TS_QuestRecords = new EntitySet<TS_QuestRecord>(new Action<TS_QuestRecord>(this.attach_TS_QuestRecords), new Action<TS_QuestRecord>(this.detach_TS_QuestRecords));
        this._TS_Admin = default(EntityRef<TS_Admin>);
        this._TS_LevelType = default(EntityRef<TS_LevelType>);
        this._TS_OptionTypeLT = default(EntityRef<TS_OptionTypeLT>);
        OnCreated();

        this._Quest_QuestID = Quest_QuestIDBL;
        this._Quest_Name = Quest_NameBL; 
        if (Quest_OptionTypeIDBL != null)
        {
            this._Quest_OptionTypeID = Quest_OptionTypeIDBL;
        }
        this._Quest_AdminID = Quest_AdminIDBL;
        this._Ques_LevelID = Ques_LevelIDBL;
        this._Quest_Time = Quest_TimeBL;
        this._Quest_Mark = Quest_MarkBL;
        this._Qest_Explanation = Qest_ExplanationBL;
        this._Qest_IsMultipleAnswer = Qest_IsMultipleAnswerBL;

    } 
```

Please help me out from this problem

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T08:42:07.570

Honestly, I haven't looked too deep, but it looks like that OnCreated is sitting a little far north... You probably want to call it after you're done setting up your variables. Other than that i'd say make sure you're properly initializing everything in the method calling the constructor.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T09:08:04.933

您可以像这样调用默认构造函数，它对我来说很好：

```
 public partial class MyClass
{
    public MyClass(string fieldValue1,int fieldValue2)
        : this()
    {
        this.field1= fieldValue1;
        this.field2 = fieldValue2;
    }
} 
```

[如果这样做可以，您可以在此处](http://msdn.microsoft.com/en-us/library/ms173115(VS.80).aspx)阅读有关在 C# 中使用构造函数的更多信息。

# c# - 如何将这两种类似的方法重构为一种？

> ID：828624
> 
> 赞同：5
> 
> 时间：2009-05-06T08:36:53.260
> 
> 标签：c#, generics, refactoring

我见过一些使用“T”来使方法可重用于不同类的通用集合的示例，但我从未真正深入了解或理解这些示例。

我想知道是否可以将以下两种方法合二为一，以及这样做的缺点是什么（性能方面）。

任何人？

```
 [NonAction]
        public List<SelectListItem> ToSelectList(IEnumerable<Department> departments, string defaultOption)
        {
            var items = departments.Select(d => new SelectListItem() { Text = d.Code + " - " + d.Description, Value = d.Id.ToString() }).ToList();
            items.Insert(0, new SelectListItem() { Text = defaultOption, Value = "-1" });
            return items;
        }

        [NonAction]
        public List<SelectListItem> ToSelectList(IEnumerable<Function> functions, string defaultOption)
        {
            var items = functions.Select(f => new SelectListItem() { Text = f.Description, Value = f.Id.ToString() }).ToList();
            items.Insert(0, new SelectListItem() { Text = defaultOption, Value = "-1" });
            return items;
        } 
```

* * *

**解决方案**

我使用的解决方案：

*用法*

```
var departmentItems = departments.ToSelectList(d => d.Code + " - " + d.Description, d => d.Id.ToString(), " - ");
var functionItems = customerFunctions.ToSelectList(f => f.Description, f => f.Id.ToString(), " - "); 
```

*和*

```
 public static class MCVExtentions
    {
        public static List<SelectListItem> ToSelectList<T>(this IEnumerable<T> enumerable, Func<T, string> text, Func<T, string> value, string defaultOption)
        {
            var items = enumerable.Select(f => new SelectListItem() { Text = text(f), Value = value(f) }).ToList();
            items.Insert(0, new SelectListItem() { Text = defaultOption, Value = "-1" });
            return items;
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-06T08:43:04.290

老式的方法是为 Department 和 Function 创建一个通用接口：

```
interface A
{
int ID{get;}
string Description{get;}
} 
```

您在 Department 上执行 Description 以返回`d.Code + " - " + d.Description`。并编写函数以使用此接口而不是具体类：

```
[NonAction]
    public List<SelectListItem> ToSelectList(IEnumerable<A> as, string defaultOption)
    {
        var items = as.Select(a => new SelectListItem() { Text = a.Description, Value = a.Id.ToString() }).ToList();
        items.Insert(0, new SelectListItem() { Text = defaultOption, Value = "-1" });
        return items;
    } 
```

编辑：关于使用泛型，在这种情况下它不会有太大帮助，因为

*   您传递的对象需要实现 Id 和 Description
*   你没有返回这些对象，所以在这方面你不必关心泛型的类型安全

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-06T08:59:56.637

如果不实现像@Grzenio 建议的通用接口，您可以使用这样的通用方法：

```
 public List<SelectListItem> ToSelectList<T>(IEnumerable<T> enumerable, Func<T, string> text, Func<T, string> value, string defaultOption)
    {
        var items = enumerable.Select(f => new SelectListItem() { Text = text(f), Value = value(f) }).ToList();
        items.Insert(0, new SelectListItem() { Text = defaultOption, Value = "-1" });
        return items;
    }

    // use like

    t.ToSelectList(departments, d => d.Code + " - " + d.Description, d => d.Id.ToString(), "default");
    t.ToSelectList(functions, f => f.Description, f => f.Id.ToString(), "default"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T08:56:48.890

事实上，你可以结合泛型和函数来做到这一点，类似于this（未经测试甚至可能无法编译）。

```
[NonAction]
public List<SelectListItem> ToSelectList<T>(IEnumerable<T> en, 
                                            Function<string, T> text, 
                                            Function<string, T> value, 
                                            string defaultOption)
{
    var items = en.Select(x => new SelectListItem() { Text = text(x) , Value = value(x) }).ToList();
    items.Insert(0, new SelectListItem() { Text = defaultOption, Value = "-1" });
    return items;
} 
```

然后，您可以使用适当的 lambda 函数（或直接调用）将其分派给它。

```
[NonAction]
public List<SelectListItem> ToSelectList(IEnumerable<Department> departments, 
                                         string defaultOption)
{
    return ToSelectList<Department>(departments, d =>  d.Code + '-' + d.Description, d => d.Id.ToString(), defaultOption);

} 
```

# sharepoint - Workflow with user selecting Destination doc library

> ID：828632
> 
> 赞同：0
> 
> 时间：2009-05-06T08:37:54.740
> 
> 标签：sharepoint

I am trying to implement a Workflow, where the user needs to select a destination document library.

I could figure out two possible ways:

1.  Once the user manually starts the workflow, we would display a webpage where he would select the destination document library.

2.  we would initially display a webpage. where User would select the destination. After clicking a button the workflow would kick start.

Now for possibility "1": How to redirect from a worlflow to a webpage. [tried Server.Transfer, but failed].

for Possibility "2": How to start a workflow on button click.

Please also suggest which among the above 2 possibilities is a better solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T13:31:00.917

我假设您正在谈论使用 Visual Studio 编写工作流。就个人而言，我会先尝试创建一个 SharePoint 设计器工作流，看看它是否满足您的要求。

在 SharePoint Designer 中，您可以[创建一个](http://office.microsoft.com/en-us/sharepointdesigner/HA102097781033.aspx)在用户手动启动工作流时接受来自用户的数据的启动表单。如果开箱即用的操作不能完全满足您的需求，您可以创建自己的可重用[自定义工作流操作](http://www.ideseg.com/AddCustomWorkflowActivitiesToSharePointDesignerPart1.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T13:09:46.303

您需要的是工作流程启动表单。究竟如何实现它以及可以获得多少功能将取决于您正在处理的工作流的类型，但您应该能够设置一些东西来选择目标。

# c# - 重定向网址

> ID：828633
> 
> 赞同：2
> 
> 时间：2009-05-06T08:37:59.997
> 
> 标签：c#, asp.net, redirect

如何将 www.mysite.com/picture/12345 重定向到 www.mysite.com/picture/some-picture-title/12345？现在，“/picture/12345”在 picture.aspx?picid=12345 上被重写，对于第二种形式的 url （图片/图片标题/12323 到 picture.aspx?picid12323）我不能只重写第一种形式url 到第二个，因为我必须从数据库中获取图片标题。

一方面，问题看起来很简单，但考虑到解析每个请求的时间，如何处理它是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T08:42:40.813

不知道什么是 ASP.NET 技术（Webforms 或 MVC），我假设它是 WebForms。

您可以查看 URL Redirecting 并建立自己的规则。而且您这样做一次只是为了应用到所有看起来像您想要的链接。

[Scott Guthrie](http://weblogs.asp.net/scottgu/)有一篇关于它的[非常好的帖子](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)。

如果您想要的是将该地址重定向到新地址，那也很容易。

首先让我们**重用代码**，因此您将首先重定向到一个名为的公共页面，例如，**redirectme.aspx**

在该页面中，您使用 ServerVariables 或在 QueryString 中传递 Url 获得**REFERER**地址，这是您的选择，然后您可以附加标题名称，例如：

```
private void Redirect()
{
    // get url: www.mysite.com/picture/12345
    string refererUrl = Request.ServerVariables["HTTP_REFERER"];    // using the ServerVariables or Request.UrlReferrer.AbsolutePath;
    //string refererUrl = Request.QueryString["url"];                 // if you are redirecting as Response.Redirect("redirectme.aspx?" + Request.Url.Query);

    // split the URL by '/'
    string[] url = refererUrl.Split('/');

    // get the postID
    string topicID = url[url.Length-1]; 

    // get the title from the post
    string postTitle = GetPostTitle(topicID);

    // redirect to: www.mysite.com/picture/some-picture-title/12345
    Response.Redirect(
        String.Format("{0}/{1}/{2}",
            refererUrl.Substring(0, refererUrl.Length - topicID.Length),
            postTitle,
            topicID));
} 
```

为了节省服务器上的时间，请在第一个 Page 事件上执行此操作

```
protected void Page_PreInit(object sender, EventArgs e)
{
    Redirect();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T10:40:11.187

如果您正在运行 IIS7，那么（对于 webforms 和 MVC）URL 重写模块（[http://learn.iis.net/page.aspx/460/using-url-rewrite-module/](http://learn.iis.net/page.aspx/460/using-url-rewrite-module/)）值得一看。

支持重定向的模式匹配和正则表达式，说明它们是临时的还是永久的，而且它们都可以通过控制台进行管理。不需要的时候为什么要编码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T08:48:12.343

我假设您在这里需要一个通用模式，而不仅仅是一次性解决方案。即你需要它为 12345 和 12346 以及任何其他 ID 工作。您可能正在寻找`URLRedirection`并应用正则表达式来识别将重定向到您的目标 URI 的源 URI

# sql-server - SQL Server Express 2008 复制/同步

> ID：828634
> 
> 赞同：1
> 
> 时间：2009-05-06T08:38:03.617
> 
> 标签：sql-server, replication

我们正在考虑为使用 SQL Server Express（2005 或 2008）作为数据库的客户端开发一个小型、简单的 Access 系统。唯一复杂的因素是他们有两个办公室，他们需要在它们之间同步一些（但不是全部）数据。

**使用Express**版可以执行此操作有哪些选择？使用 2008 比 2005 有什么优势吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T08:47:17.573

Microsoft SQL Server 2008 Express (SQL Server Express) 可以作为所有类型复制的订阅者。

SQL Server Express 不能用作发布者或分发者。

[参考](http://msdn.microsoft.com/en-us/library/ms165686.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T11:32:02.763

你可以自己管理这个——使用主键的 GUID，最后更新时间戳，以及跟踪最后同步等。

如果没有太多要保持同步，那么它应该不会*太难*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T10:13:48.607

应做到以下几点：

**1) 服务器 - SQL 2008 服务器 - 发布者/分发者**

一台中央服务器 - sql 2008 服务器 - 这将是数据的中心位置。您可以在 sql server 上创建发布并指定需要包含在发布中的所有表（在此之前您还需要最终确定所需的复制方法）

**2) 客户端 - SQL 2008 Express - 订阅者**

在你的情况下 - 每个办公室都可以有 sql express - 你可以使用任意数量的。这些快速实例需要订阅中央服务器创建的发布。

（这也意味着客户端应该可以访问 SQL 服务器 - 如果您不在 Intranet 上 - VPN 可以提供帮助 - vpn 应该打开 - 创建订阅和同步。如果您没有 vpn - 服务器需要有客户端可以订阅的公共 IP 和端口开放）。

# php - 如何用 PHP 替换字符串中的变量？

> ID：828645
> 
> 赞同：5
> 
> 时间：2009-05-06T08:39:33.160
> 
> 标签：php, regex, preg-replace, replace

所以我有一些看起来像这样的PHP代码：

```
$message = 'Here is the result: %s'; 
```

我只是以 %s 为例。它基本上是任何内容的占位符。然后我将字符串传递给一个函数，我希望该函数将 %s 替换为该值。

我需要做什么才能实现这一目标？我需要做一些正则表达式，并使用 preg_replace() 还是什么？或者有更简单的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-06T08:48:12.797

您实际上可以使用[sprintf](http://php.net/sprintf)函数，该函数将返回格式化的字符串并将变量放在占位符的位置。
它还为您提供了如何格式化和显示字符串的强大权力。

```
$output = sprintf("Here is the result: %s for this date %s", $result, $date); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T08:48:52.747

如果您使用`%s`，我认为这与 printf 用于字符串的占位符相同。所以你可以这样做：

```
$text = sprintf($message, "replacement text"); 
```

认为这至少应该工作......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-07T01:42:06.463

```
$find = array(
     '#name#',
     '#date#'
);
$search = array(
     'someone\'s name',
     date("m-d-Y")
);
$text_result = str_replace($find, $search, $text); 
```

我通常将它用于我的代码，从一些 text/html 文件中获取 $text 然后将 $text_result 作为输出

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T08:48:04.247

您可以使用[`sprintf`](http://php.net/sprintf)，它的工作方式与 C`printf`和`sprintf`函数非常相似。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-05-06T08:44:33.787

尝试动态变量：

```
$placeholder = 's';
str_replace("%".$placeholder,$$placeholder,$message); 
```

然后 %s 将被替换为 $s，变量

# sql - 如何从 Oracle SQL 中的 BLOB 获取文本内容

> ID：828650
> 
> 赞同：125
> 
> 时间：2009-05-06T08:41:20.147
> 
> 标签：sql, oracle, blob

我试图从 SQL 控制台查看 Oracle BLOB 中的内容。

我知道它包含大量文本，我只想查看文本，但以下查询仅表明该字段中有一个 BLOB：

```
select BLOB_FIELD from TABLE_WITH_BLOB where ID = '<row id>'; 
```

我得到的结果并不完全符合我的预期：

```
    BLOB_FIELD
    ----------------------
    oracle.sql.BLOB@1c4ada9

```

那么我可以做什么样的魔法咒语来将 BLOB 变成它的文本表示？

PS：我只是想从 SQL 控制台（Eclipse 数据工具）查看 BLOB 的内容，而不是在代码中使用它。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2009-05-06T09:36:15.630

首先，您可能希望将文本存储在 CLOB/NCLOB 列中，而不是为二进制数据设计的 BLOB（顺便说一下，您的查询可以使用 CLOB）。

以下查询将让您看到 blob 中文本的前 32767 个字符（最多），前提是所有字符集都兼容（存储在 BLOB 中的文本的原始 CS，用于 VARCHAR2 的数据库的 CS）：

```
select utl_raw.cast_to_varchar2(dbms_lob.substr(BLOB_FIELD)) from TABLE_WITH_BLOB where ID = '<row id>'; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-12-07T15:12:25.887

SQL Developer 也提供了这个功能：

双击结果网格单元格，然后单击编辑：

[![在此处输入图像描述](https://i.stack.imgur.com/KQkq8.png)](https://i.stack.imgur.com/KQkq8.png)

然后在弹出窗口的右上角，“查看为文本”（您甚至可以看到图像..）

[![在此处输入图像描述](https://i.stack.imgur.com/aiLCL.png)](https://i.stack.imgur.com/aiLCL.png)

就是这样！

[![在此处输入图像描述](https://i.stack.imgur.com/g7Q0F.png)](https://i.stack.imgur.com/g7Q0F.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-12-23T10:57:40.990

您可以使用下面的 SQL 从表中读取 BLOB 字段。

```
SELECT DBMS_LOB.SUBSTR(BLOB_FIELD_NAME) FROM TABLE_NAME; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-02-18T17:13:47.647

如果您想在文本中搜索，而不是查看它，这可行：

```
with unzipped_text as (
  select
    my_id
    ,utl_compress.lz_uncompress(my_compressed_blob) as my_blob
  from my_table
  where my_id='MY_ID'
)
select * from unzipped_text
where dbms_lob.instr(my_blob, utl_raw.cast_to_raw('MY_SEARCH_STRING'))>0; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-01-15T14:25:32.187

使用此 SQL 获取 BLOB 的前 2000 个字符。

```
SELECT utl_raw.cast_to_varchar2(dbms_lob.substr(<YOUR_BLOB_FIELD>,2000,1)) FROM <YOUR_TABLE>; 
```

**注意：**这是因为，Oracle 将无法处理长度超过 2000 的 BLOB 转换。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-11T17:13:04.850

谷仓的回答对我有用，因为我的列没有被压缩。快速而肮脏的解决方案：

```
select * from my_table
where dbms_lob.instr(my_UNcompressed_blob, utl_raw.cast_to_raw('MY_SEARCH_STRING'))>0; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-05-13T13:06:59.737

我为此苦苦挣扎了一段时间，并实施了 PL/SQL 解决方案，但后来意识到在 Toad 中，您只需双击结果网格单元格，它就会打开一个包含文本内容的编辑器。（我在蟾蜍 v11 上）

![在此处输入图像描述](https://i.stack.imgur.com/uYupc.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-07-20T16:51:24.540

[我可以使用 TO_CLOB ( docs](https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/TO_CLOB-bfile-blob.html#GUID-FD7D58FE-B97C-4B75-85A9-5F82FB1DE96A) )让它工作：

```
select 
  to_clob(BLOB_FIELD)
from 
  TABLE_WITH_BLOB 
where 
  ID = '<row id>'; 
```

这在 Oracle 19c 中适用于我，其 BLOB 字段大于 VARCHAR 限制。我得到可读的文本（来自一个持有 JSON 的 BLOB）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-13T19:49:26.240

你可以试试这个：

```
SELECT TO_CHAR(dbms_lob.substr(BLOB_FIELD, 3900)) FROM TABLE_WITH_BLOB; 
```

但是，它将被限制为 4000 字节

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-14T15:12:51.150

如果您的文本使用 DEFLATE 算法在 blob 内被压缩并且非常大，您可以使用此函数来读取它

```
CREATE OR REPLACE PACKAGE read_gzipped_entity_package AS

FUNCTION read_entity(entity_id IN VARCHAR2)
  RETURN VARCHAR2;

END read_gzipped_entity_package;
/

CREATE OR REPLACE PACKAGE BODY read_gzipped_entity_package IS

FUNCTION read_entity(entity_id IN VARCHAR2) RETURN VARCHAR2
IS
    l_blob              BLOB;
    l_blob_length       NUMBER;
    l_amount            BINARY_INTEGER := 10000; -- must be <= ~32765.
    l_offset            INTEGER := 1;
    l_buffer            RAW(20000);
    l_text_buffer       VARCHAR2(32767);
BEGIN
    -- Get uncompressed BLOB
    SELECT UTL_COMPRESS.LZ_UNCOMPRESS(COMPRESSED_BLOB_COLUMN_NAME)
    INTO   l_blob
    FROM   TABLE_NAME
    WHERE  ID = entity_id;

    -- Figure out how long the BLOB is.
    l_blob_length := DBMS_LOB.GETLENGTH(l_blob);

    -- We'll loop through the BLOB as many times as necessary to
    -- get all its data.
    FOR i IN 1..CEIL(l_blob_length/l_amount) LOOP

        -- Read in the given chunk of the BLOB.
        DBMS_LOB.READ(l_blob
        ,             l_amount
        ,             l_offset
        ,             l_buffer);

        -- The DBMS_LOB.READ procedure dictates that its output be RAW.
        -- This next procedure converts that RAW data to character data.
        l_text_buffer := UTL_RAW.CAST_TO_VARCHAR2(l_buffer);

        -- For the next iteration through the BLOB, bump up your offset
        -- location (i.e., where you start reading from).
        l_offset := l_offset + l_amount;
    END LOOP;
    RETURN l_text_buffer;
EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('!ERROR: ' || SUBSTR(SQLERRM,1,247));
END;

END read_gzipped_entity_package;
/ 
```

然后运行选择以获取文本

```
SELECT read_gzipped_entity_package.read_entity('entity_id') FROM DUAL; 
```

希望这会对某人有所帮助。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2018-11-16T06:13:49.953

为我工作，

> 选择 lcase((insert( insert( insert( insert(hex(BLOB_FIELD),9,0,'-'), 14,0,'-'), 19,0,'-'), 24,0,'- '))) 作为来自 TABLE_WITH_BLOB 的 FIELD_ID，其中 ID = '行 id'；

* * *

## 回答 #12

> 赞同：-6
> 
> 时间：2012-06-17T10:38:25.570

使用`TO_CHAR`功能。

```
select TO_CHAR(BLOB_FIELD) from TABLE_WITH_BLOB where ID = '<row id>' 
```

将`NCHAR`、`NVARCHAR2`、`CLOB`或`NCLOB`数据转换为数据库字符集。返回的值始终是`VARCHAR2`。

# sql - 我如何在sql中使用'when - between'语句？

> ID：828662
> 
> 赞同：4
> 
> 时间：2009-05-06T08:44:49.810
> 
> 标签：sql, sql-server, sql-server-2005

此查询在 when-between 行中给了我语法错误。我该如何解决？

```
alter FUNCTION [dbo].[fn_GetActivityLogsArranger]
(
@time AS nvarchar(max)
)

RETURNS  nvarchar(max)
AS
BEGIN
declare @Return varchar(30)

select @Return = case @time
when between '15:00' and '15:30' then '15:00-15:30'
when between '15:30' and '16:00' then '15:30-16:00'
when between '16:00' and '16:30' then '16:00-16:30'
when between '16:00' and '16:30' then '16:00-16:30' 
when between '16:30' and '17:00' then '16:30-17:00' 
when between '17:00' and '17:30' then '17:00-17:30' 
when between '17:30' and '18:00' then '17:30-18:00'
else 'Unknown'
 Return @Return
end
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T08:53:10.523

```
alter FUNCTION [dbo].[fn_GetActivityLogsArranger]
(
    @time AS varchar(30)
)
RETURNS  
varchar(30)AS
BEGIN
declare @Return varchar(30)
select @Return = case 
when @time between '15:00' and '15:30' then '15:00-15:30'
when @time between '15:30' and '16:00' then '15:30-16:00'
when @time between '16:00' and '16:30' then '16:00-16:30'
when @time between '16:00' and '16:30' then '16:00-16:30' 
when @time between '16:30' and '17:00' then '16:30-17:00' 
when @time between '17:00' and '17:30' then '17:00-17:30'
when @time between '17:30' and '18:00' then '17:30-18:00'
else 'Unknown' 
end
Return @Return
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T08:51:54.143

您不能使用这种格式的 case 语法。您将不得不做一个检查的案例：

```
select @Return = case 
when @time between '15:00' and '15:30' then '15:00-15:30'
when @time between '15:30' and '16:00' then '15:30-16:00'
when @time between '16:00' and '16:30' then '16:00-16:30'
when @time between '16:00' and '16:30' then '16:00-16:30' 
when @time between '16:30' and '17:00' then '16:30-17:00' 
when @time between '17:00' and '17:30' then '17:00-17:30' 
when @time between '17:30' and '18:00' then '17:30-18:00'
else 'Unknown' END

Return @Return 
```

此外，您在 case 语句的末尾缺少一个 END（请参见上面的大写 END）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T08:57:41.260

案例语法： CASE WHEN Boolean_expression THEN result_expression [ ...n ] [ ELSE else_result_expression ] END

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T08:52:34.893

对于初学者来说，你需要在每个 when 语句中传递你的 @variable

```
select @Return = case 
when @time between ('15:00' and '15:30') then '15:00-15:30'
when @time between ('15:30' and '16:00') then '15:30-16:00'
when @time between ('16:00' and '16:30') then '16:00-16:30'
when @time between ('16:00' and '16:30') then '16:00-16:30' 
when @time between ('16:30' and '17:00') then '16:30-17:00' 
when @time between ('17:00' and '17:30') then '17:00-17:30' 
when @time between ('17:30' and '18:00') then '17:30-18:00'
else 'Unknown' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T08:53:41.100

您需要在每个 WHEN 子句中都有变量，例如。

```
case 
    when @time between '15:00' and '15:30' then '15:00-15:30'
    when @time between '15:30' and '16:00' then '15:30-16:00' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T13:35:35.010

你不应该使用这个函数，你应该有一个时间桶的表或表值函数，这样你就可以对它进行纯连接。有关示例，请参见[我的另](https://stackoverflow.com/questions/824225/if-statement-sql/825013#825013)一篇文章。到目前为止，联接将优于在行集上调用函数的方法。

# apache-flex - 如何找到原始 Flash 尺寸？

> ID：828664
> 
> 赞同：1
> 
> 时间：2009-05-06T08:45:19.590
> 
> 标签：apache-flex, flash, actionscript-3

我有一个 Flash 文件，我想以编程方式在我的代码中找到它的尺寸。在代码的开头我有字符串：

```
[SWF(width='700', height='500')] 
```

之后的几个子类我想将这些“700”和“500”值作为变量提取。

有没有办法找到这个？

我试过引用 this.width 和 this.height 但它们对于父画布总是为零。

引用舞台不起作用，因为它返回当前舞台大小，而不是所需大小。例如，如果我直接加载 SWF 而不是通过浏览器，我可以将视口缩放为我喜欢的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T22:38:28.900

`stage.stageWidth`并将`stage.stageHeight`参考舞台的全宽和全高。如果 Flash Player 的实例更改大小，它将在运行时更改。还有`loaderInfo.width`and `loaderInfo.height`，它应该告诉你元数据中指定的原始值`[SWF]`，它们在运行时不会改变。

# quartz-scheduler - Quartz repeat execution 5 times every day

> ID：828667
> 
> 赞同：1
> 
> 时间：2009-05-06T08:45:33.503
> 
> 标签：quartz-scheduler

I am using quartz to schedule my jobs, I need to execute a job at 2:00am every day and repeat the execution 5 times every 10 minutes, any ideas? the result should be: 2:00 2:10 2:20 2:30 2:40

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T08:55:20.487

我会看一下 Quartz [CronTrigger](http://www.opensymphony.com/quartz/wikidocs/CronTriggers%20Tutorial.html)，特别是 / 的用法来指定*每 'n' 分钟/小时*。

我想你会需要

```
0 0,10,20,30,40 2 * * ? 
```

在凌晨 2 点开火，然后每 10 分钟在 2.10am-2.40am 开火。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T08:55:56.803

只需将计划时间指定为 CronTrigger 的 cron 字符串，如下所示：

```
0 0,10,20,30,40 2 * * * 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T08:56:36.147

使用带有 cron 表达式的 CronTrigger，该表达式描述了您希望它运行的确切时间。对于每天 2:00、2:10、2:20、2:30、2:40，使用：

```
0 0,10,20,30,40 2 * * ? 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-06T08:56:06.570

一个简单的解决方案是简单地有 5 个任务，每 10 分钟一个。

# c# - Generating tests from run-time analysis

> ID：828671
> 
> 赞同：3
> 
> 时间：2009-05-06T08:47:46.277
> 
> 标签：c#, .net, unit-testing, nunit, parasoft

We have a large body of legacy code, several portions of which are scheduled for refactoring or replacement. We wish to optimise parts that currently impact on the user-experience, facilitate reuse in a new product being planned, and hopefully improve maintainability too.

We have quite good/comprehensive functional tests for an existing product. These are a mixture of automated and manually-driven GUI tests, but they can take a developer more than half a day to run fully. The "low-level domain logic" has a good suite of unit tests (NUnit) with good coverage. Unfortunately, the remainder of the code has no unit tests (or, at least, no worthy unit tests).

What I'd like to find is a tool that automatically generates unit tests for *specific methods/classes* and maybe *specific interfaces* based on their use and behaviour in the functional tests. These unit tests would be invaluable for refactoring, and would also be run as part of our C.I. system to detect regressions much earlier than is currently happening (and to localise regressions much better than "button X doesn't work.").

**Do any such tools exist? Do you have any recommendations for me?**

I've come across [Parasoft .TEST](http://www.parasoft.com/jsp/products/home.jsp?product=TestNet&itemId=135), which looks like it might do want I want. **Do you have any comments on that, with respect to my situation?**

I don't think something that just generates test code from a static analysis, ala [NStub](http://code.google.com/p/nstub/), is useful here. I suppose it is actually the generation of representative test data that is really important.

Please ignore the merits, or lack of, of automated test generation - it is not something I'd usually advocate. (Not least because you get tests that pass for broken code!)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T08:55:16.757

尝试[Pex](http://research.microsoft.com/en-us/projects/Pex/)：

> 直接从 Visual Studio 代码编辑器中，Pex 找到您的方法的有趣输入输出值，您可以将其保存为具有高代码覆盖率的小型测试套件。Pex 执行系统分析，寻找边界条件、异常和断言失败，您可以立即对其进行调试。Pex 支持参数化单元测试，这是单元测试的扩展，可降低测试维护成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T08:54:41.830

Well, you could look at [PEX](http://msdn.microsoft.com/en-us/devlabs/cc950525.aspx) - but I believe that invents its own data (it doesn't watch your existing tests, AFAIK).

# xml - Delphi - IXMLNode 中的命名空间 URI 无效

> ID：828673
> 
> 赞同：1
> 
> 时间：2009-05-06T08:48:10.770
> 
> 标签：xml, delphi, namespaces, xml-namespaces

我正在尝试解析来自 SOAP Web 服务的响应，但部分数据包含无效的 xmlns 元素，我认为这给我带来了无穷无尽的麻烦。

我正在使用的 XML 部分如下所示。

```
<soap:Body xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <ResponseData xmlns="http://www.example.com/WebServices/Schemas/1">
        <ResponseDataResult>
            <Messages xmlns="http://www.example.com/WebServices/Schemas/2">
                <Message>...</Message>
            </Messages>
        </ResponseDataResult>
        ...
    </ResponseData>
</soap:Body> 
```

soap:Body 节点中的 xmlns URI 是可以的，它在 ResponseData 中是无效的，它指向一个不存在的文档。应该注意的是，网络服务不在我的控制之下，所以修复这个问题是不可能的:(。

目前，我的 Delphi (2007) 代码看起来像这样。

```
var l_tmp,l_tmp2,FSOAPBody:IXMLNode;

begin
    ...

    FSOAPBody := FSOAPEnvelope.ChildNodes.FindNode('Body','http://schemas.xmlsoap.org/soap/envelope/');
    //returns the xml above.
    if (FSOAPBody = nil) then exit;

    l_tmp := FSOAPBody.ChildNodes.FindNode('ResponseData','');
    if (l_tmp = nil) or (not l_tmp.HasChildNodes) then exit;

    l_tmp2 := l_tmp.ChildNodes.FindNode('ResponseDataResult','');

    ...
end; 
```

在上面的代码中，我不得不将空白命名空间 url 添加到`FindNode('ResponseData','')`代码中，因为没有它，它不会找到任何东西并返回 nil，但是它会返回预期的 XML。

问题是下一个查找节点`ChildNodes.FindNode('ResponseDataResult','')`（

我怀疑这是由于缺少命名空间，所以我试图删除它，但收到更多错误，说它是一个只读属性。

不管有没有 NS，是否有删除 xmlns 属性或选择节点？还是我要解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T14:10:33.147

It is *not expected* that all namespace URIs refer to actual resources. They are used primarily as unique identifiers so XML from multiple sources can use the same names without interfering with each other. They are not required to point to the schema that describes the valid element and attribute values for the namespace; XML doesn't even require that such a schema exist.

If you want to search for elements without regard for namespace, then call the one-argument version of `FindNode`.

```
l_tmp := FSOAPBody.ChildNodes.FindNode('ResponseData'); 
```

The two-argument version requires a namespace, and when you specify an empty string, it means you're requesting only nodes that have empty namespaces. Since you apparently know what the namespace is, you could call the two-argument version anyway, just like you used it to get the body element:

```
l_tmp := FSOAPBody.ChildNodes.FindNode('ResponseData',
           'http://www.example.com/WebServices/Schemas/1'); 
```

# python - 如何测量 Django 缓存性能？

> ID：828702
> 
> 赞同：5
> 
> 时间：2009-05-06T08:56:44.867
> 
> 标签：python, django, postgresql, caching, memcached

我有一个在 Django 上运行的相当小的（每天大约 4.5k 页面浏览量）网站，使用 PostgreSQL 8.3 作为数据库。

我将数据库用作缓存和会话后端。我听说过很多关于为此目的使用 Memcached 的好消息，我肯定想试一试。但是，我想确切地知道这种更改的好处是什么：我想我的网站可能还不够大，无法让更好的缓存后端有所作为。关键是：安装和配置 memcached 的人不是我，我不想浪费任何人的时间或浪费很少的时间。

如何测量使用 db 作为缓存后端引入的开销？我查看了 django-debug-toolbar，但如果我理解正确的话，它不是你想放在生产站点上的东西（你必须设置`DEBUG=True`它才能工作）。不幸的是，我无法在我的笔记本电脑上完全重现生产设置（我有不同的操作系统、CPU 和更多的 RAM）。

有没有人对不同的 Django 缓存/会话后端进行基准测试？有谁知道如果我正在做的性能差异是什么，例如，对每个请求进行一次会话写入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T12:08:36.810

在我之前的工作中，我们试图衡量缓存对我们正在开发的站点的影响。在同一台机器上，我们对最常用作起始页面（对象列表）的 10 个页面的集合进行了负载测试，以及从大约 200000 个池中随机抽取的一些对象详细信息页面。差异就像 150 个请求/秒到 30000 个请求/秒，并且数据库查询下降到每页 1-2 个。

缓存的内容：

*   会话
*   为对象列表中的每个单独页面检索的对象列表
*   次要对象和公共内容（在每个页面上都可以找到）
*   对象类别和其他*分类属性的列表*
*   对象计数器（由 cron 作业离线计算）
*   单个对象

一般来说，我们只使用低级粒度缓存，而不是高级缓存框架。它需要非常仔细的设计（缓存必须在每次数据库状态更改时正确失效，例如添加或修改任何对象）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-19T03:22:06.443

[DiskCache](http://www.grantjenks.com/docs/diskcache/ "Python磁盘缓存")项目发布了比较本地内存、Memcached、Redis、基于文件和[diskcache.DjangoCache](http://www.grantjenks.com/docs/diskcache/api.html#djangocache "DiskCache DjangoCache")的[Django 缓存基准](http://www.grantjenks.com/docs/diskcache/djangocache-benchmarks.html "DiskCache Django 缓存基准测试")。DiskCache 的另一个好处是不需要单独的进程（与 Memcached 和 Redis 不同）。相反，缓存键和小值被内存映射到 Django 进程内存中。从缓存中检索值通常比本地主机上的 Memcached 更快。许多[设置](http://www.grantjenks.com/docs/diskcache/api.html#constants "DiskCache settings")控制在内存中保留多少数据；其余的被分页到磁盘。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T09:32:27.293

简短的回答：如果你有足够的内存，memcached 总是会更快。您无法真正对 memcached 与数据库缓存进行基准测试，请记住，服务器的最大瓶颈是磁盘访问，特别是写访问。

无论如何，如果您有很多对象要缓存并且过期时间很长，那么磁盘缓存会更好。但是对于这种情况，如果您想要演出表演，最好使用 python 脚本静态生成页面并使用 ligthtpd 或 nginx 交付它们。

对于 memcached，您可以调整专用于服务器的 ram 数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-20T22:19:04.840

试试看。使用 firebug 或类似工具并在测试服务器上运行内存缓存并分配一点 RAM（例如 64mb）。

在没有 memcache 的情况下标记在 firebug 中看到的平均加载结果，然后打开缓存并标记新结果。就像它说的那样简单。

结果通常会让人震惊，因为性能提升得非常好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-24T08:37:35.373

使用[django-debug-toolbar](http://django-debug-toolbar.readthedocs.org/en/)`SQL`查看查询节省了多少时间

# java - 在 NetBeans 中禁用文本字段

> ID：828706
> 
> 赞同：1
> 
> 时间：2009-05-06T08:58:31.867
> 
> 标签：java, swing, netbeans, textfield

我想问是否有办法根据单选按钮使文本字段处于活动状态和非活动状态。

例如，文本字段将处于非活动状态，当用户单击单选按钮时，文本字段将处于活动状态。

我正在使用 Java 语言和 NetBeans 程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T09:10:32.867

您可以有两个单选按钮来表示活动/非活动状态。为每个动作监听器添加一个动作监听器，当按下“活动”监听器时，您在 JTextField 上调用 setEditable(true)，当调用“非活动”JRadioButton 时，您调用 setEditable(false)。

```
JTextField textField = new JTextField();
JRadioButton activeButton = new JRadioButton("Active");
JRadioButton inactiveButton = new JRadioButton("Inactive");
activeButton.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        textField.setEditable(true);
    }
});
inactiveButton.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        textField.setEditable(false);
    }
}); 
```

# php - PHP将所有参数作为数组获取？

> ID：828709
> 
> 赞同：39
> 
> 时间：2009-05-06T08:59:37.590
> 
> 标签：php, arrays, function, arguments

嘿，我正在使用一个 PHP 函数，该函数接受多个参数并对其进行格式化。目前，我正在处理这样的事情：

```
function foo($a1 = null, $a2 = null, $a3 = null, $a4 = null){
    if ($a1 !== null) doSomethingWith($a1, 1);
    if ($a2 !== null) doSomethingWith($a2, 2);
    if ($a3 !== null) doSomethingWith($a3, 3);
    if ($a4 !== null) doSomethingWith($a4, 4);
} 
```

但我想知道是否可以使用这样的解决方案：

```
function foo(params $args){
    for ($i = 0; $i < count($args); $i++)
        doSomethingWith($args[$i], $i + 1);
} 
```

但仍以相同的方式调用函数，类似于 C# 中的 params 关键字或 JavaScript 中的 arguments 数组。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-05-06T09:04:17.173

[`func_get_args`](http://php.net/manual/en/function.func-get-args.php)返回一个包含当前函数所有参数的数组。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-04-16T10:05:20.580

如果您使用 PHP 5.6+，您现在可以这样做：

```
<?php
function sum(...$numbers) {
    $acc = 0;
    foreach ($numbers as $n) {
        $acc += $n;
    }
    return $acc;
}

echo sum(1, 2, 3, 4);
?> 
```

来源： http: [//php.net/manual/en/functions.arguments.php#functions.variable-arg-list](http://php.net/manual/en/functions.arguments.php#functions.variable-arg-list)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-05T13:40:06.350

或者从**PHP 7.1**开始，您现在可以使用类型提示，称为`iterable`

```
function f(iterable $args) {
    foreach ($args as $arg) {
        // awesome stuff
    }
} 
```

此外，它可以代替`Traversable`使用接口进行迭代时使用。它还可以用作生成参数的生成器。

[文档](https://wiki.php.net/rfc/iterable)

# search - 像关系数据库一样使用 Lucene

> ID：828714
> 
> 赞同：5
> 
> 时间：2009-05-06T09:00:24.110
> 
> 标签：search, join, indexing, lucene, rdbms

我只是想知道我们是否可以在 lucene 中实现一些 RDBMS 功能。

示例： 1) 我有 10,000 个项目文档（pdf 文件），必须对其内容进行索引，以使它们可供搜索。2）每个文件都与一个项目有关。项目可以包含项目名称、编号、开始日期、结束日期、位置、类型等详细信息。

我必须在 pdf 文件的内容中搜索给定的关键字，但是在显示结果时，我想显示第 (2) 点中提到的项目元数据。

我的想法是在索引时将一个名为 projectId 的字段与每个 pdf 文件相关联。一旦我们得到它，我们将再次触发搜索以获取项目元数据。

这样我们可以避免重复数据。此外，如果我们想更新项目元数据，我们最终将只在一个地方进行更新。否则，如果我们将此元数据与所有 pdf 文档索引一起存储，我们最终将更新所有文档，这不是我想要的方式。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T12:28:27.883

如果我理解正确，您有两个问题：

1.  我可以在 Lucene 中存储一个项目 id 并将其用于进一步搜索吗？是的你可以。这是一种常见的做法。
2.  我可以使用这个项目 id 来搜索 Lucene 的项目元数据吗？是的你可以。我不知道这是否是个好主意。这取决于您的元数据更新频率和您的访问模式。如果元数据是相对静态的，并且你只能通过 id 访问它，Lucene 可能是一个存储它的好地方。否则，您可以使用项目 ID 作为数据库表的主键，这可能更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-28T20:31:33.383

你可以这样使用 Lucene；

优点：

全文搜索很容易实现，而在 RDBMS 中则不然。

缺点：

参照完整性：您可以在 RDBMS 中免费获得它，但在 Lucene 中，您必须自己实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-08T16:00:00.033

听起来是一件非常好的事情。您将拥有的唯一限制（通过在 Lucene 中存储对项目的引用而不是项目数据本身）是您将无法同时查询文档文本和项目元数据。例如， "documentText:foo OR projectName:bar" 。如果您没有这样的要求，那么似乎将 ID 存储在引用数据库行的 Lucene 中是一件好事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T14:33:59.537

我不确定您的整体设置，但也许[Hibernate Search](https://www.hibernate.org/410.html)适合您。它将允许您将关系数据库的优势与 Lucene 等全文搜索引擎的强大功能相结合。元数据可能与原始 pdf 文档一起存在于数据库中，而 Lucene 文档仅包含可搜索的数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-26T03:06:17.577

这绝对是可能的。但请始终注意，您正在将 Lucene 用于不打算用于的目的。一般来说，Lucene 是为全文搜索而设计的，而不是为映射关系内容而设计的。因此，您的系统越复杂，您的关系内容就越会降低性能。

特别是，有几个领域需要密切关注：

*   将每个字段的值存储在索引中会降低性能。如果您不太在意亚秒级搜索结果，或者您的索引相对较小，那么这可能不是问题。
*   此外，请注意，如果您没有使用默认排名算法，并且您的自定义算法需要有关项目的信息来计算每个文档的分数，这也会对搜索性能产生巨大影响。

如果您需要为关系内容设计的更强大的索引，那么有值得研究的分层索引工具（由 Apache 开发，称为[Jackrabbit的工具）。](http://jackrabbit.apache.org/)

随着您的项目不断增长，您还可以查看同样由 Apache 开发的[Solr](http://lucene.apache.org/solr/)，它提供了一些附加功能，例如多面搜索。

# sql - 我可以在给定的时间跨度后中止特定的 sql 语句吗？

> ID：828715
> 
> 赞同：2
> 
> 时间：2009-05-06T09:00:35.917
> 
> 标签：sql, timeout

如果需要的时间超过指定的秒数，我希望能够中止特定的 sql 语句。我怎样才能做到这一点？

例如，我想做类似的事情：

```
 SET NextStatementTimeOutSeconds = 60
SELECT * FROM MyTable
IF @@LastStatementTimedOut = 1
    PRINT 'Statement timed out after 60 seconds'
ELSE
    PRINT 'Statement completed in less than 60 seconds' 
```

请注意，我编造了`NextStatementTimeOutSeconds`，`@@LastStatementTimedOut`以说明我想做什么。

* * *

感谢您的建议。如果可能的话，我正在考虑在像上面那样的单个 sql 脚本/批处理中使用这样的超时。

背景：我们有几个我希望比 X 秒快的存储过程。所以我会一个接一个地称呼它们；如果一个时间超过 X 秒，我会中止并打印一条语句，如“sproc 13 耗时太长”。数据各不相同，我正在尝试不同的索引更改，所以我想在这些更改之后对所有存储过程进行时间测试，以确保它们都低于 X 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T09:06:09.167

通常超时是在发出 SQL 语句的命令上设置的。例如，如果这是在 C# 中，那么您设置 IDbCommand.CommandTimeout 属性，如果语句未完成，它将在超时到期后抛出 SQLException。这将回滚任何事务。

在 SQL Server 上的计划任务中，我希望当您配置作业时，在某处的向上/向下控件中会有一个值，允许您更改作业的超时。我认为 SQL Server 中的术语是“执行超时”，但恐怕我不知道如何设置它。

关键是 - 查看运行语句的事物，而不是实际语句本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T09:17:13.383

您可以使用[查询调控器](http://msdn.microsoft.com/en-us/library/ms190419.aspx)来限制查询可以运行的时间。缺点是，它是一个全局选项，会影响针对特定数据库启动的所有查询。

> 使用查询调控器成本限制选项指定查询可以运行的时间段的上限。查询成本是指完成对特定硬件配置的查询所需的估计经过时间，以秒为单位。
> 
> 如果您指定一个非零、非负值，查询调控器将禁止执行任何估计成本超过该值的查询。为该选项指定 0（默认值）将关闭查询调控器，并且允许所有查询运行而没有任何时间限制。
> 
> 如果使用 sp_configure 更改查询调控器成本限制的值，则更改的值是服务器范围的。要基于每个连接更改值，请使用 SET QUERY_GOVERNOR_COST_LIMIT 语句。
> 
> 查询调控器成本限制选项是一个高级选项。如果您使用 sp_configure 系统存储过程来更改设置，则只有在 show advanced options 设置为 1 时才能更改查询调控器成本限制。该设置立即生效（无需重新启动服务器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T11:04:28.053

如果您使用的是 SQL Server，则可以将链接服务器添加到将运行查询的数据库中。您可以为链接服务器设置超时，例如：

```
EXEC master.dbo.sp_serveroption @server=N'linkedserver', 
    @optname=N'query timeout', @optvalue=N'1' 
```

然后你可以像这样运行查询：

```
select * from openquery(linkedserver,'select * from ...') 
```

您可以使用[TRY...CATCH](http://msdn.microsoft.com/en-us/library/ms175976.aspx)块在超时发生时捕获它：

```
begin try
select * from openquery(linkedserver,'select * from ...')
end try
begin catch 
print @@error
end catch 
```

对于“查询超时已过期”，@@error 将为 7320。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T09:03:55.457

一种可能性是您可以监视所有活动连接并杀死任何活动的超时。

不过，我以前从来没有做过这样的事情。

# c# - 具有相同soapaction的方法

> ID：828718
> 
> 赞同：3
> 
> 时间：2009-05-06T09:01:21.190
> 
> 标签：c#, soap, wsdl, svcutil.exe

我正在进行 SOAP 服务器的合同优先开发。wsdl 为几个方法声明了相同的soapAction。现在 svcutil 生成的代码为多个方法的 OperationContractAttribute.Action 属性声明相同的值。这会导致运行时错误，即每个操作都必须具有唯一的操作值。

我该如何解决这个问题？当我更改 Action 属性的值时，我的服务器不再接受来自客户端的请求。

**更新**
事实证明，如果routingstyle 设置为soapaction，soapaction 必须是唯一的，这是默认设置。所以我尝试将其设置为 RequestElement。不幸的是，这会导致服务器不再识别客户端的消息。我曾希望 Routingstyle 只会改变服务器的内部行为。

任何提示将不胜感激。

谢谢，问候，米尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-09T07:50:12.273

WCF 中没有解决方案。

像我一样尝试更改路由样式适用于 ASMX，而不是 WCF。

解决方法可能是可行的，但没有标准解决方案。

# java - 带有公式的 Apache POI 颜色单元格

> ID：828721
> 
> 赞同：2
> 
> 时间：2009-05-06T09:02:11.670
> 
> 标签：java, excel, apache-poi

我想用java中的Apache POI创建一个excel，我必须在一个单元格中插入一个公式：A3=B3+C3。

如果他的值> 0，是否可以在 A3 中插入​​另一个为单元格着色的公式？

我使用 Apache POI 2.5.1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T09:15:10.750

您将需要[条件格式](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFConditionalFormatting.html)。

从这个文件：

```
 // Define a Conditional Formatting rule, which triggers formatting
 // when cell's value is greater or equal than 100.0 and
 // applies patternFormatting defined below.
 HSSFConditionalFormattingRule rule = sheet.createConditionalFormattingRule(
     ComparisonOperator.GE, 
     "100.0", // 1st formula 
     null     // 2nd formula is not used for comparison operator GE
 );

 // Create pattern with red background
 HSSFPatternFormatting patternFmt = rule.cretePatternFormatting();
 patternFormatting.setFillBackgroundColor(HSSFColor.RED.index);

 // Define a region containing first column
 Region [] regions =
 {
     new Region(1,(short)1,-1,(short)1)
 };

 // Apply Conditional Formatting rule defined above to the regions  
 sheet.addConditionalFormatting(regions, rule); 
```

它为值> = 100创建一个具有红色背景的单元格。这几乎是您想要的:-)

# database - 除了 SQL（可能使用 Linq）之外，与 .Net 框架一起使用的关系数据库选项？

> ID：828722
> 
> 赞同：0
> 
> 时间：2009-05-06T09:02:31.513
> 
> 标签：database, relational-database

正是标题所说的............除了 SQL Server DB 之外，关于关系数据库实现的其他好的选择的任何想法。

.Net Framework 也必须能够与之通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T09:05:14.923

Oracle、Postgres、MySql……不胜枚举……

.NET 具有用于与 SqlServer 通信的本机库，但您可以连接到 Windows 下支持 ODBC/OLEDB 的任何数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T09:05:26.297

根据您的需要，您可以使用 Oracle、Firebird SQL、SQLite、MySQL、BerkeleyDB 或其他一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T09:05:53.177

其中有很多：[Firebird](http://www.firebirdsql.org/dotnetfirebird/)、[PostgreSQL](http://npgsql.projects.postgresql.org/)、[SQLite](http://sqlite.phxsoftware.com/)、[MySQL](http://www.mysql.com/products/connector/net/)等等。

不过，不知道那里的 LINQ 支持。

# .net - .Net 异常窥视。（更新）

> ID：828732
> 
> 赞同：1
> 
> 时间：2009-05-06T09:06:05.797
> 
> 标签：.net, exception

尝试
{
抛出新异常（“测试”）；
}
finally
{
//检查异常 ????
//日志（异常）；
}

有没有办法从最后的运行时获取异常？
我不能使用 catch :-)

感谢您的回答。
我不能使用 catch 因为它实际上不是我的代码（重构）。
我们想像这样包装一段代码：

```
using(CriticalFlow(policy))  
{  
   //Not my code.  
   flow.Succeeded();  
} 
```

在 CriticalFlow finally 块中，我们需要检查异常，如果成功没有被调用，并以任何方式提醒任何人。
我希望它对最初的问题有所启发。

再次感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T09:10:25.927

```
Exception helper;

try
{

}
catch (Exception ex)
{
    helper = ex;
}
finally
{
   if (helper != null)
   {
      process helper
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T09:09:48.470

当您到达 finally 块时，异常实例已经超出范围。try 块的整个想法是有一个地方来检查异常。如果你不想抓住它，你可以做的就是简单地重新抛出它：

```
try
{
    // some exception is thrown
}
catch (Exception ex)
{
    // do some logging or so
    throw;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T09:10:18.767

不，你不能。如果您可以修改其余代码，则可以编写：

```
Exception e = null;
try
{
    e = new Exception("test");
    throw e;
}
finally
{
    // Examine e
} 
```

但你不能“正常”做任何事情。

你能把整个事情包装在一个日志记录方法中吗？代表在这里可能会有所帮助，例如

```
LogExceptions(delegate
    {
        try
        {
            throw new Exception("test"0;
        }
        finally
        {
            // Not logged yet
        }
    }
); 
```

在哪里`LogExceptions`只尝试指定的操作，捕获任何异常，记录它们并重新抛出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T11:01:19.497

这段代码可以阐明我们的意图：

```
using (CriticalFlow cf = new CriticalFlow())
            {
                // code which can throws
                cf.Completed();
            }

public class CriticalFlow : IDisposable
    {
        private bool _completed = false;

        public void Completed()
        {
            this._completed = true;
        }

        #region IDisposable Members

        public void Dispose()
        {
            if (this._completed == false)
            {
               // can i peek the exception at this point?
            }
        }

        #endregion
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T09:09:52.493

不，异常会在堆栈中抛出，直到它被捕获块捕获。

为什么你不能使用 catch ？:? 您可以捕获异常，并根据需要重新抛出它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T09:10:06.240

对不起，那是不可能的……

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T09:11:27.203

不，您不能直接访问`finally`块中的异常对象。但是，您可以做的是在块中捕获异常`catch`，将其存储在局部变量中，然后使用`throw;`语句重新抛出它。

# subsonic - SubSonic 的独立读/写连接

> ID：828736
> 
> 赞同：1
> 
> 时间：2009-05-06T09:07:27.867
> 
> 标签：subsonic, connection-string, data-access-layer

我们客户生产环境的安全策略要求我们使用单独的连接来执行对数据库的写入和读取。我们决定使用 SubSonic 来生成我们的 DAL。所以我有兴趣知道这是否可能，如果可以，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T09:32:24.017

您可以指定 SubSonic 在运行时使用的提供程序。因此，您可以在从数据库加载时指定读取提供程序（使用您的读取连接字符串），然后在您想要保存到它时指定写入提供程序（使用您的写入连接字符串）。

以下内容未经测试，但我认为它应该为您提供总体思路：

```
 SqlQuery query = new Select()
            .From<Contact>();

        query.ProviderName = Databases.ReadProvider;

        ContactCollection contacts = query.ExecuteAsCollection<ContactCollection>();
        contacts[0].FirstName = "John";
        contacts.ProviderName = Databases.WriteProvider;
        contacts.SaveAll(); 
```

# asp-classic - 我的网站在 OK 和 Error 'ASP 0115' 之间切换

> ID：828737
> 
> 赞同：1
> 
> 时间：2009-05-06T09:07:46.430
> 
> 标签：asp-classic

我的 ASP 网站表现得很奇怪：70% 的时间它都能正常工作。30% 显示此消息

> 活动服务器页面错误“ASP 0115”
> 
> 意外的错误
> 
> /index.asp
> 
> 外部对象中出现可捕获错误 (C0000005)。脚本无法继续运行。

从来没有改变过任何东西，所以有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-05T16:38:11.150

ASP 0115 错误（以及 C0000005 错误，就此而言）可能与权限问题相对应。Microsoft 有一篇关于故障排除的知识库文章位于此处：

[http://support.microsoft.com/default.aspx/kb/194190](http://support.microsoft.com/default.aspx/kb/194190)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T09:12:30.243

[MSDN 上的](http://msdn.microsoft.com/en-us/library/ms951702.aspx)更多信息。

从页面中引用您的错误：

> 例如，当发生 ASP 0115 错误时，浏览器和 IIS 日志可能会显示：
> 
> > 错误“ASP 0115”
> > 意外错误
> > /[Web 名称]/[ASP 文件名].asp
> > 外部对象中出现可捕获错误。脚本无法继续运行。
> 
> 当错误显示在返回的 ASP 页面上时，您知道：
> 
> 1.  导致问题的页面。
> 2.  外部对象发生异常。

# .net - VS2008 双向数据绑定：如何让它工作？

> ID：828744
> 
> 赞同：1
> 
> 时间：2009-05-06T09:10:09.827
> 
> 标签：.net, visual-studio-2008, data-binding

我在一个试用项目中玩 DataBinding 有点卡住了。我有一个只有一个旋转框的简单表单，我想将它绑定到表单的成员。

```
class Form1 {
    public class Data : System.ComponentModel.INotifyPropertyChanged {
        int _value = 10;
        public int value {get;set;}
        public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    }

    public Data data; // the member I want to bind to

} 
```

在 VS IDE 中，我的微调框属性中的数据部分允许我选择 Form1.data 作为数据源，但是

1.  如我所料，spinbox 没有用 10 初始化
2.  更改旋转框值不会触发 Data.value 的获取/设置。

而我就是无法忍受。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T09:36:35.550

对于 object=>control 更新：您的事件不会被引发 - 自动实现的属性不关心`INotifyPropertyChanged`- 您需要将其移出：

```
public class Data : INotifyPropertyChanged {
    int _value = 10;
    public int Value {
        get {return _value;}
        set {
            if(value != _value) {
                _value = value;
                OnPropertyChanged("Value");
            }
        }
    }
    protected virtual void OnPropertyChanged(string propertyName) {
         var handler = PropertyChanged;
         if(handler != null) {
              handler(this, new PropertyChangedEventArgs(propertyName));
         }
    }
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

但是对于另一个（控制=>对象），我希望您没有正确设置绑定。您应该绑定到该`Data.Value`属性，并且您需要`Data`在运行时告诉它您的实例：

```
 someBindingSource.DataSource = data; 
```

或者，如果您`DataBindings`直接使用 - 以下显示它与上述类型一起使用：

```
static class Program {
    [STAThread]
    static void Main() {
        Application.EnableVisualStyles();

        Data data = new Data();
        data.PropertyChanged += delegate {
            Debug.WriteLine("Value changed: " + data.Value);
        };
        Button btn;
        NumericUpDown nud;
        Form form = new Form {
            Controls = {
                (nud = new NumericUpDown()),
                (btn = new Button {
                    Text = "Obj->Control",
                    Dock = DockStyle.Bottom })
            }
        };
        nud.DataBindings.Add("Value", data, "Value",
                       false, DataSourceUpdateMode.OnPropertyChanged);
        btn.Click += delegate { data.Value++; };
        Application.Run(form);
    }
} 
```

# java - 为什么 Spring 的 @Configurable 有时有效，有时无效？

> ID：828747
> 
> 赞同：12
> 
> 时间：2009-05-06T09:10:31.057
> 
> 标签：java, spring, jpa, dependency-injection, annotations

我正在尝试通过 Spring 的 @Configurable 注释和 @Resource 在需要注入的字段上使用自动依赖注入。这涉及一些设置，例如将 spring-agent.jar 传递给我的 JVM。有关完整的详细信息，[请参见此处](http://static.springframework.org/spring/docs/2.5.x/reference/aop.html)。

它工作......主要是。当我的 Tomcat 启动时，我会看到 AspectJ 初始化消息，我的用户对象会自动获取 FileService 引用等。

问题是有时它不会发生。它似乎是完全随机的；有时我启动并且没有注入依赖项，有时它们是。我以前在我的用户上使用@Transactional 时遇到了麻烦，因为它造成了冲突，我相信代理。我正在使用 JPA，所以我的用户用 @Entity 标记，所以我现在最好的猜测是这会造成冲突。我读过你不能自动代理代理。为了抵消冲突，我遵循了一些我在网上找到的关于排除Hibernate（我的 JPA 实现）使用的**CGLIB**和**javassist的注释。**

线索：

*   要么全有，要么全无。我的所有 @Configurable 实例都已注入或没有注入。
*   从数据库重新加载（重新实例化）实体似乎没有帮助；它要么工作要么不工作。
*   多次重新启动 Tomcat 也无法修复它。似乎再次掷骰子的唯一事情是重新部署。换句话说，如果我重新部署它可能会起作用。

我怎样才能弄清楚出了什么问题？有人在 JPA 中使用 @Configurable 吗？为什么实际上没有注入依赖项时，我的*dependencyCheck = true*不会引发错误？

**实体**

```
@Entity
@Configurable(dependencyCheck = true)
@NamedQueries( { @NamedQuery(name = "User.findAll", query = "SELECT user FROM User user"),
    @NamedQuery(name = "User.findByEmail", query = "SELECT user FROM User user WHERE user.email = :email") })
public abstract class User extends BaseModel {

private static final long serialVersionUID = 7881431079061750040L;

@Id
@GeneratedValue(strategy = GenerationType.TABLE)
private Long id;

@Column(unique = true, nullable = false)
private String email;

@Basic(optional = false)
private String password;

@Resource
private transient UserEmailer userEmailer;

@Resource
private transient FileService fileService;

... 
```

**aop.xml**

```
<!DOCTYPE aspectj PUBLIC
    "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
<aspectj>
    <weaver options="-verbose">
        <include within="com.myapp.domain..*" />
        <exclude within="*..*CGLIB*" />
        <exclude within="*..*javassist*" />
    </weaver>
    <aspects>
        <aspect name="org.springframework.beans.factory.aspectj.AbstractInterfaceDrivenDependencyInjectionAspect" />
    </aspects>
</aspectj> 
```

**应用程序上下文.xml**

```
...

<context:spring-configured />

<context:load-time-weaver />

<context:component-scan base-package="com.myapp" />

... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T10:19:31.300

对我来说，这听起来像是 Spring 中一个众所周知的错误：http: [//jira.springframework.org/browse/SPR-5401](http://jira.springframework.org/browse/SPR-5401)。

您是否正在尝试在多个应用程序上下文中使用 Configurable ？在这种情况下，只有其中一个会受到依赖注入。哪一个获胜取决于哪个应用程序上下文是最后一个要加载的上下文。

解决方案？无 :-( 没有解决这个问题的计划。至少 SpringSource 的人在 4 月份在德国举行的 JAX 会议上是这么说的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T07:11:56.593

首先我不得不说，将资源、服务或其他 bean 作为依赖项注入数据模型类可能不是一个好主意。但这是一个设计问题。

对于 @Configurable 的使用，我在从 Spring 上下文外部实例化对象的情况下使用它——比如 Web 应用程序、过滤器或 servlet 中的自定义标签。我尝试使用它们的第一种方法是像你一样通过加载时间编织。这工作得很好，但它有一些缺点，比如热代码部署，而调试不再起作用。

我也确实遇到了您描述的问题，因此我决定从加载时间编织切换到编译时间。为此，我在 Eclipse 中安装了[AJDT 插件](http://www.eclipse.org/ajdt/)，并使用了 Spring 的 aspecjt 支持。这解决了我的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T18:12:21.070

看不出任何明显的东西，所以只是一个建议-您是否尝试过使用编译时编织？希望这会在运行时产生一致的结果，尽管在开发过程中可能会有点麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T12:22:57.523

当注入不起作用时，无论出于何种原因，代码都无法进行任何依赖检查，因此现在会抛出错误。

否则我在这里看不到任何表明随机失败的东西。你能提取一个简化的例子来检查吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T13:47:52.667

听起来您的部署过程是可疑的。您能否进行有效的部署，然后将其复制到目录中。然后进行另一次部署，直到你得到一个不起作用的部署。（以任意顺序）然后最后，使用beyond compare之类的工具来比较两个部署目录结构和文件，看看是否有任何差异。

祝你好运，没有什么比看似随机的问题更能扼杀一些生产力了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-20T04:26:47.810

我找到了原因；因为自定义 bean 没有顺序注册。如果在加载 Spring bean 之前使用了您的 bean `org.springframework.context.config.internalBeanConfigurerAspect`，那么 @Configurable autowire 将不起作用。我的解决方案如下：

```
@Configuration
@EnableTransactionManagement(mode = AdviceMode.ASPECTJ)
@EnableLoadTimeWeaving(aspectjWeaving = AspectJWeaving.ENABLED)
@EnableSpringConfigured
@ComponentScan(basePackages = "zhibo")
public class AppConfig extends WebMvcConfigurationSupport {

    @Bean
    public DemoProcessor demoProcessor() {
        return new DemoProcessor();
    }
}

public class DemoProcessor implements BeanPostProcessor,BeanDefinitionRegistryPostProcessor {

@Override
public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
    return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName);
}
@Override
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {
    String[] beanDefinitionNames = beanFactory.getBeanDefinitionNames();
    Stream.of(beanDefinitionNames).forEach(System.err::println);
}
@Override
public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException {
    String[] beanDefinitionNames = registry.getBeanDefinitionNames();
    Map<String, BeanDefinition> zhiboBeans = new LinkedHashMap<>();
    //1\. remove your beans. let spring's beans go ahead
    Stream.of(beanDefinitionNames).forEach(beanName->{
        BeanDefinition bd = registry.getBeanDefinition(beanName);
        if(bd.getBeanClassName()!=null && bd.getBeanClassName().startsWith("zhibo.")) {
            registry.removeBeanDefinition(beanName);
            zhiboBeans.put(beanName, bd);
        }
    });
    //2\. register your beans again
    zhiboBeans.forEach((k,v)->registry.registerBeanDefinition(k, v));
    }
} 
```

# sql-server - MS SQL Server 2005，将 varbinary 写入文件系统

> ID：828749
> 
> 赞同：0
> 
> 时间：2009-05-06T09:10:43.367
> 
> 标签：sql-server, pdf, varbinary

仅使用 sql 查询是否可以将 varbinary 单元格的内容写入文件系统？我有一个存储 pdf 的列，为了进行一些快速测试，我想将 pdf 写到文件系统中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T09:18:59.290

类似的问题在这里。

[如何将我们所有的图像从 SQL Server 2008 中的 VARBINARY(MAX) 字段转储到文件系统？](https://stackoverflow.com/questions/613154/how-to-dump-all-of-our-images-from-a-varbinarymax-field-in-sql2008-to-the-files)

您需要遍历每一行并将每个 varbinary 字段的 BCP（BulkCopy）转储到文件系统

# sql - SQL：为什么 varchar(50) 是默认值？

> ID：828751
> 
> 赞同：5
> 
> 时间：2009-05-06T09:11:28.187
> 
> 标签：sql, varchar

当我在 Microsoft SQL Server Manager Studio 中创建一个新的 VARCHAR 列时，它默认为 50 长度。这个长度有什么特殊含义吗？如果理论上我可以选择 30 到 70 之间的长度，那么选择 2 的幂（如 32 或在这种情况下为 64）的默认值不是更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T09:22:35.460

因为它是一个不错的小整数......说真的，我认为这是一个非常武断的决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T09:19:23.843

当涉及到字符串的可能长度时，2 的幂是没有意义的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-05-25T06:00:39.600

如果将少于 50 个字符的字符串数据类型声明为 CHAR() 而不是 VARCHAR() 则效率更高

# railo - Where does Railo store files created by ?

> ID：828757
> 
> 赞同：5
> 
> 时间：2009-05-06T09:13:31.427
> 
> 标签：railo, cfml

Where does Railo store files created by when using the file attribute?

I.e.

```
<cflog file="mylogfile" text="SOME ALERT HERE"> 
```

The 'Tag Reference' in the Web Administrator does not give an indication, and neither does [http://wiki.getrailo.org/wiki/3-1-Tags:CFLog](http://wiki.getrailo.org/wiki/3-1-Tags:CFLog)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T09:28:43.447

I tracked it down with a *find* command:

```
/opt/railo/webapps/ROOT/WEB-INF/railo/logs/ 
```

The */opt/railo/* part will vary depending on where railo was installed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T23:55:43.417

Railo stores log files in the Web-Inf directory for each web context if multiple contexts are allowed in your settings (Tomcat for example). Otherwise, they are stored in the main installation.

# regex - 使用正则表达式获取 alt 标签

> ID：828758
> 
> 赞同：0
> 
> 时间：2009-05-06T09:14:38.693
> 
> 标签：regex

我正在解析一些 HTML 源代码。是否有正则表达式脚本来确定 html 文档中的 alt 标记是否为空？

我想看看 alt 标签是否为空。

正则表达式适合这个还是我应该在 C# 中使用字符串操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T09:18:36.513

您必须解析 HTML 并检查标签，使用以下链接，它包含一个用于解析 HTML 标签的 C# 库，您可以遍历标签并获取标签数量：[解析 HTML 标签](http://www.developer.com/net/csharp/article.php/10918_2230091_2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T09:30:06.597

如果这是有效的 XHTML，为什么还需要 Regex？如果您只是搜索字符串：

`alt=""`

...您应该能够找到所有空`alt`标签。

在任何情况下，为搜索构建一个正则表达式也不应该太复杂，考虑到编写不佳的 HTML 标记（尤其是空格）：

```
alt\s*=\s*"\s*" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T09:31:37.623

如果您只想查看页面，那么 CSS 选择器可能会更好，假设您的浏览器支持 :not 选择器。

安装[selectorgadget](http://www.selectorgadget.com/)小书签。在您的页面上激活它，然后将以下选择器放入输入框中，然后按 Enter。

```
img:not([alt]) 
```

如果您正在自动化它，并且可以访问 HTML 的 DOM，您可以使用相同的选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T20:03:18.617

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。您需要的是一个 HTML 解析器。请参阅[您能否提供一个使用您最喜欢的解析器解析 HTML 的示例？](https://stackoverflow.com/questions/773340)对于使用各种解析器的示例。

# installation - 安装 Dynamics AX 2009 Team Server 时出现“数据库正在使用”错误

> ID：828761
> 
> 赞同：0
> 
> 时间：2009-05-06T09:15:01.860
> 
> 标签：installation, dynamics-ax-2009

我已将 Team Foundation Server 设置为用作 Dynamics AX 2009 的 VCS。

现在我尝试安装 AX 2009 Team ID Server（与 TFS 在同一台服务器上），无论我做什么，都会在安装过程中收到以下错误：

> 您的应用程序中发生了未处理的异常。如果单击继续，应用程序将忽略此错误并尝试继续。如果单击退出，应用程序将立即关闭。
> 
> 无法删除数据库“AXTS”，因为它当前正在使用中。

这个错误有点愚蠢，因为 AX Team Server 安装创建了数据库本身！
我会说确实发生了一些错误，并且安装正在尝试删除数据库（没有成功，因为安装本身正在使用它）。

谁能帮我安装 AX 团队服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T09:46:48.067

哦，天哪，我放弃了 SQL Server 2008，改用 SQL Server 2005，现在它可以工作了。

不过，我不知道为什么它不适用于 SQL Server 2008。

# refactoring - 我们为什么要重构？

> ID：828764
> 
> 赞同：9
> 
> 时间：2009-05-06T09:15:11.047
> 
> 标签：refactoring

我想知道我们进行重构的原因并证明它的合理性。我读到很多人对重构的想法感到不安。[重构被描述](http://codebetter.com/blogs/jeremy.miller/archive/2008/05/15/why-do-we-refactor.aspx)为：

1.  前期设计不足的结果。

2.  无纪律的黑客行为

3.  不必要地冒着破坏工作代码稳定的危险活动

4.  浪费资源。

**导致我们重构代码的负责任的原因是什么？**

我在这里也发现了一个类似的问题[how-often-should-you-refactor](https://stackoverflow.com/questions/140677/how-often-should-you-refactor)，它没有提供重构的原因。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-06T09:25:32.147

> 我们为什么要重构？

因为编写代码并**没有真正的替代品。**任何前期计划或经验都无法替代实际的代码编写。这是整整一代人（称为瀑布）的艰辛学习过程。

一旦您开始编写代码并处于其中，您就可以推断它在较低级别上的工作方式，您*确实会*注意到一些超出较高设计视图的事物（性能、可用​​性或正确性）。

重构是完美的。

问问自己：为什么画家要在同一个地方用画笔多次描边？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-06T09:43:20.043

重构是偿还[技术债务](http://martinfowler.com/bliki/TechnicalDebt.html)的方式。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-06T09:18:39.230

为了保持可维护的代码库？

代码的读比写多，因此有必要拥有一个可读、可理解和可维护的代码库。当您看到编写或设计不佳的内容时，可以对其进行重构以改进代码的设计。

你也经常打扫你的房子，不是吗？虽然这可能被认为是浪费时间，但为了保持你的房子干净，让你有一个好的居住环境是必要的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-06T11:09:11.040

我想简单谈谈你的三点。

**1.“前期设计不足的结果”**

常识（以及几本书和博主）告诉我们，我们应该争取尽可能简单、干净的设计来解决给定的问题。虽然很可能在没有充分了解需求和问题域的情况下编写了一些代码，但更常见的是“糟糕的代码”在编写时并不是“糟糕的”；相反，它已经不够了。

需求发生变化，设计必须支持额外的特性和功能。预先预测未来的一些变化并不是不合理的，但是[McConnell](http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/ref=sr_1_1?ie=UTF8&s=books&qid=1241608030&sr=8-1)等人。当没有明确和当前需要这种方法时，正确地警告不要进行高级、过度灵活的设计。

**3.“一种不必要地冒着破坏工作代码稳定的危险活动”**

嗯，是的，如果操作不当。在您寻求对工作系统进行任何重大修改之前，您应该采取适当的措施以确保您不会造成任何伤害 - 几乎是一种“发展[希波克拉底誓言](http://en.wikipedia.org/wiki/Hippocratic_oath)”。

通常，这将通过文档和测试的混合来完成，而且通常情况下，代码会胜出，因为它是对实际行为的最新描述。实际上，这意味着[单元测试](http://msdn.microsoft.com/en-us/library/aa292197(VS.71).aspx)套件具有良好的覆盖率，因此如果重构确实引入了意想不到的问题，这些问题就会被识别并解决。

显然，当你寻求重构时，你会破坏一定数量的测试，尤其是因为你试图修复一些被破坏的代码契约。但是，如果您有适当的机制来发现意外错误，那么完全可以不受惩罚地进行重构。

**4.“资源浪费”**

其他人提到了[技术债务](http://martinfowler.com/bliki/TechnicalDebt.html)的概念，简单地说，随着时间的推移，此类系统的复杂性会增加，并且必须通过重构和其他技术来减少其中的一些累积，以便合理便利未来发展。换句话说，有时你必须硬着头皮继续你一直推迟的改变，因为否则当你在那个领域添加新东西时，你会让糟糕的情况变得更糟。

显然，有时间和地点来偿还这些东西；除非你有足够的现金去做，否则你不会尝试偿还贷款，而且你不能在开发的关键阶段随意重构。尽管如此，通过决定解决代​​码库中的一些问题，您可以节省未来的开发时间，从而节省金钱，甚至可能在未来更久，避免不得不放弃或完全重写某些超出范围的组件的成本你的理解。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-06T09:20:54.963

如果您的代码是

*   低效
*   越野车
*   难以扩展
*   难以维护

这一切都归结为原始代码不是很好，所以你改进它。如果你有合理的单元测试，它根本不应该是危险的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-06T09:21:33.997

因为后见之明比远见容易。

软件是人类创造的最复杂的东西之一，因此事先考虑所有事情并不容易。对于大型项目，团队（至少对于由人类组成的团队）甚至不可能在实际开始开发之前考虑所有事情。

另一个原因是软件没有被构建，它正在增长。这意味着软件可以而且必须适应不断变化的需求和环境。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-06T15:51:34.247

正如 Martin Fowler 所说，关于软件更改要求的唯一令人惊讶的是，任何人都对此感到惊讶。

要求会改变，新功能会被要求。这是一件好事。增强工作在大多数情况下都会成功，当它们失败时，它们的失败很小，所以有预算可以做更多的事情。大型前期设计项目经常失败（一项统计显示失败率为 66%），所以要避免它们。避免它们的方法是为第一个版本设计足够的内容，并且随着增强功能的添加，重构到看起来系统最初打算这样做的程度。可以做到这一点的项目的生命周期（发布数据格式或 API 时会出现问题——一旦上线，您就不能再保持原始状态了）是不确定的。

针对这四点，我想说一个回避重构的过程需要：

1.  一个没有任何变化的静态世界，因此前期设计可以完美地击中一个不动的目标。
2.  将导致丑陋的黑客解决没有被重构的设计缺陷。
3.  由于害怕更改现有代码集，会导致危险的代码重复。
4.  将在工程问题和构建大型设计工件上浪费资源，以预期永远不会构建的需求，导致大量代码和复杂性拖累项目而没有提供任何价值。

一个警告，不过。如果你没有适当的支持，在简单案例的自动化工具中，在更复杂的案例中没有彻底的单元测试，那将会受到伤害，将会引入新的错误，并且你会产生（相当理性的）恐惧做更多。重构是一个很好的工具，但它需要安全设备。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-06T09:24:04.770

另一个需要重构的场景是 TDD。TDD 的教科书方法是只编写通过测试所需的代码，然后将其重构为更好的代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-06T10:09:01.010

...因为编码就像园艺。随着时间的推移，您的代码库会增长，您的领域也会发生变化。那时的好主意现在通常看起来像一个糟糕的设计，而现在的好设计在未来可能不是最优的。

代码永远不应被视为永久的人工制品，也不应被视为太神圣而无法触及。应该通过测试来获得信心，重构是一种促进变革的机制。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-06T11:30:29.210

1.  对需求的理解不足：

    如果开发人员对需求没有清晰的理解，最终的设计和代码就不能满足客户。后来随着需求变得更加清晰，重构变得必不可少。

2.  支持新要求。

    如果一个组件是旧的，在大多数情况下，它将无法处理激进的新需求。然后，进行重构变得至关重要。

3.  现有代码中有很多错误。

    如果你花了很长时间在办公室修复一个特定组件中的一些讨厌的错误，那么它最早成为重构的自然选择。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-06T11:36:27.557

虽然很多其他人已经说了完全正当的理由，但这是我的：

因为它很*有趣*。这就像在障碍赛中击败自己的时间，在手臂摔跤中拥有更强壮的二头肌或在您选择的游戏中提高您的高分。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-06T12:40:17.387

一个直截了当的答案是，需求发生了变化。无论您的设计多么优雅，以后的某些要求都不会购买。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-06T09:21:17.053

我重构是因为：

1.  通常，我的代码第一次远非最佳。
2.  事后诸葛亮通常是 20-20。
3.  我的代码将更容易为下一个人维护。
4.  我为自己留下的工作感到职业自豪。
5.  我相信现在花费的时间可以节省更多的时间（和金钱）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-06T09:22:17.677

前期：当 a) 有工具支持并且 b) 你有一个可以在重构后运行的测试套件以检查软件的功能时，重构并不一定是危险的。

重构的主要原因之一是，有时您会发现代码被多个代码路径使用，并且您不想复制（复制和粘贴）而是重用。如果您在该代码中发现错误，这一点尤其重要。如果您已将重复的代码重构为自己的方法，则可以修复该方法并完成。如果您复制和粘贴代码，您很可能不会修复所有出现此代码的地方（想想有几个成员和数千行代码的项目）。

你当然不应该仅仅因为重构而进行重构——那真的是在浪费资源。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-06T09:22:52.697

无论出于何种原因，当我创建或找到一个滚动到屏幕外的函数时，我知道是时候坐下来考虑是否应该重构它——如果我必须滚动整个页面才能将函数作为总体而言，它可能不是可读性或可维护性的光辉例子。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-06T09:23:16.550

让疯狂的东西变得理智。

当代码在复制 + 粘贴和缺乏架构指导下遭受如此多的痛苦时，我主要进行重构，以至于理解代码的行为类似于重新组织它并删除重复。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-05-06T09:27:24.107

犯错是人为的，当你开发软件时，你总是会犯错误。从一开始就创建一个好的设计很有帮助，团队中有熟练的程序员也是一件好事，但是他们总是会犯错误，并且会出现代码难以阅读、紧密耦合或无功能等. 重构是在这些缺陷已经发生时修复它们的工具。你不应该从一开始就停止努力防止这些事情发生，但是当它们发生时，你可以修复它们。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-05-06T09:38:31.023

重构对我来说就像清理我的办公桌；它创造了一个更好的工作环境，因为随着时间的推移它会变得混乱。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-05-06T09:39:55.620

我重构是因为，如果没有重构，随着时间的推移，将新功能添加到代码库中会变得越来越难。如果我要添加功能 A、B 和 C，功能 C 会更快完成，我的痛苦和痛苦会更少，如果我在功能 A 和 B 之后花时间重构。我更快乐，我的老板更快乐，我们的客户更快乐。

我认为值得重申，在任何涉及重构的对话中，重构是*可验证的行为保持*。如果在“重构”结束时，您的程序有不同的输出，或者如果您只是认为但无法证明它具有相同的输出，那么您所做的并不是重构。（这并不意味着它毫无价值或不值得做——也许这是一种改进。但它不是重构，不应该与它混淆。）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-05-06T09:45:46.043

重构是任何敏捷软件开发方法的核心组成部分。

除非您完全了解项目的所有要求和技术限制，否则您无法进行完整的前期设计。在这种情况下，与其使用传统的瀑布方法，不如使用敏捷方法——敏捷方法专注于快速适应不断变化的现实。以及如何在不重构的情况下调整源代码？

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-05-06T09:46:29.630

*你所有的观点都是人们为什么*要重构的常见描述。我想说人们*应该*重构的原因在于第 1 点：前期大设计 (BDUF) 几乎总是不完美的。您在构建系统时会了解它。在试图预测*可能*发生的事情时，您通常最终会构建复杂的解决方案来处理从未真正发生过的事情。（YAGNI - 你不会需要它）。

因此，一个更好的解决方案是设计您知道您将需要的系统部分，而不是 BDUF 方法。遵循[单一职责原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)，使用[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)/[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，以便您可以在需要时更换系统的某些部分。

为您的组件编写测试。然后，当您的系统需求发生变化或您发现初始设计中的缺陷时，您可以重构和扩展您的代码。由于您已经进行了单元测试和集成测试，因此您将知道重构是否以及何时会破坏某些东西。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-05-06T09:54:49.407

我发现代码设计和实现，特别是对于不熟悉的大型项目是一个学习过程。

项目的范围和要求会随着时间的推移而变化，这会对设计产生影响。可能是在花了一些时间实施您的产品之后，您发现您的计划设计不是最佳的。也许客户添加了新的要求。或者，您可能正在向旧产品添加附加功能，并且您需要重构代码以充分提供此功能。

以我的经验，代码写得不好，重构已成为防止产品失败并确保其可维护/可扩展的必要条件。

我相信迭代设计过程，早期进行原型设计是减少以后重构的好方法。这也允许您尝试不同的实现以确定最合适的实现。

不仅如此，你正在做的事情可能会有新的想法和方法。为什么要坚持使用如果可以改进可能会出现问题的旧的、易错的代码？

简而言之，项目会随着时间而改变，这就需要改变结构以确保满足新的要求。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-05-06T10:09:13.990

根据我自己的个人经验，我进行了重构，因为我发现如果我从一开始就按照我想要的方式制作软件，那么创建一些东西需要很长时间。

因此，我重视开发软件的实用主义而不是干净的代码。一旦我运行了某些东西，我就会开始将其重构为应有的方式。不用说，代码永远不会变成一段难以阅读的内容。

顺便说一句——我在青少年时期阅读了史蒂夫·麦康奈尔 (Steve McConnell) 的一些材料后获得了软件工程学位。我喜欢设计模式、良好的代码重用、经过深思熟虑的设计等等。但是我发现在我自己的项目上工作时，最初从这个角度设计东西是行不通的，除非我是我所使用的技术的绝对专家（事实并非如此）

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-05-06T10:46:32.090

大型重构（重构模块、类层次结构、接口）和“单元”重构（在方法和类中）是有区别的。

每当我接触一段代码时，我都会进行单元重构——重命名变量、提取方法；因为实际上看到我面前的代码给了我更多的信息来让它变得更好。有时重构也能帮助我更好地理解代码在做什么。就像写作或绘画一样，你从脑海中提取出一个模糊的想法；把一个粗略的骨架放在纸上；然后进入代码。然后，您可以在代码中细化粗略的想法。

[使用 C# 中的ReSharper](http://en.wikipedia.org/wiki/ReSharper)等现代重构工具，这种单元重构非常简单、快速且风险低。

大型重构更难，破坏更多东西，并且需要与您的团队成员沟通。当这些需要发生时，每个人都会很清楚——因为需求已经发生了很大的变化，以至于原始设计不再有效——然后它们应该像新功能一样进行规划。

我的最后一条规则 - 仅重构您实际正在处理的代码。如果不需要更改代码的功能，那么它就足够了，不需要进一步的工作。

避免仅仅为了重构而重构；那只是重构！

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-05-06T11:04:08.773

进行重构以帮助使代码更易于理解/记录。

*   给一个方法一个更好的名字——也许以前的名字不清楚或不正确。
*   为变量提供更具描述性/更好的名称。
*   将一个非常长的方法分解为许多较小的方法，代表解决问题所涉及的步骤。
*   将类移动到新的包（命名空间）以协助组织。
*   减少重复代码。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-05-06T15:31:48.380

第一点还重要吗？如果你正在重构，那么前期设计显然是有缺陷的。不要浪费时间担心原始设计中的缺陷；这是旧消息。重要的是你现在拥有什么，所以花时间重构。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-05-06T15:54:05.487

我重构是因为适当的重构使维护变得更加容易。我不得不维护大量糟糕、糟糕的代码，而且我不想交出我为其他人编写的任何代码来维护。

臭代码的维护成本几乎总是高于甜代码的维护成本。

# functional-programming - 函数式：构造一个整数列表 1..n

> ID：828765
> 
> 赞同：3
> 
> 时间：2009-05-06T09:15:15.150
> 
> 标签：functional-programming, recursion, scheme, sml

这不是家庭作业。我正在自学标准机器学习。我也懂一点 Scheme，所以这个问题应该可以用任何一种语言来回答。

我自己强加的任务是编写一个函数来构造一个从 1 到 n 的整数列表。例如，list(7) 应该返回 [1,2,3,4,5,6,7]。O(n) 解决方案将是理想的。

很容易在线性时间内反向构造一个列表（即 [n,n-1,..,1]）：

```
fun list 1 = 1::nil
|   list n = n::list(n-1); 
```

我尝试构建一个列表是 O(n^2) 因为追加操作是线性的。

```
fun list 1 = 1::nil
|   list n = list(n-1) @ n::nil; 
```

我的下一个尝试是通过从 ni​​l 开始，将 n 附加到前面，然后向后递归到 1 来构建从末端到前面（从右到左）的列表。但它根本不起作用。

```
fun list n = (if n = 1
              then 1
              else list(n-1) :: n) :: nil; 
```

有些东西让我觉得我需要一个帮助函数来构建未终止的列表以用于递归，但我很难过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T13:52:34.640

### 使用[基础库](http://www.standardml.org/Basis/)，

```
fun list n = List.tabulate (n, fn x => x + 1) 
```

### 用一个简单的蓄能器，

```
val list =
    let fun list' k 0 = k
          | list' k n = list' (n::k) (n-1)
    in list' nil end 
```

这会从尾端开始构建一个列表。如果你想到降价，

```
 list 5
=> list' nil 5
=> list' (5::nil) 4
=> list' (4::5::nil) 3
=> list' (3::4::5::nil) 2
=> list' (2::3::4::5::nil) 1
=> list' (1::2::3::4::5::nil) 0
=> [1, 2, 3, 4, 5] 
```

### 或者，

> 有些东西让我觉得我需要一个帮助函数来构建未终止的列表以用于递归，但我很难过。

未终止列表的表示是一个接受列表并返回列表的函数：例如，要表示`10::_`，您可以使用`fn x => 10::x`。

```
fun list n =
    let fun list' m k = if m > n then k nil else
                        list' (m+1) (fn x => k (m::x))
    in list' 1 (fn x => x) end 
```

再一次，如果你想到减少，

```
 list 5
=> list' 1 (fn x => x)
=> list' 2 (fn x => (fn x => x) (1::x))
=> list' 3 (fn x => (fn x => (fn x => x) (1::x)) (2::x))
=> list' 4 (fn x => (fn x => (fn x => (fn x => x) (1::x)) (2::x)) (3::x))
=> list' 5 (fn x => (fn x => (fn x => (fn x => (fn x => x) (1::x)) (2::x)) (3::x)) (4::x))
=> list' 6 (fn x => (fn x => (fn x => (fn x => (fn x => (fn x => x) (1::x)) (2::x)) (3::x)) (4::x)) (5::x))
=> (fn x => (fn x => (fn x => (fn x => (fn x => (fn x => x) (1::x)) (2::x)) (3::x)) (4::x)) (5::x)) nil
=> (fn x => (fn x => (fn x => (fn x => (fn x => x) (1::x)) (2::x)) (3::x)) (4::x)) (5::nil)
=> (fn x => (fn x => (fn x => (fn x => x) (1::x)) (2::x)) (3::x)) (4::5::nil)
=> (fn x => (fn x => (fn x => x) (1::x)) (2::x)) (3::4::5::nil)
=> (fn x => (fn x => x) (1::x)) (2::3::4::5::nil)
=> (fn x => x) (1::2::3::4::5::nil)
=> [1, 2, 3, 4, 5] 
```

在这种情况下，算法的结构可以使普通的数据结构足以满足累加器的需求，但是使用延续作为累加器是一种非常强大且有用的技术，不容忽视。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T09:16:44.397

一种经典的方法是以相反的顺序构建它，然后反转它。这是 O(n) 的两倍，当然也就是 O(n)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T09:37:03.600

这是一个解决方案：

```
fun list n =
  let
    fun f 1 m = m::nil
    |   f n m = m::f (n-1) (m+1)
  in
    f n 1
  end; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T12:45:24.893

这是一个使用辅助函数和启用尾递归的累加器的版本：

```
fun list n =
  let
    fun aux i acc = 
      if i > 0
      then aux (i-1) (i::acc)
      else acc
  in
    aux n nil
  end; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-07T03:50:42.550

对于这样的列表问题，通常更容易解决更一般的问题。

> 如何按顺序构建包含整数*i*的列表，使得*n <= i <= m*？

该解决方案有一个基本案例和一个归纳步骤：

*   如果*n > m*，则列表为空。

*   如果*n <= m*，解决方案是写*n*后跟问题*n+1 <= i <= m*的解决方案。

此视图可快速生成清晰、简洁的 ML 代码（经过测试）：

```
fun range n m = if n > m then [] else n :: range (n+1) m
fun list n = range 1 n 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T12:39:43.740

```
(define (iota n)
  (let f ((i n)(a '())
    (if (zero? i)
        (reverse a)
        (f (- i 1) (cons i a))))) 
```

# delphi - Delphi 服务中的 GnuPG 和 CreateProcess

> ID：828766
> 
> 赞同：0
> 
> 时间：2009-05-06T09:15:31.640
> 
> 标签：delphi, service, pgp, gnupg

尝试将[GnuPG](http://gnupg.org/)与 Delphi (Win32) 一起使用。我需要使用这样的控制台命令签署一些文件：

> `"C:\Program Files\GNU\GnuPG\gpg.exe" -a -u Alex --passphrase secretpassword --yes --clearsign -o C:\Result.asc C:\InputFile.txt`

首先，我创建了普通的 VCL Forms App 并使用了`CreateProcess`函数，一切正常，但是当我将该代码传输到我的服务应用程序时，gpg.exe 以代码 2 退出。也许我错过了什么？有任何想法吗？

**更新**

以防万一有人遇到这样的问题。GnuPG 将密钥存储在其中，`C:\Documents And Settings\<username>\Application Data\gnupg\`但是当服务从另一个用户帐户 (SYSTEM) 运行时 - 它找不到您的密钥。GL & 高频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T09:34:32.793

尝试转储 stderr 并查看是否有任何结果。您也许可以通过管道输入消息。读取密码可能有问题。我有点记得必须将密码短语传递到 gpg 而不是将其指定为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T09:53:04.420

作为服务应用程序的（子），没有 shell 作为父应用程序，因此子应用程序可能根本无法使用 stdio。尝试使用 cmd /c 或通过 shellexecute 执行。或者更好的是，使用并不总是需要 stdio 的程序。

# c# - 如何知道我的 winform 是否位于 c# 中的其他窗口之上？

> ID：828770
> 
> 赞同：-1
> 
> 时间：2009-05-06T09:16:24.617
> 
> 标签：c#, winforms, z-order

我需要知道我的应用程序中的特定窗口是否位于所有其他窗口（包括其他应用程序）之上。我尝试了该`TopLevel`属性，但它告诉我它是否仅在我的应用程序中是 Toplevel，我还需要知道与其他应用程序相关的信息。怎么做，宁愿不使用 Windows API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T09:19:55.607

也许这将有助于 MSDN [GetTopWindow](http://msdn.microsoft.com/en-us/library/ms633514.aspx)

# java - 为什么这个 Java 格式的输出不是右对齐的？

> ID：828771
> 
> 赞同：1
> 
> 时间：2009-05-06T09:16:34.490
> 
> 标签：java, formatting

我是初学者，我正在尝试格式化输出。
我正在尝试生成一个小数表：

```
for (int i = 0; i < 8; i++) {
  for (int j = 0; j < 8; j++) {
    row = (double) 5*i;
    column = (double) j + 1;
    System.out.format("% 6.3f", row/column);
    System.out.print("\t");
  }
  System.out.format("%n");
} 
```

这会产生：

```
 0.000   0.000    0.000   0.000   0.000   0.000   0.000   0.000 
 5.000   2.500    1.667   1.250   1.000   0.833   0.714   0.625 
 10.000 5.000    3.333   2.500   2.000   1.667   1.429   1.250  
 15.000 7.500    5.000   3.750   3.000   2.500   2.143   1.875  
 20.000 10.000   6.667   5.000   4.000   3.333   2.857   2.500  
 25.000 12.500   8.333   6.250   5.000   4.167   3.571   3.125  
 30.000 15.000   10.000  7.500   6.000   5.000   4.286   3.750  
 35.000 17.500   11.667  8.750   7.000   5.833   5.000   4.375 
```

API 说如果没有抛出“-”标志，那么输出将是右对齐的，这就是我想要的。我在 % 之后放了 ' ' 表示我希望在必要时用空格填充输出。我错过了什么？

（我没有使用作业标签，因为我没有注册任何课程。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T09:27:10.300

您在格式化字符串中错误地添加了一个空格：

```
System.out.format("% 6.3f", row/column); 
```

应该：

```
System.out.format("%6.3f", row/column); 
```

你得到：

```
 0.000         0.000         0.000         0.000         0.000         0.000         0.000         0.000        
 5.000         2.500         1.667         1.250         1.000         0.833         0.714         0.625        
10.000         5.000         3.333         2.500         2.000         1.667         1.429         1.250        
15.000         7.500         5.000         3.750         3.000         2.500         2.143         1.875        
20.000        10.000         6.667         5.000         4.000         3.333         2.857         2.500        
25.000        12.500         8.333         6.250         5.000         4.167         3.571         3.125        
30.000        15.000        10.000         7.500         6.000         5.000         4.286         3.750        
35.000        17.500        11.667         8.750         7.000         5.833         5.000         4.375 
```

# c++ - 类中关联容器数据成员的比较函数

> ID：828776
> 
> 赞同：0
> 
> 时间：2009-05-06T09:17:14.427
> 
> 标签：c++, visual-c++

我有这样的课：

```
class MyClass{
public:
    MyClass(int Mode);
private:
    std::map < int, std::string, CompFunc > data;
}; 
```

数据成员必须根据 Mode 参数使用不同的比较函数。

```
if Mode == 1, then use CompFunc1.
if Mode == 2, then use CompFunc2.
etc. 
```

但是 CompFunc 模板参数是固定在那里的，我怎么能动态地使它呢？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T09:56:54.270

```
struct Cmp
{
    explicit Cmp(int mode) : mode_(mode) {}

    bool operator()(int lhs, int rhs) const
    {
        switch (mode_)
        {
            case 1: return CompFunc1(lhs, rhs); break;
            case 2: return CompFunc2(lhs, rhs); break;
            // etc.
        }
    }

private:
    int mode_;
};

class MyClass
{
public:
    explicit MyClass(int Mode) : cmp(mode), data(cmp) {}
private:
    Cmp cmp;
    std::map<int, std::string, Cmp> data;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T09:34:53.120

您可以使用与 map 相同的比较谓词。

```
class MyClass
{
    CompFunc cmp;
    map<int, std::string, CompFunc> data;
public:
    MyClass(int Mode) : cmp( get_cmpfunc(Mode) ), data(cmp) {...}
    bool operator == (...)
    {
        cmp(...);
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T09:20:20.863

编写一个符合正确接口的包装类/函数，但根据模式（或其他变量）分派到正确的函数。

# iphone - iphone - 从 uitableviewcell 访问 uitableviewcontroller

> ID：828777
> 
> 赞同：11
> 
> 时间：2009-05-06T09:17:22.897
> 
> 标签：iphone, uitableview

我有这样的结构......

```
UITableViewController -> UITableViewCell -> UIView 
```

我需要`UIView`访问 HashTable ( `NSMutableDictionary`)`UITableViewController`

有没有办法简单地从 ViewCell 访问 ViewController （使用 [ViewCell superview] 显然行不通）......我需要通过 AppDelegate 使用`[[UIApplication sharedApplication] delegate]`吗？

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-17T18:11:33.200

这应该可以解决问题：

```
UITableView *tv = (UITableView *) self.superview.superview;
UITableViewController *vc = (UITableViewController *) tv.dataSource; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-06T10:24:27.387

如果需要，我通常会维护从 UIView 到 UIViewController 的弱引用，通常是通过创建类似这样的方法：

```
-(MyView*)initWithController:(CardCreatorViewController*) aController andFrame:(CGRect)aFrame
{
    if (self = [super initWithFrame:aFrame]) 
    {
       controller = aController;
       // more initialisation here
    }

    return self;
} 
```

如果您想要一个更加解耦的解决方案，您也可以使用委托模式。我倾向于认为这对于视图及其控制器来说太过分了，但我会将它与控制器和子控制器系统一起使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-28T19:09:12.047

您可以为此创建一个类别：

```
@implementation UITableViewCell (FindTableViewController)

- (id<UITableViewDataSource>)tableViewController
{
    UIView *view = self;
    while (!(view == nil || [view isKindOfClass:[UITableView class]])) {
        view = view.superview;
    }

    return ((UITableView *)view).dataSource;
}

@end 
```

然后您可以简单地`self.tableViewController`从单元格本身访问（假设您已包含此类别）。您可能需要将其转换为您的表视图控制器的类。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-06T13:49:59.357

由于 UITableViewCell 位于视图层次结构中的某个位置，因此您可以通过检索 view.superview 来访问您的根视图，直到获得它。如果您不想在视图中添加任何属性，则可以通过视图的`nextResponder`属性访问其控制器。当然，您必须将其转换为您需要的任何类，并且它可能不是对该属性的最干净的使用。这是一个快速n-dirty hack。

如果您正在寻找可以向您的孩子展示的东西，我的目标是通过您的应用程序委托，或者如果您的视图控制器恰好是单例，只需实现单例设计模式并通过它访问它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-25T09:41:20.583

Kare Morstol 回答的一些修改：

tableviewcell 的层次结构在 iOS 5.0（我的测试版）

```
cell.superview = tableview  
cell.superview.superview = UIViewControllerWrapperView 
```

所以，使用 cell.superview 来获取 tableview。并且tableview和tableviewController默认有delegate、dataSource的关系。您可以通过或
获取 tableviewController 参考。 `tableview.delegate``tableview.dataSource`

```
UITableView *tableView = cell.superview;  
UITableViewController *tableViewController = tableView.delegate; // or tableView.dataSource` 
```

# .net - 持久消息/服务总线 - 自己动手还是冒着学习曲线的风险？

> ID：828778
> 
> 赞同：6
> 
> 时间：2009-05-06T09:18:09.667
> 
> 标签：.net, message-queue, servicebus

我们有一个客户端应用程序需要向服务器发送消息以获取各种通知。为了客户端可以偶尔连接运行，我将使用消息队列方法。队列处理将从队列中取出消息并调用 Web 服务，该服务会将它们放在另一个队列中以最终进行处理。这个问题是关于客户端环境的；服务器环境已经确定。

我不想使用 MSMQ，因为我们无法控制所有客户端 PC 以正确安装/配置和保护 MSMQ，而且由于用于调查 MSMQ 队列内容的工具质量，支持更具挑战性. SQL Server 2005 Express 在所有机器上，用于为我们的应用程序存储数据。

我目前有两个选择：

1.  编写一个相当基本的持久消息队列，在序列化消息后将消息存储在表中，然后使用`ThreadPool.QueueUserWorkItem`针对每种消息类型配置的处理程序处理它们。总之，`System.Transactions.TransactionScope`如果它们被成功处理，它们只会从持久队列中删除。
2.  在客户端上使用 NServiceBus（这是我们作为一个团队使用的服务总线，因此 MassTransit 等不是选项），以及使用本地数据库的 Service Broker 传输。

我对服务总线几乎没有经验（我仍然没有真正了解服务总线术语），因此与编写更简单的东西以我需要的方式满足我的要求相比，我担心学习曲线（部署是一个**大**考虑）。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-23T23:48:45.567

好吧，我不知道我会推荐 MSMQ，但我会建议有很多边缘案例需要考虑“自己动手”。

即使使用线程池方法，请注意，如果您关心，可能存在排序问题 -由于线程池处理工作项的方式，顺序发布到线程池的两个项目可能*不会按顺序执行。*

您还需要考虑消息的持久性，它们应该存在多长时间，如何检测“致命”未传递状态，以及在这种情况下该怎么做。

在您的应用程序在排队消息的同时出现故障的情况下也有许多潜在的边缘情况 - 例如，它可能不会得到消息已排队的确认，即使它是。是的，您可以确认队列确认，但您可以无休止地进入确认圈......

为什么不让应用程序检测它何时连接，并在那时发送所有数据？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-13T08:31:46.043

编写了我们自己的服务总线后，我可以告诉您这不是一件容易的事，您将遇到所有其他实施者已经遇到的相同边缘情况。kyoryu 提出了两个非常重要的问题。

您是否自行开发还取决于您在内部拥有的技能，以及将来维护解决方案的技能。

另一个考虑因素是系统的最终规模及其可靠性要求。内部解决方案能否充分扩展？

我们的点对点消息总线 Zebus，基于 ZeroMq（传输）、Cassandra（点发现和持久性）和 Protobuf（序列化）。

1.  没有客户端部署，因为在客户端它只是一个库
2.  [消息持久性](https://github.com/Abc-Arbitrage/Zebus/wiki/Persistence)也使用 Cassandra 提供，并处理许多不同的边缘情况（这在我们的生产环境中定期测试）
3.  它表现良好，因为它是一个无代理解决方案，所以没有单一的性能瓶颈
4.  没有单点故障，因为目录可以与可用的数据存储（例如 Cassandra）一起使用

它是开源和生产测试的[https://github.com/Abc-Arbitrage/Zebus](https://github.com/Abc-Arbitrage/Zebus)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-13T11:10:46.370

最后，我编写了一个使用我自己的 SqlTransport 配置的基本消息总线，以便在引发事件并通知单独的线程来处理消息之前将消息序列化并保存到 SQL Server 数据库表中。

# iphone - 为什么我应该在初始化方法中检查 [self class] == [LevelAppDelegate class]？

> ID：828787
> 
> 赞同：1
> 
> 时间：2009-05-06T09:20:58.927
> 
> 标签：iphone, cocoa-touch, uikit

在 Apple 的 BubbleLevel 示例的 AppDelegate 中，他们执行以下操作：

```
+ (void)initialize {
    if ([self class] == [LevelAppDelegate class]) {
        // Register a default value for the instrument calibration. 
        // This will be used if the user hasn't calibrated the instrument.
        NSNumber *defaultCalibrationOffset = [NSNumber numberWithFloat:0.0];
        NSDictionary *resourceDict = [NSDictionary dictionaryWithObject:defaultCalibrationOffset forKey:BubbleLevelCalibrationOffsetKey];
        [[NSUserDefaults standardUserDefaults] registerDefaults:resourceDict];
    }
} 
```

他们为什么这样做 [self class] == [LevelAppDelegate class] ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T10:40:55.147

如果在加载子类时调用 initialize，此测试可确保初始化代码无效。

[http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-initialize](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-initialize)

# asp.net-mvc - 在 ASP MVC 中处理复杂的 URL

> ID：828797
> 
> 赞同：1
> 
> 时间：2009-05-06T09:24:05.550
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有 - 我认为 - 在 ASP MVC 1.0 中处理的复杂 URL：我在大多数控制器中的所有操作始终需要两个参数：帐户和项目。这是每个行动的要求之上。这意味着一个典型的 URL 是这样的：

```
http://abcd.com/myaccount/projects/project_id/sites/edit/12 
```

在此示例中： **myaccount**是帐户名称。**projects**可以是控制器，其他选项如**位置**、**员工**。**project_id**是**myaccount**中项目的 id ，**站点**可以是控制器，其他选项例如**人员**或**付款**。**edit**是一个动作，**12**是编辑的站点的 id。（希望这足够清楚）

现在一个选项是创建一个路由并将 project_id 和 account 传递给控制器​​的所有操作，方法是向所有操作添加两个额外的参数。这并不是真正需要的，而且我不确定两个控制器（项目和站点）是否会在这里工作。

我的理想情况是使用某种上下文来调用控制器操作并将 project_id 和 myaccount 存储在其中。然后可以以正常方式处理其余参数，例如：

```
// sitescontroller
public ActionResult Edit(string id)
{
string account = somecontext["account"];
string project_id = somecontext["project"];
// do stuff
} 
```

关于如何/在哪里发生这种情况的任何想法？另外这将如何与 ActionLink 一起工作（即基于此上下文生成正确的链接）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T10:48:38.217

您首先需要将令牌添加到您的路线中，例如`{company}/projects/{project}{controller}/{action}/{id}`. 然后，如果您编写自己的 IControllerFactory ，那么通过构造函数将值从 RouteData 推送到控制器中将非常容易，或者您想要这样做。可能最简单的入门方法是继承 DefaultControllerFactory 并覆盖 CreateController 方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-06T10:26:27.147

这对我来说完全没有意义。为什么你会有类似于以下的路线：

```
{controller}/{id}/{controller}/{id} 
```

?

# iphone - UIApplicationDelegate 协议中神秘的 +initialize 方法：为什么我在文档中看不到？

> ID：828799
> 
> 赞同：4
> 
> 时间：2009-05-06T09:24:39.887
> 
> 标签：iphone, cocoa-touch, uikit

在苹果的 BubbleLevel 示例中，他们实现了一个 +initialize 方法。他们说：

> +initialize 在类接收任何其他消息之前调用，因此它是设置应用程序默认值的好地方

但是当我尝试在 UIApplicationDelegate 协议文档中查找它时，他们甚至没有提到 +initialize 方法。还有更多我应该知道的“隐藏”方法吗？当它们没有出现在协议或类的文档中时，我怎样才能找到它们？os是从其他地方继承的吗？我怎样才能从哪里知道？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T10:29:50.180

*   (void)initialize 是 NSObject 的方法

您可以在文档中找到它

[http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-initialize](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-initialize)

# asp.net - 如何在 ASP.NET MVC 项目中模拟 ScriptManager.RegisterStartupScript()

> ID：828802
> 
> 赞同：4
> 
> 时间：2009-05-06T09:25:35.843
> 
> 标签：asp.net, javascript, asp.net-mvc, scriptmanager

我正在使用 ASP.NET MVC 项目和 jQuery 来处理异步请求。有时对于异步请求，我需要返回一个初始化 JavaScript 片段并与一个 HTML 片段一起执行（我希望这个 JavaScript 在服务器上呈现）。

现在我正在使用我自己的带有 RegisterStartupScript() 方法的 ScriptsHelper 类（将数据添加到 HttpContext.Current.Items）。然后在针对异步请求的 global.asax HttpApplication.EndRequest() 中，我将所有已注册的脚本附加到输出（包含在标签中）。当接收到的 HTML 附加到 DOM 时，jQuery.fn.load() 成功执行它们——这正是我所需要的。您认为这是“正确”（好）的解决方案，还是您可以提出更好的建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T19:49:47.237

在我开始使用 jquery 并最终求助于使用`eval()`. 我正在返回一个 javascript 文本片段作为不可见 DOM 元素值的一部分，以及我插入到 DOM 中的其余 HTML。

我在 IE6 中调试这种动态生成的 javascript 时遇到了很多麻烦，所以这个解决方案对我来说效果很好，因为我可以检查正在评估的 DOM 元素的值。但是，我一直对使用`eval`.

听起来你的解决方案有一个合理的服务器端渲染架构，而不是我的意大利面条代码，而且这种技术看起来很符合 jQuery.fn.load 的精神，所以我不会太担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-22T10:59:37.630

是的，我认为 jQuery 在内部为你调用 eval() - 你在使用 append 吗？我认为这种技术在大多数情况下都非常有效。如果从服务器返回的数据在重复的列表中，您可能希望使用添加到 jQuery 1.3 的 live 函数来查看它允许您将事件附加到与您的选择器匹配的所有当前和未来元素。查看这些文章：

*   [居住](http://docs.jquery.com/Events/live)
*   [jQuery 现场活动](http://www.thefutureoftheweb.com/blog/jquery-live-events)

另外需要考虑的是一个[帮助管理 asp.net mvc 的脚本和 css 的工具](http://weblogs.asp.net/rashid/archive/2009/05/02/script-and-css-management-in-asp-net-mvc-part-2.aspx)。我一直在使用它，我喜欢它，因为它可以组合文件并压缩它们。你也可以从你的网络配置中配置它。

# database-design - 创建和维护电影数据库的最佳方法是什么？

> ID：828803
> 
> 赞同：-3
> 
> 时间：2009-05-06T09:25:39.227
> 
> 标签：database-design, web-applications, frameworks, content-management-system

有类似的问题，但没有一个回答我真正需要的。我其实不想创作，只要已经有一个现成的。

如果是这样，请指导我正确的方向。这没什么大不了的，只是为了维护我自己的收藏。

所以基本上：

1.  是否有现成的 CMS（或 CMS 的插件）可以做到这一点，即使是带有这种 Web 应用程序的框架也很好？
2.  如果不是，最快的实施方法是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T09:33:23.170

1.  大多数 CMS 都能够维护电影数据库，但我认为没有任何 CMS 考虑到这个目的。这完全取决于您可用的框架和环境

2\. 使用 ruby​​ on rails 设置，执行

```
rails my_movies
cd my_movies
script/generate scaffold movies title:string rating:integer 
```

# javascript - 如何让 Visual Studio 记住 javascript 设置

> ID：828804
> 
> 赞同：4
> 
> 时间：2009-05-06T09:26:53.610
> 
> 标签：javascript, visual-studio-2008

Visual Studio 2008 正在做一些让我非常沮丧的事情。我打开一个 javascript 文件并开始编辑我的代码，它将左大括号放在同一行而不是新行上。因此，我转到文本编辑器选项并勾选框以将大括号放在新行上，一切都很好，直到第二天我打开一个 js 文件并将大括号再次放在同一行！咕咕咕:-(

有谁知道如何让 Visual Studio 记住设置，这样我就不必一直更改它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-04T11:26:57.700

当我看到这种情况发生时，我怀疑原因是打开了多个 Studio 实例，并且在一个实例中设置选项并没有在其他实例中设置它。如果您关闭已设置它的实例，然后关闭另一个实例，我认为这就是它未设置的点。
尝试只打开一个 Studio 实例，根据需要设置它，然后再次关闭它，然后看看它是否会被更好地记住。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-05T14:10:02.593

好吧，我遇到了类似的问题 - Visual Studio 丢失了行号的设置 - 每次打开 Visual Studio 时，我都必须转到设置并标记复选框以显示行号。

我通过按照我喜欢的方式配置所有选项、导出并再次导入它来解决这个问题。在此之后，我再也不用去标记设置的复选框了。

你可以试一试，它也可能对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-23T17:59:58.600

我刚刚在我的机器上试过这个，它会记住会话之间的设置（打开和关闭 VS）。而且，我没有做任何解决方法。

我也对这种格式感到非常恼火，因为我们没有这种编码标准。无论如何，我们在新行上使用大括号。

# c# - C# 数值类型的“基类”是什么？

> ID：828807
> 
> 赞同：53
> 
> 时间：2009-05-06T09:27:50.657
> 
> 标签：c#, types

假设我想要一个接受任何数字的方法，是否有可以使用的基类（或其他概念）？

据我所知，我必须为所有不同的数字类型（Int32、Int16、Byte、UInt32、Double、Float、Decimal 等）进行重载。这似乎非常乏味。要么使用“对象”类型，要么使用类型“对象”并在它们不可转换或分配给双精度时抛出异常——这非常糟糕，因为这意味着没有编译时检查。

**更新：** 好的，感谢您的评论，您是对的稻草人和马克，实际上将其声明为 Double 实际上适用于除 Decimal 之外的所有内容。

所以我正在寻找的答案是 Double - 它在这里就像一个基类，因为大多数数字类型都可以分配给它。（我猜 Decimal 不能分配给 Double，因为它可能会变得太大。）

```
public void TestFormatDollars() {
    int i = 5;
    string str = FormatDollars(i);   // this is OK
    byte b = 5;
    str = FormatDollars(b);     // this is OK
    decimal d = 5;
    str = FormatDollars(d);     // this does not compile - decimal is not assignable to double
}

public static string FormatDollars(double num) {
    return "$" + num;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-06T10:21:11.263

答案是：您不需要为所有数字类型提供重载，只需为**Double**和**Decimal**提供重载。所有其他（可能除了一些非常大的除外）将自动转换为这些。

不是*基类*，但实际上那是红鲱鱼。基类 System.ValueType 没有多大帮助，因为它包含非数字类型。我正在阅读的语言参考首先让我感到困惑:)

（我只是在寻找将答案归因于谁，它是稻草人和 Marc Gravell 的组合，但由于他们是评论，所以我将答案放在这里）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-06T09:30:24.427

没有一个（或者至少，没有一个*仅仅*意味着“数字”）。你可以使用：

```
void Foo<T>(T value) where T : struct {...} 
```

但这允许*任何*结构 - 不仅仅是数字。如果您想进行算术运算，可能会使用[通用运算符。](http://www.yoda.arachsys.com/csharp/miscutil/usage/genericoperators.html)除此之外; 重载它是最可行的选择。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-02-05T04:21:49.167

我做什么：

```
 public interface INumeric<T>
 {
     T Zero { get; }
     T One { get; }
     T MaxValue { get; }
     T MinValue { get; }
     T Add(T a, T b);
     // T Substract(....
     // T Mult...
 }  

 public struct Numeric: 
     INumeric<int>, 
     INumeric<float>,
     INumeric<byte>,
     INumeric<decimal>,
     // INumeric<other types>
 {
     int INumeric<int>.Zero => 0;
     int INumeric<int>.One => 1;
     int INumeric<int>.MinValue => int.MinValue;
     int INumeric<int>.MaxValue => int.MaxValue;
     int INumeric<int>.Add(int x, int y) => x + y;

     // other implementations...
 } 
```

现在，您可以在方法中使用它：

```
bool IsZero<TNum, T>(TNum ops, T number) 
   where TNum : INumeric<T>
{
   return number == ops.Zero;      
} 
```

或扩展方法

```
 public static bool IsZero<TNum, T>(this TNum ops, T number)
      where TNum : INumeric<T>
 {
      return number == ops.Zero;
 } 
```

并在您的代码中：

```
 ...
 var n = new Numeric(); // can be an static prop

 Console.WriteLine(IsZero(n, 5)); // false
 Console.WriteLine(IsZero(n, 0f)); // true
 Console.WriteLine(IsZero(n, "0")); // compiler error 
```

或者，使用扩展方法：

```
 Console.WriteLine(n.IsZero(5));  // false
 Console.WriteLine(n.IsZero(0f)); // true
 Console.WriteLine(n.IsZero("0")); // compiler error 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-06T09:31:54.797

简短的回答是：数值类型是值类型，因此它们派生自 System.ValueType。完整的答案是：您应该[从 MSDN 阅读这篇文章](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)。此外，我认为您应该阅读 C# 语言参考 :)。值类型不等于数值类型，因为值类型还包括结构和枚举。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-06T09:31:01.197

数字类型的基类是[`ValueType`](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx).

不幸的是，这仍然对您没有帮助：`DateTime`,`bool`和`Enum`数百种其他类型也派生自`ValueType`. .NET 中没有`NumericType`基类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T09:38:57.323

重载的方法签名在这里是不可能的吗？如果您想要一组受限的方法来执行相同的任务，您可以加载公共方法并调用一个私有方法，该方法通过将输入转换为双精度来获取任何数字。

# sql - 如何添加自定义函数的参数？

> ID：828810
> 
> 赞同：0
> 
> 时间：2009-05-06T09:28:46.053
> 
> 标签：sql, sql-server

查询给了我一些错误：

消息 156，级别 15，状态 1，第 4 行关键字“来自”附近的语法不正确。消息 156，级别 15，状态 1，第 9 行关键字“组”附近的语法不正确。

```
select 
Count(Page) as VisitingCount,
dbo.fn_GetActivityLogsArranger(CONVERT(VARCHAR(5),Date, 108)as [Time] 
 from scr_SecuristLog     
where Date between '2009-04-30' and '2009-05-02'    
and [user] in(select USERNAME               
    from scr_CustomerAuthorities 
where customerID=Convert(varchar,4) and ID=Convert(varchar,43) )    
group by CONVERT(VARCHAR(5),Date, 108) order by CONVERT(VARCHAR(5),Date, 108) asc 
------------------------------------------------------------------------------------------------------
create FUNCTION [dbo].[fn_GetActivityLogsArranger]
(
@time AS nvarchar(max)
)

RETURNS  nvarchar(max)
AS
BEGIN
declare @Return varchar(30)

select @Return = case 
when @time between '15:00' and '15:30' then '15:00-15:30'
when @time between '15:30' and '16:00' then '15:30-16:00'
when @time between '16:00' and '16:30' then '16:00-16:30'
when @time between '16:00' and '16:30' then '16:00-16:30' 
when @time between '16:30' and '17:00' then '16:30-17:00' 
when @time between '17:00' and '17:30' then '17:00-17:30' 
when @time between '17:30' and '18:00' then '17:30-18:00'
else 'Unknown'
end
 Return @Return
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T09:42:17.720

你错过了一个括号

```
select 
Count(Page) as VisitingCount,
dbo.fn_GetActivityLogsArranger(CONVERT(VARCHAR(5),Date, 108)**)** as [Time] 
 from scr_SecuristLog     
where Date between '2009-04-30' and '2009-05-02'    
and [user] in(select USERNAME               
    from scr_CustomerAuthorities 
where customerID=Convert(varchar,4) and ID=Convert(varchar,43) )    
group by CONVERT(VARCHAR(5),Date, 108) order by CONVERT(VARCHAR(5),Date, 108) asc 
```

# html - 分配给 HTML 输入字段 VB.NET 时如何停止自动 HTML 编码

> ID：828812
> 
> 赞同：0
> 
> 时间：2009-05-06T09:28:59.580
> 
> 标签：html, xml, vb.net, forms, html-encode

我必须向第 3 方网站提交 HTML 表单，其中一个隐藏字段是 XML 字符串。XML 在发送给第三方之前需要转义。

但是，当我将纯 XML 添加到表单字段时，它会为我半转义。因此，当我自己使用 HTMLEncode 时，部分 XML 被双重转义。如何防止似乎从 .NET 中自动转义。

或者更好的是如何通过隐藏字段发送转义的 XML。

XML

```
<systemCode>APP</systemCode> 
```

基本分配给隐藏的输入字段

```
&lt;systemCode>APP&lt;/systemCode> 
```

当我也对其进行 HTML 编码时

```
&amp;lt;systemCode&amp;gt;APP&amp;lt;/systemCode&amp;gt; 
```

我可以看到发生了什么 - 但我不知道如何防止它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T09:54:17.053

***也***不要使用 HTMLEncode ！***单独***使用！

就像是：

```
'Setting value:
hdnField.Value = Server.HtmlEncode("<systemCode>APP</systemCode>")
'Outputs: &amp;lt;systemCode&amp;gt;APP&amp;lt;/systemCode&amp;gt;

'Retrieving encoded value:
Dim escaped as string = Request.Form("hdnField")
'Retrieves: &lt;systemCode&gt;APP&lt;/systemCode&gt;

'Retrieving decoded value:
Dim myValue As String = Server.HtmlDecode(Request.Form("hdnField"))
'Retrieves: "<systemCode>APP</systemCode>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T07:58:04.963

最后，我使用了文字，然后 HTMLEncoding XML 字符串，然后将 HTML 表单变量分配给文字文本字段。有点像下面：

```
portalReq.Text = "<input type=""hidden"" name=""portalReq"" value='" & HTMLENCODE(RequestXML) & "' />" 
```

不优雅，但它绕过了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T17:57:33.823

您无需担心 HTML 输出。只需担心表单中提交了哪些数据。HTML 是完全转义还是部分转义都没有关系 -**无论哪种方式都提交相同的数据**。

这两个字段：

```
<input name="xml" value="&lt;systemCode>APP&lt;/systemCode>" />
<input name="xml" value="&lt;systemCode&gt;APP&lt;/systemCode&gt;" /> 
```

提交为：

`xml=%3CsystemCode%3EAPP%3C%2FsystemCode%3E`

这是与语言无关的——它是浏览器的行为。当浏览器解析 HTML 时，它实际上会将两个字段标准化为具有相同的 html。如果您查看页面的源代码，您将看到输入之间的源 HTML 不同，但如果您读取该`form.innerHTML`值，您会看到解析后的 H​​TML 是相同的。

**演示：http:**
[//jsfiddle.net/gilly3/Xdj5E/](http://jsfiddle.net/gilly3/Xdj5E/)

# java - 如何用英语以外的语言发送短信

> ID：828815
> 
> 赞同：0
> 
> 时间：2009-05-06T09:29:15.647
> 
> 标签：java, messaging, smpp

我正在使用 Logica SMPP api 发送短信。我可以发送默认数据编码为“0”的纯英文消息现在如果我想用其他语言（如印地语或中文）发送短信，我应该设置哪些不同的值..

我应该为此创建一个 UDH 吗？我应该使用什么数据编码？我应该设置什么 esm 类？我应该将数据作为 unicode 发送吗？

对此的任何建议都将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T09:42:40.357

浏览 API，我猜[ShortMessage.setEncoding()](http://opensmpp.logica.com/CommonPart/Documentation/javadoc/library_1_3/com/logica/smpp/pdu/ShortMessage.html#setEncoding(java.lang.String))是这里的相关方法。

# database - 关于Java中的Prepared Statement的问题

> ID：828817
> 
> 赞同：3
> 
> 时间：2009-05-06T09:29:57.703
> 
> 标签：database, jdbc

我们在 Java 中有一个 Prepared Statement，我们听说它与 Statement in the Way 不同的是，这个prepared statement 每次使用时都不需要编译。

我的问题是这个编译语句存储在哪里？在使用它的客户端代码中还是由数据库存储？

为什么数据库会存储已编译的语句，如果它存储了多长时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T09:40:01.207

数据库有一个查询缓存，这意味着当您执行查询时，数据库会缓存已*解析/编译*的查询，也许还有查询计划以消除未来的计算。

准备好的语句通常首先在应用程序级别缓存，应用程序容器负责管理语句缓存。大多数应用程序容器都有控制预准备语句缓存的选项（例如：[glassfish](http://wiki.glassfish.java.net/Wiki.jsp?page=GFV3JDBCOnePager#section-GFV3JDBCOnePager-4.1.1StatementCaching)）。

正如您[在此处](http://java.sun.com/docs/books/tutorial/jdbc/basics/prepared.html)看到的，主要区别就像您所说的：使用准备好的语句，应用程序减少了一遍又一遍地编译相同语句的成本。作为旁注，对于大多数应用程序容器，语句必须完全相同（包括空格）才能正确重用，因此在使用手写查询时要小心。

# c++ - 谜男：在Qt中，为什么会调用editorEvent，而不是createEditor？

> ID：828819
> 
> 赞同：3
> 
> 时间：2009-05-06T09:30:08.657
> 
> 标签：c++, qt, qt4, qitemdelegate

我正在继承 QAbstractItemDelegate。这是我的代码。欢迎提出建议：

```
QWidget *ParmDelegate::createWidget(Parm *p, const QModelIndex &index) const {
    QWidget *w;
    if (index.column() == 0) {
        w = new QLabel(p->getName().c_str());
    } else {
        if (p->isSection())
            return NULL;
        w = p->createControl();
    }
    return w;
}

QWidget *ParmDelegate::createEditor(QWidget *parent, const QStyleOptionViewItem &option, const QModelIndex &index) const {
    cout << "createEditor called" << endl;
    Parm    *p = reinterpret_cast<Parm*>(index.internalPointer());
    QWidget *retval = createWidget(p, index);
    retval->setFocusPolicy(Qt::StrongFocus);
    retval->setParent(parent);
    return retval;
}

void ParmDelegate::updateEditorGeometry(QWidget *editor, const QStyleOptionViewItem &option, const QModelIndex &index) const {
    QRect rect(option.rect);
    editor->setGeometry(QRect(QPoint(0,0), rect.size()));
}

void ParmDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const {
    Parm    *p = reinterpret_cast<Parm*>(index.internalPointer());
    scoped_ptr<QWidget> w(createWidget(p, index));
    if (!w)
        return;
    QRect rect(option.rect);
    w->setGeometry(QRect(QPoint(0,0), rect.size()));
    w->render(painter, rect.topLeft());
}

QSize ParmDelegate::sizeHint(const QStyleOptionViewItem &option, const QModelIndex &index) const {
    Parm    *p = reinterpret_cast<Parm*>(index.internalPointer());
    scoped_ptr<QWidget> w(createWidget(p, index));
    if (!w)
        return QSize(0,0);
    return w->sizeHint();
}

bool ParmDelegate::editorEvent(QEvent * event, QAbstractItemModel * model, const QStyleOptionViewItem & option, const QModelIndex & index ) {
    cout << "editorEvent called" << endl;
    return false;
} 
```

当它运行时，我只看到每个编辑事件都会调用 editorEvent 两次——没有 createEditor！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-06T17:18:17.500

来自 Qt 的`AbstractItemDelegate`文档：

> 要提供自定义编辑，可以使用两种方法。第一种方法是创建一个编辑器小部件并将其直接显示在项目的顶部。为此，您必须重新实现 createEditor() 以提供编辑器小部件， setEditorData() 以使用模型中的数据填充编辑器，以及 setModelData() 以便委托可以使用来自编辑器的数据更新模型。
> 
> 第二种方法是通过重新实现 editorEvent() 直接处理用户事件。

这似乎是说你错过了触发第一种方法的东西。我的猜测是您的模型的`data()`函数没有为`Qt::EditRole`选项返回正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T11:48:35.920

我已经实现了一个从 QItemDelegate 继承的 TableView。然后我有类似的问题。我追踪到不调用'return QItemDelegate::editorEvent(event, model, option, index);' 在 editorEvent(...) 方法中。

你可以试试这个。也许它有帮助。

# string - Bash 中的字符串插值

> ID：828824
> 
> 赞同：14
> 
> 时间：2009-05-06T09:32:11.740
> 
> 标签：string, bash

我的代码

```
#!/bin/bash
for (( c=0; c<=1127; c++ ))
do
id = 9694 + c
if (id < 10000); then
    wget http://myurl.de/source/image/08_05_27_0${id}.jpg
else 
    wget http://myurl.de/source/image/08_05_27_${id}.jpg
fi
done 
```

我只得到

```
./get.sh: line 5: 10000: No such file or directory
--2009-05-06 11:20:36--  http://myurl.de/source/image/08_05_27_.jpg 
```

没有号码。

更正后的代码：

```
#!/bin/bash
for (( c=0; c<=1127; c++ ))
do
id=$((9694+c))
if (id -lt 10000); then
    wget http://myurl.de/source/image/08_05_27_0${id}.jpg
else 
    wget http://myurl.de/source/image/08_05_27_${id}.jpg
fi
done 
```

甚至更好：

```
for i in $(seq 9694 10821) ; do
    _U=`printf "http://myurl.de/source/image/08_05_27_%05d.jpg" $i`
    wget $_U 
done 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-06T10:21:12.713

我会选择更简单的解决方案

```
for i in $(seq 9694 10821) ; do
    _U=`printf "http://myurl.de/source/image/08_05_27_%05d.jpg" $i`
    wget $_U 
done 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-06T09:49:31.353

您在使用 bash 语法时犯了几个错误，尤其是在处理算术表达式时。

*   分配给变量时，不能在 = 符号周围放置空格。
*   在对“id”的赋值中，要调用算术评估，您需要使用 $(( expression )) 语法。
*   对于“if”条件，您需要双括号，就像您使用“for”一样。

这应该有效：

```
#!/bin/bash
for (( c=0; c<=1127; c++ )); do
  id=$((9694 + c))
  if ((id < 10000)); then
    wget http://myurl.de/source/image/08_05_27_0${id}.jpg
  else
    wget http://myurl.de/source/image/08_05_27_${id}.jpg
  fi
done 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T09:48:59.750

这就是你需要的。

```
#!/bin/bash
for (( c=0; c<=1127; c++ ))
do
    ((id = 9694 + c))
    if [[ id -lt 10000 ]] ; then
        wget http://myurl.de/source/image/08_05_27_0${id}.jpg
    else 
        wget http://myurl.de/source/image/08_05_27_${id}.jpg
    fi
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-06T09:43:14.800

你需要：

```
id=$((9694+c))
...
if [[ id < 10000 ]]; then 
```

# ios - 什么最能描述应用程序委托？它如何融入整个概念？

> ID：828827
> 
> 赞同：16
> 
> 时间：2009-05-06T09:33:04.187
> 
> 标签：ios, delegates, appdelegate, uiapplicationdelegate, uiapplication

我想知道 App Delegate 做了什么。它有一些很好的方法，比如`-applicationDidFinishLaunching`当应用程序完成启动时会调用它们，等等。但那实际上是什么？`UIApplicationMain`那是在函数中实例化的某个对象吗？

我的应用程序中的每个类都可以访问该 App Delegate 对象是如何工作的？网上有没有什么好的图表可以可视化这些关系？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-06T13:35:10.313

在 Cocoa 中，委托是另一个对象在行为问题上遵循的对象，并通知其状态的变化。例如，一个 UITableViewDelegate 负责回答有关 UITableView 在进行选择或重新排序时应该如何表现的问题。它是 UITableView 在想知道特定行的高度时询问的对象。在模型-视图-控制器范式中，委托是控制器，许多委托的名称以“控制器”结尾。

冒着明显的风险，UIApplicationDelegate 是 UIApplication 的委托。这种关系在 Cocoa (Mac) 中比在 Cocoa Touch (iPhone) 中更明显，因为 NSApplication 委托能够更直接地控制 NSApplication 的行为（例如防止应用程序终止）。iPhone 不允许对 UIApplication 进行太多控制，因此大多数情况下 UIApplicationDelegate 被告知更改，而不是有一个积极的决策过程。

UIApplicationDelegate 在应用程序的任何地方都不是严格可用的。单例 UIApplication 是 ([UIApplication sharedApplication])，通过它你可以找到它的委托。但这并不意味着应用程序中的每个对象都适合直接与应用程序委托对话。一般来说，我不鼓励开发人员让随机对象与应用程序委托对话。大多数通过这种方式解决的问题都可以通过 Singleton、NSNotification 或其他委托对象更好地解决。

至于它的创建，在 Mac 上，应用程序委托并没有什么神奇之处。在大多数情况下，它只是一个由 NIB 实例化和连接的对象。然而，在 iPhone 上，如果通过 UIApplicationMain() 实例化应用程序委托，可能会有点神奇。第四个参数是一个 NSString 表示应用程序代理的类，UIApplicationMain() 将创建一个并将其设置为 sharedApplication 的代理。这允许您在没有 NIB 的情况下设置委托（这在 Mac 上非常困难）。如果 UIApplicationMain() 的第四个参数为 nil（就像在 Apple 模板中一样），则委托由主 NIB 创建和连接，就像主窗口一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T12:19:27.687

对象以这种方式实例化；

main-function 查找 info.plist 中设置的主要 nib。笔尖作为应用程序委托设置为某个必须实现 UIApplicationDelegates 及其所需方法的类。然后应用程序委托加载一些视图控制器。

它用作影响整个应用程序的事件的应用程序范围的回调对象，例如内存不足等。

# installation - Clickonce 和 app.config

> ID：828828
> 
> 赞同：5
> 
> 时间：2009-05-06T09:33:13.250
> 
> 标签：installation, clickonce, app-config

我正在使用 ClickOnce 部署安装 WPF 应用程序。安装应用程序后，app.config 中有一些设置需要更改。虽然 app.config 作为 assemblyname.exe.config.deploy 存在于部署文件夹中，但在安装应用程序后，我似乎无法在客户端计算机上找到它，因此我可以更改设置。

我在哪里寻找它，任何指针？

非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-06T09:38:24.283

应用程序配置位于此处（将 <username> 替换为用户名，XP 用户查看“文档和设置”）：

C:\Users\<用户名>\AppData\Local\Apps\2.0

它位于那些半神秘的子文件夹之一中，但我相信你会明白的 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T02:59:45.373

你应该使用[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)（一个 VS 扩展）。有了这个，您可以根据您的构建配置（即调试/发布）为您的 app.config 文件创建一个转换。然后，当您使用 ClickOnce 发布时，您的 app.config 文件（或任何其他 XML 文件）将被转换为发布的 ClickOnce 包。[您可以在https://github.com/sayedihashimi/slow-cheetah/tree/master/SlowCheetah.Samples/Wpf.Transform](https://github.com/sayedihashimi/slow-cheetah/tree/master/SlowCheetah.Samples/Wpf.Transform)找到示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T22:04:56.523

根据[How to get folder path for ClickOnce application](https://stackoverflow.com/questions/2359026/how-to-get-folder-path-for-clickonce-application)，您可以通过在任务管理器中右键单击它来获取正在运行的任务的文件夹（或者对于来自 www.SysInternals.com 的 Process Explorer 中的早期版本的窗口）

[![在此处输入图像描述](https://i.stack.imgur.com/4AZfM.png)](https://i.stack.imgur.com/4AZfM.png)

# oracle - 在 Oracle 表上存在大量并发时如何进行性能调优

> ID：828830
> 
> 赞同：1
> 
> 时间：2009-05-06T09:33:32.483
> 
> 标签：oracle, concurrency, oracle10g

在具有大量读/写的 Oracle 10g 表上，我们偶尔会在使用所有 CPU 的并发引用“锁存库缓存”时出现巨大的峰值。

我们可以采取什么方法来减轻数据库中的负载。我们已经看到了关于免费列表和增加这些的东西。任何其他意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T12:28:42.360

“锁存库缓存”与给定表上的 I/O 是否高无关。这意味着您正在等待已解析 SQL 语句缓存的锁存器；因此，当您看到这些尖峰时，很可能会发生异常数量的硬解析。

最常见的原因是您没有使用绑定变量，因此您正在硬解析许多具有不同值的类似语句。EG 您正在执行如下语句：

```
SELECT name FROM emp WHERE empid = 3; 
```

并在每次执行查询时更改文字 ID 值，从而导致解析新语句。最好用绑定变量替换文字并为每次执行绑定一个新值。究竟如何实现这一点取决于您用来对数据库执行语句的语言/库/环境。

# jvm - JVM如何处理本机代码

> ID：828837
> 
> 赞同：4
> 
> 时间：2009-05-06T09:37:01.010
> 
> 标签：jvm, native

考虑一个我必须从我的 Java 程序中调用 C++ 代码的情况。C++ 代码创建了数千个对象。这些动态对象存储在哪里？我怀疑在 JVM 堆中，因为本机代码将成为与 JVM 相同的进程的一部分。

如果是，Java 垃圾收集器线程的规则是否适用于 C++ 代码的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T09:49:24.427

对于第一个问题，C++ 将使用它自己的运行时分配资源，这与 JVM 无关——JVM 不知道此内存分配器中的任何活动。

对于第二个问题，Java 垃圾收集器不会对 C++ 分配的内存进行 GC。您必须确保您的 Java 包装器启动内存释放。在对象被 java GC 之前，运行时调用该`finalize()`方法。默认是从 java.lang.Object 继承的，基本上什么都不做。您可以覆盖它并将其用作挂钩来启动释放手动管理的内存。

# asp.net - 如何将多个表插入到一个表中？

> ID：828839
> 
> 赞同：0
> 
> 时间：2009-05-06T09:38:22.300
> 
> 标签：asp.net, sql, vb.net, visual-studio

我有一个用户表（用户名、密码..等）和另一个产品表（产品名称、价格、数量、**用户名**..等）

当用户将其出售时，我希望将第一个表中的用户名（以及产品信息的其余部分）插入到产品表中。

我怎样才能做到这一点？

我正在使用visual web developer 2008 express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T09:43:28.140

```
INSERT INTO product_information (username,product_name, ...., Date)
SELECT username, 'Book',....., Date
FROM users; 
```

沿着这条线的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T12:27:17.903

你的问题完全没有意义。听起来您想插入一个表 ( `Products`) 并且其中一个字段也在另一个表 ( `User.username`) 中。其余的数据`Products`从哪里来？不能直接输入用户名吗？

```
Insert into products (name, price, username) values (?, ?, ?) 
```

使用您想要将数据传递给该 SQL 语句的任何机制。

但是，如果您实际上有第三个表，例如 ' '，并且您想从和`Prod_for_sale`向该表中插入一堆数据，您可以执行类似的操作（如 Rick J 所建议，但此示例有两个表）：`Users``Products`

```
insert into products for sale (username, user_country, product_name, product_price)
select u.username, u.country, p.name, p.price
from products p, users u
where p.id = ?
  and u.username = ? 
```

然后，您可以将相关表中所需的任何数据复制到目标表中。

不过有一点建议：您应该使用用户 ID 而不是用户名来识别数据库中的用户数据。这将允许您稍后更改您的用户名策略或允许更新用户名等。通常尝试将所有标识符编号，这样您将来会省去麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T09:45:09.650

如果您有 Linq (.NET 3.5 / C# 3.0)：

```
var users = from u in userTable
            from p in productTable
            where p.username = u.username
            select new productDetails()
            {
              username = u.username,
              price = p.price
            } 
```

然后 newtable.insertAllOnSubmit(users);

如果在直接 sql

```
insert into newtable
select table1.value1, table2.value1
from table1, table2
where table1.username = table2.username 
```

编辑：

澄清... value1 和 value2 是来自相应案例的列。每个要插入的参数都有一个。你的 newtable 变成了 table1

# python - 调试 Python 的 swig 扩展

> ID：828843
> 
> 赞同：5
> 
> 时间：2009-05-06T09:38:33.020
> 
> 标签：python, debugging, swig

除了做之外，还有其他方法可以调试 swig 扩展吗

```
gdb python stuff.py 
```

?

我已经包装了遗留库[libkdtree++](http://libkdtree.alioth.debian.org/)并遵循了所有与 swig 相关的内存管理点（借用 ref 与自己的 ref 等）。但是，我仍然不确定我的绑定是否没有占用内存。能够逐步调试每个公开的函数会很有帮助：从 Python 开始，然后通过 C 胶水绑定到 C 空间，然后返回。

是否已经有这种可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-09T01:06:30.247

gdb 7.0 支持 python 脚本。在这种特殊情况下，它可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T12:45:30.183

好吧，对于调试，您使用调试器;-)。

调试时，最好使用“--with-pydebug”配置 Python 并重新编译。然后它会进行额外的检查。

如果您正在寻找内存泄漏，有一个简单的方法：

在循环中一遍又一遍地运行您的代码，并查找 Python 的内存消耗。

# ant - 仅在未设置的情况下如何设置 Ant 属性

> ID：828846
> 
> 赞同：73
> 
> 时间：2009-05-06T09:39:13.733
> 
> 标签：ant

我不知道如何在尚未设置的情况下设置 Ant 属性（即它没有在属性文件中定义，应该自动默认）。

到目前为止，我只有以下代码：

```
<condition property="core.bin" value="../bin">
    <isset property="core.bin"/>
</condition> 
```

但这似乎只有在`<property>`标签中定义值时才有效。

如果当前未设置，有谁知道如何第一次有条件地设置属性？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2009-05-06T09:41:18.877

您只需使用属性任务设置属性。如果属性已设置，则值不变，因为属性是不可变的。

但是您也可以在您的条件中包含“不”：

```
<condition property="core.bin" value="../bin">
   <not>  
      <isset property="core.bin"/>
   </not>
</condition> 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2009-05-14T14:20:46.927

Ant 默认情况下会这样做；如果该属性已设置；再次设置它没有效果：

```
<project name="demo" default="demo">
    <target name="demo" >
        <property name="aProperty" value="foo" />
        <property name="aProperty" value="bar" /> <!-- already defined; no effect -->
        <echo message="Property value is '${aProperty}'" /> <!-- Displays 'foo' -->
    </target>
</project> 
```

给

```
 /c/scratch> ant -f build.xml
Buildfile: build.xml

demo:
     [echo] Property value is '${aProperty}'

BUILD SUCCESSFUL
Total time: 0 seconds
/c/scratch> ant -f build.xml
Buildfile: build.xml

demo:
     [echo] Property value is 'foo'

BUILD SUCCESSFUL 
```

不能重新定义属性；为此，您需要使用[ant-contrib 中的变量 task](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)之类的东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-22T08:18:46.710

做你想做的最简单的方法：

```
<if>
    <not>
        <isset property="your.property"/>
    </not>
    <then>
        <property name="your.property" value="your.value"/>
    </then>
</if> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-18T14:49:50.087

[支持在https://ant.apache.org/manual/Tasks/condition.html](https://ant.apache.org/manual/Tasks/condition.html)中使用“else”来满足您的确切目的。

**别的**

```
The value to set the property to if the condition evaluates to false. By default the property will remain unset. Since Apache Ant 1.6.3 
```

所以改为：

```
<condition property="core.bin" else="../bin">
    <isset property="core.bin"/>
</condition> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-08T16:24:26.710

Ant 中的属性是不可变的。定义后无法更改。

但是[Ant Contrib](http://ant-contrib.sourceforge.net)包提供了这个`variable`任务。它像一个属性一样工作，但可以修改和取消设置值。来自[可变任务文档](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)的示例：

```
 <var name="x" value="6"/>
    <if>
        <equals arg1="${x}" arg2="6" />
        <then>
            <var name="x" value="12"/>
        </then>
    </if>
    <echo>${x}</echo>   <!-- will print 12 --> 
```

# google-maps - 虚拟地球或谷歌地图

> ID：828853
> 
> 赞同：3
> 
> 时间：2009-05-06T09:41:19.860
> 
> 标签：google-maps, mapping, virtual-earth

简单的问题，答案可能不是……

我将为客户端开发一个 Web 应用程序 (ASP.NET MVC)。他们问我是否使用谷歌地图或虚拟地球来提供地图解决方案。

你会选择哪一个，为什么？或者还有其他可以推荐的吗？

还有什么事情你需要知道？

1.  在不久的将来，街景（或等效的）将不再是必需的，但有一天可能会。
2.  客户想要识别某些可映射的特征，然后在指定距离内找到这些特征。

在高层次上我还应该考虑什么？还是我的客户？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T09:55:31.153

如果这是针对商业网站，您的主要考虑因素之一是许可。您必须联系 Google 和 Microsoft 以了解确切的详细信息和定价，但网络上有很多信息表明在生产中实施这些解决方案可能需要花费 10,000 美元。他们让你迷上了快速和简单的开发！

我的偏好是谷歌地图，它只是感觉有点圆滑，但我之前用 Virtual Earth SDK 开发了一些非常好的原型。

我不知道微软是否正在计划与街景功能等效的功能，因此如果将来要求卡上有此功能，那么请坚持使用 Google。

这两种技术都可以让您以各种方式搜索地理特征——无论是通过地区、街道地址还是特定的纬度+经度。它们还允许您覆盖自己的图像或绘制线条、多边形等。

谷歌地图似乎拥有更广泛的用户群（尽管微软在谷歌进入它之前就在技术上做这些事情！），所以在实施你的解决方案时，你可能会在 intarweb 上找到比微软更多的帮助。

有关 Google Maps for Enterprise 的更多信息，请访问： [http ://www.google.com/enterprise/maps/map_info.html](http://www.google.com/enterprise/maps/map_info.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T09:49:24.053

您应该向客户索取一份相当全面的映射解决方案要求列表。您提到了一个 - 这些“可映射的功能”。还有其他人吗？

获得列表后，您就可以查看哪一个提供最合适的选择并继续使用。

如果街景肯定出现在地平线上，那么你必须选择谷歌——或者它只是在谈话中出现的东西？

话虽如此，您可以花更多的精力编写一个位于应用程序和映射解决方案之间的抽象层，这样如果您没有选择的那个在将来提供更好的拟合，那么进行更改会更容易. 尽管这确实违背了敏捷方法（YAGNI）。

# python - Python2.6 是否足够稳定以供生产使用？

> ID：828862
> 
> 赞同：7
> 
> 时间：2009-05-06T09:44:28.090
> 
> 标签：python

还是我应该坚持使用 Python2.5 更长时间？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-06T09:51:02.740

来自[python.org](http://python.org/download/)：

> 当前的生产版本是 Python 2.6.2 和 Python 3.0.1。

所以，是的。

Python 3.x 包含一些向后不兼容的更改，因此[python.org](http://python.org/download/)还说：

> 从 Python 2.6 开始，因为现在与 Python 2 兼容的第三方软件比 Python 3 多

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-06T09:55:39.670

Ubuntu 已在其最新版本中切换到 2.6，并且没有出现任何重大问题。所以我会说“是的，它很稳定”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-06T10:14:31.263

这取决于您使用的库。例如，如果您必须在 Windows 上使用 Python，则 2.6 没有预编译的 InformixDB 包。

由于 2.6 中的一些错误，web2py 框架也坚持使用 2.5。

我个人使用 CPython 2.6（主力）和 3.0（实验性）和 Jython 2.5 beta（用于我的 JDBC 和 ODBC 测试）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-06T10:30:24.267

是的，但这不是正确的问题。正确的问题是“考虑到它引入的不兼容性，我可以使用 Python 2.6 吗？”。简短的回答是“很可能是的，除非您使用不适用于 2.6 的特定库，这非常罕见”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T13:06:47.310

我发现 2.6 相当不错，但有两个例外：

1.  如果您在服务器上使用它，我过去曾遇到过一些服务器元素使用的库（Debian Etch IIRC）的麻烦。如果你小心的话，可以通过一些狡猾的扑克来统一维护多个版本的python :-)
2.  这不再是真的，但我上次尝试 2.6 时，wxPython 没有更新，这意味着我编写的所有 gui 工具都坏了。现在有一个针对 2.6 构建的可用版本。

所以我建议你检查你使用的所有模块并检查它们与 2.6 的兼容性......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T15:39:18.067

我最近为我的研究项目从 python2.5 切换到 2.6，其中涉及许多 3rd 方库（scipy、pydot 等）和 swig 相关的东西。

我唯一需要改变的是用

> s = unicode(s, "utf-8")

在我将它们输入日志模块之前。

否则，我每次都得到

> Traceback (most recent call last):
> File "/usr/lib/python2.6/logging/__init__.py", line 773, in emit
> stream.write(fs % msg.encode("UTF-8"))
> UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 31: ordinal not in range(128)

# c# - 连续调用 WCF 服务返回“每个套接字地址（协议/网络地址/端口）通常只允许使用一次 127.0.0.1:10111”

> ID：828864
> 
> 赞同：0
> 
> 时间：2009-05-06T09:45:16.327
> 
> 标签：c#, wcf, sockets, membership

我开发了一个小混搭网站。这个网站是完整的社区。因此，当用户进入 Community.aspx 页面时，他/她将看到社区成员的加入日期、评论数、姓名等。和 ofc 分页也是如此。每页大约有 15 个用户。现在我的问题是我的网站上有两种类型的用户“传统用户”和“开放 ID”用户。Ofc 我在 Asp 中定义了 2 个角色。网络成员即“OpenIDUser”和“User”。

好的！！！

现在，当用户单击 Community.aspx 时，将创建用户列表并返回前 15 个用户。但是对于要创建的这个用户列表，有很多`Roles.IsUserInRole("Username","RoleName")`检查来查看哪些用户是哪些用户，因为现在要按字母顺序对用户列表进行排序。您必须小心所有以 `http://identifier.username`任何开头的 OPEN ID 用户。所以我做了很多 Asp .Net Membership Service Calls Membership.GetUser Roles 等等……

现在通常这不会成为问题，但是我已将 MemberShip 服务合并到 WCF 中。这样做的原因是，在这个社区中，我将拥有很多子域（每个“站点”都有一个子域），而我只想使用 1 个数据库来完成所有这些。

因此，我认为通常情况下，如果您获得 500 多个会员资格。无论如何，这就是 100%。但是，一旦您将 .NET Membership 引入 WCF 并将每个 Membership.Whatever 方法转换为 WCF 方法。每次加载页面时，您有 500 多个 WCF 调用。

我认为这就是发生错误的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T11:18:20.017

这不是一个问题，所以这不是一个答案，而是一个评论。

您应该将每个子域视为单独的会员申请。这允许多个站点共享同一个成员数据库，但不会干扰彼此的成员。您可以将应用程序名称设置为提供程序配置的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T13:15:11.250

你要关闭客户端吗？IIRC 我有一个类似的问题。

# regex - 正则表达式解析长词

> ID：828869
> 
> 赞同：1
> 
> 时间：2009-05-06T09:47:48.333
> 
> 标签：regex

需要正则表达式来解析具有 20 多个符号长度的长词，这可能会破坏设计。计划用于分隔单词部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T10:31:05.013

试试这个正则表达式：

```
\b\w{20,} 
```

或者，如果您使用的实现支持[Unicode 字符属性](http://www.regular-expressions.info/unicode.html#prop)：

```
\b\p{L}{20,} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T10:26:41.093

```
([a-zA-Z]){20,} 
```

# php - PHP/regex：如何获取 HTML 标签的字符串值？

> ID：828870
> 
> 赞同：37
> 
> 时间：2009-05-06T09:47:59.267
> 
> 标签：php, html, regex

我需要正则表达式方面的帮助，或者[`preg_match`](http://php.net/preg_match)因为我对这些方面还没有经验，所以这是我的问题。

我需要获取“get me”的值，但我认为我的函数有错误。html标签的数量是动态的。它可以包含许多嵌套的 html 标记，例如粗体标记。此外，“get me”的价值是动态的。

```
<?php
function getTextBetweenTags($string, $tagname) {
    $pattern = "/<$tagname>(.*?)<\/$tagname>/";
    preg_match($pattern, $string, $matches);
    return $matches[1];
}

$str = '<textformat leading="2"><p align="left"><font size="10">get me</font></p></textformat>';
$txt = getTextBetweenTags($str, "font");
echo $txt;
?> 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-05-06T09:58:42.690

```
<?php
function getTextBetweenTags($string, $tagname) {
    $pattern = "/<$tagname ?.*>(.*)<\/$tagname>/";
    preg_match($pattern, $string, $matches);
    return $matches[1];
}

$str = '<textformat leading="2"><p align="left"><font size="10">get me</font></p></textformat>';
$txt = getTextBetweenTags($str, "font");
echo $txt;
?> 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-01-21T21:39:02.737

试试这个

```
$str = '<option value="123">abc</option>
        <option value="123">aabbcc</option>';

preg_match_all("#<option.*?>([^<]+)</option>#", $str, $foo);

print_r($foo[1]); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-06T09:58:44.670

在您的模式中，您只想匹配两个标签之间的*所有文本。*因此，您可以使用例如 a`[\w\W]`来匹配所有字符。

```
function getTextBetweenTags($string, $tagname) {
    $pattern = "/<$tagname>([\w\W]*?)<\/$tagname>/";
    preg_match($pattern, $string, $matches);
    return $matches[1];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-22T05:36:17.720

由于属性值可能包含纯`>`字符，请尝试以下正则表达式：

```
$pattern = '/<'.preg_quote($tagname, '/').'(?:[^"'>]*|"[^"]*"|\'[^\']*\')*>(.*?)<\/'.preg_quote($tagname, '/').'>/s'; 
```

但是正则表达式不适合解析 HTML 等非正则语言。您最好使用[SimpleXML](http://docs.php.net/simplexml)或[DOMDocument 之](http://docs.php.net/domdocument)类的解析器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-08T00:33:01.627

这可能很旧，但我的回答可能会对某人有所帮助

你可以简单地使用

```
$str = '<textformat leading="2"><p align="left"><font size="10">get me</font></p></textformat>';
echo strip_tags($str); 
```

[https://www.php.net/manual/en/function.strip-tags.php](https://www.php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-03T14:59:59.447

以下 php 片段将返回 html 标签/元素之间的文本。

regex : "/tagname(.*)endtag/" 将返回标签之间的文本。

IE

```
$regex="/[start_tag_name](.*)[/end_tag_name]/";
$content="[start_tag_name]SOME TEXT[/end_tag_name]";
preg_replace($regex,$content); 
```

它将返回“某些文本”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T02:47:16.143

```
$userinput = "http://www.example.vn/";
//$url = urlencode($userinput);
$input = @file_get_contents($userinput) or die("Could not access file: $userinput");
$regexp = "<tagname\s[^>]*>(.*)<\/tagname>";
//==Example:
//$regexp = "<div\s[^>]*>(.*)<\/div>";

if(preg_match_all("/$regexp/siU", $input, $matches, PREG_SET_ORDER)) {
    foreach($matches as $match) {
        // $match[2] = link address 
        // $match[3] = link text
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-06T21:22:07.707

尝试`$pattern = "<($tagname)\b.*?>(.*?)</\1>"`并`return $matches[2]`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-28T10:28:06.503

你的 HTML

```
$html='<ul id="main">
    <li>
        <h1><a href="[link]">My Title</a></h1>
        <span class="date">Date</span>
        <div class="section">
            [content]
        </div>
    </li>
</ul>'; 
```

//函数调用可以改变标签名

```
echo contentBetweenTags($html,"span"); 
```

// 此函数将帮助您从特定标签中获取数据

```
function contentBetweenTags($content, $tagname){
    $pattern = "#<\s*?$tagname\b[^>]*>(.*?)</$tagname\b[^>]*>#s";
    preg_match($pattern, $content, $matches);

    if(empty($matches))
        return;

    $str = "<$tagname>".html_entity_decode($matches[1])."</$tagname>";
    return $str;
} 
```

# oracle - 为什么 DBMS_MVIEW.REFRESH 有隐式提交？

> ID：828871
> 
> 赞同：6
> 
> 时间：2009-05-06T09:48:03.840
> 
> 标签：oracle, transactions, materialized-views

我最近注意到调用 dbms_mview.refresh(...) 会刷新 Oracle 中的物化视图，它具有隐式提交。

任何想法——除了“因为它确实”——为什么这个动作有一个隐含的提交？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T13:49:26.800

根据 Tom Kyte 的说法，这是因为[在设计时决定将刷新视为 DDL 操作](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:4541191739042)。由于所有 DDL 操作都隐式提交，所以这个也是。不幸的是，他没有回答他们为什么选择将其制作为 DDL 的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T17:58:59.290

根据您的 Oracle 版本和/或您提供的参数，dbms_mview.refresh 可能会执行 TRUNCATE，然后执行直接加载。TRUNCATE 是一个 DDL 命令，因此发出一个隐式提交。直接加载不需要提交。

如果您使用的是更新版本的 Oracle，我认为是 10.2+，您可以将 atomic_refresh 参数设置为 TRUE，它将使用标准的 DELETE / INSERT 在单个事务中刷新。不过，这种方法可能会慢一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T17:41:27.390

解决方法是在自治事务中调用 dbms_mview.refresh（使用 pragma 自治事务创建一个 PL/SQL 过程）。

# winapi - 使用 Windows SetTimer() 函数

> ID：828872
> 
> 赞同：6
> 
> 时间：2009-05-06T09:48:32.060
> 
> 标签：winapi, visual-c++

我对 SetTimer() 函数感到困惑。

SetTimer() 接受三个参数：

```
SetTimer(1,2000,Timerflow); 
```

但是我见过另一个版本的 SetTimer，它需要四个参数：

```
SetTimer(NULL,1,2000,Timerflow); 
```

这两个功能有什么区别？

我知道 SetTimer() 三个参数。但是当我尝试使用四参数 SetTimer() 函数时，我得到了错误：

```
error C2660: 'SetTimer' : function does not take 4 parameters 
```

那么主要区别是什么以及导致此错误的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T09:56:23.600

4参数版本是普通的Win32 API版本，第一个参数是窗口句柄。

3 参数版本是 MFC 的 CWnd 类的成员，并且与您调用它的 CWnd 实例的窗口句柄一起使用。

如果您需要从 CWnd 派生对象的方法中调用 4 参数 Win32 API，请执行以下操作：

```
::SetTimer(NULL, 1, 2000, Timerflow); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T09:52:40.707

唯一称为 SetTimer 的 Windows API 采用四个参数。大概另一个是 MFC 或其他框架的一部分，第一个参数隐含在您调用它的对象中。例如：

```
CWnd * w = .... // get window somehow
w->SetTimer(1,2000,Timerflow); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-03-02T14:36:11.957

如果使用 SetTimer 在 GUI 类（如 MFC 的 CWnd）中创建计时器，则可以使用 3 参数形式：

```
UINT  SetTimer( 
  UINT  nIDEvent,             //  timer  identifier 
  UINT  uElapse,              //  time-out  value 
  TIMERPROC  lpTimerFunc      //  address  of  timer  procedure
); 
```

但是如果你在非 GUI 类中使用它，你必须使用 4 参数形式。第一个参数是指定哪个 GUI 组件将响应计时器事件。此版本的函数是从 Win32 API 调用的。

```
eUINT  SetTimer( 
  HWND  hWnd,                //  handle  of  window  for  timer  messages 
  UINT  nIDEvent,            //  timer  identifier 
  UINT  uElapse,             //  time-out  value 
  TIMERPROC  lpTimerFunc     //  address  of  timer  procedure 
); 
```

这很简单，不是吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-17T15:08:58.773

根据 MSDN：[https](https://msdn.microsoft.com/en-us/library/windows/desktop/ms644906(v=vs.85).aspx) ://msdn.microsoft.com/en-us/library/windows/desktop/ms644906(v=vs.85).aspx ，第一个和最后一个参数是可选的。因此，您甚至可以使用 2 个参数调用 SetTimer（但不推荐）。该错误很可能来自不正确的转换（例如，需要一个 uint_ptr，你给一个 hwnd）

# c++ - 在类声明中使用 virtual 关键字

> ID：828880
> 
> 赞同：1
> 
> 时间：2009-05-06T09:50:45.937
> 
> 标签：c++, virtual

我在一次采访中被问到在 C++ 中使用类声明的虚拟关键字有什么用，我回答说虚拟关键字不能与 C++ 中的类声明一起使用。面试官说有可能，让我稍后测试一下。

现在我自己检查过了，我知道这是可能的，这不是编译器错误。事实上，当我用 Visual C++ 编译器做这样的事情时：

```
virtual class Test
{
   int i;
}; 
```

我收到一个编译器警告“警告 C4091：'virtual'：当没有声明变量时，'Test' 左侧被忽略”。我还没有弄清楚这个警告的含义以及 virtual 关键字的用法。如果没有有用的用法，那么为什么首先允许这样做，为什么这不是编译器错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T09:57:46.670

**从另一个类派生时可以使用**virtual ：****

 **```
class Foo : public virtual Bar
{
} 
```

这用于避免在使用多重继承时具有相同基类的多个版本。[维基百科](http://en.wikipedia.org/wiki/Virtual_inheritance)有一篇关于这个主题的好文章。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T09:59:30.770

这是 VC++ 中的一个错误。Comeau 和 gcc 都拒绝该代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-06T09:54:26.180

您根本不能将 virtual 用于类。它仅适用于成员函数

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T09:58:23.423

您正在查看错误的用法-我很确定面试官指的是虚拟基类声明，如下所示：

```
 `class A : virtual public B, public C {
    ...
  };` 
```

`这是一个常见的习惯用法，用于绕过菱形继承树中的“多基类”场景。它们的典型问题是您从 B 类和 C 类继承，并且它们共享共同的祖先 A。如果您“向上”继承树，您将模糊不清您是“A”的哪个实例应该使用。如果 B & C 将 A 作为虚拟基类，它们将引用 A 的同一个实例，从而解决了这个问题。`

 `[您可以在此处](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr135.htm)找到更详尽的类图描述。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-06T09:58:18.587

也许他指的是虚拟继承/虚拟基类？例如

```
class A : virtual public B
{ ... } 
```

从技术上讲，这将是类定义的一部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T10:03:17.483

他可能一直在谈论在类声明中使用虚拟基类吗？

像这样：

```
class CashierQueue : virtual public Queue {}; 
```

当您希望避免派生类从两个或多个共享相同基类的类继承时，它会在多重继承中使用成员数据的多个副本。

```
class Queue {};
class CashierQueue : virtual public Queue {};
class LunchQueue : virtual public Queue {};
class LunchCashierQueue : public LunchQueue, public CashierQueue {}; 
```

请参阅[http://msdn.microsoft.com/en-us/library/wcz57btd(VS.80).aspx](http://msdn.microsoft.com/en-us/library/wcz57btd(VS.80).aspx)

# wcf - WCF 在客户端自托管？是好是坏

> ID：828883
> 
> 赞同：5
> 
> 时间：2009-05-06T09:51:35.390
> 
> 标签：wcf

我想知道是否有人尝试过这种技术来从服务器端向客户端获取事件。我有一个使用基于 Unix 的服务器的环境，因此不能使用 WCF 双工/回调等。

我的客户端是运行厚.net 应用程序的 Windows 盒子的想法将启动 WCF 自主机并在该会话的服务器上注册其自主机 URL。他们会有一个非常简单的合同，当服务器有更新时，服务器会调用客户端服务器，告诉它有一个更新正在服务器上等待它，然后客户端会得到它等等。

我仍在尝试了解 WCF，所以不确定这是否是一个好方法，是否有任何安全隐患我应该担心？有没有办法让双工呼叫跨平台工作。

在使用套接字之前我已经做过类似的事情，或者跨平台消息队列可能是一个更好的方法。

谢谢

76梅尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T14:36:37.903

至少，这听起来应该可以工作，尽管我猜你也可以托管在 IIS 中，因为 *nix 服务器可以进行网络调用，对吧？我不确定自托管会给您带来什么，尽管它应该可以正常工作，但配置起来可能会有点麻烦，等等。

每当您做出决定时，请在此处更新，因为这听起来像是一个有趣的挑战，我们中的一些人想看看您是如何做出决定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-10T14:41:03.787

我们将自托管 WCF 用于类似的场景。我们还希望避免使我们的客户端应用程序依赖于 IIS，以防止许可和部署麻烦。

它对我们来说效果很好，尽管 WCF 对于您的需要可能有点过分了。由于您使用的是 HTTP，因此您可以直接在 Http.sys 上创建一个简单的 Web 服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-21T08:18:12.853

获得类似结果的另一种方法可能是让客户轮询。这在很大程度上取决于那里的要求。如果您需要近乎实时的更新，这显然行不通，因为您必须进行多次轮询才能做到这一点，但如果可以花一分钟或更长时间来获取客户端的更新，则轮询可能只是答案。

# linux-kernel - 使用 iptables 丢弃具有匹配字符串的数据包会丢弃所有不匹配的后续数据包

> ID：828884
> 
> 赞同：1
> 
> 时间：2009-05-06T09:52:26.310
> 
> 标签：linux-kernel, iptables

我正在尝试在应用层编写蠕虫过滤实用程序。

我已经设置了以下规则来丢弃带有特定子字符串的 tcp 数据包。

**iptables -A INPUT -p tcp -m string --string "test" -j DROP --algo kmp**

但是，一旦找到具有匹配字符串的数据包，所有后续数据包，即使字符串不匹配也会被丢弃，直到我从 iptable 刷新规则。

我想知道为什么会发生这种情况以及解决方案是什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T10:21:03.820

tcp 是面向连接的可靠协议，它维护正在发送的数据序列。它会一直尝试更改特定的有效负载，直到它到达那里，因此在到达旧的有效负载之前您无法发送其他后续有效负载，这就是为什么您觉得所有后续数据包都被丢弃的原因。

如果您为 udp 设置了类似的规则，这将不会发生，您将能够接收所有与字符串不匹配的后续数据包。这是因为 udp 是一种无连接、不可靠的协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-22T04:38:54.937

这里有点晚了，但看到有类似问题的人。避免这种情况的一种方法是在 RAW 链中执行此规则。在任何类型的 conntrack 放置在数据包上之前，所有数据包都会到达这里，因此最好在此处进行过滤。

```
iptables -A PREROUTING -t raw -p tcp -m string --string "test" -j DROP --algo kmp 
```

# visual-studio - 致命错误 LNK1104 无法打开文件 C:\users\user\documents\visual.obj

> ID：828887
> 
> 赞同：7
> 
> 时间：2009-05-06T09:53:15.980
> 
> 标签：visual-studio, visual-studio-2008, mfc

每当我想在 Visual Studio 2008 上编译我的项目时，我都会收到“致命错误 LNK1104 无法打开文件 C:\users\user\documents\visual.obj”。

我的项目使用我创建的 .lib 文件。

谁能帮我吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-07-15T23:57:37.720

谢谢，伙计。我找到了解决我的问题的方法。我必须在 Project->Properties->Configuration Properties->Linker->Input->Additional Dependencies 中为我的 .lib 文件的路径添加引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T10:12:27.837

确保目录 C:\users\user\documents\ 存在并且您对其具有读/写访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T10:22:29.030

有了这个[http://www.google.de/search?q=visual+studio+2008+LNK1104](http://www.google.de/search?q=visual+studio+2008+LNK1104)我找到了这个答案[http://social.msdn.microsoft.com/Forums/en-US/user?user=埃纳罗斯](http://social.msdn.microsoft.com/Forums/en-US/user?user=einaros)_

> 您需要将 DirectX 库文件夹添加到 Visual Studio 的搜索路径。请参阅工具 -> 选项 -> 项目和解决方案下的“目录”设置。否则链接器将不知道在哪里可以找到 d3dx9.lib。

# c# - 如何检查 c# 中的两个值是否相等？（给定任何类型的值）

> ID：828896
> 
> 赞同：4
> 
> 时间：2009-05-06T09:55:57.127
> 
> 标签：c#, types, equals

我在这里有这段代码，旨在允许任何类型的参数：

```
public static void AreEqual(object expectedValue, object actualValue) {
    if (expectedValue == actualValue) {
        HttpContext.Current.Response.Write("Equal");
    } else {
        HttpContext.Current.Response.Write("Not Equal");
    }
} 
```

如果我使用几个整数来调用它，它的行为就不会很好。

```
AreEqual(3, 3)   // prints Not Equal 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-06T09:58:33.750

在最简单的级别：

```
public static void AreEqual(object expectedValue, object actualValue) {
    if (object.Equals(expectedValue,actualValue)) {
            HttpContext.Current.Response.Write("Equal");
    } else {
            HttpContext.Current.Response.Write("Not Equal");
    }
} 
```

或使用泛型（支持`IEquatable<T>`）：

```
public static void AreEqual<T>(T expectedValue, T actualValue) {
    if (EqualityComparer<T>.Default.Equals(expectedValue,actualValue)) {
            HttpContext.Current.Response.Write("Equal");
    } else {
            HttpContext.Current.Response.Write("Not Equal");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T10:03:43.333

只是为了突出“奇怪”行为的原因是因为当您将 int 转换为对象时会发生[装箱](http://msdn.microsoft.com/en-us/magazine/cc301569.aspx)。这两个 3 被转换为对象，然后您不再比较数字，而是在比较引用，这将是不一样的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-06T09:59:36.337

要检查两个对象值是否相等，请使用以下命令：

```
if (Object.Equals(expectedValue, actualValue)) { 
```

由于正常的 == 运算符假定 an`object`是引用类型（尽管值类型也来自对象）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T09:59:14.217

尝试：

```
if (expectedValue.Equals(actualValue)) 
```

当然你需要处理`null`，所以你应该试试这个：

```
Boolean eq = false;
if (expectedValue == null || actualValue == null)
    eq = (expectedValue == actualValue);
else
    eq = expectedValue.Equals(actualValue);

if (eq) {
    HttpContext.Current.Response.Write("Equal");
} else {
    HttpContext.Current.Response.Write("Not Equal");
} 
```

这当然与[@mike nelson](https://stackoverflow.com/users/23616/mike-nelson)的回答相同：

```
if (Object.Equals(expectedValue, actualValue)) 
```

所以去投票他的答案。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-05-06T09:59:18.087

```
if (expectedValue != null)
{
    if (expectedValue.Equals(actualValue))
    {
        // enter code here
    }
} 
```

# php - 为什么 CakePHP bake 无法连接到在 Windows Vista Ultimate 上的 EasyPHP 下运行的 MySQL？

> ID：828899
> 
> 赞同：1
> 
> 时间：2009-05-06T09:56:51.070
> 
> 标签：php, mysql, cakephp, easyphp, cakephp-1.2

我在[Windows Vista Ultimate上安装了](https://en.wikipedia.org/wiki/Windows_Vista_editions#Editions_for_personal_computers)[CakePHP](https://en.wikipedia.org/wiki/CakePHP) (cake_1.2.2.8120) 和[EasyPHP](https://de.wikipedia.org/wiki/EasyPHP) (3.0) 。我遵循在线“烘焙”教程，并使用 CLI 中的“蛋糕烘焙”命令成功设置了数据库连接。

我使用“php cake.php bake controller Users”命令为我的“Users”表烘焙了控制器 - 工作正常。但是，当我尝试类似地烘焙视图时，我收到了以下消息：

> ```
> 致命错误：在 C:\Web\EasyPHP 中调用未定义函数 mysql_connect()
> 
> ```

\www\cake\cake\libs\model\datasources\dbo\dbo_mysql.php 在第 374 行'

[此外，在phpMyAdmin](https://en.wikipedia.org/wiki/PhpMyAdmin)页面（web）上为 PHP 启用了 MySQL 模块，但我在 CLI 中找不到它（在命令行中使用“php -m”），即使我取消了“extension=php_mysql”的注释.dll”行在 php.ini 文件中。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-06T12:18:42.090

[获取 XAMPP](https://en.wikipedia.org/wiki/XAMPP)，它具有 Apache 与 MySQL 和 PHP 模块设置和协同工作，以及 MySQL 和命令行版本。它只是解压缩到任何目录，因此不会弄乱您拥有的任何其他 Apache 安装。请注意不同安装之间的任何端口冲突。

*[下载 XAMPP](http://www.apachefriends.org/en/xampp-windows.html)*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-12-25T15:44:27.593

问题的根本原因是在 EasyPHP 5.3中*php文件夹中没有任何**php.ini*文件。

 *复制`php.ini`from `EasyPHP5.3\apache`to`EasyPHP5.3\php`来解决这个讨厌的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T11:17:09.473

我不知道 EasyPHP，但它似乎是基于 Apache 的。检查您是否使用 Apache 模块进行 MySQL 连接，因为这在 CLI 中不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-17T13:09:36.780

将*apache/php.ini*文件复制到*php/php.ini*。

# c# - 在 Gtk 中检索子小部件的最佳方法#

> ID：828901
> 
> 赞同：2
> 
> 时间：2009-05-06T09:57:03.880
> 
> 标签：c#, .net, linux, mono, gtk#

我想检索我在 Gtk# 中的窗口的孩子。到目前为止，我发现查看文档的唯一方法是使用循环通过`Children`Window 的属性来完成，例如：

```
foreach (Widget w in this) 
{
    if (w.Name == "MyWidget")
        return w;
} 
```

`this`窗户在哪里。

我确信必须有一种更好、更清洁、更有效的方法来根据元素的某些属性直接从元素中检索特定的子小部件。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T13:16:35.867

塞尔吉，

也许您最好在从 Gtk.Window 派生的窗口类中为特定小部件创建一个字段？这对我来说是最好的做法。

最好的问候，奥列格·雅罗舍维奇

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2010-06-02T07:13:57.143

您可以检索任何具有如下变量名的子项（无论它是否是子项的子项...窗口子项的子项）：

```
return this.MyWidget 
```

# algorithm - 包含一组点的多边形

> ID：828905
> 
> 赞同：33
> 
> 时间：2009-05-06T09:57:53.910
> 
> 标签：algorithm, language-agnostic, geometry, polygon

我有一组点 S（2D：由 x 和 y 定义），我想找到 P，最小的（意思是：点数最少的）多边形包围该集合的所有点，P 是的有序子集S。

有没有已知的算法来计算这个？（我在这个领域缺乏文化令人惊讶......）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-05-06T10:07:34.417

这个问题有很多算法。它被称为“[最小边界框](http://en.wikipedia.org/wiki/Minimum_bounding_box_algorithms)”。您也会在搜索“[凸包](http://en.wikipedia.org/wiki/Convex_hull)”时找到解决方案，尤其是[在这里](http://en.wikipedia.org/wiki/Convex_hull_algorithms)。

一种方法是找到最左边的点，然后重复搜索所有其他点都位于线 p(n-1)p(n) 右侧的点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T10:27:52.340

这是一个简单的解决方案...

从任意三个点开始形成一个三角形。使用以下操作将每个附加点添加到多边形：

将边分成两条连续的路径，在一条路径中，每条边的线将要添加的点与多边形的其余部分分开（我们称之为“分离路径”），在另一条路径中，每条边的线点与多边形在同一侧。

（注意：只要你的形状保持凸出，它必须，这两条路径将是连续的并形成整个形状）

如果分离路径没有边，则该点在多边形内部，应忽略，否则，从多边形中删除分离路径。将其替换为两段，将分隔路径的每个端点连接到新点。

达达！:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T10:12:53.450

您可能的意思是您想要最小的区域，即凸包。

如果你真的想要最少的**点**，你可以用超大的顶点位置制作一个三角形，这样你的所有点都被包围了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-07T05:24:40.907

这是关于凸包算法的一个很好的资源：[The Convex Hull of a 2D Point Set or Polygon (by Dan Sunday)](http://softsurfer.com/Archive/algorithm_0109/algorithm_0109.htm)

# sql-server - 如何更改 SQL Server 数据库中设置为“只读单元格”的字段？

> ID：828906
> 
> 赞同：9
> 
> 时间：2009-05-06T09:57:56.060
> 
> 标签：sql-server, ssms

当我通过 Microsoft SQL Server Management Studio Express 查看它时，我有一个 SQL 数据库，其中有一个字段设置为“只读”的表。

我需要手动更改该字段中的一些数据，但我看不到任何可以更改的属性，这些属性可以让我覆盖它。

我是否需要在表上编写一个 sql 脚本来执行此操作，或者我是否缺少某些东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T10:01:10.517

字段的数据类型是什么？如果它的 ntext 或 image 数据类型和管理工作室无法处理它的大小，您可能无法“输入”它。

在这种情况下，您可能别无选择，只能执行如下更新。

```
UPDATE TableName SET ColumnName = 'NewValue' WHERE PrimaryKeyId = PrimaryKeyValue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T10:10:56.373

该字段很可能是“只读”的，因为它包含计算值。

如果是这种情况，您将不得不更改表定义中的计算以更改其值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-04T04:27:30.637

当您将特定字段设置为主键并将其设置为“Is Identity”时会出现此问题，这意味着每当插入时该字段将自动递增......所以最好检查它是否是自动递增与否.. 如果是，则将该属性“Is Idenitity”更改为 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-17T08:28:48.503

使用触发器以防止此列更新：

```
CREATE TRIGGER UpdateRecord ON my_table
AFTER UPDATE AS UPDATE my_table
SET [CreatedDate] = ((SELECT TOP 1 [CreatedDate] FROM Deleted d where d.[id]=[id])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-05T20:43:52.707

在我曾经有过的 SQL 查询中，我用来生成要编辑的表的查询包括对“服务器对象”上的表的连接，特别是链接服务器。这将单元格标记为只读，即使我实际上要更改数据的表不在链接服务器上。

我的解决方案：幸运的是，我能够调整查询，所以我不需要使用链接表执行 JOIN，然后我可以编辑单元格。

建议：检查您的查询链接服务器或其他可能锁定您的表的奇怪语句。

# reportingservices-2005 - 计算 Sql Server Reporting Services 中每组的平均行数

> ID：828919
> 
> 赞同：0
> 
> 时间：2009-05-06T09:59:52.437
> 
> 标签：reportingservices-2005

我在报告服务中有一个表格小部件，我在给定 ID 上对行进行分组。

对于每个组，我使用 countrows() 显示每组的行数。

如何在报告末尾显示每组的平均行数？

我缺少的是：如何计算组数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T10:02:26.910

这是来自记忆 - 不确定这个表达式是否正确：

```
= Count(Fields!ID.Value) / CountDistinct(Fields!ID.Value) 
```

假设您分组的“ID”是单个字段，那么这种表达式应该可以满足您的需求。

# visual-studio - 无法打开 VSTS 2008 项目文件

> ID：828924
> 
> 赞同：1
> 
> 时间：2009-05-06T10:02:02.057
> 
> 标签：visual-studio, sql-server-2005

我有一个 ASP.Net VSTS 2008 项目，该项目依赖于数据库（SQL Server 2005），当机器安装了 SQL Server 2005 时，它可以由 VSTS 2008 打开。但是当我将项目复制到另一台没有 SQL Server 的计算机时2005安装了，有这样的错误信息，有什么问题吗？

未能创建 Microsoft Visual C# 2008 编辑器，因为未能打开项目“FOO”，{} 的 QueryService 失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-11T19:38:45.413

我有同样的问题，在比利时论坛帖子中找到了解决方案

[http://www.computerfaq.be/visual-studio/visual-studio-error-compiler-could-not-be-created/](http://www.computerfaq.be/visual-studio/visual-studio-error-compiler-could-not-be-created/)

打开 Visual Studio 命令提示符，然后运行以下命令

devenv.exe /ResetSkipPkgs

为我解决了这个问题，下次我以常规方式打开visual studio时，它仍然解决了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T10:21:02.747

我的猜测是导致这种情况的不是缺少 sql server，而是其他一些 Visual Studio 插件或包。在 {} 的 QueryService 中，这些括号之间是否有指导？

# php - 如何从我的 WAMP 环境迁移到使用 MSSQL？

> ID：828930
> 
> 赞同：0
> 
> 时间：2009-05-06T10:03:42.850
> 
> 标签：php, sql, mysql, sql-server, wamp

我在本地 PC 上安装了 WAMP 环境（使用 WampServer OS）。现在我需要将一个脚本从使用 MySQL 更改为 MSSQL。我完全不知道如何继续，在哪里下载 MSSQL，如何安装它以及如何连接 PHP？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T13:12:58.667

*   下载mssql express [http://www.microsoft.com/Sqlserver/2005/en/us/express.aspx](http://www.microsoft.com/Sqlserver/2005/en/us/express.aspx)
*   熟悉其中一种出色的数据库抽象层，例如 PDO [http://www.php.net/pdo](http://www.php.net/pdo)
*   重构代码以使用数据库抽象层
*   您可能需要将 mysql 特定的东西重写为“标准”SQL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T15:02:47.000

首先让 Sql Server 工作。如果您使用的是 Sql Server 的旧副本（2005 年之前），您需要确保 ntwdblib.dll 存在于您的 System32 目录中，并从您的 PHP dll 目录中删除（ntwdblib.dll 与企业工具一起安装，因此您可能还必须将它们安装在您的 PHP 机器上）。正确查询 Mssql 后，开始在代码中查找 Mssql 与 MySql 的不同之处。

几个提示：

1.  ntwdblib 不接受长字符串（我认为它仅限于 4k，但不要引用我的话）。如果您尝试处理长度超过 4k 的字符串，则必须使用存储过程。
2.  如果可以，请尝试使用 Sql Server 2005（见上文），ntwdblib.dll 很古老并且有很多问题。
3.  [PHP 站点是 mssql 的朋友](http://www.php.net/manual/en/mssql.setup.php)。

# delphi - 如何在 Delphi 5 中从 TDBGrid 中获取选定的单元格

> ID：828935
> 
> 赞同：1
> 
> 时间：2009-05-06T10:07:33.980
> 
> 标签：delphi, delphi-5, tdbgrid

我在表单上有一个 DBGrid 并且我进行了多项选择，我现在需要将选定的单元格（它们是电子邮件地址）发送到 Outlook 的“TO Box”我该怎么做，我将不胜感激（Delphi5）提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T11:30:23.780

要获取所选电子邮件的列表，您可以使用此过程。对于 Outlook，您可能需要使用 shellexec 和 mailto: 或使用 API（如果有）。

```
var
i: Integer;
S: TStringList;
begin
S:=TStringList.Create;
if DBGrid1.SelectedRows.Count > 0 then
begin
for i:=0 to DBGrid1.SelectedRows.Count-1 do
begin
Table1.GotoBookmark(pointer(DBGrid1.SelectedRows[i]));
S.Add(Table1EMail.AsString);
end;
//Outlook procedure goes here 
end;

S.Free;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-09T20:40:33.907

smok1: have you checked if your solution is actually working? Try to click Send button. OE says there is no address antered although it is in text box. Or click the icon on the left of text box. OE doesn't see address enterered using WM_SETTEXT. You have to manually type it.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-05-07T09:46:47.250

Windows 中的每个（几乎）控件本身就是一个窗口。它有自己的类名和实例名。由于每个邮件客户端中每个 MailTo 窗口的构造保持不变，因此在了解如何找到合适的控件后，可以构建解决方案。
这就是 Visual Studio 中的 Spy++ 派上用场的地方（如果您没有它，请尝试找到一些类似的工具，在[http://msdn.microsoft.com/pl-pl/magazine/cc163617(en ) 上有免费软件版本-us).aspx](http://msdn.microsoft.com/pl-pl/magazine/cc163617(en-us).aspx) 但它缺少很酷的搜索工具)。
因此，在启动 Spy++ 和邮件程序后，我们点击“新邮件”，邮件窗口就会出现。在 Spy++ 中刷新，并使用“查找窗口”工具——单击您的 TO 列表，您将看到它是如何构建的。
我从 Outlook Express 开始。邮件窗口是ATH_Note 类的，地址区里面是OE_Envelope 类的窗口，在这个窗口里面有几个窗口，其中一些是RichEdit20W 类的。“收件人”字段是第一个字段。

```
procedure UpdateToOE;
var
  Window:Thandle;
Text:PChar;
begin
  {Lets find Mail window}
  Window:=FindWindow('ATHNote',nil);
  if (Window = 0) then Exit;
  {Lets find adress area inside}
  Window:= FindWindowEx(Window,0,'OEEnvelope',nil);
  if (Window = 0) then Exit;
  {Lets find TO field - remeber this is the first field of this class}
  Window:= FindWindowEx(Window,0,'RichEdit20W',nil);
  if (Window = 0) then Exit;
  {Prepare text into PChar}
  Text:='test@test.com';
  {Send message WMSETTEXT which will set our text in control}
  SendMessage(Window,WMSETTEXT,0,Integer(Text));

  {Sending one extra space to prevent OE does not notice - answer to grzegorz's question}
  SendMessage(Window,WM_CHAR,32,1);
  //done!
End; 
```

注意：当第二个参数为 0 时，FindWindowEx 将始终在行中搜索 FIRST - 所以，但如果你会这样做：

```
Window:=FindWindow('ATH_Note',nil);<br>
if (Window = 0) then Exit;<br>
Window:= FindWindowEx(Window,0,'OE_Envelope',nil);<br>
if (Window = 0) then Exit;<br>
Sibling:= FindWindowEx(Window,0,'RichEdit20W',nil);<br>
if (Sibling = 0) then Exit;<br>
Window:=FindWindowEx(Window, Sibling, 'RichEdit20W',nil);<br>
if (Window = 0) then Exit;<br>
Text:='test@test.com';<br>
SendMessage(Window,WM_SETTEXT,0,Integer(Text));<br> 
```

文本将被放置在第二个编辑字段中。有关 FindWindowEx，请参见 msdn。

所以，这对 OE (XP SP3 IE7) 是有好处的。但是 MS Outlook 呢？我在工作中使用 Spy++ 进行了检查，“To”字段是连续第二个“RichEdit20WPT”类（最后注意 T），父类是“#32770 (Dialog)”，它的父类是“AfxWndW”和一次再次父类是“AfxWndW”（这是 TPanel 中的某种 MS 风格的 TPanel）和 - tadam！– 邮件窗口属于“rctrl_renwnd32”类。所以这个的伪代码将是：

```
Window:=FindWindow('rctrl_renwnd32',nil);<br>
Window:= FindWindowEx(Window,0,’AfxWndW’,nil);<br>
Window:= FindWindowEx(Window,0,’AfxWndW’,nil);<br>
Window:= FindWindowEx(Window,0,’#32770 (Dialog)’,nil);<br>
//Search for FIRST (don’t know what it is)<br>
Sibling:= FindWindowEx(Window,0,’RichEdit20WPT’,nil);<br>
//Search for TO field<br>
Window:= FindWindowEx(Window,Sibling,’RichEdit20WPT’,nil);<br>
Text:='test@test.com';<br>
SendMessage(Window,WM_SETTEXT,0,Integer(Text));<br> 
```

可能您会想要使用 WM_GETTEXT 来提取当前文本并相应地更新新文本，但这超出了进入编辑字段的范围。
顺便说一句：此代码很大程度上取决于 Outlook 版本，因此请尝试使用 Spy++ 检查您的版本）。

# mysql - MySQL .zip 和 .msi 下载之间的区别

> ID：828945
> 
> 赞同：6
> 
> 时间：2009-05-06T10:12:43.937
> 
> 标签：mysql, installation, windows-installer

抱歉，我知道这不是一个真正的编程问题。

但是，例如在 MySQL 网站上，您可以选择下载 .zip 或 .msi 文件。是应用的结果完全一样，还是两者的工作稍有不同。即 .zip 选项更加独立，所有内容都在 MySQL 文件夹下，而注册表中没有任何内容等。

这将对我的问题和未来的问题有很大帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T21:00:21.040

如果我打算在单个机器上安装单个 MySQL - 我使用 .msi

在单个盒子上安装多个 .zip 包更容易处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T10:16:01.417

如果您点击下载页面的链接，您可以[在 MySQL 网站上找到答案](http://dev.mysql.com/doc/refman/5.1/en/windows-choosing-package.html)。

# .net - 使用自定义对象扩展 SSIS 2005 包

> ID：828949
> 
> 赞同：0
> 
> 时间：2009-05-06T10:14:07.863
> 
> 标签：.net, sql-server, ssis, object

我是否应该担心使用自定义对象扩展 SSIS 包？我接受自定义对象可以扩展 SSIS 的功能并可以减少 SSIS 中的重复和复杂性。是否有关于何时使用自定义对象的指南？有哪些风险，例如性能、可维护性等？我在哪里画线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-01-19T18:58:51.723

SSIS 可以通过自定义任务和数据流进行扩展

我自己没有做过，但[sqlis.org 有一些下载](http://sqlis.com/sqlis/category/Component-Downloads.aspx)（和很多其他的东西）。希望这可以帮助

# c# - 为什么这段 C# 代码不能编译？

> ID：828950
> 
> 赞同：12
> 
> 时间：2009-05-06T10:14:29.140
> 
> 标签：c#, .net, nullable

```
double? test = true ? null : 1.0; 
```

在我的书中，这与

```
if (true) {
  test = null;
} else {
  test = 1.0;
} 
```

但是第一行给出了这个编译器错误：

> 无法确定条件表达式的类型，因为 ' `<null>`' 和 ' `double`' 之间没有隐式转换。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-06T10:16:37.607

发生这种情况是因为编译器试图从右到左评估语句。这意味着它看到`1.0`并决定它是双倍的（不是双倍的？）然后它看到`null`.

所以显然和之间没有隐式转换（实际上`double`和之间没有隐式转换）。`null``Struct``null`

您可以做的是明确告诉编译器两个表达式之一可以相互转换。

```
double? test = true ? null : (double?) 1.0;    // 1
double? test = true ? (double?)null : 1.0;     // 2
double? test = true ?  default(double?) : 1.0; // 3
double? test = true ? new double?() : 1.0;     // 4 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-06T10:16:26.127

```
double? test = true ? (double?)null : 1.0; 
```

将工作。这是因为没有从第一个表达式 ( `null`) 的类型到第二个表达式 ( `double`) 的类型的转换。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-06T10:23:41.803

推导 ?: 表达式的类型时，不使用赋值的左侧。

在中，和`b ? A : B`的类型必须相同，或者一个必须隐式转换为另一个。`A``B`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T10:17:48.807

因为编译器无法确定 null 和 1.0 兼容，所以需要将值强制转换为 double?。这需要明确说明。

```
double? test = true ? (double?) null : 1.0; 
```

# c# - 从控制台应用程序访问 SQL Server

> ID：828957
> 
> 赞同：4
> 
> 时间：2009-05-06T10:19:25.213
> 
> 标签：c#, sql-server, console-application

我有一个连接到 SQL Server 数据库的简单控制台应用程序。但是，它在运行时会引发以下错误。有什么线索吗？

```
Unhandled Exception: System.Data.SqlClient.SqlException: Cannot open database "Database" requested by the login. The login failed.
Login failed for user 'MYDOMAIN\MYUSERID'.
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, BooleanignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) 
```

我使用 SQL Server 2005 速成版。但是，我可以使用数据库资源管理器从 Visual Web 开发人员连接到 SQL Server。我使用的代码如下：

```
using System;
using System.Data;
using System.Data.SqlClient;

    public class Test
    {
        public Test()
        {

        }
        static void Main()
        {
            Console.WriteLine("hello");
            string connectionString = "Data Source=localhost\\SQLEXPRESS;Database=Database;Integrated Security=true";
            SqlConnection conn = new SqlConnection(connectionString);
            conn.Open();
            Console.WriteLine("done");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T10:21:45.723

控制台应用程序可以愉快地与 SQLExpress 数据库对话。我希望您只需要通过[management studio](http://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&displaylang=en)配置对您的域帐户的访问。据推测，Web 开发者应用程序正在使用具有不同域凭据的 ASPNET 帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T19:04:22.310

在 app.config 中验证属性“connectionstring”上的密码是否正常。

我确实遇到了同样的问题。我的密码是空的。我不知道为什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-02T15:35:04.090

这意味着您的登录名无权访问该数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T13:23:39.110

我猜你可能在 web 开发和你的 .net 应用程序之间使用了不同的协议。作为快速测试，您可以启动 Sql Server 配置管理器并启用网络配置下的每个协议。您还可以在该配置工具中检查/更改 sql native 客户端的客户端协议。默认情况下，它们都应该启用共享内存，但仔细检查也无妨。

来自[http://msdn.microsoft.com/en-us/library/ms345154.aspx](http://msdn.microsoft.com/en-us/library/ms345154.aspx)：

> 网络支持
> 
> 默认情况下，SQL Server Express 只能访问本地计算机上的共享内存连接类型，尽管用户可以显式打开其他支持的协议，例如 TCP/IP 和命名管道

我假设这是本地安装的 sql server，而不是通过网络安装，对吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T10:41:29.577

如果您运行的是 Vista，那么这可能会发生，因为 Visual Web Developer 在特权帐户下运行，例如管理员。这样做是为了让您开发和调试您的应用程序。管理员帐户包含在 MSSQL 的管理员组中。您的控制台应用程序在您的帐户下运行，该帐户无权连接到 MSSQL。

# asp.net-mvc - 返回一个动作路由另一个 MVC 项目

> ID：828958
> 
> 赞同：0
> 
> 时间：2009-05-06T10:19:36.353
> 
> 标签：asp.net-mvc, routing

我目前正在为一个新项目创建一个管理工具，我想用它来从我的解决方案中的不同项目中检索一个 url。

虽然产品控制器在我调用它的项目中不存在，但我想从第一个项目中检索它。

这是可能的，还是我需要在第一个项目中创建某种辅助方法？！

提前谢谢了。

**为清晰起见更新**

例如，假设我正在构建一个站点地图生成器。假设我的第一个项目中有一条路线：

```
routes.MapRoute(
  "Product",
  "products/{Title}-{Id}",
  new { controller = "Product", action = "Details" }
); 
```

假设我有一个标题为“Buzz Cola”的产品，ID 为 8。这将生成 url：

```
products/buzz_cola-8  (title has been cleaned, but constraints are not shown here) 
```

所以，在我的第二个项目中，没有“产品”路线，也没有产品控制器，但我想在一个函数中创建一个可以执行以下操作的函数：

```
IEnumerable<ProductInfo> products = MyServiceLayer.GetAllProducts();
List<string> productUrls
foreach(ProductInfo productInfo in products)
{
  productUrls.Add(
    FirstProject.Action("Details", "Product", new { Title = CleanTitle(productInfo.Title), Id = ProductInfo.Id });
  );
} 
```

最后，productUrls 将包含以下内容：

```
products/slurm_cola-1
products/hotdogs-2
products/squishy-3
products/buzz_cola-8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T11:39:30.450

您可以创建一个从第二个项目中的控制器继承的控制器

# .net - 这种情况是有效的压力测试吗？

> ID：828959
> 
> 赞同：1
> 
> 时间：2009-05-06T10:19:36.523
> 
> 标签：.net, benchmarking, stress-testing

我有一个以不同方式处理客户端请求的服务器应用程序。

我想知道可以以最小的延迟为多少用户提供服务，所以我做了一个模拟用户请求的小型压力测试应用程序；同时另一个应用程序监视内存/CPU 利用率。

压力测试工具每秒创建线程，每个线程代表一个用户。如果压力测试由于资源不足而无法创建新线程，则会启动压力测试工具的新实例。

问题是，每个线程都会将每个请求的延迟和当前运行的线程数写入文件，因此这会导致 I/O 问题，因为几分钟后您有很多线程需要写入磁盘，这种行为也会在真实场景中不存在，因为客户端只请求数据。

当我想测量每个用户的最大延迟时，如何克服这个问题？

PS：

一些答案说要在不同的机器上运行以考虑网络延迟，这很好，这将是我目前的最终压力测试，我正在同一台服务器上进行此测试，以找出以最小延迟支持多少用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T10:48:37.623

如果您对每个用户的最大延迟感兴趣，为什么不在线程中收集它，并且在停止测试时让所有线程写入我们的最大延迟。您也可以进行统计，计算最小/最大/方差和运行的线程/用户数。您也不应该更新屏幕输出。如果您担心数据丢失，请经常将数据写入磁盘。

为客户端/服务器应用程序执行此测试时，线程不是最理想的。只有有限数量的内核，只有很少的线程真正并行运行，但得到它们的时间片。在多个客户端上启动程序要好得多，并且还为您提供了一些有关网络延迟的数据。服务器软件可以 - 如果能够这样做 - 使用它的硬件，因为它将在最终设置中，客户端将在 LAN 或 WAN 中运行。

显然，您将拥有一个混合环境，因为您不能像用户模拟的那样拥有许多客户端计算机，但是来自独立硬件的同时调用等场景将出现在这样的压力测试中，因为调用不是通过时间片准序列化的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T11:00:29.890

目前尚不清楚这是否是网络应用程序。如果它是联网的，那么您可以通过在周末窃取每个人的桌面来运行压力测试来简单地扩展压力测试。如果只是一些临时测试，这可能是扩展测试的最简单方法。

但是，听起来确实可以进行一些简单的改进。如果这是一个长期运行的压力测试，您可以创建一个线程池来工作（或者更简单，使用线程池，它会自动扩展），而不是为每个请求创建一个新线程。因此，您可以将测试定义为 2000 个用户，并启动 2000 个锤击服务器的线程。每个线程基本上都在一个循环中进行测试并重复。

另一个不清楚的项目是你的所有线程是否都试图共享一个文件。减少瓶颈的一种方法是将信息保存在内存中，直到程序关闭。或者启动一个负责文件写入的写入器线程，而你所有的其他线程都会给它信息。如果 IO 确实得到了备份，那么您的编写器线程将简单地保留在内存中，直到 IO 可用，而您的工作线程可以在此期间继续锤击服务器。请记住，由于涉及线程同步，这可能无法很好地扩展，因此您可能希望在工作线程中缓冲一些条目，并且每 100 个请求只同步一次文件写入器线程。我认为这不是什么大问题，因为听起来不像你

编辑：根据评论，我建议在这种情况下尝试使用单个线程来管理您的 IO 操作。你们所有人都是工作线程，而不是写入文件，而是使用任何详细信息创建一个对象，并将其传递给要写入文件的队列。要减少锁定/解锁，请在工作线程中使用队列，并且每隔一段时间同步一次。确保在线程中交换信息时锁定。另外，我可能会注意内存使用情况，因为这将允许任何未决的东西在内存中建立。如果这仍然导致您的 io 阻塞，我会考虑减少写入，或者调整或添加更快的硬盘。

# apache-flex - 如何将 maven 依赖项添加到 Flex Builder 3 中的 flex 构建路径？

> ID：828960
> 
> 赞同：6
> 
> 时间：2009-05-06T10:20:54.197
> 
> 标签：apache-flex, maven-2, flexbuilder, m2eclipse

我们正在使用 maven 使用[flex-mojo](https://docs.sonatype.org/display/FLEXMOJOS/Home)构建一个 flex 项目，这很棒。问题是我无法将 pom 中指定的 swc 依赖项添加到 flex 构建路径中。据我所知，Flex Builder 只允许您使用绝对路径，因此即使使用[m2eclipse 插件](http://m2eclipse.sonatype.org/)添加 maven 支持，它也看不到 maven 依赖项。

有没有人找到一种在不复制依赖项的情况下同时使用 maven 和 Flex Builder 构建的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-11T11:14:58.897

Flex-mojos 现在支持使用[`flexmojos:flexbuilder`](http://www.sonatype.com/books/maven-book/reference/flex-dev-sect-flexbuilder.html)目标来执行此操作。它对于嵌套项目并不完美，但似乎在所有其他情况下都可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-07T17:30:48.030

这不是一个特别优雅的答案，但它可能符合您的目的。

您可以使用 maven-dependency-plugin 将类路径输出到文件。[build-classpath](http://maven.apache.org/plugins/maven-dependency-plugin/build-classpath-mojo.html)是相关的目标。下面的配置会将Maven的类路径输出到*[项目目录]/target/.mavenClasspath*

您可以编写一个小脚本或 ant 任务来读取 .mavenClasspath 文件内容并将条目附加到 Eclipse .classpath。如果您使脚本更智能并删除以前的条目，然后将其设置为[外部构建器](http://help.eclipse.org/stable/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-93_project_builder.htm)，您将拥有一个几乎集成的解决方案。

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <executions>
    <execution>
      <id>output-classpath</id>
      <phase>package</phase>
      <goals>
        <goal>build-classpath</goal>
      </goals>
      <configuration>
        <outputFile>${project.build.directory}.mavenClasspath</outputFile>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-20T15:12:28.697

Flex Builder 现在可以处理相对路径（参见[错误报告](http://bugs.adobe.com/jira/browse/FB-12483)）；您可以将它们添加到您的 .actionScriptProperties 中，如下所示：

```
<libraryPathEntry kind="3" linkType="1" path="${M2_HOME}/repository/flexlib/flexlib/2.4/flexunit-2.4.swc" useDefaultLinkType="false"/> 
```

# java - 非解释语言可以有垃圾收集器吗？

> ID：828967
> 
> 赞同：5
> 
> 时间：2009-05-06T10:22:02.197
> 
> 标签：java, language-agnostic, garbage-collection, interpreter

非解释语言是否有可能拥有垃圾收集器。解释型语言让解释器逐行执行程序，因此解释器也可以提供带有 GC 的运行时。但是是否有可能拥有任何其他语言的垃圾收集器而无需在代码本身中构建 GC？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-06T10:26:19.923

垃圾回收只需要对指针变量进行特殊标记，以便运行时可以识别它们并用于垃圾回收。它与解释/编译无关，而是需要特殊的运行时并为每个变量存储额外的数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T10:26:24.790

好吧，.NET 语言（发出到 IL - C#、VB.NET、MC++ 等）不会被解释（特别是如果你使用 NGEN） - 并且具有完整的垃圾收集。

同样，Java。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-06T10:38:34.247

是的 - [http://www.hpl.hp.com/personal/Hans_Boehm/gc/](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-06T10:59:49.000

有关编译语言的实际实现，在本例中为 C 和/或 C++，请参阅位于[http://www.hpl.hp.com/personal/Hans_Boehm/gc/的 Boehm GC](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-07-14T08:47:01.103

Haskell 具有垃圾收集功能，无论是编译为本机代码还是解释。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-06T10:31:41.660

新的 C++0x 包括使垃圾收集的实现更容易的功能。例如看这个[采访](http://csclub.uwaterloo.ca/media/C++0x%20-%20An%20Overview.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-06T10:25:10.817

是的。

当智能指针引用计数变为零时，具有智能指针实现的 C++ 将进行垃圾收集。

你有垃圾收集。你不是自己建造的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-06T10:26:58.783

Objective-C 2 现在有垃圾收集，并且还有可用于 C++ 的垃圾收集库。

我认为只要有语言允许您检查对象，就可以遍历对象树。

# c# - C# 制作控制台程序的前端？

> ID：828968
> 
> 赞同：0
> 
> 时间：2009-05-06T10:22:05.677
> 
> 标签：c#, console, frontend

我用 c# 编写了一个控制台程序，它最多需要三个文件作为输入，并对它们进行一些数据计算。

我想做一个简单的前端，让用户轻松

*   导入文件 - 基本上选择最多三个文件路由到后端代码

*   更改设置 - 我目前存储在 app.config 文件中的大约 10 个设置。也许一个简单的设置框会很好

*   看看发生了什么 - 控制台程序显示一些状态消息，这些消息可能对在 GUI 上显示有用

我几乎没有 Windows 窗体或 GUI 设计的经验，所以我真的不知道从哪里开始。我将后端的东西编译成* .dll，目前正在sharpdevelop的设计模式下玩耍……但我真的不知道如何让两者一起工作。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T10:29:49.650

在这种情况下，通常的模式是将应用程序的主要功能放入类库中，并从包装可执行文件中调用它，例如控制台应用程序、winforms 应用程序或 webforms 应用程序（如果可能）。这样，您可以根据需要轻松调整接口，并简单地将输入和输出路由到类库和从类库中输出。

编辑：我意识到这不是一个非常深入的答案，但我希望它至少有助于开始，以及可能出现的任何其他答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T10:36:59.900

如果您想开始在 .NET 中进行 GUI 设计，我建议您选择 WPF（Windows Presentation Foundation）。这是微软在 UI/图形领域发布的最新技术，也是目前一切的发展方向。（Windows 窗体不会过时很长时间，尽管它肯定会慢慢被弃用。）但是我注意到您正在使用 SharpDevelop，它还没有真正支持 WPF（据我所知），而它确实适用于 WinForms。如果你有机会使用 Visual Studio，我建议你从学习 WPF 开始。您的优势在于不会被以前对 WinForms 样式和方法的经验所迷惑，因此这将是非常正确的方法。

无论您想学习哪个[，WindowsClient.NET 的入门页面](http://windowsclient.net/getstarted/)（WinForms 和 WPF 的官方 MS 站点）都将是一个很好的资源。还有一些关于 WPF 入门的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/ms742119.aspx)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T10:34:04.790

您是否尝试过 Visual Studio Express 版本？它们是免费的，并带有用于 WinForms 或 WPF 应用程序的设计器。

作为第一遍，您需要 3 个用于文件名的文本区域，以及用于显示文件打开对话框的相关按钮（它实际上并没有打开文件，只是返回文件名）。

显示状态的标签 - 从您的工作人员代码更新。

然后是您的配置设置的各种单选按钮、复选框等。

哦，不要忘记“开始”按钮来启动您的流程。

如果您的进程需要一段时间，您应该使用后台工作线程。然后，您可以实现一个“取消”按钮，以安全地中止进程并在出错时进行整理。

一旦你让它工作，你就可以进行优化和重组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T10:36:57.467

你的问题很模糊。如果您询问如何使用 GUI，您应该阅读一些有关 Windows 窗体的书。如果您询问如何将 dll 放入新的 windows 窗体应用程序中，那么您应该在 winforms 项目的属性中添加对它的引用，然后使用 dll 命名空间中的类。

# .net - Microsoft 的公共符号服务器有什么用处？

> ID：828970
> 
> 赞同：4
> 
> 时间：2009-05-06T10:23:16.843
> 
> 标签：.net, visual-studio, debugging, symbols

到目前为止，我一直使用 ASP.NET MVC 框架源代码来调试 ASP.NET MVC。在我的笔记本电脑上，我只是尝试了一种不同的方法，即在调试时在 VS 中打开“模块”窗口并右键单击 System.Web.Mvc，然后选择“从加载符号”>“Microsoft 符号服务器”。

VS 似乎实际上加载了一些东西，因为 System.Web.Mvc 程序集的符号文件被报告为已加载。此外，我的调用堆栈中属于 System.Web.Mvc 的所有行都从灰色变为黑色。但是，在尝试进入属于 System.Web.Mvc 的代码时，我仍然收到“源代码不可用”错误消息。

所以，我加载了符号，但仍然没有源代码。不是什么大问题，因为我仍然可以用旧方式调试它。但我想知道微软符号服务器有什么用处呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T10:24:39.540

它们使堆栈跟踪对本机 DLL 正常工作 - 没有符号，您的堆栈跟踪通常只能到达最近的 Windows DLL，然后停止。使用符号，它们继续通过 Winodws DLL。您可以看到函数名称，但看不到源代码（显然）。

调试本机 Windows 程序时，您经常会得到如下堆栈跟踪：

```
 mydll.dll
  mydll.dll
  some_windows_dll.dll
  some_windows_dll.dll
  some_other_windows_dll.dll
  some_other_windows_dll.dll
  myexe.exe
  myexe.exe 
```

如果没有 Windows DLL 的符号，您会发现堆栈只能到此为止：

```
 mydll.dll
  mydll.dll
  some_windows_dll.dll 
```

而且你不会一直看到回到起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T11:12:05.430

根据我的经验，符号服务器对于托管和非托管调试都很有用，因为它们提供了非常需要的详细信息*。*其他人已经介绍了为什么这对本机代码很重要，所以我将坚持使用托管代码。

我使用 WinDbg+Sos 对托管代码进行了相当多的调试，我需要定期深入了解本机部分。请记住，对于操作系统而言，托管应用程序与非托管应用程序没有什么不同。最终，托管应用程序将调用 Win32 dll。要检查那些你需要适当的符号。

例如，如果您需要了解有关特定托管调用的详细信息，您确实需要查看本机代码。一个示例可能是当您`Monitor.Enter`在托管堆栈中看到时。如果调用刚刚发出，或者线程实际上正在等待 (*)，您无法真正通过查看调用本身来判断。通过转储本机调用堆栈，您可以判断是否发出了对 WaitForMultipleObjects 的调用。

(*)`!threads`命令的状态标志在这里会为您提供帮助，但是如果您想要详细信息，则本机堆栈的转储仍然非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T10:37:41.800

我还没有发现符号服务器对托管 DLL 有用——没有它们，您仍然可以获得托管堆栈跟踪。我认为托管符号的主要价值是行号信息，但你打算用它做什么？

然而，我不能没有用于调试本机代码的符号。[源服务器](http://referencesource.microsoft.com/)确实非常有用。

# jsp - 如何使用 jsp include 在应用程序（战争）之外包含文件

> ID：828973
> 
> 赞同：5
> 
> 时间：2009-05-06T10:24:25.763
> 
> 标签：jsp, include

我正在使用“jsp:include”在我的一个 jsp 文件中包含一个静态文件。当静态 html 文件位于应用程序文件夹中时，它可以正常工作。但是，如果它保存在应用程序文件夹之外，则它不会包含在 JSP 文件中。

注意：我已经为保存静态文件的文件夹创建了一个上下文，我可以使用直接 url 查看 html 文件。

请帮忙..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-08T09:34:06.150

我已经使用**c:import**标签解决了这个问题。

为了定义动态 URL，我使用了 bean:define 标记。谢谢朋友的建议和帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-06T14:14:37.007

您只能`jsp:include`用于 Web 应用程序上下文中的资源。您将需要使用`java.io.File`或类似的方式从文件系统路径加载，或使用[ClassLoader.getResource](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/ClassLoader.html#getResource(java.lang.String))从类路径加载资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-09-16T10:02:13.910

该方法的另一个好处`<c:import>`是您可以使用`charEncoding`属性设置编码。您不能使用`<%@include%>`or`<jsp:include>`语句执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-17T09:02:07.020

请参阅此[JSP 包含指令示例](http://www.jsptube.com/jsp-tutorials/jsp-include-directive.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-12T05:18:06.657

我使用了一个类，该类具有从 URL 获取内容的方法：例如：http: [//link.inet.vn/seo-website/inet.html](http://link.inet.vn/seo-website/inet.html)

```
public class URLReader
{
    public URLReader()
    {
        in = null;
        out = null;
        requestType = null;
        headers = null;
        content = null;
        headers = new Hashtable();
    }

    public void doGet(String server, String uri, int port)
    {
        try{
            Socket client = new Socket(server, port);
            client.setKeepAlive(true);
            in = new DataInputStream(client.getInputStream());
            out = new DataOutputStream(client.getOutputStream());
            out.writeBytes("GET " + uri + " HTTP/1.0\r\n");
            out.writeBytes("Host: " + server + "\r\n");
            out.writeBytes("Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/x-shockwave-flash, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*\r\n");
            out.writeBytes("Accept-Language: en-us\r\n");
            out.writeBytes("Accept-Encoding: gzip, deflate\r\n");
            out.writeBytes("User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)\r\n");
            out.writeBytes("Connection: Keep-Alive\r\n");
            out.writeBytes("Content-Length: 0\r\n\r\n");
            out.flush();
            parseRequest();
            out.close();
            in.close();
            client.close();        
        }catch(Exception e){
            System.out.println(e.getMessage());
        }

        return;
    }

    public byte[] getContent()
    {
        return content;
    }

    public String getHeader(String name)
    {
        String key = (String)headers.get(name);
        return key;
    }

    public Hashtable getHeaders()
    {
        return headers;
    }

    public String getRequestType()
    {
        return requestType;
    }

    public static void main(String args[]) throws IOException
    {
        URLReader reader = new URLReader();

        reader.doGet("link.inet.vn", "/seo-website/inet.html", 80);
        if(reader.getContent() != null)
            System.out.println(new String(reader.getContent(),"UTF-8"));

    }

    private boolean parseRequest()
    {
        byte match[];
        int index;
        String line;
        match = (new byte[] {
            13, 10, 13, 10
        });
        index = 0;
        line = "";
        int i;
        try{
            while((i = in.read()) >= 0) 
            {
                if(i == match[index] && index <= 3)
                    index++;
                else
                    index = 0;
                if(index == 4)
                {
                    content = readHTTPContent();
                    break;
                }
                line = line + (char)i;
                if(line.length() > 2 && i == 10)
                {
                    int pos = line.indexOf(':');
                    if(pos != -1)
                    {
                        String name = line.substring(0, pos);
                        String value = line.substring(pos + 1, line.length()).trim();
                        setHeader(name, value);
                    } else
                    {
                        setRequestType(line.substring(0, line.length()).trim());
                    }
                    line = "";
                }
            }

            return true;
        }catch(Exception e){
            System.out.println(e.getMessage());
            return false;
        }                
    }

    private byte[] readHTTPContent()
        throws IOException
    {
        ByteArrayOutputStream baosContent = new ByteArrayOutputStream();
        int contentLength = 0;
        try {
            contentLength = Integer.parseInt( (String) headers.get("content-length"));
        } catch (Exception ex) {
            contentLength = 1024 * 1024;
        }
        int bytesToRead = 0;
        int bytesRead   = 0;
        int totalBytesRead = 0;
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];

        if (contentLength < bufferSize) {
            bytesToRead = contentLength;
        } else {
            bytesToRead = bufferSize;
        }
        do {
            try {
                bytesRead = in.read(buffer, 0, bytesToRead);
            } catch (InterruptedIOException e) {
                /* comms read timeout expired, no problem */
                System.out.println("Timeout reading from socket");
            }
            if (bytesRead == -1) {
                in.close();
               // throw new IOException("Connection was closed by client.");
                break;
            } else if (bytesRead > 0) {
                //////////////////////////////////////
                baosContent.write(buffer, 0, bytesRead);
                //////////////////////////////////////
                totalBytesRead += bytesRead;
            }
            // Left bytes to read
            if (contentLength - totalBytesRead > bufferSize) {
                bytesToRead = bufferSize;
            } else {
                bytesToRead = contentLength - totalBytesRead;
            }
        } while (totalBytesRead < contentLength);

        return baosContent.toByteArray();        
    }

    public void saveToFile(byte data[], String filename)
    {
        try{
            File f = new File(filename);
            FileOutputStream fout = new FileOutputStream(f);
            fout.write(data);
            fout.close();
        }catch(Exception e){
            System.out.println(e.getMessage());
        }        
        return;
    }

    private void setHeader(String key, String value)
    {
        headers.put(key.toLowerCase(), value);
    }

    private void setRequestType(String s)
    {
        requestType = new String(s);
    }

    private byte content[];
    private Hashtable headers;
    private DataInputStream in;
    private DataOutputStream out;
    private String requestType;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T14:16:45.347

只是出于兴趣-想要这样做的原因是什么？- 可能有另一种方法。

我怀疑您想要一些独立于 WAR 文件的配置，并且对于部署 WAR 的每个环境都是唯一的。

# delphi - delphi托盘图标BaloonHint中从右到左的文本

> ID：828988
> 
> 赞同：0
> 
> 时间：2009-05-06T10:28:27.470
> 
> 标签：delphi, localization, right-to-left

有没有办法在 delphi 托盘图标 BaloonHint 中对齐文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T13:03:53.570

您需要使用自己的提示窗口

```
type
 TRTLHint = class(THintWindow)
 protected
    procedure CreateParams(var Params: TCreateParams); override;
 end;

procedure TRTLHint.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.ExStyle := Params.ExStyle or WS_EX_LAYOUTRTL;
end; 
```

[然后，您可以通过这种方式](http://www.chami.com/tips/delphi/112996D.html)使用此 TRTLHint 。

# php - C++ 中的转储工具，如 PHP 中的 var_dump()？

> ID：828989
> 
> 赞同：27
> 
> 时间：2009-05-06T10:29:30.027
> 
> 标签：php, c++

当我在大学的时候，我做了一些 C/C++，但在不久的将来我在 PHP 中工作，现在我希望把更多的时间花在学习 C/C++ 上。

在 PHP 中，我使用 print_r() 或 var_dump() 来显示结构或数组中的数据。我在 C 中是否有这样的默认功能，以便查看我在结构或数组中有什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-06T10:31:51.410

C++ 中没有这样的功能。您当然可以编写自己的 Dump() 函数。通常无法提供此类功能的原因是 C++ 编译过程删除了构建转储输出所需的对象元数据。您当然可以在调试器中显示结构内容，其中此类元数据保存在调试信息中。

顺便说一句，你问的是 C 还是 C++？这两种语言在功能和方法上都有很大不同，尽管两者都没有 var_dump() 或类似的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-18T10:07:29.933

C++ 本身不提供 var_dump 之类的功能，但使用 Boost.Fusion 之类的库以及 ADAPT_STRUCT 和 ADAPT_ADT 工具，它很容易实现。

实际上，正如另一个响应中所说，C++ 编译器不会生成生成此类输出所需的元数据。但是，可以生成这些元数据并使用一些模板元编程来使用它们。

这样我在这里实现了一个adapted_struct_printer，它可以打印std::container、任何类或结构、boost::variant 和boost::tuple。

# 新解决方案

现在您可以轻松地执行以下操作：

```
#include <iostream>
#include <pre/json/to_json.hpp>

struct customer {
  std::string name;
  size_t money_spent;
  std::vector<std::string> interests;
};

BOOST_FUSION_ADAPT_STRUCT(customer,
  name,
  money_spent,
  interests)

...

customer my_customer{
  "Mr. Dupond",
  1000,
  {"sport articles", "food", "tools"}
};

std::cout << pre::json::to_json(my_customer) << std::endl; 
```

你可以反过来使用这个库，也可以使用 from_json 从 json 填充结构。

此处提供文档：http: [//daminetreg.github.io/lib-cpp-pre/html/namespacepre_1_1json.html#a4325d2cdd64a7e321303fd4428f298b9](http://daminetreg.github.io/lib-cpp-pre/html/namespacepre_1_1json.html#a4325d2cdd64a7e321303fd4428f298b9)

# 旧回应

唯一的要求是你在你的类上调用 BOOST_FUSION_ADAPT_STRUCT/BOOST_FUSION_ADAPT_ADT（见[http://www.boost.org/doc/libs/1_57_0/libs/fusion/doc/html/fusion/adapted.html](http://www.boost.org/doc/libs/1_57_0/libs/fusion/doc/html/fusion/adapted.html)）

所以这个例子：

```
#include <iostream>

#include <swissarmyknife/boost/fusion/adapted_struct_printer.hpp>

#include <boost/fusion/include/define_struct.hpp>
#include <boost/variant.hpp>
#include <boost/tuple/tuple.hpp>

namespace bla {

  struct someclass {
     int i = 12;
     int j = 15;
  };

  using boost::fusion::detail::operator <<;
}

BOOST_FUSION_ADAPT_STRUCT(bla::someclass,
  (int, i)
  (int, j)
)

BOOST_FUSION_DEFINE_STRUCT((bla), innerbim,
    (std::string, mystring)
    )

BOOST_FUSION_DEFINE_STRUCT((bla), bimbim,
    (int, boom)
    (int, bam)
    (bla::innerbim, my_inner_bim)
    )

typedef boost::variant<int, double, bla::innerbim> myvariant_t;
typedef boost::tuple<std::string, int, bla::innerbim, myvariant_t> my_tuple_t;

BOOST_FUSION_DEFINE_STRUCT((bla), blabla,
    (bla::bimbim, bim)
    (int, i)
    (int, j)
    (std::vector<double>, list)
    (std::list<bla::bimbim>, list_of_bimbim)
    (my_tuple_t, mytuple)
    (myvariant_t, myvariant)
    )

int main(int argc, char** argv) {
  using namespace swak;

  bla::blabla instance{
    {22, 12, bla::innerbim{"COOL"} }, 
    23,
    43, 
    {2.00, 39.07, 24.05},
    { 
      {24, 9, bla::innerbim{"FEEL GOOD"} },
      {26, 14, bla::innerbim{"SO BAD"} },
    },
    {"Hey that's not an int", 1, bla::innerbim{"hello"}, 12},
    bla::innerbim("I'm in the variant")
  };
  std::cout << instance << std::endl;

  bla::someclass otherinstance{};
  std::cout << "Other instance : " << otherinstance << std::endl;

  return 0;
} 
```

打印出以下内容：

```
{
    bim :
        {
            boom : 22,
            bam : 12,
            my_inner_bim :
                {
                    mystring : COOL,
                }
        }
    i : 23,
    j : 43,
    list : [2, 39.07, 24.05],
    list_of_bimbim : [    
        {
            boom : 24,
            bam : 9,
            my_inner_bim :
                {
                    mystring : FEEL GOOD,
                }
        }
    ,     
        {
            boom : 26,
            bam : 14,
            my_inner_bim :
                {
                    mystring : SO BAD,
                }
        }
    ],
    mytuple :
        {
            0 (Ss) : Hey that's not an int,
            1 (i) : 1,
            2 (N3bla8innerbimE) :
                {
                    mystring : hello,
                }
            3 (N5boost7variantIidN3bla8innerbimENS_6detail7variant5void_ES5_S5_S5_S5_S5_S5_S5_S5_S5_S5_S5_S5_S5_S5_S5_S5_EE) : 

                {
                    12}
        }
    myvariant : 

        {

            {
                mystring : I'm in the variant,
            }
        }
}

Other instance :     
    {
        i : 12,
        j : 15,
    } 
```

我正在改进实现，以便在某个时候将其作为 boost fusion 中的一个可能的新功能，但它已经可以使用，如图所示：

[https://github.com/daminetreg/lib-cpp-swissarmyknife/blob/feature/adapted_struct_printer_improved/test/adapted_struct_printer.cpp](https://github.com/daminetreg/lib-cpp-swissarmyknife/blob/feature/adapted_struct_printer_improved/test/adapted_struct_printer.cpp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-04T22:37:00.820

这是可能的，但如果启用调试符号并禁用所有优化，则需要大量工作。而且它会很慢而且可能不是很可靠[*1]。

调试器可以做的任何事情都可以通过导致断点的 dump() 函数进行复制，并注销信息。

一些调试器可以自动化，所以转储函数本身可能会写在调试器中。

*1 例如，调试器在处理一些断点时有时会崩溃。例如，程序需要有一个断点并在尝试转储数据之前停止所有线程。例如，需要处理实时中断的程序可能无法工作。例如，调试器需要足够可靠以处理许多断点并且不引入其他问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-08T02:41:26.013

在微软文章中有一些解决方案：

## 矢量::push_back

[https://msdn.microsoft.com/pt-br/library/7fthz5xd.aspx](https://msdn.microsoft.com/pt-br/library/7fthz5xd.aspx)

```
template <typename T> void print_elem(const T& t) {
    cout << "(" << t << ") ";
}

template <typename T> void print_collection(const T& t) {
    cout << "  " << t.size() << " elements: ";
    for (const auto& p : t) {
        print_elem(p);
    }
    cout << endl;
} 
```

以及对此的呼吁：

```
cout << "vector data: " << endl;
print_collection(v); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-06T10:33:55.007

`cout`不，对于用户定义的数据结构，您必须使用来自或 C 风格`printf`的输出函数系列中的一个来自己滚动。同样，对于数组（C 风格的字符串除外），您必须遍历所有元素并打印每个元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-06T10:36:36.810

不，没有。例如，使用像[ddd](http://www.gnu.org/software/ddd/)这样的调试器。大多数 IDE 都集成了一个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-06T12:48:46.953

**我通常使用 GDB 打印。**

例如这段代码：

```
#include <string.h>
struct _example_ {
    int a;
    int b;
    char c[20];
};

int main(){
    struct _example_ example;
    example.a = 1;
    example.b = 2;
    strcpy(example.c,"example_c");
} 
```

> 使用 gcc main.c -o 可执行文件 -g 编译

如果您想知道*struct example*的值，您应该使用 GDB 执行程序，在您想要的行上放置一个中断，然后打印变量，如下所示。

```
Breakpoint 1, main () at main.c:12
12      strcpy(example.c,"example_c");
(gdb) n
13  }
(gdb) print example
$1 = {a = 1, b = 2, c = "example_c\000\000\000\000\000\000\000`PUU"}
(gdb) 
```

> 在这种情况下，我在第 12 行放置断点，并打印变量*示例*，然后我得到了*结构示例中的所有变量和值*

# asp.net - 调试 ASP.NET 超时

> ID：828993
> 
> 赞同：2
> 
> 时间：2009-05-06T10:30:07.340
> 
> 标签：asp.net

我需要在超时后调试 asp.net 网站，即通过放置在 .aspx 页面中的断点，该断点在表单身份验证配置中指定为 loginURL 设置。

但是，我知道当 debug="true" 站点不会超时（[链接文本](http://blogs.msdn.com/tess/archive/2006/04/13/575364.aspx)）

那么如何调试超时场景呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-06T11:23:24.717

如果超时是问题所在，为什么不使用 ASP.NET 中的标准跟踪功能呢？使用跟踪信息使您能够确定花费最多时间的位置。这可能有助于识别瓶颈。

有关ASP.NET 中的跟踪示例，请参见[此处。](http://authors.aspalliance.com/aspxtreme/webapps/tracefunctionality.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T11:00:49.450

我猜您有兴趣找出代码的哪一部分速度慢到足以导致请求超时。如果您在调试模式下逐行执行它，您应该能够确定是哪一行导致了问题，即使不会触发“超时”异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T22:09:55.623

回覆：

> “感谢上面的回复，尽管我不需要确定导致超时的原因，而是需要实际导致超时并在超时后跟踪代码。
> 
> 已经报告了一个问题，在超时并重新登录该站点后，观察到了一些我正在尝试识别的奇怪行为。”

那么也许没有办法在调试模式下做到这一点。跟踪可能很有用，或者添加大量命令以将信息记录到文件中，以便您以后可以查看发生了什么。

另一个想法：您的用户在收到超时错误后是否按下后退按钮？在某些情况下，这可能会导致意外行为。

# java - 如何使用 EJBQL 选择实体集合并将其作为参数传递给 bean？

> ID：828995
> 
> 赞同：1
> 
> 时间：2009-05-06T10:30:53.080
> 
> 标签：java, hibernate, orm, jpa, ejbql

我正在从 JPA 数据存储中进行一些奇怪的报告。

我需要选择（使用 EJBQL）对象列表。这些对象包含实体的集合。我有一个由以下构造的类：

```
FOOBean(String param1, 
    String param2, 
    List<Entity> listParam) 
```

（注意第三个参数是一个列表）

我想使用`GROUP BY`, fetching选择这些 bean 的列表`listParam`，所以我想编写一个像这样工作的查询：

```
 SELECT new FOOBean(
               e1.param1, 
               e1.param2,
               e1) 
               FROM Entity e1
               GROUP BY e1.param1, e1.param2 
```

以便将分组的实体提取到列表中并插入到第三个参数中。是否可以这样做，或者我必须创建两个查询来选择不同的`param1`and对`param2`；并分别获取具有适当参数值的所有实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:40:48.583

这是不可能的，至少在 JPA 1.0 中是不可能的（我怀疑在 JPA 2.0 中是不同的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-11T12:21:26.750

我认为根据您的条件检索对象会更好，然后在您的实体中使用 @oneToMany 注释来设置列表。*`******``