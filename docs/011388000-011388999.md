# StackOverflow 问答 11388000-11388999

# scala - Slick（Scalaquery） - 插入给出类型错误

> ID：11388000
> 
> 赞同：0
> 
> 时间：2012-07-09T01:00:11.933
> 
> 标签：scala, playframework-2.0, scalaquery

我在我的游戏框架应用程序中使用 Slick (Scalaquery)。根据[slick tutorial](https://github.com/slick/slick/wiki/Inserting-and-Updating) - 我可以为要插入的列定义投影。（我正在定义这个投影，因为我的索引是一个自动递增的列。）但是，当我在插入中使用这个投影时，我得到一个类型错误说：

```
[NoSuchMethodError: scala.Predef$.augmentString(Ljava/lang/String;)Ljava/lang/String;]. 
```

我的模型是这样定义的：

```
package models

import play.api.db._
import play.api.Play.current

import scala.slick.driver.PostgresDriver.simple._
import scala.slick.ql.{MappedTypeMapper}
import scala.slick.session.{Session, Database}

case class Book(name: String, filename: String)

object Book extends Table[(Long, String, String)]("book") {

  lazy val database = Database.forDataSource(DB.getDataSource())
  def id = column[Long]("id", O PrimaryKey, O AutoInc)
  def name = column[String]("name", O NotNull)
  def filename = column[String]("filename", O NotNull)
  def * = id ~ name ~ filename
  def withoutId = name ~ filename

  def findAll() : Seq[Book] = database.withSession { implicit db:Session =>
    (for(t <- this) yield t.name ~ t.filename).list.map(attrs => Book(attrs._1, attrs._2))
  }

  def create(book: Book): Unit = database.withSession { implicit db:Session =>
    this.withoutId insert(book.name, book.filename)
  }

} 
```

这是堆栈跟踪：

```
! @6b1eg7f2d - Internal server error, for request [POST /addBook] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[NoSuchMethodError: scala.Predef$.augmentString(Ljava/lang/String;)Ljava/lang/String;]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1-2.0.2.jar:2.0.2]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1-2.0.2.jar:2.0.2]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor-2.0.2.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1-2.0.2.jar:2.0.2]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor-2.0.2.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor-2.0.2.jar:2.0.2]
Caused by: java.lang.NoSuchMethodError: scala.Predef$.augmentString(Ljava/lang/String;)Ljava/lang/String;
    at scala.slick.driver.BasicSQLUtilsComponent$class.quoteIdentifier(BasicSQLUtilsComponent.scala:12) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.PostgresDriver$.quoteIdentifier(PostgresDriver.scala:69) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.BasicStatementBuilderComponent$InsertBuilder.appendNamedColumn(BasicStatementBuilderComponent.scala:400) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.BasicStatementBuilderComponent$InsertBuilder.scala$slick$driver$BasicStatementBuilderComponent$InsertBuilder$$f$1(BasicStatementBuilderComponent.scala:387) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.BasicStatementBuilderComponent$InsertBuilder$$anonfun$scala$slick$driver$BasicStatementBuilderComponent$InsertBuilder$$f$1$1.apply$mcVI$sp(BasicStatementBuilderComponent.scala:377) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.collection.immutable.Range.foreach$mVc$sp(Range.scala:75) ~[scala-library.jar:0.11.3] 
```

有人可以通过指出我的插入有什么问题来帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:12:39.747

Scala 2.9（Play 使用的）不支持 SLICK。所有“正确”的 SLICK 构建（在 scala.slick 命名空间和新的前端）都需要 Scala 2.10.0-M4 或 -M5。Scala 2.9 上支持的最新版本是 ScalaQuery 0.10.0-M1。

从您在代码片段中使用的功能来看，ScalaQuery 0.10.0-M1 甚至 0.9 的所有内容都应该以相同的方式工作（除了不同的导入）。

# ios - 使用模拟器测试自定义位置

> ID：11388003
> 
> 赞同：3
> 
> 时间：2012-07-09T01:00:25.833
> 
> 标签：ios, testing, ios-simulator, core-location

我刚刚花了最后一个小时搜索 - 认为必须有一个答案 - 并没有找到太多，所以我在这里问。

我正在尝试让示例应用程序区域通过模拟器触发进入和/或退出区域更新。我熟悉使用 Debug > Location > Custom Location 设置特定的纬度和经度，但这似乎没有多大作用，尽管它似乎在 LocateMe 示例应用程序中有效。在这一点上，我不知道问题是 iOS 模拟器的限制还是示例应用程序处理区域检测的方式的限制（我对 iOS 还是比较陌生）。

我遇到过，[`FTLocationSimulator`](http://github.com/futuretap/FTLocationSimulator)但我想知道这是否会有所帮助（特别是因为它似乎模仿了通过模拟器设置自定义位置的能力）。

Apple 文档中似乎也没有太多关于 iOS 模拟器设置自定义位置的能力。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T03:46:17.150

将 GPX 文件添加到您的项目并为其添加航点。当您的应用程序在模拟下运行时，请使用 XCode 的 Simulate Location 功能（位于底部调试栏上的小路箭头）并选择您的 GPX 文件。然后 XCode 将开始为您的应用程序提供坐标。

示例 GPX 文件内容：

```
<?xml version="1.0"?>
<gpx>
  <wpt lat='33.749272' lon='-84.388261'><name>Atlanta, Georgia</name></wpt>
  <wpt lat='42.7335'   lon='-84.5467'><name>Lansing, Michigan</name></wpt>
  <wpt lat='32.361667' lon='-86.279167'><name>Montgomery, Alabama</name></wpt>
  <wpt lat='38.576667' lon='-92.173611'><name>Jefferson City, Missouri</name></wpt>
  <wpt lat='41.590833' lon='-93.620833'><name>Des Moines, Iowa</name></wpt>
</gpx> 
```

请注意，模拟器将在两个航路点之间“连接点”（在上面的示例中，它将沿着乔治亚州亚特兰大和密歇根州兰辛之间的一条线生成位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:58:20.183

这对我有用：

1.  进入模拟器中的设置应用程序
2.  导航`General -> International -> Region Format -> (Choose a region)`
3.  指定区域

希望这可以帮助！

# php - -1 记录插入错误

> ID：11388009
> 
> 赞同：0
> 
> 时间：2012-07-09T01:01:58.673
> 
> 标签：php, mysql

我的代码显示 -1 Record Inserted 错误并且没有将字段插入数据库。有什么想法为什么要这样做？

```
 <?php
include("dbconnect.php");
$con=new dbconnect();
$con->connect();
error_reporting(E_ALL);

if($_POST) {

    $users_name = $_POST['name'];
    $users_email = $_POST['email'];
    $users_website = $_POST['website'];
    $users_comment = $_POST['content'];

    $users_name = htmlspecialchars($users_name);
    $users_email = htmlspecialchars($users_email);
    $users_website = htmlspecialchars($users_website);
    $users_comment = htmlspecialchars($users_comment);

$postid = $_GET['id'];

$sSql = "INSERT INTO comments
 ( post_id, name, email, website,content)
 VALUES ($postid, '$users_name',
        '$users_email', '$users_website', '$users_comment' )";

    mysql_query($sSql);
    $update=mysql_affected_rows();
    echo "<h2>$update Record Inserted</h2><br />";
    echo '<h2> Your Comment is submitted</h2><br />';
}
?> 
```

由于某种原因，评论表没有得到更新。我是使用 mySQL 和 PHP 编程的新手。任何建议都会对我有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:10:20.657

-1 表示查询返回错误。

将此 sql 查询放入您的 sql 浏览器的 sql 'querier' 中，看看错误是什么：

```
INSERT INTO 
comments
(post_id,
name,
email,
website,
content)
VALUES 
(2, 
'name',
'email@', 
'http://', 
'comment') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:05:42.960

1.  首先在您的 php SQL 语句中插入虚拟值并注释 mysql_query 语句。

    ```
    $sSql = "INSERT INTO comments (post_id,name,email,website,content) VALUES (100, 'anoop.pete','anoop.pete@gmail.com', 'www.anooppete.com', 'Nice Website' )";
    //mysql_query($sSql);
    //$update=mysql_affected_rows(); 
    ```

2.  打印 SQL 语句...

    ```
    print($sSql); 
    ```

3.  从浏览器复制 SQL 语句，在 MySql 中执行 $sSql

4.  如果该行被插入，在 MySQL 中，取消注释并再次运行相同的页面。

    ```
    mysql_query($sSql);
    $update=mysql_affected_rows(); 
    ```

如果它运行，请尝试删除 htmlspecialchars()

```
 $users_name = $_POST['name'];
    $users_email = $_POST['email'];
    $users_website = $_POST['website'];
    $users_comment = $_POST['content']; 
```

我猜你的 htmlspecialchars() 正在返回一些无效字符......

# android - 如何用Ant构建和打包android项目

> ID：11388010
> 
> 赞同：0
> 
> 时间：2012-07-09T01:02:07.550
> 
> 标签：android, ant, build, package

如何使用 Ant 构建和打包 android 项目。

我想用 Ant 自动构建和打包一个 android 项目，而不是 Eclipse。

有人给我一些例子或一些 Ant 构建文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:05:13.457

假设您位于项目的根文件夹中，请从终端/shell/console/命令提示符处执行：

```
android update project -p . 
```

这将生成必要的文件，包括`build.xml`. 根据您的要求对其进行修改，或者将其保留为标准构建行为。

要创建调试版本，请执行：

```
ant debug 
```

或者换成`debug`发布`release`版本。请注意，您需要提供发布密钥的详细信息才能完成签名过程（密钥库位置、密钥库密码、密钥别名和密钥密码）。如果你不这样做，你最终会得到一个未签名的 apk，你必须使用适当的密钥手动签名。

我也更喜欢对大多数构建进行清理，因此我在每个发布构建中发出的命令如下所示：

```
ant clean release 
```

参考：

*   [从命令行管理项目](http://developer.android.com/tools/projects/projects-cmdline.html)
*   [构建和运行](http://developer.android.com/tools/building/index.html)

# list - 无法编译方案功能

> ID：11388013
> 
> 赞同：1
> 
> 时间：2012-07-09T01:02:51.247
> 
> 标签：list, functional-programming, scheme

在这里计划的新手。我正在尝试编译一个方案函数，`range`. 这非常简单 - 它需要一个`start`,`step`和`stop`列表`L`并创建一个新列表，其中每个元素 = stepAmt + curStep。

例如：（范围'（0 2 7））=>（0 2 4 6），（范围'（2 2 0））=>（）

当我尝试编译时

```
(define (helper2(start stepAmt stop curStep newList)
(if (> start stop)
    '()
    (if (> (+ stepAmt curStep) stop)
        newList
        (helper2 (start stepAmt stop (+ stepAmt curStep) (concat newList (+stepAmt curStep)))))))) 
```

我得到错误

> 病态特殊形式：(define helper2 (start stepamt stop curstep newlist) (if ... ... ...))

我不确定这意味着什么。我已经仔细检查了我的逻辑和括号，但无法弄清楚。

这是将调用该函数的函数：

```
(define (example L)
(let (
    (start (car L))
    (curStep (car (cdr L)))
    (step (car (cdr L)))
    (stop (car (cdr (cdr L))))
    )
    (helper2 (start step stop curStep '()))
) 
```

)

任何指针都会很棒。我不确定这是错字还是逻辑错误。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T01:06:49.780

你不需要

```
(define helper2 (some arguments go here)
   definition goes here) 
```

但

```
(define (helper2 some arguments go here)
  definition goes here) 
```

记住这一点的方法是，后面的内容`define`看起来就像对您正在定义的函数的调用。“这里是如何处理这样的电话`(helper2 some arguments go here)`：......”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T01:06:22.147

仔细看看你把括号放在哪里：

```
(define helper2(start stepAmt stop curStep newList) ... 
```

相对

```
(define (example L) ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T03:29:37.317

你在使用 DrRacket 吗？这有效：

```
#lang racket

(define (helper2 start stepAmt stop curStep newList)
(if (> start stop)
    '()
    (if (> (+ stepAmt curStep) stop)
        newList
        (helper2 start stepAmt stop (+ stepAmt curStep) (concat newList (+ stepAmt curStep))))))

(define (concat l elm)
  (append l (list elm)))

(define (example L)
(let (
    (start (car L))
    (curStep (car (cdr L)))
    (step (car (cdr L)))
    (stop (car (cdr (cdr L))))
    )
    (helper2 start step stop curStep '())
)) 
```

# amazon-ec2 - 使用 scp 将文件复制到 Amazon EC2 实例？

> ID：11388014
> 
> 赞同：240
> 
> 时间：2012-07-09T01:02:53.307
> 
> 标签：amazon-ec2, terminal, copy, scp, public-key

我正在尝试使用我的 Mac 终端将文件从下载（我在线下载的 phpMyAdmin）scp 到我的 Amazon EC2 实例。

我使用的命令是：

```
scp -i myAmazonKey.pem phpMyAdmin-3.4.5-all-languages.tar.gz  hk22@mec2-50-17-16-67.compute-1.amazonaws.com:~/. 
```

我得到的错误： **警告：身份文件 myAmazonKey.pem 无法访问：没有这样的文件或目录。权限被拒绝（公钥）。失去了连接**

我的 myAmazonkey.pem 和 phpMyAdmin-3.4.5-all-languages.tar.gz 都在下载中，所以我尝试了

```
scp -i /Users/Hello_Kitty22/Downloads/myAmazonKey.pem /Users/Hello_Kitty22/Downloads/phpMyAdmin-3.4.5-all-languages.tar.gz  hk22@mec2-50-17-16-67.compute-1.amazonaws.com:~/. 
```

和我得到的错误： **警告：身份文件/User/Hello_Kitty22/Downloads/myAmazonkey.pem 无法访问：没有这样的文件或目录。权限被拒绝（公钥）。失去了连接**

谁能告诉我如何解决我的问题？

ps有一个类似的帖子：[scp (secure copy) to ec2 instance without password](https://stackoverflow.com/questions/6558080/scp-secure-copy-to-ec2-instance-without-password) ，但它没有回答我的问题。

* * *

## 回答 #1

> 赞同：465
> 
> 时间：2012-12-18T03:21:32.197

尝试将用户指定为`ec2-user`，例如

```
scp -i myAmazonKey.pem phpMyAdmin-3.4.5-all-languages.tar.gz ec2-user@mec2-50-17-16-67.compute-1.amazonaws.com:~/. 
```

请参阅[使用 SSH 连接到 Linux/UNIX 实例](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html)。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-01-22T10:02:32.830

第二个目录是您的目标目的地，不要在那里使用服务器名称。换句话说，您不需要提及您当前所在机器的机器名称。

```
scp -i /path/to/your/.pemkey -r /copy/from/path user@server:/copy/to/path 
```

-r 如果是目录。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-05-18T20:43:11.233

您的密钥不得公开查看，SSH 才能正常工作。如果需要，请使用此命令：

```
chmod 400 yourPublicKeyFile.pem 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-10-08T03:15:47.800

您应该在本地计算机上尝试上述 scp 命令。

在您的本地机器上尝试：

```
scp -i ~/Downloads/myAmazonKey.pem ~/Downloads/phpMyAdmin-3.4.5-all-languages.tar.gz  hk22@mec2-50-17-16-67.compute-1.amazonaws.com:~/. 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-10-18T17:16:59.863

以下是适用于**EC2**实例的详细信息：

```
scp -i /path/to/whatever.pem /users/me/path-to-file ec2-user@ec2-55-55-555-555.compute-1.amazonaws.com:~ 
```

开始的几点注意事项：

1.  注意后面给出的三个参数之间的空格`-i`
2.  `scp`代表安全复制协议。知道单词可以更容易记住命令。
3.  `-i`指示您需要将`.pem`文件作为下一个参数。如果没有`-i`，那么你不需要一个`.pem`。
4.  请注意`:~`EC2 实例的目的地末尾的 。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-01-05T02:03:54.013

我有完全相同的问题，我的解决方案是

`scp -i /path/pem -r /path/file/ ec2-user@public aws dns name:`（此处留空）

完成此部分后，进入 ssh 服务器和 mv 文件到所需位置

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-09-16T08:31:37.863

```
scp -i ~/path to pem file/file.pem -r(for directory) /PATH OF LOCAL/localfile user@hostname:PATH OF SERVER/serverdirectory 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-03-14T09:05:53.557

**将文件从本地发送到服务器：**

> scp -i .ssh/awsinstance.pem my_local_file ubuntu@XX.XXX.XXX.XXX:/home/ubuntu

**从服务器下载文件到本地：**

> scp -i .ssh/awsinstance.pem ubuntu@XX.XXX.XXX.XXX:/home/ubuntu/server_file 。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-06-12T22:02:57.897

这对我有用。我对这个问题使用了其他两个答案的组合。

```
scp -i /Users/me/documents/myKP.pem -r /Users/me/desktop/testDir \
       ec2-user@ec2-11-111-11-11.compute-1.amazonaws.com:/home/ec2-user/remoteDir 
```

“ec2-user@ec2-11-111-11-11.compute-1.amazonaws.com”是从您的 ec2 实例的公共 DNS 复制并粘贴的。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-12-21T11:05:54.093

以下 SCP 格式适用于我

```
scp -i /path/my-key-pair.pem ec2-user@ec2-198-51-100-1.compute-1.amazonaws.com:~/SampleFile.txt ~/SampleFile2.txt 
```

**SampleFile.txt**：它将是您的根目录的路径（在我的例子中，/home/ubuntu）。就我而言，我想下载的文件位于 /var/www

**SampleFile2.txt**：它将是您机器根路径的路径（在我的情况下，/home/MyPCUserName）

**所以，我必须写下面的命令**

```
scp -i /path/my-key-pair.pem ec2-user@ec2-198-51-100-1.compute-1.amazonaws.com:~/../../var/www/Filename.zip ~/Downloads 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-09-12T02:55:56.750

[本视频](https://youtu.be/GFTsU_XRXEg)逐步介绍了使用 SCP 将文件从本地计算机复制到 AWS EC2 Linux 实例的过程（包括下面提到的要点）。

要使用 SCP 更正此特定问题：

1.  您需要指定正确的 Linux 用户。来自[亚马逊](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html)：

    *   对于 Amazon Linux，用户名为 ec2-user。
    *   对于 RHEL，用户名为 ec2-user 或 root。
    *   对于 Ubuntu，用户名是 ubuntu 或 root。
    *   对于 Centos，用户名为 centos。
    *   对于 Fedora，用户名为 ec2-user。
    *   对于 SUSE，用户名为 ec2-user 或 root。
    *   否则，如果 ec2-user 和 root 不起作用，请咨询您的 AMI 提供商。
2.  您的私钥不得公开可见。运行以下命令，以便只有 root 用户可以读取该文件。

    ```
    chmod 400 /path/to/yourKeyFile.pem 
    ```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-09-05T06:06:02.770

1.  公共 DNS

    ```
    scp -i /path/my-key-pair.pem /path/my-file.txt ec2-user@my-instance-public-dns-name:path/ 
    ```

2.  (IPv6)

    ```
     scp -i /path/my-key-pair.pem /path/my-file.txt ec2-user@\[my-instance-IPv6-address\]:path/ 
    ```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-07-09T04:43:31.707

检查 .pem 文件的权限...openssh 通常不喜欢世界可读的私钥，并且会失败（iir，scp 在向用户提供此反馈方面做得不好）。

您可以简单地使用该密钥 ssh 到您的 AWS 主机吗？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-09-26T07:17:02.277

首先，您应该将`.pem`文件模式从读写模式更改为只读模式。这可以通过终端中的单个命令来完成`sudo chmod 400 your_public_key.pem`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-09-05T23:19:46.653

我尝试了上面提到的所有建议，但没有任何效果。我终止了当前实例，启动了另一个实例并重复了相同的过程。这次没有问题。有时这可能是远程 ami 的错。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-25T10:12:37.620

> SCP推荐

**将文件从本地发送到远程服务器**

sudo scp -i ../Downloads/new_bb_key.pem ./dump.zip ubuntu@13.127.124.129:~/.

**将文件从远程服务器发送到本地**

sudo scp -i ~/Downloads/new_bb_key.pem ubuntu@13.127.124.129:/home/ubuntu/LatestDBdump.zip 下载/

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2012-10-11T14:16:21.147

我会使用：

`scp -i "path to .pem file" "file to be copeide from local machine" username@amazoninstance: 'destination folder to copy file on remote machine'`

# android - Phonegap 插件：如何在 Android 中将 Base64 字符串转换为 PNG 图像

> ID：11388018
> 
> 赞同：11
> 
> 时间：2012-07-09T01:03:35.333
> 
> 标签：android, image, cordova, base64, phonegap-plugins

Android 不允许原生应用（如基于 Phonegap 的应用）编写二进制文件。一个常见的应用是将 Base64 字符串转换为图像。那么，你如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-09T01:03:37.317

解决方案; 这个插件可以转换 Base64 PNG 字符串并将图像生成到 sdCard。我们走吧！

**1\. Base64 解码器**

获取这个名为 MiGBase64 的超快 Base64 编码/解码器类。[从SourceForge](http://sourceforge.net/projects/migbase64/files/latest/download)下载它。在项目的 src/ 文件夹中创建一个名为“util”的文件夹。将下载的课程放在那里。

**2.java**

在项目的 src/ 文件夹中创建一个名为“org/apache/cordova”的文件夹。使用以下源代码在其中创建一个名为“Base64ToPNG.java”的 Java 文件。

```
package org.apache.cordova;

/**
* A phonegap plugin that converts a Base64 String to a PNG file.
*
* @author mcaesar
* @lincese MIT.
*/

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.os.Environment;
import java.io.*;
import org.json.JSONException;
import org.json.JSONObject;
import util.Base64;

public class Base64ToPNG extends Plugin {

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {

        if (!action.equals("saveImage")) {
            return new PluginResult(PluginResult.Status.INVALID_ACTION);
        }

        try {

            String b64String = "";
            if (b64String.startsWith("data:image")) {
                b64String = args.getString(0).substring(21);
            } else {
                b64String = args.getString(0);
            }
            JSONObject params = args.getJSONObject(1);

            //Optional parameter
            String filename = params.has("filename")
                    ? params.getString("filename")
                    : "b64Image_" + System.currentTimeMillis() + ".png";

            String folder = params.has("folder")
                    ? params.getString("folder")
                    : Environment.getExternalStorageDirectory() + "/Pictures";

            Boolean overwrite = params.has("overwrite") 
                    ? params.getBoolean("overwrite") 
                    : false;

            return this.saveImage(b64String, filename, folder, overwrite, callbackId);

        } catch (JSONException e) {

            e.printStackTrace();
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION, e.getMessage());

        } catch (InterruptedException e) {
            e.printStackTrace();
            return new PluginResult(PluginResult.Status.ERROR, e.getMessage());
        }

    }

    private PluginResult saveImage(String b64String, String fileName, String dirName, Boolean overwrite, String callbackId) throws InterruptedException, JSONException {

        try {

            //Directory and File
            File dir = new File(dirName);
            if (!dir.exists()) {
                dir.mkdirs();
            }
            File file = new File(dirName, fileName);

            //Avoid overwriting a file
            if (!overwrite && file.exists()) {
                return new PluginResult(PluginResult.Status.OK, "File already exists!");
            }

            //Decode Base64 back to Binary format
            byte[] decodedBytes = Base64.decode(b64String.getBytes());

            //Save Binary file to phone
            file.createNewFile();
            FileOutputStream fOut = new FileOutputStream(file);
            fOut.write(decodedBytes);
            fOut.close();

            return new PluginResult(PluginResult.Status.OK, "Saved successfully!");

        } catch (FileNotFoundException e) {
            return new PluginResult(PluginResult.Status.ERROR, "File not Found!");
        } catch (IOException e) {
            return new PluginResult(PluginResult.Status.ERROR, e.getMessage());
        }

    }
} 
```

**3\. Javascript**

将此 JavaScript 作为 Base64ToPNG.js 写入项目的 www 文件夹。不要忘记在您的 html 文件中包含对它的引用。

```
/**Works on all versions prior and including Cordova 1.6.1 
* by mcaesar
*  MIT license
*  
*/

(function() {
    /* This increases plugin compatibility */
    var cordovaRef = window.PhoneGap || window.Cordova || window.cordova; // old to new fallbacks

    /**
    * The Java to JavaScript Gateway 'magic' class 
    */
    function Base64ToPNG() { }

    /**
    * Save the base64 String as a PNG file to the user's Photo Library
    */
    Base64ToPNG.prototype.saveImage = function(b64String, params, win, fail) {
        cordovaRef.exec(win, fail, "Base64ToPNG", "saveImage", [b64String, params]);
    };

    cordovaRef.addConstructor(function() {
        if (!window.plugins) {
            window.plugins = {};
        }
        if (!window.plugins.base64ToPNG) {
            window.plugins.base64ToPNG = new Base64ToPNG();
        }
    });

})(); 
```

**4\. plugins.xml 文件**

将以下内容添加到 res/xml/plugins.xml 文件

```
<plugin name="Base64ToPNG" value="org.apache.cordova.Base64ToPNG"/> 
```

**5\. 最后是 HTML 示例和参数**

```
<button onclick="test();">No optional params required, Cowboy.</button> </br>
<button onclick="test2();">Make PNG with some parameters</button>

<script src="Base64ToPNG.js" type="text/javascript"></script>

<script type="text/javascript">

//May have a mime-type definition or not 
var myBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="//a red dot

function test(){

    //Illustrates how to use plugin with no optional parameters. Just the base64 Image.
    window.plugins.base64ToPNG.saveImage(myBase64, {}, 
       function(result) {
          alert(result);
       }, function(error) {
          alert(error);
       });
 }

 //No mimetype definition example
 var myOtherBase64 = "iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="

 function test2(){

    //Shows how to use optional parameters
    window.plugins.base64ToPNG.saveImage(myBase64, {filename:"dot.png", overwrite: true}, 
       function(result) {
          alert(result);
       }, function(error) {
          alert(error);
    });

 }
 </script> 
```

***参数***

1.  *filename*：要生成的文件的名称。默认情况下与 url 中的相同。
2.  *folder*：生成文件的目录的名称。默认情况下“SD卡/图片”
3.  *overwrite*：如果文件已经存在，则替换它。默认为假。

    我希望这能回答一些令人烦恼的问题。快乐编码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:22:25.197

对于任何想将其与 kineticjs 一起使用的人，以下是一种享受：

```
function saveCanvas() {
    $('#save').bind( $bind, function(){
        stage.toDataURL({
        callback: function(dataUrl){
            window.plugins.base64ToPNG.saveImage(dataUrl.substr(22,dataUrl.length), {}, 
                function(result) {
                    alert(result);
                }, function(error) {
                    alert(error);
                }
            );
        },
            mimeType: 'image/png',
            quality: 0.5
        });
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T12:20:37.353

此解决方案仅在为其提供 CLEAN Base64 字符串时才有效。换句话说，应该删除“data:image/png;base64”部分，否则Base64解码器填充失败，导致写入文件时出现空指针错误。

我还注意到图像没有显示在图库中，但它正确存储在 SD 卡上。当我把它下载到我的电脑上时，我可以很好地打开它。不知道那是关于什么的。

感谢您的工作！

# android - malloc 和 dlmalloc 的区别

> ID：11388020
> 
> 赞同：9
> 
> 时间：2012-07-09T01:03:54.290
> 
> 标签：android, memory-management, dalvik

为了在 dalvik 堆中分配内存区域，应用程序使用 dlmalloc，而不是普通的 malloc，为什么使用 dlmalloc，以及它与 malloc 的区别。（据我所知，为了在创建 dalvik VM 时分配 dalvik 堆，使用了 malloc。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T20:28:56.850

最重要的是，Dalvik 需要有一个与默认 malloc 管理的堆分开的底层分配器，因此它可以正确控制分配的发生方式，因为它知道其他子系统不会干扰。

事实证明，dlmalloc 是一个相当成熟的现有库，它提供了我们需要的隔离和钩子。意图（直到我离开团队时）最终我们会用更定制的东西来取代它，但它从来没有成为一个足够紧迫的问题来采取那种特别的尝试。

至于 dlmalloc 和 malloc 之间的详细区别：dlmalloc 是传统 libc malloc API 的特定实现，而“malloc”本身并不特定于特定实现。但即使你有具体的，我怀疑我可以提出任何比“阅读代码”更多的建议。

# .net - 如何并行运行耗时的任务？

> ID：11388024
> 
> 赞同：0
> 
> 时间：2012-07-09T01:04:29.640
> 
> 标签：.net, task-parallel-library, rabbitmq

为了增强我的应用程序，我计划将一项耗时的任务转移到异步运行并进行一些离线处理。想到的第一个想法是使用`hadoop`守护线程。不幸的是，我们依赖的组件只在 windows 上运行。因此，我将注意力转向了队列技术。我发现`rabbitmq`对我们来说是一个潜在的解决方案。但是我们没有这方面的经验。我们有一些问题：

1.  如何监控工作线程？
2.  如何通过创造更多的交流来提高绩效？
3.  如何根据worker机器空闲资源进行负载均衡？
4.  如何进行故障转移？

你认为并行计算`rabbitmq`是个好主意吗？如果您对具有并行计算的 rabbitmq 感兴趣。你能给我一些建议或想法吗？感谢您的回答和评论。

**注意**：我们的任务没有跨工作机器（不同于 map/reduce）。也就是说，一项任务仅分配给一台工作机器。

# java - Java 小程序中的文件路径问题

> ID：11388025
> 
> 赞同：0
> 
> 时间：2012-07-09T01:04:37.300
> 
> 标签：java, netbeans, file-io, java-web-start, japplet

我在 netbeans 中的 java web start 小程序有问题。我无法从运行它的地方（即服务器）获得需要由小程序访问的文件和图像的路径。基本上我在本地机器上使用图像来显示文件夹和 pdf 文件的图标，当我在非 Web 上下文中运行小程序时，这一切都很好，但是尝试在服务器意义上使用它会导致失败。

这是导致问题的代码：

```
company.readCompanyFile("C:\\Users\\Chris\\Desktop\\ArFile Clients\\" + companyName + "\\"
                    + companyName + ".cmp"); 
```

这只是一个简单的缓冲读取器，试图读取存储在此位置的文件。这些目录应该嵌套在程序根目录中的问题是：

```
C:\Users\Chris\Documents\NetBeansProjects\ArFile 
```

一个反映我上面给出的信息的例子会很棒

编辑：这是Applet给出的错误消息

```
BadFieldException[ The field <extension>href has an invalid value: C:\Users\Chris\Desktop\ArFile Clients,C:\Users\Chris\Desktop\ArFile Clients]
at com.sun.javaws.jnl.XMLUtils.getAttributeURL(Unknown Source)
at com.sun.javaws.jnl.XMLUtils.getRequiredURL(Unknown Source)
at com.sun.javaws.jnl.XMLFormat.handleResourceElement(Unknown Source)
at com.sun.javaws.jnl.XMLFormat.access$800(Unknown Source)
at com.sun.javaws.jnl.XMLFormat$2$1.visitElement(Unknown Source)
at com.sun.javaws.jnl.XMLUtils.visitChildrenElements(Unknown Source)
at com.sun.javaws.jnl.XMLFormat$2.visitElement(Unknown Source)
at com.sun.javaws.jnl.XMLUtils.visitElements(Unknown Source)
at com.sun.javaws.jnl.XMLFormat.buildResourcesDesc(Unknown Source)
at com.sun.javaws.jnl.XMLFormat.parse(Unknown Source)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptorFromCache(Unknown Source)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptorFromCache(Unknown Source)
at sun.plugin2.applet.JNLP2Manager.initialize(Unknown Source)
at sun.plugin2.main.client.PluginMain.initManager(Unknown Source)
at sun.plugin2.main.client.PluginMain.access$200(Unknown Source)
at sun.plugin2.main.client.PluginMain$2.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Error while initializing manager: BadFieldException[ The field <extension>href has an invalid value: C:\Users\Chris\Desktop\ArFile Clients,C:\Users\Chris\Desktop\ArFile Clients], bail out
BadFieldException[ The field <extension>href has an invalid value: C:\Users\Chris\Desktop\ArFile Clients,C:\Users\Chris\Desktop\ArFile Clients]
at com.sun.javaws.jnl.XMLUtils.getAttributeURL(Unknown Source)
at com.sun.javaws.jnl.XMLUtils.getRequiredURL(Unknown Source)
at com.sun.javaws.jnl.XMLFormat.handleResourceElement(Unknown Source)
at com.sun.javaws.jnl.XMLFormat.access$800(Unknown Source)
at com.sun.javaws.jnl.XMLFormat$2$1.visitElement(Unknown Source)
at com.sun.javaws.jnl.XMLUtils.visitChildrenElements(Unknown Source)
at com.sun.javaws.jnl.XMLFormat$2.visitElement(Unknown Source)
at com.sun.javaws.jnl.XMLUtils.visitElements(Unknown Source)
at com.sun.javaws.jnl.XMLFormat.buildResourcesDesc(Unknown Source)
at com.sun.javaws.jnl.XMLFormat.parse(Unknown Source)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptor(Unknown Source)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptorFromCache(Unknown Source)
at com.sun.javaws.jnl.LaunchDescFactory.buildDescriptorFromCache(Unknown Source)
at sun.plugin2.applet.JNLP2Manager.initialize(Unknown Source)
at sun.plugin2.main.client.PluginMain.initManager(Unknown Source)
at sun.plugin2.main.client.PluginMain.access$200(Unknown Source)
at sun.plugin2.main.client.PluginMain$2.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Error while initializing manager: BadFieldException[ The field <extension>href has an invalid value: C:\Users\Chris\Desktop\ArFile Clients,C:\Users\Chris\Desktop\ArFile Clients], bail out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:19:14.530

我使用的是相对文件路径，这在 Java Web Start 上下文中不起作用，必须使用绝对路径才能使应用程序运行。

# virtualbox - 如何为oracle虚拟盒子创建自动快照？

> ID：11388027
> 
> 赞同：5
> 
> 时间：2012-07-09T01:05:06.947
> 
> 标签：virtualbox

是否可以编写一个脚本，在不关闭 VM 的情况下拍摄 Oracle Virtual Box 的自动快照。

主机操作系统为 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:19:20.987

试试“VBoxManage.exe snapshot MyVM take MySnapshot”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-10T11:00:51.077

我创建了一个简单的脚本来自动对我的虚拟机进行快照。

GitHub：[https ://github.com/Meru3m/virtualbox-snapshotter](https://github.com/Meru3m/virtualbox-snapshotter)

# javascript - 碰撞检测未检测到

> ID：11388030
> 
> 赞同：0
> 
> 时间：2012-07-09T01:05:25.053
> 
> 标签：javascript, jquery, html, canvas, collision-detection

我有一组都是“矩形”的对象。我也有一个圆圈是对象。我用于重力的方程式是：

newYPos = oldYPos + prevFallingSpeed + 重力

基本上，我将重力率添加到前一帧中圆圈“下降”的像素数，然后将其添加到最后一帧中圆圈的位置。

我正在使用以下代码检测球的任何部分是否在任何物体内：

```
for(var i = 0; i < objects.length; i++){
    if(ball.x > objects[i].x - ball.r && ball.y > objects[i].y - ball.r && ball.x < ball.r + objects[i].x + objects[i].w && ball.y < ball.r + objects[i].y + objects[i].h){
        alert('test');
        gSy = (-1 * gSy);
    }
} 
```

代码检查圆的坐标加上或减去半径是否大于盒子壁的顶部/左侧位置并且小于盒子壁的右侧/底部位置。

有一次球在物体内部，但我从来没有收到警报。我已经尝试了我能想到的一切。希望我只是犯了一些我看不到的愚蠢错误......

如果您想弄乱我的代码或不理解变量，这是一个 jsfiddle：

[http://jsfiddle.net/JGKx5/](http://jsfiddle.net/JGKx5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:31:16.300

**小问题：**

你有四个对象。

*   其中两个（数字 1 和 3）又高又瘦，偏向左侧或右侧。球永远不会靠近他们。
*   其中一个（2 号）又短又宽，在 y 坐标上比球所能达到的要小。
*   另一个（数字 0）又短又宽，它的 y 坐标是一个真正的物理球会穿过的坐标——但是因为你的球以离散的步长移动，你的脚本实际上从来没有看到它这样做。（它从 y=580.4 变为 y=601.2。）

**最大的问题：**

在 jsfiddle 中，您在碰撞测试中的所有比较似乎都是错误的方式:-)。（这很奇怪，因为这里的代码是正确的。）

随着这两个变化（我让球移动了 0.1*gSy 而不是 gSy，并翻转了所有比较运算符），检测到碰撞。

# python - How to figure out if a word in spelled in alphabetical order in Python

> ID：11388032
> 
> 赞同：2
> 
> 时间：2012-07-09T01:05:49.250
> 
> 标签：python, python-2.7

I have a text file full of words. I need to go through the text file and count the number of words that are spelled in alphabetical order. I am struggling to think of way to figure out if a word is in alphabetical order.

I have already looked around and have seen that it can be done with sorted. However, we haven't yet learned about sort in class so I can't use it. Help/tips much appreciated.

Do I need to do something like assigning each letter of the alphabet a number?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T01:07:48.687

A word is in alphabetical order if (and only if) each adjacent pair of its letters is in alphabetical order.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T01:29:01.573

Believe it or not, all characters are already implicitly assigned a number: their ASCII character codes. You can access them by using the `ord()` function, or compare them directly:

```
>>> "a" > "b"
False

>>> "b" > "a"
True 
```

Beware though, capital letters are coded 65 - 90, while lowercase letters are coded 97 - 122, so:

```
>>> "C" > "b"
False 
```

You have to ensure that you are comparing all uppercase or all lowercase letters.

Here's one possible function that uses the above information to check if a given string is in alphabetical order, just to get you started:

```
def isAlphabetical(word):
    for i in xrange(len(word) - 1):
        if word[i] > word[i+1]:
            return False
    return True 
```

# python - python urllib2.urlopen 在 Windows 7 上请求本地主机时要慢得多

> ID：11388033
> 
> 赞同：5
> 
> 时间：2012-07-09T01:05:51.390
> 
> 标签：python, windows-7

我第一次在 Windows 7 机器上运行一些 python 代码，并注意到这个对我的本地服务器的 http 请求比以前慢得多：

结果 = urllib2.urlopen("http://localhost:3000/somepath").read()

这被重复调用，每次都不是立即返回，而是需要大约一秒钟。如果我用 127.0.0.1 替换 localhost，它会像以前一样立即返回（在 Mac OS 上）。

没什么大不了的，但对原因感到好奇。

如果是DNS，为什么不缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:49:00.153

根据[yotam.shacham 的](https://stackoverflow.com/users/1404508/yotam-shacham)`hosts`注释，可以通过从 Windows文件中取消注释此行来解决此问题：

```
127.0.0.1 localhost 
```

在 Windows 7 上，`hosts 文件位于

```
%SystemRoot%\system32\drivers\etc\hosts 
```

`%SystemRoot%`通常[在](https://en.wikipedia.org/wiki/Environment_variable#System_path_variables)哪里 `C:\WINDOWS`

# qt - 我怎样才能找到这些在我的场景中扭曲对象的 OpenGL 调用？

> ID：11388039
> 
> 赞同：7
> 
> 时间：2012-07-09T01:07:10.243
> 
> 标签：qt, opengl-es, qml, openscenegraph

我正在混合使用 OpenGL 的两个库：Qt 和 OpenSceneGraph。我的目标是 OpenGL ES 2，所以一切都是通过着色器和 ES 2 兼容调用完成的。

通过尝试将 OSG 绘制到 QDeclarativeItem 上，我专门将 OSG 与 QtDeclarative 一起使用。我按照 Qt 文档中建议的方式执行此操作：在 beginNativePainting()/endNativePainting() 之间包装所有 OpenGL 调用。

这工作正常，直到我在我的 OpenSceneGraph 场景中使用纹理。当我这样做时，我的 QML 窗口会因为没有更好的词而“混乱”。为了使其尽可能简单，我的 OSG 场景由一个应用了纹理的平面组成。我使用基本的 OpenGL 调用重新创建了场景，并且不再出现问题。这里的问题总结为一堆图片：

*   QtDeclarative 引擎使用 OpenGL 来绘制东西。我设置了一个简单的 QML 页面：

![在此处输入图像描述](../Images/4696d201df82a7d67549defd2fe74301.png)

*   我直接使用 OpenGL 创建了一个简单的场景。这是一架飞机，上面涂有纹理。

![在此处输入图像描述](../Images/85bb2c59fc9e86578c1588a5677151b0.png)

*   现在我尝试在 OSG 中设置相同的场景......相同的着色器等。

![在此处输入图像描述](../Images/a861a33305c436d412d0614fac8d98b3.png)

您可以看到最后一个屏幕截图发生了一些奇怪的事情。不用担心原始 OpenGL 场景是透明的黑色背景，这只是 OSG 使用黑色透明色。问题是使用 QML（矩形）设置的其他项目搞砸了。

**编辑**：澄清发生了什么：我用 QML 绘制的矩形都延伸到屏幕的右边缘。我还注意到，如果我在 QML 中的 OpenSceneGraph 项目*之后*绘制矩形，它们不会出现（我之前没有注意到这一点）。我在以下屏幕截图中的 OSG 项目之后绘制了紫色黑色矩形......请注意它消失了。可能会发生更多奇怪的事情，但这是我观察到的所有玩矩形的东西。

**前** ![在此处输入图像描述](../Images/1ea9a8adc6a158c218ef19980db58e93.png)

**后** ![在此处输入图像描述](../Images/cbc81ec571855a70ff24b51d5f795627.png)

我对 OpenGL 还很陌生，所以我不知道什么样的调用/状态设置会导致这样的事情发生。**我认为 OpenSceneGraph 会进行一些 OpenGL 状态更改，这会扰乱 Qt 的绘图引擎。我也知道这只发生在 OSG 使用纹理时……如果我不在我的 OSG 场景中应用纹理，这不会发生。**这就是我卡住的地方。

此外，我尝试使用 BuGLe 来获取在 OSG 中启用和不启用纹理的 OpenGL 调用跟踪，以查看是否可以找出有问题的状态更改。我发现了一些差异，甚至是 OSG 在两者之间更改的一些全局状态（例如 glPixelStorei()），但是重置我发现的更改没有任何区别。如果我知道要寻找什么，那将有很大帮助。如果有人感到疯狂，我也有堆栈跟踪：

*   带有纹理的 OSG：http: [//pastie.org/4223182](http://pastie.org/4223182) （osg 纹理是第 637~650 行）
*   没有纹理的 OSG：http: [//pastie.org/4223197](http://pastie.org/4223197)

**编辑2：** 这是一个可能有用的差异。在相关行明显之前，您需要向下滚动。 [http://www.mergely.com/nUEePufa/](http://www.mergely.com/nUEePufa/)

**编辑3：** 哇！好的，那个差异帮助了我很多。OSG 启用 VertexAttribArray 3 但不会禁用它。在 OSG 渲染其帧之后调用 glDisableVertexAttribArray(3) 似乎部分解决了问题；不再有 QML 矩形的拉伸。**但是，在 OSG 项目之后绘制的矩形仍然不显示**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:35:34.933

在对跟踪日志着迷之后，我想我发现了两个需要重置的 OpenGL 东西，然后才能将控制权传回 Qt 以导致上述问题消失。我在编辑中提到了一个......我将在这个答案中总结两者。

**矩形/QML 项目失真**

QPainter 直接将顶点属性 3、4 和 5 用于看起来与这些矩形的几何形状相关的东西。这可以在跟踪中看到：

```
[INFO] trace.call: glVertexAttrib3fv(3, 0x2d94a14 -> { 0.00195312, 0, 0 })
[INFO] trace.call: glVertexAttrib3fv(4, 0x2d94a20 -> { 0, -0.00333333, 0 })
[INFO] trace.call: glVertexAttrib3fv(5, 0x2d94a2c -> { 0.2, 0.4, 1 }) 
```

禁用相应的顶点属性数组可修复弹性矩形问题：

```
 glDisableVertexAttribArray(3);
 glDisableVertexAttribArray(4);
 glDisableVertexAttribArray(5); 
```

**在 OSG 项目之后绘制的项目不呈现**

回想起来，这很容易，与纹理没有任何关系。在尝试向我的场景添加纹理之前我没有注意到这一点，所以混合这两个问题是我的错。我还搞砸了我发布的痕迹和差异；在我发现订购问题后，我从未更新它们以解决订购问题（对不起！）

无论如何，QPainter 希望关闭深度测试。当您调用 beginNativePainting() 时，Qt 将关闭深度测试，并且当它开始绘制其项目时……但您应该在交回控制权时将其关闭：

1.  QPainter 绘制东西（DEPTH_TEST = off）
2.  OSG 绘制东西（DEPTH_TEST = on）
3.  QPainter 绘制更多东西 [期望 DEPTH_TEST = off]

正确的跟踪日志显示我没有这样做......所以修复是

```
glDisable(GL_DEPTH_TEST) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:40:56.597

也许您只需要重新启用 GL_TEXTURE_2D？我在您的示例中注意到 OSG 启用并随后禁用 GL_TEXTURE_2D 的纹理。因此，您的两种情况（有纹理与无纹理）之间的区别在于，使用纹理的情况在禁用纹理的情况下完成，而没有纹理的情况则使 GL_TEXTURE_2D 处于初始状态。

如果 Qt 需要/期望启用纹理来绘制四边形，则可能不会显示任何内容。

# android - Android 电子邮件人口

> ID：11388043
> 
> 赞同：2
> 
> 时间：2012-07-09T01:07:46.530
> 
> 标签：android, string, email

我正在尝试创建一个具有“提交”电子邮件按钮的应用程序。我有 2 个列表，其中包含我需要转换为字符串然后将它们附加到电子邮件正文中的项目。

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{ "ToAddress@gmail.com" } );
String temp = "";
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Rob Won!!!" );
for( int a = 0; a < i; a++) {
    temp += Item.get(a).toString() + "\t\t" + Prices.get(a).toString() + "\n";
}
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, temp );
emailIntent.setType("text/plain");

//hideKeyboard();
PeaBerryTeaActivity.this.startActivity(emailIntent); 
```

Item 是以字符串形式列出的“产品”列表，而 Price 是也以字符串形式列出的“价格”列表。我遇到的问题是，在 ForLoop 中，我正在创建消息正文，但是当启动意图时，电子邮件正文中没有列出任何内容，只有一个闪烁的光标。

# c++ - 类的 C++ 初学者问题，可能是析构函数

> ID：11388045
> 
> 赞同：0
> 
> 时间：2012-07-09T01:08:30.087
> 
> 标签：c++

下面是我当前作业的代码。该程序使用几个重载的运算符来提示用户输入他们三餐中每餐的名称和卡路里计数，然后显示结果。通过第一遍一切正常，但是在第二遍中它表现得有点奇怪。无论提示用户的第一餐是什么，都将保留上一轮的名称。可以输入该餐和接下来的三餐的所有其他值，但是无论如何，第一餐的名称保持不变。只是希望有人可以帮助我指出正确的方向。谢谢！

```
#include <iostream>
#include <iomanip> 
#include <string>

using namespace std;

/*********************************************************************
File Name: meal.cpp
Author: Neal Rodruck
Date: 7/8/12
Purpose: To provide intergallactic travelers a means of measuring their
         daily caloric intake.
*********************************************************************/

class Meal
{
private:
    string name;
    int calorie;
public:
    //Class constructors
    Meal() : name("Meal 1"), calorie(0)
    {}
    Meal(string name, int calorie) : name(name), calorie(calorie)
    {
        while (calorie < 1)
        {
            cout << "Please enter a caloric value greater than 0!: ";
            cin >> calorie;
        }
    }

    //Class destructor
    Meal::~Meal()
    {}

    //get functions
    string getName() { return name; }
    int getCalorie() { return calorie; }

    //set functions
    void setName(string n) { name = n; }
    void setCalorie(int c) { calorie = c; }

    //Overloaded operators
    friend ostream &operator<<(ostream &out, Meal m);
    friend istream &operator>>(istream &in, Meal &m);
    friend Meal operator+(Meal a, Meal b);
};

//Calculate two or more meal objects to obtain daily total
Meal operator+(Meal a, Meal b)
{
    return Meal("Daily Total", a.calorie + b.calorie);
}

//Prompt user for name and calorie information 
//for Meal object as well as test for greater 
//than zero calorie total
istream &operator>>(istream &in, Meal &m)
{
    char name[21];
    int calorie = 0;

    cout << "Enter name: ";
    cin.getline(name, 21);  
    cout << "Enter calories: ";
    in >> calorie;

    while (calorie < 1)
    {
        cout << "Please enter a caloric value greater than 0!: ";
        cin >> calorie;
    }

    m.setName(name);
    m.setCalorie(calorie);
    cin.ignore();

    return in;
}

//Display object information
ostream &operator<<(ostream& out, Meal m)
{
    out << "Name: " << m.name << " Calories: " << m.calorie;
    return out;
}

//function prototypes
void makeNull(Meal& breakfast, Meal& lunch, Meal& dinner);
void introduction();
void display(Meal b, Meal l, Meal d, Meal t);
void end();
void enterMealInfo(Meal& breakfast, Meal& lunch, Meal& dinner);

int main()
{
    //Display introductory message
    introduction();

    //Meal Objects
    Meal breakfast;
    Meal lunch;
    Meal dinner;

    //Capture user response
    char response = ' ';

    //Use loop to allow user to enter information for 
    //more than one day
    while (response != 'n')
    {

        //Prompt user for meal information
        enterMealInfo(breakfast, lunch, dinner);

        //Use information captured to create Daily Total meal object
        Meal total(breakfast + lunch + dinner);

        //Display results
        display(breakfast, lunch, dinner, total);

        //Prompt user for more input
        cout << "Would you like to check again? Please selct \"y\" or \"n\": ";
        cin >> response;
        response = tolower(response);
    }

    //Display exit message
    end();

    return 0;
}

//Display introductory message
void introduction()
{
    cout << "Welcome to The Voyager Trek!";
    cout << "\nPlease use this app to keep track of your daily caloric intake!\r\n";
}

//Display meal and summary information
void display(Meal b, Meal l, Meal d, Meal t)
{
    cout << "\n" << left << setw(20) << "Meal" << right << setw(20) << "Calories";
    cout << "\n" << left << setw(20) << b.getName();
    cout << right << setw(20) << b.getCalorie();
    cout << "\n" << left << setw(20) << l.getName();
    cout << right << setw(20) << l.getCalorie();
    cout << "\n" << left << setw(20) << d.getName();
    cout << right << setw(20) << d.getCalorie();
    cout << "\n" << "----------------------------------------";
    cout << "\n" << left << setw(20) << t.getName();
    cout << right << setw(20) << t.getCalorie() << "\n";
}

//Display exit message
void end()
{
    cout << "\r\nThank you for using our app, goodbye!\r\n";
    system("pause");
}

//Using meal objects passed by reference this function 
//will populate appropriate objects with name and calorie
//information
void enterMealInfo(Meal& breakfast, Meal& lunch, Meal& dinner)
{
    cout << "\r\nWhat did you have for breakfast?\r\n";
    cin >> breakfast;
    cout << "What did you have for lunch?\r\n";
    cin >> lunch;
    cout << "What did you have for dinner?\r\n";
    cin >> dinner;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T03:16:52.637

问题是在 main 的 while 循环中使用这一行：

```
cin >> response; 
```

当用户按下回车键时，输入缓冲区中会留下一个尾随换行符。由于您的函数`enterMealInfo`使用 getline，并且 getline 正在寻找换行符，因此它会立即找到它正在寻找的内容，因此它不会提示用户。如果在循环末尾添加此行：

```
cin.ignore(); 
```

它将删除换行符。

* * *

在旁注中，正如 Ree 先生在下面的评论中提到的那样，您的输入运算符有点奇怪。您将 istream 作为第一个参数，但您不使用它。相反，您只需使用`cin`. 您应该使用传入的 istream，如 in`in.getline(name, 21);`等`in >> calorie;`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:34:11.300

可以肯定的是，您忘记同步输入。

试试这个：

```
...
while (response != 'n')
{
    //Sync the input stream 
    cin.sync();

    //Prompt user for meal information
    enterMealInfo(breakfast, lunch, dinner);
... 
```

# mysql - MySQL - 向现有查询添加 JOIN

> ID：11388047
> 
> 赞同：1
> 
> 时间：2012-07-09T01:08:39.633
> 
> 标签：mysql, sql

将 LEFT JOIN 和 INNER JOIN 组合添加到现有查询时遇到问题。

我有两张主桌；“photoSearch”包含我的照片的所有可搜索数据，“photos”包含我的照片的所有数据。我在“photoSearch”中的 3 个字段中使用 FULLTEXT 来获取相关的 photoID，然后从“照片”表中获取数据，如版权、尺寸、尺寸......

**这是我的查询：**

```
SELECT p.photoID, p.setID, p.headline, p.caption, p.height, p.width, p.size, p.copyright
FROM photos AS p,
      (SELECT photoID FROM photoSearch WHERE MATCH (allPeople, allKeywords, shortCaption)
      AGAINST ('+byline' IN BOOLEAN MODE) LIMIT 0,50) AS photoIDs
WHERE p.photoID = photoIDs.photoID; 
```

我现在需要修改这个查询以包含一个 LEFT JOIN 和一个 INNER JOIN，它可以获取每张照片中显示的任何人的姓名，以便在屏幕上打印。有些照片没有任何人，因此需要 LEFT JOIN。我在两个表中有这些数据（标准化）；“photoPeople”和“people”，所以我想出了这个加入：

**我的加入**（需要添加到上述查询）

```
LEFT JOIN ( photoPeople AS pp INNER JOIN people AS pe ON pp.peopleID = pe.PeopleID)
ON p.photoID = pp.photoID 
```

但是我发现很难将其放入我的原始查询中，因为子选择查询位于逗号分隔的 FROM 列表中 - 这让我感到困惑。我还想通过加入我不应该加入的地方来确保不会影响 FULLTEXT 索引的性能。

我确实尝试在子选择之后（在 WHERE 之前）直接添加它，但我收到 SQL 错误，说它无法识别列 p.photoID。

原始查询和数据库设计都不是我的。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T01:17:36.113

```
SELECT 
    p.photoID, 
    p.setID, 
    p.headline, 
    p.caption, 
    p.height, 
    p.width, 
    p.size, 
    p.copyright,
    pe.*
FROM 
    photos p
INNER JOIN
    (
        SELECT photoID 
        FROM photoSearch 
        WHERE MATCH (allPeople, allKeywords, shortCaption) AGAINST ('+byline' IN BOOLEAN MODE) 
        LIMIT 50
    ) pids ON p.photoID = pids.photoID
LEFT JOIN
    photoPeople pp ON p.photoID = pp.photoID
LEFT JOIN
    people pe ON pp.peopleID = pe.peopleID 
```

我认为不需要`INNER JOIN`在`people`桌子上，`LEFT JOIN`因为如果`LEFT JOIN`是`NULL`，`people`也将是`NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:11:59.160

```
LEFT JOIN 
  ( SELECT pp.photoID,name FROM photoPeople AS pp INNER JOIN people AS pe 
    ON pp.peopleID = pe.PeopleID) aa
ON p.photoID = aa.photoID 
```

# c - 未在 TCP 客户端/服务器程序中接收消息

> ID：11388049
> 
> 赞同：0
> 
> 时间：2012-07-09T01:09:02.137
> 
> 标签：c, client-server

我正在尝试实现一个 tcp 客户端和 tcp 服务器。我能够建立连接，但是当我从客户端发送消息时，服务器没有收到它，是的，我确实看过以前的帖子，并且有很多类似的问题。我确实关注了他们，但我仍然遇到同样的错误。我得到的错误来自服务器端：

```
recv: Socket operation on non-socket 
```

这是我的代码。如果您能告诉我我做错了什么，我将不胜感激。我认为我的服务器实现存在问题。

服务器：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <netdb.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#define PORT 3490
#define BACKLOG 10

int main()
{
    struct sockaddr_in server;
    struct sockaddr_in dest;
    int status,socket_fd, client_fd,num;
    socklen_t size;

    char buffer[10240];
    memset(buffer,0,sizeof(buffer));
    int yes = 1;

    if ((socket_fd = socket(AF_INET, SOCK_STREAM, 0))== -1) {
        fprintf(stderr, "Socket failure!!\n");
        exit(1);
    }

    if (setsockopt(socket_fd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(int)) == -1) {
        perror("setsockopt");
        exit(1);
    }

    memset(&server, 0, sizeof(server));
    memset(&dest,0,sizeof(dest));
    server.sin_family = AF_INET;
    server.sin_port = htons(PORT);
    server.sin_addr.s_addr = INADDR_ANY; 
    if ((bind(socket_fd, (struct sockaddr *)&server, sizeof(struct sockaddr )))== -1)    { //sizeof(struct sockaddr) 
        fprintf(stderr, "Binding Failure\n");
        exit(1);
    }

    if ((listen(socket_fd, BACKLOG))== -1){
        fprintf(stderr, "Listening Failure\n");
        exit(1);
    }

    while(1) {
        size = sizeof(struct sockaddr_in);  

        if ((client_fd = accept(socket_fd, (struct sockaddr *)&dest, &size)==-1)) {
            //fprintf(stderr,"Accept Failure\n");
            perror("accept");
            exit(1);
        }

        printf("Server got connection from client %s\n", inet_ntoa(dest.sin_addr));
        //buffer = "Hello World!! I am networking!!\n";

        if ((num = recv(client_fd, buffer, 10239,0))== -1) {
            //fprintf(stderr,"Error in receiving message!!\n");
            perror("recv");
            exit(1);
        }   

        // num = recv(client_fd, buffer, sizeof(buffer),0);
        buffer[num] = '\0';
        printf("Message received: %s\n", buffer); 
        close(client_fd);   
        return 0;
        //close(socket_fd); 
    }    
} 
```

客户：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <netdb.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#define PORT 3490

int main(int argc, char *argv[])
{
    struct sockaddr_in server_info;
    struct hostent *he;
    int socket_fd,num;
    char *buffer;

    if (argc != 2) {
        fprintf(stderr, "Usage: client hostname\n");
        exit(1);
    }

    if ((he = gethostbyname(argv[1]))==NULL) {
        fprintf(stderr, "Cannot get host name\n");
        exit(1);
    }

    if ((socket_fd = socket(AF_INET, SOCK_STREAM, 0))== -1) {
        fprintf(stderr, "Socket Failure!!\n");
        exit(1);
    }

    memset(&server_info, 0, sizeof(server_info));
    server_info.sin_family = AF_INET;
    server_info.sin_port = htons(PORT);
    server_info.sin_addr = *((struct in_addr *)he->h_addr);
    if (connect(socket_fd, (struct sockaddr *)&server_info, sizeof(struct sockaddr))<0) {
        //fprintf(stderr, "Connection Failure\n");
        perror("connect");
        exit(1);
    }

    buffer = "Hello World!! I am networking!!\n";
    if ((send(socket_fd,buffer, sizeof(buffer),0))== -1) {
        fprintf(stderr, "Failure Sending Message\n");
        close(socket_fd);
        exit(1);
    }
    else {
        printf("Message being sent: %s\n",buffer);
    }

    close(socket_fd);   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:41:43.450

我在 gdb 下运行服务器，在调用 accept() 后发现 client_fd 为 0。这是一个无效的套接字 fd，所以我查看了那行代码，发现右括号是错误的：

```
if ((client_fd = accept(socket_fd, (struct sockaddr *)&dest, &size)==-1)) { 
```

应该：

```
if ((client_fd = accept(socket_fd, (struct sockaddr *)&dest, &size))==-1) { 
```

否则，它首先进行比较，然后将比较分配给 client_fd，而您想要分配套接字，然后进行比较。

为了避免这种令人沮丧的错误，通常认为最好的做法是不要将赋值放在“if”语句中。我会建议：

```
client_fd = accept(...);
if (client_fd < 0) { ... } 
```

此外，在客户端中，对 send() 的调用使用“sizeof(buffer)”。'buffer' 是一个 char*，指针的大小是 4（在 32 位系统上），所以只会发送 'Hell'。要发送完整的字符串，请使用“strlen(buffer)”代替要发送的金额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:34:35.797

你的第一个问题是括号放错了。

```
if ((client_fd = accept(socket_fd, (struct sockaddr *)&dest, &size)==-1)) { 
```

实际上应该是

```
if ((client_fd = accept(socket_fd, (struct sockaddr *)&dest, &size))==-1) { 
```

正如您目前拥有的那样，`client_fd`将分配给与返回值之间的相等性测试的结果，`accept()`因此`-1`在成功的情况下将始终为零。

这就是为什么许多程序员避免在 if 语句中进行赋值的原因之一。如果这样写

```
client_fd = accept(socket_fd, (struct sockaddr *)&dest, &size);
if (client_fd == -1) { 
```

那么错误就不会发生。

# css - 这里如何添加径向渐变？

> ID：11388051
> 
> 赞同：2
> 
> 时间：2012-07-09T01:09:51.457
> 
> 标签：css

[http://www.templatemonster.com/demo/39055.html](http://www.templatemonster.com/demo/39055.html)

我在网上冲浪时看到过许多网站在其背景上具有自然渐变。我不明白的是……他们是怎么做到的？我不认为这是一个 Photoshop 创建的图像文件，因为渐变看起来像是根据我的网络浏览器的屏幕大小自然而正确地重新调整大小......所以，我认为它一定是 CSS ......但我找不到哪个代码实际上在做这项工作：/

有人可以告诉我它是如何完成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:13:08.520

这是一个简单的背景图像。

**style.css，第 6 行：**

```
body {background:#fff url(../images/body-bg.jpg) 50% 50%; ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T01:49:44.503

[这是 jsFiddle 上的 CSS3 解决方案](http://jsfiddle.net/Xde5G/)。

随着时间的推移，这将比沉重的背景图像更可取：创建它们、维护它们、服务它们、下载它们、缓存它们。使用 CSS3，这些步骤不再是必需的。

相反，只需使用 CSS3 径向渐变，并使用生成器查找您需要的内容。这是代码：

```
/* IE10 Consumer Preview */ 
background-image: -ms-radial-gradient(center, circle farthest-corner, #FFFFFF 0%, #00A3EF 100%);

/* Mozilla Firefox */ 
background-image: -moz-radial-gradient(center, circle farthest-corner, #FFFFFF 0%, #00A3EF 100%);

/* Opera */ 
background-image: -o-radial-gradient(center, circle farthest-corner, #FFFFFF 0%, #00A3EF 100%);

/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(radial, center center, 0, center center, 506, color-stop(0, #FFFFFF), color-stop(1, #00A3EF));

/* Webkit (Chrome 11+) */ 
background-image: -webkit-radial-gradient(center, circle farthest-corner, #FFFFFF 0%, #00A3EF 100%);

/* W3C Markup, IE10 Release Preview */ 
background-image: radial-gradient(circle farthest-corner at center, #FFFFFF 0%, #00A3EF 100%); 
```

​ A. 目前，它需要供应商前缀，以便它可以跨浏览器渲染。

B. 很难写吗？不，这是微不足道的！这也是CSS3的新方式。查找“CSS3 Generator #what you need#”在这种情况下，它是一个径向渐变。但是您可以对 box-shadow、text-shadow、transform、animation 等执行相同的操作。

[这是大约一百种不同的 CSS3 生成器的一个示例。](http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/default.html)

[这是另一个涉及 opacity 的 jsfiddle](http://jsfiddle.net/Xde5G/1/)，它越来越接近示例图像。

# linux-kernel - 关于 dma_alloc_coherent 的一些问题

> ID：11388052
> 
> 赞同：17
> 
> 时间：2012-07-09T01:10:08.393
> 
> 标签：linux-kernel, linux-device-driver, dma

1.  此调用返回的 DMA 地址是否与物理地址相同？LDD3 表示驱​​动程序应将 DMA 地址视为不透明的。我想映射这个 DMA 缓冲区，以便用户空间可以直接读取/写入它。问题是我应该为 remap_pfn_range 指定什么 PFN（令我惊喜的是，现在（内核 3.4+）适用于与 I/O 内存相同的常规内存）。我可以将 DMA 地址转换为 unsigned long 并将其转换为 PFN 吗？这不是违反 LDD3 关于不透明性的说法吗？

2.  `dma_alloc_coherent`总是在`__get_free_pages`内部使用吗？这是否意味着该区域可能总是过度分配（因为第一个函数占用字节，但第二个函数以页面为单位分配）？

3.  有没有办法为从调用获得的多个连续页面设置单个流映射`__get_free_pages`？`dma_map_page`仅适用于单页。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T13:10:20.217

1.  不，返回的地址是虚拟地址，否则您将无法从内核空间访问它。dma_handle 代表物理地址，但它是不透明的。您需要在它返回的地址上使用 virt_to_phys，然后将其传递给 remap_pfn_range。

2.  我不相信它会这样做（虽然它可能取决于平台），但它确实分配了页面。如果您想要更少量的内存用于 DMA，您应该使用 dma_pool_create 然后从那里分配区域。

3.  您可以使用 dma_map_single 代替 dma_map_page。

我建议您咨询[DMA-API.txt](http://www.kernel.org/doc/Documentation/DMA-API.txt)以获取有关其中一些内容的更多详细信息。

# c++ - 如何获取 wav 文件中存在的笔记列表？

> ID：11388053
> 
> 赞同：2
> 
> 时间：2012-07-09T01:10:13.913
> 
> 标签：c++, audio, fftw, pitch

我正在编写一个程序来帮助人们学习吉他。为此，我需要能够查看时间样本并查看他们演奏的音符。我查看了 FFTW，但我不明白如何让它工作。我也试图弄清楚 Goertzel 算法，但它似乎只适用于像拨号音这样的单频音符（虽然不确定）。需要明确的是，我确实需要能够检测多个音符（以查看是否演奏了一个和弦），但如果有一些谐波也进入那里也没关系。

我正在用 C++ 编写代码，并且更喜欢跨平台的解决方案。

更新：我意识到检测特定音符并不重要；我真正需要的是检查某些频率是否存在，而其他频率不存在。例如，如果有人演奏 C，我想检查是否存在 C 频率（大约 262 Hz），以及可能是 524 Hz 和 786 Hz，并检查附近的音符是否*不在*泛音系列中（如B 和 D) 不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:51:37.530

注释不存在于 wav 文件中。采样的声音是。

人类可能会感知到一些音符，这些音符可能已被播放以在某些 wav 文件中创建声音，但是从录制的声音到转录音乐的自动复音音高估计/识别，以获得丰富和复杂的波形，例如由吉他产生的波形，似乎仍然是一种高级研究课题。

对于某些非常受限制的音乐声音类型，如果可能，将涉及一些重要的 DSP。FFTW 可能对音高估计所需的更复杂的 DSP 处理的一小部分有用，而 Goertzel 滤波则不那么有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:20:52.747

我无法向您指出具体细节，但我相信您需要的是[傅立叶变换](http://www.thefouriertransform.com/#introduction)来检测您正在寻找的频率。[这里](https://stackoverflow.com/questions/3058236/how-to-extract-frequency-information-from-samples-from-portaudio-using-fftw-in-c?rq=1)也有类似的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T04:02:32.337

这个pdf怎么样？ [http://miracle.otago.ac.nz/tartini/papers/A_Smarter_Way_to_Find_Pitch.pdf](http://miracle.otago.ac.nz/tartini/papers/A_Smarter_Way_to_Find_Pitch.pdf)

FFT 的问题在于，如果您执行 256 个样本 FFT，您将仅获得 256 个输出。从本质上讲，这意味着它将您的频率空间（其中有无限数量的频率）划分为一组有限的频率。

This is because if you only check 256 samples (256 can be replace by N, the number of samples used for the FFT), any frequency which is related by a multiple of 256 will look the same.

In other words, if you check 256 evenly spaced samples, taken at time 0, 1/256, 2/256, 3/256, ... 255/256\. Then, the two signals sin(2 pi 80 x), which has frequency 80 cycles/sec, and sin(2 pi (80 + 9*256) x), which has frequency (80+9*256), will have the same samples.

Here, 9 can be replaced by k, the multiple to use. You could replace 9 with 1,2,3,4,5, etc. You can replace 256 (N) with any value as well.

As an example, sampling both at 200/256, one of the samples, we have: sin(2 pi (80 + 9*256) (200/256)) = sin(2 pi 80 (200/256) + 2 pi * 9 * 200)

Because multiples of 2 pi don't affect sin, this is the same as sin(2 pi 80 (200/256)).

More generically, sin(2 pi (M + k*N) j/N) = sin (2 pi M (j/N) + 2 pi k*j) = sin (2 pi M (j/N) ), where j is any integer 0,..., N - 1, N is the number of samples, (j/N) is the time to sample, M is the number of cycles per second, k is any integer ... -2, -1, 0, 1, 2 ...

From Nyquist sampling, if you want to distinguish, -128, -127, -126, -125, ..., 125, 126, 127 cycles per second you would take 256 samples/sec. 256 samples/sec means distinguishing 256 frequencies. However, 0 cycles/sec, 256 cycles/sec, 512 cycles/sec, 1024 cycles/sec would all look the same.

# httpresponse - 不要在 http 响应中执行标志？

> ID：11388058
> 
> 赞同：0
> 
> 时间：2012-07-09T01:10:25.750
> 
> 标签：httpresponse

我正在阅读有关能够上传和下载文件的网站的攻击。一些攻击是关于上传一个实际上是 html 文件的 jpg 文件，以及关于如果您希望用户被允许存储 html 并下载它们（或者可能在浏览器中查看它们而不使用另存为功能）的评论。

是否有某种类型的标志我可以用来说不执行？我希望用户查看其他人上传的图像或视频文件。如果我希望显示用户 html 但我不想强迫用户下载它们（内容处置附件）怎么办。

有没有办法我可以说嘿这里是一些用户数据。它可能是一个图像，所以我应该允许 img src 工作。它可能是一个 html，所以我希望用户看到它，但不允许它读/写 cookie/localstorage/调用 ajax 请求/等？

-edit- 想一想。我所有的用户数据都托管在其自己的静态文件无 cookie 子域中。这将摆脱我提到的许多问题，但还有什么需要处理的呢？此外，我相信我的 mime 响应完全取决于我的 Web 服务器的功能（nginx atm），这可以简单地查看文件扩展名。

-edit2- 我调整了我的 nginx 配置以添加`application/unknown`Content-Type。它似乎正是我想要的。我看到一个建议对未知文件使用八位字节流，但这会导致浏览器（至少是 firefox）尝试下载它，即使它可以在浏览器中查看它的 jpg。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:14:07.180

这完全取决于`Content-Type`您的 HTTP 响应。

浏览器处理由`Content-Type`in HTTP 响应返回的数据。

例如，假设用户在上传字段中上传了一个 HTML 文件，据说是为了上传照片，只要您的网络服务器提供`Content-Type`as `image/jpeg`（或`image/png`等），浏览器就应该将其作为图像处理 - 在这种情况下是无效图像，因为该图像包含奇怪的 HTML 内容，而不是通常的二进制文件。

无论如何，如果您感到不安全，您可以在上传验证期间随时查看文件数据。

# php - phpFlickr API photos_getRecent extras/owner_name 没有做任何事情

> ID：11388059
> 
> 赞同：0
> 
> 时间：2012-07-09T01:10:28.853
> 
> 标签：php, flickr

我正在尝试使用 photos_getRecent 函数，该函数在源文件中描述为：

```
function photos_getRecent ($jump_to = NULL, $extras = NULL, $per_page = NULL, $page = NULL) 
```

我正在尝试根据所有者过滤结果，该所有者（根据文档[http://www.flickr.com/services/api/flickr.photos.getRecent.htm](http://www.flickr.com/services/api/flickr.photos.getRecent.htm)）存储在 extras 变量中：

“为每条返回的记录获取额外信息的逗号分隔列表。当前支持的字段有：description、license、date_upload、date_taken、owner_name、icon_server、original_format、last_update、geo、tags、machine_tags、o_dims、views、media、path_alias , url_sq, url_t, url_s, url_q, url_m, url_n, url_z, url_c, url_l, url_o"

所以我尝试将 extras 变量设置为很多东西：

```
photos_getRecent(NULL,"owner_name=john citizen",20,NULL);
photos_getRecent(NULL,"owner_name=john_citizen",20,NULL);
photos_getRecent(NULL,"owner_name:john citizen",20,NULL);
photos_getRecent(NULL,"owner_name:john_citizen",20,NULL);
photos_getRecent(NULL,"owner_name,john citizen",20,NULL);
photos_getRecent(NULL,"owner_name,john_citizen",20,NULL);
photos_getRecent(NULL,"owner_name=10000000@N00",20,NULL);
photos_getRecent(NULL,"owner_name:10000000@N00",20,NULL);
photos_getRecent(NULL,"owner_name,10000000@N00",20,NULL); 
```

但他们似乎都没有成功。每次它只是得到一堆随机所有者的随机照片。

不幸的是，文档根本不具体，我在网上找不到任何使用这些东西的例子。

如何正确格式化变量 $extras 让它只为该所有者获取照片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:37:42.927

该`extras`参数在 Flickr 搜索中用于表示您希望API*返回的额外字段，而不是要搜索的字段。*

要获取特定所有者的照片，您需要使用`photos_search`phpFlickr 库中的函数并`user_id`为您的照片所有者传递参数。默认的排序顺序是`date-posted-desc`应该得到你想要的。例如：

```
photos_search (array('user_id' => '10000000@N00')); 
```

查看 Flickr 的[API 文档](http://www.flickr.com/services/api/flickr.photos.search.html)以获取更多详细信息。

# function - 对变量列求和

> ID：11388060
> 
> 赞同：2
> 
> 时间：2012-07-09T01:10:52.667
> 
> 标签：function, google-sheets, sum

我有一个包含两列的 Google 表格。第二列是“仅限数字”，我需要总结其中的所有单元格。

电子表格由几个人更新，并且经常更新（我的意思是他们在中间添加新单元格），我需要在底部有一个单元格来显示上面所有单元格的总和。

就像是

```
=SUM(B1, B[THIS_CELL_NUMBER]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T01:43:34.513

最简单的方法可能是将总和放在不同的列中，然后对整个 B 列求和，如

```
 =sum(B:B) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T12:11:47.533

也可以将总和的结果保存在同一列中。请在此处查看答案：[https ://webapps.stackexchange.com/a/23837](https://webapps.stackexchange.com/a/23837)

基本上，您必须使用“$”符号来修复单元格和/或列。

# php - Buddypress bp_core_new_nav_item() 函数无法在“我的个人资料”选项卡下创建新的导航项

> ID：11388068
> 
> 赞同：0
> 
> 时间：2012-07-09T01:12:24.957
> 
> 标签：php, wordpress, buddypress

因此，一旦用户登录，我就会尝试在 buddypress 的“我的个人资料”选项卡下添加一个新的导航。我在我的 wp-content/plugins 目录中创建并使用了 bp-custom.php 文件（在 buddypress 之外目录）以插入自定义代码。这是我在 bp-custom.php 文件中的代码（这就是我所拥有的！）

```
 <?php
  //place for custom buddypress functions
  bp_core_new_nav_item( 
  array( 
    'name' => 'feedback', 
    'slug' => 'Feedback'
  ));

  ?> 
```

我的浏览器出现以下错误。[—————————– 服务器错误 网站在检索http://myhostname.com](http://myhostname.com)时遇到错误可能因维护而宕机或配置错误 ————————— 我正在使用 frisco for buddypress主题，不确定这是否是我的问题的一部分。我能做些什么来解决这个错误？（移动bp-custom？滥用功能？主题不兼容？）如果你给我正确的答案，我会给你打分。提前致谢！-亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:04:43.293

请使用这个：

```
bp_core_new_nav_item( array(
    'name' => __( 'My Links', 'bp-my-links' ),
    'slug' => 'my-link',
    'position' => 80,
    'screen_function' => 'bp_my_link_screen_my_links',
    'default_subnav_slug' => 'my-link'
) ); 
```

请输入此代码并在我的个人资料选项卡下查看它将显示新的“我的链接”菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:43:02.177

在这里问和回答：http: [//buddypress.org/community/groups/how-to-and-troubleshooting/forum/topic/bp_core_new_nav_item-not-working-to-create-new-navigation-item-under-my-profile -标签/](http://buddypress.org/community/groups/how-to-and-troubleshooting/forum/topic/bp_core_new_nav_item-not-working-to-create-new-navigation-item-under-my-profile-tab/)

# php - 随机执行一个mysql_query。

> ID：11388071
> 
> 赞同：0
> 
> 时间：2012-07-09T01:12:57.703
> 
> 标签：php, mysql

我正在尝试执行随机查询... 随机 1-15 次攻击 下面是一个游戏的 php 查询。它在玩家按下攻击按钮时执行。为了简单起见，我简化了查询。

换句话说，我想做的是///

**每 10 次针对此特定 ship_id 的攻击随机运行查询以插入**

**到目前为止**，就随机生成器而言，我所拥有的东西是错误的，但希望能说明我的观点。

-------------------------随机命中将低于此行

```
 **function RandNumber($e){

  for($i=0;$i<$e;$i++){
  $rand =  $rand .  rand(0, 9);  
  }
  return $rand;

  }

  mysql_query("INSERT INTO {$game}_ships (ship_name,login_name,shipclass,class_name,class_name_abbr,fighters,max_fighters,max_shields,cargo_bays,mine_rate_metal,mine_rate_fuel,config,size,upgrades,move_turn_cost,point_value,location,login_id
    ) values(
    'FC1','$user[login_name]','427','fc','  Sc','5967','5967','10442','2003','5','45','bs:dt:ot','6','99','19','45',1,'$user[login_id]')");
  echo "<div class='success'>427 </div>";** 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:38:36.927

如果您想要每 10 次点击或每 9-15 次点击这样的准确数字，则需要跟踪点击次数。您可以通过运行每次点击插入查询来跟踪它

```
mysql_query("INSERT INTO YOURTABLE SET hits=hits+1 LIMIT 1"); 
```

然后你从数据库中获取相同的命中并检查它是否为 10

```
if ($hits%10==0){INSERT YOUR QUERY IN QUESTION} 
```

但是，如果您只想从 1-15 随机选择命中数，那么：

```
 $rand =  rand(1, 15);  //but I would go with 1,5  this will be totally random, I think tracking hits is better 

  if ($rand==1){
         mysql_query("INSERT INTO {$game}_ships (ship_name,login_name,shipclass,class_name,class_name_abbr,fighters,max_fighters,max_shields,cargo_bays,mine_rate_metal,mine_rate_fuel,config,size,upgrades,move_turn_cost,point_value,location,login_id
     ) values(
      'FC1','$user[login_name]','427','fc','  Sc','5967','5967','10442','2003','5','45','bs:dt:ot','6','99','19','45',1,'$user[login_id]')");
  echo "<div class='success'>427 </div>";
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:18:38.280

一些大型网站所做的事情是每加载 100 个左右的页面，它会将页面浏览量更新 100 个。

这是通过从 1-100（在您的情况下为 1-15）中获取一个随机数来完成的，如果它恰好是`1`（例如），那么它将向数据库中添加 100 个值。

因此，对于您的情况，在脚本中选择一个 1-15 的随机数。如果结果是`1`，则运行查询。

# jquery - Twitter Bootstrap：重新加载当前选项卡

> ID：11388074
> 
> 赞同：1
> 
> 时间：2012-07-09T01:13:12.823
> 
> 标签：jquery, twitter-bootstrap

你如何重新加载当前选择的 Twitter Bootstrap 选项卡？

这是我到目前为止所拥有的，但它只会使任何后续选项卡重新加载多次。

```
function reload_tab() {
   $('a[data-toggle="tab"]').on('shown', function (e) {
       $('#tab-loaded-content').load($(e.target).attr('href'));
   });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:27:10.320

试一试

```
$('#tab-loaded-content').load($('li.active a[data-toggle="tab"]').attr('href')); 
```

您所做的是每次调用 reload 函数时，它都会绑定到`shown`事件（不知道它是否存在）以重新加载该选项卡。调用它两次，标签将重新加载两次。不是你想要的！

上面的一个衬里只是告诉它从`href`作为活动选项卡的子链接的属性中加载内容`li.active`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T18:01:59.597

sachleen 的解决方案对我有效。首先，我必须用要更新的实际选项卡替换选项卡加载内容：

```
$('#project_contracttaken').load($('li.active a[data-toggle="tab"]').attr('href')); 
```

但是还是没有更新内容，我只好禁用jquery ajax缓存功能，例如：

```
$.ajaxSetup(
{
    cache: false
}); 
```

在这些更改之后，它对我来说很好用！

# java - 编译错误：变量可能尚未初始化

> ID：11388083
> 
> 赞同：1
> 
> 时间：2012-07-09T01:15:17.703
> 
> 标签：java, android, if-statement, scope

全部-我已经查看了很多与此类似的问题，但似乎无法解决我的问题。我的问题是，在 if 语句之外声明但在 if 语句内部初始化的变量没有被定义在同一范围内的变量识别。这是我的代码：

```
 String lastP1Boa; //Declared here

if (ownersBoa == message) {
    Spinner houseBoa = (Spinner) findViewById(R.id.houseBoa);
    String housesBoa = houseBoa.getSelectedItem().toString();
    Integer lastIntHouseBoa = Integer.parseInt(housesBoa.replaceAll("[\\D]", ""));

    Spinner hotelBoa = (Spinner) findViewById(R.id.hotelBoa);
    String hotelsBoa = hotelBoa.getSelectedItem().toString();
    Integer lastIntHotelBoa = Integer.parseInt(hotelsBoa.replaceAll("[\\D]", ""));

    int intLastP1Boa = lastIntHotelBoa * 1500 + lastIntHouseBoa * 100;
    lastP1Boa = String.valueOf(intLastP1Boa);  } //Initialized here

String p1Total = lastP1Boa; //Error saying that lastP1Boa needs it be initialized 
```

谢谢大家的时间，希望我已经说清楚了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:17:23.577

编译器报告的问题是有可能`if (ownersBoa == message)`会评估`false`并且`lastP1Boa`不会被初始化。将其设置为等于`null`（或更合适的默认值）您声明它的位置。

```
String lastP1Boa = null; //Declared here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:18:01.753

如果您将第一行更改为`String lastP1Boa = null;`，它应该会修复您的编译错误，但您应该确保处理该变量为`null`.

# arguments - 通过电子邮件发送链接以运行带有参数的 .exe 文件

> ID：11388085
> 
> 赞同：0
> 
> 时间：2012-07-09T01:16:05.173
> 
> 标签：arguments, dos, exe

有谁知道我如何通过电子邮件发送带有参数的可执行文件（.exe）的链接。因此，当收件人单击链接时，会打开带有特定记录的 .exe 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:26:49.877

1.  通过右键单击 exe -> 创建快捷方式创建一个 Windows 快捷方式文件 (.lnk)
2.  右键单击快捷方式 -> 属性 -> 通过添加参数来编辑目标
3.  通过电子邮件将您的“病毒”发送给可怜的收件人:-)

请注意，电子邮件服务器可能会将附件标记为可疑。您可能应该压缩它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:28:40.990

你可以只做一个批处理文件：

```
@echo off
echo I turned echo off because it looks ugly, but try deleting that line.
echo.
echo Let's look at your files...
dir
echo Now let's open notepad and look at our own source code!
notepad example.bat 
```

# objective-c - 2 关于自定义 UITableView 的问题

> ID：11388089
> 
> 赞同：0
> 
> 时间：2012-07-09T01:17:00.563
> 
> 标签：objective-c, uitableview, core-animation

我有 2 个问题无法回答。

我有一个 UITableView，当你触摸一个单元格时，它会改变它的高度并插入一个包含一些细节的子视图。

问题是当我选择另一个单元格时，没有明显的方法可以折叠另一个单元格。我作为临时修复所做的就是在您选择一个单元格时运行一个循环，并且在每个单元格上，如果它不是您选择的那个，它会折叠它。这似乎效率不高，有人有想法吗？

第二个问题是，每当我折叠一个单元格时，它就会动画。但它删除了细节子视图有点刺耳，有没有办法等到单元格完成动画才能删除它？我找不到合适的委托方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:29:17.400

也许最好的方法是有一个变量来存储先前接触的单元格的索引路径（行）。然后，测试当前单元格的索引是否不等于前一个单元格，折叠前一个单元格并打开新的单元格。

对于您的第二个问题，您能否在删除子视图之前不为折叠设置动画？我假设您正在使用`[UIView beginAnimations]`（或类似的东西）。设置动画的持续时间`[UIView setAnimationDuration:1.0]`，然后在提交动画后，执行`[self performSelector:@selector(collapseCell) withObject:nil afterDelay:1.0]`.

我没有对此进行测试，而且我的记忆力要消失了，如果它没有像您希望的那样工作，很抱歉，但也许它可以让您朝着正确的方向前进。

编辑：抱歉，我没有看到你的“核心动画”标签。第二种解决方案可能不适合您。

# ruby - Ruby rest-client 文件上传为具有基本身份验证的多部分表单数据

> ID：11388090
> 
> 赞同：12
> 
> 时间：2012-07-09T01:17:10.600
> 
> 标签：ruby, http, post, basic-authentication, rest-client

[我了解如何使用 Ruby 的rest-client](https://github.com/archiloque/rest-client)的基本身份验证来发出 http 请求

```
response = RestClient::Request.new(:method => :get, :url => @base_url + path, :user => @sid, :password => @token).execute 
```

以及如何将文件作为多部分表单数据发布

```
RestClient.post '/data', :myfile => File.new("/path/to/image.jpg", 'rb') 
```

但我似乎无法弄清楚如何将两者结合起来，以便将文件发布到需要基本身份验证的服务器。有谁知道创建此请求的最佳方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-09T11:20:02.433

使用`RestClient::Payload`with `RestClient::Request`... 例如：

```
request = RestClient::Request.new(
          :method => :post,
          :url => '/data',
          :user => @sid,
          :password => @token,
          :payload => {
            :multipart => true,
            :file => File.new("/path/to/image.jpg", 'rb')
          })      
response = request.execute 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-23T02:30:59.580

RestClient API 似乎发生了变化。这是使用基本身份验证上传文件的最新方法：

```
response = RestClient::Request.execute(
  method: :post,
  url: url,
  user: 'username',
  password: 'password',
  timeout: 600, # Optional
  payload: {
    multipart: true,
    file: File.new('/path/to/file, 'rb')
  }
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-16T07:20:06.463

最新最好的方法可能是：链接是[在此处输入链接描述](https://github.com/rest-client/rest-client)

```
 RestClient.post( url,
  {
    :transfer => {
      :path => '/foo/bar',
      :owner => 'that_guy',
      :group => 'those_guys'
    },
     :upload => {
      :file => File.new(path, 'rb')
    }
  }) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-20T18:20:21.310

这是一个包含文件和一些 json 数据的示例：

```
require 'rest-client'

payload = {
  :multipart => true,
  :file => File.new('/path/to/file', 'rb'),
  :data => {foo: {bar: true}}.to_json
      }

r = RestClient.post(url, payload, :authorization => token) 
```

# c - Xcode的C“预期表达式”错误

> ID：11388095
> 
> 赞同：8
> 
> 时间：2012-07-09T01:17:42.363
> 
> 标签：c, xcode, compiler-errors

我正在尝试从“Head First C”（第 50 页）一书中编译此代码示例，Xcode 给我错误“Parse Issue”“Expected Expression”并突出显示“int longitude = -64;”行 红色的。

```
#include <stdio.h>

void go_south_east(int * lat, int * lon)
{    
    *lat = *lat - 1;
    *lon = *lon + 1;
}

int main()
{
   int latitude = 32;
   int longitude = -64;
   ￼￼go_south_east(&latitude￼,&longitude);
   printf("Avast! Now at: [%i, %i]\n", latitude, longitude);
   return 0;
} 
```

我不知道为什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-09T01:26:02.830

有时，当从 PDF 复制代码时，也会复制**不可见**的不需要的字符。

要解决此问题，您可以通过更改顶部栏菜单中的编辑器属性来告诉 Xcode 向您显示所有不可见字符。

```
(top bar menu) → Editor → Show Invisibles 
```

您将不得不删除任何看起来很奇怪的东西，例如由实际空格（“”）或小三角形（“^”）表示的空格。**请记住，在这种模式下，空格用这个符号“⌴”表示。**

例如：

![示例隐形坏字符](../Images/cc764b397bebbdb585beec2e1e2f416e.png)

这会导致“预期表达式”错误。

# java - ANTLR - 左递归删除辅助

> ID：11388099
> 
> 赞同：4
> 
> 时间：2012-07-09T01:18:59.323
> 
> 标签：java, recursion, antlr, grammar

我有这个具有左递归的语法，但我不明白如何使它成为非左递归的。这是我第一次使用解析器/语法等，所以请保持任何解释简单。

```
msg: IDENTIFIER
   | IDENTIFIER LBRACKET msg RBRACKET
   | msg COMMA message
   | LBRACE msg RBRACE LBRACE atom RBRACE
   | msg XOR msg
   | msg PERCENT IDENTIFIER
   | IDENTIFIER PERCENT msg
   | LBRACKET msg RBRACKET
   ;

atom: IDENTIFIER
    | fn_app
    ;

fn_app: IDENTIFIER LBRACKET IDENTIFIER (COMMA IDENTIFIER)* RBRACKET; 
```

我自己尝试过，但 ANTLR 仍然说有递归，我不明白为什么。

ANTLR 说：

```
[fatal] rule msg_contents has non-LL(*) decision due to recursive rule invocations reachable from alts 1,3\.  Resolve by left-factoring or using syntactic predicates or using backtrack=true option. 
```

我的尝试：

```
msg_contents: msg_part
            | msg_part XOR msg_part
            | msg_part PERCENT msg_part
            ;

msg_part : IDENTIFIER
         | IDENTIFIER LBRACKET msg_part RBRACKET
         | LBRACE msg_part RBRACE LBRACE atom RBRACE
         | IDENTIFIER PERCENT msg_part
         | LBRACKET msg_part RBRACKET
         ; 
```

请帮忙。谢谢！

Ps 如果可能，请提供有关如何从此类语法中删除递归的说明或步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:51:00.393

简而言之，当删除立即左递归时（当您面对它时），您将递归引用分解并替换

```
 A ::= A x
       | y 
```

经过

```
 A ::= y x* 
```

在您的情况下，这意味着要考虑到

```
msg: msg ( COMMA message
         | XOR msg
         | PERCENT IDENTIFIER
         )
   | ( IDENTIFIER
     | IDENTIFIER LBRACKET msg RBRACKET
     | LBRACE msg RBRACE LBRACE atom RBRACE
     | IDENTIFIER PERCENT msg
     | LBRACKET msg RBRACKET
     )
   ; 
```

并替换为

```
msg: ( IDENTIFIER
     | IDENTIFIER LBRACKET msg RBRACKET
     | LBRACE msg RBRACE LBRACE atom RBRACE
     | IDENTIFIER PERCENT msg
     | LBRACKET msg RBRACKET
     )
     ( COMMA message
     | XOR msg
     | PERCENT IDENTIFIER
     )*
     ; 
```

左递归的[维基百科条目](http://en.wikipedia.org/wiki/Left_recursion#Removing_immediate_left_recursion)很好地解释了它。

您收到的 ANTLR 消息与左递归无关。它说 ANTLR 无法在

```
msg_contents: msg_part
            | msg_part XOR msg_part
            | msg_part PERCENT msg_part
            ; 
```

因为所有都以 开头`msg_part`，这是递归的，因此不是常规的，正如 LL(*) 前瞻所要求的那样。然而，这可以通过左分解来解决。另请注意，您的尝试省略了该`COMMA`变体。

# ruby-on-rails - 使用 OmniAuth 在 Factory Girl 中创建用户？

> ID：11388100
> 
> 赞同：5
> 
> 时间：2012-07-09T01:19:07.543
> 
> 标签：ruby-on-rails, rspec, integration-testing, omniauth, factory-bot

我目前正在创建一个使用 OmniAuth 来创建和验证用户的应用程序。由于 Factory Girl 在没有 OmniAuth 的情况下无法生成用户，我在测试期间遇到了问题。

我有几种不同的方法可以让工厂女孩使用omniauth 创建用户，但都没有成功。

我已将以下 2 行添加到我的 spec_helper 文件中

```
OmniAuth.config.test_mode = true \\ allows me to fake signins
OmniAuth.config.add_mock(:twitter, { :uid => '12345', :info => { :nickname => 'Joe Blow' }}) 
```

当前工厂.rb

```
FactoryGirl.define do
  factory :user do
    provider "twitter"
    sequence(:uid) { |n| "#{n}" }
    sequence(:name) { |n| "Person_#{n}" }
  end
end 
```

以下测试当前失败，因为没有生成用户

```
let(:user) { FactoryGirl.create(:user) }
before { sign_in user }

describe "registering" do

  it "should increment" do
    expect do
      click_button 'register'
    end.to change(user.rounds, :count).by(1)
end 
```

我应该如何更改我的工厂/测试以让 Factory Girl 使用 OmniAuth 创建测试用户？

编辑：我使用[RailsCast 指南设置 Omniauth](http://railscasts.com/episodes/241-simple-omniauth)，

```
#create function inside user.rb
def self.create_with_omniauth(auth)
  create! do |user|
    user.provider = auth["provider"]
    user.uid = auth["uid"]
    user.name = auth["info"]["name"]
  end
end 
```

希望也有用

```
#create inside the session_controller
def create
  auth = request.env["omniauth.auth"]
  user = User.find_by_provider_and_uid(auth["provider"], auth["uid"]) ||    User.create_with_omniauth(auth)
  session[:user_id] = user.id
  redirect_to root_url, :notice => "Signed in!"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:33:59.967

您是否记得在测试设置中的某处执行以下操作？

request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:twitter]

如果你这样做了，用户的 UID 是否可能与模拟 uid 不匹配？

您可以尝试将工厂定义从 更改`sequence(:uid) { |n| "#{n}" }`为`uid '12345'`。

# emacs - 图阿雷格模式和caml模式

> ID：11388104
> 
> 赞同：7
> 
> 时间：2012-07-09T01:19:24.327
> 
> 标签：emacs, annotations, ocaml, tuareg

我目前正在使用 tuareg-mode，但我也希望能够使用 caml-mode 的功能。特别是我希望能够以交互方式使用类型注释，显然这发生在 caml 类型中。我尝试将[http://cristal.inria.fr/~remy/poly/emacs/index.html](http://cristal.inria.fr/~remy/poly/emacs/index.html)放在我的 .emacs.d 中，但我对这两种模式如何或是否可以一起工作感到困惑。事实上，我根本无法让 caml-mode 工作。

我的 init.el 中有这一行：

```
(add-to-list 'load-path "~/.emacs.d/modes/caml") 
```

但是文件没有加载——至少没有函数定义或键绑定。我真的以为我开始掌握这些 emacs 插件是如何工作的，但我开始怀疑。也许有人可以解释还需要发生什么？

编辑：我没有意识到我必须`require 'caml`为此工作。[尽管如此，尽管我有来自http://caml.inria.fr/svn/ocaml/branches/gadts/emacs/](http://caml.inria.fr/svn/ocaml/branches/gadts/emacs/)的 caml 类型，但注释似乎不起作用。我编译了，`-annot`但我仍然被告知没有注释文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T07:19:23.367

您可以使用 tuareg 模式进行类型注释。如果我有这个确切的 ~/.emacs 文件：

```
(add-hook 'tuareg-mode-hook '(lambda ()
  (define-key tuareg-mode-map [f10] 'caml-types-show-type); requires caml-types
  ))
(add-to-list 'auto-mode-alist '("\\.ml\\w?" . tuareg-mode))
(autoload 'caml-types-show-type "caml-types" "Show the type of expression or pattern at point." t) 
```

然后按`F10`显示该点下的表达式类型。如您所知，您需要`foo.ml`使用

```
ocamlc -annot foo.ml 
```

`foo.annot`这样在同一目录中就有一个文件`foo.ml`。

# ruby-on-rails - 资源丰富的路线中的动态段

> ID：11388106
> 
> 赞同：1
> 
> 时间：2012-07-09T01:19:40.143
> 
> 标签：ruby-on-rails, url-routing, link-to

我想通过向他们发送链接以在电子邮件正文中单击来确认用户电子邮件。我希望它像 `GET /users/23/confirm/1234` . 这将使用验证密钥 1234 确认用户 #23。

我试过 ：

```
 resources :users do
    member do
       match '/confirm/:token' => 'users#confirm'
    end
end 
```

但是我无法在我的电子邮件正文中适当地设置 link_to 方法。有什么建议么 ？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:45:32.027

您可以跳到控制台并输入

```
$ rake routes 
```

这将告诉您所有可能路线的命名路线。由于您尚未命名，因此该特定路线不会在其中。你需要`:as`参数

```
match '/confirm/:token' => 'users#confirm', :as => :confirm 
```

那么路线可能是（您可以使用 rake 路线确认）：

```
users_confirm_path(user_id, token) 
```

# c# - 有没有更好的方法将分层数据从 SQL 填充到类结构、C# 或 VB.NET 中？

> ID：11388108
> 
> 赞同：2
> 
> 时间：2012-07-09T01:19:51.657
> 
> 标签：c#, asp.net, sql-server-2008

我正在尝试在 .NET 2.0（是的，2.0）应用程序中填充分层数据，并且现在无法升级（因此没有 LINQ、LINQ Bridge 或其他东西）。

我想知道是否有更好的方法将分层数据填充到此类结构中？我很确定有一个更好的方法可以实现这一点。

很高兴看到这样做的好方法。如果有人有时间展示 .NET 2.0 的方式，并且如果有不同的方式，他们会在 .NET 4.0+ 中做到这一点，那就太好了。

以下是节点类型结构的示例：

```
using System.Collections.Generic;

public class ExampleNode
{

private int _id;

private Nullable<int> _parentId;

private int _depth;

private List<ExampleNode> _children = new List<ExampleNode>();

public ExampleNode()
{
}

public virtual int ApplicationNumber {
    get { return _id; }
    set { _id = value; }
}

public virtual Nullable<int> ParentId {
    get { return _parentId; }
    set { _parentId = value; }
}

public virtual int Depth {
    get { return _depth; }
    set { _depth = value; }
}

public virtual List<ExampleNode> Children {
    get { return _children; }
    set { _children = value; }
}
} 
```

这是一个用于填充节点结构的示例函数。看起来这不是最好的方法，它有可能不填充孙子类型的数据。深度从存储过程中作为层次结构中的级别返回（级别为 0 的项目是顶层，如果节点是顶层节点的子节点，则它位于级别 1，顶层节点的孙子节点是级别2等）

```
public List<ExampleNode> GetNodes()
{
// This may not be optimal.

List<ExampleNode> nodeList = new List<ExampleNode>();
Dictionary<int, ExampleNode> nodeDictionary = new Dictionary<int, ExampleNode>();

using (SqlDataReader reader = SqlHelper.ExecuteReader(ConfigurationManager.ConnectionStrings("SqlServer").ConnectionString, CommandType.StoredProcedure, "proc_GetNodeStructure", new SqlParameter("@UserId", userId), new SqlParameter("@NodeTypeId", nodeType))) {
    while (reader.Read) {
        ExampleNode nodeInstance = new ExampleNode();

        nodeInstance.Id = Convert.ToInt32(reader("Id"));
        nodeInstance.Depth = Convert.ToInt32(reader("Depth"));

        if (!Information.IsDBNull(reader("ParentId"))) {
            nodeInstance.ParentId = Convert.ToInt64(reader("ParentId"));
        }

        // Add to list
        nodeList.Add(nodeInstance);

        // Add to dictionary
        nodeDictionary.Add(nodeInstance.Id, nodeInstance);

    }
}

foreach (ExampleNode item in nodeList) {
    if (item.ParentId.HasValue) {
        nodeDictionary(item.ParentId).Children.Add(item);
    }

}

for (int i = nodeList.Count - 1; i >= 0; i += -1) {
    if (nodeList(i).Depth > 0) {
        nodeList.RemoveAt(i);
    }
}

return nodeList;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:17:24.027

如果我理解正确，你

1.  将节点收集到列表和字典中
2.  遍历列表并通过字典排列父/子关系
3.  从列表中删除具有正深度的节点

...留下包含分层结构中最顶层节点的列表。你的算法对我来说似乎是正确的。

前两个操作相对于节点数量在时间和空间上都是 O(n) 复杂度，非常好！

您正在做的唯一真正低效的事情是在步骤 3 中从列表中删除元素。因为底层存储是一个向量，所以从列表的前面删除一个元素是昂贵的，因为所有剩余的元素都需要向下复制。您正试图通过向后迭代列表来最小化此类复制的数量。假设列表的后半部分是父节点，前半部分是子节点。每当您删除子节点时，每次删除子节点时，您仍然必须复制原始列表大小的一半。这接近 O(n^2) 行为。

因此，对于第 3 步，如果您希望及时提高性能，您至少有两个选择：

1.  创建第二个列表，其中仅包含深度 == 0 的第一个元素。
2.  改为使用链表，以便删除是 O(1) 而不是 O(n) 性能。

这是第一个选项的代码：

```
...

List<ExampleNode> roots = new List<ExampleNode>();
for (int i = 0; i < nodeList.Count; i ++) { 
    if (nodeList[i].Depth == 0) { 
        roots.Add(nodeList[i]);
    }
} 
return roots; 
```

通过计算步骤 1 或 2 期间有多少根节点，然后初始化第二个列表，使其容量等于根节点的数量，您可能会节省更多时间。这将防止在向列表中添加元素时不必要的分配和复制基础列表向量。

```
List<ExampleNode> roots = new List<ExampleNode>(rootCount); 
```

这同样适用于第一个`nodeList`；您可以延迟它的构建，直到您知道查询返回的记录数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:24:20.840

使用[NHibernate](http://nhforge.org/Default.aspx)怎么样？它适用于 .net 2 plus，因此您也可以继续使用它。

# animation - Cocos2d CCAction 已经在运行应用程序终止

> ID：11388113
> 
> 赞同：0
> 
> 时间：2012-07-09T01:20:30.160
> 
> 标签：animation, cocos2d-iphone, ccaction

我正在尝试为我的玩家设置行走方向的动画（例如在鸟瞰 RPG 中），所以我拥有它`if (joystick.velocity. y > 0){ [player runAction: walkUpAction] }`，这当然会导致`Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'runAction: Action already running`我得到它的问题。我没有得到解决此问题的方法。我尝试添加一些变量（isRunning，如果正在运行则不要调用类型的东西），但似乎没有任何效果。我在 cocos2d 论坛上问过这个问题，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:29:24.287

在 cocos2d 中你必须在运行前重新创建动作，即你不能多次运行同一个动作。因此，如果您不想只停止此操作而不是其他操作，则无需将您的操作保存在变量中。这是关于你的错误。如果你说得更详细一点，你想用你的 做什么`walkUpAction`，我可以试着给你一些关于如何做你想做的事情的建议。

实际上，我不知道这个操纵杆是如何工作的，但如果它不存储之前的状态，您可以手动存储它并在之前的速度为 0 且当前速度大于 0 的情况下运行您的操作。而且，无论如何你必须在再次运行之前重新创建操作。所以，你会有这样的东西

```
- (void) update:(ccTime)dt
{
    BOOL needRunWalkUpAnimation = (prevVelocity == 0) && (curVelocity > 0);
    if( needRunWalkUpAnimation )
    {
        id walkUpAction = \\create your action here
        [player runAction: walkUpAction];
    }

    prevVelocity = curVelocity;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:27:28.640

尝试这个：

首先在 .h 中声明一些 iVar

```
BOOL _isWalkingUp;
BOOL _isWalkingDown;
BOOL _isWalkingLeft;
BOOL _isWalkingRight; 
```

然后，在您检测到方向变化的每一段代码中：

```
if(!_isWalkingUp && ( joystick.velocity.y >0 ) ) {
    [player stopAllActions];
    [player runAction:walkUpAction];
    _isWalkingUp=YES;
    _isWalkingDown=NO;
    _isWalkingLeft=NO;
    _isWalkingRight=NO;
} 
```

等等....您可能会想要添加一些“状态”以避免运动控制不平稳。但这将是一个开始。

# imagemagick - 尽管有透明的虚拟像素，但带有 ImageMagick “-distort Perspective”的灰色区域

> ID：11388114
> 
> 赞同：1
> 
> 时间：2012-07-09T01:20:31.460
> 
> 标签：imagemagick

我拍了这张照片：

![在此处输入图像描述](../Images/6552e62ea475b43ba6fc98905446dd74.png)

并做到了：

```
convert -extent 800x600 -background transparent -matte -virtual-pixel transparent -distort Perspective '0,0,369,225 0,255,357,195 255,0,400,218 255,255,400,187' image1.png image2.png 
```

结果（故意使用显示的方格模式来显示透明度）：

![在此处输入图像描述](../Images/ca9f6a923d0462c3eb8e938d769001a9.png)

如何使讨厌的灰色区域变得透明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:39:09.373

添加“-mattecolor 透明”：

```
convert -extent 800x600 -mattecolor transparent -background transparent -matte -virtual-pixel transparent -distort Perspective '0,0,369,225 0,255,357,195 255,0,400,218 255,255,400,187' test.png test2.png 
```

您的示例图像与您的示例参数，使用 mattecolor：

![具有正确透明度的示例图像](../Images/c206cf59decc5fea817b9aa15d8f3ba2.png)

使用透视图时 mattecolor 选项的文档说明（[http://www.imagemagick.org/script/command-line-options.php](http://www.imagemagick.org/script/command-line-options.php)）：

> 地平线是抗锯齿的，并且可以使用 -mattecolor 设置设置“天空”颜色。

# php - PHP在循环内排序

> ID：11388116
> 
> 赞同：0
> 
> 时间：2012-07-09T01:21:07.623
> 
> 标签：php, sorting, loops

我想在循环时对东西进行排序

```
$arr = array('c','a''b');
 foreach($arr as $alpha){
  sort($alpha);
  echo $alpha."-";
 } 
```

它应该以 abc 结尾
如何完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T01:24:36.483

```
$arr = array('c','a', 'b');
sort($arr);
foreach($arr as $alpha) {
    echo $alpha . "-";
} 
```

排序只需要调用一次。

# google-chrome - 从浏览器发送 POST 或 GET 请求后，请求数据是否存储在浏览器或本地计算机的某个位置？

> ID：11388117
> 
> 赞同：0
> 
> 时间：2012-07-09T01:21:08.810
> 
> 标签：google-chrome, post, get, header-files

我最近使用 chrome 使用 windows 7 发送了一些表单数据作为 POST 请求。服务器返回了一个响应页面。不想重复填写表格的冗长过程，我想知道我的浏览器或计算机是否记录了在我的 POST/GET 请求（头文件）中发送的所有请求数据。如果是这样，我在哪里可以找到它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:34:34.350

默认情况下，您的公司无论如何都不会保存数据。它在 RAM 上！我想你可能想要启用 cookie。

# javascript - 如何使用 jquery 根据日期条件更改 css？

> ID：11388123
> 
> 赞同：2
> 
> 时间：2012-07-09T01:22:31.407
> 
> 标签：javascript, jquery

在我的网页中，我有一个日期表（我的日期格式是 dd-mm-yyyy）

```
<tr>
    <td>05-03-2012</td>
    <td name="expiration">09-07-2012</td>
    <td>08-10-2012</td>
 <tr> 
```

我想要的是使用 Jquery 在其值为 > 当前日期时输入红色到期日期。

所以，我想我会使用类似的东西：

```
<script>
//don't know how to retrieve the expiration date and check if it is after the
//current date 

$('td[name=expiration]').css({"color":"red"});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:35:39.497

更喜欢使用类而不是名称，以便您的选择器更有效：

```
<tr>
    <td>05-03-2012</td>
    <td class="expiration-date">09-07-2012</td>
    <td>08-10-2012</td>
</tr>

var now = new Date;
$('.expiration-date').text(function (i, v) {
    if (now < new Date(v)) {
        $(this).addClass('unexpired');
    }
}); 
```

这是 jsFiddle 中的一个示例：http: [//jsfiddle.net/qRdNe/](http://jsfiddle.net/qRdNe/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T01:28:47.900

这不考虑日期时间解析中的任何错误。

```
$('td[name=expiration]').each(function(){

    var innerText = $(this).text();
    var date = new Date(innerText);
    var today = new Date();    

    if(date > today){
       //Set css here
    }
    else{
       //Set default here
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T02:27:30.747

我基本上已经从此处给出的不同位中汇总了一个工作答案，但在需要时进行了更正，一个月的日期从零开始。也许您不想接受这是正确的答案，我只是将所有内容都放在这里以便于参考。

```
$('.expiration').text(function(i,v){
    var datestr = v.split("-");
    d = new Date(datestr[2],datestr[0]-1,datestr[1],0,0,0,0);
    var now = new Date();        
    if(console)console.log(d);        
    if(d>now )
             {
                $(this).css("color","red");            
             }                

}); 
```

[http://jsfiddle.net/6zb5W/3/](http://jsfiddle.net/6zb5W/3/)

# c# - rtf 转换为文本

> ID：11388124
> 
> 赞同：0
> 
> 时间：2012-07-09T01:22:50.323
> 
> 标签：c#, ios, rtf

我创建了 C# 窗口程序。我想在 ipad app 中显示 Window Program 制作的 RTF 内容。

另外，我也想在窗口程序的RTF文本框中显示ipad制作的内容。

这可能吗？请给我建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:28:59.913

您可以使用 a`UIWebview`来显示 `RTF 文件

```
NSURL *url = <URL FOR YOUR SAVED RTF DOCUMENT IN THE TMP/CACHES FOLDER>;
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webview loadRequest:request]; 
```

`webview`iVar在哪里`UIWebView`

# python - 了解 emacs / Aquamacs 加载哪种 python 模式以及为什么

> ID：11388125
> 
> 赞同：0
> 
> 时间：2012-07-09T01:22:58.820
> 
> 标签：python, emacs, python-mode

我有 emacs 24.1.1，它在 emacs/24.1/lisp/progmodes 中以字节编译形式随 GNU 的 python.el 一起提供。

我下载了 Fabian Gallina 的 python.el（注意同名）并将其放在 emacs/site-lisp，它是 emacs 加载路径的一部分。

当我编辑 Python 文件时，加载的是 Gallina 的模式，而不是 GNU 的。但是，尽管 Gallina 的文档建议，我没有将 (require 'python) 放入我的 .emacs 文件中。

为什么是这样？为什么 Gallina 的 python.el 优先于 GNU 的？为什么它在没有（需要'python）的情况下被加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:02:11.303

当您启动 Emacs 时，您在 Emacs 中使用的大多数库都不会被加载。它们是自动加载的，请参阅[手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Autoload.html)。

如果您查看您的`load-path`变量，您会发现 site-lisp 出现在 Emacs 自己的库之前。因此，当 Emacs 加载“python.el”时，它会首先找到您的版本。

请注意，当您`C-h f python-mode`在运行命令之前执行此操作时，您实际上会看到 Emacs 版本命令的描述。这是作者选择相同文件名的不幸副作用。

运行`python-mode`一次后，帮助文本将更改以显示您的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:26:02.017

要从新位置加载已经加载的库，请在 Emacs 初始化文件中写入类似

（卸载功能...

（从新地方加载...

# mediaelement.js - 在 mediaElementjs 中，使用 youtube 插件时 setSrc 方法不起作用

> ID：11388128
> 
> 赞同：1
> 
> 时间：2012-07-09T01:23:35.420
> 
> 标签：mediaelement.js

在 mediaElementjs 中，setSrc 方法在使用 youtube 插件时不起作用？这是我的代码

media.setSrc("http://www.youtube.com/watch?v=xxxxxxxx");

现在在 setSrc 的定义中，库确实

this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(url));

但是使用 youtube 插件和 html5 播放器时 this.pluginApi.setSrc 不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:48:44.847

查看`mediaelements`Flash 视频播放器 ( [FlashMediaElement.as](https://github.com/johndyer/mediaelement/blob/master/src/flash/FlashMediaElement.as) ) 的源代码，您可以看到它当前不支持`_mediaElement`在构造函数创建`_mediaElement`为`VideoElement`or之后切换返回的内容`YouTubeElement`。这意味着如果您使用 youtube 源启动播放器：

```
<video width="640" height="360" id="player1" preload="none">
    <source type="video/youtube" src="http://www.youtu.be/nOEw9iiopwI" />
</video> 
```

然后，您`setSrc()`与后续 YouTube 剪辑的通话将正常工作......但是，您仍然无法切换回非 YouTube 视频。

目前，在 youtube 和非 youtube 之间来回切换的唯一方法是自行检测切换并销毁您添加的元素`mediaelements`，创建一个新元素，然后在新元素上调用 setSrc。不漂亮，但它会完成工作。

# c++ - 从 Windows 模块中的资源中提取文件

> ID：11388134
> 
> 赞同：0
> 
> 时间：2012-07-09T01:25:16.207
> 
> 标签：c++, windows, winapi, extract, embedded-resource

下面的代码执行，但它只提取一个空的位图文件。关于它有什么问题的任何想法？

```
void Extract(WORD wResId , LPSTR lpszOutputPath)
{ //example: Extract(IDB_BITMAP1, "Redrose.bmp");
    HRSRC hrsrc = FindResource(NULL, MAKEINTRESOURCE(wResId) , RT_BITMAP);
    HGLOBAL hLoaded = LoadResource( NULL,hrsrc);
    LPVOID lpLock =  LockResource( hLoaded);
    DWORD dwSize = SizeofResource(NULL, hrsrc);
    HANDLE hFile = CreateFile  (lpszOutputPath,GENERIC_WRITE,0,NULL,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,NULL);
    DWORD dwByteWritten;
    WriteFile(hFile, lpLock , dwSize , &dwByteWritten , NULL);
    CloseHandle(hFile);
    FreeResource(hLoaded);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T16:17:53.007

您要求，`RT_RCDATA`但我敢打赌您没有通过`RCDATA`声明添加位图。您可能通过`BITMAP`声明添加了它，这使它成为`RT_BITMAP`.

以后请说明是哪一步失败了，而不是让人猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:35:04.987

问题在于将 NULL 作为 HINSTANCE 参数传递给`FindResource`、`LoadResource`和`SizeOfResource`。

如果您在启动期间尚未保存 HINSTANCE（来自 WinMain 或 DllMain），您可以使用以下方法获取它：

MFC：

```
HINSTANCE hInstance = AfxGetInstanceHandle(); 
```

别的：

```
HINSTANCE hInstance = (HINSTANCE)GetModuleHandle(NULL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:17:45.727

将您的原始文件作为自定义数据插入。给这个自定义数据一个文本名称，例如“MyType”，然后：

```
HRSRC hrsrc = FindResource(NULL, MAKEINTRESOURCE(wResId) , _T("MyType")); 
```

# python - 线程，多处理错误

> ID：11388135
> 
> 赞同：0
> 
> 时间：2012-07-09T01:25:35.240
> 
> 标签：python, multithreading

它与 Windows 上的 finder 相同，但使用线程更快，

```
 import os,threading,multiprocessing

    def finder(path,q):
     for x in os.walk(unicode(path)):
      if x[1]:
       for dirname in x[1]:
        if target in dirname.lower():
         q.put(os.path.join(x[0],dirname))
      if x[2]:
       for name in x[2]:
        if target in name.lower():
         q.put(os.path.join(x[0],name))

     q.put(1)

    def printer(q):
     cmd=0
     while 1:
      tmp=q.get()
      if tmp==1:
       cmd += 1
       continue
      if cmd ==thnum:
       break
      print tmp

    if __name__ =="__main__":
     q=multiprocessing.JoinableQueue()
     ini=os.walk(u"C:\\").next()
     thnum=len(ini[1])
     target=raw_input("what you wanna get\n")

     p=multiprocessing.Process(target=printer,args=(q,))
     p.daemon=1
     p.start()

     for i in xrange(thnum):
      t=threading.Thread(target=finder,args=(ini[1][i],q,))
      t.start()
      print i," started"
     q.join() 
```

表明

0 开始 1 开始 .... 22 开始

但从不显示结果所以我的问题是

1.  为什么结果不显示
2.  我知道代码很脏:(...这是一种干净的方法吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:53:45.283

您在这里只有大量杂乱的代码，还有一些错误。我看到的主要问题是您的线程立即无法从它们产生任何东西`os.walk`，并且直接以`q.put`. 这是因为您没有将完整路径传递给每个线程。只有一个目录名。但很难知道这一点，因为您没有对任何变量使用描述性名称。

这是一个清理后的版本：

```
import os
import threading
import multiprocessing

def finder(path, q, done):
    for root, dirs, files in os.walk(unicode(path)):
        for dirname in dirs:
            if target in dirname.lower():
                q.put(os.path.join(root,dirname))
        for name in files:
            if target in name.lower():
                q.put(os.path.join(root,name))

    # print "Leaving thread", threading.current_thread()
    done.put(1)

def printer(q,done,worker_count):
    total = 0
    while 1:
        try: done.get_nowait()
        except: pass
        else: total += 1

        if total == worker_count:
            break

        try: tmp=q.get(timeout=1)
        except: pass

        print tmp

if __name__ =="__main__":

    results = multiprocessing.Queue()
    done = multiprocessing.Queue()
    root, dirs, files = os.walk(u"C:\\").next()
    thnum=len(dirs)
    target=raw_input("what you wanna get\n")

    p=multiprocessing.Process(target=printer,args=(results,done,thnum))
    p.start()

    for i in xrange(thnum):
        full_path = os.path.join(root, dirs[i])
        t=threading.Thread(target=finder,args=(full_path, results, done))
        t.start()

    p.join() 
```

在将它们发送到每个线程之前，看看我如何在主块中将完整路径连接在一起？我删除了，`JoinableQueue`因为它永远不会像你想象的那样做。如果打印机在任何时候清除了结果队列，但线程仍在尝试查找更多，则队列将认为其完成并退出。我用另一个队列代替它作为信号。每个工人在完成后将一个项目放入队列中。然后打印机继续检查它是否可以从完成队列中提取足够的信号以等于启动的工人数量。如果是这样，它将退出。

整个事情仍然可以更好地重写，但我只是在你所拥有的东西上使用创可贴。我只是把它和你所拥有的放在一起。

请注意，您启动整个过程的方式，检查启动路径下的目录，如果只有文件，基本上只会退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:44:13.473

第二，编写干净的多线程代码，使用装饰器可以帮助您，并使线程和进程之间的切换更容易。

在这里查看示例[装饰器异步装饰器](http://micheles.googlecode.com/hg/decorator/documentation.html#async)

您可以通过以下方式安装装饰器：

```
 easy_install decorator 
```

或下载代码，使用`python setup.py install`

# python - Python中dict.has_key和key的效率差异

> ID：11388136
> 
> 赞同：7
> 
> 时间：2012-07-09T01:25:43.387
> 
> 标签：python, performance, dictionary

> **可能重复：**
> [“has_key()”还是“in”？](https://stackoverflow.com/questions/1323410/has-key-or-in)

在 Python 中，有两种方法可以确定 a`key`是否在 a 中`dict`：

`if dict.has_key(key)`和`if key in dict`

有人告诉我第二个比第一个慢，因为`in`关键字使表达式对字典进行迭代，所以它会比`has_key`替代方案慢，后者显然使用哈希来做出决定。

由于我高度怀疑差异，因为我认为 Python 足够聪明，可以将 a`in`之前的关键字转换`dict`为某种哈希方式，因此我找不到任何关于此的正式声明。

那么两者之间真的有效率差异吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T01:27:44.973

这两个操作都做同样的事情：检查在字典中实现的哈希表的键。两者都不会迭代整个字典。请记住，`for x in dict`它不同于`if x in dict`. 它们都使用`in`关键字，但操作不同。

`in`关键字变成了 on 的调用，`dict.__contains__`dict 可以随心所欲地实现它。

如果这些操作的时间有差异，那将是非常小的，并且与. 的函数调用开销有关`has_key`。

顺便说一句，一般的偏好是`key in dict`比`dict.has_key(key)`. 请注意，速度与偏好无关。除非您知道自己处于关键路径中，否则可读性比速度更重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T01:32:51.697

`D.has_key`由于函数调用，实际上速度较慢：

```
>>> D = dict((x, y) for x, y in zip(range(1000000), range(1000000)))
>>> from timeit import Timer
>>> t = Timer("1700 in D", "from __main__ import D")
>>> t.timeit()
0.10631704330444336
>>> t = Timer("D.has_key(1700)", "from __main__ import D")
>>> t.timeit()
0.18113207817077637 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T01:37:29.523

`has_key`不是替代方案。它已被弃用。不要使用它。（反正比较慢）

# c# - 如何将数据从表单发送到类？

> ID：11388138
> 
> 赞同：3
> 
> 时间：2012-07-09T01:26:23.043
> 
> 标签：c#, forms, class

我有一个名为 Testing 的类和一个名为 TitleScreen 的表单。在 TitleScreen 中，我有一个 textBox1，我希望将其文本传递给一个类，然后将其传递回我的 Form 到一个 textBox2 中。

我只知道如何在 C# 中做基础知识，所以如果您尝试使其尽可能简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:07:11.523

在你的课堂上：

```
public class Class1
    {
        public static string SeparateName(string fullName)
        {
            string[] wordsInText = fullName.Split(' ');
            return wordsInText[0];
        }
    } 
```

在您的表格中：

```
private void button1_Click(object sender, System.EventArgs e)
        {
            textBox2.Text = Class1.SeparateName(textBox1.Text);
        } 
```

“我强烈建议您阅读针对新用户的书籍或教程，否则您对语言和框架的理解就会出现漏洞。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:41:38.863

听起来您想对文本框的值执行操作，然后在另一个文本框中打印结果。

您可以编写一个接受类型参数的方法（函数）`String`并在该方法中执行操作。然后该方法可以`Text`将文本框的属性设置为结果。

如果您询问如何在 winforms 项目中输入代码，您可以双击表单的背景以访问其代码。（至少在 Visual Studio 中）

如果您不知道如何执行上述建议，我强烈建议您阅读针对新用户的书籍或教程，否则您对语言和框架的理解会有漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-26T17:24:00.027

我建议您查看数据绑定的概念，即您将表单上的控件绑定到底层对象（类的实例）的属性。

绑定消除了编写代码以将数据从类中交叉加载到表单中并再次返回的需要，相反，您可以说“文本框 1 绑定到我的类的这个属性”。然后，当您更新文本框的值时，数据会自动放入类实例的选定属性中。通常，您会有一个保存按钮，该按钮调用您的类上的保存方法以将数据持久保存到您的数据存储（数据库或其他）。

将表单上的多个控件绑定到基础类的同一属性是完全合理的，因此在您的示例中，您可以将 textBox1 和 textBox2 绑定到类的同一属性。然后，一旦您实现了数据绑定，当您更改 textBox1 中的值时，该值将自动反映在 textBox2 中，无论是在每次击键时还是在验证字段时（通常是当您将焦点移动到另一个控件时）。

这是关于 Winforms 绑定的微软文档，涵盖了您需要的所有内容：[https ://msdn.microsoft.com/en-us/library/ef2xyb33(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ef2xyb33(v=vs.110).aspx)

# php - PHP paypal ipn 监听器交易数组

> ID：11388139
> 
> 赞同：1
> 
> 时间：2012-07-09T01:26:28.280
> 
> 标签：php, curl, paypal

```
 $req = 'cmd=' . urlencode('_notify-validate');
        foreach ($_POST as $key => $value) {
            $value = urlencode(stripslashes($value));
            $req .= "&$key=$value";
        }    
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, 'https://www.sandbox.paypal.com/cgi-bin/webscr');
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: www.paypal.com'));
        $res = curl_exec($ch);
        curl_close($ch);

        if (strcmp ($res, "VERIFIED") == 0) {
            //TODO
        }
        else if (strcmp ($res, "INVALID") == 0) {
            //TODO
        } 
```

回复

```
cmd=_notify-validate&transaction=Array 
```

响应还有更多内容，但您是否可以看到问题是它们是 $_POST 数组中的数组。如何在 $_POST 数组中编码和删除数组的斜线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:56:16.697

数组中的数组在 PHP 中没有通过 $_POST 变量正确处理。

您需要直接从输入流中读取原始数据。

这是给你的一些示例代码。

```
<?php
   $raw_post_data = file_get_contents('php://input');
   $raw_post_array = explode('&', $raw_post_data);
   $myPost = array();
   foreach ($raw_post_array as $keyval)
      {
      $keyval = explode ('=', $keyval);
      if (count($keyval) == 2)
         $myPost[$keyval[0]] = urldecode($keyval[1]);
      }
      $_req = 'cmd=_notify-validate';
      foreach ($myPost as $key => $value)
         {
         $value = urlencode(stripslashes($value));
         $_req .= "&$key=$value";
         }

// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
//$header .= "Host: www.sandbox.paypal.com:443\r\n";
$header .= "Content-type: text/html; charset=utf-8\r\n";
$header .= "Content-Length: " . strlen($_req) . "\r\n\r\n";

$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

if (!$fp){
//Something failed
} else {
fputs ($fp, $header . $_req);
while (!feof($fp)) {
$res = fgets ($fp, 1024);
if (strcmp ($res, "VERIFIED") == 0) {

//Success

}
else if (strcmp ($res, "INVALID") == 0) {
//Failure to validate
}
}
fclose ($fp);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:14:54.030

使用 Paypal 给定的代码 - 他们应该工作 -

[https://www.x.com/instant-payment-notification-4](https://www.x.com/instant-payment-notification-4)

这是您轻松复制的代码。

```
<?php

// STEP 1: Read POST data

// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead. 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
   if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];
} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
}
?> 
```

# actionscript-3 - 宽度不考虑'x'？

> ID：11388140
> 
> 赞同：1
> 
> 时间：2012-07-09T01:26:35.290
> 
> 标签：actionscript-3, flash, apache-flex, flex3

我有以下代码：

```
trace('width1 : '+ width);
_selected = new ScaleBitmap(new SearchDropDownItemSelectedBitmap(0, 0));
_selected.scale9Grid = new Rectangle(5, 5, _selected.width - 10, _selected.height - 10);
_selected.width = 109;
_selected.x = 2;
addChild(_selected);
trace('width2 : '+ width); 
```

它显示：

```
[trace] width1 : 0
[trace] width2 : 109 
```

这意味着我的元素与其子元素具有相同的大小，而子元素位于 x=2 处。为什么会这样？我怎么知道真正的尺寸？（这里应该是109+2=111）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:03:44.193

Flash 根据其内容处理显示对象的宽度。它在子对象周围创建尽可能小的边界框（如下图蓝色所示）。父影片剪辑的宽度就是这个边界框的宽度。

这些计算中不使用中心点。

如果需要，您可以简单地将 MovieClips X 位置添加到其宽度 (_selected.x + _selected.width)，但这不考虑中心点左侧的子内容（负值）。

![在此处输入图像描述](../Images/f846d60c23cd7a148a3428bb7e97f1de.png)

# c# - C#：从目录中获取 5 个最新（最后修改）的文件

> ID：11388141
> 
> 赞同：9
> 
> 时间：2012-07-09T01:26:40.157
> 
> 标签：c#, linq, file, directory

有没有一种方法可以存储目录中最后修改的 5 个文件的文件位置`Array`？

我目前正在使用以下代码来获取最后一个文件：

```
DateTime lastHigh = new DateTime(1900,1,1);
string highDir;
foreach (string subdir in Directory.GetDirectories(path)){
    DirectoryInfo fi1 = new DirectoryInfo(subdir);
    DateTime created = fi1.LastWriteTime;

    if (created > lastHigh){
        highDir = subdir;
        lastHigh = created;
    }
} 
```

我将使用`Array`将多个文件作为附件发送到电子邮件地址。

**更新**

我目前正在使用以下代码在 1 分钟后获取最后修改的文件：

```
string myDirectory = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyPictures),
                  "Test Folder");
var directory = new DirectoryInfo(myDirectory);
DateTime from_date = DateTime.Now.AddMinutes(-1);
DateTime to_date = DateTime.Now;
var files = directory.GetFiles().Where(file => file.LastWriteTime >= from_date && file.LastWriteTime <= to_date); 
```

我想存储到来自的文件名列表`files`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T01:35:08.227

这是使用 LINQ 执行此操作的一般方法：

```
 Directory.GetFiles(path)
             .Select(x => new FileInfo(x))
             .OrderByDescending(x => x.LastWriteTime)
             .Take(5)
             .ToArray() 
```

我怀疑这不是您想要的，因为您的代码示例似乎在不同的任务中工作，但在*一般*情况下，这将满足您的问题标题的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:36:40.053

听起来您想要一个`string`目录中所有文件的完整文件路径的数组。

鉴于您已经拥有`FileInfo`可枚举，您可以这样做：

```
var filenames = files.Select(f => f.FullName).ToArray(); 
```

如果您只想要文件名，请替换`FullName`为`Name`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-13T16:25:03.547

虽然保罗菲利普斯提供的答案有效。值得记住的是 `FileInfo.LastWriteTime`&`FileInfo.LastAccessTime`并不总是有效。这取决于操作系统的配置方式或可能是缓存问题。

[.NET FileInfo.LastWriteTime & FileInfo.LastAccessTime 是错误的](https://stackoverflow.com/questions/1448716/net-fileinfo-lastwritetime-fileinfo-lastaccesstime-are-wrong)

[File.GetLastWriteTime 似乎返回“过时”值](https://stackoverflow.com/questions/9992223/file-getlastwritetime-seems-to-be-returning-out-of-date-value)

# visual-studio-2010 - 我应该在我的解决方案中包含第三方 (Devexpress) dll 文件吗？

> ID：11388149
> 
> 赞同：1
> 
> 时间：2012-07-09T01:27:48.437
> 
> 标签：visual-studio-2010

我要做的方式是`SolutionItems`在我的解决方案中创建一个目录，并将所有引用的第三方 dll 文件物理复制到该文件夹​​中，然后我`local copy`在`SolutionItems`目录中更改对它的引用。但问题是：手动管理它值得吗？

我认为这是一个好主意，因为它是我的应用程序的依赖项。如果不包含 dll 文件，如果机器没有安装所需的 DevExpress 版本，整个解决方案将无法在 Visual Studio 中运行。`Deployment Project`无论如何，只要正确设置了引用，我都会正确处理依赖关系。

另一方面，因为 DevExpress 通常会自动添加引用，我可以`Project converter`用来更新 DevExpress 的版本。因此，在不参考`Local Copy`内部解决方案的情况下，每当我更改参考或在 DevExpress 版本之间进行更改时，它几乎都是开箱即用的。相反，如果我正在管理我`local copy`的 .dll 文件，我将为自己创建更多工作来维护 dll 文件的引用和物理副本。我是否应该像现在一样保持简单，基于使用此应用程序的任何人都需要安装 DevExpress 副本的假设？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:28:25.897

我们在我工作的地方遇到了类似的问题。5 个开发者、1 个 svn 和 DevExpress dll 的多个副本。正如您所描述的，我们最初尝试维护本地副本（手动更新），这对**我们**来说效果不佳。所以是的，最简单的事情（根据我的经验）是要求从事该项目的每个人都安装了 DevExpress 的副本。

# css - 仅将 CSS 应用于元素内

> ID：11388157
> 
> 赞同：2
> 
> 时间：2012-07-09T01:29:07.463
> 
> 标签：css

```
nav ul {
}

nav ul li {
    margin-left: 7px;
}

nav.ul li a, a:link, a:visited {
    float: left;
    padding: 7px;
    margin-left: 15px;
    color: #ffffff;
    text-decoration: none;
    font-weight: bold;
}

nav ul li a:hover {
} 
```

我只希望上面的代码对`<nav></nav>`

然而，现在它也可以为`<a href="">`导航元素的外部设置样式。我怎样才能确保它做我想要的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T01:32:30.277

您拥有的规则仅适用于`nav`元素，但以下情况除外：

```
nav.ul li a, a:link, a:visited { 
```

此规则适用于`a:link`和`a:visited`。你要这个：

```
nav.ul li a, nav.ul li a:link, nav.ul li a:visited { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T01:32:49.630

这是因为这一行不正确：

```
nav.ul li a, a:link, a:visited { 
```

它应该是：

```
nav ul li a, nav ul li a:link, nav ul li a:visited { 
```

在逗号 (,) 之后，CSS 将应用于所有`a`标签，因为没有指定前面的选择器。此外，您`nav ul`在第一部分中有一个句点 (.)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T01:32:01.260

改变你的规则：

```
nav.ul li a, a:link, a:visited 
```

到：

```
nav.ul li a, nav.ul li a:link, nav.ul li a:visited 
```

通过省略逗号分隔之间的 nav.ul li 部分，您可以有效地应用于 nav.ul li 之外的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T01:32:33.960

您的代码针对 a:link 和 a:visited 而不使用后代选择器。使用以下内容应该可以解决您的问题：

```
nav ul li a, nav ul li a:link, nav ul li a:visited {
    float: left;
    padding: 7px;
    margin-left: 15px;
    color: #ffffff;
    text-decoration: none;
    font-weight: bold;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T01:31:40.513

确保所有选择器都以`nav ul li`.

```
nav ul li a, nav ul li a:link, nav ul li a:visited {
    float: left;
    padding: 7px;
    margin-left: 15px;
    color: #ffffff;
    text-decoration: none;
    font-weight: bold;
} 
```

# mysql - 如何使用 mysql 更新表中的第一条记录？

> ID：11388159
> 
> 赞同：12
> 
> 时间：2012-07-09T01:29:48.593
> 
> 标签：mysql, sql

我在“room_photos”表中有未知数量的记录。有一个名为“main_photo”的列，当前每条记录的该列的值为“no”。我想创建一个 sql 语句来更新表中的第一条记录并将“main_photo”列的值更改为“yes”。

所以这就是我现在所拥有的：

表**room_photos**
**photo_id**   |   **主照片**
51 | 没有
52 | 没有
53 | 不

这就是我需要的：

表**room_photos**
**photo_id**   |   **主照片**
51 | 是的
52 | 没有
53 | 不

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-09T01:30:46.113

采用`LIMIT`

```
UPDATE tablename SET main_photo = 'yes' LIMIT 1; 
```

上面的查询将假定表中的第一条记录，**无论 photo_id 的值如何**，都将被更新。如果您希望更新 ID 最低的记录，`ORDER BY`也可以使用：

```
UPDATE tablename SET main_photo = 'yes' ORDER BY photo_id ASC LIMIT 1; 
```

# content-management-system - ModX Evolution - 在一页上显示多个资源

> ID：11388160
> 
> 赞同：0
> 
> 时间：2012-07-09T01:30:25.453
> 
> 标签：content-management-system, modx, modx-evolution

我正在尝试在 Evolution 的一页上显示多个资源。通常，我会`getResources`在革命中使用，但这一次对我不起作用。

我想知道是否有人知道替代方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:52:24.000

当然 - 在 Evolution 中，您可以使用[Ditto](http://rtfm.modx.com/display/ADDON/Ditto)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:28:39.870

您可以像 getResources 一样使用 Ditto，但它不如 getResources 可靠。像这样的东西。

```
[!Ditto?
    &parents=`12`
    &showInMenuOnly=`1`
    &orderBy=`menuindex ASC`
    &tpl=`sublayout-resource-to-pull-in`
!] 
```

# java - Struts 2 自定义标签库

> ID：11388166
> 
> 赞同：0
> 
> 时间：2012-07-09T01:31:39.793
> 
> 标签：java, jakarta-ee, struts2

我为我的 struts 2 项目创建了一个自定义标签库。现在我想把我所有的源代码放到一个 jar 文件中。它工作正常，但我担心我仍然需要在 web xml 中配置我的 .tld 文件才能工作：

```
<jsp-config>
    <taglib>
        <taglib-uri>/custom-tags</taglib-uri>
        <taglib-location>/META-INF/mytaglib.tld</taglib-location>
    </taglib>
</jsp-config> 
```

有没有办法摆脱这个并在jar文件中配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:13:05.480

这应该与 Struts2 没有任何关系，真的。为了避免在 web.xml 中配置它，您应该能够将 .tld 文件放入 jar 根目录下的 META-INF 文件夹中，并使用 .tld 声明 .tld 中的 uri `<uri>/custom-tags</uri>`。

# xcode - 为 iOS 进行大型测验 - 100 多个问题（使用 .txt 文件或其他文件）

> ID：11388174
> 
> 赞同：0
> 
> 时间：2012-07-09T01:32:52.600
> 
> 标签：xcode, plist, text-files

我正在尝试为 iOS 创建一个包含 100 多个问题的测验应用程序。但是，我不想手动设计 UI，将所有值与情节提要一起放入。我正在尝试从 .txt 文件中提取值并使用它在标签和按钮中输入值。我需要帮助来做这件事！我不知道如何让编译器重复提取问题编号、问题和答案的操作，这些问题和答案都打包在这个 .txt 文件中，并在每次启动游戏时将它们输入到不同的对象中。

我是不是太不具体了？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:10:44.867

将文本文件读入 NSString。将文本文件中的数据用逗号分隔。使用 NSString 的 '-componentsSeparatedByString:' 方法（传递 @"," 作为参数）将所有问题拆分为 NSArray。

# javascript - jQuery：使用 .click、.trigger() 时，仅运行两个 .click() 事件中的第一个

> ID：11388175
> 
> 赞同：0
> 
> 时间：2012-07-09T01:33:00.073
> 
> 标签：javascript, jquery, click

我想我已经看到了很多与我类似的问题，但到目前为止我还没有找到答案。我调整了一些在网络上找到的相关下拉列表，当用户单击时它们可以完美地工作：您单击第一个列表（选择），当您选择具有“孩子”的项目时，这些显示在第二个下拉列表中等等上。当我想传递默认值时，问题就开始了。第一个列表得到了它的价值，nu 问题。然后，为了生成第二个下拉菜单，我向相应的 Id 添加了一个 .click() 事件。它实际上显示了第二个下拉列表以及选定的元素（从下拉填充函数传递）。但是，一旦加载，无论有多少实际点击或代码模拟点击，第二个下拉菜单都不会运行它的点击功能，它只能让您选择，但不会生成第三个下拉菜单，其中，

有什么问题？

这是主要的 JS 代码，它位于页面正文之前：

```
var demo = {};

demo.globals = {
princ: 0,
princ2: 0,
princ3: 0
}

$(document).on('ready', function() {

$(document).on('click', '#lprinc', function() {
     var value = $(this).val();
      if (value==0){
            $('#lprinc2').html('<option value="">----</option>').attr('disabled', true);
            $('#lprinc2').css({ 'visibility': 'hidden'});
      } 
      else{ 
            $('#lprinc2').removeAttr('disabled');
            $('#lprinc2').css({ 'visibility': 'visible'});
            $('#lprinc3').html('<option value="">----</option>').attr('disabled', true);
            $('#lprinc3').css({ 'visibility': 'hidden'});                           
            if (value != demo.globals.princ) {
            demo.checkDropdown('princ', 'princ2', value, val2);
            demo.globals.princ = value;
            } 
    }
});

 if (val1!=''){
            $('#lprinc').trigger('click');
}

$(document).on('click','#lprinc2', function() {
     var value = $(this).val();
      if (value==0){
            $('#lprinc3').html('<option value="">----</option>').attr('disabled', true);
            $('#lprinc3').css({ 'visibility': 'hidden'});
      } 
      else{ 
            $('#lprinc3').removeAttr('disabled');
            $('#lprinc3').css({ 'visibility': 'visible'});       
            if (value != demo.globals.princ2) {
            demo.checkDropdown1('princ2', 'princ3', value, val3);
            demo.globals.princ2 = value;
            }
     }
 });

if (val2!=''){
         $('#lprinc2').trigger('click');
}    
if (val3!=''){
         $('#princ3').val(val3);
}     

}); 

demo.checkDropdown = function(dropDownName, nextDropDown, value, valorpass) {
jQuery.getJSON('/mod/update.php', { id : nextDropDown, value : value, val: valorpass}, function(data) {
    if (!data.error) {
        $('#lprinc2').html(data.list).removeAttr('disabled');
    } else {
        $('#lprinc2').html('<option value="">----</option>').attr('disabled', true);
        $('#lprinc2').css({ 'visibility': 'hidden'});
        $('#lprinc3').html('<option value="">----</option>').attr('disabled', true);
        $('#lprinc3').css({ 'visibility': 'hidden'});
    }
});    
$("select[name='" + nextDropDown + "']").html(dropDownHtml);

}

demo.checkDropdown1 = function(dropDownName, nextDropDown, value, valorpass) {
jQuery.getJSON('/mod/update.php', { id : nextDropDown, value : value, val: valorpass}, function(data) {
    if (!data.error) {
        $('#lprinc3').html(data.list).removeAttr('disabled');
    } else {
        $('#lprinc3').html('<option value="">----</option>').attr('disabled', true);
        $('#lprinc3').css({ 'visibility': 'hidden'});
    }
});     

$('#lprinc3').html(dropDownHtml); 
```

任何帮助将非常感激。我试过 .one、.trigger()、.triggerHandler()、.click() 无济于事。我一直在为他的事发疯……

补充：更新.php：

```
if (!empty($_GET['value'])) {

$value = $_GET['value'];
$valor= $_GET['val'];

try {

    $objDb = new PDO('mysql:host=localhost;dbname=XXXXX', 'XXXXX', 'XXXXX');
    $objDb->exec('SET CHARACTER SET utf8');

    $sql = "SELECT * 
            FROM `categories`
            WHERE `master` = ?";

    $statement = $objDb->prepare($sql);
    $statement->execute(array($value));
    $list = $statement->fetchAll(PDO::FETCH_ASSOC);

    if (!empty($list)) {

        $out = array('<option value="0">Seleccione...</option>');

        foreach($list as $row) {
            $selstrg = "<option value='".$row['id']."' ";
            if ($row['id']==$valor){
                $selstrg = $selstrg." selected ='selected' ";   
            }       
            $selstrg = $selstrg.">".$row['name']."</option>";
            $out[] = $selstrg;          
        }

        echo json_encode(array('error' => false, 'list' => implode('', $out)));

    } else {
        echo json_encode(array('error' => true));
    }

} catch(PDOException $e) {
    echo json_encode(array('error' => true));
}

} else {
echo json_encode(array('error' => true));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:36:22.477

**更新答案：**

我认为您需要将 jQuery 事件更新为`on`.

更新代码如：

```
$('#princ2').click(function() { 
```

至：

```
$('#princ2').on('click', function() { 
```

此外，[http](http://eduardoarria.comze.com/)`dropDownHtml is not defined` ://eduardoarria.comze.com/ 上的示例显示了以下代码行存在问题的错误：

```
$("select[name='" + nextDropDown + "']").html(dropDownHtml); 
```

您尝试使用`dropDownHtml`尚未声明或分配的。删除试图将 HTML 设置为`dropDownHtml`.

# html - 如何删除图像精灵中的边框

> ID：11388177
> 
> 赞同：4
> 
> 时间：2012-07-09T01:33:06.597
> 
> 标签：html, css

在下面的代码中，边框没有被删除，即图像精灵。我尝试了一些使用样式和边框 0 删除边框的方法，但没有用。

```
<style>
img.home{width:40px;height:32px;
background:url(share.png) 0 0;
border-style: none;}
img.next{width:40px;
height:32px;background:url(share.png) -36px 0;
border-style:none;}
</style>
<a href="http://www.yahoo.com/">
<img class="home" border="0">
</a>
<img class="next" border="0"/> 
```

[JSFIDDLE](http://jsfiddle.net/anbD8/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T01:34:01.723

图像带有默认边框，只有在下载图像时才会消失。该图像来自图像的`src`属性。如果未设置 src，则不会下载图像，并且边框将永远存在 - 您的情况正是如此。

一个普通的 img 标签如下所示：

```
<img src="/something.jpg" /> 
```

你的看起来像这样：

```
<img /> 
```

您正在通过 css 的背景图像添加图像。不是应该做的。您可以添加背景图像，但通常用于其他目的。（检查底部的旁边）。

尝试删除背景图像并将图像位置放在图像的 src 属性上。像这样：

```
<img class="next" src="/share.png" /> 
```

你会看到图像现在没有边框了。

**除了** 将背景图像添加到 img 元素时，通常会在未设置 img 时提供占位符图像`src`。想想博客评论部分的头像。

**此外** ，当创建精灵时，您可以使用`div`s `p`s`em`等。记住，`background-image`可以应用于任何元素！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-23T12:57:46.067

假设您的 html 标记是`<img class="somthing" />`并且在“某物”类中您已经定义了图像的背景位置。

当您从图像精灵中更准确地选择特定图像时，图像所在的特定位置。您的课程适合您使用 css 中的背景位置获取图像的位置。

删除边框的简单解决方案是将`img`标签设为`div`.

如果您根据背景位置获取图像，为什么需要使用`img`标签。

只需像...一样编写html`<div class="next" ..>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-31T13:40:50.727

如果您不使用外部文件，您可以使用 base64 非常小的透明图像

```
<img class="next"  src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T02:00:31.033

发现了，JOPLOmacedo 是对的，不过不用去掉背景，用`src`标签就行了。[JSFIDDLE](http://jsfiddle.net/GB54f/21/)。（对不起图片，但我需要它们来测试`src`）

HTML：

```
<a href="http://www.yahoo.com/">
<img class="home" src="http://jsfiddle.net/img/logo.png" border="0"/>
 </a>
<img class="next" src="http://jsfiddle.net/img/social-icons/facebook_16.png" border="0"/>​ 
```

CSS：

```
img.home{width:40px;height:32px;
border: none; background:url(http://farm1.staticflickr.com/111/315308766_163c08db38.jpg) 0 0;}
img.next{width:40px;
height:32px;
border:none; float: right;
background:url(http://farm1.staticflickr.com/111/315308766_163c08db38.jpg) -36 0;}​ 
```

# web-services - IIS 应用程序池监控无限循环（或不适当的负载）

> ID：11388178
> 
> 赞同：2
> 
> 时间：2012-07-09T01:33:16.667
> 
> 标签：web-services, iis, iis-7, application-pool

我只是想知道当我们的网络服务可能陷入无限循环时，我是否可以处理。我知道第一个答案是不要有无限循环，我们已经测试了系统，应该不会发生循环。但是只是为了回退，有没有办法在 IIS 应用程序池上放置一些东西来说明 CPU 是否以 99% 的速度运行超过 1 分钟而不是回收应用程序池？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:25:49.360

没有 IIS 内置的方式来做类似的事情（回收选项允许您在每天的设定时间或在设定的分钟数后回收，基于达到虚拟或私有内存限制，或基于命中特定数量的请求 - 没有 CPU-ish）。

您可以构建自己的监视器来监视某些事件（例如 CPU 在一分钟内超过 99%）并导致循环发生（有多种编程方法可以做到这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:12:42.757

在 IIS 7.0+ 中，这可以很容易地完成（尽管它不会回收应用程序池，而是终止进程，然后`resetInterval`在到达时重新启动它）。请参阅： [http ://www.iis.net/configreference/system.applicationhost/applicationpools/add/cpu](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/cpu)

# excel - Excel：在其他列中替换 Word 之后的所有内容

> ID：11388179
> 
> 赞同：1
> 
> 时间：2012-07-09T01:33:21.317
> 
> 标签：excel, replace

我在excel中有2列这样

**第 1 列**

hxxp://url.com/something-WORD-/

hxxp://url.com/something-else-WORD2-/

**第 2 列**

单词

字2

我想在 Column1 中的 Column2 中搜索单词，如果找到，则将其替换掉，然后将其后的所有内容替换为空，因此第 3 列看起来像

**第 3 列**

hxxp://url.com/something

hxxp://url.com/something-else

感谢任何帮助，因为我无法在任何地方找到解决方案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:27:15.533

让第 3 列有论坛：

`=LEFT(A1,FIND(B1,A1)-1)`.

如果第 2 列有值`Word`

那么第3列将是

`hxxp://url.com/something-`

如果第 2 列中的值总是前面有一个您想要删除的破折号，您可以在论坛中减去一个额外的数字。

`=ISERR`如果您希望可能找不到第 2 列中的值，您也可以将其包装在一些检查中。

# python - 有没有更 Pythonic 的方法来使用 string.format 将字符串填充到可变长度？

> ID：11388180
> 
> 赞同：3
> 
> 时间：2012-07-09T01:33:23.960
> 
> 标签：python, string.format

我想将字符串填充到一定长度，具体取决于变量的值，我想知道是否有标准的 Pythonic 方法可以使用`string.format` [mini-language](http://docs.python.org/py3k/library/string.html#formatspec)执行此操作。现在，我可以使用字符串连接：

```
padded_length = 5
print(("\n{:-<" + str((padded_length)) + "}").format("abc"))
# Outputs "abc--"

padded_length = 10
print(("\n{:-<" + str((padded_length)) + "}").format("abc"))
#Outputs "abc-------" 
```

我试过这个方法：

```
print(("{:-<{{padded_length}}}".format(padded_length = 10)).format("abc")) 
```

但它引发了一个`IndexError: tuple index out of range`例外：

```
Traceback (most recent call last):
  File "<pyshell#41>", line 1, in <module>
    print(("{:-<{{padded_length}}}".format(padded_length = 10)).format("abc"))
IndexError: tuple index out of range 
```

除了字符串连接之外，是否有标准的内置方法来执行此操作？第二种方法应该有效，所以我不确定它为什么会失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T01:39:00.777

以下示例应该为您提供解决方案。

```
padded_length = 5
print("abc".rjust(padded_length, "-")) 
```

印刷：

```
--abc 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T01:40:54.890

```
print(("\n{:-<{}}").format("abc", padded_length)) 
```

你尝试的另一种方式，应该这样写

```
print(("{{:-<{padded_length}}}".format(padded_length=10)).format("abc")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T01:47:33.947

您需要转义最外面的大括号。以下对我来说很好：

```
>>>'{{0:-<{padded_length}}}'.format(padded_length=10).format('abc')
'abc-------' 
```

# javascript - 如何在 JS 中将原型附加到对象文字

> ID：11388181
> 
> 赞同：3
> 
> 时间：2012-07-09T01:33:42.243
> 
> 标签：javascript, prototype

我试图理解 JavaScript 的原型性质，并且我试图在不使用类之类的构造函数的情况下创建对象继承。

如果它们都是三个对象文字，我如何将原型链从 Animals 附加到 Cat 和 Dog？

此外，有没有办法执行 Object.create 并以文字形式添加更多属性（如 myCat）。

我添加了下面的代码并粘贴 bin [http://jsbin.com/eqigox/edit#javascript](http://jsbin.com/eqigox/edit#javascript)

```
var Animal = {
    name        : null,
    hairColor   : null,
    legs        : 4,

    getName : function() {
        return this.name;
    },
    getColor : function() {
        console.log("The hair color is " + this.hairColor);
    }
};

/* Somehow Dog extends Animal */

var Dog = {
    bark : function() {
        console.log("Woof! My name is ");
    }
};

/* Somehow Cat Extends Animal */

var Cat = {
    getName : function() {
        return this.name;
    },

    meow : function() {
        console.log("Meow! My name is " + this.name);
    }
};

/* myDog extends Dog */

var myDog = Object.create(Dog);

/* Adding in with dot notation */
myDog.name = "Remi";
myDog.hairColor = "Brown";
myDog.fetch = function() {
    console.log("He runs and brings back it back");
};

/* This would be nice to add properties in litteral form */
var myCat = Object.create(Cat, {
    name        : "Fluffy",
    hairColor   : "white",
    legs : 3, //bad accident!
    chaseBall : function(){
        console.log("It chases a ball");
    }

});

myDog.getColor(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:52:17.543

您可以使用`Object.create`您定义的对象作为原型。例如：

```
var Dog = Object.create(Animal, {
    bark : {
        value: function() {
            console.log("Woof! My name is " + this.name);
        }
    }
}); 
```

现在您可以创建一个新的 Dog 对象：

```
var myDog = Object.create(Dog);
myDog.bark();  // 'Woof! My name is null'
myDog.getColor();  // 'The hair color is null' 
```

示例：http: [//jsfiddle.net/5Q3W7/1/](http://jsfiddle.net/5Q3W7/1/)

或者，如果您在没有 的情况下工作，则`Object.create`可以使用构造函数：

```
function Animal() {
    this.name = null;
    this.hairColor = null;
    this.legs = 4;
};

Animal.prototype = {
    getName : function() {
        return this.name;
    },
    getColor : function() {
        console.log("The hair color is " + this.hairColor);
    }
}

function Dog() {
}

Dog.prototype = new Animal;
Dog.prototype.bark = function() {
    console.log("Woof! My name is " + this.name);
}; 
```

示例：http: [//jsfiddle.net/5Q3W7/2/](http://jsfiddle.net/5Q3W7/2/)

有关 Object.create 的更多信息：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/)

有关构造函数和原型链的更多信息： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/constructor](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/constructor)

[https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_and_the_prototype_chain](https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_and_the_prototype_chain)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:36:44.907

**编辑**：完全被忽视了`Object.create`。@jMerliN 的答案更合适，除非您需要更广泛的向后兼容性。

* * *

`Animal`,`Cat`并`Dog`共享，`Object.prototype`因为它们是实例，`Object`但这不是您想要放置方法的地方。

您可以使用`extend`函数来模仿继承：

```
var Dog = {
    bark : function() {
        console.log("Woof! My name is ")
    }
}

jQuery.extend(Dog, Animal) 
```

这可能是下划线`_.extend`或您自己的扩展函数，它只是复制它的属性：

```
function extend(obj, source){
    for (var prop in source) {
        obj[prop] = source[prop]
    }
} 
```

但要小心引用：字符串、数字、布尔值等“原始”值将被*复制*，而对象、函数和数组将被*引用*：

```
var Animal = {
    tags: [1,2,3]
}

var Dog = {
    //...
}

_.extend(Dog, Animal)

Dog.tags.push(4)

Dog.tags // [1,2,3,4]
Animal.tags // [1,2,3,4] oh no! 
```

没有理由这样做，它容易出错并且内存效率较低；只需使用构造函数:)

# java - 如果捕获到异常，则跳过其余的 onClick

> ID：11388188
> 
> 赞同：1
> 
> 时间：2012-07-09T01:34:59.507
> 
> 标签：java, android, exception, onclick

我有一种情况，如果某个值没有返回，我可能需要阻止我的 onClick 方法的其余部分运行：

```
public void onClick(View v) {
    double a = 0;
    double b = 0;
    double c = 0;
    try {
        a = Double.parseDouble(((EditText) getView().findViewById(R.id.area_a)).getText().toString());
        b = Double.parseDouble(((EditText) getView().findViewById(R.id.area_b)).getText().toString());
        c = Double.parseDouble(((EditText) getView().findViewById(R.id.area_c)).getText().toString());
    } catch (NumberFormatException e) {
            //Exception here! Do not continue with the rest of the onClick method!
    }
    ...
} 
```

如果捕获到异常，有没有办法跳过其余的 onClick 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:36:57.327

尝试放入`return;`你的 catch 块。

# spyder - macports安装后如何启动spyder

> ID：11388193
> 
> 赞同：2
> 
> 时间：2012-07-09T01:36:23.827
> 
> 标签：spyder

这是我要发布的第一个问题。

我目前正在使用python（在mac os 10.6.8上），并且一直在为缺乏ide而苦苦挣扎。我一直在使用提供语法突出显示的 emacs 版本，但不提供在没有打印语句的情况下浏览变量值的能力。我正在寻找的是相当于 eclipse，当我从 10.4.11 升级到 10.6.8 时，它基本上在我的机器上死了。我没有成功复活它。分手后要往前看了。

我的研究生导师建议使用 spyder，昨晚我咬紧牙关，成功安装了 macports 和（显然）spyder。

我遇到的问题是安装后如何启动 spyder。显然， python spyder.py 不是使用方法。在其他地方（不是这里）我看到一个帖子，建议应该有一个批处理可执行文件，我应该可以通过键入找到

哪个间谍

这没有产生任何结果。

spyder 文档（位于[http://packages.python.org/spyder/options.html](http://packages.python.org/spyder/options.html)）建议该命令

蟒蛇间谍.py

是要走的路。结果如下：

Bobs-Machine:spyderlib robertlilly$ python spyder.py

回溯（最近一次通话最后）：

文件“spyder.py”，第 31 行，在

```
from spyderlib import qt #analysis:ignore 
```

ImportError：没有名为 spyderlib 的模块

我在这里的大部分搜索都只是指出应该使用 MacPorts 进行安装，之后就什么都没有了。我认为，自述文件包括 macports spyder 安装并没有提供足够的指导。

如果有人知道在哪里看，那就太好了。

问候，

罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-24T03:13:14.040

对我来说，我安装了 macports 包 py37-spyder。在 /opt/local/bin 中有一个包 spyder-3.7。启动已经有效。为了使其成为默认值，我必须运行

```
sudo port select --set spyder spyder-37 
```

然后我可以直接 `spyder`从终端运行它。如果您想查看您的系统上有哪些版本的 spyder，那么

```
port select --list spyder 
```

会告诉你你拥有的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T19:21:23.457

我最近刚刚通过 MacPorts 安装了 spyder。（我选择的命令是`sudo port install py27-spyder`，它在 Mac OS 10.7.5 & Python 2.7.5 上安装了 Spyder v.2.2.3）

在 Spyder 安装结束时，终端显示“使用命令`spyder`启动”（或类似的东西）

所以，对我来说，我只需要输入`spyder`一个终端来启动它。您提到缺少 spyderlib 的错误可能意味着您的 spyder 安装实际上没有正确完成。（我发现必须为复杂的 MacPorts 安装追踪 2-3 个奇怪的错误和依赖项并不少见）。如果您发现它确实完成了，那么可能 MacPorts 目录没有添加到您的 PATH 中。打开`~/.profile`后，您应该看到 MacPorts 将其目录添加到了 shell 的搜索路径中。这是 MacPorts 安装程序添加到我的 .profile 的内容：

```
# MacPorts Installer addition on 2012-11-19_at_17:16:31: adding an appropriate PATH variable fo$
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts. 
```

为了制作一个 Mac OS 友好的图标来启动 Spyder，我制作了一个包含以下文本的新文本文件（我使用 Terminal.app> *pico完成了它）：*

```
#!/bin/bash
spyder 
```

并将文件保存为`spyder.command`. 这个文件现在是可双击的，并且会启动 Spyder（它的别名可以有一个更正常的名字，比如“Launch Spyder”）。将其放入*/Applications*文件夹并通过*/Utilities/Icon Composer.app*为它制作一个图标（获取网站上的 Spyder 图标），它就像一个 Pythonic Matlab！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:39:12.757

Macports 应该将 spyder 二进制文件安装到`/opt/local/bin/spyder`或附近。如果您已经`/opt/local/bin/`在 PATH 变量中，那么只需运行：

```
$ spyder & 
```

或更明确地说：

```
$ /opt/local/bin/spyder & 
```

...如果您没有 PATH 设置。希望有帮助。

# activemq - 了解 Apache ActiveMQ

> ID：11388197
> 
> 赞同：3
> 
> 时间：2012-07-09T01:37:00.583
> 
> 标签：activemq

我对 Apache ActiveMQ 的功能感到困惑。

[我从这个链接](http://www.apache.org/dyn/closer.cgi?path=%2Factivemq%2Fapache-activemq%2F5.6.0%2Fapache-activemq-5.6.0-bin.zip)下载了 ActiveMQ 。所以我以这种方式使用它（环境：Windows 7）：我启动`bin/activemq.bat`，然后它可以工作。

我的问题是：这是否意味着我在我的机器上启动了一个服务器？当我初始化 时`ActiveMQConnectionFactory`，代理 URL 是`tcp://localhost:61616`. 但是如果我想让我的机器作为服务器，而另一台机器连接到我的服务器呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T01:45:23.320

是的，您可以将主盒子用作服务器，并让消费者/订阅者在其他盒子上运行（这将需要连接到服务器 - 您需要指定要建立连接的服务器主机名和端口） - 一旦进入地方，服务器上的消息（主题或队列）可以被客户端消费。

如果您有一个生产者和一个消费者，您可以考虑使用队列 - 如果您有多个消费者/订阅者，您可以考虑设置消费者将订阅的主题。需要根据需要将消息插入到主题/队列中。

您可以在代码中或最好在配置文件中指定服务器信息。

拓扑参考： http: [//activemq.apache.org/topologies.html](http://activemq.apache.org/topologies.html)

此外，您可以根据您的用例选择是否保留您的消息。Kaha DB 是首选路线（特别是在关注性能的情况下）。

有用的例子：

[http://sujitpal.blogspot.com/2007/12/jms-patterns-with-activemq.html](http://sujitpal.blogspot.com/2007/12/jms-patterns-with-activemq.html)

[http://vvratha.blogspot.com/2012/05/java-client-to-sendreceive-messages-for.html](http://vvratha.blogspot.com/2012/05/java-client-to-sendreceive-messages-for.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-09-09T07:05:38.370

Apache ActiveMQ ™ 是最流行和最强大的开源消息传递和集成模式服务器，它的作用类似于第三方服务器。

Apache ActiveMQ 速度快，支持许多跨语言客户端和协议，带有易于使用的企业集成模式和许多高级特性，同时完全支持 JMS 1.1 和 J2EE 1.4。Apache ActiveMQ 在 Apache 2.0 许可下发布。

ActiveMQ 具有发送 100 MB 单消息框架并同时保持 1000 个并发连接的能力，有关详细信息，您可以查看文档中的 activemq.xml。

[更多关于 ActiveMQ 的信息](http://www.javacodegeeks.com/2012/04/what-is-activemq.html)

# performance - R中的向量化矩阵运算

> ID：11388201
> 
> 赞同：2
> 
> 时间：2012-07-09T01:37:33.363
> 
> 标签：performance, r, matrix, vectorization

我有一个 R x C 矩阵填充到第 k 行并在该行下方为空。我需要做的是填充剩余的行。为了做到这一点，我有一个函数，它接受 2 个整行作为参数，处理这些行并输出 2 个新行（这些输出将填充矩阵的空行，分批 2）。我有一个固定矩阵，其中包含要处理的所有“对”行，但我的 for 循环对性能没有帮助：

```
# the processRows function:
processRows = function(r1, r2)
{
  # just change a little bit the two rows and return it in a compact way    
  nr1 = r1 * 0.1
  nr2 = -r2 * 0.1

  matrix (c(nr1, nr2), ncol = 2)
 }

# M is the matrix
# nrow(M) and k are even, so nLeft is even

M = matrix(1:48, ncol = 3)
# half to fill (can be more or less, but k is always even)
k = nrow(M)/2

# simulate empty rows to be filled
M[-(1:k), ] = 0

cat('before fill')
print(M)

# number of empty rows to fill
nLeft  = nrow(M) - k
nextRow = k + 1

# each row in idxList represents a 'pair' of rows to be processed 
# any pairwise combination of non-empty rows could happen
# make it reproducible

set.seed(1)
idxList = matrix (sample(1:k, k), ncol = 2, byrow = TRUE)

for ( i in 1 : (nLeft / 2))
{
   row1 = M[idxList[i, 1],]
   row2 = M[idxList[i, 2],]

   # the two columns in 'results' will become 2 rows in M
   results = processRows(row1, row2)

   # fill the matrix
   M[nextRow, ] = results[, 1]
   nextRow = nextRow + 1
   M[nextRow, ] = results[, 2]
   nextRow = nextRow + 1
 }

 cat('after fill')
 print(M) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:29:28.860

好的，这是您的代码。我们运行它，以便我们拥有“真实”矩阵的副本，我们希望更快地重现该矩阵。

```
#### Original Code (aka Gold Standard) ####
M = matrix(1:48, ncol = 3)
k = nrow(M)/2
M[-(1:k), ] = 0
nLeft  = nrow(M) - k
nextRow = k + 1
idxList = matrix(1:k, ncol = 2)
for ( i in 1 : (nLeft / 2))
{
    row1 = M[idxList[i, 1],]
    row2 = M[idxList[i, 2],]
    results = matrix(c(2*row1, 3*row2), ncol = 2)
    M[nextRow, ] = results[, 1]
    nextRow = nextRow + 1
    M[nextRow, ] = results[, 2]
    nextRow = nextRow + 1
} 
```

现在这里是矢量化代码。基本思想是，如果您有 4 行正在处理。与其一次一个地将它们作为向量传递，不如立即进行。那是：

```
(1:3) * 2
(1:3) * 2
(1:3) * 2
(1:3) * 2 
```

与以下相同（但速度较慢）：

```
c(1:3, 1:3, 1:3, 1:3) * 2 
```

因此，首先，我们将使用相同的设置代码，然后将要处理的行创建为两个长向量（其中所有 4 个原始行只是串在一起，如我上面的简单示例所示）。然后，我们获取这些结果，并将它们转换为具有适当维度的矩阵。最后一个技巧是只需两个步骤即可将结果分配回去。您可以一次分配给矩阵的多行，因此我们用于`seq()`获取奇数和偶数，因此将结果的第一列和第二列分别分配给。

```
#### Vectorized Code (testing) ####
M2 = matrix(1:48, ncol = 3)
k2 = nrow(M2)/2
M2[-(1:k2), ] = 0
nLeft2  = nrow(M2) - k2
nextRow2 = k2 + 1
idxList2 = matrix(1:k2, ncol = 2)

## create two long vectors of all rows to be processed
row12 <- as.vector(t(M2[idxList2[, 1],]))
row22 <- as.vector(t(M2[idxList2[, 2],]))

## get all results
results2 = matrix(c(2*row12, 3*row22), ncol = 2)

## add results back
M2[seq(nextRow2, nextRow2 + nLeft2-1, by = 2), ] <- matrix(results2[,1], nLeft2/2, byrow=TRUE)
M2[seq(nextRow2+1, nextRow2 + nLeft2, by = 2), ] <- matrix(results2[,2], nLeft2/2, byrow=TRUE)

## check that vectorized code matches your examples
all.equal(M, M2) 
```

在我的机器上给出：

```
> all.equal(M, M2)
[1] TRUE 
```

# css - CSS：如何将多条内容放在一个框/边框中？

> ID：11388202
> 
> 赞同：0
> 
> 时间：2012-07-09T01:37:35.310
> 
> 标签：css, ruby-on-rails-3

我试图在每个供应商周围放置一个框，在以下循环中进行交易对。

```
<% micropost.comments.each do |comment| %>

      <p4>
        <b>Vendor:</b>
        <%= comment.commenter %><br>
        <b>Deal:</b>
        <%= comment.body %>
      </p4>

    <% end %> 
```

这样它在所有 [vendor:"vendor" 周围都有一个框。然后在新行下，交易：“交易”]

所以在我的css文件中我放了

```
p4 {
  border-style:solid;
  border-width:3px;
} 
```

整个东西也应该缩进，所以我有，

```
#blah_form input, textarea, b4 {margin-left:80px} 
```

现在它只是将 vendor 放在一个类似于 [ 然后返回一行并在其周围放置一个半盒 ] 的半盒中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:53:05.467

您需要使用非内联元素来实现您正在寻找的效果。替换（或换行`<p4>`）`<div>`

新代码：

```
<% micropost.comments.each do |comment| %>

  <div class="box">
    <b>Vendor:</b>
    <%= comment.commenter %><br>
    <b>Deal:</b>
    <%= comment.body %>
  </div>

<% end %> 
```

和 CSS：

```
div.box {
    border: 3px solid black;
} 
```

# asp.net-mvc - LINQ 检查空值

> ID：11388205
> 
> 赞同：1
> 
> 时间：2012-07-09T01:38:36.763
> 
> 标签：asp.net-mvc, linq, nullable

如何在 Linq 中检查 Null？

我有一个第三方代码返回一个可以为空`DataTable`的列类型`DateTime`。

我的代码：

```
 var profile = (from d in ds.Tables[0].AsEnumerable()
               select new User
               {
                 FirstName = d["FirstName"].ToString(), 
                 Birthdate = Convert.ToDateTime(d["BirthDate"].ToString())
               }).FirstOrDefault(); 
```

返回该语句`Object cannot be cast from DBNull to other types`上的错误。`Birthdate=`

我尝试使用以下代码，但返回一个转换异常（不能从字符串转换为 DateTime？）

```
Birthdate = (DateTime?)d["BirthDate"].ToString(); 
```

有没有办法快速检查空值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T02:00:22.673

我没有对此进行测试，但您可以尝试以下方法：

```
Birthdate = d.Field<DateTime?>("BirthDate") 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb360891.aspx)：

> Field 方法支持将列作为可空类型访问。如果 DataSet 中的基础值为 [DBNull.]Value，则返回的可为 null 类型将具有 null 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:48:29.280

您可以创建一个辅助函数来检查 的值`DBNull`，如下所示：

```
private static DateTime? ConvertNullableToDateTime(object val) {
    return (val != null && val != DBNull.Value) ? Convert.ToDateTime(val.ToString()) : null;
} 
```

现在您可以在 LINQ 查询中使用此方法：

```
var profile = (from d in ds.Tables[0].AsEnumerable()
           select new User
           {
             FirstName = d["FirstName"].ToString(), 
             Birthdate = ConvertNullableToDateTime(d["BirthDate"])
           }).FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T02:25:59.777

使用上述代码时出现错误。我想我们可以使用下面的代码。

```
Birthdate = dr["BirthDate"] == DBNull.Value ? (DateTime?)null : (DateTime)dr["BirthDate"]; 
```

如果我们使用`Convert.ToString(dr["BirthDate"])`，那么它转换为空字符串，如果它有 DBNull。

也试试。

# function - ActionScript 3.0 - 一个函数中有 2 个 gotoAndPlay() 命令

> ID：11388210
> 
> 赞同：1
> 
> 时间：2012-07-09T01:39:58.680
> 
> 标签：function, actionscript, command

我有以下 Adob​​e Flash (ActionScript 3.0) 电影：

![在此处输入图像描述](../Images/eadcacdd1c9fd3c696b950fc207d7172.png)

当按下按钮时，我想播放第 17 帧到第 24 帧，之后，我想返回并在同一动画中播放第 10 帧到第 16 帧。我已经尝试过这样的事情，但不幸的是不起作用：

```
button.addEventListener(MouseEvent.CLICK, buttonClick);

function buttonClick(event:MouseEvent):void{
        gotoAndPlay(17);
        gotoAndPlay(10);
} 
```

换句话说：`gotoAndPlay(17);`我要`gotoAndPlay(10);`

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:36:45.960

试试这个：

```
stop();

// Properties.
var queue:Array = [];
var currentBlock:Point;

// Queue a section of timeline to play.
function queueBlock(start:int, end:int):void
{
    queue.push(new Point(start, end));
}

addEventListener(Event.ENTER_FRAME, enterFrame);
function enterFrame(e:Event):void
{
    if(!currentBlock)
    {
        if(queue.length > 0)
        {
            // Select and remove first block to play.
            currentBlock = queue[0];
            queue.splice(0, 1);

            gotoAndPlay(currentBlock.x);
        }
    }
    else
    {
        play();

        if(currentBlock.y == currentFrame)
        {
            // Got to the end of the block, end it.
            currentBlock = null;
            stop();
        }
    }
} 
```

这将让你这样做：

```
// Demo:
queueBlock(17, 24);
queueBlock(10, 16); 
```

# mysql - 仅当表 A 中不可用时才从表 B 将记录插入表 A

> ID：11388213
> 
> 赞同：0
> 
> 时间：2012-07-09T01:41:16.587
> 
> 标签：mysql

我有两张表.. 表 A 和表 B (MySQL)

```
Table-A has id,value,name..    and 
Table-B has id,name,email,address.. 
```

我喜欢将表 B 中的“id”作为表 A 中的“值”插入，仅当表 A 中的“id”（TableB）不作为“值”存在时

那我可以用这个吗

```
INSERT INTO `TableA`( `value`,  `name`) 
SELECT id,name FROM TableB 
WHERE TableB.id NOT IN TableA.value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:47:24.323

您需要使用以下代码：

```
WHERE NOT EXISTS (select * from TableA where TableA.value = TableB.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:14:21.007

您可以使用此解决方案：

```
INSERT INTO TableA (value, name)
SELECT b.id, b.name
FROM TableB b
LEFT JOIN TableA a ON b.id = a.value
WHERE a.id IS NULL 
```

# json - MVC3级联下拉和Json对象

> ID：11388214
> 
> 赞同：1
> 
> 时间：2012-07-09T01:41:22.673
> 
> 标签：json, asp.net-mvc-3, drop-down-menu

我已经用 MVC3 实现了我的级联下拉列表，几乎完全按照

[使用 C# 在 ASP.NET MVC 3 中创建级联下拉列表的最简单方法](https://stackoverflow.com/questions/5497524/easiest-way-to-create-a-cascade-dropdown-in-asp-net-mvc-3-with-c-sharp)

我的观点是

```
<script type="text/javascript">
    $(function () {
        $('#CategoryID').change(function () {
            var selectedCategoryId = $(this).val();
            $.getJSON('@Url.Action("SelectCategory")', { categoryid: selectedCategoryId }, function (subcategories) {
                var subsSelect = $('#SubCategoryID');
                subsSelect.empty();
                $.each(subcategories, function (index, subcat) {
                    subsSelect.append(
                        $('<option/>')
                            .attr('value', subcat.SubCategoryID)
                            .text(subcat.SubCategoryName)
                    );
                });
            });
        });
    });
</script> 
```

我的控制器有那个

```
public ActionResult SelectCategory(int categoryid)
{
    var subs = db.SubCategories.Where(s => s.CategoryID == categoryid).ToList();
    return Json(subs, JsonRequestBehavior.AllowGet);
} 
```

那没有用。

但是，当我通过以下方式修改控制器时它起作用了：

```
public class JsonSubCat
{
    public int SubCategoryID { get; set; }
    public string SubCategoryName { get; set; }
}

public ActionResult SelectCategory(int categoryid)
{
    var subs = db.SubCategories.Where(s => s.CategoryID == categoryid).ToList();
    var testsubs = new List<JsonSubCat>();

    foreach (var sub in subs)
    {
        testsubs.Add(new JsonSubCat() { SubCategoryID = sub.SubCategoryID, SubCategoryName = sub.SubCategoryName });
    }

    return Json(testsubs, JsonRequestBehavior.AllowGet);
} 
```

看起来像是将我从数据源获得的实体转换为正确格式的问题。实现这一点的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:25:28.133

> 实现这一点的正确方法是什么？

我怀疑您的域实体中有循环引用。JSON 序列化程序不支持这一点，因为 JSON 格式不支持循环结构。

您不应将域模型传递给视图。请停止这样做并使用视图模型。`subs`当视图只关心文本和值的集合时，为什么要将整个实体传递给视图？这就是下拉列表所需要的。

所以使用视图模型，更不用说你已经写了一个 =>`JsonSubCat`很棒的类：

```
public ActionResult SelectCategory(int categoryid)
{
    var subs = db.SubCategories
        .Where(s => s.CategoryID == categoryid)
        .ToList()
        .Select(x => new JsonSubCat
        {
            SubCategoryID = x.SubCategoryID,
            SubCategoryName = x.SubCategoryName
        });
    return Json(subs, JsonRequestBehavior.AllowGet);
} 
```

# javascript - 网页开发效果

> ID：11388219
> 
> 赞同：0
> 
> 时间：2012-07-09T01:42:25.167
> 
> 标签：javascript, ajax, ruby-on-rails-3, jquery

我对 Web 开发比较陌生。我在 www.trello.com 上冲浪，很好奇如何实现他们的列表效果。请观看此[视频](http://youtu.be/VC4zUeAuT-k)了解更多详情。

这是 AJAX 吗？如果是这样，我怎么能用 JQuery 做到这一点？

是否有关于如何创建相同效果的文章/教程？这些将不胜感激！

我想构建一个使用这些类似效果的 Rails 3.2 web 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:45:14.680

这与 ajax 无关（尽管它可能在后台使用一些 ajax 来做其他事情）。JQuery 具有拖放效果： http: [//jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/) - 查看他们的文档并阅读一些教程！祝你好运！:)

有许多插件和其他东西：[http ://www.tripwiremagazine.com/2012/04/jquery-drag-drop-plugins.html](http://www.tripwiremagazine.com/2012/04/jquery-drag-drop-plugins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:20:51.580

为了完整起见，Trello 的开发堆栈在他们的博客上完全公开：

[http://blog.fogcreek.com/the-trello-tech-stack/](http://blog.fogcreek.com/the-trello-tech-stack/)

它的组合：CoffeeScript、Backbone.js、HTML5 pushState、Mustache、CloudFront CDN、AJAX、WebSockets、Socket.io（修改）、node.js、HAProxy、Redis、MongoDB

# php - $_SERVER['SERVER_NAME'] 可以伪造/伪造吗？

> ID：11388223
> 
> 赞同：8
> 
> 时间：2012-07-09T01:43:16.773
> 
> 标签：php, http-referer, server-name

PHP 变量 $_SERVER['SERVER_NAME'] 可以伪造或伪造吗？我正计划将其用作表单发布的安全措施。我会检查以确保该变量是我的站点名称（www.example.com）。我知道 HTTP_REFERRER 可以伪造，但我不确定这个。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T01:53:48.250

实际上 $_SERVER['SERVER_NAME'] 可能会受到客户端浏览器发送的内容的影响......请参阅[http://shiflett.org/blog/2006/mar/server-name-versus-http-host](http://shiflett.org/blog/2006/mar/server-name-versus-http-host)以了解有关的全面调查问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T01:55:50.433

访客通常无法伪造它。但我怀疑您会想要强制执行某个 SERVER_NAME 来许可脚本，以便它们只能由特定域使用。在这种情况下，答案是肯定的，**这个变量肯定是可以伪造**的。

原因很简单，服务器设置了这个值。在大多数情况下，您会将 PHP 作为 Apache 模块运行，但有时您有其他 Apache 模块，有时您使用 NGINX 或 IIS 在 CGI 模式下运行 PHP，有时您甚至将 PHP 作为 CLI 运行为自定义的子进程- 构建部署在云中的服务器。这些服务器将负责设置该变量。

另外，总是有手动分配。

```
 $_SERVER['SERVER_NAME'] = ... // this can go above all your scripts 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T01:44:22.183

persay，它不能被伪造，但它*总是*会返回您的站点名称。如果您从同一个脚本运行多个站点，例如，根据提供的主机名使用不同的数据库，这将很有用。

[PHP文档](http://php.net/manual/en/reserved.variables.server.php)说：

```
'SERVER_NAME'
    The name of the server host under which the current script is executing. If the script is running on a virtual host, this will be the value defined for that virtual host. 
```

# c# - 流畅的 NHibernate 词典 使用 3 个表

> ID：11388227
> 
> 赞同：2
> 
> 时间：2012-07-09T01:43:47.257
> 
> 标签：c#, nhibernate, fluent-nhibernate

我正在尝试将多对多表结构映射到字典，其中键在一个表中，值在另一个表中。

```
table Rows [Row_ID]

table Columns [Column_ID, Column_Name]

table Cells [Cell_ID, Row_ID, Column_Id, Cell_Value]

public class Row {
    public Row() {
        this.Cells = new Dictionary<string, Cell>();
    }

    public virtual long Id { get; protected set; }

    public virtual IDictionary<string, Cell> Cells { get; set; }
}

public class RowMap : ClassMap<Row> {
    public RowMap() {
        Table("Rows");
        Id(m => m.Id, "Row_Id").GeneratedBy.Identity();
        HasManyToMany<Column>(m => m.Cells).Table("Cells")
            .ParentKeyColumn("Row_Id").ChildKeyColumn("Column_Id")
            .AsMap<string>("Column_Name").Inverse().Cascade.All();
    }
}

public class Column {
    public virtual long Id { get; protected set; }

    public virtual string Name { get; set; }
}

public class ColumnMap : ClassMap<Column> {
    public ColumnMap() {
        Table("Columns");
        Id(m => m.Id, "Column_Id").GeneratedBy.Identity();
        Map(m => m.Name, "Column_Name").Not.Nullable();
    }
}

public class Cell {
    public virtual long Id { get; protected set; }

    public virtual string Value { get; set; }

    public virtual Column Column { get; set; }

    public virtual Row Row { get; set; }
}

public class CellMap : ClassMap<Cell> {
    public CellMap() {
        Id(m => m.Id, "Cell_Id").GeneratedBy.Identity();
        Map(m => m.Value, "Cell_Value").Not.Nullable();
        References(m => m.Column, "Column_Id");
        References(m => m.Row, "Row_Id");
    }
} 
```

一切都正确编译，但是当我尝试访问 Cells 集合时，出现以下错误：

```
could not initialize a collection: [Sandbox.Row.Cells#1][SQL: SELECT cells0_.Row_Id as
Row1_1_, cells0_.Column_Id as Column2_1_, cells0_.Column_Name as Column3_1_,
column1_.Column_Id as Column1_8_0_, column1_.Column_Name as Column2_8_0_ FROM Cells
cells0_ left outer join Columns column1_ on cells0_.Column_Id=column1_.Column_Id WHERE
cells0_.Row_Id=?] 
```

查看错误消息后，我看到查询正在尝试将键“Column_Name”作为 Cells 表中的字段而不是 Columns 表来访问。

关于如何告诉 NHibernate 将其映射到正确的表的任何想法，或者我试图做的事情是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:55:14.593

在hasmanytomany（中间表：Cells，EntityTable of Cells：Cells）中从未提到过columns表，因此根本无法引用它。我目前看到的唯一选择是更改字典开始。

```
public virtual IDictionary<Column, Cell> Cells { get; private set; }

HasMany(m => m.Cells)
    .Table("Cells")
    .KeyColumn("Row_Id")
    .AsEntityMap("Column_id")
    .Inverse().Cascade.All(); 
```

您可以保存从 column.Name 到列实例的全局字典，以保存往返或将列名非规范化到单元格表中。

# jquery - 动态刷新许多单独元素的更简单方法

> ID：11388231
> 
> 赞同：1
> 
> 时间：2012-07-09T01:44:36.493
> 
> 标签：jquery

有没有办法使用 jQuery .load(page.php) 函数让我有选择地选择 page.php 的一部分？例如，像这样：

```
$('#div1').load('page.php#1'); //Puts div id = 1 into div1
$('#div2').load('page.php#2'); //Puts div id = 2 into div2
... 
```

如果我解释用例，我的问题可能会更有意义——我目前有一个表格，其中包含几个从各种 php 函数中提取数据的单元格。这些数据会随着时间而变化，因此我想动态地重新加载该表。

不过有一个问题 - 表格元素还包含文本输入表单。如果我重新加载整个表，用户将丢失输入到表单中的数据和表单上的焦点。即使我通过将它们保存在临时变量中来保留这些东西，光标仍会重置到表单的开头。我宁愿不为每个数据元素创建一个页面，所以我想知道是否有一种方法可以选择我正在加载的页面的哪些部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:48:00.500

`$.get`使用 jQuery 解析/推送您想要的内容有什么问题？

```
$.get('/my/page.html',function(data){
  $('#one').empty().append($('#one',data));
  $('#two').empty().append($('#two',data));
  // ...
}); 
```

此外，FWIW，以数值开头的 ID 无效。你需要从一封信开始。

# jquery - 当我点击它时，我的部分图像消失了

> ID：11388232
> 
> 赞同：1
> 
> 时间：2012-07-09T01:44:39.190
> 
> 标签：jquery, html, image, accordion, jquery-ui-accordion

该站点基于 jquery 手风琴。当我单击手风琴中的第一个链接（啁啾...）时，小鸟图像的一部分消失了一秒钟然后重新出现。你知道为什么吗？

[http://imip.rvadv.com/index2.html#home](http://imip.rvadv.com/index2.html#home)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:46:48.550

它正在消失，因为动画将 an`overflow: hidden;`应用于它正在制作动画的容器。

给我一秒钟，我看看能不能帮你解决。

```
... 
```

~~好的，我修复它的方法是将鸟图像作为背景`#wrapper`~~

想到了更好的办法。

更改`#wrapper`to的宽度并为您的手风琴项目`920px`添加左右填充（我们添加到总宽度的 60px 的一半）。这样，您的鸟图像将包含在其中，因此不会被溢出将其在动画中切断。`li``30px``li`

注意：动画有点偏离，发生了一些奇怪的跳动，但出于此目的，我忽略了这一点，只是研究了如何使鸟图像不被切断。

`:)`

# wpf - 将 self 作为 CommandParameter 传递？

> ID：11388241
> 
> 赞同：2
> 
> 时间：2012-07-09T01:47:19.640
> 
> 标签：wpf, xaml, .net-4.0

我正在尝试将 TreeView 上的命令的 CommandParameter 绑定到 TreeView 本身的选定项，而不命名 TreeView。

代码：

```
<TreeView>
    <ACB:CommandBehaviourCollection.Behaviours>
        <ACB:BehaviourBinding Event="SelectedItemChanged" Command="{Binding CmdSelectedItemChanged}" CommandParameter="{Binding SelectedItem, Source={RelativeSource Mode=Self}}"></ACB:BehaviourBinding>
    </ACB:CommandBehaviourCollection.Behaviours>
</TreeView> 
```

我在上面的例子中使用了[AttachedCommandBehaviour 。](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)

有人可以解释我如何实现这一目标吗？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T09:06:24.800

尝试以下：

```
<ACB:BehaviourBinding 
   Event="SelectedItemChanged" 
   Command="{Binding CmdSelectedItemChanged}"  
   CommandParameter="{Binding 
        Path = PlacementTarget
        RelativeSource={RelativeSource FindAncestor, 
        AncestorType={x:Type TreeView}}}" /> 
```

# php - Yii 将数据库连接限制为只读

> ID：11388242
> 
> 赞同：6
> 
> 时间：2012-07-09T01:47:19.853
> 
> 标签：php, yii

我有两个数据库连接，一个用于我的大部分应用程序数据，一个仅用于读取。

虽然我可以将我的数据库用户帐户设置为只允许读取，但还有其他人在管理这个系统，我希望在应用程序级别有一些冗余，以绝对防止使用 Yii 的标准 ActiveRecord 类进行意外写入。

在论坛上找到了一些信息，但想知道是否有人可以确认这是一种好方法和/或建议另一种方法。

```
public function onBeforeSave($event)
{
   $this->db = Yii::app()->masterDb;
}

public function onAfterSave($event)
{
   $this->db = Yii::app()->db;
} 
```

[http://www.yiiframework.com/forum/index.php/topic/5712-active-record-save-to-different-server-load-balancefail-over-setup/](http://www.yiiframework.com/forum/index.php/topic/5712-active-record-save-to-different-server-load-balancefail-over-setup/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T01:10:02.030

根据您提供给 Yii 论坛的链接，有一个扩展程序可以为您处理这个问题： [http ://www.yiiframework.com/extension/dbreadwritesplitting](http://www.yiiframework.com/extension/dbreadwritesplitting)

如果你有很多 AR 模型，我可能会先研究一下。您可以选择行为路线（如该论坛帖子中所建议的那样）作为另一种选择。

但无论你做什么，你都会想要覆盖 beforeSave / afterSave 而不是 onBeforeSave / onAfterSave。这些方法用于触发事件，而不仅仅是运行您自己的特殊代码。而且，根据[另一个论坛帖子](http://www.yiiframework.com/forum/index.php/topic/5712-active-record-save-to-different-server-load-balancefail-over-setup/page__view__findpost__p__30198)，您需要使用静态调用设置您的 AR db 变量。所以 Sergey 的代码实际上应该是：

```
class MyActiveRecord extends CActiveRecord
{
    ...
    public function beforeSave()
    {
       // set write DB
       self::$db = Yii::app()->masterDb;

       return parent::beforeSave();
    }

    public function afterSave()
    {
       // set read db 
       self::$db = Yii::app()->db;

       return parent::beforeSave();
    }
    ...
}

class User extends MyActiveRecord {}
class Post extends MyActiveRecord {}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T06:33:35.997

```
class MyActiveRecord extends CActiveRecord
{
...
public function onBeforeSave($event)
{
   // set write DB
   $this->db = Yii::app()->masterDb;
}

public function onAfterSave($event)
{
   // set read db 
   $this->db = Yii::app()->db;
}
...
}

class User extends MyActiveRecord {}
class Post extends MyActiveRecord {}
... 
```

你必须尝试这种方式。但在我看来，这还不够好。我认为会有一些错误或缺陷。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T22:08:37.053

鉴于您的奴隶无法与主人更新的情况，您可能会遇到问题。因为在更新数据后，您可能会从旧版本中读取。

虽然论坛中给定的方法非常干净，并且由主要是 Yii 向导的作者编写。我也有另一种选择。您可以覆盖 AR 中的 getDbConnection() 方法，例如

```
public function getDbConnection(){
  if (Yii::app()->user->hasEditedData()) { # you've got to write something like this(!)
     return Yii::app()->masterDb;
  } else {
     return Yii::app()->db;
  }
} 
```

但是在切换数据库连接的时候还是要小心的。

# java - 我可以用 Java 制作 MS-SQL 过程吗？

> ID：11388245
> 
> 赞同：0
> 
> 时间：2012-07-09T01:47:32.303
> 
> 标签：java, sql-server, stored-procedures

我正在尝试用 Java 制作一个 sql 过程。

我必须用Java制作程序的原因是，程序一旦创建就会被锁定。

因此，当我需要进行一些修改时，我必须删除整个程序并重新创建一个

Java中的过程。

这可能吗？还是我应该找到不同的方法来做到这一点？

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:06:32.633

As long as the user that your code is using to connect to the DB has the correct permissions then you should just be able to execute the normal SQL to create the SP. Nothing special needed to do it from Java. Here are the permissions you need:

Permissions Requires CREATE PROCEDURE permission in the database and ALTER permission on the schema in which the procedure is being created.

An example of the SQL is:

```
USE AdventureWorks2012;
GO
CREATE PROCEDURE HumanResources.uspGetEmployeesTest2 
    @LastName nvarchar(50), 
    @FirstName nvarchar(50) 
AS 

    SET NOCOUNT ON;
    SELECT FirstName, LastName, Department.
    FROM HumanResources.vEmployeeDepartmentHistory
    WHERE FirstName = @FirstName AND LastName = @LastName
    AND EndDate IS NULL;
GO 
```

**Warning** Let me also say that this is a generally bad idea to run an application this way. It's just so easy for something to go terribly wrong and your application does something crazy like delete a whole table. Just be careful with this especially if your application gets any input from a user. This is risky.

# jquery - 如果高于 x 像素（jQuery），则使用调整大小来获取脚本

> ID：11388247
> 
> 赞同：0
> 
> 时间：2012-07-09T01:47:39.653
> 
> 标签：jquery, load, resize, window, getscript

所以我对这个脚本有疑问。它基本上是在任何调整大小事件上加载脚本。

```
I have it working if lets say...
- User has window size above 768 (getScipt() and content by .load() in that script)
- Script will load (and content)
- User for some reason window size goes below 768 (css hides #div)
- User re-sizes again above 768, And does not load the script again! (css displays the div) 
```

伟大的。工作正常。

```
Now.. (for some cray reason)
- User has window size below 768 (Does NOT getScript() or nothing)
- User re-sizes above 768 and stops at any px (getScript and content)
- User re-sizes again anything above 768 (It getScript AGAIN) 
```

我需要它只获取一次脚本。我从这里使用了一些代码

[jQuery：如何动态检测窗口宽度？](https://stackoverflow.com/questions/9720294/jquery-how-to-detect-window-width-on-the-fly)

（编辑 - 我发现了这个，他遇到了加载脚本一次的同样问题。）

[$(window).resize 中的函数问题 - 使用 jQuery](https://stackoverflow.com/questions/7238377/problem-with-function-within-window-resize-using-jquery?rq=1) 和其他我丢失了链接：/

当我第一次发现这个问题时，我正在使用类似的东西，然后我添加了 allcheckWidth() 来解决问题。但事实并非如此。

```
var $window = $(window);
function checkWidth() {
    var windowsize = $window.width();
////// LETS GET SOME THINGS IF IS DESKTOP 
var $desktop_load = 0;
    if (windowsize >= 768) {
    if (!$desktop_load) {

            // GET DESKTOP SCRIPT TO KEEP THINGS QUICK
            $.getScript("js/desktop.js", function() { 
            $desktop_load = 1;
    });

    } else {
    }
    }
////// LETS GET SOME THINGS IF IS MOBILE
    if (windowsize < 768) { 
    } 
}
checkWidth();

function allcheckWidth () {
var windowsize = $window.width();
//// IF WINDOW SIZE LOADS < 768 THEN CHANGES >= 768 LOAD ONCE
var $desktop_load = 0;
    if (!$desktop_load) {
    if (windowsize < 768) {
            if ( $(window).width() >= 768) { 

        $.getScript("js/desktop.js", function() { 
            $desktop_load = 1;
        });

            }
    }   
        }

}
$(window).resize(allcheckWidth); 
```

现在我使用这样的东西更有意义？

```
$(function() {   
    $(window).resize(function() {
var $desktop_load = 0;
    //Dekstop
    if (window.innerWidth >= 768) {
    if (!$desktop_load) {
            // GET DESKTOP SCRIPT TO KEEP THINGS QUICK
            $.getScript("js/desktop.js", function() { 
            $desktop_load + 1;
    });
    } else {
    }
    }
if (window.innerWidth < 768) {
    if (window.innerWidth >= 768) {
    if (!$desktop_load) {
                // GET DESKTOP SCRIPT TO KEEP THINGS QUICK
                $.getScript("js/desktop.js", function() { 
        $desktop_load + 1;
        });
    } else {
        }
    }
    }
    }) .resize(); // trigger resize event
}) 
```

Ty 以备将来响应。

编辑-举个例子，在desktop.js中，我有一个在“abc”内容之前加载的gif，由.load（）插入。调整大小时，此 gif 将显示，并且 desktop.js 中的 .load() 将再次触发。因此，如果 getScript 只被调用一次，它不应该在 desktop.js 中再次执行任何操作。令人困惑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:28:54.157

我将从 jQuery 文档中复制我的答案：

> 默认情况下，`$.getScript()`将缓存设置设置为 false。这会将时间戳查询参数附加到请求 URL，以确保浏览器在每次请求时下载脚本。您可以通过使用全局设置缓存属性来覆盖此功能 `$.ajaxSetup():`
> 
> ```
> $.ajaxSetup({
>   cache: true
> }); 
> ```

如果你让浏览器缓存检索到的脚本，这应该不是问题，但要确保它没有得到它已经得到的脚本，你可以设置一个标志：

```
$(function() {   
    var gotscript=false;
    $(window).resize(function() {
        if (window.innerWidth >= 768) {
            if (!gotscript) {
                $.getScript("js/desktop.js", function() { 
                    gotscript=true;
                });
            }
        }
        if (window.innerWidth < 768) {
            if (window.innerWidth >= 768) {
                if (!gotscript) {
                    $.getScript("js/desktop.js", function() { 
                        gotscript=true;
                    });
                }
            }
        }
    }).resize(); // trigger resize event
}); 
```

如您所见，标志的初始状态必须设置在调整大小事件之外！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:39:09.360

所以我昨晚解决了这个问题。我在另一个问题上回答了

这里[https://stackoverflow.com/a/11400128/1065573](https://stackoverflow.com/a/11400128/1065573)

# objective-c - UIView 在所有不随屏幕旋转的东西前面？

> ID：11388248
> 
> 赞同：1
> 
> 时间：2012-07-09T01:47:55.457
> 
> 标签：objective-c, ios, uiview, rotation

我有这个代码：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    imageView.image = [UIImage imageNamed:@"image.png"];

    UIApplication *app = [UIApplication sharedApplication];

    [app addSubViewOnFrontWindow:imageView]; 
```

...

```
- (void)addSubViewOnFrontWindow:(UIView *)view {
    int count = [self.windows count];
    UIWindow *w = [self.windows objectAtIndex:count - 1];
    [w addSubview:view];
} 
```

问题是，当应用程序旋转时，前面的视图不会旋转。它只是保持纵向。

我怎样才能让它与设备的其余部分一起正常旋转？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:44:57.417

我没试过这个，但`UIWindow`有一个属性[`rootViewController`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html)

> 窗口的根视图控制器。
> 
> `@property(nonatomic, retain) UIViewController *rootViewController`
> 
> **讨论**
> 根视图控制器提供窗口的内容视图。将视图控制器分配给此属性（以编程方式或使用 Interface Builder）将视图控制器的视图安装为窗口的内容视图。如果窗口具有现有的视图层次结构，则在安装新视图之前删除旧视图。
> 
> 此属性的默认值为 nil。
> 
> **可用性**
> 适用于 iOS 4.0 及更高版本。
> 
> **在**
> UIWindow.h中声明

由于您应该提供此根视图控制器，因此您应该能够将其添加到 rootViewContoller 的视图中，并正确处理 aout 旋转。

* * *

另一种解决方案可能是，您在呈现视图时将窗口与自定义窗口交换，并使用另一个视图控制器。您可以在[TSAlertView](https://github.com/TomSwift/TSAlertView/blob/master/TSAlertView/TSAlertView.m)的实现中看到这个技巧。

```
- (void) show
{
    [[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate:[NSDate date]];

    TSAlertViewController* avc = [[[TSAlertViewController alloc] init] autorelease];
    avc.view.backgroundColor = [UIColor clearColor];

    // $important - the window is released only when the user clicks an alert view button
    TSAlertOverlayWindow* ow = [[TSAlertOverlayWindow alloc] initWithFrame: [UIScreen mainScreen].bounds];
    ow.alpha = 0.0;
    ow.backgroundColor = [UIColor clearColor];
    ow.rootViewController = avc;
    [ow makeKeyAndVisible];

    // fade in the window
    [UIView animateWithDuration: 0.2 animations: ^{
        ow.alpha = 1;
    }];

    // add and pulse the alertview
    // add the alertview
    [avc.view addSubview: self];
    [self sizeToFit];
    self.center = CGPointMake( CGRectGetMidX( avc.view.bounds ), CGRectGetMidY( avc.view.bounds ) );;
    self.frame = CGRectIntegral( self.frame );
    [self pulse];

    if ( self.style == TSAlertViewStyleInput )
    {
        [self layoutSubviews];
        [self.inputTextField becomeFirstResponder];
    }
} 
```

和

```
@interface TSAlertOverlayWindow : UIWindow
{
}
@property (nonatomic,retain) UIWindow* oldKeyWindow;
@end

@implementation  TSAlertOverlayWindow
@synthesize oldKeyWindow;

- (void) makeKeyAndVisible
{
    self.oldKeyWindow = [[UIApplication sharedApplication] keyWindow];
    self.windowLevel = UIWindowLevelAlert;
    [super makeKeyAndVisible];
}

- (void) resignKeyWindow
{
    [super resignKeyWindow];
    [self.oldKeyWindow makeKeyWindow];
}

//

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:04:04.410

添加一个带有新 rootviewController 的新窗口，并订阅它

```
[[NSNotificationCenter defaultCenter] addObserver:(id) selector:(SEL) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T01:50:57.250

Windows 不会自动旋转。曾经。您应该将此 imageView 添加到 UIViewController 的视图中，因为 UIViewController 已内置自动旋转。

如果您想使用 UIWindow 来保存所有视图，则需要编写自己的转换代码来处理旋转。

# mysql - 浮点数的mysql最小值列

> ID：11388250
> 
> 赞同：2
> 
> 时间：2012-07-09T01:48:10.810
> 
> 标签：mysql

是否可以使用mysql函数找到一列浮点数的最小值？假设我有下表：

> 编号 | 值
> a | 24.88
> 一个 | 119.99

如果我尝试：

`SELECT MIN(value) FROM [table name] GROUP BY id;`

mysql 返回：
119.99

在用不同的浮点数测试之后，我相信是这种情况，因为 mysql 在每个字符串“1”和“2”中取第一个字符，然后根据哪个字符更小来选择一个最小值。

我已经阅读了这个论坛和其他人试图找到答案，但似乎没有人提出这个问题。

我应该提到我也尝试过 CEIL(value) 但该函数似乎也有一些错误，我更愿意将数字保持为浮点数而不是整数。

感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:52:14.583

看起来该列被存储为基于字符的数据类型。您可以通过以下两种方式之一解决此问题：

1.  将列类型更改为数字类型
2.  更改查询以在值周围添加 CAST：`MIN(CAST(value AS DECIMAL))`

列更改可能如下所示：

```
ALTER TABLE my_table MODIFY COLUMN value double; 
```

而且，据我所知，MySQL*会*尝试为您转换数据。请参阅[此处的注释](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html#id981659)，其中指出它“*尝试*”。

# autocomplete - 谷歌自动完成 - 输入选择

> ID：11388251
> 
> 赞同：91
> 
> 时间：2012-07-09T01:48:14.580
> 
> 标签：autocomplete

我为 HTML 表单的文本字段设置了**Google 自动完成功能，并且运行良好。**

但是，当出现建议列表时，您使用箭头滚动并使用 enter 选择，它会提交表单，尽管仍有要填写的框。如果您单击选择建议，它工作正常，但按**enter**提交.

我该如何控制这个？如何停止输入提交表单，而是从自动完成中选择建议？

谢谢！{S}

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-08-03T12:09:42.260

当输入被击中时，您可以使用`preventDefault`停止提交的表单，我使用了这样的东西：

```
 var input = document.getElementById('inputId');
  google.maps.event.addDomListener(input, 'keydown', function(event) { 
    if (event.keyCode === 13) { 
        event.preventDefault(); 
    }
  }); 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-09-05T06:24:47.353

使用 Google 事件处理似乎是正确的解决方案，但它对我不起作用。这个 jQuery 解决方案对我有用：

```
$('#inputId').keydown(function (e) {
  if (e.which == 13 && $('.pac-container:visible').length) return false;
}); 
```

`.pac-container`是保存自动完成匹配的 div。这个想法是，当匹配可见时，Enter 键将只选择活动匹配。但是当匹配项被隐藏（即选择了一个地方）时，它将提交表单。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-02-06T19:31:47.927

我合并了@sren 和@mmalone 的前两个答案来产生这个：

```
var input= document.getElementById('inputId');
google.maps.event.addDomListener(input, 'keydown', function(e) { 
    if (e.keyCode == 13 && $('.pac-container:visible').length) { 
        e.preventDefault(); 
    }
}); 
```

在页面上完美运行。防止在建议容器 (.pac-container) 可见时提交表单。所以现在，当用户按下回车键时，自动完成下拉菜单中的一个选项被选中，他们必须再次按下它才能提交表单。

我使用此解决方法的主要原因是因为我发现如果通过输入键选择选项后立即发送表单，则纬度和经度值没有足够快地传递到其隐藏的表单元素中。

所有归功于原始答案。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-10-26T23:09:07.420

这个对我有用：

```
google.maps.event.addDomListener(input, 'keydown', e => {

  // If it's Enter
  if (e.keyCode === 13) {

    // Select all Google's dropdown DOM nodes (can be multiple)
    const googleDOMNodes = document.getElementsByClassName('pac-container');

    // Check if any of them are visible (using ES6 here for conciseness)
    const googleDOMNodeIsVisible = (
      Array.from(googleDOMNodes).some(node => node.offsetParent !== null)
    );

    // If one is visible - preventDefault
    if (googleDOMNodeIsVisible) e.preventDefault();

  }

}); 
```

可以轻松地从 ES6 转换为任何与浏览器兼容的代码。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-30T09:40:51.577

我对@sren 的回答的问题是它总是阻止提交事件。我喜欢@mmalone 的回答，但它的行为是随机的，就像有时当我点击`ENTER`选择位置时，处理程序在容器被隐藏后运行。所以，这就是我最终做的

```
var location_being_changed,
    input = document.getElementById("js-my-input"),
    autocomplete = new google.maps.places.Autocomplete(input),
    onPlaceChange = function () {
        location_being_changed = false;
    };

google.maps.event.addListener( this.autocomplete,
                               'place_changed',
                               onPlaceChange );

google.maps.event.addDomListener(input, 'keydown', function (e) {
    if (e.keyCode === 13) {
        if (location_being_changed) {
            e.preventDefault();
            e.stopPropagation();
        }
    } else {
        // means the user is probably typing
        location_being_changed = true;
    }
});

// Form Submit Handler
$('.js-my-form').on('submit', function (e) {
    e.preventDefault();
    $('.js-display').text("Yay form got submitted");
});
```

```
<p class="js-display"></p>
<form class="js-my-form">
    <input type="text" id="js-my-input" />
    <button type="submit">Submit</button>
</form>

<!-- External Libraries -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
```

该标志确保如果位置正在更改并且用户点击回车，则事件被阻止。最终，标志`false`由谷歌地图的`place_changed`事件设置，然后允许在按下回车键时提交表单。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-17T20:57:15.263

这是一个对我很有效的简单代码（不使用 jquery）。

```
const googleAutcompleteField = this.renderer.selectRootElement(this.elem.nativeElement);
this.selectOnEnter(googleAutcompleteField); 
```

这段代码遵循上面的代码，用于实现谷歌地图自动完成（有或没有这个问题中寻求的 Enter 键功能）：

```
this.autocomplete = new google.maps.places.Autocomplete(googleAutcompleteField, this.googleMapsOptions);
this.autocomplete.setFields(['address_component', 'formatted_address', 'geometry']);
this.autocomplete.addListener('place_changed', () => {
  this.zone.run(() => {
    this.googleMapsData.emit([this.autocomplete.getPlace()]);
  })
}) 
```

selectOnEnter（在上面的第一段代码中调用）定义：

```
selectOnEnter(inputField) {
  inputField.addEventListener("keydown", (event) => {
    const selectedItem = document.getElementsByClassName('pac-item-selected');
    if (event.key == "Enter" && selectedItem.length != 0) {
      event.preventDefault();
    }
  })
} 
```

此代码使谷歌地图自动完成字段选择用户使用向下箭头键选择的任何项目。一旦用户按下 Enter 键选择了一个选项，什么也不会发生。用户必须再次按 Enter 才能触发 onSubmit() 或其他命令

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-05T15:32:15.753

你可以在香草中做到这一点：

```
element.addEventListener('keydown', function(e) {
    const gPlaceChoices = document.querySelector('.pac-container')
    // No choices element ? 
    if (null === gPlaceChoices) {
        return
    }
    // Get choices visivility
    let visibility = window.getComputedStyle(gPlaceChoices).display
    // In this case, enter key will do nothing
    if ('none' !== visibility && e.keyCode === 13) {
        e.preventDefault();
     }
 }) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-31T04:55:57.160

我调整了 Alex 的代码，因为它在浏览器中损坏了。这对我来说很完美：

```
google.maps.event.addDomListener(
    document.getElementById('YOUR_ELEMENT_ID'),
    'keydown',
    function(e) {
          // If it's Enter
          if (e.keyCode === 13) {
            // Select all Google's dropdown DOM nodes (can be multiple)
            const googleDOMNodes = document.getElementsByClassName('pac-container');
            //If multiple nodes, prevent form submit.
            if (googleDOMNodes.length > 0){
                e.preventDefault();
            }
            //Remove Google's drop down elements, so that future form submit requests work.
            removeElementsByClass('pac-container');
          }
    }
);

function removeElementsByClass(className){
    var elements = document.getElementsByClassName(className);
    while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-05T18:59:49.747

我已经尝试了上面的简短答案，但它们对我不起作用，而我不想尝试的长答案，所以我创建了以下代码，对我来说效果很好。[看演示](https://jsbin.com/wipaze/edit?html,output)

假设这是您的表单：

```
<form action="" method="">
      <input type="text" name="place" id="google-places-searchbox" placeholder="Enter place name"><br><br>
      <input type="text" name="field-1" placeholder="Field 1"><br><br>
      <input type="text" name="field-2" placeholder="Field 2"><br><br>
      <button type="submit">Submit</button>
</form> 
```

然后下面的javascript代码将解决这个问题：

```
var placesSearchbox = $("#google-places-searchbox");

placesSearchbox.on("focus blur", function() {
    $(this).closest("form").toggleClass('prevent_submit');
});

placesSearchbox.closest("form").on("submit", function(e) {
    if (placesSearchbox.closest("form").hasClass('prevent_submit')) {
        e.preventDefault();
        return false;
    }
}); 
```

这是完整代码在 HTML 页面中的样子（请注意，您需要将 替换为`YOUR_API_KEY`您的 google api 密钥）：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Prevent form submission when choosing a place from google places autocomplete searchbox</title>
</head>
<body>
  <form action="" method="">
      <input type="text" name="place" id="google-places-searchbox" placeholder="Enter place name"><br><br>
      <input type="text" name="field-1" placeholder="Field 1"><br><br>
      <input type="text" name="field-2" placeholder="Field 2"><br><br>
      <button type="submit">Submit</button>
  </form>

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <!-- Google Maps -->
  <!-- Note that you need to replace the next YOUR_API_KEY with your api key -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"
     async defer></script>
  <script>
    var input = document.getElementById("google-places-searchbox");
    var searchBox = new google.maps.places.SearchBox(input);

    var placesSearchbox = $("#google-places-searchbox");

    placesSearchbox.on("focus blur", function() {
        $(this).closest("form").toggleClass('prevent_submit');
    });

    placesSearchbox.closest("form").on("submit", function(e) {
        if (placesSearchbox.closest("form").hasClass('prevent_submit')) {
            e.preventDefault();
            return false;
        }
    });
  </script>
</body>
</html> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-25T11:36:49.513

```
$("#myinput").on("keydown", function(e) {
if (e.which == 13) {

if($(".pac-item").length>0)
        {
            $(".pac-item-selected").trigger("click");
}

} 
```

`$('.pac-item:first').trigger('click');`如果要选择第一个结果，请使用

# java - 通缉：有序二叉树输出法的递归公式

> ID：11388253
> 
> 赞同：6
> 
> 时间：2012-07-09T01:49:38.857
> 
> 标签：java, complexity-theory, recurrence, inorder

我在寻找这个java方法的递归公式时有点卡住了

```
void printInorder(Node<T> v) {
    if(v != null) {
        printInorder(v.getLeft());
        System.out.println(v.getData());
        printInorder(v.getRight());
    }
} 
```

一些标准：

*   它是一个完整的二叉树（每个内部结有 2 个孩子，每个叶子都具有相同的深度）
*   这棵树有 n 个结，复杂度为 O(n)

我必须找到与`depth h`树相关的递归公式`n knots`，作为额外的奖励，我需要从中推断出导致 O(n) 的显式公式。

现在，这就是我得到的：

```
d = depth of the tree
c = constant runtime for execution of the method itself
d = 1: T(n) = c
d = 3: T(n) = T(d=1) + T(d=2) + T(d=3) + c 
```

我使用示例 d = 3 来为自己澄清事情，我很难进一步分解它。我的假设是否正确？

* * *

编辑：下一次尝试

```
[x] = { x in real numbers : max([x]) <= x }, [x] rounded down to next full number
d = 1: T(d) = 1
d > 1: T(d) = 2^(h-1) * T(n/(2^(h-1)))

1: T(h)  = T(i = 0) + T(i = 1) + ... T(i = h-1)
2: T(h) <= (2^(0-1) + n/(2^(0-1))) + (2^(1-1) + n/(2^(1-1))) + ... + (2^(h-2) + n/(2^(h-2)))
3: T(h)  = n + n + ... + n
4: T(h)  = (h-1)n
5: T(h)  = O(n) 
```

因为树的每一层深度恰好包含 2^(h-1) 个节点，所以第 4 行中的 h 因子可​​以忽略，因为 n 与最终结果更相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:56:22.637

T(n) = T(n/2) + T(n/2) + 1

*   0 级有 1 次操作。

*   级别 1 有 2 个操作。

*   2 级有 4 个操作。

*   级别 k 有 2^k 次操作。

*   树的深度是 lgn。

1+2+...+2^lgn=
2^0+2^1+2^2+...+2^lgn=
(2^(lgn + 1)-1)/(2-1)= 2*2^lgn=
2n。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:42:30.107

这是使用平滑规则的替代方法（Levitin，*算法的设计与分析，第 2 版*，481-82），它允许将诸如此类的递归关系表示为指数。

![平滑规则的演示。](../Images/1d1fa1e988328f10b73c78fa62a599cc.png)

任何一种方法——前向或后向替换——都适用于这个问题。我发现在许多情况下向后替换更容易消化。

# android - 如何为 ASP.NET MVC3 创建 Web 服务

> ID：11388255
> 
> 赞同：2
> 
> 时间：2012-07-09T01:49:48.237
> 
> 标签：android, asp.net-mvc-3, web-services

我在 ASP.NET MVC3 中制作了应用程序，我想将应用程序与 Android 连接起来。
所以第一步是制作Web Service，它将与Android进行通信。
但我是这个领域的新手，我不知道如何开始。
有没有人有一些为 ASP.NET MVC3 应用程序制作 Web 服务的教程？
我还需要将 Android 与该 Web 服务连接的说明吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T01:59:21.410

您在这里确实有两个问题，不幸的是，Android 的问题有点过于宽泛，无法快速回答。所以......让我们解决你的第一个问题。

在 MVC 中，创建一个简单的 Web 服务非常容易。创建一个控制器并从中返回 JSON：

```
public class PersonController: Controller{

   public JsonResult Index(){
      var personList = GetFromDB();

      return Json(personList, JsonRequestBehavior.AllowGet);
   }

   [HttpPost, ActionName("Index")]
   public JsonResult CreatePerson(Person newPerson){
      var insertedPerson = InsertIntoDB(newPerson);

      return Json(insertedPerson);
   }

} 
```

现在，使用默认路由，您可以使用以下 URL 和适当的[HTTP Verb](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)简单地调用这些方法。

```
http://www.mydomain.com/person 
```

但是，值得一提的是，使用[ASP.Net WebAPI](http://www.asp.net/web-api)更容易做到这一点。

# c# - 如何将这些 PHP 函数转换为 C#？

> ID：11388256
> 
> 赞同：-9
> 
> 时间：2012-07-09T01:49:56.600
> 
> 标签：c#, php

在 PHP 中，您可以编写以下代码：

```
date_default_timezone_set("UTC"); 
```

我如何用 C# 编写这个？

另外，我该怎么写：

```
declare(ticks=1); 
```

在 C# 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T01:56:50.030

在 C# 中，时区内置于 DateTime 结构中，因此您不需要设置默认值。相反，当您操作 DateTime 实例时，您使用的是 UTC 版本的方法。例如，在构造函数中，您可以指定提供的日期是本地日期还是 UTC。

关于第二个问题，你只是想要的语法

```
 int ticks = 1; // or
    var ticks = 1; 
```

如果您尝试将时间段添加到日期，则应使用 TimeSpan，如下所示：

```
 TimeSpan ticks = new TimeSpan(1); 
```

# textmate - 文件不断在新窗口而不是选项卡中打开

> ID：11388258
> 
> 赞同：2
> 
> 时间：2012-07-09T01:50:24.723
> 
> 标签：textmate

我一直在谷歌和这里四处寻找，但我似乎无法弄清楚如何阻止 textmate 在新窗口中打开文件而不是在新选项卡中打开。

这是一个我很肯定的功能是可能的，因为我之前在 railscasts 视频中看过它：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:10:12.177

根据帮助文件：

> 在当前版本的 TextMate (1.5) 中，文件选项卡仅在创建项目时支持。幸运的是，创建项目很容易，即选择文件→新建项目（⌃⌘N）。

IOW，您必须创建一个新项目，然后您可以使用 Shift-⌘N 在其中创建基于选项卡的文件

# java - htmlview 太简单了吗？

> ID：11388259
> 
> 赞同：0
> 
> 时间：2012-07-09T01:50:39.400
> 
> 标签：java, android, html

这当然是一个非常基本的问题，如果这是众所周知的，请原谅。

我制作了一个 Java 应用程序，它生成一个要在本地查看的 HTML 文件“fileout”（本质上是一个带有缩略图的页面，可以用一些 javascript 打开更大的图像（不是真的需要）；缩略图和图像都在我的 sdcard 中）。然后我的应用程序以通常的方式调用打开页面的意图：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(fileout), "text/html");
startActivity(intent); 
```

问题是应用程序调用 HtmlView，它的行为过于严格：没有打开另一个图像的返回操作、可怕的标题栏（我想要全屏）、缩略图的渲染效果不佳等等。所以我的问题是：

有没有办法配置 Htmlview？它的可配置性如何？它了解javascript吗？

此外，如果您认为我会更好地使用默认浏览器，我如何告诉应用程序打开浏览器而不是 htmlview？

对不起，多合一问题，但它们都是链接的。

谢谢！

L.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:10:55.953

你的意思是`WebView`而不是HtmlView？虽然`WebView`是相当可配置的，并且您可以将其变成合理的浏览器体验，但这样做需要做一些工作。`WebView`确实支持 JavaScript，但您必须[启用它](http://developer.android.com/reference/android/webkit/WebSettings.html#setJavaScriptEnabled%28boolean%29)。至于“不是很好的缩略图渲染”，那是相当模糊的。总而言之，除非您有特定的需要在自己的视图中运行它，否则如果这种体验可以接受，我倾向于只在浏览器中打开文件。您当前的代码实际上应该已经这样做了...也许应用程序选择器弹出并且您将其设置为默认使用您的应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:11:30.570

您可以使用 WebView 手动加载所需的 html 文件和 js。这将允许您根本不离开您的活动或应用程序。

WebView 可以根据需要进行配置。

想法：开始新的活动，将在没有标题栏/窗口全屏的情况下运行。阅读： http: [//developer.android.com/reference/android/view/Window.html](http://developer.android.com/reference/android/view/Window.html) 以设置不同的窗口标志。

在您的活动中将内容视图设置为某些 WebView

阅读： http: [//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html) 注意`.setJavaScriptEnabled(true);`

# visual-studio-lightswitch - 激活链接到当前屏幕的新数据屏幕的命令

> ID：11388260
> 
> 赞同：1
> 
> 时间：2012-07-09T01:50:47.177
> 
> 标签：visual-studio-lightswitch

我在详细信息部分有一个带有按钮的列表和详细信息屏幕。当我单击按钮时，我想导航到新数据屏幕以创建订单，但该订单与单击按钮的详细信息屏幕中显示的客户相关联。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:58:44.797

据我了解，您有两个屏幕：客户列表屏幕和新订单屏幕。我的建议是以下步骤：

1.  在 New Order 屏幕上创建 customerId 属性
2.  将 customerId 属性标记为屏幕参数
3.  当您单击按钮并导航到新订单屏幕 (ShowNewOrderScreen) 时，传递所选客户的 id
4.  在 New Order 屏幕的 created 事件上，处理 customerId 属性。
5.  您可以加载客户对象，然后对其进行实例化并向其添加新订单。

# playframework - 表单验证后的 Playframework IllegalStateException

> ID：11388269
> 
> 赞同：8
> 
> 时间：2012-07-09T01:52:21.853
> 
> 标签：playframework, validation, playframework-2.0

我尝试使用 JSR-303 注释（类级别）和验证器实现为 play 2.0.1 编写自定义表单验证器。

不幸的是，当我提交表单并且验证失败时，我得到一个可能是游戏错误的 IllegalStateException（但我想确认）。

请在下面找到相关代码摘录和问题描述（为清楚起见，仅相关部分）

部分控制器代码（接收表单提交）

```
public static Result save() {
    Form<UserForm> userForm = form(UserForm.class).bindFromRequest();
    if (userForm.hasErrors()) {
        return badRequest(createForm.render(userForm));
    }
    UserForm user = userForm.get(); 
```

验证器声明为

```
public class FieldMatchValidator extends Validator<Object>
    implements ConstraintValidator<FieldMatch, Object> 
```

验证注释声明为

```
@Target({TYPE, ANNOTATION_TYPE})
@Retention(RUNTIME)
@Constraint(validatedBy = FieldMatchValidator.class)
@play.data.Form.Display(name="constraint.fieldmatch")
public @interface FieldMatch {

    String message() default FieldMatchValidator.message;
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {}; 
```

提交表单我收到错误

```
Caused by: java.lang.IllegalStateException: No value
    at play.libs.F$None.get(F.java:217) ~[play_2.9.1.jar:2.0.1]
    at play.data.Form.get(Form.java:363) ~[play_2.9.1.jar:2.0.1]
    at controllers.UsersController.save(UsersController.java:40) ~[classes/:2.0.1]
    at Routes$$anonfun$routes$1$$anonfun$apply$25$$anonfun$apply$26.apply(routes_routing.scala:189) ~[classes/:na]
    at Routes$$anonfun$routes$1$$anonfun$apply$25$$anonfun$apply$26.apply(routes_routing.scala:189) ~[classes/:na]
    at play.core.Router$HandlerInvoker$$anon$4$$anon$1.invocation(Router.scala:1086) ~[play_2.9.1.jar:2.0.1] 
```

提到的 UsersController 的行是调用 UserForm user = userForm.get();

试图了解问题出在哪里，我发现有问题的代码可能在 play 的 Form.java 中。

表单 bind(Map data, String... allowedFields) 包含：

```
if(result.hasErrors()) {

    for(FieldError error: result.getFieldErrors()) {
    ...
    }
return new Form(rootName, backedType, data, errors, None());
} 
```

而 hasErrors() 是

```
public boolean hasErrors() {
    return !errors.isEmpty();
} 
```

结果是 result.hasErrors() 返回 true（因为在类级别定义的验证器失败），但构建的错误列表保持为空（result.getFieldErrors() 返回一个空列表）。

结果 Form.hasErrors() 返回 false 但 Form.get() 失败。

我错过了什么还是它实际上是一个错误？

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T17:09:43.503

这是游戏中的一个错误。如果您的表单实现了验证，只要确保该方法在没有错误时返回 null。如果您返回一个空地图，那么它将失败

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T06:38:12.670

我遇到了同样的问题，因为我无法弄清楚这是否是一个游戏！错误或对我的不好用，我最终`Form`通过扩展现有类来编写自己的`Form`类。

你可以在这里找到我的课程：[https ://gist.github.com/3074629](https://gist.github.com/3074629)

只需将此类放在名为 的包中`patch`，然后在您的控制器中，您必须使用：

```
Form<UserForm> userForm = new PatchedForm<UserForm>(UserForm.class).bindFromRequest(); 
```

它应该成功;-)

现在，我必须向 Play 团队填写一个错误和一个拉取请求......

# ruby-on-rails - Ruby on rails git push heroku master 问题与 sqlite3

> ID：11388271
> 
> 赞同：0
> 
> 时间：2012-07-09T01:53:03.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

我知道这是一个老问题，我看到许多与同一问题相关的问题。我仍然不断收到同样的错误。我遵循了解决方案并相应地更改了我的 gemfile，但我仍然遇到同样的问题。我正在使用 ubuntu。下面是我在运行 git push heroku master 时遇到的问题，如 Michael Hartl 的教程中所述：

```
Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_t7ck4nq1x4dd/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
       Results logged to /tmp/build_t7ck4nq1x4dd/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:pure-dusk-8885.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:pure-dusk-8885.git' 
```

这是我的 Gemfile

```
source 'https://rubygems.org'

gem 'rails', '3.2.5'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :production do 
  gem 'pg'
end

group :development, :test do 
  gem 'sqlite3'
  gem 'taps'
  gem 'rvm'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:07:01.833

从您的 Gemfile 中删除 sqlite3。仅使用`pg`gem 进行开发，这样您就可以在与要部署到的数据库系统完全相同的数据库系统上进行开发。

如果您不这样做，那么在两个数据库系统之间转换时可能会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:09:45.627

正如 Ryan Bigg 所说，您应该在开发和生产中拥有相同的环境，这样您以后部署到生产时就不会感到意外。

但是，如果您不关心这一点并想继续使用 sqlite，我认为您只需要运行`bundle install`. 我猜您更改了 GemFile 但没有运行捆绑安装。

# python - 带引号的逗号的 CSV 文件无法被 Python 正确分割

> ID：11388272
> 
> 赞同：0
> 
> 时间：2012-07-09T01:53:11.850
> 
> 标签：python, regex, csv, comma

```
def csv_split() :
    raw = [ 
            '"1,2,3" , "4,5,6" , "456,789"',
            '"text":"a,b,c,d", "gate":"456,789"'
          ]
    cr = csv.reader( raw, skipinitialspace=True )
    for l in cr :
        print len( l ), l 
```

此函数输出以下内容：

```
3 ['1,2,3 ', '4,5,6 ', '456,789']
6 ['text:"a', 'b', 'c', 'd"', 'gate:"456', '789"'] 
```

如您所知，第一行被正确地分成 3 个条目。但第二行不是。我希望 csv 阅读器将其分成两部分，而不是我们这里有 6 个。我也考虑过正则表达式方法，但它假设了一些特定的引用方言。

基本上我想要的是：只要有一个没有在一对“”中引用的“，”就拆分字符串。

有什么快速通用的方法可以做到这一点吗？我见过一些正则表达式黑客，它们假设每个文件都被引用等。我想我可以写一个小循环，这样做效率很低，但肯定会感谢一些更专业的建议。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:14:35.603

`""`CSV 不是一种标准化格式，但如果引号出现在文本中（例如`"text"":""a,b,c,d"`），通常使用两个引号来转义它们。Python 的 CSV 阅读器在这里做的是正确的事情，因为它采用了这种约定。我不太确定您期望输出什么，但这是我尝试使用可能适合您格式的非常简单的 CSV 阅读器。随意调整它。

```
raw = [
    '"1,2,3" , "4,5,6" , "456,789"',
    '"text":"a,b,c,d", "gate":"456,789"',
    '1,2,  3,'
]

for line in raw:
    i, quoted, row = 0, False, []
    for j, c in enumerate(line):
        if c == ',' and not quoted:
            row.append(line[i:j].strip())
            i = j + 1
        elif c == '"':
            quoted = not quoted
    row.append(line[i:j+1].strip())
    for i in range(len(row)):
        if len(row[i]) >= 2 and row[i][0] == '"' and row[i][-1] == '"':
            row[i] = row[i][1:-1] # remove quotation marks
    print row 
```

输出：

```
['1,2,3', '4,5,6', '456,789']
['text":"a,b,c,d', 'gate":"456,789']
['1', '2', '3', ''] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T18:13:39.023

把这个留给后代，因为我也为此苦苦挣扎了一段时间。

的`quotechar`论点`csv.reader()`有助于解决这个问题；如果它们在引号内（假设条目内的所有逗号都已被引用），它将让您忽略分隔符（即在这种情况下为逗号）。也就是说，它将为此工作：

```
Name, Message
Ford Prefect, Imagine this fork as the temporal universe.
Arthur Dent, "Hey, I was using that!" 
```

...逗号已嵌套在引号内，但非逗号字符串没有。

演示代码从[Py2 docs](http://docs.python.org/2/library/csv.html#csv.reader)中提取，并编辑`delimiter`为逗号 (duh) 并且`quotechar`是您的双引号`"`：

```
import csv
with open('eggs.csv', 'rb') as csvfile:
    spamreader = csv.reader(csvfile, delimiter=',', quotechar='"')
    for row in spamreader:
        print ', '.join(row) 
```

# asp.net - 远程连接 Access 数据库

> ID：11388277
> 
> 赞同：1
> 
> 时间：2012-07-09T01:54:29.020
> 
> 标签：asp.net, vb.net, ms-access

我正在尝试连接到我使用 godaddy 托管的访问数据库。我有 ASP 3.5、Php 5.2 和 IIS 7。我已经在我的 IIS 设置中为 vb 脚本设置了一个虚拟目录。我正在使用 Microsoft Visual Web Developer 2008。如果有人发现我与远程数据库的连接字符串有问题，可以告诉我吗？我真的需要为此使用 Access。谢谢

该代码类似于我遵循的教程。[教程](http://www.youtube.com/watch?v=jmo66VQ4Fb4)（它是西班牙语，但代码在本地而不是远程工作）

```
Protected Sub Login1_Authenticate(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.AuthenticateEventArgs) Handles Login1.Authenticate
        Dim objConn As Object
        Dim objRecords As Object
        Dim strConn As String
        Dim strQuery As String

        objConn = Server.CreateObject("ADODB.Connection")
        strConn = "Provider=MS Remote;" & "Remote Server=http://(IP Address here);" & "Remote Provider=Microsoft.Jet.OLEDB.4.0;" & "Data Source=" & Server.MapPath("/logs/App_Data/users.mdb") & "Uid=admin" & "Pwd="
        objConn.Open(strConn)

        strQuery = "SELECT * FROM tbl_usuarios"
        strQuery = strQuery + " Where str_usuario_ide='" + Login1.UserName + "'"
        strQuery = strQuery + " And   str_usuario_cve='" + Login1.Password + "'"

        objRecords = objConn.Execute(strQuery)
        If (Not objRecords.BOF) Then
            e.Authenticated = True
        Else
            e.Authenticated = False
        End If

        objRecords.Close()
        objConn.Close()
        objRecords = Nothing
        objConn = Nothing
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T06:32:38.923

除非您使用完整的 UNC 路径名，否则您无法连接到驻留在服务器上的 MS Access 数据库。这意味着非 http:// 技术

http: 是一种不同于 Windows 网络系统的 GALACTIC 技术。要正确打开 Excel 文件、Word 文件或在本例中为 Access 文件，您不能使用 ftp 或类似 http：

您需要使用 Windows 网络。这意味着您需要设置 VPN 并且还需要运行 WINDOWS 网络（不是 Linux，也不是该服务器上的 Apple OS）。对于 Linux，您可能希望并“要求”安装 SAMBA 以获得标准的 Windows 网络系统。（因此，要让 Windows 计算机在 Linux 计算机上打开文件，您需要安装“Windows 兼容”网络系统。

因此，连接到标准 mdb 或 accDB 文件的连接字符串是完全限定的 windows 路径名。您提供的路径名必须是标准的 Windows 路径名，并且必须基于标准的 Windows 网络系统。因此，如果您设置了 VPN，然后您可以通过 Windows 网络（不是 http 也不是 FTP）浏览该文件夹中的文件，那么标准的 Windows 锁定和打开机制将起作用，并且是打开位于 a 中的标准 Windows 文件所必需的。文件夹。因此，在所有情况下，您仍然需要本地硬盘驱动器上的文件夹或从网上邻居映射的文件夹。如前所述，这里的网络系统必须是 Windows 网络。我不认为 GoDaddy 的基本计划具有 VPN 和直接文件使用和操作位于其服务器上的基本文件的能力（您必须使用 ftp 将文件放置在其服务器上 - 而不是共享的 Windows 网络文件夹）。在 mdb/accDB 文件的情况下，更重要的此类直接文件使用必须是 Windows 网络。

我读过 GoDaddy 确实允许外部连接到他们的数据库服务器选项。所以 MySql 或可能的 SQLServer for Windows 包。然而，这里需要注意的是，默认情况下，对于 MOST 计划，它们不允许野生互联网外部连接到其内部数据库服务器。事实上，在他们确实允许此类连接的任何计划中，他们都会将托管网站“移动”到另一组服务器，这样如果至少通过允许互联网的狂野世界“连接”到这些内部数据库服务器而受到损害，那么并不是所有的服务器将受到此类安全漏洞的影响或损害。

因此，我建议您使用真正的数据库服务器。无论如何，我几乎没有（如果有的话）尝试使用位于 Web 服务器上的 mdb 文件。

因此 SQLServer 或 MySql 可以接受套接字连接，并且可以在任何支持 TC/IP 的网络上这样做。但是，MS Access“文件”不接受此类连接。因此不允许使用 http 或 ftp。请记住，“mdb”或“accDB”文件只是位于硬盘驱动器上的文件。

因此，当您使用 Excel、Power-point、AUTO CAD 或简单的 Access 文件时，就不可能有这样的“套接字”连接。因此，您不能再使用连接字符串连接到 PowerPoint，然后您可以连接到位于 Web 服务器硬盘驱动器上的简单 Windows 文件，该文件恰好具有 mdb 或 accDB 扩展名。

文件是文件是文件。马是马是马。所以你说的是一个简单的 Jane windows 文件，它位于该服务器上的一个文件夹中。

如果您打算使用 Windows 程序（例如 PowerPoint 或在本例中为 MS Access）打开和修改该文件，那么您需要使用标准 Windows 网络打开该文件，而不是某种基于 Web 的连接系统。

因此，没有连接字符串可以打开平面 Jane Windows 文件，无论是您最喜欢的 Paint 程序还是只是 Access 文件。

当然，如果您正在构建的软件在服务器端运行并且“JET”引擎已正确安装在该服务器上（并且必须如此），那么您可以编写一些 vb.net 或任何具有标准 oleDB 连接的代码细绳。因此，对于服务器端代码，您当然可以使用连接字符串，但如果您看起来很接近，您将始终使用完全限定的 Windows 路径名，并且如前所述，您必须运行安装了 JET 数据库引擎的 Windows 兼容服务器。

# oauth - 如何使用 scribe-java 将新文件插入 Google Drive

> ID：11388279
> 
> 赞同：1
> 
> 时间：2012-07-09T01:55:00.607
> 
> 标签：oauth, scribe, google-drive-api

最近，我正在尝试使用 scribe-java(https://github.com/fernandezpablo85/scribe-java) 将 Google Drive 集成到我的应用程序中。并通过 Id 方法列出文件/获取文件工作正常。但我无法让插入新文件方法正常工作。这是我的代码（插入）：

```
OAuthService service = new ServiceBuilder()
                .provider(GoogleApi.class)
                .apiKey("[my api key]")
                .apiSecret("[my api secret]")
                .scope(SCOPE)
                .callback("[my callback]")
                .build();
Token token = new Token(accessToken, accessSecret);
OAuthRequest request = new OAuthRequest(Verb.POST, "https://www.googleapis.com/drive/v2/files");
service.signRequest(token, request);
Response response = request.send(); 
```

这将在我的谷歌驱动器中创建一个“无标题”的命名文件，我的问题是如何从本地文件系统上传我的文件并指定一个名称？因为我尝试添加添加正文参数，添加标题，所以它们都不起作用。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:51:25.717

您将获得一个“未命名”的命名文件，因为您没有通过 POST 请求发送任何内容。[您可以从此文档](https://developers.google.com/drive/manage-uploads)中找到有关 Google Drive API 的媒体上传协议的更多信息。

这是一个显示分段上传方法的协议的示例：

```
POST https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart

Authorization: Bearer <Access token>
Content-Length: 44332
Content-Type: multipart/related; boundary="===============0124852474844509178=="

===============0124852474844509178==
Content-Type: application/json

{'title': 'My Image'}
===============0124852474844509178==
Content-Type: image/png

<Binary data removed>
===============0124852474844509178== 
```

我对 Scribe 不熟悉，但您可能想尝试使用[适用于 Java 的 Google APIs 客户端库，](http://code.google.com/p/google-api-java-client/)它抽象了强类型类中的所有协议交互。Google Drive API 的[参考指南](https://developers.google.com/drive/v2/reference/)包含使用此客户端库的代码片段。

# python - Django 模型过滤

> ID：11388283
> 
> 赞同：2
> 
> 时间：2012-07-09T01:56:16.637
> 
> 标签：python, django, django-models

我有以下内容：

```
def foo(self):
    print "Test"
    scores = BasicScore.objects.filter(event__id=self.id).order_by('score_date')[0:1]
    print scores
    #return s
    #return Score.objects.all().order_by('start_date')[:1]
    return scores 
```

在我的模板中：

```
event.foo.0.value 
```

这将正常工作，我将能够使用 BasicScore 类。

但是以前我有：返回分数[0]

但我在日志中得到了这个：

```
Test

[] 
```

还有一个例外：

```
Exception Type: IndexError
Exception Value:    

list index out of range

Exception Location: /Library/Python/2.7/site-packages/django/db/models/query.py in __getitem__, line 207
Python Executable:  /usr/bin/python 
```

我对 Django/Python 有点陌生，但是为什么一个列表会成功返回，但访问 [0] 最终会因访问空集而出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:59:49.807

该列表`[]`不是一个列表，它是一个零列表，并且`scores[0]`应该引发一个`IndexError`.

# java - 为什么在 AWS EC2 上运行的 JVM 会挂起？

> ID：11388287
> 
> 赞同：-2
> 
> 时间：2012-07-09T01:57:01.507
> 
> 标签：java, jboss, amazon-ec2, jvm

我在具有 16GB 内存的 EC2 上运行批处理引擎 (BE) 和 Jboss 实例。两者都由 WrapperSimpleApp 管理。

BE 不断处理大量信息。只是想一下，数据库每天大约增长 10 到 15 GB。从日志来看，BE 每天下降 1 到 7 次。我将最大 Java 堆大小从 8GB 减少到 4GB。它没有效果。作为最后的手段，我退回了 EC2 服务器，错误就消失了。我想知道是否有任何方法可以找出 JVM 没有响应的原因。BE 以相同的工作量执行相同的流程。EC2 服务器是否存在已知问题？我没有任何证据表明 BE 有过错。

以下是一些包装器设置：

# 初始 Java 堆大小 (MB)
# wrapper.java.initmemory=256
# 最大 Java 堆大小 (MB)
wrapper.java.maxmemory=4096
wrapper.ping.timeout=600

日志文件中的错误：
信息 | 虚拟机 6 | 2012/07/03 05:46:12 | BE在这里做一些事情。
错误 | 包装 | 2012/07/03 05:57:14 | JVM 出现挂起：等待来自 JVM 的信号超时。
错误 | 包装 | 2012/07/03 05:57:14 | JVM 未按请求退出，已终止
INFO | 包装 | 2012/07/03 05:57:14 | JVM 在等待终止应用程序时自行退出。
状态 | 包装 | 2012/07/03 05:57:14 | JVM 响应信号 SIGKILL (9) 退出。
状态 | 包装 | 2012/07/03 05:57:19 | 启动 JVM...
信息 | 虚拟机 7 | 2012/07/03 05:57:19 | 包装器（版本 3.2.3）[http://wrapper.tanukisoftware.org](http://wrapper.tanukisoftware.org)
信息 | 虚拟机 7 | 2012/07/03 05:57:19 | 版权所有 1999-2006 Tanuki Software, Inc. 保留所有权利。
信息 | 虚拟机 7 | 2012/07/03 05:57:19 |
信息 | 虚拟机 7 | 2012/07/03 05:57:19 | BE继续做事

提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:57:40.487

使用 jstack 或 kill -3 捕获线程转储将有助于发现问题。

如果您要启动批处理文件而不是 java.exe，这可能有助于解释问题。

[http://wrapper.tanukisoftware.com/doc/english/troubleshooting.html#10](http://wrapper.tanukisoftware.com/doc/english/troubleshooting.html#10)

> 问题是您可能将 wrapper.java.command 属性设置为批处理文件，而不是直接设置为 java.exe。当请求线程转储时，“BREAK”信号被发送到进程 command.exe/shell 而不是 Java 进程。然后它会将信号转发到 JVM，但也会设置一个内部标志，表明 CTRL-C 已被按下。当子 Java 退出时，它会立即询问用户是否希望停止或继续批处理脚本。

# xcode - xcode 中的 Bash 脚本返回 Shell 脚本调用错误

> ID：11388291
> 
> 赞同：2
> 
> 时间：2012-07-09T01:58:59.490
> 
> 标签：xcode, shell, build

我制作了这个脚本来自动增加每个构建的构建号：

```
#!/bin/bash
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" $INFOPLIST_FILE)
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" $INFOPLIST_FILE 
```

我将它插入到“复制捆绑资源”之前的构建阶段。首先，在 Shell 字段中，我保留了默认的 /bin/sh，但它给了我一个`Shell Script Invocation Error`说法：

```
Command /bin/sh failed with exit code 1 
```

所以我查找了要做什么，我发现将 Shell 更改为`/bin/bash`可以修复它。我这样做了，但我仍然有同样的错误。它仍然告诉我，`Command /bin/sh failed with exit code 1`. 如果 /bin/sh 不再存在，为什么它仍然告诉我我有错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-14T17:14:00.517

*我知道这个问题已经有一年半的历史了，但是在搜索这个问题时，这个问题出现在搜索结果的顶部。我发现了一个我想分享的不同修复：*

这是我在使用 plistbuddy 脚本时收到的错误详细信息（我假设这与 OP 看到的错误相同）。

```
Set: Entry, ":CFBundleBuildVersionString", Does Not Exist
File Doesn't Exist, Will Create: /Users/*YourFilePathHere/YourAppName*.app/Info.plist
Set: Entry, ":CFBundleBuildDateVersionString", Does Not Exist
Command /bin/sh failed with exit code 1 
```

![屏幕截图命令 bin sh 失败，退出代码 1 错误](../Images/b6621fd81ddc9aaa4c2c282fce960085.png)

我尝试`clean`删除`Derived Data`但没有成功。事实证明，实际的解决方案非常简单。我发现在`build`脚本期间试图将生成的值添加到Xcode 实际生成的值`plist`之前。`plist`

![屏幕截图目标构建阶段](../Images/3710facd214b286ec09c618dbf3c3ff7.png)

`Targets > Build Phases > Extra Version Data`有没有运行这个脚本。但是`Targets > Build Phases > Copy Bundle Resources`是`plist`生成的地方。

![屏幕截图目标构建阶段](../Images/9edabf73c9c15aae4112b6bc9abd2e62.png)

单击并拖动`Extra Version Data`以使其在之后列出`Copy Bundle Resources`，`plist`在脚本尝试添加生成的值之前构建。

![屏幕截图目标构建阶段已更正](../Images/4b2488361295bc1c1e3f6e667f6bbc7e.png)

然后`build`和啤酒一起欢欣鼓舞。

*（使用 Xcode 5.1）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:33:19.083

我刚刚遇到了这个问题，发现我的 INFOPLIST_FILE 的文件名中有一个空格，这是因为创建了一个新目标并且 XCode 附加了后缀“副本”。似乎 PlistBuddy 无法以创建此脚本的方式处理该空间。

一旦我重命名了没有空格的文件并更新了名称以匹配构建设置，这个错误就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T02:05:37.027

在我的 Xcode 项目中使用新的 Fabric Cocoapod 后，我遇到了类似的问题。

我不得不将 Fabric 脚本从：更改 `${PODS_ROOT}/Fabric/Fabric.framework/run ...` 为： `"${PODS_ROOT}/Fabric/Fabric.framework/run" ...` 因为我在指向我的 cocoapods 根位置的目录之一的名称中有一个空格：

`~/Documents/My Directory Name/My_Xcode_Project_Directory/`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-12T08:47:57.237

同样的问题也发生在我身上。删除**派生数据**然后**清理和构建**正在解决问题。

# objective-c - NSString 和 int 连接

> ID：11388292
> 
> 赞同：0
> 
> 时间：2012-07-09T01:59:03.297
> 
> 标签：objective-c, cocoa, nsstring, string-concatenation

我想连接一个字符串和一个`double`（或者在这种情况下连接一个`#define`d 常量）。我想将`CURRENT_LATITUDE`and`CURRENT_LONGITUDE`值插入到`NSURL`我正在创建的`URLWithString:`

```
 #define CURRENT_LATITUDE 37.000000
    #define CURRENT_LONGITUDE -120.000000

    NSURL *jsonURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/json?location=" + CURRENT_LATITUDE + "," + CURRENT_LONGITUDE + "@f&radius=100&sensor=true&types=establishment&key=blahAPIkey123"]; 
```

我知道这些`+`标志不起作用，所以请帮助我了解如何执行此操作。在 Lua 中，您可以使用

```
.. CURRENT_LATITUDE .. 
```

那么我应该在 Objective-C 中使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T02:02:32.737

使用 NSString 的`stringWithFormat`方法，它的工作原理与 printf 完全一样，它在第一个参数中查找格式说明符，然后每个说明符都有一个额外的参数。

```
NSString *urlString = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%g,%g@f&radius=100&sensor=true&types=establishment&key=blahAPIkey123", CURRENT_LATITUDE, CURRENT_LONGITUDE];
NSURL *jsonURL = [NSURL URLWithString:urlString]; 
```

# google-maps - 谷歌地图方向不透明度

> ID：11388294
> 
> 赞同：1
> 
> 时间：2012-07-09T01:59:12.833
> 
> 标签：google-maps

我试图以某种方式改变由谷歌地图中的方向服务创建的线条的不透明度。使蓝线半透明。

实际上，我需要某种方式来查看方向线，例如，使虚线也适用于我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T02:08:53.857

实例化 DirectionsRenderer 时，设置适当的选项，例如：

[**看演示**](http://jsfiddle.net/yV6xv/135/)

```
directionsDisplay = new google.maps.DirectionsRenderer({
    polylineOptions: {
        strokeColor: "green",
        strokeOpacity: 0.3
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:03:02.393

如果它们是折线，那么可以通过以下方式在 API 的 v3 中设置不透明度`strokeOpacity`：

[https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions](https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions)

# python - 拆分查询集或按字段获取多个查询集，而不仅仅是按字段排序

> ID：11388296
> 
> 赞同：7
> 
> 时间：2012-07-09T01:59:26.353
> 
> 标签：python, django, models

我想以某种方式查询数据库，而不是仅仅按某个字段排序，而是为该字段的每个唯一值获得一个单独的 QuerySet（或字典、列表等）。希望下面的例子会有所帮助：

假设一个模型像

```
Class Person(models.Model):
   first_name = models.CharField()
   last_name = models.CharField 
```

调用 Person.objects.all().order_by('last_name') 会给我一个长查询集。相反，我希望为每个唯一的姓氏创建一个单独的列表。因此，每个带有 last_name="Smith" 的 Person 的列表和每个带有 last_name="Nguyen" 的 Person 等的列表。

显然，我无法提前知道数据库中的 last_names 是什么，也不知道有多少人会共享一个共同的 last_name。在 django 中是否有任何快速、高效或自动的方法来执行此操作，或者我只需要在取回一个大型查询集后自己处理数据？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T08:52:35.083

samy 的代码是正确的，但效率很低：您执行 n+1 个查询（其中 n 是唯一姓氏的数量）。由于无论如何您都将获得表中的所有对象，因此您不妨一口气完成。改用这个：

```
from collections import defaultdict
person_dict = defaultdict(list)
persons = Person.objects.all()
for person in persons:
    person_dict[person.last_name].append(person) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T02:43:19.140

查看[重组](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)标签。

```
{% regroup persons by last_name as surname_list %}

<ul>
{% for last_name in surname_list %}
    <li>{{ last_name.grouper }}
    <ul>
        {% for person in last_name.list %}
          <li>{{ person.last_name }}, {{ person.first_name }}</li>
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul> 
```

（此代码未经测试，请阅读文档并自行解决任何问题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T02:47:17.197

您可以获得所有唯一的姓氏：

```
from django.db.models import Count
...
last_names = Person.objects.values('last_name').annotate(Count('last_name')) # This will return all the unique last_names
values = dict( ((last_name['last_name'], Person.objects.all().filter(last_name = last_name['last_name'])) for last_name in last_names if last_name['last_name__count']) )
# This will create a dictionary where the keys are all the unique names and the values are querysect of all the values that have that lastname 
```

丹尼尔 - 罗斯曼是对的，它效率很低，所以这里有一个调整版本......

```
from collections import defaultdict
values = defaultdict(list)
_ = map(lambda person: values[person.last_name].append(person), Person.objects.all()) 
```

请注意，`_ = ...`我们不会`None`在终端上打印所有内容；）

# scala - Play Framework 2.0 的 Anorm 上的 Joda DateTime 字段

> ID：11388301
> 
> 赞同：24
> 
> 时间：2012-07-09T02:00:18.227
> 
> 标签：scala, playframework-2.0

我一直在学习 Play Framework，推荐的访问数据库的方法是使用内置异常组件。问题是，在异常情况下对 DateTime 没有很好的支持。它仍在使用`java.util.Date`。

有没有办法在异常中使用 Joda DateTime 或 java.sql.Timestamp？

如果无法使用 Joda 或 java.sql，我们可以为此添加一个模块吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-15T18:38:40.490

*更新*：从玩 2.3.7 开始，现在原[生支持](https://github.com/playframework/playframework/pull/3563)。

我正在使用以下代码与 Anorm 无缝配合使用 DateTime。

```
import org.joda.time._
import org.joda.time.format._
import anorm._

object AnormExtension {

val dateFormatGeneration: DateTimeFormatter = DateTimeFormat.forPattern("yyyyMMddHHmmssSS");

implicit def rowToDateTime: Column[DateTime] = Column.nonNull { (value, meta) =>
    val MetaDataItem(qualified, nullable, clazz) = meta
    value match {
        case ts: java.sql.Timestamp => Right(new DateTime(ts.getTime))
        case d: java.sql.Date => Right(new DateTime(d.getTime))
        case str: java.lang.String => Right(dateFormatGeneration.parseDateTime(str))  
        case _ => Left(TypeDoesNotMatch("Cannot convert " + value + ":" + value.asInstanceOf[AnyRef].getClass) )
    }
}

implicit val dateTimeToStatement = new ToStatement[DateTime] {
    def set(s: java.sql.PreparedStatement, index: Int, aValue: DateTime): Unit = {
        s.setTimestamp(index, new java.sql.Timestamp(aValue.withMillisOfSecond(0).getMillis()) )
    }
}

} 
```

我认为它绝对应该是 Anorm 的一部分，只是需要经过打磨和更多测试。让我知道它是否对您有所帮助。

# ios - presentModalViewController 与 modalTransitionStyle 导致 XIB 中的所有控件“动画化”

> ID：11388305
> 
> 赞同：2
> 
> 时间：2012-07-09T02:00:30.957
> 
> 标签：ios, uiviewcontroller, uikit

我有一个 iPhone 应用程序（向日历添加提醒），其中首选项屏幕通过以下代码显示：

```
-(IBAction) showPreferences {   
    preferencesViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl;
    [self presentModalViewController:preferencesViewController animated:YES];
} 
```

这会卷回“主”屏幕以显示首选项视图控制器，如下所示：

![这个截图](../Images/61781a3e5c5e31cf367a67da32f50aac.png)

主视图控制器和首选项视图控制器都通过 XIB 布局。

问题是任何和所有输入元素（UISegmentedControls、UIButtons 等）在第一次呈现视图时都会“动画化”——它们从左到右“增长”。（您可以通过安装应用程序看到这一点[- 为插件道歉](http://itunes.apple.com/us/app/add-reminder-to-calendar/id386531068?mt=8)）。随后返回此屏幕不会出现此问题。

如果我传入动画：否，则不会显示preferencesViewController - 为了让它出现，我也必须省略modalTransitionStyle，当我这样做时，从一个屏幕到另一个屏幕的过渡非常不和谐。

这不是一个交易破坏者，但它一直困扰着我 - 有什么办法可以“强制”我的 XIB 中元素的初始位置并防止它们被“动画化”，同时仍然获得好处带有精美页面卷曲的动画模式视图控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:10:28.520

[已经在这里回答了](https://stackoverflow.com/questions/9741052)。

您需要在动画开始之前强制执行视图布局。这可能是一个错误；归档那些雷达！

# linux - 如何制作系统信息的WEB cgi脚本（基于BASH脚本语言）

> ID：11388307
> 
> 赞同：0
> 
> 时间：2012-07-09T02:01:02.520
> 
> 标签：linux, bash, apache2, cgi

那么我怎样才能获得： **从 Bash cgi 脚本到网站的所有系统信息？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:16:53.920

在任何输出之前，您的 bash CGI 脚本应该打印一个“Content-type”标头，例如：

```
# First output line should be the content-type header + blank line
echo -e "Content/type: text/plain\n"

echo -n "running as: "; whoami

echo "-----------------------------------------"
echo "            /proc/cpuinfo                "
echo "-----------------------------------------"
cat /proc/cpuinfo

echo "-----------------------------------------"
echo "            /proc/meminfo                "
echo "-----------------------------------------"
cat /proc/meminfo 
```

在大多数 apache 部署中，都有一个 cgi-bin 目录，您应该在其中放置 CGI 脚本。使您的脚本可执行（由运行网络服务器的用户）并将其放在此目录中。

如果运行网络服务器的用户无权显示您需要的系统信息，您将不得不使用[sudo](http://en.wikipedia.org/wiki/Sudo)之类的东西来提升权限 - 请务必使用非常严格的 sudoers 文件（如果您不能 sudo，请离开这里）。

# object - 将新创建的对象添加到向量

> ID：11388309
> 
> 赞同：0
> 
> 时间：2012-07-09T02:01:23.613
> 
> 标签：object, pointers, vector

我最近声明在程序中使用指针，当我尝试以下操作时，出现此错误。

```
stored_points.push_back(new Point(anchor_y,anchor_x,last_direction)); 
```

错误 C2664: 'void std::vector<_Ty>::push_back(_Ty &&)' : 无法将参数 1 从 'Point *' 转换为 'Point &&' with [ _Ty=Point ] 原因: 无法从 'Point *' 转换到“点”没有构造函数可以采用源类型，或者构造函数重载决议不明确

我知道使用 new 会返回一个指针，并且 .push_back 不能接受，但是，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:11:29.227

你如何定义你的向量？如果是`vector<Point>`，请尝试将其更改为`vector<Point*>`. 这告诉向量存储指向对象的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:17:28.387

一个非常快速的解决方法是更改​​向量的定义。而不是`vector<Point>`，将其更改为`vector<Point *`>。

但是你应该认真考虑在这种情况下使用智能指针。`vector<shared_ptr<Point> >`您可能要考虑的也是如此。

智能指针在 Boost 和 TR1 中可用。

# javascript - IE9中的innerHTML追加

> ID：11388312
> 
> 赞同：0
> 
> 时间：2012-07-09T02:01:56.907
> 
> 标签：javascript, internet-explorer, html-table, internet-explorer-9, innerhtml

我有一个页面，它只是尝试在 javascript 函数中执行以下操作：

```
document.getElementById("chatTable").innerHTML += "<tr><td colspan=\"3\">      ⏎
    <span color=\"purple\">------------Switched to channel: " + channelName +  ⏎
    "------------</span></td></tr>"; 
```

这适用于我尝试过的所有其他浏览器（Firefox、Chrome、Safari、Android 手机浏览器、iPhone 浏览器），但不适用于 IE9。是的，我确实有一个带有 ID 的表，并且确实设置`chatTable`了变量。`channelName`我知道我可能实际上可以使用 DOM 为表格对象附加一个表格行（我认为它`insertRow()`或其他东西），但现在它已经成为一个原则问题，它让我发疯了。我已经尝试将其更改`+=`为只是`=`没有运气。我还尝试在javascript中将表格设置为自己的变量，然后尝试编辑innerHTML，但仍然没有运气。哦，我确实有：

```
<!DOCTYPE HTML> 
```

在我的页面中。我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T02:21:18.503

您不能使用`.innerHTML`或`.outerHTML`与以下任何元素一起使用：COL、COLGROUP、FRAMESET、HTML、STYLE、TABLE、TBODY、TFOOT、THEAD、TITLE 或 TR。

请参阅[动态构建表](http://msdn.microsoft.com/en-us/library/ms532998%28v=vs.85%29.aspx)以使用 Microsoft 的表对象模型在 Internet Explorer 中操作表。

我想这可能会在 IE 的未来版本中发生变化，但这就是你现在所剩下的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:32:29.040

除了 Jim 的回答之外，当您附加 HTML 时，您会破坏并重建现有的表。即使在允许您这样做的浏览器中，添加行的通常更好的解决方案是：

```
var table = document.getElementById("chatTable"),
    row = table.insertRow(-1), //-1 means at end
    cell = row.insertCell(0),
    span = document.createElement("span");

span.style.color = "purple";
span.appendChild(document.createTextNode("------------Switched to channel: " + channelName + "------------"));
cell.colSpan = 3;
cell.appendChild(span);
row.appendChild(cell);
table.appendChild(row); 
```

它通常更快，并且您不会丢失已附加到表中事物的任何现有事件处理程序。

# node.js - 如何增加 Node.js 中 dns.resolve4() 的超时时间？

> ID：11388318
> 
> 赞同：1
> 
> 时间：2012-07-09T02:03:04.067
> 
> 标签：node.js, dns

Node.js中如何增加dns解析的超时时间？我正在尝试解析 url 以查看可用的内容，但是很多请求都超时并且可能是误报。

```
// checks a url string for availability and errors on 'err'
function checkAvailable( url ) {
  dns.resolve4( url, function (err, addresses) {
    if (err) console.log (url + " : " + err)
  })
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:25:46.863

Node.js DNS 模块是围绕[c-ares](http://c-ares.haxx.se/)的包装器，并且选项非常少。如果您需要提供任何（例如超时），我建议您查看[node-dns](https://github.com/tjfontaine/node-dns)，它为 DNS 模块中的所有可用功能提供 1:1 映射，以及用于指定更高级选项（包括超时）的其他方法):

```
var dns = require('native-dns');

var question = dns.Question({
  name: 'www.google.com',
  type: 'A'
});

var req = dns.Request({
  question: question,
  server: { address: '8.8.8.8', port: 53, type: 'udp' },
  timeout: 1000
});

req.on('timeout', function () {
  console.log('Timeout in making request');
});

req.on('message', function (err, answer) {
  answer.answer.forEach(function (a) {
    console.log(a.promote().address);
  });
});

req.on('end', function () {
  console.log('Finished processing request');
});

req.send(); 
```

# eclipse - 如何为在调试模式下工作的插件创建一个工作的 eclipse 插件更新站点？

> ID：11388321
> 
> 赞同：0
> 
> 时间：2012-07-09T02:03:26.350
> 
> 标签：eclipse

我在 stackoverflow 的帮助下创建了一个可以工作的 eclipse 插件。通过“工作”，我的意思是当我以“概述 - > 测试 - > 启动 Eclipse 应用程序”启动 Eclipse 应用程序时它可以正常工作。即，我在“插件开发”角度运行 eclipse，我编写了一个 eclipse 插件，我可以在与“插件开发”eclipse 实例不同的“子”eclipse 下运行它。

然后，我仔细按照“欢迎 -> 教程 -> 创建 Eclipse 插件”下的“创建功能”..“创建更新站点”..“安装和卸载功能”过程中的说明进行操作。

然后，我可以毫无怨言地将生成的功能安装到 Eclipse 中。但是，当我停止并重新启动 eclipse 时，该功能完全被破坏了；它根本不像插件开发期间那样工作。

该功能将一个菜单项添加到团队弹出菜单，并在选择该菜单项时启动一个新编辑器。在非工作安装版本中，菜单项不存在，无处可寻。

我将在下面包含我的项目的 plugin.xml、build.properties 和 MANIFEST.MF。

任何有关如何调试安装问题的帮助将不胜感激。类路径问题？还有其他容易被粗心踩到的地雷吗？

插件.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension point="org.eclipse.ui.popupMenus">

      <objectContribution
            objectClass="org.eclipse.core.resources.IFile"
            id="com.gregfjohnson.hg_version_view.contribution1">

         <action
               label="Version View"
               class="com.gregfjohnson.hg_version_view.popup.actions.NewAction"            
               menubarPath="team.main/group4"
               enablesFor="1"
               id="com.gregfjohnson.hg_version_view.newAction">
         </action>

      </objectContribution>

   </extension>

</plugin> 
```

build.properties：

```
source.. = src/
output.. = bin/
bin.includes = plugin.xml,\
               META-INF/,\ 
```

清单.MF：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Hg_version_view
Bundle-SymbolicName: com.gregfjohnson.hg_version_view; singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: com.gregfjohnson.hg_version_view.Activator
Bundle-Vendor: GREGFJOHNSON
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime,
 org.eclipse.core.resources,
 org.eclipse.core.filesystem;bundle-version="1.3.100",
 org.eclipse.ui.ide;bundle-version="3.7.0"
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-ActivationPolicy: lazy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:06:40.353

你的 bin.includes 应该有一个 '.' 也在其中。这只是一个错字吗？

```
source.. = src/
output.. = bin/
bin.includes = plugin.xml,\
               .,\
               META-INF/ 
```

另外，你在看什么样的项目或文件？您的 objectContribution 可能需要标记为可适应的。

# java - 如何为 webdriver 编写 keyDown 和 keyUp？

> ID：11388327
> 
> 赞同：2
> 
> 时间：2012-07-09T02:04:02.863
> 
> 标签：java, webdriver, selenium-webdriver

我正在尝试为 webdriver 编写一个 keyDown 和 keyUp，类似于 selenium。我知道如何使用动作，但力求找到一种方法来编写一个通用的（适用于特殊键和普通键）keyDown 函数。

像 selenium 这样的东西，它接受键码和键。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T08:04:30.273

例如，如果您尝试从输入字段中选择所有内容并删除，您可以执行以下操作：

```
Actions action = new Actions(driver);
action.keyDown(Keys.CONTROL).sendKeys("a").keyUp(Keys.CONTROL).sendKeys(Keys.DELETE).perform(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T02:15:56.150

查看 org.openqa.selenium.interactions 中 KeyUpAction 和 KeyDownAction 的 JavaDoc：

*   [http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/package-summary.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/package-summary.html)

移至 GitHub：

*   [http://seleniumhq.github.io/selenium/docs/api/java/](http://seleniumhq.github.io/selenium/docs/api/java/)

也可以看看：

*   [如何以编程方式生成按键事件？](https://stackoverflow.com/questions/18169598/how-can-i-programmatically-generate-keypress-events)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T06:39:56.030

**KeyDown 和 KeyUp** -- 用于按下一个键然后取消按下该键。如下所示，我们可以使用这种情况；

```
Actions ac  = Actions(driverObj);
ac.keyDown(Keys.CONTROL).click(we).keyUp(Keys.CONTROL).build().perform(); 
```

在这里，我们使用按 CONTROL 键，然后单击（），然后松开 CONTROL 键。

# c - 这个 C 程序有什么问题？（全局变量）

> ID：11388333
> 
> 赞同：0
> 
> 时间：2012-07-09T02:05:04.420
> 
> 标签：c

我是 C 新手，我正在尝试使用全局变量，我运行了这个程序，所有的输出都是“嘿那里”，这是程序的第一部分。第二部分不显示。这是代码。

```
char count[20]="Hey there";
char dig[7]="pooop"; 

main()
{
    puts(count);

    return(0);
}
hey()
{
       printf(" i %s you", dig);

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:06:47.107

您需要调用第二个函数`hey()`才能获得其输出。

例如，在`main()`

```
{
   puts(count);
   hey();
   return 0;
} 
```

您将调用的确切`hey()`位置`main()`取决于您（尽管它需要在`return`语句之前）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:06:38.840

`hey()`如果您希望它运行，您需要在某个地方调用该函数。C 程序以 开头`main()`，无论`main`做什么就是程序做什么。如果您想运行，请致电`hey` 。`main``hey`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T02:07:06.597

该函数`hey`未被调用。如果不在这里写一本编程教科书，我真的无法进一步解释这一点。所以你需要找到一个。

# javascript - 使用 JavaScript 的客户端验证不起作用

> ID：11388338
> 
> 赞同：0
> 
> 时间：2012-07-09T02:05:32.223
> 
> 标签：javascript, validation, dom-events

我一直在尝试不同的方法并查看许多不同的地方，看起来下面的代码应该可以工作。我很困惑为什么它不是......我是 html 和 JavaScript 的新手，所以我猜我一直忽略我做错了什么？如果是这样，希望有人能指出来。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
<!--
    function validateUsername() {
        if (document.getElementById("username") == "") {
           document.registrationform.username.style.background = 'Yellow';
        }
    }
//-->
</script>
</head>
<body>

<form name="registrationform" id="registrationform" method="post" action="register.php"> 

    <div class="formlabel">*Username:</div>
    <div class="formfield"><input type="text" name="username" id="username" size="30" onblur="validateUsername()"/></div>
    <div style="float:left;">
        <input type="submit" value="Submit" />
    </div>
</form>
</body>
</html> 
```

当我将其留空并单击它时，它不会像我想要的那样改变颜色。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:07:26.700

```
document.getElementById("username") 
```

应该

```
document.getElementById("username").value 
```

那应该让你开始。但是，您的实现不会捕获用户在文本框中输入空格 (" ") 的情况。为此，您将使用[trim 函数](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)去除空格：

```
// Remove spaces at front/back of value in textbox
document.getElementById("username").value.trim(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:15:14.033

如果您从侦听器传递对元素的引用，您可以使生活更轻松：

```
<input type="text" ... onblur="validateUsername(this)"> 
```

现在你的功能是：

```
function validateUsername(element) {
    element.style.backgroundColor = (element.value == '')? 'yellow' : 'white';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T02:15:24.813

你的代码有点乱。也缺少关闭表单标记的“>”。您的代码应如下所示。

```
 <html>
<head>
<script type="text/javascript">
<!--
function validateUsername() {
if (document.getElementById("username").value == "") {
document.registrationform.username.style.background = 'Yellow';
}
}
//-->
</script>
</head>
<body>

<form name="registrationform" id="registrationform" method="post" action="register.php">

<div class="formlabel">*Username:</div>
<div class="formfield"><input type="text" name="username" id="username" size="30" onblur="validateUsername()"/></div>
<div style="float:left;">
<input type="submit" value="Submit" />
</div>
</form>
</body>
</html> 
```

# neo4j - 如何获取测试neo4j数据库的具体参数？

> ID：11388340
> 
> 赞同：0
> 
> 时间：2012-07-09T02:06:16.503
> 
> 标签：neo4j

如果我想在部署它的时候得到它的具体参数，比如读/写吞吐量、命中率、每秒查询数、slow_query、每次查询时间等，在使用 NEO4j 数据库之前，我该怎么办？我的领导想知道我为什么选择它而不是其他数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:13:53.357

您可以从 JMX 扩展中获取一些统计信息，例如缓存比率等，请参阅[http://docs.neo4j.org/chunked/snapshot/operations-jmx.html](http://docs.neo4j.org/chunked/snapshot/operations-jmx.html)，否则，您可以通过非托管扩展来检测 Jetty 服务器，见[http://docs.neo4j.org/chunked/snapshot/server-unmanaged-extensions.html](http://docs.neo4j.org/chunked/snapshot/server-unmanaged-extensions.html)

# android - 如何为我的自定义键盘添加主题支持？

> ID：11388348
> 
> 赞同：2
> 
> 时间：2012-07-09T02:08:01.083
> 
> 标签：android

我试图弄清楚如何为我的自定义键盘添加主题支持。这个想法是用户应该能够从市场下载主题作为 .apk 文件并将它们应用到我的键盘上。

我不明白一个应用程序 - 键盘 - 如何从其他应用程序 - 主题应用程序访问文件（drawables）。

你对主题有什么体验？你能给我一个起点吗？

谢谢

# python - pygame2exe 模块不可迭代

> ID：11388349
> 
> 赞同：0
> 
> 时间：2012-07-09T02:08:13.707
> 
> 标签：python, pygame, py2exe

我正在使用 pygame 站点（[此处](http://www.pygame.org/wiki/Pygame2exe)）上的 py2exe 脚本来编译一个仅使用 sys 和 pygame 的简单程序。当我运行它时，我得到这个错误：

```
running py2exe
creating C:\Users\python2.6\Desktop\build
creating C:\Users\python2.6\Desktop\build\bdist.win32
creating C:\Users\python2.6\Desktop\build\bdist.win32\winexe
creating C:\Users\python2.6\Desktop\build\bdist.win32\winexe\collect-2.6
creating C:\Users\python2.6\Desktop\build\bdist.win32\winexe\bundle-2.6
creating C:\Users\python2.6\Desktop\build\bdist.win32\winexe\temp
creating C:\Users\python2.6\Desktop\dist
*** searching for required modules ***
Traceback (most recent call last):
  File "C:\Users\python2.6\Desktop\pyg2exe.py", line 170, in <module>
    BuildExe().run() #Run generation
  File "C:\Users\python2.6\Desktop\pyg2exe.py", line 161, in run
    dist_dir = self.dist_dir
  File "C:\Python26\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python26\lib\distutils\dist.py", line 975, in run_commands
    self.run_command(cmd)
  File "C:\Python26\lib\distutils\dist.py", line 995, in run_command
    cmd_obj.run()
  File "C:\Python26\Lib\site-packages\py2exe\build_exe.py", line 243, in run
    self._run()
  File "C:\Python26\Lib\site-packages\py2exe\build_exe.py", line 296, in _run
    self.find_needed_modules(mf, required_files, required_modules)
  File "C:\Python26\Lib\site-packages\py2exe\build_exe.py", line 1306, in find_needed_modules
    mf.import_hook(f)
  File "C:\Python26\lib\site-packages\py2exe\mf.py", line 719, in import_hook
    return Base.import_hook(self,name,caller,fromlist,level)
  File "C:\Python26\lib\site-packages\py2exe\mf.py", line 136, in import_hook
    q, tail = self.find_head_package(parent, name)
  File "C:\Python26\lib\site-packages\py2exe\mf.py", line 181, in find_head_package
    if '.' in name:
TypeError: argument of type 'module' is not iterable 
```

这是 pygame2exe 代码：

```
# This will create a dist directory containing the executable file, all the data
# directories. All Libraries will be bundled in executable file.
#
# Run the build process by entering 'pygame2exe.py' or
# 'python pygame2exe.py' in a console prompt.
#
# To build exe, python, pygame, and py2exe have to be installed. After
# building exe none of this libraries are needed.
#Please Note have a backup file in a different directory as if it crashes you 
#will loose it all!(I lost 6 months of work because I did not do this)

try:
    from distutils.core import setup
    import py2exe, pygame
    from modulefinder import Module
    import glob, fnmatch
    import sys, os, shutil
    import operator
except ImportError, message:
    raise SystemExit,  "Unable to load module. %s" % message

#hack which fixes the pygame mixer and pygame font
origIsSystemDLL = py2exe.build_exe.isSystemDLL # save the orginal before we edit it
def isSystemDLL(pathname):
    # checks if the freetype and ogg dll files are being included
    if os.path.basename(pathname).lower() in ("libfreetype-6.dll", "libogg-0.dll","sdl_ttf.dll"): # "sdl_ttf.dll" added by arit.
            return 0
    return origIsSystemDLL(pathname) # return the orginal function
py2exe.build_exe.isSystemDLL = isSystemDLL # override the default function with this one

class pygame2exe(py2exe.build_exe.py2exe): #This hack make sure that pygame default font is copied: no need to modify code for specifying default font
    def copy_extensions(self, extensions):
        #Get pygame default font
        pygamedir = os.path.split(pygame.base.__file__)[0]
        pygame_default_font = os.path.join(pygamedir, pygame.font.get_default_font())

        #Add font to list of extension to be copied
        extensions.append(Module("pygame.font", pygame_default_font))
        py2exe.build_exe.py2exe.copy_extensions(self, extensions)

class BuildExe:
    def __init__(self):
        #Name of starting .py
        self.script = "Hello.py"

        #Name of program
        self.project_name = "Hello.py"

        #Project url
        self.project_url = "about:none"

        #Version of program
        self.project_version = "0.0"

        #License of the program
        self.license = "MyApps License"

        #Auhor of program
        self.author_name = "Me"
        self.author_email = "example@example.com"
        self.copyright = "Copyright (c) 2009 Me."

        #Description
        self.project_description = "MyApps Description"

        #Icon file (None will use pygame default icon)
        self.icon_file = None

        #Extra files/dirs copied to game
        self.extra_datas = []

        #Extra/excludes python modules
        self.extra_modules = [sys,pygame]
        self.exclude_modules = []

        #DLL Excludes
        self.exclude_dll = ['']
        #python scripts (strings) to be included, seperated by a comma
        self.extra_scripts = []

        #Zip file name (None will bundle files in exe instead of zip file)
        self.zipfile_name = None

        #Dist directory
        self.dist_dir ='Hellodir'

    ## Code from DistUtils tutorial at http://wiki.python.org/moin/Distutils/Tutorial
    ## Originally borrowed from wxPython's setup and config files
    def opj(self, *args):
        path = os.path.join(*args)
        return os.path.normpath(path)

    def find_data_files(self, srcdir, *wildcards, **kw):
        # get a list of all files under the srcdir matching wildcards,
        # returned in a format to be used for install_data
        def walk_helper(arg, dirname, files):
            if '.svn' in dirname:
                return
            names = []
            lst, wildcards = arg
            for wc in wildcards:
                wc_name = self.opj(dirname, wc)
                for f in files:
                    filename = self.opj(dirname, f)

                    if fnmatch.fnmatch(filename, wc_name) and not os.path.isdir(filename):
                        names.append(filename)
            if names:
                lst.append( (dirname, names ) )

        file_list = []
        recursive = kw.get('recursive', True)
        if recursive:
            os.path.walk(srcdir, walk_helper, (file_list, wildcards))
        else:
            walk_helper((file_list, wildcards),
                        srcdir,
                        [os.path.basename(f) for f in glob.glob(self.opj(srcdir, '*'))])
        return file_list

    def run(self):
        if os.path.isdir(self.dist_dir): #Erase previous destination dir
            shutil.rmtree(self.dist_dir)

        #Use the default pygame icon, if none given
        if self.icon_file == None:
            path = os.path.split(pygame.__file__)[0]
            self.icon_file = os.path.join(path, 'pygame.ico')

        #List all data files to add
        extra_datas = []
        for data in self.extra_datas:
            if os.path.isdir(data):
                extra_datas.extend(self.find_data_files(data, '*'))
            else:
                extra_datas.append(('.', [data]))

        setup(
            cmdclass = {'py2exe': pygame2exe},
            version = self.project_version,
            description = self.project_description,
            name = self.project_name,
            url = self.project_url,
            author = self.author_name,
            author_email = self.author_email,
            license = self.license,

            # targets to build
            windows = [{
                'script': self.script,
                'icon_resources': [(0, self.icon_file)],
                'copyright': self.copyright
            }],
            options = {'py2exe': {'optimize': 2, 'bundle_files': 1, 'compressed': True, \
                                  'excludes': self.exclude_modules, 'packages': self.extra_modules, \
                                  'dll_excludes': self.exclude_dll,
                                  'includes': self.extra_scripts} },
            zipfile = self.zipfile_name,
            data_files = extra_datas,
            dist_dir = self.dist_dir
            )

        if os.path.isdir('build'): #Clean up build dir
            shutil.rmtree('build')

if __name__ == '__main__':
    if operator.lt(len(sys.argv), 2):
        sys.argv.append('py2exe')
    BuildExe().run() #Run generation
    raw_input("Press any key to continue") #Pause to let user see that things ends 
```

这是我的代码：

```
import pygame, sys
from pygame.locals import *

# set up pygame
pygame.init()

# set up the window
windowSurface = pygame.display.set_mode((500, 400), 0, 32)
pygame.display.set_caption('Hello world!')

# set up the colors
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)

# set up fonts
basicFont = pygame.font.SysFont(None, 48)

# set up the text
text = basicFont.render('Hello world!', True, WHITE, BLUE)
textRect = text.get_rect()
textRect.centerx = windowSurface.get_rect().centerx
textRect.centery = windowSurface.get_rect().centery

# draw the white background onto the surface
windowSurface.fill(WHITE)

# draw a green polygon onto the surface
pygame.draw.polygon(windowSurface, GREEN, ((146, 0), (291, 106), (236, 277), (56, 277), (0, 106)))

# draw some blue lines onto the surface
pygame.draw.line(windowSurface, BLUE, (60, 60), (120, 60), 4)
pygame.draw.line(windowSurface, BLUE, (120, 60), (60, 120))
pygame.draw.line(windowSurface, BLUE, (60, 120), (120, 120), 4)

# draw a blue circle onto the surface
pygame.draw.circle(windowSurface, BLUE, (300, 50), 20, 0)

# draw a red ellipse onto the surface
pygame.draw.ellipse(windowSurface, RED, (300, 250, 40, 80), 1)

# draw the text's background rectangle onto the surface
pygame.draw.rect(windowSurface, RED, (textRect.left - 20, textRect.top - 20, textRect.width + 40, textRect.height + 40))

# get a pixel array of the surface
pixArray = pygame.PixelArray(windowSurface)
pixArray[480][380] = BLACK
del pixArray

# draw the text onto the surface
windowSurface.blit(text, textRect)

# draw the window onto the screen
pygame.display.update()

# run the game loop
while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit() 
```

我希望用它来弄清楚如何更好地使用 pygame2exe，这样我就可以在更复杂的程序上使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:06:50.000

您无需指定您正在使用 BuildExe 下的 pygame 模块。**初始化**函数。

# android - 鼠标控制 Android 屏幕

> ID：11388353
> 
> 赞同：0
> 
> 时间：2012-07-09T02:09:08.513
> 
> 标签：android, eclipse, mouse, mouseevent

我想使用类似鼠标的设备来控制 android 屏幕上的光标，我已经研究了各种方法，但没有一个能够控制其他应用程序并从 android 项目运行，所以我想知道是否有人可以帮助我。

我研究了 MonkeyRunner 和 ChimpChat，我可以通过 ChimpChat 从我的笔记本电脑控制安卓平板电脑，但我很困惑这是否可以直接从我的笔记本电脑访问平板电脑，因为这似乎会造成安全漏洞。我也无法在 Eclipse 中的 Android 应用程序中使用 ChimpChat，并且只能在 java 项目中使用它，因此任何关于在 Eclipse 的 android 项目中使用 MonkeyRunner 或 ChimpChat 的提示将不胜感激。

我还研究了使用 MouseEvents，但我不确定它们是否可以与我自己的应用程序以外的应用程序进行通信，我研究了使用 .sh 文件来传达鼠标点击和拖动，但我不确定该怎么做所以任何帮助或建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:09:06.033

无法从 Android 应用程序使用 MonkeyRunner 或 ChimpChat。MonkeyRunner 和 ChimpChat 旨在从外部计算机在设备上运行测试用例。

# html - 如何以优雅降级的方式将 Markdown 嵌入到 HTML 中？

> ID：11388355
> 
> 赞同：1
> 
> 时间：2012-07-09T02:09:30.867
> 
> 标签：html, markdown

我目前将 Markdown 放在 a`<pre>`中（这样，如果浏览器不运行 Javascript，它会将 Markdown 显示为纯文本），但是在 Markdown 中的语法是将链接包含在尖括号内的链接由浏览器解释作为`<pre>`.

我该如何处理？

顺便说一句，我正在使用 PageDown，我理解它是这个网站正在使用的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:31:13.540

虽然我不完全确定所涉及的整个过程，但如果您希望浏览器显示标记而不是解释标记，则需要在`pre`.

# r - 来自两个（或更多）向量的所有元素的唯一组合

> ID：11388359
> 
> 赞同：118
> 
> 时间：2012-07-09T02:10:58.223
> 
> 标签：r, r-faq

我正在尝试从 R 中两个不同大小的向量中创建所有元素的独特组合。

例如，第一个向量是

```
a <- c("ABC", "DEF", "GHI") 
```

第二个是当前存储为字符串的日期

```
b <- c("2012-05-01", "2012-05-02", "2012-05-03", "2012-05-04", "2012-05-05") 
```

我需要像这样创建一个包含两列的数据框

```
> data
    a          b
1  ABC 2012-05-01
2  ABC 2012-05-02
3  ABC 2012-05-03
4  ABC 2012-05-04
5  ABC 2012-05-05
6  DEF 2012-05-01
7  DEF 2012-05-02
8  DEF 2012-05-03
9  DEF 2012-05-04
10 DEF 2012-05-05
11 GHI 2012-05-01
12 GHI 2012-05-02
13 GHI 2012-05-03
14 GHI 2012-05-04
15 GHI 2012-05-05 
```

所以基本上，我通过考虑一个向量 (a) 的所有元素与第二个向量 (b) 的所有元素并列来寻找一个独特的组合。

一个理想的解决方案将推广到更多的输入向量。

* * *

> **另请参阅：**
> [如何生成组合矩阵](https://stackoverflow.com/questions/3993546/how-to-generate-a-matrix-of-combinations)

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-07-09T02:13:48.180

这也许是你所追求的

```
> expand.grid(a,b)
   Var1       Var2
1   ABC 2012-05-01
2   DEF 2012-05-01
3   GHI 2012-05-01
4   ABC 2012-05-02
5   DEF 2012-05-02
6   GHI 2012-05-02
7   ABC 2012-05-03
8   DEF 2012-05-03
9   GHI 2012-05-03
10  ABC 2012-05-04
11  DEF 2012-05-04
12  GHI 2012-05-04
13  ABC 2012-05-05
14  DEF 2012-05-05
15  GHI 2012-05-05 
```

如果生成的顺序不是您想要的，您可以在之后进行排序。如果将参数命名为`expand.grid`，它们将成为列名：

```
df = expand.grid(a = a, b = b)
df[order(df$a), ] 
```

并`expand.grid`推广到任意数量的输入列。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2018-06-20T21:37:57.870

该`tidyr`包提供了一个不错的替代方法`crossing`，它比经典`expand.grid`函数效果更好，因为（1）字符串不会转换为因子，（2）排序更直观：

```
library(tidyr)

a <- c("ABC", "DEF", "GHI")
b <- c("2012-05-01", "2012-05-02", "2012-05-03", "2012-05-04", "2012-05-05")

crossing(a, b)

# A tibble: 15 x 2
       a          b
   <chr>      <chr>
 1   ABC 2012-05-01
 2   ABC 2012-05-02
 3   ABC 2012-05-03
 4   ABC 2012-05-04
 5   ABC 2012-05-05
 6   DEF 2012-05-01
 7   DEF 2012-05-02
 8   DEF 2012-05-03
 9   DEF 2012-05-04
10   DEF 2012-05-05
11   GHI 2012-05-01
12   GHI 2012-05-02
13   GHI 2012-05-03
14   GHI 2012-05-04
15   GHI 2012-05-05 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-01-29T08:50:39.573

此[r-faq](/questions/tagged/r-faq "显示标记为“r-faq”的问题")概述中缺少 data.table -package`CJ`中的[-function](/questions/tagged/data.table "显示标记为“data.table”的问题")。使用：

```
library(data.table)
CJ(a, b, unique = TRUE) 
```

给出：

> ```
>  a          b
>  1: ABC 2012-05-01
>  2: ABC 2012-05-02
>  3: ABC 2012-05-03
>  4: ABC 2012-05-04
>  5: ABC 2012-05-05
>  6: DEF 2012-05-01
>  7: DEF 2012-05-02
>  8: DEF 2012-05-03
>  9: DEF 2012-05-04
> 10: DEF 2012-05-05
> 11: GHI 2012-05-01
> 12: GHI 2012-05-02
> 13: GHI 2012-05-03
> 14: GHI 2012-05-04
> 15: GHI 2012-05-05 
> ```

* * *

[注意：因为版本 1.12.2`CJ`会自动命名结果列（另请参见[此处](https://github.com/Rdatatable/data.table/pull/3296)和[此处](https://github.com/Rdatatable/data.table/issues/3295)）。]

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-09-16T17:44:01.813

从 1.0.0 版开始，`tidyr`提供了自己的`expand.grid()`. 它[完善了现有的 、 和 家族`expand()`，`nesting()`并`crossing()`具有与向量一起使用的低级函数](https://www.tidyverse.org/articles/2019/09/tidyr-1-0-0/)。

相比`base::expand.grid()`：

> 最快地改变第一个元素。从不将字符串转换为因子。不添加任何附加属性。返回一个小标题，而不是一个数据框。可以扩展任何广义向量，包括数据框。

```
a <- c("ABC", "DEF", "GHI")
b <- c("2012-05-01", "2012-05-02", "2012-05-03", "2012-05-04", "2012-05-05")

tidyr::expand_grid(a, b)

   a     b         
   <chr> <chr>     
 1 ABC   2012-05-01
 2 ABC   2012-05-02
 3 ABC   2012-05-03
 4 ABC   2012-05-04
 5 ABC   2012-05-05
 6 DEF   2012-05-01
 7 DEF   2012-05-02
 8 DEF   2012-05-03
 9 DEF   2012-05-04
10 DEF   2012-05-05
11 GHI   2012-05-01
12 GHI   2012-05-02
13 GHI   2012-05-03
14 GHI   2012-05-04
15 GHI   2012-05-05 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-03T18:32:09.423

您可以使用 order 函数对任意数量的列进行排序。对于你的例子

```
df <- expand.grid(a,b)
> df
   Var1       Var2
1   ABC 2012-05-01
2   DEF 2012-05-01
3   GHI 2012-05-01
4   ABC 2012-05-02
5   DEF 2012-05-02
6   GHI 2012-05-02
7   ABC 2012-05-03
8   DEF 2012-05-03
9   GHI 2012-05-03
10  ABC 2012-05-04
11  DEF 2012-05-04
12  GHI 2012-05-04
13  ABC 2012-05-05
14  DEF 2012-05-05
15  GHI 2012-05-05

> df[order( df[,1], df[,2] ),] 
   Var1       Var2
1   ABC 2012-05-01
4   ABC 2012-05-02
7   ABC 2012-05-03
10  ABC 2012-05-04
13  ABC 2012-05-05
2   DEF 2012-05-01
5   DEF 2012-05-02
8   DEF 2012-05-03
11  DEF 2012-05-04
14  DEF 2012-05-05
3   GHI 2012-05-01
6   GHI 2012-05-02
9   GHI 2012-05-03
12  GHI 2012-05-04
15  GHI 2012-05-05` 
```

# java - 重复矩形而不是移动动画

> ID：11388360
> 
> 赞同：2
> 
> 时间：2012-07-09T02:10:58.557
> 
> 标签：java, swing, paintcomponent

这是我的代码！

```
package softwarea1;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Leo
 */
//534
public class Simulation extends JPanel implements ActionListener
{
    DataModels dm;
    Timer tm = new Timer(20, this);
    private int velX = 2;
    private int a = 0; 

    public void create()
    {

        Simulation sm = new Simulation(dm);
        JFrame simulation = new JFrame();
        simulation.setTitle("Traffic light and Car park Siumulation");
        simulation.setSize(600,600);
        simulation.setResizable(false);
        simulation.setVisible(true);
        simulation.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        simulation.add(sm);
    }
    public void paintComponent(Graphics g)
    {

        // Moving Rectangle
        g.setColor(Color.RED);
        g.fillRect(a ,300, 1 ,30);
        tm.start();
    }
    @Override
    public void actionPerformed(ActionEvent e) {
        a += velX;
        repaint();
    }

} 
```

这里的主要课程：

```
 public class StartProj {
        public static void main(String[] args) {
            DataModels dm = new DataModels();
            Simulation sm = new Simulation(dm);
            sm.create();

        }
    } 
```

我尝试为 Frame 中的矩形设置动画，但是它重复了多个矩形。怎么了？帮我？我还有一些课，但它们不是必需的。非常感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T02:13:38.713

你的[`paintComponent(...)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)方法需要在第一行调用super的方法：

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g); // **** add this
    // Moving Rectangle
    g.setColor(Color.RED);
    g.fillRect(a ,300, 1 ,30);
    // tm.start(); // **** get rid of this.
} 
```

这很重要，因为 super 方法会重新绘制组件的背景，这是擦除旧矩形所必需的。

此外，您在此方法内部有程序逻辑，您从内部启动了一个 Swing Timer，这是*永远不*应该做的事情。而是找到一个更好更可控的地方来启动你的定时器。

# eclipse - Eclipse Groovy 注释自动完成/快速修复

> ID：11388365
> 
> 赞同：0
> 
> 时间：2012-07-09T02:11:54.840
> 
> 标签：eclipse, groovy, autocomplete, annotations

在 eclipse 中编写 Java 时，我可以在一些未导入的资源上点击 Control-1，并使用 eclipse 的类查找为我创建导入。节省大量时间。这应该适用于类和注释。

在 Eclipse 中编写 Groovy 时，类查找有效，但是当我对注释进行快速修复时，它甚至没有帮助我。这真的很糟糕，因为很多框架都是基于注释的。我必须回到黑暗时代，为 jUnit、Spring、Hibernate 等查找正确的导入语句。

请帮忙！

编辑：

我应该提到我正在使用 OSX 10.7.4 和 Eclipse Indigo。

另外，我刚刚注意到 Control-Spacebar 有点用。唯一的问题是它不知道注释，所以我必须手动过滤类和接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:10:20.093

不，该功能未实现。您可以尝试执行 CMD+Shift+O 来组织导入。那应该找到你要找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:37:18.383

您是否有可能关闭注释自动完成功能？这对我有用...

# javascript - jQuery提交表单损坏

> ID：11388366
> 
> 赞同：0
> 
> 时间：2012-07-09T02:12:02.723
> 
> 标签：javascript, jquery, html, forms

我尝试停止表单刷新页面，但每次提交表单时它都会刷新页面。

```
<script>
$("#myforms").submit(function() { 

   return false; 
});
</script>

<form action="" method="post" id="myforms">
      <input id="search123" style="text-align:center" type="text" value="Enter Search..." />
    </form> 
```

**更新：**

```
$(document).ready(function() {
    $("#myforms").submit(function() {
              runSearch123();
              return false;
        });
}); 
```

还是一样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:15:22.537

您需要将代码放入 jQuery[就绪处理程序](http://api.jquery.com/ready/)中。

```
<script>
$(function(){
  $("#myforms").submit(function() {
              return false;
        });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:13:47.100

如果您不想刷新页面，则需要使用 ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T02:47:29.490

提交的表单将始终刷新/重定向页面，为避免这种情况，您所要做的就是：

```
<form action="" method="post" id="myforms" onsubmit="return false">
      <input id="search123" style="text-align:center" type="text" value="Enter Search..." />
</form>​​​​​​​​​​​​​ 
```

在提交处理程序上返回 false 将阻止表单提交，并阻止页面刷新，并且真的不需要 jQuery 来阻止表单！

然而，将表单发送到服务器并且不刷新页面将需要使用 Ajax，并且 jQuery 内置了一些很棒的 ajax 功能，但看起来您需要在[jQuery 网站](http://api.jquery.com/jQuery.ajax/)上阅读一些内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T02:24:55.927

将脚本标签移动到表单之后或将代码添加到 domready 事件。

```
<form action="" method="post" id="myforms">
      <input id="search123" style="text-align:center" type="text" value="Enter Search..." />
</form>
<script>
    $("#myforms").submit(function() {
        return false;
    });
</script> 
```

[小提琴](http://jsfiddle.net/hHBTr/)

```
<script>
    $(document).ready(function(){
        $("#myforms").submit(function() {
            return false;
        });
    });
</script> 
```

[小提琴](http://jsfiddle.net/hHBTr/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T02:27:49.310

这是一个常见的问题，很容易解决。

只需摆脱`<form>`标签，而是使用：

```
<div id="myforms">
    <input id="search123" onKeyUp="setTimeout(submit,1000)" style="text-align:center" type="text" value="Enter Search..." />
</div> 
```

然后在 Javascript 中创建一个`submit()`执行所需操作的方法。

这会阻止表单回发到页面。

如果您需要在某处发布数据，请在方法中使用 JQuery 的`.post()`方法`submit()`：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T02:14:05.610

你忘记了一些括号：

```
$("#myforms").submit(function() {
        return false;
  }); 
```

# node.js - 高级查询mongodb

> ID：11388382
> 
> 赞同：1
> 
> 时间：2012-07-09T02:15:43.407
> 
> 标签：node.js, mongodb

我正在尝试使用多个键查询 mongo 中的表。我已经能够使用该`$in`函数通过 cmd 提取结果。

当我将代表查询的 json 对象注入到方法中时，我还成功地使 mongojs 与节点和查询数据库配合得很好`find()`。这是有效的代码。

```
db.collection(req.params.collection).find({"labels":{"$in":["key1","key2"]}}) //json injected 
```

当我尝试将 json 对象直接注入`find()`方法时，我得到零结果。

`{"labels":{"$in":["key1","key2"]}}`是服务器创建并由上述方法使用的确切 json 对象。

```
var json = JSON.stringify(eval("(" + newQ + ")"));
console.log(json);
db.collection(req.params.collection).find(json)  //same json object as above. 
```

我迷失了这个。我需要能够动态设置 json 对象并插入到`find`方法中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:35:46.553

在将 JSON 发送到 mongodb 之前，您无需将其转换为字符串。find 命令接受本机 JSON 作为其查询参数。

您使用的是节点本机驱动程序吗？

# paypal - 当项目添加到 $0 时，Paypal SetExpressCheckout 错误 10413

> ID：11388385
> 
> 赞同：2
> 
> 时间：2012-07-09T02:16:02.473
> 
> 标签：paypal

我正在尝试在我的网站上进行销售，客户可以免费收到商品，他们只需要支付运费。

但是，PayPal 似乎无法解决这个问题：我收到了错误`10413: The totals of the cart item amounts do not match order amounts.`

我发送给 PayPal 的请求是：

```
L_PAYMENTREQUEST_0_AMT0: "0.00"
L_PAYMENTREQUEST_0_DESC0: "Pink+Bare+Cub+nappy+and+cream+wetbag"
L_PAYMENTREQUEST_0_NAME0: "Facebook+Nappy+Giveaway"
L_PAYMENTREQUEST_0_QTY0: "1"
METHOD: "SetExpressCheckout"
PAYMENTREQUEST_0_AMT: "7.50"
PAYMENTREQUEST_0_CURRENCYCODE: "AUD"
PAYMENTREQUEST_0_CUSTOM: "agtzfmJhYnktYmFyZXISCxILY2FydEludm9pY2UYq1EM"
PAYMENTREQUEST_0_ITEMAMT: "0.00"
PAYMENTREQUEST_0_PAYMENTACTION: "Sale"
PAYMENTREQUEST_0_SHIPPINGAMT: "7.50"
VERSION: "63.0" 
```

（一些字段被编辑为简单）

我收到的回复：

```
ACK: "Failure"
BUILD: "3242673"
CORRELATIONID: "c8b284c8a04fa"
L_ERRORCODE0: "10413"
L_LONGMESSAGE0: "The%20totals%20of%20the%20cart%20item%20amounts%20do%20not%20match%20order%20amounts%2e"
L_SEVERITYCODE0: "Error"
L_SHORTMESSAGE0: "Transaction%20refused%20because%20of%20an%20invalid%20argument%2e%20See%20additional%20error%20messages%20for%20details%2e"
TIMESTAMP: "2012%2d07%2d09T02%3a03%3a48Z"
VERSION: "63%2e0 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T03:46:21.770

不幸的是，您不能拥有零价值的物品。

一种解决方案是调用一个项目`Free Pink Bare Cub nappy and cream wetbag + Shipping` 并将其值设置为运费。并使用备注明确买家只需支付运费。

另一种选择是为商品指定 0.01 的值，然后使用该`PAYMENTREQUEST_0_SHIPDISCAMT`字段为买家提供 0.01 的运费折扣以抵消这一点

编辑：虽然我没有亲自测试过一件免费商品和一件付费商品，但根据您的评论，解决方法很简单。只需拥有您的免费项目，然后创建第二个项目，称为**运输和处理**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:48:27.667

在计算最终总金额时，您应该包括以下值。

```
PAYMENTREQUEST_0_ITEMAMT - this is order total without sipping, tax etc.
PAYMENTREQUEST_0_TAXAMT
PAYMENTREQUEST_0_SHIPPINGAMT
PAYMENTREQUEST_0_INSURANCEAMT
PAYMENTREQUEST_0_HANDLINGAMT
PAYMENTREQUEST_0_AMT - this is order total + tax, shipping etc. 
```

# asp.net - 带有 ASP.NET 的存储过程。指定的参数过多错误

> ID：11388392
> 
> 赞同：2
> 
> 时间：2012-07-09T02:17:46.837
> 
> 标签：asp.net, sql-server, stored-procedures

我正在努力将我的应用程序中的所有硬编码 SQL 语句更改为存储过程。但是当我运行它时，我收到错误“过程或函数`StoredProcedure1`指定了太多参数”。这是我的SP：

```
 ALTER PROCEDURE dbo.StoredProcedure1

        (
        @Nombreproceso varchar(MAX),
        @AnalistaID int,
        @Hallazgos varchar(MAX)
        )

    AS
        insert into proceso (nombreProceso,analista_id,hallazgos) values (@Nombreproceso,@AnalistaID,@Hallazgos) 
```

这是我的数据源：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
             ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
             InsertCommand="StoredProcedure1" InsertCommandType="StoredProcedure" 
             SelectCommand="StoredProcedure1" SelectCommandType="StoredProcedure">
             <InsertParameters>
                  <asp:FormParameter DefaultValue="a" FormField="nombreProcesoTextBox" 
                     Name="Nombreproceso" Type="String" />
                 <asp:FormParameter DefaultValue="1" FormField="analista_idTextBox" 
                     Name="AnalistaID" Type="Int32" />
                 <asp:FormParameter DefaultValue="aa" FormField="hallazgosTextBox" 
                     Name="Hallazgos" Type="String" />
             </InsertParameters>
             <SelectParameters>
                 <asp:FormParameter DefaultValue="a" FormField="nombreProcesoTextBox" 
                     Name="Nombreproceso" Type="String" />
                 <asp:FormParameter DefaultValue="1" FormField="analista_idTextBox" 
                     Name="AnalistaID" Type="Int32" />
                 <asp:FormParameter DefaultValue="aa" FormField="hallazgosTextBox" 
                     Name="Hallazgos" Type="String" />
             </SelectParameters>
         </asp:SqlDataSource> 
```

这是表格：

```
 <asp:FormView ID="FormView_Proceso" runat="server" DataKeyNames="id"
    DataSourceID="SqlDataSource1" DefaultMode="Insert" >
            <InsertItemTemplate>
                nombreProceso:
                <asp:TextBox ID="nombreProcesoTextBox" runat="server" 
                    Text='<%# Bind("nombreProceso") %>' />
                analista_id:
                <asp:TextBox ID="analista_idTextBox" runat="server" 
                    Text='<%# Bind("analista_id") %>' />
                hallazgos:
                <asp:TextBox ID="hallazgosTextBox" runat="server" 
                    Text='<%# Bind("hallazgos") %>' />
                <asp:Button ID="InsertButton" runat="server" CausesValidation="True" 
                    CommandName="Insert" Text="Insert" />
                &nbsp;<asp:Button ID="InsertCancelButton" runat="server" 
                    CausesValidation="False" CommandName="Cancel" Text="Cancel" />
            </InsertItemTemplate>
        </asp:FormView> 
```

我不知道出了什么问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:26:13.373

FormView（和其他控件）隐式尝试为每个 Bind 实例添加参数，因此您最终会得到其中四个：、 和
`@Nombreproceso`您`@AnalistaID`实际上 根本不需要这些 FormParameter 或（看起来）显式参数，除非您想要覆盖某些东西（比如类型），但这样就足够了。 此外，您可以在数据源的插入事件中中断并直接检查命令和参数。`@Hallazgos``@analista_id`
`<asp:Parameter ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:31:06.190

您的`SelectCommand`值应该不同，因为存储过程`StoredProcedure1`已设置为`InsertCommand`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-16T09:07:32.907

添加我对其他谷歌员工的评论：

如果您有不同的选择和插入参数，并且只想插入几个参数：

在 GridViews 中更简单，您只需将列设置为只读

对于 FormView，将文本标签从 bind() 更改为 eval()。

# java - 我的程序有什么问题？提供的代码

> ID：11388393
> 
> 赞同：-8
> 
> 时间：2012-07-09T02:17:48.897
> 
> 标签：java

我的代码不起作用。我正在尝试为`x^(3/2)`.

它告诉我我需要“；” 在`double TwoThirdPower(double A)`. 在括号中。

```
public class JFindAlphabet {
    static Scanner sc = new Scanner(System.in);

    public static void main(String[] Theory) {

    JWaffles MyWaffles = new JWaffles();
    MyWaffles.ProgramHeading();
    double Glasses;
    Glasses = 1.0   ;

    double TwoThirdPower(double A) {
            double x;
            x = 0.0;
            while ( Math.sqrt(x*x*x) < A ) {
                x = x + 0.0001;
            }
            return x;
    }
    System.out.println("\n\t" + Glasses + " to the two thirds power = "+ TwoThirdPower(Glasses) );

  }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:21:19.033

功能

```
double TwoThirdPower(double A) 
```

在里面声明

```
public static void main(String[] Theory) 
```

您需要先关闭 Main 的定义`}`

小心缩进大括号（或使用为您执行此操作的编辑器）将有助于防止此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T02:23:26.850

您不能在方法中声明另一个方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T02:20:58.390

> 双TwoThirdPower（双A）

是方法体中间的方法声明。Java中不允许这样的事情。

将`TwoThirdPower`方法定义移到方法之外`main`，所以`main`会读

```
public static void main(String[] Theory) {
  JWaffles MyWaffles = new JWaffles();

  MyWaffles.ProgramHeading();

  double Glasses = 1.0   ;

  System.out.println("\n\t" + Glasses
    + " to the two thirds power = "+ TwoThirdPower(Glasses) );
 } 
```

然后该方法将跟随`TwoThirdPower`.

# xmpp - 使用 smack 创建 MUC

> ID：11388394
> 
> 赞同：2
> 
> 时间：2012-07-09T02:17:57.960
> 
> 标签：xmpp, smack

我正在尝试在 XMPP 中创建一个多用户聊天并且有一些困惑。

```
MultiUserChat muc = new MultiUserChat(conn1, "myroom@conference.jabber.org");
muc.create("testbot");
muc.sendConfigurationForm(new Form(Form.TYPE_SUBMIT)); 
```

这是我在[http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/muc.html上找到的基本代码](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/muc.html)

什么是“myroom@conference.jabber.org”和“testbot”？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:49:51.497

`myroom@conference.jabber.org`是 MUC 房间（如果需要，也可以是 MUC 地址）。查看javadoc [`MulitUserChat.create(String nickname)`](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/muc/MultiUserChat.html#create%28java.lang.String%29)：

> 根据一些默认配置创建房间，
> ...
> 参数：
> 昵称 - 要使用的昵称。

**因此，您将以昵称“testbot”加入 myroom@conference.jabber.org**

# c - 指针和赋值，它如何与不同的类型一起工作？

> ID：11388395
> 
> 赞同：0
> 
> 时间：2012-07-09T02:18:29.130
> 
> 标签：c, pointers

我正在通过了解一点 Python 来进行自学“Learn C the hard way”。我已经阅读了几个教程，但我无法理解指针和赋值是如何工作的。我知道如果您取消引用指针，您可以直接给它一个值，如下所示：

```
int *anint = 42; 
```

但是具体引用一个已经创建的变量的内存位置呢？具体来说，我试过：

```
char *pointer_to_strlit;
char *strlit = "some stuff";
pointer_to_strlit = &strlit; 
```

为什么在我这样做之后会导致段错误：

```
printf("I print strlit: %s\nI print it again by pointing to it: %s\nI print where the pointer is pointing: %p\n", strlit, *pointer_to_strlit, pointer_to_strlit); 
```

C 中的类型似乎很难说明它们的行为方式以及如何使用指针来引用特定类型。是否有明确的指南专门概述了指向每种不同数据类型（`char`、`*char`、`*char[]`、`int`、`struct`、`void`、`null`、 函数等）的语法？甚至可以帮助我理解规则集的步骤列表也会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:21:22.300

挂在那里！经过更多的练习，指针会变得有意义。但是如果有疑问，请尝试推理每个值的含义。使用笔和纸尝试绘制内存中的每个字节*确实*很有帮助。

`char *pointer_to_strlit;`- 在这里你声明一个指向一个字符的指针。您可能已经知道，C 中的字符串由指向该字符串第一个字符的指针表示。该字符串应以空值结尾。这意味着最终应该有一个 ASCII`0`字符表示字符串已经结束。

`char *strlit = "some stuff";`- 您的程序内存将包含此字符串的字符（准确地说是 11 个字符——您看到的文本有 10 个字符，空终止符有 1 个）。在这里，您声明了另一个指针，这次指向该字符串中的第一个字符“s”。

`pointer_to_strlit = &strlit;`- 这将值设置为指针`pointer_to_strlit`的**地址**`strlit`。这可能不是您想要的。

如果事情变得混乱，试着把每个指针想象成一个普通的旧数字——本质上就是指针，一个代表内存地址的巨大数字。让我们再看一遍上面的内容：

`char *pointer_to_strlit;`- 这里的值`pointer_to_strlit`是未定义的，因为你还没有设置它。

`char *strlit = "some stuff";`- 假设第一个“s”的地址是`1234500`。的值`strlit`将是那个数字，`1234500`。

`pointer_to_strlit = &strlit;`- 但是它自己的地址是`strlit`什么？假设是其他值`1234600`。的值`pointer_to_strlit`现在将是`1234600`。

尝试`pointer_to_strlit`按`%s`现在打印，您的程序将崩溃——地址`1234600`不是字符串的第一个字符，而是另一个数字——巨大数字的字节之一，即指针。代码将尝试遍历*它认为是字符串*以查找空终止符，最终在到达无法访问的内存时崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:21:59.827

```
int *anint = 42; 
```

42 是一个整数文字，`anint`应该保存指向整数的地址，而不是整数本身。

```
char *pointer_to_strlit;
char *strlit = "some stuff";    // Should be const char *strlit = "some stuff";
pointer_to_strlit = &strlit;    // Wrong 
```

`&strlit`给出指针的地址（即 char **），而`pointer_to_strlit`它的类型为 char*。所以，应该是

```
pointer_to_strlit = strlit; 
```

字符串文字位于只读位置。打开警告，编译器应该会给你一些不错的消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T02:28:27.400

```
int *anint = 42; 
```

这个声明是不正确的。 `anint`是指向 int 的指针，但您已将其初始化为 int。

```
char *pointer_to_strlit;
char *strlit = "some stuff"; 
```

这些声明很好。 `"some stuff"`是一个字符串文字，在 C 中是 a `char *`，所以可以用它来初始化`strlit`。

```
pointer_to_strlit = &strlit; 
```

这是不正确的。 `&strlit`是 a `char**`，因为它是 a 的地址`char*`。

```
printf(
    "I print strlit: %s\n"
    "I print it again by pointing to it: %s\n"
    "I print where the pointer is pointing: %p\n", 
    strlit, *pointer_to_strlit, pointer_to_strlit
); 
```

在这里你使用`strlit`as `%s`，这很好。然后你使用`*pointer_to_strlit`as `%s`，这很糟糕：`%s`需要一个指向以空字符结尾的字符串的指针，你给了它一个`char`，所以它出现了段错误。

# objective-c - NSPredicate 根据父实体的属性搜索子实体实例

> ID：11388396
> 
> 赞同：2
> 
> 时间：2012-07-09T02:18:31.590
> 
> 标签：objective-c, core-data, ios5, nspredicate

我试图根据字段“guid”搜索子实体。guid 字段在父实体中定义。我想找到 guid 等于我传入的某个值的子实例，但它总是返回 0 值的结果。我假设核心数据没有看到 guid 属性，因为它在父实体中定义。

这是我的谓词：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];

[request setEntity:[NSEntityDescription entityForName:CHILD_ENTITY inManagedObjectContext:managedObjectContext]];
[request setPredicate:[NSPredicate predicateWithFormat:@"(guid like '%@')", guid]];

NSError *error = nil;

NSArray *results = [managedObjectContext executeFetchRequest:request error:&error];

if (results != nil && results.count > 0)
    return YES;
else 
    return NO; 
```

我的谓词格式错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:22:53.973

解决方案是使用属性的完整密钥路径。

```
[NSPredicate predicateWithFormat:@"parent.guid like %@", guid] 
```

也就是说，如果 parent 是指向您所说的逻辑父级的属性的名称。

当然，如果您的父母指的是字面继承（即 [child isKindOfClass:[parent class]] 是 YES），那么问题可能只是引号。我假设您的意思是一个逻辑父级，它是一个不同的实例，并且与子级有关系（我猜这是 OOP 术语 VS ORM 术语，或类似的东西）。

此外，在谓词中不需要括号或引用 %@ 就这么简单。

# c - C语言中的函数参数...

> ID：11388402
> 
> 赞同：1
> 
> 时间：2012-07-09T02:20:01.657
> 
> 标签：c, function, arguments

```
void foo(const gchar *a, ...)
{
    do_something();
} 
```

是什么`...`意思？

它只适用于 glib 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:25:17.667

它是[可变长度参数列表](http://www.cprogramming.com/tutorial/c/lesson17.html)，它允许函数具有灵活数量的参数。它是标准的一部分。因此，它适用于支持标准 C（或支持此功能本身）的任何地方，而不仅仅是 glib。

# jquery - jquery fancybox 媒体助手

> ID：11388403
> 
> 赞同：2
> 
> 时间：2012-07-09T02:20:44.027
> 
> 标签：jquery, fancybox, fancybox-2

我是 Jquery 和 fancyBox v.2 (fancyApps) 的新手，需要一些说明：

1）fancyBox 媒体助手的功能/目的是什么？如果我使用例如 fancyBox iFrame 功能，例如 youtube(iframe)，有什么区别？

```
$(document).ready(function() {
    $('.fancybox-media').fancybox({
        openEffect  : 'none',
        closeEffect : 'none',
        helpers : {
            media : {}
        }
    });
});

<a class="various fancybox.iframe" href="http://www.youtube.com/embed/L9szn1QQfas autoplay=1">Youtube (iframe)</a> 
```

2）除了在标题中链接以下js之外，我还需要额外的css文件吗？

```
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:26:39.290

js文件本身的解释和使用。它允许您拥有针对最常见媒体格式的任何锚点，例如

```
<a class="fancybox" href="http://www.youtube.com/watch?v=opj24KnzrWo">open youtube</a> 
```

...使用简化的自定义脚本，例如

```
$(".fancybox").fancybox({
  helpers : {
      media : {}
  }
}); 
```

（脚本中没有类型、维度或复杂`replace`函数）

支持的格式（在`href`属性内）是：

```
 *      Youtube
 *          http://www.youtube.com/watch?v=opj24KnzrWo
 *          http://youtu.be/opj24KnzrWo
 *      Vimeo
 *          http://vimeo.com/25634903
 *      Metacafe
 *          http://www.metacafe.com/watch/7635964/dr_seuss_the_lorax_movie_trailer/
 *          http://www.metacafe.com/watch/7635964/
 *      Dailymotion
 *          http://www.dailymotion.com/video/xoytqh_dr-seuss-the-lorax-premiere_people
 *      Twitvid
 *          http://twitvid.com/QY7MD
 *      Twitpic
 *          http://twitpic.com/7p93st
 *      Instagram
 *          http://instagr.am/p/IejkuUGxQn/
 *          http://instagram.com/p/IejkuUGxQn/
 *      Google maps
 *          http://maps.google.com/maps?q=Eiffel+Tower,+Avenue+Gustave+Eiffel,+Paris,+France&t=h&z=17
 *          http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16
 * 
```

顺便说一句，您不需要任何额外的 CSS 文件，只需按照上面的说明使用它。

# node.js - Redis 重启时的 Node.js + Socket.io 和 Redis Store 问题

> ID：11388405
> 
> 赞同：2
> 
> 时间：2012-07-09T02:21:16.177
> 
> 标签：node.js, redis, socket.io, node-redis

我希望其他人以前遇到过这个问题：

### 问题描述

我已将 Socket.IO 配置为使用 redis-store 模块，该模块非常适合在向房间广播/发出事件时保持我们的节点实例同步。但是，我一直在测试故障点，似乎当 redis 实例重新启动时，节点服务器停止接收来自其他节点的消息。

这是我设置socket.io客户端的方式（在这段代码之前创建redis连接）

```
// Setup the socket server for web clients
self.ioServer = socketIo.listen(9000);
self.ioServer.enable('browser client minification');    // send minified client
self.ioServer.set('log level', 3);

self.ioServer.set( 'store', new socketIo.RedisStore ({
        redisPub: self.redisPub, 
        redisSub: self.redisSub, 
        redisClient: self.redisStore
    })
); 
```

本质上，每当 redis 崩溃/重启时，socket.io redis-store 无法继续通过 redis 向其他节点服务器发送事件。

重新连接到 redis 服务器是否需要采取任何特殊步骤？我花了很多时间四处寻找，希望能找到解决这个问题的方法，但没有任何运气。

问候，

-瑞安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:01:09.153

万一有人对此感兴趣，这是我为上述问题实施的修复：

由于系统正在为 socket.io 节点使用集群，因此我正在捕获 redis 连接（reidsPub、redisSub 等）上的任何“结束”事件并终止分叉进程。在主进程上，我捕捉到子进程的退出并重新分叉。

附带说明一下，我还发现了 redis 和 socket.io 的 redis-store 的另一个烦人的问题：如果没有与 redis 交换数据，redis 连接最终将超时。为了解决这个问题，我必须实现一个简单的保持活动功能，该功能每 15 秒运行一次，它与 redis 交换所有上述 redis 连接的数据。

通常我可以使用默认的redis客户端重新连接逻辑，但是因为我无法知道redis服务器是否真的重新启动，或者它是否只是超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:17:44.850

我没有详细介绍 redis-store 的实现。我不相信带有 redis 的 pub-sub 默认备份到磁盘，如果服务器重新启动，消息就会丢失。除非 redis-store 已经为您做同样的事情，否则除了使用 pub-sub 之外，您还可以使用列表或排序集来存储消息。

如果 redis-store 默认不提供，您将需要确保您的列表/排序集不会增长太大而对性能产生负面影响。您可以考虑使用 MULTI/EXEC（并查看 ACK 消息）事务进行 ACID 保护，并确保消息不会被删除，除非您的订阅者处理/使用。

您可以随时查看提供持久（磁盘支持）消息队列/主题的其他消息服务器，例如 ActiveMQ 等。

希望能帮助到你。

# php - 如何处理 BCrypt 散列密码？

> ID：11388409
> 
> 赞同：1
> 
> 时间：2012-07-09T02:21:28.733
> 
> 标签：php, hash, bcrypt

鉴于此示例取自[http://php.net/manual/en/function.crypt.php](http://php.net/manual/en/function.crypt.php)

`crypt('rasmuslerdorf', '$2a$07$usesomesillystringforsalt$')`

首先：如果散列方法是 BLOWFISH，盐的长度是多少？

这是我为上述示例得到的输出：

`$2a$07$usesomesillystringsaled/4C6/vYhuH1f.Z/Kwf8X.c.e0jjHay`

是否有意将盐、轮次和我使用的散列方法存储在返回的字符串中？当我存储在此行为中散列的密码时，是否存储以 开头的整个字符串`$2a`？

在对照数据库中的密码检查输入的密码时，如果没有任何东西将其与哈希的其余部分分开，我如何从字符串中检索盐？

编辑：为什么这种方法比使用 SHA512/256 更安全？如果有人对一堆带有盐的哈希使用字典攻击/蛮力方法，他们能更快地破解密码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:25:09.577

是的，在字符串中存储盐和其他加密参数是有意的；它使您不必手动执行此操作，并在必须更新轮数时保持向后兼容性。

至于 salt 中的有效字符数，[为 22](http://php.net/crypt "PHP 文档")。因此，这两行将产生相同的哈希：

```
crypt('rasmuslerdorf', '$2a$07$usesomesillystringforsalt$')
crypt('rasmuslerdorf', '$2a$07$usesomesillystringforsalp$') 
```

至于从数据库中检查结果，只需使用数据库本身的字符串作为`crypt`.

[这是一个演示。](http://codepad.viper-7.com/4zItCo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:53:56.760

1）您需要一个 22 个字符的盐，尽管并非所有字符 22 位都被使用。这意味着您可以获得相同的哈希，具有一组不同的字符 22。

2）在结果哈希中存储盐和轮次确实是有意的。通过这种方式，您可以从现有哈希中提取此信息，并使用它来检查用户输入。您应该存储整个哈希，长度为 60 个字符。

3）您不需要从哈希中提取参数来对其进行测试，这会`crypt()`为您执行 PHP 功能。只需将现有哈希作为新的 crypt 参数传递。[我试图在使用 bcrypt 的密码散列](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)一文中解释如何做到这一点。如果您正在寻找一个知名的库，您可以查看[phpass](http://www.openwall.com/phpass/)。

4）更安全，因为它需要一定的CPU时间。其他哈希被设计得很快，但这使得每秒使用数十亿个密码进行暴力攻击成为可能。对于新一代计算机，所需时间可以稍后根据成本因素进行调整。

# php - 在搜索中包含可能的搜索名称的下拉列表

> ID：11388412
> 
> 赞同：1
> 
> 时间：2012-07-09T02:22:12.123
> 
> 标签：php, mysql, search

我有以下代码，但此代码仅适用于数据库中的精确匹配，我想要的是例如你想搜索“约翰琼斯”，如果你只输入 joh 他的名字以及其他同名用户将出现在下拉列表中，以及姓氏的 jone。我已经尝试了几个“LIKE”功能，但我似乎无法弄清楚。谢谢！

```
<?php
    include ('core/init.php');

    logged_in_redirect();

    if(empty($_POST['friend_search'])) {
        header('Location: friends.php');
    }
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>

        <title> My Friends</title>
        <link href='css.css' rel='stylesheet' type='text/css'/>
    </head>
    <body class='home-body'>
        <?php include_once("core/analyticstrackingcode.php") ?>
        <div class='whitebg'>
            <?php include('core/navbar.php'); ?>
            <?php
                $friend = $_POST['friend_search'];
                $found=0;
                $search = mysql_query("SELECT * FROM users");
                while($row = mysql_fetch_array($search)) {
                    $possible_match_name = $row['first_name'];
                    $possible_match_id = $row['id'];
                    $possible_match_email = $row['email'];
                    $possible_match_profilepic = $row['profilepic'];
                    $this_users_email = $_SESSION['email'];
                    if($possible_match_email!=$this_users_email) {
                        if($friend==$possible_match_email) {
                            echo "
                                <html>
                                    <div class='friendsearchentries'>
                                        <img src='$possible_match_profilepic' class='friend-match-prof-pic' />
                                        <a href='confirm_send.php?id=$possible_match_id' class='friend-match-link' ><center>".$possible_match_name."</center></a>
                                    </div>
                                </html>";
                                $found=1;
                        }
                    }
                }
                if($found==0) {
                    echo "Sorry, we found no matches.";
                }
            ?>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:54:50.973

您应该在 SQL 查询中使用 LIKE 代替：

[http://www.mysqltutorial.org/sql-like-mysql.aspx](http://www.mysqltutorial.org/sql-like-mysql.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:32:19.830

如果您在 MySQL 中使用 MyISAM 或 InnoDB 引擎，您可以使用一些内置的全文搜索功能。

您将能够执行以下操作：

```
"SELECT * FROM users WHERE MATCH (first_name, email) AGAINST ('john jones' IN BOOLEAN MODE)" 
```

例如，这对于使用 PHP API 和 Ajax 构建“键入时搜索”功能非常有用。

一定要阅读这些，你可能需要对你的数据库做一些工作来确定它是在运行 MyISAM 还是 InnoDB，并且可能需要一些配置。

[http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)

[http://dev.mysql.com/doc/refman/5.6/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-boolean.html)

# php - Apache 如何识别请求来自 ASP 或 PHP 脚本？

> ID：11388415
> 
> 赞同：-1
> 
> 时间：2012-07-09T02:22:39.987
> 
> 标签：php, apache, asp-classic

Apache 如何识别请求来自**ASP 或 PHP 脚本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:31:14.033

您可以查看 HTTP 响应标头字段“Server”，它会告诉您类似*Server: Apache/2.4.1 (Unix)*

此外，ASP.NET 沿*X-Powered-By:ASP.NET*行提供了一个非标准标头 ，我知道 PHP 做同样的事情（尽管我目前找不到实际消息。）底线是看HTTP 响应标头。

[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

我应该补充一点，这些都不会 100% 确定地告诉您（在前一个示例中，Unix 可能正在运行其他一些服务器端语言；在后一个示例中，自定义标头很容易被抑制甚至欺骗），但它会给您一个相当自信地猜测你在寻找什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:28:39.120

通常通过文件扩展名。

例如在 apache 中你应该有这样的行：

```
<IfModule mod_php5.c>
     <FilesMatch "\.ph(p3?|tml)$">
          SetHandler application/x-httpd-php
     </FilesMatch>
</IfModule> 
```

# gwt - 锚gwt超链接只有几个字

> ID：11388417
> 
> 赞同：0
> 
> 时间：2012-07-09T02:23:03.337
> 
> 标签：gwt, checkbox, anchor, gwtp

我想在 gwt 中创建一个带有“我同意条款和服务”文本的复选框。但我只希望链接适用于“条款和服务”这一短语。似乎有了锚，整个文本就可以作为一个超链接。有什么方法可以让同一锚点的选定几个单词显示为超链接？或者有没有办法在同一个锚内添加两个不同的超链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T02:44:01.527

```
 CheckBox cb = new CheckBox();
    cb.setHTML("I agree to the <a href='#'>Terms and Services</a>"); 
```

我希望我能明白你的想法：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:29:52.697

让我们用 UiBinder 来做：

```
<g:HTMLPanel>
  <label>
    <g:SimpleCheckBox ui:field="checkbox" />
    I agree to the
    <g:Anchor ui:field="terms">Terms and Services</g:Anchor>
  </label>
</g:HTMLPanel> 
```

有很多方法可以做到这一点，具体取决于您要如何响应事件（您要响应事件的 IFF）。

但是在 UiBinder 的帮助下深入到 HTML 确实是要走的路：不要过度使用小部件。

# asp.net - SQL ASP.NET 插入麻烦

> ID：11388420
> 
> 赞同：1
> 
> 时间：2012-07-09T02:23:25.520
> 
> 标签：asp.net, sql

首先让我告诉你，我已经搜索了至少一天的遮阳篷，所以我终于想试试这个。

我正在尝试为一个学校项目创建这个购物车，但我正在努力处理代码。一位老师（sql）告诉我检查数据库，有一些错误（不是我的错）。我修复了这些小错误。

现在，当我只执行 SELECT xxxx FROM xxx = no 错误时，所有内容都显示在 gridview 中。当我添加第二部分时，我得到一个“FROM 子句中的语法错误”。添加第三部分并排除第二部分是相同的错误。

也许我唯一能想到的就是数据库中的这个小东西：字段属性一般索引：是（无重复）

它可能是次要的，但它让我发疯，所以非常感谢任何帮助。

以下是相关代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (Request.QueryString["add"] == null)
            {
                Response.Redirect("producten.aspx");
            }
            else
            {
                Label a = new Label();
                a.Text = Request.QueryString["add"];
                lbl_testing.Text = a.Text;

                OleDbConnection conn = new OleDbConnection();
                conn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0; "
                    + "Data Source=|DataDirectory|webwinkel.accdb";

                OleDbCommand cmd = new OleDbCommand();
                cmd.Connection = conn;
                cmd.CommandText = "SELECT prijs , product_id FROM Product" +
                                  "WHERE product_id ='" + lbl_testing.Text + "'";

                //"INSERT INTO Orderregels(prijsperstuk, product_id)" +

                try
                {
                    conn.Open();
                    OleDbDataReader reader = cmd.ExecuteReader();
                    Label1.Text = "";
                    GridView1.DataSource = reader;
                    GridView1.DataBind();
                    reader.Close();
                }
                catch (Exception exc)
                {
                    Label1.Text = exc.Message;
                }
                finally
                {
                    conn.Close();
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T02:27:28.157

*您必须在TableName*和*WHERE*子句之间添加空格。

```
cmd.CommandText = "SELECT prijs , product_id FROM Product " 
                         + "WHERE product_id ='" + lbl_testing.Text + "'"; 
```

使用*参数*来避免此类问题和`SQL Injection.`

```
 cmd.CommandText = "SELECT prijs , product_id FROM Product WHERE product_id=@productid";
  cmd.Parameters.Add("@productid",OleDbType.VarChar,10).Value=lbl_testing.Text;
  //if Id is `numeric` type then use
  //cmd.Parameters.Add("@productid",OleDbType.Integer.Value=lbl_testing.Text; 
```

# html - 如何将一个 div 放在另一个已经在 html 中呈现的 div 中

> ID：11388423
> 
> 赞同：0
> 
> 时间：2012-07-09T02:23:32.513
> 
> 标签：html

由于我的问题的性质，我还没有找到一个很好的例子或解决方案。

背景：
我正在建立一个只允许我使用他们的模板（www.mywedding.com）的婚礼网站。这是一个非常好的网站，到目前为止，我认为他们在允许用户制作一个相当定制的网站方面做得很好。问题是，我和我的未婚夫比其他人更有创造力。我已经能够插入一些 HTML 标签，例如`<img>`和`<a href>`，这样我就可以放置链接和比它们允许的更多的图像，但现在我的未婚夫希望我将我们的商标首字母放在每个页面的顶部。

我正在尝试做
的事情：现有结构

```
<body>
    <div id="t-container">
        <div id="t-header">
            <h1><span></span></h1>
            <h2><span></span></h2>
            <div id="t_header_image">
                <img src="thesource" />
            </div>
            <!-- This is where I want to place my content -->
        <div id="t-header">
        <div id="t-center">
            <div id="t-links">
                <!-- The navigation links on left side -->
            </div>
           <div id="t-content">
                <!-- The content from their templates -->
                <div id="myImage">
                    <!-- This is the content I want up top -->
                    <img src="mySource" />
                </div>
           </div>
       </div>
   </div> 
```

我想要做的是将我的图像（div 或没有 div）移动到标题部分。他们的网站是用 PHP 编写的，我的 UI 知识非常有限。我不确定是否可以注入 css 或使用 jQuery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:34:09.613

尝试将 CSS 添加到您的 img 标签中，看看他们的模板是否允许：

```
<img src="mySource" style="position:absolute; top:0; right:0" /> 
```

这应该将您的图像放在页面的右上角。只需摆弄`top`and`right`值即可获得您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:30:26.907

如果您被允许使用 javascript，那么`innerHTML`会做您需要的。

```
document.getElementById('t-header').innerHTML+='<your html="stuff">'; 
```

# coffeescript - 从 CoffeeScript 的数组中获取每两个元素

> ID：11388424
> 
> 赞同：6
> 
> 时间：2012-07-09T02:24:14.583
> 
> 标签：coffeescript

我想使用数组中的每一对条目。在 CoffeeScript 中是否有一种有效的方法可以在不使用`length`数组属性的情况下做到这一点？

我目前正在做类似以下的事情：

```
# arr is an array
for i in [0...arr.length]
    first = arr[i]
    second = arr[++i] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T02:40:23.213

CoffeeScript用于调整正常循环[`for ... by`](http://coffeescript.org/#loops)的步长。`for`所以以 2 步迭代数组并使用索引获取元素：

```
a = [ 1, 2, 3, 4 ]
for e, i in a by 2
    first  = a[i]
    second = a[i + 1]
    # Do interesting things here 
```

演示：http: [//jsfiddle.net/ambiguous/pvXdA/](http://jsfiddle.net/ambiguous/pvXdA/)

如果需要，可以在循环内使用解构赋值和数组切片：

```
a = [ 'a', 'b', 'c', 'd' ]
for e, i in a by 2
    [first, second] = a[i .. i + 1]
    #... 
```

演示：http: [//jsfiddle.net/ambiguous/DaMdV/](http://jsfiddle.net/ambiguous/DaMdV/)

您还可以跳过忽略的变量并使用范围循环：

```
# three dots, not two
for i in [0 ... a.length] by 2
    [first, second] = a[i .. i + 1]
    #... 
```

演示：http: [//jsfiddle.net/ambiguous/U4AC5/](http://jsfiddle.net/ambiguous/U4AC5/)

就像其他所有代码一样，它会编译成一个`for(i = 0; i < a.length; i += 2)`循环，因此该范围不会花费您任何费用。​</p>

# google-app-engine - 在 GAE 中导入 Beautiful Soup 4 时遇到问题

> ID：11388426
> 
> 赞同：2
> 
> 时间：2012-07-09T02:25:04.223
> 
> 标签：google-app-engine, beautifulsoup

看起来像：

```
from BeautifulSoup.bs4 import BeautifulSoup 
```

文件结构是/BeautifulSoup/bs4/（这个文件夹里的所有东西）

“builder”和“dammit”文件似乎可以正常导入，但我不断收到 element.py 的错误消息：

ImportError：没有名为 bs4.element 的模块

任何人都可以对此有所了解吗？谢谢！

更新：摆脱 BeautifulSoup 外部文件夹，然后`from bs4 import BeautifulSoup`工作正常。感谢所有的反馈:)

# javascript - 从对象内调用的函数是否可以访问该对象的范围？

> ID：11388429
> 
> 赞同：0
> 
> 时间：2012-07-09T02:25:18.593
> 
> 标签：javascript

我想不出一种方法来解释我在标题中所做的更多的事情，所以我会重复一遍。从对象内调用的匿名函数是否可以访问该对象的范围？下面的代码块应该解释我想要做的比我能做的更好：

```
function myObj(testFunc) {
    this.testFunc = testFunc;

    this.Foo = function Foo(test) {
        this.test = test;

        this.saySomething = function(text) {
            alert(text);
        };
    };

    var Foo = this.Foo;

    this.testFunc.apply(this);
}

var test = new myObj(function() {
    var test = new Foo();
    test.saySomething("Hello world");
}); 
```

当我运行它时，我收到一个错误：“Foo 未定义。” 我如何确保`Foo`在调用匿名函数时定义它？这是一个用于进一步实验[的 jsFiddle 。](http://jsfiddle.net/grzUd/4/)

**编辑**：我知道将行添加`var Foo = this.Foo;`到我传递给我的实例的匿名函数`myObj`将使这项工作。但是，我想避免在匿名函数中公开变量——我还有其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T02:27:44.630

应该是`this.Foo`：

```
var test = new myObj(function() {
    var test = new this.Foo();
    test.saySomething("Hello world");
}); 
```

[http://jsfiddle.net/grzUd/5/](http://jsfiddle.net/grzUd/5/)

或者使用`with`：

```
var test = new myObj(function() {
    with (this) {
        var test = new Foo();
        test.saySomething("Hello world");
    }
}); 
```

[http://jsfiddle.net/grzUd/6/](http://jsfiddle.net/grzUd/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T02:28:22.600

更改`var test = new Foo();`为`var test = new this.Foo();`。

***编辑：***或者您可以将其作为参数传递。

```
function myObj(testFunc) {
    this.testFunc = testFunc;

    var Foo = function (test) {
        this.test = test;
        this.saySomething = function(text) {
            alert(text);
        };
    };

    this.testFunc(Foo);
}

var test = new myObj(function(Foo) {
    var test = new Foo();
    test.saySomething("Hello world");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T03:13:27.523

您似乎对范围链上的标识符解析和属性解析之间的区别感到困惑。

*Foo*是*myObj*实例的一个**属性**（即它是一个对象属性）。调用会将*Foo*解析为作用域链上的变量，这不是查找它的正确位置。这就是为什么 Petah 的答案尝试使用*with*，将*this*对象的对象属性放在作用域链上。*`new Foo`*

# android - 本机应用程序中的服务器发送事件？

> ID：11388430
> 
> 赞同：4
> 
> 时间：2012-07-09T02:25:29.733
> 
> 标签：android, server-sent-events

有什么方法可以在原生 Android 应用程序中使用[服务器发送的事件？](http://dev.w3.org/html5/eventsource/ "服务器发送的事件")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:11:34.717

您可以，但您必须自己实现规范的解析、重新连接和其他部分。

这不是太繁重；您需要在 http 库之上构建，该库允许您处理通过网络传入的字节。我已经构建了一个解析 SSE 流的[Python 库](http://pypi.python.org/pypi/sseclient/)，并且基于[Requests](http://docs.python-requests.org/en/latest/)构建。您应该能够用 Java 编写类似的东西。

# json - C++ XE2 - 如何读取嵌套 JSON？

> ID：11388433
> 
> 赞同：0
> 
> 时间：2012-07-09T02:26:01.557
> 
> 标签：json, nested-sets, c++builder-xe2

我一直在寻找如何使用 C++ Builder XE2 读取嵌套 JSON 的方法`TJSONObject`。

Delphi中有一些例子，但他们使用`TJSONValue`对象，但在C++版本中，这个类有一个纯虚函数，不能创建。

一些示例 JSON：

```
{
  "totalHits": 4170,
  "totalCount": 4170,
  "startIndex": 0,
  "adverts": [
    {
      "Id": "14380005",
      "companyInfo": {
        "companyName": "Clarion Hotel Sign",
        "orgNumber": "5564660107",
        "companyText": "hotell"
      },
      "address": {
        "streetName": "Street race 2",
        "postCode": "101 26",
        "postArea": "MY AREA",
        "postBox": "Box 310"
      },
      "homepage": "www.mypage.net"
    }
  ]
} 
```

整个 JSON 都存储在 JSON 对象中，相信我，它就在那里 :)

```
TJSONObject *JSON = new TJSONObject; 
```

获取totalHits 和totalCount 的值没有问题，但是如何获取`"companyName"`值？！？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:28:25.403

我为将来遇到相同问题的其他人发布了这个迟来的答案....

```
TJSONArray* jArray = (TJSONArray* )JSON->Get("adverts")->JsonValue;
TJSONObject* jCompanyInfo = (TJSONObject*)((TJSONObject*)jArray->Get(0))
       ->Get("companyInfo")->JsonValue);
String companyName =  jCompanyInfo->Get("companyName")->JsonValue->Value()); 
```

# objective-c - NSTableViewCell 版本事件完成

> ID：11388434
> 
> 赞同：1
> 
> 时间：2012-07-09T02:27:04.397
> 
> 标签：objective-c, macos, cocoa

有一个`NSTextFieldCell`in `NSTableView`，它是可编辑的。通过双击`NSTextFieldCell`用户可以更改它的内容，我如何知道编辑完成的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:05:03.610

在 dasblinkenlight 的回答中，您很可能拥有您需要的方法，但如果您需要捕获编辑事件，您可以获得`NSControl`调用的所有正常委托方法，例如：

```
- (void)controlTextDidEndEditing:(NSNotification *)aNotification 
```

它完全符合您的要求 - 它会在编辑完成时通知您。更多在[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:05:07.050

在查看了苹果的示例代码后，我发现了一个简单的方法：只需制作一个方法

```
 - (IBAction)textTitleChanged:(id)sender; 
```

并将 NSTextFieldCell 的选择器绑定到它。

# php - 我是否需要 sqllite 用于 php 中的 symfony2

> ID：11388435
> 
> 赞同：0
> 
> 时间：2012-07-09T02:27:07.233
> 
> 标签：php, symfony

我在服务器上安装 symfony 2 但我没有 sqlite 但 mysql。

但是 config.php 说我需要 sqllite3。

那是必须的还是我可以使用mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:32:46.247

sqlite 仅用于网络分析器。您可以禁用分析器，它不会抱怨 sqlite。

从您的 AppKernel.php 中删除它

```
$bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle(); 
```

或者最好安装`php-sqlite`

如果无论如何不能使用 sqlite，我相信探查器实际上会退回到平面文件。所以我想说你可以放心地忽略来自 config.php 的消息

# jquery - 在选择合适的 jQuery AJAX 超时长度时应该考虑哪些因素？

> ID：11388437
> 
> 赞同：0
> 
> 时间：2012-07-09T02:27:20.793
> 
> 标签：jquery

我正在开发一个将依赖于大量 jQuery AJAX 请求的 Web 应用程序。在我的开发环境中，通常 PHP 会在 <300ms 内处理并返回数据。

在典型的小型 Web 托管设置的生产环境中，在为异步、jQuery GET 请求设置适当的超时时我应该考虑哪些因素，以便可以随时了解客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:43:44.653

首先，我假设我们正在讨论不锁定浏览器的异步请求。

其次，它实际上取决于负责处理该请求的服务器的性能配置文件以及成功请求/响应的响应时间分布情况。

如果成功的请求可以在几毫秒到几分钟内完成，具体取决于请求的类型或服务器负载，那么您最好让超时时间至少与成功请求的时间一样长（允许用户等待成功请求完成的选项）。如果您担心用户变得不耐烦，那么如果请求没有快速完成，则在 10 秒后添加取消或停止按钮，这样不耐烦的用户可以保释，但耐心的用户可以等待它完成。

另一方面，如果您从研究服务器或从经验中知道，如果请求在 15 秒内没有完成，那么它不太可能成功完成，那么将超时时间设置为超过那。

第三，它还取决于 ajax 调用的重要性以及它如何适应用户交互。如果它是可选的后台操作（可能是自动完成匹配请求），您可以更快地放弃，并将下一个请求安排在未来的某个时间。如果它是一个直接的用户操作（如保存按钮），那么您真的应该努力让请求成功完成并给它更长的时间。

总而言之，您应该考虑以下因素：

1.  ajax 请求在后台是可选的（如自动完成）还是特定的用户操作（如保存或加载）？

2.  服务器获得成功的 ajax 响应可能需要的最长时间是多少？您应该让患者用户能够等待至少那么长时间以使请求成功。

3.  您是否为不耐烦的用户提供取消长期运行请求的能力？如果是这样，您可以让请求持续更长时间。

4.  如果您不知道服务器的响应速度如何，那么您可能应该让它运行至少 120 秒，因为某些服务器可能需要这么长时间，但是您应该考虑让不耐烦的用户能够中止请求并继续他们的其他业务.

# php - 将左连接限制为返回一个结果？

> ID：11388443
> 
> 赞同：15
> 
> 时间：2012-07-09T02:27:49.523
> 
> 标签：php, mysql, join, left-join

我目前将此左连接作为查询的一部分：

```
LEFT JOIN movies t3 ON t1.movie_id = t3.movie_id AND t3.popularity = 0 
```

麻烦的是，如果有几部电影具有相同的名称和相同的受欢迎程度（不要问，就是这样:-)）然后返回重复的结果。

综上所述，我想将左连接的结果限制为一个。

我试过这个：

```
LEFT JOIN 
    (SELECT t3.movie_name FROM movies t3 WHERE t3.popularity = 0 LIMIT 1)
     ON t1.movie_id = t3.movie_id AND t3.popularity = 0 
```

第二个查询因错误而死：

```
Every derived table must have its own alias 
```

我知道我要问的内容有点模糊，因为我没有提供完整的查询，但是我要问的内容通常可能吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-09T02:30:42.193

错误很明显——您只需要在子查询关闭后为其创建一个别名`)`并在您的子句中使用它，`ON`因为每个表，无论是派生的还是真实的，都必须有自己的标识符。然后，您需要包含`movie_id`在子查询的选择列表中才能加入它。由于子查询已包含`WHERE popularity = 0`，因此您无需将其包含在连接`ON`子句中。

```
LEFT JOIN (
  SELECT
    movie_id, 
    movie_name 
  FROM movies 
  WHERE popularity = 0
  ORDER BY movie_name
  LIMIT 1
) the_alias ON t1.movie_id = the_alias.movie_id 
```

如果您在外部使用这些列之一，请通过例如`SELECT`引用它。`the_alias.movie_name`

### 更好地理解需求后更新：

要让每个组加入一个，您可以使用聚合`MAX()`或`MIN()`在`movie_id`子查询中对其进行分组。这样就不需要子查询`LIMIT`了——您将收到第一个带有 的`movie_id`每个名称`MIN()`或最后一个带有`MAX()`.

```
LEFT JOIN (
  SELECT
    movie_name,
    MIN(movie_id) AS movie_id
  FROM movies
  WHERE popularity = 0
  GROUP BY movie_name
) the_alias ON t1.movie_id = the_alias.movie_id 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-23T12:27:33.170

```
LEFT JOIN movies as m ON m.id = (
    SELECT id FROM movies mm WHERE mm.movie_id = t1.movie_id
    ORDER BY mm.id DESC
    LIMIT 1    
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T02:37:40.020

您可以尝试添加`GROUP BY t3.movie_id`到第一个查询

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T02:30:54.533

试试这个：

```
LEFT JOIN 
    (
     SELECT t3.movie_name, t3.popularity   
     FROM movies t3 WHERE t3.popularity = 0 LIMIT 1
    ) XX
     ON  t1.movie_id = XX.movie_id AND XX.popularity = 0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-22T11:10:12.583

在 MySQL 5.7+ 上使用`ANY_VALUE & GROUP_BY`：

```
SELECT t1.id,t1.movie_name, ANY_VALUE(t3.popularity) popularity
FROM t1
LEFT JOIN t3 ON (t3.movie_id=t1.movie_id AND t3.popularity=0)
GROUP BY t1.id 
```

更多信息 [LEFT JOIN 仅第一行](https://stackoverflow.com/questions/15626493/left-join-only-first-row/61522263#61522263)

[https://dev.mysql.com/doc/refman/5.7/en/group-by-handling.html](https://dev.mysql.com/doc/refman/5.7/en/group-by-handling.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-28T10:56:33.237

左加入 1 个最近/最近的行的简单解决方案是使用 select over ON 短语

```
SELECT A.ID, A.Name, B.Content
FROM A
LEFT JOIN B
ON A.id = (SELECT MAX(id) FROM B WHERE id = A.id) 
```

其中 A.id 是自动增量主键。

# sql - 在 3 列中的 2 列中查找值的存储过程

> ID：11388446
> 
> 赞同：0
> 
> 时间：2012-07-09T02:28:24.163
> 
> 标签：sql, stored-procedures

我正在输入样本日期，我应该做一些与我要求类似的事情。我想运行一个查询，如果它有 1 或者如果任何一列有 1，它将把任何两列中的值拉出 3，它将只返回那些结果。但是，它应该搜索所有三列，并且在它发现值为 1 的三列中的任何一列中，它都应该返回该结果。谁能帮我解决这个问题。提前致谢。

```
 ID Patient Patient Name    prio  prio2   prio3
 -------------------------------------------------
 1  101563  Robert Riley        1     1       1
 2  101583  Cody Ayers          1     0       1
 3  101825  Jason Lawler        0     0       1
 4  101984  Dustin Lumis        1     0       0
 5  102365  Stacy smith         1     0       0
 6  102564  Frank Milon         1     0       0
 7  102692  Thomas Kroning      1     0       0
 8  102856  Andrew Philips      1     0       0
 9  102915  Alice Davies        0     0       1
 10 103785  Jon Durley          0     0       1
 11 103958  Clayton Folsom      1     1       1
 12 104696  Michelle Holsley    1     1       1
 13 104983  Teresa Jones        1     0       1
 14 105892  Betsy Prat          1     1       0
 15 106859  Casey Ayers         1     1       0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:51:13.640

所以，基本上你想拉出任何 3 列 prio、prio2 或 prio3 =1 的东西？如果这不是您所要求的，请澄清您的问题（以获得更好的答案）。此外，您应该用什么类型的 SQL 标记它。

```
 SELECT ID,Patient,[Patient Name],prio,prio2, prio3
 FROM uRtable 
 WHERE prio = 1 OR  prio2 = 1 OR prio3 = 1 
```

但是，如果您说要拉回任何 3 列 prio、prio2 或 prio3 = 1 的行，但其中至少有一个为 0（获取 3 = 1 中的任何一个但排除 where他们都= 1），可能最容易理解的方法是

```
 SELECT ID,Patient,[Patient Name],prio,prio2, prio3
 FROM uRtable 
 WHERE (prio = 1 OR  prio2 = 1 OR prio3 = 1)
 AND (prio = 0 OR  prio2 = 0 OR prio3 = 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:17:39.037

尝试这个：

```
select * from mytable
where prio + prio2 + prio3 = (
    select max(prio + prio2 + prio3)
    from mytable
    where prio = 1 or prio2 = 1 or prio3 = 1
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T03:40:16.740

```
SELECT *
FROM tbl
WHERE 1 IN (prio,prio2,prio3) 
```

# android - 使用 Zxing 条码扫描器导致 SecurityException

> ID：11388450
> 
> 赞同：6
> 
> 时间：2012-07-09T02:29:00.933
> 
> 标签：android, android-intent, barcode, zxing, securityexception

我通过启动一个应用程序在我的应用程序中使用 Zxing Barcode Scanner，`Intent`以便我可以扫描条形码并将数据返回到我的应用程序。非常基本的东西；它已经工作了很长时间没有问题。我最近通过 Play 收到了一个错误报告，其中包含以下堆栈跟踪：

```
 java.lang.SecurityException: Permission Denial: starting Intent 
{ act=com.google.zxing.client.android.SCAN cmp=com.ups.mobile.android/com.google.zxing.client.android.CaptureActivity } 
from ProcessRecord{421bafc8 11687:edu.byu.dburner.lendablefree/10141} 
(pid=11687, uid=10141) not exported from uid 10137
    at android.os.Parcel.readException(Parcel.java:1327)
    at android.os.Parcel.readException(Parcel.java:1281)
    at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1736)
    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1383)
    at android.app.Activity.startActivityForResult(Activity.java:3281)
    at edu.byu.dburner.lendable.xxxxx.xxxx$2.onClick(xxxxxx.java:539)
    at android.view.View.performClick(View.java:3644)
    at android.view.View$PerformClick.run(View.java:14313)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4514)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
    at dalvik.system.NativeStart.main(Native Method) 
```

据我所知，堆栈跟踪存在一些问题`com.ups.mobile.android`，即 UPS 应用程序也使用了 Zxing 应用程序。我尝试在同一部手机上安装 UPS 应用程序和我的应用程序并触发`onClick`发生问题的事件。除了选择器要求我选择条形码扫描应用程序或 UPS 应用程序来执行`Intent`. 我唯一的猜测是我们的两个应用程序都发生了某种冲突，一次只有一个人可以使用 Barcode Scanner 包，从而导致 SecurityException。但这对我来说没有多大意义，因为我可以毫无问题地做到这一点，而且我想很多人都安装了多个使用 Zxing 的应用程序而没有问题。

有没有人了解导致此错误的原因以及我可以做些什么来解决它？

编辑：根据 SeanOwen 的评论，如果您在使用 Barcode Scanner 时遇到此问题，请务必使用`IntentIntegrator`. 他们提供了一个内置的方法`setTargetApplications`。您可以使用它来制作`Intent`唯一使用实际条码扫描仪应用程序：`setTargetApplications(IntentIntegrator.TARGET_BARCODE_SCANNER_ONLY);`轻松如馅饼。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T11:31:58.133

UPS Mobile 没有链接到 Barcode Scanner 应用程序，但显然已经嵌入了它的源代码。这并不令人震惊，即使它不受 ZXing 团队的支持和推荐。

然而，UPS Mobile 开发人员随后做了两件事：

1.  他们保持不变`<intent-filter>`，特别是在他们宣传他们正在处理该`com.google.zxing.client.android.SCAN`操作的情况下，尽管事实上他们并不是那个应用程序

2.  他们将活动标记为未导出

Courtesy of [this bug](http://code.google.com/p/android/issues/detail?id=29535), the chooser will still show their activity, despite the fact that theirs is not exported and therefore cannot be launched.

UPS Mobile either should be linking to Barcode Scanner the way you are, or not advertising this action. And, of course, this bug should get fixed.

Unfortunately, the only workaround I can think of would be for you to add in your `Intent` the actual package name for Barcode Scanner (`com.google.zxing.client.android`) to try to limit it to that app only.

This is reminiscent of [another SO question](https://stackoverflow.com/questions/10319928/android-securityexception-on-pdf-send-intent/10320136), that led to [a blog post of mine](http://commonsware.com/blog/2012/04/25/how-isolated-adobe-reader-activity-issue.html), that obviously was insufficient to educate UPS, so I'll probably blog on this again...

# markdown - Pagedown 可以像 MarkdownSharp 的 Autonewlines 选项一样将 "\n" 变成吗？

> ID：11388451
> 
> 赞同：4
> 
> 时间：2012-07-09T02:29:20.480
> 
> 标签：markdown, markdownsharp, pagedown

我正在使用带有 Pagedown 和 MarkdownSharp 的降价编辑器。

MarkdownSharp 中有一个选项“AutoNewlines”。

我想知道如何在 Pagedown (http://code.google.com/p/pagedown/) 中执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T07:29:25.080

该答案的第一个修订版包括一种相当幼稚的方法，在大多数情况下都不起作用。
我将 AutoNewLines 选项从 MarkDownSharp 移植到 PageDown 你可以在这里下载它[http://code.google.com/r/marcdrexel-pagedown/](http://code.google.com/r/marcdrexel-pagedown/)

它的行为应该与 MarkDownSharp 中的完全相同

使用示例：

```
var converter = Markdown.getSanitizingConverter();
converter.autoNewLine = true;
var editor = new Markdown.Editor(converter);
editor.run(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-02T16:51:16.607

现在可以通过`postSpanGamut`Pagedown 中 Markdown 转换器提供的挂钩来实现。这是我正在使用的代码：

```
function nl2br(text) {

    // Replace new lines with <br/> tags to preserve formatting for users that are 
    // not used to markdown swallowing single line breaks.
    return text.replace(/\n/g, " <br>\n");
}

var converter = new Converter();
converter.hooks.chain("postSpanGamut", nl2br); 
```

使用 postSpanGamut 钩子而不是更通用的`preConversion`钩子很重要，因为 postSpanGamut 仅在文本块的内容上运行，并且不会弄乱列表格式和降价的其他方面。

[文档](https://code.google.com/p/pagedown/wiki/PageDown#preSpanGamut_and_postSpanGamut)中的更多信息。

# eclipse - 我在哪里可以找到 nutch.war 文件？

> ID：11388453
> 
> 赞同：0
> 
> 时间：2012-07-09T02:29:27.783
> 
> 标签：eclipse, solr, nutch

Q-1) 我尝试通过在 Eclipse ant 中运行 nutch 文件夹来构建“build.xml”，但不幸的是，我在工作场所的任何地方都找不到 nutch.war。
它在解压后的 nutch-bin 内也没有。
我在哪里可以找到 nutch.war 文件？

Q-2）我在某处读到，最好从 Nutch 爬取并通过 Solr 进行搜索。因此，我将 Solr 集成到 Nutch 中。这是否意味着我会看到 Solr 的新替代搜索 UI 而不是 Nutch 搜索 UI，还是与 Nutch UI 相同？
我的意思是这个 Nutch UI [1]：[http ://www.google.co.in/imgres?q=nutch&um=1&hl=en&sa=N&biw=1366&bih=667&tbm=isch&tbnid=29yBPvjJbGXPTM:&imgrefurl=http://www.java .net/pub/a/today/2006/02/16/introduction-to-nutch-2.html&docid=69xYu60x353AyM&imgurl=http://today.java.net/images/2006/02/nutch-figure-2-1 。](http://www.google.co.in/imgres?q=nutch&um=1&hl=en&sa=N&biw=1366&bih=667&tbm=isch&tbnid=29yBPvjJbGXPTM:&imgrefurl=http://www.java.net/pub/a/today/2006/02/16/introduction-to-nutch-2.html&docid=69xYu60x353AyM&imgurl=http://today.java.net/images/2006/02/nutch-figure-2-1.gif&w=500&h=325&ei=B0D6T8bgA5GrrAeO_Z3eBg&zoom=1&iact=hc&vpx=687&vpy=192&dur=2329&hovh=181&hovw=279&tx=149&ty=100&sig=101777148678843861437&page=1&tbnh=121&tbnw=186&start=0&ndsp=18&ved=1t:429,r:3,s:0,i:96)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:36:58.080

我从命令行构建 nutch，它不构建 war 文件，它构建一个名为 nutch-nnjob 的 jar 文件

哦，经过进一步调查（即使用 Google 10 秒），我发现您使用“ant war”命令构建了一个战争文件。遗憾的是，您没有想到在 Google 中输入“nutch 安装”，而不是反复抱怨没有人回答您的问题。

[http://www.nutchinstall.blogspot.ca/](http://www.nutchinstall.blogspot.ca/) http://wiki.apache.org/nutch/NutchTutorial/

# java - 使用共享偏好来保存一些 int

> ID：11388454
> 
> 赞同：0
> 
> 时间：2012-07-09T02:29:33.017
> 
> 标签：java, android, sharedpreferences

android、java、sharedpreferences、运行期间的数据。我想要的是，如果我关闭或暂停我的应用程序，整数值会被保存，所以当我再次打开它时，我可以取回最后一个值。

到目前为止，我有这个，尝试用 1 int 来学习如何。

```
protected void onPause(){
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor = settings.edit(); 
    editor.putInt("valueSave",valueToSave ); 
    editor.commit();
} 

@Override 
protected void onResume(){
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0); 
} 
```

但是没有保存价值......我做错了什么？

编辑：添加了 onCreate

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.program);
    //SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    //settings = getSharedPreferences(PREFS_NAME, 0);
    valueToSave = settings.getInt("valueSave",valueToSave); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:42:58.417

尝试以这种方式使用应用程序上下文获取 SharedPreference：

要保存首选项：

```
int valueToSave = 1;
SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(getApplicationContext()).edit();
editor.putInt("someValue", valueToSave);
editor.commit(); 
```

从首选项中检索：

```
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
int savedvalue = settings.getInt("someValue"); 
```

# visual-studio-2010 - 当我单击“选择项目”时 VS 没有响应

> ID：11388455
> 
> 赞同：1
> 
> 时间：2012-07-09T02:30:05.903
> 
> 标签：visual-studio-2010, asp.net-ajax, toolbox

我有一个问题，当我单击工具箱时，然后单击“选择项目”VS 开始没有响应然后关闭。

我正在尝试添加 AJAX 控制工具包，但不能因为每次单击添加项目时 VS 都适合。

有谁知道为什么或如何解决它？

我在网站而不是应用程序上运行，这有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:34:23.833

尝试使用 devenv / 安全模式启动 Visual Studio 2010。

# ruby-on-rails - 如何避免“无法批量分配受保护的属性”错误

> ID：11388456
> 
> 赞同：0
> 
> 时间：2012-07-09T02:30:13.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

即使我在模型中添加了accepts_nested_attributes_for。
它仍然说“无法批量分配受保护的属性”
为了避免这种情况我还应该做什么？？？

模型/用户.rb

```
class User < ActiveRecord::Base

  validates_presence_of :username 
  validates_uniqueness_of :username 
  validates_length_of :username, :within => 4..10

  acts_as_messageable

  has_one :user_profile
  accepts_nested_attributes_for :user_profile

  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :user_profile_attributes

  def mailboxer_email(message)
    email
  end

#  def name
#    email
#  end

end 
```

模型/user_profile.rb

```
class UserProfile < ActiveRecord::Base
 belongs_to :user
 accepts_nested_attributes_for :user
 attr_accessible :nickname
end 
```

意见/注册/edit.html.erb

```
<h2>Edit <%= resource_name.to_s.humanize %></h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

  <div class="field">
    <%= f.label :nickname %><br />
    <%= f.fields_for :nickname_attributes, @user.user_profile do |user_profile| %>
    <%= user_profile.text_field :nickname %>
    <% end %>
  </div>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %> <i>(leave blank if you don't want to change it)</i><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
  <%= f.password_field :current_password %></div>

<%= recaptcha_tags :display => {:theme => 'red'} %>

  <div><%= f.submit "Update" %></div>
<% end %>

<h3>Cancel my account</h3>

<p>Unhappy? <%= link_to "Cancel my account", registration_path(resource_name), :confirm => "Are you sure?", :method => :delete %>.</p>

<%= link_to "Back", :back %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:35:27.303

`attr_accessible`定义您希望用户能够批量分配的属性。只要确保它具有您想要的所有属性。

公平地说，`attr_accessible`如果您不关心它，您可以删除它并且错误将消失（但您的所有模型字段都可以批量分配）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:40:42.597

在edit.html.erb

错误的：

```
f.fields_for :nickname_attributes, 
```

正确的：

```
f.fields_for :user_profile_attributes, 
```

# haskell - 无法匹配预期类型 - Haskell 代码

> ID：11388457
> 
> 赞同：4
> 
> 时间：2012-07-09T02:30:24.003
> 
> 标签：haskell

我正在尝试学习 Haskell，但我尝试编写的一小部分示例代码遇到了相当多的“无法匹配预期类型”错误。谁能给我一些关于我做错了什么/我应该怎么做的指导？

这些是错误，但我不确定我应该如何编写代码。

```
toDoSchedulerSimple.hs:6:14:
    Couldn't match expected type `[t0]' with actual type `IO String'
    In the return type of a call of `readFile'
    In a stmt of a 'do' block: f <- readFile inFile
    In the expression:
      do { f <- readFile inFile;
           lines f }

toDoSchedulerSimple.hs:27:9:
    Couldn't match expected type `[a0]' with actual type `IO ()'
    In the return type of a call of `putStr'
    In a stmt of a 'do' block: putStr "Enter task name: "
    In the expression:
      do { putStr "Enter task name: ";
           task <- getLine;
           return inFileArray : task }

toDoSchedulerSimple.hs:34:9:
    Couldn't match expected type `IO ()' with actual type `[a0]'
    In a stmt of a 'do' block:
      putStrLn "Your task is: " ++ (inFileArray !! i)
    In the expression:
      do { i <- randomRIO (0, (length inFileArray - 1));
           putStrLn "Your task is: " ++ (inFileArray !! i) }
    In an equation for `getTask':
        getTask inFileArray
          = do { i <- randomRIO (0, (length inFileArray - 1));
                 putStrLn "Your task is: " ++ (inFileArray !! i) }

toDoSchedulerSimple.hs:41:9:
    Couldn't match expected type `[a0]' with actual type `IO ()'
    In the return type of a call of `putStr'
    In a stmt of a 'do' block:
      putStr "Enter the task you would like to end: "
    In the expression:
      do { putStr "Enter the task you would like to end: ";
           task <- getLine;
           filter (endTaskCheck task) inFileArray }

toDoSchedulerSimple.hs:60:53:
    Couldn't match expected type `IO ()'
                with actual type `[String] -> IO ()'
    In a stmt of a 'do' block: schedulerSimpleMain
    In the expression:
      do { (getTask inFileArray);
           schedulerSimpleMain }
    In a case alternative:
        "get-task"
          -> do { (getTask inFileArray);
                  schedulerSimpleMain } 
```

这是代码本身。我认为这相当简单，但想法是运行一个循环，接受输入，并通过调用其他函数来执行基于它的操作。

```
import System.Random (randomRIO)
import Data.List (lines)

initializeFile :: [char] -> [String]
initializeFile inFile = 
    do  f <- readFile inFile
        let parsedFile = lines f
        return parsedFile

displayHelp :: IO()
displayHelp =
    do  putStrLn "Welcome to To Do Scheduler Simple, written in Haskell."
        putStrLn "Here are some commands you might find useful:"
        putStrLn "    'help' : Display this menu."
        putStrLn "    'quit' : Exit the program."
        putStrLn "    'new-task' : Create a new task."
        putStrLn "    'get-task' : Randomly select a task."
        putStrLn "    'end-task' : Mark a task as finished."
        putStrLn "    'view-tasks' : View all of your tasks."

quit :: IO()
quit = 
    do  putStrLn "We're very sad to see you go...:("
        putStrLn "Come back soon!"

createTask :: [String] -> [String]
createTask inFileArray = 
    do  putStr "Enter task name: "
        task <- getLine
        return inFileArray:task

getTask :: [String] -> IO()
getTask inFileArray = 
    do  i <- randomRIO (0, (length inFileArray - 1))
        putStrLn "Your task is: " ++ (inFileArray !! i)

endTaskCheck :: String -> String -> Bool
endTaskCheck str1 str2 = str1 /= str2

endTask :: [String] -> [String]
endTask inFileArray =
    do  putStr "Enter the task you would like to end: "
        task <- getLine
        return filter (endTaskCheck task) inFileArray

viewTasks :: [String] -> IO()
viewTasks inFileArray =
    case inFileArray of
        [] -> do putStrLn "\nEnd of tasks."
        _ -> do putStrLn (head inFileArray)
                viewTasks (tail inFileArray)

schedulerSimpleMain :: [String] -> IO()
schedulerSimpleMain inFileArray =
    do  putStr "SchedulerSimple> "
        input <- getLine
        case input of
            "help" -> displayHelp
            "quit" -> quit
            "new-task" -> schedulerSimpleMain (createTask inFileArray)
            "get-task" -> do (getTask inFileArray); schedulerSimpleMain
            "end-task" -> schedulerSimpleMain (endTask inFileArray)
            "view-tasks" -> do (viewTasks inFileArray); schedulerSimpleMain
            _ -> do putStrLn "Invalid input."; schedulerSimpleMain

main :: IO()
main = 
    do  putStr "What is the name of the schedule? "
        sName <- getLine
        schedulerSimpleMain (initializeFile sName) 
```

谢谢，如果这不是提出这样一个问题的正确地方，我们深表歉意。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T08:11:35.393

您的代码存在几个问题，需要不同程度的工作来修复。按照我发现它们的顺序，你有...

## 不正确的类型

你的很多类型签名都不正确。如果一个函数进行任何 I/O，它需要将其返回类型包装在`IO`. 例如，而不是

```
createTask :: [String] -> [String] 
```

你需要有

```
createTask :: [String] -> IO [String] 
```

这反映了执行 I/O 的事实`createTask`（它向用户询问任务的名称）。

幸运的是，解决这个问题很容易 - 只需删除所有类型签名！这听起来很疯狂，但它可能非常有帮助。GHC 具有强大的类型推断机制，这意味着通常无需您明确指定类型即可推断出类型。在您的程序中，*所有*类型都非常简单，可以推断，因此您可以删除所有类型签名，在 GHCi 中加载模块并输入 eg `:t createTask`，然后解释器将告诉您推断的类型（然后您可以将其添加到源）。

## 运算符优先级问题

在 Haskell 中，函数应用程序具有最紧密的绑定。特别是，当你写

```
putStrLn "Your task is: " ++ (inFileArray !! i) 
```

这被 Haskell 解析为

```
(putStrLn "Your task is: ") ++ (inFileArray !! i) 
```

不检查类型，因为左侧是 type `IO ()`，右侧是 type `String`。这也很容易解决。你只需要写你想要的，要么

```
putStrLn ("Your task is: " ++ (inFileArray !! i)) 
```

或者

```
putStrLn $ "Your task is: " ++ (inFileArray !! i) 
```

其中运算符的`$`意思是“具有最低可能优先级的函数应用程序”，并且通常用于避免括号。

## 不正确的列表连接

添加括号后，您的代码具有该行

```
return (inFileArray:task) 
```

其中`inFileArray`是 类型`[String]`并且`task`是 类型`String`。想必你打算添加`task`到`inFileArray`.

该`:`运算符用于将*单个项目*添加到列表的*前面*（O（1）操作）。您不能使用它将项目添加到列表的末尾（O（n）操作）。Haskell 中的所有列表都是链表，因此将项目添加到列表的前面与将其添加到末尾是根本不同的。你想要要么

```
return (task:inFileArray) 
```

这会将任务添加到列表的前面，或者

```
return (inFileArray ++ [task]) 
```

它创建一个新的单元素列表，`task`并使用列表连接运算符`++`将其添加到列表的末尾。

## 误解做符号和`>>=`

这是您的代码中最基本的误解，需要做最多的工作来解释。让我们看一下以下（高度编辑的）代码片段：

```
schedulerSimpleMain :: [String] -> IO ()                                    -- 1
schedulerSimpleMain inFileArray =                                           -- 2
    do  input <- getLine                                                    -- 3
        case input of                                                       -- 4
            "new-task" -> schedulerSimpleMain (createTask inFileArray)      -- 5
            _          -> do putStrLn "Invalid input."; schedulerSimpleMain -- 6 
```

我们已经知道 的类型`createTask`是`[String] -> IO [String]`。因此第 5 行不输入检查。该函数`schedulerSimpleMain`需要 a`[String]`但您将其传递给`IO [String]`.

您需要做的是`IO`从 的结果中解开图层，并将结果`createTask inFileArray`传递`[String]`给`schedulerSimpleMain`（将其重新包装在`IO`图层中）。这正是操作员`>>=`（发音为*bind*）所做的事情。您可以将此行写为

```
createTask inFileArray >>= schedulerSimpleMain 
```

您可以将`>>=`运算符视为“向前传递”结果（有点像 Unix 管道运算符），但也可以在途中进行所有必要的解包/重新包装。

刚开始时正确使用绑定运算符可能有点棘手，这是我们`do`首先提供符号的原因之一。您可以将此代码段编写为

```
do newInFileArray <- createTask inFileArray
   schedulerSimpleMain newInFileArray 
```

这只是我上面编写的代码的语法糖，但如果您对绑定运算符不满意，它会更具可读性。

在第 6 行中，您遇到了一个不同但相关的问题。排序运算符`;`本质上意味着“在左侧进行计算，忽略结果，然后在右侧进行计算”。它要求左计算具有类型`IO a`，右计算具有类型`IO b`（对于任何`a`和`b`）。

不幸的是，您正确的计算类型为`[String] -> IO [String]`，因此该行再次不进行类型检查。要更正它，您只需要确保将适当的参数提供给`schedulerSimpleMain`：

```
do putStrLn "Invalid input."; schedulerSimpleMain inFileArray 
```

现在进行类型检查。您的代码中到处都有这种错误。我不会在这里为您详细介绍所有修复程序。我认为您应该先尝试自己修复它。如果你在一天左右仍然遇到问题，我可以将更正后的代码放在[hpaste 上供](http://hpaste.org/)你学习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:22:01.687

我建议你把你的程序分解成更小的部分并一个一个地测试它们。我已经修复了你的几个函数：你可以为其他函数做类似的事情。

```
import System.Random (randomRIO)
import Data.List (lines)

-- ERROR
-- f.hs:6:14:
--     Couldn't match expected type `[t0]' with actual type `IO String'
--     In the return type of a call of `readFile'
--     In a stmt of a 'do' block: f <- readFile inFile
--     In the expression:
--       do { f <- readFile inFile;
--                     let parsedFile = lines f;
--                                    return parsedFile }
-- WHY?
-- initializeFile reads a file, therefore it must live inside the IO monad

initializeFile :: String -> IO [String]
initializeFile inFile = do
        f <- readFile inFile
        let parsedFile = lines f
        return parsedFile

quit :: IO()
quit = do
    putStrLn "We're very sad to see you go...:("
    putStrLn "Come back soon!"

-- ERROR
-- f.hs:76:44:
--     Couldn't match expected type `IO ()'
--                 with actual type `[String] -> IO ()'
--     In a stmt of a 'do' block: schedulerSimpleMain
--     In the expression:
--       do { putStrLn "Invalid input.";
--                     schedulerSimpleMain }
--     In a case alternative:
--         _ -> do { putStrLn "Invalid input.";
--                                   schedulerSimpleMain }
-- WHY?
-- in the "_" case, schedulerSimpleMain is called without parameters, but
-- it needs a [String] one.

schedulerSimpleMain :: [String] -> IO()
schedulerSimpleMain inFileArray = do
    putStr "SchedulerSimple> "
    input <- getLine
    case input of
        "quit" -> quit
        _ -> do putStrLn "Invalid input."; schedulerSimpleMain inFileArray

main :: IO()
main = do
    putStr "What is the name of the schedule? "
    sName <- getLine
    -- Extract the lines from the IO monad
    ls <- initializeFile sName
    -- Feed them to the scheduler
    schedulerSimpleMain ls 
```

# java - 接口是“对象”吗？

> ID：11388460
> 
> 赞同：1
> 
> 时间：2012-07-09T02:30:33.087
> 
> 标签：java, oop, inheritance, object, interface

> **可能重复：**
> [接口是否继承自 java 中的 Object 类](https://stackoverflow.com/questions/6056124/do-interfaces-inherit-from-object-class-in-java)

```
package inheritance;
class A{
   public String display(){
       return "This is A!";
   }
}

interface Workable{
   public String work();
}

class B extends A implements Workable{
   public String work(){
      return "B is working!";
   }
}

public class TestInterfaceObject{
   public static void main(String... args){
      B obj=new B();
      Workable w=obj;
      //System.out.println(w.work());
      //invoking work method on Workable type reference

      System.out.println(w.display());
      //invoking display method on Workable type reference

      //System.out.println(w.hashCode());
      // invoking Object's hashCode method on Workable type reference
    }
} 
```

* * *

正如我们所知，可以调用的方法取决于我们要调用的引用变量的类型。在这里，在代码中，work() 方法是在“w”引用（它是 Workable 类型）上调用的，因此方法调用将成功编译。然后，在 "w" 上调用 display() 方法，这会产生一个编译错误，表明未找到显示方法，这很明显，因为 Workable 不知道它。然后我们尝试调用 Object 类的方法，即 hashCode() ，这会产生成功的编译和执行。这怎么可能？有什么合乎逻辑的解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T03:13:34.843

直观的答案是，无论你引用什么接口，实现接口的对象都必须是`Object`.

JLS 的第 9.2 节专门定义了这种行为：[http ://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.2)

> 如果接口没有直接的超接口，则接口隐式声明一个公共抽象成员方法 m，其签名为 s，返回类型为 r，并且 throws 子句 t 对应于每个签名为 s、返回类型为 r 和 throws 子句的公共实例方法 m在 Object 中声明，除非接口显式声明了具有相同签名、相同返回类型和兼容 throws 子句的方法。

即假定所有接口都包含与类中的方法相对应的方法签名`Object`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T02:35:00.677

我认为这里发生的事情是，即使`w`只知道是`Workable`，所有对象都必须派生自`Object`，所以无论`w`最终是什么类，它都必须有`Object`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T02:35:19.477

`w.display()`不起作用的原因是您将参考保存为您的界面类型。编译器只看到接口公开的方法。如果你打电话给`((B)w).display()`这会工作。您可以调用`hashCode()`，因为编译器足够聪明，知道接口是由对象继承的，并且所有对象的超类都是`Object`

# macos - 我在这个 SQLite 文件中处理什么样的时间戳？

> ID：11388461
> 
> 赞同：0
> 
> 时间：2012-07-09T02:30:33.647
> 
> 标签：macos, datetime, sqlite

很久以前，另一位用户写道，他正在开发一个库，以直接从 The Hit List 中读取数据

[https://groups.google.com/d/msg/the-hit-list-users/arCPzjHaZeg/J6eatDiJWB4J](https://groups.google.com/d/msg/the-hit-list-users/arCPzjHaZeg/J6eatDiJWB4J)

看起来他从来没有发布过任何东西。

我正在研究直接阅读 THL 的库，与 geektool 脚本一起使用，以避免 applescript 总是不得不启动 THL 来读取数据的开销。

我已经完成了部分任务，寻找尚未完成的任务

```
SELECT * FROM ZTASK where ZCOMPLETEDDATE is NULL ; 
```

但是当我试图将其限制为现在到期的任务时，我感到很困惑。如果我查看任务架构，我会看到 ZDUEDATE 是时间戳

```
sqlite> .schema ztask 
```

> CREATE TABLE ZTASK ( Z_PK INTEGER PRIMARY KEY, Z_ENT INTEGER, Z_OPT INTEGER, ZARCHIVED INTEGER, ZPRIORITY INTEGER, ZNOTES INTEGER, ZPARENTLIST INTEGER, ZPARENTTASK INTEGER, ZRECURRENCE INTEGER, ZACTUALTIME FLOAT, ZCOMPLETEDDATE TIMESTAMP, ZCREATEDDATE TIMESTAMP, ZDISPLAYORDER, ZDISPLAYORDER FLOATIMATION , ZMODIFIEDDATE 时间戳, ZSTARTDATE 时间戳, ZCALENDARSTOREUID VARCHAR, ZNOTESUID VARCHAR, ZSTATUS VARCHAR, ZTITLE VARCHAR, ZUID VARCHAR, ZLOCALINFODICTIONARY BLOB);

虽然当我尝试查询事物时，我似乎无法弄清楚它是哪种时间戳。它似乎不是 unixtime 或 juliantime。

例如

```
sqlite> SELECT * FROM ZTASK where ZCOMPLETEDDATE is NULL ;
...
ZDUEDATE = 363422378
... 
```

从命中列表的 UI 中显示为 2012-07-07 的截止日期，但似乎不匹配

```
Unix time: 1341619200
Julian time: 2456115.5 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T02:49:03.903

这是自 2001 年 1 月 1 日 GMT 以来的秒数。我自己没有选择这个值，这是 Core Data 和 Cocoa 保存日期的方式。

例如，您问题中 363422378 的值大约变为 11.5 年：

363422378 秒 / 60 / 60 / 24 / 365 = 11.524048009

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:52:04.897

这看起来像是自 OS X 绝对参考日期以来的秒数：

> [接收器与系统绝对参考日期（格林威治标准时间 2001 年 1 月 1 日的第一时刻）之间的间隔。如果接收方早于参考日期，则该值为负数。](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceReferenceDate)

提供了一个常数`NSTimeIntervalSince1970`，它是*从 1970 年 1 月 1 日到参考日期 2001 年 1 月 1 日的秒数。*它的值为`978307200.0`。

# c# - 使用 Ajax.ActionLink 时如何手动设置 returnURL

> ID：11388464
> 
> 赞同：0
> 
> 时间：2012-07-09T02:30:58.667
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有这个链接

```
@Ajax.ActionLink("create poll question", 
                 "CreatePoll", 
                 new { id = Model.DebateID }, 
                 new AjaxOptions
                 {
                   UpdateTargetId = "poll-entry-box",
                   InsertionMode = InsertionMode.Replace,
                   HttpMethod = "GET"
                 }) 
```

它指向具有 [Authorize] 属性的操作。登录有效，但 returnURL 为空，因此它只是重定向到索引页面。

有没有办法手动设置 returnURL ？

*笔记*

我正在使用此处描述的方法[http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)因为正在加载登录页面在我的偏里面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:57:16.350

一种可能的选择是使用设置查询字符串[`.OnComplete`](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions.oncomplete.aspx)的 JavaScript 函数设置属性。`returnUrl`

您可以实现*类似于*此的功能：

```
var setReturnUrl(url) {
    var currentUrl = window.location;
    if(-1 != currentUrl.indexOf('returnUrl')) {
        var x = currentUrl.split('?');
        for(var i=0;i<x.length;i++) {
            if(-1 != x[i].indexOf('returnUrl')) {
                currentUrl = currentUrl.replace(x[i], 'returnUrl=' + url);
            }
        }
    } else {
        currentUrl = currentUrl + '&returnUrl=' + url;
    }
    window.location = currentUrl;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:25:06.137

关于什么，

```
 @Ajax.ActionLink("create poll question", 
"CreatePoll", new { id = Model.DebateID, returnUrl = "YOUR_URL" } ... 
```

**更新：**

已经澄清，returnUrl 只为 . 我们需要做的是修复 href 参数。

我建议创建您自己的可能处理 returnUrl 的@Ajax.ActionLink 版本。

```
public static MvcString ActionLink(this AjaxHelper ajaxHelper, string actionName, string returnUrl, object routerValues)
{
  // ...
} 
```

在此方法中，您可以使用 TagBuilder 类来生成链接，以满足您的需要。看看[CodePlex](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/944ab06b9c54#src/System.Web.Mvc/Ajax/AjaxExtensions.cs)是如何实现 Ajax.ActionLink 的。

# javascript - javascript隐藏/取消隐藏，但希望箭头在隐藏/取消隐藏时指向向下/向上

> ID：11388470
> 
> 赞同：4
> 
> 时间：2012-07-09T02:32:03.617
> 
> 标签：javascript

我有一个使用简单 JavaScript 的简单隐藏/取消隐藏 div 部分。我需要一个箭头图像，它会在单击时切换内容可见性，并且我希望小箭头在内容被隐藏和未隐藏时在右/下位置之间切换。

HTML 内容：

```
<a href="javascript:showOrHide();"><img src="Image_Files/Copyright.png" alt="BioProtege Inc" border="0" /></a> 
<img src="Image_Files/Copyright_Arrow_Hidden.png" alt="Arrow" border="0" />

<div id="showorhide">
Copyright 2012+ BioProtege-Inc.Net | LG Fresh Designz
<br />
Contact Us @ Lane.Gross@Edu.Sait.Ab.Ca
</div> 
```

JavaScript 内容：

```
function showOrHide() 
{
    var div = document.getElementById("showorhide");
    if (div.style.display == "block") 
    {
        div.style.display = "none";
    }
    else 
    {
        div.style.display = "block";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T02:38:13.873

您只需使用简单的 Javascript 更改`src`两个箭头之间的图像属性，同时更改`display`属性：

```
<script type="text/javascript">
function showOrHide() 
{
    var div = document.getElementById("showorhide");
    if (div.style.display == "block") 
    {
        document.getElementById("img-arrow").src = "Image_Files/arrow-hidden.jpg";
        div.style.display = "none";
    }
    else 
    {
        div.style.display = "block";
        document.getElementById("img-arrow").src = "Image_Files/arrow-showing.jpg";
    }
}
</script>

<img src="arrow-hidden.jpg" id="img-arrow" alt="" />

<div id="showorhide">
Copyright 2012+ BioProtege-Inc.Net | LG Fresh Designz
<br />
Contact Us @ Lane.Gross@Edu.Sait.Ab.Ca
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:54:25.500

即使答案已经被接受:)
另一种方法是使用谷歌的 jQuery 旋转（对于这个例子，你只需要“向上箭头”图像）：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    var value = 0
     $("img").click(function(){
        $("#showorhide").toggle();   
        value +=180;
        $(this).rotate({ animateTo:value});     
     });
});
</script>
</head>
<body>
<img src="arrow.jpg" alt="BioProtege Inc" border="0" id="myimg" name="myimg" />
<div id="showorhide">
Copyright 2012+ BioProtege-Inc.Net | LG Fresh Designz
<br />
Contact Us @ Lane.Gross@Edu.Sait.Ab.Ca
</div>
</body>
</html> 
```

# ios - Core Data 过滤单个属性的结果并设置 UILabel 的文本

> ID：11388479
> 
> 赞同：0
> 
> 时间：2012-07-09T02:34:21.223
> 
> 标签：ios, xcode, core-data

Baiscally 我想用核心数据查询的结果更新 UILabel。我有一个带有以下文本的 UILabel “root has X credits”。我想在核心数据中搜索实体“帐户”，然后细化搜索以查找“根”帐户，然后细化搜索“根”帐户中的属性“信用”。最后，我想更新 UILabel 以读取“root has 0 credits”（或者 Core Data 查询描述的许多学分。

到目前为止，我有以下代码，

```
- (void)rootCreditAmount {
// Core Data - root credit amount
NSFetchRequest *request = [[NSFetchRequest alloc] init];

// define our table / entity to use
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:_managedObjectContext];
[request setEntity:entity];

// filter results to just root user
NSPredicate *username = [NSPredicate predicateWithFormat:@"root"];

[request setPredicate:username];

// fetch records and handle error
NSError *error;
NSMutableArray *mutableFetchResults = [[_managedObjectContext executeFetchRequest:request error:& error] mutableCopy];

if (!mutableFetchResults) {
    // handle error.
    // should advise user to restart
}
NSLog(@"mutablefetchresults = %@",mutableFetchResults);
} 
```

不用说，这段代码目前正在导致我的应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:56:35.467

将您的谓词语句更改为：

```
[NSPredicate predicateWithFormat:@"username == root"]; 
```

将“用户名”更改为您的字段名称。[有关格式化谓词字符串的更多信息，请参见此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-CJBDBHCB)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:35:28.987

好吧，感谢@skytz 在chat.stackoverflow.com 的帮助，我能够做我需要的事情。我最终没有使用 NSPredicate。下面的方法最终解决了我的问题。但本着做一个好人的精神，我将把功劳归功于@melsam 的守时。

```
- (void)rootCreditAmount {
// Core Data - root credit amount
NSFetchRequest *request = [[NSFetchRequest alloc] init];

// define our table / entity to use
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:_managedObjectContext];
[request setEntity:entity];

// fetch records and handle error
NSError *error;
NSMutableArray *mutableFetchResults = [[_managedObjectContext executeFetchRequest:request error:&error] mutableCopy];

if (!mutableFetchResults) {
    // handle error.
    // should advise user to restart
}

// refine to just root account
for (Account *anAccount in mutableFetchResults) {
    if ([anAccount.username isEqualToString:@"root"]) {

        NSLog(@"root credit = %@",anAccount.credit);

        _lblRootCredit.text = [NSString stringWithFormat:@"root has %@ credits.",anAccount.credit];
    }
}
} 
```

# github-for-windows - 有人知道 GitHub for Windows UI 背后的技术是什么吗？

> ID：11388481
> 
> 赞同：6
> 
> 时间：2012-07-09T02:34:34.653
> 
> 标签：github-for-windows

有人知道 GitHub for Windows UI 背后的技术是什么吗？看起来不可思议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T09:04:21.170

正如这篇[博文所述](https://github.com/blog/1127-github-for-windows)

> 我们将优雅的**[Caliburn.Micro](http://caliburnmicro.codeplex.com/)**与**[Reactive Ui](http://www.reactiveui.net/)**混合在一起，以提供响应式界面并提高可测试性。

有关 Reactive Extensions 的更多信息，您可以查看 Paul Betts 的**[最新演讲](http://vimeo.com/m/43659034)**，他是 GitHub for Windows 的创建者之一。

顺便说一句，“不可思议的样子”也可能来自设计研究和工作。你会在这篇**[为 Windows 设计 GitHub 的](https://github.com/blog/1151-designing-github-for-windows)**文章中找到 UI 主题的一些封面故事，作者 Tim Clem，也是 GfW 的创建者之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-08T17:43:00.413

[Github 现在在https://github.com/showcases/projects-that-power-github](https://github.com/showcases/projects-that-power-github)发布更多信息

# apache-flex - 适用于 1500 个客户端的 BlazeDS 默认消息传递

> ID：11388485
> 
> 赞同：0
> 
> 时间：2012-07-09T02:35:01.460
> 
> 标签：apache-flex, spring, weblogic, messaging, blazeds

我的项目有 Flex + Spring BlazeDS 集成 + Java 组合。该项目部署在 weblogic 服务器上。正如我们所知，每当客户端连接到 blazeDS 时，它都会阻塞服务器上的一个线程，并且它是一个 BlazeDS 实例的最大并发客户端数量的限制。

就我而言，我应该每小时有大约 300,000 次更新，并且在任何时候都可以有大约 500 个并发客户端。在极端情况下，它可能是所有 1500 个客户端都连接到应用程序。什么是最好的解决方案？

如果我试图说服我的客户使用 LCDS，他们想知道我们当前设置可以支持的确切数量。为此，我尝试使用 neoload，但在这个方向上没有取得太大进展。

因此，如果任何机构使用过这样的设置并可以建议我该怎么做，那就太好了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:16:02.043

经过一些研究（我们可能有类似的情况，似乎 blazeDS 无法使用 NIO。[这](http://blog.hiraash.org/2012/04/13/scaling-blazeds-with-servlet-3-concurrency/)是一个关于它的链接。他们提供的解决方案似乎与较新版本的[tomcat](http://code.google.com/p/blazeds-servlet3-support/wiki/HowToUse)冲突。所以我猜 blazeDS 不是那个在您的用例中使用。

如果你不能使用 LCDS，一个很好的免费解决方案是[graniteDS](http://www.graniteds.org/confluence/pages/viewpage.action?pageId=229378)，它支持异步 servlet

# firebug - javascript函数在firebug中给我“没有足够的参数”错误

> ID：11388486
> 
> 赞同：1
> 
> 时间：2012-07-09T02:35:04.467
> 
> 标签：firebug, javascript

我有一些全局变量会增加一个数字。

```
var i = 0;  
var num = (i-1)+2;  
var i = num; 
```

然后，我有一个检查数字并显示我的 HTML 的函数。

```
function showChild(){

if(num===1){
    document.getElementById("childFirst00").style.display = "block";
    document.getElementById("childLast00").style.display = "block";
    document.getElementById("deleteChild00").style.display = "block";
    num++;
}else if(num===2){
    document.getElementById("childFirst01").style.display = "block";
    document.getElementById("childLast01").style.display = "block";
    document.getElementById("deleteChild01").style.display = "block";
    num++;
}else if(num===3){
    document.getElementById("childFirst02").style.display = "block";
    document.getElementById("childLast02").style.display = "block";
    document.getElementById("deleteChild02").style.display = "block";
    num++;  
}else if(num===4){
    alert("Please Contact The Rectory If You Need To Add More Children");   
}
} 
```

所有这些都可以正常工作。
但是，当我单击调用下一个函数的按钮时，在 Firebug 中 `deleteChild00`出现错误。`not enough arguments`

```
function removeChild(){

if(num===2){
    document.getElementById("childFirst00").style.display = "none";
    document.getElementById("childLast00").style.display = "none";
    document.getElementById("deleteChild00").style.display = "none";
    num--;
}else if(num===3){
    document.getElementById("childFirst01").style.display = "none";
    document.getElementById("childLast01").style.display = "none";
    document.getElementById("deleteChild01").style.display = "none";
    num--;
}else if(num===4){
    document.getElementById("childFirst02").style.display = "none";
    document.getElementById("childLast02").style.display = "none";
    document.getElementById("deleteChild02").style.display = "none";
    num--;  
}   
} 
```

这是调用 removeChild() 函数的输入 HTML。

```
<input type="button" id="deleteChildButton" value="Remove Child" onClick="removeChild()"/> 
```

是什么导致了我的 removeChild() 函数中的“参数不足”错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:34:37.923

这是因为您使用的是已定义的函数名称，例如 removeChild() 或 createElement()

避免这些您认为以前可能使用过的已知功能。并尝试将其更改为不常见的东西，例如 doSomthing();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:38:02.467

`removeChild()`是一个[标准的 DOMnode 方法](https://developer.mozilla.org/En/DOM/Node.removeChild)，它需要一个参数并且应该从一个节点调用，如果你尝试以你的方式使用它，不同的浏览器将响应不同的错误。Firefox 返回“参数不足”异常，而 Chrome 给我“未捕获错误：NOT_FOUND_ERR：DOM 异常 8”。

将您的函数重命名为其他名称：

```
// Rename...
function removeChild(){
// to...
function someOtherRemoveChild(){ 
```

而是在你的标记中调用它。

```
<input type="button" id="deleteChildButton" value="Remove Child" onClick="someOtherRemoveChild()"/> 
```

或者，由于您`removeChild()`在`window`范围内定义，您*应该*能够通过 调用它`window.removeChild()`，但我不能保证它会起作用，并且重新定义 DOM 方法很奇怪，所以我实际上并不推荐这个：

```
<input type="button" id="deleteChildButton" value="Remove Child" onClick="window.removeChild()"/> 
```

# c++ - 在 SDL 1.2 中使用核心 OpenGL？

> ID：11388488
> 
> 赞同：2
> 
> 时间：2012-07-09T02:35:13.580
> 
> 标签：c++, opengl, sdl

有什么方法可以在 SDL 1.2 中创建核心 OpenGL 上下文？我一直在环顾四周，但当我需要它在 Windows 和 Linux 上工作时，谷歌只提供了只适用于 Windows 的完成一半的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:48:18.557

这取决于您所说的“OpenGL 3.0”是什么意思。

如果您只是在谈论版本号，那么 SDL 应该仍然可以。如果您谈论的是获取[核心上下文而不是兼容性](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts)，那么您要么必须使用支持该上下文的 SDL 版本（开发中的 2.0），要么[使用不是 SDL](http://www.opengl.org/wiki/Related_toolkits_and_APIs#OpenGL_initialization)的版本。

# javascript - CSS3 变换动画在 Safari/UIWebView 中的渲染效果不佳

> ID：11388495
> 
> 赞同：2
> 
> 时间：2012-07-09T02:36:24.360
> 
> 标签：javascript, animation, css, jquery-mobile, webkit

我正在开发一个用于移动/触摸设备部署的 HTML5 应用程序，并且正在使用 PhoneGap，目前仅针对 iOS 平台（Webkit）。

我的问题发生在 CSS3 转换（它也发生在常规的 jQuery 动画上），因为 Webkit 往往会做一些奇怪的事情。例如，在可在[此处](http://jsfiddle.net/lvl99/dSjcj/)查看的代码( [http://jsfiddle.net/lvl99/dSjcj/](http://jsfiddle.net/lvl99/dSjcj/) ) 中，当您单步浏览页面时，按顺序返回（即从第 5 页到第 1 页）将呈现动画效果，但是向前走（即从第 1 页到第 5 页）会产生不一致的渲染，主要是在丑陋的一面（记得在 Safari 中查看它。我一直在使用 Safari 5.1.7）。

我最初使用 jQuery Mobile 框架进行开发，但我使用的关键功能是通过主题标签和转换的页面路由，但由于我遇到了转换的这些问题，我尝试开发一个更简单的解决方案来避免任何 JS/CSS与 jQM 冲突。唉，我提出的错误可能实际上与 Safari/Webkit 相关。

我最初使用`jQuery.animate()`left属性，到现在使用`transform`类似于jQM处理方式的CSS3技术，也是为了帮助提高速度并测试它是否更愿意正确渲染。两者都没有工作到不同程度的不工作。

幸运的是，Firefox 渲染一切正常。它没有问题，但是 Firefox 不是目标平台，当项目在 PhoneGap 环境中的 Xcode 中编译时，它表达了与 Safari 相同的问题。当我还在使用早期开发版本的 jQM 时，Safari 会很好地渲染它（包括 iPad 模拟器上的 Safari），但 UIWebView 不会。这让我觉得这可能是 Nitro JS 引擎问题（例如，也许 UIWebView 没有正确渲染过渡的速度/能力/能力——我试图将所有动画转移到 CSS3 以降低渲染对 GPU 的操作）。

我使用过各种插件，如[jQuery Transit](http://ricostacruz.com/jquery.transit/)、[jQuery Animate Enhanced](http://playground.benbarnett.net/jquery-animate-enhanced/)和[TransformJS](http://transformjs.strobeapp.com/)。我还尝试在 jQM 中编写我自己的自定义转换处理程序，但它没有正确呈现（尽管它最接近：在 Firefox 和 Safari 中工作，只是在 UIWebView 中不工作）。

关于转换具有不同类型内容的元素，我也得到了不一致的结果：视频、图像、浮动元素、多个段落都是我测试过的。在某个阶段，与序列的末端（即 1 和 5）之间的转换也存在问题，但现在我的问题只是升序页面转换（即 1 到 5）。

我已经为此花费了几天时间，试图解决这个看似很小的问题，但它对于用户体验来说是不可或缺的，这种幻灯片转换是基于用户在应用程序中移动的方向的上下文。最简单的解决方案是仅删除转换，但如果有某种方法可以了解 Webkit/UIWebView 到底遇到了什么问题，请为其创建一些解决方案。毫无疑问，这也与 jQM 在转换中遇到的闪烁问题有关。网络上为这些人建议的许多 CSS 修复也不起作用，例如`-webkit-backface-visibility: hidden`设置默认转换属性`-webkit-transform: rotateX(0)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:48:30.440

看起来问题在于它不是从右边开始为下一个项目设置动画（当向上移动 1->2->n 时），而是在上一个项目完成动画处理时对其进行“.show()”。

给我一点时间来逐步浏览 .js

```
... 
```

~~好的，我想我知道它是什么，它在做什么，当它从右到左（数字向上）移动时，你看不到从左边进入的新页面（更高的数字），因为“左”是从 100% -> 0% 移动，因为较小的数字正在移动。~~

好吧，我认为这是错误的......

如果您将and声明中的`100%`to更改为，那么它应该对您有用，不幸的是，我无法告诉您为什么我们（工作）避免 CSS 转换，因为我们做了很多公司工作，因此仍然需要支持 IE7+，有时甚至 6 :(`92.5%``@-webkit-keyframes slideinleft``@-moz-keyframes slideinleft`

请注意，您可以尝试一个值，而不是`92.5%`我只想找到对您有用的最低合理值（`95%`没用）

# zend-framework - 使用 Youtube API 上传

> ID：11388496
> 
> 赞同：-1
> 
> 时间：2012-07-09T02:36:26.640
> 
> 标签：zend-framework, video, youtube-api

我正在尝试创建一个网站，其中有一个搜索栏，用户输入 youtube 视频的 URL，然后按提交，然后 youtube 视频将上传到我的网站，类似于 Facebook 的做法。

有谁知道在哪里可以找到关于如何使用 Youtube API 实现这一点的好教程？

我还想知道 Zend Framework Youtube API 功能是否让这更容易

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:15:10.940

您只需从 URL 中删除视频 ID（可能使用正则表达式），将其存储在数据库中，然后使用该数据库将 YouTube 视频嵌入到您的页面上。完全没有必要使用 Zend 框架。

将视频文件下载到您的服务器不是您需要做的事情，而且可能是非法的，而且它比简单地嵌入 YouTube 的播放器要复杂得多，并且会花费更多的带宽。

这些是讨论嵌入播放器的特定文档页面：

[https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

如果感兴趣的话，Facebook 实际上会从YouTube 页面标题中的[Open Graph 标签中获取 SWF 播放器的 URI。](http://ogp.me/#structured)我不建议这样做，因为它会限制您的网站与安装了 Flash 的浏览器的兼容性。

# android - Android 后退按钮和片段 - 动画不起作用

> ID：11388499
> 
> 赞同：1
> 
> 时间：2012-07-09T02:36:47.133
> 
> 标签：android, android-fragments, android-animation, back-button

我的 Android 应用程序中包含一个自定义后退按钮。单击片段时我的自定义动画没问题，但似乎在单击我自己的后退按钮甚至android的后退按钮时我无法应用动画。我不知道如何修复它，我已经在我的活动类中包含了这些代码，但它似乎不起作用。

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
        case R.id.menuitem1:
            break;
        case R.id.menuitem2:
            super.onBackPressed();
            overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_right);
            break;

        default:
            break;
        }

        return true;
    } 
```

我也尝试覆盖 onbackPressed 方法，但它似乎也不起作用

```
 @Override
    public void onBackPressed() {
        super.onBackPressed();

        overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_right);

    } 
```

我不知道如何实现这个......请帮助我完成这个，因为我们已经没有时间了。谢谢

等待积极的回应。

[我的 Android 应用截屏 http://content.screencast.com/users/junnel1001/folders/Jing/media/2a13fd01-f467-4889-ac21-743c188a0f67/2012-07-09_1032.png](http://content.screencast.com/users/junnel1001/folders/Jing/media/2a13fd01-f467-4889-ac21-743c188a0f67/2012-07-09_1032.png)

编辑

好的，这就是我设置片段的方式

在我的主要活动中：

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    ActionBar actionBar = getActionBar();
    Drawable myIcon = getResources().getDrawable( R.drawable.header_bg );
    actionBar.setSplitBackgroundDrawable(myIcon);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tabA = actionBar.newTab().setIcon(R.drawable.about);
    ActionBar.Tab tabB = actionBar.newTab().setIcon(R.drawable.sponsors);
    ActionBar.Tab tabC = actionBar.newTab().setIcon(R.drawable.map);
    ActionBar.Tab tabD = actionBar.newTab().setIcon(R.drawable.destination);
    Fragment aboutTab = new PhotosActivity();
    Fragment sponsorTab = new SongsActivity();
    Fragment mapTab = new HCCMapActivity(); 
    Fragment DestinationTab = new DestinationActivity();
    tabA.setTabListener(new MyTabsListener(aboutTab));
    tabB.setTabListener(new MyTabsListener(sponsorTab));
    tabC.setTabListener(new MyTabsListener(mapTab));
    tabD.setTabListener(new MyTabsListener(DestinationTab));
    actionBar.addTab(tabD, 0, true);
    actionBar.addTab(tabC, 1, false);
    actionBar.addTab(tabA, 2, false);
    actionBar.addTab(tabB, 3, false);

}

protected class MyTabsListener implements TabListener{

        Fragment fragment;

        public MyTabsListener(Fragment fragment){

            this.fragment = fragment;
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {           
            Log.i("Tab Position Now", Integer.toString( tab.getPosition()));
            if (myTabPosition < 0){
                ft.setCustomAnimations(android.R.animator.fade_in, android.R.animator.fade_out);    
            }else{
                if (myTabPosition >  tab.getPosition()){
                    ft.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_right);   
                    Log.i("Tab Position Before",Integer.toString( myTabPosition));
                }else{
                    ft.setCustomAnimations(R.anim.slide_out_left, R.anim.slide_out_right);      
                    Log.i("Tab Position Before1",Integer.toString( myTabPosition));
                }
            }   
            myTabPosition = tab.getPosition();
            ft.replace(R.id.fragment_place, fragment, null);    
        //  ft.commit();
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub
            ft.remove(fragment);

        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }

    } 
```

在我的一个片段类中：

例如destinationActivity

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
             View view = inflater.inflate(R.layout.destination_layout, container, false);                                
             ArrayList<Category> category = new ArrayList<Category>();
             ListView lv = (ListView)view.findViewById(android.R.id.list);
             category.add(new Category("Image", "Image Banner"));
             category.add(new Category("HISTORICAL TOURS", "Historical Desc"));
             category.add(new Category("CULTURAL TOURS", "Cultural Desc"));
             lv.setAdapter(new CategoryAdapter(getActivity(), R.layout.list_view, category));
             lv.setClickable(true);
             super.setMenuVisibility (false);
             super.setHasOptionsMenu(false);
             return view;
     } 

     @Override
     public void onListItemClick(ListView l, View v, int position, long id) {
         Log.i("FragmentList", "Item clicked: " + id);
         final FragmentTransaction ft = getFragmentManager().beginTransaction(); 
         if (id == 1){
        //   ft.remove(fragment)
             ft.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_in_right);   
             ft.replace(R.id.fragment_place, new ListLocationActivity(), null); 
             ft.addToBackStack(null);
             ft.commit(); 
         }else if (id == 2){
             ft.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_in_right);   
             ft.replace(R.id.fragment_place, new ListLocationActivity(), null); 
             ft.addToBackStack(null);
             ft.commit(); 
         }

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:15:51.957

你真的需要让它覆盖后退按钮功能吗？你为什么不创建一个新的事件触发器，让它有自己的功能而不是覆盖？因此，当“按下此按钮”时，“滑入/滑出”。然后，如果您想完成一项活动，您可以输入“finish()”命令或“finishActivity()”

[Android：返回上一个活动](https://stackoverflow.com/questions/4038479/android-go-back-to-previous-activity)

“如果您需要使用后退按钮返回到以前的活动，则使用 overridePendingTransition() 将不会有动画过渡。对于只发生一次然后从历史堆栈中删除的活动，例如启动活动，overridePendingTransition() 是完美。如果您需要动画回到以前的活动，您可能会考虑其他替代方案。

[http://www.anddev.org/novice-tutorials-f8/splash-fade-activity-animations-overridependingtransition-t9464.html](http://www.anddev.org/novice-tutorials-f8/splash-fade-activity-animations-overridependingtransition-t9464.html)

# java - 从 JSP 到 JAVA 到 PSQL 和返回的日期处理

> ID：11388501
> 
> 赞同：0
> 
> 时间：2012-07-09T02:37:18.807
> 
> 标签：java, jsp, datetime

当我使用 JSP 表单写入 PostgreSQL 时，我在处理日期变量时遇到了问题。有一些很棒的提示，但仍然无法正确使用。我相信我正在将一个字符串从 JSP 传递到 JAVA，它是一个日期“setter”和“getter”在“没有时区的日期”列上写入 PSQL。

以下是与日期相关的部分**JSP 代码：**

....（一些代码）....

`SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");`

....（模式代码）....

```
<%

if (action.equals("add")) {
  .
  .
  .

  newCampaign.setCampempDate(dateFormat.parse(request.getParameter("campemp")));

  newCampaign.add();
}  
%> 
```

....（更多代码）....

```
 <input name="campemp" type="text" class="datePickBox" id="campemp"
 onBlur="javascript:checkFormat(this)" value="<%= defaultCampaign.getCampempDate() != null 
? dateFormat.format(defaultCampaign.getCampempDate()) : dateFormat.format(new 
java.util.Date()) %>" size=20> 
```

....（其余代码）....

值得一提的是，在输入时我还使用了一个以正确格式传递日期的日历……这是我在 JSP 端使用日期字段的另一个原因。

**在 JAVA 方面：**

....（一些代码）....

```
 private java.util.Date campemp= null; 

  private SimpleDateFormat userDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm"); 
```

...（更多代码）... ++ 设置和获取 ++

```
public void setCampempDate(java.util.Date aCampemp) {    
    this.campemp= aCampemp;
  }

 public java.util.Date getCampempDate() {
    return this.campemp;  
  } 
```

...（更多代码）... ++ 加载 ++

```
 public void load(ResultSet rs) throws SQLException {
   this.setId(rs.getLong("campkeydbid"));
    .
    .
  this.setCampempDate(rs.getDate("campemp"));
} 
```

...（更多代码）... ++ 写入数据库 ++

```
public boolean add() throws SQLException {
boolean success = false;
if (costingEnabled) {
  String call = "select " + getStoredProcedureMapper().getPrefix() + "_Add(?,?,?,?,?,?,?,?,?,?)";
  DataSource ds = PoolMan.findDataSource("mydatabase");
  Connection conn = null;
  try {
    conn = ds.getConnection();
    PreparedStatement pst = conn.prepareStatement(call);
      .
      .
    pst.setTimestamp(10, new Timestamp(this.getCampempDate().getTime())); 
 ResultSet rs = pst.executeQuery();
    if (rs.next()) {
      .
      . 
```

...（更多代码）...

存储过程上的“_Add”是正确的，因为如果我“硬编码” pst.SetTimestamp 上的日期，它就可以工作

我得到的错误如下：

*org.apache.jasper.JasperException：无法将字符串“04/07/2012 19:12”转换为属性“campemp”的类“java.util.Date”：属性编辑器未向 PropertyEditorManager 注册*

任何关于将字符串解析为日期而不影响数据库日期字段和 JSP 输入的解决方法的想法将不胜感激.. 非常感谢。

问候，

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:47:23.750

> org.apache.jasper.JasperException：无法将字符串“04/07/2012 19:12”转换为属性“campemp”的类“java.util.Date”：属性编辑器未向 PropertyEditorManager 注册

您以格式传入`Date`，因此您需要使用`String``04/07/2012 19:12`

```
dd/MM/yyyy HH:mm 
```

从您发布的代码来看，您似乎正在使用

```
private SimpleDateFormat userDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm"); 
```

作为格式`SimpleDateFormat`

# objective-c - 获取核心数据属性的 NSArray

> ID：11388502
> 
> 赞同：2
> 
> 时间：2012-07-09T02:37:30.413
> 
> 标签：objective-c, core-data

考虑一个包含 Elements 的 Core Data 数据库，其中每个 Element 都有一个名为 的属性`symbol`，问题是获取`NSArray`每个符号的最简洁的方法。这可以通过以下方式来完成

```
-(NSArray*)symbolsInDatabase {
  ENTRY_LOG;

  NSError* err;

  NSFetchRequest* request   = [NSFetchRequest fetchRequestWithEntityName:@"Element"];
  request.resultType        = NSDictionaryResultType;
  request.propertiesToFetch = [NSArray arrayWithObject:@"symbol"];

  NSArray* arrayOfDictionaries = [self.database.managedObjectContext executeFetchRequest:request error:&err];
  NSMutableArray* symbols = [[NSMutableArray alloc]initWithCapacity:[arrayOfDictionaries count]];

  for (NSDictionary* d in arrayOfDictionaries) {
    [symbols addObject:[d objectForKey:@"symbol"]];
  }

  EXIT_LOG;
  return symbols;

} 
```

然而，有一种烦人的感觉，我错过了一些东西，我可以`-(NSArray*)filteredArrayUsingPredicate`以某种巧妙的方式使用，而不是遍历字典数组并提取对象作为`symbol`键。

关于如何使这个更清洁的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:19:45.700

实际上，valueForKeyPath 选择器：

```
NSArray *symbols = [arrayOfDictionaries valueForKeyPath:@"@unionOfObjects.symbol"]; 
```

# eclipse - 升级 eclipse、aptana、pydev、Debugger 后不工作

> ID：11388503
> 
> 赞同：2
> 
> 时间：2012-07-09T02:37:36.230
> 
> 标签：eclipse, pydev

我使用 pydev 将 eclipse 从 3.6 升级到 4.2，将 Aptana 从 2 升级到 3

现在我无法让调试器工作。我收到以下错误：

* * *

```
Traceback (most recent call last):
File "C:\Google\eclipse\plugins\org.python.pydev_2.6.0.2012062121\pysrc\pydevd.py", line 4, in <module>
from pydevd_comm import  CMD_CHANGE_VARIABLE, \
File "C:\Google\eclipse\plugins\org.python.pydev_2.6.0.2012062121\pysrc\pydevd_comm.py", line 78, in <module>
import pydevd_console
File "C:\Google\eclipse\plugins\org.python.pydev_2.6.0.2012062121\pysrc\pydevd_console.py", line 3, in <module>
from code import InteractiveConsole
ImportError: cannot import name InteractiveConsole 
```

* * *

```
!ENTRY org.python.pydev.debug 4 4 2012-07-08 22:09:17.635  
!MESSAGE Unexpected error setting up the debugger  
!STACK 0  
java.net.SocketException: Socket operation on nonsocket: configureBlocking  

_at java.net.DualStackPlainSocketImpl.configureBlocking(Native Method)  

_at java.net.DualStackPlainSocketImpl.socketAccept(Unknown Source)  

_at java.net.AbstractPlainSocketImpl.accept(Unknown Source)  

_at java.net.PlainSocketImpl.accept(Unknown Source)  

_at java.net.ServerSocket.implAccept(Unknown Source)  

_at java.net.ServerSocket.accept(Unknown Source)  

_at org.python.pydev.debug.model.remote.ListenConnector.run(ListenConnector.java:57)  

_at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:56:59.447

如果您遇到此错误，请检查以确保您的 PYTHONPATH 中没有任何*其他* `code.py`模块 - 即在您的项目中。例如，我使用的是[web.py](http://webpy.org/)，教程让您创建了一个`code.py`文件 - 将其重命名为`main.py`，调试器能够`InteractiveConsole`从正确的模块（python27\lib 中的那个）导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:59:42.813

我认为问题在于导入：

```
from code import InteractiveConsole 
```

给出一个 ImportError。检查“代码”模块是否在您的 PYTHONPATH 中（应该在 Python 库中`Python/lib/code.py`：）

即：在命令行中打开一个shell：

```
[07:55:55 X:\]python
Python 2.7.2 (default, Feb 23 2012, 00:24:32) [MSC v.1600 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import code
>>> code.__file__
'c:\\bin\\python-2.7.2\\lib\\code.pyc' 
```

如果它真的不存在，那是您的 Python 安装中的问题（肯定存在）。

# ruby-on-rails - Rails 3：通过条件注入部分

> ID：11388506
> 
> 赞同：0
> 
> 时间：2012-07-09T02:37:56.460
> 
> 标签：ruby-on-rails, model-view-controller, design-patterns

我希望根据条件语句注入视图模式的部分/偏移量。不知道如何做到这一点或它可能有多复杂。为了更好地解释，这里有一些伪示例：

总计：1 个职位和 3 个职位模式：1 个职位 - 1 个职位 - 1 个职位 - 1 个职位

因为有超过 2 个职位，所以在 3 个职位之间插入了一个帖子。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:36:23.277

我想你可以在你的视图文件中做这样的事情。

```
<% if @jobs.count > 2 %>
  <% render_post = true %>
<% else %>
  <% render_post = false %>
<% end %>

<% @jobs.each do |job| %>
  <%= job.some_attribute %>
  <% if render_post == true %>
    <%= render @post %>
    <% render_post = false %>
  <% end %>
<% end %> 
```

当`render_post`为 true 时，rails 会渲染 post。当它为 false 时，rails 不会渲染帖子。但是，`render_post`值不会出现在 html 文件中。

您需要 _post.html.erb 在 Post 的视图文件中。

# jquery - jQuery 滑块 100% 高度

> ID：11388511
> 
> 赞同：0
> 
> 时间：2012-07-09T02:38:45.913
> 
> 标签：jquery, slider, height, param

我正在尝试将垂直[**jquery 滑块**](http://rascarlito.free.fr/hoverscroll/)设置为容器 div 的 100% 高度。我怎样才能做到这一点？我尝试将参数更改为`height: 400`，`height:"100%"`但这只是将页面拉伸到整个滑块内容的高度。目标是有一个灵活的页面，侧面没有滚动条

```
$(document).ready(function() {
    $('#my-list').hoverscroll();

});

// Override default parameters onload
$.fn.hoverscroll.params = $.extend($.fn.hoverscroll.params, {
    vertical: true,
    width: 221,
    height: 400,
    arrows: false
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:53:00.657

无需扩展插件。Hoverscroll 接受对象形式的参数。

```
$('#my-list').hoverscroll({
  vertical: true,
  width: 221,
  height: $('container-div').height(),
  arrows:false
}); 
```

替换`container-div`为您希望引用其高度的元素。

# .net - 从绑定到 DataGridView -C# 的数据表中删除行

> ID：11388512
> 
> 赞同：0
> 
> 时间：2012-07-09T02:38:49.260
> 
> 标签：.net, datagridview

我已将 DataGridView 绑定到 MySql 表，尽管我在同时从 DataGridView 控件和 MySql 表中删除一行时遇到了麻烦。

这是我的尝试：

```
 //* I used a class called "mySqlInterface to bind my DataGridView control.
    //* "dataTable" is a DataTable that gets filled by the database table
     private void deleteButton_Click(object sender, EventArgs e)
    {

        string accountNum =    clientDGV.SelectedRows[0].Cells[clientDGV.SelectedRows[0].Cells.Count - 1].Value.ToString();
        string selectStr = "account_number = " + accountNum;
        DataRow rowToDelete = mySqlInterface.dataTable.Select(selectStr)[0];
        mySqlInterface.dataTable.Rows.Remove(rowToDelete);
        mySqlInterface.Save(); 
       //Save() executes mySqlDataAdapter.Update(dataTable);
    } 
```

这从 DGV 中删除了选定的行，但没有从 DB 中删除。

有小费吗？多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:05:43.793

为什么要评论最后一行？

试试这个代码：

```
mySqlDataAdapter.Update(mySqlInterface.dataTable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T23:01:10.617

由于 datagridview 已经绑定到您的数据表，您唯一需要做的就是从中删除行，VB 将处理您的数据表。

```
 For i As Integer = 0 To [datagridview].Rows.Count - 2 
   Me.dgDetalleNota.Rows.RemoveAt(0)    
Next i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:27:01.567

好的，几周前我想通了：

```
 string accountNum = clientDGV.SelectedRows[0].Cells[clientDGV.SelectedRows[0].Cells.Count - 1].Value.ToString();
        string selectStr = "account_number = " + accountNum;
        DataRow rowToDelete = mySqlInterface.dataTable.Select(selectStr)[0];
        rowToDelete.Delete();
        mySqlInterface.Save(); 
```

我的问题中的代码与上面的代码之间的唯一区别是替换行 mySqlInterface.dataTable.Rows.Remove(rowToDelete); 与行 rowToDelete.Delete();

当我选择要删除的行时，我使用了 Delete() 函数。我有点白痴没有早点尝试这个。

如果有人有更清洁的方法来做到这一点，我全神贯注！谢谢。

# asp.net - 从gridview asp.net c#中的sql中提取唯一的messageID

> ID：11388513
> 
> 赞同：0
> 
> 时间：2012-07-09T02:39:21.310
> 
> 标签：asp.net, sql-server-2008, gridview

我有一个消息数据库，用于存储从用户到用户的私人消息。我有一个名为 MessageID 的列，它是一个唯一编号。在我的应用程序中，我有一个消息收件箱（使用 gridview）页面，其中显示了向您发送消息的用户、主题和创建日期。在它旁边我有一个按钮，您可以单击以查看消息。我想知道是否有某种方法可以提取消息的 MessageID，以便可以使用 SELECT FROM 和 WHERE 查询来获取消息的正文。

也许我可以将 MessageID 存储在 .aspx 页面上的某个地方但保持隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:17:32.557

没关系，我有一个可行的解决方案！我刚刚在 gridview 上为 MessageID 添加了一个列，并将它的可见性设置为 false，因此用户看不到它。但是这样 MessageID 就在那里，我可以将它用作查询参数

# python - 查询数据存储：“NoneType”对象没有属性

> ID：11388515
> 
> 赞同：0
> 
> 时间：2012-07-09T02:39:53.783
> 
> 标签：python, google-app-engine, google-cloud-datastore, gqlquery

当我运行这个 if 块时：

```
first_query = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC").get()
    if first_query == None:
        numBook = 42
        numInitialPage = 42
        numFinalPage = 42
        first_record = Contract(book_number = 1, initial_page = 0, final_page = 0)
        first_record.put()
        contract = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC").get()
        numBook = contract.book_number
        numInitialPage = contract.final_page +1
        numFinalPage = numInitialPage
    else:
        contract = first_query
        numBook = first_query
        numInitialPage = 51
        numFinalPage = 51 
```

该过程跳转到该`if`块，但是，然后，我收到此错误消息：

```
 File "C:\Users\CG\Documents\udacity\contract\main.py", line 88, in get
    numBook = contract.book_number
AttributeError: 'NoneType' object has no attribute 'book_number' 
```

既然我曾经`.put()`插入记录并`.get()`访问它，为什么合同的价值是`None`？

提前感谢您的帮助！

这里是整个代码：

```
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import os

import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

import re

from google.appengine.ext import db

USER_RE = re.compile(r"^[a-zA-Z0-9_ -]{3,20}$")
def valid_person(person):
    return USER_RE.match(person)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_SSN(SSN):
    return PASS_RE.match(SSN)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

import time

import datetime

def dateToday():
    today = datetime.datetime.today()
    todayDay = str(today.day)
    todayMonth = str(today.month)
    monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
    todayYear = str(today.year)
    return(todayDay + ' of  ' + monthExt[todayMonth] + ' of ' + todayYear)

class Person(db.Model):
    firstName = db.StringProperty(required = True)
    nacionality = db.StringProperty(required = True)
    marital_status = db.StringProperty(required = True)
    profession = db.StringProperty(required = True)
    SSN = db.IntegerProperty(required = True)
    driver_license = db.IntegerProperty(required = True)
#    address = db.PostalAddress(required = False)

class Contract(db.Model):
  book_number = db.IntegerProperty(required = True)
  initial_page = db.IntegerProperty(required = True)
  final_page = db.IntegerProperty(required = True)
##  contrac_type = db.StringProperty(required = False, choices=set(["Purchase Agreement", "Rental House", "Rental Car"]))
##  contract_place = db.StringProperty(required = False)
##  contract_date = db.DateProperty (required = True, auto_now = True, auto_now_add = True)

class ContractingParty(db.Model):
  person = db.ReferenceProperty(Person, required=True, collection_name="party_to_contracts")
  condition = db.StringProperty(required = False, choices=set(["buyer", "seller", "renter", "owner", "witness"]))

class MainHandler(webapp2.RequestHandler):
    def get(self):
        first_query = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC").get()
        if first_query == None:
            numBook = 8
            numInitialPage = 8
            numFinalPage = 8
            first_record = Contract(book_number = 1, initial_page = 0, final_page = 0)
            first_record.put()
            contract = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC").get()
            numBook = contract.book_number
            numInitialPage = contract.final_page +1
            numFinalPage = numInitialPage
        else:
            contract = first_query
            numBook = first_query
            numInitialPage = 7
            numFinalPage = 7

##        numBook = contract.book_number
##        numInitialPage = contract.final_page +1
##        numFinalPage = numInitialPage
        template_values = {"person": "",
                                       "nacionality": "",
                                       "SSN": "",
                                       "driverLicense": "",
                                       "email":"",
                                       "person_error": "",
                                       "SSN_error": "",
                                       "driverLicense_error": "",
                                       "address": "",
                                       "email_error": "",
                                       "numBook": numBook,
                                       "numInitialPage": numInitialPage,
                                       "numFinalPage": numFinalPage,
                                       }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

    def post(self):
        person_name = self.request.get("person")
        user_nacionality = self.request.get('nacionality')
        user_profession = self.request.get('profession')
        user_maritalStatus = self.request.get('maritalStatus')
        user_SSN = self.request.get('SSN')
        user_email = self.request.get('email')
        user_driverLicense = self.request.get('driverLicense')
        person_error = ""
        SSN_error = ""
        driverLicense_error = ""
        geted_email_error = ""
        address = self.request.get('address')
        contractType = self.request.get("contractType")
        owner = self.request.get("owner")
        witness = self.request.get("witness")
        numBook = self.request.get("numBook")
        numInitialPage = self.request.get("numInitialPage")
        numFinalPage = self.request.get("numFinalPage")

        if (person_name and valid_person(person_name)) and (user_SSN and valid_SSN(user_SSN)) and ((not user_email) or (user_email and valid_email(user_email))):
            contract_record = Contract(book_number = numBook, initial_page = numInitialPage, final_page = numFinalPage)
            contract_record.put()
            contract_id = contract_record.key().id()
            person_record = Person(name = person_name,
                               nacionality = user_nacionality,
                               profession = user_profession,
                               marital_status = user_maritalStatus,
                               SSN = int(user_SSN),
                               driverLicense = int(user_driverLicense))
            person_record.put()
# HERE THE PROBLEM - Contracting party should be a table with ID refering to contract table
 #       contracting_party_record = ContractingParty(person = 1,  )
##            person = db.ReferenceProperty(People, required=True, collection_name="party_to_contracts")
##            condition = db.StringProperty(required = False, choices=set(["buyer", "seller", "renter", "owner", "witness"]))
##            self.redirect('/your_contract?person=%s&nacionality=%s&profession=%s&maritalStatus=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s&contractType=%s&address=%s&numBook=%s&numInitialPage=%s&numFinalPage=%s' % (person_name, user_nacionality, user_profession, user_maritalStatus, user_SSN, user_driverLicense, user_email,
##witness, owner, contractType, address, numBook, numInitialPage, numFinalPage))
            self.redirect('/your_contract?person=%s' % contract_id)

        else:
            if not person_name or not valid_person(person_name):
                person_error = "Oh no!!! this person name isn't valid!"
            if not user_SSN or not valid_SSN(user_SSN):
                SSN_error = "Oh no!!! SSN isn't valid!"
            if user_email and not valid_email(user_email):
                geted_email_error = "Oh no!!! e-mail isn't valid!"
            template_values = {"person": person_name,
                                "nacionality": user_nacionality,
                                "maritalStatus": user_maritalStatus,
                                "profession": user_profession,
                                "SSN": user_SSN,
                                "driverLicense": user_driverLicense,
                                "email": user_email,
                                "person_error": person_error,
                                "SSN_error": SSN_error,
                                "driverLicense_error": user_driverLicense,
                                "address": address,
                                "email_error": geted_email_error}
            template = jinja_environment.get_template('index.html')
            self.response.out.write(template.render(template_values))

class your_contractHandler(webapp2.RequestHandler):
    def get(self):
        contract_id = self.request.get('contract_id')
        contract = db.GqlQuery("SELECT * FROM Contract WHERE __key__ = KEY('Model', contract_id").get()
##        SELECT * FROM Model where __key__ = KEY('Model', <numeric_id>)
        geted_numBook = contract.book_number
        geted_numInitialPage = contract.initial_page
        geted_numFinalPage = contract.final_page
        geted_dateToday = dateToday()
        geted_contractType = contract.contract_type

        person = db.GqlQuery("SELECT * FROM Person ORDER BY date DESC").get()
        geted_person_name = person.name
        geted_user_nacionality = person.nacionality
        geted_user_profession = person.profession
        geted_user_maritalStatus = person.marital_status
        geted_user_SSN = person.SSN
        geted_user_driver_license = person.driver_license

        your_contract = jinja_environment.get_template('your_contract.html')

        your_contract_values = {"person":geted_person_name,
                                "nacionality":geted_user_nacionality,
                                "maritalStatus": geted_user_marital_status,
                                "profession": geted_user_profession,
                                "SSN":geted_user_SSN,
                                "driverLicense":geted_user_driver_license,
                                "address":geted_address,
                                "email":geted_user_email,
                                "contractType":geted_contract_type,
                                "dateContract":geted_dateToday,
                                "numBook":geted_numBook,
                                "numInitialPage":geted_numInitialPage,
                                "numFinalPage":geted_numInitialPage,
                                }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(your_contract.render(your_contract_values))

# ContractingParty.all().ancestor(thecontract).run()
# contract_id = contract.key().id()
# contract_parties = Contract.get_by_id(contract_id)
#http://stackoverflow.com/questions/11294526/how-to-model-a-contract-database-with-several-buyers-or-sellers-using-gae-data
#http://stackoverflow.com/questions/11311461/how-to-query-gae-datastore-to-render-a-template-newbie-level
app = webapp2.WSGIApplication([('/', MainHandler), ('/your_contract', your_contractHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:49:40.297

因为您`date`的 Contract 模型中没有字段，所以没有返回任何内容。

因为数据存储是无模式的，所以 GQL 无法知道模型中的任何实体是否可能具有特定字段。因此，与 SQL 不同的是，当您引用不存在的字段时，它不会引发错误：它只是执行查询，如果没有找到，它不会返回任何内容。

我不确定你为什么要在任何情况下查询它。即使你这样做了，你也应该通过`put()`调用返回的键来获取它，而不是进行查询：最终一致性模型意味着数据可能不会被下一条语句完全持久化，因此查询不会看到它，而始终保证直接通过密钥获取。

# c# - LINQ C# 查询的逻辑是什么？

> ID：11388516
> 
> 赞同：1
> 
> 时间：2012-07-09T02:40:13.353
> 
> 标签：c#, linq

从“Essential LINQ”一书中检查以下程序：

```
class Customer
    {
     public string CustomerID {get;set;}
     public string ContactName {get;set;}
     public string City {get;set;}
     public static List<Customer> GetCustomers()
     {
        return new List<Customer>
        {
            new Customer {CustomerID = "ALFKI", ContactName = "Maria Anders", City = "Berlin"},
            new Customer {CustomerID = "ANATR", ContactName = "Sns Trujillo", City = "Mexico D.F."},
            new Customer {CustomerID = "ANTON", ContactName = "Antonio Moreno", City = "Mexico D.F."}
        };
     }
    }
void Main()
{
    var query = from c in Customer.GetCustomers()
                where c.City == "Mexico D.F."
                select new { c.City,  c.ContactName};
    foreach (var cityandcontact in query)
    {
        Console.WriteLine(cityandcontact);
    }
} 
```

在 LINQ 查询中，如果我从行中删除“新”，为什么它会给我错误：
`select new {c.City, c.ContactName};`

为什么我们不能这样写

```
select c.City, c.ContactName; 
```

这里的逻辑是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T02:44:35.053

查询返回同一类对象的枚举。它可以是任何类，但它必须是所有行的一个。如果不将一对对象（城市和联系人姓名）组合成一个对象，则无法返回它们。在这种情况下，您将它们组合成一个具有两个属性的匿名类型对象。

附带说明一下，使用方法根本没有任何优势`Select`，因为这两个属性都来自同一个`Customer`类。实际上，效率低于原样返回客户对象，如下所示：

```
var query = from c in Customer.GetCustomers()
            where c.City == "Mexico D.F.";
foreach (var c in query)
{
    Console.WriteLine("{0} {1}", c.City, c.ContactName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:45:28.263

LINQ methods, like other C# methods, can only return *one* value/object. (There is no syntax support added for said hypothetical construct to magically do what the `new { .. }` stuff does.)

This is why the different fields are "wrapped" in an new object: it is then a *single* value/object with *members* representing all the selected fields.

(Likewise, the final result, an `IEnumerable<..>`, is also just *one* value/object with 0 or more elements in the sequence: in this case each element is a new object created with `new { .. }` above.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T02:45:36.600

`new { c.City, c.ContactName};` is the C# syntax for an anonymous type.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T02:45:50.807

The 'select' selects a Customer class, which consists of a City variable and a ContactNamr variable. So, you have to provide select with a new class with those variables

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T02:48:13.333

This is not SQL this is linq, and the syntax is basically what you see.

```
select new { c.City,  c.ContactName}; 
```

limits the output of the query to a type that contains just the City and the ContactName.

You may ask what type is this? Well it's an [anonymous type](http://www.google.co.nz/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFwQFjAA&url=http://msdn.microsoft.com/en-us/library/bb397696.aspx&ei=Ykb6T97zF6ewiQepqZniBg&usg=AFQjCNHMvhwM6R1BXxYx5lUi_CPOLgC-EQ&sig2=G6FEnGGX3Wm3cdhdks89Zw) that the compiler creates for you.

The code then iterates over the results of the query (`IEnumerable<this_new_type>`) and writes the ToString() of this new type.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T02:51:21.497

select **new** is creating a new [anonymous object](http://msdn.microsoft.com/en-us/library/bb397696.aspx).

"Anonymous types provide a convenient way to encapsulate a set of read-only properties into a single object without having to explicitly define a type first"

```
select new {c.City, c.ContactName}; 
```

You could also create a concrete class to project into.

i.e a class called **Blah**:

```
class Blah
{
  public string City {get;set;}
  public string ContactName {get;set;}
}

... [rest of query]
select new Blah {c.City, c.ContactName}; 
```

The reason you cannot go **"select c.City, c.ContactName;"**, is because the language syntax is not designed to handle it.

# ruby-on-rails-3 - 可以配置带有 Rails3 的 Dragonfly-Gem 以强制将所有上传转换为图像/jpeg？

> ID：11388517
> 
> 赞同：1
> 
> 时间：2012-07-09T02:40:22.760
> 
> 标签：ruby-on-rails-3, dragonfly-gem

我一直在阅读 DragonFly 文档，我认为 DragonFly 配置的 before_serve 子句可能是我需要关注的地方，也许是通过设置某种

```
convert to jpeg if not jpeg 
```

那里的逻辑。还是有更快/更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T22:41:46.637

抱歉刚看到这个。如果您想将 ORIGINAL 转换为 jpeg，则使用模型 after_assign 回调 - 请参阅[http://markevans.github.com/dragonfly/file.Models.html#Callbacks](http://markevans.github.com/dragonfly/file.Models.html#Callbacks) 你会做

```
image_accessor :avatar do
  after_assign{|a| a.jpg! unless a.format == :jpg }
end 
```

虽然实际上你甚至不需要“除非”位，因为做.jpg！在 jpeg 上不会做任何事情

# django - 为 Heroku 设置 AS3；收集 sendgrid 的静态错误

> ID：11388521
> 
> 赞同：1
> 
> 时间：2012-07-09T02:41:33.970
> 
> 标签：django, heroku, amazon-s3, sendgrid

我正在尝试在 Heroku 上的第一个 Django 应用程序上设置 Amazon S3 以用于静态和媒体文件。该过程相当顺利，但是当运行 ./manage.py collectstatic 将我的静态文件复制到 AS3 存储桶时，我收到以下错误：

```
 File "manage.py", line 12, in <module>
  import settings
  File "/Users/me/djangoprojects/project/project/settings.py", line 165, in <module>
  EMAIL_HOST_USER = os.environ['SENDGRID_USERNAME']
  File "/Users/me/djangoprojects/env/bin/../lib/python2.7/UserDict.py", line 23, in __getitem__
  raise KeyError(key)
  KeyError: 'SENDGRID_USERNAME' 
```

到目前为止，sendgrid 的设置已用于部署：

```
EMAIL_HOST = 'smtp.sendgrid.net'
EMAIL_HOST_USER = os.environ['SENDGRID_USERNAME']
EMAIL_HOST_PASSWORD = os.environ['SENDGRID_PASSWORD']
EMAIL_PORT = 587
EMAIL_USE_TLS = True 
```

我不确定问题是什么，因为由于此错误，文件没有被复制到 AS3 存储桶。非常感谢任何见解或经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:17:44.727

您需要在编译期间启用环境变量。查看[heroku 文档](https://devcenter.heroku.com/articles/django-assets)（向下滚动到“构建期间的配置变量”部分）。

*对于懒人：*

```
heroku labs:enable user_env_compile -a myapp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T01:06:42.843

我在将带有 Sendgrid 的 Django 应用程序部署到 Heroku 审查应用程序时遇到了相同的错误。我们的配置是在 GitHub 上打开一个新 PR 时启动一个评论应用程序。

问题原来是在 app.json 中的 Sendgrid 配置被添加到预先存在的 PR 中，这并没有触发新应用程序的生成。至少对于 Heroku 评论应用程序，附加组件仅在第一次部署应用程序时生成。结果，Heroku 评论应用程序没有 Sendgrid 插件并且失败了。

解决方案是检查另一个分支，推送到 GitHub，然后让 Heroku 从头开始​​生成一个新的评论应用程序。

# javascript - 如何让这个 validationTextBox 成为焦点？

> ID：11388522
> 
> 赞同：1
> 
> 时间：2012-07-09T02:41:58.087
> 
> 标签：javascript, dojo

如果表单中的输入错误，则在执行 ajax 请求后，我试图让这个验证文本框被关注并显示指示问题的指示消息。

代码是：

```
dijit.byId("passwordField").focusNode.focus() 
```

如前所述，表单元素是一个validationTextBox。

更让我困惑的是，在 dojo 1.5 之前，这段代码很简单`dijit.byId("passwordField").focus()`，而且运行良好。我怎样才能解决这个问题？

我也试过：

```
require(["dijit/focus"],function(focusU){ 
  focusU.focus(dojo.byId("ID"));}); 
```

但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:44:45.180

如果 dijit.widget.focus() 失败，则 _FocuxMixin 在其启动期间未正确加载。

使用任何 dijit.form.Type，您应该能够通过以下方式成功获得焦点：

```
dijit.byId('ID').focus(); 
```

我认为您将 DOM 事件焦点与小部件焦点处理混淆了。如果您开火`widget.focusNode.focus`- 您将不会从`ValidationTextBox`任何浏览器中的消息传递中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:09:12.143

你可以在表单标签中尝试这样的事情：

```
<script language="javascript" type="text/javascript">
        Sys.Application.add_load
                (
                function () {
                    window.setTimeout(focus, 1);
                }
                )
        function focus() {
            if (document.getElementById('txtComm1') != null) {
                if (document.getElementById('txtComm1').disabled != true) {
                    document.getElementById('txtComm1').focus();
                }
            }
        }      

    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T11:31:00.687

如果您的表单字段位于 a 内`dijit/Dialog`，`Dialog`则将自动关注第一个输入。您可以通过设置禁用此行为：

```
autofocus: false 
```

在对话框上，之后，

```
widget.focus(); 
```

应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-08T11:49:58.553

这对我有用...

```
setTimeout(function(){
    widget.focus();
}, 100); 
```

# sqlanywhere - 如何使用参数编写更新语句？

> ID：11388523
> 
> 赞同：0
> 
> 时间：2012-07-09T02:42:02.140
> 
> 标签：sqlanywhere

我在编写从几个不同类收集的更新语句时遇到问题。所以让我解释一下我有什么..

我有一个 Minutes.cs 类，它将获取和设置数据库的属性

```
public class Minute{
public Minute()
{
    //
    // TODO: Add constructor logic here
    //
}

public int ID
{
    get;
    set;
}
public string Location
{ 
    get; set; 
}
public string PeriodDate
{
    get;
    set;
}
public string PeriodTime
{
    get;
    set;
}
public string Facilitator
{
    get;
    set;
}
public string Attenders
{
    get;
    set;
}

public string Agenda
{ 
    get; set; 
} 

public string Title
{ 
    get; set; 
}

public DateTime DateTime
{
    get;
    set;
}} 
```

这是与数据库层交互的 MinuteDB.cs 类，我想将参数（SAParameters）从此类传递到 aspx.cs 页面，以便我可以进行参数化更新（唯一的原因是因为我无法更新日期时间格式，所以我必须使用参数化查询：S），我不知道我这样做是否正确。

```
public class MinuteDB{
//string strConnString = ConfigurationManager.ConnectionStrings["emaDB2"].ConnectionString;
public static String DB_STR = ConfigurationManager.ConnectionStrings["emaDB2"].ConnectionString;
//public static String DB_STR = "UserID=dba;Password=sql;DatabaseName=emaDB;ServerName=emaDB";

public MinuteDB()
{

}

public static void DoUpdateQuery(String sql)
{
    //Create a connection, replace the data source name with the name of the SQL Anywhere Demo Database that you installed
    SAConnection myConnection = new SAConnection(DB_STR);
    //open the connection 
    myConnection.Open();

    //Create a command object. 
    SACommand myCommand = myConnection.CreateCommand();

    //Specify a query. 
    myCommand.CommandText = sql;

    SAParameter parameters = new SAParameter();
    parameters.SADbType = SADbType.NVarChar;
    myCommand.Parameters.Add(parameters);

    parameters = new SAParameter();
    parameters.SADbType = SADbType.NVarChar;
    myCommand.Parameters.Add(parameters);

    parameters = new SAParameter();
    parameters.SADbType = SADbType.NVarChar;
    myCommand.Parameters.Add(parameters);

    parameters = new SAParameter();
    parameters.SADbType = SADbType.NVarChar;
    myCommand.Parameters.Add(parameters);

    parameters = new SAParameter();
    parameters.SADbType = SADbType.NVarChar;
    myCommand.Parameters.Add(parameters);

    parameters = new SAParameter();
    parameters.SADbType = SADbType.NVarChar;
    myCommand.Parameters.Add(parameters);

    parameters = new SAParameter();
    parameters.SADbType = SADbType.Integer;
    myCommand.Parameters.Add(parameters);

    parameters = new SAParameter();
    parameters.SADbType = SADbType.DateTime;
    myCommand.Parameters.Add(parameters);

    Minute recentMinutes = new Minute();

    myCommand.Parameters[0].Value = recentMinutes.Title;
    myCommand.Parameters[1].Value = recentMinutes.Location;
    myCommand.Parameters[2].Value = recentMinutes.PeriodDate;
    myCommand.Parameters[3].Value = recentMinutes.PeriodTime;
    myCommand.Parameters[4].Value = recentMinutes.Attenders;
    myCommand.Parameters[5].Value = recentMinutes.Agenda;
    myCommand.Parameters[6].Value = recentMinutes.ID;
    myCommand.Parameters[7].Value = recentMinutes.DateTime;

    try
    {
        myCommand.ExecuteNonQuery();
    }

    catch (Exception excp)
    {
        throw excp;
    }

    finally
    {
        myConnection.Close();
    }

}
public static void UpdateMinutesByMinutesID(int minuteID, string location, string title, string perioddate, string periodtime, string attenders, string agenda,DateTime datetime)
{
    string sql = "UPDATE meetingMinutes SET title=?,location=?,perioddate=?,periodtime=?,attenders=?,agenda=?,datetime=? WHERE minuteID = " + minuteID;
    DoUpdateQuery(sql);
} 
```

}

这是我的 aspx.cs 类，单击一个按钮，它将更新到数据库

```
protected void btnUpdate_Click(object sender, EventArgs e)
{
    int minID = Convert.ToInt32(Session["minID"]);

    string dateAndTime = tbDatepicker.Text + " " + tbTimepicker.Text;
    CultureInfo provider = CultureInfo.InvariantCulture;
    DateTime theDateTime = DateTime.ParseExact(dateAndTime, "d MMMM yyyy hh:mm tt", provider);
    Minute min = new Minute();
    min.DateTime = theDateTime;

    try
    {
        MinuteDB.UpdateMinutesByMinutesID(minID,tbLocation.Text,tbTitle.Text,tbDatepicker.Text,tbTimepicker.Text,tbAttenders.Text,tbAgenda.Text,theDateTime);
    }

    finally 
    {
        btnUpdate.Attributes.Add("onclick", "displaySuccessfulUpdate();");
        Response.Redirect("HomePage.aspx");
    }

} 
```

我不知道为什么我不能让它工作。它提示我一个错误，说找不到 Column(minID)。是因为我没有将实际参数传递给方法吗？有人可以帮我吗？

PS：我使用的是 SQL Anywhere 12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:36:00.467

正如报道的那样，我怀疑`minID`没有找到该列。（有一个名为 的列`ID`，但不是`minID`根据上面的类定义；不匹配还是只是无害的 DAL 映射？）

我*不*希望它与参数有任何关系。错误是在谈论*查询形状*而不是*绑定值*（或缺少绑定值）。

查询数据库（直接）以检查/验证表模式。也许某些代码/存储过程没有更新..

# winapi - 使用 STYPE_TEMPORARY 创建的共享的生命周期是多久？

> ID：11388525
> 
> 赞同：0
> 
> 时间：2012-07-09T02:42:04.047
> 
> 标签：winapi, cifs

或者，更一般地说，指定`STYPE_TEMPORARY`是做什么的？

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/cc462916%28v=vs.85%29.aspx)的“临时共享”。没有帮助。

什么是终身保证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:07:43.747

MSDN 上的*SMB*[协议文档](http://msdn.microsoft.com/en-us/library/cc247110%28v=prot.13%29.aspx)包含更多信息：

 *> STYPE_TEMPORARY：每次文件服务器初始化时不为创建而持久保存的临时共享。

... [NetrShareAdd 上的这个页面](http://msdn.microsoft.com/en-us/library/cc247275%28v=PROT.10%29.aspx)解释了更多预期的语义：

> 如果在 shi*_type 中设置了**STYPE_TEMPORARY字段，** **Share.IsPersistent**必须设置为 FALSE。否则，**Share.IsPersistent**必须设置为 TRUE。
> 
> 如果**Share.IsPersistent**为 TRUE，则服务器必须将**Share**持久化到持久化配置存储中。如果存储中已存在具有相同 ShareName 的共享，则必须用该条目覆盖先前存在的条目。

...但是将其映射到协议的具体实现如何表现是另一回事。*

# ios - iOS：XMPP 与 Old School SSL 连接重新连接

> ID：11388533
> 
> 赞同：4
> 
> 时间：2012-07-09T02:43:33.577
> 
> 标签：ios, ssl, xmppframework, reconnect

[`XMPPFramework`](https://github.com/robbiehanson/XMPPFramework/)`XMPPReconnect`提供了一个名为“意外断开”的扩展，并自动重新连接流。

这适用于正常连接的设置：

```
[xmppStream connect:&error]
[xmppStream setHostPort:5222];
allowSelfSignedCertificates = NO;
allowSSLHostNameMismatch = NO; 
```

但不适用于这个 Old School SSL 连接：

```
[xmppStream oldSchoolSecureConnect:&error]
[xmppStream setHostPort:5223];
allowSelfSignedCertificates = YES;
allowSSLHostNameMismatch = YES; 
```

错误`libxmlErrorDomain`代码`4`与描述的错误`Document is empty`被连续抛出，

有时，也会抛出带有描述的`GCDAsyncSocketErrorDomain`错误代码。`4``Read operation timed out`

请建议我在`XMPPReconnect`Old School SSL 连接上进行工作的方法。

PS XMPP 服务器是`openfire`身份`PLAIN`验证机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:28:25.153

我不认为 XMPPFramework 的重新连接扩展知道老式的 ssl 连接。恕我直言，您将不得不修改 'XMPPReconnect.m' 功能 'maybeAttemptReconnectWithReachabilityFlags:' 以执行以下操作：

```
if(self.usesLegacyConnect) 
   [xmppStream oldSchoolSecureConnect:nil];
} else {
   [xmppStream connect:nil];
} 
```

# iphone - 设备方向更改时 UIWebview 中出现黑条

> ID：11388534
> 
> 赞同：21
> 
> 时间：2012-07-09T02:43:38.863
> 
> 标签：iphone, ios, uiviewcontroller, uiwebview

我有一个 UIWebView 正在加载到另一个视图中，旋转时纵向或横向看起来一切都很好，但是当我处于纵向时，当我从纵向旋转到横向时，我用捏合或双击稍微放大，视图不会完全填充使用 uiwebview，右侧大约有 10pxls 变黑，如此屏幕截图中所述。

![在此处输入图像描述](../Images/c82cbe01c66418a2aea9ce06fddaa460.png)

如果你仔细看，你会看到黑色的滚动指示器的轮廓，这表明这是 uiwebview 的一部分？如果是这样，那么为什么要在该区域变黑。

这里还有另一个向上滚动的 webview 屏幕截图，因此您可以看到它的 uiwebview 部分......

![在此处输入图像描述](../Images/27a3397009fbd4c29e12b1cad70a96f5.png)

这就是我将视图添加到详细视图的方式。

```
- (void)viewdidload
//..

//Load in FirstView
    firstView = [[FirstMainViewController alloc] init];
    firstView.view.frame = CGRectMake(0.0, 0.0, firstView.view.bounds.size.width, firstView.view.bounds.size.height);

    firstView.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

    firstView.view.backgroundColor = [UIColor whiteColor];

    [self.view insertSubview:firstView.view belowSubview:actionTabBar]; 

//.. 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-09T06:13:34.447

尝试将 webView 的背景设置为透明（clearColor）并将其 opaque 属性设置为 FALSE。然后在您的 html 中将背景设为白色，或者将 webView 下方的视图设为白色。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-15T02:19:05.677

我遇到了同样的问题，只需将 opaque 设置为 NO 即可解决。甚至不必更改背景颜色，背景颜色设置为白色时效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T13:25:08.473

我插队...

```
webView.scrollView.backgroundColor = UIColor.whiteColor() 
```

webView 是我的@IBOutlet 弱 var webView: UIWebView！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T07:26:33.787

关闭 ，`WebKitDiskImageCacheEnabled`黑色边框消失：添加以下行：
`applicationDidFinishLaunchingWithOptions`

```
[[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"WebKitDiskImageCacheEnabled"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

# nosql - 添加二级索引时，Cassandra 不显示或应用索引

> ID：11388538
> 
> 赞同：2
> 
> 时间：2012-07-09T02:44:07.937
> 
> 标签：nosql, cassandra, thrift, phpcassa

Cassandra 似乎已经自动删除了一个重要的二级索引，所以我必须恢复它。

我使用 PHPcassa 和 Cassandra CLI 来恢复索引。

两者都报告了索引已应用，但是当我尝试根据索引检索数据时，它抱怨索引列不存在。

这是最新的 Cassandra 版本 1.1.2。

感谢并快速提供帮助！

# c++ - enable_if SFINAE 的问题

> ID：11388544
> 
> 赞同：1
> 
> 时间：2012-07-09T02:45:00.700
> 
> 标签：c++, sfinae, enable-if

我在编写的程序中遇到了一些莫名其妙的 SFINAE 问题，因此我将其归结为一个独立的示例程序：

```
#include <type_traits>

struct Base { };

struct Derived : public Base { };

template<typename T>
struct From { };

template<typename T>
struct To {
    template<typename U>
    To(const From<U>& other) {
        static_assert(std::is_convertible<U*, T*>::value, "error");
    }
};

int main() {
    From<Derived> a;

    To<Base> b = a;
} 
```

该程序编译时没有错误或警告。然而，这：

```
#include <type_traits>

struct Base { };

struct Derived : public Base { };

template<typename T>
struct From { };

template<typename T>
struct To {
    template<typename U>
    To(const From<typename std::enable_if<true, U>::type>& other) {
    // this       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        static_assert(std::is_convertible<U*, T*>::value, "error");
    }
};

int main() {
    From<Derived> a;

    To<Base> b = a;
} 
```

给出以下错误：

> test.cpp：在函数中`int main()`：
> 
> test.cpp:22:18：错误：请求从`From<Base>`非标量类型转换`To<Derived>`

这是因为我认为替换失败了，并且没有看到构造函数。

我做错了 SFINAE，还是这是一个编译器错误？我在 Windows 上使用 rubenvb 的 GCC 4.7.1（`std=c++11`如果它有所作为）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T02:59:30.943

我会使用默认模板参数，这样可以推断出参数：

```
#include <type_traits>

struct Base { };

struct Derived : public Base { };

template<typename T>
struct From { };

template<typename T>
struct To {
    template<typename U, class = typename std::enable_if<true, U>::type>
    To(const From<U>& other) {
    // this       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        static_assert(std::is_convertible<U*, T*>::value, "error");
    }
};

int main() {
    From<Base> a;

    To<Derived> b = a;
} 
```

请注意，这会导致`static_assert`失败，因为您使用`std::is_convertible`的是相反的方式。它应该是：

```
static_assert(std::is_convertible<T*, U*>::value, "error"); 
```

`U`在您的示例中，无法推断模板类型。在我的代码中，它可以推导出来，因为它被用作`other`构造函数中参数的模板参数。在您的代码中，编译器看到 a`std::enable_if<true, U>::type`并且无法推断出该`U`类型是什么。结果`enable_if`被用作模板参数这一事实`From`根本没有帮助，因为`U`需要在此之前推导出来。

# c# - 获取关于给定开始和结束日期的季度数据

> ID：11388545
> 
> 赞同：0
> 
> 时间：2012-07-09T02:45:20.730
> 
> 标签：c#, .net, sharepoint-2010

我需要每季度从共享点列表中获取数据，即，我将开始日期和结束日期作为参数传递，以开始日期的月份为单位，必须计算季度。也就是说，我将 2012 年 2 月 5 日作为我的开始日期然后季度从 2 月 3 月 4 月开始，其余月份同样如此，

现在想象一下，我有 2012 年 12 月、2013 年 1 月和 2 月，其中包括一个季度，在我的情况下，12 月的数据应该包括一个季度，而 1 月和 2 月应该包括另一个季度。我该如何解决这个问题。

我必须在我的输出中显示汽车的名称，以及四分之一的汽车总数我的班级定义如下所示。

```
public class Foo
{
    public int quantity { get; set; }
    public string cars { get; set; }
    public DateTime date { get; set; }
}

List<Foo> lst = new List<Foo>();
lst.Add(new Foo { date = Convert.ToDateTime("31/Dec/2011"), cars = "cars1", quantity = 20 });
lst.Add(new Foo { date = Convert.ToDateTime("31/Dec/2011"), cars = "cars2", quantity = 30 });
lst.Add(new Foo { date = Convert.ToDateTime("1/Jan/2012"), cars = "cars2", quantity = 80 });
lst.Add(new Foo { date = Convert.ToDateTime("11/Feb/2012"), cars = "cars1", quantity = 10 });
lst.Add(new Foo { date = Convert.ToDateTime("29/Feb/2012"), cars = "cars3", quantity = 7 });
lst.Add(new Foo { date = Convert.ToDateTime("29/May/2012"), cars = "cars3", quantity = 1 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:53:55.927

“季度”的概念是特定领域的（即业务确定的），因此您需要自己实现它。

```
class Quarter {
    public static int GetQuarter(Datetime date){
        if (date >= beginningOfQuarter1 && date < endOfQuarter1){
            return 1;
        } else { ... }
    }
}

// elsewhere

int someDatesQuarter = Quarter.GetQuarter(someDate); 
```

看看我要去哪里？我敢肯定那里有很多实现，而且那些可能更面向对象。

# mysql - phpMyAdmin 导出功能如何工作？

> ID：11388546
> 
> 赞同：4
> 
> 时间：2012-07-09T02:45:20.723
> 
> 标签：mysql, phpmyadmin

如果我想创建一个与 phpMyAdmin 中的 Export 选项卡执行相同操作的 PHP 函数，我该怎么做？我不知道是否有执行此操作的 MySQL 函数，或者 phpMyAdmin 是否只是手动构建导出文件（在 SQL 中）。没有外壳访问。只是使用PHP。

我尝试了[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)的文档，但这似乎需要使用 shell。我不太确定那是什么——也许我的问题是：你如何使用 shell？

我的愚蠢想法是允许非技术用户使用 MySQL 在一台服务器（例如本地主机）上构建站点，然后将站点、数据库和所有内容导出到另一台服务器（例如远程服务器）。

我想我对导入过程很清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T06:28:02.347

您可以查看 phpMyAdmin 源代码（开源软件的优势）。检查 library/export/sql.php 脚本文件中的 export.php 脚本和支持函数。

总之，phpMyAdmin 所做的是：

*   获取给定数据库中的表列表（SHOW TABLES FROM ...），
*   获取每个表的创建查询（SHOW CREATE TABLE...），
*   解析它并从中提取列定义，
*   获取所有数据（SELECT * FROM...）
*   根据列数据构建查询。

我为自己的应用程序编写了类似的代码（出于备份目的，当 phpMyAdmin 的 GPL 许可证不允许我使用它时），但是我使用 DESCRIBE 来获取列定义。我认为他们宁愿解析 SHOW CREATE TABLE 输出，因为包含比 DESCRIBE 输出更多的信息。

这种生成 SQL 语句的方式需要小心处理转义，但它具有一定的灵活性，因为您可以转换类型、过滤或清理数据等。它也比使用 mysqldump 之类的工具慢很多，您应该注意不要消耗所有可用内存（尽快写入，经常写入，不要将所有内容都保存在内存中）。

如果您将实现迁移过程（从服务器到服务器），那么使用一些 shell 脚本并直接调用 mysqldump 可能会更容易，除非您将使用 PHP 完成所有操作。

# mono - 单声道 p/invoke 给出“未定义的符号 __dso_handle”

> ID：11388547
> 
> 赞同：0
> 
> 时间：2012-07-09T02:45:24.660
> 
> 标签：mono, pinvoke, ld, dllnotfoundexception

[我在本文](http://www.mono-project.com/DllNotFoundException "这")之后将 .so 添加到 LDConfig 。仍然得到以下内容。[您可以在此处](https://github.com/nterry/39DLL-4-Linux "这里")获取代码的源代码。这是二进制文件启动时的日志。

```
MONO_LOG_LEVEL=debug mono 39dll-4-linux.exe
Mono: gc took 20 usecs
Mono: Assembly Loader probing location: '/usr/lib/mono/4.0/mscorlib.dll'.
Mono: Image addref mscorlib[0x1bd58e0] -> /usr/lib/mono/4.0/mscorlib.dll[0x1bd4c10]: 2
Mono: AOT failed to load AOT module /usr/lib/mono/4.0/mscorlib.dll.so: /usr/lib/mono/4.0/mscorlib.dll.so: cannot open shared object file: No such file or directory

Mono: Assembly Loader loaded assembly from location: '/usr/lib/mono/4.0/mscorlib.dll'.
Mono: Config attempting to parse: '/usr/lib/mono/4.0/mscorlib.dll.config'.
Mono: Config attempting to parse: '/etc/mono/assemblies/mscorlib/mscorlib.config'.
Mono: Assembly mscorlib[0x1bd58e0] added to domain 39dll-4-linux.exe, ref_count=1
Mono: Config attempting to parse: '/etc/mono/config'.
Mono: Config attempting to parse: '/home/nick/.mono/config'.
Mono: Assembly Loader probing location: '39dll-4-linux.exe'.
Mono: Image addref 39dll-4-linux[0x1c520f0] -> /home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/39dll-4-linux.exe[0x1bd3980]: 3
Mono: Assembly 39dll-4-linux[0x1c520f0] added to domain 39dll-4-linux.exe, ref_count=1
Mono: AOT failed to load AOT module /home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/39dll-4-linux.exe.so: /home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/39dll-4-linux.exe.so: cannot open shared object file: No such file or directory

Mono: Assembly Loader loaded assembly from location: '39dll-4-linux.exe'.
Mono: Config attempting to parse: '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/39dll-4-linux.exe.config'.
Mono: Config attempting to parse: '/etc/mono/assemblies/39dll-4-linux/39dll-4-linux.config'.
Mono: Assembly Loader probing location: '39dll-4-linux.exe'.
Mono: AOT failed to load AOT module /home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/39dll-4-linux.exe.so: /home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/39dll-4-linux.exe.so: cannot open shared object file: No such file or directory

Mono: Assembly Ref addref 39dll-4-linux[0x1c520f0] -> mscorlib[0x1bd58e0]: 2
Mono: DllImport attempting to load: 'libWinsockLib'.
Mono: DllImport loading library: '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib'.
Mono: DllImport error loading library '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib: cannot open shared object file: No such file or directory'.
Mono: DllImport loading library: '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib.so'.
Mono: DllImport error loading library '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib.so: undefined symbol: __dso_handle'.
Mono: DllImport loading location: 'libWinsockLib'.
Mono: DllImport error loading library: 'libWinsockLib: cannot open shared object file: No such file or directory'.
Mono: DllImport loading location: 'libWinsockLib.so'.
Mono: DllImport error loading library: '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib.so: undefined symbol: __dso_handle'.
Mono: DllImport loading: 'libWinsockLib'.
Mono: DllImport error loading library 'libWinsockLib: cannot open shared object file: No such file or directory'.
Mono: DllImport unable to load library 'libWinsockLib: cannot open shared object file: No such file or directory'.
Mono: DllImport attempting to load: 'libWinsockLib'.
Mono: DllImport loading library: '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib'.
Mono: DllImport error loading library '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib: cannot open shared object file: No such file or directory'.
Mono: DllImport loading library: '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib.so'.
Mono: DllImport error loading library '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib.so: undefined symbol: __dso_handle'.
Mono: DllImport loading location: 'libWinsockLib'.
Mono: DllImport error loading library: 'libWinsockLib: cannot open shared object file: No such file or directory'.
Mono: DllImport loading location: 'libWinsockLib.so'.
Mono: DllImport error loading library: '/home/nick/Projects/39dll-4-linux/39dll-4-linux/bin/Debug/libWinsockLib.so: undefined symbol: __dso_handle'.
Mono: DllImport loading: 'libWinsockLib'.
Mono: DllImport error loading library 'libWinsockLib: cannot open shared object file: No such file or directory'.
Mono: DllImport unable to load library 'libWinsockLib: cannot open shared object file: No such file or directory'.

Unhandled Exception: System.DllNotFoundException: libWinsockLib
  at (wrapper managed-to-native) dll4linux.Net:dllInit ()
  at dll4linux.SockLib.Init () [0x00000] in <filename unknown>:0 
  at dll4linux.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.DllNotFoundException: libWinsockLib
  at (wrapper managed-to-native) dll4linux.Net:dllInit ()
  at dll4linux.SockLib.Init () [0x00000] in <filename unknown>:0 
  at dll4linux.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

我完全被难住了。关于出了什么问题的任何想法？

仅供参考，我正在调用以下 C# 代码：

```
[DllImport("libWinsockLib", CallingConvention = CallingConvention.Cdecl, EntryPoint = "dllInit")]
public static extern Double dllInit(); 
```

最后，我使用以下构建命令来构建 39dll-4-linux 项目：

为每个 .cpp 文件执行：

```
g++ -fPIC -c -o obj/<filename>.o <filename>.cpp 
```

然后我执行：

```
ld -G obj/*.o -o 39dll4linux.so 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:21:01.280

没关系！我想到了。事实证明， ld 不是打包和链接共享库的好方法。

而不是 ld 命令，我使用：

```
g++ -shared obj/*.o -o 39dll-4-linux.so 
```

它就像一个魅力！

# c# - Visual C#：不能再在 winforms 中使用 Convert 方法

> ID：11388553
> 
> 赞同：1
> 
> 时间：2012-07-09T02:46:24.000
> 
> 标签：c#, visual-studio, compiler-errors

也许我在这里遗漏了一些完全简单的东西，但是在我创建的任何新窗口窗体中，我都不能再使用 Convert 方法。我很确定我所有的 using 指令都在那里，并且我没有使用任何扩展。自从我上次使用 VS 以来，我没有做任何改变，当时一切正常。

这可能是 VS 2011 Beta 的一个小问题，还是我的一个简单错误？

这是我的代码以及显示的错误：

> “System.Windows.Forms.Button”不包含“ToInt32”的定义
> 
> 并且没有扩展方法“ToInt32”接受类型的第一个参数
> 
> 'System.Windows.Forms.Button' 可以找到
> 
> （您是否缺少 using 指令或程序集引用？）

这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace TempConvert
{
    public partial class Form1 : Form
    {
        int degreesEntered;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
        }

        private void Convert_Click(object sender, EventArgs e)
        {
            degreesEntered = Convert.ToInt32(Degrees.Text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T02:49:47.727

我相信问题是你有一个名为的按钮`Convert`，它隐藏了静态类 - 你可以尝试使用完整的命名空间来引用它，或者做一个`int.Parse`

```
System.Convert.ToInt32(Degrees.Text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T02:48:06.133

将`Int32.Parse()`文本解析为整数时使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T02:50:36.523

您的按钮`Convert`应该被重命名，因为它具有与类相同的名称，[`Convert`](http://msdn.microsoft.com/en-us/library/system.convert.aspx)并且您可能在应用程序的其他几个部分中使用该类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T02:51:50.297

使用完全限定名称作为`System.Convert`

# java - 使用 Eclipse 进行 GWT 代码验证

> ID：11388560
> 
> 赞同：1
> 
> 时间：2012-07-09T02:47:52.717
> 
> 标签：java, eclipse, gwt

当我打开我的 GWT 项目时，它总是验证 GWT Java 代码 (`.java`和`.ui.xml`)，我的项目的代码非常大，因此完成验证需要很长时间。我如何控制这个验证过程，所以我不会在每次打开我的项目时验证所有内容？

从 Eclipse 控制台我可以看到验证时间最长的是那些 ui.xml 代码，例如：

```
MYPROJECT/src/main/webapp/WEB-INF/classes/com/mycompany/client/core/view/MainView.ui.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:29:02.200

在每个 ui.xml 文件中都会有以下代码行。请发表评论。它将减少验证和获取资源的时间。

```
 <!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent"> 
```

# django - 为什么 django-registration 使用“激活窗口”来激活帐户？

> ID：11388565
> 
> 赞同：2
> 
> 时间：2012-07-09T02:48:52.083
> 
> 标签：django, django-registration

我正在使用 django-registration，这是一个 django 库，可帮助用户在 django 构建的网站上注册。一切都好，花花公子，除了它*坚持*我有一个与所有新用户相关联的“激活电子邮件时间范围”。

它默认为 7 天窗口，在此之后，如果有人注册（然后我们发送了一封电子邮件以确认他们的电子邮件地址）但在 7 天内没有点击已发送电子邮件中的链接，则他们无法注册. 相反，他们需要重新完成整个过程。

我确信这是网页设计中普遍存在的一个概念，因为为什么 django-registration 会创建自己的任意注册过程？

无论如何，问题是*为什么*？知道我网站的所有用户都是那种在收到 7 天后点击注册电子邮件的干将，我可以安心地获得什么？知道我的数据库中没有满是出于某种原因点击注册但实际上并不*想*注册的用户，为什么我应该睡得更安稳？

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:06:18.840

如果您稍后决定发布时事通讯，或想要发送重要消息（例如，更改您的隐私政策），您最不希望看到的消息是：

*   垃圾[邮件陷阱](http://en.wikipedia.org/wiki/Spamtrap)邮箱
*   错误的邮箱（因为错字或恶作剧）

第一个将削弱您访问前五名电子邮件提供商（Gmail、Windows Live (MSN)、雅虎、AOL 和......我忘了第五个）的任何邮箱的能力。第二个将导致更多具有相同效果的垃圾邮件投诉。

这就是为什么您应该关心您的订阅者电子邮件是否通过[双重选择确认](http://email.about.com/library/glossary/bldef_double_opt-in.htm)

[更新]

我现在不明白你的问题，谢谢你的澄清。这在文档中进行了解释：

> 不可避免地，使用两步过程进行用户注册的网站 - 注册后激活 - 将积累一定数量的已注册但从未激活的帐户。这些帐户使数据库混乱并占用了可能会被积极使用的用户名，因此最好定期清理它们。

Just change ACCOUNT_ACTIVATION_DAYS if you don't care about your subscriber database being filled with inactive accounts.

# javascript - 如何在 Three.js 中使用 stencilFunc 函数

> ID：11388569
> 
> 赞同：3
> 
> 时间：2012-07-09T02:49:22.293
> 
> 标签：javascript, three.js

我可以在 Three.js 中使用 stencilFunc 和 stencilOp 函数吗？我试图实现模板测试的代码，但没有奏效。

```
var scene = new THREE.Scene();
var renderer = new THREE.WebGLRenderer({
    antialias: true,
    stencil: true
});

function render() {
    var context = renderer.context;

    context.enable(context.STENCIL_TEST);
    context.stencilFunc(context.ALWAYS, 0, 0xffffffff);
    context.stencilOp(context.REPLACE, context.REPLACE, context.REPLACE);
    context.clearStencil(0);
    context.clear(context.COLOR_BUFFER_BIT, context.DEPTH_BUFFER_BIT, context.STENCIL_BUFFER_BIT);

    renderer.render(scene, camera);
    context.stencilFunc(context.EQUAL, 1, 0xffffffff);
    context.stencilOp(context.KEEP, context.KEEP, context.KEEP);

    context.disable(context.STENCIL_TEST);
    context.flush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T10:41:13.017

当您创建 WebGL 渲染器时，默认情况下它将为 true，根据 threeJS 文档

[http://threejs.org/docs/#Reference/Renderers/WebGLRenderer](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js)

您可以直接从渲染对象调用 clearStencil()，因为它是渲染器的行为，不知道为什么要从上下文中调用它，另外

您在代码中调用的某些函数在 ThreeJs webGL 渲染器类中不存在。

下面是类源代码的链接。请检查

[https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js)

# jquery - 通过点击功能停止悬停功能

> ID：11388584
> 
> 赞同：0
> 
> 时间：2012-07-09T02:51:55.303
> 
> 标签：jquery

```
 $("#theDiv").hover(function(){
            $(this).animate( {top: "300px", left: "400px", width: "50px" , height: "50px" },"Fast")
        }); 

        $("#theDiv").click(function(){
            $(this).stop();
        }); 
```

代码如上。当我单击它时，我试图停止悬停功能，但它不起作用。还是根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:54:51.857

```
$("#theDiv").mouseenter(function(){
    $(this).animate( {
        top: "300px",
        left: "400px",
        width: "50px" ,
        height: "50px"
    } , "fast");
}).click(function(){
    $(this).stop(true, false);
}); 
```

[.stop( [clearQueue] [, jumpToEnd] )](http://api.jquery.com/stop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:54:09.270

```
$("#theDiv").on({
    mouseenter: function() {
        $(this).animate( {top: "300px", left: "400px", width: "50px" , height: "50px" },"Fast");
    },
    click: function() {
        $(this).off('mouseenter').stop(true);
    }
}); 
```

[小提琴](http://jsfiddle.net/9m5zy/)

# mysql - 如何从表中选择仅记录最近三天的数据

> ID：11388588
> 
> 赞同：3
> 
> 时间：2012-07-09T02:52:36.557
> 
> 标签：mysql, date, select, days

我通过 mysql NOW() 函数在“日期”字段中记录了数据。我想选择记录最近三天（今天、昨天和前天）的数据，但不知道要这样做。

```
SELECT * FROM tlb_students WHERE date ...?... ORDER BY date DESC LIMIT 20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T02:53:43.813

```
WHERE date >= ( CURDATE() - INTERVAL 3 DAY ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T02:56:53.403

```
SELECT * 
FROM tlb_students 
WHERE date >= NOW() - INTERVAL 3 DAY
ORDER BY date DESC
LIMIT 20 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T03:04:08.593

```
WHERE date >= subdate(NOW(), 2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T03:01:58.157

另一种方法是：

```
SELECT * FROM tlb_students WHERE date < DATE_ADD(CURDATE(),INTERVAL -3 DAY) 
```

# ruby - 在javascript中将lat long转换为地址

> ID：11388590
> 
> 赞同：1
> 
> 时间：2012-07-09T02:52:49.427
> 
> 标签：ruby, google-maps, geocode, google-geocoding-api

我正在尝试将 markerWindow 中的显示从 lat long 更改为地址。我无法理解有关如何执行此操作的 Google API。我愿意使用 Google API 或 geocoder gem，无论哪个效果更好。我只是不确定如何将它们中的任何一个包含到我的代码中。

```
 var map;
  function initialize() {

    //initializing map view
    var myOptions = {
      zoom: 13,
      center: new google.maps.LatLng(42.32657009662249, -71.06678009033203),
      disableDefaultUI: true,
      panControl: true,
      zoomControl: true,

      scaleControl: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP, 
      panControl: true,
      panControlOptions: {
        position: google.maps.ControlPosition.TOP_RIGHT
      },
      zoomControl: true,
      zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE,
        position: google.maps.ControlPosition.TOP_RIGHT
      }
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);

    //BIKE STUFF
    var bikeLayer = new google.maps.BicyclingLayer();
    bikeLayer.setMap(map);

    <% @Reports.each do |x|%>
      addMarker(<%= x.latitude %>, <%=x.longitude%>);
    <% end %>
  }

  function addMarker(lat, long){
        var marker = new google.maps.Marker({
          position: new google.maps.LatLng(lat, long),
          map: map,
          title: 'REPORT'
        });
        //DROP PIN
        marker.setAnimation(google.maps.Animation.DROP);
        marker.setTitle('DROP');
        //DROP MARKER INFOWINDOW
        var latlng = new google.maps.LatLng(lat, long);
        google.maps.event.addListener(marker, 'click', function(){
          infowindow.open(map, this);
          marker = this
        });
        var infowindow = new google.maps.InfoWindow({
          content:"Lat: " + lat + ", Long: " + long
        });
        //CLOSING MARKER INFOWINDOW
        google.maps.event.addListener(infowindow,'closeclick',function(){
          infowindow.close(map, this); //removes the marker
        });
    }    
  console.log("message")
  google.maps.event.addDomListener(window, 'load', initialize); 
```

相反，它在 InfoWindow 中显示内容，我希望它显示地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:06:38.823

从您现有的代码开始，显示标记地址的一种方法是将其存储在您的数据库中（或您要查询的任何内容以获取纬度和经度），然后将其传递给“addMarker”调用（在更改addMarker 函数接受包含地址的第三个参数。

未测试：

```
function addMarker(lat, long, address){
    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat, long),
      map: map,
      title: 'REPORT'
    });
    //DROP PIN
    marker.setAnimation(google.maps.Animation.DROP);
    marker.setTitle('DROP');
    //DROP MARKER INFOWINDOW
    var latlng = new google.maps.LatLng(lat, long);
    google.maps.event.addListener(marker, 'click', function(){
      infowindow.open(map, this);
      marker = this
    });
    var infowindow = new google.maps.InfoWindow({
      content:address
    }); 
```

如果您还没有存储地址，您可以使用 Google 的地理编码服务作为反向地理编码器将 lat/lng 转换为地址。

编辑：您可以从讨论地理编码策略的文档中查看这篇[“文章”](https://developers.google.com/maps/articles/geocodestrat)，地理编码器和反向地理编码器服务是相似的，并且相同的配额和速率限制适用于它们。

*   这是[关于反向地理编码服务的文档](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

*   这是[反向地理编码（客户端）文档中的示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse)

*   这是[一个使用反向地理编码器返回拖动标记的地址并在信息窗口中显示返回地址的示例](http://www.geocodezip.com/v3_directions_custom_revgeo.html)

# c - 循环遍历函数指针数组

> ID：11388591
> 
> 赞同：1
> 
> 时间：2012-07-09T02:52:54.273
> 
> 标签：c, function, pointers

我有这个结构：

```
typedef struct {
    void (*func)(instruction);
    union {
        double db;
        char ch;
    };
} instruction; 
```

在我的源文件中，我有一组这些指令。我的问题是，我将如何遍历该数组并执行每个结构的函数？

我以为我知道该怎么做，但是指令函数有一个指令参数这一事实似乎会导致问题。因此，这不起作用：

```
int i;
    for (i = 0; i <= instr_count; i++) {
        (*instr[i].func) (instr[i]);
        } 
```

instr 是指令数组。

这是填充数组的函数。数组本身在文件顶部声明。

```
void read_instructions()
{
    char* str;
    char *instruct;
    int n;
    char c;
    instruction next = {0};
    while (!feof(datafile)) {
        // Fetch the next string
        // if (push or pop), get the next argument
        // create instructiwn and add to instruction array
        str = get_next_string();

        instruct = strtok (str, " ");

        if (strncmp (instruct, "P", 1) == 0) {
            char *arg = strtok (NULL, " ");
            if (strncmp (str, "PUSH", 4) == 0) {
                next.func = pushFunc;
            }
            else {
                next.func = popFunc;
            }
            n = arg[0];
            if (n > 64 || n < 71)
                next.ch = n;
            else {
                double n;
                scanf ("%lf", arg, n);
                next.db = n;
            }
            instr[instr_count] = next;
            instr_count++;
        }
        else {
            c = instruct[0];

            switch (c) {
            case 'A' :
                next.func = addFunc;
                break;
            case 'S' :
                next.func = subFunc;
                break;
            case 'M' :
                next.func = multFunc;
                break;
            case 'D' :
                next.func = divFunc;
                break;
            default :
                break;
            }
            instr[instr_count] = next;
            instr_count++;
        }
    }
    fclose (datafile);
} 
```

作为快速解释，此代码获取一个“中间代码”文件，确定指令，并为每个包含正确函数指针的指令结构创建一个指令结构。

运行代码会给我这个运行时错误：

> “Interpreter.exe 中 0x00000000 处未处理的异常：0xC0000005：访问冲突。” （使用 VS 2010 编译）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:03:24.737

根据是否`instr`是`instruction`or的数组`instruction *`，您想要

```
instr[i].func(&instr[i]); 
```

或者

```
instr[i]->func(instr[i]); 
```

我怀疑您想要第一个（数组`instruction`），因为您将为此编译（在大多数编译器上带有警告）；你只会得到函数中参数的垃圾。

但是，您得到的异常表明这不是您的问题——您`func`的数组中可能有一条带有 NULL 指针的指令。

**编辑**

看起来你正在犯经典`while(!feof(input))`错误——每当你看到这个，它几乎总是错的。

问题是，在您读取输入的最后一行之后，`feof`仍然会返回 false - 在您尝试读取 PAST 输入的结尾并收到 EOF 结果之前，它不会返回 true。因此，您将在输入代码结束后获得带有空行的循环的额外迭代，这可能会导致您看到的崩溃。

你可能想要的是类似的`while (!(str = get_next_string()))`东西`while (!(str = fgets(buffer, sizeof(buffer), datafile)))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:56:00.550

如果不查看其余代码很难判断，但错误 ( `0x00000000`) 中列出的地址意味着数组中的函数指针之一是`NULL`.

您能否在遍历之前验证您的数组是否已正确初始化？

# exception - jpql 按大小排序错误

> ID：11388597
> 
> 赞同：0
> 
> 时间：2012-07-09T02:53:45.077
> 
> 标签：exception, jpql

谁能解释为什么这会引发 JPQL 异常？

```
Query q = em.createQuery("select object(o) from SiteMember as o order by size(o.memberThread) desc");

memberThread refer a list. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:28:48.810

很可能是因为您使用了 JPA 实现（数据库供应商也很重要），它没有针对此类查询的供应商扩展。根据 JPA 2.0，以下类型的值可以使用 in `ORDER BY`：

```
 1.A state_field_path_expression that evaluates to an orderable state field of an 
   entity or embeddable class abstract schema type designated in the SELECT clause 
   by one of the following:  
 • a general_identification_variable  
 • a single_valued_object_path_expression  

 2.A state_field_path_expression that evaluates to the same state field of the same 
  entity or embeddable abstract schema type as a state_field_path_expression in the
  SELECT clause

3.A result_variable that refers to an orderable item in the SELECT clause for which 
 the same result_variable has been specified. This may be the result of an
 aggregate_expression, a  scalar_expression, or a state_field_path_expression in the 
 SELECT clause. 
```

例如，您的查询适用于 EclipseLink(2.3.2) 和 MySQL。

# php - 无法将值打印到文件中

> ID：11388600
> 
> 赞同：0
> 
> 时间：2012-07-09T02:54:08.977
> 
> 标签：php, javascript, jquery, csv

我正在尝试将存储在变量 fieldCSV 中的值传递给文件 data.csv ...我使用 javascript 和 php 来执行此操作.. 当一个值存储到变量 fieldCSV 中时，我触发了一个 ajax 请求，bt 这是 nt作为下载的文件工作，会在其中打印 php 错误而不是 csv ..

```
$.ajax({
    type: "POST",
    url: "/test/fileDownload.php",
    data: {
        name: fieldCSV},
});

<?php
$name = $_POST["name"];
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv');
$output = fopen('php://output', 'w');
fputcsv($output, $name);
?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:09:41.430

在你使用之前`$ _POST['name']`做`if (isset($_POST['name'])) { ... }`. 您可以确保发布数据正在通过。作为临时测试，直接更改`$_POST`并`$_GET`访问该页面`http://..../test/fileDownload.php?name={csv-text}`，看看您是否在文件中得到相同的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:53:47.697

好像您正在传递绝对路径。只是确定一下，你是故意放这个的吗？

```
url: "/test/fileDownload.php"; 
```

# ruby - 通过 ruby 将 csv 加载到哈希中，然后从哈希中选择元素

> ID：11388606
> 
> 赞同：0
> 
> 时间：2012-07-09T02:55:17.613
> 
> 标签：ruby, csv, hash, load

我今天正在学习 ruby​​，并且一直在从哈希中提取单个元素。

## 登录1.csv

```
role,uName,passwd
adm,admin1,a1
mgr,manager,m
user,user1,u1
adm,admin2,a2 
```

## 红宝石代码

```
def csvIntoHash
  # load csv Into hash
  $table = []
  File.open("logIn1.csv") do|f|
    columns = f.readline.chomp.split(',')
    until f.eof?
      row = f.readline.chomp.split(',')
      row = columns.zip(row).flatten #build hash from array
      $table << Hash[*row]
    end
  end
end
#
#main
csvIntoHash
#pulls all hash elements when role=mgr
puts $table.select {|rEntry| rEntry["role"]=="mgr"} 
```

当 role=mgr 时如何仅提取 uName 然后将其分配给变量？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:19:05.490

您应该查看[Core 中的 CSV 库](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)

从这里的 CSV 格式来看，如果你真的希望它得到`uName`经理的，我有以下解决方案。

```
manager = ""
CSV.read("file.csv").each_with_index do |arr, index|
  role_column = arr.index("role") if index == 0
  if arr[role_column.to_i] == "mgr"
    manager = arr[role_column.to_i + 1]
  end
end 
```

**编辑：**
显然，这假设 CSV 表中只有一位经理。如果需要，您可以修改代码以分配一组管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:57:33.087

`select()`返回一个数组，因此请查看第一个（仅在您的情况下？）条目，它是您构造时的哈希：

```
mgrh = $table.select {|rEntry| rEntry["role"]=="mgr"}
mgr_role = mgrh.first["uName"] # => "manager" 
```

# c# - 在运行时获取非泛型 IDictionary 的键值类型

> ID：11388607
> 
> 赞同：3
> 
> 时间：2012-07-09T02:55:33.810
> 
> 标签：c#, types, dictionary

我想知道如何在运行时获取非泛型 IDictionary 的键和值类型。

[对于泛型 IDictionary，我们可以使用反射来获取泛型参数，此处](https://stackoverflow.com/questions/982389/c-sharp-get-the-types-defining-a-dictionary-at-run-time)已回答。

但是对于非泛型 IDictionary，例如 HybridDictionary，如何获取键和值类型？

编辑：我可能无法正确描述我的问题。对于非泛型 IDictionary，如果我有 HyBridDictionary，它被声明为

```
HyBridDictionary dict = new HyBridDictionary();

dict.Add("foo" , 1);
dict.Add("bar", 2); 
```

如何找出键的类型是字符串，值的类型是 int？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:59:45.097

从 msdn 页面：

[链接](http://msdn.microsoft.com/en-us/library/system.collections.specialized.hybriddictionary.aspx)

```
 // Uses the foreach statement which hides the complexity of the enumerator.
   // NOTE: The foreach statement is the preferred way of enumerating the contents of a collection.
   public static void PrintKeysAndValues1( IDictionary myCol )  {
      Console.WriteLine( "   KEY                       VALUE" );
      foreach ( DictionaryEntry de in myCol )
         Console.WriteLine( "   {0,-25} {1}", de.Key, de.Value );
      Console.WriteLine();
   }

   // Uses the enumerator. 
   // NOTE: The foreach statement is the preferred way of enumerating the contents of a collection.
   public static void PrintKeysAndValues2( IDictionary myCol )  {
      IDictionaryEnumerator myEnumerator = myCol.GetEnumerator();
      Console.WriteLine( "   KEY                       VALUE" );
      while ( myEnumerator.MoveNext() )
         Console.WriteLine( "   {0,-25} {1}", myEnumerator.Key, myEnumerator.Value );
      Console.WriteLine();
   }

   // Uses the Keys, Values, Count, and Item properties.
   public static void PrintKeysAndValues3( HybridDictionary myCol )  {
      String[] myKeys = new String[myCol.Count];
      myCol.Keys.CopyTo( myKeys, 0 );

      Console.WriteLine( "   INDEX KEY                       VALUE" );
      for ( int i = 0; i < myCol.Count; i++ )
         Console.WriteLine( "   {0,-5} {1,-25} {2}", i, myKeys[i], myCol[myKeys[i]] );
      Console.WriteLine();
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:03:09.700

尝试这个：

```
foreach (DictionaryEntry de in GetTheDictionary())
{
    Console.WriteLine("Key type" + de.Key.GetType());
    Console.WriteLine("Value type" + de.Value.GetType());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T03:03:44.547

非泛型字典不一定具有与泛型字典相同的键或值类型。它们可以将任何类型作为键，将任何类型作为值。

考虑一下：

```
var dict = new System.Collections.Specialized.HybridDictionary();

dict.Add(1, "thing");
dict.Add("thing", 3); 
```

它有多种类型的键和多种类型的值。那么，你会说钥匙是什么类型的呢？

您可以找出每个单独的键和单独的值的类型，但不能保证它们都是相同的类型。

# sql - 在 3 列中的 2 列中查找值的存储过程

> ID：11388609
> 
> 赞同：0
> 
> 时间：2012-07-09T02:55:51.153
> 
> 标签：sql

我正在输入样本日期，我应该做一些与我要求类似的事情。我想运行一个查询，如果它有 1 或者如果任何一列有 1，它将把任何两列中的值拉出 3，它将只返回那些结果。但是，它应该搜索所有三列，并且在它发现值为 1 的三列中的任何一列中，它都应该返回该结果。谁能帮我解决这个问题。提前致谢。

```
ID  Patient PatientName prio  prio2   prio3
-----------------------------------------------------    
1   101563  Robert Riley    1   1   1
2   101583  Cody Ayers  1   0   1
3   101825  Jason Lawler    0   0   1
4   101984  Dustin Lumis    1   0   0
5   102365  Stacy smith 0   0   1
6   102564  Frank Milon 1   1   0
7   102692  Thomas Kroning  1   0   1
8   102856  Andrew Philips  1   0   0
9   102915  Alice Davies    0   0   1
10  103785  Jon Durley  0   0   1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:42:36.790

另一种选择：要求在列值中同时找到零和一。

```
WHERE 0 IN (prio, prio, prio3) AND 1 IN (prio, prio2, prio3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:03:22.940

如果我理解您的问题，您希望患者设置了 1 个或 2 个“Prio*”标志，但排除设置了 0 个或所有 3 个 Prio 标志的患者。假设标志被限制在 [0,1] 的域中 - 例如不可为空的位，那么以下应该可以解决问题：

```
SELECT ID, Patient, PatientName
FROM Patients
WHERE (0 + prio + prio2 + prio3 >= 1) AND (0 + prio + prio2 + prio3 <= 2) 
```

*编辑*只是关于性能的注释-您没有提到哪个 SQL，但是像这样搜索位字段几乎肯定会导致表扫描。为了提高性能，您可以例如在 SQL Server 上创建一个持久计算列`prio + prio2 + prio3`，然后对其进行索引 - 根据数据的分布，索引至少具有选择性的战斗机会。

*Edit2*根据 Shawnt00 的评论，如果不强制转换为其中一种数字类型，则无法添加位字段。（谢谢！）

# asp.net - Visual Studio 2010 - 无法通过菜单添加数据源

> ID：11388611
> 
> 赞同：0
> 
> 时间：2012-07-09T02:55:59.893
> 
> 标签：asp.net, .net, visual-studio-2010, datasource

我正在通过 Visual Studio 2010 开发一个 ASP.NET 4.0 网站，我是 ASP.NET 的新手，但是我有使用 VB.NET 的经验。

我正在尝试通过数据菜单添加数据源（SQL Server .MDF 文件），就像在编写 Visual Basic 程序时一样，但在数据菜单下没有执行此操作的选项。通常我希望看到大量选项列表，例如“添加新数据源”，但我只有两个选项“Transact-SQL 编辑器”和“架构视图”。

我尝试手动添加数据库 .mdf 文件并通过代码连接到它，但 Visual Studio 将不会创建任何数据集或数据适配器。

同样在数据源窗口下，即使我添加了 .mdf 文件和连接字符串，也没有出现数据源。

我应该如何正确添加数据源并创建数据集、数据适配器等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:25:52.763

在解决方案资源管理器中，右键单击“添加 ASP.NET 文件夹”，然后选择“App_Data”。选择“App_Data”文件夹，右键单击，然后单击“添加新项目”。从那里，选择“SQL Server 数据库”。

~~您还可以通过单击查看 > 服务器资源管理器 > 数据连接将数据库添加到 SQL Server 本身（如果您已经有现有的 .mdf 文件）。右键单击然后添加连接。~~

# visual-studio-2010 - VS 2010 删除后继续添加文件

> ID：11388617
> 
> 赞同：0
> 
> 时间：2012-07-09T02:57:35.867
> 
> 标签：visual-studio-2010, visual-studio, tfs

我可以从我的解决方案资源管理器中删除一个文件，然后将更改提交回 TFS。但是当我退出 VS 时，它会将文件添加回来。因此，当我返回时，它会显示为待处理的添加。我该如何摆脱它！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:03:11.740

切换到团队资源管理器视图（视图 --> 团队资源管理器）。双击您正在处理的团队项目的源代码控制。然后，您可以选择项目的源代码树并右键单击，然后选择*Undo Pending Changes*以删除文件的挂起添加。

# apache - 将所有通配符子域重定向到根域

> ID：11388618
> 
> 赞同：9
> 
> 时间：2012-07-09T02:57:48.130
> 
> 标签：apache, .htaccess, mod-rewrite

好的，我已经进行了大量搜索，但仍然找不到足够具体的内容来解决我的问题。

现在我有一个 DNS 记录，将所有其他子域重定向到我的服务器。我要问的是什么会`example.mydomain.com`返回`HTTP/1.1 301`并重定向到`mydomain.com`

如果这已被涵盖，我很抱歉，我只是找不到足够具体的内容。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T03:00:46.427

使用 a来匹配除301`RewriteCond`以外的域并重定向它们：`mydomain.com`

```
RewriteEngine On
# If the domain (any domain) is not exactly mydomain.com...
RewriteCond %{HTTP_HOST} !^mydomain\.com$ [NC]
RewriteRule (.*) http://mydomain.com/$1 [L,R=301,QSA] 
```

您还可以更具体地查找`mydomain.com`. 上面的一个将匹配*任何*其他域。

```
# Match only subdomains of mydomain.com
RewriteCond %{HTTP_HOST} ^(.+)\.mydomain\.com$ [NC]
RewriteRule (.*) http://mydomain.com/$1 [L,R=301,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:00:56.950

[本文](http://enarion.net/web/htaccess/migrate-domains/)涵盖 .htacces 和 ModRewrite 以将向主域以外的任何域发出的任何请求重定向到主域。

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !www.newdomain.com$ [NC]
RewriteRule ^(.*)$ http://www.newdomain.com/$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-19T22:34:36.737

在我的情况下，我需要像`foo.bar.com`>这样的规则`bar.com/page/foo`，我在 apache 文档中找到了这个：

```
RewriteCond %{HTTP_HOST} ^(.+)\.bar\.com$ [NC]
RewriteCond %{HTTP_HOST} !www.bar.com$ [NC]
RewriteRule ^(.*)$ http://bar.com/page/%1/$1 [L,R=301] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T03:45:45.990

根据[evan 的博客](http://blog.evan.pro/how-to-set-up-dynamic-virtual-hosts-for-web-development)，如果您将 apache 作为服务器端，则可以使用通配符“*”配置您的 ServerAlias。在这种情况下，对子域的每次访问都将被重定向或路由到根域。

```
<Virtualhost *:80>
VirtualDocumentRoot "/path/to/your/workspace/%1/public"
ServerName vhosts.dev
ServerAlias *.dev
UseCanonicalName Off
<Directory "/path/to/your/workspace/*">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>
</Virtualhost> 
```

# java - JLabel 位置 - JAVA GUI

> ID：11388620
> 
> 赞同：0
> 
> 时间：2012-07-09T02:58:22.753
> 
> 标签：java, swing, user-interface, jpanel, jlabel

我想在屏幕上的某些坐标处放置一个图像标签。
我使用了下面的代码，但它不起作用。
此外，将注释行添加到代码时，会出现错误

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;

public class EmiloLadderSnack
{
    public static void main(String args[])
    {
        Graphics g;
        JFrame frame=new JFrame("EmiloLadderSnack");
        JPanel panel=new JPanel();
        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
        frame.setBounds(0, 0, Toolkit.getDefaultToolkit().getScreenSize().width, Toolkit.getDefaultToolkit().getScreenSize().height);
        frame.setVisible(true);
        frame.add(panel);
        BufferedImage img=null;
        try
        {
            img=ImageIO.read(new File("/media/01CCE00FA6888D80/Achieve/Eclipse/EmiloLadderSnack/src/photo.jpg"));
        }
        catch(IOException e)
        {
            //g.drawString(e.toString(), 0, 0);
        }
        ImageIcon icon=new ImageIcon(img);
        JLabel lbl=new JLabel(icon);
        lbl.setLocation(50, 50);
        panel.add(lbl);
        lbl.setLocation(50, 50);
    }
} 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:39:25.277

您应该首先将组件添加到框架中，然后调用`pack()`,`setSize()`或`setVisible()`. 在您的情况下，您在`ImageIcon`框架已经可见后添加到面板。添加`panel.revalidate();`应该可以解决眼前的问题。但是，最好先完成[如何制作框架](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)教程。

至于第二个问题，`Graphics`对象没有初始化。而且，这不是`Graphics`应该如何使用的。如果要在组件的表面上绘制字符串，请覆盖[paintComponent()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)并使用提供的`Graphics`对象。有关详细信息，请参阅[课程：执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)。否则，如果目的是简单地通知用户错误，您可以使用[JOptionPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)。相关教程是[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)。

此外，使用绝对布局可能非常困难。查看布局管理器[的视觉指南，](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)了解不同的布局管理器及其基本用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:07:51.183

```
setVisible(true); 
```

should write at the end of, adding all components to Frame.

or else write the

```
panel.revalidate(); 
```

after adding the components to panel.

Your code is here:

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;

public class EmiloLadderSnack
{
public static void main(String args[])
{
    Graphics g;
    JFrame frame=new JFrame("EmiloLadderSnack");
    JPanel panel=new JPanel();
    frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
    frame.setBounds(0, 0, Toolkit.getDefaultToolkit().getScreenSize().width, Toolkit.getDefaultToolkit().getScreenSize().height);

    frame.add(panel);
    BufferedImage img=null;
    try
    {
        img=ImageIO.read(new File("/media/01CCE00FA6888D80/Achieve/Eclipse/EmiloLadderSnack/src/photo.jpg"));
    }
    catch(IOException e)
    {
        //g.drawString(e.toString(), 0, 0);
    }
    ImageIcon icon=new ImageIcon(img);
    JLabel lbl=new JLabel(icon);
    lbl.setLocation(50, 50);
    panel.add(lbl);
    lbl.setLocation(50, 50);
    frame.setVisible(true);//put it here
}
} 
```

# javascript - jQuery fadeTo 在 IE8 中不起作用

> ID：11388621
> 
> 赞同：4
> 
> 时间：2012-07-09T02:58:56.927
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8

我有一个 div 正在使用`fadeTo`. 它在 Firefox 和 IE9 中运行良好。它在 IE8 中不起作用。这是我的代码：

**JS**：

```
var $j = jQuery.noConflict();
    window.onload = function(){ 
    $j('#fadein').fadeTo(6000, 1, function() {
  });       
}; 
```

**HTML**

```
<div class="img-center" id="fadein" style="opacity:0;">
<img src="src.jpg" alt="Text" class="feature-image" />
</div> 
```

我如何让它在 IE8 中工作？只要它在 IE8 中工作，我不介意从`fadeTo`to`fadeIn`或其他一些淡入淡出的方法。`div`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T03:09:54.823

jQuery 的 fadeTo() 应该在 IE8 中工作，但是元素必须有“布局”，请参阅“ [haslayout](http://www.satzansatz.de/cssd/onhavinglayout.html) ”，并且在糟糕的浏览器中不透明度的 CSS 语法是：

```
.transparent_class {
  /* IE 8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

  /* IE 5-7 */
  filter: alpha(opacity=50);

  /* Netscape */
  -moz-opacity: 0.5;

  /* Safari 1.x */
  -khtml-opacity: 0.5;

  /* Good browsers */
  opacity: 0.5;
} 
```

# jsf-2 - facelets“目标无法到达”

> ID：11388630
> 
> 赞同：0
> 
> 时间：2012-07-09T03:00:19.000
> 
> 标签：jsf-2, primefaces, facelets, cdi

我正在使用 maven、jsf 2.0、java ee 6、jpa 和 glassfish。我有一个初始网页，询问您是否要登录或注册。如果他们说他们想登录，他们会被转发到 facelets/primefaces 3，它会显示一个带有用户名和密码文本框的登录页面。对于用户名文本字段，其值为

> value="#{authenticator.username}"

我得到一个

> “目标无法访问，标识符‘验证器’解析为空”

我正在使用 beans.xml。我遵循 CDI bean 的命名约定。我在 Authenticator 构造函数中插入了一条日志消息，它似乎永远不会被调用，因为我没有收到消息。

另一个奇怪的是，一旦在一个蓝月亮它工作，我得到如下的东西：

> 07/08/2012 00:27:56.140 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:27:56.171 信息 ...Authenticator - 获取 Authenticator 用户名
> 
> 2012 年 7 月 8 日 00:27:56.171 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:27:56.171 信息 ...验证器 - 获取验证器密码
> 
> 2012 年 7 月 8 日 00:27:56.171 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:27:56.171 信息 ...Authenticator - 获取 Authenticator 用户名
> 
> 2012 年 7 月 8 日 00:27:56.171 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:27:56.171 信息 ...验证器 - 获取验证器密码
> 
> 2012 年 7 月 8 日 00:28:05.843 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:28:05.843 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:28:05.843 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 07/08/2012 00:28:05.843 INFO ...Authenticator - 获取 Authenticator 用户名
> 
> 2012 年 7 月 8 日 00:28:05.843 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:28:05.906 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 07/08/2012 00:28:05.906 INFO ...验证器 - 获取验证器密码
> 
> 2012 年 7 月 8 日 00:28:26.000 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:28:26.000 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 2012 年 7 月 8 日 00:28:26.000 信息 ...Authenticator - 在 Authenticator 构造函数中
> 
> 07/08/2012 00:28:26.031 INFO ...Authenticator - 在 Authenticator 构造函数中 07/08/2012 00:28:26.031 INFO ...Authenticator - 获取 Authenticator 密码

当它工作时，我不明白为什么它会这么多次调用构造函数。

这是托管（cdi）bean：

```
package com.mlb.mybills.view.user;

import com.mlb.mybills.i18n.Messages;
import java.util.Locale;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ViewScoped;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.inject.Named;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@Named("authenticator")
@ViewScoped
public class Authenticator
{
    private static final Logger log = LoggerFactory.getLogger(Authenticator.class);

    private String username;
    private char[] password;

    public Authenticator()
    {
      log.info("in Authenticator constructor");
    }

    public String getUsername()
    {
      log.info("getting Authenticator username");
        return username;
    }

    public void setUsername(String username)
    {
      log.info("getting Authenticator username");
        this.username = username;
    }

    public char[] getPassword()
    {
      log.info("getting Authenticator password");
        return password;
    }

    public void setPassword(char[] password)
    {
        log.info("setting Authenticator password");
      this.password = password;
    }

public void setPassword(String password)
    {
        log.info("setting Authenticator password");
      this.password = password.toCharArray();
    }

   public String authenticate()
    {
      log.info("in Authenticator.authenticate");
        String result = null;
        ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
        HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();
        try
        {
            request.login(username, new String(password));
            //result = "/private/group.xhtml?faces-redirect=true";
         result = "/group.xhtml?faces-redirect=true";
        }
        catch (ServletException ex)
        {
            log.error("Failed to authenticate user.", ex);
            Locale locale = FacesContext.getCurrentInstance().getViewRoot().getLocale();
         FacesMessage facesMessage = new FacesMessage(FacesMessage.SEVERITY_ERROR, Messages.getString(
                    "Login.InvalidIdPasswordMessage", locale), null);
            FacesContext.getCurrentInstance().addMessage(null, facesMessage);
        }
      log.info("result=" + result);
        return result;
    }

    public String logout()
    {
        ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
        HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();
        try
        {
            request.logout();
        }
        catch (ServletException servletEx)
        {
            log.warn("Failed to logout the user", servletEx);
        }
        return "/Login.xhtml?faces-redirect=true";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:57:08.210

您遇到了一些问题，因为您混合了 CDI (@Named) 和 JSF (@ViewScoped) 注释。由于这场比赛，它可能被多次调用。您可以查看 Seam Faces、MyFaces CODI 或为 CDI 推出您自己的 ViewScoped 版本，或者放弃 CDI 并直接使用 JSF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:14:25.520

您正在混合 bean 管理 API。来自`@Named`CDI，但`@ViewScoped`来自 JSF。您需要使用其中一个，而不是在单个 backing bean 上同时使用。现在 bean 基本上由 CDI 管理，没有任何有效范围，因此每次`#{authenticator}`解析 EL 表达式时都会构造 bean。

要解决此问题，如果您打算坚持使用 CDI，请使用`@ConversationScoped`代替`@ViewScoped`：

```
@Named
@ConversationScoped 
```

或者，如果您打算坚持使用 JSF，请使用`@ManagedBean`代替`@Named`：

```
@ManagedBean
@ViewScoped 
```

CDI 方法的唯一缺点是您必须将`@Inject`a`Conversation`作为属性，然后自己开始和结束它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:51:24.520

尽管我不明白，但我为我找到了解决方案。我在以下链接中找到了它：[一个链接](http://mail-archives.apache.org/mod_mbox/myfaces-users/201111.mbox/%3CCAKcQ4qaW-+svfUdAQmUUeFtHXQ8=LoB9MnnC1V-UkneE7-wJ1w@mail.gmail.com%3E)！我不仅在 faces-config.xml 中添加了以下条目，而且还添加了 @RequestScoped 和 @Named

```
<managed-bean>
   <managed-bean-name>authenticator</managed-bean-name>
   <managed-bean-class>com.mlb.mybills.view.user.Authenticator</managed-bean-class>
   <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

有了这个，我不再得到目标无法到达的错误。

显然，我还纠正了 BalusC 指出的上述错误。谢谢大家。

# python - sqlite 真空与 django

> ID：11388632
> 
> 赞同：2
> 
> 时间：2012-07-09T03:00:54.033
> 
> 标签：python, django, sqlite, vacuum

在sqlite中插入和删除大量记录后，sqlite db文件的大小不断增长，有没有办法使用django清理表？

*   一些让 sqlite 自动清空的设置
*   或者手动编写自己的 django 命令来清理

更新：

我使用[sqlite 数据库浏览器](http://portableapps.com/apps/development/sqlite_database_browser_portable)执行以下 SQL：

```
vacuum [my table];
commit; 
```

效果很好，我只想以编程方式进行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T03:17:12.343

您可以按如下方式执行原始 sql：

```
from django.db import connection, transaction
cursor = connection.cursor()

# Data modifying operation - commit required
cursor.execute("vacuum my_table")
transaction.commit_unless_managed() 
```

不过，这很有趣[http://www.sqlite.org/lang_vacuum.html/pragma.html#pragma_auto_vacuum](http://www.sqlite.org/lang_vacuum.html/pragma.html#pragma_auto_vacuum)

也许我们可以将 vacumm 设置为自动，但看起来它可能会加剧碎片化。

```
cursor.execute("PRAGMA auto_vacuum=FULL") 
```

[http://www.sqlite.org/pragma.html#pragma_auto_vacuum](http://www.sqlite.org/pragma.html#pragma_auto_vacuum)

# apache-flex - 带有活动滚动条的禁用 Flex 数据网格

> ID：11388635
> 
> 赞同：0
> 
> 时间：2012-07-09T03:01:19.373
> 
> 标签：apache-flex

我在 flex 中有一个设置为禁用的数据网格。我已将其设置为禁用以向用户指示这是只读数据。这在大多数情况下都很好用，但由于某种原因，滚动条也会被禁用。

我的问题是我可以将数据网格设置为禁用并且仍然可以滚动，还是我只是想吃蛋糕并吃掉它？

更多信息：您可以使用滚轮滚动，但不能使用滚动条上的向上或向下箭头。滚动指示器也被隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:08:24.213

你可以尝试设置`editable=false`

# google-apps-script - 是否可以在收到未接电话时使用 Google Apps 脚本发送短信？

> ID：11388640
> 
> 赞同：2
> 
> 时间：2012-07-09T03:02:31.570
> 
> 标签：google-apps-script, voice

刚刚在[谷歌语音论坛上](http://productforums.google.com/d/topic/voice/OfN1_DN1l0o/discussion)发布了这个，但我想知道是否可以使用谷歌应用脚​​本出去检查我的谷歌语音收件箱是否有任何未读的未接来电，并在新来电时给自己发短信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-05T12:35:06.057

您可以使用 Google Apps 脚本发送短信/彩信。

*   假设你的谷歌语音号码是 1(555)999-1111，你的手机号码是 1(555)111-2222。从您的手机发送短信到您的 GV 号码。
*   打开你的gmail，你会发现短信。请注意，发件人地址`15559991111.15551112222.rAndomChars@txt.voice.google.com`的第一个数字是您的 GV 号码，第一个点后面的数字是您的手机号码，第二个点后面有 10 个随机数字/字母。
*   复制此电子邮件地址并将其用作您的 google Apps 脚本中的收件人地址。
*   如果您想向另一个手机号码发送短信，请让他们通过短信发送您的 GV 号码并保存该电子邮件地址。
*   如果您从另一个帐户运行脚本，则需要重复获取正确电子邮件地址的过程，因为随机字符会发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:09:03.073

Google Apps 脚本不为发送短信或检查 Google 语音提供本机支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T13:49:58.077

我不确定这将如何工作，因为我对脚本非常陌生，但是您尝试过使用 Gmail 吗？您的 Google Voice 设置可让您在错过任何电话或收到短信时接收电子邮件。

从理论上讲，您可以完全绕过 Google Apps 脚本，方法是为 Gmail 设置短信提醒，并创建一个过滤器，每当您收到来自 Google Voice 的有关未接电话的电子邮件时发送它们。

但如果您仍想通过 Google Apps 脚本，您可以修改[收件箱统计报告脚本](https://developers.google.com/apps-script/articles/gmail-stats)。

首先，您必须为短信启用电子邮件，然后向您的 Google Voice 号码发送短信，这将为您提供一个用于从 GV 向您的手机发送短信的电子邮件地址。然后，您可以修改该脚本以在特定时间间隔扫描您的收件箱以查找有关未接来电的电子邮件，如果它收到一封，它可以向从 GV 发送到您手机的电子邮件地址发送一条消息。

不过，这似乎需要做很多工作，所以就像我说的那样，使用 Gmail 的短信提醒可能更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T15:33:20.107

看来您可以发送短信，但前提是收件人首先“在他们自己的 Google 日历中对邀请启用短信通知” [https://gist.github.com/1658408](https://gist.github.com/1658408)

# java - Java，如何在列表上正确实现嵌套迭代器？

> ID：11388648
> 
> 赞同：0
> 
> 时间：2012-07-09T03:03:47.733
> 
> 标签：java, performance, list, nested

我有两个 java`List<String>`对象，我需要在第三个`List<String>`结果对象中添加前两个对象的所有可能组合。像：

```
List<String> list1 = getList1();
List<String> list2 = getList2();

List<String> result = new ArrayList<String>();

for(String value1 : list1) {
    for(String value2 : list2) {
        result.add(value1 + value2);
    }
} 
```

问题是当列表增长时，这个快速而肮脏的函数会以指数方式变慢：

`long combinations = list1.size() * list2.size()`

也许我做错了，是否有更好的方法或任何可以使用的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:05:28.080

你能通过调用 result.size() 而不是将大小相乘来得到你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:42:32.843

为了使其更快，您可以为结果提供初始容量，以便不扩展 ArrayList 的内部数组：

```
int capacity = list1.size() * list2.size();
List<String> result = new ArrayList<String>(capacity); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T07:13:46.497

稍微难一点但绝对更好的方法是扩展一个[不可修改的`AbstractCollection`(or `AbstractList`)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractCollection.html)和相关的迭代器（它将`List`根据需要在两个迭代器上进行迭代）。这样您就不需要 O(N*M) 存储组合列表。

# c# - 如何使用 Rally REST .NET 向用户故事添加附件

> ID：11388652
> 
> 赞同：2
> 
> 时间：2012-07-09T03:04:28.963
> 
> 标签：c#, .net, rest, rally

我们正在将 .NET Rally 代码从 SOAP 移植到 REST .NET API。到目前为止一切顺利，REST API 似乎更快并且更易于使用，因为每次工作产品自定义字段在 Rally 工作区中更改时都不会中断 WSDL。

不过，当我们尝试复制上传附件的功能时，我遇到了一件事。我们正在遵循与本文中概述的非常相似的程序：

[Rally SOAP API - 如何将附件添加到分层要求](https://stackoverflow.com/questions/10989084/rally-soap-api-how-do-i-add-an-attachment-to-a-hierarchical-requirement)

从而将图像读入 System.Drawing.Image。我们使用 ImageToByteArray 函数将图像转换为字节数组，然后将其分配给首先创建的 AttachmentContent。

然后，创建 Attachment，并将其连接到 AttachmentContent 和 HierarchicalRequirement。

所有的创作活动都很好。内容对象被创建得很好。然后创建名为“Image.png”的新附件并将其链接到故事。但是当我从 Rally 下载生成的附件时，Image.png 的字节数为零！我已经用不同的图像、JPEG、PNG 等进行了尝试，结果都相同。

下面是显示我们流程的代码摘录。我有什么明显的遗漏吗？提前致谢。

```
 // .... Read content into a System.Drawing.Image called imageObject ....

    // Convert Image to byte array
    byte[] imageBytes = ImageToByteArray(imageObject, System.Drawing.Imaging.ImageFormat.Png);
    var imageLength = imageBytes.Length;

    // AttachmentContent
    DynamicJsonObject attachmentContent = new DynamicJsonObject();
    attachmentContent["Content"] = imageBytes ;

    CreateResult cr = restApi.Create("AttachmentContent", myAttachmentContent);
    String contentRef = cr.Reference;
    Console.WriteLine("Created: " + contentRef);

    // Set up attachment
    DynamicJsonObject newAttachment = new DynamicJsonObject();
    newAttachment["Artifact"] = story;
    newAttachment["Content"] = attachmentContent;
    newAttachment["Name"] = "Image.png";
    newAttachment["ContentType"] = "image/png";
    newAttachment["Size"] = imageLength;
    newAttachment["User"] = user;

    // Create the attachment in Rally
    cr = restApi.Create("Attachment", newAttachment);

    String attachRef = cr.Reference;
    Console.WriteLine("Created: " + attachRef);

}

public static byte[] ImageToByteArray(Image image, System.Drawing.Imaging.ImageFormat format)
{
    using (MemoryStream ms = new MemoryStream())
    {
        image.Save(ms, format);

        // Convert Image to byte[]                
        byte[] imageBytes = ms.ToArray();
        return imageBytes;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:55:08.373

这个问题也让我困惑了一段时间——终于在大约一周前解决了。

两个观察：

1.  虽然 Rally 的 SOAP API 将在后台将字节数组序列化为 Base64 字符串，但 REST 不会为您执行此步骤，并且希望将 Base64 格式的字符串作为 AttachmentContent 对象的 Content 属性传递。
2.  您的示例中显示的 System.Drawing.Image.Length 不会提供 Rally 的 WSAPI 所期望的正确长度。在转换回常规字符串后，您需要传递 Base64 格式字符串的长度。这也与字节数组的长度相同。

我包括一个代码示例来说明：

```
// System Libraries
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing.Imaging;
using System.Drawing;
using System.IO;
using System.Web;

// Rally REST API Libraries
using Rally.RestApi;
using Rally.RestApi.Response;

namespace RestExample_CreateAttachment
{
    class Program
    {
        static void Main(string[] args)
        {
            // Set user parameters
            String userName = "user@company.com";
            String userPassword = "password";

            // Set Rally parameters
            String rallyURL = "https://rally1.rallydev.com";
            String rallyWSAPIVersion = "1.36";

            //Initialize the REST API
            RallyRestApi restApi;
            restApi = new RallyRestApi(userName,
                                       userPassword,
                                       rallyURL,
                                       rallyWSAPIVersion);

            // Create Request for User
            Request userRequest = new Request("user");
            userRequest.Fetch = new List<string>()
                {
                    "UserName",
                    "Subscription",
                    "DisplayName",
                };

            // Add a Query to the Request
            userRequest.Query = new Query("UserName",Query.Operator.Equals,userName);

            // Query Rally
            QueryResult queryUserResults = restApi.Query(userRequest);

            // Grab resulting User object and Ref
            DynamicJsonObject myUser = new DynamicJsonObject();
            myUser = queryUserResults.Results.First();
            String myUserRef = myUser["_ref"];

            //Set our Workspace and Project scopings
            String workspaceRef = "/workspace/12345678910";
            String projectRef = "/project/12345678911";
            bool projectScopingUp = false;
            bool projectScopingDown = true;

            // Find User Story that we want to add attachment to

            // Tee up Story Request
            Request storyRequest = new Request("hierarchicalrequirement");
            storyRequest.Workspace = workspaceRef;
            storyRequest.Project = projectRef;
            storyRequest.ProjectScopeDown = projectScopingDown;
            storyRequest.ProjectScopeUp = projectScopingUp;

            // Fields to Fetch
            storyRequest.Fetch = new List<string>()
                {
                    "Name",
                    "FormattedID"
                };

            // Add a query
            storyRequest.Query = new Query("FormattedID", Query.Operator.Equals, "US43");

            // Query Rally for the Story
            QueryResult queryResult = restApi.Query(storyRequest);

            // Pull reference off of Story fetch
            var storyObject = queryResult.Results.First();
            String storyReference = storyObject["_ref"];

            // Read In Image Content
            String imageFilePath = "C:\\Users\\username\\";
            String imageFileName = "image1.png";
            String fullImageFile = imageFilePath + imageFileName;
            Image myImage = Image.FromFile(fullImageFile);

            // Get length from Image.Length attribute - don't use this in REST though
            // REST expects the length of the image in number of bytes as converted to a byte array
            var imageFileLength = new FileInfo(fullImageFile).Length;
            Console.WriteLine("Image File Length from System.Drawing.Image: " + imageFileLength);

            // Convert Image to Base64 format
            string imageBase64String = ImageToBase64(myImage, System.Drawing.Imaging.ImageFormat.Png);           

            // Length calculated from Base64String converted back
            var imageNumberBytes = Convert.FromBase64String(imageBase64String).Length;

            // This differs from just the Length of the Base 64 String!
            Console.WriteLine("Image File Length from Convert.FromBase64String: " + imageNumberBytes);

            // DynamicJSONObject for AttachmentContent
            DynamicJsonObject myAttachmentContent = new DynamicJsonObject();
            myAttachmentContent["Content"] = imageBase64String;

            try
            {
                CreateResult myAttachmentContentCreateResult = restApi.Create("AttachmentContent", myAttachmentContent);
                String myAttachmentContentRef = myAttachmentContentCreateResult.Reference;
                Console.WriteLine("Created: " + myAttachmentContentRef);

                // DynamicJSONObject for Attachment Container
                DynamicJsonObject myAttachment = new DynamicJsonObject();
                myAttachment["Artifact"] = storyReference;
                myAttachment["Content"] = myAttachmentContentRef;
                myAttachment["Name"] = "AttachmentFromREST.png";
                myAttachment["Description"] = "Attachment Desc";
                myAttachment["ContentType"] = "image/png";
                myAttachment["Size"] = imageNumberBytes;
                myAttachment["User"] = myUserRef;

                CreateResult myAttachmentCreateResult = restApi.Create("Attachment", myAttachment);

                List<string> createErrors = myAttachmentContentCreateResult.Errors;
                for (int i = 0; i < createErrors.Count; i++)
                {
                    Console.WriteLine(createErrors[i]);
                }

                String myAttachmentRef = myAttachmentCreateResult.Reference;
                Console.WriteLine("Created: " + myAttachmentRef);

            }
            catch (Exception e)
            {
                Console.WriteLine("Unhandled exception occurred: " + e.StackTrace);
                Console.WriteLine(e.Message);
            }
        }

        // Converts image to Base 64 Encoded string
        public static string ImageToBase64(Image image, System.Drawing.Imaging.ImageFormat format)
        {
            using (MemoryStream ms = new MemoryStream())
            {
                image.Save(ms, format);
                // Convert Image to byte[]                
                byte[] imageBytes = ms.ToArray();

                // Convert byte[] to Base64 String
                string base64String = Convert.ToBase64String(imageBytes);

                return base64String;
            }
        }
    }
} 
```

# ruby-on-rails - 将 rails2 应用程序升级到哪个版本的 rails3

> ID：11388654
> 
> 赞同：0
> 
> 时间：2012-07-09T03:04:56.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想将应用程序从 Rails 2.3.14 升级到 Rails 3。我的问题是我应该选择哪个版本的 3？

我应该直接去最新的 3.2.2 吗？还是我应该先去3.0版本？

我已经查看了各种 railscasts 并使用了 rails upgrade gem，但大多数文档来自不久前 rails 3.0 是最新版本。

有什么理由不直接进入 3.2.2 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:09:36.060

如果可能的话，一定要使用最新的稳定版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:14:13.093

是的，没有理由退缩。我的大多数应用程序都在运行 3.2.1，这不是最新的，但非常稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T03:41:12.217

如果我是你，我会逐步更新，随时解决问题。这将使错误更容易找到，并且它会让你不会因为对所有破坏的事情感到沮丧而完全发疯。修复破碎的东西更容易（稍微更多）一口大小的碎片。

很可能，一大堆废话会破坏每一步。（Rails 3 基本上是 Merb 和 Rails 2 的混合体——[改变了很多东西](http://www.railsdispatch.com/posts/upgrading-a-rails-2-app-to-rails-3)。）修复所有新损坏的东西。Peepcode 做了一个[很好的截屏视频](http://peepcode.com/blog/2010/live-coding-rails-3-upgrade)以及你提到的 Railscasts。

然后，一旦您再次对您的应用程序感到满意，请升级到 3.1。让 Asset Pipeline 启动并运行，并可能将您的应用程序从 Prototype 转换为 jQuery，因为它是新的默认设置。修复创建的任何新错误。

一旦您的应用程序正常运行，请升级到 3.2，然后尝试在新的更新出现时将其更新到最新版本。（在 Rails 世界中说起来容易做起来难。）我推荐最新的稳定版本，因为有时，即使他们推出了重大更新，他们也会意识到他们做了一些愚蠢的事情并很快再次更新。Rails 核心团队并非每次都做对，但他们很快就会发现自己的错误并很好地修复它们。

祝你好运。:-)

# msbuild - 在 CoreCompile MSBuild 任务启动的 CSC.exe 上设置处理器关联

> ID：11388655
> 
> 赞同：2
> 
> 时间：2012-07-09T03:04:57.513
> 
> 标签：msbuild, msbuild-task, msbuild-4.0, csc

我想知道是否有简单的方法可以确保：编译 C# 项目时，`Csc.exe`launch 继承父处理器关联设置；或者我可以提供这种方式。

我一直在尝试通过`bat`从 VS.NET cmd 提示符启动一个文件来完成此操作：

```
start /affinity 01 custombuild.cmd 
```

在我的里面我`custombuild.cmd`有：

```
@echo off
msbuild Libraries.sln /t:rebuild /p:Configuration=Release;platform=x64 /m:1
:END 
```

生成的命令行调用`Csc.exe`如下所示：

`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Csc.exe ...`（为简洁起见，其余部分省略。）

我想`Csc.exe`继承处理器亲和力，或者一种能够覆盖`Csc.exe`调用生成方式的简单方法，使其变为：

`start /affinity 01 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Csc.exe ...`（为简洁起见，其余部分省略。）

我还注意到 CoreCompile 目标是在 Microsoft.CSharp.targets 中定义的，我是否应该考虑覆盖 MSBuildToolsPath 变量以便我可以潜入我自己的版本。这感觉相当hacky。任何帮助将非常感激。

**状态更新：** 我发现由 csc 任务启动的 csc.exe 进程实际上是在 Task 类成员的 ExecuteTool 方法中准备的，并且我创建了一个自定义任务 CpuAffineCscTask，它派生自 Csc 并覆盖了 ExecuteTool 方法。我的目标是在挂起状态下使用对 CreateProcess 的 pinvoke 调用启动 csc.exe，然后设置关联性，然后恢复线程。我还使用反射来正确设置各种变量的状态等。现在我试图覆盖在 MicrosoftCSharp.targets 文件中定义的 CoreCompile 目标，但是当我的目标运行时出现以下运行时错误。**周围有这方面的已知例子吗？**即使整个 cmd 在 msbuild 诊断输出中正确打印出来。诊断输出如下供您考虑。

> 任务 "MSBuild.Tasks.CpuAffineCscTask" (TaskId:14) C:\Windows\Microsoft.NET\Framework\v4.0.30319\Csc.exe /noconfig /unsafe+ /nowarn:1701,1702 /nostdlib+ /errorreport:prompt /warn: 4 /doc:..\Bin\Release\Ugp.Igt.Core.XML /define:TRACE /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib。 dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Core.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\ Microsoft\Framework.NETFramework\v4.0\WindowsBase.dll" /debug:pdbonly /filealign:512 /keyfile:..\StrongNameKeyFile.snk /optimize+ /out:obj\Release\Ugp.Igt.Core.dll /target:库 ..\DevelopmentKitVersionInfo.cs AnonymousDisposable.cs ByteArrayExtensionMethods.cs TypeMustImplementMethodAttribute.cs WeakEvent。cs "C:\Users\bhatiah\AppData\Local\Temp.NETFramework,Version=v4.0.AssemblyAttributes.cs" (TaskId:14) **E:\source\Core\Microsoft.CSharp.targets(217,3)：错误 MSB6001：“Csc.exe”的命令行开关无效。值不能为空。E:\source\Core\Microsoft.CSharp.targets(217,3)：错误 MSB6001：参数名称：SafeHandle 不能为空。** 完成执行任务“Igt.MSBuild.Tasks.CpuAffineCscTask”——失败。（TaskId：14）在项目“Igt.Core.csproj”中完成构建目标“CoreCompile” - FAILED。：（TargetId：37）目标“_CheckForCompileOutputs：（TargetId：38）”在文件“c：\ Windows \ Microsoft. NET\Framework\v4.0.30319\Microsoft.Common.targets” 来自项目“E:\source\Core\Igt.Core\Igt.Core.csproj”（目标“_CleanGetCurrentAndPriorFileWrites”取决于它）：

任何帮助将不胜感激。

PS：我正在重定向所有三个 IO 流，因为我使用的是 CreateProcess 和管道，但是创建后我使用 Process.getProcessById .net 方法来获取对进程对象的引用并附加处理程序。

* * *

耐寒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:14:51.003

通过覆盖executeTool方法获取命令字符串，将其添加到start /affinity 01 将其写入与csproj文件相同的文件夹中的批处理文件，使用shellexecute方法运行它。（可能需要确保所有输出目录都存在）。

# virtualbox - 从主机端口 80 到 VirtualBox 端口 80 的端口转发不起作用

> ID：11388657
> 
> 赞同：22
> 
> 时间：2012-07-09T03:05:38.590
> 
> 标签：virtualbox, portforwarding

我已阅读 VirtualBox 端口转发指南、本站点和其他站点中的类似问题，但找不到解决方案。

UFW 在 Guest OS (Ubuntu) 上启用，端口 80 和 22 已打开。我可以从主机 ssh 到 ubuntu，并且可以从主机浏览器访问 ubuntu 站点。

在 Guest 上，我设置了 Nat 和 hostonly (vboxnet3) 适配器。还开了路由器80端口（192.168.1.90）Guest ip是192.168.70.10

所以在访客设置> Nat >端口转发中，我输入了：

TCP 主机 IP：192.168.1.90 主机端口：80 访客 IP：192.168.70.10 访客端口：80

但是，此设置不起作用。如果您将我引向正确的道路，我将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-11-04T07:14:13.490

正如威廉所提到的，除非它们以 root 身份运行，否则 linux/unix 操作系统不会让进程侦听 < 1024 的端口。您可以以 root 身份运行 VirtualBox，尽管我已经阅读了关于这样做的可怕警告。这可能是非常不安全的。

相反，在主机系统上设置 Apache2 以侦听端口 80（它应该已经设置好了），但不是在主机上为网站提供服务，而是让它代理流量到某个更高的端口 - 比如 8080 - on主人。

然后，让 VirtualBox 将该更高端口转发到来宾操作系统端口 80。

Apache 设置将是这样的：

1.  安装 HTTP 代理模块

    `a2enmod proxy_http`

2.  确保里面`/etc/apache2/ports.conf`有`Listen 80`指令

3.  添加另一个站点`/etc/apache2/sites-available`或修改默认站点（或只是将其添加`ports.conf`）

    ```
    <虚拟主机 *:80>
        ProxyPreserveHost 开启
        代理请求关闭
        ProxyPass / http://localhost:8080/
        ProxyPassReverse / http://localhost:8080/
    </虚拟主机>

    ```

4.  弹跳阿帕奇

    `service apache2 restart`

VirtualBox 设置为`host port: 8080, guest port: 80`.

流量会去：

```
client --> host:80 --> Apache --> host:8080 ---> vbox NAT ----> guest:80 
```

这类似于 William 的 ssh 隧道，但每次重新启动主机时都不需要手动干预（重新输入密码）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T02:10:54.553

如果您不习惯以 root 用户身份运行 VirtualBox，这是另一种可行的方法。您可以使用 SSH 设置从主机端口 80 到某个非限制端口（在下面的示例中，我使用端口 8080）的端口转发，然后将其转发到访客端口 80。复杂，但它有效。

1.  从主机端口 8080 转发到访客端口 80。通过将浏览器指向主机上的端口 8080，确保其正常运行。
2.  确保 sshd 正在您的主机上运行。在 Mac OS X 中，转到`System Preferences -> Internet & Wireless -> Sharing`并确保`Remote Login`已选中。
3.  在您的主机上成为 root

    ```
    $ sudo su - 
    ```

4.  使用 SSH 将主机端口 80 转发到主机端口 8080（绑定地址`\*`使端口在所有接口上都可用）。

    ```
    # ssh yourusername@localhost -L \*:80::8080 
    ```

请注意，它会要求您使用您用于用户名的任何凭据登录，因此它很可能会询问您的密码，当您成功时，实际登录。

您现在应该能够访问主机上的端口 80，并看到与访问主机上的端口 8080（也就是客户操作系统上的端口 80）相同的服务。

如果您不希望网络上的其他人能够访问该计算机上的端口 80，但仍希望能够从主机系统上的浏览器访问它，请将端口绑定到`localhost`：

```
# ssh yourusername@localhost -L localhost:80::8080 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-24T02:02:46.817

根据[http://www.virtualbox.org/manual/ch06.html#natforward](http://www.virtualbox.org/manual/ch06.html#natforward)

> 转发主机端口 < 1024 不可能：
> 
> 在基于 Unix 的主机（例如 Linux、Solaris、Mac OS X）上，无法从非 root 运行的应用程序绑定到低于 1024 的端口。因此，如果您尝试配置这样的端口转发，VM 将拒绝启动。

可以以 root 身份运行 VirtualBox，这将允许您转发主机端口 < 1024，因此如果您坚持使用 VirtualBox 执行此操作，您可以成为 root 并以这种方式执行 VirtualBox：

```
$ sudo su -
# VirtualBox 
```

# jquery - 克隆输入类型文件并设置值

> ID：11388658
> 
> 赞同：1
> 
> 时间：2012-07-09T03:05:39.747
> 
> 标签：jquery, html, internet-explorer, file-upload, input

我知道出于安全原因无法设置输入 type="file" 的值...

我的问题是：

我需要设置输入 type="file" 的样式，所以我所做的是有一个按钮并隐藏文件输入。喜欢：

```
<a href="#" onclick="$('input[name=&quot;photo1&quot;]').click(); return false;" id="photo1-link"></a>
<input type="file" name="photo1" class="fileInput jqtranformdone validate[required]" id="photo1" /> 
```

这些在所有浏览器中都很好用，除了 IE，它在通过 ajax 提交时给我一个访问被拒绝错误。

我正在使用 ajaxSubmit jquery 插件 (malsup.com/jquery/form/)

因此，在阅读了一段时间后，我尝试这样做：

```
var photo1Val = $('#photo1').val();
var clone1 = $('#photo1').clone().val(photo1Val);
$('#photo1').remove();

clone1.appendTo('form');
console.log(photo1Val) //prints the right value C:/fakepath/blablabla.jpg
$('form').ajaxSubmit(options); 
```

问题是在此之后 $('#photo1') 的值是空的......有什么想法可以解决这个问题吗？

谢谢

# java - 小程序可以与 java web start 一起使用吗？

> ID：11388661
> 
> 赞同：0
> 
> 时间：2012-07-09T03:06:36.447
> 
> 标签：java, netbeans, applet, java-web-start, japplet

我想知道Java小程序是否也可以使用Java web start，我一直在我一直在从事的项目中这样做，我担心这可能会导致一些问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:43:00.213

混合方法提供了更大的灵活性、更容易的调试和清晰的度量，但这不是必需的。但是是的，Applet 也可以用作 Java Web Start 应用程序。

（由安德鲁汤普森和垃圾神回答）

# android - 关于 WPF ScrollViewer 使其像 Android 一样平滑滚动的任何想法？

> ID：11388664
> 
> 赞同：0
> 
> 时间：2012-07-09T03:07:09.477
> 
> 标签：android, wpf, scroll, scrollviewer, smooth

我在 xaml 中尝试了一个简单的 ScrollViewer，如下所示：

```
<ScrollViewer Height="{Binding RelativeSource={RelativeSource FindAncestor, 
     AncestorType={x:Type StackPanel}}, Path=Height}" ScrollViewer.VerticalScrollBarVisibility="Visible" CanContentScroll="True">
         <DockPanel>
             <StackPanel Name="StackPanel1" OverridesDefaultStyle="False" Width="230" Height="803"
                 VerticalAlignment="Top" HorizontalAlignment="Left" Margin="23,1,0,0">
             ....Something here
             ....Something here
             ....Something here
             </StackPanel>
         </DockPanel>
</ScrollViewer> 
```

但我的问题是..我们是否有可能像使用 WPF 的任何 android 或 iphone 一样创建任何平滑滚动？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:11:42.767

您需要自己处理 MouseDown、MouseUp、MouseMove 事件，或者我想自己处理适当的触摸事件。

顺便说一句，你为什么使用 relativeSource 来获取父级的高度。你不能只设置滚动查看器来填充父级吗？

# html - CSS - Position:absolute creats float:left 场景..我该如何解决？

> ID：11388667
> 
> 赞同：0
> 
> 时间：2012-07-09T03:07:31.833
> 
> 标签：html, css

我有这种情况，我试图用图层做两个画布，所以我必须使用`position`等等..但是..它下面的东西......隐藏在画布下面。我怎么做才能让 DIV 中的下一个出现在画布的底部？

这是 JSfiddle：http: [//jsfiddle.net/qtjua/](http://jsfiddle.net/qtjua/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:31:32.747

只需将画布的“宽度”和“高度”设置为“#screen”。

```
#screen {
 position: relative;
 border: 4px solid #333;
 /* New stuff */
 width: 512px
 height: 352px;
} 
```

这是 jsFiddle：http: [//jsfiddle.net/THkmG/3/](http://jsfiddle.net/THkmG/3/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T11:30:51.447

是的，你的“Hello World”。消息落后了，因为你`<div id="screen">`有`position:relative;`并且你的 convas 高度是 352px，所以你可以在你的消息 div 中使用 252px 的边距顶部。这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>stackoverflow</title>
<style type="text/css">

#screen {position:relative;border:4px solid #333;}
#canvas {
            background:#ABABAB;
            margin:0;padding:0;
            width:512px;
            height:352px;
            }
</style>

</head>

<body>
<div id="screen">
 <canvas id="canvas" width="512" height="352" 
   style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>

 <canvas id="drawing" width="512" height="352" 
   style="position: absolute; left: 0; top: 0; z-index: 1;"></canvas>

</div>
<div style="float:left; margin: 352px 0 0;">Hello World.</div>
</body>
</html> 
```

# javascript - 当将元素拖动到另一个容器并捕捉到另一个容器时，如何强制 jquery 居中？

> ID：11388679
> 
> 赞同：4
> 
> 时间：2012-07-09T03:09:35.777
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-draggable

我想要一些方形的可拖动对象（在这种情况下只是`<td>`带有数字的框）能够捕捉到一些空的表格单元格并捕捉到这些单元格的中心（空的 td 框），而不是那些（外）边缘细胞，这似乎是默认情况下所做的。

这是我的脚本：

```
<script type="text/javascript">
 $(document).ready(function () {
     $(".inputs div").draggable( {
       snap: ".spaces"
     });    
 });    
</script> 
```

编辑：这是整个文件

```
 <!DOCTYPE html>
  <head>
   <title>Draggable</title>
   <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
   <script type="text/javascript" src="jquery-ui-1.8.21.custom.min.js"></script>
   <script type="text/javascript" src="jquery.ui.touch-punch.min.js"></script>
   <style>
    .block {
        z-index:9999;
        cursor:move;
    }
    li {
        list-style:none;
    }
    tr {
        border: 2px solid black;
    }
    table {
        border: 2px solid black;
    }
    .inputs div {
        float:left;
        background-color:#FFFFFF;
        color:#004E66;
        font-size:x-large;
        margin:2px;
        padding:20px;
        border:1px solid black;
    }
    .spaces td {
        background-color:#666666;
        margin:2px;
        padding:36px;
        border:2px solid black;
    }
 </style>
</head>

<body>
<form id="form1">
  <div class="inputs">
    <div>1</div>
    <div>2</div>
    <div>3</div>    
    <div>4</div>
    <div>5</div>
    <div>6</div>
  </div>
  <br/>
  <table class="spaces">
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
  </table>
</form>
<!-- here we are telling jquery to make each element inside of class 'inputs' draggable -->
<script type="text/javascript">
   $(document).ready(function () {
      $(".inputs div").draggable( {
         snap: ".spaces"
      }).center();  
  });   
</script> 
```

这是一个粗略的基于文本的说明，说明正在发生的事情

```
-----+----------+
XXXXXXXXXXXX X|
     | |
     | 是 x|
     | X|
-----+-------+X|
     | X|

```

*   如果上面的框是最上面 tr 行右上角的 td 单元格
*   然后 X 是元素当前粘贴的位置（显然它不是那么大，我只是显示它粘贴的地方......实际上我删除了一些 X 以显示它在达到一定的接近度后如何捕捉到角落对它...）
*   基本上这个模型表明只有表格的外部边缘对于可拖动元素具有“重力”。我真正想要它做的是咬入 td 细胞，**排斥**所有边缘，而不是吸引外部边缘。
*   Y 是拖动元素所需的对齐位置。
*   最后，出于演示的原因，我希望元素通过某种过渡而不是突然的跳跃来卡入到位......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T19:51:50.970

我相信这就是你想要的。

如果您愿意，您显然可以更改定位，它更适合您的需求。

演示在这里：[演示](http://jsfiddle.net/jeschafe/JTKBR/)

```
$(document).ready(function () {

$(".inputs div").draggable( {
        opacity: .4,
        create: function(){$(this).data('position',$(this).position())},
        cursorAt:{left:15},
        cursor:'move',
        start:function(){$(this).stop(true,true)}
   });

     $('.spaces').find('td').droppable({
         drop:function(event, ui){
             snapToMiddle(ui.draggable,$(this));
         }
     });

 }); 

function snapToMiddle(dragger, target){
    var topMove = target.position().top - dragger.data('position').top + (target.outerHeight(true) - dragger.outerHeight(true)) / 2;
    var leftMove= target.position().left - dragger.data('position').left + (target.outerWidth(true) - dragger.outerWidth(true)) / 2;
    dragger.animate({top:topMove,left:leftMove},{duration:600,easing:'easeOutBack'});
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-25T15:29:08.347

关于 snapToMiddle 函数的一个注释：

为了让它对我正常工作，我不得不将其更改为 >

```
function snapToMiddle(dragger, target){
    var offset = target.offset();
    var topMove = (target.outerHeight(true) - dragger.outerHeight(true)) / 2;
    var leftMove= (target.outerWidth(true) - dragger.outerWidth(true)) / 2;
    dragger.offset({ top: topMove + offset.top, left: leftMove + offset.left })
} 
```

另外，我创建了一个将拖动器与滴管相关联的数组，并且在窗口调整大小时，我确保我的所有滴管都不会偏离：

```
$( window ).resize(function() {
    for( i = 0 ; i < assc.length - 1 ; i++ )
    {
        var drp = assc[i].drop;
        var drg = assc[i].drag;
        snapToMiddle(drg,drp);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T06:08:14.847

[http://jsfiddle.net/vtdhV/](http://jsfiddle.net/vtdhV/)

我创建了一个可以解决您的问题的小提琴......有点（如果我理解正确的话）。

红色的 div 在`td`s 中居中，您可以捕捉到它们。只需删除边框，它似乎会捕捉到 td 的中心。的性质`.draggable`将导致可拖动对象捕捉到任何边缘而不是同时捕捉所有边缘。

如果这还不够，您可能必须实现一个调用处理程序，`.stop`以便根据您的期望调整元素的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T20:09:20.953

您需要指定与拖动元素大小相同的捕捉目标。如果您的可拖动对象始终大小相同，这没什么大不了的。只需在您的单元格中添加一个空的、绝对定位的 div，并设置您的 CSS，使其大小和居中正确。然后，将您的`snap`选择器设置为该 div。要仅捕捉到捕捉目标的内部，请将您的设置`snapMode`为`"inner"`.

```
$(".inputs div").draggable({
    snap: ".spaces td div",
    snapMode: "inner"
}); 
```

但是，如果您的可拖动元素的大小可能不同，则每次开始拖动元素时都需要调整放置目标的大小并使其居中。在可拖动的 mousedown 上执行此操作（使用`mousedown`因为`dragstart`为时已晚且不起作用）：

```
$(".inputs div").draggable({
    snap: ".spaces td div",
    snapMode: "inner",
}).mousedown(function(){
    var targets = $(".spaces td div");
    targets.height(this.offsetHeight);
    targets.width(this.offsetWidth);
    targets.each(function(){
        $(this).position({ of: this.parentNode });
    });
}); 
```

[http://jsfiddle.net/gilly3/mPr3A/](http://jsfiddle.net/gilly3/mPr3A/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T08:45:16.553

在这些 td 中添加一个 div 并通过为 td 和新添加的 div 提供固定的宽度和高度来将其居中。然后将可拖动对象扩展到这些 div。

```
$(document).ready(function () {
    $('<div></div>').appendTo('.spaces td');
    $(".inputs div").draggable({
        snap: ".spaces td div",
        snapMode:'inner'
    });  
}); 
```

tds 和 divs 的 css 也将如下所示。

```
.block {
    z-index:9999;
    cursor:move;
}

.productCode {

}

li {
    list-style:none;
}
tr {
    border: 2px solid black;
}
table {
    border: 2px solid black;
}

.inputs div {
    float:left;
    background-color:#FFFFFF;
    color:#004E66;
    font-size:x-large;
    margin:2px;
    padding:20px;
    border:1px solid black;
}

.spaces td {
    background-color:#666666;
    width:80px;
    height:80px;            
    border:2px solid black;
}

.spaces td div {
    margin:0 auto;
    width:50px;
    height:70px;
} 
```

小提琴演示 - [http://jsfiddle.net/nsjithin/u25Bs/1/](http://jsfiddle.net/nsjithin/u25Bs/1/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-11T06:00:26.977

如果我的问题正确，请将您当前的脚本替换为：

```
$(document).ready(function () {

    // create a bunch of invisible divs
    var divs = $('<div></div><div></div><div></div><div></div>');

    // make them 2/2 and add them to the existing tds
    divs.css({ width:'50%', float:'left' }).appendTo('.spaces td');

    // snap to everything
    $(".inputs div").draggable({snap: ".spaces td, .spaces td div" }).center(); 

}); 
```

如果我不只是说，我会解决它。

# java - opencv/javacv：如何迭代轮廓以进行形状识别？

> ID：11388683
> 
> 赞同：9
> 
> 时间：2012-07-09T03:10:12.800
> 
> 标签：java, image-processing, opencv, javacv

我正在使用 JavaCV 开发一个形状识别项目，并且我找到了一些 OpenCV 代码来识别特定图像中的 U 形状。我试图将它转换为 JavaCV，但它没有给出相同的输出。你能帮我把这个 OpenCV 代码转换成 JavaCV 吗？

这是 OpenCV 代码：

```
import cv2
import numpy as np

img = cv2.imread('sofud.jpg')
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
ret,thresh = cv2.threshold(gray,127,255,1)
contours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)

for cnt in contours:
    x,y,w,h = cv2.boundingRect(cnt)
    if 10 < w/float(h) or w/float(h) < 0.1:
        cv2.rectangle(img,(x,y),(x+w,y+h),(0,0,255),2)

cv2.imshow('res',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

这是预期的输出

![在此处输入图像描述](../Images/68033aaa90ae03e77d8e68a03bc5e19e.png)

这是转换后的代码：

```
import com.googlecode.javacpp.Loader;
import com.googlecode.javacv.CanvasFrame;
import static com.googlecode.javacpp.Loader.*;
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_highgui.*;
import java.io.File;
import javax.swing.JFileChooser;

public class TestBeam {
    public static void main(String[] args) {
        CvMemStorage storage=CvMemStorage.create();
        CvSeq squares = new CvContour();
        squares = cvCreateSeq(0, sizeof(CvContour.class), sizeof(CvSeq.class), storage);
        JFileChooser f=new JFileChooser();
        int result=f.showOpenDialog(f);//show dialog box to choose files
            File myfile=null;
            String path="";
        if(result==0){
            myfile=f.getSelectedFile();//selected file taken to myfile
            path=myfile.getAbsolutePath();//get the path of the file
        }
        IplImage src = cvLoadImage(path);//hear path is actual path to image
        IplImage grayImage    = IplImage.create(src.width(), src.height(), IPL_DEPTH_8U, 1);
        cvCvtColor(src, grayImage, CV_RGB2GRAY);
        cvThreshold(grayImage, grayImage, 127, 255, CV_THRESH_BINARY);
        CvSeq cvSeq=new CvSeq();
        CvMemStorage memory=CvMemStorage.create();
        cvFindContours(grayImage, memory, cvSeq, Loader.sizeof(CvContour.class), CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);
        System.out.println(cvSeq.total());
        for (int i = 0; i < cvSeq.total(); i++) {
            CvRect rect=cvBoundingRect(cvSeq, i);
            int x=rect.x(),y=rect.y(),h=rect.height(),w=rect.width();
            if (10 < (w/h) || (w/h) < 0.1){
                cvRectangle(src, cvPoint(x, y), cvPoint(x+w, y+h), CvScalar.RED, 1, CV_AA, 0);
                //cvSeqPush(squares, rect);
            }
        }
        CanvasFrame cnvs=new CanvasFrame("Beam");
        cnvs.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
        cnvs.showImage(src);
        //cvShowImage("Final ", src);

    }
} 
```

这是我得到的输出。请问有人可以帮我解决这个问题吗？

![在此处输入图像描述](../Images/a4f83152b05eb8c43460f76fb26e10c5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:15:06.640

编辑：这是最有趣的发现-我认为您没有正确地遍历轮廓-您应该执行以下操作：

```
CvRect rect = cvBoundingRect(cvGetSeqElem(cvSeq, i),0); //python default? 
```

或者：

```
// ... 
CvSeq contours = new CvSeq();
CvSeq ptr = new CvSeq();
CvRect rect = null;
// ...
cvFindContours(..., contours, ...);

for (ptr = contours; ptr != null; ptr = ptr.h_next()) {
    rect =  cvBoundingRect(ptr, 0);
    // ... Draw the box if meets criteria
} 
```

首先，我认为 pst 关于比率的计算是正确的 - 你必须将宽度转换为浮动。

其次，我看到当你在 python 中制作灰色图像时，在你使用`COLOR_BGR2GRAY`的 java 中`CV_RGB2GRAY`，这可能会导致完全不同的灰色图像。我会在这两个程序上添加一些调试步骤来保存临时灰度图像并将它们比较为也打印输出的值`x,y,w`和`h`时间`(10 < (w/h) || (w/h) < 0.1)`为真。

另一件事是，在`CV_RETR_CCOMP`用于获取轮廓的 java 解决方案中，以及`CV_RETR_LIST`根据文档使用的 python 解决方案中：

> CV_RETR_LIST 检索所有轮廓而不建立任何层次关系 CV_RETR_CCOMP 检索所有轮廓并将它们组织成一个两级层次结构：顶层是组件的外部边界，第二层是孔的边界。如果在连接组件的孔内有另一个轮廓，它仍然会放在顶层

所以首先我会仔细检查两个程序中的所有 cv 参数是否相同，然后我会添加调试步骤以查看中间变量是否包含相同的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T03:13:12.267

检查您的类型促销，例如：

```
if (10 < (w/h) || (w/h) < 0.1){ 
```

..高度怀疑。要获得*浮点*除法，一个（或两个）操作数必须至少是 a （对于双除法`float`同样是 a ）。`double`否则，就像在这种情况下，它是一个整数除法。（请注意，*原始*代码也有提升`float`。）

例如：

```
 float ratio = (float)w/h; // (float / int) => (float / float) -> float
 if (10 < ratio || ratio < 0.1 ) { 
```

（虽然我不确定这是否是这里*的*问题。）

快乐编码！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T12:44:04.630

这段代码对我有用，我只是把**cvSeq=cvSeq.h_next();** 加入程序并删除 for 循环添加 while 循环 for thet。

```
 package Beam;
    import com.googlecode.javacpp.Loader;
    import com.googlecode.javacv.CanvasFrame;
    import static com.googlecode.javacpp.Loader.*;
    import static com.googlecode.javacv.cpp.opencv_core.*;
    import static com.googlecode.javacv.cpp.opencv_imgproc.*;
    import static com.googlecode.javacv.cpp.opencv_highgui.*;
    import java.io.File;
    import javax.swing.JFileChooser;

    public class TestBeam2 {
        public static void main(String[] args) {
            JFileChooser f=new JFileChooser();
            int result=f.showOpenDialog(f);//show dialog box to choose files
                File myfile=null;
                String path="";
            if(result==0){
                myfile=f.getSelectedFile();//selected file taken to myfile
                path=myfile.getAbsolutePath();//get the path of the file
            }
            IplImage src = cvLoadImage(path);//hear path is actual path to image
            IplImage grayImage    = IplImage.create(src.width(), src.height(), IPL_DEPTH_8U, 1);
            cvCvtColor(src, grayImage, CV_RGB2GRAY);
            cvThreshold(grayImage, grayImage, 127, 255, CV_THRESH_BINARY);
            CvSeq cvSeq=new CvSeq();
            CvMemStorage memory=CvMemStorage.create();
            cvFindContours(grayImage, memory, cvSeq, Loader.sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            while (cvSeq != null && !cvSeq.isNull()) {
                CvRect rect=cvBoundingRect(cvSeq, 0);
                int x=rect.x(),y=rect.y(),h=rect.height(),w=rect.width();
                if (10 < w/h || w/h < 0.1){
                    cvRectangle(src, cvPoint(x, y), cvPoint(x+w, y+h), CvScalar.RED, 1, CV_AA, 0);
                }
                cvSeq=cvSeq.h_next();
            }
            CanvasFrame cnvs=new CanvasFrame("Beam");
            cnvs.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
            cnvs.showImage(src);
            //cvShowImage("Final ", src);
        }
    } 
```

# android - 编写 Android Button 以更新 EditText 视图

> ID：11388684
> 
> 赞同：0
> 
> 时间：2012-07-09T03:11:20.917
> 
> 标签：android, button, random, numbers, android-edittext

好的，我在 android 中有一个按钮，我试图用它来更新 8 个具有不同随机数的 EditText 视图。一切正常，直到我点击按钮。根据调试器，我似乎缺少一个资源，但我不确定是什么。我尝试了几种不同的实现按钮的方法。这是我在看了几个帖子后得到的。

```
import java.util.Random;

import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MyCharNewChar extends MyCharActivity {

private OnClickListener randomButtonListener = new OnClickListener(){
    public void onClick(View v) {
        //Button creates a set of random numbers and updates the values
        //of the EditText views.

        Random rand = new Random();
        int STR = 1 + rand.nextInt(12);
        int AGI = 1 + rand.nextInt(12);
        int DEX = 1 + rand.nextInt(12);
        int WIS = 1 + rand.nextInt(12);
        int INT = 1 + rand.nextInt(12);
        int CON = 1 + rand.nextInt(12);
        int HP = 1 + rand.nextInt(20);
        int AC = 1 + rand.nextInt(6);

        EditText str = (EditText) findViewById(R.id.str);
        str.setText(STR);
        EditText agi = (EditText) findViewById(R.id.agi);
        agi.setText(AGI);
        EditText dex = (EditText) findViewById(R.id.dex);
        dex.setText(DEX);
        EditText wis = (EditText) findViewById(R.id.wis);
        wis.setText(WIS);
        EditText intel = (EditText) findViewById(R.id.intel);
        intel.setText(INT);
        EditText con = (EditText) findViewById(R.id.con);
        con.setText(CON);
        EditText hp = (EditText) findViewById(R.id.baseHP);
        hp.setText(HP);
        EditText ac = (EditText) findViewById(R.id.baseAC);
        ac.setText(AC);
        }
    };

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newchar);
    Button randomButton = (Button) findViewById(R.id.randomButton);
    randomButton.setOnClickListener(randomButtonListener);
}

} 
```

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearlayoutNew1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/background" >
<TextView 
    android:id="@+id/newCharLabel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/new_character_screen"
    android:textSize="24dp"
    android:textColor="@color/splash"
    android:textStyle="bold"
    android:gravity="center"/>
<TextView
    android:id="@+id/nameLabel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/nameLabel"
    android:textSize="18dp"
    android:textColor="@color/splash"/>
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textPersonName" >
    <requestFocus />
</EditText>
<TableLayout
    android:id="@+id/statsLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="5dp">
    <TableRow
        android:id="@+id/tableRow01"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5dp">
        <TextView
            android:id="@+id/strLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/strLabel"
            android:textSize="18dp"
            android:textColor="@color/splash"/>

        <EditText
            android:id="@+id/str"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="3"
            android:inputType="number" />
        <TextView
            android:id="@+id/agiLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/agiLabel"
            android:textSize="18dp"
            android:textColor="@color/splash"/>
        <EditText
            android:id="@+id/agi"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="3"
            android:inputType="number"/>
        <TextView
            android:id="@+id/dexLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/dexLabel"
            android:textSize="18dp"
            android:textColor="@color/splash"/>
        <EditText
            android:id="@+id/dex"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="3"
            android:inputType="number"/>
    </TableRow>
    <TableRow
        android:id="@+id/tableRow02"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5dp">
        <TextView 
            android:id="@+id/intLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/intLabel"
            android:textSize="18dp"
            android:textColor="@color/splash"/>
        <EditText
            android:id="@+id/intel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="3"
            android:inputType="number"/>
        <TextView 
            android:id="@+id/wisLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/wisLabel"
            android:textSize="18dp"
            android:textColor="@color/splash"/>
        <EditText
            android:id="@+id/wis"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="3"
            android:inputType="number"/>
        <TextView
            android:id="@+id/conLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/conLabel"
            android:textSize="18dp"
            android:textColor="@color/splash"/>
        <EditText
            android:id="@+id/con"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="3"
            android:inputType="number"/>
    </TableRow>
</TableLayout>
    <LinearLayout
        android:id="@+id/linearlayoutNew02"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:gravity="center">
        <TextView
            android:id="@+id/baseHPLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/hpLabel"
            android:textSize="18dp"
            android:textColor="@color/splash"/>
        <EditText 
            android:id="@+id/baseHP"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="3"
            android:inputType="number"/>
        <TextView
            android:id="@+id/baseACLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/acLabel"
            android:textSize="18dp"
            android:textColor="@color/splash"/>
        <EditText
            android:id="@+id/baseAC"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="3"
            android:inputType="number"/>
    </LinearLayout>
    <LinearLayout
        android:id="@+id/linearlayoutNew03"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

    <Button
        android:id="@+id/randomButton"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/randomButton"
        android:textSize="16dp"
        android:clickable="true"/>

    </LinearLayout>
</LinearLayout> 
```

我还尝试在 xml 中设置 onClick 以设置特定的 onClick 方法。仍然是同样的错误，所以我必须在其他地方遇到问题。任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:16:42.353

您正在尝试将 setText 设置为`int`，并且`it must be String.`

```
 str.setText(STR+" "); 
```

**或者**

```
 str.setText(String.valueof(STR)); 
```

# c++ - 如何新建模板专业化类对象？

> ID：11388687
> 
> 赞同：2
> 
> 时间：2012-07-09T03:11:52.530
> 
> 标签：c++, templates

我写了一个这样的模板专业化类：

```
template <> class MEField<SField> {....}; 
```

我想知道如何对这个类进行实例化？我看到一些代码是这样写的：`MEField<> obj`？那正确吗？

我知道在函数专门化的情况下，我可以正常进行实例化，因为编译器可以判断参数的特殊类型。但至于课堂，你能告诉我真正的格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T03:19:26.647

您通常像其他模板一样执行此操作，`MEField<SField> obj;`. 无论您是否专门化了模板，该类的用户都不会受到打扰，由编译器决定使用哪个模板实例化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:50:11.317

这里，

```
template <> class MEField<SField> {....}; 
```

你所做的是明确的专业化。正如[msdn](http://msdn.microsoft.com/en-us/library/7y5ca42y.aspx)所说，

> 当类或函数被实例化时，编译器会为模板类或函数生成代码。

它进一步指出，

> 如果模板被显式实例化或特化一次，则不能在同一程序中为同一组模板参数显式实例化或特化第二次。允许使用不同模板参数的进一步特化。

所以标准的方式就是这样写。

```
MEField<SField> obj; 
```

但是，正如 Jesse Good 所说，您可以使用默认模板参数，在实例化时不需要您指定类型，因为它使用您指定的默认类型。

请参阅下面的代码（测试代码）

```
class SField
{
public:
    int m_var;
    SField():m_var(0){}
};

template<typename T = SField> // Default template argument.
class MEField
{
public:
   T m_var;
};

template <>
class MEField<SField> // Explicit specialization
{
public:
   SField sField;
   void print(){ cout << sField.m_var; }
};

int main()
{
    MEField<> obj;
    obj.print();
} 
```

另请参阅：[类模板的默认参数](http://msdn.microsoft.com/en-us/library/bys786s7%28v=vs.80%29.aspx)

# php - 使用 codeigniter 的多个/子查询

> ID：11388688
> 
> 赞同：0
> 
> 时间：2012-07-09T03:12:29.677
> 
> 标签：php, sql, codeigniter

我刚开始使用 Codeigniter，这让我抓狂。我有一个查询来确定用户是否购买了任何程序。然后，我必须使用该程序的类型类别来运行并确定他或她在另一个表中记录了多少次查询。很抱歉造成混乱，但希望代码有意义。

我在将两个数组从我的模型返回到我的控制器到视图中时遇到问题。

```
function specificPrograms() {
$specific_sql = $this->db->query("SELECT program,created FROM  `assessment`  WHERE uid = $this->uid");
if($specific_sql->num_rows() > 0) {
foreach ($specific_sql->result() as $specific) {        
$data[] = $specific;
$this->type = $specific->program;   
}
return $data;
}   

$sub_sql = $this->db->query("SELECT id FROM othertable WHERE user_id_fk = $this->uid and type = '$this->type'");
if($sub_sql->num_rows() > 0) {
foreach ($sub_sql->result() as $otherp) {       
$data[] = $otherp;
}
return $data;
}

} 
```

然后在我的控制器中，

```
$data['specific'] = $this->user_model->specificPrograms();
$data['otherp'] = $this->user_model->specificPrograms(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:35:08.393

根据您上面的评论，我建议使用一个查询来返回您需要的结果。其结果集将如下所示：

```
+----------+------------+------+
| program  | created    | uses |
+----------+------------+------+
| football | 2001-01-01 | 12   |
+----------+------------+------+
| baseball | 2007-01-01 | 21   |
+----------+------------+------+

SELECT 
  assessment.program, 
  assessment.created, 
  count(othertable.user_id) as uses
FROM  assessment
JOIN othertable 
  ON othertable.user_id_fk = assessment.uid
  AND othertable.type = assessment.program
WHERE assessment.uid = $this->uid
GROUP BY assessment.program

... model ...

function specificPrograms() {
  $results = $this->db->query($sql_from_above);
  if($specific_sql->num_rows() > 0) {
  foreach ($specific_sql->result() as $program_data) {        
    $data[] = $program_data;
  }
  return $data;
}

... meanwhile in controller ...

$programs_used = $this->user_model->specificPrograms();
foreach($programs_used as $program_use_data) {
  // On first iteration, this is true:
  // $program_use_data['program'] == "football"
  // $program_use_date['uses'] == 12
} 
```

# model-view-controller - grails-app/services、grails-app/utils 和 src 文件夹之间的区别

> ID：11388693
> 
> 赞同：14
> 
> 时间：2012-07-09T03:13:35.683
> 
> 标签：model-view-controller, grails

我试图确定这三个文件夹之间的区别以及我应该放入其中的内容。

到目前为止，我一直在将类、接口以及与我的域类的结构（通过扩展或实现）直接相关的任何其他内容放入`src`文件夹中。除了默认情况下 Grails 控制器所做的之外，任何涉及额外事务逻辑的内容我都已放入`grails-app/services`文件夹中。最后，任何包含“帮助”方法的类（即比较各种事物、特殊字符串操作等）我都已放入`grails-app/utils`文件夹中。

如果我错过了这些文件夹应该用于什么的标记，请让我走上正确的道路。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T03:25:57.693

那很接近。grails-app/utils 用于 Codec 类——它的名字很奇怪，而且文档不足。我会将帮助类移回 src/groovy。

使用服务进行事务性工作很棒，但您也可以将服务用于非事务性方法。添加`static transactional = false`到具有不需要事务的实用方法的服务类。请注意，控制器中没有事务性，因此您应该将所有持久性移至事务性服务。

src/groovy 辅助类中的静态实用程序方法和服务中的非事务性方法几乎是等价的，所以对我来说，决定采用哪条路线将归结为依赖关系。如果该类依赖于 Spring bean，则使其成为服务并通过依赖注入引用它们。否则就让它成为一个助手类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T06:19:31.277

如果您发现自己将一个方法添加到依赖于非域类的域类中，请问问自己为什么这个方法可以在服务中。这导致几乎每个域类都有相应的服务。

这使得将您的域类放入插件中变得更简单，这样您就可以通过使用相同的域模型构建多个应用程序来扩展功能，而不是创建一个无法维护的大泥球。也与 Bob Martin 大叔在《Lost Years of Architecture》中描述的应用模型一致[http://www.youtube.com/watch?v=WpkDN78P884](http://www.youtube.com/watch?v=WpkDN78P884)

鉴于您正在考虑建筑，阅读 Bob 叔叔和 Martin Fowler 的一些作品是一个好主意。

# symfony - FOSUserBundle，模板前的全局参数/函数

> ID：11388694
> 
> 赞同：1
> 
> 时间：2012-07-09T03:13:36.860
> 
> 标签：symfony, twig, fosuserbundle

我是 Symfony2 和 FOSUserBundle 的初学者，尽管到目前为止我很喜欢它。截至目前，我可以覆盖现有模板（例如 layout.html.twig），以使 /login、/profile 等符合我网站其余部分的风格。但是，在使用 FOSUserBundle 之前，我的树枝从 php 控制器中获取了导航栏和其他小部件中的链接。所以我的twig 对有一个主页链接或帐户页面一无所知，例如我的base.html.twig 循环遍历一系列要呈现的各种对象。过去，我会在调用 twig 时将这些作为变量传递，但现在 FOSUserBundle 完成了所有工作，这些变量未填充。

一种解决方案是覆盖所有 FOSUserBundle 控制器，找到它们调用模板引擎的位置，并挂钩全局函数以获取当前导航栏，获取当前状态栏等。另一种解决方案是让 twig 知道所有潜在的小部件，并根据 app.user 信息关闭。真的，我想要的是让 FOSUserBundle 在移交给树枝之前附加一些信息。我想这样做而不必修改或覆盖一堆代码。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:25:08.313

*   您可以使用`{% render %}`.
*   使用全局变量在 twig 呈现的所有模板中注入菜单项。
*   使用函数获取所有菜单项并使用部分渲染它`{% include %}`
*   创建自己的标签`{% myAwesomeMenu %}`

# asp.net-mvc - MVC 3.0 formsauthentication 在 localhost 服务器中进行身份验证，但不在 webhost 上

> ID：11388695
> 
> 赞同：0
> 
> 时间：2012-07-09T03:13:48.397
> 
> 标签：asp.net-mvc, asp.net-mvc-3, forms-authentication

所以我遇到了一些类似的问题：

ttp://stackoverflow.com/questions/3694475/asp-net-forms-authentication-authenticates-in-localhost-server-but-not-on-the-w

但我使用的是 MVC 3.0 而不是 Web 表单。基本上，我会登录，点击几秒钟后，它会再次将我重定向到登录页面。这发生在我将网站发布到我的虚拟主机后，但在我的本地主机上它工作得很好。起初我以为是 web.config 上的超时，但它仍然有默认的 2880。所以我把它划掉了。

以前有人遇到过这样的问题吗？？

编辑：

看到一些关于为应用程序生成机器密钥以防止应用程序池回收的建议。想知道我如何生成它？我认为我无法从我的虚拟主机（arvixe）访问 iis。

[http://forum.winhost.com/showthread.php?t=8407](http://forum.winhost.com/showthread.php?t=8407)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:48:19.347

所以我想通了，它停止让我退出.. 至少现在。

显然需要机器密钥，以便应用程序知道 cookie 是否将使用相同的身份验证。我刚刚生成了一个机器密钥并将其放在我的 webconfig 中

例如：

```
<configuration>
    <system.web>
        <machineKey decryption="AES" decryptionKey="C03B1AB0BC1ACCD18EA915CBD87373010AD0DEC430A69871,IsolateApps" validation="AES" validationKey="C0ED7C430148AD4BC6505085DA4FD0DD3EE2453B566FC4EA4C7B3C2DCAB2025A79C774370CA884DF909CE9A3D379E544B7890D0A1CEE164141D3A966999DC625,IsolateApps" />
    </system.web>
</configuration> 
```

所以，是的，这行得通，我希望它保持这样。

感谢大家的回复！

# java - 在优先级队列中使用比较器进行排序但没有正确

> ID：11388698
> 
> 赞同：0
> 
> 时间：2012-07-09T03:14:15.203
> 
> 标签：java

```
PriorityQueue<Player> playerQueue = new PriorityQueue<Player>(30,
                new Comparator<Player>( ) {
                    // overriding the compare method
                    public int compare(Player i, Player j) {
                        return (int)i.playerPrice() < (int)j.playerPrice() ? -1 : ((int)i.playerPrice() == (int)j.playerPrice()) ? 0 : 1;
                    }
                }
          );

        for(Player a:XMLParserViaSax.getListOfPlayers()){
            System.out.println(a.getName()+ "-->"+a.playerPrice());
        }

        for(Player player:XMLParserViaSax.getListOfPlayers()){
            playerQueue.add(player);
        }
        //playerQueue.addAll(XMLParserViaSax.getListOfPlayers());

        System.out.println("**************************");
        for(Player j:playerQueue){
            System.out.println(j.getName()+ "-->"+j.playerPrice());
        } 
```

我正在尝试按 playerprice 对 Player 进行排序，因为 Player 类中的 playerprice 没有任何变量。playerPrice() 是一种计算玩家价格的方法。所以现在当我尝试对这些 Player 对象进行排序时，它是给我一个随机的顺序。

我的玩家类中是否需要有一个 playerprice 私人成员？' 播放器类是这样的：

```
public class Player {

    private String name;
    private int battingStrength;
    private int bowlingStrength;
    private int fieldingStrength;
    private int keepingStrength;
    private int jerseyNumber;

    public int playerStrength() {
    return AuctionPlayerHelper.calculateStrength(this);
    }

    public boolean canKeepWickets() {
    return (keepingStrength == 10);
    }

    public boolean isForeignPlayer(){
    return AuctionPlayerHelper.isForeignPlayer(this.jerseyNumber);
    }

    public double playerPrice() {
     return AuctionPlayerHelper.calculatePrice(this);

    }

    //getters,setters
} 
```

'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:18:30.293

[PriorityQueue API](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)的注意事项：

> 方法 iterator() 中提供的 Iterator 不能保证以任何特定顺序遍历优先级队列的元素。如果您需要有序遍历，请考虑使用 Arrays.sort(pq.toArray())。

因此，您正在执行的遍历队列将不会按“顺序”进行。

*当您从队列中移除*头部时，例如当您在队列中调用时，优先级排序变得明显`poll()`。

# jquery - 在jquery mobile中的页面之间传递数据

> ID：11388700
> 
> 赞同：1
> 
> 时间：2012-07-09T03:14:30.893
> 
> 标签：jquery, jquery-mobile

我在[这里](https://stackoverflow.com/questions/7582781/how-to-pass-and-get-parameters-between-two-pages-in-jquery-mobile)看过这篇文章，它看起来像是一种获取查询字符串的简单方法，但是使用 jquery 移动框架是否有一种简单的方法可以做到这一点？感谢您的建议

```
#MobileHomePage?param1=data&param2=data1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:41:45.577

使用 jQuery Mobile 在页面之间传递数据非常简单，只需使用此功能即可

```
$.urlParam = function(name){
    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
    return results[1] || 0;
} 
```

对于多页模板，使用以下代码：

```
$('#myPage').live('pageshow', function(event, ui) {
    var param = $.urlParam('param1');
    alert(param);
}); 
```

对于普通模板使用：

```
 var param = $.urlParam('param1');
    alert(param); 
```

并像这样调用页面：

```
www.yourwebsite.com/mypage?param1=test&gift=Candy etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:33:35.443

为此制作一个jquery插件。

```
 (function( $ ){

  $.fn.queryStrings = function( string ) {        

        var url = /[^?]*$/.exec(window.location.href)[0].split('&');

        var obj = {};

        url.forEach(function(url) {
            var tup = url.split('=');
            obj[tup[0]] = tup[1];
        });

        if (string) return obj[string];

        return obj;
  };
})( jQuery ); 
```

像这样使用：

```
$().queryStrings('myparam') 
```

或者

```
$().queryStrings() 
```

归还所有

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T14:11:26.043

目前[没有在 JQM 页面之间传递数据的内置方式](https://github.com/jquery/jquery-mobile/issues/2859)，您可以使用您链接的问题的答案中概述的方法。

您可能还想查看这些 SO 溢出问题

[如何在 jQM 页面之间存储变量？](https://stackoverflow.com/questions/10739051/how-to-store-variable-beetween-jqm-pages/10739127#10739127)

[如何将按钮文本传递到另一个页面？](https://stackoverflow.com/q/10702952/384985)

如果您询问如何导航到您发布的网址，那么您可以使用`$.mobile.changePage("#MobileHomePage?param1=data&param2=data1 ");`

# xml - 使用 XSLT 将输入 XML 转换为 OTHER XML

> ID：11388705
> 
> 赞同：1
> 
> 时间：2012-07-09T03:15:07.257
> 
> 标签：xml, xslt, xml-serialization, xml-parsing, xslt-1.0

> **可能重复：**
> [使用 xslt 将输入 xml 转换为其他 XML](https://stackoverflow.com/questions/11286748/converting-input-xml-using-xslt-to-other-xml)

我是 XSLT 的初学者。我查看了一些我感兴趣的任务的代码并构建了一些逻辑，但我无法进入所需的输出。如果我能得到帮助，我很高兴。

输入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<t>
<Data>
    <CD>
        <Artist>xxx.yyy</Artist>
        <song>abc</song>
    </CD>
    <CD>
        <Artist>xxx.zzz</Artist>
        <song>cba</song>
    </CD>
    <CD>
        <Artist>aaa.kkk</Artist>
        <song>123</song>
    </CD>
    <CD>
        <Artist>aaa.lll</Artist>
        <song>456</song>
    </CD>
    <CD>
        <Artist>ddd</Artist>
        <song>1234</song>
    </CD>
</Data>
<Music>
    <music_no>E123</music_no>
    <music_type>outdoor</music_type>
    <Artist>bat.ball</Artist>
    <value>0000</value>
</Music>
<Music>
    <music_no>E123</music_no>
    <music_type>outdoor</music_type>
    <Artist>bat.stone</Artist>
    <value>0001</value>
</Music>
<Music>
    <music_no>E111</music_no>
    <music_type>outdoor</music_type>
    <Artist>board.coins</Artist>
    <value>0002</value>
</Music>
<Music>
    <music_no>E111</music_no>
    <music_type>outdoor</music_type>
    <Artist>board.ball</Artist>
    <value>0003</value>
</Music>
<Music>
    <music_no>E001</music_no>
    <music_type>indoor</music_type>
    <Artist>bat.ball</Artist>
    <value>8888</value>
</Music>
<Music>
    <music_no>E001</music_no>
    <music_type>indoor</music_type>
    <Artist>bat.stone</Artist>
    <value>9999</value>
</Music>
<Music>
    <music_no>E111</music_no>
    <music_type>indoor</music_type>
    <Artist>board.coins</Artist>
    <value>0001</value>
</Music>
<Music>
    <music_no>E111</music_no>
    <music_type>indoor</music_type>
    <Artist>bat</Artist>
    <value>0001</value>
</Music>
</t> 
```

预期输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<version_3>
<information>
    <xxx>
        <yyy>abc</yyy>
        <zzz>cba</zzz>
    </xxx>
    <aaa>
        <kkk>123</kkk>
        <lll>456</lll>
    </aaa>
    <ddd>1234</ddd>
</information>
<information>
    <bat>
        <ball>0000</ball>
        <stone>0001</stone>
    </bat>
    <board>
        <coins>0002</coins>
        <ball>0003</ball>
    </board>
    <bat>
        <ball>8888</ball>
        <stone>9999</stone>
    </bat>
    <board>
        <coins>0001</coins>
    </board>
</information>
<information>
    <bat>0001</bat>
</information>
 </version_3> 
```

编辑后的预期输出：

```
Expected Output:

<?xml version="1.0" encoding="UTF-8"?>
<version_3>
<information>
    <xxx>
        <yyy>abc</yyy>
        <zzz>cba</zzz>
    </xxx>
    <aaa>
        <kkk>123</kkk>
        <lll>456</lll>
    </aaa>
    <ddd>1234</ddd>
</information>
<information>
    <bat>
        <ball>0000</ball>
        <stone>0001</stone>
    </bat>
</information>
<information>
    <board>
        <coins>0002</coins>
        <ball>0003</ball>
    </board>
    <board>
        <coins>0001</coins>
                          <bat>0001</bat>
    </board>
</information>
<information>
    <bat>
        <ball>8888</ball>
        <stone>9999</stone>
    </bat>
      </information>
   </version_3> 
```

在上面的输入 XML 中：您可以注意到其中的“CD”元素和值，类似于“音乐”。我想得到一个看起来像的输出，

“CD”的示例输出：

```
<information>
    <xxx>
        <yyy>abc</yyy>
        <zzz>cba</zzz>
    </xxx>
    <aaa>
        <kkk>123</kkk>
        <lll>456</lll>
    </aaa>
    <ddd>1234</ddd>
</information> 
```

我可以通过 Muenchian Grouping 在某种程度上实现这一目标。但，

下一个元素“音乐”具有子元素，其中前两个元素“music_no”和“music_type”匹配，然后必须对“艺术家”中的值进行分组。如果它们不匹配，则必须单独分组。

音乐的样本 o/p：

```
<information>
    <bat>
        <ball>0000</ball>
        <stone>0001</stone>
    </bat>
    <board>
        <coins>0002</coins>
        <ball>0003</ball>
    </board>
    <bat>
        <ball>8888</ball>
        <stone>9999</stone>
    </bat>
    <board>
        <coins>0001</coins>
    </board>
</information>
<information>
    <bat>0001</bat>
</information> 
```

我无法完成第二部分，因为迭代有点棘手。帮助表示赞赏。

注意：对于“Music”元素，如果 Artist 中的 Value 与相应节点相似但没有“.” 那么这个值必须单独分组，它在“信息”之外，并且应该有新的“信息”

我工作的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"            xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
<xsl:key name="kBychildName" match="CD" use="name(Artist/*[1])"/>
<xsl:key name="kByAttribs" match="Artist" use="concat(../@music_no, '+', ../@music_type)"/>
<xsl:key name="kChildByAttribsAndArtist" match="Artist/*" use="concat(../../@music_no, '+', ../../@music_type, '+', name())"/>
<xsl:template match="/">
    <version_3>
        <information>
            <xsl:variable name="var1">
                <xsl:apply-templates/>
            </xsl:variable>
            <xsl:apply-templates mode="pass2" select="ext:node-set($var1)/* [generate-id()=generate-id(key('kBychildName',name(Artist/*[1]))[1]) or not(Artist/*)]"/>
        </information>
        <information>
            <xsl:variable name="var2">
                <xsl:apply-templates/>
            </xsl:variable>
            <xsl:apply-templates mode="pass3" select="ext:node-set($var2)/*/* [generate-id() = generate-id(key('kByAttribs', concat(../@music_no, '+', ../@music_type) ) [1])] "/>
        </information>
    </version_3>
    <!--xsl:copy-of select="//msg_debug"/-->
</xsl:template>
<xsl:template match="CD[contains(Artist,'.')]">
    <CD>
        <Artist>
            <xsl:element name="{substring-before(Artist, '.')}">
                <xsl:element name="{substring-after(Artist, '.')}">
                    <xsl:value-of select="song"/>
                </xsl:element>
            </xsl:element>
        </Artist>
    </CD>
</xsl:template>
<xsl:template match="CD">
    <CD>
        <Artist>
            <xsl:element name="{Artist}">
                <xsl:value-of select="song"/>
            </xsl:element>
        </Artist>
    </CD>
</xsl:template>
<xsl:template match="CD" mode="pass2">
<xsl:apply-templates select="*/*[1]" mode="pass2"/>
</xsl:template>
<xsl:template match="Artist/*" mode="pass2">
    <xsl:copy>
        <xsl:copy-of select="self::*[not(*)]/text()|key('kBychildName', name())/*/*/*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="Music[contains(Artist, '.')]">
    <Music music_no="{music_no}" music_type="{music_type}">
        <Artist>
            <xsl:element name="{substring-before(Artist, '.')}">
                <xsl:element name="{substring-after(Artist, '.')}">
                    <xsl:value-of select="value"/>
                </xsl:element>
            </xsl:element>
        </Artist>
    </Music>
</xsl:template>
<xsl:template match="Music">
    <Music music_no="{music_no}" music_type="{music_type}">
        <Artist>
            <xsl:element name="{Artist}">
                <xsl:value-of select="value"/>
            </xsl:element>
        </Artist>
    </Music>
</xsl:template>
<xsl:template match="Artist" mode="pass3">
    <!--Artist-->
    <xsl:apply-templates mode="pass3" select="*[generate-id() =generate-id(key('kChildByAttribsAndArtist', concat(../../@music_no, '+', ../../@music_type,'+', name()))[1] ) ]"/>
    <xsl:copy-of select="key('kByAttribs',concat(../@music_no, '+', ../@music_type) )/*[not(*)] "/>
    <!--/Artist-->
</xsl:template>
<xsl:template match="Artist/*" mode="pass3">
    <xsl:element name="{name()}">
        <xsl:copy-of select="key('kChildByAttribsAndArtist', concat(../../@music_no, '+', ../../@music_type, '+', name()) )/* "/>
    </xsl:element>
</xsl:template>
 </xsl:stylesheet> 
```

如果发现困难，我很高兴再次解释这个问题。作为 XSLT 的初学者，我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:24:58.890

一个简单的问题值得一个简单的答案。这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:key name="artist-group" match="CD|Music" use="
      concat( substring-before(Artist,'.'),'|',music_no,'|',music_type)"/>

<xsl:template match="/">
  <version_3>

   <information> 
     <xsl:apply-templates select="t/Data/CD
     [generate-id(.) = generate-id( key('artist-group',
       concat( substring-before(Artist,'.'),'||'))[1])]
     [substring-before(Artist,'.')]" />
     <xsl:apply-templates select="key('artist-group','||')/self::CD" />
   </information> 

   <information> 
     <xsl:apply-templates select="t/Music
     [generate-id(.) = generate-id( key('artist-group',
       concat( substring-before(Artist,'.'),'|',music_no,'|',music_type))[1])]
     [substring-before(Artist,'.')]" />
   </information> 

   <information> 
     <xsl:apply-templates select="t/Music[substring-before(Artist,'.') = '']" />
   </information> 

  </version_3>
</xsl:template>

<xsl:template match="CD[ substring-before(Artist,'.') != ''] |
                  Music[ substring-before(Artist,'.') != '']">
 <xsl:element name="{substring-before(Artist,'.')}">
  <xsl:for-each select="key('artist-group',
     concat( substring-before(Artist,'.'),'|',music_no,'|',music_type))" >
   <xsl:element name="{substring-after(Artist,'.')}">
    <xsl:value-of select="song|value" /> 
   </xsl:element>  
  </xsl:for-each> 
 </xsl:element>
</xsl:template>

<xsl:template match="CD[ substring-before(Artist,'.')  = ''] |
                  Music[ substring-before(Artist,'.')  = '']">
 <xsl:element name="{Artist}">
  <xsl:value-of select="song|value" /> 
 </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

...当应用于您的样本输入时，将产生您所需的预期输出。

## 解释

单个键用于对音乐和 CD 元素进行分组。在音乐的情况下，进一步分为music_no 和music_type。第一个输出信息节点来自 CD 元素的 muenchian 分组。第一信息节点内的孤儿艺术家由指令产生。

一对共同的 CD|Music 模板用于所有分组艺术家和孤立艺术家节点制作。模板对的第一个带有谓词 [substring-before(Artist,'.')!=''] 用于分组艺术家，另一个用于孤立艺术家。

第二个信息节点的产生与第一个类似，只是它基于输入的音乐节点并且不包括孤立的艺术家。

第三个信息节点的产生来源于孤立的音乐节点。

“孤立”是指 Artist 值不包含点字符的节点。

# html - 在 iPad / iPhone 上 CSS 显示不正确

> ID：11388706
> 
> 赞同：0
> 
> 时间：2012-07-09T03:15:12.827
> 
> 标签：html, css, ipad

我有一个正在开发的网站，我的客户已经提醒我有一个问题 - 它无法在 iPad / iPhone 上正确显示。Chrome / FF / Safari（在 PC 上）都显示正确。

该网站是[http://xprotect.co.nz](http://xprotect.co.nz)

右侧下方有一条黑色条带，是body标签的背景色。它也显示在底部。

我已经设法让 Firebug lite 在 iPad 上工作（因为使用开发人员工具的 Safari 中没有显示问题 - 使用 iPad 作为屏幕代理）。我可以看到问题的根源——但看不到问题的根源。

iPad 上的 Firebug 告诉我，两个容器 div（outerContainer 和 middleContentOuter）的计算值为 980 像素，而每个容器中的居中 div 的宽度为 1000 像素。所以我实际上在右侧丢失了 20 像素 - 某些原因导致这些容器 div 减少了 20 像素，即使每个 div 的指定宽度为 100%。

谁能发现我看不到的东西 - 或提供任何建议？

非常感谢，

托比。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:21:40.200

您需要在 css 中设置 min-width：

```
 .outerContainer, middleContentOuter{
      min-width: 1000px;
 } 
```

# jquery - 选择组合框的 OnChange 事件永远不会在 jQuery 中触发

> ID：11388707
> 
> 赞同：2
> 
> 时间：2012-07-09T03:16:03.573
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我有以下代码，我尝试在 jQuery 中为选择组合框创建 on change 事件处理程序，但我从未看到警报消息。这里有什么问题？

```
 $(document).ready(function () {
        var combo = $("#Supplier_Sel").combobox();
        $($('.ui-combobox-input')[3]).css('width', '300px');
        $("#toggle").click(function () {
            $("#Supplier_Sel").toggle();
        });
        //this change event never gets fired. WHY??
        $("#Supplier_Sel").change("dssd",function () {
            alert('Handler for .change() called.');
        });
    }); 
```

此外，我的页面中包含以下脚本。可能我需要为组合框 onchange 事件添加一些其他脚本吗？

```
 <script type="text/javascript" src="../jquery/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="../jquery/ui/jquery-ui-1.8.21.custom.js"></script>
    <script type="text/javascript" src="../jquery/jquery.scrollIntoView.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T04:29:22.383

这会让所有人大吃一惊。但对我来说，这***似乎是火箭科学***。哈哈。要触发 jQuery 组合框的更改事件，您应该始终使用如下代码。这篇文章中提到的所有各种方法都不会这样做。**当我们在 jQuery 中为选择元素调用组合框方法时，我们需要连接事件。此外，change 事件永远不会触发，但如果以上述方式连接，它出现的选定事件总是会触发。**

```
 $(document).ready(function () {
        $("#Supplier_Sel").combobox({
            selected: function (event, ui) {
                alert('Handler for .change() called.');
            }
        });
        $($('.ui-combobox-input')[3]).css('width', '300px');
        $("#toggle").click(function () {
            $("#Supplier_Sel").toggle();
        });
    }); 
```

如果您查看组合框小部件 jQuery 代码，上述方法是有意义的。这如下所示。

```
select: function( event, ui ) {
                 ui.item.option.selected = true;
                 //select.val( ui.item.option.value );
                 self._trigger( "selected", event, {
                    item: ui.item.option
                 });
              } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:21:14.457

我不知道什么`.combobox()`方法，但我怀疑它需要一个实际的组合框并用它做一些 HTML 技巧。所以它实际上可能不再是一个下拉菜单，并且不会有可用的 onChange 方法。

如果您提供指向哪个库具有该`.combobox()`方法的链接，有人可以检查，但我很确定它将是一些跨度和文本输入元素（如 jQuery UI 版本）。这些没有更改方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T00:06:25.043

下面的代码对我有用。经测试。

如果是简单的选择组合框，则使用下面的代码更改事件触发器；

```
$("#mySelectCombo").on('change',  function () {
                alert("test");              
            }); 
```

如果基于 Jquery 的选择组合，则使用以下代码更改事件触发器；

```
$("#mySelectCombo").combobox({                    
                select: function (event, ui) {
                   alert("hello");
                }
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-24T02:20:12.897

这对我有用：

```
 $("#combobox_old").combobox({
        selected: function (event, ui) {
            alert('Handler for .selected() called.');
        }
    }); 
```

Murugesan Bakthavachal 也写了解决方案（对我来说），但我认为其他代码不起作用，因为`$.widget( "ui.combobox" , {...});`代码已经定义了更改事件，因此后续代码不起作用：

```
 $("#mySelectCombo").on('change',  function () {
       alert("test");              
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T03:19:41.713

```
$("#Supplier_Sel").change(function () {
     alert('Handler for .change() called.');
 }); 
```

消除`"dssd"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T03:20:32.710

```
//Assuming Supplier_Sel is the selectbox id,this will be all you need

        $("#Supplier_Sel").change(function () {
            alert('Handler for .change() called.');
        });
    //or if its dynamically generated then

 $('body').delegate('#Supplier_Sel','change',function () {
            alert('Handler for .change() called.');
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T03:22:06.953

尝试：

```
$('#Supplier_Sel').live('change',function(){
   alert('Handler for .change() called.');

}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-19T22:12:09.987

这是从 jquery 组合框触发事件的另一种方法。

还有人发帖：

[手动更改基础选择后如何触发jqueryui组合框中的更改？](https://stackoverflow.com/questions/9589148/how-to-trigger-change-in-jqueryui-combobox-after-underlying-select-is-manually-c#comment12186674_9589260)

# iphone - iphone：点击按钮将旋转视图

> ID：11388713
> 
> 赞同：1
> 
> 时间：2012-07-09T03:17:13.677
> 
> 标签：iphone, rotation, uiinterfaceorientation

尝试手动旋转视图时遇到问题。例如，我有一个横向运行的视图控制器，并且在该视图上有一个按钮。我想点击该按钮以强制视图旋转为纵向（倒置纵向）。我搜索但找不到答案。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:24:35.333

你可以试试这个：

```
- (void)buttonPressed {

    // check current orientation
    if ([[UIApplication sharedApplication] statusBarOrientation] != UIDeviceOrientationLandscapeLeft) {

        // no, the orientation is wrong, we must rotate the UI
        self.view.userInteractionEnabled = NO;

        // setup status bar
        [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:NO];
        // rotate main view, in this sample the view of navigation controller is the root view in main window
        [self.view setTransform: CGAffineTransformMakeRotation(M_PI / 2)];
        // set size of view
        [self.view setFrame:CGRectMake(0, 0, 748, 1024)];

    }

} 
```

# asp-classic - 如何使用 MSXML2.ServerXMLHTTP 从另一个站点获取数据？

> ID：11388714
> 
> 赞同：17
> 
> 时间：2012-07-09T03:17:19.257
> 
> 标签：asp-classic, serverxmlhttp

我们有以下链接： http: [//mvp.sos.state.ga.us/](http://mvp.sos.state.ga.us/)

我们不想创建一个数据库来复制 MVP 页面的信息，而是使用我们自己的表单，然后在幕后，使用名为 MSXML2.ServerXMLHTTP 的组件将信息发送到上面的站点以获取结果。

不幸的是，我对这个组件或如何使用它一无所知。

有人可以请给我指点如何使用我们自己的...将信息发送到上面的站点并将结果返回到我们的表单中吗？

我们基本上是想让用户输入名字的首字母、姓氏、县、出生日期。

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-09T11:24:54.027

您可以将此组件用于 http 请求，例如“POST”、“GET”、“DELETE”等。

**创建对象：**

```
<%
    Set objXML = Server.CreateObject("MSXML2.ServerXMLHTTP")
%> 
```

**使用方法“GET”发送数据：**

```
<%
    objXML.Open "GET", "http://mvp.sos.state.ga.us/?some=querystring", false 
    objXML.Send ""
    Response.Write objXML.responseText
%> 
```

注意 Open 方法有 3 个参数：*HTTP 方法、URL、异步调用*。

请注意，“GET”上的 Send 方法会忽略其参数。（在这种情况下，我们通过 URL 传递参数。）

**使用“POST”方法发送数据：**

```
<%
    objXML.Open "POST", "http://mvp.sos.state.ga.us/", false 
    objXML.Send "username=htbasaran&password=somepassword"
    Response.Write objXML.responseText
%> 
```

注意“POST”，Send 方法以键值对格式传递参数，例如：*key1=value1&key2=value2&so=on...*或任何其他数据，如 XML、JSON 等）

这些是该组件的基础知识。如果您需要更多信息，可以查看[microsoft 的文档页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms766431%28v=vs.85%29.aspx)。

**获取表单值并使用 xmlhttp post 方法发送它们的示例代码。**

```
<%
    ' getting form values
    my_uname = Request.Form("username")
    my_pword = Request.Form("password")

    ' creating object
    Set objXML = Server.CreateObject("MSXML2.ServerXMLHTTP")

    ' sending variables to an external site
    objXML.Open "POST", "http://www.sitename.com/login.asp", false
    objXML.Send "username=" & my_uname & "&password=" & my_pword

    ' Assuming that successful login will return response "Ok"
    ' writing the result to the client.
    if objXML.responseText="Ok" then
        Response.Write "Login Successful!"
    else
        Response.Write "Login Failed!"
    end if
%> 
```

# php - 为什么 openssl_get_publickey 返回 NULL？

> ID：11388718
> 
> 赞同：3
> 
> 时间：2012-07-09T03:17:44.707
> 
> 标签：php, ssl, oauth

我正在为一个建立在开放社交之上的程序编写授权过程。我使用的库是 Oauth 库。该证书已经在其他可以完美运行的机器上进行了测试，尽管完全相同的证书在我的计算机上不起作用。

在我跟踪错误之后，问题来自这个函数：（在 oauth.php 行中：207）

```
$publickeyid = openssl_get_publickey($cert); 
```

注意：`$cert`是 RSA 证书

此函数在我的计算机上返回 NULL，而在另一台计算机上测试时它实际工作（返回有效值）。我怎样才能解决这个问题？

这与我的 Apache 或本地机器配置有关吗？我的`php.ini`和`httpd.conf`似乎也和其他机器一样。我已经在这件事上工作了几个小时，在互联网上也找不到任何相关的解决方案。

# plsql - 使用带有布尔输入参数的 PL/SQL 在 oracle 中调用 java 存储过程

> ID：11388723
> 
> 赞同：3
> 
> 时间：2012-07-09T03:18:23.257
> 
> 标签：plsql, boolean, java-stored-procedures, input-parameters

我正在尝试编写一个 PL/SQL 块来调用 Java 存储过程，其中 java 方法有一个布尔值作为参数。

在为 java 过程定义包并从 PL/SQL 块调用 java 过程时，如何翻译布尔值？

我在某处读到 java boolean 应该在 Oracle 中定义为 NUMBER，所以我也尝试过，但也没有用。

有没有人有如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T07:26:33.583

这不起作用，您必须将您的 java 参数声明为数字而不是布尔值，并为真/假传递 1/0。或者使用 char 和一些适合您的编码。

# jquery - 带有ajax插入查询的jquery未定义？

> ID：11388728
> 
> 赞同：0
> 
> 时间：2012-07-09T03:18:55.830
> 
> 标签：jquery

我有这个未定义的值，它说在 javascript 控制台上我的函数有什么问题？

我在这里要做的是，当我单击按钮时，它会将隐藏的值提交到我的数据库。提交值后它将淡出。

下面的jQuery

```
 // AJAX/JQUERY FORM
$(function() {
$(".videoThumbS").click(function() {

var test = $("#v_w_id_value").val();
var dataString = test;

if(test=='') {
    alert("Please Select Video");
} else {

$.ajax({
    type: "POST",
    url: "api.php",
    data: dataString,
    cache: false,
    success: function(html){
    $(".videoThumb4").fadeout();
    $(".videoThumb4").hide();
}
});
} return false;
});
}); 
```

下面的表格

```
<form method="post" action="">
<input type="hidden" name="v_w_id" value="UOIDKSJLKH" id="v_w_id_value" />
<input class="videoThumbS" onClick="ALKJKLJLKMNF" type="button" name="selectSel" value="Select" id="selectbut" />
</form> 
```

为什么我总是这样？下面的api.php

```
<?php
include ( 'class/conn.php' );
if( isset( $_POST['selectSel'] ) ) {
$v_watch_id = $_POST['v_w_id'];
$selected_videos = mysql_query( "INSERT INTO s_vids VALUE('', '$v_watch_id', NOW() )" ) or die ( mysql_error() );

/* VIEW RECORDS */      
$result = mysql_query("SELECT * FROM s_vids");            //query
$array = mysql_fetch_row($result);                          //fetch result    

echo json_encode($array);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:27:08.517

你`dataString`只是 的值`$("#v_w_id_value")`，所以没有`$_POST['selectSel']`and `$_POST['v_w_id']`。

`data`ajax 请求应该是这样的：

```
data: {selectSel: 1, v_w_id: dataString }, 
```

而且实际上您不需要将 传递`selectSel`给服务器端，只需要检查`v_w_id`.

# mysql - int和binary的插入速度

> ID：11388729
> 
> 赞同：1
> 
> 时间：2012-07-09T03:19:12.560
> 
> 标签：mysql

我阅读了帖子：[列数如何影响性能？](http://www.mysqlperformanceblog.com/2009/09/28/how-number-of-columns-affects-performance/). 似乎列数会大大降低插入速度。所以我创建了两个表：第一个有 100 个 tinyint 列和 100 个 smallint 列，第二个有一个 binary(100) 列和一个 binary(200) 列。所以这两个表具有相同的行长。

更特别的是：

```
CREATE TABLE 'users'(

   'c0' tinyint(4) not null default '0',

   'd0' smallint(6) not null default '0',

   .....

   'c99' tinyint(4) not null default '0',

   'd99' smallint(6) not null default '0'

) ENGINE = InnoDB default CHARSET = utf8

CREATE TABLE 'users2'(

   'c0' binary(100) not null default '\0 *100',

   'd0' binary(200) not null default '\0 * 200'

) ENGINE = InnoDB default CHARSET = utf8 
```

然后我从 mysql 工作台运行了以下两个程序。

```
create procedure insert1()

begin

    declare v_max int default 1000;
    declare v_counter int default 0;
    while v_counter < v_max do
         insert into user (c0, d0, c1, d1....c99, d99) values (0,0,0.....0);
         set v_counter = v_counter + 1;
    end while;
end

create procedure insert2()

begin

    declare v_max int default 1000;
    declare v_counter int default 0;
    while v_counter < v_max do
         insert into users2 (c0, d0) values (0x0000...00, 0x000....00);
         set v_counter = v_counter + 1;
    end while;
end 
```

结果是：

调用 insert1()：0.999 秒

调用 insert2()：3.479 秒

由于这两个表具有相同的行长，并且第一个具有更多列（200 列），因此我预计第一个表的插入速度应该比第二个慢。有人可以帮助解释为什么会这样吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T14:06:13.097

您必须将二进制（100）更改为二进制（4），将二进制（200）更改为二进制（6）。我听说 binary(n) 是 n = 1 字节，而不是二进制数字。

# xcode - 自动增量脚本上的 Xcode 4.3 Shell 脚本合成错误

> ID：11388734
> 
> 赞同：3
> 
> 时间：2012-07-09T03:20:08.750
> 
> 标签：xcode, shell, build-numbers

我制作了这个脚本来自动增加每个构建的构建号：

```
#!/bin/bash
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" $INFOPLIST_FILE)
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" $INFOPLIST_FILE 
```

我将它插入到“复制捆绑资源”之前的构建阶段。我收到一条错误消息：

> 命令 /bin/sh 失败，退出代码为 1 /Users/ricardodelfingarcia/Library/Developer/Xcode/DerivedData/Flat_Wars-bhkfhubvxegpazcnqcswodoejxeo/Build/Intermediates/Flat Wars.build/Debug-iphoneos/Flat Wars.build/Script-B6B328B815AA6F9900C26C37.sh ：第 4 行：文件不存在，将创建：Flat Invalid Arguments + 1.0：语法错误：无效算术运算符（错误标记是“不存在，将创建：Flat Invalid Arguments + 1.0”）解析错误：未闭合的引号值设置命令所需

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T01:22:14.510

问题是您的目录名称中有空格。

这将起作用：

```
#!/bin/bash
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T07:12:34.543

语法错误：无效算术...告诉您这是错误所在的第二行。因此，只需单独运行第二行并回显 $buildNumber，然后您就会看到为什么 PlistBuddy 命令不起作用以及为什么它给您错误“...不存在，将创建：Flat ...”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:19:40.263

检查是否`CFBundleVersion`存在于您的 Info.plist 中。

如果不存在，您的脚本将无法创建`CFBundleVersion`，并且它停止工作。只需添加`CFBundleVersion`您的 Info.plist，您的脚本就会更新它。

# c# - 设计模式场景 - 我应该使用哪个？

> ID：11388739
> 
> 赞同：5
> 
> 时间：2012-07-09T03:21:19.660
> 
> 标签：c#, design-patterns

我目前正在工作的一个项目中遇到一个情况，这让我整个周末都心神不宁。首先，我需要解释我的场景，以及我考虑过的可能解决方案。

我正在编写一个复合 WCF 服务，它将聚合大量外部 API。这些 API 是任意的，它们的存在就是这个解释所需要的。

这些服务可以在整个开发期间添加和删除。我的 WCF 服务应该能够使用多种方法（REST、SOAP 等）来使用这些服务。对于此示例，我将重点关注通过在代码中手动创建请求来与外部 APIS 进行通信。

例如，我们可能有两个 API 的**ServiceX**和**ServiceY**。

ServiceX 通过**POST**使用请求正文中的数据的 Web 请求来使用。

ServiceY 通过**POST**使用附加到 URL 的数据的 Web 请求来消耗（是的......我知道这应该是一个 GET，但我没有编写外部 API，所以不要告诉我它。）

为了避免冗余、重复的代码，我使用命令模式包装了 Web 请求，并且正在使用工厂来构建请求。

对于 ServiceX，需要对数据进行编码并放入请求正文中，这与 ServiceY 相反，后者需要迭代数据并放置在 Post 字符串中。

我有一个如下的类结构：

```
public abstract class PostCommandFactory
{
      public ICommand CreateCommand();
}

public class UrlPostCommandFactory:PostCommandFactory
{
      public ICommand CreateCommand()
      {
              //Initialize Command Object Here
      }
}

public class BodyPostCommandFactory:PostCommandFactory
{
      public ICommand CreateCommand()
      {
              //Initialize Command Object Here
      }
}

public interface ICommand
{
      string Invoke();
}

public class UrlPostCommand:ICommand
{
      public string Invoke()
      {
         //Make URL Post Request
      }
}

public class BodyPostCommand:ICommand
{
      public string Invoke()
      {
         //Make Request Body Post Request
      }
} 
```

这使我可以在需要发送数据时将数据绑定到请求的方式清晰地分开，本质上，我还可以添加其他类来处理 GET 请求。我不确定这是否可以很好地利用这些模式。我在想另一种方法可能是使用策略模式并为我可能需要使用的不同请求方法指定策略对象。如下所示：

```
public class RequestBodyPostStrategy:IPostStrategy
{
      public string Invoke()
      {
          //Make Request Body POST here
      }
}

public class UrlPostStrategy:IPostStrategy
{
      public string Invoke()
      {
          //Make URL POST here
      }
}

public interface IPostStrategy
{
      string Invoke();
}

public class PostContext
{
      pubic List<IPostStrategy> _strategies;
      public IPostStrategy _strategy;
      public PostContext()
      {
           _strategies = new List<IPostStrategy>();
      }

      public void AddStrategy(IPostStrategy strategy)
      {
            _strategies.Add(strategy);
      }

      public void SetStrategy(IPostStrategy strategy)
      {
           _strategy = strategy;
      }

      public void Execute()
      {
           _strategy.Invoke();
      }
} 
```

我开始认为策略模式可能是更清洁的解决方案。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:23:28.420

我会同时使用。

命令是封装请求和隐藏实现细节的最佳实践。即使您只有一种请求，您也应该使用它，因为它促进了更简洁的代码。从本质上讲，考虑“我的其余代码需要知道的关于如何执行和处理请求的绝对最小值是多少”是一种很好的做法，这将引导您进入命令模式。

策略基本上是在运行时使用一种通用的、一致的方式来配置您的系统来处理操作的某些方面，在这种情况下会生成请求。这也是一个很好的测试实践，因为您可以将策略/请求工厂的测试实现替换为伪造实际连接等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:29:29.760

根据您给出的命令和策略示例，命令模式示例看起来完全像一个策略，我猜它会引导您进入策略。我也会选择策略，但想补充一点，命令模式比您在示例中包含的更多。你应该问自己以下问题：

*   这些命令是否需要存储并应在稍后的时间点执行？
*   是否有一个调用者需要调用这些命令而不关心命令内部？
*   您是否想要将不同的命令组合在一起并执行它们的功能？

如果是这种情况，那么您应该选择命令模式。

# django - django root url 不起作用

> ID：11388743
> 
> 赞同：1
> 
> 时间：2012-07-09T03:22:13.793
> 
> 标签：django, apache, django-admin, django-templates, django-urls

当您访问我的网站 austinhum.webfactional.com 时，它会进入管理控制台并显示“您无权编辑任何内容”的消息。我应该提到我的基本模板是管理控制台的基本模板，因为我需要在页面中合并管理工具。但是，我的根页面 url 是一个 direct_to_template 调用

```
url(r'^$', direct_to_template,{'template':'index.html'}), 
```

我的 index.html 模板（main.html 扩展了 base.html）：

```
{% extends "main.html" %}

{% block content %}
    <div class="homePage">  
    <div><img id="splashImage" src="{{ STATIC_URL }}images/BBBSL2.jpg"</div>    
    </div>  
    <div class="clear"></div>
{% endblock %} 
```

我有其他使用 direct_to_template 的页面没有任何问题。在我的本地机器上，主页显示没有问题。这是我不知道的某种 apache 设置吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:51:12.377

原来问题是我已经将 'index.html' 文件从管理员复制到我的项目中，这与我自己的 'index.html' 冲突

# c# - 在 variableizedwrapgrid 代码后面设置 TextBlock 的宽度、高度无法正确显示

> ID：11388746
> 
> 赞同：3
> 
> 时间：2012-07-09T03:23:26.103
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

我需要一些帮助来确认我看到了一个错误。

我正在为 Metro 的 xaml 创建一个“TagCloud”。没什么复杂的，应该很简单。

我在后面的代码中创建`TextBlock`对象，然后将它们添加到`VariableSizedWrapGrid`

每个`TextBlock`都有不同的高度和宽度 - 这由 确定，然后通过和`testblock.Measure(size)`设置宽度和高度`DesiredSize.Width``DesiredSize.Height`

```
testblock.Measure(new Size(10000, 250));
        dWidth = Double.Parse(testblock.DesiredSize.Width.ToString());
        dHeight = Double.Parse(testblock.DesiredSize.Height.ToString()); 
```

问题是，当`TextBlock`添加对象时，它们基本上是剪辑的，它们都锁定到一个单一的大小（基本上是 a 的行为`WrapGrid`）。本质上`VariableSizedWrapGrid`是拒绝在其子元素中允许可变高度和宽度？我不知道为什么它会剪辑所有内容。

```
<VariableSizedWrapGrid x:Name="vswg" Orientation="Horizontal" Width="Auto" Height="200" Grid.Column="1"/> 
```

* * *

```
IEnumerable<TextBlock> textBlocks = 
    (from cloudItem in cloudItems 
     select ConvertToTextBlock(cloudItem, fontWeight));

vswg.Children.Clear();

foreach (TextBlock t in textBlocks)
{
    vswg.Children.Add(t);
} 
```

`ConvertToTextBlock()`返回`TextBlock`具有不同文本和 FontSize的新

我无法`VariableSizedWrapGrid`真正拥有“可变大小”的子控件。也许我只是使用这一切都错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-24T19:40:41.973

**尝试这样的事情：**

```
 <GroupStyle.Panel> <ItemsPanelTemplate > <VariableSizedWrapGrid x:Name="MyGrid" Orientation="Horizontal" MaximumRowsOrColumns="7"

ItemWidth="{Binding DataContext.ItemTemplateWidth, ElementName=pageRoot}"

ItemHeight="{Binding DataContext.ItemTemplateHeight, ElementName=pageRoot}"

></VariableSizedWrapGrid> </ItemsPanelTemplate> </GroupStyle.Panel> 
```

***还可以考虑阅读：***

1.  [http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2012/09/14/windows-8-xaml-and-displaying-multiple-sized-items.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2012/09/14/windows-8-xaml-and-displaying-multiple-sized-items.aspx)
2.  [http://www.acnenomor.com/3756161p1/how-to-display-gridview-items-with-variable-width-in-window-8](http://www.acnenomor.com/3756161p1/how-to-display-gridview-items-with-variable-width-in-window-8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:22:59.507

尝试考虑使用 DataTemplate。

VariableSizedWrapGrid 提供 ItemHeight 和 ItemWidth 属性。然后，您只能在“单元格”中选择项目的宽度和高度。因此，您可以选择适合 3 个单元格宽度和 1 个单元格高度的项目。

您应该考虑阅读：http: [//blogs.u2u.be/diederik/post/2012/03/07/Databinding-to-the-VariableSizedWrapGrid-in-Windows-8-Metro.aspx](http://blogs.u2u.be/diederik/post/2012/03/07/Databinding-to-the-VariableSizedWrapGrid-in-Windows-8-Metro.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-23T07:00:55.087

改变这个：

```
DesiredSize.Width.ToString() 
```

对此：

```
Width.ToString() 
```

布局系统是一个复杂的三遍过程，当您允许通过说“代码中的 DesiredSize”来控制“DesiredSize”值时，布局系统负责。当您指定宽度时，布局系统将被覆盖。

# javascript - 直接修改函数有多危险？

> ID：11388747
> 
> 赞同：3
> 
> 时间：2012-07-09T03:23:32.490
> 
> 标签：javascript

为了解决已被证明对我来说是范围限制的问题（如[在此处](https://stackoverflow.com/questions/11388429/is-it-possible-for-a-function-called-from-within-an-object-to-have-access-to-tha/11388441#11388441)回答），我编写了一段代码，该代码在匿名函数中插入了一行，这样编写函数的人就不必自己动手了。这有点hacky（实际上，感觉很hacky），我真的不知道我在做什么，所以我很感激专家的眼睛来发现我可能错过的任何错误或指出我的任何危险我不知道。这是代码：

```
function myObj(testFunc) {
    this.testFunc = testFunc;

    this.Foo = function Foo(test) {
        this.test = test;

        this.saySomething = function(text) {
            alert(text);
        };
    };

    var Foo = this.Foo;
    var funcSep = this.testFunc.toString().split("{");
    funcSep.splice(0, 1);
    funcSep = funcSep.join("{");
    var compFunc =  "    var Foo = this.Foo;" + funcSep;
    compFunc = compFunc.split("}");
    compFunc.splice(compFunc.length - 1, 1);
    compFunc.join("}");
    var otherTestFunc = new Function(compFunc);
    otherTestFunc.apply(this);
}

var test = new myObj(function() {
    var test = new Foo();
    test.saySomething("Hello world");
}); 
```

上面的函数按预期计算，我不需要强制编写匿名函数`Foo`的人使用`this.Foo`. 不过，这种方法感觉很可疑。我正在做的事情是否可以接受，如果没有，有什么方法可以规避它吗？

此外，我没有在原始问题中包含此内容的唯一原因是，这似乎与问题的原始上下文有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:01:20.870

你试图打破语言。不要那样做。这不是Java。

开发人员对变量的行为和范围有一定的期望，你的方法宁愿混淆它们。考虑以下几点：

```
var Foo = SomeWonderfulClass;    
var test = new myObj(function() {
    var test = new Foo();
    // ...
}); 
```

现在开发人员想要实例化`SomeWonderfulClass`，但是你的魔法搞砸了。

另一方面，即使使用您的诡计，这也可以正常工作：

```
var test = new myObj(function() {
    var Foo = SomeWonderfulClass;    
    var test = new Foo();
    // ...
}); 
```

但更大的问题是实际范围丢失了：

```
var Bananas = SomeWonderfulClass;
var test = new myObj(function() {
    var test = new Bananas(); // Error: Bananas is undefined!
}); 
```

没有人会想到这样的恶作剧。

* * *

话虽如此，您的代码还有一些需要改进的地方：

*   `this.Foo`用每个新对象初始化。那没有必要。更好的使用

    ```
    myObj.prototype.Foo = function () {...} 
    ```

*   `var Foo = this.Foo;`中不需要该行`myObj`。

*   你的弦魔法过于复杂。怎么样

    ```
    var otherTestFunc = new Function(testFunc.toString()
            .replace(/^[^{]+{/, '{var Foo=this.Foo;')); 
    ```

    无需取下牙套。

*   （`testFunc`不接受任何论据，但我想你知道。）

所以归结为

```
function myObj(testFunc) {
    this.testFunc = testFunc;
    var otherTestFunc = new Function(testFunc.toString()
            .replace(/^[^{]+{/, '{var Foo=this.Foo;'));
    otherTestFunc.apply(this);
}

myObj.prototype.Foo = function Foo(test) {
    this.test = test;

    this.saySomething = function(text) {
        alert(text);
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:16:14.780

自从我在 asp.net 验证代码（！）中看到这种方法以来，我一直被这种方法困扰。对于任意功能来说并不安全：

```
var f = (function () {
   var closure = 1
   return function (argument) {
      alert(argument)
      alert(closure)
   }
})()

var f2 = new Function(f.toString().replace(/^function.*?{([\s\S]*)}$/, 'alert(1);$1'))
f2(1) // :( 
```

不过可以保存参数。

# ruby-on-rails - 网络::SMTPUnknownError: charset=UTF-8

> ID：11388749
> 
> 赞同：0
> 
> 时间：2012-07-09T03:23:38.683
> 
> 标签：ruby-on-rails, smtp

当我尝试发送带有 pdf 附件的电子邮件时收到此错误消息。我使用 wickedpdf 来生成 pdf。我尝试在 pdf 生成中包含选项 :encoding => 'UTF-8' 但仍然没有运气。请赐教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:06:36.090

PDF 应以`application/pdf`附件形式提供，并且此附件类型不支持`charset`属性。显然，您将此参数传递给附件例程，而不是生成器。

# java - P2P应用程序容错的Java实现

> ID：11388753
> 
> 赞同：0
> 
> 时间：2012-07-09T03:25:02.730
> 
> 标签：java, distributed, p2p, fault-tolerance

我有一个由 LiteSoft.org 编码的 P2P 应用程序。我希望在此应用程序中实现领导者选举系统。在我开始之前，我必须有一个容错系统，该系统将包括向对等方（在本例中为协调器）发送请求，以检查他是否仍在响应。我如何实现一个计时器系统来发送请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:05:21.540

如果我正确理解您的问题，您是否想按计划一遍又一遍地重复执行相同的操作？查看 Executor 服务。我认为这将是您正在寻找的：[http ://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)

# javascript - 如何从第一页显示的列表中选择记录并在另一页显示

> ID：11388754
> 
> 赞同：0
> 
> 时间：2012-07-09T03:25:35.397
> 
> 标签：javascript, html, web-sql

这是第三次，我想澄清我的问题。因此，在第一页中，我显示了我保存在数据库中的整个记录​​，当我想在第二页查看选定的详细信息时，我需要单击选定的数据并查看，但没有任何反应，我不知道如何链接可以显示所有数据的第二页的VIEW，我已经捕获了图片，希望大家可以帮助我，非常感谢。

这是第一页

![这是第一页](../Images/485612ba63356928ec12c1c852261b78.png)

这是我想在文本字段中显示详细信息的第二页 ![这是我想在文本字段中显示详细信息的第二页](../Images/29e6bd95123b1694f1756828fba1ac26.png)

编码是这样的（第一页：：显示整个记录并链接到第二页）

```
 function showRecords(){
    results.innerHTML='';
    db.transaction(function(tx)
    {
        tx.executeSql(selectAll,[],function(tx,result)
        {
            dataset = result.rows;
            for(var i=0,item=null;i<dataset.length;i++)
            {
                item = dataset.item(i);
                results.innerHTML+=
                '<li>' + item['fname'] + ' <a href="#" onclick="loadRecord('+i+')">view</a>'+'<a href="#" onclick="deletetab('+item['id']+')">delete</a>'+'</li>';
            }
        });
    });
}

function loadRecord(i){
    var item=dataset.item(i);
    fname.value = item['fname'];
    id.value = item['id'];
    window.location.href="userup2.html?loadRecord("+i+")";
    return false;
} 
```

请给我一些想法和例子，我使用 web sql 来存储数据，我已经问过这个问题几次了，我是 html 和 javascript 的新手，请帮助我，这很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:44:51.783

是的，您可以使用查询字符串来实现它。由于我不知道 web-sql，我将向您展示如何在第一页中将查询字符串添加到 url 以及如何在第二页中检索它。

**JS代码：**

```
function loadRecord(i){ 
    var item=dataset.item(i); 
    fname.value = item['fname']; 
    id.value = item['id']; 
    window.location.href="userup2.html?id="+i; 
    return false; 
} 
```

在上面的函数中，我们添加`i`（一条记录的 id）作为查询字符串。

```
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

此代码将帮助您从 url 获取查询字符串。

**例子：**

```
var id = getUrlVars()["id"]; 
```

上面的行将帮助您获取您在第一页中传递的 id，您可以使用它从数据库中检索详细信息。

希望这可以帮助你:)

# php - zend 框架 (1.1) 将 javascript 文件附加到页脚？

> ID：11388762
> 
> 赞同：2
> 
> 时间：2012-07-09T03:26:23.580
> 
> 标签：php, zend-framework

是否有开箱即用的方式在视图脚本的页脚中加载某些 javascript？

这对于像谷歌分析等这样的脚本特别有用。

或者这是否需要扩展 $this->headScript() 并创建一个 $this->footScript() ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T06:04:07.803

在您的布局中使用[占位符](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)`$this->layout()->footScript`，然后将您想要的代码附加到[占位符](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)。
或者你可以只使用 inlineScript() 助手。inlineScript[助手](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.inlinescript)具有相同的 api 是 headScript()。
最佳方案可能是使用布局占位符和 inlineScript 帮助程序。

[inlineScript 帮助器](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.inlinescript)的示例：

```
//I use this in some of my controllers, in the predispatch()
$this->view->inlineScript()->setScript(
                "$('audio').mediaelementplayer();");

//then I just attach this to any view (including layout)
<?php echo $this->inlineScript() ?> 
```

使用这样的东西和占位符，你在任何地方都有 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:52:42.083

使用 PHP，放入`auto_append_file`文件`php.ini`或`.htaccess`文件可能是您要查找的内容。

链接：[php.net/manual/en/ini.core.php#ini.auto-append-file](http://php.net/manual/en/ini.core.php#ini.auto-append-file)

如果你无权访问`php.ini`你可以把

```
php_value auto_append_file "file_to_append.php" 
```

到一个`.htaccess`文件中。

但是请记住，这会将其附加在结束 HTML 标记之后，因此会使标记无效。

我只将它用于不输出任何内容的 PHP 脚本。

# windows-8 - 导航到列表视图时如何禁用默认选择

> ID：11388768
> 
> 赞同：1
> 
> 时间：2012-07-09T03:27:44.713
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我在一个场景中有两个列表视图（listview1 和 listview2，listview2 的内容取决于 listview1 上的选定项），当我导航到场景时，我希望选择 listview1 中的第一个项目并将详细信息显示在另一个列表视图中（ listview2) 但我不希望默认选择 listView2 中的任何项目。

我观察到的是 listView2 中的第一项也被选中，这导致为 listview2 触发 selectionchanged 事件（我只想在用户明确选择它时触发）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T14:04:21.853

无需解决方法。只需`IsSynchronizedWithCurrentItem="False"`在您的 ListView 中设置。这也适用于 GridView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:05:51.393

`selectionchanged`事件将被触发且无法停止。但它可以在后面的代码中绕过（使用标志）。

如果`ListView`绑定到`CollectionViewSource`，`CollectionViewSource`则将第一个项目设置为选中。

如果 ListView 绑定到常规`Collection`，则不会自动选择任何项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T04:04:39.403

这是因为您可能通过 XAML 设置了列表视图 1 和 2 的事件处理程序。如果您首先设置数据源和选定项，然后通过您的代码设置事件处理程序，我认为它运行良好。

# java - 为什么 DB2 对某些用户的 long 值会出错，而对其他用户则不会？

> ID：11388772
> 
> 赞同：0
> 
> 时间：2012-07-09T03:29:07.223
> 
> 标签：java, db2, openjpa

我正在使用一个 DB2 9.7 select 语句（通过 OpenJPA），它对我有用，但不适用于我的客户。它像是：

```
SELECT COUNT(t) FROM MyTable t WHERE t.type = :type 
```

`type`在`VARCHAR(4)`DB2 中

当类型设置为长度为 5 的字符串时，该语句对我有效（返回 0 计数），但在我的客户端运行它时会给出 SQL 异常。这里有什么区别？我想确保它对我来说也失败了，这样我将来就可以发现这些问题。

# javascript - Facebook：无需用户登录即可查询公共事件？

> ID：11388773
> 
> 赞同：2
> 
> 时间：2012-07-09T03:29:10.577
> 
> 标签：javascript, facebook, facebook-access-token

所以我对查询公共事件（例如获取开始时间）的新 FB 要求感到困惑，而且似乎我不是唯一一个，甚至 Facebook 自己的示例也不再有效......

无论如何，我希望能够查询一些公共事件并在我的网站上显示信息，而无需用户登录到 Facebook（因为信息是公开的，这应该是可能的，因为如果我直接进入 Facebook 页面注销 Facebook 时，我可以看到我想要查询的所有信息），但这似乎不再（安全地）在客户端执行。

为了使用图形 API 来查询事件，需要用户、应用程序或页面管理器的访问令牌。但是如果用户没有登录，那么显然我不能使用他们的访问令牌，并且发布我的应用程序或页面管理器访问令牌是灾难的秘诀，所以我如何在客户端查询公共事件数据而不需要用户登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:47:11.983

从[Facebook 事件 API](https://developers.facebook.com/docs/reference/api/event/)页面：

> 从 7 月 5 日开始，即使是公共活动也需要访问令牌。要阅读事件，您将需要以下条件之一：
> 
> 可以查看事件的用户的用户访问令牌 应用访问令牌（对于非公共事件，必须是创建事件的应用） 页面访问令牌（对于非公共事件，必须是创建事件的页面事件）

太糟糕了，看起来这个政策在一两个星期前刚刚修改过。：-/

# apache - Mac 上的 PHP 配置 - 不渲染

> ID：11388777
> 
> 赞同：2
> 
> 时间：2012-07-09T03:29:54.213
> 
> 标签：apache, php

由于某种原因，任何 php 片段都不会在我的浏览器中呈现。我知道它会被评估，因为它也不显示为文本。我做了以下事情：

1.  在 httpd.conf 中，我找到了 php5 lib 的加载模块行并取消了它的注释
2.  我在 /etc 目录中将 php.ini.default 重命名为 php.ini
3.  我重新启动了apache

那没有用，而且我似乎也无能为力。任何想法可能是什么问题？

我正在运行 Mac OS 10.6.8 (Leopard)。

**编辑我的 httpd 的 access_log 和 error_log 看起来也很干净。没有错误迹象。还尝试了不同的浏览器。

**第二次编辑如果我的文件扩展名为 php，页面会被渲染，但 html 中的任何嵌入 php 都不会渲染。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:38:33.037

听起来这可能是 mod_php 的问题。基本上，听起来 Apache 正在使用 PHP 解释器运行 .php 文件，但 mod_php 可能没有正确配置。

您可能想阅读以下内容：http: [//php.net/manual/en/configuration.changes.php](http://php.net/manual/en/configuration.changes.php)

# asp.net - 当网站的内容布局需要随时更改时，如何设计网站？

> ID：11388778
> 
> 赞同：0
> 
> 时间：2012-07-09T03:30:13.620
> 
> 标签：asp.net, architecture, 3-tier

我们的团队正在使用 ASP.NET 构建一个新网站。我们计划使用 3 层架构。问题是网页上显示的控件需要根据客户的要求随时更改，即添加一对标签/文本框，或者在客户需要时删除一对标签/下拉列表。所以布局需要灵活并允许轻松添加或删除控件，尽管它只显示一些简单的产品信息，如价格、折扣、税收等。

以前版本的网站将所有控件信息保存在一个数据库中，例如控件名称、控件类型（文本框、标签、下拉列表）、它属于哪个页面和面板等。您可以看到这对性能有很大影响，因为每次有对该页面的请求，它都需要从数据库中获取所有需要的控件并手动将它们添加到页面中，无论该请求是否是回发。

我们曾考虑将控件直接添加到 .aspx 页面，但在这种情况下，以后很难更改它们。我们还考虑将所有控件的信息保存在 XML 文件中，这可能会带来一点性能优势，但它仍然需要始终呈现控件。

所以这就是我们面临的问题，既要提高应用程序的性能，又要满足用户的需求。任何人都可以帮助我提供任何解决方案或想法吗？

PS：如果我说的不够清楚，你也可以提问。此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:21:08.257

现在这就是我所说的灵活网络应用程序。

> 网页上显示的控件需要随时更改

谁来改变控制？客户端？每次请求更改控件时，您不能只更新 .aspx 文件并将其发布到服务器吗？

但无论如何，这是一个有趣的问题。除了使用 XML 文件之外，实际上没有什么可以做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:03:44.087

[这对于User Controls](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-user-control-in-aspnet)来说听起来不错。如果您所做的只是切换子控件可见性，那么创建具有可切换可见性属性的用户控件应该可以满足您的需求。您仍然可以使用后端来切换可见性，但您只需要从数据库中提取是/否标志，而不是整个页面模式。

从架构的角度来看，用户控件非常棒，因为它们鼓励模块化、代码重用，并且非常适合版本控制（UsercontrolV1.cs、UserControlsV2.cs 等）。在变更请求需要逻辑更新，或者只是需要恢复到 x 次迭代之前存在的构建的情况下，版本控制的要点尤其重要。

# php - 如何使用 preg_replace 模式的一部分作为变量？

> ID：11388780
> 
> 赞同：0
> 
> 时间：2012-07-09T03:30:48.923
> 
> 标签：php, regex, variables, preg-replace

```
function anchor($text)
{
 return preg_replace('#\&gt;\&gt;([0-9]+)#','<span class=anchor><a href="#$1">>>$1</a></span>', $text);
} 
```

这段代码用于渲染页面锚。我需要使用

```
([0-9]+) 
```

部分作为变量来做一些数学运算来定义 href 标记的确切 url。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:00:28.073

请改用 preg_replace_callback。

在 php 5.3 + 中：

```
$matches = array();
$text = preg_replace_callback(
  $pattern,
  function($match) use (&$matches){
    $matches[] = $match[1];
    return '<span class=anchor><a href="#$1">'.$match[1].'</span>';
  }
); 
```

在 php <5.3 中：

```
global $matches;
$matches = array();
$text = preg_replace_callback(
  $pattern,
  create_function('$match','global $matches; $matches[] = $match[1]; return \'<span class=anchor><a href="#$1">\'.$match[1].\'</span>\';')
); 
```

# javascript - 如何在没有 JS 或 Jquery 的情况下使 HTML5 工作

> ID：11388782
> 
> 赞同：-2
> 
> 时间：2012-07-09T03:31:19.450
> 
> 标签：javascript, jquery, html, vimeo

我喜欢[Vimeo](https://vimeo.com)的设计，我正在研究他们是如何编写代码的。他们的新设计是用 HTML5 制作的，但没有 html5shiv.js。通常我使用：

```
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <style>
    .clear {
      zoom: 1;
      display: block;
    }
  </style>
<![endif]--> 
```

但在 Vimeo 中没有这样的东西。那么他们只是将这个 JS 代码导入到他们的主 JS 中吗？或者他们正在使用一些新方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:38:30.930

为了具体回答您的问题，他们使用的是 HTML5 shim，看起来他们的`global_combined.min.js`文件包含它，基本上您可以使用`document.createElement( 'nav' );`.

查看：[global_combined.min.js](http://a.vimeocdn.com/js_v6_opt/global_combined.min.js)并搜索`header`，这将带您到正确的行，您可以看到他们正在`foreach`对 HTML5 元素进行操作。

# ruby-on-rails - 我的抓取“堆栈”应该如何处理 404 错误？

> ID：11388783
> 
> 赞同：16
> 
> 时间：2012-07-09T03:31:29.377
> 
> 标签：ruby-on-rails, ruby, exception, open-uri

我有一个 rake 任务，负责对数百万个 URL 进行批处理。因为这个过程需要很长时间，我有时会发现我尝试处理的 URL 不再有效—— 404、站点关闭等等。

当我最初写这篇文章时，基本上只有一个站点在处理过程中会不断关闭，所以我的解决方案是使用`open-uri`，拯救任何产生的异常，稍等片刻，然后重试。

当数据集较小时，这工作得很好，但现在时间过去了，我发现 URL 不再存在并产生 404。

使用 404 的情况，当发生这种情况时，我的脚本只是坐在那里并无限循环——显然很糟糕。

我应该如何处理页面未成功加载的情况，更重要的是这如何适合我构建的“堆栈”？

我对这个和 Rails 很陌生，所以欢迎任何关于我在这个设计中可能出错的地方的意见！

这是一些显示我所拥有的匿名代码：

调用 MyHelperModule 的 rake 任务：

```
# lib/tasks/my_app_tasks.rake
namespace :my_app do
  desc "Batch processes some stuff @ a later time."
    task :process_the_batch => :environment do
      # The dataset being processed
      # is millions of rows so this is a big job 
      # and should be done in batches!
      MyModel.where(some_thing: nil).find_in_batches do |my_models|
        MyHelperModule.do_the_process my_models: my_models
      end
    end
  end
end 
```

MyHelperModule 接受`my_models`ActiveRecord 并做进一步的事情。它调用`SomeClass`：

```
# lib/my_helper_module.rb
module MyHelperModule
  def self.do_the_process(args = {})
    my_models = args[:my_models]

    # Parallel.each(my_models, :in_processes => 5) do |my_model|
    my_models.each do |my_model|
      # Reconnect to prevent errors with Postgres
      ActiveRecord::Base.connection.reconnect!
      # Do some active record stuff

      some_var = SomeClass.new(my_model.id)

      # Do something super interesting,
      # fun,
      # AND sexy with my_model
    end
  end
end 
```

`SomeClass`将通过以下方式访问网络`WebpageHelper`并处理一个页面：

```
# lib/some_class.rb
require_relative 'webpage_helper'
class SomeClass
  attr_accessor :some_data

  def initialize(arg)
    doc = WebpageHelper.get_doc("http://somesite.com/#{arg}")
      # do more stuff
  end
end 
```

`WebpageHelper`是捕获异常并在 404 的情况下启动无限循环的地方：

```
# lib/webpage_helper.rb
require 'nokogiri'
require 'open-uri'

class WebpageHelper
  def self.get_doc(url)
    begin
      page_content = open(url).read
      # do more stuff
    rescue Exception => ex
      puts "Failed at #{Time.now}"
      puts "Error: #{ex}"
      puts "URL: " + url
      puts "Retrying... Attempt #: #{attempts.to_s}"
      attempts = attempts + 1
      sleep(10)
      retry
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T13:31:30.890

### TL;博士

使用带外错误处理和不同的概念抓取模型来加速操作。

### 例外不适用于常见情况

还有许多其他答案可以解决如何为您的用例处理异常。我采取了不同的方法，说处理异常从根本上来说是错误的方法，原因有很多。

1.  在他的书*Exceptional Ruby*中，Avdi Grimm 提供了一些基准，显示异常的性能比使用其他编码技术（如提前返回）慢约 156%。

2.  在*The Pragmatic Programmer: From Journeyman to Master*中，作者指出“[E] 异常应该为意外事件保留。” 在您的情况下，404 错误是不可取的，但一点也不意外——事实上，处理 404 错误是一个核心考虑因素！

简而言之，您需要一种不同的方法。最好，替代方法应提供带外错误处理并防止您的进程在重试时阻塞。

### 一种选择：更快、更原子的过程

您在这里有很多选择，但我要推荐的一个是将 404 状态代码作为正常结果处理。这允许您“快速失败”，但也允许您稍后重试页面或从队列中删除 URL。

考虑这个示例模式：

```
ActiveRecord::Schema.define(:version => 20120718124422) do
  create_table "webcrawls", :force => true do |t|
    t.text     "raw_html"
    t.integer  "retries"
    t.integer  "status_code"
    t.text     "parsed_data"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end
end 
```

这里的想法是，您只需将*整个*抓取视为一个原子过程。例如：

*   *你拿到页面了吗？*

    太好了，存储原始页面和成功状态代码。您甚至可以稍后解析原始 HTML，以便尽快完成您的抓取。

*   *你收到404了吗？*

    好的，存储错误页面和状态码。快速前进！

当您的过程完成对 URL 的抓取后，您可以使用 ActiveRecord 查找来查找最近返回 404 状态的所有 URL，以便您可以采取适当的措施。也许您想重试该页面，记录一条消息，或者只是从要抓取的 URL 列表中删除该 URL——“适当的操作”取决于您。

通过跟踪您的重试次数，您甚至可以区分暂时性错误和更永久的错误。这允许您为不同的操作设置阈值，具体取决于给定 URL 的抓取失败频率。

这种方法还具有利用数据库来管理并发写入和在进程之间共享结果的额外好处。这将允许您在多个系统或进程之间分配工作（可能使用消息队列或分块数据文件）。

### 最后的想法：扩大规模和扩大规模

在初始抓取期间花费更少的时间重试或错误处理应该会显着加快您的流程。但是，有些任务对于单机或单进程方法来说太大了。如果您的流程加速仍然不足以满足您的需求，您可能需要考虑使用以下一项或多项的线性度较低的方法：

*   分叉后台进程。
*   使用[dRuby](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/drb/rdoc/DRb.html)在多个进程或机器之间分配工作。
*   [通过使用GNU 并行](http://www.gnu.org/software/parallel/)生成多个外部进程来最大化核心使用率。
*   其他不是单一的顺序过程的东西。

优化应用程序逻辑应该足以满足常见情况，但如果不是，则可以扩展到更多进程或扩展到更多服务器。横向扩展肯定会做更多的工作，但也会扩展您可用的处理选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T16:59:59.210

`Curb`有一种更简单的方法可以做到这一点，并且可以成为更好（更快）的选择，而不是`open-uri`.

错误遏制报告（您可以从中拯救并做一些事情：

[http://curb.rubyforge.org/classes/Curl/Err.html](http://curb.rubyforge.org/classes/Curl/Err.html)

遏制宝石： [https ://github.com/taf2/curb](https://github.com/taf2/curb)

示例代码：

```
def browse(url)
  c = Curl::Easy.new(url)
  begin
    c.connect_timeout = 3
    c.perform
    return c.body_str
  rescue Curl::Err::NotFoundError
    handle_not_found_error(url)
  end
end

def handle_not_found_error(url)
  puts "This is a 404!"
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T04:39:19.997

你可以提高 404 的：

```
rescue Exception => ex
  raise ex if ex.message['404']
  # retry for non-404s
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T04:47:23.697

我实际上有一个 rake 任务，它做了一些非常相似的事情。这是我处理 404 的要点，你可以很容易地应用它。

基本上你想要做的是使用下面的代码作为过滤器并创建一个日志文件来存储你的错误。因此，在您抓取网站并对其进行处理之前，您首先要执行以下操作：

因此，在您的文件中创建/实例化一个日志文件：

```
@logfile = File.open("404_log_#{Time.now.strftime("%m/%d/%Y")}.txt","w")
# #{Time.now.strftime("%m/%d/%Y")} Just includes the date into the log in case you want
# to run diffs on your log files. 
```

然后将您的 WebpageHelper 类更改为如下所示：

```
class WebpageHelper
  def self.get_doc(url)
    response = Net::HTTP.get_response(URI.parse(url))
    if (response.code.to_i == 404) notify_me(url)
    else
    page_content = open(url).read
    # do more stuff
    end
  end
end 
```

这样做是对页面执行 ping 操作以获取响应代码。我包含的 if 语句是检查响应代码是否为 404，如果它运行 notify_me 方法，否则像往常一样运行您的命令。我只是随意创建了那个 notify_me 方法作为例子。在我的系统上，我将它写入 txt 文件，它会在完成后通过电子邮件发送给我。您可以使用类似的方法查看其他响应代码。

通用日志记录方法：

```
def notify_me(url)
  puts "Failed at #{Time.now}"
  puts "URL: " + url
  @logfile.puts("There was a 404 error for the site #{url} at #{Time.now}.")
end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-11T16:18:27.243

这一切都取决于你想用 404 做什么。

让我们假设您只想吞下它们。pguardiario 的部分回应是一个好的开始：您可以引发错误，然后重试几次......

```
# lib/webpage_helper.rb
require 'nokogiri'
require 'open-uri'

class WebpageHelper
  def self.get_doc(url)
    attempt_number = 0
    begin
      attempt_number = attempt_number + 1
      page_content = open(url).read
      # do more stuff
    rescue Exception => ex
      puts "Failed at #{Time.now}"
      puts "Error: #{ex}"
      puts "URL: " + url
      puts "Retrying... Attempt #: #{attempts.to_s}"
      sleep(10)
      retry if attempt_number < 10 # Try ten times.
    end
  end
end 
```

如果你遵循这个模式，它只会默默地失败。什么都不会发生，它会在尝试十次后继续前进。我通常会认为这是一个糟糕的计划（tm）。与其默默地失败，我会在救援条款中使用类似的东西：

```
 rescue Exception => ex
      if attempt_number < 10 # Try ten times.
        retry 
      else
        raise "Unable to contact #{url} after ten tries."
      end
    end 
```

然后在 MyHelperModule#do_the_process 中抛出类似的东西（你必须更新你的数据库以获得错误和 error_message 列）：

```
 my_models.each do |my_model|
      # ... cut ...

      begin
        some_var = SomeClass.new(my_model.id)
      rescue Exception => e
        my_model.update_attributes(errors: true, error_message: e.message)
        next
      end

      # ... cut ...
    end 
```

这可能是使用您目前拥有的最简单和最优雅的方式。也就是说，如果你在一个大规模的 rake 任务中处理这么多的请求，那不是很优雅。如果出现问题，您无法重新启动它，它会长时间占用系统上的单个进程等。如果最终出现任何内存泄漏（或无限循环！），您会发现自己处于一个不能只说“继续”。您可能应该使用某种排队系统，例如 Resque 或 Sidekiq，或 Delayed Job（尽管听起来您最终排队的项目比 Delayed Job 乐意处理的要多）。如果您正在寻找一种更有说服力的方法，我建议您深入研究这些方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-12T12:43:36.410

在从抓取创建新的 SomeClass 时，我不会使用总是返回对象的新实例的初始化，而是**使用类方法来创建实例**。除了 nokogiri 抛出的异常之外，我在这里没有使用异常，因为听起来没有其他东西*应该*进一步冒泡，因为您只希望记录这些异常，否则会被忽略。你提到记录异常——你只是记录标准输出的内容吗？我会像你一样回答...

```
 # lib/my_helper_module.rb
module MyHelperModule
  def self.do_the_process(args = {})
    my_models = args[:my_models]

    # Parallel.each(my_models, :in_processes => 5) do |my_model|
    my_models.each do |my_model|
      # Reconnect to prevent errors with Postgres
      ActiveRecord::Base.connection.reconnect!

      some_object = SomeClass.create_from_scrape(my_model.id)

    if some_object
      # Do something super interesting if you were able to get a scraping
      # otherwise nothing happens (except it is noted in our logging elsewhere)
    end

  end
end 
```

你的SomeClass：

```
# lib/some_class.rb
require_relative 'webpage_helper'
class SomeClass
  attr_accessor :some_data

  def initialize(doc)
    @doc = doc
  end

  # could shorten this, but you get the idea...
  def self.create_from_scrape(arg)
    doc = WebpageHelper.get_doc("http://somesite.com/#{arg}")
    if doc
      return SomeClass.new(doc)
    else
      return nil
    end      
  end

end 
```

您的网页助手：

```
# lib/webpage_helper.rb
require 'nokogiri'
require 'open-uri'

class WebpageHelper
  def self.get_doc(url)
    attempts = 0 # define attempts first in non-block local scope before using it
    begin
      page_content = open(url).read
      # do more stuff
    rescue Exception => ex
      attempts += 1
      puts "Failed at #{Time.now}"
      puts "Error: #{ex}"
      puts "URL: " + url
      if attempts < 3 
        puts "Retrying... Attempt #: #{attempts.to_s}"
        sleep(10)
        retry
      else
        return nil
      end
    end

  end
end 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-13T19:19:14.347

关于您遇到的问题，您可以执行以下操作：

```
 class WebpageHelper
  def self.get_doc(url)
    retried = false
    begin
      page_content = open(url).read
      # do more stuff
    rescue OpenURI::HTTPError => ex
      unless ex.io.status.first.to_i == 404
        log_error ex.message
        sleep(10)
        unless retried
          retried = true
          retry
        end
      end
    # FIXME: needs some refactoring
    rescue Exception => ex
      puts "Failed at #{Time.now}"
      puts "Error: #{ex}"
      puts "URL: " + url
      puts "Retrying... Attempt #: #{attempts.to_s}"
      attempts = attempts + 1
      sleep(10)
      retry
    end
  end
end 

```

但我会重写整个事情，以便与 Typhoeus 进行并行处理：

[https://github.com/typhoeus/typhoeus](https://github.com/typhoeus/typhoeus)

我将分配一个回调块来处理返回的数据，从而将页面的获取和处理解耦。

类似的东西：

```
 def on_complete(response)
end

def on_failure(response)
end

def run
  hydra = Typhoeus::Hydra.new
  reqs = urls.collect do |url|
    Typhoeus::Request.new(url).tap { |req|
      req.on_complete = method(:on_complete).to_proc }
      hydra.queue(req)
    }
  end
  hydra.run
  # do something with all requests after all requests were performed, if needed
end 

```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-18T05:00:49.860

我认为每个人对这个问题的评论都是正确的。这个页面上有很多很好的信息。这是我收集这个非常丰厚的赏金的尝试。话虽如此，对所有答案都 +1。

如果您只关心使用 OpenURI 的 404，您可以只处理这些类型的异常

```
# lib/webpage_helper.rb
rescue OpenURI::HTTPError => ex
  # handle OpenURI HTTP Error!
rescue Exception => e
  # similar to the original
  case e.message
      when /404/ then puts '404!'
      when /500/ then puts '500!'
      # etc ... 
  end
end 
```

如果您想要更多，您可以对每种错误类型进行不同的执行处理。

```
# lib/webpage_helper.rb
rescue OpenURI::HTTPError => ex
  # do OpenURI HTTP ERRORS
rescue Exception::SyntaxError => ex
  # do Syntax Errors
rescue Exception => ex
  # do what we were doing before 
```

我也喜欢其他帖子中关于尝试次数的内容。确保它不是无限循环。

我认为经过多次尝试后，rails 要做的事情是记录、排队和/或发送电子邮件。

要登录，您可以使用

```
webpage_logger = Log4r::Logger.new("webpage_helper_logger")
# somewhere later
# ie 404
  case e.message
  when /404/ 
    then 
      webpage_logger.debug "debug level error #{attempts.to_s}"
      webpage_logger.info "info level error #{attempts.to_s}"
      webpage_logger.fatal "fatal level error #{attempts.to_s}" 
```

排队的方式有很多种。我认为最好的一些是faye和resque。这是两者的链接：http: [//faye.jcoglan.com/](http://faye.jcoglan.com/) https://github.com/defunkt/resque/

队列就像一条线一样工作。信不信由你，英国人称之为“队列”（你知道的越多）。因此，使用排队服务器，您可以排列许多请求，当您尝试发送请求的服务器返回时，您可以在队列中使用您的请求锤击该服务器。从而迫使他们的服务器再次停机，但希望随着时间的推移，他们会升级他们的机器，因为他们一直在崩溃。

最后是电子邮件，rails 也可以救援（不是 resque）......这是 ActionMailer 上 Rails 指南的链接：http: [//guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)

你可以有这样的邮件

```
class SomeClassMailer <  ActionMailer::Base
  default :from => "notifications@example.com"
def self.mail(*args)
 ...
# then later 
rescue Exception => e
  case e.message
    when /404/ && attempts == 3
      SomeClassMailer.mail(:to => "broken@example.com", :subject => "Failure ! #{attempts}") 
```

# postgresql - 如何从 PostgreSQL 中删除模板数据库？

> ID：11388786
> 
> 赞同：57
> 
> 时间：2012-07-09T03:31:43.780
> 
> 标签：postgresql, postgresql-9.1, database-template

```
postgres=# DROP DATABASE template_postgis;
ERROR:  cannot drop a template database 
```

[http://www.postgresql.org/docs/9.1/static/manage-ag-templatedbs.html](http://www.postgresql.org/docs/9.1/static/manage-ag-templatedbs.html)让它看起来像如果我设置`template_postgis.datistemplate = false`，我就可以删除它，但我不知道如何设置.

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-09T03:33:39.270

```
postgres=# UPDATE pg_database SET datistemplate='false' WHERE datname='template_postgis';
UPDATE 1
postgres=# DROP DATABASE template_postgis;
DROP DATABASE
postgres=# 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-08-09T20:05:36.937

您可以使用alter database 命令。比破坏元数据更简单、更安全。

```
postgres=# create database tempDB is_template true;
CREATE DATABASE
postgres=# drop database tempDB;
ERROR:  cannot drop a template database
postgres=# alter database tempDB is_template false;
ALTER DATABASE
postgres=# drop database tempDB;
DROP DATABASE
postgres=# 
```

[文档](https://www.postgresql.org/docs/current/static/sql-alterdatabase.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-08-29T11:20:55.517

```
update pg_database set datistemplate=false where datname='template0';
update pg_database set datistemplate=false where datname='template1';

....

Creating script to analyze new cluster                      ok
Creating script to delete old cluster                       ok
Checking for hash indexes                                   ok

Upgrade Complete
---------------- 
```

# ssl - 关于使用 ssl 的 apache activemq 的性能

> ID：11388792
> 
> 赞同：1
> 
> 时间：2012-07-09T03:32:29.313
> 
> 标签：ssl, activemq

默认情况下，activemq 使用 tcp 协议。但是现在，我将其更改为使用 ssl。

如果我在一台机器上部署发布者和服务器，则速度没有区别。但是在我将它们部署在不同的机器上之后，使用 ssl 比使用 tcp 慢得多。这是正常的吗？如果没有，我的代码可能有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:46:43.893

取决于您的应用程序运行速度有多慢。

如果您处理大量数据，SSL 将花费相当多的 CPU 周期来加密（以及解密）数据。是较慢的 ActiveMQ 服务器还是客户端。对系统设置进行概要分析，以大致了解在哪里可以找到瓶颈。

另一种可能性是频繁握手。假设您的客户端代码（您可以发布吗？）通过为每条消息打开连接来发送消息，与普通 tcp 相比，发送消息的延迟可能会受到 SSL 握手时间增加的影响。

更新：

加速将是重用您的连接。在您的案例中发送的每条消息都必须进行 SSL 握手，这涉及 cpu 昂贵的非对称加密和比普通 TCP 更多的 tcp 往返。使用activemq提供的池化连接工厂很容易做到。此示例不会对您的代码进行太多更改：

```
public class MySender{
 private static ConnectionFactory factory = new org.apache.activemq.pool.PooledConnectionFactory("ssl://192.168.0.111:61616");
 public void send(){
  Connection connection = factory.createConnection();
  Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
  Topic topic = session.createTopic(newDataEvent.getDataType().getType());
  MessageProducer producer = session.createProducer(topic);
  TextMessage message = session.createTextMessage();
  message.setText(xstream.toXML(newDataEvent));
  producer.send(message);
  session.close();
  connection.close(); 
 }
} 
```

# sql - 如何提高 SAS Enterprise Guide 4 的性能

> ID：11388795
> 
> 赞同：0
> 
> 时间：2012-07-09T03:32:58.847
> 
> 标签：sql, performance, sas

我有一张包含近 200,000,000 条记录的表。查询需要很长时间。

关于提高性能的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:17:12.290

考虑在该表中的 id 类型列上添加索引。

顺便说一句，这与 SAS EG 性能无关，而是与底层 BASE SAS 引擎有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:15:20.800

除了索引之外，您还应该考虑：

1.  压缩。构建数据集时，请确保使用该`compress=yes`选项（如果尚未使用）。这将缩小磁盘上表的大小，从而减少磁盘 I/O（查询最慢的部分）。
2.  检查列长度 - 确保您没有使用 255 美元的字段长度来存储仅需要 20 美元等长度的内容......
3.  使用 SAS SPDE（可扩展性能数据引擎）。它允许您将 SAS 数据集划分为多个文件，并可选择将它们分布在不同的磁盘上。一旦您的 SAS 数据集达到一定大小，您就可以看到性能改进。每当数据集增长 > 10G 时，我通常倾向于使用 SPD 库名称。不需要额外的 SAS 模块 - 这是作为 Base SAS 的一部分启用的。

# .net - SortedList DataGridView 刷新？

> ID：11388800
> 
> 赞同：1
> 
> 时间：2012-07-09T03:34:19.390
> 
> 标签：.net, data-binding, datagridview, bindingsource, sortedlist

我有一个绑定到数据网格视图的列出的排序列表。我希望将项目添加到排序列表以显示在 datagridview 中。我正在使用绑定源。

我能够找到一个说明我必须使用绑定列表来刷新的参考。

在走另一条路线之前，我想确保这是不可能的。我尝试在 datagridview 上调用刷新，但没有看到新项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:41:28.667

我发现如果在添加时创建一个新的绑定源，那么我会看到这些更新。关键是创建一个新的绑定源。

```
BindingSource bs = new BindingSource();
bs.DataSource = myCollection.Values;
dataGridView1.DataSource = bs; 
```

# java - 哈希表复制导致空指针

> ID：11388802
> 
> 赞同：1
> 
> 时间：2012-07-09T03:34:34.057
> 
> 标签：java, collections, nullpointerexception, hashtable

我在尝试复制哈希表然后添加一些值时遇到问题。我有两个不同的哈希表（用于调试目的）。我声明的第一个哈希表并将其设置为等于另一个哈希表。

```
Hashtable model1 = model; 
```

第二个哈希表是用原始哈希表声明和初始化的，原始哈希表应该将每个元素和键复制到新的哈希表中。

```
Hashtable model2 = new Hashtable(model); 
```

但是，当我尝试从 model2 取回一个元素时，它总是会抛出 NullPointerException。但是，第一个实例（model1）没有抛出任何东西（尽管它没有给我想要的结果，因为它添加了对模型实例的引用）。任何帮助或建议将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:48:58.930

```
boolean result = (Boolean)model.get(this.uniqueSymbol); 
```

如果您检索的值为 null，那么您将获得一个 null`Boolean`对象，但 JVM 正尝试将其自动拆箱为一个原语，但由于该值为 null，您将获得一个空指针异常。您应该验证您尝试获取的值实际上不为空。在没有自动拆箱行为的情况下尝试一下，看看会发生什么。

```
Boolean result = (Boolean)model.get(this.uniqueSymbol); 
```

来自[Hashtable 的 JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html#get%28java.lang.Object%29)：返回指定键映射到的值，如果此映射不包含该键的映射，则返回**null 。**

# actionscript-3 - 搜索和替换变量词

> ID：11388803
> 
> 赞同：1
> 
> 时间：2012-07-09T03:34:42.030
> 
> 标签：actionscript-3, flash, search, replace

我正在寻找一个程序，它可以每次创建一个带有不同变量字符串的文本块。

我试过用某些语言来做这件事，但我宁愿有一个可以做到这一点的文本编辑器。

示例：选择一个单词列表来替换一段文本中的一个变量，然后为每个单词重新打印该段文本。

我喜欢冰淇淋。

冰淇淋很棒。

不要吃太多冰淇淋。

* * *

我喜欢香蕉。

香蕉很棒。

香蕉不要吃太多。

* * *

我喜欢苹果。

苹果很棒。

苹果不要吃太多。

* * *

我尝试用编程语言（AS3）来做这件事，但它不太支持多行字符串。

我正在寻找的是可以执行此操作的文本编辑器程序（适用于 Windows），或者可以执行此操作的 AS3 代码片段。（它支持多行，无需手动将 \n 放在任何地方。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:46:15.170

不确定对多行问题有什么建议 - 就是这样，您必须添加`\n`或`<br />`（在 HTML 文本框中）。

至于替换，这是一个简单的过程。只需设置可以在文本中替换的某种类型的标记，例如

```
var str:String = "I like {}.\n{} is great.\nDon't eat too much {}."; 
```

然后您可以执行以下任一操作：

```
str.split("{}").join("Banana"); 
```

或者：

```
str.replace(/\{\}/g, "Banana"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:36:25.580

String 类具有三种处理模式和字符串的便捷方法。这三种方法也是区分大小写的，意思是搜索时区分大小写。

1.  匹配（）
2.  搜索（）
3.  代替（）

    ```
    var string1:String = "Hello World!";
    var subString:String = "Hell";

    trace(string1.match(subString));
    trace(string1.search(subString));
    trace(string1.replace(subString, "Jell")); 
    ```

**match()**方法如果找到则显示子字符串，如果未找到则显示 null。**search()**方法如果找到 substing将给出零值 ( 0 )，如果没有找到则给出负一 (-1) 值。如果找到子字符串，**replace()**方法将用新的子字符串替换目标子字符串。您也可以将值设为无，以简单地删除字符串中不需要的部分。

我们可以像这样运行条件：

```
 var string1:String = "Hello World!";
    var subString:String = "Hell";

    if (string1.search(subString) == 0) {
        trace(subString + " is in the string, I can now replace it or remove it.");
    } else {
        trace(subString + " is not in this string.");
    } 
```

# vim - vim 中 wxpython 函数的代码完成与全能完成

> ID：11388804
> 
> 赞同：1
> 
> 时间：2012-07-09T03:34:49.750
> 
> 标签：vim, wxpython, omnicomplete

我对常规 python 函数有完整的完成工作，但我如何让它也适用于 wxpython 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:07:43.743

你试过 vim.org 吗？它有一个[Pydiction 项目](http://www.vim.org/scripts/script.php?script_id=850)，其中包括 wxPython 自动完成以及其他几个第 3 方 Python 库。

# java - Swing：JScrollPane 导致渲染问题

> ID：11388810
> 
> 赞同：0
> 
> 时间：2012-07-09T03:35:47.937
> 
> 标签：java, swing, jscrollpane

有时（并非总是）在滚动我的 JScrollPane 的栏时，某些组件（通常是 JLabels 之类的文本组件）不会正确地重新绘制，它们最终只会被部分呈现。

我不知道这是为什么。我尝试在 AdjustmentListener 中调用paint()，但这似乎没有帮助。

有任何想法吗？

编辑：组件的初始化

```
 panel = new JPanel();
    ImageIcon img = new ImageIcon("editor.png");
    setIconImage(img.getImage());
    initComponents();

    final JScrollPane pane = new JScrollPane(panel);
    this.setContentPane(pane);
    //pane.setLayout(new ScrollPaneLayout());
    //pane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    Dimension dim = panel.getSize();
    dim.height = dim.height - 100;
    pane.setSize(dim);
    this.setSize(dim);
    AdjustmentListener hListener = new AdjustmentListener() {
        @Override
        public void adjustmentValueChanged(AdjustmentEvent e) {
            repaint();
            for(Component c : panel.getComponents())
                c.repaint();
            for(Component c : pane.getComponents())
                c.repaint();
            panel.repaint();
            panel.revalidate();
            pane.repaint();
            pane.revalidate();
        }
    };
    pane.getVerticalScrollBar().addAdjustmentListener(hListener);
    panel.setVisible(true);
    pane.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T04:21:00.830

违反任何这些基本原则都可能导致渲染伪影。

*   验证 Swing GUI 对象是否*仅*在[事件分派线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构造和操作。

*   确保您尊重[opacity](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#props)属性。特别`JLabel`是，默认情况下*不是*不透明的。

*   “Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`。”—<a href="http://java.sun.com/products/jfc/tsc/articles/painting/index.html#callbacks" rel="nofollow noreferrer">*绘画在 AWT 和 Swing：绘制方法*中。

附录：结合这些格言，这个相关[示例](https://stackoverflow.com/a/6118633/230513)`JLabel`在没有工件的情况下滚动了数千个闪烁的实例。

# android - 如何膨胀自定义视图类？

> ID：11388813
> 
> 赞同：5
> 
> 时间：2012-07-09T03:36:15.457
> 
> 标签：android, android-layout, android-custom-view, android-inflate

我有一个扩展类`view`，它定义了一个自定义绘图（一个电阻器）。我想单击一个按钮并将其添加`view`到`main layout`. 这样我就可以看到电阻，如果我再次点击它会添加另一个电阻等等。但我不知道解决这个问题的最佳方法。我看过很多关于 的问题`layoutinflater`，但没有一个会夸大自定义视图类（也许我正在寻找错误的东西），始终是一个`xml`文件。 **所以我的问题是：如何`ResistorViews`向我的布局添加多个，以便用户可以与它们交互（移动、删除、突出显示等）？**

这是我尝试过的：

活动课：

```
public class CircuitSolverActivity extends Activity {       

@Override    
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button bAddResistor = (Button) findViewById(R.id.bAdd);        
    final LinearLayout mLayout = (LinearLayout)findViewById(R.layout.main);
    final ResistorView mResistor = new ResistorView(this, 100, 100);
    bAddResistor.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {               

            mLayout.addView(mResistor);                 

        }
    });
  }    

} 
```

电阻视图类：

```
public class ResistorView extends View{

    private Path mSymbol;
    private Paint mPaint;

    int mX, mY;

    //...Override Constructors...    
    public ResistorView(Context context, AttributeSet attrs) {
        super(context, attrs);        
        init();
    }

    public ResistorView(Context context, int x, int y){
        super(context);     
        mX = x;
        mY = y;
        init();
    }

    private void init() {

        mSymbol = new Path();
        mPaint = new Paint();
        mPaint.setAntiAlias(true);      
        mPaint.setStrokeWidth(2);
        mPaint.setColor(-7829368);  

        mPaint.setStyle(Paint.Style.STROKE);       

        mSymbol.moveTo(0.0F, 0.0F);
        mSymbol.lineTo(0.0F, 50.0F);
        mSymbol.lineTo(16.666666F, 58.333332F);
        mSymbol.lineTo(-16.666666F, 75.0F);
        mSymbol.lineTo(16.666666F, 91.666664F);
        mSymbol.lineTo(-16.666666F, 108.33333F);
        mSymbol.lineTo(16.666666F, 124.99999F);
        mSymbol.lineTo(-16.666666F, 141.66666F);
        mSymbol.lineTo(0.0F, 150.0F);
        mSymbol.lineTo(0.0F, 200.0F);
        mSymbol.offset(mX, mY);

    }

    @Override
    protected void onDraw(Canvas canvas) {

    super.onDraw(canvas);
    canvas.drawPath(mSymbol, mPaint);       
  }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"        
    android:orientation="vertical"
    android:id="@+id/main">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/bAdd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add RES" />

</LinearLayout> 
```

谢谢。

**编辑**：已**解决****再次感谢您的帮助。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T03:55:49.313

膨胀（就 Android 视图而言）仅限于 XML。如果您在代码中动态创建和添加视图对象，那么这并没有膨胀。您现在在代码中所做的非常接近。唯一的问题是您将视图实例化一次，而听起来您每次单击时都想添加一个新视图。尝试将实例化移动到点击处理程序中：

```
public class CircuitSolverActivity extends Activity {       

@Override    
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button bAddResistor = (Button) findViewById(R.id.bAdd);        
    final LinearLayout mLayout = (LinearLayout)findViewById(R.id.main);
    bAddResistor.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {               
            final ResistorView mResistor = new ResistorView(CircuitSolverActivity.this, 100, 100);
            mLayout.addView(mResistor);                 
        }
    });
  }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T04:10:38.323

将上下文保存为私有实例变量，就像在活动的构造函数中一样`private Context context;` 初始化上下文。`context=this;`在 onclick 回调方法中使用上下文变量添加自定义视图

```
bAddResistor.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {               
     final ResistorView resistor = new ResistorView(context, 100, 100);
     mLayout.addView(resistor);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T04:46:48.477

您可以通过添加其名称来引用外部类的“this”。假设您有一个类 A，在其中定义了一个类 B。在 B 中，“this”指的是 B，但您也可以键入“A.this”并获取 A 的 this。

希望这可以帮助。

沙查尔

# string - 什么样的编码器编码这样的字符串？

> ID：11388822
> 
> 赞同：0
> 
> 时间：2012-07-09T03:37:39.223
> 
> 标签：string, encode

我有一个关于编码/解码字符串的问题。

嗯，有一个网页，我用简单的 php POST 表单发送一些数据。当我打开 Chrome 开发人员工具栏 - > 网络时，在“表单数据”中，所有参数都正常显示，除了这个“uid”，它以某种方式编码（**%25%DC%BE%60%A0W%94M**）。

![在此处输入图像描述](../Images/4f14bf6156fe60f9dbb8d7872cbe9924.png)

当我点击“查看 URL 编码”时，它向我显示了这个“ **%2525%25DC%25BE%2560%25A0W%2594M** ”，我尝试了[http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)等在线工具来获取此编码参数的人类可读字符串，但没有运气。

谁能给我解释一下，我怎样才能得到这个参数的原始值？未编码，以人类可读的格式？

非常感谢 ： ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:46:00.677

这个解码器效果更好：

[http://www.opinionatedgeek.com/dotnet/tools/urlencode/Decode.aspx/](http://www.opinionatedgeek.com/dotnet/tools/urlencode/Decode.aspx/)

`%25`你看到的是被编码的实际百分比`%`字符

[http://en.wikipedia.org/wiki/Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)

> 百分比编码，也称为 URL 编码，是一种在特定情况下对统一资源标识符 (URI) 中的信息进行编码的机制。
> 
> ```
> ... 
> ```
> 
> 它还用于准备“application/x-www-form-urlencoded”媒体类型的数据，通常用于在HTTP请求中提交HTML表单数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:59:32.350

如果您在使用在线解码器时遇到问题，并且（将其视为相对较短的字符串）为什么不手动尝试一下呢？

[http://www.degraeve.com/reference/urlencoding.php](http://www.degraeve.com/reference/urlencoding.php)

该表将字符映射到它们的 URL 编码等效项，只需执行`Ctrl+F`% 编码字符并自己解码。

一些字符看起来很奇怪，因为它们不是英文字符。`%DC`是`Ü`例如。您尝试的编码器可能无法识别非英文字符

# xml - XSLT - 用于组合两个函数的内连接类型命令

> ID：11388823
> 
> 赞同：3
> 
> 时间：2012-07-09T03:37:42.977
> 
> 标签：xml, xslt

我有两个输出 XML 数据的函数。理想情况下，我想将每个函数的输出组合成一个变量来解析数据。

在 SQL 术语中，每个函数都可以通过属性 PageId... 通过内部连接连接在一起，但在 XSLT 中不允许连接（或者至少据我所知）。

关于组合这些功能的最干净/最简单的方法有什么建议吗？我调用的函数是内置在 cms 中的，无法编辑。

更多信息：

第一个功能是站点地图。它列出了网站的网页 ID 及其级别。

第二个函数将我需要的网页 ID 及其元数据标签与站点地图结合起来。

我考虑为第二个函数 Page Ids 创建变量，但是带有元数据标签的页面数量发生了变化，我不相信这些变量支持动态名称。

如果我不够清楚，我很抱歉，因为 xslt 对我来说是新的。如果需要更多信息，请告诉我。

编辑：添加代码示例

```
<in:inputs xmlns:in="http://www.composite.net/ns/transformation/input/1.0">
  <in:result name="SitemapXml">
    <Page Id="a0a47ce1-6eba-4d29-a7a3-3749c768c7e7" isopen="true" xmlns="">
      <Page Id="a3055286-0e90-4b04-99dd-fb1a61dde0bf" isopen='true' xmlns="">
        <Page Id="da675b13-d4d3-42ab-acc1-82e2a5408100" isopen='true' iscurrent='true' Depth="2"/>
      </Page>
    </Page>
  </in:result>
  <in:result name="GetisrootXml">
    <isroot PageId="a0a47ce1-6eba-4d29-a7a3-3749c768c7e7" Id="f8d4eea4-7070-4bc3-a804-e106697ffaa9" isroot="true" xmlns=""/>
    <isroot PageId="f8e4adbc-2758-42d6-bc40-0192ba0107a6" Id="db62e132-3f3b-493f-917a-9e090f887f13" isroot="false" xmlns=""/>
  </in:result>
</in:inputs> 
```

我想要返回的内容：

```
<in:inputs xmlns:in="http://www.composite.net/ns/transformation/input/1.0">
  <in:result name="SitemapXml">
    <Page Id="a0a47ce1-6eba-4d29-a7a3-3749c768c7e7" isopen="true" xmlns="" isroot='true'>
    </Page>
    <Page Id="a3055286-0e90-4b04-99dd-fb1a61dde0bf" isopen='true' xmlns="">
        <Page Id="da675b13-d4d3-42ab-acc1-82e2a5408100" isopen='true' iscurrent='true' Depth="2"/>
  </in:result>
</in:inputs> 
```

由此，我想进一步更改输出以满足我的需要（添加标签以供显示）。为了达到这一点，需要将 isroot 属性附加到站点地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:33:26.940

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:in="http://www.composite.net/ns/transformation/input/1.0">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kIsRootByPageId" match="isroot" use="@PageId"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="in:result[1]/Page">
  <xsl:copy>
   <xsl:apply-templates select="@*"/>
   <xsl:copy-of select="key('kIsRootByPageId',@Id )/@isroot"/>
   <xsl:apply-templates select="node()"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="in:result[2]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<in:inputs xmlns:in="http://www.composite.net/ns/transformation/input/1.0">
    <in:result name="SitemapXml">
        <Page Id="a0a47ce1-6eba-4d29-a7a3-3749c768c7e7" isopen="true" xmlns=""></Page>
        <Page Id="a3055286-0e90-4b04-99dd-fb1a61dde0bf" isopen='true' xmlns="">
            <Page Id="da675b13-d4d3-42ab-acc1-82e2a5408100" isopen='true' iscurrent='true' Depth="2"/></Page>
    </in:result>
    <in:result name="GetisrootXml">
        <isroot PageId="a0a47ce1-6eba-4d29-a7a3-3749c768c7e7" Id="f8d4eea4-7070-4bc3-a804-e106697ffaa9" isroot="true" xmlns=""/>
        <isroot PageId="f8e4adbc-2758-42d6-bc40-0192ba0107a6" Id="db62e132-3f3b-493f-917a-9e090f887f13" isroot="false" xmlns=""/>
    </in:result>
</in:inputs> 
```

**产生想要的正确结果**：

```
<in:inputs xmlns:in="http://www.composite.net/ns/transformation/input/1.0">
   <in:result name="SitemapXml">
      <Page Id="a0a47ce1-6eba-4d29-a7a3-3749c768c7e7" isopen="true" isroot="true"/>
      <Page Id="a3055286-0e90-4b04-99dd-fb1a61dde0bf" isopen="true">
         <Page Id="da675b13-d4d3-42ab-acc1-82e2a5408100" isopen="true" iscurrent="true"
               Depth="2"/>
      </Page>
   </in:result>
</in:inputs> 
```

**说明**：

1.  **[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制选择此模板执行的每个节点。

2.  有两个压倒一切的模板，第二个模板用它的空主体“删除”第二次出现的`in:result`.

3.  第一个覆盖模板匹配任何`Page`第一次出现的`in:result`. 我们使用键来高效方便地找到在其属性`isroot`中引用当前元素的元素——并且我们复制它的属性。`Page``PageId``isroot`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T07:35:26.220

很难从用 SQL 术语表达的解决方案的描述中重建您的需求，因为我已经有很多年没有愤怒地使用 SQL 了。而且 XSLT 与 SQL 不同，因为它使用分层数据模型而不是表格数据模型，这意味着像“内连接”这样的术语不会直接映射。但是，当然可以在 XSLT 中进行连接（内部和外部）：您通常将它们编写为嵌套循环。

您的问题的详细答案取决于您使用的是 XSLT 1.0 还是 2.0，以及要组合的函数是交付 XML 值还是原子值。用具体的例子输入输出来问具体的问题确实更有效，这样我们才能给出具体的答案。

# iphone - 可达性是否/可以不断更新互联网连接状态？

> ID：11388824
> 
> 赞同：0
> 
> 时间：2012-07-09T03:37:47.423
> 
> 标签：iphone, nsnotificationcenter, reachability, connectivity

我的应用程序中至少有 3 个视图控制器需要连接。***在输入每个***视图控制器（例如在他们的 viewDidLoad 中）时，我是否必须开始**新**的可达性测试，或者我可以在启动时进行 - 就像在我的 AppDelegate 中一样- 并让它不断地从那里更新我？*`didFinishLaunchingWithOptions`*

 *如果是这样，怎么做？

假设我想从 application 检查 Reachability `didFinishLaunchingWithOptions`，然后再从：
1) imageGalleryViewController
2) latestNewsViewController
3) PromotionsViewController

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:51:27.650

已经有一个非常相似的问题（和答案），它使用`NSNotificationCenter`：

[这里](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk)*

# javascript - 将 Sequelize 连接到使用 Homebrew 安装的 Postgres

> ID：11388828
> 
> 赞同：1
> 
> 时间：2012-07-09T03:38:48.220
> 
> 标签：javascript, postgresql, node.js

我正在尝试使用[Sequelize](https://github.com/sdepold/sequelize)连接到我本地安装的 Postgres。我通过[Homebrew](http://mxcl.github.com/homebrew)安装了它，并确认我可以很好地连接和查询数据库。当我运行 Sequelize 时，它​​会输出有效查询（我通过控制台运行它们），但数据库不会更改，也不会记录任何连接。我目前的代码是：

```
var sequelize = new Sequelize('reliable_rabbit', 'mohammad', null, {
  host: "127.0.0.1",
  dialect: 'postgres',
  define: { timestamps: true, paranoid: true, underscore: true }//,
}); 
```

我可以通过以下方式连接到数据库：`psql -d reliable_rabbit -U mohammad -h 127.0.0.1`. 我正在使用`1.5.0-beta`Sequelize 版本。

编辑：

在我的入口点 (app/app.js) 中，什么也不记录：

```
var models = require('./models');
models.Post.sync().success(function(){
  console.log("Success!")
}).error(function(error){
  console.log("Error: " + error);
}); 
```

应用程序/models.js：

```
var Sequelize = require("sequelize")

var sequelize = new Sequelize('reliable_rabbit', 'mohammad', null, {
  host: "127.0.0.1",
  logging: console.log,
  dialect: 'postgres',
  define: { timestamps: true, paranoid: true, underscore: true }//,
});
exports.Post = require("../models/post")(sequelize); 
```

最后是模型/post.js：

var Sequelize = 要求（“续集”）；

```
module.exports = function(sequelize) {
  return sequelize.define('post', {
    title: { type: Sequelize.STRING, validate: { notEmpty: true } },
    permalink: { type: Sequelize.STRING, validate: { is: ["^[a-z]+[a-z\-][a-z]+$"] } },
    content: { type: Sequelize.TEXT, validate: { notEmpty: true } },
    published: { type: Sequelize.BOOLEAN, defaultValue: false },
    published_at: { type: Sequelize.DATE }
  },{
    instanceMethods: {
      generatePermalink: function() {
        this.permalink = this.title.toLowerCase().replace(/[^a-z]/g, "-").replace(/^-+|-+$/g,'').replace(/\-{2,}/g, '-');
      }
    }
  });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:47:28.927

首先，我建议使用[sequelize.import](http://sequelizejs.com/#models-import)。此外，我想知道您是否可能只是忘记[同步](http://sequelizejs.com/#models-sync)数据库？如果您需要有关这些事情的更多详细信息，请告诉我:)

# c++ - 布尔值被初始化为真，即使构造函数被传递为假

> ID：11388830
> 
> 赞同：-4
> 
> 时间：2012-07-09T03:39:22.240
> 
> 标签：c++, model-view-controller, oop

我的代码有一个有趣的问题......在调试模式下运行（Eclipse/CDT）......我所有的瓷砖似乎都将它们的墙布尔设置为 true？有人知道wtf正在发生吗？

代码，完全 MVC 和几乎正确的 OO（我认为），在这里：

main.cpp [http://pastebin.com/f14kmfap](http://pastebin.com/f14kmfap)

gridworld.h [http://pastebin.com/vCmzxzrj](http://pastebin.com/vCmzxzrj)

gridworld.cpp [http://pastebin.com/jKKRFE9V](http://pastebin.com/jKKRFE9V)

我怀疑它与这里的这个片段有关：

```
Tile::Tile(bool w) {
        wall = w;
        event = false;
        eventText = "";
} 
```

以及我如何使用它来生成地图：

```
map[1][2] = new Tile(false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:07:11.980

首先，`Tile map[8][8];`, 将默认构造图块。布尔`wall`设置为真。

在您使用的 Map 构造函数中`Map::map[r][c] = new Tile()`，右侧是 a `Tile*`，左侧是 a `Tile`。*分配给 map*的正确语法是`map[r][c] = Tile();`, 或`map[6][4]=Tile(false);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:45:24.290

您`new Tile()`在许多使用默认 ctor 的地方使用`Tile`. 您的内部默认 ctor`Tile`正在初始化`wall = true;`。

# javascript - 使用 angular.module 创建控制器有什么好处（如果有的话）？

> ID：11388831
> 
> 赞同：7
> 
> 时间：2012-07-09T03:39:40.713
> 
> 标签：javascript, angularjs

我是新手`angular.js`，目前正在编写我的第一个项目。

目前我的控制器看起来像这样，例如：

```
function MyCtrl($scope, MyService) {
    $scope.foo = MyService.doStuff();
} 
```

它们以这种方式工作得很好（到目前为止），但我浏览了另一个 AngularJS 应用程序的源代码并注意到他们正在使用 angular.module 来创建他们的控制器。

如果有的话，我为什么要在自己的应用程序中这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T03:56:38.673

如果您的页面上有多个 Angular 应用程序并且它们具有同名的控制器，则您需要使用 module.controller 来避免冲突。如果你想避免污染全局命名空间也一样

# android - Android 意图发送电子邮件，显示电子邮件帐户以外的资源

> ID：11388836
> 
> 赞同：0
> 
> 时间：2012-07-09T03:40:49.490
> 
> 标签：android

我有下面的控制器，它从我的 Android 应用程序中创建了一个“联系我们”类型的对话框。除了某些手机在选择器对话框中包含电子邮件帐户以外的其他内容外，一切似乎都运行良好。我已经看到蓝牙出现了，有时即使手机上没有设置电子邮件帐户，也会出现默认的 Android 电子邮件帐户。我的 gmail 帐户已设置，并且应该显示。关于我哪里出错的任何想法？

```
public class EmailController implements onClickListener {

    private EmailActivity emailActivity;

    public EmailController(EmailActivity eActivity){
        super();
        emailActivity = eActivity;

    }

    @Override
    public void onClick(View v){
        Intent intent = new Intent();

        switch (v.getId()) {
            case R.id.helpinfo_submit_support_reqst_btn:

                final Intent emailIntent = new Intent(
                    Intent.ACTION_SEND);
                emailIntent.setType("plain/text");
                emailIntent.putExtra(Intent.EXTRA_EMAIL,
                    new String[] { mResources
                            .getString(R.string.emailId) });
                emailIntent.putExtra(Intent.EXTRA_SUBJECT,
                    mResources.getString(R.string.emailSubject));
                emailIntent.putExtra(Intent.EXTRA_TEXT, "email body....");
                emailActivity.startActivity(Intent.createChooser(emailIntent,
                                   emailActivity.getResources().getString(R.string.info_screen_send_mail)));

                emailBody = null;  

            break;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:49:22.563

要发送邮件，请将类型设置为：

```
...
emailIntent.setType("message/rfc822"); 
```

参考：

*   [网络媒体类型](http://en.wikipedia.org/wiki/Internet_media_type#Type_message)
*   [哑剧](http://en.wikipedia.org/wiki/MIME)

# python - 如果互联网出现故障，请重新启动 python 脚本

> ID：11388837
> 
> 赞同：0
> 
> 时间：2012-07-09T03:40:53.163
> 
> 标签：python, application-restart

我有一个 python 脚本（在 Mac OS X 上运行），当互联网出现故障时需要重新启动。如果互联网关闭，我想杀死当前脚本，等待互联网恢复，然后重新启动它。或者，如果可能，从内部重新启动该功能。

Python代码有问题的部分如下：

```
 import tweetstream

    # ...

    with tweetstream.FilterStream(username, password, track = words) as stream:
        for tweet in stream:
            db.tweets.save(tweet) 
```

目前，如果互联网出现故障，流将停止并且不会重新连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:22:01.410

尝试使用[这个 python 的 ping 实现](http://www.g-loaded.eu/2009/10/30/python-ping/)作为子进程。因此，如果发生太多超时，那么您将知道网络已关闭，您可以重新启动推文过程（但是，要做到这一点，您可能应该将整个推文过程放在它自己的函数中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T03:46:42.813

这取决于操作系统。很少有特定于操作系统的方法。第一个跨平台方法将是自己的 ping，它将向 Internet 服务器发送一些数据包。如果您无法收到信息，则意味着 Internet 出现故障。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:26:25.780

也许你可以尝试这样的事情：

```
import urllib2

def internet_on():
    try:
        response=urllib2.urlopen('http://74.125.131.94/',timeout=1)
        return True
    except urllib2.URLError as err: pass
    return False 
```

74.125.131.94 是 google.co.in 的 IP 地址。您可以使用任何您认为会更快响应的网站。使用数字 IP 地址可避免 DNS 查找，这可能会阻止 urllib2.urlopen 调用。 timeout=1 参数确保即使互联网不可用，对 urlopen 的调用也不会超过 1 秒。

现在您只需要调用该`internet_on()`函数。`true`如果连接正常，它将返回`on`，否则返回`false`。然后，您可能希望将所有推文代码包装在一个函数中并调用它。（如`@inspectorG4dget`建议的那样）。

**编辑：** 对于连续检查，你可以做类似的事情

```
def check():
    while not internet_on():
        pass
    print "internet connection is on"
    // call the tweet stuff function here. 
```

然后，当您的流停止时，只需调用 check() 函数并且当互联网连接恢复时，它将调用您的推文函数以重新启动它。

# groovy - Groovy MarkupBuilder 名称冲突

> ID：11388838
> 
> 赞同：5
> 
> 时间：2012-07-09T03:40:53.750
> 
> 标签：groovy, markupbuilder

我有这个代码：

```
String buildCatalog(Catalog catalog) {
    def writer = new StringWriter()
    def xml = new MarkupBuilder(writer)
    xml.catalog(xmlns:'http://www.sybrium.com/XMLSchema/NodeCatalog') {
        'identity'() {
            groupId(catalog.groupId)
            artifactId(catalog.artifactId)
            version(catalog.version)
        }
    }

    return writer.toString();
} 
```

它产生这个xml：

```
<catalog xmlns='http://www.sybrium.com/XMLSchema/NodeCatalog'>
  <groupId>sample.group</groupId>
  <artifactId>sample-artifact</artifactId>
  <version>1.0.0</version>
</catalog> 
```

请注意，“身份”标签丢失了……我已经尝试了世界上所有的方法来让那个节点出现。我要把头发扯掉！

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T04:20:14.110

可能有更好的方法，但一个技巧是`invokeMethod`直接调用：

```
String buildCatalog(Catalog catalog) {
    def writer = new StringWriter()
    def xml = new MarkupBuilder(writer)
    xml.catalog(xmlns:'http://www.sybrium.com/XMLSchema/NodeCatalog') {
        delegate.invokeMethod('identity', [{
            groupId(catalog.groupId)
            artifactId(catalog.artifactId)
            version(catalog.version)
        }])
    }

    return writer.toString();
} 
```

这实际上是 Groovy 在幕后所做的。我无法上班`delegate.identity`或`owner.identity`上班，这是惯用的伎俩。

* * *

**编辑**：我弄清楚发生了什么。

Groovy为每个对象[添加了一个](http://docs.groovy-lang.org/latest/html/groovy-jdk/java/lang/Object.html#identity%28groovy.lang.Closure%29)带有签名的方法。`identity(Closure c)`

这意味着当您尝试`identity`在 XML 构建器上动态调用元素时，在传入单个闭包参数时，它正在调用该`identity()`方法，这就像调用`delegate({...})`外部闭包一样。

使用这个`invokeMethod`技巧会迫使 Groovy 绕过 Meta Object Protocol 并将该方法视为动态方法，即使该`identity`方法已经存在于 MetaObject 上。

知道了这一点，我们就可以组合出一个更好、更清晰的解决方案。我们所要做的就是更改方法的签名，如下所示：

```
String buildCatalog(Catalog catalog) {
    def writer = new StringWriter()
    def xml = new MarkupBuilder(writer)
    xml.catalog(xmlns:'http://www.sybrium.com/XMLSchema/NodeCatalog') {
        // NOTE: LEAVE the empty map here to prevent calling the identity method!
        identity([:]) {
            groupId(catalog.groupId)
            artifactId(catalog.artifactId)
            version(catalog.version)
        }
    }

    return writer.toString();
} 
```

这更具可读性，意图更清晰，并且评论应该（希望）防止任何人删除“不必要的”空地图。

# ios - 很奇怪的警告

> ID：11388839
> 
> 赞同：1
> 
> 时间：2012-07-09T03:41:00.623
> 
> 标签：ios, facebook, uiapplicationdelegate

我目前正在我的移动应用程序中尝试 Facebook 的单点登录功能。到目前为止，我可以在测试我的应用程序时访问 Facebook Auth Dialog。但是当我在授权应用程序时单击“确定”按钮时，我的视图给了我一个黑屏。我想知道这是否是因为`rootViewController`.

![在此处输入图像描述](../Images/e34ad4b25dbfbdc5015a5c626af2507e.png)

在我的这行代码中`FbSSOTrialDelegate.m`

`self.window.rootViewController = self.FbSSOTrialVC;`

我收到一条警告消息`Incompatible pointer types assigning to 'UIViewController *' from 'FbSSOTrialViewController *'`，并且在我的控制台中也有此日志：

`2012-07-09 11:17:04.798 FbSSOTrial[976:f803] Application windows are expected to have a root view controller at the end of application launch`

我说这很奇怪，因为我确定这`FbSSOTrialVC`是`UIViewController`

请告诉我为什么会发生这种情况。以下是 FbSSOTrialViewController.h 的其他代码

```
#import <UIKit/UIKit.h>

@interface FbSSOTrialViewController : UIViewController

@end 
```

和 appDelegate

FbSSOTrialDelegate.h

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"

@class FbSSOTrialViewController;

@interface FbSSOTrialAppDelegate : NSObject <UIApplicationDelegate, FBSessionDelegate>
{
    Facebook *facebook;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet FbSSOTrialViewController *FbSSOTrialVC;
@property (nonatomic, retain) Facebook *facebook;

@end 
```

FbSSOTrialDelegate.m

```
#import "FbSSOTrialAppDelegate.h"

@implementation FbSSOTrialAppDelegate

@synthesize window = _window;
@synthesize facebook = _facebook;
@synthesize FbSSOTrialVC = _FbSSOTrialVC;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    NSString *FbAppId = @"MY_APP_ID";

    self.window.rootViewController = self.FbSSOTrialVC;
    [self.window makeKeyAndVisible];

    self.facebook = [[Facebook alloc] initWithAppId:FbAppId andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
        self.facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        self.facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![self.facebook isSessionValid]) {
        [self.facebook authorize:nil];
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:01:56.447

根据我们的讨论，我们确定视图控制器在应用程序启动期间没有被正确实例化。我们确定感兴趣的 ViewController 来自故事板，因此建议的代码更改如下：

```
// remove this
// self.window.rootViewController = self.FbSSOTrialVC;

// and replace it with:
self.FbSSOTrialVC = [self.window.rootViewController.storyboard instantiateViewControllerWithIdentifier:@"Fb SSO Trial VC"];
self.window.rootViewController = self.FbSSOTrialVC; 
```

请注意，这要求在情节提要中，感兴趣的 ViewController 应具有标识符“Fb SSO Trial VC”（根据需要更改这些）。

# java - java编译的类包含美元符号

> ID：11388840
> 
> 赞同：93
> 
> 时间：2012-07-09T03:41:07.950
> 
> 标签：java, class, compilation

我一直在使用 Eclipse 作为我的 IDE。我还使用它将我的应用程序导出到 JAR 文件中。当我查看 JAR 文件中的类时，我的一些类包含该类的名称、一个美元符号，然后是一个数字。例如：

```
Find$1.class 
Find$2.class
Find$3.class
Find.class 
```

我注意到它在更大的课程中这样做。这是因为类变得如此之大，它将它编译成多个类吗？我用谷歌搜索并查看了多个论坛，并搜索了 Java 文档，但没有找到任何与之相关的内容。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-07-09T03:45:09.773

内部类（如果您的类中存在）​​将被编译并且类文件将是`ClassName$InnerClassName`. 在匿名内部类的情况下，它将显示为数字。类的大小（Java 代码）不会导致生成多个类。

例如，给定这段代码：

```
public class TestInnerOuterClass {
    class TestInnerChild{

    }

    Serializable annoymousTest = new Serializable() {
    };
} 
```

将生成的类将是：

1.  `TestInnerOuterClass.class`
2.  `TestInnerOuterClass$TestInnerChild.class`
3.  `TestInnerOuterCasss$1.class`

更新：

使用匿名类并不是一个坏习惯，它只取决于用法。

检查[这个](https://stackoverflow.com/questions/487126/is-usage-of-anonymous-classes-in-java-considered-bad-style-or-good)关于 SO 的讨论

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-09T03:45:18.757

这是因为您在这个更大的类中有匿名类。它们使用此命名约定进行编译。

看到[匿名类难题](https://stackoverflow.com/questions/7778556/the-anonymous-class-conundrum)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-28T15:29:05.450

除了@mprabhat 提出的上述案例外，其他案例可能是：

1.  如果你的类包含一个**枚举**变量，那么也会为此生成一个单独的类。生成的 .class 的名称是**ClassName$Name_of_enum**。
2.  如果您的类**X**正在继承，即扩展另一个类**Y**，那么将生成一个名为**ClassName$1.class**或**ClassName$1$1.class的 .class**
3.  如果您的类**X**正在实现接口**Y**，那么将生成一个名为**ClassName$1.class**或**ClassName$1$1.class**的 .class 。

这些案例是我对 jar 中的 .class 文件进行检查的推导。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T01:16:20.980

回答您关于匿名课程不好的评论。他们绝对不是。考虑将动作侦听器分配给 JButton：

```
JButton button = new JButton(...);
button.addActionListener(new ActionListener() { ... }); 
```

或者通过“名称”属性进行不区分大小写的排序

```
Collections.sort( array, new Comparator<Foo>() {
    public int compare(Foo f1, Foo f2) {
        return f1.getName().toLowerCase().compareTo(f2.getName().toLowerCase());
    }
}); 
```

您还会看到很多 Runnable 和 Callable 作为匿名类完成。

# android - Android JNI，如何使用 soname libxx.so.1.2.3 加载库

> ID：11388846
> 
> 赞同：6
> 
> 时间：2012-07-09T03:41:42.273
> 
> 标签：android, linux, java-native-interface

需要使用来自第三方的android共享库，该库的soname和文件名相同，格式为libxx.so.1.2.3，在linux上很常见。我将 lib 文件重命名为 libxx.so，并使用 ndk-build 在 libmyjni.so 中链接 libxx.so。在我的 java 代码中，在调用 libmyjni.so 中的函数之前，我像这样加载它们：

```
 System.load("/data/local/tmp/libxx.so.1.2.3");
    System.loadLibrary("myjni"); 
```

我必须手动将 libxx.so.1.2.3 复制到 /data/local/tmp/。这样效果很好，上面加载后，我可以调用libmyjni.so中的函数。

在代码“System.loadLibrary("myjni");”中，系统总是试图从某个地方获取 libxx.so.1.2.3。我想知道，在现实世界中，如何在安装过程中将 libxx.so.1.2.3 复制到 android 设备上的特定位置？这样我就可以 System.load() 它。

或者android有官方方式将自制的lib安装到/system/lib/？

如果 libxx.so.1.2.3 的格式为 libxx.so，那么我可以使用 System.loadLibrary("xx") 来加载它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T13:55:33.627

这就是我最终所做的，保持 libxx.so.1.2.3 不变并用 Java 做所有事情：

将 libxx.so.1.2.3 放入 android 资产中。在 MainApp.OnCreate() 中，将文件复制到私有文件夹并从那里加载：

```
 AssetManager am = applicationContext.getAssets(); 
    in = am.open(OPENSSL_SO_LIB_NAME); // source instream

    File privateStorageDir = applicationContext.getFilesDir();
    String libPath = privateStorageDir.getAbsolutePath();  // copy the lib to here ...

    System.load(libPath + "/" + SO_LIB_NAME); 
```

# javascript - 删除点击其他选项卡时生成的部分url查询元素

> ID：11388847
> 
> 赞同：0
> 
> 时间：2012-07-09T03:42:05.593
> 
> 标签：javascript, jquery, tabs

我正在使用 jquery tabify [http://unwrongest.com/projects/tabify/](http://unwrongest.com/projects/tabify/)来为我的菜单创建一个类似标签的功能。

演示：http: [//jsfiddle.net/janjarfalk/6Y6Pa/1/](http://jsfiddle.net/janjarfalk/6Y6Pa/1/)

我正在创建这样的菜单：

```
<ul id="menu">
<li class="active"><a href="#contentHome">Home</a></li>
<li><a href="#contentGuestbook">Guestbook</a></li>
<li><a href="#contentLinks">Links</a></li>
</ul>
<div class="content" id="contentHome">Content for Home</div>
<div class="content" id="contentGuestbook">My guestbook</div>
<div class="content" id="contentLinks">Links</div> 
```

选项卡将作为锚链接自动添加到我的 url，读取我在我的 url 上的任何内容。我需要一个 url（仅适用于链接选项卡），例如***{domain name}/{controller}/{method}/{articleId}#contentLinks-tab***，示例：

*   [http://www.test.com/site/shipping/5/#contentLinks-tab](http://www.test.com/site/shipping/5/#contentLinks-tab)
*   [http://www.test.com/site/delivery/3/#contentLinks-tab](http://www.test.com/site/delivery/3/#contentLinks-tab)

而其余的只有[http://www.test.com/site#home-tab](http://www.test.com/site#home-tab)等。正如您从演示中看到的那样，“{id}-tab”是根据 id 自动生成的。但是，如果我已经在链接页面的[http://www.test.com/links/shipping/5/#contentLinks-tab](http://www.test.com/links/shipping/5/#contentLinks-tab)上，并且如果我要转到留言簿或主页等其他选项卡，则会出现问题/shipping/5/#contentHome-tab 将紧随其后。

请告诉我如何删除 /shipping/5/ 即使我在链接选项卡上，并悬停在选项卡的其余部分？抱歉，我无法提供太多编码，因为我不知道这样做。因此，真的很感激有人可以发光。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:35:10.777

这是一个很难回答的问题，因为 jsFiddle 显然缺少`/shipping/5`URL 的一部分；如果理解正确，我们基本上是在尝试更改插件的功能。

无论如何，这有点 hacky，但您可以尝试`href`使用 javascript 更改 Home 和 Guestbook 链接的属性。所以首先给出 Home 和 Guestbook 链接 ID：

```
<a href="#contentHome" id="home">Home</a>
<a href="#contentGuestbook" id="guestbook">Guestbook</a> 
```

然后在 Tabify 初始化后使用 jQuery 替换 URL：

```
$('#menu').tabify();
$('#home').attr('href','/site#contentHome-tab');
$('#guestbook').attr('href','/site#contentGuestbook-tab'); 
```

这相当于`http://www.test.com/site#contentHome-tab`等，有效地摆脱了 URL 中不需要的部分。

或者，如果这不起作用（在 jsFiddle 上使用这样的插件时很难判断），您可能会变得更加 hacky，而是将 onclick 侦听器添加到 Home 和 Guestbook 选项卡：

```
$('#home').click(function() {
  window.location.href = "/site#contentHome-tab";
});​ 
```

我通常不会做这样的事情，但是当你使用插件时，有时你必须有点hacky才能达到预期的效果=P

希望这可以帮助。

# winapi - MFC CEvent 类成员函数 SetEvent ，与 Thread Lock() 函数的区别？

> ID：11388852
> 
> 赞同：1
> 
> 时间：2012-07-09T03:43:23.530
> 
> 标签：winapi, mfc

SetEvent() 和 Thread Lock() 函数有什么区别？任何人请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:24:05.533

事件可用于进程间通信，即在不同进程之间同步活动。它们通常用于“通知”活动的发生（例如，文件写入已完成）。有关事件的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686915%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686915%28v=vs.85%29.aspx)

关键部分只能在进程中用于同步线程并使用基本的锁定/解锁概念。它们通常用于保护资源免受多线程访问（例如变量）。它们使用起来非常便宜（以 CPU 而言）。进程间变体在 Windows 中称为 Mutex。更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:10:33.727

当您想要在某个任务完成后开始/继续处理时使用事件，即您想要等到该事件发生。其他线程可以使用 通知等待线程该任务的完成`SetEvent`。

另一方面，当您只希望一个线程一次执行一段代码时使用临界区，即您希望一组指令由一个线程执行，而此时没有任何其他线程改变状态。例如，您将一个项目插入到涉及多个步骤的链表中，此时您不希望另一个线程来尝试将另一个对象插入到列表中。因此，您阻塞另一个线程，直到第一个线程完成使用临界区。

# objective-c - 您如何使用 ARC 处理“require(..., bail)”语句？

> ID：11388853
> 
> 赞同：9
> 
> 时间：2012-07-09T03:43:48.757
> 
> 标签：objective-c, ios, automatic-ref-counting, llvm

我正在查看[Apple 示例代码中 Square Cam 的一些示例代码](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html)。我想在使用 ARC 的现代项目中复制它的一些功能。但是，有大量的 require 语句，例如：

```
BOOL success = (destination != NULL);
require(success, bail); 
```

这会产生编译器错误：

> 转到受保护的范围。

我的问题是——在使用 ARC 的项目中处理此类语句的适当方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T03:30:11.643

我遇到了同样的问题（使用相同的示例代码）。代码如下所示：

```
BOOL success = (destination != NULL);
require(success, bail);

//Initialise some variables

bail:
//Deal with errors 
```

我在带有声明的块周围添加了大括号，以使其范围清晰：

```
BOOL success = (destination != NULL);
require(success, bail);
{
    // *** Initialise some variables ***
}
bail:
{
    //Deal with errors
} 
```

它为我解决了这个问题。通过查看这个，我还了解到您有时可以扩展构建错误以获取更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T04:04:35.877

显然`bail`是在一个或多个`__block`变量的范围内；这是不允许的。有关更多信息，请参阅[http://clang.llvm.org/compatibility.html#blocks-in-protected-scope](http://clang.llvm.org/compatibility.html#blocks-in-protected-scope)。`__block`提出的解决方案是通过将变量放在大括号分隔的块中来限制变量的范围。这可能并不总是有效；YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T06:45:01.067

我正在为@Lewis42 答案添加一些描述。

如果你不把变量放在它自己的范围内，你会在 goto 之后绕过所有变量的初始化，当 ARC 试图清理它时，它最终会试图释放一些随机的内存。

如果您不想将变量放在自己的范围内，请确保不应在 goto 关键字下声明任何变量。

[跳转到 __block 变量范围内](http://clang.llvm.org/compatibility.html#blocks-in-protected-scope)

> __block 需要特殊的运行时初始化。跳转到 __block 变量的范围会绕过此初始化，从而使变量的元数据处于无效状态。

# crystal-reports - 如何在 Crystal Reports 中添加条件总计？

> ID：11388856
> 
> 赞同：0
> 
> 时间：2012-07-09T03:44:27.760
> 
> 标签：crystal-reports, summary

我有一个需要在报告页脚总结的组运行总计。由于 CR 无法做到这一点，因此我不得不最终获得另一个刷新“从不”的运行总数。但是现在我需要根据这个总计计算小组级别的一些百分比。不幸的是，我无法访问总计的值（因为它是另一个运行总计）。使困惑？？好的报告应该如下所示..

* * *

```
 Column 1                           | Colunm 2
    ========                            ========= 
```

* * *

| 组 200（在组级别运行总刷新）| 20% (200%1000) |
| 组 500（在组级别运行总刷新）| 50% (500%1000) |
| 组 300（在组级别运行总刷新）| 30% (300%1000) |

* * *

页脚 1000（运行总数从不刷新）

* * *

但是第 2 列没有给我正确的值。它给了我 100% 总是意味着 200%200 或 500%500 等等。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:08:02.433

Thanx Lee，使用运行总公式有效，我在报告页脚中添加了以下公式，

```
numbervar Samples; 
if {product.sku}="card-sample" then 
   Samples := Samples + {@num_qty}; 

Samples; 
```

然后我用这个公式计算第 2 列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:21:08.863

我应该认为您的报告总数只想成为汇总字段而不是运行总数。然后可以使用计算您的第 2 列值`running total / sum(field);`

这是一个例子：

*   我有两列年龄和薪水。
*   当年龄> 18 我想加薪水。

最初我使用条件 {age} > 18 的运行总计

那效果不好，所以我删除了运行总计，并创建了一个公式：`if {age} > 18 then {salary} else 0`

然后，我在该公式字段上创建了一个摘要。

说得通？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:10:44.557

尝试这个

为组百分比添加一个公式字段，然后将下面的代码粘贴到其中。

```
Group total / sum(column) 
```

将此公式放在您的小组级别。

# php - OpenCart：将类别添加到主菜单？

> ID：11388857
> 
> 赞同：6
> 
> 时间：2012-07-09T03:44:31.177
> 
> 标签：php, menu, opencart

我刚刚安装了 OpenCart，删除了它附带的所有虚拟产品和类别，并添加了我自己的。但是，现在我的菜单中没有任何内容 - 没有产品类别。我似乎无法确定将项目添加到菜单的位置。

谁能指出我正确的方向？谢谢

更新：

这是我的头 tpl 文件中的 php：

```
?php if ($categories) { ?>
<div id="menu">
  <ul>
    <?php foreach ($categories as $category) { ?>
    <li><a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a>
      <?php if ($category['children']) { ?>
      <div>
        <?php for ($i = 0; $i < count($category['children']);) { ?>
        <ul>
          <?php $j = $i + ceil(count($category['children']) / $category['column']); ?>
          <?php for (; $i < $j; $i++) { ?>
          <?php if (isset($category['children'][$i])) { ?>
          <li><a href="<?php echo $category['children'][$i]['href']; ?>"><?php echo $category['children'][$i]['name']; ?></a></li>
          <?php } ?>
          <?php } ?>
        </ul>
        <?php } ?>
      </div>
      <?php } ?>
    </li>
    <?php } ?>
  </ul>
</div> 
```

我并没有真正改变原来的任何内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T07:09:47.583

**在Catalog->Category->insert**中创建一个新的父类别和子类别，然后添加新产品**Catalog->product->insert**。产品应出现在前端。有关更多详细信息，请参阅此视频教程：[http ://www.opencart.com/index.php?route=documentation/screencast](http://www.opencart.com/index.php?route=documentation/screencast)

# java - 将 Account 对象添加到 ArrayList

> ID：11388873
> 
> 赞同：0
> 
> 时间：2012-07-09T03:46:46.480
> 
> 标签：java

```
public class Bank {
    private ArrayList<Account> accounts;
    private int numberOfAccounts;

    public Bank() {
        numberOfAccounts = 0;
        accounts = new ArrayList<Account>();
    }

    public int getNumOfAccounts() {
        return numberOfAccounts;
    }

    public void addAccount(Account a) {
        numberOfAccounts++;
        accounts.add(a);
    }

    public Account findAccount(int id) {
        int index = id - 1;
        if (accounts.size() >= id){
            return accounts.get(index);
        }
        else return null;
    }

    public void addMonthlyInterest() {
        for (Account x : accounts) {
            x.addMonthlyInterest();
        }
    }

    public void removeAccount(Account a) {
        numberOfAccounts--;
        accounts.remove(a);
    }
} 
```

因此，当我将帐户添加到 ArrayList，然后检查大小时，它一直告诉我其中没有任何内容。我使用添加的方式有问题`.add()`吗？

这是我的 BankTest 的一部分。我不完全确定 testAddAccount 使用什么（JUnit 明智），但我知道它们没有被添加，因为当我尝试查找帐户时，它们都不存在。

```
import static org.junit.Assert.*;
import static org.junit.Assert.assertEquals;

import java.util.ArrayList;

import org.junit.Test;

public class BankTest {
    private final ArrayList<Account> accounts = new ArrayList<Account>();
    private Bank bank = new Bank();
    private java.util.Random rand;
    // private static final double[] RATES;
    // private static final int[] TYPES;

    SavingsAccount sa = new SavingsAccount(0.034);
    CheckingAccount ca = new CheckingAccount(0.034, 100);
    CreditCardAccount cca = new CreditCardAccount(0.034, 100);

    @Test
    public void testAddAccount() {
        // Tests Bank.addAccount() by adding many random accounts to the bank.
        // SavingsAccount sa = new SavingsAccount(0.034);
        SavingsAccount sa = new SavingsAccount(0.034);
        CheckingAccount ca = new CheckingAccount(0.034, 100);
        CreditCardAccount cca = new CreditCardAccount(0.034, 100);
        bank.addAccount(sa);
        bank.addAccount(ca);
        bank.addAccount(cca);
        if (accounts.size() == 3){
            System.out.println("true");
        }else System.out.println("false");

    }

    @Test
    public void testFindAccount() {
        // Tests Bank.findAccount() by finding all existing accounts and
        // attempting to find some non-existing accounts.
        bank.addAccount(sa);
        bank.addAccount(ca);
        bank.addAccount(cca);

        int size = accounts.size();
        System.out.println(size);
        accounts.get(0);
        assertEquals(sa, bank.findAccount(1));
        assertEquals(ca, bank.findAccount(2));
        assertEquals(cca, bank.findAccount(3));

        assertNull(bank.findAccount(50));
        assertNull(bank.findAccount(80));
        assertNull(bank.findAccount(230));

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:08:19.543

我需要看看你如何实例化和使用 Bank 对象，但我猜这就是你的问题所在。每当您创建新银行时，都会初始化帐户列表 - 您是否在尝试访问帐户列表时创建新银行？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:35:44.153

您没有检查正确的 ArrayList！你的代码：

```
// what is accounts variable for?? Get rid of it.
private final ArrayList<Account> accounts = new ArrayList<Account>(); 

private Bank bank = new Bank();
private java.util.Random rand;
// private static final double[] RATES;
// private static final int[] TYPES;

SavingsAccount sa = new SavingsAccount(0.034);
CheckingAccount ca = new CheckingAccount(0.034, 100);
CreditCardAccount cca = new CreditCardAccount(0.034, 100);

@Test
public void testAddAccount() {
    // Tests Bank.addAccount() by adding many random accounts to the bank.
    // SavingsAccount sa = new SavingsAccount(0.034);
    SavingsAccount sa = new SavingsAccount(0.034);
    CheckingAccount ca = new CheckingAccount(0.034, 100);
    CreditCardAccount cca = new CreditCardAccount(0.034, 100);
    bank.addAccount(sa);
    bank.addAccount(ca);
    bank.addAccount(cca);
    if (accounts.size() == 3){  // **** accounts.size()???
        System.out.println("true");
    }else System.out.println("false"); 
```

您正在检查`accounts.size()`，accounts 是一个局部变量，不知道银行持有的账户，即 Bank 对象。account.size() 应该为 0 是完全有道理的。为什么不检查银行变量持有的大小呢？这就是为什么银行有这种方法：

```
 if (banks.getNumOfAccounts() == 3){
        System.out.println("true");
    }else System.out.println("false"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T03:54:46.613

我不会*手动*跟踪#/accounts。由于几个不同的原因，这很“糟糕”。这是一个替代方案：

```
public class Bank {
private ArrayList<Account> accounts;
// private int numberOfAccounts; // No!

public Bank() {
    // numberOfAccounts = 0; // No!
    accounts = new ArrayList<Account>();
}

public int getNumOfAccounts() {
    return accounts.size();
}

public void addAccount(Account a) {
    // numberOfAccounts++; // No!
    accounts.add(a);
} 
```

# equation - 二次方程

> ID：11388875
> 
> 赞同：0
> 
> 时间：2012-07-09T03:47:17.757
> 
> 标签：equation, quadratic

问题：我有一个求解二次方程的程序。该程序仅提供真正的解决方案。如何执行程序的质量测试？你需要问我一些额外的输入参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:54:03.447

创建测试用例，并根据测试用例中的预期结果（外部计算）检查程序的结果。

测试用例可以涵盖几种普通情况，也可以包括特殊情况，比如当系数为0，或判别式<0，=0，接近0。当你比较结果时，一定要正确处理比较（因为结果是浮点数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T16:10:10.693

```
# "quadratic-rb.rb" Code by RRB, dated April 2014\. email ab_z@yahoo.com

class Quadratic

  def input
    print "Enter the value of a: "
    $a = gets.to_f

    print "Enter the value of b: "
    $b = gets.to_f

    print "Enter the value of c: "
    $c = gets.to_f
end

def announcement    #Method to display Equation
 puts "The formula is " + $a.to_s + "x^2 + " + $b.to_s + "x + " + $c.to_s + "=0"
end

def result    #Method to solve the equation and display answer

  if ($b**2-4*$a*$c)>0
  x1=(((Math.sqrt($b**2-4*$a*$c))-($b))/(2*$a))
  x2=(-(((Math.sqrt($b**2-4*$a*$c))-($b))/(2*$a)))
  puts "The values of x1 and x2 are " +x1.to_s + " and " + x2.to_s

else
  puts "x1 and x2 are imaginary numbers"
  end

end

Quadratic_solver = Quadratic.new
  Quadratic_solver.input
  Quadratic_solver.announcement
  Quadratic_solver.result
end 
```

# clojure - Clojure：玻璃与协议/记录 [软，哲学]

> ID：11388876
> 
> 赞同：0
> 
> 时间：2012-07-09T03:47:48.307
> 
> 标签：clojure

## 语境：

(A) “在一个数据结构上运行 100 个函数比在 10 个数据结构上运行 10 个函数要好。” ——艾伦·佩利斯

(B) Clojure 有 defProtocol、defRecord、defType

## 问题：

是否有某种风格的 Clojure 编程风格可以同时获得两者的好处？

(B) 具有避免类型错误的优点。

(A) 具有避免重复代码的优点。

谢谢

PS：我很想听到关于我为什么被否决的建设性批评+如何重组问题以使其富有成效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:15:18.713

我不确定您如何将 (A) 和 (B) 关联起来。

(A) 是关于具有一致性，即如果您使用相同的数据结构来表示跨应用程序的各个层的数据（例如：存储在地图中的用户信息），那么它将使事情保持一致。如果您使用许多数据结构来表示相同的信息，那么您将不得不编写代码来将结构从一种形式转换为另一种形式，并且在不同结构上工作的各种函数将无法组合，因为它们期望不同的数据结构。

(B) 这是关于 Clojure 中的各种构造的。

`defprotocol`：这与数据结构无关，而是与合同/接口有关，即特定类型实现了合同，并且该类型可以在消费者函数需要传递的类型来实现合同的任何上下文中使用。例如：任何可以打印到控制台（或其他可写字符串）的类型都将实现打印合同/协议。

`defrecord`：创建地图，但以默认方式实现了一些附加接口。

`deftype`：创建类型的低级构造，因此您必须为此编写大量代码。99% 的时间你不需要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:06:52.313

调和这一点的方法是考虑“抽象”而不是“数据类型”。或者用 Alan Perlis 的话说：

> “在一个抽象上运行 100 个函数比在 10 个抽象上运行 10 个函数要好。”

所以 Clojure 的方法是：

*   以简单、最小的方式定义你的抽象（使用 defprotocol）
*   针对这个抽象编写函数
*   使用 defprotocol、deftype 等定义实现抽象的具体类型（如果您愿意，也可以使用 extend-protocol 将协议扩展到现有的 Java 类）

# android - 如何在 android 2.1 上为片段添加动画？

> ID：11388887
> 
> 赞同：3
> 
> 时间：2012-07-09T03:50:11.737
> 
> 标签：android, android-fragments, android-animation, android-fragmentactivity

从这个话题。 [Android 片段和动画](https://stackoverflow.com/questions/4817900/android-fragments-and-animation)

我尝试使用[Nineoldandroids](http://nineoldandroids.com/)库，但我不能在 xml 文件中使用 objectAnimator，如下例所示。

```
<?xml version="1.0" encoding="utf-8"?>
<set>
  <objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:propertyName="x" 
    android:valueType="floatType"
    android:valueFrom="-1280"
    android:valueTo="0" 
    android:duration="500"/>
</set> 
```

如何在 android 2.1 上为片段添加动画？（我使用兼容包。）

# objective-c - iOS MVC - 如何将数据从模型传递到控制器？

> ID：11388888
> 
> 赞同：4
> 
> 时间：2012-07-09T03:50:30.863
> 
> 标签：objective-c, ios, model-view-controller

我对此做了很多研究，但我对我的问题有一个心理障碍。我正在为 iOS 应用程序开发 Objective-C

这是我的设置：

1.  视图控制器从视图（用户输入）中获取文本，并将该文本传递给模型的 MethodA。

2.  模型中的 MethodA 作用于输入文本并获得输出（例如，在 google 中搜索该文本）。它使用 dispatch_async 方法进行搜索，该方法将选择器调用到模型中的 MethodB。

3.  MethodB 解析输出并将所有结果放入 NSMutableArray

4.  **我的问题在这里：**如何将 NSMutableArray 传递回视图控制器，以便我可以在视图上显示它？

抱歉，如果我的问题的答案非常简单/明显。我是 Objective-C 的新手

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T04:20:37.300

任何时候我想做异步处理并且这些东西需要回到 UI 的某个地方，我会做以下两件事之一：

```
1\. Use NSNotification to tell anyone who cares that the work is complete
2\. Use a delegate property on the worker and a @protocol 
```

# 1 NS通知

模型对象应该在它的 .h 文件中记录当某些事情发生时它会触发通知；例如当模型的一部分被更新时。当 ViewController 初始化模型对象时，让它自己设置为记录通知的观察者，并实现一个更新 UI 的回调。

# 2 委托和@protocol

创建一个@protocol，例如`@protocol FooModelUpdateDelegate`使用正确命名为的方法`fooObjectDidUpdate:(Foo *)object;`，然后模型类有一个委托属性 as`id<FooModelUpdateDelegate> updateDelegate`并且 ViewController 将自己设置为该委托，我相信你可以弄清楚其余的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T04:00:41.087

我想传递一个响应选择器方法的委托对象并使用处理后的数据调用此方法将是实现程序应得的松散耦合结构的好方法。您是否熟悉这个概念，或者我应该为您挖掘一些代码示例？

* * *

**更新：代码示例**

所以，我可能会使用调用类，比如`MyViewController`，来实现 callbackMethod，`myCallbackMethod`如下所示：

```
-(void) myCallbakcMethod: NSMutableArray* array {
    //DoWhatever with the returned data
} 
```

关键是在计算完成时将结果传递回此方法。因此，`MyViewController`在您调用的地方，`MethodA`您传递对委托的引用以处理结果 namly `self`。

```
//From this:
[MyModel methodA:param1]
//To:
[MyModel methodA:param1:self] 
```

`MyModel`s`methodA`并且`methodB`需要添加一个参数`(id)delegate`并在调用之间传递它。

在`methodB`数据`myArray`准备就绪的地方，执行以下调用：

```
 if([delegate respondsToSelector:@selector(myCallbackMethod:)]])
        [observer performSelector:@selector(myCallbackMethod:) withObject:myArray]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T04:31:42.293

在您的视图控制器中：

```
 // your controller code
    ...
    [myModel getSearchResult:searchKeyword receiver:self action:@selector(responseReceived:)];
}

- (void)responseReceived:(MyModel *)model
{   
    NSArray *searchResult = model.searchResult; 
    [model release], model = nil;
    // some view actions, for instance update your table view
    ...
} 
```

在您的模型中：

```
...
- (id)getSearchResult:(NSString *)searchKeyword receiver:(id)aReceiver action:(SEL)receiverAction {
    self.receiver = aReceiver;
    self.action = receiverAction;
    // some async actions
} 
```

在异步响应接收器中：

```
 ...
    [self.receiver performSelector:self.action withObject:self];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T03:59:17.700

除非我误解了您的描述，否则听起来您的“模型”课程做得比它应该做的更多。在这种情况下，它至少完成了控制器的一些工作。我的建议是将 methodA 和 methodB 折叠到视图控制器（或另一个控制器类）中。方法 B 仍然可以设置“模型”实例的 NSMutableArray 属性，如果这是必要的（或者如果不是，则跳过该步骤）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T04:10:20.683

```
-(void)methodA {
    NSMutableArray *someArray = ...
    [self methodB:someArray];
}

-(void)methodB:(NSMutableArray*)array {
    NSLog(@"%@", array);
    // do something with the array, like update the view
} 
```

但是，如果两者都是视图控制器内部的方法，为什么不只是更新方法内部的视图而不是将其传递给另一个方法呢？

# vb.net - Visual Basic 列表文件

> ID：11388890
> 
> 赞同：0
> 
> 时间：2012-07-09T03:51:11.907
> 
> 标签：vb.net, listbox, hide

我有以下代码来显示目录中的文件，效果很好；

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)Handles Button1.Click
ListBox1.DataSource = Directory.GetFiles("C:\users\matt\pics\")
End Sub 
```

但是，有什么方法可以隐藏“C:\users\matt\pics\”并且只显示文件名？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:27:35.057

使用 LINQ 的`Select`方法去除目录名，只显示文件名。该`ToList`调用将结果从转换为`Select`实现的东西，`IList`或者`IListSource`结果可以用作数据源（`ToArray`也可以）。

```
ListBox1.DataSource = Directory.GetFiles("C:\users\matt\pics\").Select(Function(s) Path.GetFileName(s)).ToList() 
```

# xml - 插入 xslt 缺少元素

> ID：11388891
> 
> 赞同：-1
> 
> 时间：2012-07-09T03:51:18.083
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

我在 xml 和 xslt 中有一个查询

以下是输入 XML

```
<?xml version="1.0" encoding="UTF-8"?>    
<Employer>
<Employees>
    <EmployeesDetails>van ind 26%</EmployeesDetails>
</Employees>    
<Employees>
    <EmployeesDetails>van ind</EmployeesDetails>
</Employees> 
```

以下是我的输出文件

```
<?xml version="1.0" encoding="UTF-8"?>
<Employer>
<Employees>
    <Names>van</Names>
    <Location>ind</Location>                
    <Weather>26</Weather>
</Employees>
<Employees>
    <Names>van</Names>
    <Location>ind</Location>
    <Weather>100</Weather>
</Employees> 
```

在 XSLT 中，我需要检查（XSL：IF）天气元素是否可用输入 XML（如果可用）（26%）我必须使用 XSLT 删除 %，然后输出将为 26。如果 XML 中没有元素（天气）它必须默认创建 100 个。

我们能否在 XSLT 中做到这一点是可能的。

任何人都可以在这里帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:00:51.750

请查看以下 XSLT。

```
<?xml version="1.0" encoding="utf-16"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes" />

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="EmployeesDetails">
        <xsl:variable name="Detail" select="concat(., ' ')" />
        <xsl:variable name="Names" select="substring-before($Detail, ' ')" />
        <xsl:variable name="Location" select="substring-before(substring-after($Detail, concat($Names, ' ')), ' ')" />
        <xsl:variable name="Weather" select="substring-before(substring-after($Detail, concat($Location, ' ')), '% ')" />
        <Names>
            <xsl:value-of select="$Names" />
        </Names>
        <Location>
            <xsl:value-of select="$Location" />
        </Location>
        <Weather>
            <xsl:choose>
                <xsl:when test="string-length($Weather) &gt; 0">
                    <xsl:value-of select="$Weather" />
                </xsl:when>
                <xsl:otherwise>100</xsl:otherwise>
            </xsl:choose>
        </Weather>
    </xsl:template>
</xsl:stylesheet> 
```

[http://www.xmlplayground.com/Gg5F3z](http://www.xmlplayground.com/Gg5F3z)

# ios - 'NSInvalidArgumentException'，原因：'-[SimpleViewController getDataFromTwitter]：无法识别的选择器发送到实例 0x6c31a70'

> ID：11388892
> 
> 赞同：-2
> 
> 时间：2012-07-09T03:51:18.213
> 
> 标签：ios, xcode4

我知道有些有这个问题的人在管理视图控制器内存时遇到了问题，但我只有一个单页应用程序，视图中的其他 IBAction 按钮之一调用它的方法就好了，所以我不认为内存管理是问题。

当我尝试 respondsToSelector: in viewDidLoad（如下所示）时，我收到错误“使用未声明的标识符 'getDataFromTwitter'。

**这是 SimpleViewController.m 。. .**

```
#import "SimpleViewController.h"

@interface SimpleViewController ()
@property NSString *name;
@end

@implementation SimpleViewController

@synthesize dataReceiptNotification;
@synthesize score;
@synthesize name;
@synthesize outputTextView;
@synthesize nameTextField;

- (void)viewDidLoad {
    [super viewDidLoad];
    [self respondsToSelector:getDataFromTwitter:];
}

- (IBAction)getDataFromTwitter:(UIButton *)sender {
     . . .
} 
```

**还有 SimpleViewController.h 。. .**

```
#import <UIKit/UIKit.h>
#import <Twitter/Twitter.h>
#import <Accounts/Accounts.h>

@interface SimpleViewController : UIViewController 

@property (strong, nonatomic) IBOutlet UILabel *dataReceiptNotification;
@property (strong, nonatomic) IBOutlet UILabel *score;
@property (strong, nonatomic) IBOutlet UITextView *outputTextView;
@property (strong, nonatomic) IBOutlet UITextField *nameTextField;

- (IBAction)getDataFromTwitter:(id)sender;
- (IBAction)calculateScore:(id)sender;

@end 
```

*我想知道这个问题是否是由故事板设置引起的？我可能在某个时候更改了方法名称。先感谢您。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:05:39.663

错误在这里：

```
[self respondsToSelector:getDataFromTwitter:]; 
```

它应该是：

```
[self respondsToSelector:@selector(getDataFromTwitter:)]; 
```

希望这可以帮助！

# solr - 在 Solr 中精确搜索

> ID：11388894
> 
> 赞同：1
> 
> 时间：2012-07-09T03:51:35.943
> 
> 标签：solr, lucene

感谢您阅读此问题。

我在我的应用程序中使用 Solr 作为搜索引擎。

当用户使用“java 设计模式”进行搜索时。我们希望 Solr 返回的文档完全包含“java 设计模式”，而不是“设计模式 java”或“java 模式设计”......文档中的术语被索引：“设计”、“模式”、“java”......其他术语.

我该如何实现这个？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:50:56.820

您需要检查[SpanNearQuery](http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/)这将有助于将术语设置为与搜索的顺序相同。

> SpanNearQuery 将寻找在给定距离内的多个 SpanQuery。您可以指定跨度必须按指定的顺序出现，或者不应考虑该顺序。这些 SpanQuery 可以是任意数量的 TermQuery、其他 SpanNearQuery 或下面提到的其他 SpanQuery 之一。您可以任意嵌套，例如 SpanNearQuerys 可以包含其他 SpanNearQuerys，其中还包含其他 SpanNearQuerys 等。

有一个[SurroundQueryParser](http://wiki.apache.org/solr/SurroundQueryParser)可以帮助您创建这些查询，但它尚未发布。

您可以通过修改 Dismax 或 Edismax 解析器来创建一个新的解析器来创建跨度查询，而不是短语查询，并且 0 斜率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T07:05:50.620

您可以使用[PhraseQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/org/apache/lucene/search/PhraseQuery.html)。在双引号之间发送查询将返回完全匹配的结果。

Solr FAQ 页面中还有一个问题，它解释了[如何在一个术语附近搜索一个术语。](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_search_for_one_term_near_another_term_.28say.2C_.22batman.22_and_.22movie.22.29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T09:06:27.713

The trick is that spaces should replaces with\ to avoid it

**Example**: if we search with `typeOfChange:*Cavity Ids*` (it will not return anything) but if we use the `pattern typeOfChange:*Cavity\ Ids*` (it will return data)

What can help is:

```
ClientUtils.escapeQueryChars(value.toString()) 
```

And It's **implementation**:

```
 public static String escapeQueryChars(String s) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < s.length(); i++) {
      char c = s.charAt(i);
      // These characters are part of the query syntax and must be escaped
      if (c == '\\' || c == '+' || c == '-' || c == '!'  || c == '(' || c == ')' || c == ':'
        || c == '^' || c == '[' || c == ']' || c == '\"' || c == '{' || c == '}' || c == '~'
        || c == '*' || c == '?' || c == '|' || c == '&'  || c == ';' || c == '/'
        || Character.isWhitespace(c)) {
        sb.append('\\');
      }
      sb.append(c);
    }
    return sb.toString();
  } 
```

# ruby-on-rails - （Rails）从不同视图中的控制器访问方法

> ID：11388908
> 
> 赞同：1
> 
> 时间：2012-07-09T03:55:19.913
> 
> 标签：ruby-on-rails, ruby, views, controllers

在 Rails 中，我如何访问，例如，从 Home 视图中的 Post 控制器访问方法？我很确定它涉及助手，但我似乎无法正确处理。

如果这个问题已经被问过，我很抱歉，但我不知道要寻找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:23:31.570

1.  如果您要访问的方法`PostController`是 7 个 CRUD 函数之一，我建议您弄清楚要复制的功能并将其移动到单独的方法中，然后执行第 2 步。
2.  将您要分享的方法移入`PostsHelper`. 然后，您可以 从那里`include PostsHelper`进入`HomeController`并使用这些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:37:08.840

您可以将方法放在帮助程序模块中，也可以在控制器中使用 helper_method，（查看过去的[stackoverflow 问题](https://stackoverflow.com/questions/3549713/controller-helper-method)以获取有关 helper_method 的更多信息。

# hadoop - 给定文件路径，是否有任何 API 可以按顺序获取文件的 blockId？

> ID：11388909
> 
> 赞同：3
> 
> 时间：2012-07-09T03:55:20.620
> 
> 标签：hadoop, hdfs

给定一个表示文件的字符串，例如“filepath”，如何获取blockIds？

我知道我可以构造一个路径而不是创建一个文件系统，但不知道如何继续获取 blockIds。

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:09:47.777

在命令行中，您可以使用 fsck 命令获取文件阻止列表：

```
hadoop@Studio-1555:/opt/hadoop/hadoop-1.0.2/bin$ ./hadoop fsck /hadoop/mapred/system/jobtracker.info -files -blocks
FSCK started by hadoop from /127.0.0.1 for path /hadoop/mapred/system/jobtracker.info at Mon Jul 09 06:57:14 EDT 2012
/hadoop/mapred/system/jobtracker.info 4 bytes, 1 block(s):  OK
0\. blk_-9148080207111019586_1001 len=4 repl=1 
```

至于以编程方式，我不确定您是否可以做比 DFSck 程序所做的更多的事情，并对 FsckServlet 执行查询并解析结果。从 FileSystem.getBlockLocations(..) 返回的 BlockLocation 对象不会为您提供块 ID，但我猜它们是 HDFS 的内部机制，可能不容易暴露给客户端。

# android - 我应该为不同的 Android API 级别创建多个版本的应用吗？

> ID：11388911
> 
> 赞同：0
> 
> 时间：2012-07-09T03:55:38.533
> 
> 标签：android

当前跨设备的 Android 版本分布可在以下位置找到：

[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

我即将创建一个应用程序（不是游戏），我想知道是否应该创建它的三个不同版本：一个用于 ICS 及更高版本，一个用于 Froyo、Gingerbread 和 Honeycomb，一个用于 Eclair 和甜甜圈。我觉得这是一个非常糟糕的主意，但我想充分利用较新的操作系统，而不必牺牲与较低 Android 版本的兼容性，对于较低的 Android 版本，可能有一种更简单的方法，例如 UI。

有什么想法吗？经验丰富的 Android 开发人员将如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:05:37.780

您可以使用[支持库](http://developer.android.com/tools/extras/support-library.html)，它允许您使用早期 Android 平台上的片段等 ICS 功能。

您应该考虑哪些平台值得支持。例如，[当前数据](http://developer.android.com/about/dashboards/index.html)表明，Donut 约占当前市场的 0.5%。

如果您要通过 Google Play 提供应用程序，它支持单个应用程序的多个 .apk 文件，针对不同的 api 级别。不过，这确实给您带来了一些维护上的麻烦，我建议您不要这样做。此外，其他市场（如亚马逊的 Appstore）不支持每个应用程序多个 .apk 文件；您必须作为两个单独的应用程序发布。

您还应该阅读有关支持[不同平台版本](http://developer.android.com/training/basics/supporting-devices/platforms.html)的文档。它提供了有关该主题的指导。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T04:05:59.183

一般来说，没有。有多种方法可以利用较新的操作系统功能，因此除非核心功能依赖于 ICS 上已经提供的功能，否则请使用单个应用程序。有一些库将 ICS 功能向后移植到旧版本（Android 兼容性库、ActionBarSherlock 等），因此您可以在所有平台上获得大多数东西。您可以使用不同的资源（布局、图像）来覆盖设备之间的屏幕尺寸/密度等差异。

# oauth - 基于组权限的 API 的 OAuth

> ID：11388917
> 
> 赞同：4
> 
> 时间：2012-07-09T03:56:39.420
> 
> 标签：oauth, oauth-2.0

我正在开发一个 API，我们的客户公司将使用它来访问公司特定的数据。我们已经基本准备好 API，现在正在研究如何保护通信。显而易见的选择是 OAuth(2?)，但在我们的例子中，对 API 的访问不是特定于用户，而是特定于公司。

例如，我们将有一个连接到 API 的移动应用程序，并且选择安装该应用程序的特定公司的每个人都应该可以访问 API，而无需任何额外的身份验证/OAuth 舞蹈。

高级别的想法是使用共享密钥对特定客户端应用程序进行硬编码，以便它们只能访问正确的数据 - 这不是 OAuth，而是一些自定义解决方案......但在某些时候，它*可能*是可能的我们还将在 OAuth 更合适的情况下按个人权限进行个人操作，因此基于标准和未来友好的东西是理想的解决方案。

任何指针？只是试图以最佳角度填补空白以继续前进。仔细阅读，这似乎类似于服务器到服务器模型，[Apigee 建议不要](http://blog.apigee.com/detail/oauth_for_server-to-server_apis/)使用 OAuth。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:05:58.047

是的，这绝对**不是**OAuth 旨在解决的问题。Apigee 对双向 SSL 的建议是服务器到服务器身份验证/授权的正确方法。您为每台服务器颁发一个 x509 证书，当它们彼此发起 SSL 连接时，它们会验证彼此的证书是否来自受信任的来源。此功能内置于大多数服务器开发平台中，设置起来并不难。

# objective-c - 如何让 Scripting Bridge 在运行时生成 Objective-C 类？

> ID：11388918
> 
> 赞同：4
> 
> 时间：2012-07-09T03:56:44.910
> 
> 标签：objective-c, cocoa, linker, ld, scripting-bridge

我今天正在更新 Scripting Bridge 胶水文件（用于 Mail.app），并注意到[sdp(1) 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/sdp.1.html)显示：

> 无需创建对应的实现文件；Scripting Bridge 将在运行时创建类实现。

这听起来很酷，但是我得到的生成类没有实现（如预期的那样）：

```
Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_MailApplication", referenced from:
      objc-class-ref in DMBugReportWindowController.o
  "_OBJC_CLASS_$_MailAttachment", referenced from:
      objc-class-ref in DMBugReportWindowController.o
[... more of the same ...]
ld: symbol(s) not found for architecture x86_64` 
```

我不想抑制*所有*未定义的符号，因为这很容易掩盖合法问题，所以我只是使用`-U`（根据[ld(1) 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/ld.1.html)）：

> 指定 symbol_name 可以没有定义。使用 -two_levelnamespace，生成的符号将被标记为 dynamic_lookup，这意味着 dyld 将搜索所有加载的图像。

（我必须使用`-Xlinker -U -Xlinker _OBJC_CLASS_$_MailApplication`这些标志来到达 ld，否则 clang 会为自己保留这些参数。）

显然制作它们`dynamic_lookup`是错误的做法，因为这会在启动时产生动态链接错误：

```
dyld: Symbol not found: _OBJC_CLASS_$_MailApplication
  Referenced from: /Users/jonathon/Library/Developer/Xcode/...
  Expected in: flat namespace
 in /Users/jonathon/Library/Developer/Xcode/... 
```

如果我使用`-force_flat_namespace -undefined suppress`（我不想使用，如上所述），也会发生这种情况。[Scripting Bridge Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html)似乎暗示我做事正确（“准备代码”部分），但没有提到这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:04:04.023

由于该类是动态创建的，因此您无法链接到它。该类将在运行时注册，但不会导出任何符号，并且链接器将无法找到它。

您需要将发送到`MailApplication`和的所有消息替换为和`MailAttachment`的消息。`NSClassFromString(@"MailApplication")``NSClassFromString(@"MailAttachment")`

`[MailApplication class]`变成`NSClassFromString(@"MailApplication")`和`[MailAttachment class]`变成`NSClassFromString(@"MailAttachment")`。

# pdf-generation - 用于邮寄标签/价格标签/自定义页面大小的最佳 PHP 到 PDF 库

> ID：11388919
> 
> 赞同：1
> 
> 时间：2012-07-09T03:57:30.967
> 
> 标签：pdf-generation, tcpdf, fpdf

我正在计划一个 PHP 项目，它将替换用于生成一些 Dymo 标签格式以及 Avery 5160 邮件标签表的基本（离线）模板。我见过无数次提到不同的 PHP-to-PDF 库，但没有一个专门针对时髦的页面大小和输出。有人有什么建议吗？FPDF 似乎在这方面处于领先地位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:51:07.267

TCPDF 基于 FPDF，因此它们非常相似。我在 FPDF 上编写了一个项目，无需对 API 进行任何修改即可切换到 TCPDF。TCPDF 向后兼容 FPDF。但它更智能，以性能为代价提供了更广泛的功能。TCPDF 总是比 FPDF 慢。

您可以将 FPDF 和 TCPDF 用于“时髦的页面大小”和输出。

[您可以在构造函数](http://www.id.uzh.ch/cl/zinfo/fpdf/doc/fpdf.htm)中指定自定义页面大小（例如 123 宽 x 456 高）：

```
$pdf = new FPDF("P", "pt", array(123, 456)); //"P" as portrait orinetaion, pt as measures used 
```

就像我说的那样，TCPDF 是一样的。它还有更多属性：[TCPDF::__construct](http://www.tcpdf.org/doc/classTCPDF.html#a134232ae3ad1ec186ed45046f94b7755)

至于时髦的输出，我认为，对于标签设计，您将需要 Line and Curve 或 Circle。他们都知道[Line](http://www.id.uzh.ch/cl/zinfo/fpdf/doc/line.htm)，但 Curve 有点问题。TCPDF 内置了[圆形](http://www.tcpdf.org/doc/classTCPDF.html#a7e7f5d97a5c33e2245d3860aed35a593)和[曲线，但](http://www.tcpdf.org/doc/classTCPDF.html#a23895bb8d9fae071308f9d307ea638fd)[FPDF](http://www.fpdf.de/downloads/addons/69/)需要一个附加组件。

# django - Django内联外键与父主键不匹配

> ID：11388921
> 
> 赞同：13
> 
> 时间：2012-07-09T03:57:33.430
> 
> 标签：django, django-forms, inline-formset

我需要一些帮助来解决使用内联表单的 django 错误。我似乎无法弄清楚这一点。如果我能在它尝试验证之前弄清楚如何做到这一点，我可能会强制插入 eventID。

当我提交表单时，我收到一个错误：`Hidden field (event): The inline foreign key did not match the parent instance primary key`

有什么办法可以让这段代码工作吗？

下面的代码应该让老师为一个事件注册多个学生。

------ 模型.py ------------

```
class Event(models.Model):
    title = models.CharField(max_length=200)
    description = models.CharField(max_length=200)
    time = models.DateTimeField()
    duration = models.DecimalField(max_digits=5, decimal_places=2)
    location = models.CharField(max_length=200)

# Customer is a parent, teacher, or school
class Customer(models.Model):
    event = models.ForeignKey(Event)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30) 
    address1 = models.CharField(max_length=60) 
    address2 = models.CharField(max_length=60, blank=True) 
    city = models.CharField(max_length=30) 
    state = models.CharField(max_length=2) 
    zipcode = models.CharField(max_length=5) 
    phone_number = models.CharField(max_length=30)
    email = models.EmailField()

# A customer can enroll several students for a single event.
class Attendee(models.Model):
    event = models.ForeignKey(Event)
    sponsor = models.ForeignKey(Customer)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30) 
```

------ forms.py -----------

```
class AttendeeForm(forms.ModelForm):
  event = forms.IntegerField(required=True, widget=forms.HiddenInput())

  class Meta:
    model = Attendee
    fields = ( 'event', 'last_name', 'first_name', 'gender', 'schoolYr', )
    #exclude = ('event', )
    #widgets = {
    #     'dtgPurchase' : DateTimeWidget(),
    #}

  def __init__(self, *args, **kwargs):
      super(AttendeeForm, self).__init__(*args, **kwargs) 
```

--------views.py ----------

```
def register3(request, event_id):
  messages = []
  try:
    event = get_object_or_404(Event, id=event_id)  #Event ID is passed in here.
    AttendeeFormSet = inlineformset_factory(Event, Attendee, form=AttendeeForm, extra=1)
    #AttendeeFormSet = formset_factory(AttendeeForm)
    if request.method == 'POST':
      print "POST"
      formset = AttendeeFormSet(request.POST, request.FILES, prefix='attendees')
      #formset.save(commit=False)
      i=0
      for form in formset.forms:
         print "Form %s " % str(i)
         #  ??  Is is possible to set the event Here? 

      if formset.is_valid():
          attendees = formset.save_all()
          print "Yay!!!"   
          #return redirect('event_view', event_id=event.id)
      else:
          print "Invalid formset"

    else:   # is get method on first step
      formset = AttendeeFormSet(instance=event, prefix='attendees')
      print "Event: %s " % event

  except Event.DoesNotExist:
      raise Http404

  c = Context({
      'messages': messages,
      'event' : event,
      'attendees': formset,
  })
  return prepCxt(request, 'register3.html', c) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-09T04:07:39.373

您可能还需要在 POST 处理中传递实例。

```
formset = AttendeeFormSet(request.POST, request.FILES, prefix='attendees', instance=event) 
```

# node.js - 服务 websocket 的 socket.io 是否需要物理上位于端口 80 上？

> ID：11388924
> 
> 赞同：0
> 
> 时间：2012-07-09T03:58:41.980
> 
> 标签：node.js, websocket, socket.io, haproxy

使用`node.js`和`socket.io`服务`websockets`

是否`socket.io`需要监听端口 80 - 的真实端口`websockets`，或者它可以代理到服务器上的不同端口，例如端口 8011？

浏览器使用`websockets`80/http 进行通信。服务器上`haproxy` 重定向`websockets`到`node.js`.

权利`haproxy`指向`127.0.4.11:80`。这工作正常，但这需要`sudo`运行`node.js`。

宁愿重定向到`localhost:8011`，但不知道是否`socket.io`需要实际在端口 80 上才能`websockets`正确支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:02:39.623

WebSockets（和 Socket.IO）可以在任何端口上运行；大多数开发人员将专门在高编号端口上开发他们的服务器，以避免在开发中以 root 身份运行。此外，Socket.IO wiki 有一个[关于端口的页面，以及哪些端口适用于各种防火墙软件](https://github.com/LearnBoost/socket.io/wiki/Socket.IO-and-firewall-software)。

# android - 如何在 Android 中发布图像

> ID：11388937
> 
> 赞同：3
> 
> 时间：2012-07-09T04:01:35.580
> 
> 标签：android, codeigniter

我有这个表格用于使用 HttpPost 将图像上传到服务器。我是使用 HTML 表单完成的，但它不适用于 Android 的 HttpPost。它响应：“您没有选择要上传的文件”。似乎文件字段尚未发送。

```
<html>
<head>
<title>Upload Form</title>
</head>
<body>

<form action="http://192.168.0.151/index.php/upload/uploadFile" method="post" accept-charset="utf-8" enctype="multipart/form-data">
<input type="file" name="userfile" size="20" />

<br /><br />

<input type="submit" value="upload" />

</form>

</body>
</html> 
```

客户端代码

```
 final HttpClient client = new DefaultHttpClient();
    final HttpPost post = new HttpPost("http://" + hostName + "/upload/uploadFile");
    post.addHeader("enctype", "multipart/form-data");

    final List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("userfile", "/mnt/sdcard/Download/Photos/icecream.png"));

    try {
        final HttpEntity request = new UrlEncodedFormEntity(nameValuePairs);            
        post.setEntity(request);            

        final HttpResponse response = client.execute(post);

        // Get response body.
        final String responseBody = EntityUtils.toString(response.getEntity());
        System.out.println("RESPONSE BODY: " + responseBody);

    } catch (final UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (final ClientProtocolException e) {
        e.printStackTrace();
    } catch (final IOException e) {
        e.printStackTrace();
    } 
```

控制器类

```
class Upload extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->helper(array('form', 'url'));
    }

    public function showForm() {
        $this->load->view('upload_form');
    }

    public function uploadFile() {
        // Header for xml outputing.
        header('Content-type: text/xml; charset=utf-8');

        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '2048';
        $config['max_width']  = '2048';
        $config['max_height']  = '2048';

        $this->load->library('upload', $config);
        if ( ! $this->upload->do_upload())
        {
            // Get error message.
            $error = $this->upload->display_errors();

            // Prepare template.
            $xmlData = file_get_contents(TEMPLATE_XML_DIR . "upload_result.xml");
            $xmlData = str_replace("{IS_SUCCESSFUL}", 0, $xmlData);
            $xmlData = str_replace("{ERROR}", $error, $xmlData);
            echo $xmlData;
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());
            // Prepare template.
            $xmlData = file_get_contents(TEMPLATE_XML_DIR . "upload_result.xml");
            $xmlData = str_replace("{IS_SUCCESSFUL}", 1, $xmlData);
            $xmlData = str_replace("{ERROR}", "", $xmlData);
            echo $xmlData;
        }
    }
} 
```

.....................

**更新解决方案（它适用于我的代码）。请记住将“httpmime-4.2.1.jar”添加到您的构建路径。**

```
public void post(final String url, final List<NameValuePair> nameValuePairs) {
    final HttpClient httpClient = new DefaultHttpClient();
    final HttpContext localContext = new BasicHttpContext();
    final HttpPost httpPost = new HttpPost(url);

    try {
        final MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        for(int index=0; index < nameValuePairs.size(); index++) {
            if(nameValuePairs.get(index).getName().equalsIgnoreCase("userfile")) {
                // If the key equals to "userfile", we use FileBody to transfer the data
                entity.addPart(nameValuePairs.get(index).getName(), new FileBody(new File (nameValuePairs.get(index).getValue())));
            } else {
                // Normal string data
                entity.addPart(nameValuePairs.get(index).getName(), new StringBody(nameValuePairs.get(index).getValue()));
            }
        }

        httpPost.setEntity(entity);

        final HttpResponse response = httpClient.execute(httpPost, localContext);

        final String responseBody = EntityUtils.toString(response.getEntity());
        System.out.println("RESPONSE BODY: " + responseBody);
    } catch (final IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:51:39.613

我刚刚遇到了与图片发布有关的答案。[这有帮助](https://stackoverflow.com/a/2937140/1134705)吗？

# python - 使用 Flask-Assets 在 Flask 中特定于蓝图的资产？

> ID：11388938
> 
> 赞同：9
> 
> 时间：2012-07-09T04:01:41.383
> 
> 标签：python, flask

我对 Flask 很陌生，因为它的价值。我正在使用蓝图来分解我的代码，并尝试使用 Flask-Assets 来提供资产链接。但是，出于某种原因，我无法让 Flask-Assets 在蓝图中工作。

代码结构：

```
/modules
    /base
        __init__.py
    __init__.py
/static
    # ... stuff
/templates
    /layout.html 
```

在 /modules/base/__init__.py 中：

```
from flask import Blueprint, render_template, request
from flask.ext.sqlalchemy import SQLAlchemy
from flask.ext.assets import Environment, Bundle
from flask import current_app as app

default = Blueprint('base', __name__)

assets = Environment(app)

css = Bundle('css/bootstrap.min.css')
assets.register('css_all', css)

js = Bundle('js/jquery-1.7.2.min.js', 'js/bootstrap.min.js')
assets.register('js_all', js)

@default.route('/')
def index():

    return render_template('index/index.html') 
```

基本布局中有这个：

```
{% assets "css_all" %}
    <link rel="stylesheet" href="{{ ASSET_URL }}" />
{% endassets %}
{% assets "js_all" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %} 
```

实际上，我现在 /modules/base/__init__.py 中的内容甚至都不起作用，因为它会抛出“RuntimeError：在应用程序上下文之外工作”。如果我将资产代码移动到索引函数中，它确实可以工作，但是每次我想添加资产时都必须重复该代码似乎很奇怪。有一个更好的方法吗？我错过了什么吗？

***编辑：***根据 codecool 的评论更新 /modules/base/__init__.py，但现在它会引发“TemplateSyntaxError：遇到未知标签‘assets’”错误。我认为这是因为资产对象没有传递到应用程序。

***编辑 2：***因此，从 SQLAlchemy 的工作方式中获取一些建议，我得到了以下工作：

在我的主要 __init__.py 中：

```
from flask import Flask
from modules.base import default, assets as base_assets
from flask.ext.assets import Environment, Bundle

app = Flask(__name__) 
app.register_blueprint(default)

base_assets.init_app(app) 
```

在 base/__init__.py 中：from flask import Blueprint、render_template、request from flask.ext.assets import Environment、Bundle from flask import current_app as app

```
default = Blueprint('base', __name__)

assets = Environment(app)

css = Bundle('css/bootstrap2.min.css')
assets.register('css_all', css)

js = Bundle('js/jquery-1.7.2.min.js', 'js/bootstrap.min.js')
assets.register('js_all', js) 
```

这里的技巧是在蓝图中创建资产，将其导入基本 init，然后在那里调用 .init_app。然而，这失败的地方在于有两个蓝图可以做到这一点。最后一个叫的总是赢。也许可以将其拉出到某个通用模块或其他东西中..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T05:36:21.110

您不需要调用`_get_current_object`方法`current_app`，这就是您收到错误的原因。`current_app`实际上是应用程序的代理。代码应该是这样的：

```
 app = current_app
    assets = Environment(app) 
```

事实上，您不需要将其分配为变量。做这个：

```
 from flask import current_app as app

     assets = Environment(app) 
```

您收到 RuntimeError 因为`_get_current_object`仅在请求正在进行时才可用，否则您必须使用`current_app`. 当您在视图中移动资产初始化代码时，`index`它开始像现在在请求中一样工作。

`_get_current_object`的用法来自 Flask 中的 Signals 功能，您可以在此处阅读有关它的信息[http://flask.pocoo.org/docs/signals/#sending-signals](http://flask.pocoo.org/docs/signals/#sending-signals)。

编辑：

发生这种情况是因为这不是初始化 Flask 资产的正确位置。它必须在`modules/__init__.py`创建应用程序时设置 jinja 环境的位置进行初始化。请记住，蓝图代码仅在访问时运行。所有全局初始化都应在定义您的应用程序的模块中完成，即存在此代码的位置：

```
 app = Flask(__name__)
    assets = Environment(app) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-04T16:36:20.673

> 这里的技巧是在蓝图中创建资产，将其导入基本 init，然后在那里调用 .init_app。然而，这失败的地方在于有两个蓝图可以做到这一点。最后一个叫的总是赢。也许可以将其拉出到某个通用模块或其他东西中..

看看这篇文章。它很好地解释了如何使资产蓝图特定。[https://hackersandslackers.com/flask-assets/#blueprint-specific-bundles](https://hackersandslackers.com/flask-assets/#blueprint-specific-bundles)

您可以在任何地方声明捆绑包。在文章中，它们在单独的文件中声明`assets.py`。或者，您可以在自己声明蓝图的地方设置特定于蓝图的捆绑包。然后将它们导入到您的主项目`__init__.py`文件中，并在您注册蓝图后注册它们。

我在这里修改了你的例子：

`/__init__.py`：

```
from flask import Flask
from flask-assets import Environment
from modules.base import bp as base_bp, assets as base_assets
# Assuming more blueprints in addition to modules.base...
from modules.home import bp as home_bp, assets as home_assets
from modules.auth import bp as auth_bp, assets as auth_assets

# Declare Flask App
app = Flask(__name__)

# Register Blueprints
app.register_blueprint(base_bp)
app.register_blueprint(home_bp)
app.register_blueprint(auth_bp)

# Register Assets
bundles = {**base_assets, **home_assets, **auth_assets}  # Combines all bundle-dictionaries into one
assets = Environment(app)
assets.register(bundles) 
```

`/modules/base/__init__.py`：

```
from flask import Blueprint, render_template
from flask-assets import Bundle

# Declare Blueprint
bp = Blueprint("base", __name__)

# Declare Blueprint-Specific Assets
bundles = {
    "base_css": Bundle(
        "base/css/bootstrap.min.css"
    ),
    "base_js": Bundle(
        "base/js/jquery-1.7.2.min.js",
        "base/js/bootstrap.min.js"
    )
}

@bp.route('/')
def index():
    return render_template('index/index.html') 
```

`/modules/base/templates/layout.html`：

```
{% assets "base_css" %}
    <link rel="stylesheet" href="{{ ASSET_URL }}" />
{% endassets %}
{% assets "base_js" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %} 
```

# html - 身体背景颜色不会改变

> ID：11388939
> 
> 赞同：0
> 
> 时间：2012-07-09T04:01:41.840
> 
> 标签：html, css

我不知道为什么，但是身体的背景颜色不会变成我想要的颜色。我可以让容器 div 改变。但是，这会产生白色边框，这很尴尬。

这是我的链接：[http ://weddingtesters.net76.net/index.html](http://weddingtesters.net76.net/index.html)

```
body {background-color: #dde5ec;}

#main {
width: 100%;
height:auto; 
overflow:auto;
position:relative; 
margin:0px;
background-color:#dde5ec;}

#main div {
float:left; }
#picture { 
width: 777px; 
height:334px; 
position: relative; 
margin-bottom:0px; 
margin-left: 200px; 
background: url(http://weddingtesters.net76.net/pictures/johnandlaura.png);
z-index: 10;
border-left:2px solid white;
border-right:2px solid white;}

#nav { 
width:200px; 
height: 400px; 
position:relative;  
margin-left:200px;
padding:0px;
margin-bottom:25px;
background-color:#C3FDB8;
border-left: 2px solid white;
border-bottom: 2px solid white;}

#text { 
width:577px; 
height: 400px;  
position: relative; 
margin-left:0px;
padding:0px;
margin-bottom:25px;
background-color:#C3FDB8;
border-right:2px solid white;
border-bottom: 2px solid white;}

h1 { 
border-right: 1px dashed black;
font: 25pt calibri; 
color: black; 
text-align: center;
margin:20px;} 

h2 {
font: 10pt candara;}

h3{ 
background: url(http://weddingtesters.net76.net/pictures/transparant.png);
width:100%; 
height:125px;
font: 20pt Palatino Linotype serif; 
color:black;
font-style : italic;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:10:56.577

```
body {
    background-color: #dde5ec;
    margin:0 auto;
} 
```

`body`注意样式定义的第二行。`#main`这将删除您的div周围的白色边框。另外，你的风格应该没问题，我不明白为什么它不应该工作。

另外，对于 div 周围的 2px 白色边框`#picture`，那是因为实际上有一个`2px solid white`边框。

**编辑**

您的 CSS 表 (http://weddingtesters.net76.net/mainstylesheet.css) 写错了。它应该写成如下：

```
body {
    background-color:#dde5ec;
}

#main {
    width: 100%;
    height:auto; 
    overflow:auto;
    position:relative; 
    margin:0px;
    background-color:#dde5ec;
}

#main div {
    float:left; 
}

#picture { 
    width: 777px; 
    height:334px; 
    position: relative; 
    margin-bottom:0px; 
    margin-left: 200px; 
    background: url(http://weddingtesters.net76.net/pictures/johnandlaura.png);
    z-index: 10;
    border-left:2px solid white;
    border-right:2px solid white;
}

#nav { 
    width:200px; 
    height: 400px; 
    position:relative;  
    margin-left:200px;
    padding:0px;
    margin-bottom:25px;
    background-color:#C3FDB8;
    border-left: 2px solid white;
    border-bottom: 2px solid white;
}

#text { 
    width:577px; 
    height: 400px;  
    position: relative; 
    margin-left:0px;
    padding:0px;
    margin-bottom:25px;
    background-color:#C3FDB8;
    border-right:2px solid white;
    border-bottom: 2px solid white;
}

h1 { 
    border-right: 1px dashed black;
    font: 25pt calibri; 
    color: black; 
    text-align: center;
    margin:20px;
} 

h2 {
 font: 10pt candara;    
}

h3{ 
    background: url(http://weddingtesters.net76.net/pictures/transparant.png);
    width:100%; 
    height:125px;
    font: 20pt Palatino Linotype serif; 
    color:black;
    font-style : italic;
} 
```

这就是如何正确设置 CSS 表的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:15:39.513

因此，首先，您应该考虑将一些内容添加到您的项目中。我要指出的主要一点是您没有重置样式表，这就是您可能看到“白色边框”的原因。查看此重置样式表，了解更多信息： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

所以当我查看这个（PC/Chrome v20）时，身体不起作用。但是当我放入这个重置样式表时，它可以工作:)

这个重置样式表也应该解决你的“白色边框”问题，虽然我不是 100% 确定我知道你的意思。正如[Spiritfyre](https://stackoverflow.com/users/563460/spiritfyre)所说，您在元素上有边框样式`#picture`，所以我认为这是故意的..？

如果这不能更详细地解释它，请告诉我，我会尽力提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T04:24:49.177

嘿，我已经检查了您的网站，现在您像这样创建了一个 syte-sheet

您的 css 链接这是不正确的编码 [http://weddingtesters.net76.net/mainstylesheet.css](http://weddingtesters.net76.net/mainstylesheet.css)

```
<html>

<body> 

<style type="text/css"> 
BODY {background-color:#dde5ec;
margin:0px auto;}
#main {
    width: 100%;
    height:auto; 
    overflow:auto;
    position:relative; 
margin:0px;
background-color:#dde5ec;

}
#main div {
float:left; 
}
#picture { 
width: 777px; 
height:334px; 
position: relative; 
margin-bottom:0px; 
margin-left: 200px; 
background: url(http://weddingtesters.net76.net/pictures/johnandlaura.png);
z-index: 10;
border-left:2px solid white;
border-right:2px solid white;
}
#nav { 
    width:200px; 
    height: 400px; 
    position:relative;  
margin-left:200px;
    padding:0px;
margin-bottom:25px;
background-color:#C3FDB8;
border-left: 2px solid white;
border-bottom: 2px solid white;
}
#text { 
    width:577px; 
    height: 400px;  
    position: relative; 
    margin-left:0px;
    padding:0px;
margin-bottom:25px;
background-color:#C3FDB8;
border-right:2px solid white;
border-bottom: 2px solid white;
}
h1 { 
border-right: 1px dashed black;
    font: 25pt calibri; 
    color: black; 
    text-align: center;
margin:20px;
} 
h2 {
 font: 10pt candara;

}
h3{ 
background: url(http://weddingtesters.net76.net/pictures/transparant.png);
width:100%; 
height:125px;
font: 20pt Palatino Linotype serif; 
color:black;
font-style : italic;
}

</style>

</body>
</html> 
```

此**样式表**不**正确**

请**替换成这个**

```
body {background-color:#dde5ec;
margin:0px auto;}
#main {
    width: 100%;
    height:auto; 
    overflow:auto;
    position:relative; 
margin:0px;
background-color:#dde5ec;

}
#main div {
float:left; 
}
#picture { 
width: 777px; 
height:334px; 
position: relative; 
margin-bottom:0px; 
margin-left: 200px; 
background: url(http://weddingtesters.net76.net/pictures/johnandlaura.png);
z-index: 10;
border-left:2px solid white;
border-right:2px solid white;
}
#nav { 
    width:200px; 
    height: 400px; 
    position:relative;  
margin-left:200px;
    padding:0px;
margin-bottom:25px;
background-color:#C3FDB8;
border-left: 2px solid white;
border-bottom: 2px solid white;
}
#text { 
    width:577px; 
    height: 400px;  
    position: relative; 
    margin-left:0px;
    padding:0px;
margin-bottom:25px;
background-color:#C3FDB8;
border-right:2px solid white;
border-bottom: 2px solid white;
}
h1 { 
border-right: 1px dashed black;
    font: 25pt calibri; 
    color: black; 
    text-align: center;
margin:20px;
} 
h2 {
 font: 10pt candara;

}
h3{ 
background: url(http://weddingtesters.net76.net/pictures/transparant.png);
width:100%; 
height:125px;
font: 20pt Palatino Linotype serif; 
color:black;
font-style : italic;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T05:44:38.000

下面列出的 CSS 文件中存在一些问题：

1.  CSS 文件不应环绕`<html>`,`<head>`或`<body>` tag 或任何其他 html 标记。
2.  `<style>`只有当 CSS 是内部的（在 html 文档中）时才应该使用Style( ) 标签。
3.  background-color 属性被赋予`#main`div 所以，body 没有像`#main`body & 的子元素那样改变背景颜色，宽度和高度为 100%。

# r - 如何在 R 中重新采样和插值时间序列数据？

> ID：11388940
> 
> 赞同：7
> 
> 时间：2012-07-09T04:01:51.773
> 
> 标签：r, time-series, interpolation

我大约每 5 分钟记录一次测量值：

```
2012-07-09T05:30:01+02:00   1906.1  1069.2  1093.2  3   1071.0  1905.7  
2012-07-09T05:35:02+02:00   1905.7  1069.2  1093.0  0   1071.5  1905.7  
2012-07-09T05:40:02+02:00   1906.1  1068.7  1093.2  0   1069.4  1905.7  
2012-07-09T05:45:02+02:00   1905.7  1068.4  1093.0  1   1069.6  1905.7  
2012-07-09T05:50:02+02:00   1905.7  1068.2  1093.0  4   1073.3  1905.7 
```

第一列是数据的时间戳。其余列是记录的数据。

我需要重新采样我的数据，以便每 15 分钟有一行，例如：

```
2012-07-09T05:15:00 XX XX XX XX XX XX
2012-07-09T05:30:00 XX XX XX XX XX XX
.... 
```

（此外，记录的数据中可能存在间隙，我希望将超过一小时的间隙替换为一行`NA`值。）

我可以想到几种手动编程的方法，但是在 R 中是否有内置支持来做这种事情？我查看了用于处理时间序列数据（等）的不同库，`zoo`但`chron`找不到任何令人满意的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-14T15:46:07.170

您可以使用`approx`或相关的`approxfun`. If`t`是由采样数据的时间点组成的向量，如果`y`是包含数据的向量，则`f <- approxfun(t,y)`创建一个函数`f`，该函数在时间点之间线性插值数据点。

例子：

```
# irregular time points at which data was sampled
t <- c(5,10,15,25,30,40,50)
# measurements 
y <- c(4.3,1.2,5.4,7.6,3.2,1.2,3.7)

f <- approxfun(t,y)

# get interpolated values for time points 5, 20, 35, 50
f(seq(from=5,to=50,by=15))
[1] 4.3 6.5 2.2 3.7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-06T09:18:01.727

如果您正在寻找内置的下采样（不支持上采样），您也可以使用该`xts`软件包。

```
data(sample_matrix)
samplexts <- as.xts(sample_matrix)
to.monthly(samplexts)
to.yearly(samplexts) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T14:17:46.260

CrossValidated 对此进行了很好的讨论：[https](https://stats.stackexchange.com/questions/31666/how-can-i-align-synchronize-two-signals) ://stats.stackexchange.com/questions/31666/how-can-i-align-synchronize-two-signals 。该答案的作者“推出了他自己的”插值和重采样代码。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-10-25T15:41:05.653

你应该看看 openair 包，它有很多用于处理时间序列数据的“工具”。

# iphone - iPhone WebView 中的图片太大...缩放不适合不是一个选项

> ID：11388941
> 
> 赞同：0
> 
> 时间：2012-07-09T04:02:21.397
> 
> 标签：iphone, html, regex, uiwebview, uiimage

我正在开发一个博客应用程序。我解析 RSS 提要，然后获取项目元素之一并构建`html`字符串。我必须`UIWebView`关闭 Scales To Fit，否则文本都被塞进一页，而且太小而无法阅读。如果我打开比例尺以适应`UIWebView`，则文本是完美的，但如果博客中有较大的图片，它们会很好地延伸`width`到页面之外。一张这样的照片是

```
img class="aligncenter size-full wp-image-4532" title="Father_and_daughter_1" 
src="http://treymorgan.net/wp-content/uploads/2012/06/Father_and_daughter_1.jpg" alt="" 
width="590" height="342" / 
```

在这种情况下，宽度远远超过 320 像素。有什么方法可以`regex`用来检测宽度是否大于 320，如果是这样，是否将`width`and替换为`height`适合的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:00:16.280

我认为您的问题来自视口。你应该看看[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)。

# php - 设置默认下拉值

> ID：11388942
> 
> 赞同：0
> 
> 时间：2012-07-09T04:02:25.343
> 
> 标签：php, forms

我有一个向我的数据库提交 2 个值的表单，当表单加载时，我检查数据库中是否已有值，我一直在尝试使用这些值并将它们设置为我的下拉框中的默认值。任何帮助，将不胜感激。谢谢

```
<form method="post" action="add_res.php?id=<? echo $id;?>">
    <fieldset>
    <label>From</label>
    <select name='one' id='one'>
    <?
        for($hours=0; $hours<24; $hours++) // the interval for hours is '1'
            for($mins=0; $mins<60; $mins+=30) // the interval for mins is '30'
                echo '<option>'.str_pad($hours,2,'0',STR_PAD_LEFT).':'.str_pad($mins,2,'0',STR_PAD_LEFT).'</option>';
    ?>
    </select><br><br>
    <select name='two' id='two'>
    <?
        for($hours=0; $hours<24; $hours++)
            for($mins=0; $mins<60; $mins+=30)
                echo '<option>'.str_pad($hours,2,'0',STR_PAD_LEFT).':'.str_pad($mins,2,'0',STR_PAD_LEFT).'</option>';
    ?>
    </select>
    </fieldset>
    <input type="submit" value="Restrict" class="btn_searchp"></a>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:16:58.983

您必须组合该值，然后与数据库值进行比较

```
<select name="one" id="one">
<?php for loop
$timeToDisplay = sprintf('%s:%s',str_pad($hours,2,'0',STR_PAD_LEFT),
                                 str_pad($mins,2,'0',STR_PAD_LEFT));
$selected = if($row['timeRow'] == $timeToDisplay ) ? 'selected="selected"' : '';
// let $row['timeRow'] is the value retrieve from database 
?>
   <option value="<?=php echo $timeToDisplay;?>" <?php echo $selected;?> >
     <?php echo $timeToDisplay?>
   </option>
</select> 
```

**参考 ：**

[`sprintf`](http://php.net/manual/en/function.sprintf.php)

[`ternary operator`](http://php.net/manual/en/language.operators.comparison.php)

# php - jquery获取输入的第二个值

> ID：11388946
> 
> 赞同：0
> 
> 时间：2012-07-09T04:03:40.510
> 
> 标签：php, jquery, insert

我有这个 jQuery 代码，当我单击 Select 的第一个值时它会插入数据库，但是当我单击 Select 的第二个值时，它会再次插入 Select 的第一个值。如何插入选择的第二个值。示例链接是：[http ://cocopop12.site11.com/search/index.php](http://cocopop12.site11.com/search/index.php)

我的 jQuery 代码是：

```
$(function() {
    $(".videoThumbS").click(function() {
        var dataString = $("#v_w_id_value").val();
        $.ajax({ 
            type: 'POST',                                  
            url: 'api.php',
            data: { v_w_id: dataString },
            dataType: 'html',               
            success: function(data)  
            {
            var v_w_id_value = data[0];           //get name
            $('#selected_thumbs').html("yt id:" + v_w_id_value );     //Set output element html
            } 
        });    
    });
}); 
```

我的表格带有 foreach 值。

```
<form method="post" action="">
<input id="v_w_id_value" type="hidden" name="v_w_id" value="OIUIUNKLJ" />
<input class="videoThumbS" type="button" name="selectSel" value="Select" id="selectbut" />
</form> 
```

例如，隐藏中的值我只是插入它，但它是循环来区分的。价值。

然后它将插入到数据库中。

```
<?php
include ( 'class/conn.php' );
$v_watch_id = $_POST['v_w_id'];
$selected_videos = mysql_query( "INSERT INTO s_vids VALUE('', '$v_watch_id', NOW() )" ) or die ( mysql_error() );
?> 
```

插入数据库正在工作，但只有插入的第一个值，所以当我单击第二个或第三个 Select 按钮时，它不会读取 jQuery。我该如何解决？

在firefox控制台javascript上使用firebug我可以看到选择按钮的不同值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:07:26.243

我发现您的解释有点令人困惑，但我*认为*您是在说您在页面上多次重复了该表单及其两个输入元素，并且当单击特定的“选择”按钮时，您想要提交其关联的隐藏值。

如果是这样，请尝试对您的功能进行以下细微更改：

```
var dataString = $(this).siblings('input[name="v_w_id"]').val(); 
```

在您的单击处理程序`this`中是单击元素，因此`$(this).siblings()`获取单击元素的同级元素，并使用选择器`'input[name="v_w_id"]'`获取该特定同级元素。

你这样做的方式是用 id 选择隐藏的输入`v_w_id_value`，这意味着它总是会选择同一个。id 属性应该是唯一的，也就是说，没有两个元素应该具有相同的 id - 如果您违反此规则，浏览器通常会显示页面 OK，但是您的 JS 将无法正常工作：对于大多数浏览器选择重复的 id 将返回具有该 id 的第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:09:54.973

那是因为一旦你的成功函数运行，你的程序就会出错，因为 data[0] 是未定义的。要修复，请在 php 文件中尝试这个

```
<?php
include ( 'class/conn.php' );
$v_watch_id = $_POST['v_w_id'];
$selected_videos = mysql_query( "INSERT INTO s_vids VALUE('', '$v_watch_id', NOW() )" ) or die ( mysql_error() );
echo '["'.$v_watch_id.'"]';
?> 
```

# iphone - stopMonitoringForRegion 具有虚拟 lat long 但正确的“标识符”

> ID：11388961
> 
> 赞同：4
> 
> 时间：2012-07-09T04:05:49.107
> 
> 标签：iphone, objective-c, cllocationmanager

我在我的应用程序中安排和取消区域监控，如下所示。

```
- (void) setLocationReminderForLatitude:(double) latitude longitude:(double) longitude radiusInMetres:(double) radius withIdentifier:(NSString *) identifier
{
    CLRegion *region = [[CLRegion alloc] initCircularRegionWithCenter:CLLocationCoordinate2DMake(latitude, longitude) radius:radius identifier:identifier];
    [coreLocation startMonitoringForRegion:region desiredAccuracy:50]; //50 metres
}

- (void) cancelLocationNotification:(NSString *)identifier
{
    CLRegion *region = [[CLRegion alloc] initCircularRegionWithCenter:CLLocationCoordinate2DMake(0.0, 0.0) radius:100.0 identifier:identifer];
    [coreLocation stopMonitoringForRegion:region];
} 
```

在取消区域监控时，我可能不一定有我最初用于开始监控该区域的中心和半径信息，但标识符是正确的。这行得通吗？

该文档没有提到任何关于此的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T18:34:54.243

您需要拉取正确的区域以禁用监控。我要做的是遍历所有启用的区域，然后停止监视与您的标识符匹配的区域。

```
for (CLRegion *region in [locationController.locationManager monitoredRegions]) {
    if (region.identifier isEqual:yourIdentifier]) { // change this to match your identifier format
        [locationController.locationManager stopMonitoringForRegion:region];
    }
} 
```

# node.js - socket.io 向特定用户发送消息

> ID：11388967
> 
> 赞同：0
> 
> 时间：2012-07-09T04:07:19.270
> 
> 标签：node.js, socket.io, private-messaging

有人可以告诉我我的代码有什么问题吗？我正在尝试使用 socket.io 从一个用户向另一个用户发送私人消息。我认为问题出在线路的某个地方

```
io.sockets.socket(targetUser).emit('private message', tstamp(), socket.nickname, linkify(msg)); 
```

问题是消息没有传递给客户端，或者至少没有附加到 div。我不确定如何准确排除问题所在。

相关代码如下 - 如果这还不够，我可以添加整个代码..：

谢谢您的帮助。我正在学习 node.js 和 socket.io - 虽然进展缓慢！

在客户端（发送）：

```
 function startPrivateChat(targetUser, sendingUser){
        if(targetUser !=sendingUser){
        var privateMessage1="starting private chat with " + targetUser + ". My name is " + sendingUser;
        var chatBoxId= targetUser + 'ChatBox';
        $("#content").append('<div class="chatBox" id="' + chatBoxId + '">' + sendingUser + ', ' + targetUser + '</div>');
        $('#' + chatBoxId).append('new private chat');
        $('#' + chatBoxId).dialog();
        privateMessage(tstamp(), myNick, privateMessage1);
        //socket.emit('private message', targetUser, privateMessage1);
        clear();    
        }
    } 
```

服务器：

```
socket.on('private message', function(targetUser,msg) {        
    io.sockets.socket(targetUser).emit('private message', tstamp(), socket.nickname, linkify(msg));
    updateLog('private message', socket.nickname, msg);
   }); 
```

在客户端（接收）：

```
socket.on('private message', privateMessage);
function privateMessage (msg_time, from, msg) {
      $('#chatLogDiv').append($('<p>').append($('<small>').text(msg_time)).append($('<b>').text(from), linkify(msg)));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T09:20:53.713

我得到了这个工作！

在 node.js-server 上：

```
 socket.on("SendMessage", function (value) {
        var userIdToRecieve = theOnlyUserToRecieveString;
        io.sockets.emit("SendAMessage", socket.userId, value, userIdToRecieve);
    }); 
```

在客户端javascript端：

```
socket.on("SendAMessage", function (userId, value, userIdToRecieve) {
    // Write to the conversation window

    if (userIdToRecieve == myLocalUserID) {
        console.log("I shalleth recieve");
    }

}); 
```

# java - 如何解析可能具有不同日期格式的字符串输入？

> ID：11388969
> 
> 赞同：0
> 
> 时间：2012-07-09T04:07:38.827
> 
> 标签：java

例如，我可能有如下输入字符串：

2012-07-23T03:30:00.000Z

或者

2012-06-25T13:00:00.000+08:00

对于这两种情况，我有不同的日期格式来解析，例如如果是 2012-07-23T03:30:00.000Z 那么我需要使用 yyyy-MM-dd'T'KK:mm:ss'.000Z

那么如果是 2012-06-25T13:00:00.000+08:00 我需要使用 yyyy-MM-dd'T'KK:mm:ss'.000+08:00

可以进行日期解析以找出格式吗？

但是如果我在我的日志文件中解析，我可能会看到很多异常被抛出。

还是有更优雅的方式来处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:13:28.440

您可以为每种可能的格式使用`try`/`catch`块来解析不同的时间格式。只有当所有解析都失败时，您才会传递异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:14:17.860

我建议使用 commons-lang 项目中的 DateUtils。您可以向它传递一系列格式来尝试解析您的日期。如果你问我，很干净。 [http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/time/DateUtils.html#parseDate(java.lang.String](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/time/DateUtils.html#parseDate(java.lang.String) , java.lang.String...)

例如：

```
Date d = DateUtils.parse("2012-01-01", "yyyyMMdd", "MM/dd/yyyy", "yyyy-MM-dd"); 
```

将成功解析，因为最终模式将起作用。

# jquery - jQuery 与 Fancybox 在动态创建的元素上。仅适用于第二次点击，从不适用于第一次

> ID：11388972
> 
> 赞同：1
> 
> 时间：2012-07-09T04:07:44.327
> 
> 标签：jquery, fancybox

我正在使用 Fancybox 和幻灯片。我有一个“动态”从数据库加载项目的幻灯片。

```
<div id="#slideshow">
    <div id="#slide-description">
        <a href="http://localhost/test.php">Fancybox here</a>
    </div>
</div> 
```

注意：`#slideshow`div 中的所有内容都是由 jQuery 动态生成的。

我的 javascript 看起来像这样：

```
$("#slide-description").on('click', 'a', function() {
    console.log('triggerd click!');
    $(this).fancybox({
        type: "ajax",
        ajax: {
            dataFilter: function(data) {                
                return $(data).find("#portfolio-info");
            }
        },
        onComplete: function(){
            console.log('done.');
        }
    });
    return false; 
}); 
```

我的问题是它仅在我单击链接两次时才有效 - `<a href="http://localhost/test.php">Fancybox here</a>`。

当我第一次单击链接时，`triggered click!`已登录控制台但没有`GET`请求。然后当我第二次点击它时，它就起作用了！

安慰：

```
triggerd click! /* 1st click */
GET http://localhost:8888/raydar/portfolio/frucor-1/ 200 OK /* 2nd click */
triggerd click! /* 2nd click */
done. /* 2nd click */ 
```

任何答复将不胜感激，因为我已经花了几个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:13:58.780

作为对评论部分问题的回复：

如果问题是正在跟踪链接，则需要防止默认行为：

```
$("#slideshow").on('click', 'a', function(e) {
  e.preventDefault();
  /* the rest */
}); 
```

请注意，您也可以`return false;`在函数末尾使用，这可以防止默认行为并停止传播，如果您需要的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:59:49.663

Greg Pettit 的评论和回答让我知道如何以另一种方式做到这一点。我重新阅读了 Fancybox 的文档，发现对于 Ajax 请求，有一个`url`选项。

来自[http://fancybox.net/blog](http://fancybox.net/blog)：

```
$("#login_form").bind("submit", function() {

    if ($("#login_name").val().length < 1 || $("#login_pass").val().length < 1) {
        $("#login_error").show();
        $.fancybox.resize();
        return false;
    }

    $.fancybox.showActivity();

    $.ajax({
        type        : "POST",
        cache   : false,
        url     : "/data/login.php", /*i'm talking about this*/
        data        : $(this).serializeArray(),
        success: function(data) {
            $.fancybox(data);
        }
    });

    return false;
}); 
```

有了这个，我想出了这个：

```
$("#slideshow").on('click','#slide-description a', function() {
    $.fancybox({
        type: "ajax",
        ajax: {
            type: "GET",
            url: $(this).attr("href"), /*we get the URL from "#slide-description a" and load it*/
            dataFilter: function(data) {                
                return $(data).find("#portfolio-info");
            }
        },
        onComplete: function(){
            console.log('done.');
        }
    });
    return false; 
}); 
```

# php - 如何从自动填充随机数的下拉菜单中生成一组文本框？

> ID：11388976
> 
> 赞同：0
> 
> 时间：2012-07-09T04:08:14.997
> 
> 标签：php, javascript, jquery

我想使用一个下拉菜单来允许选择一组三个文本框，其中每个文本框的数字集应该包含一组唯一的数字。目前，下拉菜单确实创建了所需数量的文本框集，例如，选择 5 会生成一组 5 个填充有随机数的文本框。问题是它们都是相同的随机数集。

我想要下拉菜单中的选定数字会生成所需的文本框集，然后单击“生成数字”按钮将用随机数填充文本框集，其中每个集都是唯一的。这可以用 Javascript、JQuery 完成还是我需要使用其他东西？

到目前为止，这是我的代码。非常感谢您的帮助。

```
<?php
//generate set of random numbers from 1 to 10000
function RandomNumbers($min, $max, $quantity) {
    $numbers = range($min, $max);
    shuffle($numbers);
    return array_slice($numbers, 0, $quantity);
}
$num = (RandomNumbers(1,10000,10000));
$random1 = $num[0];
$random2 = $num[1];
$random3 = $num[2];
?>

<html>
<head>
<script type='text/javascript' src='js/jquery.js'></script>
</head>
<script type="text/javascript">
//this is the code which I am not sure how to develop >>>
    $(document).ready(function(){
        $counter = 0; // initialize 0 for limiting textboxes
        $('#dropdownadd').change(function(){
            $('#dropdowndiv').html(""); // when the dropdown change set the div to empty
            $loopcount = $(this).val(); // get the selected value
            for (var i = 1; i <= $loopcount; i++)
            {
                //this adds textboxes using dropdown menu but inserts the same number set into each set of textboxes
                $('#dropdowndiv').append('<div><form>Number Set #'+i+'<input type="text" name="num1" class="textbox1" value="<?php echo $random1; ?>" /><input type="text" name="2" class="textbox2" value="<?php echo $random2; ?>" /><input type="text" name="3" class="textbox3" value="<?php echo $random3; ?>" /></div>'); 
            }
        });
    });
</script>

<div id="dropdowndiv">
<!-- this is where textboxes will appear -->
</div>
<div class="choices">
    <span>Adding Textboxes using Dropdown Menu</span>
    <select id="dropdownadd">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="20">20</option>
    </select>
</div>
</html>

<HTML>
<form name="form" method="post">
<input type="text" name="num1" id="var1" value="<?php echo $random1; ?>" >
<input type="text" name="num2" id="var1" value="<?php echo $random2; ?>" >
<input type="text" name="num3" id="var1" value="<?php echo $random3; ?>" >
<br>
<input type="submit" name="submit" value="Generate Numbers">
</form>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:30:08.350

试试这个 [http://jsfiddle.net/fedmich/F79nf/](http://jsfiddle.net/fedmich/F79nf/)

Math.random Math.round() for loop 和 jquery 追加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:44:32.927

[这是我想出的解决方案](http://jsfiddle.net/w7gCX/)

Fedmich 采用了相同的方法，我只是使用了您提供的代码并修改了需要修改的部分，而无需修改的部分（我什至刚刚说了什么）就不管了。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:48:12.017

这是您完整的解决方案，它根据下拉选项值的选择显示没有带有三个文本框的表单集，当我们单击每个表单附带的名为“生成按钮”的按钮时，每个表单都会为每个输入集生成唯一值。

在 Codebins 上尝试这个解决方案：http: [//codebins.com/codes/home/4ldqpb7](http://codebins.com/codes/home/4ldqpb7)

# powershell - 将检索 CPU、MEMORY、HARDDISK 和 NETWORK 使用情况的 powershell 示例

> ID：11388978
> 
> 赞同：0
> 
> 时间：2012-07-09T04:09:02.947
> 
> 标签：powershell, wmi

我尝试使用 c++ 代码检索有关 HARDDISK 和 NETWORK 的信息。我使用将提供这些信息的查询（例如： Win32_PerfRawData_PerfDisk_PhysicalDisk ）进行了此操作。我以前从未做过任何 powershell 代码。所以你能帮我使用 powershell 获取这些信息吗，或者你能举一些例子来帮助我做到这一点。

谢谢， Deepesh CP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:15:25.130

[`Get-WmiObject`](http://technet.microsoft.com/en-us/library/hh849824.aspx)您可以使用PowerShell 中的 cmdlet执行 WMI 查询。

# c - 有没有办法在保持缓存局部性的同时计算标量产品？

> ID：11388979
> 
> 赞同：1
> 
> 时间：2012-07-09T04:09:05.863
> 
> 标签：c, caching, numerical

假设我有两个`float`长度相同的 s数组`n`：

```
float *a, *b;
int n; 
```

我想计算他们的标量积。天真的方法是这样的：

```
int i;
float result=0;
for (i=0;i<n;i++)
  result += a[i]*b[i]; 
```

但是从数据局部性的角度来看，这很糟糕，尤其是在内存`n`很大或`a`相距很远的情况下。`b`在每次迭代中，我们交替从`a`和获取值`b`。有没有办法可以提高效率？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T04:28:29.543

除非你很不幸 a 和 b 都映射到同一个高速缓存行，否则处理器的获取管道几乎一直都是满的。数据非局部性和跨步在更大、更方的数组中可能是个大问题，但在这里我认为你不必担心。

如果您交错 a 和 b 值，那么两个浮点数都适合 64 位机器上的一次提取，这可能会有所帮助（尽管内存对齐问题使这种架构依赖。）

# c++ - why using a local pointer wouldn't work

> ID：11388982
> 
> 赞同：4
> 
> 时间：2012-07-09T04:09:55.347
> 
> 标签：c++, c, pointers

```
inline void insert(node *root, int value)
{
    if(!root)
    {
        root = new node();
        root->value = value;
    }
    else
    {
        node *itr = root;
        while(1)
        {
            if(itr->value > value)
                itr = itr->left;
            else
                itr = itr->right;
            if(!itr)
            {
                itr = new node();
                itr->value = value; 

                break;
            }

        }
    }
} 
```

//call insert function like this

```
node *head = 0;
insert(head, 5);
insert(head, 10);
insert(head, 3);
insert(head, 1);
insert(head, 4); 
```

I know this code wouldn't work because 'itr' in *insert* function is a local variable, thus, it wouldn't reflect the tree outside of the method. However, I don't clearly understand why it wouldn't work. Although 'itr' is a local variable, 'itr' points to the same location where 'root' points to. Also, I am dereferencing it to move 'left' or 'right' so I think it should work.

I think this is a basic problem of passing a pointer by value vs pointer but I couldn't find a clear explanation of why I can't change the tree using a local variable of a pointer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:18:17.730

Yes, you really need to use references in this c++ code.

```
node * treeRoot = 0;
insert( treeRoot , 4 );  // treeRoot needs to be changed for this to work. So a reference is required. 
```

The function should in this case be declared as

```
void insert(node* &root, int value); 
```

The alternative would be to use a double pointer.

```
node * treeRoot = 0;
insert( &treeRoot , 4 );  // treeRoot needs to be changed for this to work. So a pointer to the pointer will work. 
```

The function should in this case be declared as

```
void insert(node** root, int value); 
```

Also this is an excellent opportunity to explore a compact and elegant recursive solution. (The inlining does not work here though)

```
void insert(node* &root, int value)
{
    if(!root)
    {
        root = new node();
        root->value = value;
    }
    else
    {
        if(root->value > value)
            insert( root->left, value );
        else
            insert( root->right, value);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:20:29.840

There are two issues here. First, in your example usage, you have:

```
node *head = 0; 
```

If you run this, you'll end up creating a new node every invocation because

```
if (!root) {} 
```

Will always be true. Secondly, as you've pointed out, when you update the tree, you're creating a new node but not actually inserting it into the tree. To correct both of these issues, you can do the following:

```
node* insert(node *root, int value) {
    if(!root) {
        root = new node();
        root->value = value;
    } else {
        node *itr = root;
        node **where = 0;
        while(1) {
            if(itr->value > value) {
                where = &itr->left;
                itr = itr->left;
            } else {
                where = &itr->right;
                itr = itr->right;
            }
            if(!itr) {
                itr = new node();
                itr->value = value; 
                // Insert the new node, to fix the second issue
                *where = itr;
                break;
            }
            prev = itr;    
        }
    }
    return root; // This always returns the tree, solves problem 1, which can also be solved using references or ptr-to-ptr as other people have mentioned
} 
```

Then your example would be:

```
node* head = insert(0, 5);
insert(head, 10);
insert(head, 3);
insert(head, 1);
insert(head, 4); 
```

Though there's still the issue of inserting the same number twice, which isn't handled properly here. And for testing sake, it's a better practice to avoid creating new nodes within a function like this. It'd be better to create the node then give the node with the new value to insert, and letting insert figure out where to link it into the tree (that includes the head).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T05:24:10.677

Pointers in C (and C++) are not really that difficult if you think about them the right way.

Let me demonstrate with the following code:

```
void foo(int i) {
    i = i + 5;
}

int main()
{
    int i = 5;

    foo(i);
    printf("i is %d\n", i);

    return 0;
} 
```

**Q.** What will be the value of `i` in `main()` after `foo()` is called?

**A.** `i` is passed to `foo()` by value, so the `i` in `main()` is not modified by `foo()`. `i` is still 5.

Now, let's change the code a bit:

```
void foo(int* i) {
    i = malloc(sizeof(int));
}

int main()
{
    int *i = 0;

    foo(i);
    printf("i is %p\n", i); /* printf a pointer with %p */

    return 0;
} 
```

**Q.** What will be the value of `i` in `main()` after `foo()` is called?

**A.** `i` is passed to `foo()` by value, so the `i` in `main()` is not modified by `foo()`. `i` is still 0.

In other words, nothing has changed! The fact that `i` is now a pointer does not change that it is being passed by value.

Actually, in C, all function parameters are by value. So, how do we get a function to modify a variable?

If you want to pass a variable to a function for that function to modify it, you must pass the address of that variable to the function. (This is true for C. In C++ you can also use references, but I'm speaking only about pointers here.)

When you pass the address of a variable, you are doing two things:

*   You are calculating the memory address of a variable

*   You are passing that memory address **by value** to the function.

The memory address can be used to modify the memory to which the memory address points. Since the memory address inside the function is the same as the one outside the function call (because it's passed by value), the variable they point to is the same one!

This is really the trickiest concept, so let's draw some ascii.

```
|            |
+------------+ <- 0x04762198
|            |
|     i      |
|            |
|            |
+------------+ <- 0x0476219C
|            | 
```

Let me introduce you to `int i`. `i` is 4 bytes (on this system) starting at memory address `0x04762198`. All variables are stored somewhere in memory and will be at memory addresses such as this.

If we assign a value to `i`, the value will be stored in the above block of memory.

If we pass `i` to a function, the value of `i` will be copied to somewhere else in memory for use by the function. The value of that memory will be the same as our original `i`, but the memory address of that variable will be somewhere else.

Here's the ingenious bit. If we instead pass `0x04762198` to a function, that function now has access to the memory location of the original `i`! This is a pointer, so called because it *points* to an address in memory. If we want to modify the original `i` inside the function using the pointer, we *dereference* it (eg. `*ptr = 5;`). What we are actually doing is saying *"please store this value (5) in the memory pointed to by `ptr`"*).

Let's change the code again to implement this:

```
/*
 * The address of an int* is int**
 */
void foo(int** i) {
    /* dereference to access and modify the original `i` */
    *i = malloc(sizeof(int));
}

int main()
{
    int *i = 0;

    /*
     * Pass the address of i, so foo() can modify i
     */    
    foo(&i);
    printf("i is %p\n", i); /* printf a pointer with %p */

    return 0;
} 
```

See the difference?

Now, can you see what you are doing wrong in your own program?

*NOTE: I have left out the usual error checking (eg. checking that malloc() does not return NULL) for brevity.*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T09:26:29.760

Suppose you had

```
int x = 0;
int y = x;
y = 3478; 
```

Would you expect that x also contain `3478`?
I knew you wouldn't, and the same is true for your `root` and `itr`.

This is a classic pencil-and-paper problem (most pointer problems are) and it's definitely worth pulling out some dead tree when you run into problems like this.

Here's an ASCII version for one of your cases, where you want to insert to the right, and right is NULL.
The arrows show where the respective variables are pointing.

Start of function:

```
 ____
root ---> |    |
          ------
           / \
          /   \
       left   NULL 
```

* * *

```
itr = root;    
           ____
root ---> |    | <--- itr
          ------
           / \
          /   \
       left   NULL 
```

* * *

```
itr = itr->right;
           ____
root ---> |    | 
          ------
           / \
          /   \
       left   NULL <--- itr 
```

* * *

```
if (!itr)
    itr = new node();

           ____
root ---> |    | 
          ------
           / \
          /   \                   ____
       left   NULL      itr ---> |    |
                                  ---- 
```

As you can see, the input tree hasn't been modified at all, you just allocated a new node outside of it and left it there.

This would work:

```
 ____
root ---> |    | <--- itr
          ------
           / \
          /   \
       left   NULL 
```

* * *

```
 if (!itr->right)
   {
       itr->right = new node()
   }

           ____
root ---> |    | <--- itr
          ------
           / \
          /   \
       left   ____
             |    |
              ---- 
```

Pencil and paper is the best way to figure out pointers.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T08:03:02.190

you made a node but didn't insert it to the tree . try this code :

inline void insert(node *root, int value)

{

```
if(!root)

{
    root = new node();
    root->value = value;
}
else
{
    node *itr = root , *prev;
    while(itr)
    {
        prev=itr;
        if(itr->value > value)
            itr = itr->left;

        else
            itr = itr->right;
    }

        itr = new node();
        itr->value = value;

        if(value < prev->value)
        prev->left=itr;
        else
        prev->right=itr;
} 
```

}

# python - 列数会影响sqlalchemy的速度吗？

> ID：11388988
> 
> 赞同：1
> 
> 时间：2012-07-09T04:10:53.970
> 
> 标签：python, mysql, sqlalchemy, python-2.7

我用 sqlalchemy (python 2.7) 创建了两个表，数据库是 mysql 5.5。以下是我的代码：

```
engine = create_engine('mysql://root:123@localhost/test')

metadata = MetaData()

conn = engin.connect()

# For table 1:

columns = []

for i in xrange(100):

    columns.append(Column('c%d' % i, TINYINT, nullable = False, server_default = '0'))
    columns.append(Column('d%d' % i, SmallInteger, nullable = False, server_default = '0'))

user = Table('user', metadata, *columns)
# So user has 100 tinyint columns and 100 smallint columns.

# For table 2:

user2 = Table('user2', metadata,

        Column('c0', BINARY(100), nullable = False, server_default='\0'*100),
        Column('d0', BINARY(200), nullable = False, server_default='\0'*200),
)

# user2 has two columns contains 100 bytes and 200 bytes respectively. 

I then inserted 4000 rows into each table. Since these two tables have same row length, I
expect the select speed will be almost the same. I ran the following test code:

s1 = select([user]).compile(engine)

s2 = select([user2]).compile(engine)

t1 = time()

result = conn.execute(s1).fetchall()

print 't1:', time() - t1 

t2 = time()

result = conn.execute(s2).fetchall()

print 't2', time() - t2 

The result is :

t1: 0.5120000

t2: 0.0149999 
```

这是否意味着表中的列数会极大地影响 SQLAlchemy 的性能？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:00:08.967

> 这是否意味着表中的列数会极大地影响 SQLAlchemy 的性能？

嗯，这是一个艰难的，它可能更多地取决于底层的 SQL 引擎，`MySQL`在这种情况下，实际上`sqlalchemy`，这只不过是一种在使用相同接口的同时与不同的数据库引擎交互的方式。

> SQLAlchemy 是 Python SQL 工具包和对象关系映射器，它为应用程序开发人员提供了 SQL 的全部功能和灵活性。
> 
> 它提供了一整套众所周知的企业级持久性模式，专为高效和高性能的数据库访问而设计，适用于简单的 Python 领域语言。

**虽然我可能是错的，但您可以尝试使用常规对其进行基准测试`SQL`。**

我实际上进行了一些测试...

```
import timeit

setup = """
from sqlalchemy import create_engine, MetaData, select, Table, Column
from sqlalchemy.dialects.sqlite import BOOLEAN, SMALLINT, VARCHAR
engine = create_engine('sqlite://', echo = False)
metadata = MetaData()
conn = engine.connect()
columns = []

for i in xrange(100):
    columns.append(Column('c%d' % i, VARCHAR(1), nullable = False, server_default = '0'))
    columns.append(Column('d%d' % i, VARCHAR(2), nullable = False, server_default = '00'))  

user = Table('user', metadata, *columns)
user.create(engine)
conn.execute(user.insert(), [{}] * 4000)

user2 = Table('user2', metadata, Column('c0', VARCHAR(100), nullable = False, server_default = '0' * 100),  \
                                 Column('d0', VARCHAR(200), nullable = False, server_default = '0' * 200))
user2.create(engine)
conn.execute(user2.insert(), [{}] * 4000)
"""

many_columns = """
s1 = select([user]).compile(engine)
result = conn.execute(s1).fetchall()
"""

two_columns = """
s2 = select([user2]).compile(engine)
result = conn.execute(s2).fetchall()
"""

raw_many_columns = "res = conn.execute('SELECT * FROM user').fetchall()"
raw_two_columns = "res = conn.execute('SELECT * FROM user2').fetchall()"

timeit.Timer(two_columns, setup).timeit(number = 1)
timeit.Timer(raw_two_columns, setup).timeit(number = 1)
timeit.Timer(many_columns, setup).timeit(number = 1)
timeit.Timer(raw_many_columns, setup).timeit(number = 1)

>>> timeit.Timer(two_columns, setup).timeit(number = 1)
0.010751008987426758
>>> timeit.Timer(raw_two_columns, setup).timeit(number = 1)
0.0099620819091796875
>>> timeit.Timer(many_columns, setup).timeit(number = 1)
0.23563408851623535
>>> timeit.Timer(raw_many_columns, setup).timeit(number = 1)
0.21881699562072754 
```

我确实找到了这个：
[http ://www.mysqlperformanceblog.com/2009/09/28/how-number-of-columns-affects-performance/](http://www.mysqlperformanceblog.com/2009/09/28/how-number-of-columns-affects-performance/)

虽然他用于`max`测试，但这有点有趣......

我真的很喜欢 sqlalchemy，所以我决定使用 pythons 自己的 sqlite3 模块来比较它

```
import timeit
setup = """
import sqlite3
conn = sqlite3.connect(':memory:')
c = conn.cursor()

c.execute('CREATE TABLE user (%s)' %\
          ("".join(("c%i VARCHAR(1) DEFAULT '0' NOT NULL, d%i VARCHAR(2) DEFAULT '00' NOT NULL," % (index, index) for index in xrange(99))) +\
           "c99 VARCHAR(1) DEFAULT '0' NOT NULL, d99 VARCHAR(2) DEFAULT '0' NOT NULL"))

c.execute("CREATE TABLE user2 (c0 VARCHAR(100) DEFAULT '%s' NOT NULL, d0 VARCHAR(200) DEFAULT '%s' NOT NULL)" % ('0'* 100, '0'*200))

conn.commit()
c.executemany('INSERT INTO user VALUES (%s)' % ('?,' * 199 + '?'), [('0',) * 200] * 4000)
c.executemany('INSERT INTO user2 VALUES (?,?)', [('0'*100, '0'*200)] * 4000)
conn.commit()
"""

many_columns = """
r = c.execute('SELECT * FROM user')
all = r.fetchall()
"""

two_columns = """
r2 = c.execute('SELECT * FROM user2')
all = r2.fetchall()
"""

timeit.Timer(many_columns, setup).timeit(number = 1)
timeit.Timer(two_columns, setup).timeit(number = 1)

>>> timeit.Timer(many_columns, setup).timeit(number = 1)
0.21009302139282227
>>> timeit.Timer(two_columns, setup).timeit(number = 1)
0.0083379745483398438 
```

并得出了相同的结果，所以我真的认为它的数据库实现不是`sqlalchemy`问题。

**默认插入**

```
import timeit

setup = """
from sqlalchemy import create_engine, MetaData, select, Table, Column
from sqlalchemy.dialects.sqlite import BOOLEAN, SMALLINT, VARCHAR
engine = create_engine('sqlite://', echo = False)
metadata = MetaData()
conn = engine.connect()
columns = []

for i in xrange(100):
    columns.append(Column('c%d' % i, VARCHAR(1), nullable = False, server_default = '0'))
    columns.append(Column('d%d' % i, VARCHAR(2), nullable = False, server_default = '00'))

user = Table('user', metadata, *columns)
user.create(engine)

user2 = Table('user2', metadata, Column('c0', VARCHAR(100), nullable = False, server_default = '0' * 100),  \
                                 Column('d0', VARCHAR(200), nullable = False, server_default = '0' * 200))
user2.create(engine)
"""

many_columns = """
conn.execute(user.insert(), [{}] * 4000)
"""

two_columns = """
conn.execute(user2.insert(), [{}] * 4000)
"""

>>> timeit.Timer(two_columns, setup).timeit(number = 1)
0.017949104309082031
>>> timeit.Timer(many_columns, setup).timeit(number = 1)
0.047809123992919922 
```

使用 sqlite3 模块进行测试。

```
import timeit
setup = """
import sqlite3
conn = sqlite3.connect(':memory:')
c = conn.cursor()

c.execute('CREATE TABLE user (%s)' %\
    ("".join(("c%i VARCHAR(1) DEFAULT '0' NOT NULL, d%i VARCHAR(2) DEFAULT '00' NOT NULL," % (index, index) for index in xrange(99))) +\
            "c99 VARCHAR(1) DEFAULT '0' NOT NULL, d99 VARCHAR(2) DEFAULT '0' NOT NULL"))

c.execute("CREATE TABLE user2 (c0 VARCHAR(100) DEFAULT '%s' NOT NULL, d0 VARCHAR(200) DEFAULT '%s' NOT NULL)" % ('0'* 100, '0'*200))
conn.commit()
"""

many_columns = """
c.executemany('INSERT INTO user VALUES (%s)' % ('?,' * 199 + '?'), [('0', '00') * 100] * 4000)
conn.commit()
"""

two_columns = """
c.executemany('INSERT INTO user2 VALUES (?,?)', [('0'*100, '0'*200)] * 4000)
conn.commit()
"""

timeit.Timer(many_columns, setup).timeit(number = 1)
timeit.Timer(two_columns, setup).timeit(number = 1)

>>> timeit.Timer(many_columns, setup).timeit(number = 1)
0.14044189453125
>>> timeit.Timer(two_columns, setup).timeit(number = 1)
0.014360189437866211
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T16:24:45.053

Samy.vilar 的回答非常好。但要记住的关键一件事是，列数会对任何数据库和任何 ORM 的性能产生影响。您拥有的列越多，从磁盘访问和传输的数据就越多。

此外，根据查询和表结构，添加更多列可能会将查询从被索引覆盖变为被迫访问基表，这在某些数据库和某些情况下会增加大量时间。

我只玩过一点 SQLAlchemy，但作为一名 DBA，我通常建议与我一起工作的开发人员只查询他们需要的列，并避免在生产代码中使用“select *”，因为这很可能包含比需要更多的列，并且因为它使代码在面对被添加到表/视图的潜在列时更加脆弱。

# visual-studio-2010 - 在 VS 中通过 PowerShell 进行服务引用管理

> ID：11388992
> 
> 赞同：0
> 
> 时间：2012-07-09T04:12:58.017
> 
> 标签：visual-studio-2010, wcf, powershell

早上好

我的公司维护着一组来自各个部门的内部 WCF 服务，我们在内部和外部项目中都使用这些服务。服务集相当稳定，这意味着可用的服务数量或多或少是恒定的。每个服务都有一个测试地址和一个生产地址。

我想做的是创建一个 PowerShell 脚本，其中包含所有服务及其地址的列表，为此类列表提供单点维护。该脚本将：

*   允许从项目中添加/刷新/删除服务
*   具有服务名称的自动完成功能
*   通过 NuGet 分发（可能包含在自定义解决方案模板中）

这可能吗？我可以从 PS 管理给定项目的脚本引用吗？任何指针都会很棒。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:22:20.550

查看[`New-WebServiceProxy`](http://technet.microsoft.com/en-us/library/hh849841.aspx)命令和这个答案：[https ://stackoverflow.com/a/1746980/399704](https://stackoverflow.com/a/1746980/399704)

# iphone - 如何从iphone中的fb获取专辑图片

> ID：11388993
> 
> 赞同：-2
> 
> 时间：2012-07-09T04:13:02.323
> 
> 标签：iphone, objective-c, facebook-graph-api

```
NSURL *url1=[NSURL URLWithString:@"https://graph.facebook.com/100002944043966/albums?access_token=[your access token]"]; 

NSData *data = [NSData dataWithContentsOfURL:url1];
NSLog(@"%@",data);
NSString *str=[[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
NSLog(@"%@",str); 
```

通过使用它，我能够获取 json 数据，但是如何从中获取图像，请帮助我！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:33:21.700

要获得封面照片，请使用：

```
https://graph.facebook.com/<id>/picture?type=album&access_token=<token> 
```

这里 id 是您收到的 json 中的 cover_photo，访问令牌是您的会话令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:26:54.903

您未能为传入的 分配内存`imagedata(NSData alloc)`。

您可以使用此代码...

```
NSString *imageurl;
NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:imageurl]];

UIImageView *imageview;
imageview.image=[UIImage imageWithData:imageData]; 
```

# asp.net - 如何在 ASP.NET 中设计应用程序架构

> ID：11388994
> 
> 赞同：1
> 
> 时间：2012-07-09T04:13:09.670
> 
> 标签：asp.net

我打算将 Visual C# 应用程序转换为 ASP.NET。对于这个任务，我想先创建架构，然后再开发程序。那么，如何将我的逻辑分解为库？我知道，这是一个非常基本的问题，但非常担心，因为我一个人工作，我需要帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:16:47.017

幸运的是，您现有的应用程序是使用 SOLID OO 原则编写的。在这种情况下，您可以将业务逻辑与 UI 分开。如果不是这种情况，那么我将首先为您的业务逻辑制作一组干净的接口，并围绕它们进行一些单元测试。接下来是 MVC 针对断开连接的情况（例如 Web 应用程序）进行了优化。根据您使用 Razor 和测试项目创建 MVC3 或 MVC4 应用程序的基础架构。当您构建项目时，请尝试随时进行单元测试。这将提高代码的可靠性，同时开启 FxCop 静态代码分析。您需要考虑的下一件事是您希望 Web UI 具有怎样的交互性。如果您的用户是 Intranet 用户，也许您可​​以在模型中使用带有数据注释的脚手架功能。如果您的应用程序要打动外部客户，那么您需要更丰富的用户体验。在这种情况下，请考虑使用敲除在客户端浏览器上制作 MVVM 模式。这是一个链接[http://www.codeproject.com/Articles/305308/MVC-Techniques-with-JQuery-JSON-Knockout-and-Cshar](http://www.codeproject.com/Articles/305308/MVC-Techniques-with-JQuery-JSON-Knockout-and-Cshar)

当您构建控制器时，它们有变胖的趋势（这是 SRP 的结果） 考虑使用诸如面向方面编程和编译器属性和过滤器之类的技术来保持代码干爽和干净。

您需要做的很多事情将取决于您的组织。例如，如果您在一个使用 SOA 策略的组织中工作，那么您将需要与您的架构师讨论您希望如何使用 WebAPI 与 WCF。另一个需要考虑的方面是微软未来将如何支持客户端脚本。我猜测我希望他们会制作工具来简化 javascripting 方面。目前，我正在使用 Jquery、Jquery-Ui、Ajax 等 JavaScript 库学习 HTML5，以提供更丰富的用户体验

我希望这会有所帮助……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:23:17.167

当我开始使用 ASP.Net 构建 Web 应用程序时，我使用了这个[Building Layered Web Applications with Microsoft ASP.NET](http://imar.spaanjaars.com/416/building-layered-web-applications-with-microsoft-aspnet-20-part-1)作为模型

# regex - Perl 一次完成多个模式匹配和替换

> ID：11388996
> 
> 赞同：2
> 
> 时间：2012-07-09T04:13:21.227
> 
> 标签：regex, perl, pattern-matching

```
09/27/2009 19:48:00 Departure Location 
```

我正在尝试匹配和替换文本文件中的给定行。日期和时间之后的文本长度可能会有所不同。我正在逐行读取文件，我需要将最终输出打印为 -

```
Date=> 09/27/2009
Time=> 19:48:00 
Text=> Departure Location 
```

我试图一次性完成替换，如下所示 -

```
if($line =~ m/(\d+)\/(\d+)\/(\d+)\h{1}(\d+):(\d+):(\d+)/){

    $line =~ s/(\[a-zA-Z])/\nText=> $1/;
    $line =~ s/(\d+)\/(\d+)\/(\d+)/\nDate=> $1\/$2\/$3/;
    $line =~ s/\h{1}(\d+):(\d+):(\d+)/\nTime=> $1\:$2\:$3/;

    print FH "$line\n";

} 
```

但我得到的只是这个——

```
Date=> 09/27/2009
Time=> 19:48:10 Departure Location 
```

我知道匹配有问题，`Text`但我无法修复它。我仍然是 Perl 初学者。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T06:39:37.470

[有限制的拆分](http://perldoc.perl.org/functions/split.html)在这里可以很好地工作。`pairwise`不是绝对必要的，但帮助我避免了循环：

```
#!/usr/bin/env perl

use strict; use warnings;
use feature 'say';
use List::MoreUtils qw( pairwise );

my $input = q{09/27/2009 19:48:00 Departure Location};
my @fields = qw(Date Time Text);
my @values = split ' ', $input, @fields;

{
    no warnings 'once';
    say join("\n", pairwise { "$a=> $b" } @fields, @values);
} 
```

输出：

```
日期=> 09/27/2009
时间=> 19:48:00
文本=> 出发地点
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T04:40:47.373

这种模式尤其会给您带来麻烦：

```
$line =~ s/(\[a-zA-Z])/\nText=> $1/; 
```

它有一些问题。首先，左括号前面的反斜杠: `\[`, 正在转义括号，因此您的字符类根本不是字符类，而是文字文本“ `[a-zA-Z]`”。其次，您的文本匹配中不允许出现“空格”，因此如果字符串的文本部分包含任何空格字符（或标点符号），它也将无法匹配。第三，没有量词，所以只会匹配单个字符。最后一点是它可能应该锚定到字符串的末尾。它可能像这样工作（但不要使用它，请继续阅读）：

```
$line =~ s/([a-zA-Z\s]+)$/\nText=> $1/; 
```

但可能有更好的解决方案。这一切都可以一次完成而不会失去清晰度。对我来说，如果您捕获更大的细分，它开始变得更有意义：

```
$string =~ s{^
    (\d\d/\d\d/\d{4})\s    # The date.
    (\d\d:\d\d:\d\d)\s     # The time.
    (.+)$                  # The rest (the text).
}{Date=> $1\nTime=> $2\nText=> $3}x; 
```

通常情况下，/x 修饰符有助于更容易阅读代码。

有一些很好的资源可以用来处理 Perl 的正则表达式。我建议从[perldoc perlretut](http://perldoc.perl.org/perlretut.html)开始，它是“关于在 Perl 中理解、创建和使用正则表达式的基本教程”。

使用命名捕获还可以增加一定程度的清晰度，尤其是当您的正则表达式变得更加复杂时：

```
$string =~ s{
    ^
    (?<date>\d\d/\d\d/\d{4})\s
    (?<time>\d\d:\d\d:\d\d)\s
    (?<text>.+)
    $
}
{Date=> $+{date}\nTime=> $+{time}\nText=> $+{text}}x; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T05:36:58.820

您在解析器中做了太多工作。

```
my ($date, $time, $text) = split(' ', $_, 3);
say "Date=> $date";
say "Time=> $time";
say "Text=> $text"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T16:01:45.300

将尽可能多的功能塞进一个小空间只会增加 Perl 难以理解的声誉。

这段代码对我来说似乎更清晰

```
$line = <<END if $line =~ m|^(\d\d/\d\d/\d{4}) \s+ (\d\d:\d\d:\d\d) \s+ (.*)|x;
Date=> $1
Time=> $2 
Text=> $3
END 
```

# boost - 相同的地址，多个“shared_ptr”，enable_shared_from_this 和自定义删除器

> ID：11388998
> 
> 赞同：1
> 
> 时间：2012-07-09T04:13:37.250
> 
> 标签：boost, shared-ptr, weak-ptr

与[相同地址、多个 shared_ptr 计数器相关，C++ 标准是否禁止？](https://stackoverflow.com/questions/11079770/same-address-multiple-shared-ptr-counters-is-it-forbidden-by-c-standard)以及围绕多个指向同一个对象但不共享底层引用计数结构的 shared_ptr 对象的无数其他问题。

如果对象从上述问题中的“enable_shared_from_this”继承会发生什么？我的 shared_from_this() 返回什么？一个带有自定义删除器还是一个没有？

```
struct B : boost::enable_shared_from_this<B> {
  boost::weak_ptr < B > get_weak() {
    return shared_from_this();
  }
};

void doNothing(B *) {
}

int main() {
  B * b0 = new B;

  boost::shared_ptr < B > sddb0(b0, doNothing);
  boost::weak_ptr < B > swddb0(sddb0->get_weak());
  //  Does this have a custom deleter???
  boost::shared_ptr < B > sddb1 = swddb0.lock();

  boost::shared_ptr < B > scdb0(b0);
  boost::weak_ptr < B > swcdb0(sddb0->get_weak());
  //  Does this *not* have a custom deleter???
  boost::shared_ptr < B > scdb1 = swcdb0.lock();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:16:46.020

删除器与拥有的对象相关联，并将在最后一个所有者删除其引用时将其释放，因此共享同一对象所有权的所有指针也共享删除器。删除器不存储在单个`shared_ptr`对象中，它与引用计数一起存储在堆中，因此由共享相同计数的所有对象共享。

所以让我们看看你的代码。首先，我必须修复您的代码，因为它甚至没有按所示编译。测试问题中的代码总是一个好主意，以避免通过让他们修复错别字和添加缺少的标题来浪费人们的时间。

不要这样写：

```
B * b0 = new B;

boost::shared_ptr < B > sddb0(b0, doNothing); 
```

正确的做法是：

```
boost::shared_ptr < B > sddb0(new B, doNothing); 
```

基类`enable_shared_from_this<B>`有一个`weak_ptr<B>`由构造函数分配的成员`shared_ptr`，因此它`weak_ptr`与 共享所有权`sddb0`，由 . 返回的共享指针也是如此`shared_from_this()`。

所以这个问题的答案是肯定的：

```
//  Does this have a custom deleter???
boost::shared_ptr < B > sddb1 = swddb0.lock(); 
```

`sddb1`共享所有权，`sddb0`因此具有相同的删除器。

您可以通过 using`get_deleter`或通过写入`stdout`in`doNothing`或通过 using`owner_less`比较指针的所有者来测试它。

这将创建一个不*与*现有共享指针共享所有权的对象：

boost::shared_ptr < B > scdb0(b0);

`enable_shared_from_this<B>`基地的成员`weak_ptr<B>`被上面的行重新分配，因此它与`scdb0`而不是共享所有权`sddb0`。因此，当您`get_weak`在该点之后调用时，它会返回一个共享所有权的弱指针，`scdb0`因此没有自定义删除器。同样，您可以通过查看`doNothing`未调用或使用`owner_less`.