# StackOverflow 问答 11921000-11921999

# java - 关于 Java 内存管理

> ID：11921000
> 
> 赞同：0
> 
> 时间：2012-08-12T08:59:33.077
> 
> 标签：java, memory, autoboxing

> **可能重复：**
> [整数包装器对象仅在值 127 内共享相同的实例？](https://stackoverflow.com/questions/5117132/integer-wrapper-objects-share-the-same-instances-only-within-the-value-127)

我有一个关于 Java 内存管理的问题。

当我尝试以下代码时：

```
Integer a = 1;
Integer b = 1;
System.out.println(a==b); // this gives "true" 
```

然而，

```
Integer a = 256;
Integer b = 256;
System.out.println(a==b); //this gives "false" 
```

为什么？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T09:04:01.550

这是因为“自动装箱”使用`Integer.valueOf`, 并为小整数值`Integer.valueOf`保留对象缓存。`Integer`以下是 JLS 所说的：

> *“如果被装箱的值 p 是真、假、一个字节或 \u0000 到 \u007f 范围内的一个字符，或者一个介于 -128 和 127（包括）之间的 int 或短数字，则令 r1 和 r2 为结果p 的任意两个拳击转换的结果。总是 r1 == r2。* [JLS 5.1.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)。

当您使用`==`运算符比较一对`Integer`对象时，它实际上是在比较对象引用。因此`true`，如果拳击给了你相同的缓存`Integer`对象，你就会得到，`false`如果没有。请注意，JLS*保证*对所述范围的这种行为，但它也*允许*该`valueOf`方法的实现以缓存更广泛的值。

底线是你应该`equals(Object)`用来比较`Integer`对象......除非你*真的*想测试它们是否是同一个对象。

* * *

> 根据我的阅读，“整数”应该在堆中创建一个“对象”，因此这两个对象应该是相同的。

如果您的代码明确执行 a `new Integer(...)`，则可以保证创建一个新`Integer`对象。但是，自动装箱使用`Integer.valueOf(...)`, 这就是实现缓存行为的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T09:03:24.217

您不应该`==`对对象使用引用相等 ( )。在您的第一个示例中打印为 true，因为前 128 个`Integer`对象由`Integer`类缓存。采用`.equals()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T09:02:56.713

当值大于数据表示的范围时，它们是不同的对象，因为它们被包装了。您现在正在像对象 ID 一样进行比较。

```
You are comparing objects' addresses 
```

# identifier - 避免在 BaseEntity 和派生类中重复 RiakKey

> ID：11921001
> 
> 赞同：0
> 
> 时间：2012-08-12T08:59:34.030
> 
> 标签：identifier, riak, java-client

我有一个基类，它是一个 Riak 实体，以及一些扩展 BaseEntity 的派生类。BaseEntity 有一个名为 Identifier 的字段，它被注释为 @RiakKey。

但显然这还不够。看来我必须有标识符字段，每个派生类中都有 @RuiakKey 注释，否则我会得到这个异常：

> com.basho.riak.client.convert.NoKeySpecifedException 在 com.att.cso.omss.datastore.riak.controllers.RiakBaseController.isEntityExist 的 com.basho.riak.client.bucket.DefaultBucket.fetch(DefaultBucket.java:535) (RiakBaseController.java:130) 在 com.att.cso.omss.datastore.riak.controllers.RiakBaseController.createEntity(RiakBaseController.java:94) 在 com.att.cso.omss.datastore.riak.controllers.RiakBaseController.createServiceProvider (RiakBaseController.java:234) 在 com.att.cso.omss.datastore.riak.App.serviceProviderTests(App.java:62) 在 com.att.cso.omss.datastore.riak.App.main(App.java :38)

所以，我当前的实现看起来像这样（标识符字段的重复）：

> 公共类 BaseEntity{
> 
> @RiakKey @JsonProperty("Id") 受保护的字符串标识符；

```
public String getIdentifier() {
    return identifier;
}

public void setIdentifier(String identifier) {
    this.identifier = identifier;
} 
```

. . .

> 公共类服务扩展 BaseEntity{

```
@RiakKey 
@JsonProperty("Id")
protected String identifier;

public String getIdentifier() {
    return identifier;
}

public void setIdentifier(String identifier) {
    this.identifier = identifier;
} 
```

有没有办法避免这种重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:23:34.057

**更新：**感谢看到此问题的人的贡献，现在将在 1.0.7 客户端版本中支持此功能。见：[https ://github.com/basho/riak-java-client/pull/180](https://github.com/basho/riak-java-client/pull/180)

**原答案：**

简短的回答：不，目前没有办法解决它。

原因是`com.basho.riak.client.convert.reflect.AnnotationScanner`类，它如何查找这些注释，以及我们允许的字段范围。

它使用`Class.getDeclaredFields()`它只获取在类中显式声明的字段，而不是继承的字段。这样做的原因是它获得私有和受保护的成员，而`Class.getFields()`将获得继承的成员，但前提是它们`public`在父类中声明。

解决此问题的一种简单方法是递归地扫描继承树上的每个父类。由于我们如何缓存域对象的注释字段，这只会是一次命中，并且可能不会太糟糕。

如果这是您有兴趣添加到客户端的内容，请随时在 github 上打开一个问题（当然，也可以自己编写代码并提交 - 我们总是感谢社区提交！）。

# asp.net - 使用 mysql 数据库构建电子商务网站需要什么信任级别？

> ID：11921003
> 
> 赞同：0
> 
> 时间：2012-08-12T09:00:50.103
> 
> 标签：asp.net, mysql

我正在帮助一个朋友建立一个电子商务网站，他想使用带有 mysql 后端的 asp.net 来存储产品并能够更新、删除和插入数据。

我的问题是你能用 mysql 数据库建立一个 asp.net 4.0 中等信任的网站吗？如果是这样，你会怎么做？

任何帮助都会非常感谢你:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:11:16.080

访问 mysql 数据库没有问题 - 只需将其添加为 Visual Studio 中的连接，您就可以像访问任何其他数据库一样开始访问它。但是，如果您想使用很多内置的成员控制（登录/成员创建/通过角色的 url 安全等），那么：

您需要下载 mysql adodb.net 连接器。然后，这将允许您使用成员资格/角色提供者（如果不存在，它还将在第一次访问时为您创建数据库模式）

[MySql ADODB 连接器](http://dev.mysql.com/downloads/connector/net/)

如果您想测试您的应用程序是否会以中等信任度运行，您可以在开发过程中添加一个 web.config 变量

[MSDN 文档](http://msdn.microsoft.com/en-us/library/tkscy493.aspx)

IE

```
<system.web>
  <trust level="Medium" originUrl="" />
</system.web> 
```

# qt - 无法在 Qt 中使用 readyReadStandardOutput 读取输出

> ID：11921004
> 
> 赞同：1
> 
> 时间：2012-08-12T09:00:57.540
> 
> 标签：qt, qt4

我正在使用 Qt，但无法使用 readyReadStandardOutput 获取 exe 文件的输出。

这是我的代码。

**主窗口.cpp**

```
void MainWindow::on_pushButton_24_clicked()
{
    myprocess = new QProcess(this);
    myprocess->start("files\\helloworld.exe");
    connect(myprocess, SIGNAL(readyReadStandardOutput ()), this, SLOT(outlog()));
}

void MainWindow::outlog()
{
    QString abc;

    abc = myprocess->readAllStandardOutput();

    emit outlogtext(abc);
    ui->lineEdit_4->setText(abc);
} 
```

**主窗口.h**

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QtGui>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
    QProcess *myprocess;

signals:
    void outlogtext(QString ver);

private slots:
    void outlog();
private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

helloworld.exe 只会给出一个输出“Hello world”，但我在 textEdit 中看不到它，我的代码有什么问题？我对 Qt 很陌生。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:19:36.793

我得到了程序的工作。下面是代码。

**主窗口.hpp**

```
#ifndef MAINWINDOW_HPP
#define MAINWINDOW_HPP

#include <QtGui>

class MainWindow : public QMainWindow
{
Q_OBJECT
public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

signals:
    void outlogtext(QString ver);

private slots:
    void outlog();
    void on_pushButton_24_clicked();

private:
    QPushButton* pushButton_24;
    QLineEdit* lineEdit_4;
    QProcess *myprocess;
};

#endif // MAINWINDOW_HPP 
```

**主文件**

```
#include <QtCore>
#include <QtGui>
#include <QDebug>
#include "mainwindow.hpp"

MainWindow::MainWindow(QWidget* parent)
  : QMainWindow(parent)
{
    pushButton_24 = new QPushButton;
    connect(pushButton_24, SIGNAL(clicked()),
            this, SLOT(on_pushButton_24_clicked()));

    lineEdit_4 = new QLineEdit;

    QWidget* central = new QWidget;
    QLayout* layout = new QVBoxLayout();
    layout->addWidget(pushButton_24);
    layout->addWidget(lineEdit_4);
    central->setLayout(layout);
    setCentralWidget(central);
}

MainWindow::~MainWindow()
{
}

void MainWindow::on_pushButton_24_clicked()
{
    myprocess = new QProcess(this);
    connect(myprocess, SIGNAL(readyReadStandardOutput()),
            this, SLOT(outlog()));
    myprocess->start("./helloworld.exe");

    // For debugging: Wait until the process has finished.
    myprocess->waitForFinished();
    qDebug() << "myprocess error code:" << myprocess->error();
}

void MainWindow::outlog()
{
    QString abc = myprocess->readAllStandardOutput();
    emit outlogtext(abc);
    lineEdit_4->setText(abc);
}

int main(int argc, char* argv[])
{
   QApplication app(argc, argv);
   MainWindow win;
   win.show();
   return app.exec();
} 
```

**你好世界.cpp**

```
#include <iostream>
int main()
{
  std::cout << "Hello World!" << std::endl;
} 
```

我改变了一些事情：

*   在构造一个对象之后，我总是在对对象执行实际操作之前连接信号和槽，这可能是调用`show()`小部件或调用 `start()`线程。所以我可以确定我不会错过一个信号`started()`，例如。

*   我在 Linux 上运行该程序。在那里，我必须确保它`helloworld.exe`在我的路径上，然后我将命令更改为`./helloworld.exe`. `files`我没有创建您的示例中调用的子目录。

*   Qt 中用于分隔目录的字符是斜杠`/`。当您想向用户显示某些内容时，有一些特殊的函数可以在 Qt 样式和本机样式之间进行转换。在内部总是使用斜线。这甚至适用于 Windows 程序（许多控制台命令也可以处理斜杠而不是反斜杠）。

*   添加调试输出在开发过程中非常非常有价值。如果 Makefile 设置不正确或出现问题，则`helloworld.exe`可能会出现在预期之外的目录中。因此，我添加了代码以等待一段时间，直到该过程完成。这并没有什么坏处，因为`helloworld.exe`只需要几毫秒即可运行。之后，我打印错误代码`QProcess`只是为了确保程序已被找到并且可以执行。所以我可以确定可执行文件在我的路径上，设置了可执行标志，我有权执行文件等。

我不知道究竟是什么原因导致您的机器出现问题。但是，将您的解决方案与我的解决方案进行比较，查看错误代码`QProcess`并在插槽内设置断点应该可以帮助您找到错误。

# c# - 作为客户端和服务器的程序

> ID：11921006
> 
> 赞同：0
> 
> 时间：2012-08-12T09:01:17.507
> 
> 标签：c#, .net, wcf, exception-handling

我有几个关于 WCF 的问题： - 程序可以同时充当客户端和服务器吗？- 我的代码有什么问题：

服务：

```
[ServiceContract]
public interface IShout
{
    [OperationContract]
    String Broadcast(String message);
} 
```

实施：

```
public class eveShout : IShout
{
    public String Broadcast(String message)
    {
        return message + " reply";
    }
} 
```

我以构造函数的形式启动服务：

```
ServiceHost s = new ServiceHost(typeof(IShout));
s.AddServiceEndpoint(typeof(IShout), new BasicHttpBinding(), "http://localhost:9189");
s.Open(); 
```

当我单击另一个表单上的按钮时，我想发送消息并得到回复。我使用以下代码：

```
ChannelFactory<IShout> channel = new ChannelFactory<IShout>(new BasicHttpBinding(), "http://localhost:9189");
IShout shout = channel.CreateChannel();

String reply = shout.Broadcast("Test"); 
```

注意：所有代码都在同一个命名空间中。注意：我首先启动“服务器”（打开）然后应用程序继续。

当我运行代码时，服务器就创建好了。我使用 netstat -a 查看端口是否打开。当我运行命令时，我得到 9189 处于监听状态。但代码在命令回复 = 喊（“测试”）处停止。我得到一个异常说

> 00:00:59 后等待回复时请求通道超时...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:52:46.237

是的，您可以让应用程序同时充当客户端和服务器。

我看到一些可能需要纠正的事情。首先，尝试添加 OperationContract。

```
[ServiceContract]
public interface IShout
{
    [OperationContract]
    String Broadcast(String message);
} 
```

然后，取类的类型，而不是接口。

```
ServiceHost s = new ServiceHost(typeof(eveShout));
s.AddServiceEndpoint(typeof(IShout), new BasicHttpBinding(), "http://localhost:9189");
s.Open(); 
```

确保您有权访问命名空间（如果没有，s.Open() 应该抛出异常）。

```
net http add urlacl url=http://+:9189/ user=... 
```

看看这些建议是否有帮助。

（哦，是的，在你的课堂上公开广播）

一个简单的例子 WindowsFormsApplication 看起来像这样......

```
// form1.cs
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.ServiceModel;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ChannelFactory<IShout> channel = new ChannelFactory<IShout>(new BasicHttpBinding(), "http://localhost:9189");
            IShout shout = channel.CreateChannel();

            String reply = shout.Broadcast("Test"); 

        }
    }
}

// and Program.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.ServiceModel;

namespace WindowsFormsApplication1
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            ServiceHost s = new ServiceHost(typeof(eveShout));
            s.AddServiceEndpoint(typeof(IShout), new BasicHttpBinding(), "http://localhost:9189");
            s.Open(); 

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }

    public class eveShout : IShout
    {
        public String Broadcast(String message)
        {
            return message + " reply";
        }
    } 

    [ServiceContract]
    public interface IShout
    {
        [OperationContract]
        String Broadcast(String message);
    } 
} 
```

看看你能不能得到像这样简单的东西。这至少会向你证明这是可以做到的，而且问题出在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:58:52.113

启用 WCF 调试。

最简单的方法是使用 WCF 服务配置编辑器。打开实用程序，然后浏览以打开应用程序的配置文件。从诊断部分只需单击“启用跟踪”。默认跟踪会很好。

运行应用程序后，框架会将日志文件转储到配置文件中指定的位置。双击打开它并阅读红色事件（这些是有异常或意外结果的事件）。它非常有帮助，应该可以帮助您确定问题发生在哪里。

# c++ - 在相同状态类型的各个屏幕之间切换？

> ID：11921007
> 
> 赞同：3
> 
> 时间：2012-08-12T09:01:27.023
> 
> 标签：c++, oop, events, state, fsm

我一直对我正在处理的程序的基本结构有疑问。我是一个非常缺乏经验的程序员，试图自学使用多种状态的程序的基础知识。

现在，我有一个非常简单的游戏式程序，它带有一个游戏循环，将事件、逻辑和渲染重定向到我的 StateManager 类，它将状态推送和弹出到 . StateManager 类然后将事件、逻辑和渲染重定向到向量的 back() 上的任何状态。这个想法是为程序的每个阶段（在这种情况下是一个简单的游戏，包括启动画面、菜单、游戏玩法、死亡画面等）提供各种不同的状态......

但是，我是一个非常新手的编码员（尽我所能去学习），而且我从第一个状态课程开始就遇到了我的程序的一个基本问题......

我制作的第一个类是 SplashScreenState。基本概念是有一个状态，基本上只显示一系列“启动屏幕图像”（例如，假设为 3），每次用户按下一个键，它切换到下一个图像，并且最后（当它没有启动画面图像循环时）切换到下一个状态（菜单状态）。

*我的问题是我很难弄清楚如何构建它。最初，我错误地将每个不同的初始屏幕图像视为 SplashScreenState 的一个实例。但是，我认为这样做是不正确的，因为从技术上讲，所有 3 个启动画面都是同一个“状态”的一部分。*

**所以现在我有两个主要问题：**

*   第一个问题是我不确定如何/在哪里存储所有启动画面图像。如果我想在程序启动时在 3 个不同的屏幕图像之间循环，我应该让它们都成为 SplashScreenState 类的成员吗？或者简单地为“currentImage”设置一个类成员是否更聪明，并且每次用户点击一个键时，它都会运行一个 load() 函数将下一张图像加载到 currentImage 指针中？制作图像数组或矢量并循环浏览它们会更好吗？我只是不确定...

*   我的第二个问题是 SplashScreenState 的 eventhandling() 。我知道我希望屏幕上的图像像这样改变；*image1 -> image 2 -> image 3 -> changeState(menuState).. 这样每次用户按下键盘上的一个键时，它就会切换到下一个启动画面，直到最后一个启动画面，然后它会改变状态到主菜单。我也不确定最好的方法是什么。我应该为每个初始屏幕创建一个枚举并通过它们递增（直到它改变状态的最终屏幕）？我还认为，如果我确实将所有各种屏幕存储在一个数组中，那么我可以轻松地递增它们，但是那会不会优化，因为所有屏幕都必须始终存储在内存中？

无论如何，我知道这个问题可能是非常基本和愚蠢的，但不幸的是，这就是我现在所处的位置！我没有接受过任何正规的编程教育，而且我一直在自学，所以我真的非常感谢这个网站上提供的所有帮助和专业知识！^^

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:40:34.243

您似乎在面向对象与处理状态转换的过程范式之间左右为难。另一个建议使用 switch 语句来处理枚举状态更改的答案是一种很好的程序方法。这样做的缺点是您最终可能会得到一个单一的游戏类，其中包含所有代码和所有多余的特定于状态的数据，用于处理所有可能状态的事件/逻辑/渲染。面向对象的处理方式更加简洁，并将它们封装到它们自己独立的状态对象中，可以通过共享接口多态地使用它们。然后，您的游戏类不需要保存用于处理游戏类中所有状态的所有细节，而只需要存储一个状态指针，而不必担心具体状态对象的实现细节。这将处理状态转换的责任从游戏类移到它所属的状态类中。您应该阅读设计模式书籍中的状态/策略模式。处理状态的变化应该是状态对象本身的责任。这里有一些阅读：

[http://www.codeproject.com/Articles/14325/Understanding-State-Pattern-in-C](http://www.codeproject.com/Articles/14325/Understanding-State-Pattern-in-C)

[http://sourcemaking.com/design_patterns/state](http://sourcemaking.com/design_patterns/state)

[http://sourcemaking.com/design_patterns/state/cpp/1](http://sourcemaking.com/design_patterns/state/cpp/1)

[http://codewrangler.home.comcast.net/~codewrangler/tech_info/patterns_code.html#State](http://codewrangler.home.comcast.net/~codewrangler/tech_info/patterns_code.html#State)

[http://en.wikipedia.org/wiki/State_pattern](http://en.wikipedia.org/wiki/State_pattern)

[http://www.codeproject.com/Articles/38962/State-Design-Pattern](http://www.codeproject.com/Articles/38962/State-Design-Pattern)

引用 Design Patterns 和 Pattern-Oriented Software Architecture 书籍：基于模式的方法使用代码而不是数据结构来指定状态转换，但在适应状态转换操作方面做得很好。状态模式没有指定必须在哪里定义状态转换。它可以在上下文对象中完成，也可以在每个单独的派生状态类中完成。让状态子类指定它们的后继状态以及何时进行转换通常更加灵活和合适。

您可以选择提前创建状态对象并且从不销毁它们，这在状态变化迅速发生并且您希望避免销毁可能很快再次需要的状态时会很好。另一方面，它可能不方便，因为上下文必须保留对所有可能进入的状态的引用。

当将要进入的状态在运行时未知并且上下文不经常更改状态时，最好根据需要创建状态对象并在之后销毁它们。在确定使用哪个时，您需要考虑成本和转换频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:50:35.363

首先，对您的问题的出色解释。

管理启动画面的游戏部分可以通过两种方式工作。你已经检查了这个问题，它真的很简单：

接收输入；设置下一个状态。

所以，例子：

```
 STATE_SPLASH1
 STATE_SPLASH2
 STATE_SPLASH3
 STATE_TITLE
 STATE_GAME_INIT
 STATE_GAME
 STATE_EXIT 
```

伪代码：

```
state = STATE_SPLASH1

while (state != STATE_EXIT) 
  ... receive input ...
  ... process events to responders ...
  ... update ...
  ... yadda yadda ...
  switch (state) {
    case STATE_SPLASH1:
      show_splash1()
    case STATE_SPLASH2:
      show_splash2()
    case ..:

    case STATE_TITLE:
      show_title()
    case STATE_GAME_INIT:
      show_loading()
      setup_level()
      setup_characters()
    case STATE_GAME:
      game_update()
    case STATE_EXIT:
      cleanup_and_quit() 
```

另一种方法是将启动画面管理为“游戏状态”，然后将启动画面的状态作为内部状态。当 splash 没有更多的逻辑可以运行时，将游戏状态设置为下一个。在我学习的时候，我发现 DOOM 源是一个宝贵的资源和人，它只不过是数百个状态机。:)

# android - Android - 如何将文本与图像合并？

> ID：11921009
> 
> 赞同：-1
> 
> 时间：2012-08-12T09:01:30.240
> 
> 标签：android

您知道是否可以将输入文本与图像合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:12:39.850

可能你的意思是像这个例子这样的图像视图你可以在列表中添加一个图标

经典的 Android ListView 是一个简单的文本列表——坚实但没有灵感。基本上，我们向 ListView 传递数组中的一堆单词，并告诉 Android 使用简单的内置布局将这些单词倒入列表中。但是，我们可以有一个列表，其行由图标、图标和文本、复选框和文本或任何我们想要的内容组成。这只是向适配器提供足够的数据并帮助适配器为每一行创建更丰富的视图对象集的问题。例如，假设我们想要一个 ListView，其条目由一个图标和一些文本组成。我们可以为如下所示的行构造一个布局，可以在 FancyLists/Static 示例项目的 res/layout/row.xml 中找到：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<TextView
android:id="@+id/selection"
android:layout_width="fill_parent"
android:layout_height="wrap_content"/>
<ListView
android:id="@android:id/list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:drawSelectorOnTop="false"
/>
</LinearLayout> 
```

此布局使用 LinearLayout 设置一行，左侧是图标，右侧是文本（采用漂亮的大字体）。然而，默认情况下，Android 不知道我们想在 ListView 中使用这个布局。为了建立连接，我们需要为我们的适配器提供前面显示的自定义布局的资源 ID：

```
 public class StaticDemo extends ListActivity {
    private TextView selection;
    private static final String[] items={"lorem", "ipsum", "dolor",
    "sit", "amet",
    "consectetuer", "adipiscing", "elit", "morbi", "vel",
    "ligula", "vitae", "arcu", "aliquet", "mollis",
    "etiam", "vel", "erat", "placerat", "ante",
    "porttitor", "sodales", "pellentesque", "augue", "purus"};
    @Override
    public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    setListAdapter(new ArrayAdapter<String>(this,
    R.layout.row, R.id.label,
    items));
    selection=(TextView)findViewById(R.id.selection);
    }
    public void onListItemClick(ListView parent, View v,
    int position, long id) {
    selection.setText(items[position]);
    }
    } 
```

这遵循上一个 ListView 示例的一般结构。这里的关键区别是我们已经告诉 ArrayAdapter 我们要使用我们的自定义布局 (R.layout.row) 并且单词应该去的 TextView 在该自定义布局中称为 R.id.label。注意：请记住，要引用布局 (row.xml)，请使用 R.layout 作为布局 XML 文件 (R.layout.row) 的基本名称的前缀。结果是一个左侧有图标的 ListView；在这个例子中，所有的图标都是一样的，如图 13-1 所示。

![图13-1](../Images/046325c12d83e413d42a8aa315118363.png)

# android - 使用 SQLite 从字符串数组填充微调器

> ID：11921010
> 
> 赞同：0
> 
> 时间：2012-08-12T09:02:10.703
> 
> 标签：android, sqlite

我有从 SQLite 数据库填充的微调器。但我想从字符串数组中填充它：

```
<string-array name="category">
    <item name="accommodation">Accommodation</item>
    <item name="automobile">Automobile</item>
    <item name="credit cards">Credit Cards</item>
    <item name="donations">Donations</item>
    <item name="entertainment">Entertainment</item>
    <item name="food">Food</item>
</string-array> 
```

`name`我从 SQLite 表中获取的位置。我有`name`从数据库中检索的方法：

```
public Cursor getAllCategory() {
    mDB = dbHelper.getReadableDatabase();
    return mDB.query(CATEGORY_TABLE_NAME, null, null, null, null, null,null);
} 
```

在我的程序中，我使用这些名称：

```
// spinner
        catSpinner = (Spinner) view.findViewById(R.id.category_spinner);
        cursor = adapter.getAllCategory();
        String[] from = new String[] { DataAdapter.CATEGORY_COL_NAME };
        int[] to = new int[] { android.R.id.text1 };
        SimpleCursorAdapter catAdapter = new SimpleCursorAdapter(
                getActivity(),
                android.R.layout.simple_spinner_dropdown_item, cursor,
                from, to, 0);
        catAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        catSpinner.setAdapter(catAdapter); 
```

但我想使用数据库中的名称，但响应这些名称（string.xml）的值来自`string-array`

我怎么能做到这一点？我想这样做是为了避免在更改本地化时更改数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:16:20.657

试试这个。为了将数据输入到微调器中，您必须使用`SimpleCursorAdapter`下面给出的。

```
 // This is your method of database class which returns cursor
 Public Cursor getAllNames(){
   return mDb.query(table_name, new String[]{KEY_ROWID, KEY_TITLE}, null, null, null, null, null );
} 
```

并在微调器中使用此方法获取项目（即名称）。

```
 Cursor c = mDbHelper.getAllNames();
 startManagingCursor(c);

  String[] from = new String[]{your_name};
// create an array of the name which you want to bind our data to
  int[] to = new int[]{android.R.id.text1};

  // This is your simple cursor adapter
   SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
   adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );

   Spinner s = (Spinner) findViewById( R.id.unique_id ); // This is your spinner
   s.setAdapter(adapter); // Set it to the adapter 
```

希望这可以帮助。:)

# php - 'htmlspecialchars' 的液体等价物

> ID：11921011
> 
> 赞同：0
> 
> 时间：2012-08-12T09:02:42.330
> 
> 标签：php, ruby, liquid, htmlspecialchars

`input`在使用 Octopress 中的 Liquid 模板引擎时，我正在尝试以标准 HTML 表单转义字段。

`<input type="hidden" name="post_title" value="{{page.title}}" />`

什么是 Ruby/Liquid 等价于 PHP 的[htmlspecialchars](http://www.php.net/manual/en/function.htmlspecialchars.php)？是否已经有一个过滤器可以做到这一点，还是我需要使用自定义`replace`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:14:51.710

似乎标准`escape`过滤器可以解决问题。

`<input type="hidden" name="post_title" value="{{ page.title | escape }}" />`

尽管过滤器上的文档令人讨厌地没有帮助，但检查[代码](https://github.com/Shopify/liquid/blob/master/lib/liquid/standardfilters.rb#L28)，它使用[了 CGI.escapeHTML](http://rdoc.sourceforge.net/rd/doc/classes/CGI.html)，它具有更好的文档页面，并且似乎转义了与 PHP 等效的相同字符。

请注意，它只转义双引号，因此如果需要，需要手动完成单引号转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:07:26.540

```
CGI::escapeHTML("<foo>&&&</foo>")
#=> "&lt;foo&gt;&amp;&amp;&amp;&lt;/foo&gt;" 
```

# selenium - 在 Listener 类中捕获 Selenium 失败屏幕截图的问题

> ID：11921013
> 
> 赞同：0
> 
> 时间：2012-08-12T09:02:54.760
> 
> 标签：selenium, webdriver, screenshot, selenium-webdriver, reportng

我正在使用带有 ReportNG 的侦听器类来捕获失败的测试用例的屏幕截图。问题是当我在侦听器类中使用以下内容时：

```
WebDriver driver = new FirefoxDriver();
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE); 
```

问题：Webdriver 打开另一个空白浏览器窗口，因为侦听器类没有做任何事情。并捕获空白屏幕截图。

所以我的目标是从 Listener 类中截取用基类编写的失败测试用例的截图。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:44:54.757

我通过在 Base 类中定义一个用于捕获屏幕截图的静态方法并在我的 Listener 类中通过类名调用它来解决它。

谢谢人们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:13:53.053

如果您使用`new FirefoxDriver();`. Web 驱动程序不知道要打开哪个地址。您必须`webDriver.get()`在截屏之前调用该方法。

# java - 如果我第二次更改位置，也会显示上一个标记

> ID：11921020
> 
> 赞同：0
> 
> 时间：2012-08-12T09:03:39.477
> 
> 标签：java, android, android-mapview, android-maps

每当当前位置发生变化时，我都会显示`marker`在我的身上。`current location`下面的代码工作正常。但问题是，-假设我第一次经过某个位置，我的标记将在那个位置，但第二次如果我经过任何其他不同的位置，那么我的标记将在第二个位置但在同一位置时间我的标记也停留在第一个位置，我不想要这个东西。我只需要在当前位置发生变化时，所有其他标记都应该消失，只有当前位置标记应该在那里。希望我对每个人都清楚

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);
        mapController = mapView.getController();
        mapController.setZoom(15);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, new GeoUpdateHandler());

    }

    public class GeoUpdateHandler implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            int lat = (int) (location.getLatitude() * 1E6);
            int lng = (int) (location.getLongitude() * 1E6);

            Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
            int markerWidth = marker.getIntrinsicWidth();
            int markerHeight = marker.getIntrinsicHeight();
            marker.setBounds(0, markerHeight, markerWidth, 0);

            myItemizedOverlay = new MyItemizedOverlay(marker);
            mapView.getOverlays().add(myItemizedOverlay);

            GeoPoint point = new GeoPoint(lat, lng);

            myItemizedOverlay.addItem(point, "myPoint1", "myPoint1");
            mapController.animateTo(point);
            String address = ConvertPointToLocation(point);
            Toast.makeText(getBaseContext(), address, Toast.LENGTH_SHORT).show();

            mapView.invalidate();

        }
} 
```

下面是我的 ItemizedOverlay 类-

```
public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem>{

    private ArrayList<OverlayItem> overlayItemList = new ArrayList<OverlayItem>();

    public MyItemizedOverlay(Drawable marker) {
        super(boundCenterBottom(marker));
        // TODO Auto-generated constructor stub

        populate();
    }

    public void addItem(GeoPoint p, String title, String snippet){
        OverlayItem newItem = new OverlayItem(p, title, snippet);
        overlayItemList.add(newItem);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return overlayItemList.get(i);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return overlayItemList.size();
    }

    public void clear() {
        overlayItemList.clear();
        populate();
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        // TODO Auto-generated method stub
        super.draw(canvas, mapView, shadow);
        //boundCenterBottom(marker);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:14:05.340

您只需在添加新项目之前删除以前添加的项目

```
public void addItem(GeoPoint p, String title, String snippet){
    OverlayItem newItem = new OverlayItem(p, title, snippet);
    overlayItemList.removeAll();
    overlayItemList.add(newItem);
    populate();
} 
```

# javascript - Javascript Geolocation：将坐标存储在数组中

> ID：11921027
> 
> 赞同：0
> 
> 时间：2012-08-12T09:04:26.230
> 
> 标签：javascript, geolocation, coordinates, latitude-longitude, navigator

我创建了一个 HTML 按钮：

```
...onclick="stLoc();"/> 
```

它适用于 stLoc() Javascript 函数。

我的意图是将纬度存储在`vaulesX`数组中。

这是我的代码：

```
var valuesX=[];

//This is to show the current position:

function handleLoc(pos)  {
var a=pos.coords.latitude;
var b=pos.coords.longitude;
var p = new L.LatLng(+a, +b);
mark(p);
}

//Here I intend to store the latitude using "valuesX.push":

function stLoc(pos)  {
var a=pos.coords.latitude;
var b=pos.coords.longitude;
var p = new L.LatLng(+a, +b);
mark(p);
valuesX.push(a);
}

//And this is to enable the geolocation:
function handleErr(pos) {
document.write("could not determine location");
}

if (navigator.geolocation) {
navigator.geolocation.watchPosition(handleLoc,handleErr);
}
else {
document.write("geolocation not supported");
} 
```

我得到的输出是一个空数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T12:05:10.483

对于寻找代码以不同方式实现此功能的人.. 这是代码

```
<script language="javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
<script language="javascript">
function geoSuccess(e){
   var lat = e.coords.latitude;
   var lon = e.coords.longitude;
   var myLoc = "Latitude: " + lat + '<br />Longitude: ' + lon;
   $("#mylocation").html(myLoc);
}
function geoFailed(e){
   $("#mylocation").html("Failed");
}
window.onload=function(e){
    if ( navigator.geolocation){
       navigator.geolocation.getCurrentPosition(geoSuccess, geoFailed);
    } else {
       // Error (Could not get location)
       $("#mylocation").html("Failed");
    }
}
</script>
<div id="mylocation"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:13:01.227

您的**stLoc()**函数期望将**pos**对象作为第一个参数传递。

但是在示例的 HTML 部分中，您没有将此参数传递给函数：

`<a "onclick="stLoc();">`

这会导致错误和应用程序流程中断。

**更新：**

```
<a href="#" onclick="return stLoc();">button</a>

<script type="text/javascript">
var valuesX=[],
    lastPos={a: -1, b: -1};
//This is to show the current position:

function handleLoc(pos)  {
    // in event handler remember lastPos to use it in stLoc on click.
    lastPos.a = pos.coords.latitude;
    lastPos.b = pos.coords.longitude;
    var p = new L.LatLng(lastPos.a, lastPos.b);
    mark(p);
}

//Here I intend to store the latitude using "valuesX.push":

function stLoc()  {
    if(lastPos.a != -1) {
        valuesX.push(lastPos.a);
    }
    return false;
}

//And this is to enable the geolocation:
function handleErr(pos) {
    document.write("could not determine location");
}

if(navigator.geolocation) {
    navigator.geolocation.watchPosition(handleLoc,handleErr);
}
else {
    document.write("geolocation not supported");
}
</script> 
```

# opengl-es - 可旋转动画精灵 GLES 1

> ID：11921029
> 
> 赞同：0
> 
> 时间：2012-08-12T09:04:29.473
> 
> 标签：opengl-es, rotation, sprite

glDrawTexfOES 无法旋转，顶点缓冲区对象已设置 uv 坐标，由于 GLES 1 中的非可编程着色器，我无法更改，我如何在 GLES 1 中使用 spritesheets 制作动画可旋转精灵

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:35:13.803

您可以使用纹理矩阵更改 uv 坐标。

但是要旋转精灵 - 将它们绘制为四边形（使用两个三角形）并将旋转矩阵应用于顶点位置。

# php - PHP：OR 和 ||、AND 和 &&

> ID：11921030
> 
> 赞同：0
> 
> 时间：2012-08-12T09:04:32.557
> 
> 标签：php, conditional-statements

我知道优先级，但如果我们有一个简单的条件：

```
if ($a == 1 AND $b == 2){

} 
```

有什么区别吗

```
if ($a == 1 && $b == 2){

} 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T09:06:14.587

根本没有区别，只是 using 可能`AND`更具可读性。

编辑：刚刚检查过，运算符优先级存在细微差别，请参阅[http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T09:09:41.200

他们做同样的事情。`&&`虽然具有更高的优先级`AND`。

之前有人问过这个问题：

[PHP - 和/或关键字](https://stackoverflow.com/questions/4502092/php-and-or-keywords)

[PHP：'&&'和'AND'之间的区别](https://stackoverflow.com/questions/4511240/php-difference-between-and-and)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T09:09:13.423

两者在 php 中的工作方式相同，但大多数程序员习惯于使用 && 作为大多数编程语言中使用的语法

# git - Git 默认忽略配置目录

> ID：11921032
> 
> 赞同：3
> 
> 时间：2012-08-12T09:04:44.150
> 
> 标签：git

我已经用 git 推送并连续克隆了一个存储库。我注意到 git 已经自动排除了配置目录。

这个设置在哪里？我在哪里可以通知 Git 也考虑该文件夹？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T09:17:48.687

你怎么知道它被自动排除了？

有几件事需要寻找：

*   在文件夹中查看名为 .gitignore 的文件。将 .gitignore 文件放在目录中是排除目录内容的一种方法。它可以列出要忽略的文件模式，也可以列出`*`所有内容。
*   查看 .gitignore 文件的存储库根目录，这将列出存储库的所有忽略。
*   在您的情况下不太可能，但请查看文件 ~/.gitconfig，其中可能包含一个名为 [core] 的顶级条目，其键`excludesfile`指向一个文件，该文件用作您所有项目的 .gitignore 文件那个系统。

例如，这是我所拥有的

```
[core]
    excludesfile = ~/.gitignore 
```

我在其他地方写了关于[在 git 中排除文件的三种主要方法](http://365git.tumblr.com/post/519016351/three-ways-of-excluding-files)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:07:23.307

查找一个名为`.gitignore`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T09:09:57.427

查看您的`.gitignore`存储库中的文件。如果您没有，请查找该`core.excludesfile`值和它指向的文件，以查看 Configure 目录是否被忽略。阅读此处了解更多信息：[http ://schacon.github.com/git/gitignore.html](http://schacon.github.com/git/gitignore.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T09:16:05.190

我不认为 git 默认会排除您的配置目录，您是如何创建本地存储库的，您确定目录不为空吗？但它应该有一个 .gitignore 文件来忽略您的文件，如果不查看`core.excludesfile`. 用户希望 git 在所有情况下忽略的模式（例如，由用户选择的编辑器生成的备份或临时文件）通常进入用户 ~/.gitconfig 中由 core.excludesfile 指定的文件。

# javascript - 投影仪和带有 OrthographicCamera 的光线

> ID：11921033
> 
> 赞同：2
> 
> 时间：2012-08-12T09:04:55.760
> 
> 标签：javascript, webgl, three.js

是否可以将投影仪和射线与 OrthographicCamera 一起使用？
我搜索了它，但没有找到任何示例或文档。我的相机也没有设置在屏幕中央。
`camera = new THREE.OrthographicCamera(0, width, 0, height, orthonear, orthofar);` 这意味着左上角将是 (0 ,0)。所以我认为下面的代码不能正常工作。
`mouse.x = ( event.clientX / width ) * 2 - 1;`
`mouse.y = -( event.clientY / height) * 2 + 1;`
那么如何使用 Projector 和 Ray 与 OrthographicCamera 或任何其他方法与对象进行交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:05:03.680

原始示例：

[http://mrdoob.github.com/three.js/examples/webgl_interactive_voxelpainter.html](http://mrdoob.github.com/three.js/examples/webgl_interactive_voxelpainter.html)

使用右侧的 DAT.GUI 控件将相机更改为正交...

代码中的一个小片段：

```
ray = projector.pickingRay( mouse2D.clone(), camera ); 
var intersects = ray.intersectObjects( scene.children ); 
```

# java - Java将单个字符与字符数组进行比较

> ID：11921035
> 
> 赞同：1
> 
> 时间：2012-08-12T09:05:33.417
> 
> 标签：java, arrays, comparison, char

我需要将单个字符与字符数组进行比较，看看数组是否具有该字符。

我当前的代码如下所示：

```
public boolean isThereChar(char[] chaArray, String chr){
    boolean bool = false;
    for(int i=0; i < chaArray.length; i++)
            {
                if(chr.equals(chaArray[i])){
                    bool = true;
                }
            }
            return bool;
} 
```

**编辑注释：**

真的很抱歉造成混淆！我只是一个 Java 初学者 =/
基本上我正在用 GUI 编写小型刽子手游戏。
我的程序读取文本文件并随机选择玩家必须猜测的单词，然后以这样的隐藏方式打印出来：_ _ _ _ _
在这种情况下，我希望玩家输入字符或字符串（人们可以猜测整个单词或只有一个字母）
然后我希望我的程序获取那个字母或字符串并与我的隐藏词进行比较

以下代码选择单词并将其隐藏：

```
public String pickWord(){
    String guessWord = (wordsList[new Random().nextInt(wordsList.length)]);
    return guessWord.toLowerCase();
}

//Hides picked word
public char[] setWord(){
    char[] word = new char[pickWord().length() * 2];
    for (int i = 0; i < word.length; i+=2) {
        word[i] = '_';
        word[i + 1] = ' ';
    }
    return word;
} 
```

然后人们输入他猜想用以下代码编程的角色：

```
public void actionPerformed(ActionEvent e) {
    String action = e.getActionCommand();

    if (action == "Guess Letter"){
        inputChar = JOptionPane.showInputDialog("Please enter letter (a-z)");
        if (inputChar.length() > 1){
            GuessedLetters glr = new GuessedLetters(inputChar);
            glr.setInString(inputChar);
            //For testing purposes
            System.out.println("This is String: " +glr.getInString());              
        }else{
        GuessedLetters glr = new GuessedLetters(inputChar);
        glr.setInChar(inputChar);
        //For testing purposes
        System.out.println("This is Char: " +glr.getInChar());
        }
    } 
```

Lastly I want to take that character which was inputted and compare to my array of chars which is my hidden word:

```
public boolean isThereChar(char[] array, String str){
    return isThereChar(array, str.charAt(0));
}

public boolean isThereChar(char[] array, char c){
    for(int i=0; i<array.length; i++){
        if (array[i] == c) return true;
    }
    return false;
} 
```

I want to check what does my code returns (true or false), but I keep failing at doing so. (Right now I am trying to call method in my main class to check it, if you can give me tips how to do it otherwise please let me know.)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T09:20:20.603

I would use: `Chars.contains(array, chr);` with [Guava Chars](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/primitives/Chars.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T09:17:27.747

The NullPointerException is happening because either `chaArray` or `chr` is `null` when you call the method. (*And if not, then the NullPointerException is occurring somewhere else!!*)

The other problem with your code is this line:

```
 if (chr.equals(chaArray[i])) { 
```

Since `chr` is actually a String, what is going to happen here is that the value of `chaArray[i]` will be auto-boxed as a `Character` object, and then passed as an argument to `String.equals(Object)`. But the `String.equals(Object)` will return `false` unless its argument is a `String` ... so your code wouldn't find the character anyway.

You need to either compare the character like this:

```
 if (chr.charAt(0) == chaArray[i]) { 
```

or declare `chr` to be a `char` and compare it as:

```
 if (chr == chaArray[i]) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T09:13:51.790

Let's see if I got what you need :

```
public void actionPerformed(ActionEvent e) {
    String action = e.getActionCommand();
    if (action == "Guess Letter"){
        inputChar = JOptionPane.showInputDialog("Please enter letter (a-z)");
        if (inputChar.length() > 1){ //User input is a string here, right?
            GuessedLetters glr = new GuessedLetters(inputChar);
            glr.setInString(inputChar);
            System.out.println(wordToGuess.contains(glr.getInString())); //This will print true if wordToGuess is equal to glr.getInString() or if it just contains it
            //For testing purposes
            System.out.println("This is String: " +glr.getInString());              
        }else{ //Here the user gave us just a character, so we've got to know if this character is contained in the word, right?
        GuessedLetters glr = new GuessedLetters(inputChar);
        glr.setInChar(inputChar);
        System.out.println(wordToGuess.contains(glr.getInChar()); //This will print true if your char is in the wordToGuess string
        //For testing purposes
        System.out.println("This is Char: " +glr.getInChar());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T09:10:53.400

`String chr` might be null causing `NullPointerException`.

Use `char chr` instead of `String`.

```
public boolean isThereChar(char[] chaArray, char chr){
    boolean bool = false;
    for(int i=0; i < chaArray.length; i++) {
        if(chr==chaArray[i])){
             bool = true;
        }
    }
    return bool;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T09:12:45.763

Select the character from the parameter passed in, or pass in a char e.g.

```
chr[0] 
```

or

```
public String isThereChar(char[] chaArray, char chr){
    for(int i=0; i < chaArray.length; i++)
            {
                if(chr.equals(chaArray[i])){
                    return chr;
                }
            }
            return "Guess Again";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T09:22:30.337

```
public boolean  isThereChar(char[] chaArray, char chr){        
for(int i=0; i < chaArray.length; i++)
        {
            if((chaArray[i]==chr)){
                return true;   // means Character exist in the Character array
            }
        }
        return false;  //// means Character does not exist in the Character array
} 
```

# android - Settings.System 上的错误

> ID：11921036
> 
> 赞同：1
> 
> 时间：2012-08-12T09:05:35.040
> 
> 标签：android

每次 Settings.System 出现在它刚才所说的代码中时，我都会收到错误`System cannot be resolved`消息`not a field`。我怎样才能解决这个问题？

```
public class InternetSpeedup extends Activity {

ImageView toggle;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_internet_speedup);
    toggle = (ImageView) findViewById(R.id.imageView1);

    new CountDownTimer(31000, 1000) {
        public void onTick(long millisUntilFinished) {
            //toggle.setText("You have "+ millisUntilFinished / 1000 + " seconds left");
        }
        public void onFinish() {
            // read the airplane mode setting
            boolean isEnabled = Settings.System.getInt(
                  getContentResolver(), 
                  Settings.System.AIRPLANE_MODE_ON, 0) == 1;

            // toggle airplane mode
            Settings.System.putInt(
                  getContentResolver(),
                  Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);

            // Post an intent to reload
            Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
            intent.putExtra("state", !isEnabled);
            sendBroadcast(intent);
        }
    };
  }    
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T23:21:38.377

here before every settings use android.provider like this :

```
public class MainActivity extends Activity implements OnClickListener {

    Button air;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        air = (Button) findViewById(R.id.button1);
        air.setOnClickListener(this);
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        // read the airplane mode setting
        boolean isEnabled = android.provider.Settings.System.getInt(
              getContentResolver(), 
              android.provider.Settings.System.AIRPLANE_MODE_ON, 0) == 1;

        // toggle airplane mode
        android.provider.Settings.System.putInt(
              getContentResolver(),
              android.provider.Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);

        // Post an intent to reload
        Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
        intent.putExtra("state", !isEnabled);
        sendBroadcast(intent);

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T10:18:21.667

添加`import android.provider.Settings`到 Java 文件顶部的导入列表中。或者，如果您使用的是 Eclipse，请尝试 [Ctrl]-[Shift]-[O]。

# regex - .htaccess RewriteRule 用于多个页面

> ID：11921037
> 
> 赞同：2
> 
> 时间：2012-08-12T09:05:38.690
> 
> 标签：regex, .htaccess

我已经为我的网站中的索引页面完成了 RewriteRule。

下面是代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^([a-zA-Z0-9+\-\(\)]+)/?$ /index.php?origin=$1
RewriteRule ^([a-zA-Z0-9+\-\(\)]+)/([a-zA-Z0-9+\-]+)/?$ /index.php?origin=$1&gender=$2
RewriteRule ^([a-zA-Z0-9+\-\(\)]+)/([a-zA-Z0-9+\-]+)/([a-zA-Z0-9+\-]+)/?$ /index.php?origin=$1&gender=$2&type=$3
RewriteRule ^([a-zA-Z0-9+\-\(\)]+)/([a-zA-Z0-9+\-]+)/([a-zA-Z0-9+\-]+)/([a-zA-Z0-9+\-]+)/?$ /index.php?origin=$1&gender=$2&type=$3&page=$4
</IfModule> 
```

网址看起来像

```
http://babynames.agurchand.com/scottish/male/pythagorean 
```

这是一个单页网站，所以到目前为止一切正常。然后我想在我的网站上再添加一页，我也添加了。文件名为“namemeaning.php”。

除了在底部粘贴的 htaccess 之外，我还添加了以下代码。但这似乎不起作用。

```
RewriteRule ^/namemeaning/([a-zA-Z0-9+\-\(\)]+)/?$ /namemeaning/namemeaning.php?name=$1 
```

我已经尝试使用下面的 url，但我仍然只被引用到索引页面。

```
http://babynames.agurchand.com/namemeaning/abasi 
```

任何人都可以给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:23:29.447

您将被转发到索引页面，因为索引页面的正则表达式符合您的请求。你被发送到 index.php?origin=namemeaning&gender=abasi

```
http://babynames.agurchand.com/namemeaning/abasi
'namemeaning' fits the rule ([a-zA-Z0-9+\-\(\)]+)
'abasi' fits the rule ([a-zA-Z0-9+\-]+) 
```

一个简单的解决方法是添加该行

```
RewriteRule ^/namemeaning/([a-zA-Z0-9+\-\(\)]+)/?$ /namemeaning/namemeaning.php?name=$1 
```

水准之上

```
RewriteRule ^([a-zA-Z0-9+\-\(\)]+)/?$ /index.php?origin=$1 
```

您应该记住始终将最具体的 RewriteRule(s) 放在更通用的 RewriteRule 之上。

有关正则表达式的更多信息，我可以在[这个网站上](http://www.regular-expressions.info/reference.html)为您提供建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:25:06.617

重写规则从上到下依次检查，所有匹配的规则都按该顺序应用。仔细检查您的规则是否在所需规则之前匹配。为此目的的好工具是[http://www.regextester.com/](http://www.regextester.com/)

# c# - wp7宽度属性绑定

> ID：11921053
> 
> 赞同：0
> 
> 时间：2012-08-12T09:07:47.863
> 
> 标签：c#, windows-phone-7, data-binding

我对 Width 属性绑定有疑问。其中一排网格必须具有可变宽度。我决定使用绑定宽度属性来做到这一点，但这不起作用：

```
 private Int32 _avatarWidth;
    public Int32 AvatarWidth
    {
        get { return _avatarWidth; }
        set
        {
            _avatarWidth = value;
            RaisePropertyChanged(() => AvatarWidth);
        }
    } 
```

XAML：

```
<ListBox Grid.Row="1" ItemsSource="{Binding CurrentDialog.Messages}" 
        HorizontalAlignment="Stretch" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            ......
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="{ Binding AvatarWidth }" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            .......
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

但这不起作用。我在设计师中有一个例外：

```
System.Reflection.TargetInvocationException
Exception has been thrown by the target of an invocation.
at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments)
at System.Delegate.DynamicInvokeImpl(Object[] args)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)

System.InvalidOperationException
Layout measurement override of element 'Microsoft.Windows.Design.Platform.SilverlightViewProducer+SilverlightContentHost' should not return PositiveInfinity as its DesiredSize, even if Infinity is passed in as available size.
at System.Windows.UIElement.Measure(Size availableSize)
at MS.Internal.Designer.DeviceSkinViewPresenter.DeviceDesignerBackground.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.Decorator.MeasureOverride(Size constraint)
at Microsoft.Windows.Design.Interaction.DesignerView.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at MS.Internal.Designer.Viewport.MeasureOverride(Size availableSize)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
at System.Windows.Controls.ScrollContentPresenter.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV, Boolean& hasDesiredSizeUChanged)
at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.ScrollViewer.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
at System.Windows.Controls.ContentPresenter.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.Control.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Interop.HwndSource.SetLayoutSize()
at System.Windows.Interop.HwndSource.set_RootVisualInternal(Visual value)
at System.Windows.Interop.HwndSource.set_RootVisual(Visual value)
at MS.Internal.DeferredHwndSource.ProcessQueue(Object sender, EventArgs e) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:12:09.340

首先： ColumnDefinition 的[宽度](http://msdn.microsoft.com/en-us/library/system.windows.controls.columndefinition.width.aspx)不是 Int32 它是[GridLength](http://msdn.microsoft.com/en-us/library/system.windows.gridlength.aspx)结构。注意，“*”不是整数。

第二：[Width](http://msdn.microsoft.com/en-us/library/system.windows.controls.columndefinition.width.aspx)不是依赖属性（也没有实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)），所以你不能绑定到这个属性。

对于您的情况，我可以建议两种解决方案。尝试使用[VisualStateManager](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager%28v=vs.95%29.aspx)或在其他属性的属性更改事件处理程序中实现您的逻辑。

**编辑：**或者您可以按照 Rana 的建议进行操作。将ColumnDefinition 属性的[Width](http://msdn.microsoft.com/en-us/library/system.windows.controls.columndefinition.width.aspx)设置为“Auto”，并绑定到位于此单元格中的子项的 Width 属性。在这种情况下`_avatarWidth`应该`double`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:31:28.800

只需使用 uielement.width 并在需要的地方指定宽度。我不知道您是如何实现代码的，但我想这将是您代码的单行版本。

# python - Twitter Stream API，参数跟随有无法解析的项目

> ID：11921055
> 
> 赞同：1
> 
> 时间：2012-08-12T09:08:55.640
> 
> 标签：python, twitter, streaming, pycurl

最近我在推特上做一个小项目，我想得到一些特定用户的推文。

所以我使用`Streaming API`,`pycurl`和`python`.

API参考说`follow`参数是：

> 逗号分隔的用户 ID 列表，指示要在流中返回状态的用户。有关详细信息，请参阅以下参数文档。

我试过这个

```
c.setopt(c.POSTFIELDS, 'follow=slaindev') 
```

但返回的消息不是`slaindev`发布的推文，而是一个错误

> 参数 follow 有无法解析的项目 slaindev

那么我误解了用户ID的含义吗？我认为这是我们用来提及某人的那个（我的意思是我用@slaindev 来提及这个人）。

当我尝试跟踪参数时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:00:41.003

您对 user_id 的假设不正确。例如，[请参](https://dev.twitter.com/docs/api/1/get/users/lookup "这")见此。您在谈论屏幕名称。

# codeigniter - Codeigniter：相互依赖的下拉列表。完成的代码

> ID：11921061
> 
> 赞同：0
> 
> 时间：2012-08-12T09:10:03.480
> 
> 标签：codeigniter

我有一系列相互依赖的选择列表，它们在 CI 之外可以正常工作。当我尝试在 Codeigniter 中实现它时，由于第一个选择列表未填充，或者回显代码不正确，或者我不知道是什么，我没有继续。这里的这个问题将只涉及第一个选择列表，也就是说，您不会看到任何 jquery，因为第一个直接从数据库中填充，没有任何“功能更改”。

所以这里是模块：

看法

```
<?php echo form_open('control_form/add_all'); ?>
       <label for="f_state">State<span class="red">*</span></label>
        <select id="f_state" name="f_state">
            <option value=""></option>
            <?php

                foreach($result as $row)
                {
                echo '<option value="' . $row->pais_id . '">' . $row->pais_name . '</option>';
                }

            ?>
        </select>

        <label for="f_city">City<span class="red">*</span></label>
        <!--this will be filled based on the tree selection above-->
        <select id="f_city" name="f_city" id="f_city_label"> 
            <option value=""></option>
        </select>

        <label for="f_membername">Member Name<span class="red">*</span></label>
        <input type="text" name="f_membername"/>
<?php echo form_close(); ?> 
```

控制

```
public function add_all()
    {

        #Validate entry form information
        $this->load->model('model_form','', TRUE);        
        $this->form_validation->set_rules('f_state', 'State', 'required');
        $this->form_validation->set_rules('f_city', 'City', 'required');
        $this->form_validation->set_rules('f_membername', 'Member Name', 'required');

        $data['city'] = $this->model_form->get_state(); //gets the available groups for the dropdown

        if ($this->form_validation->run() == FALSE)
        {
              $this->load->view('view_form_all', $data); # parece ser que vuelve a meter los mismos datos que tenia la Form
        }
        else
        {
            #Add Member to Database
            $this->model_form->add_all();
            $this->load->view('view_form_success');
        }

    } 
```

模型

```
<?php
class Model_form extends CI_Model
{
      function __construct()
    {
            // Call the Model constructor
            parent::__construct();
    }

    function get_state()
    {
        $query = $this->db->query('SELECT pais_id, pais_name FROM pais');
        return $query->result();
    }

    function add_all()
    {
        $v_state = $this->input->post('f_state');
        $v_membername = $this->input->post('f_membername');

        $data = array(
                'pais_id' => NULL,
                'pais_name' => $v_state

        );

        $this->db->insert('members', $data);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:15:25.157

您没有发送`$result`到视图，您需要以下内容：

```
$data['result'] = ...//get some data
$this->load->view('view_form_all',$data); 
```

如果您要显示的列表是城市列表，那么您需要在视图中进行更改：

```
foreach($city as $row)
{
      echo '<option value="' . $row->pais_id . '">' . $row->pais_name . '</option>';
} 
```

因为在你的控制器中你正在做：

```
$data['city'] = $this->model_form->get_state(); 
```

# android-layout - 如何在android的一个活动中拥有多个布局？

> ID：11921068
> 
> 赞同：0
> 
> 时间：2012-08-12T09:11:13.337
> 
> 标签：android-layout, android-imageview, android-custom-view, viewgroup

我在我的活动中想要的是在一行顶部的两个按钮.. 在下面我想要一个我想要一个 imageview 的框架布局，我将在 imageview 的顶部添加我的自定义视图。我尝试了很多，但我有很多困惑。

![在此处输入图像描述](../Images/976de1131eb6975b5d72daebeec37953.png)

如下图所示有点像我想要的。我想使用 framelayout，因为我想在我的 imageview 上添加我的自定义视图。但是，如果我在 framelayout 上添加按钮，它会出现在图像上方。这对我来说变得非常混乱和混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:31:30.677

我不知道我们可以在一个活动中嵌套两个布局。我用 FrameLayout 嵌套了 LinearLayout，我的问题得到了解决。干杯！

# c++ - 在这种情况下我应该避免“goto”吗？

> ID：11921071
> 
> 赞同：3
> 
> 时间：2012-08-12T09:11:31.070
> 
> 标签：c++, goto

我正在制作一个“连接迭代器”，即一个迭代器，它将迭代`int`s 中的 s `int**`。

它的构造函数需要：

*   的数组`T**`，表示每个子数组的开头。
*   的数组`T**`，表示每个子数组的结尾。

瞧，我遇到了一个`goto`似乎合适的情况。

但我内心的某种东西尖叫着“不！！” 所以我想我会来这里问：

### 我应该尽量避免`goto`这样的情况吗？（如果我这样做会提高可读性吗？）

```
#include <algorithm>

template<class T>
class lazy_concat_iterator
{
    // This code was meant to work for any valid input iterator
    // but for easier reading, I'll assume the type is: T**

    mutable T** m_endIt;              // points to an array of end-pointers
    mutable T** m_it;                 // points to an array of begin-pointers
    mutable bool m_started;   // have we started iterating?
    mutable T* m_sub;         // points somewhere in the current sub-array
    mutable T* m_subEnd;      // points to the end of the current sub-array

public:
    lazy_concat_iterator(T** begins, T** ends)
        : m_it(begins), m_endIt(ends), m_started(false) { }

    void ensure_started() const
    {
        if (!m_started)
        {
            m_started = true;

        INIT:
            m_sub = *m_it;
            m_subEnd = *m_endIt;

            if (m_sub == m_subEnd)  // End of this subarray?
            {
                ++m_it;
                ++m_endIt;
                goto INIT;  // try next one         <<< should I use goto here?
            }
        }
    }
}; 
```

如何使用它：

```
#include <vector>
#include <cstring>

using namespace std;

int main(int argc, char* argv[])
{
    vector<char*> beginnings(argv, argv + argc);

    vector<char*> endings;
    for (int i = 0; i < argc; i++)
        endings.push_back(argv[i] + strlen(argv[i]));

    lazy_concat_iterator<char> it(&beginnings[0], &endings[0]);
    it.ensure_started();  // 'it' would call this internally, when dereferenced
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T09:18:56.813

是的，您可以并且应该避免`goto`，例如，此代码应该与您在标签中所做的相同`INIT`（这也适用于输入迭代器，这是一个“隐藏的要求”，因为它不会取消引用`m_it`并且`m_endIt`一旦条件出现额外的时间与我之前的转换不同）：

```
while ((m_subIt = *m_it) == (m_subEnd = *m_endIt))
{
    ++m_it;
    ++m_endIt;
} 
```

* * *

**以前的答案尝试：**

即使是永久循环也会比`goto`. 它更好地突出了明显的“永不终止”的可能性。

```
 for (;;)
    {
        m_sub = *m_it;
        m_subEnd = *m_endIt;

        if (m_sub != m_subEnd)
            break;

        ++m_it;
        ++m_endIt;
    } 
```

虽然我不明白为什么你需要分配给循环内部`m_subEnd`。`m_subIt`如果不这样做，您可以将其重写为 while 循环：

```
while (*m_it == *m_endIt)
{
    ++m_it;
    ++m_endIt;
}

m_subIt = *m_it;
m_subEnd = *m_endIt; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T09:18:16.453

```
while (*m_it == *m_endIt)
{
    ++m_it;
    ++m_endIt;
}

m_sub = *m_it;
m_subEnd = *m_endIt; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T09:17:53.410

也许没有 for 循环，但也许是一个 do-while？

```
 do {
        m_sub = *m_it;
        m_subEnd = *m_endIt;

        if (m_sub == m_subEnd)  // End of this subarray?
        {
            ++m_it;
            ++m_endIt;
        }
    } while (m_sub == m_subEnd); 
```

如果您不想进行两次比较并且仍然避免使用 goto 的隐形表亲之一，请中断或继续：

```
 bool anotherround = FALSE;
    do {
        m_sub = *m_it;
        m_subEnd = *m_endIt;

        anotherround = m_sub == m_subEnd
        if (anotherround)  // End of this subarray?
        {
            ++m_it;
            ++m_endIt;
        }
    } while (anotherround); 
```

凭借您对上下文的了解，我相信您可以发明更好的变量名，但这就是想法。

关于 goto 对可读性的影响：对我来说，goto hey 的主要问题是它迫使程序员记住代码中潜在的非逻辑运动——突然之间，代码几乎可以跳转到任何地方。如果您使用控制结构，即使您必须引入一些额外的行或诸如此类的东西，程序也会继续按预期运行并遵循流程。从长远来看，这就是可读性的全部意义所在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T09:25:09.250

不要使用 goto。唯一可以原谅 goto 的情况是，如果您有一个复杂的函数（无论如何都不应该有），并且您希望在函数末尾有一个集中的退出/清理部分，您可以在其中转到不同的错误在功能的不同部分，或因成功而失败。

总而言之，您应该在这里使用 do-while 循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T09:17:45.983

人们使用汇编程序（和高级汇编程序）创建了中高级编译器。汇编器有许多 jmp jnz jg jl 命令的行为类似于 goto。他们做到了这一点。你不能这样做吗？如果你不能，那么你回答了你自己的问题。

我不能对口译员说同样的话。

# asp.net - 即使不更改日期，RadDatePicker 也会执行 PostBack

> ID：11921078
> 
> 赞同：0
> 
> 时间：2012-08-12T09:13:41.497
> 
> 标签：asp.net, telerik

我正在使用 Telerik ASP.NET Rad Ajax 控件，版本 2011.2.915.40。

我在页面中添加了一个 RadDatePicker，并将日期初始化为今天。

单击 raddatepicker 并选择我所在的同一日期两次（首先取消选择它，seoncds 选择它） - 回发到服务器。但是，`OnSelectedChange`不会调用 datepicker 的函数。

理想情况下，如果日期没有更改，控件将不会回发，但我可以接受回发并调用该`OnSelectedChange`函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:13:41.497

在通过支持票联系 Telerik 后，我发现此问题已在 2012.2.607 版本中修复。

现在`RadDatePicker`仅在日期更改时回发。

# java - 在 Android 中将数据从一个 Java 文件传递 到另一个文件

> ID：11921082
> 
> 赞同：2
> 
> 时间：2012-08-12T09:14:34.967
> 
> 标签：java, android, android-intent

我是 Android 开发的新手。我的项目中有两个 Java 文件。一个文件包含我的主要活动，因此我想将数据从一个 Java 文件传输到另一个包含主要活动的文件。

cordovaExample.java:

```
package org.apache.cordova.example;

import android.content.Context;
import android.content.Intent;
import android.telephony.*;
import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

import org.apache.cordova.*;
public class cordovaExample extends DroidGap
{
@Override
 public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    Bundle extras = getIntent().getExtras();
    String phno = extras.getString("novel.PhoneNumber");
   Toast.makeText(getApplicationContext(),phno,Toast.LENGTH_LONG).show();

}
} 
```

小说.java

```
package org.apache.cordova.example;

import android.content.Context;
import android.content.Intent;
import android.telephony.*;
import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

public class novel extends Activity
{ 
public String PhoneNumber;
Context mcontext;
public String getNumber()
{

 TelephonyManager tMgr=(TelephonyManager)mcontext.getSystemService(Context.TELEPHONY_SERVICE); 

         Intent intent = new Intent(this, cordovaExample.class);
            intent.putExtra("novel.PhoneNumber", PhoneNumber);
                startActivity(intent);
               return PhoneNumber = tMgr.getLine1Number();
        }

} 
```

所以我想将`"PhoneNumber"`from转移`novel.java`到`cordovaExample.java`but in `novel.java`，运行应用程序后我进入`"unfortunately app has stopped"`模拟器。

这是日志猫

```
08-12 15:49:37.657: E/AndroidRuntime(779): FATAL EXCEPTION: main
08-12 15:49:37.657: E/AndroidRuntime(779): java.lang.RuntimeException: Unable to start activity  ComponentInfo{org.apache.cordova.example/org.apache.cordova.example.cordovaExample}: java.lang.NullPointerException
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.os.Looper.loop(Looper.java:137)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-12 15:49:37.657: E/AndroidRuntime(779):  at java.lang.reflect.Method.invokeNative(Native Method)
08-12 15:49:37.657: E/AndroidRuntime(779):  at java.lang.reflect.Method.invoke(Method.java:511)
08-12 15:49:37.657: E/AndroidRuntime(779):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-12 15:49:37.657: E/AndroidRuntime(779):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-12 15:49:37.657: E/AndroidRuntime(779):  at dalvik.system.NativeStart.main(Native Method)
08-12 15:49:37.657: E/AndroidRuntime(779): Caused by: java.lang.NullPointerException
08-12 15:49:37.657: E/AndroidRuntime(779):  at org.apache.cordova.example.cordovaExample.onCreate(cordovaExample.java:20)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.app.Activity.performCreate(Activity.java:4465)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-12 15:49:37.657: E/AndroidRuntime(779):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-12 15:49:37.657: E/AndroidRuntime(779):  ... 11 more 
```

另外，如果我尝试这个简单的程序，我会得到相同的结果：

```
cordovaExample.java

package org.apache.cordova.example;

import android.content.Context;
import android.content.Intent;
import android.telephony.*;
import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

import org.apache.cordova.*;
public class cordovaExample extends DroidGap
{
@Override
 public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

   novel c=new novel()
   int a=c.getNumber();
   Toast.makeText(getApplicationContext(),a,Toast.LENGTH_LONG).show();

}
} 
```

小说.java

```
package org.apache.cordova.example;

import android.content.Context;
import android.content.Intent;
import android.telephony.*;
import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

public class novel extends Activity
{ 
public int a=0;
public int getNumber()
{

    a=5;

 return a;
        }

} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:33:45.947

**您在返回块后使用意图语句**

返回电话号码 = tMgr.getLine1Number();

意图 myIntent = new Intent(novel.this, cordovaExample.class);

返回块后，任何代码都显示无法访问的错误。

**传递意图参数后，您可以调用return。**

```
 TelephonyManager tMgr=(TelephonyManager)mcontext.getSystemService(Context.TELEPHONY_SERVICE); 

   Intent intent = new Intent(this, cordovaExample.class);
   intent.putExtra("novel.PhoneNumber", PhoneNumber);
   startActivity(intent);
   return PhoneNumber = tMgr.getLine1Number(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:27:52.113

Android API 指南包含有关[如何在单个应用程序内的活动/服务之间传递数据](http://developer.android.com/guide/faq/framework.html#3)的权威常见问题解答项目。

试试这个，

在小说中这样做设置电话号码

```
Intent myIntent = new Intent(novel.this, cordovaExample.class);
myIntent.putExtra("phone", 989898989);
startActivity(myIntent); 
```

在 cordovaExample 文件中执行以下操作以获取 phoneNumber

```
Bundle b = this.getIntent().getExtras();
String i = b.getString("phone"); 
```

如果您无法传递数据，那么另一种方法是声明公共方法并传递它们，请参见以下示例，

小说.java

```
private static String phoneNumber = "";

public void onCreate()
{
    ...
    phoneNumber = "9898989898";
    ...
}

public static String getPhoneNumber()
{
      return phoneNumber;
} 
```

cordovaExample.java

```
private static String phoneNumber = ""; 

phoneNumber = novel.getPhoneNumber(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T12:34:04.677

将您的代码更改为：您获得了 NPE，`cordovaExample.java`因为`novel`您将`null`PhoneNumber 放入 Extra。

```
 TelephonyManager tMgr=(TelephonyManager)mcontext.getSystemService(Context.TELEPHONY_SERVICE); 

             Intent intent = new Intent(this, cordovaExample.class);
             PhoneNumber = tMgr.getLine1Number(); // Check PhoneNumber  not null here before send to cordovaExample
if (PhoneNumber !=null ){
                intent.putExtra("novel.PhoneNumber", PhoneNumber);
                    startActivity(intent);}

            } 
```

# cmake - 将外部源目录添加到 CMake 构建

> ID：11921089
> 
> 赞同：5
> 
> 时间：2012-08-12T09:15:52.680
> 
> 标签：cmake, gmock

我正在为我的项目使用 Google Mock，并且说明说最好与项目一起构建库，因为不同的编译器标志可能会引入错误。我不想将 gmock/ 目录添加到我的存储库；我宁愿将源作为外部依赖项并将其插入我的构建过程。这让我想到了我的问题：我如何指示 CMake 将外部源目录拉到构建中（即在我的项目的构建目录中构建它）？我在这里发现了一个[类似的问题](https://stackoverflow.com/questions/7980784/cmake-add-sub-directory-which-is-not-sub-directory-on-real-directory)，但答案需要一个严格的目录放置，我宁愿有那个可配置的。还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T10:54:34.127

您可以使用[`ExternalProject_Add`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:ExternalProject)它，因为它允许您从项目的构建树中下载、配置和构建 gmock，然后链接到 gmock 库。

@arrowdodger 的[答案](https://stackoverflow.com/a/11921235/424459)可能是解决这个问题的更常见的方法。使用他的方法，您通常不会在构建树中拥有 gmock 源。这可能是好是坏取决于你想要什么。

使用`ExternalProject_Add`，每次构建 gmock 或依赖目标时都会拉取 gmock 源（svn 更新）。这使构建稍微慢了一点，但显然使源代码保持最新并且很方便（让开发人员安装它的依赖性减少了）。对于像 gmock 这样不经常更改的项目，一直更新的开销对您来说可能太多了。

以下 CMakeLists.txt 使用 Visual Studio 2010 和 2012 工作 - 它可能需要针对其他平台进行调整。特别是，gtest 目前无法使用 Visual Studio 2012 构建盒子（请参阅此[错误报告](http://code.google.com/p/googletest/issues/detail?id=408)），因此补丁文件和调用中`PATCH_COMMAND`。`ExternalProject_Add`

```
cmake_minimum_required(VERSION 2.8.8 FATAL_ERROR)
project(Test)

# Create main.cpp which uses gmock
file(WRITE src/main.cpp "#include \"gmock/gmock.h\"\n\n")
file(APPEND src/main.cpp "struct A {\n  virtual void Do() {}\n};\n\n")
file(APPEND src/main.cpp "struct MockA : public A {\n  MOCK_METHOD0(Do, void());\n};\n\n")
file(APPEND src/main.cpp "TEST(A, Do) {\n")
file(APPEND src/main.cpp "  MockA mock_a;\n")
file(APPEND src/main.cpp "  EXPECT_CALL(mock_a, Do()).Times(testing::AtLeast(1));\n")
file(APPEND src/main.cpp "  mock_a.Do();\n}\n\n")
file(APPEND src/main.cpp "int main(int argc, char **argv) {\n")
file(APPEND src/main.cpp "  testing::InitGoogleTest(&argc, argv);\n")
file(APPEND src/main.cpp "  return RUN_ALL_TESTS();\n")
file(APPEND src/main.cpp "}\n")

# Create patch file for gtest with MSVC 2012
if(MSVC_VERSION EQUAL 1700)
  file(WRITE gtest.patch "Index: cmake/internal_utils.cmake\n")
  file(APPEND gtest.patch "===================================================================\n")
  file(APPEND gtest.patch "--- cmake/internal_utils.cmake   (revision 643)\n")
  file(APPEND gtest.patch "+++ cmake/internal_utils.cmake   (working copy)\n")
  file(APPEND gtest.patch "@@ -66,6 +66,9 @@\n")
  file(APPEND gtest.patch "       # Resolved overload was found by argument-dependent lookup.\n")
  file(APPEND gtest.patch "       set(cxx_base_flags \"\${cxx_base_flags} -wd4675\")\n")
  file(APPEND gtest.patch "     endif()\n")
  file(APPEND gtest.patch "+    if (MSVC_VERSION EQUAL 1700)\n")
  file(APPEND gtest.patch "+      set(cxx_base_flags \"\${cxx_base_flags} -D_VARIADIC_MAX=10\")\n")
  file(APPEND gtest.patch "+    endif ()\n")
  file(APPEND gtest.patch "     set(cxx_base_flags \"\${cxx_base_flags} -D_UNICODE -DUNICODE -DWIN32 -D_WIN32\")\n")
  file(APPEND gtest.patch "     set(cxx_base_flags \"\${cxx_base_flags} -DSTRICT -DWIN32_LEAN_AND_MEAN\")\n")
  file(APPEND gtest.patch "     set(cxx_exception_flags \"-EHsc -D_HAS_EXCEPTIONS=1\")\n")
  file(APPEND gtest.patch "Index: include/gtest/internal/gtest-tuple.h\n")
  file(APPEND gtest.patch "===================================================================\n")
  file(APPEND gtest.patch "--- include/gtest/internal/gtest-tuple.h (revision 643)\n")
  file(APPEND gtest.patch "+++ include/gtest/internal/gtest-tuple.h (working copy)\n")
  file(APPEND gtest.patch "@@ -1,3 +1,4 @@\n")
  file(APPEND gtest.patch "+#include <tuple> /*\n")
  file(APPEND gtest.patch " // This file was GENERATED by command:\n")
  file(APPEND gtest.patch " //     pump.py gtest-tuple.h.pump\n")
  file(APPEND gtest.patch " // DO NOT EDIT BY HAND!!!\n")
  file(APPEND gtest.patch "@@ -197,8 +198,8 @@\n")
  file(APPEND gtest.patch " class tuple<> {\n")
  file(APPEND gtest.patch "  public:\n")
  file(APPEND gtest.patch "   tuple() {}\n")
  file(APPEND gtest.patch "-  tuple(const tuple& /* t */)  {}\n")
  file(APPEND gtest.patch "-  tuple& operator=(const tuple& /* t */) { return *this; }\n")
  file(APPEND gtest.patch "+  tuple(const tuple& t)  {}\n")
  file(APPEND gtest.patch "+  tuple& operator=(const tuple&) { return *this; }\n")
  file(APPEND gtest.patch " };\n")
  file(APPEND gtest.patch " \n")
  file(APPEND gtest.patch " template <GTEST_1_TYPENAMES_(T)>\n")
  file(APPEND gtest.patch "@@ -946,7 +947,7 @@\n")
  file(APPEND gtest.patch " template <>\n")
  file(APPEND gtest.patch " struct SameSizeTuplePrefixComparator<0, 0> {\n")
  file(APPEND gtest.patch "   template <class Tuple1, class Tuple2>\n")
  file(APPEND gtest.patch "-  static bool Eq(const Tuple1& /* t1 */, const Tuple2& /* t2 */) {\n")
  file(APPEND gtest.patch "+  static bool Eq(const Tuple1&, const Tuple2&) {\n")
  file(APPEND gtest.patch "     return true;\n")
  file(APPEND gtest.patch "   }\n")
  file(APPEND gtest.patch " };\n")
else()
  file(WRITE gtest.patch "")
endif()

# Enable ExternalProject CMake module
include(ExternalProject)

# Set default ExternalProject root directory
set_directory_properties(PROPERTIES EP_PREFIX ${CMAKE_BINARY_DIR}/ThirdParty)

# Add gmock
ExternalProject_Add(
    googlemock
    SVN_REPOSITORY http://googlemock.googlecode.com/svn/trunk/
    TIMEOUT 30
    PATCH_COMMAND svn patch ${CMAKE_SOURCE_DIR}/gtest.patch ${CMAKE_BINARY_DIR}/ThirdParty/src/googlemock/gtest
    # Force separate output paths for debug and release builds to allow easy
    # identification of correct lib in subsequent TARGET_LINK_LIBRARIES commands
    CMAKE_ARGS -DCMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG:PATH=DebugLibs
               -DCMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE:PATH=ReleaseLibs
               -Dgtest_force_shared_crt=ON
    # Disable install step
    INSTALL_COMMAND ""
    # Wrap download, configure and build steps in a script to log output
    LOG_DOWNLOAD ON
    LOG_CONFIGURE ON
    LOG_BUILD ON)

# Specify include dir for googlemock and googletest
ExternalProject_Get_Property(googlemock source_dir)
include_directories(${source_dir}/include)
include_directories(${source_dir}/gtest/include)

if(MSVC_VERSION EQUAL 1700)
  add_definitions(-D_VARIADIC_MAX=10)
endif()

# Add test executable target
add_executable(MainTest ${PROJECT_SOURCE_DIR}/src/main.cpp)

# Create dependency of MainTest on googlemock
add_dependencies(MainTest googlemock)

# Specify MainTest's link libraries
ExternalProject_Get_Property(googlemock binary_dir)
target_link_libraries(MainTest
                      debug ${binary_dir}/DebugLibs/${CMAKE_FIND_LIBRARY_PREFIXES}gmock${CMAKE_FIND_LIBRARY_SUFFIXES}
                      optimized ${binary_dir}/ReleaseLibs/${CMAKE_FIND_LIBRARY_PREFIXES}gmock${CMAKE_FIND_LIBRARY_SUFFIXES}) 
```

如果您在一个空目录（例如 MyTest）中将其创建为 CMakeLists.txt，则：

```
cd MyTest
mkdir build
cd build
cmake .. 
```

这应该在 MyTest/src 中创建一个基本的 main.cpp 并创建一个项目文件（Windows 上的 MyTest/build/Test.sln）

构建项目时，它应该将 gmock 源下载到 MyTest/build/ThirdParty/src/googlemock，并在 MyTest/build/ThirdParty/src/googlemock-build 中构建它们。然后，您应该能够成功运行 MainTest 目标。

有关该`ExternalProject_Add`命令的更多信息，请参阅[这篇题为“使用 CMake 2.8 构建外部项目”的文章](http://www.kitware.com/media/html/BuildingExternalProjectsWithCMake2.8.html)

这是包含此 CMakeLists.txt[的要点](https://gist.github.com/Fraser999/5351180)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T09:44:10.047

我看到 Google Mock 支持 CMake。在这种情况下，您只需添加此行

```
add_subdirectory(${GOOGLE_MOCK_SOURCE_DIR}) 
```

进入根目录`CMakeLists.txt`并让用户`GOOGLE_MOCK_SOURCE_DIR`在配置步骤中设置变量：

```
set(GOOGLE_MOCK_SOURCE_DIR "" CACHE PATH "Path to the GMock source")
if(NOT ${GOOGLE_MOCK_SOURCE_DIR} OR NOT EXISTS "${GOOGLE_MOCK_SOURCE_DIR}/CMakeLists.txt")
  message(FATAL_ERROR "GOOGLE_MOCK_SOURCE_DIR isn't set properly!")
endif() 
```

# frameworks - 基于 Web 的框架有什么可扩展性？

> ID：11921092
> 
> 赞同：3
> 
> 时间：2012-08-12T09:16:15.907
> 
> 标签：frameworks, scalability

非常感谢你提前。

首先，我认为可扩展性是设计一个系统的能力，当其服务的需求（无论它们是什么）显着增加时，它不会改变。您可能需要更多硬件（垂直或水平0？好吧，在您闲暇时添加它，因为系统已准备好并且旨在应对它。

我的问题问起来很简单，但回答起来可能很复杂。我想知道你在框架中看到了什么，以确保它会相应地扩展，无论是点击次数还是同时运行的会话数。

这个问题根本不是关于技术或特定框架的，它更多是一个理论问题。

我知道这在很大程度上取决于拥有良好的数据库设计和适当的硬件支持复制等......让我们假设这一切都存在，但是我的框架必须满足一些标准，什么？

*   提供内存缓存？
*   能够跨多台机器运行（在 Web 服务器级别）并使用许多复制数据库？但是，使这成为可能的软件是什么？
*   ETC...

请不要将答案与背后的任何特定编程语言或技术联系起来。

再次感谢，

D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:43:15.663

我认为可扩展性主要取决于用例：您是否期望大量数据，那么您应该关注数据库，如果是关于流量，则关注服务器，是否添加新功能，关注您的数据-模型和您正在使用的框架...

将 Twitter 之类的微帖子服务与大学网站或 GoogleDocs 之类的网络服务进行比较，您会发现完全不同的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:51:06.407

首先，可扩展性的常见概念是，如果添加更多硬件资源（CPU、内存、带宽等），软件能够提高吞吐量或容量。
在增加资源方面没有改进的软件是不可扩展的。
脱离定义，我认为您的问题与您计划引入实施的框架的评估有关，这可能会影响您的软件的扩展能力。
恕我直言，在引入框架时评估的最重要因素是查看其中是否存在隐藏的序列化（效果中的序列化传输到/影响您的软件）
因此，如果您引入一个框架，该框架在您的应用程序中引入序列化可能会影响您的能力规模化。
如何评价？

1.  仔细的源代码检查（如果开源）
2.  构建框架的人是否提供任何性能保证？
3.  自己做测量，看看引入这个框架如何影响你的表现，如果不满意就更换

# sql - SQL 视图汇总一个表，列基于输入的未知类别

> ID：11921094
> 
> 赞同：1
> 
> 时间：2012-08-12T09:16:18.093
> 
> 标签：sql

我有一张表格：

```
日期/类别（字符串）/计数（整数）
------------------------------------------
7/15 一个 3
7/15 乙 7
7/15 C 2
7/16 一个 9
7/16 乙 1
7/16 C 2

```

基本上，对于每一天，每个类别都会有一个与之相关的计数。

问题是，我不一定知道这些类别最终会是什么。假设我知道他们是 A、B 和 C，但下周会有 D、E 和 F。

这是我想要构建的视图：

```
日期 / A / B / C / ..（无论找到多少类别）
-------------------------------------------------- --------
7/15 3 5 2 3 4
7/16 9 5 9 6 4
...
..
.

```

我通常知道足够多的 SQL 来应付，但这一个让我绞尽脑汁。我不认为我在尝试谷歌搜索时使用了正确的词汇，因为我没有找到我正在寻找的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:43:34.553

答案很简单，您无法构建视图来做您想做的事。视图具有预定义的列。

您可以执行以下操作之一：

1.  创建一个每周创建一个视图的存储过程。此存储过程将分析数据、确定列，然后使用动态 SQL 更改视图。
2.  更改您想要的定义并将值放在单个列中，用逗号（或其他字符）分隔。
3.  预定义可接受列的列表，创建视图（例如使用数据透视表），然后在出现新值时定期对其进行修改。
4.  在应用层进行旋转。这在 Excel 中特别容易。

(1) 和 (3) 的一大警告。如果有任何东西使用视图作为“从视图中选择 *”，您需要确保那些查询/存储过程/用户定义的函数/等。被重新编译。否则，它们将具有错误的列列表（这可能仅适用于 SQL Server）。

# php - 自动完成表单和隐藏输入

> ID：11921096
> 
> 赞同：0
> 
> 时间：2012-08-12T09:16:25.783
> 
> 标签：php, autocomplete

基本上，我的表单中有一个在 CSS 中设置的输入字段，我`display: none`想知道自动填充程序是否填充隐藏字段？我在加载时将该字段的值设置为 time()，并将其与提交表单的时间进行比较，以判断用户是人类还是机器人。

这是我的隐藏字段代码：

```
<?php

    $loadTime = time(); // Initial time that the page loads is checked against the time the form is submitted and if its too fast, its probably a bot

?>

<input type="text" name="loadTime" id="loadTime" value="<?php echo $loadTime ?>" maxlenght="50" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:18:50.983

而不是文本输入，`display:none;`你应该使用`<input type="hidden" .../>`. 像这个自动填充程序不会修改它的值。另一个（并且更安全）的选项是将时间值存储为服务器变量，以便无法修改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:21:09.370

> 我想知道自动填充程序是否填充隐藏字段？

（**编辑**：通过隐藏我认为你要求这个：

```
<input type="hidden"... 
```

)

答案是否定的。另外，我会删除该隐藏字段，因为有人可以操纵该值。我宁愿将时间数据存储在会话中，因为它存储在服务器上而不是客户端计算机上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T09:26:19.617

即使自动填充填充表单，它也不会可见，因为它是在 CSS 中设置的。如果您希望文本可见，请在 JavaScript 更改/填充输入时更改 CSS 类。您可以同时使用 JavaScript 填充文本和更改 CSS。

# php - php密码检查

> ID：11921098
> 
> 赞同：0
> 
> 时间：2012-08-12T09:17:16.673
> 
> 标签：php

我有一个使用简单用户名/密码登录方案的小型 Web 应用程序。我已经多次注意到，当用户正确输入密码时，它不允许用户登录。

该代码最初只是将用户在初始注册时输入的密码加密为：

```
function encode5t($str) {
  for($i=0; $i<5;$i++)   {
     $str=strrev(base64_encode($str)); //apply base64 first and then reverse the string
  }
  return $str;
 }

 $password=mysql_real_escape_string($_POST['password']);
 $pass=encode5t($password); 
```

然后将 $pass 插入 MySQL 数据库。然后使用相同的函数在登录时加密密码并针对数据库进行检查，如下所示：

```
$username = $_POST['username'];
$psw = $_POST['password'];
$npsw=encode5t($psw);

$query = sprintf("SELECT * FROM members WHERE username='%s' AND password='%s'",
    mysql_real_escape_string($username),
    mysql_real_escape_string($npsw)); 
```

问题的出现取决于密码是如何输入到表单中的。如果只是简单地输入，则没有问题，但如果将密码复制/粘贴到表单中（如来自包含新生成密码的电子邮件），则会失败。加密功能创建完全不同的哈希并且不匹配，因此用户没有登录。

我已经使用了编码并将其更改为仅使用 md5() 但我得到了相同的最终结果 - 剪切/粘贴会产生不同的哈希值，而不是简单地将密码输入到表单中。

页面编码中是否有某些内容会使复制/粘贴文本与键入的文本不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T09:19:02.073

问题是当用户粘贴用户名/密码时，它的前后通常有空格。运行这些字段[`trim()`](http://php.net/manual/en/function.trim.php)以解决此问题。

另一方面，您所拥有的并不是那么安全。您的 base64 字符串不会长时间欺骗任何人，并且 md5 不应用于密码哈希，尤其是在未加盐的情况下。尝试一些更强大的东西，比如漩涡。最后，我建议对 PDO 使用准备好的查询来避免注入问题。您目前正在逃避您的数据……太好了！但是，最好不要冒险错过某个地方的逃生机会。

# linux - 致命错误（11）在emacs中尝试进入gdb模式时出现Segmentation fault，怎么回事？

> ID：11921100
> 
> 赞同：-5
> 
> 时间：2012-08-12T09:17:29.200
> 
> 标签：linux, emacs, gdb

以下分段错误是什么意思？

```
Fatal error (11)Segmentation fault 
```

什么是分段错误，什么会导致它发生？

一旦我`Mx gdb`在 Emacs 中输入，问题就出现了，

输入显示在这张[图片](http://i1271.photobucket.com/albums/jj624/bigmeowOoO/before-enter-gdb-mode.jpg)中，输出显示[在这里](http://i1271.photobucket.com/albums/jj624/bigmeowOoO/after-i-press-enter.jpg)。

更多细节：

[a]：我在 centos 5.3 上从源代码构建 emacs 24.1，此构建无法进入 gdb 模式

[b]：我也在 debian 5.0 上构建 emacs 24.1，它可以使用 gdb 模式而不会出错

所以我真的不知道发生了什么，我无法在 centos 5.3 上的 emacs 24.1 中使用 gdb 模式:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:59:38.013

要调试 Emacs，如果您是自己构建的，请切换到项目目录，然后执行以下操作：

```
$ gdb ./src/emacs
$ (gdb) set logging file ~/emacs-errors.log
$ (gdb) r -q
<... get to the point where error happens ...>
$ (gdb) bt full 
```

然后，当您发送错误报告时，使用 ~/emacs-errors.log 文件（gdb 会将所有错误打印到其中）。

另请注意，您需要对其进行配置以在编译时保留调试信息。要做到这一点，

```
$ CFLAGS='-O0 -ggdb -g3' ./configure --enable-checking --enable-asserts 
```

然后重新编译。

# c# - 如何检查用户是否为“管理员”

> ID：11921107
> 
> 赞同：0
> 
> 时间：2012-08-12T09:18:15.503
> 
> 标签：c#, asp.net, .net, sql-server, c#-4.0

我正在使用 ASP.NET 4.0 和 SQL Server 2008 开发一个网站。在登录页面中，我必须检查用户供应商 ID，并根据供应商 ID 将页面重定向到不同的页面。一切正常，但我不知道如何检查管理员何时输入他的 VendorID 和密码，以便重定向管理页面。他的供应商 ID 和密码也与其他用户存储在同一个表“User_Info”中。参考下面的代码，它总是重定向到管理员页面只是因为我直接在代码中提供了他的 vendorID 和密码。请提出您的建议来解决这个问题。

```
 protected void BtnHomeUserSubmit_Click(object sender, EventArgs e)
     {
      SqlConnection SqlCon = new SqlConnection(GetConnectionString());
      try
      {          
       var da1 = new SqlDataAdapter("select * from User_Info where Vendor_ID='" + txtHomeUsername.Text.Trim() + "' AND User_Password='" + txtHomePassword.Text.Trim() + "'", SqlCon);
           var dt1 = new DataTable();
           da1.Fill(dt1);
           if (dt1.Rows.Count == 0)
           {
            ScriptManager.RegisterStartupScript(this, this.GetType(), "Alert", "alert('Enter valid Vendor ID and Password');", true);
           }
           else
           {
            var da = new SqlDataAdapter("select * from User_Info where Vendor_ID='Admin' AND User_Password='123456'", SqlCon);
              var dt = new DataTable();
              da.Fill(dt);
              if (dt.Rows.Count > 0)
              {
                Response.Redirect("~/AdminCompanyInfo.aspx");
              }
              var da2 = new SqlDataAdapter("select * from Company_Info where Vendor_ID='" + txtHomeUsername.Text.Trim() + "' AND Approval_Status='NO' OR                              Approval_Status='PEN'", SqlCon);
              var dt2 = new DataTable();
              da2.Fill(dt2);
              if (dt2.Rows.Count > 0)
              {
               string url = "../ApprovalStatus2.aspx?Parameter=" + Server.UrlEncode(txtHomeUsername.Text);
               ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "alert('Your Vendor ID is waiting for Approval');window.location.href = '" +                       url + "';", true);
              }
              var da3 = new SqlDataAdapter("select Vendor_ID from RegPage1 where Vendor_ID='" + txtHomeUsername.Text.Trim() + "'", SqlCon);
              var dt3 = new DataTable();
              da3.Fill(dt3);
              if (dt3.Rows.Count > 0)
              {
                  string url = "../UserLogin.aspx";
                  ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "alert('Your Vendor ID already completed the registration');window.location.href = '" + url + "';", true);
              }
              else
              {
                Response.Redirect("~/RegPage1.aspx?Parameter=" + Server.UrlEncode(txtHomeUsername.Text));
              }
           }
        }
        finally
        {
            SqlCon.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:29:33.670

试试这个.. 当你构建一个架构时，考虑这个访问数据库是代码中最昂贵的访问。并且更喜欢使用 SqlCommand（参数化值）。

```
 var da1 = new SqlDataAdapter("select * from User_Info where Vendor_ID='" + txtHomeUsername.Text.Trim() + "' AND User_Password='" + txtHomePassword.Text.Trim() + "'", SqlCon);
           var dt1 = new DataTable();
           da1.Fill(dt1);
           if (dt1.Rows.Count == 0)
           {
            ScriptManager.RegisterStartupScript(this, this.GetType(), "Alert", "alert('Enter valid Vendor ID and Password');", true);
           }
           else
           {

             switch(dt.Rows[0]["Vendor_ID"].ToString())
              {
               case "Admin": Response.Redirect("~/AdminCompanyInfo.aspx"); break;
              //other oprtions goes here...
              }
              var da2 = new SqlDataAdapter("select * from Company_Info where Vendor_ID='" + txtHomeUsername.Text.Trim() + "' AND Approval_Status='NO' OR                              Approval_Status='PEN'", SqlCon);
              var dt2 = new DataTable();
              da2.Fill(dt2);
              if (dt2.Rows.Count > 0)
              {
               string url = "../ApprovalStatus2.aspx?Parameter=" + Server.UrlEncode(txtHomeUsername.Text);
               ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "alert('Your Vendor ID is waiting for Approval');window.location.href = '" +                       url + "';", true);
              }
              var da3 = new SqlDataAdapter("select Vendor_ID from RegPage1 where Vendor_ID='" + txtHomeUsername.Text.Trim() + "'", SqlCon);
              var dt3 = new DataTable();
              da3.Fill(dt3);
              if (dt3.Rows.Count > 0)
              {
                  string url = "../UserLogin.aspx";
                  ClientScript.RegisterStartupScript(this.GetType(), "callfunction", "alert('Your Vendor ID already completed the registration');window.location.href = '" + url + "';", true);
              }
              else
              {
                Response.Redirect("~/RegPage1.aspx?Parameter=" + Server.UrlEncode(txtHomeUsername.Text));
              }
           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:47:04.057

虽然给出的示例是功能性的，但 SQL 注入在这里是一个大问题。您应该使用参数化查询。

[http://blogs.msdn.com/b/sqlphp/archive/2008/09/30/how-and-why-to-use-parameterized-queries.aspx](http://blogs.msdn.com/b/sqlphp/archive/2008/09/30/how-and-why-to-use-parameterized-queries.aspx)

# php - 在网络应用程序中运行.exe 并与此.exe 进行实时通信

> ID：11921116
> 
> 赞同：0
> 
> 时间：2012-08-12T09:19:52.177
> 
> 标签：php, windows, ipc

我的 PHP Web 应用程序从流中接收数据。加载页面后，我需要使用or打开`.exe`文件，并且在短时间内会有新数据出现，因此我必须为此键入特定命令以获取其返回值，我该怎么做？`system()``exec()``.exe`

我只能在命令提示符下手动执行此操作

```
path/to/.exe :: hit 'Enter'
command1 params1
//... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:22:49.087

您正在寻找的是`proc_open()`. [http://php.net/manual/en/function.proc-open.php](http://php.net/manual/en/function.proc-open.php)

这将允许您使用 STDIO 流与单独的进程进行通信。

## PHP 文档中的示例：

```
$descriptorspec = array(
   0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
   1 => array("pipe", "w"),  // stdout is a pipe that the child will write to
   2 => array("file", "/tmp/error-output.txt", "a") // stderr is a file to write to
);

$cwd = '/tmp';
$env = array('some_option' => 'aeiou');

$process = proc_open('php', $descriptorspec, $pipes, $cwd, $env);

if (is_resource($process)) {
    // $pipes now looks like this:
    // 0 => writeable handle connected to child stdin
    // 1 => readable handle connected to child stdout
    // Any error output will be appended to /tmp/error-output.txt

    fwrite($pipes[0], '<?php print_r($_ENV); ?>');
    fclose($pipes[0]);

    echo stream_get_contents($pipes[1]);
    fclose($pipes[1]);

    // It is important that you close any pipes before calling
    // proc_close in order to avoid a deadlock
    $return_value = proc_close($process);

    echo "command returned $return_value\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:34:52.223

如果您需要多个侦听器，您也可以考虑共享内存，但这种情况听起来您会从使用队列中受益。

文档[`msg_get_queue`](http://www.php.net/manual/en/function.msg-get-queue.php), [`msg_receive`](http://www.php.net/manual/en/function.msg-receive.php),[`msg_send`](http://www.php.net/manual/en/function.msg-send.php)

**例子**

```
// Send
if (msg_queue_exists(12345)) {
  $mqh = msg_get_queue(12345);
  $result = msg_send($mqh , 1, 'data', true);
}

// Receive
$mqh = msg_get_queue(12345, 0666);
$mqst = msg_stat_queue($mqh);
while ($mqst['msg_qnum']) {
  msg_receive($mqh, 0, $msgtype, 2048, $data, true);
  // Spawn your process
  $mqst = msg_stat_queue($mqh);
} 
```

**编辑**

信号量功能在 Windows 上不可用，正如上面所建议的，您最好的选择是使用[`popen`](http://php.net/popen)（单向）或[`proc_open`](http://php.net/proc_open)双向支持。

# android - Android：如何获取 android 资源的资源 id

> ID：11921121
> 
> 赞同：15
> 
> 时间：2012-08-12T09:20:28.093
> 
> 标签：android, resources

我想获取我保存在 /res/raw 文件夹中的 android 资源的资源 ID。

使用 -

1）我将资源的名称传递给类，并且该名称被保存在字符串 fileNeme 中。

2) 获取此文件的语句是`this.getResources().openRawResource(R.raw.xyz)`其中 xyz 是实际文件名。

3) 我知道 openRawResource(int) 方法采用一个 int 值，因此我不能使用该语句，`this.getResources().openRawResource(R.raw.filename)`因为文件名是上面定义的字符串变量。

问题：我知道保存在名为 filename 的字符串中的文件名，但我无法打开它，因为该方法采用 int 格式的资源 id。

我需要获取此文件名的资源 id 并将其保存在 int 变量 filename_int 中，并将此变量传递给 openRawResource 方法。

请让我知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-12T09:26:17.540

您应该能够通过以下方式获取资源 ID `getIdentifier()`：

```
int id = this.getResources().getIdentifier("xyz", "raw", this.getPackageName()); 
```

# c++ - 如何调试分段错误

> ID：11921124
> 
> 赞同：6
> 
> 时间：2012-08-12T09:21:06.047
> 
> 标签：c++, debugging, gdb, segmentation-fault

如何调试分段错误？

基本上是这样的：

我在后台运行我的服务器：`./server &`

然后我运行我的客户端：`./client`

当我尝试使用正确的用户名和密码登录服务器时，一切正常，但是当我输入无效的用户名和密码时，会导致分段错误。

如何使编译器/调试器能够输出它实际看到的导致分段核心转储的错误。

我知道 gdb，但我尝试使用 gdb 客户端，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T09:40:31.157

分段错误的一个好主意是运行程序以[`valgrind`](http://valgrind.org/)进行调试。这样，您通常会获得有关导致分段错误的原因的更详细信息。例如，它会告诉您是否正在从未初始化的内存中读取。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T09:26:06.933

如果你使用 g++，首先使用 -g 选项编译你的程序。然后使用

```
 gdb name_of_program core 
```

在您获得的核心转储上运行 gdb（`name_of_program`是您刚刚使用 g++ 构建的可执行文件的名称）。此链接对于如何使用 gdb 很有用。

[http://www.ibm.com/developerworks/library/l-gdb/](http://www.ibm.com/developerworks/library/l-gdb/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T10:44:44.510

[此](https://github.com/titusnicolae/poorman-dbg/blob/master/README)广告代码注释。仅当您有很多函数调用并且您不知道调用路径时，它才有用。

# ruby-on-rails - Rails - 使用 has_many 关联进行查询

> ID：11921133
> 
> 赞同：0
> 
> 时间：2012-08-12T09:22:35.563
> 
> 标签：ruby-on-rails, activerecord

我目前正在尝试在模型上创建自定义方法，其中使用的条件是 has_many 关联的条件。我到目前为止的方法是：

```
class Dealer < ActiveRecord::Base

  has_many :purchases

  def inventory
    inventory = Vehicle.where(:purchases => self.purchases)
    return inventory
  end

end 
```

这不起作用，因为 Vehicle has_many :purchases （因此车辆模型上没有“购买”列）。如何在这种查询中使用 vehicle.purchases 数组作为条件？

更复杂的是，has_many 也是多态的，所以我不能简单地`.join(:purchases)`在查询中使用一个元素，因为没有 VehiclePurchase 模型。

编辑：为清楚起见，我的购买模型和车辆模型的相关部分如下：

```
class Purchase < ActiveRecord::Base
  attr_accessible :dealer_id, :purchase_type_id

  belongs_to :purchase_item_type, :polymorphic => true

end

class Vehicle < ActiveRecord::Base

  has_many :purchases, :as => :purchase_item_type

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:35:17.003

```
class Dealer < ActiveRecord::Base
  def inventory
    Vehicle.where(:id => purchases.where(:purchase_item_type_type => "Vehicle").map(&:purchase_item_type_id))
  end
end 
```

或者：

```
 def inventory
    purchases.includes(:purchase_item_type).where(:purchase_item_type_type => "Vehicle").map(&:purchase_item_type)
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:58:47.740

我可以使用 Vehicle 模型上的 :source 和 :source_type 选项来做到这一点，这允许关联多态父级。

# c++ - C ++中的线程安全单例

> ID：11921135
> 
> 赞同：0
> 
> 时间：2012-08-12T09:23:04.517
> 
> 标签：c++, multithreading, design-patterns, thread-safety, singleton

我一直在阅读有关线程安全单例的信息，我发现到处都有一个 getInstance() 方法，如下所示：

```
Singleton* getInstance()
{
    if ( !initialized )
    {
        lock();
        if ( !initialized )
        {
            instance = new Singleton();
            initialized = true;
        }
        unlock();
    }

    return instance;
} 
```

*   这实际上是线程安全的吗？
*   我是否遗漏了什么，或者这个函数有很小的机会返回一个未初始化的实例，因为“初始化”可能会在实例之前重新排序和设置？

这篇文章的主题略有不同，但最佳答案描述了为什么我认为上面的代码不是线程安全的：

[为什么 volatile 在多线程 C 或 C++ 编程中没有用？](https://stackoverflow.com/questions/2484980/why-is-volatile-not-considered-useful-in-multithreaded-c-or-c-programming)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T09:28:22.800

不是一个好主意。寻找双重检查锁定。例如：

[http://www.drdobbs.com/cpp/c-and-the-perils-of-double-checked-locki/184405726](http://www.drdobbs.com/cpp/c-and-the-perils-of-double-checked-locki/184405726)

[http://www.drdobbs.com/cpp/c-and-the-perils-of-double-checked-locki/184405772](http://www.drdobbs.com/cpp/c-and-the-perils-of-double-checked-locki/184405772)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:58:36.853

它确实不是线程安全的，因为在指针返回后，您仍然可以使用它，尽管互斥锁再次解锁。

您可以做的是使从单例继承的子类线程安全。那你就可以走了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-06T03:46:51.327

下面是使用双重检查和临时变量的线程安全单例的代码。一个临时变量用于先完全构造对象，然后将其分配给 pInstance。

```
Singleton* Singleton::instance() {
   if (pInstance == 0) {
      Lock lock;
      if (pInstance == 0) {
         Singleton* temp = new Singleton; // initialize to temp
         pInstance = temp; // assign temp to pInstance
      }
   }
   return pInstance;
} 
```

# android - Chartboost 示例不适用于 Android

> ID：11921137
> 
> 赞同：1
> 
> 时间：2012-08-12T09:23:11.923
> 
> 标签：android, ads

我一直在尝试在我的应用程序/游戏中设置 chartboost 广告。但它对我不起作用。我按照`sdk`下载页面上的说明进行操作，但没有成功。然后我`github`通过这个链接下载了他们的例子[https://github.com/ChartBoost/client-examples](https://github.com/ChartBoost/client-examples)这个例子也不起作用。

logcat 视图显示如下所示的消息。

```
 08-12 14:58:08.803: I/ChartBoost(9641): Request response received: Request received
 08-12 14:58:08.807: I/JSON(9641): {"message":"Request received","status":200}
 08-12 14:58:08.827: E/ChartBoost(9641): error generating request! 
```

如果有人遇到类似问题或知道该问题的任何解决方案，任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:59:31.380

您是否已注册 Chartboost、收到签名密钥并确保将其正确放入您的应用程序？只要确保这些是最常见的问题。

Chartboost 支持团队将是帮助您解决此问题的最佳来源。你也联系过他们吗？他们将在星期一回到办公室。

# gcc - Netbeans C/C++ 7.2 -std=C++11 无法被 gcc v4.6 或更低版本识别

> ID：11921138
> 
> 赞同：2
> 
> 时间：2012-08-12T09:23:12.163
> 
> 标签：gcc, netbeans, ide, ubuntu-12.04, system-administration

在发布 v7 之后，我将 Eclipse 留给 NetBeans 进行 C/C++ 开发，这似乎是一个明智的选择，除了`-std=C++11`当前最新版本（即 7.2）中的标志不被 gcc 4.6 ( `-std=C++0x`) 或更早版本识别。由于 Ubuntu 12.04 附带 gcc 4.6（就 11 个功能而言，这对于我的工作来说应该足够公平），并且全新安装 gcc 4.7 可能会导致系统维护的复杂性（嗯......我是一个人非常简单，整洁干净），有什么解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T20:44:24.143

使用 NetBeans 中的“C++ 标准”选项不起作用。我的解决方案是手动完成。添加：

```
-std=c++0x 
```

到 Project > Settings > Build > C++ Compiler 中的“Additional Options”

# python - 蟒蛇2.6。unittest 框架，断言：需要帮助

> ID：11921141
> 
> 赞同：1
> 
> 时间：2012-08-12T09:23:53.063
> 
> 标签：python, unit-testing, python-2.6

我正在使用该`unittest`框架在 python 2.6 中编写一个测试套件，并且我想在我的代码中使用断言。我知道 asserts 得到了彻底的改革，并且在 2.7+ 中更好，但我现在仅限于使用 2.6。

我在使用断言时遇到问题。我希望能够使用该`assertIn(a,b)`功能，但可惜，这仅在 2.7+ 中。所以我意识到我必须使用`assertTrue(x)`2.6 中的 which ，但这不起作用。然后，我查看了[这个文档](http://docs.python.org/library/unittest.html#deprecated-aliases)，它说在以前的版本中`assertTrue(x)`曾经是`failUnless(x)`，所以我在我的代码中使用了它，但仍然没有结果。

我收到消息：

> NameError：未定义全局名称“failUnless”

这与我为`assertIn(a,b)`和得到的东西是一样的`assertTrue(x)`。所以我完全不知道我应该做什么。

我的问题的简短版本：

我希望能够`assertIn(a,b)`在 python 2.6 中实现。有人对此有任何解决方案吗？

我的代码：

```
import unittest

class test_base(unittest.TestCase):
    # some functions that are used by many tests

class test_01(test_base):
    def setUp(self):
        #set up code

    def tearDown(self):
        #tear down code

    def test_01001_something(self):
        #gets a return value of a function
        ret = do_something()

        #here i want to check if foo is in ret
        failUnless("foo" in ret) 
```

**编辑**：看来我是个白痴。我需要做的就是添加`self.assert....`并且它起作用了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T09:42:14.833

`assertTrue`应该可以很好地进行`in`测试：

```
self.assertTrue('a' in somesequence) 
```

所做的只是运行与上述`assertIn`相同的测试，并在测试失败时设置有用的消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T09:46:05.830

```
import unittest

class MyTest(unittest.TestCase):
    def test_example(self):
        self.assertTrue(x) 
```

这应该工作，基于[来自 Python 2.6 的 unittest](http://docs.python.org/release/2.6.6/library/unittest.html)的文档。请务必将其用作 TestCase.assertTrue()。

编辑：在您的示例中，将其设置为`self.failUnless("foo" in ret)`并且它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T09:48:38.717

你的测试用例代码真的很有帮助。

您的问题是您试图将 assert[Something] 用作函数，而它们是 TestCase 类的方法。

所以你可以解决你的问题，例如`assertTrue`：

```
self.assertTrue(element in list_object) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-16T12:49:17.513

实际上实现`assertIn`是非常微不足道的。这是我在单元测试中使用的：

```
class MyTestCase(unittest.TestCase)       
    def assertIn(self, item, iterable):
        self.assertTrue(item in iterable,
                        msg="{item} not found in {iterable}"
                             .format(item=item,
                                     iterable=iterable)) 
```

然后，您可以将所有测试用例基于此类，甚至可以在 python 2.6 上`unittest.TestCase`安全使用`assertIn`，并且错误消息将比 pure 好得多`assertTrue`。为了比较 Python 2.7 中 assertIn 的实际实现：

```
def assertIn(self, member, container, msg=None):
    """Just like self.assertTrue(a in b), but with a nicer default message."""
    if member not in container:
        standardMsg = '%s not found in %s' % (safe_repr(member),
                                              safe_repr(container))
        self.fail(self._formatMessage(msg, standardMsg)) 
```

# php - PHP 到 VFP。错误：无法将字符串转换为 unicode

> ID：11921144
> 
> 赞同：0
> 
> 时间：2012-08-12T09:24:08.493
> 
> 标签：php, unicode, visual-foxpro

我编写了一个代码来从 instagram 获取图像并使用以下代码将数据保存到数据库：

从命令行调用此 PHP 文件，我收到此错误：

> 警告：未知：无法将字符串转换为 Unicode：“目标多字节代码页中不存在 Unicode 字符的映射”。PHP 致命错误

此代码在 Windows 7 64 位上执行。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:52:12.603

我已将我的电脑设置更改为英语，现在它可以工作了

# android - 扩展 SharedPreferences 以使用不同的后端 (JSON/Sqlite)

> ID：11921153
> 
> 赞同：1
> 
> 时间：2012-08-12T09:26:39.287
> 
> 标签：android, json, sqlite, sharedpreferences, preferences

我需要使用动态模块为我的应用程序创建一个复杂的配置活动，并且我想将所有设置存储到 JSON 中，因为使用 sharedprefs XML 后端会使事情变得过于复杂（模块是独立的，我可能有冲突的首选项名称，所以我需要一些东西能够存储偏好层次结构并理解模块概念，我还需要轻松地从外部文件/互联网导出/导入）。

每个模块都有自己的“preferencescreen”，一个模块可能会出现多次（具有不同的“id”），我需要为所有模块提供相同的文件后端。另一种选择是使用许多共享首选项文件并在需要时导出/导入到 json。

那么，您认为扩展 SharedPreferences 并使其使用不同的后端可以继续使用 PreferenceFragments 避免重新发明轮子吗？有没有人尝试过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:43:19.070

这变得非常复杂，所以我决定最好的方法是通过将唯一 ID 传递给每个 PreferenceScreen“模块”来使用多个 SharedPreferences，然后我使用 JSON 导出/导入所有内容，但始终通过 SharedPreferences 标准 XML 后端。如果有人没有发布更好的解决方案，我会将其标记为正确，因为可能没有更好的方法可以做到这一点。

# lua - Lua：从字符串调用元表函数

> ID：11921154
> 
> 赞同：1
> 
> 时间：2012-08-12T09:26:42.753
> 
> 标签：lua

我有这个功能：

```
function Bootstrap: test()
-- CODE HERE
end 
```

我会用它的名字来调用这个函数。

这个例子有效：

```
function callFunc()
    c = "Bootstrap"
    _G[c].test()
end 
```

我需要做这样的事情：

```
function callFunc()
    c = "Bootstrap"
    f = "test"
    _G[name].[f]() -- Bootstrap.test()
end 
```

但是有一个错误：

```
'<name>' expected near '[' 
```

我应该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:23:21.393

`.`在这里是不必要的。写`_G[name][f]()`。

`.name`只是一个语法糖，完全等同于`["name"]`，而这个地方显然不是你应该使用它的地方。

顺便说一句，这与元表或从字符串调用无关。您只需访问一个表的元素，而不是另一个表，访问第二个表中的元素，这恰好是函数并调用它。

# build - 如何在 AppHarbor 中使用 RequireJS 缩小 javascript 文件？

> ID：11921155
> 
> 赞同：1
> 
> 时间：2012-08-12T09:27:23.060
> 
> 标签：build, requirejs, appharbor

在我的 Release post-build 事件中，我[运行 node.exe 以缩小我的 javascript 文件并将其与 RequireJS 组合](http://requirejs.org/docs/optimization.html)。这会在我的网站文件夹中创建新文件夹和缩小文件，然后在禁用调试时在我的 HTML 中引用它们。

node.exe 包含在我的源代码控制中，并且在我的本地计算机上构建它可以正常工作。

当这是在 AppHarbor 上构建时，我在运行后立即收到以下错误

```
"node.exe <<PATH TO r.js>> -o <<PATH TO app.build.js>>" 
```

：

```
fs.js:520
    return binding.lstat(pathModule._makeLong(path));
                   ^
EXEC : error : EPERM, operation not permitted 'D:\temp' 
```

这是因为我无权在 AppHarbor 上创建文件夹/文件吗？我将如何解决这个问题并构建缩小文件？

我不想将缩小文件预先内置到源代码管理中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:07:30.527

来自 AppHarbor 常见问题解答：http: [//support.appharbor.com/kb/getting-started/frequently-asked-questions](http://support.appharbor.com/kb/getting-started/frequently-asked-questions)

> 我的应用程序无法写入文件 默认情况下，部署在 AppHarbor 上的应用程序只能写入 App_Data 文件夹。您可以启用对整个应用程序目录应用程序设置的写访问权限。请注意，更改（对 App_Data 和应用程序目录的其余部分）不会在部署之间持久化，您应该只将其用于缓存和其他临时用途。

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:42:50.810

解决此问题的最佳方法可能是在本地复制 AppHarbor 构建并确保一切都按预期进行。这就是你想要运行的：`msbuild solution.sln /p:Configuration=Release /property:OutDir=C:\temp`. 常见问题解答中还有更多内容：http: [//support.appharbor.com/kb/getting-started/frequently-asked-questions](http://support.appharbor.com/kb/getting-started/frequently-asked-questions)

# php - 在 FOSUserBundle 中，如何创建替代注销

> ID：11921162
> 
> 赞同：4
> 
> 时间：2012-08-12T09:28:56.917
> 
> 标签：php, security, symfony, fosuserbundle

使用 FOSUserBundle 和 Symfony2，

在我的站点中，根据登录用户的角色，我想让注销以交替重定向到两个不同的页面。

所以，我想做这样的事情：

```
{% if is_granted("ROLE_PREMIUM") %}
  <a href="{{ path('fos_user_security_logout_premium') }}">{{ 'layout.logout'|trans({}, 'FOSUserBundle') }}</a>
{% else %}
  <a href="{{ path('fos_user_security_logout') }}">{{ 'layout.logout'|trans({}, 'FOSUserBundle') }}</a>
{% endif %} 
```

然后，不知何故，做这样的事情：

```
<route id="fos_user_security_logout" pattern="/logout">
    <default key="_controller">FOSUserBundle:Security:logout</default>
</route>
<route id="fos_seller_security_logout" pattern="/logoutPremium">
    <default key="_controller">FOSUserBundle:Security:logoutPremium</default>
</route> 
```

但是，由于 all in logout 都是在 中完成的`config.yml`，所以将所有这些关于登录和注销的配置都放在了，我不知道如何配置第二个触发器并实现它。实际上，我唯一想做的就是根据角色将用户重定向到两个不同的页面。其余的都应该保持不变。

有什么可以放在这里的`security.yml`吗？

```
 logout:
          path:   /logout
          target: /main/user 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:54:37.180

您可以将 a 添加`CustomLogoutHandler`到您的`security.yml`配置中。

```
firewalls:
    main: # - the name of your secure area
        logout:
            path:   /logout
            target: /
            success_handler: your_bundle.custom_logout_handler 
```

例如，在哪里`your_bundle.custom_logout_handler`负责注销您的用户并根据类似的 _target_url 参数重定向他。

看[`Symfony/Component/Security/Http/Logout`](https://github.com/symfony/symfony/tree/master/src/Symfony/Component/Security/Http/Logout)

# hibernate - 不包括 Jboss AS 7 模块

> ID：11921171
> 
> 赞同：2
> 
> 时间：2012-08-12T09:30:31.733
> 
> 标签：hibernate, jboss7.x

我有一个 EAR 文件，其中包含许多 ejb jar 文件并在 Jboss 7.1.1 上运行。我需要这些 ejb jar 文件之一来使用 hibernate3 而不是 Jboss 使用的默认 hibernate 4。

我已将其添加为模块，并在特定 jar 的清单文件中添加了依赖项。问题是，如何从这个特定项目中排除 hibernate 4？

我知道 jboss-deployment-structure.xml，但是我看到的所有例子都在谈论 web 项目，是否可以将它添加到 ejb jar 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:02:28.133

您应该能够添加`<property name="jboss.as.jpa.providerModule" value="hibernate3-bundled" />`到您的 persistence.xml 文件中。假设您使用的是[Hibernate 3.5](https://docs.jboss.org/author/display/AS71/JPA+Reference+Guide#JPAReferenceGuide-PackagingtheHibernate3.5orgreater3.xJPApersistenceproviderwithyourapplication)或更高版本。

# android - Android : ArrayList Gson 变形

> ID：11921173
> 
> 赞同：0
> 
> 时间：2012-08-12T09:30:54.563
> 
> 标签：android, gson

我想知道如何格式化对象的 Gson 数组列表

我有以下类疾病

```
public class Disease {

    private int diseaseID;
    private String diseaseName;
    private String diseaseDescription;
    private String diseaseImageURL;
} 
```

带有变量的 setter 和 getter。

我在 android 布局中有一个微调器，我想用疾病名称填充。

下面是微调器代码

```
<Spinner
       android:id="@+id/consultation_deseases"
       android:layout_width="@dimen/bigSpinnerWidth"
       android:layout_height="@dimen/bigSpinnerHeight"
       android:prompt="@string/disease_prompt" /> 
```

现在疾病名称将从 Web 服务发送，其响应将采用 Gson 格式，如下所示

```
[{"diseaseName":"Obesity","diseaseID":0},{"diseaseName":"Influenza","diseaseID":1},{"diseaseName":"Smoking","diseaseID":2},{"diseaseName":"FSD","diseaseID":3},{"diseaseName":"STI/STD","diseaseID":4}] 
```

我尝试使用下面的代码

```
Disease dis = gson.fromJson(json, Disease.class); 
```

但我收到以下错误

```
08-12 11:29:18.273: E/AndroidRuntime(7518): FATAL EXCEPTION: main
08-12 11:29:18.273: E/AndroidRuntime(7518): com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:180)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.google.gson.Gson.fromJson(Gson.java:755)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.google.gson.Gson.fromJson(Gson.java:721)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.google.gson.Gson.fromJson(Gson.java:670)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.google.gson.Gson.fromJson(Gson.java:642)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.example.onlineconsultation.LoginActivity$3.onClick(LoginActivity.java:117)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at android.view.View.performClick(View.java:3558)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at android.view.View$PerformClick.run(View.java:14152)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at android.os.Handler.handleCallback(Handler.java:605)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at android.os.Looper.loop(Looper.java:137)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at android.app.ActivityThread.main(ActivityThread.java:4514)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at java.lang.reflect.Method.invokeNative(Native Method)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at java.lang.reflect.Method.invoke(Method.java:511)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at dalvik.system.NativeStart.main(Native Method)
08-12 11:29:18.273: E/AndroidRuntime(7518): Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
08-12 11:29:18.273: E/AndroidRuntime(7518):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:168) 
```

错误在这一行

```
Disease dis = gson.fromJson(json, Disease.class); 
```

问题解决了 ：`Disease[] dis = gson.fromJson(json, Disease[].class);`

我很聪明地认识到我应该得到一系列疾病而不是疾病对象的响应=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T09:43:27.413

试试这个，你需要将你的 Json arraylist 转换为 Java ArrayList

```
Gson gson = new Gson();
ArrayList<Disease> disArray = gson.fromJson(json, new TypeToken<List<Disease>>(){}.getType()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:44:51.380

采用 ：`Disease[] dis = gson.fromJson(json, Disease[].class);`

代替`Disease dis = gson.fromJson(json, Disease.class);`

# php - 使用 curl 发布多个 facebook

> ID：11921178
> 
> 赞同：0
> 
> 时间：2012-08-12T09:32:17.157
> 
> 标签：php, curl

我需要从 mysql 数据库向 facebook 墙发布多条消息。首先我从 mysql 中获取数据并将其放入 while 循环

```
while($row=mysql_fetch_array($result))
      {

$des=$row[1];
$purpose=$row[3];
$price_sale=$row[4];
$price_rent=$row[5];
$img="example.com/images".mysql_result($result,0,2);

  $attachment =  array(
    'access_token' => "$token",
    'message' => $des,
    'picture' => $img,
    'link' => "example.com"
    );

$ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/xxxxxxxxxxx/feed');

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output 
$result = curl_exec($ch);
curl_close ($ch);

echo $result;

} 
```

$result 包含 3 条记录。但只发布第一行。请为此提供解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:01:17.983

尝试更改接受 curl 输出的变量的名称。您使用的是上面相同的变量。

```
 while($row=mysql_fetch_array($result))
          {

    $des=$row[1];
    $purpose=$row[3];
    $price_sale=$row[4];
    $price_rent=$row[5];
    $img="example.com/images".mysql_result($result,0,2);

      $attachment =  array(
        'access_token' => "$token",
        'message' => $des,
        'picture' => $img,
        'link' => "example.com"
        );

    $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/xxxxxxxxxxx/feed');

    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output 
    $curlresult = curl_exec($ch);
    curl_close ($ch);

    echo $curlresult;

    } 
```

# c++ - 该算法在哪些情况下会失败？

> ID：11921180
> 
> 赞同：-6
> 
> 时间：2012-08-12T09:32:52.017
> 
> 标签：c++, algorithm, testing

它做了什么 - 索引“i”处的元素是所有输入元素的乘积，但“i”处的输入元素除外。

例如，如果 arr = { 1, 2, 3, 4 }，那么

输出 = { 2*3*4, 1*3*4, 1*2*4, 1*2*3 }。

```
#include<cstdio>
#include<iostream>
using namespace std;
int main(){
    int n;
    long long int arr[1000]={0},prod=1;
    cin>>n;
    for(int i=0;i<n;i++){
        cin>>arr[i];
        prod*=arr[i];
    }
    if(prod!=0)
        for(int i=0;i<n;i++){
            cout<<(prod/arr[i])<<endl;
        }
    else
        for(int i=0;i<n;i++){
            cout<<"0"<<endl;
        }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:47:41.297

它失败的最简单的情况是 `2 0 1`. 正确的结果是`1 0`，你的结果是`0 0`。

更一般地，如果输入集中恰好有一个零和至少一个非零，则它会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:03:48.333

如前所述，问题是当输入之一为零时，您尝试除以零。为了正确计算乘积，需要一种只执行乘法而不执行除法的算法，例如以下算法。

```
#include <stdio.h>
#include <stddef.h>

// Input: an array of 2^(exp) doubles
// Output: an array of 2^(exp) doubles, where each one is the
//         product of all the numbers at different indices in
//         the input
// Return value: the product of all inputs
double products (unsigned int exp, const double *in, double *out)
{
    if (exp == 0) {
        out[0] = 1;
        return in[0];
    }

    size_t half_n = (size_t)1 << (exp - 1);

    double prod_left = products(exp - 1, in, out);
    double prod_right = products(exp - 1, in + half_n, out + half_n);

    for (size_t i = 0; i < half_n; i++) {
        out[i] *= prod_right;
        out[half_n + i] *= prod_left;
    }

    return prod_left * prod_right;
}

int main ()
{
    double in[8] = {1, 2, 3, 4, 5, 6, 7, 8};
    double out[8];
    products(3, in, out);

    for (size_t i = 0; i < 8; i++) {
        printf("%f ", out[i]);
    }
    printf("\n");

    return 0;
} 
```

这需要 O(n*log(n)) 时间并且没有额外的空间，除了递归使用的 O(log(n)) 空间。虽然它很好且易于理解，但它并不是最优的；看到[这个问题](https://stackoverflow.com/questions/2680548/interview-q-given-an-array-of-numbers-return-array-of-products-of-all-other-nu)。

# javascript - 有没有办法只在 HTML 5 和 javascript 中进行客户端图像混搭

> ID：11921181
> 
> 赞同：4
> 
> 时间：2012-08-12T09:32:52.717
> 
> 标签：javascript, html, canvas

我正在开发一个图像混搭网络应用程序。
我想避免 Flash 或其他客户端的麻烦，只做纯 HTML+javascript。

为了保持轻松，我想在客户端用 Javascript 完成这项工作，并让它只是将最终保存的图像推送到服务器。

在阅读了关于 HTML5 和 Canvas 的奇迹之后，我认为我可以使用它。

麻烦的是：

1.  如果我使用 HTML5 的新拖放功能让用户将本地图像传递给应用程序，然后将其绘制到画布上，那么……
    画布变脏了，如果我尝试保存它会引发安全异常图像数据。

3.  如果我使用像 Bing Image search 这样的 API 来为用户查找图像并将它们绘制到画布上，那么……
    画布会变脏，如果我尝试保存图像数据，则会引发安全异常。

我能想到的唯一解决方法是让服务器充当一种代理，并让它将处理的每个图像中继到客户端——但这违背了进入客户端的目的。

有没有我没有想到的其他方法，或者客户端的纯 HTML5 + JS 不是这个用例的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:15:40.827

引发安全异常是因为您使用的是来自不同域（本地或 Bing 在您的情况下）的图像，您应该让用户能够将所选图像上传到您的服务器上，然后在画布中使用它们。对于来自互联网存储的图像，您可以制作类似代理的东西以在前端显示它们，应始终上传来自用户 PC 的图像。据我所知，没有其他方法可以避免 XSS 异常。

PS这里有一篇关于HTML5画布图像限制的好文章：http: [//simonsarris.com/blog/480-understanding-the-html5-canvas-image-security-rules](http://simonsarris.com/blog/480-understanding-the-html5-canvas-image-security-rules)

# c# - 通过代码运行MSBUILD并获得异步进度

> ID：11921184
> 
> 赞同：2
> 
> 时间：2012-08-12T09:33:44.597
> 
> 标签：c#, msbuild, continuous-integration

我想通过代码运行 MSBUILD，并在构建过程中获取构建的异步状态（类似于 TeamCity 或任何其他构建运行程序）。

我正在使用以下代码：

```
var projectFileName = @"...\MyApplication\MyApplication.sln";
ProjectCollection pc = new ProjectCollection();
var GlobalProperty = new Dictionary<string, string>();
GlobalProperty.Add("Configuration", "Debug");
GlobalProperty.Add("Platform", "x86");

var buildRequest = new BuildRequestData(projectFileName, GlobalProperty, null, new string[] { "Build" }, null);

var buildResult = BuildManager.DefaultBuildManager.Build(new BuildParameters(pc), buildRequest); 
```

有没有办法通过代码获取当前正在执行的 MSBUILD 任务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T10:59:14.240

您必须异步调用 build 并在循环中测试 iscomplete ，您可以在其中进行进度跟踪：。

```
private void button1_Click(object sender, EventArgs e)
    {
        var projectFileName = @"...\MyApplication\MyApplication.sln";   
       ProjectCollection pc = new ProjectCollection(); 
       var GlobalProperty = new Dictionary<string, string>(); 
       GlobalProperty.Add("Configuration", "Debug"); 
       GlobalProperty.Add("Platform", "x86");
       BuildManager.DefaultBuildManager.BeginBuild(new BuildParameters(pc));
       BuildRequestData request = new BuildRequestData(projectFileName, GlobalProperty, null, new string[] { "Build" }, null); 
       BuildSubmission submission = BuildManager.DefaultBuildManager.PendBuildRequest(request); 
        submission.ExecuteAsync(null, null);
        int cpt = 0;
        while (!submission.IsCompleted)
        {
            cpt++;
            textBox1.Text = cpt.ToString();
        }

        BuildManager.DefaultBuildManager.EndBuild();   
        // If the build failed, return an error string.    
        if (submission.BuildResult.OverallResult == BuildResultCode.Failure)      
        {                 //do some error task           
        } 
    } 
```

# asp.net-mvc - MVC3 给出一个空白图表

> ID：11921187
> 
> 赞同：1
> 
> 时间：2012-08-12T09:34:06.730
> 
> 标签：asp.net-mvc, charts

我的 LoggedUserHome.Controller 对图表有此操作

```
 public ActionResult GetGender()
    {

        var AllGender = new List<string>(from c in db.tbl_Profile select c.sex).ToList();
        var Groping = AllGender
           .GroupBy(i => i)
           .Select(i => new { sex = i.Key, CountGet = i.Count() }).ToArray(); //get a count for each

        var key = new Chart(width: 300, height: 300)
            .AddSeries(
            chartType: "pie",
            legend: "Gender Popularity",
            xValue: Groping, xField: "sex",
            yValues: Groping, yFields: "CountGet")
            .Write("gif");
        return null;

    } 
```

在我看来，我已经给出了

```
<img src="/LoggedUserHome/GetGender"/> 
```

感谢 Nexuss ToArray() 的建议，我设法通过读取数据库来填充图表。非常感谢 Nexuzz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:04:06.193

简单的解决方案是尝试更换您的

```
<img src="/LoggedUserHome/GetGender"/> 
```

在视图中

```
@{
    var d = new PrimeTrekkerEntities1();
    var AllGender = new List<string>(from c in d.tbl_Profile select c.sex).ToList();
    var Groping = AllGender
        .GroupBy(i => i)
        .Select(i => new { sex = i.Key, Count = i.Count() }); //get a count for each

    var key = new Chart(width: 600, height: 400)
        .AddSeries(
        chartType: "pie",
        legend: "Gender Popularity",
        xValue: Groping, xField: "sex")
        .Write("gif");
} 
```

“是的”在这种情况下你不需要采取行动 GetGender。

更复杂的解决方案是离开

```
<img src="/LoggedUserHome/GetGender"/> 
```

在视图中，但让 GetGender() 操作返回图表图像 URL。因此，您可以在 GetGender() 中以某种方式将图表渲染到图像文件中并返回包含图像路径的响应。

**更新：**

我对您的示例进行了一些更新，因此它在图表中显示了数据。这是我所拥有的：

```
@{
    var AllGender = new List<string>() { "Male", "Female", "Male"};
    var Groping = AllGender
        .GroupBy(i => i)
        .Select(i => new { sex = i.Key, Count = i.Count() }).ToArray(); //get a count for each

    var key = new Chart(width: 600, height: 400)
        .AddSeries(
        chartType: "pie",
        legend: "Gender Popularity",
        xValue: Groping, xField: "sex",
        yValues: Groping, yFields: "count")
        .Write("gif");
} 
```

您的示例有两个主要区别：

*   `Groping`现在是一个数组。据我了解，Chart 希望枚举数据
*   我添加了`yValues`和`yFields`参数，所以图表知道在 Y 轴上使用什么值

# python - 如何在 Python 中发送带有 pdf 附件的电子邮件？

> ID：11921188
> 
> 赞同：13
> 
> 时间：2012-08-12T09:34:10.420
> 
> 标签：python, email, email-attachments, smtplib

> **可能重复：**
> [如何使用 python 发送电子邮件附件](https://stackoverflow.com/questions/3362600/how-to-send-email-attachments-with-python)

我想编辑以下代码并发送带有附件的电子邮件。附件是一个pdf文件，在/home/myuser/sample.pdf下，linux环境下。下面我应该改变什么？

```
import smtplib  
fromaddr = 'myemail@gmail.com'  
toaddrs  = 'youremail@gmail.com'  
msg = 'Hello'  

# Credentials (if needed)  
username = 'myemail'  
password = 'yyyyyy'  

# The actual mail send  
server = smtplib.SMTP('smtp.gmail.com:587')  
server.starttls()  
server.login(username,password)  
server.sendmail(fromaddr, toaddrs, msg)  
server.quit() 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-12T09:44:47.767

在这种情况下，您使用电子邮件包创建消息 -

```
from email.MIMEMultipart import MIMEMultipart
from email.MIMEText import MIMEText
from email.MIMEImage import MIMEImage
msg = MIMEMultipart()
msg.attach(MIMEText(open("/home/myuser/sample.pdf").read())) 
```

然后发送消息。

```
import smtplib
mailer = smtplib.SMTP()
mailer.connect()
mailer.sendmail(from_, to, msg.as_string())
mailer.close() 
```

这里有几个例子 - [http://docs.python.org/library/email-examples.html](http://docs.python.org/library/email-examples.html)

**更新**

更新链接，因为上面会产生 404 [https://docs.python.org/2/library/email-examples.html](https://docs.python.org/2/library/email-examples.html)。谢谢@Tshirtman

* * *

# Update2：附加pdf的最简单方法

要附加`pdf`使用 pdf 标志：

```
def send_email_pdf_figs(path_to_pdf, subject, message, destination, password_path=None):
    ## credits: http://linuxcursor.com/python-programming/06-how-to-send-pdf-ppt-attachment-with-html-body-in-python-script
    from socket import gethostname
    #import email
    from email.mime.application import MIMEApplication
    from email.mime.multipart import MIMEMultipart
    from email.mime.text import MIMEText
    import smtplib
    import json

    server = smtplib.SMTP('smtp.gmail.com', 587)
    server.starttls()
    with open(password_path) as f:
        config = json.load(f)
        server.login('me@gmail.com', config['password'])
        # Craft message (obj)
        msg = MIMEMultipart()

        message = f'{message}\nSend from Hostname: {gethostname()}'
        msg['Subject'] = subject
        msg['From'] = 'me@gmail.com'
        msg['To'] = destination
        # Insert the text to the msg going by e-mail
        msg.attach(MIMEText(message, "plain"))
        # Attach the pdf to the msg going by e-mail
        with open(path_to_pdf, "rb") as f:
            #attach = email.mime.application.MIMEApplication(f.read(),_subtype="pdf")
            attach = MIMEApplication(f.read(),_subtype="pdf")
        attach.add_header('Content-Disposition','attachment',filename=str(path_to_pdf))
        msg.attach(attach)
        # send msg
        server.send_message(msg) 
```

灵感/学分： http: [//linuxcursor.com/python-programming/06-how-to-send-pdf-ppt-attachment-with-html-body-in-python-script](http://linuxcursor.com/python-programming/06-how-to-send-pdf-ppt-attachment-with-html-body-in-python-script)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T09:44:13.820

推荐的方法是使用 Python 的*电子邮件*模块来编写格式正确的 MIME 消息。查看文档

对于 python 2
[https://docs.python.org/2/library/email-examples.html](https://docs.python.org/2/library/email-examples.html)

对于 python 3
[https://docs.python.org/3/library/email.examples.html](https://docs.python.org/3/library/email.examples.html)

# java - 如何在 xsd 验证失败的情况下获取无效 xml 文件的元素

> ID：11921190
> 
> 赞同：7
> 
> 时间：2012-08-12T09:34:24.107
> 
> 标签：java, xml, exception, xmlstreamreader

我目前正在使用我的 XSD 来验证我的 xml。这部分工作正常我的问题是我想获得无效的标签/值的元素。

```
 InputSource is = new InputSource();
    is.setCharacterStream(new StringReader(xml));
    XMLStreamReader reader = null;
    SchemaFactory factory=SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = factory.newSchema(xsdschemalocation);
    Validator validator = schema.newValidator(); 
    try
    {
        reader = XMLInputFactory.newInstance().createXMLStreamReader(new StreamSource(new StringReader(xml)));
    } catch (XMLStreamException ex)
    {
        LogController.getLogger().logSEVERE("Unable to create the streamreader from the xml source", ex.getLocalizedMessage());
        return false;
    }
    try
    {
        validator.validate(new StAXSource(reader));
    }
    catch (IOException ex)
    {
        LogController.getLogger().logSEVERE("IOException in the validatation has been caused as the reader has become null", ex.getLocalizedMessage());
        return false;
    }
catch(SAXException saxe)
    {
        LogController.getLogger().logWARNING("Their is a validation error with the xml", saxe.getLocalizedMessage());
        //*****HERE I WANT THE TAG THAT HAS THE ERROR
        ClientCommunication.ErrorMessageForClient(VALIDATION_ERROR, socket);
        CloseClientConnection();
        return;
    } 
```

我有一个不切实际的想法是在消息中查找单词“type”或“end-tag”并获取它之后的值，但是我知道这不是一个好习惯！我觉得这很令人沮丧，因为我可以看到无效但无法获取的标签！

这是我想要的元素的一些示例

```
1\. Message: Element type "first" must be followed by either attribute specifications, ">" or "/>".

2\. javax.xml.stream.XMLStreamException: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 353; cvc-pattern-valid: Value '079e989989' is not facet-valid with respect to pattern '([0-9])+' for type 'phoneNumber'.

3\. Message: The element type "firstLine" must be terminated by the matching end-tag "</firstLine>". 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-12T18:32:22.540

以下是您可以使用以下方法实现用例的方法`ErrorHandler`：

**我的错误处理程序**

我建议实现一个`ErrorHandler`维护对 的引用的，`XMLStreamReader`以便在`SAXParseException`发生时您可以询问`XMLStreamReader`以获取有关该元素的信息。如果您希望在抛出异常后停止解析，只需`SAXParseException`在每个方法的末尾重新抛出 。

```
package forum11921190;

import javax.xml.stream.XMLStreamReader;
import org.xml.sax.*;

public class MyErrorHandler implements ErrorHandler {

    private XMLStreamReader reader;

    public MyErrorHandler(XMLStreamReader reader) {
        this.reader = reader;
    }

    @Override
    public void error(SAXParseException e) throws SAXException {
        warning(e);
    }

    @Override
    public void fatalError(SAXParseException e) throws SAXException {
        warning(e);
    }

    @Override
    public void warning(SAXParseException e) throws SAXException {
        System.out.println(reader.getLocalName());
        System.out.println(reader.getNamespaceURI());
        e.printStackTrace(System.out);
    }

} 
```

**演示**

您`ErrorHandler`在`Validator`.

```
package forum11921190;

import javax.xml.XMLConstants;
import javax.xml.stream.*;
import javax.xml.transform.stax.StAXSource;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.*;

public class Demo {

    private static final StreamSource XSD = new StreamSource("src/forum11921190/schema.xsd");
    private static final StreamSource XML = new StreamSource("src/forum11921190/input.xml");

    public static void main(String[] args) throws Exception {
        SchemaFactory factory=SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema schema = factory.newSchema(XSD);

        XMLStreamReader reader = XMLInputFactory.newFactory().createXMLStreamReader(XML);

        Validator validator = schema.newValidator();
        validator.setErrorHandler(new MyErrorHandler(reader));
        validator.validate(new StAXSource(reader));

    }

} 
```

**架构.xsd**

下面是我在编写演示代码时使用的示例 XML 模式。

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://www.example.com"
    xmlns:tns="http://www.example.com"
    elementFormDefault="qualified">
    <element name="root">
        <complexType>
            <sequence>
                <element name="foo" type="string"/>
                <element name="bar" type="int"/>
            </sequence>
        </complexType>
    </element>
</schema> 
```

**输入.xml**

下面是一些示例输入。该`bar`元素包含无效内容。

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns="http://www.example.com">
    <foo>valid</foo>
    <bar>invalid</bar>
</root> 
```

**输出**

下面是运行演示代码的输出：

```
bar
http://www.example.com
org.xml.sax.SAXParseException: cvc-datatype-valid.1.2.1: 'invalid' is not a valid value for 'integer'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:423)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3188)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidType(XMLSchemaValidator.java:3103)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processElementContent(XMLSchemaValidator.java:3013)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleEndElement(XMLSchemaValidator.java:2156)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.endElement(XMLSchemaValidator.java:824)
    at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorHandlerImpl.endElement(ValidatorHandlerImpl.java:565)
    at com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.endElement(ToXMLSAXHandler.java:261)
    at com.sun.org.apache.xalan.internal.xsltc.trax.StAXStream2SAX.handleEndElement(StAXStream2SAX.java:295)
    at com.sun.org.apache.xalan.internal.xsltc.trax.StAXStream2SAX.bridge(StAXStream2SAX.java:167)
    at com.sun.org.apache.xalan.internal.xsltc.trax.StAXStream2SAX.parse(StAXStream2SAX.java:120)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:674)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:723)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:336)
    at com.sun.org.apache.xerces.internal.jaxp.validation.StAXValidatorHelper.validate(StAXValidatorHelper.java:94)
    at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorImpl.validate(ValidatorImpl.java:118)
    at javax.xml.validation.Validator.validate(Validator.java:127)
    at forum11921190.Demo.main(Demo.java:26)
bar
http://www.example.com
org.xml.sax.SAXParseException: cvc-type.3.1.3: The value 'invalid' of element 'bar' is not valid.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:423)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3188)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidType(XMLSchemaValidator.java:3104)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processElementContent(XMLSchemaValidator.java:3013)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleEndElement(XMLSchemaValidator.java:2156)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.endElement(XMLSchemaValidator.java:824)
    at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorHandlerImpl.endElement(ValidatorHandlerImpl.java:565)
    at com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.endElement(ToXMLSAXHandler.java:261)
    at com.sun.org.apache.xalan.internal.xsltc.trax.StAXStream2SAX.handleEndElement(StAXStream2SAX.java:295)
    at com.sun.org.apache.xalan.internal.xsltc.trax.StAXStream2SAX.bridge(StAXStream2SAX.java:167)
    at com.sun.org.apache.xalan.internal.xsltc.trax.StAXStream2SAX.parse(StAXStream2SAX.java:120)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:674)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:723)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:336)
    at com.sun.org.apache.xerces.internal.jaxp.validation.StAXValidatorHelper.validate(StAXValidatorHelper.java:94)
    at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorImpl.validate(ValidatorImpl.java:118)
    at javax.xml.validation.Validator.validate(Validator.java:127)
    at forum11921190.Demo.main(Demo.java:26) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:58:48.167

在你捕获代码中试试这个：

```
catch(SAXException saxe) {
    Element invalidElement = (Element) validator.getProperty("http://apache.org/xml/properties/dom/current-element-node");
    System.out.println("Error: " + saxe.getMessage());
    System.out.println("Invalid element: " + invalidElement);
} 
```

# windows - Windows 7 和 Linux 之间的 DB2 和 jRuby on Rails OS 兼容性

> ID：11921191
> 
> 赞同：0
> 
> 时间：2012-08-12T09:34:26.597
> 
> 标签：windows, linux, db2, jruby, compatibility

我必须开发一个在 Rails 上使用 DB2 和 jRuby 的项目。准备好后将在 Linux 平台上使用。

我想知道如果我使用windows 7开发，在Linux上部署时会遇到什么问题？

我也想用这个话题问一些关于所用技术的问题：

1.  “jRuby on rails”的官方网站是什么？为什么关于这项技术的信息很少，视频演示很少，只有一本书是4-5年前制作的？
2.  有没有人知道任何 jruby on rails 和 db2 教程或文章？

我问这个问题的原因也是因为我想阅读更多关于这些的内容并更新有关修复和新版本的信息，因为我真的不熟悉这两种技术。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:56:26.160

我在 Windows 上开发 Rails 应用程序并在 Linux 服务器上部署到 Tomcat 中没有任何问题。

关于你的另一个问题，我同意你的看法，有时感觉 JRuby 的文档并不多，但最后记住 JRuby 是唯一在 JVM 上运行的 Ruby。

这是 JRuby 的 wiki [https://github.com/jruby/jruby/wiki](https://github.com/jruby/jruby/wiki)，这里是官方网站[http://jruby.org/](http://jruby.org/)。

关于 db2 教程，我认为您应该在 Google.com 上更加努力，网上有一些宝石和更多信息。

# windows-7 - XAMPP 安装后未绑定到端口

> ID：11921192
> 
> 赞同：0
> 
> 时间：2012-08-12T09:34:39.937
> 
> 标签：windows-7, xampp

我已在 Windows 7 上成功安装了最新版本的 XAMPP，但是当我尝试运行 XAMPP 时，它会显示一条错误消息并立即关闭，但没有任何反应！
这是一个屏幕截图：

![](../Images/88d50e94dc081d7e6a6871ecef363e62.png)

我需要做什么才能运行 XAMPP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:44:45.870

您必须通过注册表手动禁用 http.sys 服务：

1.  启动注册编辑
2.  转到：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\HTTP
3.  添加新的 DWORD（32 位）值
4.  将其命名为“NoRun”，不包括引号
5.  双击新属性
6.  在数值数据字段中输入“1”，不包括引号，然后单击确定
7.  重新启动您的计算机

您现在应该发现 Apache 将在端口 80 上启动！

没关系！现在只需在浏览器中打开 localhost 或 127.0.0.1 即可。并告诉您是否没有看到欢迎页面

# c# - 在c#中发送消息事件jabber.net

> ID：11921199
> 
> 赞同：1
> 
> 时间：2012-08-12T09:35:57.627
> 
> 标签：c#, xmpp

我正在开发一个 .net 项目使用 jabber.net 库。我需要能够拦截我连接到的用户发送的消息。例如，我使用 jabber 将我的应用程序连接到用户 "a@b" 。每次用户“a@b”使用 gtalk 发送消息时，我都希望收到通知。实际上，只有在收到消息时才会调用 OnMessage 事件，并且只有当我从我的应用程序发送消息而不是用户使用 gtalk 时才会调用 OnWriteText 事件...

我怎样才能做到这一点？谢谢。

# mysql - 在 SQL 中创建消息列表

> ID：11921204
> 
> 赞同：0
> 
> 时间：2012-08-12T09:37:16.457
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试创建一个消息列表，例如 Facebook。

1.  仅显示来自用户对话的最后一条消息（历史记录）
2.  当我发送 show mine 时，当我得到答案时显示已回答的消息（1 行）

**数据库数据**：

![在此处输入图像描述](../Images/abcbabeb94988e7c13b8be4a15f42c4b.png)

**SQL查询**

```
SELECT m.message_id, u.username, m.subject, m.message
     , m.status, UNIX_TIMESTAMP(m.date) as date
  FROM users u
  LEFT JOIN messages m ON m.sender_id = u.id
 WHERE m.message_id in (SELECT max(msg.message_id) 
                          FROM messages msg 
                         WHERE msg.receiver_id = 3 
                         GROUP BY sender_id)
 UNION
SELECT m.message_id, u.username, m.subject, m.message
     , m.status, UNIX_TIMESTAMP(m.date) as date
  FROM users u
  LEFT JOIN messages m ON m.receiver_id = u.id
 WHERE m.message_id in (SELECT max(msg.message_id)  
                          FROM messages msg 
                         WHERE msg.sender_id = 3 
                         GROUP BY receiver_id)
 GROUP BY u.username
 ORDER BY date DESC 
```

我尝试接收我发送的所有消息（我的 id = 3）以及发送给我的所有消息并按用户名分组

**SQL结果：**

```
Array
(
    [0] => Array
        (
            [message_id] => 10
            [username] => 8888
            [subject] => без темы
            [message] => 555
            [status] => 0
            [date] => 11 August 2012, 2:22
            [user_image] => http://127.0.0.1/auth_system_1/upload_images/65_empty.jpg
        )

    [1] => Array
        (
            [message_id] => 7
            [username] => 8888
            [subject] => hi
            [message] => 333
            [status] => 0
            [date] => 11 August 2012, 2:15
            [user_image] => http://127.0.0.1/auth_system_1/upload_images/65_empty.jpg
        )

    [2] => Array
        (
            [message_id] => 4
            [username] => 6666
            [subject] => РўРµРјР°
            [message] => 2
            [status] => 0
            [date] => 11 August 2012, 2:02
            [user_image] => http://127.0.0.1/auth_system_1/upload_images/65_empty.jpg
        )

    [3] => Array
        (
            [message_id] => 1
            [username] => fffffffff
            [subject] => privet
            [message] => tttt
            [status] => 0
            [date] => 11 August 2012, 1:38
            [user_image] => http://127.0.0.1/auth_system_1/upload_images/65_empty.jpg
        )

) 
```

如您所见，`GROUP BY`用户名不起作用。它显示 3->7 和 7->3 但 7->3 是答案和最后一条消息。我不知道为什么组不起作用。也许你可以帮助我用更简单的方法来解决这个问题？

所以，SQL 必须有 "sender_id = 3" ， "receiver_id = 3" 并且我的表数据结果必须是

*   message_id -> 1
*   message_id -> 4
*   message_id -> 10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:17:45.383

我认为您的查询正在产生“正确”的结果，就好像您想查看某些对话中的最后一条消息一样，您真的应该按`conversation_id`. 不过，我在架构中看不到这个字段。

如果您这样做`WHERE sender_id = 3 GROUP BY receiver_id`，那么该查询返回消息 1 和 7 是正确的，因为这些消息已发送给*不同*的人，因此在您的设计中它们是不同的对话。

如果您只想查看一般情况下发送的最后一条消息，只需`GROUP BY`在您的`UNION`. 否则，请考虑重新设计您的架构。

* * *

**编辑：**

试试这个查询：

```
SELECT m.message_id, u.username, m.subject, m.message,
       m.status, UNIX_TIMESTAMP(m.date) as `date`
  FROM users u
  LEFT JOIN messages m ON m.sender_id = u.id
 WHERE m.message_id IN (
    SELECT max(message_id) 
      FROM messages
     WHERE receiver_id = 3 OR sender_id = 3
     GROUP BY least(sender_id,receiver_id), 
              greatest(sender_id,receiver_id)
    ); 
```

一些注意事项：

1.  `UNION`不再需要；
2.  这种方法会将两方之间的所有电子邮件视为一次对话，但这并不总是正确的。您可能想重新设计这种方法；
3.  对列名或别名使用保留字（如`date`）是一种不好的风格，请尽量避免这种情况。或者如果您确实使用它们，请使用反引号。

# machine-learning - WEKA LibSVM 不适用于我的数据集

> ID：11921205
> 
> 赞同：2
> 
> 时间：2012-08-12T09:37:19.117
> 
> 标签：machine-learning, weka, libsvm

WEKA 上的 LibSVM 没有加载我的数据集。我正在使用 WEKA 和 LibSVM。每次我打开我的数据集然后尝试选择一种算法时，LibSVM 算法都未启用（该选项为灰色）。但是，例如，如果我加载了 WEKA 附带的 weather.arff 示例数据集，那么 LibSVM 算法就可以工作......

我不知道我的数据集是否有任何问题。在处理 LibSVM 时，我应该注意哪些限制？例如，属性的数量等。

奇怪的是，当我使用 WEKA 附带的 SMO 算法运行我的数据集时，它可以正常工作。

在我的数据集中，我有 76 个属性，我的类属性有 100 个可能的值。

我做错什么了吗？谢谢，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:55:22.680

您的数据集与 LibSVM 要求的输入格式不匹配。能力如下：

```
CAPABILITIES
Class -- Nominal class, Missing class values, Binary class

Attributes -- Empty nominal attributes, Nominal attributes, Unary attributes, Binary attributes, Date attributes, Numeric attributes

Additional
min # of instances: 1 
```

因此，.arff 文件中的类应该是标称或二进制（允许遗漏某些值），并且您的属性应该是标称、一元或二进制（允许为空）。

# c# - c#自动化代码

> ID：11921206
> 
> 赞同：0
> 
> 时间：2012-08-12T09:37:19.487
> 
> 标签：c#, javascript, testing, automation, ranorex

我需要为 Metro 应用程序测试编写 C# 自动化脚本。我正在使用 ranorex 工具。如何通过脚本启动 Metro UI 上的应用程序？如果我录制和播放，它在不同的系统上不起作用。请建议脚本以启动 Metro 应用程序。我不知道 Metro 应用程序的文件夹/路径，因为它是隐藏的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T22:12:06.120

Microsoft 提供了一个名为 UIA 的框架，用于自动化 Windows 8 应用程序。这个[链接](http://blogs.msdn.com/b/windowsappdev/archive/2012/09/04/automating-the-testing-of-windows-8-apps.aspx)会给你一个简短的想法。

# javascript - 如何防止 onmouseover 事件为其父级激活 onmouseout 事件？

> ID：11921209
> 
> 赞同：0
> 
> 时间：2012-08-12T09:37:57.857
> 
> 标签：javascript, html

我正在尝试创建一个简单的菜单，该菜单在用户将鼠标悬停在顶部栏上的按钮上时启动。菜单显示在容器 div 中（使用 onmouseover 事件激活块显示）。但是，当用户将鼠标悬停在容器内的菜单项列表上时，div 就会消失。HTML结构如下：

```
<div id="menu-contaier" onmouseout="hideMenu();">
        <div id="lvl1"></div>
        <div id="lvl2"></div>
        <div id="lvl3"></div>
</div> 
```

就我的想法而言，我认为这是因为当鼠标触摸“lvl1”（或 lvl2 或 lvl3）id 时，它会退出“menu-container”div。我试图将它嵌套在另一个 div 中，但也没有工作。

理想情况下，HTML 结构应如下所示：

```
<div id="menu-contaier" onmouseout="hideMenu();">
        <div id="lvl1"><ul><li onmouseover="presentForLevel2(3, 'lvl2');">Windows</li><li onmouseover="presentForLevel2(4, 'lvl2');">Tables</li></ul></div>
        <div id="lvl2"></div>
        <div id="lvl3"></div>
</div> 
```

悬停时，“presentForLevel2()”函数将填充不会发生的 lvl2 div。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-12T09:57:43.270

发生这种情况是因为当您将鼠标移出任何 'lvl' div 时，mouseout 事件会冒泡并且也会在父 div 上触发。为防止这种情况，请在子 div 上设置 mouseout 事件处理程序并阻止事件冒泡。这是一个演示：http: [//jsfiddle.net/ESBYw/](http://jsfiddle.net/ESBYw/)

# javascript - event.preventDefault() 究竟是如何影响 DOM 的？

> ID：11921210
> 
> 赞同：5
> 
> 时间：2012-08-12T09:38:04.130
> 
> 标签：javascript, jquery, html, preventdefault

根据某人的建议，我`$('body').on('touchstart', function(event){ event.preventDefault() })`在我的移动 web 应用程序中添加了这一行，以禁用 iOS 中的本机应用程序弹跳。它非常适合禁用反弹，但在 DOM 的其他地方给了我一些奇怪的行为。

单击不起作用的事件等。我希望能更好地了解它的作用以及如何解决它在 DOM 中其他地方的影响。

谢谢！

编辑：

我有这两行：

```
 $('body').on('touchstart', function(e){ e.preventDefault() };
  $('#home').on('click', function(){ alert('home') }; 
```

如果我注释掉该`preventDefault`行，则该`#home`行有效。如果我将其留在#home 行中，则不会响应。`#home`只是嵌套在`body`.

知道什么可能导致这种行为吗？它是更大代码库的一部分，因此很难向您提供所有细节，但我什至不知道从哪里开始。

再次感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T09:41:22.217

`e.preventDefault()`告诉浏览器如果此对象上的此事件有默认行为，则跳过该默认行为。

因此，例如，如果您有一个默认行为是提交表单的提交按钮，并且您在该按钮上有一个执行 a 的单击处理程序`preventDefault()`，那么当单击该按钮时浏览器将不会提交该表单。一个典型的使用可能是当表单没有验证，所以你向用户显示一条错误消息并且不希望表单被提交到服务器。

或者另一个例子。如果您为链接设置了单击处理程序并调用`e.preventDefault()`了该单击处理程序，则浏览器将不会处理链接上的单击，并且不会跟随链接中的 href。

# c# - 使用泛型类型动态创建的空事件委托

> ID：11921212
> 
> 赞同：2
> 
> 时间：2012-08-12T09:38:44.230
> 
> 标签：c#, events, generics, delegates, postsharp

我从这里复制了代码：[https ://whathecode.wordpress.com/2012/03/26/null-checks-for-event-handlers-an-aspect-solution/](https://whathecode.wordpress.com/2012/03/26/null-checks-for-event-handlers-an-aspect-solution/)

但是当事件在通用类型的类中时，我似乎无法让它工作。我有一个类定义为：

```
Public Class MultiKeyDictionary<TFirstKey, TSecondKey, TValue> 
```

以及以下事件：

```
public delegate void EventDelegate(TValue value);

public delegate void ReplacedEventDelegate(TValue oldValue, TValue newValue);

public event EventDelegate Added;

public event EventDelegate Removed;

public event ReplacedEventDelegate Replaced; 
```

但是初始化代码异常抱怨类型的 ContainsGenericParameters 设置为 true （或类似的东西）。

我已将 RuntimeInitialize 方法中该链接中的代码更改为：

```
public override void RuntimeInitialize(EventInfo eventInfo) {
    base.RuntimeInitialize(eventInfo);
    Type eventType;
    MethodInfo delegateInfo = eventInfo.EventHandlerType.MethodInfoFromDelegateType();          
    ParameterExpression[] parameters = delegateInfo.GetParameters().Select(p => Expression.Parameter(p.ParameterType)).ToArray();
    if(eventInfo.EventHandlerType.ContainsGenericParameters) {
        var genericDelegate = eventInfo.EventHandlerType.GetGenericTypeDefinition();
        var genericParams = genericDelegate.GetGenericArguments();
        eventType = genericDelegate.MakeGenericType(genericParams);
    } else {
        eventType = eventInfo.EventHandlerType;
    }
    Delegate emptyDelegate = Expression.Lambda(eventType, Expression.Empty(), "EmptyDelegate", true, parameters).Compile();
    this.addEmptyEventHandler = instance => eventInfo.AddEventHandler(instance, emptyDelegate);
} 
```

但我现在得到的只是一个 ArgumentException：“TValue”类型的 ParameterExpression 不能用于创建 emptyDelegate 行上的“TValue”类型的委托参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:17:42.873

正如我之前在博客上回答的那样，这里的主要问题是何时`RuntimeInitialize()`调用 PostSharp 还不知道该类将使用哪些通用参数进行初始化。但是，当`OnConstructorEntry()`被调用时，我们确实有此信息。有关 PostSharp 方面如何工作的更多信息，请务必阅读有关方面[生命周期的文档](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/7480ca54-61c0-46c5-9914-60a58c3033e8.htm)。

在现有代码中，当在运行时为类（`RuntimeInitialize()`方法）创建切面时，我只是忽略了类可能是通用的这一事实。这是我的疏忽。您不能使用 编译“泛型”类型`Expression.Lambda`，因此不可能编译一个通用事件处理程序，该处理程序可由泛型类型的所有不同实例化使用。

您需要在运行时为泛型类型的每个不同实例分别编译此空事件处理程序。这可以`OnConstructorEntry`在您可以从`MethodExecutionArgs`PostSharp 传递的参数中接收实例类型的地方完成。

为了知道您需要向*哪个*事件添加处理程序，您需要`EventInfo`在运行时初始化时将其存储在您的方面。

```
[NonSerialized]
EventInfo _event; 
```

您可以通过比较名称知道方面适用于哪个事件。以下是当前的工作代码`OnConstructorEntry()`。

```
Type runtimeType = args.Instance.GetType();
EventInfo runtimeEvent =
    runtimeType.GetEvents().Where( e => e.Name == _event.Name ).First();

MethodInfo delegateInfo =
    DelegateHelper.MethodInfoFromDelegateType( runtimeEvent.EventHandlerType );
ParameterExpression[] parameters = delegateInfo
    .GetParameters()
    .Select( p => Expression.Parameter( p.ParameterType ) )
    .ToArray();
Delegate emptyDelegate = Expression.Lambda(
    runtimeEvent.EventHandlerType, Expression.Empty(),
    "EmptyDelegate", true, parameters ).Compile();

// Add the empty handler to the instance.
MethodInfo addMethod = runtimeEvent.GetAddMethod( true );
if ( addMethod.IsPublic )
{
    runtimeEvent.AddEventHandler( args.Instance, emptyDelegate );
}
else
{
    addMethod.Invoke( args.Instance, new object[] { emptyDelegate } );
} 
```

这仍然存在一个问题。我们不想在每次构造类型时都进行所有这些反射！因此，理想情况下，您应该像以前一样缓存添加空处理程序的方法`RuntimeInitialize()`。由于方面代码由泛型类型的*所有*实例“共享”（它们使用相同的范围），因此您应该分别缓存每个实例类型。例如，使用 a `Dictionary<Type, Action<object>>`，其中`Type`指的是实例类型，并且`Action<object>`是可以将空事件处理程序添加到实例的方法。

这正是我现在在我的库中使用的实现[，你可以在 github 上找到更新的版本](https://github.com/Whathecode/Framework-Class-Library-Extension/blob/master/Whathecode.System.Aspects/InitializeEventHandlersAttribute.cs)。正如您将看到的，我使用了一个`CachedDictionary`类，它已经为您处理了大部分缓存逻辑，因为它是一种常见的场景。[之前失败](https://github.com/Whathecode/Framework-Class-Library-Extension/blob/master/Whathecode.System.Aspects.Tests/InitializeEventHandlersAttributeTest.cs)的单元测试现在成功了。

# tomcat - Tomcat 5.5.27 中的会话 JSession Id

> ID：11921214
> 
> 赞同：0
> 
> 时间：2012-08-12T09:38:57.377
> 
> 标签：tomcat

我的tomcat是5.5.27。无论如何要像在tomcat 6.0中添加secure =“true”一样保护jession id？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:27:02.240

`secure="true"`与 JSESSIONID cookie 的“安全”属性无关。如果要在 JSESSIONID 的 cookie 中设置“安全”标志，则必须确保`HttpSession`在通过 HTTPS 的请求期间创建用户。

# android - Android - 更改应用程序中所有对话框的对话框标题样式

> ID：11921216
> 
> 赞同：15
> 
> 时间：2012-08-12T09:39:17.093
> 
> 标签：android, android-alertdialog, android-theme

有没有办法可以更改出现在我的 Android 应用程序中的所有警报对话框？我也想更改系统生成的对话框（*例如当您长按任何 EditText 时打开的 Edit Text 对话框*）。我想更改我的应用程序中所有对话框的标题字体颜色和大小。

有没有办法做到这一点？

我已经尝试`android:alertDialogTheme`在我的主题中设置。但它似乎不起作用。代码如下 -

```
<style name="Theme.DLight" parent="android:Theme.Light.NoTitleBar">
    <item name="android:alertDialogTheme">@style/DialogStyle</item>
</style> 
```

和

```
<style name="DialogStyle" parent="android:Theme" >    
    <item name="android:windowBackground">@drawable/background_holo_light</item>
    <item name="android:textColor">#014076</item>       
</style> 
```

**编辑**

> 我没有从我的代码中调用对话框。它只是长按任何 EditText 时出现的默认对话框。通常它包含键盘选项，如选择单词、全选、输入法等。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-07-03T17:46:22.647

在您的对话框主题中，您需要修改的属性`windowTitleStyle`。在那里，为您的标题引用一个样式并为此标题定义一个文本外观。例如，要将标题显示为红色和粗体：

```
<style name="AppTheme" parent="@android:style/Theme.Holo">
    ...  
    <item name="alertDialogTheme">@style/AppTheme.AlertDialog</item>
</style>

<style name="DialogStyle" parent="@style/Theme.Holo.Dialog.Alert">    
    ...
    <item name="android:windowTitleStyle">@style/DialogWindowTitle_Custom</item>
</style>

<style name="DialogWindowTitle_Custom" parent="@style/DialogWindowTitle_Holo">
    <item name="android:maxLines">1</item>
    <item name="android:scrollHorizontally">true</item>
    <item name="android:textAppearance">@style/TextAppearance_DialogWindowTitle</item>
</style>

<style name="TextAppearance_DialogWindowTitle" parent="@android:style/TextAppearance.Holo.DialogWindowTitle">
    <item name="android:textColor">@android:color/holo_red_light</item>
    <item name="android:textStyle">bold</item>
</style> 
```

如果您想为您的 AlertDialog 设置更多样式，我写了[一篇博](https://web.archive.org/web/20200214041924/http://blog.supenta.com/2014/07/02/how-to-style-alertdialogs-like-a-pro/)文详细介绍了这些步骤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-04T08:01:01.787

在样式.xml 中：

```
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
        <!-- Customize your theme here. -->
       //All your other styles and add the one mntioned below.

        <item name="alertDialogTheme">@style/AlertDialogStyle</item>
    </style> 
```

在 AlertDialog 的样式中添加：

```
 <style name="AlertDialogStyle" parent="Theme.AppCompat.Light.Dialog.Alert">
        <item name="colorAccent">@color/colorAccent</item>
        <item name="android:textColorPrimary">@color/primary_text</item>
        <item name="android:editTextColor">@color/primary_text</item>
        <item name="android:background">@color/white</item>
        <item name="android:windowTitleStyle">@style/TextAppearance.AppCompat.Title</item>
    </style> 
```

**添加windowTitleStyle**很重要，因为它将为您的标题提供您需要的效果。

现在只需在您想要的任何活动中的 AlertDialog 中使用此主题，如下所示：

```
 AlertDialog.Builder dialog = new AlertDialog.Builder(this, R.style.AlertDialogStyle); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T12:15:43.940

```
import android.app.ProgressDialog;
import android.content.Context;
import android.view.animation.Animation;

public class MyProgressDialog extends ProgressDialog {

    public MyProgressDialog(Context context) {
        super(context,R.style.NewDialog);

        // TODO Auto-generated constructor stub
    }

} 
```

//资源样式文件 res->values->mydialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <style name="NewDialog" parent="@android:style/Theme.Dialog">

    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:colorBackground">#ffffff</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:width">30dip</item>
    <item name="android:height">30dip</item>
     <item name="android:textColor">#FF0000</item>

</style>
</resources> 
```

//并在您的应用程序中的任何地方使用此代码以获取自定义进度对话框

```
MyProgressDialog pd = new MyProgressDialog(YouActivity.this);
pd.setMessage("Loading. Please wait...");
pd.show(); 
```

谢谢 ：）

# java - RXTX 和 LRC 传输过程

> ID：11921221
> 
> 赞同：1
> 
> 时间：2012-08-12T09:41:29.967
> 
> 标签：java, rxtx

所以，我有一个通过RS-232 DB9串口连接的卡锁系统设备。这是我第一次使用它来处理外部设备。所以我阅读了手册，它说传输过程文本格式定义如下：

- 文本必须在 STX 和 ETC 之间最多包含 500 个字符

-LRC 计算区域范围从 STX 到 ETX 的第一个字符

还有一个控制字符列表（STX、ETX、ACK、NAK）及其十六进制代码。

我对此一无所知。请赐教。哦，还有，我可以检测设备是否连接到特定端口吗？

我已经设法使用下面的代码连接到通信端口：

```
public class TwoWaySerialComm
{
    protected InputStream inputStream;
    protected OutputStream outputStream;

    public TwoWaySerialComm()
    {
        super();
    }

    void connect ( String portName ) throws Exception
    {
        CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
        if ( portIdentifier.isCurrentlyOwned() )
        {
            System.out.println("Error: Port is currently in use");
        }
        else
        {
            CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

            if ( commPort instanceof SerialPort )
            {
                SerialPort serialPort = (SerialPort) commPort;
                serialPort.setSerialPortParams(9600,SerialPort.DATABITS_7,SerialPort.STOPBITS_1,SerialPort.PARITY_ODD);

                inputStream = serialPort.getInputStream();
                outputStream = serialPort.getOutputStream();

                (new Thread(new SerialReader(inputStream))).start();
                (new Thread(new SerialWriter(outputStream))).start();

            }
            else
            {
                System.out.println("Error: Only serial ports are handled by this example.");
            }
        }
    }

    public InputStream getInputStream() {
        return inputStream;
    }

    public void setInputStream(InputStream inputStream) {
        this.inputStream = inputStream;
    }

    public OutputStream getOutputStream() {
        return outputStream;
    }

    public void setOutputStream(OutputStream outputStream) {
        this.outputStream = outputStream;
    }

    /** */
    public static class SerialReader implements Runnable 
    {
        InputStream in;

        public SerialReader ( InputStream in )
        {
            this.in = in;
        }

        public void run ()
        {
            byte[] buffer = new byte[1024];
            int len = -1;
            try
            {
                while ( ( len = this.in.read(buffer)) > -1 )
                {
                    System.out.print(new String(buffer,0,len));
                }
            }
            catch ( IOException e )
            {
                e.printStackTrace();
            }            
        }
    }

    /** */
    public static class SerialWriter implements Runnable 
    {
        OutputStream out;

        public SerialWriter ( OutputStream out )
        {
            this.out = out;
        }

        public void run ()
        {
            try
            {
                int c = 0;
                while ( ( c = System.in.read()) > -1 )
                {
                    this.out.write(c);
                }                
            }
            catch ( IOException e )
            {
                e.printStackTrace();
            }            
        }
    }

    public static void main ( String[] args )
    {
        try
        {
            TwoWaySerialComm comm = new TwoWaySerialComm();
            comm.connect("COM3");
        }
        catch ( Exception e )
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

这是我发现的用于从字节数组中获取 LRC 的代码：

```
 public byte calculateLRC(byte[] data)
    {
        byte checksum = 0;
        for (int i = 0; i <= data.length - 1; i++) {
            checksum = (byte) ((checksum + data[i]) & 0xFF);
        }

      checksum = (byte) (((checksum ^ 0xFF) + 1) & 0xFF);
        return checksum;
    } 
```

现在据说我必须正确地向设备发送文本“CES01”，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:47:23.213

```
STX :start character 
ETX: end character 
ACK : Acknowledgement 

    char STX = 0x02;
char ETX = 0x03;
char EOT = 0x04;
char ENQ = 0x05;
char ACK = 0x06; 
```

**另请参阅 LIS/RIS 消息格式的链接**

[http://www.hl7standards.com/](http://www.hl7standards.com/)

发送确认

```
public void sendAcknowledgement()throws IOException{
         String ack= ASCIITable.ACK + "";
         outputStream.write(ack.getBytes());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:50:24.083

如果你完全没有串行通信的经验，我会从研究一些现有的、已知的工作实施开始。John Ellinwood 对[这个 SO 问题](https://stackoverflow.com/questions/606074/implementation-of-x-modem-protocol-in-java)的回答包含 XModem 协议的 Java 源代码，这是一种旧的、简单的调制解调器文件传输协议。这将向您展示如何处理通信本身（您始终必须为超时和其他错误情况做好准备）和控制字符。

您不能忘记 Java 的一个特性是 Java 中没有无符号类型，如果您可以使用的唯一变量类型是有符号的，那么这些低级协议的编程几乎总是会变得有点复杂。但正如 XModem 代码所示，这是完全可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T09:52:59.310

OutputStream 写入字节，因此您必须先将字符串转换为字节数组：

```
outputStream.write("CES01".getBytes()); 
```

# c# - BackgrounderWorker 在 try-catch 块中停止

> ID：11921225
> 
> 赞同：0
> 
> 时间：2012-08-12T09:42:07.053
> 
> 标签：c#, backgroundworker

```
//static int var1, var2, var3;
//static List<string> list;

    public static void MyMethod(Object obj, int times)
    {
        List = doc1.Descendants("Order")
            .Select(d => d.Value)
            .ToList();
        for (int i = 0; i < List.Count; i++)
        {
            try
            {
                var item = (from m in doc1.Elements("list").Elements("Order")
                                where m.Value == List[i]
                                select m);

                item.Remove();

                doc1.Save(path1);
                var1 = doc1.Root.Descendants("Order").Count();

                //DoSomethingHeavy with List[i]

                doc2.Element("list2").Add(new XElement("Order", List[i]));
                doc2.Save(path2);

                 var2= doc2.Root.Descendants("Order").Count();

            }
            catch (Exception)
            {
                doc3.Element("list3").Add(new XElement("Order", List[i]));
                doc3.Save(path3);

                var3 = doc3.Root.Descendants("Order").Count();

            }
        }
    } 
```

这是公共静态类中的 MyMethod。我想让它在 BackgroundWorker 下的表单中运行，以便能够暂停和恢复执行。

我正在使用这个类：

```
public class BackgroundLoading
{
    public BackgroundWorker Bw;
    public delegate void RunFunction();
    public RunFunction thisFunction;

    public BackgroundLoading(RunFunction newFunction)
    {
        thisFunction = newFunction;
        Bw = new BackgroundWorker();
        Bw.DoWork += new DoWorkEventHandler(Bw_DoWork);
        Bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(Bw_RunWorkerCompleted);
    }

    public void Start()
    {
        Bw.RunWorkerAsync();
    }

    void Bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            //an error occured
            MessageBox.Show("an error occured: " + e.Error.Message);
        }
        if (e.Cancelled)
        {
            //an error occured
            MessageBox.Show("Job cancelled");
        }
        else
        {
            MessageBox.Show("Job completed");
        }

    }

    void Bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        MessageBox.Show(" *");
    }

    void Bw_DoWork(object sender, DoWorkEventArgs e)
    {
        if (thisFunction != null)
            thisFunction();
    }
}

 //class to implement 
```

然后，在 myForm 中：

```
private void button1_Click(object sender, EventArgs e)
    {
        BackgroundLoading bl = new BackgroundLoading(MyMethod());
        bl.Start();
    } 
```

我对 BackgroundWorker 真的很陌生，可能我没有以正确的方式使用它。单击 StopExecution 按钮时，并非我的所有文档（doc1、doc2、doc3）都已保存。那么如何避免在 try-catch 块中停止呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:32:25.053

1.  将[WorkerSupportsCancellation](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.workersupportscancellation.aspx)设置为 True 以允许您的 BackgroundWorker 支持取消。
2.  让您的取消按钮调用[CancelAsync()](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancelasync.aspx)方法。
3.  通过拆分为 2 种方法来更改您的方法。一个应该得到一个项目编号，另一个将逐项工作。
4.  在您的 DoWork() 方法中，检查是否[有待取消的取消](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancellationpending.aspx)，如果有，则完成您的流程。

    ```
     void Bw_DoWork(object sender, DoWorkEventArgs e)
      {

        //in your loop test every time Cancel flag       
        for (int i = 0; i < MyMethodGetItemcount(); i++)
        {
            MyMethod(i);//item by item
            if(yourbackgroundworker.CancellationPending)
            {
                e.Cancel = true;
                return;
            }
     } 
    ```

# javascript - 如何使用 JQuery 从 JSON 对象创建此选择列表？

> ID：11921226
> 
> 赞同：3
> 
> 时间：2012-08-12T09:42:08.100
> 
> 标签：javascript, jquery, ajax, json

是的，我对同一主题有 3 或 4 个不同的答案，但我正在努力将它们结合起来以创造我需要的东西。我使用 Json.Net 序列化我的结果，这会产生以下对象：

```
"[  { "Id": 1, "OrderInList": 1  },
    { "Id": 2, "OrderInList": 2  },
    { "Id": 4, "OrderInList": 3  }
]" 
```

我希望选项值*和*文本成为 OrderInList 值（稍后我将使用 Id 和其他内容）。

我目前有以下代码，但它创建了*143 个*选项框。我可以看到它为什么会这样做，但我不确定如何改变它以使其正常工作。

```
 $.getJSON("/Json/GetOrderSelectList?parentCategoryId=" + postData, null, function (jsonResult) {
        $('#orderInList').attr('enabled', 'true');
        $.each(jsonResult, function() {
            $.each(this, function(index, item) {
                                $('#orderInList').append(
                                    $("<option></option>")
                                        .text(index)
                                        .val(index)
                                );

            });
        }); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T09:47:23.030

我认为您正在尝试这样的事情：

```
var jsonResult = [{
    "Id": 1,
    "OrderInList": 1},
{
    "Id": 2,
    "OrderInList": 2},
{
    "Id": 4,
    "OrderInList": 3}
]

$('#orderInList').attr('enabled', 'true');
$.each(jsonResult, function() {
   $('#orderInList').append(
        $("<option></option>").text(this.Id).val(this.OrderInList);
   );
});​ 
```

**[演示](http://jsfiddle.net/6vC3u/2/)**

***完整代码***

```
$.getJSON("/Json/GetOrderSelectList?parentCategoryId=" + postData, function(jsonResult) {
    $('#orderInList').attr('enabled', 'true');
    $.each(jsonResult, function() {
        $('#orderInList').append(
            $("<option></option>").text(this.Id).val(this.OrderInList)
        );
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:54:25.437

您不需要嵌套在对 .each 的第一次调用中的对 .each 的额外调用。只需在第一个 .each 调用中传递项目和索引，然后创建您的元素。尝试这个：

```
var json = [  { "Id": 1, "OrderInList": 1  },
    { "Id": 2, "OrderInList": 2  },
    { "Id": 4, "OrderInList": 3  }
];

function createSelect(options){
    $.each(options,function(index,item){
           $("#orderInList").append($("<option></option>").attr("value", item.OrderInList).text(item.OrderInList));

    });
}

$(document).ready(function(){
createSelect(json);
}); 
```

工作示例：http: [//jsfiddle.net/BzC9N/](http://jsfiddle.net/BzC9N/)

# mysql - 将用户与多个其他用户关联

> ID：11921229
> 
> 赞同：2
> 
> 时间：2012-08-12T09:42:55.460
> 
> 标签：mysql, database

我正在将我的 C++ 程序连接到 MySQL 服务器，但我遇到了一些困难。

每个用户都有一个联系人/朋友列表，（当然）包含其他用户。我不确定如何将用户与数据库中的其他用户实际关联起来。什么数据类型可以用于这样的任务？

我唯一能想到的可能是有一个用空格分隔数字的文本字段，并在每次用户连接时解析它。但由于某种原因，这对我来说听起来非常错误，所以我不确定。

你能推荐什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:48:33.817

> 我唯一能想到的可能是有一个用空格分隔数字的文本字段，并在每次用户连接时解析它。但出于某种原因，这对我来说听起来很不对劲

这听起来对我来说也是个坏主意。

你想要一个多对多的关系：

```
contact
user    friend
1       2
1       3
1       5
2       4
3       1 
```

请注意，在联系人列表中，您可能希望为每个联系人列表条目存储附加属性。例如，用户可能希望更改显示在他们自己的联系人列表中的姓名。例如，如果用户 1 想要将用户 3 的名称显示为“foo”，则您的表可能如下所示。

```
contact
user    friend   displayName
1       2        NULL
1       3        'foo'
1       5        NULL
2       4        NULL
3       1        NULL 
```

这`NULL`意味着用户没有为其联系人指定首选显示名称，因此应显示联系人的姓名。

# jquery - jQuery Validate Plugin 不验证元数据

> ID：11921231
> 
> 赞同：6
> 
> 时间：2012-08-12T09:43:17.740
> 
> 标签：jquery, jquery-plugins

我有一个用于用户输入（名字、姓氏、电子邮件）的基本表单设置。我已经正确导入了 jQuery 和验证插件。我的验证配置是这样的：

```
$(document).ready(function() {
    $("#form").validate({meta: "validate"});
}); 
```

根据可以在[此处](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)和[此处](http://docs.jquery.com/Plugins/Validation)找到的插件文档，这应该意味着我可以为我想要验证的每个输入添加细节。因此，我有这个：

```
<input type="text" name="fn" value="" class="required" title="Please enter your first name." id="fn0">
<input type="text" name="ln" value="" class="required" title="Please enter your last name." id="ln1">
<input type="text" name="em" value="" class="{validate:{required:true, email:true, messages:{required:'Please enter your email address.', email:'Please enter a valid email address.'}}}" id="em2"> 
```

这些中的每一个都有自己的标签，我已经省略了。

我的 CSS 设置如下：

```
label.error {
    color: red;
    font-weight: bold;
} 
```

当在所有三个字段都空白的情况下单击提交后在表单上时，名字和姓氏按预期显示红色错误消息（`Please enter your first name.`和`Please enter your last name.`分别。但是，电子邮件没有出现错误消息。如果我输入了格式无效的电子邮件地址，我仍然没有收到任何消息我已经用谷歌搜索了一段时间并阅读了文档，但我似乎无法确定这可能失败的地方。

谢谢

**注意：**为了简单起见，从我的源代码中编辑了 ID 和名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T11:35:13.943

您可能只需要将类设置为“必需的电子邮件”而不是当前的验证选项配置。这是适用于我的修改后的演示代码：

```
<input type="text" name="fn" value="" class="required" title="Please enter your first name." id="fn0">
<input type="text" name="ln" value="" class="required" title="Please enter your last name." id="ln1">
<input type="text" name="em" value="" class="required email" id="em2"> 
```

javascript 和 css 保持不变。

```
<script type="text/javascript">
$(document).ready(function() {
    $("#form").validate({meta: "validate"});
});
</script>
<style type="text/css" media="screen">
    label.error {
    color: red;
    font-weight: bold;
}
</style> 
```

为表单字段设置的每个类运行验证规则，并且将显示每个规则的标准错误。在此示例中，首先运行“必需”规则并显示错误消息“此字段是必需的”，一旦该字段不为空，“电子邮件”验证规则将运行，直到字段值与规则测试的电子邮件格式匹配。

如果您想对错误消息进行更多控制，可以在“验证”函数调用中传递更多配置，如下所示：

```
$("#form").validate({
       rules: {
         fn: "required",
         ln: "required",
         em: {
           required: true,
           email: true
         }
       },
       messages: {
         fn: "Please specify your first name",
         ln: "Please specify your last name",
         em: {
           required: "We need your email address to contact you",
           email: "Your email address must be in the format of name@domain.com"
         }
       }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T06:40:25.803

我以前有使用过这个插件的经验。据我所知，试试这个，

```
<script id="demo" type="text/javascript">
jQuery(document).ready(function($) {
    var validator = $("#your_form_id").validate({
        rules: {
            fn: "required",
            ln: "required",
            em: {
                required: true,
                email: true,
            },
        },
        messages: {
            fn: "Please enter your first name.",
            ln: "Please enter your last name.",
            em: {
                required: "Please enter your email address.",
                email: "Please enter a valid email address.",
            },
        },
        errorPlacement: function(error, element) {
                error.appendTo( element.parent().next() );
        },
        success: function(label) {
            label.html("OK").addClass("checked");
        }
    });
});
</script> 
```

在你的 HTML 中；

```
<input type="text" name="fn" value="" class="required" title="Please enter your first name." id="fn"><span class="status"></span><br> 
<input type="text" name="ln" value="" class="required" title="Please enter your last name." id="ln"><span class="status"></span><br>
<input type="text" name="em" value="" class="required" id="em"><span class="status"></span><br> 
```

`<span class="status">`这将在相应的输入元素附近显示错误消息。还可以使用 CSS 设置您的`success`和`error`消息的样式；

```
#your_form_id label.error {
  background:url("error.png") no-repeat 0px 0px;
  color: #CC0000;
}
#your_form_id label.checked {
  background:url("checked.png") no-repeat 0px 0px;
  color: #008000;
}
#your_form_id .success_msg {
  color: #008000;
} 
```

如果你仍然想使用`Meta`，下面是完整的代码，对我来说很好

```
<head>
<script src="jquery-1.6.1.js" type="text/javascript"></script>
<script src="jquery.validate.js" type="text/javascript"></script>
<script src="jquery.metadata.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("#commentForm").validate({meta: "validate"});
});
</script>
</head>
<body>
<form id="commentForm" method="post" action="test.php">
<input id="fn0" type="text" name="fn" value="" class="required" title="Please enter your first name."><br />
<input id="ln1" type="text" name="ln" value="" class="required" title="Please enter your last name."><br />
<input id="em2" type="text" name="em" value="" class="{validate:{required:true, email:true, messages:{required:'Please enter your email address', email:'Please enter a valid email address'}}}"/><br />
<input class="submit" type="submit" value="Submit"/>
</form>
</body> 
```

**希望这可以帮助。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:59:02.253

Meta could be used with validation methods that are already exist, as you correctly do for Firstname and Lastname fields. To add your own validation method use something like this:

```
$.validator.addMethod('own_method_name', function(value, element){
    var matches = value.match(/[ a-z0-9?%-]+/gi);
    return matches.length > 0 && matches[0] == value;
}, 'Default error message'); 
```

And:

```
<input type="text" name="em" value="" class="required email own_method_name" id="em2"> 
```

**NOTE**: in this case (multiple rules through element's meta) you lose an ability to specify your own error messages and can use only default ones.

# google-chrome - Sencha touch 2 - Chrome 启动时出现空白白屏

> ID：11921232
> 
> 赞同：1
> 
> 时间：2012-08-12T09:43:20.327
> 
> 标签：google-chrome, sencha-touch, sencha-touch-2

我正在尝试在 aptana studio 3 上使用 Sencha touch 2 创建一个 MVC“Notes”应用程序，我只创建了主视图和一个控制器，但是当我使用 chrome 对其进行测试时，它显示的只是一个空白屏幕。有什么帮助吗？

这是我的代码：主视图：

```
Ext.define("NotesApp.view.NotesListContainer", {
     extend: "Ext.Container",
     config: {
         fullscreen:true,
          items: [{
              xtype: "toolbar",
              docked: "top",
              title: "My Notes",
              items: [{
                  xtype: "spacer"
              }, {
                  xtype: "button",
                  text: "New",
                  ui: "action",
                  id: "new-note-btn"
              }]
          }]
     }
}); 
```

控制器：Notes.js：

```
Ext.define('NotesApp.app.controller.Notes',{
     extend:'Ext.app.Controller',
     config:{
          refs:
              {
                     newNoteBtn:'#new-note-btn'
              },
              control:
                 {
                     newNoteBtn: {
                            tap: 'onNewNote'
                     }
                 }
     },
     onNewNote:function()
           {
              console.log("onNewNote fn");
           }
}); 
```

应用程序.js：

```
Ext.application({
    name: "NotesApp",
    controllers: ["Notes"],
    views: ["NotesListContainer"],

    launch: function () {
           console.log("fff");
           //debugger;
           var notesListContainer = Ext.create("NotesApp.view.NotesListContainer");
           Ext.Viewport.add(notesListContainer);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-28T05:23:00.623

最近 Chrome（43 版）出现了一些问题，导致 chrome 和 android 出现白屏。您可以尝试覆盖 Ext.util.PaintMonitor 以返回[此处](http://codesmith.in/sencha-overflow-error-chrome-android/)指定的 Ext.util.PaintMonitor.CssAnimation 的新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:45:42.713

不确定，但如果你定义

```
Ext.define("NotesApp.view.NotesListContainer", {
extend: "Ext.Panel", 
```

你必须确定。如果不在这里发布您的**index.html**

干杯，奥列格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T18:18:48.380

H，请只有你变成`Ext.Application`

```
views: ["NotesListContainer"], 
```

至，

```
requires: ['NotesApp.view.NotesListContainer'], 
```

**希望这些有所帮助。:)**

# visual-studio - MVC 4 Web API 模板 - 可以删除的内容

> ID：11921233
> 
> 赞同：3
> 
> 时间：2012-08-12T09:43:30.853
> 
> 标签：visual-studio, templates, rest, asp.net-mvc-4, asp.net-web-api

使用 VS2010，新建一个 MVC 4 Web API 项目。只是想知道，是否可以删除 Script 文件夹中的 .js 文件，或者它们是否与下面的魔法有关？Views 文件夹中的那些 cshtml- 文件怎么样，我看不出它们对于 REST 服务是必需的，或者再次，它们是底层技术的一部分。我的猜测，它可以安全地删除 - 但只是为了确定......

额外的问题（当我在这里时）：关于单元测试和集成测试 REST 服务的建议，有吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T14:10:10.900

如果您的项目**只**公开了一系列 WebAPI 控制器，那么这意味着您的项目永远不会提供实际的基于 HTML 的内容。因此，您可以安全地删除与该内容相关的所有文件，例如：

*   HTML 文件 (.cshtml)
*   JavaScript 文件 (.js)
*   CSS 样式表 (.css)
*   图片（.jpg、.png、.gif）

# jquery - jquery each 不循环遍历所有元素？

> ID：11921239
> 
> 赞同：2
> 
> 时间：2012-08-12T09:44:30.613
> 
> 标签：jquery

编辑：此代码工作正常，忽略了 div 堆叠在彼此之上，被视觉反馈愚弄:(对不起。

我一直在 stackOverflow 上搜索每个问题并阅读 jquery 文档，但我不知道为什么这个片段只在其中一个 div 中放置“bar”。我在这里想念什么？所有示例似乎都以这种方式工作：

```
<div class="foo"></div>
<div class="foo"></div>

$(".foo").each(
  function() {
    $(this).append("bar");
  }
); 
```

我选择所有 foo 类元素，对它们进行迭代，在每个函数中这是当前元素对吗？似乎不是……我做错了什么？

我也试过：

`function(index, element) {$(element)`等相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T09:48:18.263

您需要提供一个带有索引和元素参数的函数，这将允许您遍历 jQuery 选择的对象。

您只能在文档准备好后执行此操作，因此请确保它已准备就绪，或者在准备就绪时打包

```
 <div class="foo"></div>
 <div class="foo"></div>

<script type="text/javascript">
$(document).ready(function(){

    $(".foo").each(function(index, element) {
        $(element).append("bar");
      }
    );
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:58:41.383

如前所述，您的代码和备用短版本（如`pimvdb`问题评论中所述）工作得非常好。

见[**演示**](http://jsfiddle.net/u3F7X/)

您很可能遇到了代码不在 a 中的问题，`$(document).ready(function(){});`或者您对 jQuery 库的引用丢失了。

[**在.ready()**](http://api.jquery.com/ready/)中放置代码可确保在执行脚本之前 DOM 已完全加载（图像除外）。

# mapreduce - Riak 简单的 SearchMapReduce 抛出 IOException

> ID：11921245
> 
> 赞同：0
> 
> 时间：2012-08-12T09:45:12.887
> 
> 标签：mapreduce, riak

我正在尝试使用简单的过滤器获取 Raik 对象。在将对象存储到存储桶之前，我已启用对存储桶的搜索，并尝试以下操作：

> MapReduceResult 结果 = riakClient. mapReduce("serviceProvider", "name:oved1")。addMapPhase(new NamedJSFunction("Riak.mapValuesJson"), true).execute();

我得到这个例外：

> com.basho.riak.client.RiakException: java.io.IOException: {"error":"map_reduce_error"} at com.basho.riak.client.query.MapReduce.execute(MapReduce.java:80) at com.att .cso.omss.datastore.riak.controllers.RiakBaseController.getAllServiceProvider(RiakBaseController.java:339) 在 com.att.cso.omss.datastore.riak.App.serviceProviderTests(App.java:64) 在 com.att.cso .omss.datastore.riak.App.main(App.java:38) 引起：java.io.IOException: {"error":"map_reduce_error"} at com.basho.riak.client.raw.http.ConversionUtil。在 com.basho.riak.client.raw.http.HTTPClientAdapter.mapReduce(HTTPClientAdapter.java:386) 在 com.basho.riak.client.query.MapReduce.execute(MapReduce.java: 78) ... 还有 3 个

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:21:59.293

能够解决这个问题...

显然，在存储将来需要搜索的对象之前，您需要做两件事：

1.  在 app.config (/etc/riak) 中启用搜索：

> {riak_search, [{启用, true}]}

1.  在存储桶上启用搜索：

> Bucket bucket = riakClient.createBucket(bucketName).enableForSearch().execute();

之后，这将返回值：

> ```
>  MapReduceResult result = riakClient.
>             mapReduce(bucketName, "name:9"). 
>             addMapPhase(new NamedJSFunction("Riak.mapValuesJson"), true).
>             execute(); 
> ```

# xaml - HeaderedItemsControl 的 Metro 等效项

> ID：11921246
> 
> 赞同：2
> 
> 时间：2012-08-12T09:45:24.567
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml

将 WPF 应用程序从 .Net 4.0 转换为 Metro。

它`HeaderedItemsControl`在各个地方使用。

我无法在 Metro（Windows.UI.Xaml 命名空间）中找到该控件或替代候选者

那么在 Metro 中推荐使用什么控件来提供以下功能`HeaderedItemsControl`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T20:33:21.330

您可以通过从 ItemsControl 派生并添加一些简单的依赖属性来轻松创建一个。[您可以在此处查看](http://msdn.microsoft.com/en-us/library/system.windows.controls.headereditemscontrol_properties)WPF 版本中存在哪些属性。您可能不需要所有这些，但快速浏览一下我可以看到一个 Header 属性，它只是一个对象类型。您可以在 HeaderedItemsControl 的 ControlTemplate 中放置一个 ContentPresenter，并使用 TemplateBinding 将其内容绑定到 HeaderProperty。然后将 HeaderTemplate 绑定到 ContentPresenter 的 ContentTemplate 等。

不确定将 WPF XAML 代码直接移植到 WinRT 有多大用处。您只是在代码兼容性方面自找麻烦，而且还将可能由桌面设计的 UI 移植到更加以触控为中心的世界。

# objective-c - 处理触摸事件和手势识别器

> ID：11921252
> 
> 赞同：2
> 
> 时间：2012-08-12T09:47:12.853
> 
> 标签：objective-c, uiswipegesturerecognizer

我使用`UISwipeGestureRecognizer`和我的覆盖

```
-(void)touchesBegan...,-(void)touchesEnded...,-(void)touchesMoved... methods. 
```

似乎 touchesBegan 和 touchesMoved 一直跟踪触摸，直到识别到 Swipe Gesture 并且不调用 touchesEnded（与 touchesCancelled 相同）。但是我需要滑动手势识别器和 touchesEnded 来完成这项工作，我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T10:50:13.150

**首先，将滑动手势识别器**从库拖放到视图中。

![ss](../Images/c0e48bfb3fceaa0d911f3a95abe6d29c.png)

**然后您在 View 中**检查取消的项目。

![ss](../Images/3e43d53e0d095bccf0d55c2aecc9224e.png)

编写代码以响应滑动手势。

```
- (IBAction)swipe:(id)sender {
    v.backgroundColor = [UIColor blueColor];
} 
```

然后，编写触摸委托方法。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch* touch = [touches anyObject];    
    CGPoint pt = [touch locationInView:self];
    layer.frame = CGRectMake(pt.x, pt.y, 100, 100);
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch* touch = [touches anyObject];    
    CGPoint pt = [touch locationInView:self];
    layer.frame = CGRectMake(pt.x, pt.y, 100, 100);
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    layer.frame = CGRectMake(0, 0, 100, 100);
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    self.backgroundColor = [UIColor redColor];
} 
```

现在可以不取消移动图像，并且可以滑动屏幕设置颜色为蓝色（滑动手势识别成功）。你都可以。并且，当触摸结束时，窗口颜色变为红色。

![ss](../Images/60095ea3bde13ce7763c049b0cd773ef.png)

您可以下载此示例项目并运行它：

[https://github.com/weed/p120812_TouchAndGesture](https://github.com/weed/p120812_TouchAndGesture)

# java - 树：持久化时如何识别/标记根对象？

> ID：11921256
> 
> 赞同：1
> 
> 时间：2012-08-12T09:47:22.447
> 
> 标签：java, sql, tree, rdbms

您将如何保留自定义树结构的根节点，以便可以使用简单的`SELECT`.

**伪代码**

```
class Node {
    Long id;
    String label;
    Node parent;
    List<Node> children;
} 
```

编辑：表格可能如下。随时提出改进建议。

```
CREATE TABLE NODES(
    ID INTEGER NOT NULL UNIQUE,
    LABEL VARCHAR(255)
);

CREATE TABLE PARENTS_CHILDREN(
    PARENT_ID INTEGER NOT NULL,
    CHILD_ID INTEGER NOT NULL
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:55:01.510

您可以使用邻接列表：

```
node   parent
1      NULL
2      1
3      1
4      2
5      NULL
6      5 
```

可以使用 找到根节点`WHERE parent IS NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:05:48.490

如果每个子节点最多有一个父节点，则无需在单独的表中对关系进行建模。此外，为了以更慢更改根为代价来更快地加载树，请将根节点的 ID 存储在每一行中。这允许您在一个快速查询中加载树的所有节点并在客户端上构建树。

```
CREATE TABLE NODES(
    ID          INTEGER NOT NULL UNIQUE,
    ROOT_ID     INTEGER NOT NULL,
    PARENT_ID   INTEGER,
    LABEL       VARCHAR(255)
); 
```

# c# - 使用 C# 创建 Facebook 应用以在墙上发布

> ID：11921269
> 
> 赞同：-4
> 
> 时间：2012-08-12T09:49:53.147
> 
> 标签：c#, facebook

有没有一种方法可以创建一个允许您使用 C# 在某人的墙上发帖的 Facebook 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:53:50.307

就在这里。（不要投票 - 我完美地回答了这个问题）

# android - 生命周期和活动堆栈

> ID：11921273
> 
> 赞同：3
> 
> 时间：2012-08-12T09:51:01.760
> 
> 标签：android, android-activity, android-ui, android-notifications, android-lifecycle

在应用程序中，活动堆叠如下：A -> B -> C -> D -> E。如果我收到特定通知并单击它，`Activity`则启动 E。如果我然后单击返回（手机上的按钮或操作栏上的按钮），应用程序将退出。

在这种情况下，我如何过渡到`Activity`D，然后再通过 C、B 和 A？

我的后退按钮代码：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        finish();
        break;
    }
    return true;
} 
```

正常启动应用程序时一切正常。问题是何时`Activity`从通知开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:39:51.090

Android 具有内置的功能，并且已经有据可查。首先，您应该查看[TaskStackBuilder](http://developer.android.com/reference/android/app/TaskStackBuilder.html)类。它是在 JellyBean 中引入的，但已经包含在[支持库](http://developer.android.com/reference/android/support/v4/app/TaskStackBuilder.html)中，您可以使用它来构建您需要的合成 TaskStack。文档摘要如下：

> 当从一个任务堆栈跨到另一个后 Android 3.0 时，应用程序应该为新任务合成一个返回堆栈/历史记录，以便用户可以通过重复按下返回键导航出新任务并返回启动器。后退键不应跨任务堆栈导航。
> 
> TaskStackBuilder 提供了一种遵循跨任务导航的正确约定的方法。

你如何构建它取决于你的应用程序中活动的关系，但是[任务和返回堆栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)开发人员指南是一个很好的阅读指南，可以帮助你做出决定，就像[导航](http://developer.android.com/design/patterns/navigation.html)设计指南一样，如果这就是全部对你来说是新的。

您可以在 Android 开发者网站的培训部分的[实施有效导航](http://developer.android.com/training/implementing-navigation/index.html)课程中找到一些代码示例。

顺便提一下， 上的按钮`ActionBar`被称为*Up*。尽管它有时与后退按钮具有相同的功能，但两者并不相同（我认为这就是您正在谈论的那个 ;-) 。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:44:48.340

我认为您可以通过将意图从活动 E 发送到活动 D 来解决您的问题，依此类推。因此，您应该覆盖该方法

```
onBackPressed() 
```

当您单击后退按钮时会调用它。

# python - Scipy 安装到 Mountain Lion 上的错误位置？

> ID：11921275
> 
> 赞同：4
> 
> 时间：2012-08-12T09:51:11.687
> 
> 标签：python, scipy

尝试在 Mountain Lion 上安装 scipy，除了：

sudo pip install -e git+https://github.com/scipy/scipy#egg=scipy-dev

我相信它安装了 scipy 的开发版本。出于某种原因，它`src`在我当前的文件夹中留下了一个目录，其中包含一个包含所有 scipy 文件`pip-delete-this-directory.txt`的目录。`scipy`我可以从任何地方导入 scipy，但删除此文件夹会完全删除 scipy。这是怎么回事？

如果我尝试使用简单的 sudo pip install scipy 进行安装，我会得到以下信息

```
/System/Library/Frameworks/vecLib.framework/Headers/vecLib.h:22:4: error: "<vecLib/vecLib.h> is deprecated.  Please #include <Accelerate/Accelerate.h> and link to Accelerate.framework."

                #error "<vecLib/vecLib.h> is deprecated.  Please #include <Accelerate/Accelerate.h> and link to Accelerate.framework."

                 ^

1 error generated.

error: Command "clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -Iscipy/sparse/linalg/eigen/arpack/ARPACK/SRC -I/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include -c scipy/sparse/linalg/eigen/arpack/ARPACK/FWRAPPERS/veclib_cabi_c.c -o build/temp.macosx-10.8-intel-2.7/scipy/sparse/linalg/eigen/arpack/ARPACK/FWRAPPERS/veclib_cabi_c.o" failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:28:38.167

从`pip`文档页面：

> 编辑模式包通常安装在站点包下，但是当您进行更改时，直接从签出的源代码树运行包更有意义。“可编辑”安装会在站点包中创建一个 .pth 文件，该文件扩展 Python 的导入路径以查找包：
> 
> ```
> $ pip install -e path/to/SomePackage 
> ```

所以这意味着你可以通过运行简单地解决你的问题：

```
 $ sudo mv src/scipy/scipy /Library/Python/2.7/site-packages/ 
```

然后，如果您想干净，可以编辑文件以删除由添加的行`pip`：

```
 $ sudo vim /Library/Python/2.7/site-packages/easy-install.pth 
```

# android - Android 4.x：检测鼠标或触摸屏模式

> ID：11921278
> 
> 赞同：3
> 
> 时间：2012-08-12T09:51:40.043
> 
> 标签：android, mouse, android-4.0-ice-cream-sandwich, touchscreen, android-4.2-jelly-bean

有一个 API 可以检测 Android 4.x（ICS 或 JB）是否处于触摸屏或鼠标模式。Android 实际上可以从一种模式切换到另一种模式：如果您处于鼠标模式（显示光标）并且您按下触摸屏，鼠标将消失。在 apk 应用程序中，我想查询鼠标与触摸屏的状态。此功能仅适用于 > 4.0。有人知道这个API吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:46:29.460

正如 nandeesh 在评论部分所建议的那样，“isintouchmode”是这个问题的答案。

# performance - 基于 Web 的框架在哪些方面表现良好？

> ID：11921279
> 
> 赞同：0
> 
> 时间：2012-08-12T09:51:50.320
> 
> 标签：performance, frameworks

提前致谢。

在其他地方我问了同样的问题，但关于可扩展性。请不要混淆这两个术语。我真的很想了解在评估框架是否可以接受时应该查看哪些特定参数。

我的意思是参数，比如不会因为上面的 ORM 写得不太好而过度查询数据库以完成简单的任务，等等……请让我们尝试在不深入研究特定技术的情况下回答这个问题。

最后，我们假设底层硬件是任何能让你表现良好的硬件，也就是说，没有硬件瓶颈。我不想要使用大炮杀死蚊子的软件:)。

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:07:16.103

> 我的意思是参数，比如不会因为上面的 ORM 写得不太好而过度查询数据库以完成简单的任务，等等……请让我们尝试在不深入研究特定技术的情况下回答这个问题。

成功的 ORM 技术并没有表现不佳。但是，如果您的 Web 应用程序非常简单（您没有定义问题的范围），那么引入一个健壮的 ORM 将是矫枉过正。而是自己做一个 DAO 模式。

最后，您始终可以自己进行测试测量，以评估性能是否适合您

# .htaccess - .htaccess - 尾部斜杠中断重定向

> ID：11921280
> 
> 赞同：2
> 
> 时间：2012-08-12T09:52:03.553
> 
> 标签：.htaccess

我为我正在处理的一个小项目创建了一个剥离框架，一切都很好，除了一个小问题。

我有这样的文件夹结构：

```
root
  - app
    - controller
    - views
    - webroot
      - css
      - js
      - img
      - misc
  - config
  - data
  - lib 
```

在根文件夹中，我有一个`.htaccess`将请求重定向到`webroot`文件夹的文件：

```
RewriteEngine on
RewriteRule     ^$       app/webroot/   [L]
RewriteRule     (.*)    app/webroot/$1  [L] 
```

在那里，我有另一个`.htaccess`文件，它检查请求是否是对文件或文件夹的直接请求，如果不是，它将传递到以下`index.php`文件`webroot`：

```
RewriteEngine On
RewriteCond     %{REQUEST_FILENAME} !-d
RewriteCond     %{REQUEST_FILENAME} !-f
RewriteCond     %{REQUEST_FILENAME} !favicon.ico$
RewriteRule     ^(.*)$              index.php?uri=$1        [QSA,L] 
```

正如我所说，一切正常，但有一个小问题：

当您请求`http://example.com/misc`时，它会将地址栏中的地址更改为`http://example.com/app/webroot/misc/`.

当您请求时`http://example.com/misc/`，这不会发生！

主要的一点是，为了项目的目的，人们需要直接访问“misc”文件夹中的文件，那里有一个`index.html`文件，这意味着人们去`http://example.com/misc`理想情况下不会重写 URL，它只会去文件。我这样做的原因对这个问题并不重要，所以在任何人说“你不应该这样设置你的文件夹”之前，我已经尝试了许多不同的方法，为了项目的目的，这是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:53:14.963

这是 mod_dir 做的事情，所以如果它认为请求是针对目录但缺少尾部斜杠，它将 301 使用尾部斜杠重定向浏览器。不幸的是，当这种情况与内部 URI 重写一起发生时，重写的 URI 会在 301 重定向中混淆，因此会暴露。您必须进行抢先式重定向，以便 mod_dir 不会做它的事情。

尝试在`app/webroot/`规则之前添加它

```
RewriteCond %{DOCUMENT_ROOT}/app/webroot%{REQUEST_URI} -d
RewriteRule ^(.*[^/])$ /$1/ [R=301,L] 
```

# php - dhtmlxScheduler 的垂直线

> ID：11921285
> 
> 赞同：1
> 
> 时间：2012-08-12T09:52:59.250
> 
> 标签：php, javascript, css, dhtmlx

我正在使用[dhtmlxScheduler library](http://www.dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml)开发调度程序。我需要添加显示当前时间的垂直线。它的位置应该每分钟更新一次。我想知道以前是否有人做过类似的事情。我搜索了可用的解决方案，但我还没有找到任何示例。那么，如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T09:40:07.957

它可以通过

```
scheduler.config.mark_now = true; 
```

[http://docs.dhtmlx.com/scheduler/api__scheduler_mark_now_config.html](http://docs.dhtmlx.com/scheduler/api__scheduler_mark_now_config.html)

您需要包含 ext/dhtmlxscheduler_limit.js 以启用上述选项。

# php - goto 的解决方法

> ID：11921288
> 
> 赞同：0
> 
> 时间：2012-08-12T09:53:53.650
> 
> 标签：php, goto

当我需要检查 array2 是否具有来自 array1 的某个值（随机生成）时，我遇到了这种情况。到目前为止，我虽然

```
redo : $id=mt_rand(0,count(array1));
foreach($array2 as $arr)
{
    if($arr[0]==$id) goto redo;
}
//Some actions if randomly generated value from array1 wasn't found in array2 
```

但我真的不想使用 goto。我很确定有一些简单的解决方案可以在没有 goto 的情况下执行此操作，但我就是想不出它 D：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:05:53.513

您可以使用数字参数`continue`： [http ://www.php.net/manual/en/control-structures.continue.php](http://www.php.net/manual/en/control-structures.continue.php)

```
while(true){
  $id = mt_rand(0,count(array1);

  foreach( $array2 as $arr )
    // restart the outer while loop if $id found
    if( $arr[0] == $id ) continue 2;

  // $id not found in array, leave the while loop ...
  break;
};

// ... and do the action 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:07:03.613

试试这个

```
$flag=true;
 do{
      $id=mt_rand(0,count(array1);

      foreach( $array2 as $arr )
        if( $arr[0] == $id ) break;

      // do it and set flag to false when you need to exit;

    } while($flag); 
```

# php - Laravel 用 Eloquent 问题更新数据库？

> ID：11921289
> 
> 赞同：3
> 
> 时间：2012-08-12T09:54:00.493
> 
> 标签：php, validation, laravel

我似乎对 eloquent 的验证器方法返回了它应该返回的相反的问题。

这是我的验证电话，它应该失败，因为电子邮件是重复的，名字只有 1 个字符，而最低要求是 2。

```
// Handle the submission of changed user details.
public function put_settings()
{
    $id = Input::get('id');

    $validation = Account::validate(Input::all());

    if($validation->fails())
    {
        return Redirect::to_route('settings')->with_errors($validation)->with_input();
    }
    else
    {
        Account::update($id, array(
            'first_name' => Input::get('first_name'),
            'last_name'  => Input::get('last_name'),
            'email'      => Input::get('email')
        ));

        return Redirect::to_route('settings');
    }
} 
```

这是我的带有验证规则的验证器方法（位于我的模型中）：

```
public static function validate($data)
{
    $rules = array(
        'first_name' => 'required|min:2|max:80',
        'last_name'  => 'required|min:2|max:80',
        'email'      => 'required|min:5|max:180|unique:users',
    );

    return Validator::make($data, $rules);
} 
```

为什么这会更新我的数据库，即使它在验证时失败。尝试使用 failed() 和 pass() 方法，它们似乎在做与他们应该做的相反的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:30:27.180

您是否尝试过调试输入并查看实际提交的内容？

此外，您可能需要检查**auth.php**以查看您是否已选择**电子邮件**作为您**用户**的用户名。这样，如果您打电话`unique:users`，那么`Laravel`将查看**电子邮件列**而不是**用户名列**。

# sharepoint - 上传文件时，sharepoint 2010 文档库事件接收器项目添加事件

> ID：11921290
> 
> 赞同：2
> 
> 时间：2012-08-12T09:54:10.973
> 
> 标签：sharepoint

使用事件上传文件时，文档库中的 SharePoint 2010 使用事件接收器`itemadded`。如果获取文件的属性，它将更改，因为文件在文件属性的自定义选项卡中包含相同的属性。所以`SPListItem`属性不会来，所以在sharepoint上传文件时如何清除文件自定义属性请帮助我。

我设置`ItemAddedCol`为默认值设置为`false`，但我将显示为 true。问题是我正在上传一个扩展名为*.ppt*的文件。文件属性并转到自定义选项卡集添加一些文件，`ItemAddedCol`如`File Size`. 所以这些值是如何在项目添加事件中清除这些自定义字段的。

```
string size = Convert.ToInt32(listitem["File Size"]);
statusupdate = Convert.ToString(listitem["ItemAddedCol"]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:17:42.430

我不确定这是否是您想要的，但是当您将文件上传到文档库时，设置自定义属性会调用***项目更新***事件。您应该能够为`ItemUpdated`（或`ItemUpdating`）事件编写事件接收器，并在此处清除所需的属性。

所以代码看起来像这样：

```
public virtual void ItemUpdated(SPItemEventProperties properties, bool isCheckIn)
{
    try
    {
        this.EventFiringEnabled = false;

        SPListItem listItem = properties.ListItem;

        //clear value in your custom column
        listItem["myCustomColumnName"] = null;

        listItem.Update(); //or listItem.SystemUpdate()
    }
    finally
    {
        this,EventFiringEnabled = true;
    }
} 
```

我还没有测试过这段代码，所以如果你在运行它时有任何问题，请告诉我。

# websocket - 我们可以使用 websockets 发送 Remote Key 事件吗？

> ID：11921292
> 
> 赞同：1
> 
> 时间：2012-08-12T09:54:31.730
> 
> 标签：websocket, socket.io

我可以使用 websocket 跨浏览器模拟键盘吗？我正在寻找模拟箭头键和 F11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T19:21:31.237

多年来，关键事件已在浏览器中可用

有关支持列表，请参阅 [http://www.quirksmode.org/dom/events/keys.html](http://www.quirksmode.org/dom/events/keys.html)

并在此处使用 jQuery 中的按键事件 [是否可以以编程方式模拟按键事件？](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)

Websockets 是较新的技术，并非在所有浏览器中都可用，但如果需要，您可以在 Socket.io 等旧浏览器上使用模拟 Web 套接字的库来进行双向实时消息传递。

[http://socket.io/](http://socket.io/)

客户端上的伪代码如下所示：

```
(function ($) {
    function simulateKeyPress(character) {
      jQuery.event.trigger({ type : 'keypress', which : character.charCodeAt(0) });
    }

    function onkeypress(key, ts) {
       var act = {"timestamp" : ts, "key" : key};
       socketIoClient.emit("message", act);
    }

    $('body').keypress(function(e) {
       // Send date in case you want to order/buffer on the server
      onkeypress(e.which, new Date());
    });

    var socketIoClient = io.connect(null, {
       'port': '#socketIoPort#'
        , 'rememberTransport': true
        , 'transports': ['websocket', 'xhr-polling'] // put here all the transports you need
    });

    // Handle the key press events
    socketIoClient.on('message', function(json) {
      var act = JSON.parse(json);
      if (act) {
      // Not sure what the keys will do but if you just want to echo them
       simulateKeyPress(act.key);
     }
    });
})(jQuery); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:55:17.637

当然可以！

1.  打开到 Websocket 服务器的连接并在每个 jQuery keyUp-Event 上向它发送请求！
2.  在 websocket 端，只需将 Event throw 传递给您的其他浏览器连接。
3.  在另一个浏览器上只模拟 KeyPress`simulateKeyPress(e);`

# c++ - 从列表中的对象更改变量（c ++）

> ID：11921295
> 
> 赞同：0
> 
> 时间：2012-08-12T09:54:56.107
> 
> 标签：c++, list, variables

我想更改例如从列表中的对象设置“Voornaam”。但是由于某种原因，如果我用另一个函数显示列表中的对象，它不会改变。

我创建了一个函数“showWielrennerGegevens(*iter);”，这将显示该对象的所有变量。如果运行此功能，那么我可以看到更改。但如果我运行该函数以在列表中显示对象，则不会

请帮忙

```
void Interface::wijzigPersoneelslid(Wielerploeg& wielerploegOB){

int input,inputWielrennerID,ingavekeuze;
string ingaveString;

int teller=0;

cout << "Wat voor een type wil je wijzigen?" << endl;
cout << "1 - Wielrenner" << endl;
cout << "2 - Dokter" << endl;
cout << "3 - Mecanicien" << endl;
cin >> input;

switch(input)
{
    case 1:{//Wielrenner
        cout << "Wielrenner" << endl;

        list<Wielrenner> wielrennerslist = wielerploegOB.getWielrennersList();
        cout << "Welke wielrenner wil je wijzigen?" << endl;

        // Alle objecten afprinten in de lijst
        for (list<Wielrenner>::iterator it = wielrennerslist.begin(); it != wielrennerslist.end(); it++){
            Wielrenner wielrennerOB = *it;
            cout << teller << " - " << wielrennerOB.getVoornaam() << " " << wielrennerOB.getAchternaam() << endl;
            teller++;
        }
        cin >> inputWielrennerID;

        // Naar het object gaan
        int N = inputWielrennerID; /* index of the element you want to retrieve */
        if (wielrennerslist.size() > N){
            list<Wielrenner>::iterator iter = wielrennerslist.begin();
            std::advance(iter, N);

            // 'it' points to the element at index 'N'

            Wielrenner wielrennerOB2 = *iter;
            //Wielrenner* wielrennerOB2 = *iter;

            cout << "\n De geselecteerde wielrenner is: " << endl;
            cout << " - " << wielrennerOB2.getVoornaam() << wielrennerOB2.getAchternaam() << endl;

            cout << "\n Wat wil je aanpassen?" << endl;
            cout << "1 - Voornaam" << endl;
            cout << "2 - Achternaam" << endl;
            cout << "3 - Telefoon" << endl;
            cin >> ingavekeuze;
            switch(ingavekeuze)                                                                                                                                                 
            {
                case 1:{ // voornaam
                    cout << "Ingave voornaam: ";
                    cin >> ingaveString;
                    //wielrennerOB2.setVoornaam(ingaveString);
                    (*iter).setVoornaam(ingaveString);

                    cout << "object " << endl;
                    showWielrennerGegevens(*iter);
                    break;
                }
                case 2:{ // achternaam
                    cout << "Ingave achternaam: ";
                    cin >> ingaveString;
                    wielrennerOB2.setAchternaam(ingaveString);

                    cout << "object " << endl;
                    showWielrennerGegevens(wielrennerOB2);
                    break;
                }
                case 3:{ // telefoon
                    cout << "Ingave telefoon: ";
                    cin >> ingaveString;
                    wielrennerOB2.setTelefoon(ingaveString);
                    break;
                }
                default:{
                    cout << "Switch Default waarde - wielrenner wijzig" << endl;
                }
            }
        }// if statement
        break;
    }// case 1
    case 2:{ // dokter
        cout << "Dokter" << endl;
        break;
    }
    default:{
        cout << "Switch Default waarde - Interface" << endl;
    }
} // switch 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:01:26.287

我认为发生这种情况是因为您制作了您的清单的副本。您正在更改副本而不是原件。

```
list<Wielrenner> wielrennerslist = wielerploegOB.getWielrennersList(); 
```

此行制作列表的副本。

接下来要做什么就更难说了。也许你需要这样做？

```
list<Wielrenner> wielrennerslist = wielerploegOB.getWielrennersList();
...
// make change to wielrennerslist 
...
// copy changed list back to original
wielerploegOB.setWielrennersList(wielrennerslist); 
```

这只有在你有一个方法 setWielrennersList 时才有效，如果没有，那么也许你应该写一个。

# windows-8 - 自定义数据 Windows 8 Metro 应用程序

> ID：11921297
> 
> 赞同：0
> 
> 时间：2012-08-12T09:55:16.640
> 
> 标签：windows-8, microsoft-metro, windows-runtime

对不起，如果这是一件容易的事情，我很容易错过，但我是第一个承认我不是世界上最好的程序员的人。

我要做的是自定义 VS2012 模板中使用的 SampleDataSource，更具体地说，我希望将 ItemContent 替换为文本文件的内容。

我花了很多时间寻找这个问题的解决方案，但还没有弄清楚，所以最好问问专家。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:18:27.100

查看我的微软技术布道者 Bruno Terkaly 的以下帖子：

[http://blogs.msdn.com/b/brunoterkaly/archive/2012/06/14/how-to-provide-cloud-based-json-data-to-windows-8-metro-grid-applications-part- 2.aspx](http://blogs.msdn.com/b/brunoterkaly/archive/2012/06/14/how-to-provide-cloud-based-json-data-to-windows-8-metro-grid-applications-part-2.aspx)

在博文中，他介绍了 SampleDataSource.cs 文件的结构，该文件为 C#/XAML 应用程序中的几个内置模板提供数据，并在后续博文（链接在本博文顶部）中向您展示如何将现有的 SampleDataSource.cs 替换为通过 HTTP 检索 JSON 数据的版本。

在这两篇文章之间，您可能能够获得足够的主题背景知识来完成您概述的任务。

希望有帮助。

# java - 将组件添加到 JPanel

> ID：11921299
> 
> 赞同：0
> 
> 时间：2012-08-12T09:55:27.953
> 
> 标签：java, swing, jpanel, jlabel, layout-manager

我有一个 JFrame，我在其中调用 Netbeans 生成的 initComponents() 构造函数。它初始化在 Netbean 的设计编辑器中创建的 GUI。之后，我创建一个新的 JLabel 并调用 content.add(label) ，其中 content 是一个可见的 JPanel。接下来我调用 validate()。JLabel 不会出现。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T10:51:30.167

您使用的是什么 LayoutManager？

NetBeans 使用的默认布局管理器是自由格式布局管理器。

它是为表单编辑器设计的，而不是为手动使用而设计的。

由于缺乏约束，您的标签可能会被忽略

# c - C: 如何编写 printf 之类的函数

> ID：11921304
> 
> 赞同：2
> 
> 时间：2012-08-12T09:56:53.127
> 
> 标签：c, variadic-functions

我已经学会了使用库`stdarg.h`来获得具有未知数量参数的功能。这是一个简单的函数如何使用它：

```
void print(int args,...){
    va_list ap;
    va_start(ap, args);
    int i = 0;
    for(i=0; i<args; i++){
        printf("%d\n",va_arg(ap, int));
    }
    va_end(ap);
} 
```

基于上面的代码，我不知道如何`printf` 克服两个主要约束：

**1）固定数量的参数**：意思是，在几乎 vardiac 函数中，您需要包含 args 的数量。但是当我写的时候`printf`，我不必包括这个数字。我认为在`printf`真正使用参数之前，它已经计算了之前的参数数量（通过计算第一个字符串中的数字 % ）。但同样，我认为这个解决方案有点效率不高。它必须经过三个阶段：计算参数的数量，并将这些参数放入堆栈，最后将所有参数放入屏幕。

**2）所有参数必须具有相同的类型：** 正如您在 : 行看到的那样`printf("%d\n",va_arg(ap, int));`。因此，列表中的每个参数都必须具有相同的类型。正如我们所知，这不是 printf 中必须的。您可以将 double 与整数或字符串一起打印。如果我们将所有这些都视为一个字符串，那么这一行应该是错误的，因为语法错误：

```
printf("%d",4); //4 cannot treat by string
printf("%d",'4'); // :)) I think this line is better 
```

请帮我解释一下以上两个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T10:07:23.793

1) 你自己已经回答了这个问题 -`printf`必须解析格式字符串来决定在 va_list 中接受多少个参数。

2）当它解析格式列表时，它将跟踪格式列表中指定的参数的类型，并`var_arg`以适当的类型调用。

另[请参阅](https://stackoverflow.com/a/4867288/8331)- 有趣的东西在`vfprintf()`，这里是链接源，尽管可能有一个更易读（如果效率较低）的[版本](http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/vfprintf.c;h=fc370e8cbc4e9652a2ed377b1c6f2324f15b1bf9;hb=3321010338384ecdc6633a8b032bb0ed6aa9b19a)。

编辑：这里有一个 snprintf 的可移植实现，看起来更具可读性（在此处找到 [为](http://www.ijs.si/software/snprintf/)[snprintf() 寻找 C 源代码](https://stackoverflow.com/questions/6356143/looking-for-c-source-code-for-snprintf)）

# php - PHPMailer 不工作

> ID：11921305
> 
> 赞同：0
> 
> 时间：2012-08-12T09:57:08.883
> 
> 标签：php, phpmailer, hotmail

再会！

我从 Google 代码页下载了 PHPMailer 类：[http](http://code.google.com/a/apache-extras.org/p/phpmailer/) ://code.google.com/a/apache-extras.org/p/phpmailer/ 。我正在运行这个：

```
PHP 5.2.14 (cli) (built: Jul 27 2010 10:49:36)
Copyright (c) 1997-2010 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2010 Zend Technologies 
```

在 Windows 7 机器上，我正在使用以下测试代码：

```
require("PHPMailer_5.2.1/class.phpmailer.php");

$mail = new PHPMailer();  

$mail->IsSMTP();
$mail->Mailer = "smtp";
$mail->Host = "ssl://smtp.live.com";
$mail->Port = 587;
$mail->SMTPAuth = true;
$mail->Username = "some_email@hotmail.nl";
$mail->Password = "password";

$mail->From     = "some_email@hotmail.nl";
$mail->AddAddress("some_other_email@hotmail.nl");  

$mail->Subject  = "Subject";
$mail->Body     = "Hi!";

if(!$mail->Send()) {
echo 'Message was not sent.';
echo 'Mailer error: ' . $mail->ErrorInfo;
} else {
echo 'Message has been sent.'; 
```

我也确定密码和用户名是正确的，但我收到以下错误：

```
Message was not sent.Mailer error: The following From address failed: some_email@hotmail.nl 
```

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:30:48.543

我不使用 live.com，所以我用我的 gmail 帐户测试了你的脚本，它运行良好。您可以确保[为您的 live.com 帐户设置了正确的用户名和密码](http://email.about.com/od/accessinghotmail/f/Windows_Live_Hotmail_SMTP_Settings.htm)。或者你可以尝试设置**$mail->SMTPSecure = 'tls';** 这适用于 gmail：

```
require("PHPMailer_5.2.1/class.phpmailer.php");
$mail = new PHPMailer();  
$mail->IsSMTP();
$mail->Host = "smtp.gmail.com";
$mail->Port = 465;
$mail->SMTPAuth = true;
$mail->SMTPSecure = 'ssl';
$mail->Username = "yourNickname@gmail.com";
$mail->Password = "yourPassword";
$mail->From     = "some_email@hotmail.nl";
$mail->AddAddress("receiver@server.ext");
$mail->Subject  = "Subject";
$mail->Body     = "Hi!";
if(!$mail->Send()) {
    echo 'Message was not sent.';
    echo 'Mailer error: ' . $mail->ErrorInfo;
} else {
    echo 'Message has been sent.';
} 
```

# login - Symfony2：从每个页面登录

> ID：11921309
> 
> 赞同：3
> 
> 时间：2012-08-12T09:57:48.977
> 
> 标签：login, symfony

我有一个**Symfony2** Web 应用程序，它需要用户*登录*才能执行这些有用的操作。在 Symfony 中，您可以放置​​一个指向登录页面的链接，然后由框架处理的安全性完成剩下的工作。您必须在*security.yml*配置文件中定义登录页面的路由。

我想知道是否**有可能**以及**如何**让用户登录网站的每个页面（例如，通过在页面顶部插入登录表单）。这将节省页面加载并且不会打扰用户。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T10:19:43.573

最好的方法是让所有模板扩展一个基本模板。IE，在你所有的 Twig 模板中都有类似的东西

```
{% extends 'YourBundle::base.html.twig' %} 
```

在 base.html.twig 中呈现一个控制器，该控制器呈现登录表单。为此，在 base.html.twig 中执行以下操作：

```
{% render "YourBundle:Security:loginForm" %} 
```

然后创建一个控制器动作，例如：

```
public function loginFormAction()
{
    $loginForm = //create the form
    return $this->render('YourBundle:Security:loginForm.html.twig', array(
        'form' => $loginForm,
    }
} 
```

最后在您的 loginForm.html.twig 中呈现表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:49:07.287

Symfony2 防火墙使用`_username, _password, _remember_me and _target_path`您在 security.yml 中定义的登录操作。

您可以在您想要的每个页面上（例如在标题中）放置一个使用这些表单名称并将它们发送到您的登录操作的表单（使用 formBuilder、formType 或直接到模板中的字段，由您决定）。Symfony 将自动处理并为您完成其余的工作！

# java - 安卓正则表达式制作

> ID：11921318
> 
> 赞同：0
> 
> 时间：2012-08-12T09:59:11.510
> 
> 标签：java, android, regex

我正在尝试制作一个正则表达式，但我是新手。似乎我在这方面一次又一次地失败..

如果有人可以帮助我

基本上我想要一个测试以下内容的表达式，

> 1- 以 abc 或 def 开头的东西，后跟 0 到 900 之间的数字，然后可以有任何东西，直到最近的 !!

任何帮助都将被视为

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:20:08.623

如果你想要这个`abcXXX(0<xxx<900)`或`defXXX (0<xxx<900)`试试这个：

```
\b(abc)([0-9]|[1-9][0-9]|[1-8][0-9][0-9]|900)\b|\b(def)([0-9]|[1-9][0-9]|[1-8][0-9[0-9]|900)\b] 
```

**说明**：正则表达式`[0-9]`匹配 0 到 9 的一位数。`[1-9][0-9]`匹配 10 到 99 的两位数。这很容易。所以`0-900`是`0-899`，`900`所以 REGEX 是`[0-9]|[1-9][0-9]|[1-8][0-9][0-9]|900`。添加`\b( )\b`是[边界匹配器](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)。类似于`def`：`def`以 3 位开头。

```
\b(def)([0-9]|[1-9][0-9]|[1-8][0-9][0-9]|900)\b 
```

最后使用`|`的是`or`.

使用[Java 的正则表达式测试页进行测试](http://www.regexplanet.com/advanced/java/index.html)

也许我没有尝试一些奇怪的输入，但这是你自己挖掘的基本部分

使用 Alan Moore 更好的建议进行编辑：

```
\b(abc|def)([0-9]|[1-9][0-9]|[1-8][0-9][0-9]|900)\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:26:48.537

以下正则表达式将与您的表达式的第一部分匹配。很难理解表达式的第二部分。

> 以 abc 或 def 开头的东西，后跟 0 到 900 之间的数字

```
^(abc|def)([0-9]{1,2}|[1-8][0-9]{2}|900) 
```

我解释了下面的表达式。

```
^(abc|def)   //Starts with abc or def
(
   [0-9]{1,2}|[1-8][0-9]{2}|900   // matches number between 0-900
) 
```

# python - 压缩pyqt属性

> ID：11921320
> 
> 赞同：7
> 
> 时间：2012-08-12T09:59:30.857
> 
> 标签：python, class, pyqt

我正在用 Python 编写脚本，但遇到了一些问题：

```
class LightDMUser(QObject):
  def __init__(self, user):
    super(LightDMUser, self).__init__()
    self.user = user

  @pyqtProperty(QVariant)
  def background(self):      return self.user.get_background()

  @pyqtProperty(QVariant)
  def display_name(self):    return self.user.get_display_name()

  @pyqtProperty(QVariant)
  def has_messages(self):    return self.user.get_has_messages()

  @pyqtProperty(QVariant)
  def home_directory(self):  return self.user.get_home_directory()

  @pyqtProperty(QVariant)
  def image(self):           return self.user.get_image()

  @pyqtProperty(QVariant)
  def language(self):        return self.user.get_language()

  @pyqtProperty(QVariant)
  def layout(self):          return self.user.get_layout()

  @pyqtProperty(QVariant)
  def layouts(self):         return self.user.get_layouts()

  @pyqtProperty(QVariant)
  def logged_in(self):       return self.user.get_logged_in()

  @pyqtProperty(QVariant)
  def name(self):            return self.user.get_name()

  @pyqtProperty(QVariant)
  def real_name(self):       return self.user.get_real_name()

  @pyqtProperty(QVariant)
  def session(self):         return self.user.get_session() 
```

如您所见，这段代码非常多余。我试着像这样浓缩它：

```
class LightDMUser(QObject):
  attributes = ['background', 'display_name', 'has_messages', 'home_directory', 'image', 'language', 'layout', 'layouts', 'logged_in', 'name', 'real_name', 'session']

  def __init__(self, user):
    super(LightDMUser, self).__init__()
    self.user = user

    for attribute in self.attributes:
      setattr(self, attribute, pyqtProperty(QVariant, getattr(self.user, 'get_' + attribute))) 
```

然而，PyQt4 期望类方法存在于类本身，而不是实例。将`setattr`代码移出`__init__`块也不起作用，因为`self`没有为类定义，所以我真的不知道该怎么做。

任何人都可以看到压缩此代码的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T12:08:21.800

有很多方法可以做到这一点：类装饰器、元类、Mixin。

常用辅助函数：

```
def set_pyqtproperties(klass, properties, proxy='user'):
    def make_prop(prop):        
        def property_(self):
            return getattr(getattr(self, proxy), 'get_' + prop)
        property_.__name__ = prop
        return property_

    if isinstance(properties, basestring):
       properties = properties.split()
    for prop in properties:
         setattr(klass, prop, pyqtProperty(QVariant, make_prop(prop))) 
```

### 类装饰器

```
def set_properties(properties):
    def decorator(klass):
        set_pyqtproperties(klass, properties)
        return klass
    return decorator 
```

用法

```
@set_properties("display background")
class LightDMUser(QObject): pass 
```

如果不支持类装饰器，那么您可以尝试：

```
class LightDMUser(QObject): 
    pass
LightDMUser = set_properties("display background")(LightDMUser) 
```

### 元类

```
def set_properties_meta(properties):
    def meta(name, bases, attrs):
        cls = type(name, bases, attrs)
        set_pyqtproperties(cls, properties)
        return cls
    return meta 
```

用法

```
class LightDMUser(QObject):
    __metaclass__ =  set_properties_meta("display background") 
```

注意：如果将属性列表设置为类属性，则可以重用相同的元类：

```
def MetaClass(name, bases, attrs):
    cls = type(name, bases, attrs)
    set_pyqtproperties(cls, attrs.get('properties', ''))
    return cls

class LightDMUser(QObject):
    properties = "display background"
    __metaclass__ = MetaClass 
```

您也可以`attrs`直接操作：`attrs[name] = value`在调用`type()`而不是`setattr(cls, name, value)`.

以上假设`QObject.__class__ is type`.

### 米信

```
def properties_mixin(classname, properties):
    #note: create a new class by whatever means necessary
    # e.g., even using exec() as namedtuple does
    # http://hg.python.org/cpython/file/3.2/Lib/collections.py#l235

    # reuse class decorator here
    return set_properties(properties)(type(classname, (), {})) 
```

用法

```
PropertiesMixin = properties_mixin('PropertiesMixin', 'display background')
class LightDMUser(PropertiesMixin, QObject): pass 
```

我没有尝试过任何一个。此处的代码显示了实现该功能可能需要的代码数量和类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T11:28:55.003

You could attach these methods from еру outside of the class definition:

```
class LightDMUser(QObject):

  def __init__(self, user):
    super(LightDMUser, self).__init__()
    self.user = user 
```

The simplest way is to create a closure for each property, override its `__name__` (just for case if `@pyqtProperty` needs it) and to bind it to the class:

```
for attribute in [
        'background',
        'display_name',
        'has_messages',
        'home_directory',
        'image',
        'language',
        'layout',
        'layouts',
        'logged_in',
        'name',
        'real_name',
        'session'
      ]:

  def delegating(self):
    return getattr(self.user, 'get_' + attribute)()

  delegating.__name__ = attribute
  delegating = pyqtProperty(QVariant)(delegating)

  setattr(LightDMUser, attribute, delegating) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T10:56:57.737

如果您将循环移出类并创建一个闭包来保存每个属性名称，我很确定这可以工作：

```
class LightDMUser(QObject):
    attributes = ['background', 'display_name', 'has_messages',
                  'home_directory', 'image', 'language', 'layout',
                  'layouts', 'logged_in', 'name', 'real_name', 'session']

    def __init__(self, user):
        super(LightDMUser, self).__init__()
        self.user = user

for attribute in LightDMUser.attributes:
    closure = lambda self, attribute=attribute : getattr(self.user,
                                                         'get_' + attribute)()
    setattr(LightDMUser, attribute, pyqtProperty(QVariant, closure)) 
```

我没有使用您正在处理的基于 QT 的实际类对此进行测试，但是使用常规 Python`property`实例的更简单版本可以完美运行。我也不确定这是一个好主意，因为如果您还不熟悉它，就很难弄清楚发生了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T11:10:13.593

我不相信我喜欢这个，但它是一个可能的选择，不是太难理解，并且不需要`getattr`'s... 以下可以有点像宏使用 - 但可能需要调整.. . （例如，从以 get 开头的类定义或从现有对象等中获取 funcs ）还可以在其中添加一个**repr**来描述它是一个支持类，用于与用户对象或其他任何属性进行接口... )

```
def get_properties(name, funcs):
    get_text = """
class {name}(QObject):
""".format(name=name)
    for func in funcs:
        get_text += (
              "\n\t@pyqtProperty(QVariant)\n"
              "\tdef {func}(self): return self.user.get_{func}()\n"
              ).format(func=func)

    print get_text # this should be exec...

>>> get_properties('UserProperties', ['display', 'background'])

class UserProperties(QObject):

    @pyqtProperty(QVariant)
    def display(self): return self.user.get_display()

    @pyqtProperty(QVariant)
    def background(self): return self.user.get_background() 
```

执行该命令后，您可以将主类编写为：

```
class LightDMUser(QObject, UserProperties):
    def __init__(self, user):
        super(LightDMUser, self).__init__()
        self.user = user 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T15:21:02.957

我为 Python 3 测试了下面的解决方案。它使用 metaclass 关键字

```
# A bit of scaffolding

def pyqtProperty(cls, method):
    return method

class QObject:
    pass

class QVariant:
    pass

class User:
    def __init__(self, name="No Name"):
        self.name = name
    def get_background(self):
        return self.name
    def get_display_name(self):
        return self.name
    def get_has_messages(self):
        return self.name
    def get_home_directory(self):
        return self.name
    def get_image(self):
        return self.name
    def get_language(self):
        return self.name
    def get_layout(self):
        return self.name
    def get_layouts(self):
        return self.name
    def get_logged_in(self):
        return self.name
    def get_name(self):
        return self.name
    def get_real_name(self):
        return self.name
    def get_session(self):
        return self.name

# The Meta Class
class MetaLightDMUser(type):
    @classmethod
    def __prepare__(cls, name, baseClasses):
        classdict = {}
        for attribute in ['background', 'display_name', 'has_messages', 'home_directory', 'image', 'language', 'layout', 'layouts', 'logged_in', 'name', 'real_name', 'session']:
            classdict[attribute] = eval("lambda self: pyqtProperty(QVariant, getattr(self.user, 'get_" + attribute +"'))()")
        return classdict

    def __new__(cls, name, baseClasses, classdict):
        return type.__new__(cls, name, baseClasses, classdict)

# The class itself
class LightDMUser(QObject, metaclass = MetaLightDMUser): 
    def __init__(self, user):
        super(LightDMUser, self).__init__()
        self.user = user 
```

或者我可以像这样创建classdict条目

`classdict[attribute] = lambda self, attr=attribute: pyqtProperty(QVariant, getattr(self.user, 'get_' + attr))()`

但这提出了一个 attr 论点。有了`eval()`我们的核心这个论点

我们也可以使用`functools.partial`：

`classdict[attribute] = functools.partial(lambda self, attr: pyqtProperty(QVariant, getattr(self.user, 'get_' + attr))(), attr=attribute)`

但随后的调用必须是`u.method(u)`。它不可能是`u.method()`

该调用`LightDMUser.method(u)`适用于所有 3 个实现

问候

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-27T01:47:05.217

使用元类或类装饰器来减少 pyqtProperty 的样板文件是很棘手的，但这是我们刚刚开始工作的一个起点。我想，不利的一面是您不再可以使用@decorator 语法，但在这种情况下，似乎将其合并到一行代码中更可取。

您可以将其设置为调用您的用户对象而不仅仅是 self，或者您可以为 LightDMUser 实现自定义 getattr 行为，该行为将自动调用 self.user。

```
from PyQt4.QtCore import pyqtProperty
from PyQt4.QtGui import QWidget, QColor
from functools import partial

def pyqtPropertyInit(name, default):
    def _getattrDefault(default, self, attrName):
        try:
            value = getattr(self, attrName)
        except AttributeError:
            setattr(self, attrName, default)
            return default
        return value
    ga = partial(_getattrDefault, default)
    return pyqtProperty(
        default.__class__,
        fget=(lambda s: ga(s, name)),
        fset=(lambda s, v: setattr(s, name, v)),
    )

class TestClass(QWidget):
    def __init__(self, *args, **kwargs):
        super(TestClass, self).__init__(*args, **kwargs)

    stdoutColor = pyqtPropertyInit('_stdoutColor', QColor(0, 0, 255))
    pyForegroundColor = pyqtPropertyInit('_pyForegroundColor', QColor(0, 0, 255)) 
```

# java - Android , Java - 使用位图帧渲染视频以反转视频 (Xuggler)

> ID：11921322
> 
> 赞同：13
> 
> 时间：2012-08-12T09:59:35.403
> 
> 标签：java, android, video, rendering, xuggler

我没有视频帧`ArrayList<Bitmap>`。我已经使用`MediaMetadataRetriever.getFrameAtTime()`视频文件（.mp4）上的方法访问了这些帧。

我颠倒了 ArrayList 中帧的顺序。现在使用这个反向排序的帧队列我想渲染一个视频，所以它会被反转（我希望我在正确的轨道上）。

创建该视频后，我还想将其保存到 SD 卡。

如何做到这一点？或者还有其他方法可以在java中反转视频吗？

**编辑1：** **（***使用xuggler***）**

我尝试使用 xuggler ...我尝试使用它的 .jar 文件。但它抛出了一些错误。

```
[2012-08-18 00:29:16 - xugglertest2] The library 'xuggle-xuggler-5.2.jar' contains native libraries that will not run on the device.
    [2012-08-18 00:29:16 - xugglertest2]  The following libraries were found:
    [2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/i686-pc-linux-gnu/libxuggle-ferry.so
    [2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/i686-pc-linux-gnu/libxuggle-xuggler-io.so
    [2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/i686-pc-linux-gnu/libxuggle-xuggler.so
    [2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/i686-pc-linux-gnu/libxuggle.so
    [2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/x86_64-pc-linux-gnu/libxuggle-ferry.so
    [2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/x86_64-pc-linux-gnu/libxuggle-xuggler-io.so
    [2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/x86_64-pc-linux-gnu/libxuggle-xuggler.so
    [2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/x86_64-pc-linux-gnu/libxuggle.so 
```

我应该怎么办 ？？

我将 xuggler-xuggler-5.4.jar 复制到项目的 libs 文件夹中，然后将其添加到构建路径中。我做对了吗？

**编辑 2：（** ***使用 ffmpeg）***
我已经按照给定的在 ubuntu 平台上为 android 编译了 ffmpeg 在[这里](http://www.roman10.net/how-to-build-ffmpeg-for-android/)
我得到了按照文档编译的文件。
现在谁能告诉我如何在 android 应用程序中使用这些编译文件？我应该如何处理这些文件？
我没有找到任何合适的文档。任何帮助都是 gr8。

**编辑 3：（*移植到 android -ffmpeg）***

嘿..最后我在ubuntu上编译了ffmpeg，我得到了libffmpeg.so。我成功地将它移植到android。libffmpeg.so 正在成功加载 android 活动。现在我只想测试一个简单的 ffmpeg 命令或程序。
你能建议我在哪里找它吗？你能建议我一个示例命令来测试它吗？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T09:31:30.690

您可以使用[ffmpeg](http://ffmpeg.org/faq.html#How-do-I-encode-single-pictures-into-movies_003f)从图像中组装视频。您可以通过多种方式将 ffmpeg 集成到 Java(Android) 中（一种是直接通过

`Runtime.getRuntime().exec("ffmpeg <options>");`

)，但通过[Xuggler](http://www.xuggle.com/xuggler)项目可能是一个好方法——它严重依赖 ffmpeg。作为起点，这里有一[组介绍教程](http://www.javacodegeeks.com/2011/02/xuggler-development-tutorials.html)，这里有一个完整的教程[如何从图像序列中编码视频](http://wiki.xuggle.com/Encoding_Video_from_a_sequence_of_Images)。这需要大量的工作和阅读，但您需要的所有信息都在那里。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:13:48.813

关于您的 xuggler 使用，您的库版本不适用于您的特定设备，因为它包含为 x86_64 和 i686 平台编译的本机代码：

```
[2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/i686-pc-linux-gnu/
[2012-08-18 00:29:16 - xugglertest2]  - com/xuggle/ferry/x86_64-pc-linux-gnu/ 
```

尝试使用为 ARMv6 编译的本机代码部分查找此库的版本（最常见的 Android 架构 - 包括较旧的设备，如果不想支持大约 1-2 年前的设备，ARMv7 会更好）。

否则，您需要为 ARM 编译 ffmpeg 并在 Android NDK 的支持下使用它。您需要用 C/C++ 编写代码，实现将您的一系列图像编码到特定文件中，并使用 JNI 接口将其包装起来。您可以将 Java 数组传递给类方法的本机实现。

请参阅 SDK 示例中的示例 Android NDK 应用程序以了解如何在您的代码中使用 JNI

# security - 我应该将上传的图像存储在 webroot 之外吗？

> ID：11921324
> 
> 赞同：1
> 
> 时间：2012-08-12T09:59:51.680
> 
> 标签：security, file-upload, image-uploading

对于我正在帮助的网站，他们希望允许用户上传图像以进行显示。显然，这具有安全隐患。我已经看到它讨论过上传的图像应该存储在 webroot 之外，而不是只能通过脚本访问。

但是，当我查看 OWASPS 关于文件上传安全性的讨论时，我没有看到他们提到将上传的文件存储在 webroot 之外的必要性。[https://www.owasp.org/index.php/Unrestricted_File_Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload)。他们的开发人员建议列表还有许多其他步骤要采取，但令我惊讶的是，至少似乎没有提到将文件存储在 webroot 之外。

假设您遵循上面链接中 OWASP 列出的建议，是否可以认为允许在 webroot 中上传图像是安全的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:09:08.473

不，没有必要将图像存储在 webroot 之外。但是，您应该确保将所有上传限制为 jpg、png 等。仅限图像格式，否则如您发布的链接中所述，您确实存在系统受到攻击的风险。我还会在 webroot 中创建一个专门用于上传图片的文件夹，让事情更有序，并确保里面的所有图片都设置为对网络用户只读。

# c# - 在 asp.net 中选择 3 列并加入字符串结果

> ID：11921326
> 
> 赞同：0
> 
> 时间：2012-08-12T10:01:05.700
> 
> 标签：c#, asp.net, sql, select

所以在这里，我的目标是从我的数据库 STUD_DB 中选择 3 列，studentlastname、studentfirstname 和 studentmiddleinitial，所以这里是代码：

```
 public string selectname(string email)
{
    string name;
    SqlConnection con = new SqlConnection(constr);
    string select = "SELECT studentlastname,studentfirstname,studentmiddleinitial FROM STUD_DB WHERE emailaddress = @mail";
    SqlCommand sel = new SqlCommand(select, con);

    sel.Parameters.Add("@mail", email);

    //this is where idk what to do. 
} 
```

我担心的是，在我选择了 3 列之后，我想将它们放在单独的变量中，然后将它们连接到一个字符串中，从而得到学生的全名，但是，我不知道如何对这部分进行编码。:) 将等待答复，谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:23:31.790

您的代码正确加载了数据库中的数据（始终使用参数化查询，从不使用字符串连接）。您只需要读取[SqlDataReader](http://msdn.microsoft.com/en-us/library/w9y9ttex)检索到的数据。

```
public string selectname(string email) 
{ 
    string name; 
    using(SqlConnection con = new SqlConnection(constr))
    {
        string select = "SELECT studentlastname,studentfirstname,studentmiddleinitial " + 
                        "FROM STUD_DB WHERE emailaddress = @mail"; 
        SqlCommand sel = new SqlCommand(select, con); 
        sel.Parameters.Add("@mail", email);
        SqlDataReader dr = sel.ExecuteReader();
        while(dr.Read())
            name = string.Join(" ", dr.GetString(0), dr.GetString(1), dr.GetString(2));
    }
    return name;
} 
```

此外，使用语句是真正的救星，这将避免忘记关闭/处理连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:37:22.800

您可以在查询中组合全名：

```
const string @select = "SELECT studentlastname + ' ' " +
                               "+ studentfirstname + ' ' " +
                               "+ studentmiddleinitial as FullName " +
                               "FROM STUD_DB WHERE emailaddress = @mail";

using (var connection = new SqlConnection(constr))
{
    using (var command = new SqlCommand(select, connection))
    {
        connection.Open();
        command.Parameters.Add("mail", email);
        return command.ExecuteScalar() as string;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T10:07:19.730

如果您不想使用参数，您可以简单地添加字符串。不是最值得夸耀的解决方案，但会奏效。

```
private void GetData(String email)
{
  String sqlStatement = "select * from Programs where Something = " + email;
  try
  {
    using (SqlDataAdapter adapter = new SqlDataAdapter(sqlStatement, _CONNECTION_STRING))
    {
      DataSet dataSet = new DataSet("Items");
      adapter.Fill(dataSet, "Items");
    }
    }
  catch (Exception) { }
  // Here you just type "dataSet." and the intellisense will 
  // present you with options to access the tables, rows etc.
} 
```

# php - 不同控制器的不同布局文件

> ID：11921329
> 
> 赞同：3
> 
> 时间：2012-08-12T10:01:17.753
> 
> 标签：php, zend-framework, zend-framework2, zend-framework-modules

如何让我的 ZF2 模块为特定控制器加载其他布局文件？

考虑您在 ZF2 应用程序模块中拥有`IndexController`和，并且正在使用*layout.phtml*，但您想将*adminlayout.phtml*用于.`AdminController``IndexController`**`AdminController`**

 **这怎么可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T10:01:17.753

```
class Module {
    public function onBootstrap($e) {
        $em  = $application->getEventManager();

        $em->attach(MvcEvent::EVENT_DISPATCH, function($e) {
            $controller = $e->getTarget();
            if ($controller instanceof Controller\AdminController) {   
                $controller->layout('layout/layoutadmin.phtml');
            } else {
                $controller->layout('layout/layout.phtml');
            }   
        });
    }
} 
```

并且不要忘记通过在模块配置文件中添加此配置来注册新控制器：

```
'controllers' => array(
    'invokables' => array(
        'Application\Controller\Index' => 'Application\Controller\IndexController',
        'Application\Controller\Admin' => 'Application\Controller\AdminController',
    ),
), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:58:24.587

其他最佳解决方案：

```
'view_manager' => array(
        'template_path_stack' => array(
            'YOURMODULENAME' => __DIR__ . '/../view',
        ),

        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
        ),
    ), 
```

将**YOURMODULENAME**更改为您的模块特定名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-04T22:26:25.703

`onBootstrap`您可以使用控制器的`onDispatch`方法来简单地设置整个控制器的布局，而不是在方法中为整个模块添加逻辑。

在您的管理控制器中，在顶部添加一个快捷方式：

```
use Zend\Mvc\MvcEvent; 
```

`onDispatch`然后，在您的控制器中使用以下内容：

```
public function onDispatch(MvcEvent $mvcEvent)
{   
    $this->layout()->setTemplate('layout/admin');

    return parent::onDispatch($mvcEvent);
} 
```

我相信这个解决方案更好，因为只有在调用管理控制器时才会调用代码。**

# php - 在 Smarty 中返回数据库值

> ID：11921332
> 
> 赞同：0
> 
> 时间：2012-08-12T10:01:46.787
> 
> 标签：php, smarty

我有这个 Smarty 代码来获取数据：

```
$sel=mysql_query("select id, name from form");
$smarty->assign('contact', mysql_fetch_row($sel));
$smarty->display('testfunction.tpl'); 
```

我的模板文件：

```
<ul>
    {foreach from=$contact item=foo}
        <li>{$foo}</li>
    {/foreach}
</ul> 
```

这输出：

```
 1
 a 
```

但我希望输出如下：

```
1:a
2:b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:51:06.427

如果您使用[`mysql_fetch_row`](http://www.php.net/manual/en/function.mysql-fetch-row.php)，它会按照它所说的那样做 - 它获取一行，但不超过一个。我的猜测是你的结果集看起来像这样（如果我弄错了，请在你的问题中澄清）：

```
id  | name
----+------------
 1  | a
 2  | b 
```

解决此问题的一种方法是构建一个数组，然后您可以使用 Smarty 将其拆开，如下所示：

```
/* PHP code */
$your_array = array();

$sel=mysql_query("select id, name from form");
while($row=mysql_fetch_array($sel)) {
   $your_array[] = $row;
}

$smarty->assign('contact', $your_array);
$smarty->display('testfunction.tpl'); 
```

您现在在 Smarty 中有一个数组，基本上如下所示：

```
[1] => (
     [0] => 1, 
     [1] => a
),

[2] => (
     [0] => 2, 
     [1] => b
) 
```

这可以像您描述的那样显示：

```
{* Smarty Code *}
<ul>
    {foreach from=$contact item=foo}
        <li>{$foo[0]}: {$foo[1]}</li>
    {/foreach}
</ul> 
```

我没有尝试过，但它应该可以完成这项工作。如果不正确，`{debug}`请在模板中使用 a 来查看数组`$contact`是如何形成的。

**另一个忠告：**

您在此处使用的 PHP mysql 连接器已弃用。强烈建议不要使用此扩展程序。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)

# java - 使用 gnu-crypto jar 使用漩涡算法加密 pwd 的 Java 示例

> ID：11921334
> 
> 赞同：0
> 
> 时间：2012-08-12T10:01:59.717
> 
> 标签：java

我想使用 gnu.crypto.hash.Whirlpool 散列加密一个字符串。

加密应该加密密码并且应该返回加密的密码。加密（密码）；

> 此方法应具有使用 gnu jars 和漩涡
> 散列算法加密 pwd 的实现，该算法应等于以下站点 [http://hash.online-convert.com/whirlpool-generator生成的 pwd](http://hash.online-convert.com/whirlpool-generator)

我尝试使用下面的代码，但无法获得类似于生成的漩涡站点的 512 字节代码：

```
import gnu.crypto.hash.HashFactory;
import gnu.crypto.hash.IMessageDigest;

  public class EncryptPwdWithAPI{
public static void main(String arg[])
{
         encrypt("somepwd");
    }
public static String encrypt(String password)
{
IMessageDigest md = HashFactory.getInstance("WHIRLPOOL");
md.update(input, 0, input.length); 
byte[] digest = md.digest(); 
System.out.println( "Input : "+new String(input)+ "\nPWD : "+new String(digest)
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:58:35.003

是的，但我期待带有 512 字节的漩涡 hascode，这等于在线哈希码生成器生成的代码。**我用[JacksumAPI](http://www.jonelo.de/java/jacksum/)**得到了预期的输出。

这是一些代码：

```
import java.security.NoSuchAlgorithmException;

import jonelo.jacksum.JacksumAPI;
import jonelo.jacksum.algorithm.AbstractChecksum;

public class JacksumTest {
    public static void main(String arg[])
    {
        String password = "somepwd";
        AbstractChecksum checksum = null; 
        try { 
           checksum = JacksumAPI.getChecksumInstance("whirlpool"); 
           checksum.update(password.getBytes());
           System.out.println(checksum.getFormattedValue());
        } catch (NoSuchAlgorithmException nsae) { }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:38:10.180

@Eelke 是正确的，但这就是你的做法，编码的密码应该在结果变量中。

```
 IMessageDigest oldencoder = HashFactory.getInstance(Registry.WHIRLPOOL_HASH);

    byte[] input = password.getBytes();

    oldencoder.update(input, 0, input.length);

    byte[] digest = oldencoder.digest();

    result = gnu.crypto.util.Util.toString(digest).toLowerCase(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T11:18:16.600

您直接将字节值用作字符值，而不是将字节数组转换为十六进制或 base64 编码，以将其与漩涡网站上的值进行比较。Apache Commons Codec 提供 hex 和 base64 函数。

```
import org.apache.commons.codec.binary.Base64;
...
  Base64.encodeBase64String(digest); 
```

# c++ - 在可变参数模板中使用大括号括起来的初始化列表？

> ID：11921335
> 
> 赞同：6
> 
> 时间：2012-08-12T10:02:09.200
> 
> 标签：c++, c++11, variadic-templates

我正在尝试在可变参数模板函数中使用大括号括起来的初始值设定项列表，但编译器抱怨......我要求太多还是我做错了什么？

这可以通过示例得到最好的证明：

```
struct Bracy
{
    Bracy(int i, int j)
    {
    }
};

struct Test
{

    void consumeOne(int i)
    {
    }

    void consumeOne(const Bracy & bracy)
    {
    }

    void consume()
    {
    }

    template<typename T, typename ...Values>
    void consume(const T & first, Values... rest)
    {
        consumeOne(first);
        consume(rest...);
    }

    template<typename ...Values>
    Test(Values... values)
    {
        consume(values...);
    }
};

void testVariadics()
{
    Test(7,{1,2}); //I'd like {1,2} to be passed to consumeOne(const Bracy & bracy)
} 
```

GCC (4.7) 说：

```
main.cpp:45:14: error: no matching function for call to ‘Test::Test(int, <brace-enclosed initializer list>)’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:30:54.100

大括号括起来的初始化列表不能被转发，所以不幸的是你不走运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:54:11.933

这是你想要的粗略尝试......

```
#include <iostream>
#include <initializer_list>

struct Bracy {
    Bracy(int x, int y) {}
};

struct Test {
    void consumeOne(std::initializer_list<int>) { std::cout << "initializer list version (Bracy?)\n"; /* Bracy? */}

    void consumeOne(int) { std::cout << "int version\n"; }

    template<typename T>
    void consume(T t) { consumeOne(t); }

    template<typename T, typename ... Args>
    void consume(T first, Args ... args) {
        consumeOne(first);
        consume(args...);
    }

    template<typename ... Args>
    Test(Args ... args) {
        consume(args...);
    }
};

int
main(int argc, char** argv) {
    Test(1, std::initializer_list<int>{1,2}, 2, 3, std::initializer_list<int>{1,2});
    return 0;
}

output: int version
        initializer list version (Bracy?)
        int version
        int version
        initializer list version (Bracy?) 
```

# qt - QCA 是否支持 SHA-2 散列？

> ID：11921336
> 
> 赞同：3
> 
> 时间：2012-08-12T10:02:19.403
> 
> 标签：qt, hash, cryptography, shared-libraries

QCA（Qt Cryptographic Architecture）是否支持 SHA-2（尤其是 SHA256）？如果没有：Qt 中是否有用于 SHA-2 散列的插件？

请让我知道一些配置细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:26:11.120

是的，通过添加*OSSL 提供程序插件*：

[http://delta.affinix.com/qca/](http://delta.affinix.com/qca/)

请参阅页面底部的表格。

可以在此处找到有关如何使用此提供程序插件安装和包含 QCA 的教程（适用于 Linux 和 Windows/mingw32 环境）：

[http://www.essentialunix.org/index.php?option=com_content&view=article&id=48:qcatutorial&catid=34:qttutorials&Itemid=53](http://www.essentialunix.org/index.php?option=com_content&view=article&id=48:qcatutorial&catid=34:qttutorials&Itemid=53)

然后，您可以使用以下代码片段在应用程序运行时检查它：

```
QCA::init();
if(!QCA::isSupported("sha2"))
    qFatal("SHA-2 not supported!"); 
```

* * *

对于非常高安全性的项目（您需要软件证书或专业代码审查），您还可以使用*Crypto++*，这是一个提供开箱即用的 SHA-2 的认证库：

[http://www.cryptopp.com/](http://www.cryptopp.com/)

有关认证版本，请参阅页面底部的*FIPS 140-2 一致性部分。*请注意，认证版本仅适用于 Windows。

* * *

请注意，Qt 5 内置了 SHA-2：

[http://doc.qt.io/qt-5/qcryptographichash.html#Algorithm-enum](http://doc.qt.io/qt-5/qcryptographichash.html#Algorithm-enum)

我猜您希望您的应用程序与 Qt 4 兼容。但是，如果您的应用程序是使用 Qt5 编译的，您应该考虑使用内置的 SHA-2 实现，这可以使用预处理器条件和 .pro 文件条件库包含来完成。

# xpath - Zotero 翻译框架问题

> ID：11921338
> 
> 赞同：0
> 
> 时间：2012-08-12T10:03:08.720
> 
> 标签：xpath, firefox-addon

考虑以下标记：

```
<div>
 <span>A</span>
 B
</div> 
```

我想使用翻译框架获取“B”。我试过以下都失败了：

```
 date : FW.Xpath("//div/text()") // date ->  null 
 date : FW.Xpath("//div/").text() // date -> AB 
```

我怎样才能只取'B'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:38:58.093

尝试：

```
date : FW.Xpath("//div/span/following-sibling::text()") 
```

或者：

```
date : FW.Xpath("//div/text()[last()]") 
```

最近在 Zotero 论坛上讨论的问题是 Framework 中的 .text() 调用返回匹配的第一个文本节点，因此您问题中的第一个表达式给出了标签前面的空文本节点。

此处正确的解决方案将取决于您希望拥有的灵活性——一般来说，如果您需要跨度之后的下一个文本节点，那么您需要第一个选项。如果你想要在外部 div 结束之前的最后一个，你想要第二个。

（对于其他对此感兴趣的人，这是使用[Zotero 网站翻译框架](http://www.zotero.org/support/dev/translators/framework "框架文档")，这是编写网站爬虫的几种方法之一，以及更多用于 Zotero 研究管理系统的方法。）

# python - 如何知道网站的响应时间？

> ID：11921339
> 
> 赞同：2
> 
> 时间：2012-08-12T10:03:12.603
> 
> 标签：python, sockets, timeout, ping, timeit

> **可能重复：**
> [测量服务器的 ping 延迟 - Python](https://stackoverflow.com/questions/2525312/measuring-ping-latency-of-a-server-python)

```
There are a few servers such as

http://server1.stackoverflow.com
http://server2.stackoverflow.com
http://server3.stackoverflow.com
http://server4.stackoverflow.com 
```

我想知道目前哪些链接的响应时间最短。我应该怎么办？

我正在考虑：timeit 或 ping 服务器。

如果您能给我一个样品或任何想法，我将不胜感激，谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:17:08.987

你为什么要自己做这件事？通常应用程序服务器在负载均衡器后面运行，希望将您的请求重定向到负载最少的机器......在这种情况下的负载平衡 - 由您自己完成 - 在地理分布的应用程序服务器设置中可能有意义，但在这里没有Stackoverflow 服务器。所以你的用例是？

也可以看看

[测量服务器的 ping 延迟 - Python](https://stackoverflow.com/questions/2525312/measuring-ping-latency-of-a-server-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:27:08.840

我想用谷歌搜索半天，像这样？

```
url = ""

f = urllib.urlopen(url)
start = time.time()
page = f.read()
end = time.time()
f.close() 
```

有更好的方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:34:13.643

您可以使用`popen`执行`ping`命令：

例如，让我们采取三个`nameservers`并`stackoverflow`ping 他们。最快的将是平均时间最短的

```
import os
lis3=['64.34.119.33','64.34.119.34','69.59.196.217'] #nameservers of SO
lis2=[]
for x in lis3:
    strs=os.popen("ping "+x).read()
    #print strs
    time=strs[strs.rfind(' ')+1:strs.rfind('ms')]
    lis2.append(int(time))

minn=lis3[lis2.index(min(lis2))]
print 'lowest average time is from {0}'.format(minn) 
```

**输出：**

```
lowest average time is from 69.59.196.217 
```

# c++ - D3D->CreateDevice() 在注入的 DLL 中失败

> ID：11921340
> 
> 赞同：2
> 
> 时间：2012-08-12T10:03:21.957
> 
> 标签：c++, dll, code-injection, direct3d

我正在编写一个 DLL，它通过更改注入进程的 VMT 中所需的指针来挂钩某些 D3D 函数。算法是这样的：

1.  获取一个虚拟窗口句柄。
2.  初始化一个虚拟 D3D 对象，创建一个 D3D 设备。
3.  获取所需的偏移量（VMT - D3D 基地址）。
4.  销毁 D3D 对象和窗口句柄。
5.  获取注入进程的 D3D*.dll 基础。
6.  构造实际的 VMT 指针（偏移量 + 基数）。
7.  在进程堆中搜索它们。
8.  如果找到 - 将指针更改为我自己的。

它在应用程序中完全正常工作，我在其中初始化 D3D，启动绘图循环，然后触发挂钩过程，但它不能从 DLL 工作 - 由于某种原因，它在尝试使用最后一个错误代码创建虚拟设备时崩溃= 126（“找不到指定的模块”，尽管 D3D*.dll 加载正确）。

我知道同时只能启动一个 D3DDevice，但在我的测试应用程序中，我可以创建更多的 1 - 只有 1 个作品，但我仍然可以获取 VMT。

所以，问题是 - 从 EXE 和 DLL 运行相同的代码有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T10:38:27.350

我有同样的问题。我认为可能是我们需要使用与创建第一个线程（主线程）相同的线程来创建一个设备。

我在创建设备时尝试了所有不同的参数组合。我尝试了不同的 DX9 应用程序/游戏。

我发现主线程假设不正确。我更新了 DX 示例的代码并添加了我自己的代码以在辅助线程上运行，它可以正常工作。我还有一些想法可以尝试。并更新回来

问题发生在我身上，因为我从 DllMain 调用 CreateDevice()，根据[Dll 最佳实践](http://msdn.microsoft.com/en-us/library/windows/desktop/dn633971%28v=vs.85%29.aspx)，禁止调用任何可能有线程相互交叉的函数，这将导致死锁，这就是这里发生的情况。解决方案是在[此处遵循此答案。](https://stackoverflow.com/a/1163681/955005)

# c# - TextBlock 没有在 WP7 上呈现整个文本

> ID：11921341
> 
> 赞同：2
> 
> 时间：2012-08-12T10:03:24.890
> 
> 标签：c#, windows-phone-7, xaml

因此，我正在创建一个应用程序，如果 TextBlock 的宽度长于横向模式下的页面边界，则它需要具有选取框效果。我设法让它使用 TranslateTransform 动画很好地选框，但似乎我的 TextBlock 的文本被剪掉了。

有没有办法使这种行为不会发生或有解决方法？

![截屏](../Images/57ef1e7e53953d630bc28e13a3e847ff.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T10:18:40.987

您需要将其包装`TextBlock`在 a 中`Canvas`，然后应用动画。还要确保将`TextWrapping`属性设置为`NoWrap`并将宽度设置为`Auto`，使其仅跨越一行。

# php - mysql中页面ID的活动菜单

> ID：11921344
> 
> 赞同：0
> 
> 时间：2012-08-12T10:03:40.727
> 
> 标签：php, mysql, css, menu

我对此感到有些困惑。我正在尝试根据页面 ID 使我的菜单处于活动状态。目前我可以拉菜单并显示它们，但我无法在菜单上激活当前页面。

这是我的数据库设置：

```
CREATE TABLE IF NOT EXISTS `pages` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `pagetitle` varchar(255) NOT NULL,
  `linklabel` varchar(255) NOT NULL,
  `pagebody` text NOT NULL,
  `pageorder` int(11) NOT NULL,
  `showing` enum('0','1') NOT NULL DEFAULT '1', 
  `keywords` varchar(255) NOT NULL,
  `descriptions` varchar(255) NOT NULL,
  `creationdate` datetime NOT NULL,
  `lastmodified` datetime NOT NULL,
  `extra` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=13 ; 
```

这是我目前的菜单显示：

```
// Build Main Navigation menu and gather page data here
$sqlCommand = "SELECT id, linklabel FROM pages WHERE showing='1' ORDER BY id ASC";

$query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error());

$menuDisplay = '';

while ($row = mysqli_fetch_array($query))
{
    $pid = $row["id"];

    $linklabel = $row["linklabel"];

    $menuDisplay .= '<ul><li><a href="index.php?pid='.$pid.'">'.$linklabel.'</a></li></ul>';
}

mysqli_free_result($query); 
```

在页面的主体上，我只是像这样回显 $menuDisplay

```
<div id="nav"><?php echo $menuDisplay ?></div><!--ends nav--> 
```

我没有在我的 css 上做太多，但这里是到目前为止的设置：

```
/*NAVIGATION*/

#nav ul {
    list-style: none;
    margin: 0px;
    padding: 0px;
}

#nav li {
    border-bottom: 1px solid #bbb;
}

#nav li a:link, #nav li a:visited {
    display: block;
    padding: 5px 5px 5px 12px;
    background-color: #ddd;
    color: #555;
    text-decoration: none;
}

#nav li a:active, #nav li a:hover {
    background-color: #444;
    color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:13:49.387

你应该能够在你的 PHP 中做这样的事情：

```
// Build Main Navigation menu and gather page data here
$sqlCommand = "SELECT id, linklabel FROM pages WHERE showing='1' ORDER BY id ASC";
$query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error());
$menuDisplay = '<ul>';
while ($row = mysqli_fetch_array($query)) {
  $pid = $row["id"];
  $linklabel = $row["linklabel"];
  $menuDisplay .= '<li' . ($pid == $_GET["pid"] ? ' class="selected"' : '') . '><a href="index.php?pid=' . $pid . '">' . $linklabel . '</a></li>';
}
mysqli_free_result($query);
$menuDisplay .= '</ul>'; 
```

这将添加`class="selected"`到`<li>`当前页面。另外，不要把每个都`<li>`放在自己的`<ul>`. 我也解决了这个问题。

# python - 首次登录时打开页面

> ID：11921345
> 
> 赞同：0
> 
> 时间：2012-08-12T10:03:46.403
> 
> 标签：python, django

我希望用户在第一次登录后必须填写表格。使用我已经尝试过的信号：

```
# -*- coding: utf-8 -*-
from django.contrib.auth.signals import user_logged_in
from django.http import HttpResponseRedirect
from django.core.urlresolvers import reverse

[...]

def umleiten(sender, user, request, **kwargs):
    print reverse("first_login")
    """Check if a user logged on for the first time.""" 
    return HttpResponseRedirect(reverse("first_login"))

user_logged_in.connect(umleiten) 
```

函数“umleiten”被调用，但它不会被转发到相应的页面。有没有办法在登录*后*调用一个函数，我可以从中转发到另一个站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:15:58.483

您可以并且可能应该为此使用中间件

```
class FirstLoginCheckMiddleware(object):
    def process_request(self, request):

        is_form_page = request.path in (
            settings.FORM_PAGE
        )

        if (not is_form_page) and request.user.is_authenticated() and (not request.user.profile.filled_out_the_form):
            return HttpResponseRedirect(settings.FORM_PAGE)
        return None 
```

例如，您使用具有 BooleanField 的对象扩展了 User ，一旦用户执行了您希望他们执行的操作，就会检查该对象：

```
class UserProfile(models.Model):
     filled_out_the_form = field.BooleanField(default=False)
     # ... 
```

# android - 显示 AlertDialog 使我的应用程序崩溃。

> ID：11921347
> 
> 赞同：1
> 
> 时间：2012-08-12T10:03:48.403
> 
> 标签：android, android-alertdialog

我创建了一个`AlertDialog`并将其放在一个`Button` `OnClickListener`. 但是，该对话框正在使我的应用程序崩溃。

我的代码有什么问题？

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Are you sure you want to exit?")
   .setCancelable(false)
   .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            MyActivity.this.finish();
       }
   })
   .setNegativeButton("No", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
       }
   });
AlertDialog alert = builder.create(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:26:09.627

尝试添加

```
dialog.dismiss(); 
```

前

```
MyActivity.this.finish(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:15:23.010

检查以下代码。有用

```
 public class MainActivity extends Activity {
   CharSequence[] items = { “Google”, “Apple”, “Microsoft” };
        boolean[] itemsChecked = new boolean [items.length];
     /** Called when the activity is first created. */
      @Override
             public void onCreate(Bundle savedInstanceState) {
               super.onCreate(savedInstanceState);
              setContentView(R.layout.main);
             Button btn = (Button) findViewById(R.id.btn_dialog);
               btn.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
            showDialog(0);
       }
         });
     }
      @Override
         protected Dialog onCreateDialog(int id) {
         switch (id) {
         case 0:
          return new AlertDialog.Builder(this)
       .setIcon(R.drawable.icon)
       .setTitle("This is a dialog with some simple text...")
         .setPositiveButton("OK", new
        DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog,
            int whichButton)
      {
        Toast.makeText(getBaseContext(),
                               "OK clicked!", Toast.LENGTH_SHORT).show();
          }
         })
    .setNegativeButton("Cancel", new
    DialogInterface.OnClickListener() {
     public void onClick(DialogInterface dialog,
     int whichButton)
     {
       Toast.makeText(getBaseContext(),
       "Cancel clicked!", Toast.LENGTH_SHORT).show();
       }
      })
      )
     .create();
     }
    return null;
       }
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:10:44.793

试试这个：

```
AlertDialog.Builder builder = new AlertDialog.Builder(Json_ReadActivity.this);
builder.setMessage("are you sure want to exit");
builder.setNeutralButton("Ok",new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(),"text",Toast.LENGTH_LONG).show();
    }
});

builder.show(); 
```

# android - IndexOutOfBounds - 错误的根源是什么？

> ID：11921348
> 
> 赞同：0
> 
> 时间：2012-08-12T10:03:51.930
> 
> 标签：android, sqlite

我有一个带有通话记录信息（姓名、电话号码、日期和时间、持续时间）的自定义列表视图。单击某个项目有时会出现错误：

> *java.lang.IndexOutOfBoundsException：索引 2 无效，大小为 0*

在代码下面标记的行上。

该应用程序在市场上，我还没有遇到这个错误，我也想不出一种方法来创建它。我需要帮助找出可能的原因。

这是代码：

```
lv1.setOnItemClickListener(new OnItemClickListener(){
@Override
public void onItemClick(AdapterView<?> a, View v, int position, long id) {

        Toast.makeText(Calllogs.this, "short click: " + position, Toast.LENGTH_SHORT).show(); 

        if (arr_calllog_name2.size() > 0) arr_calllog_name2.clear();
        if (arr_calllog_phone2.size() > 0) arr_calllog_phone2.clear();
        if (arr_calllog_type2.size() > 0) arr_calllog_type2.clear();
        if (arr_calllog_duration2.size() > 0) arr_calllog_duration2.clear();
        if (arr_calllog_date2.size() > 0) arr_calllog_date2.clear();
        if (arr_calllog_contactid2.size() > 0) arr_calllog_contactid2.clear();

        HotOrNot info2 = new HotOrNot(Calllogs.this);
        info2.open();

        //Some user selected options like view only the incoming, outgoing calls, sort by alphabet or date... 
        LoadView(); 
        LoadSort(); 
        LoadSortBy();

        if (loadedview == 4) {
            if (loadedsortby == 1) //sort by alphabet
            {
                cursorL = info2.getAllTitlesViewSort2Date(loadedsort, d1, d2);
            }
            else if (loadedsortby == 2) //sort by date
            {
                cursorL = info2.getAllTitlesViewSort4Date(loadedsort, d1, d2);
            }
        } else {
            if (loadedsortby == 1) //sort by alphabet
            {
                cursorL = info2.getAllTitlesViewSort1Date(loadedview, loadedsort, d1, d2);
            }
            else if (loadedsortby == 2) //sort by date
            {
                cursorL = info2.getAllTitlesViewSort3Date(loadedview, loadedsort, d1, d2);
            }
        }

         if (cursorL.moveToFirst()){
             do{
                  arr_calllog_name2.add(cursorL.getString(1));
                  arr_calllog_phone2.add(cursorL.getString(2));
                  arr_calllog_type2.add(cursorL.getString(3));
                  arr_calllog_duration2.add(cursorL.getString(4));
                  arr_calllog_date2.add(cursorL.getString(5));
                  arr_calllog_contactid2.add(cursorL.getString(6));
            }while (cursorL.moveToNext());
        }

        info2.close();

        name = arr_calllog_name2.get(position); //error line
        phone = arr_calllog_phone2.get(position);
        type = arr_calllog_type2.get(position);
        duration = arr_calllog_duration2.get(position);
        date = arr_calllog_date2.get(position);
        contactid = arr_calllog_contactid2.get(position);

        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_DIAL);
        intent.setData(Uri.parse("tel:" + phone));
        startActivity(intent);
    }
}); 
```

所以起初有一个带有项目的列表视图。用户单击一个项目，然后活动力关闭。CursorL 定义在代码的开头（Cursor cursorL）。这些 `LoadView(); LoadSort(); LoadSortBy();`函数按字母或日期对列表进行排序，仅显示来电和/或去电等。首先它们必须给出一个值，因为我为它们设置了默认值：

```
public void LoadView() {
    sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
    loadedview = sharedPreferences.getInt("view", 4);
}

public void LoadSort() {
    sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
    loadedsort = sharedPreferences.getString("sort", "DESC");
}

public void LoadSortBy() {
    sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
    loadedsortby = sharedPreferences.getInt("sortby", 2);
} 
```

该`loadedsortby`变量只能有两个值：1 和 2，我检查了。`loadedview`只能有 4 个值：1,2,3,4 。

我能想到的只是`cursorL`，因此`arr_calllog_name2`数组列表是空的，但我不知道它是怎么可能的。

作为示例，我发布了填充 cursorL 的查询之一：

```
public Cursor getAllTitlesViewSort1Date(int view, String sort, String date1, String date2) {
        return ourDatabase.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE " + KEY_DATE + " BETWEEN '" + date1 + "'" + " AND '" + date2 + "'" + " AND " + KEY_TYPE + " = '" + view + "'" + " ORDER BY " + KEY_NAME + " COLLATE NOCASE " + sort, null);
    } 
```

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:10:20.303

而不是使用这个...

```
if (cursorL.moveToFirst()){
             do{
                  arr_calllog_name2.add(cursorL.getString(1));
                  arr_calllog_phone2.add(cursorL.getString(2));
                  arr_calllog_type2.add(cursorL.getString(3));
                  arr_calllog_duration2.add(cursorL.getString(4));
                  arr_calllog_date2.add(cursorL.getString(5));
                  arr_calllog_contactid2.add(cursorL.getString(6));
            }while (cursorL.moveToNext());
        } 
```

尝试

```
cursorL.getCount() 
```

如果计数不为 0，则执行此操作...

```
 cursorL.moveToFirst();
        while(!cursorL.isAfterLast())
        {
            arr_calllog_name2.add(cursorL.getString(1));
                  arr_calllog_phone2.add(cursorL.getString(2));
                  arr_calllog_type2.add(cursorL.getString(3));
                  arr_calllog_duration2.add(cursorL.getString(4));
                  arr_calllog_date2.add(cursorL.getString(5));
                  arr_calllog_contactid2.add(cursorL.getString(6));
            cursorL.moveToNext();
        }
        cursorL.close(); 
```

# ruby-on-rails - 无法在 localhost 上使用 RoR 3.2.3 启动 nginx（和乘客）

> ID：11921349
> 
> 赞同：2
> 
> 时间：2012-08-12T10:03:59.430
> 
> 标签：ruby-on-rails, nginx

我试图让 nginx 和 Rails 3.2.3 在本地主机上一起工作。我浏览了这个说明[http://www.modrails.com/install.html](http://www.modrails.com/install.html)。我所做的是

```
gem install passenger
passenger-install-nginx-module 
```

所以应该够了。然后我添加

```
server {
        listen 80;
        server_name www.mysite.org;
        root /home/alex/RubymineProjects/psg;
        passenger_enabled on;
    } 
```

并且，启动 nginx，我得到了一个错误

```
Starting nginx: nginx: [emerg] unknown directive "passenger_enabled" in /etc/nginx/nginx.conf:16
nginx: configuration file /etc/nginx/nginx.conf test failed 
```

在 nginx 运行良好之前，它显示`"Welcome to nginx!"`在`http://localhost`. 你的意见？

# ruby-on-rails - 是否有构建导航的宝石 来自routes.rb？

> ID：11921354
> 
> 赞同：1
> 
> 时间：2012-08-12T10:04:19.630
> 
> 标签：ruby-on-rails, navigation

我一直在使用简单导航来满足我所有的 Rails 菜单构建需求，它很棒。但一个念头突然袭击了我。

是否有任何 gem 可以通过与文件互操作来生成用于生成导航菜单的典型无序列表`routes.rb`？

或者，是否有任何好的编码实践来以编程方式生成可重用的导航树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:55:00.970

`simple-navigation`您可以通过循环路由集来生成一个：`Rails.application.routes.routes`

# java - 什么真正的java源代码实现了桥接模式？

> ID：11921356
> 
> 赞同：1
> 
> 时间：2012-08-12T10:04:43.260
> 
> 标签：java, design-patterns, bridge

我需要找出一些现实世界中实现桥接模式的实例。谁能给我一些例子？JAVA 源代码中的类将是最好的，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:09:15.610

这篇文章有很清楚的例子 [http://java.dzone.com/articles/design-patterns-bridge](http://java.dzone.com/articles/design-patterns-bridge)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:56:10.053

[您可以在此 Wikipedia页面](http://en.wikipedia.org/wiki/Bridge_pattern)上找到您要查找的内容。

# c++ - 不同的答案：两个简单的相同整数计算？

> ID：11921358
> 
> 赞同：10
> 
> 时间：2012-08-12T10:04:51.960
> 
> 标签：c++, integer

下面有两种情况，操作看似相同，但产生的结果相差1。我想我不需要解释编程，很简单。

变量声明是第一个，场景1是1)和2 = 2)，得到的结果列在每个场景的最后。

任何帮助将不胜感激。

```
int intWorkingNumber = 176555;

int intHundreds = 1;

int intPower = 1; 
```

1)

```
int intDeductionValue = (intHundreds * 100 * pow(1000, intPower));

intWorkingNumber -= intDeductionValue;  

intWorkingNumber = 76555 
```

2)

```
intWorkingNumber -= (intHundreds * 100 * pow(1000, intPower))

intWorkingNumber = 76554 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-12T10:12:12.437

两个代码示例之间的区别在于转换为 int 的时间。

第一个版本与此代码类似，在减去*之前将其转换为整数：*

```
intWorkingNumber = 176555 - (int)(1 * 100 * pow(1000, 1)); 
```

第二个版本与此类似，在减去*后转换为整数：*

```
intWorkingNumber = (int)(176555 - (1 * 100 * pow(1000, 1))); 
```

The function `pow` returns a floating point number. If the result of `1 * 100 * pow(1000, 1)` is not *exactly* equal to `100000.0000` (and with floating point operations, you should not normally rely on exact results) these two are not equivalent.

Consider this simpler example:

```
x = 10 - (int)0.001;   // x = 10 - 0;     => x = 10
y = (int)(10 - 0.001); // y = (int)9.999; => y = 9 
```

# php - 在 wordpress 中查看帖子

> ID：11921360
> 
> 赞同：0
> 
> 时间：2012-08-12T10:04:59.583
> 
> 标签：php, wordpress

我正在使用此代码列出我在 wordpress 中插入的所有帖子`index.php`

```
<?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args = array( 'post_type' => 'post', 'posts_per_page' => 10, 'paged' => $paged );
$wp_query = new WP_Query($args);
while ( have_posts() ) : the_post(); ?>
    <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>
<?php endwhile; ?>

<!-- then the pagination links -->
<?php next_posts_link( '&larr; Older posts' ); ?>
<?php previous_posts_link( 'Newer posts &rarr;' ); ?> 
```

我的链接是这样的形式，`http://localhost/?p=314`一旦我点击链接，我会得到一个非常不整洁的页面。当我查看 211 主题时，我看到了 single.php，但我不知道它是如何用于显示帖子的。Will例如，我需要一个模板`view.php`或`single.php`显示帖子，如果是，如何？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:23:21.150

是的，您需要对 single.php 进行更改，以重新格式化这些单独帖子的显示方式。

请注意，您可以在设置 -> 固定链接中将固定链接从默认 (?p=314) 更改为搜索引擎友好优化的固定链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:23:41.283

阅读以下网址

WordPress 提示：如何在您想要的任何地方显示特定帖子

[http://lorelle.wordpress.com/2007/09/08/wordpress-tip-how-to-display-a-specific-post-anywhere-you-want/](http://lorelle.wordpress.com/2007/09/08/wordpress-tip-how-to-display-a-specific-post-anywhere-you-want/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T11:29:55.127

我将此代码放入`single.php`文件中，帖子现在按预期显示

```
 <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
      <?php the_content();?>
      <?php endwhile;?>
      <?php endif; ?> 
```

# python - MySQL 并锁定一个表，读取，然后截断

> ID：11921366
> 
> 赞同：6
> 
> 时间：2012-08-12T10:06:09.863
> 
> 标签：python, mysql, mysql-python

我在python中使用mysqldb。

我需要为一张桌子做以下事情。

```
1) Lock
2) Read
3) Truncate the table
4) Unlock 
```

当我运行以下代码时，出现以下错误。所以，我不太确定如何锁定表格以读取它，然后截断表格。我需要确保没有其他连接读取数据。

```
asin_list = [] 
    conn = MySQLdb.connect(host=parms['database']['operations']['host'],user=parms['database']['operations']['username'],passwd=parms['database']['operations']['password'],db=parms['database']['operations']['database'])
    cursor = conn.cursor()

    query = "LOCK TABLES asin_one_time_only READ"
    cursor.execute(query)
    print 'fu1'

    query = """select asin FROM asin_one_time_only""" 
    cursor.execute(query)
    rows = cursor.fetchall()
    for row in rows:
        asin_list.append(row[0]) 

    print asin_list
    print 'fu2'
    query = "UNLOCK TABLES;"
    cursor.execute(query)
    conn.commit()

    print 'fu3'
    query = "LOCK TABLES asin_one_time_only WRITE"
    cursor.execute(query)

    query = """truncate table amz_one_time_only""" 
    cursor.execute(query)
    conn.commit()

    print 'fu3'
    query = "UNLOCK TABLES;"
    cursor.execute(query)
    conn.commit()

    cursor.close()
    conn.close() 

Traceback (most recent call last):
  File "/home/ubuntu/workspace/Amazon-Products-Crawler-1/threaded_crawl.py", line 1086, in <module>
    onetime = getOneTimeOnlyAsins(parms)
  File "/home/ubuntu/workspace/Amazon-Products-Crawler-1/threaded_crawl.py", line 109, in getOneTimeOnlyAsins
    cursor.execute(query)
  File "/usr/lib/pymodules/python2.7/MySQLdb/cursors.py", line 166, in execute
    self.errorhandler(self, exc, value)
  File "/usr/lib/pymodules/python2.7/MySQLdb/connections.py", line 35, in defaulterrorhandler
    raise errorclass, errorvalue
_mysql_exceptions.OperationalError: (1192, "Can't execute the given command because you have active locked tables or an active transaction") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T10:13:33.870

您不能截断为写入而锁定的表。这是因为“截断”的意思是“销毁表，并重新创建一个具有相同模式的新表”。

但是，您可以*清空*表格。而不是`TRUNCATE TABLE asin_one_time_only`使用`DELETE FROM asin_one_time_only`. 请注意，这不会重置自动增量编号。如果您也想重置它，请使用`ALTER TABLE asin_one_time_only auto_increment=1`

我建议这样做：

```
LOCK TABLES asin_one_time_only READ;
SELECT asin FROM asin_one_time_only;
-- minimize the possibility of someone writing to the table in-between
-- an "UNLOCK TABLES" and a "LOCK TABLES" by just issuing a new LOCK TABLES
-- I am not 100% sure that MySQL will do this atomically, so there is a
-- possibility that you may delete a row that was not read.
-- If this is unacceptable, then use a "LOCK TABLES asin_one_time_only WRITE"
-- from the very beginning.
LOCK TABLES asin_one_time_only WRITE;
DELETE FROM asin_one_time_only;
ALTER TABLE asin_one_time_only auto_increment=1;
UNLOCK TABLES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:08:48.327

您不能截断为写入而锁定的表。

这里有一个关于这个问题的辩论：http: //bugs.mysql.com/bug.php?id= [20667](http://bugs.mysql.com/bug.php?id=20667)

但是，您可以做的是删除表并重新创建它。

# json - Cakephp 分页助手

> ID：11921367
> 
> 赞同：0
> 
> 时间：2012-08-12T10:06:10.037
> 
> 标签：json, api, cakephp, pagination

我需要在 cakephp 中实现分页。

我正在从 Apple 提供的 json url 中检索数据。

[http://itunes.apple.com/search?term=games&limit=10&lang=en_us&country=GB&media=software&version=2](http://itunes.apple.com/search?term=games&limit=10&lang=en_us&country=GB&media=software&version=2)

如何在 cakephp 的帮助下实现分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:08:11.820

[http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html) 与数组数据源或某种可以以蛋糕方式提供数据的特殊数据源相结合。然后核心类可以以通常的方式使用它。

# javascript - 如何使用javascript将值插入到与另一个字符串匹配的位置的字符串中？

> ID：11921375
> 
> 赞同：1
> 
> 时间：2012-08-12T10:07:24.993
> 
> 标签：javascript, jquery

我有一个名为 selectText 的字符串变量，其中包含以下文本：

```
<option value="0101" title="xxxx">A</option><option value="0102" title="xxx">B</option> ..... 
```

我有一个名为 selectedVal 的字符串变量，其中包含一个可以是“0101”或“0102”等的值

有没有一种使用javascript的方法，如果我提供selectedVal，我可以修改selectText以添加单词selected="selected"。因此，例如，如果 selectedVal 的值为“0102”，那么我将返回添加了 selected="selected" 的 selectText。

```
<option value="0101" title="xxxx">A</option><option value="0102" selected="selected" title="xxx">B</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:08:47.927

试试这个：

```
$('select').val(selectedVal) 
```

或者：

```
$('select option[value='+selectedVal+']').prop('selected', true) 
```

或者您可以在附加选项后`select`使用方法设置元素的值：`val()`

```
var selectText = '<option value="0101" title="xxxx">A</option><option value="0102" title="xxx">B</option';
var selectVal ='0102';

$('select').append(selectText).val(selectVal) 
```

[演示](http://jsfiddle.net/DrEcq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:15:59.363

如果我们从字面上理解您所说的话，因为您有 2 个字符串变量*selectText*和*selectVal* ，那么您只需要`replace`对您的*selectText*变量使用一个字符串。像这样：

```
var selectText = '<option value="0101" title="xxxx">A</option><option value="0102" title="xxx">B</option>';
var selectedVal = '0102';

var pattern = 'value="' + selectedVal + '"';
selectText = selectText.replace(pattern, pattern + ' selected="selected"'); 
```

这导致字符串变量*selectText*具有以下值：

```
<option value="0101" title="xxxx">A</option><option value="0102" selected="selected" title="xxx">B</option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:27:51.443

```
selectText = selectText.replace ('"' + selectedValue + '"', 
    '"' + selectedValue + '" selected="selected"'); 
```

将搜索`selectedText`用`selectedValue`双引号括起来的内容并将其替换为自身加上字符串`'selected="selected"'`。我想这就是你所要求的。

预料到您的下一个问题，请使用以下命令还原原始问题：

```
selectText = selectText.replace (' selected="selected"', ''); 
```

# asp.net-mvc - 为什么总是将 ActionResult 定义为返回类型，尽管返回了 ViewResult 或 PartialViewResult

> ID：11921382
> 
> 赞同：0
> 
> 时间：2012-08-12T10:08:07.770
> 
> 标签：asp.net-mvc

2个典型样本：

```
public ActionResult Index()
{
   return View();
}

[HttpGet]
public ActionResult Create()
{
   return PartialView();
} 
```

为什么他们不返回最合适的类型，如 ViewResult 和 PartialViewResult？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T10:16:57.843

当然，*在这种情况下*`ViewResult`它们可以有一个或`PartialViewResult`返回类型。但它究竟会给你带来什么好处呢？如果稍后您决定在某些情况下（例如，当请求来自 Ajax 调用时）要返回，该怎么办？*`JsonResult`*

 *您通常不会自己处理操作方法的返回值。它是由 MVC 框架在幕后处理的，所以你真的不关心签名。*

# android - Facebook 的“分享图片”PICK 意图（与图库相同）返回什么？

> ID：11921390
> 
> 赞同：0
> 
> 时间：2012-08-12T10:09:07.693
> 
> 标签：android, android-intent

我正在尝试实现 PICK 意图过滤器，到目前为止，我已经将它们放在上下文菜单中，但是我该如何回复以这种方式启动应用程序的人呢？

可以说我有活动：

```
 <activity
        android:name="ListActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.PICK" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="image/*" />
        </intent-filter>
    </activity> 
```

现在我通过 Facebook 通过分享照片并选择我自己的应用程序来开始这项活动，我有以下代码：

```
File f = new File(Environment.getExternalStorageDirectory(), "image.jpg");
Uri uri = Uri.fromFile(f);
if(f.exists()) System.out.println("exists");
Intent data = new Intent();
data.setData(uri);
setResult(RESULT_OK, data);
finish(); 
```

然而，Facebook 应用程序（我目前正在测试我的实现）中没有任何反应。如果我再次使用 Facebook 中的“分享照片”，但使用图库应用程序选择图像，那么我希望我的应用程序可以正常工作。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:19:21.070

我会说他们搞砸了他们的实施。Facebook 应用程序不是那么好已经不是什么秘密了。你的代码对我来说似乎没问题（特别是因为它可以与 Gallery 一起使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:28:59.587

在仔细研究之后，我发现问题出在 Uri 的方案中。您不能将带有文件方案（“file://...”）的 Uri 传递给 Facebook 应用程序。它什么也不做。相反，如果您使用 content-scheme ("content://...") 来处理相同的图像，它就可以完美地工作。

如何在这两者之间进行转换是单独的问题。

# jquery - 为 jQuery UI 对话框设置按钮文本

> ID：11921397
> 
> 赞同：4
> 
> 时间：2012-08-12T10:10:47.917
> 
> 标签：jquery, jquery-ui, button, jquery-ui-dialog

我（成功）设置 jQuery UI 对话框按钮文本的所有地方都已停止工作。按钮出现并且功能正常，但是在所有测试的浏览器（IE、Safari、Chrome、Firefox 和 Opera）中都没有显示文本。使用 Chrome 的检查器和 Firebug，似乎文本甚至没有设置在按钮上，而不是 CSS 问题）。

最近唯一改变的是我们已经使用 jQuery UI 1.8.22 迁移到 jQuery 1.8.0，并且无法再次降级。

可以在 jsFiddle [http://jsfiddle.net/F7pGu/上找到一个简化的示例](http://jsfiddle.net/F7pGu/)

**示例 HTML**：

```
<div id="form">
    <h1>Blah</h1>
</div>

<button id="array-test">Array Test</button>
<button id="object-test">Object Test</button> 
```

​<strong>示例 JavaScript：

```
var $form = $('#form'),
    $arrTest = $('#array-test'),
    $objTest = $('#object-test');

$arrTest.click(function(){
    $form.dialog({
        buttons: [
            {
                text: 'Cancel'                
            },
            {
                text: 'Save'
            }
        ]
    });
});

$objTest.click(function(){
    $form.dialog({
        buttons: {
            'Cancel': function () {},
            'Save': function () {}
        }
    });
});
​ 
```

我在阅读文档时找不到任何错误。我们一直使用 object-test 方法，但文档现在提到了 array-test 方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T10:22:55.090

我做了一些研究，因为这确实是一个奇怪的问题。原来是一个已知问题，并且已经为它创建了一个错误跟踪器。

这是解释问题和当前解决方法 的[**错误跟踪器。**](https://forum.jquery.com/topic/ui-dialog-buttons-with-jquery-ui-1-8-0-empty-text#14737000003544381)

为方便起见，这里是票证本身的直接链接，该[**票证**](http://bugs.jqueryui.com/ticket/8484)本身已经修复并设置为包含在 1.8.23 版本中。

将以下代码行添加到您的脚本将使对话框再次工作：

```
if ( $.attrFn ) { $.attrFn.text = true; } 
```

见[**演示**](http://jsfiddle.net/F7pGu/1/)

这也是错误跟踪器中链接的附加[**SO Post 。**](https://stackoverflow.com/questions/11907661/jquery-ui-1-8-22-with-jquery-1-8-doesnt-have-text-in-dialog-buttons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:27:51.473

一个更简单的解决方案是在包含 jQuery 库后使用此代码段：

```
if ( $.attrFn ) { $.attrFn.text = true; } 
```

***[这](http://jsfiddle.net/blasteralfred/F7pGu/2/)***是为您纠正的工作小提琴。希望这可以帮助。

# cordova - 如何使用 Cordova 文档在 Phonegap 中发送短信？

> ID：11921401
> 
> 赞同：1
> 
> 时间：2012-08-12T10:11:34.940
> 
> 标签：cordova, phonegap-plugins

[这是对此](https://stackoverflow.com/questions/11916704/is-it-possible-to-send-sms-from-phonegap-html-javascript-application-using-phone)的后续问题，我认为我们可以使用[Phonegap](http://docs.phonegap.com/en/2.0.0/index.html)文档在 javascript 中访问手机的本机功能。我尝试使用通知 api，它运行良好，但在文档中找不到有关发送 SMS 的任何内容。我遇到过[Phonegap-Start](https://github.com/phonegap/phonegap-start/)套件和[SMSPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMSPlugin) for Phonegap，但不知道如何将其与 Phonegap-Start 集成。除此之外，我使用[build.phonegap.com](http://build.phonegap.com)来构建我的应用程序，所以我没有使用 eclipse，这就是为什么 SMSPlugin 的自述文件没有太多帮助的原因。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:44:16.997

目前是不可能的。

看起来您还不能在 Phonegap Build 中添加自己的插件：

[https://build.phonegap.com/docs/plugins](https://build.phonegap.com/docs/plugins)

此外，尚未正式更新 SMSPlugin 以与 Phonegap 2.0 一起使用 AFAIK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T17:24:52.500

您不需要PhoneGap 插件来执行此操作，使用html 或js 打开“sms://”协议链接。整个网络上都有松散的文档（但来自 Apple 或 Google 开发者网站的官方文档并不多）。[在 SO here](https://stackoverflow.com/questions/6480462/how-to-pre-populate-the-sms-body-text-via-an-html-link)上有一个不错的线程，包括 iOS 7+ 的语法如何更改。

# web-services - 动态公开 Web 服务

> ID：11921402
> 
> 赞同：1
> 
> 时间：2012-08-12T10:11:41.373
> 
> 标签：web-services, spring, cxf, jibx

我有一个纯 pojo 业务接口和实现，没有 jax-ws/spring 注释。如果这些服务配置了特定的自定义注释，我想将它们动态地公开为 Web 服务。您能否提出一些我可以进一步发展的想法和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:08:42.697

CXF 绝对可以解决这个问题。CXF“简单”前端专为无注释服务而设计。您可以编写自己的 DefaultServiceConfiguration 子类，如果您需要特定的定制，可以从任何来源提取所需的信息。（JAX-WS 子类从 JAX_WS 注释中提取）

# c# - ClickOnce 应用程序替换当前安装的文件

> ID：11921404
> 
> 赞同：50
> 
> 时间：2012-08-12T10:12:04.590
> 
> 标签：c#, clickonce

使用 ClickOnce 应用程序，是否可以在创建新版本时替换当前文件或安装在不同的目录中？因为我得到的错误是：

> 无法安装此应用程序，因为已安装具有相同标识的应用程序。要安装此应用程序，请修改此应用程序的清单版本或卸载预先存在的应用程序。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-12T10:37:13.173

正如错误消息所说，有两种选择。

首先，作为开发人员，您应该修改 ClickOnce 清单的版本号。这是在项目设置的 ClickOnce 选项卡中完成的。请注意，ClickOnce 版本与您的程序集（程序集）版本没有任何共同之处。

另一种选择是卸载应用程序，不幸的是，这可能必须手动完成。您必须找到 ClickOnce 部署文件夹 ( `C:\Users\username\AppData\Local\Apps\2.0`) 并手动删除所有文件夹内容。这也可以通过调用

```
 rundll32 dfshim CleanOnlineAppCache 
```

从命令行命令。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-02T18:26:34.030

当我遇到这个错误时，是因为我想要同一个程序有两个不同的安装位置。具体来说，Program_A 已在线发布到两个位置，并且在更改程序中的一个小东西后，我希望它们都安装在同一台机器上，但来自不同的 ClickOnce 链接。

因此，在收到该错误后，我没有尝试调整清单，而是更改了选项。项目设置->发布->选项->我编辑了[发布名称，套件名称：，产品名称：]。您可能不必更改所有三个。

我现在有两个安装运行。ClickOnce 将安装在不同的目录中，但它会删除第一个桌面快捷方式。

如果你不想走那条路，清单信息就在这里。
[https://msdn.microsoft.com/en-us/library/ws1c2fch.aspx](https://msdn.microsoft.com/en-us/library/ws1c2fch.aspx)

您的清单通常位于 bin/debug(release)/yourprogramname.application 下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T23:58:11.503

我还发现两者`rundll32 dfshim CleanOnlineAppCache`或`mage.exe -cc`似乎都不起作用，我仍然得到同样的错误。

我已经手动删除了部署文件夹。

在 Windows XP 上，部署文件夹的路径是`C:\Documents and Settings\UserName\Local Settings\Apps`.

# jquery - jQuery选择器问题？

> ID：11921409
> 
> 赞同：1
> 
> 时间：2012-08-12T10:13:29.177
> 
> 标签：jquery

我有 2 张桌子。

```
 <table border="1" class="a">
            <tr>
                <td>Value 1</td>
                <td>2</td>
            </tr>
            <tr>
                <td>Value 2</td>
                <td></td>
            </tr>
        </table>

        <table border="1"  class="b">
            <tr>
                <td>Value 1</td>
                <td>2</td>
            </tr>
            <tr>
                <td>Value 2</td>
                <td></td>
            </tr>
        </table> 
```

在表 #1 我写：

```
 $(".a td:parent").fadeTo(1500, 0.3); 
```

结果是：

![在此处输入图像描述](../Images/c79dc4619238e3da89fbc880c6fd7baf.png)

*注意没有*淡出的绿色。

但这没有任何意义。我写了“去*父母*那里-这是**TR**并全部淡化”

好的，也许答案是因为它内部没有值，而其他 3`td's`有。

所以我测试了（在*第二张*桌子上）：

```
$(".b tr").fadeTo(1500, 0.3); 
```

它确实使*所有*TR 褪色（尽管最后一个单元格是空的）....

![在此处输入图像描述](../Images/6d83a54a5ed3a0548dc1c8d6ac1307c7.png)

这里发生了什么？

jsbin：http: [//jsbin.com/ehacen/1/edit](http://jsbin.com/ehacen/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T10:18:45.000

问题出在第一个例子上。根据 API ( [http://api.jquery.com/parent-selector/](http://api.jquery.com/parent-selector/) )，`:parent`选择其中包含内容的内容。所以第一个选择器是说“获取所有`<td>`包含内容的s”，所以它只选择前三个`<td>`s。要选择 s 的所有父母`<td>`，请使用以下命令：

```
$('.a td').parent() 
```

希望这可以为您解决问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T10:20:55.217

选择器[:parent](http://api.jquery.com/parent-selector/)将与一个孩子一起查看 td （在这个例子中，你所有的三个 td 都有一个 textNode 作为孩子，而不是最后一个。[:parent](http://api.jquery.com/parent-selector/)不会上升你需要使用的 dom 树：

```
$(".a td").parent().fadeTo(1500, 0.3); 
```

或者如果你想使用 :parent:

```
$(".a tr:parent").fadeTo(1500, 0.3); 
```

我认为您需要等到 CSS4 附带其父选择器[http://www.w3.org/TR/2011/WD-selectors4-20110929/](http://www.w3.org/TR/2011/WD-selectors4-20110929/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:23:19.497

如果您正在构建一些更复杂的选择器，那么您可以使用`:has()`选择器：

[http://api.jquery.com/has-selector/](http://api.jquery.com/has-selector/)

```
$(".a tr:has(td)").fadeTo(1500, 0.3); 
```

# sql - 列“dbo.Class2.ID”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在按子句分组中

> ID：11921411
> 
> 赞同：0
> 
> 时间：2012-08-12T10:13:38.783
> 
> 标签：sql, sql-server-2008, sql-function

我正在尝试创建一个 Sql 函数，通过指定学生的班级状态来获取学生列表。我可以创建一个函数来为单个用户检索此类信息，但是当我尝试获取所有学生的列表时，我得到这个错误。这是我在 Sql 中的函数声明：

```
 CREATE FUNCTION dbo.Function_GetListOfStudentsWithClassStatus
    (
@ClassTypeid int,
@VerificationCode bit
    )
RETURNS TABLE/* @table_variable TABLE (column1 datatype, column2 datatype) */
AS

    RETURN SELECT        *, COUNT(*) AS CLassNumbers
FROM            dbo.tblClass2
WHERE         (ClassTypeID = @ClassTypeid) AND (Verified = @VerificationCode)
GROUP BY StNID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:19:17.840

**使用聚合函数时（您使用的是 COUNT），您应该始终在查询的GROUP BY**子句中包含所有正在选择但未被所述函数处理的字段。

在您的示例中，您选择“*”，这意味着该表中的每个字段都需要在您的 GROUP BY 子句中提及。

# c - DMD：链接到 libc.a？或 core.simd 信息？

> ID：11921414
> 
> 赞同：3
> 
> 时间：2012-08-12T10:14:11.217
> 
> 标签：c, linker, d, dmd

我猜不，但我想从社区来到这里，因为我对这些东西没有真正的经验。是否可以使用 DMD 与 /etc/lib/libc.a （我在 Linux x64 上）链接？

我的原因是，我正在尝试让硬件 SSE 内在函数工作（除了简单的加法/减法/等），所以如果我能写的话会很棒：

```
// simdTest.d
import core.simd;

extern (C) float4 _mm_hadd_ps(float4 a, float4 b); // example

void main()
{
    float4 a = [1, 2, 3, 4];
    float4 b = [1, 1, 1, 1];
    float4 c = _mm_hadd_ps(a, b);
} 
```

并编译：

```
dmd /usr/lib/libc.a simdTest.d 
```

但我得到了各种我不知道如何理解的链接错误。再说一次，我猜有什么东西阻止我这样做，但如果不是，我想知道如何去做。

## 或者...

我真正需要的只是让向量工作。上面的 C 函数在 core.simd 中确实存在（排序），但我无法让它工作（不确定是否有错误，或者我做错了什么）。这是我的简单代码：

```
import core.simd;

void main()
{
    void16 a, b;
    void16 c = __simd(XMM.HADDPS, a, b);
} 
```

但编译器给了我一个：

```
Internal error: e2ir.c 3817 
```

编译时。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:21:43.833

1.  `_mm_hadd_ps`不是您可以链接的功能，它是内在的。它只能与支持该内在函数的编译器一起使用，而 DMD 不支持。

2.  编译器错误不是你的错。Any`Internal error`是编译器中的错误，应报告给 D 错误数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T08:21:51.590

@F i L：当我使用最新的 DMD 编译器（2.060）尝试您的代码时，我得到一个*预期*的错误：`Error: void does not have a default initializer`。自己检查一下：[http ://www.dpaste.dzfl.pl/fb6cd879](http://www.dpaste.dzfl.pl/fb6cd879)

D 不初始化 void 值。

如果您使用其他类型，它将起作用：

```
import core.simd;

void main()  {
  // void16 does not work because void16 is not initialised, testing with ubyte16
  ubyte16 a, b;
  ubyte16 c = __simd(XMM.HADDPS, a, b);
} 
```

你可以在这里测试它 - [http://www.dpaste.dzfl.pl/4ea6517b](http://www.dpaste.dzfl.pl/4ea6517b)

啊，回答你的第一个问题 - 默认情况下，你的 D 应用程序已经链接到 libc，它不在 /etc/lib/libc.a 中（除非你有一个奇怪的管理员将系统库放入 /etc/lib） ，它通常位于 /lib 或 /usr/lib 中（尤其是在最近将 /lib 合并到 /usr/lib 之后）。

# php - Zend 元数据缓存在文件中

> ID：11921419
> 
> 赞同：3
> 
> 时间：2012-08-12T10:14:59.883
> 
> 标签：php, zend-framework, zend-db, zend-cache, access-rights

我在 Zend Framework中设置了元数据缓存，因为执行了*很多*`DESCRIBE`查询并影响了性能。

```
$frontendOptions = array ('automatic_serialization' => true);
$backendOptions = array ('cache_dir' => CACHE_PATH . '/db-tables-metadata');
$cache = Zend_Cache::factory(
    'Core',
    'File',
    $frontendOptions,
    $backendOptions
);
Zend_Db_Table::setDefaultMetadataCache($cache); 
```

我确实可以看到创建的缓存文件，并且网站运行良好。

但是，当我启动单元测试或执行数据库查询的同一应用程序的脚本时，我最终会遇到错误，因为**Zend 无法读取缓存文件**。

这是因为在网站中，**缓存文件是由 www 用户创建的**，当我运行 phpunit 或脚本时，**它会尝试用我的用户读取它们，但它失败了**。

你有什么解决办法吗？我有一些快速修复的想法，但我正在寻找一个好的/稳定的解决方案。而且我宁愿`www`尽可能避免运行 phpunit 或脚本（出于实际原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:52:49.787

试试`sudo`命令。像这样的东西`$sudo -u www php -f run-tests.php`

**编辑**

也许

```
$backendOptions = array ('cache_dir' => CACHE_PATH . '/db-tables-metadata', 'cache_file_umask' => 0755, 'cache_file_perm' => 0755); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:38:21.760

你想在单元测试期间缓存表元数据吗？我通常会在开发/测试中禁用该缓存。

您可以尝试将您的测试用户添加到`www`组 ( `usermod -a -G www testuser`)。

缓存文件可能具有标准`644`权限，这意味着您的用户仍然无法修改文件，但如果您`777`在测试期间将缓存目录的权限设置为，那么您应该能够将新文件写入该目录。

如果您使用 CGI/FastCGI 运行 PHP，您可以让 PHP 作为您的用户而不是通用`www`用户运行。或者，如果您使用的是 Apache 模块，[`mod_suphp`](http://www.suphp.org/Home.html)也将允许您以用户身份运行 PHP。

对不起，它没有太多帮助，但希望能给你更多的想法..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T17:12:31.523

I had a problem of similar kind Later i could find that , Since I was running several other application server cache was getting clashed meaning two applications were using same cache , try naming the cacheobject for all types

and Also if you want you can also configure App.php file to create a different cache file for unit testing , This is a usual problem which occurs in shared hosting .

# javascript - 更改选择器后单击不触发

> ID：11921420
> 
> 赞同：0
> 
> 时间：2012-08-12T10:15:00.917
> 
> 标签：javascript, jquery, asp.net, events, selector

我在网站上有一个锚点。当有人单击它时，我会在 jquery 中执行 smth 并更改名称，但是当再次单击它时会触发事件，尽管我已经更改了它的名称。代码在这里：

```
$(".like_cont a[name=like]").click(function (e) {
                alert("W");
                var t = $(this);

                t.find("img").attr("src", "images/like_icon.png");

                var ls = parseInt(t.next().next()) + 1;
                t.next().next().text(ls);

                var params = "Like|" + t.attr("lik");
                CallServer(params, "");

                t.attr("name", "liked");
                e.preventDefault();
            }); 
```

在点击`name`被**喜欢**但另一个点击事件触发之后。如何更改选择器以保持射击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:24:14.943

您可以`.off()`根据 Iridio 的回答调用以删除事件处理程序。

或者您可以使用委托事件处理模型：

```
$(".like_cont").on("click", "a[name=like]", function (e) {
    ...
}); 
```

这依赖于点击（和大多数其他）事件从源元素通过其所有包含元素冒泡的事实。因此，使用与此语法绑定的处理程序`.on()`，每当（在此示例中）元素上发生单击时`".like_cont"`，jQuery 测试事件的源元素以查看它是否与第二个参数中的选择器匹配，如果匹配，`"a[name=like]"`则函数被调用，否则不被调用。

换句话说，使用委托处理模型，只有当点击的元素与*事件发生时第二个参数中*的选择器匹配时，才会调用该函数。

使用绑定`.click()`或`.on()` *不*绑定第二个参数的“标准”处理程序，事件将直接绑定到在事件绑定*时*与选择器匹配的元素 - 无论这些元素是否仍然与该选择器匹配事件发生的时间。（并不是说那是一件坏事——有时这正是你所需要的，只是在你目前的情况下不是这样。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:18:54.603

一种可能的方法是调用[.off()](http://api.jquery.com/off/)从您的对象中删除点击事件。

# android - 当 TableRow 中的 MultiLine 时 Android EditText 移动

> ID：11921421
> 
> 赞同：1
> 
> 时间：2012-08-12T10:15:04.607
> 
> 标签：android, android-edittext, tablelayout, tablerow

我有一个 Tablelayout，里面有很多 TableRows。而在这些 TableRows 里面，有很多 EditText。就像电子表格一样。

我的问题如下：当在 EditBox 中写入内容时，EditBoxs 仍然对齐：

![编辑框对齐](../Images/9084a0691701a427ee08d037488dd0b3.png)

但是当 EditBox 的内容变为多行时，我的 EditBox 不再对齐：
![编辑框未对齐](../Images/c004e6337379bac44f74c9f6bb785da5.png)

我认为问题可能来自我的 EditBox 在 TableRow 中没有垂直居中，但这是我做不到的。

这是我的 EditText 代码，我在 TableRows 中动态添加每个 EditText：

```
private EditText editTextCellule(int num, String texte, boolean pair){

            EditText cellule = new EditText(this);

            cellule.setLayoutParams(new TableRow.LayoutParams(num));
            cellule.setWidth(LARGEUR_CELLULE);
            cellule.setHeight(HAUTEUR_CELLULE);
            cellule.setTextSize(TypedValue.COMPLEX_UNIT_PX, getResources().getDimension(R.dimen.text_size_medium_minus));
            cellule.setText(texte);
            cellule.setKeyListener( new PerfKeyListener() );

            return cellule;
    } 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T10:35:34.030

您为以下行提供布局权重，这样它们就不会移动......

android:layout_weight = "1"

在表格行中......

# c# - 如何在不使用服务定位器模式的情况下访问 Ninject.Kernel

> ID：11921422
> 
> 赞同：11
> 
> 时间：2012-08-12T10:15:20.580
> 
> 标签：c#, dependency-injection, ninject

我已经阅读了数十篇关于这个主题的帖子，但没有找到关于如何在不使用服务定位器模式的情况下访问 Ninject.Kernel 的明确指南。

我目前在需要使用的类中有以下内容`CustomerBusiness`（这是我的服务）并且工作正常，但我很清楚这不是推荐的方法。

```
private CustomerBusiness _customerBusiness;

private ICustomerRepository CustomerRepository
{
    get { return NinjectWebCommon.Kernel.Get<IAccountRepository>(); }
}

private CustomerBusiness CustomerBusiness
{
    get
    {
        if (_customerBusiness == null)
        {
            _customerBusiness = new CustomerBusiness(AccountRepository);
        }

        return _customerBusiness;
    }
}

public Customer GetCustomer(int id)
{
    return CustomerBusiness.GetCustomer(id);
} 
```

这是上面代码中访问的 Kernel 属性：

```
public static IKernel Kernel
{
    get
    {
        return CreateKernel();
    }
} 
```

我已经阅读了很多关于为此使用工厂的建议，但没有一个解释如何**使用**这个工厂。**如果有人能向我展示“CustomerFactory”或任何其他推荐的方法，包括**如何**使用**它，我将不胜感激。

**更新**

我正在使用 ASP.NET Web 窗体，需要`CustomerBusiness`从 CodeBehind 访问。

**解决方案**

我发现有效的最终解决方案是在这篇文章中获得最多票数的答案： [如何在 asp.net Web 表单上实现 Ninject 或 DI？](https://stackoverflow.com/questions/4933695/how-can-i-implement-ninject-or-di-on-asp-net-web-forms)

它看起来像这样（注意从 PageBase 继承，它是 Ninject.Web 的一部分 - 这是关键！）：

```
public partial class Edit : PageBase
{
    [Inject]
    public ICustomerBusiness CustomerBusiness { get; set; }
    ... 
```

下面接受的答案间接引导我找到这个解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T10:24:14.670

由于您使用的是`NinjectWebCommon`，我假设您有某种 Web 应用程序。你真的应该只在一个地方访问 Ninject 内核——在[组合根目录](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。它是您构建对象图的地方，也是您唯一需要访问 IoC 容器的地方。要真正获得所需的依赖项，通常会使用[构造函数注入](http://dotnetslackers.com/articles/designpatterns/DI-Patterns-Constructor-Injection.aspx)。

例如，对于 MVC Web 应用程序，您有一个使用 Ninject 内核的控制器工厂，这是唯一引用它的地方。

为了扩展您的特定情况，您的类将`ICustomerBusiness`在其构造函数中接受，声明它需要一个实例`ICustomerBusiness`作为其依赖项：

```
class CustomerBusinessConsumer : ICustomerBusinessConsumer
{
    private readonly ICustomerBusiness customerBusiness;

    public CustomerBusinessConsumer(ICustomerBusiness customerBusiness)
    {
        this.customerBusiness = customerBusiness;
    }
    ...
} 
```

现在，无论哪个类`ICustomerBusinessConsumer`用作其依赖项，都将遵循相同的模式（接受一个实例`ICustomerBusinessConsumer`作为其构造函数参数）。您基本上从不使用**手动构建依赖项**`new`（除了特定例外）。

然后，您只需要确保您的类获得它们的依赖项，并且您在此组合根中执行此操作。组合根到底是什么取决于您正在编写的应用程序的类型（控制台应用程序、WPF 应用程序、Web 服务、MVC Web 应用程序......）

* * *

**编辑**：为了让自己熟悉 ASP.NET WebForms 领域的情况，我必须查看详细信息，因为我从未使用过它。不幸的是，WebForms 要求您在每个 Page 类中都有一个无参数的构造函数，因此您不能从对象图的顶部到底部一直使用构造函数注入。

然而，在查阅[Mark Seeman](http://www.manning.com/seemann/)关于在 WebForms 中组合对象的章节之后，我可以重新表述如何处理这个框架的低效率，同时仍然符合良好的 DI 实践：

1.  有一个类负责解决依赖关系，使用您设置的 Ninject 内核。这可能是内核周围的一个非常薄的包装器。让我们称之为`DependencyContainer`。

2.  创建您的容器并将其保存在应用程序上下文中，以便在您需要时准备好它

    ```
    protected void Application_Start(object sender, EventArgs e)
    {
       this.Application["container"] = new DependencyContainer();
    } 
    ```

3.  假设您的页面类（我们称之为`HomePage`）依赖于`ICustomerBusinessConsumer`. 然后`DependencyContainer`必须允许我们检索以下实例`ICustomerBusinessConsumer`：

    ```
    public ICustomerBusinessConsumer ResolveCustomerBusinessConsumer()
    {
        return Kernel.Get<ICustomerBusinessConsumer>();
    } 
    ```

4.  与`MainPage`类本身相比，您将在默认构造函数中解析其依赖项：

    ```
    public MainPage()
    {
        var container = (DependencyContainer) HttpContext.Current.Application["container"];
        this.customerBusinessConsumer = container.ResolveCustomerBusinessConsumer();
    } 
    ```

几点注意事项：

*   在 中拥有可用的依赖容器`HttpContext`一定不要将其视为服务定位器。事实上，这里的最佳实践（至少从忠实于 DI 的角度来看）是拥有某种“实现器”类，您将向其传递页面类的功能。

    例如，由其处理的每个动作`MainPage`将仅中继到其实现者类。这个实现类将是一个依赖项，`MainPage`并且与所有其他依赖项一样，将使用容器解析。

    重要的部分是这些实现类**应该在不引用 ASP.NET 程序集的程序集中**，因此没有机会访问`HttpContext`

*   必须编写这么多代码来实现这一点当然不理想，但这只是框架限制的结果。例如，在 ASP.NET MVC 应用程序中，这种情况的处理方式要好得多。在那里，您可以单点组成对象图，而不必像在 WebForms 中那样在每个顶级类中解析它们。

*   好消息是，虽然您必须在页面类构造函数中编写一些管道代码，但从那里向下对象图您可以使用构造函数注入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:24:28.950

构造函数注入是带有 ninject 的 DI 的首选方法，但它也支持属性注入。在此处阅读有关注入模式的 ninject 页面[https://github.com/ninject/ninject/wiki/Injection-Patterns](https://github.com/ninject/ninject/wiki/Injection-Patterns)。

这两种都是注入模式，与基于请求的服务位置不同，根本不是真正的注入。

注入的另一面是你需要控制构造。使用 MVC 时，执行此操作的所有接线都内置在 nuget 上的 MVC ninject 包中

# android - 混淆使用 ADT 20

> ID：11921424
> 
> 赞同：1
> 
> 时间：2012-08-12T10:15:35.270
> 
> 标签：android

我可以在 ADT 20 中使用 API 10 吗？当我创建一个新项目时，如果我`targetSdk`在 API 15 下选择，我总是会得到。（与上周我使用 ADT 18 时不同）

我想创建一个简单的“hello world”项目，它将在`Gingerbread`. 使用 ADT 20，eclipse 迫使我使用 API 15 或更高版本创建一个新项目。我怎么解决这个问题？

我正在使用 eclipse indigo、最新的 SDK 和 ADT 20。

我的 MainActivity 出现错误：

```
getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) { 
```

案例android.R.id.home：

我得到一个错误`getActionBar()`......和案例android.R.id.Home

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:33:12.693

> 我可以在 ADT 20 中使用 API 10 吗？

是的你可以。

> 当我创建一个新项目时，如果我在 API 15 下选择 build sdk，我总是会查看项目错误。

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

那是因为您使用的是 ActionBar。您不能在 API 13< 中使用 ActionBar。如果您将 设置`buildtarget`为 API 15，您将不会收到错误，因为这样会创建项目，就好像它会在 ICS 上运行一样。但它最终会在低于 13 的 API 中崩溃。如果你想为更低的 API 创建一个 ActionBar，我建议你使用[ActionBarSherlock](http://actionbarsherlock.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:09:31.523

好吧，您不需要 getActionbar 来获取简单的 hello message 。使用您在android教程中关注的此功能。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
//  setContentView(R.layout.activity_display_message);
//  getActionBar().setDisplayHomeAsUpEnabled(true);
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);
    setContentView(textView);
} 
```

# c++ - 变量“”周围的堆栈已损坏（在 opencv 中）

> ID：11921432
> 
> 赞同：1
> 
> 时间：2012-08-12T10:16:46.567
> 
> 标签：c++, opencv, calibration

当我调试这段代码时，它没有输入 cvundistortpoint 并给我这个错误：变量“输入”周围的堆栈已损坏。我读过这个问题的类似答案，但没有一个是在 OpenCV 中，这有什么区别吗？是因为我的 _src 和 _dest 矩阵大小吗？我已经放了“for”循环来查看 _src 是否被填充。

```
 float input [2][2] = {{xR , yR},{xL , yL}};
float src[1][4], dest[1][4];
CvMat _src = cvMat(1, 4, CV_64FC2, src ); 
CvMat _dest = cvMat(1, 4, CV_64FC2, dest ); 

for(int k = 0; k<2; k++)
{
    for(int l = 0; l < 2; l++)
    {
        CV_MAT_ELEM(_src,float,0,k*2+l) = input[k][l];
        float f =CV_MAT_ELEM(_src,float,0,k*2+l); 
        cout<<endl<<"undis"<<endl<<f<<endl;
    }//end forj
}//end fori
cvUndistortPoints(&_src, &_dest, &_intrinsic1, &_Distortion1); 
```

# php - php imagick setGravity 函数不适用于 CompositeImage() 函数

> ID：11921433
> 
> 赞同：7
> 
> 时间：2012-08-12T10:16:54.103
> 
> 标签：php, imagemagick, imagick, gravity

我正在为一个项目使用 php Imagick 类

我尝试合成图像改变图像的重力

我的意思是，我想将目标图像合成到中间或顶部中心

我用

```
....
$imageOrg->setGravity(imagick::GRAVITY_CENTER); //I wrote this for an example, position will be set by the visitor
$imageOrg->compositeImage($over, Imagick::COMPOSITE_DEFAULT, 0, 0);
.... 
```

但是 setGravity() 或 setImageGravity() 函数都不起作用。

请帮忙！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-08T02:25:51.767

```
$imageOrg->compositeImage($over, Imagick::COMPOSITE_DEFAULT, (((($imageOrg->getImageWidth()) - ($over->getImageWidth())))/2), (((($imageOrg->getImageHeight()) - ($over->getImageHeight())))/2)); 
```

基本上你正在做的是将图像的左偏移设置为容器的宽度，减去合成图像的宽度，除以二，这将使其偏移到足以水平居中。然后你对高度做同样的事情，它垂直居中。

我有同样类型的问题，最好我能想到重力设置仅适用于绘图上下文，即：文本，注释

# utf-8 - 从 UTF-8 转换为 unicode

> ID：11921435
> 
> 赞同：1
> 
> 时间：2012-08-12T10:17:03.817
> 
> 标签：utf-8, gmail, jakarta-mail, hebrew

> **可能重复：**
> [如何将 UTF8 转换为 unicode](https://stackoverflow.com/questions/4049740/how-to-convert-utf8-to-unicode)

我正在用 JavaMail 构建一个电子邮件客户端。我从 gmail.com 获取非英语信息时遇到问题。

例如，当我有一个文件名为希伯来语 ( `בעיה במודל.docx`) 的文档时，我调用：

```
part.getFileName() 
```

那么结果是`=?UTF-8?B?15HXoteZ15Qg15HXnteV15PXnC5kb2N4?=`。

我知道需要 Unicode 转换，但我不知道如何。

# user-agent - 当用户代理是“Java/1.6.0_32”时它是机器人吗？

> ID：11921437
> 
> 赞同：1
> 
> 时间：2012-08-12T10:17:10.393
> 
> 标签：user-agent, bots, spam

我记录所有访问以检测机器人。有时会使用来自另一个国家的 IP 和用户代理（如“Java/1.6.0_32”）进行访问。它可能是一个机器人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:00:37.593

它绝对不是主要的浏览器之一。它可能是一个屏幕抓取工具 - 您可能会认为有人认为您的网站提供的内容很有用是一种恭维。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:42:47.393

“您可能会认为有人认为您网站提供的内容很有用是一种恭维……”

你可能是对的，但我不能 100% 确定。

无法识别的机器人可能正在尝试窃取您的内容、尝试发送垃圾链接或扫描漏洞……

我检查了[Botopedia.org](http://www.Botopedia.org)并没有找到该用户代理的参考资料。可能很好，但对我来说似乎很可疑。

# android - ListFragment 的 FragmentPagerAdapter getItem 错误

> ID：11921439
> 
> 赞同：7
> 
> 时间：2012-08-12T10:17:25.087
> 
> 标签：android, android-listview, android-fragments, fragmentpageradapter

我已经查看了很多代码，但无法弄清楚这一点。[http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

它必须是简单的。我展示了大部分代码。错误在下一节中。

```
 public class MainActivity extends FragmentActivity implements
    ActionBar.TabListener {

public static final int TAB_COUNT = 3;
public static InputMethodManager inputManager;

SectionsPagerAdapter mSectionsPagerAdapter;
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding
    // tab.
    mViewPager
            .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {

        actionBar.addTab(actionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(this));
    }

    // To control keyboard pop-up
    inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

}
    @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_main, menu);
    return true;
}

@Override
public void onTabUnselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabReselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
} 
```

这就是我的错误所在。案例 1 `getItem`，类型不匹配：无法从 MainActivity.HistoryFragment 转换为 Fragment。它告诉我要么将方法返回类型更改为，要么将返回类型`HistoryFragment`更改`newInstance()`为片段。我也做不到的地方。我见过的其他示例看起来几乎与我的代码相同。我尝试过和不通过论点。

```
 public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        switch (i) {
        case 0:
            Fragment tipCalc = new TipCalcFragment();
            return tipCalc;
        case 1:
            // Fragment history = new HistoryFragment();
            return HistoryFragment.newInstance(i); //ERROR HERE
        case 2:
            Fragment stats = new StatsFragment();
            return stats;
        }
        return null;
    } 
```

而我`HistoryFragment`的延伸`ListFragment`。最后，它不会从`String[]`值中提取，而是从数据库资源中提取。我只是想先设置一个结构并查看它/使用布局。

```
 public static class HistoryFragment extends ListFragment {
    // public HistoryFragment() {
    // }

    String[] values = new String[] { ... };

    static HistoryFragment newInstance(int num) {
        HistoryFragment history = new HistoryFragment();

        Bundle args = new Bundle();
        args.putInt("num", num);

        history.setArguments(args);

        return history;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.history, container, false);

        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, android.R.id.text1,
                values));
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-13T00:40:24.837

睡了一觉后才明白。我正在导入 android.app.ListFragment 而不是 android.support.v4.app.ListFragment

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:01:25.887

我认为您必须在返回之前将类型转换为片段。所以试试这个

```
Fragment history = HistoryFragment.newInstance(i);
return  history; 
```

# java - onOptionsItemSelected() 应该返回什么，true 或 false？

> ID：11921440
> 
> 赞同：7
> 
> 时间：2012-08-12T10:17:29.463
> 
> 标签：java, android, eclipse, menu

我正在学习菜单充气机，我正在遵循的教程说我们应该在这个函数中返回 false。但是，当我返回 true 时，我没有注意到任何变化或差异。所以问题是：

*   我应该返回什么，为什么？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-12T10:33:36.560

如果您希望进行正常处理，请返回 false。否则，返回真。

请参阅[文档](http://developer.android.com/reference/android/app/Activity.html#onOptionsItemSelected%28android.view.MenuItem%29)。

默认情况下，当您返回 false 时，Android 会调用与该项目关联的 Runnable 或运行您可以`setIntent(...)`在 MenuItem 上设置的 Intent。如果你不希望这种情况发生，你应该返回 true。

假设您按如下方式创建 MenuItem。

```
MenuItem menu1 = new MenuItem(this);
menu1.setIntent(myIntent); 
```

这`myIntent`是单击菜单项时要执行的操作。例如：假设您的菜单项启动 GMail 应用程序以发送电子邮件，文本显示在您活动的文本视图中。

在您的`onOptionsItemSelected()`回调中，您可以检查文本视图的值，如果文本视图不为空，则返回 false（文本框中有内容，您可以触发`Intent`GMail），否则显示消息框“请键入message first" 并返回 true，因此 Android 不会触发 Intent。

```
public boolean onOptionsItemSelected (MenuItem item) {
    if (textView.getText().trim().equals("")){
        // show the message dialog
        return true;
    }
    else {
        // we have some message. We can let android know that
        // it is safe to fire the intent.
        return false;
    }
} 
```

希望这会有所帮助......快乐编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T10:29:53.800

如果你处理事件返回true，否则返回false

# android - 来自eclipse android中文件的阿拉伯字母

> ID：11921441
> 
> 赞同：0
> 
> 时间：2012-08-12T10:17:39.640
> 
> 标签：android, eclipse, file, arabic

我正在尝试检索存储在文本文件中的阿拉伯语单词并将它们显示在我的 android 应用程序中，关于如何在我的应用程序中显示阿拉伯字母或单词的任何想法？我尝试了不同类型的方法，例如使用 ArabicReshaper，这是代码示例：

```
tx=(TextView)this.findViewById(R.id.tt);

    try{
        tx.setTypeface(Typeface.createFromAsset(getAssets(),"dejavusans.ttf"));
        tx.setText(ArabicUtilities.reshape("\u0641\u0631\u0633"));//

    } 
```

但我需要另一种方法，而不是为每个阿拉伯字母使用 Unicode 并将它们连接起来。我不能把阿拉伯语直接写进eclipse吗？

# ruby-on-rails - Taglib - Ruby - 部署 - 不断收到捆绑错误 - extconf.rb 失败

> ID：11921443
> 
> 赞同：1
> 
> 时间：2012-08-12T10:17:48.407
> 
> 标签：ruby-on-rails, heroku, taglib, engineyard

提前感谢您的帮助。我已经被这个问题困扰了几天了，绝对可以使用一些帮助。

我目前正在尝试部署我的应用程序，并且我正在使用 taglib-ruby gem，并且可以在我的本地计算机上完美运行。但是当我尝试通过 Heroku OR Engineyard 进行部署时，出现以下错误：

```
 Installing taglib-ruby (0.5.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby19 extconf.rb 
checking for main() in -lstdc++... yes
checking for main() in -ltag... no
You must have taglib installed in order to use taglib-ruby.

Debian/Ubuntu: sudo apt-get install libtag1-dev
Fedora/RHEL: sudo yum install taglib-devel
Brew: brew install taglib
MacPorts: sudo port install taglib

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/bin/ruby19
    --with-tag-dir
    --without-tag-dir
    --with-tag-include
    --without-tag-include=${tag-dir}/include
    --with-tag-lib
    --without-tag-lib=${tag-dir}/lib
    --with-stdc++lib
    --without-stdc++lib
    --with-taglib
    --without-taglib

Gem files will remain installed in /data/musicmind/shared/bundled_gems/ruby/1.9.1/gems/taglib-ruby-0.5.1 for inspection.
Results logged to /data/musicmind/shared/bundled_gems/ruby/1.9.1/gems/taglib-ruby-0.5.1/ext/taglib_base/gem_make.out
An error occured while installing taglib-ruby (0.5.1), and Bundler cannot continue.
Make sure that `gem install taglib-ruby -v '0.5.1'` succeeds before bundling. 
```

我可能做错了什么？我在想也许有一种方法可以将这个库与我的应用程序一起发送以进行部署？

我的gemfile是这样的：

```
source 'http://rubygems.org'

gem  'rails', '3.2.8'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
end

group :development, :test do
  gem 'sqlite3'
end
group :production do
  gem 'mysql2'
end

gem "taglib-ruby"

gem 'json', '~> 1.6.5'

gem "multi_json", "~> 1.3.6"

#attachment management
gem "paperclip", :git => "git://github.com/thoughtbot/paperclip.git"

#ativity feed
gem 'public_activity', :git => "git://github.com/pokonski/public_activity.git"

gem 'jquery-rails'

#nested-album-form
gem 'nested_form', :git => 'https://github.com/ryanb/nested_form.git'

#creates pattern for widget to send form data in json back to server
gem "js_message"

gem 'kaminari'

#gem 'will_paginate'

#user authentication
gem 'devise'

#notification - basic
gem 'unread'

#id3 tag reader for songs

gem 'libv8', '~> 3.11.8'

#admin interface
gem 'activeadmin'

#gravatar images for users with no profile picture
gem 'gravatar_image_tag'

#amazon s3 for song storage
gem 'aws-sdk'

#authentication for twitter
gem 'omniauth-twitter'

#pretty urls
gem 'friendly_id'

gem 'tire'

group :development do
  gem 'rspec-rails'
  gem 'nifty-generators'
  gem 'annotate'
  gem 'faker'
end

group :test do
  gem 'rspec-rails'
  gem 'webrat'
  gem 'spork', '~> 0.9.0.rc'
  gem 'factory_girl_rails'
  gem 'watchr'
end

#?
gem 'progress_bar'

#web intents - twitter
gem 'tweet-button'

#like buttons
gem 'facebook_share'

#rails paypal interfacing
gem 'activemerchant', :require => 'active_merchant'

#gem 'bootstrap-will_paginate'

gem 'bootstrap-kaminari-views'

gem 'omniauth-facebook'

gem 'simple_form'

gem 'country_select'

# gem 'tiny_tds'
# gem 'activerecord-sqlserver-adapter'
# gem 'ruby-odbc'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
gem 'debugger'

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
  gem 'minitest'
end
gem "mocha", :group => :test 
```

再次感谢您，如果我可以提供任何信息来帮助解决此问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T20:59:21.027

在 Engineyard 堆栈上，您只需将 media-libs/taglib 添加到您的包列表中以供 gem 使用。默认情况下，我们不会在 AMI 上安装 taglib。

您可以通过仪表板 ( [https://support.cloud.engineyard.com/entries/21074071-Add-UNIX-Packages-to-Your-Application](https://support.cloud.engineyard.com/entries/21074071-Add-UNIX-Packages-to-Your-Application) ) 执行此操作，只需搜索 taglib 并从中选择 media-libs/taglib列表。

如果您想在命令行上执行此操作以进行测试：

```
deploy@ip-10-66-7-217 ~ $ sudo emerge media-libs/taglib

Local copy of remote index is up-to-date and will be used.
 * Last emerge --sync was 1y 42d 54m 34s ago.
Calculating dependencies... done!

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) media-libs/taglib-1.7.2
>>> Downloading 'http://distfiles.gentoo.org/distfiles/taglib-1.7.2.tar.gz'
[[ Lots of build output clipped]]
-- Installing: /var/tmp/portage/media-libs/taglib-1.7.2/image/usr/include/taglib/tag_c.h
>>> Completed installing taglib-1.7.2 into /var/tmp/portage/media-libs/taglib-1.7.2/image/

strip: x86_64-pc-linux-gnu-strip --strip-unneeded -R .comment -R .GCC.command.line
   usr/lib64/libtag.so.1.7.2
   usr/lib64/libtag_c.so.0.0.0
ecompressdir: bzip2 -9 /usr/share/doc

>>> Installing (1 of 1) media-libs/taglib-1.7.2

>>> Recording media-libs/taglib in "world" favorites file...
>>> Auto-cleaning packages...

>>> No outdated packages were found on your system.

 * GNU info directory index is up-to-date.

 * IMPORTANT: 2 config files in '/etc' need updating.
 * See the CONFIGURATION FILES section of the emerge
 * man page to learn how to update config files.
deploy@ip-10-66-7-217 ~ $ gem install taglib-ruby
Building native extensions.  This could take a while...
Successfully installed taglib-ruby-0.6.0
1 gem installed
deploy@ip-10-66-7-217 ~ $ 
```

如果您想将此添加到多个环境，您也可以通过自定义厨师添加它

```
component_version = "1.7.2"  # If your on the 2012.11 Stable-v4 stack, "1.5" if your in 2009a   

enable_package 'media-libs/taglib' do
  version component_version
end

package 'media-libs/taglib' do
  version component_version
  action :install
end 
```

最后，如果您想支持额外的 taglib-extras 专有文件格式，您可以安装 media-libs/taglib-extras。

许多带有本机扩展的 gem 需要安装基础库。它们中的大多数都可以像这样添加，您可以通过 Engine Yard 支持打开票证，以获得更复杂案例的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T17:09:06.747

部署`taglib`到heroku...请按照我在这个问题上停留一段时间后写的这个教程...

[http://artmees.github.io/blog/2014/06/14/heroku-taglib/](http://artmees.github.io/blog/2014/06/14/heroku-taglib/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:12:05.517

[taglib-heroku gem](http://rubygems.org/gems/taglib-heroku)看起来可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T19:54:15.173

我通过使用 heroku 创建自定义 buildpack 解决了这个问题。使用它来安装 taglib 没有问题。

[`https://github.com/menan/heroku-buildpack-ruby.git`](https://github.com/menan/heroku-buildpack-ruby.git)

如果您不确定，这里是您如何使用自定义 buildpack。

[`https://devcenter.heroku.com/articles/buildpacks#using-a-custom-buildpack`](https://devcenter.heroku.com/articles/buildpacks#using-a-custom-buildpack)

# function - cscope 和 ctag 找不到位于类声明中的函数定义

> ID：11921446
> 
> 赞同：0
> 
> 时间：2012-08-12T10:18:41.557
> 
> 标签：function, lookup, definition, cscope

我在浏览 C++ 源代码时使用 vim + ctag + cscope。当我想查找任何函数 cscope 和/或 ctag 的定义时，会生成一个似乎是候选者的列表。

但是，当我为头文件中的类声明中定义的函数尝试此操作时，这两个都不会产生候选者列表。当 ctag 和/或 cscope 像这样失败时，我现在知道函数定义应该在头文件中。于是我打开头文件，在里面找到函数定义。

但我想知道这是否是 ctag 和 cscope 的必然行为。对于这种情况，是否有任何方法可以使它们（ctag 和 cscope）变得聪明，以便我可以找到每个函数的定义，即使它们是在头文件中定义的？

非常感谢。

旅行者 J. Joh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:47:04.493

我生成了如下所示的标签文件。

```
ctags --langmap=C++:.inc --c++-kinds=+p --fields=+iaS --extra=+fq --sort=foldcase -R . 
```

但必须按照下面的方式进行纠正。

```
ctags --langmap=C++:+.inc --c++-kinds=+p --fields=+iaS --extra=+fq --sort=foldcase -R . 
```

从

```
--langmap=C++:.inc 
```

至

```
--langmap=C++:+.inc 
```

[`man ctags`](http://linux.die.net/man/1/ctags)对此有说明：

> [...] 要指定仅将扩展名为 .c 和 .x 的文件视为 C 语言文件，请使用“--langmap=c:.cx”；要将扩展名为 .j 的文件也添加为 Java 语言文件，请指定“--langmap=c:.cx,java:+.j”。

# javascript - $('body').on('click', '.anything', function(){})

> ID：11921450
> 
> 赞同：21
> 
> 时间：2012-08-12T10:19:03.083
> 
> 标签：javascript, jquery, html

```
$('body').on('click', '.anything', function() {
    //code
}); 
```

现在对任何事情都不起作用，我不知道为什么。我可以锚定其他任何东西，比如说我只是`#wrap`在`body`. 然后我可以做

```
$('#wrap').on('click', '.anything', function() {
    //code
}); 
```

对于我想要的任何元素。

知道我可以做些什么来禁用 body 元素上的此功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-08-18T07:59:52.060

你应该使用`$(document)`. 它是文档中任何点击事件的函数触发器。然后在里面你可以使用 jquery `on("click","body *",somefunction)`，其中第二个参数指定要定位的特定元素。在这种情况下，身体内的每个元素。

```
$(document).on('click','body *',function(){
    //  $(this) = your current element that clicked.
    // additional code
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-12T14:27:36.153

你可以试试这个：

您必须遵循以下格式

```
 $('element,id,class').on('click', function(){....}); 
```

* ***jQuery 代码****

```
 $('body').addClass('.anything').on('click', function(){
      //do some code here i.e
      alert("ok");
    }); 
```

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2012-08-12T11:25:53.720

如果你想捕捉点击一切然后做

```
$("*").click(function(){
//code here
} 
```

我将它用于选择器：[http ://api.jquery.com/all-selector/](http://api.jquery.com/all-selector/)

这用于处理点击：[http ://api.jquery.com/click/](http://api.jquery.com/click/)

然后使用[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

停止正常的点击动作。

# c++ - 将元组传递给函数并让它返回数字列表的最佳方法？

> ID：11921457
> 
> 赞同：3
> 
> 时间：2012-08-12T10:19:35.380
> 
> 标签：c++

例如，假设我想将值 (1,2)、(2,3)、(3,4) 等传递给一个函数并让它返回一个数字列表，无论它们是什么，即 1 , 3, 5, 3, 6 经过一些运算。在 C++ 中实现此结果的最佳方法是什么？从 python 迁移后，在这里做这件事似乎要困难得多，有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T10:25:33.817

通常，您会使用`std::vector`容器及其方法`push_back`。然后您可以返回向量（按值返回它，不要费心动态地分配它，因为您的编译器可能支持移动语义）。

```
std::vector<int> func(
    const std::tuple<int, int>& a, const std::tuple <int, int>& b)
{
     std::vector<int> ret;
     ret.push_back(...);
     ret.push_back(...);
     return ret;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T10:28:08.057

我并不是说这是最好的方法，但我认为它非常好，同样从内存复制的角度来看，请注意我避免返回 a `vector`（昂贵，因为它`operator=`隐式调用）：

```
#include <vector>

using namespace std;

/**
 * Meaningful example: takes a vector of tuples (pairs) values_in and returns in
 * values_out the second elements of the tuple whose first element is less than 5
 */
void less_than_5(const vector<pair<int, int> >& values_in, vector<int>& values_out) {
    // clean up the values_out
    values_out.clear();

    // do something with values_in
    for (vector<pair<int, int> >::iterator iter = values_in.begin(); iter != values_in.end(); ++iter) {
        if (iter->first < 5) {
            values_out.push_back(iter->second);
        }
    }

    // clean up the values_out (again just to be consistent :))
    values_out.clear();

    // do something with values_in (equivalent loop)
    for (int i = 0; i < values_in.size(); ++i) {           
        if (values_in[i].first < 5) {
            values_out.push_back(values_in[i].second);
        }
    }        

    // at this point values_out contains all second elements from values_in tuples whose 
    // first is less than 5
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:26:03.083

```
void function(const std::vector<std::pair<int,int>> &pairs, 
    std::vector<int> &output) {
  /* ... */
} 
```

# c++ - 使用 TinyXML 在 XML 文档中查找特定节点

> ID：11921463
> 
> 赞同：2
> 
> 时间：2012-08-12T10:20:34.923
> 
> 标签：c++, xml, parsing, tinyxml

我想用 TinyXML 从 xml 文件中解析一些数据。

这是我的 text.xml 文件内容：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<toto>
  <tutu>
    <tata>
      <user name="toto" pass="13" indice="1"/>
      <user name="tata" pass="142" indice="2"/>
      <user name="titi" pass="azerty" indice="1"/>
    </tata>
  </tutu>
</toto> 
```

我想访问第一个元素“用户”。执行此操作的方法如下：

```
TiXmlDocument   doc("test.xml");

    if (doc.LoadFile())
    {
        TiXmlNode *elem = doc.FirstChildElement()->FirstChildElement()->FirstChildElement()->FirstChildElement();
std::cout << elem->Value() << std::endl;
} 
```

在输出中：用户。

但是代码非常丑陋而且不通用。我尝试了下面的代码来模拟与上面的代码相同的行为，但它不起作用并且发生了错误。

```
TiXmlElement *getElementByName(TiXmlDocument &doc, std::string const &elemt_value) 
{
    TiXmlElement *elem = doc.FirstChildElement(); //Tree root

    while (elem)
    {
        if (!std::string(elem->Value()).compare(elemt_value))
            return (elem);
        elem = elem->NextSiblingElement();
    }
    return (NULL);
} 
```

也许我错过了库中可以完成这项工作的一个特殊函数（一个 getElementByName 函数）。我只想获得一个指向值是我正在寻找的元素的指针。有人可以帮助我吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T10:56:12.010

尝试这个

```
TiXmlElement * getElementByName(TiXmlDocument & doc, std::string const & elemt_value) {

   TiXmlElement * elem = doc.RootElement(); //Tree root
   while (elem) {
      if (!std::string(elem - > Value()).compare(elemt_value)) return (elem);
      /*elem = elem->NextSiblingElement();*/
      if (elem - > FirstChildElement()) {
         elem = elem - > FirstChildElement();
      } else if (elem - > NextSiblingElement()) {
         elem = elem - > NextSiblingElement();
      } else {
         while (!elem - > Parent() - > NextSiblingElement()) {
            if (elem - > Parent() - > ToElement() == doc.RootElement()) {
               return NULL;
            }
            elem = elem - > Parent() - > NextSiblingElement();
         }
      }
   }
   return (NULL);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-18T05:21:51.940

当我只是将其复制粘贴到我的代码中时，Adi 的答案不起作用，但我修改了它，现在它对我来说很好。因为我做了很多更改，所以我想我应该在这里发布我的最终代码。

```
 void parseXML(tinyxml2::XMLDocument& xXmlDocument, std::string sSearchString, std::function<void(tinyxml2::XMLNode*)> fFoundSomeElement)
    {
            if ( xXmlDocument.ErrorID() != tinyxml2::XML_SUCCESS )
            {
                // XML file is not ok ... we throw some exception
                throw DataReceiverException( "XML file parsing failed" );
            } // if

            //ispired by http://stackoverflow.com/questions/11921463/find-a-specific-node-in-a-xml-document-with-tinyxml
            tinyxml2::XMLNode * xElem = xXmlDocument.FirstChild();
            while(xElem)
            {
                if (xElem->Value() && !std::string(xElem->Value()).compare(sSearchString))
                {
                    fFoundSomeElement(xElem);
                }

                /*
                *   We move through the XML tree following these rules (basically in-order tree walk):
                *   
                *   (1) if there is one or more child element(s) visit the first one
                *       else
                *   (2)     if there is one or more next sibling element(s) visit the first one
                *               else
                *   (3)             move to the parent until there is one or more next sibling elements
                *   (4)             if we reach the end break the loop
                */
                if (xElem->FirstChildElement()) //(1)
                    xElem = xElem->FirstChildElement();
                else if (xElem->NextSiblingElement())  //(2)
                    xElem = xElem->NextSiblingElement();
                else
                {
                    while(xElem->Parent() && !xElem->Parent()->NextSiblingElement()) //(3)
                        xElem = xElem->Parent();
                    if(xElem->Parent() && xElem->Parent()->NextSiblingElement())
                        xElem = xElem->Parent()->NextSiblingElement();
                    else //(4)
                        break;
                }//else
            }//while
    } 
```

（为了完整性）示例如何调用该函数：

```
 tinyxml2::XMLDocument xXmlDocument;

        xXmlDocument.Parse(sXmlDocument.c_str());

        parseXML(xXmlDocument, "user",[](tinyxml2::XMLNode* xElem)
        {
            int iPass;
            xElem->QueryIntAttribute( "pass", &iPass );
            std::cout << iPass << "\n";
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-01T06:26:11.627

```
XMLElement *getElementByName(XMLDocument &ele, std::string const &elemt_value)
    {
    XMLElement *elem = ele.FirstChildElement(); //Tree root

    while (elem)
    {
        if (!std::string(elem->Value()).compare(elemt_value))
            return elem;
        if (elem->FirstChildElement())
        {
            elem = elem->FirstChildElement();
        }
        else if (elem->NextSiblingElement())
        {
            elem = elem->NextSiblingElement();
        }
        else
        {
            if (elem->Parent()->ToElement()->NextSiblingElement())
            {
                elem = elem->Parent()->ToElement()->NextSiblingElement();
            }
            else if (elem->Parent()->ToElement()->FirstChildElement()
                        &&  strcmp(elem->Name(), elem->Parent()->ToElement()->FirstChildElement()->Name()))
            {
                elem = elem->Parent()->ToElement()->FirstChildElement();
            }
            else {
                break;
            }
        }
    }
    return NULL;
} 
```

// 对上述解决方案的一个小调整

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-06T12:13:51.907

您还可以使用结合 lamda-function 的递归函数作为处理程序，逐个遍历您的 XML 元素。

```
// 
// This function will iterate through your XML tree and call the 'parseElement' function for each found element.
//
void RecursiveXMLParse(TiXmlElement* element, std::function<void(TiXmlElement*)>& parseElement)
{
    if (element != nullptr)
    {
        parseElement(element);
        auto child = element->FirstChildElement();
        if (child != nullptr)
        {
            RecursiveXMLParse(child, parseElement);
        }

        for (auto sibling = element->NextSiblingElement(); sibling != nullptr; sibling = sibling->NextSiblingElement())
        {
            RecursiveXMLParse(sibling, parseElement);
        }
    }
} 
```

**用法**：只需将 XML 根元素和您的数据处理程序 lambda 函数传递给递归解析器函数。

```
int main()
{
    //
    // Define your data handler labmda
    //
    std::function<void(TiXmlElement*)>parseElement = [&](TiXmlElement* e) -> void
    {
        if (std::string(elem->Value()).compare("user"))
        {
             // Parse your user data
        }
    };

    // Pass the root element along with the above defined lambda to the recursive function 
    RecursiveXMLParse(doc.RootElement(), parseElement);

    return 0;
} 
```

# jsf-2 - 从 Action 方法传递参数到下一个视图

> ID：11921467
> 
> 赞同：3
> 
> 时间：2012-08-12T10:21:12.520
> 
> 标签：jsf-2

我正在寻找将参数从 JSF 托管 bean 中的操作方法传递到下一个视图的不同替代方案。

例如，我的托管 bean 中有一个操作方法。

```
public String actionMethod01(){
    String outcome = "nextPage";
    return outcome;
} 
```

如果我想将参数传递给 nextPage，我有一个选项是：

```
outcome += "?param1=value1"; 
```

但是，如果我要传递多个参数，它就不那么方便了。

有更好的方法吗？

最好的问候，阿南德。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:53:11.237

JSF API 中没有任何东西可以让这变得更容易。只需自己创建一个帮助程序/实用程序方法，这会更方便，这样你就可以得到这样的结果：

```
return "nextPage" + toQueryString("param1", "value1", "param2", "value2"); 
```

# php - 循环电子邮件代码

> ID：11921469
> 
> 赞同：0
> 
> 时间：2012-08-12T10:21:20.997
> 
> 标签：php, email, loops, smtp

多年来，我一直在使用下面的代码从我的网站发送电子邮件，但问题是它有时会多次发送邮件。

示例：如果我向我的用户发送消息，有些人可能会收到 5 次，等等。即使我只发送给一个人，他也可能会收到 3 次。

```
require_once "Mail.php";

$from = "xxx Support <noreply@xxxx.com>";
$to = "$name <$email>";
$subject = "xxxxx";
$body = "xxx";

$host = "mail.xxx.com";
$username = "noreply+xxx.com";
$password = "xzcsd=sfd?hdssc";

$headers = array ('From' => $from,
  'To' => $to,
  'Subject' => $subject);
$smtp = Mail::factory('smtp',
  array ('host' => $host,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
      }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:09:58.473

我认为您可能需要使您的解决方案复杂一点以添加跟踪。例如，在您的数据库中添加一个新表，其中包含每封已发送电子邮件的记录。

表结构可能类似于

email_id (PK) email_source（FK 到包含电子邮件的表） user_id（FK 到用户表）

然后，您可以将电子邮件发送给未收到此版本电子邮件的用户。

这可以帮助您减轻 SMTP 的负担，或在一天内批量发送电子邮件。这也可以帮助您跟踪打开电子邮件或与电子邮件交互的用户。

希望有帮助。

# html - 如何在 css 中设置输入 [type=file] 的样式以使跨浏览器兼容？

> ID：11921471
> 
> 赞同：0
> 
> 时间：2012-08-12T10:21:28.343
> 
> 标签：html, css

我`input[type=file]`在我的页面里放了一个。它在 Firefox 和 Chrome 中具有不同的渲染，

*   在 chrome 中，浏览按钮在字段内，而在 Firefox 中，在字段外
*   我用渐变背景设计了该字段的样式，带有灰色边框。但它在 Firefox 中不起作用，但在 Chrome 中看起来不错。

有没有办法使用在给定浏览器中都呈现良好的 CSS 来设置它们的样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:27:26.670

设置原生表单元素的样式确实很难，但这可能会对您有所帮助： http: [//uniformjs.com/](http://uniformjs.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T10:33:18.073

*   [样式输入类型文件？](https://stackoverflow.com/questions/4909228/style-input-type-file)
*   [输入样式=文件作为按钮](https://stackoverflow.com/questions/3009300/style-of-input-file-as-a-button)
*   [如何在 Firefox 中设置文件输入字段的样式？](https://stackoverflow.com/questions/352467/styling-issues-with-a-file-input-field-in-firefox)
*   [为 input type="file" 按钮设置样式](https://stackoverflow.com/questions/572768/styling-an-input-type-file-button)
*   [文件输入的自定义文本](https://stackoverflow.com/questions/2242319/custom-text-for-file-input)
*   [如何使用 CSS3 / Javascript 设置“输入文件”的样式？](https://stackoverflow.com/questions/3226167/how-to-style-input-file-with-css3-javascript)
*   [样式 <input type="file">](https://stackoverflow.com/questions/4532733/styleize-input-type-file)
*   [Input TYPE="File" 隐藏输入并离开按钮？](https://stackoverflow.com/questions/6316032/input-type-file-hide-the-input-and-leave-the-button)
*   [更改输入类型=“文件”上的光标类型](https://stackoverflow.com/questions/1537223/change-cursor-type-on-input-type-file)
*   [https://stackoverflow.com/questions/3984815/jquery-best-way-to-style-a-input-file-tag](https://stackoverflow.com/questions/3984815/jquery-best-way-to-style-a-input-file-tag)
*   [输入文件字段到输入文本字段](https://stackoverflow.com/questions/3704009/input-file-field-to-input-text-field)
*   [如何设置输入文件文本框的样式？](https://stackoverflow.com/questions/4840504/how-can-i-style-input-file-textbox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T10:00:35.280

我有一个真正的问题是让 FF 开发人员了解必须在输入框内和框外显示相同颜色的文本是一个问题。输入框上的所有其他文本都显示在输入框的背景下，但 FF22 或 23 文件输入上的文本 - 让我们暂时希望 - 相对于外部“显示”。黑色背景上的黑色文字？

解决方案是在所有输入元素上放置背景颜色，或者只是那些文件类型的元素，即使这只是默认的#FFF，在你的 CSS 中。

```
input[type="file"] {background-color: #FFF;} or 
input {background-color: #FFF;} 
```

将它放在所有浏览器的所有输入上似乎没有害处，因为几乎通用的默认值是输入的白色 BG。没有必要使用类来定位（除非您愿意），因为旧版 FF 和所有其他浏览器使用熟悉的带有浏览按钮的输入框 - 这也允许用户复制和粘贴文件链接，这是一个有用的好处。

# c# - 从 Web 自动呈现 XMLFile

> ID：11921473
> 
> 赞同：1
> 
> 时间：2012-08-12T10:22:08.390
> 
> 标签：c#, asp.net, xml, rss

我想从网络上获取一个 RSS XML 文件并将其呈现在我的 ASP.NET 页面上。

有没有办法使用某种控件直接显示它并简单地给它 rss XML 文件 web url？

或者没有捷径，我必须手动完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:54:06.163

[在 ASP.NET 上呈现 XML](http://www.codeproject.com/Articles/10898/Introduction-to-XMLDataSource-control-in-ASP-NET-2)

这显示了解决方案。

# dynamics-crm-2011 - CRM 2011 中的 Odata 查询不起作用

> ID：11921474
> 
> 赞同：0
> 
> 时间：2012-08-12T10:22:14.437
> 
> 标签：dynamics-crm-2011, odata, crm

你有什么想法，为什么这个查询不起作用？它只是抛出一个 400 错误

```
http://localhost:5555/CRM11DEV/xrmservices/2011/OrganizationData.svc/AccountSet?$select=*&$filter=AccountId eq guid'7b45278BE3-4C77-E111-991A-000C2906D485' 
```

我确实找到了所有其他带有过滤器的查询，只有当我尝试通过它的 id 获取实体时，就像在这个例子中一样，我得到了错误

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:21:49.453

您的 GUID 太长 - 看起来像是从浏览器中的 URL 剪切和粘贴的 - 应该是 32 个字符（减去破折号），您的 GUID 是 34。在开头删除“7b”，它应该可以正常工作。

# c# - TcpListener 间歇性地不工作

> ID：11921475
> 
> 赞同：0
> 
> 时间：2012-08-12T10:22:41.580
> 
> 标签：c#, http, proxy, tcplistener

尝试编写一个基本代理我已经按照以下几行实现了代码作为开始。

```
private Thread _proxyThread;

public void Start() 
{
    this._proxyThread = new Thread(StartListener);
    this._proxyThread.Start();
}

protected void StartListener(object data)
{
    this._listener = new TcpListener(IPAddress.Any, 1234);
    this._listener.Start();

    while (true)
    {
        TcpClient client = this._listener.AcceptTcpClient();

        while (client.Connected)
        {
            NetworkStream stream = client.GetStream();

            StringBuilder request = new StringBuilder();

            byte[] bytes = new byte[1024];

            while (stream.DataAvailable && stream.CanRead)
            {   
                int i = stream.Read(bytes, 0, bytes.Length);
                request.Append(System.Text.Encoding.ASCII.GetString(bytes, 0, i));                        
            }

            if (stream.CanWrite)
            {
                byte[] response = System.Text.Encoding.Default.GetBytes("HTTP/1.1 200 OK" + Environment.NewLine + "Content-length: 4\r\n\r\n" + "Test");
                stream.Write(response, 0, response.Length);
            }

            client.Close();
        }
    }
} 
```

然后我像这样设置我的局域网代理

![代理人](../Images/85337e5eb0e7d02e2449d8140b307586.png)

我当前的目标（希望您可以从我的代码中推断出）是只返回一个没有标题或任何内容的文本值。

我遇到的问题是，我按原样运行代码的任何尝试都会导致间歇性行为，Chrome 和 IE9 通常只会返回**ERR_CONNECTION_ABORTED**或**Internet Explorer 无法**分别显示网页，并且偶尔会显示预期的输出“测试”。

我最初尝试使用异步方法（使用 BeginAcceptTcpClient()），但又回到了这种更简单的技术，因为我认为这个问题可能源于我在异步实现中做错了什么，但似乎原因是别的。

有人可以提供任何指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:27:26.920

在循环的第一次迭代之后，`while (client.Connected)`您关闭连接。仅在完成所有数据传输后关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:27:48.997

不是同步的还是异步的，你只是没有用正确的 HTTP 响应来响应。[使用Fiddler](http://www.fiddler2.com/fiddler2/version.asp)之类的工具，查看请求常规网页时收到的数据。

如果你返回这个，它应该可以工作：

```
HTTP/1.1 200 OK
Content-length: 4

TEST 
```

# ios - Facebook ios静态库：找不到build_facebook_ios_sdk_static_lib

> ID：11921485
> 
> 赞同：1
> 
> 时间：2012-08-12T10:24:05.720
> 
> 标签：ios, facebook

我正在按照[本](https://developers.facebook.com/docs/mobile/ios/build/)教程将 Facebook 集成到我的 iOS 应用程序中。

本教程要求构建一个静态库 - 如果 iOS 应用程序使用 Arc - 使用脚本文件夹中的以下 sh 文件

% ~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh

但是我在任何地方都找不到这个文件..

甚至在 GitHub 中用于 facebook sdk .. [https://github.com/facebook/facebook-ios-sdk/tree/master/scripts](https://github.com/facebook/facebook-ios-sdk/tree/master/scripts)

有人请帮我在哪里找到这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:29:29.333

[https://github.com/msealand/facebook-ios-sdk/tree/51971551dfd69e02ddcd78fc174bc1a84cd8beb4/scripts](https://github.com/msealand/facebook-ios-sdk/tree/51971551dfd69e02ddcd78fc174bc1a84cd8beb4/scripts)

在那里！如果我的回答有帮助，请“打勾”标记我的回复并给+1！

谢谢让

# ruby-on-rails - test.mp3 未在 Rails 应用程序中预编译

> ID：11921488
> 
> 赞同：0
> 
> 时间：2012-08-12T10:24:41.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我正在构建一个使用 html5 音频标签的网站。在我看来，我添加了 <% audio_tag "test.mp3", :controls => true %> 这在开发中效果很好。但是，当我将我的应用程序部署到 Heroku 并尝试访问它时，我在日志**“ActionView::Template::Error (test.mp3 isnt precompiled)”中收到此错误**

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:28:21.663

请尝试指定：

```
config.assets.compile = true 
```

在你的`production.rb`文件中。

* * *

另一种解决方案是在推送到`heroku`repo 之前预编译您的资产：

```
rake assets:precompile
git commit add .
git commit -a -m "Assets are precompiled"
git push heroku master 
```

我现在无法测试它，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:38:56.890

在生产环境中，您存储在 assets 目录中的所有文件都已预编译。当您使用诸如 audio_tag 之类的 rails 标签助手时，资产管道期望您的资产位于资产目录之一中。要使用它，您可以使用原始 html 标记：

```
<audio src="/audios/test.mp3" /> 
```

或将该文件放在 app/assets 目录中。更多信息可[在此处获得](http://guides.rubyonrails.org/asset_pipeline.html#in-production)

# ios - iPhone通话记录和应用商店

> ID：11921489
> 
> 赞同：1
> 
> 时间：2012-08-12T10:25:01.337
> 
> 标签：ios, logging, call

我想知道 Apple 是否允许在将提交给 App Store 的应用程序中读取 iPhone 上的通话记录历史数据库。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:11:07.790

不，没有支持在 iOS 设备上访问通话记录的方法，您无法实现这一点或将执行此操作的应用程序合法地提交到 App Store。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:27:35.360

如果它是现有的官方文档 API，您可以使用它。就这么简单。

# cocoa - 滑动 CCMenu

> ID：11921491
> 
> 赞同：3
> 
> 时间：2012-08-12T10:25:36.060
> 
> 标签：cocoa, cocos2d-iphone

我有一个包含`CCMenuItemImage`s 的菜单（“myMenu”）。我希望这个菜单能够检测手指滑动并相应地滑动。

我的问题是`CCMenuItemImage`s 似乎吸收了触摸事件。当用户触摸 CCMenuItemImages 之外的菜单时，滑动可以正常工作，但当触摸发生在这些菜单上时则不会。

我试图将我的菜单项放在一个层中以检测触摸（参考[使用 MenuItem's 回答可滚动菜单](https://stackoverflow.com/questions/973755/scrollable-menu-using-menuitems)），但这似乎也不起作用。知道为什么吗？

```
+(id) scene
{
    CCScene *scene = [CCScene node];
    ModeMenuScene *layer = [ModeMenuScene node];
    [scene addChild: layer];
    return scene;
}

-(id) init
{
    if( (self=[super init] )) {

        CGSize winSize = [[CCDirector sharedDirector] winSize];
        CCSprite *background = [CCSprite spriteWithFile:@"bg.png"];
        background.position=ccp(winSize.width/2,winSize.height/2);
        [self addChild:background];

        mode1 = [CCMenuItemImage itemFromNormalImage:@"Mode1.png" selectedImage: @"Mode1.png" target:self selector:@selector(goToMode1:)];
        mode1label = [CCLabelTTF labelWithString:[NSString stringWithFormat:@"Level 1 %d", n] dimensions:CGSizeMake(220,53) alignment:UITextAlignmentCenter fontName:@"Arial" fontSize:20.0];
        mode1label.color = ccc3(167,0,0);
        mode1label.position=ccp(55,-30);
        [mode1 addChild:mode1label];

    // here same kind of code to define mode2,mode3,mode4 (taken out to reduce size of code)

        myMenu=[CCMenu menuWithItems:mode1,mode2,mode3,mode4,nil];
        [myMenu alignItemsHorizontallyWithPadding:25];
        myMenu.position=ccp(winSize.width/2+40,180);
        menuLayer = [CCLayer node];
        [menuLayer addChild:myMenu];
        [self addChild:menuLayer];

        [self enableTouch];

    }
    return self;
}

-(void) disableTouch{
    self.isTouchEnabled=NO;
    menuLayer.isTouchEnabled=NO;
}

-(void) enableTouch{
    self.isTouchEnabled=YES;
    menuLayer.isTouchEnabled=YES;
}

-(void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    if(location.y>100 && location.y<260) {
        draggingMenu=1;
        x_initial = location.x;
    }
    else draggingMenu=0;
}

-(void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    if(draggingMenu==1) {
        CGSize winSize = [[CCDirector sharedDirector] winSize];
        int x = myMenu.position.x+location.x-x_initial;
        x = MAX(0,x);
        x = MIN(x,winSize.width/2+40);
        myMenu.position=ccp(x,180);
        x_initial=location.x;
    }
}

- (void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    draggingMenu=0;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:47:03.283

通过添加解决它：

```
-(void) registerWithTouchDispatcher
{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:INT_MIN+1 swallowsTouches:NO];
} 
```

问题是 CCMenuItemImage 吞下了触摸并且将高优先级设置为 -128。因此需要将优先级设置为`INT_MIN+1`

# css - 没有加载HTML

> ID：11921493
> 
> 赞同：1
> 
> 时间：2012-08-12T10:25:55.013
> 
> 标签：css, html

我对 html 很陌生，我敢打赌我错过了一些东西，但我创建了一个简单的 html 和 css 来配合它。每当我预览我的工作时，我都会得到 404。

这是html代码：

```
<!DOCTYPE html>   
<head>
    <meta charset="utf-8">
    <title>Basic Structure</title>

    <!-- !CSS -->
    <link rel="stylesheet" href="/fbtab/fbtab.css">

   </head>

<body>
    <div id="container">
        <header>
            <div id="logo"><img src="/fbtab/images/logo.png"/></div>
        </header><!-- end header -->

        </div><!-- end container -->

    <!-- !Javascript - at the bottom for fast page loading -->

</body>
</html> 
```

这是CSS：

```
html,
container,
header, 
body {
 width:800px;
 height:100%;
 min-height:100%;
} 
```

有人可以指导我创建新的 html 页面的正确方法吗？我只需要一个 800 像素宽度的页面，并想为其放置徽标和图标以及背景。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:27:54.220

这与您的 HTML 没有任何关系。404 错误意味着页面不存在。也许（您的 HTML 的）文件上传失败。您的服务器找不到您请求的文件。通过 FTP 检查您的文件是否已正确上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:39:33.077

404 错误是一种 HTTP 状态代码，表示您试图在网站上访问的页面在其服务器上无法找到。（与页面布局和设计无关）

从技术上讲，错误 404 是客户端错误，这意味着该错误是您的错误，或者是因为您输入了错误的 URL，或者该页面已从网站上移动或删除，您应该知道。

但在您的情况下，如果您调用的是域（如 google.com）而不是特定页面（如 google.com/index.html）；

*   确保您已将名称**index.html**赋予您的网页
*   确保您已在服务器根目录（**htdocs**文件夹）中上传/创建/复制了 index.html 文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T10:32:51.257

尝试`<html>`在`<head>`.

# php - 如何在 div 标签刷新功能中保留块文本？

> ID：11921496
> 
> 赞同：0
> 
> 时间：2012-08-12T10:26:20.943
> 
> 标签：php, jquery

我有一个页面，功能是刷新 div 标签。div标签的功能是刷新接收到的数据。

到目前为止还可以。

当我使用鼠标阻止文本时，这将根据时间“20000”清除块文本。这是下面的 JS 脚本函数。

```
<script src='js/jquery.min.js'></script>
<script>
    $(document).ready(function()
    {
        $("#content2").load("post_rf.php");
        var refreshId = setInterval(function()
        {
            $("#content2").load('post_rf.php?randval='+ Math.random());
        }, 20000);
        $.ajaxSetup({ cache: false });
    });
    </script> 
```

我想要做的是，如何将块文本保留在 div 刷新功能中？因为某些用户可能想要复制文本。在这种情况下，用户必须在 div 刷新之前快速复制文本。

也许像 facebook 发布实时更新这样的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:29:07.880

您想将您的间隔分配给一个变量，当用户将鼠标悬停在您的 DIV 上时，然后使用 clearInterval，当鼠标再次移出 setInterval 时。

```
var interval;

$(div).bind("mouseout", function() {
    interval = setInterval(refresh, 1000);
});

$(div).bind("mouseover", function() {
    clearInterval(interval);
}); 
```

**编辑**

抱歉，我把它贴在手机上，这样写代码很难，试试这个：

```
<script src='js/jquery.min.js'></script>
<script>
    $(document).ready(function() {
        $("#content2").load("post_rf.php");

        // set your initial interval to kick it off
        var refreshInterval = setInterval(function() {
            $("#content2").load('post_rf.php?randval='+ Math.random());
        }, 20000);

        // bind an event to mouseout of your DIV to kickstart the interval again
        $("#content2").bind("mouseout", function() {
            refreshInterval = setInterval(function() {
                $("#content2").load('post_rf.php?randval='+ Math.random());
            }, 20000);
        });

        // clear the interval on mouseover of your DIV to stop the refresh
        $("#content2").bind("mouseover", function() {
            clearInterval(refreshInterval);
        });

        $.ajaxSetup({ cache: false });
    });
</script> 
```

# mysql - Sql-在子表上强制引用完整性

> ID：11921498
> 
> 赞同：3
> 
> 时间：2012-08-12T10:26:31.740
> 
> 标签：mysql, database-design

我有三张桌子：

**`property`**

```
`id` MEDIUMINT(8) UNSIGNED NOT NULL AUTO_INCREMENT,
`user_id` MEDIUMINT(8) UNSIGNED NOT NULL,
`title` VARCHAR(100) NOT NULL,
`alias_title` VARCHAR(255) NOT NULL,
`primary_category` TINYINT(3) UNSIGNED NOT NULL,
`second_category` TINYINT(3) UNSIGNED NOT NULL,
`reference_number` VARCHAR(100) NOT NULL,
`description` VARCHAR(10000) NOT NULL,
`no_of_bedrooms` TINYINT(2) UNSIGNED NOT NULL,
`no_of_bathrooms` TINYINT(2) UNSIGNED NOT NULL 
```

**`property Rental`**

```
`property_id` MEDIUMINT(8) UNSIGNED NOT NULL,
`minimum_rental_months` TINYINT(2) UNSIGNED NOT NULL,
`minimum_rental_years` TINYINT(2) UNSIGNED NOT NULL,
`maximum_rental_months` TINYINT(2) UNSIGNED NOT NULL,
`maximum_rental_years` TINYINT(2) UNSIGNED NOT NULL,
`available_from` DATE NOT NULL,
`available_to` DATE NOT NULL,
`type_of_letting` TINYINT(1) UNSIGNED NOT NULL,
`price` DECIMAL(7,2) UNSIGNED NOT NULL,
`deposit` DECIMAL(7,2) UNSIGNED NOT NULL,
`additionals_included_with_rent` VARCHAR(500) NOT NULL 
```

**`property Sales`**

```
`property_id` MEDIUMINT(8) UNSIGNED NOT NULL,
`price` DECIMAL(10,2) UNSIGNED NOT NULL 
```

情况是，房产既可以是出租房产，也可以是销售房产。它必须是其中之一。property_id 对销售和出租的财产都是陌生的。然而，使用这种结构，用户实际上可以创建不属于出租或销售的财产。我需要设置一些限制，因此必须在销售表或租赁表中都有一个属性。

然后我需要查询以查找所有属性和相关的详细信息。

有人可以让我知道在这种情况下确保房产必须属于出租或销售的最佳方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:53:45.943

您所描述的将导致先有[鸡还是先有蛋的](http://en.wikipedia.org/wiki/Chicken_or_the_egg)问题。您不能先插入适当的“子表”，因为外键`property_id`要求一般条目首先存在。但是你也不能先插入到通用表中，至少如果你可以表达你在这里要求的约束的话。而且由于您不能同时插入两个表，这意味着您根本无法插入数据，除非您暂时禁用一致性检查，我认为这是非常糟糕的风格。

在数据库约束级别，我看不到任何干净的解决方案。所以我建议您在应用程序级别处理可能的不一致（即未知类型的属性）。

# java - 带有突出显示点的 JFreeChart

> ID：11921501
> 
> 赞同：7
> 
> 时间：2012-08-12T10:27:22.733
> 
> 标签：java, jfreechart

我`JFreeChart`用来绘制图表。代码是

```
package com.daya;

import java.awt.Color;
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class Two extends ApplicationFrame {

    public Two(final String title) {
        super(title);
        final XYDataset dataset = createDataset();
        final JFreeChart chart = createChart(dataset);
        final ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new java.awt.Dimension(1200, 1100));
        setContentPane(chartPanel);
    }

    private XYDataset createDataset() {
        final XYSeries series1 = new XYSeries("SLMM");
        final XYSeries series2 = new XYSeries("FSPM");
        XYSeries series = new XYSeries("Power Comparision");
        final XYSeriesCollection dataset = new XYSeriesCollection();
        try {
            FileInputStream fstream = new FileInputStream("d:\\devs\\Result.txt");
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine;
            StringBuffer buffer = new StringBuffer();
            while ((strLine = br.readLine()) != null) {
                buffer.append(strLine);
            }
            String message = buffer.toString();
            message = message.replaceAll(" ", "");
            String[] splitMessage = message.split("&&&");
            for (int i = 0; i < splitMessage.length; i++) {
                double x = 0.0, y = 0.0;
                String algType = "direct";
                String[] insideSplit = splitMessage[i].split("\\|\\|");
                if (insideSplit[0].equalsIgnoreCase("isStraightAlg:false")) {
                    algType = "indirect";
                }
                for (int j = 1; j < insideSplit.length; j++) {
                    String[] valueSplit = insideSplit[j].split("\\:");
                    if (valueSplit[0].equalsIgnoreCase("Transactions")) {
                        x = Double.parseDouble(valueSplit[1]);
                    } else {
                        y = Double.parseDouble(valueSplit[1]);
                    }
                    //System.out.println(valueSplit[1]);
                }

                if (!algType.equalsIgnoreCase("direct")) {
                    System.out.println("X :" + x + " Y:" + y);
                    series1.add(x, y);
                } else {
                    System.out.println("X :" + x + " Y:" + y);
                    series2.add(x, y);
                }
            }

            dataset.addSeries(series1);
            dataset.addSeries(series2);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return dataset;
    }

    private JFreeChart createChart(final XYDataset dataset) {
        final JFreeChart chart = ChartFactory.createXYLineChart(
            "Power Comparison",
            "Transaction",
            "Energy",
            dataset,
            PlotOrientation.VERTICAL,
            true,
            true,
            false);
        chart.setBackgroundPaint(Color.white);
        final XYPlot plot1 = chart.getXYPlot();
        plot1.setBackgroundPaint(Color.lightGray);
        plot1.setDomainGridlinePaint(Color.white);
        plot1.setRangeGridlinePaint(Color.white);

        final XYPlot plot2 = chart.getXYPlot();
        plot2.setBackgroundPaint(Color.lightGray);
        plot2.setDomainGridlinePaint(Color.white);
        plot2.setRangeGridlinePaint(Color.white);

        return chart;
    }

    public static void main(final String[] args) {
        final Two demo = new Two("Multi Line Chart");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    }
} 
```

文本文件是：

> isStraightAlg : 假 || 交易：500 || 能量：74267 &&& isStraightAlg：真 || 交易：500 || 能量：55984 &&& isStraightAlg：假 || 交易：1000 || 能量：169735 &&& isStraightAlg：真 || 交易：1000 || 能量：162520 &&& isStraightAlg：假 || 交易：1500 || 能量：333668 &&& isStraightAlg：真 || 交易：1500 || 能量：313766 &&& isStraightAlg：假 || 交易：2000 || 能量：494159 &&& isStraightAlg：真 || 交易：2000 || 能量：481627 &&& isStraightAlg：假 || 交易：2500 || 能量：594839 &&& isStraightAlg：真 || 交易：2500 || 能量：594839 &&& isStraightAlg：假 || 交易：3000 || 能源 : 847096 & && isStraightAlg : 真 || 交易：3000 || 能源：842402 &&&

使用上面的代码绘制图形。图表如下所示。如何显示绘制图形的确切点，即所选`xy`点必须呈现圆形？

![在此处输入图像描述](../Images/d014eeb50dd2f77a4d9cbaf2e9268ff6.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T10:53:16.157

`ChartFactory.createXYAreaChart()`使用`XYAreaRenderer`. 父`AbstractRenderer`级具有更改形状的可见性和外观的方法，如此处所示[的](https://stackoverflow.com/a/9875534/230513)相关`XYLineAndShapeRenderer`.

附录：您的完整示例调用`ChartFactory.createXYLineChart()`，它在`XYLineAndShapeRenderer`内部使用。下图是将这些行添加到`createChart()`：

```
XYLineAndShapeRenderer renderer =
    (XYLineAndShapeRenderer) plot1.getRenderer();
renderer.setBaseShapesVisible(true); 
```

![图片](../Images/3f5cc72a4f3328cebbab7c2c72191f9b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T10:46:35.703

```
plot1.setRangeGridlinePaint(Color.white);  // your existing code
java.awt.geom.Ellipse2D.Double shape = new java.awt.geom.Ellipse2D.Double(-2.0, -2.0, 4.0, 4.0);
plot1.getRenderer().setBaseShape(shape);
// or maybe plot1.getRenderer().setSeriesShape(0, shape); 
```

# android - 如何使用 Flex Air 更改 AS3 中的语音音调？

> ID：11921522
> 
> 赞同：0
> 
> 时间：2012-08-12T10:30:44.373
> 
> 标签：android, actionscript-3, apache-flex, air, flash-builder

我在我的 flex 项目中使用 Google 的文本转语音服务。谷歌使用女性声音。但我想要机器人的声音。可以改变声音吗？（例如音高值。）

我的功能（也许需要。）：

```
private var domain:String = "http://samed.us/";
private function speech(text:String):void
{
    text = escape(text);
    var url:String = domain+"speak_en_"+text;
    _sound = new Sound();
    _sound.addEventListener(Event.COMPLETE, soundPlay);
    _sound.load(new URLRequest(url));
}
private function soundPlay(event:Event):void
{
    var playIt:Sound = event.target as Sound;
    playIt.play();
} 
```

平台：Android 版 Air

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:35:55.187

我在一个项目中使用了 SoundTouch 库，效果很好：

[https://github.com/also/soundtouch-as3](https://github.com/also/soundtouch-as3)

# sql - 从多个表中选择 SUM

> ID：11921528
> 
> 赞同：2
> 
> 时间：2012-08-12T10:31:16.920
> 
> 标签：sql, sum

当我加入 3 个表时，我不断得到错误的总和值。这是表的ERD的图片：

![在此处输入图像描述](../Images/3591bc17850a6bc5779ca9028b1baaba.png)

（原文：http: [//dl.dropbox.com/u/18794525/AUG%207%20DUMP%20STAN.png](http://dl.dropbox.com/u/18794525/AUG%207%20DUMP%20STAN.png)）

这是查询：

```
select SUM(gpCutBody.actualQty) as cutQty   , SUM(gpSewBody.quantity) as sewQty
from jobOrder
inner join gpCutHead on gpCutHead.joNum = jobOrder.joNum
inner join gpSewHead on gpSewHead.joNum = jobOrder.joNum
inner join gpCutBody on gpCutBody.gpCutID = gpCutHead.gpCutID
inner join gpSewBody on gpSewBody.gpSewID = gpSewHead.gpSewID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T10:49:19.997

如果您*只对**所有*订单的剪裁和缝纫数量感兴趣，那么最简单的方法是：

```
select (select SUM(gpCutBody.actualQty) from gpCutBody) as cutQty, 
       (select SUM(gpSewBody.quantity) from gpSewBody) as sewQty 
```

（这假设裁剪和缝纫总是有关联的工作订单。）

如果您想按工作订单查看剪裁和缝纫的细分，这样的内容可能更可取：

```
select joNum, SUM(actualQty) as cutQty, SUM(quantity) as sewQty
from (select joNum, actualQty, 0 as quantity
      from gpCutBody
      union all
      select joNum, 0 as actualQty, quantity
      from gpSewBody) sc
group by joNum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T14:36:55.680

马克的方法很好。我想建议在联合之前进行分组的替代方案，仅仅是因为这可能是沿多个维度求和的更通用的方法。

您的问题是您有两个维度要相加，并且您得到连接中值的叉积。

```
select joNum, act.quantity as ActualQty, q.quantity as Quantity
from (select joNum, sum(actualQty) as quantity
      from gpCutBody
      group by joNum
     ) act full outer join
     (select joNum, sum(quantity) as quantity
      from gpSewBody
      group by joNum
     ) q
     on act.joNum = q.joNum 
```

（我保留了 Mark 的假设，即通过 joNum 执行此操作是所需的输出。）

# javascript - 我如何在 BackboneJS *marionette* collectionView 中打印行？

> ID：11921529
> 
> 赞同：2
> 
> 时间：2012-08-12T10:31:22.120
> 
> 标签：javascript, backbone.js, marionette

我有一个使用 LI itemView 创建 UL 的 collectionView。

我想在下划线模板中使用项目索引号（计数）。IE：

```
hello (item 0)
world (item 1) 
```

有人知道如何在木偶中使用计数吗？我想避免将其放入模型中。

这就是我希望我的 itemView 模板看起来的样子（以 n 作为项目数）：

```
<script id="task-template" type="text/html">
          <div class="order"><%=n%></div>
          <div class="title-container">
               <a href="#">...</a>
          </div>
 </script> 
```

任何帮助表示赞赏，

干杯，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T06:10:55.830

我刚刚找到了一个简单的方法来做到这一点。（使用木偶 v1.0.0-rc6）

使用**templateHelpers**属性。

在您的项目视图中：

```
MyItemView = Backbone.Marionette.ItemView.extend({
    template: "#my-item-view-template",

    templateHelpers: function(){

        var modelIndex = this.model.collection.indexOf(this.model);
        return {
            index: modelIndex
        }

    }
}); 
```

在您的模板中，您可以使用以下命令打印索引：

```
<%= index %> 
```

就这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T12:19:39.907

这应该很容易，因为集合中的模型可以轻松获取您需要的信息。您需要在模型周围创建一个“视图模型”包装器，以便您可以获取所需的额外信息。

```
 var createViewModel(model){

  // inherit from the original model
  var vm = Object.create(model);

  // override the original `toJSON` method
  vm.toJSON = function(){
    var json = model.toJSON();

    // add the index
    json.index = model.collection.indexOf(model);

    return json;
  }

  return vm;
} 
```

您的 itemView 将直接使用此视图模型。

```
 MyItemView = Backbone.Marionette.ItemView.extend({
  template: "#my-item-view-template",

  initialize: function(){

    // replace the model with the the view model
    this.model = createViewModel(this.model);

  }
});

MyCollectionView = Backbone.Marionette.CollectionView({
  itemView: MyItemView
}); 
```

就是这样。

当您将集合传递给`MyCollectionView`构造函数并呈现集合视图时，将在实例化 itemView 时为每个 itemView 实例创建一个新的视图模型。模板现在可以从模型中渲染`index`。

视图模型直接继承自原始模型，因此所有方法和属性仍然可用。覆盖该`toJSON`方法允许您从原始模型中获取原始 json，然后使用您需要的任何数据对其进行扩充。您的原始模型永远不会被修改，但项目视图使用的模型具有您需要的数据。

# visual-studio-2010 - 如何使用 MonoDevelop 创建 VS 2010 项目/解决方案的 apk？

> ID：11921533
> 
> 赞同：1
> 
> 时间：2012-08-12T10:32:02.537
> 
> 标签：visual-studio-2010, xamarin.android, monodevelop, xamarin

谁能告诉我如何使用 MonoDevelop 创建 VS 2010 项目或解决方案的 apk？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:35:14.403

转到构建并选择适用于 Android 的包。.apk 文件将位于您的 bin Debug 或 bin Release 文件夹中，具体取决于您的配置管理器设置。

但是，您将无法使用 monoDroid 试用版部署工作 apk。

# arrays - 光标只返回一行

> ID：11921544
> 
> 赞同：0
> 
> 时间：2012-08-12T10:34:33.170
> 
> 标签：arrays, sqlite, arraylist, cursor, row

我正在检查以将我最喜欢的自己的 Promotions 对象放入数组中。我试图这样做（来自我的 PromotionsBDD 类，该类控制我的 SQLite 数据库中的表促销）：

```
public ArrayList<Promotion> getListPromotionsFavorites()
    {
        String[] columns = new String[] {"ID", "RATING", "TITLE", "COMPANY_ID","AVAILABLEDATE", "DESCRIPTION", "SETONFAVORITE"};

        Cursor objCursor = bdd.query(TABLE_PROMOTIONS, columns,null,null,null,null,null,null);//requete de récupération de la liste

        int id = objCursor.getColumnIndex("ID");
        int rating = objCursor.getColumnIndex("RATING");
        int title = objCursor.getColumnIndex("TITLE");
        int companyid = objCursor.getColumnIndex("COMPANY_ID");
        int availabledate = objCursor.getColumnIndex("AVAILABLEDATE");
        int description = objCursor.getColumnIndex("DESCRIPTION");
        int setonfavorite = objCursor.getColumnIndex("SETONFAVORITE");

        ArrayList<Promotion> promoFavoriteArray = new ArrayList<Promotion>();
        objCursor.moveToFirst();// position sur la première ligne

        if (objCursor != null) 
        {
            if (objCursor.isFirst())
            {
                int i = 0;
                do 
                {
                    String resultsetonfavorite = objCursor.getString(setonfavorite);
                    if (resultsetonfavorite.equals("true"))
                    {
                        i++;
                        String resultid = objCursor.getString(id);
                        String resultrating = objCursor.getString(rating);
                        String resultitle = objCursor.getString(title);
                        int resultcompanyid = objCursor.getInt(companyid);
                        String resultavailbledate = objCursor.getString(availabledate);
                        String resultdescription = objCursor.getString(description);

                        Promotion promo = new Promotion(resultid, resultrating, resultitle, 
                                resultcompanyid,resultavailbledate,resultdescription, resultsetonfavorite);
                        promoFavoriteArray.add(promo);
                        objCursor.moveToNext();//positionnement sur le suivant
                    }
                    else
                        i++;
                }
                while(objCursor.isLast());
            }
        }

    objCursor.deactivate();
    objCursor.close();
    return promoFavoriteArray;
} 
```

它只是返回给我一个顶行数组..有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T02:00:52.337

如果要检查表中是否有记录。你可以使用这个。

```
Cursor cursor=sqLiteDatabase.rawQuery("select * from table limit 1", null);
        if (cursor.moveToNext()) {
            return true;
        }
        return false; 
```

它只会返回记录在案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:54:07.687

换行

```
while(objCursor.isLast()); 
```

至

```
while(!objCursor.isLast()); 
```

# vb.net - 没有异常通知但是下面的代码没有执行

> ID：11921550
> 
> 赞同：0
> 
> 时间：2012-08-12T10:35:56.700
> 
> 标签：vb.net

我正在使用 VB 2010 Express，有时我的代码被忽略，没有任何错误通知。例如，我在处理 me.Load 的子程序的末尾有这段代码：

![在此处输入图像描述](../Images/16f2e7ee3b92073f0e9b1cceb85edc0c.png)

counter = counter 是一条测试线。mPlayer 是 Toub 的 sound midi dll 中的一个对象，定义如下：

```
Dim mPlayer As MyMediaPlayer.MyWinPlayer
mPlayer = New MyMediaPlayer.MyWinPlayer() 
```

当文件名包含有效的 midi 文件时，一切正常并显示 msgbox。当 midi 文件无效时，我希望生成错误或 AudioLength 为 NULL 或一些奇怪的值。相反，不会触发错误，调试器只会退出子程序。

更详细：调试器在第一个断点处停止。然后，当我单击“继续”时，会显示表单，而调试器不会到达其他断点或生成 MsgBox。

你能解释一下如何让VB给我这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:05:47.247

我不熟悉您正在使用的库，但是由于文件无效而导致的任何异常都将源自该`MyWinPlayer.Open()`方法（vb-speak 中的函数）。因此，如果抛出异常，您需要在 try-catch 中处理该异常。如果您当前的子程序没有处理异常，那么异常将*冒泡*到调用方法并继续运行，直到有某个地方处理了异常。

try-catch 块是这样的（我不再在 vb.net 中写很多，语法可能不完美）：

```
Try

    mPlayer.Open(filename);

Catch ex As Exception

    'Do something with the exception 
    ' (e.g. write a log, set a value, or display error message)

End Try 
```

尽管我在上面的代码块中写了些什么，我还是鼓励你不要抓住一个 general `Exception`，而是专注于可能从`Open()`方法中抛出的特定类型的异常。原因是您只想处理您知道如何在当前方法中处理的异常，并让其他异常冒泡。您需要查看该库的文档并查看可以抛出哪些类型的异常并包含它们。

另一件重要的事情是，除非你有很好的理由，否则不要使用空`catch`块（我现在想不出，但我敢肯定有一些非常罕见的用途）。一个空的`catch`只会吞下异常而不用它做任何事情。它甚至不会通知您有异常。

现在，如果您不处理任何异常，则异常应该一直冒泡到调用堆栈的顶部，并且调试器应该显示一条`Unhandled Exception`消息并停在那里。如果它没有这样做，那么您要么在调用堆栈的下方进一步吞下异常，要么遇到在他的评论中提到的[可能重复](https://stackoverflow.com/q/4933958/250725)的Hans Passant 中提到的错误

MSDN对 .NET 语言中的异常处理有相当不错的[总结。](http://msdn.microsoft.com/en-us/library/ms229014)我鼓励你阅读更多关于这个主题的内容。

# sql - 指定的字段可以引用 FROM 子句中列出的多个表

> ID：11921559
> 
> 赞同：0
> 
> 时间：2012-08-12T10:38:11.803
> 
> 标签：sql, ms-access, join

我有以下代码。我的问题是我想从另一个表名 Employee 中检索每个员工姓名，该表名 Employee 的 EmployeeID 列类似于我在当前查询中使用的 AccessLog 表。现在，当我加入这两个表时，它给出了我在标题上所说的那个奇怪的错误。没有在第一个 SELECT 和 作为 A.EmployeeID= Employee.EmployeeID 到最后一个 ORDER By 子句的 INNER JOIN Employee，它运行良好。我认为问题在于命名/别名。我看到了类似的线程，但那些并没有解决我的问题。如果有人能指出我的错误，将不胜感激。

```
SELECT **A.EmployeeID,
    Employee.FirstName,**
    MonthName(Month([LogDate])) AS MonthName,
    Round((Sum(Int(DateDiff("s",'00:00:00',Duration)))/3600)) AS TotalTime
    FROM (
         SELECT AccessLog.EmployeeID, 
                AccessLog.LogDate, 
                AccessLog.TerminalID, 
                AccessLog.LogTime, 
                Format((SELECT max(LogTime) 
                        FROM AccessLog AS Alias 
                        WHERE Alias.LogTime < AccessLog.LogTime 
                        AND Alias.EmployeeID = AccessLog.EmployeeID 
                        AND Alias.LogDate = AccessLog.LogDate 
                        AND (Alias.TerminalID)<>"iGuard1A" 
                        And (Alias.TerminalID)<>"iGuard1B"  
                        AND Alias.EmployeeID = AccessLog.EmployeeID),"hh:nn:ss") AS PrevTime, 
                Format((ElapsedTime(iif(PrevTime = '',logtime,prevtime),[LogTime])),"hh:nn:ss") AS Duration, 
                AccessLog.InOut 
             FROM AccessLog 
             WHERE (((AccessLog.TerminalID)<>"iGuard1A" 
             And (AccessLog.TerminalID)<>"iGuard1B") 
             AND ((AccessLog.EmployeeID) Like "2*") 
             AND ((AccessLog.InOut)="OUT")) 
             ORDER BY AccessLog.EmployeeID, AccessLog.LogDate, AccessLog.LogTime)  
             **AS A INNER JOIN Employee ON A.EmployeeID= Employee.EmployeeID**
      GROUP BY EmployeeID, MonthName(Month([LogDate])); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:52:58.030

我认为这可能是`GROUP BY EmployeeId`- 尝试将其更改为`GROUP BY A.EmployeeId`or 或`GROUP BY Employee.EmployeeId`。

编辑：它可能必须是`GROUP BY A.EmployeeId`，因为那是使用 SELECT 的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:35:34.067

我解决了。正如我所说，存在名称/别名问题。我必须为每个子查询中使用的同一个表提供单独的别名。即使在那之后它显示了顶部选择中名字的另一个聚合函数错误，我也通过将它包含在子查询中来解决了这个问题。所以我的代码如下：

```
SELECT C.EmployeeID, 
   (SELECT Employee.FirstName& ' ' &Employee.LastName 
      FROM Employee 
      where C.EmployeeID= Employee.EmployeeID) 
    AS FullName, 
   MonthName(Month([LogDate])) AS MonthName,
   Round((Sum(Int(DateDiff("s",'00:00:00',Duration)))/3600)) AS TotalTime
   FROM (SELECT B.EmployeeID, 
              B.LogDate, 
              B.TerminalID, 
              B.LogTime, 
              Format((SELECT max(LogTime) 
                      FROM AccessLog AS A 
                      WHERE A.LogTime < B.LogTime 
                      AND A.EmployeeID = B.EmployeeID  
                      AND A.LogDate = B.LogDate 
                      AND (A.TerminalID)<>"iGuard1A" 
                      And (A.TerminalID)<>"iGuard1B"  
                      AND A.EmployeeID = B.EmployeeID),"hh:nn:ss") AS PrevTime,  
              Format((ElapsedTime(iif(PrevTime = '',logtime,prevtime),[LogTime])),"hh:nn:ss") AS Duration, 
              B.InOut 
              FROM AccessLog As B  
              WHERE (((B.TerminalID)<>"iGuard1A" 
               And (B.TerminalID)<>"iGuard1B") 
               AND ((B.EmployeeID) Like "2*") 
               AND ((B.InOut)="OUT")) 
               ORDER BY B.EmployeeID, B.LogDate, B.LogTime)  
AS C INNER JOIN Employee ON C.EmployeeID= Employee.EmployeeID
GROUP BY C.EmployeeID, MonthName(Month([LogDate])); 
```

# list - 如何在 Python 中克隆嵌套列表？

> ID：11921568
> 
> 赞同：0
> 
> 时间：2012-08-12T10:40:02.983
> 
> 标签：list, for-loop, python-2.7, clone

我正在阅读“如何像计算机科学家一样思考：使用 Python 第 2 版文档学习”。在[第 9 章](http://openbookproject.net/thinkcs/python/english2e/ch09.html)的最后有这个练习 11，它要求你编写 Python 代码以使 doctest 通过。

我最初的解决方案：

```
def add_column(matrix):
"""
  >>> m = [[0, 0], [0, 0]]
  >>> add_column(m)
  [[0, 0, 0], [0, 0, 0]]
  >>> n = [[3, 2], [5, 1], [4, 7]]
  >>> add_column(n)
  [[3, 2, 0], [5, 1, 0], [4, 7, 0]]
  >>> n
  [[3, 2], [5, 1], [4, 7]]
"""
result = matrix[:]
for index in range(len(matrix)):
    result[index] += [0]
return result

if __name__ == "__main__":
    import doctest
    doctest.testmod() 
```

然而，这段代码没有通过第二次测试。我将**for**循环的主体更改为以下内容：

```
result[index] = result[index] + [0] 
```

并且代码现在通过了所有测试。但我不明白代码中的这种变化是如何解决问题的。我认为`result[index] = result[index] + [0]`是 的显式形式`result[0] += [0]`，那么为什么行为不同？

将我的答案与解决方案中提供的代码进行了比较后，我怀疑问题可能在于我如何克隆列表。在解决方案中，它是这样完成的：`result = [d[:] for d in matrix]`，在这种情况下，我的初始**for**循环将起作用。但为什么`result = matrix[:]`不工作？它是在创建别名，而不是新对象吗？

另外，有人可以解释如何`[d[:] for d in matrix]`解析以及何时使用这种语法吗？我以前没有见过这种使用**for**循环的方式，也没有在课程中解释/演示过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:26:50.857

由于以下原因，未克隆该列表：

```
result = matrix[:] 
```

确实复制了列表；但是您还没有复制列表*项*。Python 通过引用处理列表项，因此`result[0]`和`matrix[0]`仍将指向同一个列表对象，即使认为`result`和`matrix`是不同的列表。

`[d[:] for d in matrix]`克隆主列表和列表元素，因为它迭代`matrix`并在新列表中创建每个元素的副本（而不是使用对该元素的引用）。

您还可以使用该`copy`模块，该模块特别有用，因为它也处理字典，并且`copy.deepcopy`您可以克隆未知深度的多维列表：http: [//docspy2zh.readthedocs.org/en/latest/library/copy。 html](http://docspy2zh.readthedocs.org/en/latest/library/copy.html)（但如果这超出了您在此处尝试学习的范围，则足够公平）。

至于'+='和'= ... + ...'之间的区别，我承认我也有点惊讶。在这种情况下，我倾向于使用`result[index].append(0)`，这样可以避免这种歧义；但这当然不是答案。

# c++ - 定义多个派生接口成员

> ID：11921570
> 
> 赞同：1
> 
> 时间：2012-08-12T10:40:17.327
> 
> 标签：c++, interface, virtual-inheritance, abstract-base-class

我希望你能帮助我解决以下问题。我正在尝试创建一个灵活的接口系统并遇到问题。这是相关代码：

```
// Interface 1
//      this: virtual f_a
// -> abstract
struct I_A abstract
{
    virtual void f_a() = 0;
};

// Interface 2
//      I_A : virtual f_a
//      this: virtual f_b
// -> abstract
struct I_B abstract : public I_A
{
    virtual void f_b() = 0;
};

// Implementation 1
//      I_A : virtual f_a
//      zhis: defines f_a
// -> not abstract
struct S_A : public I_A
{
    virtual void f_a() {}
};

// Implementation 2
//      I_B : virtual f_a
//      I_B : virtual f_b
//      S_A : defines f_a
//      this: defines f_b
// -> not abstract
struct S_B : public I_B, public S_A
{
    virtual void f_b() {}
}; 
```

我无法实例化 S_B 因为编译器声明它是抽象的。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:49:34.857

您需要在这里使用虚拟继承：

```
struct I_A
{
    virtual void f_a() = 0;
};

struct I_B : virtual public I_A
{
    virtual void f_b() = 0;
};

struct S_A : virtual public I_A
{
    virtual void f_a() {}
}; 
```

注意 1：我忽略了您`abstract`在类声明中的陈述，因为它不是标准的 C++。

注意 2：这里有一个副本，您可以在其中找到关于为什么会发生这种情况的解释[。](https://stackoverflow.com/questions/11662890/inherit-from-multiple-partial-implementations-of-an-abstract-base-class/11662963#11662963)

# objective-c - iOS 目标 C 将坐标从绝对图像位置转换为我的视图坐标系

> ID：11921571
> 
> 赞同：4
> 
> 时间：2012-08-12T10:40:18.190
> 
> 标签：objective-c, ios, scaling

我正在使用 CIDetector 在图片中查找人脸。

它返回的人脸坐标是图像文件中的绝对坐标（图像尺寸明显大于屏幕尺寸）。

我尝试使用 converRect:toView 命令。图像本身不是 UIView，因此该命令不起作用，而且我还有一些相互嵌入的视图，最终显示图像。

我想将图像中找到的人脸的边界转换为嵌入图像中屏幕上显示的人脸的确切位置。

如何实现？

谢谢！ [手机上显示的图像 - 图像被缩放以适应屏幕的宽高比](http://i.stack.imgur.com/x44sL.jpg)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T14:43:47.190

CIDetecter (CoreImage) 的坐标相对于 UIKit 坐标翻转。有很多关于 iOS 人脸检测的教程，但其中大多数要么不完整，要么把坐标弄乱了。这是正确的：http: [//nacho4d-nacho4d.blogspot.com/2012/03/coreimage-and-uikit-coordinates.html](http://nacho4d-nacho4d.blogspot.com/2012/03/coreimage-and-uikit-coordinates.html)

需要注意的一点：本教程使用小图像，因此不必将生成的坐标缩放到图像的屏幕 (UIImageView) 表示。假设您使用的是用 iPad 相机拍摄的照片，您将不得不按照源图像的缩放量来缩放坐标（除非您在运行人脸检测例程之前减小它的大小——这可能不是一个坏主意）。您可能还需要旋转图像以获得正确的方向。

这里有一个用于旋转/缩放的答案的例程：[UIImagePickerController camera preview is portrait in landscape app](https://stackoverflow.com/questions/538041/uiimagepickercontroller-camera-preview-is-portrait-in-landscape-app)

这个答案有一个很好的例程，可以在 UIImageView 使用“aspect fit”呈现时找到图像的比例：[How to get the size of a scaled UIImage in UIImageView?](https://stackoverflow.com/questions/389342/how-to-get-the-size-of-a-scaled-uiimage-in-uiimageview)

您需要使用比例来将 CIDetector 坐标从全尺寸图像映射到 UIImageView 中显示的缩小图像。

# android - 如何让Android应用程序在按下开关时启动

> ID：11921573
> 
> 赞同：0
> 
> 时间：2012-08-12T10:40:29.337
> 
> 标签：android

我想有一个Android手机实际运行的情况，以便它可以接听电话并按下开启开关，激活屏幕以使用应用程序，实际上启动一个应用程序运行而无需进一步的用户干预。

我看到了一个类似的问题，从以下建议开始回答。使用接收动作 BOOT_COMPLETED 意图的 BroadcastReceiver。

但是，这似乎是在检测手机的 BOOTING。在我的情况下，手机已启动并正在运行。我希望应用程序运行，因为 on 开关无需任何进一步输入即可激活它。我不希望它是打开开关，然后从屏幕激活应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:41:54.340

您可以编写一个自定义锁屏，它只是在启动时启动您的应用程序（通常在屏幕打开时发生）

# css - 如何确保所有 s with float:right; 实际上漂浮对吗？

> ID：11921577
> 
> 赞同：3
> 
> 时间：2012-08-12T10:41:10.987
> 
> 标签：css, html, two-columns

我有一个 div，其中包含许多高度不同的内部 div，以便创建类似于 Facebook 时间线的两列输出，有点像这样：

```
<div style="width:600px">
<div class="boxsample" style="float:right;width=50%;">Content-right-1</div>
<div class="boxsample" style="float:left;width=50%;">Content-left-1</div>
<div class="boxsample" style="float:left;width=50%;">Content-left-2</div>
<div class="boxsample" style="float:right;width=50%;">Content-right-3</div>
</div> 
```

问题是，每当最后一个左 div 高于最后一个右 div 时，下一个 div 总是像这样浮动到最后一个右 div 的左侧：http: [//postimage.org/image/fi5ndamk5/](http://postimage.org/image/fi5ndamk5/) 它似乎将将 div 挂在右侧作为约束，使其浮动到左侧。

如何确保 float:right div 始终正确浮动？（我正在做一个while循环来从数据库中获取内容，我想通过使用float来指定div所属的列，有点像Facebook时间轴。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T10:47:19.297

如果您正在寻找智能解决方案，请尝试查看；

**[使用 JQuery 和 CSS 设计 Facebook 时间线](http://www.9lessons.info/2012/01/facebook-timeline-design-using-jquery.html)**

和

**[仅使用 HTML 和 CSS 创建 Facebook 时间线](http://kangtanto.com/tutorial/create-facebook-timeline-using-html-and-css-only)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T11:07:47.877

您可以`clear: right`与`float: right`div 和 div`clear: left`一起`float: left`使用。请参阅此[JSFiddle](http://jsfiddle.net/kgnUv/)以供参考。

# cakephp - hasMany 通过加入模型不保存到数据库

> ID：11921581
> 
> 赞同：2
> 
> 时间：2012-08-12T10:42:02.110
> 
> 标签：cakephp

当用户在我的表单中输入数据时，它不会保存到数据库中，这是我的表的结构

```
Invoice - id, sender_id, receiver_id, template_id
Field - id, name, description, default_value, template_id
fields_invoices - id, invoice_id, field_id, entered_value 
```

这是发票模型

类发票扩展 AppModel{ var $name='Invoice'; var $hasMany = array('FieldsInvoice');

这是现场模型

```
 var $hasMany = array(
    'FieldsInvoice'
    ); 
```

这是 fieldsInvoice 模型

```
<?php
class FieldsInvoice extends AppModel {
    public $belongsTo = array(
        'Field' => array(
            'className' => 'Field',
            'foreignKey' => 'field_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
        'Invoice' => array(
            'className' => 'Invoice',
            'foreignKey' => 'invoice_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );
} 
```

这是发票控制器中的创建功能

```
 public function create($id)
    {   
    $this->set('title_for_layout', 'Create Invoice');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');   
    $this->layout='home_layout';

     if (!is_numeric($id)) throw new BadMethodCallException('I need an ID');
     $this->Invoice->id = $id;
     if (!$this->Invoice->exists()) throw new NotFoundException('Invalid ID');

    $this->set('invoice_id',$id);

    $names = $this->Invoice->find('list',array(
    'fields'=>array('template_id'),
    'conditions'=>array('id'=>$id)));

    $fields = $this->Field->find('all', array(
     'conditions'=>array(
     'template_id'=>$names)));

    $this->set(compact('fields'));
    $this->set(compact('invoice_id'));

    $this->set('name',$names);
    $this->Invoice->create();
    if(empty($this->data)){
        $this->data= $this->Field->read($id);
    } 
    else{
        if($this->request->is('post'))
        {

            $this->Invoice->create();
            if($this->FieldsInvoice->save($this->request->data, array('deep'=>true)));
            {
            $this->Session->setFlash('The field has been updated');
            $this->redirect(array('controller'=>'invoices', 'action'=>'index'));

            }
            //else{
            $this->Session->setFlash('Could not be saved');
            //}
        }
    }
} 
```

这是创建功能的视图

```
<?php echo $this->Form->create('FieldsInvoice'); ?>
    <?php foreach ($fields as $field): ?>
    <?php echo $this->Form->hidden('Invoice.id'); ?>
    <?php echo $this->Form->hidden($field['Field']['id']); ?>
    <?php echo $this->Form->Input($field['Field']['name'], array('default' =>$field['Field']['default_value'])); ?>
    <?php endforeach ;?>
    <?php echo $this->Form->End('Submit');?> 
```

调试视图时，这是收到的输出

```
array(
    'Invoice' => array(
        'id' => ''
    ),
    'FieldsInvoice' => array(
        (int) 5 => '',
        'amount' => 'test',
        (int) 6 => '',
        'description' => 'test1',
        (int) 7 => '',
        'totalacctowing' => 'test2',
        (int) 8 => '',
        'pmtinfo' => 'test3'
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:45:00.590

代替：

```
$this->Invoice->save($this->request->data); 
```

在您的 if 条件中使用以下语法；

```
$this->Invoice->save($this->request->data, array('deep' => true)); 
```

[此链接](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)将指导您保存相关数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:22:37.397

你试过调试吗？尝试查看您的表单数据，看看是否所有字段都正常。使用`debug()`或`pr().`

# android - 即使我的应用程序关闭，也可以广播接收工作

> ID：11921582
> 
> 赞同：2
> 
> 时间：2012-08-12T10:42:01.917
> 
> 标签：android

我正在构建一个简单的短信应用程序，我想在收到新短信时自动打开我的应用程序？有**可能吗？** 我为此使用广播接收器

我应该在清单中进行哪些更改？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.message"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MessageActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <receiver android:name=".SmsReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </activity>
    <activity android:name=".Reply" >
    </activity>
 </application>

<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:51:10.927

您应该将接收器从活动中移出，如下所示：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MessageActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Reply" >
    </activity>
<receiver android:name=".SmsReceiver" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
 </application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:50:44.240

在 Android 3.0 及更高版本下，除非用户打开了您的应用程序，否则无法保证接收到您的广播。应用程序不必保持打开状态，只需启动一次即可。这是由一个标志 ( [FLAG_EXCLUDE_STOPPED_PACKAGES](http://developer.android.com/reference/android/content/Intent.html#FLAG_EXCLUDE_STOPPED_PACKAGES) ) 引起的，该标志现在是大多数系统广播的一部分，它表示广播不应启动已停止的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:50:55.807

这已经在[How to make android launch an application on received specific sms](https://stackoverflow.com/questions/8433488/how-to-make-android-launch-an-application-on-received-specific-sms)中得到解答以保持简短：可以使用 BroadcastReceiver。

# ruby-on-rails-3 - 如何设置 RSpec 时区？

> ID：11921583
> 
> 赞同：5
> 
> 时间：2012-08-12T10:42:10.380
> 
> 标签：ruby-on-rails-3, rspec2, rspec-rails

我正在使用 RSpec 和 rspec-rails 2.10 进行测试。

我在 environment.rb 中将 Rails 时区设置为 UTC，但 RSpec 时区成为我的本地时区，东京。

我已经在环境/test.rb 和 spec_helper.rb 中编写了 Time.zone 设置，但没有修复。

如何设置 RSpec 时区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:23:40.440

问题是另一点。我写了一个调整时区偏移的方法，该方法改变了 Rails 时区。这是代码。

```
class WeeklyEvent < ActiveRecord::Base
    def adjust_time_zone_offset
        Time.zone = timezone # => This is the problem. Rails Time.zone changes to timezone.
        time_zone_offset = Time.zone.utc_offset # => 32400 JST offset 9 hours in seconds.
        self.start_date_time  = (start_date_time - time_zone_offset).in_time_zone('UTC')
    end
 end

 japanese_event = WeeklyEvent.find(1)
 p japanese_event.start_date_time  #=> Sun, 01 Jan 2012 09:00:00 JST +09:00 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-21T23:04:20.740

使用`Time.zone.now`而不是`Time.now`.

# php - 如何为需要在 codeigniter 中使用参数的控制器函数创建路由

> ID：11921584
> 
> 赞同：0
> 
> 时间：2012-08-12T10:42:15.710
> 
> 标签：php, codeigniter, routing

我想知道如何为需要传递参数的控制器函数创建路由。就像我创建这样的函数一样：

```
function abc($arg)
 {
     return $arg;
 } 
```

那么如何为同一功能指定路线？我的论点将包含字母和数字的混合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:51:59.583

使用[uri 类](http://codeigniter.com/user_guide/libraries/uri.html)并尝试读取传递给您的方法的段

在下面的控制器方法中，您传递 url 段，例如
控制器/函数/argument1/argument2/argument3/4/5/6/..

```
// controller
public function myfunction(){
 var_dump($this->url->segment(1)); // route/abc -> abc
 var_dump($this->url->segment(2)); // route/abc/123 -> 123
} 
```

如果函数采用固定长度的参数，那么类似于

```
public function myfunction($arg1,$arg2){
 // ..
} 
```

您可以使用路线映射来完成这项工作，

```
$route["myfunction/(any)"= "remap" // .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:17:51.347

将此添加到您的**APP_PATH/application/config/routes.php**

```
$route['controller_name/abc/([A-Za-z0-9])+'] = "controller_name/abc/$1"; 
```

更多详情[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

# opencv - 使用 openCVSharp 在 unity3d 中转换 IPLimage <> texture2d

> ID：11921585
> 
> 赞同：0
> 
> 时间：2012-08-12T10:42:23.070
> 
> 标签：opencv, unity3d, augmented-reality

正如题主所说。我正在尝试在unity3d中实现openCVSharp surf，并且有点卡在从iplimage到texture2d的转换部分。还考虑到此转换过程应至少以 25 fps 运行。所以任何提示或建议都非常有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T10:09:12.260

可能有点晚了，我现在正在做同样的事情，这是我的解决方案：

```
void IplImageToTexture2D (IplImage displayImg)
{
    for (int i = 0; i < height; i++)
    {
        for (int j = 0; j < width; j++)
        {
            float b = (float)displayImg[i, j].Val0;
            float g = (float)displayImg[i, j].Val1;
            float r = (float)displayImg[i, j].Val2;
            Color color = new Color(r / 255.0f, g / 255.0f, b / 255.0f);
            videoTexture.SetPixel(j, height - i - 1, color);
        }
    }
    videoTexture.Apply();
} 
```

但这有点慢。仍在努力提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T14:43:25.813

```
Texture2D tex = new Texture2D(640, 480);
CvMat img = new CvMat(640, 480, MatrixType.U8C3);

byte[] data = new byte[640 * 480 * 3];
Marshal.Copy(img.Data, data, 0, 640 * 480 * 3);
tex.LoadImage(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T10:07:50.153

要提高性能，请使用 Unity3d 的未记录函数 LoadRawTextureData ：

```
Texture2D IplImageToTexture2D(IplImage img)
{
    Texture2D videoTexture = new Texture2D(imWidth, imHeight, TextureFormat.RGB24, false);
    byte[] data = new byte[imWidth * imHeight * 3];
    Marshal.Copy(img.ImageData, data, 0, imWidth * imHeight * 3);
    videoTexture.LoadRawTextureData(data);
    videoTexture.Apply();
    return videoTexture;
} 
```

# java - Java 拖放和 netbeans

> ID：11921587
> 
> 赞同：1
> 
> 时间：2012-08-12T10:42:38.547
> 
> 标签：java, netbeans, drag-and-drop

我使用 netbeans 创建 GUI，我需要将拖放组件添加到我的项目中。但我厌倦了这样做。netbeans 不支持（或不正确拖动）在程序运行时拖放。所以我需要你的帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:01:41.970

Netbeans 是否会引发任何类型的错误（例如无法初始化组件或其他什么？？）。

如果是这样，您可以找到登录`{user}/.netbeans/{version}/var/log/messages.log`

在 Windows 7 上，这将是`/users/{user}/.netbeans/{version}/var/log/messages.log`

Netbeans 7.2 将其移至 .AppData/local （我认为 - 如果不存在，请检查漫游）

这将使您了解错误是什么（包括一个很好的堆栈跟踪）

还要记住，调色板中的组件需要一个空的构造函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:04:41.817

拖放功能已从 NetBeans 的当前版本中减少/删除。

尝试使用支持完整拖放功能的 NetBeans 版本 6.1 到 6.8。

# ruby-on-rails - 在上帝配置文件中使用 ENV 变量

> ID：11921589
> 
> 赞同：1
> 
> 时间：2012-08-12T10:43:04.387
> 
> 标签：ruby-on-rails, resque, god

我想在我的上帝配置文件中使用环境变量。我在用

```
queue       = ENV['ENCODE_QUEUE'] || "encoding_abc" 
```

并使用设置 ENCODE_QUEUE

`export ENCODE_QUEUE="enocding_xyz"`在 ~/.bashrc 文件中。但是上帝服务总是使用'​​encoding_abc'我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:47:52.820

您的上帝服务是否可能没有加载`~/.bashrc`文件？

如果`god`从非交互式 shell 运行，则需要将导出放入`~/.bash_profile`。还要确保它以您的用户身份运行。

# prism - App.config 文件和节类型

> ID：11921590
> 
> 赞同：5
> 
> 时间：2012-08-12T10:43:29.270
> 
> 标签：prism, app-config

我有个问题。我正在从 MTaulty 的视频中学习：[http](http://channel9.msdn.com/blogs/mtaulty/prism--silverlight-part-2-dependency-injection-with-unity) ://channel9.msdn.com/blogs/mtaulty/prism--silverlight-part-2-dependency-injection-with-unity 。我对他在 18:00 分钟创建的**.config文件有疑问。**看不到里面有什么

```
 <section type=".." 
```

我写：

```
 type="Microsoft.Practises.Unity.Configuration.UnityConfigurationSection, Microsoft.Practises.Unity.Configuration" /> 
```

但它不起作用。我不知道出了什么问题。我有一个错误，VisualStudio 无法加载文件'Microsoft.Practises.Unity.Configuration 并找到一个文件。

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T23:24:47.027

如果您想通过配置文件指定模块[，MSDN 上的 Prism Guide](http://msdn.microsoft.com/en-us/library/gg405479%28v=pandp.40%29#sec21)可以很好地解释这一点。

引自指南

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="modules"
      type="Microsoft.Practices.Prism.Modularity.ModulesConfigurationSection, Microsoft.Practices.Prism"/>
  </configSections>
  <modules>
    <module assemblyFile="ModularityWithUnity.Desktop.ModuleE.dll" moduleType="ModularityWithUnity.Desktop.ModuleE, ModularityWithUnity.Desktop.ModuleE, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" moduleName="ModuleE" startupLoaded="false" />
     <module assemblyFile="ModularityWithUnity.Desktop.ModuleF.dll" moduleType="ModularityWithUnity.Desktop.ModuleF, ModularityWithUnity.Desktop.ModuleF, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" moduleName="ModuleF" startupLoaded="false">
      <dependencies>
        <dependency moduleName="ModuleE"/>
      </dependencies>
    </module>
  </modules>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-19T01:24:15.577

对于 Prism 6.0，部分类型已更改为**Prism.Modularity.ModulesConfigurationSection、Prism.Wpf**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="modules" type="Prism.Modularity.ModulesConfigurationSection, Prism.Wpf" />
  </configSections>
  <modules>    
   *** register your modules here ****
  </modules>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T09:10:01.127

我遇到了 App.config 映射问题。节类型无效。正确的是：

```
<section name="modules" type="Microsoft.Practices.Prism.Modularity.ModulesConfigurationSection, Microsoft.Practices.Prism.**Composition**"/> 
```

希望能帮助到你。

# c++ - 如何从 IDWriteFontFace 创建 IDWriteTextFormat

> ID：11921592
> 
> 赞同：3
> 
> 时间：2012-08-12T10:43:50.453
> 
> 标签：c++, directx, directwrite

我正在创建 W8 C++/CX DirectX 应用程序，并且正在尝试使用来自应用程序自己的存储的自定义字体文件。我弄清楚如何使用**IDWriteFactory::CreateFontFileReference**从目录加载**IDWriteFontFile**，然后如何从中创建**IDWriteFontFace**。

我现在不知道的是如何使用**IDWriteFontFace**加载**IDWriteTextFormat**，如果可能的话。我应该这样做**IDWriteFontCollection**吗？

对不起，如果答案真的很愚蠢和微不足道，我对 DirectX 很陌生，并且在旅途中学习一切。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-04T17:16:59.030

有关如何在运行时加载您自己的自定义字体的必要高级视图，请参阅有关[自定义字体集合](http://msdn.microsoft.com/en-us/library/windows/desktop/ee264312(v=vs.85).aspx)的MSDN DirectWrite 帮助主题。您对如何执行此操作的猜测是错误的。

似乎有关如何执行此操作的最佳示例直接与 Win7SDK directWrite 示例一起提供。请参阅[DirectWrite\CustomFont C++ 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd941710(v=vs.85).aspx)。

该过程不涉及获取或使用任何`IDWriteFontFace`类型。事实上，`IDWriteFontFace`我能看到的唯一能做的事情就是确定`glyphindices`。

相反，您从工厂开始，就像在所有 DirectX API 中一样，然后使用工厂，您想要创建一个字体集合和一个[字体文件加载器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368210(v=vs.85).aspx)，并使用该字体集合枚举字体。创建文本格式的界面希望您传入自定义字体集合，而不是字体。

[在codeproject](http://www.codeproject.com/Articles/376597/Outline-Text-With-DirectWrite)上可以找到正确使用接口类型 IDWritefontFace 来获取字形信息的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:22:46.230

你不能用 IDWriteFontFace 创建 IDWriteTextFormat，你可以用函数 IDWriteFactory::CreateTextFormat 创建一个 IDWriteTextFormat 实例。IDWriteFontFace 用于描述字体的属性，IDW​​riteTextFormat 用于描述文本的属性。

# xcode - Xcode 4.4：如何在代码完成窗口中禁用快速帮助？

> ID：11921598
> 
> 赞同：3
> 
> 时间：2012-08-12T10:45:48.217
> 
> 标签：xcode, xcode4.4, xcode4.5

代码完成本身是一件好事，但在 99.9% 的情况下，我不需要在新 Xcode 中添加到其中的新快速帮助视图，它只会使工作区变得混乱，并且（最糟糕的是）使代码完成视图成为反应迟钝。

有谁知道如何在代码完成视图中关闭快速帮助视图？

我查看了 Xcode 的 Preferences 窗口和 Xcode 的首选项文件 (com.apple.dt.Xcode.plist)，但搜索“completion”或“quickhelp”或只是“help”没有给出任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:30:49.397

首选项 > 文本编辑 > 取消选中“输入时建议完成”。

# php - 在 ubuntu 中启用 php-curl 功能

> ID：11921605
> 
> 赞同：1
> 
> 时间：2012-08-12T10:47:09.570
> 
> 标签：php, ubuntu, curl

我正在尝试在 php 中使用 curl。

我阅读了有关使用 CURLOPT_VERBOSE 来帮助调试的信息。但它没有输出。我检查了我的 phpinfo() 并在 cURL 下表示：

```
debug => no 
```

我想这就是这里的问题。如何将其设置为是？我查看了 php.ini 并且可以找到它。

谷歌也没有运气。这里也没有运气：[如何启用 php-curl 的功能](https://stackoverflow.com/questions/9996050/how-to-enable-features-for-php-curl)

我希望有一个人可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:44:12.537

设置的工作不需要具有 cURL 的调试版本`CURLOPT_VERBOSE`，但默认情况下，`CURLOPT_VERBOSE`信息会输出到`STDERR`仅在控制台上可见的输出。因此，如果您从浏览器运行 PHP，详细输出不会发送到您可以看到的任何地方。

您可以将选项设置`CURLOPT_STDERR`为文件句柄，详细输出应该写在那里。

你应该能够做到这一点：

```
$stdout = fopen('php://output', 'w+');

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, 'http://www.example.com');
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_STDERR, $stdout);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$data = curl_exec($ch); 
```

我不确定我目前是否遇到了 PHP 错误（通过 FastCGI 运行 PHP 5.4.5），因为我在浏览器中看不到详细的输出，但如果我从命令行运行它，我会这样做。如果我确实*在*`fwrite`浏览器中看到了该输出，但 cURL 仍然没有任何内容，所以我知道句柄是有效的。`$stdout`

 *如果您遇到同样的问题，这里有一个解决方法：

```
$tempout = fopen('php://temp', 'w+');

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, 'http://www.example.com');
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_STDERR, $tempout);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$data = curl_exec($ch);

rewind($tempout);
$debug = stream_get_contents($tempout);

echo $debug; // the data from CURLOPT_VERBOSE 
```

希望有帮助。*

# android - 我无法在 android 中捕获 NullPointerException

> ID：11921607
> 
> 赞同：0
> 
> 时间：2012-08-12T10:47:45.660
> 
> 标签：android, multithreading, exception-handling

我有一个名为 UpdaterService 的服务类。以下是我的 onStartCommand() 方法：

```
 @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
       if(Constants.DEBUG) Log.d(TAG, "onStarted");
       updater = new Updater();
       try {
           updater.start();
       } catch(NullPointerException e) {
           Stuff.showErrorMessage();
       }

       return Service.START_STICKY;
} 
```

updater 是 Updater 类的自定义对象，它扩展了 Thread。以下是我得到的例外：

```
08-12 12:19:49.708: ERROR/AndroidRuntime(1995): Uncaught handler: thread Updater exiting due to uncaught exception
08-12 12:19:49.708: ERROR/AndroidRuntime(1995): java.lang.NullPointerException: HostActivity not instantiated
    at com.morten.app.klepprc.services.UpdaterService$Updater.run(UpdaterService.java:135) 
```

这会导致我的应用程序崩溃。在 UpdaterService.java 的第 135 行：

```
if(application.getHostActivity() == null) {
   throw new NullPointerException("HostActivity not instantiated");
} 
```

为什么我的 catch 块中没有处理异常？所有的反馈都得到了认可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:52:34.053

我假设您的`start();`方法是非阻塞的。

异常发生在 run() 方法中，它在不同的线程上？

# android - Android 模拟器上的低 FPS

> ID：11921608
> 
> 赞同：0
> 
> 时间：2012-08-12T10:47:47.817
> 
> 标签：android, windows, emulation, frame-rate

首先，您需要知道我有一台非常强大的计算机，所以这不是问题。

我尝试使用 OpenGL 和 Canvas 制作一个除了 FPS 计数器之外没有任何东西的黑屏，但该应用程序不会超过 10-11 FPS。

我只是迷路了，我不知道问题是什么，我检查了它不是渲染或更新功能......

谢谢您的帮助。

我在 Windows 7 64 位 BTW 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-16T22:05:11.830

8年后，我有了答案。

打开 AVD 管理器，向下滚动到模拟性能，将其从“自动”更改为“硬件 - GLES 2.0”，如果仍然没有执行显示高级设置并将其设置为“冷启动”，这会将其从 8-12 fps 更改到稳定的 30 fps 不间断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:56:48.837

我更倾向于说这是模拟器的故障而不是您的系统。它对我来说也非常慢，即使是进行一般的应用程序调试。对您的帧速率并不感到惊讶。Intel x86 Image 可能会有所作为，但即便如此，我通常也看不到太多改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:59:04.793

您可以创建 x86 虚拟机。看

[Android-x86 - 将 Android 移植到 x86](http://www.android-x86.org/)

[ISO 映像](http://code.google.com/p/android-x86/downloads/list)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T14:05:19.970

好吧，这可能不是每个人的选择，但对我来说它是完美的！使用[Bluestacks 播放器](http://bluestacks.com/)。它运行Android 2.3.4，非常流畅和快速。有时甚至比普通设备更快。唯一的缩减是，您可以只在 API 级别 10 上测试应用程序，并且只在一个屏幕尺寸上，但它非常适合测试它是否工作。只需`adb`通过运行连接播放器

```
adb connect 127.0.0.1 
```

（它总是相同的IP地址）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T11:48:18.067

以下是一些可以显着加快模拟器速度的技巧：

*   **为您的 AVD 提供1GB 的 RAM**（甚至更多）。不要试图模拟真实设备的 RAM 量，它通常是无用的，并且会惊人地减慢模拟器的速度。
*   **模拟 Android 2.3.3**，它在模拟器上的启动和运行速度比以前和下一个版本更快（顺便说一下，如果您使用 SQLite 数据库，则*永远不要模拟 Android 2.1 或 2.2*。即使在真实设备上，SQLite 实现也非常慢）。
*   **除非进行最终测试，否则**不要使用高屏幕分辨率和密度。**使用可用的最小分辨率并将 LCD 密度设置为较低（在 mdpi 范围内）。**

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T11:17:01.450

我发现当我通过 Windows 任务管理器将处理器亲和力设置为 all 时，我可以从模拟器中获得更好的性能**

# java - Android：从原始文件夹共享图像。分享的图片有误

> ID：11921609
> 
> 赞同：2
> 
> 时间：2012-08-12T10:48:12.663
> 
> 标签：java, android, stream, share

我有一个用户可以从文件夹`Activity`中共享图像的位置。`raw`

原始文件夹有 70 张图像，全部按字母顺序命名。第一个是`R.raw.recipe01`，最后一个是`R.raw.recipe70`。

我从 a 中获取了`int`我想共享的图像`Bundle`，并且我有一种方法可以将图像从`raw`文件夹复制到可访问的文件中。

我打电话`startActivity(createShareIntent());`给`ActionBar` `MenuItem`，它成功地工作了。

问题

共享`intent`将始终选择`R.raw.recipe01`为图像，即使`int`from`Bundle`是 for image for exmaple `R.raw.recipe33`。

我在下面分享了我的代码。谁能发现我做错了什么？

代码：

```
private int rawphoto = 0;
private static final String SHARED_FILE_NAME = "shared.png";

@Override
public void onCreate(Bundle savedInstanceState) {

    Bundle bundle = getIntent().getExtras();
    rawphoto = bundle.getInt("rawphoto");
    int savedphoto = rawphoto;

    // COPY IMAGE FROM RAW
    copyPrivateRawResourceToPubliclyAccessibleFile(savedphoto);

private Intent createShareIntent() {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.setType("image/*");
    shareIntent.putExtra(Intent.EXTRA_TEXT, "IMAGE TO SHARE: ");
    Uri uri = Uri.fromFile(getFileStreamPath("shared.png"));
    shareIntent.putExtra(Intent.EXTRA_STREAM, uri);

    return shareIntent;
}

private void copyPrivateRawResourceToPubliclyAccessibleFile(int photo) {

    System.out.println("INT PHOTO: " +photo);

    InputStream inputStream = null;
    FileOutputStream outputStream = null;
    try {
        inputStream = getResources().openRawResource(photo);
        outputStream = openFileOutput(SHARED_FILE_NAME,
                Context.MODE_WORLD_READABLE | Context.MODE_APPEND);
        byte[] buffer = new byte[1024];
        int length = 0;
        try {
            while ((length = inputStream.read(buffer)) > 0) {
                outputStream.write(buffer, 0, length);
            }
        } catch (IOException ioe) {
            /* ignore */
        }
    } catch (FileNotFoundException fnfe) {
        /* ignore */
    } 

    finally {
        try {
            inputStream.close();
        } catch (IOException ioe) {

        }
        try {
            outputStream.close();
        } catch (IOException ioe) {

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:51:56.217

如果文件已经存在，则删除`Context.MODE_APPEND`以便文件被覆盖。

# java - Android inputType="numberDecimal" 调出不带逗号的键盘

> ID：11921610
> 
> 赞同：8
> 
> 时间：2012-08-12T10:48:17.033
> 
> 标签：java, android

所以我一直在玩一些数学问题的小游戏。例如，该应用程序给你一个像 23 + 47 这样的问题，这很好，但是当它给你一个像 9/6 这样的问题时，问题就出现了。由于您在 EditText 中输入了结果，因此我需要正确的输入类型。但！当我做

```
android:inputType="numberDecimal" 
```

它提供的软键盘是没有分隔符的软键盘，这意味着我不能制作逗号。它几乎毁了游戏:-)我尝试过类似的东西

`android:inputType"numberSigned|numberDecimal"`

我也试过

`android:digits="0123456789."` 但到目前为止没有任何效果。

我只是无法调出正确的键盘。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-08T11:34:58.450

尝试添加逗号“，”。这可能是由不同格式的数字引起的。

```
<EditText
    android:inputType="number"
    android:digits="0123456789.," /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-12T10:56:09.913

```
android:inputType="numberDecimal" 
```

用于接受十进制输入，因此从 0 到 9 的所有数字包括小数点符号 (.) 只能作为输入值。它工作正常。我不明白逗号符号在哪里出现。

# objective-c - iOS SDK：使用 NSUserDefaults

> ID：11921614
> 
> 赞同：0
> 
> 时间：2012-08-12T10:49:27.580
> 
> 标签：objective-c, ios, cocoa-touch, nsuserdefaults

使用`NSUserDefaults`该类，您可以保存与应用程序或用户数据相关的设置和属性。

现在我有两个问题：

1.  （设置和属性）存储在哪里？if => 对象将保存在所谓的 iOS“默认系统”中 then : 什么是 iOS“默认系统”

2.  将保留多长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T11:12:02.583

在哪里？这取决于您正在开发的应用程序类型。对于 AppStore 应用程序，在已安装应用程序文件夹的沙盒文件夹中，更准确地说是在 Library/Preferences 文件夹中。包含设置的实际文件是一个 PLIST（属性列表）文件，其名称与您的应用程序的捆绑标识符匹配。

总而言之：

```
(/var/mobile/Applications/XXXX-XXXX-XXXXXX-XXXXXXXX/MyApp.app/Library/Preferences/com.mycompany.bundleid.plist 
```

（其中 XXXX 等是 UUID）。

如果您正在为越狱设备制作应用程序（即 Cydia 应用程序），它将再次是一个 plist 文件，其名称与捆绑 ID 匹配，但它将安装在

```
/var/mobile/Library/Preferences/com.mycompany.bundleid.plist 
```

iOS 默认系​​统是 Foundation 框架、iOS 本身以及管理、存储和修改您的首选项/设置/默认值的文件和目录的一部分。

多久？同样，这取决于您正在编写什么样的应用程序。对于普通的 AppStore 应用程序，默认值会保存到文件中 - 但前提是用户不删除您的应用程序。当您的应用程序被删除时，整个沙盒、应用程序包和用户默认的课程也将消失。永远，不可逆转。

如果您开发一个驻留在系统应用程序目录 (/Applications) 中的越狱应用程序，那么即使用户删除了您的包/应用程序，用户默认文件也将在 /var/mobile/Library/Preferences 中可用，因为 APT（ Cydia 的支持包管理器）仅记录您的包最初包含的文件，而默认属性列表文件（仅在您的应用首次访问`NSUserDefaults`该类时创建）不是这种情况。如果用户手动删除文件或恢复到股票固件，它会消失的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:53:53.017

答案：

1.  在应用程序的沙箱中。究竟哪里不重要，因为无论如何您都不会直接访问默认值。

2.  只要您的应用程序在设备上。如果您删除该应用程序，沙盒也会被删除，因此它们也会被删除。如果您更新应用程序，则会使用相同的沙箱，因此它们不会被删除。

至于它是*什么*，我只想引用您的一些[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)：

> NSUserDefaults 类提供了一个与默认系统交互的编程接口。默认系统允许应用程序自定义其行为以匹配用户的偏好。例如，您可以允许用户确定应用程序显示的度量单位或自动保存文档的频率。应用程序通过将值分配给用户默认数据库中的一组参数来记录这些偏好。这些参数被称为默认值，因为它们通常用于确定应用程序在启动时的默认状态或其默认行为方式。
> 
> 在运行时，您使用 NSUserDefaults 对象从用户的默认数据库中读取应用程序使用的默认值。NSUserDefaults 缓存信息以避免每次需要默认值时都必须打开用户的默认数据库。同步方法会定期自动调用，它使内存中的缓存与用户的默认数据库保持同步。

# java - 网格行走算法代码修正

> ID：11921616
> 
> 赞同：0
> 
> 时间：2012-08-12T10:49:37.627
> 
> 标签：java, algorithm, data-structures, binary-search-tree, genetic-algorithm

**网格行走**（得分 50 分）：您位于 N 维网格中的位置`(x_1,x2,...,x_N)`。网格的尺寸为`(D_1,D_2,...D_N)`。`N`一步，你可以在任何一个维度上向前或向后走一步。（所以总是`2N`有可能的不同动作）。您可以通过多少种方式采取`M`措施使您在任何时候都不会离开网格？如果您愿意，您也可以离开网`x_i`格`x_i <= 0 or x_i > D_i`。

**输入：** 第一行包含测试用例的数量`T`。`T`测试用例如下。对于每个测试用例，第一行包含`N`和`M`，第二行包含`x_1,x_2...,x_N`，第三行包含`D_1,D_2,...,D_N`。

因此，在上述解决方案中，我尝试采用一维数组。该网站声称`38753340`是答案，但我没有得到它。

```
public class GridWalking {

    /**
     * @param args
     */
    public static void main(String[] args) {

        try {

            long arr[] = new long[78];
            long pos = 44;
            long totake = 287;

            /*
             * Double arr[] = new Double[3]; Double pos = 0; Double totake = 5;
             */

            Double val = calculate(arr, pos, totake);
            System.out.println(val % 1000000007);

        } catch (Exception e) {
            System.out.println(e);
            e.printStackTrace();
        }

    }

    public static HashMap<String, Double> calculated = new HashMap<String, Double>();

    private static Double calculate(long[] arr, long pos, long totake) {

        if (calculated.containsKey(pos + "" + totake)) {
            return calculated.get(pos + "" + totake);
        }
        if (0 == totake) {

            calculated.put(pos + "" + totake, new Double(1));
            return new Double(1);
        }

        if (pos == arr.length - 1) {

            Double b = calculate(arr, pos - 1, totake - 1);

            Double ret = b;
            calculated.put(pos + "" + totake, new Double(ret));
            return ret;

        }
        if (pos == 0) {
            Double b = calculate(arr, pos + 1, totake - 1);

            Double ret = b;
            calculated.put(pos + "" + totake, new Double(ret));
            return ret;
        }

        Double a = calculate(arr, pos + 1, totake - 1);
        Double b = calculate(arr, pos - 1, totake - 1);

        Double ret = (a + b);
        calculated.put(pos + "" + totake, ret);
        return ret;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:15:44.360

您需要像 for 一样更改键值`pos + "_" + totake`。

我已经重写了它，但我不确定它是否有效。如果有的话，它需要太多时间才能完成。

```
 public class GridWalking {

      static long arr_length = 78;
      static long pos = 44;
      static long totake = 287;
      static long count = 0;

      /**
       * @param args
       */
      public static void main(String[] args) {
        try {
          calculate(pos, totake);
          System.out.println(count % 1000000007);
        } catch (Exception e) {
          System.out.println(e);
          e.printStackTrace();
        }
      }

      private static void calculate(long pos, long totake) {
        if (pos < 0 || pos > arr_length - 1)
          return;

        if (0 == totake) {
          count++;
          return;
        }

        calculate(pos + 1, totake - 1);
        calculate(pos - 1, totake - 1);
      }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T10:57:58.883

我曾尝试在 Hackerrank 中解决网格行走问题。这是有效的代码（至少在 eclipse 中）。但我不知道为什么它与给定的答案不匹配。坚果我认为你可以从中得到想法。由于它不使用递归，所以执行时间没有问题..

```
import java.io.*;
import java.util.*;
import java.text.*;
import java.math.*;
import java.util.regex.*;

public class Solution {
    static int count=0;
    public static void main(String[] args) throws FileNotFoundException {
        String filename = "src/testcases.txt";//testcases is just a file containing input
        File file = new File(filename);
        Scanner in = new Scanner(file);
        //in.useDelimiter("[^0-9]+");
        //-----------------------------------------------------------------
        int T=in.nextInt();
        for(int t=0;t<1;t++){
            int N=in.nextInt();
            int M=in.nextInt();System.out.println("M="+M);
            int[] X=new int[N];
            long max=1000000007;
            int[] D=new int[N];
            for(int i=0;i<N;i++) X[i]=in.nextInt();
            for(int i=0;i<N;i++) D[i]=in.nextInt();
            int Dmax=D[0];
            int Dtotal=1;
            for(int i=0;i<N;i++) if(Dmax<D[i]) Dmax=D[i];
            for(int i=0;i<N;i++) X[i]--;
            for(int i=0;i<N;i++) Dtotal*=D[i];//total number of fields
            long[] mainarray= new long[Dtotal];
            long[] mainarraynext=new long[Dtotal];
            int[][] ways=new int[N][Dmax];
            set( X, mainarray,D, 1);
            int temp[]=new int[N];
            for(int h=0;h<10;h++){  

                for(int j=0;j<Dtotal;j++){
                    mainarraynext[j]=getsum(inverse(j,D),mainarray, D );
                }
                for(int j=0;j<Dtotal;j++){
                    mainarray[j]=mainarraynext[j];
                    mainarray[j]%=max;
                }
                System.out.println(Arrays.toString(mainarray));
            }
            long finalsum=0;
            for(int j=0;j<Dtotal;j++){  
                finalsum+=mainarray[j];
                //System.out.println(finalsum);

            }
            System.out.println(finalsum);
            //System.out.println(Arrays.toString(inverse(44,D)));
        }
    }
    public static long get(int[] x, long[] mainarray, int[] D){
        for(int i=0;i<x.length;i++){
            if(x[i]>=D[i]) return 0;
            if(x[i]<0) return 0;
        }
        int index=0;
        for(int i=0;i<D.length;i++){
            index=(index*D[i])+x[i];
        }
        return mainarray[index];
    }
    public static int[] inverse(int index,int[] D){
        int[] temp=new int[D.length];
        for(int i=D.length-1;i>=0;i--){
            temp[i]=index%D[i];
            index=index/D[i];
        }
        return temp;
    }
    public static void set(int[] x, long[] mainarray, int[] D, int value){
        int index=0;
        for(int i=0;i<D.length;i++){
            index=(index*D[i])+x[i];
        }
        mainarray[index]=value;
    }
    public static long getsum(int[] x,long[] mainarray, int[] D ){
        int[] temp=new int[x.length];
        long sum=0;
        //for 2n different sides
        for(int j=0;j<x.length;j++){//sum in each side
            temp[j]=x[j];
        }
        for(int j=0;j<x.length;j++){//sum in each side
            temp[j]--;
            sum+=get(temp,  mainarray, D);
            temp[j]+=2;
            sum+=get(temp,  mainarray, D);
            temp[j]--;
        }
        return sum;

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T20:03:59.713

这是我为原始[hackerrank](https://www.hackerrank.com/challenges/grid-walking)问题构建的Java 解决方案。因为大网格永远运行。可能需要一些聪明的数学。

```
long compute(int N, int M, int[] positions, int[] dimensions) {
    if (M == 0) {
        return 1;
    }
    long sum = 0;
    for (int i = 0; i < N; i++) {
        if (positions[i] < dimensions[i]) {
            positions[i]++;
            sum += compute(N, M - 1, positions, dimensions);
            positions[i]--;
        }
        if (positions[i] > 1) {
            positions[i]--;
            sum += compute(N, M - 1, positions, dimensions);
            positions[i]++;
        }
    }
    return sum % 1000000007;
} 
```

# python - Ruby 的 fork 块的 Python 等价物是什么？

> ID：11921620
> 
> 赞同：0
> 
> 时间：2012-08-12T10:50:53.203
> 
> 标签：python, ruby, fork

使用 Ruby，`fork`可以使用块来表达

> 该块中的语句只在子进程中执行，会被父进程跳过。

Python中有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T11:21:14.663

如果您想在子进程中执行一些代码，请使用[`multiprocessing`](http://docs.python.org/library/multiprocessing.html)module. 这是文档中的一个示例：

```
from multiprocessing import Process

def f(name):
    print 'hello', name

if __name__ == '__main__':
    p = Process(target=f, args=('bob',))
    p.start()
    p.join() 
```

这个例子展示了如何在子进程中执行函数**f 。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T10:56:44.520

我不知道 Python，但我认为你可以像在 C 中那样做，通过检查返回值`fork()`：

```
child_pid = os.fork()
if child_pid == 0:
    print "This is the child."
    sys.exit(0)
print "This is the parent." 
```

# authentication - CakePHP 2，如何使用纯文本密码 AuthComponent::login()？

> ID：11921623
> 
> 赞同：2
> 
> 时间：2012-08-12T10:51:05.567
> 
> 标签：authentication, cakephp-2.0

我想用纯文本密码字段在现有数据库上实现 CakePHP 2 网站。

这是我的 AppController

```
class AppController extends Controller {
  public $components = array(
    'Session',
    'Auth' => array(
      'loginRedirect' => array('controller' => 'users', 'action' => 'index'),
      'logoutRedirect' => array('controller' => 'users', 'action' => 'home'),
      'authError' => 'You cannot view this page',
      'authorize' => array('Controller'),
      'authenticate' => array(
        'Form' => array(
          'userModel' => 'User',
          'fields' => array('username' => 'user_id', 'password' => 'user_password')
        )
      )
    )
  ); 

  public function isAuthorized($user) {
    return true;
  }

  function beforeFilter() {
    $this->Auth->allow('home');
    //$this->Auth->authenticate = $this->User;

    parent::beforeFilter();
  } 
```

这是我的用户控制器。

```
class UsersController extends AppController {
  public $paginate = array(
    'fields' => array('user_id', 'user_desc', 'user_password'),
    'limit' => 25,
    'order' => array(
      'user_id' => 'asc'
    )
  );

  function login() {
    if ($this->request->is('post')) {
      if ($this->Auth->login()) {
        $this->redirect($this->Auth->redirect());
      } else {
        $this->Session->setFlash('Cannot Login');  
      }
    }
  }
} 
```

这是我的用户模型

```
class User extends AppModel {
  public $name = 'User';
  public $primaryKey = 'user_id';
  public $belongsTo = 'Group'; 
} 
```

根据上面的那些文件，当我按下 login.ctp 上的登录按钮时，我看到

> select * from users where user_password = 'this_is_hashing_password'

在 sql 转储部分。

那么，如何关闭自动哈希算法，让 login() 将用户输入与数据库存储的密码作为纯文本进行比较？？？

我在 CakePHP 书上尝试了很多阅读，但我找不到任何内容，而且使用从互联网上找到的 hashPasswords($data) 技术也不起作用。

请帮忙。孔塔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:26:41.580

最好的答案**确实是**对您存储的密码进行批处理，以便对它们进行哈希处理，但是在某些情况下，您可能会将 Cake 应用程序添加到现有应用程序中，以不同方式对密码进行哈希处理（比如根本不对密码进行哈希处理），所以问题即使在这种情况下的目标不是有效的。

尝试使用这些资源来修改 Cake 的密码散列函数，具体取决于您的 Cake 版本：

*   [蛋糕 2.x](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#hashing-passwords)
*   [蛋糕1.3](http://book.cakephp.org/1.3/en/The-Manual/Core-Components/Authentication.html#change-hash-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-24T03:05:49.883

我得到了纯文本密码`Cakephp 3`，这应该只用于**开发**目的，你不应该在生产中以纯文本形式存储密码。

话虽如此，在开发过程中，纯文本密码让我可以专注于登录，而不是实现功能齐全的用户加密/解密逻辑。无论如何，这将被 OAuth / SAML 模块取代......

好的，源代码来了：

### ROOT/src/Auth/PlainTextPasswordHasher.php

```
<?php
namespace App\Auth;

use Cake\Auth\AbstractPasswordHasher;
/**
 * Plain text password for demo use, DO NOT PUSTH THIS TO PROD
*/
class PlainTextPasswordHasher extends AbstractPasswordHasher
{

    public function hash($password)
    {
        return $password;
    }

    public function check($password, $hashedPassword)
    {
        return $password === $hashedPassword;
    }
} 
```

### ROOT/src/Controller/PagesController.php

```
<?php
class PagesController extends AppController
{

    public function initialize()
    {
        parent::initialize();

        $this->loadComponent('Auth', [
            'authenticate' => [
                'Form' => [
                    'fields' => [
                        'username' => 'username',
                        'password' => 'password',
                    ],
                    'passwordHasher' => [
                        'className' => 'PlainText',
                    ],
                    'userModel' => 'YourUsers',
                ]
            ],
            'loginAction' => [
                'controller' => 'Logins',
                'action' => 'login'
            ]
        ]);
    }
} 
```

来源：此视频[https://www.youtube.com/watch?v=eASSNS1f3V4](https://www.youtube.com/watch?v=eASSNS1f3V4)和官方文档的这一部分： [https ://book.cakephp.org/3.0/en/controllers/components/authentication.html#creating -custom-password-hasher-classes](https://book.cakephp.org/3.0/en/controllers/components/authentication.html#creating-custom-password-hasher-classes)

# c# - 是否可以通过 TAPI（TAPI 2.x 或 TAPI 3.x）应用程序使用 USB GSM 调制解调器拨打和接听电话？

> ID：11921630
> 
> 赞同：4
> 
> 时间：2012-08-12T10:52:16.387
> 
> 标签：c#, winapi, usb, gsm, tapi

USB调制解调器具有用于PC的默认软件和驱动程序，可以正常拨打电话和接听电话。如果可能的话，我想用 Telephony API 自己编程，这样我就有更多的控制权，我可以处理语音数据。

此外，我也尝试过codeproject（http://www.codeproject.com/Articles/10994/TAPI-3-0-Application-development-using-C-NET）中有示例应用程序。但是，代码给出了一个错误，说 dll 太旧了。改变这一行，

```
bcc = ln.CreateCall(textBox1.Text,TapiConstants.LINEADDRESSTYPE_PHONENUMBER|TapiConstants.LINEADDRESSTYPE_IPADDRESS,TapiConstants.TAPIMEDIATYPE_DATAMODEM|TapiConstants.TAPIMEDIATYPE_AUDIO); 
```

对此，

```
bcc = ln.CreateCall(textBox1.Text, TapiConstants.LINEADDRESSTYPE_PHONENUMBER, TapiConstants.TAPIMEDIATYPE_AUDIO); 
```

我已经能够编译和运行该应用程序。无论何时，我都会选择调制解调器线路并按下呼叫，提供一个号码，它在拨号后立即断开连接。因此，我怀疑这个 TAPI 应用程序是否有不同的用途，可能不适用于 USB GSM 调制解调器。

# ios - UIWebView iOS 5：WebKit/JavaScriptCore 崩溃

> ID：11921631
> 
> 赞同：9
> 
> 时间：2012-08-12T10:52:18.533
> 
> 标签：ios, uiwebview, webkit, crash, crash-reports

我试图`UIWebView`在我的 iPad 应用程序中包含一个基于浏览器的浏览器。这需要一些时间，这使得调试变得困难，但应用程序最终崩溃了，总是在同一个地方：WebThread，在 JavaScriptCore`WTF::StringImpl::hash()`函数上。它产生`EXC_BAD_ACCESS (SIGSEGV), KERN_INVALID_ADDRESS at 0x00000001`.

它`UIWebView`位于由另一个视图控制器（容器）以类似堆栈的方式管理的视图控制器内。我只在内存中保留了四个或更少的浏览器。

有关崩溃日志或可能导致崩溃的任何信息？

这是网络线程的崩溃日志：

```
Thread 2 name:  WebThread
Thread 2 Crashed:
0   JavaScriptCore                  0x32a97d46 WTF::StringImpl::hash() const + 42
1   JavaScriptCore                  0x32a97c6a WTF::HashTable<WTF::StringImpl*, WTF::StringImpl*, WTF::IdentityExtractor<WTF::StringImpl*>, WTF::StringHash, WTF::HashTraits<WTF::StringImpl*>, WTF::HashTraits<WTF::StringImpl*> >::lookupForWriting(WTF::StringImpl* const&) + 18
2   JavaScriptCore                  0x32a9b028 std::pair<WTF::HashTableIterator<WTF::StringImpl*, WTF::StringImpl*, WTF::IdentityExtractor<WTF::StringImpl*>, WTF::StringHash, WTF::HashTraits<WTF::StringImpl*>, WTF::HashTraits<WTF::StringImpl*> >, bool> WTF::HashTable<WTF::StringImpl*, WTF::StringImpl*, WTF::IdentityExtractor<WTF::StringImpl*>, WTF::StringHash, WTF::HashTraits<WTF::StringImpl*>, WTF::HashTraits<WTF::StringImpl*> >::add<WTF::StringImpl*, WTF::StringImpl*, WTF::IdentityHashTranslator<WTF::StringImpl*, WTF::StringImpl*, WTF::StringHash> >(WTF::StringImpl* const&, WTF::StringImpl* const&) + 448
3   JavaScriptCore                  0x32a9ae30 WTF::AtomicString::addSlowCase(WTF::StringImpl*) + 96
4   WebCore                         0x31bade0c WebCore::AtomicHTMLToken::initializeAttributes(WTF::Vector<WebCore::HTMLToken::Attribute, 10ul> const&) + 232
5   WebCore                         0x31b88076 WebCore::AtomicHTMLToken::AtomicHTMLToken(WebCore::HTMLToken&) + 302
6   WebCore                         0x31b87eae WebCore::HTMLTreeBuilder::constructTreeFromToken(WebCore::HTMLToken&) + 14
7   WebCore                         0x31b7d07e WebCore::HTMLDocumentParser::pumpTokenizer(WebCore::HTMLDocumentParser::SynchronousMode) + 150
8   WebCore                         0x31bee29a WebCore::HTMLDocumentParser::resumeParsingAfterScriptExecution() + 50
9   WebCore                         0x31bc87e6 WebCore::HTMLDocumentParser::notifyFinished(WebCore::CachedResource*) + 78
10  WebCore                         0x31bc7448 WebCore::CachedResource::checkNotify() + 40
11  WebCore                         0x31bc7308 WebCore::CachedScript::data(WTF::PassRefPtr<WebCore::SharedBuffer>, bool) + 84
12  WebCore                         0x31bc7240 WebCore::CachedResourceRequest::didFinishLoading(WebCore::SubresourceLoader*, double) + 120
13  WebCore                         0x31bc715e WebCore::SubresourceLoader::didFinishLoading(double) + 158
14  WebCore                         0x31bc58c2 _ZN7WebCoreL16didFinishLoadingEP16_CFURLConnectionPKv + 46
15  CFNetwork                       0x347737ee URLConnectionClient::_clientDidFinishLoading(URLConnectionClient::ClientConnectionEventQueue*) + 186
16  CFNetwork                       0x3476849e URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 418
17  CFNetwork                       0x3476819c URLConnectionClient::processEvents() + 100
18  CFNetwork                       0x347680d2 MultiplexerSource::perform() + 150
19  CoreFoundation                  0x313d2acc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
20  CoreFoundation                  0x313d2298 __CFRunLoopDoSources0 + 208
21  CoreFoundation                  0x313d103e __CFRunLoopRun + 646
22  CoreFoundation                  0x3135449e CFRunLoopRunSpecific + 294
23  CoreFoundation                  0x31354366 CFRunLoopRunInMode + 98
24  WebCore                         0x31b74c9c _ZL12RunWebThreadPv + 396
25  libsystem_c.dylib               0x33bca72e _pthread_start + 314
26  libsystem_c.dylib               0x33bca5e8 thread_start + 0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T12:52:46.450

我有同样的问题，花了一整天......有很多不同的 WebKit 错误，比如这些。最后，我明白了：这是一个多线程问题！我从线程 1 创建了 WebView，然后尝试通过线程 2 中的 JS 函数修改其内容...

简单的`performSelectorOnMainThread:withObject:waitUntilDone:`的解决了问题！

也许这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:22:25.907

正如崩溃日志所暗示的那样，它看起来可能是与 JavaScript 相关的问题。我假设您正在加载的页面上有 JavaScript？出于兴趣，网页在 Mobile Safari 中是否运行良好 - 是否只是在 UIWebView 中出现问题？

如果您无法修改 JS，或者网页似乎在其他移动/桌面浏览器或设备上运行良好，我建议向 Apple 提交错误以及用于重现问题的 JavaScript。

# interface - 如何实现带返回类型的接口方法是Golang中的一个接口

> ID：11921634
> 
> 赞同：33
> 
> 时间：2012-08-12T10:52:32.187
> 
> 标签：interface, go

这是我的代码：

```
type IA interface {
    FB() IB
}

type IB interface {
    Bar() string
}

type A struct {
    b *B
}

func (a *A) FB() *B {
    return a.b
}

type B struct{}

func (b *B) Bar() string {
    return "Bar!"
} 
```

我收到一个错误：

```
cannot use a (type *A) as type IA in function argument:
    *A does not implement IA (wrong type for FB method)
        have FB() *B
        want FB() IB 
```

这是完整的代码：[http](http://play.golang.org/p/udhsZgW3W2)
://play.golang.org/p/udhsZgW3W2 我应该编辑**IA**接口还是修改我**的 A**结构？
如果我在其他包中定义 IA、IB 怎么办（这样我可以共享这些接口），我必须导入我的包并将 IB 用作 A.FB() 的返回类型，对吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-12T11:59:56.173

只是改变

```
func (a *A) FB() *B {
    return a.b
} 
```

进入

```
func (a *A) FB() IB {
    return a.b
} 
```

当然`IB`可以在另一个包中定义。因此，如果两个接口都在 package 中定义`foo`并且实现在 package 中`bar`，那么声明是

```
type IA interface {
    FB() IB
} 
```

而实施是

```
func (a *A) FB() foo.IB {
    return a.b
} 
```

# installation - WiX 找不到我的文件：无法加载文件，错误 LGHT0103

> ID：11921637
> 
> 赞同：4
> 
> 时间：2012-08-12T10:53:10.173
> 
> 标签：installation, wix

我正在使用 WiX 3.5 并制作安装程序。我使用 heat.exe 来捆绑所有文件。它生成了一个 WiX 文件。我在主要的 wxs 文件中将其称为 componentgroup ref。当我构建我的安装程序时，它会引发以下异常。

> *light.exe：错误 LGHT0103：系统找不到文件 '.......\target\tmp-release\jboss-eap-5.0\jboss-as\server\all\deploy\httpha-invoker .sar\invoker.war\WEB-INF\classes\org\jboss\invocation\http\servlet\ReadOnlyAccessFilter.class' 类型为 ''。*

它能够从这个位置加载许多文件，除了上述文件，即使该文件存在。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T07:54:29.883

看起来您遇到了链接器错误。据我所知，[它已经报告给了 WiX 团队](http://sourceforge.net/tracker/?func=detail&aid=3171540&group_id=105970&atid=642714)，并计划在 v4.0 上发布。对该问题的评论指出路径超过 255 个字符，因此您可能的解决方法是重新处理文件/文件夹布局以避免该长度的路径。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T18:39:57.633

Ravz1234 的答案有效！我将它与环境变量一起使用，例如`env.SourcePath`.

1）设置一个环境变量以显示在您的源目录上，例如`C:\SourceDir` 2）在`heat.exe`添加参数`-var env.SourcePath`和其他参数时

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-27T17:30:14.027

我将变量用于目录，`sys.SOURCEFILEDIR`，并且效果很好。

# javascript - Highcharts散点图：点击事件的警报坐标

> ID：11921641
> 
> 赞同：0
> 
> 时间：2012-08-12T10:53:36.223
> 
> 标签：javascript, highcharts, scatter-plot, options, jquery-events

我正在使用 Highcharts 的散点图，当有人单击散点图的点时，我试图提醒坐标 (x,y)。

到目前为止，您可以在这里看到我的选择：http: [//jsfiddle.net/athanott/ARf9M/](http://jsfiddle.net/athanott/ARf9M/)

我只加了

```
cursor: 'pointer',
            events: {
                click: function(event) {
                    alert('x: ' + event.xAxis[0].value);
                }
            }}, 
```

在情节选项下。如果我删除`event.xAxis[0].value`警报命令中的部分，其余部分会正常打印，但它不能按原样工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:11:57.687

你可以像`event.chartX`这样使用`event.chartY`：[JSFiddle](http://jsfiddle.net/ARf9M/1/)

# python - 避免在字符串中指定相同值的最pythonic方法是什么

> ID：11921649
> 
> 赞同：8
> 
> 时间：2012-08-12T10:54:57.310
> 
> 标签：python, string, formatting

```
message = "hello %s , how are you %s, welcome %s"%("john","john","john") 
```

避免指定“约翰”3次而是指定一个短语的最pythonic方法是什么。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-12T10:57:08.277

我不会使用`%`格式化，`.format`有很多优点。`%`最初计划通过替换它来删除格式化，尽管显然这`.format`实际上并没有发生。

> 用于内置字符串格式化操作的新系统替换了`%`字符串格式化操作符。（但是，`%`仍然支持该运算符；它将在 Python 3.1 中弃用，并在以后从该语言中删除。）阅读[PEP 3101](http://www.python.org/dev/peps/pep-3101)以获取完整的独家新闻。

```
>>> "hello {name}, how are you {name}, welcome {name}".format(name='john')
'hello john, how are you john, welcome john' 
```

我更喜欢第一种方式，因为它是明确的，但这`.format`是优于`%`格式化的原因

```
>>> "hello {0}, how are you {0}, welcome {0}".format('john')
'hello john, how are you john, welcome john' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-12T11:05:12.427

```
"hello %(name)s , how are you %(name)s, welcome %(name)s" % {"name": "john"}
'hello john, how are you john, welcome john' 
```

这是不使用格式的另一种方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T11:08:43.233

这也有效：

```
"hello %s , how are you %s, welcome %s"%tuple(["john"]*3) 
```

甚至更短，没有显式类型转换：

```
"hello %s , how are you %s, welcome %s"%(("john",)*3) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T12:01:53.363

99% 的可能性你应该使用 .format()

这不太可能，但如果你有一系列的问候，你可以试试这个：

```
>>> greetings = ["hello", "how are you", "welcome"]
>>> ", ".join(" ".join((greet, "John")) for greet in greetings)
'hello John, how are you John, welcome John' 
```

# visual-studio-2010 - 在 VS2012 上使用 Regionerate，或替代插件

> ID：11921652
> 
> 赞同：8
> 
> 时间：2012-08-12T10:56:04.117
> 
> 标签：visual-studio-2010, add-in, visual-studio-2012, region

我倾向于广泛使用 Regionerate 来重组我的代码文件。我唯一的问题是我无法使用 VS2012 注册它。我已经完全放弃了 VS2010，转而使用 VS2012，而且为了运行一个宏来重新组织代码文件，我不得不回过头来。我以前从未尝试过编写 VS 插件，所以我完全不熟悉对象模型或如何注册 - 似乎旧插件的安装比 VS2010 扩展更复杂！我还查看了 WIX 设置 XML 并尝试复制注册表项无济于事。

有谁知道如何使用 VS2012 注册 Regionerate，或者是否有提供相同功能的替代（免费且已维护！）扩展？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T08:25:48.007

注册需要两件事：

*   看起来 VS2012 在运行时没有从 HKLM...\11.0\AutomationOptions 键中读取，只是在第一次运行时。HKCU...\11.0_Config\AutomationOptions 的对应键也需要设置。
*   需要使用 11.0 版本创建一个新的 .AddIn 文件

如果您这样做，Regionerate 将出现，但在您尝试使用 Studio 时会挂起。Regionerate 代码有一个错误的版本检查（“不等于”而不是“小于”），这将卡在不适用于 VS2010/2012 的代码中。在 Regionerate 设置中取消选中“自动折叠区域”可能足以避免错误代码。

我制作了一个新版本，修复了版本检查并为 VS2012 提供了正确的安装部分。您可以在此处下载安装程序和更改的源文件：

[https://skydrive.live.com/redir?resid=2FEB8D1988F04D77!565](https://skydrive.live.com/redir?resid=2FEB8D1988F04D77!565)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-20T17:59:17.383

`Frank Racis`这是您通过使用 Visual Studio 2013使 VS2012 兼容 Regionerate (0.8.0.1) 所需要做的。

1.  修改此文件：`C:\Program Files (x86)\Regionerate\Regionerate.VS2012.AddIn` 将版本从 11 更改为 12：`<Version>12.0</Version>`

2.  在注册表中添加以下字符串值：

    地点：`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0_Config\AutomationOptions\LookInFolders`

    姓名：`C:\Program Files (x86)\Regionerate\`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T19:45:00.730

[CodeMaid](http://www.codemaid.net/)是一个免费且积极开发的替代方案。它几乎具有 Regionerate 的所有功能，以及一些新的东西。我真正喜欢的一件事是在每次构建时将其设置为组织和清理未保存的文件。

# php - PHP:: 如何从扩展类调用静态方法（或属性）？

> ID：11921655
> 
> 赞同：0
> 
> 时间：2012-08-12T10:56:28.313
> 
> 标签：php, oop, static

我有**Model**类和**Model_Something**类。**Model_Something**具有静态属性（表名）。

我想从**Model**类访问**Model_Something**静态属性。但它试图在**Model**类中找到它并给我一个例外：

 ****```
ErrorException [ Fatal Error ]: 
Access to undeclared static property: Model::$_collection_name 
```

我尝试以这种方式访问​​它：

```
self::$some_property; 
```

如何得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T11:13:13.947

您不应访问不存在的类中的属性，并且依赖于子类中存在的属性。父母不能/不应该知道孩子做什么，它需要反过来。因此，首先，还要在父级中声明该属性，以便父级在任何情况下都可以访问它。然后，孩子可以*覆盖*该属性的值。为了确保您始终访问执行类的属性，您需要*后期静态绑定*，您可以通过使用`static`而不是`self`：

```
static::$some_property; 
```

[http://php.net/manual/en/language.oop5.late-static-bindings.php](http://php.net/manual/en/language.oop5.late-static-bindings.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T11:05:23.527

**父::$some_property;** 这将使您的代码不那么可靠，就像您更改类名一样，如果您使用类名，也必须在此处更改。****

# javascript - uiWebview调用javascript函数语法

> ID：11921656
> 
> 赞同：3
> 
> 时间：2012-08-12T10:56:29.673
> 
> 标签：javascript, iphone, ios, xcode

我正在将我的应用程序从 android 迁移到 iOS，对于下一行，编译器在 iOS 上返回一个错误，

`webviewA.loadUrl("javascript:setVars(\"" + var1 + "\",\"" + var2 + "\")");`//在Android上正确执行

对于我正在尝试的 iOS，

```
[webViewA stringByEvaluatingJavaScriptFromString:@"javascript:setVars(\"" + var1 + "\",\""  + var2 +  "\")"]; 
```

哪个是 iOS 的正确语法？谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T11:19:46.537

根据[另一个类似问题的答案](https://stackoverflow.com/questions/8886443/calling-javascript-using-uiwebview)，您需要实现`UIWebView`委托方法`webViewDidFinishLoad:`，并在那里实现`[myWebView stringByEvaluatingJavaScriptFromString:@"myJavaScriptCode()"]`。

为了使它工作，您需要在`UIWebView`实例上设置委托并实现上述委托方法，以便在页面加载后执行 JavaScript。

`- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script` [可在此处找到](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950-CH3-SW21)文档。

现在对于您问题的另一部分（感谢您的澄清！）.. 要在 Objective-C 中连接字符串，您可以使用`NSString`类方法`stringWithFormat:`。

例如，要将两个 Objective-C 值传递给 JavaScript 字符串，您可以执行以下操作：

```
// Substitute your Objective-C values into the string
NSString *javaScript = [NSString stringWithFormat:@"setVars('%@', '%@')", var1, var2, nil];

// Make the UIWebView method call
NSString *response = [webViewA stringByEvaluatingJavaScriptFromString:javaScript]; 
```

# ios - 无法重命名源代码 - 出现错误“线程 1：信号 SIGABRT”

> ID：11921657
> 
> 赞同：0
> 
> 时间：2012-08-12T10:56:29.747
> 
> 标签：ios

我将一个动作拖到 ViewController.h 区域（这是我的 dayNight 按钮），如图所示：

```
//
//  ViewController.h
//

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

- (IBAction)dayNight:(id)sender;
- (IBAction)insulationClick:(id)sender; 
```

现在我决定我希望它阅读：

```
- (IBAction)dayNightClick:(id)sender; 
```

所以我手动重命名它，如上一行所示。我还在 ViewController.m 文件中将其重命名为：

```
- (IBAction)dayNight:(id)sender{} 
```

到：

```
- (IBAction)dayNightClick:(id)sender{} 
```

当我执行代码时，我一使用按钮就会出错。

如果我手动重命名它（没有点击这个词）它会再次工作。

为什么我不能手动修改代码行。还有另一个我必须重命名代码的位置吗？

错误是：

```
Thread1: signal SIGABRT 
```

并指向 main.m 文件中的这一行代码：

```
int main(int argc, char *argv[])
{
@autoreleasepool 
{
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
} 
```

我确信这是一个非常基本的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:03:55.637

发生这种情况是因为您的故事板/笔尖仍然指向旧名称。nib 文件本质上只是后台的 XML 文件，因此您需要做的是打开您的 nib/storyboard 转到显示所有引用的检查器。您会发现您对 IBAction 的旧引用仍然存在。通过点击小十字将其删除并再次将其拖入 ViewController 并将其与您重命名为的函数连接起来。

如果您在头文件中更改方法签名，请始终记住更新情节提要 + .m :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:07:11.650

我发现如下：

*   转到故事板（即您可以看到您的 idevice 的 GUI 表示的视图）
*   单击您要重命名的按钮（我们将删除它）
*   单击名为“显示连接检查器”的按钮（位于 xcode 的右上角附近，看起来像一个黑色圆圈中的右箭头）。
*   有一个名为“已发送事件”的部分，您的按钮事件将在其周围绘制一个气泡，并带有指向带有您的 IBAction 名称的第二个气泡的链接。
*   单击第二个气泡中的小十字 (x) 以删除事件链接。

现在您可以重新开始并将按钮重命名为您喜欢的任何名称。在我的示例中，我将其重命名为：

```
(IBAction)dayNight:(id)sender{} 
```

到：

```
(IBAction)dayNightClick:(id)sender{} 
```

所以这是通过删除对按钮的所有引用并重新创建它来重命名。请注意其他两个要删除它的地方是：

*   在 *.h 文件中，例如我删除了这一行：

    (IBAction)dayNight:(id)sender{}

在 *.m 文件中，例如我删除了以下代码：

```
(IBAction)dayNight:(id)sender{} 
{
    // code in here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T11:15:31.363

是的。该按钮有一个关联的目标/选择器，当它被按下时它会调用它。查找包含以下内容的行：

```
[button addTarget:self action:@selector(dayNight:) forControlEvents:UIControlEventTouchUpInside]; 
```

并在此处更改选择器。

# iphone - iPhone：以编程方式添加具有相同名称的表

> ID：11921661
> 
> 赞同：-2
> 
> 时间：2012-08-12T10:57:04.773
> 
> 标签：iphone, objective-c, xcode

我有一个滚动视图，在滚动视图中，我以编程方式添加具有相同名称的表（表的计数并不总是相同），然后使用循环将它们添加到滚动中。

我的问题：我的应用程序创建第一个表，将数据放入其中，然后构建第二个表并放入数据，但是当它将数据放入第二个表时，第一个表中的数据会更改，因为它们具有相同的名称。

我该如何解决这个问题？

```
for ( int i=0; i<[P1Rows count]; i++) {
    [self AddPricesTable:i];
}

- (void)AddPricesTable:(int)GroupNum{
    self.TableView = [[[UITableView alloc] initWithFrame:CGRectMake(ScrollView.frame.size.width * GroupNum, 0,
                    ScrollView.frame.size.width, ScrollView.frame.size.height) style:UITableViewStylePlain] autorelease];
    self.TableView.backgroundColor = [UIColor blackColor];
    self.TableView.dataSource = self;
    self.TableView.delegate = self;

    P1Dict = [P1Rows objectAtIndex: GroupNum];
    NSLog(@"%@", [P1Dict objectForKey:@"Group"]);
    P2URL = [NSURL URLWithString:[NSString stringWithFormat:@"http://xxx.co/SFP/?Q=P2&V=%@",
            [[P1Dict objectForKey:@"Group"] stringByReplacingOccurrencesOfString:@" " withString:@"%20"]]];
    NSLog(@"%@", P2URL);
    P2JsonString = [[NSString alloc] initWithContentsOfURL:P2URL usedEncoding:Encoding error:&Error];
    P2JsonData = [P2JsonString dataUsingEncoding:NSUTF32BigEndianStringEncoding];
    P2Dict = [[[CJSONDeserializer deserializer] deserializeAsDictionary:P2JsonData error:&Error] retain];
    [self CheckConnect];
    P2Rows = [P2Dict objectForKey:@"SFP"];

    [self.TableView reloadData];

    [ScrollView addSubview:self.TableView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:13:29.990

您显然在这里泄漏了内存。此外，您不需要拥有多个表，只需一个表就足够了，并将其添加到 Interface builder 中。

您只需将 UITabelView 中的部分设置为您现在正在使用的表数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:45:52.260

您必须声明 2 个 UITableView 变量，使它们成为您的 2 个表的出口，将它们挂接到界面构建器中，并提供委托和数据源。

然后在你的`cellForRowAtIndexPath`: 中说：

```
if (tableView == outlet_to_table_ONE){
    //populate the FIRST table as you wish
}
else{
    //else should mean that tableView will be outlet_to_table_TWO (if you have only 2 tables)
    //populate the SECOND table as you wish
} 
```

# asp.net-mvc-3 - 使用 MVC3 和 Ninject 将多个模型传递给视图

> ID：11921668
> 
> 赞同：1
> 
> 时间：2012-08-12T10:58:59.513
> 
> 标签：asp.net-mvc-3, ninject, viewmodel

我是 MVC3 的新手（这就是为什么我买了一本关于它的书，这就是我现在有这个问题的原因！），如果有一个明显的答案，我深表歉意！

我正在关注一个在 MVC3 中构建购物车的简单示例。这本书提倡使用 Ninject 进行依赖注入，我也是新手。一个模型看起来很简单，在本例中为 Product，但在此基础上，我正在努力添加第二个模型并将其显示在显示 Product 模型的同一视图中。我尝试过使用视图模型，但我发现的所有示例都将几个类包装到一个模型中，我不太清楚如何在我的代码中实现它。

班上：

```
public class Product
{
    public int ProductId {get;set;}
    public string Name {get;set;}
} 
```

摘要库：

```
public interface IProductRepository
{
    IQueryable<Product> Products {get;}
} 
```

将模型与数据库关联的类：

```
public class EFDbContext : DbContext
{
    public DbSet<Product> Products {get;set;}
} 
```

实现抽象接口的产品存储库：

```
public class EFProductRepository : IProductRepository
{
    private EFDbContext context = new EFDbContext();

    public IQueryable<Product> Products
    {
        get {return context.Products;}
    }
} 
```

Ninject 将 IProductRepository 绑定到 ControllerFactory 类中的 EFProductRepository。

控制器：

```
public class ProductController : Controller
{
    private IProductRepository repository;

    public ProductController(IProductRepository productRepository)
    {
        repository = productRepository;
    }

    public ViewResult List()
    {
        return View(repository.Products);
    }
} 
```

我的问题是将 repository.Products 传递给强类型视图；如果我需要通过另一个实体，这是非常可行的，我将如何实现这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:27:30.620

您可以构建一个如下所示的 ViewModel：

```
public class YourViewModel
{
    public List<Product> Products { get; set; }
    public List<OtherEntity> OtherEntities { get; set; }
} 
```

然后，您可以将存储库包装在一个服务中，该服务包含满足您的请求和/或业务逻辑所需的所有方法：

```
public class YourService
{
    private IProductRepository repository;

    public List<Product> GetAllProducts( )
    {
        return this.repository.Products.ToList( );
    }

    public List<OtherEntity> GetAllOtherEntites( )
    {
        return this.repository.OtherEntites.ToList( );
    }
} 
```

最后在 Controller 中适当地填充 ViewModel

```
public class ProductController : Controller
{
    private YourControllerService service = new YourControllerService( );
    // you can make also an IService interface like you did with
    // the repository

    public ProductController(YourControllerService yourService)
    {
        service = yourService;
    }

    public ViewResult List()
    {
         var viewModel = new YourViewModel( );
         viewModel.Products = service.GetAllProducts( );
         viewModel.OtherEntities = service.GetAllOtherEntities( );

        return View( viewModel );
    }
} 
```

现在您的 ViewModel 上有多个实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T10:13:48.123

也许它不是直接回答您的问题，但它是连接的。

如果您正确地将模型传递给查看，则可以这样处理

```
@model SolutionName.WebUI.Models.YourViewModel

@Model.Product[index].ProductId
@Model.OtherEntity[index].OtherId 
```

我知道这是旧帖子，但它可能对其他人有所帮助:)

# vba - 字符串的加密和解密。

> ID：11921670
> 
> 赞同：0
> 
> 时间：2012-08-12T10:59:06.697
> 
> 标签：vba, encryption

我被赋予了加密字符串的任务，但我必须创建自己的加密技术。我知道该怎么做。我可以将字符串中的每个值与一个数字相关联，如下所示：

```
A = 0
B = 1
... 
```

然后我想用字符替换十位或更高位的数字：如果我输入字符串“DOG”，它必须显示

```
3.46 // . is 1 and .. is 2
     // .4 is 14 
```

我想听听你的想法。

我得到了一个基本的视觉形式来处理。我可以输入一个字符串；没事儿。

```
Input = txtInputString.Text 
```

但我还必须解密一个字符串。为了显示我想解密我必须拥有的字符串

```
string, false 
```

，错误表明我想解密字符串。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:34:58.993

[如果使用Ceasar Cipher](http://en.wikipedia.org/wiki/Caesar_cipher)等简单的方法，简单的英文文本的加密和解密是相当先进的。

但是，您必须确定如何表示语言中的所有符号。这不仅包括字母，还包括数字和空格，也许还包括标点符号。

[标准 ASCII 字符集](http://www.asciitable.com/)包含您可能需要的大部分英语内容，问题是您是否想通过将符号限制为仅大写字母、数字和空格来简化字母表。人类通常可以阅读文本，尤其是短文本，即使它没有标点符号。

简单密码的方法是在字母表中列出符号（大写字母、数字 0 到 9 和空格字符）。接下来重新排列表格，使其不按排序顺序。

进行加密时，您将获取每个字符，在表中查找并确定表中的两位数偏移量。这两位数字将是该字符的加密符号，并且是您将作为加密字符串的一部分写出的内容。

进行解密时，您将获取每个两位数对并将其用作表中的偏移量，在表中的该位置找到字符，并将表中的字符作为解密字符串的一部分写出。

您的加密字符串将是一系列两位数字对，全部串在一起作为一个长数字。

对于您的表单，我希望有两个文本输入组，每个组都有一个按钮、一个文本输入字段和一个文本显示字段。第一组是要加密的文本，一旦输入文本，您将按下该按钮来执行加密。加密文本将显示在文本输入字段下方的字段中。

第二组将是要解密的文本以及您将按下以执行解密的按钮。

# c# - 表mysql和c#

> ID：11921671
> 
> 赞同：0
> 
> 时间：2012-08-12T10:59:09.217
> 
> 标签：c#, mysql

我正在使用 MySQL (phpmyadmin) 中的数据库，在连接到 C# 中的数据库后，我创建了一个类来表示警报。

然后，我将警报分组（每个警报都有一个 cid）。我的集群在一个集合中（我将集群定义为一个列表）。

现在，我想在表中显示每个集群的警报，但我不知道是在 MySQL 中编写和创建表还是在 C# 中定义数据集更好。

到目前为止，这是我的代码：

```
foreach (cluster c in set)
{
    foreach (alarm a in c.mycluster)
    {
    }
} 
```

将生成的集群数量取决于我的输入。

1.  哪个版本更好？在 C# 中获取数据集并在 Windows 窗体应用程序或 C# 中创建表和视图的 MySQL 命令中显示它们？

2.  如果其中任何一个被推荐，我该怎么做？一些伪代码足以让我开始。

![截屏](../Images/327d323cc1d69dfbc7b41ef27892c596.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:06:25.010

> 1.您的想法中哪一个更好？在 C# 中获取数据集并在 Form 应用程序中显示它们或在 C# 中创建表和视图的 mysql 命令？

由于这通常是一个演示问题，我会在 C# 中而不是在 mysql 中进行。您不想在数据库中为您想要呈现数据的每一种方式创建视图或表。此外，如果您的演示需求发生变化，您将需要更改数据库。所以去c#。有很多关于如何做到这一点的教程。

# php - 寻找 yii-eauth 扩展 php 的 Oauth Yahoo 示例

> ID：11921674
> 
> 赞同：0
> 
> 时间：2012-08-12T11:00:03.813
> 
> 标签：php, oauth, yii, yahoo, yii-extensions

我正在寻找 PHP yii-eauth 扩展的 Yahoo oauth 实现。

您能否分享一下或提供示例代码？标准套件中没有此实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:14:15.837

试试 HybridAuth，它适用于所有框架，并且有一个 Yii 模块。 [http://hybridauth.sourceforge.net/](http://hybridauth.sourceforge.net/)

# c# - 从位图中提取/插入 Alpha 通道

> ID：11921679
> 
> 赞同：2
> 
> 时间：2012-08-12T11:01:19.040
> 
> 标签：c#, aforge, alpha-transparency

我想与`AForge.Imaging.Filter`图书馆合作，但我不能，因为 AForge 不支持`alpha`频道。如果我将提取`alpha`，使用`filters`，然后再次插入，它可以工作吗？

如果是这样，我如何提取`alpha`并插入它？

# r - 4*0:g_range[2] 的结果是什么？

> ID：11921682
> 
> 赞同：-6
> 
> 时间：2012-08-12T11:01:53.257
> 
> 标签：r

我有一些代码：

```
cars <- c(1, 3, 6, 4, 9)
trucks <- c(2, 5, 4, 5, 12)
g_range <- range(0, cars, trucks)
axis(2, las=1, at=4*0:g_range[2]) 
```

有一条评论：使用水平标签制作 y 轴，每 4 个标记处显示一次刻度。
4*0:g_range[2] 等价于 c(0,4,8,12)。

我跑：

```
> 4*0:g_range[2]
[1]  0  4  8 12 16 20 24 28 32 36 40 44 48 
```

4*0:g_range[2] 等价于 c(0,4,8,12)。？
4*0:g_range[2]=c(0,4,8,12,16,20,24,28,32,36,40,44,48) 不是 c(0,4,8,12)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:48:12.730

`0:n`返回向量`c(0, 1, 2, ..., n)`并将`4*0:n`每个元素乘以 4 以产生`c(0, 4, 8, ..., 4n)`。因此，这给出了一个向量，其中每个元素之间的*差*为 4。它*没有*给出四个等距元素的向量，除非`n`是 3。

# haskell - 了解 STG

> ID：11921683
> 
> 赞同：50
> 
> 时间：2012-08-12T11:02:51.273
> 
> 标签：haskell, compilation, ghc, bytecode, intermediate-language

GHC 的设计基于一种叫做 STG 的东西，它代表“spineless, tagless G-machine”。

现在 G-machine 显然是“graph reduction machine”的缩写，它定义了如何实现惰性。未求值的 thunk 存储为表达式树，执行程序需要*将*它们缩减为正常形式。（*树*是无环图，但 Haskell 的普遍递归意味着 Haskell 表达式形成一般*图*，因此是图归约而不是树归约。）

不太清楚的是术语“spineless”和“tagless”。

1.  我*认为*“spineless”是指功能应用程序没有功能应用程序节点的“spine”。相反，您有一个对象来命名被调用的函数并指向其所有参数。那是对的吗？

2.  我认为“无标记”指的是没有用构造函数 ID“标记”的构造函数节点，而是使用跳转指令解析大小写表达式。但现在我不确定这是否正确。相反，它似乎指的是节点没有用它们的评估状态标记的事实。谁能澄清这些解释中哪一个（如果有的话）是正确的？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-25T02:01:24.970

GHC wiki 包含一篇由 Max Bolingbroke 撰写的[关于 STG 的介绍性文章：](https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/GeneratedCode)

> STG 机器是世界领先的 Haskell 编译器 GHC 的重要组成部分。它定义了如何在标准硬件上有效地实现 Haskell 评估模型。尽管有这个关键作用，但 GHC 用户通常对它知之甚少。本文档旨在通过一系列显示 Haskell 源代码如何编译的简单示例，概述 STG 机器的现代、基于 eval/apply、指针标记的化身。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-06-08T00:52:51.503

如果我是对的，您对“Spineless”的看法是正确的。Burn、Peyton-Jones 和 Robson 在 1988 年的文章“The Spineless G-Machine”中基本上描述了它。我读过它，但它在我的脑海中并不新鲜。基本上，在 G-Machine 上，所有堆栈条目都指向一个应用程序节点，除了顶部的那个指向表达式的头部。这些应用程序节点间接访问参数，并且在某些 G-Machine 描述中，在应用函数之前重新排列堆栈，以便堆栈上的最后 n 个节点指向参数而不是应用程序节点。如果我没记错的话，“Spineless”部分是关于避免将这些应用程序节点（称为图形的脊椎）完全放在堆栈上，

至于“无标签”部分，你现在比以前更正确了，但是......在节点上使用标签是一件非常非常古老的事情。你能想一想像 LISP 这样的动态类型语言是如何实现的吗？每个单元格都必须有它的值和一个表示类型的标签。如果你想要一些东西，你必须检查标签并采取相应的行动。在 Haskell 的情况下，评估状态比类型更重要，Haskell 是静态类型的。

在 STG 机器中，不使用标签。标签被一组函数指针取代，可能是受到 OO 语言的启发。当您想要一个尚未计算的节点的值时，该函数将计算它。当它已经被计算出来时，函数返回它。这允许在不使客户端代码变得更复杂的情况下，这个函数可以做很多创造性的事情。

这个“无标签”部分是的，在 SPJ 的“在库存硬件上实现功能语言”一文中进行了描述。

也有人反对这种“无标签”的东西。基本上，这涉及到函数指针，这是计算机体系结构术语中的间接跳转。间接跳转是分支预测的障碍，因此通常是流水线的障碍。因为要么架构认为对跳转参数存在数据依赖性，因此停止流水线，要么架构假设它不知道目的地并停止流水线。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T20:22:45.547

你想阅读 SPJ 关于函数式 PL 实现的书：

*   [http://research.microsoft.com/en-us/um/people/simonpj/papers/slpj-book-1987/index.htm](http://research.microsoft.com/en-us/um/people/simonpj/papers/slpj-book-1987/index.htm)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-02T11:46:46.660

migle 的答案正是 STGM 的无旋转和无标签的含义。今天不值得尝试理解这两个特性的名称，因为这些名称源于图缩减技术的历史：来自 G-machine、Spineless G-machine 和 Spineless and Tagless G-machine。

G 机器同时使用书脊和标签。脊椎是从函数应用程序的根节点到函数节点的边列表。例如，“f e1 e2 ... en”的函数应用表示为

```
root = AP left_n en
left_n = AP left_n-1 en-1 ...
left_2 = AP left_1 e1
left_1 = FUN f 
```

在 G 机器中，因此脊椎是由 left_n -> left_n-1 -> ... -> left_2 -> left_1 组成的边列表。它实际上是功能应用程序的脊梁！

在同一个功能应用程序中，有标签 AP 和 FUN。

在下一个称为 Spineless G-machine 的高级 G-machine 中，通过在一个连续的块中表示这样的功能应用程序，没有这样的脊椎，该块的第一个插槽指向 f，第二个插槽指向 e1，...，并且第 n+1 个时隙指向 en。在这个表示中，我们不需要脊椎。但是该块开始一个特殊的标签，指定插槽的数量等等。

在最先进的 G 机器中，即所谓的 Spineless Tagless G 机器中，这种标记被替换为函数指针。评估函数应用程序是通过函数指针跳转到代码。

不幸的是，Simone Peyton Jones 的 STGM 论文并没有给出一些抽象层次的编译/评估规则，因此人们不容易理解 STGM 的本质是很自然的。

# singleton - How to JMock a Singleton

> ID：11921685
> 
> 赞同：0
> 
> 时间：2012-08-12T11:03:17.280
> 
> 标签：singleton, jmock

My application has this structure: there's a RepositoryFacade (that is a Singleton) that uses many other ObjectRepository that are Singleton (UserRepository, etc).

Now I'd like to test it, mocking the [Objetct]Repositiries. To do that I made the [Objetct]Repositiry implements an interface, and then i tried to:

```
final IUserRepository mockIUserRepository= context.mock(IUserRepository.class);
RepositoryFacade.getInstance().setUserRepository(mockIUserRepository);
final User testUser = new User("username");

// expectations
context.checking(new Expectations() {{
    oneOf (mockIUserRepository).save(testUser);
}});
// execute
RepositoryFacade.getInstance().save(testUser); 
```

And in RepositoryFacade I added:

```
public IUserRepository userRepository = UserRepository.getInstance(); 
```

But if I try to run the test, I obtain:

```
java.lang.SecurityException: class "org.hamcrest.TypeSafeMatcher"'s signer 
information does not match signer information of other classes in the same 
package 
```

p.s. Originally my RepositoryFacade had not a IUserRepository variable, I used it asking always UserRepository.getInstance().what_i_want(). I introduced it to try to use JMock, so if not needed I'll be glad to remove that bad use of Singleton.

Thanks, Andrea

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:43:02.267

The error you're getting suggests that you have a classloading issue with the org.hamcrest package rather than any issue with your singletons. See [this question](https://stackoverflow.com/questions/2877262/java-securityexception-signer-information-does-not-match) for more on this exception and [this one](https://stackoverflow.com/questions/9651784/hamcrest-tests-always-fail) for the particular problem with hamcrest and potential solutions.

Check your classpath to make sure you're not including conflicting hamcrest code from multiple jars. If you find hamcrest in multiple jars, this may be corrected by something as simple as changing their order in your classpath.

Junit itself comes in two versions - one may include an old version of hamcrest. Switching to the one not including hamcrest may also fix your problem.

If you can find a way to do it, it would be better in the long run to get rid of the singletons altogether and instead do dependency injection using something like Spring or Guice.

But what you're doing should work, once you deal with the classloading, and it's a reasonable approach to dealing with singletons in a testing context.

# java - Android - 强制关闭，PDF 不可用，iText

> ID：11921687
> 
> 赞同：0
> 
> 时间：2012-08-12T11:03:25.017
> 
> 标签：java, android, eclipse, pdf, itext

我正在使用eclipse制作一个android应用程序。通过该应用程序，它希望使用 iText 解析 PDF。但我事先不知道 PDF 是否已经可用。现在，当 iText 开始解析 PDF 时，它会强制关闭，仅仅是因为 PDF 不存在（还）。所以我的问题是如何防止这种情况发生？我可以检查（使用 iText 或使用其他东西）PDF 是否可用。

到目前为止，这是我的代码：

```
int numberOfPages = readerTest.getNumberOfPages();
        numberOfPages = numberOfPages + 1;
        for (int page = 1; page < numberOfPages; page++){
            try {
                contentTest1Page = PdfTextExtractor.getTextFromPage(readerTest, page);
                contentTest = contentTest + contentTest1Page;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:35:57.810

使用`java.io.File`和`exists()`方法查看文件是否存在。

# ruby-on-rails - 使用在 Ruby 数组中返回枚举数的方法的正确方法是什么？

> ID：11921688
> 
> 赞同：4
> 
> 时间：2012-08-12T11:03:32.687
> 
> 标签：ruby-on-rails, ruby, coding-style

[Ruby 数组](http://ruby-doc.org/core-1.9.3/Array.html)中的许多方法在没有参数或块（ `index`、`keep_if`、`each`等等）的情况下调用时会返回一个枚举器`drop_while`。

*   什么时候适合使用这种形式的方法，而不是用块调用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T11:09:35.747

从文档到[`Enumerator`](http://www.ruby-doc.org/core-1.9.3/Enumerator.html)：

> 大多数方法有两种形式：一种是对枚举中每个项目的内容进行评估的块形式，另一种是返回一个包装迭代的新 Enumerator 的非块形式。
> 
> 这允许您将枚举器链接在一起。例如，您可以通过以下方式将列表的元素映射到包含索引和元素的字符串：
> 
> ```
> puts %w[foo bar baz].map.with_index {|w,i| "#{i}:#{w}" }
> # => ["0:foo", "1:bar", "2:baz"] 
> ```
> 
> 枚举器也可以用作外部迭代器。例如，Enumerator#next 返回迭代器的下一个值，如果 Enumerator 在末尾，则引发 StopIteration。
> 
> ```
> e = [1,2,3].each   # returns an enumerator object.
> puts e.next   # => 1
> puts e.next   # => 2
> puts e.next   # => 3
> puts e.next   # raises StopIteration 
> ```

我很抱歉复制粘贴，但我无法更好地解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T11:10:49.677

Enumerator 类存在的主要原因是方法链：

```
array.each.with_object [[], []] { |element, memo| ... } 
```

所以基本上，你不需要担心这个。

# php - 为什么 PHP 不打印 TRUE/FALSE？

> ID：11921690
> 
> 赞同：20
> 
> 时间：2012-08-12T11:03:43.343
> 
> 标签：php

> **可能重复：**
> [PHP - 假时获取布尔以回显假](https://stackoverflow.com/questions/4948663/php-get-bool-to-echo-false-when-false)

给定以下 test.php：

```
<?php

echo TRUE . "\n";    // prints "1\n"
echo FALSE . "\n";   // prints "\n"

?> 
```

为什么不`php -f test.php`打印`TRUE`或`FALSE`？更重要的是，在这种`FALSE`情况下，为什么它不打印任何东西？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-12T11:07:34.667

从[手册](http://php.net/manual/en/language.types.string.php)：

> 布尔 TRUE 值转换为字符串“1”。Boolean FALSE 被转换为“”（空字符串）。这允许在布尔值和字符串值之间来回转换。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-12T11:06:11.767

因为`false == '';`

这样做打印布尔值：

```
$bool = false;
echo $bool ? 'true' : 'false'; 
```

或者...

```
echo $bool ? 'yes' : 'no';
echo $bool ? '1' : '0'; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-12T11:06:08.167

因为转换为字符串时的布尔值`1`分别转换为空字符串。

据说这是为了在 boolean -> string -> boolean 之间实现透明的往返。

# c - OpenBSD内核模块调用网络函数

> ID：11921696
> 
> 赞同：1
> 
> 时间：2012-08-12T11:05:18.270
> 
> 标签：c, sockets, bsd, openbsd

作为一个概念验证，加上一个方便的偏执工具，我正在编写一个 OpenBSD LKM，它将连接到一个 IRC 通道，并在执行挂钩的系统调用时报告。

这样，当我不在现场但可以访问互联网时，我基本上可以对文件系统更改、用户登录等进行“实时”更新。

我已经连接了套接字，但我一直在尝试执行相当于硬编码地址的调用，`getaddrinfo`甚至`inet_addr`调用。

由于这些是用户态函数，因此任何使用它们的尝试都会导致未定义的引用——这很公平。问题是，经过一段时间的谷歌搜索和 grep 的 openbsd 源代码，我找不到任何等效的内核函数来执行此操作；最好的建议是在模块中重新实现它们。

这意味着我还需要实现`islower`,`isxdigit`和`isspace`（随着我的进步可能还有其他），这对于执行如此简单的事情会有点多；是否有人知道解决方法或替代方法，或者我是否从网络文件中卡住了 c+p 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-13T20:23:40.517

这绝对是在用户空间中做得更好。无论如何，OpenBSD 不再支持内核模块。

不是说你在做这个项目了。我只是想回答一下，以便可以关闭它，以便我可以阐明如何在内核中使用一些 stdlib 函数。

对此作出回应：

> 这意味着我还需要实现诸如 islower、isxdigit 和 isspace 之类的东西（随着我的进步可能还有其他东西），这对于执行如此简单的事情会有点多；是否有人知道解决方法或替代方法，或者我是否从网络文件中卡住了 c+p 代码？

一些 C 标准库函数可从 libkern 获得（请参阅 参考资料`libkern(9)`）。其他的，包括许多 ctype 函数，如`islower()`，可从 libsa 获得。要使用这些，您需要以下内容：

```
#include <lib/libkern/libkern.h>
#include <lib/libsa/stand.h> 
```

libsa 包含一些标头（在 中找到`/usr/src/sys/lib/libsa/`），因此请包含您需要的每个标头。

# python - Python中的NameError和AttributeError有什么区别？

> ID：11921705
> 
> 赞同：3
> 
> 时间：2012-08-12T11:06:40.897
> 
> 标签：python, exception-handling

这两种错误有什么区别？什么时候使用它们中的每一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T11:12:52.920

属性是函数或类或模块的属性，如果找不到属性，则会引发`attribute error`.

`NameError`与变量有关。

```
>>> x=2
>>> y=3
>>> z    #z is not defined so NameError

Traceback (most recent call last):
  File "<pyshell#136>", line 1, in <module>
    z
NameError: name 'z' is not defined

>>> def f():pass

>>> f.x=2 #define an attribue of f
>>> f.x
2
>>> f.y   #f has no attribute named y

Traceback (most recent call last):
  File "<pyshell#141>", line 1, in <module>
    f.y
AttributeError: 'function' object has no attribute 'y'

>>> import math   #a module  

>>> math.sin(90) #sin() is an attribute of math
0.8939966636005579

>>> math.cosx(90)  #but cosx() is not an attribute of math

Traceback (most recent call last):
  File "<pyshell#145>", line 1, in <module>
    math.cosx(90)
AttributeError: 'module' object has no attribute 'cosx' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T11:12:04.697

从[文档](http://docs.python.org/library/exceptions.html)中，我认为文本很容易解释。

**NameError** 在找不到本地或全局名称时引发。这仅适用于非限定名称。关联的值是一条错误消息，其中包含无法找到的名称。

**AttributeError** 当属性引用（请参阅属性引用）或分配失败时引发。（当对象根本不支持属性引用或属性分配时，会引发 TypeError。）

在上面的示例中，当您尝试访问非限定名称（本地或全局）时，对`z`raises的引用`NameError`

在你的最后一个例子`math.cosx`中是一个点访问（属性引用），在这种情况下是数学模块的一个属性，因此`AttributeError`被提出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T11:11:43.017

如果您尝试访问之前未定义或分配的变量，Python 会提出一个名称。当您尝试访问之前未分配或定义的实例的实例变量时，会引发 AttributeError。

看

[http://docs.python.org/library/exceptions.html](http://docs.python.org/library/exceptions.html)

# html - 在ul中获取li元素的独立定位

> ID：11921706
> 
> 赞同：1
> 
> 时间：2012-08-12T11:06:59.163
> 
> 标签：html, css

这是我试图在我的网站中加入的侧边栏的小提琴示例。 [http://jsfiddle.net/PF35v/9/](http://jsfiddle.net/PF35v/9/)

如果您将鼠标悬停在第三个项目上，您会注意到悬停时出现一个子菜单。
子菜单的写法如下：

```
<ul id="side-menu">
            <li><img src="http://www.downes.ca/images/RightArrow.gif" alt="sub menu image (assume this is some kind of arrow" style="width:48px; height:48px" />
            </li>
            <li>Sub-menu item 1</li>
            <li>Sub-menu item 2</li>
            <li>Sub-menu item 1</li>
        </ul> 
```

其中第一`li`项是图像，其他三个是文本项。

我想`li`独立放置带有文本的项目，即这些不应该出现在第一个`li`带有图像的项目之后，并且可以放置在如下图所示的形式中。

![在此处输入图像描述](../Images/26646ca9fdadb427ea2467af39c7ca7e.png)

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:22:24.963

好吧，你绝对可以定位所有这些。但更好的方法可能是这样的：

```
#side-menu { margin: 0; padding: 0 0 0 50px; list-style: none; }
#side-menu>li { margin: 0 0 20px; }
#side-menu>li:first-child { float: left; margin: 0 0 0 -50px; } 
```

左边的内边距`ul`将列表项推过去，负边距结合浮动将再次拉回箭头。

话虽如此，还有一个更好的方法：背景图像。我会做这样的事情：

```
#side-menu { background: url(/images/RightArrow.gif) no-repeat left; margin: 0; padding: 0 0 0 50px; list-style: none; }
#side-menu>li { margin: 0 0 20px; } 
```

并删除第一个`li`.

# appcelerator - 文本字段中的文本在模糊时会跳转

> ID：11921709
> 
> 赞同：0
> 
> 时间：2012-08-12T11:07:34.933
> 
> 标签：appcelerator

我正在使用最新的 SDK。

我正在尝试在 Appcelerator (iOS) 中创建一个表单，但是当我专注于一个字段并输入文本然后专注于另一个文本字段时，我刚刚编辑的字段中的文本会上升 1 个像素。我怎样才能让它停止移动？

```
var textfield = Titanium.UI.createTextField ({ 

        color:'#333', 
        font: {fontFamily: 'Ganero'},
        hintText: args.placeholder, 
        passwordMask: args.password,
        appearance:Titanium.UI.KEYBOARD_APPEARANCE_ALERT,
        autocapitalization:Titanium.UI.TEXT_AUTOCAPITALIZATION_NONE,
        width:180, 
        top: 20,
        left: 100, 
        backgroundColor: '#ccc',
        keyboardToolbarColor: '#000'

    }); 
```

# python - Pyschools 删除通用元素

> ID：11921712
> 
> 赞同：0
> 
> 时间：2012-08-12T11:07:54.833
> 
> 标签：python, list

```
def removeCommonElements(tup1,tup2):
count=0
lis1=list(tup1)
lis2=list(tup2)
while count<=len(lis1):
    for i in lis1:
        if i in lis2:
            lis1.remove(i)
            lis2.remove(i)
    count+=1
    return tuple(lis1+lis2)

print(removeCommonElements((1,2,3,4), (3,4,5,6))) 
```

我需要输出 as`(1, 2, 5, 6)`并且我得到输出 as `(1, 2, 4, 4, 5, 6)`。我找不到我的错误。谁能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T00:18:13.620

就是缩进。缩进如下：

```
def removeCommonElements(tup1,tup2):
    count=0
    lis1=list(tup1)
    lis2=list(tup2)
    while count<=len(lis1):
        for i in lis1:
            if i in lis2:
                lis1.remove(i)
                lis2.remove(i)
        count+=1
    return tuple(lis1+lis2)

print(removeCommonElements((1,2,3,4), (3,4,5,6))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T00:37:59.737

```
for i in lis1:
        if i in lis2:
            lis1.remove(i)
            lis2.remove(i) 
```

您的这部分代码正在遍历一个列表，同时修改它。所以 4 被排除在外。您可以使用 set 来执行此操作：

```
>>> def removeCommon(x, y):
...     x = set(x)
...     y = set(y)
...     return tuple(set.union(x, y)-set.intersection(x, y))
... 
>>> a = (1,2,3,4)
>>> b = (3,4,5,6)
>>> removeCommon(a, b)
(1, 2, 5, 6) 
```

# magento - 使用我的新 magento 模块后： SQLSTATE[42S02]: Base table or view not found: 1146 Table XXX does

> ID：11921713
> 
> 赞同：2
> 
> 时间：2012-08-12T11:07:56.883
> 
> 标签：magento

> SQLSTATE [42S02]：未找到基表或视图：1146 表“desbest_full2.showdown_matches”不存在

但是为什么，如果我里面有一个 mysql 设置脚本`app/code/local/Desbest/Showdown/sql/Showdown_setup/mysql4-install-1.php`

```
<?php
echo 'Running This Upgrade: '.get_class($this)."\n <br /> \n"; die("Exit for now");

$installer = $this;
/* @var $installer Mage_Catalog_Model_Resource_Eav_Mysql4_Setup */
$installer->startSetup();
$installer->run("

    CREATE TABLE {$this->getTable('showdown_matches')} (
    --CREATE TABLE IF NOT EXISTS `showdown_matches` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `firstproductid` int(11) NOT NULL,
      `secondproductid` int(11) NOT NULL,
      `title` varchar(255) NOT NULL,
      `datenumber` varchar(10) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8_general_ci AUTO_INCREMENT=1 ;

    CREATE TABLE IF NOT EXISTS `showdown_votes` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `matchid` int(11) NOT NULL,
      `votedfor` varchar(10) NOT NULL,
      `ip` varchar(50) NOT NULL,
      `datenumber` varchar(10) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8_general_ci AUTO_INCREMENT=1 ;

");
$installer->endSetup(); 
```

该模块适用于我最初的 Magento 安装。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T20:56:00.577

您的安装脚本可能没有运行，因为 Magento 认为它已经运行。您可以检查数据库表 core_resource 以获取包含模块版本的模块记录。这个资源记录是 Magento 如何知道它是否已经运行了模块设置脚本，或者确定它是否需要从旧版本运行升级脚本到新版本。

如果您从 core_resource 表中删除模块的记录，Magento 将在下次 Magento 生成页面时尝试执行您的设置脚本。

我还希望您需要删除`die("Exit for now");`从设置脚本中删除 ，以便它实际到达创建表的部分。如果设置脚本启动并调用 die() 函数并结束该脚本的执行，我认为它可能会继续创建 core_resource 记录，表明它已完成设置脚本并且不会再次运行它，除非您从core_resource 表。

您可以在 Magento 知识库中找到有关安装脚本的一些信息： [Magento for Developers: Part 6 - Magento Setup Resources](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources/)

您还可以检查模块配置 XML 文件以确保那里的版本与安装脚本文件名的版本匹配。

```
<modules>
    <Desbest_Showdown>
        <version>1</version>
    </Desbest_Showdown>
</modules>
<global>
    <resources>
        <showdown_setup>
            <setup>
                <module>Desbest_Showdown</module>
            </setup>
        </showdown_setup>
    </resources>
</global> 
```

我想到的另一件事是文件/目录名称区分大小写。如果您在 Mac 上设置了一堆不区分大小写的文件系统的东西，一切正常，然后将文件移动到文件系统区分大小写的 linux 机器上，您将遇到找不到文件的问题。您列出了您的文件名`app/code/local/Desbest/Showdown/sql/Showdown_setup/mysql4-install-1.php`，我认为该目录`Showdown_setup`可能需要全部为小写`showdown_setup`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:03:37.267

[此问题](https://stackoverflow.com/questions/4717535/my-magento-extension-install-script-will-not-run/4766837)中有用于调试非运行安装资源脚本的步骤。

# php - 重定向到控制器中的不同视图

> ID：11921715
> 
> 赞同：1
> 
> 时间：2012-08-12T11:08:34.327
> 
> 标签：php, zend-framework, zend-framework-mvc

这是我的 Zend Framework 目录结构（只包括你需要的）：

```
-Controllers
    -HomeController.php
    -IndexController.php
-Views
    -scripts
        -home
            -index.phtml
        -index
            -index.phtml 
```

在`IndexController`我想自动将它们重定向到主视图。

我如何实现这一目标？

这是我到目前为止所尝试的：

```
header('/application/views/home'); 
```

我想完全重定向到不同的视图和控制器。在同一个控制器中没有不同的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:22:50.707

你有一些选择：

使用 _redirect 操作[实用程序方法](http://framework.zend.com/manual/en/zend.controller.action.html#zend.controller.action.utilmethods)（非常常见）

```
public function indexAction() {
    $this->_redirect('/application/views/home');
} 
```

或使用 _forward 操作[实用程序方法](http://framework.zend.com/manual/en/zend.controller.action.html#zend.controller.action.utilmethods)只执行请求的操作而不实际重定向

```
public function indexAction() {
        $this->_forward('index', 'home');
    } 
```

你可以使用 action helper [redirector](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.redirector)，类似于 _redirect 但有更多选项。

```
public function indexAction() {
            $this->getHelper('Redirector')->gotoSimple('index','home');
        } 
```

这涵盖了控制器内部重定向的基础知识，如果你想实际渲染`home/index.phtml`，`/idex/index`可以使用[viewrenderer action helper](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.viewrenderer)。

我会让你解开那些秘密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T11:11:55.650

如果您想在当前操作中呈现另一个操作，则可以在您的操作中通过以下方式：

```
$this->render('actionName'); 
```

或者，显式设置要呈现的模板

```
$this->renderScript('path/to/viewscript.phtml'); 
```

**更新：**再次阅读您的问题，我想您想使用

> **`_forward($action, $controller = null, $module = null, array $params = null):`**执行另一个动作。如果在 preDispatch() 中调用，当前请求的操作将被跳过以支持新的操作。否则，在处理完当前动作后，_forward() 中请求的动作将被执行。

或者

> **`_redirect($url, array $options = array()):`**重定向到另一个位置。此方法采用 URL 和一组可选选项。默认情况下，它执行 HTTP 302 重定向。

请参阅有关此问题的[文档。](http://framework.zend.com/manual/en/zend.controller.action.html)

# jquery - twitter-bootstrap-rails Uncaught TypeError / $ 不是函数

> ID：11921717
> 
> 赞同：3
> 
> 时间：2012-08-12T11:09:23.903
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, gem

在开发 Rails 应用程序时，我在 google chrome 检查元素控制台中测试 ajax 链接时突然发现 12 个相同类型的错误：

![控制台日志错误](../Images/43134a2d1be2a213db91297e29863c5a.png)

我不知道这里发生了什么，但无论如何我的应用程序都可以正常工作。但是，当我在 Firefox 中启动我的应用程序时，我的应用程序甚至没有加载。我停下来，弹出这个错误：

![显示错误位置的调试屏幕](../Images/d6ee69fc2a47d5e502d66b7655820bc9.png)

我什至不知道还能在这里说什么，因为我完全被难住了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T11:15:26.167

好的，我发现了问题所在。前几天试图让引导下拉按钮工作时，我重新排列了 application.js 文件夹以在 jquery 之前加载引导。我改变了这个：

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

对此：

```
//= require twitter/bootstrap
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

当时，这解决了引导下拉问题。但是，我现在意识到，当 bootstrap 调用 jquery 时，它还没有被加载。因此，错误`$ function does not exist`。只需将线路改回正确的顺序，现在一切都很好。

# android - Android：WiFi 和移动无线电比特率 (BPS)

> ID：11921725
> 
> 赞同：0
> 
> 时间：2012-08-12T11:10:57.117
> 
> 标签：android, wifi, rate

我想弄清楚设备的 wifi 和移动无线电比特每秒的比率。

我在哪里/如何获得这些数字？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:14:21.687

您可以调用[WifiManager](http://developer.android.com/reference/android/net/wifi/WifiManager.html) getConnectionInfo()，它将返回一个[WifiInfo](http://developer.android.com/reference/android/net/wifi/WifiInfo.html)，其中包含您可以获得的有关 Wifi 的所有信息。

使用[ConnectivityManager](http://developer.android.com/reference/android/net/ConnectivityManager.html)获取移动和其他网络统计信息，它们可能没有您要查找的所有信息。

# soap - WSO2 ESB 中介 SOAP 服务

> ID：11921727
> 
> 赞同：1
> 
> 时间：2012-08-12T11:11:17.773
> 
> 标签：soap, wso2, wso2esb, axis2

我正在努力使我的消息流在 wso2 esb 中工作，所以我需要一些帮助来实现基本的通信：

Service1 想要接收一个整数 Service2 生成随机数

Service1 有 InSequence: log, send（到指定的地址点）。OutSequence：记录，发送

这看起来像：

```
 <proxy name="ClientAskNumber" transports="https http" startOnLoad="true"
        trace="disable">
        <target faultSequence="fault">
            <inSequence>
                <log level="full">
                    <property name="Insequence" value="***" />
                </log>
                <send>
                    <endpoint>
                        <address uri="http://localhost:8280/services/RandomNumbers" />
                    </endpoint>
                </send>
            </inSequence>
            <outSequence>
                <log level="full">
                    <property name="Outsequence" value="***" />
                </log>
                <send />
            </outSequence>
        </target>
    </proxy> 
```

我有这样的回应：`<faultstring>System.Web.Services.Protocols.SoapException: Server did not recognize the value of HTTP Header SOAPAction: urn:mediate. at System.Web.Services.Protocols.Soap11ServerProtocolHelper.RouteRequest()....etc`

这是什么意思？我还缺少其他东西吗？请帮忙。谢谢

**编辑：**

我正在研究 Wso2 ESB，我只需要了解如何使工作成为消息通信，之后我将尝试添加不同类型的中介。我只是在解决这个问题，因为我是这项技术的新手，正如你所看到的，我真的很难让它发挥作用......

**编辑2：***

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="ClientAskNumber" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target endpoint="RandomNumbers">
      <inSequence>
         <log>
            <property name="CLIENTASKS" value="******C_ASKS" />
         </log>
         <send>
            <endpoint key="RandomNumbers" />
         </send>
      </inSequence>
      <outSequence>
         <log>
            <property name="CLIENTRECEIVES" value="*******C_RECEIVES" />
         </log>
      </outSequence>
   </target>
</proxy> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:24:31.433

在这种情况下，这对其他人有帮助：问题`"Server did not recognize the value of HTTP Header SOAPAction: urn:mediate..."`是我需要添加一个 Header 调解器以便将我的 web 服务方法“getNumbers”调用到我的 InSequence 中，如下所示：

```
 <inSequence>
         <log>
            <property name="CLIENTASKS" value="******C_ASKS" />
         </log>
         <header name="Action" value="http://tempuri.org/getNumbers" />
         <send>
            <endpoint key="RandomNumbers" />
         </send>
      </inSequence> 
```

并通过soapUI发送这个请求：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Numbers xmlns="http://tempuri.org/" />
  </soap:Body>
</soap:Envelope> 
```

我希望这对其他使用带有 WSO2ESB 的 .Net 解决方案的人有用（不幸的是，没有太多示例......）

PS感谢Ratha的帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:05:31.297

这是我可以告诉你的流程。你必须将你的第二个服务指向你的第一个服务的端点。在上面的配置中

```
http://localhost:8280/services/RandomNumbers --->2nd service url
ClientAskNumber -->1st service.. 
```

现在您可以发送执行第二个服务所需的请求（即：检索随机数）因此代理将转发到该端点并将响应返回到外序列。您应该在控制台/日志中看到它，因为您使用了日志调解器。

在您收到的错误响应中，我希望您从第二次服务中得到它。检查您是否向端点发送正确的请求

# gtk - Gtk+ 和 Vala：继承 gtk.TreeModel

> ID：11921728
> 
> 赞同：2
> 
> 时间：2012-08-12T11:11:24.433
> 
> 标签：gtk, vala

我有一个哈希值，这些值构建到以下结构中：

```
string type1_name -> Hash(
              string name_member -> DataStruct,
              string name_member -> DataStruct,
              string name_member -> DataStruct,
              string name_member -> DataStruct
            ),
string type2_name -> Hash(
              string name_member -> DataStruct,
              string name_member -> DataStruct,
              string name_member -> DataStruct,
              string name_member -> DataStruct
            ),
/// etc 
```

问题是我有 3 个视图：2 个 TreeViews（扩展的实际树以分层方式显示所有列，并作为 ListStore 仅显示类型图标和 DataStruct 的名称，这些视图由不同的父级拥有，可能同时显示）和 1 个ListView 具有相同数据的图标表示。ATM 我有一个类管理数据（验证、序列化、反序列化......）和每个视图的 3 个模型，所以每次我更新/删除/创建项目时，我都必须更新所有 3 个模型，这看起来不太好:(

我想到的是创建一个实现 Gtk.TreeModel 的类并提供可用作所有 3 个视图的模型的通用数据源，但我找不到任何关于如何实现 gtk.TreeModel 的文档。我试图查看 GtkListStore （本机 C 实现），我发现它重新实现了很多方法。没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T00:09:08.643

不，没有更简单的方法，但真的不是太难。查看 C 代码可能会令人生畏，但实际上只有十几种方法需要实现。它们`abstract`在 gtk+-3.0.vapi （以及在 valadoc.org 的[Gtk.TreeModel](http://valadoc.org/gtk+-3.0/Gtk.TreeModel.html)文档中）中被标记为。并且实现通常非常简单。如果你想要一个示例[SQLHeavyGtk.Model](https://gitorious.org/sqlheavy/sqlheavy/blobs/master/gtk/sqlheavy-gtk-model.vala)是我能想到的唯一一个。

标记为的方法`virtual`通常不需要实现，尽管您可以根据需要提供一个实现（通常用于优化，我猜 Gtk.ListStore 提供了很多）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T02:17:13.333

简单继承自 Gtk.TreeStore / Gtk.ListStore 并显式设置列类型。树视图列设置为单元格渲染器和您希望显示的数据回调函数。

将 MyCommon.data1 映射到 treeview1.column = 0 的 Vala 示例

* * *

```
public class MyCommon : GLib.Object {
     string data1 {get; set; }
     string data2 {get; set; }
}

public class Store : Gtk.TreeStore {

    public Store() {
       set_column_types( new GLib.Type[] { typeof(MyCommon)  } );
    }

    public set_treeview1(Gtk.TreeView treeview) {
      treeview.insert_column_with_data_func(0, "data1", new Gtk.CellRendererText(), tree_cell_data1);
      treeview.insert_column_with_data_func(1, "data2", new Gtk.CellRendererText(), tree_cell_data2);
      treeview.model = this;
    }

    protected MyCommon? my_common(Gtk.TreeModel model, Gtk.TreeIter iter) {
        GLib.Value  data;
        model.get_value(iter, 0, out data);
        return (MyCommon)data;
    }

    public void tree_cell_data1(Gtk.TreeViewColumn column, Gtk.CellRenderer cell, 
                                     Gtk.TreeModel model, Gtk.TreeIter iter) {
       MyCommon? property = my_common(this,iter);
       if(property != null) (cell as Gtk.CellRendererText).text = property.data1;
    }

    public void tree_cell_data2(Gtk.TreeViewColumn column, Gtk.CellRenderer cell, 
                                     Gtk.TreeModel model, Gtk.TreeIter iter) {
       MyCommon? property = my_common(this,iter);
       if(property != null) (cell as Gtk.CellRendererText).text = property.data2;
    }
    ..... 
```

* * *

# html - 我可以在 Facebook 帖子中使用 mailto 吗？

> ID：11921739
> 
> 赞同：0
> 
> 时间：2012-08-12T11:13:26.947
> 
> 标签：html, facebook

我需要在 facebook 用户墙帖子中添加 html 标签。我可以在 facebook 帖子中添加以下代码吗？

```
<a href="mailto:test@example.com">test@example.com</a> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:17:05.950

这是不可能的，因为 <> 字符被转换为 html 值 & lt ; 和> 出于安全原因。否则任何人都可以进行代码注入（javascript、php、asp 等）

# git - gitignore 不适用于我的新仓库

> ID：11921740
> 
> 赞同：1
> 
> 时间：2012-08-12T11:13:27.777
> 
> 标签：git

我最近创建了一个新的存储库，并在该存储库中复制了我用 eclipse 编写的所有 Java 代码。我还有一个 .gitignore 文件来忽略所有与 Eclipse 相关的 .class bin 文件，但是当我尝试将我的更改推送到 repo 时，它开始上传所有的东西，那是巨大的 140 MB。我想知道为什么 ？？

下面，我将告诉您我一直遵循的步骤

1：在我的 Java 算法 git 文件夹中，我直接从 Eclipse 工作区复制了我的 Java 项目

2：在同一个文件夹中创建了一个.gitignore

3：现在 git status 显示我的 java 项目未跟踪。

4：我添加它并提交它并推送它。但在这里它完全忽略了.gitignore ..

编辑：这是我的 .gitignore

```
C:\Users\Salman\Documents\GitHub\Java-Algorithm [master +1 ~0 -0 !]> cat .gitignore

bin

.settings
.classpath
.project

*.class
*.jar
*.war
*.ear 
```

我的 Java Ecipe 项目中的文件，即 DesignAndAnalysisOfAlgorithms 是

```
C:\Users\Salman\Documents\GitHub\Java-Algorithm\DesignAndAnalysisOfAlgorithm [master +1 ~0 -0 !]> ls

Directory: C:\Users\Salman\Documents\GitHub\Java-Algorithm\DesignAndAnalysi
sOfAlgorithm

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
d----         8/12/2012   2:04 PM            .settings
d----         8/12/2012   2:04 PM            bin
d----         8/12/2012   2:04 PM            src
-a---         8/12/2012   4:52 AM        301 .classpath
-a---         8/12/2012   4:52 AM        404 .project 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T11:37:12.163

两个想法：

首先，当您似乎使用 Eclipse 时，请确保您在与 Eclipse 相同的目录中运行 git`.gitignore`

其次，如果您`*.class`在决定`*.class`通过使用`.gitignore`它来忽略所有文件之前已经跟踪了一个文件，那么它仍然会被跟踪。您可以通过以下方式取消跟踪：

```
git rm --cached filename 
```

另见： [https ://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

# windows-phone-7 - Paypal 表单提交 - 移动

> ID：11921750
> 
> 赞同：0
> 
> 时间：2012-08-12T11:16:08.923
> 
> 标签：windows-phone-7, c#-4.0, paypal

我`m using below code to submit values in to Paypal and it`在工作。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick" />
    <h2 style="font-family:Segoe UI;">Your Email :</h2>
    <input type="text" name="business" value="youremailaddress@yourdomain.com" style="width:1000px; height:50px; margin-left:30px;"/>
    <br />
    <h2 style="font-family:Segoe UI;">Driveway Size :</h2>
    <input type="hidden" name="item_name" value="" />
    <select id="item_price" name="amount" style="width:1000px; height:50px; margin-left:30px;">
                            <option value="325">Single $325.00</option>
                            <option value="375">Double $375.00</option>
                            <option value="400">2.5 $400.00</option>
                            <option value="425">Triple $425.00</option>
                            <option value="450">3.5 $450.00</option>
                            <option value="475">Quad $475.00</option>
                        </select>
                        <br />
    <input type="submit" value="Buy!" style="margin-top:30px"/>

</form> 
```

但这是桌面版。无论如何我可以为手机做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:02:04.157

是的你可以。例如，您可以使用 System.Net.WebClient 将帖子发送到您在表单的操作字段中拥有的 URL。

或者，您可以将上述 HTML 代码嵌入到应用程序的 Web 浏览器控件中。

# tcl - 执行 cmd.exe tcl

> ID：11921752
> 
> 赞同：3
> 
> 时间：2012-08-12T11:16:45.183
> 
> 标签：tcl

我一直在寻找有关 exec cmd.exe 的信息，但找不到任何有用的信息。任何人都可以向我解释以下代码：

```
exec cmd.exe /c start /wait $buildLoc\\setup.exe /extract_all:C:/setup 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T12:33:14.147

让我们分解一下：

```
exec cmd.exe /c start /wait $buildLoc\\setup.exe /extract_all:C:/setup
#^^^ 
```

[exec](http://www.tcl.tk/man/tcl8.5/TclCmd/exec.htm)命令启动一个子进程。

```
exec cmd.exe /c start /wait $buildLoc\\setup.exe /extract_all:C:/setup
#    ^^^^^^^^^^ 
```

[cmd.exe](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cmd.mspx?mfr=true)是一个 Windows“批处理”shell，该`/c`标志要求它将其参数作为命令运行。

```
exec cmd.exe /c start /wait $buildLoc\\setup.exe /extract_all:C:/setup
#               ^^^^^^^^^^^ 
```

内置的[启动](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/start.mspx?mfr=true)`cmd.exe`命令也是启动另一个程序*的*一种方式。该`/wait`标志告诉它等到启动的程序结束。

```
exec cmd.exe /c start /wait $buildLoc\\setup.exe /extract_all:C:/setup
#                           ^^^^^^^^^ 
```

一个常规的 TCL 变量；它将在 TCL 内部扩展。

剩下的就是 setup.exe 程序所做的一切（谁知道……）

如果不知道更多关于这里运行的程序（见下文），很难准确地说出为什么`exec.cmd /c start /wait`需要中间体；我猜 cmd.exe 是加载系统的所有默认环境（而不是使用从 tcl 程序继承的环境），并且`start`是打开一个终端窗口，因此 setup.exe 程序的输出显示为用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T15:24:47.750

查看[`auto_execok`](http://tcl.tk/man/tcl8.5/TclCmd/library.htm)

```
exec {*}[auto_execok start] /wait $buildLoc\\setup.exe /extract_all:C:\\setup 
```

# sonicmq - 是否可以将消息发送到一个 Sonic 代理上的主题并将其复制到另一个 Sonic 代理上的队列？

> ID：11921753
> 
> 赞同：0
> 
> 时间：2012-08-12T11:16:50.763
> 
> 标签：sonicmq

我正在使用 SonicMQ（7.6 版）。我在生产和代码中设置了一个主题，将消息发布到该主题。我想将这些消息复制到另一个站点的 Sonic 代理中运行的队列。
是否可以将 SonicMQ 配置为跨代理和站点执行此主题到队列的复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:59:46.577

没有用于执行此操作的 SonicMQ 标准功能，因为 SonicMQ 主要是标准 JMS 提供程序，因此它没有用于操作或移动消息的内置标准功能。SonicESB 将是解决此类问题的“Sonic 产品”。

# scala - 如何从查找中隐藏 Akka 远程演员？

> ID：11921754
> 
> 赞同：4
> 
> 时间：2012-08-12T11:16:59.063
> 
> 标签：scala, authentication, remoting, actor, akka

我正在运行 Akka 2.0.2 微内核并希望为不受信任的远程参与者实施身份验证方案。

首先想到的是设置一个身份验证参与者，它在身份验证成功时返回对工作参与者的引用。

但是，我应该如何保护工作演员不被简单地通过 actorFor() 直接远程查找，从而完全绕过身份验证？

也就是说，我想防止远程参与者在未经身份验证的情况下访问我的微内核参与者系统中的参与者。

在 actorOf() 中不给工作演员一个名字是不够的，因为它会得到一个容易猜到的自动生成的名字。有没有办法禁用演员的远程查找，但仍然能够将他们的 ActorRef 提供给远程系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:42:43.133

我认为您与身份验证参与者走在正确的轨道上。让身份验证参与者返回 ActorRef 和令牌。远程参与者必须在发送给本地工作者参与者的消息中包含该令牌。工人演员将在工作之前验证令牌。

```
trait AuthenticatingActor { this => Actor
  val authenticationService = //...

  def receive = {
    case UnauthenticatedRequest(token, msg) =>
      if (authenticationService.validate(token) 
        authenticatedRecieve(msg)
      else
        sender ! RequestNotAuthenticated(token, "token invalid")

  def authenticatedReceive: Receive
}

class Worker extends AuthenticatingActor with Actor {
  def authenticatedReceive: Receive = //..
}

class AuthenticationActor extends Actor {
  val authenticationService = //..
  var worker: ActorRef = _

  def receive = {
    case Authenticate(username, password) =>
      val token = authenticationService.authenticate(username, password)
      sender ! token.map(AuthenticationSuccess(_, worker).
                     getOrElse(AuthenticationFailure)
    //..
} 
```

# django - Django 1.4 项目布局：使用 mysite 作为胶水应用

> ID：11921761
> 
> 赞同：1
> 
> 时间：2012-08-12T11:19:05.420
> 
> 标签：django

对于 Django 项目布局，旧的[公认答案](https://stackoverflow.com/questions/1629515/what-is-the-recommended-django-project-structure?rq=1)规定，制作一个`glue`与来自各种其他应用程序（例如主页）的数据相关联的应用程序是一种很好的做法。

既然 Django 1.4 会自动创建`../project_name/project_name/`文件夹，那我应该把`project_name`应用程序当作`glue`应用程序使用吗？还是我应该仍然制作一个应用程序并单独`core`留下自动创建的应用程序？`project_name`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:30:20.270

在过去的几个项目中，我发现以下布局运行良好：

上面的`common`文件夹包含所有不适合其他地方的东西，包括 base `urls.py`、`sitemaps.py`、通用模板标签、通用上下文处理器等。我发现这很干净且易于维护。最重要的是，整个目录可以很容易地检入 git。

我不会担心 1.4 的默认布局。做任何适合你的事情。

```
- apps/ 
  - /foo_app
  - /bar_app
- common # The equivalent of the glue app you talk about
- confs # Uwsgi/supervisor/nginx/gunicorn etc. configurations
  - /production  
  - /staging
  - /dev
- docs
- fixtures
- media
- static
- requirements # for `pip freeze > ...`
  - /production 
  - /staging
  - /development
- scripts
- settings
  - private.py # Secret Key etc., not put on VCS
  - database.py # DB Settings, also no in VCS
  - development.py
  - production.py
  - staging.py
  - default.py # All Django's settings
  - custom.py # Custom application settings
- templates 
```

# php - 数组和字符串，交换

> ID：11921762
> 
> 赞同：0
> 
> 时间：2012-08-12T11:19:28.767
> 
> 标签：php, arrays, string

我的代码：

```
<?php

    $string = "hello world";
    echo $string[1];          //output is 'e'
    echo end($string);        // I've got a warning error

  ?> 
```

如何将我的字符串变量交换为数组格式？我想如果我交换它，问题就会解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T11:22:11.973

`$string[n]`是访问字符串的第 n 个偏移量的特定符号。这并不意味着字符串是一个数组，它只是一种特殊的语法糖。如果您想要字符串的最后一个偏移量，请使用`substr($string, -1)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T11:32:11.710

有一个预定义的函数可以做到这一点。它是 str_split()。在这里[http://it.php.net/manual/en/function.str-split.php](http://it.php.net/manual/en/function.str-split.php)你可以找到文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T11:21:24.910

只需这样做：

```
echo substr($string, -1); 
```

因为字符串本身不是数组，所以函数喜欢`end`并且`array_sort`不起作用。

要物理转换字符串，请使用以下命令：

```
function CastStringToArray($string)
{
    $ret = array();
    $length = strlen($string);
    for ($i = 0; $i < $length; $i++)
    {
        $ret[] = $string[$i];
    }
    return $ret;
} 
```

# windows - 编写windows类驱动

> ID：11921764
> 
> 赞同：3
> 
> 时间：2012-08-12T11:19:51.357
> 
> 标签：windows, driver, cdc

我是 WDM 驱动程序开发的新手，但我有开发 Linux 驱动程序的经验。

我想为 Windows XP 开发基于 USB 的以太网类驱动程序。（CDC-ECM 类驱动程序）

我知道 Windows 仅支持网络类的 RNDIS/NDIS，因此我需要编写一个自定义 Windows 驱动程序来替换 RNDIS 驱动程序，同时维护 USB 堆栈的其余部分。

到目前为止，我下载了 Windows 驱动程序套件 (WDK) 并仍在阅读文档。

有谁知道如何做到这一点或从哪里开始？（WDK 文档除外）

我尝试了谷歌，但仍然无法弄清楚。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:50:51.080

您必须编写一个[NDIS 微型端口](http://msdn.microsoft.com/en-us/library/windows/hardware/ff570965%28v=vs.85%29.aspx)驱动程序，该驱动程序在下边缘使用 USB KMDF 微型端口驱动程序。

# vb.net - 未绑定的 DataGridView：仅当用户单击单元格时，才需要在第二列的单元格中使用 ComboBox

> ID：11921765
> 
> 赞同：0
> 
> 时间：2012-08-12T11:19:54.677
> 
> 标签：vb.net, datagridview, datagridtemplatecolumn, datagridcomboboxcolumn, datagridviewcomboboxcell

我有一个包含两列的未绑定 DataGridView。第一列只是字符串值。第二列我想显示一个组合框，只有当用户单击单元格时（而不是整个列作为 DataGridViewColumn）。我使用以下不正确的代码并给出错误：*操作无效，因为它导致对 SetCurrentCellAddressCore 函数的可重入调用。* 第一列已填充，第二列为空。

代码如下：

```
Private Sub DGVFieldsMap_CellEnter(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DGVFieldsMap.CellEnter
    If e.ColumnIndex = 1 Then
        If cboClmCell Is Nothing Then
            Dim dgv As DataGridView = CType(sender, DataGridView)
            cboClmCell = New DataGridViewComboBoxCell
            cboClmCell.Items.Add("A")
            cboClmCell.Items.Add("B")
            cboClmCell.Items.Add("C")
            cboClmCell.Items.Add("D")
            cboClmCell.Items.Add("E")
            cboClmCell.Items.Add("F")
            dgv.Focus()
            dgv(e.ColumnIndex, e.RowIndex) = cboClmCell '[Error Here]
            isCombo = True
        End If
    End If
End Sub

Private Sub DGVFieldsMap_CellValidating(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellValidatingEventArgs) Handles DGVFieldsMap.CellValidating
        If e.ColumnIndex = 1 Then
            Dim dgv As DataGridView = CType(sender, DataGridView)
            If isCombo Then
                isCombo = False
                cboClmCell = Nothing
                dgv(e.ColumnIndex, e.RowIndex) = New DataGridViewTextBoxCell()
            End If
        End If
End Sub 
```

谁能给我一个包含两列的完整工作示例，第二列是 ComboBoxCell，但仅在用户单击时。我还需要在 DataGridView 单元格中获取选定的值。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:57:42.790

我有一个类似的 DataGridView，其中第一列是文本标签，第二列是 ComboBox。

注意：下面的代码是 C# 中的，但概念与 vb.net 中的相同

在表单的加载事件中，调用设置数据源并创建列的函数

```
private void frmCfgEdit_Load(object sender, EventArgs e)
{
    // Fill CFG Data Grid
    FillCfgDataGrid();
}

 private void FillCfgDataGrid()
 {

    // Do not automatically generate the columns based on the datasource public fields
    dgCFG.AutoGenerateColumns = false;

    // Define data source
    dgCFG.DataSource = _pDriveElement.CfgTableViewRecs;

    // Define data grid columns 
    SetUpCFGDataGrid(dgCFG);
 }

 public void SetUpCFGDataGrid(DataGridView dgCFG, String TableIdentifier)
 {
    // Create datagridview text column
    AddGridColumn(dgCFG,  "Label", "CfgLabel", 350, typeof(System.String), true, false);
    // Create datadridview combobox column
    AddGridComboColumn(dgCFG,  "Value",  350, typeof(System.String), false, true);

 }

 public void AddGridColumn(DataGridView dg, String sHeaderText, String sDataPropertyName, int iWidth, Type tyValueType, bool bReadOnly, bool bLastCol)
 {
     DataGridViewTextBoxColumn colTxt = new DataGridViewTextBoxColumn();
     colTxt.HeaderText = sHeaderText;
     colTxt.Width = iWidth;
     colTxt.ReadOnly = bReadOnly;

     // Add the text box to the data grid
     dg.Columns.Add(colTxt);
     int iColumn = dg.Columns.Count - 1;

     // Define bindings to text columns
     dg.Columns[iColumn].DataPropertyName = sDataPropertyName;
     dg.Columns[iColumn].ValueType = tyValueType;
     if (tyValueType == typeof(System.Single))    dg.Columns[iColumn].DefaultCellStyle.Format = "F6";
        if (bLastCol) dg.Columns[iColumn].AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill;
        if (iColumn > 0) dg.Columns[iColumn].DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleCenter;
 }

 public void AddGridComboColumn(DataGridView dg, String sHeaderText,  int iWidth, Type tyValueType, bool bReadOnly, bool bLastCol)
 {
     DataGridViewComboBoxColumn cb = new DataGridViewComboBoxColumn();
     cb.FlatStyle = FlatStyle.Flat;
     cb.HeaderText = sHeaderText;
     cb.Width = iWidth;
     cb.ReadOnly = bReadOnly;
     dg.Columns.Add(cb);
     int iColumn = dg.Columns.Count - 1;

     // Combo box is always left aligned
     dg.Columns[iColumn].DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleLeft;

     if (bLastCol) dg.Columns[iColumn].AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill;

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:45:09.883

不要尝试替换事件处理程序中的列，而是创建一个包含 2 列的 DataGridView，让第 2 列成为您的 DataGridViewComboBoxColumn。该列上有一个名为“DisplayStyle”的属性，它决定了该列在不编辑时的外观。将其设置为“无”。现在它看起来像一个文本框，直到您进入编辑模式，此时它看起来像一个组合框。

# java - 如果我想使用 Maven，是否需要安装 ADT 插件？

> ID：11921769
> 
> 赞同：1
> 
> 时间：2012-08-12T11:21:19.527
> 
> 标签：java, android, maven

如果我想使用 maven 构建所有项目，是否需要将 ADT 插件下载并安装到 Eclipse 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:01:49.687

您也许可以仅依靠 maven 来构建您的项目，但您会错过调试工具、Android 特定的编辑器、模拟器、ADB shell...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T21:36:00.543

对于一个 mavenized android 项目，如果您正在谈论从命令行构建项目，例如，[从 GitHub 中查看一些项目](https://github.com/jayway/maven-android-plugin-samples/tree/master/helloflashlight)并执行一个`mvn clean install`，您只需要安装和设置：

*   安卓 SDK
*   马文

如果您在 Eclipse 之类的 IDE 中开发/构建项目，除了 Android SDK 和 Maven，您还需要以下 Eclipse 插件（均可通过 Eclipse Marketplace 获得），以便在 Eclipse 中创建/导入和处理 mavenized android 项目：

*   广告
*   m2e（Eclipse 的 Maven 集成）
*   m2e-android（用于 M2E 的 Android 配置器）

[在此处](https://stackoverflow.com/questions/11023252/how-do-you-install-m2e-android-plugin-in-eclipse/11023584#11023584)查看答案并查看已安装的 Eclipse 插件的屏幕截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T12:38:28.343

ADT 插件是必需的，因为它拥有 API，尽管我不熟悉 maven。安装 android ADT 来获取这些 API 可能是个好主意。ADT 中还包括构建应用程序所需的系统映像和 java 文件。

正如我所说我不熟悉 maven 但我仍然建议安装 android ADT

# ocaml - 在 OCaml 中打印当前调用堆栈

> ID：11921779
> 
> 赞同：10
> 
> 时间：2012-08-12T11:22:32.397
> 
> 标签：ocaml

OCaml 中有没有办法以编程方式获取当前调用堆栈？我的意思不是在调试器内部，而是作为程序内部的函数调用，它将打印当前调用堆栈。我想这不应该超出字节码解释器的能力，尤其是在调试符号可用的情况下。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-06-29T18:57:00.563

我来到这个问题寻找同样的东西，这是我的解决方案

`Printexc.get_callstack 5 |> Printexc.raw_backtrace_to_string`

（这实际上是熟悉新代码库的好方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:12:19.943

你也可以使用 ocamldebug，你可以用它来启动你的代码，编译成字节码。在这种环境下，Printexc.get_backtrace() 就更完善了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:42:48.073

不幸的是，从代码内部获取回溯的唯一方法是在引发异常时，然后可以使用 Printexc.get_backtrace ()。它不会给你函数的名称，只是堆栈中代码中的位置，只有当 OCaml 能够恢复它们时......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:17:22.760

对于本机代码，可以使用 glibc 的[backtrace](http://extunix.forge.ocamlcore.org/api/ExtUnix.All.html#VALbacktrace)，尽管它可能无法正确打印所有堆栈帧。

# java - 如何创建一个mysql“sha-256”列？

> ID：11921780
> 
> 赞同：6
> 
> 时间：2012-08-12T11:22:39.170
> 
> 标签：java, mysql, encryption, sha256

对于密码列，是否有 mysql 功能来存储使用“sha-256”散列的密码？或者我应该从java代码中对它进行哈希处理（比如[How to hash some string with sha256 in Java?](https://stackoverflow.com/questions/5531455/how-to-encode-some-string-with-sha256-in-java?rq=1)），然后再将其存储在数据库中，然后每次对密码输入进行哈希处理并与数据库列值进行比较以进行身份​​验证？

TIA。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T11:24:31.490

您可以将值转换为十六进制并使用具有适当长度的 char(n) 列 - 在这种情况下为 64。转换可以在 MySQL 中使用设置为 256的[`sha2`](http://dev.mysql.com/doc/refman/5.6/en/encryption-functions.html#function_sha2)函数完成。`hash_length`

但出于安全原因，您不应存储使用 SHA-256 散列的密码。

而是使用[bcrypt](http://codahale.com/how-to-safely-store-a-password/)或[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)。

**有关的**

*   [如何在 Java 中散列密码？](https://stackoverflow.com/questions/2860943/suggestions-for-library-to-hash-passwords-in-java)

# dns - DNS：权威与动态，我可以将所有请求动态转发到权威名称服务器吗

> ID：11921781
> 
> 赞同：0
> 
> 时间：2012-08-12T11:22:43.657
> 
> 标签：dns, web-hosting, nameservers, dyndns

好吧，简而言之，为了我自己的原因，我正在尝试“构建”一个从我的网络服务器所在的位置/公司提取我的 DNS 的解决方案。我需要能够为我的域动态更改 DNS。我在网络服务器上为网络服务器设置了名称服务器。我基本上想知道我是否可以指出我的域注册 DNS 详细信息，比如 DYN.com 动态 DNS 地址，并设置该动态地址以将所有流量转发到我的网络服务器上的名称服务器。

这样，如果需要，我可以立即将 dyndns“指针”更改为任何其他网络服务器/名称服务器。

PS 我知道动态地址可能不起作用，如果我必须使用 DYN 进行付费服务，那很好，但我不想在 DYN 上创建所有记录。我只是希望它将任何请求转发到网络服务器上名称服务器的实际 IP。

IE

域 NS1 -> Dyn.com 记录 1（无特定域记录）-> ns1.mywebserver.com

域 NS2 -> Dyn.com 记录 2（无特定域记录）-> ns2.mywebserver.com

这可以实现吗，如果没有，您是否得到我想要做的事情，还有其他方法可以做到这一点吗？

理想情况下，我**不想**在某处创建专用的 linux VM 来管理 DNS。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:28:28.197

我认为我在这个问题之后发布的另一个问题解决了这个问题。

[绑定。注册商说它找不到名称服务器。nslookup 显示域正在由 bind 处理](https://stackoverflow.com/questions/11925338/bind-registrar-says-it-cant-find-the-nameserver-nslookup-shows-the-domain-is/11925475#11925475)

干杯

# java - Java - 分配的空间没有减少

> ID：11921783
> 
> 赞同：2
> 
> 时间：2012-08-12T11:22:52.280
> 
> 标签：java, ram

我正在开发一个 Java 应用程序，它有时会做一些繁重的工作。
在这种情况下，它会使用比平时更多的内存，因此应用程序分配的内存空间会增加。

我的问题是为什么工作完成后分配的空间没有减少？
使用分析器，我可以看到例如分配了 70mb，但只使用了 5mb！看起来分配的空间只能增长，不能缩小。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:36:26.050

通常，JVM 在释放已分配的内存时非常严格。不过，您可以将其配置为更积极地释放。尝试在启动程序时将这些设置发送到 JVM：

```
-XX:GCTimeRatio=5

-XX:AdaptiveSizeDecrementScaleFactor=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:08:40.867

JVM 决定何时将内存释放回操作系统。根据我使用 Windows XP 的经验，这几乎不会发生。有时，当命令提示符（或 Swing 窗口）最小化时，我似乎会释放内存。我相信 Linux 上的 JVM 更擅长返回内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T11:44:32.610

一般可能有2个原因。

可能您的程序存在内存管理问题。例如，如果您将一些对象存储在集合中并且从不从集合中删除这些对象，则它们将永远不会被垃圾回收。如果是这种情况，您有一个应该找到并修复的错误。

但可能你的代码没问题，但 GC 仍然不会删除不常用的对象。这样做的原因是 GC 过着自己的生活并决定自己的决定。例如，如果它认为它有足够的内存，它不会删除已使用的对象，直到内存使用量达到某个阈值。

要识别您在此处遇到的情况，请尝试以`System.gc()`编程方式或使用分析器调用（通常分析器具有运行 GC 的按钮）。如果在强制 GC 运行您的代码后删除使用的对象是可以的。否则尝试定位错误。您已经在使用的 Profiler 应该可以帮助您。

# c# - 如何检查新日志基础设施的性能

> ID：11921785
> 
> 赞同：0
> 
> 时间：2012-08-12T11:23:24.237
> 
> 标签：c#, .net, logging, inversion-of-control, log4net

我想替换我们当前的日志记录并使用每个方法上方`PolicyInjection`的`[Log]`属性。

我想记录每种方法的入口和出口。

我有两个要求，希望得到您的建议：

1.  性能检查 - 我应该怎么做？如果我写一个 POC，那将没有压力检查。有没有现成的创造性方法来检查日志记录性能？

2.  确保日志级别不需要重新启动应用程序 - 可能吗？我只知道更改 web.config 中的配置会导致应用程序重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:17:39.653

至于 (2) Log4net config 做的工作。无需重新启动应用程序即可更改

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4netConfig.config", Watch = true)] 
```

# spring-security - Spring Security 注销重定向到注销成功，然后立即到无效会话页面

> ID：11921786
> 
> 赞同：4
> 
> 时间：2012-08-12T11:23:28.323
> 
> 标签：spring-security

根据帖子[Spring Security: Redirect to invalid-session-url 而不是 logout-success-url 成功注销](https://stackoverflow.com/questions/2601013/spring-security-redirect-to-invalid-session-url-instead-of-logout-success-url-o)，当注销会话时 Spring Security 重定向到用户定义的 invalid-session-url。

```
<session-management invalid-session-url="/invalidSession.jsp">
    <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
</session-management> 
```

**但是**，如果设置了注销成功 url

```
<logout invalidate-session="true" 
            logout-success-url="/logoutSuccess.jsp" 
            logout-url="/logout" /> 
```

Spring 在重定向到 logout-success url 后仍然会重定向到无效的 session URL。即使 logoutSuccess url 不安全，也会发生这种情况。IE，

```
<intercept-url pattern="/logoutSuccess.jsp*" access="permitAll"/> 
```

**这是春天的错误吗？由于 logout-success-url 已设置且不安全，因此在到达注销成功 url 后，似乎不应将用户重定向到无效的会话 url。**

日志如下所示：

```
INFO: [DEBUG,SimpleUrlLogoutSuccessHandler] Using default Url: /logoutSuccess.jsp
INFO: [DEBUG,DefaultRedirectStrategy] Redirecting to '/Application/logoutSuccess.jsp'
INFO: [DEBUG,HttpSessionSecurityContextRepository] SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
INFO: [DEBUG,SecurityContextPersistenceFilter] SecurityContextHolder now cleared, as request processing completed
INFO: [DEBUG,FilterChainProxy] /logoutSuccess.jsp at position 1 of 10 in additional filter chain; firing Filter: 'ConcurrentSessionFilter'
INFO: [DEBUG,FilterChainProxy] /logoutSuccess.jsp at position 2 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
INFO: [DEBUG,HttpSessionSecurityContextRepository] No HttpSession currently exists
INFO: [DEBUG,HttpSessionSecurityContextRepository] No SecurityContext was available from the HttpSession: null. A new one will be created.
INFO: [DEBUG,FilterChainProxy] /logoutSuccess.jsp at position 3 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
INFO: [DEBUG,FilterChainProxy] /logoutSuccess.jsp at position 4 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
INFO: [DEBUG,FilterChainProxy] /logoutSuccess.jsp at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
INFO: [DEBUG,FilterChainProxy] /logoutSuccess.jsp at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
INFO: [DEBUG,FilterChainProxy] /logoutSuccess.jsp at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
INFO: [DEBUG,AnonymousAuthenticationFilter] Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
INFO: [DEBUG,FilterChainProxy] /logoutSuccess.jsp at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
INFO: [DEBUG,SessionManagementFilter] Requested session ID a396530a530b344ff531ab657e32 is invalid.
INFO: [DEBUG,SimpleRedirectInvalidSessionStrategy] Starting new session (if required) and redirecting to '/invalidsession.jsp'
INFO: [DEBUG,HttpSessionEventPublisher] Publishing event: org.springframework.security.web.session.HttpSessionCreatedEvent[source=org.apache.catalina.session.StandardSessionFacade@564c4200]
INFO: [DEBUG,DefaultRedirectStrategy] Redirecting to '/Application/invalidsession.jsp' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T13:04:13.773

这在[参考手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-session-mgmt)中有说明。

总而言之，“无效会话”功能是基于提交的会话 cookie 的有效性，所以如果您在登出后访问该站点（或更具体地，安全过滤器链），并且您仍然有一个`JSESSIONID`cookie，您可能会触发这种不良行为。

如手册同一部分所述，您可以尝试使用

```
<logout invalidate-session="true" 
        logout-success-url="/logoutSuccess.jsp" 
        logout-url="/logout" delete-cookies="JSESSIONID" /> 
```

注销时删除cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:03:03.040

您必须小心，有时将用户可以拥有的有限数量的会话一起使用，即使在您注销后尝试登录时，也可能会`invalidate-session='true'`出现“**超出此主体的最大会话数 1”错误。**`delete-cookies=JSESSIONID`

 **当您使用 Spring Security 3.1 及更高版本时，建议仅使用**Delete-cookies删除必要的会话信息。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-10T15:27:12.597

如下配置注销以删除安全配置 WebSecurityConfigurerAdapter 类中的 cookie。

```
 @Override
protected void configure(HttpSecurity httpSecurity) throws Exception {
    //set access to all pages including session time out page where session time out is set in the application.properties page
       httpSecurity
            .authorizeRequests().antMatchers("/","/products","/product/show/*","/session","/console/*","/h2-console/**").permitAll()
            .anyRequest().authenticated()
            .and()
            .formLogin().loginPage("/login").permitAll()
            .and()
            .logout().permitAll();
       //delete cookies so it won't get forwarded to session out page
       httpSecurity.logout().deleteCookies("auth_code", "JSESSIONID").invalidateHttpSession(true);                          

    httpSecurity.csrf().disable();
    httpSecurity.headers().frameOptions().disable();
   httpSecurity.sessionManagement().invalidSessionUrl("/session");
} 
```

最后在会话到期转发页面中手动删除 cookie

```
 @RequestMapping("/session")
String session(HttpServletRequest request,HttpServletResponse response){
    SecurityContextHolder.clearContext();
    HttpSession session= request.getSession(false);
    Cookie[] cookies = request.getCookies();
    // Delete all the cookies
    if (cookies != null) {
             for (int i = 0; i < cookies.length; i++) {
            Cookie cookie = cookies[i];
            cookies[i].setValue(null);
            cookies[i].setMaxAge(0);
            response.addCookie(cookie);
        }
    }
    SecurityContextHolder.clearContext();
    if(session != null) {
        session.invalidate();
    }
    return "session";
} 
```**

# jquery-mobile - 适用于 Android 的 Phonegap 推送通知

> ID：11921790
> 
> 赞同：1
> 
> 时间：2012-08-12T11:23:46.907
> 
> 标签：jquery-mobile, cordova, push-notification

我正在使用 Phonegap 和 jQuery Mobile 为 Android 构建一个应用程序。我想实现推送通知，我发现了一些方法，例如：[Urban-Air](http://minimoesfuerzo.org/2011/06/6/urban-airship-10-integration-android-phonegap-app/) & [Phonegap Plugins](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification)

但他们似乎不支持 Cordova 1.9... 那么我可以使用其他新版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:47:21.987

您可以尝试从 Pushwoosh 推送 SDK：http://pushwoosh.com [，](http://pushwoosh.com)它们是免费的并且已经支持 Cordova 1.9 和 GCM（与 UrbanAirship 不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:21:29.210

Urban Airship 如果付费服务和提供的插件仅适用于 iOS……Android 现在使用[CGM](http://developer.android.com/guide/google/gcm/index.html)来传递 PUSH 通知。

由于 CGM 是相当新的并且它之前是[C2DM](https://developers.google.com/android/c2dm/)，因此我手边没有任何 CGM 手册，但也许我拥有的这段代码可以帮助您开始开发：

**主应用 JAR 文件：**

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // register for PUSH notifications - you will need a registered Google e-mail for it
    C2DMessaging.register(this /*the application context*/, DeviceRegistrar.SENDER_ID);
    super.loadUrl("file:///android_asset/www/index.html");
} 
```

**DeviceRegistrar.java**

```
package YOURPACKAGE;

import android.content.Context;
import android.util.Log;

public class DeviceRegistrar {
    public static final String SENDER_ID = "YOUR-GOOGLE-REGISTERED-EMAIL";
    private static final String TAG = "YOUR_APP_NAME";
    // just so you can work with the registration token from C2DM
    public static String token;

    public static void registerWithServer(Context context, String registrationId)
    {
        token = registrationId;
        // insert code to supplement this device registration with your 3rd party server
        Log.d(TAG, "successfully registered, ID = " + registrationId);
    }

    public static void unregisterWithServer(Context context, String registrationId)
    {
        // insert code to supplement unregistration with your 3rd party server
        Log.d(TAG, "succesfully unregistered with 3rd party app server");
    }
} 
```

**C2DMReceiver.java**（您将需要[c2dm.jar 文件](http://code.google.com/p/cloud-tasks-io/source/browse/trunk/CloudTasks-Android/lib/?r=5)并将其添加到您的库中）

```
package YOURPACKAGE;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.Vibrator;
import android.util.Log;

import com.google.android.c2dm.C2DMBaseReceiver;
import com.google.android.c2dm.C2DMessaging;

public class C2DMReceiver extends C2DMBaseReceiver 
{
    public static final String TAG = "YOUR_APP_NAME";
    public static String lastMessage = "";
    public static List<Integer> lastNotifications = new ArrayList<Integer>();
    public static Boolean isForegrounded = true;

    public C2DMReceiver()
    {
        //send the email address you set up earlier
        super(DeviceRegistrar.SENDER_ID);
    }

    @Override
    public void onRegistered(Context context, String registrationId) throws IOException 
    {
        Log.d(TAG, "successfully registered with C2DM server; registrationId: " + registrationId);
        DeviceRegistrar.registerWithServer(context, registrationId);
    }

    @Override
    public void onError(Context context, String errorId) 
    {
        //notify the user
        Log.e(TAG, "error with C2DM receiver: " + errorId);
        if ("ACCOUNT_MISSING".equals(errorId)) {
            //no Google account on the phone; ask the user to open the account manager and add a google account and then try again
            //TODO  
            } else if ("AUTHENTICATION_FAILED".equals(errorId)) {
                //bad password (ask the user to enter password and try.  Q: what password - their google password or the sender_id password? ...)
                //i _think_ this goes hand in hand with google account; have them re-try their google account on the phone to ensure it's working
                //and then try again
                //TODO  
            } else if ("TOO_MANY_REGISTRATIONS".equals(errorId)) {
                //user has too many apps registered; ask user to uninstall other apps and try again
                //TODO  
            } else if ("INVALID_SENDER".equals(errorId)) {
                //this shouldn't happen in a properly configured system
                //TODO: send a message to app publisher?, inform user that service is down  
            } else if ("PHONE_REGISTRATION_ERROR".equals(errorId)) {
                //the phone doesn't support C2DM; inform the user
                //TODO  
            } //else: SERVICE_NOT_AVAILABLE is handled by the super class and does exponential backoff retries
        }
    }

    @Override
    protected void onMessage(Context context, Intent intent) 
    {
        Bundle extras = intent.getExtras();
        if (extras != null) {
            //parse the message and do something with it.
            //For example, if the server sent the payload as "data.message=xxx", here you would have an extra called "message"
            String message = extras.getString("message");
            Log.i(TAG, "received message: " + message);
        }
    }
} 
```

# android - 删除选项卡时在 ActionBar 选项卡片段中运行代码

> ID：11921791
> 
> 赞同：0
> 
> 时间：2012-08-12T11:23:48.103
> 
> 标签：android, tabs, android-actionbar

我有 Fragment ActionBar 选项卡，每个选项卡都附加了一个 TabListener。在我的主要活动中，我得到了一个删除选项卡按钮，如下所示：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()
        case R.id.closeTab:
            closeTab();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

public void closeTab() {
    if(getActionBar().getTabCount() > 1) {
            Tab tab = getActionBar().getSelectedTab();
            getActionBar().removeTab(tab);
    }
} 
```

我想要完成的是在我的标签片段被删除之前运行一些代码。我可以将它放在片段中，`onDestroyView()`或者`onDestroy()`但我只想在按下删除选项卡按钮时运行此代码。我已经检查了文档，`TabListener`但似乎 TabListener 只听 selectionchanges。我的 TabListener：

```
public TabListener(Activity a, String t, Class<T> c) {
    activity = a;
    tag = t;
    myClass = c;
}

/* The following are each of the ActionBar.TabListener callbacks */
public void onTabSelected(Tab tab, FragmentTransaction ft) { 
    // Check if the fragment is already initialized
    if (fragment == null) {
        // If not, instantiate and add it to the activity
        fragment = Fragment.instantiate(activity, myClass.getName());           
        ft.add(android.R.id.content, fragment, tag);

    } else {
        // If it exists, simply attach it in order to show it
        ft.attach(fragment);
    }
}

public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    if (fragment != null) {
        // Detach the fragment, because another one is being attached
        ft.detach(fragment);
    }
}

public void onTabReselected(Tab tab, FragmentTransaction ft) {
} 
```

**为了澄清我的问题**：如何在标签被删除之前在我的片段中运行代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:00:14.450

好的，我在阅读这篇文章后想通了：[链接](https://stackoverflow.com/a/11443292/1168301)。在我的片段中，我放了`setHasOptionMenu(true)`

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setHasOptionsMenu(true); 
} 
```

然后我可以添加`onOptionsItemSelected`我的片段。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
// Handle item selection
switch (item.getItemId()) {
    case R.id.closeTab:
        closeTab();                
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

public void closeTab() {
    ActionBar actionBar = getActivity().getActionBar();
    if(actionBar.getTabCount() > 1) {
            Tab tab = actionBar.getSelectedTab();
            actionBar.removeTab(tab);
            Log.d(TAG, "CLOSED TAB");
    }
} 
```

# c# - 正则表达式命名组问题

> ID：11921792
> 
> 赞同：1
> 
> 时间：2012-08-12T11:23:51.267
> 
> 标签：c#, .net, html, regex

我有这段 HTML：

```
</TABLE>
<HR>
<font size="+1"> Method and apparatus for re-sizing and zooming images by operating directly
     on their digital transforms
</font><BR> 
```

我正在尝试捕获`font`标签内的文本。这是我的正则表达式：

```
 Regex regex = new Regex("</TABLE><HR><font size=\"+1\">(?<title>.*?)</font><BR>", RegexOptions.Singleline | RegexOptions.IgnoreCase);

        Match match = regex.Match(data);

        string title = match.Groups["title"].Value; 
```

但是我得到空标题。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:07:25.577

你的正则表达式；

```
new Regex("</TABLE><HR><font size=\"+1\">(?<title>.*?)</font><BR>" 
```

格式不正确，因为`+`在正则表达式中有不同的含义。

根据您的输入字符串，您真正想要的是将其转义；

```
new Regex("</TABLE><HR><font size=\"\\+1\">(?<title>.*?)</font><BR>" 
```

另外，如果你想用换行符匹配字符串，你也必须给一个通配符来忽略它们，所以这可能是你想要做的更多；

```
new Regex("</TABLE>.*<HR>.*<font size=\"\\+1\">(?<title>.*?)</font>.*<BR>" 
```

# uiwebview - 使用“loadHtmlString”或“loadRequest”将本地数据加载到 WebView 中？

> ID：11921793
> 
> 赞同：2
> 
> 时间：2012-08-12T11:23:51.723
> 
> 标签：uiwebview, xamarin.ios

我正在将 WebView 作为 RichTextEditor 进行测试。我注意到有 3 种方法可以将数据加载到其中，所以我用谷歌搜索找出它们之间的差异，但没有找到明确的答案。有人可以给我一些见解吗？

我是否认为最好`loadHtmlString`用于本地内容和`loadRequest`网络内容？

谢谢你的支持！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:24:34.160

[MonoTouch](http://api.xamarin.com/?link=T%3aMonoTouch.UIKit.UIWebView)文档中有三个方法（见页面底部），它们非常清楚地说明了这三种方法。

*   LoadData() - 加载非 HTML 数据，可以指定 MIME 类型
*   LoadRequest() - 使用异步 HTTP 请求加载内容
*   LoadHTMLData() - 加载一个 HTML 字符串

# jquery - 带有铬的滞后滚动

> ID：11921794
> 
> 赞同：1
> 
> 时间：2012-08-12T11:23:55.457
> 
> 标签：jquery, html, css, ajax, google-chrome

我有一个带有溢出自动的 div，它在 FF 和 Safari 中完美滚动，但在 chrome 中滞后。它非常慢，几乎被赌注了，我真的不明白为什么。当我加载一些画廊（通过ajax）时出现问题。我试图停止一些脚本，看看这是否是没有结果的问题。谁能帮帮我吗？这是网站[http://www.dinofattorini.it](http://www.dinofattorini.it)，点击 PORTFOLIO，然后点击 GALLERY 1#，您会看到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:07:39.500

我也遇到过类似的问题。我相信部分问题是您对图像使用 AJAX。如果您可以最小化您的 AJAX，而是使用 html 加载图像，它可能会快很多。

此外，正如 Stano 所说，缩略图生成器可能会有很大帮助。

祝你好运，

-布赖恩

# php - php 从 ftp 服务器获取文件并显示保存文件对话框

> ID：11921796
> 
> 赞同：0
> 
> 时间：2012-08-12T11:24:19.233
> 
> 标签：php, ftp

我有一个在 apache 服务器上运行的 php 页面和一个在另一台机器上存储文件的 ftp 服务器。无法从外部访问 ftp 服务器。

我希望当用户单击我网页上的按钮时，php 服务器连接到 ftp 服务器，检索文件并显示另存为对话框，以便用户可以存储它。

任何帮助表示赞赏，拉杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-18T13:44:27.220

给你..在download.php中写这个

```
$file = 'location/of/your/file.ext';
readfile($file);
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=".$file);
header("Content-Type: application/zip");
header("Content-Transfer-Encoding: binary"); 
```

这应该工作:)

# mysql - mysql：如何避免两次保存相同的数据？

> ID：11921798
> 
> 赞同：1
> 
> 时间：2012-08-12T11:25:18.563
> 
> 标签：mysql, database-design, data-modeling

我制作了一个投票系统并将投票记录在投票表中，如下所示：

```
post_id | user_id | votes | date 
```

然后，我将此投票添加到具有如下结构的用户元表中：

```
user_id | meta_key | meta_value 
```

在这个表中，给一个 user_id 的 meta_key 为“votes”，我可以保存或获取一个 post_ids 数组作为 meta_value。

我在两张桌子上保存一票的原因是——

## 1\. 为什么要使用投票表？

我需要计算所有帖子的 vote_total 和 vote_popularity，如果我只将它保存为用户元表中的数组元素，这并不容易。

## 2\. 为什么要使用用户元表？

我需要检查用户是否已经为帖子投票。用户元数据一旦设置就会被缓存。所以，我只需要检查 in_array($post_id, $my_voted_posts)。如果没有用户元表，对于用户访问的每个帖子，我将不得不检查投票表。

## 有没有更好的办法？

虽然我的投票系统运行良好。但不知何故，我觉得这不是有效的方法。我想咨询您的专业人士，了解如何改进它以获得更好的性能。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:15:32.467

首先，如果您有一个有效的索引，我认为检查投票表就可以了。您可以使用[复合索引](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)来索引`post_id`和`user_id`，这将使查询具有`select * from votes where post_id = X and vote_id = Y`相当的性能。

会有一点需要对数据进行非规范化以提高速度，但我认为它不应该与规范化数据位于同一层。也许您可以将 redis / memcache 用于用户元数据？

# facebook-like - 无法通过 Facebook 应用发布内置操作

> ID：11921799
> 
> 赞同：0
> 
> 时间：2012-08-12T11:25:22.173
> 
> 标签：facebook-like, facebook-apps, built-in

嗨，我最近一直在处理 Facebook 应用程序和操作，但它似乎对我不起作用。现在我听说点赞的社交按钮即将迁移，我什至不知道如何通过我创建的应用程序（这是一个网站应用程序）发布点赞内置操作。我从这里采取的发布操作的代码：[https](https://developers.facebook.com/docs/opengraph/tutorial/) ://developers.facebook.com/docs/opengraph/tutorial/这就是他们所说的：

```
 <head prefix="og: http://ogp.me/ns# [YOUR_APP_NAMESPACE]: 
              http://ogp.me/ns/apps/[YOUR_APP_NAMESPACE]#">
  <title>OG Tutorial App</title>
  <meta property="fb:app_id" content="[YOUR_APP_ID]" /> 
  <meta property="og:type" content="[YOUR_APP_NAMESPACE]:recipe" /> 
  <meta property="og:title" content="Stuffed Cookies" /> 
  <meta property="og:image" content="http://fbwerks.com:8000/zhen/cookie.jpg" /> 
  other metatag properties etc. 
  <script type="text/javascript">
     function postCook()
   {
       FB.api(
       '/me/[YOUR_APP_NAMESPACE]:cook',
       'post',
       { recipe: 'http://fbwerks.com:8000/zhen/cookie.html' },
       function(response) {
         if (!response || response.error) {
          alert('Error occured');
         } else {
          alert('Cook was successful! Action ID: ' + response.id);
       }
      });
 }
  </script>
</head>
<body>
 <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
     FB.init({
       appId      : '[YOUR_APP_ID]', // App ID
       status     : true, // check login status
       cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
       });
     };

    // Load the SDK Asynchronously
     (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document));
  </script>

 etc  etc.

 <form>
   <input type="button" value="Cook" onclick="postCook()" />
  </form>

   <fb:activity actions="[YOUR_APP_NAMESPACE]:cook"></fb:activity> 
```

事实是我无法发布任何操作（返回错误），当然我的应用程序具有我要发布的操作。有没有人有线索？我不是专业的开发人员，但我问的那些没有解决方案......非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:58:55.347

我发现了问题！显然 PHP 中的 include 函数使我们在网站上使用的标题与 Facebook 元数据发生冲突。当我删除标题和“php start”时，所有功能（包括注释）都在工作。但这似乎仍然是一个特殊的问题：显然 Facebook 的 API 没有清除缓存，所以现在我们必须创建新页面来启用功能。无法将它们放在当前页面位置。

# asp.net - 为什么我不能从 APP_CODE 文件夹访问 Global.asax 中的（静态）方法或属性？

> ID：11921801
> 
> 赞同：1
> 
> 时间：2012-08-12T11:25:55.333
> 
> 标签：asp.net, global-asax

`Global.asax`我可以从`Asp.net`网页（.aspx）中访问该功能

（我已添加`ClassName="Global"`并将我的方法标记为`static`）

我无法`Global`从文件夹中的代码访问该类`APP_Code`？

为什么？？任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:30:25.267

尝试在 app_code 文件夹中的类中创建静态方法。您可以访问应用程序中的每个页面的静态方法。

顺便说一句[global.asax](http://msdn.microsoft.com/en-us/library/1xaas8a2%28v=vs.71%29.aspx)用于应用程序级事件..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T06:59:04.107

对我有用的是右键单击项目并将其卸载，然后编辑项目文件并添加：

```
<?xml version="1.0" encoding="utf-8"?>
<Project...>
    ...
    <ItemGroup>
        <Compile Include="App_Code\MyFile.cs" />
    </ItemGroup>
    ...
</Project> 
```

# c# - MonoTouch.Dialog RootElement 的自定义标题

> ID：11921802
> 
> 赞同：1
> 
> 时间：2012-08-12T11:26:02.037
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

我正在尝试使用 Monotouch.Dialog 构建菜单结构。该结构由多个嵌套的 RootElement 组成。

创建 RootElement 时，您在构造函数中设置标题。此标题用于表格单元格的文本以及单击它时跟随的视图中的标题。

我想将视图的标题设置为与元素名称不同的文本。

让我试着用一个简化的例子来说明我的意思。

结构：

```
- Item 1
  - Item 1.1
  - Item 1.2
- Item 2
  - Item 2.1 
```

创建此结构的代码：

```
[Register ("AppDelegate")]
public partial class AppDelegate : UIApplicationDelegate
{
    UIWindow _window;
    UINavigationController _nav;
    DialogViewController _rootVC;
    RootElement _rootElement;

    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        _window = new UIWindow (UIScreen.MainScreen.Bounds);

        _rootElement = new RootElement("Main");

        _rootVC = new DialogViewController(_rootElement);
        _nav = new UINavigationController(_rootVC);

        Section section = new Section();
        _rootElement.Add (section);

        RootElement item1 = new RootElement("Item 1");
        RootElement item2 = new RootElement("Item 2");

        section.Add(item1);
        section.Add(item2);

        item1.Add   (
                        new Section()
                        {
                            new StringElement("Item 1.1"),
                            new StringElement("Item 1.2")
                        }
                    );

        item2.Add (new Section() {new StringElement("Item 2.1")});

        _window.RootViewController = _nav;
        _window.MakeKeyAndVisible ();

        return true;
    }
} 
```

单击项目 1 时，将显示标题为“项目 1”的屏幕。我想将标题“项目 1”更改为“类型 1 项目”。但是被点击的元素的文本应该保持为“Item 1”。

处理此问题的最佳方法是什么？

如果我能做这样的事情会很好：

```
RootElement item1 = new RootElement("Item 1", "Type 1 items"); 
```

我已经尝试获取 DialogViewController（请参阅[这篇](https://stackoverflow.com/questions/8545466/have-a-dedicated-uiviewcontroller-for-each-rootelement-in-monotouch-dialog)文章）并设置它的标题。但我没能让它正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T16:03:05.827

您可以创建 RootElement 的子类，它会覆盖 GetCell 的返回值，并在它是表格视图的一部分时更改要呈现的文本：

```
 class MyRootElement : RootElement {
      string ShortName;

      public MyRootElement (string caption, string shortName)
          : base (caption)
      {
          ShortName = shortName;
      }

      public override UITableViewCell GetCell (UITableView tv)
      {
           var cell = base.GetCell (tv);
           cell.TextLabel.Text = ShortName;
           return cell;
      }
 } 
```

# php - 如何在 PHP 中执行单独的进程

> ID：11921805
> 
> 赞同：0
> 
> 时间：2012-08-12T11:26:55.177
> 
> 标签：php, process, exec

我想在 PHP 中运行要在后台运行的服务。我尝试过`exec()`在 PHP 中使用函数，但服务正在无限循环中运行，并且控制不会通过 PHP 文件返回。我在互联网上进行了更多搜索，但找不到解决方案。请给我一些想法或参考来完成这项任务。

这是我想要做的参考代码： -

```
echo"hello";
exec("raintree.frm");
echo"hello1"; 
```

`raintree.frm`是我想要执行的服务。`exec()`在这里，PHP 脚本在浏览器上打印“hello”，但由于控制卡在函数上，所以不会出现在“hello1”上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T11:37:03.893

如果您希望服务在单独的进程中运行，如标题所述，您需要创建新进程，然后在其中运行服务。在 PHP 中，您可以创建一个新进程[`pcntl_fork()`](http://php.net/manual/en/function.pcntl-fork.php)并在子进程中启动该服务。像这样的东西

```
echo "hello";
$pid = pcntl_fork();
switch($pid){
    case -1:    // pcntl_fork() failed
        die('could not fork');
    case 0:    // you're in the new (child) process
        exec("raintree.frm");
        // controll goes further down ONLY if exec() fails
        echo 'exec() failed';
    default:  // you're in the main (parent) process in which the script is running
        echo "hello1";
} 
```

有关更多说明，请阅读手册（上面的链接`pcntl_fork()`）以及查看有关主题（或者更确切地说是系统调用）`fork()`和`exec()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-28T20:35:52.723

您可以利用`atd`在单独的进程中运行任意命令：

```
shell_exec('echo code you want to run | at -m now'); 
```

为此，`atd`当然应该安装并运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-02T02:03:32.600

该`exec()`函数正在等待接收外部执行命令的输出。

为防止这种情况发生，您可以将输出重定向到其他地方：

```
<?php

echo 'hello1';
exec('raintree.frm > /dev/null &');
echo 'hello2'; 
```

此示例将输出“hello1hello2”而不等待`raintree.frm > /dev/null &`完成。

（这可能只适用于类 Unix 操作系统）

# php - 如何将变量附加到url的末尾？

> ID：11921810
> 
> 赞同：-3
> 
> 时间：2012-08-12T11:28:29.743
> 
> 标签：php, url, get

想知道如何`anchor`将一个变量添加到一个的末尾`URL`？

所以类似的东西`/?filter=1`会变成`/?filter=1&p=1`

干杯

编辑：

如果有人感兴趣，我找到了我自己的解决方案，格式如下，它是动态的，不需要编辑！:)

```
//CREATE LINKS BASED ON CURRENT VARIABLES
//REMOVE PARAMETERS WHICH WON'T APPEAR TWICE
    $v = array("p");
    foreach($v as $i) {unset($_GET[$i]);}
    $uri = http_build_query($_GET);
    #if there is a current variable, add & to link
    $uri .= count($_GET)>0 ? "&" : NULL; 
```

并且您的链接将被格式化为：

```
echo "<a href='?".$uri."p=$x'>$x</a>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:48:35.443

您可以按照您的建议继续在 URL 的末尾添加参数：

```
www.example.com/?one=1&two=2&three=3 
```

然后这些将分别作为`$_GET["one"]`和可用。`$_GET["two"]``$_GET["three"]`

# git - 仅当在存储库中发现更改时才定期构建项目

> ID：11921811
> 
> 赞同：7
> 
> 时间：2012-08-12T11:28:31.797
> 
> 标签：git, continuous-integration, jenkins, sonarqube

我有以下设置处于活动状态并且正在工作：

*   Jenkins 与 Git 和 Sonar 插件
*   `project`每分钟轮询 Git 的一项 jenkins 作业 ( )
*   一项 jenkins 工作 ( `project-sonar`) 每 24 小时轮询一次 git

两个作业共享同一个 git 存储库。

这允许我为每次提交构建我的项目，然后每天，只有当项目发生变化时，才运行声纳分析。

我最近设置了 git 存储库，以便在项目发生更改时根据[来自存储库的推送通知](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin#GitPlugin-Pushnotificationfromrepository)向 Jenkins 发送通知。这会立即构建两个项目，但我只想`project`构建快速 ( ) 作业。如果我`project-sonar`定期移动要构建的，即使没有代码更改也会运行声纳分析，这很浪费。

我怎样才能保留

*   立即构建`project`构建
*   每日`project-sonar`构建

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:01:54.553

我实现了一些非常类似于您正在使用詹金斯的“运行条件”插件看到的东西。 [https://wiki.jenkins-ci.org/display/JENKINS/Run+Condition+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Run+Condition+Plugin)

我将声纳工作作为轮询/构建/测试工作的后续工作，并附有条件，因此它每天只运行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:52:51.597

我已经使用以下方法解决了这个问题：

1.  所有 jenkins 项目都以其 git 存储库命名（我使用 gitolite ）
2.  我只为基础*构建远程激活了触发构建*
3.  我`post-receive`在 gitolite 中添加了一个钩子，它执行类似的操作

    `$CURL --silent --netrc --insecure --connect-timeout 2 "$GIT_REMOTE_TRIGGER_URL/$GL_REPO/build?token=$JENKINS_BUILD_TOKEN" > /dev/null`

4.  安排所有声纳作业每 24 小时轮询一次 SCM

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-13T17:09:46.847

我有我的常规项目和另一个每天运行的名为“project-daily”的项目。

“Project”采用名为“RELEASE_TAG”的参数，该参数作为 git 部分中的分支说明符传递。git 插件还允许在此处指定标签。

当“项目”启动时，它会将 $COMMIT 保存到一个名为 latest/$PROJECT.$BRANCH 的文件中。（$BRANCH 设置为 $RELEASE_TAG，除非 $RELEASE_TAG 是标签，在这种情况下 $BRANCH 设置为“master”。）该文件由“project-daily”读取。

“Project-daily”是一个流水线脚本。它没有存储库。为了节省空间，它运行“git clone --bare ...”，然后运行“git log -n 1 --format=format:%H daily”。它读取“latest/$PROJECT.daily”以获取最新版本（尝试）。如果该提交与“git log”输出不同，则它调用“build job:'project'”，参数“RELEASE_TAG”设置为“daily”。

我们将工作代码推送到日常分支。当需要发布构建时，我们合并到 master，标记它，然后使用标记（指定版本）手动运行“项目”。

# jquery - 删除/替换动态创建 tags (using jQuery)

[问问题](https://stackoverflow.com/questions/ask)user834595问问题 2012-08-12T11:28:51.5401042 次This question shows research effort; it is useful and clear0This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I'm using a common technique to create `<STYLE>`s from within my JavaScript/jQuery - much like this

```
$('<style>.tilewidth { width:' + tilesize + 'px; height: ' + tilesize + 'px;}</style>').appendTo('head'); 
```

I'm doing this to control how certain objects scale (forcing `DIV`s to be square for example) - and it's working fine.

Problem is I rerun the code if the window is re sized - at which point it inserting a new set of `<STYLE>` tags after the existing ones (if someone drag-stretch/shrinks a window it could insert 100s!!)

This works, I should emphasize, because CSS only reads the last entries - but it seems clumsy and nasty and messy and untidy and horrible (it makes reading code in Firebug near impossible!!)

Question is - can I remove the old tags before inserting the new ones - or should I just force a complete page reload in re size (and if so, how - and won't it be a performance drain)?

Update: as per Robin's answer, I created a function something like this

```
function addStyle(sname,scode) {
 scode = "." + sname + " {" + scode + "}";
 if ($("#style-" + sname).length)
 $("#style-" + sname).html(scode);
 else
 $("<style/>").attr("id","style-"+sname).html(scode).appendTo("head");
} 
```

Which works pretty well - thanks! :)

[jquery](/tags/jquery "show questions tagged 'jquery'")[css](/tags/css "show questions tagged 'css'")[dynamic](/tags/dynamic "show questions tagged 'dynamic'")4

## 2 回答 2

This answer is useful1

给你的`style`标签一个`id`并删除它？例如

```
$('#sizing').remove(); $('<style id="sizing">…&lt;/style>').appendTo('head'); 
```

实际上，再想一想，最好只设置文本而不是一遍又一遍地创建元素。

```
var sizing = $('#sizing'); if (sizing.length) { sizing.text('my new styles'); } else { $('<style id="sizing">…&lt;/style>').appendTo('head'); } 
```

于 2012-08-12T11:31:22.013 回答This answer is useful1

这根本不是一种常见的技术，你最好直接在元素上设置样式：

```
$('.tilewidth').css({ width: tilesize+'px', height: tilesize+'px' }); 
```

这样元素样式将在调整大小时更新，而不是添加一堆样式标签。

于 2012-08-12T11:58:21.030 回答

#### Related

[1](/questions/15528270 "Question score (upvotes - downvotes)")[symfony - 在 Twig / Symfony2 中引用模板](/questions/15528270)[2](/questions/15528271 "Question score (upvotes - downvotes)")[java - 线程“main”中的 JAVA 异常 java.lang.NullPointerException Sevens Dice Game](/questions/15528271)[1](/questions/15528274 "Question score (upvotes - downvotes)")[sql - 连接字符串中的转义空间](/questions/15528274)[3](/questions/15528277 "Question score (upvotes - downvotes)")[c - getc() 不返回回车返回 '\r' 字符](/questions/15528277)[1](/questions/15528281 "Question score (upvotes - downvotes)")[sql-server - 逻辑错误、MSSQL、Coldfusion、查询结果重复](/questions/15528281)[1](/questions/15528283 "Question score (upvotes - downvotes)")[ios6 - libMobileGestalt copySystemVersionDictionaryValue：无法从系统版本字典中查找 ReleaseType](/questions/15528283)[2](/questions/15528286 "Question score (upvotes - downvotes)")[regex - 一个正则表达式，它将抓住引号中的任何内容+引号中的单词草稿？只有带有“草稿”一词的引号](/questions/15528286)[1](/questions/15528293 "Question score (upvotes - downvotes)")[ruby - Ruby 中的音频均衡器](/questions/15528293)[1](/questions/15528295 "Question score (upvotes - downvotes)")[android - 更改后应用程序崩溃](/questions/15528295)[2](/questions/15528299 "Question score (upvotes - downvotes)")[c# - Kendo Grid 绑定到字符串列表](/questions/15528299)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：11921814
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# ios - 在 iOS 版本 5 上构建 ZeroMQ

> ID：11921816
> 
> 赞同：0
> 
> 时间：2012-08-12T11:29:17.477
> 
> 标签：ios, build, static, hyperlink, zeromq

我一直在找一堆。任何人都有当前指南如何在 iOS 上构建和使用静态库？

那里的大多数指南似乎已经过时并且不起作用。这是专门针对 zeromq 的，但周围的文档似乎很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:41:28.653

我发现这个问题的最佳指南在这里： http: [//paolodenti.blog.com/2012/07/24/zeromq-ios/](http://paolodenti.blog.com/2012/07/24/zeromq-ios/)

它涉及建立一个 Xcode 项目以将 zeromq 转变为跨平台框架。然后该框架可用于正常项目。

# php - 计算一个数组中某个值出现在另一个数组中的次数

> ID：11921817
> 
> 赞同：2
> 
> 时间：2012-08-12T11:29:40.190
> 
> 标签：php, arrays

我有一群人看起来像这样：

```
$people =
    Array
    (
        [0] => Array
            (
                [email] => NameSurname@example.com
                [name] => Name Surname
                [count] => 0
            )

        [1] => Array
            (
                [email] => Name2Surname@example.com
                [name] => Name2 Surname
                [count] => 0
            )
    ) 
```

我有一个数组，它是 MySQL 查询的结果，如下所示：

```
$query=
    Array
    (
        [0] => Array
            (
                [email] => NameSurname@example.com
                [name] => Name Surname
            )

        [1] => Array
            (
                [email] => Name2Surname@example.com
                [name] => Name2 Surname
            )

        [2] => Array
            (
                [email] => NameSurname@example.com
                [name] => Name Surname
            )

    ) 
```

对于 $people 中的每个电子邮件地址，我想`$people['count']`等于该电子邮件地址在 $query 中出现的次数。

我已经尝试了很多方法来做到这一点，但我并没有得到想要的结果。

为免生疑问，基于上述示例的最终结果应如下所示：

```
$people =
    Array
    (
        [0] => Array
            (
                [email] => NameSurname@example.com
                [name] => Name Surname
                [count] => 2
            )

        [1] => Array
            (
                [email] => Name2Surname@example.com
                [name] => Name2 Surname
                [count] => 1
            )
    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T11:39:55.580

```
foreach ($people as $key => $man) { // iterating through each man
  $_occurences = 0;

  foreach ($query as $_item) // iterating through each result in the result set
    if ($_item['email'] == $man['email']) // comparing current man to each result item
      $_occurences ++;

  $people[$key]['count'] = $_occurences; // saving number of occurrences in the `count` key 

 } 
```

* * *

**UPD：另**一种使用`array_map`,`array_reduce`和 nice`ternary`运算符的解决方案。它比一个慢`foreach`，但紧凑和专业的两倍。

它更慢（*在性能方面*）bec。函数调用开销，但在“少量”迭代中，这种下降可以忽略不计。它将更新`$people`数组而不重新分配它。我们`&$man`通过引用传输了每一个。

```
array_map(function (&$man) use ($query) {
    $man['count'] = array_reduce($query, function ($count, $row) use ($man) {
        return ($row['email'] === $man['email']) ? ++$count : $count ;
    }, 0);
}, $people); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T11:51:42.107

不确定这是否正是您所需要的。但是您可以将正在运行的查询更改为：

```
SELECT COUNT(name) as cnt, name,email FROM table_name GROUP BY name; 
```

然后`$query`数组看起来像：

```
$query=
    Array
    (
        [0] => Array
            (
                [email] => NameSurname@example.com
                [name] => Name Surname
                [cnt] => 2
            )

        [1] => Array
            (
                [email] => Name2Surname@example.com
                [name] => Name2 Surname
                [cnt] => 1
            )                  
    ) 
```

然后您可以在数组上运行并获取数组`cnt`中每个项目的`$query`。

# asp.net - 如何在 asp.net 中修复 Ajax 日历月？

> ID：11921818
> 
> 赞同：0
> 
> 时间：2012-08-12T11:29:53.287
> 
> 标签：asp.net, .net, c#-4.0, asp.net-ajax

我想动态修复日历延长月份，以便用户只能从显示的月份中选择日期

笔记：

1.  日历扩展器在 gridview 中。
2.  根据gridview外部的组合框中选择的月份动态设置月份。
3.  用户应该不能更改月份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:19:43.913

要隐藏月份导航，日历控件具有属性**ShowNextPrevMonth** 将其设置为 FALSE。要在日历中隐藏另一个月份的日期，您必须在 DayRender Event 中对其进行管理。
**VB 示例。**

```
Protected Sub yourCalendar_DayRender(ByVal sender As Object, ByVal e As DayRenderEventArgs) Handles yourCalendar.DayRender
    If e.Day.IsOtherMonth Then
    e.Cell.Text = ""
    End If
End Sub 
```

# javascript - 在使用 get() 加载页面之前加载图像

> ID：11921820
> 
> 赞同：2
> 
> 时间：2012-08-12T11:29:57.413
> 
> 标签：javascript, jquery, ajax, load, loading

如何在加载过程中显示 gif 图像？

我用得到。

```
function getCurrentUrl() {
    $(
        $.get(
            "page1.html", 
            function (data) {
                $("#divReceptLoad").empty().append(data);
            },
           'html'
        )
    );
} 
```

如果你能帮助我，比你非常多:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T11:35:13.957

然后创建一个`<img id="loading" src="..." style="display:none;" />`：

```
function getCurrentUrl() {
    $('#loading').show(); //show it before sending the ajax request
    $.get("page1.html", function (data) { 
        $('#loading').hide(); //hide in the callback
        $("#divReceptLoad").empty().append(data);
    },'html'));
} 
```

随意为图像添加更多样式/定位，并将基本的 / 方法替换为/ `show`fadeOut`hide`或[`fadeIn`](http://api.jquery.com/fadeIn/)其他[效果](http://api.jquery.com/fadeOut/)[`slideDown`](http://api.jquery.com/slideDown/)（[如果](http://api.jquery.com/category/effects/)[`slideUp`](http://api.jquery.com/slideUp/)你喜欢的话）。

这是一个[加载 GIF 生成器](http://loadinggif.com/)和[另一个](http://ajaxload.info/)，以防您不想从 Google 图片中获取一个。

这是一个[很好](http://webpagebynumbers.com/116-free-loading-gif-animations)的预制的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T11:37:08.273

```
function getCurrentUrl() {
     $('#gif').fadeIn() // show the hidden gif
     $.get("page1.html", function(data){
        $('#gif').hide() // hide it
        $("#divReceptLoad").empty().append(data);
     },'html')    
} 
```

# asp.net - 通过javascript重置文本框文本

> ID：11921821
> 
> 赞同：0
> 
> 时间：2012-08-12T11:30:08.473
> 
> 标签：asp.net

```
function clickButton(e, buttonid)         
            var evt = e ? e : window.event;
            var bt = document.getElementById(buttonid);
            if (bt) {
                if (evt.keyCode == 13) {
                    bt.click();                                                  
                    return false;
                }
            }
        }

txtChatMessage.Attributes.Add("onkeypress", "return clickButton(event,'" + btnSendChat.ClientID + "')"); 
```

此函数是在代码隐藏文件中设置的属性。按钮单击触发后如何重置文本框中的文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:33:03.463

你可以这样做，通过从后面的代码中传递文本字段`using this`，并`setting`在`value to empty string`javascript 中

**在后面的代码中**

```
txtChatMessage.Attributes.Add("onkeypress", "return clickButton(this, event,'" + btnSendChat.ClientID + "')"); 
```

**在 JavaScript 中**

```
function clickButton(txt, e, buttonid){
   var evt = e ? e : window.event;
   var bt = document.getElementById(buttonid);
   if (bt) {
        if (evt.keyCode == 13) {
             bt.click();    
             txt.value = "";                                               
             return false;
   } 
```

*上面的代码将覆盖文本框的现有值。为了保存以供以后使用，我们可以使用隐藏字段*

**在 html 中**

```
<asp:hidden id="hdnText" runat="server" > 
```

**在 JavaScript 中**

```
function clickButton(txt, e, buttonid){
   var evt = e ? e : window.event;
   var bt = document.getElementById(buttonid);
   if (bt) {
        if (evt.keyCode == 13) {
             bt.click();    
             document.getElementById('<%= hdnText.ClientID %>').value = txt.value;                                               
             return false;
   } 
```

**在后面的代码中**

将文本字段发送到 javascript 函数

```
txtChatMessage.Attributes.Add("onkeypress", "return clickButton(this, event,'" + btnSendChat.ClientID + "')"); 
```

从隐藏字段中获取文本框的值

```
string textBoxValue = hdnText.Value; 
```

# clr - 可以使用 BitConverter 从 IL 字节流（由 MethodBody.GetILAsByteArray 返回）可靠地提取多字节值吗？

> ID：11921824
> 
> 赞同：2
> 
> 时间：2012-08-12T11:30:34.667
> 
> 标签：clr, endianness, cil, system.reflection, bitconverter

我正在研究一些代码，这些代码将 IL 字节数组解析为[`MethodBody.GetILAsByteArray`](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody.getilasbytearray.aspx "MSDN 参考页面").

假设我想从这样的 IL 字节流中读取元数据令牌或 32 位整数常量。起初我认为使用[`BitConverter.ToInt32(byteArray, offset)`](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint32.aspx "MSDN 参考页面")会使这变得容易。但是我现在担心这在大端机器上不起作用。

据我所知，IL 总是对多字节值使用 little-endian 编码：

> *“所有参数编号都被编码为最小地址的最低有效字节（一种通常称为“小端”的模式）。”* —[公共语言基础结构注释标准](https://rads.stackoverflow.com/amzn/click/com/0321154932 "Amazon.com 上的预订页面")，第 III 部分，ch。1.2（第 482 页）。

由于`BitConverter`的转换方法尊重计算机体系结构的字节顺序（可以通过 发现[`BitConverter.IsLittleEndian`](http://msdn.microsoft.com/en-us/library/system.bitconverter.islittleendian.aspx "MSDN 参考页面")），因此我得出结论，`BitConverter`不应使用它从 IL 字节流中提取多字节值，因为这会在大端机器上给出错误的结果。

这个结论正确吗？

*   如果是：有没有办法告诉`BitConverter`转换使用哪种字节顺序，或者 BCL 中是否有任何其他类提供此功能，或者我是否必须编写自己的转换代码？

*   如果不是：我哪里错了？`Int32`从 IL 字节数组中提取操作数值的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:33:59.423

在传递它之前，您应该始终在一个小端数组上执行此操作：

```
// Array is little. Are we on big?
if (!BitConverter.IsLittleEndian)
{
    // Then flip it
    Array.Reverse(array);
}
int val = BitConverter.ToInt32(...); 
```

但是，正如您提到的 IL 流。字节码是这样的（AFAIK）：

```
(OPCODE:(1|2):little) (VARIABLES:x:little) 
```

所以我会读取一个字节，检查它的操作码，然后读取适当的字节并在必要时使用上面的代码翻转数组。我能问一下你在做什么吗？

# android - 在我的应用程序中集成 Facebook 和 Twitter 个人资料图片

> ID：11921828
> 
> 赞同：-1
> 
> 时间：2012-08-12T11:31:37.623
> 
> 标签：android, facebook, twitter

如何将我的 Facebook 和 Twitter 个人资料图片添加到我的应用程序中？如何将该个人资料图像裁剪为特定尺寸？

我正在尝试其他问题中的这个 facebook 个人资料图片

```
 ImageView user_picture;
 userpicture=(ImageView)findViewById(R.id.userpicture);
 URL img_value = null;
 img_value = new URL("http://graph.facebook.com/"+id+"/picture?type=large");
 Bitmap mIcon1 = BitmapFactory.decodeStream(img_value.openConnection().getInputStream());
 userpicture.setImageBitmap(mIcon1); 
```

来自：-[从 Facebook Graph-API 获取用户图像](https://stackoverflow.com/questions/5841710/get-user-image-from-facebook-graph-api)

但是如何找到特定人员的 facebook 个人资料用户 ID 的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:53:55.633

据我了解，您需要使用 Facebook 和 Twitter API 以动态和适当的方式实现您想要的。

无需使用 URL 和硬编码方式获取图像和其他内容，只需使用 APIS。

最简单的方法是。

*   将 APIS 实施到您的应用程序。
*   让用户使用其中任何一个登录。
*   然后使用 API 方法获取您需要的信息。

检查这些以获取更多信息以使用 API。

Facebook Java API - [http://code.google.com/p/facebook-java-api/](http://code.google.com/p/facebook-java-api/)

Twitter4j - [http://twitter4j.org/en/index.html](http://twitter4j.org/en/index.html)

# jquery - ajax在play框架中提交表单

> ID：11921829
> 
> 赞同：0
> 
> 时间：2012-08-12T11:32:01.710
> 
> 标签：jquery, playframework-2.0

在首先使用 jquery 表单验证插件对输入进行验证之后，我试图在 ajax 中使用 jsRoutes 提交表单。问题是当我将“数据：表单”添加到 ajax 调用的参数时，响应处理程序永远不会被调用。一些代码可以进一步解释这个问题：

```
jsRoutes.controllers.Application.authenticate().ajax({
    data : {
        form : this //this messes things up!
    },
    success : function(data) {
        window.location = "/"; //never called with the above data stuff
    },
    error : function(err) {
        alert(err); //never called with the above data stuff
    }
}); 
```

我能够读取控制器中的表单字段。一种解决方案当然是将表单中的每个字段手动提取到数据部分（如下所示），但这不是我们所希望的。还有其他解决方案吗？

```
data : {
    username : <username from form>
    password : <password from form>
}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:00:04.587

为您的标签设置一个唯一的 ID 属性，`<form>`即：`<form id="my_form" ...>`然后使用 ID 作为 jQuery 选择器对其进行序列化：

```
 jsRoutes.controllers.Application.authenticate().ajax({
    data : $("#my_form").serialize(),
    success : function(data) {
        // ...
    },
    error : function(err) {
        // ...
    }
}); 
```

使用一些浏览器内检查工具（即`FireBug`）检查它是否发送了您想要的内容以及响应是否`formatted`符合要求

# regex - 正则表达式中的问题

> ID：11921830
> 
> 赞同：3
> 
> 时间：2012-08-12T11:32:02.710
> 
> 标签：regex

我正在使用以下表达式：

```
/^[alopinme]{5}$/ 
```

这个正则表达式从一组单词中提取单词，其中的字母包含在括号内。

好吧，现在我需要为这样的表达式添加更多功能，因为我需要获取的单词只能包含另一组字母中的一个字母。假设我想得到由集合 A 中的字母组成的单词，并且**可以**（如果存在）包含更多来自集合 B 的字母。

我试图猜测如何完成我的正则表达式，但我找不到正确的方法。

任何人都可以帮助我吗？

谢谢。

编辑：

这里我贴一个例子：

```
SELECT sin_acentos FROM Finder.palabras_esp WHERE sin_acentos REGEXP '^[tehsolm]{5}$' 
```

这个表达选择了我喜欢的词：helms、moths meths home等等......

但我需要添加一组字母 B 并获取只能包含此类字母的单词。假设我有另一组字母 [xzk]，因此表达式可以获得更多单词，但只能从集合 B 中选择一个字母。

结果可能会得到类似的单词：mozes、hoxes、tozes 等等……如果你检查这些单词，你会发现每个单词的大部分字母都来自集合 A，但只有一个来自集合 B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:42:37.790

由于您要查找的单词都是五个字符长，因此我可以想到一个相当难看的表达式来解决问题：假设`[alopinme]`是您的基本集，并且`[xyz]`是您的可选集。然后表达式

```
/^([alopinmexyz][alopinme]{4}|[alopinme][alopinmexyz][alopinme]{3}|[alopinme]{2}[alopinmexyz][alopinme]{2}|[alopinme]{3}[alopinmexyz][alopinme]|[alopinme]{4}[alopinmexyz])$/ 
```

应该允许您正在寻找的结构的五个字母单词。

一般来说，需要计算任何东西会使您的正则表达式不可读。像这样的问题很好地说明了这一点：编写表达式要容易得多`/^[alopinmexyz]{5}$/`，并在代码中添加一个额外的步骤来检查`[xyz]`文本中出现的次数不超过一次。您甚至可以使用正则表达式进行额外检查：

```
/^[^xyz]*[xyz]?[^xyz]*$/ 
```

SQL 中的结果如下所示：

```
SELECT sin_acentos
FROM Finder.palabras_esp
WHERE sin_acentos REGEXP '^[tehsolmxyz]{5}$'      -- Length == 5, all from tehsolm+xyz
  AND sin_acentos REGEXP '^[^xyz]*[xyz]?[^xyz]*$' -- No more than one character from xyz 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T11:51:45.460

如果其他字符之一应该只出现一次，您可以使用：

```
^(?=.{5}$)[alopinme]*(?:[XYZ][alopinme]*)?$ 
```

*   `(?=.{5}$)`- 检查字符串是否有 5 个字符长，甚至在匹配之前。（这可能不适用于 MySql）
*   `[alopinme]*`- 来自 A 的字符
*   `(?:[XYZ][alopinme]*)?`- 可选 - B 中的一个字符，A 中的更多字符。

工作示例：[http ://rubular.com/r/aw6l561Int](http://rubular.com/r/aw6l561Int)

或者，如果您希望它们最多 3 次，例如：

```
^(?=.{5}$)[alopinme]*(?:[XYZ][alopinme]*){0,3}$ 
```

# iphone - ios中的可点击链接？

> ID：11921834
> 
> 赞同：1
> 
> 时间：2012-08-12T11:32:42.863
> 
> 标签：iphone, ios, ios5

在我的应用程序中，我使用 **UITextView**来显示三行。在那我需要为某些文本添加链接。我在 google 和 SO 中进行了搜索，但我找不到我的问题的确切解决方案。

我试过这个但它不工作

```
 NSString *testString = @"This will go to <a href = \"http://www.google.com\">Google</a>";
[webview loadHTMLString:testString baseURL:baseURL]; 
[lblLinksTitle setText:testString]; 
```

我希望 Google 作为必须在 Safari 浏览器中打开的可点击文本。可能很简单。由于我是**iOS**新手，所以我不知道该怎么做。

谢谢你们的帮助。

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:43:40.873

尝试使用这个：

```
lblLinksTitle.editable = NO;
lblLinksTitle.dataDetectorTypes = UIDataDetectorTypeLink;
lblLinksTitle.text = testString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:57:37.567

只用 UIWebView，不要用 UiTextView

```
 NSString *testString = @"This will go to <a href = \"http://www.google.com\">Google</a>";
 [webview loadHTMLString:testString baseURL:nil];
 webview.delegate=self;

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request  navigationType:(UIWebViewNavigationType)navigationType{

NSString * requestString=[[request URL] absoluteString];
//NSLog(@"%@ is requestString from clicking",requestString );

if ([[[request URL] absoluteString] hasPrefix:@"http://www.google"]) {

[[UIApplication sharedApplication] openURL:[request URL]];

}
    return TRUE;

} 
```

# wordpress - wordpress 的灯箱缩放

> ID：11921841
> 
> 赞同：0
> 
> 时间：2012-08-12T11:34:07.627
> 
> 标签：wordpress, lightbox, lightbox2

我需要为灯箱安装缩放选项，类似于此页面中的内容

[http://www.bustler.net/index.php/article/seoul_memorial_park_by_haeahn_architecture/](http://www.bustler.net/index.php/article/seoul_memorial_park_by_haeahn_architecture/) （点击图片放大-缩放选项在左上角）

我不知道这个 ZOOM 插件的名称，有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:58:16.270

有一个名为“Fancybox For Wordpress”或“Auto Thinkbox”的插件具有类似的效果。

# linux - 读取和解析 perf.data

> ID：11921842
> 
> 赞同：8
> 
> 时间：2012-08-12T11:34:57.370
> 
> 标签：linux, performance, parsing, profiling, performancecounter

我正在使用命令 perf record 记录一个性能计数器 frm linux。

我想将结果`perf.data`用作其他编程应用程序的输入。你知道我应该如何读取和解析数据`perf.data`吗？有没有办法将其转换为`.text`文件或`.csv`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-05-25T03:39:32.377

linux工具的工具中有内置的`perf.data`解析器和打印机，带有子命令“脚本”。`perf`

转换`perf.data`文件

```
perf script > perf.data.txt 
```

要在其他文件 ( ) 中转换 perf 记录的输出，请`perf record -o filename.data`使用`-i`以下选项：

```
perf script -i filename.data > filename.data.txt 
```

`perf script`记录在`man perf-script`，可在[http://man7.org/linux/man-pages/man1/perf-script.1.html在线获取](http://man7.org/linux/man-pages/man1/perf-script.1.html)

> ```
>  perf-script - Read perf.data (created by perf record) and display
>    trace output
> 
>    This command reads the input file and displays the trace recorded.
> 
>        'perf script' to see a detailed trace of the workload that was
>        recorded. 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-04T11:01:45.733

[https://github.com/google/perf_data_converter](https://github.com/google/perf_data_converter)的`quipper`子项目可以解析文件。`perf.data`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-25T11:12:55.893

`perf data convert --to-json`四月登陆。

[https://man7.org/linux/man-pages/man1/perf-data.1.html](https://man7.org/linux/man-pages/man1/perf-data.1.html)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-12T18:32:02.783

将服务检查性能数据重定向到文本文件以供另一个应用程序稍后处理的示例命令定义如下所示：

```
define command{

    command_name    store-service-perfdata

    command_line    /bin/echo -e "$LASTSERVICECHECK$\t$HOSTNAME$\t$SERVICEDESC$\t$SERVICESTATE$\t$SERVICEATTEMPT$\t$SERVICESTATETYPE$\t$SERVICEEXECUTIONTIME$\t$SERVICELATENCY$\t$SERVICEOUTPUT$\t$SERVICEPERFDATA$" >> /usr/local/nagios/var/service-perfdata.dat

    } 
```

# php - 如何使用 PHP 插入指向 Mysql 数据库的链接

> ID：11921844
> 
> 赞同：1
> 
> 时间：2012-08-12T11:34:59.117
> 
> 标签：php, mysql, html

我需要帮助，我在`Mysql`使用 PHP 将链接插入数据库时​​遇到问题，如下所示： 示例： [http ://www.textlinkgravity.com/link.php?id=8781&title=Deerpages.co-Free-Online-Business -目录.html](http://www.textlinkgravity.com/link.php?id=8781&title=Deerpages.co-Free-Online-Business-Directory.html)

在`Mysql`数据库中插入将是： [http ://www.textlinkgravity.com/link.php?id=8781](http://www.textlinkgravity.com/link.php?id=8781)

我的问题是 & 符号被剪掉了。我正在使用`mysql_real_escape_string`.

这是我的代码：

```
$link = mysql_real_escape_string($_POST['link']);   
//INSERT NEW ROW
mysql_query("INSERT INTO table (link) VALUES ('$link') "); 
```

我对我的问题表示歉意，因为到目前为止我不知道如何插入完整的字符串。

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T11:43:07.820

您应该在插入之前对您的 URL[进行编码](http://php.net/manual/en/function.urlencode.php)

```
$link = mysql_real_escape_string( urlencode($_POST['link']) ); 
```

# android - 使用openFileInput找不到文件时如何防止android应用程序崩溃

> ID：11921847
> 
> 赞同：0
> 
> 时间：2012-08-12T11:35:14.283
> 
> 标签：android

我想对使用 FileInputStream 找不到文件的情况做出反应。当我运行一个加载不存在的文件的应用程序时，它会打开一个强制关闭的 android 弹出窗口。我想通过更改文本视图中的文本并说尚未找到该文件来对这种情况做出反应。我尝试更改例外以更改文本视图并显示尚未找到文件并且应用程序仍然崩溃。

这是一段代码：

```
 FileInputStream fis = null;
    String collected = null;
    try {
        fis = openFileInput("test");
        byte[] dataArray = new byte[fis.available()];
        while (fis.read(dataArray) != -1){
            collected = new String(dataArray);
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block

        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        try {
            fis.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    tv.setText(collected); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:45:44.273

为确保 Android 应用程序不会强制关闭，您的选择是：a) 不要做任何会导致异常的事情，b) 使用您自己的 try/catch 块捕获您的异常，c) 安装应用程序级别的未捕获异常处理程序. 选项 a 不太可行， c 不是很有帮助，并且根据您的代码片段，您似乎正在尝试 b - 但是似乎还有另一个例外，您没有注意到这一点。logcat 的内容会告诉你什么异常，堆栈跟踪将导致你的代码中需要 try/catch 的点。

# php - 与 PHP 数组相比，使用 MySQL 查询数组时得到不同的结果

> ID：11921848
> 
> 赞同：0
> 
> 时间：2012-08-12T11:35:18.950
> 
> 标签：php, mysql

我正在编写一个脚本来计算一组数据的众数、中位数和均值。我有十条记录存储在 MySQL 数据库和 PHP 数组中。脚本完成后，脚本将只使用存储在数据库中的数据而不是 PHP 数组，PHP 数组是用来测试代码的。

但我发现，使用 PHP 数组和 MySQL 数组时的结果是不同的。在 PHP 数组中，我有以下数据：

```
$arr = array(60, 70, 71, 76, 144, 151, 197, 229, 233, 233); 
```

在我的 MySQL 数据库中，我有以下代码：

```
$data = mysql_query("SELECT amount FROM example") or die(mysql_error()); 
$arr = mysql_fetch_array($data); 
```

数据是相同的，除了 MySQL 数据包含`.00`在每条记录之后。在试图找出它给出错误结果的原因期间，我`.00`从数据库中的每条记录中删除了 。数据仍然是错误的。

结果，当使用 PHP 数组时，我得到了以下（正确的）结果：

> 支付的平均（平均）价值 £146.4
> 最常发生
> 的支付价值 £233 支付的中值价值 £151

结果，当使用 MySQL 数组时，我得到以下（错误）结果：

> 支付的平均（平均）价值 144
> 英镑 最常发生的支付价值 144 英镑 支付的中值 144
> 英镑

我不知道为什么会发生这种情况。下面是我用来生成这些结果的 PHP 代码：

```
 <?php
        function arithmetic($array, $output = 'mean'){ 
            switch($output){ 
                // This case works out the mean
                case 'mean': 
                    $count = count($array); 
                    $sum = array_sum($array); 
                    $total = $sum / $count; 
                break; 
                // This case works out the median
                case 'median': 
                    rsort($array); 
                    $middle = round(count($array) / 2); 
                    $total = $array[$middle-1]; 
                break; 
                // This case works out the mode
                case 'mode': 
                    $v = array_count_values($array); 
                    arsort($v); 
                    foreach($v as $k => $v){$total = $k; break;} 
                break; 
            } 
            return $total; 
        } 

        // PHP Array with data
        //$arr = array(60, 70, 71, 76, 144, 151, 197, 229, 233, 233);

        // MySQL Connection & Retrieval of data
        $data = mysql_query("SELECT amount FROM example") or die(mysql_error()); 
        $arr = mysql_fetch_array($data);

    ?> 
```

有人有想法么？

**更新：**
我一直在玩 MySQL 查询，并使用以下代码：

```
$data = mysql_query("SELECT * FROM example") or die(mysql_error()); 
$arr = mysql_fetch_assoc($data);
print_r ($arr); 
```

它仅显示以下结果：

> 数组 ( [id] => 1 [数量] => 144 )

所以真的，查询带来了所有的记录，而不仅仅是一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:31:20.417

嗯，原因是因为你只取一行，因此一个数字......

```
$arr = array();

while ($result_array = mysql_fetch_row($data)) {
    $arr[] = $result_array[0];
} 
```

在此代码之后，您应该能够计算正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:51:18.253

我不知道这是否有帮助，但你可能想挖掘 mysql-fetch array() 并在那里遵循那里的建议， [http ://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

特别是检查您获取的数据是否设置正确。

```
function db_result_single($result) { 
    return ($row = mysql_fetch_row($result)) && isset($row[0]) ? $row[0] : false; 
} 
```

# dhtml - 是否可以在 OpenLaszlo DHTML 运行时中直接访问视图的 div？

> ID：11921849
> 
> 赞同：2
> 
> 时间：2012-08-12T11:35:42.103
> 
> 标签：dhtml, openlaszlo

是否有用于访问 DHTML 运行时中 OpenLaszlo 视图的 HTML div 对象的公共 API？OpenLaszlo 文档中似乎没有这样的示例，但从技术上讲，它应该是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:33:51.713

创建 DHTML 运行时时，OpenLaszlo 团队决定对使用 LZX 的开发人员隐藏 HTML div 结构的实现细节。虽然不建议直接访问视图的底层对象结构，但在某些情况下您必须这样做 - 但它可能会随着平台的未来更新而破坏您的应用程序。

采取以下简单的示例应用程序：

```
<canvas debug="false">

  <view name="v1" x="10" y="10" width="100" height="100" bgcolor="red">
  </view>

</canvas> 
```

如果您使用查询字符串编译应用程序

> lzoptions=proxyed(true)%2Cruntime(dhtml)&target=html

您将在没有开发人员控制台的情况下获得应用程序。现在，当您检查页面结构时，您将看到以下 div 结构：

```
<body>
  <div id="appcontainer" style="height: 100%; width: 100%; margin: 0px; padding: 0px; border: 0px none; overflow: hidden; text-align: left; ">
    <div class="lzappoverflow" style="width: 1905px; height: 429px; ">
      <div class="lzcanvascontextdiv" id="lzcanvascontextdiv">
        ...
      </div>
      <div class="lzcanvasdiv">
        <!-- visual part of view instance with id="v1" -->
        <div class="lzdiv" style="background-color: rgb(255, 0, 0); height: 100px; width: 100px; left: 10px; top: 10px; z-index: 2; "></div>
      </div>
    </div>
  </div>
</body> 
```

我删除了 CSS 信息并添加了注释以标记 id=v1 表示视图的 div。您看不到任何 id 值为“v1”的 div，因为视图实例被实例化为存储对视觉呈现的引用的 JavaScript 对象。您可以通过调用访问 div

> v1.getDisplayObject()

这将返回

```
<div class=​"lzdiv" style=​"background-color:​ rgb(255, 0, 0)​;​ height:​ 100px;​ width:​ 100px;​ left:​ 10px;​ top:​ 10px;​ z-index:​ 2;​ ">​&lt;/div>​ 
```

视图的对象层次结构是 *view->sprite->__LZdiv* 属性。这意味着，对于每个视图，OpenLaszlo 都会实例化一个特定于运行时的 sprite 对象，该对象又会为 DHTML 运行时生成相应的 div。

> v1.sprite.__LZdiv.style.backgroundColor "rgb(255, 0, 0)"

以下是[LzView](http://svn.openlaszlo.org/openlaszlo/trunk/WEB-INF/lps/lfc/views/LaszloView.lzs)和[LzSprite](http://svn.openlaszlo.org/openlaszlo/trunk/WEB-INF/lps/lfc/kernel/dhtml/lzsprite/LzSprite.js)类的实现链接，如果您有兴趣了解其内部结构：

# html - CSS3 列切断 s

> ID：11921852
> 
> 赞同：4
> 
> 时间：2012-08-12T11:36:11.767
> 
> 标签：html, css, multiple-columns

我正在尝试将 css3 列与列表 ( `<li>`) 一起使用。我无法让它工作。

我定义了一个包装`<ul>`

```
div.ul-container {
  -moz-column-width: 310px;
  -moz-column-gap: 10px;
  -webkit-column-width: 310px;
  -webkit-column-gap: 10px;
  column-width: 310px;
  column-gap: 10px;
} 
```

`<li>`当我有三个或以上时，这很好用。但是当我有少于那个（2 或 1）时，它似乎切断了`<li>`. 我尝试定义一个`min-height`效果不佳的（将其视为高度）。

截屏：

![切断李](../Images/07adf9e74f458a0a59a5b3b7c59de1e8.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-11-03T18:49:01.117

这个线程有点旧，但我最近遇到了同样的问题，并用它来防止列表项被剪切：

```
li {
-webkit-column-break-inside: avoid;
          page-break-inside: avoid;
               break-inside: avoid;
} 
```

[有关CSS 技巧的](https://css-tricks.com/almanac/properties/b/break-inside/)更多信息

希望它可以帮助同一条船上的任何人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:31:21.837

它似乎与`li`元素的边距和`ol`. 从 jsfiddle.net/nZUB9 我首先重置了[你的 CSS](http://meyerweb.com/eric/tools/css/reset/)，然后`margin: 6px 0;`变成`padding: 6px 0;` 它为我完成了这项工作；）

```
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

* {
margin: 0;
padding: 0;
font-family: arial, verdana;
}

.task-wrapper {
-moz-column-width: 310px;
-moz-column-gap: 10px;
-webkit-column-width: 310px;
-webkit-column-gap: 10px;
column-width: 310px;
column-gap: 10px;
    border:1px solid red;
}

ol.tasks {
list-style-type: none;
margin-left: 0;
    display: block;
}

ol.tasks li {
border-bottom: 1px dotted rgba(0, 30, 30, 0.3);
background-color: white;
background-color: rgba(255, 255, 255, 0.9);
}

ol.tasks li {
border: 1px solid rgba(0, 30, 30, 0.3);
padding: 6px 0;
list-style-type: decimal;
width: 310px;
} 
```

# android - 从 android 的数据库中填充 Spinner

> ID：11921853
> 
> 赞同：0
> 
> 时间：2012-08-12T11:36:18.417
> 
> 标签：android

我试图`database`在`Spinner`. `SimpleCursorAdapter`有些人怎么做不到

```
Cursor cs=db.getAllSession();
String[] from=new String[]{"sess_name"};        
int[] to=new int[]{android.R.id.text1};
SimpleCursorAdapter adapter= new SimpleCursorAdapter(this,  android.R.layout.simple_spinner_item, cs, from, to );
adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
sp.setAdapter(adapter); 
```

会话表有两个字段`id`和`sess_name`. 我得到非法参数异常。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.world.shaman/com.world.shaman.Test}: java.lang.IllegalArgumentException: column '_id' does not exist 
```

我不知道是什么问题

![在此处输入图像描述](../Images/053ab199cdcb65bf37d0e082e96b551e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:25:55.423

正如biegleux 所说，光标需要有一`_id`列才能使微调器工作。

这并不一定意味着您需要更改数据库中的列名。这将是推荐的方式，但您也可以修改查询以获得所需的结果：

```
SELECT id AS _id, sess_name FROM your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:14:09.740

用作表`_id`中列的名称，`session`而不是`id`.

来自[CursorAdapter 文档](http://developer.android.com/reference/android/widget/CursorAdapter.html)：

> 游标必须包含名为“_id”的列，否则此类将不起作用。

# php - 从列表元素运行 php

> ID：11921854
> 
> 赞同：0
> 
> 时间：2012-08-12T11:36:24.627
> 
> 标签：php, javascript, jquery, mysql, html

我的一个网站页面上有一个列表，其作用类似于删除按钮，但是我想知道您是否可以在用户单击它时调用 php 脚本，有点像提交按钮。

这是列表：

```
<li>
    <a class="actions_dropdown" href="#">&nbsp;</a>
    <ul class="actions_content">
        <li><a href="#">Delete</a></li>
        <li><a href="#">Report</a></li>
        <li><a href="#">Mark as Read</a></li>
        <li><a href="#">Mark as Unread</a></li>
        <li><a href="#">Move to Folder 1</a></li>
        <!----whole loop of folders--->
    </ul>
</li> 
```

无论如何，当用户点击时，说删除 li 它调用了一个 php 脚本？我似乎无法解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:45:48.223

`Delete`给你的li分配一个类

```
<li><a class="actions_dropdown" href="#">&nbsp;</a>
                <ul class="actions_content">
                    <li class="del"><a href="#">Delete</a></li>
                    <li><a href="#">Report</a></li>
                    <li><a href="#">Mark as Read</a></li>
                    <li><a href="#">Mark as Unread</a></li>
                    <li><a href="#">Move to Folder 1</a></li>
                    <!----whole loop of folders--->
                </ul>
               </li> 
```

现在将单击事件处理程序附加到`li`with 类`del`

```
$("li.del").click(function(e){  
var db = $(':checkbox:checked').map(function(i,n) {
    return $(n).val();
}).get(); //get converts it to an array

if(db.length == 0) { 
    db = "none"; 
}        
 $.post('/test.php',{'db[]':db},function(data){    
 console.log(data);//it should log data deleted successfully     
 });    
}); 
```

在 test.php 中

```
<?php

 //delete logic here
 echo json_encode("data deleted successfully");

?> 
```

[发布多个复选框值的数组](https://stackoverflow.com/questions/1557273/jquery-post-array-of-multiple-checkbox-values-to-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:46:09.940

您可以简单地将锚点设置`href`到您的 PHP 页面，但与标准表单提交一样，它会导航离开当前页面或导致当前页面重新加载（取决于您的 PHP 返回的内容）。

所以可能你想发出一个 Ajax 请求。与标准表单提交不同，Ajax 不会导致当前页面重新加载，它会将响应返回给您的 JS 代码。

假设您可以将 id 添加到您的 li 或锚元素（例如，`id="deleteLink"`），或者以其他方式标识它，您可以绑定执行 Ajax 的单击处理程序：

```
$("#deleteLink").click(function(e) {
    e.preventDefault();

    $.ajax({
       url: "yourPHPpageHere.php",
       data: { paramName1 : paramValue, paramName2 : paramValue2 },
       dataType : "json"   // or "html", "xml", or "text", whatever your PHP returns
    }).done(function( response ) {
       // optionally do something with response.
    });
}); 
```

您需要传递给删除 PHP 的任何数据（可能至少是某种记录 ID）都可以在调用的`data`参数中设置`$.ajax()`。

有关该`$.ajax()`方法的更多详细信息，请参阅[jQuery doco](http://api.jquery.com/jquery.ajax/)。

# java - Spring 3 MVC - 视图未解决

> ID：11921860
> 
> 赞同：0
> 
> 时间：2012-08-12T11:37:25.807
> 
> 标签：java, spring, jakarta-ee, spring-mvc

这个问题在这个问题 [之后](https://stackoverflow.com/questions/11915715/spring-mvc-hello-world-application-not-working)。这是新的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>HatifimWeb</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>main</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring_config/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>main</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
</web-app> 
```

这是新的 index.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    Hello.
    <br />
    <a href="Login.do">login</a>
</body>
</html> 
```

其他一切都或多或少相同。

现在，当我尝试访问 Login.do 时，它在 LoginController 中输入了正确的方法，但随后我得到了 404。看来 ViewResolver 没有完成它的工作，但我不知道。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:57:54.060

你的 servlet-context.xml 怎么样？您需要在 servlet 上下文 xml 文件中包含 viewResolver。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:33:15.593

试试这个

```
<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
              <property name="definitions">
                     <list>    
                        <value>/WEB-INF/definitions.xml</value>
                    </list>
           </property>
    </bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T11:43:45.587

是你和你的代码。ViewResolver 自 1.0 版以来一直是 Spring 的一部分，我可以向您保证它可以工作。

您在 Spring 应用程序上下文 XML 中需要这样的内容：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
  <property name="prefix" value="/WEB-INF/jsp/"/>
  <property name="suffix" value=".jsp"/>
</bean> 
```

你也可以使用注解，像[这样](http://www.mkyong.com/spring-mvc/spring-mvc-hello-world-annotation-example/)。

# c# - 如何将文件直接从 url 上传到服务器

> ID：11921861
> 
> 赞同：2
> 
> 时间：2012-08-12T11:37:58.473
> 
> 标签：c#, asp.net

如何直接从 url 上传文件而不下载并将其上传到服务器？

就像我有链接一样

```
http://whatever/test.pdf 
```

将其放入文本框并上传！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T11:41:27.307

使用`System.Net.WebClient`：

```
var url = textBox1.Text;

var client = new System.Net.WebClient();
client.DownloadFile(url, "c:\\path-to-save-file-on-server\\test.pdf"); 
```

# c++ - 在结构中使用 public 关键字

> ID：11921862
> 
> 赞同：1
> 
> 时间：2012-08-12T11:38:24.390
> 
> 标签：c++, inheritance, struct, access-modifiers

有没有区别：

```
struct B {...}; 
struct D : B {...}; 
```

和：

```
struct B {...};  
struct D : public B {...}; 
```

如果不是，为什么包括标准在内的每个人都使用更详细的第二变体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T11:41:22.780

不，因为对于结构，默认访问说明符和默认继承类型都是`public`. 说到这一点，类的默认访问说明符是，这是在声明类型的上下文中和C++`private`之间的唯一区别。`struct``class`

至于“为什么”——可能是因为它更明确一点，不需要记住和之间的`class`区别`struct`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T11:40:32.763

不，两者完全一样。而且我不确定每个人都使用第二种变体。例如，我不知道。该标准也没有在任何地方使用它。例如，在 C++11 §3.8 中，我们看到：

```
struct D1 : B { void f(); }; 
```

另一方面，明确意味着不知道规则的人可以理解代码。

# android - 将 android listview 传递给活动

> ID：11921863
> 
> 赞同：0
> 
> 时间：2012-08-12T11:39:14.957
> 
> 标签：android, android-layout

我有一个`Loader`类，它只是创建一个`ProgressDialog`并显示它。现在，我有一个`Activity`我需要在其中使用加载器的东西。该活动将项目动态加载到`ListView`成员中。我想使用`Loader`该类并`ProgressDialog`在加载`ListView`. 我想过在单独的类中加载列表视图并将其发送到活动，但我没有找到如何将“列表视图”发送到另一个意图。我还考虑过将`ListView`对象设为静态对象，因此我会从另一个类访问它，但我不喜欢这样做（不推荐使用静态成员）。还有其他想法吗？

```
package android.example;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;

public class Loader extends AsyncTask<Void, Void, Void> {
    private ProgressDialog dialog;        

    public Loader(Activity activity) {
        dialog = new ProgressDialog(activity);
    }

    @Override
    protected void onPreExecute() {
        dialog.setMessage("Loading");
        dialog.show();
    }

    @Override
    protected Void doInBackground(Void... params) { 
        return null;
    }

    @Override
    protected void onPostExecute(Void res) {        
        dialog.dismiss();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:00:55.580

重要的`ListView`是毕竟它的数据。您可以只发送数据或将已使用的数据设置为`public static`，然后重用您的`Adapter`.

我认为这会容易得多，并且您的代码会很干净。

# c++ - 用动态消息断言？

> ID：11921864
> 
> 赞同：11
> 
> 时间：2012-08-12T11:39:18.357
> 
> 标签：c++, boost, assert

在我的程序中，我想使用显示错误消息的断言。除了众所周知的 C 和 C++ 解决方法之外，还有 BOOST 提供的“真正”解决方案`BOOST_ASSERT_MSG( expr, msg )`（另请参见[带有 message 的 assert()](https://stackoverflow.com/questions/5867834/assert-with-message)）

但是静态消息对我来说还不够，我有时还想显示失败的变量，例如在类似的情况下

```
BOOST_ASSERT_MSG( length >= 0, "No positive length found! It is " << length ) 
```

如您所见，我想将消息“字符串”格式化为`stringstream`or `ostream`，这样我就可以轻松地显示自定义类型（假设我已经定义了相关的格式化函数）。

这里的问题是`BOOST_ASSERT_MSG`默认情况下需要 a`char const *`所以不兼容。

`assertion_failed_msg()`有没有办法以使用流作为消息的方式重新定义/重载？如何？
（我的天真的方法失败了，因为编译器首先想对`operator<<("foo",bar)`消息本身做一个......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T13:06:57.637

您可以定义自己的宏

```
#define ASSERT_WITH_MSG(cond, msg) do \
{ if (!(cond)) { std::ostringstream str; str << msg; std::cerr << str.str(); std::abort(); } \
} while(0) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T13:09:28.620

实现这一点相对微不足道。

```
BOOST_ASSERT_MSG( length >= 0, (std::stringstream() << "No positive length found! It is " << length).str().c_str() ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-20T14:00:28.400

我在它周围使用了`BOOST_ASSERT_MSG`我自己的包装器，因此用多个指定断言消息`operator<<`似乎不那么复杂。

```
#if defined ASSERT_ENABLED 

    #define ASSERT(cond, msg) {\
        if(!(cond))\
        {\
            std::stringstream str;\
            str << msg;\
            BOOST_ASSERT_MSG(cond, str.str().c_str());\
        }\
    }
#else
    #define ASSERT(...) 
#endif 
```

使用示例，提供自定义消息，就像您输出到`cout`：

```
 ASSERT(execSize == (_oldSize - remaining), "execSize : " << execSize << ", _oldSize : " << _oldSize << ", remaining : " << remaining); 
```

它的作用是，如果`ASSERT_ENABLED`已定义，则启用断言消息。`if(!(cond))`部分是优化，它避免了宏参数指定的昂贵的字符串操作`msg`，如果`cond`是`true`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-27T23:35:34.517

这是一个不依赖宏的解决方案。相反，它使用了一点点模板和 lambda 语法。

```
template<typename Fn> 
void assert_fn( bool expr, Fn fn) {
  if (!expr) {
    fn();
    abort();
  }
} 
```

参数`fn`可以是任何可调用的。
例如，您可以这样称呼它：

```
assert_fn( a==b, [&](){ cout << "Assertion failed: a="<< a << 
                                " is different from but b=" << b << endl; } ); 
```

优点是输出是您没有显式调用 abort 并且输出是完全可定制的。当然，这个优势是 lambda 函数样板的七个额外字符`[&](){}`：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-01T06:22:54.870

如果您仅在 Windows 上工作，则可以查看`assert`宏。在它使用的引擎盖下`_wassert`。您可以使用它编写自己的断言宏。例如，在我的情况下，如果我得到一些观点，我想在没有条件的情况下显示断言：

```
#ifdef DEBUG
    const std::wstring assert_msg = /* build the string here */;
    _wassert(assert_msg.c_str(), _CRT_WIDE(__FILE__), (unsigned)(__LINE__));
#endif 
```

我认为在其他操作系统上你可以做同样的伎俩，看看`assert`宏。

# c - 人们真的用C语言做OO吗？

> ID：11921865
> 
> 赞同：4
> 
> 时间：2012-08-12T11:39:24.703
> 
> 标签：c, oop, virtual-functions

`this`通过显式传递指针，可以在 C 中模拟成员函数。可以通过在每个对象中显式存储指向函数指针全局数组的指针来模拟虚函数。美好的。

现在我的问题是，人们真的会这样做吗？我想知道是否值得教授这种技术，因为我不想教 C 新生在现实世界中几乎从未使用过的东西。

（我需要为已经熟悉 OOP 的人填写为期两周的 C 入门课程的最后一天。）

是否有任何相关项目、库或框架以所描述的方式在 C 中模拟 OO？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T12:17:48.413

我在 C 方面有大约 20 年的经验。它是我学习的第一个编译语言，我从不需要继续前进，所以它一直是 C，而且只有 C。我经常在工作和家里编写代码。我已经发布了一个无锁数据结构库。我认为我是一个称职的 C 程序员。

关于您的问题，OO 包含许多概念。例如，一个是实例化，例如具有 new() 和 delete() 以及给定实体（堆栈、列表等）的实例的库。C 支持这一点，当然，它是一种非常实用且有用的方法。我已经使用这种方法大约十五年了。

许多年前，我开始尝试另一个在 C++ 中得到很好支持的 OO 概念，即继承。我想要一个包含其他实体的实体。然后问题是暴露所包含实体的 API。你可以做到，但事实是，C 语言并没有自然地表达这样的概念和方法。这不是我现在使用的东西。

我的建议是；刀就是刀，叉就是叉。您可以将其中一个用作另一个，但效果不佳。C 自然不支持某些（重要的）OO 概念，例如继承。不要试图让 C 做这些事情。如果您想这样做，请使用 C++。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T11:41:13.823

是的，他们有。

> 是否有任何相关项目、库或框架以所描述的方式在 C 中模拟 OO？

我不会因为没有一流的语言支持而称其为“模拟”。请参阅[GObject](http://developer.gnome.org/gobject/stable/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T12:05:21.070

许多项目在 C 代码库中使用面向对象的范例。由于各种原因，他们不直接使用 CPP。对于系统级或性能密集型项目，其他语言不适合。所以这是cpp和c之间的战斗。

为什么人们在 C 中模拟 OO 而不是完整的 CPP 是激烈争论的话题。Linus torvalds 曾经说过一句名言，CPP 编译器是不值得信赖的。他对 CPP 生成的代码缺乏信心。

Linux 内核是在 C 中实现 OO 设计模式的一个很好的例子。您可以在这个 lwn.net 文章系列中了解 Linux 内核是如何做到的：

[第1部分](http://lwn.net/Articles/444910/)

[第2部分](http://lwn.net/Articles/446317/)

互联网上有一个广泛的免费文档，其中涵盖了用 C 语言实现的全方位 OO 设计模式。

[ooc.pdf](http://www.cs.rit.edu/~ats/books/ooc.pdf)

您可以在同一条路上找到许多其他项目。

例子：

[pjsip](http://www.pjsip.org/)

[苏菲亚](http://sofia-sip.sourceforge.net/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T21:51:03.103

它可能不会在实践中使用，但是学习成员函数和以对象为第一个参数的函数之间的等价概念是非常有价值的。将这个概念放在他们的脑海中将帮助他们解决他们在未来遇到的许多问题。

日复一日，我看到人们在 Stack Overflow 上询问为什么指向将成员函数传递给需要函数指针的东西不起作用的问题，以及类似的事情。他们认为成员函数只是作为对象一部分的一些神奇函数，使整个情况过于复杂。如果他们已经意识到成员函数等同于将对象作为第一个参数的函数，那么他们遇到的问题（即调用方法他们将不知何故需要成员函数指针和对象），如以及可能的解决方案（以某种方式单独传递对象，或进行某种捕获对象的闭包）变得显而易见。显然，太多人只是假装 OO 是“神奇的”而不理解这一点。

在函数式编程中，我们经常教人们如何纯粹根据函数操作来编写数据结构和局部变量以及所有这些东西。并不是说这是实用的——它可能效率低下——但这让他们对函数的力量印象深刻。它可以帮助他们以不同的方式理解事物。如果他们编写编译器或其他东西，也许在路上，这些等价物会派上用场。

计算机科学就是关于等价和约简，以及如何从另一个问题考虑一个问题。我们将 SAT-3 简化为子集和，不是因为这实际上是我们实际解决 SAT-3 问题的方式，而是因为这告诉我们子集和是 NP 完全的。

每隔一段时间，我就会遇到一段由其他人编写的代码，其中非实例方法将指向结构的指针作为参数，我看到一个模式和一个灯泡在我的脑海中熄灭，我说，啊哈，这可以重新分解为实例方法，因为我知道这种等价性。所以你看，知道这些等价性也有助于我们编写更好、更简单的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T14:06:13.730

查看 TI 的“DSP 算法标准”/xDAIS 框架。

有一个通用的 C API，每个符合 DSP 算法的实现都实现了（抱歉重言式）。对所有这些“艺术”的需求源于 DSP 世界中常见的几个问题：

*   相对较小的 RAM
*   多个数据通道（通常并行/并发）
*   复杂的算法使用模式
*   别的我忘记了

该标准和框架旨在使 DSP 工程师更容易使用 3rd 方 DSP 算法。

有一个接口可以配置算法实例并查询其内存需求（基于配置），并且有实际管理内存的支持函数。

一些内存区域，暂存器，可以临时分配并在算法实例处于活动状态时分配给它，而在它处于非活动状态时将其从算法实例中取出并提供给另一个实例，有效共享。

还有将实例内存缓冲区移动到碎片整理内存的功能（和 API）。

还有更多，但我需要重新阅读文档以回忆细节。

例如，参见`IALG_*()`和`ALG_*()`接口方法。

此外，还有一些工具可以验证通用 API 的实现。第三方可以请求 TI 对其进行官方验证。

一些相关链接：[spru352g.pdf](http://www.ti.com/litv/pdf/spru352g)，[spru360e.pdf](http://www.ti.com/litv/pdf/spru360e)。

# javascript - FancyBox 也滚动父页面的内容

> ID：11921867
> 
> 赞同：0
> 
> 时间：2012-08-12T11:39:48.723
> 
> 标签：javascript, scroll, fancybox, fancybox-2

使用带有或不带有鼠标滚轮插件的 FancyBox v2.0.6。如果用户打开 FancyBox，滚动到内容的末尾，然后继续滚动，则父页面将滚动。

这可能令人不安，因为当用户关闭 FancyBox 时，它们不在父页面上的同一位置。

当 FancyBox 打开时，有没有办法阻止父页面滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T17:56:51.860

您可以尝试将这些花式框选项添加到您的自定义脚本中

```
beforeLoad: function(){
 $("body").css({"overflow-y":"hidden"});
},
afterClose: function(){
 $("body").css({"overflow-y":"visible"});
} 
```

...所以基本上它在fancybox打开时停止父页面上的垂直滚动。

# php - HTMLPurifier 导致 500 内部服务器错误

> ID：11921870
> 
> 赞同：2
> 
> 时间：2012-08-12T11:39:58.527
> 
> 标签：php, htmlpurifier

我已使用[此处](http://htmlpurifier.org/docs#toclink0)`HTMLPurifer`找到的默认配置进行设置

除了当我传递包含类似`<script></script>`. 我没有将其过滤为`XSS`攻击，而是收到*内部服务器错误*。

我已经尝试过其他类似的 html`<b></b>`并且这工作正常，所以它必须与脚本标签特别有关。任何的想法？谢谢。

编辑：好的，所以我尝试了各种方法来启用错误日志记录。我故意创建 PHP 错误来测试是否将错误写入日志，这没关系。但是，无论我做什么，我都无法获得 500 错误来记录其原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:53:33.430

我的通灵调试技巧告诉我你应该关闭 mod_security。

# java - 如何在我的 Java 代码中设置最大 JVM 内存大小 (-Xmx)？

> ID：11921872
> 
> 赞同：-2
> 
> 时间：2012-08-12T11:40:28.133
> 
> 标签：java, memory, jar, jvm, command-prompt

**我有一个需要-Xmx1g**内存的 Java 程序。我正在使用 Netbeans IDE 进行应用程序开发。我可以从 IDE 设置这个参数，

右键单击项目->选择“设置配置”->选择“自定义”->将“VM选项”设置为-Xmx1g

设置 Xmx 值后，程序可以正常工作。

但是当我尝试从命令提示符运行 .jar 文件时，它给了我 OutOfMemory 错误。所以**我想在我的 Java 代码中设置这个值（例如：在 main 方法的某个地方）**，这样我就可以从命令提示符运行 .jar 文件。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:47:56.880

据我所知，您不能在您的 java 代码中执行此操作，因为在 main 执行时已经创建了 jvm。但是您仍然可以从命令行使用 xmlx 开关，例如 java -xmx1024m -jar （检查语法，我没有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T22:06:15.343

这是实际的语法，我也对其进行了测试。

java -jar -Xmx1024m [jar_file] [args]

# java - 2 关于单例模式/渴望初始化和同步

> ID：11921878
> 
> 赞同：2
> 
> 时间：2012-08-12T11:41:25.830
> 
> 标签：java, synchronization, singleton, lazy-loading, eager-loading

（来自维基百科）

//延迟初始化：

```
public class Singleton {

    private static volatile Singleton instance = null;

    private Singleton() {   }

    public static Singleton getInstance() {
            if (instance == null) {
                    synchronized (Singleton.class){
                            if (instance == null) {
                                    instance = new Singleton();
                            }
                  }
            }
            return instance;
    }
} 
```

//渴望初始化：

```
public class Singleton {
   private static final Singleton instance = new Singleton();

   private Singleton() {}

   public static Singleton getInstance() {
      return instance;
   }
} 
```

**“如果程序使用类，但可能不是单例实例本身，那么您可能需要切换到延迟初始化。”**

1 - 不确定我明白了。为什么程序不应该使用类？为什么我不能通过添加属性/方法来解决它？恒定的参考应该如何改变？

2 - 在延迟初始化中 - 假设发生多线程，同步 getInstance() 而不是代码块（摆脱双重检查）如何影响我的程序？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:00:45.937

1 - 您的应用程序可能包含各种 jar，但您不一定会使用每个 jar 中的所有功能。此外，您的应用程序的用户可能不会使用您内置的所有功能。例如，如果您有一个 ReportABug 类，他们可能永远不会从菜单中激活该功能，因为您是一位非常棒的程序员；-)

在运行时需要该类之前，不会实例化/调用静态字段/方法，因此您的 ReportABug 类可能有 1000 个静态字段，但手指交叉，它们永远不会消耗任何内存，因为永远不会加载该类。

他们的观点是具有单例（或多个）的类可能具有其他不访问单例的静态方法。

2 - 您可以将方法与 Singleton 类对象同步，但每次调用 getInstance 都会产生开销，仅检查 instance == null （这是一个机器周期）要便宜得多。在外部 ==null 检查之后，另一个线程可能会抢占您的线程并创建实例，因此这两个测试都是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T11:50:17.630

1.  您并不总是使用每个类，也许通过您的程序的某些路径使用实例，而有些则不使用。
2.  同步方法而不是块意味着每次有人想要引用时都必须获取锁。这是非常浪费的。您应该始终使您的`synchronized`块尽可能小，以尽量减少锁争用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T11:47:06.207

1-java中有很多类，你并不总是使用它们。如果我用急切的初始化定义了一个singelton类，而你不需要这个类，我最终会浪费内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-08T10:53:59.697

2.  这种技术称为双重检查锁定，在 JDK 1.5+ 中应避免使用。它用于低于 1.5 的 Java 版本，因为获取内部锁（进入同步块）的成本很高。这不再是真的，应该避免双重检查锁定。

参考实践中的并发 16.7 双重检查锁定反模式。不要这样做。

# email - 在 localhost 上测试消息模块

> ID：11921880
> 
> 赞同：0
> 
> 时间：2012-08-12T11:41:43.903
> 
> 标签：email, smtp, orchardcms, iis-express

我正在尝试让邮件从`Orchard CMS`. 我`IIS Express`在`DEV`环境中运行。`IIS`我的机器上也确实有本地，`(W7 x64).`我正在努力将这一切联系在一起，以查看邮件是否已生成并具有正确的内容。

我试图设置 ua`virtual SMTP server`并`IIS`选择将邮件传递到指定文件夹。但是发送的邮件`Orchard`没有收到。

有什么提示和技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:03:24.610

我不得不对 Orchard.Mail 模块的代码进行一些修改。我更改了 EmailMessagingChannel.cs 中的行：

```
smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network; 
```

进入：

```
smtpClient.PickupDirectoryLocation = somedirectory;
smtpClient.DeliveryMethod = SmtpDeliveryMethod.SpecifiedPickupDirectory; 
```

那行得通。这不应该是在开发时可以打开或关闭的某种环境中吗？

# facebook - Facebook 登录按钮和导航组的 Titanium 问题

> ID：11921882
> 
> 赞同：1
> 
> 时间：2012-08-12T11:42:01.110
> 
> 标签：facebook, navigation, titanium

我有一个用于登录的导航组。如果用户成功登录，则应用程序将关闭导航组（使用 navGroup.close 我假设它已被破坏）并创建一个选项卡组。当用户注销时，选项卡组关闭并再次创建导航组。问题是 facebook 登录按钮（位于导航组上）在第一次创建导航组时工作正常，但第二次执行“登录”侦听器 2 次，3d 时间执行 3 次，依此类推。这是生成此错误的简化代码：

应用程序.js

```
Ti.App.Properties.setString("fbAccess","login");

Ti.Facebook.appid = 'xxxxxxxxxx';
Ti.Facebook.permissions = ['publish_stream','offline_access','email'];
//Ti.Facebook.forceDialogAuth = false;
Ti.include('preLogin.js'); 
```

登录FBC.js

```
Ti.Facebook.addEventListener('login', function(e) {

   Ti.API.info("inside login"); 

   if ((e.success) && (Ti.App.Properties.getString("fbAccess")=="login")) {
                        Ti.API.info("inside if");   

                     navGroup.close();
                     Ti.include('preLogin.js');
                       }}); 
```

preLogin.js

```
var buttonLoginFB = Titanium.UI.createButton({
     top: "90%",
     width: "70%",
     height: "12%"});

var preLoginWin = Titanium.UI.createWindow({  
    titleImage:'/icons/logoForBar.png',     
    title:"Back",
    backgroundColor:'#fff',
    barColor:'00aeef',
   });
var buttonLogin = Titanium.UI.createButton({
     title: 'Login',
     top: "30%",
     width: "70%",
     height: "12%",
     opacity:1
    });

var buttonRegister = Titanium.UI.createButton({
     title: 'Register',
     top: "60%",
     width: "70%",
     height: "12%",
     opacity:1

    });

    var navGroup = Ti.UI.iPhone.createNavigationGroup({
                    window:preLoginWin
    });

    preLoginWin.add(buttonLogin,buttonRegister,buttonLoginFB);

    var main = Ti.UI.createWindow();

    main.add(navGroup); 
    main.open();

Ti.include('/loginFBC.js');
//include the preLoginC.js that holds the code for the buttons listeners
Ti.include('/preLoginC.js'); 
```

和 preLoginC.js

```
buttonLoginFB.addEventListener("click", function(e) {

Ti.API.info("button");

Ti.Facebook.logout();
Ti.Facebook.appid = 'xxxxxxxxxxx';
Ti.Facebook.permissions = ['publish_stream','offline_access','email'];
//Ti.Facebook.forceDialogAuth = false;
Ti.Facebook.authorize();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:16:24.090

您真的应该重新考虑如何布局您的应用程序，首先，您定义的所有内容都在全局 javascript 命名空间中，这是一个非常糟糕的主意：请参阅[有关 Titanium Javascript 最佳实践的演讲。](http://player.vimeo.com/video/29754525?title=0&byline=0&portrait=0&color=9a0707&autoplay=1)

您可能不应该做的第二件事是拥有一个带有标签栏的导航组。相反，为什么不直接用这样的一次性模态打开一个新窗口呢？

```
var modalWindow = Ti.UI.createWindow({...formatting here...});
modalWindow.open({modal : true}); 
```

除了不好的做法，您看到多个 facebook 窗口弹出的原因是因为您已将多个事件侦听器添加到*buttonLoginFB*按钮。发生这种情况是因为您在授权 Facebook 时包含了 preLogin.js，而后者又包含*了*添加您的侦听器的*preLoginC.js 。*

要解决此问题，您需要根据 Titanium 最佳实践更改您的通用架构。将您的 UI 元素移动到更安全的命名空间中，并且不要在事件侦听器中包含 Javascript 文件，这总是会导致问题。

希望这可以帮助！

# asp.net-mvc - 使用 Ninject 时如何处理 DBContext

> ID：11921883
> 
> 赞同：25
> 
> 时间：2012-08-12T11:42:14.610
> 
> 标签：asp.net-mvc, ninject, telerik-open-access

我第一次尝试使用 Ninject 和 OpenAccess。请帮我解决以下问题。这是我的项目的样子......

```
public class ContentController : Controller
{
    private ContentService contentSvc;

    public ContentController(ContentService contentSvc)
    {
        this.contentSvc = contentSvc;
    }
} 
```

以下类位于我的网络应用程序中的一个文件夹下。

```
public class ContentService
{
    private IContentRepository contentRepository;

    public ContentService(IContentRepository contentRepository)
    {
        this.contentRepository = contentRepository;
    }

    public void InsertContent(Content content)
    {
         contentRepository.InsertContent(content);
    }
} 
```

以下存储库属于单独的程序集。

```
public class ContentRepository : IContentRepository
{
    DBContext db;
    public ContentRepository(DBContext _db)
    {
        db = _db;
    }

    public void InsertContent(Content content)
    {
             db.Add(content);
    }
} 
```

这是 Ninject 绑定的样子..

```
kernel.Bind<ContentService>().To<ContentService>().InRequestScope();
kernel.Bind<IContentRepository>().To<ContentRepository>().InRequestScope().WithConstructorArgument("_db", new DBContext()); 
```

如果我一次取一页，一切正常。我正在使用一个简单的工具“XENU”同时获取多个页面。这是当我一次获取多个页面时出现 DBContext 错误的时候。

我不确定 Ninject 是否在每个 REQUEST 中添加 DBContext？我收到不同的错误，例如“对象引用未设置为对象的实例。”或“ExecuteReader 需要打开且可用的连接。连接的当前状态是打开的。

## 附言

我的 MVC Web 应用程序的文件夹下有 ContentService。ContentRepository 是一个单独的程序集。我将在 ContentService 中添加业务逻辑，并将“ContentRepository”仅用于 CRUD 操作。另外，请让我知道这种架构是否可以，或者是否有更好的方法来创建服务和存储库。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-12T11:56:20.513

以下是我将如何做你的 Ninject 绑定，

```
kernel.Bind<DBContext>().ToSelf().InRequestScope();
kernel.Bind<ContentService>().ToSelf().InRequestScope();
kernel.Bind<IContentRepository>().To<ContentRepository>().InRequestScope(); 
```

这种模式在上面的例子中使用 EF 和 Ninject 应该可以正常工作。

# facebook - 使用 PHP SDK 在 Facebook 应用中请求扩展访问令牌的位置

> ID：11921886
> 
> 赞同：0
> 
> 时间：2012-08-12T11:42:41.433
> 
> 标签：facebook, authentication, access-token, facebook-access-token

我需要在用户离线时访问他们的信息，并且我了解我需要使用持续 60 天的扩展访问令牌。我一直在看这篇 SO 帖子[How to extend access token validation since offline_access deprecation](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation)，这表示我需要在我的 base_facebook.php 文件中包含所述方法并调用该方法。

但是，查看我的代码，在任何地方都没有明确请求或使用访问令牌，所以我不确定如何请求扩展访问令牌。这篇文章[我需要在 Facebook API 中使用访问令牌吗？](https://stackoverflow.com/questions/8052972/do-i-need-to-use-access-token-in-facebook-api)解释了使用 PHP SDK 访问令牌会自动附加到 api 请求，这可以解释为什么我到目前为止从未遇到过访问令牌。

所以我的问题是如何让用户在使用 PHP SDK 方法 getExtendedAccessToken() 登录时提供扩展访问令牌？

**编辑：这里的一个关键点是您似乎无法为自己的应用程序获取扩展访问令牌！我与我的一位测试用户一起尝试过，效果很好！另一点需要注意的是，访问令牌工具默认情况下只会显示实际开发应用程序的人的访问令牌。要查看其他用户的访问令牌的详细信息，您需要转到调试器部分并在那里输入访问令牌。希望这可以帮助。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:02:54.527

如果您没有看到对访问令牌的任何引用，它们很可能存储在会话变量中。您可以尝试添加`echo "<pre>";print_r($_SESSION);exit(0);`代码以查看会话中存储的内容。您可以在登录后将其添加到某处。

如果您从 PHP SDK 调用 getExtendedAccessToken()，则返回的访问令牌将自动长期存在。要在它们被引导回您的站点后检索它，您可以使用 getAccessToken() 方法。然后，您将存储返回的值，并在以后使用 setAccessToken($stored_token) 进行调用时使用它。

希望有帮助。

# sql - 在 oracle 中使用游标插入和更新记录

> ID：11921889
> 
> 赞同：3
> 
> 时间：2012-08-12T11:43:26.713
> 
> 标签：sql, oracle, cursor

我有 2 个表 -`student`并且`studLoad`都有 2 个字段`studID`和`studName`. 我想将数据从`student`表加载到`stuLoad`表中。如果数据已经存在于`studLoad`表中，那么应该更新它，否则应该插入它。以下是我这样做的代码：

```
 create or replace procedure studentLoad is
v_id student.studID%type;
v_name student.studName%type;
v_sn studLoad.studName%type;
cursor cur_load is
select * from student;

begin
  open cur_load;
  loop
   fetch cur_load into v_id,v_name;

   exit when cur_load%notfound;
   select studName into v_sn from studLoad where studID = v_id;
   if(v_sn!= v_name) then
      update studLoad set studName= v_name where studID= v_id;
   else
      insert into studLoad values(v_id,v_name);
   dbms_output.put_line(v_id || ' ' || v_name);
   end if;
  end loop;
      close cur_load;
end; 
```

它不工作。studLoad 表中的行未更新。我该如何解决这个问题？`IF EXISTS(select...from stuLoad..)`在我们用来检查表中是否存在记录的SQL Server中，有没有办法在 Oracle 中做同样的事情？如果是，那么请让我知道。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T11:50:07.717

这是一种非常低效的方法。您可以使用该[`merge`](http://psoug.org/reference/merge.html)语句，然后就不需要游标、循环或（如果可以不用的话）PL/SQL。

```
MERGE INTO studLoad l
USING ( SELECT studId, studName FROM student ) s
ON (l.studId = s.studId)
WHEN MATCHED THEN
  UPDATE SET l.studName = s.studName
   WHERE l.studName != s.studName
WHEN NOT MATCHED THEN 
INSERT (l.studID, l.studName)
VALUES (s.studId, s.studName) 
```

确保您`commit`在完成后能够在数据库中看到它。

* * *

要真正回答你的问题，我会这样做如下。这样做的好处是可以在 SQL 中完成大部分工作，并且仅基于 rowid（表中的唯一地址）进行更新。

它声明了一种类型，您可以将数据批量放置在其中，一次 10,000 行。然后单独处理这些行。

但是，正如我所说，这不会像`merge`.

```
declare

   cursor c_data is
    select b.rowid as rid, a.studId, a.studName
      from student a
      left outer join studLoad b
        on a.studId = b.studId
       and a.studName <> b.studName
           ;

   type t__data is table of c_data%rowtype index by binary_integer;
   t_data t__data;

begin

   open c_data;
   loop
      fetch c_data bulk collect into t_data limit 10000;

      exit when t_data.count = 0;

      for idx in t_data.first .. t_data.last loop
         if t_data(idx).rid is null then
            insert into studLoad (studId, studName)
            values (t_data(idx).studId, t_data(idx).studName);
         else
            update studLoad
               set studName = t_data(idx).studName
             where rowid = t_data(idx).rid
                   ;
         end if;
      end loop;

   end loop;
   close c_data;

end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-22T13:56:33.743

如果您想使用您的过程，请考虑更改一些行：

```
create or replace procedure studentLoad is
v_id student.studID%type;
v_name student.studName%type;
v_sn studLoad.studName%type;
cursor cur_load is
       select * from student;
begin
    open cur_load;
    loop
        fetch cur_load into v_id,v_name;
        exit when cur_load%notfound;
        begin
           select studName into v_sn from studLoad where studID = v_id;
           if(v_sn!= v_name) then
               update studLoad set studName= v_name where studID= v_id;
           end if;
        exception
           when no_data_found then
                insert into studLoad values(v_id,v_name);
        end;
        dbms_output.put_line(v_id || ' ' || v_name);
    end loop;
    close cur_load;
end; 
```

我认为它应该工作，没有测试它。

# php - 如何动态地将缩略图标题作为 WP 中的帖子标题？

> ID：11921894
> 
> 赞同：0
> 
> 时间：2012-08-12T11:43:48.727
> 
> 标签：php, wordpress, themes

我现在有一个功能来制作缩略图的大小：

```
if (function_exists('add_theme_support')) {
    add_theme_support('post-thumbnails');
    set_post_thumbnail_size(200,112);
} 
```

我想将值`title=""`作为帖子标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:59:29.273

欢迎来到 SO。如果此答案对您有所帮助，请不要忘记接受它是正确的。

```
the_post_thumbnail('medium', array('title' => strip_tags(get_the_title()))); 
```

或者

```
echo get_the_post_thumbnail( $post->ID, 'post-thumbnail', array('title' => strip_tags(get_the_title())) ); 
```

* * *

**OBS：** “设置缩略图”现在在仪表板中称为“特色图像”

![在此处输入图像描述](../Images/c6d8da4b3321af72e48e0abc98cea783.png)

*好好享受！*

# mesh - 四面体网格

> ID：11921898
> 
> 赞同：9
> 
> 时间：2012-08-12T11:45:07.250
> 
> 标签：mesh, triangulation, tetrahedra

我正在寻找一种算法，它接收 3d 表面网格（即由 3d 三角形组成，这些三角形是一些流形的离散化）并在网格体积内生成四面体。

即，我想要与这个 2d 问题等效的 3d：给定一条闭合曲线，对其内部进行三角测量。

如果不清楚，我很抱歉，这是我能想到的最好的解释方式。

对于 2d 案例，有[Triangle](http://www.cs.cmu.edu/~quake/triangle.html)。对于 3d 案例，我找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-29T20:09:05.593

[pygalmesh](https://github.com/nschloe/pygalmesh/#volume-meshes-from-surface-meshes)（我的一个基于[CGAL](https://www.cgal.org/)的项目）可以做到这一点。

```
pygalmesh-volume-from-surface elephant.vtu out.vtk --cell-size 1.0 --odt 
```

[https://github.com/nschloe/pygalmesh/#volume-meshes-from-surface-meshes](https://github.com/nschloe/pygalmesh/#volume-meshes-from-surface-meshes)

[![在此处输入图像描述](../Images/a0fba4fc43df0f8c098223a7f132d81d.png)](https://i.stack.imgur.com/Kpfp2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T22:04:16.757

我发现[GRUMMP](http://tetra.mech.ubc.ca/GRUMMP/)似乎可以回答问题中提到的所有需求，还有更多......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T19:43:02.793

我没有任何使用 GRUMMP 的经验，但就三角形的 3D 版本而言，有 tetgen。如果您知道三角形开关，它的构造类似于它。它也有相当不错的文档和一个 python 包装器和三角形。

[http://wias-berlin.de/software/tetgen/](http://wias-berlin.de/software/tetgen/)

[http://mathema.tician.de/software/meshpy/](http://mathema.tician.de/software/meshpy/)

# iphone - 将 GISmap 视图添加到 iPhone 中的 WebView

> ID：11921899
> 
> 赞同：0
> 
> 时间：2012-08-12T11:45:12.047
> 
> 标签：iphone, objective-c, gis, esri

我正在开发一个适用于 phonegap 的 iPhone 应用程序。我想将它与 ArcGIS,esri 的 GIS 地图服务连接起来。

我看到了一些他们如何添加地图的例子。他们创建一个 xib 文件并在那里设计视图并将其连接到 ViewController ......我想要的是将地图添加到**WEBview**。

在我添加了所有框架和我尝试过的所有东西之后：

```
MapViewDemoViewController *test = [[MapViewDemoViewController alloc]initWithFrame:CGRectMake(20,95, 285, 285)];
[[self.webView superview] addSubview:test] 
```

但我收到一条错误消息：

```
Incompatible pointer types sending 'MapViewDemoViewController *' to parameter of type 'UIView *'

'MapViewDemoViewController' may not respond to 'initWithFrame:' 
```

也许有人对这些地图有一些经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T08:02:45.947

是的，您需要更换：

```
[[self.webView superview] addSubview:test] 
```

和

```
[[self.webView superview] addSubview:test.view] 
```

修复编译器警告，但我有点怀疑......这似乎不是将地图添加到 web 视图的明智方法。看起来很不对劲。

# android-intent - 意图中的空指针异常

> ID：11921901
> 
> 赞同：0
> 
> 时间：2012-08-12T11:45:16.003
> 
> 标签：android-intent, nullpointerexception, inner-classes

我在对我的其他（谷歌）活动做出意图的行中收到一个空指针异常。`startActivity(go)`在我的内部类 MyEventHandler 的 onclick 方法中调用。请告诉我哪里出错了。我是安卓新手。

```
**package pack.Assignment;**

public class Landing extends Activity {
// url to make request

private static String url = "http://playup-jo.s3.amazonaws.com/dev/config.json";
private ProgressDialog pDialog;
ImageView img;
// tiles JSONArray
JSONArray tiles=null;
private String server;
Intent go = new Intent(getApplicationContext(), Google.class);

// JSON Node names
private static final String TAG_SERVER = "server";
private static final String TAG_TILES = "tiles";
private static final String TAG_IMAGE = "image";
private static final String TAG_URL = "url";
private static final String TAG_MDPI = "mdpi";
private static final String TAG_NAME = "name";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.landing);
    // Loading JSON in Background Thread
    new LoadJSON().execute(); 

}
/**
 * Background Async Task to Load all INBOX messages by making HTTP Request
 * */
class LoadJSON extends AsyncTask<String, String, Bitmap> {
    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(Landing.this);
        pDialog.setMessage("Loading ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting JSON
     * */
    protected Bitmap doInBackground(String... args) {

        // getting JSON string from URL
         JSONParser jParser = new JSONParser();

        JSONObject json = jParser.getJSONFromUrl(url);
        Bitmap bitmap=null;

        try {
            server = json.getString("server");
            // Getting Array of Tiles
            tiles = json.getJSONArray(TAG_TILES);

            // looping through All Tiles
            for(int i = 0; i < tiles.length(); i++){
                JSONObject c = tiles.getJSONObject(i);

                // Storing json item in variable 
                String name = c.getString(TAG_NAME);
                System.out.println("name :"+name);

                // mdpi is again JSONObject
                JSONObject mdpi= c.getJSONObject(TAG_MDPI);
                String image=mdpi.getString(TAG_IMAGE);
                String image_url = server+image;
                String url=mdpi.getString(TAG_URL);

                // Using the variable to get the bitmap

                try {
                      bitmap = BitmapFactory.decodeStream((InputStream)new URL(image_url).getContent());
                    } 
                catch (MalformedURLException e) {
                      e.printStackTrace();
                    } 
                catch (IOException e) {
                      e.printStackTrace();
                    }                       
            }

        } 
        catch (JSONException e) {
            e.printStackTrace();
     }

        return bitmap;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(final Bitmap result) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        img = (ImageView)findViewById(R.id.image);

         img.setImageBitmap(result);
      MyEventHandler myEvHandler = new MyEventHandler(); 
      // making the downloaded image clickable 
      img.setOnClickListener(myEvHandler);
    }

} 
class MyEventHandler implements OnClickListener
{
    public void onClick(View v)
    {
        if (v instanceof ImageView)
        {

           startActivity(go);
        }       
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:50:49.033

也许你应该在 onCreate 中初始化意图。虽然这只是一种预感，但请尝试一下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:57:11.493

您的问题实际上并不是在创建调用方法的意图`getApplicationContext()`。这应该在适当的时候调用。这样做一次`onCreate()`已被调用。

# java - 为什么我不能导入 android.os.StrictMode？

> ID：11921903
> 
> 赞同：2
> 
> 时间：2012-08-12T11:45:42.687
> 
> 标签：java, android, android-strictmode

为什么我在导入 android.os.StrictMode 时遇到错误？

```
import android.os.StrictMode; 

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
--->StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

我试图实现一个 strictmode.java 类。[strictmode.java 取自这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.4_r1/android/os/StrictMode.java)。但是，我面临着这个的导入错误。

```
import android.app.ActivityManagerNative;
import android.app.ApplicationErrorReport;
import com.android.internal.os.RuntimeInit;
import dalvik.system.BlockGuard; 
```

我该怎么办？还是有另一种实现方式？我必须实现它才能在 Android 3.0 上运行我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T12:20:53.637

`StrictMode`从 API 级别 9 开始可用。

因此，请确保您的构建目标至少为 API 级别 9 (Android 2.3.1)。

# iphone - 如何使用 Objective c 登录网站

> ID：11921908
> 
> 赞同：0
> 
> 时间：2012-08-12T11:46:09.457
> 
> 标签：iphone, objective-c, forms, http, ios5

我正在做一个项目，我需要登录一个站点，登录后检索一个 URL 并解析数据。到目前为止，我已经能够在不登录的情况下解析我需要的一些站点数据，但现在我需要登录才能检索其余数据。

我不确定如何登录和存储会话，以便检索另一个 URL。我从以下代码得到的响应不包含任何数据。responseData 和 responseString 为空。

```
- (void) login {

NSMutableURLRequest *loginRequest = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://www.theSite.com/booker/admin.php"]];
NSString *postString = @"go=1&NewUserName=testUserName&NewUserPassword=testPassword&returl=http://www.theSite.com/booker/day.php?day=12&month=08&year=2012&area=0&room=3&TargetURL=http://www.theSite.com/booker/day.php?day=12&month=08&year=2012&area=0&room=3&day.php?day=12&month=08&year=2012&area=0&room=3&Action=SetName";

[loginRequest setHTTPMethod:@"POST"];
[loginRequest setValue:[NSString stringWithFormat:@"%d", [postString length]] 
    forHTTPHeaderField:@"Content-length"];
[loginRequest setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
[[NSURLConnection alloc] initWithRequest:loginRequest delegate:self];

}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {

        responseData = [NSMutableData new];
        NSString* responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
        NSLog(@"the html was %@", responseString);
} 
```

# php - 对这些术语查询使用 ORDER BY

> ID：11921909
> 
> 赞同：3
> 
> 时间：2012-08-12T11:46:51.920
> 
> 标签：php, mysql, sql

是的，我有两个查询扫描 MYSQL 数据库中的关键字并返回它们，无论它们是 a) 一起还是 b) 分开。我现在添加了一个名为“rank”的新列，它按顺序排列它们。我在每个查询中添加了“ORDER BY rank”，当我输入一个词时，结果会正确显示，但是当输入两个或更多词时，我得到这个错误：MySQL Query Error: You have an error in your SQL syntax ; 检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“ORDER BY rank”附近使用正确的语法。结果自动按 id 排名。当我从一个查询中删除一个 ORDER BY 标签时，另一个查询的标签将不起作用。我不明白？我的查询如下。

```
 // Terms Together
    $query = " SELECT * FROM scan WHERE "; 

$terms = array_map('mysql_real_escape_string', $terms);
$i = 0; 
foreach ($terms as $each) {
      if ($i++ !== 0){
            $query .= " AND ";
      }
      $query .= "keywords LIKE '%{$each}%' ORDER BY rank";
}

            /* Query Statement Building - Terms Separate */
    $query = " SELECT * FROM scan WHERE "; 

    $terms = array_map('mysql_real_escape_string', $terms);
    $i = 0; 
    foreach ($terms as $each) {
          if ($i++ !== 0){
                $query .= " OR "; 
          }
          $query .= "keywords LIKE '%{$each}%' ORDER BY rank";
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T11:49:03.977

必须出现在循环的`ORDER BY`末尾，而不是循环内。否则，`ORDER BY`每个查询都会得到多个语句，这是无效的：

```
foreach ($terms as $each) {
      if ($i++ !== 0){
            $query .= " OR "; 
      }
      $query .= "keywords LIKE '%{$each}%'";
}
// Don't append the ORDER BY until after the loop
$query .= " ORDER BY rank"; 
```

更改*两个*循环以使用此模式而不是您当前拥有的模式。

# php - 从命名空间中的变量名实例化一个新类

> ID：11921911
> 
> 赞同：5
> 
> 时间：2012-08-12T11:47:28.973
> 
> 标签：php, oop, object, namespaces

假设我有一个类：

```
//no namespace
class User { 
    //...
} 
```

我有一个变量：

```
$model = 'User'; 
```

`new User`当我当前在命名空间中时，如何实例化 a ？

`new $model`当我不在命名空间中时工作。但是，如果我在命名空间中而`User`不是在命名空间中怎么办。

像这样的东西不起作用：

```
namespace Admin;

class Foo {
    function fighter($model)
    {
        return new \$model;
        // syntax error, unexpected '$model'
    }
}

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T12:00:24.403

首先将完整的命名空间放在一个变量中，然后使用它。

```
<?php    
$namespace = '\\'.$model;

return new $namespace
?> 
```

同一主题：[PHP 命名空间可以包含变量吗？](https://stackoverflow.com/questions/5287315/can-php-namespaces-contain-variables)

# drupal - 无法创建内容类型

> ID：11921916
> 
> 赞同：0
> 
> 时间：2012-08-12T11:48:11.953
> 
> 标签：drupal, module

这是来自 Drupal.org 上的示例模块中的 node_example，我将它们中的大部分删掉了，现在这应该是 node_example.install 的编辑版本：http: [//newstartpoint.com/public/node_example.install.txt](http://newstartpoint.com/public/node_example.install.txt)

现在这是我自己设法得到的：这个[http://newstartpoint.com/public/tudou_update.install.txt](http://newstartpoint.com/public/tudou_update.install.txt)。上面的一个有效，但我编程的那个无效。谁能给我一些想法？它们看起来几乎相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:10:26.143

我不能明确地说这是否是问题（因为我没有完整的模块来测试）。但是，在您的文件[http://newstartpoint.com/public/tudou_update.install.txt的第 18 行](http://newstartpoint.com/public/tudou_update.install.txt)

你没有

```
'custom' => TRUE, 
```

和原来的一样。

这个关于它的文档有点令人困惑：[http ://api.drupal.org/api/drupal/modules!node!node.module/function/node_type_set_defaults/7](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_type_set_defaults/7)

否则文件基本相同。错误日志中有任何内容吗？

# jquery - 使用 jQuery / Flash / HTML5 上传图片

> ID：11921926
> 
> 赞同：0
> 
> 时间：2012-08-12T11:50:49.343
> 
> 标签：jquery, flash, html, file-upload, upload

是否有任何类似于 Codecanyon 网站用于上传文件的上传工具或插件？我已经尝试过 Uploadify，但它不适用于某些浏览器。我需要适用于所有浏览器的东西，不管它是 flash 还是 HTML5 或其他任何东西。易于使用的东西。谢谢

![在此处输入图像描述](../Images/5e6f6f8e8339f76d1139ebfe3cb4016a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:54:35.823

您可以尝试[Uploadify](http://www.uploadify.com/)，这是一个基于 Flash 的文件上传器。它与 Codecanyon 中的不完全相同或不完全相同。但它是高度可定制的。Uploadify 的几乎每个方面都是完全可定制的，因此您可以创建完美适合您网站的上传器。

您也可以尝试[Plupload](http://www.plupload.com/)、[SWFUpload jQuery 插件](http://blogs.bigfish.tv/adam/2009/06/14/swfupload-jquery-plugin/)、[jqswfupload](http://www.alexandremagno.net/blogs/jqswfupload/)、[jcUpload](http://www.jcupload.com/)、[Flex 多文件上传](http://fusiongrokker.com/post/flex-multi-file-upload)或[Flash Uploader](http://www.solmetra.com/en/disp.php/en_products/flash_uploader/uploader_intro)。

# macos - Protobuf、OSX、ant编译错误

> ID：11921927
> 
> 赞同：0
> 
> 时间：2012-08-12T11:50:52.840
> 
> 标签：macos, ant, protocol-buffers, dylib

我使用用 Ant 编译的 protobuf 项目。这些`proto`文件通过 SVN 共享，并使用以下方法在本地编译为 Java 类：

```
ant protobuf 
```

我最近升级了 OSX Mountain Lion。当其中一个`proto`文件发生更改时，我在构建时遇到此错误：

```
Library not loaded: /usr/local/lib/libprotobuf.6.dylib 
```

我如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:52:25.803

看来我已经从旧驱动器中复制了整个文件夹以及二进制文件。

**唯一有效的解决方案是在本地删除 repo，然后再次检查。**结帐完成后，我用`ant protobuf`. 它从头开始构建所有库（约 2 分钟），重新安装库并编译`proto`文件没有错误。

# php - DIV 容器保持空白

> ID：11921935
> 
> 赞同：1
> 
> 时间：2012-08-12T11:53:17.820
> 
> 标签：php, javascript, ajax, json

我需要`find_optimal_schedule()`每 5 秒运行一次函数，同时每次更新 DIV 容器`schedule`。下面是我的代码片段。问题是`alert("Init")`执行，而`alert("True")`或`alert("False")`不执行。FireBug 显示`optimize.php`每 5 秒运行一次，但我不明白为什么 DIV 容器的内容一直保持空白。

PS 代码`gantt.php`工作正常，因为我在没有计时器的 DIV 容器中对其进行了测试，并且甘特图显示正确。因此，我在这里不提供此代码，因为事实并非如此。

**调度程序.php**

```
<script>
window.setInterval(function(){                 
     find_optimal_schedule();
}, 5000);
</script>

<script>
function find_optimal_schedule() {
    $.ajax({
        url: 'modules/mod_scheduler/pages.php?page=optimize.php',
        dataType: 'json',
        success: function(output){
            alert("Init");
            if(output.msg === 1){
                alert("True");
                $('#schedule').html(output.html);
            } else {
                alert("False");
                return false;
            }
        }
    });
}
</script>

<div style="width:100%; height:350px; position:relative" id="schedule" class="schedule"></div> 
```

**pages.php**

```
<?php
    @session_start();

    @$pag_mod = $_GET['pag_mod'];

    if(!isset($pag_mod))
        $pag_mod = 0;

    if (isset($_GET['pag_mod'])) {
        include 'modules/mod_scheduler/'.$_GET['pag_mod'];
    }
    else {
        include 'modules/mod_scheduler/scheduler.php';
    }
?> 
```

**优化.php**

```
<?php
//  Dispay Gantt chart
$html_code = '<img src="modules/mod_scheduler/gantt.php">';

echo json_encode(array('msg' => 1, 'html' => $html_code)); 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T11:55:41.820

我相信你 output.msg 应该与`==`而不是进行比较`===`。

```
if(output.msg == 1){
    alert("True");
    $('#schedule').html(output.html);
} else {
    alert("False");
    return false;
} 
```

通过 nnnnn，它似乎`===`对 javascript 中的比较有效；因此，我唯一能想到的是 output.msg 是未定义的。由于`===`不会导致 javascript 错误，因此 output.msg 是唯一可能的其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T11:59:17.630

您正在使用**严格的相等**运算符 (===) 而不是**相等**。

这意味着除了值之外，如果**数据类型也被认为相等，则比较为真；**可能`output.msg`以字符串形式出现，并不等同于数字。尝试 == 代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T12:03:24.487

尝试

```
console.log(output) 
```

查看输出是否为有效对象。Firebug 应该向您展示整个对象及其所有属性。

# asp.net-mvc - ASP.NET MVC 4 - 我应该如何加密到我的生产 SQL 服务器的连接字符串？

> ID：11921936
> 
> 赞同：9
> 
> 时间：2012-08-12T11:53:17.457
> 
> 标签：asp.net-mvc, deployment, encryption, asp.net-mvc-4, azure-sql-database

我有一个 ASP.NET MVC 4 项目，该项目将部署到 Azure 进行生产，在生产中我使用 SQL Azure 数据库。我的问题是我只想在生产部署中连接到 SQL Azure 数据库，而不是在开发时，*并且*SQL Azure 连接字符串应该加密。

现在，我可以通过 Web.config 转换解决第一个要求，以便在部署到 Azure 时替换数据库连接字符串。但是，我看不到如何将它与连接字符串加密结合起来？如何在部署时既加密 SQL Azure 连接字符串又用它代替开发连接字符串？这种情况下的最佳实践将是最受欢迎的:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T18:06:50.183

我认为这里一个好的解决方案是将生产`<connectionStrings>`部分输入Web.config并对其进行加密，然后将加密`<connectionStrings>`部分移动到转换文件（例如Web.Release.config）并对其进行注释，以便`<connectionStrings>`在转换时替换整个部分. 这实现了使用同样加密的生产连接字符串部署 Web.config 的目标。

我已按照“在 Windows Azure 中保护连接字符串”中的指南[第](https://azure.microsoft.com/en-us/blog/securing-your-connection-string-in-windows-azure-part-4/)1、2、3和[4](https://azure.microsoft.com/en-us/blog/securing-your-connection-string-in-windows-azure-part-2/)[部分](https://azure.microsoft.com/en-us/blog/securing-your-connection-string-in-windows-azure-part-1/)了解[如何](https://azure.microsoft.com/en-us/blog/securing-your-connection-string-in-windows-azure-part-3/)加密 Web.config。我建议作为一个完整的参考，其他人也这样做。我将概述我为解决我的场景而执行的主要步骤。

`<connectionStrings>`在使用生产设置更新 Web.config 中的部分后，我安装了[Pkcs12 Protected Configuration Provider](http://archive.msdn.microsoft.com/pkcs12protectedconfg)并运行 aspnet_regiis.exe 来加密该部分（在 Visual Studio 命令提示符中，位于项目目录中）：

```
aspnet_regiis -pef "connectionStrings" "." -prov "CustomProvider" 
```

`CustomProvider`我还在Web.config中添加了一个定义：

```
<configProtectedData>
  <providers>
    <add name="CustomProvider" thumbprint="<your thumbprint here>"
       type="Pkcs12ProtectedConfigurationProvider.Pkcs12ProtectedConfigurationProvider, PKCS12ProtectedConfigurationProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=34da007ac91f901d"/>
  </providers>
</configProtectedData> 
```

之后，我将加密的`<connectionStrings>`部分移动到 Web.Release.config（用于在部署到 Azure 时转换 Web.config），并注释该部分，以便它替换 Web.config 中的相应部分：

```
connectionStrings configProtectionProvider="CustomProvider" xdt:Transform="Replace">
...
</connectionStrings> 
```

`<connectionStrings>`最后，我在 Web.config 中恢复了开发部分。我已经测试了这个解决方案，发现部署的 Web.config 包含加密`<connectionStrings>`部分，就像我之后一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:10:56.187

您将加密 web.config 文件中的部分。

有关如何加密 web.config 文件部分的信息，请参阅 MSDN。

[http://msdn.microsoft.com/en-us/library/zhhddkxy.aspx](http://msdn.microsoft.com/en-us/library/zhhddkxy.aspx)

在您的情况下，我将设置的是运行该命令行选项的 POST 构建事件，有条件地仅针对该特定构建配置。

例如：

```
if $(ConfigurationName) == Release_Production {path-to-.net-framework}\aspnet_regiis\Aspnet_regiis.exe {your options here} 
```

请记住，构建后事件只是简单的 DOS 命令。您甚至可以使用 () 来确定多个命令的范围。if 仅适用于该 1 行，除非您确定它的范围。标准命令行限制。如果您在设置时遇到问题，请在此处评论，但请发布您的命令行。

# css - 将具有 display:inline-block 集的容器居中

> ID：11921938
> 
> 赞同：0
> 
> 时间：2012-08-12T11:53:33.090
> 
> 标签：css

嗨，我有一个容器，其中将添加多个元素，所以我真的不知道容器的宽度是多少，因为元素是动态添加的。我需要这个容器居中，所以我认为我应该使用 display :inline-block 使 div 的宽度和高度根据它的元素进行设置，但是在我使用它之后，属性 margin:0 auto 不再起作用。这是我试图实现的一个简单示例：

```
<div> 
      <ul>
           <li>All</li>
           <li>Web Design</li>
      </ul>
</div>

div{
      display:inline-block;
      margin:0 auto;
} 
```

无论该容器中有多少元素，我都希望它居中。我当前的尝试不起作用，那么我该如何居中这个容器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:05:12.367

添加`text-align: center`到 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:08:27.993

您可以通过添加具有显示块并对其进行设置的包装器 div`text-align:center`来实现：

```
<div id="wrapper">
    <div> 
      <ul>
           <li>All</li>
           <li>Web Design</li>
      </ul>
</div>
</div>​

div#wrapper{
    text-align:center; 
    display:block;    
}
div{
      display:inline-block;
      margin:0 auto;
}​ 
```

看到[这个](http://jsfiddle.net/w6mJe/)小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T08:15:51.047

```
div{
      display:inline-block;
      margin:0 auto;
      text-align: center
} 
```

# ruby - 如何将二维数组转换为一维字符串数组？

> ID：11921940
> 
> 赞同：0
> 
> 时间：2012-08-12T11:53:52.500
> 
> 标签：ruby, arrays

我有一个以下形式的二维数组：

```
[  [(,  (,  (,  (,  (,],
   [1.0,1.0,1.0,1.0,1.0,], 
   [+,  +,  +,  +,  +,],
   [2.0,2.0,2.0,2.0,2.0,],
   [),  ),  ),  ),  )] 

] 
```

即整数和数学字符的混合。我想要做的是将其转换为一维数组中的一系列字符串，例如：

[ (1+2), (1+2), (1+2), (1+2), (1+2) ]

有没有办法通过加入来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:02:10.310

```
xs.transpose.map(&:join)
#=> ["(1.1+2.1)", "(1.2+2.2)", "(1.3+2.3)", "(1.4+2.4)", "(1.5+2.5)"] 
```

（旁注：如果你想知道为什么我们不能写`Array.zip(*xs)`看看这个[问题](http://bugs.ruby-lang.org/issues/6499)。Facets的[人确实实现了它](https://github.com/rubyworks/facets/commit/7cd2234776a98e8cd12432cbcf21f9ed3ee9a9c4)。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T12:43:40.240

您可以使用[transpose](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-transpose)，然后加入转置数组的元素（我已经修改了数字以清楚地显示正在发生的事情）：

```
# edited to add a transpose with map, thank you @Mladen
# edited to get rid of <<'s, thank you @tokland

# assumption: 
a = [ ['(', '(', '(', '(', '('],
      [1.1, 1.2, 1.3, 1.4, 1.5],
      ['+', '+', '+', '+', '+'],
      [2.1, 2.2, 2.3, 2.4, 2.5],
      [')', ')', ')', ')', ')'] ]

# transpose:
b = []
a.transpose.each { |c| b.push c.join }

# or, transpose with map:
b = a.transpose.map { |c| c.join }

# test:
puts b.inspect 
```

其中有一个输出：

```
["(1.1+2.1)", "(1.2+2.2)", "(1.3+2.3)", "(1.4+2.4)", "(1.5+2.5)"] 
```

# android - 我可以编辑适用于 Android 的 Google 地图 API 吗？

> ID：11921948
> 
> 赞同：0
> 
> 时间：2012-08-12T11:55:50.030
> 
> 标签：android, google-maps, edit

我想编辑它以便在我需要的地图中添加一些 TextView。例如，右上角的文本视图具有位置准确性的实时信息。

如果您知道一种无需修改 google maps api for android 的方法，请告诉我。

我已阅读该服务的使用条款，但如果我可以修改地图 jar，我没有得到明确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:42:52.780

您无需修改​​地图 API。您需要做的就是使用 RelativeLayout 作为布局的根容器，并向其中添加 MapView 和 TextView 以显示您想要的文本。

这是一个示例代码

```
<RelativeLayout 
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
 <MapView 
  android:id="@+id/mapview"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
   />
 <TextView
  android:id="@+id/textview"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_alignTop="@id/mapview"
  android:layout_alignParentRight="true"/>

 </RelativeLayout> 
```

# php - 订阅门实施 | Facebook 图形 API

> ID：11921952
> 
> 赞同：0
> 
> 时间：2012-08-12T11:56:15.240
> 
> 标签：php, facebook, facebook-graph-api

我有一个 facebook 应用程序，用户授予我访问权限`user_subscriptions`以使我的应用程序能够访问`https://graph.facebook.com/me/subscribedto?access_token=#`

它让我可以访问应用程序用户订阅的所有人员。

我使用这些数据让我的应用知道用户订阅了某个特定的人，并让他/她进一步访问该网站，我将此过程称为`Subscribe Gate`.

但是我现在遇到了一个问题，假设用户订阅了大约 1K 甚至 5-10K，那么在这种情况下考虑将传输的数据量和 php 服务器上的负载，facebook 会考虑我的应用垃圾邮件，可能会阻止我

我想知道有没有一种方法可以`search`让用户订阅的人而不是询问所有用户订阅的人并通过 php 脚本手动检查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:56:34.067

如果我理解正确，您想知道某个特定的人是否订阅了该应用程序的用户。假设有问题的人的用户 id 是 XXXXXXXX，请...

通过**图表**：

```
https://graph.facebook.com/fql?q=select subscriber_id from subscription where subscribed_id = me()  and subscriber_id='XXXXXXXX' 
```

或通过**FQL**：

```
select subscriber_id from subscription where subscribed_id = me()  and subscriber_id='XXXXXXXX' 
```

-

**注意**：虽然理论上上述解决方案应该同样有效，但当我使用 Facebook Graph 浏览器测试基于*Graph*的解决方案时，查询处理的时间异常长。FQL 工作正常。

**更新**：要了解应用程序的用户是否订阅了特定的人：

```
select subscriber_id from subscription where subscribed_id = 'XXXXXXXXX' and subscriber_id = me() 
```

# python - PyQt：左侧的 QCheckBox 文本？

> ID：11921953
> 
> 赞同：0
> 
> 时间：2012-08-12T11:56:18.233
> 
> 标签：python, text, pyqt, qcheckbox

> **可能重复：**
> [更改 QCheckBox 的复选框位置](https://stackoverflow.com/questions/3189951/change-checkbox-position-for-a-qcheckbox)

这是一个非常直接的问题：如何使 QCheckBox 文本位于复选框的左侧而不是右侧？

# facebook-graph-api - 发布到馈送时 Facebook Graph API 中的可用字段？

> ID：11921959
> 
> 赞同：0
> 
> 时间：2012-08-12T11:57:09.453
> 
> 标签：facebook-graph-api

可以在用户时间线/提要上查询 (GET) 或创建 (POST) 帖子。但据我所见，[文档](http://developers.facebook.com/docs/reference/api/post/)仅列出了您在查询时返回的可能字段 - 而不是在执行`POST`.

任何人都可以链接到我可以在`POST`to期间设置的完整字段列表吗`https://graph.facebook.com/arjun/feed`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:11:32.080

查看[对象](https://developers.facebook.com/docs/reference/api/user/)`posts`上的连接。必需的只是或。[`User`](https://developers.facebook.com/docs/reference/api/user/)`message``link`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T12:12:01.423

> 如在发布部分下的[http://developers.facebook.com/docs/reference/api/中找到：](http://developers.facebook.com/docs/reference/api/)

**方法：** /PROFILE_ID/feed

**描述：**在给定个人资料的提要/墙上发布新帖子

**参数：**消息、图片、链接、名称、标题、描述、来源、地点、标签

例子：

> *   [https://graph.facebook.com/arjun/feed/?access_token=HAGSX&message=Lorem%20Ipsum](https://graph.facebook.com/arjun/feed/?access_token=HAGSX&message=Lorem%20Ipsum)

# ruby-on-rails - Rails 路由错误：接收未知操作异常

> ID：11921961
> 
> 赞同：0
> 
> 时间：2012-08-12T11:57:32.060
> 
> 标签：ruby-on-rails, routes

在我的 routes.rb 文件中，我有以下内容：

```
controller :sessions do
  get 'login' => :new
  post 'login' => :create
  delete 'logout' => :destory
end 
```

在视图文件中，我有这个链接：

```
<%= link_to 'Logout', logout_url, :method => :delete%> 
```

但是当单击注销链接时，我收到此错误

```
Unknown action

The action 'destory' could not be found for SessionsController 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:59:30.150

您的路线很好，问题是您`SessionsController`没有`destroy`定义任何操作

实际上，我刚刚注意到，您的路线`destory`有`destroy`

# python - Python 返回意外的答案

> ID：11921963
> 
> 赞同：0
> 
> 时间：2012-08-12T11:57:55.050
> 
> 标签：python

这是我的程序（一个非常简单的程序）：

```
__author__="soham"
__date__ ="$Aug 12, 2012 4:28:51 PM$"

from math import sqrt

class Point:
    x = 0;
    y = 0;
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __eq__(self, other):
        return self.__dict__ == other.__dict__

    def get_dist(self, other):
        return sqrt(abs((self.x - other.x)^2 + (self.y - other.y)^2))

    def is_rect(self,other,another,yet_another):
        return (self.get_dist(other) == another.get_dist(yet_another)) and \
               (self.get_dist(another) == other.get_dist(yet_another)) and \
               (self.get_dist(yet_another) == other.get_dist(another))

a, b, c, d = Point(4,3),Point(4,9), Point(7,3), Point(7,9)

if a.is_rect(b,c,d):
    print "Rectangle."
else:
    print "No, not a rectangle!" 
```

这返回没有。[一个用 Java 编写的类似程序](http://www.sohamchowdhury.com/2012/08/how-to-find-out-whether-four-points-make-a-rectangle-java/)会返回预期的答案。

我对 Python*很陌生。*帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T11:59:23.833

Python 中的求幂是`**`，不是`^`。

`^`在 Python 中实际上是[*按位异*或运算符](http://docs.python.org/reference/expressions.html#binary-bitwise-operations)。

对于指数，您也可以`pow(x,y)`代替`x**y`.

# webserver - 隐藏实际网址

> ID：11921964
> 
> 赞同：0
> 
> 时间：2012-08-12T11:58:01.633
> 
> 标签：webserver, dns

我有两个域，它们都指向一个服务器：

*   `http://www.domain1.com/ --> http://www.example.com/`
*   `http://www.domain2.com/ --> http://www.example.com/folder1`

我怎样才能隐藏它，以便当有人去`http://www.domain2.com/`它时会出现`http://www.domain2.com/`在地址栏中而不是`http://www.example.com/folder1`？

# python - 尝试创建 virtualenv 时出错

> ID：11921965
> 
> 赞同：4
> 
> 时间：2012-08-12T11:58:03.537
> 
> 标签：python, virtualenv

由于以下错误，我无法创建新的虚拟环境：

```
$ virtualenv env
New python executable in env/bin/python
Installing distribute....done.
  Complete output from command /var/www/vhosts/example.com/...ython /var/www/vhosts/example.com/...stall /usr/lib/pymodules/python2.6/v...ar.gz:
  error: Not a URL, existing file, or requirement spec: '/usr/lib/pymodules/python2.6/virtualenv_support/pip-0.6.3.tar.gz'
----------------------------------------
Traceback (most recent call last):
  File "/usr/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.4.5', 'console_scripts', 'virtualenv')()
  File "/usr/lib/pymodules/python2.6/virtualenv.py", line 537, in main
    use_setuptools=options.use_setuptools)
  File "/usr/lib/pymodules/python2.6/virtualenv.py", line 630, in create_environment
    install_pip(py_executable)
  File "/usr/lib/pymodules/python2.6/virtualenv.py", line 390, in install_pip
    filter_stdout=_filter_setup)
  File "/usr/lib/pymodules/python2.6/virtualenv.py", line 598, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /var/www/vhosts/example.com/...ython /var/www/vhosts/example.com/...stall /usr/lib/pymodules/python2.6/v...ar.gz failed with error code 1 
```

我已经在网上搜索过，但找不到任何解决此问题的方法。我正在使用带有 Python 2.6.5 和 Virtualenv 1.7.2 的 Ubuntu 10.04.4 LTS，感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:17:49.840

我自己想通了：我尝试使用`apt-get install python-virtualenv`.

执行`apt-get purge python-virtualenv && easy_install virtualenv`解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T22:57:18.423

我看到了同样的问题，我确实通过“easy_install”而不是“apt-get”安装了“python-virtualenv”。

# c# - 检测客户端与 TCP/IP 断开连接的正确方法

> ID：11921966
> 
> 赞同：3
> 
> 时间：2012-08-12T11:58:17.660
> 
> 标签：c#, vb.net, asynchronous, tcp, tcpserver

我使用了异步 TCP/IP 服务器，一切正常，但是当客户端由于错误或应用程序强制退出而断开连接时，它也会由于 IO.IOException 类型的异常而关闭我的服务器。异常发生在以下子中：

```
 Private Sub ReadCallback(ByVal result As IAsyncResult)
        Try

            Dim client As Client = TryCast(result.AsyncState, Client)
            If client Is Nothing Then
                Return
            End If
            'MsgBox(client.ClientID)
            Dim networkStream As NetworkStream = client.NetworkStream
            Dim read As Integer = networkStream.EndRead(result) **' ERRORS HERE!**
            If read = 0 Then
            Dim client As Client = TryCast(result.AsyncState, Client)
            SyncLock Me.Clients
                Me.Clients.Remove(Client.ClientID)
                Return
            End SyncLock
            End If 
```

当客户端与我的 TCP 服务器断开连接时，以下代码会引发 IO.IOException：

```
Dim read As Integer = networkStream.EndRead(result) **' ERRORS HERE!** 
```

除了捕获 IO.IOException 之外，我该如何防止它首先创建异常。基本上我想在这种情况发生时删除我的客户端，目前作为一种解决方法，我已经删除了 IO.IOException 上的客户端并重新抛出该方法。宁愿有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:27:25.313

例外*是*方式。没有 TCP API 或回调可以告诉您连接断开的情况。你必须阅读或写作才能找到答案。出于可靠性原因，这是在 TCP 深处设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T01:11:22.463

希望这可以帮助 ：

```
Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    IAsyncResult result = socket.BeginConnect(_ip, Port, null, null);
    bool success = result.AsyncWaitHandle.WaitOne(500, true); // 500 is milisecods to wait
     if (socket.Connected && socket.IsBound && success)
     {
          // do your work                          
     }else
    {
     // open a new connection or show your message to user
    } 
```

# ruby - 未显示局部变量输出

> ID：11921968
> 
> 赞同：-1
> 
> 时间：2012-08-12T11:58:32.123
> 
> 标签：ruby

我正在尝试运行一个简单的程序：

```
class Pras
  def samleMethod
    a = 12
    p "a"
  end
end 
```

没有错误，但为什么不显示输出？

### 编辑

```
class Pras
  def samleMethod
    a = 12
    p a
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:33:33.803

```
class Pras
  def samleMethod
    a = 12
    p a
  end
end 
```

在此，您将使用名为 sampleMethod 的公共方法创建一个名为 Pras 的类。

我假设你对 OOP 有一些了解

所以当你访问一个方法时，你需要创建一个类的实例来访问它。

```
p =  Pras.new 
```

现在您可以使用实例访问该方法

```
p.sampleMethod 
```

或两者都在一行中

```
 Pras.new.sampleMethod 
```

我建议你仔细看看这个 tuts。[http://www.tutorialspoint.com/ruby/ruby_quick_guide.htm](http://www.tutorialspoint.com/ruby/ruby_quick_guide.htm)

方法除非被调用，否则不会被执行。

[在此处](http://rubyfiddle.com/riddles/236cf)在线尝试此代码

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:00:08.627

您正在打印字符串 'a' 而不是变量。改用这个：`p a`

编辑：

正如 Rostyslav 所说，您没有执行任何操作：尝试`Pras.new.samleMethod`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T12:06:14.673

非常适合我：

这里我们定义类：

```
irb(main):014:0> class Pras
irb(main):015:1> def samleMethod
irb(main):016:2> a = 12
irb(main):017:2> p a
irb(main):018:2> end
irb(main):019:1> end
=> nil 
```

以下是如何创建该类的实例对象并调用实例方法并实际执行打印：

```
irb(main):020:0> Pras.new.samleMethod
12
=> 12 
```

# javascript - JSON层次结构，如何获取元素？

> ID：11921969
> 
> 赞同：3
> 
> 时间：2012-08-12T11:58:41.803
> 
> 标签：javascript, jquery, json

```
$("#loginsubmit").live("click", function() {
    var request = new Request();
    request.service = "http://88.80.223.163:8080/lumiin-service/lumiin/control/eventmap/1" ;
    RequestHandler(request,displayData);
});  

function displayData(data) {
    //alert(data.contents.ownerId);
    var cont =  data.contents;
    $("#mono").html(''+cont.id);
} 
```

我正在使用上面的代码片段来获取 id，它工作正常......我如何获得`firstName`？

**目的：**

```
{
  "id": 1,
  "eventId": {
    "URL": "web",
    "location": "web",
    "url": "web",
    "id": 54,
    "type": {
      "name": "Meeting",
      "id": 1,
      "isDeleted": "N",
      "description": "Meeting"
    },
    "abteilung": {
      "id": 165,
      "code": "web123",
      "isDeleted": null,
      "domainId": 0,
      "parentId": 164,
      "description": null
    },
    "eventName": "Tanvi",
    "place": "web",
    "startDate": 1335830400000,
    "endDate": 1337558400000,
    "prospectId": null,
    "person": "web",
    "isDeleted": "N",
    "countryId": {
      "name": "CH",
      "id": 1,
      "isDeleted": "N",
      "description": "Switzerland"
    },
    "followUp": null,
    "budget": 0,
    "description": "web"
  },
  "ownerId": {
    "id": 67,
    "firstName": "web123",
    "localOrg": null,
    "industryTypeId": null,
    "memeber": false,
    "profileType": "Manager",
    "emailId": "web123",
    "abteilung": {
      "id": 165,
      "code": "web123",
      "isDeleted": null,
      "domainId": 0,
      "parentId": 164,
      "description": null
    },
    "userCode": "web123",
    "authenticatedAccess": -1,
    "uuid": null,
    "lastName": "web123",
    "isDeleted": "N",
    "passWord": "web123",
    "fullName": "web123,web123",
    "status": 0
  },
  "prospectId": {
    "id": 303,
    "firstName": "web123",
    "emailId": "web123@gg.com",
    "ownerId": {
      "id": 67,
      "firstName": "web123",
      "localOrg": null,
      "industryTypeId": null,
      "memeber": false,
      "profileType": "Manager",
      "emailId": "web123",
      "abteilung": {
        "id": 165,
        "code": "web123",
        "isDeleted": null,
        "domainId": 0,
        "parentId": 164,
        "description": null
      },
      "userCode": "web123",
      "authenticatedAccess": -1,
      "uuid": null,
      "lastName": "web123",
      "isDeleted": "N",
      "passWord": "web123",
      "fullName": "web123,web123",
      "status": 0
    },
    "abteilung": {
      "id": 165,
      "code": "web123",
      "isDeleted": null,
      "domainId": 0,
      "parentId": 164,
      "description": null
    },
    "startDate": 1335744000000,
    "endDate": 1337904000000,
    "statusId": {
      "name": "New",
      "id": 1,
      "isDeleted": "N",
      "description": "New"
    },
    "company": "company",
    "lastName": "web123",
    "isDeleted": "N",
    "yearofBirth": null,
    "annualRevenue": 0,
    "nationalityId": {
      "name": "CH",
      "id": 1,
      "isDeleted": "N",
      "description": "Switzerland"
    },
    "titleId": {
      "name": "Mr",
      "id": 1,
      "isDeleted": "N",
      "description": "Mr"
    },
    "maritalstatusId": null,
    "residencyId": null,
    "languageId": null,
    "priorityId": {
      "name": "Low",
      "id": 1,
      "isDeleted": "N",
      "description": "Low"
    },
    "genderId": {
      "name": "Male",
      "id": 1,
      "isDeleted": "N",
      "description": "Male"
    }
  },
  "isDeleted": "N"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:01:21.450

`firstName`是对象的属性，您`prospectId`可以通过以下方式读取它：

```
var firstName = data.prospectId.firstName;
var lastName = data.prospectId.lastName; 
```

[小提琴](http://www.jsfiddle.net/v3K4B/1)

# python - Python：什么是 String[a:b] 但对于 Unicode 的等价物

> ID：11921974
> 
> 赞同：2
> 
> 时间：2012-08-12T11:59:30.280
> 
> 标签：python, string, unicode, string-formatting

所以我有这样的事情：

```
x = "CЕМЬ"
x[:len(x)-1] 
```

这是从字符串中删除最后一个字符。但是它不起作用，它给了我一个错误。我想这是因为它是Unicode。那么如何对非 ansi 字符串进行这种简单的格式化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T12:01:39.390

那是因为在 Python 2.x中，*字节*串`"CЕМЬ"`是一种奇怪的写法。*`b'C\xd0\x95\xd0\x9c\xd0\xac'`*

 *你想要一个*字符串*。在 Python 2.x 中，字符串以 为前缀`u`：

```
x = u"CЕМЬ"
x[:-1] # Returns u"CЕМ" (len(x) is implicit for negative values) 
```

如果您在程序中编写此代码（而不是交互式 shell），您将需要[指定源代码编码](http://www.python.org/dev/peps/pep-0263/)。为此，只需将以下行添加到文件的开头，其中`utf-8`匹配您的[文件编码](http://www.joelonsoftware.com/articles/Unicode.html)：

```
# -*- coding: utf-8 -*- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:03:49.480

`utf-8`使用编码保存文件：

```
# -*- coding: utf-8 -*-
x = u'CЕМЬ'
print x[:-1]  #prints CЕМ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T12:01:34.177

```
x = u'some string'
x2 = x[:-1] 
```*

# eclipse - Eclipse：作为项目一部分的脚本编译器

> ID：11921982
> 
> 赞同：1
> 
> 时间：2012-08-12T12:00:50.207
> 
> 标签：eclipse, maven, yacc, lex

这个问题不仅限于 lex 和 yacc，而是如何将自定义脚本编译器添加为项目的一部分？例如，我在项目中有以下文件：

```
grammar.y
grammar.l
test.script 
```

将使用由 lex、yacc 和 g++ 编译的grammar.y 和grammar.l 生成二进制“script_compiler”。然后我想使用生成的 script_compiler 来编译 test.script 以生成 CompiledScript.java。该文件应与项目中的其余 java 文件一起编译。XCode 或 make 可以进行此设置，但单独使用 Eclipse 也可以吗？如果没有，如何与 Maven 插件一起使用？

（我可能会将脚本编译器设置为一个单独的项目，但如果它们可以放在同一个项目中，这样可以立即应用对语法文件的更改，那就太好了）

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:20:01.027

如果你只想在 Maven 中运行一个外部程序，这就是你想要的：http: [//mojo.codehaus.org/exec-maven-plugin/——](http://mojo.codehaus.org/exec-maven-plugin/)然后你可以从你的 IDE 或命令行运行 Maven 目标，它应该无论哪种方式都做正确的事。

要与正常编译集成，请将插件绑定到“generate-sources”阶段，并将生成 Java 文件的位置添加到 exec 插件的“sourceRoot”选项中。这样编译器就会选择它们。

理想情况下，您将代码生成到文件夹“target/generated-sources/MY_SCRIPT_NAME”中。这是 Maven 世界中生成源的标准位置，例如 IntelliJ IDEA 将在该位置内获取源文件。请注意，如果文件直接位于“目标/生成源”中，则这不起作用。

另一种选择是编写自己的 Maven 插件，这实际上也很容易。参见例如[https://github.com/peterbecker/maven-code-generator](https://github.com/peterbecker/maven-code-generator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:57:33.263

您可以从项目属性对话框中添加自定义“构建器”。这可以是 ant 脚本（带有可选目标）或任何其他脚本或可执行文件。

还有用于[ant](http://maven.apache.org/plugins/maven-antrun-plugin/)和其他[脚本语言的 maven 插件](http://mojo.codehaus.org/script-maven-plugin/languages.html)

# excel - 如何使用基于条件的公式更改 Excel 中的超链接？

> ID：11921983
> 
> 赞同：0
> 
> 时间：2012-08-12T12:01:08.173
> 
> 标签：excel, excel-formula

我必须根据用户输入的日期切换到同一工作簿中的不同工作表。条件是如果用户输入的日期在 7 月之前，则链接应指向“7 月 1 日之前”，如果输入的日期在 7 月之后，则链接应指向“7 月 1 日之后”表。我不想只使用 excel 公式的宏。

我写的是这样的： =IF(MONTH(C5)<7,HYPERLINK('7 月 1 日之前'!B2,"SheetOne"),HYPERLINK('7 月 1 日之后'!B2,"SheetTwo"))

它首先检查用户输入的月份是否小于 7 表示 7 月之前链接指向“7 月 1 日之前”表，如果不是，则应指向“7 月 1 日之后”表。但即使链接文本显示 SheetTwo，它仍然指向“7 月 1 日之前”工作表。

我使用了 excel 评估公式并显示正确的结果！请帮助我如何实现这一点，或者是否有任何其他方法可以根据用户输入跳转到同一工作簿中的工作表！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:13:48.343

试试这个：=IF(MONTH(C5)<7,HYPERLINK("#'7 月 1 日之前'!B2","SheetOne"),HYPERLINK("#'7 月 1 日之后'!B2","SheetTwo"))

您的超链接需要引用一个文件；但是，如果您不想这样做，可以使用“#”语法来指示当前工作簿。

语法：=HYPERLINK("#'链接的工作表名称'!链接的单元格编号","你的消息")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:11:51.200

这对我有用：

=IF(MONTH(C5)<7,HYPERLINK("[MySpreadsheet.xls]Sheet2!B2","7 月 1 日之前"),HYPERLINK("[MySpreadsheet.xls]Sheet3!B2","7 月 1 日之后"))

# mongodb - 如何在 MongoDB GORM 中支持嵌入式地图（具有自定义值类型）？

> ID：11921985
> 
> 赞同：2
> 
> 时间：2012-08-12T12:01:27.953
> 
> 标签：mongodb, grails, grails-orm

我想要一个由地图引用的嵌入式文档（如下面的“A 类”）。环境是 Grails + GORM + MongoDB。

这可能吗？如果可以，怎么做？

```
class A { // fails with IllegalArgumentException occurred when processing request: can't serialize class X in line 234 of org.bson.BasicBSONEncoder
    static mapWith = "mongo"
    Map<String, X> map = new HashMap<String, X>()
}

class B { // works
    static mapWith = "mongo"
    List<X> list = new ArrayList<X>()
}

class C { // works with primitive type values
    static mapWith = "mongo"
    Map<String, String> map = new HashMap<String, String>()
}

class X {
    String data

    public X(String data) {
        this.data = data
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T09:00:52.100

正如 Art Hanzel 建议的那样，嵌入效果很好。

但是，您的问题来自您尝试使用 List 泛型作为一种约束的事实：

```
Map<String, X> 
```

问题是 Grails 不能很好地处理这种语法，首先是因为[Groovy 不支持泛型](http://groovy.codehaus.org/Generics)。

但是，MongoDB 插件提供了一个非常强大的功能，可以让您将自定义类型定义为域类属性：[请参见此处](http://springsource.github.com/grails-data-mapping/mongo/manual/guide/3.%20Mapping%20Domain%20Classes%20to%20Mongo%20Collections.html#3.6%20Custom%20User%20Types)。

在你的情况下，你可以

```
class A {
    static mapWith = "mongo"
    MyClass map = new MyClass()
} 
```

然后在你的 src/java 例如你可以实现一个

```
class MyClass extends HashMap<String,X> { } 
```

然后，当然，您必须定义一个特殊的 AbstractMappingAwareCustomTypeMarshaller 来指定如何在 DB 中读取和写入属性。

另一个步骤也可能是向 A 类添加自定义验证器以检查数据的有效性......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:26:22.440

MongoDB Grails 插件[文档](http://springsource.github.com/grails-data-mapping/mongo/manual/guide/3.%20Mapping%20Domain%20Classes%20to%20Mongo%20Collections.html)描述了如何制作嵌入式文档：

```
class Foo {
    Address address
    List otherAddresses
    static embedded = ['address', 'otherAddresses']
} 
```

在我的脑海中，您应该能够通过对象图访问这些。我看不出有什么理由你不应该这样做。

```
myFoo.address.myAddressProperty... 
```

# sqlite - 如何在sqlite中获得10条连接表的第一条记录？

> ID：11921988
> 
> 赞同：3
> 
> 时间：2012-08-12T12:01:40.537
> 
> 标签：sqlite

如何在 Sqlite 中仅获得 10 条 Nemayeh.Nemayeh 字段的第一条记录？

```
SELECT
  Keyword,
  Nemayeh.Nemayeh

FROM
  (SELECT
     Keyword.Id,
     Keyword.Keyword
   FROM Keyword
   ORDER BY Keyword.Keyword ASC
   LIMIT 10 OFFSET 0
  ) AS tmp

INNER JOIN KeyWord_Nemayeh
        ON KeyWord_Nemayeh.Id_Keyword = tmp.Id

INNER JOIN Nemayeh
        ON Nemayeh.Id = KeyWord_Nemayeh.Id_Nemayeh

ORDER BY 1,2 
```

例如 ：

```
Key1 Nem1_1
Key1 Nem1_2
Key1 Nem1_3
.
.
.
Key1 Nem1_10
Key2 Nem2_1
Key2 Nem2_2
.
.
.
Key2 Nem2_10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:47:40.377

这几乎是 biziclop 所说的，但应该可以。

```
SELECT
  Keyword,
  Nemayeh.Nemayeh
FROM
  (SELECT Keyword.Id,Keyword.Keyword 
   FROM Keyword
   ORDER BY Keyword.Keyword ASC
   LIMIT 10 OFFSET 0) AS tmp

INNER JOIN KeyWord_Nemayeh ON KeyWord_Nemayeh.Id_Keyword = tmp.Id

INNER JOIN Nemayeh ON Nemayeh.Id = KeyWord_Nemayeh.Id_Nemayeh

ORDER BY 1,2 LIMIT 0, 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:05:30.377

尝试：

```
SELECT TOP 10 Keyword,... FROM... 
```

# jquery - 如何从列表中提取电子邮件地址？

> ID：11921991
> 
> 赞同：1
> 
> 时间：2012-08-12T12:02:13.287
> 
> 标签：jquery

> **可能重复：**
> [如何从文本中解析/修剪电子邮件地址](https://stackoverflow.com/questions/7098581/how-to-parse-trim-email-addresses-from-text)

如何从姓名和电子邮件地址列表中提取电子邮件地址？

示例输入：

```
"a1 b.d"<a1@test.com>,
<a2@test.com>,
"a3 b.d"<a3@test.com> ,
a4@test.com , 
```

输出 ：

```
a1@test.com,
a2@test.com,
a3@test.com,
a4@test.com, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:31:24.523

此 PHP 函数将从字符串中提取电子邮件地址并将其放入可点击的链接中：

```
function extractEmail( $data )
{
    if ( preg_match( "/[^@\s]+@([-a-z0-9]+\.)+[a-z]{2,}/i", $data, $email ) )
    {
        $replacement = '<a href="mailto:' . $email[ 0 ] . '" target="_blank">' . $email[ 0 ] . '</a> ';
        $data        = preg_replace( "/[^@\s]+@([-a-z0-9]+\.)+[a-z]{2,}/i", $replacement, $data );
    }
    return $data;
} 
```

要使用它，请创建 PHP 文件并在其中添加一个测试条目（但不要忘记将上面的函数放入其中）：

```
<?php
  echo extractEmail("Some text goes here before mail@mail.com and some text here goes after");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:19:50.283

```
function extract_emails_from($string) {
         preg_match_all("/[\._a-zA-Z0-9-]+@[\._a-zA-Z0-9-]+/i", $string, $matches);
         return $matches[0];
} 
```

认为关注此 URL 将对您有所帮助。

[http://css-tricks.com/snippets/php/extract-email-addresses/](http://css-tricks.com/snippets/php/extract-email-addresses/)

# django - 使用 Django 身份验证保护 Apache

> ID：11921993
> 
> 赞同：0
> 
> 时间：2012-08-12T12:02:21.633
> 
> 标签：django, apache

我的一个 Django 模型中有一个 ImageField。这些图像中的每一个都有一个可以访问它们的用户（或一组用户）；没有其他用户应该能够看到它们。

ImageField 将图像文件存储在媒体根目录中。通过图像路径对该图像的任何 Web 请求）绕过 django 并直接由 Apache 提供服务。

如何确保只有被授权请求图像的用户才能真正获得它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:04:59.423

为服务图像添加新视图并将图像存储在其他路径中，apache 无法服务器新路径

现在在新视图中检查用户服务图像组，如果不是您的用户发送 403

```
@login_required
def serve_file(request, context):
    if <check if they have access to the file>:
        filename = "/var/www/myfile.xyz" 
        response = HttpResponse(mimetype='application/force-download') 
        response['Content-Disposition']='attachment;filename="%s"'%filename
        response["X-Sendfile"] = filename
        response['Content-length'] = os.stat("debug.py").st_size
        return response
    return <error state> 
```

# c# - 如何使用 OpenXML C# 在 Excel 中隐藏工作表？

> ID：11921994
> 
> 赞同：7
> 
> 时间：2012-08-12T12:02:25.853
> 
> 标签：c#, openxml-sdk

我有一个带有各种工作表的 Excel 模板，我将使用 OpenXML、C# 从 SQL Server 检索到的数据转储到这些工作表中。完成转储数据后，我需要根据条件隐藏一些工作表。我找不到使用 C# OpenXML 隐藏特定工作表的任何代码。

我尝试了以下方法，但床单没有被隐藏。

```
byte[] byteArray = File.ReadAllBytes("D:\\rptTemplate.xlsx");
using (MemoryStream mem = new MemoryStream())
{
mem.Write(byteArray, 0, (int)byteArray.Length);
using (SpreadsheetDocument rptTemplate = SpreadsheetDocument.Open(mem, true))
{
    foreach (OpenXmlElement oxe in (rptTemplate.WorkbookPart.Workbook.Sheets).ChildElements)
    {
     if(((DocumentFormat.OpenXml.Spreadsheet.Sheet)(oxe)).Name == "ABC")
        ((DocumentFormat.OpenXml.Spreadsheet.Sheet)(oxe)).State = SheetStateValues.Hidden;
    }
    rptTemplate.WorkbookPart.Workbook.Save();
}
} 
```

请求帮助。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T16:04:02.503

您必须将类的`ActiveTab`属性设置`WorkbookView`为与您要隐藏的工作表的索引不同的索引。

因此，例如，如果您想隐藏 Excel 文件中的第一个工作表（索引为 0 的工作表），则将该`ActiveTab`属性设置为下一个可见的工作表索引。

这是一个小代码示例（基于您提供的代码）：

```
static void Main(string[] args)
{
  byte[] byteArray = File.ReadAllBytes("D:\\rptTemplate.xlsx");

  using (MemoryStream mem = new MemoryStream())
  {
    mem.Write(byteArray, 0, (int)byteArray.Length);

    using (SpreadsheetDocument rptTemplate = SpreadsheetDocument.Open(mem, true))
    {
      foreach (OpenXmlElement oxe in (rptTemplate.WorkbookPart.Workbook.Sheets).ChildElements)
      {
        if(((DocumentFormat.OpenXml.Spreadsheet.Sheet)(oxe)).Name == "ABC")
        {
          ((DocumentFormat.OpenXml.Spreadsheet.Sheet)(oxe)).State = SheetStateValues.Hidden;

           WorkbookView wv = rptTemplate.WorkbookPart.Workbook.BookViews.ChildElements.First<WorkbookView>();

           if (wv != null)
           {
             wv.ActiveTab = GetIndexOfFirstVisibleSheet(rptTemplate.WorkbookPart.Workbook.Sheets);
           }                       
         }
      }
      rptTemplate.WorkbookPart.Workbook.Save();
    }
  }
}

private static uint GetIndexOfFirstVisibleSheet(Sheets sheets)
{
  uint index = 0;
  foreach (Sheet currentSheet in sheets.Descendants<Sheet>())
  {
    if (currentSheet.State == null || currentSheet.State.Value == SheetStateValues.Visible)
    {
      return index;
    }
    index++;
  }
  throw new Exception("No visible sheet found.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-29T16:56:50.647

要隐藏工作表，请将工作表的“状态”属性应用于所有工作表。默认情况下，工作表的“状态”属性为空。以下是我所做的更改，它隐藏了 Sheet2。

```
 Sheet sheet1 = new Sheet() { Name = "Sheet1", State = SheetStateValues.Visible, SheetId = (UInt32Value)1U, Id = "rId1" };
  Sheet sheet2 = new Sheet() { Name = "Sheet2", State = SheetStateValues.Hidden, SheetId = (UInt32Value)2U, Id = "rId2" }; 
```

# c++ - char_t 是 VS 中现有的全局 typedef 吗？

> ID：11921996
> 
> 赞同：3
> 
> 时间：2012-08-12T12:02:30.250
> 
> 标签：c++, visual-studio-2010

我有以下

```
namespace settings{
  #if defined(WIN32) && !defined(UNIX)
  typedef wchar_t char_t;
  #elif defined(UNIX) && !defined(WIN32)
  typedef char char_t;
  #else
  typedef char char_t;
  #endif
  typedef std::basic_string<char_t> string_t;
  typedef std::basic_ostream<char_t> stream_t;
} 
```

我保留它，以便我可以将聊天的整个应用程序更改为 wchar。它在 Linux 中工作，但是当我尝试在 VS 2010 中编译它时它给了我

> 错误 C2371：'settings::char_t'：重新定义；不同的基本类型见'settings::char_t'的声明

我所有的代码都使用`settings::char_t`等等`settings::string_t`。现在我需要更改我的所有代码吗？还是有一些更简单的出路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:45:58.390

即使它是全局的，您的 typedef 也包含在`namespace setting`其中，您将获得有关此的更多信息。您确定该文件没有在项目中被两次定位吗？

# css - 将css修改为百分比而不是像素

> ID：11921997
> 
> 赞同：0
> 
> 时间：2012-08-12T12:02:29.830
> 
> 标签：css, wordpress, percent-encoding

我最近创建了这个 WordPress[网站](http://jamieflynnbase.com/home/)，并使用像素和边距来创建两个半透明内容框的布局。但是，我确信那些比我更有经验的人都知道这根本不是响应式的，也不是非常友好的跨浏览器！所以有人建议我换成**百分比**而不是**像素**，但我不知道从哪里开始我现有的 CSS！

我需要制作一个 5 列的布局来实现这一点吗？

*   第一列空白以创建左侧空白
*   第二列包含较大的蓝色内容框
*   第三列空白以在两列之间创建空间
*   第四列较小的蓝色内容框
*   第五列创建最右边的空白区域

有没有更简单的方法？

这是我现有[样式表的链接](http://pastebin.com/embed_js.php?i=YsmR3mQT)

任何帮助将不胜感激，或者如果我忘记传递一些必需的信息，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:33:32.047

最简单的方法：

1.  找到最宽的元素。它的宽度, `XXXpx`, 将是你的新的`100%`。

2.  找到具有`px`值的所有其他元素，`YYYpx`。它的宽度现在将是`(YYY/XXX * 100)px`。

3.  目视检查您的网站并确保一切正常。并非所有样式都是基于百分比的，因此您需要在这里和那里恢复一些样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T12:43:52.087

如果您想要响应更快的东西，可以查看[http://adapt.960.gs](http://adapt.960.gs/) ;) 它很容易使用：

您必须首先添加 JS 文件：

```
<script src="js/adapt.min.js" type="test/javascript"></script> 
```

然后 CSS（作为 JS 在用户浏览器上停用的后备）：

```
<link type="text/css" rel="stylesheet" href="css/960.min.css" /> 
```

最后一些 JS 行告诉浏览器切换 CSS 文件取决于浏览器宽度：

```
<script type="text/javascript">
  var ADAPT_CONFIG = {
    path: 'assets/css/',
    range: [
      '0px    to 760px  = mobile.css',
      '760px  to 980px  = 720.css',
      '980px  to 1280px = 960.css',
      '1280px to 1600px = 1200.css',
      '1600px to 1920px = 1560.css',
      '1920px           = fluid.css'
    ]
  };
</script> 
```

然后，您将能够在 HTML 中使用标准网格，它会根据各种用途自行调整。[http://adapt.960.gs/](http://adapt.960.gs/)页面将为您提供额外的说明和演示（尝试调整浏览器窗口大小或通过手机访问）；）