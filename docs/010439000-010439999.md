# StackOverflow 问答 10439000-10439999

# c# - 仅读取 UInt16 数字二进制文件

> ID：10439001
> 
> 赞同：0
> 
> 时间：2012-05-03T20:40:28.860
> 
> 标签：c#, binaryreader

如果我正在读取字节数，我会这样做：

```
using (FileStream stream = new FileStream(filename, FileMode.Open, FileAccess.Read))
{
    int size = (int) stream.Length;
    BinaryReader br = new BinaryReader(stream);
    byte[] test = new byte[size];
    test = br.ReadBytes(size);
    br.Close();
} 
```

但是由于我想阅读 Uint16，所以我很震惊：

```
using (FileStream stream = new FileStream(filename, FileMode.Open, FileAccess.Read))
{
    int size = (int) stream.Length;
    BinaryReader br = new BinaryReader(stream);
    float[] test = new byte[size/2];
    for (int i = 0; i < size/2; ++i)
    {
         test[i] = br.ReadUInt16();
    }
    br.Close();
} 
```

有没有更快的方法一次读取整个文件，或者速度差异可以忽略不计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:42:38.073

如果文件不是太大而无法放入内存，则将所有字节读入 MemoryStream 然后从该流中读取 Uint16 会更快。像这样：

```
byte[] data;
int size;
using (FileStream stream = new FileStream(filename, FileMode.Open, FileAccess.Read))
{
    size = (int) stream.Length;
    data = new byte[size];
    stream.Read(data, 0, size);
}

uint[] uintData = new uint[size / 2];
using (var memoryStream = new MemoryStream(data))
using (var reader = new BinaryReader(memoryStream))
    for (int i = 0; i < size / 2; i++)
        uintData[i] = reader.ReadUInt16();

// Done. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:44:43.997

首先，您不需要这一行：

```
byte[] test = new byte[size]; 
```

因为以下行

```
test = br.ReadBytes(size); 
```

指向`test`另一个*数组*。所以，

```
byte[] test = br.ReadBytes(size); 
```

就够了。

* * *

关于您的问题：由于`BinaryReader.ReadBytes`只是`Stream.Read`在循环中执行 s （您可以使用 ILSpy 或查看参考源代码来验证这一点），我假设您的代码示例之间的性能差异可以忽略不计。可以肯定的是，我建议您进行一些*测量*。

# python - 在 python pickle 文件中保留 numpy 步幅

> ID：10439003
> 
> 赞同：2
> 
> 时间：2012-05-03T20:40:36.707
> 
> 标签：python, numpy

有没有办法告诉 numpy 在写入 python pickle 文件时保留非标准跨步？

```
>>> # Create an array with non-standard striding
>>> x = numpy.arange(2*3*4, dtype='uint8').reshape((2,3,4)).transpose(0,2,1)

>>> x.strides
(12, 1, 4)

>>> # The pickling process converts it to a c-contiguous array.
>>> # Often, this is a good thing, but for some applications, the
>>> # non-standard striding is intentional and important to preserve.
>>> pickled = cPickle.dumps(x, protocol=cPickle.HIGHEST_PROTOCOL)
>>> cPickle.loads(pickled).strides
(12, 3, 1)

>>> # This is indeed happening during serialization, not deserialization
>>> pickletools.dis(pickled)
...
151: S        STRING     '\x00\x04\x08\x01\x05\t\x02\x06\n\x03\x07\x0b\x0c\x10\x14\r\x11\x15\x0e\x12\x16\x0f\x13\x17'
... 
```

*注意：* numpy 足够聪明，可以保留 c-contiguous 或 fortran-contiguous，但它不会保留酸洗和解酸过程中的所有非标准步幅模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:16:24.157

我能想到的唯一方法是自己做：

```
# ---------------------------------------------
import numpy
from numpy.lib.stride_tricks import as_strided
import cPickle

def dumps(x, protocol=cPickle.HIGHEST_PROTOCOL):
    # flatten that keep real data order
    y = as_strided(x, shape=(x.size,), strides=(min(x.strides),))
    return cPickle.dumps([y,x.shape,x.strides],protocol=protocol)

def loads(pickled):
    y,shape,strides = cPickle.loads(pickled)
    return as_strided(y,shape=shape,strides=strides)

if __name__=='__main__':
    x = numpy.arange(2*3*4, dtype='uint8').reshape((2,3,4)).transpose(0,2,1)

    pickled = dumps(x)
    y = loads(pickled)

    print 'x strides =', x.strides
    print 'y strides =', y.strides
    print 'x==y:', (x==y).all()
# --------------------------------------------- 
```

输出：

```
x strides = (12, 1, 4)
y strides = (12, 1, 4)
x==y: True 
```

# c++ - 如何显示 256x256 的网格？

> ID：10439004
> 
> 赞同：1
> 
> 时间：2012-05-03T20:40:40.177
> 
> 标签：c++, linux, gnuplot

我有一个打印的 256x256 数组。它始终是从 -10 到 50 的单个数字。例如，输出文件如下所示：

5 -10 5 4
1 50 -2 4
5 21 35 11
-10 49 -1 0

但在 256x256 的比例上。我怎样才能得到这些值的图表？（它应该是一个高度图）。

我查看了 GNUPlot 文档，但没有找到任何可以帮助我的东西：/ 我有一个 graph.gp 文件，它看起来像这样：

```
set autoscale
set xrange [0:256]
set yrange [0:256]
set pm3d
cd 'src'
splot "output.dat" 
```

然后我在终端中打开 'gnusplot' 并写入`load "graph.gp"`，但它甚至不想加载 .dat 文件，更不用说给我一个图表了。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:54:01.167

我更喜欢使用 matplotlib (python) 来制作我的数字。要使用 matplotlib 执行此操作，您可以使用`matshow`. 这是您可以运行的快速脚本：

```
#!/usr/bin/env python

from matplotlib.pylab import *

data = loadtxt("mydata.dat");

matshow(data)

colorbar()

# leaves figure on screen
# comment out when saving file
show()

# uncomment to save file
#savefig('myplot.pdf') 
```

这会产生一个看起来像这样的图（注意我刚刚使用了随机数据）：

![matshow](../Images/db95617cfceb163ab414f8c234108256.png)

该函数`loadtxt`将以您拥有的格式自动接收您的数据文件（整数，由空格分隔，每一行在其自己的行中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:24:19.210

尝试使用`matrix`关键字：

```
set pm3d map
splot 'output.dat' matrix 
```

您不必担心设置限制；它们应该自动从 0 变为 256。然后，如果您想使用颜色图，请前往[此处](http://gnuplot.sourceforge.net/demo/pm3dcolors.html)查看示例。

# php - 带条件的随机整数

> ID：10439005
> 
> 赞同：5
> 
> 时间：2012-05-03T20:40:45.713
> 
> 标签：php, random

我有一个 PHP 脚本，其中有一个整数数组，比如说`$forbidden`.

我想得到一个从 1 到 400 的随机整数，它不在`$forbidden`.

当然，我不希望任何循环在 rand 给出工作结果时中断。我想要更有效的东西。

你怎么做到这一点 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T20:46:07.650

将所有禁止的数字放在一个数组中，并使用`array_diff`from `range(1,400)`。你会得到一组允许的数字，用 . 随机选择一个`array_rand()`。

```
<?php

$forbidden = array(2, 3, 6, 8);
$complete = range(1,10);
$allowed = array_diff($complete, $forbidden);

echo $allowed[array_rand($allowed)]; 
```

这样，您就可以从选择集中删除排除的数字，并消除循环的需要:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:50:20.940

产生一个允许数字的数组。找出这个数组中的数字。随机选择其中之一。

# jquery - 将选择菜单的宽度与jquery中的文本输入字段匹配

> ID：10439006
> 
> 赞同：0
> 
> 时间：2012-05-03T20:40:47.387
> 
> 标签：jquery, html, css, jquery-mobile

我正在使用 jquery-mobile 从用户那里获取信息。我似乎无法将选择菜单的宽度与文本输入字段的宽度对齐。

在我的小提琴中，选择菜单应该与两个文本输入字段相同。我能够匹配我的选择菜单的背景和边框颜色，使其看起来就像文本输入字段一样。但是当我调整选择菜单的宽度时，它与不同的手机和方向不一致。

注意：我不知道为什么，但是我的 css 上的“.wide .ui-select .ui-btn”确实调整了选择菜单的颜色和边框，但它并没有在小提琴上做。不过，我不知道如何匹配不同浏览器的宽度。

[http://jsfiddle.net/halogenmobile/DWTkD/1/](http://jsfiddle.net/halogenmobile/DWTkD/1/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:17:02.767

这可能有效：

```
$(document).ready(function(){
    $.each($('select'), function () {
        $(this).selectmenu({ width : $(this).attr("width")})
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:43:11.947

[http://jsfiddle.net/DWTkD/2/](http://jsfiddle.net/DWTkD/2/)

```
select {
    background: black;
    border: 2px solid white;
    color: #fff;
    padding: 2px;
    width: 123px;
}

​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T20:46:19.680

如果没有应用 jQuery Mobile CSS 就很难说，但我最好的猜测是`box-sizing`可能会有所不同，或者一些填充量正在改变它。如果您在某个地方有我们可以戳的实时版本，请分享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T20:46:56.960

您在标记为 class="wide" 的 dom 元素中的输入和选择使用它们的默认宽度。使用类似这样的东西来更好地控制它们的宽度：

```
.wide input, .wide select {
    width: 100%;
} 
```

编辑`width: 100%`以`width: 123px`调味。

# actionscript-3 - 检查 Actionscript 3 中的文本是否“以”子字符串开头

> ID：10439007
> 
> 赞同：4
> 
> 时间：2012-05-03T20:40:52.113
> 
> 标签：actionscript-3, flash

如何检查 Actionscript 3 中的文本是否以“开头”子字符串？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T20:44:49.660

有一个 indexOf 方法：[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#indexOf%28%29)。

它返回给定字符串在搜索字符串中出现的位置的**第一个索引。**如果这不等于`0`，则它不以字符串开头。您可以自己制作以下功能：

```
function startsWith(haystack:String, needle:String):boolean {
    return haystack.indexOf(needle) == 0;
} 
```

# c# - List.add 使用 Linq

> ID：10439011
> 
> 赞同：2
> 
> 时间：2012-05-03T20:41:34.833
> 
> 标签：c#, linq, lambda

我已经阅读了几篇关于 Linq 和 Func<> 的文章并理解了简单的示例，但我无法在日常编程中使用它们。我很想知道 LINQ 或 lambda 表达式在哪些情况下有用并且应该使用

对于此代码：我可以使用 Linq 或 lambda 表达式吗

```
List<int> abundantNumbers = new List<int>();
for (int i = 0; i < 28888; i++)
     {
      if (i < pta.SumOfDivisors(i))
         {
          abundantNumbers.Add(i);
          }
     } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T20:43:23.393

是的，您绝对可以在示例中使用 LINQ：

```
var abundantNumbers = Enumerable.Range(0, 28888)
                                .Where(i => i < pta.SumOfDivisors(i))
                                .ToList(); 
```

请注意，重要的是您不只是发布*添加*到列表的代码 - 您发布的代码显示列表一开始是空的。换句话说，您正在*创建*一个列表。如果您只是将代码添加到现有列表中，我会使用类似的东西：

```
var query = Enumerable.Range(0, 28888).Where(i => i < pta.SumOfDivisors(i));
abundantNumbers.AddRange(query); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T21:01:07.513

如果你想使用 LINQ 表示法，它会是这样的：

```
var abundantNumbers = (from i in Enumerable.Range(0, 28888)
                       where i < pta.SumOfDivisors(i)
                       select i)
                      .ToList(); 
```

# adobe-indesign - Adobe (CS5.5) InDesign *export as XHTML* 的文件在哪里？

> ID：10439012
> 
> 赞同：0
> 
> 时间：2012-05-03T20:41:36.643
> 
> 标签：adobe-indesign, extendscript

来自 Adob​​e 的[ADOBE INDESIGN CS5.5 插件开发入门](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs55-docs/InDesignProducts/getting-started.pdf)（第 112 页）：

> 在 InDesign CS5 中，导出为 XHTML/Dreamweaver 功能完全使用 ExtendScript 实现。导出为 XHTML/Dreamweaver 不作为传统的 InDesign 插件分发；相反，它安装为包含多个 ExtendScript 二进制文件的文件夹，位于 /Scripts/export as XHTML 中的 InDesign 脚本文件夹中。导出为 XHTML 的源代码包含在 /source/public/components/xhtmlexport 中。

然而，在那一章的开头（名为*Feature Development with Scripting*），有一条通知说：

> **章节更新状态**
> 
> CS5.5 未更改的内容不保证是最新的。

实际上，我既找不到二进制文件也找不到*导出为 XHTML*脚本的源代码，因为在 CS5.5 版本的 InDesign 和 SDK 中既不存在该`<InDesignInstallFolder>/Scripts/export as XHTML`文件夹也不存在该文件夹。`<SDK>/source/public/components/xhtmlexport`

（我从[这里](http://www.adobe.com/devnet/indesign/sdk/eula_cs55.html)得到了 SDK 。）

有谁知道我在哪里可以找到*导出为 XHTML*脚本的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:30:27.147

导出为 xhtml 脚本的源代码可能已在 InDesign CS5.5 中编译为本机代码；以前它是用javascript编写的。

在 InDesign CS5 中，源文件位于 InDesign 包本身（如果您在 Mac 上运行），尽管它们是 jsxbin 文件，因此它们不是人类可读的（很遗憾，因此无法真正修改）。这是我在系统上找到它们的目录：

```
/Applications/Adobe InDesign CS5/Scripts/XHTML For Digital Editions 
```

在 InDesign CS5.5 中，这些源文件丢失了，这就是我猜测它们被重构的原因。

# php - 在 Codeigniter Pagination 生成的页面链接中，始终选择第 1 页

> ID：10439013
> 
> 赞同：0
> 
> 时间：2012-05-03T20:41:41.823
> 
> 标签：php, codeigniter, pagination

我要把我的头发拉过这个！

在使用分页（通过 CI）初始加载我的页面时，即使我只想要 3 行，也会显示所有行。但是，在单击其他页面时，它工作正常（显示正确的行），但第 1 页始终是“选择”（不可点击），即使我点击第 2、3 页等。

有任何想法吗？

我的**控制器**：

```
function album($type, $album_id, $album_name) {

    $this->load->library('pagination');
    $config['base_url'] = base_url("photo_store/album/$type/$album_id/$album_name/");
    $config['total_rows'] = $this->Media_model->get_photos($album_id, 'display_date DESC', NULL, NULL, TRUE);
    $config['per_page'] = 3;
    $this->pagination->initialize($config);
    $album_photos = $this->Media_model->get_photos($album_id, 'display_date DESC', $config['per_page'], $this->uri->segment(6), FALSE);

    $this->_load_view(array(
        /* some other variables here */
        'album_photos' => $album_photos
    ));

)

private function _load_view($more_data) {
    $data = array_merge($more_data, array( /* some other variables here */ ));
    $this->load->view('template', $data);
} 
```

我的**模型**：

```
public function get_photos($album_id=NULL, $order_by='display_date DESC', $limit=NULL, $offset=NULL, $count=FALSE) {

    $result = array();
    $query = $this->db->select('medium.*')->join('medium', "$this->item.medium_id = medium.id", 'inner')->order_by($order_by);
    $limit = $limit ? $limit : '0';
    $offset = $offset ? $offset : '0';
    if ($limit!=='0' && $offset!=='0') {
        $query->limit($limit, $offset);
    }

    if ($album_id) { $result = $query->get_where($this->item, array('album_id' => $album_id)); }
    else { $result = $query->get($this->item); }

    if ($count){ return $result->num_rows(); }
    else { return $result->result(); }

} 
```

我的**观点**：

```
foreach ($album_photos as $photo) {
    //display photos here
}
echo $this->pagination->create_links(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:04:33.393

您可以将其添加到配置数组中，以便分页知道在哪里可以找到当前页面：

```
$config['uri_segment'] = 4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T20:58:58.597

我相信部分问题出在此处：

```
if ($limit!=='0' && $offset!=='0') {
    $query->limit($limit, $offset);
} 
```

由于您`else`的语句没有部分，因此第一页的查询永远不会受到限制。

我建议您将该代码更改为

```
if ($limit!=='0') {
    $query->limit($limit, $offset);
} 
```

甚至只是

```
$query->limit($limit, $offset); 
```

因为`$limit`理论上不应该`null`或者`0`因为你已经将它设置为`3`. `$offset`，除非设置，否则您可以在模型的函数中`0`替换它，`null`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:52:44.873

当 url 中传入的 uri 段超过 3 个时，分页选择的页面将无法正确显示，它会一直突出显示第一页。

分页工作正常，但所选页面未正确显示。

为了解决这个问题，解决方案：

转到位于*system->libraries->Pagination.php的**Pagination.php文件*

 *只是简单地设置

```
var $uri_segment = 4;// or 5 or 6; 
```

它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T08:41:49.580

您可以将其添加到配置数组中，以便分页知道在哪里可以找到当前页面：

```
$config['uri_segment'] = 4; // Your appropriate uri segment: 5 or 6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-14T12:40:17.707

尝试编写您的控制器，如下所示：

```
public function index($page=''){
//...
$page = ($page!='')? $page : 0;
$config["cur_page"] = $page;

//...

} 
```*

# jquery - 通过 Jquery 验证多个输入

> ID：10439014
> 
> 赞同：-2
> 
> 时间：2012-05-03T20:41:45.090
> 
> 标签：jquery

谁能指出我如何使用单个提交按钮设置 2 个独立输入的正确方向。

我有 2 个输入元素。每个元素都会返回一个不同的元素 id。每个输入将单独验证其输入。即显示它自己的错误信息。

我的代码看起来像这样

```
<script src="{{ STATIC_URL }}js/jquery.js"></script>
<script type="text/javascript">
jQuery(function(){
    $("#input-whatmask").click(function() {
    $("form").submit(function(){
    $(".error").hide();
    $("#input-whois").removeClass("errorinput");
    var hasError = false;
        var searchReg = /^[a-zA-Z0-9\s\/\.]+$/;
        var searchVal = $("#input-whatmask").val();

        if(searchVal == '') {
            $("#input-whatmask").addClass("errorinput");
        $("#input-whatmask").after('<span class="error">Enter an IP and mask.</span>');
            hasError = true;
        } else if(!searchReg.test(searchVal)) {
        $("#input-whatmask").addClass("errorinput");
        $("#input-whatmask").after('<span class="error">Enter valid text.</span>');
            hasError = true;
        }
        if(hasError == true) {return false;}
                                else {
                                        return true;
                                }
    });
});
});
jQuery(function(){
        $("#input-whois").click(function() {
    $("form").submit(function(){
        $(".error").hide();
    $("#input-whatmask").removeClass("errorinput");
    var hasError = false;
        var searchReg = /^[a-zA-Z0-9\s\/\.]+$/;
        var searchVal = $("#input-whois").val();

        if(searchVal == '') {
            $("#input-whois").addClass("errorinput");
        $("#input-whois").after('<span class="error">Enter an IP address or domain.</span>');
            hasError = true;
        } else if(!searchReg.test(searchVal)) {
            $("#input-whois").addClass("errorinput");
        $("#input-whois").after('<span class="error">Enter valid text.</span>');
            hasError = true;
        }
        if(hasError == true) {return false;}
                                else {
                                        return true;
                                }
    });
});
});

</script>

<form method="post" name="form1" action="/whatmask_output/">
{% csrf_token %}
          <div id="sectioncol" ><span class="section" >whatmask</span><input type="text" name="input-whatmask" id="input-whatmask" value="" size="20" /></div>
      <br/><br/>
      <div id="sectioncol" ><span class="section" >whois</span><input type="text" name="input-whois" id="input-whois" value="" size="20" /></div>
          <input type="submit" value="Submit" id="btn-search" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:22:11.147

试试这个：

```
$(document).ready(function(){
    var hasError = false;

    $("form").submit(function(e){
        var searchReg = /^[a-zA-Z0-9\s\/\.]+$/;

        if ($("#input-whatmask").val() != '' && $("#input-whois").val() != '')
        {
            alert('Enter only one field at a time!');
            return false;
        }

        if (hasError)
            return false;

        if ($("#input-whatmask").val() != '')
        {
            if(!searchReg.test($("#input-whatmask").val())){
                $("#input-whatmask").addClass("errorinput").after('<span class="error">Enter a valid value.</span>');
                hasError = true;
                return false;
            }
        }
        else if ($("#input-whois").val() != '')
        {
            if(!searchReg.test($("#input-whois").val())){
                $("#input-whois").addClass("errorinput").after('<span class="error">Enter a valid value.</span>');
                hasError = true;
                return false;
            }
        }
        else
        {
            alert('No values entered!');
            return false;
        }
    });

    $("#input-whatmask, #input-whois").click(function() {
        if ($(this).hasClass('errorinput'))
        {
            $(this).next().remove();
            $(this).removeClass("errorinput");
            hasError = false;
        }
    });
}); 
```

JSFiddle：[这里](http://jsfiddle.net/ult_combo/dQJv7/8/)

# list - 如何修复“发生检查：无法构造无限类型”错误？

> ID：10439017
> 
> 赞同：1
> 
> 时间：2012-05-03T20:42:04.280
> 
> 标签：list, haskell

我正在尝试编写一个`remove`函数，以便用户可以键入`remove 'd' ["abc", "dc", "ad"]`并获取输出`["abc", "c", "a"]`。

我的代码是：

```
remove :: Eq a => a -> [[a]] -> [[a]]
remove a (x:xs) = filter (not.a) (x:xs) 
```

但我收到以下错误消息：

```
Occurs check: cannot construct the infinite type: a = [a] -> Bool
   When generalising the type(s) for `remove' 
```

错误消息是什么意思，如何更改第二行以使其正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T20:46:32.343

的类型`filter`是

```
filter :: (a -> Bool) -> [a] -> [a] 
```

因此，您传递给的第一个参数`filter`必须是从列表的元素类型到`Bool`. 在

```
remove :: Eq a => a -> [[a]] -> [[a]]
remove a (x:xs) = filter (not.a) (x:xs) 
```

你说

1.  `a`有 type `a`，并且列表有 type `[[a]]`，即列表元素类型是`[a]`，并且
2.  `not . a`，第一个参数`filter`，具有类型`[a] -> Bool`。

总之，这些意味着

```
a = [a] -> Bool 
```

但这是一个无限的类型。

如果要在外部列表上工作，或者如果您想从每个包含的列表中删除一个元素，您可能意味着类似`filter (not . (a `elem`))`或等效`filter (a `notElem`)`的意思。`filter``map (filter (/= a))`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T20:46:08.947

您声明参数`a`是任何支持相等的类型。

但是您随后在布尔表达式中使用它：`not . a`.

的类型`not`是`:: Bool -> Bool`，所以`a`必须是类型`Bool`。但是你已经说过不，它是 type `Eq t => t`。

所以这是一个类型错误。

我认为您的意思是过滤所有不等于的元素，`a`即：

```
remove a xs = filter (/= a) xs 
```

但是，您的输入也是一个嵌套列表，因此您必须将过滤器映射到内部元素：

```
remove a xs = map (filter (/= a)) xs 
```

# java - JSON 数据格式

> ID：10439022
> 
> 赞同：0
> 
> 时间：2012-05-03T20:42:26.530
> 
> 标签：java, json

我使用 JSON.stringify 和 JQuery.ajax() 将以下 JSON 对象从 .jsp 页面传递到 java servlet：

```
{"bin":[{"binId":"0","binDetails":[{"productCode":"AU192","qty":"4"},{"productCode":"NE823","qty":"8"}],"comments":"store pickup"},{"binId":"1","binDetails":[{"productCode":"AF634","qty":"2"}],"comments":""},{"binId":"2","binDetails":[{"productCode":"QB187","qty":"3"}],"comments":"international shipping"},{"binId":"3","binDetails":[{"productCode":"AF634","qty":"2"},{"productCode":"QB187","qty":"2"}],"comments":""}]} 
```

这是我的 java servlet 中的代码：

```
StringBuffer strBuffer = new StringBuffer();
String line = null;

try {
   BufferedReader reader = request.getReader();
   while((line = reader.readLine()) != null){
      strBuffer.append(line);
   }
} catch (Exception e) {
}

try {
   JSONObject jsonObj = new JSONObject(new JSONTokener(strBuffer.toString()));
   // I call a method here and pass jsonObj
} catch (Exception e) {
} 
```

在我传递 jsonObj 的方法中，我使用 jsonObj.length() 来找出 jsonObj 中有多少项目，它告诉我 1，在这种情况下我会期望 3。我什至试过这个：

```
JSONObject bins = jsonObj.get("bin");
bins.length(); 
```

它告诉我 jsonObj.get("bin") 不是 JSONObject。在我从 .jsp 传递数据之前，我的数据格式是否不正确，或者我的 java servlet 中的 JSONObject 使用不正确？如何访问 JSONObject 中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:54:15.227

```
JSONArray bins = jsonObj.getJSONArray("bin");
bins.length(); 
```

# ruby-on-rails - Rails 3 中的 HEAD HTTP 请求

> ID：10439023
> 
> 赞同：6
> 
> 时间：2012-05-03T20:42:26.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Rails 3 当前将 HEAD 请求路由到匹配的 GET 路由。有头吗？请求上的方法，但返回 false 并且请求的行为类似于获取请求。我可以检测请求是否是 HEAD 请求吗？

推理：我知道一个 HEAD 请求应该返回与 get 完全相同的 headers，所以 Rails 想要执行完整的 GET 然后剃掉正文。但是，我可以在不发出与 GET 相同的数据库调用等的情况下遵守此请求。这有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T23:41:18.843

我有这个确切的问题。事实证明，启用缓存会导致这种情况。在您的环境和#head 中关闭缓存？将按预期工作。

问题是 Rack::Cache 将 HEAD 请求转换为 GET 请求，因此它们可以被缓存。这可以说是正确的行为，但它干扰了我的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T20:53:46.313

你可以使用request.head吗？判断它是否是 HEAD 请求的方法：

[http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-head-3F](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-head-3F)

一旦你确定它是，你也可以使用控制器的 head() 方法而不是典型的渲染：

[http://guides.rubyonrails.org/layouts_and_rendering.html#using-head-to-build-header-only-responses](http://guides.rubyonrails.org/layouts_and_rendering.html#using-head-to-build-header-only-responses)

所以我只需检查 request.head？在打扰数据库活动之前。然后使用

```
head :ok, :custom_header => 'value' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:33:33.730

```
def index
  if request.head?
    head :created
  else
    Rails.logger.info "Derp #{request.method}"
  end
end 
```

Hmm. The above controller method works like I'd expect on Ruby v1.9.3-p194 and Rails v3.2.3; 201's w/o response body for the HEAD requests and 200's w/ for the GET's.

# vba - VBA Shell 命令总是返回“找不到文件”

> ID：10439024
> 
> 赞同：-1
> 
> 时间：2012-05-03T20:42:31.267
> 
> 标签：vba, ms-access

我正在为 MS Access 使用 VBA，以便将小型 C# 应用程序链接到我的数据库作为帮助工具。我从 stackoverflow 本身尝试了几个不同的想法，包括 ShellAndWait 实用程序和该页面上的另一个。

我在表单上有一个按钮。当您单击此按钮时，它应该运行我当前存储的另一个应用程序`%APPDATA%/program/`

这是当前活动的代码：

```
Private Sub BtnImport_Click()

Dim file As String
Dim hProcess as Long

file = Environ("APPDATA") & "\program\component_import.exe"
'This is the standard version, which apparently does nothing at this time.
hProcess = Shell(file, vbNormalFocus)

'This is the RunApplication version I got from here earlier. It ends
'with "Successfully returned -532462766
import_funcs.RunApplication(file)

'This is the ShellAndWait version, which gives me a "File not Found" error
import_funcs.ShellAndWait(file, 0, vbNormalFocus, AbandonWait)

End Sub 
```

我已经为 ShellAndWait 模块和另一个类似模块更改了原始外壳。就我的应用程序未启动而言，这些选项都没有任何不同。

我已经仔细检查过“文件”是否正确（它指向`C:\Users\Me\AppData\Roaming\program\component_import.exe`）。我已仔细检查以确保我的应用程序位于正确的位置。

如果我从文件资源管理器中双击它运行良好。它说`Run-time error '53': File not found.`每当我尝试从 MS Access 运行它时。

有什么建议么？

编辑：顺便说一句，路径本身不包含任何空格。

编辑：添加了一些额外的代码。链接到第一个 pastebin：[RunApplication pastebin](http://pastebin.com/8NXUjRwF) 链接到第二个 pastebin：[ShellAndWait pastebin](http://pastebin.com/9VPqAYNY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T02:43:39.123

我发现有时使用 shell 命令时带有空格的文件夹名称会引发错误。

例如：C:\我的文件夹\appl.exe

使它： C:\MyFolder\appl.exe

还可以检查有效路径：以下代码通过将 url 作为参数传递来检查 chrome.exe 所在的文件夹并从那里调用 www.google.com：

```
Public Sub Display_Google()
  Dim chromePath As String
  chromePath = "C:\Program Files\Google\Chrome\Application\chrome.exe"

  If FileExists(chromePath) Then
  Shell (chromePath & " -url" & " " & "www.google.com"), vbMaximizedFocus
  Else

  chromePath = "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe"
  Shell (chromePath & " -url" & " " & "www.google.com"), vbMaximizedFocus
  End If
End Sub 
```

```
Public Function FileExists(ByVal FileName As String) As Boolean
    On Error Resume Next
    FileExists = Not CBool(GetAttr(FileName) And (vbDirectory Or vbVolume))
    On Error GoTo 0
End Function 
```

# jquery - 使用 jQuery 对元素进行定时滑动

> ID：10439029
> 
> 赞同：2
> 
> 时间：2012-05-03T20:42:42.927
> 
> 标签：jquery

我希望在页面加载后 10 秒左滑动一个元素。但我不希望它完全从页面上消失。我只想让它滑动 200px。然后，当我单击剩余的可见部分时，我希望它滑回右侧。

不太确定如何设置距离......这是我到目前为止所拥有的：

```
$("#myEl").click(function(){
    $(this).animate({width:'toggle'},500);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:44:18.360

```
$("#myEl").click(function(){
    if ($(this).hasClass('left')) {
        $(this).animate({ left: '+=200' }, 500).removeClass('left');
    } else {
        $(this).animate({left:'-=200'}, 500).addClass('left');
    }
}); 
```

我制作了一个[JSFiddle 来演示这一点](http://jsfiddle.net/9M3fk/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T20:49:31.187

尝试，

```
$(function () {
   var $myEl = $('#myEl');
   var orgPos = $myEl.position().left;

   $myEl.click(function(){
      //Moves to origPos after click
      $(this).stop(true, false).animate({left: orgPos},500); 
   })
   .animate({left: '-=200'}, 10000); //Animates for 10 secs
}); 
```

编辑：[**DEMO**](http://jsfiddle.net/XuGpD/2/) <--用更大的 div 更新

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:01:33.570

### *[jsBin 演示](http://jsbin.com/edemer/2/edit)*

```
function tabHide(){                             // define a 'HIDE' function
  $('#tab').stop().animate({left:-150},1000); 
}

function tabShow(){                             // define a 'SHOW' function
  $('#tab').stop().animate({left: -1 },1000);
}

// Now let's play with this functions:

setTimeout(function(){                          // run 'HIDE' after 10"
  tabHide();
},10000);

$('#tab').toggle(function(){                    // click toggle 'SHOW' / 'HIDE'
   tabShow();
},function(){
   tabHide();
}); 
```

[jQuery .toggle()](http://api.jquery.com/toggle/)
[jQuery .stop()](http://api.jquery.com/stop/)

# android - 较旧的 Android 操作系统版本不支持 getSize()，不推荐使用 getWidth() / getHeight()

> ID：10439033
> 
> 赞同：8
> 
> 时间：2012-05-03T20:42:58.443
> 
> 标签：android, deprecated, backwards-compatibility

那么我该如何编写代码来适应这种情况呢？我不想在我的代码中留下弃用的 API 调用，但我也不想失去使用（稍微）旧设备的用户。我可以实施某种兼容性设置吗？

相对。代码

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int screen_width = size.x;
int screen_height = size.y; 
```

与旧方法相比：

```
int screen_width = getWindowManager().getDefaultDisplay().getWidth();
int screen_height = getWindowManager().getDefaultDisplay().getHeight(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T19:02:03.993

我有两个功能，发送上下文和获取以像素为单位的高度和宽度。

```
public static int getWidth(Context mContext){
    int width=0;
    WindowManager wm = (WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    if(Build.VERSION.SDK_INT>Build.VERSION_CODES.HONEYCOMB){                   
        Point size = new Point();
        display.getSize(size);
        width = size.x;
    }
    else{
        width = display.getWidth();  // deprecated
    }
    return width;
} 
```

和

```
public static int getHeight(Context mContext){
    int height=0;
    WindowManager wm = (WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    if(Build.VERSION.SDK_INT>Build.VERSION_CODES.HONEYCOMB){               
        Point size = new Point();
        display.getSize(size);
        height = size.y;
    }else{          
        height = display.getHeight();  // deprecated
    }
    return height;      
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T20:44:53.160

你可以做这样的事情

```
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH){
           //do stuff pertaining to this version here
}else{
           //other versions
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T20:51:04.997

最好的（最好的，我的意思是几乎每次都可以使用的选项）选项是使用反射。查看 Android~~[向后兼容性](http://developer.android.com/resources/articles/backward-compatibility.html)~~ [向后兼容性](http://android-developers.blogspot.co.uk/2009/04/backward-compatibility-for-android.html)指南（更新了关于反射的文章的新位置）。

虽然 tyczj 的答案将完美地工作，只要弃用的功能仍在 SDK 中，一旦它们被删除，如果您仍想针对最新的 SDK 构建，您将无法使用它们或在旧设备上运行您的应用程序.

反射通过在运行时有效地动态检测函数来解决这个问题，这意味着即使您针对 ICS 构建，只要 minSdkVersion 是正确的，您就可以让您的应用程序在带有 Gingerbread 或 Froyo 的设备上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T14:03:39.790

我认为 RivieraKid 的建议是这样的：

```
static Point getDisplaySize(Display d)
{
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    {
        return getDisplaySizeGE11(d);
    }
    return getDisplaySizeLT11(d);
}

@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
static Point getDisplaySizeGE11(Display d)
{
    Point p = new Point(0, 0);
    d.getSize(p);
    return p;
}
static Point getDisplaySizeLT11(Display d)
{
    try
    {
        Method getWidth = Display.class.getMethod("getWidth", new Class[] {});
        Method getHeight = Display.class.getMethod("getHeight", new Class[] {});
        return new Point(((Integer) getWidth.invoke(d, (Object[]) null)).intValue(), ((Integer) getHeight.invoke(d, (Object[]) null)).intValue());
    }
    catch (NoSuchMethodException e2) // None of these exceptions should ever occur.
    {
        return new Point(-1, -1);
    }
    catch (IllegalArgumentException e2)
    {
        return new Point(-2, -2);
    }
    catch (IllegalAccessException e2)
    {
        return new Point(-3, -3);
    }
    catch (InvocationTargetException e2)
    {
        return new Point(-4, -4);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-22T06:53:04.180

我通常有一个超级类，即。BaseActivity 具有通用方法，用于获取当前屏幕大小的点。在实际活动中保持一切整洁。

```
/**
 * Return screen size as a point.
 * @return
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
@SuppressWarnings("deprecation")
protected Point getSize() {
    final Point point = new Point();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
        getWindowManager().getDefaultDisplay().getSize(point);
    }
    else {
        final Display display = getWindowManager().getDefaultDisplay();
        point.x = display.getWidth();
        point.y = display.getHeight();
    }
    return point;
} 
```

# asp.net - 保存一个字符串以供以后在 ASP.NET 中使用

> ID：10439034
> 
> 赞同：2
> 
> 时间：2012-05-03T20:42:58.673
> 
> 标签：asp.net, save

我有一个简单的字符串，我想保存它以供以后在 ASP.NET 服务器上使用。它是 Web 服务的授权字符串。它大部分保持不变，但可能每隔几个月到期。它将以编程方式从代码隐藏文件中保存。有什么简单的地方可以保存吗？

最初的想法是：

1.  文件 - 似乎合理
2.  数据库 - 我们没有一个设置，保存一个字符串似乎有很多开销
3.  会话 - 这将是太短暂了
4.  配置文件 - 根据 MK_Dev 的回答，这将需要重新启动 Web 应用程序。那就别去了。
5.  我不知道的其他地方，但会是完美的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T20:45:19.660

另一种可能性是创建自定义注册表项。这是一篇包含一些代码示例的文章：[使用 .NET 操作和编辑注册表](http://www.worldofasp.net/tut/Registry/Manipulating_and_Editing_Registry_with_NET_135.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:45:22.633

如果您不介意在值更改时重新启动应用程序，那么配置文件就是要走的路。如果您需要它是完全动态的，您可以将配置表添加到数据库并在更改时更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T20:46:25.807

服务器端缓存怎么样？

看看这个：http: [//msdn.microsoft.com/en-us/library/18c1wd61%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/18c1wd61%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T20:48:11.003

如果字符串在大多数情况下保持静态，我会将其存储在具有过期和/或依赖关系的缓存中。如果你走依赖路径，你可以使用一个文件或将字符串存储在数据库中，它会在更改时自动更新。

有关详细信息，请参阅本文：[缓存应用程序数据](http://msdn.microsoft.com/en-us/library/6hbbsfk6%28v=vs.71%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T21:04:32.520

`System.Environment`变量呢？

```
 System.Environment.SetEnvironmentVariable("mystring","asdf");
    System.Environment.GetEnvironmentVariable("mystring"); 
```

# c# - 在运行时选择一个 tableadapter

> ID：10439038
> 
> 赞同：0
> 
> 时间：2012-05-03T20:43:14.873
> 
> 标签：c#, winforms, data-binding, tableadapter

假设有n个按钮和一个datagridview。

我拖动一个包含 n 个表的数据集，因此创建 n 个具有相同连接字符串的表适配器。我想单击每个按钮以分别显示每个 tableadapter 中的每个表。

我认为这是个坏主意。

我应该以编程方式创建 tableadapter 而不是将控件拖到表单上吗？

![样本](../Images/3e1312863b19996cf346204e359de463.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:54:50.827

我刚刚为别人写了这段代码：

```
//class variable:
DataSet ds  = new DataSet();

//fill dataset in some of your method:
using(SqlConnection conn = new SqlConnection("connString"))
{
    DataTable table1 = new DataTable("People");
    DataTable table2 = new DataTable("Cars");
    ds.Tables.Add(table1);
    ds.Tables.Add(table2);
    string query1 = @"SELECT * FROM People";
    string query2 = @"SELECT * FROM Cars";
    string[] queries = { query1, query2 };
    for(int i = 0; i < queries.Length; i++)
    {
         using(SqlDataAdapter da = new SqlDataAdapter(queries[i], conn))
             da.Fill(ds.Tables[i]);
    }
}

//now bind tables to your button click events (this is example for Cars):
void button1_Click()
{
    dataGridView1.DataSource = null;
    dataGridView1.DataSource = ds.Tables["Cars"].DefaultView; 

    //do the same for table "People" in some other button click event
} 
```

# ruby-on-rails - 在rails中做购物车如何更好？

> ID：10439039
> 
> 赞同：0
> 
> 时间：2012-05-03T20:43:18.870
> 
> 标签：ruby-on-rails, rails-activerecord

如何更好地计算每个行项目的总成本，然后计算所有总成本？我有这样的数据库：文章在我有价格的地方存在表格，但如何显示价格*数量？最好在控制器中做？或在模型中，但在模型中，如何做到这一点，注意，在数据库中我只有价格，数量在行项目中给出：我想要这样的东西：

```
class LineItem < ActiveRecord::Base
    belongs_to :article
    belongs_to :cart
    def total_price
      existence.PRICEM * quantity
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:49:48.723

这个核心业务功能应该驻留在您的模型中。

您的购物车可能有：

```
class Cart
  def total_price
    line_items.inject(0.0){|sum,line_item| sum + line_item.total_price }
  end
end

class LineItem
  def total_price
    quantity * price
  end
end 
```

这样，您仍然可以遍历您的订单项以显示它们的价格，然后也可以显示您的购物车。当这转移到订单时，您需要存储这些值而不是计算它们。

# css - Wordpress 按钮中的 jQuery 对话框出现在左侧而不是右侧

> ID：10439041
> 
> 赞同：1
> 
> 时间：2012-05-03T20:43:35.063
> 
> 标签：css, wordpress, jquery-ui-dialog

我有一个大表，我想出现在由 jQuery UI 创建的对话框中。

我创建的开发版本工作正常，但请注意，这不是使用默认的 jQuery 和 jQuery UI 的 Wordpress 版本。出于开发版本的目的，我注册了这两个库的版本。

使用相同的脚本和对话框内容，我尝试使用默认版本的 jQuery 库为我的博客重现对话框。这会产生一个对话框打开的结果，但在显示中，标题栏中的默认关闭按钮位于左侧。当您将鼠标悬停在此关闭按钮上时，图标会向下移动，但单击它仍会关闭。此外，调整大小图标出现在左下角，我添加了一个额外的关闭按钮。

这让我怀疑我的表和 jquery UI css 之间存在 css 冲突。我注意到一些帖子表明 jQuery UI 1.8.16 和包含大量内容的对话框存在问题。

但是，我找不到默认 jQuery UI 库的 css，我假设它必须存在。

解决此问题的简单方法是取消注册默认版本并注册外部版本，但当 Wordpress 中已有该功能时，这似乎是一种浪费。

问题：

1.  我在哪里可以在 Wordpress 中找到默认 jquery UI 的 css
2.  关于可能导致此问题的任何建议

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:00:48.170

1）CSS文件位于/wp-includes/css/jquery-ui-dialog.css（压缩）和/wp-includes/css/jquery-ui-dialog.css（开发）。

2）我们需要看一个例子来了解问题可能是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:54:26.983

我通过简单地添加来自 jquery UI 主题的 CSS 文件解决了显示问题。一旦到位，一切都显示正确。不优雅，但它很快解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T20:51:54.657

该按钮的所有样式都位于第 69 行：

/wp-content/plugins/mailchimp//css/flick/flick.css

# r - 超椭球置信区域

> ID：10439042
> 
> 赞同：0
> 
> 时间：2012-05-03T20:43:41.377
> 
> 标签：r, ellipse, confidence-interval

R 函数`ellipse()`（包：ellipse）允许为两个参数生成置信区域的坐标。有谁知道如何为 D>2 参数生成超椭球置信区域的坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T00:12:16.450

如果我理解您的问题，我认为您可以在“rggobi 简介”文档中描述您想要的内容，您可以通过搜索找到该文档。他们称之为图形manova。`makeEllipse`我在包中的函数中以 3D 方式实现了它`ChemoSpec`。如果您研究该功能和相关功能，我认为您可以将其扩展到更多维度。`plotScores3D`您可以通过在或中运行示例来查看它的实际效果`plotScoresRGL`。祝你好运。

# iphone - 在 MFMailComposeViewControllerDelegate 中处理邮件草稿（即 MFMailComposeResultSaved）

> ID：10439055
> 
> 赞同：1
> 
> 时间：2012-05-03T20:44:21.417
> 
> 标签：iphone, cocoa-touch

我正在编写一个简单的应用程序（使用 Xcode 4.2 和 iOS 5，使用 iOS 模拟器进行测试）。这会像往常一样发送电子邮件，并且电子邮件撰写窗口以非模态形式打开。电子邮件撰写的可能结果之一是“另存为草稿”，即 MFMailComposeResultSaved。在这种情况下如何检索已保存的草稿？或者更好的是，我可以取消这个选项吗？（即即使用户在“邮件撰写”窗口中进行了任何修改，它也不应该*显示*“另存为草稿”选项。请帮忙吗？

**在 ViewController.h（头文件）中**

```
-(void)showEmailComposer;
-(void) displayComposerSheet; 
```

**在 ViewController.m 文件中：**

```
-(void)showEmailComposer {

    NSLog(@"showEmailComposer: begin");

Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
if (mailClass != nil)
{
    if ([mailClass canSendMail]) {
        NSLog(@"showEmailComposer: Calling displayComposerSheet");
        [self displayComposerSheet];

    }
}
 }

#pragma mark -
#pragma mark Compose Mail

-(void) displayComposerSheet {
mailComposer = [[MFMailComposeViewController alloc] init];
mailComposer.mailComposeDelegate = self;
[self presentModalViewController:mailComposer animated:YES];
}

-(void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {

NSString *alertTitle;
NSString *alertMsg;

// Notifies users on errors, if any
switch (result) {

    case MFMailComposeResultCancelled:
        alertTitle = @"Cancelled";
        alertMsg = @"Mail composition got cancelled";
        break;
    case MFMailComposeResultSaved:
        alertTitle = @"Success - Saved";
        alertMsg = @"Mail got saved successfully!";
        break;
    case MFMailComposeResultSent:
        alertTitle = @"Success - Sent";
        alertMsg = @"Mail sent successfully!";
        break;
    case MFMailComposeResultFailed:
        alertTitle = @"Failure";
        alertMsg = @"Sending the mail failed";
        break;
    default:
        alertTitle = @"Failure";
        alertMsg = @"Mail could not be sent";
        break;
}

UIAlertView *alert = [[UIAlertView alloc] 
                      initWithTitle:alertTitle
                      message:alertMsg
                      delegate:nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
[alert show];

[self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:16:17.870

如果用户选择将邮件保存到草稿，则邮件位于“**邮件**”应用程序的“**草稿**”目录中。如果用户选择发送邮件，则邮件在“**邮件**”应用程序的“**发件箱**”目录中。所以我的建议是，通知用户“**邮件**”应用程序负责邮件的发送和编辑。

# android - 将字符串转换为 JsonObject

> ID：10439056
> 
> 赞同：0
> 
> 时间：2012-05-03T20:44:21.317
> 
> 标签：android, json

我在解析这个 JSON 时遇到问题：

```
{
  "850": {
    "display-name": "Volvo 850",
    "name-parts": {
      "make": "volvo",
      "model": "850"
    },
    "image": "http://images.thecarconnection.com/tmb/1997-volvo-850-lp_100026906_t.gif",
    "url": "http://www.thecarconnection.com/cars/volvo_850"
  },
  "960": {
    "display-name": "Volvo 960",
    "name-parts": {
      "make": "volvo",
      "model": "960"
    },
    "image": "http://images.thecarconnection.com/tmb/1997-volvo-960_100026908_t.gif",
    "url": "http://www.thecarconnection.com/cars/volvo_960"
  },
  "c30": {
    "display-name": "Volvo C30",
    "name-parts": {
      "make": "volvo",
      "model": "c30"
    },
    "image": "http://images.thecarconnection.com/tmb/2012-volvo-c30-2-door-coupe-auto-angular-front-exterior-view_100358956_t.gif",
    "url": "http://www.thecarconnection.com/cars/volvo_c30"
  },
  "c70": {
    "display-name": "Volvo C70",
    "name-parts": {
      "make": "volvo",
      "model": "c70"
    },
    "image": "http://images.thecarconnection.com/tmb/2012-volvo-c70_100369317_t.gif",
    "url": "http://www.thecarconnection.com/cars/volvo_c70"
  },
  "s40": {
    "display-name": "Volvo S40",
    "name-parts": {
      "make": "volvo",
      "model": "s40"
    },
    "image": "http://images.thecarconnection.com/tmb/2011-volvo-s40-4-door-sedan-angular-front-exterior-view_100329062_t.gif",
    "url": "http://www.thecarconnection.com/cars/volvo_s40"
  }
} 
```

我正在解析相同的内容：

```
try{
             JSONObject  jsonObj = new JSONObject(jsonString);

             System.out.println(jsonObj.length());
             JSONArray objNames = jsonObj.names();
             for(int i=0;i<objNames.length();i++)
             {
                 System.out.println("The Name:=========="+objNames.getString(i));
             }
             if(jsonObj.length()>0){

                    for (int index = 0; index < jsonObj.length(); index++) {
                        JSONObject jsonName = (JSONObject) objNames.get(index);
                        System.out.println("The display name:"+jsonName.getString((String) objNames.get(index)));
                        System.out.println("The Image:"+jsonName.getString("image"));
                        System.out.println("The URL:"+jsonName.getString("url"));

             }
             }

         }catch(Exception e)
         {
             e.printStackTrace();
         } 
```

但它返回一个错误：

```
05-04 01:59:54.737: W/System.err(3850): org.json.JSONException: Value tl at 0 of type java.lang.String cannot be converted to JSONObject
05-04 01:59:54.737: W/System.err(3850):     at org.json.JSON.typeMismatch(JSON.java:96)
05-04 01:59:54.737: W/System.err(3850):     at org.json.JSONArray.getJSONObject(JSONArray.java:484)
05-04 01:59:54.747: W/System.err(3850):     at com.TCC.android.parse.JsonParse.parseBrands(JsonParse.java:30)
05-04 01:59:54.747: W/System.err(3850):     at com.TCC.android.ResearchList$2$2.run(ResearchList.java:167) 
```

我正在尝试解决这个问题，但每次都失败了，我可以通过每次获取 Json 对象并解析它的值来做到这一点，但是当对象增加到 100 多个时，它的任务太长了。我需要一种系统且有效的方法来做到这一点。请建议我对此的任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:49:49.983

你的问题是你得到一个字符串数组作为你的名字，然后试图将 JSONObjects 从同一个数组中提取出来。该数组仅包含字符串，正如您的堆栈跟踪所证明的那样。您需要遍历您的名称列表，并且对于从 objNames 数组中获得的每个名称，执行 a`jsonObj.get(name)`并将 THAT 转换为 a `JSONObject`。

# generics - 关于如何使用 multirec 的教程

> ID：10439063
> 
> 赞同：3
> 
> 时间：2012-05-03T20:44:54.250
> 
> 标签：generics, haskell, abstract-syntax-tree, multirec

我正在用 Haskell 编写一个编译器，需要一些工具来处理抽象语法树（比如用源位置和其他东西注释它们）。我已经被指出来[`multirec`](http://hackage.haskell.org/package/multirec)包裹。

我找到了一些关于这个包的信息，但是它太密集而无法阅读和理解，因为这些想法是从理论的角度提出的。

所以我正在寻找更轻松的东西，作为说明包使用的教程或简单的应用程序。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:54:15.813

主要文件将是：

*   黑[线鳕文档](http://hackage.haskell.org/packages/archive/multirec/0.7.1/doc/html/Generics-MultiRec.html)
*   [查默斯 CS 演讲](http://www.andres-loeh.de/multirec-chalmers.pdf)
*   ICFP[论文](http://www.andres-loeh.de/Rec/MutualRec.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:39:23.070

除了 Don 给出的建议之外，还有一段[Andres](http://vimeo.com/6612724)在爱丁堡 ICFP 2009 上展示论文的视频。

在[Martijn van Steenbergen 的硕士论文](http://martijn.van.steenbergen.nl/projects/Selections.pdf)第 6 章中，Multirec 用于 AST 操作。

# linux - Linux 内核 0.0.1 与 2.6.36，“ctype.h”，有什么区别？

> ID：10439066
> 
> 赞同：1
> 
> 时间：2012-05-03T20:45:12.383
> 
> 标签：linux, kernel, performance, ctype

## 从 0.0.1 开始的 linux 内核 2.6.36 的效率如何

## 0.0.1：

1.  我知道，在这个版本中，Linus 将 c（函数的输入变量）的值分配给了一个临时变量，并在函数内部对该临时变量进行操作并返回该临时变量。

2.  这发生在 tolower/toupper 函数中。

## 2.6.36：

1.  在tolow/toupper中，他改变了它。
2.  ctype 是常量。
3.  编写了新函数 ismask。

## 我想知道什么？：

**为什么要做出这些改变？它带来了什么好处？**

## 我分别列出了内核版本 0.0.1 和 2.6.36 中的 ctype.h 文件。

```
 **** ctype.h, linux-0.01 *****

    #ifndef _CTYPE_H
    #define _CTYPE_H

    #define _U      0x01    /* upper */
    #define _L      0x02    /* lower */
    #define _D      0x04    /* digit */
    #define _C      0x08    /* cntrl */
    #define _P      0x10    /* punct */
    #define _S      0x20    /* white space (space/lf/tab) */
    #define _X      0x40    /* hex digit */
    #define _SP     0x80    /* hard space (0x20) */

    extern unsigned char _ctype[];
    extern char _ctmp;

    #define isalnum(c) ((_ctype+1)[c]&(_U|_L|_D))
    #define isalpha(c) ((_ctype+1)[c]&(_U|_L))
    #define iscntrl(c) ((_ctype+1)[c]&(_C))
    #define isdigit(c) ((_ctype+1)[c]&(_D))
    #define isgraph(c) ((_ctype+1)[c]&(_P|_U|_L|_D))
    #define islower(c) ((_ctype+1)[c]&(_L))
    #define isprint(c) ((_ctype+1)[c]&(_P|_U|_L|_D|_SP))
    #define ispunct(c) ((_ctype+1)[c]&(_P))
    #define isspace(c) ((_ctype+1)[c]&(_S))
    #define isupper(c) ((_ctype+1)[c]&(_U))
    #define isxdigit(c) ((_ctype+1)[c]&(_D|_X))

    #define isascii(c) (((unsigned) c)<=0x7f)
    #define toascii(c) (((unsigned) c)&0x7f)   

    #define tolower(c) (_ctmp=c,isupper(_ctmp)?_ctmp+('a'+'A'):_ctmp)
    #define toupper(c) (_ctmp=c,islower(_ctmp)?_ctmp+('A'-'a'):_ctmp)

    #endif 
```

#

```
****** ctype.h, linux-2.6.36 *******

#ifndef _LINUX_CTYPE_H
#define _LINUX_CTYPE_H

/*
* NOTE! This ctype does not handle EOF like the standard C
* library is required to.
*/

#define _U      0x01    /* upper */
#define _L      0x02    /* lower */
#define _D      0x04    /* digit */
#define _C      0x08    /* cntrl */
#define _P      0x10    /* punct */
#define _S      0x20    /* white space (space/lf/tab) */
#define _X      0x40    /* hex digit */
#define _SP     0x80    /* hard space (0x20) */

extern const unsigned char _ctype[];

#define __ismask(x) (_ctype[(int)(unsigned char)(x)])

#define isalnum(c)      ((__ismask(c)&(_U|_L|_D)) != 0)
#define isalpha(c)      ((__ismask(c)&(_U|_L)) != 0)
#define iscntrl(c)      ((__ismask(c)&(_C)) != 0)
#define isdigit(c)      ((__ismask(c)&(_D)) != 0)
#define isgraph(c)      ((__ismask(c)&(_P|_U|_L|_D)) != 0)
#define islower(c)      ((__ismask(c)&(_L)) != 0)
#define isprint(c)      ((__ismask(c)&(_P|_U|_L|_D|_SP)) != 0)
#define ispunct(c)      ((__ismask(c)&(_P)) != 0)
/* Note: isspace() must return false for %NUL-terminator */
#define isspace(c)      ((__ismask(c)&(_S)) != 0)
#define isupper(c)      ((__ismask(c)&(_U)) != 0)
#define isxdigit(c)     ((__ismask(c)&(_D|_X)) != 0)

#define isascii(c) (((unsigned char)(c))<=0x7f)
#define toascii(c) (((unsigned char)(c))&0x7f)

static inline unsigned char __tolower(unsigned char c)
{
       if (isupper(c))
               c -= 'A'-'a';
       return c;
}

static inline unsigned char __toupper(unsigned char c)
{
       if (islower(c))
               c -= 'a'-'A';
       return c;
}

#define tolower(c) __tolower(c)
#define toupper(c) __toupper(c)

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:23:04.477

> 为什么要做出这些改变？它带来了什么好处？

一方面，您不必再`ctemp`在调用 isupper 的代码中定义变量，从而减少代码行数。它也显然避免了泄露实现细节。

# c# - 字典赋值快捷方式编译器功能还是语言功能？

> ID：10439068
> 
> 赞同：4
> 
> 时间：2012-05-03T20:45:17.190
> 
> 标签：c#, .net, compiler-construction

通过今天的一些随机对象创建，我发现了一个简洁的`Dictionary<K, V>`. 以下赋值是编译器快捷方式还是`Dictionary<string, string>`.

```
IDictionary<string, string> items = { { "item1key", "item1value" } }; 
```

查看源代码，`Dictionary<K, V>`我没有看到任何关于它是如何工作的东西。为此类 dot 实现所有接口不允许我执行类似的操作。为什么我们可以为字典而不是另一种类型。例如，编译器或语言特性如何知道第一项是键，第二项是值。或者更具体的，同样的语法不能用于`List<string>`

```
List<string> items = { "item1" }; 
```

所以第一个是有效的，为什么？

我不一定要尝试复制这一点，而是很好奇*为什么*会这样。在这种情况下，是什么让字典特别？

## 有效的例子

```
public class Button
{
    public string Title { get; set; }
    public ButtonType Type { get; set; }
    public IDictionary<string, string> Items { get; set; }
    public bool RequiresSelected { get; set; }
}

var buttons = new List<Button>
    {
        new Button { 
            Items = {
                        {"button1", "Button 1"},
                        {"button2", "Button 2"},
                        {"button3", "Button 3"},
                    }, 
            Title = "3 Buttons", 
            Type = ButtonType.DropDown 
        }
    }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T20:46:48.323

您显示的语法在 C# 中无效。你需要：

```
IDictionary<string, string> items = new Dictionary<string, string>
    { { "item1key", "item1value" } }; 
```

那时它只是一个普通的集合初始化器，所以列表等效项是：

```
List<string> items = new List<string> { "item1" }; 
```

编辑：让我们看看我的编辑能不能打败你的。我的猜测是你已经看到了类似的东西：

```
var foo = new Foo {
    SomeDictionaryProperty = { 
         { "item1key", "item1value" }
    }
}; 
```

这是一个*嵌入式*集合初始化器，也可以用于列表。它不是创建一个*新*字典，而是添加到现有字典。上面的代码等价于：

```
var tmp = new Foo();
tmp.SomeDictionaryProperty.Add("item1key", "item1value");
var foo = tmp; 
```

它工作的另一个例子：

```
var form = new Form {
    Controls = { new Label { Text = "Foo"}, new Label { Text = "Bar" } }
}; 
```

有关详细信息，请参阅 C# 4 规范（对象初始化器）的第 7.6.10.2 节。重要的是：

```
member-initializer:
    identifier   =   initializer-value

initializer-value:
    expression
    object-or-collection-initializer 
```

因此，您可以将属性初始化为*特定*值（在这种情况下将使用 setter）*或*通过对象/集合初始化程序，在这种情况下将使用属性的*getter*，然后 setter 或 Add 方法将用于对象/集合初始化器的主体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T20:51:34.427

这是C#编译器的一个特性，字典并不特殊：任何支持的集合`Add`都可以用这种方式初始化。详细信息在[C# Language Specification 4.0](http://www.microsoft.com/en-us/download/details.aspx?id=7029)的第 7.6.10.3 节中。

> 应用集合初始值设定项的集合对象必须是实现 System.Collections.IEnumerable 的类型，否则会发生编译时错误。对于按顺序指定的每个元素，集合初始值设定项在目标对象上调用 Add 方法，并将元素初始值设定项的表达式列表作为参数列表，对每个调用应用正常的重载决议。因此，集合对象必须包含适用于每个元素初始值设定项的 Add 方法。

# javascript - 在 jqGrid ColumnChooser 上添加删除列处理程序

> ID：10439072
> 
> 赞同：2
> 
> 时间：2012-05-03T20:45:26.273
> 
> 标签：javascript, jqgrid, multi-select

我正在使用[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ajqgriddocs) [columnChooser](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ajquery_ui_methods)，如下所示：

```
 jQuery(grid).jqGrid(
        'navButtonAdd',
        pagerDiv,
        {
            caption: "Columns",
            buttonicon: "ui-icon-newwin",
            title: "Hide/Show Columns",
            onClickButton: function () {
                $(this).jqGrid('columnChooser', {
                    done: function (perm) {
                        if (perm) {
                            $(this).jqGrid('remapColumns', perm, true);
                        }
                    },
                    modal: true,
                    width: 400,
                    height: 300,
                    classname: 'column-chooser-select'
                });
            }
        }
    ); 
```

并且想知道是否有一种方法可以在 columnChooser 上指定一个事件处理程序（使用带有 jqGrid 的[jQuery UI](http://www.quasipartikel.at/multiselect/) Multiselect 插件），该处理程序在添加或删除列时触发。所以我想这是一个两部分的问题：

1.  jQuery UI Multiselect 是否支持这样的事情？
2.  如果是这样，有没有办法在不改变 jqGrid 源的情况下连接它？

关于我想要实现的一些背景：

我的默认网格配置隐藏了许多列。其中一些列不是从数据库中填充的——它们是晦涩的、很少使用的数据元素，如果填充这些元素会显着降低查询执行性能（涉及具有 1 亿多条记录的表的多个连接）。

如果用户选择其中一个列进行显示，我想警告他们需要再次往返服务器，这可能需要一段时间 - 并让他们选择取消列添加。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:49:57.020

我想我理解你的问题并且觉得你的问题很有趣，所以我为你写了一个演示，展示了如何解决这个问题。

[columnChooser 在](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jquery_ui_methods#column_chooser)内部使用 jQuery UI Multiselect 插件，该插件使用 jQuery UI Sortable。所以我建议使用jQuery UI Sortable 的[sortreceive事件来捕获所需的信息。](http://docs.jquery.com/UI/API/1.7.1/Sortable#event-receive)

代码可以如下

```
$("#grid").jqGrid('navButtonAdd', '#pager', {
    caption: "",
    buttonicon: "ui-icon-calculator",
    title: "Choose columns",
    onClickButton: function () {
        $(this).jqGrid('columnChooser');
        $("#colchooser_" + $.jgrid.jqID(this.id) + " ul.selected")
            .bind("sortreceive", function (event, ui) {
                alert('column "' + ui.item.text() + '" is choosed');
            });
        $("#colchooser_" + $.jgrid.jqID(this.id) + " ul.available a.action")
            .click(function () {
                alert('column "' + $(this).parent().text() + '" is choosed');
            });

    }
}); 
```

[在此处](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithColumnChooser8.htm)查看演示。

代码在对话框初始化时列选择器中的*初始*列列表的“+”上绑定“单击”事件。我想这对你来说已经足够了。如果需要，您可以轻松修改代码以支持在使用`columnChooser`.

我几乎忘了提到我在演示改进版中使用了`columnChooser`（见[答案](https://stackoverflow.com/a/9688942/315935)），但我上面的建议也适用于原始版本`columnChooser`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T10:05:48.407

我在 JqGrid 中使用以下代码作为列选择器插件。当我勾选网格中的**全选**复选框时。我想排除特定列（默认情况下它不应该显示在我的网格中）。
我在 col 模型中使用了 hidden=True 属性。购买我也想在列选择器中处理这些。

```
function Properties_Columnchooser() {
    $('#btn_setColumns').click(function () {
        jQuery('#grid-tableProperties').jqGrid('columnChooser',{
        "shrinkToFit" : true,
        "autowidth" : true,
        done : function(perm) {
            w = $(window).width();
            // alert('done ' + w);
            if (perm) 
               {
                this.jqGrid("remapColumns", perm, true);
                 this.setGridWidth(w - 30, true);

                $('.ui-search-input').show();
            } 
             else 
            {
            }
        }
    }
);
    });
} 
```

# postgresql - 在 NSIS 中查找 pg_dump.exe 路径以使用 Exec 函数调用（或者是否有更好的方法与 postgres 对话？）

> ID：10439073
> 
> 赞同：0
> 
> 时间：2012-05-03T20:45:31.373
> 
> 标签：postgresql, windows-7, nsis

我正在使用 NSIS 构建一个 Windows 7 安装程序，供公司内部使用。安装的一个步骤是使用 pg_dump.exe 备份 Postgres DB，然后恢复打包在已安装的 usign pg_restore.exe 中的文件。这两个可执行文件是任何 Postgres 安装中包含的普通帮助工具，因此可以预期它们存在于用户的机器上。我想像这样执行这个操作：

```
ExecWait 'C:\path\to\file\pg_dump.exe --host localhost --port 5432 --username "postgres" --no-password  --format custom --blobs --verbose --file $OUTDIR/myDB.backup myDB' $0
DetailPrint 'Backup DB process return $0' 
```

但我遇到的问题是可执行文件的路径因机器而异。所以我正在尝试运行搜索操作来查找文件。比如这个

```
${Locate} "C:\" "/L=F /M=pg_dump.exe" "locateBackup" 
```

或者这个（使用[locate 插件](http://nsis.sourceforge.net/Locate_plugin)）

```
${locate::Open} "C:\" `/F=1 /D=0 /X=exe /-PN="Oracle" /-PF="$WINDIR\System|$WINDIR\System32|$WINDIR\Help" /N=pg_dump.exe /B=1` $0
${locate::Find} $0 $1 $2 $3 $4 $5 $6 
```

这两种方法在 Windows 7 上都失败了。当搜索遍历某些目录时，安装程​​序崩溃；我不确定为什么。

接下来我想尝试使用 NSIS 命令在 Windows 注册表中查找可执行文件的位置`ReadRegStr`，可能是这样的

```
ReadRegStr $0 HKLM Software\pg_dump ""
DetailPrint "Its installed at: $0" 
```

但我找不到用于查找 pg_dump（或 pg_restore）的正确注册表项。

有没有办法使用本机 NSIS 函数识别 Windows 7 上已安装可执行文件的路径？或者有没有更好的方法来使用 NSIS 安装程序备份和恢复 Postgres 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:54:15.307

您可以在以下位置找到安装目录（如果是通过一键安装程序安装的）

> HKLM\PostgreSQL\Installation\postgresql-9.1\Base 目录

显然这个键是版本相关的。并且可以有多个条目（如果安装了多个版本）。因此，您需要枚举条目并选择适合您的任何版本。

然后附加`\bin`到从“基本目录”获得的值，pg_dump/pg_restore 应该在那里。

# mysql - SQL 映射表会加快查询速度吗？你如何使用它们？

> ID：10439075
> 
> 赞同：1
> 
> 时间：2012-05-03T20:45:39.337
> 
> 标签：mysql, sql-optimization

我想知道映射表的用途是什么，以及它如何加速 MySQL 查询。我正在努力加快一个缓慢的 MySQL 查询，我遇到了[这个](https://stackoverflow.com/questions/923438/mysql-subselect-alternative)stackoverflow 问题。评论表明，映射表不仅可以加快连接两个表的查询，而且它们是构建数据库的正确方法。

我有一个非常相似的表结构，具有一对多的关系。随着表的增长，查询执行时间继续攀升到不可接受的水平。由于我无法在网上找到很多东西来帮助解决我的问题，所以我会尝试使用 stackoverflow，因为你们从来没有让我失望过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:56:24.950

您需要回答的第一件事是为什么查询运行如此缓慢。假设您有以下查询

```
SELECT * FROM Customer WHERE CustomerID= 1 
```

它运行缓慢。那么如何确定它运行缓慢的原因呢？键入以下内容：

```
EXPLAIN ALL SELECT * FROM Customer WHERE CustomerID=1 
```

这将返回一个结果集，指示 MySQL 如何获取数据。在这里，您可以找到有关缺失索引等的线索，这有助于优化您的查询。

有关更多答案，请参阅以下链接：

[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

[MySQL表索引优化](https://stackoverflow.com/questions/10137358/mysql-table-index-optimization/10137481#10137481)

即使您使用了映射表并且您的查询和索引不是最佳的，您的性能也会很差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:33:32.880

> 我想知道映射表的目的是什么

映射表用于表示“多对多”关系。例如，在您引用的问题中，有两个实体 - 书籍和学生。一个学生可以借很多书；很多学生可能会借一本书。

在关系模型中表示这一点的标准方法是通过“映射表”，其中包含书籍和学生的外键，以及与贷款相关的任何信息 - 例如开始和结束日期。

映射表确实是建模多对多关系的“正确”方式。

> 以及它如何加速 MySQL 查询

在大多数情况下它不会，尽管它通常比其他表示“多对多”关系的方式表现更好。如果您关心性能，@Namphibian 的答案是以金钱为起点。

# android - 回调处理失败；接口未实现，回调：com.adobe.flashplayer.FlashPaintSurface$7@41bf1b38

> ID：10439076
> 
> 赞同：1
> 
> 时间：2012-05-03T20:45:55.467
> 
> 标签：android, flash, webview, fullscreen, android-4.0-ice-cream-sandwich

我在 WebView 中有一个 Flash 视频，它可以正常工作，直到我想全屏显示它。我确实覆盖了方法

```
public void onShowCustomView (View view, int requestedOrientation, WebChromeClient.CustomViewCallback callback) 
```

[与https://github.com/android/platform_packages_apps_browser/blob/master/src/com/android/browser/BaseUi.java](https://github.com/android/platform_packages_apps_browser/blob/master/src/com/android/browser/BaseUi.java)类似的方式，因为[在尝试进入全屏模式 android 4.0 时 Flash 播放器崩溃时](https://stackoverflow.com/questions/8660866/flash-player-crashes-when-trying-to-enter-fullscreen-mode-android-4-0/9183665#9183665) 建议使用它，但我得到以下异常：

```
05-01 22:58:05.737: E/Handler(32402): Failed to handle callback; interface not implemented, callback:com.adobe.flashplayer.FlashPaintSurface$7@41bf1b38
05-01 22:58:05.737: E/Handler(32402): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
05-01 22:58:05.737: E/Handler(32402):   at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4381)
05-01 22:58:05.737: E/Handler(32402):   at android.view.ViewRootImpl.recomputeViewAttributes(ViewRootImpl.java:2455)
05-01 22:58:05.737: E/Handler(32402):   at android.view.ViewGroup.recomputeViewAttributes(ViewGroup.java:988)
05-01 22:58:05.737: E/Handler(32402):   at android.view.ViewGroup.recomputeViewAttributes(ViewGroup.java:988)
05-01 22:58:05.737: E/Handler(32402):   at android.view.ViewGroup.recomputeViewAttributes(ViewGroup.java:988)
05-01 22:58:05.737: E/Handler(32402):   at android.view.View.setSystemUiVisibility(View.java:13381)
05-01 22:58:05.737: E/Handler(32402):   at com.adobe.flashplayer.FlashPaintSurface$2.surfaceCreated(FlashPaintSurface.java:234)
05-01 22:58:05.737: E/Handler(32402):   at android.view.SurfaceView.updateWindow(SurfaceView.java:543)
05-01 22:58:05.737: E/Handler(32402):   at android.view.SurfaceView.access$000(SurfaceView.java:81)
05-01 22:58:05.737: E/Handler(32402):   at android.view.SurfaceView$4.setFormat(SurfaceView.java:718)
05-01 22:58:05.737: E/Handler(32402):   at com.adobe.flashplayer.FlashPaintSurface$7.run(FlashPaintSurface.java:717)
05-01 22:58:05.737: E/Handler(32402):   at android.os.Handler.handleCallback(Handler.java:607)
05-01 22:58:05.737: E/Handler(32402):   at android.os.Handler.dispatchMessage(Handler.java:92)
05-01 22:58:05.737: E/Handler(32402):   at android.os.Looper.loop(Looper.java:154)
05-01 22:58:05.737: E/Handler(32402):   at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:783)
05-01 22:58:05.737: E/Handler(32402):   at java.lang.Thread.run(Thread.java:864) 
```

如何实现 com.adobe.flashplayer.FlashPaintSurface 的回调？我在这里缺少什么？

注意我在 ICS (Android > 4.0) 上遇到了这个问题，因为在 Android < 4.0 上是另一种方法

```
public void onShowCustomView (View view, WebChromeClient.CustomViewCallback callback) 
```

被调用并且视图有一个 VideoView 的子类型。

我希望有人能帮忙。

问候明道加斯。

# javascript - 获取 JSON 输入并将其存储到数组中（javascript）

> ID：10439083
> 
> 赞同：0
> 
> 时间：2012-05-03T20:46:34.600
> 
> 标签：javascript, arrays, json

我有一个 JSON 输入

```
{
    "Categories": {
        "Facets": [{
            "count": 1,
            "entity": "Company",
            "Company": [{

                "entity": "Ford Motor Co",

                "Ford_Motor_Co": [{
                    "count": 1,
                    "entity": "Ford"
                }]
            }]
        }, {
            "count": 4,
            "entity": "Country",
            "Country": [{

                "entity": "Germany",
                "Germany": [{
                    "count": 1,
                    "entity": "Germany"
                }],
                "currency": "Euro (EUR)"
            }, {

                "entity": "Italy",
                "Italy": [{
                    "count": 1,
                    "entity": "Italy"
                }],
                "currency": "Euro (EUR)"
            }, {

                "entity": "Japan",
                "Japan": [{
                    "count": 1,
                    "entity": "Japan"
                }],
                "currency": "Yen (JPY)"
            }, {

                "entity": "South Korea",
                "South_Korea": [{
                    "count": 1,
                    "entity": "South Korea"
                }],
                "currency": "Won (KRW)"
            }]
        }, {
            "count": 5,
            "entity": "Persons",
            "Persons": [{
                "count": 2,
                "entity": "Dodge"
            }, {
                "count": 1,
                "entity": "Dodge Avenger"
            }, {
                "count": 1,
                "entity": "Major League"
            }, {
                "count": 1,
                "entity": "Sterling Heights"
            }]
        }]

    }
} 
```

我需要将每个级别中实体的值放入数组中。

```
[Company, Ford Motor Co, Ford, ....... , Sterling Heights] 
```

我能够通过代码的第一级

```
for (var k in h.Categories.Facets)
{

alert(h.Categories.Facets[k].entity);

} 
```

我如何通过内层来获取实体的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:00:41.103

最一般的递归答案：

> ```
> function getEntities(any) {
>     var entities = [];
>     if ('entity' in any​) {
>         entities.push(any.entity);
>     }
>     for (var prop in any) {
>         if (any[prop] instanceof Object && any.hasOwnProperty(prop)) {
>             entities.append(getEntities(any[prop]));
>         }
>     }
>     return entities;
> }
> console.log(getEntities(h)); 
> ```

该行：

```
 if (any[prop] instanceof Object && any.hasOwnProperty(prop)) { 
```

防止数字/空值被轰炸，并且 any.hasOwnProperty(prop) 弥补了喜欢附加到对象原型的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T20:49:33.527

您应该对每个实体执行一次 foreach 。如果你知道有多少层，你可以嵌套循环。如果不是 - 可能应该使用递归函数。

**编辑**

递归函数：

```
function getEntities(ent)
{
   alert(ent);
   for (var l in ent)
   {
      getEntities(ent[l].entity);
   }
} 
```

然后使用：

```
for (var k in h.Categories.Facets)
{
   getEntities(h.Categories.Facets[k]);
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T20:49:49.277

一种方法是编写一个接受数组并从中提取方法的递归方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T20:58:56.063

如建议的那样，您可以使用递归函数来遍历每个可能的嵌套组合：

```
var allEntities = [];
function getEntities(obj)
{
   if (obj != null)
   {
       var entityName = obj["entity"];
       alert(entityName);
       if (entityName != null)
       {
           allEntities.push(entityName);
           var adjName = entityName.replace(/ /gi, "_");
           var entities = obj[adjName];
           if (entities != null)
           {
               for (var e in entities)
               {
                   var innerEntities = getEntities(entities[e]);
                   for (var inner in innerEntities)
                       allEntities.push(innerEntities[inner]);
               }
           }
       }
    }
}    

for (var k in h.Categories.Facets)
{
    alert(h.Categories.Facets[k].entity);
    getEntities(h.Categories.Facets[k]);
}
alert(allEntities.length); 
```

# java - JFrame中的OpenGL

> ID：10439090
> 
> 赞同：0
> 
> 时间：2012-05-03T20:46:57.887
> 
> 标签：java, swing, opengl, jframe, awt

我想制作一个应用程序，它将具有以下内容：一个 jframe（或框架，或其他），侧面带有一些 java 样式菜单（Jmenu），在 jframe 的另一侧，一个 OpenGL 画布（仅占一部分） jframe) 并让它们集成在一起。意思是，例如，我想改变一张幻灯片，它会改变opengl的视图。

甚至可以在 Jframe 中嵌入 OpenGL 吗？

另外，推荐一个支持这种东西的opengl库。我玩了一点JOGL，但也看到还有其他开源的，还有LWGL之类的

编辑：添加了一个使用 JOGL 制作的项目的图像，这正是我所追求的。Java GUI 中的 JOGL 画布 ![在此处输入图像描述](../Images/a9c7a102cf2e40b1ad7b44a7fd3012a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:52:33.803

*   为了获得高图形性能，需要专门使用 AWT 组件，

*   我建议不要[将 AWT 与 Swing 混合使用](http://java.sun.com/products/jfc/tsc/articles/mixing/)

*   [也许 JOGL 可能是正确的方式](http://en.wikipedia.org/wiki/Java_OpenGL)，也许不是

# c++ - 为什么我观察到多重继承比单一继承要快？

> ID：10439094
> 
> 赞同：44
> 
> 时间：2012-05-03T20:47:30.493
> 
> 标签：c++, performance, inheritance

我有以下两个文件：-

单.cpp :-

```
#include <iostream>
#include <stdlib.h>

using namespace std;

unsigned long a=0;

class A {
  public:
    virtual int f() __attribute__ ((noinline)) { return a; } 
};

class B : public A {                                                                              
  public:                                                                                                                                                                        
    virtual int f() __attribute__ ((noinline)) { return a; }                                      
    void g() __attribute__ ((noinline)) { return; }                                               
};                                                                                                

int main() {                                                                                      
  cin>>a;                                                                                         
  A* obj;                                                                                         
  if (a>3)                                                                                        
    obj = new B();
  else
    obj = new A();                                                                                

  unsigned long result=0;                                                                         

  for (int i=0; i<65535; i++) {                                                                   
    for (int j=0; j<65535; j++) {                                                                 
      result+=obj->f();                                                                           
    }                                                                                             
  }                                                                                               

  cout<<result<<"\n";                                                                             
} 
```

和

多个.cpp :-

```
#include <iostream>
#include <stdlib.h>

using namespace std;

unsigned long a=0;

class A {
  public:
    virtual int f() __attribute__ ((noinline)) { return a; }
};

class dummy {
  public:
    virtual void g() __attribute__ ((noinline)) { return; }
};

class B : public A, public dummy {
  public:
    virtual int f() __attribute__ ((noinline)) { return a; }
    virtual void g() __attribute__ ((noinline)) { return; }
};

int main() {
  cin>>a;
  A* obj;
  if (a>3)
    obj = new B();
  else
    obj = new A();

  unsigned long result=0;

  for (int i=0; i<65535; i++) {
    for (int j=0; j<65535; j++) {
      result+=obj->f();
    }
  }

  cout<<result<<"\n";
} 
```

我正在使用带有标志 -O2 的 gcc 版本 3.4.6

这是我得到的计时结果：-

多 ：-

```
real    0m8.635s
user    0m8.608s
sys 0m0.003s 
```

单身的 ：-

```
real    0m10.072s
user    0m10.045s
sys 0m0.001s 
```

另一方面，如果在 multiple.cpp 我颠倒了类派生的顺序： -

```
class B : public dummy, public A { 
```

然后我得到以下时间（由于代码需要对 this 指针进行“thunk”调整，这比单继承的时间要慢一些）：-

```
real    0m11.516s
user    0m11.479s
sys 0m0.002s 
```

知道为什么会发生这种情况吗？就循环而言，为所有三种情况生成的程序集似乎没有任何区别。我还有其他地方需要看吗？

此外，我已将进程绑定到特定的 cpu 内核，并使用 SCHED_RR 以实时优先级运行它。

编辑：- 这被 Mysticial 注意到并由我复制。做一个

```
cout << "vtable: " << *(void**)obj << endl; 
```

就在 single.cpp 中的循环导致 single 也像 public A、public dummy 一样以 8.4 秒的速度进入多个时钟之前。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-03T23:21:23.283

**请注意，这个答案是高度推测性的。**

与我对“为什么 X 比 Y 慢”类型的问题的其他一些答案不同，我无法提供确凿的证据来支持这个答案。

* * *

在修补了大约一个小时之后，我认为这是由于三件事的地址对齐：

*   的地址`obj`
*   [虚拟方法表](http://en.wikipedia.org/wiki/Virtual_method_table)的地址`A`
*   函数地址`f()`

（[owagh 的回答](https://stackoverflow.com/a/10484790/922184)也暗示了指令对齐的可能性。）

多重继承比单继承慢的原因不是因为它“神奇地”快，而是因为单继承情况正在运行到编译器或硬件“打嗝”。

* * *

如果您为单继承和多继承情况转储程序集，则它们在嵌套循环中是相同的（寄存器名称和所有内容）。

这是我编译的代码：

```
#include <iostream>
#include <stdlib.h>
#include <time.h>
using namespace std;
unsigned long a=0;

#ifdef SINGLE
class A {
  public:
    virtual int f() { return a; } 
};

class B : public A {
  public:
    virtual int f() { return a; }                                      
    void g() { return; }                                               
};       
#endif

#ifdef MULTIPLE
class A {
  public:
    virtual int f() { return a; }
};

class dummy {
  public:
    virtual void g() { return; }
};

class B : public A, public dummy {
  public:
    virtual int f() { return a; }
    virtual void g() { return; }
};
#endif

int main() {
    cin >> a;
    A* obj;
    if (a > 3)
        obj = new B();
    else
        obj = new A();

    unsigned long result = 0;

    clock_t time0 = clock();

    for (int i=0; i<65535; i++) {
        for (int j=0; j<65535; j++) {
            result += obj->f();
        }
    }      

    clock_t time1 = clock();   
    cout << (double)(time1 - time0) / CLOCKS_PER_SEC << endl;    

    cout << result << "\n";
    system("pause");  //  This is useless in Linux, but I left it here for a reason.
} 
```

嵌套循环的程序集***在单继承和多继承情况下都是相同的：***

```
.L5:
    call    clock
    movl    $65535, %r13d
    movq    %rax, %r14
    xorl    %r12d, %r12d
    .p2align 4,,10
    .p2align 3
.L6:
    movl    $65535, %ebx
    .p2align 4,,10
    .p2align 3
.L7:
    movq    0(%rbp), %rax
    movq    %rbp, %rdi
    call    *(%rax)
    cltq
    addq    %rax, %r12
    subl    $1, %ebx
    jne .L7
    subl    $1, %r13d
    jne .L6
    call    clock 
```

然而，我看到的性能差异是：

*   单曲：**9.4 秒**
*   倍数：**8.06 秒**

至强 X5482、Ubuntu、GCC 4.6.1 x64。

这使我得出结论，差异必须取决于数据。

如果您查看该程序集，您会注意到唯一可能具有可变延迟的指令是负载：

```
 ; %rbp = vtable

movq    0(%rbp), %rax   ; Dereference function pointer from vtable
movq    %rbp, %rdi
call    *(%rax)         ; Call function pointer - f() 
```

随后在调用`f()`.

* * *

恰好在单继承示例中，上述值的偏移量对处理器不利。我不知道为什么。~~但我不得不怀疑一些事情，这将是缓存库冲突，其方式与[此问题图中的区域 2](https://stackoverflow.com/questions/8547778/why-is-one-loop-so-much-slower-than-two-loops)类似。~~

通过重新排列代码和添加虚拟函数，我可以更改这些偏移量——在很多情况下，这将消除这种减速并使单继承与多继承情况一样快。

* * *

例如，删除`system("pause")`反转时间：

```
#ifdef SINGLE
class A {
  public:
    virtual int f() { return a; } 
};

class B : public A {
  public:
    virtual int f() { return a; }                                      
    void g() { return; }                                               
};       
#endif

#ifdef MULTIPLE
class A {
  public:
    virtual int f() { return a; }
};

class dummy {
  public:
    virtual void g() { return; }
};

class B : public A, public dummy {
  public:
    virtual int f() { return a; }
    virtual void g() { return; }
};
#endif

int main() {
    cin >> a;
    A* obj;
    if (a > 3)
        obj = new B();
    else
        obj = new A();

    unsigned long result = 0;

    clock_t time0 = clock();

    for (int i=0; i<65535; i++) {
        for (int j=0; j<65535; j++) {
            result += obj->f();
        }
    }      

    clock_t time1 = clock();   
    cout << (double)(time1 - time0) / CLOCKS_PER_SEC << endl;    

    cout << result << "\n";
//    system("pause");
} 
```

*   单曲：**8.06 秒**
*   倍数：**9.4 秒**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-07T15:30:21.973

我想我至少对为什么会发生这种情况有了进一步的了解。循环的程序集完全相同，但目标文件却不同！

对于首先使用 cout 的循环（即）

```
cout << "vtable: " << *(void**)obj << endl;

for (int i=0; i<65535; i++) {
  for (int j=0; j<65535; j++) {
    result+=obj->f();
  }
} 
```

我在目标文件中得到以下内容：-

```
40092d:       bb fe ff 00 00          mov    $0xfffe,%ebx                                       
400932:       48 8b 45 00             mov    0x0(%rbp),%rax                                     
400936:       48 89 ef                mov    %rbp,%rdi                                          
400939:       ff 10                   callq  *(%rax)                                            
40093b:       48 98                   cltq                                                      
40093d:       49 01 c4                add    %rax,%r12                                          
400940:       ff cb                   dec    %ebx                                               
400942:       79 ee                   jns    400932 <main+0x42>                                 
400944:       41 ff c5                inc    %r13d                                              
400947:       41 81 fd fe ff 00 00    cmp    $0xfffe,%r13d                                      
40094e:       7e dd                   jle    40092d <main+0x3d> 
```

但是，如果没有 cout，循环将变为 :- (.cpp first)

```
for (int i=0; i<65535; i++) {
  for (int j=0; j<65535; j++) {
    result+=obj->f();
  }
} 
```

现在， .obj :-

```
400a54:       bb fe ff 00 00          mov    $0xfffe,%ebx
400a59:       66                      data16                                                    
400a5a:       66                      data16 
400a5b:       66                      data16                                                    
400a5c:       90                      nop                                                       
400a5d:       66                      data16                                                    
400a5e:       66                      data16                                                    
400a5f:       90                      nop                                                       
400a60:       48 8b 45 00             mov    0x0(%rbp),%rax                                     
400a64:       48 89 ef                mov    %rbp,%rdi                                          
400a67:       ff 10                   callq  *(%rax)
400a69:       48 98                   cltq   
400a6b:       49 01 c4                add    %rax,%r12                                          
400a6e:       ff cb                   dec    %ebx                                               
400a70:       79 ee                   jns    400a60 <main+0x70>                                 
400a72:       41 ff c5                inc    %r13d                                              
400a75:       41 81 fd fe ff 00 00    cmp    $0xfffe,%r13d
400a7c:       7e d6                   jle    400a54 <main+0x64> 
```

所以我不得不说这并不是因为 Mysticial 指出的错误别名，而仅仅是由于编译器/链接器发出的这些 NOP。

两种情况下的组装都是：-

```
.L30:
        movl    $65534, %ebx
        .p2align 4,,7                   
.L29:
        movq    (%rbp), %rax            
        movq    %rbp, %rdi
        call    *(%rax)
        cltq    
        addq    %rax, %r12                                                                        
        decl    %ebx
        jns     .L29
        incl    %r13d 
        cmpl    $65534, %r13d
        jle     .L30 
```

现在，.p2align 4,,7 将插入数据/NOP，直到下一条指令的指令计数器具有最后四位 0，最多 7 个 NOP。现在，在没有 cout 的情况下 p2align 之后和填充之前的指令地址将是

```
0x400a59 = 0b101001011001 
```

而且由于它需要 <=7 NOP 来对齐下一条指令，它实际上会在目标文件中这样做。

另一方面，对于 cout 的情况，.p2align 之后的指令落在

```
0x400932 = 0b100100110010 
```

并且需要> 7个 NOP 才能将其填充到可被 16 整除的边界。因此，它不这样做。

因此，花费的额外时间仅仅是由于编译器在使用 -O2 标志编译时填充代码的 NOP（为了更好的缓存对齐），而不是由于错误的别名。

我认为这可以解决问题。我使用[http://sourceware.org/binutils/docs/as/P2align.html](http://sourceware.org/binutils/docs/as/P2align.html) 作为 .p2align 实际作用的参考。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-04T00:22:57.060

这个答案更具推测性。

在对此进行了 5 分钟的修改并阅读了 Mysticials 的答案后，得出的结论是这是一个硬件问题：热循环中生成的代码基本相同，因此编译器没有问题，硬件为唯一的嫌疑人。

一些随意的想法：

*   分支预测
*   分支（=函数）目标地址的对齐或部分别名
*   一直读取同一个地址后，L1 缓存过热
*   宇宙射线

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T20:52:54.083

使用您当前的代码，编译器可以自由地去虚拟化对 的调用`obj->f()`，因为除了 .`obj`之外不能有任何动态类型`class B`。

我建议

```
if (a>3) {
    B* objb = new B();
    objb->a = 5;
    obj = objb;
}
else
    obj = new A(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T20:51:58.027

就目前而言，我的猜测是`class B : public dummy, public A`不利的对齐方式`A`。填充`dummy`到 16 个字节，看看是否有区别。

# r - 强制 install.packages()

> ID：10439095
> 
> 赞同：7
> 
> 时间：2012-05-03T20:47:36.570
> 
> 标签：r, installation, package

是否可以在 R 中强制安装包？

```
> install.packages("gsubfn")
Installing package(s) into ‘/home/sebastian/R/x86_64-unknown-linux-gnu-library/2.14’
(as ‘lib’ is unspecified)
--- Please select a CRAN mirror for use in this session ---
Loading Tcl/Tk interface ... done
Warning message:
In getDependencies(pkgs, dependencies, available, lib) :
  package ‘gsubfn’ is not available (for R version 2.14.2) 
```

在这种情况下，包需要 R >= 2.15 而我只有 R 2.14.2 。想知道我是否可以强制安装。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:27:12.397

从源下载包。解压缩，然后将文件夹移动到库（~/R/2.14/Library）。转到您的 IDE 并执行`library(<package_name>)`

这可能会或可能不会正常工作，您很可能会收到类似的警告消息，说明这一点`package <name> was built under R 2.14`。忽略它。大多数功能应该可以工作。但是请注意，可能有一些函数会发出有趣的输出，或者根本没有，因为它们可能使用了 R 2.14 中没有的一些功能。

但是，您可以更新您的 R 版本。国际海事组织，这是最好的方法。

# jquery - JQuery DataTables：如何显示/隐藏多个表的行详细信息？

> ID：10439096
> 
> 赞同：1
> 
> 时间：2012-05-03T20:47:51.597
> 
> 标签：jquery, datatables

我基本上是在尝试组合 DataTables 文档中给出的两个示例中的代码。第一个示例展示了如何在一个页面上拥有多个 DataTable，而另一个示例允许您显示/隐藏每一行的详细信息。

我已将“dataTable”类应用于每个动态生成的表，因此以下代码将它们全部转换为 DataTables（并禁用第一列的排序，因为这是显示/隐藏图标所在的位置）：

```
var oTable = $('.dataTable').dataTable({
    "aoColumnDefs" : [ {
        "bSortable" : false,
        "aTargets" : [ 0 ]
    } ],
    "aaSorting" : [ [ 1, 'asc' ] ]
}) 
```

然后我添加一个事件侦听器以在用户单击第一列中的图像时显示/隐藏附加的详细信息行：

```
$('.dataTable tbody td img').live('click', function() {
    var nTr = $(this).parents('tr')[0];

    if (oTable.fnIsOpen(nTr)) {
        /* This row is already open - close it */
        this.src = "../examples_support/details_open.png";
        oTable.fnClose(nTr);
    } else {
        /* Open this row */
        this.src = "../examples_support/details_close.png";
        oTable.fnOpen(nTr, fnFormatDetails(), 'details');
    }
}); 
```

问题是这只适用于页面上的第一个 DataTable。当我在任何其他表格上单击一行中的显示/隐藏图标时，图标会发生变化，但不会出现详细信息行。进一步单击同一图标没有任何效果。有谁知道如何在一页上使用多个数据表时显示/隐藏详细信息行？我感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:19:19.520

因为你正在定义

```
var oTable = $('.dataTable').dataTable( \\YOURSTUFF)`; 
```

您的变量`oTable`将所有数据表作为其值。

您唯一需要做的就是获取包含您单击的元素的数据表。您可以通过添加来实现这一点

```
tbl = $(this).parent().parent().dataTable(); 
```

到您的点击功能并将所有`oTable`调用更改为`tbl`.

玩得开心；-)

# c# - 为什么 CancelIo 函数失败？

> ID：10439100
> 
> 赞同：0
> 
> 时间：2012-05-03T20:48:14.747
> 
> 标签：c#, .net, winapi, visual-c++, cancelio

我写了下面的代码。我正在调用此方法以使用三个单独的线程写入三个不同的硬盘。CancelIo 调用之一失败（返回 false）。

我假设磁盘没问题（硬件没问题）。

怎么会这样？

（更换磁盘后，我看到它在另一个磁盘上再次发生。）

```
 public void foo(byte[] bufferToWrite)
  {
      unsafe
      {

            NativeOverlapped overlapped = new NativeOverlapped()
            {
                  EventHandle = eventHandle,
                  OffsetLow   = ( int )( s       & 0xffffffff ),
                  OffsetHigh  = ( int )( s >> 32 & 0xffffffff )
            };

            GCHandle gch = GCHandle.Alloc( bufferToWrite, GCHandleType.Pinned );
            IntPtr ptr = new IntPtr( ( void* )gch.AddrOfPinnedObject() );

            WriteFile( handle, ptr, length, ref bytesWritten, &overlapped );

            dwResult = WaitForSingleObject( EventHandle, 30000 );
            if(dwResult== TIME_OUT)
            {
                   Debug.Assert( CancelIo ( handle ) );

            }
      }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:47:30.173

如果没有未完成的 IO，CancelIo 会失败。您的 IO 可能会在 30001 毫秒后完成，就在事件等待以超时结束之后。

这种竞争条件无法修复。我知道没有比忽略返回值更好的解决方案了。

# python - 在 Python 中读取 bmp 文件

> ID：10439104
> 
> 赞同：18
> 
> 时间：2012-05-03T20:48:39.877
> 
> 标签：python, python-3.x

有没有办法在不涉及使用 PIL 的 Python 中读取 bmp 文件？PIL 不适用于我拥有的版本 3。我尝试使用 graphics.py 中的 Image 对象 Image(anchorPoint, filename)，但这似乎只适用于 gif 文件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-01T19:11:35.803

在 Python 中，它可以简单地理解为：

```
import os
from scipy import misc
path = 'your_file_path'
image= misc.imread(os.path.join(path,'image.bmp'), flatten= 0)

## flatten=0 if image is required as it is 
## flatten=1 to flatten the color layers into a single gray-scale layer 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-20T12:34:06.927

我意识到这是一个老问题，但我在自己解决这个问题时发现了它，我认为这可能会在未来对其他人有所帮助。

实际上，将 BMP 文件作为二进制数据读取非常容易。当然，这取决于您需要支持的支持范围和极端情况。

下面是一个简单的解析器，仅适用于 1920x1080 24 位 BMP（如从 MS Paint 中保存的）。不过应该很容易扩展。它以 python 列表的形式输出像素值，`(255, 0, 0, 255, 0, 0, ...)`例如红色图像。

如果您需要更强大的支持，请参阅有关如何正确读取此问题的标题的信息：[How to read bmp file header in python?](https://stackoverflow.com/questions/47003833/how-to-read-bmp-file-header-in-python) . 使用这些信息，您应该能够使用您需要的任何功能来扩展下面的简单解析器。

如果您需要，还有更多关于 BMP 文件格式的信息，请访问 wikipedia [https://en.wikipedia.org/wiki/BMP_file_format 。](https://en.wikipedia.org/wiki/BMP_file_format)

```
def read_rows(path):
    image_file = open(path, "rb")
    # Blindly skip the BMP header.
    image_file.seek(54)

    # We need to read pixels in as rows to later swap the order
    # since BMP stores pixels starting at the bottom left.
    rows = []
    row = []
    pixel_index = 0

    while True:
        if pixel_index == 1920:
            pixel_index = 0
            rows.insert(0, row)
            if len(row) != 1920 * 3:
                raise Exception("Row length is not 1920*3 but " + str(len(row)) + " / 3.0 = " + str(len(row) / 3.0))
            row = []
        pixel_index += 1

        r_string = image_file.read(1)
        g_string = image_file.read(1)
        b_string = image_file.read(1)

        if len(r_string) == 0:
            # This is expected to happen when we've read everything.
            if len(rows) != 1080:
                print "Warning!!! Read to the end of the file at the correct sub-pixel (red) but we've not read 1080 rows!"
            break

        if len(g_string) == 0:
            print "Warning!!! Got 0 length string for green. Breaking."
            break

        if len(b_string) == 0:
            print "Warning!!! Got 0 length string for blue. Breaking."
            break

        r = ord(r_string)
        g = ord(g_string)
        b = ord(b_string)

        row.append(b)
        row.append(g)
        row.append(r)

    image_file.close()

    return rows

def repack_sub_pixels(rows):
    print "Repacking pixels..."
    sub_pixels = []
    for row in rows:
        for sub_pixel in row:
            sub_pixels.append(sub_pixel)

    diff = len(sub_pixels) - 1920 * 1080 * 3
    print "Packed", len(sub_pixels), "sub-pixels."
    if diff != 0:
        print "Error! Number of sub-pixels packed does not match 1920*1080: (" + str(len(sub_pixels)) + " - 1920 * 1080 * 3 = " + str(diff) +")."

    return sub_pixels

rows = read_rows("my image.bmp")

# This list is raw sub-pixel values. A red image is for example (255, 0, 0, 255, 0, 0, ...).
sub_pixels = repack_sub_pixels(rows) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-27T04:37:04.360

我必须在一个项目上工作，我需要使用 python 读取 BMP 文件，这很有趣，实际上最好的方法是审查 BMP 文件格式（[https://en.wikipedia.org/wiki/ BMP_file_format](https://en.wikipedia.org/wiki/BMP_file_format)）然后将其作为二进制文件读取，以提取数据。

您将需要使用 struct python 库来执行提取

您可以使用本教程查看它是如何进行的[https://youtu.be/0Kwqdkhgbfw](https://youtu.be/0Kwqdkhgbfw)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T21:26:36.270

如果您在 Windows 中执行此操作，该站点应该允许您启动 PIL（和许多其他流行的包）并在大多数版本的 Python 中运行：[用于 Python 扩展包的非官方 Windows 二进制文件](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-04T22:28:54.457

PIL 到 Python 3.x 的通用端口称为“Pillow”。另外，我建议使用 pygame 库来完成简单的任务。它是一个库，充满了创建游戏的功能——从一些常见的图像格式中读取就是其中之一。也适用于 Python 3.x。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T21:14:19.047

这取决于您要实现的目标以及在哪个平台上？

无论如何，使用 C 库加载 BMP 可能会起作用，例如[http://code.google.com/p/libbmp/](http://code.google.com/p/libbmp/)或[http://freeimage.sourceforge.net/](http://freeimage.sourceforge.net/)，并且可以从 python 轻松调用 C 库，例如使用 ctypes 或将其包装为 python 模块。

或者你可以编译这个版本的 PIL [https://github.com/sloonz/pil-py3k](https://github.com/sloonz/pil-py3k)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-20T17:37:25.023

为此使用枕头。安装后只需导入即可

```
from PIL import Image 
```

然后就可以加载BMP文件了

```
img = Image.open('path_to_file\file.bmp') 
```

如果您需要图像是一个 numpy 数组，请使用`np.array`

```
img = np.array(Image.open('path_to_file\file.bmp')) 
```

numpy 数组只会是一维的。如果您的图像是 RGB，请使用`reshape()`将其调整为正确的形状。例如：

```
np.array(Image.open('path_to_file\file.bmp')).reshape(512,512,3) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-20T12:42:43.783

使用优秀的 matplotlib 库

```
import matplotlib.pyplot as plt
im = plt.imread('image.bmp') 
```

# z3 - z3 binary 和 z3 api 之间的不同结果

> ID：10439107
> 
> 赞同：2
> 
> 时间：2012-05-03T20:48:56.960
> 
> 标签：z3

我正在尝试使用来自[http://rise4fun.com/Z3/tutorial/guide](http://rise4fun.com/Z3/tutorial/guide)的量词示例的 Z3 。

这两个示例适用于 Z3 的在线版本（我猜它会是 Z3 4.0）。

```
(set-option :auto-config false) ; disable automatic self configuration
(set-option :mbqi false) ; disable model-based quantifier instantiation
(declare-fun f (Int) Int)
(declare-fun g (Int) Int)
(declare-const a Int)
(declare-const b Int)
(declare-const c Int)
(assert (forall ((x Int))
                (! (= (f (g x)) x)
                   :pattern ((f (g x))))))
(assert (= (g a) c))
(assert (= (g b) c))
(assert (not (= a b)))
(check-sat) 
```

和

```
(set-option :auto-config false) ; disable automatic self configuration
(set-option :mbqi false) ; disable model-based quantifier instantiation
(declare-fun f (Int) Int)
(declare-fun g (Int) Int)
(declare-const a Int)
(declare-const b Int)
(declare-const c Int) 
(assert (forall ((x Int))
            (! (= (f (g x)) x)
               :pattern ((g x)))))
(assert (= (g a) c))
(assert (= (g b) c))
(assert (not (= a b)))
(check-sat) 
```

不同之处在于我们用于“forall”断言的模式。结果应该是“未知”和“不满意”。

我正在使用来自[http://research.microsoft.com/projects/z3/z3-3.2.tar.gz的 Z3 3.2 的 linux 版本](http://research.microsoft.com/projects/z3/z3-3.2.tar.gz)

我通过 z3 binary 尝试了这两个示例

> ./z3 -smt2 ex1.smt
> 
> ./z3 -smt2 ex2.smt

结果是正确的。

但是，当我使用 ocaml api 时，这两个示例都是“未知的”。

我试过了：

```
Z3.parse_smtlib2_file ctx "ex2.smt" [||] [||] [||] [||];; 
```

和

```
let mk_unary_app ctx f x = Z3.mk_app ctx f [|x|];;
let example () = 
  let ctx = Z3.mk_context_x [|("MBQI","false")|] in 
  let int = Z3.mk_int_sort ctx in 
  let f = Z3.mk_func_decl ctx (Z3.mk_string_symbol ctx "f") [|int|] int in
  let g = Z3.mk_func_decl ctx (Z3.mk_string_symbol ctx "g") [|int|] int in
  let a = Z3.mk_const ctx (Z3.mk_string_symbol ctx "a") int in 
  let b = Z3.mk_const ctx (Z3.mk_string_symbol ctx "b") int in 
  let c = Z3.mk_const ctx (Z3.mk_string_symbol ctx "c") int in 
  let sym = Z3.mk_int_symbol ctx 0 in
  let bv = Z3.mk_bound ctx 0 int in
  let pat = Z3.mk_pattern ctx [| Z3.mk_app ctx g [| bv |]  |]  in
  let forall = Z3.mk_forall ctx 0 [| pat |] [|int|] [|sym|] 
    (Z3.mk_not ctx (Z3.mk_eq ctx (Z3.mk_app ctx f [|Z3.mk_app ctx g [|bv|]|]) bv)) in 
  Z3.assert_cnstr ctx forall;
  Z3.assert_cnstr ctx (Z3.mk_eq ctx (mk_unary_app ctx g a) c);
  Z3.assert_cnstr ctx (Z3.mk_eq ctx (mk_unary_app ctx g b) c);
  Z3.assert_cnstr ctx (Z3.mk_not ctx (Z3.mk_eq ctx a b));
  Z3.check ctx ;; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:58:45.300

OCaml 代码中有错字。

> 让 forall = Z3.mk_forall ctx 0 [| 拍 |] [|int|] [|sym|]
> 
> ```
> (Z3.mk_not ctx (Z3.mk_eq ctx (Z3.mk_app ctx f [|Z3.mk_app ctx g [|bv|]|]) bv)) 
> ```

问题是`Z3.mk_not`. SMT 输入中的`!`不是否定的。在 SMT 2.0 中，`!`用于将属性“附加”到公式。在上面的示例中，属性是模式。

# jquery - 自动完成结果中的 jQuery UI 粗体字

> ID：10439109
> 
> 赞同：0
> 
> 时间：2012-05-03T20:49:16.010
> 
> 标签：jquery, user-interface, autocomplete

我已经搜索过这个，但我很难让它与我正在使用的代码一起工作。

我希望我的输入在自动完成结果中是粗体的，有人可以帮忙吗？谢谢

```
jQuery( '#description-input:not(.ui-autocomplete-input)' ).live( 'focus', jQuery.proxy( function( event ){
    jQuery( event.target ).trigger( this.config.events.AUTORESIZE ).autocomplete( {

        source: jQuery.proxy( function( request, response ) {
            jQuery.ajax({
                url: self.config.keyword_search_url,
                dataType: "json",
                data: { name_startsWith: request.q, q : jQuery('#description-input').val(), 
                    level: this.selectedStore.getLevelId() },
                select: function(event, ui) { event.stopPropagation(); },
                success: function( data ) {
                    response( jQuery.map( data, function( item ) {
                        return { value: item };
                    }));
                }
            });
        }, this),

        focus : jQuery.proxy(function(event, ui) {
            jQuery( 'body' ).undelegate( '#description-input', 'blur' );
            jQuery( 'ul.ui-autocomplete' ).one( 'mouseleave', jQuery.proxy(function(event) {
                jQuery( 'body' ).delegate( '#description-input', 'blur', jQuery.proxy(function(event) {
                    self.exitEditItem(event);
                }, this));
            }, this));
        }, this),

        select : jQuery.proxy(function(event, ui) {
            event.ui = ui;
            self.editItemSpecialKeys(event);

            jQuery( 'ul.ui-autocomplete' ).unbind( 'mouseleave' );
            jQuery( 'body' ).delegate( '#description-input', 'blur', jQuery.proxy(function(event) {
                self.exitEditItem(event);
            }, this));
        }, this),

        position : { 
            my: 'center top', 
            at: 'center bottom', 
            offset: '0 -1px',
            collision: 'flip'
        },

        delay: 0,
        minLength: 2,
        disabled: true
    }).autocomplete( 'widget' ).addClass( 'autocomplete-list' ); 
```

我尝试过使用这种方法：

```
function __highlight(s, t) {
    var matcher = new RegExp("("+$.ui.autocomplete.escapeRegex(t)+")", "ig" );
    return s.replace(matcher, "$1");
} 
```

但我没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:24:19.387

```
_renderItem: function( ul, item) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( $( "<a></a>" ).text( item.label ) )
            .appendTo( ul );
    }, 
```

**将此更改为：**

```
_renderItem: function( ul, item) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( $( "<a></a>" ).html( item.label ) )
            .appendTo( ul );
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:17:22.040

```
 $.ajax({
                url: self.config.keyword_search_url,
                dataType: "json",
                data: { name_startsWith: request.q, q: jQuery('#description-input').val(),
                    level: this.selectedStore.getLevelId()
                },
                select: function (event, ui) { event.stopPropagation(); },
                success: function (data) {
                    response(jQuery.map(data, function (item) {
                        return { value: '<b>' + item + '</b>' };
                    }));
                }
            }); 
```

# git - git 拉入特定目录

> ID：10439110
> 
> 赞同：3
> 
> 时间：2012-05-03T20:49:17.960
> 
> 标签：git, repository, clone, push, pull

我的情况如下：

我有一个 git Repo A，其中包含一个文件夹，该文件夹引用了存储在 git Repo B 中的另一个“项目”的材料。该文件夹实际上只是一个符号链接，因此它实际上并不存在。

我想做的只是从 Repo B 'git pull' 到这个文件夹中，然后推回 Repo A，尽可能多地保留历史（以防更改需要以其他方式进行）。

我可以手动上传所有文件，但这会丢失所有历史记录。我也可以只有 2 个单独的 repos 和一个链接，但如果可能的话，我想尝试将项目 B 合并到项目 A 中。

git是否有类似...的东西

```
git remote add projectb GITURLFORB
mkdir projectb
git add projectb && git commit projectb
git push origin master
git pull projectb master --into_folder projectb
git push origin master 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:56:08.127

听起来您想使用`submodules`包含`projectB`. 见[http://book.git-scm.com/5_submodules.html](http://book.git-scm.com/5_submodules.html)

子模块的最大优点是`projectA`即使`projectB`在`projectB`. 这允许`projectB`进化而不用担心破坏`projectA`。如果新的提交`projectB`适用于`projectA`，您可以更新 中的指针`projectA`。

# ios - IOS。如何在 Grand Central Dispatch 的上下文中处理 URL 身份验证质询

> ID：10439116
> 
> 赞同：1
> 
> 时间：2012-05-03T20:49:38.007
> 
> 标签：ios, nsurlconnection, grand-central-dispatch, nsurlconnectiondelegate

我正在大量使用 Grand Central Dispatch。我现在需要向需要身份验证的服务器发出 URL 请求。iOS 方法`NSURLConnection`是异步的，这使我将 GCD 用于异步任务变得复杂。据我了解，它`NSURLConnection`确实支持同步模式，但这需要在请求 URL 中嵌入用户/密码，这是没有意义的，因为我不知道。我在这里有什么选择？

谢谢，
道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:52:25.880

不幸的是，您唯一的选择是使用异步请求。该方法无法处理身份验证挑战`sendSynchronousRequest:returningResponse:error:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T06:31:45.460

实际上，同步请求会在失败之前检查钥匙串是否存在现有凭证。如果存在，它将使用*默认凭据。*因此，例如，在您启动网络连接之前，在您的代码中的某个位置：

```
NSURLProtectionSpace    *protectionSpace    = nil;
NSURLCredential         *credential         = nil;

// Note that you can't wildcard realm, if your server will present a realm you need that here as well.
protectionSpace = [[NSURLProtectionSpace alloc] initWithHost:@"foo.com" port:80 protocol:@"http" realm:nil authenticationMethod:NSURLAuthenticationMethodHTTPBasic];

// This creates the credential
credential = [NSURLCredential credentialWithUser:user password:pass persistence:NSURLCredentialPersistencePermanent];

// This stores it, in the application keychain.
[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential forProtectionSpace:protectionSpace]; 
```

现在它被设置为该保护空间的默认凭据，并且 URL 加载系统将在访问该保护空间时查找并使用该凭据。简单的！这不会做的一件事是基于 SSL 的身份验证 - NSURLAuthenticationMethodClientCertificate 和 NSURLAuthenticationMethodServerTrust。由于各种原因，NSURLConnection 要求您实现一个委托来评估这种情况下服务器和客户端的信任。但是，对于您的基本身份验证问题，您可以使用上面的代码进行设置。

但是要回答有关 GCD 和 NSURLConnection 的更大问题，您可以选择。当然，你可以按照所有博客文章所说的去做，并在异步块中使用同步请求，这可能对你有用（或爆炸）。您也可以使用较新的方法`sendAsynchronousRequest:queue:completionHandler:`。这将为您解决很多问题，因为委托回调将在提供的队列上运行。它确实让事情变得简单多了！

这可能也值得一读：[同步网络不好](https://devforums.apple.com/message/37677) 的五个原因爱斯基摩人值得一听；）

# sql - 从选择中选择计数（*）

> ID：10439122
> 
> 赞同：41
> 
> 时间：2012-05-03T20:50:09.920
> 
> 标签：sql, sql-server, tsql

我正在尝试从以下查询中获取行数。我只得到行数为 1，但有 35 条记录。您能否让我知道如何从内部查询中获取计数？

谢谢

```
SELECT COUNT(*)(SELECT DISTINCT a.my_id, a.last_name, a.first_name, b.temp_val
                FROM Table_A a INNER JOIN Table_B b on a.a_id = b.a_id) 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-03T20:52:02.930

您缺少 FROM 并且需要为子查询提供别名。

```
SELECT COUNT(*) FROM 
(
  SELECT DISTINCT a.my_id, a.last_name, a.first_name, b.temp_val
   FROM dbo.Table_A AS a 
   INNER JOIN dbo.Table_B AS b 
   ON a.a_id = b.a_id
) AS subquery; 
```

# r - 制作三元情节

> ID：10439123
> 
> 赞同：11
> 
> 时间：2012-05-03T20:50:21.080
> 
> 标签：r, ggplot2

我想使用 ggplot2 在它们的单纯形上绘制 3 维数据的投影。我以为我可以使用 来管理笛卡尔坐标上的转换`coord_trans()`，但不知道该怎么做。

这是我尝试过的：

```
simplex.y  <- function( x1, x2, x3 ) {
  return( sqrt(0.75) *  x3 / (x1+x2+x3) )
} 
simplex.x  <- function( x1, x2, x3 ) {
  return( (x2 + 0.5 * x3) / (x1+x2+x3) )
}

x  <- data.frame(
  x1 = c( 0, 0, 1, 0.1, 0.6, 0.2 ),
  x2 = c( 0, 1, 0, 0.3, 0.2, 0.8 ),
  x3 = c( 1, 0, 0, 0.6, 0.2, 0.0 )
)

require(ggplot2)
ggplot( data = x, aes( x = c(x1, x2, x3), y = c(x1, x2, x3)) ) +
  geom_point() +
  coord_trans( x="simplex.x", y="simplex.y" ) 
```

任何建议表示赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-30T01:28:59.717

正如***mmann1123***强调的那样，使用[ggtern](http://ggtern.com)可以实现以下目标：

[![输出](../Images/0ec1e38b91844c1d9d816740b81108d5.png)](https://i.stack.imgur.com/w2eJ9.png)

使用以下简单的代码块：

```
x  <- data.frame(
  x1 = c( 0, 0, 1, 0.1, 0.6, 0.2 ),
  x2 = c( 0, 1, 0, 0.3, 0.2, 0.8 ),
  x3 = c( 1, 0, 0, 0.6, 0.2, 0.0 )
)

ggtern(data=x,aes(x2,x1,x3)) + 
   geom_mask() +
   geom_point(fill="red",shape=21,size=4) + 
   theme_bw() +
   theme_showarrows() +
   theme_clockwise() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T17:01:54.903

vcd 包中的 ternaryplot 函数可以很好地从非归一化数据中制作经典的三元图：

```
require(vcd)
#ternaryplot takes matrices but not data frames
xM <- as.matrix(x)
ternaryplot(xM) 
```

![在此处输入图像描述](../Images/7cd56541b0a770123f279f73d503a985.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-21T16:42:55.113

R 包[Ternary](https://ms609.github.io/Ternary)使用标准图形函数从矩阵和 data.frames 生成三元图。

[![使用 R 包 Ternary 创建的三元图](../Images/6072c0a428b4608bb035be7f4b3cb64d.png)](https://i.stack.imgur.com/HwkxD.png)

上面的情节是通过以下方式创建的：

```
x  <- data.frame(
  x1 = c( 0, 0, 1, 0.1, 0.6, 0.2 ),
  x2 = c( 0, 1, 0, 0.3, 0.2, 0.8 ),
  x3 = c( 1, 0, 0, 0.6, 0.2, 0.0 )
)
TernaryPlot()
TernaryPoints(x, col='red') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-12T20:23:34.483

使用您可以在此处阅读的 ggtern 库。 [http://ggtern.com/](http://ggtern.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T21:50:51.593

`coord_trans`不像你认为的那样做。它将转换已经是 2D 但您有 3D 数据的绘图的 x 和 y 坐标。

只需自己转换数据，然后绘制它：

```
simplex.y  <- function(x) {
  return( sqrt(0.75) *  x[3] / sum(x) )
} 
simplex.x  <- function(x) {
  return( (x[2] + 0.5 * x[3]) / sum(x) )
}

x  <- data.frame(
  x1 = c( 0, 0, 1, 0.1, 0.6, 0.2 ),
  x2 = c( 0, 1, 0, 0.3, 0.2, 0.8 ),
  x3 = c( 1, 0, 0, 0.6, 0.2, 0.0 )
)

newDat <- data.frame(x = apply(x,1,simplex.x),
                y = apply(x,1,simplex.y))

ggplot(newDat,aes(x = x,y = y)) + 
    geom_point() 
```

请注意，我将您的转换函数重写为更像 R。此外，您不应该传递像`x = c(x1,x2,x3)`inside of这样的表达式`aes()`。您将数据框中的单个变量映射到单个美学。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-20T08:49:17.393

为了完整起见，您可以尝试使用旧`ade4`包：

```
x  <- data.frame(
  x1 = c( 0, 0, 1, 0.1, 0.6, 0.2 ),
  x2 = c( 0, 1, 0, 0.3, 0.2, 0.8 ),
  x3 = c( 1, 0, 0, 0.6, 0.2, 0.0 )
)

require(ade4)
triangle.plot(x) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-04T23:50:49.533

包中的函数`triax.plot()`,`plotrix`还绘制三元图：

```
require(plotrix)

x  <- data.frame(
  x1 = c( 0, 0, 1, 0.1, 0.6, 0.2 ),
  x2 = c( 0, 1, 0, 0.3, 0.2, 0.8 ),
  x3 = c( 1, 0, 0, 0.6, 0.2, 0.0 )
)

triax.plot(x, pch=16,col.symbols="red") 
```

# javascript - 在解析为对象之前手动解析 JSON

> ID：10439131
> 
> 赞同：-4
> 
> 时间：2012-05-03T20:50:41.413
> 
> 标签：javascript, json, node.js

我正在创建一个基于 JSON 和 JavaScript 的 DSL，并且我需要让键值指定为“原始”并且不包含在字符串分隔符中。一个简单的例子，希望能解释这一点：

```
{myKey:custom_function('arg1'), myKey2:custom_function("another arg1")} 
```

应该成为

```
{myKey:"custom_function('arg1')", myKey2:"custom_function(\"another arg1\")"} 
```

这是因为在解析 JSON 对象时，custom_function 将不存在。我需要能够在不评估任何值的情况下解析 JSON，然后在迭代键时只一个一个地扩展值。

我可以使用什么正则表达式或其他方法将第一个片段转换为第二个片段？

我假设一个更简单的解决方案将涵盖 90% 的情况，但编写一个防弹实现将需要付出很多努力。根据我对 JavaScript 的正则表达式支持（显然没有后视能力）所做的研究，我假设它需要的不仅仅是 1 或 2 行正则表达式模式。

此外，这是针对节点应用程序的，因此它为此提供的任何技巧也会有所帮助。

编辑：

这个问题似乎得到了一些反对意见，但为了未来的谷歌员工/我自己的参考，我还是把它留了下来。关于哪种方法/技术最适合此类问题，这是一个完全有效的问题，并且很容易有其他 node/js 新手面临类似问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:33:14.257

最终答案：正则表达式不适合像这样复杂的任务。我在网上找到的任何类似复杂的解决方案（例如删除代码注释）都采用了主要是自定义的迭代方法，仅少量使用正则表达式，因此在这种情况下，类似的方法最终不会太轻松。

所以最后我能找到的“最佳”方法并没有涉及太多的正则表达式或节点或其他适合该问题的任何专门库。

最后，为了将来可能遇到类似问题的谷歌用户的利益，我在[https://gist.github.com/2590689](https://gist.github.com/2590689)上发布了我的解决方案并复制如下：

```
//clothe a hub file that has 'naked' expressions
//e.g. turn {key:$('body p')} into {key:"$('body p')"}
function clothe(contents){

closers = /[\}\]\)\/"']/
openers = /[\{\[\(\/"']/
closing = {
    "{": "}",
    "[": "]",
    "(": ")",
    "/": "/",
    '"': '"',
    "'": "'"
}

contents = contents.split("");

var beforeKey = true;
var inKey = false;
var beforeValue = false;
var inValue = false;
var inArray = false;
var delimiterStack = [];

function inDelimited(){
    return delimiterStack.length > 0;
}

function toggleDelimiter(d){
    if(openers.exec(d) && !closers.exec(d)){
        pushDelimiter(d);
    }else if(openers.exec(d) && closers.exec(d)){
        if(topDelimiter()){
            if(topDelimiter()==d){
                popDelimiterIfValid(d);
            }else{
                pushDelimiter(d);
            }
        }else{
            pushDelimiter(d);
        }
    }else if(closers.exec(d)){
        popDelimiterIfValid(d);
    }
}

function topDelimiter(){
    if(delimiterStack.length>=0){
        return delimiterStack[delimiterStack.length-1];
    }else{
        return undefined;
    }
}

function pushDelimiter(d){
    delimiterStack.push(d);
}

function popDelimiterIfValid(d){
    if(delimiterStack.length>0)
        if(closing[delimiterStack[delimiterStack.length-1]]==d)
            delimiterStack.pop(d);
}

function rTrimmedRightBound(rightBound){
    while(rightBound>0){
        if(!/\s/g.exec(contents[--rightBound])){
            return rightBound+1;
        }
    }
}

for(var i=0; i<contents.length; i++){

    function delimiterCheck(c){
        if(c=='"'){
            toggleDelimiter('"');
            contents.splice(i, 0, '\\');
            i++;
        }else if(openers.exec(c) || closers.exec(c)){
            toggleDelimiter(c)
        }
    }

    if(beforeKey){
        if(/[a-zA-Z0-9$_!]/.exec(contents[i])){
            beforeKey = false;
            inKey = true;
        }
    }else if(inKey){
        if(contents[i]==":"){
            inKey = false;
            beforeValue = true;
        }
    }else if(beforeValue){
        if(/[a-zA-Z0-9$_!'"\(\/]/.exec(contents[i])){
            contents.splice(i, 0, '"');
            i++;
            beforeValue = false;
            inValue = true;
            delimiterCheck(contents[i]);
        }else if(/\{/.exec(contents[i])){
            beforeKey = true;
            beforeValue = false;
        }else if(/\[/.exec(contents[i])){
            beforeValue = false;
            inArray = true;
        }
    }else if(inArray && !inValue){
        if(/[a-zA-Z0-9$_!'"\(\/]/.exec(contents[i])){
            contents.splice(i, 0, '"');
            i++;
            beforeValue = false;
            inValue = true;
            delimiterCheck(contents[i]);
        }
    }else if(inValue){
        if(!inDelimited() && /[\},\]]/.exec(contents[i])){
            contents.splice(rTrimmedRightBound(i), 0, '"');
            i++;
            inValue = false;
            if(/\]/.exec(contents[i])){
                inArray = false;
            }
            beforeKey = !inArray;
        }else{
            delimiterCheck(contents[i]);
        }
    }
}

return contents.join("");
} 
```

# web-services - 如何影响响 应 ws-addressing 动作元素？

> ID：10439138
> 
> 赞同：0
> 
> 时间：2012-05-03T20:51:24.403
> 
> 标签：web-services, soap, cxf, ws-addressing

似乎我对 cxf 实现的 web 服务的响应包含一个

```
<Action xmlns="http://www.w3.org/2005/08/addressing">urn://...dummy.../WebserviceResponse</Action> 
```

有没有办法我可以删除骨灰盒，只保留 /WebserviceResponse 或使操作为空？

```
<Action xmlns="http://www.w3.org/2005/08/addressing">/WebserviceResponse</Action> 
```

使用我们的网络服务的系统在操作上失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:03:22.990

通过 CXF 邮件列表获得了答案...所有学分都归功于 Daniel Kulp 提供的答案！

```
<quote> 
```

如果首先使用 java，则需要在方法中添加 @Action 注释，以控制输入和输出（以及故障）使用和预期的操作。

首先，对于 wsdl，您需要将 wsam:Action 属性添加到 portType/operation/input 和 output 元素。（这将导致生成上述注释）

```
</quote> 
```

# google-ads-api - 如何确定您的访客来自哪里，除了推荐人

> ID：10439141
> 
> 赞同：0
> 
> 时间：2012-05-03T20:51:33.263
> 
> 标签：google-ads-api, refer

我只是偶然发现了这个广告词点击：

[http://www.google.com/aclk?sa=L&ai=XXX&sig=XXX&ved=XXX&adurl=http://example.com](http://www.google.com/aclk?sa=L&ai=XXX&sig=XXX&ved=XXX&adurl=http://example.com)

它应该重定向到 example.com。

但是，如果您单击该链接，它会将您重定向到另一个不是[http://example.com](http://example.com)的站点。

我认为 example.com 上有一些可疑之处。

该网站可以判断其访问者来自哪里，并为不同的访问者显示不同的内容。

我以为是引用者，然后我在浏览器中禁用了引用者，但该站点仍然有效。

任何人都知道为什么除了推荐人之外如何确定您的访客来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T00:03:25.583

请记住，在前往 example.com 之前，这些点击会通过 Google“反弹”（即重定向）。

根据具体情况，Google 可以在重定向期间向着陆页 URL 添加其他查询字符串值。这意味着点击实际上不会登陆“http://example.com”，而是类似“http://example.com?gclid=1234567”。

特别是，gclid 值附加到着陆页 URL，作为 Google 在 Google AdWords 和 Google Analytics 之间传递数据的一种方式。

因此 example.com 可能正在寻找 gclid 值以识别来自 AdWords 的流量。这与推荐人无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:02:56.157

推荐人是唯一可以做到这一点的东西，除非“那个网站可以告诉它的访问者来自哪里”你在谈论地理位置......

注意：推荐人并不是世界上最可靠的东西。他们可以被[欺骗](https://en.wikipedia.org/wiki/Referer_spoofing)

# .net - 如何获取 DrawingVisual 区域

> ID：10439146
> 
> 赞同：1
> 
> 时间：2012-05-03T20:51:43.223
> 
> 标签：.net, wpf, drawing

我有一个像这样的[DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual%28v=vs.90%29.aspx)：

```
Rect MyRect = new Rect(new Point(0, 0), new Size(100, 100));
DrawingVisual MyVisual = new DrawingVisual();

using (DrawingContext context = MyVisual.RenderOpen()) {
context.DrawRectangle(Brushes.Black, new Pen(), MyRect);
context.PushTransform(new TranslateTransform(50, 50));
context.PushTransform(new ScaleTransform(2, 2));
} 
```

我想获得描述元素区域的[几何](http://msdn.microsoft.com/en-us/library/system.windows.media.geometry.aspx)，在这种情况下是[RectangleGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.rectanglegeometry%28v=vs.90%29.aspx)，其中 Rect 属性是：

```
Rect(new Point(50, 50), new Size(200, 200)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:09:18.060

如果您在绘制 Rect 之前推送转换，您可以通过[ContentBounds](http://msdn.microsoft.com/en-us/library/system.windows.media.containervisual.contentbounds.aspx)属性获得正确的边界：

```
Rect rect = new Rect(new Size(100, 100));

using (DrawingContext dc = visual.RenderOpen())
{
    dc.PushTransform(new TranslateTransform(50, 50));
    dc.PushTransform(new ScaleTransform(2, 2));
    dc.DrawRectangle(Brushes.Black, null, rect);
}

System.Diagnostics.Trace.TraceInformation("Bounds = {0}", visual.ContentBounds); 
```

从[PushTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.pushtransform.aspx)的备注部分：

> 变换适用于所有后续绘图命令，直到它被 Pop 命令删除。

# ruby-on-rails-3 - 无法删除 RVM 中的捆绑程序

> ID：10439152
> 
> 赞同：4
> 
> 时间：2012-05-03T20:52:08.217
> 
> 标签：ruby-on-rails-3, bundler, ruby-1.9.2

我在 RVM 中安装了 1.9.2 Ruby。当我做一个宝石列表时，我得到了这个：

```
bundler (1.1.3) 
```

当我尝试删除它时，我得到：

```
gem uninstall bundler
INFO:  gem "bundler" is not installed 
```

当我尝试为我的应用程序运行 bundle install 时，我得到：

```
 Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    rails (= 3.0.1) ruby depends on
      bundler (~> 1.0.0) ruby

  Current Bundler version:
    bundler (1.1.3)

This Gemfile requires a different version of Bundler.
Perhaps you need to update Bundler by running `gem install bundler`? 
```

我曾尝试卸载 1.9.2，但没有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T19:24:37.093

在另一个 Stack 线程中找到了答案，但在没有注意到链接的情况下关闭了它。问题是 rvm 不允许您从自定义 gemset 中卸载仍然是默认“全局”gemset 一部分的 gem。然后从`rvm gemset use global`全局卸载 1.1.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T08:53:30.133

运行“sudo gem uninstall”对我有用。当不作为 sudo 运行时，'gem uninstall' 似乎有时会“撒谎”。

# jquery - jquery 文件上传器路径名文件夹

> ID：10439155
> 
> 赞同：1
> 
> 时间：2012-05-03T20:52:18.333
> 
> 标签：jquery, image, upload, pathname

有人告诉我 jQuery 文件上传器是我可以使用的最好的文件上传插件，但我一生都无法弄清楚如何告诉它将文件存储到特定文件夹。我希望根据文件所在页面的内容更改文件的路径名。我假设这就像向 ajax 查询传递一些参数一样简单，但我在文档中的任何地方都找不到。我的意思是，它必须存在，对吧？

如果 jQuery File Uploader (!?) 不存在此功能，是否有一个文件上传插件可以跨浏览器兼容、正常工作并支持此功能？老实说，jQuery File Uploader 带有很多我不一定需要的花里胡哨，所以我愿意接受更简单的建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T20:56:00.917

我特别使用[http://www.plupload.com/](http://www.plupload.com/)插件，它工作得非常好，甚至在 IE 中也兼容多个文件上传，最后但并非最不重要的是各种后备。

我的第二个选择是去尝试使用[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)这也是一个很好的选择，因为我们对 JQuery 有很好的支持。

# c# - 我可以以某种方式将在用户界面中输入的值输入到我的自定义操作安装程序类代码中吗？

> ID：10439161
> 
> 赞同：2
> 
> 时间：2012-05-03T20:52:41.900
> 
> 标签：c#, visual-studio-2010, windows-installer, custom-action

这看起来应该很简单。我有一个 Windows 安装程序项目。在 UI 中，我添加了一个带有 2 个单选按钮的对话框。安装程序对“安装”有一个自定义操作，它使用我的一个项目的主要输出中的安装类。是否可以从安装程序类的方法中获取所选单选按钮的值`Install`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:20:37.180

要获取/设置属性，您需要一个 MSI 句柄，据我所知，您无法从 .NET Installer 类自定义操作中获取该句柄。

您可以做的是配置自定义操作以接受新参数，并在配置自定义操作时将您的属性值分配给这些参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-03T21:32:36.077

如果这是一个 Visual Studio 安装程序项目，并且看起来是，添加的 RadioButtons 对话框的属性窗口会告诉您属性名称是 BUTTON2，所以这就是您使用标准 /mybutton=[BUTTON2 传递给自定义操作安装程序类的内容] 类型的语法，因此您可以使用安装程序类中 Context.Parameters 集合中的键 mybutton 获取值。

此处描述了对话框行为：

[https://msdn.microsoft.com/en-us/library/vstudio/9x23561f(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/vstudio/9x23561f(v=vs.100).aspx)

and you'd end up with a value of 1 or 2 in your code, depending on which was selected. With installer classes Visual Studio provides that infrastructure around the call, including CustomActionData handling

Like this:

[https://social.msdn.microsoft.com/Forums/vstudio/en-US/279e0aea-077c-4150-89ae-55d8494def1b/installer-class-passing-parameters](https://social.msdn.microsoft.com/Forums/vstudio/en-US/279e0aea-077c-4150-89ae-55d8494def1b/installer-class-passing-parameters)

[http://blog.billsdon.com/2011/05/passing-parameters-collected-dialog-custom-action-msi-c/](http://blog.billsdon.com/2011/05/passing-parameters-collected-dialog-custom-action-msi-c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T20:27:27.450

如果您使用[WiX 部署工具基础 (DTF)](http://robmensching.com/blog/posts/2008/5/16/deployment-tools-foundation-joins-the-wix-toolset/)来开发您的自定义操作，您可以访问以下属性：

*   通过立即执行`session[property name]`（诚然，我对这种方法不太熟悉，因此您可能需要进行一些实验）有关更多详细信息，请参阅[此 stackoverflow 问题](https://stackoverflow.com/q/4678451/173225)
*   通过延迟执行`CustomActionData`
    *   您可以在安装程序的其他位置填充`CustomActionData`属性值，并将其读取为`session.CustomActionData[property name]`

CustomActionData 的一个技巧是您的属性名称必须与您的自定义操作的名称匹配，并且您将值作为分号分隔的名称=值对列表提供，例如`Name1=value1;Name2=value2`等。

您还需要运行程序集`MakeSfxCA.exe`以使安装程序可以使用您的操作。您可以在 Visual Studio 中将其作为构建后事件执行。

基于 DTF 的 .Net 自定义操作可用于 WiX 或 InstallShield 安装程序（可能是任何生成 MSI 安装程序的工具）。

# bash - 如何使用 bash 列出文件夹中显示名称、时间和行数的文件？

> ID：10439163
> 
> 赞同：0
> 
> 时间：2012-05-03T20:52:48.483
> 
> 标签：bash, ls, wc

如何合并`ls`以`wc -l`获取文件名、修改时间和文件中的行数？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T22:19:56.297

您可以通过多种方式从 shell 或您选择的编程语言中处理此问题，但实际上没有“正确”的方法可以做到这一点，因为您需要统计和读取每个文件以形成您的自定义输出。通过使用命令替换，您可以在基本 for 循环中不使用管道来执行此操作：

```
custom_ls () {
    for file in "$@"; do
        echo "$file, $(date -r "$file" '+%T'), $(wc -l < "$file")"
    done
} 
```

这将生成如下输出：

```
$ custom_ls .git*
.gitconfig, 14:02:56, 44
.gitignore, 17:07:13, 21 
```

当然还有其他方法可以做到这一点，但命令替换允许格式字符串的意图保持简短明了，无需复杂的管道或临时变量。

# javascript - 下拉onchange函数到html

> ID：10439168
> 
> 赞同：6
> 
> 时间：2012-05-03T20:52:59.563
> 
> 标签：javascript, html

我想在html中使用Dropdown onchange函数来传递值，它在提交按钮中工作正常，但是我想使用Dropdown onchange，请帮忙怎么做？

```
<form method="post" action=" ">
    <div align="center">
        <select name="value">
            <option value="">Show Value</option><br />
            <option value="2"> 2  </option><br />
            <option value="5"> 5  </option><br />
            <option value="10"> 10 </option><br />
            <option value="20"> 20 </option><br />
        </select>
        <input type="submit" name="submit" value="Submit">
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T20:57:34.343

你应该像这样添加`onChange`到`<select>`元素中

```
<form method="post" action=" ">
    <div align="center">
        <select name="value" onChange="this.form.submit()">
            <option value="">Show Value</option><br />
            <option value="2"> 2  </option><br />
            <option value="5"> 5  </option><br />
            <option value="10"> 10 </option><br />
            <option value="20"> 20 </option><br />
        </select>
        <input type="submit" name="submit" value="Submit">
    </div>
</form> 
```

# jsp - 以前缀“c”导入的标签库中未定义标签“选择”

> ID：10439169
> 
> 赞同：0
> 
> 时间：2012-05-03T20:53:00.920
> 
> 标签：jsp, jstl

我是第一次使用 java 服务器页面，但标签有问题。如果相关的话，我也在 E​​clipse 中工作。

我得到的具体错误是：

```
org.apache.jasper.JasperException: /Query.jsp (line: 5, column: 0) No tag "choose" defined in tag library imported with prefix "c" 
```

问题是，有*一个*带有前缀 c 的标签“选择”...

我在使用通常推荐的 url 时遇到了问题，其中一些似乎已经过时，所以我下载了标准标签并将它们提取到我的 WEB-INF/tags 目录中。

我的 jsp 文件开头为：

```
<%@ page contentType="text/html" import="beans.*" %>
<%@ taglib prefix="c" tagdir="/WEB-INF/tags/c.tld" %>
<%@ taglib prefix="sql" tagdir="/WEB-INF/tags/sql.tld" %>
<%@ taglib prefix="fn" tagdir="/WEB-INF/tags/fn.tld" %>    
<c:choose>
.... 
```

c.tld 有：

```
...
<tag>
    <description>
        Simple conditional tag that establishes a context for
        mutually exclusive conditional operations, marked by
        &lt;when&gt; and &lt;otherwise&gt;
    </description>
    <name>choose</name>
    <tag-class>org.apache.taglibs.standard.tag.common.core.ChooseTag</tag-class>
    <body-content>JSP</body-content>
</tag> 
```

我猜测某处存在某种配置错误，但我完全不知道它可能在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:56:05.630

您的 taglib 声明是错误的。替换这个：

```
<%@ taglib prefix="c" tagdir="/WEB-INF/tags/c.tld" %> 
```

有了这个：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%> 
```

并确保它*不是*（正如一些古老的教程所说）：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%> 
```

...并重复其他库。您不需要自己的`.tld`文件副本，不再需要它们。

> 我在使用通常推荐的网址时遇到问题，其中一些似乎已经过时

我不确定你是从哪里得到的，但几乎所有 JSP/servlet 引擎都可以使用我提到的 URI。如果这些 URI*不起作用*，请发布一个新问题。下载自己的`tld`文件几乎肯定不是正确的方法。

# php - HTML PHP 表单处理；多变的

> ID：10439186
> 
> 赞同：4
> 
> 时间：2012-05-03T20:54:46.320
> 
> 标签：php

我是一个新手，正在学习并试图了解 html 表单和 php 处理的工作原理。

遇到了这对例子：

HTML表格：

```
<html>
<body>

  <form action="hello-web.php" method="GET">
  <label>Name:</label>
  <input type="text" name="yourName" size="24">
  <input type="submit">
  </form>

</body>
</html> 
```

PHP 处理器：

```
<?php
$fname = $_GET["yourName"];

echo "Hello $fname!";
?> 
```

输出应该是：您好，输入/示例名称！

问题：当我尝试将变量**“yourName”**（在 HTML 和 PHP 文件上）更改为例如**“typeName”**时，表单上输入的名称不显示。

换句话说，输出变成了： Hello ！

“yourName”是标准的 php 或 html 变量吗？不能改成你想要的样子吗？

更好的是，表单究竟是如何处理数据的？

* * *

这是我更改后的代码，它不会输出输入的名称（我在此处发布作为答案，因为当我将所有代码粘贴为您的答案的评论时，所有代码都显示为一条连续的线，就像一个段落：

HTML FORM（更改的--typeName）：

```
<html>
<body>

  <form action="hello-web.php" method="GET">
  <label>Name:</label>
  <input type="text" name="typeName" size="24">
  <input type="submit">
  </form>

</body>
</html> 
```

PHP PRCESSOR（已更改--typeName）：

```
<html>
<body>
<?php
$fname = $_GET["typeName"];

echo "Hello $fname!";
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:59:38.267

通过输出整个数组，您可以从提交的表单中查看哪些数据可供您使用。由于您的表单方法是`GET`，以下将显示所有已提交的内容：

```
var_dump( $_GET ); 
```

从这里，您可以看到 PHP 脚本中的变量名应该是什么。

```
Array
(
  [YourName] => Jonathan
) 
```

每当您遇到正在提交的内容与您期望的内容之间的脱节时，请检查`$_GET`（或者如果您的方法是`POST`，您会检查`$_POST`）。

例如，如果我正在尝试以下操作：

```
echo $_GET["yourName"]; // nothing output to the screen 
```

我可以参考上面打印的数组内容，看到正确的键是“YourName”：

```
echo $_GET["YourName"]; // Jonathan 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:57:54.187

`$_GET["yourName"];`包含基于表单字段输入的值。这是一个 php 超全局[http://us3.php.net/manual/en/reserved.variables.get.php](http://us3.php.net/manual/en/reserved.variables.get.php)

听起来您正在更改 html 表单，但您没有通过表单输入值。因此，`$_GET["yourName"];`为空

# html - div 出现在后台

> ID：10439190
> 
> 赞同：0
> 
> 时间：2012-05-03T20:54:58.267
> 
> 标签：html, css, wordpress

试图得到这个： [http ://webdev.edulence.com/getchell/products-services/commercial-insurance/](http://webdev.edulence.com/getchell/products-services/commercial-insurance/)

看起来像这样： http: [//getchellcompanies.com/products/commercial.html](http://getchellcompanies.com/products/commercial.html)

出于某种原因，尽管阴影出现在 HTML 中的包装器之后，但底部的阴影 div 显示在包装器后面，背景为白色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:59:54.307

在页脚中添加了以下内容。

```
#footer{  margin-top: 60px;} 
```

并使用以下样式作为阴影。

```
#shadow{
        background-image: url("images/dropShadow.png");
        height: 103px;
        position: absolute;width: 1121px;
        z-index: 1;
        clear: both;background-position: -15px 5px;
        background-color: transparent;
        background-repeat: no-repeat;margin-left: -40px;
        margin-top: -35px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:58:23.423

`#shadow`您的 CSS 与工作页面不同。

```
#shadow {
    margin: -50px 0pt 0pt -65px;
    top: 44px;
} 
```

# objective-c - 从Objective-C中的字符串中提取字符串

> ID：10439197
> 
> 赞同：0
> 
> 时间：2012-05-03T20:55:28.613
> 
> 标签：objective-c, ios, gdata

我正在尝试为 YouTube API 提取 GData 提供的字符串的一部分。我可以分离出视频标题和缩略图字符串，但需要创建一个文本描述标签。我已经复制了下面的完整字符串，但我遇到的困难是从中提取以下部分。

我被困在如何通过`type:plain content`复制后面的文本然后在`}`分隔符上结束新字符串来创建新的 NSString 。

> {type:plain content: 整整一周我几乎每天都制作一个视频，现在我感觉不像以前那么紧张了。结束！
> 
> 汉克（和他的兄弟约翰）：http: [//youtube.com/vlogbrothers](http://youtube.com/vlogbrothers) }

我曾尝试使用扫描仪但没有成功，我们将不胜感激有关此问题的任何建议或指示。

完整字符串的完整格式如下。

```
GDataEntryYouTubeVideo 0xc125e20: {v:2.1 title:Crisis Averted contentSrc:https://www.youtube.com/v/RKQWfVzUBt8?version=3&f=user_uploads&app=youtube_gdata etag:W/"DUEGR347eCp7I2A9WhVVEEo." authors:1 categories:12 links:alternate,video.responses,video.related,mobile,self id:tag:youtube.com,2008:video:RKQWfVzUBt8 rating:+19935/-228 comment:GDataComment 0xc12c260: {feedLink:GDataFeedLink 0xc12c9c0: {href:https://gdata.youtube.com/feeds/api/videos/RKQWfVzUBt8/comments rel:http://gdata.youtube.com/schemas/2007#comments countHint:7096 href:https://gdata.youtube.com/feeds/api/videos/RKQWfVzUBt8/comments countHint:7096 rel:http://gdata.youtube.com/schemas/2007#comments}} stats:GDataYouTubeStatistics 0xc12d640: {viewCount:810340 favoriteCount:1096} mediaGroup:GDataYouTubeMediaGroup 0xc12e700: {categories:(
    "GDataMediaCategory 0xc131ab0: {label:People & Blogs scheme:http://gdata.youtube.com/schemas/2007/categories.cat content:People}" ) contents:(
    "GDataMediaContent 0xc130750: {url:https://www.youtube.com/v/RKQWfVzUBt8?version=3&f=user_uploads&app=youtube_gdata type:application/x-shockwave-flash medium:video isDefault:true expression:full duration:201}",
    "GDataMediaContent 0xc130f80: {url:rtsp://v5.cache2.c.youtube.com/CigLENy73wIaHwnfBtRcfRakRBMYDSANFEgGUgx1c2VyX3VwbG9hZHMM/0/0/0/video.3gp type:video/3gpp medium:video expression:full duration:201}",
    "GDataMediaContent 0xc131530: {url:rtsp://v2.cache2.c.youtube.com/CigLENy73wIaHwnfBtRcfRakRBMYESARFEgGUgx1c2VyX3VwbG9hZHMM/0/0/0/video.3gp type:video/3gpp medium:video expression:full duration:201}" ) credits:(
    "GDataMediaCredit 0xc131ff0: {role:uploader scheme:urn:youtube content:charlieissocoollike unparsedAttr:yt:display}" ) thumbnails:(
    "GDataMediaThumbnail 0xc132c10: {url:http://i.ytimg.com/vi/RKQWfVzUBt8/default.jpg height:90 width:120 time:00:01:40.500}",
    "GDataMediaThumbnail 0xc1336e0: {url:http://i.ytimg.com/vi/RKQWfVzUBt8/mqdefault.jpg height:180 width:320}",
    "GDataMediaThumbnail 0xc133bb0: {url:http://i.ytimg.com/vi/RKQWfVzUBt8/hqdefault.jpg height:360 width:480}",
    "GDataMediaThumbnail 0xc133f40: {url:http://i.ytimg.com/vi/RKQWfVzUBt8/1.jpg height:90 width:120 time:00:00:50.250}",
    "GDataMediaThumbnail 0xc134320: {url:http://i.ytimg.com/vi/RKQWfVzUBt8/2.jpg height:90 width:120 time:00:01:40.500}",
    "GDataMediaThumbnail 0xc134630: {url:http://i.ytimg.com/vi/RKQWfVzUBt8/3.jpg height:90 width:120 time:00:02:30.750}" ) keywords:GDataMediaKeywords 0xc134b70: {content:Charlie McDonnell, charlieissocoollike, YouTube, Mid-Life, Crisis, Week, Averted, Hank Green, vlogbrothers, America keywords:Charlie McDonnell, charlieissocoollike, YouTube, Mid-Life, Crisis, Week, Averted, Hank Green, vlogbrothers, America} description:GDataMediaDescription 0xc132880: {type:plain content:I made a video pretty much every day for a whole week, and now I'm not feeling quite as stressed out as I was previously. The end!

Hank (and his brother John): http://youtube.com/vlogbrothers} players:(
    "GDataMediaPlayer 0xc130960: {url:https://www.youtube.com/watch?v=RKQWfVzUBt8&feature=youtube_gdata_player}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:59:08.797

您的字符串可能看起来像 JSON，但它不是有效的 JSON。完成您所要求的一种方法是使用正则表达式 (iOS4+)。您可以尝试这样的事情（假设这`myString`是`NSString`您提供的文本......）：

```
NSError *error;
NSRegularExpression *regex = [NSRegularExpression 
                              regularExpressionWithPattern:@"\\{type:plain.+\\}(?=\\s)"
                              options:NSRegularExpressionDotMatchesLineSeparators
                              error:&error];

NSRange range   = [regex rangeOfFirstMatchInString:myString
                                           options:0 
                                             range:NSMakeRange(0, [myString length])];
NSString *result = [myString substringWithRange:range]; 
```

`result`现在是：

```
{type:plain content:I made a video pretty much every day for a whole week, and now I'm not feeling quite as stressed out as I was previously. The end!

Hank (and his brother John): http://youtube.com/vlogbrothers} 
```

我并不是说这是**最好**的方法，我同意如果你有一个有效的 JSON 字符串，反序列化（正如 Kendall 建议的）将是最佳的。但至少可以完成这项工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:57:41.683

这看起来像 JSON，如果您只针对 iOS5，您可以使用内置的 JSON 转换器将该 JSON 转换为 NSDictionary，您可以在其中轻松找到所需的数据。

# ruby-on-rails-3 - 找不到 memory_store 的缓存存储适配器

> ID：10439198
> 
> 赞同：1
> 
> 时间：2012-05-03T20:55:33.450
> 
> 标签：ruby-on-rails-3

出于某种原因，任何时候我都在使用 Ruby 1.8.7 运行 Rails 3.0.3 应用程序。它运行良好，我没有在任何地方设置任何`cache_store`设置。现在每当我尝试运行`rake`任务或`rails`命令时，我都会得到：

```
$:rails console production
/home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/cache.rb:65:in `lookup_store': Could not find cache store adapter for memory_store (no such file to load -- active_support/cache/memory_store) (RuntimeError)
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application/bootstrap.rb:48
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/core_ext/kernel/reporting.rb:22:in `with_warnings'
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application/bootstrap.rb:48
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb:25:in `instance_exec'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb:25:in `run'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb:50:in `run_initializers'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb:49:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/initializable.rb:49:in `run_initializers'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application.rb:134:in `initialize!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application.rb:77:in `send'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application.rb:77:in `method_missing'
    from /home/marc_m3pt0/m3pt0.com/config/environment.rb:5
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:239:in `require'
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:239:in `require'
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:596:in `new_constants_in'
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /home/marc_m3pt0/.gems/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:239:in `require'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/application.rb:103:in `require_environment!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.0.3/lib/rails/commands.rb:22
    from script/rails:6:in `require'
    from script/rails:6 
```

关于我可能遗漏的任何想法？

非常感谢。我的客户网站现在已关闭，因此我们将不胜感激。

**更新**

当我运行 rake 任务时，我得到了这个：

```
Could not find cache store adapter for memory_store (no such file to load -- active_support/cache/memory_store) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:14:34.017

我最近在共享主机将应用程序移动到新服务器时看到了这个错误。我最终吹走了应用程序的捆绑包并重新安装它，它似乎工作。

我使用 Capistrano 进行部署，所以如果你使用其他东西，YMMV。如果您的应用程序根是这样的：

```
/home/jeff/myapp/ 
```

具有以下子目录：

```
/home/jeff/myapp/current
/home/jeff/myapp/releases
/home/jeff/myapp/shared 
```

宝石包在这里：

```
/home/jeff/myapp/shared/bundle 
```

然后我做了：

```
rm -rf /home/jeff/myapp/shared/bundle 
```

然后

```
cd /home/jeff/myapp
bundle install 
```

一旦我这样做了，它似乎对我有用。

# tfs - 通过 API 获取特定迭代的 TFS 测试计划

> ID：10439201
> 
> 赞同：1
> 
> 时间：2012-05-03T20:56:02.523
> 
> 标签：tfs, microsoft-test-manager

我认为这是一个相当容易回答的问题，但是我将如何继续查询我的 ITestManagementTeamProject 实例以查找分配了特定迭代（和/或区域路径）的所有 .TestPlans？ITestManagementTeamProject 有一个 .TestPlans.Query(..) 方法，但我想知道用于查询特定迭代/区域路径值的实际正确查询语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:43:37.717

这应该有效：

`.TestPlans.Query("Select * From TestPlan Where Iteration = 'TeamProject Name\Iteration Name'")`

迭代名称在工作项“分类”>“迭代”中显示为
*“团队项目名称\迭代名称”*

# c++ - 在并行区域内使用“抛出异常”可以吗？

> ID：10439205
> 
> 赞同：3
> 
> 时间：2012-05-03T20:56:22.190
> 
> 标签：c++, openmp

在并行区域内使用“抛出异常”可以吗？

当一个线程抛出异常时，其余线程会发生什么？

代码：

```
#pragma omp parallel for
for(int i = 0; i < n; i++)
{
     if(arr[i] < 0)
       throw BadParameter("bad array value");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T20:59:38.977

在并行区域内执行的 throw 必须导致在同一并行区域内恢复执行，并且必须由引发异常的同一线程捕获。

否则它将传播到未处理的异常中。

# html - 在 Django 页面上提交表单而不更改 url

> ID：10439208
> 
> 赞同：2
> 
> 时间：2012-05-03T20:56:42.667
> 
> 标签：html, django, forms

我在基于 django 的网站中有一个文本区域，显示数据库字段的内容。我希望能够编辑此字段并将其提交给更新数据库中字段的函数。

我知道如何调用 views.py 中的函数，然后使用 render_to_response 将查询结果发送回新网页。

总而言之，我如何使用 html 表单在 django/python 脚本中处理函数而不需要引用另一个 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:06:07.323

通常建议使用[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式，例如：

```
def myview(request, **kwargs):

    if request.POST:
        # validate the post data

        if valid:
            # save and redirect to another url
            return HttpResponseRedirect(...)
        else:
            # render the view with partial data/error message

    if request.GET:
        # render the view

        return render_to_response(...) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T21:12:51.783

使用 AJAX：

1）创建一个视图来处理表单提交：

```
def my_ajax_form_submission_view(request):
    if request.method == 'POST':
        form = MyForm(request.POST)
        if form.is_valid():
           # save data or whatever other action you want to take
           resp = {'success': True}
        else:
           resp = {'success': False}

        return HttpResponse(simplejson.dumps(resp), mimetype='application/json')

    else:
        return HttpResponseBadRequest() 
```

然后，将视图绑定到您的 urlpatterns

2) 通过 AJAX 提交表单（使用 jQuery）：

```
$('#my-form-id').submit(function(){
    var $form = $(this);
    $.post('/url/to/ajax/view/', $form.serialize(), function(data, jqXHR){
        if (data.success) {
            alert('Form submitted!');
        } else {
            alert('Form not valid');
        }
    });
    return false;
}); 
```

That's the basics. You can and should provide more detailed return responses, error handling, form validation/checking, etc.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T01:39:18.467

This is the standard views code pattern that I've been using.

```
def payment_details(request, obj_id):
    yourobj = get_object_or_404(Obj, pk=obj_id)
    form = TheForm(instance=yourobj)

    if request.method == 'POST':
        form = TheForm(request.POST, instance=yourobj)
        if form.is_valid():
            yourobj = form.save()
            messages.success(request, 'Yourobj is saved!')
            url = reverse('SOMEURL')
            return redirect(url)

    template = 'SOMETEMPLATE'
    template_vars = {'TEMPLATEVARS': TEMPLATEVARS}
    return render(request, template, template_vars) 
```

Having watched the [Advanced Forms talk](http://blip.tv/djangocon/advanced-django-form-usage-5573287) at DjangoCon, one could re-write the above view like this:

```
def payment_details(request, obj_id):
    yourobj = get_object_or_404(Obj, pk=obj_id)
    form = TheForm(request.POST or NONE, instance=yourobj)

    if request.method == 'POST' and form.is_valid():
        yourobj = form.save()
        messages.success(request, 'Yourobj is saved!')
        url = reverse('SOMEURL')
        return redirect(url)

    template = 'SOMETEMPLATE'
    template_vars = {'TEMPLATEVARS': TEMPLATEVARS}
    return render(request, template, template_vars) 
```

# php - Symfony 表单，错误冒泡

> ID：10439209
> 
> 赞同：3
> 
> 时间：2012-05-03T20:56:42.643
> 
> 标签：php, symfony

我对表单的错误冒泡有疑问。我的表单中的一个字段定义如下：

```
$formBuilder->add('title','text',
   'required'  => true, 
   'error_bubbling' => false,
   )
) 
```

我想在这个字段中添加一个这样的验证器：

```
/**
  * @Assert\True(message = "Bad title.")
  */
public function getTitleCorrect()
{
    /* ... */     
    return false;
} 
```

它工作正常，但错误消息显示在表单顶部，而不是在字段行中。

在 Twig 模板中，此错误消息被呈现`{{form_errors(form)}}`为全局错误。当我使用`{{form_errors(form.title)}}`时，它不会打印我的错误。

我可以做些什么来更改错误的分配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:55:00.333

仅当验证器附加到相应的属性时，消息才会附加到字段。您的验证器附加到该类的方法，因此错误确实是全局的。

你应该这样做：

```
use ...\TitleValidator as AssertTitleValid;

class MyEntity
{
    /**
     * @AssertTitleValid
     */
    private $title;
} 
```

并创建您自己的 TitleValidator 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-18T08:39:08.597

'error_bubbling' 是`false`默认的，除非它被设置为`true`或 form 是复合的。

此外，如果表单字段和已验证的属性/方法之间存在一些不匹配，例如您在示例中的情况，或者如果使用不同的大小写（`snake_case`用于表单字段和`$camelCase`已验证的属性），则可能会出现错误。

在这种情况下，您可以在表单类中使用“error_mapping”：

```
 /**
     * @param OptionsResolver $resolver
     *
     * @throws AccessException
     */
    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults([
            'data_class' => YourEntity::class,
            'error_mapping' => [
                'entityProperty' => 'form_field_1',
                'entityMethod' => 'form_field_2',
            ],
        ]);
    } 
```

# jsf - h:commandButton 单击抛出 IllegalArgumentException

> ID：10439212
> 
> 赞同：0
> 
> 时间：2012-05-03T20:56:49.950
> 
> 标签：jsf, primefaces, illegalargumentexception

在此先感谢您的任何指示/想法。

我正在使用 JSF 2.1、Primefaces 3.2 和 Jboss7.0 Final。我的问题是以下 .XHTML 正在抛出：

```
javax.servlet.ServletException: mainForm:testTabs_Tabs-tabs:j_idt34
javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137)
com.maketechnologies.framework.web.SecurityFilter.doFilter(SecurityFilter.java:34)
root cause
java.lang.IllegalArgumentException: mainForm:testTabs_Tabs-tabs:j_idt34
javax.faces.component.UIComponentBase.validateId(UIComponentBase.java:548)
javax.faces.component.UIComponentBase.setId(UIComponentBase.java:363)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.doExistingComponentActions(ComponentTagHandlerDelegateImpl.java:428)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:155)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
com.sun.faces.facelets.tag.composite.ImplementationHandler.apply(ImplementationHandler.java:81)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.applyCompositeComponent(CompositeComponentTagHandler.java:348)
com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.applyNextHandler(CompositeComponentTagHandler.java:190)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
com.sun.faces.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:103)
com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:178)
com.sun.faces.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:395)
com.sun.faces.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:366)
com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:108)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
com.sun.faces.facelets.tag.jsf.core.ViewHandler.apply(ViewHandler.java:164)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367)
com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155)
com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:744)
com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:126)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137)
com.maketechnologies.framework.web.SecurityFilter.doFilter(SecurityFilter.java:34) 
```

这是我的 XHTML 代码（我无法发布所有代码，这会导致格式问题）：

```
<p:outputPanel id="testTabs_Tabs" layout="block" styleClass="tabLayout">
    <p:tabView dynamic="true" id="testTabs_Tabs-tabs" onTabChange="if (isDirtyAction()) {return false;}">
        <p:tab id="testTabs_Tabs-Tab1" label="#{testTabsMsg.testTabs_Tabs_Tab1}" title="#{testTabsMsg.testTabs_Tabs_Tab1}">
            <p:outputPanel id="Tabs_Tab1" layout="block" styleClass="formLayout">
                <table class="formLayout">
                <tbody>
                    <tr>
                        <td colspan="2">
                            <p:outputPanel id="Tab1_TestPanel" layout="block" styleClass="formLayout">
                                <table class="formLayout">
                                <tbody>
                                    <tr>
                                        <td colspan="2">
                                            <p:outputPanel id="TestPanel_UpperPanel" layout="block" styleClass="formLayout">
                                                <table class="formLayout">
                                                <tbody>
                                                    <tr>
                                                        <td colspan="2">
                                                            <p:outputPanel id="UpperPanel_Buttons" layout="block" styleClass="formLayout">
                                                                <p:outputPanel id="UpperPanel_Buttons_buttonGroup" layout="block" styleClass="buttonGroup">
                                                                    <t:commandButton action="#{testTabs.doSomething}" disabled="#{testTabs.doSomethingDisabled}" id="buttons_doSomething" value= "#{testTabsMsg.testTabs_Tabs_Tab1_TestPanel_UpperPanel_Buttons_doSomething}" />
                                                                </p:outputPanel>
                                                            </p:outputPanel>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                                </table>
                                            </p:outputPanel>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <p:outputPanel id="TestPanel_ShowMeHideMe">
                                                <p:outputPanel id="TestPanel_ShowMeHideMe_inner" layout="block" rendered="#{testTabs.showMeHideMeRendered}" styleClass="formLayout">
                                                    <table class="formLayout">
                                                    <tbody>
                                                        <tr>
                                                            <th>
                                                                <t:label forId="Hi:Hi" value="#{testTabsMsg.testTabs_Tabs_Tab1_TestPanel_ShowMeHideMe_Hi}"/>
                                                            </th>
                                                            <td>
                                                                <t:inputText id="Hi" label="#{testTabsMsg.testTabs_Tabs_Tab1_TestPanel_ShowMeHideMe_Hi}" value="#{testTabs.testText}"/>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                    </table>
                                                    <p:outputPanel id="TestPanel_ShowMeHideMe_buttonGroup" layout="block" styleClass="buttonGroup">
                                                        <t:commandButton action="#{testTabs.done}" ajax="true" id="showMeHideMe_done" updateTarget="@form" value="#{testTabsMsg.testTabs_Tabs_Tab1_TestPanel_ShowMeHideMe_done}"/>
                                                    </p:outputPanel>
                                                </p:outputPanel>
                                            </p:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                                </table>
                            </p:outputPanel>
                        </td>
                    </tr>
                </tbody>
                </table>
            </p:outputPanel>
        </p:tab>
        <p:tab action="#{testTabs.tab2}" id="testTabs_Tabs-Tab2" label="#{testTabsMsg.testTabs_Tabs_Tab2}" title="#{testTabsMsg.testTabs_Tabs_Tab2}"/>
    </p:tabView>
</p:outputPanel>
</td>
</tr>
</tbody>
</table>
</p:outputPanel>
</ui:define>
</ui:composition> 
```

这是我的支持 bean 代码：

```
package ca.sandbox;
import java.io.Serializable;
import javax.annotation.PostConstruct;
import javax.inject.Inject;
import javax.inject.Named;
import org.apache.myfaces.extensions.cdi.core.api.scope.conversation.ViewAccessScoped;
import org.jboss.seam.international.status.Messages;
import com.ocpsoft.pretty.faces.annotation.URLAction;
import com.ocpsoft.pretty.faces.annotation.URLMapping;
import com.ocpsoft.pretty.faces.annotation.URLMappings;
import ca.sandbox.AbstractBackingBean;

@Named
@ViewAccessScoped
@URLMappings(mappings = {
        @URLMapping(id = "testTabs", pattern = "/sandbox/testTabs/#{iid : testTabs.id}", viewId = "/sandbox/testTabs.jsf"),
        @URLMapping(id = "testTabsNew", pattern = "/sandbox/testTabs", viewId = "/sandbox/testTabs.jsf") })
public class TestTabs extends AbstractBackingBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private String hi;
    private Long id;
    private String testText = "this is working!!!";
    private boolean panelShown = false;

    public TestTabs() {
    }

    public String getHi() {
        return hi;
    }

    public void setHi(String hi) {
        this.hi = hi;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @URLAction
    public void load() {
    }

    @PostConstruct
    public void init() {
        System.out.println("break here");
    }

    public String done() {
        panelShown = false;
        return null;
    }

    public String doSomething() {
        panelShown = true;
        return null;
    }

    public boolean getShowMeHideMeRendered() {
        return panelShown;
    }

    public boolean getDoSomethingDisabled() {
        return panelShown;
    }

    public String getTestText() {
        return testText;
    }

    public void setTestText(String testText) {
        this.testText = testText;
    }

    // @formatter:off
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:44:09.757

错误是说`mainForm:testTabs_Tabs-tabs`组件的参数之一是错误的。经过一番研究，我发现`p:tab`没有动作组件属性，

```
<p:tab action="#{testTabs.tab2}" id="testTabs_Tabs-Tab2" label="#{testTabsMsg.testTabs_Tabs_Tab2}" title="#{testTabsMsg.testTabs_Tabs_Tab2}"/> 
```

尝试将 tab2 的代码更改为此

```
<p:tab id="testTabs_Tabs-Tab2" label="#{testTabsMsg.testTabs_Tabs_Tab2}" title="#{testTabsMsg.testTabs_Tabs_Tab2}"/> 
```

# objective-c - Quartz Composer Objective C 比较之前的输入和当前的输入

> ID：10439217
> 
> 赞同：0
> 
> 时间：2012-05-03T20:57:31.133
> 
> 标签：objective-c, macos, quartz-composer

我正在尝试构建一个每次键盘输入只会触发一次命令的东西（而不是像 QC 本身那样的每一帧）。为此，我尝试监听键盘输入（通过 Freeboard）并将当前输入与以前的版本进行比较。

似乎正在发生的事情是每次执行补丁时都会擦除以前的版本，所以我比较字符串的条件每次都失败。这里有一些代码让它更清楚一点：

```
- (BOOL)execute:(id <QCPlugInContext>)context atTime:(NSTimeInterval)time withArguments:(NSDictionary *)arguments
{   
  self.outputPrevious=previousCharacter;
  if ([self.inputCharacter caseInsensitiveCompare:previousCharacter]){  
      self.outputText=@"SAME";
  }
  else {
      self.outputText=@"CHANGE";
  }
  previousCharacter = [NSString stringWithString:self.inputCharacter];
  [previousCharacter retain];
  return YES;
} 
```

其中 self.outputText 是告诉我 if 结果的文本，self.outputPrevious 是告诉我上一个字符输入是什么，self.inputCharacter 是当前键盘输入。

previousCharacter 在标头中定义并在 中实例化`-init`，因此不应每次都将其重置。

我已经尝试了几乎所有的东西，所以如果你有任何想法或见解，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:46:24.650

最终想通了。完整的解决方案可以在[这里找到](https://github.com/zebradog/QCKeyEventEmulator)

# c# - Rally .NET REST：如何创建新的测试用例结果

> ID：10439224
> 
> 赞同：-1
> 
> 时间：2012-05-03T20:57:59.767
> 
> 标签：c#, rest, rally

好的 - 对不起，我原来的问题缺乏特异性。这是我正在尝试做的 - 使用特定浏览器测试用例的测试用例结果更新 Rally。更新代码片段：

```
 DynamicJsonObject newTestCaseResult = new DynamicJsonObject();

    newTestCaseResult["Date"] = "2012-04-25";
    newTestCaseResult["TestCase"] = "TC1234";
    newTestCaseResult["Notes"] = "XSLT support tests";
    newTestCaseResult["Build"] = "20120430.3681";
    newTestCaseResult["Verdict"] = "Pass";

    // Create the TestCaseResult
    CreateResult cr = restApi.Create("TestCaseResult", newTestCaseResult); 
```

我在创建步骤中遇到了这个异常：

```
 {System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.} 
```

关于我要去哪里错的任何想法？这个问题是否满足提高特异性的需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:03:32.753

注意到这个问题已经重新打开，您可能希望根据我在评论部分的评论调整您对 TestCase 的分配以使用引用而不是 FormattedID：

```
 newTestCaseResult["TestCase"] = "/testcase/12345678"; 
```

其中 long int 是关注的测试用例的 OID。

# android - App Engine 已连接 Android 应用程序没有 Google 帐户

> ID：10439228
> 
> 赞同：1
> 
> 时间：2012-05-03T20:58:26.737
> 
> 标签：android, google-app-engine

我按照教程[https://developers.google.com/eclipse/docs/appeng_android_run_debug](https://developers.google.com/eclipse/docs/appeng_android_run_debug)进行 了操作，但是当我调试项目并单击添加帐户时，我没有看到 Google 是一个选项……我只看到公司和电子邮件。

我必须使用 Google 帐户注册手机才能接收来自 C2DM 的消息，为什么没有该选项？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:52:50.200

是的，您需要一个 Google 帐户。

因为 Google App Engine 将消息发送到 C2DM 服务器，然后从那里发送到您注册的设备。欲了解更多信息，请访问：[https ://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

我遇到的问题是教程没有像我想要的那样工作。（我无法连接我的 Google 帐户）所以我直接在我的移动设备上使用 USB 连接对其进行了调试，并且它在那里工作。

# windows-phone-7 - Windows Phone 7.5+ 上 Sencha Touch 2 的实用解决方案？

> ID：10439230
> 
> 赞同：3
> 
> 时间：2012-05-03T20:58:31.760
> 
> 标签：windows-phone-7, sencha-touch-2

好的，所以[Sencha Touch 2 不正式支持 Windows Phone](https://stackoverflow.com/questions/9484581/do-sencha-supports-windows-phone)，尽管它可能会在某一天到来。但是有没有人有一个实用的解决方案来在 Windows Phone 7.5+ 上运行 Sencha Touch 2 网络应用程序？例如似乎可以工作的第 3 方浏览器应用程序、PhoneGap / Cordova、其他 polyfills/库或组合？

不一定要完美。对功能性 GUI 最感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:43:10.070

Sencha Touch 可能会在未来宣布对 Windows Phone 的支持，但不幸的是，与此同时该框架将不会在 IE9 Mobile 中呈现，因此尚无法在此上下文中使用 Sencha。

# python - 在 python 代码上使用 makefile 制作可执行文件

> ID：10439231
> 
> 赞同：0
> 
> 时间：2012-05-03T20:58:33.150
> 
> 标签：python, makefile, executable

我试图运行以下makefile：

```
all:
    chmod +x codeWriter.py
    chmod +x parser.py
    chmod +x vmTranslator.py
    chmod +x VMtranslator

tar:
    tar cvf project7.tar README Makefile *.py VMtranslator

clean:
    rm -f *.tar *.pyc os* sys* 
```

但由于某些未知原因，我收到了这些错误：

```
line 1: all:: command not found
chmod: codeWriter.py: No such file or directory
chmod: parser.py: No such file or directory
chmod: vmTranslator.py: No such file or directory
chmod: VMtranslator: No such file or directory

line 7: tar:: command not found
tar: README: Cannot stat: No such file or directory
tar: Makefile: Cannot stat: No such file or directory
tar: *.py: Cannot stat: No such file or directory
tar: VMtranslator: Cannot stat: No such file or directory
tar: Error exit delayed from previous errors. 
```

知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:02:37.587

听起来您试图运行 Makefile，就好像它是一个 shell 脚本（可能带有`sh Makefile`）。Makefile 不应该直接运行，甚至不应该有执行权限（在大多数情况下）。

要执行 Makefile 中的配方，请运行`make`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:03:41.063

尝试定义一个工作主管，如下所述：

[通用 GNU makefile 目录路径](https://stackoverflow.com/questions/322936/common-gnu-makefile-directory-path)

使用该 PWD 引用脚本文件以调用`chmod`.

# android - 如何创建这样的 Android 选项卡（截图）？

> ID：10439232
> 
> 赞同：4
> 
> 时间：2012-05-03T20:58:37.753
> 
> 标签：android

知道如何实现这样的选项卡（顶部带有主页图像、星号等的选项卡）

![顶部的标签](../Images/43b6ade89cdbb7d073b8666aca63c615.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:00:22.073

[在 Ice Cream Sandwich 的操作栏中](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/ActionBarTabs.html)使用选项卡。

或[ActionBarSherlock 选项卡](https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock-samples/demos/src/com/actionbarsherlock/sample/demos/TabNavigation.java)以实现完全的向后兼容性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T21:11:28.800

这些是所谓的“滑动标签”，可能位于`ViewPager`. [`ViewPagerIndicator`](http://viewpagerindicator.com/)具有此类选项卡的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:15:24.387

如果您希望使用与 android 市场应用程序（又名 google play）上相同的 tabs-pager，您可以从 sdk 管理器获取 android 支持库并在“.../extras/android/support/samples”上查看他们的示例/Support4Demos”。在那里，找到名为“tabs and pager”的片段示例。我觉得你会喜欢它 ... ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T21:03:48.513

试试[这个](http://joshclemm.com/blog/?p=136)。解决方案是使用[TabWidget](http://developer.android.com/reference/android/widget/TabWidget.html)类的`setDividerDrawable(...)`方法。然后您可以使用 XML 定义选项卡的外观。

# java - 尝试安装 zgrviewer 查看 DOT 文件

> ID：10439241
> 
> 赞同：1
> 
> 时间：2012-05-03T20:59:14.010
> 
> 标签：java, bash, graphviz

我正在尝试在我的 Ubuntu 机器上安装 zgrviewer，以查看 DOT 文件。我已经安装了 java jdk 1.6 和 Graphviz (sudo apt-get install graphviz)。

输入“which javac”后我注意到的 java 安装路径是 /usr/bin/javac。

我从 sourceforge.net 签出 zgrviewer：

svn co [https://zvtm.svn.sourceforge.net/svnroot/zvtm/zgrviewer/trunk](https://zvtm.svn.sourceforge.net/svnroot/zvtm/zgrviewer/trunk) zgrviewer

我应该通过运行 run.sh 脚本来启动 zgr 查看器。run.sh 脚本的内容是：

```
 #!/bin/sh
   # If you want to be able to run ZGRViewer from any directory,
   # set ZGRV_HOME to the absolute path of ZGRViewer's main directory
   # e.g. ZGRV_HOME=/usr/local/zgrviewer

     ZGRV_HOME=/usr/local/zgrviewer

     java -Xmx1024M -Xms512M -jar $ZGRV_HOME/target/zgrviewer-0.9.0-SNAPSHOT.jar "$@" 
```

我不确定如何编辑此脚本以指向特定的 Java 虚拟机；现在，它只是说 java，因此使用它在我的 PATH 中找到的第一个 JVM。

所以当我运行脚本时它说：无法访问jarfile /usr/local/zgrviewer/target/zgrviewer-0.9.0-SNAPSHOT.jar

请帮我成功安装zgrviewer。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:06:27.733

我非常喜欢graphviz，但我最终放弃了原生的“dot”查看器。相反，我构建（或获取）带有 pdf 支持的 graphviz，并将 .dot 转换为 pdf。从那里开始，许多 PDF 查看器运行良好（它们往往比点查看器更精致，可能是因为需要更常见），即使对于大型文档也是如此。我主要是 gnome 2.x 的人，但我发现 KDE 的 okular 是迄今为止我遇到的用于大型 PDF 的最佳 PDF 查看器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T11:01:45.653

如果这有帮助，我已经写了一篇关于如何在 Ubuntu/Gnome 上安装 Graphviz 查看器 (ZGRViewer) 和缩略图的指南。

可在[http://bernaerts.dyndns.org/linux/74-ubuntu/287​​-ubuntu-graphviz-viewer-gnome-thumbnailer获得](http://bernaerts.dyndns.org/linux/74-ubuntu/287-ubuntu-graphviz-viewer-gnome-thumbnailer)

我已经能够毫无问题地使用 ZGRViewer 0.8.2，但直到使用 0.9.0 版为止都没有成功。

# c# - 计算 Int32 中的前导零

> ID：10439242
> 
> 赞同：16
> 
> 时间：2012-05-03T20:59:23.780
> 
> 标签：c#, count, int, bit-manipulation, leading-zero

如何计算 a 中的前导零`Int32`？所以我想做的是编写一个函数，如果我的输入是 2，它返回 30，因为在二进制中我有`000...0000000000010`.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-03T21:06:34.667

***注意**使用 dotnet core >=3.0？看[这里](https://stackoverflow.com/a/61274993/14357)。*

我们以数字 20 为例。可以用二进制表示如下：

```
 00000000000000000000000000010100 
```

首先，我们通过对自身进行右移和按位或运算，将最高有效位“涂抹”在较低位位置上。

```
 00000000000000000000000000010100
 or 00000000000000000000000000001010 (right-shifted by 1)
 is 00000000000000000000000000011110 
```

然后

```
 00000000000000000000000000011110
 or 00000000000000000000000000000111 (right-shifted by 2)
 is 00000000000000000000000000011111 
```

在这里，因为它是一个小数字，我们已经完成了这项工作，但是通过 4、8 和 16 位的移位继续该过程，我们可以确保对于任何 32 位数字，我们已经设置了所有位0 到原数的 MSB 到 1。

现在，如果我们计算“拖尾”结果中 1 的数量，我们可以简单地从 32 中减去它，剩下的就是原始值中前导零的数量。

我们如何计算整数中设置的位数？[这个页面](http://aggregate.org/MAGIC/#Population%20Count%20(Ones%20Count))有一个神奇的算法可以做到这一点（“ *a variable-precision SWAR algorithm to perform a tree reduction* ”......如果你明白了，你比我聪明！），它转换为 C# 如下：

```
int PopulationCount(int x)
{
    x -= ((x >> 1) & 0x55555555);
    x = (((x >> 2) & 0x33333333) + (x & 0x33333333));
    x = (((x >> 4) + x) & 0x0f0f0f0f);
    x += (x >> 8);
    x += (x >> 16);
    return (x & 0x0000003f);
} 
```

通过将这个方法与我们上面的“smearing”方法内联，我们可以生成一个非常快速、无循环和无条件的方法来计算整数的前导零。

```
int LeadingZeros(int x)
{
    const int numIntBits = sizeof(int) * 8; //compile time constant
    //do the smearing
    x |= x >> 1; 
    x |= x >> 2;
    x |= x >> 4;
    x |= x >> 8;
    x |= x >> 16;
    //count the ones
    x -= x >> 1 & 0x55555555;
    x = (x >> 2 & 0x33333333) + (x & 0x33333333);
    x = (x >> 4) + x & 0x0f0f0f0f;
    x += x >> 8;
    x += x >> 16;
    return numIntBits - (x & 0x0000003f); //subtract # of 1s from 32
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-01T06:37:11.917

如果您想混合汇编代码以获得最佳性能。这是在 C# 中执行此操作的方法。

首先是使之成为可能的支持代码：

```
using System.Runtime.InteropServices;
using System.Runtime.CompilerServices;
using static System.Runtime.CompilerServices.MethodImplOptions;

/// <summary> Gets the position of the right most non-zero bit in a UInt32\.  </summary>
[MethodImpl(AggressiveInlining)] public static int BitScanForward(UInt32 mask) => _BitScanForward32(mask);

/// <summary> Gets the position of the left most non-zero bit in a UInt32\.  </summary>
[MethodImpl(AggressiveInlining)] public static int BitScanReverse(UInt32 mask) => _BitScanReverse32(mask);

[DllImport("kernel32.dll", SetLastError = true)]
private static extern IntPtr VirtualAlloc(IntPtr lpAddress, uint dwSize, uint flAllocationType, uint flProtect);

private static TDelegate GenerateX86Function<TDelegate>(byte[] x86AssemblyBytes) {
    const uint PAGE_EXECUTE_READWRITE = 0x40;
    const uint ALLOCATIONTYPE_MEM_COMMIT = 0x1000;
    const uint ALLOCATIONTYPE_RESERVE = 0x2000;
    const uint ALLOCATIONTYPE = ALLOCATIONTYPE_MEM_COMMIT | ALLOCATIONTYPE_RESERVE;
    IntPtr buf = VirtualAlloc(IntPtr.Zero, (uint)x86AssemblyBytes.Length, ALLOCATIONTYPE, PAGE_EXECUTE_READWRITE);
    Marshal.Copy(x86AssemblyBytes, 0, buf, x86AssemblyBytes.Length);
    return (TDelegate)(object)Marshal.GetDelegateForFunctionPointer(buf, typeof(TDelegate));
} 
```

然后是生成函数的程序集：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate Int32 BitScan32Delegate(UInt32 inValue);

private static BitScan32Delegate _BitScanForward32 = (new Func<BitScan32Delegate>(() => { //IIFE   
   BitScan32Delegate del = null;
   if(IntPtr.Size == 4){
      del = GenerateX86Function<BitScan32Delegate>(
         x86AssemblyBytes: new byte[20] {
         //10: int32_t BitScanForward(uint32_t inValue) {
            0x51,                                       //51                   push        ecx  
            //11:    unsigned long i;
            //12:    return _BitScanForward(&i, inValue) ? i : -1;
            0x0F, 0xBC, 0x44, 0x24, 0x08,               //0F BC 44 24 08       bsf         eax,dword ptr [esp+8] 
            0x89, 0x04, 0x24,                           //89 04 24             mov         dword ptr [esp],eax 
            0xB8, 0xFF, 0xFF, 0xFF, 0xFF,               //B8 FF FF FF FF       mov         eax,-1               
            0x0F, 0x45, 0x04, 0x24,                     //0F 45 04 24          cmovne      eax,dword ptr [esp]
            0x59,                                       //59                   pop         ecx 
            //13: }
            0xC3,                                       //C3                   ret  
      });
   } else if(IntPtr.Size == 8){
      del = GenerateX86Function<BitScan32Delegate>( 
         //This code also will work for UInt64 bitscan.
         // But I have it limited to UInt32 via the delegate because UInt64 bitscan would fail in a 32bit dotnet process.  
            x86AssemblyBytes: new byte[13] {
            //15:    unsigned long i;
            //16:    return _BitScanForward64(&i, inValue) ? i : -1; 
            0x48, 0x0F, 0xBC, 0xD1,            //48 0F BC D1          bsf         rdx,rcx
            0xB8, 0xFF, 0xFF, 0xFF, 0xFF,      //B8 FF FF FF FF       mov         eax,-1 
            0x0F, 0x45, 0xC2,                  //0F 45 C2             cmovne      eax,edx  
            //17: }
            0xC3                              //C3                   ret 
         });
   }
   return del;
}))();

private static BitScan32Delegate _BitScanReverse32 = (new Func<BitScan32Delegate>(() => { //IIFE   
   BitScan32Delegate del = null;
   if(IntPtr.Size == 4){
      del = GenerateX86Function<BitScan32Delegate>(
         x86AssemblyBytes: new byte[20] {
            //18: int BitScanReverse(unsigned int inValue) {
            0x51,                                       //51                   push        ecx  
            //19:    unsigned long i;
            //20:    return _BitScanReverse(&i, inValue) ? i : -1;
            0x0F, 0xBD, 0x44, 0x24, 0x08,               //0F BD 44 24 08       bsr         eax,dword ptr [esp+8] 
            0x89, 0x04, 0x24,                           //89 04 24             mov         dword ptr [esp],eax 
            0xB8, 0xFF, 0xFF, 0xFF, 0xFF,               //B8 FF FF FF FF       mov         eax,-1  
            0x0F, 0x45, 0x04, 0x24,                     //0F 45 04 24          cmovne      eax,dword ptr [esp]  
            0x59,                                       //59                   pop         ecx 
            //21: }
            0xC3,                                       //C3                   ret  
      });
   } else if(IntPtr.Size == 8){
      del = GenerateX86Function<BitScan32Delegate>( 
         //This code also will work for UInt64 bitscan.
         // But I have it limited to UInt32 via the delegate because UInt64 bitscan would fail in a 32bit dotnet process. 
            x86AssemblyBytes: new byte[13] {
            //23:    unsigned long i;
            //24:    return _BitScanReverse64(&i, inValue) ? i : -1; 
            0x48, 0x0F, 0xBD, 0xD1,            //48 0F BD D1          bsr         rdx,rcx 
            0xB8, 0xFF, 0xFF, 0xFF, 0xFF,      //B8 FF FF FF FF       mov         eax,-1
            0x0F, 0x45, 0xC2,                  //0F 45 C2             cmovne      eax,edx  
            //25: }
            0xC3                              //C3                   ret 
         });
   }
   return del;
}))(); 
```

为了生成程序集，我开始了一个新的 VC++ 项目，创建了我想要的函数，然后转到 Debug-->Windows-->Disassembly。对于编译器选项，我禁用了内联、启用了内在函数、偏爱快速代码、省略了帧指针、禁用了安全检查和 SDL 检查。代码是：

```
#include "stdafx.h"
#include <intrin.h>  

#pragma intrinsic(_BitScanForward)  
#pragma intrinsic(_BitScanReverse) 
#pragma intrinsic(_BitScanForward64)  
#pragma intrinsic(_BitScanReverse64) 

__declspec(noinline) int _cdecl BitScanForward(unsigned int inValue) {
    unsigned long i;
    return _BitScanForward(&i, inValue) ? i : -1; 
}
__declspec(noinline) int _cdecl BitScanForward64(unsigned long long inValue) {
    unsigned long i;
    return _BitScanForward64(&i, inValue) ? i : -1;
}
__declspec(noinline) int _cdecl BitScanReverse(unsigned int inValue) {
    unsigned long i;
    return _BitScanReverse(&i, inValue) ? i : -1; 
}
__declspec(noinline) int _cdecl BitScanReverse64(unsigned long long inValue) {
    unsigned long i;
    return _BitScanReverse64(&i, inValue) ? i : -1;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-04-17T15:17:04.867

在 .NET Core 3.0 中有[BitOperations。**LeadingZeroCount** ()](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.bitoperations.leadingzerocount?view=netcore-3.0)和[BitOperations。**TrailingZeroCount** ()](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.bitoperations.trailingzerocount?view=netcore-3.0)直接映射到 x86 的 LZCNT/BSR 和 TZCNT/BSF。因此，目前它们将是最有效的解决方案

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-27T07:03:12.750

查看[https://chessprogramming.wikispaces.com/BitScan](https://chessprogramming.wikispaces.com/BitScan)了解有关位扫描的详细信息。

如果您能够混合汇编代码，请使用现代 LZCNT、TZCNT 和 POPCNT 处理器命令。

除此之外，看看 Java 对 Integer 的实现。

```
/**
 * Returns the number of zero bits preceding the highest-order
 * ("leftmost") one-bit in the two's complement binary representation
 * of the specified {@code int} value.  Returns 32 if the
 * specified value has no one-bits in its two's complement representation,
 * in other words if it is equal to zero.
 *
 * <p>Note that this method is closely related to the logarithm base 2.
 * For all positive {@code int} values x:
 * <ul>
 * <li>floor(log<sub>2</sub>(x)) = {@code 31 - numberOfLeadingZeros(x)}
 * <li>ceil(log<sub>2</sub>(x)) = {@code 32 - numberOfLeadingZeros(x - 1)}
 * </ul>
 *
 * @param i the value whose number of leading zeros is to be computed
 * @return the number of zero bits preceding the highest-order
 *     ("leftmost") one-bit in the two's complement binary representation
 *     of the specified {@code int} value, or 32 if the value
 *     is equal to zero.
 * @since 1.5
 */
public static int numberOfLeadingZeros(int i) {
    // HD, Figure 5-6
    if (i == 0)
        return 32;
    int n = 1;
    if (i >>> 16 == 0) { n += 16; i <<= 16; }
    if (i >>> 24 == 0) { n +=  8; i <<=  8; }
    if (i >>> 28 == 0) { n +=  4; i <<=  4; }
    if (i >>> 30 == 0) { n +=  2; i <<=  2; }
    n -= i >>> 31;
    return n;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-03T21:42:22.630

试试这个：

```
static int LeadingZeros(int value)
{
   // Shift right unsigned to work with both positive and negative values
   var uValue = (uint) value;
   int leadingZeros = 0;
   while(uValue != 0)
   {
      uValue = uValue >> 1;
      leadingZeros++;
   }

   return (32 - leadingZeros);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-03T21:08:08.130

这里有一些复杂的答案。这个怎么样？

```
private int LeadingZeroes(int value)
{
    return (32 - (Convert.ToString(value, 2).Length));
} 
```

虽然现在我猜测负数可能存在一些问题，而这种类型的解决方案可能会出现一些问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-06T17:00:40.463

如果您只想模拟 Lzcnt 指令，您可以这样做（它给出 32 表示零值）：

```
int Lzcnt(uint value)
{
    //Math.Log(0, 2) is -Infinity, cast to int is 0x80000000
    int i=(int)Math.Log(value, 2);
    return 31-(i&int.MaxValue)-(i>>31);
} 
```

如果您需要知道存储特定值需要多少位，最好是：

```
1+((int)Math.Log(value, 2)&int.MaxValue) 
```

上面给出了一个零值——因为您实际上需要一位来存储零。

但这些仅适用于 uint 而不适用于 ulong。Double （这是 Log 方法参数）没有足够的精度来存储 ulong 直到最低有效位，因此`(double)0xFFFFFFFFFFFFFF`与`(double)0x100000000000000`.

~~但是在 .Net Core 3.0 中，我们终于有了最新最好的 Lzcnt 指令。因此，如果只有`System.Runtime.Intrinsics.X86.Lzcnt.IsSupported`（`System.Runtime.Intrinsics.X86.Lzcnt.X64.IsSupported`对于 ulong），那么您可以使用`System.Runtime.Intrinsics.X86.Lzcnt.LeadingZeroCount(value)`（`System.Runtime.Intrinsics.X86.Lzcnt.X64.LeadingZeroCount(value)`对于 ulong）。~~

但是有了 .Net Core 3.0，我们终于有了`System.Numerics.BitOperations.LeadingZeroCount`@phuclv 已经提到的最新和最棒的[版本](https://stackoverflow.com/a/61274993/3186467)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T21:03:03.210

在 C 中：

```
unsigned int
lzc(register unsigned int x)
{
        x |= (x >> 1);
        x |= (x >> 2);
        x |= (x >> 4);
        x |= (x >> 8);
        x |= (x >> 16);
        return(WORDBITS - ones(x));
} 
```

（来自`http://aggregate.org/MAGIC/#Leading Zero Count`）

翻译成 C# 留给读者作为一个简单的练习。

**编辑**

我提供链接的原因是，我不需要复制以下内容（再次在 C 中）：

```
#define WORDBITS 32

unsigned int
ones(unsigned int x)
{
        /* 32-bit recursive reduction using SWAR...
       but first step is mapping 2-bit values
       into sum of 2 1-bit values in sneaky way
    */
        x -= ((x >> 1) & 0x55555555);
        x = (((x >> 2) & 0x33333333) + (x & 0x33333333));
        x = (((x >> 4) + x) & 0x0f0f0f0f);
        x += (x >> 8);
        x += (x >> 16);
        return(x & 0x0000003f);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-03T21:07:51.833

```
private int GetIntegerOffsetLength(int value)
{
    return (32 - (Convert.ToString(value, 2).Length);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-10T17:07:35.923

来吧，伙计们，不要再问“为什么要这样做或那样”。回答是否可以或继续。计算前导零是许多问题（例如压缩算法）中的常见任务。甚至还有专门用于此的 x86 硬件指令（clz、bsr）。不幸的是，您不能在 C# 中使用这些硬件指令，因为（尚）不支持内在函数。我想转换成字符串是个笑话。

int 的二进制表示具有非常明确的界限。事实上，在 C# 中，int 只是 Int32 的别名。正如其名称所暗示的那样，“Int32”始终是 32 位有符号整数，即使您为 x64 编译项目也是如此。

而且你不需要一些特殊的巫术魔法来计算前导零：这是一个简单的数学解决方案：

这里“x”是你的 int (Int32)：

```
int LeadingZeros = (int)(32 - Math.Log((double)x + 1, 2d));
LeadingZeros += (int)((x - (0x80000000u >> LeadingZeros)) >> 31); 
```

编辑：对不起，我已经审查并更正了我的公式。由于双重算术的精度误差，对于少数边界情况，结果可能不正确。所以它仍然需要一些“巫毒魔法”。第二行处理这些情况并产生正确的结果。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-20T21:36:18.960

我认为最好的选择是[上面的 spender 的帖子](https://stackoverflow.com/a/10439333/2352507)。但是，如果有人正在寻找轻微的性能提升，可以使用以下方法..（注意：在我机器上的基准测试中它只快 2%）

这个通过将浮点数转换为整数然后抓取指数位来工作。

```
 [StructLayout(LayoutKind.Explicit)]
    private struct ConverterStruct
    {
        [FieldOffset(0)] public int asInt;
        [FieldOffset(0)] public float asFloat;
    }

    public static int LeadingZeroCount(uint val)
    {
        ConverterStruct a;  a.asInt = 0; a.asFloat = val;
        return 30-((a.asInt >> 23 )) & 0x1F;
    } 
```

这也可以扩展到 Int64 版本......

```
 [StructLayout(LayoutKind.Explicit)]
    private struct ConverterStruct2
    {
        [FieldOffset(0)] public ulong asLong;
        [FieldOffset(0)] public double asDouble;
    }

    // Same as Log2_SunsetQuest3 except
    public static int LeadingZeroCount(ulong val)
    {
        ConverterStruct2 a;  a.asLong = 0; a.asDouble = val;
        return 30-(int)((a.asLong >> 52)) & 0xFF;
    } 
```

注意：在浮点数中使用指数的想法来自[SPWorley 3/22/2009](https://stackoverflow.com/a/671826/2352507)。谨慎使用生产代码，因为这在非小端架构上会失败。

以下是 Floor-Log2 的一些基准 - 这几乎相同：[https](https://github.com/SunsetQuest/Fast-Integer-Log2) ://github.com/SunsetQuest/Fast-Integer-Log2 ）

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-02-07T21:50:48.317

计数前导零/查找第一个设置/位扫描反向是操作系统和其他低级编程中最常见的事情，大多数硬件支持 clz 以形成单周期指令。并且大多数 c/c++ 编译器都有一个固有的编译器。

[http://en.wikipedia.org/wiki/Find_first_set](http://en.wikipedia.org/wiki/Find_first_set)

大多数硬件和编译器也有计数尾随零、弹出计数/位计数/计数、奇偶校验、bswap/flip endien 和其他几个夸夸其谈但非常有用的位旋转操作。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2012-05-03T21:08:29.067

```
32 - Convert.ToString(2,2).Count() 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-09-08T18:29:05.063

您可以使用预先计算的计数获得最佳性能

```
public static class BitCounter
{
    private static readonly int[] _precomputed = new[]
        {
            0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 
            1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5,
            1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5,
            2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
            1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5,
            2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
            2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
            3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
            1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5,
            2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
            2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
            3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
            2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
            3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
            3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
            4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8
        };

    public static int CountOn(int value)
    {
        return _precomputed[value >> 24] +
               _precomputed[(value << 8) >> 24] +
               _precomputed[(value << 16) >> 24] +
               _precomputed[value & 0xFF];
    }

    public static int CountOff(int value)
    {
        return 32 - CountOn(value);
    }
} 
```

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2012-05-03T21:03:46.113

整数没有前导零，也不支持 32 位数字。话虽如此，您应该能够通过将整数转换为字符串并检查长度来创建一个函数来执行此操作：

```
private int GetIntegerOffsetLength(int value)
{
    //change 32 to whatever your upper bound is
    return (32 - (value.ToString().Length + 1));
} 
```

# .net - 部署 .NET 应用程序并使用 Sybase Adaptive Server ADO.NET 数据提供程序

> ID：10439250
> 
> 赞同：1
> 
> 时间：2012-05-03T21:00:10.793
> 
> 标签：.net, deployment, sap-ase

我正在使用 .NET 框架 3.5 开发 Windows 服务。该服务的关键特性是与执行某些存储过程的 Sybase 数据库建立连接。

如果我在安装了 ASE 的机器上部署我的服务，它就可以正常工作。

但是，当我在客户端机器上部署我的服务时，我在事件查看器中收到这条消息：

> Sybase.AdoNet2.AseClient：无法为请求的字符集加载代码页

然后我在客户端上安装了 ASE 并且服务正常工作。

我的问题是，如果有人知道如何在不使用 GAC 的情况下部署 Adaptive Server ADO.NET 数据提供程序，如此[处](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc20066.0215/html/adonet2155/Registering_deploying_adodotnet_dev.htm)所述？

目前还不清楚我必须安装什么包，我正在安装[这个下载](http://www.sybase.com/ase_1500devel)，但我只需要客户端，而不是整个包。

如果有人有使用 Sybase 的经验，我将感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:57:28.190

请按照以下步骤操作：

1.  创建一个`C:\Sybase`文件夹。
2.  将`charsets`文件夹复制到此文件夹中。
3.  重新启动 IIS

# php - 如何在单个 MySQL 查询中检索父子节点并使用 PHP 显示

> ID：10439252
> 
> 赞同：0
> 
> 时间：2012-05-03T21:00:15.777
> 
> 标签：php, mysql, sql

例如，我有以下 MySQL 表：

```
parent_id | child_id
---------------------
       1  |  4
       1  |  3
       1  |  5
       2  |  8
       3  |  7 
```

我想以如下格式打印出父级及其所有子级：

```
parent     |    child
---------------------
           |      4
        1  |      3
           |      5
---------------------
        2  |      8
---------------------
        3  |      7 
```

基本上我只想显示父级 ONCE(Distinct) 并用 PHP 列出它的所有子级。是否可以仅使用一个 SQL 查询来检索上述结果？如果我首先查询父母，然后使用父母 ID 递归地查询孩子，我可以获得上述结果，但这将是更多的 SQL 查询访问数据库。

或者，我是否检索包含每个 parent_id 和 children_id 的结果，并通过使用数组在 PHP 中实现上述结果。如果是这样，请告诉我如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:02:43.367

是的。正常选择并使用父母作为数组中的键。

```
//Query normally
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    $result[$row["parent_id"]][] = $row["child_id"];
} 
```

或类似的东西。

## 编辑

显示部分看起来像这样：

```
<?php

$result = array(
    1 => array(4, 3, 5),
    2 => array(8),
    3 => array(7)
); //Assuming you get a resultset like this.
$rowIsOpened = false; //Indicates whether a row is currently opened.

//I'm using $rowIsOpened because the row immediately after the rowspanned cell shouldn't be closed.

echo <<<HTML
<table>
    <thead>
        <tr>
            <th>Parent</th>
            <th>Children</th>
        </tr>
    </thead>
    <tbody>
HTML;
//Echo a bunch of HTML before actually looping

foreach ($result as $parent => $children) {
    echo "<tr>";
    echo "<td rowspan=";
    echo count($children); //Span over <how many children are> rows
    echo ">$parent</td>";
    $rowIsOpened = true; //Row is opened
    foreach ($children as $child) {
        if (!$rowIsOpened) {
            echo "<tr>";
        } //Only open a row if row is not opened
        echo "<td>$child</td>";
        echo "</tr>";
        $rowIsOpened = false; //Row is now closed. Ready for next iteration.
    }

}
//Close the table tags etc.
echo <<<HTML
    </tbody>
</table>
HTML; 
```

# javascript - 悬停选项时获取下拉列表的值而不用JS点击

> ID：10439255
> 
> 赞同：0
> 
> 时间：2012-05-03T21:00:22.870
> 
> 标签：javascript, jquery, html

如何在不使用 JS 或 jQuery 单击（选择）的情况下用鼠标悬停选项时获取下拉列表的值？

前任。

```
List of Stuff
 -Dog
 -Cat
 -Bird 
```

![在此处输入图像描述](../Images/3e611342b7a3ec5711630e13071776a9.png)

当我在下拉列表的选项周围移动鼠标时，它会告诉我我的项目正在被高亮显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:04:49.030

这对于标准选择是不可能的，但是如果您非常需要所需的效果，您可以创建自己的选择组件并使用隐藏输入支持它们。

# mocking - 外部挂钩到 PHPUnit 中单元测试的“拆除”

> ID：10439260
> 
> 赞同：1
> 
> 时间：2012-05-03T21:00:45.497
> 
> 标签：mocking, phpunit

我创建了一个模拟数据库类，它将预期的 SQL 查询作为参数，并将对它的每次调用与预期的查询数组进行比较：

```
class Mock_Database
{
    public function __construct(PHPUnit_Framework_TestCase &$testcase, array $expected_queries);
    public function run_query($sql);
} 
```

**问题是**我希望它在测试完成时自动检查是否所有查询都已运行。我想让它自动挂钩到 tearDown 或类似的东西。这个问题有解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:58:39.247

我有一个类似的问题。这有点不干净，但是您可以尝试在测试后执行断言。“assertPostConditions”将在每个测试用例之后执行：

```
class Foo_Test extends PHPUnit_Framework_TestCase {
    /**
     * @see PHPUnit_Framework_TestCase::assertPostConditions()
     */
    public function assertPostConditions()
    {
        $this->dbMock->verify();
    }
} 
```

如果出现问题，则在 verify 方法中抛出 PHPUnit_Framework_ExpectationFailedException：

```
class Mock_Database {
    public function verify()
    {
        // detect differences and assign $allQueriesExecuted

        if (!$allQueriesExecuted) {
            throw new PHPUnit_Framework_ExpectationFailedException(/*...*/);
        }
    }
} 
```

# c++ - typedef 一个包含模板类的共享指针

> ID：10439261
> 
> 赞同：2
> 
> 时间：2012-05-03T21:00:53.507
> 
> 标签：c++, class, templates, shared-ptr, forward-declaration

假设我已经声明了一些模板类，并且我想 typedef 一个指向它的共享指针。我该怎么做？

```
template<typename T> class Arg;
typedef std::tr1::shared_ptr<Arg> ArgPtr; // Compiler error 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T21:05:58.807

您可能还需要模板 typedef。阅读 Sutter 的[文章](http://www.gotw.ca/gotw/079.htm)。

在 C++03 中，你需要一个 hack：

```
template <typename Arg> struct ArgPtr {
     typedef std::shared_ptr<Arg> ArgPtrType;
}; 
```

`using`在 C++11 中，您可以直接通过关键字使用模板别名：

```
template <typename T>
using ArgPtrType = std::shared_ptr<Arg<T>>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T21:05:47.327

那是因为`Arg`不是真正的类型。`Arg<int>`例如将是一个。这就是编译器不想编译的原因。你应该这样写，例如：

```
template<typename T> class Arg;
typedef std::tr1::shared_ptr<Arg<int>> ArgPtr; 
```

如果你使用 C++11，我想你可以这样写：

```
template<typename T> class Arg;

template<typename T>
using ArgPtr = std::tr1::shared_ptr<Arg<T>>; 
```

# java - Java：使用 try 块中的变量

> ID：10439269
> 
> 赞同：1
> 
> 时间：2012-05-03T21:01:50.170
> 
> 标签：java, try-catch, variable-assignment

所以我有这样的事情：

```
try{ServerSocket acceptor = new ServerSocket(4782);}
catch(IOException e){System.err.println("ERROR: Couldn't listen on port 4782!");}
while (true)
{
    Socket clientSock = acceptor.accept();  

} 
```

但是当尝试分配clientSock时，它说它找不到acceptor。当将接受器移出 try 块时，它会因未处理的异常而爆炸。

我应该`Socket clientSock;`在 try 块之前放一个类似的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:08:40.753

这里其他人建议的替代方法：您可以将更多代码移入 try 块：

```
try{
    ServerSocket acceptor = new ServerSocket(4782);

    while (true) {
        Socket clientSock = acceptor.accept();  
    }
} catch(IOException e){
    System.err.println("ERROR: Network problem:" + e.getMessage());
} 
```

以这种方式做事的好处——当你可以侥幸逃脱时——是“幸福的道路”读起来更清楚；更容易遵循代码应该做的事情。这种方法的阴暗面是它会导致将各种错误情况混为一谈，因此您无法针对个别问题做出具体反应。但有时，即使这也是一个优势，而不是一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T21:03:48.880

您可以将实例化保留在 try-catch 中，但将变量声明移出。

```
ServerSocket acceptor = null;
try{acceptor = new ServerSocket(4782);}
catch(IOException e){System.err.println("ERROR: Couldn't listen on port 4782!");}
while (true)
{
    Socket clientSock = acceptor.accept();  

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:03:29.827

不，您应该在 try 块之前声明接受者，如下所示：

```
ServerSocket acceptor = null;
try {
    acceptor = new ServerSocket(4782);
} catch (IOException e) {
    System.err.println("ERROR: Couldn't listen on port 4782!");
}
while (true) {
    Socket clientSock = acceptor.accept();
} 
```

对于此代码，接受器可以在 while 循环内为空，要么在那里检查它，要么在 catch 块内做一些流动改变。

您可能还想处理可能抛出的`IOException`异常`Socket clientSock = acceptor.accept();` ，因为这样的异常会破坏 while 循环——这可能不符合计划。

一般的解释是java范围变量声明“尽可能限制”接受器是在代码的try块内声明的，因此在它之外不可用/未声明。

# assembly - 使用 Assembly 将数据写入 char

> ID：10439272
> 
> 赞同：0
> 
> 时间：2012-05-03T21:02:05.850
> 
> 标签：assembly

我在 C 中创建了一个程序来生成一个 char* 处理数据。我发送到我的汇编程序并将其放入寄存器中：

```
mov     edx, [ebp+12]
mov     edi, edx 
```

我怎样才能在其中写入一个字符。我知道我需要循环编写一个 char 和 inc edi ...。但是我怎么能写一个字符，我已经把这个值放到另一个寄存器中了。但是如果我做 mov edx, 49; 字符代码我会丢失指针。我想做类似的事情

```
for(p=malloc(100*sizeof(char*)); p!=NULL;p++){
    *p=//my char code
} 
```

用于 linux (DEBIAN) x86 的程序集

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:07:06.887

`edx`是字符的目标地址。也就是说，`edx`是指向您要写入的位置的指针。因此，请执行以下操作：

```
mov byte ptr ds:[edx], 49 
```

这甚至可能有效：

```
mov byte ptr ds:[edx], '1' 
```

你说你的角色已经在某个寄存器中。我假设它是一个 8 位寄存器 ( `ah/al/bh/bl/ch/cl/dh/dl`)，在这种情况下你可以这样做：

```
mov [edx], ah 
```

在这种情况下，汇编器可以推断出数据`[edx]`指向的大小。

* * *

我现在在 Windows 上，所以这段代码适用于 VC++。它演示了复制字符串：

```
#include <stdlib.h>
#include <stdio.h>

char src[] = "hello";
char dest[8];

int main( void )
{
   __asm
   {
      xor ecx, ecx

      mov eax, offset src
      mov edx, offset dest

        loop_dest:

      mov bh, byte ptr ds:[eax+ecx]
      mov [edx+ecx], bh

      inc ecx
      cmp ecx, size src
      jnz loop_dest
   }

   printf("%s\n", dest);
   return EXIT_SUCCESS;
} 
```

如果您的汇编器使用 AT&T 语法，您需要做一些小的翻译，但希望这会为您指明正确的方向。

# java - 在 Java 中解析 XML 多行字符串

> ID：10439274
> 
> 赞同：2
> 
> 时间：2012-05-03T21:02:35.083
> 
> 标签：java, xml, parsing, dom, xml-parsing

我正在尝试使用经典 DOM 解析 Java 中的多行 XML 属性。解析工作得很好。但是，它破坏了换行符，因此，当我渲染解析的字符串时，换行符被简单的空格替换。

```
<string key="help_text" value="This is a multi line long
                               text. This should be parsed
                               and rendered in multiple lines" /> 
```

要获取我正在使用的属性：

```
attributes.getNamedItem("value").getTextContent() 
```

如果我只是使用“\n”将手动输入的字符串传递给渲染方法，则文本将按预期绘制。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:13:25.387

根据[XML 规范](http://www.w3.org/TR/REC-xml/#AVNormalize)，XML 解析器必须规范化属性空白，例如用空格替换换行符。即，如果您需要保留换行符，则不能使用属性值。

一般来说，XML 中的空白处理很麻烦。特别是，CR、LF 和 CRLF 之间的差异不会在任何地方保留。

您可能会发现将属性中的换行符编码为`&lt;br /&gt;`（即 的编码版本`<br />`）然后再解码它们会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T21:26:49.827

我过去曾为此使用过 JDom。它在解码多行属性时为您省去了很多麻烦，并真正增强了 Java 上的 XML 解析/编写。JDom 还兼容 Android 开发，而且非常小（只有一个 jar 文件）。

[https://github.com/hunterhacker/jdom](https://github.com/hunterhacker/jdom)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T21:15:45.223

来自[XML](http://www.w3.org/TR/REC-xml/#AVNormalize)规范：3.3.3 属性值规范化。您将看到所有空格都被标准化为单个空格：

> 在将属性值传递给应用程序或检查其有效性之前，XML 处理器必须通过应用下面的算法或使用其他方法来规范化属性值，以便传递给应用程序的值与生成的值相同由算法。如 2.11 行尾处理中所述，所有换行符都必须在输入到 #xA 时进行规范化，因此该算法的其余部分对以这种方式规范化的文本进行操作。
> 
> 从由空字符串组成的规范化值开始。
> 
> 对于非规范化属性值中的每个字符、实体引用或字符引用，从第一个开始到最后一个，执行以下操作：
> 
> 对于字符引用，将引用的字符附加到规范化值。
> 
> 对于实体引用，递归地将此算法的步骤 3 应用于实体的替换文本。
> 
> 对于空格字符（#x20、#xD、#xA、#x9），将空格字符（#x20）附加到标准化值。
> 
> 对于另一个字符，将该字符附加到标准化值。

# javascript - 在 Javascript 重定向中包含 HTTP 方法？

> ID：10439277
> 
> 赞同：3
> 
> 时间：2012-05-03T21:02:49.213
> 
> 标签：javascript, ruby-on-rails, redirect, devise, haml

在我的布局中，我有一个设计登录/注销链接，如下所示：

```
=if user_signed_in? then link_to "_", destroy_user_session_path, :method => :delete else link_to "_", new_user_session_path, :method => :get end 
```

这使用 rails 帮助器来构建链接，并解析为以下 HTML：

```
<a data-method="get" href="/users/sign_in">_</a> 
```

我正在将所有链接转换为按钮，并且刚刚将 URL 传递给 onClick 函数以重定向浏览器。在这种情况下，我认为简单的重定向不会成功，因为我需要指定 HTTP 方法。这是执行此操作的正确方法吗？如果是，我如何告诉 Javascript 有关 HTTP 方法的信息？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:24:54.853

好的，我尝试了 XMLHttpRequest，但无法让它工作。我最终这样做了，这有点像hacktastic，但它有效：

```
login = function(url) {
$.ajax({
    url: url,
    type: "GET"
}).done(function(){
    window.location.href = url; 
}); 
```

}

```
logout = function(url) {
$.ajax({
    url: url,
    type: "DELETE"
}).done(function(){
    window.location.href = "/";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:31:24.010

大多数浏览器不支持全部的 HTTP 动词。因此，Rails 使用隐藏变量来指定预期的 HTTP 方法。

您需要更新该`<input type="hidden" name="_method" ... />`字段以更改 Rails 在 RESTful 路由期间使用的 HTTP 谓词。

# c# - C# 等效于 Java 的 Long.numberOfLeadingZeros

> ID：10439282
> 
> 赞同：3
> 
> 时间：2012-05-03T21:03:09.680
> 
> 标签：c#, java, .net

> **可能重复：**
> [C# - 计算 Int32 中的前导零](https://stackoverflow.com/questions/10439242/c-sharp-count-leading-zeroes-in-an-int32)

我正在寻找与此等效的 C#：[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Long.html#numberOfLeadingZeros(long)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Long.html#numberOfLeadingZeros(long))

来自 Java 文档：

> 返回指定 long 值的二进制补码表示中最高（“最左边”）一位之前的零位数。

希望它已经在某个地方实施......

# java-me - J2ME Back 命令 - 返回上一个屏幕

> ID：10439291
> 
> 赞同：2
> 
> 时间：2012-05-03T21:03:47.620
> 
> 标签：java-me, command, nullpointerexception, midp, lcdui

我一直在试图弄清楚如何创建一个返回到前一个屏幕的命令。
我试图返回的页面没有表单，而是一个列表，但是当我将
“返回”命令侦听器设置为列表时，它似乎只是抛出了一个空指针异常。

这是我的主要课程

```
import java.util.*;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.MIDlet;

/**
 * 
 */
public class CalFrontEnd extends MIDlet implements CommandListener 
{
    private Display display;
    protected List list = new List("Please Select a Option", List.IMPLICIT);
    private Command select = new Command("Select", Command.SCREEN, 1);
    private Command exit = new Command("Exit", Command.EXIT, 2);
    private Command save = new Command("Save,", Command.SCREEN, 2);
    private DateField calendar;

    /**
     * 
     */
    public CalFrontEnd() 
    {
        display = Display.getDisplay(this);   
        list.append("Select Date", null);
        list.append("Add Events", null);
        list.append("Remove Events", null);
        list.append("Browse Events", null);
        list.addCommand(select);
        list.addCommand(exit);
        list.setCommandListener(this);
    }

    /**
     * Start Application
     */
    public void startApp() 
    {
        display.setCurrent(list);
    }

    /**
     * Pause Application Method
     */
    public void pauseApp() 
    {}

    /**
     * Destroy Application Method
     */
    public void destroyApp(boolean unconditional)
    {}

    /**
     * 
     * @param command
     * @param displayable 
     */
    public void commandAction(Command command, Displayable displayable) 
    {
        if (displayable == list) {
            if (command == List.SELECT_COMMAND) {
                switch (list.getSelectedIndex()) {
                    case 0: // select Date
                        SelectDate myDate = new SelectDate(display);
                        myDate.BuildCalendar();
                        break;
                    case 1: //add Events
                        AddEvents myAEvents = new AddEvents(display);
                        myAEvents.BuildAddEvents();
                        break;
                    case 2: //Remove Events
                        RemoveEvents myREvents = new RemoveEvents(display);
                        myREvents.BuildRemoveEvents();
                        break;
                    case 3: //Browse Events
                        BrowseEvents myBEvents = new BrowseEvents(display);
                        myBEvents.BuildBrowseEvents();
                        break;
                }
            } else if (command == exit) {
                destroyApp(false);
                notifyDestroyed();
            }
        }         
    } 
} 
```

这是我尝试使用后退按钮的课程

```
import java.util.*;
import javax.microedition.lcdui.*;

/**
 * 
 */
public class SelectDate extends CalFrontEnd implements CommandListener 
{
    private DateField calendar;
    private Form form = new Form("Please Select a Date");
    private Command select = new Command("Select", Command.SCREEN, 1);
    private Command back = new Command("Back", Command.BACK, 2);
    private Command save = new Command("Save,", Command.SCREEN, 2);
    private Display display;

    /**
     * 
     */
    public SelectDate(Display display)
    {
        this.display = display;
    }

    /**
     * 
     */
    public void BuildCalendar()
    {
        calendar = new DateField("Date In :", DateField.DATE, TimeZone.getTimeZone("GMT"));
        form.append(calendar);
        form.addCommand(back);
        form.setCommandListener(this);
        display.setCurrent(form);
    }  

    /**
     * 
     * @param command
     * @param displayable 
     */
    public void commandAction(Command command, Display display)
    {
        if (command == back)
        {
            display.setCurrent(list);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:22:55.253

不恰当地使用继承给你带来了麻烦。看，类中有一个`list`字段，`SelectDate`但它在代码中不可见，因为它是从超类继承的（`extends CalFrontEnd`并且`protected List list`是所有麻烦真正开始的地方）。

当您创建一个 SelectDate ( `new SelectDate(display)`) 的实例时，该字段被初始化为`null`- 并且之后您永远不会更改它。你很难注意到这一点，因为 的声明`list`被埋在超类的其他文件中。而且，这使事情变得更加困难，编译器在这里无法为您提供帮助，因为该字段对其可见并且它认为一切正常。

*   [你知道，这只是你与过度使用继承有关的麻烦的开始。再往前走，更多的头痛正在等待发生。例如，如果您不小心删除或重命名 SelectDate 中的 commandAction 会发生什么？编译器会认为没问题——只是因为超类也有这个方法。当您运行代码并发现选择日期屏幕上的命令停止响应或开始做奇怪的事情时，您只会注意到事情以某种神秘的方式出错。实际上，为了避免这种错误，为这两个类隐藏 CommandListener 会更安全，但这[已在另一个问题中讨论过](https://stackoverflow.com/a/8307532/839601)。]

我**强烈建议**从`extends CalFrontEnd`SelectDate 中删除。这将帮助编译器帮助您找到代码中的各种逻辑问题。

至于通过 Back 命令显示的列表，您可以例如将其作为附加的构造函数参数传递，如下所示：

```
public class SelectDate implements CommandListener // drop "extends CalFrontEnd"
{
    // ...
    private Display display;
    private List list; // add the field for the list

    public SelectDate(Display display, List list) // add list as parameter
    {
        this.display = display;
        this.list = list; // initialize field
    }
    // ... commandAction code will get the right "list" now
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:23:18.683

您的代码存在许多问题。

一只蚊子已经提到过（`extends CalFrontEnd`在`SelectData`课堂上移除）。

其次，您没有`select`在代码中调用命令`commandAction`（您调用的命令是`List.SELECT_COMMAND`which is not `select`）。所以`if (command == List.SELECT_COMMAND)` 改为`if (command == select)`.

第三个`commandAction`in的文档`CommandListener`声明它的第二个参数是`Displayable`当你用 . 声明它时`Display`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T09:49:30.937

错误是没有称为列表的变量，但是解决方案是简单地更改后退按钮下的代码

> display.setCurrent(列表)

至

> display.setCurrent(CalFrontEnd.list)

# unix - 有趣的 BC/Google 计算器差异

> ID：10439294
> 
> 赞同：0
> 
> 时间：2012-05-03T21:04:00.790
> 
> 标签：unix

有什么理由相信一个与另一个是正确的（当然除了 13 是正确的答案）？请参阅随附的屏幕截图。我很想知道这是否可重现。图片链接如下：

[http://i.stack.imgur.com/xuBUv.png](http://i.stack.imgur.com/xuBUv.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:14:20.653

如果您希望分数显示在 中的除法结果中`bc`，则需要设置`scale`为默认值以外`1`的其他值。

```
(1.61803399^7)/sqrt(5)
14
scale=10
(1.61803399^7)/sqrt(5)
12.9845972055 
```

# grails - 这是在静态映射块中访问 Grails 配置的安全方法吗？

> ID：10439295
> 
> 赞同：0
> 
> 时间：2012-05-03T21:04:05.307
> 
> 标签：grails, grails-domain-class

我正在使用 Grails 传入的 ApplicationContext 到域对象中的映射闭包来获取配置信息，就像这样

```
static mapping = { applicationContext ->
    datasources(applicationContext.getBean("grailsApplication").config.dbList)
} 
```

其中 dbList 是我自己在 Config.groovy 中的变量。

这是进入 Grails 2.0 的最佳方式吗？假设这将被传递是否安全？它有效，只是依赖于未记录的变量，我想我应该问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:44:53.153

你可以使用 grails.util.Holders

```
Holders.config.dbList 
```

# php - 在选择/取消选择复选框时，查询数据库，返回数组，然后更新数组而不刷新

> ID：10439296
> 
> 赞同：0
> 
> 时间：2012-05-03T21:04:08.563
> 
> 标签：php, mysql, ajax, jquery-ui, codeigniter

我目前正在使用 Jquery UI 来显示复选框，现在什么都不做！

您可以在此处查看当前设置：rickymason.net/letschat/main/home/

我仍在尝试理解 JSON、AJAX 和 Javascript……但我知道它们是完成这项工作所必需的：

当用户选中一个或多个复选框时，我希望它根据选中的列表刷新页面底部的线程列表。

我不需要确切的代码（尽管越多越好！），只需要对需要进行的过程的一个很好的概述。

我正在使用 codeigniter，因此使用 php 和 mysql。线程列表是基于线程表的 * 查询生成的。然后，它基于包含所有活动过滤器的会话变量进行过滤（用户输入，并且我也希望它可以通过 jquery 选择框进行选择）。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:05:44.237

这里的神奇词是`AJAX`。

*   使用 jQuery 绑定表单元素的事件

*   通过 AJAX 调用将事件发送到服务器

*   解析来自服务器的响应并使用 javascript 更新页面

# sql-server - 在 SQL Server 2008 上创建 EXTERNAL_ACCESS 程序集时出错

> ID：10439301
> 
> 赞同：1
> 
> 时间：2012-05-03T21:04:34.023
> 
> 标签：sql-server, sql-server-2008, .net-assembly

我正在尝试使用 EXTERNAL_ACCESS 权限创建程序集，但是当我运行 CREATE ASSEMBLY 行时，它给了我

```
Msg 6585, Level 16, State 1, Line 2
Could not impersonate the client during assembly file operation. 
```

我正在使用一个强名称的 dll，并在服务器上创建了非对称密钥，确保我的帐户具有所有适当的权限，但我只是不断收到该消息。可能是什么原因造成的，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:48:30.567

我最终通过向导创建了一个程序集（我没有意识到它存在）并且工作正常。

# javascript - 以百分比而不是像素确定 DIV 的高度

> ID：10439305
> 
> 赞同：0
> 
> 时间：2012-05-03T21:04:53.487
> 
> 标签：javascript, css

我有一个以像素为单位的 div (divPix) 和一个以百分比 (divPer) 为单位的 div。divPer 的高度会随着它的内容而变化。我希望浏览器重新调整 divPix 的高度以匹配 divPer 的高度。我该怎么做呢？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:29:12.160

可能可以通过快速的一次性 jQuery 来完成它。

HTML

```
<div id="divPix"></div>
<div id="divPer"></div> 
```

JavaScript

```
$(function() {
    $('#divPix').height( $('#divPer').height() );
}); 
```

# html - 喜欢按钮在页面刷新时消失

> ID：10439307
> 
> 赞同：1
> 
> 时间：2012-05-03T21:04:56.067
> 
> 标签：html, facebook-like

这是我的代码中的内容：

```
<div class="fb-like" data-send="false" data-layout="button_count" 
  data-width="450" data-show-faces="false" data-href="${appurl}">
</div> 
```

appurl 的值采用以下形式：`http://www.mysite.com/action/detail/123`

当我单击“赞”按钮时，一切正常，我可以在我的 Facebook 页面上看到更新。

现在，当我刷新页面时，喜欢按钮消失了。

但是，当我提供 appurl 时，`"http://www.mysite.com"`一切正常，包括页面刷新（我可以看到类似按钮）。

请帮助我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:35:23.770

您网站的页面是否受 .htaccess 密码保护？如果是这样，那可能就是问题所在。我自己也遇到了这个问题，在走了一段错误的路之后，我又回到了我最初的怀疑——htaccess 密码。

我并没有真正查看代码，但我假设按钮设置为在用户点击后让 FB 抓取页面。用密码屏蔽的东西，FB不能刮网页。它不会像没有被点击一样显示按钮，而是什么都不显示——这是我的，我假设你的，困惑的地方。

更改 htaccess 后，您必须等待 24 小时，以便页面在加载时被 FB 抓取。但是，您可以使用 FB 调试器 (http://developers.facebook.com/tools/debug) 手动抓取各个页面。

# javascript - jQuery .addClass 和 .fadeIn？

> ID：10439310
> 
> 赞同：12
> 
> 时间：2012-05-03T21:05:06.757
> 
> 标签：javascript, jquery, html, dom

所以，我有这些 h1 元素是链接，我想向它们添加一个类，并在元素悬停后淡入该类，然后 onMouseOut 删除该类，同时淡化该类。但是使用淡入淡出功能对我没有任何作用。看到它隐藏了元素。有任何想法吗？

```
jQuery(".categories h1 a").hover(
function () {
    jQuery(this).fadeIn("slow").addClass("active");
},
function(){
    jQuery(this).fadeOut("slow").removeClass("active");
});
}); 
```

谢谢！

**编辑：：：**

```
jQuery("h1").hover(function() {
      jQuery(this).stop().animate({ backgroundColor: "#a7bf51"}, 800);
      },function() {
      jQuery(this).stop().animate({ backgroundColor: "#FFFFFF"}, 800);
      });
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T21:20:21.203

尝试使用 jQuery UI [.addClass](http://jqueryui.com/demos/addClass/)和[.removeClass](http://jqueryui.com/demos/removeClass/)。

```
$(function() {
    $(".categories h1 a").hover(function() {
        $(this).stop(true,true).addClass("active", 500);
    }, function() {
        $(this).stop(true,true).removeClass("active", 100);
    });    
}); 
```

[**演示**](http://jsfiddle.net/NLChW/3/)（由于某种原因，它第一次没有正确设置动画（淡入淡出）......但之后它工作正常）

**编辑：**更新完整性。

您也可以使用它`.animate`来获得想要的效果。见下文，

```
$(function() {
    $(".categories h1 a").hover(function() {
        $(this).stop().animate({
            backgroundColor: "#a7bf51"
        }, 800);
    }, function() {
        $(this).stop().animate({
            backgroundColor: "#FFFFFF"
        }, 800);
    });

}); 
```

[**演示**](http://jsfiddle.net/NLChW/4/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-16T17:35:10.063

如果您不想使用 jquery UI，因为这将是一个额外的负载，您可以执行以下操作：

（在我的应用程序中使用“隐藏”引导类时对我很有用）

删除类时慢慢淡入：

```
$('.myClass').removeClass('hidden').fadeOut(0).fadeIn(10000) 
```

慢慢淡出，添加类然后淡入：

```
$('.myClass').fadeOut(1000, function(){
    $(this).addClass('hidden'); //or any other class
}).fadeIn(10000) 
```

希望这将简化某人的任务！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T21:08:21.283

听起来您希望该类的样式淡入。您应该为此查看 animate() ： http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

fadeIn 只是淡入元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T21:10:40.973

我不认为你可以在类之间交叉淡入淡出，但你可以使用该`animate`功能。 `animate`允许您在指定时间内影响任何 css 变量。

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

我知道这会从 css 文件中删除一些样式，但同样，我不认为 jQuery 会在类之间交叉淡入淡出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T21:11:18.753

如果你加载了 jQuery UI 库，你可以为 toggleClass 函数设置一个额外的参数。

通过 css 设置不透明度。

```
h1 a {
  opacity:0.8;
}

h1 a.hovered {
  opacity: 1.0;
} 
```

然后

```
jQuery(".categories h1 a").hover(function(e) {
    $(this).toggleClass('hover', 1000);
} 
```

1000 是事件的毫秒计数器。因此，当悬停一秒钟时效果应该淡出到 1.0 不透明度，不悬停时效果应该在 1 秒内淡出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T21:37:08.650

试试这个，这是 jsFiddle（[在此处输入链接描述](http://jsfiddle.net/khalifah/KzZQU/ "H1 淡入/淡出")）：

```
<script type="text/javascript">
    jQuery(".categories h1").hover(function () {
            jQuery(this).stop().animate({ "background-color": "#a7bf51"}, 800);
            jQuery(this).addClass("active");
            jQuery(this).find("a").fadeIn("slow");
        },
        function() {
            jQuery(this).stop().animate({ "background-color": "#FFFFFF"}, 800);
            jQuery(this).addClass("active");
            jQuery(this).find("a").fadeOut("slow");
    });
</script>
<style type="text/css">
    .categories h1 {
        background-color: rgb(200, 200, 200);
        display: block;
        padding: 5px;
        margin: 5px;
        width: 100px
    }
    .categories h1 a {
        display: none;
    }
</style>
<div class="categories">
    <h1><a href="#">Item 1</a></h1>
    <h1><a href="#">Item 2</a></h1>
    <h1><a href="#">Item 3</a></h1>
</div>​ 
```

# c# - 从哈希表中检索值

> ID：10439311
> 
> 赞同：0
> 
> 时间：2012-05-03T21:05:08.157
> 
> 标签：c#, asp.net, hashtable

大家晚上好/早上好，

昨天我收到了一些关于如何遍历一个表并将其值分配给一个哈希表的帮助，我现在使用下面的代码可以正常工作，下面的方法总共返回了 10 个问题

 `````
public Hashtable GetExamAnswers(int UserID)
    {
        try
        {
            SqlConnection Connection = new SQLAccess().CreateConnection();
            SqlCommand Command = new SqlCommand("GetAllExamAnswersForUser", Connection);
            Command.CommandType = System.Data.CommandType.StoredProcedure;
            Command.Parameters.AddWithValue("@UserID", UserID);
            SqlDataReader da = Command.ExecuteReader();
            int i = 1;
            while (da.Read())
            {
                Details.Add("QuestionNumber" + i, da["UserAnswer"]);
                i = i + 1;
            }
            Connection.Close();
            da.Close();
            return Details;
        }
        catch
        {
            Console.WriteLine("Problem Updating the User`s Details");
            return Details;
        }
    } 
````  `当我将鼠标悬停在“详细信息”上时，它的布局如下

 `````
Question1      4
Question2      5
Question3      Y
Question4      9
Question5      10 
```` 

`等等一直到 Question10`

 `我现在尝试从哈希表中获取值并将相关值分配给相关文本框

从上述方法返回后，这是我的代码

 `````
ExamAnswers = obj_Methods.GetExamAnswers(Convert.ToInt32(Request.QueryString["uid"]));
        if (ExamAnswers.Count > 0)
        {
            foreach (DictionaryEntry dict in ExamAnswers)
            {
              Q1Answer.Text = dict......;
              Q2Answer.Text = dict......;
              Q3Answer.Text = dict......;

            }
        } 
````  `ExamAnswers 是一个哈希表并保存返回的值，我试图将 Q1answer.Text 分配给 ExamAnswers 中 Question1 的值，但我在努力实现这一目标，我想说

 `````
Q1Answer.Text = ExamAnswers.key["Question1"].value; 
```` 

`但是没有用，有人可以帮助我解决问题。`

 `谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:26:38.350

实际上，在这种情况下，您可能想使用一个数组来存储您的答案。在此示例中使用哈希表没有任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:09:18.817

这不是您将使用`foreach`语句的情况，因为您提前知道键并且它们仅映射到一个控件。您只需执行您发布的代码，其中

```
Q1Answer.Text = ExamAnswers["Question1"].ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:09:27.963

做起来更简单：

```
 Hashtable hash = new Hashtable();
        hash.Add(1, "a");
        hash.Add(2, "b");

        string a = hash[1].ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T21:12:23.003

您将密钥设置为`'QuestionNumber' + i`而不是`'Question' + i`在您的第一个代码段中。确保您正在寻找正确的键值。

此外，您不需要遍历 ExamAnswers：

```
ExamAnswers = obj_Methods.GetExamAnswers(Convert.ToInt32(Request.QueryString["uid"]));

if (ExamAnswers.Count > 0)
{
      Q1Answer.Text = ExamAnswers["QuestionNumber1"].value;
      Q2Answer.Text = ExamAnswers["QuestionNumber2"].value;
      Q3Answer.Text = ExamAnswers["QuestionNumber3"].value;
      ...
} 
```````````

# file - 如何从手指非标准列中进行选择

> ID：10439312
> 
> 赞同：0
> 
> 时间：2012-05-03T21:05:08.963
> 
> 标签：file, bash, sed, awk

我有一个通过手指命令获得的文件，我只想保留用户的姓名、姓氏和访问点。问题是一些用户空闲并且他们有一个额外的列，所以访问点列不是标准的，所以我可以使用 awk print $z。

有什么办法可以做到吗？

后来我想我是否可以选择那个额外的字段并稍后删除它，`sed`或者`awk`但是如何？正如您所看到的，有些线路有我用手指选择的空闲时间，有些线路不会导致用户没有空闲。我只想保留姓氏和接入点。谢谢！

该文件是这样的：

```
Name1 surname1 22:04 (athedsl-xxxxxxxxx.home.otenet.gr)
Name2 surname2 (xxxxxxxxxx.dsl.hol.gr)
.
.
. 
```

等等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:12:58.113

我不知道 sed/awk 但你可以用 perl 单线做到这一点：

```
cat file | perl -ne 'if (/(\w+)\s+(\w+).*\((.*)\)/) { print "$1 $2 $3\n" }' 
```

Perl 现在几乎在所有 *nix 系统上运行，所以希望它对你有用。使用您提供的数据，您将获得：

```
bob surname1 athedsl-xxxxxxxxx.home.otenet.gr
john surname2 xxxxxxxxxx.dsl.hol.gr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:08:02.233

这里有几种方法：

```
awk '{gsub(/^\(|\)$/, "", $NF); print $1, $2, $NF}'

awk 'NF == 4 {$3 = ""}1' 
```

第二个将括号留在原处，并留下一个额外的空间来代替空闲时间（如果有的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:01:52.483

我不太熟悉该`finger`命令，但我认为您可以使用以下方法解决此`awk`问题：

`finger | awk 'NR >= 2 { gsub ("[\\(|\\)]","",$NF); print $1"\t"$3"\t"$NF }'`

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:27:27.170

这可能对您有用：

```
finger | sed '/\([0-9]*:[0-9]*\s*\)\?(\([^)]*\))$/!d;s//\2/'
Name1 surname1 athedsl-xxxxxxxxx.home.otenet.gr
Name2 surname2 xxxxxxxxxx.dsl.hol.gr 
```

# grails - 使用 Grails 重新加载引导程序

> ID：10439314
> 
> 赞同：11
> 
> 时间：2012-05-03T21:05:22.730
> 
> 标签：grails

Grails 中有没有办法在更改 BootStrap.groovy 的内容后运行它而不重新启动应用程序？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T22:48:33.500

您可以使用[`console`插件](http://grails.org/plugin/console)来做到这一点。我强烈推荐这个插件用于任何开发环境，因为它对于在正在运行的服务器中运行临时代码非常有用。

要重新运行 BootStrap`init`闭包，请浏览至基于 Web 的控制台`http://localhost:8080/appname/console`。在控制台中输入以下内容：

```
def servletCtx = org.codehaus.groovy.grails.web.context.ServletContextHolder.servletContext
def myBootstrapArtefact = grailsApplication.getArtefacts('Bootstrap')[-1]
myBootstrapArtefact.referenceInstance.init(servletCtx) 
```

# java - 在 Java 中创建和绘制巨大的（缓冲的）图像

> ID：10439324
> 
> 赞同：6
> 
> 时间：2012-05-03T21:05:53.137
> 
> 标签：java, image-processing, java-2d

我正在开发一个绘制矩阵的应用程序 - 使用 Java 2D - 它可以变得非常大，例如 30000 x 30000 像素。目前我已经对 BufferedImage 进行了一些试验，但创建如此巨大的 BufferedImage 会导致内存不足异常，即使在扩大堆时也是如此。现在我正在考虑将图像分成几个图像/区域，当我在某个区域完成时将其写入磁盘并创建一个新区域/BufferedImage 并继续绘制。我对其他人如何处理这个问题的想法很感兴趣。我已经离开 Java 一段时间了，所以欢迎任何具体的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:28:01.300

我为一个新的/小型的开源项目做出了贡献，该项目可能非常适合您的需求。

该项目是[Glimpse](http://glimpse.metsci.com)。它旨在帮助在 Java 中构建 2D 数据可视化，重点是很好地处理大型数据集并使其易于提供实时交互性以允许轻松探索数据。

![瞥见头像](../Images/5f106d342dc0fe5bc378bb1ced472a18.png)

它利用[OpenGL](http://www.opengl.org/)来利用现代 GPU 上的硬件特性，如纹理内存和着色器来实现上述目标。因此，如果您打算使用 Java2D，那么这对您不起作用。但是，Glimpse 面板可以与其他 Swing 组件并排放置，因此可以轻松放入现有的 Swing GUI。唯一需要注意的是，您需要一块像样的显卡。

该图像是一个大型数据矩阵的示例，其颜色通过右侧的色标进行动态调整（矩阵数据存储在 GPU 纹理中，动态重新着色通过自定义着色器完成）。此示例的来源是[HeatMapExample.java](https://github.com/metsci/glimpse/blob/master/core-examples/src/main/java/com/metsci/glimpse/examples/basic/HeatMapExample.java)。还有许多其他类似的示例为使用 Glimpse 的其他功能提供了起点。

您可以在[glimpse.metsci.com](http://glimpse.metsci.com)了解更多信息。首页上有一个介绍视频，以及[Java WebStart 示例](http://metsci.github.com/glimpse/webstart.html)。源代码托管在[GitHub 上](https://github.com/metsci/glimpse)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:14:39.067

如果您只想在磁盘上生成图像，请查看[pngj](https://code.google.com/p/pngj/) - 它可以毫无问题地生成*大*png 图像，因为它会在可用时将像素行写入磁盘。该 api 有点特定于 png，但它并不太复杂（在使用它之前阅读 png 图像格式的一些背景可能会有所帮助）。

# c# - 即使对于 ThresholdType.Otsu，opencvsharp Cv.Threshold 也会返回 void

> ID：10439329
> 
> 赞同：0
> 
> 时间：2012-05-03T21:06:02.500
> 
> 标签：c#, c++, opencv, threshold

所以我在 OpenCV 的 C++ 版本中使用了 cvThreshold，当使用 CV_THRESHOLD_OTSU 时，我得到一个双倍的回报，告诉我使用的阈值是什么。

在 OpenCVSharp 中，该函数被定义为仅返回 void。是我在滥用它还是我们不再获得该选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:48:23.777

OpenCVsharp 中的 Threshold 函数调用被编写为返回不会处理 thresholdType_Otsu 的 void。

它需要修改为

```
public static double Threshold( CvArr src, CvArr dst, double threshold, double max_value, ThresholdType threshold_type )
    {
        if (src == null)
            throw new ArgumentNullException("src");
        if (dst == null)
            throw new ArgumentNullException("dst");
        return CvInvoke.cvThreshold(src.CvPtr, dst.CvPtr, threshold, max_value, threshold_type);
    } 
```

这适用于返回阈值以及返回无效的其他情况。

# jquery - 为什么用改变字体大小 我昨天通过做好教程 开始学习 jQuery 我现在在教程 问问题

> ID：10439331
> 
> 赞同：1
> 
> 时间：2012-05-03T21:06:19.290
> 
> 标签：jquery

我昨天通过做好[教程](http://www.youtube.com/playlist?list=PL6B08BAA57B5C7810&feature=plcp)
开始学习 jQuery 我现在在教程[28](http://www.youtube.com/watch?v=jPF0h6AryfY&feature=autoplay&list=PL6B08BAA57B5C7810&playnext=1) /200 上。这似乎是一个错误，所以我为此做了一个 jsFiddles。

示例代码：[jsFiddles](http://jsfiddle.net/zLvAr/10/)

**问题：** 为什么输入按钮不与锚共享类似的功能，即缩小或增加段落大小？我的意思是我可能永远不会这样做，但为什么会发生呢？甚至是错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:12:25.430

这些按钮实际上正在工作（暂时）。问题是您使用“提交”作为输入类型，这导致表单被提交并重新呈现页面。

要修复您的示例，请将输入类型更改为“按钮”或添加 event.preventDefault(); 到每个点击处理程序（您还需要添加“事件”作为每个处理程序的参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:14:37.290

他们会这样做，但是当您单击一个按钮时，它将提交您的表单。这不是你想要的（我假设）。尝试在单击处理程序函数中添加对 preventDefault 的调用。请参阅我对您的 jsfiddle 的修改。

[http://jsfiddle.net/zLvAr/10/](http://jsfiddle.net/zLvAr/10/)

# ios - 创建后更改注释图像

> ID：10439335
> 
> 赞同：5
> 
> 时间：2012-05-03T21:06:42.317
> 
> 标签：ios, ios5, mkmapview

我有一个自定义注释，它使用 viewForAnnotation 委托方法根据注释的类型设置其图像。我只使用 1 个表示汽车移动的注释，并且想要在检测到汽车移动和停止时更改图像。除了删除我的注释并重新添加它会导致眨眼之外，我还能怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T12:27:12.047

无论您在哪里检测到汽车的状态发生了变化，都可以使用`MKMapView` *实例*方法检索注解的当前视图`viewForAnnotation:`。这与`mapView:viewForAnnotation:` *委托*方法不同。

获取注解的当前视图后，您可以修改其属性，包括`image`.

还要确保委托方法具有基于汽车注释状态`mapView:viewForAnnotation:`设置的完全相同的条件。`image`您可能希望将逻辑放在从两个地方（状态更改和委托方法）调用的通用方法中，这样代码就不会重复。

例如，当状态发生变化时，您可能有：

```
//carAnnotation is your id<MKAnnotation> object
MKAnnotationView *av = [mapView viewForAnnotation:carAnnotation];
if (carAnnotation.isMoving)
    av.image = [UIImage imageNamed:@"moving.png"];
else
    av.image = [UIImage imageNamed:@"stopped.png"]; 
```

该`if`语句（或您必须设置的任何逻辑`image`）也是`viewForAnnotation`委托方法中应该包含的部分。

# hash - .NET 哈希。SHA512Managed() 对象和 HMACSHA512 对象之间的区别

> ID：10439336
> 
> 赞同：0
> 
> 时间：2012-05-03T21:06:47.607
> 
> 标签：hash

我正在.NET 中实现加盐/散列。我遇到了两种不同类型的对象，我想知道它们之间有什么区别。在安全方面，我最大的问题/担忧是一个比另一个更好？

我能找到的唯一区别是 HMACSHA512 可以接收密钥，而 SHA512Managed() 对象不能。

谢谢

# xml - 为什么我用 XML 编码的 RSS 提要不能正常工作？

> ID：10439337
> 
> 赞同：0
> 
> 时间：2012-05-03T21:06:54.470
> 
> 标签：xml, rss

这是它的[链接](http://nicolaelvin.com/authoring/nicolaElvinsPortfolio.xml)。它只显示标题字段，但据我所知，其余部分是正确的。这一定与我添加的图像有关，因为这似乎是它停止工作的地方。我添加了 xml 树的屏幕截图。

![在此处输入图像描述](../Images/74b427dd8d0cec12fa65438537e65d71.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:23:58.440

我已经解决了，这是因为你只能在通道内有图像节点，而不是在项目中。

# http - Auth cookie 不同的域问题

> ID：10439339
> 
> 赞同：0
> 
> 时间：2012-05-03T21:06:56.463
> 
> 标签：http, cookies, cross-browser, single-sign-on

我正在尝试与供应商实施 SSO，他们要求我发送 HTTP 请求。在这个 HTTP 请求中，有一个用户名和密码的自定义标头，这是我传入 u/p 信息的地方。如果用户通过了身份验证，那么他们会发回一个“auth cookie”。我试图理解一些事情：

1.  这个身份验证cookie到底是什么？这是一个标准的东西吗？或者这意味着它是一个具有身份验证信息的cookie？

2.  HTTP 请求被发送到与我不同的域。即，发送请求的脚本在a.com 上，而我需要发送HTTP 请求的URL 是b.com。供应商说我应该只是“发送”他们在响应中返回的 cookie 给用户。这不起作用，但我需要了解原因 - cookie 的域是什么？是 a.com 还是 b.com？如果它的 b.com，那会起作用吗，因为实际进行调用的脚本将在 a.com 中，并且大多数浏览器不允许第三方域 cookie。还是因为我试图用 a.com 编写一个 cookie，而该 cookie 已经包含 b.com 的数据，所以它失败了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:48:47.080

想通了。返回的 HTTP 只是另一个自定义标头值，而不是 cookie。因此，我们必须编写自己的 cookie。但是，很明显，其他域无法识别 cookie。所以我们实际上在IIS中构建了一个反向代理，让a.com这个域通过代理访问站点，叫做xacom，永远看不到b.com。所以写入的cookie被该域识别。

# iphone - 添加 UITextFields 的数值内容

> ID：10439344
> 
> 赞同：0
> 
> 时间：2012-05-03T21:07:11.073
> 
> 标签：iphone, objective-c, uitextfield, uilabel

我有四个单独的 UITextFields，我想将它们全部添加，然后在 UILabel 中显示内容，下面是当前代码：

```
- (void)updateString {

    self.string1 = textField1.text;
    self.string2 = textField2.text;
    self.string3 = textField3.text;
    self.string4 = textField4.text;
    self.string5 = textField5.text;        

    label.text = self.total; // total is an NSString and label is a UILabel

} 
```

我无法将每个 textField1/2/3 中的数值相加...并将值存储在总计中，然后更新标签。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:23:02.230

NSString 上有一个方法`-intValue`。这就是你想要使用的。

[检查NSString 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)中的“获取数值”部分

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T22:14:13.267

```
int totalValue = [textField1.text intValue] + [textField2.text intValue]...;

label.text = [NSString stringWithFormat:@"The total value is %d", totalValue]; 
```

# javascript - Raphael.js 在哪里存储使用 element.data() 方法设置的元素数据？

> ID：10439345
> 
> 赞同：4
> 
> 时间：2012-05-03T21:07:14.007
> 
> 标签：javascript, raphael

我在画布上有一堆 Raphael 元素对象，并且每个对象都有关联数据，如下所示：

```
element.data('dataVal',x); 
```

在上面的例子中，我想知道 x 存储在哪里。我一直在查看 Raphael.js 的源代码，并专注于本节：

```
elproto.data = function (key, value) {
    var data = eldata[this.id] = eldata[this.id] || {};
    if (arguments.length == 1) {
        if (R.is(key, "object")) {
            for (var i in key) if (key[has](i)) {
                this.data(i, key[i]);
            }
            return this;
        }
        eve("raphael.data.get." + this.id, this, data[key], key);
        return data[key];
    }
    data[key] = value;
    eve("raphael.data.set." + this.id, this, value, key);
    return this;
}; 
```

所以，我的预感是“eldata”是 Raphael 纸对象的属性，“eldata”包含每个 Raphael 元素的对象，数据存储在这些对象中。

从本质上讲，我的问题是：一旦我创建了 Raphael 画布、添加元素并向这些元素添加数据，我将如何访问数据（不使用 Raphael 函数）？我尝试了一些简单的东西，比如寻找 R.eldata（其中 R 是 Raphael 画布），但这并没有什么成果。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:23:38.110

`eldata`是在闭包中定义[的局部变量](https://github.com/DmitryBaranovskiy/raphael/blob/v2.1.0/raphael.js#L382)（v2.1.0 左侧的行号）：

```
 233|  (function () {
....|
 254|      var loaded,
....|
 382|          eldata = {},
....|
2396|      elproto.data = function (key, value) {
....|
2413|      elproto.removeData = function (key) {
....|
3743|  })(); 
```

因为它是封闭的，它只能被同一个闭包中定义的函数访问。因此，您将不得不使用 Raphael`data`和`removeData`方法来访问它。

# c# - 如何从 WinRT WebView 控件获取 RedirectURL

> ID：10439346
> 
> 赞同：2
> 
> 时间：2012-05-03T21:07:30.020
> 
> 标签：c#, webview, windows-runtime, winrt-xaml

我想通过服务上的 OAuth 对 Windows 8 应用程序进行身份验证。这通过使用 WebView 控件并使用正确的 URL 将用户导航到进行身份验证的服务来工作。

如果用户通过了服务的身份验证，他将被重定向到成功页面。

我想获取有关此重定向的信息，以便我可以自动启动应用程序。

我已经尝试了加载页面时触发的 LoadComplete 事件，但是我只得到请求 uri，而不是重定向 uri。

```
webView.LoadCompleted += webView_LoadCompleted;
webView.Navigate(new Uri("service uri)); 
```

有没有人知道如何获取重定向 url，或者至少是页面内容（我可以解析并查找类似“太好了，您已通过身份验证”之类的内容）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:27:52.813

对此有一个内置机制，对用户来说更安全（应用程序无法窥探密码）。请参阅 Web 身份验证代理： [http ://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:12:02.430

您可以通过以下方式获取 WebView 页面内容：

```
private void webView_LoadCompleted_1(object sender, NavigationEventArgs e)
{
    WebView webView = sender as WebView;
    string html = webView.InvokeScript("eval", new string[] {"document.documentElement.outerHTML;"});

    // Here you can parse html ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-19T02:50:17.217

您可以使用以下方法重定向到一个 URL，然后阻止进一步的重定向。

```
WebView_NavigationStarting(WebView sender, WebViewNavigationStartingEventArgs args)
{
    var url = args.Uri.ToString();
    if(url == "")
        args.Cancel = true;
} 
```

# php - PHP中的PDF表单填写

> ID：10439351
> 
> 赞同：2
> 
> 时间：2012-05-03T21:08:10.847
> 
> 标签：php, pdf, adobe, fdf

首先，我知道以前有人问过这个问题。但是，对于这个复杂的问题，我想出了自己的解决方案。我是来征求意见的，看看有没有可以改进的地方。此解决方案假定 pdf 已包含可填写字段并生成模板文件以供重复使用（生成一次，多次填写）。

```
//explicit path to pdftk (if not in your environment PATH)
$pdftk = '/opt/pdflabs/pdftk/bin/pdftk';

//Step 1
//Specify the target pdf
$pdfFile = 'example.pdf';
$fdfFile = substr_replace($pdfFile , 'fdf', strrpos($pdfFile , '.') +1); //same name, switch extension to fdf
$fdfTemplateFile = substr($fdfFile, 0, strrpos($fdfFile, '.')) . '_template.fdf';
$pdfExampleFile = substr($pdfFile, 0, strrpos($pdfFile, '.')) . '_example.pdf';

//This generates the "FDF" file as a sample using Adobe's format with a key/value pair entry for each field
passthru($pdftk . ' ' . $pdfFile . ' generate_fdf output ' . $fdfFile . ' 2> generate_fdf.log');

//Step 2
//Using the newly created fdf file, we need to scan through the file for "/V (þÿ)" which is
//Adobe's default empty value (note: at least in my experience). We want to scan through
//and replace them with dummy values. I'm going to use numeric values, but you could also pull
//the /T (þÿ F I E L D _ N A M E). The keys will need to be massaged to format correctly as a
//key, but nevertheless it should work
function field_replace($matches)
{
    static $n = 0;
    ++$n;

    return '/V (:Field' . $n . ':)';
}

$fdfContents = file_get_contents($fdfFile);
$fdfReplacedContents = preg_replace_callback('|\/V \(.+\)|', 'field_replace', $fdfContents);
file_put_contents($fdfTemplateFile, $fdfReplacedContents);

//Step 3
//To generate an example pdf in order to examine which fields correspond to which values,
//use pdftk to combine the fdf file with the original pdf to fill it with the dummy values
//that we generated

passthru($pdftk . ' ' . $pdfFile . ' fill_form ' . $fdfTemplateFile . ' output ' . $pdfExampleFile . ' 2> fill_form.log');

//You should now have a working example file with which you can map key/value pairs using an array
//and str_replace (or preg_replace). Once you have this template fdf file and the original pdf, all you
//need to do is load the template fdf into memory, replace all of the fields (including blank values to eliminate)
//the dummy if there is nothing to output), save to a temporary fdf file, then use pdftk's fill_form
//function to generate the new pdf with your values.
?> 
```

# jquery - 用 jQuery 替换样式表

> ID：10439352
> 
> 赞同：1
> 
> 时间：2012-05-03T21:08:10.937
> 
> 标签：jquery, html, css, stylesheet

替换是实时完成的——用户点击某些东西，样式会改变：

```
$('link#mystyle').attr('disabled', 'disabled');
$('link#mystyle').remove();

if(new_style){
  $('head').append('<link rel="stylesheet" id="mystyle" href="' 
                    + new_style +'.css" type="text/css" />');

} 
```

问题是样式表链接后默认有一个内联样式块：

```
<style>
  ...
</style> 
```

而且我上面的代码将删除原始样式表，并在样式块之后附加新样式表，因此新样式表将覆盖样式块中的一些规则。

我不希望这样，所以我可以以某种方式将我的新样式附加到同一个地方，因此新样式表中的规则与初始样式表规则具有相同的优先级吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T21:15:27.270

更好的解决方案是将您的 css 格式化为根据 body 标签上的高级类或 id 变化：

```
/*Style 1*/
body.style1 h1{...}
body.style1 ...

/*Style 2*/
body.style2 h1{...}
body.style2 ... 
```

然后，您所要做的就是更改 body 标签上的类：

```
$('#something-to-click').click(function(){
  ($('body').hasClass('style1')){
    $('body').addClass('style2').removeClass('style1');
  }else{    
    $('body').addClass('style1').removeClass('style2');
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T21:20:29.690

@Kroehre 是对的，但是如果您坚持按照自己的方式进行操作，则可以使用[http://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)方法。

```
$('link#mystyle').replaceWith('<link rel="stylesheet" id="mystyle" href="' 
                + new_style +'.css" type="text/css" />'); 
```

应该做你想做的。

# sum - 如何在获胜网格的页脚中显示摘要而不在页眉中显示 Sigma？

> ID：10439353
> 
> 赞同：3
> 
> 时间：2012-05-03T21:08:13.790
> 
> 标签：sum, infragistics, ultrawingrid

我正在使用 Infragistics UltraWinGrid 并希望能够显示几列的总和。我通过允许行摘要来实现这一点。但是，我只希望他们能够看到总和，而不是拥有所有其他疯狂的选项以及标题中的那个小 sigma。如何在将总和保持在底部的同时摆脱这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:58:11.823

您应该以这种方式设置 DisplayLayout.Override.AllowRowSummaries 属性：

```
DisplayLayout.Override.AllowRowSummaries = AllowRowSummaries.Default; 
```

然后使用这样的代码来创建您的摘要（在创建另一个同名摘要之前需要检查）

```
private void BuildCurrencySummary(string name, UltraGridColumn col)
{
    SummarySettings ss = grd.DisplayLayout.Bands[0].Summaries.Add(name, SummaryType.Sum, col);
    ss.SummaryPositionColumn = col;
    ss.SummaryPosition = SummaryPosition.UseSummaryPositionColumn;
    ss.Appearance.FontData.Bold = Infragistics.Win.DefaultableBoolean.True;
    ss.Appearance.ForeColor = Color.Black;
    ss.Appearance.TextHAlign = HAlign.Right;
    ss.DisplayFormat = "{0:C}";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:27:55.960

来自[基础设施论坛](http://www.infragistics.com/community/forums/t/25250.aspx)：

您仍然可以在不设置 AllowRowSummaries 属性的情况下将摘要应用于列。

AllowRowSummaries 的目的是显示（或不显示）用户建立自己的摘要的界面。这是您看到的“sigma”符号。

在 Override 对象中，将 AllowRowSummaries 属性设置为 False。

```
UltraGrid1.DisplayLayout.Override.AllowRowSummaries = Infragistics.Win.UltraWinGrid.AllowRowSummaries.[False] 
```

# php - php解析html dom并计算特定行

> ID：10439354
> 
> 赞同：1
> 
> 时间：2012-05-03T21:08:19.957
> 
> 标签：php, parsing, dom, preg-match, preg-match-all

我正在使用“ **Simple php DOM Parser** ”来解析一个 html 表并计算它的行​​数。

我解决了用这段代码计算其中的所有行（tr）：

```
$rows = $table->find('.trClass');
$count = count($rows);
echo $count; 
```

我正确地得到了表中所有行的数量。

现在我只想计算包含特定**td**（带有特定字符串）的行。
我们可以假设我只想用这个 td 计算行数：

```
<td class="tdClass" align="center" nowrap="">TARGET STRING</td> 
```

如何修改第一个代码以匹配此范围？

我尝试使用“preg_match”或“preg_match_all”，但我没有太多经验，所以我错过了正确的语法..我想。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:19:01.483

怎么样：

```
<?php
$targetString = 'TARGET STRING';
$rows = $table->find('.trClass');

$count = 0;
foreach($rows as $row) {
    foreach($row->find('td') as $td) {
        if ($td->innertext === $targetString) {
            $count++;
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:20:33.233

```
$target = 'TARGET STRING';

$n_matchingrows = 0;

$rows = $table->find('tr.trClass');
foreach($rows as $row) {
    $cell = $row->find('td.tdClass[align=center][nowrap=""]', 0);
    if ($cell and $cell->innertext===$target) {
       $n_matchingrows += 1;
    }
} 
```

# iphone - 当应用程序加载时，将 UIButton 从屏幕外动画化到位

> ID：10439364
> 
> 赞同：0
> 
> 时间：2012-05-03T21:09:44.800
> 
> 标签：iphone, objective-c, xcode, ipad, animation

我在 iPad 应用程序中遇到了一些动画问题。应用程序启动时，我有四个 UIButtons 在屏幕上。

我基本上希望应用程序加载和四个按钮从屏幕顶部一次动画到视图中到位。

我有以下哪种动画，但我正在努力解决它。

```
-(void)viewWillAppear:(BOOL)animated
{
    CGPoint newLeftCenter = CGPointMake( 15.0f + myCocoButton.frame.size.width / 2.0f, myCocoButton.center.y);
    [UIView beginAnimations:nil context:nil]; 
    [UIView setAnimationDuration:4.0f];
    myCocoButton.center = newLeftCenter;
    [UIView commitAnimations];

} 
```

我拥有的当前代码确实为按钮设置了动画，但不是以我想要的方式。我无法弄清楚如何将它实际放置在我想要的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:34:50.077

在您的故事板中，将您的按钮布置在它们的最终位置。

在`viewWillAppear:`中，保存每个按钮的位置并将按钮移出屏幕：

```
@implementation MyViewController {
    CGPoint _button0TrueCenter;
    CGPoint _button1TrueCenter;
    CGPoint _button2TrueCenter;
    CGPoint _button3TrueCenter;
}

static void moveButtonAndSaveCenter(UIButton *button, CGPoint offscreenCenter, CGPoint *trueCenter) {
    *trueCenter = button.center;
    button.center = offscreenCenter;
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    if (animated) {
        moveButtonAndSaveCenter(self.button0, CGPointMake(-100, 100), &_button0TrueCenter);
        moveButtonAndSaveCenter(self.button1, CGPointMake(420, 100), &_button1TrueCenter);
        moveButtonAndSaveCenter(self.button2, CGPointMake(-100, 200), &_button2TrueCenter);
        moveButtonAndSaveCenter(self.button3, CGPointMake(420, 200), &_button3TrueCenter);
    }
} 
```

然后在 中`viewDidAppear:`，将它们设置回原来的位置：

```
static void animateButton(UIButton *button, CGPoint newCenter, NSTimeInterval delay) {
    [UIView animateWithDuration:.25 delay:delay options:0 animations:^{
        button.center = newCenter;
    } completion:nil];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    if (animated) {
        animateButton(self.button0, _button0TrueCenter, 0);
        animateButton(self.button1, _button1TrueCenter, 0.2);
        animateButton(self.button2, _button2TrueCenter, 0.4);
        animateButton(self.button3, _button3TrueCenter, 0.6);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T23:49:54.933

假设你有你的按钮在一个数组中，你可以做这样的事情（你的项目应该在笔尖的正确结束位置）

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    CGAffineTransform transform = CGAffineTransformMakeTranslation(0.f, -200.f); 

    [self.buttons enumerateObjectsUsingBlock:^(UIButton *button, NSUInteger idx, BOOL *stop) {

       button.transform = transform; // This translates the view's off the top of the screen

       [UIView animateWithDuration:0.25f
                             delay:0.25f * idx
                           options:UIViewAnimationCurveEaseOut            // No point doing easeIn as the objects are offscreen anyway
                        animations:^{
                            button.transform = CGAffineTransformIdentity;
                      } completion:nil];

       }];
} 
```

这将每次动画。您可能需要添加一个 ivar 来阻止这种情况发生，并在运行一次后将其设置为 YES。我在乱搞时发现的问题是，它调用的时候`viewDidAppear:` `animated`是`NO`第一次加载，所以我不能用那个 BOOL 作为检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:15:18.100

我写了一篇关于这个主题的博客文章：[http ://www.roostersoftstudios.com/2011/07/01/iphone-dev-performing-sequential-uiview-animations/](http://www.roostersoftstudios.com/2011/07/01/iphone-dev-performing-sequential-uiview-animations/)

我在那里有一个示例项目。

您可以将动画链接起来，当一个动画完成时，它会调用下一个动画的函数。您能否更具体地说明您遇到的具体问题？

# sql-server - 在 SQL Server 中合并两个表

> ID：10439365
> 
> 赞同：1
> 
> 时间：2012-05-03T21:09:59.430
> 
> 标签：sql-server, tsql

我有两个表，每个表都有一些相同的列。但是，每个表还包含唯一的数据。（类似的数据包括行名）。

我需要做的是将表二中的数据添加到表一中的匹配行（匹配名称列）。

有没有办法做到这一点？

我需要表 2 中的东西进入名称匹配的表 1：

![书呆子](../Images/d78ef2a420f6e367a1a1d1dca78a6f59.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:18:45.260

以下查询应返回所有匹配的行，其中包含两个表中的列。请注意，将排除任何唯一行（仅存在于表一或表二中）。

```
SELECT 
  one.matchingColum, 
  one.oddColum, 
  two.evenColumn
FROM one
JOIN two on one.matchingColumn = two.matchingColumn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:15:08.843

如果数据类型相同，那么你可以做一个联合

```
SELECT *
FROM table1
UNION
SELECT *
FROM table2 
```

如果数据类型不同并且您有一个可以加入的字段，那么您可以进行 JOIN

```
SELECT *
FROM table1 t1
LEFT JOIN table2 t2
    ON t1.id = t2.id 
```

# jsf-2 - inputHidden 绑定到支持 bean 中的长 id 字段

> ID：10439366
> 
> 赞同：1
> 
> 时间：2012-05-03T21:10:03.433
> 
> 标签：jsf-2

只是想知道如何设置隐藏字段值，以便当我提交表单时，JSF 将其设置为我的 CDI 管理的 bean 中的对象中的 id。

我的 bean 被称为“discussionManager”，其中有一个名为“discussion”的对象，它是一个实体，因此具有 Long 类型的 ID。

我需要这个 ID，这样我才能查到它并用它做一些事情。但是，JSF 似乎不喜欢数字隐藏字段。不过，字符串字段很好。当然它与转换器或绑定属性有关，但无法获取语法。这是我正在尝试的最简单的形式。

```
<h:inputHidden id="discussionId" value="#{viewDiscussionBean.discussion.id}"/> 
```

我尝试了很多变化。谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:18:07.287

您确实需要明确指定转换器。JSF 内置[`LongConverter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/LongConverter.html)是合适的。

```
<h:inputHidden id="discussionId" value="#{viewDiscussionBean.discussion.id}" converter="javax.faces.Long" /> 
```

# python - 循环读取文件中的特定行（优化）

> ID：10439368
> 
> 赞同：1
> 
> 时间：2012-05-03T21:10:38.690
> 
> 标签：python

我正在从文本文件中读取特定的行。这是我的代码：

```
file.seek(0)
for j, ln in enumerate(file):
   if j == line_number
      line = ln   # i'm getting the line
      break 
```

我在“循环”中使用此代码需要很长时间，其中 line_number 每次都是随机的**。**我也试过 linecache.getline() 但它需要每轮调用 linecache.clearcache() ，所以它不是更好。

有没有更快的解决方案？内存无所谓。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:13:05.813

如果内存真的无关紧要：

```
lines = file.readlines()

line = lines[line_number] 
```

您一次读取文件，将其存储在内存中，然后从那里访问它。

编辑：内存很重要：

```
from itertools import dropwhile

line = next(dropwhile(lambda x: x[0]==line_number, enumerate(file)))[1] 
```

我们可以使用`itertools.dropwhile()`忽略这些行，直到找到我们需要的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:18:55.387

**在循环上方使用它：**

```
with open('in.txt') as f:
 lines=[ln for ln in f] 
```

**现在访问循环内的任何行号：**

```
lines[line_number] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:29:20.647

```
def getLine(fileObj, lineNo):
    [fileObj.readline() for i in xrange(lineNo - 1)]
    return fileObj.readline() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T08:49:17.980

其他做法

```
import linecache
linecache.getline('myfile', line_number) 
```

# c - C中指针星的用法

> ID：10439370
> 
> 赞同：3
> 
> 时间：2012-05-03T21:10:42.300
> 
> 标签：c, pointers

我问了一个问题：[使用 C 通过引用传递数组](https://stackoverflow.com/questions/10438625/pass-array-by-reference-using-c)。我意识到我的问题是 C 中指针星的使用。最终结果证明，这种方法适用于我的程序：

```
#include <stdio.h>

void FillArray(int** myArray)
{   
     *myArray = (int*) malloc(sizeof(int) * 2);

     (*myArray)[0] = 1;
     (*myArray)[1] = 2;
}

int main()
{
     int* myArray = NULL;
     FillArray(& myArray);  
     printf("%d", myArray[0]);
     return 0;
} 
```

到那时为止，一切都很好。然后，我修改了*FillArray()*函数，如下所示，以获得更好的代码可读性：

```
#include <stdio.h>

void FillArray(int** myArray)
{
     int* temp = (*myArray);

     temp = (int*) malloc(sizeof(int) * 2);
     temp[0] = 1;
     temp[1] = 2;
}

int main()
{
     int* myArray = NULL;
     FillArray(& myArray);  
     printf("%d", myArray[0]);
     return 0;
} 
```

现在，我在 printf 行收到以下运行时错误：

> Trial.exe 中 0x773115de 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

尽管我不是 C 专家，但进行这种修改似乎是合法的。但是，显然它不起作用。语法是不是有点混乱？我在这里想念什么吗？

感谢您提供有用的答案，

坐下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:15:02.267

`temp`获得 的地址的副本`myArray`，但随后您将一些`malloc`ed 内存分配给`temp`，因此原始分配毫无意义并且没有持久效果。然后您修改`malloc`ed 内存，但这根本没有改变`myArray`。要更改`myArray`，`main`您必须指定

```
*myArray = temp; 
```

在结束时`FillArray`。

```
void FillArray(int** myArray)
{
     int* temp;
     temp = (int*) malloc(sizeof(int) * 2);
     temp[0] = 1;
     temp[1] = 2;
     *myArray = temp;
} 
```

做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:14:25.187

您将 malloc 的缓冲区分配给堆栈上的一个局部变量，然后在返回时泄漏该内存。您永远不会影响传递给函数的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:16:15.353

```
int* temp = (*myArray); 
```

`temp`是一个局部变量。对其进行的任何修改都不会影响原件。

```
temp = (int*) malloc(sizeof(int) * 2);  // Will not affect *myArray 
```

这或多或少像——

```
void foo( int * ptr )
{
   ptr = malloc( sizeof(int) );
}

int *a ;
foo(a);   // Does `a` get allocated too ? NO. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T21:21:33.840

这对我有用：

```
#include <stdio.h>

void FillArray(int** myArray)
{
    (*myArray) = (int*) malloc(sizeof(int) * 2);
    (*myArray)[0] = 1;
    (*myArray)[1] = 2;
}

int main()
{
    int* myArray = NULL;
    FillArray(& myArray);  
    printf("%d\n", myArray[0]);
    printf("%d\n", myArray[1]);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T21:37:25.610

```
int* temp = (*myArray); 
```

这条线是问题的根本原因，让我们看看这条线是什么。

它说取消引用`myArray`并将结果值分配给`temp`is an `int *`，并且由于`myArray`is 和`int **`，取消引用将导致 a `int *`。但是您不能取消引用未指向任何位置的指针，因为当您将 myArray 作为参数传递时，它是 NULL 并且当您执行 (*myArray) 时，它会尝试访问 myArray 指向的内存位置（这是 no-where因为 myArray 是 NULL）因此访问冲突读取位置 0x00000000，这意味着您正在尝试取消引用 NULL 指针。

除了上面让我们看看你的代码在做什么开始的图片是这样的

```
myArray ======> NULL 
```

第一行之后

```
int* temp = (*myArray); //pointing temp to (*myArray) 
```

因为 myArray 是 NULL temp points no where 因此新图片

```
myArray =======> NULL
temp =======> NULL 
```

第 2 行 temp = (int*) malloc(sizeof(int) * 2);

分配两个整数的内存并将新分配的内存指向临时，这样图片就变成了

```
myArray =======> NULL
temp =======> [ ] [ ] 
```

接下来的两行将 1 和 2 存储在 temp 指向的第一个和第二个内存位置

```
 temp[0] = 1;
 temp[1] = 2; 
```

所以现在的图片是

```
myArray =======> NULL
temp =======> [1] [2] 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-03T21:12:44.120

分配之前的 Malloc 温度！

# google-app-engine - 在 Python 2.7 中使用 deferred.defer

> ID：10439371
> 
> 赞同：4
> 
> 时间：2012-05-03T21:10:44.080
> 
> 标签：google-app-engine

我正在尝试将我的 App Engine 应用程序移动到 Python 2.7 运行时。

`google.appengine.ext.deferred`使用 SDK 1.6.5 版导入库时，我看到了下面的回溯。我也尝试过上传应用程序并在运行时看到类似的错误。

有没有其他人在 Python 2.7 中使用延迟库。有没有人见过类似的问题？

**编辑**

回答我自己的问题。我的应用程序有自己的版本`webapp2`（可能是旧版本）删除它并添加到修复问题`webapp2`的库部分。`app.yaml`虽然，我不太确定为什么回溯似乎显示延迟库导入了正确版本的`webapp`.

追溯： ...

```
File ".../units/unitsSchema/styleModel.py", line 30, in <module>
    from google.appengine.ext import deferred
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/deferred/__init__.py", line 29, in <module>
    from deferred import *
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/deferred/deferred.py", line 266, in <module>
    class TaskHandler(webapp.RequestHandler):
AttributeError: 'module' object has no attribute 'RequestHandler' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:32:36.220

看起来你`webapp.py`在你的 python 类路径中有一个自定义，它隐藏了正确的`webapp.py`.

我目前正在将延迟库与新的 Python 2.7 运行时一起使用，没有问题。
我已经在我的*[内置](https://developers.google.com/appengine/docs/python/config/appconfig#Builtin_Handlers)*部分启用了它`app.yaml`：

```
builtins:
  - deferred: on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-24T02:55:24.410

我遇到了同样的问题。我尝试了很多方法。最后，我解决了。是webapp2版本问题。app.yaml 文件中有一个 webapp2 库。只用这个。不要从 deps 导入 webapp2。

# ajax - 如何检测哪个 HTML 元素位于给定的鼠标坐标下？（海龙）

> ID：10439373
> 
> 赞同：0
> 
> 时间：2012-05-03T21:10:58.080
> 
> 标签：ajax, events, mouse, seadragon

我目前正在使用 Seadragon Ajax 技术（[zoom.it](http://zoom.it)上的演示），添加自定义界面等。特别是，我正在添加一定数量的覆盖，这些覆盖需要捕获一些鼠标事件（如点击）但不需要捕捉其他人（如滚轮滚动）。

Seadragon 在滚动时使用鼠标指针位置来缩放到图像的指定部分。我想在叠加层上捕获鼠标事件，但**在**它下面传递一些。因此，我正在寻找一种实现以下功能的方法：

1.  取两个参数：理论鼠标位置，垂直和水平部分
2.  找到代表 HTML 元素的 DOM 元素，该元素将在给定坐标处捕获鼠标事件
3.  将鼠标事件传递给该元素

问题是，我不知道如何可靠地完成第二步。Seadragon 创建了许多 div，其中包含带有图形的图块，每次平移或缩放图像时它们都会改变。因此，我不能只是索引它，我需要一种动态检测它的方法。

我将不胜感激任何帮助和/或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T03:53:25.637

好吧，这太简单了，我为自己感到羞耻。

```
document.elementFromPoint(x, y) 
```

它也几乎得到普遍支持......我可能正在寻找类似的东西`getElementFromPoint`，这`get`部分误导了我。

# ruby-on-rails - 谷歌地图标记只显示了四分之一

> ID：10439376
> 
> 赞同：0
> 
> 时间：2012-05-03T21:11:25.857
> 
> 标签：ruby-on-rails, css, google-maps, canvas, gmaps4rails

我正在使用 gmaps4rails gem，在生成地图时，我在标记中得到了这种奇怪的行为：

![四分之一标记](../Images/3c2c5962971cdb3b35f0d1687ce385b6.png)

正如你所看到的，标记只显示了它的一部分，我不明白为什么。如果我使用默认引脚，则标记显示正确。

我如何知道标记/地图使用的是哪个 CSS？或者，有什么想法我该如何解决这个问题？

你可以在这里看到它：[Gmaps borked](http://gentle-cloud-4082.herokuapp.com/maps)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:18:58.070

您缺少标记设置的宽度和高度属性。

用这个：

```
{"description": "", 
 "title": "", 
 "sidebar": "", 
 "lng": "-122.345467", 
 "lat": "37.568749", 
 "picture": "assets/prova.png", 
 "width": 70, 
 "height": 88} 
```

还在设置中添加一个 marker_anchor-member 以保持标记固定在正确的位置：

```
"marker_anchor":[23,78] 
```

# java - java中的面板大于框架

> ID：10439381
> 
> 赞同：3
> 
> 时间：2012-05-03T21:11:56.257
> 
> 标签：java, swing, jframe, jpanel

我正在尝试为 Java 平台游戏制作关卡编辑器。问题是我需要能够编辑宽级别，可能是多个屏幕宽，但显然我不想制作那么宽的 JFrame。如何在 JFrame 内制作一个比框架大的面板，并为面板提供一个滚动条，让我可以浏览整个面板？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T21:14:29.833

您已经在教程或[此处查看](http://www.java2s.com/Code/Java/Swing-JFC/Scrollpane.htm)[JScrollPane示例](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

# css - 在响应式设计中更改 img src？

> ID：10439382
> 
> 赞同：23
> 
> 时间：2012-05-03T21:12:01.217
> 
> 标签：css, image, responsive-design

我即将编写一个响应式布局，它可能包含三个不同的“状态”。

奇怪的部分是大部分文本，例如菜单项将是图像——这不是我的想法，我恐怕没有什么可以改变的。

由于每个状态的图像会略有不同，除了大小之外（例如，在最小的状态下，菜单变成浮动按钮而不是常规标题），我需要切换图像而不是仅仅缩放相同的图像。

如果不是这样，我可能会选择“adaptive-images.com”。

所以，我需要一些关于最佳实践解决方案的意见。

我能想到的：

*   将图像加载为背景——感觉有点脏。

*   插入两个版本并切换 css 显示属性 - 非常肮脏！

*   编写一个设置所有 img 链接的 javascript - 感觉有点矫枉过正？

有人坐在一个好的解决方案上吗？:)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-03-12T17:30:28.927

其他选项。不需要脚本，只需要 CSS。

HTML

```
<div id="mydiv">
    <img src="picture.png" class="image_full">
    <img src="picture_mobile.png"  class="image_mobile">
</div> 
```

CSS

```
.image_full{
   display:block;
  }

 .image_mobile{
  display:none;
 }

@media (max-width: 640px) and (min-width: 320px){
  .image_full{
   display:none;
  }

  .image_mobile{
   display:block;
  }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-04T07:03:36.440

如果只是几张图片（并且它们已经过优化），那么通过 CSS 隐藏它们是没有问题的。如果它很多，那么看看[Response JS](http://responsejs.com/beta/#sets)它将`src`为您即时更改。试试这个：

```
<body data-responsejs='{ "create": [
    { "prop": "width", "breakpoints": [0, 320, 481, 641, 961, 1025, 1281] }
]}'>

<img src="small.png" data-min-width-481="medium.png" alt="example"> 
```

也阅读[这篇文章](http://timkadlec.com/2012/04/media-query-asset-downloading-results/)。

**更新**- 额外的例子：

```
<body data-responsejs='{ "create": [
    { "prop": "width", "breakpoints": [0, 320, 481, 641, 961, 1025, 1281] }
  , { "prop": "device-pixel-ratio", "breakpoints": [0, 1, 1.5, 2] }
]}'>

<img src="small.png" data-device-pixel-ratio-1.5="medium.png" alt="example"> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-10-29T15:47:12.427

今天的大多数浏览器[都支持](https://caniuse.com/#search=picture) `picture`标签。因此，您可以使用它来根据视口宽度更改图像。

```
<picture>
    <source media="(min-width: 1200px)" srcset="/img/desktop-size.png">
    <source media="(min-width: 768px)" srcset="/img/medium-size.png">
    <img src="/img/mobile-size.png"/>
</picture> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-27T14:57:02.060

我是第三选择的粉丝，因为它不会加载多个图像并节省带宽。

由于移动优先的设计，首先我加载这样的小图像：

```
<div id="mydiv">
    <img src="myphoto1_normal.jpeg" width="24" height="24" alt="myphoto1"/>
    <img src="myphoto2_normal.jpeg" width="24" height="24" alt="myphoto2"/>
</div> 
```

然后在文件加载后我运行这个脚本：

```
function resizeImages() {
    var width = window.innerWidth || document.documentElement.clientWidth;
    $("#mydiv img").each(function() {
        var oldSrc = $(this).attr('src');
        if (width >= 768) {
            var newSrc = oldSrc.replace('_normal.','_bigger.');
            var newWidth = 100;  var newHeight = 100;
        } else if ( width >= 480 ) {
            var newSrc = oldSrc.replace('_normal.','_big.');
            var newWidth = 50;  var newHeight = 50;
        }
        $(this).attr('src',newSrc);
        $(this).attr('width',newWidth);
        $(this).attr('height',newHeight);
    });
} 
```

如果屏幕宽度很大，那么我使用此脚本将小图像更改为更大的图像。它在台式计算机上运行速度很快。而且它不在智能手机中运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T21:28:40.920

我要做的是：
使用图像作为每个`li`元素的背景
创建一个带有各种大小的链接（图像）的精灵：

```
___ ___ ___ ___
__ __ __ __
_ _ _ _ 
```

比，使用@media 例如：。

```
@media only screen and (max-width : 480px) {
 /* here I would make my li smaller */
 /* here I would just change the li background position*/
} 
```

图像'sprite' 将已经加载到浏览器中，并且过渡将非常顺利和快速地发生。

# jquery - 为什么动态添加列表项在 Chrome 和 Firefox 中有效，而在 IE8 中无效？

> ID：10439383
> 
> 赞同：1
> 
> 时间：2012-05-03T21:12:02.937
> 
> 标签：jquery, internet-explorer, internet-explorer-8

我有一些 jQuery 代码在 Firefox 和 Chrome 中运行良好，但在 Internet Explorer 8 中不起作用（尚未在其他 IE 版本中测试）。Internet Explorer 以标准模式运行。

下面代码的目的是动态创建一个新的列表项。它的内容设置为隐藏部分元素内部的表单的内容。使用 IE 时发生的情况是 section 元素变得不隐藏并且 li 被添加到列表中，但是是空的。

IE中的这段代码有什么问题？

```
$('ul.elementlist').on('click', '.add-element-icon', function (event) {
    var plusIcon = $(this);
    plusIcon.hide();

    var parentLi = plusIcon.parent();

    var before = parentLi.attr('id');

    var after = parentLi.next().attr('id');
    if (typeof after === "undefined") {
        after = 'none';
    }

    var li = $('<li class="element">').html($('section.add-element').html());
    $('input[name="elementBefore"]', li).val(before);
    $('input[name="elementAfter"]', li).val(after);
    li.insertAfter(parentLi);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:12:02.843

由于您正在使用该`section`元素，我猜您正在使用其他 HTML5 元素并且正在使用 HTML5 doctype: `<!DOCTYPE html>`。在这些假设下，我会断言您需要做一些事情来使您的标记“对 IE 友好”。

首先确保 IE 真正在[IE8 标准兼容模式下运行](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#DCModes)^*通过将以下元标记添加到您的 head 部分：

```
<meta http-equiv="x-ua-compatible" content="IE=8"/> 
```

在标准兼容性设置之后立即添加对[html5shiv](http://code.google.com/p/html5shiv/)的引用，这是一个用于 IE 识别和设置 HTML5 元素样式的 JavaScript shiv：

```
<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

在这两个变化之间，你应该很高兴。更改后，按`CTRL`+强制 IE 进行完整的资源刷新`F5`。

[* 如果这是一个新网站，您可能需要考虑使用`IE=edge`它，因为它告诉 Internet Explorer 使用可用的最高模式。]

# jquery - jQuery - 在输入键上提交文本 - 换行符仍然插入到 textarea

> ID：10439385
> 
> 赞同：0
> 
> 时间：2012-05-03T21:12:03.573
> 
> 标签：jquery, line-breaks

按下回车键后，我在从文本区域发布一些文本时遇到了一个小问题。

输入的文本被附加到具有整洁效果的 div 中，然后输入的文本从 textarea 中删除，一切正常。但是，当您按 Enter 时，实际上仍会在 textarea 中插入换行符，然后添加和删除文本。因此，在一瞬间，您可以看到添加了换行符，这看起来一点也不好看。

如何防止插入换行符？

谢谢！丹尼斯

更新：

这里有一些代码。我使用keyup。

```
$('#postDiv').on('keyup', '#posttext', function(e) {
    if ((e.which == 13) && !event.shiftKey) {
        post($(this));
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:16:59.613

```
$('#postDiv').on('keydown', '#posttext', function(e) {
    if ((e.which == 13) && !event.shiftKey) {
        post($(this));
        return false
    }
}); 
```

注意对keydown的更改，以阻止默认操作

# php - 动态 PHP 脚本中任性的缩略图生成

> ID：10439387
> 
> 赞同：0
> 
> 时间：2012-05-03T21:12:09.190
> 
> 标签：php

此脚本片段检查目录中是否存在文件并构建缩略图。出于某种原因，在 _1.jpg 缩略图之前，只使用 .jpg 创建了一个空缩略图？这是在哪里发生的，我可以追踪它吗？

这是要查看的问题的 tinyurl...最好在 IE 中进行测试，因为 firefox 会自动将其删除： http: [//tinyurl.com/c6o2yts](http://tinyurl.com/c6o2yts)

```
<?
                                    $image = "<br>";
                                    $ListingRid = $row['ListingRid'];                                   
                                    $img_cnt = 1;
                                    $image .= "<a href=/feeds/fmfl/rets_images/$ListingRid_1.jpg rel=enlargeimage::mouseover rev=loadarea><img src=/feeds/fmfl/rets_images/$ListingRid_1.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;";
                                    for ($c=1;$c<10;$c++) {
                                        $c_ext = $c;
                                        if (file_exists("/var/www/vhosts/domain.com/httpdocs/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg"))
                                            $image .= "<a href=/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg rel=enlargeimage::mouseover rev=loadarea><img src=/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;";
                                        else
                                            $c=12;

                                        $img_cnt++;
                                        if ($img_cnt == 3) {
                                            $image .= "<br>";
                                            $img_cnt = 0;
                                        }

                                    }

                                    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:07:37.010

问题在这里：

```
$image .= "<a href=/feeds/fmfl/rets_images/$ListingRid_1.jpg rel=enlargeimage::mouseover rev=loadarea><img src=/feeds/fmfl/rets_images/$ListingRid_1.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;"; 
```

更具体地说，这里：

```
$ListingRid_1.jpg 
```

PHP 允许在变量名中使用下划线和整数。因此，当您希望它找到`$ListingRid . "_1"`时，PHP 将变量的名称解释为`$ListingRid_1`不存在的 。

你可以使用括号，这样它就变成了

```
$image .= "<a href=/feeds/fmfl/rets_images/{$ListingRid}_1.jpg rel=enlargeimage::mouseover rev=loadarea><img src=/feeds/fmfl/rets_images/{$ListingRid}_1.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;"; 
```

另外：顺便说一句，提前退出`for`循环的更好方法是使用`break`.

# android - 是否有 OnTabsChanged 类型的代码

> ID：10439393
> 
> 赞同：0
> 
> 时间：2012-05-03T21:12:28.633
> 
> 标签：android, tabs

我需要的是当我点击一个标签时我需要运行一些代码，无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:17:43.390

尝试这个：

```
getTabHost().setOnTabChangedListener(new OnTabChangeListener() {

  @Override
  public void onTabChanged(String tabId) {
        //YOUR CODE
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:17:08.037

为此，我总是使用 TabHost.OnTabChangeListener。

# javascript - 如何根据使用 javascript 选择的复选框添加隐藏的表单字段？

> ID：10439394
> 
> 赞同：2
> 
> 时间：2012-05-03T21:12:28.773
> 
> 标签：javascript, forms, hidden, field, checkbox

我想根据选中的复选框将隐藏的输入写入表单。在我的示例中，我没有收到错误，但它仍然不会通过隐藏字段-（已编辑）

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<div id="test"></div>
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="upload" value="1">
<input type="hidden" name="business" value="youremail@mail.com">
<input type="hidden" name="currency_code" value="US">
<input type="checkbox" id="chkbox1" name="camp1" value="a">
<input type="checkbox" id="chkbox2" name="camp2" value="b">
<input type="submit" value="PayPal">
</form>
<script type="text/javascript">
var element = document.getElementById('test');
if(element != null && element.checked) {

var newElement = document.createElement('input');
newElement.type = "hidden";
newElement.name = "item_name_1";
newElement.value = "MyItem #1";

document.getElementById('chkbox1').appendChild(newElement);

var newElement2 = document.createElement('input');
newElement2.type = "hidden";
newElement2.name = "amount_1";
newElement2.value = "7.00";

document.getElementById('test').appendChild(newElement2);
} 
```

理论上这应该有效，但它让我很难过。如果有人可以提供一些建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:18:58.530

首先，永远不要`document.write`在网页上下文中使用 while。这是不好的做法。如果你想用纯 javascript 动态添加一个元素，你只需创建一个新元素：

```
var newElement = document.createElement('input');
newElement.type = "hidden";
newElement.name = "something";
newElement.value = "someValue";

document.getElemenytById('somecontainer').appendChild(newElement); 
```

其次，错误意味着`document.getElementById`对您的一个语句的调用没有找到指定的元素。您需要为空检查结果：

```
var element = document.getElementById('chkbox1');

if(element != null && element.checked)
   // Do Stuff 
```

现在，在不知道脚本的位置以及此表单在页面中的位置的情况下，您可能会遇到加载位置的问题。如果您的脚本在加载 HTML 之前运行，您将找不到元素。

# jquery - jQuery Cycle 插件水平滑块的变速

> ID：10439395
> 
> 赞同：2
> 
> 时间：2012-05-03T21:12:35.280
> 
> 标签：jquery, performance, jquery-cycle

我正在使用 jQuery Cycle 插件创建一个非常简单的幻灯片。

脚本下方：

```
$(document).ready(function() {

var slideshow = $('#slider').cycle({

    fx: 'scrollHorz',
    speed: 500,
    timeout: 8000,
    prev: '#prev',
    next: '#next',
autostop: false 
    });
}); 
```

和 HTML 的一部分：

```
<div id="slider">
<img class="slide" src="header/slider/images/FOTO_SCORRE2.jpg" alt="" />
<img class="slide" src="header/slider/images/FOTO_SCORRE3.jpg" alt="" />
<img class="slide" src="header/slider/images/FOTO_SCORRE4.jpg" alt="" />
<img class="slide" src="header/slider/images/FOTO_SCORRE5.jpg" alt="" />
</div> 
```

我的问题是：如何在图像更改期间改变幻灯片的速度？我希望图像从零速度加速到固定的最大速度，并从中间过渡减速到零。

有可能以简单的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:32:20.890

您所询问的技术名称是“Easing”，请参阅许多示例[jQuery UI Easing examples](http://jqueryui.com/demos/effect/easing.html "jQuery UI 缓动示例")和[Other easing Styles](http://james.padolsey.com/demos/jquery/easing "其他缓动风格")。似乎 Cycle 插件具有您可以设置的缓动钩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:28:38.447

谢谢，你是对的，循环插件支持缓动。我通过添加选项修改了代码：

```
easing: 'easeInOutExpo', 
```

很容易！

# json - MongoDB：BSON 到 JSON

> ID：10439397
> 
> 赞同：6
> 
> 时间：2012-05-03T21:12:46.483
> 
> 标签：json, node.js, mongodb, bson

我正在为 node.js 使用本机 mongoDB 驱动程序。我想从数据库中获取一些数据并通过 HTTP 将其作为 JSON 字符串发送。有没有办法将 BSON 转换为 JSON 或直接从数据库中以 JSON 格式检索数据？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:08:32.993

在 python 中，您可以使用 simplejson 编码器将 bson 转换为 json，如下所示：

```
result = db.mycol.find({ ....})
json = simplejson.dumps(result) 
```

它将转换所有简单的对象，但会遇到其他问题，例如 datetime 将不起作用。要处理此问题，以下可能有效：[MongoDB Object Serialized as JSON](https://stackoverflow.com/questions/6255387/mongodb-object-serialized-as-json)

# java - 如何在 BIRT 报告中绘制图形或自定义设计的图表？

> ID：10439399
> 
> 赞同：4
> 
> 时间：2012-05-03T21:12:52.683
> 
> 标签：java, javascript, birt

我正在尝试根据 XML 文件中的一些数据生成报告。基本上，报告的第一页包含一些静态文本、一个徽标、一些动态文本和数据以及两个图表。接下来的页面应该包含一些文本和旁边的图表。我这里有一个很大的问题。BIRT 提供的图表不适合我的报告，所以我想也许我可以根据我的 xml 文件中的数据生成一些图表（使用外部应用程序），将图表保存到文件中，并最终将这些文件动态加载到我的报告中. 这对于第一页上的图表来说非常容易。但是，下一页需要有自己的图表，我找不到合适的方法将相应的图像包含到下一页中。所以这是我的问题：

1.  这有可能以某种方式创建自定义设计图表吗？如果是的话怎么做？以及如何将图表添加到报告的 2,3,... 页？
2.  我的 xml 文件中有所需的所有数据，这是否可以在创建报告时使用一些 javascript 动态绘制图形？我的意思是使用数据我只是绘制我自己的定制设计的图表？（这是一个非常简单的图表，没有花哨的东西）
3.  如果我寻求在外部创建图表并将它们动态添加到报告中的解决方案，我如何将这些图像动态添加到报告的 2,3,.. 页中。（每个页面都有自己的图表！）将使用多个母版页对我有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T09:15:47.120

您可以使用 D3.js 或 Flash 创建自定义设计的图表，并在 BIRT Designer 4.x 中根据需要添加分页符。有在 BIRT 报告中使用 Flash 的在线教程。

如果您在 BIRT 之外创建自己的图表，则可以使用图像小工具和图像的 URI 将它们作为图像导入。

如果你想使用 D3.js，

*   添加head.js(" [http://d3js.org/d3.v3.js](http://d3js.org/d3.v3.js) "); 到报表设计的 ClientScript > clientInitialize 脚本
*   将脚本添加到您的数据集，以创建：
    *   一个数组，例如 myArray = new java.util.ArrayList(); 在之前打开
    *   使用数据集的 onFetch 事件填充该数组的脚本，例如 myArray.add("['"+row["date"]+"','"+row["sales"]+"']") ;
    *   将数组复制到全局变量的脚本，例如 reportContext.setPersistentGlobalVariable("myArray",myArray);
*   在报表布局中添加一个文本项，您可以在其中：
    *   抓取全局变量，例如：var data = reportContext.getPersistentGlobalVariable("myArray");
    *   使用来自全局变量的数据，使用 d3.js JavaScript 构建您想要的 SVG 可视化。

如果您转向商业 BIRT Designer Professional，其中包含 Flash 对象，您还可以获得 HTML5 图表的 highcharts 库，您可以使用 JavaScript 使用 highcharts.org API 编辑该库。

# c# - 编写 LINQ 表达式

> ID：10439402
> 
> 赞同：1
> 
> 时间：2012-05-03T21:13:03.027
> 
> 标签：c#, linq, lambda

我已经阅读了一堆关于将 LINQ 表达式放在一起的文章，但它们似乎只涵盖了 and's 和 or's。我已经实施了这个解决方案：

[http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx](http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx)

如何编写此代码以使其正常工作？

```
Expression<Func<Crop, bool>> chooseOranges = crop => crop.IsOrange;
Expression<Func<Farm, bool>> selectFarm = farm => farm.HasCows;

selectFarm = selectFarm.And(farm => farm.Crops.Any(chooseOranges); 
```

它可以编译，但在运行时会引发 .NET 1025 错误。如果我将 chooseOranges 替换为文字文本，它会起作用，但 chooseOranges 是使用业务逻辑逐个构建的。我上面链接的代码似乎依赖于各种 Expression.Foo() 函数，但我找不到一个有用的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:45:46.317

使用[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)评估嵌套表达式的能力并返回一个可由任何支持写出相同表达式的提供程序使用的单个表达式：

```
Expression<Func<Crop, bool>> chooseOranges = crop => crop.IsOrange;
Expression<Func<Farm, bool>> selectFarm = farm => farm.HasCows;    
Expression<Func<Farm, bool>> combined = (farm) => selectFarm.Invoke(farm) && farm.Crops.Any(inner => chooseOranges.Invoke(inner));
combined = combined.Expand(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:39:48.733

我会这样写：

```
Expression<Func<Crop, bool>> chooseOranges = crop => crop.IsOrange;  
Expression<Func<Farm, bool>> selectFarm = farm => farm.HasCows;  

IQueryable farmQuery = GetQuery();
farmQuery = farmQuery.Where(selectFarm);
farmQuery = farmQuery.Where(farm => farm.Crops.Any(chooseOranges); 
```

每行都必须满足两个条件才能出现在结果中，所以这就是 And。

对于或者，我在[那边](https://stackoverflow.com/a/4430018/8155)做的。

# asp.net - allowDefinition='MachineToApplication' 打开弹出窗口时出错

> ID：10439404
> 
> 赞同：0
> 
> 时间：2012-05-03T21:13:07.867
> 
> 标签：asp.net, c#-4.0

打开弹出窗口时出现应用程序级错误。我的代码中有一个`try catch`块，但错误仍然没有记录在数据库中。错误说：

“在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由于虚拟目录未在 IIS 中配置为应用程序造成的”

```
Source Error
<deny Users="*"/>
</authrization>
<authetication mode="Forms">
<forms defaultURL= "~/login.aspx" cookieless="Autodetect"/>
</authetication>

. 
```

我的应用程序被配置为 IIS 中的虚拟目录。除非我打开此弹出窗口，否则我在应用程序的任何地方都没有收到此错误。下面是我打开弹出窗口的代码。

```
private void openWindow(int QueryId)
    {
        try
        {
            pnlChart.Visible = true;
            BindBarGraph();
            string strScript = "window.open('/N/Viewer/ViewerSummary.aspx?QueryID=" + QueryId + "', '_blank','height=650, center:yes, width=800, status=no, resizable= yes, menubar=no, toolbar=no, location=yes, scrollbars=no, status=no');";
            ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "strScript", strScript, true);
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

我在 Windows 2008 服务器上收到此错误。当我在我的开发机器上运行程序时，我没有收到此错误。

# c++ - gstreamer 内存泄漏

> ID：10439407
> 
> 赞同：3
> 
> 时间：2012-05-03T21:13:44.387
> 
> 标签：c++, memory, memory-leaks, gstreamer

我有 gstreamer 的内存泄漏：

```
#include <iostream>
#include <string.h>
#include <glib.h>
#include <gst/gst.h>

using namespace std;

void info(const GstElement *const element)
{
        cout << "count: " << GST_OBJECT_REFCOUNT(element) << endl;
        cout << "disposing: " << GST_OBJECT_IS_DISPOSING(element) << endl;
}

int main()
{
    gst_init(NULL,NULL);
    GstElement *element = gst_pipeline_new("src");
    info(element);
    gst_object_unref(element);
    info(element);
    gst_deinit();
    return 0;
} 
```

当我用 valgrind 控制我的代码时，我得到了这个结果：

```
==9098== 命令：./test_gstreamer
==9098==
计数：1
处置：0
计数：0
处置：0
==9098==
==9098== 堆摘要：
==9098== 退出时使用：2,199 个块中的 1,364,118 个字节
==9098== 总堆使用量：21,877 次分配，19,678 次释放，3,899,417 字节分配
==9098==
==9098== 泄漏摘要：
==9098== 肯定丢失：1 个块中的 60 个字节
==9098== 间接丢失：10 块 240 字节
==9098== 可能丢失：880 个块中的 543,952 个字节
==9098== 仍然可以访问：1,308 个块中的 819,866 个字节
==9098== 抑制：0 个块中的 0 个字节
==9098== 使用 --leak-check=full 重新运行以查看泄漏内存的详细信息
==9098==
==9098== 对于检测到和抑制的错误计数，重新运行：-v
==9098== 错误摘要：来自 0 个上下文的 0 个错误（抑制：2 个来自 2）

```

为什么不`gst_object_unref`释放所有内存？为什么`GST_OBJECT_IS_DISPOSING`返回 false 之后`gst_object_unref`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:02:56.867

您可以尝试将您的主要更改为：

```
gst_init(NULL,NULL);
GstElement *element = gst_pipeline_new("src");
info(element);
gst_element_set_state (element, GST_STATE_NULL);
gst_object_unref(element);
info(element);
return 0; 
```

认为这可能有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T22:48:05.390

您应该按照 valgrind 的建议进行操作：“使用 --leak-check=full 重新运行以查看泄漏内存的详细信息”。在这里查看答案：http: [//gstreamer-devel.966125.n4.nabble.com/Valgrind-error-with-gstreamer-td4657149.html](http://gstreamer-devel.966125.n4.nabble.com/Valgrind-error-with-gstreamer-td4657149.html)

当 gst_object_unref 返回时，该元素已完成处理。

# asp.net-mvc-3 - 在 asp.net mvc3 中过滤结果集

> ID：10439412
> 
> 赞同：0
> 
> 时间：2012-05-03T21:14:12.670
> 
> 标签：asp.net-mvc-3, linq

我有一个 IEnumerable 视图。这个视图页面（cshtml）包含一个模型数据和一个表单的一些数据。它列出了数据库中我的模型的所有数据。我想通过多个过滤器选项过滤这些数据，例如按城市、区域、楼层、道路编号等过滤所有这些过滤器都在我的表单字段中。我的操作是这样的：

 ````
 [HttpPost]
  public ViewResult SearchPost()
      {

        var posts =db.posts.Include("user").ToList();

        if (Request.Form["searchString"] != null)
        {
           posts = (from posts in db.posts where posts.area   
           ==Request .Form["searchString"]).ToList();                      
        }
         if (Request.Form["searchString2"] != null)
        {
            posts = (from posts in db.posts where posts.city 
            ==Request.Form["searchString2"]).ToList();
        }
          if (Request.Form["searchString3"] != null)
        {
            posts = (from posts in db.posts where posts.floor 
            ==Request.Form["searchString3"]).ToList();
        }

        return View(posts);
       } 
````  `我的视图页面：

 ````
 @using (Html.BeginForm()){   
     <p> Area: @Html.TextBox("SearchString") 
     <p> City: @Html.TextBox("SearchString2") 
     <p> Floor: @Html.TextBox("SearchString3") 
     <input type="submit" value="Filter" /></p>
    }

   >.....list of Model Data 
````  `我的所有过滤器选项都是可选的。可以选择一个或多个过滤器选项，也可以不选择任何一个。它给出了错误**范围变量帖子**，我想在每个 if 条件块中过滤我的结果集。可能吗 ？？？如果可能的话，请给我一些想法.....提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:27:10.127

在运行查询之前检查结果是否为 null && Any() 总是一个好主意。过滤器 1 和/或 2 可能会排除所有结果。

```
if (Request.Form["searchString"] != null)          
{
    if ((posts!=null) && (posts.Any()))
         {
                posts = (from posts in db.posts where posts.area
                ==Request .Form["searchString"]).ToList();                                
         }
}           
if (Request.Form["searchString2"] != null)          
{              
    if ((posts!=null) && (posts.Any()))   
         {
                posts = (from posts in db.posts where posts.area
                ==Request .Form["searchString2"]).ToList();                                
         }
}            
if (Request.Form["searchString3"] != null)          
{
    if ((posts!=null) && (posts.Any()))   
         {
                posts = (from posts in db.posts where posts.area
                ==Request .Form["searchString3"]).ToList();                                
         }
} 
`````

# c# - 更新复选框的 datagridview 技巧

> ID：10439413
> 
> 赞同：0
> 
> 时间：2012-05-03T21:14:17.747
> 
> 标签：c#, winforms, data-binding, datagridview

我有一个带有gridview 的windows 窗体。我想通过[技巧](http://www.dotnetcurry.com/ShowArticle.aspx?ID=132)来更新它。代码是：

```
private void btnUpdate_Click(object sender, EventArgs e)

    {

        DataTable dt = ds.Tables["Orders"];

       this.dgv.BindingContext[dt].EndCurrentEdit();

        this.da.Update(dt);

    } 
```

这看起来不错的样子。我的问题是有一个单元格，它是一个标志（默认为 0）。我们可以将其自定义为复选框吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:20:59.923

为该列创建一个 DataGridViewCheckBoxColumn。并通过循环遍历 dgv 行进行“手动”填充，如果值为 1：

```
dgv[x,y].Value = true; 
```

或 0 什么都不做。

# c# - 使用 Inspector 以编程方式加密 Outlook 电子邮件

> ID：10439418
> 
> 赞同：2
> 
> 时间：2012-05-03T21:14:32.200
> 
> 标签：c#, outlook, office-interop, outlook-addin, office-automation

我将 C# 与 Outlook 对象模型一起使用（由于许可，我无法选择赎回），并且在发送电子邮件之前以编程方式对其进行加密时遇到了困难。

我可以成功获得对据称代表 Encrypt 按钮的 CommandBarButton 的引用（根据在线示例，Id 718），但我无法以编程方式按下它。我尝试使用 CommandBarButton Execute() 方法和使用 SendKeys （不确定 sendkeys 在这种情况下是否有效）。所有 debug.writeline 语句都显示按钮处于 msoButtonUp 状态。

我已经玩了好几天了，似乎无法让它工作。任何建议将不胜感激！

```
Outlook.MailItem emailToSend;
...
Microsoft.Office.Core.CommandBarButton cbb = null;
cbb =(CommandBarButton)emailToSend.GetInspector.CommandBars["Standard"].FindControl(Type.Missing, 718, Type.Missing, true, false);

if (cbb != null) {
  //it is not null in debugger    
  if (cbb.Enabled) { 
  //make sure digital signature is on
    cbb.Visible = true;
    Debug.WriteLine("State was: " + cbb.State.ToString()); //all debug calls return msoButtonUp
    cbb.SetFocus();
    SendKeys.SendWait("{ENTER}");
    Debug.WriteLine("State was: " + cbb.State.ToString());
    SendKeys.SendWait("~");
    Debug.WriteLine("State was: " + cbb.State.ToString());
    cbb.Execute();
    Debug.WriteLine("State was: " + cbb.State.ToString());
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T22:22:18.943

实际上有一种更好的方法可以以编程方式加密、签名、加密 + 签名，或者两者都不确保。而且您可以做到这一点，而不必显示邮件项目。以下文章展示了如何使用邮件项的属性：

[http://support.microsoft.com/kb/2636465?wa=wsignin1.0](http://support.microsoft.com/kb/2636465?wa=wsignin1.0)

例如，在 C# 中，如果 mItem 是您的邮件项目，则以下代码将关闭签名和加密：

```
mItem.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x6E010003", 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:48:17.967

通过反复试验想通了。主要问题似乎是我在显示 MailItem 之前使用了 Inspector。在开始时添加对 Display 的调用解决了它。对于任何感兴趣的人，这是对我有用的代码：

```
private static void addOutlookEncryption(ref Outlook.MailItem mItem) {
        CommandBarButton encryptBtn;
        mItem.Display(false);
        encryptBtn = mItem.GetInspector.CommandBars.FindControl(MsoControlType.msoControlButton, 718, Type.Missing, Type.Missing) as CommandBarButton;
        if (encryptBtn == null) {
            //if it's null, then add the encryption button
            encryptBtn = (CommandBarButton)mItem.GetInspector.CommandBars["Standard"].Controls.Add(Type.Missing, 718, Type.Missing, Type.Missing, true);
        }
        if (encryptBtn.Enabled) {
            if (encryptBtn.State == MsoButtonState.msoButtonUp) {
                encryptBtn.Execute();
            }
        }
        mItem.Close(Outlook.OlInspectorClose.olDiscard);
    } 
```

# php - javascript / php - 根据选择更改更改文本字段

> ID：10439419
> 
> 赞同：-1
> 
> 时间：2012-05-03T21:14:33.797
> 
> 标签：php, javascript, ajax, jquery

每次在我的选择选项中选择一个新选项时，我都会尝试更改几个文本字段。这是我目前拥有的代码，有什么想法我哪里出错了吗？谢谢。

```
 <script type="text/javascript">
            $("#combo").change(function() {
            var value = $(this).val();
            $.get(document, {type: value});
            });
        </script>

        <td class="bold"><label for='addType'>Select Type to Add : </label>
            <select name="addType" id="combo">
                <option value="book">Book</option>
                <option value="author">Author</option>
                <option value ="publisher">Publisher</option>
                <option value="customer">Customer</option>
            </select>
        <?php
            $type['type'] = $_GET['type'];
            if ($type['type'] == 'author') {
                print "test";
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:35:39.457

$.get 函数应该如下所示：

```
 $.get("php_page.php", 
       {type: value},
       function(data) {
             $("#response").html(data)
      ); 
```

在您`</select>`放置一个 id 为“response”的 div 之后，它将显示您的返回值：

```
 <div id="response">
 </div> 
```

现在您需要做的就是在同一目录（“php_page.php”）中创建第二个页面，它将处理您的 $.get AJAX 请求：

```
<?php
      echo $_GET['type'];
?> 
```

如果您不知道，PHP 是一种服务器端语言。这意味着一旦页面加载完毕，PHP 就已经完成了它的工作。因此，如果您需要在页面加载后使用特殊的 PHP 功能，这就是 AJAX 的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:39:20.267

你这样做是**完全错误的！**请阅读有关 jQuery 上的[ajax的手册。](http://api.jquery.com/jQuery.ajax/)

*只是为了帮助您开始您的项目：*

您必须将基本结构与要从 php 文件中获得的响应分开。请看这个**[演示](http://jsfiddle.net/neysor/zVkBh/)**

HTML部分是：

```
<select name="addType" id="combo">
    <option value="book">Book</option>
    <option value="author">Author</option>
    <option value ="publisher">Publisher</option>
    <option value="customer">Customer</option>
</select>
<div>Response: <span id="selection"></span></div> 
```

这也可以用 PHP 填充，但不是响应！

JavaScript 是：

```
$("#combo").change(function() {
    $.ajax({
        url: "/echo/html/",
        type: "POST",
        data: {"html":"Yeah: "+$(this).val()+" is cool!"},
        success: function(data) {
            $("#selection").html(data);
        }
    });
});​ 
```

如果你把它放在一个额外的文件中会很好。

最后但并非最不重要的是，使用 url 指定的*“PHP 文件”*`/echo/html`执行以下操作：

```
<?php
  echo $_POST["html"];
?> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:48:39.283

首先，本节：

```
<?php
    $type['type'] = $_GET['type'];
    if ($type['type'] == 'author') {
        print "test";
}?> 
```

仅在页面首次加载时打印，并且仅当 type=xxx 在 url 查询字符串中时才打印。加载后您无法在页面本身上运行 PHP，因为代码是服务器端的

对于 jquery 部分，请尝试：

```
$(document).ready(
    function(){
        $('#combo').change(function(){doAjax();});
    }
);
function doAjax(){
    $.get(
        'url', //i think jquery defaults to self if not url is given but you can also use <?php echo $_SERVER['PHP_SELF'];?>
        {'type' : $('#combo').val()},
        function(data){
                // what should the ajax call do with the response data?
        },
        "html"
    );
} 
```

您还应该创建一个 div 以将返回的数据放入 .html() 中，这比尝试将响应附加到其上方最后一个元素的末尾要容易得多。

# c - 在 C 中创建良好的 IF 语句时遇到问题

> ID：10439422
> 
> 赞同：-1
> 
> 时间：2012-05-03T21:14:41.090
> 
> 标签：c, if-statement, char

我正在尝试使用 IF 条件创建类似的东西：

```
if(mychar[i] = "+")
{
   /* do something */
} 
```

我想检查如果 char[number i-1] 是加号，但我不能在我的条件下正确定义加号：/

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T21:15:25.250

两个修复：

```
if(mychar[i] == '+')
                ^ use '' for char, and "" for strings
             ^ = is an assignment operator, == is a comparison operator 
```

值得注意的是，虽然不推荐，但仅将赋值运算符用作布尔表达式是有效的，因为 0 被认为是 FALSE，而任何其他值都被认为是 TRUE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:19:18.273

为了防止这种使用一个等号的事故，只需这样做

```
if ('+' == mychar[i]) 
```

一旦你养成了放置常量 (char, int, double, ...) 的习惯，编译就会吐出你的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:28:49.650

鉴于您原来的 if 语句`f(mychar[i]="+") { do sth }`：

首先，使用单个`=`会导致赋值。在这种情况下，将“+”赋值给`mychar[i]`.

C 将允许您在 if 语句中分配一个值，但我从不知道有人在实践中这样做过。您正在尝试比较值，因此您想使用`==`而不是`=`.

其次，您使用的是常量字符串`"+"`而不是 char `'+'`，因此编译器抱怨将指向字符串的指针分配给字符。

最后，在将值与常量进行比较时，我使用了一个构造。我把常数放在前面`==`。

`if('+' == mychar[1])`

如果我快速键入并键入，`if('+' = mychar[1])`我会在尝试将值分配给常量时收到编译时错误。

# php - PHP Regex 查找同时包含字母和数字的单词

> ID：10439423
> 
> 赞同：2
> 
> 时间：2012-05-03T21:14:42.373
> 
> 标签：php, regex

我正在开发一个解析广告的 PHP 脚本，我想添加一个正则表达式来查找特殊代码，这些代码可以是任意长度，但由任意顺序或任意长度的字母和数字组成。我只是不确定正确的语法是什么。我发现允许字母或数字的模式，或者需要特定的字母和数字模式，但不是几乎随机的混合。

任何建议将不胜感激。

示例：在星期五之前使用优惠券代码 WID2010 购买 Widgets 20% 折扣

理想情况下，我想检测“WID010”这个词并用它来标记该项目以供其他用途。然而，这种格式不一定是一致的。所有可以预测的是代码总是由至少一个字母和一个数字组成，没有空格或标点符号。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T21:28:44.887

这样的代码确实包括

*   任意数量的字母（最少 1 个）后跟一个数字和任意数量的字母和/或数字（最少 0 个）
*   或任意数量的数字（最少 1 个）后跟一个字母和任意数量的字母和/或数字（最少 0 个）

写成捕获组：

```
((?:[a-zA-Z]+[0-9]|[0-9]+[a-zA-Z])[a-zA-Z0-9]*) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T21:31:34.977

就像是：

`(?=\w*[a-z])(?=\w*[0-9])\w+`

这会先查找一个字母，然后是一个数字，并将字母和数字（单词）与每个字母和数字（单词）至少匹配一个。

[ideone](http://ideone.com/Ov7sV)

# c - for() 循环中的 fork()

> ID：10439426
> 
> 赞同：6
> 
> 时间：2012-05-03T21:14:53.247
> 
> 标签：c, fork

我正在尝试做一个我必须使用的家庭作业，`fork()`但我不知道为什么在通过我的 for 循环运行它们后我不能停止我的叉子：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>

int main(int argc, char *argv[]){
    int limit = argc/2;
    if(argc%2 == 0){

            perror("the number of arguments given must pe even!");
            exit(1);
    }

    int i;
    for(i=0; i<=limit; i++){
        if(fork()==-1){
            perror("childes couldn't be created\n");
            exit(1);
        }
        if(fork()==0){
            printf("fork: %d \n",i);
            exit(1);
        }
        wait(0);
    }

    printf("exiting...\n");
    return 0;
} 
```

输出：

```
warzaru@ubuntu:~/OS/UprocH$ ./exe a b c d
fork: 0 
fork: 0 
fork: 1 
fork: 1 
fork: 1 
fork: 2 
fork: 2 
fork: 1 
fork: 2 
exiting...
exiting...
fork: 2 
exiting...
exiting...
fork: 2 
exiting...
exiting...
exiting...
warzaru@ubuntu:~/OS/UprocH$ fork: 2 
fork: 2 
fork: 2 
exiting... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T21:28:55.520

Daniel Fischer 强迫我提供答案。

改变：

```
if(fork()==-1){} // first fork
if(fork()==0){}  // second fork 
```

至：

```
pid = fork();
if(pid == -1)
{
    ... //failed
}
else if(pid == 0)
{
    ... //success
} 
```

或者使用 switch 语句：

```
switch(fork())
{
    case -1:
        ... // failed
        break;
    case 0:
        ... // success
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T14:22:15.453

您可以使用 execl() 或其他一些 exec 变体，这可以确保正在创建的子级不会从父级继承任何内容。这将允许您使用 for 循环创建子代，而不会导致子代爆炸。适当修改 execl 函数的参数，您可以创建 3 个进程，例如：

```
main()
{
    int i,pid[3];
    for(i=0;i<3;i++)
    {
        pid[i]=fork();
        if (pid[i]==0)
            execl("path",0,0);
    }

    sleep(2);
} 
```

# php - 表单 POST 问题

> ID：10439430
> 
> 赞同：1
> 
> 时间：2012-05-03T21:15:12.493
> 
> 标签：php, forms, post

我有一个表单问题并将其提交到另一个 .PHP 文件。

当我尝试发布到我的数据库时，我得到一个禁止的错误。它在大多数情况下都会起作用，但是当我尝试像这样发布“http://”链接时出现此错误：

```
This is a test.<div><br></div><div>I wonder if it will work.&nbsp;</div> 
```

如果没有 br 就可以工作 对于上面的代码，我使用的是 WYSIWYG 编辑器。但是这种使用在 WYSIWYG 之前发生与某些单词。

不确定它的文件权限是“0644”还是服务器本身。但我想解决这个问题。谢谢，

我想我不能使用两个标签。比如`<div>Test</div><b>Test</b>`But可以使用`<div>test</div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:22:28.207

尝试过滤帖子字符串：

```
htmlspecialchars(mysql_real_escape_string($_POST['data'])); 
```

在您尝试将其插入数据库之前。

# c# - NHibernate 中无法识别的配置部分 applicationSettings

> ID：10439438
> 
> 赞同：9
> 
> 时间：2012-05-03T21:15:33.977
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在使用流利的 NHibernate。

我有一个带有几个特定键（applicationSettings 和 userSettings）的 app.config 文件。

似乎 nhibernate 不喜欢这些键。只要文件中存在这些键，Fluently.Configure() 就会失败，并抛出带有 Unrecognized configuration section applicationSettings 消息的异常。

我能做些什么？

这是配置文件：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="MyDB" connectionString="Data Source=|DataDirectory|\MyDB.sdf" providerName="Microsoft.SqlServerCe.Client.3.5" />
</connectionStrings>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <applicationSettings>
        <MyApp.Properties.Settings>
            <setting name="ServerIp" serializeAs="String">
                <value>127.0.0.1</value>
            </setting>
            <setting name="ServerPort" serializeAs="String">
                <value>5678</value>
            </setting>
            <setting name="UseSSL" serializeAs="String">
                <value>True</value>
            </setting>
            <setting name="WsUrl" serializeAs="String">
                <value/>
            </setting>
        </MyApp.Properties.Settings>
    </applicationSettings>
    <userSettings>
        <MyApp.Properties.Settings>
            <setting name="User" serializeAs="String">
                <value>test</value>
            </setting>
            <setting name="Password" serializeAs="String">
                <value>test</value>
            </setting>
        </MyApp.Properties.Settings>
    </userSettings>
</configuration> 
```

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-08T08:12:28.570

您的错误消息几乎是现场的，与 NHibernate 无关：配置需要知道它将提供什么 ConfigSections，您没有指定。这不应该发生，VS是否为您创建了app.config？

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="MyApp.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false"/>
    </sectionGroup>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="MyApp.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <userSettings>
    <!--...-->
  </userSettings>
  <applicationSettings>
    <!--...-->
  </applicationSettings>
</configuration> 
```

如果您想进一步了解 Configuration 的工作原理，[请先阅读本文](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)。

# asp.net - 使用 ASP.NET Web 服务创建 JSON 多对象

> ID：10439439
> 
> 赞同：1
> 
> 时间：2012-05-03T21:15:36.580
> 
> 标签：asp.net, json, web-services

这里有两个相关的 ASP.NET Web 服务 JSON 问题。我正在使用 N 层设计的 ASP.NET 2.0 应用程序。

* * *

问题 1：
我试图让我的 ASP.NET Web 服务生成一个多对象 JSON 响应，其中每个对象返回多个对象。我不确定我是否正确地解释了这一点，所以这是我正在寻找的一个例子。

```
[
    {"id":1, "CommentDataElement": "Value",
        "OldData":{ "Description": "ABC", "Status": "0" },
        "NewData":{ "ShortText": "Text here", "LongText": "More text here" }
    },
    {"id":2, "CommentDataElement": "Value",
        "OldData":{ "Description": "DEF", "Status": "1" },
        "NewData":{ "ShortText": "Text here", "LongText": "More text here" }
    },
    {"id":3, "CommentDataElement": "Value",
        "OldData":{ "Description": "GHI", "Status": "2" }
    },
    {"id":4, "CommentDataElement": "Value",
        "NewData":{ "ShortText": "Text here", "LongText": "More text here" }
    }
] 
```

`id`的 1 和 2 都有`Old`和`New`数据集，而`id`3 只有一个`Old`数据集，`id`4 只有一个`New`数据集。

然后我会使用 jQuery 来处理这个响应。并且基于`Old`和`New`数据集的存在，我将生成正确的页面元素。

的来源`OldData`和`NewData`在两个不同的表中。那么这可能吗？

* * *

问题2：
此外，是否可以让 ASP.NET Web 服务返回具有两种不同对象结构的 JSON 字符串？例子。

```
[
    {...same as above, just cut out for brevity...}
    {"id":4, "CommentDataElement": "Value",
        "NewData":{ "ShortText": "Text here", "LongText": "More text here" }
    },
    {"Count":"100"}
] 
```

基本上我想做的是向服务器发出一个请求，获取我的截断数据集（基于分页，说只返回完整集的 20 条记录）并获取完整记录集计数，以便我可以生成我的页码（分页）。在我的数据访问层上，是否可以对记录集使用返回语句并`OUTPUT`为完整计数使用参数？只是一个想法。

* * *

我很确定我在这里写的 JSON 是不正确的。如果您认为合适，请随时更新。任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:44:43.770

我能够解决这个问题。

基本上，您创建类，然后将类创建为列表。例如...

```
public class OldData
{
    private string _Description = string.empty;
    private string _Status = string.empty;

    public string Description { get {return _Description;} set {_Description = value; } }
    public string Status { get {return _Status;} set {_Status = value; } }
}

public class NewData
{
    private string _ShortText = string.empty;
    private string _LongText = string.empty;

    public string ShortText { get {return _ShortText;} set {_ShortText = value; } }
    public string LongText { get {return _LongText;} set {_LongText = value; } }
}

public class Results
{
    private int? _ID = null;
    private OldData _od = null;
    private NewData _nd = null;

    public int? ID { get {return _ID;} set {_ID = value; } }
    public OldData od { get {return _od;} set {_od = value; } }
    public NewData nd { get {return _nd;} set {_nd = value; } }
}

public class Results_List : List<Results>
{
    public Results_List() { }
} 
```

然后，您可以创建该类的一个实例并使用数据库中的数据填充它。然后，JSON 响应的格式适合客户端逻辑。希望这对其他人有帮助。享受！

# html - 图像结束后水平对齐文本的新行

> ID：10439449
> 
> 赞同：0
> 
> 时间：2012-05-03T21:16:18.610
> 
> 标签：html, css, image, alignment

我在一行文本的右侧有一个图像。如果文本足够长以换行到下一行，则它从图像下方开始。我希望它仍然在第一行文本下方的同一位置开始。

以“Warriors TV”下右侧的最后一个链接为例： [http ://www.nba.com/warriors/fanzonelandingtest_009.html](http://www.nba.com/warriors/fanzonelandingtest_009.html)

以下是这些链接的代码：

```
<img style="padding-right: 10px;" src="imgsrc.jpg" /><a href="link.htm">Link Title Possibly New Line</a><br /> 
```

我能做些什么来实现这一点？如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:23:03.513

为什么不使用内联`<img />`元素，而不是使用图像作为背景图像并调整文本填充？

```
#tab_warriorstv_links_fz span { 
    background:url("/warriors/photos/tvicon_fz.png") no-repeat left top; 
    padding-left:25px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T21:27:22.167

为什么不使用无序列表并设置自定义项目符号？这看起来正是你要对我说的。

# wpf - 如何绑定到祖先数据上下文中的属性？

> ID：10439462
> 
> 赞同：3
> 
> 时间：2012-05-03T21:17:41.010
> 
> 标签：wpf, binding, itemscontrol, relativesource

我定义了一个 ItemsControl，如下所示。基本上，我有一个编辑器列表（EditorList），我想要每个编辑器的超链接。但是，我的打开命令 (OpenEditorCommand) 属性与编辑器列表处于同一级别。当上下文设置为列表中的项目时，我如何引用该属性。我尝试过使用 RelativeSource 方法，但它太复杂了，我无法理解。我在正确的轨道上吗？

```
<ItemsControl ItemsSource="{Binding EditorList}">
   <ItemsControl.ItemTemplate>
      <DataTemplate>
         <TextBlock Margin="2,6" HorizontalAlignment="Center">
            <Hyperlink Command="{Binding RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2, Mode=FindAncestor}, Path=OpenEditorCommand}" CommandParameter="{Binding Name}">
               <StackPanel>
                  <Image Source="{Binding Image}" Width=32/>
                  <TextBlock Text="{Binding Path=Name}"/>
               </StackPanel>
            </Hyperlink>
         </TextBlock>
      </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:32:00.367

您只需要`AncestorLevel`在元素树中可能存在多个搜索类型的祖先的情况下设置 。默认值为 1，表示找到最接近的。

但是您需要在 中指定`Path`要绑定到`OpenEditorCommand`的：`DataContext``ItemsControl`

```
Command="{Binding Path=DataContext.OpenEditorCommand, RelativeSource={RelativeSource AncestorType=ItemsControl, Mode=FindAncestor}}" 
```

# apache - mod_rewrite 的复杂规则

> ID：10439466
> 
> 赞同：1
> 
> 时间：2012-05-03T21:18:05.583
> 
> 标签：apache, mod-rewrite

请帮助我为 mod_rewrite 创建正确的说明。这似乎非常困难。

我需要以下内容：

1.从**www.site.com****重定向**到**site.com**。

 ****```
www.site.com/hello                ==>     site.com/hello
www.site.com/abc/def              ==>     site.com/abc/def 
```

等等，然后应该应用其他规则。

2、直接访问（不重写）一些指定的文件和文件夹（如**robots.txt、images/**等）

也许

```
RewriteCond %{REQUEST_URI} !^/(robots.txt|favicon.ico|images|documents|~.\*) 
```

我对吗？所以，像这样的网址

```
site.com/robots.txt               ==>     site.com/robots.txt
site.com/documents/file1.pdf      ==>     site.com/documents/file1.pdf 
```

应该保持原样，不应该被重写。

3.另一种转变：

```
site.com/index.php?anythinghere   ==>     site.com/a/index.php?anythinghere 
```

4\. 但是如果我们输入 URLs site.com 和 site.com/ Apache 应该调用根文件夹中的 index.php (site.com/index.php)

```
site.com                          ==>     site.com/index.php
site.com/                         ==>     site.com/index.php 
```

5\. 我有 MVC 脚本，如果我们键入以下 URL：

```
1\. site.com/controller or site.com/controller/ or site.com/controller//
2\. site.com/controller/function or site.com/controller/function/
3\. site.com/controller/function/parameter or site.com/controller/function/param1/param2/param3 
```

**如果控制器是列表中**预定义的单词之一，比如“index”、“news”、“contacts”（可能会扩展到几百个单词），那么我们应该调用 index.php，重写 URL以下方式：

```
site.com/controller               ==>     site.com/index.php?q=controller
site.com/controller/              ==>     site.com/index.php?q=controller/
site.com/controller//             ==>     site.com/index.php?q=controller//
site.com/controller/function      ==>     site.com/index.php?q=controller/function
site.com/controller/function/     ==>     site.com/index.php?q=controller/function/
site.com/controller/function/parameter               ==>  site.com/index.php?q=controller/function/parameter
site.com/controller/function/param1/param2/param3    ==>  site.com/index.php?q=controller/function/param1/param2/param3 
```

6\. 最后，如果没有应用所有之前的规则，我们应该重写

```
site.com/anythinghere             ==>     site.com/a/index.php?anythinghere 
```

希望apache不要递归地使用mod_rewrite，否则我会对不同的index.php有很大的麻烦。

我知道这并不容易，但如果你能帮助为一个项目创建规则，那就太好了。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:04:41.230

对于第**一次**重写，您可以将这些行放在 .htaccess 中：

```
RewriteCond %{HTTP_HOST} ^www.site.com$ [NC]
RewriteRule ^(.*)$ http://site.com/$1 [R=301] 
```

`R=301`为了使其成为永久重定向非常重要，这样搜索引擎就不会将`www.site.com`其`site.com`视为两个不同的站点。

对于**第二次**重写，有许多选项可用。让 apache 为所有实际存在的文件（例如图像和 pdf 文档）提供服务并重写那些意味着某些 MVC 命令的 URL 可能对您更有用。

如果你这么认为，你可以覆盖你的**第五次**重写，并写下：

```
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f 

RewriteRule ^/news$ ./index.php?news  [L]
RewriteRule ^/news/(.*)$ ./index.php?news/$1  [L] 
```

依此类推，`controller`您拥有的每一个。如果你打算拥有数百个控制器，那么我认为你应该重新考虑你的系统的设计，或者让它们成为几个主控制器的子控制器，这样这些主控制器就可以写在这个`.htaccess`文件中。

同样重要的是`L`，它告诉 apache 它是执行的最后一行（如果匹配条件，则为最后一行），因此您可以避免递归（如果我没记错的话，还有其他事情）。

覆盖**第三**个：

```
RewriteRule ^/index.php?(.*)$ ./a/index.php?$1  [L] 
```

涵盖**第六个**和最后一个：

```
RewriteRule ^/(.*)$ ./a/index.php?$1  [L] 
```

* * *

因此，涵盖重写 1、2、3、5 和 6，我们可以：

```
RewriteEngine On

# First rewrite
RewriteCond %{HTTP_HOST} ^www.site.com$ [NC]
RewriteRule ^(.*)$ http://site.com/$1 [R=301]

# Second and fifth rewrite
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f 

RewriteRule ^/news$ ./index.php?news  [L]
RewriteRule ^/news/(.*)$ ./index.php?news/$1  [L]

# Third rewrite
RewriteRule ^/index.php?(.*)$ ./a/index.php?$1  [L]

# Sixth rewrite
RewriteRule ^/(.*)$ ./a/index.php?$1  [L] 
```****

# sql - 使用 sqlcmd 创建 csv

> ID：10439476
> 
> 赞同：0
> 
> 时间：2012-05-03T21:19:02.513
> 
> 标签：sql, sql-server, stored-procedures, csv, sqlcmd

我正在尝试使用 SQL 命令创建一个 csv。我正在使用一个简单的表格作为测试。到目前为止，我已经写了这个：

```
DECLARE @sql VARCHAR(1000),
        @cmd VARCHAR(100),
        @sqlCommand VARCHAR(1000)

Set @cmd = 'Select * From DSG.Pawtucket.counts'

SET @sqlCommand = 'SQLCMD -S <server> -U <user> -P <password> -d <database> -W -Q "' + @cmd + '"
-s "|" -o <network path> -h-1' 

EXEC master.dbo.xp_cmdshell @sqlCommand 
```

我在“结果”选项卡中看到查询结果，我没有收到任何错误，但我的文件从未创建。我知道我正在使用有效的网络路径。我什至尝试在 SQL 服务器本地 C: 驱动器上创建文件，但没有成功。我也尝试过使用 bcp，但很沮丧但没有结果。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:45:26.277

去掉文字字符串中的换行符

你写的

```
SET @sqlCommand = 'SQLCMD -S <server> -U <user> -P <password> -d <database> -W -Q "' + @cmd + '"
-s "|" -o <network path> -h-1' 
```

向 xp_cmdshell 发送两个命令

第一个命令在结果选项卡中为您提供来自 @cmd 的结果。

```
SET @sqlCommand = 'SQLCMD -S <server> -U <user> -P <password> -d <database> -W -Q "' + @cmd + '" 
```

然后这个什么都不做

```
 -s "|" -o <network path> -h-1' 
```

下面是你想要的。除了删除回车之外，我还在 '" 之后添加了空格，因为`-s`需要与 @cmd 中的任何内容分开

```
SET @sqlCommand = 'SQLCMD -S <server> -U <user> -P <password> -d <database> -W -Q "' + @cmd 
+ '" -s "|" -o <network path> -h-1' 
```

# python - 将pylint消息保存到文件

> ID：10439481
> 
> 赞同：11
> 
> 时间：2012-05-03T21:20:06.620
> 
> 标签：python, pylint

是否有内置方法可以将 pylint 报告保存到文件中？这样做似乎很有用，以便记录项目的进度并在进行更改时比较多个文件中的报告元素。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T21:25:56.520

你可以在你的shell中重定向它的输出`> somefile.txt`
如果它写入stderr，使用`2>&1 > somefile.txt`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-04T06:57:37.600

注意：[**此选项已弃用，将在 Pylint 2.0 中删除。**](https://docs.pylint.org/en/latest/whatsnew/changelog.html#what-s-new-in-pylint-2-0)

您可以使用`--file-output=y`命令行选项。引用手册页：

```
 --files-output=<y_or_n>
          Put messages in a separate file for each module / package speci‐
          fied  on  the  command  line instead of printing them on stdout.
          Reports  (if   any)   will   be   written   in   a   file   name
          "pylint_global.[txt|html]". [current: no] 
```

输出的格式由 `--output-format=<format>`选项指定，其中格式可以是`text`, `parseable`, `colorized`, `msvs` (visual studio) 和`html`.

# c# - 设置/更新 aspxauth 和 asp.net_sessionid cookie 的过期时间

> ID：10439483
> 
> 赞同：2
> 
> 时间：2012-05-03T21:20:13.857
> 
> 标签：c#, .net, cookies, asp.net-session, .aspxauth

我想知道是否有一种方法可以设置您的 .NET 应用程序来设置和更新浏览器中 aspxauth 和 asp.net_sessionid cookie 的到期时间？

据我所知，cookie 的到期日期类似于 1/1/0001 告诉浏览器保留它们直到浏览器关闭（我使用 Chrome 观察到这一点）。我想设置一个明确的时间，但是，我需要在每次请求时更新那个时间。

我试图用一些代码来做到这一点：

```
var timeoutMins = Session.Timeout;
if (Response.Cookies.Count > 0)
{
   foreach (string s in Response.Cookies.AllKeys)
   {
       if (s == FormsAuthentication.FormsCookieName || s.ToLower() == "asp.net_sessionid")
       {
           Response.Cookies[s].Expires = DateTime.Now.AddMinutes(timeoutMins);
       }
   }
} 
```

我尝试在 global.asax End_Request 事件中执行此操作，尽管这似乎不是一个好地方，因为它每页触发多次并且您无权访问 sessionstate 超时；此外，它只会在登录和注销时触发，所以基本上我可以设置一次，但我永远无法更新它。这会导致我的用户在登录后 15 分钟退出，即使他们一直处于活动状态。

似乎会有一些设置告诉.net来处理这个？我知道这是一个奇怪的请求，但这是这个项目的安全要求，所以我正在努力让它工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:36:07.793

看起来没有多少人在尝试做我正在做的事情，但为了记录，我在应用程序端请求中添加了代码，以在请求中查找 cookie 并在响应中使用适当的过期时间重新创建它们：

```
var timeout = Convert.ToInt32(System.Configuration.ConfigurationManager.AppSettings["myTimeoutConfigSetting"]);    

foreach (var cookey in Request.Cookies.AllKeys)
{
  if (cookey == FormsAuthentication.FormsCookieName || cookey.ToLower() == "asp.net_sessionid")
  {
      var reqCookie = Request.Cookies[cookey];                                      

      if (reqCookie != null)
      {
          HttpCookie respCookie = new HttpCookie(reqCookie.Name, reqCookie.Value);
          respCookie.Expires = DateTime.Now.AddMinutes(timeout);

          Response.Cookies.Set(respCookie);
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T21:24:04.513

这是一个很好的方法

[http://www.andreas-kraus.net/blog/increase-aspnet-authentication-membership-cookie-timeout/](http://www.andreas-kraus.net/blog/increase-aspnet-authentication-membership-cookie-timeout/)

而这个[http://forums.asp.net/p/1158239/1920541.aspx#1920541](http://forums.asp.net/p/1158239/1920541.aspx#1920541)

# python - 将 settings.py 配置文件加载到字典中

> ID：10439486
> 
> 赞同：3
> 
> 时间：2012-05-03T21:20:25.410
> 
> 标签：python, configuration, configuration-files

假设我有一个名为 settings.py 的文件，其内容如下：

```
{
    "translate_tabs_to_spaces": True,
    "word_wrap": "true",
    "font_face": "Monaco",
    "font_size": 14.0,
    "highlight_line": True,
    "ignored_packages":
    [
        ""
    ],
    "what": '''
            This is python file, not json
            '''
} 
```

如何将它放入我的主应用程序文件 app.py 中名为 settings 的字典中？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:22:40.883

为什么不命名该字典`settings`，而不仅仅是从 settings.py 导入它，例如

**设置.py**

```
settings = {} # fill with your data 
```

像这样使用它

```
>>> from settings import settings
>>> print settings
{} 
```

替代解决方案是在设置模块级别添加变量并直接使用它们，为什么需要字典？例如

**设置.py**

```
translate_tabs_to_spaces = True
# more settings 
```

像这样使用它

```
>>> import settings
>>> settings.translate_tabs_to_spaces
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:21:17.587

您可以使用它[`ast.literal_eval()`](http://docs.python.org/library/ast.html#ast.literal_eval)来安全地执行此操作。

```
import ast

data="""\
{
    "translate_tabs_to_spaces": True,
    "word_wrap": "true",
    "font_face": "Monaco",
    "font_size": 14.0,
    "highlight_line": True,
    "ignored_packages":
    [
        ""
    ],
    "what": '''
            This is python file, not json
            '''
}\
"""

print(ast.literal_eval(data)) 
```

给我们：

```
{'what': '\n            This is python file, not json\n            ', 'font_size': 14.0, 'translate_tabs_to_spaces': True, 'font_face': 'Monaco', 'word_wrap': 'true', 'highlight_line': True, 'ignored_packages': ['']} 
```

# ~~编辑：~~

~~鉴于提问者的新评论表明他希望能够`...`在他的配置中使用，这`ast.literal_eval()`将是**不合适**的，因为它无法处理省略号。尚不清楚这是否是他的意思，这仍然是对所提出问题的一个很好的回答。~~

原来提问者正在谈论三重引号字符串，这是正确处理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:22:14.027

在设置模块中为设置字典命名，然后将设置模块导入您的模块并将其加载到变量中，例如

```
import settings
your_settings = settings.settings_dict 
```

# java - 什么是连续编辑文本文件的便捷方法

> ID：10439489
> 
> 赞同：0
> 
> 时间：2012-05-03T21:20:34.493
> 
> 标签：java, string

我目前正在制作一个依赖 VLC 进行媒体流的 Java 应用程序。为了使用 VLC 流式传输媒体，必须使用您想要以特定格式流式传输的所有媒体制作配置文件，如下所示：

> 新的 MyVideo1 vod 启用设置 MyVideo1 输入文件*路径*
> 
> 新的 MyVideo2 vod 启用设置 MyVideo2 输入文件*路径*
> 
> 新的 MyVideo3 vod 启用设置 MyVideo3 输入文件*路径*

所以我想在我的程序中做的是在这个配置文件中动态添加或删除特定条目。请记住，文件必须保持这种格式。因此，如果我想从上面的示例中删除第二个条目，它将如下所示：

> 新的 MyVideo1 vod 启用设置 MyVideo1 输入文件*路径*
> 
> 新的 MyVideo2 vod 启用设置 MyVideo2 输入文件*路径*

添加条目只会追加到此文件。 **我的问题是，有没有办法快速追加和删除这个配置文件中的特定条目并保持这种格式？**

（附注，您可以使用“#”字符向此文件添加注释）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:46:50.570

因此，您在某处的硬盘驱动器上有一个文本文件。如果您查看 java 中的一些 NIO 类，您应该能够动态编辑此文件。

问题变成了，当 VLC 在您更新时读取文件时会发生什么。您需要想出一种方法来防止 VLC 在您写入文件时读取文件。

如果您可以将 VLC 指向配置文件的 URL，那么我将使用为该文件提供服务的 servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:44:34.883

您提到的注释字符“#”可能是在文件中添加/删除行的最佳方式，同时防止 VLC 在您编辑文件时尝试读取。一旦该行准备就绪，就可以删除“#”字符。

对于删除，同样的想法也适用。

# c# - 从混合数据类型的 CSV 文件中读取数据

> ID：10439491
> 
> 赞同：1
> 
> 时间：2012-05-03T21:20:58.720
> 
> 标签：c#, asp.net, sql

只要每个“项目”都是数字或每个项目都是字母数字，这就有效。当我有数字和字母数字的“项目”时，它不会正确填写值。

这是代码：

```
public void updateInventory()
{
    try
    {
        if (File.Exists(inventoryUpdateDirectory + "inventoryUpdate.csv"))
        {
            csvReader csv = new csvReader();
            DataTable inventory = csv.read(inventoryUpdateDirectory + "inventoryUpdate.csv");
            //int test = inventory.Rows.Count;
            string sql = "";

            foreach (DataRow inventoryItem in inventory.Rows)
            {
                try
                {
                    sql = " Update Inventory set OnHand = " + inventoryItem[1] + " WHERE Sku = '" + inventoryItem[0].ToString().Trim() + "'";
                    //executeSQL(sql);
                }
                catch { }
            }

            File.Delete(inventoryUpdateDirectory + "inventoryUpdate.csv");
        }
        else
        {
            writeToFile("fileDoesntExist", inventoryUpdateDirectory + "error.txt");
        }
    }
    catch { }
} 
```

这是它读取的文件：

```
ALB001,0
ALB002,66
10001,0
10016,348 
```

这将起作用：

```
ALB001,0
ALB002,66 
```

这将起作用：

```
10001,0
10016,348 
```

这将不起作用：

```
ALB001,0
ALB002,66
10001,0
10016,348 
```

它将数组填充`inventoryItem`为空`{}`

```
+       inventoryItem[0]    {}  object {System.DBNull} 
```

哪个值应该是`ALB001`

CSV 中的第一个“列”应始终被视为字符串，因为它可以包含字母数字，第二个“列”将始终是数字。

谁能帮我解决这个问题？

我想我只需要编辑 sql 查询以将它们转换为字符串，但我不确定。

CSV 阅读器编辑：

```
namespace CSV
{
    public class csvReader
    {
        public DataTable read(string strFileName)
        {
            OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " + System.IO.Path.GetDirectoryName(strFileName) + "; Extended Properties = \"Text;HDR=NO;FMT=Delimited\"");
            conn.Open();
            string strQuery = "SELECT * FROM [" + System.IO.Path.GetFileName(strFileName) + "]";
            OleDbDataAdapter adapter = new OleDbDataAdapter(strQuery, conn);
            DataSet ds = new DataSet("CSV File");
            adapter.Fill(ds);
            return ds.Tables[0];
        }

        public DataTable read(string strFileName, bool firstRowHeaders)
        {
            string hdr = "NO";
            if (firstRowHeaders) { hdr = "YES"; }

            OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " + System.IO.Path.GetDirectoryName(strFileName) + "; Extended Properties = \"Text;HDR=" + hdr + ";FMT=Delimited\"");
            conn.Open();
            string strQuery = "SELECT * FROM [" + System.IO.Path.GetFileName(strFileName) + "]";
            OleDbDataAdapter adapter = new OleDbDataAdapter(strQuery, conn);
            DataSet ds = new DataSet("CSV File");
            adapter.Fill(ds);
            return ds.Tables[0];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:43:30.727

问题显然出在 CsvReader 类中。由于您没有附加其源代码，因此很难知道为什么它没有用内容填充该数据表，我能做的最好的就是猜测。

我会建议您使用 codeproject 中的这个 csv 阅读器来帮助您：http: [//www.codeproject.com/Articles/86973/C-CSV-Reader-and-Writer](http://www.codeproject.com/Articles/86973/C-CSV-Reader-and-Writer)

您不需要使用数据表，因为它使您能够使用简单的 while 循环遍历文件行。您的代码将如下所示：

```
using (CsvReader reader = new CsvReader(FilePath, Encoding.Default))
{
   while (reader.ReadNextRecord())
   {
          sql = " Update Inventory set OnHand = " + reader.Fields[1] + " WHERE Sku = '" + reader.Fields[0] + "'";
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T14:46:35.643

我知道这是一个较老的问题，我已经尝试了很多方法来解决与此类似的问题，所以我想我会提供我的解决方案。即使我使用的是 C#，您也可以继承 VB 库，并且 TextFieldParser 库可以很好地处理这个问题。对于我的数据，我不知道将导入多少列，尽管每一行都是相同的列数。有些列包含逗号，但没有用引号“”括起来。我创建了一个 DataTable，首先将所有列转换为字符串，稍后我将在其中验证类型。我还删除了我首先用来创建 DataTable 的文件的标题行。我希望这可以帮助某人。

我正在使用的数据示例：

> Header1,Header2,Header3
> A,123,A
> B,123,A
> C,A,Somedata，然后是更多数据

这是我最终提出的解决方案，效果很好。

```
using Microsoft.VisualBasic.FileIO;

        private static DataTable GetDataTableFromCsv(string path)
        {
            var dataTable = new DataTable("ImportData");
            var rows = File.ReadAllLines(path);
            var columns = rows[0].Split(',');
            foreach (var column in columns)
            {
                dataTable.Columns.Add(new DataColumn(column.Trim(), typeof(string)));
            }
            using (var parser = new TextFieldParser(path))
            {
                parser.Delimiters = new[] { "," };
                while (true)
                {
                    var parts = parser.ReadFields();
                    dataTable.Rows.Add(parts);
                    if (parser.EndOfData) break;
                }
            }
            dataTable.Rows[0].Delete();
            return dataTable;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:36:58.073

在下面的示例中，我在 OnHand 值周围添加了单引号，以告诉 SQL 它应该始终期望一个字符串。您最好将 SQL 语句更改为使用“@Parameters”并内联分配值。

```
sql = " Update Inventory set OnHand = '" + inventoryItem[1] + "' WHERE Sku = '" + inventoryItem[0].ToString().Trim() + "'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T21:46:02.397

您可以使用 LINQ 读取 CSV

```
var data = (from line in File.ReadAllLines(fileName).AsParallel()
            select line.Split(',')).ToList(); 
```

然后进行适当的铸造，更新。

# fossil - How to remove a binary file from fossil history

> ID：10439493
> 
> 赞同：7
> 
> 时间：2012-05-03T21:21:06.443
> 
> 标签：fossil

This situation happens a little often, your whole repository has 2MB and then someone thinks it would be great to have a backup of selenium.jar with 20MB in repository. So everyone now must download a repository with at lest 22MB, and version after version of the new binary file the repository grows its size.

Is possible to remove a binary file from fossil? I read that one of fossil philosophies is to never rewrite history, but I don't want to rewrite history I just want to remove the history content like a missing artifact.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:35:41.180

Does [shunning content](http://www.fossil-scm.org/index.html/doc/trunk/www/shunning.wiki) covers what you need? It effectively prevents the files from being synced.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-09-27T05:00:57.770

you could convert the history to git. and then look up how to remove file from git and then rebuild the fossil repository from that. the only problem is the tickets and wiki are gone

# mysql - 将分隔的 excel 数据上传到 MySQL 数据库

> ID：10439494
> 
> 赞同：0
> 
> 时间：2012-05-03T21:21:15.483
> 
> 标签：mysql, database, excel

我有一个巨大的 excel 文件（~6GB），我不得不分成多个文件。现在我需要能够获取每个文件并将其上传到 MySQL 数据库中，以便我可以搜索它。每行显示的格式如下：

```
6003393,"Walgreens","670 N Lake Ave","Pasadena","CA","91101-1220","Los Angeles","6265858926","","","","","","","20 to 49","2.5 to 5 million","591205","Pharmacies & Drug Stores" 
```

我将如何使用这么多数据有效地做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:24:25.900

查看[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)语法。只要您的 CSV 格式正确，它就应该能够加载所有内容……最终。

# asp.net-mvc - Watin 浏览器标题属性为空

> ID：10439495
> 
> 赞同：0
> 
> 时间：2012-05-03T21:21:17.110
> 
> 标签：asp.net-mvc, watin, specflow

我在 mvc3 Web 应用程序上使用 Watin 和 Specflow。我已经设置了一个助手来创建一个静态浏览器以用于我的步骤测试方法。一切似乎都设置正确，但是当我运行测试时，断言中的浏览器标题属性为空（我的“Then”方法）。我还尝试在页面上搜索元素，但浏览器最终会超时。

我尝试过调试，但这似乎也无济于事，因为浏览器是静态的。

还有什么可能导致这种情况？

任何帮助是极大的赞赏！

BTY-浏览器打开并导航到我在第一步请求的页面。

**更新：**

我创建了另一个应用程序来试图找出问题......同样的问题。代码如下所示。

应用程序配置

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="NUnit">
            <section name="TestRunner" type="System.Configuration.NameValueSectionHandler"/>
        </sectionGroup>
    </configSections>
    <NUnit>
        <TestRunner>
            <!-- Valid values are STA,MTA. Others ignored. -->
            <add key="ApartmentState" value="STA" />
        </TestRunner>
    </NUnit>
</configuration> 
```

规范流功能

```
Feature: TestMyWebApp
In order to test my web app
As a user
I want to navigate to the home page

@mytag
Scenario: Navigation to homepage
When I navigate to /Home
Then I should be on the home page 
```

步骤文件

```
[Binding]
public class TestMyWebAppSteps
{
    [When(@"I navigate to /Home")]
    public void WhenINavigateToHome()
    {
        WebBrowser.Current.GoTo("http://localhost:57556/Home");
    }

    [Then(@"I should be on the home page")]
    public void ThenIShouldBeOnTheHomePage()
    {
        Assert.AreEqual("Home", WebBrowser.Current.Title);
    }
} 
```

浏览器助手

```
public static class WebBrowser
{
    public static IE Current
    {
        get
        {
            string key = "browser";
            if (!ScenarioContext.Current.ContainsKey(key))
            {
                ScenarioContext.Current[key] = new IE();
            }
            return ScenarioContext.Current[key] as IE;
        }
    }
} 
```

有什么想法可以查明问题吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:37:11.920

原来这是由于 IE9 在 Internet 站点的保护模式下运行 =\

[升级到 IE9 后出现 WatiN BrowserNotFoundException](https://stackoverflow.com/questions/9999480/watin-browsernotfoundexception-after-upgrading-to-ie9)

高温高压

# html - 如何通过周围的标签排除标签

> ID：10439497
> 
> 赞同：0
> 
> 时间：2012-05-03T21:21:18.523
> 
> 标签：html, css

```
<body>
    <acctctrls>
        <a href="http://www.some-link.com/">Link inside acctctrls tag</a>
    </acctctrls>
    <a href="http://www.some-link.com/">Link outside acctctrls tag</a>
</body> 
```

我希望 acctctrls 标记内的 <a> 标记遵循这个 css：

```
a
{
    color: #C20000;
    font-size: 12px;
    font-weight:600;
    text-align:center;
} 
```

我希望 acctctrls 标记之外的 <a> 标记遵循这个 css：

```
a
{
    text-decoration: none;
    font-style: normal;
    color: #D0D0D0;
}
a:hover
{
    text-decoration: none;
    font-style: bold;
    color: #EEEEEE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:24:06.537

试试这个：

```
acctctrls a {
    color: #C20000;
    font-size: 12px;
    font-weight:600;
    text-align:center; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:24:17.880

你试过了吗：

```
acctctrls a{
    color: #C20000;
    font-size: 12px;
    font-weight:600;
    text-align:center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:25:11.377

对于内部链接，只需将选择器更改为：`acctctrls a, acctctrls a:hover`并在外部代码之后指定它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T21:26:05.277

```
 a {
    // rules for outer tags
   } 

   acctctrls a {
     // rules for a's within acctctrls
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T21:27:38.130

将您的样式更改为：

```
a
{
    text-decoration: none;
    font-style: normal;
    color: #D0D0D0;
}
a:hover
{
    text-decoration: none;
    font-style: bold;
    color: #EEEEEE;
}

acctctrls a
{
    color: #C20000;
    font-size: 12px;
    font-weight:600;
    text-align:center;
} 
```

来自[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html) 当您提供多个标签名称时，默认情况下，当最后一个标签是之前标签的后代时，CSS 将在最后一个标签上执行样式设置。

我知道该链接适用于 CSS2，但同样适用于 CSS3。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T21:28:00.240

保留第二个 a 和 a:hover 规则集并增加第一个的特异性以获取`<acctctrls />`.

```
acctctrls a {
   color: #C20000;
   font-size: 12px;
   font-weight:600;
   text-align:center; 
} 
```

但是，正如 kei 所说，使用带有 class 或 id 的标准元素可能会更好。否则，您将需要使用 JavaScript shiv（例如 document.createElement('acctctrls')）让 IE 识别此元素的 CSS。

# oauth - 在 Wordpress 插件中使用 OAuth

> ID：10439498
> 
> 赞同：1
> 
> 时间：2012-05-03T21:21:20.547
> 
> 标签：oauth

从我读过的所有地方，我都觉得将消费者密钥存储在开源代码中是个坏主意。所以，我在另一个网络服务器上设置了一个外部代理来处理请求和访问令牌。

那么，一旦我从提供者那里收到访问令牌和秘密，我是否应该将这些令牌保存在外部网络服务器上，并在每个请求中轮询网络服务器？或者，我应该将这些令牌返回到用户的 Wordpress 安装中，插件将它们保存到用户的数据库中吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:06:56.977

将它们保存到用户的 wordpress 安装中，无论如何，您都需要在您的代理/中继端点上有某种标识符，以识别带有您保存的访问令牌的插件。

如果访问令牌应该从用户的 wordpress 中泄漏，那么如果没有您始终保持安全的消费者密钥，它仍然无法使用。但是，存在泄露的访问令牌被用于通过中继端点发出经过身份验证的请求的风险。但是如果使用另一种识别机制，您也会遇到同样的情况。

如果你真的想安全起见，你可以在 wordpress 安装和中继服务之间实现一个简单的加密层。例如，访问令牌参数的 SHA1 哈希、URL、时间戳和另一个特定于安装的秘密作为盐。这至少会阻止丢失的访问令牌直接用于您的中继端点。那么我能看到的唯一攻击向量是 wordpress 数据库本身受到了破坏。

# wordpress - Wordpress 2列页面不起作用

> ID：10439501
> 
> 赞同：0
> 
> 时间：2012-05-03T21:21:55.937
> 
> 标签：wordpress

我的一个 wordpress 博客有问题。

该页面并排有两列，当我单击“*编辑页面*”并将代码和内容置于“html 模式”时，但是当我切换到可视模式并更改任何内容时，该列断开，右半部分位于下方第一个（彼此重叠而不是并排）。

我在 CSS 中添加了 'display:inline-block' 和 'float:left' 等，但它仍然没有停留在预期的位置。在 html 和可视模式之间进行编辑时，是否有人对如何将列保持在适当位置有任何想法。（我确实想使用视觉模式）

还要注意 - **我的 php 模板：**

```
 <article class="col-1">
 <?php if (have_posts()) : while (have_posts()) : the_post();?>
 <div class="post">
  <div class="entrytext">
  <?php the_content('<p class="serif">Read the rest of this page &raquo;</p>'); ?> 
  <?php endwhile; endif; ?>
  <?php edit_post_link('Edit this entry.', '', ''); ?>                   
  </article>
   <div class="clear"></div>
             <div class="clear"></div>
             <article class="col-2">
             </article> 
```

## 然后获取页脚

在我的**页面**中，我已将第 1 列的内容放入其中，然后在我放入以下一行：

```
<div class="clear"></div>
            </article>
            <article class="col-2"> 
```

## 然后是第 2 列的内容

关于如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:30:21.300

尝试“清除：两者；”

似乎是一个css问题。

# magento - 我在哪里可以在 Magento 数据库中找到合适的税类 ID？

> ID：10439502
> 
> 赞同：4
> 
> 时间：2012-05-03T21:22:02.640
> 
> 标签：magento

当我使用 API 在 Magento 中创建产品时，我需要提供一个名为“tax_class_id”的字段。我想知道，我需要为增值税百分比提供哪个 ID，例如奥地利的 20% 或德国的 19%。

我在哪里可以找到数据库中的这些 ID？

*旁注：我实际上想编写一个 api 扩展，它返回一个百分比值列表及其税级。如果有人有一个更简单的想法如何做到这一点，那也很好！*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T22:19:45.857

如果您有带有 Firebug 的 Firefox，或者与大多数现在的浏览器具有类似的检查功能，您可以检查任何产品中的税类选择字段并在 html 中查看税类 ID。

如果您需要从数据库中读取它们，您可以在名为“tax_class”的表中找到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T17:14:01.423

您可以在*tax_class*表中找到它。

```
SELECT * FROM tax_class 
```

# triggers - 轻松触发对日期进行排名并插入排名 - 顶点 - Salesforce

> ID：10439503
> 
> 赞同：2
> 
> 时间：2012-05-03T21:22:07.597
> 
> 标签：triggers, salesforce, apex-code

我是 Salesforce 新手，没有任何编码经验。SF 给我留下了深刻的印象，以至于我现在正肩负着学习 APEX 的使命。为了学习APEX，我需要学习java。因此，在努力创建触发器并制作代码示例之后，我通过 iTunesU 注册了一个介绍性的 Java CS 课程（免费 - 来自斯坦福大学）。

如果我可以制作一个简单的触发器，我可以在工作中和朋友一起成为英雄。任何帮助是极大的赞赏。

*   一旦选项列表值保存在联系人记录中，工作流规则将使用联系人的 DATETIME 数据填充公式字段。
*   此选项列表将仅显示工作中促销的一天 b/c。
*   如何设计一个触发器来对 DATETIME 字段进行排序（最早时间 = 1，下次 = 2 等）并将排名插入到同一联系人的另一个 SF a 字段中？
*   我不必担心任何批量加载问题。两个用户可能同时在一个联系人上点击保存。我知道我需要一个测试用例才能将其投入生产，但我稍后会担心！

我发现这是一个好的开始？

[如何对日期字段值的列表项进行排序（Apex、Salesforce）](https://stackoverflow.com/questions/9816899/how-to-sort-list-items-for-date-field-value-apex-salesforce)

这是另一个按字母顺序对列表进行排序的示例：[https ://stackoverflow.com/a/9418463/1373598](https://stackoverflow.com/a/9418463/1373598)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:22:34.763

很高兴您肩负着学习 Apex 的使命！不过，您实际上并不需要了解 Java。一些通用的编程概念（变量、数据类型、循环、方法/函数等）就足够了。

看来您已经对[触发器有所](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_triggers.htm)了解了。您可能知道，它们根据特定条件执行代码。使用它们进行开发时，[触发上下文变量非常重要；](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_triggers_context_variables.htm)这些提供有关正在执行触发操作的记录的数据。我会先彻底阅读该文档。提供的示例非常有帮助。

使用触发器时，[了解调试日志](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_debugging_debug_log.htm)以及如何[检查它们](https://login.salesforce.com/help/doc/en/code_monitoring_debug_logs.htm)也很重要。您可以使用该[`System.debug();`](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_system.htm)方法记录任何内容。

在具备触发器的基础知识后，您可以开始向其中添加排序逻辑。[Lists](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#CSHID=langCon_apex_collections_lists.htm|StartTopic=Content%2FlangCon_apex_collections_lists.htm|SkinName=webhelp)中的数据（如果 List 类型是[原始数据类型](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#langCon_apex_primitives.htm)）可以通过调用该`List.sort();`方法进行排序，但您必须跟踪数据（日期）所在的 sObject。[您可能需要使用排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm)（冒泡排序或插入排序是我以前使用过的一对）编写自己的排序方法，或者使用[一些已经开发的排序代码](http://boards.developerforce.com/t5/Apex-Code-Development/A-gift-for-you-Sorting-a-List-lt-sObject-gt/td-p/107833)。

我知道这是很多信息，但它应该让你开始；祝你好运！

# full-text-search - 如何在 LuceneNet 中使用 indexWriter 删除文档

> ID：10439505
> 
> 赞同：5
> 
> 时间：2012-05-03T21:22:21.680
> 
> 标签：full-text-search, lucene.net

我有在我的控制器中调用的这个方法，它必须删除一个特定的文档。我在一些文章中读到，删除文档的最佳方法是使用 IndexWriter。但我不能让它工作。这是我的代码

我的索引：

```
 var article1 = new Document();
               article1.Add(new Field("Id", "1", Field.Store.YES, Field.Index.ANALYZED));
               article1.Add(new Field("Author", "Author", Field.Store.YES, Field.Index.ANALYZED));
               article1.Add(new Field("Title", "Title", Field.Store.YES, Field.Index.ANALYZED));

  var directory = FSDirectory.Open(new DirectoryInfo(IndexRoute));
           var analyzar = new StandardAnalyzer(Version.LUCENE_29);

           var writer = new IndexWriter(directory, analyzar, true,  IndexWriter.MaxFieldLength.LIMITED);

           writer.AddDocument(article1);
           writer.Optimize();
           writer.Commit();
           writer.Close(); 
```

方法删除：

```
public void Delete(string id)
{
    var directory = FSDirectory.Open(new DirectoryInfo(IndexRoute));
    var analyzar = new StandardAnalyzer(Version.LUCENE_29);
    var writer = new IndexWriter(directory, analyzar, true, IndexWriter.MaxFieldLength.LIMITED);
    var term = new Term("Id", id);
    writer.DeleteDocuments(term);
    writer.Optimize();
    writer.Commit();
    writer.Close();
} 
```

控制器中调用“删除”无效的方法：

```
 public ActionResult Delete()
    {
        _carService.Delete("1");
        return RedirectToAction("Index", "Home");
    } 
```

所以我找不到我的错误，请帮助...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T18:09:57.643

当您为这样的删除方法构建 IndexWriter 时：

```
new IndexWriter(directory, analyzar, true, IndexWriter.MaxFieldLength.LIMITED); 
```

您正在为 create 参数指定 true，这会用空索引覆盖现有索引，从而删除所有文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T05:58:05.380

那是因为您将 id 字段存储为`Field.Index.ANALYZED`，您应该始终将 id 字段存储为`Field.Index.NOT_ANALYZED`，这样这些字段就不会被标记化并按原样存储在索引中。对于您不想在索引时更改的其他字段也是如此。

# multithreading - Indy 的全局、线程安全、cookie 管理器

> ID：10439511
> 
> 赞同：2
> 
> 时间：2012-05-03T21:23:04.367
> 
> 标签：multithreading, delphi, delphi-2010, indy

我的 Delphi 2010 应用程序使用多线程上传内容，上传的数据被 POST 到需要登录的 PHP/Web 应用程序，所以我需要使用共享/全局 cookie 管理器（我正在使用**Indy10 Revision 4743**），因为 TIdCookieManager 不是线程-安全的 ：（

此外，服务器端会话 ID 每 5 分钟自动重新生成一次，因此我**必须**保持全局和本地 cookie 管理器同步。

我的代码如下所示：

```
TUploadThread = class(TThread)
// ...

var
   GlobalCookieManager : TIdCookieManager;

procedure TUploadThread.Upload(FileName : String);
var
   IdHTTP           : TIdHTTP;
   TheSSL           : TIdSSLIOHandlerSocketOpenSSL;
   TheCompressor    : TIdCompressorZLib;
   TheCookieManager : TIdCookieManager;
   AStream          : TIdMultipartFormDataStream;
begin
     ACookieManager := TIdCookieManager.Create(IdHTTP);

     // Automatically sync cookies between local & global Cookie managers
     @TheCookieManager.OnNewCookie := pPointer(Cardinal(pPointer( procedure(ASender : TObject; ACookie : TIdCookie; var VAccept : Boolean)
     begin
          OmniLock.Acquire;
          try
             GlobalCookieManager.CookieCollection.AddCookie(ACookie, TIdHTTP(TIdCookieManager(ASender).Owner).URL{IdHTTP.URL});
          finally
                  OmniLock.Release;
          end;    // try/finally

          VAccept := True;
     end )^ ) + $0C)^;
     // ======================================== //

     IdHTTP         := TIdHTTP.Create(nil);
     with IdHTTP do
     begin
          HTTPOptions     := [hoForceEncodeParams, hoNoParseMetaHTTPEquiv];
          AllowCookies    := True;
          HandleRedirects := True;
          ProtocolVersion := pv1_1;

          IOHandler       := TheSSL;
          Compressor      := TheCompressor;
          CookieManager   := TheCookieManager;
     end;    // with

     OmniLock.Acquire;
     try
        // Load login info/cookies
        TheCookieManager.CookieCollection.AddCookies(GlobalCookieManager.CookieCollection);
     finally
            OmniLock.Release;
     end;    // try/finally

     AStream         := TIdMultipartFormDataStream.Create;

     with Stream.AddFile('file_name', FileName, 'application/octet-stream') do
     begin
          HeaderCharset  := 'utf-8';
          HeaderEncoding := '8';
     end;    // with

     IdHTTP.Post('https://www.domain.com/post.php', AStream);
     AStream.Free;
end; 
```

但它不起作用！调用 AddCookies() 时出现此异常

> 项目 MyEXE.exe 引发异常类 EAccessViolation，并带有消息“地址 00000000 的访问冲突。读取地址 00000000”。

我也尝试使用assign（），即。

```
 TheCookieManager.CookieCollection.Assign(GlobalCookieManager.CookieCollection); 
```

但我仍然得到同样的例外，通常在这里：

```
 TIdCookieManager.GenerateClientCookies() 
```

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:51:40.660

不要对`OnNewCookie`事件使用匿名过程。改用普通的类方法：

```
procedure TUploadThread.NewCookie(ASender: TObject; ACookie : TIdCookie; var VAccept : Boolean);
var
  LCookie: TIdCookie;
begin
  LCookie := TIdCookieClass(ACookie.ClassType).Create;
  LCookie.Assign(ACookie);
  OmniLock.Acquire; 
  try 
    GlobalCookieManager.CookieCollection.AddCookie(LCookie, TIdHTTP(TIdCookieManager(ASender).Owner).URL); 
  finally 
    OmniLock.Release; 
  end;
  VAccept := True;
end; 
```

或者：

```
procedure TUploadThread.NewCookie(ASender: TObject; ACookie : TIdCookie; var VAccept : Boolean);
begin
  OmniLock.Acquire; 
  try 
    GlobalCookieManager.CookieCollection.AddServerCookie(ACookie.ServerCookie, TIdHTTP(TIdCookieManager(ASender).Owner).URL); 
  finally 
    OmniLock.Release; 
  end;
  VAccept := True;
end; 
```

然后像这样使用它：

```
procedure TUploadThread.Upload(FileName : String); 
var 
  IdHTTP           : TIdHTTP; 
  TheSSL           : TIdSSLIOHandlerSocketOpenSSL; 
  TheCompressor    : TIdCompressorZLib; 
  TheCookieManager : TIdCookieManager; 
  TheStream        : TIdMultipartFormDataStream; 
begin 
  IdHTTP := TIdHTTP.Create(nil); 
  try
    ...
    TheCookieManager := TIdCookieManager.Create(IdHTTP); 
    TheCookieManager.OnNewCookie := NewCookie;

    with IdHTTP do 
    begin 
      HTTPOptions     := [hoForceEncodeParams, hoNoParseMetaHTTPEquiv]; 
      AllowCookies    := True; 
      HandleRedirects := True; 
      ProtocolVersion := pv1_1; 

      IOHandler       := TheSSL; 
      Compressor      := TheCompressor; 
      CookieManager   := TheCookieManager; 
    end;    // with 

    OmniLock.Acquire; 
    try 
      // Load login info/cookies 
      TheCookieManager.CookieCollection.AddCookies(GlobalCookieManager.CookieCollection); 
    finally 
      OmniLock.Release; 
    end;

    TheStream := TIdMultipartFormDataStream.Create; 
    try
      with TheStream.AddFile('file_name', FileName, 'application/octet-stream') do 
      begin 
        HeaderCharset  := 'utf-8'; 
        HeaderEncoding := '8'; 
      end;

      IdHTTP.Post('https://www.domain.com/post.php', TheStream); 
    finally
      TheStream.Free; 
    end;
  finally
    IdHTTP.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T21:40:56.823

如果我不得不猜测，我会说你的问题出在某个地方：

```
 // Automatically sync cookies between local & global Cookie managers
 @TheCookieManager.OnNewCookie := pPointer(Cardinal(pPointer( procedure(ASender : TObject; ACookie : TIdCookie; var VAccept : Boolean)
 begin
      OmniLock.Acquire;
      try
         GlobalCookieManager.CookieCollection.AddCookie(ACookie, TIdHTTP(TIdCookieManager(ASender).Owner).URL{IdHTTP.URL});
      finally
              OmniLock.Release;
      end;    // try/finally

      VAccept := True;
 end )^ ) + $0C)^; 
```

我不确定这个`$0C`神奇的数字有什么用，但我敢打赌所有这些演员都在那里，因为你花了很长时间让编译器接受这个。它给您输入错误，说您无法将一件事分配给另一件事。

这些类型错误是有原因的！如果你绕过类型系统，事情很可能会崩溃。尝试将该匿名方法转换为 TUploadThread 上的普通方法并以这种方式分配它，看看它是否工作得更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T22:15:19.117

回复评论：

> 谢谢大家，我转换为普通方法，但我仍然在 AddCookies() 中遇到异常，最后一个发生在读取 FRWLock.BeginWrite; 的行中。在这个过程中 TIdCookies.LockCookieList(AAccessType: TIdCookieAccess): TIdCookieList;

如果您的错误是 Access Violation with `Read of address 00000000`，则具有非常具体的含义。**这意味着您正在尝试对nil**的对象做某事。

当你得到它时，中断调试器。如果错误发生在您所说的发生的行上，那么几乎可以肯定，此时要么**或**`Self`要么`FRWLock`为零。检查这两个变量并找出尚未构建的变量，这将为您指明解决方案。

# python - Python 列表列表

> ID：10439514
> 
> 赞同：1
> 
> 时间：2012-05-03T21:23:14.337
> 
> 标签：python

我被困在一个我想创建一个列表列表的地方，比如

```
[ [3,2,5], [4,8,1]...] 
```

我编写了以下代码，但它打印 [3,2,5,4,8,1,....] 而不是我想要的结构方式。任何帮助，将不胜感激。

```
skill=[]
db=[ [] ]
file=open(filePath,'r')
for line in file:
    for word in line.split(','):
        skill.append(itDictionary[word.strip()])
    db.append(skill)
print db 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:30:45.503

这会做：

```
db=[]
file=open(filePath,'r')
for line in file:
    skill = []
    for word in line.split(','):
        skill.append(itDictionary[word.strip()])
    db.append(skill)
print db 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T21:28:21.923

很难说出你真正需要什么，但你为什么不试试类似的东西：

```
db = []
with open(filePath, 'r') as f:
    for line in f:
        db.append([itDictionary[word.strip()] for word in line.split(',')])
print db 
```

# sharepoint-2010 - 我的 Nintex 自定义操作未在 SingleLineInput 的工作流变量中读取

> ID：10439516
> 
> 赞同：1
> 
> 时间：2012-05-03T21:23:21.943
> 
> 标签：sharepoint-2010, nintex-workflow

我编写了一个自定义工作流操作，它接受多个值，主要使用 SingleLineInput 控件。

当我分配文字值时，我没有问题，但是当我尝试分配工作流变量时，我没有得到变量的实际值，我得到文字文本 - 类似于 {WorkflowVariable:XmlValue} - 假设我的变量是名称 XmlValue。

我不确定我可能做错了什么。有任何想法吗？

这是代码片段：

用于从 SingleLineInput 检索值的 javascript

```
function TPAWriteConfig() {
    configXml.selectSingleNode("/NWActionConfig/Parameters/Parameter[@Name='FieldValue']/PrimitiveValue/@Value").text = getRTEValue('<%=fieldValue.ClientID%>');
    SaveErrorHandlingSection();
    return true;

} 
```

服务器控制：

```
<Nintex:ConfigurationProperty ID="ConfigurationProperty3" runat="server" FieldTitle="Field Value" RequiredField="True">
    <TemplateControlArea>
        <Nintex:SingleLineInput runat="server" id="fieldValue"></Nintex:SingleLineInput>
    </TemplateControlArea>
</Nintex:ConfigurationProperty> 
```

从我的适配器类：

```
private const string FieldValueProperty = "FieldValue";

NWActionConfig config = new NWActionConfig(this);
config.Parameters[2] = new ActivityParameter();
config.Parameters[2].Name = FieldValueProperty;
config.Parameters[2].PrimitiveValue = new PrimitiveValue();
config.Parameters[2].PrimitiveValue.Value = string.Empty;
config.Parameters[2].PrimitiveValue.ValueType = SPFieldType.Text.ToString(); 
```

从活动类：

```
public static DependencyProperty FieldValueProperty = DependencyProperty.Register("FieldValue", typeof (string),
                                                                                              typeof (
                                                                                                  WriteOnePdfFieldActivity));

public string FieldValue
{
    get { return (string) GetValue(FieldValueProperty); }
    set { SetValue(FieldValueProperty, value); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:41:44.830

我觉得回答我自己的问题有点傻，但为了其他人有同样的问题。以下是它的工作原理：

*   如果您在字段中输入文字值，只需使用该值
*   如果您使用任何其他类型的分配，请根据该值进行查找。

下面的代码演示：

```
var fieldValue = FieldValue.StartsWith("{") ? ctx.AddContextDataToString(FieldValue, true) : FieldValue; 
```

这将从工作流上下文中提取值。希望这可以帮助。

# java - Java中搜索方法的概念

> ID：10439517
> 
> 赞同：0
> 
> 时间：2012-05-03T21:23:26.540
> 
> 标签：java, search, methods

我正在尝试编写一种方法（“findEquipements”）来按不同的标准查找设备，但是我遇到了一些问题。

1.  如果我按照每个标准附加结果，我的结果中将多次使用相同的设备。

2.  我想对结果进行排序，以便结果列表中的第一个设备将是具有最匹配标准的设备。

代码：

```
public interface EquipementService {
    List<Equipement> findEquipements (SearchEquipement equipementSerach);
} 
```

那是我的界面，

```
public class SearchEquipement{

    private String marque ;
    private String type ;
    private Date dateAchat ;
    private String user ;

    public String getMarque(){
        return this.marque ;
    }

    public void setMarque(String marque){
        this.marque = marque ;
    }

    public String getType(){
        return this.type ;
    }

    public void setType(String type){
        this.type = type ;
    }

    public String getUser(){
        return this.user ;
    }

    public void setUser(String user){
        this.user = user ;
    }

    public Date getDateAchat(){
        return this.dateAchat ;
    }

    public void setDateAchat(Date dateAchat){
        this.dateAchat = dateAchat ;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:15:47.013

1.  覆盖 SearchEquipement 类中的 hashcode 和 equals 方法。出于调试目的，建议重写 toString。
2.  实现一个可比较的接口并重写 compareTo 方法以相应地对结果进行排序。

3.  使用 Collections.sort() 正确排序“列表列表”的列表项

支持代码 -

```
 public class EquipmentComparable implements Comparator<SearchEquipement>{
  @Override
  public int compare(Equipement eq1, Equipement eq2) {
        //todo 
  }
 }

   List<Equipement> equipmentList = EquipementService.findEquipements  (equipementSerach);
   Collections.sort(equipmentList,new EquipmentComparable()); 
```

# c# - SignalR 和组

> ID：10439520
> 
> 赞同：3
> 
> 时间：2012-05-03T21:23:42.743
> 
> 标签：c#, signalr

有没有办法获得来电者组？

为了解决这个问题，我在客户加入聊天时创建了一个**Caller.Group 。**在发送消息时，我正在这样做：

```
var clients = Hub.GetClients<ChatHub>();
clients[Caller.group].newMessage(String.Format("({0}) <b>{1}</b>: {2}", DateTime.Now.ToString("HH:mm"), Caller.Name, message));
clients.isAlive(); 
```

这是唯一的方法吗？

# c++ - C++ 中 2D 迷宫游戏的链接错误 - darkGDK

> ID：10439521
> 
> 赞同：-2
> 
> 时间：2012-05-03T21:23:47.483
> 
> 标签：c++

错误：

> 1>libcpmtd.lib(xdebug.obj) : 错误 LNK2019: 函数“void * __cdecl operator new(unsigned int,struct std::_DebugHeapTag_t const &,char *,int)”中引用的无法解析的外部符号 __malloc_dbg (??2@ YAPAXIABU_DebugHeapTag_t@std@@PADH@Z)
> 
> 1>libcpmtd.lib(xdebug.obj) : 错误 LNK2019: 函数“void __cdecl operator delete(void *,struct std::_DebugHeapTag_t const &,char *,int)”(??3@YAXPAXABU_DebugHeapTag_t) 中引用的无法解析的外部符号 __free_dbg @std@@PADH@Z)
> 
> 1>libcpmtd.lib(stdthrow.obj)：错误 LNK2019：无法解析的外部符号 __CrtDbgReportW 在函数“void __cdecl std::_Debug_message(wchar_t const *,wchar_t const *,unsigned int)”(?_Debug_message@std@@YAXPB_W0I@ Z)

他们的意思是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:30:35.523

如果您使用的是 Microsoft Visual Studio，请尝试`msvcrt.lib`在项目配置的链接器设置中添加其他依赖项。

否则，您需要链接到`msvcrt.lib`.

# c - 不同变量的条件检查

> ID：10439522
> 
> 赞同：0
> 
> 时间：2012-05-03T21:23:50.000
> 
> 标签：c, conditional-statements

我有一个基于另一个变量设置变量的函数。

```
if(!button_x.on)
   button_x.on = 1;
if(!button_y.on)
   button_y.on = 1;
if(!button_z.on)
   button_z.on = 1;
.
.
. 
```

如果是 x, y, z, ...。仅在运行时确定。对于各种（100 多个）不同的情况有多个这样的条件看起来并不好。有没有更好的方法在 C 中解决这个问题？

* * *

编辑：我应该更好地构建我上面的例子。

```
if (!structureA.visited)            
    visit_structureA(); // does some operation
if (!structureB.visited)            
visit_structureB();
if (!structureC.visited)            
visit_structureC(); 
```

. . .

结构的数量和结构的名称在编译时是未知的。但是结构名称遵循上面显示的特定模式。它仅在运行时才知道。我尝试使用类似的宏：

```
#define VISIT(str) \
    if (!structure##str.visited) \
        visit_structure##str();

//In the function:
// str = 'known at runtime' 
  VISIT(str); 
```

但这显然不起作用，因为预处理器指令在编译时而不是运行时被替换。我不确定是否有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:26:51.517

在您的示例中，您根据相同的变量设置变量值，而不是另一个，如果是这种情况，并且您想将其从 0 更改为 1，反之亦然，您可以无条件地这样做：

```
button_x.on = !button_x.on; 
```

如果您有许多具有相同行为理念的人，请考虑使用数组并对其进行迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:27:19.607

在 C 中，以下条件：

```
if (!x)
  x = 1; 
```

相当于：

```
x = 1; 
```

如果变量是布尔值（开/关），我认为如果我们谈论按钮就是这种情况。

# java - java重新排序和内存模型

> ID：10439527
> 
> 赞同：7
> 
> 时间：2012-05-03T21:24:12.083
> 
> 标签：java

我在 Java 规范中看到了这一点：

如果 x 和 y 是同一线程的操作，并且 x 在程序顺序中位于 y 之前，则 x 发生在 y 之前。

还有这个

原代码
Thread 1
r2 = A;
B = 1;

有效的编译器转换（允许编译器重新排序任一线程中的指令，当这不影响单独执行该线程时）
线程 1
B = 1；
r2 = A；

我对这两件事感到困惑。
如果动作 x 出现在动作 y 之前，那么 x 应该出现在 y 之前。如果我们认为 x 为 r2=A，y 为 B=1，则 r2=A 应该在 B=1 之前发生。怎么可能有任何重新排序，如果 x 发生在 y 为真之前，为什么 B=1 在 r2=A 之前执行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T21:27:37.787

JLS 的[第 17.4.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)*特别指出*了这一点：

> 应该注意的是，两个动作之间存在之前发生的关系并不一定意味着它们必须在实现中以该顺序发生。如果重新排序产生与合法执行一致的结果，则不是非法的。

如果有帮助，请在规范中将“happens-before”替换为“wurfles”，这样您对它的含义的*直觉*就不会发挥作用。您期望规范中不存在的保证-我怀疑是由于命名。

# blackberry - Blackberry Bitmapfield 在屏幕上占用空间但在 Horizo ntalfieldmanager 中不显示

> ID：10439528
> 
> 赞同：0
> 
> 时间：2012-05-03T21:24:13.143
> 
> 标签：blackberry, bitmapfield

我正在使用此代码-

```
HorizontalFieldManager hfm = new HorizontalFieldManager();
    this.add(hfm);
Bitmap HELLO_LOGO = Bitmap.getBitmapResource("test.jpg");
BitmapField helloBmpField = new BitmapField(HELLO_LOGO);
hfm.add(helloBmpField); 
```

我在 res 下的 img 文件夹中有 3 个文件 - test.jpg,icon.png,tester.gif 我在水平管理器中也有一个标签字段。它们中的任何一个现在都显示，但不是两者都显示。我检查了图像的大小也很好。我已经一个一个地尝试了所有 3 个文件 - 它占用了屏幕上的一些空间，但图像没有与 3 个文件中的任何一个一起显示

有人可以告诉我我做错了什么谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:22:01.217

检查**`extension`**您放在**`res`**文件夹中的图像的名称。可能是图像**`test.JPG`**在文件夹中被命名为（扩展名的大写字母），**`res`**但在您编写的代码中**`test.jpg`**（扩展名的小写字母）或任何其他类似的命名错误......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:35:36.047

您可以在此代码中添加一些调试输出语句，并检查图像是否已加载。

缺少一些上下文，我假设这段代码取自 Screen 类的构造函数。如果不是，这可能是事件处理线程的问题。

首先检查：文件名是否完整？应该是“img/test.jpg”而不是“test.jpg”吗？

# max-msp-jitter - How do I layer multiple layers of images in a Max / MSP patch?

> ID：10439531
> 
> 赞同：2
> 
> 时间：2012-05-03T21:24:20.457
> 
> 标签：max-msp-jitter

have a photo attached to explain the concept, but essentially, I want to have a background video or image with multiple pngs layered on top like so.

![enter image description here](../Images/40c3745d7d7b07d9d4bdb56528a295d0.png)

how would I achieve this? I sense that jit.alphablend is a component of this...

I have also posed this to the MAX forums here [http://cycling74.com/forums/topic.php?id=39707](http://cycling74.com/forums/topic.php?id=39707) the sample patch I have created is there.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:29:47.233

Answer was found here, [http://cycling74.com/forums/topic.php?id=39389](http://cycling74.com/forums/topic.php?id=39389)

1.  each "layer" gets connected to a jit.gl.videoplane object
2.  all "layers" get routed to a jit.gl.render object
3.  the jit.gl.render object gets routed to a jit.window ob (or similar)

# python - 无法在 OSX 上将 openpyxl 导入 python

> ID：10439539
> 
> 赞同：1
> 
> 时间：2012-05-03T21:25:48.043
> 
> 标签：python, openpyxl

我使用easy_install 安装openpyxl 并成功安装。但是，当我尝试通过 usin from openpyxml import Workbook 命令导入它时，pycharm 无法识别它。它是未解决的参考。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:14:29.947

在您的评论中，您的 openpxyl 中有一个额外的 m，并且您缺少工作簿模块。

尝试：

```
from openpyxl.workbook import Workbook 
```

# wpf - 预加载包含许多项目的 WPF 列表视图

> ID：10439540
> 
> 赞同：2
> 
> 时间：2012-05-03T21:25:53.017
> 
> 标签：wpf, dependency-injection, prism, mef

我正在使用 Prism 和 MEF 创建 WPF GUI。我很想知道是否有一种方法可以在用户查看 WPF 控件之前对其进行预填充。

具体来说，我有一个 UserControl，它使用 ListView 来显示通过 WCF 上的网络调用检索到的大约 8000 个项目的列表。

我已经确定瓶颈不是网络调用，而是 ListView 本身的创建。WPF ShellViewModel 当前执行网络预取，以便所有必需的数据都存在于客户端，但由于我使用 Prism/MEF 的依赖项注入，因此在用户单击包含此 ListView 的选项卡之前不会创建视图，随后在创建 ListView（填充 8K 项）时“冻结”。我怀疑视图依赖项的 LazyLoading 也参与其中。

有没有办法将此 ListView 创建移动到应用程序的引导阶段？我希望在用户单击它之前加载/填充此视图，以便没有“滞后”。

减少要查看的项目数量不是一种选择。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:18:41.910

试试[Virtualization](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.isvirtualizing.aspx)，听起来这正是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:47:48.000

试试这个

```
<ListView ItemsSource="{Binding Your8kCollection}">
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
               <VirtualizingStackPanel />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
        ...
 </ListView> 
```

# closures - 为什么要使用自调用闭包来加载 Javascript FB SDK？

> ID：10439543
> 
> 赞同：0
> 
> 时间：2012-05-03T21:26:02.667
> 
> 标签：closures, facebook-javascript-sdk

来自：http: [//developers.facebook.com/docs/guides/web/](http://developers.facebook.com/docs/guides/web/)

```
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 
```

2个问题：

1.  为什么用于在自调用闭包中加载 FB SDK 的代码？
2.  代码的哪一部分实际上使 SDK 异步加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:40:17.277

该函数是自调用的，以免污染全局命名空间。它可以很容易地写成如下：

```
function loadScript(d, s, id){
    //...
}
loadScript(document, 'script', 'facebook-jssdk'); 
```

但是你有一个名为 loadScript 的对象在全局范围级别上浮动，这将与任何其他也有一个名为 loadScript 的变量或函数的库发生冲突。

它是异步的，因为它动态地将脚本元素插入到 DOM 中，这是一个异步操作。看看这篇文章进行更深入的讨论， http: [//friendlybit.com/js/lazy-loading-asyncronous-javascript/](http://friendlybit.com/js/lazy-loading-asyncronous-javascript/)

此外，这不是闭包，因为函数内部没有函数。闭包是一个维护其环境状态的函数。无论如何，这种区别对于这个问题并不重要。

# python - Python：for循环不会完成

> ID：10439550
> 
> 赞同：2
> 
> 时间：2012-05-03T21:26:51.390
> 
> 标签：python, for-loop

在我开始之前，让我先说我对编程真的很陌生，所以请不要杀了我。

作为练习，我编写了一个脚本，该脚本应该从 txt 中获取十六进制数字列表，将它们转换为十进制并将它们写入另一个文件。这就是我想出的：

```
hexdata = open(raw_input("Sourcefile:")).read().split(',')
dec_data = []

print hexdata
x = -1
for i in hexdata:
    next_one = hexdata.pop(x+1)
    decimal = int(next_one, 16)
    print "Converting: ", next_one, "Converted:", decimal
    dec_data.append(decimal)

print dec_data

target = open(raw_input("Targetfile: "), 'w')
for n in dec_data:
    output = str(n)
    target.write(output)
    target.write(",") 
```

当我运行脚本时，它会在没有错误的情况下完成，但它只会转换并写入我的源文件中的前 30 个数字并忽略所有其他数字，即使它们已加载到“hexdata”列表中。我尝试了几种变体，但它从不适用于所有数字（48）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T21:31:50.870

您的第一个循环试图迭代 hexdata，同时使用 hexdata.pop() 将值从列表中拉出。只需将其更改为：

```
for next_one in hexdata:
    decimal = int(next_one, 16)
    print "Converting: ", next_one, "Converted:", decimal
    dec_data.append(decimal) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:34:00.977

迭代列表时的原则是不要修改您正在迭代的列表。如果必须，您可以制作列表的副本以进行迭代。

```
for i in hexdata[:]: # this creates a shallow copy, or a slice of the entire list
    next_one = hexdata.pop(x+1)
    decimal = int(next_one, 16)
    print "Converting: ", next_one, "Converted:", decimal
    dec_data.append(decimal) 
```

[`copy.deepcopy`](http://docs.python.org/library/copy.html#copy.deepcopy)您也可以使用`hexdata[:]`.

# phpunit - CakePHP 2.0 中的集成测试

> ID：10439553
> 
> 赞同：6
> 
> 时间：2012-05-03T21:26:57.817
> 
> 标签：phpunit, integration-testing, cakephp-2.0

我是一名 Rails 开发人员，我想用 cakephp 2.0 做一些 capybara+(rspec 或 cucumber) 风格的集成测试。我使用的是 PHPUnit（cake 2.0 的默认测试框架），但我不知道如何同时将它与 Selenium 和 Cake 集成以获得您在 Rails 上的完整堆栈效果

那么，对于使用 cake 2.0 的经验 php 开发人员......你们如何进行适当的集成测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:30:44.960

对此没有答案，我并不感到惊讶——CakePHP 中的测试人员社区似乎非常小。我参与过包含大量功能和单元测试的大型项目（目前包含大约 1500 个测试的套件），但为此我需要扩展 CakePHP 测试套件的功能（你可以看看我现在稍微过时的[TDD插件](http://github.com/joonty/cakephp-tdd)）。

当我们刚开始的时候，我们对集成测试还不是很了解，而建立一个像样的单元测试环境已经足够挑战了。我们现在使用 Rails :)

基本上，这不是一条陈旧的道路。要使某些东西正常工作，需要对框架进行扩展——它还需要一个新的测试用例类，它扩展并集成了和`PHPUnit_Extensions_Selenium2TestCase`的任何必要功能。`CakeTestCase``ControllerTestCase`

我希望你能到某个地方！如果你这样做了，如果你能与社区的其他人分享代码，那就太好了。

# ios - 通过删除表视图中的行获取 SIGABRT

> ID：10439555
> 
> 赞同：0
> 
> 时间：2012-05-03T21:27:09.080
> 
> 标签：ios, iphone, xcode, uitableview, sigabrt

我试图让一个表格视图列出许多存储在数组中的对象，并且它工作正常，而不是当我尝试删除一行时，它会抛出一个 SIGABRT。我检查了它是否正确更新了数组。SIGABRT 似乎与表中的节数有关。这是表格视图控制器的代码：

日历视图控制器.h

```
#import <UIKit/UIKit.h>
#import "Job.h"
#import "Shift.h"
#import "AppDelegate.h"

@interface CalendarViewController : UITableViewController

@property (nonatomic, strong) NSMutableArray *currentShiftsList;
@property (nonatomic, strong) AppDelegate *dataCenter;

@end 
```

日历视图控制器.m

```
#import "CalendarViewController.h"

@interface CalendarViewController ()

@property (nonatomic, strong) NSMutableDictionary *sections;
@property (nonatomic, strong) NSArray *sortedShifts;
@property (strong, nonatomic) NSDateFormatter *sectionDateFormatter;
@property (strong, nonatomic) NSDateFormatter *cellDateFormatter;

@end

@implementation CalendarViewController

@synthesize sections, sortedShifts, currentShiftsList, dataCenter, sectionDateFormatter, cellDateFormatter;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (NSDate *)dateAtBeginningOfDayForDate:(NSDate *)inputDate {

    // Use the user's current calendar and time zone
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSTimeZone *timeZone = [NSTimeZone systemTimeZone];
    [calendar setTimeZone:timeZone];

    // Selectively convert the date components (year, month, day) of the input date
    NSDateComponents *dateComps = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:inputDate];

    // Set the time components manually
    [dateComps setHour:0];
    [dateComps setMinute:0];
    [dateComps setSecond:0];

    // Convert back       
    NSDate *beginningOfDay = [calendar dateFromComponents:dateComps];
    return beginningOfDay;
}

- (NSDate *)dateByAddingYears:(NSInteger)numberOfYears toDate:(NSDate *)inputDate
{
    // Use the user's current calendar
    NSCalendar *calendar = [NSCalendar currentCalendar];

    NSDateComponents *dateComps = [[NSDateComponents alloc] init];
    [dateComps setYear:numberOfYears];

    NSDate *newDate = [calendar dateByAddingComponents:dateComps toDate:inputDate options:0];
    return newDate;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    dataCenter = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    currentShiftsList = [[NSMutableArray alloc] initWithArray:dataCenter.shiftsList];

    self.sectionDateFormatter = [[NSDateFormatter alloc] init];
    [self.sectionDateFormatter setDateStyle:NSDateFormatterLongStyle];
    [self.sectionDateFormatter setTimeStyle:NSDateFormatterNoStyle];

    self.cellDateFormatter = [[NSDateFormatter alloc] init];
    [self.cellDateFormatter setDateStyle:NSDateFormatterNoStyle];
    [self.cellDateFormatter setTimeStyle:NSDateFormatterShortStyle];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    self.navigationItem.rightBarButtonItem = self.editButtonItem;

    self.sections = [NSMutableDictionary dictionary];
    for (Shift *shift in dataCenter.shiftsList) {

        // Reduce event start date to date components (year, month, day)
        NSDate *dateRepresentingThisDay = [self dateAtBeginningOfDayForDate:shift.startDate];

        // If we don't yet have an array to hold the events for this day, create one
        NSMutableArray *shiftsOnThisDay = [self.sections objectForKey:dateRepresentingThisDay];
        if (shiftsOnThisDay == nil) {
            shiftsOnThisDay = [NSMutableArray array];

            // Use the reduced date as dictionary key to later retrieve the event list this day
            [self.sections setObject:shiftsOnThisDay forKey:dateRepresentingThisDay];
        }

        // Add the event to the list for this day
        [shiftsOnThisDay addObject:shift];
    }

    // Create a sorted list of days
    NSArray *unsortedShifts = [self.sections allKeys];
    self.sortedShifts = [unsortedShifts sortedArrayUsingSelector:@selector(compare:)];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return [self.sections count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    NSDate *dateRepresentingThisDay = [self.sortedShifts objectAtIndex:section];
    NSArray *eventsOnThisDay = [self.sections objectForKey:dateRepresentingThisDay];
    return [eventsOnThisDay count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *reuseIdentifier = @"shifts";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];

    NSDate *dateRepresentingThisDay = [self.sortedShifts objectAtIndex:indexPath.section];
    NSArray *eventsOnThisDay = [self.sections objectForKey:dateRepresentingThisDay];
    Shift *shift = [eventsOnThisDay objectAtIndex:indexPath.row];

    cell.textLabel.text = shift.jobtitle;

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"h:mm a"];

    NSString *start = [formatter stringFromDate:shift.startDate];
    NSString *end = [formatter stringFromDate:shift.endDate];

    NSString *detail = [[NSString alloc] initWithFormat:@"%@ to %@", start, end];
    cell.detailTextLabel.text = detail;
    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSDate *dateRepresentingThisDay = [self.sortedShifts objectAtIndex:section];
    return [self.sectionDateFormatter stringFromDate:dateRepresentingThisDay];
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source

        [currentShiftsList removeObjectAtIndex:indexPath.row];
        dataCenter.shiftsList = currentShiftsList;

        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:43:13.860

这对我来说没有意义。

```
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

为什么不只是：

```
[tableView deleteRowsAtIndexPaths:indexPath.row withRowAnimation:UITableViewRowAnimationFade]; 
```

还记得删除后重新加载 TableView（如果你想要的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:38:51.773

当您删除一行时，您正在从 currentShiftsList 数组中删除一个项目。但是，您没有在 UITableViewDataSource 相关方法中使用该数组。TableView 预计其 DataSource 中会少 1 个项目，但您将返回原始项目数。

总的来说，事情非常令人困惑，因为您有多个集合试图管理同一组数据（或该数据的副本）。尝试查看 CoreData 和 NSFetchedResultsController，它们专门用于管理一组数据并将任何更改传播到 UITableView。

# php - 带重新加载的 PHP 新闻提要

> ID：10439557
> 
> 赞同：1
> 
> 时间：2012-05-03T21:27:15.220
> 
> 标签：php, javascript, jquery, pusher

我有一个基于 PHP 和 MYSQL 的新闻源。要获取新内容，用户必须刷新页面。我正在开发一个推送系统，该系统将使用新帖子更新元素，而无需刷新整个页面。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:30:13.397

听起来像是[Ajax 的工作！](http://www.w3schools.com/ajax/ajax_intro.asp)

此外，如果您想让工作变得非常简单，请使用[jquery](http://jquery.com/)。语法看起来像这样：

```
$.ajax({
type: "post", url: "/SomeController/SomeAction",
success: function (data, text) {
    //....
},
error: function (request, status, error) {
    alert(request.responseText);
}
}); 
```

**编辑**

要在用户单击“显示更多内容”链接时更新页面，您可以使用 javascripts onclick 函数或使用 jquery 的内置内容。

常规 JS：

```
<somekindOfLinkOrButton onclick("moarStories();")/>

<script>
    function moarStories(){
        //ajax here
    };
</script> 
```

Jquery方式（更容易）

```
<script>
   $("#ElementId").click(function(){
         //ajax here
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:30:22.457

您只需向服务器发送一个请求，服务器就会尝试保持连接活动，直到您获得新的更新。当您从数据库中获得新的更新时，您只需将其推送到客户端并关闭此连接

# rspec - RSpec 测试控制器以限制 Rails 3.2 上的用户行为

> ID：10439567
> 
> 赞同：0
> 
> 时间：2012-05-03T21:27:53.873
> 
> 标签：rspec, rspec2, rspec-rails

我正在尝试将用户限制为执行特定操作的管理员。在下文中，当用户登录（不是管理员）时，它不应该从传入的哈希中访问操作。**这是它工作**的 RSpec 代码，但对传入的哈希有疑问：

```
 { "new"   => "get",
  "create"  => "post",
  "edit"    => "get",
  "update"  => "put",
  "destroy" => "delete" }.each do |action, method|
    it "cannot access the #{action} action" do
      sign_in(:user, user)
      send(method, action.dup, :id => project.id)
      response.should redirect_to(root_path)
      flash[:alert].should eql("You must be an admin to do that.")
    end
  end 
```

我想知道为什么这里使用字符串`"new"`, `"create"`, ... 而不是使用符号`:new`, `:create`？它与`action.dup`以后的`send`方法调用有关吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:44:29.940

问题是符号没有`.dup`方法，但字符串有。尝试在 IRB 或 Rails 控制台中执行此操作，您会发现它失败了。

但是，这是为了行动。我不确定这是否`method`可能是一个符号。不过你可以试一试。

# c++ - C++中关于成员变量和构造函数调用的创建过程

> ID：10439571
> 
> 赞同：1
> 
> 时间：2012-05-03T21:28:07.440
> 
> 标签：c++, visual-studio, constructor

当为我的一个类调用构造函数时，我遇到了一个奇怪的错误。本质上，我正在做的是：

我有一个类“A”，它有两个类型为“B”、“C”的成员变量。“C”*必须*由“B”类型的成员启动。所以构造函数必须是：

```
A::A():
c(b)
{} 
```

如果类的布局如下：

```
class A
{
   B b;
   C c;
} 
```

但是如果类的布局如下：

```
class A
{
   C c;
   B b;
} 
```

我的第一个猜测是，如果我要在构造函数中初始化 c(b)，当然必须在 c 之前创建 b。我不知道这是否正确。是否在分配任何成员变量*之前*调用了构造函数？还是先分配在构造函数中引用的成员变量，然后在构造函数末尾分配任何剩余的未引用成员变量（例如，如果构造函数中未引用另一个成员变量“C c2”）？

我在 Visual Studio 2010 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:33:01.670

您的成员按照它们在类定义中出现的顺序进行初始化。在您的第二个示例中，当您初始化 c 时，b 尚未初始化。

如果我在成员初始化程序中将它们乱序，我的编译器会警告我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:33:32.207

成员总是按照类内的声明顺序构造的。

因此：

```
class A
{
   B b;
   C c;
} 
```

在完全构建后通过 b 时工作正常。
如果你这样做：

```
class A
{
   C c;
   B b;
} 
```

然后，您正在使用尚未构造的 B 构造 C。如果您按值传递，这可能会破坏复制构造函数。如果您通过引用传递，那么如果它在 C 构造函数中使用，那么它使用的是“B”类型的未初始化对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:33:33.550

构造函数类的顺序取决于类定义中的顺序。第二个示例不起作用，因为尚未调用 B 类构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T21:39:14.643

所以，它的工作方式是：

1.  开始构建您的对象。
2.  非虚拟基类按声明顺序构造。
3.  虚拟基类按声明顺序构造。
4.  创建当前类部分（初始化任何 vtable 等）。
5.  成员变量是按照在类声明中出现的顺序构造的，而不是初始化列表。
6.  您的构造函数主体已执行。
7.  您的对象的构造已完成。

我可能弄错了 #3 的位置，我很少使用虚拟基础，也很少编写依赖于这些东西的代码。为什么？因为它很复杂，而且这样的代码非常脆弱。

破坏以完全相反的顺序发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T21:37:14.783

只是为了澄清，你说：

> 我有一个类“A”，它有两个类型为“B”、“C”的成员变量。“C”必须由“B”类型的成员启动。所以构造函数必须是：

但是你的代码：

```
A::A()
: c(b) 
{
} 
```

`c`说用成员变量初始化`b`，而不是你的措辞所说的*类型。*`B`

也许你想要：

```
A::A()
: c(B()) 
{
} 
```

反而？

# objective-c - 在 iOS 上使用 Twitter 处理 JSON 问题

> ID：10439574
> 
> 赞同：0
> 
> 时间：2012-05-03T21:28:18.560
> 
> 标签：objective-c, ios, twitter, touchjson

我正在尝试解析从 Twitter 返回的 Twitter 用户状态更新 JSON：

```
NSDictionary *publicTimeline = [NSDictionary dictionaryWithJSONData:responseData error:&jsonParsingError];
NSLog(@"%@ - %@",publicTimeline,[publicTimeline class]); 
```

这会给我从 Twitter 返回的看起来非常整洁的 JSON，但它说该类是 _NSArrayI - 这已经令人困惑，但我假设它是某种 Touch JSON 特性。

但是，一旦我有了字典，我就无法弄清楚如何用它做任何事情。如果我尝试：

```
NSArray *array = [publicTimeline allKeys]; 
```

或者

```
NSArray *tweetsArray = [dict objectForKey:@"results"]; 
```

...由于无法识别的选择器而崩溃。

在我的一生中，我找不到任何关于如何使用 Touch JSON 库来实际抓取对象的实际示例。我的意思是，我如何获取第一条推文？那条推文中的日期怎么样？

编辑：这就是 NSLog 所说的：

```
(
    {
    contributors = "<null>";
    coordinates = "<null>";
    "created_at" = "Thu May 03 05:04:05 +0000 2012";
    favorited = 0;
    geo = "<null>";
    id = 197914401796403200;
    "id_str" = 197914401796403200;
    "in_reply_to_screen_name" = "<null>";
    "in_reply_to_status_id" = "<null>";
    "in_reply_to_status_id_str" = "<null>";
    "in_reply_to_user_id" = "<null>";
    "in_reply_to_user_id_str" = "<null>";
    place = "<null>";
    "retweet_count" = 4;
    retweeted = 0;
    source = "<a href=\"http://ubersocial.com\" rel=\"nofollow\">UberSocial for BlackBerry</a>";
    text = "Hear hear RT @saarsaar I am excited that more &amp; more entrepreneurs seem to be favoring VCs who help most, care most, &amp; love product";
    truncated = 0;
    user =         {
        "contributors_enabled" = 0;
        "created_at" = "Thu Apr 26 06:43:28 +0000 2007";
        "default_profile" = 0;
        "default_profile_image" = 0;
        description = "2x entrepreneur. Sold both companies (last to salesforce.com). Turned VC looking to invest in passionate entrepreneurs";
        "favourites_count" = 49;
        "follow_request_sent" = "<null>";
        "followers_count" = 65580;
        following = "<null>";
        "friends_count" = 835;
        "geo_enabled" = 0;
        id = 5520332;
        "id_str" = 5520332;
        "is_translator" = 0;
        lang = en;
        "listed_count" = 4501;
        location = "Los Angeles";
        name = "Mark Suster";
        notifications = "<null>";
        "profile_background_color" = 9AE4E8;
        "profile_background_image_url" = "http://a0.twimg.com/profile_background_images/4977283/s_sunset23.jpg";
        "profile_background_image_url_https" = "https://si0.twimg.com/profile_background_images/4977283/s_sunset23.jpg";
        "profile_background_tile" = 1;
        "profile_image_url" = "http://a0.twimg.com/profile_images/85156906/msuster_fb_normal.jpg";
        "profile_image_url_https" = "https://si0.twimg.com/profile_images/85156906/msuster_fb_normal.jpg";
        "profile_link_color" = 0000FF;
        "profile_sidebar_border_color" = 87BC44;
        "profile_sidebar_fill_color" = E0FF92;
        "profile_text_color" = 000000;
        "profile_use_background_image" = 1;
        protected = 0;
        "screen_name" = msuster;
        "show_all_inline_media" = 1;
        "statuses_count" = 14592;
        "time_zone" = "Pacific Time (US & Canada)";
        url = "http://bothsid.es";
        "utc_offset" = "-28800";
        verified = 0;
    };
},
    {
    contributors = "<null>";
    coordinates = "<null>";
    "created_at" = "Wed May 02 04:37:36 +0000 2012";
    favorited = 0;
    geo = "<null>";
    id = 197545349622153217;
    "id_str" = 197545349622153217;
    "in_reply_to_screen_name" = "<null>";
    "in_reply_to_status_id" = "<null>";
    "in_reply_to_status_id_str" = "<null>";
    "in_reply_to_user_id" = "<null>";
    "in_reply_to_user_id_str" = "<null>";
    place = "<null>";
    "retweet_count" = 23;
    retweeted = 0;
    "retweeted_status" =         {
        contributors = "<null>";
        coordinates = "<null>";
        "created_at" = "Wed May 02 04:21:30 +0000 2012";
        favorited = 0;
        geo = "<null>";
        id = 197541298746568704;
        "id_str" = 197541298746568704;
        "in_reply_to_screen_name" = "<null>";
        "in_reply_to_status_id" = "<null>";
        "in_reply_to_status_id_str" = "<null>";
        "in_reply_to_user_id" = "<null>";
        "in_reply_to_user_id_str" = "<null>";
        place = "<null>";
        "retweet_count" = 23;
        retweeted = 0;
        source = "<a href=\"http://twitter.com/#!/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>";
        text = "When I hear the word 'pivot', in my head I hear the sound of a toilet flushing. Cc @infoarbitrage @msuster";
        truncated = 0;
        user =             {
            "contributors_enabled" = 0;
            "created_at" = "Tue Apr 22 13:08:40 +0000 2008";
            "default_profile" = 0;
            "default_profile_image" = 0;
            description = "Entrepreneur turned Investor. Chief Firestarter at @K9Ventures. Tags: tech entrepreneur startups angel investor concept seed web venture vc cmu stanford";
            "favourites_count" = 7;
            "follow_request_sent" = "<null>";
            "followers_count" = 9732;
            following = "<null>";
            "friends_count" = 1009;
            "geo_enabled" = 1;
            id = 14474225;
            "id_str" = 14474225;
            "is_translator" = 0;
            lang = en;
            "listed_count" = 628;
            location = "Palo Alto, CA";
            name = "Manu Kumar";
            notifications = "<null>";
            "profile_background_color" = 303030;
            "profile_background_image_url" = "http://a0.twimg.com/profile_background_images/3375189/logo90x100__with_margin_.png";
            "profile_background_image_url_https" = "https://si0.twimg.com/profile_background_images/3375189/logo90x100__with_margin_.png";
            "profile_background_tile" = 0;
            "profile_image_url" = "http://a0.twimg.com/profile_images/1772187320/Manu_Kumar__813x961__normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/1772187320/Manu_Kumar__813x961__normal.jpg";
            "profile_link_color" = F6901E;
            "profile_sidebar_border_color" = 999999;
            "profile_sidebar_fill_color" = 626465;
            "profile_text_color" = 303030;
            "profile_use_background_image" = 1;
            protected = 0;
            "screen_name" = ManuKumar;
            "show_all_inline_media" = 1;
            "statuses_count" = 11234;
            "time_zone" = "Pacific Time (US & Canada)";
            url = "http://www.k9ventures.com";
            "utc_offset" = "-28800";
            verified = 0;
        };
    };
    source = web;
    text = "RT @ManuKumar: When I hear the word 'pivot', in my head I hear the sound of a toilet flushing. Cc @infoarbitrage @msuster";
    truncated = 0;
    user =         {
        "contributors_enabled" = 0;
        "created_at" = "Thu Apr 26 06:43:28 +0000 2007";
        "default_profile" = 0;
        "default_profile_image" = 0;
        description = "2x entrepreneur. Sold both companies (last to salesforce.com). Turned VC looking to invest in passionate entrepreneurs";
        "favourites_count" = 49;
        "follow_request_sent" = "<null>";
        "followers_count" = 65580;
        following = "<null>";
        "friends_count" = 835;
        "geo_enabled" = 0;
        id = 5520332;
        "id_str" = 5520332;
        "is_translator" = 0;
        lang = en;
        "listed_count" = 4501;
        location = "Los Angeles";
        name = "Mark Suster";
        notifications = "<null>";
        "profile_background_color" = 9AE4E8;
        "profile_background_image_url" = "http://a0.twimg.com/profile_background_images/4977283/s_sunset23.jpg";
        "profile_background_image_url_https" = "https://si0.twimg.com/profile_background_images/4977283/s_sunset23.jpg";
        "profile_background_tile" = 1;
        "profile_image_url" = "http://a0.twimg.com/profile_images/85156906/msuster_fb_normal.jpg";
        "profile_image_url_https" = "https://si0.twimg.com/profile_images/85156906/msuster_fb_normal.jpg";
        "profile_link_color" = 0000FF;
        "profile_sidebar_border_color" = 87BC44;
        "profile_sidebar_fill_color" = E0FF92;
        "profile_text_color" = 000000;
        "profile_use_background_image" = 1;
        protected = 0;
        "screen_name" = msuster;
        "show_all_inline_media" = 1;
        "statuses_count" = 14592;
        "time_zone" = "Pacific Time (US & Canada)";
        url = "http://bothsid.es";
        "utc_offset" = "-28800";
        verified = 0;
    };
} 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:13:47.677

那是一个只有 2 个对象的数组（我想，我不能把所有的花括号都排好），所以尝试使用 objectAtIndex:0 来获取第一个字典，看看是否能解决你的问题。

# spotify - Spotify 应用程序更新后坏了？

> ID：10439576
> 
> 赞同：0
> 
> 时间：2012-05-03T21:28:25.463
> 
> 标签：spotify

关于以下帖子 [https://stackoverflow.com/a/10421944/1373154](https://stackoverflow.com/a/10421944/1373154)

每次应用程序调用都需要这样做吗？例如：

旧脚本：

window.location = 'spotify:app:application:navTop';

新脚本：window.location = 'spotify:app:application:bundleversion:navTop';

好奇是否有人知道更改将如何影响脚本，例如上面的示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:35:04.800

您误读了帖子 - 您只需将文件夹名称替换为 URL 中的 Bundle Identifier：

`window.location = 'spotify:app:application-identifier:navTop';`

但是，要加载的应用程序需要在清单文件中存在一个版本。它不需要在 URL 中指定。

# java - 如何在 Seam 中弹出/提醒？（爪哇）

> ID：10439577
> 
> 赞同：0
> 
> 时间：2012-05-03T21:28:35.300
> 
> 标签：java, popup, seam, alert

谢谢你的时间！

我是一名 Java 开发人员，继承了现有的大部分完成的 Seam 项目（使用浏览器查看），并且很难跟踪错误的位置，因为我不知道如何向用户发送消息（用于调试) 在运行时。JOptionPane 和 System.out.println 都没有帮助（前者使项目崩溃）。是否可以键入可以向用户发送任何类型消息的代码（在 Java 或 xhtml 文件中）？* 首选弹出窗口（警报），但任何跟踪方式都会很棒！谢谢！

{*最好像 JOptionPane.showMessageDialog 一样使用}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:39:36.520

您不能像使用 JOptionPane 那样向用户发送消息，这主要是因为它是 Web。可以使用一些 RichFaces 组件将数据推送到浏览器，但我认为您不想为调试而这样做

在调试 Seam 时，我使用日志记录 (slf4j) 和 java 代码中的断点。

# java - @Stateless Session Bean 充当@Singleton Bean

> ID：10439583
> 
> 赞同：3
> 
> 时间：2012-05-03T21:28:53.147
> 
> 标签：java, singleton, ejb-3.0, stateless

我尝试了一个 EJB 会话 Bean 的示例。我想看看他们的区别。我的基本项目图如下；

[http://img109.imageshack.us/img109/8262/85220418.png](http://img109.imageshack.us/img109/8262/85220418.png)

项目就像一个购物车。当我通过注入的 EJB 调用托管 bean 以获取添加的 Urun 对象的结果时，结果列表必须是最后一个 Urun 对象。因为我的 EJB 是 @Stateless bean。但是，当我运行应用程序时，它会保留所有新添加的 Urun 对象。但它是无状态的，它必须在每个动作中保留最后一个 Urun 对象。然后，当我在其他网络浏览器中打开应用程序页面时，它会列出之前添加的 Urun 对象列表。但是托管 bean 和 Ejb 在我的模型中是无状态的。但它是一个 Singleton bean。我的问题在哪里？

```
@Stateless
public class AlisverisSepetiEJB {

    List<Urun> urunler=new ArrayList<>();

    public List<Urun> getUrunler() {
        return urunler;
    }

    public void setUrunler(List<Urun> urunler) {
        this.urunler = urunler;
    }

    public void urunEkle(Urun urun){
        urunler.add(urun);
    }

} 
```

* * *

```
@ManagedBean(name="bean")
@RequestScoped
public class JSFYonetimliNesne {

    public JSFYonetimliNesne(){
        System.out.println("Yönetimli nesne çalıştı");
    }

   @EJB
   AlisverisSepetiEJB alisverisSepeti;

   Urun urun=new Urun();
   List<Urun> urunler;

    public List<Urun> getUrunler() {
        return alisverisSepeti.getUrunler();
    }

    public void setUrunler(List<Urun> urunler) {
        this.urunler = urunler;
    }

    public Urun getUrun() {
        return urun;
    }

    public void setUrun(Urun urun) {
        this.urun = urun;
    }

    public void sepeteKoy(){
        alisverisSepeti.urunEkle(urun);
        urun=new Urun();
    }

} 
```

* * *

```
public class Urun {

   String urunAdi;
   Long fiyat;
   Long gramaj;

    public Long getFiyat() {
        return fiyat;
    }

    public void setFiyat(Long fiyat) {
        this.fiyat = fiyat;
    }

    public Long getGramaj() {
        return gramaj;
    }

    public void setGramaj(Long gramaj) {
        this.gramaj = gramaj;
    }

    public String getUrunAdi() {
        return urunAdi;
    }

    public void setUrunAdi(String urunAdi) {
        this.urunAdi = urunAdi;
    }

} 
```

* * *

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Alışveriş Sepeti</title>
    </h:head>
    <h:body>
        Alışveriş Sepeti
        <h:form>

            <h:panelGrid columns="2">
            <h:outputLabel value="Ürün adı : "/>
            <h:inputText value="#{bean.urun.urunAdi}"/>
            <h:outputLabel value="Ürün fiyatı : "/>
            <h:inputText value="#{bean.urun.fiyat}"/>
            <h:outputLabel value="ÜRün gramajı : "/>
            <h:inputText value="#{bean.urun.gramaj}"/>
            </h:panelGrid>

            <h:commandButton action="#{bean.sepeteKoy}" value="Sepete Ekle"/>

            <br><h:outputLabel value="Sepetteki Ürünler"/></br>

            <h:dataTable value="#{bean.urunler}" var="item" border="1">

            <h:column >
                <f:facet name="header">
                    <h:outputLabel value="Ürün adı"/>
                </f:facet>
            <h:outputText value="#{item.urunAdi}"/>
            </h:column>

            <h:column >
                <f:facet name="header">
                    <h:outputLabel value="Ürün fiyatı"/>
                </f:facet>
            <h:outputText value="#{item.fiyat}"/>
            </h:column>

            <h:column >
                <f:facet name="header">
                    <h:outputLabel value="Ürün gramajı"/>
                </f:facet>
            <h:outputText value="#{item.gramaj}"/>
            </h:column>

            </h:dataTable>

        </h:form>

    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:46:34.413

很可能`AlisverisSepetiEJB`在调用之间共享相同的实例（容器可以这样做，这是完全合法的）。正是因为`@Stateless`EJB 的无状态特性，您不应该*在*其中声明实例属性！

删除`List<Urun> urunler = new ArrayList<>();`声明和所有关联方法，将无状态 bean 视为一个类，其中所有方法都是静态的——这意味着它们不能使用任何实例属性，并且必须完全独立于实例数据；如果需要在调用之间维护任何状态，则必须从调用 EJB 的点将其作为参数传递。EJB 中唯一允许的实例变量`@Stateless`是属性，它们本身是无状态的和/或不可变的。

如果您需要在调用之间维护购物车的状态，则必须将其保存在有状态上下文中的其他位置（例如，`Session`Web 应用程序的上下文）或将 EJB 标记为`@Stateful`.

# r - Plotting and positioning in LaTeX of multiple times series from multiple files

> ID：10439588
> 
> 赞同：0
> 
> 时间：2012-05-03T21:29:39.690
> 
> 标签：r, latex, ggplot2, gnuplot

I have 50 files containing 3 time series in each of them with identical tab separated format. To be specific each file contains 250 observations and looks like below:

```
1 8.83229 0.02544 0.02544
2 2.95561 0.02544 0.02544
3 1.27395 0.02544 0.02544
4 2.01115 0.02544 0.02544
5 2.38058 0.02383 0.02383
6 1.10755 0.02383 0.02383
7 1.16735 0.02013 0.02013
8 1.57755 0.02013 0.02013
9 1.81942 0.02013 0.02013
10 1.45921 0.01611 0.01611
...
246 0.04564 0.02383 0.01611
247 0.04357 0.02383 0.01611
248 0.03651 0.02383 0.01611
249 0.03334 0.02383 0.01611
250 0.03438 0.02383 0.01611 
```

The first column is obviously index and the other three columns are time series. I've written a gnuplot script to be called from another shell script in order to plot all these 50 files. But i'd like to organise these plots in such a manner that, 3x4 or 4x5 of them, to be in one A4, in a publication written with LaTeX. Is there a LaTeX package or gnuplot trick for this? Maybe it is easier to do this with R? Any suggestion is welcome.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T22:26:32.657

Something like this,

```
library(reshape2)
library(plyr)
library(ggplot2)

setwd("/Users/baptiste/data/")

lf <- list.files(pattern=".txt")

read_file <- function(f, ...){

  result <- read.table(f, ...)
  names(result) <- c("id", "ts1", "ts2", "ts3")
  result

}

## read all files in a list
all <- llply(lf, read_file, .progress="text")
names(all) <- paste0("file", seq_along(all))

m <- melt(all, id = "id") # to long format
str(m)

## facetted plot
ggplot(m) + facet_wrap( ~ L1, ncol = 4 ) +
  geom_path(aes(id, value, colour = variable))

ggsave("facetted_plot.pdf", width = 10, height = 10)

## alternative: multiple plots
library(gridExtra)
plots <- dlply(m, "L1", function(d) {
  ggplot(d) + geom_path(aes(id, value, colour = variable))
})
ml <- do.call(marrangeGrob, c(plots, list(nrow=3, ncol=4)))

ml
## multipage pdf with 3x4 on each page
ggsave("multipage.pdf", ml) 
```

(untested)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T21:50:04.340

Making these kinds of composite plots is really easy to do using either `lattice` or `ggplot2`. I favor `ggplot2`, where these kinds of composite plots are constructed using facetting. A visual teaser of how such a plot would look like ([from here](http://had.co.nz/ggplot2/facet_grid.html)):

```
p <- ggplot(diamonds, aes(carat, ..density..)) + 
  geom_histogram(binwidth = 0.2) + facet_grid(clarity ~ cut) 
```

![enter image description here](../Images/550bcd1226ff881df9264d52f46f9758.png)

This is a histogram, but you can quite easily draw timeseries like this. Or take a look at figure 3.6 from a [report I wrote](http://www.numbertheory.nl/files/report_evap.pdf). Note that there is no need to create separate plots, ggplot2 takes care of it all, it is one big plot with a lot of subplots. Take a look at the [ggplot2 docs here](http://had.co.nz/ggplot2/) to get more detail.

# linux - bash "&" 不打印 "[1]+ Done "

> ID：10439590
> 
> 赞同：15
> 
> 时间：2012-05-03T21:29:46.370
> 
> 标签：linux, bash, scripting

我在我的 .bashrc 中调用一个脚本来打印我打开终端时收到的新消息的数量，我希望调用是非阻塞的，因为它访问网络并且有时需要几秒钟，这意味着我无法使用终端直到完成。

但是，如果我输入：

```
 mailcheck & 
```

在我的 bashrc 中，它工作正常。但是然后打印一个空行，当我按下回车键并打印

```
 [1]+  Done                    ~/bin/mailcheck 
```

这很混乱有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T21:52:34.197

该消息不是来自 mailcheck，而是来自 bash 的工作控制，告诉您有关您的后台工作。避免它的方法是告诉 bash 你不希望它由作业控制管理：

```
mailcheck &
disown $! 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T21:48:35.323

这似乎有效：

```
(mailcheck &) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T21:40:34.080

你可以这样调用你的脚本：

```
(exec mailcheck & ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T21:38:48.170

尝试将 stderr 管道传输到 /dev/null

```
mailcheck & 2>/dev/null 
```

想了几分钟，另一种方法可能是使用 write。
将后台任务的输出通过管道传输给自己，这样它就可以随时完成，并且您可以将来自 stdout 和 stderr 的任何附加输出分箱。

```
mailcheck | write $(whoami) & > /dev/null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-17T19:29:39.390

这是我在解决我遇到的问题之前检查的最后一页，所以我想我会留下与 OP 有相同问题的完成脚本：

```
nohup bash -c '{anycommand};echo "CommandFinished"' 1> "output$(date +"%Y%m%d%H%M").out" 2> /dev/null & disown 
```

这运行`{anycommand}`并将`nohup`发送`stdout`到唯一文件，`stderr`to `/dev/null`，其余发送到控制台（PID）以进行抓取。该`stdout`文件由另一个寻找该`CommandFinished`或任何唯一字符串的进程监视。

Bash 稍后会打印：

```
[1]+  Done                    nohup bash -c .... 
```

添加`disown`到最后停止 bash 作业将其打印到控制台。

# php - PHP 和彗星。需要一些指导

> ID：10439592
> 
> 赞同：3
> 
> 时间：2012-05-03T21:29:54.413
> 
> 标签：php, comet

我一直在寻找使用 PHP 制作实时网站。（彗星）我已经找了很长时间了。（大约一个月）我什至检查了一些 PHP 聊天脚本并在我的网络服务器上使用，但我在其中大部分都遇到了一些问题。（将解释）

到目前为止，大多数人都在说同样的事情：PHP 并不是可以与 COMET 一起使用的最佳语言。聊天/彗星的例子充其量是hacky。

我问这个是因为，我想在我的网站上有一些功能，比如允许登录的人互相聊天。这就是我需要与 PHP 页面建立有效连接的地方。我还计划制作一个基于浏览器的游戏，并且仍然需要一个活跃的连接！

AJAX 是 2 年前稀有的东西，在 Facebook 上大放异彩。现在几乎每个人都在使用它，它成为了 Web 开发的标准。现在，基于 COMET 的网站正在增长。Youtube、Google+、Facebook、EA 的 Battlelog 等。我相信我应该学习如何使用它。

好的，这是我的问题。（下面的一些信息是我在谷歌上搜索时收集的。不确定它们是否正确。）

1.  像 Python 这样的一些语言有专门为这项工作设计的 Web 服务器。我相信其中之一叫做 Tornado Web Server。开发和配置以模拟数千个活动连接。我相信 Appserv 中没有这样的选项，但有人告诉 NGINX 可以通过一个不错的配置来处理它。这是真的吗？应该做哪些配置？是否有适用于此工作的 PHP Web 服务器？

2.  一些最建议的事情是：

    一个。使用 APE。

    湾。使用 Socket.IO

    C。节点.js

    有什么方法可以将它们与 PHP 一起使用？哪一个最有前途？你能给他们一些指导吗？除了这些还有别的吗？

3.  我使用了彗星聊天脚本。基本上，您一直在查询数据库，并通过在循环中使用 usleep() 将其休眠，并使用 flush() 将结果输出到浏览器。（这个变得难以理解，所以我将提供一个快速代码）

    ```
    while(true)
    {
        // query database
       // output the result
       // flush the browser
       // sleep for few seconds to lower cpu load 
    } 
    ```

`usleep()`功能基本上破坏了我在基于 Windows 的操作系统上的 Web 服务器。依赖在`usleep()`基于 Windows 的操作系统上运行的彗星应用程序是否正常？我的意思是，有没有办法让 PHP 脚本“休眠”？无论我做什么，WIN 和 UNIX 服务器上的 CPU 负载都会达到 %100。

1.  PHP 在这方面“真的”那么弱吗？我应该放弃 PHP 并专注于其他语言吗？如果是这样，您会建议哪种语言？（那个语言应该是有前途的，比如HTML5加了AS3就没什么用了，JS大放异彩的时候AS3很快就死了。）

2.  什么是 WebSync？它可以与PHP一起使用吗？

请记住，我需要使用 COMET 进行以下应用程序：

*   一个聊天脚本，登录的玩家将能够互相聊天。
*   基于浏览器的游戏。我在编码时已经使用了 JSON/AJAX 之类的东西，但是要接收对手的步骤，我应该提取数据，因此需要一个活动连接。（不要想象高级游戏，我说的充其量是国际象棋之类的游戏。）

如果您能给我一个简短的指导，我将不胜感激。毕竟，自从互联网上有很多随机文章以来，我每天都感到困惑。人们甚至称它为`setInterval()`COMET，所以它是一团糟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:06:39.760

这里需要澄清一下。您要查找的内容本身并不是特定于语言的。如果您想用 PHP 实现彗星功能，您将依赖 Web 服务器（例如 Apache）来执行 HTTP 流。您还需要了解 HTTP/1.1 之前的 HTTP 版本不支持此功能。话虽如此，如果您想拥有一个基于事件的非阻塞 Web 服务器，最好按照建议查看 Tornado 和 Node。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T09:41:50.743

Comet 是一种编程技术，它使 Web 服务器无需客户端请求就可以向客户端发送数据 这种技术将产生比经典 AJAX 更具响应性的应用程序 用户必须创建请求（例如通过单击链接）或者必须发生周期性的 AJAX 请求才能从服务器获取新数据。

但它会在您的网络服务器上产生大量流量。如果您想在 PHP 中构建聊天应用程序，请使用 pusher，它是第三方服务且易于使用。这是推送器的链接[https://pusher.com/tutorials/realtime_chat_widget](https://pusher.com/tutorials/realtime_chat_widget)

第二个建议是使用棘轮来创建聊天应用程序。这是棘轮[http://socketo.me/docs/hello-world的链接](http://socketo.me/docs/hello-world)

我希望它会帮助你

# json - 带有 cURL 的简单 JSON 请求到 Mochiweb

> ID：10439603
> 
> 赞同：0
> 
> 时间：2012-05-03T21:30:47.880
> 
> 标签：json, post, curl, erlang, mochiweb

我有一个非常简单的“hello world”Mochiweb 服务器（我刚刚开始介绍它），它接受一个 JSON 请求并将其发回：

```
'POST' ->
                case Path of
                    "dummy" ->
                        Data = Req:parse_post(),

                        Json = proplists:get_value("json", Data),

                        Struct = mochijson2:decode(Json),

                        Action_value = struct:get_value(<<"action">>, Struct),
                        Action = list_to_atom(binary_to_list(A)),

                        Result = [got_json_request, Action],

                        DataOut = mochijson2:encode(Result),
                        Req:ok({"application/json",[],[Result]}); 
```

问题是，当我尝试使用 cURL 向它发出请求时，它失败了：

```
curl -i -H "Content-Type: application/json" -H "Accept: application/json" -X POST -d '{"action":"dummy"}' http://localhost:8080/dummy 
```

Mochiweb 日志很难阅读，但据我了解，错误发生在这一行：

```
Json = proplists:get_value("json", Data) 
```

我`io:format`在代码中放了几个 s ，发现`Data`和`Json`变量都是`[]`在我使用 cURL 发出请求之后。

另一方面，当我用 cURL 做一个非常简单的请求时：

```
curl -d '{"action":"dummy"}' http://localhost:8080/dummy 
```

Data 和 Json 都是`[{"{\"action\":\"dummy\"}",[]}]`，但在这种情况下，该行将`Struct = mochijson2:decode(Json)`失败。

由于某些奇怪的原因，如果标头具有“application/json”值，Mochiweb 不会在 POST 请求中看到 JSON 数据。

所以，问题是：如何使用 JSON 数据向 Mochiweb 服务器发出正确的 POST 请求？

编辑：`Json`变量有`undefined`值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:06:20.673

尝试一些类似的东西

```
Data = Req:recv_body(),
Json = mochijson2:decode(Data),
... 
```

您至少应该在此之前确保方法 post 和内容类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:01:04.930

这与 POST 或获取无关。这是关于您如何发布数据以发送到您的服务器

向服务器发送 json 数据时，需要将其设为 key=value

```
 curl -d "key=value" "http://your.domain.com/path" 
```

因此，如果您想将 json 发布为 '{"action":"dummy"}'，对于 GET 请求

```
 curl -d "json='{\"action\":\"dummy\"}'" http://localhost:8080/dummy 
```

对于作为文件的 POST 请求，

```
curl -F "json=@filename.json" http://localhost:8080/dummy 
```

当然，当您作为文件发送时，您需要从服务器端读取发布的文件。

# scala - Scala映射到HashMap

> ID：10439605
> 
> 赞同：6
> 
> 时间：2012-05-03T21:31:05.740
> 
> 标签：scala, collections, map

给定一个此类`List`的对象：`Person`

`class Person(val id : Long, val name : String)`

获取带有`id`键和`name`值的（java）HashMap的“scala方式”是什么？

如果最佳答案不包括 using `.map`，请提供一个示例，即使它更难做到。

谢谢你。

## 编辑

这就是我现在所拥有的，但它并不是一成不变的：

```
val map = new HashMap[Long, String]
personList.foreach { p => map.put(p.getId, p.getName) }

return map 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T21:49:52.157

```
import collection.JavaConverters._
val map = personList.map(p => (p.id, p.name)).toMap.asJava 
```

*   `personList`有类型`List[Person]`。

*   运算后`.map`得到`List[Tuple2[Long, String]]`（通常写为，`List[(Long, String)]`）。

*   之后`.toMap`，你得到`Map[Long, String]`。

*   并且`.asJava`，顾名思义，将其转换为 Java 映射。

您无需定义`.getName`, `.getid`。`.name`并且`.id`已经是 getter 方法。类似值访问的外观是有意的，并且遵循统一访问原则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T22:30:14.660

这个怎么样：

*   `HashMap`使用`personList`的大小在空中预分配足够的条目，
*   运行`foreach`循环，
*   如果你需要不变性，`return java.collections.unmodifiableMap(map)`？

这种方法不创建中间对象。可变状态仅限于一个本地对象时是可以的——反正没有副作用:)

免责声明：我对 Scala 知之甚少，因此请谨慎支持。

# android - 如何从打包在 .apk 文件中的 jar 文件加载类？

> ID：10439613
> 
> 赞同：7
> 
> 时间：2012-05-03T21:32:00.797
> 
> 标签：android, classloader, assets

我正在尝试从 .apk 文件的 /assets 目录中的 jar 文件加载接口的插件实现。我能够让它工作的唯一方法是将 jar 文件提取到私有外部存储，然后将该文件传递给 DexClassLoader。

那行得通，但为什么 jar 必须存在于两个地方（.apk 和私有外部存储）？DexClassLoader 必须有一个文件路径作为它的参数。

有没有办法给它一个指向 /assets 文件夹中文件的直接路径，这样我就不必用完外部存储来获取已经存在的额外副本？

以下是相关的代码片段：

```
// somewhere in my main Activity ...
  final File aExtractedDexFile = new File(getDir("dex", Context.MODE_PRIVATE),
                                  LIBRARY_DEX_JAR);
  extractDexTo(aExtractedDexFile);
  loadLibraryProvider(aExtractedDexFile); 
```

和

```
/** Extract the jar file that contains the implementation class.dex and place in private storage */
private void extractDexTo(File tJarInternalStoragePath) {
  BufferedInputStream aJarInputStream = null;
  OutputStream aDexOutputStream = null;

  try {
    aJarInputStream = new BufferedInputStream(getAssets().open(LIBRARY_DEX_JAR));
    aJarOutputStream = new BufferedOutputStream(new FileOutputStream(tJarInternalStoragePath));
    byte[] buf = new byte[BUF_SIZE];
    int len;
    while ((len = aJarInputStream.read(buf, 0, BUF_SIZE)) > 0)
    {
      aJarOutputStream.write(buf, 0, len);
    }
    aJarOutputStream.close();
    aJarInputStream.close();
  } catch (IOException e) {
    if (aDexOutputStream != null) {
      try {
        aJarOutputStream.close();
      } catch (IOException ioe) {
        ioe.printStackTrace();
      }
    }

    if (aJarInputStream != null) {
      try {
        aJarInputStream.close();
      } catch (IOException ioe) {
        ioe.printStackTrace();
      }
    }
  }
} 
```

和

```
/** Use DexClassLoader to load the classes from LibraryProvider */
private void loadLibraryProvider(File tFile) {
  // Internal storage where the DexClassLoader writes the optimized dex file to.
  final File aOptimizedDexOutputPath = getDir("outdex", Context.MODE_PRIVATE);

  // Initialize the class loader with the secondary dex file.
  DexClassLoader cl = new DexClassLoader(tFile.getAbsolutePath(),
          aOptimizedDexOutputPath.getAbsolutePath(),
          null,
          getClassLoader());
  Class<?> aLibProviderClazz = null;

  try {
    // Load the library class from the class loader.
    aLibProviderClazz = cl.loadClass(LIBRARY_PROVIDER_CLASS);      
    sLibraryProvider = (LibraryInterface) aLibProviderClazz.newInstance();
  } catch (Exception exception) {
    // Handle exception gracefully here.
    exception.printStackTrace();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T00:02:41.817

### 有没有办法给它一个指向 /assets 文件夹中文件的直接路径，这样我就不必用完外部存储来获取已经存在的额外副本？

答案是否定的。我想您会关注由实现您的代码[的官方来源发布的这个博客。](http://android-developers.blogspot.co.nz/2011/07/custom-class-loading-in-dalvik.html)如果有更好的做事方式，博主应该在自己的博客中推荐。

[API](http://developer.android.com/reference/dalvik/system/DexClassLoader.html)中解释了您需要**优化**目录的原因：

> 这个类加载器需要一个应用程序私有的、可写的目录来缓存优化的类。

还要注意，资产目录在apk中是不可写的，所以不能用纯粹的资产目录来完成。

需要复制 jar 文件的原因有点微妙，在博客中提到：

> 首先，它必须被复制到一个存储位置，其路径可以提供给类加载器。

嵌入在 apk 存档中的所有内容（文件夹/文件）在运行时都不可暴露（或可解释）给底层文件系统。换句话说，**DexClassLoader**和 PathClassLoader 的构造函数中都需要的 dexPath 需要一个像`/data/data/com.example/dex/common-lib.jar`表示文件系统中的文件的实心路径字符串。

# c# - 如何使用 IXmlSerializer 序列化和反序列化接口？

> ID：10439615
> 
> 赞同：0
> 
> 时间：2012-05-03T21:32:02.583
> 
> 标签：c#, xml, serialization, xml-serialization, xmlwriter

我正在尝试序列化一个接口。我知道通过标准序列化这是不可能的，这就是我在基类中使用自定义序列化的原因。

```
public interface IFoo 
{ 
    object Value { get; } 
} 

public abstract class Foo<T> : IFoo, IXmlSerializable 
{ 
    [XmlElement] 
    public T Value { get; set; } 
    [XmlIgnore] 
    object IFoo.Value { get { return Value; } } 

    XmlSchema IXmlSerializable.GetSchema() { return null; } 
    void IXmlSerializable.ReadXml(XmlReader reader) { throw new NotImplementedException(); } 
    void IXmlSerializable.WriteXml(XmlWriter writer) 
    { 
        XmlSerializer serial = new XmlSerializer(Value.GetType()); 
        serial.Serialize(writer, Value); 
    } 
} 

public class FooA : Foo<string> { } 
public class FooB : Foo<int> { } 
public class FooC : Foo<List<Double>> { } 
public class FooContainer : List<IFoo>, IXmlSerializable 
{ 
    public XmlSchema GetSchema() { return null; } 
    public void ReadXml(XmlReader reader) { throw new NotImplementedException(); }  
    public void WriteXml(XmlWriter writer) 
    { 
        ForEach(x =>  
            { 
                XmlSerializer serial = new XmlSerializer(x.GetType()); 
                serial.Serialize(writer, x); 
            }); 
    } 
} 

class Program 
{ 
    static void Main(string[] args) 
    { 
        FooContainer fooList = new FooContainer() 
        { 
            new FooA() { Value = "String" }, 
            new FooB() { Value = 2 }, 
            new FooC() { Value = new List<double>() {2, 3.4 } }  
        }; 

        XmlSerializer serializer = new XmlSerializer(fooList.GetType(), 
            new Type[] { typeof(FooA), typeof(FooB), typeof(FooC) }); 
        System.IO.TextWriter textWriter = new System.IO.StreamWriter(@"C:\temp\demo.xml"); 
        serializer.Serialize(textWriter, fooList); 
        textWriter.Close(); 
    } 
} 
```

我的自定义序列化不正确。目前正在为所有属性值保存，但是要反序列化，我真的不知道该怎么做。

这个想法是保存属性 Value 并用元素恢复 fooContainer 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:38:54.160

反序列化器不仅会反序列化属性值，还会反序列化包含它们的对象。该对象不能是类型`IMyInterface`，因为它是一个接口并且不能被实例化。您需要序列化该接口的实现，并对其进行反序列化，或者指定要反序列化的接口的默认实现。

# apache-flex - flex Hslider/图形交互的动画

> ID：10439616
> 
> 赞同：0
> 
> 时间：2012-05-03T21:32:11.253
> 
> 标签：apache-flex, animation, graph

我目前有一个 Hslider 动画并影响条形图中显示的结果，但是当我播放 Hslider 的值时，动画是跳跃的。跳跃我的意思是它有时会在前进之前尝试返回一个值。例如，滑块值达到 1963 然后短暂回到 1962 然后继续奇数时间跳回。

任何人都可以识别我的方法中的任何错误...

```
public var anim:AnimateProperty = new AnimateProperty(); 

        public function Startanimation():void {                

        anim.target = YEAR_SLIDER;
        yearto = 2011 - YEAR_SLIDER.value;
        anim.duration = yearto * 150;
        anim.property = "value";
        anim.fromValue = YEAR_SLIDER.value;
        anim.toValue = 2011;
        anim.end();
        anim.play();

         }

                public function update_Application():void{
                YEAR = YEAR_SLIDER.value;
                GEONAME = COMBO.selectedLabel;
                var data:Object = new Object();
                data = {YEAR : YEAR, GEONAME : GEONAME};
                graphdata.getdata(data);
                graphdata.getdata_grid(data);           
        }

        <mx:HSlider
            id="YEAR_SLIDER" value="{YS_INITIAL_VALUE}"
            minimum="{YS_INITIAL_VALUE}" 
            maximum="2011"  change="update_Application()"
            liveDragging="true" accessibilityEnabled="true"
            snapInterval="1" currentState=""
            tickInterval="10"
            width="300" showDataTip="false"
            borderColor="#133341" 
            alpha="1.0" 
            fillAlphas="[0.69, 0.64, 0.91, 0.91]" dataTipFormatFunction="datatip">
        </mx:HSlider> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:16:28.313

解决了...//

对于其他遇到此问题的人来说，这似乎是我返回图表的数据量。一旦我清理了我的选择语句以仅返回所需的特定列并在表上创建了一个索引，动画就很流畅了。

# json - IE 中的 JSON 安全警告，尝试在 MVC3 应用程序中下载

> ID：10439619
> 
> 赞同：1
> 
> 时间：2012-05-03T21:32:22.167
> 
> 标签：json, asp.net-mvc-3, c#-4.0, jquery

在我对同一问题的研究期间，我在这里看到了很多关于 SO 的问题，但其中任何一个问题的答案都没有帮助我。

我已经尝试了每个答案解决方案，但都没有奏效。

因此，我将逐段列出代码以及我尝试过的内容和位置。

首先，我的观点..由2个表格和一个局部视图组成，这里的主要视图：

```
@using MyApplication.Select.Web.Helpers; 
@model SearchUsersViewModel

@*Scripts*@
<script src="@Url.Content("~/Scripts/SearchEntity.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/ManageUsers.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/FormValidation.js")" type="text/javascript"></script>

<script type="text/javascript">

    var theme = "admin"; //(lender, school, admin, or public)
    var cssArray = ["ManageUsers.css", "ActionIcons.css"];

    //Invoke loadCSS Method from CSSLoader.js
    loadCSS(theme, cssArray);

    //Set active tab from NavigationAdmin.js
    setActiveNavTab("tab01"); //(tab01, tab02, tab03, tab04, tab05, tab06)

    document.getElementById("AdminPageHeaderIMG").className = "HeaderImageManageUsers";

</script>

<div>
    <table id="" cellpadding="0" cellspacing="0" border="0">
        <tr style="height: 60px;">
            <td>
                <div class="PageHeaderDescriptionDiv">
                    Welcome to My Application
                </div>
            </td>
        </tr>
        <tr style="height: 1px;">
            <td class="ContentDividerHoriz"></td>
        </tr>
    </table>
    <table class="SearchUsersMainTable" cellpadding="0" cellspacing="0" border="0">
        <tr>
            <td>
                <table cellpadding="0" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td>
                                <div class="SearchByUserDataTable">
                                    @using (Html.BeginForm()) {
                                        @Html.HiddenFor(model => model.SearchFilterType)
                                        <table cellpadding="0" cellspacing="0" border="0">
                                            <tr style="height: 30px;">
                                                <td class="Header01">
                                                    User Search
                                                </td>
                                            </tr>
                                        </table>
                                        <table cellpadding="0" cellspacing="0" border="0">
                                            <tr style="height: 20px;">
                                                <td class="Header02">
                                                    Search By User Information
                                                </td>
                                            </tr>
                                        </table>
                                        <table cellpadding="0" cellspacing="0" border="0">
                                            <tr style="height: 1px;">
                                                <td class="ContentDividerHoriz_425"></td>
                                            </tr>
                                        </table>
                                        <table id="searchByUserDataTable" cellpadding="0" cellspacing="0" border="0">
                                            <tr style="height: 26px;">
                                                <td class="leftColumn">
                                                    @Html.LabelFor(model => model.LastName)
                                                </td>
                                                <td class="rightColumn">
                                                    @Html.TextBoxFor(model => model.LastName, new { @class = "TextField_220" })
                                                </td>
                                            </tr>
                                            <tr style="height: 26px;">
                                                <td class="leftColumn">
                                                    @Html.LabelFor(model => model.Username)
                                                </td>
                                                <td class="rightColumn">
                                                    @Html.TextBoxFor(model => model.Username, new { @class = "TextField_220" })
                                                </td>
                                            </tr>
                                            <tr style="height: 26px;">
                                                <td class="leftColumn">
                                                    @Html.LabelFor(model => model.EmailAddress)
                                                </td>
                                                <td class="rightColumn">
                                                    @Html.TextBoxFor(model => model.EmailAddress, new { @class = "TextField_220" })
                                                </td>
                                            </tr>
                                        </table>
                                        <table cellpadding="0" cellspacing="0" border="0">
                                            <tr>
                                                <td id="filterByUserError" style="width: 300px; color: #ff0000;"></td>
                                                <td align="right" style="width: 50px;">
                                                    <div>
                                                        <input id="filterByUserButton" type="submit" value="Search" />
                                                    </div>
                                                </td>
                                                <td style="width: 75px;"></td>
                                            </tr>
                                        </table>
                                    }
                                </div>
                            </td>
                            <td style="width: 20px;"></td>
                            <td>   
                                <div class="SearchByEntityDataTable">
                                    @using (Html.BeginForm()) { 
                                        <table cellpadding="0" cellspacing="0" border="0">
                                            <tr style="height: 28px;">
                                                <td style="width: 425px;"></td>
                                            </tr>
                                        </table>
                                        <table cellpadding="0" cellspacing="0" border="0">
                                            <tr style="height: 20px;">
                                                <td class="Header02">
                                                    Search By Entity Information
                                                </td>
                                            </tr>
                                        </table>
                                        <table cellpadding="0" cellspacing="0" border="0">
                                            <tr style="height: 1px;">
                                                <td class="ContentDividerHoriz_425"></td>
                                            </tr>
                                        </table>
                                        <table id="searchByEntityDataTable" cellpadding="0" cellspacing="0" border="0">
                                            <tr style="height: 26px;">
                                                <td class="leftColumn">
                                                    @Html.LabelFor(model => model.EntityTypeID)
                                                </td>
                                                <td class="rightColumn">
                                                    @Html.DropDownListFor(model => model.EntityTypeID, new SelectList(Model.EntityTypes, "ID", "Name"), new { id = "entityTypeDropDown", @class = "DropDown_220" })
                                                </td>
                                            </tr>
                                            <tr style="height: 26px;">
                                                <td class="leftColumn">
                                                    @Html.LabelFor(model => model.SearchField, new { id = "entityTypeSearchLabel"})
                                                </td>
                                                <td class="rightColumn">
                                                    @Html.TextBoxFor(model => model.SearchField, new { id = "entityTypeSearchField", @class = "ui-widget TextField_220" })
                                                </td>
                                            </tr>
                                            <tr style="height: 26px;">
                                                <td class="leftColumn"></td>
                                                <td class="rightColumn"></td>
                                            </tr>
                                        </table>
                                        <table cellpadding="0" cellspacing="0" border="0">
                                            <tr>
                                                <td id="filterByEntityError" style="width: 300px; color: #ff0000;"></td>
                                                <td align="right" style="width: 50px;">
                                                    <div>
                                                        <input id="filterByEntityButton" type="submit" value="Search" />
                                                    </div>
                                                </td>
                                                <td style="width: 75px;"></td>
                                            </tr>
                                        </table>
                                    }
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table cellpadding="0" cellspacing="0" border="0">
                    <tr style="height: 1px;">
                        <td class="ContentDividerHoriz"></td>
                    </tr>
                </table>
                <table cellpadding="0" cellspacing="0" border="0">
                    <tr style="height: 33px;">
                        <td style="width: 870px;">
                            <div class="TelerikGridHeaderBkgd">
                                <table cellpadding="0" cellspacing="0" border="0">
                                    <tr>
                                        <td class="Header01" style="width: 150px; padding: 0px 0px 4px 5px;">
                                            User Search Results
                                        </td>
                                        <td style="width: 10px;"></td>
                                        <td style="width: 710px;">
                                            <table cellpadding="0" cellspacing="0" border="0">
                                                <tr style="height: 4px;">
                                                    <td style="width: 710px;"></td>
                                                </tr>
                                            </table>
                                            <table>
                                                <tr style="height: 20px;">
                                                    <td style="width: 188px;">
                                                        @*Resend Invitation*@
                                                        <table cellpadding="0" cellspacing="0" border="0">
                                                            <tr>
                                                                <td class="ActionIcon_ResendInvitationOn"></td>
                                                                <td style="padding-left: 5px; padding-right: 10px;">
                                                                    <span class="SearchUsersLegendText">= Resend Invitation</span> 
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                    <td style="width: 140px;">
                                                        @*Account Approved Status*@
                                                        <table width="140" cellpadding="0" cellspacing="0" border="0">
                                                            <tr>
                                                                <td class="ActionIcon_AccountStatusLegend"></td>
                                                                <td style="padding-left: 5px; padding-right: 10px;">
                                                                    <div class="SearchUsersLegendText">
                                                                        <span>= </span> 
                                                                        <span style="color: #839f1b;">Active</span>
                                                                        <span> / </span>
                                                                        <span style="color: #d6161f;">Inactive</span>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                    <td style="width: 162px;">
                                                        @*Account Lock Status*@
                                                        <table cellpadding="0" cellspacing="0" border="0">
                                                            <tr>
                                                                <td class="ActionIcon_UnlockAccountOn"></td>
                                                                <td style="padding-left: 5px; padding-right: 10px;">
                                                                    <span class="SearchUsersLegendText">= Unlock Account</span> 
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                    <td style="width: 170px;">
                                                        @*Reset Password*@
                                                        <table cellpadding="0" cellspacing="0" border="0">
                                                            <tr>
                                                                <td class="ActionIcon_ResetPasswordOn"></td>
                                                                <td style="padding-left: 5px; padding-right: 10px;">
                                                                    <span class="SearchUsersLegendText">= Reset Password</span> 
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                    <td style="width: 145px;">
                                                        @*Edit Account*@
                                                        <table cellpadding="0" cellspacing="0" border="0">
                                                            <tr>
                                                                <td class="ActionIcon_EditOn"></td>
                                                                <td style="padding-left: 5px; padding-right: 10px;">
                                                                    <span class="SearchUsersLegendText">= Edit Account</span> 
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                            <table>
                                                <tr style="height: 6px;">
                                                    <td style="width: 710px;"></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 870px;">
                            <div id="searchResults">
                                @Html.Partial("SearchResultsPartial", Model)
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div> 
```

SearchResultsPartial 在这里：

```
@model SearchUsersViewModel

@*Scripts*@
<link href="@Url.Content("~/Content/styles/TelerikCustom.css")" rel="stylesheet" type="text/css" />

@(Html.Telerik().Grid(Model.Users)
    .Name("Users").TableHtmlAttributes(new { style = "width: 870px;"})
    .Columns(columns => {
        columns.Bound(o => o.EntityTypeName).Title("Entity Type");
        columns.Bound(o => o.FirstName).Title("First Name");
        columns.Bound(o => o.LastName).Title("Last Name");
        columns.Bound(o => o.Username).Title("Username");
        columns.Template(
            @<text>
                <a href="mailto:@item.EmailAddress" target="blank">@item.EmailAddress</a>
            </text>).Title("Email").HtmlAttributes(new { style = "text-align: center" }).HeaderHtmlAttributes(new { style = "text-align: center" });
        columns.Template(
            @<text>
                 @{ if (@item.MembershipID == 0) {
                        <div class="ActionIcon_ResendInvitationOn" title="Resend Invitation" onclick="resendInvitation(@item.EntityID, @item.EntityTypeID, '@item.EmailAddress')"></div>
                    }
                    else {
                        if ((bool) item.IsApproved) {
                            <div class="ActionIcon_AccountStatusOn" title="Disable Account" onclick="setApprovalStatus('@item.Username', false)"></div>
                        }
                        else {
                            <div class="ActionIcon_AccountStatusOff" title="Enable Account" onclick="setApprovalStatus('@item.Username', true)"></div>
                        }
                        if ((bool) item.IsLockedOut) {
                            <div class="ActionIcon_UnlockAccountOn" title="Unlock Account" onclick="unlockAccount('@item.Username')"></div>
                        }
                        else {
                            <div class="ActionIcon_ResetPasswordOn" title="Reset Password" onclick="resetPassword('@item.Username')"></div>
                        }
                        <div class="ActionIcon_EditOn" title="Edit User" onclick="location.href='@Url.Action("Edit", "Admin", new { id = item.MembershipID, username = item.Username })'"></div>
                    }
                 }
            </text>).Title("Actions");
        columns.Bound(o => o.RowNumber).Hidden(true);
        columns.Bound(o => o.MembershipID).Hidden(true);
        columns.Bound(o => o.EntityID).Hidden(true);
        columns.Bound(o => o.EntityTypeID).Hidden(true);
    })
)

<div>
     Total Rows:
    @{
        if (!@Model.Users.Any()) {
            @Html.Label("0")
        }
        else {
            @Model.Users.First().TotalRows
        } 
    }
</div> 
```

任何一种形式都可以进行搜索，这是一个互斥的搜索。按用户数据搜索或按实体数据搜索，但不能两者兼而有之。每个表单上的提交按钮都会触发它们自己的运行 ajax 调用的 javascript：

```
function filterByUserSearch() {

    var lastName = document.getElementById("LastName");
    var username = document.getElementById("Username");
    var emailAddress = document.getElementById("EmailAddress");
    var entityTypeID = document.getElementById("entityTypeDropDown");
    var entityName = document.getElementById("entityTypeSearchField");
    var searchFilterType = document.getElementById("SearchFilterType");

    //alert("User Search");
    entityTypeID.value = 0;
    entityName.value = "";
    searchFilterType.value = 0;
    $.ajax({
        url: "/Admin/Search/",
        dataType: "json",
        cache: false,
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        data: { LastName: lastName.value, Username: username.value, EmailAddress: emailAddress.value, SearchFilterType: searchFilterType.value },
        success: function (result) {
            $('#resultSpan').html('');
            if(result.Success) {
                $('#searchResults').html(result.Data);
                if (result.ResultMessage != '<li></li>') {
                    $('#resultSpan').append($("<ul id='successMsg' style='list-style: none;' />").append(result.ResultMessage)).addClass("AjaxSuccessText");
                    $('#successMsg').css("padding-left", "0");
                    showResultPopUpDiv("ajaxResultWrapperDiv", "Action was Successful!");
                }
            }
            else {
                $('#resultSpan').append($("<ul id='errorMsg' style='list-style: none;' />").append(result.ResultMessage)).addClass("AjaxErrorText");
                $('#errorMsg').css("padding-left", "0");
                showResultPopUpDiv("ajaxResultWrapperDiv", "Ooops! There was an Error");
            }
        }
    });
    return false;
} 
```

被调用的控制器动作在这里：

```
[HttpPost]
public JsonResult Search(SearchUsersViewModel model) {
    try {
        if (model.SearchFilterType == SearchFilterType.ByUserData)
            return SearchForUsersByUserData(model, string.Empty);
        if (model.SearchFilterType == SearchFilterType.ByEntityData)
            return SearchForUsersByEntityData(model, string.Empty);
    }
    catch (Exception ex) {
        ModelState.AddModelError("", ModelStateErrorUtility.WrapResultMessageForList(ex.Message));   
    }
    return Json(new { Success = false, ResultMessage = ModelStateErrorUtility.GetModelStateErrors(ModelState) }, "application/json", JsonRequestBehavior.AllowGet);
}

private JsonResult SearchForUsersByUserData(SearchUsersViewModel model, string resultMessage) {
    if (model.LastName != null || model.Username != null || model.EmailAddress != null) {
        var listOfMatchingUsers = SearchUserService.SearchByUserData(model.LastName, model.Username, model.EmailAddress);
        return PrepareSearchResultsForPartialView(model, listOfMatchingUsers, resultMessage);
    }
    throw new ArgumentNullException("Last Name, Username or Email Address must be entered for search");
}

private JsonResult SearchForUsersByEntityData(SearchUsersViewModel model, string resultMessage) {
    if ((model.EntityTypeID == 1) || (model.EntityTypeID > 0 && model.SearchField != null)) {
        var listOfMatchingUsers = SearchUserService.SearchByEntityData(model.EntityTypeID, model.SearchField);
        return PrepareSearchResultsForPartialView(model, listOfMatchingUsers, resultMessage);
    }
    throw new ArgumentNullException("Entity Type must be entered for search");
}

private JsonResult PrepareSearchResultsForPartialView(SearchUsersViewModel model, ICollection<SearchUserResultsDTO> list, string resultMessage) {
    return Json(new { Success = true, ResultMessage = ModelStateErrorUtility.WrapResultMessageForList(resultMessage), Data = RenderRazorViewToString("SearchResultsPartial", PrepareSearchResultsForModel(list, model)) }, "application/json", JsonRequestBehavior.AllowGet);
}

private static SearchUsersViewModel PrepareSearchResultsForModel(ICollection<SearchUserResultsDTO> listOfMatchingUsers, SearchUsersViewModel model) {
    if (listOfMatchingUsers.Count != 0) {
        model.Users = listOfMatchingUsers.Select(item => new UserEditViewModel(item)).ToList();
    }
    return model;
}

private string RenderRazorViewToString(string viewName, object model) {
    ViewData.Model = model;
    using (var sw = new StringWriter()) {
        var viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
        var viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
        viewResult.View.Render(viewContext, sw);
        viewResult.ViewEngine.ReleaseView(ControllerContext, viewResult.View);
        return sw.GetStringBuilder().ToString();
    }
} 
```

我试过的：

**返回操作方法设置为 JsonResult**

*响应中未指定内容类型，ajax 调用 contentType: application/json; 字符集=utf-8*

1.  指向登台服务器 IIS 的 IE 8 提示下载文件
2.  指向登台服务器 IIS 的 IE 9 根本不执行任何操作
3.  指向登台服务器 IIS 的 Chrome 什么也不做
4.  指向本地网络服务器的 Chrome 什么都不做

*应用程序/json；charset=utf-8 在响应中指定，ajax 调用没有内容类型*

1.  指向登台服务器 IIS 的 IE 8 提示下载文件
2.  指向登台服务器 IIS 的 IE 9 完美运行
3.  指向登台服务器 IIS 的 Chrome 完美运行
4.  指向本地网络服务器的 Chrome 完美运行

在这一点上，我有 4 种方法中的 3 种工作得很好，IE 8 很烂。所以现在我改变了动作方法的结果。

**返回操作方法设置为 ActionResult**

*响应中未指定内容类型，ajax 调用 contentType: application/json; 字符集=utf-8*

1.  指向登台服务器 IIS 的 IE 8 提示下载文件
2.  指向登台服务器 IIS 的 IE 9 根本不执行任何操作
3.  指向登台服务器 IIS 的 Chrome 什么也不做
4.  指向本地网络服务器的 Chrome 什么都不做

目前，我认为在 ajax 调用本身中指定 contentType 是不好的。

*应用程序/json；charset=utf-8 在响应中指定，ajax 调用没有内容类型*

1.  指向登台服务器 IIS 的 IE 8 提示下载文件
2.  指向登台服务器 IIS 的 IE 9 完美运行
3.  指向登台服务器 IIS 的 Chrome 完美运行
4.  指向本地网络服务器的 Chrome 完美运行

我什至在项目中添加了脚本文件 JSON2.js 并在视图中引用了该脚本，这根本没有做任何事情。

这里'疯狂的部分，我有另一个控制器以相同的方式设置，它构建的 json 完全相同，唯一的区别是调用 ajax 的视图调用它略有不同。这是 Ajax 方法：

```
function setApprovalStatus(username, isApproved) {
    $.ajax({
        url: "/ELMAdmin/SetApprovalStatus/",
        dataType: "json",
        cache: false,
        type: 'POST',
        data: { username: username, isApproved: isApproved },
        success: function (result) {
            showManageUsersSuccessError(result);
        }
    });
} 
```

它调用相同的子例程来渲染网格，唯一的区别是返回的数据。所以我从部分视图中删除了所有文本，IE 仍然尝试下载文件。我觉得我已经尝试了我所知道的一切，现在需要一些额外的眼睛来帮助指出我希望什么是显而易见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:44:40.503

好的，在查看示例并对其进行测试之后，您需要将此内容类型添加到您的 ajax 调用中。

```
$.ajax({
    url: "/ELMAdmin/Search",
    cache: false,
    type: 'POST',
    contentType: "application/x-www-form-urlencoded;charset=utf-8",
    data: { LastName: lastName.value, Username: username.value, EmailAddress: emailAddress.value, SearchFilterType: searchFilterType.value },
    success: function (result) {
        showManageUsersSuccessError(result);
    }
}); 
```

注意`contentType`是`application/x-www-form-urlencoded;charset=utf-8`。这应该可以解决 IE8 的任何问题。

此外，虽然它可能只是示例，但您需要`return false`在搜索按钮上的 onclick 方法中使用，否则它将返回 true，然后进行第二次发布。

```
//Search By User Info
searchByUserBtn.onclick = function (event) {

    entityName.className = "FieldOk";
    entityName.value = "";
    entityName.setAttribute("disabled", "disabled");
    entityTypeID.value = 0;
    entityTypeID.className = "FieldOk";
    entityErrorMsgField.innerHTML = "";
    filterByUserValidation();

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T19:49:53.433

尽管这个问题很老，但我想我会再添加一个建议，以防万一其他人正在使用`ASP.NET MVC 3 or 4`并遇到这个问题。

根据我的经验，当 IE 尝试将 Json 响应下载为文件时，您要纠正问题所需要做的就是添加对`jquery.unobtrusive`视图的引用。

例如：

```
@Scripts.Render("~/Scripts/jquery.unobtrusive-ajax.min.js") 
```

一旦这到位，IE 将不再尝试从 JsonResult 控制器操作下载 json 响应。无需更改响应类型等。

# wpf - 在 WPF 中运行时创建 tiff 图像

> ID：10439621
> 
> 赞同：1
> 
> 时间：2012-05-03T21:32:49.747
> 
> 标签：wpf, tiff

我正在尝试在运行时生成一个简单的 tiff 图像。此图像由白色背景和从远程服务器下载的图像组成。

这是我为实现该目标而编写的代码：

```
 const string url = "http://localhost/barcode.gif";

        var size = new Size(794, 1123);
        var drawingVisual = new DrawingVisual();

        using (var drawingContext = drawingVisual.RenderOpen())
        {
            drawingContext.DrawRectangle(new SolidColorBrush(Colors.White), null, new Rect(size));

            var image = new BitmapImage(new Uri(url));
            drawingContext.DrawImage(image, new Rect(0, 0, 180, 120));
        }

        var targetBitmap = new RenderTargetBitmap((int)size.Width, (int)size.Height, 96, 96, PixelFormats.Default);
        targetBitmap.Render(drawingVisual);

        var convertedBitmap = new FormatConvertedBitmap(targetBitmap, PixelFormats.BlackWhite, null, 0);

        var encoder = new TiffBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(convertedBitmap));

        using (var fs = new FileStream("out.tif", FileMode.Create))
        {
            encoder.Save(fs);
        } 
```

该代码有效并生成“out.tif”文件。但是输出文件只有白色背景，没有从远程服务器接收到图像。

可能是什么问题？我以各种方式尝试了以下代码，但每次都没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:07:27.810

我发现有关 FormatConvertedBitmap 类的阅读。也许试一试

```
 FormatConvertedBitmap newFormatedBitmapSource = new FormatConvertedBitmap();

        // BitmapSource objects like FormatConvertedBitmap can only have their properties
        // changed within a BeginInit/EndInit block.
        newFormatedBitmapSource.BeginInit();

        // Use the BitmapSource object defined above as the source for this new 
        // BitmapSource (chain the BitmapSource objects together).
        newFormatedBitmapSource.Source = targetBitmap;

        // Set the new format to BlackWhite.
        newFormatedBitmapSource.DestinationFormat = PixelFormats.BlackWhite;
        newFormatedBitmapSource.EndInit(); 
```

# r - 组合正负堆积线图

> ID：10439632
> 
> 赞同：0
> 
> 时间：2012-05-03T21:34:08.197
> 
> 标签：r, plot, overlay, ggplot2, stacked

我正在尝试在 ggplot2 中制作堆叠线图，其中正值堆叠在 x 轴上方，负值分别堆叠在 x 轴下方。我已经成功地分别堆叠了每种线型，但无法在一个图上同时拥有这两种线型。我正在寻找一些关于如何做到这一点的帮助，无论是通过叠加情节还是在单个情节上做一些创造性的事情。

我下面的代码使用了一个简单的 ggplot 和堆叠的 geom_line 图。一半的“类型”是关于时间的正值，另一半的“类型”都是负值。

```
 p <- ggplot(dataForm, aes(x=Time,y=Value,group=Type),colour=factor(Type))
    p + geom_line(aes(fill = Type),position = "stack") 
```

我尝试了另一种方法，分别指定正值和负值但没有成功：

```
 p <- ggplot(dataForm, aes(x=Time,y=Value,group=Type),colour=factor(Type))
    p + geom_line(data = data1,aes(fill = Type),position = "stack")
    p + geom_line(data = data1,aes(fill = Type),position = "stack") 
```

非常感谢任何有关如何执行此操作的建议。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T22:05:14.690

在没有[可重复的例子](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)的情况下，我从学习者那里改编[了这个例子](http://learnr.wordpress.com/2009/09/24/ggplot2-back-to-back-bar-charts/)：

```
library(ggplot2)
library(plyr)

data = read.table(text="Time    Type    Value
1   a   8
2   a   10
3   a   10
4   a   5
5   a   3
1   b   9
2   b   5
3   b   7
4   b   8
5   b   3
1   c   -3
2   c   -1
3   c   -5
4   c   -4
5   c   -7
1   d   -11
2   d   -3
3   d   -9
4   d   -6
5   d   -6", header=TRUE)

p <- ggplot(data, aes(x=Time))
p <- p + geom_line(subset = .(Type %in% c('a', 'b')),
                   aes(y=Value, colour = Type),
                   position = 'stack')
p <- p + geom_line(subset = .(Type %in% c('c', 'd')),
                   aes(y=Value, colour = Type),
                   position = 'stack')
p 
```

要产生这个：

![堆积折线图](../Images/e09d4b25697c30e620a3b203a030ffc7.png)

而且，为了更好地衡量，带有水平线的面积图：

```
p <- ggplot(data, aes(x=Time))
p <- p + geom_area(subset = .(Type %in% c('a', 'b')),
                   aes(y=Value, fill=Type),
                   position = 'stack')
p <- p + geom_area(subset = .(Type %in% c('c', 'd')),
                   aes(y=Value, fill = Type),
                   position = 'stack')
p <- p + geom_hline(yintercept=0)
p 
```

![面积图](../Images/0dd5a7c418a04502bf11d1da14d2ef13.png)

# regex - Perl 正则表达式匹配表情符号

> ID：10439637
> 
> 赞同：2
> 
> 时间：2012-05-03T21:34:35.520
> 
> 标签：regex, perl

我正在尝试从字符串中删除某些表情符号，但我不知道如何匹配由特殊字符和字母组成的表情符号，例如 :D 或 :-D （它适用于“:-)”等表情符号） . 我试过

`$message =~ s/\:D//;`

和其他一些变化，但似乎没有任何效果。我哪里错了？

编辑：我实际上很愚蠢，没有意识到我在这个命令之前把所有的字母都变成了小写，所以所有的表情符号都已经变成了“：d”。感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:43:43.847

```
use strict; use warnings;

my $s = "Hello ;-) :D :-D <3 World!";
my @emoticons = qw' ;-) :D :-D <3 ';

my $pat = join '|', map qr/\Q$_\E/, @emoticons;
$s =~ s/$pat//g;
$s =~ s/ +/ /g;

print "$s\n"; 
```

输出：

```
你好世界！
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T21:39:24.313

您可以编写一些单元测试：

```
sub assert_equals($$) {
  my ($expected, $actual) = @_;
  $expected eq $actual or die "expected <$expected>, got <$actual>\n";
}

sub no_smilies($) {
  my ($message) = @_;
  $message =~ s/:D\b//g;
  return $message;
}

sub test() {
  assert_equals("", no_smilies(":D"));
  ...
} 
```

然后，您可以通过反复试验来完成其余的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:38:44.127

对于初学者，您可以尝试这样的事情：

```
s/[:;]-?[D)]// 
```

当您发现新的有趣的表情符号时，将角色添加到`[]`课程中。

# css - 附加较大的子项时，IE 8 Div 消失

> ID：10439639
> 
> 赞同：0
> 
> 时间：2012-05-03T21:34:44.470
> 
> 标签：css, internet-explorer, haslayout

正如标题所说，这基本上是发生了什么：

```
<div id='container' style='display:block; position:absolute; width:auto; height:533px;overflow:hidden;white-space:nowrap;'>
  </div> 
```

在用户交互时 - 我做了一些工作：请求一些 JSON，构建元素，然后将所述元素附加到“容器”div。结果是这样的：

```
<div id='container' style='display:block; position:absolute; width:auto; height:533px;overflow:hidden;'>
   <img src="A REAL, VALID URL" border='0'/>
   <img src="A REAL, VALID URL" border='0'/>
   <img src="A REAL, VALID URL" border='0'/>
   <img src="A REAL, VALID URL" border='0'/>
   <img src="A REAL, VALID URL" border='0'/>
 </div> 
```

现在发生了什么事。如果孩子被附加到这个并且他们超过了父母的高度。父母消失了。

我追求“hasLayout”和所有的爵士乐——没有任何效果。

起作用的是**，如果孩子的大小相同或更小**- 但由于我想要完成的工作的性质，这是不希望的 - 也不能保证他们会更小。

`height:auto`不起作用，但设置一个**大于最大孩子**的值可以解决这个问题 - 但会扭曲我的布局

提前致谢。

编辑：图像是通过 JSON 和延迟队列的组合加载的。保证在将它们附加到容器元素之前加载它们。

基本上 ：

```
var img = new Image();
img.onload = function () { theContainer.appendChild(this);};
img.src = someURL; 
```

在所有 chrome 和 FF 中都可以正常工作

edit2：我试图将图像都附加到“容器”对象之前和之后将其本身附加到正文。两者都不会产生预期的结果。

编辑 3：* *IE7 和 IE9 的行为与上述不同。这是 IE 8 独有的 **

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:51:54.070

我以前见过这个，但我不记得我是如何解决它的。您可以尝试在容器中放置另一个 div 并将图像附加到该 div 中，包装器 div 经常解决 IE 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:58:42.017

所以问题是“hasLayout”IE 8 错误。通过将容器 div 的宽度设置为“自动以外的其他内容” - 它现在可见并且可以按预期工作/显示。

欢乐时光，谢谢大家的帮助。

# eclipse - 如何更改eclipse表达式值窗口的背景颜色？

> ID：10439640
> 
> 赞同：2
> 
> 时间：2012-05-03T21:34:45.000
> 
> 标签：eclipse

Eclipse、Helios 2、Ubuntu 11，在 Windows 上的 VirtualBox 中。

在 Java 调试模式下，将鼠标悬停在变量上会显示它的值。

但是，我在黑色背景上得到灰色文本。如何更改表达式值窗口的背景颜色？

我没有找到通过 Windows/Preferences/General/Appearance/Colors and Fonts 或其他任何地方执行此操作的方法。

# java - 在 NavigationFilter 之后无法在 JTextField 上设置选择

> ID：10439641
> 
> 赞同：2
> 
> 时间：2012-05-03T21:34:46.940
> 
> 标签：java, swing, selection, jtextfield

我设法像这样选择了我的 JTextField：

```
jtfNumTag.setSelectionStart(0);
jtfNumTag.setSelectionEnd(iMaxLenght); 
```

但是当我在我的 JTextField 上添加 NavigationFilter 时，选择不起作用。我可以理解我的 NavigationFilter 是否阻止了选择，但我不明白它为什么会这样做。

```
final int iMaxLenght = szValues[0].length();
NavigationFilter filter = new NavigationFilter() {
    public void setDot(NavigationFilter.FilterBypass fb, int dot, Position.Bias bias) {
        if (dot >= iMaxLenght) {
            fb.setDot(iMaxLenght, bias);
        } else {
            fb.setDot(dot, bias);
        }
     }
    public void moveDot(NavigationFilter.FilterBypass fb, int dot, Position.Bias bias) {
        if (dot >= iMaxLenght) {
            fb.setDot(iMaxLenght, bias);
        } else {
            fb.setDot(dot, bias);
        }
    }
};
jtfNumTag.setNavigationFilter(filter);

jtfNumTag.setSelectionStart(0);
jtfNumTag.setSelectionEnd(iMaxLenght); 
```

提前感谢您向我解释我不明白的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:46:08.780

而不是`fb.setDot`，您可能应该调用`fb.moveDot()`实现`NavigationFilter.moveDot`。否则插入符号根本不会移动。例如：

```
public void moveDot(NavigationFilter.FilterBypass fb, int dot, Position.Bias bias) {
    if (dot >= iMaxLenght) {
        fb.moveDot(iMaxLenght, bias);
    } else {
        fb.moveDot(dot, bias);
    }
} 
```

# java - Java Swing 验证

> ID：10439644
> 
> 赞同：0
> 
> 时间：2012-05-03T21:34:58.670
> 
> 标签：java, swing, validation

我正在为我的 Swing 应用程序使用 SimpleValidationAPI。我已将其导入我的应用程序并尝试按照此[链接遵循示例](http://java.dzone.com/news/how-quickly-add-validation)

不幸的是 - Validators 枚举器没有在我的类路径上解析 - 尽管 JAR 中的其他类显然在构建路径上。我想知道是否有人知道为什么会发生这种情况？

所以 - 这让我陷入了困境。我不想编写繁重的代码来执行相当普遍的验证程序。

任何人都可以为 Swing / AWT 组件推荐另一个像样的验证框架来模拟我***应该***能够使用 SimpleValidationAPI 做什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:38:34.507

`JGoodies`有一个[验证框架](http://www.jgoodies.com/freeware/libraries/validation/)。我没有任何经验，但我确实有其他`JGoodies`库（他们的 Forms 框架）的经验，而且效果很好。

# java - 无法遍历 List 对象

> ID：10439646
> 
> 赞同：0
> 
> 时间：2012-05-03T21:35:03.447
> 
> 标签：java, eclipse, oop

迭代器有问题。它需要遍历 ArrayList 并找到除此之外的任何其他对象并打印它的名称。程序使用线程。迭代器在等于时进入`while`循环时如何产生错误？`itr.hasNext()``true`

堆栈跟踪：

```
Thread [JOE] (Suspended (exception NoSuchElementException)) 
    ArrayList$Itr.next() line: not available [local variables unavailable]  
    Monster.beginFight(Monster) line: 55    
    Monster.run() line: 28 
```

方法

```
private void tryName(Monster monster){

    Iterator<Monster> itr = room.monsters.iterator();

    while(itr.hasNext()){

        if (!itr.next().equals(monster)) {
            System.out.println(monster.getName() + "some text "
                    + itr.next().getName());

            break;
        }

}

} 
```

为什么我在*ArrayList$Itr.next()*选项卡中显示：*Source not found*？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T21:36:21.927

每次调用`itr.next`它都会将迭代器推进到下一个元素。您需要执行以下操作：

```
while(itr.hasNext()) {
    Monster m = itr.next();
    // rest of your code using m instead of itr.next()
} 
```

# javascript - ipad js/html -- 尝试在原生滚动 div 上同步固定的标题和侧边栏

> ID：10439651
> 
> 赞同：0
> 
> 时间：2012-05-03T21:35:41.423
> 
> 标签：javascript, ipad, smooth-scrolling, custom-scrolling

我目前正在开发一个 iPad JS/HTML 应用程序，使用本机滚动查看大型条形图 svg。

我希望沿 x 和 y 轴的标签沿图表的顶部和左侧持续存在。基本上，图表应该在标签下方自由滑动，标签本身只会在适当的方向上移动（例如，当您向左滚动时，x 轴标题将移动其标签，而 y 轴标签用于垂直滚动）

我目前有一些 css 可以做到这一点，但本机滚动移动的速度比我的 javascript 同步面板快得多。当一个元素比另一个元素被拖得更快时，就会出现这种弹性相互作用。一旦滚动动画停止，它就会全部放到正确的位置，但是在滚动进行时交互看起来很卡。

有没有更好的方法来解决这个问题？我可以利用他们的其他活动吗？有没有办法强制多个可滚动的 div 对同一个滚动事件做出反应，而无需手动计算 js 位置？或者由于本机滚动被卸载到 gpu，延迟是不可避免的？

```
/* CSS */
.fixedaxis {
    position:absolute;
    top: 0px;
    left: 0px;
    background: blue;
}

#chartheader {
    z-index:5; 
}

#sidebar {
    z-index:6;
}

    .scroll {
        overflow: auto;
        -webkit-overflow-scrolling: touch;
    }

/* relevant html */

    <div id="content" style="position: relative;">
        <div id="chartheader" class="fixedaxis"></div>
        <div id="sidebar" class="fixedaxis"></div>
        <div class="scroll">
            <section id="barchart">
            </section>
         </div>
     </div>

/*javascript */

var scroller = $('.scroll');
var tableHeader = $('#chartheader');
var sidebar = $('#sidebar');
scroller.on('scroll', function() {
    console.log("scrolling: " + this.scrollLeft);
    tableHeader.css('left', (-1 * this.scrollLeft) + 'px');
    sidebar.css('top', (-1 * this.scrollTop) + 'px');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:56:07.837

所以事实证明，你不能。至少，目前不是。

根据苹果开发者文档 [https://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html](https://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)

当用户的手指在屏幕上时，您会收到滚动事件，一旦动量停止，您会收到一个最终滚动事件。如果内容在这两个时段之间滑动，则您不会收到任何事件。

我们最终做的是在第二个滚动事件上使侧边栏内容半透明，然后在超时后再次使其不透明，如果再次触发单个“动量结束”滚动事件，则允许重新定位。

类似于以下内容：

```
 var lastTimeout;
           var numScrolls = 1;
           var startTop = 0;

           function(event) {
                var elem = event.target;
                startTop = startTop || elem.scrollTop;

                if (lastTimeout) {
                    clearTimeout(lastTimeout);
                } else if (numScrolls == -1) {
                   /* I've omitted some short circuit logic for other scrolling cases
                    * but that's why we're going off of -1 here 
                    */

                    // stray scroll from native scroll end
                    $labels[0].scrollTop = elem.scrollTop;
                    $labels.css('opacity', '1');
                    startTop = null;
                }

                // wait for two consecutive scrolls
                if (numScrolls > 0) {
                    $labels.css('opacity', '0.3');
                }

                ++numScrolls;
                lastTimeout = setTimeout(function() {
                    console.log(elem.scrollTop);
                    $labels[0].scrollTop = elem.scrollTop;
                    $labels.css('opacity', '1');
                    lastTimeout = null;
                    numScrolls = -1;
                    startTop = null;
                }, 1000);
            }; 
```

# ios - 无法在 iOS 邮件应用中预览 xls 邮件

> ID：10439652
> 
> 赞同：1
> 
> 时间：2012-05-03T21:35:49.800
> 
> 标签：ios, xls, email-attachments

我为 iPhone 联系人编写了一个备份应用程序，该应用程序将附有 xls 的邮件发送到指定的邮件地址......

在我编码的早期，当应用程序发送存在联系人的 xls 文件时，我可以通过 iOS 中的邮件应用程序预览它。

现在，我完成了编码，但是发送的 xls 文件无法在 iOS 邮件应用程序中预览......我也尝试在 Outlook 中预览它。还是一样的...在Outlook中，当我按下文件时我可以打开文件，但是当我选择预览时，它无法打开...

# python - Fabric + django 异步提示输入 sudo 密码

> ID：10439654
> 
> 赞同：1
> 
> 时间：2012-05-03T21:36:08.063
> 
> 标签：python, ajax, django, sudo, fabric

我正在开发 Django 和 Fabric 中的部署工具。案例是在初始形式中放置一些参数（如主机名和用户名），然后让 Django 应用程序调用结构方法来完成其余的工作并在 Web 浏览器中收集输出。

如果从操作系统到结构有密码提示（即运行 sudo 命令等），我想弹出一个字段表单以输入密码（例如使用 jQuery UI 元素）。该人将填写用户提示的密码字段，Fabric 将继续执行这些操作。这种情况有可能实现吗？我正在考虑对浏览器进行一些异步调用，但我不知道如何从另一端完成。可能还有另一种方法。

如果您有任何建议，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:45:47.603

是的，捕获密码异常，而不是弹出表单，然后再次运行结构脚本`env.password = userpassword`

如果您想从捕获异常的地方继续，请保留一个知道已经完成了什么的变量（即 nlinesexecuted），并在捕获异常时保存它。重新运行脚本以从您离开的地方继续时使用逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:45:31.023

我想不出一种仅在需要时才提示密码的方法……但是，您可以在之前提示并根据需要对其进行缓存，并且后端可以访问。

要将 sudo 密码传递给 fabric 命令，您可以使用 sudo -S... 即

回显密码 | sudo -S 命令

# ruby-on-rails - rails：使用 Model.save 传递附加参数？

> ID：10439657
> 
> 赞同：1
> 
> 时间：2012-05-03T21:36:15.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用内部 API 应用程序。当我使用我的前端应用程序请求信息时，我可以通过请求传递一个附加参数，如下所示：

```
Model.find(id, :params => {:locale => I8n.locale})
or
Model.get(:custom_api_call, :locale => I18n.locale) 
```

有没有使用 Model.save 或 Model.update_attributes 的地方？例如，这不起作用：

```
Model.save(:params => {:locale => I18n.locale})
Model.save(:locale => I18n.locale)
Model.update_attributes(:locale => I18n.locale)
Model.update_attributes(:params => {:locale => I18n.locale}) 
```

可以想象，这些只是将 :locale 添加到发送到我的 API 的属性中。

更好！如果有人知道如何将 :locale => I18n.locale 作为每次通信的参数传递，那会让我干掉很多代码。

感谢您的时间

# jquery - 不同浏览器中的关键代码？jQuery

> ID：10439658
> 
> 赞同：3
> 
> 时间：2012-05-03T21:36:16.557
> 
> 标签：jquery, html, firefox, keycode

我所发现的只是不同的网络浏览器在关键代码方面存在不一致。

我有以下代码在 Safari、Opera 和 Chrome 中按 Enter 时运行良好，但在 Firefox 中却没有。

我使用 FF 9.0.1

以下是出现问题的两个代码片段：

1)

```
//Post something
$('#postDiv').on('keydown', '#posttext', function(e) {
    if ((e.keyCode == 13 || e.which == 13) && !event.shiftKey) {
        post($(this));
    }
}); 
```

2)

```
//Comment on a post
$('.commenttext').live('keydown', function(e) {
    if ((e.keyCode == 13 || e.which == 13) && !event.shiftKey) {
        comment($(this));
    }
}); 
```

这两个函数甚至都没有被调用。

提前谢谢你:-)丹尼斯

编辑 1

我只使用 e.which 进行了更多测试，并注意到当我省略 && !event.shiftKey 时它可以工作 - 显然 FF 不知道该命令。有没有其他选择？我希望用户能够在不提交帖子的情况下按 shift+enter。我已经尝试过条件 if (e.which==13 && e.which!=16) 但无济于事。

编辑 2 - 解决方案

首先感谢大家的回答！当然它必须是 e.shiftKey，而不是 event.shiftKey！现在它适用于所有浏览器（我还没有尝试过的唯一一个是 IE）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:40:52.770

来自[http://api.jquery.com/event.which/](http://api.jquery.com/event.which/)

> event.which 属性规范了 event.keyCode 和 event.charCode。建议观看 event.which 进行键盘按键输入。

您不需要使用 e.keyCode 并且您可能会遇到 e.which != 13 但 e.keyCode 确实存在的问题。从控制结构中删除 e.keyCode 评估后，您是否验证问题仍然存在？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:40:18.493

您不需要同时使用`keyCode`and `which`，只需`which`在所有浏览器中使用 and 就可以了 :)

[http://api.jquery.com/event.which/](http://api.jquery.com/event.which/)

# iphone - 没有互联网时的 NSURLConnection 行为

> ID：10439659
> 
> 赞同：0
> 
> 时间：2012-05-03T21:36:20.650
> 
> 标签：iphone, ios, networking, nsurlconnection

有谁知道我在哪里可以找到有关 NSURLConnection 行为的文档？

我试图找出当您发送异步请求但没有网络时 NSURLConnection 做了什么。NSURLConnection 是否超时，或者它只是等到 iOS 获得网络？

我需要向服务器发送一个包含数据的异步请求，但该应用程序将在现场使用，其中网络连接充其量是参差不齐的。在这种情况下，我希望应用程序在有网络后立即上传数据。

编辑：查看可达性，如果互联网服务恢复正常（例如，您回到手机信号塔的范围内），它无法通知我。有谁知道当有互联网连接时系统是否可以通知我的应用程序以便它可以做它的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:01:31.810

```
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    //When there is no internet connection, you will get an error right away
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:44:17.217

是的，当没有网络可用时它会超时。

您应该使用可达性来实现这种行为。当您恢复网络时，您会收到通知，并将尽快上传数据。

这可能是您的起点：[iPhone 可达性检查](https://stackoverflow.com/a/1863192/402214)

还有这个：[适用于 iOS 和 MacOS 的 ARC 和 GCD 兼容可达性类。](https://stackoverflow.com/a/9697706/402214)替换我使用[的 Apple Reachability](https://stackoverflow.com/a/9697706/402214)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:49:27.890

可能您正在寻找[可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

回答您的问题时，错误可能是超时或“Internet 连接似乎处于脱机状态。”，具体取决于具体情况

# c# - 列表视图列

> ID：10439660
> 
> 赞同：0
> 
> 时间：2012-05-03T21:36:21.040
> 
> 标签：c#, .net, listview

我在一个 2 列`ListView`。我的“C:\file.txt”看起来像这样：

```
1;aaa 
2;bbb
3;ccc 
4;ddd 
```

等等。（每个数字和文本在单独的行中）我的代码：

```
FileStream spis = File.Open("C:\\file.txt", FileMode.Open, FileAccess.Read);
StreamReader yaRead = new StreamReader(spis);
string yaView = yaRead.ReadToEnd();
yaRead.Close();
spis.Close();
String[] yaArray = yaView.Split(new char[] {';'});
foreach (string ya in yaArray)
{
    listView1.Items.Add(ya);
} 
```

结果

```
1
aaa
bbb
(...) 
```

...在第一列中，在第二列中没有任何内容。请帮我修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:49:47.063

您可以通过[ListViewItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.aspx)的 SubItems 属性将列添加到列表视图。

最简单的方法是执行以下操作：

```
ListViewItem newItem = new ListViewItem("1");
newItem.SubItems.Add("aaa");
listView1.Items.Add(newItem); 
```

如果我们以您的为例，我们可以简单地执行以下操作：

```
string[] yaArray = yaView.Split(new string[] { Environment.NewLine }, StringSplitOptions.None); 
```

这将为您提供一个如下所示的数组：

```
[1;aaa]
[2;bbb]
[3;ccc]
[4;ddd] 
```

我们根据新行而不是分号进行拆分。

然后只需执行以下操作：

```
foreach(string lineItem in yaArray)
{
  string[] listViewRow = lineItem.Split(new string[] { ";" }, StringSplitOptions.None); //Now we split on the semi colon to give us each item
  ListViewItem newItem = new ListViewItem(listViewRow[0]);
  newItem.SubItems.Add(listViewRow[1];
  listView1.Items.Add(newItem);
} 
```

那应该给你你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:50:39.257

请将 SUBitems 添加到列表中

```
foreach(var line in File.ReadAllLines(@"C:\file.txt"))
{
  listView1.Items.Add(line.Split(';'));
} 
```

# ios - 方舟！ARC 错误：'CFTypeRef' (aka 'const void *') to 'NSNumber *' 是不允许的

> ID：10439664
> 
> 赞同：0
> 
> 时间：2012-05-03T21:36:50.617
> 
> 标签：ios, ios5, automatic-ref-counting

我正在尝试将一些 Apple 代码（来自`SquareCam`示例）转换为 ARC。我将 Apple 代码标记为编译为非 ARC 并且它可以工作，但是我在将非 ARC 上下文之间的图像传递到 ARC 上下文时遇到崩溃错误 - 所以我正在尝试解决这个问题。

无论如何，我想我已经处理了所有 ARC 的东西，除了这条线：

```
 NSNumber *orientation = CMGetAttachment(imageDataSampleBuffer, kCGImagePropertyOrientation, NULL); 
```

这用于`CIDetectorImageOrientation`键值（CoreImage 人脸检测）。我得到了下面的 ARC 错误，我尝试过的东西都没有解决这个问题。“imageDataSampleBuffer”的类型为`CMSampleBufferRef`。

将 CFTypeRef 转换为我需要的 NSNumber 的正确方法是什么？- 谢谢！

> ARC 不允许将非 Objective-C 指针类型“CFTypeRef”（又名“const void *”）隐式转换为“NSNumber *”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:57:48.033

因为您将 CFTypeRef 分配给 NSObject*，所以编译器会抱怨。您需要对`__bridge`NSNumber 执行操作。

# regex - 正则表达式模式任意两个字母后跟六个数字

> ID：10439666
> 
> 赞同：41
> 
> 时间：2012-05-03T21:36:57.997
> 
> 标签：regex

请协助正确的正则表达式匹配任意 2 个字母后跟 6 个整数的任意组合。

```
These would be valid: 
RJ123456
PY654321
DD321234

These would not
DDD12345
12DDD123 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-03T21:40:30.573

`[a-zA-Z]{2}\d{6}`

`[a-zA-Z]{2}`表示两个字母 `\d{6}`表示 6 位数字

如果你只想要大写字母，那么：

`[A-Z]{2}\d{6}`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-03T21:40:28.777

你可以尝试这样的事情：

```
[a-zA-Z]{2}[0-9]{6} 
```

下面是表达式的分解：

```
[a-zA-Z]    # Match a single character present in the list below
               # A character in the range between “a” and “z”
               # A character in the range between “A” and “Z”
   {2}         # Exactly 2 times
[0-9]       # Match a single character in the range between “0” and “9”
   {6}         # Exactly 6 times 
```

这将匹配主题中的任何位置。如果您需要围绕主题设置边界，则可以执行以下任一操作：

```
^[a-zA-Z]{2}[0-9]{6}$ 
```

这确保了整个主题匹配。即主题之前或之后没有任何内容。

或者

```
\b[a-zA-Z]{2}[0-9]{6}\b 
```

这确保了主题的每一侧都有一个[单词边界。](http://www.google.co.uk/url?sa=t&rct=j&q=word%20boundary%20regex&source=web&cd=1&sqi=2&ved=0CCwQFjAA&url=http://www.regular-expressions.info/wordboundaries.html&ei=Pv2iT5zIGYmjiQfyq-WpDw&usg=AFQjCNFCKck5wXDyhxXApfhUsfuqmd32rg)

正如@Phrogz 所指出的，您可以通过替换其他答案中的`[0-9]`for a来使表达式更简洁。`\d`

```
[a-zA-Z]{2}\d{6} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-03T21:43:49.417

我取决于您使用的正则表达式语言是什么，但非正式地，它将是：

```
[:alpha:][:alpha:][:digit:][:digit:][:digit:][:digit:][:digit:][:digit:] 
```

在哪里`[:alpha:] = [a-zA-Z]` 和`[:digit:] = [0-9]`

如果您使用允许有限重复的正则表达式语言，则如下所示：

```
[:alpha:]{2}[:digit:]{6} 
```

正确的语法取决于您使用的特定语言，但这就是想法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T21:44:02.703

根据您的正则表达式是否支持它，我可能会使用：

```
\b[A-Z]{2}\d{6}\b    # Ensure there are "word boundaries" on either side, or

(?<![A-Z])[A-Z]{2}\d{6}(?!\d) # Ensure there isn't a uppercase letter before
                              # and that there is not a digit after 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-03T21:48:34.300

您在此需要的一切都可以在[此快速入门指南](http://www.regular-expressions.info/quickstart.html)中找到。一个简单的解决方案是`[A-Za-z][A-Za-z]\d\d\d\d\d\d`or `[A-Za-z]{2}\d{6}`。

如果您只想接受大写字母，请替换`[A-Za-z]`为`[A-Z]`.

# c# - 在不加载到当前 AppDomain 的情况下获取自定义程序集属性

> ID：10439668
> 
> 赞同：14
> 
> 时间：2012-05-03T21:37:03.003
> 
> 标签：c#, .net, c#-4.0, reflection

我创建了一个小应用程序，以递归方式在提供的目录中加载程序集并读取它们的自定义属性集合。主要只是读取 DebuggableAttribute 来确定 IsJITTrackingEnabled 和 IsJITOptimizerDisabled 的设置，以确定程序集是否针对发布进行了优化。

我当前的代码执行 Assembly.LoadFrom 以传入程序集的整个路径并加载它。然后在程序集上执行 GetCustomAttributes 以获取可调试属性。问题是每个程序集都被加载到当前的应用程序域中。因此，如果另一个文件夹使用相同的程序集，它只会使用最初加载的引用。我希望能够加载程序集，读取我需要的属性，然后卸载它。我尝试创建一个新的 appdomain 并将程序集加载到其中，然后卸载程序集后记无济于事。

我知道这一定是可能的，但我不知所措。任何帮助将不胜感激。我也很乐意提供您可能需要的任何其他信息。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-03T21:51:42.247

简短的回答是，不，没有办法按照你的要求去做。

更长的答案是：有一种特殊的程序集加载方法，[`Assembly.ReflectionOnlyLoad()`](http://msdn.microsoft.com/en-us/library/0et80c7k.aspx)它使用“仅反射”加载上下文。这使您可以加载无法执行但可以读取其元数据的程序集。

在您的情况下（显然，在我自己想出的每个用例中）它并没有那么有帮助。您不能从这种程序集中获取类型化属性，只有`CustomAttributeData`. 该类没有提供任何过滤特定属性的好方法（我能想到的最好的方法是将其转换为字符串并使用`StartsWith("[System.Diagnostics.Debuggable");`

更糟糕的是，仅反射加载不会加载任何依赖程序集，但*它会迫使您手动进行*。这在客观上比你现在所做的更糟糕；至少现在您可以自动加载依赖项。

（另外，我之前的回答提到了 MEF；我错了，MEF 似乎包含大量自定义反射代码来完成这项工作。）

最终，一旦程序集被加载，您就无法卸载它。您需要卸载*整个应用程序域*，[如此 MSDN 文章中所述。](http://msdn.microsoft.com/en-us/library/c5b8a8f9%28v=vs.100%29.aspx)

更新：

如评论中所述，我能够通过仅反射加载（和正常加载）获得所需的属性信息，但缺少类型化的属性元数据使其非常痛苦。

如果加载到正常的程序集上下文中，您可以很容易地获得所需的信息：

```
var d = a.GetCustomAttributes(typeof(DebuggableAttribute), false) as DebuggableAttribute;
var tracking = d.IsJITTrackingEnabled;
var optimized = !d.IsJITOptimizerDisabled; 
```

如果加载到仅反射上下文中，您可以做一些工作；您必须弄清楚属性构造函数采用的形式，知道默认值是什么，并结合这些信息得出每个属性的最终值。你得到你需要的信息是这样的：

```
var d2 = a.GetCustomAttributesData()
         .SingleOrDefault(x => x.ToString()
                                .StartsWith("[System.Diagnostics.DebuggableAttribute")); 
```

从那里，您需要检查`ConstructorArguments`以查看调用了哪个构造函数：[这个](http://msdn.microsoft.com/en-US/library/adcetswf%28v=vs.80%29.aspx)有一个参数或[这个](http://msdn.microsoft.com/en-US/library/k2wxda47%28v=vs.80%29.aspx)有两个参数。然后，您可以使用适当参数的值来确定您感兴趣的两个属性会采用什么值：

```
if (d2.ConstructorArguments.Count == 1)
{
  var mode = d2.ConstructorArguments[0].Value as DebuggableAttribute.DebuggingModes;
  // Parse the modes enumeration and figure out the values.
}
else
{
  var tracking = (bool)d2.ConstructorArguments[0].Value;
  var optimized = !((bool)d2.ConstructorArguments[1].Value);
} 
```

最后，您需要检查是否`NamedArguments`可能会覆盖那些在构造函数上设置的内容，例如：

```
var arg = NamedArguments.SingleOrDefault(x => x.MemberInfo.Name.Equals("IsJITOptimizerDisabled"));
var optimized = (arg == null || !((bool)arg.TypedValue.Value)); 
```

最后一点，如果您在 .NET 2.0 或更高版本下运行它，并且还没有看到，MSDN 在[`DebuggingModes`](http://msdn.microsoft.com/en-US/library/system.diagnostics.debuggableattribute.debuggingmodes%28v=vs.80%29.aspx)文档中指出了这一点：

> 在 .NET Framework 2.0 版本中，始终会生成 JIT 跟踪信息，该标志与 Default 的效果相同，只是 IsJITTrackingEnabled 属性为 false，在 2.0 版本中没有任何意义。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-03T21:58:32.433

你需要使用`Assembly.ReflectionOnlyLoad`.

以下是一些[MSDN 说明](http://blogs.msdn.com/b/junfeng/archive/2004/08/24/219691.aspx)，展示了如何使用它：

```
using System;
using System.IO;
using System.Reflection;

public class ReflectionOnlyLoadTest
{
    public ReflectionOnlyLoadTest(String rootAssembly) {
        m_rootAssembly = rootAssembly;
    }

    public static void Main(String[] args)
    {
        if (args.Length != 1) {
            Console.WriteLine("Usage: Test assemblyPath");
            return;
        }

        try {
            ReflectionOnlyLoadTest rolt = new ReflectionOnlyLoadTest(args[0]);
            rolt.Run();
        }

        catch (Exception e) {
            Console.WriteLine("Exception: {0}!!!", e.Message);
        }
    }

    internal void Run() {
        AppDomain curDomain = AppDomain.CurrentDomain;
        curDomain.ReflectionOnlyPreBindAssemblyResolve += new ResolveEventHandler(MyReflectionOnlyResolveEventHandler);
        Assembly asm = Assembly.ReflectionOnlyLoadFrom(m_rootAssembly);

        // force loading all the dependencies
        Type[] types = asm.GetTypes();

        // show reflection only assemblies in current appdomain
        Console.WriteLine("------------- Inspection Context --------------");
        foreach (Assembly a in curDomain.ReflectionOnlyGetAssemblies())
        {
            Console.WriteLine("Assembly Location: {0}", a.Location);
            Console.WriteLine("Assembly Name: {0}", a.FullName);
            Console.WriteLine();
        }
    }

    private Assembly MyReflectionOnlyResolveEventHandler(object sender, ResolveEventArgs args) {
        AssemblyName name = new AssemblyName(args.Name);
        String asmToCheck = Path.GetDirectoryName(m_rootAssembly) + "\\" + name.Name + ".dll";
        if (File.Exists(asmToCheck)) {
            return Assembly.ReflectionOnlyLoadFrom(asmToCheck);
        }
        return Assembly.ReflectionOnlyLoad(args.Name);
    }

    private String m_rootAssembly;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T22:02:19.967

永远不可能在当前的 AppDomain 中卸载程序集，不幸的是，这正是 .NET 设计的工作方式。即使是 ReflectionOnly 负载也是如此。这样做也有一点麻烦，因为您需要使用[GetCustomAttributesData](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcustomattributesdata.aspx)方法而不是普通的 GetCustomAttributes，因为后者需要在属性构造函数中运行代码。这会使生活更加困难。

一个可行的替代方法是使用[Cecil](http://www.mono-project.com/Cecil)，它允许您检查程序集而无需在正常意义上实际加载它。但这是很多额外的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T21:52:23.180

我相信 Assembly.ReflectionOnlyLoad 是您正在寻找的。

# xml - 你可以有多个带有 CDATA 部分的 xml 标签的标签吗？

> ID：10439672
> 
> 赞同：0
> 
> 时间：2012-05-03T21:37:28.733
> 
> 标签：xml, cdata

我有一个看起来像这样的 xml 文件：

```
 <bookstore>  

 <book category="COOKING">  
   <title lang="en">Everyday Italian</title>  
   <author>Giada De Laurentiis</author>  
   <year>2005</year>  
   <price>30.00</price>  
   <![CDATA[<<port>url=  https://localhost:8080<port>]]>
 </book> 
```

我看到在处理它时，整个标签都被视为 CDATA。您可以在具有 CDATA 的标签内使用其他标签吗？我没有找到任何这样做的在线示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:58:47.780

首先，您似乎不清楚“标签”是什么。鉴于这种：

```
<a><![CDATA[xyz]]></a> 
```

有两个标签：一个开始标签`<a>`和一个结束标签`</a>`。CDATA 部分不是“在”标签中，而是在两个标签之间。

因此，当您说“整个标签被视为 CDATA”时，我认为您的意思是“标签之间的整个内容都被视为 CDATA”；是的，这是正确的。当您说“您可以在具有 CDATA 的标签中使用其他标签吗？” 我认为你的意思是“你可以在 CDATA 部分内有标签吗？”答案是否定的：使用 CDATA 部分的唯一目的是防止该部分内的任何尖括号被识别为标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:06:06.330

解析器会忽略 CDATA 部分中的所有内容。

在您的情况下`<<port>url= https://localhost:8080<port>`，不会被视为包含标签的 XML，而是纯文本。

如果您想要一个包含 CDATA 部分的端口元素，您应该将您的行修改为

`<port><![CDATA[url= https://localhost:8080]]></port>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:28:11.570

如果您查看[CDATA 部分的定义，](http://en.wikipedia.org/wiki/CDATA)`<![CDATA[`则开始和结束标记之间的所有内容`]]>`都被视为文本输入，根本不会对信息进行任何处理。

现在，如果您在 CDATA 部分中形成有效的 XML，一旦您提取它，您就可以单独处理该文档。

# php - PHP - 与 SOLR 3.x 兼容的 Solr API？

> ID：10439675
> 
> 赞同：0
> 
> 时间：2012-05-03T21:37:55.103
> 
> 标签：php, solr

任何人都知道 PHP Solr API 是否与 SOLR 3.x 兼容？我能看到的唯一具体兼容性来自 PHP SOLR[介绍页面](http://us3.php.net/manual/en/intro.solr.php)。我还检查了[PECL SOLR 页面](http://pecl.php.net/package/solr)（和更改日志），也没有发现任何参考资料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:47:54.747

据我所知，它与 Solr 3.X 兼容。我一直在使用带有 Solr 3.4 实例的 PHP Solr API，并且没有遇到任何问题。

# c++ - wchar_t 和编码

> ID：10439680
> 
> 赞同：6
> 
> 时间：2012-05-03T21:38:17.840
> 
> 标签：c++, character-encoding, wchar-t

如果我想将一段字符串转换为 UTF-16，比如说，在编码为 UTF-16 之前`char * xmlbuffer`是否必须将类型转换为？在编码为 UTF-8 之前是否需要输入类型`wchar_t *`？`char*`

与UTF-8 或 UTF-16 或 UTF-32 或其他转换格式有何关系`wchar_t`？`char`

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T22:10:56.650

不，您不必更改数据类型。

关于`wchar_t`：标准说

> wchar_t 类型是一种不同类型，其值可以表示受支持的语言环境中指定的最大扩展字符集的所有成员的不同代码。

不幸的是，它没有说明`wchar_t`应该有什么编码。这取决于实现。所以例如给出

```
auto s = L"foo"; 
```

您绝对不能假设表达式的值是什么`*s`。

但是，您可以将 an`std::string`用作不透明的字节序列，以您选择的任何转换格式表示文本，而不会出现问题。只是不要对它执行标准库字符串相关的操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T22:24:50.160

[`iconv`](http://pubs.opengroup.org/onlinepubs/009695399/functions/iconv.html)是一个 POSIX 函数，可以处理中间编码步骤。您可以使用`iconv_open`来指定您有 UTF-8 输入并且您想要 UTF-16 输出。然后，使用从 返回的句柄`iconv_open`，您可以使用`iconv`（指定输入缓冲区和输出缓冲区）。完成后，您必须调用`iconv_close`从`iconv_open`释放资源等返回的句柄。

您必须仔细阅读系统文档，了解支持哪些编码`iconv`及其命名方案（即提供什么`iconv_open`）。例如，`iconv`在某些系统上期望`"utf-8"`和其他系统可能期望`"UTF8"`等。

Windows 没有提供 iconv 的版本，而是提供了它自己的 UTF 格式化函数：[MultiByteToWideChar](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)和[WideCharToMultiByte](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)。

```
//UTF8 to UTF16
std::string input = ...
int utf16len = MultiByteToWideChar(CP_UTF8, 0, input.c_str(), input.size(), 
                                               NULL, 0);
std::wstring output(utf16len);
MultiByteToWideChar(CP_UTF8, 0, input.c_str(), input.size(), 
                                &output[0], output.size());
//UTF16 to UTF8
std::wstring input = ...
int utf8len = WideCharToMultiByte(CP_UTF8, 0, input.c_str(), input.size(), 
                                              NULL, 0, NULL, NULL);
std::string output(utf8len);
WideCharToMultiByte(CP_UTF8, 0, input.c_str(), input.size(),
                                &output[0], output.size(), NULL, NULL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T22:03:33.447

的大小`wchar_t`取决于编译器，因此它与各种 unicode 格式的关系会有所不同。

# c++ - 平衡二叉搜索树 (BST)

> ID：10439681
> 
> 赞同：6
> 
> 时间：2012-05-03T21:38:17.887
> 
> 标签：c++, binary-search-tree

我正在尝试创建一个 balance_bst(bstNode root) 函数，但我正在努力实现。

我将该函数实现为模板函数，因为我的 bstNode 类是模板类。

这是（部分）我的代码：

```
template<class Item, class  Key>
class bstNode{
public:
    //Constructor
    bstNode(const Item& init_data = Item(), const Key& init_key = Key(), bstNode<Item, Key>* l_child = NULL, bstNode<Item, Key>* r_child = NULL){
        data_field = init_data;
        key_field = init_key;
        l_ptr = l_child;
        r_ptr = r_child;
    }
    //Destructor
    ~bstNode(){
        data_field = 0;
        key_field = 0;
        l_ptr = r_ptr = NULL;
    }
    //Basic Member Functions
    bstNode<Item, Key>*& left( )   {                    return l_ptr;       }           //returns left child pointer by reference
    bstNode<Item, Key>*& right( )  {                    return r_ptr;       }           //returns right child pointer by reference
    bstNode<Item, Key>* left( ) const   {               return l_ptr;       }       //returns left child pointer by reference
    bstNode<Item, Key>* right( ) const  {               return r_ptr;       }       //returns right child pointer by reference
    const Item& data() const{                           return data_field;  }           //returns reference to data_field
    const Key& key()const {                             return key_field;   }
    Item& data() {                                      return data_field;  }           //returns reference to data_field
    Key& key() {                                        return key_field;   }
    void set_data(const Item& new_data){            data_field = new_data;      }       //sets data_field to new_data
    void set_key(const Key& new_key){               key_field = new_key;        }       //sets key_field to new_key
    void set_left(bstNode* new_left){               l_ptr = new_left;           }       //sets left child pointer to new_left
    void set_right(bstNode* new_right){             r_ptr = new_right;          }       //sets right child pointer to new_right

private:
    bstNode<Item, Key>  *l_ptr,     //pointer to left child node 
                        *r_ptr;     //pointer to right child node
    Item    data_field;
    Key     key_field;
};

template<class Item, class Key>
void balance_bst(bstNode<Item, Key>*& root){                //unfinished

    std::vector< bstNode<Item, Key>* > nodes;
    sorter(root, nodes);
    size_t i = nodes.size()/2;                      //size() divided by 2 will yield
                                                    //index of middle element of vector for 
                                                    //odd-isized arrays and the greater of the 
                                                    //middle two elements for an even-sized array

    while(i>=0){
        root->set_key(nodes[i]->key());                             
        root->set_data(nodes[i]->data());
         //.....MORE CODE HERE: recursive call??

    }

}

template<class Item, class Key>
void sorter(bstNode<Item, Key>*& root, std::vector<bstNode<Item, Key>* >& tree_nodes){
    if(root == NULL)
        return;
    sorter(root->left(), tree_nodes);
    tree_nodes.push_back(root);
    sorter(root->right(), tree_nodes); 
} 
```

我一直在搞乱实际的 balance_bst 函数，并认为递归是显而易见的解决方案，但我似乎无法解决这个问题......

sorter 基本上使用中序处理算法将 BST 的元素插入到向量中。所以只要“root”是一个指向二叉搜索树根的指针（即节点左子树的所有键值都小于节点的键值并且节点右子树的所有键值都大于节点）然后插入向量中的节点将以升序方式排序。

然后，为了创建一棵平衡树，我将节点插入到树根的向量中心，然后应该能够递归地插入左右子节点，然后它们将位于左半部分的中间向量和向量右半部分的中间。

注意：我知道这是使用整数除法，也就是说，7/2 = 3，这将是大小为 7 的数组的中间元素的索引。对于偶数大小的数组，上面实现的算法将找到向量中间的两个元素中较大者的索引。

无论如何，欢迎和鼓励任何建议或意见！提前致谢。

编辑：我要问的是如何实现平衡二叉搜索树的功能？（平衡 BST 是在给定节点数量的情况下具有最小深度的 BST。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T21:45:50.107

平衡二叉搜索树也称为 AVL 树。

[这个维基百科链接](http://en.wikipedia.org/wiki/AVL_tree) 对解决平衡问题有很好的解释。

我发现平衡树的最简单方法是在插入期间。这是一个带有辅助函数（用于各种旋转情况）和一个 AVLNode 类的递归插入。

```
 bool avl_insert(AVLNode*& subRoot, const int &newData, bool &taller)
        {
            bool result = true;
            if(!subRoot){
                subRoot = new AVLNode(newData);
                taller = true;
            }
            else if(newData == subRoot->getData()){
                result = false;
                taller = false;
            }
            else if(newData < subRoot->getData()){
                result = avl_insert(subRoot->getLeft(), newData, taller);
                if(taller)
                    switch(subRoot->getBalance()){
                    case -1:
                        left_balance(subRoot);
                        taller = false;
                        break;
                    case 0:
                        subRoot->setBalance(-1);
                        break;
                    case 1:
                        subRoot->setBalance(0);
                        taller = false;
                        break;
                    }
            }
            else{
                result = avl_insert(subRoot->getRight(), newData, taller);
                if(taller)
                    switch(subRoot->getBalance()){
                    case -1:
                        subRoot->setBalance(0);
                        taller = false;
                        break;
                    case 0:
                        subRoot->setBalance(1);
                        break;
                    case 1:
                        right_balance(subRoot);
                        taller = false;
                        break;
                    }
            }
            return result;
        } 
```

辅助函数

```
 void right_balance(AVLNode *&subRoot)
        {
            AVLNode *&right_tree = subRoot->getRight();
            switch(right_tree->getBalance()){
            case 1:
                subRoot->setBalance(0);
                right_tree->setBalance(0);
                rotate_left(subRoot); break;
            case 0:
                cout<<"WARNING: program error in right_balance"<<endl; break;
            case -1:
                AVLNode *subTree = right_tree->getLeft();
                switch(subTree->getBalance()){
                    case 0:
                        subRoot->setBalance(0);
                        right_tree->setBalance(0);break;
                    case -1:
                        subRoot->setBalance(0);
                        right_tree->setBalance(1); break;
                    case 1:
                        subRoot->setBalance(-1);
                        right_tree->setBalance(0);break;
                }
                subTree->setBalance(0);
                rotate_right(right_tree);
                rotate_left(subRoot); break;
            }
        }
        void left_balance(AVLNode *&subRoot)
        {
            AVLNode *&left_tree = subRoot->getLeft();
            switch(left_tree->getBalance()){
            case -1:
                subRoot->setBalance(0);
                left_tree->setBalance(0);
                rotate_right(subRoot); break;
            case 0:
                cout<<"WARNING: program error in left_balance"<<endl; break;
            case 1:
                AVLNode *subTree = left_tree->getRight();
                switch(subTree->getBalance()){
                    case 0:
                        subRoot->setBalance(0);
                        left_tree->setBalance(0);break;
                    case -1:
                        subRoot->setBalance(0);
                        left_tree->setBalance(1); break;
                    case 1:
                        subRoot->setBalance(-1);
                        left_tree->setBalance(0);break;
                }
                subTree->setBalance(0);
                rotate_left(left_tree);
                rotate_right(subRoot); break;
            }
        }

    void rotate_left(AVLNode *&subRoot)
    {
        if(subRoot == NULL || subRoot->getRight() == NULL)
            cout<<"WARNING: program error detected in rotate_left"<<endl;
        else{
            AVLNode *right_tree = subRoot->getRight();
            subRoot->setRight(right_tree->getLeft());
            right_tree->setLeft(subRoot);
            subRoot = right_tree;
        }
    }
    void rotate_right(AVLNode *&subRoot)
    {
        if(subRoot == NULL || subRoot->getLeft() == NULL)
            cout<<"WARNING: program error detected in rotate_left"<<endl;
        else{
            AVLNode *left_tree = subRoot->getLeft();
            subRoot->setLeft(left_tree->getRight());
            left_tree->setRight(subRoot);
            subRoot = left_tree;
        }
    } 
```

AVLNode 类

```
class AVLNode
{
  public:
        AVLNode()
        {
            previous = NULL;
            next = NULL;
        }
        AVLNode(int newData){
            data = newData;
            previous = NULL;
            balance=0;
            next = NULL;
        }
        ~AVLNode(){}
        void setBalance(int b){balance = b;}
        int getBalance(){return balance;}
        void setRight(AVLNode* newNext){next = newNext;}
        void setLeft(AVLNode* newPrevious){previous = newPrevious;}
        AVLNode* getRight() const{return next;}
        AVLNode* getLeft() const{return previous;}
        AVLNode*& getRight(){return next;}
        AVLNode*& getLeft(){return previous;}
        int getData() const{return data;}
        int& getData(){return data;}
        void setData(int newData){data = newData;}
        void setHeight(int newHeight){ height = newHeight;}
        int getHeight(){return height;}
  private:
        AVLNode* next;
        AVLNode* previous;
        int balance;
        int height;
        int data;
}; 
```

希望这可以帮助！

# ruby-on-rails - 渴望加载嵌套的重复模型？

> ID：10439683
> 
> 赞同：0
> 
> 时间：2012-05-03T21:38:24.533
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.1, eager-loading

假设我有一个项目模型，其中包含许多成员和许多任务。

```
class Project < ActiveRecord::Base
  has_many :memberships
  has_many :members, :through => :memberships, :class_name => 'User'
  has_many :tasks
end 
```

在项目中创建任务时，我们会记录哪个用户创建了它。只有属于当前项目成员的用户才能

```
class Task < ActiveRecord::Base
  belongs_to :creator, :class_name => 'User'
  belongs_to :project
end 
```

在我的`projects#show`操作中，我想找到一个项目并将其与它的成员、任务及其创建者一起显示。我尝试急切地加载这些东西以加快查询速度。

由于我急于加载搜索成员，并且任务只能有一个创建者是成员，我是否认为我不必专门包括任务的创建者？

换句话说，我可以这样做：

```
Search.includes(:members, :tasks) 
```

或者我应该这样做：

```
Search.includes(:members, :tasks => :creator) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:37:52.540

我认为您需要明确包含 :creator 否则它会在您访问创建者时查询它，因为 rails 无法知道创建者是已经查询的成员之一

# python - 如何使用 matplotlib 模块 pyplot 将变量放入 x/y 标签中

> ID：10439694
> 
> 赞同：6
> 
> 时间：2012-05-03T21:39:47.527
> 
> 标签：python, label, matplotlib, python-3.2

我在 Python3.2 中生成堆积条形图并使用“Matplotlib”模块“pyplot”。唯一的问题是，在“xlabel”中，我必须包含一个变量（整数）来表示分析的条目数。我已经尝试了很多，但找不到将变量包含在 xlabel 中的方法。

我的部分代码：

```
plt.ylabel('Percentage', fontproperties=font_manager.FontProperties(size=10))
plt.xlabel('position', fontproperties=font_manager.FontProperties(size=10))
plt.title("'Graph-A",fontproperties=font_manager.FontProperties(size=10))

plt.xticks(np.arange(22), np.arange(1,23), fontproperties=font_manager.FontProperties(size=8))
plt.yticks(np.arange(0,121,5), fontproperties=font_manager.FontProperties(size=8))
plt.legend((p1[0], p2[0], p3[0], p4[0],p5[0]), ('A','B','C','D','E'), loc=1, prop=font_manager.FontProperties(size=7)) 
```

变量“条目”保存已处理条目的值，我需要将此值包含在 xlabel 中。请帮忙？

AK

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T23:43:42.287

如果我没听错，你可以试试：

```
plt.xlabel('position %d' % entries, fontproperties=font_manager.FontProperties(size=10)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-15T03:33:17.123

这就是你可以在 python 3.6 中做的事情。

`plt.xlabel('Your variable is put here: {}'.format(variable))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T13:22:54.897

你可以试试这个。它对我有用。

```
plt.xlabel('position'+str(entries), fontproperties=font_manager.FontProperties(size=10)) 
```

我在我的代码中使用它作为

```
plt.plot(qtime,hy_p,'r.')
plt.xlabel('Time')
plt.ylabel('Hz at node '+str(50)) 
```

# ruby-on-rails - 如何将表单中的两个字段合并为模型中的一个字段

> ID：10439695
> 
> 赞同：3
> 
> 时间：2012-05-03T21:39:50.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form, fields-for

我有一列`start`日期时间类型，并希望将其显示为文本字段（以添加日期选择器）和 time_select。我尝试了不同的方法，其中一种是使用fields_for/simple_fields_for。

```
<%= f.simple_fields_for :start do |start| %>
  <%= start.input :date, :as => :string, :input_html => { :class => 'datepicker'} %>
  <%= start.input :time, :as => :time, :minute_step => 5, :input_html => { :class => 'input-small'}  %>
<% end %> 
```

如何将这两个字段转换为模型中所需的日期时间列？或者有没有更好的方法以匹配数据库中一个字段的形式显示两个字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:06:06.470

您必须解析控制器中的单独参数并将它们组合起来以生成日期时间。

我建议制作一个名为 StartTime 的模型来解析它

...应用程序/模型/start_time.rb

```
class StartTime
  extend ActiveModel::Naming

  attr_accessor :date, :time

  def initialize(date, time)
    @date = date.is_a?(String) ? Date.parse(date) : date
    @time = time
  end

  def to_timestamp
    # parse @date and @time into Datetime

end 
```

Chronic 是一个有用的宝石，用于从字符串中解析日期/时间

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:29:47.600

您可以简单地使用 Jquery timepicker 而不是组合两个字段来形成日期时间

检查这个[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

# objective-c - Objective-C：typedef'd一个块，在方法声明中使用它。我该如何实施？

> ID：10439696
> 
> 赞同：9
> 
> 时间：2012-05-03T21:39:53.863
> 
> 标签：objective-c, block

只是试图处理块。我明白了这个概念。它们就像函数指针，但它们实际上是对象；您可以声明一个块变量并为其分配一个块值；像函数一样调用它；他们被“及时冻结”，因为缺少一个术语，当他们被执行等等。我已经创建了几个块并以几种不同的格式成功运行它们，但是当涉及到在方法中使用它们时 - - 使用 typedef 或没有 - 我遇到了很多麻烦。例如，这是我创建的一个对象接口，只是为了掌握语法。我几乎不知道如何实现它。

```
// AnObject.h

#import <Foundation/Foundation.h>

// The idea with the block and the method below is for the block to take
// an int, multiply it by 3, and return a "tripled" int.  The method
// will then repeat: this process however many times the user wants via
// the howManyTimes parameter and return that value in the form of an int.

typedef int (^triple)(int);

@interface AnObject : NSObject
{
    int num;
}

-(int)repeat:(int)howManyTimes withBlock:(triple)someBlock;

@end 
```

到目前为止，这是我的实现：

```
#import "AnObject.h"

@implementation AnObject

@synthesize num;

-(int)repeat:(int)howManyTimes withBlock:(triple)someBlock {
    for (int i = 0; i <= howManyTimes; i++) {
        // What the heck am I supposed to put here?  I'm baffled by the
        // syntax over and over again.
    }
}

@end 
```

我知道我还没有解决实例变量。同样，这是一个粗略的草案，只是试图了解块的工作原理。我什至声明这种方法对吗？我正在阅读 Big Nerd Ranch 的 Objective-C Programming、Mike Clark 关于来自 Pragmatic Studio 的块的文章以及几个 SO 线程。找不到任何相关的东西。谢谢。

编辑：XCode 4.3.2，如果重要的话。

进一步编辑：好的。使用 BJ 的（稍作修改）示例，我想我想出了一个非常复杂的方法，将 5 乘以 3。:)

```
// BJ's implementation:

-(int)repeat:(int)howManyTimes withBlock:(Triple)someBlock {

    int blockReturnValue;

    for (int i = 0; i <= howManyTimes; i++) {
        blockReturnValue = someBlock(i);
    }
    return blockReturnValue;
} 
```

主要的：

```
...
    @autoreleasepool
    {
        AnObject *obj = [[AnObject alloc] init];

        NSLog(@"%d", [obj repeat: 5 withBlock: ^ (int number) {
            return number * 3;
        }]);

    }
    return 0;
... 
```

输出是：

```
15 
```

现在，它回退了 15，因为我定义为参数的块只运行一次，对吗？它将“数字”（在这种情况下为 5）乘以 3 并冻结该答案，对吗？我确定我只是创建了一个完全没用的方法，而且我还不明白如何利用块的好处/功能。我对么？

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** **** **更新* ****** *** ** *** ** *** ** *** ** *** ** *** ** ***** /***

 ***更新：我明白你在说什么，CRD。不过，对于任何可能正在阅读本文的新程序员来说，这只是一个更正，得到不同的输出并会问，“Que？” 您的 for 循环应该是：

```
for (int i = 0; i < howManyTimes; i++)
            value = someBlock(value); 
```

...或者...

```
(i = 1; i <= howManyTimes; i++) 
```

...得到答案 243。

而且，是的，这正是我最初试图用这段代码做的事情。至少那是我认为应该发生的事情。原来作者的意图不是把一个数字加三倍，存储那个值，把存储的值加三倍，存储那个……等等，而只是为数字 1-5 打印 x * 3 (3, 6, 9, 12、15)。

这是成品。我只是键入了一个块，它接受一个 int 并返回一个 int，称为 Tripler。我还将参数的名称从“someBlock”更改为“triple”，以更清楚地表明该块的预期用途。我认为这些是对代码的唯一更改。

```
/********************  interface  ********************/

#import <Foundation/Foundation.h>

typedef int (^Tripler)(int);

@interface AnObject : NSObject

-(void)iterateFromOneTo:(int)number withBlock:(Tripler)triple;

@end

/********************  implementation  ********************/

#import "AnObject.h"

@implementation AnObject

-(void)iterateFromOneTo:(int)number withBlock:(Tripler)triple {
    for (int i = 1; i <= number; i++) {
        NSLog(@"%d", triple(i));
    }
}

@end

/********************  main.m  ********************/

#import "AnObject.h"
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{
    @autoreleasepool
    {
        AnObject *obj = [[AnObject alloc] init];

        [obj iterateFromOneTo:5 withBlock:^(int number) {
            return number * 3;
        }];
    }
    return 0;
} 
```

正如您可能想象的那样，结果输出是：

```
2012-05-05 17:10:13.418 Untitled 2[71735:707] 3
2012-05-05 17:10:13.445 Untitled 2[71735:707] 6
2012-05-05 17:10:13.446 Untitled 2[71735:707] 9
2012-05-05 17:10:13.446 Untitled 2[71735:707] 12
2012-05-05 17:10:13.447 Untitled 2[71735:707] 15 
```

我让它变得比它需要的复杂得多。很抱歉在 OP 中解释得如此糟糕。谢谢你的帮助！/线？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T02:27:46.390

通过阅读您的问题，我理解或可能误解了您的意图是产生应用您的块*n*次的结果；例如，如果您两次应用三倍函数，您将得到原始值乘以九。

以防万一它有帮助，这是执行此操作的代码：

```
@interface AnObject

typedef int (^monadic)(int); // an function which takes an int and return an int

- (int) repeat:(int)howManyTimes for:(int)value withBlock:(monadic)someBlock;

@end

@implementation AnObject

- (int) repeat:(int)howManyTimes for:(int)value withBlock:(monadic)someBlock
{
   for (int i = 0; i < howManyTimes; i++)
      value = someBlock(value);

   return value;
}

@end 
```

现在调用它：

```
AnObject *myObject = [AnObject new];

int z = [myObject repeat:5  
                     for:1 
               withBlock: ^(int number)
                          {
                             return number * 3;
                          }
        ]; 
```

并将`z`具有价值`243`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T21:43:06.303

只需像普通 C 函数一样调用该块。

```
-(int)repeat:(int)howManyTimes withBlock:(triple)someBlock {
    for (int i = 0; i <= howManyTimes; i++) {
        int blockReturnValue = someBlock(i);
        // do something with blockReturnValue
    }
} 
```

**在“进一步编辑”后更新**

不，您作为参数传入的块运行五次，每次都通过 for 循环。

*   第一次，它调用`1`作为参数的块，然后返回`3`。它将其存储在 中`blockReturnValue`，然后继续循环的下一次迭代。
*   第二次，它调用`2`作为参数的块，然后返回`6`。它将其存储在其中`blockReturnValue`，**完全覆盖了我们在前一次传递中存储的值**。
*   第三次，它使用`3`作为参数的块，并返回`9`。同样，它会覆盖`blockReturnValue`.
*   第四次，我们存储`12`在`blockReturnValue`.
*   第五次，我们存储`15`在`blockReturnValue`.

然后我们退出 for 循环，并返回 15。所以是的，你是正确的，你做了一个毫无意义的乘以 3 的方法。但是你这样做的方式也做了一堆无用的计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-06T22:10:52.150

```
@import Foundation;

typedef int(^MyBlockType)(int);

@implementation NSObject(extra)
+ (int)invokeBlock:(MyBlockType)block withArgument:(int)arg
{
    return block(arg);
}
@end;

int main() {
    @autoreleasepool {
        NSLog(@"executeBlock(3) returns %d",
              [NSObject invokeBlock:^(int param) { return param * param; } withArgument:3]);
    } return 0;
} 
```***

# wpf - 带有左侧垂直渐变条的 ComboBox

> ID：10439697
> 
> 赞同：0
> 
> 时间：2012-05-03T21:40:00.587
> 
> 标签：wpf, combobox, gradient

如何在 WPF 中创建一个常规组合框，但在组合框打开时在其左侧有一个垂直渐变矩形？我可以为每个 放置一个网格，左侧有一个颜色矩形，右侧有一个内容。在这种情况下，当打开组合框时，左侧没有“流畅”的垂直渐变条，而只有一个位于另一个下方的分离的彩色方块。在此先感谢您的帮助！冉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:46:42.107

最简单的方法是创建作为`ComboBox`默认样式副本的样式并对其`ControlTemplate`. 这可以在 Expression Blend Studio 中轻松完成，也可以在 Visual Studio 中手动完成（这需要在文档中找到该默认样式）。因此，在其中`ControlTemplate`有一个托管项目的部分，实际上它是一个`Popup`with `Grid`with `ItemsPresenter`。所以我刚刚在其中创建了 2 列`Grid`，使第 1 列宽 30 个单位，移动`ItemsPresenter`到第 2 列并在第 1 列中放置具有所需渐变的边框。

因此，这里是您的案例的 ComboBox 样式及其所需的一些资源：

```
<Style x:Key="ComboBoxFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="4,4,21,4" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="ButtonNormalBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#F3F3F3" Offset="0"/>
        <GradientStop Color="#EBEBEB" Offset="0.5"/>
        <GradientStop Color="#DDDDDD" Offset="0.5"/>
        <GradientStop Color="#CDCDCD" Offset="1"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="ButtonNormalBorder" Color="#FF707070"/>
    <Geometry x:Key="DownArrowGeometry">M 0 0 L 3.5 4 L 7 0 Z</Geometry>
    <Style x:Key="ComboBoxReadonlyToggleButton" TargetType="{x:Type ToggleButton}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Microsoft_Windows_Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" SnapsToDevicePixels="true">
                        <Grid HorizontalAlignment="Right" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                            <Path x:Name="Arrow" Data="{StaticResource DownArrowGeometry}" Fill="Black" HorizontalAlignment="Center" Margin="3,1,0,0" VerticalAlignment="Center"/>
                        </Grid>
                    </Microsoft_Windows_Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Fill" TargetName="Arrow" Value="#AFAFAF"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="TextBoxBorder" EndPoint="0,20" MappingMode="Absolute" StartPoint="0,0">
        <GradientStop Color="#ABADB3" Offset="0.05"/>
        <GradientStop Color="#E2E3EA" Offset="0.07"/>
        <GradientStop Color="#E3E9EF" Offset="1"/>
    </LinearGradientBrush>
    <Style x:Key="ComboBoxEditableTextBox" TargetType="{x:Type TextBox}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="AllowDrop" Value="true"/>
        <Setter Property="MinWidth" Value="0"/>
        <Setter Property="MinHeight" Value="0"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <ScrollViewer x:Name="PART_ContentHost" Background="Transparent" Focusable="false" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ComboBoxToggleButton" TargetType="{x:Type ToggleButton}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Microsoft_Windows_Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" RoundCorners="false" SnapsToDevicePixels="true" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                        <Path x:Name="Arrow" Data="{StaticResource DownArrowGeometry}" Fill="Black" HorizontalAlignment="Center" Margin="0,1,0,0" VerticalAlignment="Center"/>
                    </Microsoft_Windows_Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Fill" TargetName="Arrow" Value="#AFAFAF"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <ControlTemplate x:Key="ComboBoxEditableTemplate" TargetType="{x:Type ComboBox}">
        <Grid x:Name="Placement" SnapsToDevicePixels="true">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=Placement}">
                    <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                        <ScrollViewer x:Name="DropDownScrollViewer">
                            <Grid RenderOptions.ClearTypeHint="Enabled">
                                <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                    <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                </Canvas>
                                <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                        </ScrollViewer>
                    </Border>
                </Microsoft_Windows_Themes:SystemDropShadowChrome>
            </Popup>
            <Microsoft_Windows_Themes:ListBoxChrome x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderFocused="{TemplateBinding IsKeyboardFocusWithin}"/>
            <TextBox x:Name="PART_EditableTextBox" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" IsReadOnly="{Binding IsReadOnly, RelativeSource={RelativeSource TemplatedParent}}" Margin="{TemplateBinding Padding}" Style="{StaticResource ComboBoxEditableTextBox}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
            <ToggleButton Grid.Column="1" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ComboBoxToggleButton}"/>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsKeyboardFocusWithin" Value="true">
                <Setter Property="Foreground" Value="Black"/>
            </Trigger>
            <Trigger Property="IsDropDownOpen" Value="true">
                <Setter Property="RenderFocused" TargetName="Border" Value="true"/>
            </Trigger>
            <Trigger Property="HasItems" Value="false">
                <Setter Property="Height" TargetName="DropDownBorder" Value="95"/>
            </Trigger>
            <Trigger Property="IsEnabled" Value="false">
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                <Setter Property="Background" Value="#FFF4F4F4"/>
            </Trigger>
            <Trigger Property="IsGrouping" Value="true">
                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
            </Trigger>
            <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true">
                <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
            </Trigger>
            <Trigger Property="ScrollViewer.CanContentScroll" SourceName="DropDownScrollViewer" Value="false">
                <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    <Style x:Key="ComboBoxStyle" TargetType="{x:Type ComboBox}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource ComboBoxFocusVisual}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
        <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="Padding" Value="4,3"/>
        <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
        <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBox}">
                    <Grid x:Name="MainGrid" SnapsToDevicePixels="true">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0"/>
                        </Grid.ColumnDefinitions>
                        <Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                            <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                                <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                                    <ScrollViewer x:Name="DropDownScrollViewer">
                                        <Grid RenderOptions.ClearTypeHint="Enabled">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>

                                            <Border>
                                                <Border.Background>
                                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                        <GradientStop Color="Gray" Offset="0"/>
                                                        <GradientStop Color="White" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                            </Border>

                                            <Canvas Grid.Column="1" HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                            </Canvas>
                                            <ItemsPresenter Grid.Column="1" x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </Grid>
                                    </ScrollViewer>
                                </Border>
                            </Microsoft_Windows_Themes:SystemDropShadowChrome>
                        </Popup>
                        <ToggleButton BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ComboBoxReadonlyToggleButton}"/>
                        <ContentPresenter ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="false" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true">
                            <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                            <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                        </Trigger>
                        <Trigger Property="HasItems" Value="false">
                            <Setter Property="Height" TargetName="DropDownBorder" Value="95"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            <Setter Property="Background" Value="#FFF4F4F4"/>
                        </Trigger>
                        <Trigger Property="IsGrouping" Value="true">
                            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                        </Trigger>
                        <Trigger Property="ScrollViewer.CanContentScroll" SourceName="DropDownScrollViewer" Value="false">
                            <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                            <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsEditable" Value="true">
                <Setter Property="BorderBrush" Value="{StaticResource TextBoxBorder}"/>
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
                <Setter Property="IsTabStop" Value="false"/>
                <Setter Property="Padding" Value="3"/>
                <Setter Property="Template" Value="{StaticResource ComboBoxEditableTemplate}"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

适用`ComboBoxStyle`于您的`ComboBox`. 此样式将线性渐变放置在 ComboBox Popup 中项目的左侧。

# security - 如何保护 Umbraco 中的 ELMAH Web 控制台？

> ID：10439698
> 
> 赞同：5
> 
> 时间：2012-05-03T21:40:04.317
> 
> 标签：security, umbraco, elmah

**对/elmah.axd**的请求如何限制为**Umbraco 管理员用户**。

据我了解，Umbraco 成员资格和角色提供者适用于 Umbraco*成员*，但不适用于*用户*——Umbraco 用户帐户似乎没有可在 web.config 中使用的用户名或角色（例如“管理员”），像这样：

```
<location path="elmah.axd">
  <system.web>
    <authorization>
        <allow roles="Admins" />
        <deny users="*" />
    </authorization>
  </system.web>
</location> 
```

这是在其他 ASP.Net 应用程序中保护 ELMAH 的推荐方法。

有人在 Umbraco 做过这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:34:16.640

我通过创建一个 HTTP 模块来拦截对 elmah.axd 的请求，并仅授权 Umbraco 管理员查看它，从而解决了这个问题。下面是模块代码：

```
namespace MyNamespace
{
    using System;
    using System.Configuration;
    using System.Web;
    using System.Web.Configuration;

    using umbraco.BusinessLogic;

    public class ElmahSecurityModule : IHttpModule
    {
        private HttpApplication _context;

        public void Dispose()
        {
        }

        public void Init(HttpApplication context)
        {
            this._context = context;
            this._context.BeginRequest += this.BeginRequest;
        }

        private void BeginRequest(object sender, EventArgs e)
        {
            var handlerPath = string.Empty;

            var systemWebServerSection = (HttpHandlersSection)ConfigurationManager.GetSection("system.web/httpHandlers");

            foreach (HttpHandlerAction handler in systemWebServerSection.Handlers)
            {
                if (handler.Type.Trim() == "Elmah.ErrorLogPageFactory, Elmah")
                {
                    handlerPath = handler.Path.ToLower();
                    break;
                }
            }

            if (string.IsNullOrWhiteSpace(handlerPath) || !this._context.Request.Path.ToLower().Contains(handlerPath))
            {
                return;
            }

            var user = User.GetCurrent();

            if (user != null)
            {
                if (user.UserType.Name == "Administrators")
                {
                    return;
                }
            }

            var customErrorsSection = (CustomErrorsSection)ConfigurationManager.GetSection("system.web/customErrors");

            var defaultRedirect = customErrorsSection.DefaultRedirect ?? "/";

            this._context.Context.RewritePath(defaultRedirect);
        }
    }
} 
```

...和 ​​web.config：

```
<configuration>
    <system.web>
        <httpModules>
            <add name="ElmahSecurityModule" type="MyNamespace.ElmahSecurityModule" />
        </httpModules>
    </system.web>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
          <add name="ElmahSecurityModule" type="MyNamespace.ElmahSecurityModule" />
        </modules>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:15:15.087

我认为您必须修改 ELMAH 才能使其与 Umbraco 正确集成

这篇[文章](http://tech.kipusoep.nl/2012/01/06/umbraco-elmah-with-sql-ce-4-0-and-authentication-part-2/)可能就是你要找的

# c# - 为什么在 class.cs 文件中写入时不存在名称“请求”？

> ID：10439709
> 
> 赞同：22
> 
> 时间：2012-05-03T21:40:57.357
> 
> 标签：c#, asp.net

我想将以下代码从 ac# aspx.cs 文件移动到一个独立的 class.cs 文件中。

```
string getIP = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
if (String.IsNullOrEmpty(getIP)) getIP = Request.ServerVariables["REMOTE_ADDR"]; 
```

这段代码曾经驻留在 aspx.cs 文件的 page_load 中工作得很好，但它在类文件中引发了错误。

在 aspx.cs 文件中的“请求”不需要“使用”，并且在此上下文中不提供任何内容。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-03T21:44:26.433

[请求](http://msdn.microsoft.com/en-us/library/system.web.ui.page.request.aspx)是页面类的属性。因此，您无法从“独立”类访问它。

但是，您仍然可以通过以下方式获取 HttpRequest[`HttpContext.Current`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx)

```
 var request = HttpContext.Current.Request; 
```

请注意，这甚至在静态方法中也有效。但前提是您在 HttpContext 中（因此不在 Winforms 应用程序中）。所以你应该确保它不是`null`：

```
if (HttpContext.Current != null)
{
    var request = HttpContext.Current.Request;
} 
```

**编辑**：当然，您也可以将请求作为参数传递给使用它的方法。这是一个很好的做法，因为没有它就行不通。通过这种方式，每个客户都会立即知道这个类/方法是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:46:07.727

它不起作用的原因是您无法访问类库项目中的服务器变量。

你应该避免试图让它像一个 web 类，而是通过一个普通参数将你需要的信息传递给类对象。

# mysql - SQL 将数字分配给日期，按值分组

> ID：10439711
> 
> 赞同：1
> 
> 时间：2012-05-03T21:41:12.723
> 
> 标签：mysql, sql, date, join

使用 SQL，我如何为每个公司分组的日期赋值？

当前表：

```
Date            Company          Employees

2012-04-28      Apple, Inc.      7543
2012-04-27      Apple, Inc.      7510
2012-04-26      Apple, Inc.      7484

2012-04-28      Google, Inc.     11303
2012-04-27      Google, Inc.     11300
2012-04-26      Google, Inc.     11280
2012-04-25      Google, Inc.     11278
2012-04-24      Google, Inc.     11254 
```

所需表：

```
Date            company_day      Company          Employees

2012-04-28      3                Apple, Inc.      7543
2012-04-27      2                Apple, Inc.      7510
2012-04-26      1                Apple, Inc.      7484

2012-04-28      5                Google, Inc.     11303
2012-04-27      4                Google, Inc.     11300
2012-04-26      3                Google, Inc.     11280
2012-04-25      2                Google, Inc.     11278
2012-04-24      1                Google, Inc.     11254 
```

company_day 的值从每个公司的最早日期开始。company_day 是公司特定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:47:05.307

我会首先得到`MIN`每家公司的日期。

然后，您可以`JOIN`得到该查询的结果，并简单地显示它与 Date 列之间的差异。

```
SELECT 
    MyTable.[Date]
    ,DATEDIFF(MyTable.[Date], MinTable.[MinDate]) + 1 AS Company_Day
    ,MyTable.[Company]
    ,MyTable.[Employees]
FROM
    MyTable
JOIN
    (
    SELECT 
        MIN(b.[Date]) AS MinDate
        , b.[Company] 
    FROM 
       MyTable b 
    GROUP BY 
        b.[Company]
    ) AS MinTable
        ON MinTable.[Company] = MyTable.[Company] 
```

类似的东西。此代码未经测试，但应该很接近。
[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)
[http://www.w3schools.com/sql/func_datediff_mysql.asp](http://www.w3schools.com/sql/func_datediff_mysql.asp)

# c# - C#'Default1'：成员名称不能与其封闭类型相同

> ID：10439713
> 
> 赞同：0
> 
> 时间：2012-05-03T21:41:30.210
> 
> 标签：c#, .net, visual-studio-2010, c#-4.0

我收到此错误并确定如何修复它，我正在尝试创建一个从 Default1 继承的加载器类，然后在方法中使用它。

```
namespace MyLevel
{
    class Default1
    {
        public interface Default1
        {
            IEnumerable<DefaultCore> GetDefaultValues();
        }
    }
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:46:22.110

我认为您在这里对如何定义和/或实现接口感到困惑。

您所拥有的是一个名为 的类，`Default1`它定义了一个名为 的内部嵌套接口`Default1`。这样做存在三个问题：

1.  你不能那样做；名称不能相同，因为这可能会使名称产生歧义。错误信息在这里很清楚。（正如其他人所说，接口通常被称为`ISomething`，这解决了名称冲突。

2.  该接口以一种奇怪的方式定义；它嵌套在一个内部（感谢@FishBasketGordo 提醒我！）类中。这意味着它仅在您定义它的程序集中可见，并且必须被引用为`Default1.IDefault`（假设您修复了名称）。

3.  没有任何东西真正实现你的接口，所以它没有在任何地方使用。

如果要定义接口，则不需要类：

```
namespace MyLevel
{
    public interface IDefault
    {
        IEnumerable<DefaultCore> GetDefaultValues();
    }
} 
```

如果您希望您的类实现该接口：

```
namespace MyLevel
{
    public class Default1 : IDefault
    {
        public IEnumerable<DefaultCore> GetDefaultValues() { }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:42:45.263

因为你已经在类中定义了接口，所以它是类的成员，一个类不能有两个同名的成员，也不能有一个与类本身同名的成员。这就是错误消息所说的。

因此，更改`Default1`（类）或`Default1`（接口）的名称。

`I`按照惯例，大多数接口都以大写为前缀，因此`IDefault1`对于接口来说是一个不错的选择。另外，不相关的是，您为什么要在类中定义接口？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:47:48.197

如果你想让类继承接口，它需要在类之外。其次，利用标准命名约定并在接口名称前加上一个`I`（例如`IDefault`、`ICloneable`、`IDisposable`等）：

```
namespace MyLevel
{
    public class Default : IDefault
    {

    }

    public interface IDefault
    {
        IEnumerable<DefaultCore> GetDefaultValues();            
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T21:45:02.847

您的代码未评估。

界面是（正常的）以I开头

不是构建的要求，但与 LAW 一样常见

就去 IDefault ！

普拉桑特 :)

# java - 从 .jsp 页面中的 java 类方法打印文本

> ID：10439723
> 
> 赞同：6
> 
> 时间：2012-05-03T21:42:54.613
> 
> 标签：java, jsp, jakarta-ee

我只是从 Java 中体验 JSP，我正在使用 Java *.java 类，在这个类中有一个打印 String 的方法`System.out.println("Message");`，我从 index.jsp 调用这个方法，消息“消息”出现在控制台上服务器但不在 index.jsp 中，因为`System.out.println();`不适用于 jsp 文件。
编辑：问题很明显，如何在我的 index.jsp 中发送和显示此消息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T21:46:41.297

在 JSP 中，您有一个隐式`out`对象。用于`out.println()`打印到网页。

另外，在 HTML 中，您可以使用 <%= "Message" %> （或 <% myMessage.toString() %> 达到相同的效果

更新：

您要么在 JSP（或 servlet）中，要么不在。接收流以写入 HTML 的对象是 servlet*（显式或从 JSP 编译）。如果您可以从其他类写入，则需要将 传递`out`给该类并使用它（您不能使用 System.out 写入网页）。

注意不要将它传递给您的业务逻辑类，这些应该与 UI 无关（即他们不必知道 UI 是 HTML）；这将是不好的做法，因为它将内部类与外部输出混合在一起。

# ruby-on-rails - 保存后重定向到索引而不是显示

> ID：10439724
> 
> 赞同：43
> 
> 时间：2012-05-03T21:42:56.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3

保存模型后，我想重定向到模型索引视图。

```
def create
  @test = Test.new(params[:test])

  respond_to do |format|
    if @test.save
      format.html { redirect_to @test, notice: 'test was successfully created.' }
    else
      format.html { render action: "new" }
    end
  end
end 
```

我试过了

```
 format.html { render action: "index", notice: 'Test was successfully created.' } 
```

但我在 /app/views/tests/index.html.erb 中收到以下错误 -

```
 undefined method `each' for nil:NilClass 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-03T21:52:36.723

```
render action: "index" 
```

不会重定向，重定向和渲染不同的，render 只会使用当前可用的变量渲染视图。而使用重定向，控制器的索引功能将运行，然后视图将从那里呈现。

您收到错误是因为您的索引视图期待一些您没有提供给它的数组，因为您只是呈现“索引”并且您没有视图需要的变量。

你可以通过两种方式做到这一点

1-使用`render action: "index"`

在渲染之前向视图提供它需要的所有变量，例如，它可能需要一个 @posts 变量，用于显示帖子列表，因此您需要在渲染之前在创建操作中获取帖子

```
@posts = Post.find(:all) 
```

2-不要渲染做一个`redirect_to`

而不是呈现“索引”，而是重定向到索引操作，该操作将负责执行索引视图所需的必要操作

```
redirect_to action: "index" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T21:53:10.657

视图“索引”包括“@tests.each do”-loop。并且方法 create 不提供变量“@tests”。所以你有错误。你可以试试这个：

```
format.html { redirect_to action: "index", notice: 'Test was successfully created.' } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T06:21:51.800

它非常简单。

只需重写你的方法

```
def create
  @test = Test.new(params[:test])

  respond_to do |format|
    if @test.save
      format.html { **redirect_to tests_path**, notice: 'test was successfully created.' }
    else
      format.html { render action: "new" }
    end
  end
end 
```

它将重定向到索引页面

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-12T16:40:32.617

有两种方法可以做到这一点：

1.  使用以下资源`rake routes`：

`format.html { redirect_to todo_items_url, notice: 'Todo item was successfully created.' }`

2.  使用控制器动作：

`format.html { redirect_to action: :index, notice: 'Todo item was successfully created.' }`

# ios - GCDAsyncSocket readDataWithTimeout 和 didReadData 正在截断大于 1460 字节（1 个数据包）的传入数据字符串

> ID：10439730
> 
> 赞同：1
> 
> 时间：2012-05-03T21:43:24.130
> 
> 标签：ios, gcdasyncsocket

我的 iOS 应用程序使用 GCDAsyncSocket 从服务器接收数据。服务器每分钟收集一次外部数据。该应用程序定期连接到服务器，并接收此数据。服务器会跟踪已发送的内容，因此每分钟的数据只会发送一次。服务器只保留最后一小时的数据。每分钟的数据是一个大约 100 字节（+/- 20 字节）的字符串。

字符串被接收，分成分钟，每分钟被分成每分钟数据中的各种数量。

如果应用程序超过一小时未连接到服务器，应用程序将下载 60 分钟的数据。发生这种情况时，我只能得到大约 15 分钟的数据。我追查到这样一个事实，即 readDataWithTimeout 方法仅在 readQueue 上加载一个数据包，这将我限制为 1460 个字节。我发现当我向队列中添加第二个数据包时，我又得到了 1460 字节的数据。如果字符串是它们的最大长度，并且我正在下载 60 个字符串，那么 5 个数据包就足以捕获所有内容。

1.  如果我向读取队列中添加了比必要更多的数据包，并且大多数读取只使用一个数据包，我最终会溢出数据包队列吗？我可以应用某种超时来清除未使用的数据包吗？应用程序无法预测任何给定的读取事件需要多少数据包。

另一个问题是数据包的最后一分钟数据串将不可避免地分成两个数据包。我想做的是收集所有数据包的 NSData 实例，将它们连接成一个大的 NSData 实例，将其转换为字符串，然后正常解析该字符串。

1.  我如何知道何时接收到给定读取请求的最后一个数据包，以便我可以组合 NSData 并解析结果字符串？每分钟的字符串都以感叹号“！”结尾，但没有唯一的符号来表示传输的结束。我假设解决问题 1 的相同超时将解决问题 2。

此应用程序已针对 Android 发布。因此，如果可能的话，我想避免更改服务器和 Android 代码以适应 iOS 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:14:05.890

每次我请求读取时，我最终只向 readQueue 添加 5 个数据包，并为读取添加附加超时，这样队列就不会溢出。我还设置了一个 NSTimer 在 didReadData 回调结束 2 秒后触发。当计时器结束时，假定所有可用数据都已读取，并且字符串已被处理。每个计时器都使用相同的 NSTimer 实例，因此如果计时器处于活动状态，并且发生另一个 didReadData 事件，则会启动一个新计时器，清除旧计时器。

# jsf - 映射实体关系和转换实体的策略

> ID：10439732
> 
> 赞同：1
> 
> 时间：2012-05-03T21:43:31.837
> 
> 标签：jsf, jpa, jsf-2, ejb, crud

我正在学习 java ee 6。我的目标是拥有一个简单的 crud 应用程序，它让我可以创建编辑列表并删除一个由 id、名称字符串和描述字符串组成的琐碎实体。我跟着这个只是为了查看一些代码[http://netbeans.org/kb/docs/web/jsf20-crud.html](http://netbeans.org/kb/docs/web/jsf20-crud.html)我使用 eclipse 而不是 netbeans 和 jboss 7 而不是 glass fish。嗯....它的工作原理。

现在认为我的实体是“用户”：id、用户名、密码。我想添加一个“UserRole”实体，这里是：id、rolename。然后我设置了 OneToMany 和 ManyToOne 关系。

那么，如何管理创建用户页面中的角色输入呢？Netbeans crud 建议代码是一个 selectonemenu（选择下拉列表），其中所有角色 id 作为值。在表单上提交角色控制器（jsf 托管 bean）中的静态内部类“roleconverter”（一个 facesconverter）获取选择和提交的角色 ID 字符串，并使用 ejb-dao 查找相应的角色。

我的问题是：

*   我明白了吗？我上面写的对吗？
*   以这种方式使用转换器是最佳实践吗？对于这样一个简单且经常性的任务，难道没有更好的解决方案吗？
*   除了实体名称之外，实体的转换器都是相同的，如何删除重复项，例如使用通用转换器？
*   您认为在 jsf 2 中管理多对多的最佳 GUI 是什么？（例如具有多个角色的用户场景）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:57:05.707

这是正确的。转换器是必需的，因为 HTML 基本上是一大`String`而且 HTTP 请求参数都是`String`s。HTML 和 HTTP 不理解也不传递具体的 Java 对象。它们只存在于网络服务器的内存中。您确实需要能够在 和 之间进行转换`SomeRandomEntity`，`String`以便生成 HTML 响应并正确解析 HTTP 请求参数。

至于转换器并不是真正的[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，如果您的所有实体都扩展了一个公共基础实体，其中`@Id`与 getter 和 setter 一起定义，并且您有一个通用 DAO，那么您可以为此创建一个通用转换器。`ConverterException`像这样的东西（省略了琐碎的预检查和处理）：

```
@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    if (value == null) {
        return null;
    }

    Long id = ((BaseEntity) value).getId();
    return String.valueOf(id);
}

@Override
@SuppressWarnings("unchecked")
public Object getAsObject(FacesContext context, UIComponent component, String value) {
    if (value == null) {
        return null;
    }

    Long id = Long.valueOf(value);
    Class<BaseEntity> type = (Class<BaseEntity>) component.getValueExpression("value").getType(context.getELContext());
    return genericDAO.find(id, type);
} 
```

或者，在 的特定情况下`<h:selectOneMenu>`，您还可以使用基于 的对象值进行转换的转换器`<f:selectItem(s)>`。然而，这并不是微不足道的。JSF2 组件库[OmniFaces](http://omnifaces.org)在它的分类中有这样一个[`SelectItemsConverter`](http://showcase.omnifaces.org/converters/SelectItemsConverter)。如果有兴趣，您可能想查看它的源代码。

# c# - 如果 explorer.exe 没有运行，可以使用 SendMessageW(...) 吗？

> ID：10439737
> 
> 赞同：0
> 
> 时间：2012-05-03T21:43:51.530
> 
> 标签：c#, message-queue, explorer, sendmessage

`SendMessageW()` [我正在尝试使用标准方法](https://stackoverflow.com/questions/154089/mute-windows-volume-using-c-sharp)从控制台应用程序取消静音。但是，我们有自己的应用程序作为 shell 运行，而不是 explorer.exe。当我尝试取消静音时，什么也没有发生；但是一旦我启动资源管理器，它就可以正常工作。是否必须运行资源管理器才能发送消息？
代码：

```
private const int APPCOMMAND_VOLUME_MUTE = 0x80000; 
private const int WM_APPCOMMAND = 0x319;
SendMessageW(Process.GetCurrentProcess().MainWindowHandle, WM_APPCOMMAND, Process.GetCurrentProcess().MainWindowHandle, (IntPtr)APPCOMMAND_VOLUME_MUTE); 
```

返回值为`SendMessageW()`0。
如果需要 Explorer，是否有人知道另一种取消静音的方法？

**旁注**
我刚刚使用vbs尝试过：

```
Set WshShell = CreateObject("WScript.Shell")
WshShell.SendKeys(chr(&hAD)) 
```

并得到了相同的结果。只有在 explorer.exe 正在运行时才会取消静音。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T21:59:52.283

`SendMessageW`是在 User32.DLL 中找到的一个函数，它的作用是向应用程序发送一条消息，告诉它做某事。在这种情况下，您将向 Explorer 发送一条消息并告诉它静音。`SendMessageW`无论资源管理器是否正在运行，都会发送此消息，但是，如果您正在运行自己的 shell，则您的 shell 不会被编程为知道如何处理此消息并且它只是忽略它。

你可以做两件事之一。第一个是`APPCOMMAND_VOLUME_MUTE`在你的 shell 中实现，这样当消息被发送时，它可以静音。第二种是使用 WinMM.dll 文件静音，并使用[此处发布的代码](https://stackoverflow.com/questions/294292/changing-master-volume-level)来静音（这是 explorer.exe 在收到静音命令后所做的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T00:17:03.443

一个窗口可以自己处理 WM_APPCOMMAND 但几乎从不处理，它只是将它传递给 DefWindowProc()。然后通过 WH_SHELL 钩子将消息传递给 shell。shell 必须通过调用 SetWindowsHookEx() 来监听它们来初始化钩子。并通过带有 HSHELL_APPCOMMAND 通知的回调获取通知。

那是你。

成为壳并不容易。

# asp.net-mvc - MVC WebApi 中的方法如何映射到 http 动词？

> ID：10439738
> 
> 赞同：31
> 
> 时间：2012-05-03T21:43:53.313
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-web-api

在以下链接的 5 分钟视频中，在 1:10 标记处，Jon Galloway 说，将名为 DeleteComment 的方法添加到他的 CommentsController 控制器类将按照惯例自动映射到 delete http 动词。

带有 WebApi 的 MVC 如何知道如何将方法路由到正确的动词？我知道 global.asax.cs 文件中的路由将请求路由到正确的控制器，但是删除请求如何“按约定映射”到删除方法或任何方法？特别是当每个动词可以有不止一种方法时？“按照惯例”让我认为它只是查看方法名称中的第一个单词......但如果是这样，它必须阅读方法的签名来区分两个删除方法或两个获取方法......以及在哪里这一切都定义了吗？

视频： [http ://www.asp.net/web-api/videos/getting-started/delete-and-update](http://www.asp.net/web-api/videos/getting-started/delete-and-update)

谢谢！

编辑：这是 WebApi 模板中的示例 ValuesController 类中的代码。这是我最初问题的来源。区分这些（以及控制器中的任何其他方法）的“约定”如何工作？

```
// GET /api/values
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }

    // GET /api/values/5
    public string Get(int id)
    {
        return value;
    } 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-06T15:44:55.413

我提前道歉，这篇文章与你的要求有点偏离，但是当我读到你的问题时，所有这些都冒了出来。

**WebAPI 匹配语义 WebAPI**
（*默认*路由）使用的匹配语义相当简单。

1.  它将动作的名称与动词匹配（动词 = GET？查找以“get”开头的方法名称）
2.  如果传递了参数，则 api 会寻找带有参数的操作

因此，在您的代码示例中，不带参数的 GET 请求与不带参数的`Get*( )`函数匹配。包含和 ID 的 Get 查找`Get***(int id)`.

**示例**
虽然匹配语义很简单，但它给 MVC 开发人员（至少这个开发人员）造成了一些混乱。让我们看一些例子：

*奇数名称*- 您的 get 方法可以命名为任何名称，只要它以“get”开头。因此，在小部件控制器的情况下，您可以命名您的功能`GetStrawberry()`，它仍然会匹配。将匹配想象为： `methodname.StartsWith("Get")`

*多种匹配方法*- 如果您有两个没有参数的 Get 方法会发生什么？ `GetStrawberry()`和`GetOrange()`。据我所知，代码中首先定义的函数（文件顶部）胜出……奇怪。这具有使控制器中的某些方法无法访问的副作用（至少使用默认路由）......陌生人。

> **注意**：测试版在“匹配多种方法”方面的表现与上述相同——RC 和发布版本有点强迫症。如果有多个潜在匹配项，则会引发错误。此更改消除了多个不明确匹配的混淆。同时，它降低了我们在同一个控制器中混合 REST 和 RPC 样式接口的能力，依赖于顺序和重叠的路由。

**该怎么办？**
嗯，WebAPI 是新的，共识仍在凝聚。社区似乎对 REST 原则有相当多的了解。然而，并不是每个 API 都可以或应该是 RESTful 的，有些 API 更自然地以 RPC 风格表达。REST 和人们所说的 REST 似乎是[相当](http://encosia.com/rest-vs-rpc-in-asp-net-web-api-who-cares-it-does-both/) [混乱的根源](http://codebetter.com/glennblock/2012/02/28/why-are-there-2-controllers-in-the-asp-net-web-api-contactmanager-example-rest-has-nothing-to-with-it-2/)[，](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven) 至少[对](http://roy.gbiv.com/untangled/2008/specialization) [Roy Fielding](http://en.wikipedia.org/wiki/Roy_Fielding)来说是这样。

作为一个实用主义者，我怀疑许多 API 将是 70% 的 RESTful，带有少量 RPC 风格的方法。首先，单是控制器的扩散（考虑到 webapi 绑定方法）就会让开发人员发疯。其次，WebAPI 并没有真正内置方法来创建 api 路径的嵌套结构（意思是： `/api/controller/`很容易，但`/api/CATEGORY/Sub-Category/Controller`可行，但很痛苦）。

从我的角度来看，我希望看到 webAPI 文件夹结构控制默认的 API 路径......这意味着如果我在我的 UI 项目中创建一个 Category 文件夹，那么`/api/Category`它将是默认路径（[与这篇 MVC 文章平行的](http://omaralzabir.com/create_asp_net_mvc_controllers_under_namespace_and_specific_url/)东西）。

**我做了什么？**
所以，我有几个要求：(1) 在大多数情况下能够使用 restful 语法，(2) 有一些控制器的“命名空间”分离（想想子文件夹），（3）能够调用额外的 rpc-必要时喜欢方法。实现这些要求归结为巧妙的路由。

```
// SEE NOTE AT END ABOUT DataToken change from RC to RTM

Route r;
r = routes.MapHttpRoute( name          : "Category1", 
                         routeTemplate : "api/Category1/{controller}/{id}", 
                         defaults      : new { id = RouteParameter.Optional } );
r.DataTokens["Namespaces"] = new string[] {" UI.Controllers.Category1"};

r = routes.MapHttpRoute( name          : "Category2", 
                         routeTemplate : "api/Category2/{controller}/{id}", 
                         defaults      : new { id = RouteParameter.Optional } );
r.DataTokens["Namespaces"] = new string[] {" UI.Controllers.Category2"};

routes.MapHttpRoute(     name          : "ApiAllowingBL", 
                         routeTemplate : "api/{controller}/{action}/{id}",
                         defaults      : new { id = RouteParameter.Optional } );

routes.MapHttpRoute(     name          : "DefaultApi",  
                         routeTemplate : "api/{controller}/{id}",           
                         defaults      : new { id = RouteParameter.Optional } ); 
```

*   前两条路线创建“子文件夹”路线。我需要为每个子文件夹创建一个路由，但我将自己限制在主要类别中，所以我最终只得到了其中的 3-10 个。请注意这些路由如何添加`Namespace`数据标记，以限制搜索特定路由的类。当您将文件夹添加到 UI 项目时，这很好地对应于典型的命名空间设置。
*   第三条路线允许调用特定的方法名称（如传统的 mvc）。由于 Web API 取消了 URL 中的操作名称，因此可以相对容易地判断哪些调用需要此路由。
*   最后一个路由条目是默认的 web api 路由。这会捕获任何类，尤其是我的“子文件夹”之外的类。

*说另一种方式*
我的解决方案归结为更多地分离控制器，因此`/api/XXXX`不会变得太拥挤。

*   我在我的 UI 项目中创建了一个文件夹（比如说`Category1`），并将 api 控制器放在该文件夹中。
*   Visual Studio 自然地根据文件夹设置类命名空间。所以`Widget1`在`Category1`文件夹中获得一个默认命名空间`UI.Category1.Widget1`.
*   自然，我希望 api URL 能够反映文件夹结构 ( `/api/Category1/Widget`)。您在上面看到的第一个映射实现了这一点，通过硬编码`/api/Category1`到路由中，然后`namespace`令牌限制将搜索匹配控制器的类。

> **注意**：在发布`DataTokens`时默认为空。我不确定[这是错误还是功能](https://aspnetwebstack.codeplex.com/discussions/393618)。所以我写了一个小助手方法并添加到我的`RouteConfig.cs`文件中......

```
r.AddRouteToken("Namespaces", new string[] {"UI.Controllers.Category1"});

private static Route AddRouteToken(this Route r, string key, string[] values) {
  //change from RC to RTM ...datatokens is null
if (r.DataTokens == null) {
       r.DataTokens = new RouteValueDictionary();
    }
    r.DataTokens[key] = values;
    return r;
} 
```

> **注意 2**：即使这是 WebAPI 1 帖子，正如 @Jamie_Ide 在评论中指出的那样，上述解决方案在 WebAPI 2 中不起作用，因为`IHttpRoute.DataTokens`没有设置器。要解决此问题，您可以使用如下简单的扩展方法：

```
private static IHttpRoute MapHttpRoute(this HttpRouteCollection routes, string name, string routeTemplate, object defaults, object constraints, string[] namespaceTokens)
{   
    HttpRouteValueDictionary    defaultsDictionary      = new HttpRouteValueDictionary(defaults);
    HttpRouteValueDictionary    constraintsDictionary   = new HttpRouteValueDictionary(constraints);
    IDictionary<string, object> tokens                  = new Dictionary<string, object>();
                                tokens.Add("Namespaces", namespaceTokens);

    IHttpRoute route = routes.CreateRoute(routeTemplate, defaultsDictionary, constraintsDictionary, dataTokens: tokens, handler:null);
    routes.Add(name, route);

    return route;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T22:47:35.737

这经常出现。对此有不同的看法。我个人目前还没有订阅任何特定的想法，但似乎每个资源一个控制器的想法在 REST 社区中最受欢迎。

所以基本上你可以：

1.  在您的路由中公开操作（Web API 将这个词视为`action`类似于 MVC），但这通常不打算使用。
2.  根据这篇[文章定义具有不同参数的方法](http://forums.asp.net/p/1798633/4958916.aspx/1?how%20to%20model%20parent%20child%20entities)
3.  正如我所说，*最*推荐的是**每个资源使用一个控制器**。因此，即使在 Web API 示例中，用于收集实体的控制器对于实体本身的控制器也是不同的。阅读Rob Conery的这篇[文章，](http://wekeroad.com/2012/02/28/someone-save-us-from-rest/)[这](http://codebetter.com/glennblock/2012/02/28/why-are-there-2-controllers-in-the-asp-net-web-api-contactmanager-example-rest-has-nothing-to-with-it-2/)是 Glenn 的回答。

# javascript - Firefox 和 Opera 中的父 div 宽度为 0，即使我有孩子

> ID：10439739
> 
> 赞同：0
> 
> 时间：2012-05-03T21:44:00.270
> 
> 标签：javascript, css, html, width

我有一个没有设置宽度的 div，所以它是 0。在里面我附加了另一个带有文本的 div。一切都是绝对的，我无法改变。发生的情况是：在 safari 中我得到 30 和 30，在 Firefox 中我得到 0 和 30。有没有办法解决这个问题？我需要我的父 div 宽度具有孩子的宽度 + 它的 x 位置。

```
var d = document.createElement("d");
    d.style.position = "absolute";
    document.body.appendChild ( d );

    var c = document.createElement("s");
        c.style.position = "absolute";
        c.innerHTML = "Blah";
    d.appendChild ( c );

    console.log ( d.scrollWidth );
    console.log ( c.scrollWidth ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:00:42.403

如果两个元素都必须设置为 position: absolute 那么你就很不走运了。

使用绝对定位会将元素从文档流中移除，这意味着父 div 没有子 div 宽度的概念。如果您将子级更改为相对而将父级保留为绝对，那么您将看到所需的正确拉伸（因为即使文档的其余部分无法“看到”父级将能够“看到”子级“父母）

# ruby-on-rails-3 - Thin Gem 无法在 Heroku 上运行

> ID：10439743
> 
> 赞同：0
> 
> 时间：2012-05-03T21:44:22.333
> 
> 标签：ruby-on-rails-3, heroku, eventmachine, thin

我正在从 Bamboo 堆栈转移到 Heroku 上的 Cedar 堆栈，但我在尝试在 Heroku 上运行 Thin gem 时遇到了问题。在本地，我正在运行 Windows Vista，但[这里](https://stackoverflow.com/questions/8362303/heroku-cedar-stack-thin-and-eventmachine)的评论中提到了同样的错误，

当我将 Thin gem 添加到我的 gemfile 时，它​​会尝试安装 eventmachine

(1) 当我添加`gem "thin"`到我的 gemfile 时，我收到一个错误，因为它无法安装 eventmachine 0.12.10。此外，当我尝试将其提交给 Heroku 时，我收到一个错误，因为 Thin 没有在本地安装。

(2) 当我添加这些宝石时，如下[所示](https://stackoverflow.com/questions/6927907/ruby-problem-installing-eventmachine-under-windows-7)：

（我试过把它放在一个`group :production do`块里，没有，在这两种情况下都没有用）

```
gem "thin", "1.3.1"
gem "eventmachine", "1.0.0.beta.4.1" 
```

我收到一条错误消息，指出找不到该 eventmachine 版本。

(3) 当我手动添加 gem 时，它会安装。

```
gem install eventmachine --pre 
```

但是，即使我添加了 Thin gem，它仍然想安装 0.12.10 版本的 eventmachine，即使我尝试指定[此处](https://stackoverflow.com/questions/6927907/ruby-problem-installing-eventmachine-under-windows-7)提到的 1.3.1 Thin 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:26:40.050

看起来 1.0.0.beta.4.1 仅适用于基于 win32 的架构（[http://rubygems.org/gems/eventmachine/versions](http://rubygems.org/gems/eventmachine/versions)）。您的 Heorku dynos 是基于 ubuntu 64 位的。尝试以下操作：

```
gem "thin", "1.3.1"
gem "eventmachine", "1.0.0.beta.4.1", :group => [:development, :test] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:41:10.597

我能够从 Heroku 获得帮助。事实证明我只需要这样做：

group :production do gem 'thin' end

然后，而不是

```
bundle install 
```

你跑

```
bundle install --without production 
```

当然，如果您想在本地运行 Thin，这无济于事，但对我来说，Web Brick 在开发中很好。

# mysql - PDO - 更改旧的 mysql_fetch_object

> ID：10439747
> 
> 赞同：3
> 
> 时间：2012-05-03T21:44:37.363
> 
> 标签：mysql, pdo

通过使用 PDO 而不是`mysql_fetch_object`.

我试图找到一些东西来代替它，但似乎没有任何效果。

首先我的链接完成：

```
$link = new PDO('mysql:host='.$local.';dbname='.$nomBase.'', $user, $password, $pdo_options); 
```

这是我的代码：

```
while($row = mysql_fetch_object($result)){
$data1=$row->nickname;
$data2=$row->id_contact;
echo ("<option ");
if ($handled==$data2) { echo ("selected "); } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T21:46:22.963

您应该将其更改为：

```
while($row = $result->fetch(PDO::FETCH_OBJ)){
...
} 
```

您将在此处找到有关它的更多信息：[PDOStatement Fetch](http://php.net/manual/fr/pdostatement.fetch.php)

换PDO是个不错的选择！需要更多像你这样的人；）。

# django - 过滤的相关对象的聚合

> ID：10439749
> 
> 赞同：0
> 
> 时间：2012-05-03T21:44:54.233
> 
> 标签：django, django-queryset

我正在尝试计算与标准匹配的对象，并按相关对象的特征进行分组。例如，如果我有一组这样的模型：

```
class Office(User):
    name = models.CharField(max_length=50)
    city = models.CharField(max_length=50)

class Staff(User):
    home_office = models.ForeignKey(Office)

class Appointment(models.Model):
    appt_start = models.DateTimeField()
    appt_end = models.DateTimeField()
    client = models.ForeignKey(User)
    provider = models.ForeignKey(Staff)
    result = models.CharField(max_length=50) 
```

而且我想获得导致每个办公室“成功”的约会数量，我可以像这样执行一个原始 SQL 查询：

```
SELECT office.name, COUNT(appointment.id)
    FROM appointment
        JOIN staff ON staff.id = appointment.provider_id
        JOIN office ON office.id = staff.home_office_id
    WHERE appointment.result = 'success' GROUP BY office.name; 
```

如果可能的话，我更愿意使用 ORM 和 Django 的 QuerySet 聚合和注释函数来获得这个结果，但是在阅读了文档之后，我认为不可能根据相关对象的字段进行聚合，但我想问一下以防万一会错过一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:31:16.770

这个怎么样：

```
Office.objects.filter(
    staff__appointment__result='success'
).values('name').annotate(appointments=models.Count('staff__appointment')) 
```

# oauth - 如何使用 javascript sdk 获得长期访问令牌？

> ID：10439759
> 
> 赞同：2
> 
> 时间：2012-05-03T21:45:53.897
> 
> 标签：oauth, facebook-javascript-sdk

本文介绍新端点：[https ://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

但由于我使用的是 javascript sdk，我显然不想将 client_secret 放入我的 javascript 中。我将在我的服务器上使用代理页面来实现这一点，但我更喜欢用户代理类型的流，或者更好的是 javascript sdk 函数。

我想要这个功能的主要原因是我仍然希望使用我的网站的人能够在他们注销或切换帐户时将内容推送到他们的 Facebook 帐户事件，而我无法使用当前的访问令牌执行此操作。

谁有这方面的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:50:28.487

在这种情况下，您需要将令牌传递给您的服务器端代码并​​在那里进行代码交换。

不要**将**您的应用程序机密放在客户端代码中，它可以完全接管您的应用程序

无论如何，可能不需要为 javascript 应用程序进行代码交换，因为用户仍将在您的应用程序中，并且当他们刷新页面或离开并返回时，您将获得更新的短期令牌

# magento - 具有重复块名称的页脚覆盖

> ID：10439762
> 
> 赞同：1
> 
> 时间：2012-05-03T21:46:07.023
> 
> 标签：magento, layout

我对模块[http://www.magentocommerce.com/magento-connect/visistat-connector-6644.html有一个非常奇怪的问题](http://www.magentocommerce.com/magento-connect/visistat-connector-6644.html)

`default`它在句柄中添加一个块，如下所示：

```
<default>
    <reference name="after_body_start">
        <block type="page/html_footer" name="footer" template="sfcvisistat/tracking.phtml"/>
    </reference>
</default> 
```

有效地使用与标准页脚相同的名称。

这不会破坏任何地方，但自定义模块会从此定义中获取页脚模板，因此删除了真正的页脚

我已经通过将名称更改为独特的名称解决了这个问题，但是我很好奇是否有人有调试这个问题的提示，为什么这个定义可能会脱离`reference`上下文使用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:49:16.507

`before_body_end`如果这是一个再营销脚本，这似乎是一个更合适的父块。至于为什么他们会覆盖核心页脚是供应商的问题。

* * *

**编辑：提供推荐的最佳实践和上下文以响应 OP 评论：**

理想情况下，一般来说，在 Magento 主题和模块开发中，核心团队添加的任何块 - 尤其是结构块不应被站点的最终实现者以外的任何人删除或修改（不考虑兼容性）（然后仅在适当的情况下）审议）。这样做的原因是其他核心代码以及第三方模块代码可能期望块实例以*原始名称*存在于布局中并*具有完全相同的功能*。

现在，原帖显示页脚的核心块类相同（`page/html_foot`），名称相同。处理布局时会出现问题，设置块层次结构：页脚块的原始（核心）实例不再可以从布局对象访问（它只能通过其父级访问），而新的（自定义）页脚块instance 将是任何布局后创建代码中引用的实例。

# design-patterns - 我应该选择哪种设计模式？装饰或责任链或其他

> ID：10439767
> 
> 赞同：0
> 
> 时间：2012-05-03T21:46:26.383
> 
> 标签：design-patterns

我需要为 XML 文档中的各种元素添加各种属性，添加新属性的逻辑非常独立。我将创建一堆类来添加这些属性，我想知道我应该使用哪种设计模式，我想到了以下选项：

1.  装饰器 子类太多。我可能有 10 到 20 个模块来装饰 XML，但我不喜欢 20 个子类。

2.  责任链：我不希望单个模块完成整个过程，因为它们是独立的。

任何建议都非常受欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:26:48.383

你实际上并没有给出太多的背景信息。编程语言，您正在使用哪种 XML 解析模型，以及需要多少上下文来确定给定元素是否需要属性。

所以这是一种方法：

*   假定 Java
*   使用与 DOM 方法有点相似的抽象概念对象集（Element 和 XMLDocument） - 替换为 XML 树中节点的真实接口
*   假设元素匹配逻辑是自包含的，这意味着您的逻辑可以根据元素本身中的名称或其他属性来判断是否应该应用特定属性，并且不需要了解父母、孩子或祖先

顺便说一句 - 此代码尚未编译和测试。这只是该方法的一个说明。

```
public interface ElementManipulator {
    public void manipulateElement(Element elem);
}

public class AManipulator implements ElementManipulator {
    public void manipulateElement(Element elem) {
        if (elem.name == "something-A-cares-about") {
            //add A's attribute(s) to elem
        }
    }
}

public class BManipulator implements ElementManipulator {
    public void manipulateElement(Element elem) {
        if (elem.name == "something-B-cares-about") {
            //add B's attribute(s) to elem
        }
    }
}

public class XMLManipulator {
    ArrayList<? extends ElementManipulator> manipulators;

    public XMLManipulator () {
        this.manipulators = new ArrayList<? extends ElementManipulator>();
        this.manipulators.add(new AManipulator());
        this.manipulators.add(new BManipulator());
    }

    public void manipulateXMLDocument(XMLDocument doc) {
        Element rootElement = doc.getRootElement();
        this.manipulateXMLElement(rootElement);
    }        

    /**
     * Give the provided element, and all of it's children, recursively, 
     * to all of the manipulators on the list.
     */
    public void manipulateXMLElement(Element elem) {
        foreach (ElementManipulator manipulator : manipulators) {
            manipulator.manipulateElement(elem);
        }            
        ArrayList<Element> children = elem.getChildren();
        foreach(Element child: children) {
            this.manipulateXMLElement(child);  
        }
    }
} 
```

# c# - 生成文档后从 Word 文档中删除控制控件

> ID：10439768
> 
> 赞同：0
> 
> 时间：2012-05-03T21:46:28.717
> 
> 标签：c#, .net, ms-word, openxml, office-automation

我有一个 C# 文档生成组件，它将内容插入到 Word 文档中的控制控件中，并且一切正常。

唯一的问题是在生成的文档中，内容控件仍然存在，您无法选择单独的行或文本。

我需要删除这些内容控件，并且我认为内容控件属性“在编辑内容时删除内容控件”正是我想要的，因为我的组件将更改控件内容。但是，它不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:24:56.837

在[http://worddocgenerator.codeplex.com](http://worddocgenerator.codeplex.com)中的一个示例中，从文档中删除了内容控件，同时保留了内容。具体方法是RemoveContentControlsAndKeepContents(Document document)

# java - 将 android 应用程序转换为与 Galaxy Note 一起使用

> ID：10439773
> 
> 赞同：1
> 
> 时间：2012-05-03T21:47:01.640
> 
> 标签：java, android, galaxy, samsung-mobile

c 谁能告诉我为什么当我在 Galaxy Note 上安装我的应用程序时它会混合我的布局！！！我正在研究 3.7 WVGA（银河一号）

非常感谢 =)

# c# - LINQ to XML 返回一个对象而不是 IEnumerable I have this code: MyObject Obj {get;set;} var x = from xml in xmlDocument.Descendants("Master") select new MyObject { PropOne = //code to get da 问问题 问问题 2012-05-03T21:47:13.643 697 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have this code: MyObject Obj {get;set;} var x = from xml in xmlDocument.Descendants("Master") select new MyObject { PropOne = //code to get data from xml PropTwo = //code to get data from xml } The result is var being IEnumerable<myobject>, and I need to use a foreach loop to assign x to Obj: foreach(var i in x) { Obj = i; } Is there a way I can use a LINQ statement and not have an IEnumerable returned in that way? Or is it normal to use a foreach loop the way I am? Yep: Obj = (from xml in xmlDocument.Descendants("Master") select new MyObject { PropOne = //code to get data from xml PropTwo = //code to get data from xml }).FirstOrDefault(); c#linq-to-xml 4 3 回答 3 This answer is useful 6 是的： Obj = (from xml in xmlDocument.Descendants("Master") select new MyObject { PropOne = //code to get data from xml PropTwo = //code to get data from xml }).FirstOrDefault(); 于 2012-05-03T21:48:22.997 回答 This answer is useful 1 If you're only returning one object, you can do this: MyObject Obj {get;set;} var x = (from xml in xmlDocument.Descendants("Master") select new MyObject { PropOne = //code to get data from xml PropTwo = //code to get data from xml }).Single(); Now your x object should be of type MyObject 于 2012-05-03T21:50:24.527 回答 This answer is useful 1 You need to retrieve the first item. I would personally create this after your LINQ query: var element = xmlDocument.Descendants("Master").Single(); // Or .First() if appropriate Obj = new MyObject { PropOne = //code to get data from xml in "element" PropTwo = //code to get data from xml in "element" }; I personally find this more clearly matches your intent, as you're retrieving the single element, then building a single object from it. 于 2012-05-03T21:53:00.730 回答 Related 1 git - Git Bash 中的元别名 1 java - Hibernate Criteria - 从两个没有任何关联的表中获取结果 2 android - 在 Android 状态栏中放置一个图标 2 arrays - OpenCV - 图像数组或垫子缓冲区 1 c - C 随机树指针警告（有时会崩溃） 2 ios - 从 AppStore 安装时，非视网膜设备会下载 @2x 图像吗？ 1 mongodb - MongoDB JavaEE 单例额外实例 1 c++ - 在缓存代理中使用 If Modified since 1 c++ - cocos2d 中的 b2RevoluteJoint 1 html - 页脚后的HTML空格？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</myobject>

> ID：10439776
> 
> 赞同：3
> 
> 时间：
> 
> 标签：c#, linq-to-xml

I have this code:

```
 MyObject Obj {get;set;}
    var x = from xml in xmlDocument.Descendants("Master")
        select new MyObject
        {
            PropOne = //code to get data from xml
            PropTwo = //code to get data from xml
        } 
```

The result is `var` being `IEnumerable<MyObject>`, and I need to use a `foreach` loop to assign `x` to `Obj`:

```
foreach(var i in x)
{
    Obj = i;
} 
```

Is there a way I can use a LINQ statement and not have an `IEnumerable` returned in that way? Or is it normal to use a `foreach` loop the way I am?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T21:48:22.997

是的：

```
Obj = (from xml in xmlDocument.Descendants("Master")
        select new MyObject
        {
            PropOne = //code to get data from xml
            PropTwo = //code to get data from xml
        }).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:50:24.527

If you're only returning one object, you can do this:

```
 MyObject Obj {get;set;}

 var x = (from xml in xmlDocument.Descendants("Master")
    select new MyObject
    {
        PropOne = //code to get data from xml
        PropTwo = //code to get data from xml
    }).Single(); 
```

Now your `x` object should be of type MyObject

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:53:00.730

You need to retrieve the first item. I would personally create this after your LINQ query:

```
var element = xmlDocument.Descendants("Master").Single(); // Or .First() if appropriate
Obj = new MyObject
    {
        PropOne = //code to get data from xml in "element"
        PropTwo = //code to get data from xml in "element"
    }; 
```

I personally find this more clearly matches your intent, as you're retrieving the single element, then building a single object from it.

# javascript - 通过单击远离它来关闭模式弹出窗口

> ID：10439779
> 
> 赞同：1
> 
> 时间：2012-05-03T21:47:30.213
> 
> 标签：javascript, jquery, html, css, modal-dialog

我正在使用本教程添加模态屏幕：

[http://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/](http://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/)

除了关闭它，一切都很好。我不想通过按钮关闭它，而是让用户选择通过在模式外部单击来关闭它，即在它后面的页面其余部分的背景中。

一位用户告诉我`onclick='overlay()'`像这样添加到覆盖 div`<div id="overlay" onclick='overlay()'>`

当我尝试通过单击外部关闭模式时，它可以工作，但如果您单击实际模式本身，它也会关闭，我不想要它，因为它是一个注册表单。那么有没有办法只通过在实际模态本身之外单击来关闭模态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:35:08.873

试试这个：

```
$(document).ready(function(){
$('#overlay').bind('click', function(event){
    if (event.target == $('#overlay').get(0))
        overlay(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:51:15.630

您将不得不从模式窗口中移动覆盖的代码。将其分开，您将不会将叠加层作为窗口的父级，并且单击事件将仅在叠加层上触发。

```
<div id="overlay"> </div>
<div id="modalWindow">
    <p>Content you want the user to see goes here.</p>
</div> 
```

# scheme - Chibi Scheme - 简单的定义库示例不起作用

> ID：10439782
> 
> 赞同：7
> 
> 时间：2012-05-03T21:48:08.740
> 
> 标签：scheme, chibi-scheme, r7rs

我编写了以下示例，以尝试在 Chibi Scheme 0.5.3 中使用 R7RS 库：

```
(define-library (example hello)
    (export hello-world)
    (import (scheme base))
    (begin
      (define (hello-world) "hello, world"))) 

(import (scheme write)
        (example hello))
(write (hello-world)) 
```

不幸的是，在执行时，它会生成有关未定义变量的错误：

```
$ chibi-scheme  hello.scm 
ERROR: undefined variable: hello-world 
```

我一定是犯了一个简单的错误，但没有看到。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:02:06.323

原来这是一个简单的错误 - 根据用户指南的[模块系统](http://synthcode.com/scheme/chibi/#h2_ModuleSystem)部分，文件名必须与模块名匹配：

> 在文件“foo/bar/baz.sld”中搜索模块的定义（foo bar baz）。

因此，在这种情况下，需要添加上述库定义，`example/hello.sld`并且需要将导入部分提取到新`.scm`文件中（或 REPL 上的输入等）。

无论如何，一个微不足道的解决方案，但也许它会对那里的其他人有所帮助......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T18:04:43.547

通常，R7RS 没有定义如何使库对 Scheme 系统可见，并且没有定义将 define-library 与其他 Scheme 形式混合的代码的含义。

# java - 如何使 Web 服务使用多个线程？

> ID：10439784
> 
> 赞同：0
> 
> 时间：2012-05-03T21:48:22.730
> 
> 标签：java, multithreading, service, web

我有一个简单的 java web 服务。我想让 Web 服务被线程化，每个对 Web 方法的调用都有自己的线程来进行处理。处理需要很长时间，我不希望它阻塞，防止发生对 web 方法的其他调用。相反，我希望 web 方法只创建线程，并让线程本身在完成处理后向客户端响应/返回一个值。那可能吗？

编辑：

这是我现在拥有的半伪代码：

```
@WebService(endpointInterface="Service")
public class ServiceImpl {

    public ServiceImpl() 
    {
        // Initialization
    }

    public String GetResult(input)
    {
        // Does long processing

        return Result;
    }
} 
```

我想要做的是而不是 GetResult() 进行长时间处理，我希望它只生成 Runnable 将进行长时间处理并让 GetResult() 返回并准备好为另一个请求提供服务。我还希望 Runnable 响应等待的客户端。

编辑2：

我才意识到我在问一个愚蠢的问题。我对实施 WS 还很陌生。我原以为 WS 按顺序一次只接受一个请求。我不知道每个请求都已经自动线程化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:30:40.340

是的，您可以使用 JMS 进行异步调用。这是最好的方法。

你也可以启动一个线程，并自己管理它们。一般不建议这样做。线程池的良好管理以及跟踪哪些线程可能需要很长时间需要大量的开销代码。

# java - 将c ++代码翻译成Java但没有成功

> ID：10439787
> 
> 赞同：1
> 
> 时间：2012-05-03T21:48:29.410
> 
> 标签：java, c++, minimum-spanning-tree

我正在制作一个程序来计算最小成本路线，使用最小生成树。我用 c++ 实现了我的实现，但我无法制作一个图形界面来读取输入文件，所以我决定将它传递给 Java 语言并使用 Netbeans 创建界面。这是我在 C++ 中的代码：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:00:13.167

我看不到以下任何数组的初始化位置：

```
public static int matrizPesos[][];
public static char arbolMinimal[];
public static int distancia[];
public static int linkeoNodos[]; 
```

但它们被访问，这可能是导致`NullPointerException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:55:25.197

好吧，首先修复所有编译错误可能是个好主意（NetBeans 为您在代码中标记了它们）。

至于那个例外，它告诉你有东西`null`在第 98 行`EjemploJFrameConFondo.java`。

# java - 如何擦除 Graphics 对象？

> ID：10439791
> 
> 赞同：0
> 
> 时间：2012-05-03T21:48:37.100
> 
> 标签：java, graphics

在下面的代码中，我试图让球上下弹跳。问题是球一遍又一遍地画自己并形成一条线，而不是一个球在一条线上移动。

我在想我需要在它自己绘制后擦除它。

```
 public void paint(Graphics g) {
            if (bouncing) {
                g.setColor(Color.blue);
                g.drawOval(x, y, 10, 10);
                //erase oval here
            }
        } 
```

**注意：**方法 paint 被一遍又一遍地调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:53:35.693

首先绘制整个背景...

```
public void paint(Graphics g)
{
  g.setColor(Color.BLACK);                    // clear the frame ...
  g.fillRect(0, 0, getWidth(), getHeight());

  if (bouncing) 
  {
    g.setColor(Color.blue);
    g.drawOval(x, y, 10, 10);
  }
} 
```

# c++ - 如何将数组的偶数和奇数相加

> ID：10439792
> 
> 赞同：0
> 
> 时间：2012-05-03T21:48:38.807
> 
> 标签：c++, visual-c++

我正在尝试从递归数组中获取偶数的总和以及奇数的总和，然后将两个总和相加。我正在尝试遍历数组以获得偶数，但它会继续返回第一个索引。请提前帮助和感谢..

我的目标是在数组 2,1,5,9,8,4 中获取偶数索引并将其添加到奇数索引中。a[0]=2,a[1]=1,a[2]=5,a[3]=9,a[4]=8,a[5]=4。所以需要 (2+5+8)-(1+9+4)=1

这是我到目前为止所得到的，我不熟悉递归，所以我的代码可能会关闭

```
int calc(int *a, int size)
{
    if(size==1 || size==0)
        return a[0];
    for(int i=0; i<size; i++){
        if(i%2==0){
            int sum_i = a[i];
            int m=calc(a, size-1);
            if(m>a[size-1])
                return m;
        }
    }
    for(int j=0; j<size; j++){
        if(j%2!=0);
        int sum_j = a[j];
        return sum_j;
    }
    int sum = a[i] - a[j];
    int e = calc(a, size-1);
    if(e%2==0)
        return e=e+0; //return even

    return sum;
}

int main( )
{
    int a[6]={1,2,3,5,6,2};
    int size = 6;   
    cout<< calc(a, size)<<endl;

    system("pause");   
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:55:11.320

你不需要递归吗？

```
// calc(): returns sum(a[0], a[2], a[4], ...) - sum(a[1], a[3], a[5], ...)
int calc(int *a, int size)
{
    int sum_even_pos = 0;
    int sum_odd_pos = 0;
    for (int i = 0; i < size; i++) 
    {
        sum_even_pos += a[i];
        if (++i < size) sum_odd_pos += a[i];
    }
    return sum_even_pos - sum_odd_pos;
} 
```

[http://codepad.org/DVx0sgg1](http://codepad.org/DVx0sgg1)

# javascript - 如何将 UNIX 实时计数中的小数点作为 stardate

> ID：10439796
> 
> 赞同：1
> 
> 时间：2012-05-03T21:49:10.330
> 
> 标签：javascript, unix-timestamp

我对 javascript 并不太熟悉，但我已经玩了足够多的东西来使用我在[这个站点](http://mechiwiki.com/techmed/php/javascript-live-unix-timestamp "这个网站")上找到的脚本来做到这一点。

```
<script>
function updateClock ( ) {
var sd = Math.round(new Date().getTime() * 0.0000067322371075102 );
document.getElementById("stardate").firstChild.nodeValue = sd;
}
</script>
<body onload="updateClock(); setInterval('updateClock()', 1000 )">
<span id="stardate">&nbsp;</span>
</body> 
```

输出是一个非常接近星际迷航 Online 中当前使用的星历计算的数字。但是，该数字应使小数点左移 2 位。在我的等式中添加和删除零会缩短或延长我的计数，但我需要一个小数，我完全不知道如何才能做到这一点。

有人对我有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:53:07.877

任何一个：

```
var sd = ...
var dotted = (sd+"").replace(/..$/,'.$&'); 
```

或者：

```
var sd = ...
var dotted = (sd/100).toFixed(2); 
```

一些忠告：

1.  在 HTML 中混合 JavaScript 不是一个好主意。而不是将 JavaScript 放入 HTML 属性中，以编程方式附加您的处理程序。例如：

    ```
    <!-- in the <head> -->
    <script type="text/javascript">
      window.addEventListener('load',function(){
        // this code will run once the page has loaded
      },false);
    </script>

    <!-- or alternatively right before </body> put -->

    <script type="text/javascript">
      // this code will run once all elements have been created
    </script> 
    ```

2.  `setInterval`可以取一个函数值作为参考。而不是写：

    ```
    // this creates a new anonymous function that invokes foo()
    // similar to using  new Function("foo()")
    setInterval("foo()",1000); 
    ```

    ...最好这样做：

    ```
    setInterval(foo,1000); // Functionally equivalent, less typing 
    ```

# jquery - 如何使用 jquery ajax 调用 ASP.net [Webmethod] 来加载 Raw HTML

> ID：10439798
> 
> 赞同：0
> 
> 时间：2012-05-03T21:49:16.860
> 
> 标签：jquery, asp.net, ajax

我在中使用以下代码，但在我的网络方法中，我返回的是纯 HTML。contentType 就在这里吗？

```
 function PopulateTimetable(pGroupId) {
                    $.ajax({
                        type: "POST",
                        cache: false,
                        url: "StudentTimetable.aspx/PopulateTimetable",
                        data: "{ 'pGroupId': '"+51+"'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "html",
                        timeout: 10000,
                        success: function(data) {
                            $("#divTimetable").removeClass("Progress");                        
                            $("#divTimetable").html("").append(data);
                        },
                        error: function() {
                                $("#divTimetable").removeClass("Progress");   
                                alert("An unexpected error has occurred during processing.");
                        }
                    });
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:53:11.760

我在这里使用过 `$("#divTimetable").html("").append(data.d);`，现在可以正常使用

# java - [NETTY]：将 urlpath 映射到方法

> ID：10439799
> 
> 赞同：1
> 
> 时间：2012-05-03T21:49:23.193
> 
> 标签：java, url, mapping, netty

我正在使用 netty 并尝试为某些 API 实现一个简单的 HTTP 服务器。当我有传入请求时，我可以获得 url = /foo/bar/other/ 的路径。如何将路径映射到以下内容？

```
class = foo 
method = bar 
param = other 
```

我可以使用正则表达式吗？还是有更好的解决方案？

* * *

是的，我知道如何拆分 url 路径并获取查询字符串参数。我从 http 标头、ip 等中获取所有参数……这没问题。问题是，如何将这些路径映射到类和方法。这样我就可以带来所需的类和方法。

简单实现一些（只是伪代码）：

```
public class Mapper {
    private String htttpMethod;
    private String controllerName;
    private String methodName;
}

ArrayList<Mapper> m = new ArrayList<Mapper>();
m.add(new Mapper("GET","HomeController","index")); 
```

所以 /Home/index/1/ 必须升 HomeController.index(1);

对于我想找到的每个模式，我需要一个新的正则表达式吗？检查所有，是否会出现太多 if / else 块...

有什么解决办法吗？

但是感谢您不要太懒，为了这个问题，请阅读码头。对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:03:27.677

我发现查看[Netty Snoop 示例](https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/http/snoop/HttpSnoopServerHandler.java)会有所帮助。

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    HttpRequest request = this.request = (HttpRequest) e.getMessage();

    // Get your path
    String uri = request.getUri();
    String[] segments = uri.split("/");
    String className = segments[0];
    String methodName = segments[1];

    // Get your query string parameters
    QueryStringDecoder queryStringDecoder = new QueryStringDecoder(request.getUri());

} 
```

希望这可以帮助。

# c# - 在 WCF 数据服务中，使用具有关系的对象时 ToDictionary 是否损坏？

> ID：10439802
> 
> 赞同：0
> 
> 时间：2012-05-03T21:49:41.930
> 
> 标签：c#, linq, dictionary, wcf-data-services

我有 3 个具有以下关系的对象： Feature 包含 FeatureGroup 对象的 List<>。FeatureGroup 包含一个 Application 对象作为属性。

我想创建一个字典，允许为给定功能检索应用程序名称列表（应用程序共享功能，我想查看哪些应用程序支持哪些功能）。

这是一段可以正常工作的代码：

```
            Dictionary(Feature, List(string)) AppLookup = this.DataContext().Features
                .Select(x => 新
                {
                    特征 = x,
                    AppNames = x.FeatureGroups
                        .Select(y => y.Application.ApplicationShortName)
                        。清楚的（）
                        .ToList()
                })
                .ToDictionary(x => x.Feature, x => x.AppNames);

            var appsFound = viewModel.AppLookup
                .Where(x => x.Value.Count > 0)
                .ToList(); //这包含27这是正确的值

```

这是我想对其进行编码的原始方式，但除非我取消注释 2 Expand() 行，否则它似乎不起作用：

```
            Dictionary(Feature, List(string)) AppLookup = this.DataContext().Features
                //.Expand("FeatureGroups")
                //.Expand("功能组/应用程序")
                .ToDictionary(x => x, x => x.FeatureGroups
                    .Select(y => y.Application.ApplicationShortName)
                    。清楚的（）
                    .ToList());

            var appsFound = viewModel.AppLookup
                .Where(x => x.Value.Count > 0)
                .ToList(); //这是 0 除非上面的 .Expand 行没有注释

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:02:55.757

WCF DS 客户端的工作方式是将您在 LINQ 中编写的查询转换为 URL，对该 URL 执行请求，然后返回结果。问题是它不支持所有的 LINQ 表达式。ToDictionary 就是其中之一。所以在第二个示例中，似乎都是.Features。所以它发出一个请求“~/Features”。

~/Features 的行为是不返回相关实体，因此响应仅包含特征，而不包含相关特征组。结果，您会得到一个功能列表，其中每个功能都没有任何功能组。

有两种方法可以“解决”这个问题（你找到了这两种方法）。一种是将 .Expand("FeatureGroups") 添加到查询中，该查询告诉客户端将 $expand=FeatureGroups 附加到 URL，从而请求获取功能及其所有功能组。结果，查询返回一个特征列表，其中每个特征作为其所有正确的特征组也被填充。

解决此问题的另一种方法是在 LINQ 表达式中添加更多内容，以描述您希望也加载功能组的意图。您的第一个示例通过添加投影（选择）并从 FeatureGroups 中请求某些内容来实现这一点。客户端为了获得结果，还需要通过 $expand 询问功能组。

So the above behavior is by design. ToDictionary is not seen as part of the query (note that it's defined on IEnumerable not on IQueryable) and as such the client does what you asked for.

# mysql - SQL：用连续值替换非连续值

> ID：10439807
> 
> 赞同：3
> 
> 时间：2012-05-03T21:49:53.853
> 
> 标签：mysql, sql, join

我有非连续但有序的数字标识符。我想获得连续的值。

当前表：

```
original_value

1
1
1
3
3
29
29
29
29
1203
1203
5230304
5230304
5230304
5230304 
```

所需表：

```
original_value   desired_value

1                1
1                1
1                1
3                2
3                2
29               3
29               3
29               3
29               3
1203             4
1203             4
5230304          5
5230304          5
5230304          5
5230304          5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T01:54:40.397

另一种方法，无加入：

```
select

  original_value,
  case when @original = original_value then
    @group_number
  else
    @group_number := @group_number + 1
  end,
  (@original := original_value) as x

from tbl,(select @original := null, @group_number := 0) z
order by original_value 
```

现场测试：[http ://www.sqlfiddle.com/#!2/b82d6/6](http://www.sqlfiddle.com/#!2/b82d6/6)

如果要删除结果中的计算，请对查询进行表派生：

```
select w.original_value, w.group_number
from
(
  select

    original_value,
    case when @original = original_value then
      @group_number
    else
      @group_number := @group_number + 1      
    end as group_number,
    (@original := original_value) as x

  from tbl,(select @original := null, @group_number := 0) z
  order by original_value
) w 
```

现场测试：[http ://www.sqlfiddle.com/#!2/b82d6/4](http://www.sqlfiddle.com/#!2/b82d6/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T22:01:49.813

汇总您的值，使用行号来获得您想要的值，然后加入您的原始值：

```
SELECT t.original, sq.desired
FROM Table t
INNER JOIN(
  SELECT ssq.original, @rownum:=@rownum+1 ‘desired’
  FROM (
    SELECT t.original
    FROM Table t
    GROUP BY t.original
    ORDER BY t.original
  ) ssq,
  (SELECT @rownum:=0) r 
) sq ON sq.original = t.original 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T04:09:06.057

还有另一种方法，这个模拟 DENSE_RANK 与连接：

```
 SELECT t.original, d.derived
      FROM t
INNER JOIN (    SELECT t.original, COUNT(DISTINCT t1.original) AS "derived"
                  FROM t
            INNER JOIN t t1
                       ON t.original >= t1.original
              GROUP BY 1) d
           ON t.original = d.original
  ORDER BY t.original; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T07:02:49.000

如果我理解正确：

```
select 
    original_value, 
    dense_rank() over (order by original_value) as desired_value 
```

# javascript - 如何在网格中的渲染器中获取当前渲染值？

> ID：10439813
> 
> 赞同：1
> 
> 时间：2012-05-03T21:50:39.160
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我希望我的渲染器每行只运行一次。

所以很明显我的渲染器应该看起来像

```
renderer: function() {

    if (there_is_a_rendered_value_in_view) {
        return rendered_value_in_view;
    }

    return 'generate some return';
} 
```

有可能吗？

那么如何获得`rendered_value_in_view`呢？

**更新**：

好像我不够详细。

好吧，之后生成的值在网格之外改变了，所以问题是：如何获取**当前显示**的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:08:31.010

您始终可以将布尔标志添加`rendered_value_in_view`到网格本身。然后在渲染器函数中检查网格属性并返回它。

更新：这里的 Sencha 文档是您的渲染器函数将获得的参数列表：

```
value : Object
metaData : Object
record : Ext.data.Model
rowIndex : Number
colIndex : Number
store : Ext.data.Store
view : Ext.view.View 
```

我认为最后一个将是您的网格对象。

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Column-cfg-renderer](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Column-cfg-renderer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:25:19.490

尝试捕获渲染值是相当困难的。我认为更好的方法是在包含这个新值的字段中添加另一个模型。您可以使用转换方法，以便在原始值更改时，显示值也可以更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:55:48.127

也许 -

```
 ...
there_is_a_rendered_value_in_view:false,
renderer:function() {

    if (!this.there_is_a_rendered_value_in_view) {
        this.there_is_a_rendered_value_in_view=true;
        return rendered_value_in_view;
    }

    return 'generate some return';
} 
```

# css - 衡量单个 CSS 规则对页面渲染速度影响的工具？

> ID：10439817
> 
> 赞同：2
> 
> 时间：2012-05-03T21:51:04.667
> 
> 标签：css, performance, twitter-bootstrap, pagespeed

我看到LinkedIn的新HTML5 iPad App去掉了圆角边框，即，`border-radius:X px`以提高他们的页面渲染速度。这似乎只能提供很小的改进。我更普遍地想知道如何衡量各种 CSS 规则对网站性能的影响。有`microtime()`CSS的吗？

**更新**我运行了@valentinas 建议的性能测试：http: [//andy.edinborough.org/CSS-Stress-Testing-and-Performance-Profiling](http://andy.edinborough.org/CSS-Stress-Testing-and-Performance-Profiling)

虽然这确实为我的页面类提供了测量值，但我更感兴趣的是比较给定元素的规则 1 和规则 2。不过，下面是数据。我的网站使用 Twitter Bootstrap.css 和它的许多类选择器。这是我发现难以解释的数据快照。有人可以以此为起点提供帮助吗？

```
....
Selector          # Elms.  # Child.     Delta   Total
Removing #back-top  1   2   saves   7.17ms  3.90ms
Removing .container-fluid   1   414 saves   7.15ms  3.93ms
Removing .oGreen    1   0   saves   7.14ms  3.94ms
Removing .row-fluid 2   316 saves   7.07ms  4.00ms
Selectors Tested:   128
Baseline Time:  11.08ms
Num. Tests: 120 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:10:21.647

有许多工具可用于测试加载和应用 CSS 的实际性能影响。也就是说，对于您特别提到的东西，它们特别难以测试。

有经验的 CSS 开发人员会遇到一些研究，这些研究表明圆形的核心和 CSS3 框阴影会导致“性能问题”，但在这种情况下，他们更具体地谈论页面响应性或页面对用户操作的响应速度。

让我更详细地解释一下。当谈到页面渲染速度或 CSS 和图像资产下载并可供客户端使用需要多长时间时，许多不同的工具可以提供明确的指标。HTTP 请求和响应时间是可测量的，从初始请求到 DOM 就绪的时间也是可测量的。问题是，当您开始查看页面响应性时，所有这些容易衡量的事情都已经发生了。这些问题将与您的特定应用程序特性、功能和样式相关，并且只能以特定于应用程序的方式进行测试。

例如，有研究表明，在某些情况下，CSS3 box-shadows 会导致页面滚动不流畅或用户操作和事件完成之间存在一些滞后时间。最简单的测试方法是手动测试带有和不带有 box-shadow 的页面，以便您可以直观地看到差异。现在，如果您知道已知 box-shadow 会导致某些问题，那么您可能会考虑进行测试，但对于已经发表关于该特定问题的研究和发现的人来说，这几乎肯定不是他们看起来的样子首先。这是他们通过反复试验发现的。

最后，真正的答案是经验：解决问题并增加自己的集体知识。阅读讨论这些问题的博客和其他资源可以对此有所帮助。

# haskell - Haskell：具有 O(1) 附加和 O(1) 索引的数据结构？

> ID：10439821
> 
> 赞同：8
> 
> 时间：2012-05-03T21:51:41.097
> 
> 标签：haskell, data-structures, vector

我在 Haskell 中寻找一种同时支持快速索引和快速追加的数据结构。这是针对递归引起的记忆问题。

从向量在 c++ 中的工作方式（它是可变的，但在这种情况下这不重要）看来，具有（摊销）O(1) 附加和 O(1) 索引的不可变向量应该是可能的（好吧，它不是，请参阅对此问题的评论）。这在 Haskell 中是否可行，还是我应该使用具有（AFAICT 无论如何）O(1) 附加和 O(log(min(i,ni))) 索引的 Data.Sequence？

在相关的说明中，作为一名 Haskell 新手，我发现自己渴望一份实用、简洁的 Haskell 数据结构指南。理想情况下，这将对最实用的数据结构以及性能特征和指向实现它们的 Haskell 库的指针提供相当全面的概述。似乎那里有很多信息，但我发现它有点分散。我要求太多了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T22:40:56.417

对于简单的记忆问题，您通常希望构建表一次，以后不要修改它。在这种情况下，您可以避免担心追加，而是将记忆表的构造视为一项操作。

一种方法是利用惰性求值并在我们构建表时引用它。

```
import Data.Array
fibs = listArray (0, n-1) $ 0 : 1 : [fibs!(i-1) + fibs!(i-2) | i <- [2..n-1]]
  where n = 100 
```

当表格元素之间的依赖关系使得难以提前制定简单的评估顺序时，此方法特别有用。但是，它需要使用盒装数组或向量，由于额外的开销，这可能使这种方法不适合大型表。

对于未装箱的向量，您有类似`constructN`这样的操作，可以让您以纯粹的方式构建表格，同时在下面使用突变来提高效率。它通过给函数传递一个到目前为止构造的向量前缀的不可变视图来实现这一点，然后你可以使用它来计算下一个元素。

```
import Data.Vector.Unboxed as V
fibs = constructN 100 f
  where f xs | i < 2 = i
             | otherwise = xs!(i-1) + xs!(i-2)
             where i = V.length xs 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-03T21:59:59.313

如果内存服务，C++ 向量被实现为具有边界和大小信息的数组。当插入会增加超出大小的范围时，大小会加倍。这是摊销的 O(1) 时间插入（不是您声称的 O(1)），并且可以在 Haskell 中使用该类型很好地模拟`Array`，可能带有合适的`IO`或`ST`前置的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-03T22:06:23.537

看看[这个](https://stackoverflow.com/a/9613203/771837)，以便对您应该使用的内容做出更明智的选择。

但简单的一点是，如果您想要 C++ 向量的等价物，请使用[`Data.Vector`](http://hackage.haskell.org/packages/archive/vector/0.5/doc/html/Data-Vector.html).

# localhost - 无法以编程方式访问 localhost - HTTP/1.1 403 Forbidden

> ID：10439827
> 
> 赞同：0
> 
> 时间：2012-05-03T21:52:10.573
> 
> 标签：localhost

我有两个在本地运行的 java 应用程序 app1 和 app2。我没有 app2 的源代码，但是我可以进行一些配置更改并将其指向本地运行的 web 服务（app1）。

我可以使用本地 web 服务的 url（在 app1 上）并从浏览器中点击它（并获得结果），但 app2 直接无法点击这个 url。我知道 app2 运行良好，因为我可以将它指向您的一个测试环境 url。

我得到的错误是 - **Http request failed with response code HTTP/1.1 403 Forbidden。**

所以我无法理解 - 当我可以从浏览器点击 url 时，为什么我不能从另一个应用程序点击它？我们公司的一些**代理配置**最近发生了一些变化，但我不确定这是否会影响以 localhost:8180/.. 开头的任何 url

因此，我无法对 app1 进行任何本地测试。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:41:01.907

好的，我知道发生了什么。我们在 HttpClient 配置中使用代理进行调用。显然代理不知道本地主机是什么，因此请求失败。在这个配置中，我们有一个应该绕过代理的排除列表 - 我将 localhost 添加到该列表中，并且事情已经开始工作了。

# android - URLConnection.getContentLength() 返回 -1

> ID：10439829
> 
> 赞同：6
> 
> 时间：2012-05-03T21:52:24.357
> 
> 标签：android

我有一个 URL，当我在浏览器中输入时，它会完美地打开图像。但是当我尝试以下代码时，我得到 getContentLength() 为 -1：

```
URL url = new URL(imageUrl);
HttpURLConnection connection = (HttpURLConnection) url.openConnection();

// determine the image size and allocate a buffer
int fileSize = connection.getContentLength(); 
```

请指导我这背后的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T22:24:30.100

如果服务器使用[分块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)发送响应，您将无法预先计算大小。响应是流式传输的，您只需分配一个缓冲区来存储图像，直到流完成。请注意，仅当您可以保证图像足够小以适合内存时才应该这样做。如果图像可能很大，将响应流式传输到闪存存储是一个非常合理的选择。

内存解决方案：

```
private static final int READ_SIZE = 16384;

byte[] imageBuf;
if (-1 == contentLength) {
    byte[] buf = new byte[READ_SIZE];
    int bufferLeft = buf.length;
    int offset = 0;
    int result = 0;
    outer: do {
        while (bufferLeft > 0) {
            result = is.read(buf, offset, bufferLeft);
            if (result < 0) {
                // we're done
                break outer;
            }
            offset += result;
            bufferLeft -= result;
         }
         // resize
         bufferLeft = READ_SIZE;
         int newSize = buf.length + READ_SIZE;
         byte[] newBuf = new byte[newSize];
         System.arraycopy(buf, 0, newBuf, 0, buf.length);
         buf = newBuf;
     } while (true);
     imageBuf = new byte[offset];
     System.arraycopy(buf, 0, imageBuf, 0, offset);
 } else { // download using the simple method 
```

理论上，如果 Http 客户端将自己呈现为 HTTP 1.0，大多数服务器将切换回非流模式，但我不认为 URLConnection 有这种可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-12T10:25:41.313

我在这里迟到了，但这可能会对某人有所帮助。我遇到了同样的问题，当我尝试获取内容长度时，我总是得到 -1 值。

以前我使用下面的方法来获取内容长度。

```
long totalByte=connection.getContentLength(); 
```

下面解决了我的问题：-

```
long totalByte=Long.parseLong(connection.getHeaderField("Content-Length")); 
```

# android - 重命名 arrays.xml 中的字符串数组

> ID：10439830
> 
> 赞同：3
> 
> 时间：2012-05-03T21:52:28.563
> 
> 标签：android

在我的 values/arrays.xml 中，我有， `<string-array name="pref_entries" translatable="false">` 但只要我将它重命名为

```
<string-array name="pref_entries2" translatable="false"> 
```

我收到此错误：

res/values/arrays.xml:28：错误：pref_entries 的资源出现在覆盖中，但不在基本包中；用来添加。

你能告诉我如何解决我的问题吗？

谢谢你。

# mysql - MYSQL SELECT 可重复字段到列中

> ID：10439836
> 
> 赞同：0
> 
> 时间：2012-05-03T21:52:46.050
> 
> 标签：mysql, subquery, pivot, pivot-table

我不确定是否必须制作数据透视表或一些子查询才能获得所需的结果，但这是我拥有的表：

```
asset_id id 标题 title_type
34 1 集 1 5
34 2 TNS 4
34 3 WXPR 3
35 4 集 57 5
35 5 BLSH 4
35 6 WXRE 3
36 7 集 56 5
36 8 BLSH 4
36 9 WXRE 3

```

但这就是我想要的。每个 title_type 都在它自己的列中，并且 title_type 为 4 = BLSH 的 WHERE 标题。所以像这样：

```
资产 ID title_type 5 title_type 4 title_type 3
35 集 56 BLSH WXRE
36 集 57 BLSH WXRE
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:45:26.043

真正的解决办法当然是改变你的数据库结构;-)

但是，您可以使用 JOIN 来获取所需的数据。在我的示例中，不涉及子选择：

```
SELECT 
  o.asset_id, 
  /* select the data from the self-joins */
  `5`.title AS title_type_5,
  `4`.title AS title_type_4,
  `3`.title AS title_type_3
FROM 
  foo o
/* use self-joins to combine data of multiple rows in a single row */
LEFT JOIN foo `3` ON `3`.title_type = 3 AND `3`.asset_id = o.asset_id
LEFT JOIN foo `4` ON `4`.title_type = 4 AND `4`.asset_id = o.asset_id
LEFT JOIN foo `5` ON `5`.title_type = 5 AND `5`.asset_id = o.asset_id
WHERE 
  o.title_type = "4" 
  AND o.title = "BLSH" 
```

[试试我在 SQLfiddle 上的例子](http://sqlfiddle.com/#!2/d0a95/9)

# listview - QML ListView 和 ListModel 索引

> ID：10439845
> 
> 赞同：2
> 
> 时间：2012-05-03T21:53:25.033
> 
> 标签：listview, indexing, qml

我对 ListModel 和 ListView 有一点问题，特别是关于 ListModel 的移动功能。我将向您展示 SDK 中包含的 DynamicList 示例的代码片段，并进行一些修改以进行调试： 代码：

```
 Item {     
   property alias nameText:  nameTextBox.text
        id: delegateItem
        width: listView.width; height: 55
        clip: true
        Row {
            anchors.verticalCenter: parent.verticalCenter
            spacing: 10
            Column {
                Image {
                    source: "content/pics/arrow-up.png"  
                    MouseArea {
                        anchors.fill: parent;

                        onClicked: {

                            var voice
                            var nameInModel
                            var nameInView

                            voice = listView.contentItem.children[1]
                            nameInModel = fruitModel.get(1).name

                            nameInView = voice.nameText

                            console.log("name before move in model at 1: "+nameInModel)
                            console.log("name before move in list at 1: "+nameInView)

                             fruitModel.move(index, index-1, 1)

                            voice = listView.contentItem.children[1]

                            nameInView = voice.nameText

                            nameInModel = fruitModel.get(1).name
                            console.log("name after move in model at 1: "+nameInModel)
                            console.log("name after move in list at 1: "+nameInView)

                        }
                    }
                }
.... 
```

因此，当单击图像“content/pics/arrow-up.png”时，模型中的一项将向上移动一个位置，现在，在示例中，有四个项按顺序排列：“Apple”-“Banana” -“Cumqat”-“Durian”，如果我单击“香蕉”上的“向上”将该项目移动到第一个位置，这是 consol.log 的结果：

移入模型 1 前的名称：香蕉 移入列表 1 前的名称：Apple 移入模型 1 后的名称：Apple 移入列表 1 后的名称：Apple

如果我点击 Apple（现在位于第二位）将其移动到第一位，就会发生这种情况：

移入型号 1 前的名称：Apple 移入列表 1 前的名称：移入型号 1 后的 Apple 名称：Banana 移入列表 1 后的名称：Apple

所以，首先很明显ListModel的第一个索引是0，而ListView的第一个索引是1，那么很明显模型中的项目已经被移动了，而列表中的项目没有。现在，这是我的问题：想象“名称”是 TextEdit 的文本，因此 ListView 委托包含一个 TextEdit，它可以由用户编辑。如果我想获取该文本，我知道我可以这样做： 代码：

```
for (var i = 0; i <= myListView.count; i++){
     myItem= myListView.contentItem.children[i]
     myName = myListView.name 
```

但问题是，在我的 ListView 中，也可以使用 ListModel 的移动功能移动项目，但如果我移动项目并使用前一个周期取“名称”，似乎什么都没有改变（就像在动态列表示例）。另一方面，如果我使用“名称”：

```
 myName= myListModel.get(i).name 
```

然后，当我修改 TextEdit 中的文本并尝试使用“名称”时，似乎没有任何变化，

那么，我必须做些什么才能获得一个带有 TextEdit 的 ListView 并有可能移动我可以记录任何变化的项目？

我希望我已经清楚了，非常感谢，Giammarco

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-27T08:03:59.407

你做错了，就用这个：

```
import QtQuick 2.0;

Rectangle {
    width: 400;
    height: 300;

    ListView {
        id: listTest;
        clip: true;
        currentIndex: -1;
        model: ListModel {
            id: modelTest;

            ListElement { name: "Banana"; }
            ListElement { name: "Apple";  }
            ListElement { name: "Orange"; }
            ListElement { name: "Pear";   }
        }
        delegate: Item {
            id: item;
            height: 60;
            anchors {
                left: parent.left;
                right: parent.right;
            }

            property bool isCurrent : (model.index === listTest.currentIndex);
            onIsCurrentChanged: {
                if (isCurrent) {
                    input.forceActiveFocus ();
                }
                else {
                    input.focus = false;
                }
            }

            Text {
                id: label;
                font.pixelSize: 14;
                text: model.name;
                visible: !item.isCurrent;
                anchors {
                    left: parent.left;
                    right: btnUp.left;
                    margins: 20;
                    verticalCenter: parent.verticalCenter;
                }
            }
            TextInput {
                id: input;
                text: model.name;
                visible: item.isCurrent;
                onTextChanged: { modelTest.setProperty (model.index, "name", text); }
                anchors {
                    left: parent.left;
                    right: btnUp.left;
                    margins: 20;
                    verticalCenter: parent.verticalCenter;
                }

                Rectangle {
                    z: -1;
                    radius: 5;
                    antialiasing: true;
                    border {
                        width: 1;
                        color: "blue";
                    }
                    anchors {
                        fill: parent;
                        margins: -5;
                    }
                }
            }
            MouseArea {
                id: clicker;
                anchors.fill: parent;
                visible: !item.isCurrent;
                onClicked: { listTest.currentIndex = model.index; }
            }
            MouseArea {
                id: btnUp;
                width: height;
                anchors {
                    top: parent.top;
                    right: parent.right;
                    bottom: parent.verticalCenter;
                }
                onClicked: {
                    if (model.index > 0) {
                        modelTest.move (model.index, model.index -1, 1);
                    }
                }

                Text {
                    text: "V";
                    color: "gray";
                    rotation: -180;
                    anchors.centerIn: parent;
                }
            }
            MouseArea {
                id: btnDown;
                width: height;
                anchors {
                    top: parent.verticalCenter;
                    right: parent.right;
                    bottom: parent.bottom;
                }
                onClicked: {
                    if (model.index < modelTest.count -1) {
                        modelTest.move (model.index, model.index +1, 1);
                    }
                }

                Text {
                    text: "V";
                    color: "gray";
                    anchors.centerIn: parent;
                }
            }
            Rectangle {
                height: 1;
                color: "lightgray";
                anchors {
                    left: parent.left;
                    right: parent.right;
                    bottom: parent.bottom;
                }
            }
        }
        anchors.fill: parent;
    }
} 
```

# c++ - 可以将成员变量（CBrush *）分配给在类构造函数中动态分配的内存，但会出现新的问题？

> ID：10439847
> 
> 赞同：0
> 
> 时间：2012-05-03T21:53:36.490
> 
> 标签：c++, pointers, mfc, dynamic-memory-allocation

这是我的班级设置的精简版：

```
class CMyClass : public CDialog
{
    CMyClass(CWnd *pParent = NULL); // constructor
    ~CMyClass();
    _ CBrush *_pRadBkgColor; // background color of a radio button
}

CMyClass::CMyClass(CWnd *pParent /*=NULL*/)
{
    // assign CBrush pointer to a new brush
    _pRadBkgColor = new CBrush(RGB(0xFF, 0xFF, 0xFF));
}

CMyClass::~CMyClass()
{
    if( _pRadBkgColor != NULL )
    {
        delete _pRadBkgColor
    }
    _pRadBkgColor = NULL;
} 
```

现在，当我运行一个分析代码以查找细微错误的工具时，我得到了这个：

没有赋值运算符的类“名称”的构造函数中的新函数——在被引用类的构造函数中，出现了一个新函数。但是，没有为此类声明赋值运算符。大概一些类成员（或成员）指向动态分配的内存。默认赋值运算符未正确处理此类内存。通常需要自定义赋值运算符。因此，如果 x 和 y 都是 Symbol x = y 类型；将导致指针重复。稍后删除会造成混乱。

我相信它告诉我，如果我有两个成员变量是 CBrush 指针，让我们调用它们`a`和最好保持不变），然后我删除or ，就会有混乱。`b``a``new``b = a``a``a``b`

如果我不做这样的任务，这安全吗？

谢谢史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:08:29.840

警告说，如果制作了副本，`CMyClass`那么两者的两个实例`CMyClass`都指向同一个`CBrush`. 如果其中一个`CMyClass`实例被破坏，则另一个实例留下一个指向 a 的悬空指针，`CBrush`因为被破坏的实例将其`CMyClass`删除。

如果您有一个动态分配的成员，那么您需要实现一个复制构造函数和赋值运算符以正确复制动态分配的成员或通过声明复制构造函数和赋值运算符使类不可复制`private`：

```
class CMyClass : public CDialog
{
public:
    CMyClass(CWnd *pParent = NULL);
    ~CMyClass();
private:
    CBrush *_pRadBkgColor;
    CMyClass(const CMyClass&);             // Copy constructor.
    CMyClass& operator=(const CMyClass&);  // Assignment operator.
}; 
```

请参阅[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:13:00.137

析构函数中的检查`_pRadBkgColor != NULL`是不必要的。`delete`可以用`NULL`指针调用。以下内容就足够了：

```
CMyClass::~CMyClass() 
{
    delete _pRadBkgColor 
    _pRadBkgColor = NULL; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:43:02.380

您的代码没有任何问题。如果一个对象是用new分配的，那么它必须通过调用delete显式释放。您的代码正是这样做的。

此外，还有一个称为[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的成语进一步描述了为什么您所做的事情是正确的。

但是，堆栈分配的变量通常更快，您可以使用以下代码回避整个问题：

```
class CMyClass : public CDialog
{ 
  CMyClass(CWnd *pParent = NULL);
  ~CMyClass();
 _ CBrush _pRadBkgColor;
}

CMyClass::CMyClass(CWnd *pParent /*=NULL*/)
      : _pRadBkgColor(RGB(0xFF, 0xFF, 0xFF))
{
  HBRUSH hBr = _pRadBkgColor; // no problem, conversion operator.
}

CMyClass::~CMyClass()
{

} 
```

# ruby-on-rails - 如何更改用于 Rails 资产的路径？

> ID：10439851
> 
> 赞同：0
> 
> 时间：2012-05-03T21:54:04.723
> 
> 标签：ruby-on-rails

如何更改用于生产资产的路径？我将资产推送到 CDN，但 rails 一直将 /assets/ 放在文件名前面，但这不是 CDN 上的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:39:02.927

找到了

config.assets.prefix

[http://guides.rubyonrails.org/configuring.html#configuring-assets](http://guides.rubyonrails.org/configuring.html#configuring-assets)

# javascript - url 的 JavaScript .replace() 部分不起作用

> ID：10439857
> 
> 赞同：0
> 
> 时间：2012-05-03T21:54:55.363
> 
> 标签：javascript, jquery, replace, href, attr

遇到一个小问题，想不通。我在页面上使用 jQuery 来处理一些图像加载和灯箱。部分功能集需要替换锚标记的一部分`href`以将其指向不同的资源。

集合中有不同数量的图像，所以我使用 jQuery 的`.each()`方法来抓取它们，替换部分 url，然后在排序后将它们淡入一个。淡入淡出工作正常，但 JavaScript`.replace()`没有生效（尽管如果我把它们变成一个变量并记录它，我会看到正确的结果），如果我将淡入淡出函数链接到它的后面，`.replace`它不会被执行。

感觉值没有返回给元素。我错过了什么？

感谢您的帮助！

HTML：

```
<a class="test" href="aresourcewithextension_b.jpg">
    <img src="aresourcewithextension_a.jpg" />
</a> 
```

JavaScript：

```
$('.test').each(function(i){
    $(this).attr('href').replace('_b.jpg','_c.jpg').delay(100*i).animate({opacity:1},200);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:56:08.720

您需要设置替换的href。`.replace`本身不会更新原始字符串。

尝试如下，

```
this.href = this.href.replace('_b.jpg','_c.jpg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:59:00.487

您必须记住字符串是不可变的，即使在 JavaScript 中也是如此。试试这个：

```
$(".test").each(function(i){
    $(this).attr("href", $(this).attr("href").replace("_b.jpg", "_c.jpg"));
    $(this).delay(100 * i).animate({opacity:1}, 200);
}); 
```

# mongodb - 在 mongoDB 中删除数组字段大小小于 3 的文档

> ID：10439860
> 
> 赞同：6
> 
> 时间：2012-05-03T21:55:15.713
> 
> 标签：mongodb, mongodb-query

我有一个名为的 mongoDB 集合`col`，它的文档看起来像这样

```
{
  {
    intField:123,
    strField:'hi',
    arrField:[1,2,3]
  },

  {
    intField:12,
    strField:'hello',
    arrField:[1,2,3,4]
  },

  {
    intField:125,
    strField:'hell',
    arrField:[1]
  }
} 
```

现在我想从数组`col`中哪个`size`字段小于 2 的集合中删除文档。

所以我写了一个看起来像这样的查询

```
db.col.remove({'arrField':{"$size":{"$lt":2}}}) 
```

现在这个查询没有做任何事情。我检查`db.col.find()`并返回所有文件。这个查询有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-03T04:20:04.230

使用 MongoDB 2.2+，您可以在条件对象键中使用数字索引来执行此操作：

```
db.col.remove({'arrField.2': {$exists: 0}}) 
```

这将删除任何在`arrField`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T22:05:02.063

从文档中[`$size`](http://docs.mongodb.org/manual/reference/operator/query/size/)：

> 您不能使用 $size 查找大小范围（例如：具有超过 1 个元素的数组）。

如果您想尝试这种事情，文档建议维护一个单独的大小字段（在本例中为 arrFieldSize）和数组中的项目数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T13:58:03.710

请注意，对于某些查询，仅使用 (n)or 条件列出您想要包含或排除的所有计数可能是可行的。

在您的示例中，以下查询将提供少于 2 个数组条目的所有文档：

```
db.col.find({
  "$or": [
    { "arrField": {"$exists" => false} },
    { "arrField": {"$size" => 1} },
    { "arrField": {"$size" => 0} }
  ]
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-04T03:43:06.880

以下应该工作

```
db.col.remove({$where: "this.arrField.length < 2"}) 
```

# node.js - npm 安装 sqlite3 错误

> ID：10439862
> 
> 赞同：8
> 
> 时间：2012-05-03T21:55:28.263
> 
> 标签：node.js, sqlite, kubuntu

我不知道为什么，但我在使用 npm 安装任何软件包时遇到问题。我试图安装 sqlite3，它给出的错误如下：

```
 naphstor@ubuntu:~$ sudo npm install sqlite3
    [sudo] password for naphstor: 

    > sqlite3@2.0.15 preinstall /home/naphstor/node_modules/sqlite3
    > node-waf clean || true; node-waf configure build

    Nothing to clean (project not configured)
    Setting srcdir to                        : /home/naphstor/node_modules/sqlite3 
    Setting blddir to                        : /home/naphstor/node_modules/sqlite3/build 
    Checking for program g++ or c++          : /usr/bin/g++ 
    Checking for program cpp                 : /usr/bin/cpp 
    Checking for program ar                  : /usr/bin/ar 
    Checking for program ranlib              : /usr/bin/ranlib 
    Checking for g++                         : ok  
    Checking for node path                   : not found 
    Checking for node prefix                 : ok /usr/local 
    Checking for sqlite3                     : not found 
    Checking for library sqlite3             : not found 
    /home/naphstor/node_modules/sqlite3/wscript:29: error: the configuration failed (see             '/home/naphstor/node_modules/sqlite3/build/config.log')                                            
    npm ERR! error installing sqlite3@2.0.15 Error: sqlite3@2.0.15 preinstall: `node-waf        clean || true; node-waf configure build`
    npm ERR! error installing sqlite3@2.0.15 `sh "-c" "node-waf clean || true; node-waf configure build"` failed with 1
    npm ERR! error installing sqlite3@2.0.15     at ChildProcess.<anonymous>  (/usr/local/lib/node_modules/npm/lib/utils/exec.js:49:20)
    npm ERR! error installing sqlite3@2.0.15     at ChildProcess.emit (events.js:70:17)
    npm ERR! error installing sqlite3@2.0.15     at maybeExit (child_process.js:359:16)
    npm ERR! error installing sqlite3@2.0.15     at Process.onexit               (child_process.js:395:5)
    npm ERR! sqlite3@2.0.15 preinstall: `node-waf clean || true; node-waf configure  build`
    npm ERR! `sh "-c" "node-waf clean || true; node-waf configure build"` failed with 1
    npm ERR! 
    npm ERR! Failed at the sqlite3@2.0.15 preinstall script.
    npm ERR! This is most likely a problem with the sqlite3 package,
    npm ERR! not with npm itself.
    npm ERR! Tell the author that this fails on your system:
    npm ERR!     node-waf clean || true; node-waf configure build
    npm ERR! You can get their info via:
    npm ERR!     npm owner ls sqlite3
    npm ERR! There is likely additional logging output above.
    npm ERR! 
    npm ERR! System Linux 3.0.0-12-generic
    npm ERR! command "node" "/usr/local/bin/npm" "install" "sqlite3"
    npm ERR! cwd /home/naphstor
    npm ERR! node -v v0.5.11-pre
    npm ERR! npm -v 1.0.106
    npm ERR! code ELIFECYCLE
    npm ERR! 
    npm ERR! Additional logging details can be found in:
    npm ERR!     /home/naphstor/npm-debug.log
    npm not ok
    naphstor@ubuntu:~$ 
```

知道为什么会这样。它在安装任何其他软件包时显示相同类型的错误。

我可以使用“git clone git://github.com/developmentseed/node-sqlite3.git”之类的解决方法来做到这一点，但想知道为什么 npm 在安装这些软件包时会出错。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-04T21:43:48.313

这可以通过强制 SQLite3 编译来解决。 `npm install sqlite3 --build-from-source`

确保安装了以下依赖项

1.  蟒蛇软件属性
2.  Python
3.  克++
4.  制作
5.  构建必备

或运行`sudo npm install -g node-gyp`

您将在那里找到更多信息（SQlite3 部分）：http: [//support.ghost.org/troubleshooting/](http://support.ghost.org/troubleshooting/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-07T13:19:10.313

节点版本可能是问题，因此对于节点 10.x 及更高版本，只需安装 sqlite3@4.1.1，如指定版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:01:29.590

尝试更新 npm。我刚刚用最新版本测试了它，它工作正常。

或者，尝试以下软件包之一：

[https://github.com/grumdrig/node-sqlite](https://github.com/grumdrig/node-sqlite)
[https://github.com/orlandov/node-sqlite](https://github.com/orlandov/node-sqlite)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T09:04:50.813

我也遇到了这个问题然后我删除了我从 ubuntu repos 下载和安装的 node js 并从[官方 node js 站点](http://nodejs.org)下载了源代码 并在它再次尝试安装 sqlite 后编译它没有问题我建议你更新你的 node 和 npm版本也是

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-25T19:10:26.137

这对我来说是一个权限问题。我在错误之前看到了这一行：

```
gyp WARN EACCES current user ("ubuntu") does not have permission to access the dev dir "/root/.cache/node-gyp/14.15.4" 
```

所以我当时`chmod -R 777 /root`就这样做了`npm i sqlite3`。

# php - 显示mysql数据的问题

> ID：10439863
> 
> 赞同：0
> 
> 时间：2012-05-03T21:55:35.553
> 
> 标签：php, mysql

我需要您的帮助才能在我的文章下方显示评论。目前，我收到所有返回的 mysql_fetch_array() 元素的未定义索引错误。

请问我的问题来自哪里。？

谢谢你的时间。

评论表

```
 CREATE TABLE IF NOT EXISTS `comment` (
     `comment_id` int(255) NOT NULL AUTO_      INCREMENT,
      `article_id` int(255) NOT NULL,
      `username` varchar(25) NOT NULL,
   `comment_body` varchar(300) NOT NULL,
      `comment_date` datetime NOT NULL,
       PRIMARY KEY (`comment_id`),
      UNIQUE KEY `comment_id` (`comment_      id`)
        ) ENGINE=InnoDB  DEFAULT CHARSET=     latin1 AUTO_INCREMENT=3 ; 
```

关于表

```
 CREATE TABLE IF NOT EXISTS `about` (
     `about_id` int(255) NOT NULL,
    `about_head` varchar(255) NOT NULL,
 `about_content` varchar(400) NOT NULL,
  `about_tags` varchar(25) NOT NULL,
  `about_created` datetime NOT NULL,
   `about_image` blob NOT NULL,
    PRIMARY KEY (`about_id`),
  UNIQUE KEY `about_id` (`about_id`)
     ) ENGINE=InnoDB DEFAULT CHARSET=        latin1; 
```

评论的显示

```
 $query6=mysql_query("SELECT c.     username,c.comment_body,c.comment_     date
           FROM comment AS c  
  INNER JOIN about AS a ON
  c.article_id = a.about_id") or die
  (mysql_error()); 

   while ($comment = mysql_fetch_assoc       ($query6)) {

      echo "Comment: "; 
      $comment['comment_body'] ; 
      echo "<br/>" ;           

      echo "Date of Comment: ";
      $comment['comment_date'] ;                       echo "<br/>" ;        

      echo "Commenter: ";
      $comment['username'] ; 
      echo "<br/>" ;           
                 } 
```

**更新**

我将 mysql_fetch_array 更改为 ysqo_fetch_assoc，但我仍然收到相同的错误....未定义索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:05:22.880

看看你（不能）打字的方式，我敢打赌是错字。
无论如何，做一个

```
var_dump($comment); 
```

在循环内部并查看实际的数组内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:48:42.270

我已经在我的本地主机中进行了测试，但我没有得到问题。但是，如果您在结果集中遇到“未定义索引”问题，那么您正在键入数组中不存在的数组的索引值。做这个

```
echo "<pre>";
print_r($comment);
echo "</pre>"; 
```

这将帮助您跟踪数组的当前索引值。

您在“ $comment['......”之前缺少“echo”或“print”

# jquery - Jquery在h1标签内添加div

> ID：10439873
> 
> 赞同：4
> 
> 时间：2012-05-03T21:56:32.543
> 
> 标签：jquery, html

使用 jquery，我将如何在所有 h1 标签内的文本周围包装一个 div 类。例如让所有

`<h1> test </h1>`

在一个文件中

`<h1> <div class="wrap">test </div></h1>`.

我有心理障碍。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T22:00:19.223

尝试使用使用`$('h1').wrapInner('<div class="wrap" />');`

但是使用一个`<span class="wrap" />`

### *[演示 jsBin](http://jsbin.com/ixaqic/edit#javascript,html,live)*

来自文档：http: [//api.jquery.com/wrapInner/](http://api.jquery.com/wrapInner/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T22:03:50.240

`<div>`在 内无效`<h1>`。你最好使用`<span>`. 纯 JavaScript：

```
var h = document.getElementsByTagName('h1')[0],
    d = document.createElement('span');
while(h.firstChild) d.appendChild(h.firstChild);
h.appendChild(d);
d.className = "wrap"; 
```

但是就是说，您不能只将“包装”类应用于`<h1>`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:02:19.320

```
// Get and wrap the content from the h1
var content = $('h1').html();
content = '<div class="wrap">' + content + '</div>';

// Reinsert the content into the h1
$('h1').html( content ); 
```

这当然可以在一行中完成，但这使它更加清晰。

# javascript - 中止正确的ajax

> ID：10439874
> 
> 赞同：0
> 
> 时间：2012-05-03T21:56:35.507
> 
> 标签：javascript, jquery

我的问题可能是nooby，但实际上我真的找不到答案。

我想在特定的 ajax 上使用 abort() 方法。但是，我总是使用 request=$.ajax... 来处理我的所有请求，并且 request.abort() 取消了我所有的 ajax，而不是只有我想要的那个。

有没有办法通过命名或其他方式指向正确的？这是我的代码

```
request.abort();
request = $.ajax({
url: "getphp/gettooltip.php",
type: "GET",
data: {db : db, id : url.substring(url.lastIndexOf('=')+1)},
dataType: "JSON"
});
request.done(function(msg){
d3lttFillInTooltip(msg,db)
$('#d3ltttooltipdiv').css('visibility','visible');
}); 
```

在运行这个之前，我绝对需要取消同一个 ajax 的最后一次调用。

欢迎任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:08:27.473

为每个 jqXHR 对象使用不同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:20:22.220

您需要更改代码，这样您就不会简单地`request=$.ajax({...});`为每个调用分配。您需要某种列表或请求映射。如何实现这取决于您何时需要中止请求。例如，如果您只是想要一堆请求，以便您可以轻松中止最后一个请求，您可以执行以下操作：

```
var requests = [];
requests.push($.ajax({
    // request 1
    ...
}));
requests.push($.ajax({
    // request 2
    ...
}));
requests.push($.ajax({
    // request 3
    ...
}));

requests.pop().abort(); //aborts request 3
// or...
requests.shift().abort(); //aborts request 1 
```

如果这对您没有帮助，请提供有关何时需要中止请求的更多信息。底线 - 如果您希望能够针对特定请求，请不要将请求设置为您发出的每个 ajax 请求。

# c# - 停止并用新线程替换正在运行的线程

> ID：10439879
> 
> 赞同：0
> 
> 时间：2012-05-03T21:57:23.737
> 
> 标签：c#, multithreading

```
for (APCounter = start; APCounter < Stager.InstructionsMemory.Length; APCounter++)
{
    PipelineInitializor();
    int i1 = APCounter;
    int i = APCounter;
    tasks[i] = new BlockingCollection<Func<object>>();
    tasks[i].Add(() => Fetch(i1));
    tasks[i].Add(() => Decode(i1));
    tasks[i].Add(() => ALURes(i1));
    tasks[i].Add(() => Memory(i1));
    tasks[i].Add(() => WriteB(i1));
    InstructionThread[i] = new Thread(() => Worker(i1, tasks[i1]));
    InstructionThread[i1].Start();
} 
```

这些是一对需要被携带相同类型数据对象但具有新任务数据的新线程替换的线程。

我尝试过使用该[`Abort`](http://msdn.microsoft.com/en-us/library/system.threading.thread.abort.aspx)方法（不推荐），它导致一切停止执行，无论我调用什么函数，都没有再次开始执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:06:50.597

我建议您使用任务并行库和任务类，它具有取消功能。

“替换”线程没有任何意义。您可以启动一个新线程来处理相同的数据；但是，如果您无法让其他线程自行停止，您就无法可靠地停止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:01:04.010

如您所说，不推荐使用方法 abort() 。如果它是一个无限循环，则使用一个布尔值来停止线程而不中止。

```
bool run = true;
Thread thread = new Thread(method);
thread.start();

private void method()
{
  while(run)
  {

  }
} 
```

要停止线程，只需将布尔值设置为 false，通常，您可以稍后（或其他）重新启动它

# gcc - 如何将 lwIP 原始源代码包含到我的项目中？

> ID：10439880
> 
> 赞同：2
> 
> 时间：2012-05-03T21:57:32.443
> 
> 标签：gcc, arm, atmel, lwip

我目前正在使用 Atmel AT91SAM9260 评估板（具有多个外围设备的基于 ARM 的微控制器）实现一个简单的 tcp/ip 服务器。

Atmel 给出的一些示例包括基于 uIP 的 Web 服务器，但 uIP 无法处理所需的吞吐量。

我发现基于版本 1.1.1（或略高于）的相同示例对我来说已经足够了。

最近我开始遇到堆栈问题，我找不到使用更新版本的 lwIP 的 AT91SAM9260 的端口。为了构建项目，我使用 Eclipse+Yagarto+gcc 作为开发堆栈。

在将最新版本 1.4.0（可在[http://download.savannah.gnu.org/releases/lwip/ 获得](http://download.savannah.gnu.org/releases/lwip/)）的源代码替换到我的项目中并尝试修复所有编译错误之后，我放弃了。

源代码的结构非常相似，但显然需要进行太多调整。

是否有关于将原始源代码适应我的堆栈的具体指南？C++ 代码不应该只在我的堆栈上编译吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:29:00.953

在 LwIP 的 wiki [http://lwip.wikia.com/wiki/Projects_that_use_lwIP](http://lwip.wikia.com/wiki/Projects_that_use_lwIP)我确实看到了对 LwIP 1.3.0 贡献端口的引用。这可能是一个起点，至少对于 ethernetif.c 文件而言。

尝试回答第二个问题：C（不是 C++）应该可以编译，但仍然必须（至少）：

*   设置 lwipopts.h 以确定如何使用 LwIP
*   提供 ethernetif.h/ethernetif.c 将您的硬件绑定到 LwIP
*   设置 sys_arch.h/sys_arch.c

# c# - movenext 和 moveprevious 导航

> ID：10439889
> 
> 赞同：0
> 
> 时间：2012-05-03T21:58:35.110
> 
> 标签：c#, asp.net

一个包含许多项目的下拉列表，movenext 和 moveprevious 导航按钮用于显示每个选定项目的图像。每个图像都显示在同一个图像控件中。数据库中的图像数据只是图像文件的路径。

使用 DataReader 和数据存储过程，我如何移动下一个和上一个，而不必每次都访问数据库？

ASP.NET 4、C#、MS SQL Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T00:37:03.723

`DataReader`根据定义，仅在连接模式下工作，需要打开连接，实际上在 SQL 游标中进行转换，因此每次您下一步移动时它都会访问数据库。

如果您想一次获取所有图像路径，然后断开连接工作，不再在数据库上进行往返，请使用 a`DataSet`代替。

# mysql - 如何在整个列上使用 LIKE 进行选择，但不需要完全匹配？

> ID：10439891
> 
> 赞同：1
> 
> 时间：2012-05-03T21:58:48.937
> 
> 标签：mysql

我正在尝试`SELECT`使用整个列而不是特定字符或通配符对两个表进行部分匹配。

我有两个表（T1，T2）和两列（T1.C1，T2.C2）。当 C1 和 C2 是完全格式化的匹配时，我能够得到一个返回`SELECT`，但是，C2 已经将包含来自 C1 的文本字符串的文本串在一起。

因此，作为示例，这里是两个表中格式化字符的一些示例：

T1.C1

*   能源部，约翰
*   史密斯，史蒂夫
*   罗伯茨，莎莉

T2.C2

*   #Doe、John、Thekid、Billy、随机 A 组
*   随机 B 组，史密斯，史蒂夫#琼斯，艾莉
*   #Roberts、Sally!Random GroupC 等。

我想做的是在 T2.C2 中找到来自 T1.C1 的“Doe，John”时进行匹配，即使在该表中它的格式为“#Doe, John, Thekid, Billy, Random Group A”

这是我用来获得完全匹配的...

```
SELECT *
FROM T1, T2
WHERE T1.C1 LIKE CONCAT('%', T2.C2 , '%'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:05:19.563

关于什么

```
SELECT *
FROM T1, T2
WHERE T2.C2 LIKE CONCAT('%', T1.C1 , '%'); 
```

? 即，T2.C2 包含 T1.C1 中的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:34:29.820

SELECT t1.c1, t2.c2 FROM t1 JOIN t2 WHERE t2.c2 LIKE CONCAT('%',t1.c1,'%');

这匹配两个表中的字符串

[http://sqlfiddle.com/#!2/20df8/21](http://sqlfiddle.com/#!2/20df8/21)

# move - 我可以将缺陷从 Quality Center 转移到 Bugzilla

> ID：10439892
> 
> 赞同：0
> 
> 时间：2012-05-03T21:58:50.433
> 
> 标签：move, bugzilla, hp-quality-center, defects

是否有人将缺陷从 Quality Center 迁移到 Bugzilla？如果是这样，你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:50:34.713

我认为您可以将所有内容导出到 Excel 并将其重新导入 Bugzilla。也可能有一些可用的脚本。

# c++ - XCode3 - 库搜索路径和项目框架之间的关系

> ID：10439902
> 
> 赞同：5
> 
> 时间：2012-05-03T21:59:45.130
> 
> 标签：c++, xcode, xcode3.2

作为来自 VS 的新 MAC 开发人员，我并没有真正“了解”什么是框架。如果我在我的项目中添加一个框架，这是否自动意味着当我这样做时应该找到标题`#include <SomeFile.h>`？

我似乎发现在某些情况下我也必须添加标题搜索路径。这是否意味着框架无法正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:58:10.730

根据[Apple 概念文档](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WhatAreFrameworks.html#//apple_ref/doc/uid/20002303-BBCEIJFI)的定义：

> 框架是一个分层目录，将共享资源（如动态共享库、nib 文件、图像文件、本地化字符串、头文件和参考文档）封装在一个包中。

换句话说，它是一个或多个应用程序可以使用的资源的汇编，它本身并不是一个应用程序。

[Apple 概念文档](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPFrameworks/Tasks/IncludingFrameworks.html#//apple_ref/doc/uid/20002257-BAJJBBHJ)详细说明：

> 您可以使用该`#include` 指令在代码中包含框架头文件。如果你在 Objective-C 中工作，你可以使用 `#import`指令而不是`#include`指令。这两个指令具有相同的基本结果。但该`#import`指令保证同一个头文件永远不会被包含超过一次。包含框架头有两种方法：
> 
> ```
> #include <Framework_name/Header_filename.h>
> #import <Framework_name/Header_filename.h> 
> ```
> 
> 在这两种情况下，**Framework_name**是框架的名称，而 **Header_filename**是该框架或其子框架之一中的头文件的名称。
> 
> 包含框架头文件时，传统上只包含主框架头文件。主头文件是名称与框架名称匹配的头文件。例如，地址簿框架有一个名为 `AddressBook.h`.

要包含自定义框架：

> 如果您的项目链接到的框架不包含在任何标准位置中，则必须在 Xcode 找到其头文件之前显式指定该框架的位置。要指定此类框架的位置，请将包含框架的目录添加到[Xcode 项目的“框架搜索路径”选项中](http://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW87)。Xcode 将此目录列表传递给编译器和链接器，它们都使用该列表来搜索框架资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T13:55:29.577

如果框架编写得当，它包含标头以及实际的可链接（二进制）文件。编译器（以前是 GCC，最近是 LLVM-clang）识别框架路径并自动知道在哪里搜索框架头文件。但是有一些极端情况：

1.  如果您不添加框架，而是添加来自 /usr/lib 的传统 Unix 库（libsqlite3.dylib、libxml2.dylib 等）。那么可能是库有一个单独的（非标准）包含路径；这很常见，例如，在 glib 的情况下。在这种情况下，您必须将 /usr/include/glib-2.0 添加到您的标头搜索路径中。
2.  相反的情况：当你遇到一些“伞”框架时（例如，Core Audio 被拆分成小的子框架，比如 AudioToolbox.framework 等），那么那个特定的框架不包含可链接的动态库，只有标题。

我希望这有帮助。

# javascript - SVG，Raphael.js，绘图

> ID：10439903
> 
> 赞同：2
> 
> 时间：2012-05-03T21:59:45.833
> 
> 标签：javascript, math, svg, raphael, geometric-arc

我想这更像是一个数学问题，或者可能是一个 SVG 问题。我正在考虑修改我在 raphael.js 网站上找到的一些示例代码。我已经将其修改为具有自定义中心点。现在我想修改它，以便我可以指定弧的开始角度。（类似于 d3.js，所以我可以用它来制作像条形图这样的东西，中间缺失）。

但是我不知道从哪里或如何开始。我的数学很糟糕，我不知道 alpha 是什么以及 a 变量是什么。或者为什么 x 和 y 是这样计算的。我一遍又一遍地阅读 SVG 规范，但我缺少一些重要的基础知识，我也不知道。

有人可以指出我正确的方向，以便我可以开始理解这些东西吗？

```
window.onload = function () {
    var r = Raphael("holder", 600, 600),
        R = 200,
        init = true,
        param = {stroke: "#fff", "stroke-width": 30};
    // Custom Attribute
    r.customAttributes.arc = function (xPos, yPos, value, total, R) {
        var alpha = 360 / total * value,
        a = (90 - alpha) * Math.PI / 180,
        x = xPos + R * Math.cos(a),
        y = yPos - R * Math.sin(a),
        var path = [["M", xPos, yPos - R], ["A", R, R, 0, +(alpha > 180), 1, x, y]];
        return {path: path};
    };
    var sec = r.path().attr(param).attr({arc: [300, 300, 3, 60, R]});
}; 
```

运行代码会产生：

```
<svg height="600" version="1.1" width="600" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;">
    <path style="" fill="none" stroke="#bfb5b5" d="M300,100A200,200,0,0,1,361.8033988749895,109.7886967409693" stroke-width="30">
</svg> 
```

我也不知道弧参数如何协同工作来绘制它们正在绘制的内容。

为缺乏对问题的关注而道歉。

编辑：它基于极坐标时钟示例。[http://raphaeljs.com/polar-clock.html](http://raphaeljs.com/polar-clock.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:42:01.553

我认为该示例的作者正在尝试创建自定义属性，以便轻松创建基于时钟旋转的弧线。基本上，`total`自定义属性的参数表示时钟的总移动（60 秒），而`value`（在您的情况下为 3）表示您尝试绘制的弧的长度（以秒为单位）。所以基本上你有3秒的弧度。

现在数学：

*   `alpha`：弧的角度（以度为单位）。您注意到从秒到度的转换：3 秒 -> 18 度

*   `a`: 以弧度为单位的角度。三角公式使用弧度而不是度数，因此您需要这种转换。出于某种我不明白的原因，这是互补角（`90 - alpha`）
    **编辑**：互补角（可能）用于补偿在三角学中y轴指向上方而在svg画布上指向下方的事实。

*   `x, y`：您正在绘制的路径（弧）的终点。这些是使用基本三角法计算的（对不起..你在这里没有得到任何帮助）。

此处描述了 svg 弧的参数：http: [//www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)

# javascript - 动态生成的表格行如何删除？

> ID：10439905
> 
> 赞同：0
> 
> 时间：2012-05-03T21:59:51.687
> 
> 标签：javascript, jquery, dynamic, html-table, tablerow

我一直在为一个项目编辑别人的代码，当我试图弄清楚某些 Javascript 函数是如何做他们的事情时，我时不时地绊倒。

本质上我想添加一个删除行按钮，但是它会引起头痛。

所以动态生成的行的文本是由这个 PHP 变量完成的：

```
$rowtext .= '<tr>something</tr>'; 
```

然后是用Javascript生成行的函数：

```
function generateRow(x) {';
            var row_prototype = \'' . $rowtext . '\';
            return row_prototype.replace(/\[index\]/g, x);
            } 
```

单击添加行按钮时，它会执行以下操作：

```
rowIndex = 1;
function addRow() {
            var nr = generateRow(rowIndex); 
            rowIndex = rowIndex + 1;
            jQuery(\'tbody\').append(nr);';
} 
```

我想我需要在点击时执行类似的功能，考虑到 rowIndex 等。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:08:11.553

> 本质上是删除上面代码生成的最后一行......所以删除 row rowIndex == 5 或其他东西

由于您在评论中提到了最后一行，您可以使用`:last`选择器来获取最后一行，尝试如下所示，

```
$('#removeRow').click(function () {
    $('#table_selector tbody tr:last').remove();
}); 
```

在你的标记中的某个地方有一个像下面这样的按钮，

```
<button id="removeRow">Remove a Row</button> 
```

**注意：**您需要`#table_selector tbody`使用特定的表 ID/Class 进行修改。

# c# - 从 StringBuilder 转换为字符串的一些问题

> ID：10439908
> 
> 赞同：0
> 
> 时间：2012-05-03T21:59:57.340
> 
> 标签：c#

我从谷歌天气中读到这样的回复

```
using (StreamReader streamreader = new StreamReader(resp.GetResponseStream(), Encoding.GetEncoding(1251)))
        {
            sb.AppendLine(streamreader.ReadToEnd());
            sb.Remove(0, 21); 
```

在调试器中字符串看起来像

```
<xml_api_reply version="1"> 
```

但是当我将 StringBuilder 转换为字符串时，我得到了

```
 <xml_api_reply version=\"1\"> 
```

它 `\`在每个`"`. 有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:04:38.377

如果您在调试器中看到斜线，这不是问题：这是正常的。

> QuickWatch/Watch 窗口将添加额外`\`的内容。如果您在 Text Visualizer 中查看它，您将看不到它们：
> 
> 快速观看：
> 
> ```
> "{  \"data\": {  \"urls\": [  {\"url\": \"domain/path1\"}  ,{\"url\": 
>     \"domain/path2\"}  ]  }}" 
> ```
> 
> 可视化器（实际输出）：
> 
> ```
> {  "data": {  "urls": [  {"url": "domain/path1"}  ,{"url": "domain/path2"}  ]  }} 
> ```
> 
> `\`表示引号已被转义，并将按照您的预期包含在最终字符串中。即你的输出**没有问题**。

来源：[https ://stackoverflow.com/a/4379353/1220876](https://stackoverflow.com/a/4379353/1220876)

# sencha-touch - 错误存储加载

> ID：10439913
> 
> 赞同：0
> 
> 时间：2012-05-03T22:00:27.987
> 
> 标签：sencha-touch, extjs, store, sencha-touch-2

晚上好。

我的应用程序的初始视图需要从 Store (autoLoad = true) 获取一些数据来更改它的某些组件。我可以在什么时候做到这一点？

看法：

```
 Ext.define('App.view.EmpresaPanel', {
    extend: 'Ext.Container',
    alias: 'widget.empresapanel',

    config: {
        ui: 'dark',
        layout: {
            type: 'card'
        },
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                title: 'Menu',
                layout: {
                    align: 'center',
                    type: 'hbox'
                }
            },
            {
                xtype: 'titlebar',
                docked: 'bottom',
                title: '2012 ©',
                layout: {
                    align: 'center',
                    type: 'hbox'
                }
            }       
        ]
    }

}); 
```

店铺：

```
Ext.define('App.store.Empresa', {
    extend: 'Ext.data.Store',
    requires: [
        'App.model.Empresa'
    ],

    config: {
        autoLoad: true,
        autoSync: true,
        model: 'App.model.Empresa',
        storeId: 'EmpresaStore',
        proxy: {
            type: 'ajax',
            url: 'http://URL',
            reader: {
                type: 'json',
                rootProperty: 'empresa'
            }
        }
    }
}); 
```

控制器：

```
Ext.define('App.controller.Empresa', {
    extend: 'Ext.app.Controller',
    config: {
        refs: {
            empresaPanel: 'empresapanel'
        },

        control: {
            "empresapanel": {
                initialize: 'onContainerInitialize'
            }
        }
    },

    onContainerInitialize: function(component, options) {
        var store = Ext.getStore("EmpresaStore"),
        record = store.findRecord("id", "1");

        console.log(store);
        console.log(record);

    }

}); 
```

首先出现在console.log中：`Ext.apply.create.Class` 在第二个中：`null`

如果我在此视图中放置一个按钮并点击相同的事件，我会运行函数“onContainerInitialize”中的相同代码，记录就完成了。

在创建视图后是否有特定时间可以从商店访问数据？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:30:22.203

[您应该为商店加载事件](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Store-event-load)添加侦听器以从商店访问记录。这是一个示例，您可以如何做到这一点。将以下代码放入 onContainerInitialize 中：

```
store.on('load', function(t) {
    var record = t.findRecord("id", "1");
    console.log(record);
}, this, {single: true}); 
```

# c# - 找出我的应用程序正在运行多少线程？

> ID：10439916
> 
> 赞同：27
> 
> 时间：2012-05-03T22:00:43.043
> 
> 标签：c#, multithreading

我试图找出我的应用程序正在运行多少线程，以便制作性能的实时图表。您能指出我正确的方向或提供代码示例吗？谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-03T22:03:46.590

您可以查看当前进程的[Threads属性：](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.threads.aspx)

```
System.Diagnostics.Process.GetCurrentProcess().Threads 
```

当然，这也包括非托管线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-11T10:48:14.073

**如果您只想查看托管线程：**

当您从 Visual Studio 调试应用程序时，您还可以查看`Threads`and`Parallel Stacks`窗口，该窗口位于菜单下`Debug -> Windows`

您可以在下图`Thread-Count`中的顶部`Threads`窗口中看到（标记为绿色）

[![在此处输入图像描述](../Images/6f454959ab2ccd26de024937532f1e41.png)](https://i.stack.imgur.com/GEw8W.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T22:05:02.197

```
private static int s_threadCount;

private static void MyMethod() {
  Interlocked.Increment(ref s_threadCount);
  try {
    ...
  } finally {
    Interlocked.Decrement(ref s_threadCount);
  }
} 
```

# android - 无法启动activity ComponentInfo, MapActivity Android

> ID：10439918
> 
> 赞同：0
> 
> 时间：2012-05-03T22:01:08.820
> 
> 标签：android, mapactivity

我对 Android 编程真的很陌生，我正在尝试在互联网上关注一些关于如何在 android 上制作谷歌地图驾驶方向的教程。但不知何故，代码不起作用，尽管我的 eclipse 没有在代码上显示任何错误。如果此代码有问题，任何人都可以提供帮助？

这是我的 MapDirectionActivity

```
 package my.map.direction;

    import java.net.HttpURLConnection;
    //import java.net.URI;
    import java.net.URL;

    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;

    import org.w3c.dom.Document;
    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;

    import com.google.android.maps.GeoPoint;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapController;
    import com.google.android.maps.MapView;

    //import android.app.Activity;
    import android.os.Bundle;
    import android.util.Log;

    public class MapDirectionActivity extends MapActivity {

        MapView myMapView = null;
        MapController myMc = null;
        GeoPoint geoPoint = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            myMapView = (MapView) findViewById(R.id.mapView);
            geoPoint = null;
            myMapView.setSatellite(false);

            String htw = "-6.3039,106.8267";
            String storkower = "-6.29436,106.8859";
            String pairs[] = getDirectionData(htw, storkower);
            String[] lngLat = pairs[0].split(",");

            //starting point
            GeoPoint startGP = new GeoPoint((int) (Double.parseDouble(lngLat[1])*1E6), (int)(Double.parseDouble(lngLat[0])*1E6));

            myMc = myMapView.getController();
            geoPoint = startGP;
            myMc.setCenter(geoPoint);
            myMc.setZoom(14);
            myMapView.getOverlays().add(new DirectionPathOverlay(startGP, startGP));

            GeoPoint gp1;
            GeoPoint gp2 = startGP;

            for(int i = 1; i<pairs.length;i++){
                lngLat = pairs[i].split(",");
                gp1 = gp2;

                gp2 = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6), (int)(Double.parseDouble(lngLat[0])*1E6));
                myMapView.getOverlays().add(new DirectionPathOverlay(gp1,gp2));
                Log.d("xxx","pair"+pairs[i]);
            }

            myMapView.getOverlays().add(new DirectionPathOverlay(gp2, gp2));
            myMapView.getController().animateTo(startGP);
            myMapView.setBuiltInZoomControls(true);
            myMapView.displayZoomControls(true);

        }

        @Override
        protected boolean isRouteDisplayed(){
            return false;
        }

        private String[] getDirectionData(String srcPlace, String destPlace){
            String urlString = "http://maps.google.com/maps?f=d&hl=en&saddr="
                    + srcPlace + "&daddr=" + destPlace
                    + "&ie=UTF8&0&om=0&output=kml";

        Log.d("URL",urlString); 

        Document doc = null;
        HttpURLConnection urlConnection = null;
        URL url = null;
        String pathContent = "";

        try{
            url = new URL(urlString.toString());
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.connect();
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = db.parse(urlConnection.getInputStream());     
        }catch(Exception e){

        }

        NodeList nl = doc.getElementsByTagName("LineString");
        for(int s=0; s< nl.getLength();s++){
            Node rootNode = nl.item(s);
            NodeList configItems = rootNode.getChildNodes();
            for(int x=0;x<configItems.getLength();x++){
                Node lineStringNode = configItems.item(x);
                NodeList path = lineStringNode.getChildNodes();
                pathContent = path.item(0).getNodeValue();
            }
        }

        String[] tempContent = pathContent.split(" ");
        return tempContent;
        }

    } 
```

我的 DirectionPathOverlay

```
public class DirectionPathOverlay extends Overlay{

    private GeoPoint gp1;
    private GeoPoint gp2;

    public DirectionPathOverlay(GeoPoint gp1, GeoPoint gp2){
        this.gp1 = gp1;
        this.gp2 = gp2;

    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when){

        Projection projection = mapView.getProjection();
        if(shadow == false){
            Paint paint = new Paint();
            paint.setAntiAlias(true);
            Point point = new Point();
            projection.toPixels(gp1, point);
            paint.setColor(Color.BLUE);
            Point point2 = new Point();
            projection.toPixels(gp2, point2);
            paint.setStrokeWidth(3);
            canvas.drawLine((float) point.x, (float) point.y, (float) point2.x, (float) point2.y, paint);
        }
    return super.draw(canvas, mapView, shadow, when);
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow){

        super.draw(canvas, mapView, shadow);
    }
} 
```

我在我的 logcat 上收到以下错误

```
05-02 08:51:09.972: I/dalvikvm(629): threadid=3: reacting to signal 3
05-02 08:51:09.982: I/dalvikvm(629): Wrote stack traces to '/data/anr/traces.txt'
05-02 08:51:10.062: D/URL(629): http://maps.google.com/maps?f=d&hl=en&saddr=52.458402,13.526616&daddr=52.523559,13.475826&ie=UTF8&0&om=0&output=kml
05-02 08:51:10.082: D/AndroidRuntime(629): Shutting down VM
05-02 08:51:10.102: W/dalvikvm(629): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-02 08:51:10.122: E/AndroidRuntime(629): FATAL EXCEPTION: main
05-02 08:51:10.122: E/AndroidRuntime(629): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.google.maps/my.google.maps.MapsTestActivity}: java.lang.NullPointerException
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.os.Looper.loop(Looper.java:137)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-02 08:51:10.122: E/AndroidRuntime(629):  at java.lang.reflect.Method.invokeNative(Native Method)
05-02 08:51:10.122: E/AndroidRuntime(629):  at java.lang.reflect.Method.invoke(Method.java:511)
05-02 08:51:10.122: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-02 08:51:10.122: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-02 08:51:10.122: E/AndroidRuntime(629):  at dalvik.system.NativeStart.main(Native Method)
05-02 08:51:10.122: E/AndroidRuntime(629): Caused by: java.lang.NullPointerException
05-02 08:51:10.122: E/AndroidRuntime(629):  at my.google.maps.MapsTestActivity.getDirectionData(MapsTestActivity.java:100)
05-02 08:51:10.122: E/AndroidRuntime(629):  at my.google.maps.MapsTestActivity.onCreate(MapsTestActivity.java:38)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.app.Activity.performCreate(Activity.java:4465)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-02 08:51:10.122: E/AndroidRuntime(629):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-02 08:51:10.122: E/AndroidRuntime(629):  ... 11 more
05-02 08:51:10.152: D/dalvikvm(629): GC_CONCURRENT freed 206K, 5% free 5848K/6151K, paused 5ms+4ms
05-02 08:51:10.172: W/CursorWrapperInner(629): Cursor finalized without prior close()
05-02 08:51:10.172: W/CursorWrapperInner(629): Cursor finalized without prior close()
05-02 08:51:10.472: I/dalvikvm(629): threadid=3: reacting to signal 3
05-02 08:51:10.482: I/dalvikvm(629): Wrote stack traces to '/data/anr/traces.txt'
05-02 08:51:10.702: I/dalvikvm(629): threadid=3: reacting to signal 3
05-02 08:51:10.702: I/dalvikvm(629): Wrote stack traces to '/data/anr/traces.txt'
05-02 08:51:12.482: I/Process(629): Sending signal. PID: 629 SIG: 9
05-02 09:05:07.352: I/dalvikvm(647): threadid=3: reacting to signal 3
05-02 09:05:07.372: I/dalvikvm(647): Wrote stack traces to '/data/anr/traces.txt'
05-02 09:05:07.802: I/dalvikvm(647): threadid=3: reacting to signal 3
05-02 09:05:07.832: I/dalvikvm(647): Wrote stack traces to '/data/anr/traces.txt'
05-02 09:05:07.942: D/URL(647): http://maps.google.com/maps?f=d&hl=en&saddr=52.458402,13.526616&daddr=52.523559,13.475826&ie=UTF8&0&om=0&output=kml
05-02 09:05:07.972: D/AndroidRuntime(647): Shutting down VM
05-02 09:05:07.972: W/dalvikvm(647): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-02 09:05:07.982: E/AndroidRuntime(647): FATAL EXCEPTION: main
05-02 09:05:07.982: E/AndroidRuntime(647): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.google.maps/my.google.maps.MapsTestActivity}: java.lang.NullPointerException
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.os.Looper.loop(Looper.java:137)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-02 09:05:07.982: E/AndroidRuntime(647):  at java.lang.reflect.Method.invokeNative(Native Method)
05-02 09:05:07.982: E/AndroidRuntime(647):  at java.lang.reflect.Method.invoke(Method.java:511)
05-02 09:05:07.982: E/AndroidRuntime(647):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-02 09:05:07.982: E/AndroidRuntime(647):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-02 09:05:07.982: E/AndroidRuntime(647):  at dalvik.system.NativeStart.main(Native Method)
05-02 09:05:07.982: E/AndroidRuntime(647): Caused by: java.lang.NullPointerException
05-02 09:05:07.982: E/AndroidRuntime(647):  at my.google.maps.MapsTestActivity.getDirectionData(MapsTestActivity.java:100)
05-02 09:05:07.982: E/AndroidRuntime(647):  at my.google.maps.MapsTestActivity.onCreate(MapsTestActivity.java:38)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.app.Activity.performCreate(Activity.java:4465)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-02 09:05:07.982: E/AndroidRuntime(647):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-02 09:05:07.982: E/AndroidRuntime(647):  ... 11 more
05-02 09:05:08.032: D/dalvikvm(647): GC_CONCURRENT freed 206K, 5% free 5848K/6151K, paused 4ms+7ms
05-02 09:05:08.032: W/CursorWrapperInner(647): Cursor finalized without prior close()
05-02 09:05:08.032: W/CursorWrapperInner(647): Cursor finalized without prior close()
05-02 09:05:08.302: I/dalvikvm(647): threadid=3: reacting to signal 3
05-02 09:05:08.342: I/dalvikvm(647): Wrote stack traces to '/data/anr/traces.txt'
05-02 09:05:08.632: I/dalvikvm(647): threadid=3: reacting to signal 3
05-02 09:05:08.654: I/dalvikvm(647): Wrote stack traces to '/data/anr/traces.txt' 
```

我已经用任何必要的设置检查了我的 main.xml 和 manifest.xml 以运行谷歌地图，并且我已经在我的另一个 mapactivity 程序上测试了 xml 的类似设置并且它工作正常，所以我认为我的 apikey 没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:09:45.993

如果您查看日志，您会看到：

引起：java.lang.NullPointerException 05-02 09:05:07.982: E/AndroidRuntime(647): at my.google.maps.MapsTestActivity.getDirectionData(MapsTestActivity.java:100)

所以问题是返回 NULL 的函数 getDirectionData。

# .htaccess - RewriteCond %{REQUEST_URI} -f 不识别查询字符串

> ID：10439919
> 
> 赞同：1
> 
> 时间：2012-05-03T22:01:14.147
> 
> 标签：.htaccess, mod-rewrite

当文件请求存在于服务器上时，我使用以下内容将文件请求直接传递到其相关文件：

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^. - [L,NC]

RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^. - [L,NC]

RewriteRule ^. script.php [L,QSA] 
```

这适用于标准 URL，例如：

```
/process.php
/delete.php 
```

但是当我添加一个查询字符串时，它无法匹配：

```
/process.php?testing=1 
```

匹配失败并被 script.php 处理

# javascript - raphael js 饼图移动切片

> ID：10439921
> 
> 赞同：1
> 
> 时间：2012-05-03T22:01:27.153
> 
> 标签：javascript, charts, svg, raphael

我想以这种方式使用 raphael 移动馅饼的切片 [http://dojotoolkit.org/documentation/tutorials/1.6/charting/demo/monthly-sales-moveslice.html](http://dojotoolkit.org/documentation/tutorials/1.6/charting/demo/monthly-sales-moveslice.html)。我知道如何在中心点固定的情况下缩放切片，但我试图移动切片而不是缩放它。谢谢

# python - 记录 zmq 套接字实例发送/接收？

> ID：10439924
> 
> 赞同：3
> 
> 时间：2012-05-03T22:01:39.233
> 
> 标签：python, debugging, zeromq

我正在调试一些 zeromq 代码，我想记录套接字实例发送/接收。换句话说，我有

```
context = zmq.Context()
socket = context.socket(zmq.REQ)
socket.connect("tcp://127.0.0.1:5000") 
```

我想以某种方式在代码的其他地方记录套接字实例的发送/接收。

这里有什么想法吗？我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:49:46.103

这是记录每条消息的 Socket 对象的示例：

```
导入日志
进口时间
导入zmq

类 LogSocket（对象）：
    插座 = 无
    日志 = 无
    名称 = 无

    def __init__(self, socket, log=None, name=None):
        """包装一个套接字，以便发送/recv_multipart 记录他们的消息"""
        self.socket = 套接字
        如果日志为无：
            logging.basicConfig(level=logging.INFO)
            日志 = logging.getLogger().info
        self.log = 日志

        如果名称为无：
            name = s.identity 或 repr(s)
        self.name = 名称

    def send_multipart(self, msg, *args, **kwargs):
        self.log("%s 发送: %r" % (self.name, msg))
        返回 self.socket.send_multipart(msg, *args, **kwargs)

    def recv_multipart(self, *args, **kwargs):
        msg = self.socket.recv_multipart(*args, **kwargs)
        self.log("%s 收到: %r" % (self.name, msg))
        返回消息

    def __getattr__(self, key):
        返回 getattr(self.socket, key)

ctx = zmq.Context.instance()

s = ctx.socket(zmq.REQ)
s.connect("tcp://127.0.0.1:5556")

# 在 Logging 对象中包装 zmq 套接字：
# 这个对象的接口与
s = LogSocket(s, name="REQ")

对于范围内的 i (5)：
    时间.sleep(1)
    s.send_multipart(['hello', 'world'])
    回复 = s.recv_multipart()
    # 在这种情况下，只记录 _multipart 方法，因此不直接发送/接收：
    s.send("安静")
    s.recv()

```

用于处理序列化/日志记录/身份验证等的辅助对象的一个​​示例是 IPython 中的[Session 对象](https://github.com/ipython/ipython/blob/master/IPython/zmq/session.py)，它比这个简单的情况复杂得多，但允许您将所有消息传递抽象集中在你的代码。

# fix-protocol - 消除 FIX 层以提高性能

> ID：10439925
> 
> 赞同：0
> 
> 时间：2012-05-03T22:01:47.990
> 
> 标签：fix-protocol

这有意义吗？一种为速度和弹性而设计的协议，它消除了 FIX 层以实现高性能订单执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:10:29.610

FAST 协议旨在成为 FIX 协议的“更快”版本。它需要的额外处理量意味着它只会在“在线”上更快，因此对于那些在交换时有盒子的人来说并不是很有效。@dumbcoder 像往常一样正确地认为优化和高性能机器是减少延迟的最佳方式。FIX 本身并不慢，取决于您的实现，也非常重要。卖方和高频交易的实施比对冲者和投资者使用的更便宜的实施要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:08:42.180

您是否在问交易所是否应该采用非固定协议来接收市场信息？有些已经有了替代品（例如纳斯达克的 ITCH 和 OUCH）。但是它们并没有“消除” FIX 层——它们仍然提供相同的功能，只是以不同的方式进行。

FIX 实际上不必那么慢 - 如果您将消息视为字节数组（而不是一个大字符串），然后只获取您需要的内容（对于订单接受、填充等，这可能非常几个标签），那么FIX真的没那么糟糕。

FIX 的主要卖点是它是一个行业标准。交易所可以自由开发自己的专有协议，这些协议可以提高性能，但每个人都可以写入单个协议这一事实很重要（即使它并不总是以最有效的方式实现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T08:21:48.267

另一个应该探讨的角度是协议是否有一个单独的通信通道，或者一个是作为另一个之上的包装器实现的。在 FIX 上工作绝对是一个优势，即实现保持可移植性，只需在交易所进行轻微修改。

# android - 带有意图过滤器的广播接收器？

> ID：10439927
> 
> 赞同：1
> 
> 时间：2012-05-03T22:01:52.917
> 
> 标签：android, android-intent, broadcastreceiver

她是我想要完成的：

1.  当用户尝试从任何应用程序共享一些文本（例如共享推文或链接）时，我的应用程序将出现在共享列表中。
2.  如果他选择我的应用程序，将运行一些简单的代码（例如显示 Toast），仅此而已。不需要界面或 UI。

这是我的做法：

**AndroidManifest.xml**

```
<receiver 
android:name=".MyBroadcastReceiver" >
    <intent-filter
        android:label="select my app">
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/plain" />
    </intent-filter>                
</receiver> 
```

**MyBroadcastReceiver.java**

```
public void onReceive(Context arg0, Intent arg1) {
    // TODO Auto-generated method stub
    //Some simple code
    Toast.makeText(arg0, "My Receiver is cool", Toast.LENGTH_LONG).show();
} 
```

这不起作用，我的应用程序没有显示在共享列表中。

**为什么我和`BroadcatReceivers`而不是一起工作`Activities`？**因为我不想要任何用户界面，我认为这就是我们有接收器的原因（请纠正我的问题）

我做对了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T22:29:21.083

> 这不起作用，我的应用程序没有显示在共享列表中。

`ACTION_SEND`与活动一起使用。您正在尝试使用`BroadcastReceiver`. 由于 a`BroadcastReceiver`不是一个活动，这将不起作用。

> 我做对了吗？

不。

> 如果他选择我的应用程序，将运行一些简单的代码（例如显示 Toast），仅此而已。不需要界面或 UI。

你还需要一个活动。但是，如果您提供了 Activity`Theme.NoDisplay`并且您不调用`setContentView()`，则该 Activity 将没有 UI。通常，您只需在完成您想做的任何事情后调用`finish()`from （在这种情况下，显示 a ）。`onCreate()``Toast`

例如，[此示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/Intents/FauxSender)显示了一个活动 ()，该活动 ( `FauxSender`) 设置为精确地执行您想要的操作：`ACTION_SEND`使用`Toast`. 它有另一个活动发出一个，`ACTION_SEND`所以你可以看到结果。

# android - 安卓网络服务器

> ID：10439928
> 
> 赞同：-2
> 
> 时间：2012-05-03T22:02:06.663
> 
> 标签：android, web

我目前正在为 android 构建一个应用程序，用户通过用户名和密码连接到它。

当用户连接时，服务器应该识别他是否有任何未读的消息（消息由用户上传）如果他有未读的消息，我希望所有用户通过在他的昵称附近添加一个图标来看到他有未读的消息所以每个人都会看到这个图标（添加图标或昵称是否为红色都没有关系）

我需要的是一个好的教程或一些我可以从中学习的代码示例。

任何帮助都会很棒。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:13:20.813

我建议看看

[https://developers.google.com/eclipse/docs/appengine_connected_android](https://developers.google.com/eclipse/docs/appengine_connected_android)

连接样本。它所做的关键事情是从 AccountManager API 请求帐户，因此很容易跟踪用户。（它还包括 C2DM 代码，可用于向用户推送消息，这样他们实际上不必轮询服务器来获取更新）

然后可以使用 AppEngine 创建一个基于数据库的系统，该系统可用于管理后端的消息数据。如果您更愿意使用另一个服务器环境，则连接的代码仍然是相关的，但您必须针对您选择使用的架构对其进行修改。

# xml - 在 linux 中的 xml 文件中搜索

> ID：10439929
> 
> 赞同：0
> 
> 时间：2012-05-03T22:02:10.313
> 
> 标签：xml, linux

我有几个非常大（10GB）的 xml 文件，具有以下结构。如您所见，该文件包含一系列记录。我想做的是基于一个或多个属性的搜索记录。问题是一个简单的 grep 会给我包含该属性的行。例如，grep 可能会给我第 100 行、第 300 行等等。但是，我需要的是提取相关记录元素的能力，而不仅仅是符合匹配项的行。是否有任何可以提供帮助的 unix 实用程序？

```
<records>
 <record seq="1">
  <properties>
   <property name="AssetId">1234</property>
  </properties>
 <message>messsage1</message>
</record>
<record seq="2">
 <properties>
  <property name="VI-ID">4567</property>
 </properties>
 <message>message2</message>
</record>
<records> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T22:13:12.710

[`xmlstarlet`](http://xmlstar.sf.net/)允许您从 shell 脚本运行 XPath；这是一个完美的用例。

例如：

```
xmlstarlet sel -t \
  -m '//record[properties/property[@name="AssetId"][text()="1234"]]' \
  -c . 
```

将打印 AssetId 属性为 1234 的整个记录​​。

如果您想在一次通过中进行多个匹配，这也受支持：

```
xmlstarlet sel \
  -t -m '//record[properties/property[@name="AssetId"][text()="1234"]]' \
     -c . -n -n \
  -t -m '//record[properties/property/@name="VI-ID"]' \
     -c . -n -n \
  <input.xml 
```

...此版本将打印 AssetID 为 1234 的记录，或任何`VI-ID`具有任何值的礼物的记录，并在每个记录发出后放置两个换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:06:32.560

可能最简单的方法是使用`-C`选项 to `grep`。它将在每个匹配项周围打印指定数量的行。是的，它不会完全停在记录边界上，但通常只要确保包含它就足以满足我的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:21:07.740

如果您只想使用基本的 unix 工具，这里有一个（愚蠢的）小 sed 脚本，它可以提取出一个属性，该属性要么位于一行，要么跨越多行：

```
sed -n '
/<open>[^<]*<\/open>/ {
  p
  b
}

/<open>/,/<\/open>/ {
  p
}' file.xml 
```

样本输入：

```
<open>stuff</open>
<otherTag>
otherstuff
</otherTag>
<open>
morestuff
</open>
<otherTag>astlkj</otherTag> 
```

样本输出：

```
<open>stuff</open>
<open>
morestuff
</open> 
```

不适用于生产用途：如果一个标签有多个属性，这种方法很快就会变得困难、繁琐，而且如果 xml 足够复杂，就不可能了。但它应该可以在这里和那里解析信息。

# vhdl - VHDL登录终端

> ID：10439934
> 
> 赞同：0
> 
> 时间：2012-05-03T22:03:10.463
> 
> 标签：vhdl

我是 VHDL 的初学者，我需要登录终端。例如，我有固定密码 7010。我只需要实现自动功能。我想定义一个信号，它将保持按键的计数，并且每次都会增加。

但我不知道如何初始化信号并对其进行增量，因为当我在一个进程中初始化信号时，我无法在其他进程中增加它的值。如果我不初始化那个信号，那么我的代码不起作用，我不知道为什么。例如，如果我没有向“0000”发出信号，则不会运行 doSomething。但我需要增加它在 doSomething 中的价值......对不起我的英语不好。

```
if(mySignal = "0000")
    doSomething 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:29:00.107

您正在尝试做的事情听起来像是课堂作业。

分解问题。

画出你想要的框图

在可合成的 VHDL 中，您说得对，除非信号可以是高 Z，否则不允许使用多个驱动程序。
但是没有什么可以阻止您获取信号的副本并在另一个进程中使用它。

将无符号类型用于计数器或任何具有幅度的信号，这让生活变得更轻松

```
doSomething:process(clk,mySignal
begin
    if rising_Edge(clk) then
        if mySignal = "0000" then
            count<=count+1;
        end if;
    end if;
end process; 
```

# php - 匹配字符，包括换行符和回车符

> ID：10439936
> 
> 赞同：1
> 
> 时间：2012-05-03T22:03:21.667
> 
> 标签：php, regex

我有这行特定的文本并且客户提交，并且该行在 65 个字符处自动中断，我需要修改我的正则表达式以查找更多的行、回车符或换行符**，直到第一个标点符号**，例如 . ,!,?

匹配行的示例。：

```
Snippet: It's time again for the Annual State Marching Event, This Saturday at 5pm. 
```

上面一行超过65个字符，有时候断行是这样的

```
Snippet: It's time again for the Annual State Marching Event, This 
Saturday at 5pm. 
```

显示为`Event, This\r\n` 这是我使用的正则表达式：

```
preg_match('/Snippet:(\s)?+(.*)\./i', $html_part, $matches) ? $matches[2] : ''; 
```

我试过用韩元来逃避标点符号，但没有运气。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:05:16.930

尝试`s`修改器，如下所示：

```
/Snippet:(\s)?+(.*)\./is 
```

> 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。这个修饰符等价于 Perl 的 /s 修饰符。诸如 [^a] 之类的否定类始终匹配换行符，与此修饰符的设置无关。

[来源](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

[演示](http://regexr.com?30rh5)

# html - html有序列表中的Textarea

> ID：10439938
> 
> 赞同：1
> 
> 时间：2012-05-03T22:03:33.483
> 
> 标签：html, css

每当我将 TextArea 粘贴在有序列表中的“li”标签内时，该“li”的数字出现在 TextArea 的左下角而不是左上角旁边。有什么解决办法吗？网上好像没找到。。。

例子：

```
<ol>
    <li>Coffee</li>
    <li>
        <TextArea></TextArea>
    </li>
    <li>Milk</li>
</ol> 
```

会输出类似：
![在此处输入图像描述](../Images/fefa74565d9a6ba770331be29f7ec6d9.png)
谢谢你的帮助......我真的没有勇气去css^^

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T22:08:22.637

```
textarea {
 vertical-align: top;
} 
```

[jsFiddle 示例](http://jsfiddle.net/dugnQ/)

# javascript - 如何将 JavaScript 数组发布到 MVC 3 控制器操作（由于文件下载而没有 AJAX）？

> ID：10439947
> 
> 赞同：0
> 
> 时间：2012-05-03T22:04:41.903
> 
> 标签：javascript, arrays, asp.net-mvc-3, post, download

我正在尝试做一些看起来应该很容易的事情，但我是 MVC 和基于约定的编程的新手。

我有一个 jQuery 数据表，它通过 AJAX 获取 PDF 文档的行。在 中`fnRowCallback`，我添加了复选框，以便用户可以选择多个文档进行组合以进行单个下载。当复选框被选中时，文档 ID 被添加到一个 JavaScript 数字数组中，文件名被添加到另一个数组中，以便在组合时，它们可以用于生成的 PDF 中的书签。有没有办法将这两个变量发送到控制器动作？到目前为止，我所能做的就是`JSON.stringify()`其中一个变量并使用我放在视图中的表单中的隐藏字段将其发送到控制器，然后在控制器中对其进行反序列化，但是当我尝试添加第二个变量时，我把它搞砸了。必须有一种更简单的方法，但我什至无法弄清楚复杂的方法，我读过的所有文章都使用 AJAX。不过，我不能使用 AJAX，因为您不能在响应中发回二进制文件。

**JavaScript：**

```
var aiSelectedPDFs = new Array();
var aiSelectedDocumentIDs = new Array();

$('#imgDownload').click(function () {
    $('#selectedPDFs').val(JSON.stringify(aiSelectedPDFs));
    $('#selectedDocumentIDs').val(JSON.stringify(aiSelectedDocumentIDs));
    $('#DownloadSelectedPdfs').submit();
}); 
```

**看法：**

```
<img id="imgDownload" src="@(Url.RootUrl())Content/images/icons/pdf.gif" 
    alt="Download selected documents" title="Download selected documents" />
@using (Html.BeginForm("DownloadSelectedPdfs", "Controller", FormMethod.Post, 
    new { id = "DownloadSelectedPdfs" }))
{
    <input type="hidden" id="selectedPdfs" name="jsonSelectedPdfs"/>
    <input type="hidden" id="selectedDocumentIDs" name="jsonSelectedDocumentIDs"/>
} 
```

**控制器：**

```
 [HttpPost]
    public ActionResult DownloadSelectedPdfs(string jsonSelectedDocumentIDs)
    {
        var selectedDocumentIDs = new JavaScriptSerializer().Deserialize<int[]>(
            jsonSelectedDocumentIDs);
        var invoices = new Dictionary<string, byte[]>();

        foreach (int documentID in selectedDocumentIDs)
        {
            invoices.Add(documentID.ToString(), 
                _documentService.GetDocument(documentID));
        }

        return new FileContentResult(PdfMerger.MergeFiles(invoices), 
            "application/pdf");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:28:37.800

[Kroehre](https://stackoverflow.com/users/733755/kroehre)，你的答案 90% 正确。谢谢你这么快的回复。唯一的问题是应用程序无法确定要使用的控制器操作，因此页面无法加载，我被重定向到友好的错误页面。不过，解决方案非常简单，我将把代码放在下面。

**查看**（我省略了`div`s ，因为我觉得它们用表示语义弄脏了代码，其中没有任何内容可以显示，尽管它们没有语法影响。只是个人喜好，所以不是丢失的 10% 的一部分。;-)）：

```
<img id="imgDownload" src="@(Url.RootUrl())Content/images/icons/pdf.gif" 
    alt="Download selected documents" title="Download selected documents" />
@using (Html.BeginForm("DownloadSelectedPdfs", "Controller", FormMethod.Post, 
    new { id = "DownloadSelectedPdfs" })) { } 
```

**脚本**（创建了类似的多个隐藏输入，但命名为具有属性的相同对象）：

```
var aiSelectedPDFs = new Array();
var aiSelectedDocumentIDs = new Array();

$('#imgDownload').click(function () {
    var form = $('#DownloadSelectedPdfs');
    form.html('');
    for (var i = 0; i < aiSelectedPDFs.length; i++) {
        form.append('<input type="hidden" name="selectedPDFs[' + i + '].RefNumber" 
            value="' + aiSelectedPDFs[i] + '" />');
        form.append('<input type="hidden" name="selectedPDFs[' + i + '].DocumentID" 
            value="' + aiSelectedDocumentIDs[i] + '" />');
    }
    form.submit();
}); 
```

**控制器**（添加了新类来处理多个相关的 javascript 变量）：

```
public class PDFViewModel
{
    public int RefNumber { get; set; }
    public int DocumentID { get; set; }
}

[HttpPost]
public ActionResult DownloadSelectedPdfs(List<PDFViewModel> selectedPDFs)
{
    var pdfs = new Dictionary<string, byte[]>();

    foreach (var selectedPDF in selectedPDFs)
    {
        var document = _documentService.GetDocument(selectedPDF.DocumentID);
        var tabName = string.Format("pdf_{0}", selectedPDF.RefNumber);
        pdfs.Add(tabName, document);
    }

    return new FileContentResult(PdfMerger.MergeFiles(pdfs), "application/pdf");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:45:05.533

通过为每个值指定数组名称和索引，可以通过表单传输数组。我修改了你的代码：

查看（用容器替换隐藏的输入）：

```
<img id="imgDownload" src="@(Url.RootUrl())Content/images/icons/pdf.gif" 
    alt="Download selected documents" title="Download selected documents" />
@using (Html.BeginForm("DownloadSelectedPdfs", "Controller", FormMethod.Post, 
    new { id = "DownloadSelectedPdfs" }))
{
    <div id="pdfs"></div>
    <div id="docs"></div>
} 
```

脚本（为数组中的项目添加/填充隐藏输入，而不是使用字符串化）：

```
var aiSelectedPDFs = new Array();
  var aiSelectedDocumentIDs = new Array();

  function createInputs(container, name, values){
    $(container).html('');
    for(var i = 0; i<values.length; i++){
      $(container).append('<input type="hidden" name="' + name + '[' + i + ']" value="' + values[i] + '" />');
    }    
  }

  $('#imgDownload').click(function () {
    createInputs('#pdfs', 'selectedPdfs', aiSelectedPDFs);
    createInputs('#docs', 'selectedDocumentIDs', aiSelectedDocumentIDs);
    $('#DownloadSelectedPdfs').submit();
  }); 
```

控制器（更新输入参数以与发布的数组对齐，利用 MVC3 的内置模型绑定器）：

```
[HttpPost]
    public ActionResult DownloadSelectedPdfs(List<int> selectedPdfs, List<int> selectedDocumentIDs)
    {
        var invoices = new Dictionary<string, byte[]>();

        foreach (int documentID in selectedDocumentIDs)
        {
            invoices.Add(documentID.ToString(), 
                _documentService.GetInvoice(documentID));
        }

        return new FileContentResult(PdfMerger.MergeFiles(invoices), 
            "application/pdf");
    } 
```

*注意 - 我使用`List<int>`参数而不是`int[]`因为类型必须能够在实例化后添加元素，以便模型绑定器在读取发布的值时正常运行。

# codeigniter - Codeigniter 模板库和 HMVC（mx 库）静态方法 run()

> ID：10439948
> 
> 赞同：2
> 
> 时间：2012-05-03T22:04:42.443
> 
> 标签：codeigniter, codeigniter-2, hmvc

我有这个正在使用的测试代码..我有一个名为的模块 ，`ms`另一个名为控制器代码的模块是：`test``test`

```
<?php
class Test extends MX_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->template->title($this->config->item('site_name','app'));
    }

    public function index()
    {
        $this->template->build('index');
    }
} 
```

里面的代码`ms`是：

```
<?php
//ms module
class Msrofi extends MX_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->template->title($this->config->item('site_name','app'));
    }

    public function index()
    {
        $t = Modules::run('test/test/index');
        var_dump($t);
        $this->template->build('index_message');
    }
} 
```

问题是内部的构建功能`test`试图在views文件夹而不是views文件夹中找到`index`视图文件..我检查了它，它给了我模块名称..有人知道如何解决这个问题吗？`ms``test``$this->_module``ms`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:50:50.427

由于`test`模块是在上下文中调用的，因此正在模块中`ms`寻找`$this->template->build()`视图文件`ms`。与跨模块加载模型和库的方式相同，您也必须为视图路径执行此操作：

```
class Test extends MX_Controller {

    public function index()
    {
        // This path works only from the "test" module
        // $this->template->build('index');

        // This path works from any module
        $this->template->build('test/index');
    }
} 
```

可能不得不在模块本身中显式调用模块路径有点烦人，但是跨模块依赖首先破坏了模块化的一些目标。

顺便说一句：`Modules::run()`输出未返回，但直接回显，因此您不能将其分配给变量或`print_r`/`var_dump`它而不使用输出缓冲区：

```
ob_start();
Modules::run('test/test/index');
$t = ob_get_clean();
var_dump($t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:35:48.983

你可以尝试改变module.php的run方法

下面的例子是我不得不使用的fix解决方案：</p>

1.  打开third_party/MX/Modules.php
2.  近75行可找

    $buffer = ob_get_clean();

3.  增加如下：</p>

    if($output === NULL && $buffer === ''){ $output = CI::$APP->output->get_output(); }

这个时候应该可以正常工作了……

# mysql - 运行 rake db:migrate 时出错

> ID：10439949
> 
> 赞同：0
> 
> 时间：2012-05-03T22:04:45.597
> 
> 标签：mysql, ruby-on-rails-3, vps

我正在关注 Ryan 设置 VPS 的 railscast。但我需要安装 mysql 而不是 postgresql。

当我运行 cap deploy:cold 命令时，一切似乎都运行良好，直到它运行捆绑包，尝试安装 mysql2 gem 时失败。

所以我登录到服务器并手动安装它（数据库已经设置好了）。

但是当我运行 rake db:migrate 命令时，我不断收到此错误：

```
rake aborted!
database configuration does not specify adapter

Tasks: TOP => db:migrate => db:load_config 
```

在 database.yml 文件中，我有以下内容

```
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: blog_production
  pool: 5
  username: blog
  password: *****
  host: localhost
  socket: /var/run/mysqld/mysqld.sock 
```

我已经从默认值编辑了套接字，添加和删除了主机行，并手动安装了 gem，但似乎没有任何效果！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:35:13.143

这通常发生在您的部署脚本或 VPS 上当前登录的用户尚未设置 RAILS_ENV 环境变量时。然后它默认为“开发”，并且您的 database.yml 将没有该环境的配置。所以试试

```
RAILS_ENV=production bundle exec rake db:migrate --trace 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:12:46.263

损坏的 yml 文件为我解决了这个问题。

重命名并重新创建了 database.yml 文件，它工作正常。

# jquery - 画布标签在铬中产生黑色块

> ID：10439952
> 
> 赞同：3
> 
> 时间：2012-05-03T22:05:00.563
> 
> 标签：jquery, google-chrome, canvas

这非常令人沮丧。如果我不设置画布的高度和宽度，画布画得很好，但是当我设置高度和宽度时，我会得到一个黑框。我已经将我的代码剥离到了疯狂的程度，并且找不到任何问题。canvas 标签在 FF 和 IE9 中效果很好。

```
var canvas = document.getElementById('can1');
var ctx = canvas.getContext('2d');   

canvas.width    = 280;  
canvas.height   = 270;

ctx.clearRect(0, 0, canvas.width, canvas.height); 
```

即使这会破坏谷歌浏览器中的画布。无论我画多少，如果设置了高度或宽度，它都会失败。如果我用 css 设置高度或宽度，它会产生扭曲的结果。

有任何想法吗？

更新：我发现如果我的画布足够小，它可以在 chrome 中使用。但是我需要一个 280x270 而不是 100x100 的画布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:56:36.797

可能的解决方案！对于所有动画，请使用 RequestAnimationFrame。刚刚参与了我的一个项目！

# algorithm - 网格中两点之间的路线

> ID：10439953
> 
> 赞同：2
> 
> 时间：2012-05-03T22:05:00.697
> 
> 标签：algorithm, graph, graph-algorithm

给定一个网格点，我试图找到其中两个点之间的路径。

就像在这张照片中：我需要找到黄线的点：

![在此处输入图像描述](../Images/7115c45cfc30c56e2cebabb772648016.png)

我可以使用哪些最佳方法/算法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:07:13.113

查看[A* 算法](http://en.wikipedia.org/wiki/A%2a_search_algorithm)

这是许多视频游戏中用于寻路问题的方法，并且可以构建得非常健壮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:06:52.280

Dijkstra 的算法可以是一个好的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T01:11:05.200

您还没有完全定义要如何使用对角线，因此您必须根据需要编写最终函数，我想采用使用对角线的路径最短的路径，注意从 a>c 开始的路径更短比路径 a>b>c 为路径中的 a,b,c

```
grid = [[False]*16 for i in range(16)]
#mark grid of walls

def rect(p1,p2):
    x1, y1 = p1
    x2, y2 = p2
    for x in range(x1, x2+1):
        for y in range(y1, y2+1):
            yield (x, y)

rects = [((1,2),(5,5)),
    ((5,5),(14,15)),
    ((11,5),(11,11)),
    ((5,11),(11,11)),
    ((4,7),(5,13)),
    ((5,13),(13,13))]

for p1,p2 in rects:
    for point in rect(p1,p2):
        x,y = point
        grid[x][y] = True

start = (1,2)
end = (12,13)

assert(grid[start[0]][start[1]])
assert(grid[end[0]][end[1]])

def children(parent):
    x,y = parent
    surrounding_points = ((x1,y1) for x1 in range(x-1,x+2) for y1 in range(y-1,y+2) if x1>0 and y<15)
    for x,y in surrounding_points:
        if grid[x][y]:
            #not a wall
            grid[x][y] = False
            #set as wall since we have been there already
            yield x,y

path = {}
def bfs(fringe):
    if end in fringe:
        return

    new_fringe = []
    for parent in fringe:
        for child in children(parent):
            path[child] = parent
            new_fringe.append(child)
    del fringe
    if new_fringe:
        bfs(new_fringe)

bfs([start])
def unroll_path(node):
    if node != start:
        return unroll_path(path[node]) + [node]
    else:
        return [start]

path = unroll_path(end)

def get_final_path_length(path):
    #return length of path if using straight lines
    for i in range(len(path)):
        for j in range(i+1,len(path)):
            #if straight line between pathi and pathj
            return get_final_path(path[j+1:]) + distance_between_i_and_j 
```

# firewall - 从 netfilter 接受用户空间中的数据包

> ID：10439956
> 
> 赞同：4
> 
> 时间：2012-05-03T22:05:03.303
> 
> 标签：firewall, packet, netfilter

我想捕获端口 80 上的所有 tcp 数据包，这些数据包将发送到转发地址，并将它们传递给用户空间程序进行修改。我知道如何使用 IPtables 规则来做到这一点，例如

```
iptables -A FORWARD ... -j NFQUEUE --queue-num 10 
```

但我似乎找不到任何例子，而且有时间限制，所以我不能只筛选wireshark代码。我正在寻找例子，甚至是一个开始的地方。我可以使用插座吗？或者是否有一个内核数据结构可用于将数据包从堆栈中弹出，一旦完成，如何将数据包传递回 netfilter？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T01:38:30.840

您可以编写一个内核模块来注册特定协议的排队数据包。您可以阅读 netfilter-hacking-HOWTO，第 25 页有一节“处理排队的数据包”。本节在更高层次上讨论，但回答您提出的所有问题。

下载地址：http: [//www.netfilter.org/documentation/index.html#documentation-howto](http://www.netfilter.org/documentation/index.html#documentation-howto)

您可以使用 nf_reinject() 让数据包得到进一步处理。

我不想重复本指南中的任何内容，但这应该足以开始。

# javascript - jquery 深度替换

> ID：10439957
> 
> 赞同：2
> 
> 时间：2012-05-03T22:05:07.047
> 
> 标签：javascript, jquery

这是我正在尝试做的一个过于简单的版本。

```
var usersChoice;
var object1 = {name: 'fu',  id:'123', infoArray: [1,2,3,4,5]};
var object2 = {name: 'bar', id:'456', infoArray: [9,8]};

jQuery.extend(true, usersChoice, object1); 
```

那么如果我想改变主意

```
jQuery.extend(true, usersChoice, object2); 
```

结果：

```
usersChoice = {name: 'bar', id:'456', infoArray: [9,8,***3,4,5***]}; 
```

我想要的是将旧对象完全替换为新对象。即使只是一个深度擦除函数，我也可以在扩展之前调用......

```
userChoice.nukeItFromOrbit(); 
```

作为记录，我只尝试了 userChoice = new object 或不复制但只是指向原始对象。这两种解决方案都有一个令人讨厌的趋势，即在沿线的某个点超出范围。（其中一些对象被作为“这个”传递，我怀疑是罪魁祸首）

那么如何在不重新发明深拷贝轮的情况下做到这一点呢？一直在寻找，我发现的只是重新发明轮子或被告知他们不是我必须做我正在做的事情的理由。=/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:41:46.533

嗯，我希望我没有遗漏什么（如果有，请给我留言），但为什么不只是扩展一个空对象

```
usersChoice = jQuery.extend(true, {}, object2); 
```

# python - 高效地为高密度区域创建密度图，为稀疏区域创建点

> ID：10439961
> 
> 赞同：12
> 
> 时间：2012-05-03T22:05:17.953
> 
> 标签：python, matplotlib

我需要制作一个功能类似于绘图上高密度区域的密度图的绘图，但低于某个阈值使用单个点。我在 matplotlib 缩略图库或谷歌搜索中找不到任何与我需要的代码相似的现有代码。我有一个我自己编写的工作代码，但它有点棘手，并且（更重要的是）当点/箱的数量很大时需要花费不可接受的长时间。这是代码：

```
import numpy as np
import math
import matplotlib as mpl
import matplotlib.pyplot as plt
import pylab
import numpy.random

#Create the colormap:
halfpurples = {'blue': [(0.0,1.0,1.0),(0.000001, 0.78431373834609985, 0.78431373834609985),
(0.25, 0.729411780834198, 0.729411780834198), (0.5,
0.63921570777893066, 0.63921570777893066), (0.75,
0.56078433990478516, 0.56078433990478516), (1.0, 0.49019607901573181,
0.49019607901573181)],

    'green': [(0.0,1.0,1.0),(0.000001,
    0.60392159223556519, 0.60392159223556519), (0.25,
    0.49019607901573181, 0.49019607901573181), (0.5,
    0.31764706969261169, 0.31764706969261169), (0.75,
    0.15294118225574493, 0.15294118225574493), (1.0, 0.0, 0.0)],

    'red': [(0.0,1.0,1.0),(0.000001,
    0.61960786581039429, 0.61960786581039429), (0.25,
    0.50196081399917603, 0.50196081399917603), (0.5,
    0.41568627953529358, 0.41568627953529358), (0.75,
    0.32941177487373352, 0.32941177487373352), (1.0,
    0.24705882370471954, 0.24705882370471954)]} 

halfpurplecmap = mpl.colors.LinearSegmentedColormap('halfpurples',halfpurples,256)

#Create x,y arrays of normally distributed points
npts = 1000
x = numpy.random.standard_normal(npts)
y = numpy.random.standard_normal(npts)

#Set bin numbers in both axes
nxbins = 25
nybins = 25

#Set the cutoff for resolving the individual points
minperbin = 1

#Make the density histrogram
H, yedges, xedges = np.histogram2d(y,x,bins=(nybins,nxbins))
#Reorient the axes
H =  H[::-1]

extent = [xedges[0],xedges[-1],yedges[0],yedges[-1]]

#Compute all bins where the density plot value is below (or equal to) the threshold
lowxleftedges = [[xedges[i] for j in range(len(H[:,i])) if H[j,i] <= minperbin] for i in range(len(H[0,:]))] 
lowxrightedges = [[xedges[i+1] for j in range(len(H[:,i])) if H[j,i] <= minperbin] for i in range(len(H[0,:]))] 
lowyleftedges = [[yedges[-(j+2)] for j in range(len(H[:,i])) if H[j,i] <= minperbin] for i in range(len(H[0,:]))]
lowyrightedges = [[yedges[-(j+1)] for j in range(len(H[:,i])) if H[j,i] <= minperbin] for i in range(len(H[0,:]))]

#Flatten and convert to numpy array
lowxleftedges = np.asarray([item for sublist in lowxleftedges for item in sublist])
lowxrightedges = np.asarray([item for sublist in lowxrightedges for item in sublist])
lowyleftedges = np.asarray([item for sublist in lowyleftedges for item in sublist])
lowyrightedges = np.asarray([item for sublist in lowyrightedges for item in sublist])

#Find all points that lie in these regions
lowdatax = [[x[i] for j in range(len(lowxleftedges)) if lowxleftedges[j] <= x[i] and x[i] <= lowxrightedges[j] and lowyleftedges[j] <= y[i] and y[i] <= lowyrightedges[j]] for i in range(len(x))]
lowdatay = [[y[i] for j in range(len(lowyleftedges)) if lowxleftedges[j] <= x[i] and x[i] <= lowxrightedges[j] and lowyleftedges[j] <= y[i] and y[i] <= lowyrightedges[j]] for i in range(len(y))]

#Flatten and convert into numpy array
lowdatax = np.asarray([item for sublist in lowdatax for item in sublist])
lowdatay = np.asarray([item for sublist in lowdatay for item in sublist])

#Plot
fig1 = plt.figure()
ax1 = fig1.add_subplot(111)
ax1.plot(lowdatax,lowdatay,linestyle='.',marker='o',mfc='k',mec='k')
cp1 = ax1.imshow(H,interpolation='nearest',extent=extent,cmap=halfpurplecmap,vmin=minperbin)
fig1.colorbar(cp1)

fig1.savefig('contourtest.eps') 
```

此代码生成如下所示的图像：

![计数测试](../Images/415820551097eff2b5d31d4b47fe67dc.png)

但是，当用于较大的数据集时，该程序需要几秒钟到几分钟的时间。关于如何加快速度的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T16:04:23.333

这应该这样做：

```
import matplotlib.pyplot as plt, numpy as np, numpy.random, scipy

#histogram definition
xyrange = [[-5,5],[-5,5]] # data range
bins = [100,100] # number of bins
thresh = 3  #density threshold

#data definition
N = 1e5;
xdat, ydat = np.random.normal(size=N), np.random.normal(1, 0.6, size=N)

# histogram the data
hh, locx, locy = scipy.histogram2d(xdat, ydat, range=xyrange, bins=bins)
posx = np.digitize(xdat, locx)
posy = np.digitize(ydat, locy)

#select points within the histogram
ind = (posx > 0) & (posx <= bins[0]) & (posy > 0) & (posy <= bins[1])
hhsub = hh[posx[ind] - 1, posy[ind] - 1] # values of the histogram where the points are
xdat1 = xdat[ind][hhsub < thresh] # low density points
ydat1 = ydat[ind][hhsub < thresh]
hh[hh < thresh] = np.nan # fill the areas with low density by NaNs

plt.imshow(np.flipud(hh.T),cmap='jet',extent=np.array(xyrange).flatten(), interpolation='none', origin='upper')
plt.colorbar()   
plt.plot(xdat1, ydat1, '.',color='darkblue')
plt.show() 
```

![图片](../Images/cae218ecbbfcaf7dc37a74b248011ae7.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-05T13:50:13.060

[`scipy.stats.gaussian_kde`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.gaussian_kde.html)作为记录，这是使用而不是 2D 直方图的新尝试的结果。可以根据目的设想不同的颜色网格划分和轮廓组合。

```
import numpy as np
from matplotlib import pyplot as plt
from scipy.stats import gaussian_kde

# parameters
npts = 5000         # number of sample points
bins = 100          # number of bins in density maps
threshold = 0.01    # density threshold for scatter plot

# initialize figure
fig, ax = plt.subplots()

# create a random dataset
x1, y1 = np.random.multivariate_normal([0, 0], [[1, 0], [0, 1]], npts/2).T
x2, y2 = np.random.multivariate_normal([4, 4], [[4, 0], [0, 1]], npts/2).T
x = np.hstack((x1, x2))
y = np.hstack((y1, y2))
points = np.vstack([x, y])

# perform kernel density estimate
kde = gaussian_kde(points)
z = kde(points)

# mask points above density threshold
x = np.ma.masked_where(z > threshold, x)
y = np.ma.masked_where(z > threshold, y)

# plot unmasked points
ax.scatter(x, y, c='black', marker='.')

# get bounds from axes
xmin, xmax = ax.get_xlim()
ymin, ymax = ax.get_ylim()

# prepare grid for density map
xedges = np.linspace(xmin, xmax, bins)
yedges = np.linspace(ymin, ymax, bins)
xx, yy = np.meshgrid(xedges, yedges)
gridpoints = np.array([xx.ravel(), yy.ravel()])

# compute density map
zz = np.reshape(kde(gridpoints), xx.shape)

# plot density map
im = ax.imshow(zz, cmap='CMRmap_r', interpolation='nearest',
               origin='lower', extent=[xmin, xmax, ymin, ymax])

# plot threshold contour
cs = ax.contour(xx, yy, zz, levels=[threshold], colors='black')

# show
fig.colorbar(im)
plt.show() 
```

![平滑散点图](../Images/610a8ce4647716aeaed16610c125a9e3.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T04:27:58.820

你的问题是二次的 - 对于 npts = 1000，你的数组大小达到 10^6 点，然后你用列表推导遍历这些列表。
现在，这当然是一个品味问题，但我发现列表理解可以产生一个难以理解的完整代码，而且它们有时只是稍微快一点......但这不是我的意思。
我的观点是，对于大型数组操作，您有 numpy 函数，例如：

```
np.where, np.choose etc. 
```

看到您可以使用 NumPy 实现列表推导的功能，并且您的代码应该运行得更快。

我理解正确吗，您的评论？

```
#Find all points that lie in these regions 
```

你在测试多边形内的一个点吗？如果是这样，请考虑matplotlib 内[的多边形中的点。](http://matplotlib.sourceforge.net/faq/howto_faq.html#test-whether-a-point-is-inside-a-polygon)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T15:03:22.723

在睡了一晚并阅读了 Oz123 的建议后，我想通了。诀窍是计算每个 x,y 点落入 (xi,yi) 的哪个 bin，然后测试 H[xi,yi]（实际上，在我的情况下是 H[yi,xi]）是否低于阈值。代码如下，对于大量的点运行速度非常快，而且更干净：

```
import numpy as np
import math
import matplotlib as mpl
import matplotlib.pyplot as plt
import pylab
import numpy.random

#Create the colormap:
halfpurples = {'blue': [(0.0,1.0,1.0),(0.000001, 0.78431373834609985, 0.78431373834609985),
0.25, 0.729411780834198, 0.729411780834198), (0.5,
0.63921570777893066, 0.63921570777893066), (0.75,
0.56078433990478516, 0.56078433990478516), (1.0, 0.49019607901573181,
0.49019607901573181)],

    'green': [(0.0,1.0,1.0),(0.000001,
    0.60392159223556519, 0.60392159223556519), (0.25,
    0.49019607901573181, 0.49019607901573181), (0.5,
    0.31764706969261169, 0.31764706969261169), (0.75,
    0.15294118225574493, 0.15294118225574493), (1.0, 0.0, 0.0)],

    'red': [(0.0,1.0,1.0),(0.000001,
    0.61960786581039429, 0.61960786581039429), (0.25,
    0.50196081399917603, 0.50196081399917603), (0.5,
    0.41568627953529358, 0.41568627953529358), (0.75,
    0.32941177487373352, 0.32941177487373352), (1.0,
    0.24705882370471954, 0.24705882370471954)]} 

halfpurplecmap = mpl.colors.LinearSegmentedColormap('halfpurples',halfpurples,256)

#Create x,y arrays of normally distributed points
npts = 100000
x = numpy.random.standard_normal(npts)
y = numpy.random.standard_normal(npts)

#Set bin numbers in both axes
nxbins = 100
nybins = 100

#Set the cutoff for resolving the individual points
minperbin = 1

#Make the density histrogram
H, yedges, xedges = np.histogram2d(y,x,bins=(nybins,nxbins))
#Reorient the axes
H =  H[::-1]

extent = [xedges[0],xedges[-1],yedges[0],yedges[-1]]

#Figure out which bin each x,y point is in
xbinsize = xedges[1]-xedges[0]
ybinsize = yedges[1]-yedges[0]
xi = ((x-xedges[0])/xbinsize).astype(np.integer)
yi = nybins-1-((y-yedges[0])/ybinsize).astype(np.integer)

#Subtract one from any points exactly on the right and upper edges of the region
xim1 = xi-1
yim1 = yi-1
xi = np.where(xi < nxbins,xi,xim1)
yi = np.where(yi < nybins,yi,yim1)

#Get all points with density below the threshold
lowdensityx = x[H[yi,xi] <= minperbin]
lowdensityy = y[H[yi,xi] <= minperbin]

#Plot
fig1 = plt.figure()
ax1 = fig1.add_subplot(111)
ax1.plot(lowdensityx,lowdensityy,linestyle='.',marker='o',mfc='k',mec='k',ms=3)
cp1 = ax1.imshow(H,interpolation='nearest',extent=extent,cmap=halfpurplecmap,vmin=minperbin)
fig1.colorbar(cp1)

fig1.savefig('contourtest.eps') 
```

# javascript - 正确输入文本后，图像会亮起/变化

> ID：10439963
> 
> 赞同：0
> 
> 时间：2012-05-03T22:05:32.057
> 
> 标签：javascript, jquery

我正在我的网站上建立一个语言学习部分。用户将看到单词でんき（日语单词）。当有人输入与每个符号匹配的正确文本时，其中一个会亮起。我怎么能做到这一点？

这是我网站的预览图片：http: [//imageshack.us/photo/my-images/827/hiraganaquiz2.jpg/](http://imageshack.us/photo/my-images/827/hiraganaquiz2.jpg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:12:43.933

这是一个带有普通输入字段的示例：

```
<script type="text/javascript">
var answer = 'foo';
function checkMatch(val) {
    if (val == answer) {
        alert('CORRECT!');
    }
}
</script>

<input type="text" id="word_box" value="" onkeyup="checkMatch(this.value)" /> 
```

这是非常简化的，但你明白了。每当在框或其他可编辑字段中按下键时，都会调用 onkeyup。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T22:17:19.770

HTML

```
<div class="question">
    <span data-answer="correctAnswerOne">で&lt;/span>
    <span data-answer="correctAnswerTwo">ん&lt;/span>
    <span data-answer="correctAnswerThree">き&lt;/span>
<div>
<label for="answer">Enter your Answer</label>
<input id="answer" /> 
```

Javascript

```
//Build an array of correct answers
var answerArray = "";
var i = 0;
$('.question span').each( function() {
    answerArray[i] = this.attr('data-answer');
    i++;
} );

//On key up, get user input
$('input').keyup(function(){
    $('.question span').removeClass('highlight');
    var userInput = $('#inputElementID');
    var userInputArray = string.split(' ');//Split the string into an array based on spaces (I assume you are looking for three separate words
    var answerCount = array.length;
    for (i=0;answerCount >= i;i=i+1) {
        if (userInputArray[i] == answerArray[i]) {
            $('span[data-answer=' + answerArray[i] + ']').addClass('highlight');
        }
    }
}); 
```

CSS

```
.highlight{
    background-color:yellow;   
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T22:23:21.873

这是另一个要添加到组合中的内容。简短的回答是使用 Javascript、HTML 和 CSS 来完成此任务。

[http://jsfiddle.net/BUxvx/1/](http://jsfiddle.net/BUxvx/1/)

HTML

```
<span data-answer="cat" data-for="1">Symbol 1</span>
<span data-answer="dog" data-for="2">Symbol 2</span>
<span data-answer="chicken" data-for="3">Symbol 3</span>
<br />
<input type="text" data-for="1" />
<input type="text" data-for="2" />
<input type="text" data-for="3" />
< - Type answers here
<br />
<span>cat</span>
<span>dog</span>
<span>chicken</span>​ 
```

JavaScript

```
$('input').keyup(function(){
    $txt = $(this); 
    $span = $('span[data-for="' + $txt.attr('data-for') + '"]'); 
    if($(this).val() === $span.attr('data-answer')){
        $span.addClass('highlight'); 
    }else{
        $span.removeClass('highlight');        
    }
}); ​ 
```

CSS

```
span{
 display:inline-block;
 height:75px; 
 width:75px;   
 line-height:75px;
 text-align:center;
 border:1px solid black;    
}

input{
 width:75px;    
 border:1px solid black; 
}
.highlight{
 background-color:yellow;   
}
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T22:15:42.190

这是一个简单的方法：

```
<span data-value="Car">{character that means Car}</span>
<span data-value="Boat">{character that means Boat}</span>
<span data-value="Plane">{character that means Plane}</span>
<input> 
```

```
$('input').keyup(function(){
    var val = $(this).val();
    $('[data-value]').removeClass('highlight');
    $('[data-value="'+val+'"]').addClass('highlight');
}); 
```

解释：

将`data-value`保存您角色的英文文本。当用户键入与其匹配的值时，它将将该`highlight`类添加到具有`data-value`匹配文本的所有元素中。只需将您的“点亮”风格应用于课堂。

演示：http: [//jsfiddle.net/MTVtM/](http://jsfiddle.net/MTVtM/)

要使用多个单词，只需`split`一个空格的值并检查每个部分：

```
$('input').keyup(function(){
    var val = $(this).val();
    $('[data-value]').removeClass('highlight');
    val.split(' ').forEach(function(v) {
      $('[data-value="'+v+'"]').addClass('highlight');
    });
}); 
```

演示： http: [//jsfiddle.net/MTVtM/1/](http://jsfiddle.net/MTVtM/1/)（尝试输入“Car Boat”）

# c++ - “错误数量的模板参数（2，应该是 4）”std::map 和 typedef 错误

> ID：10439967
> 
> 赞同：1
> 
> 时间：2012-05-03T22:05:57.010
> 
> 标签：c++, stdmap

嗨，我想创建一个带有 std::map 的 typedef，但编译器返回以下错误：“错误：模板参数的数量错误（2，应该是 4）”

代码：

```
typedef std::map<unsigned int, float> AcumulatorHash; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-03T22:09:46.207

既然你没有提供完整的程序，那我就得动用我的神通了。

我的水晶球说您需要在`#include <map>`源代码的开头添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T23:18:50.420

我有一个非常相似的错误。问题是分隔模板参数的句号而不是逗号。

# assembly - 学习大会和 IDA

> ID：10439969
> 
> 赞同：1
> 
> 时间：2012-05-03T22:06:17.680
> 
> 标签：assembly, ida

我正在尝试学习一些组装/拆卸。我创建了一个基本的 Hello World C EXE（带有一个简单的添加功能）并将其放入 IDA 的免费版本中。

我有点明白发生了什么事。只是为了澄清......以下是做什么的？

```
var_D8= dword ptr -0D8h
var_14= dword ptr -14h
var_8= dword ptr -8 
```

它显示了三个 DWORD 变量。什么是-0D8H？-14小时？-8？内存地址？我只是让它加 15 + 1。

对不起，我是 IDA 和大会的新手。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:17:18.287

IDA 创建特殊结构来描述当前函数的堆栈。此结构中的位置地址是返回地址的偏移量（也保存在堆栈中，并在堆栈视图窗口中称为“r”）。而这个定义是它的简单偏移。编译器将局部变量保存到堆栈中，它是堆栈上变量的表示。阅读 IDA Pro 书籍以了解有关此主题的更多详细信息。

# c# - 什么会导致 SelectedValue 控件不起作用？

> ID：10439971
> 
> 赞同：1
> 
> 时间：2012-05-03T22:06:24.527
> 
> 标签：c#, sql

我遇到了 SelectedValue 控件的问题。我首先创建了一个组合框，与之相关的是以下方法：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        SqlCeConnection cn = new SqlCeConnection(@"Data Source = \Program Files\ParkSurvey\ParkSurvey.sdf; Persist Security Info = False; Password = *");
        cn.Open();
        SqlCeCommand cmd = cn.CreateCommand();
        cmd.CommandText = "SELECT Name FROM Cities ORDER BY Name ASC";
        SqlCeDataAdapter da = new SqlCeDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        cn.Close();
        cboCities.ValueMember = "CityId";
        cboCities.DisplayMember = "Name";
        cboCities.DataSource = ds.Tables[0];
        cboCities.SelectedIndex = -1;

    } 
```

假设这是我在表单中出现的唯一代码，comboBox (cboCities) 会相应地填充。当我尝试用与该城市相关的相应公园填充第二个组合框（cboParks）时，我的问题就出现了。此方法如下所示：

```
private void cboCities_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (cboCities.SelectedIndex > -1)
        {
            SqlCeConnection cn = new SqlCeConnection(@"Data Source = \Program Files\ParkSurvey\ParkSurvey.sdf; Persist Security Info = False; Password = *");
            cn.Open();
            SqlCeCommand cmd = cn.CreateCommand();
            cmd.CommandText = "SELECT Name FROM [Parks] WHERE CityId =" + cboCities.SelectedValue + " ORDER BY Name ASC";
            SqlCeDataAdapter da = new SqlCeDataAdapter(cmd);
            DataSet ds = new DataSet();
            da.Fill(ds);
            cn.Close();
            cboParks.ValueMember = "ParkId";
            cboParks.DisplayMember = "Name";
            cboParks.DataSource = ds.Tables[0];
            cboParks.SelectedIndex = -1;
        }
    } 
```

当我加载我的移动应用程序时，第一个ComboBox不会正确地填充，实际上实际上显示：“system32.data ......”的行，以及选择其中任何一个时，我被带到运行时错误声明“解析查询时出错。[令牌行号 = 1，令牌行偏移量 = 52，错误令牌 = 数据]”。我一直相信问题本身来自此处的 SELECT 语句：

```
cmd.CommandText = "SELECT Name FROM [Parks] WHERE CityId =" + cboCities.SelectedValue + " ORDER BY Name ASC"; 
```

当我将 cboCities.SelectedValue 更改为 cboCities.SelectedItem 时，组合框 cboParks 会适当地填充减去过滤（它会带回所有数据）。我也可以将其更改为简单的 CityId（用于测试目的）并且 SELECT 语句有效。

我也尝试将其参数化，但遇到了一个完全不同的错误：“不存在从 DbType System.Data.DataRowView 到已知 SqlCeType 的映射。”

```
 cmd.CommandText = "SELECT Name FROM [Parks] WHERE CityId = @CityId ORDER BY Name ASC";
            cmd.Parameters.AddWithValue("@CityId", cboCities.SelectedValue); 
```

基本上，是什么导致 SelectedValue 不起作用并带回第一种方法的适当 CityId ValueMember？我正在拔头发试图弄清楚这一点。另外，如果有人有另一种将选定数据绑定到组合框的方法，请分享！我是 C# 世界的新手，因此非常感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:29:45.233

从[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx)，

`The SelectedValue return the value of the member of the data source specified by the **ValueMember** property.`

您将字段 CityID 指定为 ValueMember，但在您的查询中此字段不存在。
因此 SelectedValue 返回对象的 ToString() 方法的结果。这恰好是一个 System.Data.DataRowView。

我认为您只需将该字段添加到查询中即可解决您的问题

所以以这种方式更改您的代码

```
using(SqlCeConnection cn = new SqlCeConnection(@"Data Source = \Program Files\ParkSurvey\ParkSurvey.sdf; Persist Security Info = False; Password = *"))
{
    cn.Open(); 
    SqlCeCommand cmd = cn.CreateCommand(); 
    cmd.CommandText = "SELECT CityID, Name FROM Cities ORDER BY Name ASC"; 
    SqlCeDataAdapter da = new SqlCeDataAdapter(cmd); 
    DataSet ds = new DataSet(); 
    da.Fill(ds); 
}        
.... 
```

那么您将能够在第二个查询中使用参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:36:24.393

填充组合框的选择语句是错误的

```
 cmd.CommandText = "SELECT Name FROM Cities ORDER BY Name ASC"; 
```

应该

```
cmd.CommandText = "SELECT Name, CityID FROM Cities ORDER BY Name ASC"; 
```

# mod-rewrite - 整洁的 URL、查询字符串和强制类型未按预期工作

> ID：10439978
> 
> 赞同：0
> 
> 时间：2012-05-03T22:06:59.153
> 
> 标签：mod-rewrite

我试图让我的网站网址“整洁”，但无法弄清楚查询字符串

例如，我想要：

```
services.php?service=3 
```

成为

```
services/3 
```

我的服务页面中有相应的代码来获取该项目

```
$loc = explode("/",$HTTP_SERVER_VARS["REQUEST_URI"]);
$service = $loc[count($loc)-1]; 
```

并且 htaccess 设置为对 .php 文件以及

```
<FilesMatch "^services$">
    ForceType application/x-httpd-php
</FilesMatch>

but "services/3" gets a 404 error. 
```

正在使用的重写规则是：

```
RewriteCond %{REQUEST_URI} !(\.[^./]+)$   
RewriteCond %{REQUEST_FILENAME} !-d   
RewriteCond %{REQUEST_FILENAME} !-f   
RewriteRule (.*) /$1.php [L]   
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^.]+\.)+php\ HTTP   
RewriteRule ^(.+)\.php$ /$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:12:09.400

为什么不使用：

```
RewriteEngine on
RewriteRule ^services/([0-9]+)(/)?$ services.php?service=$1 
```

# excel - Excel Vlookup 与 sum 或 countif 结合的多个值

> ID：10439979
> 
> 赞同：1
> 
> 时间：2012-05-03T22:07:00.970
> 
> 标签：excel, vlookup, array-formulas

我有 4 列代码，另一个表基本上说代码属于“组”。像这样：

```
c1 c2 c3 c4
1  0  2  3
2  3  4  5 
3  4  2  0 
```

第二张表是

> 代码组
> 1 a
> 2 a
> 3 a
> 4 b
> 5 b

我想在 C4 旁边添加一列，它将汇总或计算属于 a 组的所有值。我试着做

```
{=sum(if(vlookup({1,0,2,3},code:group,2,false)="a",1,0))} 
```

但它不起作用（1,0,2,3 只是为了模拟从表 1 中选择第一行数据）。

任何想法我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:11:24.817

假设您有两个命名范围`Code`，并`Group`在第一行尝试这个 array* 公式并填写：

`=SUM(--(IFERROR(LOOKUP(A1:D1,Code,Group)="a",0)))`

*通过按`Ctrl`+ `Shift`+提交公式`Enter`

# python - python日志记录是否在它自己的线程中运行？

> ID：10439983
> 
> 赞同：1
> 
> 时间：2012-05-03T22:07:22.250
> 
> 标签：python, multithreading, logging

我发现记录 I/O 是我们程序的性能瓶颈，所以我正在考虑将所有记录 I/O 移动到单独的线程。问题是我真的不知道python日志模块中发生了什么，而且我不想在python日志模块已经为我做的事情上浪费一天的时间，否则会浪费时间出于任何其他原因。我已经阅读了[Python 日志记录文档](http://docs.python.org/library/logging.html)，并且我发现对线程的唯一引用是指从多线程应用程序的不同线程访问记录器。

python 日志记录模块是否创建一个单独的线程来处理 I/O？如果没有，是否值得我花时间创建一个单独的线程来处理日志记录 I/O？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:23:20.953

不，它没有。您可以在[来源](http://hg.python.org/cpython/file/tip/Lib/logging/__init__.py)中自行检查。

您可能可以`Logger`使用 a 编写自己的线程类来`Queue`对新日志记录进行排队。但是你应该看看关于当前线程的信息是如何在`LogRecord`类中生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T22:06:26.547

正如 mata 所说，python 日志记录不会在自己的线程中运行。但是，与 3.2 一样，它确实提供了一些工具，可以轻松地让处理程序在自己的线程 QueueHandler 和 QueueListener 中运行。[查看http://docs.python.org/3.3/howto/logging-cookbook.html#dealing-with-handlers-that-block](http://docs.python.org/3.3/howto/logging-cookbook.html#dealing-with-handlers-that-block)的日志记录手册的“处理阻塞的处理程序”部分

# c++ - boost/archive/binary_woarchive.hpp 和/或 boost/archive/binary_wiarchive.hpp 的序列化示例？

> ID：10439984
> 
> 赞同：3
> 
> 时间：2012-05-03T22:07:25.033
> 
> 标签：c++, linker-errors, boost-serialization, wofstream

我试图找到一个很好的例子来说明如何使用这些二进制宽字符版本的 boost 的序列化内容。我拼凑了一些代码来尝试让它工作，但不幸的是，在尝试编译它时，我被链接器错误轰炸了。

这是我的代码，以防我做任何明显错误的事情：

```
 #include <cstdlib>
    #include <iostream>
    #include <fstream>
    #include <string>
    #include <vector>

    #include <boost/archive/binary_woarchive.hpp>
    #include <boost/archive/binary_wiarchive.hpp>

    class testClass
    {
    public:
        testClass()
        {
        }
        testClass(const int intInput, const std::wstring stringInput, const float floatInput01, const float floatInput02)
        {
            ourString = stringInput;
            testInt = intInput;
            testFloat01 = floatInput01;
            testFloat02 = floatInput02;
        }
        ~testClass()
        {}

        int testInt;
        std::wstring ourString;
        float testFloat01;
        float testFloat02;

        int ReturnTestInt()
        {
            return testInt;
        }

        float RandomStuff()
        {
            float alpha01 = 26.9;
            alpha01 /= 2;
            return alpha01;
        }

    private:
        friend class boost::serialization::access;
        template<class Archive>
        void serialize(Archive &ar, const unsigned int version)
        {
            ar &testInt;
            ar &ourString;
            ar &testFloat01;
            ar &testFloat02;
        }
    };

    int main()
    {
        std::vector<const testClass> objectStorage;

        objectStorage.push_back(testClass(1, L"test\0", 9.14f, 6.662f));
        objectStorage.push_back(testClass(2, L"temp\0", 0.29f, 3.331f));
        objectStorage.push_back(testClass(3, L"then\0", 2.47f, 8.888f));

        testClass testReceivedObject;
        std::ifstream::pos_type size;

        std::wofstream myFile;
        boost::archive::binary_woarchive outputArchive(myFile);
        myFile.open("Example.dat", std::ios::out | std::ios::binary);

        if(myFile.is_open() && myFile.good())
        {
            std::cout<<"File opening successfully completed."<<std::endl;
            unsigned int storageSize = objectStorage.size();

            myFile.write(reinterpret_cast<wchar_t*>(&storageSize), (sizeof(unsigned int)));

            for(int i = 0; i < objectStorage.size(); i++)
            {
                outputArchive<<objectStorage[i];
            }
            /*
            myFile.write(reinterpret_cast<char*>(&objectStorage[0]), (sizeof(testClass)));
            myFile.write(reinterpret_cast<char*>(&objectStorage[1]), (sizeof(testClass)));
            myFile.write(reinterpret_cast<char*>(&objectStorage[2]), (sizeof(testClass)));
        */
        }
        else
        {
            std::cout<<"File opening NOT successfully completed."<<std::endl;
        }
        myFile.close();

        std::wifstream myFileInput;
        boost::archive::binary_wiarchive inputArchive(myFileInput);
        myFileInput.open("Example.dat", std::ios::in | std::ios::binary | std::ios::ate);

        if(myFileInput.is_open() && myFileInput.good())
        {
            std::cout<<"File opening successfully completed.  Again."<<std::endl;

            std::cout<<"READ:"<<std::endl;
            size = myFileInput.tellg();
            unsigned int numberOfObjects = 0;
            myFileInput.seekg(0, std::ios::beg);            
myFileInput.read(reinterpret_cast<wchar_t *>(&numberOfObjects), sizeof(unsigned int));
            for(int i = 0; i < numberOfObjects; i++)
            {
                objectStorage.resize(objectStorage.size()+1);
                inputArchive>>objectStorage[i];
                //myFileInput.read(reinterpret_cast<wchar_t *>(&objectStorage[i])/*(&testReceivedObject)*/, sizeof(testClass));
            }
            std::cout<<std::endl<<"END."<<std::endl;
        }
        else
        {
            std::cout<<"Something has gone disasterously wrong."<<std::endl;
        }
        myFileInput.close();

        for(int i = 0; i < objectStorage.size(); i++)
        {
            std::wcout<<objectStorage[i].ourString<<std::endl;
        }
        return 0;
    } 
```

以下是错误：

```
1>main.obj : error LNK2019: unresolved external symbol "protected: __thiscall boost::archive::basic_binary_oprimitive<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::~basic_binary_oprimitive<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >(void)" (??1?$basic_binary_oprimitive@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAE@XZ) referenced in function "public: __thiscall boost::archive::binary_oarchive_impl<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::~binary_oarchive_impl<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >(void)" (??1?$binary_oarchive_impl@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@QAE@XZ)
1>main.obj : error LNK2019: unresolved external symbol "protected: __thiscall boost::archive::basic_binary_iprimitive<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::~basic_binary_iprimitive<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >(void)" (??1?$basic_binary_iprimitive@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAE@XZ) referenced in function "public: __thiscall boost::archive::binary_iarchive_impl<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::~binary_iarchive_impl<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >(void)" (??1?$binary_iarchive_impl@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@QAE@XZ)
1>main.obj : error LNK2019: unresolved external symbol "protected: __thiscall boost::archive::basic_binary_oprimitive<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::basic_binary_oprimitive<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >(class std::basic_streambuf<wchar_t,struct std::char_traits<wchar_t> > &,bool)" (??0?$basic_binary_oprimitive@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAE@AAV?$basic_streambuf@_WU?$char_traits@_W@std@@@std@@_N@Z) referenced in function "protected: __thiscall boost::archive::binary_oarchive_impl<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::binary_oarchive_impl<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >(class std::basic_ostream<wchar_t,struct std::char_traits<wchar_t> > &,unsigned int)" (??0?$binary_oarchive_impl@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAE@AAV?$basic_ostream@_WU?$char_traits@_W@std@@@std@@I@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: __thiscall boost::archive::basic_binary_iprimitive<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::basic_binary_iprimitive<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >(class std::basic_streambuf<wchar_t,struct std::char_traits<wchar_t> > &,bool)" (??0?$basic_binary_iprimitive@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAE@AAV?$basic_streambuf@_WU?$char_traits@_W@std@@@std@@_N@Z) referenced in function "protected: __thiscall boost::archive::binary_iarchive_impl<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::binary_iarchive_impl<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >(class std::basic_istream<wchar_t,struct std::char_traits<wchar_t> > &,unsigned int)" (??0?$binary_iarchive_impl@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAE@AAV?$basic_istream@_WU?$char_traits@_W@std@@@std@@I@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: void __thiscall boost::archive::basic_binary_oprimitive<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::init(void)" (?init@?$basic_binary_oprimitive@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXXZ) referenced in function "protected: void __thiscall boost::archive::binary_oarchive_impl<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::init(unsigned int)" (?init@?$binary_oarchive_impl@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXI@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: void __thiscall boost::archive::basic_binary_oarchive<class boost::archive::binary_woarchive>::init(void)" (?init@?$basic_binary_oarchive@Vbinary_woarchive@archive@boost@@@archive@boost@@IAEXXZ) referenced in function "protected: void __thiscall boost::archive::binary_oarchive_impl<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::init(unsigned int)" (?init@?$binary_oarchive_impl@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXI@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: void __thiscall boost::archive::basic_binary_iprimitive<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::init(void)" (?init@?$basic_binary_iprimitive@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXXZ) referenced in function "protected: void __thiscall boost::archive::binary_iarchive_impl<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::init(unsigned int)" (?init@?$binary_iarchive_impl@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXI@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: void __thiscall boost::archive::basic_binary_iarchive<class boost::archive::binary_wiarchive>::init(void)" (?init@?$basic_binary_iarchive@Vbinary_wiarchive@archive@boost@@@archive@boost@@IAEXXZ) referenced in function "protected: void __thiscall boost::archive::binary_iarchive_impl<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::init(unsigned int)" (?init@?$binary_iarchive_impl@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXI@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: void __thiscall boost::archive::basic_binary_iarchive<class boost::archive::binary_wiarchive>::load_override(struct boost::archive::class_name_type &,int)" (?load_override@?$basic_binary_iarchive@Vbinary_wiarchive@archive@boost@@@archive@boost@@IAEXAAUclass_name_type@23@H@Z) referenced in function "protected: void __thiscall boost::archive::binary_iarchive_impl<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::load_override<struct boost::archive::class_name_type>(struct boost::archive::class_name_type &,int)" (??$load_override@Uclass_name_type@archive@boost@@@?$binary_iarchive_impl@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXAAUclass_name_type@12@H@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: void __thiscall boost::archive::basic_binary_oprimitive<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::save(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?save@?$basic_binary_oprimitive@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: static void __cdecl boost::archive::save_access::save_primitive<class boost::archive::binary_woarchive,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(class boost::archive::binary_woarchive &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (??$save_primitive@Vbinary_woarchive@archive@boost@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@save_access@archive@boost@@SAXAAVbinary_woarchive@12@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: void __thiscall boost::archive::basic_binary_oprimitive<class boost::archive::binary_woarchive,wchar_t,struct std::char_traits<wchar_t> >::save(class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > const &)" (?save@?$basic_binary_oprimitive@Vbinary_woarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXABV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@Z) referenced in function "public: static void __cdecl boost::archive::save_access::save_primitive<class boost::archive::binary_woarchive,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > >(class boost::archive::binary_woarchive &,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > const &)" (??$save_primitive@Vbinary_woarchive@archive@boost@@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@save_access@archive@boost@@SAXAAVbinary_woarchive@12@ABV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@Z)
1>main.obj : error LNK2019: unresolved external symbol "protected: void __thiscall boost::archive::basic_binary_iprimitive<class boost::archive::binary_wiarchive,wchar_t,struct std::char_traits<wchar_t> >::load(class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &)" (?load@?$basic_binary_iprimitive@Vbinary_wiarchive@archive@boost@@_WU?$char_traits@_W@std@@@archive@boost@@IAEXAAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@Z) referenced in function "public: static void __cdecl boost::archive::load_access::load_primitive<class boost::archive::binary_wiarchive,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > >(class boost::archive::binary_wiarchive &,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &)" (??$load_primitive@Vbinary_wiarchive@archive@boost@@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@load_access@archive@boost@@SAXAAVbinary_wiarchive@12@AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@Z) 
```

我们将不胜感激有关了解问题所在以及如何解决问题的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:05:12.350

事实证明，`boost/archive/binary_woarchive.hpp`并且`boost/archive/binary_wiarchive.hpp`是多余的。

相反`boost/archive/binary_oarchive.hpp`，`boost/archive/binary_iarchive.hpp`即使对于包含宽字符变量的类实例也能正常工作！

我希望这些信息对某人有所帮助。

# jquery - jQuery 代码看起来很糟糕，最好的写法是什么？

> ID：10439986
> 
> 赞同：0
> 
> 时间：2012-05-03T22:07:39.673
> 
> 标签：jquery

我在使用 iOS 和滑动菜单时遇到了一个奇怪的问题（可以在 [Weird iOS animation, display with jQuery?](https://stackoverflow.com/questions/10431268/weird-ios-animation-display-with-jquery)中找到）

我相信我的邋遢代码和另一个插件存在冲突（在另一个版本的网站上，滑动菜单与插件一起使用，但我不能使用该代码）。

```
$('#menu-item-134 a').click(function(e) {
    e.preventDefault();
    var elm = $('.open'+$(e.target).parent().attr('id').replace('link', ''));

    $('.subnav').not(elm).filter(':visible').animate({width: 'toggle'}, 1000);

    elm.animate({width: 'toggle'}, 1000);
});

$('#menu-item-135 a').click(function(e) {
    e.preventDefault();
    var elm = $('.open'+$(e.target).parent().attr('id').replace('link', ''));

    $('.subnav').not(elm).filter(':visible').animate({width: 'toggle'}, 1000);

    elm.animate({width: 'toggle'}, 1000);
});​ 
```

可以在这个 JSfiddle 上找到脚本的缩短版本

[http://jsfiddle.net/pxd8z/2/](http://jsfiddle.net/pxd8z/2/)

基本上，编写该脚本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:16:25.807

您可以同时选择两个链接：http: [//jsfiddle.net/pxd8z/3/](http://jsfiddle.net/pxd8z/3/)

```
$('#menu-item-134 a, #menu-item-135 a').click(function(e) {
    e.preventDefault();
    var elm = $('.open'+$(e.target).parent().attr('id').replace('link', ''));

    $('.subnav').not(elm).filter(':visible').animate({width: 'toggle'}, 1000);

    elm.animate({width: 'toggle'}, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:26:41.303

我会使用这样的代码

```
$('.menu-item a').click(function(e) {
    e.preventDefault();
    var elm = $('#open'+e.target.parentNode.id);

    $('.subnav:visible').not(elm).animate({width: "toggle"}, 1000);

    elm.animate({width: "toggle"}, 1000);
});​ 
```

使用这个 html：

```
<div class="menu-item" id="menu-item-134">
    <a href="#" >
        link1
    </a>
</div>

<div class="menu-item" id="menu-item-135">
    <a href="#" >
        link2
    </a>
</div>

<div class="subnav" id="openmenu-item-134">
    box1
</div>

<div class="subnav" id="openmenu-item-135">
    box2
</div> 
```

​</p>

Jsfiddle 在[http://jsfiddle.net/pbfy0/3qtYm/](http://jsfiddle.net/pbfy0/3qtYm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:27:37.030

更简洁一点：http: [//jsfiddle.net/pxd8z/4/](http://jsfiddle.net/pxd8z/4/)

```
$('#menu-item-134 a, #menu-item-135 a').click(function(e) {
    e.preventDefault();
    var elm = $('.open'+$(e.target).parent().attr('id').replace('link', ''));

    $('.subnav:not(' + elm.selector + '):visible').animate({width: 'toggle'}, 1000);

    elm.animate({width: 'toggle'}, 1000);
}); 
```

# node.js - nodejs express 未知方法渲染

> ID：10439989
> 
> 赞同：0
> 
> 时间：2012-05-03T22:08:09.297
> 
> 标签：node.js, express

创建一个普通的香草快递应用程序后，我有这个默认的 app.js：

```
var express = require('express');
var app = module.exports = express.createServer();

// Configuration
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'your secret here' }));
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Routes
app.get('/', function(req, res) {
  res.render('index', { title: 'Foo' }) // 34:7 is the .render
});

app.listen(3000, function(){
  console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env);
}); 
```

但是我不断收到这个堆栈跟踪：

```
500 SyntaxError: Unexpected identifier
...
at C:\Users\...\app.js:34:7 
```

就在'/'路由的渲染方法之前

layout.jade 看起来像这样：

```
!!!
html(lang='de')
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    link(rel='shortcut icon' type='image/png' href='/images/favicon.png')
    script(src='/javascripts/jquery-1.7.1.min.js' type='text/javascript' charset='utf-8')
  #header!= partial('header.jade')
  body!= body
  #footer!= partial('footer.jade') 
```

index.jade 看起来像这样：

```
#body

  #nav
    a(href='/login') anmelden 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T01:11:48.477

Try change this:

```
link(rel='shortcut icon' type='image/png' href='/images/favicon.png')
script(src='/javascripts/jquery-1.7.1.min.js' type='text/javascript' charset='utf-8') 
```

to this:

```
link(rel='shortcut icon', type='image/png', href='/images/favicon.png')
script(src='/javascripts/jquery-1.7.1.min.js', type='text/javascript', charset='utf-8') 
```

Look the commas!

# ninject - 连接字符串注入

> ID：10439992
> 
> 赞同：1
> 
> 时间：2012-05-03T22:08:21.697
> 
> 标签：ninject

我正在尝试学习 Ninject，并从我认为非常简单的事情开始。不能让它工作。显然，我缺少一些基本的东西。

所以，我有这个小控制台应用程序，它在某个端口上侦听 WCF 调用，并将通过 WCF 传入的数据保存到数据库中。解决方案中有 3 个项目：1\. 数据访问库，2\. WCF 东西和 3\. 充当主机的控制台。Ninject 尚未使用。所以项目之间的依赖是这样的：3 -> 2 -> 1

我想首先将控制台主机从其配置中获取的连接字符串注入数据访问库。谷歌搜索连接字符串的注入带来了一些例子，但它们并不完整。

建议在主机的 Main() 中绑定的示例之一，如下所示：

```
static void Main(string[] args)
{
    new StandardKernel().Bind<ConnectionStringProvider>().ToConstant(
    new ConnectionStringProvider { ConnectionString = Config.ConnectionString });
} 
```

其中 ConnectionStrinProvider 是一个简单的类，它只包含一个属性 ConnectionString。我想不通的是如何在数据访问库中实例化 ConnectionStrinProvider。我试过了

```
var csprovider = new StandardKernel().Get<ConnectionStringProvider>(); 
```

它不起作用 - 这意味着它返回提供者的新实例，而不是在绑定期间创建的实例。我还尝试将 .InSingletonScope() 添加到绑定中，结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:16:52.170

您需要保留对您设置的内核的引用。如果每次都实例化它是行不通的。

```
public static IKernel Ninject {get; private set;}
static void Main(string[] args)
{
    Ninject =  new StandardKernel()
    Ninject.Bind<ConnectionStringProvider>().ToConstant(
    new ConnectionStringProvider { ConnectionString = Config.ConnectionString });
} 
```

在消费者方面，您可以调用`Ninject`main 上的静态属性。

除了明显的注意事项：这是示例代码，在生产代码中，您可能希望为该全局静态变量做出更好的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:11:58.567

内核为您跟踪所有绑定。但是，您每次都在创建一个新实例。那是行不通的。相反，创建内核，然后将其存储（这里我将其存储在局部变量中，但您可能希望将其存储在某个类的字段中）：

```
var connectionStringProvider = new ConnectionStringProvider { ConnectionString = Config.ConnectionString };
var kernel = new StandardKernel().Bind<ConnectionStringProvider>().ToConstant(connectionStringProvider); 
```

现在通过访问现有内核来获取实例。

```
var csprovider = kernel.Get<ConnectionStringProvider>(); 
```

话虽如此，以这种方式使用它是错误的方式，因为这种模式被称为服务定位器模式，它是依赖注入的对立面。一般来说，你有一个通过获取或通过注入的顶级类（例如，具有该`Main`方法的应用程序类），所有其他依赖项通常通过构造函数或'ed 属性注入。`Kernel.Get``Kernel.Inject``[Inject]`

此外，大多数情况下[通常都有可用的插件](http://www.ninject.org/extensions.html)，因此您不必自己实例化内核。但是，我不知道有一个控制台应用程序。

# php - 在 php.ini 文件中有 '2M' 我期望一个数字 - 这是什么意思？

> ID：10439998
> 
> 赞同：0
> 
> 时间：2012-05-03T22:08:52.013
> 
> 标签：php

我的雇主需要更改一些 PHP 文件，这导致我需要查看我以前从未做过的“php.ini”文件。我关心的线路是：

`upload_max_filesize = 2M`

“2M”是指200万吗？如果不是，那是什么意思？我不需要改变它，我只需要知道它代表什么数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:09:54.797

2 兆字节。我不知道那是 2^20 字节还是 10^6 字节，但这并没有太大的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T22:15:23.270

2M=2*2^10 字节。这是 PHP 定义的 UPLOAD 的默认 MAX SIZE ，可以更改为您喜欢的任何数字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T22:15:52.703

这是一个 PHP 速记字节值。[您可以从http://www.php.net/manual/en/faq.using.php#faq.using.shorthandbytes](http://www.php.net/manual/en/faq.using.php#faq.using.shorthandbytes)了解更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T22:16:24.143

2M 为 2 兆字节 (2*1024*1024)

你可以在[这里](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)和[这里阅读](http://www.php.net/manual/en/faq.using.php#faq.using.shorthandbytes)

# c - Linux 设备保持打开状态

> ID：10439999
> 
> 赞同：0
> 
> 时间：2012-05-03T22:08:58.407
> 
> 标签：c, linux

我在单板计算机上调试，我发现我从来没有在我的程序中关闭过 ttyUSB。现在程序将无法通过 open() 函数。如何手动关闭线路，或强制打开？我不希望关闭计算机，USB 设备必须保留在 SBC 中。

我遇到问题的具体线路是：

```
gpso = open(GPSDEVICE, O_RDWR | O_NOCTTY); //gps device is the directory name of the device (ttyUSB0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:22:02.620

在进程终止时，内核会自动关闭所有文件句柄。

如果设备仍处于打开状态，则表示该进程仍在运行。杀了它。