# StackOverflow 问答 10293000-10293999

# jquery - 如何使用 jQuery 将文本附加到文本框值？

> ID：10293001
> 
> 赞同：7
> 
> 时间：2012-04-24T06:47:33.383
> 
> 标签：jquery, validation

我需要将 - 附加到当前文本框值而不替换当前文本。我尝试使用此代码。

```
if(len.length==4){
     $("-").appendTo("#date").val();
} 
```

但它失败了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T06:59:22.240

尽管您得到了几个（但不是全部）正确答案，但我想展示另一种方法：

```
$('#date').val(function(index, value) {
    return value + '-';
});​ 
```

`.val( function(index, value) )`

> function(index, value)返回要设置的值的函数。这是当前元素。接收集合中元素的索引位置和旧值作为参数。

[来源](http://api.jquery.com/val/#val2)

如果您不想使用`function`它，请使用：

```
var $date = $('#date');
$date.val($date.val() + '-'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T06:54:37.063

您必须检索当前值，*并将其附加到*.

```
var $date = $('#date');
$date.val($date.val() + '-'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T06:51:30.447

尝试：

```
$('#date').val($('#date').val() + '-'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T06:56:06.620

我发现的最优雅的方式包括不使用 jQuery。

```
if ( len.length === 4 ) {
    var date = $( '#date' )[0] // faster to write than "document.getElementById( 'date' )"
    date.value += '-'
} 
```

小提琴：http: [//jsfiddle.net/Ralt/T9mUT/3/](http://jsfiddle.net/Ralt/T9mUT/3/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-24T06:57:36.170

```
jQuery('#date').val(jQuery('#date').val() + '-'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-03T15:48:23.763

我只是在做这个。我用了 .append(myValue); 在这里，我正在循环一个 Ajax 结果集：

```
 $.each(result, function (i, obj) {
            $.each(obj, function (i, item) {
                $('#txtValueList').append(item);
            })
        }) 
```

# jquery - 使用 jquery 为跳过的必填字段着色

> ID：10293002
> 
> 赞同：0
> 
> 时间：2012-04-24T06:47:34.603
> 
> 标签：jquery, css

我有一个带有几个必填字段的 aspx 表单。我对所有这些字段都应用了相同的样式`txtbxrequired`。我想将所有跳过的必填字段涂成黄色。如何实现。下面是我正在使用的代码，但它甚至为填充的字段着色：

```
if ($(".txtbxrequired").val() == "") {
    $(".txtbxrequired").css("background-color", "yellow");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T06:50:22.230

```
$('.txtbxrequired').filter(function() {
    return !$(this).val();
}).css('background-color', 'yellow');​ 
```

[http://jsfiddle.net/zerkms/FAs6W/](http://jsfiddle.net/zerkms/FAs6W/)

您的代码不起作用，因为您明确地将黄色设置为*所有*具有 class 的元素`txtbxrequired`。

我的代码所做的是 - 选择所有具有`txtbxrequired`类的元素，然后只过滤没有任何值的元素，并为它们设置背景颜色

# windows - 如何在 Win8 上使用 Metro 风格应用程序通过 WinRT 访问 FMRadio 模块

> ID：10293004
> 
> 赞同：0
> 
> 时间：2012-04-24T06:47:49.887
> 
> 标签：windows, windows-runtime

我想在 ARM 平台上使用 FMRadio 实现 Metro 风格的应用程序，但我不清楚我可以使用哪个 WinRT API。（我的 FMRadio 是一个板载模块而不是加密狗。）

在 windows phone 上，有一个名为“FMRadio 类”的类，它作为设备收音机的控制器。

WinRT 是否支持 Windows Phone 上的“FMRadio 类”之类的 FMRadio？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:10:20.623

似乎没有专门为无线电量身定制的 API，如果没有兼容设备，并且目前没有在 ARM 上运行的 Windows 8 版本，很难判断，但也许这些文章包含一些通用 API，可以将来会用于那个吗？ [Windows.Media.Devices](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.devices.aspx)、[DeviceInformation.Properties](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.properties.aspx)、[Windows.Devices.Enumeration](http://msdn.microsoft.com/en-us/library/windows/apps/br225459.aspx)。

# zend-framework - Zend_Acl，角色和权限存储在数据库中

> ID：10293007
> 
> 赞同：5
> 
> 时间：2012-04-24T06:48:10.273
> 
> 标签：zend-framework, acl, zend-acl

我想为我的应用程序构建一个具有以下要求的 ACL 系统。

1.  用户将被分配一个或多个角色。（管理员、员工）等
2.  角色将具有权限。（Send_Invoices、Send_mail、Delete_Invoices、Send_Estimate）等。
3.  除了继承的角色之外，用户还将被分配自定义权限。

我的 ACL 数据库结构如下

```
role:
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| id       | int(11)     | NO   | PRI | NULL    | auto_increment |
| roleName | varchar(50) | NO   | UNI | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
permission:
+----------------+-------------+------+-----+---------+----------------+
| Field          | Type        | Null | Key | Default | Extra          |
+----------------+-------------+------+-----+---------+----------------+
| id             | int(11)     | NO   | PRI | NULL    | auto_increment |
| permissionName | varchar(50) | NO   |     | NULL    |                |
| permissionKey  | varchar(50) | NO   | UNI | NULL    |                |
+----------------+-------------+------+-----+---------+----------------+
role_permission
+---------------+---------+------+-----+---------+----------------+
| Field         | Type    | Null | Key | Default | Extra          |
+---------------+---------+------+-----+---------+----------------+
| id            | int(11) | NO   | PRI | NULL    | auto_increment |
| role_id       | int(11) | NO   | MUL | NULL    |                |
| permission_id | int(11) | NO   |     | NULL    |                |
+---------------+---------+------+-----+---------+----------------+
user_role
+---------------+---------+------+-----+---------+----------------+
| Field         | Type    | Null | Key | Default | Extra          |
+---------------+---------+------+-----+---------+----------------+
| id            | int(11) | NO   | PRI | NULL    | auto_increment |
| user_id       | int(11) | NO   | MUL | NULL    |                |
| role_id       | int(11) | NO   |     | NULL    |                |
+---------------+---------+------+-----+---------+----------------+
user_permission
+---------------+---------+------+-----+---------+----------------+
| Field         | Type    | Null | Key | Default | Extra          |
+---------------+---------+------+-----+---------+----------------+
| id            | int(11) | NO   | PRI | NULL    | auto_increment |
| user_id       | int(11) | NO   | MUL | NULL    |                |
| permission_id | int(11) | NO   |     | NULL    |                |
+---------------+---------+------+-----+---------+----------------+ 
```

我已经迁移到 Zend 框架，并且在决定 Zend_Acl 是否允许我实现当前结构时遇到问题。我的问题是。

1.  我是否可以使用当前数据库结构实现 ACL 以在 Zend Framework 中完成所需的工作？
2.  有没有更好的实现可以让我在 zend 框架中实现我想要的？

如果有人能为我提供一种开始我需要做的事情的方法，我将不胜感激。任何资源，可以帮助我的链接？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:26:55.180

嗯，我认为这个结构非常好，要让它工作你必须做两个步骤

1-设置所有数据库和要求

2-创建一个ACL插件来确定用户的角色和他的权限

一些有教义支持的例子：

[开发一个 Doctrine 支持的 ACL 助手 TDD 样式，第 1 部分](http://monzee.wordpress.com/2009/06/14/developing-a-doctrine-backed-acl-helper-tdd-style-part-1/)

[开发基于 Doctrine 的 ACL 助手 TDD 样式，第 2 部分](http://monzee.wordpress.com/2009/06/20/developing-a-doctrine-backed-acl-helper-tdd-style-part-2/)

另一个简单的 ACL：

[Zend框架中的动态自定义ACL？](https://stackoverflow.com/questions/8548649/dynamic-custom-acl-in-zend-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-20T21:51:07.900

为什么不使用数据库中已有的 Grants/Roles 系统？

# ruby - 在 Ruby 中使用 select 而不是 gsub 来避免多次正则表达式评估

> ID：10293012
> 
> 赞同：2
> 
> 时间：2012-04-24T06:48:36.100
> 
> 标签：ruby, regex, gsub

这是一个需要多次正则表达式评估但得到我想做的输出的输出（删除除文本之外的所有内容）。

```
words = IO.read("file.txt").
gsub(/\s/, ""). # delete white spaces
gsub(".",""). # delete periods
gsub(",",""). # delete commas
gsub("?","") # delete Q marks
puts words
# output
#      WheninthecourseofhumaneventsitbecomesnecessaryIwanttobelieveyoureallyIdobutwhoamItoblameWhenthefactsarecountedthenumberswillbereportedLotsoflaughsCharlieIthinkIheardthatonetentimesbefore 
```

看这篇文章 - [Ruby gsub：有没有更好的方法](https://stackoverflow.com/questions/1943975/ruby-gsub-is-there-a-better-way)- 我想我会尝试做一个匹配来完成相同的结果，而无需多次正则表达式评估。但我没有得到相同的输出。

```
words = IO.read("file.txt").
match(/(\w*)+/)
puts words
# output - this only gets the first word
# When 
```

这只得到第一句话：

```
words = IO.read("file.txt").
match(/(...*)+/)
puts words

# output - this only gets the first sentence
# When in the course of human events it becomes necessary. 
```

关于在匹配而不是 gsub 上获得相同输出（包括去除空格和非单词字符）的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:54:39.390

你可以在一个 gsub 操作中做你想做的事：

```
s = 'When in the course of human events it becomes necessary.'
s.gsub /[\s.,?]/, ''
# => "Wheninthecourseofhumaneventsitbecomesnecessary" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:03:25.483

您不需要为此进行多次正则表达式评估。

```
str = "# output - this only gets the first sentence
# When in the course of human events it becomes necessary."
p str.gsub(/\W/, "")
#=>"outputthisonlygetsthefirstsentenceWheninthecourseofhumaneventsitbecomesnecessary" 
```

# macos - 将终端会话复制到文件

> ID：10293013
> 
> 赞同：0
> 
> 时间：2012-04-24T06:48:47.707
> 
> 标签：macos, unix

有什么方法可以将终端中打印的输出复制到文件中。在我的情况下，命令 'script' 、 'tee' 和 '>>' 不起作用，因为我已经执行了我的程序并给出了一个无法实现的大输出从终端复制

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:28:57.327

知道了。terminal->shell->Export text As中有一个选项。这解决了我的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:53:14.427

不，您不能拦截正在运行的程序的现有文件句柄并透明地将它们重定向到其他地方。一些终端模拟器可能支持日志记录；如果您的终端有足够的回滚功能，您可以复制并粘贴它（尽管如果它很大，请注意粘贴到的位置；将其提供给其他终端可能会导致 pty 缓冲区填满时大部分内容丢失）。

# spotify - Spotify 播放按钮 - 自动播放？

> ID：10293017
> 
> 赞同：2
> 
> 时间：2012-04-24T06:49:27.010
> 
> 标签：spotify

我正在尝试将 Spotify 播放按钮集成到 ThingLink Spotify 标签中，以便当 iframe 加载时，它会自动开始播放。有没有办法用一些参数来做到这一点？

该功能类似于 Soundcloud 和 Vimeo 播放器： [http ://www.thinglink.com/scene/251225958915244034](http://www.thinglink.com/scene/251225958915244034)

如果没有自动播放，用户将不得不点击两次播放，这对 UX 来说并不是那么好。

谢谢！
-阿尔伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:40:39.023

目前没有自动播放功能。

自动播放并不是播放按钮的真正含义——它的设计目的是让人们可以根据需要听音乐。我们真的不想在没有明确许可的情况下打断用户已经在听的任何内容（无论是 Spotify 中的某些内容、其他内容还是静音）。

# android - 以“Mon APR 6, 2012 11:12 am”格式转换日期时间

> ID：10293025
> 
> 赞同：1
> 
> 时间：2012-04-24T06:49:57.823
> 
> 标签：android

我想将日期时间转换为

```
Mon APR 6, 2012  11:12 am 
```

这种格式

我在用

```
SimpleDateFormat formatter = new SimpleDateFormat("EE MMM d, yyyy hh:mm a");
String date = formatter.format(d); 
```

此代码获取日期格式，但它返回

```
Mon Apr 6, 2012  11:12 am 
```

我需要大写月份，所有其他都是一样的。

有什么解决办法，请参考我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:59:43.690

您可以`Mon Apr 6, 2012 11:12 am`在字符串数组中使用 chatAt() 函数获取和月份作为 chra。然后使用字符串类中的 toUpperCase() 方法将其转换为 uppr

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:11:32.377

试试这个-

```
import java.text.SimpleDateFormat;
import java.util.Date;

class Solution
{
        public static void main (String[] args)
        {
                Date d = new java.util.Date();
                SimpleDateFormat formatter = new SimpleDateFormat("EE MMM d, yyyy hh:mm a");
                String date = formatter.format(d);
                String month = date.substring(4, 7);
                date = date.replaceFirst(month, month.toUpperCase());
                System.out.println(date);

        }
} 
```

但是，如果您的日期格式发生变化，这将不起作用。你需要明白这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T07:18:46.793

试试这个代码

```
Date d = new Date();
        SimpleDateFormat formatter = new SimpleDateFormat("EE MMM d, yyyy hh:mm a");
        String date = formatter.format(d);
        Log.v("Test","Date==="+d);
        String[] temp;
        String month ;
        String final_string_date = "" ;
        temp = date.split(" ");
        for(int i =0; i < temp.length ; i++)
        {
            if(i==1)
                month=temp[i].toUpperCase();
            else
                month=temp[i];
            final_string_date = final_string_date+" "+  month;
        }
        Log.v("Test","final_string_date==="+final_string_date.trim()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T07:07:16.310

看看 DateFormatSymbols [http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormatSymbols.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormatSymbols.html)

样本 ：

```
DateFormatSymbols symbols = new DateFormatSymbols();
symbols.setShortMonths(new String[]{"JAN","FEB"....});
SimpleDateFormat format = new SimpleDateFormat("EE MMM d, yyyy hh:mm a", symbols); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T07:24:06.123

```
public static String DateFormat(String repdate,SimpleDateFormat formater )
{
    long d = Date.parse(repdate);       
    String[] arr= formater.format(d).split(" ");
    arr[1] = arr[1].toUpperCase();
    String date = "";
    for(int i=0;i<arr.length;i++)
    {
        date = date + arr[i] +" ";
    }

    return date;
} 
```

以 ("EE MMM d, yyyy hh:mm a") 格式传递您当前的日期字符串和日期格式化程序。你会得到你的解决方案。

# migration - 将网站迁移到 sitefinity 5.0 时出错

> ID：10293026
> 
> 赞同：0
> 
> 时间：2012-04-24T06:49:58.823
> 
> 标签：migration, sitefinity, sitefinity-5

**将网站迁移到 sitefinity 5.0 时出错**

我想将网站从旧版本迁移到新版本，为此我正在使用 sitefinity 项目管理器。我已将旧网站托管到 IIS 服务器，现在我正在尝试将该网站迁移到新的 sitefinity 5.0 版。旧版本是 3.7

我已经下载了telerik sitefinity 5.0 首先我从inetpub 根文件夹中导入了项目。我浏览它，它运行完美。现在进行迁移，我选择 Actions -> Set SF 3.7 for migration，然后选择项目根文件夹和站点 url，然后单击继续按钮进行迁移。

但它给了我这样的错误：

```
Installation package for the build version of the specified SF3.7 project is missing. 
```

什么是正确的解决方案？我正在为该站点使用 .net 框架 3.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:26:33.070

您的 Sitefinity 3.7 站点是否运行最新的 Service Pack 4？这是迁移所必需的。

还要确保 3.7 站点在 IIS 中运行，而不是使用 Visual Studio Web 服务器或任何不同的东西。

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:37:37.843

从 Telerik 获得解决方案，

我必须使用标准版来执行迁移，而我使用的是社区版

# php - 在 PHP 中搜索动态页面

> ID：10293027
> 
> 赞同：0
> 
> 时间：2012-04-24T06:50:03.190
> 
> 标签：php, mysql, search

我有一个带有简单 mysql 搜索表单的 php 动态网站，这意味着带有获取页面变量的单个索引页面。

现在我的问题是当我进行搜索时，我的页面变量被唯一的搜索词替换。

请参阅下面的代码示例。

这是我的带有搜索表单的动态 php 起始页。

```
index.php?v=counselling 
```

当我进行搜索时，我得到了这个..

```
index.php?name=value 
```

在我的情况下，我的初始页面变量**V**被搜索词替换。

这是我的标签中的html..

```
 <form action="index.php?v=counselling" method="get"> 
```

我也尝试过`$_SERVER['PHP_SELF']`，但到目前为止没有运气。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:55:37.953

```
<form action="index.php" method="get">
    <input type="hidden" name="v" value="counselling" /> 
```

将其作为隐藏输入值与您的搜索输入一起发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:46:30.730

当您有查询字符串并一起发布数据时。你可以使用这个代码。HTML 代码：

```
<form action="index.php?v=counselling" method="post">
  <input type="text" name="post1" value="value" />
</form> 
```

PHP代码：

```
echo "use $_GET and $_POST together. ";
echo $_POST['post1']. ' ' .$_GET['v']; 
```

# php - 嵌套的while循环没有按预期循环

> ID：10293029
> 
> 赞同：0
> 
> 时间：2012-04-24T06:50:14.300
> 
> 标签：php, loops

我在循环第二个 while 循环时遇到问题。它只会循环一次。所以我只能获取第二个循环的第一行的值。请帮我解决这个问题，我是初学者。

```
<ul id="navbar">

     <?php
     $rel = "SELECT * FROM table1 ORDER BY category";
     $sql=$db->query($rel); 
     while($row = $sql -> fetch_array()){
     ?>

     <li><a href="category.php?id=<?php echo $row['category_id'];?>"><?php echo $row['category'];?></a> 

        <ul>

            <?php
            $sel = "SELECT * FROM table2 WHERE category_id=".$row['category_id']." ORDER BY subcategory ASC";
            $sql=$db->query($sel);  
            while($row1 = $sql -> fetch_array()){
            ?>

            <li><a href="subcategory.php?id=<?php echo $row1['subcategory_id'];?>"><?php echo $row1['subcategory'];?></a></li>

            <?php }?>

        </ul>
    </li>

    <?php }?>

</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:53:51.667

您正在覆盖`$sql`内部循环，使外部循环无效。在第二个查询中为 SQL 结果标识符使用另一个变量名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T06:54:13.690

好吧，您将第一个查询的结果保存在变量中`$sql`

```
$sql=$db->query($rel); 
```

但是，在第二个循环之前，您会覆盖该变量。

```
$sql=$db->query($sel); 
```

尝试为第二次使用声明一个新变量。说，`$sql2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T06:55:22.477

这样做的原因是您`$sql`对两个查询都使用了该变量。将第二个重命名`$sql2`为例如。

另外，避免使用太多`<?php ?>`标签。

# android - Android中的列表视图

> ID：10293035
> 
> 赞同：1
> 
> 时间：2012-04-24T06:50:38.487
> 
> 标签：android

在第一个屏幕的示例程序中，我有一个输入字段，基于此输入，我必须显示一个列表视图（这是另一个活动）我如何实现它。我是 android 新手。这是我的代码。

这是点击按钮后：

```
if(text1.getText().toString().equals("subbu"))
            { 
                startActivity(new Intent(Listview));
//              Toast.makeText(Sampleprojectsubbu1Activity.this,"Name:"+text1.getText().toString(), Toast.LENGTH_LONG).show();              
            } 
```

这是要显示的列表：仅作为示例，我给出了一些不需要的数组。

```
public class Listview extends ListActivity 
{
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES));

    }
    static final String[] COUNTRIES = new String[] 
            {
                   "XXXXX","YYYYYY"

            };

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:54:42.040

错误的：

```
 startActivity(new Intent(Listview)); 
```

启动Activity的正确方法：

```
startActivity(new Intent(CurrentClassName.this, DestinationClassName.class)); 
```

## 更新：

要了解有关 Intent 的更多信息，请查看并阅读以下文章：

1.  [Android 意图](http://www.vogella.com/articles/AndroidIntent/article.html)
2.  [意图和意图过滤器](http://developer.android.com/guide/topics/intents/intents-filters.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:10:07.260

在主要活动中：

```
Intent myIntent = new Intent(this, ListView.class);
myIntent.putExtra("variableName", variableValue);
this.startActivity(myIntent); 
```

在 ListView 类中：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
String varName = extras.getString("variableName");//Datatype can be any
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:12:17.803

你必须通过替换你的代码行来实现这样的

开始活动（新意图（列表视图））；和

startActivity(MainActivty.this,ListView.class);

在清单中添加这个新活动非常重要。

# java - 在 Apache 停止的端口 80 上启动 Letty

> ID：10293036
> 
> 赞同：0
> 
> 时间：2012-04-24T06:50:43.697
> 
> 标签：java, apache

我有一个预装了 Apache 的虚拟服务器（Debian Squeeze，32 位）。我安装了 Letty 并停止了 Apache 服务器。

现在，当我在标准端口 8080 上启动 Letty 时，当我输入 http://[myserverip]:8080 时，我的网络浏览器将显示 Letty 起始页。当我将 Letty 端口配置为 80 并启动它时，当我在其中输入 http://[myserverip] 时，我的浏览器会显示 Apache 起始页（“它可以工作了！”）。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:53:23.540

尝试清除缓存 | 使用其他浏览器以确保它与客户端无关

# iphone - NSOperationQueue 和 NSAutoReleasePool 有什么区别

> ID：10293038
> 
> 赞同：1
> 
> 时间：2012-04-24T06:50:50.677
> 
> 标签：iphone, nsoperationqueue, nsautoreleasepool

谁能给我描述和之间的完美`NSOperationQueue`区别`NSAutoReleasePool`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:04:02.440

NSOperationQueue类管理一组**NSOperation**对象的执行。被添加到队列后，操作将保留在该队列中，直到它被显式取消或完成其任务的执行。队列中的操作（但尚未执行）本身根据优先级和互操作对象依赖性进行组织，并相应地执行。一个应用程序可以创建多个操作队列并向其中的任何一个提交操作。

操作间的依赖关系为操作提供了绝对的执行顺序，即使这些操作位于不同的操作队列中。直到其所有相关操作都完成执行后，才认为操作对象已准备好执行。对于准备好执行的操作，操作队列总是执行相对于其他准备好的操作具有最高优先级的操作。

**NSAutoreleasePool** 在引用计数环境中（与使用垃圾收集的环境相反），NSAutoreleasePool 对象包含已收到自动释放消息的对象，并且在耗尽时会向每个对象发送释放消息。因此，向对象发送 autorelease 而不是 release 可以延长该对象的生命周期，至少直到池本身被耗尽（如果该对象随后被保留，则可能会更长）。一个对象可以多次放入同一个池中，在这种情况下，每次放入池中都会收到一条释放消息。

您使用通常的 alloc 和 init 消息创建一个 NSAutoreleasePool 对象，并使用 drain（或 release）处理它 - 要了解差异，请参阅“<a href="https://developer.apple.com/library/mac/#documentation /Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html#//apple_ref/doc/uid/20000051-SW5" rel="nofollow">垃圾收集")。由于您无法保留自动释放池（或自动释放它 - 请参阅保留和自动释放），因此耗尽池最终会产生释放它的效果。您应该始终在创建它的相同上下文（调用方法或函数，或循环体）中耗尽自动释放池。有关更多详细信息，请参阅自动释放池。

有关更多信息，请访问以下指南...

[**NSAutoreleasePool**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html#//apple_ref/doc/uid/20000051-SW5)

[**NSOperationQueue**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)

希望对你有帮助..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:04:17.917

您可以在 Apple 开发文档中轻松找到它：

[**`NSAutoreleasePool`**](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html)

> 该类`NSAutoreleasePool`用于支持 Cocoa 的引用计数内存管理系统。自动释放池存储在池本身耗尽时发送释放消息的对象。

[**`NSOperationQueue`**](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)

> 该类`NSOperationQueue`规范一组 `NSOperation`对象的执行。被添加到队列后，操作将保留在该队列中，直到它被显式取消或完成其任务的执行。队列中的操作（但尚未执行）本身根据优先级和互操作对象依赖性进行组织，并相应地执行。一个应用程序可以创建多个操作队列并向其中的任何一个提交操作。

# web-services - 仅搜索引擎缓存页面中的损坏链接和图像

> ID：10293041
> 
> 赞同：0
> 
> 时间：2012-04-24T06:51:20.743
> 
> 标签：web-services, .htaccess

我遇到了一个奇怪的问题，我的网站在所有浏览器中都能完美显示，但是当在谷歌、必应甚至雅虎中检查网站的缓存页面时，所有这些页面都显示损坏的链接和图像，因为某些链接被覆盖，例如

假设直接 url 是[http://www.expatads.com/47-Thailand/](http://www.expatads.com/47-Thailand/)它显示完美。

这是相同网址的谷歌缓存。 [http://webcache.googleusercontent.com/search?q=cache:qFAzM4VMsJsJ:www.expatads.com/47-Thailand/+&cd=1&hl=en&ct=clnk](http://webcache.googleusercontent.com/search?q=cache:qFAzM4VMsJsJ:www.expatads.com/47-Thailand/+&cd=1&hl=en&ct=clnk)

我想知道的是重现此类可见错误的最佳方法，而不是等待搜索引擎缓存和显示页面。由于网络浏览器没有显示任何错误，但实际上存在导致该错误的路径错误。

如果有人能给我一种方法，让我可以使用某些浏览器、软件或其他东西重现这些错误，我将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:14:30.487

我相信您误认为这是一个错误。如果您查看[Google 对您页面的搜索结果](https://www.google.com/#hl=en&sclient=psy-ab&q=expatads.com%2F47-Thailand%2F&oq=expatads.com%2F47-Thailand%2F)的屏幕截图，就会显示图像。

Google 的缓存似乎不会重写相对 URL，这是有道理的，因为它并不总是有效，并且某些网站可能不允许热链接等。因此，使用相对链接链接到您页面上的所有资源都不会显示在谷歌的缓存版本中。

如果您希望看到您的网站在其他浏览器中的外观，您可能想尝试[Browsershots](http://browsershots.org/)。这将为您提供大量浏览器的屏幕截图，以测试兼容性。

# mysql - mysql主键以pattern开头

> ID：10293042
> 
> 赞同：0
> 
> 时间：2012-04-24T06:51:20.903
> 
> 标签：mysql, primary-key, unique, design-patterns

我在 Mysql 数据库中有 2 个表书，手机。

表结构是，

```
1\. book_id|book_name  
2\. mobile_id|mobile_name 
```

还创建了具有以下结构的第三个表 products，

1.  产品 ID|产品名称

现在，我希望 book_id 以 mysql 中的模式开头。

例如，

```
book_ids -> 11,12,13,14,15,16,17,18,19,110,111,112,...  
mobile_ids -> 21,22,23,24,25,26,27,28,29,210,211,212,... 
```

现在，在我的产品表中，我可以拥有，

product_id -> 11,21,16,26，如果这个开头没有设置模式，那么问题是，

product_id -> 1,1,6,6..它不是唯一的。

如何处理这个..？

## 编辑的东西如下：

所以，你的意思是这个..？

**类别表**

## 类别 ID | 分类名称

*1 | 书籍
2 | 手机*

**book_table**

## book_id | 书名

*1 | 达芬奇密码
2 | 炼金术士*

**mobile_table**

## mobile_id | 手机名

*1 | 诺基亚
2 | 三星*

**产品表**

## 编号 | 产品名称 | 产品编号 | 类别ID

*1 | 达芬奇密码 | 1 | 1
2 | 炼金术士 | 2 | 1
3 | 诺基亚 | 1 | 2
4 | 三星| 2 | 2*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:58:52.320

您似乎在无缘无故地复制信息。

只需创建一个产品表：

```
id | name | type (e.g. 0 book, 1 mobile, etc) | price | .... 
```

# android - 嗅探 Android 应用程序 HTTPS 流量

> ID：10293046
> 
> 赞同：1
> 
> 时间：2012-04-24T06:51:31.003
> 
> 标签：android, ssl, apk

`https`我在发送请求的 Android 手机（模拟器）上有一个应用程序。我怎么能看到那个请求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-26T07:10:48.367

[使用Fiddler](http://www.telerik.com/fiddler "提琴手")或[Charles](http://www.charlesproxy.com/ "查尔斯")等软件可以轻松实现这一点。他们有一个内置的 SSL 服务器，它将自己定位在应用程序和服务器之间。这是一种“中间人”攻击，只是你只是在攻击自己。

在您的 PC 上安装软件后，您必须将此 PC 的 IP 地址设置为 Android 中的代理服务器。其次，您必须安装该软件在您的 Android 设备上使用的根证书。

由于您没有在此处阻止任何加密并且没有对任何应用程序进行逆向工程，因此我认为这不会被归类为非法。由于您需要对设备进行物理访问，因此您也不能监视除您自己之外的任何人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:54:43.010

如果您正在与自己的服务器通信，并且您可以访问其私钥，则可以使用 Wireshark 捕获数据包并让它解密 HTTPS 流量。如果您试图对其他人的应用程序进行逆向工程，这可能合法也可能不合法，并且通常无法完成。

# jquery - 在 jQuery 验证中可以使用什么来代替动态 id 表单？

> ID：10293047
> 
> 赞同：0
> 
> 时间：2012-04-24T06:51:33.483
> 
> 标签：jquery, asp.net, jquery-plugins

我有一个 aspx 内容页面，它由母版页继承。

在母版页中，我的主要内容占位符位于`<form>`,

```
<form runat="server">
<div class="page">

    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </div>
    <div class="clear">
    </div>
</div>
<div class="footer">

</div>
</form> 
```

以下是我的内容页面的代码：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<table border="0" cellpadding="3" cellspacing="3">
    <tr>
        <td colspan="2" class="header" style="color: Black;">
            LOGIN USER
        </td>
    </tr>
    <tr>
        <td align="right">
            <asp:Label ID="lblUserName" runat="server" Text="UserName: "></asp:Label>
        </td>
        <td align="left">
            <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td align="right">
            <asp:Label ID="lblPassword" runat="server" Text="Password: "></asp:Label>
        </td>
        <td align="left">
            <asp:TextBox ID="txtPassword" runat="server" TextMode="Password"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td align="center" colspan="2">
            <asp:Button ID="btnSubmit" runat="server" Text="Submit" />&nbsp;
            <asp:Button ID="btnReset" runat="server" Text="Reset" />
        </td>
    </tr>
</table>
<div align="center" class="alertmsg">
</div> 
```

虽然我要使用 jQuery 验证插件：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
            $('#ctl01').validate({
            rules: {
                    <%=txtUserName.UniqueID %>: {
                        minlength: 2,
                        required: true
                    },
                     <%=txtPassword.UniqueID %>: {                        
                        required: true,
                        email:true
                    }
                },
            messages: {
                    <%=txtUserName.UniqueID %>:{  
                        required: "* Required Field *",  
                        minlength: "* Please enter atleast 2 characters *"  
                    },
                    <%=txtPassword.UniqueID %>:{  
                        required: "* Required Field *",  
                        email: "* Please enter valid email address *"  
                    }       
                }

        });
});

</script> 
```

的动态id`txtUserName`可以被暴露出来`<%=txtUserName.UniqueID %>`，但是为什么我需要给表单的id`$('#ctl01').validate`呢？我可以使用任何其他 id 代替`#ctl01`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:58:00.647

`$('<%=Form.UniqueID %>').validate({`您可以使用：注意和之间的不同`$('<%=Form.UniqueID %>').validate({`

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
            $('#<%=Form.UniqueID %>').validate({
            rules: {
                    <%=txtUserName.UniqueID %>: {
                        minlength: 2,
                        required: true
                    },
                     <%=txtPassword.UniqueID %>: {                        
                        required: true,
                        email:true
                    }
                },
            messages: {
                    <%=txtUserName.UniqueID %>:{  
                        required: "* Required Field *",  
                        minlength: "* Please enter atleast 2 characters *"  
                    },
                    <%=txtPassword.UniqueID %>:{  
                        required: "* Required Field *",  
                        email: "* Please enter valid email address *"  
                    }       
                }

        });
});

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:10:49.350

要求它来自，因为您在将`.validate()`它们发送到服务器之前进行验证以检查正确的值，即当用户提交表单并且只能提交表单并且只有通过它们才能防止错误的值开始提交。 .

为了更清楚：

您可以参考[http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)以获得清晰的描述。

如果`Control.UniqueID` 不起作用，您可以使用`Control.ClientID`...

# asp.net-mvc-3 - Html.DropDownListFor 总是返回值'0'，无论选择什么

> ID：10293048
> 
> 赞同：1
> 
> 时间：2012-04-24T06:51:40.513
> 
> 标签：asp.net-mvc-3, razor, drop-down-menu, html.dropdownlistfor

我正在尝试使用绑定枚举`AgeRange`，`Html.DropDownListFor`但无论我从“视图”页面中选择什么，Controller 都会获得值“0”。谁能帮我解决这个问题？

编辑：控制器代码到位。

枚举类：

```
public enum AgeRange
{
  Unknown = -1,    
  [Description("< 3 days")]
  AgeLessThan3Days = 1,    
  [Description("3-6 days")]
  AgeBetween3And6 = 2,    
  [Description("6-9 days")]
  AgeBetween6And9 = 3,    
  [Description("> 9 days")]
  AgeGreaterThan9Days = 4
} 
```

看法：

```
@Html.DropDownListFor(
      model => model.Filter.AgeRangeId,
      @Html.GetEnumDescriptions(typeof(AgeRange)),
      new { @class = "search-dropdown", name = "ageRangeId" }
) 
```

控制器：

```
public ActionResult Search(int? ageRangeId)
{
   var filter = new CaseFilter { AgeRangeId = (AgeRange)(ageRangeId ?? 0) };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:22:50.447

你很近...

我建议跟随[这个人](http://coding-in.net/asp-net-mvc-3-method-extension/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:23:57.827

您必须为选择列表编写扩展方法才能工作。

我用这个

```
public static SelectList ToSelectList<TEnum>(this TEnum enumeration) where TEnum : struct
{
  //You can not use a type constraints on special class Enum.
  if (!typeof(TEnum).IsEnum)
    throw new ArgumentException("TEnum must be of type System.Enum");
  var source = Enum.GetValues(typeof(TEnum));
  var items = new Dictionary<object, string>();
  foreach (var value in source)
  {
    FieldInfo field = value.GetType().GetField(value.ToString());
    DisplayAttribute attrs = (DisplayAttribute)field.GetCustomAttributes(typeof(DisplayAttribute), false).First();
    items.Add(value, attrs.GetName());
  }
  return new SelectList(items, Constants.PropertyKey, Constants.PropertyValue, enumeration);
} 
```

# objective-c - UITableViewCell ContentView/BackgroundView 还是继承？

> ID：10293049
> 
> 赞同：1
> 
> 时间：2012-04-24T06:51:41.070
> 
> 标签：objective-c, uitableview

嗨，我通常向`UITableViewCell`'s添加一个新视图`ContentView`而不是继承。但最近我一直在读到，保持视图层次结构尽可能平坦以实现平滑滚动是一个很好的规则。（多数民众赞成其中之一）。

这里的基本规则是什么，创建新的 TableViewCell 类型是否矫枉过正/好！？

# ruby-on-rails - Rails 优先排序希腊字符

> ID：10293057
> 
> 赞同：2
> 
> 时间：2012-04-24T06:52:32.023
> 
> 标签：ruby-on-rails, ruby, sorting

我的数据库中有一个名称列表，我需要按字母顺序对它们进行排序。但是，我需要先显示希腊字母，然后是拉丁字母。例如，我有：

```
[Jale, Βήτα, Άλφα, Ben] 
```

我需要这样订购：

```
[Άλφα, Βήτα, Ben, Jale] 
```

我们欢迎所有的建议 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:21:20.570

我喜欢通过在 irb 中玩耍来解决这些问题。这是您可以找到此解决方案的一种方法。首先，我们将定义我们的测试数组：

```
>> names = %w{Jale Βήτα Άλφα Ben}
=> ["Jale", "Βήτα", "Άλφα", "Ben"] 
```

为了解决这个问题，让我们首先将数组转换为 2 元组，其中包含一个指示名称是否为希腊语的标志，然后是名称本身。我们希望标志是可排序的，所以我们首先要找到一个正则表达式匹配纯拉丁字符，并将其强制为字符串。

```
>> names.map{|name| [(name =~ /^\w+$/).to_s, name]}
=> [["0", "Jale"], ["", "Βήτα"], ["", "Άλφα"], ["0", "Ben"]] 
```

然后我们将对 2 元组进行排序：

```
>> names.map{|name| [(name =~ /^\w+$/).to_s, name]}.sort
=> [["", "Άλφα"], ["", "Βήτα"], ["0", "Ben"], ["0", "Jale"]] 
```

我们现在有一个排序顺序，首先是希腊名称，然后是拉丁名称。我们可以将其缩短为我们的解决方案：

```
>> names.sort_by{|name| [(name =~ /^\w+$/).to_s, name]}
=> ["Άλφα", "Βήτα", "Ben", "Jale"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:25:28.183

我在上面给出了一种解决方案。另一种方法是将名称划分为希腊语和拉丁语，然后在这些组中排序，然后将两个数组扁平化为一个：

```
>> names.partition{|name| name !~ /^\w+$/}.map(&:sort).flatten
=> ["Άλφα", "Βήτα", "Ben", "Jale"] 
```

这可能比我的其他解决方案更优雅和更易于理解，但它不太灵活。请注意，如果名称包含非拉丁字符（即希腊语） ，`name !~ /\w+$`则会返回类似的内容。`true`

# javascript - 发生 Facebook Javascript oAuth 错误

> ID：10293059
> 
> 赞同：0
> 
> 时间：2012-04-24T06:52:42.740
> 
> 标签：javascript, facebook, api

atm 我试图让 facebook api 工作，我卡在 oauth

```
<!DOCTYPE html>
<head>
<script src="http://connect.facebook.net/en_US/all.js"></script>
</head>
<body>
<fb:login-button autologoutlink="true" onlogin="OnRequestPermission();">
</fb:login-button>
<script language="javascript" type="text/javascript">
    FB.init({
        appId: '143655195699763',
        status: true,
        cookie: true,
        xfbml: true
    });
</script>
</body>
</html> 
```

就我尝试登录而言，我得到一个错误

> 发生错误。请稍后再试。

任何想法？

另外，如果我使用那个，我仍然会收到相同的错误消息......也许它与我的 appID 有关？

```
<!DOCTYPE html>
<head>
<script src="http://connect.facebook.net/en_US/all.js"></script>
</head>
<body>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '395527397147712', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
  };
</script>
<script>
 function fb_publish() {
     FB.ui(
       {
         method: 'stream.publish',
         message: 'Message here.',
         attachment: {
           name: 'Name here',
           caption: 'Caption here.',
           description: (
             'description here'
           ),
           href: 'url here'
         },
         action_links: [
           { text: 'Code', href: 'action url here' }
         ],
         user_prompt_message: 'Personal message here'
       },
       function(response) {
         if (response && response.post_id) {
           alert('Post was published.');
         } else {
           alert('Post was not published.');
         }
       }
     );  
  }

</script>

<input name="" type="button" onClick="fb_publish()">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:36:49.990

我不确定这是否是原因，但在 SDK Docs 示例中，您有两个函数，一个是 fb.init（您拥有它），另一个是匿名函数，它调用自身来加载您附加的脚本直接到 DOM，也许你应该通过匿名函数加载脚本；编码：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

另外，请确保正确隐藏`#fb-root`元素，因为在 IE 中 SDK 可能会导致问题。[更多信息在这里](https://developers.facebook.com/docs/reference/javascript/)

# java - MyBatis 比使用普通 JDBC 有什么好处

> ID：10293061
> 
> 赞同：7
> 
> 时间：2012-04-24T06:52:58.070
> 
> 标签：java, sql, jdbc, ibatis, mybatis

我需要编写非常直接的数据库代码，并且我正在考虑 MyBatis 而不是普通的 JDBC（我相信完整的 ORM 是一种矫枉过正）。

考虑到在 MyBatis 和普通 JDBC 中，你会发现自己：

1.  手写 SQL 语句。
2.  手动将 DB 行连接到 JAVA DTO 对象（通过代码或配置）。

我所知道的 MyBatis 对 JDBC 的好处是：

1.  开箱即用的表/查询缓存。
2.  动态 SQL。
3.  SQL 存储在代码之外。
4.  模板化 SQL 以更轻松地实现数据库供应商的独立性。

**MyBatis-Over-JDBC 还有哪些其他好处需要考虑？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:58:58.470

我不知道你是否会将此视为优势，但有[MyBatisGenerator](http://code.google.com/p/mybatis/downloads/list?can=3&q=Product=Generator)，它也生成所有基本需要的查询以及一些高级查询和基于单个 XML 文件的 DTO 对象。

另外，它具有相同的[Eclipse 插件](http://code.google.com/p/mybatis/wiki/Generator)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T15:19:12.627

大多数情况下，您不需要将明确的列映射到 pojo，因此第 2 个项目符号是不同的，而不是相似的。

恕我直言，主要区别在于 MyBatis 中的 API 比 JDBC 中简单得多。如果与 Spring 或 Guice 一起使用，则根本不需要在代码中调用 MyBatis API。

映射器和注入对测试有很大帮助，因为映射器是简单的接口，很容易模拟。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-26T02:28:55.600

关于：'手动将 DB 行连接到 JAVA DTO 对象（通过代码或配置）。这并不完全正确，如果您使用约定，您可以获得从 DB 表到 Java 类的自动映射，例如，您有一个 CUSTOMER 表，其中包含 ID、COMPANY_NAME、PHONE_NUMBER 等字段，以及具有属性 id、companyName 和phoneNumber，MyBatis 足够聪明，可以将数据库转换为驼峰式约定，并且不需要您进行映射。伟大的！

*   MyBatis 需要更少的代码，并且比普通的 JDBC 编码更干净
*   MyBatis 支持命名参数，JDBC 只支持占位符？（呜！）
*   只需一行，您就可以从 Reuse Prepared Statement Mode 更改为 Bath Mode，在普通的 JDBC 中，它将带您重写您的代码。

# asp.net-mvc-3 - 通过asp.net mvc3扫描文档

> ID：10293064
> 
> 赞同：0
> 
> 时间：2012-04-24T06:53:11.463
> 
> 标签：asp.net-mvc-3

我必须在我当前的项目中实现文档扫描功能。我正在使用 asp.net mvc3。我有哪些可用的选项..我的意思是如何去做？

提前致谢

# date - 更改日期的时间

> ID：10293067
> 
> 赞同：0
> 
> 时间：2012-04-24T06:53:21.677
> 
> 标签：date, grails

如果我使用

> 新日期（）

它返回带有当前时间时间戳的日期。如何更改附加日期的日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:00:47.543

您可以使用[set 方法](http://groovy.codehaus.org/groovy-jdk/java/util/Date.html#set%28java.util.Map%29)来修改您的日期实例：

```
def date = new Date()
date.set(second: 0, minute: 0, hourOfDay: 15) 
```

如果您不需要任何时间，您还可以使用[clearTime()](http://groovy.codehaus.org/groovy-jdk/java/util/Date.html#clearTime%28%29)删除日期的时间部分。

# java - 使用数据库时出现“DatabaseIOException：文件系统错误（12）”？

> ID：10293070
> 
> 赞同：1
> 
> 时间：2012-04-24T06:53:39.020
> 
> 标签：java, blackberry

我创建了一个标签栏，当我第一次进入数据库屏幕时会出现这个标签栏，这段代码工作正常。但是当我们进入另一个选项卡并再次进入数据库屏幕选项卡时，它会引发异常

net.rim.device.api.database.DatabaseIOException: 文件系统错误 (12)

我已经正确关闭了数据库。

我在 finally 块中关闭了数据库。每次移动选项卡时数据库都会关闭

这是我的代码：

```
 Database d = null;
    URI _uri = null;
    Statement st = null;
    Cursor c = null;

    try
    {

         _uri=URI.create("file:///SDCard/MyBudgetTracker.db");
            if (DatabaseFactory.exists(_uri)) {
                d=DatabaseFactory.openOrCreate(_uri,new DatabaseSecurityOptions(false));
                 st = d.createStatement("SELECT * FROM "+Globalvalue.planCategoryTable);
                st.prepare();
                 c = st.getCursor();
                Row r;
                int i = 0;

                while(c.next()) {
                    r = c.getRow();
                    r.getString(0);
                    i++;
                }
                if (i==0)
                {
                    add(new RichTextField("No data in the User table."));
                }

        }

    }catch (Exception e) 
    {
        System.out.println(e.getMessage());
        System.out.println(e);
        e.printStackTrace();// TODO: handle exception
    } finally {
        try {
            if (DatabaseFactory.exists(_uri)) {
                if (c != null) {
                    c.close();
                }if (st != null) {
                    st.close();
                } if (d != null) {
                    d.close();
                }
            }
        } catch (Exception e2) {
            // TODO: handle exception
        }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T07:22:16.657

您正在从数据库中将值检索到您选择的选项卡上吗？您可以考虑这种打开和关闭数据库的替代方法。它总是产生较小的错误。

```
try
{    
    //Open or create the database
    Database db = DatabaseFactory.openOrCreate("MyBudgetTracker.db");    
    //Retrieve Data from db
    Statement statement1 = db.createStatement("SELECT * FROM "+Globalvalue.planCategoryTable);
    statement1.prepare();
    statement1.execute();       
    statement1.close(); 
    db.close();
}
catch(DatabaseException dbe)
{
    System.err.println(dbe.toString());
} 
```

否则，您可以在您获取值之前在您的每个选项卡上包含一个 db open 语句，尽管它会增加您的编程代码行。

# symfony - Symfony2：如何验证来自 url 的语言环境

> ID：10293071
> 
> 赞同：0
> 
> 时间：2012-04-24T06:53:42.267
> 
> 标签：symfony, locale

我已经在我的 symfony2 项目中实现了语言环境。现在的问题是，如果我手动将 url 中的语言环境更改为语言环境值以外的其他值，那么它只是采用该值。我如何限制这个？

例如：[http://myproject.com/en](http://myproject.com/en)更改为[http://myproject.com/asdf](http://myproject.com/asdf)。现在 asdf 不是我配置中的语言环境值！但它仍然在我的语言环境切换器中显示为 Country-asdf！

如何限制语言环境的 url 编辑？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:55:05.057

您可以在您的路由中定义路由限制。如果是 YML ，

```
homepage:
pattern:   /{locale}
defaults:  { _controller: AcmeDemoBundle:Main:homepage, locale: en }
requirements:
    culture:  en|fr|in 
```

# c# - GET byte[] 并使用元素值返回？

> ID：10293073
> 
> 赞同：0
> 
> 时间：2012-04-24T06:53:45.617
> 
> 标签：c#, web-services, rest, uri, bytearray

所以最近我一直在使用这个方法来返回一个字符串：

```
string uri = "http://localhost:8000/Service/Student";
XDocument xDoc = XDocument.Load(uri);
var studentcollection = xDoc.Descendants("Student")
    .Select(n => new
    {
      FirstName = n.Element("FirstName").Value,
    })
    .ToList(); 
```

它工作正常，但如果 web 服务中的一个值是 byte[]，这个方法会返回那个值吗？如果没有，您将如何组合该方法（因为我习惯了它）并返回一个字节 []？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:56:58.733

您是说其中一个元素可以返回 a`byte[]`还是真的是表示 a 的 base 64 编码字符串`byte[]`？如果是后者，您可以从值中提取字节：

```
byte[] decoded = Convert.FromBase64String(value); 
```

完整代码：

```
string uri = "http://localhost:8000/Service/Student";
XDocument xDoc = XDocument.Load(uri);
var studentcollection = xDoc.Descendants("Student")
    .Select(Convert.FromBase64String(n.Element("Picture").Value))
    .ToList(); 
```

这将为您提供`byte[]`从每个学生的“图片”元素中提取的列表（相应地更改代码以创建图片作为学生实例的一部分）。

# css - ExtJS 4 在 xtype:toolbar 中使用类似 float:right 的东西

> ID：10293100
> 
> 赞同：2
> 
> 时间：2012-04-24T06:55:45.080
> 
> 标签：css, extjs

我有几个停靠项目：

```
 dockedItems: [{
                xtype: 'toolbar',
                items: [{
                    xtype:'button',
                    icon: g_settings.iconUrl + 'add-icon.png',
                    text: 'Abc',
                    handler: this._add
                },{
                    icon: g_settings.iconUrl + 'remove-cancel-icon.png',
                    text: 'Del',
                    disabled: true,
                    itemId: 'delete',
                    scope: this,
                    handler: this.onDeleteClick
                }]
            },{
                xtype:'toolbar',
                dock: 'bottom',
                items: [{
                    xtype: 'button',    
                    height: 30,
//                  padding: '0 0 0 50',
                    icon: g_settings.iconUrl + 'add-file-to-doc.png',
                    text: 'Select',
                    itemId: 'conndoc',
                    scope: this,
                    disabled: true,
                    handler: this._connToDocument
                }]
            }, {
                xtype: 'pagingtoolbar',
                id: 'id-docs-paging',
                store: 'Documents',
                dock: 'bottom',
                displayInfo: true
            }], 
```

和`xtype:pagingtoolbar`工具栏`text: Select`都位于底部，第二个仅包含一个按钮，默认情况下位于工具栏的左侧，但我想留在右侧。我尝试了 ExtJS 文档中的“->”和其他选项，但由于工具栏中只有一个项目，我认为我不能使用标准选项。所以我如何将工具栏中的单个项目定位在右侧?

谢谢

勒隆

附言

我忘记了 - 分页工具栏总是出现在带有图标的工具栏上方，即使它是停靠项目列表中的最后一个，但我希望分页在底部是最新的，所以如果有人也可以帮助我解决这个问题.. .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:49:26.537

好的，所以这两个问题都解决了，也许不是那么困难，但可能对其他人有用。所以，正如我在上面的评论中所写 - 将按钮移动到工具栏的右侧，我只是使用了这个`items: ['->',{`。至于第二部分，似乎第一个具有`dock: 'bottom'`属性的元素将位于最底部，并且代码中接下来出现且具有相同位置的每个元素都将放在底部，但在前一个元素的上方。所以这里重要的是在牢记上述信息的情况下以正确的顺序编写我的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:58:59.590

您也可以在面板中使用按钮：[] 配置 - 然后它会自动放置在右下角。你是怎么用'->'找到的......我似乎在文档中找不到它。谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T18:20:14.447

'->' 是 tbfill 的快捷方式 [http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Toolbar.Fill](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Toolbar.Fill)

# c++ - 对 android_main 的未定义引用（Android NDK - native_app_glue）

> ID：10293101
> 
> 赞同：1
> 
> 时间：2012-04-24T06:55:46.990
> 
> 标签：c++, android-ndk, undefined-reference

我正在完全用 C++ 编写一个 Android 应用程序。使用 OpenGL ES 2、Android-NDK r7（平台 9）、OpenJDK 和 Ubuntu 12.04。

我遇到的问题是我应该调用我正在开发的引擎的主库正在吐出“未定义的引用`android_main`”错误。为什么这样做我不知道，但我几乎可以肯定它与我的 Android.mk 有一些关系。无论出于何种原因，我都无法弄清楚。

虽然引擎库构建得非常好，但引用构成实际游戏的文件的主要 Android.mk 并没有按照我想要的方式构建。

**目标**

- 我希望将其链接起来，`-loptim`以便它可以作为单独的库引用和调用引擎中的函数。因此，我应该能够将此引擎移植到其他各种项目并简单地链接它。这似乎已经完成，但如果其他人有更好的方法来实现这一点，我会全力以赴。

-我还想弄清楚为什么我的 android_main 没有被引用，以及可以做些什么来修复它。

**主文件**

```
#include "engine/stdafx.hpp"
#include "engine/AppData.hpp"
#include "engine/Engine.hpp"
#include "glm/glm.hpp"

using namespace optim;

void android_main( android_app* application )
{
    AppData appData;
    appData.mApplication = application;
    appData.mGraphicsService = new GraphicsService( application );

    Engine app( &appData );
} 
```

**安卓.mk**

```
MY_LOCAL_PATH := $(call my-dir)

LOCAL_PATH := $(MY_LOCAL_PATH)

include $(CLEAR_VARS)

include $(LOCAL_PATH)/engine/Android.mk

include $(CLEAR_VARS)

LOCAL_PATH := $(MY_LOCAL_PATH)

LOCAL_CFLAGS    := -I$(LOCAL_PATH)/glm -I$(ANDROID_NDK)/sources/cxx-stl/stlport/stlport -I$(LOCAL_PATH)/ -I$(LOCAL_PATH)/engine
LOCAL_MODULE    := pongdroid 
LOCAL_SRC_FILES := Main.cpp PongDroid.cpp
LOCAL_LDLIBS    := -landroid -llog -lEGL -lGLESv2 -L$(PONGDROID_DEV)/obj/local/armeabi/ -loptim
LOCAL_STATIC_LIBRARIES := android_native_app_glue

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue) 
```

请注意，这`-loptim`是我将主模块链接到的引擎的共享库。问题是，虽然它*看起来*可以很好地链接，但这个 makefile 的库尤其不会产生 shared_library。然而，其他一切似乎都编译得很好。

**NDK-构建**

```
**** Build of configuration Default for project pongdroid ****

ndk-build all 
Gdbserver      : [arm-linux-androideabi-4.4.3] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
Compile++ thumb  : optim <= Engine.cpp
Compile++ thumb  : optim <= Config.cpp
Compile++ thumb  : optim <= GraphicsService.cpp
Compile thumb  : android_native_app_glue <= android_native_app_glue.c
StaticLibrary  : libandroid_native_app_glue.a
StaticLibrary  : libstdc++.a
SharedLibrary  : liboptim.so
./obj/local/armeabi/libandroid_native_app_glue.a(android_native_app_glue.o): In function `android_app_entry':
/home/amsterdam/Android/android-ndk/sources/android/native_app_glue/android_native_app_glue.c:234: undefined reference to `android_main'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/liboptim.so] Error 1

**** Build Finished **** 
```

**更新**

所以，我已经缩小了问题的范围。问题在于根 Android.mk 文件出于某种原因似乎忽略了自己的库。更奇怪的是，当我注释掉时`include $(LOCAL_PATH)/engine/Android.mk`，错误输出变得更糟。

所以，为了清楚起见，我发布了我的`engine/Android.mk`文件，看看是否有人能理解这个混乱......

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_CFLAGS    := -I$(LOCAL_PATH)/
LOCAL_MODULE    := optim
LOCAL_SRC_FILES := Engine.cpp Config.cpp GraphicsService.cpp 
LOCAL_LDLIBS := -landroid -llog -lEGL -lGLESv2
LOCAL_STATIC_LIBRARIES := android_native_app_glue

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue) 
```

**更新 2**

`ndk-build pongdroid`来自 shell的调用。

```
ndk-build pongdroid
Compile++ thumb  : pongdroid <= Main.cpp
Compile++ thumb  : pongdroid <= PongDroid.cpp
SharedLibrary  : liboptim.so
/home/amsterdam/Programming/Android/pongdroid/obj/local/armeabi/libandroid_native_app_glue.a(android_native_app_glue.o): In function `android_app_entry':
/home/amsterdam/Android/android-ndk/sources/android/native_app_glue/android_native_app_glue.c:234: undefined reference to `android_main'
collect2: ld returned 1 exit status
make: *** [/home/amsterdam/Programming/Android/pongdroid/obj/local/armeabi/liboptim.so] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:24:30.967

您是否在 Main.cpp 中包含“android_native_app_glue.h”标头或其包含的标头之一？

# javascript - 使用 javascript 通过 Outlook 发送 html 内容

> ID：10293104
> 
> 赞同：0
> 
> 时间：2012-04-24T06:56:04.550
> 
> 标签：javascript, html, mailto, rfc2368

我有一个 HTML 页面它包含表格（它有三行和两列）

当我单击按钮或链接（锚标记）时。

我在 Outlook 中需要与收件人（电子邮件 ID）和主题（任何文本）相同的数据

有可能在javascript中做吗

问候米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:00:47.540

不，那将是一个很大的安全漏洞。最好的方法是

```
<a href="mailto:whoever@whereever.com?subject=Type my subject here;body=Body of email document">Send email</a> 
```

但只有当 Outlook 是 pc 上的默认邮件代理时，它才会起作用。

# php - 每 5 分钟执行一次 PHP cron，但将函数置于睡眠状态以在 15 分钟后运行

> ID：10293112
> 
> 赞同：2
> 
> 时间：2012-04-24T06:56:20.740
> 
> 标签：php, cron, command-line-interface

我有一个 PHP 脚本，每 5 分钟在 cron 上运行一次。

```
*/5 * * * * /var/www/html/processMail.php 
```

在脚本内部有一个我想每 15 分钟执行一次的函数，因此该函数将处于睡眠模式，但脚本的其余部分将每 5 分钟处理一次。

这个疯狂的想法会奏效吗？如何奏效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:00:14.580

> 这个疯狂的想法会奏效吗？如何奏效？

不，不会的。每 15 分钟功能将 - 即使您设法等待 15 分钟 - 每 5 分钟执行一次 - 因此有效地每 5 分钟执行 15 分钟功能。而是创建一个每 15 分钟执行一次的第二个脚本或添加一个参数：

```
*/5 * * * * /var/www/html/processMail.php --mins=5
*/15 * * * * /var/www/html/processMail.php --mins=15 
```

然后使用该功能解析[PHP](http://php.net/manual/reserved.variables.argv.php)（和[`getopt`](http://php.net/getopt)）中的命令行参数以进行相应的处理。另请参阅[PHP 手册中有关命令行使用的部分](http://php.net/manual/features.commandline.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:09:44.250

您可以将迭代器保存在文件或数据库中，并在每次运行后递增，这样您只能在脚本运行的 3 次中运行一次。

但是，更好的解决方案是编写另一个脚本并每 15 分钟运行一次。

# java - Java - 检查是否有另一个 Java 应用程序正在运行

> ID：10293113
> 
> 赞同：1
> 
> 时间：2012-04-24T06:56:21.773
> 
> 标签：java, monitoring, restart

我几乎没有 24/7 运行的 java 应用程序。我想编写另一个 java 应用程序，它检查这些应用程序是否崩溃。如果某个应用程序崩溃了，我想重新启动它。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:01:05.827

我看到了一些方法，但应该有更好的方法来做到这一点：

1.  如果您可以控制正在运行的应用程序，您可以让它们中的每一个监听机器上的给定端口并回复任何请求。然后，您可以简单地 ping 该端口以查看应用程序是否正在运行。

2.  如果您自己启动应用程序，您可以存储它们的 pid，然后检查具有该 pid 的进程是否仍然存在。

3.  每个应用程序都可以创建一个文件并定期更新它。然后您的监控应用程序可以检查文件是否已更新。如果没有，那么应用程序就死了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:00:58.107

我能想到的是您可以在那些 24/7 运行的程序中定义一个新的自定义异常，将该异常添加到您认为可能发生崩溃的块中，然后在崩溃调用此异常时调用另一个 java 应用程序的某些方法.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:04:06.827

您可以使用 wmic 实用程序。像这样 ：`Process proc = Runtime.getRuntime().exec("wmic.exe");`

然后您可以检查与您的 java 应用程序 (javaw.exe) 应用程序关联的不同参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:07:06.793

您也许可以使用 ( [http://quartz-scheduler.org/](http://quartz-scheduler.org/) ) Quartz 调度程序或 java.util.Timer api 来定期唤醒并检查进程。每当您运行该进程时，我相信您可以获得可以存储的 PID 或进程 ID。定期唤醒并调用 shell 脚本来检查进程是否正在运行。如果没有，则使用 Runtime.getRuntime() 生成新进程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T10:28:11.533

如果您可以使用简单的解决方案，您的应用程序必须从应用程序的核心功能内部更新外部资源。如果外部资源有一段时间没有更新，你就知道你的应用程序的核心已经停止了。

如果您使用单独的线程来更新资源，您的核心功能将会崩溃，但线程会继续运行并且您什么也检测不到。

外部资源可以是文件。在那里写下当前的时间戳。如果时间戳有一段时间没有更新，那么应用程序已经崩溃。或者，如果您的监视器在单独的机器上以检测硬件崩溃，则写入网络套接字（如果监视器与您的应用程序一起崩溃，它就毫无用处）。

您的监视器必须知道 Java 进程的进程标识符，以便它可以在需要时杀死它并重新启动它。如果从 shell 脚本启动应用程序，则可以将进程标识符写入文件。

有一个十亿美元的产业生产这种软件监视器。这不是一项微不足道的任务。

# javascript - 正则表达式 - 后跟

> ID：10293114
> 
> 赞同：6
> 
> 时间：2012-04-24T06:56:25.550
> 
> 标签：javascript, regex

我怎样才能写一个匹配这个的正则表达式

```
123/456

123/456/? 
```

但不是这个

```
123/456/ 
```

我想在第二个 / 它后面必须跟一个？。

例如，我希望它匹配这个

```
'123/456'.match(X) // return ['123/456']
'123/456/?'.match(X) // return ['123/456/?']
'123/456/'.match(X) // return null 
```

**更新**

我错过了一件重要的事情。它不能以 '?' 结尾，像 '123/456/?hi' 这样的字符串也应该匹配

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:00:30.347

你可以试试这个正则表达式：`\d{3}/\d{3}(/\?.*)?`

它会匹配

*   3 位数
*   其次是`/`
*   后跟 3 位数字
*   后跟`/?any_text`（例如`/?hi`）（可选）

[此示例](http://regexpal.com/?flags=gm&regex=%5E%5Cd%7B3%7D/%5Cd%7B3%7D%28/%5C?.%2a%29?%24&input=123/456%0A123/456/?%0Abut%20not%20this%0A123/456/%0A123/456/?hi)`^`使用和等正则表达式锚点`$`，但如果您仅尝试匹配目标字符串，则不需要它们。

```
var result = '123/456/?hi'.match(/\d{3}\/\d{3}(\/\?.*)?/);
if (result) {
    document.write(result[0]);
}
else {
    document.write('no match');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T07:00:39.167

这个正则表达式可以工作`/^\d{3}\/\d{3}(\/\?.*)?/`

请参阅此[**JSFiddle**](http://jsfiddle.net/yTVPy/2/)。

注意：如果您认为它应该匹配任意数量的数字，请使用`\d+`而不是`\d{3}`. 后者恰好匹配 3 位数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:27:10.043

这个给你：

```
[0-9]+/[0-9]+(/\?[^ ]*)? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:02:04.790

你还有什么其他规则？

如果要接受最后一个字符以外的所有字符串`?`，请使用`"[^?]$"`

如果要接受以 开头`123/456`和可选结尾的字符串`/?`，请使用`"^123/456(/\?)?$"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T07:03:17.683

我认为这应该有效：

```
'123/456'.match(/^123\/456(\/\?)?$/) // returns ["123/456", undefined]
'123/456/'.match(/^123\/456(\/\?)?$/) // returns null
'123/456/?'.match(/^123\/456(\/\?)?$/) // returns ["123/456/?", "/?"] 
```

编辑：添加了其他案例

# wordpress - Google Analytics 不跟踪 Wordpress 目录

> ID：10293119
> 
> 赞同：0
> 
> 时间：2012-04-24T06:56:55.610
> 
> 标签：wordpress, google-analytics

只是想知道 GA 是否存在一个已知问题，无法跟踪具有 Wordpress 目录的网站？

它似乎能够跟踪我在该网站上的所有其他页面，但我们有一个由 Wordpress 提供支持的 /news/ 目录，它根本不支持它。这个目录是一个 Wordpress 博客，这显然是一个问题，但必须有一种方法来跟踪它与所有其他页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:07:56.523

Aaahhh... 听起来 google 分析跟踪代码出现在您的主要网站页面上，但不包含在应用于您网站的该子部分的 wordpress 模板中。

GA 跟踪代码必须在您要跟踪的**每个页面上对 google 可见。**

在浏览器中尝试“查看源代码”，并检查分析跟踪代码是否存在。

如果没有，您可以硬编码 GA 跟踪代码，或使用免费的 WordPress 插件之一为您完成，例如“Google Analytics”：

[http://wordpress.org/extend/plugins/googleanalytics/](http://wordpress.org/extend/plugins/googleanalytics/)

希望这会有所帮助 - 如果您仍有问题，请回复！

瑞克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:08:47.410

它可能不相关，但您是否检查过您的博客是否可索引？在设置 -> 隐私下，您可以检查它是否已启用。

另一种选择是为博客安装谷歌分析插件。如果您从已在使用的 GA 中输入相同的凭据，则应将其合并。我在我的博客和它的工作上使用[这个](http://yoast.com/wordpress/google-analytics/#utm_source=wordpress&utm_medium=plugin&utm_campaign=wpgaplugin&utm_content=v420)。

# java - 使用 Guava将多个集合合并到一个集合中

> ID：10293120
> 
> 赞同：4
> 
> 时间：2012-04-24T06:56:57.750
> 
> 标签：java, collections, merge, transform, guava

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T13:48:57.013

您可以使用函数来提取列表并使用 concat 来展平列表。这导致了一个Iterable。

```
List<A> input;
Function<A, List<B>> t = new Function<A, List<B>>() {
    @Override public List<B> apply(A input) { 
        return input.myListOfB; 
    }
};
Iterable<B> transform = Iterables.concat(Iterables.transform(input, t)); 
```

如果需要，您可以创建一个列表：

```
ImmutableList<B> asList = ImmutableList.copyOf(transform);
//or
List<B> newArrayList = Lists.newArrayList(transform); 
```

注意：通常，类的公共字段是静态的、不可变的或私有的。其他一切都会给你带来麻烦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T13:52:40.293

如果你让 A 类实现了 Iterable，你可以使用 Iterables.concat()。

```
public class A
    implements Iterable<B>
{
    public List<B> myListOfB;

    // from Iterable
    public Iterator<B> iterator ()
    {
        return myListOfB.iterator();
    }
} 
```

然后：

```
List<A> listOfAs = ...;
Iterable<B> allBs = Iterables.concat(listOfAs); 
```

把它放在另一个列表中：

```
List<B> listOfAllBs = Lists.newArrayList(allBs); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:19:45.987

这个怎么样？我只是粗略地表达了我认为你的意思：

```
public static void main(String[] args) {

    A a1 = new A();
    a1.bs = Lists.newArrayList(new B("1"), new B("2"), new B("3"));
    A a2 = new A();
    a2.bs = Lists.newArrayList(new B("a"), new B("b"), new B("c"));
    A a3 = new A();
    a3.bs = Lists.newArrayList(new B("!"), new B("@"), new B("#"));

    List<A> as = Lists.newArrayList(a1, a2, a3);
    List<B> lettersAndNumbers = method(as, new Predicate<A>() {
        @Override
        public boolean apply(A input) {
            for (B s : input.bs) {
                if (s.bVal.matches("^[a-zA-Z0-9]*$")) {
                    return true;
                }
            }

            return false;
        }
    });

    System.out.println("as : " + lettersAndNumbers);
}

static List<B> method(List<A> as, Predicate<A> pred) {
    List<B> newbs = Lists.newArrayList();
    Iterable<A> filtered = Iterables.filter(as, pred);
    for (A a : filtered) {
        newbs.addAll(a.bs);
    }

    return newbs;
}

class A {
    List<B> bs;

    @Override
    public String toString() {
        return "A{" + bs.toString() + "}";
    }
}

class B {
    String bVal;
    B(String bVal) {
        this.bVal = bVal;
    }
    @Override
    public String toString() {
        return "B{" + bVal + "}";
    }
} 
```

# c# - DotNetZip 创建损坏的存档（CRC 错误）

> ID：10293126
> 
> 赞同：4
> 
> 时间：2012-04-24T06:57:45.040
> 
> 标签：c#, zip, checksum, dotnetzip

DotNetZip 有一个奇怪的问题，我似乎无法找到解决方案。我现在已经搜索了几个小时，但我找不到任何关于此的内容，所以就到这里了。

```
var ms = new MemoryStream();
using (var archive = new Ionic.Zip.ZipFile()) {
    foreach (var file in files) {
        //                                string     byte[]
        var entry = archive.AddEntry(file.Name, file.Data);
        entry.ModifiedTime = DateTime.Now.AddYears(10); // Just for testing
    }
    archive.Save(ms);
}
return ms.GetBuffer(); 
```

我需要添加修改时间，这非常关键，但现在我只有一个虚拟时间戳。

当我用 WinRAR 打开文件时，它显示“存档意外结束”。每个单独的文件都有校验和 00000000，WinRAR 显示“存档格式未知或已损坏”。我可以修理它，这使它的尺寸缩小了 20%，一切正常。但这不是真的有用..

当我在添加所有条目后创建断点时，我可以看到`zip.Entries`所有条目都具有相同的错误 CRC，但所有数据似乎都在那里。所以问题不应该是我保存存档的方式。

我在其他地方使用我的文件集合没有问题，这增加了 DotNetZip 的奇怪之处。好吧，或者我误解了一些东西:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:09:30.503

`GetBuffer`肯定是错的。它返回 的内部缓冲区，`MemoryStream`通常比实际内容大。

要返回仅包含实际内容的数组，请使用`ToArray()`.

或者您可以小心处理消费代码中未完全填充的缓冲区。这将减少 GC 压力，因为您不需要为返回值分配一个全新的数组。

如果 zip-archive 很大，我也会考虑直接保存到文件中，而不是在内存中组装存档。

# java - JCombobox focusLost 没有触发——为什么？

> ID：10293135
> 
> 赞同：9
> 
> 时间：2012-04-24T06:58:27.437
> 
> 标签：java, swing, focus, jcombobox, focuslistener

我的代码中有一个`JCombobox`。我已经添加了`FocusLost event`. 但无论如何它并没有被解雇。我已经尝试了很多时间，但没有找到解决方案。

```
jcbItemType.addFocusListener(new java.awt.event.FocusAdapter() {
    public void focusLost(java.awt.event.FocusEvent evt) {
        jcbItemTypeFocusLost(evt);
    }
});

private void jcbItemTypeFocusLost(java.awt.event.FocusEvent evt)                                      
    {                                          
        // TODO add your handling code here:
        System.out.println("name=" + ((Component) evt.getSource()).getName());
        System.out.println("index=" + jcbItemType.getSelectedIndex());
    } 
```

但是控制台中没有打印任何内容。请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-24T21:06:16.060

我找到了一种非常简单的方法来解决这个问题。

JComboBox 默认编辑器有一个内部类 BasicComboBoxEditor$BorderlessTextField，它是获取和失去焦点的组件。

它可以通过简单地访问

```
Component component = comboBox.getEditor().getEditorComponent();  
if (component instanceof JTextField) 
    JTextField borderlesstextfield = (JTextField) borderless; 
```

然后像对任何 JTextField 一样添加焦点侦听器

```
borderlesstextfield.addFocusListener(new FocusListener() 
{
   public void focusGained(FocusEvent e) 
     {
     }
   public void focusLost(FocusEvent e) 
     {
     }
}}); 
```

现在您有一个 FocusListener 将按预期响应 ComboBox 获得和失去焦点

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T07:12:45.287

*   [FocusListener](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)不是[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)的正确侦听器，与另一个[侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)一起可以创建无限循环（尤其是可编辑的 JComboBox），

*   [FocusListener](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)是异步的，有时很难捕获事件是正确的命令，尤其是在 JComponents 也添加了另一个 Listener(s) 的情况[下](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)

示例如何从派生中监听[Focus](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)`JTextField / JFormattedTextField`

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ComboBoxTwo extends JFrame implements ItemListener {

    private static final long serialVersionUID = 1L;
    private JComboBox mainComboBox;
    private JComboBox subComboBox;

    public ComboBoxTwo() {
        String[] items = {"Select Item", "Color", "Shape", "Fruit"};
        String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
        mainComboBox = new JComboBox(items);
        mainComboBox.addItemListener(this);
        mainComboBox.addFocusListener(fcsListener);
        add(mainComboBox, BorderLayout.WEST);
        subComboBox = new JComboBox(subItems1);
        subComboBox.setPrototypeDisplayValue("XXXXXXXXXXXXXXXXXXX");
        subComboBox.addItemListener(this);
        add(subComboBox, BorderLayout.EAST);
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            if (e.getSource() == mainComboBox) {
                System.out.println("Source  : mainComboBox");
            } else if (e.getSource() == subComboBox) {
                System.out.println("Source  : subComboBox");
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new ComboBoxTwo();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
//
    private FocusListener fcsListener = new FocusListener() {

        @Override
        public void focusGained(FocusEvent e) {
            dumpInfo(e);
        }

        @Override
        public void focusLost(FocusEvent e) {
            dumpInfo(e);
        }

        private void dumpInfo(FocusEvent e) {
            System.out.println("Source  : " + name(e.getComponent()));
            System.out.println("Opposite : " + name(e.getOppositeComponent()));
            System.out.println("Temporary: " + e.isTemporary());
            final Component c = e.getComponent();//works for editable JComboBox too
            if (c instanceof JFormattedTextField) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        ((JFormattedTextField) c).selectAll();
                    }
                });
            } else if (c instanceof JTextField) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        ((JTextField) c).selectAll();
                    }
                });
            }
        }

        private String name(Component c) {
            return (c == null) ? null : c.getName();
        }
    };
} 
```

# php - PHP + Smarty：将 PHP+HTML 解析成字符串？

> ID：10293138
> 
> 赞同：0
> 
> 时间：2012-04-24T06:58:40.437
> 
> 标签：php, html, smarty, server-side

我将 PHP 与 Smarty 模板结合使用以在服务器端生成页面。目前，我正在加载一个页面，如下所示：

```
$smarty->assign('app', file_get_contents("some_content.php")); 
```

某些内容包含带有 PHP 标记的 HTML 和这些标记内的代码。

我希望该文件中的 PHP 内容在当前范围内（读取文件的脚本的内容），以便我定义的特定函数可用。我该怎么做呢？我能找到的所有信息都是关于 eval(...) 函数的，它似乎无法处理 HTML/PHP 混合：我是否需要执行 find/eval/replace 操作来实现所需的结果，还是有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:07:22.623

Ich，我真是个笨蛋。eval 的 PHP 手册上有一个答案，就在我的眼皮底下。[这是我忽略的答案](http://www.php.net/manual/en/function.eval.php#108091)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:10:26.490

在我看来，您发布的这段代码的简短片段表明那里通常有问题:)

但是，您可以通过执行以下操作来实现您想要实现的任何目标：

```
ob_start();
include("some_content.php");
$result = ob_get_clean();
$smarty->assign('app', $result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:13:47.673

您可以使用 {literal}...{/literal} smarty 标签按原样显示 smarty 模板中的任何内容。它用于传输 java 脚本和其他特定内容。

# python - python excel处理错误

> ID：10293143
> 
> 赞同：3
> 
> 时间：2012-04-24T06:59:21.237
> 
> 标签：python, excel, xlrd

我正在使用python进行excel处理。
我正在使用 xlrd 模块（版本 0.6.1）。

我很想获取大部分的 excel 文件，但对于一些 excel 文件，它给了我错误：

```
XLRDError: Expected BOF record; found 0x213c 
```

谁能让我知道如何解决这个问题？
提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:35:39.983

您所拥有的很可能是一个“XML Spreadsheet 2003 (*.xml)”文件……`"<!"`也就是`"\x3c\x21"`（XML 流以它开头）被解释为 little-endian number `0x213c`。

记事本：前两行：

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?> 
```

您也可以通过使用 Excel 打开文件然后单击`Save As`并查看显示的文件类型来检查这一点。当您在那里时，将其保存为 XLS 文件，以便您`xlrd`可以阅读它。

注意：此 XML 文件不是 Excel 2007+ XLSX 文件。XLSX 实际上是一个包含一堆 XML 流的 ZIP 文件（以 开头`"PK"`，而不是开头）。`"<?"`

# asp.net - 由特定关键字分隔的多个值的正则表达式

> ID：10293152
> 
> 赞同：1
> 
> 时间：2012-04-24T06:59:43.403
> 
> 标签：asp.net, regex, asp.net-mvc-3

我正在开发需要用户在文本框中添加多个 GroupName 的应用程序。
1\. GroupName 可以用“,”/“or”/“OR”分隔。
2.输入不能以“,”/“or”/“OR”开头或结尾。

例如：GroupName、GroupName 或 GroupName OR GroupName 或 GroupName、GroupName、GroupName、GroupName 或 GroupName

为此，我编写了一个正则表达式，但我无法实现第二点。到目前为止开发的正则表达式是
/^([a-zA-Z])(\s|[,\s]|[or\s]|[OR\s]?[a-zA-Z])*$/

如果社区中的某个人能参与帮助我，那将是很好的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:22:50.883

如果要验证输入：

```
/^[a-zA-Z]+(?:\s*(?:or|OR|,)\s*[a-zA-Z]+)*$/ 
```

*（[这里有解释](http://rick.measham.id.au/paste/explain.pl?regex=%5E%5Ba-zA-Z%5D%2b%28?%3a%5Cs%2a%28?%3aor%7COR%7C,%29%5Cs%2a%5Ba-zA-Z%5D%2b%29%2a%24)）

# facebook - Javascript SDK facebook Oauth 2.0

> ID：10293166
> 
> 赞同：0
> 
> 时间：2012-04-24T07:00:52.150
> 
> 标签：facebook, oauth-2.0

我获得了一个用户的 facebook 帐户的身份验证令牌，我将其存储在数据库中，但是当我在几天后使用它时，它会引发错误异常。*如何获得长期访问令牌*？

错误如下：

```
Received Facebook error response of type OAuthException:
Error validating access token: Session has expired at unix time 1333612800. 
```

如何获得不会过期的令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:07:14.983

您不能拥有不再过期的令牌，您只能生成最多持续 60 天的代码。

# c# - 当asp.net中的treeview SelectedNodeChanged事件时如何更改复选框状态为真？

> ID：10293169
> 
> 赞同：0
> 
> 时间：2012-04-24T07:00:59.863
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0

`SelectedNodeChanged`在我的 asp.net Web 应用程序中，我有一个启用了复选框的树视图控件。现在我想在事件触发时将复选框状态更改为 True 。

```
 protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
 {
            //code
 } 
```

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:10:34.170

SelectedNode 有一个`Checked`属性指向项目的复选框。您可以通过将`Checked`属性设置为**true**来将其设置为选中。

```
 TreeView1.SelectedNode.Checked = true; 
```

要检查所有子节点，您可以执行以下操作：

```
 foreach (TreeNode node in TreeView1.SelectedNode.ChildNodes)
    node.Checked = true; 
```

# documentation - IntelliJ Idea 中是否有显示光标下元素文档的按钮？

> ID：10293172
> 
> 赞同：4
> 
> 时间：2012-04-24T07:01:02.517
> 
> 标签：documentation, intellij-idea, javadoc, scaladoc

有时在 ScalaDoc/JavaDoc 页面中查看光标下元素的类型会很方便。令人惊讶的是，我找不到任何 IDE 内置的方法来执行此操作（尽管事实上我使用的大多数库都附有文档和源 jar）。它在那里吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T07:25:31.647

您可以使用`View -> Quick Documentation`（默认快捷键`Ctrl`+ ），也可以使用（默认快捷键+ ）`Q`在浏览器中显示 Javadoc`View -> External Documentation``Shift``F1`

# actionscript-3 - Flexicious DatagridColumns columnWidthMode='percent' 显示不正确

> ID：10293176
> 
> 赞同：0
> 
> 时间：2012-04-24T07:01:14.843
> 
> 标签：actionscript-3, apache-flex, datagrid, flexicious

我正在使用 Flexicious Datagrid 来显示一些基本信息。此数据网格的宽度和高度为 100%，基于父容器（HGROUP）。

当我将`columnWidthMode="percent"`模式应用于所有`DatagridColumns`属性`percentWidth`加起来为 100% 的所有位置时，最后一个`DatagridColumn`比所有其他列大得多，并且由于某种原因这会触发水平滚动条。我有一种感觉，DataGrid 不尊重 100% 的宽度，而是让它变得更大。

我错过了一些特殊的财产吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:51:19.307

我找到了解决上述问题的方法。

因为 Flexicous DataGrid 将属性`HorizontalScrollPolicy`设置为`auto`列没有按预期调整大小。通过删除此属性（通过不将其设置为特定值）水平滚动条不再可见，结果列正确缩放！

# delphi - 将单元自动添加到项目中

> ID：10293177
> 
> 赞同：5
> 
> 时间：2012-04-24T07:01:19.707
> 
> 标签：delphi, delphi-7, delphi-2006, toolsapi, opentools

我正在处理 和 中的一个组件`Delphi 7`，`Delphi 2006`我正在使用一个单元，我需要将其添加到`.dpr`自动删除该组件的项目文件中。就像 Eureka Log 自动将单元 'ExceptionLog' 添加到项目文件中的方式：

![在此处输入图像描述](../Images/92ac4c02b506dda7399995406e09c53b.png)

当我将组件放在项目中的任何表单上时，谁能告诉我如何以编程方式将一个单元添加到项目文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T11:35:01.873

您很可能必须为此使用 Open Tools API。

此外，它可能需要为您的组件编写一个[TSelectionEditor](http://docwiki.embarcadero.com/VCL/XE2/en/DesignEditors.TSelectionEditor)来触发单元的添加（我会尝试 RequiresUnit 方法）。

虽然有一种简单的方法可以将一个单元添加到活动项目（下面的代码），但这仅适用于活动项目，它可能不是表单所属的项目，您正在向其中添加组件。它还在uses子句的末尾添加了单位。

```
uses
  ToolsAPI;

var
  currentProject: IOTAProject;
begin
  currentProject := GetActiveProject();
  currentProject.AddFile('MyUnit.pas', True); 
```

您可以查看[GExperts 源代码](http://gexperts.svn.sourceforge.net/)，因为它包含一个可以解析单位和修改使用子句的类 (TUsesManager)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:19:00.123

奇怪的。

我曾经将我的默认 dpr 设置为几乎不包含任何内容，结果我的工具箱非常空。因此，如果它在我的工具箱中，它在 dpr 中 - 你有什么问题 - 通常如果它在工具箱中，它已经在 dpr 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:33:42.717

转到项目 > Eurekalog 选项并禁用 Eurekalog。

# actionscript-3 - 构建字节码比常规动作脚本有什么优势吗？

> ID：10293178
> 
> 赞同：2
> 
> 时间：2012-04-24T07:01:21.810
> 
> 标签：actionscript-3, flash, bytecode

我很好奇，使用字节码构建 SWF 比常规动作脚本有什么优势吗？

正如我所读到的，有一些方法可以稍微加快代码速度，但是有一些 as3code 不能做的事情吗？

编辑：请不要专注于编码风格、问题、类型检查和语法，假设我有外部 SWF 和 1 个用字节码编写的类，现在我想知道我可以从较低级别的编码中获得什么好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:16:15.623

Flash 编译器不会使用 Flash 播放器中所有可用的操作码，因此理论上，您确实可以通过“手动”编写操作码来提高性能。

例如，与 Flash 相比，Haxe 编译器可以利用 Alchemy OpCodes 并提供性能提升：

> 访问 Alchemy 操作码
> 
> Adobe Alchemy 使用的 SWF 播放器中隐藏有用于内存分配的操作码。Haxe 能够访问它们，从而为您提供低级内存访问，从而可以极大地提高速度。

[http://haxe.org/doc/why](http://haxe.org/doc/why)

不过，我不知道使用这些操作码有多安全。由于官方 Flash 编译器不支持它们，因此它们可能会在 Flash Player 的未来版本中被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T10:17:30.540

只是添加到 Laurent 发布的内容。ASC 是目前 Adob​​e 产品使用的 ActionScript 编译器（MXML 使用来自 ASC 的代码，Flash CS 中的编译器对其进行了自定义构建，但对实际编译器没有太大影响，而是充当前端/“胶水”链接器和其他实用程序）。

ASC 不是优化编译器。这意味着它在编译为低级语言时通常不会进行任何优化。它只对生成的字节码进行分析，以确保*它*没有错误。（编译器仍有可能从有效的 AS3 代码生成错误代码）。

您可以在字节码和 AS3 中编写的所有有效代码之间没有一一对应的关系。这意味着 AS3 将您限制在字节码中可能的子集。绝对有可能在生成的字节码中，当它在堆栈上时，您会看到如何更容易获得某个值，但 AS3 中没有工具可以从那里获取它。例如，如果您知道循环内的其余代码将永远不会读取/写入第一个寄存器，那么您可以避免创建依赖于第一个寄存器包含迭代器的循环迭代器。显然，当您分析字节码的处理方式时，您可以发现更多“功能”。

但是，重要的是要了解，除非您的目标是细粒度且非常具体的，否则本地优化几乎不会取得任何重大成果。例如，例如某些特定的密码算法或字符串解析例程等。手动优化较大的程序*确实很*困难。事实上，这太难了，你需要一个工具来至少验证你自己是否真的在优化。最后，你会发现自己使用这个工具来生成优化的代码变体并测试它们——这就是编译器的构建方式:)

# jquery - jQuery UI-Datepicker 多月自定义标题

> ID：10293180
> 
> 赞同：1
> 
> 时间：2012-04-24T07:01:25.323
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在使用 Datepicker UI 一次显示大约 12 个日历，我想为所有这些日历自定义一个通用标题。

我的想法是使用 Jquery 并添加一个元素`#ui-datepicker-div`，一个带有标题的 DIV。但是一旦显示日历就不会触发触发器，因此我无法在 datepicker 中替换/添加/删除 HTML 代码，也无法添加另一个 DIV 并将其放置在 datepicker 所在的同一位置。

感谢并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:44:46.800

您可以使用**beforeShow**事件进行更改。当您立即显示日历时，也会触发此事件。

```
$(yourDatepickerDivOrWhatever).datepicker({
    beforeShow: function(){
        // your changes to the datepicker headline here
    }
}); 
```

您还可以添加一个**数据**属性来表明您已经在此日历上进行了更改。

# image - 添加与类别相关联的附加次要图像

> ID：10293181
> 
> 赞同：0
> 
> 时间：2012-04-24T07:01:31.067
> 
> 标签：image, wordpress, categories, featured

我已经看到了在 wordpress 中将次要特色图片添加到帖子或页面的插件。我需要有“类别”的次要特色图片。我可以使用“分类图像”插件将图片与类别相关联。（http://wordpress.mfields.org/plugins/taxonomy-images/），但是，我想添加一个额外的辅助图像与类别相关联。请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:10:58.243

也许看看这个插件：[http ://wordpress.org/extend/plugins/category-images/](http://wordpress.org/extend/plugins/category-images/)

它似乎让你有多个图像....

瑞克

# jquery - 我们如何配置 Jquery Countdown 插件以使用 AJAX 调用？

> ID：10293185
> 
> 赞同：0
> 
> 时间：2012-04-24T07:02:03.113
> 
> 标签：jquery, php

我们想使用 Jquery Countdown 插件进行倒计时。它应该通过 AJAX 与 PHP 连接。基本上我们的门户需要这个倒计时（如果有一个超过 12 小时的 URL，那么该 URL 将自动从 Mysql 中删除。）

我们为此设计了一个代码，但是使用 AJAX 调用它不能正常工作。它工作正常期待ajax调用。

请看代码。

**HTML / Javascript**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>jQuery Countdown</title>
<link href="jquery.countdown.css" type="text/css" rel="stylesheet">
<style type="text/css">
#defaultCountdown { width: 240px; height: 45px; }
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="http://keith-wood.name/js/jquery.countdown.js">          </script>
<script type="text/javascript">
function serverTime(){ 
var time = null; 
$.ajax({url: 'http://localhost/portal/audit/test3.php', 
    async: false, dataType: 'text', 
    success: function(text) { 
        time = new Date(text); 
    }, error: function(http, message, exc) { 
        time = new Date(); 
}}); 
return time; 
}
$('#defaultCountdown').countdown({ 
until:liftoffTime, serverSync: serverTime}); 
   </script>
   </head>
    <body>
    <div id="defaultCountdown"></div>
    </body>
    </html> 
```

**PHP 代码**

```
<?php 
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1 
header("Expires: Fri, 1 Jan 2010 00:00:00 GMT"); // Date in the past 
header("Content-Type: text/plain; charset=utf-8"); // MIME type 
$now = new DateTime(); 
echo $now->format("M j, Y H:i:s O")."\n"; 
?> 
```

请为我推荐这个倒计时插件。我们从这个 url 使用了这个插件：- [http://keith-wood.name/countdownRef.html#serverSync](http://keith-wood.name/countdownRef.html#serverSync)

**更新**

```
<script type="text/javascript">
function liftOff() { 
    var time = null; 
    $.ajax({url: 'http://localhost/portal/audit/test3.php', 
        async: false, dataType: 'text', 
        success: function(text) { 
            time = new Date(text); 
        }, error: function(http, message, exc) { 
            time = new Date(); 
    }}); 
    return time; 
}
$('#defaultCountdown').countdown({ 
    until:liftoffTime, onExpiry: liftOff}); 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:05:42.717

答案在页面中，需要使用回调“onExpiry”

```
$(selector).countdown({ 
    until: liftoffTime, onExpiry: liftOff}); 

function liftOff() { 
    // run ajax here
} 
```

# oracle - 由于 IO 错误，连接到 Oracle 11g XE 失败：网络适配器无法建立连接

> ID：10293187
> 
> 赞同：0
> 
> 时间：2012-04-24T07:02:05.703
> 
> 标签：oracle, oracle10g, oracle11g, oracle-apex, oracle-xe

我在 Eclipse 中有一个动态 Web 项目，并试图通过 JDBC 连接到 Oracle 11g Release 2 Express Edition。但我收到以下消息的错误：

```
Could not connect to Oracle 11g XE Conn.
Error creating SQL Model Connection connection to Oracle 11g XE Conn. (Error: IO Error:     The Network Adapter could not establish the connection)
IO Error: The Network Adapter could not establish the connection
Error creating JDBC Connection connection to Oracle 11g XE Conn. (Error: IO Error: The Network Adapter could not establish the connection)
IO Error: The Network Adapter could not establish the connection 
```

补充一点，因为我使用的是 Apache Tomcat 6.0.35，所以我在 \conf 的 server.xml 文件中添加了 Resource 和 ResourceParams（用于我试图访问的数据库）。

```
<Resource name="jdbc/FlightDB" scope="Shareable" type="javax.sql.DataSource"
          auth="Container" description="Home Oracle 11g Express Edition"/>
        <ResourceParams name="jdbc/FlightDB">
            <parameter>
                <name>driverClassName</name>
                <value>oracle.jdbc.driver.OracleDriver</value>
            </parameter>

            <parameter>
                <name>url</name>
                <value>jdbc:oracle:thin:@server:1521:flightDB</value>
            </parameter>

            <parameter>
                <name>username</name>
                <value>system</value>
            </parameter>

            <parameter>
                <name>password</name>
                <value></value>
            </parameter>

        </ResourceParams> 
```

此外，我还在当前 Web 应用程序的 web.xml 中添加了 resource-ref 元素。

```
 <resource-ref>
        <res-ref-name>jdbc/FlightDB</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
   </resource-ref> 
```

但这无济于事，因为问题再次出现。

任何帮助将不胜感激。期待回复。

谢谢，

索姆纳特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:47:23.357

尝试以下网址

```
jdbc:oracle:thin:@localhost:1521:xe 
```

最后一部分是服务器的 SID，而不是数据库名称。数据库（或架构）名称由登录时的用户名确定。因此，如果您的数据库名称是 flightDB，那么还有一个名为 flightDB 的用户。还要检查用户是否有足够的权限。

# android - 无法添加窗口错误

> ID：10293188
> 
> 赞同：3
> 
> 时间：2012-04-24T07:02:12.223
> 
> 标签：android, exception, dialog

我正在使用 tabWidget。当我第一次从父类转到子类并选择日期时，我的子类中有一个日期选择器，它工作正常，当我再次从父类转到子类并选择日期时，应用程序崩溃并显示 logcat 结果“无法添加窗户”

它第一次工作正常，但下一次代码如下

```
import java.util.Calendar;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.TextView;
public class PlaceOrder extends Activity {
    public TextView tvDisplayDate,personName,Cname,cAdrress;
    public DatePicker dpResult;
    public Button btnChangeDate;
    Button cancel,submit;
    public int year;
    public int month;
    public int day;
    int requestCode;
    int resultCode;
    Intent data;
    String Name,cName,Title,Address,Phone,Email;
    static final int DATE_DIALOG_ID = 0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.placeorder);
        personName=(TextView)findViewById(R.id.firstName);
        Cname=(TextView)findViewById(R.id.Cname);
        cAdrress=(TextView)findViewById(R.id.CAddname);
        personName.setText(AccountInfo.fnameNlName);
        Cname.setText(AccountInfo.cName);
        cAdrress.setText(AccountInfo.cAdd);
        setCurrentDateOnView();
        addListenerOnButton();
        final PlaceOrder PO = this;
        cancel=(Button)findViewById(R.id.Cancel);
        cancel.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if(FastPkgMainActivity.fastPackge==1)
                {
                    Intent fastPkgQuote = new Intent(v.getContext(), FastPkgQuote.class);
                    StringBuffer urlString = new StringBuffer();
                    FastPkgQuote parentActivity = (FastPkgQuote)getParent();
                    parentActivity.replaceContentView("fastpkg1", fastPkgQuote);
                }
                else if(FastPkgMainActivity.fastPackge==2)
                {
                    Intent fastpkgQuoteNew = new Intent(v.getContext(), FastPkgQuoteNew.class);
                    StringBuffer urlString = new StringBuffer();
                    FastPkgQuoteNew parentActivity = (FastPkgQuoteNew)getParent();
                    parentActivity.replaceContentView1("fastPkg2", fastpkgQuoteNew);
                }
                // TO*DO Auto-generated method stub
            }
        }
        );
        submit=(Button)findViewById(R.id.Submit);
        submit.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                try {
                    Name=AccountInfo.fnameNlName.toString();
                    cName=AccountInfo.cName.toString();
                    Title=AccountInfo.title.toString();
                    Address=AccountInfo.cAdd.toString();
                    Phone=AccountInfo.phno.toString();
                    Email=AccountInfo.E_ID.toString();
                }
                catch (NullPointerException e) {
                    Name=" ";
                    cName=" ";
                    Title=" ";
                    Address=" ";
                    Phone=" ";
                    Email=" ";
                }
                // TODO Auto-generated method stub
                Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
                //String[] recipients = new String[]{
                    "mymail@email.com", "sales@fastpkg.com",
                }
                ;
                emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                new String[] {
                    "sales@fastpkg.com"
                }
                );
                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Placing an Order");
                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "CustomerDetails       " +
                " Name"+":  "+Name+
                "CompanyName:"+"  "+cName+
                "Title :"+Title+
                "Address: "+Address+
                "Phone #: "+Phone+
                "Email :"+Email
                );
                emailIntent.setType("text/plain");
                startActivityForResult(Intent.createChooser(emailIntent, "Send mail client :"),RESULT_OK);
                onActivityResult(requestCode, resultCode, data);
            }
        }
        );
    }
    protected void onActivityResult(int requestCode, int resultCode,
    Intent data) {
        if (requestCode == 0) {
            if (resultCode == RESULT_CANCELED) {
                if(FastPkgMainActivity.fastPackge==1)
                {
                    Intent fastpkgQuote = new Intent();
                    StringBuffer urlString = new StringBuffer();
                    fastpkgQuote.setClass(getParent(), FastPkgQuote.class);
                    FastPkgQuote parentActivity = (FastPkgQuote)getParent();
                    parentActivity.replaceContentView("fastPkg2", fastpkgQuote);
                }
                else if(FastPkgMainActivity.fastPackge==2)
                {
                    Intent fastpkgQuoteNew = new Intent();
                    StringBuffer urlString = new StringBuffer();
                    fastpkgQuoteNew.setClass(getParent(),
                    FastPkgQuoteNew.class);
                    FastPkgQuoteNew parentActivity =
                    (FastPkgQuoteNew)getParent();
                    parentActivity.replaceContentView1("fastPkg2",
                    fastpkgQuoteNew);
                }
            }
            else if(resultCode==RESULT_OK)
            {
                final PlaceOrder pOrder = this;
                Intent intent = new Intent();
                intent.setClass(pOrder, ThnkYouPage.class);
                startActivity(intent);
            }
        }
    }
    // display current date
    public void setCurrentDateOnView() {
        tvDisplayDate = (TextView) findViewById(R.id.tvDate);
        dpResult = (DatePicker) findViewById(R.id.dpResult);
        dpResult.setVisibility(View.INVISIBLE);
        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);
        // set current date into textview
        tvDisplayDate.setText(new StringBuilder()
        // Month is 0 based, just add 1
        .append(month + 1).append("-").append(day).append("-")
        .append(year).append(" "));
        // set current date into datepicker
        dpResult.init(year, month, day, null);
    }
    public void addListenerOnButton() {
        btnChangeDate = (Button) findViewById(R.id.btnChangeDate);
        btnChangeDate.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                showDialog(DATE_DIALOG_ID);
            }
        }
        );
    }
    @Override
    public  Dialog onCreateDialog(int id) {
        switch (id) {
            case DATE_DIALOG_ID:
            // set date picker as current date
            return new DatePickerDialog(this.getParent(), datePickerListener, year, month,
            day);
        }
        return null;
    }
    public  DatePickerDialog.OnDateSetListener datePickerListener = new
    DatePickerDialog.OnDateSetListener() {
        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
        int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;
            // set selected date into textview
            tvDisplayDate.setText(new StringBuilder().append(month + 1)
            .append("-").append(day).append("-").append(year)
            .append(" "));
            // set selected date into datepicker also
            dpResult.init(year, month, day, null);
        }
    }
    ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:15:42.383

在`OnCreateDialog`方法中，在行中：

```
return new DatePickerDialog(this.getParent(), datePickerListener, year, month,day); 
```

使用`application basecontext`而不是`this.getparent()`

它可能会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:14:42.963

而不是这样做：

```
return new DatePickerDialog(this.getParent(), datePickerListener, year, month,
            day); 
```

试试这个，看看它是否有效：

```
return new DatePickerDialog(PlaceOrder.this, datePickerListener, year, month,
                day); 
```

# spring - 使用 Spring 和异步代码测试 Hibernate

> ID：10293193
> 
> 赞同：1
> 
> 时间：2012-04-24T07:02:48.047
> 
> 标签：spring, hibernate, asynchronous

我有一个带有事件处理程序的事件驱动框架，可以通过 Hibernate 在 DB 中执行写入操作。我需要编写集成测试，但我不知道如何做到这一点。

事实上，当一个条件发生时，一个事件处理程序会在不同的线程中触发，这会写入数据库。我怎么能说那个写操作应该回滚呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:12:24.933

如果您想进行一些异步测试，请查看[Awaitility](http://code.google.com/p/awaitility/)。

我用过它，它做得很好:)

但是如果你想回滚你的写操作，你必须在正确的线程中获取事务。

# php - 如何为 value 属性添加另一个值？

> ID：10293196
> 
> 赞同：0
> 
> 时间：2012-04-24T07:02:53.050
> 
> 标签：php, mysql, fusioncharts

我正在使用 php 的融合图表。现在我有两个血压收缩压和透析压值。我必须在图表中并排显示它们，并且我正在使用 FCF_Column3D.swf。你能告诉我如何将第二个值添加到 php 文件中的 xml 属性。提前谢谢你拉姆塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:22:33.087

来自[fusioncharts.com](http://www.fusioncharts.com/demos/gallery/#column-and-bar)的示例：

```
<chart yAxisName='Sales Figure' caption='Top 5 Sales Person' numberPrefix='$' showBorder='1' imageSave='1' imageSaveURL='http://www.fusioncharts.com/ExportHandlers/PHP/_FCExporter.php'>

    <set label='Alex' value='25000'  />

    <set label='Mark' value='35000' />

    <set label='David' value='42300' />

    <set label='Graham' value='35300' />

    <set label='John' value='31300' />

</chart> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:03:08.717

拉姆塞：

当您说要为每个日期绘制 2 个数据点时，数据将变为多系列数据。

你不能有这样的 XML：

```
<set name="date" value1="systolic_value" value2="diaolic_value" /> 
```

您需要使用`FCF_MS_Column3D.swf`图表来绘制多系列数据。

多系列数据的语法是：

```
<chart> 
   <categories>
      <category name='date-1' />
      <category name='date-2' />
      <category name='date-3' />
   </categories>

   <dataset seriesName='systolic'>
      <set value='1' />
      <set value='2'/>
      <set value='3' />
   </dataset>

   <dataset seriesName='diaolic'>
      <set value='1'/>
      <set value='2'/>
      <set value='3'/>
   </dataset>
</chart> 
```

这应该非常适合您。

对于 PHP：

```
$strXML = "<chart>";
$categories = "<categories>";
$systolic = "<dataset seriesName='systolic'>";
$diaolic = "<dataset seriesName='diaolic'>";
while ($row = mysql_fetch_array($result)) {
    $categories .= "<category name='" . $row["ondate"] . "' />";
    $systolic .= "<set value='" . $row["systole_reading"] . "' />";
    $diaolic .= "<set value='" . $row["diastole_reading"] . "' />";
}
$strXML .= $categories . "</categories" . $systolic . "</dataset>" . $diaolic . "</dataset>" . "</chart>";

//$strXML now has the complete XML required to render the multi-series chart. 
```

# ruby-on-rails - 如何访问rails中的belongs_to关联中的字段

> ID：10293199
> 
> 赞同：1
> 
> 时间：2012-04-24T07:03:12.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个具有用户和授权模型的 Rails 应用程序。每个用户可以有许多授权，每个授权都属于一个特定的用户。我为此使用了belongs_to 关联。现在，当我尝试使用访问特定用户的授权时

```
user = User.find(params(:id))
auth = user.authorizations 
```

现在的问题是当我尝试使用访问授权字段时

```
auth.id 
```

我没有找到方法错误，但以下

```
Authorization.first.id 
```

工作正常。它们之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:08:59.803

如果用户`has_many :authorizations`然后`user.authorizations`返回用户授权的数组（实际上它返回`AR:Relation`但现在没关系）。因此，如果您想获得`id`可以使用的第一个授权，`user.authorizations.first`并且如果您想获得该用户的所有授权 ID，则可以使用`user.authorizations.map(&:id)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:09:50.797

```
@authorizations = user.authorizations 
```

将返回授权列表。所以你只需形成一个循环然后获取字段值。例子

```
@authorizations.each do |auth|
  auth.id
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:08:24.667

```
 auth = user.authorizations 
```

现在 auth 将是一个 Authorization 对象数组

```
 auth.first.id 
```

除非数组不为空，否则将起作用

# c - C 错误：预期为 `='、`,'、`;'、`asm' 或 `__attribute__' 之前

> ID：10293202
> 
> 赞同：2
> 
> 时间：2012-04-24T07:03:21.927
> 
> 标签：c, cygwin, powerpc

我正在尝试在 cygwin 下为 565 powerPC 编译 matlab 生成的代码。当我执行以下编译命令时：

```
@powerpc-eabi-gcc -gdwarf-2 -c -mno-sdata -DMODEL=testMacs -DRT -DNUMST=2 
-DTID01EQ=1 -DNCSTATES=0 -DRT_STATIC -DMT=0 -I. 
-IC:/Programs/MATLAB/R2007b/simulink/include 
-IC:/Programs/MATLAB/R2007b/extern/include -IC:/cygwin/gnu/powerpc/extern
2/includes 
-IC:/Programs/MATLAB/R2007b/rtw/c/src 
-IC:/Programs/MATLAB/R2007b/rtw/c/libsrc 
-IC:/cygwin/powerpc-eabi/powerpc-eabi/sys-include 
-IC:/macs_565_R14/Driver 
-IC:/cygwin/ecos/include 
-mcpu=505 -O1 -o ./obj/testMacs.o testMacs.c 
```

我收到以下错误：

```
In file included from testMacs.h:16:0,
                 from testMacs.c:11:
C:/cygwin/powerpc-eabi/powerpc-eabi/sys-include/math.h:12:1: error: expected `=', `,', `;', `asm' or `__attribute__' before `union'
C:/cygwin/powerpc-eabi/powerpc-eabi/sys-include/math.h:398:17: error: expected `=', `,', `;', `asm' or `__attribute__' before `const'
In file included from rtwtypes.h:12:0,
                 from testMacs.h:17,
                 from testMacs.c:11:
C:/Programs/MATLAB/R2007b/extern/include/tmwtypes.h:83:1: error: expected `=', `,', `;', `asm' or `__attribute__' before `typedef' 
```

math.h rtwtypes.h 是标准的未更改的头文件。

有谁知道我做错了什么或者我错过了编译器选项。

代码片段：testMacs.h：

```
/*
 * testMacs.h
 *
 * Real-Time Workshop code generation for Simulink model "testMacs.mdl".
 *
 * Model Version              : 1.6
 * Real-Time Workshop version : 7.0.1  (R2007b+)  21-Apr-2008
 * C source code generated on : Mon Apr 23 06:48:14 2012
 */
#ifndef RTW_HEADER_testMacs_h_
#define RTW_HEADER_testMacs_h_
#ifndef testMacs_COMMON_INCLUDES_
# define testMacs_COMMON_INCLUDES_
#include <stddef.h>
#include <string.h>
#include <math.h>            /* line 16*/
#include "rtwtypes.h"        /* line 17*/
#include "simstruc.h"
#include "fixedpoint.h"
#include "rt_logging.h"
#include "rt_nonfinite.h"
#endif 
```

数学.h：

```
/* math.h -- Definitions for the math floating point package.  */

#ifndef  _MATH_H_
#define  _MATH_H_

#include <sys/reent.h>
#include <machine/ieeefp.h>
#include "_ansi.h"

_BEGIN_STD_C

union __dmath             /* line 12*/
{
  __ULong i[2];
  double d;
}; 
```

……

```
/* Global control over fdlibm error handling.  */

enum __fdlibm_version
{
  __fdlibm_ieee = -1,
  __fdlibm_svid,
  __fdlibm_xopen,
  __fdlibm_posix
};

    #define _LIB_VERSION_TYPE enum __fdlibm_version
    #define _LIB_VERSION __fdlib_version

    extern __IMPORT _CONST _LIB_VERSION_TYPE _LIB_VERSION;      /*line 398*/

    #define _IEEE_  __fdlibm_ieee
    #define _SVID_  __fdlibm_svid
    #define _XOPEN_ __fdlibm_xopen
    #define _POSIX_ __fdlibm_posix 
```

rtwtypes.h：

```
/*
 * File: rtwtypes.h
 *
 * Definitions required by Real-Time Workshop generated code.
 *
 * Real-Time Workshop version: 7.0.1
 * Generated on: 2012-04-23 06:48:15
 */

#ifndef __RTWTYPES_H__
#define __RTWTYPES_H__
#include "tmwtypes.h"             /* line 12*/

/* This ID is used to detect inclusion of an incompatible rtwtypes.h */
#define RTWTYPES_ID_C08S16I32L32N32F1
#include "simstruc_types.h"
#ifndef POINTER_T
# define POINTER_T 
```

tmwtypes.h：

```
/*
 *      The following define is used to emulate when all integer types are
 *      32-bits.  This is the case for TI C30/C40 DSPs which are RTW targets.
 */
#ifdef DSP32
# define INT8_T    int
# define UINT8_T   unsigned int
# define INT16_T   int
# define UINT16_T  unsigned int
#endif
                                      /* line 83*/
/*
 * The uchar_T, ushort_T and ulong_T types are needed for compilers which do 
 * not allow defines to be specified, at the command line, with spaces in them.
 */

typedef unsigned char  uchar_T;
typedef unsigned short ushort_T;
typedef unsigned long  ulong_T; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:10:41.017

处理时似乎`_BEGIN_STD_C`没有被定义（可能还有其他一些宏）`math.h`。但是，那（至少`_BEGIN_STD_C`）应该由 照顾`_ansi.h`。

尝试使用`-M`选项进行编译以确保包含和/或编译正确的头文件，`-E`以便您可以查看预处理器输出。其中之一应该指出问题所在。

# regex - 替换 html 源代码的某些部分

> ID：10293203
> 
> 赞同：-1
> 
> 时间：2012-04-24T07:03:24.970
> 
> 标签：regex

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

如何删除 HTML 源代码的整个 div？要删除它，我会用空字符串替换，但我无法获得匹配的模式。始终给出类名。

例如，我需要删除类名为 zzz 的整个 div

```
<div class="zzz"> 
    <b>some html</b>
    (other div's could be inside) 
<div> 
```

希望可以有人帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:05:28.633

使用 jQuery，您只需要做`$("div.zzz").remove()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:08:37.480

对于这种事情，最好解析 DOM 并操作解析的对象。

因为 div 可能是嵌套的，你无法控制块的结束。

显然，如果您在客户端操作，您可以使用 jquery

```
$(div.xxxx).remove() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T07:07:09.150

比正则表达式更容易的是使用 jQuery

$('.zzz').remove()

# android - Android 应用程序/服务在指定时间以编程方式关闭蓝牙

> ID：10293207
> 
> 赞同：0
> 
> 时间：2012-04-24T07:03:33.013
> 
> 标签：android, service, bluetooth

我是安卓开发新手。我必须先询问一些原始的细节，我的道歉才能被接受。我打算开发一个android应用程序/服务，它应该让用户以小时格式输入时间（比如），然后在指定时间关闭手机的蓝牙连接。我想首先在模拟器上测试应用程序。我想知道2件事。首先，它是否会成为应用程序？或者它是一项服务？其次，请帮助我如何去做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:09:44.153

1.  [`Service`](http://developer.android.com/reference/android/app/Service.html)是应用程序的一个组件，而不是一个独立的实体。
2.  您应该使用它[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)来安排将来的活动。当它发生时，你[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)应该得到一个意图并启动一个服务，这将关闭 wifi。

# sql - 在 SQL Server 2005 中计算超过 24 小时

> ID：10293217
> 
> 赞同：0
> 
> 时间：2012-04-24T07:04:28.090
> 
> 标签：sql, sql-server, sql-server-2005

我需要创建一个存储大于 24 小时的列。例如`'25:00:00'`，`'129:23:12'`等）。

该列将用于在`datetime`间隔之间执行计算：“时间”。

我在尝试

```
SELECT  CAST((CAST(CAST(RIGHT('107:37', 6) as datetime) AS FLOAT))/(207.160) AS DATETIME) 
```

如果它

下面`'23:59'`而不是`'107:37'`正常工作。

`'107:37'`给出错误：

> 将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:34:35.587

只需将值存储为日期时间数据类型。您可以对日期时间数据类型进行数学计算，例如 +、-、SUM、MIN、MAX 等，也可以使用 DateDiff 和 DateAdd。您将遇到的唯一棘手的问题是将值显示为 HHHH:mm:ss。不过，您可以很容易地做到这一点：

```
DECLARE @datetime DATETIME
SET @datetime = 4.2
SELECT CAST((FLOOR(CAST(@datetime AS FLOAT)) * 24) + DatePart(Hour, @datetime) AS VARCHAR) + 
    ':' + CAST(DatePart(Minute, @datetime) AS VARCHAR)
    + ':' + CAST(DatePart(Second, @datetime) AS VARCHAR) 
```

# c# - 插入和更新代码在 ASP.NET 中不起作用

> ID：10293218
> 
> 赞同：1
> 
> 时间：2012-04-24T07:04:32.770
> 
> 标签：c#, asp.net

从 gridview 将数据插入/更新到 sql server 数据库时，我收到“**对象引用未设置为对象的实例”错误。**任何人请帮助。

```
protected void GridAllStore_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        storelocatorDataSetTableAdapters.storedbTableAdapter tastoreInsert = new storelocatorDataSetTableAdapters.storedbTableAdapter();
        if (e.CommandName.Equals("Insert"))
        {
            TextBox txtNewName = new TextBox();
            TextBox txtNewContact = new TextBox();
            TextBox txtNewAddress = new TextBox();
            txtNewName = (TextBox)GridAllStore.FooterRow.FindControl("txtNewName");
            txtNewContact = (TextBox)GridAllStore.FooterRow.FindControl("txtNewContact");
            txtNewAddress = (TextBox)GridAllStore.FooterRow.FindControl("txtNewAddress");
            tastore.Insert(txtNewName.Text, txtNewContact.Text, txtNewAddress.Text);    
            FillGrid();          
        }
    } 
```

**这是错误消息：**

> 你调用的对象是空的。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。
> 
> 源错误：
> 
> 第 107 行：txtNewContact = (TextBox)GridAllStore.FooterRow.FindControl("txtNewContact");
> 第 108 行：txtNewAddress = (TextBox)GridAllStore.FooterRow.FindControl("txtNewAddress");
> 第 109 行：tastore.Insert(txtNewName.Text, txtNewContact.Text, txtNewAddress.Text);
> 第 110 行：FillGrid();
> 第 111 行：}
> 
> 源文件：C:\Users\DELL\Documents\Visual Studio 2010\Projects\WebApplication1\WebApplication1\AdminPanel.aspx.cs 行：109

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:12:22.437

错误信息的意思`tastore`是`null`在第 109 行，所以`tastore`需要初始化。你`tastoreInsert`在函数头和函数`tastore.Insert`体中写的东西弄糊涂了。

编辑：对不起，这也可能意味着三个文本框中的任何一个都不存在。如果找不到控件，则 FindControl 返回 null，因此您也需要查看这些控件。调试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:28:41.353

FindControl 可以返回 null，当你访问 null 对象的 Text 属性时会抛出异常。您可以在访问 Text 属性之前检查 null。

```
 var txtNewNameTb = (TextBox)GridAllStore.FooterRow.FindControl("txtNewName");
        var txtNewContactTb = (TextBox)GridAllStore.FooterRow.FindControl("txtNewContact");
        var txtNewAddressTb = (TextBox)GridAllStore.FooterRow.FindControl("txtNewAddress");

        if (txtNewNameTb == null || txtNewContactTb == null || txtNewAddressTb  == null) { return; }

        if(tastore == null)  { return; }

        tastore.Insert(txtNewNameTb.Text, txtNewContactTb.Text, txtNewAddressTb.Text);    

        FillGrid(); 
```

在您的 ASPX FooterTemplate 中应该有 3 个文本框，如下所示。

```
<FooterTemplate> 
<asp:TextBox ID="txtNewName" runat="server" >
</asp:TextBox> 
<asp:TextBox ID="txtNewContact" runat="server" >
</asp:TextBox> 
<asp:TextBox ID="txtNewAddress" runat="server" >
</asp:TextBox> 
</FooterTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:41:14.193

使用`Convert.ToString(txtNewNameTb.Text)`
它会自动转换`NULL`为空字符串。

试试看：-

```
tastore.Insert(Convert.ToString(txtNewName.Text),Convert.ToString( txtNewContact.Text), Convert.ToString(txtNewAddress.Text)); 
```

# delphi - Delphi 7：没有渲染框架上的对象（错误？）

> ID：10293226
> 
> 赞同：2
> 
> 时间：2012-04-24T07:05:30.413
> 
> 标签：delphi, object, label, frame, invisible

我正在使用框架来覆盖父表单上的多个对象。该框架包含一个进度条、一个标签和一个按钮。当我激活框架时，只呈现进度条。标签和按钮保持不可见。在显示框架时在代码中将 .enable + .visible 设置为 true 也不起作用。我可以在 IDE 中完美地看到这些对象。它们仅在运行时消失。

我在此线程上读到 Delphi 7 中似乎存在可能导致此行为的错误，但我不确定：

[http://www.delphigroups.info/2/7/734850.html](http://www.delphigroups.info/2/7/734850.html)

有没有办法让 Delphi 渲染所有框架的对象？

更新：框架的 dfm 代码

```
object Frame2: TFrame2
  Left = 0
  Top = 0
  Width = 528
  Height = 116
  TabOrder = 0
  object Label1: TLabel
    Left = 8
    Top = 8
    Width = 32
    Height = 13
    Caption = 'Label1'
  end
  object Button1: TButton
    Left = 8
    Top = 72
    Width = 75
    Height = 25
    Caption = 'Button1'
    TabOrder = 0
  end
  object ProgressBar1: TProgressBar
    Left = 8
    Top = 32
    Width = 473
    Height = 24
    TabOrder = 1
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:44:10.810

尝试将您的组件放入面板中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:11:24.990

好吧，我发现了错误，我很惭愧，因为它是一个相当明显的错误：

单击按钮后，将渲染帧，包括其所有对象，但是，单击也会初始化 CPU 密集型函数。由于这是早期的代码，我还没有实现线程，所以该函数冻结了 gui 渲染，从而阻止了一些对象的出现。当我注释掉该功能时，这已“修复”。我也被这样一个事实吓坏了，框架上的进度条不仅出现了，而且尽管 CPU 使用率很高，但它还在不断更新。

再次感谢所有回复的人。

# c# - 如何在 C# 中生成 JavaScript 对象文字？

> ID：10293227
> 
> 赞同：4
> 
> 时间：2012-04-24T07:05:37.183
> 
> 标签：c#, json, c#-4.0, asp.net-mvc-4

我需要在 C# 代码中创建以下 JavaScript 对象文字，作为一个字符串，并且正在寻找一些关于如何最好地做到这一点的提示。

```
model: {
    id: "Id",
    fields: {
        Surname: { type: "string", validation: { required: true } },
        FirstName: { type: "string", validation: { required: true } },
        PrivateEmail: { type: "string", validation: { required: true } },
        DefaultPhone: { type: "string" },
        CompanyName: { type: "string" },
        CreateDate: { type: "date" },
        LastLoginDate: { type: "date" },
        IsLockedOut: { type: "boolean" }
    }
} 
```

这定义了一个带有*模型*属性的客户端对象，该属性反映了我的 MVC4 视图模型中每一行的外观。我可以使用普通反射来生成字符串文字，但我宁愿以某种方式利用 .NET 中已经可用的 JSON 序列化服务。为此，我认为我需要创建一个具有与上述 JS 属性相对应的属性的匿名对象。我怎么能这样做？

**编辑：** 我需要遍历视图模型类中的属性并生成一个 C# 对象，该对象将序列化为类似于上述的视图模型类的 JavaScript“转换”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T08:00:49.637

我认为他可能要问的是将 C# 对象转换为 JSON 字符串。

尝试这个：

[http://msdn.microsoft.com/en-us/library/system.json.jsonobject%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.json.jsonobject%28v=vs.95%29.aspx)

或者

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

编辑（有关如何使用的示例）：

```
Product product = new Product();
product.Name = "Apple";
product.Expiry = new DateTime(2008, 12, 28);
product.Price = 3.99M;
product.Sizes = new string[] { "Small", "Medium", "Large" };

string json = JsonConvert.SerializeObject(product);
//{
//  "Name": "Apple",
//  "Expiry": new Date(1230422400000),
//  "Price": 3.99,
//  "Sizes": [
//    "Small",
//    "Medium",
//    "Large"
//  ]
//}

Product deserializedProduct = JsonConvert.DeserializeObject<Product>(json); 
```

**编辑：**

这是来自[@yyamil](https://stackoverflow.com/questions/10293227/how-can-i-generate-a-javascript-object-literal-in-c/10293991#comment70564123_10293991)的评论：

如果您不想创建新类只是为了序列化 json 对象，也可以使用匿名对象：

```
var notificationPayload = new
{
    notification = new
    {
        title = "Title", 
        body = "body"
    }
};

string json = JsonConvert.SerializeObject(notificationPayload); 
```

# java - DecimalFormat 类不恰当地给出四舍五入的数字

> ID：10293228
> 
> 赞同：0
> 
> 时间：2012-04-24T07:05:38.067
> 
> 标签：java, android, decimalformat

我想显示最多 6 位小数的 GPS 坐标。例如，如果我的 GPS 位置是`x.yyyyyyyyyy`我想要显示`x.yyyyyy`的，为此我使用`DecimalFormat`类。但是，如果数字是 like `8.3456709012`，则以下代码的输出就像`8.34568`

```
_yPos = 8.3456709012;
DecimalFormat decimalFormat = new DecimalFormat("#.######");
String yCoord = decimalFormat.format(_yPos); 
```

而预期的输出是`8.345670`。任何人都可以告诉我这样做的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:12:11.410

用作`"0.000000"`格式化代码。

字符 # 用于“数字，零表示不存在”：[http ://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)

`DOWN`此外，如果您真的想要输出，则必须将舍入模式设置`8.345670`为`8.345671`：

```
DecimalFormat decimalFormat = new DecimalFormat("0.000000");
decimalFormat.setRoundingMode(java.math.RoundingMode.DOWN); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:14:42.170

Joni Salonen 的回答建议您如何保留尾随零，但坐标仍将是半舍入，因为默认舍入模式是 RoundingMode.HALF_EVEN。

您可以使用设置舍入模式

```
decimalFormat.setRoundingMode(RoundingMode.DOWN); 
```

此方法从 1.6 开始可用

参考[http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#setRoundingMode%28java.math.RoundingMode%29](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#setRoundingMode%28java.math.RoundingMode%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:11:58.913

是不是新的 DecimalFormat("#.#####0") ？

[http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)

# python - 为什么 Python 不能正确显示此文本？（UTF-8 解码问题）

> ID：10293234
> 
> 赞同：4
> 
> 时间：2012-04-24T07:06:25.700
> 
> 标签：python, html, utf-8, python-3.x

```
import urllib.request as u

zipcode = str(47401)
url = 'http://watchdog.net/us/?zip=' + zipcode
con = u.urlopen(url)

page = str(con.read())
value3 = int(page.find("<title>")) + 7
value4 = int(page.find("</title>")) - 15
district = str(page[value3:value4])
print(district)
newdistrict = district.replace("\xe2\x80\x99","'")
print(newdistrict) 
```

出于某种原因，我的代码以以下格式提取标题：`IN-09: Indiana\xe2\x80\x99s 9th`. 我知道`\xe`字符串是`'`符号的 unicode，但我不知道如何让 python 用`'`符号替换那组字符。我试过解码字符串，但它已经是 unicode 并且上面的替换代码没有改变任何东西。关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:29:14.830

当您调用 时`con.text()`，这将返回一个`bytes`对象。调用`str()`它会返回一个*表示*它的字符串 - 因此，如果您未指定编码，则使用转义而不是真实字符。（这意味着你的字符串最终会包含`\\xe2\\x80\\x99`各种其他不受欢迎的东西。）`bytes`与 Python 2 中的情况很相似`str`：它没有存储任何编码信息。`str`在 Python 3 中就像`unicode`在 Python 2 中一样；它有编码。所以，当把一个`bytes`对象变成一个`str`对象时，你需要告诉它它实际上是在什么编码中的。在这种情况下，就是`utf-8`.

与其调用`str()`它，不如使用`bytes.decode`; 是一样的，只是更整洁。

```
>>> import urllib.request as u
>>> zipcode = 47401
>>> url = 'http://watchdog.net/us/?zip={}'.format(zipcode)
>>> con = u.urlopen(url)
>>> page = con.read().decode('utf-8')
>>> page[page.find("<title>") + 7:page.find("</title>") - 15]
'IN-09: Indiana’s 9th' 
```

此处所做的唯一功能更改是将`bytes`对象解码为`'utf-8'`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T07:16:17.520

尝试这个

```
newdistrict = district.encode("**THE_INPUT_STRING_ENCODING**").replace("\\xe2\\x80\\x99","'") 
```

我认为您使用的是 utf-8，所以它应该看起来像这样

```
newdistrict = district.encode("utf-8").replace("\\xe2\\x80\\x99","'") 
```

但这不是使用 unicode 的正确原因。一旦你的文本被导入到程序中，你应该在所有地方都使用 unicode，除非你输出为输出时应该考虑外部目的地

所以更好的原因是在脚本顶部添加行

```
# -*- coding: utf-8 -*- 
```

将您输入的内容读取为 utf-8

```
page = con.read().decode('utf-8') 
```

然后做 newdistrict = District.replace( **u"YOUR_UNICODE_STRING"** ,"'")

例如

```
newdistrict = district.replace(u"דכעדחלגעדיל","'") 
```

如需更多帮助，请阅读此内容

[http://docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)

# c# - 从 C# 访问 ListBox 的 ScrollViewer

> ID：10293236
> 
> 赞同：17
> 
> 时间：2012-04-24T07:06:32.223
> 
> 标签：c#, wpf, xaml, listbox, scrollviewer

我想从 C#更改 a`ScrollViewer`的属性。`ListBox`

我在 Stackoverflow 上发现[了这个问题。](https://stackoverflow.com/questions/263485/how-do-you-access-the-scrollviewer-element-of-a-listbox-control-in-silverlight-c)我接受了已接受答案的建议，并将其`ScrollViewer`作为子类的属性公开。但是，这在下面显示的示例中似乎不起作用。该问题中的一些评论还指出这种技术不起作用。

XAML：

```
<Window x:Class="StackoverflowListBoxScrollViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

</Window> 
```

C＃：

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace StackoverflowListBoxScrollViewer
{
    public class MyListBox : ListBox
    {
        public ScrollViewer ScrollViewer
        { get { return (ScrollViewer)GetTemplateChild("ScrollViewer"); } }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var myListBox = new MyListBox();

            Content = myListBox;

            myListBox.Items.Add(new Button() { Content = "abc" });
            myListBox.Items.Add(new Button() { Content = "abc" });
            myListBox.Items.Add(new Button() { Content = "abc" });
            myListBox.Items.Add(new Button() { Content = "abc" });
            myListBox.Items.Add(new Button() { Content = "abc" });

            var button = new Button() { Content = "Check ScrollViewer" };
            button.Click += (s, e) =>
                {
                    if (myListBox.ScrollViewer == null)
                        Console.WriteLine("null");
                };
            myListBox.Items.Add(button);
        }
    }
} 
```

当我单击“Check ScrollViewer”按钮时，它会打印“null”。即，`ScrollViewer`未检索到。

我怎么去那个该死的`ScrollViewer`？:-)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-24T07:31:14.573

你可以试试这个小助手功能

用法

```
var scrollViewer = GetDescendantByType(yourListBox, typeof(ScrollViewer)) as ScrollViewer; 
```

辅助函数

```
public static Visual GetDescendantByType(Visual element, Type type)
{
  if (element == null) {
    return null;
  }
  if (element.GetType() == type) {
    return element;
  }
  Visual foundElement = null;
  if (element is FrameworkElement) {
    (element as FrameworkElement).ApplyTemplate();
  }
  for (int i = 0; i < VisualTreeHelper.GetChildrenCount(element); i++) {
    Visual visual = VisualTreeHelper.GetChild(element, i) as Visual;
    foundElement = GetDescendantByType(visual, type);
    if (foundElement != null) {
      break;
    }
  }
  return foundElement;
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-24T07:34:17.483

如果您将使用标准 ListBox，那么您可以将您的 getter 更改为这个：

```
public class MyListBox : ListBox
{
    public ScrollViewer ScrollViewer
    {
        get 
        {
            Border border = (Border)VisualTreeHelper.GetChild(this, 0);

            return (ScrollViewer)VisualTreeHelper.GetChild(border, 0);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-25T06:45:46.983

我修改了@punker76 的最佳答案，为 Visual 创建了一个扩展方法并提供了明确的返回类型：

```
 public static class Extensions
   {
      public static T GetDescendantByType<T>(this Visual element) where T:class
      {
         if (element == null)
         {
            return default(T);
         }
         if (element.GetType() == typeof(T))
         {
            return element as T;
         }
         T foundElement = null;
         if (element is FrameworkElement)
         {
            (element as FrameworkElement).ApplyTemplate();
         }
         for (var i = 0; i < VisualTreeHelper.GetChildrenCount(element); i++)
         {
            var visual = VisualTreeHelper.GetChild(element, i) as Visual;
            foundElement = visual.GetDescendantByType<T>();
            if (foundElement != null)
            {
               break;
            }
         }
         return foundElement;
      }

   } 
```

您现在可以通过 SomeVisual.GetDescendantByType 调用它，它返回已经正确键入的 ScrollViewer 或 null（这是默认值（T））

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T07:58:57.513

至于我，将 ScrollViewer 作为属性公开是一个坏主意。首先，不能保证 ScrollViewer 存在于模板中。其次，ScrollViewer 与 ItemsPanel 和 ItemContainerGenerator 同步工作。覆盖这是不常见行为的直接方法。

WPF 控件使用另一种模式。它们的类就像外部逻辑用法和内部视觉表示之间的中介。您的 ListBox 应该公开 ScrollViewer 可以在模板中使用的属性，但不能公开 ScrollViewer。通过这样做，您破坏了 WPF 标准，将您的控件限制为特定模板，并允许用户代码破解内部 ListBox 实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-24T12:36:08.133

ScrollViewer 的属性“附加”到 ListBox（参见[https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/attached-properties-overview](https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/attached-properties-overview)）。您可以通过以下函数获取或设置它作为依赖属性：

`public object GetValue (System.Windows.DependencyProperty dp);`

和

`public void SetValue (System.Windows.DependencyProperty dp, object value);`

例如，对于列表框 'lb'，您可以编写：

`lb.GetValue(ScrollViewer.ActualHeightProperty);` 或者 `lb.SetValue(ScrollViewer.HorizontalScrollBarVisibilityProperty, ScrollBarVisibility.Visible);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-02T22:01:24.007

这是@punker76 对 C# 6 的回答的另一个经过修改的通用版本：

```
public static class VisualExtensions
{
    public static T FindVisualDescendant<T>(this Visual element) where T : Visual
    {
        if (element == null)
            return null;

        var e = element as T;

        if (e != null)
            return e;

        (element as FrameworkElement)?.ApplyTemplate();

        var childrenCount = VisualTreeHelper.GetChildrenCount(element);

        for (var i = 0; i < childrenCount; i++)
        {
            var visual = VisualTreeHelper.GetChild(element, i) as Visual;

            var foundElement = visual.FindVisualDescendant<T>();

            if (foundElement != null)
                return foundElement;
        }

        return null;
    }
} 
```

# javascript - Javascript clearInterval 和 setInterval() 行为不符合预期

> ID：10293237
> 
> 赞同：1
> 
> 时间：2012-04-24T07:06:33.543
> 
> 标签：javascript, jquery, setinterval

```
var timer = 0
var startInterval = function( value ) {
    timer = setInterval( "checkNewPost();", value );
}
var stopInterval = function() {
    clearInterval( timer );
}

jQuery("#centerColumn a").click(function() {
    var a_id = jQuery(this).attr("id");
    var splitValue = a_id.split("-");
    var newValue = splitValue[1];

    if( newValue == "30" ) { 
        stopInterval;
        startInterval( 10000 );
    }
    else if( newValue == "1" ) {
        stopInterval;
        startInterval( 20000 );
    }
    else if( newValue == "5" ) {
        stopInterval;
        startInterval( 30000 );
    }
    else if( newValue == "pause" )
        stopInterval;
}); 
```

正如您在我的代码中看到的，逻辑非常简单，当 newvalue 等于 30 时，它将停止当前间隔并在 setInterval 上以 10000 秒重新启动它。而当newValue等于pause时，它会停止所有的setInterval。

这里的问题是它不能正确运行，我不知道为什么？有人可以指导我吗？您的帮助将不胜感激！

谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:10:21.657

代替

```
 stopInterval; // fonction simply put on stack 
```

和

```
 stopInterval(); // fonction call 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T07:08:08.600

你需要调用 stopInterval 函数

```
stopInterval(); 
```

我认为没有括号它就行不通

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T07:09:43.950

您的调用`stopInterval`缺少括号后的括号，因此您当前实际上并未调用该方法。

尝试使用`stopInterval();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T07:19:12.727

其他人都是对的，你应该使用`stopInterval()`. 这里还有一个更紧凑且 IMO 更易读的代码版本：

```
$('#centerColumn a').click(function () {
    var id = this.id.split('-')[1];
    var value = {
        30: 10000,
        1: 20000,
        5: 30000
    };
    id ==== 'pause' && stopInterval();
    if (value[id]) {
        stopInterval();
        startInterval(value[id]);
    }
}); 
```

# chef-infra - 为不同的服务器组织厨师食谱

> ID：10293239
> 
> 赞同：4
> 
> 时间：2012-04-24T07:06:53.357
> 
> 标签：chef-infra, cookbook

我有几个不同的服务器用于不同的目的。每个人都使用mysql，但是应该配置的有点不同。=> 不同的用户，不同的数据库。

我有一本安装 mysql 的食谱。

问题是，我应该把为 mysql 创建数据库和用户的脚本放在哪里？

应该是：

1.  mysql 食谱中的每个服务器（角色）都有一个脚本？（这样1台服务器的不同配置将在不同的食谱中）
2.  为每个角色创建一本食谱，其中我连接了与该角色有关的所有特殊配置。（这样 1 台服务器的不同配置将在 1 个特定位置，但我们将有 1 个额外的食谱）

我个人认为 #1 更好，因为无论如何我们都会在我的角色下加入不同的食谱。

**编辑**

它不仅仅涉及数据库。例如，我有一些应用程序需要以不同方式安装和配置 tomcats/jetties/其他容器（不同的端口，启用不同的模块）。不同版本的 settings.xml/jetty.xml 等应该存储在哪里？在食谱中

1.  安装tomcat或
2.  安装其他应用程序，需要tomcat？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:12:46.710

我建议包括 Opscode[数据库](https://github.com/opscode/cookbooks/tree/master/database)说明书，它提供了用于管理数据库和数据库用户的[LWRP 。](http://wiki.opscode.com/display/chef/Opscode+LWRP+Resources)

接下来，我建议创建一本通用说明书，将 LWRP 用于数据库和[数据包](http://wiki.opscode.com/display/chef/Data+Bags)。数据包将保存您的配置信息，并将隔离您的每台服务器配置差异。

这将允许您为每个服务器（用户、数据库等）定义数据，并编写一本可以提取数据并使用它的说明书。

此外，请查看[加密数据包](http://wiki.opscode.com/display/chef/Encrypted+Data+Bags)，它允许您将密码以加密形式存储在 Chef 服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:56:20.727

这个问题似乎在让你使用一个[环境](http://wiki.opscode.com/display/chef/Environments)，然后[根据环境有不同的数据包条目](http://wiki.opscode.com/display/chef/Environments)。

我会将这些服务器放置在适当的环境中，与它们的设置相匹配。

或者，您围绕角色提出的建议也很有意义。

# canvas - 在不断增长的画布上绘制音频的幅度轨迹——可能吗？

> ID：10293245
> 
> 赞同：1
> 
> 时间：2012-04-24T07:07:07.137
> 
> 标签：canvas, html5-audio

SO上有几个关于如何绘制音频信号实时波形的示例。（例如：[来自音频的 JavaScript 中的波形可视化](https://stackoverflow.com/questions/6170169/waveform-visualization-in-javascript-from-audio)。）

我有一个稍微不同的目标，我不确定它是否可能。

我正在构建一个转录应用程序，我想绘制波形幅度的轨迹（就像[这个屏幕截图](http://www.freesoftwareworkshop.com/wp-content/uploads/2008/08/audacity-screenshot.png)一样）。

问题是，我不知道音频会持续多久，所以，如果我实时绘制它，我不知道我的画布需要多大。

是在构建画布之前加载整个音频文件并检查其长度的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:57:01.667

我刚刚使用 processing.js 和 Chrome 的 Web Audio Api 做了一个类似于你的问题的解决方案。如果您不想事先加载整个文件，我建议将音频文件的持续时间和采样率保存在可以动态调用的数据库中。这应该足以在实际加载文件之前确定您需要的画布大小。

更重要的是，在我的应用程序中，无论音频文件的长度如何，我都希望画布大小保持恒定宽度，因此我只是水平缩放波形以适应波形窗口的宽度。

如果您需要任何代码示例来帮助您解决这个问题，请告诉我。

# android - 如何通过自动短信发送 GPS 数据？

> ID：10293247
> 
> 赞同：0
> 
> 时间：2012-04-24T07:07:09.600
> 
> 标签：android, gps, sms

因为这个，我痛苦了好几天。我想通过自动短信发送 gps 数据，但我做不到。我想访问我的变量 lat 和 logn 以通过 sendIntent.putextra 发送数据。请提出任何解决方案。我想使用 c2dm 但这太慢了，并且无法保证消息传递。我得到的错误是“lat/long 无法解析为变量”

这是代码。

```
public class SendSMSActivity extends Activity {

    Button buttonSend;
    public LocationManager locationManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        buttonSend = (Button) findViewById(R.id.buttonSend);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER,
                0,
                0,
                MyLocationListener());

        class MyLocationListener implements LocationListener {

            public void onLocationChanged(Location location) {

                String message = String.format(
                        "New Location \n Longitude: %1$s \nLatitude: %2$s",
                        location.getLongitude(), location.getLatitude());
                double lat = location.getLatitude();
                double logn = location.getLongitude();
                Toast.makeText(SendSMSActivity.this, message, Toast.LENGTH_LONG).show();
            }

            public void onStatusChanged(String s, int i, Bundle b) {

                Toast.makeText(SendSMSActivity.this, "Provider status changed",
                        Toast.LENGTH_LONG).show();
            }

            public void onProviderDisabled(String s) {
                Toast.makeText(SendSMSActivity.this,
                        "Provider disabled by the user. GPS turned off",
                        Toast.LENGTH_LONG).show();
            }

            public void onProviderEnabled(String s) {

                Toast.makeText(SendSMSActivity.this,
                        "Provider enabled by the user. GPS turned on",
                        Toast.LENGTH_LONG).show();
            }
        }

        buttonSend.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                try {

                    MyLocationListener obj = new MyLocationListener();

                    Intent sendIntent = new Intent(Intent.ACTION_VIEW);
                    sendIntent.putExtra("Location Point", lat);
                    sendIntent.putExtra("Location Point", lagn);
                    //  sendIntent.setType("vnd.android-dir/mms-sms");
                    startActivity(sendIntent);

                } catch (Exception e) {
                    Toast.makeText(getApplicationContext(),
                            "SMS faild, please try again later!",
                            Toast.LENGTH_LONG).show();
                    //e.printStackTrace();
                }

            }
        });

    }

    private LocationListener MyLocationListener() {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:27:06.097

变量`lat`和 `logn`是类的成员，所以`MyLocationListener`你不能那样使用它们！另请注意，您使用`lagn` 的`OnClickListener()`是我认为是错字:)

# objective-c - 只初始化一次类变量 - Objective-C

> ID：10293251
> 
> 赞同：0
> 
> 时间：2012-04-24T07:07:26.013
> 
> 标签：objective-c, uiviewcontroller, initialization

所以我一直试图让我的类（TrackViewController）中的一个变量只初始化一次。这样做是为了让视图控制器知道数据库中插入的 id。

简而言之：

我有一个 TrackManager，它通过 NSNotificationCenter 接收位置更新。单击按钮时，TrackViewController 使用 startTracking 方法。该函数在我的 TrackManager 中设置，并返回数据库中新插入行的 id。

这个 id 应该由 TrackViewController 保存，这样当我回到我的应用程序的主屏幕然后再回到 TrackViewController 时，它仍然知道这个 id。这需要调用方法 stopTrack:(long)trackID 来停止跟踪该轨道的位置并将数据库列“TrackFinished”设置为已完成。

我想用静态变量来解决这个问题，但我不想。

有没有办法在 TrackViewController 中只初始化一次变量。我尝试过 awakeFromNib、ViewDidLoad 等，但每次进入 TrackViewController 屏幕时都会调用这些方法。

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:14:37.630

尝试在您的 viewDidLoad 方法或 initMethod 中添加类似的内容。当然用你的变量的任何类型替换 NSObject 。

```
static dispatch_once_t pred;
static NSObject *shared = nil;
dispatch_once(&pred, ^{
    shared = [[NSObject alloc] init];
}); 
```

另一种方法是检查变量是否已经分配：

```
if (!variable)
    variable = [[NSObject alloc] init]; 
```

# android - 旋转图像上的点跟踪 - android

> ID：10293254
> 
> 赞同：0
> 
> 时间：2012-04-24T07:07:34.907
> 
> 标签：android, android-animation

在我的应用程序中，我有一个可以旋转的图像......旋转部分已完成。

现在我需要做的是跟踪旋转，如果图像的一部分在某个角度会有一定的回调，所以，问题是**我怎样才能只跟踪一个持续旋转的图像点？**有工作安排吗？这可以帮助我解决这个问题。

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:46:53.073

我假设您使用**android.graphics.Matrix**中的 Matrix 类来旋转图像。

然后矩阵包含您需要的所有信息，您可以通过矩阵转换 2d 点，如下所示：

```
float[] src = {x0,y0,x1,y1};
float[] dist = new float[4];
Matrix matrix = new Matrix();
matrix.preRotate(90.0f);
matrix.mapPoints(dist,src); 
```

例如，这应该将所有点旋转 90 度。

# java - 如何从 build.properties 获取一个值到 persistence.xml？

> ID：10293257
> 
> 赞同：2
> 
> 时间：2012-04-24T07:07:44.453
> 
> 标签：java, hibernate, build, persistence.xml

在我们的项目中，我需要从 build.properties 获取一些值到 persistence.xml。请让我知道是否有任何可能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:53:47.210

我必须自己回忆一下。正确的做法是这样的

```
 Map<String, String> props = new HashMap<String, String>();
    props.put("hibernate.connection.username", "sa");
    props.put("hibernate.connection.password", "");
    props.put("hibernate.connection.url", "jdbc:h2:mem:test_mem;MVCC=true");
    EntityManagerFactory factory = Persistence.createEntityManagerFactory("inmemory", props); 
```

您可以像我那样暂时从您的 build.properties 文件中读取用户名，而不是硬编码用户名。玩得开心。

院长

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:16:57.193

例如： build.properties 包含

```
 username = root
 password = shoot 
```

作为属性，那么您可以将 persistence.xml 更改为具有类似的值

```
 <username>@username@</username>
 <password value="@password@"/> 
```

那么你的 build.xml 应该是这样的。

```
<target name="replace">
    <property file="build.properties"/>
    <replace file="persistence.xml" token="@username@" value="${username}"/>
    <replace file="persistence.xml" token="@password@" value="${password}"/>
</target> 
```

这里 $username 和 $password 值由 ant 从`<property>`标签中自动识别，您可以使用键作为名称访问值。

# android - 来自 Android 中 SOAP 网络服务的 GetResponse

> ID：10293266
> 
> 赞同：1
> 
> 时间：2012-04-24T07:08:36.480
> 
> 标签：android, web-services, soap, android-ksoap2

我想从 SAP SOAP Web 服务获得响应，但我得到一个异常。

我正在使用以下代码：

```
package com.veee.pack;
import java.io.IOException;
import android.app.Activity;
import android.os.Bundle;
import java.io.IOException;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;
import org.ksoap2.transport.HttpTransportBasicAuth;
import org.ksoap2.transport.HttpTransportSE;
import org.w3c.dom.Element;
import org.xmlpull.v1.XmlPullParserException;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class WeservicesExampleActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //getting these values from wsdl file
       //username and password appended as URL Parameters
         final String NAMESPACE = "urn:sap-com:document:sap:soap:functions:mc-style";
         final String URL = "http://*********:8000/sap/bc/srt/wsdl/srvc_14DAE9C8D79F1EE196F1FC6C6518A345/wsdl11/allinone/ws_policy/document?sap-client=800&sap-user******&sap-password=************";
         final String METHOD_NAME = "Z_GET_CUST_GEN";
         final String SOAP_ACTION = "urn:sap-com:document:sap:soap:functions:mc-style/Z_GET_CUST_GEN";

        SoapObject request =new SoapObject(NAMESPACE, METHOD_NAME);

        request.addProperty("Input", "1460");
        request.addProperty("Langu", "d");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);

        envelope.setOutputSoapObject(request);

        HttpTransportSE httptransport=new HttpTransportSE(URL);
        httptransport.debug = true;
        try {

          //calling the services
         httptransport.call(SOAP_ACTION, envelope);

         Object result = (Object) envelope.getResponse();

        //getting the Response Here.

         System.out.println("Result" + result.toString());

        }
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

当我调试应用程序时，它终止于

```
httptransport.call(SOAP_ACTION, envelope); 
```

我通过在 android 中使用 ksoap2 运行了一些示例，它工作正常。我的 logcat 中出现以下异常：

```
04-24 12:19:17.935: WARN/System.err(1569): java.net.SocketTimeoutException
04-24 12:19:17.935: WARN/System.err(1569):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:130) 
```

请提供任何解决此问题的建议或发送我如何在 Android 中通过 XML 发出请求和接收响应。

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:14:03.567

避免在 android 中使用 SOAP.. 因为不推荐。

使用 android 官方支持的 Restful webservices。如果您的网络服务提供商无法提供 Restful 服务，...请忍受一些问题，例如应用程序有时无法运行，并且可能无法在某些 android 设备上运行。

要摆脱使用多个 ksoap2 驱动程序的 ksoap2 实现问题，请将网络调用的逻辑放在单独的线程中。

对 httptransport.call(SOAP_ACTION, envelope) 的调用；消耗大量内存，更多时间，因此避免在主线程中使用此调用。尝试使用新的创建模拟器和其中一个设备。KSOAP2 适用于 20% 到 50% 的安卓设备。有时它可能不适用于同一制造商的设备，例如它可能适用于 HTC Sense 2.3.4 并且可能不适用于 HTC Sense 2.3.5 版。

推荐使用 Restful Webservices。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:46:48.403

[**您可以使用具有依赖关系的 ksoap2 库 2.5.2**](http://www.lightsoft.se/?tag=android)手动设置超时限制，方法是使用

```
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL,Time_Out); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:40:45.113

当套接字在某个时间间隔内无法读取或接受时，会发生 socketTimeoutException。您应该始终为这样的事情做好准备，并在代码中使用 try/catch 来处理这些情况。

访问一般网络服务；确保您的应用程序包含`android.permission.INTERNET`在它的清单中，并检查是否可以从模拟器访问 Web 服务。您可以使用[这篇文章](https://stackoverflow.com/q/6493517/741249)中的代码来检查您的服务是否可以访问。

# java - 如何使用 Selenium 处理 PopUpWindow

> ID：10293268
> 
> 赞同：0
> 
> 时间：2012-04-24T07:08:39.193
> 
> 标签：java, javascript, firefox, selenium

我试图`PopUp / new Window`用 Java 处理一个特定的，`SeleniumServer`但它不起作用。我弄完了：

```
selenium.click("css=a[title=\"Some irrelevant title\"] > div.text");
Thread.sleep(5000);
    for (String s : selenium.getAllWindowNames()) {
    if (s.contains("_blank")) {
    selenium.selectWindow("name=" + s);
    selenium.windowMaximize();

    }
} 
```

但它不识别新窗口。如果我使用`getAllWindowIDs`or 名称或标题，它只会返回一个，即主窗口。

如果我`selenium.waitForPopUp("foobar", "9999")`在超时后使用它失败，这就是我使用常规`Thread.sleep()`.

我还可以做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:21:20.487

首先手动进行，在弹出窗口后单击按钮，只需使用 selenium ide 在该弹出窗口中记录一些内容..如果您获得窗口 id r 标题其他任何内容，然后在“waitforpopup”命令中使用该“id”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:21:40.873

这可以帮助：

```
selenium.RunScript("selenium.browserbot.findElement('css=a[title='Some irrelevant title']').target='my_window'");
selenium.RunScript("window.open('', 'my_window')");
selenium.click("css=a[title='Some irrelevant title']");
selenium.selectWindow("my_window");
selenium.waitForElementPresent("element_locator_at_popup") 
```

# google-chrome - QUOTA_EXCEEDED_ERR：chrome 中的 DOM 异常 22

> ID：10293271
> 
> 赞同：1
> 
> 时间：2012-04-24T07:08:54.327
> 
> 标签：google-chrome, wamp, quota

我正在使用 chrome `18.0.1025.162 m`，并且我在页面中有一个 iframe。
iframe 使用 style.css 文件。

我正在跑步。
在我的本地主机中使用它时，我收到以下错误消息：

> [QUOTA_EXCEEDED_ERR：http: //127.0.0.1](http://127.0.0.1:8009/style.css) :8009/style.css 中的 DOM 异常 22

如果 css 文件为空，我什至会收到此消息。

知道为什么我会收到此消息以及如何解决此问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:23:53.670

当我阻止 cookie 时，我遇到了同样的问题（我也使用较少）。我认为较少需要使用 cookie（请参阅 [LessCSS 停止处理样式](https://stackoverflow.com/questions/8647779/lesscss-stops-processing-styles)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:15:44.297

[通过从 html 中删除较少](http://lesscss.org/)的javascript 文件 (less-1.3.0.min.js)解决了问题（某种程度上）。
所以我不得不使用css insted。

# mysql - 为什么这是重复键？

> ID：10293273
> 
> 赞同：0
> 
> 时间：2012-04-24T07:09:01.343
> 
> 标签：mysql

为什么这是重复键？

```
mysql> describe tagged_chemicals;
+-------------+---------+------+-----+---------+-------+
| Field       | Type    | Null | Key | Default | Extra |
+-------------+---------+------+-----+---------+-------+
| bar_code    | text    | NO   |     | NULL    |       |
| rfid_tag    | text    | NO   | UNI | NULL    |       |
| checked_out | char(1) | NO   |     | N       |       |
+-------------+---------+------+-----+---------+-------+
3 rows in set (0.04 sec)

mysql> select * from tagged_chemicals;
+-------------+----------------------+-------------+
| bar_code    | rfid_tag             | checked_out |
+-------------+----------------------+-------------+
| 416444.0001 | 34443030304142453141 | N           |
+-------------+----------------------+-------------+
1 row in set (0.00 sec)

mysql> INSERT INTO tagged_chemicals (rfid_tag, bar_code) VALUES("34443030304144393935", "412577.0001B");
ERROR 1062 (23000): Duplicate entry '34443030304144393935' for key 'rfid_tag' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:17:46.413

发生这种情况是因为索引前缀。

前缀是实际放置到索引中的字符数量。

如果 prefix 为 1 - 那么您将无法插入行`ab`和`aa`，因为它们的前缀值是`a`因此会导致重复输入错误。

前缀用于减少存储在索引中的数据量，因为在大多数情况下，长字符串中的几个字符就足以加快查询速度。

更多详情请访问：[http ://dev.mysql.com/doc/refman/5.5/en/create-index.html](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)

# android - 检查是否有使用操作字符串注册的 BroadCastReceiver

> ID：10293275
> 
> 赞同：6
> 
> 时间：2012-04-24T07:09:17.973
> 
> 标签：android, android-intent, broadcastreceiver

所以我需要一种方法来确定是否有一个为特定操作字符串注册的广播接收器。

因此，要检查意图是否可用，我们有方法（来自 [http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)）

```
public boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> resolveInfo =
            packageManager.queryIntentActivities(intent,
                    PackageManager.MATCH_DEFAULT_ONLY);
   if (resolveInfo.size() > 0) {
        return true;
    }
   return false;
} 
```

哪个有效，但从我的测试中只查找活动注册到的意图。我为特定的操作字符串注册了一个 broadCastReceiver。并且它永远不会将其视为已注册。但如果我发射广播。广播做出反应。所以方法在这种情况下不起作用。

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T07:43:16.380

几乎相同，对于广播接收器，您应该调用[`PackageManager#queryBroadcastReceivers`](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryBroadcastReceivers%28android.content.Intent,%20int%29).

```
public abstract List<ResolveInfo> queryBroadcastReceivers (Intent intent, int flags)

Since: API Level 1
Retrieve all receivers that can handle a broadcast of the given intent.

Parameters
intent  The desired intent as per resolveActivity().
flags   Additional option flags.

Returns
A List<ResolveInfo> containing one entry for each matching Receiver. These are ordered from first to last in priority. If there are no matching receivers, an empty list is returned. 
```

查看文档，看看你还能得到什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T05:27:51.083

```
try {
    if (sendBroadcastReceiver != null) {
        this.unregisterReceiver(sendBroadcastReceiver);
    }
} catch (IllegalArgumentException e) {
    sendBroadcastReceiver = null;
} 
```

# android - Android 和 toast 期间

> ID：10293276
> 
> 赞同：0
> 
> 时间：2012-04-24T07:09:19.083
> 
> 标签：android, toast

我在方法 showText(); 当我们调用该方法时，该方法会显示 toast。在第二个活动中，我有一个按钮，当我单击该按钮时，必须显示我的 Toast。一切都很好，但是当我点击两次或多次时，我的吐司会显示很长时间。我只想在单击按钮时显示烤面包，当我再次单击时，第一个烤面包消失并再次显示。

```
public void showText(String msg) {

        Toast.makeText(this, msg, 1000).show();

} 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:12:56.993

您可以保留对刚刚创建的 Toast 的引用，而不是调用 show()

```
Toast toast = Toast.makeText(this, msg, 1000);
then toast.show();
and then later, call some methods on the toast like toast.cancel(); 
```

[http://developer.android.com/reference/android/widget/Toast.html](http://developer.android.com/reference/android/widget/Toast.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:22:16.830

你可以这样做

```
class YourActivity extends Activity implements OnclickListener
{

Toast toast = null;

void onclick(View v)
{
//call showText() method
}

// modify your showText as follows
public void showText(String msg) {

  if(toast != null)
   {
    toast.cancel();
    toast = null;
   }
   toast = new Toast(YourActivity.this);
   toast.setText(msg);
   toast.show()

}

} 
```

# java - Android从字符串数组动态创建警报对话框选项

> ID：10293278
> 
> 赞同：1
> 
> 时间：2012-04-24T07:09:22.500
> 
> 标签：java, android, android-layout, android-dialog

我想在单击列表视图项时创建一个对话框选项菜单。将静态字符串数组用于对话框选项时，它工作得很好。但是使用动态值它只显示一个以逗号分隔的项目。

这是我的代码

```
 StringBuilder builder = new StringBuilder();
        String delimiter = "";
        for(int i = 0; i< myarray.length;i++){
            builder.append(delimiter);
            builder.append(myarray[i]);
            delimiter = ",";  
        }

    String[] Options = new String[] { "Reply" ,builder.toString()};

    AlertDialog.Builder dialog = new AlertDialog.Builder(this);
    dialog.setTitle("TEst");
    dialog.setItems(Options, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int id) {

            if (id == 0) {

            }
            if (id == 1) {

            }

        }
    });
dialog.show(); 
```

# validation - 在 CKEditor 中验证最小字长

> ID：10293280
> 
> 赞同：1
> 
> 时间：2012-04-24T07:09:28.580
> 
> 标签：validation, ckeditor, min

是否有任何客户端 javascript 代码可以验证 CKEditor 中的最小字长。

例如，设置至少需要 500 个单词才能提交表单。

我尝试了一些 JS 验证脚本，但它们不适用于 CKEditor 字段。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T02:52:24.467

我记得我曾尝试使用 Simfatic Forms JS 表单字段验证代码来完成此操作。

我进一步相信该代码正在运行，但我无法弄清楚，因为它提供了两种显示验证消息的选项：

1.  CSS 方法，即在表单字段旁边显示验证消息。

2.  JS Alert 方法，即在对话框中显示验证消息。

我正在尝试实际上干扰 CK Editor 的第一种方法。然后我切换到第二种方法并且它起作用了。

# cordova - 如何整合sencha touch plus phone gap

> ID：10293289
> 
> 赞同：0
> 
> 时间：2012-04-24T07:09:46.837
> 
> 标签：cordova

我是 phonegap 的新手。我使用 sencha touch 处理了一些示例，并且我在 phonegap 上工作。现在我想开发一个同时使用 sencha touch 和 phonegap 的应用程序。Sencha touch 用于用户界面和 phonegap 用于访问 android 的本机功能。

```
 Thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:50:06.593

如果您已经有使用 PhoneGap apk 安装程序生成测试煎茶触摸的应用程序，将向您介绍该工具

按照步骤

1.- 在[https://build.phonegap.com/中注册](https://build.phonegap.com/)

2.- 在您的 PC 中创建一个包含两个新文件夹“assets”和“test”的新文件夹

3.- 在“资产”中移动你所有的煎茶触摸代码

4.- 在文件夹的根目录中，移动您的图标（应用程序）、index.html 文件（与 sencha touch 应用程序中使用的索引相同）和“config.xml”

5.- 将您的主要文件夹添加到 zip 并上传到 phonegap

6.- 最后，您获得了 android、windows phone、blackberry、ios、symbian 和 webos 的安装程序

config.xml [https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns       = "http://www.w3.org/ns/widgets"
    xmlns:gap   = "http://phonegap.com/ns/1.0"
    id      = "Name mobile"
    version     = "1.0.0">
    <name>name Mobile</name>
    <description>
    </description>
    <author href=""
        email="">
        cmujica
    </author>
    <gap:platforms>
        <gap:platform name="android" minVersion="2.3" />
        <gap:platform name="webos" />
        <gap:platform name="symbian.wrt" />
        <gap:platform name="blackberry" project="widgets"/>
    </gap:platforms>
    <icon src="icon.png" gap:role="default" />
    <gap:splash src="assets/images/bg-blue.png" />
    <feature name="http://api.phonegap.com/1.0/network"/>
    <!-- sample preference specification -->
    <!-- <preference name="autorotate" value="false" readonly="true"/> -->
</widget> 
```

# php - 如何中断执行并杀死子进程

> ID：10293292
> 
> 赞同：3
> 
> 时间：2012-04-24T07:09:56.007
> 
> 标签：php, signals, exec, pcntl

我正在尝试在 PHP CLI 脚本中调用一个长时间运行的 shell 命令`exec()`。但我无法终生弄清楚如何中断 PHP 脚本并杀死生成的子进程。好像我一打电话`exec()`，我的信号处理程序就被忽略了。以下代码按我的预期工作；如果我向进程发送 SIGTERM，它会`SIGTERM`立即回显并退出。

```
<?php
  declare(ticks = 1);

  function sig_handler($signo) {
    switch ($signo) {
      case SIGTERM:
        echo 'SIGTERM' . PHP_EOL;
        flush();
        break;
      default:
    }
  }

  pcntl_signal(SIGTERM, 'sig_handler', false);

  sleep(60);
?> 
```

但是，如果我替换`sleep(60);`为`exec('sleep 60');`，则在睡眠结束之前我不会到达我的信号处理程序。我有两个问题：

1.  如何获得信号以使用`exec`（或`shell_exec`或`proc_open`）？
2.  捕获信号后，如何杀死由 产生的任何子进程`exec`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:46:21.513

[文档](http://php.net/manual/en/function.exec.php)确实说：

> 如果使用此函数启动程序，为了使其继续在后台运行，程序的输出必须重定向到文件或另一个输出流。**否则将导致 PHP 挂起，直到程序执行结束。**

（强调我的。）我猜悬挂也适用于信号处理程序。

为了能够控制子进程，看起来你必须以老式的方式执行它们，使用 fork+exec：

```
switch ($pid = pcntl_fork()) {
  case -1: // failed to create process
     die('Fork failed');
  case 0: // child
     pcntl_exec($path,$args);
     die('Exec failed');
} 
```

一旦父进程在 中拥有子进程 ID `$pid`，它就可以使用 向子进程发送 SIGINT 信号`posix_kill($pid, SIGINT)`。

更新：显然你也可以使用`proc_open`and `proc_terminate`。

# javascript - 如何使用 jQuery 选择文本区域内的所有 URL？

> ID：10293299
> 
> 赞同：0
> 
> 时间：2012-04-24T07:10:30.903
> 
> 标签：javascript, jquery

我可以使用以下命令选择所有 img 链接以及 PDF 链接：

```
 $("a[href$='pdf']").append('<img src="pdf.jpg" style="width:20px;height:20px;" > ');
    $("a[href$='jpg']").append('<img src="jpg.jpg" style="width:20px;height:20px;" > '); 
```

现在我有一个文本区域

```
 <textarea id="mytxt" name='post' style='width:100%;height:400px;margin-top:10px;border:solid thin #F1F1F1;line-height:20px;'>

  </textarea>

 $("#mytxt:contains('.jpg')").append('<img src="jpg.jpg" style="width:20px;height:20px;" > '); 
```

上面的选择器不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:13:44.680

您不能`DOM`在文本区域内附加元素，因此上面的代码无法工作

发现事件时，选择器本身`$("#mytxt:contains('.jpg')")`可以正常工作`.jpg`：请参阅小提琴[http://jsfiddle.net/Mqu66/](http://jsfiddle.net/Mqu66/)

# c++ - 为什么我不能用大括号括起来的初始化列表构造队列/堆栈？(C++11)

> ID：10293302
> 
> 赞同：28
> 
> 时间：2012-04-24T07:10:35.193
> 
> 标签：c++, vector, c++11, initialization, queue

**方案一：**

```
#include <iostream>
#include <cstdlib>
#include <vector>

int main(){

    //compiles successfully 
    std::vector<int> vec{1,2,3,4,5};

    return EXIT_SUCCESS;
} 
```

* * *

**方案二：**

```
#include <iostream>
#include <cstdlib>
#include <queue>

int main(){

    //compiler error
    std::queue<int> que{1,2,3,4,5};

    return EXIT_SUCCESS;
} 
```

**错误信息：**

```
main.cpp: In function ‘int main()’:
main.cpp:7:31: error: no matching function for call to ‘std::queue<int>::queue(<brace-enclosed initializer list>)’
main.cpp:7:31: note: candidates are:
/usr/include/c++/4.6/bits/stl_queue.h:141:7: note: std::queue<_Tp, _Sequence>::queue(_Sequence&&) [with _Tp = int, _Sequence = std::deque<int, std::allocator<int> >]
/usr/include/c++/4.6/bits/stl_queue.h:141:7: note:   candidate expects 1 argument, 5 provided
/usr/include/c++/4.6/bits/stl_queue.h:137:7: note: std::queue<_Tp, _Sequence>::queue(const _Sequence&) [with _Tp = int, _Sequence = std::deque<int, std::allocator<int> >]
/usr/include/c++/4.6/bits/stl_queue.h:137:7: note:   candidate expects 1 argument, 5 provided
/usr/include/c++/4.6/bits/stl_queue.h:92:11: note: std::queue<int>::queue(const std::queue<int>&)
/usr/include/c++/4.6/bits/stl_queue.h:92:11: note:   candidate expects 1 argument, 5 provided
/usr/include/c++/4.6/bits/stl_queue.h:92:11: note: std::queue<int>::queue(std::queue<int>&&)
/usr/include/c++/4.6/bits/stl_queue.h:92:11: note:   candidate expects 1 argument, 5 provided 
```

**问题：**
为什么队列不能像向量一样初始化？
我想它们不是序列容器，但这有什么关系呢？
我确信有一个很好的理由，但我找不到任何解释。

gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-12-14T05:50:38.037

```
queue<int> q({1, 2, 3}); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-24T07:48:58.237

我不认为它与容器适配器而不是容器有任何关系（尽管我承认我不确定为什么省略了正确的构造函数）。

当你使用带括号的初始化列表时 `std::vector`，你正在使用这个（C++11 中的新）构造函数：

```
vector(initializer_list<T>, const Allocator& = Allocator()); 
```

查看 的定义`std::queue`，可用的构造函数有：

```
explicit queue(const Container&);
explicit queue(Container&& = Container());
template <class Alloc> explicit queue(const Alloc&);
template <class Alloc> queue(const Container&, const Alloc&);
template <class Alloc> queue(Container&&, const Alloc&);
template <class Alloc> queue(const queue&, const Alloc&);
template <class Alloc> queue(queue&&, const Alloc&); 
```

采用initialization_list 的构造函数明显不存在。

我很确定，尽管它是一个容器适配器，但如果需要，这样的构造函数将是微不足道的。举个例子：

```
#include <deque>
#include <initializer_list>
#include <iostream>

template <class T, class container=std::deque<T> >
class myqueue {
    container data;
public:
    explicit myqueue(std::initializer_list<T> t) : data(t) {}
    void pop() { data.pop_front(); }
    T front() const { return data.front(); }
    bool empty() const { return data.empty(); }
};

int main(){
    myqueue<int> data {1, 2, 3, 4};
    while (!data.empty()) {
        std::cout << data.front() << "\n";
        data.pop();
    }
    return 0;
} 
```

g++ 4.7 毫无问题地接受了这一点，并准确地产生了您期望的输出：

```
1
2
3
4 
```

尽管我没有使用任何其他编译器进行测试，但我看不出其他编译器无法正常工作的任何原因（当然，前提是它们实现了必要的功能）。

编辑：我刚刚浏览了委员会文件，建议在 C++ 中添加 initalizer_lists（例如，N1890、N1919、N2100、N2215、N2220），在我看来这就像一个简单的疏忽。许多早期的论文更具概念性，但 N2220 为工作论文提供了相当多的建议语言。对于`std::array`（例如）它特别指出不需要更改。然后它通过`deque`, `vector`, `[unordered_][multi_](set|map)`, 并显示每个所需的更改——但在任何一个方向上都没有提到堆栈或队列。没有建议增加对 的支持`std::initializer_list`，也没有（喜欢`std::array`）对它们的遗漏进行推理。

我的结论是这是一个简单的疏忽，可能有两个原因：1）适配器几乎是容器，但不完全是容器，2）适配器类似乎没有被大量使用，所以忘记了关于他们可能是相当容易的（当然，无处不在的第三个原因：大多数活跃的委员会成员都过度劳累）。

Edit2：我可能应该添加更多细节：因为`stack`和`queue`都可以接受另一个容器进行初始化，所以您可以很容易地执行以下操作：

```
std::stack<int> data(std::vector<int>{1,2,3,4}); 
```

这有点冗长，但不太可能导致任何效率损失（容器将作为右值引用传递，因此其表示将被“窃取”而不是复制）。但是有一个警告：如果您使用的容器类型与容器适配器下的容器不匹配，您将得到一个副本而不是移动（因此，可能会失去一些效率）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-24T07:14:04.350

`std::queue`并且`std::stack`实际上不是*容器*，它们是所谓的*容器适配器*，它使用容器（默认情况下`std::deque`）。因此，您不能将其初始化为其他容器。

**编辑**

对于能够使用初始值设定项列表的容器，它必须有一个以[`std::initializer_list`](http://en.cppreference.com/w/cpp/utility/initializer_list)作为参数的构造函数。容器适配器不这样做。如果这是故意的或对标准委员会的疏忽取决于任何人的解释。

# c# - 从 Syncfusion GridDataControl 中删除漏斗符号

> ID：10293313
> 
> 赞同：0
> 
> 时间：2012-04-24T07:11:05.603
> 
> 标签：c#, wpf, syncfusion

我在我的应用程序中使用了 Syncfusion GridDataControl，列标题在每一列中都包含一个类似符号的小过滤漏斗，这妨碍了我的应用程序的外观。我想从我的列标题中删除该符号。

我尝试了几个禁用选项，但没有运气。

该应用程序在 WPF、C# 中。

任何建议/帮助将不胜感激。

谢谢，马纳利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:07:44.987

Syncfusion 控件还支持 WPF 属性。

我试图禁用过滤漏斗符号，该符号出现是因为 的属性`showFilters`设置`GridDataControl`为`True`。即使将属性设置为 ，该符号仍然`showFilters`出现`False`。

这是因为它被`AllowFilter`默认为`true`.

为了完全禁用过滤器，我还必须手动将`AllowFilter`属性设置为`false`，因此问题得到了解决。

# android - Android - 视图无法在编辑模式下实例化。空指针异常

> ID：10293314
> 
> 赞同：3
> 
> 时间：2012-04-24T07:11:09.910
> 
> 标签：android, nullpointerexception

我正在尝试创建显示有关它的一些信息的自定义视图：名称、ID 等。

这是代码

我的观点。

```
public class ContactView extends RelativeLayout {

    private TextView name, id, status, sex;
    private Contact linkedContact;

    public ContactView(Context context) {
        this(context, null);
    }

    public ContactView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public ContactView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        LayoutInflater layoutInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layoutInflater.inflate(R.layout.myfirstcustomview, this);
        name = (TextView) findViewById(R.id.contactName);
        id = (TextView) findViewById(R.id.contactId);
        status = (TextView) findViewById(R.id.contactStatus);
        sex = (TextView) findViewById(R.id.contactSex);
        update();
    }

    private void update() {
        if (isInEditMode()) {
            name.setText("Dummy");
            id.setText("Test_ID");
            status.setText("Hello, there!");
            sex.setText("Unknown, dawg");
            return;
        }

        if (linkedContact == null) {
            name.setText("");
            id.setText("");
            status.setText("");
            sex.setText("");
        } else {
            name.setText(linkedContact.getName());
            id.setText(linkedContact.getId());
            status.setText(linkedContact.getStatus());
            String s = linkedContact.getSex() ? "Male" : "Female";
            sex.setText(s);
        }
    }

    public Contact getLinkedContact() {
        return linkedContact;
    }

    public void setLinkedContact(Contact linkedContact) {
        this.linkedContact = linkedContact;
    }

} 
```

myfirstcustomview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/contactName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:ellipsize="end"
        android:singleLine="true"
        android:text="" />

    <TextView
        android:id="@+id/contactId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/contactName"
        android:layout_below="@id/contactName"
        android:text="" />

    <TextView
        android:id="@+id/contactStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/contactId"
        android:paddingLeft="20dp"
        android:text="" />

    <TextView
        android:id="@+id/contactSex"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="" />

</RelativeLayout> 
```

Contact 只是一个包含字段、getter 和 setter 的类。

一切似乎都很好，但是当我将此视图放在我的 main.xml 并按 Ctrl+S 时，错误正在发生。

```
***.ContactView failed to instantiate.
java.lang.NullPointerException
    at ***.ContactView.update(ContactView.java:39) 
```

里面有什么问题？为什么正好在第 39 行？

感谢关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:13:46.457

您需要调用`findViewById`膨胀的布局：

```
 LayoutInflater layoutInflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    RelativeLayout layout = layoutInflater.inflate(R.layout.myfirstcustomview, this);
    name = (TextView) layout.findViewById(R.id.contactName);
    id = (TextView) layout.findViewById(R.id.contactId);
    status = (TextView) layout.findViewById(R.id.contactStatus);
    sex = (TextView) layout.findViewById(R.id.contactSex);
    update(); 
```

否则你会得到 null 返回。

请注意，您没有分配该`inflate`方法的返回布局。

# c# - 使用 LoginRadius 时如何从 LinkedIn 提供商处获取姓名、电子邮件或昵称

> ID：10293315
> 
> 赞同：0
> 
> 时间：2012-04-24T07:11:10.093
> 
> 标签：c#, openid, linkedin, loginradius

执行此操作时，输入来自 LinkedIn：

```
LoginRadiusSDKv2.LoginRadius loginradius = new LoginRadiusSDKv2.LoginRadius("<API SECRET>");
if (loginradius.IsAuthenticated)
{
    var userprofile = loginradius.GetBasicUserProfile(); 
```

没有返回有用的数据，只有 userprofile.ID。对于其他提供商，我显示电子邮件地址（对于 twitter，userprofile.ProfileName）。

我要为linkedin显示什么？我可以在 LoginRadius 网站上找到该特定提供商的任何文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:44:56.433

Todd - 如果该用户的 ID 提供商存在基本用户配置文件数据，您可以获得该数据。Linkedin 和 Twitter 不会在用户个人资料数据中提供电子邮件地址，因此您必须为其添加特殊检查：

```
if (userprofile.Email != null) {  } 
```

您可以使用以下参数获取更多数据：

```
userprofile.FirstName //first name of user
userprofile.FullName //full name of user
userprofile.Gender //gender of user
userprofile.ID //ID of user on provider
userprofile.LastName //last name of user
userprofile.MiddleName //middle name of user  
userprofile.NickName //nick name of user 
```

有关 ASP.net SDK 的更多文档，请参阅此链接：[https ://www.loginradius.com/developers/implementation/dot-net-websites](https://www.loginradius.com/developers/implementation/dot-net-websites)

**一些附加信息：**
要查看实时存在哪些数据，您可以在 PlayGround 部分查看：[https ://www.loginradius.com/developers/apiplayground](https://www.loginradius.com/developers/apiplayground)

如果您需要任何其他有关 LoginRadius 实施的信息，请告诉我。

谢谢，
迪帕克

# iphone - 存档的应用程序仅在 iOS 5.1 上崩溃，而不是在 5.0 上

> ID：10293318
> 
> 赞同：0
> 
> 时间：2012-04-24T07:11:27.057
> 
> 标签：iphone, ios, ios5

我已经归档了我的应用程序并进行了测试。

当我运行这个应用程序时，我在 ios5 版本上没有发现任何崩溃。（我没有 5.1 设备）但是我的客户有 5.1 版本，当他尝试点击应用程序内的某个按钮时崩溃了。

所以我问了他如下的崩溃报告

```
Date/Time:       2012-04-23 12:54:10.320 +1000
OS Version:      iPhone OS 5.1 (9B179)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
(0x3788488f 0x35d8a259 0x37884789 0x378847ab 0x38037a1b 0x9451 0x2493b 0x33f69e33 0x33f76391 0x33f76201 0x33f760e7 0x33f75969 0x33f756ab 0x33f69ca7 0x33f6997d 0xb397 0xc21f 0x3408f3cb 0x377de3fd 0x33f4bfaf 0x33f4bf6b 0x33f4bf49 0x33f4bcb9 0x33f4c5f1 0x33f4aad3 0x33f4a4c1 0x33f3083d 0x33f300e3 0x326e822b 0x37858523 0x378584c5 0x37857313 0x377da4a5 0x377da36d 0x326e7439 0x33f5ee7d 0x25f7 0x25b0)

    Thread 0 name:  Dispatch queue: com.apple.main-thread
    Thread 0 Crashed:
    0   libsystem_kernel.dylib          0x35d0332c 0x35cf2000 + 70444
    1   libsystem_c.dylib               0x31e51208 0x31e04000 + 315912
    2   libsystem_c.dylib               0x31e4a298 0x31e04000 + 287384
    3   libc++abi.dylib                 0x35456f64 0x35450000 + 28516
    4   libc++abi.dylib                 0x35454346 0x35450000 + 17222
    5   libobjc.A.dylib                 0x35d8a350 0x35d81000 + 37712
    6   libc++abi.dylib                 0x354543be 0x35450000 + 17342
    7   libc++abi.dylib                 0x3545444a 0x35450000 + 17482
    8   libc++abi.dylib                 0x3545581e 0x35450000 + 22558
    9   libobjc.A.dylib                 0x35d8a2a2 0x35d81000 + 37538
    10  CoreFoundation                  0x377da506 0x377cb000 + 62726
    11  CoreFoundation                  0x377da366 0x377cb000 + 62310
    12  GraphicsServices                0x326e7432 0x326e3000 + 17458
    13  UIKit                           0x33f5ee76 0x33f2d000 + 204406
    14  MyApp                           0x000025f0 0x1000 + 5616
    15  MyApp                           0x000025a8 0x1000 + 5544 
```

当我在终端中调试崩溃报告时，

> armv7 0x000025f0 主（在 MyApp 中）（main.m:14）
> 
> armv7 0x000025a8 开始（在 MyApp 中）+ 32

但我不确定它描述了什么，请让我知道它解释了什么

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:59:57.047

SIGABRT 是最通用的崩溃类型。例如，如果您正在运行 iPhone 3gs 并且您的客户正在使用较新的 iPhone 4/4s，那么您可以针对不同的架构（Armv6/7）进行编译，确保在这种情况下将其设置为 Armv6，并且它看起来也像其中一个您正在使用的方法可能已被弃用。在 main.m 中查找代码。有很多情况下你必须使用 iOS 版本差异代码（但大多数是用于 iOS4/iOS5）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:51:41.017

我有同样的问题，我在我的应用程序中使用核心数据，所以如果您使用核心数据，也许这个答案会对您有所帮助，我通过更改`persistentStoreCoordinator`商店代码修复了我的问题。

```
 ....
    - (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

        if (persistentStoreCoordinator != nil) {
            return persistentStoreCoordinator;
        }

        NSURL *storeUrl = [NSURL fileURLWithPath:[[self applicationDocumentsDirectory] stringByAppendingFormat:@"yourdb.sqlite"]] ;
    .... 
```

检查这一行

```
NSURL *storeUrl = [NSURL fileURLWithPath:[[self applicationDocumentsDirectory] stringByAppendingFormat:@"yourdb.sqlite"]] ; 
```

将上面的行更改为

```
NSURL *storeUrl = [NSURL fileURLWithPath:[[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"yourdb.sqlite"]] ; 
```

这刚刚解决了我的问题。

# css - 打印时避免 div/tables 被剪切

> ID：10293321
> 
> 赞同：0
> 
> 时间：2012-04-24T07:11:41.673
> 
> 标签：css, html, cut

我正在使用可编辑的发票模板制作发票。它在浏览器上看起来很棒，但是当在表格中添加一定数量的项目时，底部（如图所示）会像这样被切割。我该如何解决？我希望它在项目很多时自动打印到第二页，并在合适时打印在第一页上。

谢谢！

![在此处输入图像描述](../Images/a270b8848551031a64fe0243a63344d8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:20:39.417

对于**表**，您应该使用`<thead>`,`<tbody>`和`<tfoot>`标签。如果需要，您应该进行试验`<tfoot>`。其他两个非常有用。您的表格的标题将在每一页上重复，这将使您的表格看起来不那么削减。`<tfoot>`还将复制您在每一页上定义为页脚的内容，这可能是不需要的。

对于**div**，您应该尝试使用`page-break-before`或`page-break-after` **CSS**命令。虽然如果您有一个页面填充 div，这些对您没有帮助，但它们可能会帮助您处理较小的 div。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-15T19:18:52.173

尝试为 div 添加这种 css 样式：

```
page-break-inside: avoid; 
```

# android - 如何使位图角透明

> ID：10293326
> 
> 赞同：0
> 
> 时间：2012-04-24T07:12:00.873
> 
> 标签：android, bitmap, transparency

我需要删除/移除/设置透明位图的右上角（例如 10x10 像素）。

我有一个 60x60px 的位图，我想删除 10x10 的右上角。我试图用 Canvas & Paint 做到这一点，但我不能:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:27:25.300

为什么不在 60x60 图像上画一个 10x10 的黑色或白色（或任何颜色）补丁...最终结果，它似乎正是您想要的样子！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:16:55.133

创建一个新的drawable并添加以下行：

```
<corners android:topRightRadius="10px" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:57:23.827

我找到了解决方案...

使用 Bitmap.getPixels 和 Bitmap.setPixels 我解决了这个问题。

谢谢！

# c# - c# 可执行控制台应用程序的生命周期（如果有）是什么？

> ID：10293329
> 
> 赞同：3
> 
> 时间：2012-04-24T07:12:12.027
> 
> 标签：c#, console-application

我有兴趣了解 C# 控制台应用程序是否存在任何类型的生命周期，类似于 ASP.Net 生命周期。

我特别感兴趣

*   大会决议 - 什么时候发生
*   编译 - 该方法如何`static Main`影响依赖对象的编译

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:24:07.277

通常，每个方法在第一次执行时都会被 JIT 处理，并根据需要再次进行程序集解析，这*通常*意味着“在使用我们还不需要的程序集的方法的 JIT 期间”（但也可能意味着：通过反射） .

`static Main`与任何其他方法一样工作；您使用的任何内容都`Main`将在`Main`开始执行之前解决。在某些情况下，您可能希望（帮助调试）：

```
static int Main(string[] args) {
    try {
        return MainImpl(args);
    } catch(Exception ex) {
        // .. do something
        return -1;
    }
}
[MethodImpl(MethodImplOptions.NoInlining)]
static int MainImpl(string[] args) { ... } 
```

*如果通常*在`Main`（但现在在`MainImpl`）中的代码导致程序集解析错误，这很有用……因为如果不能首先成功地 JITted ，你就不能`catch`在其中做某事。`Main``Main`

至于生命周期...

*   入口点已启动 ( `Main`)
*   当没有非后台线程处于活动状态时，应用程序退出；对于典型的线性控制台 exe，表示“`Main`退出时”，但在线程服务器示例中可能更复杂
    *   或者它可以从内部或外部提前终止

# django - 我对使用 super() 的建议不正确吗？

> ID：10293336
> 
> 赞同：2
> 
> 时间：2012-04-24T07:12:25.480
> 
> 标签：django, overloading, python-2.7, super

我在这里看到了很多答案，其中推荐的从 Django 重载给定默认方法的操作过程是简单地从该原始方法复制代码，并将其与您的修改一起包含在所述方法的重载版本中。

例如，[给出的答案](https://stackoverflow.com/questions/9541981/django-class-based-view-updateview-howto-pass-a-hidden-value-into-the-form/9542151#comment13243951_9542151)：

```
class MyUpdateView(UpdateView):
    def form_valid(self, form):
        self.object = form.save(commit=False)
        self.object.user = self.request.user
        self.object.save()
        return HttpResponseRedirect(self.get_success_url())

   # the default implementation of form_valid is...
   # def form_valid(self, form):
   #     self.object = form.save()
   #     return HttpResponseRedirect(self.get_success_url()) 
```

所以回答者所说的默认的两行`form_valid`实际上并不是默认代码，而是通过继承执行的代码。无论如何，他们的回答删除了任何 Django 代码的执行，`form_valid`并用直接`HttpResponseRedirect()`调用替换它。

我将编写此方法的方式如下：

```
class MyUpdateView(UpdateView):
    def form_valid(self, form):
        self.object = form.save(commit=False)
        self.object.user = self.request.user
        return super(MyUpdateView, self).form_valid(form) 
```

Django 自己的代码遵循这个约定。取自`views/generic/edit.py`第 111 行：

```
def form_valid(self, form):
    self.object = form.save()
    return super(ModelFormMixin, self).form_valid(form) 
```

`form_valid`这是另一个问题的回答者所指的真正默认版本。

所以这个问题的重点是：**有什么理由我不应该`super()`在我的项目中以这种方式使用，就像 Django 的代码在内部使用它一样？**对我来说，优势在于，如果 Django 能够更新这些视图在内部工作的方式，那么我的代码（它只是扩展并继续执行 Django 的）将保持兼容的机会要好得多。此外，它使我无法通过简单地执行现有代码并进行修改来重写已经编写的代码。这不是`super()`'s 的预期用途之一吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:21:09.467

是的，这是有原因的。

让我们用实际的 Django 方法替换您的`super`调用。

```
class MyUpdateView(UpdateView):
    def form_valid(self, form):
        self.object = form.save(commit=False)
        self.object.user = self.request.user
        self.object = form.save() # oops, we redefined self.object, user won't be saved
        return HttpResponseRedirect(self.get_success_url()) 
```

So this won't work. Of course using `super` is always DRY'er and better, but it's not always possible.

In your example from Django source it is another situation: the child does saving and the parent does redirection. No "overlaps" here.

# php - 我如何使用 php 验证所有国家/地区的电话号码

> ID：10293338
> 
> 赞同：0
> 
> 时间：2012-04-24T07:12:30.440
> 
> 标签：php

有没有办法用php验证所有国家的电话号码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:17:03.890

您可以通过使用 preg_match 来实现这一点，我认为不存在任何自动验证

通过使用数据库存储格式，然后检查输入电话号码的格式

```
int preg_match ( string $pattern , string $subject [, array &$matches [, int $flags = 0 [, int $offset = 0 ]]] ) 
```

例如。，

```
<?php
// The "i" after the pattern delimiter indicates a case-insensitive search
if (preg_match("/php/i", "PHP is the web scripting language of choice.")) {
    echo "A match was found.";
} else {
    echo "A match was not found.";
}
?> 
```

看到这个 [http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:20:12.303

从以下位置获取有关国家电话号码起始代码的信息：http:
[//www.international-dialing-codes.net/](http://www.international-dialing-codes.net/)
插入数据库，创建数组，进行循环，它将从数据库中获取信息，然后创建 foreach .. 类似那..

# perl - PERL如何将不在同一行的字符串分组

> ID：10293339
> 
> 赞同：2
> 
> 时间：2012-04-24T07:12:32.607
> 
> 标签：perl

内部文本文件

```
Letter A = "AAA"
Letter B = "BBB" 
```

我尝试：

```
perl -p -e 's/(Letter A \=)(.*\")(\n+)(Letter B \=)/$1$2$3$4/g' text 
```

但它不起作用。问题似乎在`\n`.

任何想法？

其实我想换个词，怎么办？
从：
字母 A = “AAA”
字母 B = “BBB”
至：
字母 A = “BBB”
字母 B = “AAA”

如果两行之间有其他单词。还有其他解决方案吗？

ABCABC
字母 A = "BBB"
字母 B = "AAA"
DSAAS
TRQWTR
字母 C = "DDD"
字母 D = "CCC"
SDAGER
LPITET

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:16:36.320

`-p`将输入拆分为行，这意味着您的模式将永远不会在`\n`任何地方看到 a ，而是在它正在查看的文本的末尾。如果要进行多行匹配，则需要编写一个实际脚本或更改输入记录分隔符，使其不会按行拆分（可能`-0777`使用“slurp”模式）。

```
perl -0777 -p -e 's/(Letter A =)(.*")(\n+)(Letter B =)/$1 Hello$2$3$4 Hello/' test2
Letter A = Hello "AAA"
Letter B = Hello "BBB" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:40:16.620

如果你把它放到一个小程序中，你可以做这样的事情。顶部注释掉的部分表明它适用于不止一对线。不过，按照我构建它的方式，您必须通过管道输入文本文件。

```
# my $text = qq~Letter A = "AAA"
# Letter B = "BBB"
# Letter C = "CCC"
# Letter D = "DDD"~;
# 
# my @temp = split /\n/, $text;
my @temp = <>;

for (my $i=0; $i <= $#temp; $i+=2) {
  $temp[$i] =~ m/"(\w+)"/;
  my $w1 = $1;
  $temp[$i+1] =~ s/"(\w+)"/"$w1"/;
  my $w2 = $1;
  $temp[$i] =~ s/"$w1"/"$w2"/;
}
print join "\n", @temp; 
```

输出：

```
Letter A = "BBB"
Letter B = "AAA"
Letter C = "DDD"
Letter D = "CCC" 
```

如果中间可以有其他行，这就是代码的样子。

```
my $text = qq~Letter A = "AAA"
testtesttest
Letter B = "BBB"
loads 
of text
Letter C = "CCC"
Letter D = "DDD"
Letter E = "EEE"

Letter F = "FFF"~;

my @temp = split /\n/, $text;
# my @temp = <>;

my $last_index; # use this to remember where the last 'fist line' was
for (my $i=0; $i <= $#temp; $i+=1) {
  if (!defined $last_index) {
    # if we have not find a 'first line' yet, look if this is it
    $last_index = $i if $temp[$i] =~ m/"(\w+)"/;
  } elsif ($temp[$i] =~ m/"(\w+)"/) {
    # otherwhise if we already have a 'first line', check if this is a 'second line'
    $temp[$last_index] =~ m/"(\w+)"/; # use the 'first line'
    my $w1 = $1; 
    $temp[$i] =~ s/"(\w+)"/"$w1"/; # and the current line
    my $w2 = $1;
    $temp[$last_index] =~ s/"$w1"/"$w2"/;
    $last_index = undef; # remember to reset the 'first line'
  }
}
print join "\n", @temp; 
```

输出：

```
Letter A = "BBB"
testtesttest
Letter B = "AAA"
loads 
of text
Letter C = "DDD"
Letter D = "CCC"
Letter E = "FFF"

Letter F = "EEE" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T07:49:18.283

我想你需要这个。试试看

`perl -pe 's/$\\n/Hello/g' filename`

**输出**

```
[tethomas@~/Perl]cat t
Letter A = "AAA"
Letter B = "BBB"
[tethomas@~/Perl]perl -pe 's/$\\n/Hello/g' t
Letter A = "AAA"HelloLetter B = "BBB"Hello 
```

# silverlight - 是否可以从 Windows 7 Phone 上的 XNA 或 Silverlight 应用程序播放播客？

> ID：10293342
> 
> 赞同：0
> 
> 时间：2012-04-24T07:12:44.413
> 
> 标签：silverlight, windows-phone-7, xna-4.0, podcast

是否可以枚举 Windows 7 Phone 上本地存在的音频和/或视频播客？我想在我的应用程序中播放音频或视频播客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:21:13.617

我仍然不完全理解您所说的视频播客是什么意思，但据我所知，您想找到手机中存储的每个视频和音频文件，然后全部播放吗？如果是这样，您每次都尝试在运行时查找每个文件会很疯狂，而不是您应该在第一次运行时创建一个数据库（类似于 iTunes 或 Windows 媒体播放器）。至于播放视频和音频，音频很简单，有很多关于用XNA播放声音的教程，比如[this](http://msdn.microsoft.com/en-us/library/bb203895%28v=xnagamestudio.31%29.aspx)，你可以在[这里](http://www.c-sharpcorner.com/uploadfile/iersoy/how-to-use-video-in-xna/)找到视频播放的教程。

# macos - OSX：用于检索用户 ~/temp 文件夹路径的 API

> ID：10293348
> 
> 赞同：6
> 
> 时间：2012-04-24T07:12:59.707
> 
> 标签：macos, path, directory, temp

OS X 是否为每个用户提供单独的临时文件夹？

如果是这样，如何以编程方式检索当前用户的临时文件夹路径？

PS 查看我自己的 OS X 文件系统，我看不到这样的文件夹。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:32:21.390

假设您使用的是 Objective-C 和 Foundation:`NSTemporaryDirectory()`应该返回一个`NSString`带有用户临时目录的目录。在我的机器上，该目录位于`/var/folders/`.

例如：

```
NSString *tempDirectory = NSTemporaryDirectory(); 
```

文档说`NSTemporaryDirectory()`返回“当前用户的临时目录的路径。如果当前没有这样的目录可用，则返回 nil。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:38:07.793

OS X 没有（或者没有，通过早期的 Lion 版本；10.7.3 似乎这样做）设置`TMPDIR`为供类 Unix 脚本或程序使用，但许多 GUI 程序使用每个用户的临时目录`/var/folders`，您可以在该目录下使用一些 AppleScript（`temporary items folder`在 Scripting Additions 中）或通过`NSTemporaryDirectory()`其他地方指出的方式进行检索。

# design-patterns - 在 ViewModel 中使用服务层类。设计缺陷？

> ID：10293351
> 
> 赞同：4
> 
> 时间：2012-04-24T07:13:21.830
> 
> 标签：design-patterns, domain-driven-design, viewmodel

我想知道我的解决方案是否存在设计缺陷。这是我所拥有的：

*   **`Entities`**=> 纯 poco。参考：没有。
*   **`Data`**=> 数据访问。参考：`Entities`。
*   **`Service`**=> 业务逻辑。参考：`Entities`和`Data`
    *   经理班。
    *   视图模型。
*   **`WebApp`**=> 用户界面。参考：`Entities`和`Service`

`WebApp`ASP.NET MVC项目作为UI，`Entities`纯POCO项目无参考。`Data`访问数据库和`Service`业务逻辑（我的 Manager 类所在的位置）。

基本上，我`Manager`为每个实体定义了一个类。例如，我有一个`Message`与实体列表相关的`Recipient`实体。我有一个`MessageManager`和`RecipientManager`类，负责使用数据层和逻辑结果的 CRUD 操作（例如`public List<Message> GetAllMessagesWithPermissionForUser(User user, Permission permission)`）

对于我的 MVC 项目，我在服务层定义了一些 ViewModel 类来为我的视图生成特定的视频模型。由于视图模型使用管理器类，我在我的服务类中定义了它们。例如，我有一个`MessageOperationVM`具有`PermittedBoxesToSend`属性的视图模型。此属性使用我的`BoxManager`类来获取指定消息允许的所有框：

```
// Initialized by Catsle Windsor.
public BoxManager BoxManager {get; set;}

public List<Box> PermittedBoxesToSend 
{
    if(this._premittedBoxesToSend != null)
    {
        this._permittedBoxesToSend = BoxManager.GetPermittedBoxesToSend(this.Message);
    }
} 
```

*   我不确定在 Viewmodels 中使用管理器类是否是一个好的设计。尽管我已将它们定义为构造函数/属性设置器以填充 DI。我应该在我的控制器中填充我的视图模型的属性而不是定义属性并摆脱我的视图模型中的管理器类吗？

    ```
    public ActionResult ShowNewMessageDialog()
    { 
        var messageVM = new MessageOperationVM() { new Message() };
        messageVM = this.BoxManager.GetPermittedBoxesToSend();
    } 
    ```

*   为每个实体使用一个管理器类似乎使维护变得困难。（尽管它们都派生自一个`BaseManager`共享它们共同操作的类）

*   上述设计中是否有任何值得一提的重新考虑？

谢谢你。

**更新**：
基于 eulerfx 的回答：
我对您的回答的问题是：要构造 ViewModel，我必须调用一些服务层的方法。所以我不能仅仅基于我的 poco 实体来构建我的 ViewModel。您是否建议我也应该在控制器中构建这些部分？：

```
public ActionResult ShowNewMessageDialog()
{
    var message = this.messageRepository.GetMessage();
    var messageVM = new MessageViewModel(message);
    messageVM.CustomProperty = this.messageManager.CallSomeMethod(message);
    return View(messageVM);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T05:08:14.917

我认为从视图模型到服务的引用是一个设计缺陷。视图模型应该是扁平且简单的 DTO，旨在与视图绑定。它们不应该是 DI 容器图的一部分，因为这会使事情复杂化并使对代码的推理更加困难。您正在使用的术语的公认定义如下。

*   实体是您描述的实体。它们是简单的 POCO 类。
*   您所说的“数据”是[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)。存储库提供对底层数据库中实体的访问和持久性。
*   服务是一个重载的术语，但是它们通常用于封装域，将其作为 API 暴露给其他应用程序层。服务可以引用存储库。我在 DDD 的上下文中写了一篇关于这些类型服务的博客文章，在[这里](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)它们被称为应用程序服务。
*   视图模型是表示层或您所称的 WebUI 的一部分。因此，它们由 MVC 控制器构造并传递给视图。控制器使用从应用程序服务或直接从存储库获得的数据构造视图模型。视图模型可以包含一个构造函数，该构造函数接受服务或存储库返回的实体。

代码看起来像这样：

```
/// Domain model class that lives in domain/business layer project
public class Message
{
  // properties and behavior go here
}

// View model class that lives in the ASP.NET project
public class MessageViewModel
{
  public MessageViewModel() { }
  public MessageViewModel(Message message)
  {
    // construct the view model based on the provided entity
  }
  // properties specific to the view go here
} 

// ASP.NET MVC controller.
public class MessagesController : Controller
{
 // this repository should be injected by DI container.
 readonly IMessageRepository messageRepository;

 public ActionResult ShowNewMessageDialog()
 {
   var message = this.messageRepository.GetMessage();
   return View(new MessageViewModel(message));
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:43:37.107

您可以考虑使用`Visitor`设计模式来操作`Entities`和类，而不是 Manager`Data`类。

如果`Manager`or`Visitor`类的定义使得它们不必仅在 View 代码中使用，那么它不应该是一个问题。但是如果它们只能在视图中使用，而对于其他视图等，您必须重新定义对`Entities`和`Data`类的访问权限，或者编写更多/重复的代码，那就有问题了。

# actionscript-3 - 如何在 Flash as3 中将值传递给事件监听器

> ID：10293352
> 
> 赞同：1
> 
> 时间：2012-04-24T07:13:27.037
> 
> 标签：actionscript-3, flash, events, parameters, addeventlistener

我来自 php jquery 背景，我目前正在掌握 flash as3 只是不确定如何将值传递给 eventlistner 函数说我有以下内容。

```
for (var i:uint = 0; i < asteroids.length; i++)
{                   
    asteroids[i].x = Math.random() * 450;
    asteroids[i].y = Math.random() * 450;
    asteroids[i].addEventListener(MouseEvent.MOUSE_UP, changeValue);            
}

public function changeValue(event:MouseEvent):void
{
    playSound(anote);
    trace(event.currentTarget);
} 
```

我在循环中添加eventlistner 的每个小行星都需要将不同的值传递给var anote 函数？

jquery 我会做的。

```
$(".asteroids").click(function() {

     // or something similar 
     var anote = $(this).attr('href');
     playSound(anote);

     return false;

}); 
```

有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:24:41.567

我建议为您的 Asteroid 实例创建一个类（假设这是`asteroids`数组中的内容）。这些小行星中的每一个都可能具有`anote`具有不同值的属性（这密切反映了您的`.asteroids`元素`href`属性。

```
public class Asteroid extends Sprite
{
    public var anote:String = "";
} 
```

接着：

```
for each(var i:Asteroid in asteroids)
{                   
    i.x = Math.random() * 450;
    i.y = Math.random() * 450;
    i.addEventListener(MouseEvent.MOUSE_UP, changeValue);            
}

public function changeValue(event:MouseEvent):void
{
    playSound((event.currentTarget as Asteroid).anote);
} 
```

理想情况下，您的 Asteroid 类还将包含示例中的代码并引用处理该`playSound()`方法的任何类。

* * *

`anote`另一种选择是使用可以在调度和使用时设置的属性创建您自己的事件类。这个过程相当漫长，所以这里有一个链接到我以前的答案之一，其中深入解释了实现它：

*   [如何将参数传递给 flex/actionscript 中的事件侦听器函数？](https://stackoverflow.com/questions/6406957/how-to-pass-arguments-into-event-listener-function-in-flex-actionscript/6407128#6407128)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:22:31.637

我发现的最简单的方法是在该`addEventListener`行中创建一个函数：

```
for (var i:uint = 0; i < asteroids.length; i++)
{

     asteroids[i].x = Math.random() * 450;
     asteroids[i].y = Math.random() * 450;
     asteroids[i].addEventListener(MouseEvent.MOUSE_UP, function(e:MouseEvent){
         changeValue(e, otherArguments);
     });

}

public function changeValue(event:MouseEvent, otherArguments:Object):void
{

    playSound(anote);
    trace(event.currentTarget);

} 
```

基本上，您创建一个包装函数，可以将您需要的任何参数传递给事件侦听器函数。

实现这一点的另一种方法是创建自己的类来扩展`MouseEvent`和使用它，但这更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:32:13.813

每次都为对象或事件编写新的类很麻烦，而且使用匿名函数也很不稳定。只需在变量中获取它：

```
var listeners:Object = new Object();

for (var i:uint = 0; i < asteroids.length; i++) {
  asteroids[i].x = Math.random() * 450;
  asteroids[i].y = Math.random() * 450;
  listeners[i] = changeValue(asteroids[i].anote);
  asteroids[i].addEventListener(MouseEvent.MOUSE_UP, listeners[i]);
}

public function changeValue(anote:Sound):Function {
  return function(event:MouseEvent):void {
    playSound(anote);
    trace(event.currentTarget);
  }
} 
```

然后，稍后删除侦听器：

```
for (i = 0; i < asteroids.length; i++) {
  //trace("asteroid" + i + " (before): " + asteroids[i].hasEventListener(MouseEvent.MOUSE_UP));
  asteroids[i].removeEventListener(MouseEvent.MOUSE_UP, listeners[i]);
  //trace("asteroid" + i + " (after): " + asteroids[i].hasEventListener(MouseEvent.MOUSE_UP));
} 
```

在那个问题上也看到[这个答案](https://stackoverflow.com/a/13488640/1837285)。

# sqlite - 在黑莓中检索整个 sqlite 表

> ID：10293355
> 
> 赞同：0
> 
> 时间：2012-04-24T07:13:44.667
> 
> 标签：sqlite, blackberry

是否可以将整个数据库表、行和列提取到黑莓中的表单中？我已经能够将记录中的值检索到富文本字段中，但我想将它们检索到文本框中，以便可以从表单中更新各个列和行。这是我一直在研究的代码

```
 //Retrieve data
     try
    {
      add(new RichTextField("Attempting to retrieve data from " + 
                                       "database1.db on the SDCard."));

     Statement st = db.createStatement("SELECT name,email FROM DirectoryItems");

     st.prepare();

     Cursor c = st.getCursor();

     Row r;
     int i = 0;

     while(c.next()) 
     {

     r = c.getRow();
     i++;
  add(new RichTextField(i + ".Name = " + r.getString(0) +
                                              " , " +
      "Email = " + r.getString(1))); //+
      //  " , " +
      //"Phone = " + r.getInteger(1)));
     }

     if (i==0)
    {
    add(new RichTextField("No data in the DirectoryItems table."));
    }
    st.close();
   db.close();
    }
  catch( Exception e ) 
   {         
    System.out.println( e.getMessage() );
    e.printStackTrace();
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:39:21.680

我不想给出完整的解决方案——它需要测试、运行并且在教育方面不会有太大帮助。

我认为这样做没有任何问题。表中的任何行都有行 id 列。黑莓 ui 中的Any`Field`都有方法`setCookie`, `getCookie`, `isDirty`. 您也可以`FocusListener`为每个设置`Field`（我不喜欢在每个更改事件上调用保存到数据库，但这样做是为了让焦点保持合理）。

所以想法是您获取数据并将其放入`EditFields`（每个值一个字段，因此将有两个字段用于名称和电子邮件）。您将字段行 ID 和列名保存到 cookie。并且在每个焦点离开事件中，您都会检查字段是否脏并安全地保存更改的数据以防万一。

这是一个相当粗略的想法，听起来与 OOP 相去甚远（这意味着将来很难重用或扩展）。但它应该工作。

# c# - 带有时区的 C# 字符串到 DateTime

> ID：10293362
> 
> 赞同：15
> 
> 时间：2012-04-24T07:14:08.150
> 
> 标签：c#, string, datetime, format

我想用这种格式将字符串：“2012-04-20 10:10:00+0200”格式化为 dateTime。所以我认为它必须是“yyyy-MM-dd hh:mm:ss zzz”？

当我尝试这个

```
 // starttime =  {20/04/2012 10:10:00} without my +0200!
DateTime starttime = Convert.ToDateTime("2012-04-20 10:10:00+0200",CultureInfo.CurrentCulture);
// And this gave me a format exception : {System.FormatException: String was not recognized as a valid DateTime.
        DateTime result = DateTime.ParseExact("2012-04-20 10:10:00+0200", "yyyy-MM-dd hh:mm:ss zzz", CultureInfo.InvariantCulture); 
```

“V4Vendetta”提供的解决方案：

您应该尝试使用 DateTimeOffset 而不是 DateTime

```
DateTimeOffset result = DateTimeOffset.Parse("2012-04-20 10:10:00+0200",CultureInfo.InvariantCulture); 
```

在这里，您也可以获得偏移量（2 小时），它可以使用您的 DateTime（10:10）值计算并获得您想要的输出（result.DateTime + result.Offset）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-24T07:34:03.597

您应该尝试使用`DateTimeOffset`而不是`DateTime`

```
DateTimeOffset result = DateTimeOffset.Parse("2012-04-20 10:10:00+0200",CultureInfo.InvariantCulture); 
```

在这里，您也可以得到`Offset`(2 hrs)，它可以用您的`DateTime`(10:10) 值计算并得到您想要的输出 (result.DateTime + result.Offset)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:23:38.043

使用“2012-04-20 10:10:00 +02:00”而不是“2012-04-20 10:10:00+0200”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:22:40.587

[此处](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)的 MSDN 文章似乎正是您正在寻找的内容。根据上述文章，您应该使用`{0:MM/dd/yy H:mm:ss zzz}`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T07:24:15.297

试试这个：

```
DateTime datetime = DateTime.ParseExact("10/10/2009 12:00:00", "MM/dd/yyyy hh:mm:ss", System.Globalization.CultureInfo.CurrentCulture); 
```

# ios - 如何在 iPCU 中设置 MDM Payload 的“身份”？

> ID：10293363
> 
> 赞同：4
> 
> 时间：2012-04-24T07:14:11.717
> 
> 标签：ios, identity, mdm, payload

有人告诉我应该首先使用 IPCU 配置 SCEP，所以我在 Windows 服务器 2008 中设置了 SCEP 服务器。然后在 SCEP 有效负载中设置 URL。但我无法使用 MDM Payload 安装配置文件。有人告诉我，我应该在 iPCU 中添加一个 p12 文件/证书作为“凭据”，然后从 MDM 视图的列表中选择它。但我没有成功。任何 p12 文件/证书有用吗？感谢某人的帮助。

我需要下一步的答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:30:33.680

如果您使用的是自签名 ssl，则在服务器端生成自签名 ssl 证书时，生成 identity.p12 证书，此证书需要在 IPCU 的身份部分使用。

您可以使用这几行来生成 identity.p12

```
//Creating the device Identity key and certificate request

openssl genrsa 2048 > identity.key
openssl req -new -key identity.key -out identity.csr

//Signing the identity key with the CA. 
//Give it a passphrase. You'll need to include that in the IPCU profile.

openssl x509 -req -days 365 -in identity.csr -CA cacert.crt -CAkey cakey.key -CAcreateserial -out identity.crt

openssl pkcs12 -export -out identity.p12 -inkey identity.key -in identity.crt -certfile cacert.crt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:12:21.297

如果您没有签署来自设备的 MDM 响应（我建议您在对 MDM 协议的其余部分感到满意​​之前不要这样做），那么任何 p12 都可以，但是我相信它应该有密钥以及证书。如果您使用 OSX 上的钥匙串实用程序导出带有密钥的证书，您应该得到一个可用的 p12 文件。p12 必须在您的配置文件中进行 base64 编码，但 iPCU 会为您处理。

# javascript - 为什么 Javascript 对象不更新字段？

> ID：10293365
> 
> 赞同：0
> 
> 时间：2012-04-24T07:14:23.200
> 
> 标签：javascript, json

下面我有以下代码：

```
var imageType = "BoxArt";
var uploadReason = "New season";
var fileKey = "b2fc";

alert("imageType = " + imageType);
alert("uploadReason = " + uploadReason);
alert("fileKey = " + fileKey);

var iVO = { "images":{}};
var thisImage = fileKey;
iVO["images"][thisImage.fileKey] = thisImage;
iVO["images"][thisImage.imageType] = imageType;
iVO["images"][thisImage.uploadReason] = uploadReason;

alert("iVO['images'][thisImage.imageType] = " + iVO["images"][thisImage.imageType]);
alert("iVO['images'][thisImage.uploadReason] = " + iVO["images"]    [thisImage.uploadReason]);
alert("iVO['images'][thisImage.fileKey] = " + iVO["images"][thisImage.fileKey]);
alert("JSON.stringify(iVO):\n" + JSON.stringify(iVO)); 
```

当我执行此操作时，我得到以下输出：

```
imageType = "BoxArt"
uploadReason = "New season"
fileKey = "b2fc"
iVO['images'][thisImage.imageType] = "New season"
iVO['images'][thisImage.uploadReason] = "New season"
iVO['images'][thisImage.fileKey] = "New season"
JSON.stringify(iVO):
{"images"}:{"undefined":"New season"}} 
```

**这里发生了什么？！？！？**

前三个警报（显示`imageType`、`uploadReason`和`fileKey`分配）与预期的一样，但`iVO`对象的行为完全不像我预期的那样。该`JSON.stringify`方法是正常的[`json2.js`](https://github.com/douglascrockford/JSON-js)方法，我没有修改它。

**为什么“新赛季”显示为每个`iVO["images"]`字段值？**为什么`iVO`作业不能正常工作？！？**我需要做什么来修复它们？**

所需的输出`JSON.stringify(iVO)`将是（以漂亮的打印形式）：

```
{
    "images":
    {
        "b2fc":
        {
            "imageType":"BoxArt",
            "uploadReason":"New season",
            "fileKey":"b2fc"
        }
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:20:04.680

我想你想要

```
iVO['images'][thisImage] = {
         "imageType":"BoxArt",
        "uploadReason":"New season",
        "fileKey":"b2fc"
    }; 
```

我会写成

```
 iVO.images[thisImage] = {
         "imageType":"BoxArt",
        "uploadReason":"New season",
        "fileKey":"b2fc"
    }; 
```

对于带有点的字段名称，没有神奇的自动取消嵌套/激活子对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:22:19.433

当然，你定义的地方

```
iVO["images"][thisImage.fileKey] = thisImage;
iVO["images"][thisImage.imageType] = imageType;
iVO["images"][thisImage.uploadReason] = uploadReason; 
```

`thisImage`是先前分配给`fileKey`so的字符串`thisImage.fileKey`，`thisImage.imageType`并且`thisImage.uploadReason`是无效引用

可能你想做类似的事情`iVO["images"][fileKey]["imageType"] = imageType`

# php - 如何获取电子邮件中附加的 .csv 文件

> ID：10293369
> 
> 赞同：0
> 
> 时间：2012-04-24T07:14:45.787
> 
> 标签：php, mysql, phpmyadmin, mysqldump

我必须完成这项任务，我必须获取电子邮件中附加的 .csv 文件并使用 php 将其插入我的数据库中。有什么办法可以完成这项工作，如果您对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:11:57.590

[PEAR::Mail_mimeDecode](http://pear.php.net/package/Mail_mimeDecode/)是您正在寻找的。

# knockout.js - Knockout.js - 解释点击事件的数据对象

> ID：10293375
> 
> 赞同：0
> 
> 时间：2012-04-24T07:15:03.823
> 
> 标签：knockout.js

我正在使用 Knockout.js，试图弄清楚如何解析作为其点击处理程序的一部分传递的数据对象的属性。到目前为止，我只能找到/查看与对象关联的函数的文本定义。

例如，在使用 Chrome 调查点击绑定传递的数据对象时，我只能找到：

```
> data.CityId.toString
function toString() { [native code] }

> data.CityId.toString()
"function b(){if(0<arguments.length){if(!b.equalityComparer||!b.equalityComparer(d,arguments[0]))b.H(),d=arguments[0],b.G();return this}r.T.Ha(b);return d}" 
```

## 该程序：

该程序列出了几个城市，单击元素时，我想调用一个函数来更新数据 - 从视图模型实例中传入一个参数。

虽然我使用的是映射插件，但视图模型实际上是：

*   城市编号
*   城市名

调用该方法的 HTML 模板：

```
 <div data-bind="click: function(data, event) { UpdateForCity(data, event); }">
      <span data-bind="text: CityName"></span>
    </div> 
```

要调用的函数：

```
function UpdateForCity(data, event) {
    alert('CityId: ' + data.CityId); // This is the part where I'd like to resolve the value
} 
```

该函数接收该值，但到目前为止，所有试图找到解决该属性的方法的尝试都没有成功。如何解析上面示例中的 CityId 属性？（我是否误解了 MVVM/knockout 模式中的任何内容？）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:19:42.453

原来有一个实用方法可以做到这一点：

```
var cityId = ko.utils.unwrapObservable(data.CityId); 
```

看起来也可以将一个函数附加到视图模型项的每个实例，但这需要更深入地了解映射插件的配置......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T07:25:50.760

只是提供一个由 Ryan Niemeyer 创建的小提琴示例，我现在指的是解决我的几个淘汰赛问题。这是小提琴的链接：http: [//jsfiddle.net/rniemeyer/vdcUA/](http://jsfiddle.net/rniemeyer/vdcUA/)

如果您需要更多信息，您也可以查看 knockmeout 网站

希望这可以帮助

# android - 如何在android中禁用蓝牙？

> ID：10293376
> 
> 赞同：1
> 
> 时间：2012-04-24T07:15:06.160
> 
> 标签：android, checkbox, bluetooth

> **可能重复：**
> [如何在android中以编程方式启用/禁用蓝牙](https://stackoverflow.com/questions/3806536/how-to-enable-disable-bluetooth-programmatically-in-android)

我是android开发的新手。我无法在我的应用程序中禁用蓝牙。在这里，我使用了一个复选框。启用它会启用蓝牙，但在禁用它时仍然启用.. 我该怎么办？

我的代码：

```
enable_chkbox=(CheckBox)findViewById(R.id.chkboxenable);
enable_chkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // TODO Auto-generated method stub
        if(buttonView.isChecked())
        {
            if (!mBluetoothAdapter.isEnabled()) {
                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
            }
            else if(!buttonView.isChecked())//updated
            {
                mBluetoothAdapter.disable();
            //finish();
            }
        }
    }
}); 
```

Android Manifest 文件权限：

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:22:40.170

你的`else if`代码没有用。尝试这个。

```
 BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();    
  if(buttonView.isChecked())
    {
        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        }
    }
    else 
    {
            mBluetoothAdapter.disable();
           //finish();
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:21:54.270

看起来你的 else 放错地方了。它应该是

```
if (buttonView.isChecked()) {
    if (!mBluetoothAdapter.isEnabled()) {
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
    } 
}
else {
    mBluetoothAdapter.disable();
    // finish();
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:22:37.247

使用下面的代码 -

```
enable_chkbox=(CheckBox)findViewById(R.id.chkboxenable);
enable_chkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    // TODO Auto-generated method stub
    if(buttonView.isChecked())
    {
        BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();    
        if (!mBluetoothAdapter.isEnabled()) 
        {
            // do something
        }else
        { 
            mBluetoothAdapter.disable(); 
        }
        }
    }
}); 
```

# sql - 如何在 windows phone 7 中使用预填充的数据库？

> ID：10293377
> 
> 赞同：1
> 
> 时间：2012-04-24T07:15:26.570
> 
> 标签：sql, windows-phone-7, sql-server-ce

有文档资料可以创建一个 db 和 SQL to LINQ。我已经搜索但找不到如何使用/查询本地 .sdf 文件。

请向我提供任何有助于查询和使用 myDB.sdf 的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:40:39.223

请参阅此博客文章：[http ://erikej.blogspot.com/2012/01/windows-phone-local-database-tip.html](http://erikej.blogspot.com/2012/01/windows-phone-local-database-tip.html)

这个：[http ://erikej.blogspot.com/2011/06/sql-server-compact-toolbox-22visual.html](http://erikej.blogspot.com/2011/06/sql-server-compact-toolbox-22visual.html)

# javascript - 将 [1,2] 和 [7,8] 合并为 [[1,7], [2,8]] 的最有效方法是什么

> ID：10293378
> 
> 赞同：4
> 
> 时间：2012-04-24T07:15:34.093
> 
> 标签：javascript

给定 2 个数组 [1,2] 和 [7,8] 合并它们以形成 [[1,7], [2,8]] 的最有效方法是什么。我知道我们可以这样做：

```
a1 = [1,2], a2 = [7,8], a3=[];
for (var i=0; i<a1.length; i++) {
  a3.push([a1[i], a2[i]]);
} 
```

我正在处理一个大数组。所以想看看有没有更好的办法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T07:18:34.910

没有办法比 O(n) 更快地做到这一点，因为每个元素都必须被触摸一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-28T17:06:08.467

这是个好问题！

首先，确保您`a1,a2,a3`通过关键字分配给本地范围`var`，您似乎忘记了。否则性能会受到极大影响。

至于代码性能比较。[您可以在此处](http://jsperf.com/zip-speed-difference)测试/查看结果：

![压缩测试](../Images/b0c49d9efea8eae55e6f8cd59af8b3b0.png)

**纯 JavaScript：**

```
var a1 = [1, 2],
  a2 = [7, 8],
  a3 = [];
for (var i = 0; i < a1.length; i++) {
  a3.push([a1[i], a2[i]]);
} 
```

**JS/本机方法：**

```
var a1 = [1, 2],
  a2 = [7, 8],
  a3 = [];
a3 = a1.map(function(e, i, a) {
  return [e, a2[i]]
}) 
```

当然还有更多可能的实现，但关键是可能没有其他实现可以在*O(n)*时间内击败 for 循环和直接打包，正如 Travis J 所指出的那样。

引擎/优化：通过*Chrome v29 的V8 JavaScript 引擎*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:19:39.627

您基本上是在搜索与 Python 的函数相同的`zip`函数，因此请查看旧 SO 问题的答案：

[Javascript 等效于 Python 的 zip 函数](https://stackoverflow.com/questions/4856717/javascript-equivalent-of-pythons-zip-funciton)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:18:57.940

不，这几乎是最有效的。它在*O(n)*时间内运行。你真的不能再问了。如果有什么可以优化的，它会将 a1 转换为地图，但这是对内存的优化，听起来你想加快速度。

# olap - 在 Oracle Essbase 中计算数据库大小

> ID：10293379
> 
> 赞同：0
> 
> 时间：2012-04-24T07:15:34.807
> 
> 标签：olap, olap-cube, essbase

测试中的经典问题：我有 4 个维度：市场：稀疏，10 个存储成员，10 个总成员产品：稀疏，5 个存储成员，7 个成员帐户：密集，10 个存储成员，11 个总成员时间：密集，5 个存储，共 12 个

该 BSO 的大小是多少？我该如何计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:31:59.070

Essbase[数据库管理员指南](http://docs.oracle.com/cd/E17236_01/epm.1112/esb_dbag/frameset.htm?launch.html)有一个可用于计算多维数据集大小的工作表。

对于您的示例，您有 2 个密集维度：

*   帐户 - 10 个存储的成员
*   时间 - 5 个存储成员

一个块中的单元格总数：50。

每个单元 8 字节，因此 50 * 8 = 400 字节扩展块大小。

您有 2 个稀疏维度：

*   市场 - 10 个存储的成员
*   产品 - 5 个存储成员

因此，您有 10 * 5 = 50 个可能的数据块，总共（假设数据库已完全填满）为 20,000 个字节。

# iphone - 尝试像单元交换一样交换视图

> ID：10293384
> 
> 赞同：2
> 
> 时间：2012-04-24T07:15:46.120
> 
> 标签：iphone, objective-c

我正在尝试像表格视图中的单元格交换一样交换视图。我谷歌但没有任何想法。这是我正在为我尝试的新想法，所以需要帮助。如果有人有想法提示，请给我。我没有关于这个的更多信息。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:38:05.880

如果您的视图都在同一行，您可能希望将它们添加到 scoll 视图并将分页属性设置为 YES。

无论如何，适当的解决方案是将滑动手势识别器添加到视图并使用它来接收滑动事件。在处理事件的方法中，使用新的 UIView 动画方法之一移动视图。

您也可以考虑将您的视图添加到 tableview，并且因为每个单元格都有一个 contentView 属性，您可以使用它来表示您自己的视图。

祝你好运！

# xcode - 在 Xcode 下进入应用程序运行

> ID：10293387
> 
> 赞同：3
> 
> 时间：2012-04-24T07:15:58.707
> 
> 标签：xcode, debugging, command-line

我正在尝试在 OS X Lion 上使用 Xcode 调试 C 命令行应用程序。应用程序需要通过标准输入进行大量输入数据。在 shell 上，我只是将一个文本文件通过管道传输到这个应用程序中。

我怎样才能用 Xcode 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T10:32:30.283

您可以将数据通过管道传输到 Xcode 项目的可执行文件中以进行调试。

[在此处](https://stackoverflow.com/a/13006633/493548%20here)查看我对类似 Stackoverflow 问题的回答。

（为方便起见复制）：

在 Xcode 4.5.1 中：

1.  打开方案编辑器（产品菜单 -> 编辑方案...）
2.  选择运行调试方案
3.  在“信息”选项卡面板中，将“启动”单选按钮选择从“自动”更改为“等待 MyApp.app 启动”
4.  关闭方案编辑器
5.  按 Run 按钮构建并运行您的目标。（工具栏中的 Xcode 状态窗口将显示“等待 MyApp 启动”）
6.  启动终端并 cd 到您构建的应用程序的文件夹。（它将类似于 /Users/user/Library/Developer/Xcode/DerivedData/MyApp- `dmzfrqdevydjuqbexdivolfeujsj/Build/Products/Debug/`）
7.  在标准输入中以任何你想要的方式启动你的应用程序管道：

    `echo mydata | ./MyApp.app/Contents/MacOs/MyApp`

8.  切换回 Xcode，调试器将检测到应用程序的启动并附加到它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-03T15:48:35.257

只是为了更好地澄清@Nestor的答案......

我想不出一种通过管道传输到 x 代码的方法，所以我在脚本的开头添加了以下代码，该代码从一个名为 test file 的测试文件传输而来。

```
 // For debugging
if (argc == 2 && strcmp(argv[1], "debug") == 0 ) {
    printf("== [RUNNING IN DEBUG MODE]==\n\n");
    char test_file_path[] = "/Users/bonobos/are/amazing/test.txt";
    freopen(test_file_path, "r", stdin);
} 
```

请注意，我需要完整的文件路径，因为当 xcode 编译时，它会转到一些奇怪的随机文件夹，因此如果您不想费心打包文本资源，最好使用绝对路径。

freopen 将文件内容发送到标准输入。

还因为我有那个 if 语句，所以我将 xcode 设置为具有调试参数。这比在编译时使用注释和忘记取消注释要好。

要设置 xcode 参数，请转到：

产品 > 方案 > 编辑方案 [![编辑方案](../Images/952a7e38554ddf9526494c32b5f9279e.png)](https://i.stack.imgur.com/qtMvx.png)

然后在运行方案中设置参数“调试”：

[![添加参数调试](../Images/afc1751d3451c5921ba4565568b20336.png)](https://i.stack.imgur.com/PTPAL.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:27:18.070

不幸的是，你不能。我必须修改我的程序以从文件中读取以进行调试，如下所示：

```
 NSFileHandle *input;

    if (AmIBeingDebugged())
        input = [NSFileHandle fileHandleForReadingAtPath:@"/Users/me/debug.input"];
    else
        input = [NSFileHandle fileHandleWithStandardInput]; 
```

AmIBeingDebugged 的​​来源在[这里](https://developer.apple.com/library/mac/qa/qa1361/_index.html)。

# sql - 如何更新sql中的xml字段表？

> ID：10293391
> 
> 赞同：0
> 
> 时间：2012-04-24T07:16:24.433
> 
> 标签：sql, sql-server

我的表中有一个 XML 列，如下所示：

```
<word A="al"   B="h"   C="Ps" />
<word A="has"  B="es"  C="Pf" /> 
<word A="mom"  B="es"  C="Ph" /> 
```

我想像这样更新这个字段：

```
<word A="al"   B="B1"   C="C1" /> 
<word A="has"  B="B2"  C="C1" /> 
<word A="mom"  B="B2"  C="C2" /> 
```

我想通过 SQL Server 中的一个函数来做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:13:08.290

正如 Mikael 所说，您需要描述更新背后的逻辑。但是对于上面的预期输出，以下应该有效：

```
DECLARE @Words xml
SELECT @Words = '
<word A="al"   B="h"   C="Ps" />
<word A="has"  B="es"  C="Pf" />
<word A="mom"  B="es"  C="Ph" />'

SET @Words.modify('replace value of(/word[@A = "al"]/@B)[1] with "B1"')
SET @Words.modify('replace value of(/word[@A = "al"]/@C)[1] with "C1"')
SET @Words.modify('replace value of(/word[@A = "has"]/@B)[1] with "B2"')
SET @Words.modify('replace value of(/word[@A = "has"]/@C)[1] with "C1"')
SET @Words.modify('replace value of(/word[@A = "mom"]/@B)[1] with "B2"')
SET @Words.modify('replace value of(/word[@A = "mom"]/@C)[1] with "C2"')

SELECT @Words 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:08:40.127

请在您的 XQuery 中尝试“替换值”。
参考：http: [//msdn.microsoft.com/en-us/library/ms190675.aspx](http://msdn.microsoft.com/en-us/library/ms190675.aspx)

# linux - 在Linux crontab中，我的程序的stderr必须重定向，为什么？

> ID：10293392
> 
> 赞同：4
> 
> 时间：2012-04-24T07:16:26.053
> 
> 标签：linux, crontab, stderr, sigpipe

我写了一个程序，可以输出到`stderr`. 当我通过 Linux 运行它时`crontab`，我必须重定向`stderr`. 如果没有，程序将以`SIGPIPE`. 为什么？

**不好**

```
45 10 * * * /home/sandy/test > /home/sandy/test.log & 
```

**好的**

```
45 10 * * * /home/sandy/test > /home/sandy/test.log 2>&1 & 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:36:13.907

您正在后台运行该命令（`&`最后）。这意味着 cron 已开始运行命令的 shell 不会等待其完成并在命令启动后立即终止。如果您的程序现在尝试写入`stderr`，则没有任何内容连接到读取端并且您会得到一个 SIGPIPE。如果您重定向到文件，则不会发生这种情况，因为正在运行的进程知道要写入的位置。

解决此问题的另一种方法是在前台运行命令，即`&`最后没有。无论如何，这是更好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:35:19.867

`SIGPIPE`如果进程尝试写入读取端已关闭的管道（或套接字），则将其发送到进程。cron 通常会尝试通过电子邮件发送指定命令的输出`stdout`和`stderr`输出，除非它被重定向。可以想象，在您的机器上，本地电子邮件传递设置不正确，并且由 cron 启动的电子邮件程序`stderr`向您发送电子邮件，但仍在运行时死`/home/sandy/test`了，导致管道损坏。

来自[这里](http://www.manpagez.com/man/5/crontab/)和[这里的答案](http://sourceforge.net/mailarchive/forum.php?thread_name=497492B7.3070003@isis-papyrus.com&forum_name=doxygen-users)

# python - Python 2.5.6 与 2.4.3

> ID：10293395
> 
> 赞同：-1
> 
> 时间：2012-04-24T07:16:52.870
> 
> 标签：python, python-2.5, python-2.4

我用 Python 2.5.6 (Windows) 创建了一个 python 脚本，对其进行了测试，它工作正常。在我把它放在服务器（python 2.4.3，Linux）上之后，它编译了，但没有用。它没有给我任何追溯或任何东西。由于它是一个 trac 系统，因此它调用了脚本，但随后超时。

我将原因缩小到几个函数，它们只出现在新文件中：

```
cursor.fetchall() 
```

或者

```
for x in y
   if(x == 1):
      break #does this work? 
```

或者

```
FILE operations 
```

有没有我监督过的共同点，或者有人知道它可能是什么？

由于限制，我无法将 python 2.4 用作开发人员。我需要使用仅适用于 python 2.5.x 的 Trac Standalone。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:24:16.813

有关 Python 2.5中添加的功能的最终列表，请参阅[Python 2.5 中的新增功能。](http://docs.python.org/whatsnew/2.5.html)它相当广泛。尤其是：

> 新模块包括... SQLite 数据库模块 ( `sqlite`)

通常，2.x 系列版本保持*向后*兼容性。但是，您似乎期望*向前*兼容，这是另一回事。

我的建议是双重的：

1.  Python 2.4 已经很老了。如果可以，请将服务器升级到更新版本的 Python。
2.  无论#1 的结果如何，将开发箱安装到您将在生产中使用的相同版本的 Python 上。如果开发盒使用与产品盒相同的操作系统（如果需要，在虚拟机中），这也会有所帮助。

# excel - 没有要处理的文件时，如何防止在 SSIS 包中导入 Excel？

> ID：10293401
> 
> 赞同：2
> 
> 时间：2012-04-24T07:17:11.450
> 
> 标签：excel, datetime, ssis, package

我有一个导入 Excel 文件的 SSIS 包。在包中，我有一个脚本任务，用于在执行 Excel 导入过程之前检查 Excel 文件是否存在。

`AcquireConnection`由于错误导致 Excel 文件不存在时，我无法执行包。

当没有可供导入的 Excel 文件时，如何防止包执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:14:35.090

执行以下步骤以避免包失败。

*   将*Excel Source*`ValidateExternalMetadata`上的属性设置为.*`False`*
**   将*Excel 连接*`DelayValidation`上的属性设置为.*`True`**

 **包验证阶段首先发生在您的脚本任务可以执行之前。如果 Excel 文件不存在，则包验证阶段将失败。设置上述属性值将延迟验证，您可以检查第一个是否存在于您的脚本任务中。如果文件不存在，您可以中止包执行。**

# python - 如何在 linux 中的 python 中运行一次程序？

> ID：10293403
> 
> 赞同：-3
> 
> 时间：2012-04-24T07:17:13.323
> 
> 标签：python

我想写一个语句，我将在其中检查是否从其他地方（在那台机器上）运行该脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:20:08.243

```
print "Is anybody runs that script?" 
```

如果这不是您想要的，请澄清您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:35:58.480

检查程序的多个运行实例的常用方法是使用锁定文件。使用您喜欢的搜索引擎搜索“python 锁定文件”以找到执行此操作的各种方法，包括方便的包和标准库中的各种机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:21:06.300

我认为您可以创建一个环境变量作为标志并测试它是否打开。

# ant - 如何使用带有常春藤的蚂蚁构建解决 Artifactory 的 jar

> ID：10293408
> 
> 赞同：1
> 
> 时间：2012-04-24T07:17:28.707
> 
> 标签：ant, ivy, artifactory

我已经设法将使用 Jenkins 的 CI 系统与使用 Artifactory 插件将生成的 .jar 上传到 Artifactory 的 Ant 构建系统拼凑在一起。

我现在需要另一个构建，它也是 Ant 来使用 build.xml 中的目标从工件中检索最新的 jar。

我可以找到很多关于如何上传的文章，但很少有关于解决的文章。

我发现的最接近的是[http://wiki.jfrog.org/confluence/display/RTF/Working+with+Ivy](http://wiki.jfrog.org/confluence/display/RTF/Working+with+Ivy) 但这主要处理重要区域的上传，屏幕截图没有数据（或者我的 Artifactory 是我无法更新它）并处理获取 ivy 或 pom 文件。

我是蚂蚁/常春藤菜鸟，所以任何如何将目标放在一起的指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:57:29.997

我假设您已经[安装了 ivy](https://ant.apache.org/ivy/history/latest-milestone/tutorial.html)。

### 常春藤设置.xml

[您需要在名为ivysettings.xml](https://ant.apache.org/ivy/history/latest-milestone/settings.html)的文件中定义一个解析器来制作工件（将其放在根文件夹中，在 build.xml 旁边）：

```
<ivysettings>
        <resolvers>
          <ibiblio name="artifactory" m2compatible="true" root="http://localhost:8080/artifactory/libs-releases"/>
        </resolvers>
</ivysettings> 
```

### 构建.xml

在您的 build.xml 中，我将使用[内联检索](https://ant.apache.org/ivy/history/latest-milestone/use/retrieve.html)（这样您就不必编写[ivy.xml](https://ant.apache.org/ivy/history/latest-milestone/ivyfile.html)）：

```
<project xmlns:ivy="antlib:org.apache.ivy.ant" name="myName">

    ...

    <target name="retrieve" description="retrieve">
      <ivy:settings /> <!-- needed so that ivysettings.xml is used-->
      <ivy:retrieve organisation="foo" module="bar" inline="true" pattern="lib/[artifact].[ext]"/> 
    </target>
</project> 
```

这会将工件下载到 lib 目录中。对于组织和模块，取您在工件中找到的值。

### 来自工件的组织和模块

在您提供的链接的这张图片中，您可以看到如何从工件中获取组织和工件。它将为您提供一个依赖声明框。只需检查常春藤并从那里获取值。

![在此处输入图像描述](../Images/c8338b7e060f2f650d6f3d0e9d90cb57.png)

# glassfish-3 - seam-gen 是否仍与 glassfish 3.1.2 兼容？

> ID：10293410
> 
> 赞同：0
> 
> 时间：2012-04-24T07:17:46.067
> 
> 标签：glassfish-3, seam2

目前我正在尝试在 glassfish 应用服务器中部署一个耳朵格式的网络应用程序。

按照 jboss 关于如何使用 seam-gen 的说明，我能够创建项目。但是当我调用 gf-deploy 时，我得到了 ff 错误：

```
gf-deploy-datasource:
     [exec] Authentication failed for user: null
     [exec] (Usually, this means invalid user name and/or password)
     [exec] Command add-resources failed.
     [exec] Authentication failed for user: null
     [exec] (Usually, this means invalid user name and/or password)
     [exec] Result: 1 
```

似乎 glassfish 3.1.2 不再允许匿名部署，如果是这样，我应该如何在 ant glassfish-build.xml 中指定凭据？

有什么建议么？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T00:19:27.803

找到了解决方案，目前大多数 glassfish 3.1.2 版本的命令都需要 'user' 和 'passwordFile' 参数。因此，您需要更改调用它们的方式，例如 add-resources：

```
asadmin add-resources --user admin --passwordFile /localfile 
```

# html - SCSS (SASS) 效率援助

> ID：10293413
> 
> 赞同：1
> 
> 时间：2012-04-24T07:17:56.700
> 
> 标签：html, css, scripting, sass

我只是想知道是否有人知道我可以使下面的代码变得更加高效或动态，我已经达到了预期的结果，我只是想知道它是否可以更好地工作。

[剧本](http://www.innercitywinemakers.com.au/arbitrary/script.scss)

任何答案将不胜感激，

干杯，
杰克逊雷德蒙德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:30:54.067

我建议你看看[指南针](http://compass-style.org/)。它为 Scss 或 Sass提供了许多有用的 mixin（例如[box-shadow](http://compass-style.org/reference/compass/css3/box_shadow/)或[border-radius ）。](http://compass-style.org/reference/compass/css3/border_radius/)他们正在开发一个动画模块，所以看看[这个提交](https://github.com/chriseppstein/compass/commit/9b924243ff7fb543ea8fdce572cf3fc94ef147ba)，看看他们是如何实现的。

# csv - CSV - 如何将整个描述绑定为一条记录

> ID：10293415
> 
> 赞同：0
> 
> 时间：2012-04-24T07:18:32.540
> 
> 标签：csv

我需要将数据（产品详细信息）**从一个在线商店传输到另一个**。

我**以 .CSV**格式从源存储导出数据。现在我想创建与**目标商店兼容的 .CSV**以导入到目标商店。

有如下字段：**“ProductCode、ProductName、ProductDescription”**等。

因此，在**ProductDescription**列中，如果 ProductDescription 中存在 comma(,)，那么它将从 comma(,) 转到下一列。

如何将整个描述绑定为该特定产品的一条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:24:51.433

确保在描述周围加上双引号（即“”）。

# android - Android 如何与无效的 APN 建立数据连接？

> ID：10293417
> 
> 赞同：2
> 
> 时间：2012-04-24T07:18:34.610
> 
> 标签：android, apn

我有一个 HTC Explorer，我正在开发一个在 Android 中设置 APN 设置的应用程序。问题是，我是否设置了正确的 APN 似乎并不重要。它仍然有效！操作员是否在服务器端处理此问题？它在 GSM 和 CDMA 上的工作方式不同吗？如果可用，Android 可能会从 SIM 卡中读取设置？或者最后知道工作配置？

它是如何工作的？！

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T13:13:50.823

我不知道它是如何工作的，但这可能会有所帮助。我发现世界上几乎所有运营商的 APN 设置都可以在 XML 文件中使用，您可以使用以下命令获取它：

```
adb pull cust/nii/chile/xml/apns-conf.xml 
```

我在智利，但还有几个南美国家的文件夹。例如，这是我找到的一家日本运营商的 APN 设置：

```
<!--begin niudahai DTS2010120102485 20101201-->
<apn carrier="SoftBank"
     apn="andglobal.softbank.ne.jp"
     proxy=""
     port=""
     user="andg004softbank"
     password="fp34vqgtu9nueeuk"
     server=""
     mmsc="http://mms/"
     mmsproxy="andmms.softbank.ne.jp"
     mmsport="8080"
     mcc="440"
     mnc="20"
 authtype="2"
     type="default,mms"
/> 
```

所以我猜算法可能是：

1.  尝试使用用户提供的 APN 设置。
2.  如果这不起作用，请查找可用的运算符。
3.  应用存储的 APN 设置。

如果您需要该文件的样本，我会将其上传到某个地方。

# android - 如何在textView中设置不同的宽度

> ID：10293431
> 
> 赞同：0
> 
> 时间：2012-04-24T07:19:25.210
> 
> 标签：android, listview, textview

我创建了一个自定义`ListView`，其中添加了两个`TextView`，一个`TextView`显示日期，另一个`TextView`显示在该特定日期输入的重量。现在我想要的是在第二个`TextView`显示权重时，文本视图的宽度设置为用户输入的权重。我编写的代码显示了一些问题。这意味着当用户输入重量 70 和 75 时，宽度`TextView`显示相同的大小。为什么会这样。请任何人帮我解决这个问题。

**列表活动的 XML 代码**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/img_allnotes_bg" >

    <TextView
        android:id="@+id/txt_weight_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/image_divder1"
        android:layout_marginTop="15dp"
        android:gravity="center_horizontal|center_vertical"
        android:text="@string/txt_weight_title"
        android:textColor="#5f5f5f"
        android:textSize="@dimen/font_size_page_text" >
    </TextView>

    <ListView
        android:id="@+id/weight_list_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/bottom_control_bar"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/image_divider2"
        android:layout_marginBottom="15dp"
        android:layout_marginTop="2dp"
        android:cacheColorHint="#00000000"
        android:divider="@null"
        android:dividerHeight="0dp"
        android:listSelector="#00000000" >
    </ListView>  
</RelativeLayout> 
```

**ListView 项的 XML 代码**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="2dip" >

    <TextView
        android:id="@+id/txt_weightdate_display"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="60dp"
        android:layout_marginRight="60dp"
        android:focusable="false"
        android:textColor="#5f5f5f"
        android:textSize="@dimen/font_size_page_text" >
    </TextView>
     <TextView
        android:id="@+id/txt_weight_display"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txt_weightdate_display"
        android:layout_marginLeft="60dp"
        android:layout_marginRight="60dp"
        android:layout_marginTop="5dp"
        android:gravity="center"
        android:focusable="false"
        android:textColor="#5f5f5f"
        android:background="#00FFFF"
        android:textSize="@dimen/font_size_page_text" >
    </TextView>
</RelativeLayout> 
```

**用于生成列表视图的 Java 代码**

```
public void displayWeights()
{
    m_allWeightsList  = (ListView) findViewById(R.id.weight_list_view);

    int iWeightCount = CycleManager.getSingletonObject().getWeightCount();

    m_weightsdateDisplay  = new String[iWeightCount];

    m_weightDisplay = new String[iWeightCount];

    m_enStage = new int[iWeightCount];

    int i;      

    for (i=0; i<iWeightCount; i++)
    {
        m_weightsdateDisplay[i] = "";

        Date dtWeightDate = CycleManager.getSingletonObject().getWeightDate(i);

        m_enStage[i] = CycleManager.getSingletonObject().getCycleStage(dtWeightDate);

        m_weightsdateDisplay[i] = formator.format(dtWeightDate.getTime());

        m_weightDisplay[i] = "";

        m_weightDisplay[i] = CycleManager.getSingletonObject().getWeight(dtWeightDate); 
    }

    m_adapter = new AllWeightsAdapter(this, m_weightsdateDisplay, m_weightDisplay);

    m_allWeightsList.setAdapter(m_adapter);  

}

class AllWeightsAdapter extends BaseAdapter
{   
    public String    m_weightsDateDisplay[];

    public String    m_weightsDisplay[];

    public Activity  m_context;

    public LayoutInflater  m_inflater;

    public AllWeightsAdapter(Activity m_context, String[] m_weightsDateDisplay, String[] m_weightsDisplay)
    {
        super();

        this.m_context = m_context;

        this.m_weightsDateDisplay = m_weightsDateDisplay;

        this.m_weightsDisplay = m_weightsDisplay;

        this.m_inflater = (LayoutInflater)m_context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);      
    }
    public AllWeightsAdapter()
    {

    }
    public int getCount()
    {
        return m_weightsDateDisplay.length; 
    }

    public Object getItem(int position)
    {   
        return null;
    }

    public long getItemId(int position)
    {
        return 0;
    }

    public class ViewHolder
    {
        TextView txt_weightdt_display;

        TextView txt_weight_display;
    }

    @Override 
    public View getView(int position, View convertView, ViewGroup parent)
    {
        ViewHolder holder;

        Typeface face = Typeface.createFromAsset(m_context.getAssets(), "fonts/Cicle Semi.ttf");

        if(convertView == null)
        {
            holder = new ViewHolder();
            convertView = m_inflater.inflate(R.layout.all_weights_list, null);

            holder.txt_weightdt_display = (TextView) convertView.findViewById(R.id.txt_weightdate_display); 
            holder.txt_weight_display = (TextView) convertView.findViewById(R.id.txt_weight_display);
            convertView.setTag(holder);
        }
        else
        {
            holder = (ViewHolder)convertView.getTag();
        }

        // Added Weight Date in List View Component
        holder.txt_weightdt_display.setText(m_weightsDateDisplay[position]);
        holder.txt_weightdt_display.setTypeface(face);

        // Added Weights in List View   Component       
        double factor, width, scale, borderwidth, minScreenWidth = 40, maxScreenWidth = 200;
        double maxWeight = CycleManager.getSingletonObject().getMaxWeight();
        double minWidth  = CycleManager.getSingletonObject().getMinWeight();  

        scale = maxWeight - minWidth;
        factor = (maxScreenWidth - minScreenWidth) / scale;

        width = (maxWeight - Double.parseDouble(m_weightsDisplay[position])) * factor;
        borderwidth = maxScreenWidth - width;

        holder.txt_weight_display.setText(m_weightsDisplay[position]);
        holder.txt_weight_display.setMinWidth((int)borderwidth);
        holder.txt_weight_display.setTypeface(face);

        return convertView;
    } 
}
} 
```

**截图**

![在此处输入图像描述](../Images/a09b82af7591604f216ff49647ba3976.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:51:44.960

每个 60dps 的左右边距可能是问题所在。您为空白空间花费了 120dps。[http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html](http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html)说手机的屏幕尺寸为 320dp 宽度。

此外，我不确定 CycleManager 做了什么，但如果你不这样做，可能会定义你应该使用设备屏幕宽度并相应缩放的最大值。

最后，我想这不相关，但您正在使用 wrap_content 作为列表视图。您不认为将其设为fill_parent 更合适吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:57:13.707

好的@Anshuman，这是屏幕现实的问题。70 和 75 的大小相同，因为您已经用尽了该视图的空间。尝试改变那个蓝色标记的比例。也许这样的事情会给你更多的空间（只需使用 shrinkScaler 变量，直到你获得适合所有你想要的权重所需的大小。

```
double shrinkScaler = .75;
holder.txt_weight_display.setMinWidth((int)(borderwidth * shrinkScaler)); 
```

# php - 如何替换文件中的内容

> ID：10293432
> 
> 赞同：0
> 
> 时间：2012-04-24T07:19:25.587
> 
> 标签：php, str-replace

我有一个包含一些信息的配置文件，格式如下：

```
define("FTP_USERNAME","583hdsljf");
define("FTP_PASSWORD","******");
define("FTP_FOLDER1","greatfolder");
define("FTP_FOLDER2","greatfolder"); 
```

通常我在替换模板中的值时使用 str_replace()，但是当我这样做时我需要知道要替换什么（例如 [REPLACE_THIS_WITH_FTP_USERNAME]）。在这种情况下我不能这样做，因为当我想用新值替换时，上面的所有值都是未知的和不同的。

有什么建议么？

注意：配置文件中的某些值可能相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:40:05.867

```
$content = preg_replace('/(define\("FTP_USERNAME",")[^"]+("\);)
/', '$1new username$2', $content); 
```

但是，我强烈建议您对配置文件使用标准化格式，例如 JSON。虽然上面的正则表达式确实有效，但一旦有人手动编辑文件并使用例如单引号而不是双引号，它就会中断。它也会被包含转义引号的字符串打破。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:40:00.590

您可以使用 preg_replace 如下...

```
$str='
define("FTP_USERNAME","583hdsljf");
define("FTP_PASSWORD","******");
';
$strval='NEW VALUE';
$str=preg_replace('/FTP_USERNAME","(.*)"/','FTP_USERNAME","'.$strval.'"',$str);
echo $str; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-24T07:38:57.743

我会解析文件并将每一行与正则表达式匹配。

例如，

```
$line = 'define("hello", "hi")';
preg_match('/define\(\s*[\'"](.*)[\'"]\s*,\s*[\'"](.*)[\'"]\s*\)/', $line, $matches); 
```

应该给我们一套

```
Array
(
    [0] => define("hello", "hi")
    [1] => hello
    [2] => hi
) 
```

然后我们只需将我们的密钥与 $matches[1] 进行匹配，并将该行（或表达式）换成新的！

# iphone - 滚动单击到 UIScrollView 中的屏幕中心

> ID：10293433
> 
> 赞同：0
> 
> 时间：2012-04-24T07:19:39.310
> 
> 标签：iphone, objective-c, ios, uiscrollview

我有带有标签的 UIScrollView。我正在获取触摸事件坐标。当用户点击屏幕时，我将点击坐标存储在变量中，然后我想滚动视图（使用 [myScrollView setContentOffset] 之类的东西），这样点击点的 y 坐标将成为我视图的中心，所以当你点击一些文本时，它会自动滚动到屏幕的中心。我不知道如何锻炼这个数学......

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:19:06.543

```
UIScrollView *aScrollView;      
CGPoint touchPoint;
[aScrollView scrollRectToVisible:CGRectMake(touchPoint.x - roundf(aScrollView.frame.size.width/2.),
                                                  touchPoint.y - roundf(aScrollView.frame.size.height/2.), 
                                                  aScrollView.frame.size.width, 
                                                  aScrollView.frame.size.height)  
                                                  animated:YES]; 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T13:09:57.723

我的解决方案非常相似，但我使用的是比例，我想使视图居中，而不是接触点。所以我需要先计算中心点。

我的最终代码：

```
UIView *view; //View to center
UIScrollView *scrollView; //scroll view

CGPoint point = CGPointMake(view.frame.origin.x + view.frame.size.width / 2, 
                            view.frame.origin.y + view.frame.size.height / 2);

CGRect rectToZoom = CGRectMake(point.x * scrollView.zoomScale - roundf(scrollView.frame.size.width /2.),
                               point.y * scrollView.zoomScale - roundf(scrollView.frame.size.height /2.),
                               scrollView.frame.size.width,
                               scrollView.frame.size.height);

[scrollView scrollRectToVisible:rectToZoom animated:YES]; 
```

# sql - 使用“楼层”获取日期和日期时间字段之间的日期差异

> ID：10293435
> 
> 赞同：0
> 
> 时间：2012-04-24T07:19:43.073
> 
> 标签：sql, datetime, oracle10g, floor

我正在尝试使用`Floor`日期和日期时间字段之间的函数来获取天数差异。但我得到了额外的一天。这就是我正在做的->

```
SELECT col,col1,FLOOR(col-col1) FROM tab_name 
```

这里 col 只是 Date 字段，Col1 是 DateTime 字段

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:38:17.110

在 oracle 中没有没有时间的日期。
日期也总是包含时间（即使您不显示它）。

我不明白你为什么要使用`floor`，我想你想要的是`trunc`：

```
SELECT col,col1, col- trunc(col1) FROM tab_name 
```

# android - 适用于平板电脑和设备的 Android 布局设计

> ID：10293436
> 
> 赞同：0
> 
> 时间：2012-04-24T07:19:43.757
> 
> 标签：android, android-layout

我们如何为所有分辨率的设备和平板电脑设计布局，请对此提出建议..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:57:17.300

请先参考这个：[支持多屏](http://developer.android.com/guide/practices/screens_support.html)

如果您遇到麻烦，请告诉我们您遇到麻烦的地方。

享受。:)

**更新** 您需要为不同的屏幕尺寸创建不同的布局。支持创建以下布局所需的所有屏幕：

```
Low density Small screens QVGA 240x320 (120dpi):

layout-small-ldpi (240x320)  
layout-small-land-ldpi (320x240)

Low density Normal screens WVGA400 240x400 (x432) (120dpi):

layout-ldpi  (240 x 400 )
layout-land-ldpi  (400 x 240 )
Medium density Normal screens HVGA 320x480 (160dpi):

layout-mdpi (320 x 480 )
layout-land-mdpi (480 x 320 )

Medium density Large screens HVGA 320x480 (160dpi):

layout-large-mdpi (320 x 480 )
layout-large-land-mdpi (480 x 320)
Galaxy Tab ( 240 dpi ):

layout-large  (600 x 1024) 
layout-large-land  (1024 x 600)

High density Normal screens WVGA800 480x800 (x854) (240 dpi):

layout-hdpi (480 x 800)
layout-land-hdpi (800 x 480)

Xoom (medium density large but 1280x800 res) (160 dpi):

layout-xlarge (800 x 1280)
layout-xlarge-land (1280 x 800) 
```

还要在 .manifest 文件中添加以下代码：

```
<supports-screens                                 
    android:smallScreens="true"                    
    android:normalScreens="true"         
    android:largeScreens="true"            
    android:xlargeScreens="true"             
    android:anyDensity="true" /> 
```

# python - 在正则表达式中使用变量 - Python

> ID：10293437
> 
> 赞同：-3
> 
> 时间：2012-04-24T07:19:44.213
> 
> 标签：python, regex, variables

我正在尝试使用正则表达式搜索此文本文档，但我还需要用户在正则表达式中输入，我不确定如何执行此操作，并且对 python 编程很陌生，任何帮助将不胜感激！

```
import re

str1=raw_input("Room Number(L1 - L5): ")
text=open('roombookings.txt', 'r')

while 1:
    line = text.readline()
    if line:
        re.search(?????)
    else:
        break

text.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:22:31.993

1.  要遍历文件中的行，请执行

    ```
    for line in text: 
    ```

    你不需要这些`while 1`东西。

2.  要将变量的内容“拼接”成字符串，请执行以下操作

    ```
    "Your name is {name}.".format(name="John") 
    ```

    请参阅[文档](http://docs.python.org/library/stdtypes.html#str.format)。

3.  要打开和关闭文件，请执行以下操作：

    ```
    with open(...) as f: 
    ```

    而不是手动编写`f.close()`——这也可以处理异常。另请注意，如果您没有显式关闭文件，它将在删除对象时关闭，当没有更多引用它时会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:33:42.303

如果您的意思是用户输入要插入正则表达式的纯字符串（本身不是正则表达式），请使用`re.escape`对字符串进行编码。

# mysql - 休眠的 ManyToOne 关系对象中的 GWT rpc.SerializationException

> ID：10293439
> 
> 赞同：2
> 
> 时间：2012-04-24T07:19:53.243
> 
> 标签：mysql, spring, hibernate, gwt, annotations

我想用 spring 和 hibernate 开发一个小型 GWT 应用程序，但是在从 MySql db 获取列表时出现错误。实体类 Contact 与 Room 有 @ManyToOne 关系。

```
@Entity
@Table(name = "contact")

public **class Contact** extends LightEntity implements java.io.Serializable {

@Id
@Column(name = "id")
protected int id;   

@Column(name = "firstname")
protected String firstname;   

@Column(name = "telephone")    
protected String telephone;

@ManyToOne
@JoinColumn(name = "ROOM_ID")  
protected Room room; 
```

...二传手和吸气剂

```
@Entity
@Table(name = "ROOM")

public **class Room** extends LightEntity implements java.io.Serializable {

@Id
@GeneratedValue
@Column(name = "ROOM_ID")
private int id;     

@Column(name = "ROOM_NUMBER")    
protected int rnr;

@OneToMany(mappedBy="room", fetch = FetchType.EAGER) // tried to fetch eagerly
private List<Contact> contacts; 
```

...二传手和吸气剂

LightEntity 已在文章[https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate?hl=fr-FR中使用](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate?hl=fr-FR)

当我只使用**单向**（即使用@ManyToOne 与房间联系）关系时，它**工作正常**。

这是一个例外：-

```
Hibernate: select contacts0_.ROOM_ID as ROOM6_1_1_, contacts0_.id as id1_, contacts0_.id as id0_0_, contacts0_.email as email0_0_, contacts0_.firstname as firstname0_0_, contacts0_.lastname as lastname0_0_, contacts0_.ROOM_ID as ROOM6_0_0_,  contacts0_.telephone as telephone0_0_ from contact contacts0_ where contacts0_.ROOM_ID=?

Starting Jetty on port 8888
   [WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.client.rpc.SerializationException: 
Type 'org.hibernate.collection.PersistentBag' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. 

For security purposes, this type will not be serialized.:
instance = [com.project.server.schema.Contact@168e461, com.project.server.schema.Contact@dde1f6,  com.project.server.schema.Contact@c66a3b, com.project.server.schema.Contact@8103d8, com.project.server.schema.Contact@137dfac]
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:619) 
```

任何帮助或建议将不胜感激。

亲切的问候，阿比德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:59:12.000

对我来说，当我使用@LazyCollection 时，这个问题就消失了：

```
@LazyCollection(LazyCollectionOption.FALSE) 
```

完整示例：

```
@ManyToOne(cascade = CascadeType.MERGE, optional=false)
@LazyCollection(LazyCollectionOption.FALSE)
@JoinColumn(name="room_id")
public Room getRoom();

@OneToMany(mappedBy = "contact")
@LazyCollection(LazyCollectionOption.FALSE)
public List<Contact> getContacts(); 
```

# asp.net-mvc - 如何使 ASP.Net MVC 模型绑定器将传入日期视为 UTC？

> ID：10293440
> 
> 赞同：29
> 
> 时间：2012-04-24T07:19:58.260
> 
> 标签：asp.net-mvc, model-binding

我将一个对象发布到 MVC 控制器。该对象包含一个名为 StartDt 的字段，在客户端上它是本地时间的 javascript Date 对象。

当我在对象上调用 JSON.stringify 并使用 jQuery 的 ajax 方法将其发布到服务器时，我可以在 Firebug 中看到发送到服务器的是一个 ISO 字符串，例如“1900-12-31T13:00:00.000Z”，我相信应该是UTC格式的本地时间。

但是，当我查看控制器中的 DateTime 字段时，它看起来像是回到本地时间而不是 UTC。我怎样才能解决这个问题？

我想存储来自客户端的日期的 UTC 版本。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2017-09-19T20:02:19.323

此问题在 ASP.NET Core 2.0 中仍然存在。以下代码将解决它，支持 ISO 8601 基本和扩展格式，正确保留值并`DateTimeKind`正确设置。这与 JSON.Net 解析的默认行为一致，因此它使您的模型绑定行为与系统的其余部分保持一致。

首先，添加以下模型绑定器：

```
public class DateTimeModelBinder : IModelBinder
{
    private static readonly string[] DateTimeFormats = { "yyyyMMdd'T'HHmmss.FFFFFFFK", "yyyy-MM-dd'T'HH:mm:ss.FFFFFFFK" };

    public Task BindModelAsync(ModelBindingContext bindingContext)
    {
        if (bindingContext == null)
            throw new ArgumentNullException(nameof(bindingContext));

        var stringValue = bindingContext.ValueProvider.GetValue(bindingContext.ModelName).FirstValue;

        if (bindingContext.ModelType == typeof(DateTime?) && string.IsNullOrEmpty(stringValue))
        {
            bindingContext.Result = ModelBindingResult.Success(null);
            return Task.CompletedTask;
        }

        bindingContext.Result = DateTime.TryParseExact(stringValue, DateTimeFormats,
            CultureInfo.InvariantCulture, DateTimeStyles.RoundtripKind, out var result)
            ? ModelBindingResult.Success(result)
            : ModelBindingResult.Failed();

        return Task.CompletedTask;
    }
} 
```

然后添加以下模型绑定器提供程序：

```
public class DateTimeModelBinderProvider : IModelBinderProvider
{
    public IModelBinder GetBinder(ModelBinderProviderContext context)
    {
        if (context == null)
            throw new ArgumentNullException(nameof(context));

        if (context.Metadata.ModelType != typeof(DateTime) &&
            context.Metadata.ModelType != typeof(DateTime?))
            return null;

        return new BinderTypeModelBinder(typeof(DateTimeModelBinder));
    }
} 
```

然后在您的`Startup.cs`文件中注册提供程序：

```
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc(options =>
    {
        ...

        options.ModelBinderProviders.Insert(0, new DateTimeModelBinderProvider());

        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-12T22:17:13.187

我在 Google 上找到了一个要点，其中包含[符合 ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)的[DateTime Model Binder](https://gist.github.com/660144)的代码，然后像这样修改它：

```
public class DateTimeBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var name = bindingContext.ModelName;
        var value = bindingContext.ValueProvider.GetValue(name);
        if (value == null) 
            return null;

        DateTime date;
        if (DateTime.TryParse(value.AttemptedValue, null, DateTimeStyles.RoundtripKind, out date))
            return date;
        else
            return base.BindModel(controllerContext, bindingContext);
    }
} 
```

我认为 gist 代码过于严格——它需要 6 秒小数位，否则它不会接受时间戳。这使用 TryParse 而不是 TryParseExact，因此它在技术上将接受很多时间戳类型。重要的部分是它使用 DateTimeStyles.RoundtripKind 来尊重 Z 隐含的时区。所以这在技术上不再是 ISO 8601 特定的实现。

然后，您可以使用模型绑定器属性或 App_Start 中的此代码段将其挂接到 MVC 管道中：

```
var dateTimeBinder = new DateTimeBinder();

ModelBinders.Binders.Add(typeof(DateTime), dateTimeBinder);
ModelBinders.Binders.Add(typeof(DateTime?), dateTimeBinder); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-27T01:34:31.647

我创建了这个小属性。

```
public class ConvertDateToUTCAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var dateArgs =
            filterContext.ActionParameters.Where(
                x => x.Value != null && x.Value.GetType().IsAssignableFrom(typeof(DateTime))).ToList();

        foreach (var keyValuePair in dateArgs)
        {
            var date = (DateTime) keyValuePair.Value;

            if (date.Kind == DateTimeKind.Local)
                filterContext.ActionParameters[keyValuePair.Key] = date.ToUniversalTime();
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

因此，这将留下未指定的日期或单独的 Utc 日期。您可以将其应用于整个控制器。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-08-02T13:53:03.030

或者，您可以将绑定对象指定为`DateTimeOffset`而不是`DateTime`，并且不会自动转换。只要传入的字符串有`Z`后缀，你就应该得到偏移量为 的原始日期`+00:00`。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-24T07:27:09.367

您可能必须使用 DateTime.ToUniversalTime() 方法来取回 UTC 时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-16T15:28:59.137

我认为这在 ASP.NET Core 5.0 中得到了解决。

[https://github.com/dotnet/aspnetcore/issues/11584](https://github.com/dotnet/aspnetcore/issues/11584)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-25T08:23:26.677

这在 ASP.NET Core 5.0+ 中得到解决。但是，如果您还想将不表示本地或 UTC 时间的输入视为 UTC，您可以这样做：

```
using System;
using System.Globalization;
using Microsoft.AspNetCore.Mvc.ModelBinding;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Logging;

internal class CustomDateTimeModelBinderProvider : IModelBinderProvider
{
    internal const DateTimeStyles SupportedStyles = DateTimeStyles.AdjustToUniversal | DateTimeStyles.AllowWhiteSpaces;

    public IModelBinder? GetBinder(ModelBinderProviderContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException(nameof(context));
        }

        var modelType = context.Metadata.UnderlyingOrModelType;
        if (modelType == typeof(DateTime))
        {
            var loggerFactory = context.Services.GetRequiredService<ILoggerFactory>();
            return new CustomDateTimeModelBinder(SupportedStyles, loggerFactory);
        }

        return null;
    }
} 
```

```
using System;
using System.Globalization;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Mvc.ModelBinding;
using Microsoft.AspNetCore.Mvc.ModelBinding.Binders;
using Microsoft.Extensions.Logging;

internal class CustomDateTimeModelBinder : IModelBinder
{
    private readonly DateTimeModelBinder _dateTimeModelBinder;

    public CustomDateTimeModelBinder(DateTimeStyles supportedStyles, ILoggerFactory loggerFactory)
    {
        _dateTimeModelBinder = new DateTimeModelBinder(supportedStyles, loggerFactory);
    }

    public async Task BindModelAsync(ModelBindingContext bindingContext)
    {
        await _dateTimeModelBinder.BindModelAsync(bindingContext);

        if (bindingContext.Result.IsModelSet)
        {
            var value = (DateTime)bindingContext.Result.Model!;

            if (value.Kind == DateTimeKind.Unspecified)
            {
                var model = DateTime.SpecifyKind(value, DateTimeKind.Utc);

                bindingContext.Result = ModelBindingResult.Success(model);
            }
        }
    }
} 
```

```
services.AddMvc(o =>
{
    o.ModelBinderProviders.Insert(0, new CustomDateTimeModelBinderProvider());
}); 
```

# javascript - 从函数返回结果 - javascript

> ID：10293441
> 
> 赞同：0
> 
> 时间：2012-04-24T07:20:02.963
> 
> 标签：javascript, ajax, database, callback, return-value

我定义了以下 Javascript 函数：

```
function RecoverDataFromTable(table_name) {
              query = "";

              //some code that build a query string from table_name and
              //other arguments given to the function

              function Query(database) {
              database.executeSql(query, [], RecoverResults, Error)
              }

              function RecoverResults(database, results) {
              var my_result = results.rows(0).id;
              // assume this works and store a value to my_result
              }

              function Error(error) {
              //alert something
              }

              function Success() {
              //alert something
              }

              database.transaction(Query, Error, Success)                 

              } 
```

现在，我怎样才能返回 my_result 值以便我可以做到这一点？

```
var my_var = RecoverDataFromTable(table_name, argument1, argument2.....) 
```

提前致谢。询问您是否需要更多解释。:)

[http://www.raymondcamden.com/index.cfm/2012/1/6/Working-with-dates-and-SQLite-in-PhoneGap](http://www.raymondcamden.com/index.cfm/2012/1/6/Working-with-dates-and-SQLite-in-PhoneGap)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:06:46.090

你不能真的像那样设置变量，因为函数是异步的。相反，您应该在对*RecoverDataFromTable*的请求中包含一个**回调**函数。像这样定义它：

 *```
function RecoverDataFromTable(callback, table_name) {
     ...

     function RecoverResults(database, results) {
          var my_result = results.rows(0).id;
          // assume this works and store a value to my_result
          // make the callback:
          callback(result);
     }
     ...
} 
```

然后像这样拨打电话：

```
function handleResult(my_result)
{
    // handle the result here
}

RecoverDataFromTable(handleResult, table_name, argument1, argument2.....); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:52:53.997

如果您的功能 RecoverResults 是异步的，那么您可以使用：：

```
function RecoverDataFromTable(callback, table_name) {
      ...
      function RecoverResults(callback, database, results) {
          var my_result = results.rows(0).id;
          callback(my_result);
          // assume this works and store a value to my_result
      }
}
RecoverDataFromTable(function(result) {
    var my_var = result;

}, table_name, argument1, argument2.....); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:56:53.087

不是吗？

```
function RecoverResults(database, results) {
 return results.rows(0).id;
}

var my_result = RecoverResults(); 
```*

# jwplayer - 如何使用 OVA 插件设置 JW Player，以便暂停 VPAID 广告

> ID：10293447
> 
> 赞同：3
> 
> 时间：2012-04-24T07:20:25.113
> 
> 标签：jwplayer

我正在尝试使用 OVA 插件设置 JW Player，以便可以使用控制栏上的暂停按钮暂停 VPAID 广告。我能够对其进行设置，以便可以暂停从 VAST 文档加载的 FLV 视频广告，但我无法让 VPAID 广告暂停。

*   OVA 配置指南
    [http://www.longtailvideo.com/support/open-video-ads/13048/ova-configuration-guide](http://www.longtailvideo.com/support/open-video-ads/13048/ova-configuration-guide)
    *   我用来`hideOnLinearPlayback: false`在广告期间显示播放控件。
    *   添加`enablePause: true`似乎不会在广告播放期间在控件上启用暂停。播放实际内容视频时效果很好。
    *   该`pauseOnClickThrough: true`选项也不会在点击时暂停 VPAID 广告。

任何有关如何使其工作的建议将不胜感激。谢谢！

以下是我的OVA配置：

```
{
    "shows": {
        "streams": [
        {
            "file": "http://content.bitsontherun.com/videos/wDqjiZXZ-m0JsjUy0.mp4",
            "duration": "00:00:15"
        }
        ]
    },
    "debug": {
        "debugger": "firebug",
        "levels": "fatal, config, vast_template"
    },
    "player": {
        "modes": {
            "linear": {
                "controls": {
                    "visible": true,
                    "enablePause": false,
                    "pauseOnClickThrough": true
                }
            }
        }
    },
    "ads": {
        "pauseOnClickThrough": true,
        "enablePause": "true",
        "displayCompanions": true,
        "companions": [
        {
            "id": "companion-300x250",
            "width": "300",
            "height": "250"
        }
        ],
        "vpaid": {
            "enablePause": "true",
            "pauseOnClickThrough": true,
            "controls": {
                "pauseOnClickThrough": "true",
                "enablePause": "true",
                "hideOnLinearPlayback": false
            }
        },
        "schedule": [
        {
            "position": "pre-roll",
            "server": {
                "type": "direct",
                "tag": "http://demo.scanscout.com/product/vastExamples/vast2VPAIDLinear.xml"
            }
        }
        ]
    }
} 
```

# windows - cmd批量重命名子文件夹/文件

> ID：10293450
> 
> 赞同：3
> 
> 时间：2012-04-24T07:20:45.023
> 
> 标签：windows, batch-file, cmd

如何批量重命名文件夹 A 中的文件，该文件夹包含具有此格式名称 filename_ex.doc 的子文件夹和文件，并使它们看起来像 filename.doc？

我一直在尝试这样做一段时间，这是一个史诗般的失败。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:11:30.493

我想您也想重命名子文件夹中的文件，这是您对 Martin James 的第二条评论中的方向有问题的地方。我猜你用 DIR /S 选项尝试了该代码。但你是如此接近:-)你只需要使用2个循环！

***编辑 - 固定代码***一旦输出看起来正确，删除 ECHO 以使其正常工作。

```
@echo off
for /r %%D in (.) do (
  pushd "%%~fD"
  for /f "tokens=1-3 delims=_." %%A in ('dir /b *_ex.ext 2^>nul') do echo ren "%%A_%%B.%%C" "%%A.%%C"
  popd
) 
```

只要每个文件名没有`_`出现`.`在`_ex.ext`. 路径中的字符应该没有问题，只是文件名是一个问题。

这是一个更强大的解决方案，应该适用于任何文件名（unicode 名称除外）。它也明显更快。它使用子字符串操作，您必须知道要从名称中删除的字符数。在您的示例中，它是 3 个字符。再次，一旦结果命令看起来正确，就删除 ECHO。

```
@echo off
setlocal disableDelayedExpansion
for /f "delims=" %%F in ('dir /b /s *_ex.ext') do (
  set "old=%%F"
  set "new=%%~nF"
  setlocal enableDelayedExpansion
  echo ren "!old!" "!new:~0,-3!.ext"
  endlocal
) 
```

# c# - 解析 JSON 对象以通过 ajax 将参数传递给 C# MVC3 控制器中的通用列表

> ID：10293451
> 
> 赞同：1
> 
> 时间：2012-04-24T07:20:45.677
> 
> 标签：c#, jquery, asp.net-mvc, json

我有一个小 jquery 代码：

```
 //foreach the inputs
         json.push({
                 Var1: $(this).attr("id"),
                 Var2: filename,
                 Var3: hash_name
              });
      //end foreach

      $.post(url, {test: json}, function(){}, 'json'); 
```

我们假设 json 有 3 个对象（在浏览 3 个输入并获取它们的值之后）。以及 MVC3 模型中的结构：

```
public struct Simple
   {
      public string Var1 {
         get;
         set;
      }

      public string Var2{
         get;
         set;
      }

      public string Var3{
         get;
         set;
      }

      public bool Var4 {
         get;
         set;
      }
   } 
```

和控制器：

```
 [HttpPost]
 public ActionResult Test( List<Simple> test) {
   ...
 } 
```

返回 3 个元素（这里是正确的`List<Simple>`），但所有属性的值为 null（Var4 除外，它是 false）。

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:08:03.697

如果它是您想做的 ModelBinding，那么需要做更多的工作。但是，如果您只是想要服务器端的 json 数组，那么这里有一个快速破解方法。下载**System.Json**（您可以通过 NuGet 完成）。在客户端不要发送 JSON 对象，因为这需要完全不同的方法。而是事先将其字符串化

```
 $(document).ready(function () {
        var json = [

            {
                Name: "John Doe",
                Age: 34
            }];
        var str = JSON.stringify(json);
        console.log(str);
        $.ajax({
            url: '/mycontroller/LoadJson',
            data: { values: str },
            type: 'POST',                
            success: function (data) {                   
              //do something
            }
        });
    }); 
```

在服务器端，您可以将 JsonValue.Parse 用于动态对象（然后您可以将其“翻译”为您的自定义对象之一）

```
 [HttpPost]
    public ActionResult LoadJson(FormCollection collection)
    {
        dynamic values = JsonValue.Parse(collection["values"]);       
        for(int i = 0; i < values.Count; i++)
        {
            var _output = string.Format("My name is {0} and I'm {1} of age", values[i].Name, values[i].Age);
            Console.WriteLine(_output);
        }
        return RedirectToAction("Index");
    } 
```

这是一篇关于动态 Json 解析的较长文章 [http://www.west-wind.com/weblog/posts/2012/Mar/19/Dynamic-JSON-Parsing-in-NET-with-JsonValue](http://www.west-wind.com/weblog/posts/2012/Mar/19/Dynamic-JSON-Parsing-in-NET-with-JsonValue)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:48:26.010

名字应该是这样的（Json键值）

```
test[0].Var1
test[0].Var2
test[0].Var3

test[1].Var1
.....

Or

[0].Var1
[0].Var2
[0].Var3
...... 
```

服务器无法关联构成每个对象的属性的想法，因此该数字仅用于分组

并且`Var4`是假的，因为模型绑定器用它的默认值实例化了它，它没有从表单中读取任何值

* * *

前任

**Javascript**

```
json.push({
                 'test[0].Var1': $(this).attr("id"),
                 'test[0].Var1': filename,
                 'test[0].Var1': hash_name
              }); 
```

你应该`0`为每个对象增加

JavaScript 中的名称`test`必须与操作方法的参数名称匹配

# function - JavaScript 函数未设置变量值

> ID：10293453
> 
> 赞同：2
> 
> 时间：2012-04-24T07:20:50.827
> 
> 标签：function, javascript

我创建了一个变量并尝试通过函数设置它的值。但是这个值在那个函数之外是不可访问的

```
<script type="text/javascript">
 $(document).ready(function () {
   var pId;
   getProfiles(id,function(b)
     {
        pId=b;
        alert(pId); // It works fine...
      });
  alert(pId); // undefined...
  });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:24:21.293

第一个警报有效，因为它就在您传递给的*回调*`getProfiles`函数设置值之后。

您的代码示例中的第二个警报仍然显示值“未定义”，因为您传递给 getProfiles 的*回调*函数尚未执行。

另外，请注意：`pId`对于您传递给 jQuery 的 ready 事件的函数是本地的，它不是全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:32:43.143

您声明`pId`但未为其分配任何值，因此默认情况下为`undefined`，然后评估同一范围内的警报，并打印“ `undefined`”。匿名函数是由`getProfiles()`（可能是异步的）调用的回调，您不能假设它会在调用外部之前`alert`被调用。

```
<script type="text/javascript">
 $(document).ready(function () {
   /* You declare it but you don't assign any value to it... 
    * so by default is undefined 
    */
   var pId; 
   getProfiles(id,function(b)
     {
        pId=b;
        alert(pId); // This is called only once your anonymous callback is called...
      });
  alert(pId); // Alerts 'undefined'
  });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:24:50.700

当您分配给`pId`新值而没有在全局范围内声明的声明变量 pId 时。但是你有一个局部`pId`变量。因此，当您在回调中调用警报时，它会显示 GLOBAL 的值，`pId`而第二个警报会显示您的 LOCAL`pId`值。

```
function f() { d = 2; }; 
function a() {
    var d = 1;
    f();
    alert(d);
}
a();
alert(d); 
```

`undefined`第一个警报将显示 1，第二个将显示 2。因此，无论何时调用回调，代码中的第二个警报都会始终显示。

# django - HttpResponseRedirect 后丢失会话

> ID：10293467
> 
> 赞同：1
> 
> 时间：2012-04-24T07:22:02.787
> 
> 标签：django, django-views, django-sessions

我阅读了“[如何使用会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)”，添加`django.contrib.sessions.middleware.SessionMiddleware`到`MIDDLEWARE_CLASSES`和`django.contrib.sessions`中`INSTALLED_APPS`，`settings.py`并在我看来尝试了以下操作：

```
if not request.session.get('confirmed_disclaimer', False):
    if request.method == "POST":
        form = DisclaimerForm(data=request.POST)
        if form.is_valid():
            request.session['confirmed_disclaimer'] = True
            return HttpResponseRedirect('.')
    else:
        form = DisclaimerForm()
else:
    if request.method == "POST":
        form = AuthenticationForm(data=request.POST)
        if form.is_valid():
            auth_login(request, form.get_user())
            return HttpResponseRedirect('.')
    else:
        form = AuthenticationForm(request)
return render_to_response('login.html', {'form': form, },
                          context_instance=RequestContext(request)) 
```

这应该首先显示免责声明表单，然后显示登录表单，如果尚未确认一次（会话）。但是我在之后失去了会议`HttpResponseRedirect`。

我用错了吗？

谢谢任何建议！

**编辑**

有一个

```
...
logout(request)
return login(request) 
```

在 Mixin 中。这每次都会创建一个新会话，很抱歉，感谢您尝试帮助@DrTyrsa！

# android - 粘贴到edittextbox时如何删除空白？

> ID：10293473
> 
> 赞同：0
> 
> 时间：2012-04-24T07:22:24.533
> 
> 标签：android, android-edittext, removing-whitespace

我需要在我的应用程序的编辑框中写**“tingting”** 。首先我写了**ting**，然后我复制了文本并将其粘贴到同一个编辑框中。但是编辑文本中的值是**“ting ting”。**
.我知道如何在从编辑文本中获取值时删除空格。但是我想在编辑框中粘贴文本时删除空格
我该怎么做？下面给出的是我的编辑文本框。

```
 <EditText
        android:id="@+id/list_AddNewtext"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:background="@drawable/list_stdcenterelement"
        android:imeOptions="actionSend|actionGo|actionDone"
        android:inputType="text|textCapWords"
        android:padding="5dp"
        android:textColor="@android:color/black"
        android:textSize="14sp"
        android:textStyle="bold"
        android:visibility="visible"
        android:maxLength="1000" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:29:41.150

尝试

```
String str=list_AddNewtext.getText().trim();
list_AddNewtext.setText(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:38:53.780

试试这个

```
String str = list_AddNewtext.getText().toString();
String _newstr = str.replace(" ", ""); 
```

使用 _newstr 它给出 tingting 输出

你把这段代码放在你的 onclickListner 事件中

# iphone - TouchEnd 方法中的 clearContextBeforeDrawing

> ID：10293495
> 
> 赞同：0
> 
> 时间：2012-04-24T07:23:28.907
> 
> 标签：iphone, quartz-graphics, cgcontext, cgcontextdrawimage

我只是简单地使用铅笔画。但是我必须从粗略的绘图到平滑的绘图来展示它。所以我在`touchesMoved`和中使用不同的代码`touchesEnded`。

代码如下：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];

    previousPoint2 = previousPoint1;
    previousPoint1 = [touch previousLocationInView:self.view];
    currentPoint = [touch locationInView:self.view];

    CGPathMoveToPoint(path, NULL, previousPoint1.x, previousPoint1.y);
    CGPathAddLineToPoint(path, NULL, currentPoint.x, currentPoint.y);

    UIGraphicsBeginImageContext(imageview.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    [imageview.image drawInRect:CGRectMake(0, 0, imageview.frame.size.width, imageview.frame.size.height)];

    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineJoin(context, kCGLineJoinBevel);
    CGContextSetRGBStrokeColor(context, 0.0, 1.0, 0.0, 1.0);
     CGPathCloseSubpath(path);
    CGContextSetAllowsAntialiasing(context, YES);
     CGContextSetLineWidth(context, 2.0);  
    CGContextAddPath(context, path);
     CGContextStrokePath(context);

   imageview.image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    CGPathRelease(path);
    path = CGPathCreateMutable();

    [self.PointArr addObject:[NSValue valueWithCGPoint:currentPoint]];
    [self.disArr addObject:[NSValue valueWithCGPoint:currentPoint]];

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

    UIGraphicsBeginImageContext(CGSizeMake(imageview.frame.size.width, imageview.frame.size.height));   
    [imageview.image drawInRect:CGRectMake(0, 0, imageview.frame.size.width, imageview.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 2.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 1.0, 0.0, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());

    int curIndex = 0;
    CGFloat x0,y0,x1,y1,x2,y2,x3,y3;

    CGMutablePathRef pathh = CGPathCreateMutable();

    CGPathMoveToPoint(pathh,NULL,[[self.PointArr objectAtIndex:0] CGPointValue].x,[[self.PointArr objectAtIndex:0] CGPointValue].y);

    for(NSValue *v in self.PointArr){

        if(curIndex >= 4){
            for (int i=curIndex;i>=curIndex-4;i--) {
                int step = (curIndex-i);
                switch (step) {
                    case 0:
                        x3 = [(NSValue*)[self.PointArr objectAtIndex:i-1] CGPointValue].x;
                        y3 = [(NSValue*)[self.PointArr objectAtIndex:i-1] CGPointValue].y;  
                        break;
                    case 1:
                        x2 = [(NSValue*)[self.PointArr objectAtIndex:i-1] CGPointValue].x;
                        y2 = [(NSValue*)[self.PointArr objectAtIndex:i-1] CGPointValue].y;                      
                        break;
                    case 2:
                        x1 = [(NSValue*)[self.PointArr objectAtIndex:i-1] CGPointValue].x;
                        y1 = [(NSValue*)[self.PointArr objectAtIndex:i-1] CGPointValue].y;                      
                        break;
                    case 3:
                        x0 = [(NSValue*)[self.PointArr objectAtIndex:i-1] CGPointValue].x;
                        y0 = [(NSValue*)[self.PointArr objectAtIndex:i-1] CGPointValue].y;                      
                        break;  
                    default:
                        break;
                }           
            }

            double smooth_value = 0.5;

            double xc1 = (x0 + x1) / 2.0;
            double yc1 = (y0 + y1) / 2.0;
            double xc2 = (x1 + x2) / 2.0;
            double yc2 = (y1 + y2) / 2.0;
            double xc3 = (x2 + x3) / 2.0;
            double yc3 = (y2 + y3) / 2.0;

            double len1 = sqrt((x1-x0) * (x1-x0) + (y1-y0) * (y1-y0));
            double len2 = sqrt((x2-x1) * (x2-x1) + (y2-y1) * (y2-y1));
            double len3 = sqrt((x3-x2) * (x3-x2) + (y3-y2) * (y3-y2));

            double k1 = len1 / (len1 + len2);
            double k2 = len2 / (len2 + len3);

            double xm1 = xc1 + (xc2 - xc1) * k1;
            double ym1 = yc1 + (yc2 - yc1) * k1;

            double xm2 = xc2 + (xc3 - xc2) * k2;
            double ym2 = yc2 + (yc3 - yc2) * k2;

            // Resulting control points. Here smooth_value is mentioned
            // above coefficient K whose value should be in range [0...1].
            double ctrl1_x = xm1 + (xc2 - xm1) * smooth_value + x1 - xm1;
            double ctrl1_y = ym1 + (yc2 - ym1) * smooth_value + y1 - ym1;

            double ctrl2_x = xm2 + (xc2 - xm2) * smooth_value + x2 - xm2;
            double ctrl2_y = ym2 + (yc2 - ym2) * smooth_value + y2 - ym2;   

            CGPathMoveToPoint(pathh,NULL,x1,y1);
            CGPathAddCurveToPoint(pathh,NULL,ctrl1_x,ctrl1_y,ctrl2_x,ctrl2_y, x2,y2);
            CGPathAddLineToPoint(pathh,NULL,x2,y2);
        }
        curIndex++;
    }
    CGContextAddPath(UIGraphicsGetCurrentContext(), pathh);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    CGContextSetShouldAntialias(UIGraphicsGetCurrentContext(),YES);
    imageview.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

但我的问题是：`touchMoved`在`touchesEnded`. 我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:09:22.253

```
YourImage.clearsContextBeforeDrawing = YES; 
```

//或者

```
self.view.clearsContextBeforeDrawing = YES; 
```

希望，这会帮助你..享受

# java - 将字符串转换为十六进制并使用不同的编码返回

> ID：10293502
> 
> 赞同：0
> 
> 时间：2012-04-24T07:24:09.120
> 
> 标签：java, string, hex, byte

我想将字符串值转换为十六进制，然后再转换回它的 ascii 值。当我将它转换为十六进制值时，我正在使用字符集 - `cp424`。

这就是我想要做的：

```
String str = "abcאבג";               
String hexString = Hex.encodeHexString(str.getBytes("cp424")); 
//some action         
String original_value = Hex.decodeHex(hexString.toCharArray()).toString(); 
```

我的问题是因为我`cp424`在转换为十六进制时使用了我在转换回来时需要将其恢复为默认字符集。我以多种方式尝试了这种转换，但没有得到正确的值。

如何才能做到这一点？如何从十六进制值取回原始值？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:19:53.980

`original_value`使用[`String(byte[] bytes, String charsetName)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#String%28byte%5B%5D%2C%20java.lang.String%29)构造函数创建：

```
String original_value = new String(Hex.decodeHex(hexString.toCharArray()), "cp424"); 
```

# wpf - wpf dataGrid2010中的绑定组合框

> ID：10293505
> 
> 赞同：0
> 
> 时间：2012-04-24T07:24:20.477
> 
> 标签：wpf

我正在尝试在 wpf datagrid 中绑定组合框。但是当我在 xaml 中使用以下标记时，它给了我错误

> “找不到静态数据：StatusList。验证您没有丢失任何程序集引用”。

它在 vs2008 中运行良好。但在 vs2010 中它给出了上述错误。

`<Window.Resources> <staticData:StatusList x:Key="StatusList"/> </Window.Resources>` 如果遇到我的问题，请有人帮忙，我在下面给出了我的代码：-

```
<Window x:Class="demotest.DynamicBindGridDemo"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"      
    Title="ComboBox DataGrid WPF" Height="300" Width="616" 
     xmlns:staticData="clr-namespace:demotest"
xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit">
<Window.Resources>
    <staticData:StatusList x:Key="StatusList"/>
</Window.Resources>

<Grid>
    <DataGrid x:Name="dgData" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Subject}" Header="Subject" Width="*"/>
            <DataGridTemplateColumn Header="Status" Width="100">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Status}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>

                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox Height="22" 
                                  ItemsSource="{StaticResource StatusList}"
                                  SelectedItem="{Binding Status}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>

            </DataGridTemplateColumn>
            <DataGridTextColumn Binding="{Binding RaisedBy}" Header="Raised By" Width="100"/>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

提前致谢

问候， 斯内哈西斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:38:20.207

您的标题和您的问题并不真正相关。但是，您可以检查您的项目设置吗？也许你有客户端配置文件而不是 .Net4.0 配置文件。如果不检查您的 staticData 的命名空间

您是命名空间演示测试中的 StatusList 吗？

```
namespace demotest
{
   public class StatusList : List<string>
   {
     //...
   }    
} 
```

我试过你的 xaml 并且它有效

# apache-flex - 为什么 MXML 数据绑定会吞下 TypeErrors？

> ID：10293507
> 
> 赞同：2
> 
> 时间：2012-04-24T07:24:22.947
> 
> 标签：apache-flex, data-binding

下面的代码应该抛出一个`Error #1009: Cannot access a property or method of a null object reference`：

```
var label:Label;
label.text = value; 
```

但是，如果它位于由 MXML 数据绑定设置的 setter 内部，则不会：

```
public function set buggySetter(value:String):void {
    var label:Label;
    label.text = value; //will fail silently
} 
```

为了重现这种奇怪的行为，首先，通过扩展 s:Label 创建一个简单的自定义组件：

```
package {
    import spark.components.Label;

    public class BuggyLabel extends Label {
        public function set buggySetter(value:String):void {
            var label:Label;
            label.text = value; //will fail silently
        }
    }
} 
```

第二，将 BuggyLabel 添加到 Application 并绑定 buggySetter：

```
<fx:Script>
    <![CDATA[
        [Bindable]
        public var foo:String = 'NULL has no properties';
    ]]>
</fx:Script>

<local:BuggyLabel buggySetter="{foo}"/> 
```

**为什么这个应用程序会静默失败？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:15:12.770

这个问题的答案实际上很简短：这是由 Flex SDK 工程师做出的架构决定。如果您查看 Flex 源代码，您会看到一个`try ... catch`块吞下了 Binding 中抛出的大多数错误。

**Pro**：使绑定更容易使用，因为您不必考虑所有可能的错误状态

**缺点**：调试起来可能会更困难（尽管如果你知道这可能发生并且你有良好的单元测试，你可以将挫败感减少到几乎为零）

* * *

我正在谈论的源代码可以`mx.binding.Binding`在 method 中（在“框架”项目中）找到`wrapFunctionCall()`。这是相关部分：

```
 try {
       ...
    }
    catch(error:Error)
    {
        // Certain errors are normal when executing a srcFunc or destFunc,
        // so we swallow them:
        //   Error #1006: Call attempted on an object that is not a function.
        //   Error #1009: null has no properties.
        //   Error #1010: undefined has no properties.
        //   Error #1055: - has no properties.
        //   Error #1069: Property - not found on - and there is no default value
        // We allow any other errors to be thrown.
        if ((error.errorID != 1006) &&
            (error.errorID != 1009) &&
            (error.errorID != 1010) &&
            (error.errorID != 1055) &&
            (error.errorID != 1069))
        {
            throw error;
        }
        else
        {
            if (BindingManager.debugDestinationStrings[destString])
            {
                trace("Binding: destString = " + destString + ", error = " + error);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-24T09:58:30.833

这个错误 #1009 是

```
TypeError: Error #1009: Cannot access a property or method of a null object reference. 
```

在你的二传手

```
public function set buggySetter(value:String):void {  
    var label:Label;  // here is the problem
    label.text = value; //will fail silently  
} 
```

在这里，您将文本设置为未创建的标签....您只是指定标签 var 但未创建，这就是为什么它给您上面的错误...您应该创建标签变量或将数据设置为父类

如果...，您的代码可能会起作用

```
public function set buggySetter(value:String):void {  
        var label:Label = new Lable(); 
        label.text = value; //now it ll work
 }

or

public function set buggySetter(value:String):void {  
        this.text = value; 
 } 
```

# javascript - 如何创建一个带有构造函数的 Javascript 包？

> ID：10293508
> 
> 赞同：3
> 
> 时间：2012-04-24T07:24:30.717
> 
> 标签：javascript, constructor, package

在这里，我尝试创建一个名为 com.matogen.ght 的包，其中包含一个类 Calendar。我希望在实例化日历对象时自动调用 init() 方法。下面的示例有效，但我仍然必须显式调用 init() 方法。

```
var com = {
    matogen : {
        ght : {
            'Calendar' : function() {       

                this.init = function() {
                    console.log("This is my constructor");
                }

            }
        }
    } 
}

$(document).ready(function() {
    var cal = new com.matogen.ght.Calendar();
    cal.init();

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:28:07.213

像这样改变你的`init`功能

```
this.init = (function() {
    console.log("This is my constructor");
}()); 
```

使用自我执行的匿名函数，或者，如果您愿意，只需像这样调用函数本身

```
...
    Calendar : function() {       

        this.init = function() {
            console.log("This is my constructor");
        };
        this.init();
    }
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T08:58:30.137

好吧，正如您所做的那样，*是*您的构造函数。 ***`new`***`com.matogen.ght.Calendar()``Calendar()`

 *所以：

```
var com = {
    matogen : {
        ght : {
            Calendar : function() {       
                console.log("This is my constructor");
            }
        }
    } 
} 
```

......将是准确的。*

# java - 命名 CDI bean 的默认范围是什么？

> ID：10293510
> 
> 赞同：27
> 
> 时间：2012-04-24T07:24:38.187
> 
> 标签：java, dependency-injection, cdi, jboss-weld, named

没有附加注释的`@Named`CDI bean是否有任何默认范围？[我在Weld 官方文档](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/)`@...Scoped`中没有找到任何相关信息。

一个`@Named`bean 可以通过 JSF 访问而无需额外的注释，因此似乎有一些隐式范围。

谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-24T07:38:25.127

默认范围是依赖伪范围`@Dependent`，如[焊接文档](http://docs.jboss.org/weld/reference/latest/en-US/html/scopescontexts.html#d0e1997)中所述：

> CDI 具有所谓的依赖伪作用域。这是未显式声​​明范围类型的 bean 的默认范围。[...] 依赖 bean 的实例永远不会在不同的客户端或不同的注入点之间共享。它严格来说是某个其他对象的依赖对象。它在它所属的对象被创建时被实例化，在它所属的对象被销毁时被销毁。

[此注释](http://docs.jboss.org/cdi/api/1.0/)的javadoc提供了有关此范围的更多信息：

> 使用范围 @Dependent 声明的 Bean 与具有其他内置范围类型的 Bean 的行为不同。当一个 bean 被声明为具有@Dependent 范围时：
> 
> *   没有注入的 bean 实例在多个注入点之间共享。
> *   注入到由容器创建的对象中的任何 bean 实例都绑定到新
>     创建对象的生命周期。
> *   当评估 JSF 或 JSP 页面中通过其 EL 名称引用 bean 的 Unified EL 表达式时，最多实例化 bean 的一个实例。此实例的存在仅服务于 EL 表达式的单个评估。如果 bean EL 名称
>     在 EL 表达式中出现多次，则它会被重用，但在再次评估 EL 表达式或评估另一个 EL 表达式时永远不会重用
>     。
> *   任何接收生产者方法、生产者字段、处置者方法或观察者方法调用的 bean 实例都存在
>     ，只为该调用提供服务。
> *   注入到 disposer 方法或观察者方法的方法参数中的任何 bean 实例都存在，
>     仅用于为方法调用提供服务。

# selenium-rc - 从一个班级启动应用程序并在另一个班级使用它（帮助我学习 Selenium）

> ID：10293511
> 
> 赞同：0
> 
> 时间：2012-04-24T07:24:41.150
> 
> 标签：selenium-rc

> 从一个类启动应用程序并在另一个类中使用它。
> 
> 大家好，
> 
> 我是硒和Java的新手。我只是想研究硒。我面临一些问题。我想创建一个类，我只想在其中启动应用程序（例如 google.com），而接下来的其他任务（例如执行测试用例）必须由其他类完成。可以这样做吗，我在这里粘贴我的代码。请帮助我理解这一点。
> 
> 这是我的两节课
> 
> 此类在浏览器上启动 Google。
> 
> ```
> public class GoogleTest extends SeleneseTestCase
> {
>     private static Selenium selenium;
> 
>     @BeforeClass
>     public static void setUpBeforeClass() throws Exception 
> {
>         selenium = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.google.com");
>         selenium.start();
>         selenium.windowMaximize();
>     }
> 
>     @Test
>     public void testSearch() throws InterruptedException
> {
>       selenium.open("http://www.google.com");
>       selenium.waitForPageToLoad("50000");    
>     }
> 
>     @AfterClass
>     public static void tearDownAfterClass() throws Exception {
>         selenium.stop();
>     }
> } 
> ```
> 
> 此类应在搜索字段中输入
> 
> ```
> public class FirstSeleniumTest extends GoogleTest
> {         private static Selenium selenium;
> 
>     @Test
>     public void testSearch()
> {
>   selenium.type("q", "Selenium OpenQA");
>       selenium.waitForPageToLoad("50000");
>     }
> } 
> ```
> 
> 当我运行“GoogleTest”第一类它运行完美，当我尝试运行“FirstSeleniumTest”第二类它给出这样的错误。失败：testSearch on null(com.dev.rao.FirstSeleniumTest) java.lang.NullPointerException at com.dev.rao.FirstSeleniumTest.testSearch(FirstSeleniumTest.java:18)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:03:26.197

通常很难做到你想要达到的目标。这就是为什么新的 Selenium 实例每次测试都更好的原因。从长远来看，易于调试。但是根据您的尝试，我看到了两个问题：

1.) *selenium.stop()*应该在第二个脚本而不是第一个脚本中。如果您杀死实例，如何在第二次测试中扩展它。

2.) 两次声明 Selenium。（我认为第二次测试中的 Selenium 实例可能也应该从第一次测试中扩展。）

# java - HyperSQL (HSQLDB)：海量插入性能

> ID：10293517
> 
> 赞同：2
> 
> 时间：2012-04-24T07:24:57.730
> 
> 标签：java, performance, hsqldb, bulkinsert

我有一个应用程序，它必须将大约 10 个平均长度字符串的大约 1300 万行插入到嵌入式 HSQLDB 中。我一直在调整一些东西（批量大小、单线程/多线程、缓存/非缓存表、MVCC 事务、log_size/无日志、定期调用`checkpoint`...），在 16 核、12 核上仍然需要 7 个小时国标机。

我之所以选择 HSQLDB，是因为我认为如果我充分利用所有这些内核，我可能会获得可观的性能提升，但我开始怀疑我的决定。

谁能告诉我银弹？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T08:12:08.600

对于 CACHED 表，磁盘 IO 占用了大部分时间。不需要多个线程，因为您正在插入同一个表。显着提高性能的一件事是重用单个参数化 PreparedStatment，为每个行插入设置参数。

在您的机器上，您可以通过对内存映射 IO 使用较大的 NIO 限制来显着提高 IO。例如`SET FILES NIO SIZE 8192`. 较大的尺寸需要 64 位 JVM 才能产生效果。

[http://hsqldb.org/doc/2.0/guide/management-chapt.html](http://hsqldb.org/doc/2.0/guide/management-chapt.html)

为了减少批量插入期间的 IO，请在插入`SET FILES LOG FALSE`结束之前不要执行检查点。细节在这里讨论：

[http://hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_bulk_operations](http://hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_bulk_operations)

更新：下面 1600 万行的插入测试产生了一个 1.9 GigaByte 的 .data 文件，在平均 2 核处理器和 7200 RPM 磁盘上只花费了几分钟。关键是大 NIO 分配。

```
connection time -- 47
complete setup time -- 78 ms
insert time for 16384000 rows -- 384610 ms -- 42598 tps
shutdown time  -- 38109 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:29:16.523

检查您的应用程序在做什么。首先要做的是查看 taskmanager（或特定于操作系统的可比性）和 visualvm 中的资源利用率。

导致表现不佳的好人选：

*   磁盘 IO
*   垃圾收集器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:39:13.383

[H2Database](http://www.h2database.com/)可能会为您提供比 HSQLDB 稍好的性能（同时保持语法兼容性）。

在任何情况下，您都可能希望尝试使用更高的延迟来同步到磁盘以减少随机访问磁盘 I/O。（即。`SET WRITE_DELAY <num>`）

希望您正在执行批量`INSERT`语句，而不是每行插入一次。如果没有，请尽可能这样做。

根据您的应用程序要求，使用键值存储可能比使用 RDBMS 更好。（您是否经常需要插入 1.3*10^7 个条目？）

您的主要限制因素将是对磁盘的随机访问操作。我非常怀疑您所做的任何事情都会受 CPU 限制。（看看`top`，然后比较它`iotop`！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:48:38.033

有这么多记录，也许您可​​以考虑切换到 NoSQL DB。当然，这取决于您需要存储的数据的性质/格式。

# php - XFBML like 按钮未显示

> ID：10293518
> 
> 赞同：-1
> 
> 时间：2012-04-24T07:25:14.193
> 
> 标签：php

大家好，我在使用“赞”按钮时遇到了问题。我遵循了[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)中的每一步。我已经应用了一些我在网上找到的解决方案，包括在 js.src 中附加“https”的解决方案。代码如下，希望对大家有所帮助。^^

```
<html 
    xmlns = "http://www.w3.org/1999/xhtml"
    xmlns:og = "http://ogp.me/ns#"
    xmlns:fb="http://ogp.me/ns/fb#">

    <?php
        $title = "This is a Title.";
        $type = "movie";
        $url = "http://www.200909630.site11.com/share.php";
        $image = "http://i3.kym-cdn.com/photos/images/original/000/264/615/242.png";
        $description = "This is a description.";
    ?>          

    <head>
        <title>Fund My Travel</title>
        <meta property = "og:title" name = "title" content = "<?php echo $title; ?>" />
        <meta property = "og:type" name = "type" content = "<?php echo $type; ?>" />
        <meta property = "og:url" name = "url" content = "<?php echo $url; ?>" />
        <meta property = "og:image" name = "image" content = "<?php echo $image;; ?>" />
        <meta property = "og:description" name = "description" content = "<?php echo $description; ?>" />
        <script type = "text/javascript" src = "http://static.ak.fbcdn.net/connect.php/js/FB.Share"></script>
        <script type = "text/javascript">
            var buttons = document.getElementsByName('fb_share');
            var count = buttons.length;
            for(var i = 0; i<count; i++) {
                var data = FB.Share.getUrl(buttons[i]);
                if(FB.Share.results[data]) {
                    buttons[i].fb_count = FB.Share.results[data].total_count;
                }
                FB.Share.displayBox(buttons[i], 0);
            }
        </script>
        <script>
            !function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if( !d.getElementById(id) ) {
                    js = d.createElement(s);
                    js.id = id;
                    js.src = "//platform.twitter.com/widgets.js";
                    fjs.parentNode.insertBefore(js, fjs);
                }
            }
            (document, "script", "twitter-wjs");
        </script>
        <script type="text/javascript">
            window.___gcfg = {lang: 'en-GB'};
            (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
            })();
        </script>
    </head>
    <body>
        <div id = "fb-root"></div>
        <script>
            (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>

        <table cellspacing = "3" cellpadding = "3">
            <tr>
                <fb:like send = "false" width = "450" show_faces = "false"></fb:like>
            </tr>
            <tr>
                <td>
                    <a name = "fb_share"></a>
                </td>
                <td>
                    <a href = "https://twitter.com/share" class = "twitter-share-button" data-lang = "en"
                        data-url = "<?php echo $url; ?>" data-text = "<?php echo $title; ?>"></a>
                </td>
                <td>
                    <g:plusone size = "medium"></g:plusone>
                </td>
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:36:44.437

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
 initialize this script after body tag not before than, than put this div where you want that button and inser your url of page to like in data-href .
 <div class="fb-like" data-href="http://stackoverflow.com/questions/10293545/strange-      error-headers-already-sent-by-output-started-at" data-send="true" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:15:08.490

```
 <script>
   window.fbAsyncInit = function() {
    FB.init({
  appId      : 'YOUR_APP_ID', // App ID
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

// Additional initialization code here
};

  // Load the SDK Asynchronously
    (function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
 }(document));
</script> 
```

尝试在头标签中添加它的javascript sdk

# hibernate - 刷新页面时 grails 中奇怪的 GORM 行为 (F5)

> ID：10293527
> 
> 赞同：5
> 
> 时间：2012-04-24T07:26:01.473
> 
> 标签：hibernate, grails, grails-orm

我有一个实体（作者）和一个呈现所有作者的控制器操作。

```
def index = {
    def list = Author.list()
    render(view: 'index', model: ['allauthors' : list])
} 
```

呈现页面时，会按预期执行单个查询：

```
Hibernate: 
  select
    this_.id as id0_0_,
    this_.version as version0_0_,
    this_.name as name0_0_
  from
    author this_ 
```

但是，当我按刷新 (F5) 时，将为每个作者执行一条选择语句（这里我有 3 个作者）：

```
Hibernate: 
select
    author0_.id as id0_0_,
    author0_.version as version0_0_,
    author0_.name as name0_0_
from
    author author0_ 
where
    author0_.id=?
Hibernate: 
select
    author0_.id as id0_0_,
    author0_.version as version0_0_,
    author0_.name as name0_0_
from
    author author0_ 
where
    author0_.id=?
Hibernate: 
select
    author0_.id as id0_0_,
    author0_.version as version0_0_,
    author0_.name as name0_0_
from
    author author0_ 
where
    author0_.id=? 
```

为什么会出现这种情况？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:51:40.713

看起来这与查询缓存有关。如果你有

```
cache.use_query_cache = true 
```

在您的 Datasource.groovy 中，但没有在您的域类中设置缓存，缓存似乎正在逐出每个条目上的所有条目，`list()`并且必须重新缓存每个条目（只是猜测）。

如果您将缓存添加到您的域，则多个选择会消失 - 实际上，当我在添加此内容后刷新时不会完成任何选择：

```
static mapping = {
    cache true
} 
```

# hadoop - 用 hadoop MR 替换输入文件中的文本

> ID：10293530
> 
> 赞同：0
> 
> 时间：2012-04-24T07:26:06.590
> 
> 标签：hadoop, mapreduce

我是 MR 和 Hadoop 方面的新手。我写了一个 MR 来查找 csv 文件中的缺失，它工作正常。现在我有一个用例，我需要解析一个 csv 文件并使用相关类别对其进行编码。

例如："11,abc,xyz,51,61,78","11,adc,ryz,41,71,38",......

现在必须将其替换为 "1,abc,xyz,5,6,7","1,adc,ryz,4,7,3",......

在这里，我正在做一个 10 的 mod，但会有不同的 mod 情况。数据大小以 GB 为单位。

我想知道如何就地替换输入内容。这可以通过 MR 实现吗？

基本上我在任何地方都没有看到任何文件处理或基于 hadoop 编写的示例。

此时我不想使用 HBase 或其他数据库工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:46:32.217

您不能就地替换数据，因为 HDFS 文件只能追加，不能编辑。
我认为实现目标的最简单方法是将 Hive 中的数据注册为外部表，并在 HQL 中编写您的转换。
Hive 是一个与 hadoop 无关的系统，可以将您的查询转换为 MR Jobs。它的使用不是像 HBASE 使用那样严重的基础设施决策

# android - 在捏缩放拖动时获取缩放图像视图的最后一点

> ID：10293531
> 
> 赞同：0
> 
> 时间：2012-04-24T07:26:36.403
> 
> 标签：android, android-imageview

我有一个图像视图，在缩放（捏缩放）之后我必须得到图像的末端。即当我向左或向右拖动图像时，我必须在到达最后一点时触发一个事件（之后它不能被拖动）。我用过这样的变焦。

```
 public boolean onTouch(View v, MotionEvent event) {
  ImageView view = (ImageView) v;

  // Dump touch event to log
  dumpEvent(event);

  // Handle touch events here...
  switch (event.getAction() & MotionEvent.ACTION_MASK) {
  case MotionEvent.ACTION_DOWN:
     savedMatrix.set(matrix);
     start.set(event.getX(), event.getY());
     Log.d(TAG, "mode=DRAG");
     mode = DRAG;
     break;
  case MotionEvent.ACTION_POINTER_DOWN:
     oldDist = spacing(event);
     Log.d(TAG, "oldDist=" + oldDist);
     if (oldDist > 10f) {
        savedMatrix.set(matrix);
        midPoint(mid, event);
        mode = ZOOM;
        Log.d(TAG, "mode=ZOOM");
     }
     break;
  case MotionEvent.ACTION_UP:
  case MotionEvent.ACTION_POINTER_UP:
     mode = NONE;
     Log.d(TAG, "mode=NONE");
     break;
  case MotionEvent.ACTION_MOVE:
     if (mode == DRAG) {
        // ...
        matrix.set(savedMatrix);
        matrix.postTranslate(event.getX() - start.x,
              event.getY() - start.y);
     }
     else if (mode == ZOOM) {
        float newDist = spacing(event);
        Log.d(TAG, "newDist=" + newDist);
        if (newDist > 10f) {
           matrix.set(savedMatrix);
           float scale = newDist / oldDist;
           matrix.postScale(scale, scale, mid.x, mid.y);
        }
     }
     break;
  }

  view.setImageMatrix(matrix);
  return true; // indicate event was handled
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:08:22.850

当您最初将图像加载到`ImageView`记录中时，请参考左上角或中心点`(x, y)`。每次拖动或缩放图像时，都会更新关于该参考点的更改；即，如果您拖动轴上的图像`a`像素和`x`轴上的`b`像素，`y`您的新参考点将位于`(x + a, y + b)`。

检查此[链接](https://stackoverflow.com/q/7745540/935627)以获取更多详细信息。这[也是](https://stackoverflow.com/a/7851835/935627)。

# url - youtube 如何在 url 中编码视频 id？

> ID：10293533
> 
> 赞同：0
> 
> 时间：2012-04-24T07:26:42.133
> 
> 标签：url, youtube

用于 youtube 视频 url（id 部分）的编码是什么？

> 看?v=fqgPmnW8yCU

使用它而不是这样的东西有什么好处

> 观看？v=video200

除了保护私人视频，还有吗？我问是因为我正在考虑返回图像文件的最快/最佳方式（当我定期访问超过 20,000 个时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:33:29.907

很可能是哈希。鉴于此，可能对于搜索部分，他们使用了哈希映射机制，该机制提供了非常快速和最佳的搜索能力。

# jquery - 想要在 jquery 通知中添加来自 sql 数据库的消息

> ID：10293534
> 
> 赞同：0
> 
> 时间：2012-04-24T07:26:43.223
> 
> 标签：jquery, sql

在这里，我在主页中显示了一个通知，其中显示了保险到期日期的 jquery 通知......实际上我想添加到期日期以及从数据库返回的消息。

这是我的 jquery 通知脚本

```
<script type="text/javascript">
          function test1() {
              $(document).ready(function() {
              $.sticky('Your insurance Expire on' );
              });
          }
    </script> 
```

在主页 aspx.cs 中，我正在检索日期并将其显示在标签上，就像我在通知中想要的那样，我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:33:45.340

您可以将数据库数据放入页面上的隐藏字段中，然后让 jQuery 从隐藏字段中提取文本，例如

```
$.sticky('Your insurance expires on ' + $('#dateExpiryField').val()); 
```

或者类似的东西！

# ruby-on-rails - Ajax 下拉选择以更改 TextArea 内容

> ID：10293536
> 
> 赞同：0
> 
> 时间：2012-04-24T07:27:03.570
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我正在尝试在我的 Rails 应用程序之一中使用 Ajax 来让 form_tag 文本区域根据该 form_tag 之外的下拉列表的选定值更改其内容。

我想问一下，正确的处理方法是什么？是否可以在我的表演动作中响应 js 并拥有一个 js.rjs ？您是否碰巧知道任何资源或可以提供一些见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T00:48:10.517

您应该编写一个 javascript，触发下拉菜单的 onchange 事件，并启动一个 ajax 进程。使用 jQuery，它是这样的（在脚本标签内的显示代码中）：

```
$("#dropdownMenuName").change(function(){
  $.get("controller/action.txt", function(data){ $("#textareaName").val(data); } );
}); 
```

这只是向您的应用程序发送关于该`controller/action.txt`操作的请求，并将结果粘贴到 textarea 的 text 属性中。当然，您应该将答案写成简单的文本，因为结果会立即打印在文本区域中。

# java - Java 属性绑定

> ID：10293540
> 
> 赞同：2
> 
> 时间：2012-04-24T07:27:23.693
> 
> 标签：java, data-binding

我正在寻找一个可以为我提供与可视组件绑定的类集。

例如，我有很多文本框和从 ORM 层收到的 pojo，现在我只想将 pojo 的属性绑定到这个文本字段。

我找到了 Presentation Model 模式，但它似乎很有用，以防万一你有一个普通的 Pojo。但我有类似的东西：

```
Person
 + Name
 + Telephones[]
   + Number
   + Comment
 + Age 
```

就名字和年龄而言，PM 是完美的。但是对于电话来说，当我更改存储在该集合中的一个对象上的某些内容时，需要通知 Person 以触发其 onChange 事件。

是否有为我提供此功能的框架或类集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:56:35.757

jGoodies 绑定库仍然是我的解决方案：[jGoodies 库](http://www.jgoodies.com/downloads/libraries/)

# android - Android检查多个复选框

> ID：10293544
> 
> 赞同：1
> 
> 时间：2012-04-24T07:27:35.980
> 
> 标签：android, checkbox

```
 for(int i=3;i<plates1.length();++i)
        {
            final CheckBox cb=new CheckBox(this);

            JSONObject jObj1 = plates1.getJSONObject(i);
            String date=jObj1.getString("Name");
            cb.setText(date);
            cb.setId(i);
         } 
```

我在这里有我的 for 循环。我已经使用 for 循环创建了复选框，但我无法弄清楚如何使用复选框 ID 一次选择两个复选框的逻辑。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:31:11.420

```
for(int i=3;i<plates1.length();++i)
        {
            final CheckBox cb=new CheckBox(this);

            JSONObject jObj1 = plates1.getJSONObject(i);
            String date=jObj1.getString("Name");
            cb.setText(date);
            cb.setId(i);
            parentView.addView(cb) // you should add it in parent layout
         } 
```

然后这就是您访问它的方式..

```
((CheckBox)parentView.findViewById(3)).setChecked(true) // i took the first check box added

// do the same with others 
```

# javascript - Ajax 在 MVC3 中动态地将 src 分配给 Iframe

> ID：10293546
> 
> 赞同：0
> 
> 时间：2012-04-24T07:27:48.197
> 
> 标签：javascript, ajax, asp.net-mvc-ajax

嗨，我基本上是 Ajax 的新手，并且很难编写它..

我想将 src 值分配给从数据库中获取的 Iframe
表是 HobbyMasters

```
 HobbyName
 HobbyUrl 
```

我现在编写一个函数并从表中获取 url，当我单击显示为链接的 Hobbyname 时，我希望将该 url 加载到 iframe 中。

最初我写了一个javascript：

```
<script type="text/javascript">
$(document).ready(function () {
    $('a').click(function (e) {
        e.preventDefault();
        $('iframe').attr('src', "Dancing");
    });
}); </script> 
```

但是这里的 src 是静态的，通过 javascript 我无法将从数据库中获取的值分配给 src 属性
所以想到了编写 Ajax ..

我尝试了一些东西，但它不完整。请帮我解决这个问题：

```
 <script type="text/javascript">
$(document).ready(function () {          
$('a').click(function (e) {
          e.preventDefault();
        var filename = $(this).text();

        var Hobbyurl = '@Url.Action("FetchUrlByHobbyName")';
        $.ajax({
            type: "POST",
            url: Hobbyurl ,
            data: { data: filename },
            success: function (returndata) {
             Here i want to assign the fetched src from function FetchUrlByHobbyName to Iframe src
         $('iframe').attr('src', filename);
            }
        });
    }); 
```

控制器内部功能：

```
 [HttpPost]
    public ActionResult FetchUrlByHobbyName(string Hobbyurl)
    {
        HobbyMasters hobbymaster = new HobbyHomeService().FetchHobbyMasterByHobbyName(Hobbyurl);

        string url=hobbymaster.InformationUrl;
        if (HttpContext.Request.IsAjaxRequest())
            return Json(new{src=url});
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:45:36.503

如果`@Url.Action("FetchUrlByHobbyName")`返回爱好的网址，你可以这样做

```
<script type="text/javascript">
$(document).ready(function () {          
$('a').click(function (e) {
          e.preventDefault();
        var filename = $(this).text();

        var Hobbyurl = '@Url.Action("FetchUrlByHobbyName")';
        $.ajax({
            type: "POST",
            url: Hobbyurl ,
            data: { data: filename },
            success: function (returndata) {
             Here i want to assign the fetched src from function FetchUrlByHobbyName to Iframe src
         $('iframe').attr('src', returndata);
            }
        });
    }); 
```

最好的方法是返回与 json 关联的数据并从 json 对象中获取 url

```
success: function (returndata) {
    jsonObj = jQuery.parseJSON( returndata)
    $('iframe').attr('src', jsonObj.url);
} 
```

# css - CSS中的负值是否被接受？

> ID：10293547
> 
> 赞同：2
> 
> 时间：2012-04-24T07:28:03.630
> 
> 标签：css

CSS中可以使用负值吗？

例如：

```
margin:-11px 20px -18px 0px; 
```

或者

是否有不应使用负值的标准协议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:32:10.353

这取决于财产。请参阅 CSS 规范中的各个属性描述。关于[`margin`](http://www.w3.org/TR/CSS2/box.html#margin-properties)，CSS 2.1 规范说：“边距属性的负值是允许的，但可能存在特定于实现的限制。”</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:30:58.030

是的，负值 in`margin`被**接受**但 in`padding`不**被接受**。

根据[W3c](http://www.w3.org/TR/CSS2/box.html#margin-properties)

# extjs4 - 如何使用 ExtJS 4 开发 Web 桌面？

> ID：10293549
> 
> 赞同：3
> 
> 时间：2012-04-24T07:28:27.983
> 
> 标签：extjs4, webtop

我学习了 ExtJS 的基础知识并使用 ExtJS 开发了一些 Web 应用程序。现在我必须使用 ExtJS 开发 Web 桌面（例如示例文件夹中的桌面应用程序），但我无法找到任何有关如何开发它的文档或教程或书籍。

有谁知道如何**使用 ExtJS 4 开发 Web 桌面应用程序？**我在哪里可以获得有关开发 Web 桌面的任何教程/书籍/视频？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T13:50:50.000

我怀疑您是否会找到专门针对您正在寻找的内容的书籍或教程，但是您可以在互联网上收集足够的资源来做到这一点。

谷歌搜索“extjs 4 cookbook”找到了一本名为“Ext JS 4 Web Application Development Cookbook”的书，似乎有很多信息。但是，它似乎很新，我个人还没有读过它，所以我不能保证它。但它就在那里。

除此之外，Sencha 自己的文档站点将拥有您需要的大部分内容。如果您打算采用 MVC 方法，那么关于 App 架构的系列文章可能会有一些用处，关于组件和布局的文章也一样。

这将涵盖基础知识，但没有真正明确的指南来制作我所知道的 Web 桌面应用程序。这完全取决于您的要求是什么，您有多少可用时间等。如果您正在寻求有关特定组件的帮助（例如创建 Windows 样式的文件浏览器系统），那么您可能会更幸运地询问更多狭隘的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:51:54.127

您可以使用 Sencha 提供的默认 Web Desktop Sample 并稍作修改。我也有兴趣，我按照我的建议做了，所以你可以看看我现在收到了什么： [http ://www.bdovhan.orgfree.com/](http://www.bdovhan.orgfree.com/)

嗯，如果您的网站变得可点击，这些免费托管服务提供商会使用大量广告。我创建了另一个镜像，应该没有广告：[http](http://www.julfysoft.16mb.com/index.html) ://www.julfysoft.16mb.com/index.html 但加载它可能需要一段时间......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-05T16:31:32.690

我们从桌面示例中获得灵感，使用 Extj 6.7 和 Unigui Framework (Delphi) 构建了一个功能齐全的 Web 应用程序，结果非常棒：

[![在此处输入图像描述](../Images/aa69f68d6c73b13e1e2b1d9fbd1e14e8.png)](https://i.stack.imgur.com/ql9og.jpg)

只是一步一步地实现这个想法。

# java - java hash map中的键值映射

> ID：10293555
> 
> 赞同：-2
> 
> 时间：2012-04-24T07:28:58.960
> 
> 标签：java

我深入研究了java类文件，发现实现了一个入口类，将键和值插入到哈希映射中。

但我无法找到一个键是如何映射到其对应对象的。

如果有人在这方面提供帮助，那就太好了

谢谢沙西塞卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:32:20.083

您必须使用[`put(key, value)`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#put%28K,%20V%29)地图的方法。

由于该方法，生成`key`了要插入到 a 中的对象。`HashMap`[`hashcode()`](http://en.wikipedia.org/wiki/Java_hashCode%28%29)

您应该阅读[这篇](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)解释地图基础知识的文章。

# android - Android：如何测试应用内结算

> ID：10293557
> 
> 赞同：4
> 
> 时间：2012-04-24T07:29:03.270
> 
> 标签：android, in-app-billing

我在市场上有一个*没有*应用内计费的应用。现在新版本应该有应用内计费。当然我还没有准备好，无法将新版本上传到市场，但是我如何测试和调试我未完成的代码呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:45:33.617

作为第一步，您需要使用测试请求对其进行测试。此测试是有限的，但会让您了解流程是否正确。

第二步——真实测试。您必须将您的应用程序上传到 Play（不发布，只需上传），创建另一个帐户（您不能从自己那里购买东西）并在您的开发中启用此帐户。安慰。然后，您可以（用真钱）购买该应用程序并测试它的运行情况。当然，您可以随时使用您的主帐户取消/退款。

作为一个在我的几个应用程序中实现这一点的人，我可以告诉你这很痛苦。

请参阅此处了解更多信息：

[应用内结算参考](http://developer.android.com/guide/market/billing/billing_testing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:44:21.403

您可以使用 Google 设置的测试产品 ID 来测试您的应用。看看这个[链接](http://developer.android.com/guide/market/billing/billing_testing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:54:24.293

首先，您可以使用四个预留的产品ID来测试静态应用内计费响应其次，使用测试帐户并将您的应用作为草稿上传，然后您可以使用自己的产品ID进行测试

# java - 如何清理我的异常处理？

> ID：10293558
> 
> 赞同：3
> 
> 时间：2012-04-24T07:29:09.693
> 
> 标签：java, design-patterns, exception-handling

我正在寻找清理当前我正在处理的代码库的异常混乱。

基本设置是这样的。

我有一个由许多类实现的接口，如下所示：

```
public interface TerminalMessage<E> {

   // Override for specific return data type.
   public E send(TerminalStream stream) throws Exception;
} 
```

这些类会抛出很多不同的异常，例如 IOException、InterruptedException 等。

就像现在一样，我所做的就是在捕获的异常上调用 getMessage() 并将此消息传递给 ui 代码。

这不是很好，因为我有时会收到向用户显示的虚假消息，并且我会捕获不需要的异常。

我正在考虑创建一个自定义异常类 (TerminalException) 来包装所有这些类型的异常。

但是我不确定在哪里进行包装，应该在第一次抛出异常的地方（例如在输出流中）还是在每个 send() 方法中进行包装。前者的优点是不会添加太多代码，但对我来说，流抛出 IOException 而不是 TerminalException 更有意义。

上面的设计也没有真正解决有时显示给用户的错误消息，所以一些关于如何将抛出的异常转换为对用户有用的东西的技巧会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:48:15.120

如果您在其中包含有用的信息（例如错误代码），则自定义异常是一个非常好的主意。

只需用您的 TerminalException 包装所有内容，但不要忘记**原因**

或者

使用抛出的第一个 TerminalException：

```
public class MyException extends Exception{
   String errorMessage; 

   public MyException(String message, Exception cause){
     super();

     if(cause instanceof MyException){
         // already wrapped
         errorMessage= cause.getErrorMessage();          
         initCause(cause.getCause());
     }
     else{
         // not my Exception
         errorMessage=message;
         initCause(cause); 
     } 
 ´               

   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:57:10.993

另一种选择可能是使用模板方法设计模式并“控制”其中的异常，如下所示：

```
public abstract TerminalMessage<E> {
    public abstract E doSend(TerminalStream stream);
    public E send(TerminalStream stream) throws Exception {
        // do common stuff here
        try {
            doSend(stream);
        }
        // catch more specific exceptions first
        // handle all the exceptions accordingly here, thus controlling
        // in one central location what will be thrown externally
        catch(Exception) {
        }
    }
} 
```

这样，所有派生类的异常处理将是相同的并且是本地化的，并且派生类不必做任何特殊的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:35:15.243

在我尝试过的许多设计中，这是我在某些项目中愉快地使用的最后一个。

```
 public enum ExceptionCodes {
        IOException("ioexception", false),
        UserNotFound("usernotfond", true);

        private static final String BUNDLE_NAME = "SOME_bundle_name";

        private final String bundleCode;
        private final String isManagable;

        ExceptionCodes(String bundleCode, String isManagable) {
            this. ...
            ...
        }

        public String message() {
            // eventually get locale from somewhere, for example some threadLocal
            return SomeBundleResolver.resolve(BUMDLE_NAME, bundleCode);
        }

        public Boolean isManagable() {
            return isManagable;
        }
    }

    public class MyGenericException extends RuntimeException {
        private final ExceptionCodes exceptionCode;
        private final Throwable throwable;

        public MyException(ExceptionCodes exceptionCode) {
           this....
           ...
        }

        public MyException(ExceptionCodes exceptionCode, Throwable throwable) {
            this. ...
            ....
        }

        public Boolean isManagable() {
            return exceptionCode.isManagable();
        }

        public String getMessage() {
            return (throwable == null) ? super.getMessage() : throwable.getMessage();
        }

        ...
    } 
```

关键是异常代码在一个地方进行管理。您可以向枚举添加自定义属性，例如错误代码等。异常的众多问题之一是，如果您不知道如何处理异常，那么您就不可能知道如何处理上面的异常层。那么只会出现两种情况。任何异常都可以以某种格式显示给用户，或者系统必须以某种优雅的方式崩溃。属性 isManagable 正是与此有关。如果异常 si 不可管理系统必须关闭。因此，异常仅在一般错误处理程序的顶级应用程序中处理。这样可以防止异常爆炸。

# svn - 如何使用 SmartSVN 将存储库添加到 assembla (https)

> ID：10293559
> 
> 赞同：0
> 
> 时间：2012-04-24T07:29:10.043
> 
> 标签：svn, repository, assembla, smartsvn

我在雪豹中使用 SmartSVN。我无法将存储库添加到 assembla。在 assembla 中，我的 svn url 类似于：“https://subversion.assembla.com/svn/projectname/”。我正在使用我的 gmail 帐户进行汇编。

我做的步骤：

1.  添加存储库
2.  我点击输入 svn url 然后提供这个 url “https://subversion.assembla.com/svn/projectname/”
3.  之后它看起来像：[按确定后它看起来像这样](http://i39.tinypic.com/9ve4h2.png)
4.  然后我继续并提供了我的用户名、gmail 帐户的密码。但每次它告诉我接受 MD5 和 SHA 指纹。然后告诉我这个错误。[错误图像](http://i42.tinypic.com/xepd0m.png)

谁能告诉我哪里出错或我应该在哪里检查。通过保管箱同步不是一个好的选择:(或者如果您可以给我一个替代解决方案（免费托管）以及如何与之集成也可以。

谢谢

萨明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:56:15.343

看来你是用 OpenID 注册的，你必须设置一个 Assembla 密码才能使用 svn：

[https://www.assembla.com/user/edit/edit_account_settings](https://www.assembla.com/user/edit/edit_account_settings)

PS：请勿在 google 以外的其他网站上输入您的 gmail 密码。

# python - 使用python dblquad在复平面中进行区域积分

> ID：10293563
> 
> 赞同：1
> 
> 时间：2012-04-24T07:29:19.200
> 
> 标签：python, integration, numerical, plane

我的问题与量子光学有关。我正在尝试确定 Fock 状态的 Wigner 函数，这涉及在复平面中的积分。我的代码虽然很慢，所以我想问一下您是否可以帮助我提高速度？

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import pylab
import numpy as np
import mpmath
import sys
mpmath.dps = 5
from sympy import laguerre_l
import scipy
from scipy.integrate import quad,dblquad

def complex_quadrature(func, a, b, **kwargs):
    def real_func(x,y):
    return scipy.real(func(complex(x,y)))
def imag_func(x,y):
    return scipy.imag(func(complex(x,y)))
real_integral = dblquad(real_func, a, b, lambda x: a, lambda x: b, **kwargs)
imag_integral = dblquad(imag_func, a, b, lambda x: a, lambda x: b, **kwargs)
return complex(real_integral[0], imag_integral[0])

f = lambda z: 1/(np.pi**2)*complex_quadrature(lambda x:scipy.exp(x.conjugate()*z-        x*z.conjugate())*complex(laguerre_l(1,0,abs(x)**2),0)*scipy.exp(-abs(x)**2), -5, 5)

fig = pylab.figure()
ax = Axes3D(fig)
X = np.arange(-4, 4, 0.1)
Y = np.arange(-4, 4, 0.1)
X, Y = np.meshgrid(X, Y)
xn, yn = X.shape
W = X*0

for xk in range(xn):
for yk in range(yn):
    try:
        z = complex(X[xk,yk],Y[xk,yk])
        print (f(z))
        w = abs(z)
                if w != w:
            raise ValueError
            W[xk,yk] = w
        except (ValueError, TypeError, ZeroDivisionError):
                pass

ax.plot_surface(X, Y, W, rstride=1, cstride=1, cmap=cm.jet,linewidth=0,alpha=.9)
pylab.show() 
```

注意：大部分是从stackoverflow复制和修改的，所以我不主张所有权......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:09:48.827

```
z = complex(X[xk,yk],Y[xk,yk])
##  print (f(z))    ## <---- Commenting this line will solve your problem
w = abs(z) 
```

# java - 使用反射生成的 Java 源代码

> ID：10293565
> 
> 赞同：2
> 
> 时间：2012-04-24T07:29:21.930
> 
> 标签：java, templates, reflection, eclipse-jet

在我的 Java 应用程序中，我有一个类 Foo

```
class Foo {
  String field1;
  String field2;
} 
```

我想要一些生成的代码，这些代码在此类中的字段上使用反射（虚构模板语言）

```
#for each Field $f in Foo.class.getDeclaredFields()
  #writeFile $f.java
    public @interface $f {
    } 
```

最终目标是让 Field1.java 和 Field2.java 里面只有一个简单的@interface 定义。

是否有可用的模板语言可以将这一代作为 Maven 构建过程的一部分？

我能找到的最接近的是[JET](https://stackoverflow.com/questions/3794832/a-code-generator-for-java-available-for-maven)，但这个项目似乎更倾向于生成在运行时可用的 Java 源代码，而不是在编译时可用。理论上，我可能可以使用 AntRun 以及几个 Javac 和 Java 任务来完成这项工作，但它会很麻烦。

我需要它的实际用例是为 Google Guice 生成[BindingAnnotations](http://code.google.com/p/google-guice/wiki/BindingAnnotations)（将在 GWT 源代码中使用，因此它们在编译时必须作为 .java 文件存在）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:40:26.047

看看[Acceleo](http://www.acceleo.org/pages/home/en)它是基于 XSL 模板生成源代码的。我将它与[EMF](http://www.eclipse.org/modeling/emf/)一起使用，从用户设计的数据模型中生成源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:41:35.810

我会在这里建议两个选项：

1.  Apache Velocity：它提供了一种与您所描述的相近的模板语言。在[这里查看](http://velocity.apache.org/engine/releases/velocity-1.7/user-guide.html)。您可能会对他们的引擎感兴趣。

2.  GWTP 似乎做了一些类似于你想做的事情。看起来他们正在使用注释处理器来执行代码生成。这是一个[处理器示例](http://code.google.com/p/gwt-platform/source/browse/gwtp-core/gwtp-processors/src/main/java/com/gwtplatform/dispatch/annotation/processor/GenDtoProcessor.java)，他们的项目主页在[这里](http://code.google.com/p/gwt-platform/)。

# java - Jasper 报告：找不到资源

> ID：10293571
> 
> 赞同：1
> 
> 时间：2012-04-24T07:29:51.733
> 
> 标签：java, netbeans, jasper-reports, subreport

我正在使用 Netbeans 7.1 进行开发。

在我的碧玉报告中，我有子报告。它完美地在一个地方工作。我复制并粘贴到另一个地方，现在显示此错误：

```
net.sf.jasperreports.engine.JRException: Resource not found at : D:\ShareMarket\build\web\WEB-INF\classes\custom\kksharemarket/contractDetail.jasper
at net.sf.jasperreports.repo.RepositoryUtil.getResource(RepositoryUtil.java:155)
at net.sf.jasperreports.repo.RepositoryUtil.getReport(RepositoryUtil.java:126)
at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateReport(JRFillSubreport.java:317)
at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateSubreport(JRFillSubreport.java:347)
at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluate(JRFillSubreport.java:275)
at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:257)
at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:473)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2021)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:755)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:265)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:128)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:836)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:746)
at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:58)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)
at net.sf.jasperreports.engine.JasperRunManager.runReportToPdf(JasperRunManager.java:281)
at org.apache.jsp.reportmgr_jsp._jspService(reportmgr_jsp.java:966)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:07:12.010

路径`D:\ShareMarket\build\web\WEB-INF\classes\custom\kksharemarket`很可疑。应该是`/custom/kksharemarket`因为它位于应用程序的类路径中。该应用程序可能被打包在一个 jar/war 中，并且文件路径不会这样做。可能资源也不是通过文件系统获取的，而是通过类路径获取的。这通常是 java 术语中“资源”的含义。

它适用于第一次开发，因为存在目录结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:36:30.323

```
D:\ShareMarket\build\web\WEB-INF\classes\custom\kksharemarket/contractDetail.jasper

                                                            ^^^ 
```

我猜你在编写 jasper 文件路径时硬编码文件分隔符。

# c# - 无法使用 asp.net 3.5 中的 fileupload 上传大于 4 mb 的文件

> ID：10293574
> 
> 赞同：1
> 
> 时间：2012-04-24T07:29:56.733
> 
> 标签：c#, asp.net, file-upload, smtpclient

我必须发送带有附件的邮件。我的代码仅适用于小于 4mb 的文件。我已经检查了网上的所有内容，但每个人都建议相同的解决方案。那就是更改我已经完成的 webconfig 中的 httpruntime 属性。

```
<httpRuntime maxRequestLength="10000" executionTimeout="1500"  /> 
```

我已经更改了 Web 配置中具有“超时”属性的所有内容。还在 IIS 中的应用程序配置中更改了 KeepAlive，但即使做了所有这些更改，问题仍然存在于我的应用程序中。每次我尝试上传大于 4mb 的文件时正好 1.5 分钟后连接超时。

点击事件中的代码

```
protected void btnSend_Click(object sender, EventArgs e)
        {
            MailMessage msg = new MailMessage();
            SmtpClient smtp = new SmtpClient();
            string strFrom = txtFrom.Text;
            string strTo = txtTo.Text;
            string strSubject= ddlTemplate.SelectedItem.Text.ToString();
            string strBody =txtBody.Text;
            string strCC =txtCC.Text;
            string strBCC =txtBCC.Text;
            if (this.fuAttachments.HasFile)
            {
                Attachment at = new Attachment(fuAttachments.PostedFile.InputStream,fuAttachments.PostedFile.ContentType);

                at.ContentDisposition.FileName = this.fuAttachments.FileName;
                msg.Attachments.Add(at);

            }
           smtp.EnableSsl = true;

            msg.From = new MailAddress(strFrom);
            msg.To.Add(strTo);
            msg.Subject = strSubject;
            msg.Body = strBody;

            //smtp = new SmtpClient("localhost");
            //smtp.UseDefaultCredentials = true;

            try 
            {
                smtp.Send(msg);
            }
            catch (SmtpException Ex)
            {

                throw;
            } 

            if (msg.Attachments.Count > 0)
            {
                //Clear the attachments and delete the sessionid folder from tempFiles 
                msg.Attachments.Dispose();
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:32:18.823

它具有上传文件的默认限制，请参阅此链接以解决此问题

[http://frazsundal.blogspot.com/2011/02/request-filtering-module-is-configured.html](http://frazsundal.blogspot.com/2011/02/request-filtering-module-is-configured.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:40:00.177

在你的**web.config**

添加这一行

```
<system.web>
   <httpRuntime maxRequestLength="10000" />
</system.web> 
```

使您的`maxRequestLength="10000"`应用程序上传最大大小为 10mb。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T09:18:38.543

我在我的应用程序中找到了罪魁祸首。这是 smtp 客户端的超时属性，它在大约 1.5 分钟后停止了进程。该属性的默认值是 100 秒，我将其更改为 1500 秒（1500000 毫秒，因为该属性以毫秒为单位）和已成功发送附件。

```
smtp.Timeout = 1500000; 
```

看到[**这个**](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.timeout.aspx)了解更多信息。

顺便说一句，我用**21mb**附件对其进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:41:09.380

尝试使用 httpRuntime 节点的 maxRequestLength。可能还需要更改 executionTimeout。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T12:23:15.900

这听起来与此问题[SmtpClient.Send 附件最大大小](https://stackoverflow.com/questions/5258939/smtpclient-send-attachment-maximum-size)相似，因此它可能是您的 SMTP 服务器的问题 - 尝试检查设置。

# php - PHP 多语言

> ID：10293577
> 
> 赞同：1
> 
> 时间：2012-04-24T07:30:06.153
> 
> 标签：php, html, internationalization, translation

> **可能的重复：**
> [PHP 中的国际化](https://stackoverflow.com/questions/3760499/internationalization-in-php)

我正在寻找一种将多语言添加到 PHP 站点的简单而高效的方法。我不是想偷懒，我只是在寻找最好的方法，因为那里有很多不同的方法。我已经在互联网上搜索了很多，但我仍在寻找迄今为止最好的解决方案。

您可以将翻译存储在数据库或 php 文件中。我更喜欢最后一个，以减少对数据库的调用量。你们觉得/喜欢什么？

欢迎任何关于此的好的教程！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:34:24.907

您可以为存储常量的每种语言创建一个包含文件。每种语言的常量都具有相同的名称，并且根据用户选择，您可以包含正确的语言文件。

但我建议仅将其用于登录文本等简单的内容，而不是内容本身。

总的来说，这取决于你在做什么。

# html - Firefox 无法使用绝对文件路径找到外部 CSS

> ID：10293579
> 
> 赞同：2
> 
> 时间：2012-04-24T07:30:16.657
> 
> 标签：html, css

在我的网页上，`<head>`元素中有以下行：

```
<link type="text/css" href="C:/myApps/app1/images/css/12.02/main.css" rel="stylesheet" /> 
```

当我在 Firefox 11.0 中查看该页面时，很明显`main.css`没有加载该页面。如果我去查看页面源代码，我会`<link>`在 HTML 中看到该元素（上图），但是当我单击它时，会出现以下错误：

> Firefox 不知道如何打开这个地址，因为协议 (c) 没有与任何程序相关联。

**我该如何解决？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T07:31:49.480

尝试：

```
<link type="text/css" href="file:///C:/myApps/app1/images/css/12.02/main.css" rel="stylesheet" /> 
```

可能有用

编辑：根据其他答案，这是当您想在本地计算机上使用 css 文件时，如果将托管该网站，那么您将需要使用相对路径。

```
<link type="text/css" href="images/css/12.02/main.css" rel="stylesheet" /> 
```

以上假设您的带有链接的 html 文件位于您的“app1”文件夹中。

马丁

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T07:31:56.220

你需要插入一个 url/uri =>`file:///C:/myApps/app1/images/css/12.02/main.css`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:34:39.307

Hi you cas change your css path

```
<link type="text/css" href="C:/myApps/app1/images/css/12.02/main.css" rel="stylesheet" /> 
```

into

xxx.css replace into correct path

```
<link type="text/css" href="xxx.css" rel="stylesheet" /> 
```

# ios5 - 在 NSInteger 中使用 for-in 循环？

> ID：10293580
> 
> 赞同：3
> 
> 时间：2012-04-24T07:30:20.743
> 
> 标签：ios5, for-in-loop

我有一个用 NSIntegers 填充的 NSMutableArray。我需要遍历数组。我可以做：

```
// given NSMutableArray *array of NSIntegers
NSUInteger n = [array count];
for (NSInteger i = 0; i < n; i++) {
  NSInteger x = [array objectAtIndex:i];
  // query SQLite WHERE id = x
} 
```

但是，似乎 for (object in array) 循环会更干净。iOS 5 不接受 NSIntegers 或 NSNumbers 作为 for-in 循环中的对象。我是否应该使用 NSObjects 循环遍历数组，在每次迭代期间将 NSObject 转换为 NSInteger？还有其他方法吗？还是像上面那样的 for 循环是这个问题的最干净的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T07:39:12.650

在 Objective-C 中，您可以使用带有 NSNumber 的 for-in 循环，如下所示：

```
 NSArray *array = /*NSArray with NSNumber*/;

    for (NSNumber *n in array) {
        NSLog(@"i: %d", [n intValue]);
    } 
```

看一下这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-19T12:58:27.687

大多数情况下，您将不允许拥有 NSUInteger 的 NSMutableArray （又名 unsigned long），因为它不是 Objective-c 对象。

您可以使用 c 样式。

```
NSUInteger array[] = {value1,value2,value3};
int size = sizeof(array)/sizeof(array[0]);
for (int i=0; i<size; i++) {
   NSInteger value = array[i];
   // do whatever you want
} 
```

# c# - StreamWriter不工作c#

> ID：10293581
> 
> 赞同：0
> 
> 时间：2012-04-24T07:30:24.957
> 
> 标签：c#, streamwriter

我在我的应用程序中使用了很多streamwrtier，这个应该记录程序运行时发生的错误，但目前它只创建文件而不写入文件：

```
 if(File.Exists(currentLog))//currentLog = "Path\\Log.txt"
        {
            using (var fileStream = File.Open(currentLog,FileMode.Open))
            {
                StreamWriter ErreurStreamWriter = new StreamWriter(fileStream);
                ErreurStreamWriter.WriteLine("{0}",e.Message);
                ErreurStreamWriter.WriteLine("-------------------------------");
            }
        }
        else
        {
            using (var fileStream = File.Create(currentLog))
            {
                StreamWriter ErreurStreamWriter = new StreamWriter(fileStream);
                ErreurStreamWriter.Write("Liste des erreurs :");
                ErreurStreamWriter.WriteLine("{0}", e.Message);
                ErreurStreamWriter.WriteLine("-------------------------------");
            }
        } 
```

我在这里遗漏了一些明显的东西吗？任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:32:26.087

写入后可能需要 Flush()，或者在存在时尝试追加

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:34:57.430

尝试这个

```
 using (var fileStream = File.Open(currentLog, FileMode.Open))
        {
            using (StreamWriter erreurStreamWriter = new StreamWriter(fileStream))
            { 
                erreurStreamWriter.WriteLine("{0}", e.Message);
                erreurStreamWriter.WriteLine("-------------------------------");
            }
        } 
```

基本上我认为发生的是流编写器永远不会刷新到文件流中。

# coldfusion - 一次处理列表或记录集中的 5 个项目

> ID：10293584
> 
> 赞同：0
> 
> 时间：2012-04-24T07:30:32.460
> 
> 标签：coldfusion

我有一个成员 ID 列表，我需要对其进行循环并对每个 ID 进行一些处理。

我目前遍历每个 ID，并对每个 ID 在 cfthread 中的每个 ID 进行一些处理。我遇到的问题是它创建了太多线程，所以我想我可以在每个线程中处理大约 5 个项目。但我正在努力解决这个问题。

我正在寻找类似于 RoR 的 in_groups_of 方法的东西。因此，我想将列表（例如 100 个列表项）分解为 20 个较小的列表，每个列表中有 5 个，将每个较小的列表传递给 cfthread，而不是一次一个项目。

我确信这很容易做到，但我就是不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:44:31.330

将列表转换为数组怎么样：

显然这是非常简单的框架，但它可以提供一个开始：

```
<cfscript>
    myArr = listToArray(myList);

    for(i=1;i<arrayLen(myArr);i+5){

        //need to do some checking to confirm that myArr[i+1] etc exist
        processFive(myArr[i],myArr[i+1],myArr[i+2],myArr[i+3],myArr[i+4],myArr[i+5]);
    }
    function processFive(id1, id2, id3, id4, id5){
        //spin up thread and do processing...

    }

</cfscript> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:53:41.617

诅咒我无法发表评论！我喜欢 BennyB 的回答，但你仍然可以有很多线程。如果您启动了一些线程，并让这些线程一次从数组中取出 5 个项目怎么办？

# center - 回合制游戏 - 比赛

> ID：10293585
> 
> 赞同：0
> 
> 时间：2012-04-24T07:30:33.547
> 
> 标签：center, game-center

我正在尝试使用 Game Center 进行回合制游戏。

我的问题是，我可以限制正在播放或创建的比赛数量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T15:01:58.313

假设您在本地知道该应用有多少游戏（通过调用很容易找到`loadMatchesWithCompletionHandler`）。

然后，超出您的最大游戏数量，拒绝所有邀请`handleInviteFromGameCenter`并禁用您的 UI 以创建新游戏，并且不要创建匹配请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:17:28.637

同时匹配的数量有一个内置限制（当前为 30）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:12:53.323

是的你可以。一种解决方案是将当前正在玩的游戏数量存储到数据库中。并检查它是否超过确定的最大限制。我刚刚开发完我的国际象棋游戏-.-

# android - 如何通过另一个活动刷新viewpageadapter中的片段

> ID：10293586
> 
> 赞同：6
> 
> 时间：2012-04-24T07:30:36.767
> 
> 标签：android

我的 android 应用程序有一个情况。场景是我正在使用视图页面适配器，其中我有 3 个页面实际上是片段。我的问题是我想从对话活动中更新这些。对话活动包含来自的列表我想更新片段的 onclick 事件。

首先，是否有可能，如果是，请加入并帮助我。

干杯高拉夫

这是我的视图页面适配器

```
/*
 * Copyright (C) 2012 Gaurav Rawat
 * 
 */
package com.punksrant.ifinddryday.adapter;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

import com.punksrant.ifinddryday.fragment.AllFragment;
import com.punksrant.ifinddryday.fragment.HomeFragment;
import com.punksrant.ifinddryday.fragment.SynchFragment;
import com.punksrant.ifinddryday.utils.IFindDryDaysConstants;
import com.viewpagerindicator.TitleProvider;

public class ViewPagerAdapter extends FragmentPagerAdapter implements
        TitleProvider {

    private static String[] titles = IFindDryDaysConstants.titles;

    public ViewPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public String getTitle(int position) {
        return titles[position % titles.length].toUpperCase();
    }

    @Override
    public int getCount() {
        return titles.length;
    }

    @Override
    public Fragment getItem(int position) {
        Fragment fragment;
        switch (position) {
        case 0:
            fragment = HomeFragment.newInstance();
            break;
        case 1:
            fragment = AllFragment.newInstance();
            break;

        case 2:
            fragment = SynchFragment.newInstance(titles[position
                    % titles.length]);
            break;

        default:
            fragment = HomeFragment.newInstance();
        }
        return fragment;
    }

}
' and in this I want to refresh the home fragment from my dialog class 
'/*
 * Copyright (C) 2012 Gaurav Rawat
 * 
 */
package com.punksrant.ifinddryday.activity;

import roboguice.inject.ContentView;
import roboguice.inject.InjectView;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

import com.github.rtyley.android.sherlock.roboguice.activity.RoboSherlockFragmentActivity;
import com.google.inject.Inject;
import com.punksrant.ifinddryday.model.Coordinates;
import com.punksrant.ifinddryday.utils.DryDayJSONResParser;
import com.punksrant.ifinddryday.utils.IFindDryDayViewUtils;

@ContentView(R.layout.statedialog)
public class Dialog extends RoboSherlockFragmentActivity {
    @InjectView(R.id.dialogList)
    ListView listView;
    @Inject
    SharedPreferences preferences;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String[] states = DryDayJSONResParser.getSupportedStates();
        listView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, android.R.id.text1, states));
        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                String state = ((TextView) view).getText().toString();
                Coordinates coordinates = IFindDryDayViewUtils
                        .getCoordinatesFromPreferences(preferences);
                coordinates.setState(state);
                IFindDryDayViewUtils.updateCityFromLocation(coordinates,
                        preferences);

                finish();
            }

        });
    }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T17:17:01.773

（感谢 blahdiblah rui.araujo）有几种方法可以实现这一目标。

第一种选择更容易，但效率更低。

像这样覆盖`getItemPosition`你`PagerAdapter`：

```
public int getItemPosition(Object object) {
    return POSITION_NONE;
} 
```

这样，当您调用 时`notifyDataSetChanged()`，视图寻呼机将删除所有视图并重新加载它们。这样就获得了重装效果。

[alvarolb 建议](https://stackoverflow.com/a/8024557)的第二个选项是在实例化新视图时使用`setTag()`方法。`instantiateItem()`然后`notifyDataSetChanged()`，您可以使用`findViewWithTag()`来查找要更新的视图，而不是使用。

第二种方法非常灵活和高性能。感谢 alvarolb 的原创研究。

# visual-studio-2010 - 为什么有时候我在VS2010中调试一个程序，我的ctrl被按下了？

> ID：10293587
> 
> 赞同：5
> 
> 时间：2012-04-24T07:30:41.610
> 
> 标签：visual-studio-2010

我被逼疯了。**有时**我按F5调试，我经常按shift+F5退出调试，但它重新启动调试（重新启动调试的快捷键是ctrl+shift+F5）。如果我单击某个 var，它将导航其定义。我只是发现我必须再次按 ctrl 孤独会禁用它。有谁知道为什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:19:40.037

这是一个已知问题。在这个问题上确实有多个 Connect 票（[1](https://connect.microsoft.com/VisualStudio/feedback/details/534915/stop-debugging-shortcut-key-shift-f5-causes-debugging-to-restart-instead-of-just-stopping)、[2](https://connect.microsoft.com/VisualStudio/feedback/details/619714/shift-f5-restart-debug-session-instead-of-stop-debugging)、[3](https://connect.microsoft.com/VisualStudio/feedback/details/540234/after-pressing-shift-f5-is-re-launching-the-application-in-debug-mode)、[4](https://connect.microsoft.com/VisualStudio/feedback/details/683604/shift-f5-debugging-bug-is-not-resolved-in-sp1)）。[最新](https://connect.microsoft.com/VisualStudio/feedback/details/683604/shift-f5-debugging-bug-is-not-resolved-in-sp1)的一篇说：

> 感谢您与我们联系。原始错误确实在我们当前的内部版本中得到修复，但该修复未包含在 VS 2010 SP1 中。请留意下一个版本的 Visual Studio 的预发布版本的公告，因为它们将包含修复程序。
> 
> 谢谢！
> 
> -肖恩·拉伯里
> 
> VS 职业队

这基本上听起来像“它不会得到修复，但 VS11 应该不再有问题了”。

*一个好的解决方法是在Tools -> Customize -> Keyboard...*下禁用用于重新启动调试的 Ctrl+Shift+F5 快捷方式。

# objective-c - 如何在项目中导入自定义框架？

> ID：10293589
> 
> 赞同：0
> 
> 时间：2012-04-24T07:30:54.530
> 
> 标签：objective-c

我是这个领域的新手，所以我的问题可能看起来有点愚蠢:(我已经开发了一个自定义框架，我想在其他不同的项目中导入它。但是当我将该框架导入我的项目时，总是会抛出错误（说框架名称是 example1.framework) 文件找不到。谁能告诉我该怎么做？我从项目目标的构建阶段添加了框架。我还需要做什么其他步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:33:28.307

如果要导入框架，则必须将其添加到项目文件中。

1.  转到您的主项目文件（项目的根目录）
2.  转到选项卡“构建阶段”
3.  打开“将二进制文件与库链接”部分
4.  现在将框架添加到项目中

最后但并非最不重要的一点：构建并运行您的应用程序:]。

# asp.net - Windows Azure 中的 DNS 查找时间

> ID：10293592
> 
> 赞同：1
> 
> 时间：2012-04-24T07:31:07.937
> 
> 标签：asp.net, performance, azure

我有一个域（比如 www.xxx.com）。我的域名在 GoDaddy.com 上。我的 GoDaddy 域指向我的 azure 域（例如 myapp.cloudapp.net）。但是我的 DNS 查找延迟从 400 到 800 毫秒。如果我直接浏览 myapp.cloudapp.net，那么 DNS 查找将花费近 100 毫秒。为什么我会有这么大的不同？怎样才能最大限度地减少这种差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:46:29.020

我在自己的部署中没有看到这种差异，但我做了一些事情来让生活更轻松：

1.  我使 DNS 条目非常稀疏（GoDaddy DNS 记录在很多垃圾中）
2.  我将A记录设置为服务器的解析IP
3.  我将任何子域设置为简单的@记录，而不是唯一的 IP
4.  我在他们的 Anywhere US 数据中心托管我的大部分 Azure 资产，我认为该数据中心在物理上相对靠近 GoDaddy 自己的 DNS 服务器。

希望这可以帮助

# c# - c# WebApplication另存为目录

> ID：10293602
> 
> 赞同：0
> 
> 时间：2012-04-24T07:31:56.593
> 
> 标签：c#, asp.net, c#-4.0, file-upload

我正在处理一个 ASP.net 项目，并且我有一个文件上传控件。我的解决方案中有一个名为 user_uploads 的文件夹。发布解决方案时，如何修改以下代码以将文件保存在 user_uploads 中？

```
string fn = System.IO.Path.GetFileName(FileUpload1.PostedFile.FileName);
FileUpload1.PostedFile.SaveAs("C:\\temp\\" + fn); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:35:32.160

您只需要执行以下操作即可使用 MapPath 获取文件夹的路径，然后使用该路径保存文件...

```
string path = HttpContext.Current.ApplicationInstance.Server.MapPath("~/user_uploads");
string fn = System.IO.Path.GetFileName(FileUpload1.PostedFile.FileName);   
FileUpload1.PostedFile.SaveAs(System.IO.Path.Combine(path, fn));           
//FileUpload1.PostedFile.SaveAs(path  + fn); 
```

# c# - C#中的任意大整数

> ID：10293603
> 
> 赞同：8
> 
> 时间：2012-04-24T07:32:01.460
> 
> 标签：c#, .net, python, biginteger

如何在 c# 中实现这个 python 代码？

Python代码：

```
print(str(int(str("e60f553e42aa44aebf1d6723b0be7541"), 16))) 
```

结果：

```
305802052421002911840647389720929531201 
```

但是在 c# 中，我遇到了大数字的问题。

你能帮助我吗？

我在 python 和 c# 中得到了不同的结果。哪里可能出错？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T07:41:50.373

原始类型（例如`Int32`, `Int64`）的长度有限，对于这么大的数字来说是不够的。例如：

```
数据类型                                     最大正值
Int32 2,147,483,647
UInt32 4,294,967,295
Int64 9,223,372,036,854,775,808
UInt64 18,446,744,073,709,551,615
您的号码 305,802,052,421,002,911,840,647,389,720,929,531,201

```

在这种情况下，要表示该数字，您需要 128 位。在 .NET Framework 4.0 中，有一种用于任意大小整数的新数据类型[System.Numerics.BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)。您不需要指定任何大小，因为它将由数字本身*推断*（这意味着您甚至可能`OutOfMemoryException`在执行时得到一个，例如，两个非常大的数字相乘）。

回到你的问题，首先解析你的十六进制数：

```
string bigNumberAsText = "e60f553e42aa44aebf1d6723b0be7541";
BigInteger bigNumber = BigInteger.Parse(bigNumberAsText,
    NumberStyles.AllowHexSpecifier); 
```

然后只需将其打印到控制台：

```
Console.WriteLine(bigNumber.ToString()); 
```

您可能有兴趣计算需要多少位来表示任意数字，请使用此函数（如果我记得原始实现来自 C Numerical Recipes）：

```
public static uint GetNeededBitsToRepresentInteger(BigInteger value)
{
   uint neededBits = 0;
   while (value != 0)
   {
      value >>= 1;
      ++neededBits;
   }

   return neededBits;
} 
```

然后计算一个写成字符串的数字所需的大小：

```
public static uint GetNeededBitsToRepresentInteger(string value,
   NumberStyles numberStyle = NumberStyles.None)
{
   return GetNeededBitsToRepresentInteger(
      BigInteger.Parse(value, numberStyle));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T07:37:11.927

如果您只想能够使用更大的数字，那么[`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)它有很多数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-15T14:53:15.920

要找到存储 a 所需的位数`BigInteger N`，可以使用：

```
BigInteger N = ...;
int nBits = Mathf.CeilToInt((float)BigInteger.Log(N, 2.0)); 
```

# android - 在 webview 中，覆盖 TouchListener

> ID：10293604
> 
> 赞同：0
> 
> 时间：2012-04-24T07:32:04.783
> 
> 标签：android, webview, ontouchlistener

我在android中使用webview

并且需要识别它是否滚动

滚动 webview 时，隐藏我的选项选项卡并停止滚动，设置可见 webview。

```
 www.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub  
            if(event.getAction() == MotionEvent.ACTION_UP)
            {
                Log.v("motion", "Up");
                option_tab_layout.setVisibility(View.VISIBLE);
            }
            if(event.getAction()==MotionEvent.ACTION_MOVE){
                Log.v("motion", "move");
                option_tab_layout.setVisibility(View.INVISIBLE);
            }
            return false;
        }
    }); 
```

return false 时，没有调用 ACTION_UP 事件，使用 return true 时，webview 无法滚动页面

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:02:00.460

我宁愿用`onScrollChanged (int l, int t, int oldl, int oldt)`

此处的文档：http: [//developer.android.com/reference/android/webkit/WebView.html#onScrollChanged](http://developer.android.com/reference/android/webkit/WebView.html#onScrollChanged(int) (int, int, int, int)

# php - 如何使用 imap 扩展获取原始电子邮件数据？

> ID：10293614
> 
> 赞同：12
> 
> 时间：2012-04-24T07:32:33.987
> 
> 标签：php, email, imap

我正在寻找一种下载整个原始电子邮件数据（包括附件）的方法，类似于您在 Gmail 中单击“显示原始数据”所获得的结果。

目前，我可以通过以下代码获取原始标题和邮件正文的某些部分：

```
$this->MailBox = imap_open($mailServer, $userName, $password, OP_SILENT);
...
$email->RawEmail = imap_fetchbody($this->MailBox, $msgNo, "0");
$email->RawEmail .= "\n".imap_fetchbody($this->MailBox, $msgNo, "1"); 
```

我也知道更改 imap_fetchbody 的第三个参数可能会返回编码的附件。猜猜我需要一个循环来逐部分获取原始电子邮件，但是停止循环的条件是什么？

有没有一种简单的方法可以一次获取整个电子邮件？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-01-27T04:48:59.687

当我搜索相同的问题时，我遇到了这个问题。我知道它必须比 hakre 的解决方案更容易，并且我在[5 年前](http://php.net/imap_fetchbody#89002)[`imap_fetchbody`](http://php.net/imap_fetchbody)的一篇帖子的页面上找到了正确答案。

要获取完整的原始消息，只需使用以下命令：

```
$imap_stream = imap_open($server, $username, $password);
$raw_full_email = imap_fetchbody($imap_stream, $msg_num, ""); 
```

请注意，作为第三个参数的空字符串`imap_fetchbody`表示电子邮件的所有部分和子部分，包括标题和所有正文。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-26T09:39:19.640

hakre 的答案过于完整，如果您并不真正关心结构，那么您将不需要[imap_fetchstructure](http://php.net/imap_fetchstructure)。

对于一个简单的“显示源”，您应该只需要[imap_fetchheader](http://php.net/imap_fetchheader)和[imap_body](http://php.net/imap_body)。

例子：

```
$conn = imap_open('{'."$mailServer:$port/pop3}INBOX", $userName, $password, OP_SILENT && OP_READONLY);
$msgs = imap_fetch_overview($conn, '1:5'); /** first 5 messages */
foreach ($msgs as $msg) {
    $source = imap_fetchheader($conn, $msg->msgno) . imap_body($conn, $msg->msgno);
    print $source;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T07:49:11.500

> 我的回答是*“过度完整”* ，如果您不需要电子邮件的整个结构，请参阅[Boy Baukema 的回答](https://stackoverflow.com/a/17877977/367456)以获得更直接的*“查看源代码”方式。*

如果要获取全部，则需要获取

*   标头[`imap_fetchheader`](http://php.net/imap_fetchheader)。
*   获取消息的正文数[`imap_fetchstructure`](http://php.net/imap_fetchstructure)。
*   每个矿井都有一个身体[`imap_fetchmime`](http://php.net/imap_fetchmime)。
*   它拥有的每一个身体[`imap_fetchbody`](http://php.net/imap_fetchbody)。

由于 mime-message 可以有多个主体，您需要一个接一个地处理每个部分。要减少服务器的负载，请`FT_PREFETCHTEXT`使用[`imap_fetchheader`](http://php.net/imap_fetchheader). [另一个答案](https://stackoverflow.com/a/10115109/367456)中的一些示例[代码`imap_fetchstructure`](https://stackoverflow.com/a/10115109/367456)显示了处理 imap 连接并已经通过封装迭代了部分消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T21:13:28.073

一个常见的错误是使用`"\n"`or `PHP_EOL`。

根据 RFC RFC821、RFC2060、RFC1939`"\r\n"`应该使用。虽然一些邮件服务器会自动转换错误，但 Cyrus 不会并抛出一个很好的错误。

`PHP_EOL`是一个系统依赖常量，例如`"\n"`在 Linux、`"\r"`Mac 和`"\r\n"`Windows 上。

此外，还包含预期`imap_fetchheader()`的尾随。`"\r\n"`所以正确的例子是：

```
 $source = imap_fetchheader($conn, $msg->msgno) . imap_body($conn, $msg->msgno); 
```

# android - Android：如何在单击按钮时将项目添加到列表视图？

> ID：10293620
> 
> 赞同：1
> 
> 时间：2012-04-24T07:33:26.097
> 
> 标签：android, android-listview, adapter, listadapter

我的布局文件中有一个列表视图和一个按钮。我想在单击该按钮时将项目添加到列表视图。活动开始时列表视图应该是空的，但它应该通过向其中添加项目来增长。单击“AddItem”按钮时，我将显示一个 AlertDialog 以从用户那里获取项目/输入。如何将该项目添加到列表视图？请帮我写代码。我应该使用哪个适配器在 ListView 中使用我自己的布局？我应该扩展 ListActivity 吗？

这是我的布局文件：my_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/blue"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:divider="@android:color/black"
    android:dividerHeight="2dp" >
</ListView>

<Button
        android:id="@+id/addItemButtom"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:layout_marginRight="15dp"
        android:layout_weight="1"
        android:text="Add Item" />

</LinearLayout> 
```

这是我的 row_item.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:background="@android:color/white"
 android:orientation="vertical" >

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:gravity="center"
    android:orientation="horizontal" >

    <TextView  android:layout_weight = "1" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Newly Added Item : "
        android:textColor="@android:color/black"
        android:textSize="17dp" />

    <TextView android:layout_weight = "1" 
        android:id="@+id/itemTextView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout>

</LinearLayout> 
```

这是我的java文件：

```
public class MyList extends Activity implements OnClickListener{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.my_list);

    findViewById(R.id.addItemButtom).setOnClickListener(this);  

}

@Override
public void onClick(View v) 
{
    switch (v.getId()) {
    case R.id.enterInverter:

        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        final EditText et = new EditText(this);      
        et.setHint("Enter Item");
        et.setMaxLines(1);    
        et.setTextSize(17); 
        alert.setTitle("Enter Item");
        alert.setView(et); 
        alert.setInverseBackgroundForced(true);

        alert.setPositiveButton("Add", new DialogInterface.OnClickListener() 
        { 
            public void onClick(DialogInterface dialog, int whichButton) 
            {
                String item = et.getText().toString().trim();

            }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int whichButton) 
            {
                dialog.cancel();
            }
        });
        alert.show();

        break;

    default:
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:44:28.380

ArrayAdapter 可能是开始的点。当然它会根据你的列表而改变，但我建议你使用 ArrayAdapter。获取列表的引用，为其定义一个新适配器并使用 setAdapter 方法设置它。然后，您可以向适配器添加/删除项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T07:42:18.110

你的列表视图在哪里？

当您在列表中添加列表项时（Array 或 Arraylist 或...）

```
 your_adapter.notifyDataSetChanged(); 
```

它让你画出新鲜的列表视图

# java - 如何使用 java.lang.Process 类向另一个进程提供输入

> ID：10293627
> 
> 赞同：3
> 
> 时间：2012-04-24T07:33:48.497
> 
> 标签：java

假设有一个程序从标准输入中获取输入。

例如：

```
cin>>id; 
```

我想弄清楚的是如何执行该过程并为其标准输入提供一些输入。获得过程的输出对我来说不是问题。它工作正常。`java.lang.Process`问题是如何使用类为此类过程提供输入。

如果有任何其他第三方库，如 Apache commons，请同时提及它们。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:36:20.490

使用[`Process.getOutputStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#getOutputStream%28%29)它`write()`。这有点棘手，因为您使用**输出**流向进程**输入**数据，但名称反映了返回的接口（从您的应用程序的角度来看，它是**输出**，因为您正在写入它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:35:39.200

您需要启动一个单独的线程，该线程从一个进程的输出中读取并将其作为输入写入另一个进程。

这样的事情应该做：

```
class DataForwarder extends Thread {

    OutputStream out;
    InputStream in;

    public DataForwarder(InputStream in, OutputStream out) {
        this.out = out;
        this.in = in;
    }

    @Override
    public void run() {
        byte[] buf = new byte[1024];
        System.out.println("Hej");
        try {
            int n;
            while (-1 != (n = in.read(buf)))
                out.write(buf, 0, n);
            out.close();
        } catch (IOException e) {
            // Handle in some suitable way.
        }
    }
} 
```

这将用于`prod >> cons`如下：

```
class Test {
    public static void main(String[] args) throws IOException {

        Process prod = new ProcessBuilder("ls").start();
        Process cons = new ProcessBuilder("cat").start();

        // Start feeding cons with output from prod.
        new DataForwarder(prod.getInputStream(), cons.getOutputStream()).start();
    }
} 
```

# c++ - hash_set 哈希函数

> ID：10293628
> 
> 赞同：0
> 
> 时间：2012-04-24T07:33:48.340
> 
> 标签：c++, stl

假设我决定我的一系列整数的 hash_set 散列器是整数本身。还说我的整数范围非常大，1-20，然后是 1000-1200，然后是 10000-12000。eg: 1, 2, 5, 7, 1111, 1102, 1000, 10003, 10005 那不是很糟糕的散列函数吗？在这种情况下，hash_set 将如何存储数据，比如说 gcc 实现，如果有人知道的话。

## 谢谢

编辑：感谢您的两个答复。我应该注意我已经指定了我的哈希器来返回输入值。例如，1001 的哈希值将是 1001。所以我问实现是否可以自由地进行另一轮哈希，或者它会看到 1001 并且数组大小会增长到 1001？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:37:08.867

哈希表开始时很小，当负载因子足够高时，偶尔会重新散列以增长。仅仅因为散列值为 12000 并不意味着会有 12000 个桶，当然 - hash_set 会做类似“mod”散列函数的输出以使其适合桶的数量。

您描述的标识函数对于许多哈希表实现（包括 GCC）来说并不是一个糟糕的哈希函数。事实上它是很多人使用的，而且显然它是有效的。一个不好的例子是加密哈希函数，但它有不同的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:42:06.927

即使您的数据聚集在哈希值内的某些范围内，通常也只会使用每个值的哈希值的最低有效位来存储它。这意味着如果表示 0-128 的位均匀分布，那么无论散列值的分布如何，您的散列函数仍然会表现良好。但是，这确实意味着如果您的值都是某个二进制值的倍数，例如 8，那么低位将不会如此均匀地分布，并且这些值将聚集在哈希表中，从而导致过度链接并减慢操作速度。

# mysql - Mysql INSERT INTO 从另一个带有条件和限制的表

> ID：10293631
> 
> 赞同：1
> 
> 时间：2012-04-24T07:33:58.683
> 
> 标签：mysql

我有两个具有一对多关系的表 table1（一个），table2（很多）。

```
table1 has (t1_id) as KEY
table2 has (t2_id) as KEY and t2_t1_id as as refference to table1 
```

现在`table1`我需要一个`rand_t2_id`包含`id`from的列 ( ) `table2`，我真的不在乎哪一个

这是我试过的查询

```
INSERT INTO table1 (rand_t2_id)
SELECT t2_id
FROM table2
WHERE table1.t1_id = table2.t2_t1_id; 
```

如果需要，还需要在某处建立限制。我只需要 table2 中的一个 id

运气不好，有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:39:39.213

海事组织你可以试试

```
UPDATE table1 t1 INNER JOIN table2 t2
  ON t1.t1_id = t2.t2_t1_id;
SET t1.rand_t2_id = t2.t2_id 
```

我假设您`rand_t2_id`的`table1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:39:30.803

```
INSERT INTO table1 (t2_t1_id, rand_t2_id)
SELECT t2_id
FROM (  SELECT t2_id, t2_t1_id
        FROM table2
        ORDER BY RAND()) AS h
GROUP BY t2_t1_id
ON DUPLICATE KEY UPDATE rand_t2_id = VALUES(rand_t2_id) 
```

我想这就是你所追求的？

此查询会将随机 t2_id 插入相关的 table1。

# iphone - iOS：视图显示分层组织数据

> ID：10293636
> 
> 赞同：0
> 
> 时间：2012-04-24T07:34:29.520
> 
> 标签：iphone, ios, uiview, treeview, hierarchical-data

是否有一个视图可以用来以下列方式显示分层组织数据 -

![表示分层组织数据的视图](../Images/2ceae431b2ff0e053bbf2c572770c019.png)

或者我需要自己建造一个？如果我需要自己构建，那么您能否提供类似实现的参考（如果有）？

谢谢，

更新：我正在寻找的结果视图是这个 -

顶视图将是滚动图块的可滚动视图。顶视图可能包含一个 "container-view" ，用于保存所有图块。

每个节点将由一个图块（带有图像和标题的 UIView）表示，将有线条表示连接（父子连接）b/w 图块。

# php - Ajax mouseover 显示函数对齐

> ID：10293640
> 
> 赞同：2
> 
> 时间：2012-04-24T07:35:13.503
> 
> 标签：php, jquery, ajax, mouseover

我正在尝试使用鼠标悬停功能打开一个框，但是该框始终显示在对象的右侧。因此，当对象位于页面的右端时，无法看到整个框，如图所示。 [https://rapidshare.com/files/998669066/problem.png](https://rapidshare.com/files/998669066/problem.png)

这是我的ajax代码：

```
$(document).ready(function() {
    $('.date-available').click(function() {
        alert($(this).attr('id'));
    });
    $('.rezerve-td').mouseover(function() {
        $(this).children().show();
        }).mouseout(function() {
        $(this).children().hide();
    });
}); 
```

我应该怎么做才能防止它？谢谢。

这是我的代码的html部分：

```
require_once 'class.dates.php';
require_once 'class.generic.php';
require_once 'connection.php';

$query = mysql_query("SELECT * FROM egitim_salonu", $baglanti);
while ($row = mysql_fetch_object($query)) {
    $salonlar[$row->id] = array('ad' => $row->ad, 'detay' => $row->detay);
}

$query = mysql_query("SELECT * FROM salon_rezervasyonu", $baglanti);
while ($row = mysql_fetch_object($query)) {
    $rezervasyonlar[$row->salon_id.'%'.$row->gun.'%'.$row->tip] = array('salon_id' => $row->salon_id, 'gun' => $row->gun, 'tip' => $row->tip, 'rezerve_edildigi_egitim' => $row->rezerve_edildigi_egitim);
}

$month = date('m', strtotime($_POST['d']));
$year = date('Y', strtotime($_POST['d']));
$date = date('F Y', strtotime('01-'.$month.'-'.$year));

if ($month == 1 || $month == 3 || $month == 5 || $month == 7 || $month == 8 || $month == 10 || $month == 12) {
    $numberOfDays = 31;
} else if ($month == 4 || $month == 6 || $month == 9 || $month == 11) {
    $numberOfDays = 30;
} else if (date('L', strtotime($year.'-01-01'))) {
    $numberOfDays = 29;
} else {
    $numberOfDays = 28;
}

// Tabloyu aç, başlığı hazırla
$output = '<table class="calendar" id="salon-rezervasyon-table">
    <thead>
        <tr><th rowspan="2">Salon</th><th colspan="'.(2 * $numberOfDays).'">'.$date.'</th></tr>
        <tr>';

for ($i = 1; $i <= $numberOfDays; $i++) {
    $output .=  '<th width="10" colspan="2" class="day-th">'.$i.'</th>';
}

// Başlığı kapat, gövdeyi aç
$output .=  '</tr></thead><tbody>';

// Her salon için...
foreach ($salonlar as $salonKey => $salonValue) {
    $output .=  '<tr id="salon-'.$salonKey.'"><td class="calendar-salon-column">'.$salonValue['ad'].'<br />'.$salonValue['detay'].'</td>';

    // ... o ay içindeki günleri kontrol et. Burada kontrol için şunu yapıyoruz: salon id'si, tarih ve gün içerisindeki saati (öğleden önce, öğleden sonra)
    // birleştirerek bir index (bu index unique bir index) oluşturuyoruz ve bu index yukarıdaki rezervasyonlar dizisinde tanımlanmış mı diye kontrol ediyoruz.
    for ($i = 1; $i <= $numberOfDays; $i++) {
        $dateCheck = date('Y-m-d', strtotime($i.'-'.$month.'-'.$year));
        $rIndexOO = $salonKey.'%'.$dateCheck.'%Öğleden önce';
        $rIndexOS = $salonKey.'%'.$dateCheck.'%Öğleden sonra';

        //Öğleden önce
        if(isset($rezervasyonlar[$rIndexOO])) {
            $egitimPlaniQuery = mysql_query("SELECT * FROM egitim_plani WHERE id = ".$rezervasyonlar[$rIndexOO]['rezerve_edildigi_egitim'], $baglanti);
            $egitimPlani = mysql_fetch_object($egitimPlaniQuery);

            $output .= '<td id="'.$dateCheck.'%o" class="calendar-td rezerve-td">';
            $output .= '<div class="rezerve">'.date('d-m-Y', strtotime($dateCheck)).' Öğleden Önce<br /><br />'.$egitimPlani->egitim_adi.'</div>';
            $output .= '</td>';
        } else {
            $output .= '<td id="'.$dateCheck.'%o" class="date-available calendar-td">';
            $output .= '';
            $output .= '</td>';
        }

        //Öğleden sonra
        if(isset($rezervasyonlar[$rIndexOS])) {
            $egitimPlaniQuery = mysql_query("SELECT * FROM egitim_plani WHERE id = ".$rezervasyonlar[$rIndexOO]['rezerve_edildigi_egitim'], $baglanti);
            $egitimPlani = mysql_fetch_object($egitimPlaniQuery);

            $output .= '<td id="'.$dateCheck.'%s" class="calendar-td rezerve-td">';
            $output .= '<div class="rezerve">'.date('d-m-Y', strtotime($dateCheck)).' Öğleden Sonra<br /><br />'.$egitimPlani->egitim_adi.'</div>';
            $output .= '</td>';
        } else {
            $output .= '<td id="'.$dateCheck.'%o" class="date-available calendar-date-separator">';
            $output .= '';
            $output .= '</td>';
        }
    }

    $output .=  '</tr>';
}

$output .=  '</tbody></table>';
echo $output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:31:31.783

你可能可以用一些 CSS 来解决这个问题。

```
div.rezerve { 
    position: absolute
} 
```

如果它仍然显示在页面之外，您可以将类似这样的内容添加到您的 javascript

```
....
var doc_width = $(document).width();
var rezerve_child = $(this).children();
rezerve_child.show();
var position = rezerve_child.offset();
var rezerve_child_width = rezerve_child.width();
if (position.left + rezerve_child_width > doc_width) {
    $(this).css('right', '2px');
}
.... 
```

jQuery Tooltip 插件也可能会有所帮助。 [http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)

# django - 如何在 django-cms 的页面中添加一些额外的字段？（在 Django 管理面板中）

> ID：10293641
> 
> 赞同：15
> 
> 时间：2012-04-24T07:35:18.767
> 
> 标签：django, django-admin, django-cms

我想在 django-cms（在 django 管理面板中）的页面中添加一些额外的字段。如何以最简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-24T10:21:59.893

创建一个新应用程序（称为`extended_cms`或其他）并`models.py`创建以下内容：

```
from django.db import models
from django.utils.translation import ugettext_lazy as _
from cms.models.pagemodel import Page

class ExtendedPage(models.Model):   
    page = models.ForeignKey(Page, unique=True, verbose_name=_("Page"), editable=False, related_name='extended_fields')
    my_extra_field = models.CharField(...) 
```

然后创建一个`admin.py`：

```
from models import ExtendedPage
from cms.admin.pageadmin import PageAdmin
from cms.models.pagemodel import Page
from django.contrib import admin

class ExtendedPageAdmin(admin.StackedInline):
    model = ExtendedPage
    can_delete = False

PageAdmin.inlines.append(ExtendedPageAdmin)
try:
    admin.site.unregister(Page)
except:
    pass
admin.site.register(Page, PageAdmin) 
```

这会将您的扩展模型作为内联添加到您创建的任何页面。访问扩展模型设置的最简单方法是创建上下文处理器：

```
from django.core.cache import cache
from django.contrib.sites.models import Site

from models import ExtendedPage

def extended_page_options(request):
    cls = ExtendedPage
    extended_page_options = None    
    try:
        extended_page_options = request.current_page.extended_fields.all()[0]
    except:
        pass
    return {
        'extended_page_options' : extended_page_options,
    } 
```

`{{ extended_page_options.my_extra_field }}`现在您可以使用模板访问当前页面的额外选项

本质上，您所做的是创建一个带有额外设置的单独模型，该模型用作每个 CMS 页面的内联。我以前从博客文章中得到这个，所以如果我能找到我会发布它。

**编辑**

这是博客文章：http: [//ilian.ini.org/extending-django-cms-page-model/](http://ilian.i-n-i.org/extending-django-cms-page-model/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T20:52:27.493

还有一种方法可以在不使用内联的情况下执行此操作，并且在页面表单上的任何位置都有字段。例如，我有一个“配色方案”的自定义设置，我希望它位于“基本设置”字段集下。这可以通过覆盖 ModelForm 和 ModelAdmin 的字段集来完成。另外，为了简单起见，我选择了 OneToOne 字段而不是 ForeignKey。

`models.py`：

```
from django.db import models
from cms.models.pagemodel import Page
from django.conf import settings

class PageCustomSettings(models.Model):
    page = models.OneToOneField(Page, editable=False, 
                                related_name='custom_settings')
    color_scheme = models.CharField(blank=True, choices=settings.COLOR_SCHEMES,
                                    max_length=20) 
```

`admin.py`：

```
from django import forms
from django.conf import settings
from django.contrib import admin
from cms.admin.pageadmin import PageAdmin, PageForm
from cms.models.pagemodel import Page
from web.models import PageCustomSettings

color_scheme_choices = (('', '---------'),) + settings.COLOR_SCHEMES

class CustomPageForm(PageForm):
    color_scheme = forms.ChoiceField(choices=color_scheme_choices,
                                     required=False)

    def __init__(self, *args, **kwargs):
        # make sure that when we're changing a current instance, to set the 
        # initial values for our custom fields
        obj = kwargs.get('instance')
        if obj:
            try:
                opts = obj.custom_settings
                kwargs['initial'] = {
                    'color_scheme': opts.color_scheme
                }
            except PageCustomSettings.DoesNotExist:
                pass
        super(CustomPageForm, self).__init__(*args, **kwargs)

    def save(self, commit=True):
        # set the custom field values when saving the form
        obj = super(CustomPageForm, self).save(commit)
        try:
            opts = PageCustomSettings.objects.get(page=obj)
        except PageCustomSettings.DoesNotExist:
            opts = PageCustomSettings(page=obj)
        opts.color_scheme = self.cleaned_data['color_scheme']
        opts.save()
        return obj

PageAdmin.form = CustomPageForm
PageAdmin.fieldsets[1][1]['fields'] += ['color_scheme']

admin.site.unregister(Page)
admin.site.register(Page, PageAdmin) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-11T11:19:07.937

有一种官方的方式来扩展页面和标题模型，我强烈推荐这个官方文档：

*   从 docs.django-cms.org[扩展页面和标题模型](http://docs.django-cms.org/en/stable/how_to/extending_page_title.html)

如果可以的话，我还强烈建议使用占位符，因为写了这个答案，我现在更喜欢为封面图像的用例创建一个占位符。（如果您愿意，您甚至[可以只获取模板中的图像 URL ）。](https://stackoverflow.com/a/38958158/247696)

## 链接摘要：

1.  `PageExtension`在您的文件中创建一个子类`models.py`并注册它：

    ```
    class IconExtension(PageExtension):
        image = models.ImageField(upload_to='icons')

    extension_pool.register(IconExtension) 
    ```

2.  `PageExtensionAdmin`在您的文件中创建一个子类`admin.py`并注册它：

    ```
    class IconExtensionAdmin(PageExtensionAdmin):
        pass

    admin.site.register(IconExtension, IconExtensionAdmin) 
    ```

3.  最后，为了使它可以从工具栏访问，创建一个`ExtensionToolbar`in的子类`cms_toolbars.py`并注册它：

    ```
    @toolbar_pool.register
    class IconExtensionToolbar(ExtensionToolbar):
        model = IconExtension

        def populate(self):
            current_page_menu = self._setup_extension_toolbar()
            if current_page_menu:
                page_extension, url = self.get_page_extension_admin()
                if url:
                    current_page_menu.add_modal_item(_('Page Icon'), url=url,
                        disabled=not self.toolbar.edit_mode) 
    ```

官方文档进行了更详细的说明和解释。

有一个开放的 GitHub 问题，[支持向普通和高级“页面设置”对话框添加元素](https://github.com/divio/django-cms/issues/3566)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-18T09:30:40.963

我通过谷歌来到这里，答案让我走上了 Django CMS 3 Beta 的正确轨道。要扩展页面模型并将您的扩展挂接到工具栏，您可以按照官方文档进行操作：

[http://django-cms.readthedocs.org/en/latest/how_to/extending_page_title.html](http://django-cms.readthedocs.org/en/latest/how_to/extending_page_title.html)

### 访问模板中的值

```
{{ request.current_page.<your_model_class_name_in_lowercase>.<field_name> }} 
```

例如，我用这个模型扩展了页面模型：

```
from django.db import models

from cms.extensions import PageExtension
from cms.extensions.extension_pool import extension_pool

class ShowDefaultHeaderExtension(PageExtension):
    show_header = models.BooleanField(default=True)

extension_pool.register(ShowDefaultHeaderExtension) 
```

要在模板中访问其值：

```
{{ request.current_page.showdefaultheaderextension.show_header }} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-16T13:45:32.130

由于我没有足够的声誉，我无法直接评论 Timmy O'Mahony 的帖子。但是我想指出，将`StackedInline`对象添加到`PageAdmin.inlines`列表的建议解决方案不再像预期的那样工作。

我正在使用 Djangocms 3.3 以及在 Timmy O'Mahony 版本之间的某个地方，作者更改了内联列表的语义。它的内容现在显示在该特定页面的权限菜单中（包括可能添加的更多`StackedInline`或`TabularInline`项目）。

# php - PHP帖子中未定义的索引

> ID：10293644
> 
> 赞同：0
> 
> 时间：2012-04-24T07:35:34.607
> 
> 标签：php, forms, jquery, phpmailer, undefined-index

我采用一个表格并在 jquery 中进行变量检查，然后将其传递给 ajax 中的 php 文件，但我收到了这个通知

注意：未定义索引：第 3 行 C:\xampp\htdocs\process.php 中的 your_name 此处有问题 注意：第 7 行 C:\xampp\htdocs\process.php 中未定义索引：your_email

这是我的jQuery代码

```
 $(".button").click(function(){
    $('.error').hide(); 
    var your_email=$("input#your_email").val(); 
    if(your_email ==""){
        $("label#youremail_error").show();  
        $("input#your_email").focus(); 
        return false; 
    }
    var your_name=$("input#your_name").val(); 
    if(your_name==""){
        $("label#yourname_error").show();
        $("input#your_name").focus(); 
        return false; 
    }
    var friends_email=$("input#friends_email").val(); 
    if(friends_email==""){
        $("label#friendsemail_error").show(); 
        $("input#friends_email").focus(); 
        return false; 
        }
    var friends_name=$("input#friends_name").val(); 
    if(friends_email==""){
        $("label#friendsname_error").show(); 
        $("input#friends_name").focus(); 
        return false;
        }
        var dataString = 'your_email=' + your_email + '&friends_email=' + friends_email + '&your_name=' + your_name + '&friends_name=' + friends_name; 
        //alert(dataString); 
        $.ajax({
        type: "POST", 
        url:"process.php",
        data: dataString, 
        success: function(ret) {
            alert(ret); 
            //alert("thank you for signing up"); 
        }, 
```

这是我的PHP

```
 <?php
include 'inc/class.phpmailer.php';
if(isset($_POST['your_name'])){
    $your_name=$_POST['your_name'];
    }
else{
    echo "something is wrong with your name having:";
    var_dump($_POST['your_name']);
    echo "<br/>"; 
    }
if(isset($_POST['your_email'])){
    $your_email=$_POST['your_email']; 
}
else{
    echo "something is wrong with your email having:";
    var_dump($_POST['your_email']); 
    echo "<br/>"; 
    }
if(isset($_POST['friends_name'])){
    $friends_name=$_POST['friends_name']; 
    }
else{
    echo "something is wrong with friends name having:"; 
    var_dump($_POST['friends_name']);
    echo "<br/>"; 
    } 
```

我不知道为什么我会收到这个通知显然我的 $_POST 值没有设置。
我对此束手无策。你知道为什么/什么时候没有设置 $_POST 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:51:50.327

您首先获取 your_name 的值，然后检查它是否存在

```
$your_name=$_POST["your_name"];  <--- this line should be inside an if isset
if(!isset($_POST['your_name'])){ 
```

执行以下操作

```
if (isset($_POST['your_name'])) {
   $your_name = $_POST['your_name'];
   // do whatever here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:15:39.497

$_POST['your_name'] 不能分配给变量 $your_name 当“你的名字”没有发布因为它不存在..你必须先检查它是否存在然后将它分配给变量..代码应如下所示：

```
if (isset($_POST['your_name'])) {
   $your_name = $_POST['your_name'];
}
else { 
   echo "something is wrong here";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:11:32.287

在你的 js 代码中没有看到任何问题，但是你的 php 代码有 lil 缺陷

```
 <?php
include 'inc/class.phpmailer.php';

//it can be like that or
if(!isset($_POST['your_name'])){
    echo "something is wrong here"; 
}
else{
    $your_name=$_POST["your_name"]; 
} 
```

注意：PHP 错误处理应该正确完成，或者您可以禁用 php 警告

# google-tv - Google TV SDK 将参数从远程控制移动应用程序发送到 GoogleTV 应用程序

> ID：10293649
> 
> 赞同：0
> 
> 时间：2012-04-24T07:35:59.160
> 
> 标签：google-tv

是否可以从移动远程控制应用程序（[http://code.google.com/p/google-tv-remote/](http://code.google.com/p/google-tv-remote/)）向我的 Google TV 应用程序发送参数以打开我的 Google TV 应用程序并获取这些参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:49:02.663

Google TV Remote 应用实现了 Anymote 协议，该协议具有将意图（带有额外数据）发送到 Google TV 设备的发送消息：[https ://developers.google.com/tv/remote/docs/#flingevents](https://developers.google.com/tv/remote/docs/#flingevents)

# jquery - 如何使用带有 Jquery Mobile 和 Coldfusion8 的标签链接避免“无效构造”错误？

> ID：10293650
> 
> 赞同：2
> 
> 时间：2012-04-24T07:36:05.500
> 
> 标签：jquery, jquery-mobile, coldfusion, coldfusion-8, hashtag

我正在尝试在 Jquery Mobile 和 Coldfusion8 中设置一个页面。

我的 Jquery Mobile 链接到内部页面如下所示：

```
 <a href="#somePage" data-role="button">Click this button</a> 
```

如果我像这样通过 Coldfusion 运行它：

```
 <cfoutput>
   <a href="#somePage" data-role="button">Click this button</a>
 </cfoutput> 
```

并渲染页面，在页面跳转到正常状态之前，我短暂地看到一个“无效构造”错误闪烁。我已经在顶部加载脚本，但并没有真正帮助。

知道如何规避这个问题吗？

谢谢！

**编辑：**现在尝试使用“##”而不是“#”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:43:46.307

行。看来我需要使用双标签...

```
<a data-role="button" href="##somepage">Click Me</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:50:11.160

发生这种情况是因为您在一个`<cfoutput>`块内（您用另一个 # 转义 #）。

另一种选择是仅将您需要的变量包装在 .

所以动态链接看起来像：

```
<cfset myDynamicLink = "http://www.example.com">
<a href="<cfoutput>#myDynamicLink#</cfoutput>"> 
```

无论哪种方式都有利有弊（在任何一种情况下，人们都会尖叫你做错了）。有必要查看适合您情况的最佳选项。

# iphone - 在本地通知中存储多个 userInfo

> ID：10293658
> 
> 赞同：3
> 
> 时间：2012-04-24T07:36:27.517
> 
> 标签：iphone, uilocalnotification

我正在创建一个 UILocalNotification，我需要为此设置多个 userInfo，我该怎么做？

```
 // Create a new notification

    UIApplication* app = [UIApplication sharedApplication];

    UILocalNotification *alarm = [[UILocalNotification alloc] init];

    alarm.fireDate = date;        
    alarm.timeZone = [NSTimeZone localTimeZone];
    alarm.alertBody = msg;        
    alarm.alertAction = @"View";            
    alarm.repeatInterval = NSYearCalendarUnit;
    alarm.soundName=@"happyBirthday.wav";
    alarm.applicationIconBadgeNumber = 1;    

   NSDictionary *userDict = [NSDictionary dictionaryWithObject:detailperson forKey:@"msg"];
   NSDictionary *userDictName = [NSDictionary dictionaryWithObject:detailperson2 forKey:@"name"];

   alarm.userInfo = userDict;
   alarm.userInfo = userDictName; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:43:07.113

字典中可以有多个对象，只要键都不同：

```
NSDictionary *userDict = [NSDictionary dictionaryWithObjectsAndKeys:detailperson, @"msg", detailperson2, @"name", nil];

alarm.userInfo = userDict; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:42:55.353

您需要将两个字典与单个字典结合使用，然后将该字典设置到用户信息中。

```
 NSDictionary *dic=[NSDictionary dictionaryWithObjectsAndKeys:dic1,@"first",dic2,@"second", nil];

       alarm.userInfo=dic 
```

# makefile - 获得“多个目标模式。停止。” 尝试使用 ndk-build 为 Android 构建时出错

> ID：10293659
> 
> 赞同：22
> 
> 时间：2012-04-24T07:36:28.467
> 
> 标签：makefile, android-ndk, cygwin

我在使用 Cygwin 和 ndk-7`ndk-build`脚本和使用`ndk-build.cmd`预编译库在 Windows 上构建脚本之间切换。当我再次尝试从 Cygwin 切换回构建时，我开始收到：

> ***多个目标模式。停止。

我该如何解决？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-24T07:45:15.073

您应该删除旧的“obj”文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:10:42.337

在我看来，您的 makefile 已保存为 Windows/DOS 行结尾，而不是 UNIX 行结尾。当您看到看起来像这样损坏的错误消息时，通常就是这个原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-23T08:50:39.887

我也遇到了同样的问题，我用的是eclipse。在我运行**eclipse 项目 clean**后，问题就消失了。我注意到在清理之前，有两个目标 armeabi 和 armeabi-v7a。项目清理清理文件夹之一，ndk-build 没有问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-23T05:39:48.080

我以前遇到过这个问题。我将**制作**更改为最新版本（手动下载），并修复了它。

# php - 在 php 中提交主类别查询时也显示子类别数据

> ID：10293661
> 
> 赞同：1
> 
> 时间：2012-04-24T07:36:31.490
> 
> 标签：php, mysql, categories

我创建了一个网站，我将类别分为三个级别，例如主类别 -> 子类别 -> 子子类别

我在添加产品时使用了这个类别，无论我从每个产品进入该类别的列表中选择什么类别。现在我正在尝试在我的网站上明智地显示产品类别，我已经放置了一个列表按钮，我已经在其中显示了所有类别和子类别现在问题是当我要单击主类别时它只显示那些产品选择了该类别，但如果单击主类别，我也想显示子类别，这是查询：

```
SELECT * FROM `products` WHERE `product_category`='$_REQUEST[cat]' ORDER BY `product_id` DESC 
```

在此查询中，请求 cat 是我在页面上获得的类别的名称。

如果单击主类别，我也想知道显示子类别的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:47:44.057

假设您在单击主类别时与`product_category`like有一些关系，您还应该搜索它的子类别`parent_category``id=1`

像你一样：

主要类别

`SELECT * FROM `products` WHERE `product_category`='$_REQUEST[cat]' ORDER BY `product_id` DESC`

子类

`SELECT * FROM `products` WHERE `category_parent`='$_REQUEST[cat]' ORDER BY `product_id` DESC`

还要注意你的`$_REQUEST['cat']`，因为它很脆弱并且可以被利用。你应该使用[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php)或者也许只是[`(int) ($_REQUEST['cat'])`](http://www.php.net/manual/en/language.types.integer.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:51:06.613

```
SELECT product_category, (SELECT category_name FROM category WHERE c_id = products.c_id) AS Category, 
(SELECT sub_category_name FROM sub_category  WHERE sub_cat_id = products.sub_cat_id) AS        'Sub Category'
(SELECT sub_sub_category_name FROM sub_sub_category  WHERE sub_sub_cat_id = products.sub_sub_cat_id) AS        'Sub sub Category'
FROM `products` WHERE product_category='1'

store your sub categories and sub sub categories in other tables and in product table just     store their id's and then utilize the above query for the product with cate name and sub name 
and for sub categories of your relevant category you can select from sub cate table 
 SELECT * FROM  subcategory where category_id='$_REQUEST[cat]' 
```

# crystal-reports - 有没有办法从水晶报表版本 11.5.10 中的公式中的数据库备注字段中删除 rtf

> ID：10293663
> 
> 赞同：0
> 
> 时间：2012-04-24T07:36:38.520
> 
> 标签：crystal-reports, rtf

我有一个存储为富文本格式（rtf）的数据库备注字段。我可以将其放入报告中，并将字段格式设置为水晶报告版本 11.5.10 中的 rtf，然后查看没有 rtf 控制字符的文本。但是，我想构建一个水晶报表公式/函数来处理 ascii 文本，那么有没有办法在水晶报表中以编程方式从备忘录字段中去除 rtf 控制字符，这样我就可以只使用 ascii 字符了？

我在 CR 中找不到这样的功能，也找不到通过谷歌搜索解决此问题的方法。

干杯，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T20:16:47.080

你可以试试看这个。
[http://tech.groups.yahoo.com/group/BillQuick/message/937](http://tech.groups.yahoo.com/group/BillQuick/message/937)？

我找到了它并用它来更改/覆盖 RTF 字体设置以打印大文本以便于阅读。它可能被修改为剥离为 ASCII。

干杯，

# jquery - 带有多个句柄的 Jquery UI 滑块返回错误值

> ID：10293665
> 
> 赞同：0
> 
> 时间：2012-04-24T07:36:48.240
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我做了[这个](http://jsfiddle.net/BxY99/255/)例子，所以你可以重现错误：

我在每个手柄的顶部放了一些标签，这样您就可以在移动手柄时看到值，问题是有时它的行为方式很奇怪，例如，如果您拖动一个手柄，比如标签为 15 的手柄，然后您开始左右移动，您会注意到有时当您向左拖动时，它会增加 5 个点（而不是减去），并且所有手柄的这种行为都是相同的。

我几乎被困在这里，我的用户界面无法处理这个错误:(

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:48:23.573

它不添加点，在您开始滑动后会触发滑块标签，因此第一次滑动该功能不会仅触发第二次。

# c# - asp.net 上的多线程

> ID：10293668
> 
> 赞同：1
> 
> 时间：2012-04-24T07:36:59.103
> 
> 标签：c#, asp.net, multithreading

我没有为 asp.net 使用多线程。我有一个将大型临时文件上传到文件夹的 Web 应用程序。我想拿那个临时文件并在它上传后用它做一些其他的事情。我可以在用户不再在网站上的情况下在另一个线程上完成这项工作吗？感谢您的任何帮助或建议。

1.用户发布大文件 2.上传临时到服务器 3.上传完成后。我想运行另一个无需任何用户迭代即可运行但由用户触发的线程/工作者。

```
void uploading(){
//Uploading file To server
}
void Submitclick(){
Start a Thread 
Thread thread = new Thread(DoThreadWork);// does the user still need to be logged in?
Send to another page
}
void DoThreadWork(){Do this in background} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T07:58:53.350

这绝对是可能的，我在 ASP.NET 中使用了相当多的后台线程来做一些时髦的事情。如果您可以完全控制服务器，那么在单独的应用程序或 Windows 服务中运行后台代码可能会更优雅。

让您的 IIS 应用程序仅处理对 Web 请求的响应是一种更好的关注点分离，但它并没有为此做好准备。

还有一个警告，如果您在 ASP.NET 2.0 中有一个后台线程并且它有一个未处理的异常，则默认是重置应用程序池。

更多信息在这里：http: [//blogs.msdn.com/b/tess/archive/2006/04/27/584927.aspx](http://blogs.msdn.com/b/tess/archive/2006/04/27/584927.aspx)

// 3 票否决？

听着，并不总是可以避免在后台线程中运行某些东西。我在几种情况下遇到了这个问题：

*   我曾在一家对软件持不合理态度的公司工作，不允许我们部署单独的应用程序来处理后台处理。我主张使用 Windows 服务，但被否决并被告知在后台线程中实现它。显然，我从那家公司搬到了一个更健康的环境，但事实是，有时你必须处理不合理的情况。
*   如果您在托管环境中，您并不总是可以选择卸载到单独的进程。

问题是这是否可能。我正在回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:44:22.423

如果您想将文件上传与网站用户交互分开，您可以创建一个 Windows 服务，该服务将持续检查文件是否已准备好上传并上传文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T07:43:49.910

您可以为此使用线程池。示例代码依赖于以下链接中的文章：http: [//msdn.microsoft.com/en-us/library/3dasc8as (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/3dasc8as(v=vs.80).aspx)

首先编写完成工作的方法。该方法必须获得 1 个对象类型的参数：

```
 public void DoWork(object threadContext)
 {
 } 
```

然后，在您要调用该方法的代码的位置执行以下操作：

```
 ...
 var threadParam = ... // Put any value you want to be used by the DoWork method
 ThreadPool.QueueUserWorkItem(DoWork, threadParam ); 
```

该方法将排队，直到系统将有空闲线程来处理工作并执行该方法，无论请求是否已结束。

# sencha-touch-2 - Sencha Touch TabPanel 在所有加载的孩子上触发显示事件

> ID：10293669
> 
> 赞同：1
> 
> 时间：2012-04-24T07:37:06.550
> 
> 标签：sencha-touch-2

我有一个带有 4 个列表作为子项的选项卡。当显示每个列表时，我想加载它的数据。当我启动应用程序时，所有 4 个显示事件都会触发，即使只有第一个选项卡处于活动状态。这是应该的吗？我可以使用 tabpanel 的 activeitemchange 来填充列表，但我想将每个列表的代码分开。让 tabpanel 控制它的子项是没有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:52:18.773

还有另一个事件调用“painted”，只要组件实际向用户显示，就会触发。我不知道“表演”和“绘画”之间的区别是什么，但这似乎解决了我的问题。

# javascript - 使用 JavaScript 将查询参数更新为 Flash 对象

> ID：10293673
> 
> 赞同：0
> 
> 时间：2012-04-24T07:37:20.960
> 
> 标签：javascript, html, dom

我为 Flash 嵌入了以下简单对象：

```
<object id="siwp_obj"
        type="application/x-shockwave-flash" 
        data="button.swf?file=%2F/ex.php?id=89804c7326e92a00c5c88c181190af8159cf060b"
        height="32" width="32">
    <param id="siwp_param" name="movie"
           value="button.swf?file=%2F/ex.php?id=89804c7326e92a00c5c88c181190af8159cf060b" />
</object> 
```

我想要做的是用`id`浏览器生成的新 ID 替换参数。

我试过这个，它适用于 Firefox，但不适用于 Chrome 或 IE9。Firefox 成功更新了参数，因此 Flash 对象引用了新 ID，但 Chrome 和 IE9 不更新 ID，或者导致任何脚本错误或警告。

```
var cid = "randomstring";
var obj = document.getElementById('siwp_obj');
// get the "data" attribute which contains the URL with an old id to replace
obj.setAttribute('data', obj.getAttribute('data').replace(/[a-zA-Z0-9]{40}$/, cid));

obj = document.getElementById('siwp_param');
obj.value = obj.value.replace(/[a-zA-Z0-9]{40}$/, cid); 
```

我试图假设没有可用的 javascript 库，因为这将在插件系统中使用。

有没有人对如何动态更新对象和参数标签的 URL 有任何想法？

编辑：

在 Chrome 中，我做了一些调试，注意到参数正在更新，但是当我与 flash 交互时，它并没有重新加载。

例如：

```
var obj = document.getElementById('siwp_obj');
alert(obj.getAttribute('data')); // the old URL with old ID
obj.setAttribute('data', obj.getAttribute('data').replace(/[a-zA-Z0-9]{40}$/, cid));
alert(obj.getAttribute('data')); // the new URL with new ID 
```

...但是当我单击 flash 对象以尝试从新 URL 流式传输时，它仍然引用具有旧 ID 的旧 URL。因此 DOM 正在更新，但浏览器随后丢失了对象的某些参数已更改的事实。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:31:38.333

我相信最好的办法是动态地创建整个元素（而不是在将其加载到页面后将其作为 getElementById() 来处理。

因此，`document.createElement("object");`除了`document.createElement("param")`添加所有属性，然后将`appendChild()`其添加到某个父节点之外……我相信这应该可以工作（尽管我还没有测试过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:48:52.613

我能够通过更新 dom 元素使其工作，然后创建一个克隆并在文档中替换它。

这适用于 IE6+、Firefox 和 Chrome（尚未在任何其他设备中测试）。

```
// update object and param tag with new id
var obj = document.getElementById('siwp_obj');
obj.setAttribute('data', obj.getAttribute('data').replace(/[a-zA-Z0-9]{40}$/, cid));
var par = document.getElementById('siwp_param'); // this was a comment...
par.value = par.value.replace(/[a-zA-Z0-9]{40}$/, cid);

// replace old flash w/ new one using new id
// clone the original object tag and then insert the clone, remove the original
var newObj = obj.cloneNode(true);
obj.parentNode.insertBefore(newObj, obj);
obj.parentNode.removeChild(obj); 
```

# java - 弹簧视图安全

> ID：10293675
> 
> 赞同：1
> 
> 时间：2012-04-24T07:37:30.737
> 
> 标签：java, jsp, spring-mvc, view

是否可以在 Spring 中定义视图命令的类型？就像现在一样，我们更改命令类中的任何内容都是危险的。视图 ( ) 可能会使用这些类的属性`path="myDto.persons[0].name"`，但如果命令类中的任何内容发生更改，视图只会在运行时失败。

我们 MVC 堆栈的所有其他部分都经过测试，因此我们可以在需要时安全地进行重构。唯一的问题是视图，因为路径“只是字符串”，我们不能以任何合理的方式搜索和替换我们使用特定命令的任何地方。

如果有某种方法可以告诉 Spring 该命令实际上是什么类型，那将是一个很大的帮助，因此可以在我们对 .jsp 进行预编译时对其进行验证。编辑视图时还有一个额外的好处是完成，但我想这更像是一个 IDE 问题。

那么，你们中的任何人都知道如何以及是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:55:26.540

如果您完全重新设计您的 JSP 文件（如果我自己这么说的话，这是一种非常丑陋的方式），可能会为您的视图添加类型安全性。

Servlet 为您提供类型安全，因为那是 Java 代码。如果你重构你的类并且遗漏了一些东西，编译器会立即告诉你你错过了它。但是 JSP 将 servlet 替换为一种视图技术，提供了更加动态/快速的开发速度（不再有无休止的`out.write`打开标签、关闭标签、转义引号等指令）。

正如您所注意到的，EL 表达式基本上是字符串，如果出现问题，稍后会对其进行评估并在运行时失败。即使您[预编译 JSP](http://javapapers.com/jsp/how-to-pre-compile-jsp/)，它仍然会失败，因为 EL 在生成的 servlet 中仍然是字符串。它们要么按原样传递给标记并[自行评估](http://tomcat.apache.org/taglibs/standard/apidocs/org/apache/taglibs/standard/lang/support/ExpressionEvaluator.html)，要么如果使用 JSP 2.x 版本，则 servlet 容器本身将表达式包装在评估调用中，然后将其作为值传递。

基本上对于低于 JSP 2 的版本，对于像这样的标签：

```
<my:tag value="${bean.someProp}" /> 
```

你会得到如下结果：

```
myTagInstance.setValue("${bean.someProp}"); 
```

在 servlet 中。

标签本身将在运行时对该字符串进行评估。

对于 JSP 2，您并没有变得更好，评估仍然发生在运行时，但 servlet 容器从标记中消除了这个负担，生成如下代码：

```
myTagInstance.setValue((SomePropTypeCastHere) ProprietaryServletContainerEvaluationUtil.evaluate("${bean.someProp}")); 
```

如果在评估发生时对象本身的内容不是预期的内容，您会得到奇怪的结果或错误。

在 JSP 中强制执行静态类型的唯一方法（我知道）是将 Java 代码带回 JSP 中（发明 EL 是为了消除这种东西）。这就是为什么我在乞求时说你必须以一种丑陋的方式改变你的 JSP。

[如果您的所有标签都可以使用`<rtexprvalue>true</rtexprvalue>`值，那么您可以使用 scriptlet 来强制执行类型安全](http://www.staldal.nu/tech/2009/04/23/type-safe-jsp-and-jstl/)。

像这样的标签：

```
<my:tag value="<%=bean.getSomeProp()%>" /> 
```

现在转换为：

```
myTagInstance.setValue(bean.getSomeProp()); 
```

如果`someProp`属性被重命名、删除、更改类型或其他什么，编译器可以告诉你。IDE 本身应该能够告诉您，您甚至不需要[预编译 JSP](http://javapapers.com/jsp/how-to-pre-compile-jsp/)。

如果我没记错的话，Spring 标签支持运行时表达式，所以这应该可以工作......如果你愿意搞乱你的 JSP，那就是！

至于 IDE 对完成的支持，您对 scriptlet 有支持，但对 EL 没有。那是因为对于 EL，它是相同的讨论，它发生在运行时。IDE 如何在执行 JSP 时知道上下文中的内容（页面、请求、会话等），以及在开发 JSP 时知道这些内容？

# visual-studio-lightswitch - 自定义数据类型？

> ID：10293678
> 
> 赞同：0
> 
> 时间：2012-04-24T07:37:46.450
> 
> 标签：visual-studio-lightswitch

我想在表格设计器中自定义一些数据类型。

这是我想到的：

*   时间跨度
*   Url - 此类型也应该是有效的 URL 并显示为链接

更新，对于`TimeSpan`，我已经使用过`TimeSpan.Ticks`，但我正在寻找一个更好的解决方案，包括自定义显示和验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:31:56.193

[Visual Studio LightSwitch 2011 可扩展性工具包](http://visualstudiogallery.msdn.microsoft.com/0dfaa2eb-3951-49e7-ade7-b9343761e1d2)是开始的地方。

[Luminous LightSwitch Types](http://visualstudiogallery.msdn.microsoft.com/783483a4-3ad4-4831-a01f-bb409fe42085)已经有一个 URL 类型，所以你已经完成了一半。

对于 TimeSpan，您将创建一个`1\. LightSwitch Business Type`. 用作`System.Int64`表示的基础类型`Ticks`。

您将需要阅读有关创建业务类型的示例，该示例应位于 PDF “cookbook” 或[online](http://msdn.microsoft.com/en-us/lightswitch/hh304488)中。

一旦你实现了业务类型，我 95% 肯定你可以指定一个控件，用于编辑 UI 上的值。WP7 和 WPF 中有很多免费的 TimeSpan 选择器控件。您可以将这些解决方案组合成 Silverlight 版本以供 LightSwitch 使用。

[WP7 TimeSpanPicker 深入](http://windowsphonegeek.com/articles/WP7-TimeSpanPicker-in-depth)
[了解 Windows Phone 7](http://blogs.msdn.com/b/stephe/archive/2010/11/29/a-timespanpicker-for-windows-phone-7.aspx?PageIndex=1&PostSortBy=MostComments)
[时间选择器 (WPF)的 TimeSpanPicker](https://marlongrech.wordpress.com/2007/11/18/time-picker/)

ps 请问，如果/当您确实找到 TimeSpan 的解决方案时，我会问一个简单的问题；您可以在线发布内容并在此答案下方的评论中提供链接。社区将不胜感激。:)

# gwt - GWT 可编辑网格：如何动态替换单元格小部件？

> ID：10293681
> 
> 赞同：0
> 
> 时间：2012-04-24T07:38:08.967
> 
> 标签：gwt, grid

我创建了可编辑的网格，在其中添加了所有单元格小部件。现在我想检查一些条件并用另一个单元格小部件替换一个单元格或列。例如，如果我定义了 EditTextCell 列，则基于布尔条件，我必须将该列更改为具有选择单元（组合框）。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:26:10.820

有三种方法可以做到这一点：

1.  将 a`CompositeCell`与 an`EditTextCell`和 a一起使用`SelectionCell`并覆盖 the 的 render 方法以基于您存储在绑定到 Cell 的布尔标志`CompositeCell`来呈现 the`EditTextCell`或 the 。`SelectionCell``DTO`

2.  例如，创建一个自定义单元格扩展`AbstractEditableCell`（请参阅本[教程](http://code.google.com/webtoolkit/doc/latest/DevGuideUiCustomCells.html)）并自己实现该功能。您可以查看[SelectionCell](http://www.google.com/codesearch#A1edwVHBClQ/user/src/com/google/gwt/cell/client/SelectionCell.java&q=SelectionCell%20package%3ahttp://google-web-toolkit%5C.googlecode%5C.com)和[EditTextCell](http://www.google.com/codesearch#A1edwVHBClQ/user/src/com/google/gwt/cell/client/EditTextCell.java)的代码并复制其中的大部分内容。在渲染方法中，您必须显示一个下拉列表或仅显示基于布尔标志的文本。

3.  扩展`EditTextCell`或`SelectionCell`实现缺少的功能。优点是您可能可以重复使用某些渲染方法，而不必自己编写完整的渲染代码。

# python - Django MongoDB，基于其他模型创建模型

> ID：10293690
> 
> 赞同：0
> 
> 时间：2012-04-24T07:38:39.043
> 
> 标签：python, django, mongodb

我有一个模型 Foo，它将有一个字段让我们称之为“parameters_names”。我想保存这个模型，然后用这些 paramaters_names 作为新模型的字段创建一个新模型。

所以例如Foo：

> 参数：“姓名、姓氏、身份证号”

```
NEW MODEL: 
name = CharField()
surname = CharField()
id_number = CharField() 
```

所以新模型可能总是不同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:00:00.027

这个怎么样？

```
model FooParams:
    foo = ForeignKey(Foo)
    param = CharField()
    value = CharField() 
```

# bash - bash 或其他东西：以编程方式更新配置文件？

> ID：10293701
> 
> 赞同：2
> 
> 时间：2012-04-24T07:39:20.130
> 
> 标签：bash, archlinux, rc, daemons

**以编程**方式更新`/etc/rc.conf`配置文件的最佳方法是什么？

 **具体来说，在 Arch linux 机器上，我希望能够以编程方式更新

```
DAEMONS=(syslog-ng network sshd ntpd netfs crond) 
```

到

```
DAEMONS=(syslog-ng network sshd ntpd netfs crond postgresql) 
```

通过 .postgresql 成功安装后`pacman`。

我想我可以编写一个执行以下操作的函数：

```
line="DAEMONS=(syslog-ng network sshd ntpd netfs crond)"

sed -i "/${line}/ s/)/ postgresql)/" /etc/rc.conf 
```

专门处理这个 postgresql 场景。

但是，更进一步，是否有一种更**通用的方法**（如果有可以推荐的库，则使用库）以编程方式在我的文件的参数中包含我的服务（例如`memcached`，或类似任务服务器`zeromq`等） ？`DAEMONS``/etc/rc.conf`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:56:34.727

我不知道通用方式（似乎很少有工具可以对 shell 代码进行任何解析和修改），但是更新像这样的简单数组的一种方法可能是实际读取它，更改它，然后写回整行 - 像这样：

```
source /etc/rc.conf
DAEMONS+=(postgresql)
sed -i -e s/'^DAEMONS=.*'/"DAEMONS=(${DAEMONS[@]})"/ /etc/rc.conf 
```**

# php - 在 php 和 .exe 应用程序之间传递和接收数据。

> ID：10293703
> 
> 赞同：0
> 
> 时间：2012-04-24T07:39:23.937
> 
> 标签：php, .net, vb.net

有一种复杂的情况，我必须将字符串数据传递给 .exe 应用程序，而这个 .exe 应用程序将处理字符串并响应我的 php 数据。关于如何做到这一点的任何线索？我不喜欢使用 TCP/IP 连接。请提出一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:45:35.973

我认为这可以使用“proc_open”来执行。Popen 执行一个命令，然后让您向它发送数据并使用常规 i/o 命令从中读取数据。查看[描述 proc_open 的 php 手册](http://www.php.net/manual/en/function.proc-open.php)以了解详细信息和说明一切的示例。

所以你需要做的：

*   创建命令行
*   将其提供给 proc_open
*   读取exe的输出

祝你好运！

# visual-studio-2010 - MS Visual Studio 2010 错误消息

> ID：10293709
> 
> 赞同：0
> 
> 时间：2012-04-24T07:39:42.883
> 
> 标签：visual-studio-2010, compiler-construction

我花了一整天的时间试图让一个程序正常工作。现在，MS Studio 10 停止编译，出现错误消息，

> 致命错误 LNK1168：无法打开 K:\Continuing Education\CCCCD\COSC1436\Prog10\Debug\Prog10.exe 进行写入

我猜这意味着它在某个地方内存不足。我需要做什么才能让它再次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:43:54.040

可能的原因：

*   您有一个 Prog10.exe 实例正在运行
*   `K:`驱动器已满
*   如果`K:`是网络驱动器，则它已脱机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:43:53.280

确保您对上述目录具有写权限。那是你的项目存储的地方吗？错误消息告诉您它无法写出 exe 文件，这通常意味着该目录的写权限有问题。

# java - For 循环和停止条件

> ID：10293711
> 
> 赞同：-3
> 
> 时间：2012-04-24T07:39:53.687
> 
> 标签：java, loops, for-loop

任何人都可以解释为什么答案是他们想要的吗？第一个我猜是因为已经达到停止条件，所以它跳过了语句，但是问题 13 为什么它不打印 4321？

**12.以下代码产生什么输出：**

```
int n;
for (n = 1; n > 4; n++)
    System.out.print(n); 
```

一）12345

b) 1234

c) 0 ---> for 循环永远不会运行，因为已经满足停止条件。

d) 它不产生任何输出*

**13.以下代码产生什么输出：**

```
int n;
for (n = 4; n > 0; n--);  
    System.out.print(n); 
```

一）43210

b) 4321

c) 0* ---> for 循环后的分号，导致 print 语句在循环结束后运行

d) 它不产生输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:43:48.923

关于问题 13：for 循环后面有一个分号。因此，循环将首先被执行，直到 n 不再 > 0 => 然后它为零。然后，打印将显示一个零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:46:08.797

第一个将不会产生任何输出，因为 for 循环体永远不会运行（假设打印行在 for 循环内）。第二个似乎在 for 循环中什么都不做，只是在循环后打印 n 的值。这将是 0，因为它刚刚未能通过大于 0 的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:53:51.747

在**问题 13**中：

`for (n = 4; n > 0; n--);`

循环直接执行。所以，它只是减少 n 的值，直到它完成执行才进入下一条语句。所以，在它完成执行**之前**，它不会在这里声明。**在执行结束**时 n 的值为 0。所以，当谈到语句

`System.out.print(n);`

n 的值为**0**，因此程序的输出为 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:57:16.160

在问题 13) 中有一个 ; 在 for 循环之后，这意味着程序只执行 (n--) 4 次。结果 n 的值变为 0。

# java - 如何在Android中计算传感器功耗

> ID：10293713
> 
> 赞同：8
> 
> 时间：2012-04-24T07:39:56.687
> 
> 标签：java, android, sensors

[getPower()](http://developer.android.com/reference/android/hardware/Sensor.html#getPower%28%29)以 mA 为单位返回传感器在使用时使用的功率：

现在，我需要计算传感器注册使用了多少电池。

getPower() 返回的值是表示毫安（每小时毫安）还是其他？如果是，有没有办法获取电池 mAH 以计算传感器使用的电池百分比？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:09:59.800

不久前在 Google 群组中讨论了一些非常相关的事情。您可以在[此处找到完整的主题](https://groups.google.com/group/android-developers/browse_thread/thread/6069056189b02d29)以供参考。

该线程中最后一个回复的一小段摘录，应该或多或少地回答你的问题：

> (...) 电池容量总是以 mAH 表示。(...) 重要的是电池可以在其额定电压下提供给定电流多长时间。3800mAH表示可提供3800mA 1小时。知道了这一点，现在 API 提供电流消耗作为功耗指标就很有意义了。您现在可以计算它对电池寿命的影响作为时间的函数。

# php - PHP 数组编号

> ID：10293721
> 
> 赞同：2
> 
> 时间：2012-04-24T07:40:20.840
> 
> 标签：php, arrays

简单的问题，我用以下方式填充了我的数组：

```
$options = range(1, 10); 
```

这将导致：

```
 array
  (
     [0] => 1
     [1] => 2
     etc. etc.
  ) 
```

这不是我想要的结果。。

我需要这样的数组：

```
 array
 (
   [1] => 1
   [2] => 2
   etc.
 ) 
```

如何完成这个简单的任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:44:08.010

也许是这样的：

```
$options = range(0, 10);
unset($options[0]); 
```

[工作示例](http://codepad.org/EgQG8f2D)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T07:41:47.080

```
<?php
for( $i = 1; $i <= 10; $i ++ ) {
   $array[$i] = $i;
} 
```

瞧。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T07:44:18.617

如果你想要一个单行而不是像 Berry 建议的 for 循环，只需使用[array_combine](http://de.php.net/manual/en/function.array-combine.php)：

```
$array = array_combine(range(1,10),range(1,10)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T08:15:50.240

```
function myRange($start, $limit, $step)
{
    $myArr = array();
    foreach((array) range($start, $limit,$step) as $k => $v)
    {
        $myArr[$k+1] = $v;
    }
    return $myArr;
}

print_r(myRange(0, 100, 10));
?> 
```

结果 - - -

```
Array
(
    [1] => 0
    [2] => 10
    [3] => 20
    [4] => 30
    [5] => 40
    [6] => 50
    [7] => 60
    [8] => 70
    [9] => 80
    [10] => 90
    [11] => 100
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T07:52:10.607

或者只是移动数组

```
foreach ( $array as $key => $val )
    $result[ $key+1 ] = $val; 
```

# c# - 使用 ZXing 2.0 C# 端口在 Windows Phone 7.1 上生成二维码

> ID：10293726
> 
> 赞同：1
> 
> 时间：2012-04-24T07:40:40.397
> 
> 标签：c#, windows-phone-7.1, zxing

我在使用 ZXing 2.0 的 mango 7.1 上生成二维码时遇到问题。它应该很简单，但它不起作用。

编码：

```
QRCodeWriter writer = new QRCodeWriter();
var bMatrix = writer.encode("Hey dude, QR FTW!", BarcodeFormat.QR_CODE, 25, 25);
var asBitmap = bMatrix.ToBitmap();            
image1.Source = asBitmap; 
```

image1 来自 xaml。

bMatrix 似乎包含我需要的数据，但 image1 从不显示任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:33:56.343

所以我设法做了一个解决方法。我不确定我的原始代码是否由于 ZXing C# 端口中的错误或我做错了什么而无法工作。无论如何，这是我为显示 QR 码所做的。

image1 来自 xaml。

```
QRCodeWriter writer = new QRCodeWriter();
var bMatrix = writer.encode("Hey dude! QR FTW!", BarcodeFormat.QR_CODE, width, height);

WriteableBitmap wbmi = new System.Windows.Media.Imaging.WriteableBitmap(width, height);

for (int y = 0; y < height; y++)
{
    for (int x = 0; x < width; x++)
    {
        int grayValue = bMatrix.Array[y][x] & 0xff;
        if (grayValue == 0)                        
            wbmi.SetPixel(x, y, Color.FromArgb(255, 0, 0,0));                                                    
         else
             wbmi.SetPixel(x, y, Color.FromArgb(255, 255, 255, 255));
     }
 }
 image1.Source = wbmi; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:39:57.093

尝试像这样设置图像源：

```
image1 = new ImageBrush { ImageSource = asBitmap ;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T22:29:52.523

我遇到了同样的问题。将 WriteableBitmap 直接分配给 Image.Source 不起作用。经过一番搜索，我发现了一个强大的解决方法，它使用 SaveJpeg 方法将 WritableBitap 写入 MemoryStream：

```
 using (MemoryStream ms = new MemoryStream())
    {
        asBitmap.SaveJpeg(ms, (int)asBitmap.PixelWidth, (int)asBitmap.PixelHeight, 0, 100);
        BitmapImage bmp = new BitmapImage();
        bmp.SetSource(ms);
        Image.Source = bmp;
    } 
```

除非 QR 码显示为深/浅蓝色，而不是黑色/白色，否则此方法有效。告诉一位朋友，他记得在 Windows 手机中像素颜色不是字节，而是整数。有了这些知识和 zxing 的来源，我将 ByteMatrix.ToBitmap 方法更改如下：

```
 public WriteableBitmap ToBitmap()
    {
        const int BLACK = 0;
        const int WHITE = -1;
        sbyte[][] array = Array;
        int width = Width;
        int height = Height;
        var pixels = new byte[width*height];

        var bmp = new WriteableBitmap(width, height);

        for (int y = 0; y < height; y++)
        {
            int offset = y*width;
            for (int x = 0; x < width; x++)
            {
                int c = array[y][x] == 0 ? BLACK : WHITE;
                bmp.SetPixel(x, y, c);
            }
        }

        //Return the bitmap
        return bmp;
    } 
```

这完全解决了问题，甚至将 WritableBitmap 直接分配给 Image.Source。看起来，图像已正确分配，但 alpha 值是透明的，在创建 jpeg 时已将其删除。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T06:24:06.530

最简单的解决方案：

```
Uri uri = new Uri("http://www.esponce.com/api/v3/generate?content=" + "your content here" + "&format=png");

image1.Source = new BitmapImage(uri); 
```

# asp.net - 如何从 GetrResponseStream() 中的流阅读器中读取字节 []

> ID：10293727
> 
> 赞同：0
> 
> 时间：2012-04-24T07:40:41.217
> 
> 标签：asp.net, wcf, http

我有一个 WCF 服务返回字节 [] 数据。我如何在客户端读取这些数据

```
using GetrResponseStream();

HttpWebResponse resp = (HttpWebResponse)request.GetResponse();
if (resp.StatusCode == HttpStatusCode.OK)
{
     Stream responseStream = resp.GetResponseStream();
     if (responseStream != null)
     {
         var reader = new StreamReader(responseStream, Encoding.UTF8);
         string dataString = reader.ReadToEnd();
     }
} 
```

使用此代码我得到

```
dataString ={"[255,34,56,778,3,54,6,8,9,90,0,87,6,.....]"} 
```

但我想`byte[]`由那个 WCF 服务返回，即我想要

```
byte[] dataString =[255,34,56,778,3,54,6,8,9,90,0,87,6,.....]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:44:30.327

```
var memoryStream = new MemoryStream();
responseStream.CopyTo(memoryStream);
return memoryStream.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:01:57.233

`StreamReader`主要用于读取文本数据，你可以使用`Stream`类`GetByte`来读取你的响应`byte[]`。请看下面的代码：

```
HttpWebResponse resp = (HttpWebResponse)request.GetResponse();
if (resp.StatusCode == HttpStatusCode.OK)
{
     using (Stream responseStream = resp.GetResponseStream())
     {
          /// you'll have your response in this variable
          var buffer = new byte[responseStream.Length];
          long bytesRemaining = responseStream.Length;
          int bytesRead = 0;

          while (bytesRemaining > 0)
          {
              int readCount = stream.Read(buffer, bytesRead, 1024);

              bytesRead += readCount;
              bytesRemaining -= readCount;
          }
     }
} 
```

# java - 匹配字符串中的 css 边距属性

> ID：10293732
> 
> 赞同：1
> 
> 时间：2012-04-24T07:41:19.513
> 
> 标签：java, regex

我正在用Java编写一个正则表达式，我试图在字符串中的[css“margin：”速记属性](http://www.w3schools.com/css/css_margin.asp)中找到下边距，看看它是否为负。可以使用 1、2、3 或 4 个值指定边距属性，以*px*、*em*或*%*结尾，这些值可能为负数和/或以点开头。值之间用一个或多个空格分隔。到目前为止尝试的是这样的正则表达式：

```
//E.g. style may look like "... margin: 10px 2px" or "... margin: -.10em 1em 2em" etc.
public void findMargin(String style)
{
    Pattern compile = Pattern.compile("margin:\\s*(-?\\.?\\d+(?:em|px|%)\\s*){1,4}");
    Matcher matcher = compile.matcher(style);

    while (matcher.find())
    {
      .....
    }
} 
```

我很难找到提取底边距属性。有人对如何实现这一目标有一些意见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:49:31.153

我倾向于从单个组中获取整个属性，然后进行简单的字符串拆分以获取各个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:01:53.937

也许更冗长，但也更具可读性？

```
 // sample input string
    String style = "...margin: -.10px 1px 2px;...";        

    // pre-compile patterns
    Pattern marginPattern = Pattern.compile("margin:([^;]+);");
    Pattern valuePattern = Pattern.compile("([\\-\\.\\d]+)(em|px|%)");

    // first step, find margin property...
    Matcher marginMatcher = marginPattern.matcher(style);
    while (marginMatcher.find()) {
        // second step, extract individual numeric values
        String marginPropertyValue = marginMatcher.group(1).trim();
        Matcher valueMatcher = valuePattern.matcher(marginPropertyValue);
        while (valueMatcher.find()) {
            String number = valueMatcher.group(1);
            String unit = valueMatcher.group(2);
            doSomethingWith(number, unit);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:45:33.127

这是我编写的用于从 css 边距速记属性中查找底部边距的代码：

```
 Pattern compile1 = Pattern.compile("margin:\\s*((-?\\.?\\d+(?:em|px|%)\\s*){1,4})");
    Matcher matcher1 = compile1.matcher(style);

    if (matcher1.find())
    {
        String[] split = matcher1.group(1).trim().split("\\s+");
        String marginBottom;

        if (split.length < 3)
        {
            marginBottom = split[0];
        } else
        {
            marginBottom = split[2];
        }

        if (marginBottom.contains("-"))
        {
            System.err.println("Bottom margin is negative "  + marginBottom);
        }
    } 
```

# wpf - 无法命令将切换按钮绑定为控件模板

> ID：10293737
> 
> 赞同：0
> 
> 时间：2012-04-24T07:41:44.477
> 
> 标签：wpf, templates, xaml, mvvm

这是代码：

```
 <Window.DataContext>
    <local:MainWindowViewModel />
</Window.DataContext>

<Window.Resources>

    <Style x:Key="RadioToggleButtonStyle" TargetType="RadioButton">
        <Setter Property="SnapsToDevicePixels" Value="true" />
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RadioButton}">
                    <ToggleButton Content="{Binding Content, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" IsChecked="{Binding IsChecked, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Width" Value="150" />
        <Setter Property="Height" Value="25" />
        <Setter Property="VerticalAlignment" Value="Center" />
    </Style>

</Window.Resources>

<Grid>
    <RadioButton Name="radioButton1"
                 Height="29"
                 Margin="193,195,0,0"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Top"
                 **Command="{Binding Path=RadioClickCommand}"**
                 Content="RadioButton"
                 Style="{StaticResource RadioToggleButtonStyle}" />

</Grid> 
```

在 MainWindowViewModel ：我有以下命令注册

```
 public ICommand RadioClickCommand
    {
        get { return new RelayCommand(RadioClickExecute); }
    }
 private void RadioClickExecute()
    {

    } 
```

按钮单击永远不会触发命令绑定。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T08:08:45.437

您忘记了您必须定义 a `Command`of a`ToggleButton`

```
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type RadioButton}">
            <ToggleButton Content="{Binding Content, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" IsChecked="{Binding IsChecked, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                          Command="{Binding Command, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"/>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

# slider - CRM 2011 - 仪表板幻灯片放映在电视上

> ID：10293746
> 
> 赞同：3
> 
> 时间：2012-04-24T07:42:21.317
> 
> 标签：slider, dynamics-crm-2011, crm, dashboard

我的客户希望对 CRM 中的所有“仪表板”进行“幻灯片放映”。他希望能够将电视挂起来，然后展示带有一些“仪表板”的幻灯片，这些“仪表板”每 10 秒就会改变一次。数据需要是最新的，因此截取屏幕截图并将它们放入 Powerpoint 是不够的。我在考虑以下问题：

*   创建一个带有 iframe 的自定义页面，并每 10 秒更新一次 iframe，其中包含一个新的“仪表板”。我知道您可以执行以下操作 => /OrganizationName/dashboards/dashboard.aspx?dashboardId=%7b16a69a12-105a-e011-bd7f-000c29198df7%7d&dashboardType=1030&pagemode=iframe，但是我无法找到 ID。“右键”单击视图时的“复制链接”功能不再存在。
*   我记得在 CRM 的“技术日”中，有可能立即连接到“报告”服务器以显示“仪表板”……或者“数据库”中是否有一个表格，其中包含所有“仪表板的名称”+“ID”？？我好像在数据库中找不到它...

你们如何在电视上制作一个很酷的“仪表板”幻灯片（PC 连接到电视就是我的意思）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:22:41.750

我的办公楼有几个屏幕显示来自 CRM 的仪表板，主要是服务台/呼叫中心统计数据。

我使用[这种“复制链接”方法](http://gonzaloruizcrm.blogspot.co.uk/2012/02/display-full-screen-dashboards-with.html)来获取全屏仪表板的 URL（没有任何侧边栏），然后我为 IE 安装了一个插件/扩展程序，以自动刷新并循环浏览各种仪表板选项卡（不记得它叫什么，但如果你谷歌我相信你会找到它）。这始终是最新的并创建幻灯片效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:15:35.243

系统仪表板是系统表单，个人仪表板是用户表单，因此可以分别从 dbo.SystemFormBase 和 dbo.UserFormBase 表中检索。

如果共享任何个人仪表板，则可以从 PrincipalObjectAccess 表中检索该详细信息。

使用下面的 sp 来检索特定用户的仪表板 ID、名称和类型。

创建 PROCEDURE [dbo].[GetDashboardIds] (@SystemUserID uniqueidentifier)
作为 BEGIN

从 dbo.SystemFormBase 中选择 FormId 作为“DashboardID”，将名称作为“名称”，将“系统”作为 DashboardType，其中 Type = 0

联盟

从 dbo.UserFormBase 中选择 UserFormId 作为“DashboardID”，将名称作为“名称”，将“自定义”作为 DashboardType，其中 Type = 0 和 OwnerId = @systemUserID

联盟

从 dbo.UserFormBase UFB 中选择 UserFormId 作为“DashboardID”，将“名称”作为“名称”，将“自定义”作为 DashboardType 在 UFB.UserFormId = ObjectId 上加入 PrincipalObjectAccess POA，其中 Type = 0 和 POA.PrincipalId = @systemUserID

结尾

快乐编码

# sql - 删除sql查询非常非常慢

> ID：10293747
> 
> 赞同：1
> 
> 时间：2012-04-24T07:42:34.097
> 
> 标签：sql, ruby, sql-delete

我有一个小问题；我有 2 张桌子： `events`和`multimedia`. `events`有

```
id, 
device_id
created_at field 
```

主键是 id，并且有一个由`device_id`and`created_at`字段形成的索引。

`multimedia`表有以下字段：

```
id
device_id
created_at
data (this field is a blob field and contains a 20k string) 
```

主键是 id 并且有一个由`device_id`and`created_by`字段形成的索引。

问题是当我想`created_at`在数据之前删除记录时。

查询：

```
DELETE FROM events WHERE device_id = #{dev[0]} 
AND created_at <= '#{mm_critical_time.to_s}' 
```

没关系。在 5 或 6 秒`delete`内记录。

查询

```
DELETE FROM multimedia WHERE device_id = #{dev[0]} 
AND created_at <= '#{mm_critical_time.to_s}' 
```

给我一些问题，执行开始并且永远不会完成。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:52:24.697

您可能需要为要搜索的列创建索引。

```
CREATE INDEX device_created_index
ON multimedia (device_id, created_at); 
```

如果您想了解有关优化查询的更多信息，请参阅我在此处给出的关于使用 EXPLAIN SELECT 的答案：[是否有更好的方法来执行这些 mysql 查询？](https://stackoverflow.com/questions/8180902/is-there-better-way-to-do-these-mysql-queries/8181591#8181591)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:04:44.613

在不了解*整个故事*的情况下为关系数据库中的性能问题提供解决方案是非常幼稚的，因为其中涉及许多变量。

但是，对于您提供的数据，我建议您删除主键和索引并运行：

```
CREATE UNIQUE CLUSTERED INDEX uc ON events (device_id, created_at);
CREATE UNIQUE CLUSTERED INDEX uc ON multimedia (device_id, created_at); 
```

如果确实需要强制执行`id`字段的唯一性，请在每个表上为该列创建一个唯一的非聚集索引（但这会导致删除命令消耗更多时间）：

```
CREATE UNIQUE INDEX ix_id ON events (id);
CREATE UNIQUE INDEX ix_id ON multimedia (id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:11:03.713

条件的顺序很重要，您还没有告诉我们您的数据库服务器，但至少在 Oracle 中是这样，因此请尝试将它们颠倒过来

```
DELETE FROM multimedia WHERE 
created_at <= '#{mm_critical_time.to_s}' 
AND device_id = #{dev[0]} 
```

或者我们在最快的部分进行内部查询

```
DELETE FROM multimedia WHERE 
created_at <= '#{mm_critical_time.to_s}' 
AND device_id in (select device_id from multimedia where device_id = #{dev[0]}) 
```

此外，我总是打破慢查询并测试速度部分，以便您知道瓶颈在哪里。一些程序向您显示查询花费了多长时间，并且在 Ruby 中您可以使用基准测试，您可以在测试时使用选择来补充删除。

所以测试：

```
select * FROM multimedia WHERE created_at <= '#{mm_critical_time.to_s}' 
```

和

```
select * from multimedia WHERE device_id = #{dev[0]} 
```

成功..

# java - 如何添加地图 > 在实体类中？

> ID：10293758
> 
> 赞同：2
> 
> 时间：2012-04-24T07:43:24.180
> 
> 标签：java, oracle, jpa, jpa-2.0, eclipselink

我想添加一个映射

```
Map<String, List<String>> attributes; 
```

我已经`@MapKeyColumn`在其他情况下使用过，但是在这里我确实有一个键/值表，其中一个键可能会出现多次。

你会如何解决这个问题？这种问题域是否有任何（JPA 内置）解决方案？

谢谢您的答复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:39:06.607

没有直接的方法。您需要创建一个类来表示关联或在 get/set 方法中执行某种转换。

看，

[http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Nested_Collections.2C_Maps_and_Matrices](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Nested_Collections.2C_Maps_and_Matrices)

# delphi - 输出纯源代码

> ID：10293759
> 
> 赞同：0
> 
> 时间：2012-04-24T07:43:26.650
> 
> 标签：delphi, reverse-engineering, decompiling, disassembly

我有一个应用程序，每次执行特定操作时都会吐出相同的错误：

```
Exception EListError in module foo.exe at 000277CF.

List index out of bounds(0)
(Physical address: XXXXXXX) 
```

作为一名程序员，如果有一种方法可以打开它并向开发人员查明错误的来源，我会喜欢它。

那可能吗？我知道这种语言，它是 .NET 和一些旧的 Delphi 代码的混合体。

有人想指出我正确的方向吗？教程？要使用的程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:37:13.330

异常似乎表明哪个可执行文件是 delphi 应用程序，现在[`EListError`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.EListError)不可能从 Delphi Win32 应用程序中检索原始源代码，因为变量名、方法、参数和附加元素被转换为内存地址并在可执行文件时丢失创建的。因此无法重新创建原始代码。

你最好的选择是使用像[IDA](http://www.hex-rays.com/products/ida/index.shtml)这样的反编译器来反汇编和调试 exe 并确定问题的位置，然后你可以创建一个补丁来修复它，但是这个任务并不容易，需要大量关于[pe 结构](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)的知识，内存地址位置和汇编。

此外，在您的问题中，您提到了应用程序混合了 .net 代码和 delphi 代码的可能性，如果是这种情况，您可以使用[反射器](http://www.reflector.net/)或[Telerik JustDecompile](http://www.telerik.com/products/decompiler.aspx)来检索原始源代码。

# xcode - Xcode 和 Git 源代码控制：“工作副本 XXXXX 未能提交文件”

> ID：10293765
> 
> 赞同：5
> 
> 时间：2012-04-24T07:43:42.073
> 
> 标签：xcode, git, commit

我知道这可能是一个超新手的问题，但是——尽管我已经编码了 18 年——我在我的项目中使用源代码控制才几天，我感到很失落。

我已经正确设置了**Git**，并且不时地提交更改。

`(File -> Source Control -> Commit)`

**然而 ：**

每当我尝试删除一个文件（最初存在的）然后提交更改时，我都会收到如下错误：

> **工作副本“MY_COPY_NAME”未能提交文件**
> 
> 致命：无法切换到“/the/path/of/the/file/i/just/deleted”：没有这样的文件或目录

这是怎么回事？

即使在文件被删除后，我应该怎么做才能提交更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:53:02.767

你应该跑

```
git add -u your_file 
```

-u 表示您要更新已添加的文件。另一种可能是

```
git rm your_file 
```

如果 Git 没有找到不存在的，你很可能会得到一个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T05:32:33.427

要修复上述错误，您应该使用以下代码行：

1.  打开命令行【终端】，输入以下两条命令：

> ```
> xcrun git config --global user.email your@Email.com
> 
> xcrun git config --global user.name "Enter Your Name" 
> ```

# facebook - Facebook 中的应用是否可以仅向使用该应用的用户发布通知？

> ID：10293773
> 
> 赞同：0
> 
> 时间：2012-04-24T07:44:13.687
> 
> 标签：facebook

我有一个不是 Facebook 独有的应用程序。它也（将要）在 iPhone 和 Android 上可用。

这是一个社交应用程序，因此，例如，Android 用户会邀请朋友加入，然后他们会在他们之间来回发送信息。

在我的 Facebook 界面中，我希望他们能够做同样的事情，但通过 Facebook 通知系统。当用户在他们的系统中进行某些更改时，会显示在他们的墙上。

问题是，由于我的应用程序的性质——只有亲密的朋友才会想要彼此做——我不希望该通知出现在 Facebook 上的所有用户朋友面前。它应该只出现在也注册了我的应用程序的其他人身上。

我在概念化这将如何工作时遇到了一些麻烦。在我看来，大多数应用程序都会向所有朋友广播，然后这些朋友可以隐藏或不隐藏通知。充其量，似乎可以发出警告说“用户 X 已对应用程序 Y 进行了更改”，然后使用该应用程序的用户可以进入其特定界面并发现特定更改（这对于我想要做）。

我可以让它以通知和墙贴的形式仅显示给我的应用程序空间内的人吗？如果是这样，怎么做？

*（如果有什么不同，我的应用程序是带有 PHP 后端的 Javascript。另外，我不是使用 Facebook 的专家，所以请以新手可以掌握的方式回答。谢谢！）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:49:22.153

[社交渠道](http://developers.facebook.com/docs/channels/)文档中介绍了用于联系使用您的应用程序的人和他们的朋友的不同选项。

至于只联系正在使用该应用程序的用户朋友，您有两种选择：

(1) 使用[graph api](http://developers.facebook.com/docs/reference/api/)，您可以向*[/me/friends?fields=installed](http://developers.facebook.com/tools/explorer?method=GET&path=me/friends%3Ffields%3Dinstalled)*发出请求，该请求应返回用户列表，安装了该应用程序的用户将具有以下形式：

```
{
    "installed": true, 
    "id": "USER_ID"
} 
```

没有该应用程序的将是这种形式：

```
{
    "id": "USER_ID"
} 
```

(2) 您可以使用[FQL](http://developers.facebook.com/docs/reference/fql/user/)来检查谁是使用[此查询](https://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20uid%20FROM%20user%20WHERE%20not%20is_app_user%20and%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29)安装应用程序的朋友：

```
SELECT 
    uid
FROM 
    user 
WHERE 
    is_app_user 
    AND 
    uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

# python - 在 Meteor 运行时，如何从另一个客户端访问 Meteor 的 MongoDB？

> ID：10293781
> 
> 赞同：55
> 
> 时间：2012-04-24T07:44:31.700
> 
> 标签：python, mongodb, meteor

我想**在 Meteor 运行时**从 Python 客户端访问 Meteor 的 MongoDB 。

我无法启动 mongod，因为 Meteor 的数据库已锁定。

如何从另一个客户端访问数据库？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-24T21:55:22.033

该`meteor`命令提供了一种干净的方式。要获取正在运行的 mongod 的 URL：

```
meteor mongo -U 
```

您可以从 python 解析。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-24T16:43:10.357

运行命令时，Meteor 在 3002 端口为您启动 mongod `meteor`，并将 mongo 数据文件存储在`.meteor/local/db`

输出`ps aux | grep 'mongod'`显示了流星使用的 mongod 命令：

```
/usr/local/meteor/mongodb/bin/mongod --bind_ip 127.0.0.1 --smallfiles --port 3002 --dbpath /path/to/your/project/.meteor/local/db 
```

因此，只需相应地连接您的 mongo 客户端。在蟒蛇中：

```
>>> import pymongo
>>> con = pymongo.Connection(host='127.0.0.1', port=3002)
>>> con.database_names()
[u'meteor', u'local'] 
```

更新：不幸的是，以这种方式直接在 mongo 中进行更改不会反映在应用程序中，但更改将反映在整个页面（重新）加载中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-24T08:16:57.627

使用[Meteor 部署说明](http://docs.meteor.com/#deploying)

该命令将如下所示：

```
 PORT=3000 MONGO_URL=mongodb://localhost:27017/myapp node bundle/main.js 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-14T12:22:04.980

您还可以使用以下方法从服务器端代码中找到它：

```
process.env.MONGO_URL 
```

即使您在运行时没有设置此环境变量，它也会被设置为默认值。这似乎是在内部找到它的方式（packages/mongo/remote_collection_driver.js）

给出的一个`meteor mongo -U`似乎重建了默认域/ip 和 db-name，但使用存储在文件中的端口。

您可以将它放在服务器文件夹中的任何位置，然后从命令行读取它。

```
console.log('db url: ' + process.env.MONGO_URL); 
```

我设置了一个网页来显示它，以仔细检查我们正在使用测试数据库的硒测试，而不是覆盖实时数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-15T21:04:29.697

这里有一个用于获取 Mongo URI 和 Mongo 数据库的 shell 脚本：

```
#!/bin/bash -eux

read -s -p "Enter Password: " password

cmd=$(meteor mongo --url myapp.meteor.com << ENDPASS
$password
ENDPASS)
mongo_uri=$(echo $cmd | cut -f2 -d" ")
mongo_db=$(echo $mongo_uri | cut -d/ -f 4)

#my_client_command_with MONGODB_URI=$mongo_uri MONGO_DB=$mongo_db 
```

````

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-18T04:06:01.677

关于更新延迟 10 秒：跟踪 MongoDB oplog！有关如何在此处执行此操作的更多信息：

[http://meteorhacks.com/lets-scale-meteor.html](http://meteorhacks.com/lets-scale-meteor.html)

确保您安装了智能集合并使用它们（使用 Meteor.SmartCollection 而不是 Meteor.Collection 实例化您的集合），您会发现更新基本上是即时的。

# c# - 如何使用运行时生成的动态数据表创建通用 rdlc 模板？

> ID：10293788
> 
> 赞同：1
> 
> 时间：2012-04-24T07:45:20.020
> 
> 标签：c#, .net, dynamic, rdlc, dynamic-rdlc-generation

我的解决方案中有一份`rdlc`报告。我想`datasource`用运行时生成的数据表设置报表。我怎样才能做到这一点？

我没有使用任何 xsd 文件来设计报告。我只想在报表上显示数据库中的数据表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-17T06:49:39.137

[试试这个链接。](http://www.mindstick.com/Articles/13169999-ef3b-496c-b502-caef973c3bb2/Using%20ReportViewer%20in%20WinForms%20C)

在链接中，您将看到一个类已添加到应用程序中，并用作数据源。您可以根据需要添加任意数量的数据源。您还可以在一份 RDLC 报告中添加多个 DataSource。

# php - 用 CSV 文件进行字符转换

> ID：10293795
> 
> 赞同：0
> 
> 时间：2012-04-24T07:45:38.820
> 
> 标签：php, csv, character

每当使用 PHP 导出 CSV 文件时，我都会遇到问题。我有一个 MYSQL 查询，例如

```
SELECT `interest_id`,`interest_name`,`interested_user_id` FROM `interest_list` WHERE `interest_name` LIKE '%fashion%' 
```

但是每当我试图通过使用上面的 MySQL Query 导出一个 PHP 文件时，我的查询就会转向

```
SELECT `interest_id`,`interest_name`,`interested_user_id` FROM `interest_list` WHERE `interest_name` LIKE 'úshion%' 
```

所以它不返回任何记录。请告诉我如何解决这个问题。在导出文件中，我编写了如下代码：

```
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv');
$output = fopen('php://output', 'w');

//executed code

fputcsv($output, $blankArray); 
```

现在请帮助我。

实际上，我在一个文件中进行查询，例如：

```
$search_sql = "SELECT `interest_id`,`interest_name`,`interested_user_id` FROM `interest_list`";

    if(isset($_REQUEST['search_user_btn'])){

        if($_REQUEST['search_intr'] != '')
$search_sql .= " WHERE `interest_name` LIKE '%".$_REQUEST['search_intr']."%' ";

    } 
```

然后在同一个文件中我这样写：

```
<a href="export.php?report=interest&qur=<?php echo $search_sql; ?>"><button>Export to CSV</button></a> 
```

最后在export.php

```
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv');
$output = fopen('php://output', 'w'); 
```

我正在尝试获取 $_REQUEST['qur'] 的值。但是无法得到$_REQUEST['qur']的原始值。

我认为现在它是有道理的。请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:03:31.540

您不能在 URL 中插入随机字符串，因为 URL 中有一些具有特殊含义的字符。[在 PHP 中，您可以使用rawurlencode()](http://php.net/rawurlencode)对 URL 参数的值进行编码。同样，出于同样的原因，您不能在 HTML 字符串中插入随机字符。

```
<?php

$url = 'export.php?report=interest&qur=' = rawurlencode($search_sql);

?>
<a href="<?=htmlspecialchars($url)?>"><button>Export to CSV</button></a> 
```

不管怎样，在 URL 中传递 SQL 就是为了被黑客入侵。

# java - Window.open() 空白窗口

> ID：10293796
> 
> 赞同：0
> 
> 时间：2012-04-24T07:45:44.573
> 
> 标签：java, gwt

早上好，我在 GWT 中开发了一个应用程序。我在我的代码中包含了以下行：

```
Window.open("file:///"+result, "download_file", ""); 
```

但是，当窗口打开时，这是一个空白窗口，如图：

![在此处输入图像描述](../Images/62da8e1cf34551cee4e0101b693c5b14.png)

我检查结果是否包含文件的路径和名称。问题可能是什么？

# android - 安卓实时消息

> ID：10293799
> 
> 赞同：4
> 
> 时间：2012-04-24T07:45:55.693
> 
> 标签：android, client-server, real-time-data

我正在尝试开发 aap。在 android 中，它的行为类似于客户端/服务器架构。我的应用程序将消息传递给服务器以路由到指定的客户端..

我听说这可以通过实时消息传递客户端来完成。

我只需要传递基于文本的数据。没有音频/视频流

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:49:20.593

您可以阅读 XMPP：
[http ://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)
[http://xmpp.org/](http://xmpp.org/)

有适用于Android的客户端api，我个人使用过asmack：
[http ://code.google.com/p/asmack/](http://code.google.com/p/asmack/)

# r - 如何摆脱或更改密度图中的默认轴标签和/或标题？

> ID：10293801
> 
> 赞同：6
> 
> 时间：2012-04-24T07:46:02.657
> 
> 标签：r, label, subtitle

我想知道，如何在 R 的密度图中更改“默认”x 标签（或字幕）。例如，我不想打开这个文本“N = ...，带宽 = ...”情节（我不知道是x-label还是subtitle，但它通常出现在x-axis下）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T07:56:06.220

您应该只使用标准绘图参数来更改标签：

```
plot(density(rnorm(10)), 
     xlab="X", #Change the x-axis label
     ylab="Density", #y-axis label
     main="A nice title")#Main title 
```

请参阅绘图帮助页面：`?plot`和[文档](http://cran.r-project.org/doc/manuals/R-intro.html#High_002dlevel-plotting-commands)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-15T20:29:11.560

要获取它们的肋骨，只需将它们指定为 NA

```
plot(density(rnorm(10)), 
xlab=NA, #Change the x-axis label
ylab=NA, #y-axis label
main=NA) #Main title 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-05-30T09:20:59.760

在绘图函数中放置**ann=FALSE** 或在单独的 par 函数中

# mysql - MySQL INFORMATION_SCHEMA 表未填充

> ID：10293804
> 
> 赞同：2
> 
> 时间：2012-04-24T07:46:12.780
> 
> 标签：mysql, innodb

我创建了一个虚拟表：

```
CREATE TABLE `lock_test` (
  `name` varchar(32) NOT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB ; 
```

我锁定它：

```
LOCK TABLE lock_test write; 
```

然后我尝试再次锁定它（相同的查询）。第二个锁定请求显然只是挂在那里。

```
select * from INFORMATION_SCHEMA.INNODB_LOCKS;
select * from INFORMATION_SCHEMA.INNODB_LOCK_WAITS; 
```

都是空的（返回零结果） - 我本来希望它们被填充。我有`PROCESS`权限（显示`PROCESSLIST`锁工作）。

我对这些桌子有完全错误的看法吗？Information Schema 插件和 InnoDB 引擎肯定已安装（通过运行 SHOW PLUGINS 进行检查；）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:19:50.697

有趣的是 - “问题”是我试图直接锁定表两次，这似乎没有填充该表。我将其更改为两个相互干扰的事务，它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T00:42:27.490

你有`autocommit = 1`吗？如果是，这就是原因。有两种类型的锁，在不同的层采取，一种在 MySQL 层，一种在存储引擎 (InnoDB) 层。

来自 MySQL 文档，[表锁定和事务的交互](http://dev.mysql.com/doc/refman/5.5/en/lock-tables-and-transactions.html)：

> 当您调用 时`LOCK TABLES`，InnoDB 内部会使用自己的表锁，而 MySQL 会使用自己的表锁。InnoDB 在下一次提交时释放它的内部表锁，但是要让 MySQL 释放它的表锁，你必须调用`UNLOCK TABLES`. 您不应该有`autocommit = 1`，因为**InnoDB 在调用 后立即释放其内部表锁`LOCK TABLES`**，并且很容易发生死锁。InnoDB 根本不获取内部表锁`autocommit = 1`，以帮助旧应用程序避免不必要的死锁。

还要检查这部分文档（最后 2 段）：[InnoDB 中不同 SQL 语句设置的锁](http://dev.mysql.com/doc/refman/5.5/en/innodb-locks-set.html)：

> `LOCK TABLES`设置表锁，但设置这些锁的是 InnoDB 层之上的更高 MySQL 层。**InnoDB 知道表锁 if** `innodb_table_locks = 1`（默认） 和`autocommit = 0`，并且 InnoDB 上面的 MySQL 层知道行级锁。

# c++ - C++ const cast，不确定这是否安全

> ID：10293805
> 
> 赞同：7
> 
> 时间：2012-04-24T07:46:16.353
> 
> 标签：c++, const-cast

这似乎是一个愚蠢的问题，但我真的需要澄清这一点：

这会给我的程序带来任何危险吗？

`const_cast`甚至需要吗？

如果我更改输入指针值，它将安全地工作`std::string`还是会产生未定义的行为？

到目前为止，唯一担心的是，每当我修改输入指针并使其无法使用时，这可能会影响字符串“some_text”。

```
std::string some_text = "Text with some input";

char * input = const_cast<char*>(some_text.c_str()); 
```

感谢您给我一些提示，我想避免在我自己的脚上射击

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T08:02:03.567

作为邪恶行为的一个例子：与 gcc 的 Copy On Write 实现的交互。

```
#include <string>
#include <iostream>

int main() {
    std::string const original = "Hello, World!";
    std::string copy = original;

    char* c = const_cast<char*>(copy.c_str());
    c[0] = 'J';

    std::cout << original << "\n";
} 
```

在[ideone](http://ideone.com/AezP2)行动。

> 果冻，世界！

问题 ？顾名思义，gcc 的实现在底层`std::string`使用了一个引用计数的共享缓冲区。当一个字符串被修改时，实现会巧妙地检查当前缓冲区是否被共享，如果是，则在修改之前复制它，确保共享该缓冲区的其他字符串不受新写入的影响（因此名称，写时复制）。

现在，使用您的邪恶程序，您通过 const 方法访问共享缓冲区（承诺不修改任何内容），但您确实修改了它！

请注意，对于不使用写时复制的 MSVC 实现，行为会有所不同（`"Hello, World!"`将正确打印）。

这正是**Undefined Behavior**的本质。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T07:48:16.710

使用**Undefined Behavior**`const`通过抛弃它的常量来修改一个固有的对象。 `const_cast`

 ****[string::c_str()](http://www.cplusplus.com/reference/string/string/c_str/)**返回 a`const char *`，即：指向常量 c 样式字符串的指针。从技术上讲，修改它会导致未定义的行为。

请注意，`const_cast`当您有一个`const`指向非常量数据的指针并且您希望修改非常量数据时，使用 。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T07:54:10.950

简单的强制转换不会带来未定义的行为。然而，修改指向的数据将会。（[另见 ISO 14882:98 5.2.7-7](http://www.kuzbass.ru:8086/docs/isocpp/expr.html#expr.const.cast)）。

如果你想要一个指向可修改数据的指针，你可以有一个

```
std::vector<char> wtf(str.begin(), str.end());
char* lol= &wtf[0]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T07:52:03.680

内部`std::string`管理它自己的内存，这就是为什么它直接返回一个指向该内存的指针，就像它对`c_str()`函数所做的那样。它确保它是恒定的，以便您的编译器在您尝试修改它时会警告您。

以这种方式使用 const_cast 从字面上消除了这种安全性，并且如果您绝对确定不会修改内存，那么这只是一种可以接受的做法。

如果你不能保证这一点，那么你必须复制字符串并使用副本。; 在任何情况下这样做肯定会更安全（您可以使用`strcpy`）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-24T07:52:05.830

请参阅[C++ 参考](http://www.cplusplus.com/reference/string/string/c_str/)网站：

```
const char* c_str ( ) const; 
```

“生成一个以空字符结尾的字符序列（c-string），其内容与字符串对象相同，并将其作为指向字符数组的指针返回。

自动附加终止空字符。

返回的数组指向一个内部位置，该位置具有该字符序列所需的存储空间以及它的终止空字符，但是该数组中的值不应在程序中修改，并且只能保证在下一次调用之前保持不变字符串对象的非常量成员函数。”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-24T07:51:35.197

是的，它会带来危险，因为

1.  `input`指向`c_str`现在发生的任何事情，但如果`some_text`发生变化或消失，您将留下一个指向垃圾的指针。的值`c_str`保证只有在字符串不改变时才有效。甚至，正式地，只有在你不调用`c_str()`其他字符串的情况下。
2.  为什么你需要抛弃 const？你不打算写信给`*input`，是吗？这是一个禁忌！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-24T07:55:55.190

这是一件非常糟糕的事情。看看 std::string::c_str()[做](http://www.cplusplus.com/reference/string/string/c_str/)了什么并同意我的看法。

其次，考虑为什么要对 std::string 的内部进行非常量访问。显然您想修改内容，否则您将使用 const char 指针。您还担心您不想更改原始字符串。为什么不写

```
std::string input( some_text ); 
```

然后你有一个 std::string 可以在不影响原始文件的情况下搞乱，并且你有 std::string 功能，而不必使用原始 C++ 指针......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-24T08:02:16.247

另一个问题是它使代码极难维护。举个例子：几年前，我不得不重构一些包含长函数的代码。作者编写了函数签名来接受 const 参数，但随后`const_cast`在函数中使用它们以删除 const 性。这破坏了函数给出的隐含保证，并且很难知道参数是否在代码主体的其余部分中发生了变化。

简而言之，如果您可以控制字符串并且您认为需要更改它，请首先将其设为非 const。如果你不这样做，那么你将不得不复制并使用它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-24T08:39:10.083

它是UB。例如，您可以这样做：

```
size_t const size = (sizeof(int) == 4 ? 1024 : 2048);
int arr[size]; 
```

没有任何强制转换，编译器不会报告错误。但是这个代码是非法的。士气是您每次都需要考虑采取行动。**

# actionscript-3 - AS3：通过 AS3 更改动画影片剪辑的子影片剪辑

> ID：10293806
> 
> 赞同：0
> 
> 时间：2012-04-24T07:46:16.410
> 
> 标签：actionscript-3, flash, animation, mmo

我有一个具有不同身体部位的角色：头发、头部、身体、手臂、腿。我用行走动画和站立动画为角色设置了动画。我在每个动画中为角色的头发指定了一个头发实例名称，因此我可以通过 AS3 访问它。假设我有一个不同的影片剪辑，它是不同类型头发的静态图像。我希望能够使用 AS3 将角色的头发更改为那个头发。

实例：模型 = 持有者影片剪辑中的动画影片剪辑。头发 = 模型的孩子，但是是动画的

类：Anim = holdermovieclip（用于更改参考点和调整大小） Hair2 我想将头发更改为 Hair2 的一个实例

anim.model.hair = new Hair2();

当我跟踪它时，它显示对象已更改，但在显示时并未更改。我正在使用 AS3IsoLib，所以这是一个示例代码：

```
var anim = new Anim();
var hair2 = new Hair2();
anim.model.hair = hair2;
sprites = [anim]; 
```

我测试了缩放头发，效果很好，但没有替换实例本身。

我想知道我怎么能做到这一点。如果你玩过一些 MMO 游戏，用户可以选择修改他或她的身体部位。Adventure Quest Worlds 就是一个例子。这就是我想要达到的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:20:35.557

AS2 语法相当混乱：设置`anim.model.hair`实际上没有任何意义。以下是您应该如何编写它：

```
//keep a reference for the previous hair
var previousHair:MovieClip = anim.model.hair;
//copy position, rotation, scale
hair2.transform.matrix = previousHair.transform.matrix.clone(); 
//remove the previous hair from model
anim.model.removeChild(previousHair);
//put the new hair in place
anim.model.addChild(hair2);
//give a new instance name to hair2 so you can access it through anim.model.hair
hair2.name = "hair"; 
```

# python - 如何获取正在执行的冻结脚本的路径

> ID：10293808
> 
> 赞同：9
> 
> 时间：2012-04-24T07:46:27.190
> 
> 标签：python, windows, path, argv

如果您从与脚本所在位置不同的目录和驱动器运行冻结的 Python 脚本（使用 py2exe 冻结），那么确定执行脚本路径的最佳方法是什么？

我尝试过的几个解决方案

```
inspect.getfile(inspect.currentframe()) 
```

**问题：不返回完整路径。它只返回脚本名称。**

```
os.path.abspath( __file__ ) 
```

**问题：在 Windows 上不起作用**

```
os.path.dirname(sys.argv[0]) 
```

**问题：返回空字符串。**

```
os.path.abspath(inspect.getsourcefile(way3)) 
```

**如果驱动器与 pwd 不同，将无法工作**

```
os.path.dirname(os.path.realpath(sys.argv[0])) 
```

**如果驱动器与 pwd 不同，将无法工作**

这是一个最小的不工作示例

```
D:\>path
PATH=c:\Python27\;c:\Users\abhibhat\Desktop\ToBeRemoved\spam\dist\;c:\gnuwin32\bin

D:\>cat c:\Users\abhibhat\Desktop\ToBeRemoved\spam\eggs.py
import os, inspect, sys
def way1():
    return os.path.dirname(sys.argv[0])

def way2():
    return inspect.getfile(inspect.currentframe())

def way3():
    return os.path.dirname(os.path.realpath(sys.argv[0]))

def way4():
    try:
        return os.path.abspath( __file__ )
    except NameError:
        return "Not Found"
def way5():
    return os.path.abspath(inspect.getsourcefile(way3))

if __name__ == '__main__':
    print "Path to this script is",way1()
    print "Path to this script is",way2()
    print "Path to this script is",way3()
    print "Path to this script is",way4()
    print "Path to this script is",way5()

D:\>eggs
Path to this script is
Path to this script is eggs.py
Path to this script is D:\
Path to this script is Not Found 
```

**相关问题：**

*   [如何知道Python中运行脚本的路径？](https://stackoverflow.com/questions/2259503/how-to-know-the-path-of-the-running-script-in-python)
*   [如何获取当前正在执行的文件的路径和名称？](https://stackoverflow.com/questions/50499/in-python-how-do-i-get-the-path-and-name-of-the-file-that-is-currently-executin)
*   [python，脚本路径[关闭]](https://stackoverflow.com/questions/595305/python-path-of-script)

**笔记**

如果脚本位于您正在执行的同一驱动器上，@Fenikso 的解决方案将起作用，但当它位于不同的驱动器上时，它将不起作用

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T08:36:24.763

从另一个驱动器运行时使用 cxFreeze 的另一种方法，即使使用 PATH：

```
import sys

if hasattr(sys, 'frozen'):
    print(sys.executable)
else:
    print(sys.argv[0]) 
```

来自 Python：

```
H:\Python\Examples\cxfreeze\pwdme.py 
```

从命令行：

```
D:\>h:\Python\Examples\cxfreeze\dist\pwdme.exe
h:\Python\Examples\cxfreeze\dist\pwdme.exe 
```

使用路径：

```
D:\>pwdme.exe
h:\Python\Examples\cxfreeze\dist\pwdme.exe 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T10:40:47.547

恕我直言，根据绝对路径行为不同的代码不是一个好的解决方案。相对路径解决方案可能会更好。使用 dirname 了解相对目录，使用 os.sep 了解跨平台兼容性。

```
if hasattr(sys, "frozen"):
    main_dir = os.path.dirname(sys.executable)
    full_real_path = os.path.realpath(sys.executable)
else:
    script_dir = os.path.dirname(__file__)
    main_dir = os.path.dirname(os.path.realpath(sys.argv[0]))
    full_real_path = os.path.realpath(sys.argv[0]) 
```

freeze 属性是 python 标准。

也看看 Esky： [http ://pypi.python.org/pypi/esky](http://pypi.python.org/pypi/esky)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:57:10.993

试试这个：

```
WD = os.path.dirname(os.path.realpath(sys.argv[0])) 
```

这就是我使用 cx_Freeze 来获取 .exe 真正运行的目录的方法。

# jquery - .next() 和 .addClass() 在 jquery 中不起作用

> ID：10293812
> 
> 赞同：0
> 
> 时间：2012-04-24T07:46:34.553
> 
> 标签：jquery

您好朋友以下是我的代码

HTML

```
 <ul>
    <li>
    <div class="input"><input name="" type="checkbox" value="" id="a"/></div>
    <div >Name of the survey goes here | 35 Points - <span>Begin Survey</span></div> 
    </li>
</ul> 
```

jQuery

```
<script>
$(document).ready(function(){

    $('#a').click(function(){

    $(this).next('div').addClass('.check_clicked');

    })
})
</script> 
```

CSS

```
.check_clicked
{
    text-decoration:line-through;
    color:#b6a7a7;
} 
```

我只想如果复选框值被选中，那么类`.check_clicked`应该应用于下一个 div

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:47:17.360

`.next()`访问下一个兄弟。但是，您的`#a`元素没有。

你想要的是`$(this).parent().next()`

您还需要删除`.`类名中的 -`addClass()`只接受类，因此它不需要`.`在类名前面。

这是一个工作演示： http: [//jsfiddle.net/DqLRc/](http://jsfiddle.net/DqLRc/)
如果取消选中该复选框不应再次删除该类，只需继续`addClass`我的`toggleClass`电话。

# c++ - 通过 OpenSSL (c++) 以 XML (w3c) 格式保存 RSA 公钥和私钥

> ID：10293815
> 
> 赞同：1
> 
> 时间：2012-04-24T07:46:53.593
> 
> 标签：c++, xml, openssl, rsa

我想使用 RSA 公钥和私钥的 XML 文件格式。现在我找到了如何以 PEM 和二进制 (DER) 格式保存这些密钥（例如，PEM_write_RSAPrivateKey()）

我有一个带有 xml 格式 RSA 密钥的字符串，我需要将它们加载到 EVP_PKEY 或 RSA OpenSSL 结构中。

XML 格式是这样的：

```
<RSAKeyPair>
  <Modulus>...</Modulus>
  <Exponent>...</Exponent>
  <P>...</P>
  <Q>...</Q>
  <DP>...</DP>
  <DQ>...</DQ>
  <InverseQ>
    ...
  </InverseQ>
  <D>...</D>
</RSAKeyPair> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:18:51.350

```
//just a code for demo,not for actually use  
int len;  
RSA *rsa;  
BIO *bio;
unsigned char *data; 
bio = BIO_new(BIO_s_meme()); 
BIO *b64;  
b64 = BIO_new(BIO_f_base64());  
BIO_write(bio, "<RSAKeyPair>\n",strlen("<RSAKeyPair>\n"));  
//write Modulus
len=BN_num_bytes(rsa->n);  
data=(unsigned char *)OPENSSL_malloc(len);  
if(data) {  
  BIO_write(bio,"  <Modulus>",strlen("  <Modulus>"));
  BN_bn2bin(rsa->n,data);  
  bio = BIO_push(b64, bio);  
  BIO_write(bio, data, len);  
  (void)BIO_flush(bio);  
  BIO_pop(bio);  
  BIO_reset(b64);  
  BIO_write(bio,"</Modulus>",strlen("</Modulus>"));  
}  
//write Exp  
...  
//write the bignum in rsa structure you want  
BIO_write(bio, "</RSAKeyPair>\n",strlen("</RSAKeyPair>")); 
```

# jquery - 如果移动设备不支持 jquery 移动版本，则显示错误消息

> ID：10293816
> 
> 赞同：0
> 
> 时间：2012-04-24T07:46:53.777
> 
> 标签：jquery, html, css, jquery-mobile

我正在使用 jquerymobile 开发 HTML5、CSS3 网站。**如果移动设备无法很好地呈现页面**或**无法应用 jquery 移动样式**，我想显示一条错误消息，例如“您的移动浏览器不支持此应用程序” 。我还没有找到关于这方面的好文章。因此，我们非常感谢您的帮助。

例如，该应用程序在 iphone 上运行良好，但在黑莓粗体设备上运行良好。所以我想为黑莓粗体设备用户显示这样的消息。我看到黑莓粗体设备不会将 jquery 样式应用于控制器。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:06:08.683

你可以通过两种方式做到这一点。

1) 我的首选方法是使用 HTML DIV 显示您的浏览器无法使用 jQuery 的消息，然后使用 jQuery 在页面加载时隐藏它。因此，如果 jQuery 工作，用户将看不到它。

2）另一个是检查jQuery是否正确加载并且是一个函数。我用它来查看页面是否有 jQuery。但它可能对你有用。

```
if (typeof jQuery != 'undefined' || typeof $ != 'function') {alert("This application will not work in your browser etc.");} 
```

希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:05:57.727

JQM 有一个返回布尔值的 $.mobile.gradeA() 函数。这是 JQM 1.1.0 的列表，其中浏览器具有“A 级”支持并返回 true。[http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/#platforms](http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/#platforms)

```
if(!$.mobile.gradeA()​){
    alert('Your mobile browser does not support this application.');
}​​​​​​​​ 
```

**更新**请注意，较新的黑莓粗体设备应返回 true 以获得 A 级支持。任何黑莓7+都可以。另请注意，设备可以很好地运行 jQuery，但仍然不能适当地设置样式。大多数情况下缺少的是对 css3 的支持。

# javascript - jQuery 变量阴影

> ID：10293817
> 
> 赞同：2
> 
> 时间：2012-04-24T07:46:57.490
> 
> 标签：javascript, jquery

jQuery中有一个奇怪的模式：

```
var jQuery = (function() {

// Define a local copy of jQuery
var jQuery = function( selector, context ) {
 ...
return jQuery;

})(); 
```

这样做的实际原因是什么？为什么不直接暴露内部的 jQuery 函数呢？是否仅用于内部 jQuery 和外部 jQuery 中的名称冲突，因为两者都在闭包中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:50:24.493

[`jQuery.noConflict(true)`](http://api.jquery.com/jQuery.noConflict/)删除 jQuery 的全局名称。但是，如果不为对象使用某个名称，就不可能对 jQuery 库的其余部分进行编程，因此需要使用本地的、非公开的名称。为方便起见，他们重新定义`jQuery`为匿名函数范围内的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:57:33.597

模式本身称为模块模式。它不是专门针对 jQuery 的，它并不奇怪但很有帮助。它允许隐藏对象状态和实现。它还允许使用特权方法（可以访问私有数据的公共方法）和其他良好的设计原则。

# java - App Engine连接android项目连接错误

> ID：10293821
> 
> 赞同：2
> 
> 时间：2012-04-24T07:47:24.743
> 
> 标签：java, android, google-app-engine

我已经开始使用 App Engine。创建了 App Engine 连接的 Android 项目。

我在本地运行它，在 AVD 模拟器 2.3.3 上。我在手机中注册了我的 Google 帐户。我还注册了 C2DM 服务。

但是当我按下“问好”按钮时，我得到一个 ClassNotFoundexception。

此外，在[http://127.0.0.1:8888/AppIdeas2.html?gwt.codesvr=127.0.0.1:9997](http://127.0.0.1:8888/AppIdeas2.html?gwt.codesvr=127.0.0.1:9997)上，如果我按下“SAY HELLO”按钮，我会收到 SERVER ERROR 500 错误。如果我尝试向手机发送 ping，则会收到 SERVER ERROR 500 错误。我已经四处寻找，但似乎无法弄清楚。

我想附上截图，但还没有得到它的声誉..

帮助将不胜感激。

日食代码：

2012 年 24 月 24 日上午 10:25:59 com.google.appengine.tools.development.DevAppServerImpl 开始信息：管理控制台在[http://localhost:8888/_ah/admin运行](http://localhost:8888/_ah/admin)

2012 年 24 月 24 日上午 11:05:17 com.google.appengine.api.search.dev.LuceneDirectoryMap$FileBased 严重：文件库存储：根目录不存在

2012 年 24 月 24 日上午 11:05:17 com.google.appengine.api.search.dev.LocalSearchService 初始化信息：搜索已初始化

2012 年 24 月 24 日上午 11:05:17 com.google.appengine.api.search.dev.LocalSearchService 开始信息：搜索开始

2012 年 24 月 24 日上午 11:21:14 com.google.appengine.tools.development.LocalResourceFileServlet doGet 警告：找不到文件：/_ah/admin/ 未显示电话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:26:52.520

将您的模拟器视为另一台机器，因此它会将 [http://127.0.0.1:8888](http://127.0.0.1:8888)视为自己的本地主机，而不是您的应用引擎开发服务器。相反，使用网络 IP 运行应用引擎并从模拟器中调用它。

# cookies - 如何在 JSTL 中设置 cookie

> ID：10293825
> 
> 赞同：4
> 
> 时间：2012-04-24T07:47:57.787
> 
> 标签：cookies, jstl

我正在尝试实现以下目标，但不确定它是否可能以及语法应该是什么？

```
<c:if condition is true>
  <c:set cookie using JSTL>
</c:if> 
```

我在想，既然 cookie 只设置在客户端，而 JSTL 用于在服务器端做事，那是做不到的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T13:51:29.500

您不能使用 JSTL 设置 cookie。[JSTL](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)没有此功能的任何标签。JSTL 在生成 HTTP 响应期间运行，而在生成 HTTP 响应之前很久就需要在 HTTP 响应标头中设置一个 cookie。还有其他非法状态的手段。

改用预处理[servlet](https://stackoverflow.com/tags/servlets/info)或[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，您可以在其中调用`response.addCookie()`

# javascript - 如何从超链接将调用的事件发送到 JS 函数

> ID：10293826
> 
> 赞同：0
> 
> 时间：2012-04-24T07:48:01.900
> 
> 标签：javascript, jquery, html

这种模式`href="javascript:stop(this);`将超链接对象传递给停止函数，但我也想将调用的事件传递给该函数。我怎样才能做到这一点？我的记录正在通过 ajax 加载，因此无法附加`.click(function(event){})`。如果我附加点击每个 AJAX 调用，那么 IE6 上的网络速度会变慢。

请指导我

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:53:58.480

你有 jQuery，所以你可以使用委托/实时事件而不是内联事件或那些讨厌的`javascript:`href：

```
$('#parent').on('click', 'a', function(e) {
    // you can use this and e (the event) here
}); 
```

`#parent`必须是已经存在的元素，并且将包含新添加的元素。是与您希望触发点击事件`a`的元素相匹配的选择器。`#parent`您可以使用`$(document)`而不是`$('#parent')`类似于`.live()`旧 jQuery 版本，但出于性能原因，使用更接近内部元素的父元素会更好。

# ios - iphone OpenGLES 视频纹理

> ID：10293828
> 
> 赞同：0
> 
> 时间：2012-04-24T07:48:03.913
> 
> 标签：ios, opengl-es, textures

我知道苹果提供了一个名为 GLCameraRipple 的示例，它使用 CVOpenGLESTextureCacheCreateTextureFromImage 来实现这一点。但是当我更改为 glTexImage2D 时，它什么也没有显示，我的代码有什么问题？

```
if (format == kCVPixelFormatType_32BGRA) {
CVPixelBufferRef pixelBuf = CMSampleBufferGetImageBuffer(sampleBuffer);
CVPixelBufferLockBaseAddress(pixelBuf, 0);
void *baseaddress = CVPixelBufferGetBaseAddress(pixelBuf);

glGenTextures(1, &textureID);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, textureID);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, baseaddress);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );

CVPixelBufferUnlockBaseAddress(pixelBuf, 0);
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:40:59.210

这里有几个问题。首先，构建 GLCameraRipple 示例是为了接收 YUV 相机数据，而不是 BGRA。您上面的代码仅上传 BGRA 数据的一个纹理，而不是应用程序期望的单独的 Y 和 UV 平面。它使用色彩空间转换着色器将这些平面合并为第一阶段，这需要 YUV 数据才能工作。

其次，您正在为每个上传的帧分配一个新纹理，这是一个非常糟糕的主意。如果您在完成后不删除该纹理，这尤其糟糕，因为您会以这种方式消耗资源。您应该为要上传的每个平面分配一次纹理，然后在上传每个视频帧时保留该纹理，仅在处理完视频后将其删除。

您要么需要修改上述内容以上传单独的 Y 和 UV 平面，要么删除/重写它们的颜色处理着色器。如果您走 BGRA 路线，您还需要确保相机现在为您提供 BGRA 帧而不是 YUV 帧。

# objective-c - 重新加载视图

> ID：10293836
> 
> 赞同：0
> 
> 时间：2012-04-24T07:48:26.897
> 
> 标签：objective-c, ios, interface-builder

我找不到关于如何从内部重新加载模态视图控制器的正确方法。我正在开发一个非常简单的基于 UI 的应用程序，但我不知道该怎么做。

我使用以下内容打开模态视图：

```
MainView *mainmview = [[MainView alloc] initWithNibName:@"submod" bundle:nil];
    mainmview.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self mainmview animated:YES]; 
```

然后可以根据 iOS 版本将其关闭。然而，当我需要一个简单的重启按钮时，这没有效果。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:03:47.483

您将必须实现自己的“刷新”功能 - 在模态视图控制器的类中定义一个“刷新”方法并在其中执行任何需要完成的操作 - 例如，如果您有一个需要重新加载或刷新视图的 tableview取决于新数据等...

# iphone - 动态屏幕以编程方式在 Objective-C 中创建视图

> ID：10293837
> 
> 赞同：0
> 
> 时间：2012-04-24T07:48:27.487
> 
> 标签：iphone, objective-c, ios

实现这一目标的最佳方法是什么？例如我有一个 UINavigationBar，UITableView。我应该在没有硬编码的情况下将导航栏动态放在屏幕和下面的表格视图上？当然我目前有类似的东西：self.view.bounds.origin.y - 20.0，但我认为这是一个糟糕的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:04:12.970

您应该开始阅读有关使用 UIKit 的苹果文档。[从这里](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW1)开始。

# ruby-on-rails - 为什么在rails CLI中我经常看到“←[32m.←[0m”

> ID：10293839
> 
> 赞同：6
> 
> 时间：2012-04-24T07:48:34.150
> 
> 标签：ruby-on-rails

我是一个新手，试图遵循 Michael Hartl 的优秀 Rails 教程。我已经升级到我在 windows vista 上运行的 rails 3.2.3 和 ruby​​ 1.9.3。当我运行某些命令行功能（例如 rspec）时会出现问题。例如

```
C:\Sites\rails_projects\sample_app>bundle exec rspec spec/
←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m← [32m.←[0m
←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m
←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m←[32m.←[0m

Finished in 5.41 seconds
←[32m29 examples, 0 failures←[0m 
```

我认为问题可能与它试图显示颜色有关，但我尝试使用 --color 标签运行 rspec 并且没有区别（或任何颜色）。我也看到了 rails 控制台本身的问题。也许我的机器没有设置为正确显示某些字符。

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:54:19.463

它们是终端控制字符，它们可以用来改变问题中建议的终端颜色，也可以用来移动光标和删除字符。如果这些显示为禁用颜色，那么我会假设它们是光标移动控制字符。

**编辑：**

[http://www.termsys.demon.co.uk/vtansi.htm](http://www.termsys.demon.co.uk/vtansi.htm)列出了 VT100 控制字符。它似乎*正在*尝试将文本颜色设置为绿色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T08:17:11.077

1.  在您的应用程序目录中打开`.rspec`文件
2.  删除第一行 ( `--color`)
3.  保存，完成:-)

# android - 邮件屏幕向下滚动到底部

> ID：10293845
> 
> 赞同：1
> 
> 时间：2012-04-24T07:48:55.663
> 
> 标签：android, android-layout, email

我正在调用邮件意图

```
 ImageButton mail=(ImageButton)findViewById(R.id.mailgps);
    mail.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            setContentView(R.layout.mail);
            Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);  
            // TODO Auto-generated method stub
            emailIntent.setType("text/plain");
            String emailto[]={"myemail"};
            String subject="GPS User Report";
            String body="Welcome to Samarth Reporting service.Did you see an untracked Dustbin\n.A dustbin not at the right place??\nWant to suggest placement of a dustbin here.\nGo ahead we are all ears.\n.Your present location is\n Latitude: ";
            body=body +  "28.67890" + " and Longitudes: " + "79.78965";
            body=body + "\n\nTell us more.";
            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,emailto);
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,subject);
            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,body);

            startActivity(emailIntent);  

        }
    }); 
```

并获得这样的屏幕，它忽略了 EXTRA_EMAIL 属性以及 EXTRA_SUBJECT，然后正文出现在最底部。我该如何纠正这个。？

![在此处输入图像描述](../Images/561fe3453b1428c946796233f404e189.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:55:32.403

好吧，这是一件非常愚蠢的事情。如前所述，我使用另一个 AVD 设置了电子邮件客户端，因此它运行良好。但在新的 AVD 上，我忽略了这一点。所以“首先”设置电子邮件客户端，然后去调用意图。尽管如此，系统应该有更好的方法来处理这种情况，而不是显示一个奇怪的空白屏幕。

# java - java中的响应头验证

> ID：10293846
> 
> 赞同：3
> 
> 时间：2012-04-24T07:48:57.443
> 
> 标签：java, security, http, response, split

我在我的响应头中直接传递了一个用户定义的参数。我了解到这不是一个好主意，因为这样用户可以操纵标头，并且可能导致跨站点脚本攻击和其他类型的多重攻击。

[https://www.fortify.com/vulncat/en/vulncat/python/header_manipulation.html](https://www.fortify.com/vulncat/en/vulncat/python/header_manipulation.html)

我正在做的是通过用空字符串“”替换“\r”和“\n”字符来验证“http响应拆分”的用户输入。这是否足够，或者我还必须检查其他字符。任何指针都会有很大帮助。

这是我的代码。

```
if(response != null)
  {
   newResponse = response.replaceAll("[\r\n]", "");
  } 
```

这足以防止这种攻击还是我也应该验证其他角色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:12:58.913

白名单比黑名单安全得多。是否可以使用白名单取决于您对用户定义参数的了解程度。

更多在这里：

[http://cwe.mitre.org/data/definitions/113.html](http://cwe.mitre.org/data/definitions/113.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:11:52.440

您提供的信息不足以正确回答。我们需要知道您对参数值做了什么，以便判断您的操作是否足够好以及您的代码运行在什么样的环境中。简短的、100% 正确（但非常无用）的答案是“不。”

遵循在其原始上下文之外获取的简单项目符号并不能实现安全性。您从 Python 上下文中获取它并将其直接放置到 Java 上下文中。您必须完全了解您的环境以及您的代码的功能。没有银弹。

# iphone - 每个帐户或每个配置文件是否有 100 个开发设备的限制？

> ID：10293848
> 
> 赞同：2
> 
> 时间：2012-04-24T07:49:01.437
> 
> 标签：iphone, ios, ipad, app-store-connect

我确信应用程序开发人员有 100 台设备的限制。我相信这是每个​​帐户，这意味着任何开发者帐户每年最多可以注册 100 台开发设备。如果全部消耗，运气不好。无法删除旧设备。

现在我听到一些开发人员说它是每个配置文件。因此，如果我想使用 TestFlightApp，我可以为一个用于甜甜圈面包师的应用程序的 100 名测试人员创建一个配置文件，然后为一个用于学习数学的应用程序的 100 名不同测试人员创建另一个配置文件？所以本质上没有限制？

让我担心的是，如果我过多地使用 TestFlightApp 并且每个开发者帐户的限制为 100 个，我最终将没有可用的插槽，并且无法添加自己的新开发设备，例如当下一部 iPhone 到货时。

担心对错？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:51:22.667

限制是每个开发者帐户。每次续订后，您将有机会移除设备（并且在配置门户的此页面顶部会显示此效果的通知），但在您再次开始添加设备后移除的设备仍将计入限制.

显然，100 台设备也是每个配置文件的实际限制，但这仅仅是因为每个帐户只能拥有 100 台设备。你不能有两个应用程序有 200 个不同的设备 (100+100)，因为你甚至不能有 200 个不同的设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T07:52:21.090

100 台设备的限制绝对是每个帐户而不是每个配置文件。AFAIK - 添加的设备会在一年后过期，因此您可以在一年内重新添加它们或为您的新 iHardware 留下空闲插槽。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T09:31:11.730

是的，是 100 台设备。

解决方案是注册[iOS 开发者企业计划](https://developer.apple.com/programs/ios/enterprise/)，在这里您可以拥有“无限”数量的设备。这应该是一个限制，但我不知道。

# ms-access - 按记录格式化 Access DB Reports

> ID：10293849
> 
> 赞同：-1
> 
> 时间：2012-04-24T07:49:11.213
> 
> 标签：ms-access, vba

我有一个访问报告，我想按记录格式化此报告记录的记录，这种格式将取决于字段的值根据 1 条件，所以我该如何浏览报告。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:17:40.680

通过一个字段（列）或控件的值来格式化报表的最简单方法是使用[条件格式](http://msdn.microsoft.com/en-us/library/gg508986.aspx)

# java - SERVICE_OBJECT_SUPPLIER 参数未指定错误

> ID：10293851
> 
> 赞同：0
> 
> 时间：2012-04-24T07:49:17.303
> 
> 标签：java, spring, axis2

我使用axis2和spring开发了一个webService。当我从 web 服务请求 wsdl 文件时，我得到了正确的 wsdl 文件，但是当我想使用 web 服务的定义操作（使用 java 客户端）时，我得到以下异常：

```
[CODE]org.apache.axis2.AxisFault: The SERVICE_OBJECT_SUPPLIER parameter is
not specified. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:31:43.937

在您的 services.xml 文件中，您需要定义以下两个属性。

org.apache.axis2.extensions.spring.receivers.SpringServletContextObjectSupplier beanname-that-expose-as-a-WS

看看[http://axis.apache.org/axis2/java/core/docs/spring.html](http://axis.apache.org/axis2/java/core/docs/spring.html)

# c# - ODBC 代码仅在连接池打开时有效

> ID：10293855
> 
> 赞同：0
> 
> 时间：2012-04-24T07:49:22.327
> 
> 标签：c#, odbc

我正在使用以下代码模式使用 ODBC 在第三方数据库上运行一些查询。

如果我使用 ODBC 数据源管理器手动启用连接池，一切正常。

问题是如果禁用连接池，我在第二次数据库调用时收到 ODBC 连接错误。

基本上，我想避免在客户计算机上启用连接池的部署麻烦（除非有一些简单的方法）。

下面的 ODBC 代码有问题吗？

```
using (var conn = GetODBCConnection())
{
     using (var sdr = new OdbcCommand("SELECT * FROM [TABLE]", conn).ExecuteReader())
     {
         while (sdr.Read())
         {
             // use data
         }
     }
}

private OdbcConnection GetGenieConnection()
{
    var conn = new OdbcConnection(_connString);

    conn.Open();

    return conn;
} 
```

PS：我使用的是 4D v12 ODBC 驱动程序。我调查了连接字符串选项以打开连接池，但找不到任何东西。

编辑：这种行为可能与线程有关吗？我在 BackgroundWorker 线程中调用了第一个 ODBC 数据库调用。如果我在一个线程中调用所有内容，它似乎可以工作。这可以解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T06:25:19.710

如果任何其他可怜的灵魂最终落在这里，我的解决方案是：

1.  在进程的生命周期内保持静态连接“打开”。
2.  使用这个单例实例进行我所有的数据库调用。
3.  使用锁确保一次只运行一个 ODBC 调用。

就性能而言，这不是一个理想的解决方案，但它确实有效。

# mysql - 在 MYSQL 列中拆分逗号分隔值

> ID：10293861
> 
> 赞同：1
> 
> 时间：2012-04-24T07:49:45.023
> 
> 标签：mysql

这是我的结果集

```
 id  cpumanufacturer cpuseries
200014  Intel           Core i7,Core i7 Extreme Edition

200015  Intel           Core i7 Extreme Edition,Core i7

200259  Intel           Core i7 Extreme Edition,Core i7 
```

我想将 cpu 系列拆分为跨多行，例如第一行输出应该是

```
200014 | Intel | Core i7
200014 | Intel | Core i7 Extreme Edition 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:03:23.723

有一篇博客文章描述了一个存储过程，它将从此修改您的表：

```
id     cpumanufacturer cpuseries

200014 Intel Core      i7,Core i7 Extreme Edition
200015 Intel Core      i7 Extreme Edition,Core i7
200259 Intel Core      i7 Extreme Edition,Core i7 
```

对此：

```
id     cpumanufacturer cpuseries

200014 Intel           Core i7
200014 Intel           Core i7 Extreme Edition    
200015 Intel           Core i7 Extreme Edition
200015 Intel           Core i7
200259 Intel           Core i7 Extreme Edition
200259 Intel           Core i7 
```

博文：http: [//www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/](http://www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/)

请记住，这将修改表，而不是您的查询结果。

您可能还会发现以下答案很有用： [https ://stackoverflow.com/a/5344071/1005039](https://stackoverflow.com/a/5344071/1005039)

# eclipse - 结帐后Eclipse更改项目设置时间戳注释

> ID：10293864
> 
> 赞同：7
> 
> 时间：2012-04-24T07:49:58.627
> 
> 标签：eclipse, svn, version-control, project-settings

我有一个包含许多（> 50）包的 Eclipse 工作区。一些捆绑包包含特殊的项目设置，例如，客户特定的代码格式。

如果我设置一个新的工作区并使用客户特定的代码格式签出现有项目，Eclipse 会`org.eclipse.jdt.ui.prefs`自动将日期注释更改为当前日期！

这是`org.eclipse.jdt.ui.prefs`SVN 中的首选项文件 ( )：

```
#Tue Apr 24 09:15:20 CEST 2012
eclipse.preferences.version=1
formatter_profile=_myProfile
formatter_settings_version=12 
```

这是`org.eclipse.jdt.ui.prefs`结帐后的文件（ ）：

```
#Tue Apr 24 09:30:25 CEST 2012
eclipse.preferences.version=1
formatter_profile=_myProfile
formatter_settings_version=12 
```

`org.eclipse.core.resources.prefs`如果我将整个项目的编码设置为 UTF-8，设置文件也会发生同样的情况。

SVN：

```
#Tue Apr 24 09:26:48 CEST 2012
eclipse.preferences.version=1
encoding/<project>=UTF-8 
```

结帐后：

```
#Tue Apr 24 09:28:00 CEST 2012
eclipse.preferences.version=1
encoding/<project>=UTF-8 
```

如果项目同时包含设置文件 (`org.eclipse.core.resources.prefs`和`org.eclipse.jdt.ui.prefs`)，则只会`org.eclipse.core.resources.prefs`更改设置文件！

有人知道**为什么**Eclipse 会更改此行以及如何避免它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T22:15:40.413

不要将您的 Eclipse 设置存储在 subversions 中！！！它不允许您有不同的设置或不同的 Eclipse 版本。如果你有不同的环境，那将是一个真正的痛苦。

如果您想保持工作空间设置同步，请考虑使用[Workspace Mechanics](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)之类的东西。

如果这只是为了共享您的格式设置，请将它们导出为 XML 并将 XML 文件存储在您的存储库中。每个开发人员都可以导入 XML 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T03:00:55.077

这可能是行尾的问题吗？您的特定 Eclipse 版本的特性？

如果 SVN 中用于文件的 EOL 字符与用于开发的机器上的默认值不匹配，我可以想象 Eclipse 重写设置文件而没有任何明显的实质性更改。但是，在这种情况下，您应该只在切换机器时看到问题。解决方法是将`svn:eol-style`=`native`属性添加到有问题的文件中。

我限制自己对这个问题的猜测，因为我无法复制你所看到的行为，不管有没有不匹配的行尾。我在 repo 中有许多带有配置文件的 Eclipse 项目，尽管 Eclipse 不经常以不受欢迎的方式自动更改它们，但它们总是会发生实质性的变化。仅通过在 Eclipse Helios SR2（更符合您的设置文件的格式）或 Eclipse SDK 3.7.2（M20120208-0800）上导入他们的项目，我无法获得任何设置文件来仅更改其日期戳。也许仅仅升级 Eclipse 就可以解决问题（一定要导出你的设置！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:13:48.677

它在很多场合也让我感到困惑，但我不确定我能否给你一个完整的答案。

首先，我的`org.eclipse.core.resources.prefs`文件*从不*包含时间戳！我还有其他偏好文件——比如`org.eclipse.jdt.ui.prefs`——似乎总是有时间戳。在我目前的设置中，它们似乎从未被过度更新。

有几代偏好 API

*   `org.eclipse.core.runtime.Preferences`- 访问方式`Plugin.getPluginPreferences()`- 在 Eclipse 3.0 中已弃用；现在模拟 - 不要使用这个！
*   `org.eclipse.jface.preference.*`- 访问方式`AbstractUIPlugin.getPreferenceStore()`- 在 Eclipse 3.1 中被取代；现在模拟 - 用于字段编辑器
*   `org.eclipse.core.runtime.preferences.*`- 访问方式`Platform.getPreferencesService()`- 基于 OSGi 首选项服务

那些使用第三代 API 的首选项，读写首选项文件似乎总是通过`EclipsePreferences`. 这个类做了“正确”的事情并删除了时间戳。

在某些情况下——例如在处理 JDT 中的格式时——`org.eclipse.jface.preference.PreferenceStore`使用了一个特殊的。这个类没有做正确的事情，只是写出时间戳。

为什么使用这个类以及在什么情况下使用它，从代码中不是很清楚......

有一件事是肯定的，但我找不到避免这种情况的方法！

# mfc - 在我的 MFC 应用程序中使用 CMFCVisualManagerVS2005 时没有出现任务栏

> ID：10293865
> 
> 赞同：0
> 
> 时间：2012-04-24T07:50:07.297
> 
> 标签：mfc, taskbar

我正在使用 Visual Studio 2010 中的 MFC 开发适用于 Windows 的应用程序。我正在使用 CMFCVisualManagerVS2005 来更改我的应用程序的视觉外观。当我运行我的应用程序时，它会通过以最大化状态打开我的应用程序来隐藏 Windows 任务栏。我必须以最大化状态打开我的应用程序，所以我禁用了最大化按钮。

知道如何在不隐藏 Windows 任务栏的情况下以最大化状态运行我的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:37:18.530

您能否尝试将以下代码放在 CMainFrame::OnCreate() 中。我知道最好找到根本问题，但这可能足以作为一个肮脏的修复。

```
HWND hTBar=::FindWindow("Shell_traywnd","");

::ShowWindow(hTBar,SW_SHOW); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:50:13.340

右键单击任务栏上的空白区域 -> 属性 -> 确保选中“将任务栏保持在其他窗口之上”。希望这是你的问题

# javascript - jsTree：如何从 jstree 获取所有叶节点？

> ID：10293869
> 
> 赞同：4
> 
> 时间：2012-04-24T07:50:21.763
> 
> 标签：javascript, jquery, jquery-plugins, jquery-selectors, jstree

我想从 jsTree 获取所有叶节点（节点的 ID 和文本）？

我没有使用复选框 ui：jsTree。

```
 Root
      -----A
           -----A1
                  -----A1.1

           -----A2
                  -----A2.1

      -----B

           -----B2

       -----C
            -----C1
                  -----C1.1 
```

我想要来自 jsTree 的叶节点列表。

**预期输出：[A1.1，A2.1，B2，C1.1]**

在此问题上的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:04:39.447

像这样的东西？

```
$('.jstree-leaf').each(function(){
  var id   = $(this).attr('id');
  var text = $(this).children('a').text();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-22T15:13:31.673

```
////////////////////////////////////////////////////////////////////
// @name        :
// @description :   function
// @params      :
// @return      :
////////////////////////////////////////////////////////////////////
function jstreeIterateNodes(
    treeOwner ,
    node , 
    fnCallbackCondition ,
    bRecursive ,
    arrCollector
){

    var 
        childNodes = node.children ,
        arrCollector = ( arrCollector ) ? arrCollector : [] ,
        bUseCallback = ( typeof fnCallbackCondition === "function" ) ? true : false ,
        nodeItreator = null;

    for(
        var i = 0;
        i < childNodes.length;
        ++i
    ){

        nodeItreator = treeOwner.get_node( childNodes[i] );

        if( bUseCallback ){

            if( fnCallbackCondition( nodeItreator , node ) ){

                arrCollector.push({
                    node : nodeItreator,
                    parent : node
                });

            }

        }
        if( bRecursive ){
            jstreeIterateNodes(
                treeOwner ,
                nodeItreator ,
                fnCallbackCondition ,
                arrCollector
            ); 
        }
    }

    return arrCollector;
}
var 
    _your_jstree_ = $("#YOUR_TREE_ELEMENT").jstree( true ) ,
    bRecursiveItreation = false , // could be true for recursive
    arrCollected = null;

arrCollected = jstreeIterateNodes( 
    _your_jstree_ , 
    _your_jstree_.get_node( "some_node_id" ) , 
    function _your_filter_callback_( itrated_node , parent_itrated_node ){
      // Do what ever and return true to collect
    } ,
    bRecursiveItreation 
);

// DO SOMTHING WITH arrCollected which contains all collected nodes 
```

# android - 我可以将 Zxing 用于商业目的吗？

> ID：10293870
> 
> 赞同：5
> 
> 时间：2012-04-24T07:50:23.413
> 
> 标签：android, authorization, zxing

我有一个以zxing为核心的应用程序，我想知道，如果我在我的应用程序中添加其他功能，我是否可以向用户收取我添加的部分费用。谢谢大家。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T08:01:07.233

Zxing 在 Apache 许可下获得许可，因此此链接应完全回答您的问题： http: [//www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)

据我了解 - 是的，但您需要在您的应用程序中注明您使用 Zxing 并且它是在 Apache 许可下获得许可的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T09:03:34.140

[http://code.google.com/p/zxing/wiki/LicenseQuestions](http://code.google.com/p/zxing/wiki/LicenseQuestions)

这是我们关于遵守许可的声明。是的，没有什么禁止商业或商业用途的。*分发*项目代码时，许可条款开始发挥作用。

# c# - 使用 ASP.NET 和 C# 在 Web 应用程序中单击按钮

> ID：10293874
> 
> 赞同：0
> 
> 时间：2012-04-24T07:51:07.623
> 
> 标签：c#, asp.net, c#-4.0

我是 csharp 和 asp.net 的新手，无论如何，我正在用 asp.net 和 csharp 编写一个 Web 应用程序；在我的 default.aspx 中，我有按钮，如果我单击按钮，我想打开不同的页面（例如 asdfg.aspx）。为此，我在 default.aspx 中编写了以下代码：

```
 <asp:Button ID="button1" runat="server" Text="Click Button" OnClick="ButtonClick" /> 
```

在我的 default.aspx.cs 我创建了这个代码段：

```
public void ButtonClick(Object sender, EventArgs e)
{

} 
```

之后我能做什么？谢谢

ps对不起我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:52:59.610

```
public void ButtonClick(Object sender, EventArgs e)
{
    Response.Redirect("~/asdfg.aspx");

} 
```

只是一个通知：句柄不应该是一个公共方法，实例化 Page 类并从另一个类调用它并不少见。因此，您可以将其设为受保护或私有。

tilda 符号（前缀）“~”在 ASP .Net 中是特殊的。这意味着新位置与应用程序相关，可能因网站根目录而异。一个网站可以有多个应用程序（即，您可以拥有主站点和另一个名为 admin 的“子站点”）。如果您在管理应用程序中，ASP .Net 知道如何构建与管理相关的新位置，而不是与根网站相关的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:53:37.037

您可以使用

```
Response.Redirect(urlstring); 
```

在 ButtonClick 方法中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:56:33.337

```
public void ButtonClick(Object sender, EventArgs e) 
{  
      Response.Redirect("~/asdfg.aspx");  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:58:06.410

您可以使用`Server.Transfer("url")`或`Response.Redirect("url")`

Response.Redirect 只是将消息向下发送到（HTTP 302）浏览器。

Server.Transfer 在浏览器一无所知的情况下发生，浏览器请求一个页面，但服务器返回另一个页面的内容。

```
public void ButtonClick(Object sender, EventArgs e)
{
response.Redirect("~/asdfg.aspx");

} 
```

# java - 将控制台结果写入文本文件

> ID：10293884
> 
> 赞同：0
> 
> 时间：2012-04-24T07:52:17.630
> 
> 标签：java, text-files

我编写了这段代码来将二进制数据转换为 ascii ，现在我想将控制台结果写入文本文件 output.txt 。它运行但问题是它将第一行打印到控制台并开始从第二行将输出写入文本文件，换句话说，它跳过了 fisr 行！

```
public static void main(String args[])
  {
  try{
  // Open the file that is the first 
  // command line parameter
  FileInputStream fstream = new FileInputStream("textfile.txt");
  // Get the object of DataInputStream
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  //Read File Line By Line
  while ((strLine = br.readLine()) != null)   {

      String input = br.readLine();
            String output = "";
            for(int i = 0; i <= input.length() - 8; i+=8)
            {
                int k = Integer.parseInt(input.substring(i, i+8), 2);
                output += (char) k;
            }

                System.out.println("string: " + output);
          orgStream = System.out;
          fileStream = new PrintStream(new FileOutputStream("d:/output.txt",true));

          // Redirecting console output to file
          System.setOut(fileStream);

              } 
  //Close the input stream
  in.close();
    }catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
  }
  }
} 
```

这些行负责将结果写入 output.txt：

```
 System.out.println("string: " + output);
          orgStream = System.out;
          fileStream = new PrintStream(new FileOutputStream("d:/output.txt",true));

          // Redirecting console output to file
          System.setOut(fileStream); 
```

如何在 eclipse 中保存输出以便能够再次使用它？现在我保存在D盘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:57:07.403

你不使用你的`out`流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:57:56.393

这条线

```
PrintStream out = new PrintStream(new FileOutputStream("output.txt"));
System.setOut(out); 
```

只需将您写入 System.out 的任何内容重定向到 FileOutputStream。由于您没有向 System.out 写入任何内容，因此不会向 output.txt 写入任何内容。

您可以简单地将输出写入您创建的 PrintStream，而不是重定向 System.out。因此，首先在 while 循环外创建 PrintStream，然后在循环内将您创建的每个字符直接写入 PrintStream。无需重定向 System.out 或（低效）将字符连接成字符串。

此外，当您完成编写时，您应该关闭（）您创建的流。这只是在开始编写更大的程序之前学习的一个好习惯，因为让流打开可能会导致错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:54:49.390

代码
`System.err.println("Error: " + e.getMessage());`将写入错误流而不是输出流..

```
 System.setOut(out); 
```

在这里您正在设置输出流，错误流仍然默认为控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:55:00.933

我想你需要一个

```
out.flush (); 
```

到底。再看一遍，我明白了，你从来没有写过任何东西。您只想按照 Anantha 的建议编写错误消息吗？

你忘记了：

```
System.out.println (output); 
```

# clojure - Clojure 简化

> ID：10293887
> 
> 赞同：2
> 
> 时间：2012-04-24T07:52:29.673
> 
> 标签：clojure

有没有更短的写法：

```
(apply f
  (cons a
    (cons b
      (cons c d)))) 
```

?

谢谢！

（我正在编写一些调用其他函数的辅助函数，这种“模式”似乎出现了很多。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T08:05:58.230

怎么样

```
(apply f a b c d) 
```

请注意，在这两种情况下都`d`应该是 a `seq`。

# javascript - 如何使用javascript在弹出窗口中添加错误消息而不是警告框

> ID：10293888
> 
> 赞同：2
> 
> 时间：2012-04-24T07:52:43.073
> 
> 标签：javascript, asp.net, popup

我需要使用 JavaScript 在弹出窗口内的文本框中验证日期格式。我需要显示类似于 的错误消息，而不是使用警告框`document.getElementById("MainContent_ErrorMsg").innerHTML = "Please Enter valid date"`。
有没有其他方法可以实现这种行为？我的 JavaScript 代码是：

```
 var startdate = document.getElementById("MainContent_uscEventParameters_txtEarliestStartDate");
    var enddate = document.getElementById("MainContent_uscEventParameters_txtLatestEndDate");
    var validformat=/^\d{4}\-\d{2}\-\d{2}$/;
    if (! (startdate.value.match(validformat)) && (enddate.value.match(validforamt)) )
    {
        alert("please enter valid date format");
        //document.getElementById("MainContent_ErrorMsg").innerHTML = "Please enter valid date";
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:14:32.267

您可以使用简单纯 JavaScript 在元素旁边显示消息，而不是显示警报对话框：

```
function AddErrorLabel(element, msg) {
    var oLabel = document.createElement("span");
    oLabel.className = "error_msg";
    oLabel.innerHTML = msg;
    var parent = element.parentNode;
    if (element.nextSibling) {
        if (element.nextSibling.className !== "error_msg") {
            parent.insertBefore(oLabel, element.nextSibling);
        }
    }
    else {
        parent.appendChild(oLabel);
    }
} 
```

用法：

```
if (! (startdate.value.match(validformat)) && (enddate.value.match(validforamt)) )
{
    AddErrorLabel(startdate, "please enter valid date format");
} 
```

[现场测试用例](http://jsfiddle.net/x4x9g/)。（将文本框留空，然后单击提交）

像 jQuery 这样的库具有这样的功能并且更好，但对于简单的需求，这应该就足够了，它使用基本的 JavaScript，因此可以跨浏览器。

# android - 如何使用 facebook android SDK 发布到 facebook 墙上？

> ID：10293892
> 
> 赞同：0
> 
> 时间：2012-04-24T07:52:56.940
> 
> 标签：android, facebook

我正在使用此代码将文本发布到我的 facebook 墙上，而无需打开对话窗口，但它没有运行！

任何人都可以帮助我完成它或建议其他解决方案/代码吗？

```
public void postToWall(String message) {
    Bundle parameters = new Bundle();
    parameters.putString("message", message);
    parameters.putString("description", "topic share");
    try {
        facebook.request("me");
        String response = facebook.request("me/feed", parameters,"POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") || response.equals("false")) {
            showToast("Blank response.");
        }
        else {
            showToast("Message posted to your facebook wall!");
        }

        finish();
    }
    catch (Exception e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:31:49.357

尝试这个，

```
public void postOnWall(String msg) {
            Log.d("Tests", "Testing graph API wall post");
             try {
                    String response = facebook.request("me");
                    Bundle parameters = new Bundle();
                    parameters.putString("message", msg);
                    parameters.putString("description", "test test test");
                    response = facebook.request("me/feed", parameters, 
                            "POST");
                    Log.d("Tests", "got response: " + response);
                    if (response == null || response.equals("") || 
                            response.equals("false")) {
                       Log.v("Error", "Blank response");
                   }
             } catch(Exception e) {
                 e.printStackTrace();
             } 
```

# objective-c - UIView 的子视图失去透明度

> ID：10293894
> 
> 赞同：1
> 
> 时间：2012-04-24T07:52:59.860
> 
> 标签：objective-c, ios, transparency, image-manipulation, alpha

在我的程序中，我添加了一个 UIImageView 作为已在 xib 文件中声明的 UIView 的子视图。这个子视图（包含一个PNG文件的图像）应该有一个透明的背景，但是当它显示在屏幕上时，背景会变成白色。这是正常行为吗？有什么我必须改变才能让图像正确显示吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:56:22.920

检查 UIImageView 及其容器 UIView 的背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:59:08.870

每个应该具有透明背景的视图都必须使用 设置背景颜色`theUIView.backgroundcolor = [UIColor clearColor]`。在您的情况下，您应该在图像视图上调用它。

# ios - UIMenuController 响应很慢

> ID：10293897
> 
> 赞同：2
> 
> 时间：2012-04-24T07:53:16.863
> 
> 标签：ios, uiwebview, uimenucontroller

我正在开发 epub 阅读器，我只是构建了阅读器结构以获取 html 文件的路径`UIWebView`，然后将其分页并查看它...正如您所知，当您在 webView 中选择文本时，menuController 将出现我有多个功能，如添加注释、突出显示文本、共享..等。每件事都很好，但我有一个特殊情况，有些书包含大章节（html 文件大小约为 180kb，而普通文件通常约为 30-50kb），在这些章节中，当我选择文本时`UIMenuController`需要太多是时候出现了！最后它出现并且运行良好，但它让用户等待这么长的时间（我们在这里谈论大约 7 秒！！）.. 我的构建目标是 iOS 4 和 5，这发生在模拟器中和设备..

**编辑：**

我的 ViewController 中的 canPerformAction ：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    BOOL can = [super canPerformAction:action withSender:sender];

    if(action == @selector(copyPressed::) || 
       action == @selector(addNotePressed:) || 
       action == @selector(sharePressed:) || 
       action == @selector(highlightPressed:))
    {
        can = YES;
    }

    if (action == @selector(copy:) || action == @selector(_define:) || action == @selector(selectAll:) || action == @selector(select:)) 
    {
        can =  NO;
    }

    return can;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:01:32.110

我正在开发一个相同的项目，并且刚刚使用 UIMenuController 实现了相同的功能。我没有注意到显示带有大章节的菜单的任何延迟。您能否描述在 UIWebView 中处理您的触摸事件的方式以及任何其他手势等。此外，当章节加载时是否正在运行 javascript？

# android - 动画相对布局

> ID：10293907
> 
> 赞同：0
> 
> 时间：2012-04-24T07:54:05.113
> 
> 标签：android, android-layout

我的屏幕有以下 XML 结构。我希望我的 ID 为 JourneyLandingView 的相对布局在单击某个按钮时向上滑动并显示 ID 为 JourneyRootView 的相对布局视图，该视图将从底部向上滑动，因为 JourneyLandingView 将 Fill_Parent 设置为高度和宽度，因此旅程根视图必须低于覆盖整个的旅程着陆视图屏幕。我怎样才能做到这一点？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <RelativeLayout android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/journeyLandingView">   
    </RelativeLayout>

    <RelativeLayout android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:id="@+id/journeyRootView"
        android:background="@drawable/root_layer">

    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T08:12:42.127

我相信使用 ViewFlipper 可以实现您想要的那种动画。

您可以将 RelativeLayouts 放入 ViewFlipper，并以编程方式在 ViewFlipper 上设置进出动画。

示例代码：

xml（布局）：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical">
            <Button 
                android:layout_height="wrap_content"
                android:layout_width="fill_parent"
                android:text="click me"
                android:id="@+id/btn"
                />
            <ViewFlipper 
                android:layout_height="fill_parent"
                android:layout_width="fill_parent"
                android:id="@+id/viewFlipper"
                >
            <RelativeLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:id="@+id/journeyLandingView"
                android:background="#FFFFFF"
                >  
            </RelativeLayout>
            <RelativeLayout 
                android:layout_width="fill_parent" 
                android:layout_height="fill_parent"
                android:id="@+id/journeyRootView"
                android:background="#FFA500"
                >

            </RelativeLayout>
            </ViewFlipper>        
        </LinearLayout> 
```

爪哇（活动）：

```
 ViewFlipper vflipper;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        vflipper = (ViewFlipper) findViewById(R.id.viewFlipper);
        vflipper.setInAnimation(this, android.R.anim.slide_in_left);
        vflipper.setOutAnimation(this, android.R.anim.slide_out_right);

        Button btn = (Button) findViewById(R.id.btn);
        btn.setOnClickListener(this);
    }

    public void onClick(View v) 
    {
        vflipper.showNext();
    } 
```

您将使用自定义动画，而不是我在示例代码中使用的“android.R.anim.slide_in_left”和“android.R.anim.slide_out_right”：

```
 vflipper.setInAnimation(this, android.R.anim.slide_in_left);
        vflipper.setOutAnimation(this, android.R.anim.slide_out_right); 
```

但是，我不太擅长制作自定义动画，所以我把它留给你自己。真的希望这有帮助:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T08:47:33.790

I ended up using RelativeLAYOUT instead of LINEARLAYOUT as a parent element and than used following code to animate.

```
TranslateAnimation slide = new TranslateAnimation(0, 0, 0, -1*Methods.screenHeight(this));   
             slide.setDuration(1000);   
             slide.setFillAfter(true);   
             journeyLandingView.startAnimation(slide); 
             slide = new TranslateAnimation(0, 0, Methods.screenHeight(this), 0);   
             slide.setDuration(1000);   
             slide.setFillAfter(true);   
             journeyRootView.startAnimation(slide);

public static int screenHeight(Context ctx) {
        DisplayMetrics displaymetrics = new DisplayMetrics();
        ((Activity) ctx).getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);                 
        return displaymetrics.heightPixels;
    } 
```

# c# - ServiceStack.Redis 无法解析

> ID：10293913
> 
> 赞同：3
> 
> 时间：2012-04-24T07:54:25.350
> 
> 标签：c#, redis, servicestack

我写了这段代码来创建一个redis客户端实例

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ServiceStack.Redis;
using ServiceStack;

class Program
{
    static void Main(string[] args)
    {
        RedisClient a = new RedisClient();
         ..... 
```

但是在尝试构建解决方案时，我收到了这个警告

```
'The referenced assembly "ServiceStack.Redis" could not be resolved because                                   it has a dependency on "System.ServiceModel.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" which is not in the currently targeted framework ".NETFramework,Version=v4.0,Profile=Client". Please remove references to assemblies not in the targeted framework or consider retargeting your project.' 
```

和错误

```
Error3 The type or namespace name 'RedisClient' could not be found (are you missing a   using directive or an assembly reference?) 
```

我已经包含了所需的 dll ServiceStack.Redis。有人可以解释如何解决这个问题，我无法理解警告以及需要做什么才能使代码正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T08:02:06.173

您正在构建的 .NET 配置文件是问题所在。System.ServiceModel.Web 在“客户端配置文件”中不可用。在 Visual Studio 中检查您的项目属性并切换到完整配置文件（即“.NET Framework 4”而不是“.NET Framework 4 客户端配置文件”），然后重新构建。

# c# - 多个 SqlDataSource 是如何工作的？

> ID：10293928
> 
> 赞同：1
> 
> 时间：2012-04-24T07:55:45.230
> 
> 标签：c#, asp.net, visual-studio-2010

一点背景知识......我有一个网页，它只包含 6 个下拉列表和一个网格。填充这些的查询非常简单（最多 4 行），并且已放置到 7 个单独的 SqlDataSource 中。

我面临的问题是初始页面加载时间太长，因此想知道 SqlDataSource 连接实际上是如何工作的。

页面是否为所有来源打开一个事务，然后在最后关闭？或者它（我怀疑）是否为每个 SqlDataSource 打开和关闭一个单独的事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:10:40.207

即使它对数据库进行了 7 次单独的调用，我怀疑是这样，考虑到您正在用我只能想象的一小部分数据填充下拉列表，它也不应该花那么长时间。

这个问题有几种解决方案可能会对您有所帮助。

1.  在要查询的表上设置索引
2.  在数据源中优化你的 sql（你在做任何时髦的连接/子查询吗？）
3.  显式选择下拉列表所需的列（显示和数据成员），仅此而已。

# android - aosp 镜像 - 在“repo 同步”之后，“repo 上传”到 gerrit 失败

> ID：10293929
> 
> 赞同：0
> 
> 时间：2012-04-24T07:55:46.317
> 
> 标签：android, repository, gerrit

我在名为 git 的服务器上有一个 aosp 镜像。
我可以通过 ssh repo init：
repo init -u gerrit2@git:mirrors/platform/manifest
然后 repo sync
问题是尝试上传更改
repo 上传
上传到 platform/frameworks/base
但在 gerrit 中包含项目mirrors/platform
项目名称是“/frameworks/base”
，将 .repo/manifest.xml 中的项目名称更改为客户端的 /frameworks/base 解决了这个问题，但这会破坏 repo 同步。

任何建议都会很受欢迎

谢谢，
阿西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:04:28.370

在终端上，转到 frameworks/base 文件夹并键入以下命令：

```
git config remote.aosp.projectname mirrors/platform/frameworks/base 
```

然后运行`repo upload .`

你可以在 frameworks/base/.git/config 检查 git 配置文件 你正在做的是告诉 git 你有一个额外的文件夹：mirrors

# java - 使用 Apache Commons FTP 库在 Android 上通过 FTP 下载目录

> ID：10293931
> 
> 赞同：1
> 
> 时间：2012-04-24T07:55:54.977
> 
> 标签：java, android, apache-commons, ftp-client

我的 FTP 服务器在 600 个目录中有 1500 个文件，我必须将整个结构原样下载到 Android 手机；递归下载需要很多时间。是否有任何下载目录的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:14:38.260

使用 Zip 文件确实为我节省了 15 分钟！！！

# ruby-on-rails - 键入红宝石新哈希

> ID：10293936
> 
> 赞同：2
> 
> 时间：2012-04-24T07:56:32.537
> 
> 标签：ruby-on-rails, ruby, hash, ruby-1.9.2

Ruby 1.9.2 的新哈希语法有一个奇怪的问题。如何在 1.9.2 中将任何对象作为哈希键？

在 1.8.7 哈希中它可以工作：

```
a="b" 
{"a" => "some",a => "another value",:a => "3rd value"} 
```

但是在 1.9.2 > 我们不能（或者如果我错了怎么办？”）

1.9.2 哈希：

```
{a: "some"} =>  {:a=>"s"} #it convert to old hash format 
```

但

```
a="a" 
{a: "..."} # This doesn't work

{"a": "some value"} => syntax error, unexpected '}', expecting $end
from /home/naveed/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in `<main>'

{1: "s"} =>

SyntaxError: (irb):11: syntax error, unexpected ':', expecting tASSOC {1: "s"} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T08:00:53.223

在 Ruby 1.9 中，您只能在用作键的`:` **符号之后**放置冒号！

**任何**对象都可以使用箭头`=>`，甚至符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T02:33:12.720

To say this another way, the new feature isn't a new general hash syntax, it's a specific tweak for writing hashes where the keys are symbol literals. `{a: 1}` is just a shortcut for `{:a => 1}`, and that's all. If you have anything else as keys, you have to use the regular syntax.

# java - 找不到如何使用 CompoundEdit

> ID：10293942
> 
> 赞同：2
> 
> 时间：2012-04-24T07:56:50.107
> 
> 标签：java, undo, redo

我正在制作这个应用程序，我需要编辑器的撤消/重做支持。我创建了一个 JTextArea 并添加了一个 UndoManager，就像我在某处看到了如何在线做一样。

但结果是按 Ctrl+Z 只会撤消最后输入的字符。再次，之前的角色，等等。我想将这些无关紧要的编辑分组到一个 CompoundEdit 中，因为这就是我认为它的用途。但我在任何地方都找不到一个例子。

如何正确使用 CompoundEdit 来实现这种行为？我想要一个 Ctrl+Z 来撤消键入的最后一个单词，并使用 Ctrl+Y 来重做最后一个单词。

# java - 不理解 spymemcached 的示例代码

> ID：10293948
> 
> 赞同：0
> 
> 时间：2012-04-24T07:57:07.737
> 
> 标签：java, memcached, spymemcached

我正在使用 spymemcached 客户端来实现我的缓存逻辑。不知何故，我需要使用 CAS 来同时修改缓存中的某些内容。

我看到所有者已经展示了一个很好的例子来说明如何从这里使用 CASMutation：[http ://code.google.com/p/spymemcached/wiki/Examples#Using_CAS](http://code.google.com/p/spymemcached/wiki/Examples#Using_CAS)

但是我对这部分代码有一个问题：

```
 // Not strictly necessary if you specify the storage as
 // LinkedList (our initial value isn't), but I like to keep
 // things functional anyway, so I'm going to copy this list
 // first.
 LinkedList<Item> ll = new LinkedList<Item>(current); 
```

即使我仔细阅读了评论，我仍然不明白它在这里试图做什么。如果我们只使用“current”而不复制到“ll”怎么办？有哪些潜在问题？

[更新]

我正在遵循示例代码并实现了这样的方法，这行得通吗？

```
public <T> Set<T> addItemToSet(String key, int expire, final T newItem) throws Exception     {

    // This is how we modify a list when we find one in the cache.
    CASMutation<Set<T>> mutation = new CASMutation<Set<T>>() {

        // This is only invoked when a value actually exists.
        public Set<T> getNewValue(Set<T> current) {
            current.add( newItem );
            return current;
        }

    };

    HashSet<T> initialValue= new HashSet<T>();
    initialValue.add( newItem );

    CASMutator<Set<T>> mutator = new CASMutator<Set<T>>( memClient, getTranscoder() );

    return mutator.cas(key, initialValue, expire, mutation);
} 
```

我最关心的是它是否是线程安全的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:15:05.017

在没有使用该库的情况下，我*相信*如果您不复制会发生什么，在这种特殊情况下，您会在尝试修改时遇到异常`Collections.singletonList()`，这是不可变的。某些实现`List`根本无法修改，假设您可以修改通常是个坏主意。（如果 Java 将 a 的概念分离`List`为索引可读序列和`MutableList`具有所有`add`and`set`操作的子接口，那就太好了，但是哦）。

从更广泛的意义上说，我什至不确定它“不是绝对必要的”。这里发生的情况是，您将获得现有的项目列表，并被要求返回一个新值以在 CAS 条件成立时使用。如果您修改列表然后返回`current`，问题是您失去了条件 - 当前列表**已**被修改（由您），即使 CAS 逻辑意味着您提出的新值被拒绝。

现在也许这实际上并不重要，因为库逻辑意味着实际存储在缓存中的值没有更新；并且更改瞬态也不是问题，因为经过足够的尝试，您的更新将成功。

但尽管如此，我同意完全没有理由不使用函数式方法——你被赋予了一个*read*的输入参数，并且应该返回一个包含你的修改的列表。对于程序的清晰度、稳健性和推理来说，创建一个具有正确值的新列表并返回它会更好。否则可能会或可能不会起作用，但是当您可以选择编写明确的东西时，谁愿意编写其语义取决于其他库的实现细节的代码？

# sql - 如何计算嵌套查询中每年的平均值？

> ID：10293949
> 
> 赞同：2
> 
> 时间：2012-04-24T07:57:09.717
> 
> 标签：sql, average

我想计算一年的平均值，情况如下。

```
 Plant_ID | Year | Month  |  MR   | Range  
  CCAR    | 2009 | 1      | 0,706 | Null  
  CCAR    | 2009 | 2      | 0,626 | 0,08  
  CCAR    | 2009 | 3      | 0,637 | 0,11  
  CCAR    | 2009 | 4      | 0,737 | 0,1  
  CCAR    | 2009 | 5      | 0,552 | 0,19  
  CCAR    | 2009 | 6      | 0,418 | 0,137  
  CCAR    | 2009 | 7      | 0,503 | 0,085  
  CCAR    | 2009 | 8      | 0,645 | 0,058  
  CCAR    | 2009 | 9      | 0,743 | 0,098  
  CCAR    | 2009 | 10     | 0,556 | 0,187  
  CCAR    | 2009 | 11     | 0,298 | 0,258  
  CCAR    | 2009 | 12     | 0,339 | 0,041  
  CCAR    | 2010 | 1      | 0,381 | 0,042  
  Etc. 
```

我想添加两列；1(aMR) 计算每年的平均 MR（维护率），因此 2009 年的一个平均值，2010 年的一个平均值，以此类推，第二个计算每年的平均范围。我的问题是我不知道在我的查询中在哪里执行此操作，因为它变得有点复杂，我可以处理......我已经做了一个声明来添加一个列 aMR，这是 MR 的平均值（见查询代码如下）。但我无法获得每年的平均值（现在它返回所有 MR 值的总平均值）有人可以帮我解决这个问题吗？

```
WITH cte AS (
SELECT Plant_Id, 
       Jaar, 
       Maand, 
      (SUM(Compl) + 0.000) / SUM(Total) AS MR,
       ROW_NUMBER() OVER (ORDER BY Jaar DESC, 
       Maand DESC) AS RowNumber  
FROM (SELECT Plant_Id, 
             Jaar, 
             Late, 
             EarlyJobs, 
             OnTimeJobs, 
             Maand, SUM(EarlyJobs +OnTimeJobs) AS Compl, 
             SUM(EarlyJobs) + SUM(Late) + SUM(OnTimeJobs) AS Total  
      FROM MaintenanceRatebepaen AS MaintenanceRatebepaen_1  
      GROUP BY Plant_Id, Jaar, Maand, Late, OnTimeJobs, EarlyJobs) AS MaintenanceRatebepaen  
WHERE (Jaar >= 2009) AND (Jaar <= 2011) AND (Plant_Id = 'CCAR')  
GROUP BY Jaar, Plant_Id, Maand) 

SELECT d1.Plant_Id, 
       d1.Jaar, 
       d1.Maand, 
       d1.MR, 
       abs(d1.MR - d2.MR) AS [ChangeMRFromPreviousMonth], 
       aMR =(SELECT avg(cte.MR) FROM cte)  
FROM cte d1 
LEFT OUTER JOIN cte d2 ON d2.RowNumber = (d1.RowNumber + 1)  
ORDER BY d1.Rownumber DESC 
```

所以我想要添加两列；一个计算每年 MR (aMR) 的平均值，第二个计算每年平均范围的列。谁能帮我解决这个问题？我对 SQL 很陌生，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:53:12.777

如果你能到达这样的桌子`myTable (Plant_ID, Year, Month, MR, Range)`，你已经完成了大部分工作：

```
SELECT year, AVG(MR) AS "avg_mr", AVG(range) AS "avr_range"
FROM myTable
GROUP BY year; 
```

如果此数据是来自复杂查询的结果，只需为查询替换这个假设的表名：

```
SELECT year, AVG(MR) AS "avg_mr", AVG(range) AS "avr_range"
FROM (
    SELECT ... FROM ... -- complex query goes here
)
GROUP BY year; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:44:59.853

尝试替换`aMR =(SELECT avg(cte.MR) FROM cte)`为

```
aMR = avg (d1.MR) over (partition by d1.Plant_Id, d1.Jaar, d1.Maand) 
```

我不确定 d1.Maand。如果它表示月份，请将其从分区中删除。至于范围（或更改？），您也可以尝试：

```
aChange = avg (d1.MR - d2.MR) over (partition by d1.Plant_Id, d1.Jaar, d1.Maand) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:52:47.727

```
SELECT 
    PLant_id
    ,year
    ,avg(mr) as avgMR
    ,avg(range) as avgRange
 FROM 
    table
 GROUP BY
  Plant_id,year 
```

然后你可以加入这个来计算方差或类似的

```
SELECT 
    t.*
    ,c.*
    ,t.mr - c.avgMR as MRvariance
    ,t.Range - c.avgRange as RangeVariance
 FROM
    table as t
        INNER JOIN (
            SELECT 
                PLant_id
                ,year
                ,avg(mr) as avgMR
                ,avg(range) as avgRange
            FROM 
                table
            GROUP BY
                Plant_id,year
      ) as c
          ON c.plant_id = t.plant_id
          AND c.year = t.year 
```

# activexobject - 无法运行 ActiveXObject("Shell.Application");

> ID：10293958
> 
> 赞同：0
> 
> 时间：2012-04-24T07:57:48.743
> 
> 标签：activexobject

我有一个应用程序页面，它使用 ActiveX 执行安装在客户端上的 exe 文件，但代码只有在 IE 中允许选项时才有效 - “初始化和脚本 ActiveX 控件未标记为可安全执行脚本”启用

```
 <script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        string url = Context.Request.Url.ToString();
        ClientScript.RegisterStartupScript(GetType(), "key", string.Format(@"RunEXE('{0}');", url), true);
        ClientScript.RegisterStartupScript(GetType(), "redir", string.Format(@"Redir('{0}');", Request.QueryString["Source"]), true);
    }
</script>
<asp:Content ID="Main" runat="server" contentplaceholderid="PlaceHolderMain" >
  <script language="javascript" type="text/javascript" >

      function RunEXE(url) 
      {
          var oShell = new ActiveXObject("Shell.Application");
          oShell.ShellExecute('C:/inetpub/wwwroot/SPMananager.exe', url, "", "open", 1);
      }

      function Redir(url) 
      {
          window.location = url;
      }  
</script>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:10:19.087

`Shell.Application`没有标记为“脚本安全”，因为它很容易被滥用。

您不想访问能够破坏您的 Windows 安装的网站。

# php - PHP脚本没有完成它的工作

> ID：10293959
> 
> 赞同：1
> 
> 时间：2012-04-24T07:57:55.407
> 
> 标签：php, upload, xmlhttprequest

我有一个网页，我通过 xmlhttprequest 从画布将 2 个图像发布到 php 脚本。如果我等待 2 个单独的请求完成一切正常，但如果我在第一个完成上传第二个请求后离开页面，我猜它不会做任何事情。

我的问题是我必须保持页面打开直到两次上传完成吗？我想如果一个 xmlhttprequest 启动它无论如何都会完成，即使你关闭浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:02:42.097

否 - xmlhttprequest 绑定到您当前所在的页面。

添加回调以在流程完成时向用户显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:03:17.560

是不是你还在上传图片时离开了页面？（如果图像很大，可能需要一段时间才能完全上传）在这种情况下，您将停止上传，并且管理上传结束的页面 php 可能不会执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:08:11.317

正如 symcbean 所说，所有内容`XMLHttpRequest`都绑定到您当前的页面。因此，如果您更改页面或关闭选项卡或浏览器，所有当前正在运行的请求都将被中止。

> 我想如果一个 xmlhttprequest 启动它无论如何都会完成，即使你关闭浏览器。

您是否喜欢当您关闭一个应用程序时，它并没有真正关闭它并且该应用程序仍会在计算机上运行？

# jquery-mobile - Jquery Mobile 滑块无法在动态创建的对话框页面中正确呈现

> ID：10293966
> 
> 赞同：0
> 
> 时间：2012-04-24T07:58:19.687
> 
> 标签：jquery-mobile

我正在尝试在对话框页面中实现 JQuery Mobile 滑块。

单击按钮时会创建对话框。在此按钮的回调中，我打算从服务器获取一些 JSON 数据并用数据填充对话框。代码片段如下：

```
$('.class-CheckOutList').live ("click", function (event)
{
    $.post("getItemDataForDataEntry.php", {"name":selectedItemID},
        function(data){             
            $.each(data, function(index,value){
                dialogHTML = '<input type="range" name="slider"';
                dialogHTML +=' id="slider-0" value="0" min="0" max="100">';
                $("#itemDataEntryFormContent").html(dialogHTML);                        
                });
            }
            ,"json");
}); 
```

问题是上面的代码没有正确渲染滑块。抱歉，由于我是这个论坛的新手，所以我无法发布图片来展示我得到的东西。

但是，以下代码似乎可以正常工作：

```
$('.class-CheckOutList').live ("click", function (event)
{
                dialogHTML = '<input type="range" name="slider"';
                dialogHTML +=' id="slider-0" value="0" min="0" max="100">';
                $("#itemDataEntryFormContent").html(dialogHTML);                        
}); 
```

有人可以帮忙吗？

谢谢。

+++++++++++++++++++++

更新 --> 我已经设法解决了这个问题，但是在我应用解决方案之后又发生了另一个类似的问题。

我做了什么 --> 以前，为了激活回调，我使用了这样的东西：

```
 <a href='#itemDataEntryDialog' data-rel='dialog' data-role='button'>Change</a>"; 
```

创建对话框。

我所做的解决方案是将以上内容更改为：

```
 <a data-role='button'>Change</a>"; 
```

并将代码更改为：

```
$('.class-CheckOutList').live ("click", function (event)
{
    $.post("getItemDataForDataEntry.php", {"name":selectedItemID},
        function(data){             
            $.each(data, function(index,value){
                dialogHTML = '<input type="range" name="slider"';
                dialogHTML +=' id="slider-0" value="0" min="0" max="100">';
                });
                $("#itemDataEntryFormContent").html(dialogHTML);                        
                          $.mobile.changePage($('#itemDataEntryDialog'), {role: "dialog"} );
            }
            ,"json");
}); 
```

所有这些更改都会导致对话框正确呈现。

但是，当我第二次单击该按钮时，对话框渲染再次失败（就像以前一样）。

所以，我有点回到第一方......

如果能在这里得到一些帮助将不胜感激。它快把我逼疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:10:51.863

我认为你应该调用 $('#myInput').slider() 来强制 jquerymobile 初始化你的新控件。

在你的情况下，我会添加类似的内容：

```
$('#itemDataEntryFormContent input[type="range"]').slider() 
```

...就在 html() 调用和 changepage() 调用之间。

滑块控件的另一个有用功能是调用 $('#mycontrol').slider('update') 如果您通过脚本更新了值。

希望这对某人有帮助:)

# android - Jit：将 JitTable 的大小从 512 调整为 1024 等等……这是什么？

> ID：10293967
> 
> 赞同：7
> 
> 时间：2012-04-24T07:58:23.617
> 
> 标签：android, memory-leaks, jit, dalvik

开发一个 android 应用程序几周了，我才意识到我在 catlog 中收到了这样的消息：

```
Jit: Resizing JitTable from 512 to 1024 
(...)
Jit: Resizing JitTable from 1024 to 2048 
(...)
Jit: Resizing JitTable from 2048 to 4096 
```

这是什么意思 ？是内存泄漏还是类似的东西？

我也在（...）区域得到了这个：

```
04-24 07:59:53.131: D/dalvikvm(874): GC_EXTERNAL_ALLOC freed 207K, 48% free 2980K/5639K, external 1448K/1458K, paused 66ms
04-24 07:59:57.591: D/dalvikvm(874): GC_CONCURRENT freed 162K, 46% free 3122K/5767K, external 1371K/1673K, paused 11ms+17ms
04-24 07:59:58.771: D/dalvikvm(874): GC_CONCURRENT freed 196K, 44% free 3445K/6087K, external 1145K/1657K, paused 10ms+6ms
04-24 08:00:01.411: D/dalvikvm(874): GC_CONCURRENT freed 274K, 39% free 4267K/6983K, external 1145K/1657K, paused 6ms+7ms
04-24 08:00:04.970: D/dalvikvm(874): GC_EXTERNAL_ALLOC freed 31K, 36% free 4479K/6983K, external 1145K/1657K, paused 89ms 
```

大约 14% 免费，我遇到了崩溃。

当我单击菜单按钮（更改活动）时会发生这种情况。我在模拟器中测试，不知道手机中的结果...

logcat崩溃时的错误：

```
04-24 08:26:34.158: E/GraphicsJNI(482): VM won't let us allocate 1536000 bytes
04-24 08:26:34.158: D/dalvikvm(482): GC_FOR_MALLOC freed 0K, 64% free 4280K/11655K, external 11662K/13614K, paused 72ms
04-24 08:26:34.158: D/skia(482): --- decoder->decode returned false
04-24 08:26:34.168: D/AndroidRuntime(482): Shutting down VM
04-24 08:26:34.168: W/dalvikvm(482): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-24 08:26:34.218: E/AndroidRuntime(482): FATAL EXCEPTION: main
04-24 08:34:37.807: E/AndroidRuntime(522): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
04-24 08:26:34.218: E/AndroidRuntime(482): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.KeySoft.OpenGuide/com.KeySoft.OpenGuide.Favourites}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:284)
04-24 08:34:37.807: E/AndroidRuntime(522):  at com.KeySoft.OpenGuide.Top20.readBitmapImage(Top20.java:483)
04-24 08:34:37.807: E/AndroidRuntime(522):  at com.KeySoft.OpenGuide.Top20.addShopToList(Top20.java:251)
04-24 08:34:37.807: E/AndroidRuntime(522):  at com.KeySoft.OpenGuide.Top20.SqlShopsVissza(Top20.java:439)
04-24 08:34:37.807: E/AndroidRuntime(522):  at com.KeySoft.OpenGuide.Top20.onCreate(Top20.java:182)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.os.Looper.loop(Looper.java:130)
04-24 08:34:37.807: E/AndroidRuntime(522):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-24 08:34:37.807: E/AndroidRuntime(522):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 08:34:37.807: E/AndroidRuntime(522):  at java.lang.reflect.Method.invoke(Method.java:507)
04-24 08:34:37.807: E/AndroidRuntime(522):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-24 08:34:37.807: E/AndroidRuntime(522):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-24 08:34:37.807: E/AndroidRuntime(522):  at dalvik.system.NativeStart.main(Native Method) 
```

我在模拟器上使用 256 MB Ram...也许我可以使用真实设备避免所有这些？便宜的设备也至少有 384 MB 内存（Galaxy Mini），但通常更多...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:12:14.443

正如你在评论中问的那样`I use a 800x480 image. How can i make a good background with smaller size ?`

下面是允许您调整位图大小的代码片段。

```
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

int width = bm.getWidth();

int height = bm.getHeight();

float scaleWidth = ((float) newWidth) / width;

float scaleHeight = ((float) newHeight) / height;

// create a matrix for the manipulation

Matrix matrix = new Matrix();

// resize the bit map

matrix.postScale(scaleWidth, scaleHeight);

// recreate the new Bitmap

Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

return resizedBitmap;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-26T02:16:54.260

问题1：它没有泄漏内存。JitTable 用于存储 jni 参考。例如，当您调用 NewGlobalRef Api 时，JitTable 将增加 1 条记录。

此日志意味着 JitTable 不够，VM 将自动调整大小。所以不用担心，您只需保留正确的发布无用参考。没关系。

问题2：
GC_EXTERNAL_ALLOC，当你分配本机内存但内存不够时，会调用GC。GC_CONCURRENT，当你分配的对象大小大于 384K [https://developer.android.com/tools/debugging/debugging-memory.html#LogMessages](https://developer.android.com/tools/debugging/debugging-memory.html#LogMessages)

# javascript - jQuery.event.drop 使用多个配置

> ID：10293971
> 
> 赞同：3
> 
> 时间：2012-04-24T07:58:43.347
> 
> 标签：javascript, jquery-plugins, drag-and-drop

我正在使用 ThreeDubMedia 的 jQuery.event.drop（[此处](http://threedubmedia.com/code/event/drop)）来构建拖放应用程序。如果我没看错，只有添加全局选项的方法。

我有这个插件的不同用例，需要不同的配置。

例如，在应用程序的一部分中，我使用的是多选项

```
$.drop({ 
    multi: true
}); 
```

在同一页面上，就在另一个 div 中，我需要禁用 multi 并设置模式：true - 使用这样的配置

```
$.drop(
{ 
    mode:true,
    multi: false
}); 
```

执行这段代码时，旧的配置被重写，多重拖放将不再起作用 - 除非我再次覆盖它。

关于如何使用多个配置的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T06:44:25.810

想出了一个小“hacky解决方案”。我现在使用拖动“开始”事件将配置替换为拖放操作当前所需的配置。

像这样的东西：

```
$("#myel").drag("start",function( ev, dd ){

    // Replace config

    $.drop({ 
        multi: true,
        mode: "overlap",
    });

    // ... 
}) 
```

在另一个拖动绑定上：

```
$("#myel2").drag("start",function( ev, dd ){

    // Replace config

    $.drop({ 
        multi: false,
        mode: true,
    });

    // ... 
}) 
```

不是很漂亮，但至少它有效。如果您对此有其他解决方案，请分享！

# symfony - Symfony2 在 SonataAdminBundle 中嵌入表单

> ID：10293977
> 
> 赞同：2
> 
> 时间：2012-04-24T07:59:24.537
> 
> 标签：symfony, symfony-sonata, sonata-admin

我有两个实体 Ticket 和 comment 我想使用奏鸣曲管理生成器包在 TicketType 中嵌入 commentType

# zend-framework - Zend Framework - 在应用程序/引导程序中加载模块

> ID：10293980
> 
> 赞同：1
> 
> 时间：2012-04-24T07:59:49.363
> 
> 标签：zend-framework

```
application
|-Payment
| | +--Item
| |   +---Footer.php
| +--Manager.php
|-Boostrap.php 
```

在 application/Boostrap.php 我想像这样初始化支付模块：

```
protected function _initPaymentManager()
{
    $manager = Payment_Manager::getInstance();  
    $manager->registerHandler(new Payment_Item_Footer());   
} 
```

但是框架还没有加载支付模块。如何在 application/Bootstrap.php 中调用 Payment 模块中的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:45:38.457

要确保首先加载模块资源，请添加：

```
$this->bootstrap('modules'); 
```

开始你的`_initPaymentManager`方法。

您还需要`Bootstrap.php`在`application/Payment/`文件夹中。

# google-maps-api-3 - G_SATELLITE_3D_MAP 地图类型涵盖站点的其他元素

> ID：10293981
> 
> 赞同：0
> 
> 时间：2012-04-24T07:59:51.620
> 
> 标签：google-maps-api-3, google-earth-plugin

我的地图在背景中，并被菜单等覆盖。地图工作正常，直到启动谷歌地球插件。插件创建了几乎所有菜单的 div id="earth0"。我试图用 z-index 解决这个问题，但它没有帮助......这是网址： [http](http://turystyka.24gis.pl/) ://turystyka.24gis.pl/ 在右上角启动 3D 地图使用图标 感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:36:54.197

目前，在 Google 地球插件上显示“东西”的唯一方法是使用“iframe shim”

最好的示例页面可以在这里看到 [http://earth-api-samples.googlecode.com/svn/trunk/demos/customcontrols/index.html](http://earth-api-samples.googlecode.com/svn/trunk/demos/customcontrols/index.html)

# objective-c - 音频单元 Ostatus 是否泄漏？

> ID：10293984
> 
> 赞同：0
> 
> 时间：2012-04-24T07:59:57.813
> 
> 标签：objective-c, core-audio, audiounit

我们有一个读取缓冲区的音频单元，并且我在回调函数中有内存增长。它工作得很好，但我花了很多时间来解决这个泄漏。

消除问题后，我发现苹果编写的基本配置代码导致内存增长（每秒 100k）

这是我的回调，在拿完所有其他东西之后，有问题：

```
AudioComponentInstance audioUnit;

static OSStatus recordingCallback(void *inRefCon, 
                                  AudioUnitRenderActionFlags *ioActionFlags, 
                                  const AudioTimeStamp *inTimeStamp, 
                                  UInt32 inBusNumber, 
                                  UInt32 inNumberFrames, 
                                  AudioBufferList *ioData) 
{
    AudioBuffer buffer;
    buffer.mNumberChannels = 1;
    buffer.mDataByteSize = inNumberFrames * 2;
    buffer.mData = malloc( inNumberFrames * 2 );

    // Put buffer in a AudioBufferList
    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0] = buffer;

    OSStatus status;

// problematic block   ******

    status = AudioUnitRender(audioUnit, 
                              ioActionFlags, 
                             inTimeStamp, 
                              inBusNumber, 
                             inNumberFrames, 
                              &bufferList); 

//end of problem block    ******

   free(buffer.mData); 
} 
```

删除该块可以解决问题。

audioUnit 需要一个属性吗？我的基本问题可能是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:32:28.190

就像您在其他问题（http://stackoverflow.com/questions/10278516/memory-is-growth-in-audio-buffer-code）中所问的那样，您不应该在渲染回调中进行 malloc'ing。Malloc 外部，保存对缓冲区的引用，并通过将每个样本设置为零来清除缓冲区。2 for() 循环比 malloc() 快得多*。*

由于内存管理的工作方式令人困惑，您（错误地）被引导相信对 AudioUnitRender() 的实际调用是导致您的问题的原因。它不是。这是上面的 malloc() 调用，再加上在进行下一次渲染回调时无法有效回收此内存的事实。因此引用被保留并且您的内存被泄露。

一般来说，任何音频编程的性能策略都是在渲染回调之外做尽可能多的工作。考虑到这个函数需要在大约 10 毫秒或更短的时间内完成，否则你会在音频流中听到 droupout。

如果您正在为桌面编程，您希望在初始化期间贪婪地 malloc() 大量内存，并保存对数据的引用以快速从中读取，这样您就不需要在渲染期间进行分配。同样，如果您需要计算任何常量或类似的东西，您希望在渲染开始之前进行。

如果你在移动设备上，策略是相似的，但你可能不希望 malloc() 如此激进。尽管如此，由于手机（或 iPad）的 CPU 功率和内存量都是有限的，因此您需要非常小心渲染回调的时间长度。越短越好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:46:59.617

如果您分配或 malloc() 您自己的音频缓冲区（应在音频单元回调**之外**完成），您可能想尝试在音频单元初始化或设置的某处禁用自动缓冲区分配。

```
// Disable buffer allocation for the recorder
UInt32 myDisable = 0;
err = AudioUnitSetProperty(audioUnit,
                           kAudioUnitProperty_ShouldAllocateBuffer,
                           kAudioUnitScope_Output,
                           kInputBus,
                           &myDisable,
                           sizeof(myDisable)); 
```

# iphone - 如何使用 iOS 中的核心文本框架在文本中获取点击事件

> ID：10293987
> 
> 赞同：1
> 
> 时间：2012-04-24T08:00:05.250
> 
> 标签：iphone, ios, nsstring, uitouch, core-text

我在 IPAD 中做一个阅读器应用程序，书籍数据存储在 Sqlite DB 中，我通过核心文本在视图中呈现 DB 的内容......我的文本格式是这样的，例如：1 haii 这是 iPhone。2 这是 iPad。3 这是麦克。等等等等..我只是想在触摸文本时获得触摸事件。例如，如果我点击第一句话，则必须选择任何颜色的第一句话，并触发弹出窗口（子视图或警报视图或操作表）像下面的图片![在此处输入图像描述](../Images/85a502f370401f299309c417f014ccf6.png)

我有这个代码来使文本显示在视图中

```
NSMutableString *combined = [NSMutableString string];

    for(NSUInteger idx = 0; idx < [delegatee.allSelectedVerseEnglish count]; idx++) {
        [combined appendFormat:@"  %d %@", 
         idx + 1, 
         [delegatee.allSelectedVerseEnglish objectAtIndex:idx]];

    }

    self.multiPageView.text =combined; 
```

`combined`字符串是否包含所选章节的圣经经文，所以当我单击第一节经文时，需要像下图那样选择它并弹出一个子视图或警报视图，如下图所示，并且通过选择必须存储该诗句在某处或复制到剪贴板。`multiPageView`是呈现核心文本的视图。我想要就像在橄榄树圣经应用程序或 ibook 中一样。

我没有使用网络视图，由于网络视图的一些限制..有任何想法如何做到这一点..请帮助我。提前致谢。编辑：

```
- (void)textViewDidEndEditing:(UITextView *)textView
{

    mainpopupview.frame =CGRectMake(0, 0, 768, 1004)    ;
    [self.view addSubview:mainpopupview];

    NSRange selectedRange = [textView selectedRange];
    NSString *backString = [maintextview.text substringToIndex:selectedRange.location];
    NSRange backRange = [backString rangeOfString:@"." options:NSBackwardsSearch];
    NSRange backRangee = [backString rangeOfString:@"." options:NSBackwardsSearch];
    int  myRangeLenght = backRangee.location - backRange.location;
    NSRange myStringRange = NSMakeRange (backRange.location, myRangeLenght);
    NSString *forwardString  = [maintextview.text substringFromIndex:backRange.location];
    NSLog(@"%@",[[forwardString componentsSeparatedByString:@"."] objectAtIndex:1]);
    NSLog (@"%@",  [maintextview.text substringWithRange:myStringRange]);

    NSString * myStringTxt = [[forwardString componentsSeparatedByString:@"."] objectAtIndex:1];
    NSLog(@"1 %@", myStringTxt);

      //  maintextview.textColor = [UIColor yellowColor];

    NSRange myStringRangee = [maintextview.text rangeOfString:myStringTxt];
    [maintextview select:self];
    maintextview.selectedRange = myStringRangee;
    } 
```

myStringTxt 包含正确的诗句（.to 之间的menz 文本。但我想选择这个文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:13:18.633

我认为您可以将 UITextview 连接`UIControlEventEditingChanged`到某种方法。因此，当用户选择某些东西时，就会调用该方法。在该方法中，您可以使用以下方法获取所选文本，

```
NSRange range = [txtView selectedRange];
NSString *str = [txtView.text substringWithRange:range]; 
```

从选定的字符串中，您可以执行您喜欢的操作。

如果您的文本视图是可编辑的，您可以获得，

```
NSLog(@"%d",range.location); 
```

知道位置后，您可以创建一个范围并选择字符串。[这](https://stackoverflow.com/questions/668652/iphone-selectedrange-for-a-non-editable-uitextview-or-other-methods-of-click)和[这](https://stackoverflow.com/questions/9982453/make-uitextview-react-to-tap-event-iphone)有相关信息。

> //这里是完整的示例代码。

```
 {
        sampleTextView = [[UITextView alloc] initWithFrame:CGRectMake(10, 10, 60, 300)];
        sampleTextView.text = @"This is sample text to find text under touch. I am not going to use any private api.How am i supposed to do?.Let me see.";
        sampleTextView.editable = YES;
        sampleTextView.delegate = (id)self;
        [self.view addSubview:sampleTextView];
    }
- (void)textViewDidBeginEditing:(UITextView *)textView
{

    [NSTimer scheduledTimerWithTimeInterval:0.001 target:sampleTextView   selector:@selector(resignFirstResponder) userInfo:nil repeats:NO];
}

- (void)textViewDidEndEditing:(UITextView *)textView
{
    NSRange selectedRange = [textView selectedRange];
    NSString *backString = [sampleTextView.text substringToIndex:selectedRange.location];
    NSRange backRange = [backString rangeOfString:@" " options:NSBackwardsSearch];
    NSString *forwardString  = [sampleTextView.text substringFromIndex:backRange.location];
    NSLog(@"%@",[[forwardString componentsSeparatedByString:@" "] objectAtIndex:1]);
} 
```

编辑 ：

我已根据您的要求更新了代码。请在下面找到它，

```
UITextView *textview;
BOOL toggle;

- (void)viewDidLoad
{
    [super viewDidLoad];

    textview = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 300, 300)];
    textview.delegate = (id)self;
    textview.inputView = [[UIView alloc] init];
    textview.text = @"Let's hope the text selection works programmatically!";
    [self.view addSubview:textview];
}

- (void)textViewDidChangeSelection:(UITextView *)textView
{    
    NSRange selectedRange = [textView selectedRange];
    NSString *backString = [textView.text substringToIndex:selectedRange.location];
    NSRange backRange = [backString rangeOfString:@" " options:NSBackwardsSearch];
    NSString *forwardString  = [textView.text substringFromIndex:backRange.location];

    NSLog(@"%@",[[forwardString componentsSeparatedByString:@" "] objectAtIndex:1]);

    NSRange ran = [textView.text rangeOfString:[[forwardString componentsSeparatedByString:@" "] objectAtIndex:1]];

    if (!toggle)
    {
        [self performSelector:@selector(selectText:) withObject:[NSValue valueWithRange:ran] afterDelay:0.001];
    }
    else
    {
        toggle = !toggle;
    }
}

-(void)selectText:(NSValue *)sender
{
    toggle = !toggle;

    textview.selectedRange = [sender rangeValue];
} 
```