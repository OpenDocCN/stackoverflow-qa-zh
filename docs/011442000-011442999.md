# StackOverflow 问答 11442000-11442999

# java - Java Eclipse Maven 版本控制

> ID：11442001
> 
> 赞同：3
> 
> 时间：2012-07-11T21:47:34.400
> 
> 标签：java, eclipse, svn, maven

**以下哪个文件应该是版本控制的？为什么？**

*   从源代码编译的类文件。
*   在构建过程中生成的其他文件，例如目标文件夹下的文件。
*   build.property 文件，其中包含有关开发环境的信息，例如文件路径和数据库信息。
*   Eclipse 创建的文件，例如 .project 和 .classpath。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T21:53:52.217

以上都不是。不仅可以重新创建每个文件，而且它们很可能是特定于环境（开发和运行时）的，它们会占用存储库中的大量空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T07:01:37.490

Maven 中的简单规则是：目标文件夹中的所有内容都不应置于版本控制之下，文件夹本身也不应置于版本控制之下，因为该文件夹中的所有内容都是从源代码 src/main/src/test 等和 pom 创建的.xml 文件本身。

.project 和 .classpath 等文件不应进行版本控制，因为它们将通过将项目导入 Eclipse 来生成，因此通常不需要将它们放入版本控制中，而且它们是特定于 Eclipse 的。在极少数情况下，将它们置于版本控制之下会很有用。

build.properties 文件是特定于 Maven 1 的，将其放入版本控制中可能是个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T22:07:07.327

没有任何。虽然我会考虑将“build.property”文件作为[Maven Build Profiles](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)进行管理。因此，该文件最终可以通过 pom.xml 文件间接进行版本控制。

# javascript - 使用 WinJS.xhr 将文件放入休息服务

> ID：11442011
> 
> 赞同：0
> 
> 时间：2012-07-11T21:48:34.007
> 
> 标签：javascript, windows-8, winjs

真正简单的任务。我有一个指向 Win8 客户端应用程序中的文件的 URL，我是通过执行以下操作获得的：

```
this.image = URL.createObjectURL(file); 
```

现在我需要通过互联网发送文件，如下所示：

```
var options = {
type: method,
url: MyApplication.servicesUri + "rest/" + dpName + queryParameters,
headers: { "Content-type": "application/json" },
data: JSON.stringify(objParameters)
};
WinJS.xhr(options) 
```

所以问题是，我如何“反转”我的第一个操作并获取文件，以便我可以将其设置为`data`我的 PUT 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:02:07.217

我在这里寻找从 URL 中取回 StorageFile 的方法，该 URL 是由调用 URL.CreateObjectURL(storageFile) 创建的。

[我也在social.msdn](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/a335ce9a-c838-45d8-b65a-0b2a3aa9fb79)上看到了 Sebastian 的帖子。无法从 URL 取回存储文件。我只需要使用 WinJS.xhr() 而不是后台传输。

我最终使用解决方案来保留 storageFile 和 URL 引用 - [URL 绑定到 image.src 以显示和 storageFile 上传到 blob。[MSApp.CreateFileFromStorageFile](http://msdn.microsoft.com/en-us/library/windows/apps/hh831249.aspx)对此非常有用。完整的代码片段可以在[这里看到](http://blog.programtheeworld.com/2013/03/22/uploading-image-to-azure-blob-from-windows-store-app/)

**更新**：我找到了一种从 URL.CreateObjectURL 返回的 URL 中获取文件对象的方法。这来自[w3 File API 规范](http://www.w3.org/TR/FileAPI/#url)第 12.7 节。只需使用 WinJS.xhr 即可获取 blob。

```
// url like - blob: <guid>
WinJS.xhr({ url: url, responseType: 'blob' });
}).then(function (req)
{
    var blob = req.response;
}).then(null, function onerror()
{
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:58:14.603

我用不同的方法解决了这个问题，但这个问题的答案来自[DataRead](http://msdn.microsoft.com/library/windows/apps/BR208119)。查看 msdn 页面上的示例。

# java - 如何使用 RangeCellAddress 使用 POI 解锁单元格？

> ID：11442012
> 
> 赞同：0
> 
> 时间：2012-07-11T21:48:37.100
> 
> 标签：java, apache-poi

我正在从头开始创建一个 XSSFSheet 对象，该对象将具有一组属于标头的单元格，并且必须保护该标头免受最终用户的影响。必须启用电子表格中的所有其他单元格才能进行编辑。我怎样才能做到这一点？我可以使用 RangeCellAddress 来解锁一组单元格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:04:20.813

基于[此](http://www.iprodeveloper.com/print/rpgprogramming/locking-cells-in-hssf-64813)链接，它很简单

> 在 HSSF 中锁定单元比您想象的要容易。您首先必须通过调用 HSSFSheet 类的protectSheet() 方法并分配从Excel 中解锁工作表所需的密码来保护工作表。完成后，为工作表中使用的每个单元格样式调用 setLocked() 方法。对于要锁定的单元格，您必须为要解锁的单元格创建单独的单元格样式。

`XSSFSheet`并且`XSSFCellStyle`确实有方法`protectSheet()`和`setLocked()`分别，所以我假设它应该可以工作（虽然没有尝试过）。

# php - PHP - 返回多维数组中可能存在或不存在的值的所有父项

> ID：11442013
> 
> 赞同：0
> 
> 时间：2012-07-11T21:48:42.653
> 
> 标签：php, arrays, multidimensional-array

假设我有一个如下数组：

```
array(
    'men' => array(
        0 => array(
            'name' => 'John',
            'age' => 21
        ),
        1 => array(
            'name' => 'Alex',
            'age' => 19
        ),
        2 => array(
            'name' => 'Bob',
            'age' => 21
        )
    )
) 
```

例如，我如何返回值 21 的所有父键。因此，在此示例中，它将返回 0 和 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:58:57.387

要么使用[array_search](http://php.net/manual/en/function.array-search.php)。或者你可以使用这样的东西。

```
foreach ($array['men'] as $index=>$value) {
    if ($value['age']==21) echo $index;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:27:23.240

```
foreach ($array['men'] as $key => $val) {
    if (in_array('21', $val))
        $result[] = $key;
} 
```

# firefox - 服务器端 (IIS) 设置为忽略不兼容浏览器的 VBScript

> ID：11442014
> 
> 赞同：0
> 
> 时间：2012-07-11T21:48:57.563
> 
> 标签：firefox, iis-7, vbscript

我有一个托管在负载平衡环境中的站点（运行 IIS7 的克隆 2008SP2 服务器）。当站点在 FireFox 或 Chrome 中显示时，一个实例忽略 VBscript 块（正如预期的那样，因为两个浏览器都不支持 VBScript），但另一个实例将服务器端代码作为纯文本写入客户端。两台服务器上的代码完全相同。代码在 IE 中按预期执行。

**在不兼容的浏览器（即 Firefox 或 Chrome）中运行时，需要在服务器端 (IIS) 上启用哪些配置设置以忽略 VBscript 代码？**

我已经看了好几个小时了，除了注释掉另一台服务器上的脚本块之外没有找到任何解决方案，但我觉得我不应该这样做，因为它在一台服务器上按预期被省略了.

明确一点：浏览器编写代码

```
<%@ Language=VBScript %><% Option Explicit ... %> 
```

在一台服务器上的 Firefox/Chrome 中访问该页面，但在另一台服务器上忽略它（如预期的那样）。该脚本在 IE 中的两台服务器上都正确执行。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:44:17.720

在htm/html文件中编写vbscript或asp时，IIS7不会在IE以外的浏览器中解析内容。要在其他浏览器中解析内容，请将以下内容添加到标签下的 web.config 中。

```
<add name='HTM-TO-ASP' path='*.htm' verb='*' modules='IsapiModule' scriptProcessor='C:\windows\system32\inetsrv\asp.dll' resourceType='File' requireAccess='Script' />

<add name='HTML-TO-ASP' path='*.html' verb='*' modules='IsapiModule' scriptProcessor='C:\windows\system32\inetsrv\asp.dll' resourceType='File' requireAccess='Script' /> 
```

这告诉 IIS 将 htm/html 映射到 asp.dll 并添加处理程序映射。

# actionscript-3 - 如何优化除以 100？

> ID：11442018
> 
> 赞同：3
> 
> 时间：2012-07-11T21:49:06.820
> 
> 标签：actionscript-3, math, optimization

我有一段代码运行到一个循环中，除以 100，这减少了我的 fps 计数。

在大多数情况下，**int/uint**类型除以 100，得到一个简单的**Number**。

我只是想知道任何优化它的方法。

编辑：*@scriptocalypse*建议的小基准 - 乘以 0.01：

```
import flash.utils.getTimer;

for(var k:Number = 20; k > 0; k--)
{
    var a:int = getTimer();

    var o:Number = 100;
    var p:Number;
    for(var i:Number = 100000000; i > 0; i--)
    {
        p = o * 0.01;  // took 423~510   <--------------
        //p = o / 100;  // took 713~768   <--------------
    }

    var b:int = getTimer();

    trace( b - a);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T21:52:47.040

我怀疑这不是导致您的大部分问题的除法，因为与其他操作相比，即使是缓慢的数学运算也应该相对较快。

虽然这样：

```
x * 0.01; 
```

理论上应该比

```
x / 100; 
```

我仍然怀疑它不会有太大的不同。你还在循环中做什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T13:23:51.007

你在评论中问：*“位移怎么样？也许它可以改进更多？”*

没有可用于除以 100 的按位运算，您可以使用位移仅除以 2 的幂（2、4、8、16 ...）。

[这是](http://www.bobbyberberyan.com/2010/08/bitwise-operations-in-actionscript-3/)一个很好的帖子。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T21:51:56.250

几乎可以肯定，正确的答案是**不要**。程序员应该编写清晰易读的代码，编译器应该优化。

# powershell - Powershell $Error 对象没有立即填充到 PSM1 模块中

> ID：11442023
> 
> 赞同：9
> 
> 时间：2012-07-11T21:49:23.393
> 
> 标签：powershell, exception-handling

我在使用 Powershell 时遇到了一个特殊问题。我在 catch 块中捕获了一个异常，但没有填充全局 $Error 对象。

一个简单的例子，它会按预期运行是这样的：

```
function Bar
{
  Foo
}

function Foo
{
  try
  {
    $Error.Clear()
    throw "Error!"
  }
  catch
  {
    "Caught an error - current error count $($Error.Count)"  
  } 
  finally
  {
    "Cleaning up - current error count $($Error.Count)"  
  }
} 
```

如果您调用 Bar，输出与您期望的一样

```
Caught an error - current error count 1
Cleaning up - current error count 1 
```

我遇到问题的代码几乎相同，只是它从模块加载 Foo 。不确定这是一个错误，还是我不明白的东西（必须检查我的 Powershell in Action 书！）

如果我将 Foo 保存到一个模块 - Foo.psm1

```
function Foo
{
  try
  {
    $Error.Clear()
    throw "Error!"
  }
  catch
  {
    "Caught an error - current error count $($Error.Count)"  
  } 
  finally
  {
    "Cleaning up - current error count $($Error.Count)"  
  }
}

Export-ModuleMember -Function Foo 
```

然后我执行以下操作

```
Import-Module .\Foo.psm1
$Error.Clear()
"Current error count $($Error.Count)"
Foo
"Current error count $($Error.Count)" 
```

我最终得到

```
Current error count 0
Caught an error - current error count 0
Cleaning up - current error count 0
Current error count 1 
```

请注意，Foo 不再看到对 $Error 所做的任何更改。因此，代码的模块化正在改变错误传播行为。任何人都可以加入这背后的推理吗？

我应该注意，我可以通过自动变量 $_ 获取特定捕获的异常，但我希望在调用堆栈中的这一点上获得整个集合。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T17:48:46.473

正如 Ethan 所提到的，您需要查看 $global:error 以查看所有错误。模块总是有它们自己的 $error 变量，但它（大部分）没有被使用。

背景：有一次，我们曾考虑将模块代码中发生的错误隔离到模块范围，但最终决定将所有错误添加到全局错误集合中，因为它本质上是一个错误日志（如内存中的事件日志）。不幸的是模块作用域 $error 在发布之前没有被删除，因此您需要使用全局作用域限定符来访问“真实”$error 变量。

布鲁斯·帕耶特，微软公司

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-12T01:20:43.077

我之前没有注意到这一点，但也许 $error 集合像任何其他变量一样被限定为模块。尝试在测试脚本的关键点比较以下两个显式范围变量的值：

```
"Errors - Global: {0}; Module: {1}" -f $global:error.count, $script:error.count 
```

让我知道你是怎么办的。

# c# - Windows Phone XNA 射击游戏 => UDP、TCP 还是混合的？

> ID：11442031
> 
> 赞同：3
> 
> 时间：2012-07-11T21:49:42.123
> 
> 标签：c#, windows-phone-7, xna, windows-phone-7.1

几个月前，我在 Windows Phone 上开发了一款实时快节奏射击游戏，然后我也将游戏移植到了 Windows。

现在我正在考虑让游戏支持多人游戏，但我有几个问题，因为我以前从未做过：

考虑到它是一个射击游戏，所以有很多子弹、各种类型的游戏对象、玩家/小怪的动作等......：

*   在这种情况下使用异步套接字是否足够快？（带有 Windows 播放器的 WP 播放器或带有 WP 的 WP 或带有 Windows 的 Windows）
    *   注意：玩家将通过集中式套接字服务器进行通信
*   Windows Phone Sockets 的性能够好吗？(3G/4G, Wifi)
*   我应该使用 TCP 还是 UDP 或两者都使用（例如，用于对象/动作的 UDP 和用于聊天的 TCP）
*   您将如何继续发送数据，您将发送什么样的数据以及多久发送一次？

提前非常感谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:05:36.243

通常射击游戏使用 UDP 发送带有射击的数据包，而不会考虑 100% 的时间发送它们，因为有这么多数据包，无论如何如果有一些在电缆中丢失也没关系。但是为什么不先尝试 TCP，然后如果出现问题再切换到 UDP 呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:03:44.957

一般建议是发送最少量的信息，这些信息通常倾向于用户输入而不是世界状态。

例如，在游戏进行到 142 秒时，用户 A 按下了开火按钮。在 145 秒时，用户 B 开始向左移动。

（从用户输入来看，每个客户端都有可能重新创建世界状态......通常。如果你有随机元素，那么这是在你的设计中捕捉和重新思考它们的好方法。）

至于协议选择，我建议从 HTTP 开始，然后“向下”工作。这提供了最强大的“内置”功能（例如 NAT 遍历和代理），并有望尽早突出您可能遇到的任何网络逻辑问题（例如您的预测算法是否合理接近玩家的游戏风格，以便在重新同步时'ing 确实发生在客户端上，“快速恢复”并不烦人）。

当/如果您确定 HTTP 太重/太慢，那么您可以在知道需要实现什么的情况下将其换成 UDP 之类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T01:11:24.750

我会乞求、借用和窃取其他游戏的好点子。[id Software 的 Quake 3 已经开放了网络源代码，很多人已经对其进行了剖析](http://fabiensanglard.net/quake3/network.php)。当今大多数 FPS 游戏都使用 UDP 来确保及时交付时间敏感数据。丢弃的旧数据不需要新数据包。

Quake 3 使用一种策略，即最后一个已知的良好快照 ID 与来自客户端的每个数据包一起发送，而服务器在内部为每个快照发送一个 ID。此时，当客户端丢弃数据时，它会继续在其一侧发送最后一个已知的正确 ID，并且服务器会从其快照缓冲区发送一个差异。

如果您使用 TCP，您将不得不等待每个客户端确认旧数据，这将增加人为延迟，这对于第一人称射击游戏来说是无法忍受的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:03:19.147

混合：对于身份验证、登录或更改服务器/客户端信息，使用 TCP，但当大多数数据通过电缆传输时使用 UDP。由于面向连接的操作，TCP 会产生更高的延迟。

# http - 什么会导致 http 服务器使用不同版本的 http 协议响应不同的客户端？

> ID：11442032
> 
> 赞同：0
> 
> 时间：2012-07-11T21:49:53.583
> 
> 标签：http

我有一个奇怪的问题。我正在向本地网络上嵌入调制解调器的网络服务器发送 HTTP GET 请求（嵌入式网络服务器是调制解调器“控制面板”的接口）。当从我的台式机或手机发送请求时，服务器会以 HTTP/1.0 响应进行响应。但是，当我从笔记本电脑发送请求时，服务器会以 HTTP/0.9 响应。问题是嵌入式网络服务器对 HTTP/0.9 的实现是错误的，以至于响应标头被搞砸了，因此客户端无法理解响应（标头是响应正文的一部分）。无论用于发送请求的客户端如何，都会发生此行为。所以，我的问题是：什么会导致嵌入式网络服务器响应不同的 HTTP 版本？

以下是详细信息：

*   调制解调器：HughesNet HN7000S
*   嵌入式网络服务器：WindWeb/1.0
*   桌面操作系统：Vista 64 Home Premium/SP2
*   手机操作系统：Android 2.3.4
*   笔记本操作系统：Win7 Home Premium/SP1
*   桌面客户端：FireFox v13.0.1、IE8 和 perl 命令行客户端（使用标准 LWP 和 HTTP perl 模块实现
*   手机客户端：FireFox v14.0 和股票 Android 浏览器
*   笔记本电脑客户端：Firefox v13.0.1、IE9 和与桌面相同的 perl 命令行客户端
*   桌面连接到调制解调器：以太网直接连接到调制解调器，以太网通过无线路由器电话连接到调制解调器：通过无线
*   笔记本电脑与调制解调器的连接：以太网直接连接到调制解调器，以太网通过无线路由器，无线

[注意：我家没有手机信号，因此无法通过数据连接尝试手机]

我尝试强制台式机和笔记本电脑的 IP 地址相同（显然，在此过程中断开一个或另一个），以防嵌入式网络服务器以某种方式关闭传入请求的 IP 地址以确定哪个版本HTTP 响应。

当然，HughesNet 的技术支持让我一无所获。我尝试在网上查找有关 WindWeb 嵌入式网络服务器的文档，但没有找到任何东西。

笔记本电脑从任何其他网络服务器获得“合理”的响应都没有问题……所以我倾向于认为问题出在调制解调器中的嵌入式网络服务器上。但是，由于嵌入式网络服务器响应错误的 HTTP/0.9 响应似乎只发生在从我的笔记本电脑发送请求时，并且无论客户端发送请求是从笔记本电脑上发送的，它都会发生，我不得不认为问题与此有关在笔记本电脑上有一些网络设置，但我无法想象什么设置会影响嵌入式服务器响应的 HTTP 版本。

任何人都可以帮忙吗？使用直接解决方案还是使用其他我应该检查的东西？是否有关于这 3 台机器、它们的连接性或任何其他有助于诊断问题的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:09:48.227

大多数客户端发送一个客户端字符串来标识自己，例如`Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.16) Gecko/20120602 Iceweasel/3.5.16 (like Firefox/3.5.16)`. 一些损坏的服务器使用它来调整内容。例如，我的 uni 的文件服务器不允许我使用 wget 下载一些 css 文件（这很有趣），除非我调用 wget`-U ""`以不发送空的客户端字符串。

# pdf - 在 Postscript 中使用 BoundingBox/CropBox 裁剪 PDF

> ID：11442033
> 
> 赞同：3
> 
> 时间：2012-07-11T21:50:00.930
> 
> 标签：pdf, postscript, xpdf

我想知道 Postscript 文件中 BoundingBox 和 CropBox 之间的实际区别是什么。我想裁剪 PDF 文件并仅将裁剪的部分显示为另一个 PDF 文件。我使用 xpdf 库中的 pdftops 将 PDF 文件转换为 postscript。我计划编辑 BoundingBox/CropBox 参数，以便只显示原始文件的特定部分。但是当我打开文件时，我仍然看到原始文件。我应该更改哪个参数来裁剪 PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T07:15:01.680

PostScript 根本没有 BoundingBox 或 CropBox，只有媒体请求，相当于 PDF 文件中的 MediaBox。（您可以将 CropBox 转换为具有类似效果的页面级剪辑）

对我来说，您要做什么并不明显，如果您想要一个带有修改后的 CropBox 的 PDF 文件，那么您只需更改 PDF 文件中的 CropBox，我看不出您为什么要转换为 PostScript。

如果要从原始文件中裁剪区域，请将其复制并更改复制文件中的 CropBox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:43:13.950

我设法让代码工作以裁剪 pdf。它只是 ghostscript 中的一个简单脚本，它生成了新的裁剪 pdf。解决方案在这里： [使用 Ghostscript 9.01 裁剪 PDF](https://stackoverflow.com/questions/6183479/cropping-a-pdf-using-ghostscript-9-01?rq=1)

# ruby-on-rails - 安全目录文件上传与 Carrierwave 失败（生产）

> ID：11442039
> 
> 赞同：0
> 
> 时间：2012-07-11T21:50:19.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

我按照[本指南](https://github.com/jnicklas/carrierwave/wiki/How-To%3A-Secure-Upload)学习了如何将文件上传到服务器上的安全目录，而不是公共目录（默认）。当我尝试去展会查看链接时，我得到：

```
undefined method `redocument' for #<ActionView::Helpers::FormBuilder:0xa2ae338>
near: <%= link_to File.basename(f.redocument.url), "/uploads/#{f.id}/#{File.basename(f.redocument.url)}" %> 
```

呈现链接时遇到问题。我在这里错过了什么吗？我不应该逐行复制此代码吗？他们没有指定我是否应该替换'redocument'，但我的模型名称是Entry，并且存储文件链接的字符串是mv_link。任何人都知道修复是什么？

更新：希望方向正确

我将“f.redocument”的所有案例都更改为“@entry.mv_link”。现在在显示页面上，链接就在那里。但是，当我单击它并尝试下载时，控制器指定的路径已损坏。这就是控制器

```
def download
  path = "/#{redocument.redocument}"
  send_file path, :x_sendfile=>true
end 
```

我应该将此路径更改为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:21:56.433

好的，在这里勉强......但我认为你有这样的设置：

```
class Entry < ActiveRecord::Base
  mounts_uploader :mv_link, YourUploaderClass
end 
```

在您的控制器中，您需要找到条目，然后从 mv_link 获取路径

```
def download
  @entry = Entry.find(params[:id])
  send_file @entry.mv_link.path, disposition: 'attachment', x_sendfile: true
end 
```

# ios - 在 iOS 和 Xpath 搜索中保持重复枚举

> ID：11442046
> 
> 赞同：1
> 
> 时间：2012-07-11T21:50:39.237
> 
> 标签：ios, xpath, hpple

因此，我正在使用 HPPLE 在 iOS 应用程序中执行一些 Xpath 查询，该应用程序需要对一些站点进行一些基本的 Web 抓取。现在一切都很好，但我想看看是否有另一种更优雅的方式来做我正在做的事情。目前我正在做的是我正在使用 XPath 在网站中查找特定的 div 类，在该网站中（基本上就像一个帖子）可以有任意数量的具有文本的孩子，以及其他有文本的孩子埋在另一组孩子里。现在，我基本上使用重复的 For 循环来检查“文本”标签名是否存在，如果存在，则将该值添加到字符串中，如果不存在，则检查是否还有其他级别的子项需要扫描，我有 4 个级别到目前为止相同的搜索。

```
 for (TFHppleElement *element in searchNodes) {
    //If a Text Node is found add it to the String, if not search again with next layer
    if ([element.tagName isEqualToString:@"text"]) {
        [bigString appendString:element.content];
    }
    //1\. First layer Scan
    if (element.children.count > 0) {
        for (TFHppleElement *nextStep in element.children) { 
            if ([nextStep.tagName isEqualToString:@"text"]) {
                [bigString appendString:nextStep.content];
            }

            //2\. Second layer Scan
            if (nextStep.children.count > 0) {
                for (TFHppleElement *child in nextStep.children) { 
                    if ([child.tagName isEqualToString:@"text"]) {
                        [bigString appendString:child.content];

                    }

                    //3\. Thrid Layer Scan
                    if (child.children.count > 0) {
                        for (TFHppleElement *children in child.children) { 
                            if ([children.tagName isEqualToString:@"text"]){
                                [bigString appendString:children.content];
                            }

                            //4\. Fourth Layer Scan
                            if (children.children.count > 0) {
                                for (TFHppleElement *newchild in children.children){
                                    if ([newchild.tagName isEqualToString:@"text"]) {
                                        [bigString appendString:newchild.content];

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

我想要某种方法构建，我基本上可以通过初始 NSArray 发送，然后它检查其他元素，然后使用下一个数组再次执行搜索，同时继续构建一个 NSMutableString 最终将每次搜索的所有文本。如果没有，我现在似乎工作正常，我只是想看看是否有更清洁的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:30:46.113

我认为你想要的是[递归](http://en.wikipedia.org/wiki/Recursion)。您可以编写一个将元素传递给的递归方法，让它在自身外部修改一些 NSMutableString（可能是一个实例变量？），然后`children`如果可以的话，用它自己的调用自身。例如（未编译，未经测试）：

```
@property (nonatomic, retain) NSMutableString * bigString;
// snip
@synthesize bigString;
// snip - assume bigString gets initialized somewhere

- (void)checkElement:(TFHppleElement *)elem {
    if ([element.tagName isEqualToString:@"text"]) {
        [bigString appendString:elem.content];
    }

    if (element.children.count > 0) {
        for (TFHppleElement * child in element.children) {
            [self checkElement:child];
        }
    }
} 
```

# unit-testing - 未获取 Qunit 对测试脚本的更改

> ID：11442050
> 
> 赞同：2
> 
> 时间：2012-07-11T21:51:12.960
> 
> 标签：unit-testing, qunit

我设置了一个新的 QUnit 解决方案：

```
 <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>QUnit Example</title>
      <link rel="stylesheet" href="/resources/css/qunit.css">
    </head>
    <body>
      /h1>
    <h2 id="qunit-banner">
    </h2>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests">
    </ol>
      <script src="/resources/js/qunit.js"></script>
      <script src="/resources/tests.js"></script>
    </body>

</html> 
```

我的`tests.js`脚本文件中有一个测试：

```
test( "hello test", function() {
  ok( 1 == "1", "Passed!" );
}); 
```

测试通过，因此此设置有效。

但是，当我对 进行更改时`tests.js`，它们并没有被拾取。例如，如果我添加一个测试，它就不会运行。使测试运行的唯一方法是重命名`tests.js`为其他名称，例如`tests2.js`，并更新引用。然后拾取更改。

任何人都知道发生了什么以及如何解决这个问题，所以我不需要不断更新参考和更改文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:58:32.323

我遇到了类似的问题。这是由于缓存。一种解决方案是在每次更改后多次硬刷新页面，或者只是清空缓存。另一种方法是将修订号添加到您的文件中，以便每次都重新加载它们：http: [//www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/](http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/)

# asp.net - 如何在单独的窗口中打开 ListItem 超链接

> ID：11442054
> 
> 赞同：0
> 
> 时间：2012-07-11T21:51:50.680
> 
> 标签：asp.net, vb.net

我希望以项目符号列表项的值给出的超链接在单独的窗口中打开。目前它在同一个窗口中打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:53:56.700

使用 Target 属性并将其设置为“_blank”：

[BulletedList.Target 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.bulletedlist.target.aspx)

# php - PHP/Magento：是否可以编辑对象中的“受保护”成员？

> ID：11442060
> 
> 赞同：1
> 
> 时间：2012-07-11T21:52:13.583
> 
> 标签：php, magento, object, reflection

我有兴趣修改此对象中的一些受保护值。更具体地说，我想`price`根据`method`可能的情况来修改。这个对象是对 UPS 的 XML 运费请求的响应。我遇到的问题是不同方法返回的费率不是我需要的。我不提供具体尺寸（对于任意请求无法提供确切数字），因此 UPS Ground 以外的任何方法都会产生不合适的费率。请注意，一种解决方案是首先在 XML 请求中为其提供一些估计尺寸（我正在以这种方式进行测试），但我也想知道如何使用该对象。

我试图简单地访问这个对象中的一些值，但它似乎受到保护，它们不会打印到浏览器？我试过了`$object->_rates[0]`，`$object->{_rates[0]}`但他们不打印任何东西。有人可以指出我修改`price`此对象中的值的正确方向吗？

```
$object = 
Mage_Shipping_Model_Rate_Result Object
(
    [_rates:protected] => Array
    (
            [0] => Mage_Shipping_Model_Rate_Result_Method Object
            (
                [_data:protected] => Array
                (
                    [carrier] => ups
                    [carrier_title] => UPS
                    [method] => 03
                    [method_title] => UPS Ground
                    [cost] => 8.9
                    [price] => 8.9
                )
            [_hasDataChanges:protected] => 1
            [_origData:protected] => 
            [_idFieldName:protected] => 
            [_isDeleted:protected] => 
            [_oldFieldsMap:protected] => Array
            (
            )
            [_syncFieldsMap:protected] => Array
            (
            )
        )
....
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:10:49.220

通常受保护的属性受到保护是有原因的。有一种方法`getAllRates()`可以让你编辑你想要的。

这意味着你可能会得到这样的东西：

```
foreach($object->getAllRates() as $rate) {
    $rate->setPrice($rate->getPrice() * 123);
} 
```

[Magento 文档](http://srhwd.com/documentation/magento/class_mage___shipping___model___rate___result___method.html)中记录了更改价格的方法。

但是，通常可以使用[Reflection](http://at2.php.net/manual/de/reflectionproperty.setaccessible.php)更改属性/方法的可见性。

例如你可以使用这个：

```
$object = new Mage_Shipping_Model_Rate_Result();
$rp = new ReflectionProperty($object, '_rates');
$rp->setAccessability(true); 
```

但是，这通常不是您想要的方式！这不是[OOP](http://php.net/oop)方式。

# php - Codeigniter 从验证回调返回 NULL

> ID：11442061
> 
> 赞同：1
> 
> 时间：2012-07-11T21:52:15.313
> 
> 标签：php, validation, codeigniter

我正在使用回调来验证文本输入提交的 URL。`NULL`如果文本输入为空（意味着用户删除了他/她的 URL 条目），我需要在数据库中插入。我正在尝试下面的代码，但它只是在数据库中插入一个空字符串。

```
$this->form_validation->set_rules('image_url', 'Image URL', 'trim|xss_clean|prep_url|callback__validate_url'); 
```

回调：

```
 function _validate_url($str)
    {
        if (isset($str))
        {
            $pattern = "/^(http|https):\/\/([A-Z0-9][A-Z0-9_-]*(?:\.[A-Z0-9][A-Z0-9_-]*)+):?(\d+)?\/?/i";
            if (!preg_match($pattern, $str))
            {
                $this->form_validation->set_message('_validate_url', 'URL is not valid');
                return FALSE;
            }
            else 
            {
                if (!isset($str)) //if input empty
                {
                    return NULL; //return NULL to input?
                }

                return TRUE;
            }
        }

        return TRUE; 
    } 
```

如何通过回调将值返回到输入？

**更新：**

上面的代码是错误的，我无法`NULL`在输入中返回（我猜是因为它返回一个字符串）所以我在回调之外做了

```
 $image_url = $this->input->post('image_url');

    if (empty($image_url)) 
    { 
         $image_url = NULL; 
    }

    $data = array (
            'content' => $this->input->post('content'),
            'image_url' => $entry_image_url
    );

    //add to database 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:09:35.530

看这段代码，它有一个不可能的条件：

```
 if (isset($str)) // Everything in this block runs if $str is "set"
    {
        if (!preg_match($pattern, $str))
        {
            //
        }
        else 
        {
            if (!isset($str)) // But you're checking if $str is not set....
            {
                // This can never happen!
            }

        }
    } 
```

用适当的方法替换该条件以检查输入是否为空，也许检查 if `trim($str) === ''`或什至`empty($str)`.

# javascript - MediaElement.js setSrc() 加载文件但不改变 pluginType

> ID：11442062
> 
> 赞同：3
> 
> 时间：2012-07-11T21:52:18.310
> 
> 标签：javascript, html5-video, mediaelement.js

我正在使用[mediaelement.js](http://www.mediaelementjs.com/)播放 mp3/mp4/wmv 的页面（是的，我们有很多 wmv）。我有一个链接列表，这些链接应该会改变播放器。我的努力是通过 javascript 对播放器进行更改，以便页面不会刷新。

此代码有效，但每次都会刷新。（链接已删除）

```
<?php
$file = null;
$file = $_GET["file"];
$format = null;
if (preg_match("/mp4/i", $file)) $format = "mp4";
if (preg_match("/webm/i", $file)) $format = "webm";
if (preg_match("/wmv/i", $file)) $format = "wmv";
if (preg_match("/mp3/i", $file)) $format = "mp3";
if (preg_match("/ogg/i", $file)) $format = "ogg";
$mime = null;
if ($format == "mp4") $mime = "video/mp4";
if ($format == "webm") $mime = "video/webm";
if ($format == "wmv") $mime = "video/wmv";
if ($format == "mp3") $mime = "audio/mp3";
if ($format == "ogg") $mime = "audio/ogg";
$element = "video";
if ($format == "mp3" || $format == "ogg") $element = "audio";
// you have to escape  (\) the escape (\) character (hehehe...)
$poster = "media\\120701Video.jpg";
$height = "360";
if ($format == "mp3") $height = "30";
?>
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Embed</title>
<link rel="stylesheet" href="include/johndyer-mediaelement-b090320/build/mediaelementplayer.min.css">
<style>
audio {width:640px; height:30px;}
video {width:640px; height:360px;}
</style>
<script src="include/johndyer-mediaelement-b090320/build/jquery.js"></script>
<script src="include/johndyer-mediaelement-b090320/build/mediaelement-and-player.js"></script>
</head>
<body>
<ul>
    <li><a href="embed.php">Reset</a></li>
    <li><a href="?file=media/120701Video-AnyVideoConverter.mp4">Alternative (mp4)</a></li>
    <li><a href="?file=media/120701Video-Ffmpeg-Defaults.webm">Alternative (webm)</a></li>
    <li><a href="?file=media/AreYouHurting-Death.wmv">Alternative (wmv)</a><li>
    <li><a href="?file=media/AreYouHurting-Death.mp3">Alternative (mp3)</a></li>
</ul>
<?php if ($file) { ?>
<video src="<?php echo $file; ?>" controls poster="<?php echo $poster; ?>" width="640" height="360"></video>
<div id="type"></div>
<script>
var video = document.getElementsByTagName("video")[0];
var player = new MediaElementPlayer(video, {
    success: function(player) {
        $('#type').html(player.pluginType);
    }
});
<?php } ?>
</script>
</body>
</html> 
```

此代码需要`<video>`在初始时和文件一起加载，以便设置播放器模式 ( `pluginType`)。然后，它将仅播放预先建立的模式支持的格式（本机模式下的 firefox 不会播放 mp4）。查看[ajax 版本的现场演示](http://www.flcbranson.org/embed.php?player=mediaelement)。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Embed</title>
<link rel="stylesheet" href="http://www.mediaelementjs.com/js/mejs-2.9.2/mediaelementplayer.min.css">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://www.mediaelementjs.com/js/mejs-2.9.2/mediaelement-and-player.js"></script>
</head>
<body>
<ul>
    <li><a href="javascript:player.pause(); player.setSrc('media/120701Video-AnyVideoConverter.mp4'); player.load(); player.play();">Alternative (mp4)</a></li>
    <li><a href="javascript:player.pause(); player.setSrc('media/120701Video-Ffmpeg-Defaults.webm'); player.load(); player.play();">Alternative (webm)</a></li>
    <li><a href="javascript:player.pause(); player.setSrc('media/AreYouHurting-Death.wmv'); player.load(); player.play();">Alternative (wmv)</a></li>
    <li><a href="javascript:player.pause(); player.setSrc('media/AreYouHurting-Death.mp3'); player.load(); player.play();">Alternative (mp3)</a></li>
</ul>
<video controls src="media/WordProductionCenter.mp4"></video>
<div id="type"></div>
<script>
var video = document.getElementsByTagName("video")[0];
var player = new MediaElementPlayer(video, {
    success: function(player) {
        $('#type').html(player.pluginType);
    }
});
</script>
</body>
</html> 
```

似乎我需要类似的东西`setType()`，但我看不到这样的选择。我已经阅读了几个页面，其中提到了在 javascript 运行后刷新 DOM，但我无法成功地做到这一点（我对 javascript 的了解足够多，可以破解并让东西正常工作，但不足以创建全新的事物）。

值得注意的是，Silverlight 不适用于 Internet Explorer 8 或 Safari（不确定是我的代码、mejs 还是浏览器）。此外，Silverlight 和 Flash 都不能播放 mp3 或 webm（同样，不确定问题出在哪里）。

有没有办法将不同类型的文件动态加载到 mediaelement 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T10:59:17.943

您可以更改 MediaElement 播放器的来源，使用`setSrc`它也接受一个值数组。例如：

```
player.setSrc([
   { src:'newfile.mp4', type:'video/mp4' },
   { src:'newfile.webm', type:'video/webm' }
]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T12:40:46.130

对我来说它工作！

```
 if (video == undefined)
        video = new MediaElementPlayer('#playerVideo');

    video.pause();
    video.setSrc($("#linkVideo").val());
    video.media.load();
    video.play(); 
```

# solr - Solr - 如何获得具有最低价格的文档

> ID：11442063
> 
> 赞同：2
> 
> 时间：2012-07-11T21:52:24.017
> 
> 标签：solr, max, minimum

我有一个 Solr 实例，其中包含代表产品的文档。每个文档都有一个`UnitPrice`与之关联的属性，它的类型为`float`，在`schema.xml`.

是否可以执行查询以返回最低价格的文档？我还想找到价格最高的文件。这是可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:54:40.707

`q={!lucene}*:*&sort=UnitPrice+asc&rows=1`

这将返回按价格排序的[MatchAllDocsQuery的第一个结果。](https://builds.apache.org/job/Lucene-trunk/javadoc/core/org/apache/lucene/search/MatchAllDocsQuery.html)

# ios - 核心数据和版本控制

> ID：11442070
> 
> 赞同：1
> 
> 时间：2012-07-11T21:52:48.347
> 
> 标签：ios, core-data

我有一个核心数据模型，它将在两个独立的分支中获得两个新的模型版本。

*   合并两个分支会正常工作吗（`xcdatamodel`似乎是一个 XML 文件）？也就是说，它会创建两个新版本吗？

*   合并后的版本控制如何：我将如何创建一个包含两个版本的更改的新模型版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:06:43.703

我发现合并核心数据模型真的很痛苦，并决定不惜一切代价避免它。

版本化数据模型实际上是包含每个版本的模型文件的目录。由于对于自动轻量级版本，Core Data 需要按顺序处理所有版本文件，因此它在当前版本中保留了某种关于基本版本的哈希字符串。这基本上意味着当两个不同的开发人员从同一个基础版本开始一个新版本时，当你试图合并它们时你会被搞砸。你甚至可以让它在干净的设备上工作，但如果你想从以前的版本迁移数据，它可能会失败。

# .net - 限制对主 AppDomain (.NET) 中方法调用的代码访问

> ID：11442071
> 
> 赞同：1
> 
> 时间：2012-07-11T21:52:53.870
> 
> 标签：.net, code-access-security

.NET 中是否可以限制授予方法调用的权限，而无需在单独的应用程序域中运行代码？

例如，假设我加载了一个程序集 FooBar.dll，我知道它有一个名为 MyClass 的类，我想在我的应用程序中调用这个类。该 DLL 可能来自任何地方，或者是从可能包含恶意内容的代码编译而来。我有没有办法在加载此 DLL 之前限制在此 DLL 中调用的所有代码，并对 DLL 中的代码施加代码访问安全性？这样 DLL 中的所有代码都受到限制，但在我的主根 AppDomain 中运行。并且对操作系统和其他功能的访问权限非常有限，无法提升自己的权限并要求再次访问功能。

这可能吗，如果有的话，有什么想法吗？或者这只有在使用 AppDomain 时才有可能

# python - 限制 Python 进程内存使用

> ID：11442080
> 
> 赞同：4
> 
> 时间：2012-07-11T21:53:38.270
> 
> 标签：python, memory

我有一个 16GB 内存的系统。我`python`为一些数据挖掘应用程序运行了一个脚本，这个过程占用了整个 16GB。我想限制python进程只占用有限的内存。

是否有可能做到这一点？如果是，如何？

**更新：**

该应用程序从一个庞大的数据库中检索酒店评论数据，并尝试在酒店和用户之间构建图表以进行一些分析。保存数据的数据结构超过 16GB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T20:44:58.937

你有一个应用程序，它的数据结构似乎需要 16GB 以上的 RAM，对吧？如果是这样，那么限制其 RAM 将导致应用程序失败，不是吗？

是否有理由将所有这些数据一次全部存储在 RAM 中？很可能，该应用程序可以重新设计为一次占用不到 16GB 的 RAM。例如，搜索计算机上所有文件的所有文件内容并不需要一次在 RAM 中打开所有文件，而是一次只打开一个。

我的观点是，除了重新设计应用程序之外，“限制 RAM 使用”不可能以任何方式解决。

# php - 使用 php 接受多个输入以更新 mysql 数据库

> ID：11442082
> 
> 赞同：1
> 
> 时间：2012-07-11T21:53:48.073
> 
> 标签：php, mysql, input

我正在做一个小项目：一个小数字运算游戏。

我想要一个 php 文件，它可以接受输入并将它们解释为指定的数据库更新。

这是我到目前为止所拥有的。它似乎对我不起作用。

```
$name = $_GET['n'];
$action = $_GET['a'];
$result = mysql_query("SELECT * FROM players WHERE Username ='".$name."'");

while($row = mysql_fetch_array($result)) {
  if ($action = "rankup") mysql_query("UPDATE players SET Level 'Level+1' WHERE Username='".$name."'");
}

mysql_close($con); 
```

我没有收到任何错误，但它不起作用，并且所有数据库连接都很好。

我不知道问题是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:00:26.227

这里有几个错误：

*   你没有清理你的输入，请阅读[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)
*   您没有检查`mysql_query`. 查询`SET Level 'Level+1'`无效，您忘记了 a`=`并删除引号
*   `$action == 'rankup'`， 不是`=`
*   请考虑在新项目中使用[PDO](http://php.net/manual/en/book.pdo.php)，它是一种比`mysql_`函数更好的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:03:38.003

你想像这样输入你的 sql 查询

```
'UPDATE players SET Level= (Level+1)  WHERE Username='.$name.' 
```

此外，任何以 mysql 开头的数据库函数都应替换为 mysqli。这是因为 PHP 在下一版中将逐步淘汰以 mysql 开头的函数。

# sql - 带有case语句的嵌套sql查询

> ID：11442086
> 
> 赞同：1
> 
> 时间：2012-07-11T21:54:13.527
> 
> 标签：sql, count, subquery, case

我正在尝试将子查询的结果用作外部查询的派生表，然后对来自子查询的信息进行计数和分组。这是我的 SQL 专业知识的延伸，尽管在线查看了多个示例，但我没有运气正确地使用语法。

子查询是：

```
SELECT rname.rn_country AS country, rname.rn_index AS id, sum(rresults.rr_sec_total) AS time 
FROM rname 
INNER JOIN rresults AS rresults ON rname.rn_index = rresults.rr_rn_index 
WHERE     rn_view = 'true'
     AND rr_date = '6/6/2012'
     AND (rr_slide = 'standard' OR rr_slide = 'water')
GROUP BY rn_index, rn_country
HAVING SUM (rresults.rr_sec_total) >= 18000 
```

这个结果是：

```
国家身份证时间
可以 19700 57600
美国 451294 144600.9
美国 901260 39601.8
美国 934270 109800
书房 913601 31800
美国 915011 108720.9
```

然后我需要做的是计算 ID 的数量，其中（时间 >= 18000 和时间 <= 36000）是青铜，（时间 >= 36000 和 <= 54000）是白银，时间 > 超过 54000 是黄金，按以下方式分组国家。因此，根据上述值的结果，最终结果将是：

CAN：1 金
DEN：1 铜
美国：3 金 1 银

鉴于此，完整的查询需要是什么？提前致谢。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:08:06.330

为什么不像这样获取单个列中的计数：

```
SELECT 
    a.country,
    COUNT(CASE WHEN a.time > 54000 THEN 1 END) AS num_gold,
    COUNT(CASE WHEN a.time BETWEEN 36000 AND 54000 THEN 1 END) AS num_silver,
    COUNT(CASE WHEN a.time BETWEEN 18000 AND 36000 THEN 1 END) AS num_bronze
FROM
(
    SELECT rname.rn_country AS country, rname.rn_index AS id, sum(rresults.rr_sec_total) AS time 
    FROM rname 
    INNER JOIN rresults AS rresults ON rname.rn_index = rresults.rr_rn_index 
    WHERE rn_view='true' AND rr_date='6/6/2012' AND (rr_slide='standard' OR rr_slide='water')
    GROUP BY rn_index, rn_country having sum(rresults.rr_sec_total) >= 18000
) a
GROUP BY a.country 
```

# javascript - 如何指定使用优化器压缩哪些 Require.js 模块，哪些不压缩？

> ID：11442088
> 
> 赞同：2
> 
> 时间：2012-07-11T21:54:23.253
> 
> 标签：javascript, node.js, requirejs

将 Require.js 优化器与 Node.js 一起使用，我只想压缩我的一些项目文件。如何指定要压缩的文件？这是我当前的 node.js 脚本：

```
var requirejs = require('requirejs');

var config = {
baseUrl: '/common',
name: 'main',
out: '/compressed'
};

requirejs.optimize(config, function (buildResponse) {
//buildResponse is just a text output of the modules
//included. Load the built file for the contents.
//Use config.out to get the optimized file contents.
var contents = fs.readFileSync(config.out, 'utf8');
}); 
```

我只想共同压缩文件。主要也是共同点。有一些非公共文件是我不想压缩的依赖项。优化器如何选择要合并的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:04:53.187

我不认为 Require.js 构建系统是这样工作的。这是一种全有或全无的操作。从网站（[http://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)）：

> 然后构建系统将跟踪 main.js 的依赖关系并将它们注入 appdirectory-build/scripts/main.js 文件。

但是，您可以提供大量选项：

[https://github.com/jrburke/r.js/blob/master/build/example.build.js](https://github.com/jrburke/r.js/blob/master/build/example.build.js)

并基于此，您最好的选择是将您不想要的模块标记为“存根”模块。从页面：

> 指定要在优化文件中存根的模块。优化器将使用这些模块的源版本进行依赖跟踪和插件使用，但是当将文本写入优化层时，这些模块将获得以下文本

# regex - 在 Tcl 中实现 "quotemeta" \Q ... \E？

> ID：11442090
> 
> 赞同：2
> 
> 时间：2012-07-11T21:54:36.737
> 
> 标签：regex, tcl, pcre, quotemeta

典型的用例是当正则表达式需要包含用户输入时。正则表达式中具有特殊含义的字符（即 Perl 中的“脏打”）需要转义。Perl 提供了“quotemeta”功能来做到这一点：只需将插值变量封装在`\Q`and中`\E`。但是 Tcl 没有提供这样的功能（根据[这个页面](http://www2.tcl.tk/9384)，即使是 ARE）。

在 Tcl 中是否有一个好的（严格的）quotemeta 实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:06:29.383

Perl 的[`quotemeta`](http://perldoc.perl.org/functions/quotemeta.html)函数只是用反斜杠替换每个非单词字符（即，除了 26 个小写字母、26 个大写字母、10 个数字和下划线以外的字符）。这是矫枉过正，因为并非所有非单词字符都是正则表达式元字符，但它简单且安全，因为转义不需要转义的非单词字符是无害的。

我相信这个实现是正确的：

```
proc quotemeta {str} {
    regsub -all -- {[^a-zA-Z0-9_]} $str {\\&} str
    return $str
} 
```

但是由于 glenn 的评论，这个更好，至少对于现代版本的 Tcl （`\W`匹配任何在 Tcl 8.0.5 之后的某个时间开始的非单词字符）：

```
proc quotemeta {str} {
    regsub -all -- {\W} $str {\\&} str
    return $str
} 
```

（我假设 Tcl 的正则表达式与 Perl 的足够相似，因此这将在 Tcl 中完成与在 Perl 中相同的工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T21:57:55.960

我会提出一个解决方案，但我不确定它是否正确。

```
#
#   notes
#
#   -  "[]" has to appear in the beginning of a character class
#   -  "-" has to come last in a character class
#   -  "#" is not special, but anticipating the x modifier...
#   -  "-" is not special, but anticipating interpolation within "[]"...
#   -  "/" is not special in Tcl
#
proc quotemeta {str} {
    regsub -all -- {[][#$^*()+{}\|.?-]} $str {\\\0} str
    return $str
} 
```

# database - Ninject 和请求连接范围

> ID：11442094
> 
> 赞同：1
> 
> 时间：2012-07-11T21:55:14.077
> 
> 标签：database, asp.net-mvc-3, database-connection, ninject

请求完成后，与我的 DatabaseFactory 相关联的请求范围会释放我的数据库连接吗？

```
kernel.Bind<IDatabaseFactory>().To<DatabaseFactory<MySqlConnection>>().InRequestScope().WithConstructorArgument("connectionString", Config.Data.MySQLConnection);

public class DatabaseFactory<T> : Disposable, IDatabaseFactory where T : IDbConnection, new()
    {
        private readonly string _connectionString;
        private  IDbConnection _dataConnection;

        public DatabaseFactory(string connectionString)
        {
            _connectionString = connectionString;
        }

        #region IDatabaseFactory Members

        public IDbConnection Get()
        {
            return _dataConnection ?? (_dataConnection = new T { ConnectionString = _connectionString });
        }

        #endregion

        protected override void DisposeCore()
        {
            if (_dataConnection != null)
                _dataConnection.Dispose();
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:57:11.183

如果您使用的是[Ninject.Web.MVC](http://www.ninject.org/extensions.html)扩展，那么一旦垃圾收集器 (GC) 收集了请求对象（从[这里开始](https://stackoverflow.com/questions/5145775/ninject-doesnt-call-dispose-on-objects-when-out-of-scope)） ，这些对象就保证被释放

# jquery - jQuery ajax成功不改变局部变量

> ID：11442096
> 
> 赞同：1
> 
> 时间：2012-07-11T21:55:24.977
> 
> 标签：jquery, ajax

我正在尝试使用 ajax 在尝试加载图像之前检查图像是否存在。我让它大部分工作，但我在错误中设置了一个变量：和成功：ajax中的标签，它并没有改变我的img变量。有没有办法通过这些标签来影响其余的功能？

```
function getImage(imageNum)
{
var img;
$.ajax({
    url:imageLocation + imageNum + '.png',
    type:'HEAD',
    error: function()
    {
        img = 0;
    },
    success: function()
    {
        var img = $('<img />', {
            src: imageLocation + imageNum + '.png',
            class: 'image',
            id:'image' + imageNum});
        return img;
    }
});
console.log(img);
return img;
} 
```

好吧，如果没有理由使用 AJAX，我宁愿只使用图像标签。问题是该变量没有改变我的函数中的某些内容。这是一个例子。

```
function getImage(imageNum)
{
    var img;
    var success = 10;
    var img = $('<img />', {
        src: imageLocation + imageNum + '.png',
        class: 'image',
        id:'image' + imageNum,
        success: function () { 
            success = 1
        },
        error: function () { 
            success = 0;
        }
    });

    console.log(success);
    if(success = 1)
        return img;
    else
        return 0;
}

function loadImage(imageNum)
{
    var img = getImage(imageNum);
    if(img != 0)
    {
        $('#slider').imagesLoaded( function () {
            $("#slider").append(img);
            loadImage(imageNum + 1);
        });
    }
    else
        return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:59:04.727

$.ajax 是异步的，因此您在`console.log`调用完成之前调用。当您的代码是同步的时，您不能这样返回。

您必须改为在 success() 中调用其他代码——例如：

```
$.ajax({
  url: '',
  data: '',
  success: function(data){
      codeThatNeedsImg(data);
  }
  });

function codeThatNeedsImg(img){
   console.log(img);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:40:11.663

好吧，我终于找到了解决问题的方法。@bokonic 对 ajax 的看法非常正确。我一直使用 ajax，所以我可以使用成功调用，而不是在等待错误调用更改“成功”变量并结束循环时附加图像。它会在等待时附加大约 3 张额外的图像。加载图像永远不会成功，所以我猜这只是 ajax 的事情。这就是它的样子。

```
function loadImage(imageNum)
{
    $('#slider').imagesLoaded( function () {
        if(success)
        {
            $.ajax({
                url:imageLocation + imageNum + '.png',
                type:'HEAD',
                error: function()
                {
                    success = false;
                },
                success: function()
                {
                    var img = $('<img />', {
                        src: imageLocation + imageNum + '.png',
                        class: 'image',
                        id:'image' + imageNum
                    });
                    $('#slider').append(img);
                    loadImage(imageNum + 1);
                }
            });
        }
        else
            return;
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:09:24.093

`<img>`如果您只想在图像本身加载之前不附加元素，那么就这样做！创建`<img src="..." />`元素并且不要将其附加到 DOM。它将提示浏览器尝试获取图像文件。您可以将成功和错误事件侦听器附加到元素本身，以触发它们各自的结果。

如果您触发了成功事件，那么您就知道图像存在，并且您知道它已经预加载，因此您现在可以将其附加到 DOM！如果它不存在，则调用将更快返回，并且错误事件将在没有更多开销的情况下触发。我会说这是双赢的。

`src`您可以通过在事件回调函数中读取元素上的属性来检查它是哪个图像。

这是一个带有逻辑的示例小提琴：http: [//jsfiddle.net/jZpNj/](http://jsfiddle.net/jZpNj/)

# php - 这个 mysqli 查询有什么问题？

> ID：11442098
> 
> 赞同：-2
> 
> 时间：2012-07-11T21:55:43.317
> 
> 标签：php, mysql, mysqli

我正在向数据库中添加一个新的电子邮件地址。当我检查用户是否存在时

```
if (!($stmt = $dbConnection->prepare('SELECT `email_addr` FROM '.TABLE_NAME.' WHERE `email_addr` = ?')))` 
```

一切正常。

当我尝试跑步时

```
if (!($stmt = $dbConnection->prepare('INSERT INTO '.TABLE_NAME.'(`email_addr`,`date_subscribed`,`act_code`,`subscribe_ip`) VALUES (?,?,?,?)' ))) 
```

我得到错误`Unknown column 'email_addr' in 'field list'`。我进行了很多搜索，并认为添加反引号可能会解决问题，但事实并非如此。如果您需要更多代码，请告诉我。

已解决：常量中有一个错字。感谢大家告诉我在 PHPmyadmin 中运行查询，这让我发现了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:58:24.730

```
Unknown column 'email_addr' in 'field list' 
```

此错误表明您正在引用一个不存在的列名。检查您的表以确保它是正确的列名，并确保您在查询中使用了正确的变量。

尝试从您要插入的列中删除“`”：

```
(email_addr, date_subscribed, act_code, subscribe_ip) 
```

另外，尝试回显查询并直接在 phpMyAdmin 中运行以查看结果。您的格式可能存在您不知道的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:08:42.210

写

```
echo 'SELECT `email_addr` FROM '.WPINSTALL_TABLE_NAME.' WHERE `email_addr` = ?' 
```

然后查看您的 SQL 代码 qnd 然后直接在您的 PHPMyAdmin 控制台中尝试您的 SQL 代码并告诉我们答案是什么......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T21:58:09.430

也许在这里添加空间

```
[space](`email_addr`...) 
```

# python - 在python中更改基类安全吗？

> ID：11442100
> 
> 赞同：13
> 
> 时间：2012-07-11T21:55:57.903
> 
> 标签：python, class

存在这样的问题，但没有一个完全像这样，而且我没有找到完全令人满意的答案。

我正在做一个基于代理的生物模型。假设我有一个 A 型细胞和一个 B 型细胞。它们根据时钟老化。假设当 A 型细胞达到一定年龄时，它会变成 B 型细胞。

我有一个细胞清单。我不想只创建新的 B 细胞，然后将它们添加到库存中，然后将 A 细胞留在库存中。

这似乎有效，但它安全吗？

```
class B(object):
    pass

class A(object):
    def changeToB(self):
        self.__class__ = B 
```

或者，有没有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T22:09:21.390

虽然这对口译员来说可能是安全的，但对于试图了解正在发生的事情的人来说绝对是不安全的。

很难找到比生物细胞更自然的对象设计映射，而您正试图丢弃自然存在的东西。细胞**具有**年龄，并且各种机制根据年龄打开和关闭。在这个世界上，成骨细胞不会突然消失并取而代之的是骨细胞，而是细胞保持其“身份”，但会根据年龄等状态值表现出不同的行为。

如果我正在编写这样的模型，我当然会在对象模型中考虑类似的因素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T22:48:30.347

多年前，我在使用解析器时尝试过。它似乎做了我当时想做的事，所以从语言的角度来看是足够安全的，但现在我年纪大了，也更聪明了，我认为我不会将它用于其他人可能必须维护的代码——我不会从这个角度来看，不认为这是非常“安全”的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:21:59.697

这可能是委派的好地方。在内部，您保留所需的实际对象类型，并在适当时将其切换出来。

```
class B(object):
    def do_something(self):
        print "I'm a B"

class A(object):
    def do_something(self):
        print "I'm an A"

class AorB(object):
    def __init__(self):
        self.identity = A()

    def changeToB(self):
        self.identity = B()

    def do_something(self):
        self.identity.do_something() 
```

# objective-c - iOS 正则表达式：未知转义序列“\|”

> ID：11442101
> 
> 赞同：17
> 
> 时间：2012-07-11T21:56:09.070
> 
> 标签：objective-c, ios, regex, nsregularexpression

我收到一个奇怪的警告，因此我的正则表达式搜索不起作用。这是行：

```
NSRange r = [HTML rangeOfString:@"\|(.*)\|" options:NSRegularExpressionSearch]; 
```

`HTML`我确定包含上述正则表达式的单个匹配项的字符串在哪里。

警告仅在第一次出现“\|”时出现，而不是在两者上。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-11T22:10:21.653

您收到警告是因为`\|`它不是 Objective-C（或 C 或 C++）中的有效转义序列。编译器忽略了这一点，只使用原始`|`字符，因此您实际传入的字符串是`@"|(.*)|"`.

要获得您想要的行为，您必须在源代码中转义反斜杠，以便正则表达式引擎看到文字反斜杠并将`|`字符解释为文字而不是交替，例如`@"\\|(.*)\\|"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T21:58:07.987

加起来，如果你正在处理 unicode 格式的特殊字符序列，你可以使用这样的东西：

```
const unichar specialCharSequence='some special character';
if(specialCharSequence==L'\uxxxx')
{
   //handle the occurence of this special character
} 
```

# java - 如何将元素插入订单数组

> ID：11442105
> 
> 赞同：1
> 
> 时间：2012-07-11T21:56:34.437
> 
> 标签：java, arrays, insertion, sorted

假设我有一个按升序排序的整数数组，我想插入一个新数字并且我知道在什么位置插入它。我怎么能使用 System.arraycopy。

```
System.arraycopy(items, i, items, i + 1, items.length+1);
items[i] = n; 
```

或者我是否必须从插入的位置（将位置移动一个元素）创建一个临时数组副本到临时数组，然后复制回原始数组

```
int[] newItems = new int[size + 1];
System.arraycopy(items, i, newItems, i + 1, items.length+1);
items[i] = s;
size++;
System.arraycopy(items, 0, newItems, i, i);
items = newItems; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:00:39.383

你的第一种方法会奏效。

如果您不确定，请参阅有关 arraycopy [arraycopy](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)的文档。如果源和目标相同，它会像复制到临时数组一样，然后再复制回原始数组，因此您可以确信它会起作用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:31:46.290

一些想法/观察

*   为什么要问你可以轻松测试什么？
*   第一种方法可能会抛出 IndexOutOfBounds （然后不起作用）
    *   因为在原始数组中没有其他项目的位置
    *   因为复制段的长度最多可以是 items.length - i -1（在插入点和之后会有 length-i，必须删除最后一个，否则会有例外）。
*   第二种方式也会失败。看起来您将长度误认为是最后一个位置。

# google-app-engine - Appengine/Java - 持久化一个字符串

> ID：11442107
> 
> 赞同：1
> 
> 时间：2012-07-11T21:56:46.603
> 
> 标签：google-app-engine, persistence

我的目标是将字符串持久保存到数据存储区

```
final static PersistenceManager pm = PMF.get().getPersistenceManager();
public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException
    {
        String s = "test";
        System.out.println(pm.makePersistent(s));
        PrintWriter pw = resp.getWriter();
        pw.write("Data Saved");
    } 
```

**不确定跟随 ERROR 的原因**

> 类 "The class "java.lang.String" is not persistable. 这意味着它要么没有被增强，要么文件的增强版本不在 CLASSPATH 中（或被非增强版本隐藏），或者找不到该类的元数据/注释。” 是不可持久的。这意味着它要么没有被增强，要么文件的增强版本不在 CLASSPATH 中（或者被未增强的版本隐藏），或者找不到该类的元数据。
> 
> 造成的：
> 
> org.datanucleus.jdo.exceptions.ClassNotPersistenceCapableException: The class "The class "java.lang.String" is not persistable. 这意味着它要么没有被增强，要么文件的增强版本不在 CLASSPATH 中（或被未增强的版本隐藏），或者找不到该类的元数据/注释。” 是不可持久的。这意味着它要么没有被增强，要么文件的增强版本不在 CLASSPATH 中（或者被未增强的版本隐藏），或者找不到该类的元数据。在 org.datanucleus.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:674) 在 org.datanucleus.jdo.JDOPersistenceManager 的 org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:241)。

字符串对象不能被持久化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:21:10.917

查看文档：

[http://db.apache.org/jdo/api20/apidocs/javax/jdo/PersistenceManager.html#makePersistent(java.lang.Object](http://db.apache.org/jdo/api20/apidocs/javax/jdo/PersistenceManager.html#makePersistent(java.lang.Object) )

您需要给它一个具有持久性的对象。使用 JDO 时，有一个增强器进程实际上会将您的 .class 文件打开并修改它们，以便它们可以被持久化。查看 GAE 文档以持久化您的对象：

[https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:21:31.303

您可以将字符串持久保存在数据存储中，但作为实体的一部分。您通过定义一个类来描述写入数据存储区和从数据存储区读取的实体。例如，本[文档](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses)描述了如何使用 JDO 定义实体类。

该类指示将实体写入数据存储时存储哪些字段，以及将它们写入何处。如果没有这样的类，App Engine 将不知道在您调用时将数据保存在哪里`makePersistent`（如示例代码中的情况），也不知道如何读回数据。

# .net - 获取 PrintQueue.DefaultPrintTicket 时应用程序挂起

> ID：11442110
> 
> 赞同：1
> 
> 时间：2012-07-11T21:57:37.153
> 
> 标签：.net, wpf, printing

我有一个 WPF 应用程序，它在获取默认 PrintTicket 时完全挂起......

```
PrintTicket printTicket = printQueue.DefaultPrintTicket; 
```

为什么会发生这种情况？

# regex - 如何获取所有匹配 regex1 的字符串后跟一个字符串？

> ID：11442112
> 
> 赞同：0
> 
> 时间：2012-07-11T21:57:52.950
> 
> 标签：regex, sed, awk, grep

我有一个大文本文件。我想挑选表格字符串

```
(1, 2, 4, ...) 
```

后面是字符串“foobar”。这两个字符串都可以出现在多行上。如何在 UNIX 命令行上快速执行此操作？

例子

```
(1, 2) foobar
foobar (3, 4, 5) foobar (23, 45) 
(6,
7, 8) foobar
(9, 10, 11) foo
bar 
```

应该给

```
(1, 2)
(3, 4, 5)
(6, 7, 8)
(9, 10, 11) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:24:16.343

```
$ tr -d '\n' <input | grep -oP '\([^()]*\)(?= foobar)'
(1, 2)
(3, 4, 5)
(6,7, 8)
(9, 10, 11) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:20:27.807

一种使用方式`perl`。它将输入文件的所有内容都包含在一个标量变量中，并使用正则表达式检查括号之间的任何数字组，然后是文字`foobar`，并打印每个匹配项。

```
perl -e '
    chomp( @s = <> );
    $s = join q||, @s;
    printf qq|%s\n|, $1 while $s =~ m/(\((?:,?\s*\d+\s*)+\))\s*foobar/g;
' infile 
```

有了这个内容`infile`：

```
(1, 2) foobar
foobar (3, 4, 5) foobar (23, 45) 
(6,
7, 8) foobar
(9, 10, 11) foo
bar 
```

输出将是：

```
(1, 2)
(3, 4, 5)
(6,7, 8)
(9, 10, 11) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T03:10:54.900

这可能对您有用：

```
sed '/(/!d;s/(/\n&/;s/^[^\n]*\n//;:a;$!{/) foobar/!N;/) foobar/!ba};s/\n//g;s/\(([^)(]*)\) foobar/\n\1\n/;s/^[^\n]*\n//;P;D' file 
```

解释：

*   `/(/!d`删除没有a的行`(`
*   `s/(/\n&/`在第一个前面添加换行符`(`
*   `s/^[^\n]*\n//`删除所有字符，包括第一个换行符。
*   `:a`占位符
*   `$!{/) foobar/!N;/) foobar/!ba}`如果不是最后一行检查`) foobar`是否不追加下一行，如果仍然没有`) foobar`循环到`a`.
*   `s/\n//g`删除所有换行符。
*   `s/\(([^)(]*)\) foobar/\n\1\n/`用换行符包围预期的字符串。
*   `s/^[^\n]*\n//`删除所有字符，包括第一个换行符。
*   `P`打印第一行
*   `D`删除第一行

# java - 使用 ProcessBuilder 运行 msys.bat

> ID：11442118
> 
> 赞同：4
> 
> 时间：2012-07-11T21:58:27.070
> 
> 标签：java

我正在尝试使用 ProcessBuilder 在 java 中运行 msys.bat。当我用我的程序运行 .bat 文件时，出现以下错误：“找不到 rxvt.exe 或 sh.exe 二进制文件——正在中止。按任意键继续......”

这是代码，

```
 ProcessBuilder Msys = new ProcessBuilder("C:/msys/1.0/msys.bat", "/C", "find \"C:/Users/Dan G/Desktop/hello.elf\"");

    Process p = Msys.start();

    String line;
    BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
    while ((line = r.readLine()) != null) {
        System.out.println(line);
    }
    r.close(); 
```

目标是编译我的一些 C 项目。上面的命令只是为了测试结果，而不是我想要完成的。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:01:21.917

.bat 文件不能单独运行，而是在 Windows 命令处理器上调用。所以不要忘记在你的bat文件之前加载Windows命令处理器，cmd.exe。

```
ProcessBuilder Msys = new ProcessBuilder("cmd.exe", "C:/msys/1.0/msys.bat", 
       "/C", "find \"C:/Users/Dan G/Desktop/hello.elf\""); 
```

**编辑**
请查看这篇有用的文章，了解此过程中出现的提示和陷阱：[when runtime.exec() won't](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)。文章中的代码有点过时，但这些概念在今天和当时一样密切相关。强烈推荐。

# html - 找不到对象 - XAMPP

> ID：11442119
> 
> 赞同：3
> 
> 时间：2012-07-11T21:58:35.760
> 
> 标签：html, apache, xampp

我最近在我的笔记本电脑上安装了 XAMPP - windows-7 64 位。我刚刚用 HTML 编写了一个非常基本的“Hello World”脚本。但是，但是，当我尝试运行它时，它说找不到对象。错误 404。

这就是我正在做的事情：

1.  写了剧本。
2.  将其保存为 xampp/apache/htdocs 中的 test.html。
3.  打开浏览器，在为 URL 提供的空间中键入 localhost/test.html。

奇怪的是，我能够运行存储在 xampp/apache/htdocs 中的 index.html 文件。而且我还能够运行本地主机页面。但是我正在创建的任何新页面，我都无法运行它。请帮我解决这个问题。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:48:24.757

似乎 xampp 无法找到您的文件。

检查 XAMPP\apache\conf\httpd.conf 中的 DocumentRoot 设置以查找当前它指向哪个文件夹。

如果需要，可以将其指向其他文件夹，例如，

D:/php项目/

顺便说一句，您确定 htdocs 在 xampp/apache/htdocs 中吗？我的在 xampp/htdocs 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:43:58.910

如果问题出在 linux 文件夹中，则不应将其从 Windows 剪切到未设置的 Linux 文件夹中。更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-05T09:01:07.823

您只需要将项目的根目录从**xampp/apache/htdocs**更改为**xampp/htdocs**。

我的意思是您的项目文件夹必须位于**xampp/htdocs**根目录中。（例如：） `xampp/htdocs/project`。

您的项目地址将是`localhost/project`

# html - 如何反转悬停热点图像？

> ID：11442120
> 
> 赞同：2
> 
> 时间：2012-07-11T21:58:39.303
> 
> 标签：html, css, hover

我有一个热点图像如下：

```
<div class="hotspotted">
    <img height="100%" width="100%" src="puzzle_hotspot.png"/>
    <a href="a.html" id="hotspot1" class="hotspot"></a>
    <a href="b.html" id="hotspot2" class="hotspot"></a>
</div> 
```

我希望当我将鼠标悬停在hotspot1 上时，页面的其余部分会变暗。我该如何做到这一点？

我想沿着这些思路做一些事情（但这些思路什么也没做）：

```
.hotspot {
    display: block;
    position: absolute;
}

.hotspotted:hover a{
    opacity: 0.8;
}

.hotspotted a:hover{
    opacity: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:30:10.443

## CSS3 解决方案

很明显，您想要控制`opacity`元素的级别，而不是它们的“覆盖”。这有点棘手，但我为支持 CSS3 的浏览器找到了一个解决方案（在 IE9、FF、Chrome 中测试）。使用以下内容（如[**this fiddle所示**](http://jsfiddle.net/R7t6C/14/)；当然，`opacity`级别可以更改为您想要的）：

```
.hotspotted > img,
.hotspotted > img ~ a {
    opacity: 0.2; /* "default" opacity of "page" when hovering a hotspot */
}

.hotspotted:not(:hover) > img,
.hotspotted:not(:hover) > a,
.hotspotted > img:hover,
.hotspotted > img:hover ~ a,
.hotspotted > img ~ a:hover {
    opacity: 1; /* normal display opacity and that of hovered hotspot */
} 
```

## 解释

前两个选择器`opacity: 0.2`设置为使其内部所有元素的“默认”不透明度`.hotspotted`。然后，接下来的五个因素会覆盖此默认值。前两个...

```
.hotspotted:not(:hover) > img,
.hotspotted:not(:hover) > a 
```

...确保当您没有将鼠标悬停在网页上时，一切都是可靠的。接下来的两个...

```
.hotspotted > img:hover,
.hotspotted > img:hover ~ a 
```

...确保当您将鼠标悬停在网页上而*不是*热点上时，一切仍然保持稳定。然后最后一个...

```
.hotspotted > img ~ a:hover 
```

...在悬停时保持热点稳定，但随后允许前两个“接管”的“默认”并淡化`.hotspotted`容器中的所有其他元素。

# image-processing - 计算 OpenCV 的 findHomography 的目标点

> ID：11442125
> 
> 赞同：6
> 
> 时间：2012-07-11T21:58:56.797
> 
> 标签：image-processing, opencv, homography

**编辑**：我现在发现这个类似的问题有一个非常详细的答案：

[透视变形矩形的比例](https://stackoverflow.com/questions/1194352/proportions-of-a-perspective-deformed-rectangle)

* * *

我正在使用 OpenCV`findHomography()`和`warpPerspective()`方法来“歪斜”一张纸的照片。我有这个在很大程度上工作，但我被困在一个细节上。

我不明白该怎么做的部分是计算要输入的最佳目标点集`findHomography()`。我知道我希望我的输出是矩形的，但我不知道矩形的宽高比。我还希望调整输出矩形的大小，以便在通过`warpPerspective()`. 我所拥有的只是形成要在源图像中转换的四边形的四个点。如何计算最佳大小的目标矩形？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:13:01.507

该`findHomography()`方法需要四个点（如果使用**直接线性变换**）。如果您想要最佳集，您将需要 DLT 的单应性给出最小重投影误差的 4 点集。**我的意思是，您需要一种方法来检测DLT**的特定数学模型的异常值/异常值。

这种方法是**RANSAC**，OpenCV 已经实现了。您将找到与**RANSAC**`findhomography()`结合的示例。

 **我个人发现了一个问题，那就是 OpenCV 中 RANSAC 的迭代次数太高了。如果您正在寻找最佳速度，则必须深入研究代码。**

# objective-c - 如何以编程方式在 Cocoa 中为按钮创建操作？

> ID：11442127
> 
> 赞同：0
> 
> 时间：2012-07-11T21:59:00.960
> 
> 标签：objective-c, button, action

我正在尝试以编程方式在mac中的Cocoa中创建一个按钮，但我不知道如何对此采取行动，我正在尝试这样：

```
NSRect frame = NSMakeRect(10, 200, 80, 100);
NSButton *btn = [[NSButton alloc]initWithFrame:frame];
[btn setButtonType:NSMomentaryPushInButton];
[btn setBezelStyle:NSRoundedBezelStyle];
[btn setTitle:@"Click me"];
[btn setAction:@selector(hideLabels:)];

[view addSubview:btn]; 
```

但是行 [btn setAction:@selector(hideLabels:)]; 不工作，我怎样才能在这里创建一个动作？

hideLabels 方法在起作用，因为我将它与另一个按钮一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:05:08.757

你的 hideLabels 方法有参数吗？如果没有，请从选择器中删除 :

# javascript - .forEach 循环：使用变量

> ID：11442129
> 
> 赞同：4
> 
> 时间：2012-07-11T21:59:05.530
> 
> 标签：javascript, jquery, foreach

我正在遍历一组 16 个 id 并`eventListener`为每个 id 分配一个。我想向我的 php 文件发送一个数字（第一个 id 为 1，第二个 id 为 2，等等），但它似乎`i`比我想要的更动态。每个 id 发送`17`.

```
klasses.forEach(function(klass){
    var svgElement = svgDoc.getElementById(klass); //get the inner element by id
    svgElement.addEventListener("mouseup",function(){
        $.ajax({
            type: "POST",
            url: "buildService.php",
            data: { "service" : i}
        }).done(function(msg){
            alert(lameArray[i]);
            $("#modalSpan").html(msg);
            $("#modmodal").modal();
        });
    });
    i++;
}); 
```

如何将每个设置为特定数字？我也试过：

```
var lameArray = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];
...
data: { "service" : lameArray[i]} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T22:08:10.790

是什么`i`？问题是它`i`是一个全局变量，或者是`forEach`循环之外的变量，所以当`mouseup`事件被触发时，使用的是`i`in *that* istant 的值，而不是定义事件侦听器时的值。

请注意，由于您使用`forEach`的是，回调函数实际上是使用第二个参数调用的，即计数器。所以你可以使用：

```
klasses.forEach(function(klass, i) {
    ...
}); 
```

现在，`i`是`forEach`范围内的一个变量，可以满足您的目的。（`forEach`也使用第三个参数调用回调函数，即集合本身 -`klasses`在您的情况下。）

**注意**：由于您使用的是 jQuery，因此您应该使用更“类似 jQuery”的样式进行编码。所以改变你的代码是这样的：

```
$.each(klasses, function(i, klass) {
    $("#" + klass).mouseup(function(){
        $.ajax({
            type: "POST",
            url: "buildService.php",
            data: {service: i + 1}
            ...
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:07:22.097

试试这个：

```
klasses.forEach(function(klass){
    (function(i) {
        var svgElement = svgDoc.getElementById(klass); //get the inner element by id
        svgElement.addEventListener("mouseup",function(){
            $.ajax({
                type: "POST",
                url: "buildService.php",
                data: { "service" : i}
            }).done(function(msg){
                alert(lameArray[i]);
                $("#modalSpan").html(msg);
                $("#modmodal").modal();
            });
        });
    })(i);
    i++;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T23:04:27.010

当您需要迭代器索引时，不要使用 forEach。并避免使用 JQuery 的 .each。在绝大多数情况下它是完全没有必要的，它在每次迭代时都会触发一个回调函数，所以它在 IE 中要慢得多。您可以使用 while 编写一个完全惰性/紧凑的循环。

```
var outerI = klasses.length;

while(outerI--){
    (function(i){
        i+=1;//doesn't affect outerI and you wanted 1-length so we add one.
        //I would personally just add 1 but it also adds clarity to the example

        //crap inside your forEach loop but without the i++
    })(outerI)
} 
```

发生了什么：您告诉事件侦听器从外部范围引用 i。所以无论我在那个事件开始时是什么，都是你得到的。

解决方案：将 i 的值传递到函数的范围内，它成为本地 var。带括号的业务只是定义、评估和执行匿名函数的一种懒惰方式，看起来像是一步。该函数通过第一个括号进行评估（使其可触发），因此第二个集合就像您放入函数定义的内部“i”参数中的 arg。您基本上通过将其传递给新的本地变量来锁定您想要的值。

注意 while 循环：while(0) 评估为假，停止循环。如果您考虑一下，这很奇怪，因为长度为 1 比您想要的少一。使用 while(i--) 然而 i 被评估，然后 i 递减，所以在块内你得到长度 1 到 0，这对于数组表示法来说是完美的。要在其他运算符击中它之前减少 i ，您通常会这样做 --i 但它在惰性/高效的 while 循环中很方便。

# visual-studio-2010 - VS 隔离外壳创建自定义文档窗口

> ID：11442135
> 
> 赞同：1
> 
> 时间：2012-07-11T21:59:20.127
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-sdk

我正在尝试在 VS 隔离外壳中创建自定义文档窗口。我希望拥有类似于 ToolWindowPane 的东西，我可以在其中为我的自定义工具窗口扩展它并将内容设置为我的自定义用户控件。但是，我不确定这是否适用于 VS 文档窗口。我找不到任何关于如何扩展超类 WindowPane 以创建可以动态重复创建的自定义文档窗口的示例。

非常感谢任何指针或建议！

编辑：或者有没有办法阻止工具窗口在 VS 启动时恢复到以前的状态？我基本上希望所有工具窗口都像文档窗口一样，并在关闭时重置/删除自己。

Edit2：解决了以前的编辑。将瞬态标志设置为 true，以防止工具窗口在 IDE 启动时打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:12:41.397

在这里找到工作：

[http://social.msdn.microsoft.com/forums/en/vsx/thread/d60f8cef-2523-4b53-8f24-92eb90912e7c/](http://social.msdn.microsoft.com/forums/en/vsx/thread/d60f8cef-2523-4b53-8f24-92eb90912e7c/)

但是，如果有人对如何创建自定义文档窗格有解决方案，那就太好了。ToolWindowPane 有几个我宁愿避免的缺点。

# c - 如何将帧复制到农场

> ID：11442141
> 
> 赞同：-1
> 
> 时间：2012-07-11T22:00:19.117
> 
> 标签：c, opencv

一个帧中的变量如何才能到另一帧它是那种不是内存管理问题的副本

例如 ：

```
iplimage *frame = NULL;
iplimage *Temp_frame = NULL;

while(1) {
frame = cvQueryFrame( capture );

if( !frame ) break;

    Temp_frame=cvcloneimage(frame);

    cvreleaseImage(&Temp_frame);

    cvreleaseImage(&frame);
} 
```

错误：

打开 cv.exe 中 0x75b39673 处未处理的异常：Microsoft C++ 异常：内存位置 0x0015f250 处的 cv::Exception..

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:08:49.983

```
iplimage *frame = NULL;
iplimage *Temp_frame = NULL;

while(1) 
{
    frame = cvQueryFrame(capture);    
    if (!frame) 
        break;

    if (!Temp_frame) // creates Temp_frame only once
        Temp_frame = cvCreateImage(cvGetSize(frame), frame->depth, frame->nChannels);    

    cvCopy(frame , Temp_frame, NULL);

    // DO NOT RELEASE the return of cvQueryFrame()!
    // I believe that's what crashing your application.
    //cvreleaseImage(&frame);
}

// Since the size of "frame" won't change, there's no need to to create/release 
// Temp_frame on every iteration of the loop. So we release it at the end:
cvReleaseImage(&Temp_frame); 
```

# c# - 无法使用 XNA 4.0 和 windows 窗体绘制更复杂的场景

> ID：11442156
> 
> 赞同：0
> 
> 时间：2012-07-11T22:01:19.390
> 
> 标签：c#, winforms, xna

我已经尝试过 Microsoft 的这个代码示例，它允许您使用自定义 Windows 窗体控件来绘制 XNA GS 4.0 场景：

[winforms系列1](http://create.msdn.com/en-US/education/catalog/sample/winforms_series_1)。

该代码在绘制单个三角形时效果很好，但是当我尝试绘制生成的网格时，它只会在控件中绘制 X。我调试了代码，似乎当我到达：

```
 graphics.GraphicsDevice.DrawUserIndexedPrimitives<VertexPositionColor>(PrimitiveType.TriangleList, Vertices, 0, Vertices.Length, indicies, 0, indicies.Length / 3); 
```

它永远不会退出 Draw 函数。我已经在一个普通的 XNA 游戏项目中测试了我的代码，它可以 100% 运行。

有谁知道发生了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:40:38.193

似乎问题出在 XNA 范围配置文件上，只需将其更改为 hiDef 即可！:)

# javascript - jQuery get 函数中的 AJAX 请求，变量问题

> ID：11442157
> 
> 赞同：0
> 
> 时间：2012-07-11T22:01:20.630
> 
> 标签：javascript, jquery, ajax, json

我正在为 jQuery Ajax 调用而苦苦挣扎。请帮忙！

```
var email = patrick@patrick.com;
var password = patrick;

$.get("server.php", {option:"signup", email:"email", password:"password}, function(req){
alter (req);} 
```

所以我向服务器发送了两个变量，电子邮件和密码。但我正在以文本形式发送注册选项。如何发送 jQuery 变量？文本似乎有效，但电子邮件和密码变量无效。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:03:27.837

`password`删除和周围的引号`email`。

```
{option:"signup", email:email, password:password} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T22:04:53.937

> 我如何发送 jquery 变量？

没有“jquery 变量”。该语言称为 JavaScript。

> `{option:"signup", email:"email", password:"password"}`
> 
> 所以我将两个变量发送到服务器，电子邮件和密码

不，您将 3 个字符串文字`"signup"`,`"email"`和`"password"`发送到服务器。要使用您在上面声明的变量，请使用不带引号的名称。

> `var email = patrick@patrick.com;` `var password = patrick;`

*将字符串*分配给变量时，不要忘记这里的引号！

```
var email = "patrick@patrick.com";
var password = "patrick"; 
```

# objective-c - ios拖放子视图只工作一次

> ID：11442160
> 
> 赞同：1
> 
> 时间：2012-07-11T22:01:42.320
> 
> 标签：objective-c, ios, uiview, drag-and-drop

我有 UIView，我希望能够在其中拖放子视图，这*一次*可以正常工作。

```
- (void)pan: (UIPanGestureRecognizer *)recognizer
{
    if (recognizer.state == UIGestureRecognizerStateBegan) {
        CGPoint startPos = [recognizer locationInView:self];
        for (UIControl *sv in self.subviews){
            if ([sv pointInside:startPos withEvent:nil]){
                 self.controlBeingDragged = sv;
            }
         }
     }
     if (((recognizer.state == UIGestureRecognizerStateChanged) ||
         (recognizer.state == UIGestureRecognizerStateEnded)) &&
         self.controlBeingDragged){
         CGPoint translation = [recognizer translationInView:self];
         self.controlBeingDragged.center = CGPointMake(self.controlBeingDragged.center.x + translation.x, self.controlBeingDragged.center.y + translation.y);
         [recognizer setTranslation:CGPointZero inView:self];
         if (recognizer.state == UIGestureRecognizerStateEnded){
             self.controlBeingDragged = nil;
         }

     }
 } 
```

但是，如果我再次尝试拖动相同的 UIControl，则包含视图不再​​知道它在哪里。我可以从原始位置开始再次拖动它，所以很明显，我没有做一些事情来通知包含视图它的子视图已经移动。但是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:56:19.523

我很惊讶它甚至可以工作一次。该`pointInside:withEvent:`消息需要*接收者*坐标系中的一个点，但您发送的是接收者*超级视图*坐标系中的一个点。在发送消息中的点之前，您可以使用`convertPoint:toView:`for 每个子视图将点转换为子视图的坐标系`pointInside:withEvent:`。

```
CGPoint subviewPoint = [self convertPoint:startPos toView:sv];
if ([sv pointInside:subviewPoint withEvent:nil]) {
    ... 
```

您可能还想检查该`-[UIView hitTest:withEvent:]`消息是否可以替换整个子视图搜索循环。

# java - java 运行长度编码

> ID：11442162
> 
> 赞同：0
> 
> 时间：2012-07-11T22:01:53.497
> 
> 标签：java, run-length-encoding

我不知道如何开始我的任务。

我们必须制作一个运行长度编码程序，

例如，用户输入以下字符串：

aaaaPPPrrrrr

被替换为

4a3P5r

有人可以帮我开始吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T22:06:10.950

希望这会让你开始你的任务：

游程编码背后的基本思想是连续出现的标记（如 aaaa）可以替换为较短的 4a 形式（意思是“以下四个字符是一个 'a'”）。这种类型的编码在计算机图形学的早期使用，以在存储图像时节省空间。那时，视频卡支持少量颜色，并且图像通常在图像的重要部分具有相同的颜色）

您可以在 Wikipedia 上详细阅读它

[http://en.wikipedia.org/wiki/Run-length_encoding](http://en.wikipedia.org/wiki/Run-length_encoding)

为了对字符串进行游程编码，您可以遍历输入字符串中的字符。有一个计数器来计算你连续看到同一个角色的次数。当你看到不同的字符时，输出计数器的值，然后输出你一直在计数的字符。如果计数器的值为 1（意味着您只能连续看到其中一个字符），则跳过输出计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-23T03:07:56.437

这可以使用 StringBuilder 和一些辅助变量轻松简单地完成，以跟踪您看到的每个字母的数量。然后随心所欲地构建。

例如：

```
static String encode(String s) {
    StringBuilder sb = new StringBuilder();
    char[] word = s.toCharArray();
    char current = word[0]; // We initialize to compare vs. first letter

           // our helper variables
    int index = 0; // tracks how far along we are
    int count = 0; // how many of the same letter we've seen

    for (char c : word) {
        if (c == current) {
            count++;
            index++;

            if (index == word.length)
                sb.append(current + Integer.toString(count));
        }

        else {
            sb.append(current + Integer.toString(count));
            count = 1;
            current = c;
            index++;
        }
    }
    return sb.toString();
} 
```

由于这显然是一项家庭作业，因此我挑战您学习方法，而不仅仅是简单地将答案用作家庭作业的解决方案。StringBuilders 对于随手构建东西非常有用，因此在许多情况下保持运行时 O(n)。这里使用几个辅助变量来跟踪我们在迭代“索引”中的位置，另一个来计算我们看到的特定字母的数量“计数”，我们保留所有必要的信息来构建我们的编码字符串，因为我们去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-21T07:18:46.987

```
public String runLengthEncoding(String text) {
    String encodedString = "";

    for (int i = 0, count = 1; i < text.length(); i++) {
        if (i + 1 < text.length() && text.charAt(i) == text.charAt(i + 1))
            count++;
        else {
            encodedString = encodedString.concat(Integer.toString(count))
                    .concat(Character.toString(text.charAt(i)));
            count = 1;
        }
    }
    return encodedString;
} 
```

试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-27T05:49:00.197

试试这个：

```
private static String encode(String sampleInput) {
    String encodedString = null;
    //get the input to a character array.
    //  String  sampleInput = "aabbcccd";
    char[] charArr = sampleInput.toCharArray();
    char prev=(char)0;
    int  counter =1;
    //compare each element with its next element and 
    //if same increment the counter
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < charArr.length; i++) {

        if(i+1 < charArr.length && charArr[i] == charArr[i+1]){
            counter ++;
        }else {
            //System.out.print(counter + Character.toString(charArr[i]));
            sb.append(counter + Character.toString(charArr[i]));
            counter = 1;
        }

    }
    return sb.toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-16T13:23:59.593

**这是我在java中的解决方案**

```
public String encodingString(String s){
    StringBuilder encodedString = new StringBuilder();
    List<Character> listOfChars = new ArrayList<Character>();
    Set<String> removeRepeated = new HashSet<String>();
    //Adding characters of string to list
    for(int i=0;i<s.length();i++){
        listOfChars.add(s.charAt(i));
    }
    //Getting the occurance of each character and adding it to set to avoid repeated strings
    for(char j:listOfChars){
       String temp = Integer.toString(Collections.frequency(listOfChars,j))+Character.toString(j);
       removeRepeated.add(temp);
    }
    //Constructing the encodingString.
    for(String k:removeRepeated){
        encodedString.append(k);
    }
    return encodedString.toString();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-04-03T12:18:07.717

例如，如果输入字符串是“wwwwaaadexxxxxx”，那么函数应该返回“w4a3d1e1x6”。

源代码（Java）：-

```
package com.algo.runlengthencoding;

public class RunlengthEncoding 
{

    // For example, if the input string is “wwwwaaadexxxxxx”,
    // then the function should return “w4a3d1e1x6”.

    public static void main(String args[]) {

        String str = "aaaabbbccdddddddeeffffff";

        String value = getRunLengthEncodingForGivenString(str);
        System.out.println(value);
    }

    public static String getRunLengthEncodingForGivenString(String str) {
        String value = "", compare = "";

        for (int i = 0; i < str.length(); i++) {
            CharSequence seq = str.charAt(i) + "";

            if (compare.contains(seq))
                continue;

            compare = compare + str.charAt(i);

            int count = 0;
            for (int j = 0; j < str.length(); j++) {
                if (str.charAt(i) == str.charAt(j))
                    count = count + 1;
            }

            value = value + str.charAt(i) + Integer.toString(count);
        }
        return value;
    }

} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-07-04T07:53:15.040

```
import java.util.Scanner;
/**
 * @author jyotiv
 *
 */
 public class RunLengthEncoding {
 /**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.println("Enter line to encode:");
    Scanner s=new Scanner(System.in);
    String input=s.nextLine();
            int len = input.length();
            int i = 0;
            int noOfOccurencesForEachChar = 0;
            char storeChar = input.charAt(0);

            String outputString = "";
            for(;i<len;i++)
            {
                if(i+1<len)
                {
                    if(input.charAt(i) == input.charAt(i+1))
                    {
                        noOfOccurencesForEachChar++;
                    }
                    else
                    {
                        outputString = outputString + 
   Integer.toHexString(noOfOccurencesForEachChar+1) + storeChar;
                        noOfOccurencesForEachChar = 0;
                        storeChar = input.charAt(i+1);
                    }
                }
                else
                {
                    outputString = outputString + 
 Integer.toHexString(noOfOccurencesForEachChar+1) + storeChar;
                }
            }

            System.out.println("Encoded line is: " + outputString);   

        }

} 
```

我试过这个。它肯定会起作用。

# c# - 共享滚动位置的两个数据网格，共享数据源但不同步滚动位置

> ID：11442163
> 
> 赞同：3
> 
> 时间：2012-07-11T22:02:00.490
> 
> 标签：c#, vb.net, winforms, datagridview

你好堆栈溢出，

我有一个 winforms 应用程序，它在同一个控件中有两个数据网格视图，它们指向同一个绑定源。这样做的目的是始终显示“客户名称”列，并允许查看数据网格的其余部分（水平滚动）。

有什么办法可以同步这两个？目前，如果用户垂直向下滚动客户列表，则只有一个数据网格受到影响。我是否需要从一个中删除滚动条，并使其同时旋转两个视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:22:45.213

可以使用第一个网格的 Scroll 事件，将第二个网格的滚动偏移量设置为第一个网格滚动的值

# objective-c - UIScrollView，如何将大小设置为图像大小？

> ID：11442164
> 
> 赞同：0
> 
> 时间：2012-07-11T22:02:00.530
> 
> 标签：objective-c, uiscrollview, zooming

我有 UIScrollView，顶部有一个 UIImageView。我有几件事要解决：

1）最初，图像被缩放以适应屏幕（这很好）。如何设置边界以使您无法缩小到这一点（我不想看到任何背景）？

我四处寻找某种`maxSize`财产，但找不到任何东西。

2）如何设置某人可以放大的数量？我不希望用户能够使用 x8 或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:05:54.807

1)

```
[scrollview setMinimumZoomScale : float]; 
```

2)

```
[scrollview setMaximumZoomScale : float]; 
```

# python - 在 Python 上确定是否由于内部条件而在最后一次元素迭代中发生中断的最佳方法是什么？

> ID：11442165
> 
> 赞同：1
> 
> 时间：2012-07-11T22:02:03.337
> 
> 标签：python, c, for-loop

我看到了一些与此类似的问题，但似乎没有人解决这个具体问题，所以我不知道我是否忽略了某些东西，因为我是 Python 新手。

这是问题的上下文：

```
for i in range(10):
    if something_happens(i):
        break
if(something_happened_on_last_position()):
    # do something 
```

从我的 C 背景来看，如果我有一个 for (i=0;i<10;i++) 做同样的事情，如果没有发生中断，那么 i 的值将是 10，而不是 9，和 9如果它发生在最后一个元素上。这意味着方法 something_happened_on_last_position() 可以使用这个事实来区分这两个事件。然而，我在 python 上注意到的是，即使在没有中断的情况下成功运行循环后，我也会在 9 处停止。

虽然两者之间的区别可以像在其中添加一个变量（如标志）一样简单，但我从不喜欢在 C 上使用这种用法。所以我很好奇，是否有另一种选择来做到这一点，或者我在这里错过了什么愚蠢的东西？

请注意，我不能只使用 range(11)，因为这会运行 something_happens(10)。这在 C 上是不同的，因为 '10' 在 for 循环的条件下会失败并且永远不会执行 something_happens(10) （因为我们从索引 0 开始，Python 和 C 上的值都是 10）。

我使用这些方法只是为了说明我感兴趣的代码块，它们是一组与解释问题无关的其他条件。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T22:07:27.133

它以另一种方式工作：

```
for i in range(10):
    if something_happens(i):
        break
else: # no break in any position
    do whatever 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T22:07:54.593

这正是该`else`子句用于`for`循环的内容：

```
for i in range(10):
    if something_happens(i):
        break
else:
    # Never hit the break 
```

这个`else`子句让很多人感到困惑，把它想象成你在循环中执行的所有 if 的 else 。如果从不发生，则该`else`子句发生。`break`有关此的更多信息： [对于/其他](http://nedbatchelder.com/blog/201110/forelse.html)

# python - 解析 ttoken 中的行捕获值

> ID：11442168
> 
> 赞同：1
> 
> 时间：2012-07-11T22:02:22.653
> 
> 标签：python, parsing

我的目标是在纯文本文件中找到具有 id 的行，然后获取该 id 后面的令牌的值。在我的文件中有 100 行与此类似：（第 5 列始终是我搜索的 id，第 6 列是我需要获取/存储两个字母之间的数字的标记。

例如，如果我正在寻找 id Q9C0F0，我想获取/存储值 1136（介于 2 个字母 K 和 N 之间）。然后我想用那个数字在输出文件上打印。提前致谢

COAAD ASXL3 Missense_Mutation KFGM-AA-3672 Q9C0F0 K1136N

COAAD ASXL3 Missense_Mutation KFGM-AA-3693 Q9C0F0 A1544E

COAAD ASXL3 Missense_Mutation KFGM-AA-A010 Q9C0F0 F353S

COAAD ASXL3 Missense_Mutation KFGM-AA-A010 Q9C0F0 L157I

COAAD ASXL3 Missense_Mutation KFGM-AG-3890 Q9C0F0 L1324Q

COAAD ASXL3 Missense_Mutation KFGM-AG-A002 Q9C0F0 H552N

COAAD ASXL3 Missense_Mutation KFGM-AG-A002 Q9C0F0 K471N

COAAD ASXL3 Missense_Mutation TKFGM-AG-A002 Q9C0F0 L804M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:18:18.133

这是一个简单的方法，也许它会帮助你，“算法”的正确性取决于输入条件，所以也许你需要改变整数的解析并改变一些条件

```
with open('file') as f:
    for line in f.readlines():
        l = line.split()
        if l and l[4] == 'Q9C0F0':
            print l[5][1:-1] # or parse int in a more inteligent way 
```

# html - 有没有办法永久改变网页在客户端的显示方式（没有服务器访问权限）？

> ID：11442175
> 
> 赞同：0
> 
> 时间：2012-07-11T22:02:45.760
> 
> 标签：html, css, firebug, client-side, edit

Firebug 允许您在本地编辑单个网页，并进行实时更新，因此您可以立即看到更改的效果。不幸的是，这些更改会在页面刷新后丢失。

### 有没有办法以某种方式使这些更改“粘性”，以便重复访问该站点会重新加载您自己编辑的自定义 html/css？我在想可能是我缺少的某种 Firebug 功能，或者某种其他插件......

为了清楚起见，我不是在谈论我可以访问服务器端的网站。我只是希望能够重新定位我经常访问的某些页面的内容，以便它更适合我的显示器设置，我可以在 Firebug 中做到这一点，但每次页面加载时我都必须这样做（我希望能够以避免不得不这样做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:10:03.370

您应该使用 Firefox 的 Greasemonkey 和/或[Stylish](https://addons.mozilla.org/en-US/firefox/addon/stylish/?src=external-userstyleshome)插件。这些最初开发的地方正是为了完成您打算实现的目标。

另请查看[这篇文章](http://www.firefoxfacts.com/2009/03/23/beginner-guide-to-stylish/)，了解如何开始使用 Stylish。

# apache - 在 ReWriteRule 之后在 httpd 访问日志中捕获引用者

> ID：11442176
> 
> 赞同：1
> 
> 时间：2012-07-11T22:02:45.957
> 
> 标签：apache, mod-rewrite, awstats

我们有两个域，一个主要用于营销目的，以了解我们的竞选活动如何运作。营销域被重定向到主域。在 httpd.conf 中，我们为我们托管的每个域定义了一个虚拟主机，以下是我们如何将营销域重定向到主域：

```
<VirtualHost *:80>
.....
RewriteEngine on
RewriteRule ^/(.*)$ http://primarydomain.com/products [L,R=301]
</VirtualHost> 
```

重定向工作正常，但在访问日志中，“引用者”为空白。我们使用 AWStats 通过查看访问日志来分析我们的网络流量，如果没有引用者，我们很难说出有多少人通过标记域链接登陆主域。关于如何获取作为 RewriteRule 的一部分传入的“引用者”信息以便将其记录在访问日志中的任何建议？

谢谢！

# java - 如何在Java中唯一标识一个线程？

> ID：11442178
> 
> 赞同：4
> 
> 时间：2012-07-11T22:02:54.077
> 
> 标签：java, multithreading

在Java中有什么方法可以唯一地标识一个线程吗？仅使用`Thread.getCurrent().getId()`是不够的，因为一个线程可能会死掉，而下一个线程可能会得到它的 ID。对我来说，这些不是相同的线程，所以我需要一种方法来识别它们。

如果我能得到它，线程创建时间戳会很有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T22:04:54.043

使用有什么问题`==`？或者，如果您需要一个实际数字，[`System.identityHashCode`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)这可能是一个安全的选择。

# java - 匹配整个单词 OR 运算符的正则表达式

> ID：11442179
> 
> 赞同：2
> 
> 时间：2012-07-11T22:02:58.740
> 
> 标签：java, regex

我正在尝试从某些行中匹配完整的单词，想知道如何在正则表达式中使用 OR，如果我只使用一个关键字，它可以正常工作。例子，

```
regex = ".*\\b" + "KEYWORD1" + "\\b.*";

String regex = ".*\\b" + "KEYWORD1|KEYWORD2|KEYWORD3" + "\\b.*";

    for (int i = start; i < end; i++) {           
        if (lines[i].matches(regex)) {
            System.out.println("Matches");
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T22:04:52.330

你要：

```
String regex = ".*\\b(KEYWORD1|KEYWORD2|KEYWORD3)\\b.*"; 
```

最初，您的正则表达式是这样评估的：

```
.*\bKEYWORD1
|
KEYWORD2
|
KEYWORD3\b.* 
```

但你想要：

```
.*\b
(
    KEYWORD1
    |
    KEYWORD2
    |
    KEYWORD3
)
\b.* 
```

这个很酷的[工具](http://rick.measham.id.au/paste/explain.pl)可以帮助您分析正则表达式并找到像这样的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T22:06:37.203

管道字符`|`可以用作 OR 运算符，这在正则表达式中称为交替。

要使其在您的示例中正常工作，您只需围绕交替创建一个组，以确保您仅对您感兴趣的关键字执行 OR，例如：

```
String regex = ".*\\b(KEYWORD1|KEYWORD2|KEYWORD3)\\b.*"; 
```

你目前所拥有的将意味着`.*\\bKEYWORD1 OR KEYWORD2 OR KEYWORD3\\b.*`。

# wordpress - 在wordpress中获取查询字符串参数值

> ID：11442180
> 
> 赞同：12
> 
> 时间：2012-07-11T22:03:17.283
> 
> 标签：wordpress, query-string

我正在制作一个 wordpress 插件。我在锚点中使用了 add_query_string() 以根据用户单击的链接加载内容。现在我需要知道在当前 URI 中获取参数值的最佳方法。

这可能是一个非常基本和愚蠢的问题，但我是编程新手，所以如果我误解了一些术语，我很抱歉。

这是代码：

```
 if ( current_user_can('manage_options') ) {
            echo (
                '<div>
                    <ul>
                        <li><a href="'.add_query_arg( 'adminoption', 1 ).'">option 1</a></li>
                        <li><a href="'.add_query_arg( 'adminoption', 2 ).'">option 2</a></li>
                    </ul>
                </div>'
            );

            // if adminoption == 1 load content A
            // if adminoption == 2 load content B

        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-15T11:02:35.610

get_query_var('adminoption') 仅适用于标准或注册变量。因此，对于非标准 Wordpress 变量，您需要先在 functions.php 文件中注册它：

```
function rj_add_query_vars_filter( $vars ){
    $vars[] = "adminoption";
    return $vars;
}
add_filter( 'query_vars', 'rj_add_query_vars_filter' );

get_query_var('adminoption'); 
```

意识到这个问题很老，但希望它可以帮助任何人。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-14T15:14:49.097

在 David Carrus 的评论中提出隐藏的答案：

> 无论如何，您可以尝试使用旧的 php $_GET['adminoption']。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-11T22:49:08.743

我认为您要的是[get_query_var()](http://codex.wordpress.org/Function_Reference/get_query_var)函数。在您的情况下，您应该使用 get_query_var('adminoption')。希望能帮助到你

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-08-01T13:47:23.933

要从查询字符串中获取 vars，您可以使用 PHP 的`$_GET['key']`方法。

根据您的操作，您还可以使用[WP_Query 类（猫、作者等）接受的](https://developer.wordpress.org/reference/functions/get_query_var/#more-information)`get_query_var('key')`参数。

如果您想通过此函数使用自定义查询变量，则需要使用[query_vars](https://developer.wordpress.org/reference/hooks/query_vars/)过滤器来修改支持的查询变量列表，您可以在上面链接的文档中阅读如何执行此操作。

# python - pytz.timezone 显示亚洲/加尔各答的奇怪结果？

> ID：11442183
> 
> 赞同：18
> 
> 时间：2012-07-11T22:03:27.137
> 
> 标签：python, datetime, pytz

> **可能重复：**
> [Python 日期时间对象显示错误的时区偏移](https://stackoverflow.com/questions/6410971/python-datetime-object-show-wrong-timezone-offset)

```
import pytz, datetime

 pytz.timezone("Asia/Calcutta") 
```

打印以下内容：

```
< DstTzInfo 'Asia/Calcutta' HMT+5:53:00 STD > 
```

为什么不是 05:30？我在时区美国/洛杉矶。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-11T22:38:15.537

时区多年来不断变化。根据[http://www.prokerala.com/travel/timezones/Asia/Kolkata?mode=history](http://www.prokerala.com/travel/timezones/Asia/Kolkata?mode=history)，该区域的原始偏移量为 5.88888888889 小时，即 5 小时 53 分钟。`pytz`将区域分配给实际日期后，将使用适当的偏移量和命名法。

```
>>> tz = pytz.timezone("Asia/Calcutta")
>>> tz
<DstTzInfo 'Asia/Calcutta' HMT+5:53:00 STD>
>>> tz.localize(datetime.datetime(1901, 7, 10, 12, 0))
datetime.datetime(1901, 7, 10, 12, 0, tzinfo=<DstTzInfo 'Asia/Calcutta' HMT+5:53:00 STD>)
>>> tz.localize(datetime.datetime(2012, 7, 10, 12, 0))
datetime.datetime(2012, 7, 10, 12, 0, tzinfo=<DstTzInfo 'Asia/Calcutta' IST+5:30:00 STD>) 
```

# android - android使单选按钮可滚动

> ID：11442185
> 
> 赞同：0
> 
> 时间：2012-07-11T22:03:33.243
> 
> 标签：android, radio-button, scrollbar

我对相当大的单选按钮文本有疑问。这些单选按钮的文本是动态生成的。不幸的是，有时会有大量文本，这会压低我布局中的其他对象。我虽然可以使单选按钮可滚动，那么这将消除此问题。我所说的可滚动的意思是，如果文本长度超过一定大小，单选按钮侧面会出现一个滚动条，这样用户就可以滚动单选按钮的文本，而不会改变我的 xml 文件其余部分的布局. 当我的意思是改变布局时，其他小部件会被进一步向下推，例如按钮。这是单选按钮的 xml 布局文件布局。

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="217dp"
        android:orientation="vertical" >

        <RadioGroup
            android:id="@+id/radioGroup1"
            android:layout_width="match_parent"
            android:layout_height="212dp"
            android:layout_weight="6.86" >

           <ScrollView
               android:id="@+id/ScrlView"
               android:layout_width="fill_parent"
               android:layout_height="78dp" >

            <RadioButton
                android:id="@+id/radio1"
                android:layout_width="match_parent"
                android:layout_height="79dp"
                android:checked="true"
                android:text="RadioButton"
                android:textSize="16dp" />
             </ScrollView>
            <ScrollView
                android:id="@+id/ScrlView"
                android:layout_width="fill_parent"
                android:layout_height="74dp" >

            <RadioButton
                android:id="@+id/radio2"
                android:layout_width="304dp"
                android:layout_height="75dp"
                android:text="RadioButton" />
              </ScrollView>

               <ScrollView android:id="@+id/ScrlView" android:layout_width="fill_parent" android:layout_height="fill_parent" >
            <RadioButton
                android:id="@+id/radio3"
                android:layout_width="300dp"
                android:layout_height="match_parent"
                android:text="RadioButton" />
            </ScrollView>

        </RadioGroup>
    </LinearLayout> 
```

我检查了这个链接，虽然我可能会尝试为单选组添加滚动视图，所以如果单选问题太长，用户可以向下滚动。 [如何在Android中垂直滚动活动](https://stackoverflow.com/questions/5393776/how-to-vertical-scroll-an-activity-in-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:14:09.350

试试 TableLayout 并告诉我们你得到了什么。将每个单选按钮放在其自己的表格行中。您还应该知道 setText() 还应该接受 SpannableStringBuilder 作为输入。这可以让您更好地控制文本的格式。最后，我认为您需要考虑一下设计。我的意思是有限制！如果你得到太多的文本，也许你不会显示所有的内容。看在线报纸。他们有同样的问题。不能一直显示一切。

# sql-server-2008 - 多值参数未加载到服务器上

> ID：11442186
> 
> 赞同：-1
> 
> 时间：2012-07-11T22:03:34.907
> 
> 标签：sql-server-2008, reporting-services, multiple-value

我的问题是关于 sql2008 的报告服务：
-我将一个参数添加到**一个已经建立的报告**中，在那里我得到了某些人的名字。RespStep，它显示在预览中。但是当我将它上传到服务器时，它不会显示： **它假装它加载不到一秒钟，然后报告保持空白。**

注意：
仅当我将参数设置为允许多个值时才会发生此行为。
我认为这是一个空问题，但是参数值来自的列没有空值并且仍然存在这些问题。
我很想知道问题可能出在哪里，在服务器上，数据源和一切都得到了很好的指导。实际上它没有显示任何错误，只是不会加载任何内容并将页面保持为空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:11:54.193

只需删除服务器上的报表并重新解压即可。之后您可以在报表中看到参数

# javascript - keyup 只能使用一次

> ID：11442190
> 
> 赞同：2
> 
> 时间：2012-07-11T22:03:55.367
> 
> 标签：javascript, jquery

```
$("#hi").keypress(function() {
    $(".hi").html("Writing...");
});
$('#hi').keyup(function() {
    $(".hi").delay(1000).queue(function() {
        $(this).html("");
    });
}); 
```

当我在文本框（#hi）中键入“Hello”时，keyup 仅适用于第一个字母，然后它不会消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:09:21.153

您可以使用超时而不是延迟：

```
var timeout;
$("#hi").keypress(function() {
    // Clear any previous timeout
    clearTimeout(timeout);

    // Apply the writing text
    $(".hi").html("Writing...");

    // Remove the text after one second if no more key is pressed until then
    timeout = setTimeout(function () {
       $(".hi").html("");
    }, 1000);
});​ 
```

**这是一个工作示例：http:** [//jsfiddle.net/tF7DH/1/](http://jsfiddle.net/tF7DH/1/)

这里的想法是您设置超时以在击键后一秒删除“Writing...”文本。如果在那一秒内进行了新的击键，则清除先前的超时并设置新的超时。这样，只有当用户停止输入超过一秒钟时，文本才会被删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T22:18:18.563

您通过不调用来阻塞[队列](http://api.jquery.com/queue/)`next`

> 从 jQuery 1.4 开始，被调用的函数作为第一个参数传递给另一个函数。调用时，它会自动使下一个项目出列并保持队列移动。我们使用它如下：

```
$("#test").queue(function(next) {
    // Do some stuff...
    next();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:15:07.977

我不太确定它为什么会有所帮助，但清除队列会给你带来你期望的结果

```
$('#hi').keyup(function() {
    console.log("keyup");
    $(".hi").delay(1000).queue(function() {
        console.log("erase");
        $(this).html("").clearQueue();
    })
});​ 
```

[小提琴](http://jsfiddle.net/Sds2a/)

# python - 并行化 Numpy 向量操作

> ID：11442191
> 
> 赞同：58
> 
> 时间：2012-07-11T22:03:58.557
> 
> 标签：python, numpy, multiprocessing, numexpr

例如，让我们使用`numpy.sin()`

以下代码将返回数组每个值的正弦值`a`：

```
import numpy
a = numpy.arange( 1000000 )
result = numpy.sin( a ) 
```

但是我的机器有32个核心，所以我想利用它们。（这样的开销可能不值得，`numpy.sin()`但我实际想要使用的功能要复杂得多，而且我将处理大量数据。）

这是最好的（阅读：最聪明或最快的）方法：

```
from multiprocessing import Pool
if __name__ == '__main__':
    pool = Pool()
    result = pool.map( numpy.sin, a ) 
```

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-12T20:28:37.763

有**一个**更好的方法：[numexpr](https://github.com/pydata/numexpr)

从他们的主页稍微改写：

它是一个用 C 语言编写的多线程 VM，可以分析表达式，更有效地重写它们，并将它们即时编译成代码，从而在内存和 CPU 受限操作中获得接近最佳的并行性能。

例如，在我的 4 核机器中，评估正弦的速度仅比 numpy 快 4 倍。

```
In [1]: import numpy as np
In [2]: import numexpr as ne
In [3]: a = np.arange(1000000)
In [4]: timeit ne.evaluate('sin(a)')
100 loops, best of 3: 15.6 ms per loop    
In [5]: timeit np.sin(a)
10 loops, best of 3: 54 ms per loop 
```

文档，包括[此处](https://numexpr.readthedocs.io/en/latest/)支持的功能。您必须检查或向我们提供更多信息，以查看是否可以通过 numexpr 评估您的更复杂的函数。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-11T23:17:22.527

好吧，如果您运行以下命令，这是一种有趣的注释：

```
import numpy
from multiprocessing import Pool
a = numpy.arange(1000000)    
pool = Pool(processes = 5)
result = pool.map(numpy.sin, a)

UnpicklingError: NEWOBJ class argument has NULL tp_new 
```

没想到，所以发生了什么，嗯：

```
>>> help(numpy.sin)
   Help on ufunc object:

sin = class ufunc(__builtin__.object)
 |  Functions that operate element by element on whole arrays.
 |  
 |  To see the documentation for a specific ufunc, use np.info().  For
 |  example, np.info(np.sin).  Because ufuncs are written in C
 |  (for speed) and linked into Python with NumPy's ufunc facility,
 |  Python's help() function finds this page whenever help() is called
 |  on a ufunc. 
```

是的 numpy.sin 是在 c 中实现的，因此您不能直接将它与多处理一起使用。

所以我们必须用另一个函数包装它

性能：

```
import time
import numpy
from multiprocessing import Pool

def numpy_sin(value):
    return numpy.sin(value)

a = numpy.arange(1000000)
pool = Pool(processes = 5)

start = time.time()
result = numpy.sin(a)
end = time.time()
print 'Singled threaded %f' % (end - start)
start = time.time()
result = pool.map(numpy_sin, a)
pool.close()
pool.join()
end = time.time()
print 'Multithreaded %f' % (end - start)

$ python perf.py 
Singled threaded 0.032201
Multithreaded 10.550432 
```

哇，也没有想到，对于初学者来说，有几个问题我们正在使用 python 函数，即使它只是一个包装器而不是纯 c 函数，而且还有复制值的开销，默认情况下多处理不会' t 共享数据，因此每个值都需要来回复制。

请注意，如果正确分割我们的数据：

```
import time
import numpy
from multiprocessing import Pool

def numpy_sin(value):
    return numpy.sin(value)

a = [numpy.arange(100000) for _ in xrange(10)]
pool = Pool(processes = 5)

start = time.time()
result = numpy.sin(a)
end = time.time()
print 'Singled threaded %f' % (end - start)
start = time.time()
result = pool.map(numpy_sin, a)
pool.close()
pool.join()
end = time.time()
print 'Multithreaded %f' % (end - start)

$ python perf.py 
Singled threaded 0.150192
Multithreaded 0.055083 
```

那么我们可以从中得到什么，多处理很棒，但我们应该始终测试和比较它，有时它更快，有时它更慢，这取决于它的使用方式......

假设您没有使用`numpy.sin`但另一个函数，我建议您首先验证多处理确实会加快计算速度，也许来回复制值的开销可能会影响您。

无论哪种方式，我也*相信*使用`pool.map`是多线程代码的最佳，最安全的方法......

我希望这有帮助。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-11T22:13:51.043

SciPy 实际上在这里有一篇关于这个主题的很好的文章：[http ://wiki.scipy.org/ParallelProgramming](http://wiki.scipy.org/ParallelProgramming)

编辑：死链接，现在可以在以下位置找到： [http ://scipy-cookbook.readthedocs.io/items/ParallelProgramming.html](http://scipy-cookbook.readthedocs.io/items/ParallelProgramming.html)

# docx4j - docx4j - 从 XmlUtils.marshalToString() 中省略的节点

> ID：11442194
> 
> 赞同：0
> 
> 时间：2012-07-11T22:04:03.077
> 
> 标签：docx4j

使用`XMLUtils.marshalToString()`来自 docx4j，我在两个 docx 文件的相同位置有以下内容（`word/document.xml`解压缩 .docx 后从对应的文件中提取）。这些是文件之间的唯一区别：

```
<w:t xml:space="preserve">换行。首先是</w:t>

```

和

```
<w:t xml:space="preserve">
 <w:r>
 <w:t xml:space="preserve">换行。</w:t>
 </w:r>
 <w:r>
 <w:t xml:space="preserve"> 首先是 </w:t>
 </w:r>
 </w:t>

```

在第一个文档中，`<w:t>`节点的输出如上。

但是，在第二个中，将`<w:t>`打印一个空节点，如下所示：

```
   <w:t xml:space="preserve"></w:t>

```

[我在http://www.schemacentral.com/sc/ooxml/e-w_p-1.html](http://www.schemacentral.com/sc/ooxml/e-w_p-1.html)检查了`w:t`架构，是一个有效的包含元素。`w:r`

**编辑：**上面的链接是`w:p`元素的架构，而不是`w:t`. 正确的链接`w:t`是：[http](http://www.schemacentral.com/sc/ooxml/e-w_t-1.html) ://www.schemacentral.com/sc/ooxml/e-w_t-1.html 。它清楚地显示了唯一可接受的内容`w:t`是字符串（不是 a`w:r`或任何其他标签）。因此（正如下面 Jason 的回答所建议的那样），来自的 XML`document.xml`无效，并且（因此）没有被解组到 docx4j 中。因此，文本不可用于 XmlUtils.marshalToString() 的输出。

是什么阻止了第二个块被输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:43:15.517

您可以信任 marshalToString。

如果它返回一个空的 w:t，那是因为底层的 org.docx4j.wml.Text 对象有一个 null 或空值字段。

您需要查看应该填充的任何代码。

# iphone - 在自定义 UITableViewCell 中包含 UIImage 的最佳方法？

> ID：11442197
> 
> 赞同：0
> 
> 时间：2012-07-11T22:04:18.267
> 
> 标签：iphone, uitableview, uiimageview

我想知道在自定义 UITableViewCell 中绘制 UIImage 的最佳和最优化的方法是什么，其中包含许多元素（几个图像、2 个标签、渐变背景）。我读到drawRect是推荐的方法，因为涉及到几个子视图，最好使用drawRect将它们全部组合成一个视图内容。但与此同时，我在其他地方读到 UIImageView 是优化处理图像（缓存、快速渲染等）的首选方式。我会很感激一些启发。

谢谢 AF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:32:17.433

我参加过一次 iPhone 技术讲座，一位性能工程师说，如果你在 a`UIImage`中使用 a，`UITableView`你应该将它与类方法 [ `UIImage imageNamed:`] 一起添加，以最有效地使用该类。当然，您需要将其嵌入到`UIImageView`. 我通常会发现任何时候都有可用的类方法来为你做点什么，Apple 在他们做这件事的方式上非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:54:54.853

我会推荐`UIImageView`它的易用性。您可以将它拖放到 Interface Builder 中，或者只是以编程方式添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:35:17.167

我建议你使用

`cell.imgView.image = [UIImage imageNamed:@"123.jpg"];`

# matlab - 在不同的matlab视图中调用的subplot函数

> ID：11442200
> 
> 赞同：0
> 
> 时间：2012-07-11T22:04:24.407
> 
> 标签：matlab

我已经构建了一个由 2 个视图组成的 matlab 应用程序，每个视图都知道另一个的句柄。主视图启动第二个视图并获取它的句柄。

然后`subplot()`在主视图中调用该函数并使用 显示图像`imshow()`。我想做的是在第二个视图中显示图像的几个细节，也可以使用`subplot()`and`imshow()`函数。

使用第二个视图的句柄，我从主视图调用第二个视图中定义的函数，该函数进一步调用 subplot() 和`imshow()`函数以获取详细信息。

发生的情况是主视图中的初始图像消失，被细节替换。谁能给我一个建议，以便我可以在主视图中显示图像，而在第二个视图中显示详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:34:45.100

也许您需要指定放置图像或数据的轴。该`imshow`命令允许您使用参数指定用于显示图像的轴`Parent`。

`subplot`将其与返回它创建的轴的句柄的事实相结合，并且您拥有。

```
h = subplot(m,n,i) %# create a subplot axes
imshow(img,'Parent',h) %# display an image in the previously created axis 
```

假设您可以在两组代码之间传递信息，您需要检索您希望图像显示在其中的轴的句柄，并在调用`imshow`. 这是一个例子

```
hFig = figure;
h(1) = subplot(2,2,1)
h(2) = subplot(2,2,2)
setappdata(hFig,'axisHandles',h) %# stores the axes handles in appdata of the figure
.... 
```

现在，当您想在第一个图中显示一些图像时，假设您知道每个图窗窗口的句柄，您可以执行以下操作。

```
h=getappdata(hFig,'axisHandles')
imshow(img,'Parent',h(1)) 
```

# r - 更正我的函数输出的格式

> ID：11442202
> 
> 赞同：-6
> 
> 时间：2012-07-11T22:04:28.703
> 
> 标签：r

这是我计算中国股市贝塔的函数：

```
mybeta <- function(company) {
  require(quantmod)
  setSymbolLookup(CSI300=list(name="000300.ss",src="yahoo"))
  getSymbols("CSI300",from="2010-01-01",to="2011-01-01")
  setSymbolLookup(SDB=list(name=company,src="yahoo"))
  getSymbols("SDB",from="2010-01-01",to="2011-01-01")
  csi=as.data.frame(weeklyReturn(CSI300))
  sdb=as.data.frame(weeklyReturn(SDB))
  cbeta=merge(csi, sdb, by="row.names")
  cov(cbeta[2],cbeta[3])/var(cbeta[2])
} 
```

当我输入：

```
mybeta("600005.ss")
                  weekly.returns.y
weekly.returns.x          1.105631 
```

我只想要`1.105631`输出，而不是“weekly.returns.y”和“weekly.returns.x”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:57:10.327

It's clear English isn't your first language, so I will be patient.

You have revealed what you are actually trying to do, so your first two questions ([one](https://stackoverflow.com/q/11427434/271616), [two](https://stackoverflow.com/q/11429889/271616)) could have been avoided because they are not useful for solving your actual problem.

Here is a modified version of your function that accomplishes the same goal, with a lot less unnecessary work.

```
mybeta <- function(company) {
  if(!require(quantmod))
    stop("quantmod must be installed; try install.packages('quantmod')")
  setSymbolLookup(CSI300=list(name="000300.ss",src="yahoo"), 
                  SDB=list(name=company,src="yahoo"))
  getSymbols(c("CSI300","SDB"),from="2010-01-01",to="2011-01-01")
  ret <- merge(weeklyReturn(CSI300),weeklyReturn(SDB))
  cbeta <- cov(ret, use="pairwise.complete.obs")
  cbeta[1,2]/cbeta[1,1]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T22:29:42.330

利用`as.numeric`

制作函数的最后一行

```
as.numeric(cov(cbeta[2],cbeta[3])/var(cbeta[2])) 
```

顺便说一句，这里没有理由使用`data.frame`s。 `xts`太棒了; 接受它。

编辑：除了不需要转换为 之外`data.frame`，您的函数没有副作用可能更安全（例如，`getSymbols("SDB")`根据您`mybeta`最后传递的内容返回不同的值；此外，默认情况下`getSymbols`分配数据。您`.GlobalEnv`可能会考虑使用`auto.assign=FALSE`. 这就是我将如何编辑您的功能：

```
mybeta <- function(company) {
  require("quantmod")
  CSI300 <- getSymbols("000300.ss", src='yahoo', from="2010-01-01", 
                       to="2011-01-01", auto.assign=FALSE)
  SDB <- getSymbols(company, src='yahoo', from="2010-01-01", to="2011-01-01", 
                    auto.assign=FALSE)
  csi <- weeklyReturn(CSI300)
  sdb <- weeklyReturn(SDB)
  cbeta=merge(csi, sdb)
  as.numeric(cov(cbeta[, 1], cbeta[, 2])/var(cbeta[, 1]))
} 
```

# c# - 局部变量还是直接语句？

> ID：11442210
> 
> 赞同：1
> 
> 时间：2012-07-11T22:05:07.283
> 
> 标签：c#, coding-style

我目前正在学习C#，我真的很想从一开始就获得一个好的编码风格，所以我想听听各位专业人士对这个问题的意见。

您应该总是（或大部分）使用局部变量进行条件/计算（示例 2）还是直接使用语句同样好/更好（示例 1）

示例 1。

```
if (double.TryParse(stringToParse, out dblValue)) ... 
```

示例 2。

```
bool parseSuccess = double.TryParse(stringToParse, out dblValue);
if (parseSuccess) ... 
```

在这个例子中听到你的想法和推理会很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:08:19.340

如果将所有内容放在一行中会使其太长或太复杂，则应使用更详细的样式。

如果变量的名称可以更容易理解代码，您还应该使用单独的变量：

```
bool mustWait = someCommand.ConflictsWith(otherCommand);
if (mustWait) {
    ...
} 
```

在这种情况下，您应该考虑使用枚举来增加可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:08:13.037

我在生产代码中看到了很多示例 1。只要表达简单，并且容易理解发生的逻辑，我想你不会发现很多人认为这是*不好的风格*。

尽管您可能会发现很多人的喜好不同。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T22:12:52.550

这是我使用的规则：如果您可以快速浏览并确切知道它在说什么，请将其放在一条线上。如果它太复杂而无法像阅读任何其他文本一样快速阅读，请给它一个局部变量。但是，无论如何，您都不需要很长的 if 语句标题。所以如果太长，就分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T22:26:54.927

我建议你使用像这里这样的局部变量：

```
bool parseSuccess = double.TryParse(stringToParse, out dblValue);
if (parseSuccess) ... 
```

有两个原因：

**1.**您可以多次使用该变量，而无需再次解析您的双精度。

**2.**它使代码更具可读性。

考虑一下：

```
if(double.TryParse(string1, out Value1) && double.TryParse(string2, out Value2) && double.TryParse(string3, out Value3) && double.TryParse(string4, out Value4))
{
    //some stuff
} 
```

它太长了，它使代码难以阅读。所以有时局部变量会使代码更具可读性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T01:45:08.977

源代码的清晰度是一个重要参数，尤其是在应用程序维护中，但性能也是如此。

看起来微不足道，有时使用编程语言的简单语法“技巧”，我们得到了非常好的结果。

如果我认为我稍后会在代码中以某种方式使用结果，我会使用变量，否则我会优先使用直接语句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T22:08:57.920

没有正确的选择。两者都是完全可以接受的。

如果您没有很多要连接的条件，大多数人会选择第一个选项，因为它会减少代码行数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T22:16:42.503

正如你所说，你正在学习 C#

所以我的投票将是你的这种风格

```
bool parseSuccess = double.TryParse(stringToParse, out dblValue);
if (parseSuccess) ... 
```

如果你正在学习，你会有很多东西要学，上面的风格清楚地告诉你 TryParse 返回一个布尔值，所以你不必担心或找到 TryParse 的返回类型是什么

# c# - TabPage 上的控件发生了莫名其妙的变化

> ID：11442211
> 
> 赞同：1
> 
> 时间：2012-07-11T22:05:08.380
> 
> 标签：c#, visual-studio-2008, tabpage

在 Visual Studio 2008 上，我有一个 System.Windows.Forms.TabPage 实例。

TabPage 上有很多控件。

因此，TabPage 上有一个垂直滚动条。

很多次，所有控件都均匀地向下移动，从而在 TabPage 的顶部产生大量空白空间。我必须向下滚动才能查看第一个控件，它应该位于 TabPage 的顶部。这发生在 Visual Studio 中，随后也发生在运行时。

似乎没有任何事件触发这种转变。它只是发生。查看每个控件的 Location 属性表明它们都向下移动了相同的值。

我不得不手动修复这个好几次。然后问题又回来了，通常是几天后。我可以处理表格。这看起来不错的样子。关闭它。稍后再回来，控件都已向下移动了一个固定的量。

7 月 14 日，更多信息

Visual Studio 2008 正在改变这一点：

this.groupBoxTrees.Location = new System.Drawing.Point(3, 3);

对此：

this.groupBoxTrees.Location = new System.Drawing.Point(3, 1030);

为什么？什么时候？是什么原因？我不知道。

请注意，值 1030 也是随机的。我只能说，出于某种原因，VS 为 TabPage 上每个控件的每个 Location.Y 属性添加了一个常量值。所有控件都被锁定。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:53:01.357

感谢一位同事，我发现出了什么问题。

如果在 TabPage 上的滚动条向下移动时保存表单，Visual Studio Studio 会在 TabPage 上每个控件的 Location.Y 中添加一个数字。该值与滚动条向下移动的距离相关。

可以通过在保存表单所做的更改之前始终将滚动条移动到表单顶部来防止该问题。

为什么会这样？我没有办法知道。这可能与我使用两台显示器有关。但是话又说回来，如果这有助于导致问题，那么您会认为 Location.X 会被更改，而不是 Location.Y。

# java - 使用来自 java 类的命名空间的 xpath

> ID：11442213
> 
> 赞同：1
> 
> 时间：2012-07-11T22:05:13.060
> 
> 标签：java, xpath, namespaces

我正在尝试使用 XPATH 解析具有命名空间的 xml 文档。我已经阅读了它应该如何完成。我也实现了 NamespaceContext。但是，我仍然没有得到这些值。我想我错过了一些简单的东西。

我的xml输入是

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:customer xmlns:ns1="http://test/ns1">
    <ns1:name>john</ns1:name>
</ns1:customer> 
```

我的主文件是 TestXMLPath

```
public static void main(String[] args) throws Exception {

  String myInputXML = "src/testxmlpath/input-with-namespace.xml";
  DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();        

  String expression ="/ns1:customer/ns1:name";

  Document document = db.parse(new File(myInputXML)) ;
  XPath xpath = XPathFactory.newInstance().newXPath();
  xpath.setNamespaceContext(new SimpleNamespaceContextImpl());
  String value = xpath.evaluate(expression,document);
  System.out.println("value" + value);
} 
```

我的 NamespaceContext 实现是

```
public class SimpleNamespaceContextImpl implements NamespaceContext {

@Override
public String getNamespaceURI(String prefix) {
    System.out.println("getNameSpace for prefix "+prefix);        
    if (prefix == null) {            
        throw new NullPointerException("Null prefix");
    } else if ("ns1".equals(prefix)) {            
        return "http://test/ns1";
    } else if ("xml".equals(prefix)) {            
        return XMLConstants.XML_NS_URI;
    } else {            
        return XMLConstants.XML_NS_URI;
    }
}

@Override
public String getPrefix(String namespaceURI) {        
    return "ns1";
}

@Override
public Iterator getPrefixes(String namespaceURI) {
    return null;
}
} 
```

当一个方法被调用时我打印出来。这是输出。

```
getNameSpace for prefix ns1
getNameSpace for prefix ns1
value
BUILD SUCCESSFUL 
```

看不懂，怎么不行？？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:13:55.090

对我来说很好。输出：

```
getNameSpace for prefix ns1
getNameSpace for prefix ns1
valuejohn 
```

您确定要加载正确的文档吗？我正在使用 Xerces 构建文档并使用 Saxon 来评估 XPath。相关类的转储：

```
class com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl
class com.sun.org.apache.xerces.internal.dom.DeferredDocumentImpl
class net.sf.saxon.xpath.XPathFactoryImpl 
```

# ruby-on-rails - Rails 3 - 如何添加到自动完成另一个条件？

> ID：11442215
> 
> 赞同：0
> 
> 时间：2012-07-11T22:05:33.950
> 
> 标签：ruby-on-rails, autocomplete, jquery-autocomplete

我使用 gem [rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)对我的数据库中的项目进行自动完成搜索。自动完成工作正常，但我需要向生成的查询添加另一个条件。

如果我开始编写搜索字符串，则会生成以下查询：

```
SELECT persons.id, persons.name FROM "persons" WHERE (LOWER(persons.name) ILIKE 'jo%') ORDER BY persons.name ASC LIMIT 10 
```

这将返回所有行，其中名称从`jo`.

但是我怎么能搜索所有的人，名字从`jo`同时开始，例如，列`active_person`= `1`？有没有为此目的的帮助者或类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:13:45.657

如果我正确理解了上下文，那么**active_person**是一个布尔值，指示用户是否处于活动状态。

如果这种行为在大多数情况下是可取的 - 您搜索仅活跃的用户/人员，那么您可以在您的 Person 模型中包含一个 default_scope ，如下所示：

```
class Person < ActiveRecord::Base
  default_scope where(:active_person => 1)
end 
```

这样，任何生成的查询也将检查 active_person = 1

更多关于默认范围的信息：http: [//apidock.com/rails/ActiveRecord/Base/default_scope/class](http://apidock.com/rails/ActiveRecord/Base/default_scope/class)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T21:37:58.337

我知道@Andrei 的答案是正确的，但这不是我想要的。我猜@user984621 也一样。我一直在寻找的是我想在查询中添加一个额外的条件。通过阅读此[https://github.com/crowdint/rails3-jquery-autocomplete/blob/master/lib/rails3-jquery-autocomplete/orm/active_record.rb](https://github.com/crowdint/rails3-jquery-autocomplete/blob/master/lib/rails3-jquery-autocomplete/orm/active_record.rb)

我发现rails自动完成支持附加条件，你只需要将另一个参数传递给默认用法，就像这样

```
autocomplete :user, :name, :where => { :role => 'employee'} 
```

而不是这个

```
autocomplete :user, :name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:18:34.443

更改`WHERE (LOWER(persons.name) ILIKE 'jo%')`为`WHERE (LOWER(persons.name) ILIKE 'jo%') AND active_person = 1`

`AND`您可以用s 和`OR`以这种方式将大量子句链接在一起。

请注意，这实际上是一个关于 SQL 的问题：您的标题和标签有点误导。

# jquery - jquery在图像悬停时居中跨度（因为它可能是内联的？）

> ID：11442219
> 
> 赞同：3
> 
> 时间：2012-07-11T22:05:57.683
> 
> 标签：jquery

当用户悬停图像时显示内容时，我正在尝试制作精美的悬停效果。我希望悬停气泡居中并位于图像顶部。

在这个小提琴中说明：http: [//jsfiddle.net/sandrodz/TnEMU/](http://jsfiddle.net/sandrodz/TnEMU/)

在 chrome 中尤其糟糕，其中 span 会自动变为 display:inline 悬停时的行为与 firefox 不同。将两者都作为块元素会有所帮助，但隐藏元素是平移的，它会自动获取 display:inline。关于如何解决此问题并使悬停直接出现在正确图像之上的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:36:53.817

## [你去（用你的代码）](http://jsfiddle.net/roXon/8NJvX/8/)

`CSS`变化：

```
#features_icons li span {
    top:0; /* ///added to fix in chrome ///*/
    left:0;/* ///added to fix in chrome///*/
    white-space:nowrap;/* ///added this line/// */
}
#features_icons li {
    position:relative;  /* ///added this line/// */
} 
```

在 jquery 中，我刚刚添加了：`outerWidth(true)`以获得正确的尺寸：

```
spanW = ($(this).next("span").outerWidth(true) / 2) - ($(this).outerWidth(true) / 2); 
```

* * *

您也可以尝试：**以不同的方法**`<SPAN>`删除所有元素：

 **## *[jsFiddle 演示](http://jsfiddle.net/roXon/UK3NG/)*

在任何情况下，您的图标都需要一个 alt 属性......所以为什么不给每个图像提供 SPAN 文本：（任何 CMS 编辑器都允许您向图像添加*alt.description*文本。）

```
<img alt="Air Conditioning" src="http:conditioning.png" /> 
```

因此，您可以删除所有跨度，在`<body>`标记后附加：

```
<div id="tooltip"></div> 
```

并使用我的脚本：

```
$("ul#features_icons li img").hover(function() {
           var altText = $(this).attr('alt');
           var thisW2   = $(this).outerWidth(true) / 2;
           var thisPosL = $(this).offset().left + thisW2;
           var thisPosT = $(this).offset().top;

           $('#tooltip').text(altText);
           var toolW2 = $('#tooltip').outerWidth(true) / 2; // after it's filled with text
           $('#tooltip').stop(1).fadeTo(200,1).css({left: (thisPosL-toolW2) , top:thisPosT});
    }, function() {
        $('#tooltip').fadeTo(100,0,function(){
           $(this).hide();
        });
    }); 
```

*   它将计算图标位置
*   抓住`alt`文字
*   `#tooltip`用 xt填充
*   获取工具提示宽度
*   定位`#tooltip`
*   并展示它！

PS：我刚刚在你的 CSS: 中重命名`#features_icons li span {`为`#tooltip{`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:42:43.457

这是我的看法[http://jsfiddle.net/XrTZg/30/](http://jsfiddle.net/XrTZg/30/)

我在img之前移动了跨度。我删除了不必要的边距（跨越内联 css + css 文件）。

I made the span `display: absolute;`, i wanted it to be positioned relative to the parent element, so i set `#features_icons li` to be `display: relative;`.

I also fixed the top and left offset of the span, in JS.**

# jquery - jQueryUI 对话框窗口不会在 iPad 上关闭

> ID：11442239
> 
> 赞同：0
> 
> 时间：2012-07-11T22:07:48.480
> 
> 标签：jquery, ipad, jquery-ui, ios-simulator, jquery-ui-dialog

我们在我们的网站上使用 jQueryUI 对话窗口作为弹出视频的容器。这些都很好用，只是关闭的“x”在 iPad 上不起作用。我不知道为什么会这样，也不知道如何调试它。

有任何想法吗？我需要发布某种代码吗？

# c# - 如何在 wp7 的可视化树中查找元素？

> ID：11442241
> 
> 赞同：0
> 
> 时间：2012-07-11T22:07:56.823
> 
> 标签：c#, windows-phone-7, visual-tree

我需要在视觉树中找到元素。例如，我有一个网格，当 ExpanderView 展开时，我需要在 tbox:WatermarkTextBox 中设置我自己的文本。xml

```
<Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="280"/>
                                <ColumnDefinition Width="100"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0" Grid.Column="0" >
                                <Border/>
                            </Grid>
                            <Grid Grid.Row="0" />
                            <Grid Grid.Row="0" Grid.Column="2"  />
                            <toolkit:ExpanderView Expanded="setText" Collapsed="hideAppBar">
                                <Image Height="100" Margin="-53,0,0,0"/>
                            </toolkit:ExpanderView>
                            <toolkit:ExpanderView x:Name="expText"  IsExpanded="False" Tag="{Binding}" Grid.Row="1" Grid.Column="1" VerticalContentAlignment="Stretch" Grid.ColumnSpan="2" Background="White" Foreground="Black" BorderBrush="White">
                                <tbox:WatermarkTextBox TextChanged="DisableOrEnable" TextWrapping="Wrap" AcceptsReturn="True" WatermarkText="Введите комментарий"  BorderThickness="0" InputScope="Chat" Margin="-51,0,0,0" Padding="0" Background="White" BorderBrush="White"/>
                            </toolkit:ExpanderView>
                           ...many elements
                        </Grid> 
```

C＃

```
public string message="my message";
private void setText(object sender, RoutedEventArgs e)
        {
            setMessage(((sender as ExpanderView).Parent as Grid));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:07:57.993

递归搜索可视化树并将值设置为所需元素的函数：

```
public void setMessage(DependencyObject parent)
        {
            if (parent == null)
            {
                return;
            }

            int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
            for (int i = 0; i < childrenCount; i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(parent, i);
                var frameworkElement = child as FrameworkElement;

                if (frameworkElement != null && frameworkElement is WatermarkTextBox/*Type of element that you need*/)
                {
                    (frameworkElement as WatermarkTextBox).Text = message;/*Value that you need*/
                    break;

                }else
                    if (frameworkElement != null)
                    {
                        int CountInChildren = VisualTreeHelper.GetChildrenCount(frameworkElement);
                        for (int z = 0; z < CountInChildren; z++)
                        {
                            DependencyObject child1 = VisualTreeHelper.GetChild(frameworkElement, z);
                            setMessage(frameworkElement);
                        }
                    }

            }
        } 
```

# node.js - 安装塔模块时遇到问题 - ws 模块崩溃

> ID：11442249
> 
> 赞同：1
> 
> 时间：2012-07-11T22:08:26.360
> 
> 标签：node.js, towerjs

我是 node.js 的新手，我已经通过从 node 网站运行安装来安装它。我已经在全球范围内安装软件包（例如应该），但现在我正在尝试在我的**Mac**上安装 tower 模块，如下所示：

```
sudo npm install tower -g 
```

它安装了一堆东西然后崩溃，输出

```
npm http 304 https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/zeparser/0.0.5

> ws@0.4.20 install /usr/local/lib/node_modules/tower/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws
> node install.js

shell-init: error retrieving current directory: getcwd: cannot access parent directories: Permission denied

node.js:520
var cwd = process.cwd();
                  ^
Error: EACCES, permission denied
at Function.startup.resolveArgv0 (node.js:520:23)
at startup (node.js:54:13)
at node.js:611:3
npm ERR! ws@0.4.20 install: `node install.js`
npm ERR! `sh "-c" "node install.js"` failed with 11
npm ERR! 
npm ERR! Failed at the ws@0.4.20 install script.
npm ERR! This is most likely a problem with the ws package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node install.js
npm ERR! You can get their info via:
npm ERR!     npm owner ls ws
npm ERR! There is likely additional logging output above. 
```

如果我没看错，那就是 ws (websockets?) 模块崩溃了。

在研究这个问题时，一个[博客建议](http://shapeshed.com/setting-up-nodejs-and-npm-on-mac-osx/)我将节点路径添加到我的 .bashrc 中，所以我已经这样做了。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:49:45.167

在这一行：

`ws@0.4.20 install /usr/local/lib/node_modules/tower/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws`

我们看到 ws 安装在 /usr/local/lib 中，我需要 root 来写这里吗？

我用的是linux，mac可能不是这样的......

您应该使用`sudo npm install -g tower`或安装带有[nvm](https://github.com/creationix/nvm/)的Node.js。Nvm 关心模块是否安装在您的家中，因此您不需要 sudo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:39:36.127

经过大量实验后，唯一对我有用的是[启用 OSX root 帐户](http://support.apple.com/kb/ht1528)，然后：

```
su
npm install -g tower 
```

sudo 不起作用，但 su 起作用了。

# visual-studio - 如何清除测试方法的 [Ignore] 缓存？（无需重新启动 Visual Studio）

> ID：11442252
> 
> 赞同：4
> 
> 时间：2012-07-11T22:09:04.440
> 
> 标签：visual-studio, mstest

我有一些标记为 的测试`[Ignore]`，但现在，我想再次运行它们，因此我删除了该`[Ignore]`属性，但 Visual Studio 仍将它们视为已忽略。

我该怎么做才能清除缓存以不再忽略测试？

**更新：**

看起来这些数据存储在 vsmdi 文件中：

```
<TestLink ... name="MethodName" ... enabled="false" /> 
```

所以删除 vsdmi 文件，或者以其他方式导致它被重新生成是必要的。

但是，Visual Studio 会缓存它，因此重新启动 Visual Studio 似乎可以解决问题（有时至少）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:31:34.880

您是否尝试过清洁解决方案（在构建菜单中）？另外我会尝试从测试项目中删除 bin/obj 文件夹。如果这不起作用，我会寻找可能是某种缓存或与测试项目相关的其他（二进制）文件，然后删除它们。我无法想象很难找到这些文件并删除它们（确保你有备份，以防万一）。

**编辑** [显然](https://stackoverflow.com/a/11530442/215042)是 .vsmdi 文件。
**EDIT2** [显然不是](https://stackoverflow.com/questions/11442252/how-do-i-clear-the-ignore-cache-for-test-methods/11530436#comment15243303_11530436)：P

如果我遇到这样的问题，我什至可能已经进行了文件搜索，以查找已被 [忽略] 的特定方法名称。确保您使用的工具可以查看每个文件的“内部”，Windows 文件搜索会忽略一堆文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:32:32.547

我工作的地方也有这个问题。

您可以手动更改 .vsmdi 文件或将其删除。如果再次打开测试视图（删除后），它将生成一个新文件。

此外，您选择的测试设置可能会出现同样的问题。它也会“缓存”它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T13:10:26.600

即使这个话题很老了，我想为这个问题添加我的解决方案，对于任何有同样问题的人......

我最近也遇到了这个问题，并在 .vsmdi 文件中找到了解决方案。在“**测试设置**”下，“**单元测试”在“***要加载的程序集*的根文件夹中引用了一个文件夹： ”并选中了“*使用测试目录中程序集的加载上下文*”复选框。

我取消选中该复选框，之后，我的测试确实运行成功！（我知道旧程序集所在的“根文件夹...”中提到的文件。您还可以从“根文件夹...”中的文件夹中删除文件，以确保删除旧程序集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T16:14:08.027

我使用的是 Visual Studio 2012，没有 .vsdmi 文件，但遇到了问题。我可以通过删除 .suo （隐藏在 .sln 文件旁边的文件）文件并重新启动 Visual Studio 来解决这个问题。我知道它说没有重新启动，但提供的解决方案对我不起作用，所以我提供了一个替代方案，以防其他人遇到同样的错误。

# objective-c - 在桌面上注册双击（但不在图标上！）

> ID：11442265
> 
> 赞同：0
> 
> 时间：2012-07-11T22:09:54.737
> 
> 标签：objective-c, xcode, macos, cocoa

这里有一个问题：我需要知道用户何时双击 OS X 桌面，而不是上面的图标。

现在，我想到了以下解决方案，但我不确定它们是否可行：

1.  使用桌面图标的位置（不知道如何获取它们）和桌面图标的大小，理论上我们可以检查用户双击桌面后，它是否在某个图标区域内。对比：可能并非完美无缺，因为某些图标可能是透明的或不占用整个图标大小。

2.  也许有一个变量告诉我们是否点击了桌面上的图标？然后我们可以检查当用户上次双击桌面时该变量是否已激活。

我当然仍然对其他（更好的）解决方案持开放态度，但它们需要为 Mac App Store 提供沙盒功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:51:13.440

由于多种原因，这可能不适合 Mac App Store。

首先，您将如何拦截窗口外的点击？为此有几种不同的机制（例如，事件点击），但沙盒应用程序中不允许使用它们。这是故意的，并且有充分的理由——你不应该干扰其他应用程序或操作系统。

最重要的是，很难想象你尝试做的任何事情都不算是非标准的 UI/HIG 东西，这是拒绝的另一个原因。

但是，假设这些都不是问题，并且您可以拦截桌面上的点击，那么没有记录的方法可以获取桌面上的所有图标，因此您必须直接阅读 .DS_store 文件，这意味着依赖于私有实现信息，这是您不允许做的另一件事。

最后，您必须访问该 .DS_store 文件。除非您希望用户将（不可见）文件或其父目录拖到您的应用程序或在 NSOpenPanel 或其他东西中选择它，否则从沙箱内部获得此类访问的唯一方法是通过临时异常权利。除非您可以向审阅者证明为什么需要它作为操作系统中的错误或限制的解决方法，否则您不能使用它。那么，你的理由是什么？

# sql - 将引用游标转换为 pl-sql 中的表类型

> ID：11442266
> 
> 赞同：1
> 
> 时间：2012-07-11T22:10:01.990
> 
> 标签：sql, oracle, plsql, oracle10g, plsqldeveloper

我想将 refcursor 转换为表类型，如下所示。下面的语法不能编译。目的是将引用的结果放入一个临时表中，然后对该表进行一些工作。

```
 create table vtest1 (a number, b number); 
    create table temptable1(a number, b number); 
    declare 
    pOUT SYS_REFCURSOR;
    type vtest1Tab is table of vtest1%rowtype;
    begin
      open pOUT for 'select * from vtest1';
      insert into temptable1(n1,n2)  
      select * from TABLE( cast(pOUT as vtest1Tab));
      close pOUT;
    end; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:50:48.233

您可以使用`bulk collect`and`forall`代替`insert into ... select`：

```
create table vtest1 (a number, b number);

insert into vtest1 values (1,2);

create table temptable1(a number, b number);

declare 
  pOUT SYS_REFCURSOR;
  type vtest1Tab is table of vtest1%rowtype;
  v_t vtest1Tab;
begin
  open pOUT for 'select * from vtest1';
  fetch pOUT bulk collect into v_t;
  close pOUT;
  forall indx in v_t.first..v_t.last
   insert into temptable1
     values v_t(indx)
    ;
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:33:48.750

如果您在编译时知道表的名称，我不明白使用 REF 光标的意义？为什么不将您的匿名块设置为：

```
BEGIN
    INSERT INTO temptable1 SELECT * FROM vtest1;
    COMMIT;
END; 
```

如果您真的想要将源表名称作为字符串传递的灵活性，GWU 的答案肯定有效。

# android - 通过 Intent 发起 SIP 呼叫

> ID：11442271
> 
> 赞同：2
> 
> 时间：2012-07-11T22:10:26.803
> 
> 标签：android, android-intent, native, sip

我正在编写一个将发出 SIP 呼叫的 Android 应用程序。我想使用本机 Android SIP API，并在以下位置找到了文档：

*   [http://developer.android.com/guide/topics/connectivity/sip.html](http://developer.android.com/guide/topics/connectivity/sip.html)和
*   [http://developer.android.com/reference/android/net/sip/SipManager.html](http://developer.android.com/reference/android/net/sip/SipManager.html)

虽然我可以向 SIP 提供商注册并开始通话，但看起来这太低级了。我只想将 SIP 呼叫移交给本机 Android 电话应用程序，并为其提供一个 SIP 地址以进行呼叫，并假设用户已经在 Android 电话应用程序中注册了一个 SIP 帐户。

我认为这必须有一个 Intent，比如[http://developer.android.com/reference/android/content/Intent.html#ACTION_DIAL](http://developer.android.com/reference/android/content/Intent.html#ACTION_DIAL)我可以提供一个 SIP 地址，如下所示：

```
Uri phoneCall = Uri.parse("tel:1234567890");
Intent caller = new Intent(Intent.ACTION_DIAL, phoneCall);
startActivity(caller); 
```

但我的实验没有成功。我必须使用`SipManager`还是有可以使用的意图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T12:11:11.497

假设您已经创建了一个全局 SIP 帐户：

```
Uri phoneCall = Uri.parse("sip:[number]@[domain]"); 
```

只需将数字和域替换为适当的值即可。

# jquery - jQuery链接操作

> ID：11442272
> 
> 赞同：0
> 
> 时间：2012-07-11T22:10:37.870
> 
> 标签：jquery

这个问题非常具体到我正在尝试使用的代码，第一个我承认我不知道如何用 jQuery 编写，我更多地破解/操作现有脚本，但我会在某个阶段学习，但我需要修复一个当前的问题。

基本上我有一个简单的选项卡布局，可以换出内容，我的问题是我换出的内容是从 CMS 生成的，因此#screen 内的链接会将您带到不同的页面。我想做的是通过操作a href 或者我只能通过iframe 实现的内容将内容保留在#screen div 中，但如果可能的话，我想远离它。对不起，如果我的解释不是下面的清晰代码。

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <style>
    .content {display:none;}
    .tab {cursor:pointer; width:20%; float:left; text-align:center; color:#fff; padding:10px;}
    #screen {clear:both; padding:20px 0 0 0;}
    </style>
    <script>
    $(document).ready(function(){
    var $content1 = $('.content').first().clone();
    $content1.css("display", "block");
    $('div#screen').html($content1);
    $(".tab").live("click", function() {
    var $content = $(this).next('div.content').clone();
    $content.css("display", "block");
    $('div#screen').html($content);}
    );
    });
    </script>
    <div class="tab">
    Tab Title
    </div>
    <div class="content">
    <a href="toplevelpage/pageexample.html">Link</a><br />
    <a href="toplevelpage/pageexample2.html">Link2</a><br />
    <a href="toplevelpage/pageexample3.html">Link3</a>
    </div>
<div class="tab">
    Tab Title2
    </div>
    <div class="content">
    <a href="toplevelpage/pageexample.html">Link</a><br />
    <a href="toplevelpage/pageexample2.html">Link2</a><br />
    <a href="toplevelpage/pageexample3.html">Link3</a>
    </div>
<div id="screen">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:13:55.047

要将内容加载到 div 中，您可以使用`load()`- [http://api.jquery.com/load/](http://api.jquery.com/load/)：

```
$('a').on('click',function(e){
    e.preventDefault();
    $('div.content').load($(this).attr('href'));
}); 
```

不过，您可能希望选择带有类的链接，否则页面上的每个链接都会加载到`content`.

# delphi - 如何在 TcxScheduler 中更改事件的标题？

> ID：11442273
> 
> 赞同：0
> 
> 时间：2012-07-11T22:10:40.283
> 
> 标签：delphi, devexpress, delphi-xe2

如何在 TcxScheduler 中更改事件的标题？我尝试了以下代码：

```
cxScheduler.SelectedEvents[i].Caption := 'X';
cxScheduler.Invalidate; 
```

但在当前事件发生变化之前，Caption 已过时。

此外，如果您尝试通过就地编辑器编辑标题，然后取消编辑模式，您将再次看到一个过时的值。

正确的标题应在屏幕上和相关的 DataSet 上以保存数据。

非常感谢您的帮助！

PS 相关 DevExpress 问题链接：[DevExpress 支持中心](http://www.devexpress.com/Support/Center/Question/Details/Q415984)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:17:57.870

**DevExpress 团队解决方案：**

此行为是由于您更改了控件事件的标题而不是 TcxSchedulerEvent 项本身这一事实引起的。我建议您改用以下代码：

```
if cxScheduler.SelectedEventCount > 0 then
    cxScheduler.SelectedEvents[0].Source.Caption := 'X'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T06:18:22.190

尝试使用 OnCustomDrawEvent，例如：

```
procedure TForm1.cxScheduler1CustomDrawEvent(Sender: TObject;
  ACanvas: TcxCanvas; AViewInfo: TcxSchedulerEventCellViewInfo;
  var ADone: Boolean);
begin
   AViewInfo.EventViewData.Caption := 'New Caption';
end; 
```

请 - DevExpress 拥有我见过的最好的支持中心之一 - 建议下次使用它。

# python - Django:datefield 显示恒定时间

> ID：11442275
> 
> 赞同：0
> 
> 时间：2012-07-11T22:10:50.203
> 
> 标签：python, django, date, models

这是我的模型：

```
class messages(models.Model):
    status_choices = (
        (u'read',u'read'),
        (u'unread',u'unread')
        )
    user = models.ForeignKey(User)
    message = models.TextField()
    status = models.CharField(max_length=6,choices=status_choices,default='unread')
    sender = models.ForeignKey(User,related_name="sender")
    date = models.DateField(default=datetime.date.today,editable=False) 
```

所以现在每条消息都将“日期”字段设置为“12:00 AM - 2012 年 7 月 11 日”。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:16:45.193

`datetime.date.today()`不返回时间值，因此默认为午夜。将最后一行更改为`date = models.DateTimeField(default=datetime.datetime.now, editable=False)`.

# c# - 我可以将 ReSharper TODO 变成编译器警告吗？

> ID：11442280
> 
> 赞同：4
> 
> 时间：2012-07-11T22:11:07.443
> 
> 标签：c#, resharper, compiler-warnings

安装 ReSharper 后，这样的评论

```
// TODO: fix this glaring defect 
```

突出显示并显示在待办事项资源管理器窗口中。有没有办法将这些变成编译器警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T22:12:27.917

为什么不两全其美：

```
#warning // TODO: fix this glaring defect. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:37:44.850

目前不可能，因为仅在复选框给出的上下文中搜索待办事项（因此在撰写本文时仅在注释、字符串和标识符中）。JetBrains bugtracker 支持您想要的，因为[RSRP-71440 #warnings 无法在 TODO 列表中捕获](http://youtrack.jetbrains.com/issue/RSRP-71440)- 请注意，在 2011 年 5 月，目标修复版本已从 5.1 推出到未指定的未来版本。

# java - 使用 Quartz 每 30 天的月度作业

> ID：11442283
> 
> 赞同：5
> 
> 时间：2012-07-11T22:11:19.650
> 
> 标签：java, triggers, quartz-scheduler, jobs

伙计们，

我有用户安排的每月工作（使用 Quartz）。用户提供开始日期或第一个运行的作业，它可以是 1-31 月的任何一天

我的问题是如何使用 cron 触发器来安排这个，请记住并非所有月份都有第 31、30、29 天。在这种情况下，作业应该在本月最接近的前一天运行。因此，假设 4 月只有 30 天，因此作业必须在 4 月 30 日运行。

可以使用单个 cron 触发器来完成吗？还是应该是触发器的组合？我尝试使用 CronExpression 来查看它如何处理此类情况：

```
CronExpression ce = new CronExpression("0 0 0 30 JAN-DEC ? *");
Date nextValidTime = ce.getNextValidTimeAfter(//**27th of February**//); 
```

我的 nextValidTime 等于**30th of March**，所以 cron 只是“跳过”了二月。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T22:20:37.500

> 'L' 字符允许用于日期和星期几字段。这个字符 > 是“last”的简写，但它在两个字段中的每一个都有不同的含义。例如，day-of-month 字段中的值“L”表示“月的最后一天”——非闰年 1 月的第 31 天，2 月的第 28 天。如果单独在星期几字段中使用，它仅表示“7”或“SAT”。但如果在星期几字段中使用另一个值，则表示“本月的最后 xxx 天”——例如“6L”表示“本月的最后一个星期五”。您还可以指定与该月最后一天的偏移量，例如“L-3”，表示日历月的倒数第三天。使用“L”选项时，
> 
> [http://quartz-scheduler.org/api/2.0.0/org/quartz/CronExpression.html](http://quartz-scheduler.org/api/2.0.0/org/quartz/CronExpression.html)

```
new CronExpression("0 0 0 L JAN-DEC ? *"); 
```

**编辑：**

那时我会做这样的事情

```
Calendar tCalendar = Calendar.getInstance();
tCalendar.set(2009, Calendar.FEBRUARY/*int*/, 1); // for example Feb, 2009 -- day doesn't matter here
if(userSelectedDay > tCalendar.getActualMaximum(Calendar.DAY_OF_MONTH) ){
    //Fix user day
    //fixedDay = tCalendar.getActualMaximum(Calendar.DAY_OF_MONTH)

    // Or, for that month 
    //new CronExpression("0 0 0 L JAN-DEC ? *");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-08T08:19:01.690

这是我的解决方案。这个想法是尝试构建一组将传递给触发器构建器的 cron 表达式。

*   如果输入日期 < 28。使用单个表达式：
*   如果输入 day = 29 或 = 30。使用 2 个表达式：2 月的最后一天，以及其他月份的特定日期。
*   如果输入天 = 31。使用该月的最后一天。

    ```
    public static Set<String> byDay(int day) {
        if (day < 1 || day > 31) {
            throw new IllegalArgumentException("The input day must be in range: 1 <= day <= 31");
        }
        if (day <= 28) {
            return Collections.singleton(String.format("0 0 0 %d JAN-DEC ? *", day));
        }
        if (day == 29 || day == 30) {
            Set<String> expressions = new HashSet<String>();
            expressions.add("0 0 0 L FEB ? *");
            expressions.add(String.format("0 0 0 %d JAN,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC ? *", day));
            return Collections.unmodifiableSet(expressions);
        }
        // day == 31
        return Collections.singleton("0 0 0 L * ? *");
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-12T12:04:44.230

如前所述，您必须为每个月的天数创建多个 CronExpressions，并为每个天数创建一个触发器，然后将所有触发器添加到所需的作业中。

这是我的版本：

CronExpressions 创建：

```
public static List<CronExpression> getCronExpressionList(int seconds, int minutes,
            int hours, int dayInMonth, Month month,
            DayOfWeek dayOfWeek) {
    final String monthsWith30Days = Month.APR + "," + Month.JUN + ","
                    + Month.SEP + "," + Month.NOV;
    List<CronExpression> crons = new LinkedList<CronExpression>();

    String timeString = String.format(("%s %s %s "), seconds, minutes,
                    hours, 0, 0, 0);
    String dateString = "%s %s %s";
    String cron = null;

    cron = timeString + String.format(dateString, dayInMonth, "*", "?");
    crons.add(new CronExpression(cron));
    if (dayInMonth > 28) {
        String febCron = timeString + getFebruarLastDayDateString(dateString);
        crons.add(new CronExpression(febCron));
        if (dayInMonth == 31) {
            String monthsWithThirtyDaysCron = timeString + String.format(dateString,
                    "L", monthsWith30Days, "?");
            crons.add(new CronExpression(monthsWithThirtyDaysCron));
        }
    }
    return crons;
}

private static String getFebruarLastDayDateString(String initialCron) 
               throws ParseException {
    return String.format(initialCron, "L", Month.FEB, "?");
} 
```

请注意，我在二月的 cron 中使用了“L”，否则在闰年会出现错误。

触发器创建：

```
 Set<CronTrigger> triggers = new HashSet<>();

        int i = 1;
        for (CronExpression cronEx : cronsList) {
            CronTrigger trigger = newTrigger()
                    .withIdentity("trigger" + i, groupName)
                    .withSchedule(cronSchedule(cronEx))
                    .build();
                triggers.add(trigger);
                i++;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T13:59:50.977

试试这个片段，它会根据日期创建 1 到 3 个触发器（涵盖一整年）：

```
 Set<Trigger> triggers = new HashSet<>(3);

        CronScheduleBuilder interval = CronScheduleBuilder.monthlyOnDayAndHourAndMinute(dayNumber, 0, 0);

        if (dayNumber > 28) {
            CronTrigger trigger28 = TriggerBuilder.newTrigger()
                    .withIdentity("payment_trigger28_" + merchantServiceTemplate.getId(), "payment_triggers")
                    .withSchedule(CronScheduleBuilder.cronSchedule("0 0 0 28 2 ? *"))
                    .endAt(merchantServiceTemplate.getEndScheduleDate())
                    .build();
            triggers.add(trigger28);

            if (dayNumber == 31) {
                CronTrigger trigger30 = TriggerBuilder.newTrigger()
                        .withIdentity("payment_trigger30_" + merchantServiceTemplate.getId(), "payment_triggers")
                        .withSchedule(CronScheduleBuilder.cronSchedule("0 0 0 30 4,6,9,11 ? *"))
                        .endAt(merchantServiceTemplate.getEndScheduleDate())
                        .build();
                triggers.add(trigger30);
            }
        }

        Trigger trigger = TriggerBuilder.newTrigger()
                .withIdentity("payment_triggerAll_" + merchantServiceTemplate.getId(), "payment_triggers")
                .withSchedule(interval)
                .endAt(merchantServiceTemplate.getEndScheduleDate())
                .build();
        triggers.add(trigger);

        scheduler.scheduleJob(job, triggers, false); 
```

# android - 使用 ViewFlipper 和 onclick 切换视图

> ID：11442287
> 
> 赞同：0
> 
> 时间：2012-07-11T22:12:03.650
> 
> 标签：android, viewflipper, buttonclick

我将 ViewFLipper 与 Random.nextInt() 一起使用。更改布局 onClick (Button)。现在我有 3 个 xml 布局。1_view.xml 2_view.xml 3_view.xml。从 1_view.xml 我那里有一个按钮。单击按钮时，我应该得到一个随机布局。有用。但问题是现在，有时我得到相同的布局（1_view.xml）。当用户单击 (1_view.xml) 上的按钮时，我希望他们转到我留下的布局（2_view.xml 和 3_view.xml）。

代码

```
Main.xml

 <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="10dip" >

        <TextView
            android:id="@+id/TVLeft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_gravity="left|top"
            android:text="0"
            android:textColor="#4CB848"
            android:textSize="40sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/TVRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/TVLeft"
            android:gravity="right"
            android:text="0"
            android:textColor="#FF0000"
            android:textSize="40sp"
            android:textStyle="bold" />
    </RelativeLayout>

    <ViewFlipper
        android:id="@+id/viewFlipper1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <include
            android:id="@+id/1_View"
            layout="@layout/1_view" />

        <include
            android:id="@+id/2_View"
            layout="@layout/2_view" />

        <include
            android:id="@+id/3_View"
            layout="@layout/3_view" />
    </ViewFlipper>
</LinearLayout>

Main.java
        // FlipperView
        MyViewFlipper = (ViewFlipper) findViewById(R.id.viewFlipper1);

        TVRight = (TextView) findViewById(R.id.TVRight);
        TVLeft = (TextView) findViewById(R.id.TVLeft);

        // 1_view.xml
        Q1_btn1 = (Button) findViewById(R.id.btn_1);
        Q1_btn2 = (Button) findViewById(R.id.btn_2);
        Q1_btn3 = (Button) findViewById(R.id.btn_3);
        Q1_btn4 = (Button) findViewById(R.id.btn_4);

        Q1_btn1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Wrongnum++;
                WrongResult.setText(Integer.toString(Wrongnum));

            }

        });

        Q1_btn2.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Rightnum++;
                RightResult.setText(Integer.toString(Rightnum));

                Random RandomView = new Random();
                MyViewFlipper.setDisplayedChild(RandomView.nextInt(3));

            }
        });
        Q1_btn3.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Wrongnum++;
                WrongResult.setText(Integer.toString(Wrongnum));

            }
        });
        Q1_btn4.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Wrongnum++;
                WrongResult.setText(Integer.toString(Wrongnum));

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:39:36.157

您可以在代码中执行此操作：

```
 Random RandomView = new Random();
 int nextViewIndex = RandomView.nextInt(3);
 while (nextViewIndex == MyViewFlipper.getDisplayedChild()) {
     nextViewIndex = RandomView.nextInt(3);
 }
 MyViewFlipper.setDisplayedChild(nextViewIndex); 
```

基本上只需调用 Random.nextInt() 直到它与当前 viewFlipper 的索引不匹配。

仅随机显示一次 viewFlipper：

```
// Intialize this once
List<Integer> vfIndices = new ArrayList<Integer>();
for (int i = 0; i < MyViewFlipper.getChildCount(); i++) {
   vfIndices.add(i);
}

// when button is clicked
if (vfIndices.size() == 0) {
   return; // no more view flipper to show!
}
int viewIndex = RandomView.nextInt(vfIndices.size());
MyViewFlipper.setDisplayedChild(vfIndices.get(viewIndex));
vfIndicies.remove(viewIndex); 
```

这个想法是使用 ArrayList 来跟踪尚未显示的 viewFlipper 索引。单击按钮时，从该数组中随机选择一个索引并将 viewFlipper 设置为。然后从 ArrayList 中删除该索引。下次单击该按钮时，它将显示剩余的脚蹼之一。

# jquery-ui - 调整 jQuery 选项卡面板的大小

> ID：11442292
> 
> 赞同：0
> 
> 时间：2012-07-11T22:12:28.680
> 
> 标签：jquery-ui

![标签]![http://i.stack.imgur.com/EuAxZ.png](../Images/80ea5152f830354a1ebab3dd7ccbcc2e.png))

我正在使用 jQuery 选项卡，我喜欢选项卡向左对齐的方式，顶部橙色部分占分配宽度的 100%。但是当我点击选项卡时，下拉面板只有一半页面的信息。

如何调整面板大小以使所有面板仅占页面的一半？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:10:43.503

您可以简单地将类样式添加到每个可显示的选项卡内容并限制其高度。

```
<div id="tabs">
    <ul>
        <li><a href="#fragment-1"><span>One</span></a></li>
        <li><a href="#fragment-2"><span>Two</span></a></li>
        <li><a href="#fragment-3"><span>Three</span></a></li>
    </ul>
    <div id="fragment-1" class="tabview">
        Tab1 content
    </div>
    <div id="fragment-2" class="tabview">
        Tab2 content
    </div>
    <div id="fragment-3" class="tabview">
        Tab3 content
    </div>
</div> 
```

以及必要时还显示滚动条的 CSS 样式：

```
.tabview {
    height: 50px;
    overflow: auto;
} 
```

这是工作的 JSFiddle：http: [//jsfiddle.net/Fhhu5/](http://jsfiddle.net/Fhhu5/)

# c++ - 何时使用“::”以及何时使用“.”

> ID：11442293
> 
> 赞同：13
> 
> 时间：2012-07-11T22:12:35.243
> 
> 标签：c++

为我认为非常基本的问题道歉。

我无法在线找出运算符 :: 和 . 在 C++ 中

我有几年的 C# 和 Java 经验，熟悉使用 . 成员访问的运算符。

谁能解释一下何时使用这些以及有什么区别？

谢谢你的时间

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-11T22:14:55.437

区别在于第一个是范围解析运算符，第二个是成员访问语法。

因此，`::`（范围解析）可用于访问命名空间中的其他内容，如嵌套类，或访问静态函数。句点运算符将简单地访问您正在使用它的类实例的`.`任何可见成员。

一些例子：

```
class A {
    public:

        class B { };

        static void foo() {}
        void bar() {}
};

//Create instance of nested class B.
A::B myB; 

//Call normal function on instance of A.
A a;
a.bar();

//Call the static function on the class (rather than on an instance of the class). 
A::foo(); 
```

请注意，静态函数或数据成员是属于类本身的，无论您是否创建了该类的任何实例。因此，如果我的类中有一个静态变量，并创建了该类的一千个实例，那么该静态变量仍然只有一个实例。但是，将有 1000 个非静态成员的实例，每个类实例一个。

当您遇到它时，还有一个更有趣的选择:) 您还将看到：

```
//Create a pointer to a dynamically allocated A.
A* a = new A();

//Invoke/call bar through the pointer.
a->bar();

//Free the memory!!! 
delete a; 
```

如果你还没有学过动态内存，可能会有点混乱，所以我不会详细介绍。只是想让您知道您可以使用 {或`::`}访问成员:)`.``->`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T22:15:09.757

在 C++`::`中是范围解析运算符。它用于区分命名空间和静态方法，基本上任何情况下您都没有对象。Where`.`用于访问对象内部的东西。

C#`.`对它们都使用运算符。

```
namespace Foo
{
    public class Bar
    {          
        public void Method()
        {
        }

        public static void Instance()
        {
        }

    }
} 
```

在 C# 中，您将编写如下代码：

```
var blah = new Foo.Bar();
blah.Method(); 
```

但等效的 C++ 代码看起来更像这样：

```
Foo::Bar blah;
blah.Method(); 
```

但请注意，静态方法也可以使用范围解析运算符访问，因为您没有引用对象。

```
Foo::Bar::Instance(); 
```

再说一次，C# 代码只会使用点运算符

```
Foo.Bar.Instance(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T22:14:39.580

`::`用于命名空间和静态成员访问。C# 使用点运算符代替命名空间。

`.`用于非静态成员访问。

不是一个详尽的描述，但根据 C# 和 Java，相关位可能会让您感到困惑。

有关详细信息，请参阅

[IBM - 范围解析运算符](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=%2Fcom.ibm.vacpp7a.doc%2Flanguage%2Fref%2Fclrc05cplr175.htm)

[IBM - 点运算符](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=%2Fcom.ibm.vacpp7a.doc%2Flanguage%2Fref%2Fclrc05cplr184.htm)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T22:15:06.103

`::`是范围解析运算符，因此当您解析范围（例如命名空间或类）时，您可以使用它。对于会员访问，您有`.`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T22:29:49.007

`::`如果您不了解命名空间或类，则范围运算符可能难以理解。命名空间就像代码中各种事物名称的容器。它们通常用于消除库中常见的名称的歧义。说两个名称空间`std`并`example`具有功能`foobar()`。所以编译器知道你想使用哪个函数，你把它添加为`std::foobar()`or 或`example::foobar()`.

`::`当告诉编译器您要定义在类或结构中声明的函数时，也可以使用该运算符。例如：

```
class foobar()
{
  public:
  void hello();
  int number; //assume there is a constructor that sets this to 5
}

void foobar::hello()
{
  cout << "Hello, world!" << endl;
} 
```

当`.`您希望使用类或结构的成员时，使用运算符。例如：

```
foobar foo;
foo.hello();
cout << foo.number << endl; 
```

假设类是通过编写构造函数来完成的，那么 this 的输出应该是：

```
Hello, world!
5 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T22:17:39.633

`.`在程序中创建类后访问类的成员时，您在 java 中使用相同的运算符。用于`::`多种情况：

当你在某个类的 .h/.cpp 中定义一个方法时，写

```
class::methodName() 
```

要么是原型，要么是实现它。

此外，如果您没有明确说明使用的命名空间，则必须使用它

```
std::cout << "This is the output"; 
```

而不仅仅是使用`cout << "This is the output;`

也许还有更多，但我现在不记得了，我的 C++ 有点生锈了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T22:29:16.107

在 C++ 中，`::`用于标识*范围*。这可能意味着*命名空间范围* **或** *类范围*。

例如。

```
int x;

namespace N {
    int x;

    struct foo {
        static double x;
        double y;    
    };
    struct bar: public foo {
        double y;
    };
}

int main()
{
    int x; // we have a local, hiding the global name
    x = ::x; // explicitly identify the x in global scope
    x += N::x; // explicitly identify the x in namespace N

    N::foo::x = x; // set the static member of foo to our local integer
    N::foo f;
    f.y = f.x; // the static member is implicitly scoped by the object
    f.y += N::foo::x; // or explicitly scoped

    N::bar b;
    assert(b.x == N::foo::x); // this static member is inherited
    b.y = b.x; // we get N::bar::y by default
    b.N::foo::y = b.y; // explicitly request the hidden inherited one
}

// we need to define the storage for that static somewhere too ...
int N::foo::x (0.0); 
```

# com - PowerPoint 挂在 Application.Quit 呼叫上

> ID：11442296
> 
> 赞同：1
> 
> 时间：2012-07-11T22:12:41.280
> 
> 标签：com, powerpoint

这是我正在运行的代码：

```
MsoTriState readOnly = MsoTriState.msoTrue;
MsoTriState untitled = MsoTriState.msoFalse;
MsoTriState withWindow = MsoTriState.msoFalse;
string filePath; //some file path to a pptx

ppt.Application app = null;
ppt.Presentations presentations = null;
ppt.Presentation presentation = null;

app = new ppt.Application();
presentations = app.Presentations;
presentation = presentations.Open(filePath, readOnly, untitled, withWindow);

System.Runtime.InteropServices.Marshal.ReleaseComObject(presentation);
presentation = null;
System.Runtime.InteropServices.Marshal.ReleaseComObject(presentations);
presentations = null;

app.Quit(); //HANGING HERE

System.Runtime.InteropServices.Marshal.ReleaseComObject(app);
app = null; 
```

这是一个非常基本的代码，可以打开一个 PowerPoint 应用程序，然后将其关闭。但是，由于某种原因，它正在挂起`app.Quit()`电话。另外，我不知道为什么，但是如果我注释掉 ComRelease 演示文稿的行，它就不会挂起。另一种技巧是在调用 app.Quit 之前使 app.Visible = msoTrue。

有谁知道这里发生了什么？我搞砸了我的 ComRelease 程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T06:54:48.680

我在这里给你一个锻炼。你可以找到正在运行的进程并通过代码将其杀死。

**代码：**

```
 Process[] pros = Process.GetProcesses();
  for (int i = 0; i < pros.Count(); i++)
     {
       if (pros[i].ProcessName.ToLower().Contains("powerpnt"))
            {
              pros[i].Kill();
            }
     } 
```

# listview - Telerik RadListview 中的复选框

> ID：11442298
> 
> 赞同：0
> 
> 时间：2012-07-11T22:12:41.873
> 
> 标签：listview, telerik, radlistview

我对此很陌生，所以请耐心等待

我正在使用 Telrik 的 RadListView 并尝试在 InsertItemTemplate 中使用复选框，但我似乎无法检索选中的值。我注意到的第一件事是，当我尝试将其写入时，intellesense 将无法识别我的 asp:checkbox id，因此我使用 FindControl 但是我在 Telerik 演示 () 中看到他们按名称访问复选框。无论如何，这就是我正在做的事情。如您所见，我想评估该复选框并根据在触发 Insert 时是否选中它来执行某些操作。

谢谢您的帮助

名单

```
<telerik:RadListView ID="IslandManagerList" runat="server" ItemPlaceholderID="IslandListContainer"
       DataSourceID="dbIslandEditManager" AllowPaging="True" InsertItemPosition="FirstItem" OnNeedDataSource="IslandManagerList_NeedDataSource" DataKeyNames="ItemId">
       <LayoutTemplate>
       <section style="display: table; margin: 0px auto; width: auto;">
        <telerik:RadDataPager ID="IslandManagerListPager" Skin="pj-Pager" EnableEmbeddedSkins="false"
            runat="server" PagedControlID="IslandManagerList" PageSize="15">
            <Fields>
                <telerik:RadDataPagerButtonField FieldType="Prev" />
                <telerik:RadDataPagerButtonField FieldType="Numeric" />
                <telerik:RadDataPagerButtonField FieldType="Next" />
            </Fields>
        </telerik:RadDataPager>
        </section>
        <asp:Button ID="btnInitInsert" class="ui-like-button" runat="server" Text="Add an Island" OnClick="btnInitInsert_Click" />
           <section>
               <asp:PlaceHolder ID="IslandListContainer" runat="server"></asp:PlaceHolder>
           </section>
       </LayoutTemplate>
       <ItemTemplate>
           <section class="listview-item">
               <section style="float: left; margin: 10px;">
                   <div style='width: 150px; height: 93px; background-color: #f7f7f7;'>
                   <p class="notice" style='position: absolute; z-index: 0; width: 120px; top: 35px;
                       left: 18px;'>
                       no image
                   </p>
                   <a href="/myislands/viewer?albumid=<%#Eval("ItemId")%>"><%#Eval("AlbumLogoSource")%></a></div>
               </section>
               <section style="float: left; width: 80%;">
                   <h3 style="margin: 10px 10px 5px 10px">
                       <a href="/myislands/viewer?albumid=<%#Eval("ItemId")%>"><%#Eval("Title")%></a>&nbsp;&nbsp;&nbsp;</h3>
                   <p style="font: 14px/20px tahoma; margin: 0px 10px 0px 10px;">
                       <%#Eval("Description")%></p>
               </section>
               <section class="photomanager-command-btns">
                   <asp:Button ID="editIsland" class="ui-like-button" runat="server" CommandName="Edit" Text="Edit" CausesValidation="false" />
                    <div class="ui-like-button" style="display:inline-block"><a id="uploadLink" href="/islands/tabid/917/ctl/upload/mid/1762/Default.aspx?aid=<%#Eval("ItemId")%>">Upload</a></div>
                    <div class="ui-like-button" style="display:inline-block"><a id="shareLink" href="/islanders?island=<%#Eval("ItemId")%>">Connect Friends</a></div> 
               </section>
           </section>
       </ItemTemplate>
       <EditItemTemplate>
       <section class="listview-item">
               <section style="float: left; margin: 10px;">
                   <div style='width: 150px; height: 93px; background-color: #f7f7f7;'>
                   <p class="notice" style='position: absolute; z-index: 0; width: 120px; top: 35px;
                       left: 18px;'>
                       no image
                   </p>
                   <a href="/myislands/viewer?albumid=<%#Eval("ItemId")%>"><%#Eval("AlbumLogoSource")%></a></div>
               </section>
               <section style="position: relative; float: left; font: 14px/20px tahoma;margin: 10px 10px 10px 10px;">
            <div style="overflow:hidden">
                <div style="width: 75px; float: left; margin: 10px 10px 5px 10px">
                    title:</div>
                <div style="float: left">
                    <asp:TextBox class="photomanager-edit-field" ID="updateTitle" runat="server" Text='<%# Bind("Title")%>'></asp:TextBox></div>
            </div>
            <div style="overflow:hidden">
                <div style="width: 75px; float: left; margin: 0px 10px 10px 10px;">
                    about:
                </div>
                <div style="float: left">
                    <asp:TextBox class="photomanager-edit-field" ID="updateDescription" TextMode="MultiLine"
                        Columns="5" Rows="4" runat="server" Text='<%#Bind("Description")%>'></asp:TextBox></div>
            </div>
        </section>
        <div style="position: absolute; bottom: 10px; right: 20px;">
            <asp:Button Style="float: left" class="ui-like-button" ID="saveIslandUpdate" runat="server"
                CommandName="Update" Text="Save" />
            <asp:Button Style="float: left" class="ui-like-button" ID="cancelIslandUpdate" runat="server"
                CommandName="Cancel" Text="Cancel" CausesValidation="false" />
        </div>
       </section>
       </EditItemTemplate>
       <InsertItemTemplate>
           <section class="listview-item">
               <section style="position: relative; float: left; font: 14px/20px tahoma; margin: 10px 10px 10px 10px;">
                   <div style="overflow: hidden">
                       <div style="width: 125px; float: left; margin: 10px 10px 5px 10px">
                           <h3>
                               Island Name:</h3>
                       </div>
                       <div style="float: left">
                           <asp:TextBox class="photomanager-edit-field" ID="tbTitle" runat="server" Text='<%# Bind("Title")%>'></asp:TextBox></div>
                       <asp:RequiredFieldValidator ID="rvTitle" runat="server" ControlToValidate="tbTitle"
                           ErrorMessage="Please give your Island a name" Display="Dynamic" />
                   </div>
                   <div style="overflow: hidden">
                       <div style="width: 125px; float: left; margin: 0px 10px 10px 10px;">
                           <h3>
                               About:</h3>
                       </div>
                       <div style="float: left">
                           <asp:TextBox class="photomanager-edit-field" ID="tbDescription" TextMode="MultiLine"
                               Columns="5" Rows="4" runat="server" Text='<%#Bind("Description")%>'></asp:TextBox>
                           <asp:RequiredFieldValidator ID="rvDescription" runat="server" ControlToValidate="tbDescription"
                               ErrorMessage="Please enter a little something about your Island" Display="Dynamic" />
                       </div>
                   </div>
               </section>
               <section style="position: relative; float: left; font: 14px/20px tahoma; margin: 10px 10px 10px 10px;">
                   <asp:CheckBox ID="makeIslandPublic" runat="server" CssClass="ui-like-button tooltip-item"
                       Checked="false" Text="Make this Island Viewable to the Public" /><div style="display: inline-block;
                           cursor: pointer;" class="tooltip-item">
                           <img src="images/icon_help_32px.gif" /></div>
                   <div class="show-tooltip" style="width: 250px;">
                       A public Island can be viewed by anyone. Use a public island when you want to show
                       of your works to the community and gain reputation to compete in fun contests</div>
               </section>
               <div style="position: absolute; bottom: 10px; right: 20px;">
                   <asp:Button ID="btnPerformInsert" class="ui-like-button" runat="server" Text="Add"
                       CommandName="PerformInsert" />
                   <asp:Button ID="BtnCancel" class="ui-like-button" runat="server" Text="Cancel" CommandName="Cancel"
                       CausesValidation="false" />
               </div>
           </section>
       </InsertItemTemplate>
   </telerik:RadListView>

protected void Page_Load(object sender, System.EventArgs e)
    {
        IslandManagerGrid.Visible = buttonToggleGridView.Checked;
        IslandManagerList.Visible = buttonToggleListView.Checked;

    }

    protected void IslandManagerGridDataSource_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
    {
        e.Command.Parameters["@AlbumOwner"].Value = base.UserId;
    }
    protected void btnInitInsert_Click(object sender, System.EventArgs e)
    {
        IslandManagerList.ShowInsertItem();
        IslandManagerList.FindControl("btnInitInsert").Visible = false;

    }

    protected void IslandManagerGridDataSource_Inserting(object sender, SqlDataSourceCommandEventArgs e)
    {

        CheckBox PublicChecked = (CheckBox)IslandManagerList.FindControl("makeIslandPublic");
        var isPublicChecked = PublicChecked.Checked;
        if (isPublicChecked == true)
        {
            e.Command.Parameters["@ViewRoles"].Value = "All Users";
        }
        else
        {
            e.Command.Parameters["@ViewRoles"].Value = "Administrators";
        }
        e.Command.Parameters["@CreatedByUser"].Value = base.UserId;
        e.Command.Parameters["@Owner"].Value = base.UserId;
    }

    #endregion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:22:16.070

我认为您应该在每个Item而不是ListView中找到控件，可能是

```
CheckBox PublicChecked = (CheckBox)currentItemFromList.FindControl("makeIslandPublic"); 
```

# linux - LibreOffice 数学下标？漏洞

> ID：11442307
> 
> 赞同：0
> 
> 时间：2012-07-11T22:13:47.757
> 
> 标签：linux, libreoffice

在 linux 上使用 libreoffice 时，您无法键入

```
V sub in 
```

在数学编辑器中并实际进入。到位是一个问号，就好像我输入了

```
V sub ? 
```

怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:19:15.127

通过在 sub 之后键入“in”来解决。"" 删除调用函数

# php - 登录不会跨页面持续存在

> ID：11442311
> 
> 赞同：1
> 
> 时间：2012-07-11T22:13:55.617
> 
> 标签：php, login

您好，我已经为我的网站 dubleeble.com 制作了一个登录系统，由于某种原因，当您登录时，它只会让您在一个页面上登录，但当您移动到另一个页面时，它会让您退出！我该如何解决？

这是我使用的代码：

```
<?php
session_start();
$username = $_POST['user'];
$password = $_POST['pass'];

if($username&&$password) {
    $connect = mysql_connect("host", "user","pass") or die("Could't Connect!");
    mysql_select_db("db");

    $query = mysql_query("SELECT * FROM users WHERE username='$username'");

    $numrows = mysql_num_rows($query);

    if($numrows!=0) 
    {
        while ($row = mysql_fetch_assoc($query)) {
            $dbusername = $row['username'];
            $dbpassword = $row['password'];
        }

        if($username==$dbusername&&$password==$dbpassword) {

            $_SESSION['username']=$username;            
            header('Location: ' . $_SERVER['HTTP_REFERER']);
        }
        else
        header('Location:http://dubleeble.com/php/login/incorrect.php');
    }

    else
    header('Location:http://dubleeble.com/php/login/incorrect.php');

}

else
header('Location: ' . $_SERVER['HTTP_REFERER']);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:20:57.117

笔记：

*   'loged' 拼写为记录...
*   您应该使用某种类型的密码加密，而不仅仅是存储您应该使用的文本值
*   像我一样使用 mysql_real_escape_string 来确保 sql 注入是不可能的
*   **确保在使用会话变量的每个页面上都调用 session_start()**

    ```
    $username = $_POST['user'];
    $password = $_POST['pass'];

    if(isset($username) && isset($password)) {
        $connect = mysql_connect("host", "user","pass") or die("Could't Connect!");
        mysql_select_db("db");

        $row= mysql_fetch_assoc("SELECT * FROM users WHERE username='".mysql_real_escape_string($username)."'");
        $numrows = mysql_num_rows($row);

        if($numrows > 0) {
            if($username == $row['username'] && $password == $row['password']) {

                session_start();
                $_SESSION['username'] = $username;            
                header('Location: ' . $_SERVER['HTTP_REFERER']);
            }
            else
            header('Location:http://dubleeble.com/php/login/incorrect.php');
        }
        else
        header('Location:http://dubleeble.com/php/login/incorrect.php');
    }
    else
    header('Location: ' . $_SERVER['HTTP_REFERER']); 
    ```

# php - 将具有 unix 时间戳值的 PHP 字符串转换为 MySQL 时间戳值

> ID：11442312
> 
> 赞同：3
> 
> 时间：2012-07-11T22:13:57.817
> 
> 标签：php, mysql, database

我正在从 PHP 文件中设置数据库值。在 php 文件中，我有一个存储 unix 时间戳值的字符串变量。

我拥有的 MySql 表有一个架构，我必须将这些时间戳值存储在时间戳数据类型的登录字段中。

我试着发送

```
date('Y-m-d G:i:s', strtotime($userLogin)); 
```

到我的数据库，但它存储的只是`0000-00-00 00:00:00`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:18:00.903

MySQL 为此具有[FROM_UNIXTIME()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T22:18:47.850

MySQL 提供`FROM_UNIXTIME( )`和`UNIX_TIMESTAMP( )`函数将 Unix 时间戳转换为 MySQL 日期格式，反之亦然。

例子：

```
$sql = "INSERT INTO yourtable(date, ..., ...) VALUES (FROM_UNIXTIME($yourdate), ..., ...)"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T22:18:05.373

strtotime () 用于将各种日期格式的字符串转换为 UNIX 时间戳。如果字符串已经是时间戳，那么对于 strtotime () 来说，它看起来不像是有意义的格式化日期/时间，它会失败。

如果字符串已经是时间戳，那么除了将其转换为整数之外，您无需对其执行任何操作（严格来说，即使该步骤也不是必需的，但转换会去除任何非数字字符，所以它施法通常不会受伤）

此外，MySQL 能够解析 UNIX 时间戳（使用 FROM_UNIXTIME()，我想，我必须查一下才能确定）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T22:23:41.353

如果`$userLogin`持有`timestamp`价值超过你不需要使用`strtotime()`，

例如，这个应该可以工作-->

```
$userLogin = time();
date('Y-m-d G:i:s', $userLogin); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T23:49:46.427

我不得不添加

```
 $login = date('Y-m-d H:i:s',(int)($userLogin/1000)); 
```

它奏效了……

# java - Android从另一个活动中检索信息，创建新布局

> ID：11442314
> 
> 赞同：0
> 
> 时间：2012-07-11T22:14:02.267
> 
> 标签：java, android, xml

我正在学习如何在Android下开发。我做了一个新项目，主要活动，我想设计一个新窗口。我已经生成了新的 Activty，因为它在此处描述了 [将 Activity 添加到 Eclipse 中的 Android 项目的最佳方法？](https://stackoverflow.com/questions/2337874/best-way-to-add-activity-to-an-android-project-in-eclipse)

1.  但我无法获得该新活动的可视化编辑器。我知道我想创建新的布局，但如何做到这一点并将其与第二个 Activity 连接起来？

2.  如何正确地从 secondActivity（关闭它？最小化它？如何？）返回到 mainActivity，并且不要丢失收集到的信息，为什么我们使用 secondActivity（例如用户做了什么选项？

这就是我调用第二个 Acitivity 的方式，它工作正常。

```
Intent intent = new Intent(this,DrugieOkno.class);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:32:27.790

1.  要添加新活动，请按照[此](https://stackoverflow.com/questions/2337874/best-way-to-add-activity-to-an-android-project-in-eclipse)问题中回答的方法进行操作。这样，您将创建一个新活动，而无需手动将其添加到清单中。[每个活动都需要在`AndroidManifest.xml`] 中列出。

假设您创建了一个新的活动名称`Activity2.java`。要将新布局添加到新活动，请将新的 xml 文件添加到`res/layout`文件夹，例如`activity2.xml`[在哪里定义新活动的布局]

要将新布局链接到新活动，请将此行包含在新创建的`Activity2.java`

```
setContentView(R.layout.activity2); 
```

所以它看起来像这样：

```
 public class Activity2 extends Activity{

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity2);         
    }       
  } 
```

2\. 现在如果你想从你的 to 发送一些数据`Activity1.java`，`Activity2.java`你需要使用`Bundles`.

因此，如果您想发送一个`String`from `Activity1`，请在 中执行以下操作`Activity1.java`：

```
Intent nextActivity = new Intent(this, Activity2.class);
Bundle passData = new Bundle(); //to hold your data
passDataBndl.putString("fname", fname); //put in some String. the first parameter to it is the id, and the second parameter is the value
nextActivity.putExtras(passDataBndl); //Add bundle to the Intent
startActivityForResult(nextActivity, 0); //Start Intent 
```

要接收数据，请`Activity2.java`执行以下操作（例如，`onCreate()`）

```
 Bundle params = this.getIntent().getExtras(); //gets the data from the Intent
 String firstName = params.getString("fname"); //gets value of fname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:32:53.517

对于问题 1： [这](http://www.androidcompetencycenter.com/2009/03/tutorial-how-to-start-a-new-activity/)是一个关于如何创建新`Activity`. 如需更全面的内容，其中包含有关 Android 开发的更多信息，您可以[在此处查看](http://www.vogella.com/articles/Android/article.html)。

对于问题 2：For transfering data between `Activities` [here](http://www.vogella.com/articles/AndroidIntent/article.html) is a nice tutorial。

希望有帮助。

# r - 来自因子变量的Strptime格式错误

> ID：11442316
> 
> 赞同：0
> 
> 时间：2012-07-11T22:14:20.437
> 
> 标签：r, datetime

我正在尝试使用 strptime() 从因子变量中解析日期——但有一个问题。我的日期（错误地）将日期和月份列为单数而不是双数。例如，我的日期会说：5/5/2012 14:02 而不是 05/05/2012 14:02。

因此，当我运行代码时会返回 NA 值：

```
strptime(var,"%m/%d/%y %H:%M") 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:41:11.867

资本`Y`会这样做：

```
test <- "5/5/2012 14:02"
strptime(test,"%m/%d/%Y %H:%M")
[1] "2012-05-05 14:02:00" 
```

# java - Inno Setup 编译目录

> ID：11442317
> 
> 赞同：0
> 
> 时间：2012-07-11T22:14:38.830
> 
> 标签：java, ant, inno-setup

这是我第一次使用 Inno Setup。我在 ANT 脚本中包含 Inno Setup：

```
<target name="generate-installer-exe" depends="generate-exe">
  <exec executable="C:/Program Files (x86)/Inno Setup 5/ISCC.exe">
    <arg value="${etc.dir}/innoSetup_config.iss"/>
    <arg value="/dMySourcePath=${deployment.dir}"/>
  </exec>
</target> 
```

它在其中创建输出和 setup.exe，`${etc.dir}`因为那是我的 .iss 文件所在的位置，但我希望它编译为`${deployment.dir}`. 无论如何通过传递参数来动态更改编译目录还是我需要通过 ANT 移动文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:21:16.970

根据文档， /O 参数可以满足您的需求。

> “/O” 指定输出路径（覆盖脚本中的任何 OutputDir 设置），“/F” 指定输出文件名（覆盖脚本中的任何 OutputBaseFilename 设置）

因此，如果您只想将 /O 传递给输出目录，您可能需要类似以下内容：

```
<target name="generate-installer-exe" depends="generate-exe">
  <exec executable="C:/Program Files (x86)/Inno Setup 5/ISCC.exe">
    <arg value="${etc.dir}/innoSetup_config.iss"/>
    <arg value="/dMySourcePath=${deployment.dir}"/>
    <arg value="/O${deployment.dir}"/>
  </exec>
</target> 
```

# android - Android：如何使用 TouchListener 对跨按钮的移动做出反应

> ID：11442321
> 
> 赞同：0
> 
> 时间：2012-07-11T22:14:53.267
> 
> 标签：android, button, actionlistener, ontouchlistener, event-listener

我是 Android 开发的新手，我想知道是否有一种方法可以将 TouchListener（或任何事件侦听器）添加到按钮，以便它对跨区域的移动做出反应。例如，如果我在屏幕中间有一个按钮，并且我从顶部开始滑动，它应该会在我的手指到达按钮区域时做出反应。

这是我认为可以做到的代码

```
 private OnTouchListener tLis = new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {

        // Perform Action
        Button b = (Button) findViewById(R.id.button1);
        b.setText("Touched");
        return false;
    }

    }; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:23:57.110

很不幸的是，不行。触摸事件由它们的父视图传递给子视图，并且只有当初始触摸事件（即 ACTION_DOWN）被发现在该视图的范围内时。如果视图没有看到 ACTION_DOWN，它将不会看到该手势的任何后续触摸事件。

这并不是说不可能，但它需要的工作不仅仅是在按钮上设置一个监听器。您需要创建一个自定义`ViewGroup`来填充屏幕区域，并可以监视它接收到的所有触摸事件，当它们在其边界内时将它们传递给按钮，而不管初始向下事件是否在那里发生。

自定义父视图的替代选项是覆盖`dispatchTouchEvent()`您的方法`Activity`并在那里监视触摸事件。虽然原理相同，但当您检测到手指在其边界内时，您需要手动将触摸事件转发给按钮。

转发事件将通过`dispatchTouchEvent()`直接使用`MotionEvent`您要传递的按钮调用按钮的方法来完成，可能会在转发之前稍微按摩一下以获得不同的 x/y 位置。

与往常一样，在 Android 中处理自定义触摸代码时，尽量不要覆盖您正在使用的方法的返回值，除非您确定必须这样做。这些值控制着应用程序中整个触摸事件的响应者链。

# javascript - 使用 javascript 更改类

> ID：11442328
> 
> 赞同：0
> 
> 时间：2012-07-11T22:15:20.950
> 
> 标签：javascript, html, css

我有一个使用身体背景图片的网站。调整浏览器大小时，我想更改正文类。

**JavaScript：**

```
function MOSTRA() {
   var SCR = screen.availWidth
   var BRW = window.outerWidth

   if BRW < SCR {
      document.getElementById(BODY).className = 'BDYL'
   }
   else { 
      document.getElementById(BODY).className = 'BDNL' 
   }
} 
```

**HTML：**

```
<body id="BODY" class="BDNL" onResize="MOSTRA()"> 
```

我以为课程会改变（改为背景大小：自动），但事实并非如此。如何更改背景大小或整个班级？我只能使用 Javascript、HTML 或 CSS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:23:41.650

您需要在语句中的条件周围加上括号，`if`在字符串周围加上撇号（或引号）`BODY`。

此外，您应该用分号分隔行。如果语句可以在该行结束，脚本解析器会自动将它们添加到行尾，但如果您忘记了结束括号，则可能会收到意外的错误消息，因此解析器无法自动添加分号。

您可能还想从`onload`body 的事件中调用该函数，以便在页面加载时设置类。

```
function MOSTRA() {

  var SCR = screen.availWidth;

  var BRW = window.outerWidth;

  if (BRW < SCRI) {
    document.getElementById('BODY').className = 'BDYL';
  } else {
    document.getElementById('BODY').className = 'BDNL';
  }
} 
```

演示：http: [//jsfiddle.net/Guffa/q56WM/](http://jsfiddle.net/Guffa/q56WM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:49:21.813

不完全确定您实际上要实现的目标（指向您正在处理的页面的链接会有所帮助），但我想到了以下内容：

*   您可能希望使用流畅的布局技术（在 CSS 中使用容器尺寸的百分比值）来确保您的 DIV 元素相对于查看器的屏幕分辨率呈现（阅读：它的父尺寸 - 父 DIV 元素或正文元素，这将是 100% 的宽度，代表您页面的可用宽度。

    `div {width:60%}`

*   再想想你实现背景图像的方式，如果你需要页面上的元素与背景图像对齐，你不应该设置背景图像，`background-size:contain`因为这会在尝试调整窗口大小时引入很多麻烦。相反，将您的背景分割成多个部分，并将生成的较小图像分配给需要与其对齐的页面的不同部分。

*   设计不同分辨率时相关：[媒体查询](http://www.adobe.com/devnet/dreamweaver/articles/introducing-media-queries.html)和响应式布局。

*   您可能需要检查[jQuery resize()](http://api.jquery.com/resize/)。jQuery 将负责调整大小事件的不同浏览器实现。

    ```
    $(window).resize(function() {
        $('body').prepend('<div>' + $(window).width() + '</div>');
    }); 
    ```

    此外，这将使您有可能通过使用[jQuery 事件系统](http://api.jquery.com/resize/)来更优雅地实现 JavaScript 。当然，这仅在页面上计划了任何进一步的 JavaScript 工作时才相关。我实际上只是为了完成而引用它。

*   您发布的代码无效。

    *   您错过了行尾分号（尽管代码可能正在工作，因为解释器通常会很好地猜测它）。
    *   无需在 body 元素上使用 ID，只需通过`document.getElementsByTagName()`.
    *   您需要将标签名称 (BODY) 放在引号中。
    *   将 if else 语句的条件放入括号中。

    您的代码应如下所示：

    ```
    function MOSTRA() {

        var SCR = screen.availWidth;
        var BRW = window.outerWidth;

        if (BRW < SCR) {
            document.getElementsByTagName('BODY').className = 'BDYL';
        } else { 
            document.getElementsByTagName('BODY').className = 'BDNL';
        }
    } 
    ```

    或者正如 MaxArt 指出的那样，只需使用`document.body`

    ```
    function MOSTRA() {

        var SCR = screen.availWidth;
        var BRW = window.outerWidth;

        if (BRW < SCR) {
            document.body.className = 'BDYL';
        } else { 
            document.body.className = 'BDNL';
        }
    } 
    ```

如果所有这些都没有帮助，请耐心等待，因为我真的只能猜测您的问题是什么。如前所述，指向相关页面的链接会有所帮助。

另外，您的问题给人的印象是您对所有这些都是新手，如果不是，请原谅我的漫无边际。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T22:31:50.533

这有效：

```
<script type="text/javascript">
window.onload = function () {
  window.onresize = function (evt) {
    var width = window.innerWidth || 
     (window.document.documentElement.clientWidth || window.document.body.clientWidth);

    if (width < screen.width)
    {
        document.body.className = 'BDYL';
    }
    else
    {
        document.body.className = 'BDNL';
    }

  }
};
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T22:22:20.730

您的代码中有语法错误。您没有将字符串传递给`getElementById()`.

这个：

```
document.getElementById(BODY).className = 'BDYL' 
```

应该是这样（带引号，使其成为字符串）：

```
document.getElementById("BODY").className = 'BDYL' 
```

**更新：**

或者正如 MaxArt 在他的评论中指出的那样，只是`document.body.className = "BDYL"`

**更新 2：**

正如 Mikahil 所指出的，您的 if 语句中也存在语法错误，因此您的函数可能看起来像这样：

```
function MOSTRA() {

  var SCR = screen.availWidth,
      BRW = window.outerWidth;

  if (BRW < SCRI) {
    document.body.className = 'BDYL';
  } else {
    document.body.className = 'BDNL'; 
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T22:22:26.843

我不明白你为什么需要为此使用 JavaScript。

CSS：

```
body {
     position: relative;
     width: 100%;
} 
```

# java-home - 我正在尝试查找 JAVA_HOME 路径

> ID：11442330
> 
> 赞同：4
> 
> 时间：2012-07-11T22:15:39.610
> 
> 标签：java-home

我跑了 echo %JAVA_HOME% 来找到我的路径。我知道这是错误的路径，但我不确定如何修复它。任何帮助，将不胜感激。

```
C:\Users\Cynthia>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.6.0_33\C:\Program Files\Java\jdk1.0.60_33\C:\Program Files\Java\jdk1.0.60_33\%JAVA_HOME%\bin\bin\bin

C:\Users\Cynthia> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:24:00.050

在 Windows 上，右键单击“我的电脑”并选择“属性”。
转到：“高级系统设置”，然后转到“环境变量”：

![在此处输入图像描述](../Images/4e1afd05cbd906a93a12a6da9efc15b9.png)

然后检查变量并设置 %JAVA_HOME%：

![在此处输入图像描述](../Images/90d40c31f98b23428394fa1e19b7b1b2.png)

像这样：

![在此处输入图像描述](../Images/0745dc36807b69b9d027880effaf23c4.png)

这是另一个[有用的链接](http://wso2.org/project/wsas/java/1.1/docs/setting-java-home.html)

# javascript - 鼠标悬停在单个文本字母上的放大效果

> ID：11442332
> 
> 赞同：4
> 
> 时间：2012-07-11T22:16:13.580
> 
> 标签：javascript, jquery, css, html

是否可以使用 css/Javascript/jquery 等在网页上创建效果，允许用户将鼠标悬停在文本的单个字母上并一次突出显示每个字母，这是为了创建一种“缩放”上”的效果。理想情况下，在每个字母上显示一个小放大镜会很好，但不是那么重要。

我想要实现的是当您将鼠标悬停在它们上时改变每个字母的样式，文本不一定是链接，它也不是动态的意思是有一段静态的文本，我想将此效果应用于里面的每一个字母。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T22:19:57.063

你可以试试[`zoomooz`](http://janne.aukia.com/zoomooz/)插件。

或者，您可以使用 span 元素包装每个字母，然后为它们设置动画：

```
$("selector").hover(function(){
   $(this).animate({fontSize: "22"}, 300);
}, function() {
  $(this).animate({fontSize: "16"}, 300);  
}) 
```

[演示](http://jsfiddle.net/dWXUC/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T22:31:35.293

我只是在这里玩这个想法，我没有考虑效率，这将取决于你。但是，如果我理解正确，您不会只是给每个字母一个 < span > 标签，然后玩 :hover 效果或使用 jquery/javascript 悬停效果来做您想做的事情，因为您将鼠标移到字母上？如果您不想手动插入所有跨度标签，您可以使用正则表达式为您执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T22:30:27.010

或者你可以这样做：http: [//jsfiddle.net/FPKAP/11/](http://jsfiddle.net/FPKAP/11/)

缩放效果，希望对你有帮助`:)`

**代码**

```
$('#zoomimg').mouseenter(function()
       {

          $(this).css("cursor","pointer");
           $(this).animate({width: "50%", height: "50%"}, 'slow');

       });

    $('#zoomimg').mouseleave(function()
      {   
          $(this).animate({width: "28%"}, 'slow');
   }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T16:27:08.380

没有上面列出的那么好的解决方案，但这里是如何使用 CSS3 实现缩放效果的方法。

这是一个[示例（jsFiddle）](http://jsfiddle.net/VTYQ8/) ，这是代码：

html

```
<h1>
<span>A</span>
<span>B</span>
<span>C</span>
</h1> 
```

CSS

```
h1 {
    font-family: Arial;
    font-size: 62px;
    color: #000000;
}

h1 span { 
    display: inline-block;
    -webkit-transition: all 0.1s ease-out;
}

h1 span:hover {
    -webkit-transform: scale(2.0);
    cursor: pointer;
} 
```

​</p>

# android - Android包装块？

> ID：11442333
> 
> 赞同：2
> 
> 时间：2012-07-11T22:16:15.317
> 
> 标签：android, layout, block

我想要以下布局

```
|     AA  BBBBBBB | 
```

除非没有足够的空间，在这种情况下我想要

```
|       AA |
|  BBBBBBB | 
```

在这种情况下`A`是复选框，并且`B`是复选框旁边的 TextView。

你能推荐一个支持这样包装的布局吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:07:39.570

换行布局...

在[*支持视图的“自动换行”的布局中？*](https://groups.google.com/forum/?fromgroups#!topic/android-developers/ksS0cBFmxxE)，在 Android Developers Google 小组中，他们正是在问这个问题。两个人编写了自己的布局，所以也许它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T16:12:11.177

没有官方的 Android ViewGroup 可以做到这一点，但您可以创建具有这种行为的子类。

```
package your.package.here;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import android.content.Context;
import android.content.res.TypedArray;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;

public class FlowLayout extends ViewGroup {
    private int[] rowHeights;

    public FlowLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int widthMode = MeasureSpec.getMode(widthMeasureSpec);
        int heightMode = MeasureSpec.getMode(heightMeasureSpec);
        int maxInternalWidth = MeasureSpec.getSize(widthMeasureSpec) - getHorizontalPadding();
        int maxInternalHeight = MeasureSpec.getSize(heightMeasureSpec) - getVerticalPadding();
        List<RowMeasurement> rows = new ArrayList<RowMeasurement>();
        RowMeasurement currentRow = null;
        for (View child : getLayoutChildren()) {
            LayoutParams childLayoutParams = (LayoutParams)child.getLayoutParams();
            int childWidthSpec = createChildMeasureSpec(childLayoutParams.width, maxInternalWidth, widthMode);
            int childHeightSpec = createChildMeasureSpec(childLayoutParams.height, maxInternalHeight, heightMode);
            child.measure(childWidthSpec, childHeightSpec);
            int childWidth = child.getMeasuredWidth();
            int childHeight = child.getMeasuredHeight();
            if ((currentRow == null) || currentRow.isWouldExceedMax(childWidth))
            {
                currentRow = new RowMeasurement(maxInternalWidth, widthMode);
                rows.add(currentRow);
            }
            currentRow.addChildDimensions(childWidth, childHeight);
        }
        int longestRowWidth = 0;
        int totalRowHeight = 0;
        int rowCount = rows.size();
        this.rowHeights = new int[rowCount];
        for (int rowIndex = 0; rowIndex < rowCount; rowIndex++) {
            RowMeasurement row = rows.get(rowIndex);
            int rowHeight = row.getHeight();
            this.rowHeights[rowIndex] = rowHeight;
            totalRowHeight = totalRowHeight + rowHeight;
            longestRowWidth = Math.max(longestRowWidth, row.getWidth());
        }
        setMeasuredDimension(
            (widthMode == MeasureSpec.EXACTLY) ? 
                MeasureSpec.getSize(widthMeasureSpec) : 
                (longestRowWidth + getHorizontalPadding()), 
            (heightMode == MeasureSpec.EXACTLY) ? 
                MeasureSpec.getSize(heightMeasureSpec) : 
                (totalRowHeight + getVerticalPadding())
        );
    }

    private int createChildMeasureSpec(int childLayoutParam, int max, int parentMode) {
        int spec;
        if (childLayoutParam == ViewGroup.LayoutParams.FILL_PARENT)
            spec = MeasureSpec.makeMeasureSpec(max, MeasureSpec.EXACTLY);
        else if (childLayoutParam == ViewGroup.LayoutParams.WRAP_CONTENT)
            spec = MeasureSpec.makeMeasureSpec(max, ((parentMode == MeasureSpec.UNSPECIFIED) ? 
                MeasureSpec.UNSPECIFIED : MeasureSpec.AT_MOST)
            );
        else
            spec = MeasureSpec.makeMeasureSpec(childLayoutParam, MeasureSpec.EXACTLY);
        return spec;
    }

    @Override
    protected LayoutParams generateDefaultLayoutParams() {
        return new LayoutParams();
    }

    @Override
    protected boolean checkLayoutParams(ViewGroup.LayoutParams layoutParams) {
        return (layoutParams instanceof LayoutParams);
    }

    @Override
    public LayoutParams generateLayoutParams(AttributeSet attrs) {
        return new LayoutParams(getContext(), attrs);
    }

    @Override
    protected ViewGroup.LayoutParams generateLayoutParams(ViewGroup.LayoutParams p){
        return new LayoutParams(p);
    }

    @Override
    protected void onLayout(boolean changed, int leftPosition, int topPosition, int rightPosition, int bottomPosition) {
        int widthOffset = getMeasuredWidth() - getPaddingRight();
        int x = getPaddingLeft();
        int y = getPaddingTop();
        int rowIndex = 0;
        for (View child : getLayoutChildren()) {
            int childWidth = child.getMeasuredWidth();
            int childHeight = child.getMeasuredHeight();
            LayoutParams layoutParams = (LayoutParams)child.getLayoutParams();
            if ((x + childWidth) > widthOffset) {
                x = getPaddingLeft();
                y = y + this.rowHeights[rowIndex];
                rowIndex = rowIndex + 1;
            }
            int _y;
            if (layoutParams.centerVertical)
                _y = y + ((this.rowHeights[rowIndex] - childHeight) / 2);
            else
                _y = y;
            child.layout(x, _y, x + childWidth, _y + childHeight);
            x = x + childWidth;
        }
    }

    private Collection<View> getLayoutChildren() {
        int count = getChildCount();
        Collection<View> children = new ArrayList<View>(count);
        for (int index = 0; index < count; index++)
        {
            View child = getChildAt(index);
            if (child.getVisibility() != View.GONE)
                children.add(child);
        }
        return children;
    }

    private int getVerticalPadding() {
        return getPaddingTop() + getPaddingBottom();
    }

    private int getHorizontalPadding() {
        return getPaddingLeft() + getPaddingRight();
    }

    public static class LayoutParams extends MarginLayoutParams {
        boolean centerVertical;

        public LayoutParams() {
            this(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);
        }

        public LayoutParams(int width, int height) {
            super(width, height);
            setCenterVertical(false);
        }

        public LayoutParams(Context context, AttributeSet attrs) {
            super(context, attrs);
            TypedArray attributes = context.obtainStyledAttributes(attrs, new int[] { android.R.attr.layout_centerVertical });
            setCenterVertical(attributes.getBoolean(0, false));
            attributes.recycle();
        }

        public LayoutParams(ViewGroup.LayoutParams source) {
            super(source);
        }

        public LayoutParams(MarginLayoutParams source) {
            super(source);
        }

        public LayoutParams(LayoutParams source) {
            this(source.width, source.height);
        }

        public void setCenterVertical(boolean centerVertical) {
            this.centerVertical = centerVertical;
        }
    }

    private static class RowMeasurement {
        private int maxWidth;
        private int widthMode;
        private int width;
        private int height;

        RowMeasurement(int maxWidth, int widthMode) {
            this.maxWidth = maxWidth;
            this.widthMode = widthMode;
        }

        int getWidth() {
            return this.width;
        }

        int getHeight() {
            return this.height;
        }

        boolean isWouldExceedMax(int childWidth) {
            return ((this.widthMode != MeasureSpec.UNSPECIFIED) && (getNewWidth(childWidth) > this.maxWidth));
        }

        void addChildDimensions(int childWidth, int childHeight) {
            this.width = getNewWidth(childWidth);
            this.height = Math.max(this.height, childHeight);
        }

        private int getNewWidth(int childWidth) {
            return ((this.width == 0) ? childWidth : (this.width + childWidth));
        }
    }
} 
```

然后在布局中使用它：

```
<your.package.here.FlowLayout
android:layout_width="match_parent"
android:layout_height="wrap_content">
    <TextView ... />
    <ImageView ... />
    <TextView ... />
</your.package.here.FlowLayout> 
```

此解决方案感谢 Zsolt Vasvari，感谢 David Cesarino 发布链接。

# php - 我如何编辑我的 htaccess 文件以让我的网站仅使用“www”

> ID：11442335
> 
> 赞同：1
> 
> 时间：2012-07-11T22:16:33.320
> 
> 标签：php, .htaccess, mod-rewrite

我的 .htaccess 文件代码是

```
DirectoryIndex router.php
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 ^(.*)$
RewriteRule ^(.*)$ router.php?_doroute=$1 [L,QSA] 
```

我想让我的网站只使用“www”

我无法将此代码与其集成

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:18:20.237

您的`.htaccess`文件的完整输出是什么？您正在显示一条规则，`RewriteRule ^(.*)$ router.php?_doroute=$1 [L,QSA]`该规则指示在该规则结束时停止处理，[L]。

如果您只是添加：

```
RewriteCond %{HTTP_HOST} !^www\.  
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

那么这将是你的问题。

另一种方法是：

```
RewriteCond %{HTTP_HOST} ^example.com$
RewriteRule (.*) http://www.example.com$1 [R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:03:29.810

只需将以下内容添加到您的 .htaccess

```
RewriteCond %{HTTP_HOST} !^www.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

来源： [LetUsLook.nl - 将非 www 重定向到 www](http://www.letuslook.nl/redirect-wordpress-mu-non-www-to-www "将非 www 重定向到 www")

# c# - 当用户尝试编辑字段时，如何向用户显示数据已消失？

> ID：11442340
> 
> 赞同：1
> 
> 时间：2012-07-11T22:17:05.547
> 
> 标签：c#, jquery, asp.net, asp.net-mvc

因此，当用户单击编辑链接以编辑其中一个客户端（字段）并且另一个用户已经删除了该客户端时，如何向用户显示客户端（字段）已消失？

所以我正在使用 TempData 是另一种方法吗？我认为 jquery 但我不知道如何正确使用它

```
public ActionResult Edit (int id)
        {
            client cliente = db.Clients.Find(id);
            if (cliente != null)
            {
                return View(cliente);
            }
            TempData["message"] = string.Format("this client have be erase for other user");
            return RedirectToAction("Index");

        } 
```

**编辑：**

和视图是这样的

```
<table class="widgets">
    <tr>
    <th></th>
        <th>
             @Html.ActionLink("Nombre", "Index", new { ordenacion = ViewBag.NameSortParm, filtro = ViewBag.filtro })
        </th>

    </tr>

@foreach (var item in Model) {
    <tr id="widget-id-@item.id">
         <td>
             @Html.ActionLink("Editar", "Edit", new { id=item.id })  |

                      @Ajax.ActionLink("Eliminar", "Eliminar", "Cliente",
                new {item.id },
                new AjaxOptions {
                    HttpMethod = "POST",
                    Confirm = string.Format("Esta Seguro que quiere eliminar '{0}'?", item.descripcion),
                    OnSuccess = "deleteConfirmation"
                })
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.descripcion)
        </td>

    </tr>
}
</table> 
```

我猜剧本会是这样吗？所以我必须像使用@Ajax.ActionLink 对删除（消除）链接一样制作我的编辑链接，对吗？

```
<script type="text/javascript">

        var validateForEdit = function (id) {
            var validateCallbackFunction = function (result) {
                if (result) {
                    window.location = '/Client/Editar/' + id;
                }
                else {
                    window.Alert('this client have be erase for other user');
                }
            };

            $.post('/Client/ValidateForEdit/', { id: id }, validateCallbackFunction, 'json');
        }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:43:45.717

嗨，您可以在用户编辑之前使用以下代码验证数据

```
 var validateForEdit = function (id) {
        var validateCallbackFunction = function (result) {
            if (result) {
                window.location = '/Client/Edit/' + id;
            }
            else {
                Alert('this client have be erase for other user');
            }
        };

        $.post('/Client/ValidateForEdit/', { id: id }, validateCallbackFunction, 'json');
    } 
```

和你的行动：

```
 [HttpPost]
    public JsonResult ValidateForEdit(int id)
    {
        var cliente = db.Clients.Find(id);
        return cliente != null ? Json(true) : Json(false);
    } 
```

**编辑：**并且您必须替换以下代码

```
@Html.ActionLink("Editar", "Edit", new { id=item.id }) 
```

使用此代码：

```
<input class="button" type="button" value="Edit" onclick="validateForEdit(item.id)" /> 
```

希望这有帮助。

# sql - 如何根据 SQL Server 中的最高点和最低时间计算排名

> ID：11442341
> 
> 赞同：3
> 
> 时间：2012-07-11T22:17:26.697
> 
> 标签：sql, sql-server-2008

我已经搜索和搜索，但无法使其正常工作。如果有人可以帮助我，我将不胜感激。

我有一个存储所玩游戏信息的表格（小测验应用程序）。我需要能够根据得分最高，其次是最低时间来确定排名前 5 的玩家。（许多玩家有最高分）。我还需要确定任何给定时间的用户排名。

这是游戏桌的示例：

```
user_id 学分 time_played 别名
-------- ------- ------------ --------------
64 490 180 达普拉亚
93 690 187 超人
64 336 187 达普拉亚
75 196 192 薄片
93 182 197 超人
57 844 198 约翰·史密斯
75 350 198 薄片
64 858 384 达普拉亚
73 858 400 小家伙
57 858 412 约翰·史密斯
101 858 420 闪光灯
73 858 423 小家伙
73 858 434 小家伙
65 858 460 希娜
122 858 540 糖皇后
126 858 545 雷切尔
176 350 2417 火光
157 350 2442 大Q
161 350 2456 乔伊蓝

```

我正在使用的当前查询是这样的：

```
select top 5 alias,user_id, 
   rank() over (order by max(credits) desc,min(time_played)) as rank 
from games,users 
where games.user_id=users.id and users.id <> 20 and games.credits > 0 
group by user_id,alias 
```

（从查询中可以看出，别名实际上存储在 users 表中。）

我认为这个查询有效，因为它似乎显示了正确的结果，但是现在该网站已经上线，并且我有成千上万的游戏，我可以看出它是错误的。

上面的查询基本上给了我 5 个可能得分最高的玩家，但它对他们的最低游戏时间进行了排名。（因此得分较低的游戏速度更快）。

请让我知道如何调整/修改此查询或完全重写它。

（注意，我可以使用带有循环的 php 来简单得多，但这不会很有效。）

如果需要，我很乐意提供更多信息。

在此先感谢，亚伦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T04:38:56.297

```
with user_ranked_games as (
  select user_id,
         credits,
         time_played,
         row_number() over (  partition by user_id 
                              order by credits desc, time_played asc
                           ) as game_rank
    from games
)
select top 5
       rank() over (order by g.credits desc, g.time_played asc) as rank,
       g.user_id,
       u.alias,
       g.credits,
       g.time_played
  from user_ranked_games g
  join users u
    on g.user_id = u.user_id
 where g.game_rank=1
order by rank 
```

[我在SQL Fiddle](http://sqlfiddle.com/#!3/5749c/3)上成功测试了上述内容。我修改了数据值，使 littleguy 获得前 5 名中的 2 个。但我上面的查询正确地列出了 littleguy 在排名前 5 名的玩家中只有一次。

*注意 - 我原来的 sql fiddle 有重复的用户行（我没有费心定义 PK），这会导致不同的输出，具体取决于连接的完成位置。我已经修复了数据并从 CTE 中删除了连接，并按照我最初的意图将它放在最外层的查询中。*

***更新以回应评论***

一个小的修改提供了一个查询，可以查找单个用户的用户排名和分数：

```
with user_ranked_games as (
  select user_id,
         credits,
         time_played,
         row_number() over (  partition by user_id 
                              order by credits desc, time_played asc
                           ) as game_rank
    from games
),
ranked_users as (
  select rank() over (order by g.credits desc, g.time_played asc) as rank,
         g.user_id,
         u.alias,
         g.credits,
         g.time_played
    from user_ranked_games g
    join users u
      on g.user_id = u.user_id
   where g.game_rank=1
)
select * from ranked_users where user_id=93 
```

您可能需要考虑创建一个可以方便地用来回答这两个问题的视图：

```
create view ranked_users as
with user_ranked_games as (
  select user_id,
         credits,
         time_played,
         row_number() over (  partition by user_id
                              order by credits desc, time_played asc
                           ) as game_rank
    from games
),
select rank() over (order by g.credits desc, g.time_played asc) as rank,
       g.user_id,
       u.alias,
       g.credits,
       g.time_played
  from user_ranked_games g
  join users u
    on g.user_id = u.user_id
 where g.game_rank=1 
```

然后第一个查询变为：

```
select top 5 * from ranked_users order by rank 
```

第二个查询变为

```
select * from ranked_users where user_id=93 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:25:24.283

如果你想要得分最高的玩家的排名，然后是最低的时间，那么使用这个：

```
select 
    topalias,
    user_id, 
    rank() OVER (ORDER BY Credits DESC, timePlayed ASC) AS Rank
from 
    games
    INNER JOIN users 
        on games.user_id = users.id 
 Order By 
     Credits DESC, timePlayed ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:25:11.660

我承认对您的 SELECT 子句有些困惑，但是......我想我只是在 GROUP BY 子句之后加上“ORDER BY credits DESC，time_played ASC”。并且可能只是选择 *。

如果您想要一个保证 5 个不同名称的解决方案，请更改 FROM 子句以获取包含该表中不同名称的表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T22:58:37.260

复杂的因素是（如果我理解正确的话）你只想向每个玩家展示一次，即使他或她有（例如）五个最好的分数。所以你必须首先对所有游戏进行排名，然后为每个玩家获取最好的游戏，然后获取其中前五名的详细信息。

```
CREATE TABLE #Games
    (
    GameID  INT NOT NULL PRIMARY KEY,
    UserID  INT NOT NULL,
    Rank    INT NOT NULL,
    )
INSERT INTO #Games (GameID, UserID, Rank)
    SELECT
        game_id, user_id, ROW_NUMBER() OVER (ORDER BY credits DESC, time_played) AS Rank
    FROM
        games

SELECT TOP 5
    U2.alias, G2.credits, G2.time_played
FROM
    (
    SELECT UserID, MIN(Rank) AS BestRank
    FROM #Games
    GROUP BY UserID
    ) AS U1
    INNER JOIN users AS U2 ON U1.UserID = U2.user_id
    INNER JOIN #Games AS G1 ON U.BestRank = G1.Rank
    INNER JOIN games AS G2 ON G1.GameID = G2.game_id
ORDER BY
    U1.BestRank 
```

# jquery - 在 chrome 上调整背景图像的大小问题

> ID：11442343
> 
> 赞同：0
> 
> 时间：2012-07-11T22:17:34.667
> 
> 标签：jquery, html, css

所以我目前正在开发这个网站：

[http://remedia-solutions.com/clientes/0039_kiplingmexico/demo2/](http://remedia-solutions.com/clientes/0039_kiplingmexico/demo2/)

它几乎完成了，但我目前在调整 2 背景图像大小时遇到​​了一些问题。在 Firefox 上，它可以完美运行，但在 chrome 中无法正常工作，第二个背景（文本背景）以错误的方式完全缩短，我只使用 ccs 来执行此操作，所以这是我的 ccs 代码：

```
#fondo1{
    background-image: url("images/imagesbackground/BACKGROUND-INICIO.jpg");
    background-attachment:  fixed;
    background-position:    top center; 
    background-repeat:      no-repeat;
    background-size:            cover;
    -moz-background-size:       cover;
    -webkit-background-size:    cover;
    position:absolute;
    width:100%;
    height:100%; 
}
#fondo1int{
    background-image: url("images/INICIO.png");
    background-attachment:  fixed;
    background-position:    center center; 
    background-repeat:      no-repeat;
    background-size:            50%;
    -moz-background-size:       50%;
    -webkit-background-size:    50%;
    position:absolute;
    width:100%;
    height:100%; 
} 
```

我在第 2 个 div 上使用 50% 的原因，否则它会像 hela big.Btw 我使用视差，但据我所知它根本不影响。

这是 chrome 上的图像：

[http://oi47.tinypic.com/2ivle8i.jpg](http://oi47.tinypic.com/2ivle8i.jpg)

火狐上的图片：

[http://oi47.tinypic.com/2hr1o9e.jpg](http://oi47.tinypic.com/2hr1o9e.jpg)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:24:54.967

`-webkit-background-size: 50%;`从您的`#fondo1int`中删除`.css`，它在两个浏览器中的行为应该相同。

最后，该类应如下所示：

```
#fondo1int {
   background-image: url("images/INICIO.png");
   background-attachment: fixed;
   background-position: center center;
   background-repeat: no-repeat;
   background-size: 50%;
   -moz-background-size: 50%;
   position: absolute;
   width: 100%;
   height: 100%;
   top: 0;
   left: 0;
} 
```

希望能帮助到你！

# java - 使用 processbuilder 从 java 执行 curl

> ID：11442344
> 
> 赞同：4
> 
> 时间：2012-07-11T22:17:37.933
> 
> 标签：java, json, curl, processbuilder, django-rest-framework

我正在用java编写一个测试porgram来测试我与django中的restfull api的连接（准确地说是djangorestframework）。选项之一是使用 curl 测试 api。从 shell 运行 curl 命令可以正常工作：例如：

```
curl --show-error --request GET --header 'Accept: application/json' --user "user:pwd" http://127.0.0.1:8000/api/v1/ 
```

这很好地返回了 json 格式的 api 根 URL 和帮助文本。

现在，当我尝试使用 ProcessBuilder 从 java 调用相同的内容时，我得到了这个答案：

```
{"detail": "You do not have permission to access this resource. You may need to login or otherwise authenticate the request."} 
```

我正在使用的java代码是：

```
ProcessBuilder p=new ProcessBuilder("curl","--show-error", "--request","GET",
                    "--header","'Accept: application/json'", "--user","\"" + userName + ":" + password + "\"", getApiRootUrlString());
final Process shell = p.start(); 
```

因为我还通过以下方式捕获错误流：

```
InputStream errorStream= shell.getErrorStream();
InputStream shellIn = shell.getInputStream(); 
```

我知道他启动 curl 命令，因为其中一个选项出错会显示 curl 帮助文本。

我不确定调用它有什么区别，很确定它是相同的命令。

顺便说一句，“getApiRootUrlString()”返回正确的 url：`http://127.0.0.1:8000/api/v1/`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T22:38:37.720

您传递给`ProcessBuilder`构造函数的每个字符串都代表一个参数，因此您不需要在 shell 中使用的引号。尝试以下操作：

```
ProcessBuilder p=new ProcessBuilder("curl","--show-error", "--request","GET",
                "--header","Accept: application/json", "--user", userName + ":" + password, getApiRootUrlString()); 
```

如果您使用引号，那么它们将成为传递给进程的值的一部分，因此您尝试使用用户名`"user`和密码进行身份验证`pwd"`。

# wordpress - wordpress 在模板上需要更多自定义文本容器，但是如何

> ID：11442347
> 
> 赞同：0
> 
> 时间：2012-07-11T22:17:42.220
> 
> 标签：wordpress, containers

所以我为一个页面制作了一个模板。效果很好。

但是如何为页面添加更多文本区域？当我编辑页面时，我有一个大的文本区域（在后端），我可以在其中编辑文本。这很棒，但我需要更多。我希望能够在模板周围放置容器，将编辑器限制为仅更改页面上的文本，而不必在编辑器中的大量 html 中编辑文本。

喜欢

```
<html>
<head>
<body>
<div>container1</div>
some more html
<div>container2</div> 
```

等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:15:43.697

您可能想查看在帖子管理区域中添加一些元框。

如果你想使用插件：[http ://wordpress.org/extend/plugins/meta-box/](http://wordpress.org/extend/plugins/meta-box/)

如果你想自己动手：[http ://codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)

这是一个很好的教程，可以把它全部包起来：[http ://wp.tutsplus.com/tag/wordpress-meta-box/](http://wp.tutsplus.com/tag/wordpress-meta-box/)

# objective-c - 弹性滚动导致 Mac App 中的条带化

> ID：11442351
> 
> 赞同：1
> 
> 时间：2012-07-11T22:18:06.840
> 
> 标签：objective-c, macos, nstableview, nsscrollview

我已经实现了一个带有垂直弹性滚动的 NSScrollView，但是当弹性滚动实际发生时，似乎有一个奇怪的条带效应。

无论什么滚动到边缘，都会发生这种情况，无论是 WebView 还是 NSTableView（我在滚动视图中都有这两种情况，当弹性打开时会导致条带化）。

这可能是什么原因造成的？

![绑扎](../Images/906fa83c1aef289e6da2fe8870a79466.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:58:46.673

当我画图时，我使用的是dirtyRect而不是[self bounds]。

dirtyRect （正如我刚刚发现的那样）不是用来填充你的矩形的。

# node.js - 在没有 GridFS 的 NodeJS 中使用 MongoDB 存储一些小（小于 1MB）文件

> ID：11442356
> 
> 赞同：31
> 
> 时间：2012-07-11T22:18:22.357
> 
> 标签：node.js, mongodb, gridfs

我运行一个在 nodeJS + mongoDB 后端运行的网站。现在，我正在实现一个系统来存储一些需要在数据库中的图标（小图像文件）。

据我了解，不使用 GridFS 更有意义，因为它似乎是为大文件或大量文件量身定制的。由于我需要保存的每个文件都将远低于 BSON 最大文件大小，因此我应该能够将它们直接保存到常规文档中。

我有两个问题：

1）我的推理正确吗？可以将图像文件保存在常规的 mongo 集合中，而不是使用 GridFS 吗？有什么我不应该考虑的吗？

2）如果我的思维过程是健全的，我该怎么做？我可以做如下的事情：

```
//assume 'things' is a mongoDB collection created properly using node-mongodb-driver

fs.readFile(pathToIconImage, function(err,image){
  things.insert({'image':image}, function(err,doc){
    if(err) console.log('you have an error! ' + err);
  });
}); 
```

我猜可能有更好的方法来做到这一点，因为 mongoDB 使用 BSON，在这里我试图在将文件发送到数据库之前将其保存为 JSON。我也不知道这段代码是否有效（没试过）。

**更新 - 新问题**

如果我在集合中有一个文档，其中保存了三条信息：1）名称、2）日期和 3）图像文件（上面的图标），并且我想将此文档按顺序发送给客户显示所有三个，这可能吗？如果没有，我想我需要使用 GridFS 并保存 fileID 来代替图像本身。想法/建议？

最好的，感谢您的任何回复，
萨米

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-11T22:50:37.050

如果您的图像确实足够小而不会成为文档大小的问题，并且您不介意进行少量额外处理，那么将其直接存储在您的收藏中可能就可以了。为此，您需要对图像进行 base64 编码，然后使用 mongo 的 BinData 类型存储它。据我了解，这会将其保存为 BSON 位数组，而不是实际存储 base64 字符串，因此大小不会比原始二进制图像大。

它将在 json 查询中显示为 base64 字符串，您可以使用它来获取二进制图像。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-04-25T16:11:53.530

我一直在寻找同样的东西。我知道这篇文章很旧，但也许我可以帮助那里的人。

```
var fs = require('fs');
var mongo = require('mongodb').MongoClient;
var Binary = require('mongodb').Binary;

var archivobin = fs.readFileSync("vc.exe"); 
// print it out so you can check that the file is loaded correctly
console.log("Loading file");
console.log(archivobin);

var invoice = {};
invoice.bin = Binary(archivobin);

console.log("largo de invoice.bin= "+ invoice.bin.length());
// set an ID for the document for easy retrieval
invoice._id = 12345; 
  mongo.connect('mongodb://localhost:27017/nogrid', function(err, db) {
  if(err) console.log(err);
     db.collection('invoices').insert(invoice, function(err, doc){
    if(err) console.log(err);
  // check the inserted document
    console.log("Inserting file");
    console.log(doc);

    db.collection('invoices').findOne({_id : 12345}, function(err, doc){
      if (err) {
        console.error(err);
        }

      fs.writeFile('vcout.exe', doc.bin.buffer, function(err){
          if (err) throw err;
          console.log('Sucessfully saved!');
    });

    });
  });
}); 
```

# javascript - 使用淡入淡出无法正确显示 jQuery 文本

> ID：11442357
> 
> 赞同：2
> 
> 时间：2012-07-11T22:18:33.827
> 
> 标签：javascript, jquery, delay, fadein, fadeout

我搜索了这个问题，但找不到适合我的解决方案。

我正在尝试做四个复选框，从中只能选择三个。当第四个复选框被选中时，会出现一条淡入消息，通知用户有关限制的信息。这是文本中淡出的部分：

```
$('#warning').fadeIn('slow',function() {
        $(this).stop().text("(You can't have more than 3 selected options)");
        setTimeout(function() {
            $("#warning").fadeOut(300);
        }, 2500);
}); 
```

我不能延迟，所以我使用了 setTimeout。我不明白为什么第一次单击第四个复选框时，消息立即显示 uo。我究竟做错了什么？

还有一种方法可以延迟而不是 setTimer 吗？

这是整个代码的链接：http: [//jsfiddle.net/e5kns/](http://jsfiddle.net/e5kns/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:32:41.967

尝试将此添加到脚本的开头：

```
$('#warning').text("(You can't have more than 3 selected options)");
$('#warning').show();
$('#warning').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:34:59.273

[http://jsfiddle.net/e5kns/2/](http://jsfiddle.net/e5kns/2/)

使用 fadeTo 并将 css opacity 设置为 0... 像这样：

```
$('#warning').text("(You can't have more than 3 selected options)").css('opacity',0).stop().fadeTo('slow', 1).delay(2000).fadeTo('slow', 0); 
```

# java - 尝试捕捉细节

> ID：11442362
> 
> 赞同：3
> 
> 时间：2012-07-11T22:19:02.533
> 
> 标签：java, android, try-catch

当我尝试使用 try/catch 时，我对尝试捕获的错误类型感到困惑。在 stackoverflow 中进行研究时，我看到了关于不推荐使用

```
catch(Exception e) 
```

因为它是通用的，但是我在哪里可以找到我应该寻找的特定错误类型的示例将尝试使用伪代码播放音频文件

```
try{
  play audio file
}
catch ( invalid file)
catch ( bad connection)
catch ( file not found)
catch ( invalid file size)
etc 
```

我上面列出的伪错误涵盖了从互联网连接到文件特定信息的广泛功能。

我如何涵盖所有这些情况

我有一个应用程序显示一条消息，指出该文件无法播放，但我想捕捉特定错误并查看每次出现此消息时发生的情况并修复它。

如果我想尝试捕获我自己编码的独特事物的错误怎么办。

这可能是一个不好的例子，但如果我想计算行星轨道的持续时间并在持续时间小于某个值时生成错误。使用的值应该导致一个区域超过 13 个月，但由于某些未知的原因，某些原因导致它低于 13，我想找出原因，所以我使用 try catch，因为出现问题并且我不知道它是什么，也许我需要使用数字的绝对值而不是数字本身或类似的东西，主要的一点是我不知道错误是由什么引起的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:24:15.940

您可以通过指定要捕获的特定类型来捕获特定错误：

```
try {
    ...file open...
} catch (IOException e) {
    ...handle IO exception...
} 
```

有一个[巨大的异常列表](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html)，所有的子类`Exception`。异常按层次结构组织，因此有些包含其他异常。例如，`EOFException`是 的子类`IOException`，所以如果你想捕捉任何 IO 错误（包括 EOF 错误），请使用`IOException`，如果你只想特别捕捉 EOF，请使用`EOFException`.

您可以编写自己的`Exception`子类（或其子类之一），并像任何其他预定义异常一样捕获它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:24:31.827

您知道要“捕获”什么的唯一方法是查看方法定义，因为它们将说明将引发哪些异常。如果您想要一个通用的全部捕获，那么您已经使用 Try Catch 拥有它，因为异常类是所有其他标准异常的基类

# jquery - 如何使用 jQuery 动画到特定位置

> ID：11442363
> 
> 赞同：1
> 
> 时间：2012-07-11T22:19:08.680
> 
> 标签：jquery, jquery-animate

我搜索了高低，似乎找不到解决方案。

我希望能够单击一个 div 并将其动画到特定位置（例如 x:200 y:200），而不管它已经存在于页面上的什么位置。例如，如果我有 4 个 div 分散在我的页面上，我希望能够让它们动画到一个统一的坐标。有谁知道我怎么能做到这一点？将不胜感激。我尝试了使用 .position 和 .offset 的各种技巧，但似乎都没有奏效。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:26:06.720

使用[`.animate()`](http://api.jquery.com/animate/). 看这个例子：

```
$('#myDiv').animate({top: '50px', left: '50px'}, 2000, function () {
    console.log('done!');
}); 
```

它将在 2 秒内将 id 为“myDiv”的 div 设置为 (50,50) 的动画。

# javascript - 使用 XmlHttpRequest 和 FormData 时如何设置边界

> ID：11442367
> 
> 赞同：10
> 
> 时间：2012-07-11T22:19:35.233
> 
> 标签：javascript, ajax, forms

我试图在使用 FormData 发布 XmlHttpRequest 时在标题中正确设置边界：

```
xhr.open("POST",url);
xhr.setRequestHeader("Content-type","multipart/form-data; boundary=...");

var formData = new FormData();
formData.append("filename", inputId.files[0]);
formData.append(...);

xhr.send(formData); 
```

如何在此处的请求标头中设置边界。我看到请求被设置，边界以某种方式在请求中创建。但是服务器不知道如何解释它。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-19T13:04:24.983

**ES法**

只需不要手动设置 Content-Type 标头，浏览器将自动设置“multipart/form-data;boundary=...”值。

* * *

**方法**

如果您使用 jQuery，请将 contentType 选项设置为 false：

```
$.ajax({
    url: url,
    type: 'POST',
    data: formData,
    processData: false,
    contentType: false
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-30T22:53:18.380

试试看这个，[How to send multipart/form-data form content by ajax (no jquery)?](https://stackoverflow.com/questions/5933949/how-to-send-multipart-form-data-form-content-by-ajax-no-jquery) 我正在尝试以 PHP 作为接收者来使用这个脚本，在警告的混合结果方面遇到了一些问题，我认为我的问题是我在脚本的两端都砍掉了太多，以至于它不再起作用。

至于另一张海报“如果您使用的是 JQuery”的评论，我对该评论唯一要说的是，它对不在 JQuery 中工作的人没有帮助，而 JQ 并不是全部和全部的脚本。

# linux - Grails 安装

> ID：11442368
> 
> 赞同：2
> 
> 时间：2012-07-11T22:19:38.867
> 
> 标签：linux, grails, ubuntu, groovy

我正在尝试从源代码安装 Grails。我是3天前开始的，仍然有一些问题。每次尝试都以消息结束：

```
:grails-bootstrap:compileGroovy
[ant:groovyc] >>> a serious error occurred: grails/util/BuildSettings
[ant:groovyc] >>> stacktrace:
[ant:groovyc] java.lang.NoClassDefFoundError: grails/util/BuildSettings
[ant:groovyc]   at java.lang.Class.getDeclaredMethods0(Native Method)
[ant:groovyc]   at java.lang.Class.privateGetDeclaredMethods(Class.java:2440)
[ant:groovyc]   at java.lang.Class.getDeclaredMethods(Class.java:1806)
Execution failed for task ':grails-bootstrap:compileGroovy'.
> Forked groovyc returned error code: 1 
```

我正在使用 Ubuntu 12.04 LTS 64 位

我做了什么：

1.  安装java

    Java 版本“1.7.0-ea”
    Java(TM) SE 运行时环境（构建 1.7.0-ea-b76）
    Java HotSpot(TM) 64 位服务器 VM（构建 17.0-b05，混合模式）

2.  安装 groovy

    Groovy 版本：2.0.0 JVM：1.7.0-ea 供应商：Sun Microsystems Inc. 操作系统：Linux

3.  克隆 grails 并将其签出到 v2.1.0

4.  调用 sudo ./gradlew install

如果我使用 --stacktrace --info --debug

```
00:15:19.777 [ERROR] [org.gradle.BuildExceptionReporter] FAILURE: Build failed with an exception.
00:15:19.779 [ERROR] [org.gradle.BuildExceptionReporter] 
00:15:19.780 [ERROR] [org.gradle.BuildExceptionReporter] * What went wrong:
00:15:19.781 [ERROR] [org.gradle.BuildExceptionReporter] Execution failed for task ':grails-bootstrap:compileGroovy'.
00:15:19.786 [ERROR] [org.gradle.BuildExceptionReporter] > Forked groovyc returned error code: 1
00:15:19.787 [ERROR] [org.gradle.BuildExceptionReporter] 
00:15:19.788 [ERROR] [org.gradle.BuildExceptionReporter] * Exception is:
00:15:19.791 [ERROR] [org.gradle.BuildExceptionReporter] org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':grails-bootstrap:compileGroovy'.
00:15:19.792 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:68)
00:15:19.794 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)
00:15:19.795 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:34)
00:15:19.796 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter$1.run(CacheLockHandlingTaskExecuter.java:34)
00:15:19.797 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.cache.internal.DefaultCacheAccess$2.create(DefaultCacheAccess.java:200)
00:15:19.799 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:172)
00:15:19.800 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:198) 
```

我能做些什么更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T23:49:20.043

我认为您可能使用了错误的 groovy 版本——我很确定它是 1.8.6。

# javascript - 使用 Jasmine 测试嵌入的 javascript 代码

> ID：11442371
> 
> 赞同：1
> 
> 时间：2012-07-11T22:19:44.607
> 
> 标签：javascript, jasmine, jasmine-jquery

我有嵌入在 html 中的代码，如下所示：

```
<script type="text/javascript"> 
     function add(a, b) {
         return a+b; 
     }
</script> 
```

我想知道是否有人知道这是否可以使用 Jasmine 和 JQuery 固定装置进行测试？我是 Jasmine 的新手，不明白如何测试这种代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:13:14.680

我认为@pawlik 建议它更好地属于它自己的 .js 文件。我考虑回答您的问题的唯一选择是将此文件作为固定装置（使用 loadFixtures('file') 方法）但您通常使用片段（不包含 html、head 或 body 标签）执行此操作，如果有任何在脚本标签中触发或包含的 DOM 就绪事件可能无法与 jasmine 很好地搭配。

说您无法更改文件可能并不意味着您无法更改结构（即，将其推送到单独的脚本文件并在 HTML 主页面中引用该文件。）在许多情况下，您*应该*将代码的结构重构为方便测试。

由于您是 jasmine 的新手，因此在编写测试时，您倾向于单独测试 javascript 函数/方法，或者使用 HTML 片段（如果您正在进行基于 DOM 的测试）作为固定装置。您通常不会使用完整的 HTML 页面并为其编写测试，这更像是端到端/功能测试，而不是 jasmine 的主要目标。

顺便说一句，您缺少 "text/javascript <-- 的结尾双引号

# .net - 在 C++ 中调用 checkBox1_CheckedChanged 函数

> ID：11442376
> 
> 赞同：-1
> 
> 时间：2012-07-11T22:20:16.263
> 
> 标签：.net, winforms, visual-studio-2010, visual-c++, c++-cli

谁能告诉我怎么打电话

```
checkBox1_CheckedChanged(System::Object^  sender, System::EventArgs^  e) 
```

功能？我试过：

```
checkBox1_CheckedChanged(checkBox1,EventArgs::Empty); 
```

和

```
checkBox1_CheckedChanged(checkBox1,gcnew EventArgs()); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:47:25.860

更改您的呼叫：

```
checkBox1_CheckedChanged(checkBox1,EventArgs::Empty); 
```

到：

```
CheckBox1_CheckedChanged(checkBox1,EventArgs::Empty); 
```

（注意第一个字母 C 大写）。

# java - 在 Android 中使用文件

> ID：11442378
> 
> 赞同：-2
> 
> 时间：2012-07-11T22:20:34.707
> 
> 标签：java, android, file-io

我正在尝试为 Android 开发应用程序，但我不知道如何在 Android 手机中写入/读取文件。

通常我会做以下事情：

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;

public class Test {

    public static void main(String[] args) {
        try {
            String path = "file.txt";
            BufferedWriter bw = new BufferedWriter(new FileWriter(path));
            bw.write("XYZ");
            bw.close();

            BufferedReader br = new BufferedReader(new FileReader(path));
            String line = "", data = "";
            while ((line = br.readLine()) != null) {
                data = data + line;
            }
            br.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:23:47.367

你很接近。这是我做的事情，我检查是否有 SD 卡，如果没有，它将保存在本地（请记住，因为它是一个 Android 应用程序，所以您的所有数据都将保存在手机上），然后您创建如果没有目录，则写入文件。如果您有任何问题，请告诉我。这更多是为了写入，但读取同样简单，您只需创建一个缓冲读取器，给它文件，然后读取；就像您在代码中所做的一样。

我希望这有帮助：

```
SimpleDateFormat photoFormat = new SimpleDateFormat("ddMMyy-hhmmss");

        // create formating for date
        SimpleDateFormat sdf = new SimpleDateFormat("MMMddyy-hhmmss");
        /*
         * This sections checks the phone to see if there is a SD card. if
         * there is an SD card, a directory is created on the SD card to
         * store the test log results. If there is not a SD card, then the
         * directory is created on the phones internal hard drive
         */
        // if there is no SD card
        if (Environment.getExternalStorageState() == null) {
            directory = new File(Environment.getDataDirectory()
                    + "/RobotiumTestLog/");
            photoDirectory = new File(Environment.getDataDirectory()
                    + "/Robotium-Screenshots/");

            // if no directory exists, create new directory
            if (!directory.exists()) {
                directory.mkdir();
            }

            // if phone DOES have sd card
        } else if (Environment.getExternalStorageState() != null) {
            // search for directory on SD card
            directory = new File(Environment.getExternalStorageDirectory()
                    + "/RobotiumTestLog/");
            photoDirectory = new File(
                    Environment.getExternalStorageDirectory()
                            + "/Robotium-Screenshots/");

            // if no directory exists, create new directory to store test
            // results
            if (!directory.exists()) {
                directory.mkdir();
            }
        }// end of SD card checking

        /*
         * Below is where the name of the test log is created.This can be
         * changed for any other test methods
         */
        String fileName = "TravelTestResults.csv";

        /*
         * Checks for existing test logs, and if they exist, they are
         * deleted, creating a new test log for each testing method
         */
        File logResults = new File(directory, fileName);
        if (logResults.exists()) {
            logResults.delete();
        }
        if (!logResults.exists()) {
            logResults.createNewFile();
        }
        /*
         * This creates the writing stream to log the test results This
         * stream MUST be closed, using bw.close(), for the test results to
         * show on the log. If the stream is not closed, when you open the
         * text file that the results are stored in, the page will be blank.
         */
        bw = new BufferedWriter(new FileWriter(logResults, true));
        bw.write("Test Run, Test Result, Comments \"\n\"");
                    bw.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T22:48:13.343

[该文档](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)有一个关于如何最好地访问文件系统的相当不错的指南。

# python - python ElementTree xml：解析fromstring与构建元素

> ID：11442382
> 
> 赞同：1
> 
> 时间：2012-07-11T22:20:45.783
> 
> 标签：python, xml

给定大量数字，其中：

```
[1, 2, 3, 4 ...] => <tag attrib="1" />
                    <tag attrib="2" />
                    <tag attrib="3" />
                    <tag attrib="4" />
                    ... 
```

哪个更有效/更快：

a）使用它们从头开始构建它们并将它们`Element("name", attributes)`附加到某个根

或者

b)`fromstring(str)`其中 str 是示例中这些标签的字符串表示形式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:59:54.753

更新测试：

```
from xml.etree.ElementTree import Element, XML, tostring
from timeit import timeit

elist = [e for e in xrange(1000)]

def test_normal():
    eroot = Element('root')
    for e in elist:
        eroot.append(Element("tag", {"attrib" :"%s" %e}))

def test_list():
    eroot = Element('root')
    [eroot.append(Element("tag", {"attrib" :"%s" %e})) for e in elist]

print "etree: %.6f" %timeit(test_normal, number=1000)
print "l-cmp: %.6f" %timeit(test_list, number=1000)

from xml.etree.cElementTree import Element, XML, tostring, fromstring
#from lxml.etree import Element, XML, tostring

print "ctree: %.6f" %timeit(test_normal, number=1000)
print "c-cmp: %.6f" %timeit(test_list, number=1000)

def test_string():
    eroot = "<root>"
    tags = ['<tag attrib="%s" />' %e for e in elist]
    eroot += ' '.join(tags) + '</root>'
    tree = fromstring(eroot)

print "strng: %.6f" %timeit(test_string, number=1000)    

etree: 13.302093
l-cmp: 12.276725
ctree: 5.482961
c-cmp: 5.692758
strng: 6.578780 
```

cElementTree 是最快的版本。所以我会说：不要使用字符串[可憎](https://stackoverflow.com/a/1732454/1107807)！;-)

# google-apps-script - 根据另一个选项卡上的内容更新字段

> ID：11442387
> 
> 赞同：1
> 
> 时间：2012-07-11T22:21:08.987
> 
> 标签：google-apps-script

我已经建立了一个包含多个选项卡的电子表格。

我的“源”选项卡 1 包含列“Id”和“名称”我的“目标”选项卡 2 包含“Id”

我试图遍历我的目标选项卡中的行并读取 Id 的值，然后在我的源选项卡中搜索 Id。当我找到 ID 时，我想获取“名称”字段中的值并将其添加到目标选项卡 ID 同一行的单元格中。

我很难处理遍历一个数组的逻辑并确保我在目标选项卡或目标选项卡内容的数组中找到值。在“目标”选项卡中，可能不止一次出现 Id，我需要全部更新它们。

欢迎大家提出意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:00:05.397

这是一个建议：

```
/* let us say source array with name(columnA) & ID(columnB) is array 'source'
and target array with only IDs is array 'target', you get these with something like*/
    var source = SpreadsheetApp.getActiveSpreadsheet().getSheets()[0].getDataRange().getValues();
// and
    var target = SpreadsheetApp.getActiveSpreadsheet().getSheets()[1].getDataRange().getValues();// if other columns, change index values in the arrays : 0=A, 1=B ...
//   then let's create a 3 rd array that will be the new target with ID + names, and call it 'newtarget' 
    var newtarget=new Array()
// the iteration could be like this :
          for(i=0;i<target.length;++i){ // don't miss any ID
           for(j=0;j<source.length;++j){ // iterate through source to find the name

             if(target[i][0].toString().match(source[j][1].toString()) == source[j][1].toString()){
               var newtargetrow=[source[j][0],target[i][0]] // if match found, store it with name (idx0) and ID (idx 1)
                   }else{
               var newtargetrow=['no name found',target[i][0]] // if no match, show it in name column
                   }
             newtarget.push(newtargetrow);// store result in new array with 2 columns
               } //loop source
         } // loop target

        /* now you have a newtarget array that can directly overwrite the old target 
        using setValues() */
        var sh = SpreadsheetApp.getActiveSpreadsheet().getSheets()[1];// assuming the target sheet is sheet nr2
        sh.getRange(1,1,newtarget.length,newtarget[0].length).setValues(newtarget);
    // 
```

注意我没有测试这段代码，但它应该给你一个起点。我用 .match 对字符串进行了比较，但您可以使用其他比较（数组元素之间的直接相等）...如果工作表数据中存在不想要的空格的风险，您还可以删除 ID 中的空格...我没有不知道你的数据，所以这取决于你。

# objective-c - captureOutput:didOutputSampleBuffer:fromConnection: image buffer size is always 360x480 even on iPad

> ID：11442393
> 
> 赞同：1
> 
> 时间：2012-07-11T22:21:40.307
> 
> 标签：objective-c, ios, cgimage, avcapturesession

I am using the `captureOutput:didOutputSampleBuffer:fromConnection:` delegate method of `AVCaptureVideoDataOutput`. When testing it on the iPad the image buffer size is always 360x480 which seems really strange, I would think it would be the size of the iPad screen.

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection { 

    @autoreleasepool {

        CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
        /*Lock the image buffer*/
        CVPixelBufferLockBaseAddress(imageBuffer,0); 
        /*Get information about the image*/
        uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); 
        size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
        size_t width = CVPixelBufferGetWidth(imageBuffer); 
        size_t height = CVPixelBufferGetHeight(imageBuffer);  

        /*Create a CGImageRef from the CVImageBufferRef*/
        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 
        CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
        CGImageRef newImage = CGBitmapContextCreateImage(newContext);

        NSLog(@"image size: h %zu, w %zu", height, width);

        /*We unlock the  image buffer*/
        CVPixelBufferUnlockBaseAddress(imageBuffer,0);

        CGRect zoom = CGRectMake(self.touchPoint.y, self.touchPoint.x, 120, 120);
        CGImageRef newImage2 = CGImageCreateWithImageInRect(newImage, zoom);

        /*We release some components*/
        CGContextRelease(newContext); 
        CGColorSpaceRelease(colorSpace);

        UIImage* zoomedImage = [[UIImage alloc] initWithCGImage:newImage2 scale:1.0 orientation:UIImageOrientationUp];
        [self.zoomedView.layer performSelectorOnMainThread:@selector(setContents:) withObject:(__bridge id)zoomedImage.CGImage waitUntilDone:YES];

        CGImageRelease(newImage);
        CGImageRelease(newImage2);

    }

}//end 
```

Is there a reason why the image buffer would be so small, even on iPad?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:16:25.287

The quality of the [`AVCaptureSession`](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html) is determined by the `sessionPreset` property, which defaults to `AVCaptureSessionPresetHigh`. It doesn't care what the resolution of the screen on the capturing device is; the capture quality is a function of the device's camera.

If you want the capture resolution to more closely match the screen resolution, you'll have to change the `sessionPreset`. Just note that none of the presets correspond directly to any screen resolution, rather they correspond to common video formats, like VGA, 720p, 1080p, etc:

```
NSString *const AVCaptureSessionPresetPhoto;
NSString *const AVCaptureSessionPresetHigh;
NSString *const AVCaptureSessionPresetMedium;
NSString *const AVCaptureSessionPresetLow;
NSString *const AVCaptureSessionPreset352x288;
NSString *const AVCaptureSessionPreset640x480;
NSString *const AVCaptureSessionPreset1280x720;
NSString *const AVCaptureSessionPreset1920x1080;
NSString *const AVCaptureSessionPresetiFrame960x540;
NSString *const AVCaptureSessionPresetiFrame1280x720; 
```

# javascript - Windows 2008 上的 JSON 语法错误

> ID：11442400
> 
> 赞同：0
> 
> 时间：2012-07-11T22:22:22.183
> 
> 标签：javascript, json, windows-server-2008-r2

我正在尝试在 AJAX 面板不是可行选项的某个页面上实现 JSON 调用来模拟 AJAX。

当从下拉列表中选择州并填充县下拉列表时，我想调用我的 .aspx 页面。

在我的状态下拉列表中，我有这个电话：

onchange="jsonDropDownLoader('COUNTIES', this, 'Content2_DDLCounties')"

该调用在页面上，代码在这里：

```
function jsonDropDownLoader(sType, oParent, oChild) {
  var lstrChild = document.getElementById(oChild);
  var lstrFilter = ""

  if (oParent.value > "") {
    lstrFilter = oParent.value
  }

  lstrChild.options.length = 0;
  if (oParent.value > "") {
    var JSONobject = {};
    var http_request = new XMLHttpRequest();
    url = "/AltairWeb.NET/RS/jsonDropDownLoader.aspx?TYPE=" + sType + "&FILTER=" + lstrFilter
    http_request.open("GET", url, false);
    http_request.onreadystatechange = function () {
        var done = 4, ok = 200;
        if (http_request.readyState == done && http_request.status == ok) {
            JSONobject = JSON.parse(http_request.responseText);
        }
    };
    http_request.send(null);
    var JSONarray = eval('(' + http_request.responseText + ')').data
    for (var i = 0; i < JSONarray.length; ++i) {
        var optn = document.createElement("OPTION");
        optn.text = JSONarray[i].text;
        optn.value = JSONarray[i].value;
        lstrChild.options.add(optn);
    }
  }
} 
```

它返回一个字符串，然后我用它来填充 County 下拉列表。

我正在取回数据，但它没有呈现在您的 QA 服务器上。使用带有 IE8 的开发人员工具，我可以看到我在这一行有一个错误：

```
JSONobject = JSON.parse(http_request.responseText); 
```

它说没有声明 JSON。

它说我在这一行也有语法错误：

```
var JSONarray = eval('(' + http_request.responseText + ')').data 
```

这在我的开发箱上完美运行。但是，我的开发盒上装有 WinXP / IIS 5，而我们的 QA 服务器是装有 IIS7.5 的 Win2008 服务器。我们有新的开发箱即将推出，但在那之前，我一直坚持使用 XP 机器。

由于它在本地工作，它似乎必须是 QA 服务器上的 Windows 或 IIS 的安全问题，可能与 http_request 调用有关，但我无法通过谷歌找到任何帮助我解决这个问题的东西。

我知道在 IE9 之前，我看到过 IE 不支持 JSON.parse 的帖子，但是当我指向我的开发服务器时，这在 IE8 中完美运行，但当我指向 QA 服务器时却不行，所以它似乎不是浏览器的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:40:01.663

首先，您正在使用同步调用 ( `xhr.open('GET', url, false)`)，并且您也在使用`onreadystatechange`. 这是错误的。选择一个或另一个。

[https://developer.mozilla.org/en/xmlhttprequest](https://developer.mozilla.org/en/xmlhttprequest)

![在此处输入图像描述](../Images/775379270c922d56cb25ed770b7f7c9a.png)

接下来，检查您的浏览器对 JSON 的支持。请参阅[https://stackoverflow.com/a/891306/48082](https://stackoverflow.com/a/891306/48082)。如果您不确定，请使用`json2.js`来自 json.org 的内容。

最后，*不要使用 eval*。使用适当的 JSON 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:31:22.727

JSON.parse() 是浏览器的功能，而不是服务器的功能。

你*确定*区别是服务器......而不是你的客户端浏览器？？？

您可能还希望考虑使用 jQuery 之类的东西（它既可以简化您的编码，又可以帮助解决这样的跨浏览器问题）。例如：

*   [在 JavaScript 中解析 JSON？](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

    var json = '{"result":true,"count":1}', obj = JSON && JSON.parse(json) || $.parseJSON(json);

# jquery - $("#submit").on("click", function(){ 的 Jquery 版本

> ID：11442405
> 
> 赞同：-6
> 
> 时间：2012-07-11T22:22:38.080
> 
> 标签：jquery

有谁知道什么时候

```
 $("#submit").on("click", function(){ 
```

出来。意味着什么版本的 Jquery 开始使用 .on()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T22:23:56.300

[从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。有关从旧 jQuery 事件方法转换的帮助，请参阅 .bind()、.delegate() 和 .live()。](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T22:24:35.063

从[文档中](http://api.jquery.com/on/)：

> `.on( events [, selector] [, data], handler(eventObject) )` **添加的版本：1.7**

# php - 单击时发送 AJAX，但仍转到 href 的 URL

> ID：11442420
> 
> 赞同：5
> 
> 时间：2012-07-11T22:24:14.160
> 
> 标签：php, jquery, ajax

我正在尝试以下操作：

当用户单击链接时，我想通过 ajax 更新数据库中特定表的特定列。但我仍然希望用户被重定向到`href="<url>"`链接。

我尝试了没有 jQuery，`return false;`但是 ajax 不起作用。

我试过了，`return false;`但是页面显然没有按照我的意愿重定向到 url。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T22:27:15.920

进行AJAX 调用，然后`document.location`在完成时设置。

```
$('a').click(function(e){
    var href = this.href;  // get href from link
    e.preventDefault();  // don't follow the link
    $.ajax({
        url: '/path/to/site',
        data: {some: data},
        success: function(){
            document.location = href;  // redirect browser to link
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:26:50.150

您需要自己序列化这些操作。在事件处理程序中，首先运行您的 AJAX 请求，然后从标记中查找 href 并使用位置重定向将客户端带到该 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:28:41.877

将重定向代码放入成功回调中：

```
$.ajax({
  ...
  success: function(){
    $(location).attr('href',url); // You URL inserted
  }
}); 
```

# eclipse - 在 JFace TreeViewer 中搜索

> ID：11442424
> 
> 赞同：0
> 
> 时间：2012-07-11T22:24:25.437
> 
> 标签：eclipse

在我的插件中，我使用 JFace TreeViewer 在树中显示数据。默认情况下，树不会展开，只有在单击 + 时才会展开到级别。但是我需要对树的整个项目执行搜索（用户输入的文本），而不仅仅是显示的项目。我知道只有在单击 + 后才会延迟加载所有子级项目。有没有办法检索树的所有项目而不仅仅是显示的项目。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:17:47.570

在树中搜索通常是使用 FilteredTree 类实现的，它为您提供了一棵树，上面有一个文本框，用于放置您的查询。然后 FilteredTree 类管理过滤操作。您可以在首选项对话框中看到它的实际效果。

即使这不太符合您的要求，您也可以参考 FilteredTree 源代码来帮助您实现自己的搜索工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-10T14:35:41.590

```
 public void searchTree(String searchtext) {

    viewer.collapseAll();
    final int itemCount = viewer.getTree().getItemCount();
    for (int itemIndex = 0; itemIndex < itemCount; itemIndex++) {
        TreeItem item = viewer.getTree().getItem(itemIndex);
        if (item.getData().toString().toUpperCase().contains(searchtext.toUpperCase())) {

            viewer.expandToLevel(item.getData(), TreeViewer.ALL_LEVELS);
            for (int i = 0; i < item.getItems().length; i++) {
                if (item.getItem(i).getData().toString().toUpperCase().contains(searchtext.toUpperCase())) {
                    item.getItem(i).setBackground(new Color(Display.getCurrent(), 204, 255, 153));
                }

            }
        } else {
            item.setForeground(new Color(Display.getCurrent(), 0, 0, 0));
        }

    }
} 
```

希望这能解决你的问题

# android - 在 Android OpenGLES 中确定最大/最小纹理大小限制

> ID：11442426
> 
> 赞同：6
> 
> 时间：2012-07-11T22:24:28.557
> 
> 标签：android, opengl-es, android-activity, glsurfaceview

[我被指派为这个Objective C GPUImage 框架](https://github.com/BradLarson/GPUImage)创建一个开源 Java 端口，以便它可以在 Android 应用程序中使用。我将尽可能地重新创建它，所有变量名、函数名等都相同。我正处于起步阶段，我正在尝试移植 GPUImageOpenGLESContext.h 和 GPUImageOpenGLESContext.m（抱歉，会提供链接，但作为新用户，我无法添加更多链接）。

我对这些方法有困难

```
+ (GLint)maximumTextureSizeForThisDevice;
{
    GLint maxTextureSize; 
    glGetIntegerv(GL_MAX_TEXTURE_SIZE, &maxTextureSize);
    return maxTextureSize;
}

+ (GLint)maximumTextureUnitsForThisDevice;
{
    GLint maxTextureUnits; 
    glGetIntegerv(GL_MAX_TEXTURE_IMAGE_UNITS, &maxTextureUnits);
    return maxTextureUnits;
} 
```

似乎在 Objective C 中，您可以简单地调用这些方法，但在 Java 中则不能。我做了一些搜索，发现大多数人都说要使用 GLSurfaceView，但这需要一个活动，对吗？[当我发现这个Get Maximum OpenGL ES 2.0 Texture Size Limit on Android](https://stackoverflow.com/questions/11022109/get-maximum-opengl-es-2-0-texture-size-limit-in-android)时，我非常兴奋，但响应声称代码不起作用。

**所以，我的问题是，如何在非活动的类中获得最小和最大纹理？使用 GLSurfaceView？**

我也很感激有关如何将其移植过来的任何建议。我从来没有将任何东西从Objective C移植到Java，所以任何建议都将不胜感激！

如果有帮助，这是我当前的代码：

```
public class GPUImageOpenGLESContext 
{
    private static GPUImageOpenGLESContext instance = null;

    EGLContext context;

    protected GPUImageOpenGLESContext()
    {
        // This is a protected empty method
        // that exists only to prevent
        // this singleton object from
        // multiple instantiation

        return;
    }

    public enum GPUImageRotationMode { 
            kGPUImageNoRotation, kGPUImageRotateLeft, kGPUImageRotateRight, kGPUImageFlipVertical,
            kGPUImageFlipHorizontal, kGPUImageRotateRightFlipVertical, kGPUImageRotate180
    }

    public GPUImageRotationMode GPUImageRotationSwapsWidthAndHeight(GPUImageRotationMode rotation)
    {
        // TODO: Implement GPUImageRotationSwapsWidthAndHeight macro as method
        //rotation = ((rotation) == kGPUImageRotateLeft || (rotation) == kGPUImageRotateRight || (rotation) == kGPUImageRotateRightFlipVertical)
        return rotation;
    }

    public static GPUImageOpenGLESContext sharedImageProcessingOpenGLESContext()
    {
        if (instance == null)
        {
            instance = new GPUImageOpenGLESContext();
        }
        return instance;
    }

    public static void useImageProcessingContext()
    {
         EGLContext imageProcessingContext = GPUImageOpenGLESContext.sharedImageProcessingOpenGLESContext().context;
         if (EGLContext.getEGL() != imageProcessingContext)
         {
             // In Objective C, this call would be here:
             // [EAGLContext setCurrentContext:imageProcessingContext]

             // Cannot figure out how to handle this.  For now, throws an exception.
             throw new RuntimeException("useImageProcessingContext not equal to EGLContext");
         }

         return;
    }

    public static int maximumTextureSizeForThisDevice()
    {
        int[] maxTextureSize = new int[1];

        // TODO: See if you can use gl. without an activity
        //GL10 gl = new GL10();
        //EGL gl = EGLContext.getEGL();

        //gl.glGetIntegerv(GL10.GL_MAX_TEXTURE_SIZE, maxTextureSize, 0);

        return maxTextureSize[0];
    }

    public static int maximumTextureUnitsForThisDevice()
    {
        // TODO: Implement maximumTextureUnitsForThisDevice();
        return -1;
    }

    public static CGSize sizeThatFitsWithinATextureForSize(CGSize inputSize)
    {
        int maxTextureSize = maximumTextureSizeForThisDevice();

        if ((inputSize.width < maxTextureSize) && (inputSize.height < maxTextureSize))
        {
            return inputSize;
        }

        CGSize adjustedSize = new CGSize();
        if (inputSize.width > inputSize.height)
        {
            adjustedSize.width = (float)maxTextureSize;
            adjustedSize.height = ((float)maxTextureSize / inputSize.width) * inputSize.height;
        }
        else
        {
            adjustedSize.height = (float)maxTextureSize;
            adjustedSize.width = ((float)maxTextureSize / inputSize.height) * inputSize.width;
        }

        return adjustedSize;
    }

    public EGLContext getContext()
    {
        if (context == null)
        {
            // TODO: Implement getContext()
        }
    }

    public interface GPUImageInput
    {
        public void newFrameReadyAtTime(Time frameTime);
        public void setInputTextureAtIndex(int newInputTexture, int textureIndex);
        public int nextAvailableTextureIndex();
        public void setInputSizeAtIndex(CGSize newSize, int textureIndex);
        public void setInputRotationAtIndex(GPUImageRotationMode newInputRotation, int textureIndex);
        public CGSize maximumOutputSize();
        public void endProcessing();
        public boolean shouldIgnoreUpdatesToThisTarget();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T16:34:52.703

我意识到这是一篇旧帖子，但您的问题是您没有正确初始化 EGLContext。

通常，您希望使用 GLSurfaceView 或 TextureView 将您的 GL 内容实际包含在视图层次结构中。GLSurfaceView 将为您处理很多事情，例如正确创建 EGLContext 和管理渲染线程。TextureView 需要更多的手动工作。

通过这些方式中的任何一种获得上下文后，您可以使用：

```
GLES20.glGetIntegerv(GLES20.GL_MAX_TEXTURE_SIZE, size, 0); 
```

假设您已经绑定了 OpenGL ES 2.0 API。首先确保您已正确创建 EGLContext 并且可以执行 EGL 和 GLES 调用，然后您应该能够查询最大纹理大小。

您可以看到 Romain Guy 的关于使用 TextureView 的帖子，就像使用 GLSurfaceView 一样，可以在此处查看有关管理您自己的 EGLContext 的详细信息 ( [https://groups.google.com/d/msg/android-developers/U5RXFGpAHPE/IqHeIeGXhr0J](https://groups.google.com/d/msg/android-developers/U5RXFGpAHPE/IqHeIeGXhr0J) ) ：

> GLSurfaceView 为您处理 GL 设置，TextureView 不会这样做。创建 EGL 表面时，可以将 TextureView 用作本机窗口。这是一个示例（有趣的部分是对 eglCreateWindowSurface() 的调用）：

```
@Override
public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
    mRenderThread = new RenderThread(getResources(), surface);
    mRenderThread.start();
}

private static class RenderThread extends Thread {
    private static final String LOG_TAG = "GLTextureView";

    static final int EGL_CONTEXT_CLIENT_VERSION = 0x3098;
    static final int EGL_OPENGL_ES2_BIT = 4;

    private volatile boolean mFinished;

    private final Resources mResources;
    private final SurfaceTexture mSurface;

    private EGL10 mEgl;
    private EGLDisplay mEglDisplay;
    private EGLConfig mEglConfig;
    private EGLContext mEglContext;
    private EGLSurface mEglSurface;
    private GL mGL;

    RenderThread(Resources resources, SurfaceTexture surface) {
        mResources = resources;
        mSurface = surface;
    }

    private static final String sSimpleVS =
            "attribute vec4 position;\n" +
            "attribute vec2 texCoords;\n" +
            "varying vec2 outTexCoords;\n" +
            "\nvoid main(void) {\n" +
            "    outTexCoords = texCoords;\n" +
            "    gl_Position = position;\n" +
            "}\n\n";
    private static final String sSimpleFS =
            "precision mediump float;\n\n" +
            "varying vec2 outTexCoords;\n" +
            "uniform sampler2D texture;\n" +
            "\nvoid main(void) {\n" +
            "    gl_FragColor = texture2D(texture, outTexCoords);\n" +
            "}\n\n";

    private static final int FLOAT_SIZE_BYTES = 4;
    private static final int TRIANGLE_VERTICES_DATA_STRIDE_BYTES = 5 * FLOAT_SIZE_BYTES;
    private static final int TRIANGLE_VERTICES_DATA_POS_OFFSET = 0;
    private static final int TRIANGLE_VERTICES_DATA_UV_OFFSET = 3;
    private final float[] mTriangleVerticesData = {
            // X, Y, Z, U, V
            -1.0f, -1.0f, 0.0f, 0.0f, 0.0f,
             1.0f, -1.0f, 0.0f, 1.0f, 0.0f,
            -1.0f,  1.0f, 0.0f, 0.0f, 1.0f,
             1.0f,  1.0f, 0.0f, 1.0f, 1.0f,
    };

    @Override
    public void run() {
        initGL();

        FloatBuffer triangleVertices = ByteBuffer.allocateDirect(mTriangleVerticesData.length
                * FLOAT_SIZE_BYTES).order(ByteOrder.nativeOrder()).asFloatBuffer();
        triangleVertices.put(mTriangleVerticesData).position(0);

        int texture = loadTexture(R.drawable.large_photo);
        int program = buildProgram(sSimpleVS, sSimpleFS);

        int attribPosition = glGetAttribLocation(program, "position");
        checkGlError();

        int attribTexCoords = glGetAttribLocation(program, "texCoords");
        checkGlError();

        int uniformTexture = glGetUniformLocation(program, "texture");
        checkGlError();

        glBindTexture(GL_TEXTURE_2D, texture);
        checkGlError();

        glUseProgram(program);
        checkGlError();

        glEnableVertexAttribArray(attribPosition);
        checkGlError();

        glEnableVertexAttribArray(attribTexCoords);
        checkGlError();

        glUniform1i(uniformTexture, texture);
        checkGlError();

        while (!mFinished) {
            checkCurrent();

            glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
            checkGlError();

            glClear(GL_COLOR_BUFFER_BIT);
            checkGlError();

            // drawQuad
            triangleVertices.position(TRIANGLE_VERTICES_DATA_POS_OFFSET);
            glVertexAttribPointer(attribPosition, 3, GL_FLOAT, false,
                    TRIANGLE_VERTICES_DATA_STRIDE_BYTES, triangleVertices);

            triangleVertices.position(TRIANGLE_VERTICES_DATA_UV_OFFSET);
            glVertexAttribPointer(attribTexCoords, 3, GL_FLOAT, false,
                    TRIANGLE_VERTICES_DATA_STRIDE_BYTES, triangleVertices);

            glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

            if (!mEgl.eglSwapBuffers(mEglDisplay, mEglSurface)) {
                throw new RuntimeException("Cannot swap buffers");
            }
            checkEglError();

            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                // Ignore
            }
        }

        finishGL();
    }

    private int loadTexture(int resource) {
        int[] textures = new int[1];

        glActiveTexture(GL_TEXTURE0);
        glGenTextures(1, textures, 0);
        checkGlError();

        int texture = textures[0];
        glBindTexture(GL_TEXTURE_2D, texture);
        checkGlError();

        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

        Bitmap bitmap = BitmapFactory.decodeResource(mResources, resource);

        GLUtils.texImage2D(GL_TEXTURE_2D, 0, GL_RGBA, bitmap, GL_UNSIGNED_BYTE, 0);
        checkGlError();

        bitmap.recycle();

        return texture;
    }

    private int buildProgram(String vertex, String fragment) {
        int vertexShader = buildShader(vertex, GL_VERTEX_SHADER);
        if (vertexShader == 0) return 0;

        int fragmentShader = buildShader(fragment, GL_FRAGMENT_SHADER);
        if (fragmentShader == 0) return 0;

        int program = glCreateProgram();
        glAttachShader(program, vertexShader);
        checkGlError();

        glAttachShader(program, fragmentShader);
        checkGlError();

        glLinkProgram(program);
        checkGlError();

        int[] status = new int[1];
        glGetProgramiv(program, GL_LINK_STATUS, status, 0);
        if (status[0] != GL_TRUE) {
            String error = glGetProgramInfoLog(program);
            Log.d(LOG_TAG, "Error while linking program:\n" + error);
            glDeleteShader(vertexShader);
            glDeleteShader(fragmentShader);
            glDeleteProgram(program);
            return 0;
        }

        return program;
    }

    private int buildShader(String source, int type) {
        int shader = glCreateShader(type);

        glShaderSource(shader, source);
        checkGlError();

        glCompileShader(shader);
        checkGlError();

        int[] status = new int[1];
        glGetShaderiv(shader, GL_COMPILE_STATUS, status, 0);
        if (status[0] != GL_TRUE) {
            String error = glGetShaderInfoLog(shader);
            Log.d(LOG_TAG, "Error while compiling shader:\n" + error);
            glDeleteShader(shader);
            return 0;
        }

        return shader;
    }

    private void checkEglError() {
        int error = mEgl.eglGetError();
        if (error != EGL10.EGL_SUCCESS) {
            Log.w(LOG_TAG, "EGL error = 0x" + Integer.toHexString(error));
        }
    }

    private void checkGlError() {
        int error = glGetError();
        if (error != GL_NO_ERROR) {
            Log.w(LOG_TAG, "GL error = 0x" + Integer.toHexString(error));
        }
    }

    private void finishGL() {
        mEgl.eglDestroyContext(mEglDisplay, mEglContext);
        mEgl.eglDestroySurface(mEglDisplay, mEglSurface);
    }

    private void checkCurrent() {
        if (!mEglContext.equals(mEgl.eglGetCurrentContext()) ||
                !mEglSurface.equals(mEgl.eglGetCurrentSurface(EGL10.EGL_DRAW))) {
            if (!mEgl.eglMakeCurrent(mEglDisplay, mEglSurface, mEglSurface, mEglContext)) {
                throw new RuntimeException("eglMakeCurrent failed "
                        + GLUtils.getEGLErrorString(mEgl.eglGetError()));
            }
        }
    }

    private void initGL() {
        mEgl = (EGL10) EGLContext.getEGL();

        mEglDisplay = mEgl.eglGetDisplay(EGL10.EGL_DEFAULT_DISPLAY);
        if (mEglDisplay == EGL10.EGL_NO_DISPLAY) {
            throw new RuntimeException("eglGetDisplay failed "
                    + GLUtils.getEGLErrorString(mEgl.eglGetError()));
        }

        int[] version = new int[2];
        if (!mEgl.eglInitialize(mEglDisplay, version)) {
            throw new RuntimeException("eglInitialize failed " +
                    GLUtils.getEGLErrorString(mEgl.eglGetError()));
        }

        mEglConfig = chooseEglConfig();
        if (mEglConfig == null) {
            throw new RuntimeException("eglConfig not initialized");
        }

        mEglContext = createContext(mEgl, mEglDisplay, mEglConfig);

        mEglSurface = mEgl.eglCreateWindowSurface(mEglDisplay, mEglConfig, mSurface, null);

        if (mEglSurface == null || mEglSurface == EGL10.EGL_NO_SURFACE) {
            int error = mEgl.eglGetError();
            if (error == EGL10.EGL_BAD_NATIVE_WINDOW) {
                Log.e(LOG_TAG, "createWindowSurface returned EGL_BAD_NATIVE_WINDOW.");
                return;
            }
            throw new RuntimeException("createWindowSurface failed "
                    + GLUtils.getEGLErrorString(error));
        }

        if (!mEgl.eglMakeCurrent(mEglDisplay, mEglSurface, mEglSurface, mEglContext)) {
            throw new RuntimeException("eglMakeCurrent failed "
                    + GLUtils.getEGLErrorString(mEgl.eglGetError()));
        }

        mGL = mEglContext.getGL();
    }

    EGLContext createContext(EGL10 egl, EGLDisplay eglDisplay, EGLConfig eglConfig) {
        int[] attrib_list = { EGL_CONTEXT_CLIENT_VERSION, 2, EGL10.EGL_NONE };
        return egl.eglCreateContext(eglDisplay, eglConfig, EGL10.EGL_NO_CONTEXT, attrib_list);            
    }

    private EGLConfig chooseEglConfig() {
        int[] configsCount = new int[1];
        EGLConfig[] configs = new EGLConfig[1];
        int[] configSpec = getConfig();
        if (!mEgl.eglChooseConfig(mEglDisplay, configSpec, configs, 1, configsCount)) {
            throw new IllegalArgumentException("eglChooseConfig failed " +
                    GLUtils.getEGLErrorString(mEgl.eglGetError()));
        } else if (configsCount[0] > 0) {
            return configs[0];
        }
        return null;
    }

    private int[] getConfig() {
        return new int[] {
                EGL10.EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
                EGL10.EGL_RED_SIZE, 8,
                EGL10.EGL_GREEN_SIZE, 8,
                EGL10.EGL_BLUE_SIZE, 8,
                EGL10.EGL_ALPHA_SIZE, 8,
                EGL10.EGL_DEPTH_SIZE, 0,
                EGL10.EGL_STENCIL_SIZE, 0,
                EGL10.EGL_NONE
        };
    }

    void finish() {
        mFinished = true;
    }
} 
```

你也可以走 NDK 路线，这可能是从 Objective C 的更直接的过渡。

# shell - 带有简单标志的脚本

> ID：11442429
> 
> 赞同：0
> 
> 时间：2012-07-11T22:24:50.633
> 
> 标签：shell, arguments, flags

假设我有这个简单的脚本

```
#! /bin/sh

if [ $# -ne 2 ]
then
        echo "Usage: $0 arg1 arg2"
        exit 1
fi

head $1 $2

## But this is supposed to be:
## if -f flag is set, 
##      call [tail $1 $2]
## else if the flag is not set
##      call [head $1 $2] 
```

那么向我的脚本添加“标志”检查的最简单方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:31:14.123

```
fflag=no
for arg in "$@"
do
    test "$arg" = -f && fflag=yes
done

if test "$fflag" = yes
then
    tail "$1" "$2"
else
    head "$1" "$2"
fi 
```

这种更简单的方法也可能是可行的：

```
prog=head
for i in "$@"
do
    test "$i" = -f && prog=tail
done

$prog "$1" "$2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:32:41.813

在解析选项时，我通常会使用“case”语句：

```
case "$1" in
    -f) call=tail ; shift ;;
    *)  call=head ;;
esac

$call "$1" "$2" 
```

请记住引用位置参数。它们可能包含带空格的文件名或目录名。

如果您可以使用例如 bash 代替 Bourne shell，您可以使用例如 getopts 内置命令。有关更多信息，请参阅 bash 手册页。

# android - 将 android 项目组织到 subversion 存储库中的最佳方法

> ID：11442431
> 
> 赞同：0
> 
> 时间：2012-07-11T22:25:03.237
> 
> 标签：android, svn, version-control, repository

我正在学习Subversion，到目前为止我已经学到了一两件事，我刚刚创建了一个Google Code帐户和一个svn存储库来存储一个简单的项目，我的问题是如何组织我的svn存储库。想象一下，我刚刚创建了一个名为“Hello World”的 android 项目和他的名为“Hello World Test”的测试项目，是否应该将这两个项目都导入到我的存储库的主干中？将我的测试项目也放入存储库主干是否有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:54:27.063

### 在本地文件系统中：

Google 推荐的最佳方法是来自[Official Dev Guide](http://developer.android.com/tools/testing/testing_android.html#TestProjects)：

> 您可以在文件系统的任何位置创建测试项目，但最好的方法是添加测试项目，使其根目录 tests/ 与主应用程序项目的 src/ 目录处于同一级别。这可以帮助您找到与应用程序关联的测试。例如，如果您的应用程序项目的根目录是 MyProject，那么您应该使用以下目录结构：
> 
> ```
> MyProject/ 
>   AndroidManifest.xml
>   res/
>     ... (resources for main application)
>   src/
>     ... (source code for main application) ...
>   tests/
>     AndroidManifest.xml
>     res/
>       ... (resources for tests)
>     src/
>       ... (source code for tests) 
> ```

### 在 SVN 存储库中：

颠覆的全部意义在于团队合作，最好的方法无疑是使用trunk/tags/branches结构：

> ```
> https://svn/my-repo/
>   MyProject/
>     branches/
>       1.1.1-fork/
>         AndroidManifest.xml
>         res/
>         src/
>         tests/
>     tags/
>       version-1.0.0/
>         AndroidManifest.xml
>         res/
>         src/
>         tests/
>       version-1.1.0/
>     trunck/
>       AndroidManifest.xml
>       res/
>       src/
>       tests/
>         AndroidManifest.xml
>         res/
>         src/ 
> ```

我们通常如何使用它：

*   开发时，总是从trunk/.checkout/commit。
*   在每次发布之前，在 tags/ 下标记准备发布的代码（来自主干）。
*   如果同时与其他人一起工作（重大更改），请在分支/下分支代码副本（来自主干）并开始在您的分支上工作，完成后，将其合并回主干以供下一个版本。

根据我自己的经验，一组项目最有效和合理的结构（用于本地文件系统和版本控制系统）是[Maven 的 Multi-Module Project ，](http://maven.apache.org/pom.html#Aggregation)[在 GitHub 中](https://github.com/jayway/maven-android-plugin-samples/tree/master/libraryprojects)查看这个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:30:33.743

这完全取决于你。就个人而言，如果我也有一个测试项目，它们都会位于同一个文件夹下。

```
svn
  /HelloWorld
      /HelloWorld
      /HelloWorldTest 
```

这样，如果您有分支或标签，您也可以将它们保存在子文件夹中。

归根结底，它只是一个文件夹结构，例如您的主文件夹或“我的文档”，您可以根据需要组织（或缓解强迫症）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T22:37:46.197

至于我使用 Java 项目和 svn 的经验，我认为将业务类和测试类放在同一个项目中更有用，因为它们都是同一个项目的一部分。

# chef-infra - 如何声明内容依赖于说明书文件的 Chef 文件资源？

> ID：11442435
> 
> 赞同：3
> 
> 时间：2012-07-11T22:25:28.653
> 
> 标签：chef-infra

我需要一个`fileC`部署的文件，它是其他两个文件`fileA`和`fileB`. 在我当前的设置中，所有三个文件都在说明书中，声明为说明书文件资源。

但感觉是多余的。我想将更大的文件声明为另外两个文件的函数。

当`fileC`第一次需要时，我通过将文件资源的内容声明为`IO.read(file1) + IO.read(file2)`. 但是，一旦将配方部署到新节点，这就会失败，因为`fileA`并且`fileB`在编译时不存在。

我试图访问底层 Ruby 对象的信息，了解可以在何处部署说明书。但是我看的越多，我就越不相信我的 Chef/Ruby 知识水平是可能的。资源↔提供者的差距似乎太大了。

我想避免使用这种`cat fileA fileB >fileC`解决方案，原因如下：将来，我可能需要区分需要 C 的节点和需要 A/B 的节点。

关于如何解决冗余的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:09:18.713

如果您使用模板，我认为您可以摆脱它。例如

```
template "/var/tmp/fileC.txt" do
   source "fileC.erb"
   variables(:included_files => ["/var/tmp/file1.txt", "/var/tmp/file2.txt"])
end 
```

然后在你的模板中

```
<% @included_files.each { |file|  %>
<%= File.read(file) %>    
<% } %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:43:05.543

这是我的解决方案。不幸的是，它确实涉及“cat”命令，但是文件列表被抽象为一个可以使用属性设置或修改的列表：

```
files = ["foo", "bar"]    # Or retrieve from an attribute

execute "cat files" do
  command "cat #{files.map {|f| "/var/tmp/#{f} "}} > /var/tmp/foobar"
  action :nothing
end

files.each do |f|
  cookbook_file "/var/tmp/#{f}" do
    source f
    notifies :run, "execute[cat files]", :immediately
  end
end 
```

我很好奇这里的用例是什么。我的猜测是，对于不支持 conf.d 安排的服务，需要将两个配置片段混合在一起。

# scala - 无法映射到 HList

> ID：11442440
> 
> 赞同：7
> 
> 时间：2012-07-11T22:26:20.210
> 
> 标签：scala, type-systems, shapeless

我试图用无形来解决[这个问题。](https://stackoverflow.com/questions/11438277/update-operations-on-a-scala-case-class)但是由于某种原因，我无法在`HList`. 我会让代码自己说话。

```
import shapeless._
import HList._

case class Foo(a: Option[Int], b: Option[Int])

val a = Foo(Some(3), None)

val b = Foo(Some(22), Some(1))

implicit val fooIso = HListIso(Foo.apply _, Foo.unapply _)

val mapper = new (({ type O2[+A] = (Option[A], Option[A]) })#O2 ~> Option) {
  def apply[A](x: (Option[A], Option[A])): Option[A] = x._1.orElse(x._2)
}

fooIso.fromHList(fooIso.toHList(a).zip(fooIso.toHList(b)).map(mapper)) 
```

错误信息是：

```
<console>:55: error: could not find implicit value for parameter mapper: shapeless.Mapper[java.lang.Object with shapeless.~>[[+A](Option[A], Option[A]),Option],shapeless.::[(Option[Int], Option[Int]),shapeless.::[(Option[Int], Option[Int]),shapeless.HNil]]]
              fooIso.fromHList(fooIso.toHList(a).zip(fooIso.toHList(b)).map(mapper))
                                                                           ^ 
```

为什么映射不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T23:10:16.593

有一个简单的解决方法：只需将您的函数定义为 a`object`而不是 a `val`：

```
object f extends (({ type O2[+A] = (Option[A], Option[A]) })#O2 ~> Option) {
  def apply[A](x: (Option[A], Option[A])): Option[A] = x._1 orElse x._2
} 
```

（请注意，我已命名该函数`f`，而不是`mapper`避免与 . 的`mapper`隐式参数混淆`map`。）

我不确定我能帮助*解释为什么*——在某个时候，我试图弄清楚为什么`val`在 Shapeless 中这种东西不起作用的细节，我不记得我走了多远。

# facebook - 通过Id获取用户头像

> ID：11442442
> 
> 赞同：128
> 
> 时间：2012-07-11T22:26:26.903
> 
> 标签：facebook, facebook-graph-api

我现在正在开发一个主要基于 facebook graph api 的 web 应用程序。我持有一些关于用户的数据——实际上，可能是可用的公共数据——例如姓名和身份证。我也知道个人资料图片是公共数据的一部分，我想知道如何仅通过使用他的 id 才能直接链接到用户的个人资料图片？

提前致谢

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-07-11T22:31:36.760

[http://graph.facebook.com/"](http://graph.facebook.com/%22) + facebookId + "/picture?type=square 例如： [http ://graph.facebook.com/67563683055/picture?type=square](http://graph.facebook.com/67563683055/picture?type=square)

除了“方形”之外，还有更多的尺寸。请参阅[文档](https://developers.facebook.com/docs/graph-api/reference/v2.2/user/picture)。

**2020 年 9 月更新**
随着 Facebook 更新了他们的文档，这种方法在没有令牌的情况下不再有效。您需要附加某种`access_token`. [您可以在用户图片的图形 API](https://developers.facebook.com/docs/graph-api/reference/user/picture/)的 fb 文档中找到更多信息以及如何正确执行此操作

> 要求更改 此端点支持应用范围内的用户 ID (ASID)、用户 ID (UID) 和页面范围内的用户 ID (PSID)。目前您可以无要求地查询 ASID 和 UID。但是，从 2020 年 10 月 24 日开始，所有基于 UID 的查询都需要访问令牌。如果您查询 UID 并因此必须包含令牌：
> 
> 对 Facebook 登录身份验证的请求
> 使用用户访问令牌 对页面范围的请求使用页面
> 访问令牌 对服务器端请求
> 使用应用程序访问令牌 对移动或 Web 客户端请求使用客户端访问令牌

*fb docs的报价*

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2014-01-13T04:45:31.947

您可以使用以下网址获取不同大小的个人资料图片。请确保将 Facebook id 添加到 url。

**大尺寸照片** [https://graph.facebook.com/](https://graph.facebook.com/) {facebookId}/picture?type=large

**中等尺寸照片** [https://graph.facebook.com/](https://graph.facebook.com/) {facebookId}/picture?type=normal

**小尺寸照片** [https://graph.facebook.com/](https://graph.facebook.com/) {facebookId}/picture?type=small

**方形照片** [https://graph.facebook.com/](https://graph.facebook.com/) {facebookId}/picture?type=square

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-01-16T12:59:02.133

获得最大尺寸的图像

```
https://graph.facebook.com/{userID}?fields=picture.width(720).height(720) 
```

或您需要的任何其他尺寸。根据经验， type=large 并不是您可以获得的最大结果。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-07-11T22:32:10.880

来自[Graph API 文档](https://developers.facebook.com/docs/graph-api/reference/user/picture/)。

*   `/OBJECT_ID/picture`返回到对象图片的重定向（在这种情况下是用户）
*   `/OBJECT_ID/?fields=picture`返回图片的 URL

例子：

`<img src="https://graph.facebook.com/4/picture"/>`使用 HTTP 301 重定向到 Zuck 的个人资料图片

`https://graph.facebook.com/4?fields=picture`返回 URL 本身

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-04-20T07:43:01.070

这将是有用的链接：

[](http://graph.facebook.com/893914824028397/picture?type=large&redirect=true&width=500&height=500)[http://graph.facebook.com/893914824028397/picture?type=large&redirect=true&width=500&height=500](http://graph.facebook.com/893914824028397/picture?type=large&redirect=true&width=500&height=500)

您可以根据需要设置高度和宽度

**893914824028397**是**facebookid**

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2020-09-26T03:35:49.497

**2020 年 9 月更新**

Facebook 有新的要求变更：所有基于 UID 的查询都需要访问令牌

因此，您必须将您的应用访问令牌添加到 url：

```
https://graph.facebook.com/{profile_id}/picture?type=large&access_token={app_access_token} 
```

要让您`app_access_token`使用以下网址：

```
https://graph.facebook.com/oauth/access_token?client_id={your-app-id}&client_secret={your-app-secret}&grant_type=client_credentials 
```

您可以在 Facebook 开发人员的 Facebook 应用程序的基本设置中`your-app-id`找到`your-app-secret`

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-05-17T16:42:11.610

[https://www.avatars.io/](https://www.avatars.io/)

它是一个 API，当为各种社交网络（包括 Twitter、Facebook、Instagram 和 gravatar）提供用户名时，它会返回个人资料图像。它具有适用于 iOS、Android、Ruby、Node、PHP、Python 和 JavaScript 的库。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-07-04T15:06:10.540

您可以使用此网址获得它：您将获得高清图片（最大尺寸）

```
https://graph.facebook.com/{userID}?fields=picture.width(720).height(720)&redirect=false 
```

不要忘记 **redirect=false**，否则会返回错误

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-18T09:21:41.853

在 img 标签的 src 中使用 url 作为：https://graph.facebook.com/user_id **/** picture?type=square。类型可能**小，大。**

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-12T00:28:50.860

您可以为此使用 AngularJs，它的双向数据绑定功能将以最少的工作量和更少的代码获得解决方案。

`<div> <input type="text" name="" ng-model="fbid"><br/> <img src="https://graph.facebook.com/{{fbid}}/picture?type=normal"> </div>`

我希望这能回答您的问题。注意：您也可以使用其他库。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-04-17T16:11:05.190

通过[Javascript SDK (v2.12 - April, 2017)，](https://developers.facebook.com/docs/graph-api/reference/v2.2/user/picture)您可以通过以下方式获取图片请求的详细信息：

```
FB.api("/" + uid + "/picture?redirect=0", function (response) {
  console.log(response);

  // prints the following:
  //data: {
  //  height: 50
  //  is_silhouette: false
  //  url: "https://lookaside.facebook.com/platform/profilepic/?asid=…&amp;height=50&width=50&ext=…&amp;hash…"
  //  width: 50
  //}

  if (response && !response.error) {
    // change the src attribute of img elements
    [...document.getElementsByClassName('fb-user-img')].forEach(
      i => i.src = response.data.url
    );

    // OR redirect to the URL above
    location.assign(response.data.url);
  }
}); 
```

为了获取 JSON 响应，`redirect`使用**0**（零）作为值的参数很重要，因为默认情况下请求重定向到图像。您仍然可以在同一 URL 中添加其他参数。例子：

*   `"/" + uid + "/picture?redirect=0&width=100&height=100"`：将返回一个 100x100 的图像；
*   `"/" + uid + "/picture?redirect=0&type=large"`：返回一个 200x200 的图像。其他可能的类型值包括：*small*、*normal*、*album*和*square*。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-02-20T14:58:54.657

根据当前最新的 Facebook API 版本 3.2，对于用户，您可以使用此通用方法获取个人资料图片[https://graph.facebook.com/v3.2/{user-id}/picture?type=square](https://graph.facebook.com/v3.2/%7Buser-id%7D/picture?type=square)您可以[在此处](https://developers.facebook.com/docs/graph-api/reference/v3.2/user/picture)访问用户图片的文档。URL 中 type 参数的可能值可以是 small、normal、album、large、square

对于 Groups 和[Pages](https://developers.facebook.com/docs/graph-api/reference/v3.2/page/picture)，个人资料图片不直接可用。您必须使用访问令牌获取它们。对于组，您必须使用用户访问令牌，对于页面，您可以同时使用用户访问令牌和页面访问令牌。

您可以使用通用 URL 获取群组或页面的个人资料图片：[https ://graph.facebook.com/v3.2/{user-id}/picture?access_token={access-token}&type=square](https://graph.facebook.com/v3.2/%7Buser-id%7D/picture?access_token=%7Baccess-token%7D&type=square)

我希望这对正在寻找页面或组个人资料图片的人有所帮助。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-10-29T05:31:34.920

只需按照以下网址

[https://graph.facebook.com/facebook_user_id/picture?type=square](https://graph.facebook.com/facebook_user_id/picture?type=square)

**类型**可能是正常，小，中，大。或正方形（如果您想获得正方形图片，正方形大小限制为 50x50）。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-09-22T12:51:10.290

今天我发现了一个问题，个人资料图片返回了默认的个人资料图片，因为Facebook对所有基于 UID 的查询的[新要求](https://developers.facebook.com/docs/graph-api/reference/user/picture/)`&access_token=[apptoken]`，所以只需添加到 url，您可以[从这里获取您的应用程序令牌](https://developers.facebook.com/tools/explorer/?method=GET&path=%7Bid%7D%2Fpicture&version=v8.0)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-19T07:02:15.313

您可以使用以下端点获取 image.jfif 而不是 jpg：

```
https://graph.facebook.com/v3.2/{user-id}/picture 
```

请注意，您将无法看到图像，只能下载它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-07-02T03:30:58.527

**2021 年 7 月更新**

On top of answer by @EddyG, turned out that if you still not able to fetch the profile picture with app access token, the FB account must "allow" the FB app first then you should be able to fetch the profile picture with FB app access token.

# ruby-on-rails - Ruby on Rails - 导入 CSV 文件

> ID：11442450
> 
> 赞同：0
> 
> 时间：2012-07-11T22:27:10.183
> 
> 标签：ruby-on-rails, ruby

我正在关注本教程[CSV-FILE-EXPORT-IMPORT-RAILS](http://www.funonrails.com/2012/01/csv-file-importexport-in-rails-3.html)但我做错了，因为当我尝试创建对象**未初始化常量 CuentaContablesController::False**时出现了一个愚蠢的错误。我可以毫无问题地读取文件，但是这个错误让我很头疼！任何帮助将不胜感激！

我的控制器（cuenta_contable_controller.rb）中的导入方法如下所示；

```
class CuentaContablesController < ApplicationController    
....
def upload(params)
logger.info "**File loaded***"
infile = params[:file].read
n, errs = 0, []
@archivo = []
SV.parse(infile) do |row|
      n += 1
      # SKIP: header i.e. first row OR blank row
      next if n == 1 or row.join.blank?
      cuenta_contable = CuentaContable.build_from_csv(row)
      if cuenta_contable.valid?
        cuenta_contable.save
        @archivo << row
      else
        errs << row
      end
    end
    logger.info errs
    flash[:success] = "Las cuentas contables fueron cargadas." 

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @archivo }
    end
  end 
```

我的模型（cuenta_contable.rb）像这样

```
class CuentaContable < ActiveRecord::Base
....
def self.build_from_csv(row)
     ultimo_nivel = (row[5].downcase=="si") ? (True):(False)
     #cuenta = find_or_initialize_by_cuenta("#{row[0]}-#{row[1]}-#{row[2]}")
     # Buscas el archivo existing customer from email or create new
    cuenta = CuentaContable.new(:cuenta => "#{row[0]}-#{row[1]}-#{row[2]}",
                                :descripcion => "#{row[3].titleize}",
                                :categoria_cuenta => "#{row[4].titleize}",
                                :ultimo_nivel=> ultimo_nivel)
    return cuenta
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:34:14.710

您正在使用`True`而不是`true`（同样 for `false`）。

但两者都不是必需的；三元是多余的和过度的括号：

```
# Ick!
ultimo_nivel = (row[5].downcase=="si") ? (True):(False)

# Pretty!
ultimo_nivel = row[5].downcase == "si" 
```

您甚至可以使用帮助程序将第 5 行转换为布尔值并将其从主线代码中删除。

# oauth - 使用 oauth2 获取 gmail

> ID：11442451
> 
> 赞同：0
> 
> 时间：2012-07-11T22:27:10.733
> 
> 标签：oauth, oauth-2.0, gmail-imap

我正在为我的应用程序进行 oauth 身份验证，并计划使用 Oauth2。有人可以判断 Gmail 是否支持通过 Oauth2 访问令牌获取收件箱。我看到可以通过 Oauth1 令牌执行此操作，但我发现 Google 现在已弃用 Oauth1 支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:13:16.440

不，现在只有 OAuth 1.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:18:23.570

这是一个使用其 XOAUTH2 协议从 Google 获取电子邮件的有效 Ruby 示例：

```
imap = Net::IMAP.new('imap.gmail.com', 993, usessl = true, certs = nil, verify = false)
imap.authenticate('XOAUTH2', 'example@gmail.com', 'oauth2_access_token_goes_here')
imap.select('INBOX')
imap.search(['ALL']).each do |message_id|

    msg = imap.fetch(message_id,'RFC822')[0].attr['RFC822']
    mail = Mail.read_from_string msg

    puts mail.subject
    puts mail.text_part.body.to_s
    puts mail.html_part.body.to_s

end 
```

注意：此示例使用[ruby`mail`](https://github.com/mikel/mail)​​ gem 和[`gmail_xoauth`](https://github.com/nfo/gmail_xoauth)gem，因此您需要安装它们才能使此代码示例正常工作。

此外，此示例中未显示检索 OAuth2 访问令牌。[这是一个使用 ruby​​ OmniAuth gem 的示例。](https://stackoverflow.com/a/12850157/48523)

# magento - Magento 1.6.2.0 - 管理员和前端调用 https URL 不正确

> ID：11442459
> 
> 赞同：1
> 
> 时间：2012-07-11T22:27:57.920
> 
> 标签：magento, magento-1.6

我最近从我的托管服务器下载了一个站点到我的本地主机。我已经在 localhost 上设置了所有内容以使用本地数据库，但是当我运行前端时，图像文件不会加载，因为 Magento 正在寻找它们`https://`而不是`http://`，整个后端也是如此。页面在后端加载，但也没有应用样式，因为 Magento 在`https://`. 我没有运行**secure_url**，只有**unsecure_url**在后端和前端运行。

这是 Web Inspector 的屏幕截图。

![截屏](../Images/5cb3b2795e6090c7e26e396c06ab60be.png)

我怎样才能解决这个问题？

// 编辑

好吧，我的后端一团糟，这里是 Config->Web 部分的屏幕截图，特别是 URL：

![在此处输入图像描述](../Images/5dd26a0d436d09c17d74223295ef3183.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:11:37.877

如果您还没有这样做，那么清除 var/cache 总是一个好主意。你的 base_url 上也有斜杠吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:16:10.413

如果您已经清空了您的`var/cache`文件夹，那么您的问题还有另一个可能的来源。转到`System/Developer/`并禁用`Javascript Settings/Merge JavaScript Files`和`CSS Settings/Merge CSS Files`。然后转到`System/Cache`并按下`Flush JavaScript/CSS Cache`按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:47:47.807

如果 .htaccess 或 httpd.conf 中没有重定向 HTTP->HTTPS 的重定向规则，
您还可以检查 Magento 中的配置：

```
Magento Admin area: Menu -> System -> Configuration -> Web 
```

在那里，您也可以配置安全/非安全连接

# build - 是否可以在特定代理上运行 TFS 构建活动？

> ID：11442460
> 
> 赞同：1
> 
> 时间：2012-07-11T22:28:06.777
> 
> 标签：build, tfs, tfsbuild, build-agent

我们使用的是 TFS 2010，我们需要运行一个单独的 EXE 来执行我们旧的 VB6 构建脚本。我们有 3 个构建代理分布在 2 台机器上，但只有一台机器上有 VB6 开发环境（以及旧的构建脚本），因此只有一个代理可以完成这项工作。我知道如何在我们的构建模板文件中使用构建活动来做到这一点，但是因为我们在 2 台不同的机器上有 3 个构建代理，我的问题是如何确保这个活动只在一个包含 VB6 的构建代理上运行开发环境？

我意识到这会造成瓶颈，但现在只是暂时的。如果我可以在不为自定义活动创建自定义 DLL 的情况下做到这一点，那将是理想的。此外，我了解通过标记我可以为这项工作创建不同的构建定义，但同样，这并不理想......我想要一个在一个代理上运行它的构建工作流，但之后的其余活动继续在各自的构建上代理。

编辑：上述所有内容，如果可以将 2 个构建定义链接在一起（VB6 构建定义运行，然后是“常规”构建定义），如果可能的话，这将是一个可接受的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:39:17.257

您当然可以使用开箱即用的 RunWorkflow 和 WaitForWorkflow 活动将 2 个构建定义链接在一起（如果您查看 LabDefaultTemplate 它会这样做）。

一个更优雅的解决方案是在一个工作流中使用 AgentScope 活动来分离需要在不同特定代理上运行的工作流部分。如果您查看 DefaultTemplate，其中大部分都包含在单个 AgentScope 活动（标记为 Run On Agent）中，但您可以将其拆分为按顺序调用的几个 AgentScope 活动（或如果可能，并行调用）。

# php - 将 wsdl 中的任何模式元素与 PHP SoapServer 一起使用

> ID：11442463
> 
> 赞同：1
> 
> 时间：2012-07-11T22:28:27.597
> 
> 标签：php, xsd, wsdl, soapserver

我似乎无法使用 PHP SoapServer 让 XSD 元素在我的 wsdl 中工作。根据我所阅读的所有内容，并了解其他几家公司如何实现“松散类型”wsdls。以下内容应该足以检索和发送记录信息。

```
<complexType name="Record">
    <sequence>
        <any namespace="##targetNamespace" minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
    </sequence>
</complexType> 
```

不幸的是，似乎 php SoapServer 类丢弃了任何未严格定义的元素。我得到的是创建请求上的空记录并在检索/过滤请求上发送空记录，尽管在 SoapServer 处理之前这些字段显然就在那里。

如果我像这样专门定义缺少的字段...

```
<complexType name="Record">
    <sequence>
        <element name="FirstName" type="xsd:string" minOccurs="0"/>
        <element name="LastName" type="xsd:string" minOccurs="0"/>
        <any namespace="##targetNamespace" minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
    </sequence>
</complexType> 
```

那么一切都很好，这些字段会传递给客户端/从客户端传递。我错过了什么吗？我已经尝试了所有命名空间选项##any、##local 等以及 processContents 选项。我只想能够发送/返回记录的额外字段，无论它们是否在模式中详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T13:30:33.787

您需要在传递给肥皂响应的返回对象中使用 SoapVar 对象。在您的情况下，返回的对象应该看起来像这样。

```
$recordObject = new stdClass;
$recordObject->prop1 = 'prop1';
$recordObject->prop2 = 'prop2';

$soapReturnObject = new SoapVar($recordObject, SOAP_ENC_OBJECT); 
```

另请参阅：[SOAP：返回 xsd 数组：PHP 中的任何元素](https://stackoverflow.com/questions/13836242/soap-returning-an-array-of-xsdany-elements-in-php/23013813#23013813)

# jquery - Jquery：从字符串中剥离所有特定的 HTML 标记

> ID：11442464
> 
> 赞同：7
> 
> 时间：2012-07-11T22:28:28.483
> 
> 标签：jquery

我有一个包含一串文本和 html 标签的变量，例如：

```
var temp = "<div>Some text</div><p>More text<span>here</span></p><p>Even more</p>"; 
```

我想删除某种类型的所有标签。让我们以 all`p`和`span`标签为例。

这是我能想到的最好的：

```
var temp = "<div>Some text</div><p>More text<span>here</span></p><p>Even more</p>";
var $temp = $(temp);
$("p", $temp).replaceWith("foo");
alert($temp.html());  //returns "Some text" 
```

我能找到的最接近的回答是 Nick Craver 的回答：[使用 jquery 从字符串中剥离跨度标签](https://stackoverflow.com/questions/3797385/strip-span-tags-from-string-with-jquery)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T22:49:45.760

演示：http: [//jsfiddle.net/VwTHF/1/](http://jsfiddle.net/VwTHF/1/)

```
$('span, p').contents().unwrap(); 
```

[`.contents()`](http://api.jquery.com/contents/)将获取每个此类标签中的元素和文本，[`.unwrap`](http://api.jquery.com/unwrap/)并将删除包装每个内容部分的元素。

根据您当前的方法，它看起来像这样：

```
var temp = "<div>Some text</div><p>More text<span>here</span></p><p>Even more</p>";
var $temp = $(temp);
$temp.find('span, p').contents().unwrap().end().end(); 
```

如果要继续定位原始对象，则必须使用`.end()`清除过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T22:33:05.777

您可以尝试[jquery 插件 HTML Clean](http://code.google.com/p/jquery-clean/)。在他们提供的示例中：

```
$.htmlClean("<H1 class=\"header\"><P>Nested P Test</H1>", {format:true});

=> 
<h1>
        Nested P Test
</h1> 
```

您可以替换特定的标签，`{removeTags:[p]}`它仍然会呈现内容而不是标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T19:25:10.417

我必须做类似的事情：阻止文本块包含除`<b>`,`<i>`或之外的任何 HTML 标记`<u>`。这个问题和其他几个问题指向我自己的功能：

```
function cleanNonFormattingTags(htmlContents) {
    if (htmlContents && htmlContents.length) {
        var result = '';
        htmlContents.each(function () {
            var $child = $(this), type = $child.prop('tagName'), isTextNode = this.nodeName == "#text";
            if (isTextNode) {
                result += this.textContent;
            }
            else if (type == 'B' || type == 'U' || type == 'I' || type == 'BR') { // Allow only these types of tags
                var innerContent = cleanNonFormattingTags($child.contents());
                var $newTag = $(document.createElement(type)).html(innerContent);
                result += $newTag[0].outerHTML;
            }
            else {
                result += cleanNonFormattingTags($child.contents());
            }
        });
        return result;
    }
    return htmlContents.text();
} 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-12T18:38:10.927

我会跟进@nbrooks，因为他的答案非常接近你想要的，但不完全是。@nbrooks 通过指出 html() 为您提供了包装在标签中的数据，从而找到了解决方案。因此，解决方案是将 HTML 包装在标签中。这应该为您解决问题：

```
var temp = "<div>Some text</div><p>More text<span>here</span></p><p>Even more</p>";
$("<span>" + temp + "</span>").find('span,p').
  contents().unwrap().end().end().html()` 
```

有关示例，请参见[http://jsfiddle.net/18u5Ld9g/1/ 。](http://jsfiddle.net/18u5Ld9g/1/)

作为更一般的功能：

```
function stripTags(html, tags) {
  // Tags must be given in CSS selector format
  return $("<span>" + html + "</span>").find(tags).
    contents().unwrap().end().end().html();
} 
```

# url - web2py URL 助手没有构建好的 URL

> ID：11442466
> 
> 赞同：1
> 
> 时间：2012-07-11T22:28:37.280
> 
> 标签：url, web2py, view-helpers

我从 web2py 开始，我需要在我的视图文件中链接我的静态文件。

我正在尝试使用 URL() 助手来制作链接，但我无法正常工作......

我的应用程序被称为红色，我的控制器默认和我的功能索引。我的视图称为 index.html 并且位于默认文件夹中，当我转到该页面时，我正确地看到了视图，但我的 URL 都是错误的......

到目前为止，我尝试过：

```
URL('static', 'css/bootstrap.min.css') 
```

回馈：“/static/css/bootstartp.css”

```
URL(a=request.application, args='static/css/bootstrap.css') 
```

它给出了：“/default/red/static/css/bootstrap.min.css”

```
URL(r=request, arg='static/css/bootstrap.min.css') 
```

它给出了：“/index/static/css/bootstrap.min.css”

```
URL('static/css/bootstrap.min.css') 
```

它给出了：“/default/static/css/bootstrap.min.css”

```
URL(a=request.application, c='static/css/bootstrap.min.css', f='') 
```

它给出了：“/red/red/static/css/bootstrap.min.css”

我可能尝试了更多但没有成功...

我的索引函数只返回 dict()。

还有我的路由器：

```
routers = dict(

    # base router
    BASE = dict(
        applications = ['red', 'admin'],
        default_application = 'red',
        default_controller = 'default',
        default_function = 'index',
        map_static = True
    )
) 
```

我认为说我正在谷歌应用引擎上测试它也很重要。

我想得到“/red/static/css/bootstrap.min.css”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:27:05.110

我希望你想在你的视图中链接 css 文件。你可以通过两种方式做到这一点。

1.在控制器文件中（在 index() 中:)

```
response.files.append(URL(request.application,'static/css','bootstrap.min.css')) 
```

您也可以在视图 (index.html) 中使用相同的命令：

```
{{response.files.append(URL(request.application,'static/css','bootstrap.min.css'))}} 
```

2.在视图（index.html）中你可以提到正常的css链接。

```
<LINK rel="stylesheet" type="text/css" href="{{=URL('static/css','bootstrap.min.css')}}"> 
```

如果您想为整个应用程序链接此文件。然后在 layout.html 页面中提及上述行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:16:13.477

我找到了解决方案。

```
URL('static', 'css/bootstrap.min.css') 
```

这行是正确的，但是我需要在路由器文件中关闭 map_static。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T21:08:37.627

要获得*“/red/static/css/bootstrap.min.css”*：

```
URL('red/static', 'css/bootstrap.min.css') 
```

# java - JAVA 中的 JSON 对象错误

> ID：11442467
> 
> 赞同：-1
> 
> 时间：2012-07-11T22:28:37.623
> 
> 标签：java, playframework, fbconnect

嘿，我正在按照[此处](http://www.playframework.org/modules/fbconnect-0.4/home)的 fbconnect 模块教程使用 Facebook 功能实现登录

我的用户模型中有此操作

```
public static void facebookOAuthCallback(JsonObject data){
 String email = data.get("email").getAsString();
 User user = findByEmail(email);
if(user == null){
    user = new User();
    user.email = email;
    user.insert();
}
Session.current().put("user", user.email);
} 
```

我得到这个错误。我需要导入一些东西吗？ **无法编译文件 /app/models/User.java。引发的错误是：无法将 JsonObject 解析为类型**

有任何想法吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:12:54.100

看起来好像缺少很多导入。最简单的解决方案是使用像 IntelliJ 这样的 IDE，它具有 playframework 源文件 (/framework/src)。

如果您不能这样做，请尝试查找您遇到的每个问题，并搜索您需要的相关导入。

从您上一条评论来看，`Session`实际上是 Http 的内部类，因此您需要导入`play.mvc.Http`.

# python - 组合多个正则表达式替换

> ID：11442470
> 
> 赞同：8
> 
> 时间：2012-07-11T22:28:48.210
> 
> 标签：python, regex

我正在尝试使用正则表达式从文本块中删除一些内容。我已经准备好所有模式，但我似乎无法删除两个（或更多）重叠的部分。

例如：

```
import re

r1 = r'I am'
r2 = r'am foo'

text = 'I am foo'

re.sub(r1, '', text)   # Returns ' foo'
re.sub(r2, '', text)   # Returns 'I ' 
```

如何同时替换这两个事件并以空字符串结尾？

* * *

我最终使用了[Ned Batchelder 答案](https://stackoverflow.com/a/11442587/464744)的略微修改版本：

```
def clean(self, text):
  mask = bytearray(len(text))

  for pattern in patterns:
    for match in re.finditer(pattern, text):
      r = range(match.start(), match.end())

      mask[r] = 'x' * len(r)

  return ''.join(character for character, bit in zip(text, mask) if not bit) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T22:39:55.417

`re.sub`正如你所展示的，你不能用连续的电话来做到这一点。您可以使用`re.finditer`来找到它们。每个匹配都会为您提供一个匹配对象，该对象具有指示其位置的属性`.start`。`.end`您可以将所有这些收集在一起，然后在最后删除字符。

这里我使用 a`bytearray`作为可变字符串，用作掩码。它被初始化为零字节，并且我用“x”标记与任何正则表达式匹配的所有字节。然后我使用位掩码选择要保留在原始字符串中的字符，并构建一个仅包含不匹配字符的新字符串：

```
bits = bytearray(len(text))
for pat in patterns:
    for m in re.finditer(pat, text):
        bits[m.start():m.end()] = 'x' * (m.end()-m.start())
new_string = ''.join(c for c,bit in zip(text, bits) if not bit) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T22:39:13.397

不要沮丧，但简短的回答是我很确定**你不能。**你能改变你的正则表达式，使它不需要重叠吗？

如果您仍然想这样做，我会尝试跟踪在原始字符串上进行的每个匹配的**开始和停止索引。**然后遍历字符串，只保留不在任何删除范围内的字符？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T09:54:42.813

一种非常有效的解决方案来自... Perl 将正则表达式组合为一个：

```
# aptitude install regexp-assemble
$ regexp-assemble 
I am
I am foo
Ctrl + D
I am(?: foo)? 
```

regexp-assemble 获取您想要匹配的正则表达式或字符串的所有变体，然后将它们组合成一个。是的，它将最初的问题改变为另一个问题，因为它不再是匹配重叠的正则表达式，而是结合正则表达式进行匹配

然后你可以在你的代码中使用它：

```
$ python
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> re.sub("I am foo","I am(?: foo)?","")
'' 
```

在 python 中移植 Regexp::Assemble 会很好:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T13:58:06.327

`itertools.compress`这是使用选择器迭代器在文本上动态过滤字符串的替代方法。`True`如果应该保留字符，则选择器返回。`selector_for_patterns`为每个模式创建一个选择器。选择器与 all 函数结合（仅当所有模式都想保留一个字符时，它应该在结果字符串中）。

```
import itertools
import re

def selector_for_pattern(text, pattern):
    i = 0
    for m in re.finditer(pattern, text):
        for _ in xrange(i, m.start()):
            yield True
        for _ in xrange(m.start(), m.end()):
            yield False
        i = m.end()
    for _ in xrange(i, len(text)):
        yield True

def clean(text, patterns):
    gen = [selector_for_pattern(text, pattern) for pattern in patterns]
    selector = itertools.imap(all, itertools.izip(* gen))
    return "".join(itertools.compress(text, selector)) 
```

# java - 使用 Java 按一个键

> ID：11442471
> 
> 赞同：13
> 
> 时间：2012-07-11T22:28:53.560
> 
> 标签：java

我想知道是否可以用 Java 按键。不太清楚如何解决这个问题。必须有某种类型的类，例如 sendKeyPress(); 或者其他的东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-11T22:31:26.823

您可以在课堂上轻松完成[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)。这实际上只是按下按钮，没有特殊的目标或任何东西。

例如，要按`Enter`：

```
Robot r = new Robot();
r.keyPress(KeyEvent.VK_ENTER);
r.keyRelease(KeyEvent.VK_ENTER); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T07:40:56.960

```
Action act = new Action(driver);
act.sendkeys(Keys.ENTER).build().perform(); 
```

# javascript - 通过 javascript 在模型中设置一个值

> ID：11442473
> 
> 赞同：0
> 
> 时间：2012-07-11T22:29:13.177
> 
> 标签：javascript, asp.net-mvc, model

我有这个代码：

```
public class AccountModel
{
    [Required]
    [Display(Name = "Subscription ID")]
    public string SubscriptionId { get; set; }

    [Required]
    [Display(Name = "Storage Name")]
    public string StorageName { get; set; }

    [Required]
    [Display(Name = "Storage Key")]
    public string StorageKey { get; set; }

    [Required]
    [Display(Name = "Hosted Name")]
    public string HostedName { get; set; }
....
} 
```

和...

```
$('a.sign-in').live('click', function () {
            alert("BINGO!");

            var id = document.getElementById('id').value;
            var name = document.getElementById('name').value;
            var key = document.getElementById('key').value;
            var select = document.getElementById("listahosted");
            var selected = select.options[select.selectedIndex].text;
...
} 
```

我只想在我的模型上设置一个值 -> 将“选定”值放入模型 m.HostedName 我该怎么做？

问候

用我的观点更新

我的观点

```
@model WebManager.Models.AccountModel
@{
    ViewBag.Title = "Account";
}

<h2>Account</h2>
<p>
Please enter your Azure account details.
</p>

@Html.ValidationSummary(true, "Invalid account. Please correct the errors and try again.")

@using (Html.BeginForm())
{
<div>
    <fieldset>
        <legend>Account Information</legend>

        <div class="editor-label">
            @Html.LabelFor(m => m.SubscriptionId)
        </div>
       <div class="editor-field">
            @Html.TextBoxFor(m => m.SubscriptionId, new { id = "id"})
            @Html.ValidationMessageFor(m => m.SubscriptionId)
        </div>
        <div class="editor-label">
            @Html.LabelFor(m => m.StorageName)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.StorageName, new { id = "name" })
            @Html.ValidationMessageFor(m => m.StorageName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(m => m.StorageKey)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.StorageKey, new { id = "key" })
            @Html.ValidationMessageFor(m => m.StorageKey)
        </div>

        <p>
            <a href="#login-box" class="login-window">
                <input type="submit" value="Apply" /></a>
        </p>
    </fieldset>
</div>

<div id="login-box" class="login-popup">
    <!--a href="#" class="close"><img src="close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a-->
    <form method="post" class="signin" action="#">
    <fieldset class="textbox">
        <label class="hostedservice">
            <span>Hosted Service</span>
            <br />
            <select id='listahosted' name='listahosted'>
            <option>Choose your hosted</option>
            </select>
        </label>
        <br />
        <label class="deployments">
            <span>Role</span>
            <br />
            <select id='listadeployments' name='listadeployments'>
            <option>Choose your role</option>
            </select>
        </label>
        <br />
        <a class="sign-in">
        <input type="submit" value="Sign In" /></a>
    </fieldset>
    </form>
</div> 
```

我没有把javascript放在这里。

情况是：我有一个由 JS 填充的组合框，我需要将选定的值放在我的模型上。

感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:52:02.873

我注意到的第一件事是您将`submit`字段放入`a`标签中。你不应该这样做。我只会使用`button`带有`type="submit"`.

`input`或`select`元素的名称必须与模型中的属性名称匹配。在这种情况下`listahosted`需要`HostedName`。`HtmlHelper`使用for 选择列表可能更容易。这样，如果您更改模型中的属性名称，您的视图将至少 YSOD 而不是丢失错误。

因此，如果您希望这一切都是 ajax，请执行以下操作：

```
// You should use a button element instead of anchor but anchor will work...
$('a.sign-in').live('click', function (e) {
    e.preventDefault();
    var form = $("form");            
    $.ajax({
        url : form.attr('action'),
        data : form.serialize(),
        success : function(data) {
            // do whatever you need to here
        }
    });
});​ 
```

# ruby-on-rails-3 - 在编辑提案控制器上获得无路由匹配

> ID：11442475
> 
> 赞同：1
> 
> 时间：2012-07-11T22:29:22.767
> 
> 标签：ruby-on-rails-3

这是我在视图中的代码，只是调用了编辑提案路径

`<%= link_to "Edit this Proposal", edit_idea_proposal_path %>`

这是我在提案控制器中的代码。我显然有一个“编辑”操作，那么为什么它会给我一个编辑路径错误？

```
def create
    @idea = Idea.find(params[:idea_id])
    @proposal = @idea.proposals.create(params[:proposal])

    if @proposal.save
        flash[:success] = "Thanks for the Proposal!"
        redirect_to idea_proposals_url(@idea)
    else
        render 'new'
    end
end 

def edit
    @idea = Idea.find(params[:idea_id])
    @proposal = @idea.proposals.find(params[:id])
end

def update
    @idea = Idea.find(params[:idea_id])
    @proposal = @idea.proposals.find(params[:id])

    if @proposal.update_attributes(params[:proposal])
        redirect_to idea_proposals_url(@idea)
    else
        render 'edit'
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:55:40.763

想通了，我需要在我的视图中更改代码：

```
<%= link_to "Edit this Proposal", edit_idea_proposal_path %> 
```

到：

```
<%= link_to "Edit this Proposal", edit_idea_proposal_path(@idea, proposal) %> 
```

# python - 多处理：在某些情况下，在赋值之前引用变量，但在其他情况下不引用

> ID：11442477
> 
> 赞同：3
> 
> 时间：2012-07-11T22:29:27.720
> 
> 标签：python, python-2.7, multiprocessing

我在这个网站的某个地方找到了以下示例：

```
import multiprocessing
import ctypes
import numpy as np

shared_array_base = multiprocessing.Array(ctypes.c_double, 10*10)
shared_array = np.ctypeslib.as_array(shared_array_base.get_obj())
shared_array = shared_array.reshape(10, 10)

# No copy was made
assert shared_array.base.base is shared_array_base.get_obj()

# Parallel processing
def my_func(i, def_param=shared_array):
    shared_array[i,:] = i

if __name__ == '__main__':
    pool = multiprocessing.Pool(processes=4)
    pool.map(my_func, range(10))

    print shared_array 
```

上面的代码工作正常，但如果我想将一个数组添加到共享数组中，比如 shared_array += some_other_array （而不是上面的 shared_array[i,;] = i）我得到

分配前引用的局部变量“shared_array”

任何想法为什么我不能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T22:40:35.320

如果将变量分配给函数中的任何位置，则将其视为局部变量。 `shared_array += some_other_array`相当于`shared_array = shared_array + some_other_array`。因此`shared_array`被视为局部变量，在您尝试在赋值右侧使用它时不存在。

如果要使用全局`shared_array`变量，则需要通过`global shared_array`在函数中放入 a 来将其显式标记为全局变量。

您看不到错误的原因`shared_array[i,:] = i`是 this 没有分配给变量`shared_array`。相反，它改变了该对象，分配给它的一部分。在 Python 中，分配给一个裸名（例如，`shared_array = ...`）与任何其他类型的分配（例如，）非常不同`shared_array[...] = ...`，尽管它们看起来很相似。

请注意，顺便说一下，该错误与多处理无关。

# objective-c - 从 NSMutableArray 中删除对象

> ID：11442482
> 
> 赞同：3
> 
> 时间：2012-07-11T22:29:55.370
> 
> 标签：objective-c, ios, xcode, nsmutablearray

我有两个要素：

```
NSMutableArray* mruItems;
NSArray* mruSearchItems; 
```

我有一个基本`UITableView`的`mruSearchItems`，一旦用户滑动并删除一个特定的行，我需要在里面找到该字符串的所有匹配项`mruItems`并从那里删除它们。

我没有使用足够的 NSMutableArray 并且我的代码由于某种原因给了我错误：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
if (editingStyle == UITableViewCellEditingStyleDelete) {
    //add code here for when you hit delete
    NSInteger i;
    i=0;
    for (id element in self.mruItems) {
        if ([(NSString *)element isEqualToString:[self.mruSearchItems objectAtIndex:indexPath.row]]) {

            [self.mruItems removeObjectAtIndex:i];
        }
        else
           {
            i++;
           }
    }
    [self.searchTableView reloadData];

} 
```

}

错误：我现在看到某些字符串不在引号之间（UTF8 中的字符串在引号之间）

```
Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSArrayM: 0x1a10e0> was mutated while being enumerated.(
    "\U05de\U05e7\U05dc\U05d3\U05ea",
    "\U05de\U05d7\U05e9\U05d1\U05d5\U05df",
    "\U05db\U05d5\U05e0\U05df",
    "\U05d1 ",
    "\U05d1 ",
    "\U05d1 ",
    "\U05d1 ",
    Jack,
    Beans,
    Cigarettes
)' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T23:23:24.583

你会得到一个异常，因为你在迭代它的元素时改变了一个容器。

`removeObject:`完全符合您的要求：删除*所有*等于参数的对象。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle != UITableViewCellEditingStyleDelete)
        return;

    NSString *searchString = [self.mruSearchItems objectAtIndex:indexPath.row];
    [self.mruItems removeObject:searchString];
    [self.searchTableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T22:40:18.840

您不能在枚举时编辑集合，而是将索引存储起来，然后通过循环遍历索引数组来删除它们。

# c# - BackgroundWorker - 工作完成后控件去哪里？

> ID：11442483
> 
> 赞同：0
> 
> 时间：2012-07-11T22:30:02.687
> 
> 标签：c#, .net, vb.net, winforms

我正在编写一个 .NET Windows 窗体应用程序，用于导入大量数据并在每次导入时进行各种计算。为此，我创建了一个“主要”工作者和几个“子”工作者。

导入作业都列在 MySql 数据库中，我设置了一个函数来检查作业是否存在。

我需要知道的是，在童工完成工作后，控制权转移到哪里？他们是否需要再次调用主要工作人员以使其运行并将工作分配给子工作人员？

表单加载事件调用主要工作人员。因此，如果我第一次运行我的主要工作人员并在子级别启动工作，主要工作人员会再次将控制权传递给表单加载吗？

我无法进行测试运行，因为我的每个导入作业都需要花钱（用于 API 使用/点击）。所以我想在进行测试运行之前尽可能多地编写应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:33:29.357

是的，一旦开始后台工作，控制权就会返回到调用方法，而工作会在另一个线程上处理。

您可以创建一个事件处理程序，在后台工作完成时通知您。

```
 private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if (e.Cancelled == true)
        {
            resultLabel.Text = "Canceled!";
        }
        else if (e.Error != null)
        {
            resultLabel.Text = "Error: " + e.Error.Message;
        }
        else
        {
            resultLabel.Text = "Done!";
        }
    } 
```

可以在此处找到完整的使用示例：

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# sql-server - 如何使用 SQL Server Reporting Services 保存以前的报表筛选器设置

> ID：11442489
> 
> 赞同：1
> 
> 时间：2012-07-11T22:30:26.940
> 
> 标签：sql-server, cookies, reporting-services, reporting

我有一个在浏览器中呈现的 SQL Server Reporting Services 上运行的报告。它有几个报告参数。有没有办法保存下次运行的参数值？例如，我将参数“Results from date”设置为过去的某一天，查看报告，然后关闭浏览器，然后再次打开 - 此参数的值将是我在上一个会话中设置的日期。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:09:58.987

看看[这个](http://www.purplefrogsystems.com/blog/2008/01/report-parameter-selection-memory/)小宝石。

来自文章：

> ...一种增强 Reporting Services 报表的方法，使它们...记住参数选择，以便下次运行报表时不必重新选择相同的参数。

# ruby - Rails 3：如何拦截任何http请求

> ID：11442491
> 
> 赞同：3
> 
> 时间：2012-07-11T22:30:34.110
> 
> 标签：ruby, ruby-on-rails-3.1, rubygems, rake-task

假设我在 app/assets/images/privateimages/myrestrictedimage1.jpg 有一张图片，如果我尝试通过 url 直接访问图片，可以说类似

```
 http://localhost:5555/assets/privateimages/myrestrictedimage1.jpg 
```

我能够查看图像。

我想有一种方法来检查任何 http 请求，以确定是否允许用户访问它。

我知道我可以在控制器中使用 before_filter 在继续执行任何控制器操作之前进行一些预处理，但我认为这对我没有帮助，因为我需要尝试执行控制器操作才能使其生效。

我听说我可以通过 rake 任务来完成它，但经过大量搜索后，我没有找到任何像我想要做的事情。也许我必须创建一个红宝石来做到这一点，但我不知道如何做到这一点。

谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T15:41:34.630

我使用了机架中间件

中间件类如下所示：

```
class MyChecker  
  def initialize(app)
    @app = app       
  end                

  def call(env)
    if (docheck)
      #do stuff here such as check the path.
      #For example @path = env['PATH_INFO'] and compare against your okay paths  
      #if youre good and are able to continue then
      @app.call(env)
    else
      #redirect such as
      [301, {"Location" => /somewhere, "Content-Type" => "text/html"}, []]
    end
  end  

end 
```

确保通过将以下内容添加到 application.rb 使您的中间件可见

```
class Application < Rails::Application
  ...
  config.autoload_paths += %W(#{config.root}/lib)  #if MyChecker is located in lib othewise substitute lib with wherever you have your middleware class
  config.middleware.use "MyChecker"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T02:42:26.183

你想看看[Rack](http://rack.github.com/)（不是 rake）。

# java - 定点数

> ID：11442493
> 
> 赞同：1
> 
> 时间：2012-07-11T22:30:47.060
> 
> 标签：java, fixed-point

在我的 Java 类介绍中，我被困在一个项目上。

我们必须创建一个将数字转换为定点数的代码。我的那部分没问题，但我卡在我们作业的数学部分。我们必须使用 (scalar (float) 方法进行加法、减法、乘法运算，以及使用标量 (float) 方法进行除法。

这是我到目前为止的代码。如果有人能帮助我指出正确的方向来获得第二个数字输出并将这两个数字相加，我将不胜感激。

```
public class FixedNumber {
public static final int lastSix = Integer.parseInt("111111", 2);
int value;
int value2;

public FixedNumber(int value) {
    this.value = value << 6;
}
public FixedNumber(int integral, float decimal) {
    this.value = (integral << 6) + (int)(decimal % 1 * 50);
}
public FixedNumber(float value) {
    this.value = ((int)value << 6) + (int)(value % 1 * 50);
}
public String toString() {
    return (value >> 6) + "." + ((value & lastSix) * 2);
    //return "" + ((value << 26) >>> 26);
}
public static void main(String[] args) {
    FixedNumber number = new FixedNumber(12786783, 0.87654f); //integral, decimal
    FixedNumber number2 = new FixedNumber(3.876545f); //value
    System.out.println(number);
    System.out.println(number2);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:46:17.417

为类中的每个操作创建一个方法`FixedNumber`。该方法将作用于当前的 FixedNumber 对象 ( `this`) 和传入的参数。

```
public FixedNumber add(FixedNumber toAdd) {
    // adds the two numbers and returns the result
}

public FixedNumber multiply(FixedNumber toMultiply) {
    // multiplies the two numbers and returns the result
}

// ... etc ... 
```

您可以查看[BigDecimal 的源代码](http://developer.classpath.org/doc/java/math/BigDecimal-source.html)以查看示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:24:18.333

我认为固定点有点尴尬（移动六个位置？1/50 单位？）。我会从这样的事情开始：

```
public class MyBigDecimal {
    private long scaledValue;
    private int decimalPlaces;
    public MyBigDecimal(double v, int places) {
        long factor = (long)Math.pow(10.0, places);
        scaledValue = Math.round(v * factor);
        decimalPlaces = places;
    }

    public double doubleValue() {
        double factor = Math.power(10.0, decimalPlaces);
        return scaledValue / factor;
    } 
```

}

如果您想使用既不是十进制也不是二进制的其他“定点”进行操作，您肯定会遇到挑战。

# ajax - 轮询与长轮询

> ID：11442494
> 
> 赞同：3
> 
> 时间：2012-07-11T22:31:12.500
> 
> 标签：ajax, websocket, comet, pooling

轮询和长轮询有什么区别？有什么优点和缺点？Ajax 是否被视为长轮询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T22:36:25.433

轮询：每隔一段时间从客户端访问一个 url

长轮询：从客户端点击 url 并让服务器保持连接一段时间，这样服务器可以在它有客户端信息的那一刻返回连接

并非所有 ajax 都是长轮询。长轮询最好使用像 cometd 这样的框架来实现。( [http://www.cometd.org](http://www.cometd.org) )

# list - Flex/FlashBuilder :: Spark List / IconItemRenderer:: Disable Selection Highlight / No Selection / Remove Selection

> ID：11442498
> 
> 赞同：0
> 
> 时间：2012-07-11T22:31:23.673
> 
> 标签：list, apache-flex, selection, flex-spark

我无法使用 IconItemRender 删除火花列表的选定状态颜色和向下状态颜色。如果您正在制作移动应用程序并使用 IconItemRender（而不是 ItemRenderer），则没有 autoDrawBackground 属性。

多亏了这个页面，我想我会把它放在这里：http: [//www.sajeevkumar.com/2012/01/08/flex-4-6-list-mobile-iconitemrenderer-background-image/](http://www.sajeevkumar.com/2012/01/08/flex-4-6-list-mobile-iconitemrenderer-background-image/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:31:24.390

您可以执行以下操作来弄乱向下和选定的颜色。要使用 IconItemRender 对列表中的项目进行更多控制，请查看 LabelItemRenderer 类和 drawBackground 函数。

```
override protected function drawBackground(unscaledWidth:Number, unscaledHeight:Number):void {

            var bgColor:uint = 0xffffff;

            graphics.clear();

            graphics.beginFill(bgColor,1);
            graphics.lineStyle();
            graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
            graphics.endFill();

            // Draw the separator for the item renderer
            super.drawBorder(unscaledWidth, unscaledHeight);

            opaqueBackground = bgColor;
        } 
```

# perl - 如何合并和处理文件中的多行以使用 perl 生成报告

> ID：11442501
> 
> 赞同：1
> 
> 时间：2012-07-11T22:31:28.750
> 
> 标签：perl

我是新的 perl，只是尝试了一些杂乱无章的代码。

猫输入1.txt

```
 ##gff-version 2
  ##source-version geneious 5.6.4
  Xm_ABL1 Geneious  CDS 1   168 .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
  Xm_ABL1 Geneious  CDS 169 334 .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
  Xm_ABL1 Geneious  CDS 335 628 .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
  Xm_ABL1 Geneious  CDS 629 901 .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
  Xm_ABL1 Geneious  CDS 902 985 .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
  Xm_ABL1 Geneious  CDS 986 1165    .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
  Xm_ABL1 Geneious  CDS 1166    1350    .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
  Xm_ABL1 Geneious  CDS 1351    1504    .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
  Xm_ABL1 Geneious  BLAST Hit   169 334 .   +   .   
  Xm_ABL1 Geneious  extracted region    1   168 .   +   .   Name=Extracted region from gi|371443098|gb|JH556762.1|;Extracted interval="351297 -> 351464"
  Xm_ABL1 Geneious  extracted region    169 334 .   +   .   Name=Extracted region from gi|371443098|gb|JH556762.1|;Extracted interval="371785 -> 371950"
  Xm_ABL1 Geneious  extracted region    335 628 .   +   .   Name=Extracted region from gi|371443098|gb|JH556762.1|;Extracted interval="372554 -> 372847"
  Xm_ABL1 Geneious  extracted region    629 901 .   +   .   Name=Extracted region from gi|371443098|gb|JH556762.1|;Extracted interval="374760 -> 375032"
  Xm_ABL1 Geneious  extracted region    902 985 .   +   .   Name=Extracted region from gi|371443098|gb|JH556762.1|;Extracted interval="375230 -> 375313"
  Xm_ABL1 Geneious  extracted region    986 1165    .   +   .   Name=Extracted region from gi|371443098|gb|JH556762.1|;Extracted interval="375992 -> 376171"
  Xm_ABL1 Geneious  extracted region    1166    1350    .   +   .   Name=Extracted region from gi|371443098|gb|JH556762.1|;Extracted interval="376575 -> 376759"
  Xm_ABL1 Geneious  extracted region    1351    1504    .   +   .   Name=Extracted region from gi|371443098|gb|JH556762.1|;Extracted interval="376914 -> 377067" 
```

如果输入文件包含 (->) 前向箭头。我想要像 if($array[7]=~/.*interval=\"\d+ -> \d+\"$/gm){ $array[5]= 这样的输出"+"; }

猫输出1.txt

```
gi_371443098_gb_JH556762.1  gene    351297  377067  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 351297  351464  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 371785  371950  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 372554  372847  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 374760  375032  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 375230  375313  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 375992  376171  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 376575  376759  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 376914  377067  .   +   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
### 
```

cat output1.txt 如果输入文件包含 (<-) 反向箭头。if($array[7]=~/.*interval=\"\d+ <- \d+\"$/gm){ $array[5]="-"; }

```
gi_371443098_gb_JH556762.1  gene    351297  377067  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 351297  351464  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 371785  371950  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 372554  372847  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 374760  375032  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 375230  375313  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 375992  376171  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 376575  376759  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
gi_371443098_gb_JH556762.1  CDS 376914  377067  .   -   .   Name=Xm_ABL1;created by=User;modified by=User;ID=w0IVHutPuN4H4FVDCg4sFVRaJjQ.1340919460469.4
### 
```

因为我是初学者，所以我尝试过使用一些杂乱的代码。

```
#usr/bin/perl;
use strict;
open(FH,"$ARGV[0]");

while(<FH>){
chomp $_; 
my @array=split("\t");
my $key="$array[2]-$array[0]-$array[1]-$array[2]-$array[3]"; 
if($array[1] eq "CDS"){
$cds_cnt{$key}++;
$cds{$key}="$array[4]\t$array[5]\t$array[6]\t$array[7]";
    }
if($array[1] eq "extracted region"){ 
    (my $pos1,my $pos2)=($array[7]=~/.*interval=\"(\d+) -> (\d+)\"$/gm);
$extract_cnt{$key}++;
$extract{$key}="$pos1\t$pos2";
            }
}

 foreach $i (  sort {$a<=>$b} keys %cds){ 
 my $a=$i; #print "$i\n";
 $a=~s/CDS/extracted region/g;
 if($cds_cnt{$i} == $extract_cnt{$a}){
 #print "$i\t$cds{$i}\n$a\t$extract{$a}\n"; 
 my @array=split /\-/,$i;
 my @pos=split "\t",$extract{$a};
 print "$array[1]\t$array[2]\t$pos[0]\t$pos[1]\t$cds{$i}\n";
   }
  }
 print "###"; 
```

更新

我需要在我的代码中修改什么

1.要从提取区域的行中获取值，（即array[7]=/gi|371443098|gb|JH556762.1|/）它可以是任何值，添加下划线（即gi_371443098_gb_JH556762.1）并打印如图所示，在 output1.txt 中的数组 [0] 中。

2.在打印时添加新行作为第一行（gi_371443098_gb_JH556762.1基因），在第3列获取CDS的起始值（即351297）并在第4列（即377067）获取CDS的结束值，并在第一行打印为显示在 ouput1.txt

3.如果/extracted region/ block-all rows for.egExtracted interval="351297 -> 351464"（即向前箭头）将array[5]打印为“+”符号，包括输出中的基因标题。如果 egExtracted interval="351297 <- 351464"（反向箭头）将数组 [5] 打印为“-”符号，包括输出中的基因标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:11:11.217

看起来您想要实现的是将标记为**CDS的行中的详细信息与标记为****提取区域**的匹配行合并，然后根据一些最小值和最大值，使用前导摘要标题打印合并的结果，分组为**名称**。那是对的吗？

我将假设您所说的 $array[0] (Xm_ABL1 Geneious) 和 $array[2] (169, 335 等) 足以将它们结合在一起，但这在您的示例中并不是很清楚。

你的第一个问题只是一个正则表达式，我认为你已经掌握了一般的窍门。我认为问题在于您如何捕获数据。

要执行您要求的第二件事，请在第一遍中捕获 hi 和 lo 值，并将它们存储起来。

我不打算写一个完整的解决方案，但它在这里......

```
use strict;
use warnings;

my $metadata = {}; # hashref to store CDS info in..
my $group = {}; # hashref to store summary/detail in..
my $arrow = { "->" => '+', "<-" => '-' }; # decode arrow to pos/neg

open(FH,"$ARGV[0]");
while(<FH>){
    chomp;
    next if /^#/;
    my @array=split("\t");
    my $key = join(":", $array[0], $array[2]);
    if ($array[1] =~ /CDS/){
        $metadata->{$key} = $array[7];
    }
    if ($array[1] =~ /extracted region/){
        #assert CDS already processed..
        die "No CDS record for $key!\n" unless $metadata->{$key};
        (my $label = $array[7]) =~ s/.*region from (.*)\|;.*/$1/;
        $label =~ s/\|/_/g;
        $group->{$label} ||= { #seed summary if not exists
                pos1 => 1e10,
                pos2 => 0,
                metadata => $metadata->{$key},
                sequences => [],
        };
        (my $pos1, my $arr, my $pos2) = ($array[7]=~/.*interval=\"(\d+) (<?->?) (\d+)\"$/gm);
        # capture hi/lo values for group
        $group->{$label}->{pos1} = $pos1 if $pos1 < $group->{$label}->{pos1};
        $group->{$label}->{pos2} = $pos2 if $pos2 > $group->{$label}->{pos2};
        # push this sequence onto the group's array
        push(@{ $group->{$label}->{sequences} }, [ $pos1, $pos2, $arrow->{$arr} ]);
    }
}
for my $gene (sort keys %{ $group }){
    #write out header
    printf "%s\t%s\t%d\t%d\t.\t%s\t.\t%s\n",
        $gene, 'gene',
        $group->{$gene}->{pos1}, $group->{$gene}->{pos2},
        $group->{$gene}->{sequences}->[0]->[2],
        $group->{$gene}->{metadata};
    foreach my $sequence ( @{ $group->{$gene}->{sequences} } ){
        # write out details
        printf "%s\t%s\t%d\t%d\t.\t%s\t.\t%s\n",
            $gene, 'CDS',
            $sequence->[0], $sequence->[1], $sequence->[2],
            $group->{$gene}->{metadata};
    }
}
print "###\n"; 
```

我希望这有足够的评论才能说得通。这么写，如果过了六个月还得回来修改，维护起来会容易**很多。**

**更新**

我在第四条评论之后修改了这段代码。$array[7] 正则表达式块现在捕获 $array[5] 的值并将其存储在序列 arrayref 中。

**更新#2**

*   注意使用 $arrow hashref 来解码你需要的符号`->`。`<-`（第 6 行）
*   基因标头根据第一个序列的第三个字段中的值显示 + 或 -。假设一个基因的所有序列都具有相同的方向。（从末尾开始 11 行）

*我想我们现在已经偏离了问答高速公路，进入了自由软件开发局。我写的不是复杂的代码，它有注释和结构。是时候让你掌握它的**逻辑**了。并投票赞成我的答案。*

# ios - 如何检测两个 CALayer 是否重叠？

> ID：11442503
> 
> 赞同：0
> 
> 时间：2012-07-11T22:31:32.313
> 
> 标签：ios, ipad

在我的应用程序中，用户可以从一堆 CALayer 中拖动顶部的 CALayer。

当用户停止拖动时，CALayer 应该返回到其在其他 CALayer 之上的原始位置。除非 CALayer（拖动后）不再与其他 CALayer 重叠，在这种情况下，它应该在其他 CALayer 下方移动。

现在，如何检测两个 CALayer 是否重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:03:17.483

CALayer 的 frame 属性是一个 CGRect。幸运的是，CGGeometry 有以下方法：

CGRectIntersectsRect

你会这样使用它：

```
if (CGRectIntersectsRect(myLayer1.frame,myLayer2.frame)) {

//code

} 
```

# c++ - 检查数字是否为 NaN 失败

> ID：11442508
> 
> 赞同：1
> 
> 时间：2012-07-11T22:31:54.420
> 
> 标签：c++

鉴于以下问题[除以零预防](https://stackoverflow.com/questions/11299992/divide-by-zero-prevention)并[检查它是否为 NaN](https://stackoverflow.com/questions/3437085/check-nan-number)作为示例，我编写了以下代码：

```
#include <cstdlib>
#include <iostream>
#include <map>
#include <windows.h>
using namespace std;
bool IsNonNan( float fVal )
{ 
     return( fVal == fVal );
}

int main(int argc, char *argv[])
{
    int nQuota = 0;
    float fZero = 3 / (float)nQuota; 
    cout << fZero << endl;
    cout << IsNonNan( fZero ) << endl;

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

为什么`IsNonNan`返回是真的？还有为什么会`int nZero = 3 / (float)nQuota;`输出：`-2147483648`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:33:14.733

`3 / 0`是`+INF`，不是`NaN`。试试`0 / 0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:45:30.577

不是，不是，NaN 表示“不是数字”，它的意思是，不能用数字表示的东西（像`0 / 0`数学上说的不确定性，没有数字表示），无穷大，就是这样，无穷大, 正或负

要检查浮点数是否为无穷大，您可以使用：

```
inline bool IsInf(float fval)  {
    return (fval == fval) && ((fval - fval) != 0.0f);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:51:37.440

`int nZero = 3 / (float)nQuota;`输出`-2147483648`，因为 to 的转换`0`是`float`<= 的值，该值`1e-009`在整个`float f = 0.000000001;`或更少范围内给出。

# macos - “在库中找不到函数符号” - JS-Ctypes

> ID：11442509
> 
> 赞同：1
> 
> 时间：2012-07-11T22:31:59.047
> 
> 标签：macos, firefox, firefox-addon, osx-lion, jsctypes

我的 C++ 库函数是`int RFD_startBackgroundThread()` 我的代码`overlay.js`是

```
uri = addon.getResourceURI("components/mac/libReverbFirefoxExtensionLib.dylib");
this.extensionLib = ctypes.open(uri.path);
this.startBackgroundThread = this.extensionLib.declare("RFD_startBackgroundThread", ctypes.default_abi, ctypes.unsigned_int); 
```

代码在最后一行引发异常。它说“ `Couldn't find function symbol in library`”。

该库是在 OS X Lion (10.7) 上结合了 i386 和 x86_64（但不是 PPC 架构）的“胖 dylib 二进制文件”。火狐版本 11。

迫切需要帮助。谢谢。拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:21:53.490

好吧，问题是，库没有按原样存储符号。要查看符号的实际名称，请使用转储库`nm library-name`（可选地将其重定向到 txt 文件，更易于阅读）。

我的例子中的符号写为`__Z25RFD_startBackgroundThreadv`。显然，我必须知道一个下划线并仅使用`_Z25RFD_startBackgroundThreadv`.

感谢迈克尔道特曼！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:36:57.643

在包括 OS X 在内的大多数 Unix 平台中，C 函数仅通过以下划线作为前缀映射到符号，因此`int foo(int)`以`_foo`.

但这不适用于 C++，因为在 C++ 中，您可以以各种不同的方式拥有两个具有相同名称的不同函数——您可以拥有`int foo(int)`and `double foo(double)`、 or `int MyClass::foo(int)`、 or`int foo<int>(int)`等​​等。因此，C++ 函数必须“[错位](http://en.wikipedia.org/wiki/Name_mangling)”才能给出唯一的字符串。（然后，该唯一字符串被视为 C 函数，即以“_”为前缀。）

jsctypes 知道敲掉 _，但它不知道如何破坏你的函数，因为你只是给它一个名字，而不是一个完整的原型。因此，您必须以其他方式找出函数的错误名称是`_Z25RFD_startBackgroundThreadv`.

对于名称如何被破坏，没有可移植的标准。然而，Apple 使用的 C++ ABI 是基于[Itanium C++ API](http://sourcery.mentor.com/public/cxx-abi/abi.html#demangler)的，它需要一个 API 来破坏和解散 C++ 函数。Xcode 附带了一个名为 c++filt 的工具，它封装了该 API 以供在命令行中使用——但它只处理 demangling，而不是 mangling。所以，它可以告诉你这`_Z25RFD_startBackgroundThreadv`意味着`RFD_startBackgroundThread()`，但它不能反过来。

获得重整名称的一种方法是从 开始`nm libfoo.dylib`，然后使用 c++filt 检查那些看起来像好的候选者，直到找到与您正在寻找的原型匹配的那个。

另一种方法是自动化。像这样的东西：

```
nm libfoo.dylib | awk 'NF==2 {printf "%s ",$1; system("c++filt " $2)} NF!=2{print $0}' 
```

... 将打印所有符号的解构名称。

但可能最好的方法是创建一个小的 .cpp 文件，其中除了一个原型之外什么都没有，编译它，然后使用“otool -SV tiny.a”查看损坏的名称。

因此，获取要调用的 C++ 函数的符号名称并不难。

但这并不意味着您可以像调用 C 函数一样调用它。举一个非常明显的例子，如果你想调用（非静态）Foo::bar(int)，你最好有一个有效的东西作为“this”指针传递，并且知道如何传递它。请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=505907](https://bugzilla.mozilla.org/show_bug.cgi?id=505907)了解有关 Mozilla 中的 jsctypes 不能做什么以及原因的详细信息。

# delphi - Delphi Chromium 嵌入在 DLL 表单上

> ID：11442512
> 
> 赞同：5
> 
> 时间：2012-07-11T22:32:19.567
> 
> 标签：delphi, dll, tchromium

我有一个使用 DLL 中的 VCL 表单的应用程序。在其中一个表格上，我放置了来自 DelphiChromiumEmbedded 的 TChromium。有一个问题：当我卸载我的 DLL（表单被破坏）时，应用程序冻结而没有任何错误或 AV。我找到了一些答案 - 在 lib_cef.pas 中评论了 //cef_shutdown。在这个路径形式成功销毁，但我有很大的内存泄漏。使用其他任何组件从 DLL 创建表单，销毁和卸载 DLL 是成功的。

如何正常卸载带有 TChromium 组件的表单的 DLL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T14:04:50.503

每当我需要为 DLL 的情况下创建对象时，在影响卸载 DLL 时会出现类似的错误。

如果您创建了应用程序对象的实例，destroy 会在执行卸载 DLL 之前实例化应用程序。

# symfony - 在 Symfony2 中显示日期时间表单字段的标签

> ID：11442515
> 
> 赞同：0
> 
> 时间：2012-07-11T22:32:35.590
> 
> 标签：symfony, symfony-forms

我正在使用 Symfony2.1（测试版）。我找不到`datetime`在表单中显示字段标签的方法。

在[参考文献](http://symfony.com/doc/current/reference/forms/types/datetime.html)中没有任何`label`属性的痕迹。怎么会这样？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:08:23.143

尝试这个。我每次都使用它并且像魅力一样工作。也许是文档错误？

```
$builder->add('creation_date', 'date', array(
    'label' => 'Creation date',
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:10:21.263

您可以显示字段“myDate”的标签，例如：

```
<div>
    {{ form_label(form.myDate, 'Choose a date: (this is the label sentence)') }}
</div> 
```

（文档：[http](http://symfony.com/doc/current/book/forms.html) ://symfony.com/doc/current/book/forms.html ）

您还可以个性化您的表单渲染：[http ://symfony.com/doc/current/cookbook/form/form_customization.html](http://symfony.com/doc/current/cookbook/form/form_customization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T00:24:01.187

我在 Symfony 2.7 上遇到了同样的问题，我这样修复了：

```
 ->add('issuedAt', 'date', array( 'label_render' => true,
        'show_child_legend' => false,
        'label' => 'Issued at date:',
            ... 
```

# c# - 编写 LINQ 以使用 HtmlAgilityPack 解析 aspx 页面

> ID：11442517
> 
> 赞同：2
> 
> 时间：2012-07-11T22:32:39.333
> 
> 标签：c#, asp.net, linq, html-agility-pack

我查看了 SO 和 google 上的以下和类似链接，以使用 HTMLAgilityPack 解析 aspx 页面

[使用 HtmlAgilityPack 解析 html 文档](https://stackoverflow.com/questions/7758792/parse-html-document-using-htmlagilitypack)

但我不知道如何编写 LINQ 语句，以便在我的 aspx 页面中识别按钮和标签控件名称。

这是我的 aspx 页面。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm4.aspx.cs" Inherits="WebApplication1.WebForm4" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

            <asp:Button ID="Button1" runat="server" Text="Button on page4" />
        <br />
        <br />
        <asp:Label ID="Label1" runat="server" Text="Label on page 4"></asp:Label>
        <br />
                    <br />
        <asp:Button ID="Button2" runat="server" Text="second button page 4" />

                        <br />
        <asp:Button ID="Button3" runat="server" Text="second button page 4" />

    </div>
    </form>
</body>
</html> 
```

我想使用 HTML Agility 包编写 LINQ，以便可以列出以下输出：

**此页面上的控件为 Button1、Label1、Button2、Button3**

我在编写用于解析 aspx 页面的 LINQ 时遇到问题。请帮忙。

这是我到目前为止写的内容，但它不起作用。

```
 HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();

    htmlDoc.OptionFixNestedTags = true;

    string filePath = @"C:\WebApplication1\webform4.aspx";

    htmlDoc.Load(filePath);

        htmlDoc.Load(filePath);

        var pagecontrols = from links in htmlDoc.DocumentNode.Descendants("div")
                           where links.Attributes.Contains("runat")
                           select links.Attributes["ID"].Value;

        foreach (var pagecontrol in pagecontrols)
        {
            Response.Write(pagecontrol);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:53:48.030

如果我正确理解您的问题，您需要执行以下操作：

```
var pagecontrols = from links in htmlDoc.DocumentNode.Descendants("div")
                   where links.Attributes.Contains("runat")
                   select links.Attributes["ID"].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T18:15:52.570

我不知道您是否已经找到了答案，但这是有效的解决方案。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlDocument();
HtmlNode.ElementsFlags.Remove("form");
doc.LoadHtml(aspPage);
var elements = doc.DocumentNode.Descendants("div");  
var pageControls = from z in elements.ChildNodes
                     where z.Attributes.Contains("runat") //server controls
                     select z.Attributes["ID"].Value; 
```

# python - Django Tastypie 不使用 ManyToManyField 更新资源

> ID：11442521
> 
> 赞同：1
> 
> 时间：2012-07-11T22:32:47.173
> 
> 标签：python, django, tastypie, m2m

为什么我的具有 ManyToManyField 的资源不使用此 PUT 请求更新？

```
curl --dump-header - -H "Content-Type: application/json" -X PUT --data '{"uuid":"blah","pass_token":"blah","favorites": ["/api/v1/organizations/1/"]}' http://localhost:8000/api/v1/devices/2/ 
```

我得到这个回应：

```
HTTP/1.0 400 BAD REQUEST
Date: Wed, 11 Jul 2012 22:21:15 GMT
Server: WSGIServer/0.1 Python/2.7.2
Content-Type: application/json; charset=utf-8

{"favorites": ["\"/api/v1/organizations/1/\" is not a valid value for a primary key."]} 
```

这是我的资源：

```
class OrganizationResource(ModelResource):
    parent_org = fields.ForeignKey('self','parent_org',null=True, full=True,blank=True)

    class Meta:
        allowed_methods = ['get',]
        authentication = APIAuthentication()
        fields = ['name','org_type','parent_org']
        filtering = {
            'name': ALL,
            'org_type': ALL,
            'parent_org': ALL_WITH_RELATIONS,
        }
        ordering = ['name',]
        queryset = Organization.objects.all()
        resource_name = 'organizations'

class DeviceResource(ModelResource):
    favorites = fields.ManyToManyField(OrganizationResource,'favorites',null=True,full=True)

    class Meta:
        allowed_methods = ['get','patch','post','put',]
        authentication = APIAuthentication()
        authorization = APIAuthorization()
        fields = ['uuid',]
        filtering = {
            'uuid': ALL,
        }
        queryset = Device.objects.all()
        resource_name = 'devices'
        validation = FormValidation(form_class=DeviceRegistrationForm) 
```

获取 OrganizationResource 提供了这种交换：

```
curl --dump-header - -H "Content-Type: application/json" -X GET http://localhost:8000/api/v1/organizations/1/

HTTP/1.0 200 OK
Date: Wed, 11 Jul 2012 22:38:30 GMT
Server: WSGIServer/0.1 Python/2.7.2
Content-Type: application/json; charset=utf-8

{"name": "name", "org_type": "org_type", "parent_org": null, "resource_uri": "/api/v1/organizations/1/"} 
```

[这与django tastepie manytomany field POST json error](https://stackoverflow.com/questions/9413176/django-tastypie-manytomany-field-post-json-error)非常相似，但我没有在我的 ManyToMany 关系上使用 through 属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T17:59:29.990

问题原来是验证方法。使用 FormValidation 意味着像 /api/v1/organizations/1/ 这样的 uri 不会验证为 Django ORM 的 ForeignKey。改用自定义验证可以解决此问题。

许多博萨人为给我们带来了这些信息而死。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T01:00:59.927

看起来你既定`ManyToManyField`又`DeviceResource`定`ForiegnKey`。`OrganizationResource``full=True`

因此，当执行 PUT Tastypie 时，期望给它一个完整的对象，或者至少是一个带有 resource_uri 的“空白”对象。

尝试使用指定的 resource_uri 而不是仅 uri 发送对象本身，即： `{"resource_uri" : "/api/v1/organizations/1/"}`而不是`"/api/v1/organizations/1/"`

```
curl --dump-header - -H "Content-Type: application/json" -X PUT --data '{"uuid":"blah","pass_token":"blah","favorites": [{"resource_uri" : "/api/v1/organizations/1/"}]}' http://localhost:8000/api/v1/devices/2/ 
```

# php - 将韩语字符转换为实体

> ID：11442529
> 
> 赞同：1
> 
> 时间：2012-07-11T22:33:37.837
> 
> 标签：php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:37:33.547

```
mb_convert_encoding($text, "HTML-ENTITIES", "UTF-8"); 
```

# c# - ADO.NET 实体数据模型从数据库生成并跳过列

> ID：11442531
> 
> 赞同：0
> 
> 时间：2012-07-11T22:33:45.240
> 
> 标签：c#, asp.net, asp.net-mvc-3, visual-studio-2010, entity-framework-4.1

我想从我的数据库文件 (.mdf) 生成 EDM，但我不想使用所有列。如何从 .edmx 中跳过这些列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:43:57.987

您必须手动执行此操作。

显然，您可以按此处显示的方式映射表，但随后您必须通过并手动删除列。至少这是我被告知的。

![在此处输入图像描述](../Images/0d1fe26c4989b85a38697951a79096b4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:04:27.993

您不能在生成时选择特定列。但是，如果您只想使用列的子集，让 EDM 生成整个表；然后在设计器界面中，您可以选择不需要的列并点击删除以将它们从模型中删除。

需要注意的是，如果您的数据库具有某些约束，例如没有默认值的不可空列，如果您尝试在模型中添加或更新没有这些列的实体，则会引发异常。

# sql - UDF 能否返回可与“IN”关键字一起使用的列表？

> ID：11442532
> 
> 赞同：0
> 
> 时间：2012-07-11T22:33:53.523
> 
> 标签：sql, case, user-defined-functions, sql-in

使用我的 SPROC 中的这个 SQL 片段：

```
 -- Having the PanelPayout role gives you more transaction types to look for, hence the CASE statement.
            CASE WHEN EXISTS (SELECT RoleID FROM aspnet_UsersInRoles ur WHERE ur.RoleID = 'DEDCD456-A25A-43C5-8125-A1D1223B19EC' AND ur.UserID = s.aspnet_UserID) THEN
                (SELECT ISNULL(SUM(Amount), 0) FROM TransactionsLog payouts WHERE 
                    payouts.StaffID = s.ID 
                    AND payouts.TransactionType IN (48, 49, 3, 16, 292, 293)
                    AND (payouts.OrderDate >= dbo.Date(@date) AND payouts.OrderDate <= dbo.EndOfDay(@date))
                    AND @shift = CASE @shift WHEN 0 THEN 0 ELSE dbo.GetShiftByDate(payouts.OrderDate) END
                ) 
            ELSE
                (SELECT ISNULL(SUM(Amount), 0) FROM TransactionsLog payouts WHERE 
                    payouts.StaffID = s.ID 
                    AND payouts.TransactionType IN (48, 49, 3) 
                    AND (payouts.OrderDate >= dbo.Date(@date) AND payouts.OrderDate <= dbo.EndOfDay(@date))
                    AND @shift = CASE @shift WHEN 0 THEN 0 ELSE dbo.GetShiftByDate(payouts.OrderDate) END
                ) 
            END 
```

这很好用。但是，总体而言，由于 7 年前数据库最初的结构存在一些问题，因此查询没有返回我想要的内容。所以，我将使用 C# 来做我需要做的事情。我的问题是 UDF 是否可以返回可以与 IN 一起使用的整数列表，所以我只需要写

```
 (SELECT ISNULL(SUM(Amount), 0) FROM TransactionsLog payouts WHERE 
                    payouts.StaffID = s.ID 
                    AND payouts.TransactionType IN dbo.PayoutTransactionsValidForStaff(s.ID)
                    AND (payouts.OrderDate >= dbo.Date(@date) AND payouts.OrderDate <= dbo.EndOfDay(@date))
                    AND @shift = CASE @shift WHEN 0 THEN 0 ELSE dbo.GetShiftByDate(payouts.OrderDate) END
                ) 
```

哪里`PayoutTransactionsValidForStaff(s.ID)`会返回需要检查的整数列表？我想它可能是一个表值函数，但我没有时间测试，因为我必须发布这个更新。只是想知道是否有人知道他们的头顶。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:41:48.343

是的，您可以在 SQL 中创建一个表值函数，它返回一个表而不是一个标量结果。您可以在 Sql`in`语句中使用 this 的结果

[http://msdn.microsoft.com/en-us/library/ms191165(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191165(v=sql.105).aspx)

```
CREATE FUNCTION dbo.Test()
RETURNS @funcTable TABLE 
(
    -- Columns returned by the function
    ID int PRIMARY KEY NOT NULL    
)
AS 
-- Return some arbitrary ints
BEGIN
    INSERT @funcTable VALUES (1)
    INSERT @funcTable VALUES (2)

    RETURN 
END

GO

-- Test it - insert 1,2,3 into a table var
DECLARE @SomeTable table (ID int)
INSERT INTO @SomeTable VALUES (1)
INSERT INTO @SomeTable VALUES (2)
INSERT INTO @SomeTable VALUES (3)

-- Select from @SomeTable where the ID is in the result of the UDF
select * from @SomeTable WHERE ID IN (SELECT ID FROM dbo.Test()) 
```

# javascript - 如何在 contenteditable 中跟踪插入符号/光标？

> ID：11442533
> 
> 赞同：19
> 
> 时间：2012-07-11T22:33:57.657
> 
> 标签：javascript, contenteditable

我想在 contenteditable 中跟踪插入符号/光标的移动。不过，我不确定最好的方法是什么。

我目前正在听点击，keydown，keyup。（当然，按键甚至不会触发箭头键或 ctrl-x 之类的东西。）

虽然 click 工作正常，但 keydown 的问题是它在插入符号实际移动之前被触发，所以当我查询当前文档选择范围时，我得到的是旧位置而不是新位置。但是，如果我依靠 keyup 来获取更新的位置，它就会触发得太晚：一旦按下键，插入符号就会移动，但键会在任意时间之后释放。

这一定是可能的，因为像 CKeditor 这样的东西能够做到这一点。有什么提示吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T22:31:57.653

很高兴看到人们在谈论 CKEditor :)。我是它的开发人员之一，我在选择方面没有做太多工作，但我会尽力提供帮助。

我所知道的是我们有一个内部`selectionChange`事件。那么我们什么时候检查它是否改变了呢？... ...每 200 毫秒至少一次 :) 见：

[http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/selection/plugin.js#L39](http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/selection/plugin.js#L39)

每次我们知道选择可能已被更改时，我们也会检查它（例如，通过 API 或在 keyup/mouseup 或在本机 selectionchange 上 - [http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/selection /plugin.js#L554](http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/selection/plugin.js#L554)）。所以......几乎所有时间:) AFAIK 我们做了一些技巧，所以它不会烧毁你的 CPU，但它仍然很重。但是，如果我们这样做了，那么它是唯一可能的方法让它工作得这么好。

不幸的是，选择处理是迄今为止所见即所得世界中**最糟糕**的任务。它在所有旧浏览器和新浏览器中都被破坏了。我上面链接的文件中超过 75% 的 LOC 是黑客和技巧。那是完全的疯狂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T00:34:47.187

在 Mozilla 和 Opera 中，处理按键和鼠标事件是您唯一的选择。它不仅繁琐，而且并不涵盖所有情况：可以通过编辑和上下文菜单（例如，通过全选）更改选择。为了解决这个问题，您还需要添加某种对选择对象的轮询。

然而，在 IE（至少回到 5.5）和最近的 WebKit 中，只要选择更改，就会在文档上触发一个[`selectionchange`事件。](http://msdn.microsoft.com/en-us/library/ie/ms536968%28v=vs.85%29.aspx)

```
document.onselectionchange = function() {
    alert("Selection changed!");
}; 
```

Mozilla 将来有机会支持它：[https ://bugzilla.mozilla.org/show_bug.cgi?id=571294](https://bugzilla.mozilla.org/show_bug.cgi?id=571294)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:49:25.000

由于你所说的原因，这不是一件容易的事。我想出了一些像这样的kludge：

```
var caretInterval, caretOffset;
document.addEventListener("keydown", function(e) {
    if (!e.target.contentEditable || caretInterval) return;
    if (e.keyCode !== 37 && e.keyCode !== 39) // Left and right
        return;
    var sel = getSelection();
    caretInterval = setInterval(function() {
        if (sel.type === "Caret") caretOffset = sel.baseOffset;
    }, 50);
});
document.addEventListener("keyup", function(e) {
    if (e.keyCode !== 37 && e.keyCode !== 39) // Left and right
        return;
    clearInterval(caretInterval);
    caretInverval = null;
    var sel = getSelection();
    if (sel.type === "Caret") caretOffset = sel.baseOffset;
}); 
```

如果有人试图同时按下左键和右键，可能会出现一个小*问题*。对于 ctrl-X 和 ctrl-V，你应该抓住`cut`and`paste`事件，这实际上是胡说八道的另一个痛苦。

最后，我决定不值得为我的目的而付出努力。也许你有不同的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:06:22.880

*WRT 在更新选择后*捕获事件：我只是将处理程序函数包装在超时中：

```
editor.onkeydown = function() {
  window.setTimeout( function(){
    // Your handler code here
  }, 0 );
}; 
```

这会将您的处理程序注册为尽快在浏览器的事件循环中执行，但要在处理当前（例如单击）事件之后。但是，如果您有其他脚本修改内容，请注意可能的比赛；不能保证您的超时是下一个要运行的。

# visual-studio-2008 - 在哪里放置 Scrollviewer 视觉工作室电话

> ID：11442534
> 
> 赞同：1
> 
> 时间：2012-07-11T22:34:01.247
> 
> 标签：visual-studio-2008, windows-phone-7, scrollviewer

我试图在 Grid 之前将 scollviewer 放入此页面，然后所有文本框都消失了。我应该把滚动查看器放在哪里？它显示警告 1 第 17 行位置 6 上的“网格”开始标记与“电话：PhoneApplicationPage”的结束标记不匹配。第 74 行，位置 3。C:\Users\xxx\Desktop\Excercises_Copy1\Excercises\Running jogging.xaml 74 3 Excercises

并且，未找到元素 Grid 的结束标记

```
<phone:PhoneApplicationPage 
    x:Class="Excercises.Running_jogging"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="17*" />
            <ColumnDefinition Width="437*" />
            <ColumnDefinition Width="26*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0">
            <ScrollViewer>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="36*" />
                        <RowDefinition Height="83*" />
                        <RowDefinition Height="649*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="117*" />
                        <ColumnDefinition Width="229*" />
                        <ColumnDefinition Width="110*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock x:Name="TextBlock1" Text="Let's get started" FontWeight="SemiBold" TextAlignment="Center" Height="30" Width="152" Grid.Column="1" />

                    <TextBlock Grid.Row="1" Height="59" HorizontalAlignment="Left" Margin="6,24,0,0" x:Name="TextBlock2" Text="Running is simple and healthy sport and it's also one of the most effective aerobic exercises. Additionally, running does not require large financial outlays. By running you will strengthen the circulatory and immune system and reduce tension caused by stress. Running also helps losing fat." TextWrapping="Wrap" VerticalAlignment="Top" Grid.ColumnSpan="3" Width="444" />
                    <TextBlock Grid.Row="2" Height="30" HorizontalAlignment="Left" x:Name="TextBlock3" Text="Warm-up before running" VerticalAlignment="Top" FontWeight="SemiBold" Grid.Column="1" Grid.ColumnSpan="2" />
                    <TextBlock Grid.Row="2" Height="114" HorizontalAlignment="Left" Margin="6,36,0,0" x:Name="TextBlock4" Text="TRUNK BENDING; Feet at shoulder height, straight legs at knees during the exercise. Bend to the left leg, then to the right and  at the end straighten the body. Repeat 20 times. " TextWrapping="Wrap" VerticalAlignment="Top" Grid.ColumnSpan="3" Width="456" />
                    <TextBlock Grid.Row="2" Height="167" HorizontalAlignment="Left" Margin="6,156,0,0" x:Name="TextBlock5" Text="PLANTAR FASCIA STRETCH; Sit on a chair or stool and cross your right foot over your left thigh. Grasp the toes of your right foot and pull them upward toward your shin. Hold this stretched position for at least 10 seconds. Release and repeat two to three times. Reverse. " VerticalAlignment="Top" Grid.ColumnSpan="3" Width="444" TextWrapping="Wrap" />
                    <TextBlock Grid.Row="2" Height="222" HorizontalAlignment="Left" Margin="6,329,0,0" x:Name="TextBlock6" Text="SEATED HEEL CORD STRETCH; Sit on floor or bench with both feet extended straight out in front of you. Do not lock knees. Wrap a towel around one foot and pull foot toward you. Push foot against the towel for five seconds while you hold the towel still. Relax foot and pull back toward you again. Repeat steps 3 and 4 twice. Reverse." VerticalAlignment="Top" Grid.ColumnSpan="3" Width="444" TextWrapping="Wrap"/>
                    <TextBlock Height="30" HorizontalAlignment="Left" x:Name="TextBlock7" Text="Running test" VerticalAlignment="Top" FontWeight="SemiBold" TextAlignment="Center" Grid.Column="1" Margin="43,557,0,0" Grid.Row="2" />
                    <TextBlock Grid.Row="2" Height="149" HorizontalAlignment="Left" Margin="6,593,0,0" x:Name="TextBlock8" Text="Test is to run continuously with constat pace. The best pace is a jogtrot a little faster than a fast walking. Run as long as you can and measure the time. According to your time choose the right week of the training." VerticalAlignment="Top" Grid.ColumnSpan="3" Width="450" TextWrapping="Wrap"/>
                    <TextBlock HorizontalAlignment="Left" Margin="6,790,0,-1018" x:Name="TextBlock9" Width="456"  TextWrapping="Wrap" Grid.ColumnSpan="3" Grid.Row="2" d:LayoutOverrides="GridBox"><Run Text="- Less then 2 minutes - begin with fast walking" /><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 2-4 minutes - Week 1"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 5-6 minutes - Week 3"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 7-8 minutes - Week 4"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 9-10 minutes - Week 6"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 11-12 minutes - Week 7"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 13-14 minutes - Week 8"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- More then 15 miuntes - Week 10 "/></TextBlock>
                    <Grid.Background>
                        <ImageBrush ImageSource="/Excercises;component/Images/tlo.png" />
                    </Grid.Background>
                </Grid>
            </ScrollViewer>
        </Grid>

        <!--Sample code showing usage of ApplicationBar-->
    <!--<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
                <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>-->
</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:28:06.417

您的布局非常复杂，但您可以将滚动查看器放在 ContentPanel 中并在其中创建一个新网格

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0">
<ScrollViewer>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="36*" />
            <RowDefinition Height="83*" />
            <RowDefinition Height="649*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="117*" />
            <ColumnDefinition Width="229*" />
            <ColumnDefinition Width="110*" />
        </Grid.ColumnDefinitions>

        <TextBlock x:Name="TextBlock1" Text="Let's get started" FontWeight="SemiBold" TextAlignment="Center" Height="30" Width="152" Grid.Column="1" />

        <TextBlock Grid.Row="1" Height="59" HorizontalAlignment="Left" Margin="6,24,0,0" x:Name="TextBlock2" Text="Running is simple and healthy sport and it's also one of the most effective aerobic exercises. Additionally, running does not require large financial outlays. By running you will strengthen the circulatory and immune system and reduce tension caused by stress. Running also helps losing fat." TextWrapping="Wrap" VerticalAlignment="Top" Grid.ColumnSpan="3" Width="444" />
        <TextBlock Grid.Row="2" Height="30" HorizontalAlignment="Left" x:Name="TextBlock3" Text="Warm-up before running" VerticalAlignment="Top" FontWeight="SemiBold" Grid.Column="1" Grid.ColumnSpan="2" />
        <TextBlock Grid.Row="2" Height="114" HorizontalAlignment="Left" Margin="6,36,0,0" x:Name="TextBlock4" Text="TRUNK BENDING; Feet at shoulder height, straight legs at knees during the exercise. Bend to the left leg, then to the right and  at the end straighten the body. Repeat 20 times. " TextWrapping="Wrap" VerticalAlignment="Top" Grid.ColumnSpan="3" Width="456" />
        <TextBlock Grid.Row="2" Height="167" HorizontalAlignment="Left" Margin="6,156,0,0" x:Name="TextBlock5" Text="PLANTAR FASCIA STRETCH; Sit on a chair or stool and cross your right foot over your left thigh. Grasp the toes of your right foot and pull them upward toward your shin. Hold this stretched position for at least 10 seconds. Release and repeat two to three times. Reverse. " VerticalAlignment="Top" Grid.ColumnSpan="3" Width="444" TextWrapping="Wrap" />
        <TextBlock Grid.Row="2" Height="222" HorizontalAlignment="Left" Margin="6,329,0,0" x:Name="TextBlock6" Text="SEATED HEEL CORD STRETCH; Sit on floor or bench with both feet extended straight out in front of you. Do not lock knees. Wrap a towel around one foot and pull foot toward you. Push foot against the towel for five seconds while you hold the towel still. Relax foot and pull back toward you again. Repeat steps 3 and 4 twice. Reverse." VerticalAlignment="Top" Grid.ColumnSpan="3" Width="444" TextWrapping="Wrap"/>
        <TextBlock Height="30" HorizontalAlignment="Left" x:Name="TextBlock7" Text="Running test" VerticalAlignment="Top" FontWeight="SemiBold" TextAlignment="Center" Grid.Column="1" Margin="43,557,0,0" Grid.Row="2" />
        <TextBlock Grid.Row="2" Height="149" HorizontalAlignment="Left" Margin="6,593,0,0" x:Name="TextBlock8" Text="Test is to run continuously with constat pace. The best pace is a jogtrot a little faster than a fast walking. Run as long as you can and measure the time. According to your time choose the right week of the training." VerticalAlignment="Top" Grid.ColumnSpan="3" Width="450" TextWrapping="Wrap"/>
        <TextBlock HorizontalAlignment="Left" Margin="6,790,0,-1018" x:Name="TextBlock9" Width="456"  TextWrapping="Wrap" Grid.ColumnSpan="3" Grid.Row="2" d:LayoutOverrides="GridBox"><Run Text="- Less then 2 minutes - begin with fast walking" /><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 2-4 minutes - Week 1"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 5-6 minutes - Week 3"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 7-8 minutes - Week 4"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 9-10 minutes - Week 6"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 11-12 minutes - Week 7"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- 13-14 minutes - Week 8"/><Run Text=" "/><LineBreak/><Run Text=" "/><Run Text="- More then 15 miuntes - Week 10 "/></TextBlock>
        <Grid.Background>
            <ImageBrush ImageSource="/Excercises;component/Images/tlo.png" />
        </Grid.Background>
    </Grid>
</ScrollViewer>
</Grid> 
```

# git - 如何将 git bash 添加到已安装的 TortoiseGit

> ID：11442536
> 
> 赞同：4
> 
> 时间：2012-07-11T22:34:12.470
> 
> 标签：git

我已经安装了 TortoiseGit 但我没有 Git Bash 作为选项，谁能告诉我如何安装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:40:24.357

Just go ahead and download Git bash form [http://git-scm.com/downloads](http://git-scm.com/downloads) , however if you use a key instead of a user id password , you might need to re configure.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T02:22:59.330

重新安装 Git for Windows，并启用`Git Bash Here`，见：

[![在此处输入图像描述](../Images/7763d6533d3ae2d4f912a9de20802603.png)](https://i.stack.imgur.com/NfRbJ.png)

`Git Bash Here`然后，在文件夹中右击会有一个上下文菜单项，见：

[![在此处输入图像描述](../Images/98057c669d93c43559991225077e74a1.png)](https://i.stack.imgur.com/QSNg1.png)

* * *

或者您可以使用“开始”菜单中的那个，请参阅：

[![在此处输入图像描述](../Images/1694e2f5b51281201d866ecc1c6dfb1e.png)](https://i.stack.imgur.com/w3BoA.png)

# escaping - 如何防止单引号混淆 ksh -n

> ID：11442539
> 
> 赞同：1
> 
> 时间：2012-07-11T22:34:21.167
> 
> 标签：escaping, ksh

所以我有一个名为*try.sh*的简单 shell 脚本：

```
#! /bin/ksh

echo "'" | awk '

/'\''/ {
print "'\''ello, world"
}
' 
```

它运行良好：

```
$ ./try.sh  
'ello, world 
```

但是*ksh -n*对此并不完全满意：

```
$ ksh -n ./try.sh
./try.sh: warning: line 3: ' quote may be missing
./try.sh: warning: line 5: ' quote may be missing 
```

我可以使用技巧（awk 变量、awk 十六进制序列等）来解决这个问题，但肯定有一些本机优雅的方式来安抚 ksh 语法检查器（如果没有别的，对于嵌入式语言没有规定的情况）变通方法）。我忘记了什么？

[更新：显然语法检查器正在标记该行，因为带有嵌入换行符的带引号的字符串后面跟着另一个带引号的字符串，中间没有空格。David Korn 说他将审查下一个版本的 ksh 的检查。有关详细信息，请参阅[ast-users 邮件列表存档](http://lists.research.att.com/pipermail/ast-users/2012q3/thread.html#3541)。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:10:12.640

这是一个最小的代码片段。IMO，在变量中传递引号字符是解决令人讨厌的问题的最优雅的方法，因为它避免了引用/取消引用模式，并且您看到的 awk 代码与 awk 处理的代码相同。

```
$ echo "'" | 
   awk -v q=\'  'q { print q"Hello, world"q }'
'Hello, world' 
```

最初的问题使用了我所说的引用/取消引用模式，该模式与嵌入在 unix shell 中的其他语言一起使用很多。

该技巧为 awk 提供了一系列来自 shell 的连接的带引号和不带引号的字符串，它们一起形成了有效的 awk 程序文本。这使得代码很难维护，因为作为程序员，您再也看不到有效的 awk 代码了。

将特殊字符作为变量传递给 awk 可以避免这种模式。

# jquery - How do I change images on a jQuery tab when the tab is active?

> ID：11442540
> 
> 赞同：1
> 
> 时间：2012-07-11T22:34:27.773
> 
> 标签：jquery, image, jquery-ui, tabs

我正在使用 jQuery 选项卡，并且我为每个选项卡使用图像而不是文本。我想在选项卡处于活动状态时更改图像。选项卡本身的代码是：

```
<ul>
<li><a href="#tabs-1"><img src="images/dashboard_off.gif"/></a></li>
<li><a href="#tabs-2"><img src="images/advertising_off.gif"/></a></a></li>
<li><a href="#tabs-3"><img src="images/marketing_off.gif"/></a></li>
<li><a href="#tabs-4"><img src="images/office_off.gif"/></a></li>
<li><a href="#tabs-5"><img src="images/networking_off.gif"/></a></li>
<li><a href="#tabs-6"><img src="images/education_off.gif"/></a></li>
</ul> 
```

我想将它们切换到图像的“打开”版本（“images/dashboard_on.gif”等）。

我的脚本是：

```
<script type="text/javascript">
$(function(){
    $( "#tabs" ).tabs({
    event: "mouseover"
    });
    });
</script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T22:45:36.497

您可以考虑使用背景图像，而不是使用内联图像；这样，您就可以将其关闭`.ui-state-active`。

* * *

如果你绝对必须使用内联图像，你可以试试这个：

```
$(function(){
    $( "#tabs" ).tabs({
        event: "mouseover"
    })
    .find('> ul > li').hover(function() {
        $(this).find('img').prop('src', function(i, v) {
            return v.replace('off.gif', 'on.gif');
        });
    },
    function() {
        $(this).find('img').prop('src', function(i, v) {
            return v.replace('on.gif', 'off.gif');
        });
    });
}); 
```

# c# - 如何在 C# Windows Forms 桌面应用程序中显示 .swf flash 文件？

> ID：11442543
> 
> 赞同：0
> 
> 时间：2012-07-11T22:34:42.367
> 
> 标签：c#, winforms, flash

我的应用程序是关于对存储在我的光盘上的 .swf 文件进行分类和描述的，所以我的主要功能应该是预览文件。如何在我的 Windows 窗体桌面应用程序中播放 Flash 文件？我正在使用 Visual Studio 2010 高级版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:40:36.193

我会看看是否可以找到完整的文档和示例，但是有名为 axshockwaveflash 的 COM 包装器

这是一个可能有助于指导您的一般链接：http: [//social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/5815e676-50b0-47f4-964a-c1bcebfdb9a4/](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/5815e676-50b0-47f4-964a-c1bcebfdb9a4/)

这是另一个： http: [//www.programmingforums.org/post164816.html](http://www.programmingforums.org/post164816.html)

# notifications - 在 Facebook 评论插件中标记/@提及时，没有收到粉丝页面的通知

> ID：11442544
> 
> 赞同：1
> 
> 时间：2012-07-11T22:34:42.890
> 
> 标签：notifications, comments, facebook-social-plugins, facebook-comments, fan-page

使用 Facebook*评论*插件，您可以在评论中标记/@提及 Facebook*粉丝专页*，但在发生这种情况时，*粉丝专页*不会收到 Facebook*通知*。

我想系统或用户错误（可能是用户错误 ;-) 中一定有错误，因为如果他们不被通知，真的没有理由在 Facebook 评论插件中标记/@提及某人。

想法？

# iphone - Objective-c用iphone 4s插入数据

> ID：11442546
> 
> 赞同：0
> 
> 时间：2012-07-11T22:34:46.553
> 
> 标签：iphone, objective-c, cocoa, fmdb

我制作了一个应用程序，其中我使用带有 fmdb 包装器的 sqlite 数据库来插入和咨询数据，数据显示在表格视图中，问题是当我在 iphone 4 上运行应用程序时一切正常，但是当我是在 iphone 4s 上做的，它没有......有人可以帮我解决这个问题。
以下是我的部分代码：

加载数据库：

```
 aPools = [[NSMutableArray alloc] init];

NSString *path = [[NSBundle mainBundle] pathForResource:@"poolsDB" ofType:@"sqlite"];

mainDB = [[FMDatabase alloc] initWithPath:path];
[mainDB open];

FMResultSet *fResult = [ mainDB executeQuery:@"SELECT * FROM poolsData"];

while ([fResult next]) {
    poolsData = [fResult stringForColumn:@"Name"];
    [aPools addObject:poolsData];  
}

[mainDB close]; 
```

保存：

```
-(void) saveIntoDB:(NSString *)name withVolume:(float)volume type:(NSString *)type andDesc:(NSString *)desc {

 [mainDB open];

[mainDB executeUpdate:@"INSERT INTO poolsData (Name,Volume,Type,Desc) values (?,?,?,?)",name,
 [NSNumber numberWithFloat: volume] ,type,desc, nil];

[mainDB close]; 
```

}

可能是表格视图以不同的方式工作 beetwen 设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:27:21.720

试试下面的代码：

装载：

```
aPools = [[NSMutableArray alloc] init];
NSString *path = [[NSBundle mainBundle] pathForResource:@"poolsDB" ofType:@"sqlite"];

FMDatabase* mainDB = [FMDatabase databaseWithPath:path];
if(![mainDB open])
{
  return NO; //since the error in opening database
}
FMResultSet *fResult = [ mainDB executeQuery:@"SELECT * FROM poolsData"];
while ([fResult next]) {
   poolsData = [fResult stringForColumn:@"Name"];
   [aPools addObject:poolsData];  
}
[mainDB close]; 
```

保存代码：

```
-(void) saveIntoDB:(NSString *)name withVolume:(float)volume type:(NSString *)type  
  andDesc:(NSString *)desc {

  FMDatabase* mainDB = [FMDatabase databaseWithPath:path];
  if(![mainDB open])
  {
   return; //since the error in opening database
  }
  [mainDB beginTransaction];

  [mainDB executeUpdate:@"INSERT INTO poolsData (Name,Volume,Type,Desc) VALUES  
  (?,?,?,?)",name,
  [NSNumber numberWithFloat: volume] ,type,desc];

  [mainDB commit];
  [mainDB close];
 } 
```

# jquery - jquery jump menu 去掉 "?" 之后的所有内容

> ID：11442549
> 
> 赞同：1
> 
> 时间：2012-07-11T22:35:05.497
> 
> 标签：jquery

我找到了一个简单的跳转菜单。在我希望它转到带有“？”的页面之前，它工作得很好。在网址中。它会删除“？”之后的所有内容。因此，当我尝试转到 mywordpresspage/?id=1 时，跳转菜单会将我带到 mywordpresspage/。

我不太了解 jquery ...我主要使用 php。

这是代码：

```
<script type="text/javascript" charset="utf-8">

$(document).ready(function() {
    $('.site_quick_jump').change(function(){
        if ($(this).val() != '') {
            $('#site_quick_jump_form').attr('action', $(this).val()); // 
            $('#site_quick_jump_form').submit(); // Go!
        }
    });
}); // doc ready

</script>  

<form id="site_quick_jump_form" method="get" action="">
  Browse Survey:&nbsp; 
  <select class="site_quick_jump">
    <option></option>
    <option value="mywordpresspage/?id=1">My WordPress Page 1</option>
    <option value="mywordpresspage/?id=2">My WordPress Page 2</option>
    <option value="mywordpresspage/?id=3">My WordPress Page 3</option>
  </select>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:41:41.297

好的，这需要对网络上的参数进行快速解释。当您发出请求时，您可以通过两种方式发送参数：

1.  GET：参数作为 URL 的一部分发送（“example.com/?foo=bar”）
2.  POST：参数在“幕后”发送（“example.com”，{foo:bar}）

当您提交请求时（即当您提交请求时`$('#site_quick_jump_form').submit()`），您提交的是“？”之后的任何内容。在 URL 中作为参数。

*** * 编辑 * ***

一种可能的解决方案是切换到 POST :) 因为这似乎适用于 OP，所以我不会详细描述其他选项，但您也可以：

*   让您的 PHP 代码只查看所有参数并将它们重新组合成一个 URL
*   使您的 JS 代码分离出查询字符串（window.location.search）并将其作为单独的字段发送

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:19:48.423

如果您的选项中唯一改变的是查询字符串，您可以通过将操作硬编码到表单中并将您的选项更改为仅指定查询字符串值来简化这一点。

```
$(function () {
    $('.site_quick_jump').change(function () {
        if (this.value) {
            this.form.submit();
        }
    });
}); 
```

```
<form id="site_quick_jump_form" method="get" action="mywordpresspage">
    Browse Survey:
    <select class="site_quick_jump" name="id">
        <option></option>
        <option value="1">My WordPress Page 1</option>
        <option value="2">My WordPress Page 2</option>
        <option value="3">My WordPress Page 3</option>
    </select>
</form> 
```

* * *

***解释：***

提交表单时，通过将表单的每个元素名称与其对应的值组合在一起来创建表单数据，用 . 分隔`=`。这些名称值对中的每一个都与一个组合`&`以形成最终的表单数据。

当使用 提交表单时`method="post"`，该数据将被填充到 http 请求的正文中。如果用户随后尝试刷新页面，他们将收到警告，提示他们即将重新提交表单。如果用户单击返回按钮返回页面，他们将收到页面已过期的警告。您不希望您的用户收到这些警告。

但是，当使用 提交表单时`method="get"`，表单数据会附加到 URL 之后的`?`. 没有要处理的警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:41:56.697

所以我找到了答案，不知道为什么它有效，但它确实有效。我将 action="get" 更改为 action="post"。

# joomla - 如何为文章选择指定数字分量参数

> ID：11442552
> 
> 赞同：1
> 
> 时间：2012-07-11T22:35:58.660
> 
> 标签：joomla, joomla1.5

在为我的组件设置参数时，我希望其中一个是可以打开和使用的文章 ID。根据[Joomla 标准参数类型](http://docs.joomla.org/Standard_parameter_types)，文本是唯一的选项。

可以指定整数，还是有办法验证输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:41:19.927

据我所知，文本是您唯一的*标准*解决方案。然而，Joomla 确实允许自定义参数类型。您可以想象为整数做一个，但如果它只是用于文章选择，您可以做 Joomla 为 com_content 组件所做的事情。

1.  *在您的*管理组件中创建一个新文件夹，名为：`administrator\components\com_mycomponent\elements`
2.  复制`administrator\components\com_content\elements\article.php`到您的新文件夹（和 index.html 以确保安全）
3.  您现在可以在组件中指定“文章”的参数类型，如下所示，您将在组件配置中获得文章的下拉列表。
4.  确保在“参数”中包含指向元素文件夹的 addpath。

`<params addpath="/administrator/components/com_mycomponent/elements" />`

`<param type="article" name="article_id" default="0" label="Select Article" />`

# javascript - jqplot单杠问题

> ID：11442553
> 
> 赞同：2
> 
> 时间：2012-07-11T22:36:01.020
> 
> 标签：javascript, jquery, jqplot

我正在尝试使用 jqplot 设置水平条形图，如下所示：

```
var plot1 = $.jqplot('graph', [gData], {
    seriesDefaults: {
        renderer:$.jqplot.BarRenderer,
        rendererOptions: {
            barDirection: 'horizontal'
        }
    },
    axes: {
        yaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: gTicks
        }
    }
}); 
```

此代码适用于垂直条，例如：

```
var plot1 = $.jqplot('graph', [gData], {

    seriesDefaults: {
        renderer:$.jqplot.BarRenderer
    },
    axes: {
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: gTicks
        }
    }
}); 
```

但是当我让它水平时，突然之间条形不再与刻度线对齐。例如，对于某些分时，可能有两个或多个重叠条。对于某些人来说，可能根本没有。最后，还有一个额外的“未定义”刻度，似乎有大量的条重叠。

gData 和 gTicks 都是 javascript 数组。

有什么想法吗？

编辑：未定义的类别实际上是我自己创造的，但问题仍然没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:55:10.630

它对您不起作用的原因是，我假设，当您将图表的方向更改为水平时，您并没有相应地更改数据。因此，假设这是问题所在，图表的数据必须采用以下形式，[如`jqPlot`'s 网页](http://www.jqplot.com/tests/bar-charts.php)中的示例：

```
 [[[2,1], [4,2], [6,3], [3,4]],
    [[5,1], [1,2], [3,3], [4,4]],
    [[4,1], [7,2], [1,3], [2,4]]] 
```

* * *

您还可以使用值数组表示法（如下），与上述相反（点数组）来表达一个系列：

```
 [[200, 600, 700, 1000],
   [460, -210, 690, 820],
   [-260, -440, 320, 200]] 
```

这种表示法将允许您更改图表的方向而无需担心数据格式，如下面的示例所示，其中数据保持不变只有适当的图表参数发生变化：

*   [垂直条形图。](http://jsfiddle.net/Boro/2mCjW/18/)
*   [水平条形图。](http://jsfiddle.net/Boro/2mCjW/16/)

# c - 隐式参数转换

> ID：11442554
> 
> 赞同：0
> 
> 时间：2012-07-11T22:36:04.030
> 
> 标签：c

我有一个按以下方式工作的 C 代码：标头包含函数的声明，例如：

```
typedef struct MyStruct
{
    int thing;
    void* reserved;
} MyStruct;

void foo(MyStruct* bar); 
```

然后，在我的 .c 代码中，我有这个：

```
typedef struct EXTENDED
{
    float more_stuff;
} EXTENDED;

struct MyStructEx
{
    int thing;
    EXTENDED* ex;
} MyStructEx;

void foo(MyStructEx* bar)
{
    ...
} 
```

这在 MSVC 下编译得很好（警告告诉我标头和实现参数不匹配）但是 Code::Blocks (GCC) 会引发错误。有没有办法消除这个错误或至少让它成为一个警告，或者我唯一的选择是把额外的定义也放在标题中？

我这样做是因为我正在用 C 编写一个模块化库，所以有时各个组件需要“临时空间”才能工作（这是标题中保留的 void*），并避免在任何地方都有一堆演员表'正在尝试将通用的 MyStruct 结构隐式转换为更专业的结构。

所以我的问题是，我应该使用哪个选项将此类错误更改为警告，和/或是否有更好的方法来实现这一点？（我需要使用标准 C）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:39:21.437

保留函数原型并在函数定义中强制转换指针

```
typedef struct EXTENDED
{
    float more_stuff;
} EXTENDED;

struct MyStructEx
{
    int thing;
    EXTENDED* ex;
} MyStructEx;

void foo(MyStruct* bar)
{
    MyStructEx *mse = (MyStructEx*)bar;
    ...
} 
```

它将关闭编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:44:40.827

`MyStruct*`和之间没有隐式转换`MyStructEx*`。

（一个术语的狡辩：没有“隐式转换”之类的东西。转换是使用转换运算符的显式转换，它由带括号的类型名称组成。）

也不能保证`void*`和`EXTENDED*`具有相同的大小和表示；这将是完全合法的，例如，为`void*`8 个字节和`EXTENDED*`4 个字节。

任何假设`MyStruct`并`MyStructEx`具有相同布局的技术都会导致程序的行为未定义。

似乎`foo`接受 a的函数`MyStruct*`和接受 a 的`foo`函数`MyStructEx*`需要是两个不同的函数，具有两个不同的名称。其中一个可以是另一个的包装器。

要么这样，要么您可以删除`MyStructEx`类型并使用`MyStruct`所有内容，并`foo()`进行任何必要的转换。

# ios - iOS Phonegap 返回奇怪的购买收据

> ID：11442557
> 
> 赞同：1
> 
> 时间：2012-07-11T22:36:26.413
> 
> 标签：ios, cordova, in-app-purchase, phonegap-plugins, receipt

我已经看到我的 Phonegap iOS 应用程序使用这个奇怪的交易收据进行了几次购买尝试，当我尝试在 itunes 端点验证它时，这似乎是无效的。

```
window.plugins.inAppPurchaseManager.onPurchased = function (transactionId, productId, receipt) {
  // receipt is MC4wMDAwMDA= which base64 decodes to 0.000000
} 
```

我怀疑是黑客攻击，但我想确认我们没有做错任何事情。

这是在 Cordova 1.7 上使用 phonegap-plugins repo 中的官方 InAppPurchaseManager 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:22:04.010

我不熟悉您使用的插件，但我认为您没有做错任何事情。有几个程序可以伪造收据以窃取应用内购买。Apple 建议通过您自己的服务器验证收据，以使黑客和黑客更难以欺骗您的产品。您可以在此处阅读 Apple 的收据验证以及[在](http://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html#//apple_ref/doc/uid/TP40012484)[此处](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html#//apple_ref/doc/uid/TP40008267-CH104-SW3)推荐的最佳实践。

类似`MC4wMDAwMDA=`或开头的`Y29tLnVydXMuaWFwLj`收据是常见的伪造收据签名，提交给 Apple 时验证失败。

# jquery - 确定为 IE8 和更少的 JSON 解析的内容

> ID：11442565
> 
> 赞同：1
> 
> 时间：2012-07-11T22:37:21.073
> 
> 标签：jquery, json

所有，我有以下代码：

```
onDone: function (e, data) {
var result = jQuery.parseJSON(data.result);
var uploadType = result.upload_type;
var filename = result.name;
var insert_id = result.insert_id;
} 
```

当我运行它时，我从 IE 收到以下错误：

```
消息：'upload_type' 为空或不是对象
```

当我在 Chrome 中执行 console.log(data.result) 时，我得到以下数据：

```
 [{
    "name": "1_3266_671641333369_14800358_42187036_5237378_n.jpg",
    "size": 35535,
    "type": "image\/jpeg",
    "url": "\/web\/upload\/1_3266_671641333369_14800358_42187036_5237378_n.jpg",
    "thumbnail_url": "\/web\/upload\/thumbnails\/1_3266_671641333369_14800358_42187036_5237378_n.jpg",
    "delete_url": "\/web\/upload.php?file=1_3266_671641333369_14800358_42187036_5237378_n.jpg",
    "delete_type": "DELETE",
    "upload_type": "video_montage",
    "insert_id": "288"
}] 
```

我试图看看为什么我在 IE8 中收到错误消息，但我看不到正在解析的内容。当我确实发出这样的警报时：

```
var result = jQuery.parseJSON(data.result);
alert(result) 
```

我得到空但不知道为什么。

非常感谢任何有关如何阅读它或为什么我的解析 JSON 的结果为空的帮助，即使我返回的字符串中有数据！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:37:55.127

我终于找到了解决方案，这是一个问题，因为 IE 不支持 XHR 上传。您可以通过查看此帖子找到对此的详细说明：

[jquery 文件上传 - IE 完成回调 data.result 问题](https://stackoverflow.com/questions/8814068/jquery-file-upload-ie-done-callback-data-result-issue)

然而，这并没有完全解决我的需求，因为该代码仅适用于 IE，而我需要跨浏览器工作。我稍微更新了我的代码，如果您在此处查看接受的答案：

[jquery 文件上传 - IE 回调导致对象 Object](https://stackoverflow.com/questions/11443930/jquery-file-upload-ie-callback-results-in-object-object)

您将了解如何为 XHR 类型的上传处理来自 IE 的 JSON 响应！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:47:25.263

`data.result`已经是一个对象。

你得到了因为当[jQuery.parseJSON()](http://jsapi.info/jquery/1.7.2/jQuery.parseJSON)的参数不是类型时`null`jQuery 返回`null``string`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:41:10.217

也许在 IE 中试试这个：

```
alert(data.result); 
```

那应该给你 JSON 的字符串值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T22:46:58.383

`data.result`已经解析*了*，不需要`$.parseJSON`. 删除这一行：

```
var result = jQuery.parseJSON(data.result); 
```

此外，您的 JSON 对象是一个（对象）数组。尝试从数组中的第一个对象获取属性。

```
var uploadType = data.result[0].upload_type; 
```

# android - 使用 FrameLayout 作为动态壁纸

> ID：11442577
> 
> 赞同：6
> 
> 时间：2012-07-11T22:39:08.507
> 
> 标签：android, live-wallpaper, android-framelayout

我正在尝试使用 a`FrameLayout`作为动态壁纸的内容。根据Romain Guy 的[这个](https://stackoverflow.com/questions/4174723/using-layout-resources-in-a-livewallpaper-on-android)回答，这应该是可能的，但我没有太多的运气打电话`.measure()`和`.layout()`看。谁能给我一个简短的例子，说明如何在动态壁纸中使用常规布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:03:53.637

这是一张你可以随意摆弄的壁纸，对吧？如果您要超越通常的视图，则可能必须实现一些自定义逻辑，尤其是在绘制图像时。FrameLayout 具有背景和前景可绘制功能。您可以使用 XML 或 Java 将常规视图添加到 FrameLayout

你也可以创建一个自定义的 Drawable 对象来做很多关于自定义绘画的有趣的事情。Drawable 对象只是被发送到视图的画布。

如果要测量视图，则必须在视图运行完其测量和布局代码后进行。这意味着在 onCreate() 中执行此操作会返回 0。很多人在 onWindowFocusedChanged 之类的回调中执行此操作会更好

# ios - 带有 AVPlayer 的 AVAudioSession：当 AVPlayer 播放器正在播放时，状态菜单中的“播放”图标不显示

> ID：11442582
> 
> 赞同：3
> 
> 时间：2012-07-11T22:39:32.430
> 
> 标签：ios, audio, background, avplayer, avaudiosession

我有一个 AVPlayer 可以从网上流式传输 mp3 文件。我已经激活了一个 AVAudioSession 以便在应用程序退出/屏幕关闭时播放音频。音乐播放完美，但在播放音乐时，手机顶部状态菜单中出现的小“播放”三角形图标没有出现（与 iOS 中的常见情况一样）。有什么我做错了吗？下面的代码

```
// Set AudioSession
NSError *sessionError = nil;
[[AVAudioSession sharedInstance] setDelegate:self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&sessionError];
[[AVAudioSession sharedInstance] setActive:YES error:nil];

//Direct audio to speakers when there is no headphone
UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);    
UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:33:23.810

对于那些可能遇到这个问题的人，我想通了。你必须让你的玩家的控制器成为第一响应者——特别是远程控制事件。这不仅允许您接收远程控制事件（如通用播放/暂停/前进/后退控制），而且还可以将播放图标放在状态菜单中。

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder]; 
```

# asp.net - SignalR - 离开所有组

> ID：11442591
> 
> 赞同：4
> 
> 时间：2012-07-11T22:40:10.477
> 
> 标签：asp.net, signalr

使用 SignalR 集线器可以在组中添加或删除客户端。一个客户端可以属于多个组。是否可以从当前所属的每个组中删除客户端？我想我正在寻找的是类似的东西`Clients[*allgroups*].leave(Context.ConnectionId)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:22:43.567

从 v0.5.2 开始，无法离开所有组，因为服务器不会跟踪客户端所属的组。您需要自己执行此操作，并从每个组中逐一删除客户端。

然而，在积压中有类似的请求，所以也许这将在未来的版本中实现：[https ://github.com/SignalR/SignalR/issues/66](https://github.com/SignalR/SignalR/issues/66)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-08T19:57:21.257

看起来他们还没有实现这个，但它被认为是 v3 的候选者。[https://github.com/SignalR/SignalR/issues/66](https://github.com/SignalR/SignalR/issues/66)中存在具有以下代码的功能请求

```
public static class SignalRConnectionToGroupsMap
{
    private static readonly ConcurrentDictionary<string, List<string>>  Map = new ConcurrentDictionary<string, List<string>>();

    public static bool TryAddGroup(string connectionId, string groupName)
    {
        List<string> groups;

        if (!Map.TryGetValue(connectionId, out groups))
        {
            return Map.TryAdd(connectionId, new List<string>() {groupName});
        }

        if (!groups.Contains(groupName))
        {
            groups.Add(groupName);
        }

        return true;
    }

    // since for this use case we will only want to get the List of group names
    // when we're removing the mapping - we might as well remove the mapping while
    // we're grabbing the List
    public static bool TryRemoveConnection(string connectionId, out List<string> result)
    {
        return Map.TryRemove(connectionId, out result);
    }
} 
```

# c# - 无法将一段 CURL 转换为 C#

> ID：11442595
> 
> 赞同：0
> 
> 时间：2012-07-11T22:41:03.527
> 
> 标签：c#, asp.net, curl

我有以下 CURL 正在尝试转换为 C#。我没有任何 CURL 经验。

```
$ch = curl_init();
    curl_setopt_array($ch, array(
        CURLOPT_URL            => 'https://api.lanoba.com/authenticate',
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_POST           => true,
        CURLOPT_POSTFIELDS     => array(
            'token'      => $_POST['token'],
            'api_secret' => 'YOUR-API-SECRET'
        )
    )); 
```

到目前为止，我想出了这个：

```
//Object to create a JSON object
public class LanobaJSONObject
{
    public string token { get; set; }
    public string api_secret { get; set; }
}

public void DoAuthenticationCheck()
{

    var token = Request["token"].ToString();

        var jsonObject = new LanobaJSONObject()
        {
            token = token,
            api_secret = "YOUR-API-SECRET"
        };

        var jsonVal = Json(jsonObject, JsonRequestBehavior.AllowGet);

        Uri address = new Uri("https://api.lanoba.com/authenticate");
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(address);
        ServicePointManager.ServerCertificateValidationCallback = delegate
        {
            return
                true; //always trust the presented cerificate
        };
        request.Method = "post";
        request.ContentType = "text/json";
        string response = null;
        using (var streamWriter = new StreamWriter(request.GetRequestStream()))
        {
            streamWriter.Write(jsonVal);
        }

        using (HttpWebResponse resp = request.GetResponse() as HttpWebResponse)
        {
            var reader = new StreamReader(resp.GetResponseStream());
            response = reader.ReadToEnd();
        }
//I keep getting an error code back from the provider with no real error description
//so right now I am assuming that I am doing something wrong on my end

} 
```

任何帮助，将不胜感激。

# 编辑：最终答案：

在 Onkelborg 的帮助下（谢谢！），这里是一个工作示例：

```
 var wc = new WebClient();
    var wcResponse = wc.UploadValues("https://api.lanoba.com/authenticate", new System.Collections.Specialized.NameValueCollection() { { "token", Request["token"].ToString()}, { "api_secret", "Your-Secret-Api--" } });
    var decodedResponse = wc.Encoding.GetString(wcResponse); 
```

再次感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:07:33.967

据我所知，您根本不应该发送 JSON .. :)

在 WebClient 类上使用 UploadStrings/UploadValues（不记得实际名称.. :) ），这几乎正是您想要的 - 它会将 namevaluecollection 发布到给定的 uri 并返回带有答案的字符串 :)

# wpf - 将按钮内容动态绑定到图像按钮的TextBlock？

> ID：11442597
> 
> 赞同：0
> 
> 时间：2012-07-11T22:41:06.790
> 
> 标签：wpf, wpf-controls

我有一个图像按钮的样式如下，我怎样才能使 TextBlock 的文本，等于下面的“POSITION”，与按钮的内容相同？谢谢。

```
<Style x:Key="TopButtonStyle" TargetType="Button">
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Button.BorderBrush" Value="SteelBlue" />
        <Setter Property="Button.BorderThickness" Value="0" />

        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Grid Background="SteelBlue">
                        <Image Source="images/blue_button_up.png" HorizontalAlignment="Center" Margin="0,0,0,0" Height="Auto" Width="Auto" Stretch="UniformToFill"/>
                        <TextBlock Text="POSITION" HorizontalAlignment="Center" Foreground="White" Margin="5,5,0,0"/>
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:46:09.530

`{Binding}`因为`DataContext`在里面`ContentTemplate`是`Content`。

# c++ - 为什么在 pthread_detach() 之后调用 pthread_exit() 在极少数情况下会导致 SEGV？

> ID：11442601
> 
> 赞同：5
> 
> 时间：2012-07-11T22:41:32.293
> 
> 标签：c++, pthreads, centos, race-condition, segmentation-fault

我在 C++ 中获得了一个 SEGV，`pthread_join()`当我的应用程序关闭时，我在调用时无法轻松重现（它发生在大约 100,000 次测试运行中）。我检查了 errno 的值，它是零。这是在 Centos v4 上运行的。

在什么条件下会`pthread_join()`获得 SEGV？这可能是某种竞争条件，因为它极为罕见。有人建议我不应该调用 pthread_detach() 和 pthread_exit()，但我不清楚为什么。

我的第一个工作假设是在另一个线程中仍在运行时`pthread_join()`被调用，`pthread_exit()`并且这会以某种方式导致 SEGV，但许多人表示这不是问题。

在应用程序退出期间在主线程中获取 SEGV 的失败代码大致如下所示（为简洁起见，省略了错误返回代码检查）：

```
// During application startup, this function is called to create the child thread:

return_val = pthread_create(&_threadId, &attr,
                            (void *(*)(void *))initialize,
                            (void *)this);

// Apparently this next line is the issue:
return_val = pthread_detach(_threadId);

// Later during exit the following code is executed in the main thread:

// This main thread waits for the child thread exit request to finish:

// Release condition so child thread will exit:
releaseCond(mtx(), startCond(), &startCount);

// Wait until the child thread is done exiting so we don't delete memory it is
// using while it is shutting down.
waitOnCond(mtx(), endCond(), &endCount, 0);
// The above wait completes at the point that the child thread is about
// to call pthread_exit().

// It is unspecified whether a thread that has exited but remains unjoined
// counts against {PTHREAD_THREADS_MAX}, hence we must do pthread_join() to
// avoid possibly leaking the threads we destroy.
pthread_join(_threadId, NULL); // SEGV in here!!! 
```

在退出时加入的子线程运行以下代码，该代码从上面在`releaseCond()`主线程中调用的位置开始：

```
// Wait for main thread to tell us to exit:
waitOnCond(mtx(), startCond(), &startCount);

// Tell the main thread we are done so it will do pthread_join():
releaseCond(mtx(), endCond(), &endCount);
// At this point the main thread could call pthread_join() while we 
// call pthread_exit().

pthread_exit(NULL); 
```

该线程似乎正常启动，并且在应用程序启动期间创建期间没有产生错误代码，并且线程正确执行了它的任务，这在应用程序退出前大约需要五秒钟。

什么可能导致这种罕见的 SEGV 发生，我该如何防御性地编程。一种说法是我对 pthread_detach() 的调用是问题所在，如果是这样，我的代码应该如何更正。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:52:25.417

假设：

1.  `pthread_create`返回零（您正在检查它，对吗？）
2.  `attr`是一个有效的`pthread_attr_t`对象（你是如何创建它的？为什么不直接传递 NULL 呢？）
3.  `attr`未指定要创建分离的线程
4.  您没有在其他地方调用`pthread_detach`或在线程上`pthread_join`

...那么`pthread_join`失败是“不可能的”，并且您的运行时可能存在其他一些内存损坏或错误。

[更新]

理由部分[`pthread_detach`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_detach.html)说：

> 最终应该为每个创建的线程调用 *pthread_join*() 或 *pthread_detach*() 函数，以便可以回收与线程关联的存储。

尽管没有说这些是相互排斥的，但[`pthread_join`文档](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_join.html)指定：

> *如果 *pthread_join*() 的线程*参数指定的值 不引用可连接线程，则行为未定义。

我很难找到说分离线程不可连接的确切措辞，但我很确定这是真的。

因此，要么调用`pthread_join`要么`pthread_detach`，但不能同时调用两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:54:11.877

如果您阅读[pthread_join](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_join.html)和[pthread_exit](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_exit.html)以及相关页面的标准文档，则连接会暂停执行“直到目标线程终止”，并且调用 pthread_exit 的线程在调用 pthread_exit 之前不会终止，所以您担心的是不是问题。

您可能在某处损坏了内存（如 Nemo 所建议的那样），或从清理处理程序调用 pthread_exit（如 user315052 所建议的那样），或其他原因。但这不是“pthread_join() 和 pthread_exit() 之间的竞争条件”，除非您使用的是错误或不兼容的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:06:05.133

没有足够的信息来全面诊断您的问题。我同意其他发布的答案，即问题更可能是代码中未定义的行为，而不是 和 之间的竞争`pthread_join`条件`pthread_exit`。但我也同意这种竞赛的存在将构成`pthread`库实现中的错误。

关于`pthread_join`：

```
return_val = pthread_create(&_threadId, &attr,
                            (void *(*)(void *))initialize,
                            (void *)this);
//...
pthread_join(_threadId, NULL); // SEGV in here!!! 
```

看起来加入是在一个类中。`main`这开启了在尝试进行连接时可以删除对象的可能性。如果`pthread_join`正在访问已释放的内存，则结果是未定义的行为。我倾向于这种可能性，因为访问释放的内存经常未被检测到。

关于`pthread_exit`：Linux 上的手册页和 POSIX 规范状态：

> 当除第一次调用 main() 的线程之外的线程从用于创建它的启动例程返回时，会进行对 pthread_exit() 的隐式调用。函数的返回值应作为线程的退出状态。
> 
> 如果从作为对 pthread_exit() 的隐式或显式调用的结果而调用的取消清理处理程序或析构函数调用 pthread_exit() 的行为是未定义的。

如果`pthread_exit`在清理处理程序中进行调用，您将有未定义的行为。

# iphone - 隐藏具有多个文本字段的 IOS 键盘

> ID：11442605
> 
> 赞同：0
> 
> 时间：2012-07-11T22:41:44.600
> 
> 标签：iphone, objective-c, ios

我有 2 个并排的文本字段，countryCodeTextField 和 cellphoneTextField

在国家代码文本字段上。我有一个动作 selectCountry 发生在`Edit Did Begin`countryCodeTextField

```
 - (IBAction)selectCountry:(id)sender {
    countryCodeTextField.delegate = self;
    [countryCodeTextField resignFirstResponder]; 
```

*   请注意， self 实现了`<UITextFieldDelegate>`.

问题是当用户点击手机时，如果他点击 countryCodeTextField 键盘会显示，键盘永远不会被关闭。

如果此人首先单击国家代码，则键盘永远不会出现（这就是我想要的）。

为什么用户先点击cellphoneTextField再点击countryCodeTextField时键盘不隐藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:22:45.680

如果您不希望用户能够编辑特定的 UITextField，请将其设置为不启用。

```
 UITextField *textField = ... // Allocated somehow
 textfield.enabled = NO 
```

或者只需在 Interface Builder 中选中已启用的复选框。然后文本字段仍然存在，您将能够通过配置文本来更新它。但正如评论中提到的那样，用户希望 UITextFields 是可编辑的。

另外，为什么要在 IBAction 回调中设置委托？我认为您最好在 Interface Builder 中或在代码中创建 UITextField 时执行此操作。

编辑：

好的 - 所以您希望用户能够选择该框，然后调出一个自定义子视图，他们从中选择将填充该框的内容。

因此，在创建 UITextField 委托时设置它（如上所述）并从 UITextFieldDelegate 协议实现以下内容：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
     return NO;
} 
```

返回 NO。请注意，如果您对两个 UITextField 使用相同的委托，则需要使此方法为另一个字段返回 YES。例如，类似：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
   if (textField == countryTextField)  
       return NO;
   return YES;
} 
```

希望这应该停止显示键盘 - 现在你必须弄清楚如何触发你自己的子视图，我建议通过 IBAction 来做（可能是修饰或其他东西）。你必须在这里测试各种东西，但请记住你有点破坏了 UITextField 的点，也许它会工作，也许它不会，也许它会在下一次 iOS 升级中中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:27:20.897

在您的方法中：

```
- (IBAction)textFieldDidBeginEditing: (UITextField *)textField 
```

称之为：[textField becomeFirstResponder]；

并对这两个字段应用检查，即当 textField 是 countryCodeTextField 时：

```
[textField resignFirstResponder]; 
```

并调用你的方法：

```
[self selectCountry]; 
```

在此方法中显示国家代码列表。

所以你的代码将是：

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    return YES;
}
 - (IBAction)textFieldDidBeginEditing: (UITextField *)textField{

    [textField becomeFirstResponder];

    if (textField == countryCodeTextField){

    [textField resignFirstResponder];
    [self selectCountry];
    }
}

-(IBAction)selectCountry{
    //display the list no need to do anything with the textfield.Only set text of TextField as the selected countrycode.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:08:55.797

好的，首先，我认为您不应该使用 UITextField。我认为您应该使用 UIButton 并将当前值显示为按钮的标题。但是，如果您有心，我会使用我们的好朋友`inputView`，一个属性 on `UITextField`，并将其设置为您的自定义输入视图（我假设它是 UIPickerView 或类似的。）

这有一个额外的好处，即不会为盲人和视障用户严重破坏您的应用程序，在您搞乱标准行为之前，您可能应该意识到这一点。

# bash - Bash for 循环错误

> ID：11442609
> 
> 赞同：0
> 
> 时间：2012-07-11T22:42:07.763
> 
> 标签：bash, for-loop

我正在尝试使用 for 循环的简单 bash 脚本，并不断收到以下错误：

```
'/test.sh: line 2: syntax error near unexpected token `do
'/test.sh: line 2: `do 
```

以下是正在使用的代码...

```
for animal in dog cat elephant
do
    echo "There are ${animal}s.... "
done 
```

但是，当我在其他机器上尝试时..它工作没问题。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:47:17.817

您的`test.sh`脚本具有 Windows 样式的行尾。shell 将每个`\r\n`序列视为`\r`行尾的一个字符。

外壳是看到`do\r`而不是`do`。由于`\r`将光标发送到行首，这就是您在行首看到引号的原因。尝试

./test.sh 2>&1 | 猫-A

查看错误消息中的实际内容。

通过更正行尾之类的方法过滤您的`test.sh`脚本。`dos2unix`（请务必先阅读手册页；`dos2unix`与大多数文本过滤器不同，它会覆盖其输入文件。）

这是 Cygwin 上的常见问题。您是否使用 Windows 编辑器创建脚本？

# ruby-on-rails-3 - Rails 3：将 ActiveRecord 操作和外部信用卡包装在单个事务中

> ID：11442612
> 
> 赞同：2
> 
> 时间：2012-07-11T22:42:39.330
> 
> 标签：ruby-on-rails-3, activerecord, transactions, activemerchant

我正在使用 ActiveMerchant 处理可能成功或失败的信用卡交易，这是涉及使用 ActiveRecord 处理的一些内部会计的更大交易的一部分。如果某个部分失败，我不清楚如何回滚整个事务。

我有一个支付模型和一个积分模型——用户的积分被转换为美元以用于减少他们的支付。所以我需要做这些事情：

*   与金额和积分有关的多项验证
*   保存积分交易：借记用户帐户，贷记内部帐户
*   从信用卡中扣除从积分中扣除的金额
*   保存此付款数据
*   保存信用卡交易结果（无论成功还是失败）
*   然后，如果一切正常，向用户发送电子邮件

我看到[ActiveRecord::Transactions](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)是如何工作的，并假设我可以使用`after_commit`(and `after_rollback`) 回调来处理诸如向用户发送电子邮件之类的事情。

但是，如何让失败的信用卡交易导致与失败的 AR 相同的回滚`save`？`raise ActiveRecord::Rollback`如果我的非 AR 交易失败，是否像打电话一样简单？上面链接的文档中有一个部分让我对此感到紧张（与无法跨多个数据库连接工作的事务有关）。

Rails 3.2.5、MySQL 5.1 (InnoDB)、Ruby 1.9.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:58:00.140

您的 ActiveMerchant 调用是对外部服务器的，因此它不会影响您的 ActiveRecord 交易。随意提高`ActiveRecord::Rollback`。

# ios - IOS：如何检测配对蓝牙 3.0 设备的品牌/型号？

> ID：11442614
> 
> 赞同：0
> 
> 时间：2012-07-11T22:42:52.213
> 
> 标签：ios, xcode, bluetooth, eaaccessory

IOS菜鸟问题在这里，但我希望它不是重复。在针对 IOS 4+ 的 XCode 4.3 上进行开发。我正在努力寻找有关如何获取配对蓝牙设备列表的指导。似乎有多个蓝牙接口，但用于专用目的。如果我有以下错误，请纠正我： CoreBluetooth: Bluetooth LE (Bluetooth 4.0) Gamekit: peer-peer based on session id EAAccessory: MFi Bluetooth devices 在 XCode 3.0 中似乎也有一个已失效的“BlueToothManager”API。有人可以与我分享如何获取当前与运行我的应用程序的设备配对的蓝牙设备列表吗？我只对品牌、型号、标识符（或序列号）感兴趣。我实际上不需要与设备通信，只是为了确定。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:26:56.380

尝试下载此示例并解决您的需求：

[CoreBluetooth-Demo](https://github.com/sergiomtzlosa/CoreBluetooth-Demo) Link 不起作用。链接到 github 404

[Appcelerator-iPhone-蓝牙-模块](https://github.com/smontgomerie/Appcelerator-iPhone-Bluetooth-Module)

[接近](https://github.com/revned/proximity)

[蓝沃基](https://github.com/akosmasoftware/bluewoki)

[钛蓝牙模块](https://github.com/euforic/Titanium-Bluetooth-Module)

希望会有所帮助

# php - 使用 CakePHP 的 SQL JOIN

> ID：11442618
> 
> 赞同：0
> 
> 时间：2012-07-11T22:43:04.470
> 
> 标签：php, mysql, sql, cakephp, join

我有一张`images`桌子和一张`servers`桌子。`images`有一个字段，它是表中字段`server_id`的外键。该表还有一个名为 的字段，这是我要检索的。`id``servers``servers``name`

这是我的控制器操作代码：

```
$images = $this->Image->find('all', array(
    'conditions' => array('Image.user_id' => $this->Auth->user('id')),
    'order' => array('Image.uploaded DESC')
));
$this->set('images', $images); 
```

它得到这样的数据：

```
Array
(
    [0] => Array
        (
            [Image] => Array
                (
                    [id] => 103
                    [orig_name] => Untitled-5.jpg
                    [hash] => MnfWKk
                    [filename] => MnfWKk.jpg
                    [uploaded] => 2012-07-12 00:09:08
                    [views] => 0
                    [album_id] => 
                    [user_id] => 15
                    [server_id] => 1
                )

        )
) 
```

而不是`server_id`，我想从表中获取`name`字段。`servers`我怎样才能调整我的`find()`方法来得到这个？我知道这是一个 SQL 连接，但我不知道如何告诉 Cake 做一个以获取服务器名称。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:34:57.880

**TLDR：**

设置正确的[CakePHP 关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)，并使用[CakePHP 的 Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。（使用[递归](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)-1）。

**更长的描述：**

最好将 find 代码保留在模型本身中，这就是我将展示的内容，但请随意（如果必须）将其移回控制器中。

这样做可以让您`getImages()`从任何控制器调用相同的函数，并根据您想要返回的内容传递不同的参数。像这样编码的好处是，你总是知道你是否正在寻找与查询/数据库相关的代码，你应该在模型中寻找。当下一个查看您的代码的人不必去搜索时，这是非常有益的。

由于图像和服务器之间建立了关联，因此您可以在查询图像时“包含”服务器信息。但是 - 你不能使用“包含”，直到你指定你想要你的模型`$actAs = array('Containable');`。[[ CakePHP 书：可容纳]](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

最后，在您的 AppModel 中，最好设置`$recursive = -1;`. 这使其默认适用`-1`于所有模型。如果出于某种原因您反对这样做，请确保在使用可包含的任何时候将递归设置为 -1。而且 - 一旦你学会使用可包含，你将永远不会回头 - 这太棒了。你可以做的事情还有很多

**代码：**

```
//AppModel *******
//...
$recursive = -1;
//...

//Images controller *******
//...
public function whatever() {
    $opts = array();
    $opts['user'] = $this->Auth->user('id');
    $images = $this->Image->getImages($opts);
    $this->set(compact('images'));
}
//...

//Image model *******
//...
public $actsAs = array('Containable');

public belongsTo = array('Server');

public function getImages($opts = array()) {

    $params = array('condtions'=>array());

    //specific user
    if(!empty($opts['user'])) {
        array_push($params['conditions'], array('Image.user_id'=>$opts['user']);
    }

    //order
    $params['order'] = 'Image.uploaded DESC';
    if(!empty($opts['order'])) {
        $params['opts'] = $opts['order'];
    }

    //contain
    $params['contain'] = array('Server');

    //returns the data to the controller
    return $this->find('all', $params);
} 
```

**其他一些注意事项**

*   您还应该在服务器模型中设置关联。
*   我给出的代码示例写得相当冗长（这是一个词吗？）。随意压缩你认为合适的
*   您还可以扩展模型的 getImages() 方法以接受更多参数，例如 find、limit...等。随心所欲地定制这个 - 这不是这样做的方式 - 就像我通常使用的一样。
*   根据您的问题，如果您只需要一个字段，您可以在“包含”中指定您想要的字段 - 有关详细信息，请参阅本书。
*   现在可能看起来很混乱，但是值得学习如何正确地做这些事情——它会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:35:27.127

Cake 有很多模型关系来实现[这一点](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)。看看这个页面，我想你会使用 belongsTo 关系

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T13:50:48.750

初学者的简单替代方式

```
$images = $this->Image->find('all', array(
    'conditions' => array('Image.user_id' => $this->Auth->user('id')),
    'joins' => array(
                    array(
                        'table' => 'servers',
                        'alias' => 'Server',
                        'type' => 'inner',  //join of your choice left, right, or inner
                        'foreignKey' => true,
                        'conditions' => array('Image.server_id=Server.id')
                    ),
                ),
    'order' => array('Image.uploaded DESC')
)); 
```

这在性能上非常好

# java - 如何在注释处理器中获取字段的类型？

> ID：11442630
> 
> 赞同：3
> 
> 时间：2012-07-11T22:43:59.580
> 
> 标签：java, annotations, java-6, annotation-processing

我正在尝试编写注释来检查对象在运行时是否不可变。为了做到这一点，我检查对象的类是否是最终的，然后它的所有属性是否也是最终的。然后，如果它不是原始类型，我想递归地检查每个字段的类型。

这里有一段代码：

```
for (Element subElement : element.getEnclosedElements()) {
    if (subElement.getKind().isField()) {
        isFinal=false;

        for(Modifier modifier : subElement.getModifiers()) {
            if (modifier.equals(Modifier.FINAL)) {
                isFinal=true;
                break;
            }
        }
        if (!isFinal) {
            processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR, "Field "+element+" is not immutable because it is not final");
        } else {
            // Here I want to restart my method recursively
        }
    }
} 
```

如何让我的方法以我的字段类型重新开始？如何检索字段的类型，这里是 a [`javax.lang.model.element.Element`](http://docs.oracle.com/javase/6/docs/api/javax/lang/model/element/Element.html)？

编辑：我需要包含类中声明的类型，它需要是最终类以避免任何类型的可变性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-08T14:17:53.073

我已经能够使用[Square 的 javapoet](https://github.com/square/javapoet) `ClassName`类来做到这一点：

```
Element element = ...
ClassName className = ClassName.get(element.asType());
String name = className.toString(); 
```

例如，如果带注释的字段是 a `String`，它将返回`Java.lang.String`。我愿意接受比这个更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-25T04:38:43.630

我认为

```
String type = element.asType().toString(); 
```

还获取字段类型的完全限定名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:59:47.717

我以前从来不需要`javax.lang.model`。如果您打算在运行时检查事情，我会通过`java.lang.Class`而`java.lang.reflect.Field`不是。在那里您可以使用`getType`来获取字段的类型。您还可以使用 . 查看所有字段，包括继承的字段`getFields`。或者您可以查看祖先类及其声明的字段，也可以查看私有的。

**编辑：以下考虑似乎不再相关**

请注意，即使该类型信息也会返回声明的类型，即源代码中编写的类型。该字段可能在运行时仍持有对派生类的引用。可能的对策是声明所有这些类`final`，以便没有派生类，或者跟踪对这些字段的所有分配，这意味着主要的静态数据流分析。不确定这是否值得努力。

# ajax - 如何将数据作为表单数据而不是请求有效负载发布？

> ID：11442632
> 
> 赞同：534
> 
> 时间：2012-07-11T22:44:10.127
> 
> 标签：ajax, angularjs, post, angular-http

在下面的代码中，AngularJS`$http`方法调用 URL，并将 xsrf 对象作为“请求有效负载”提交（如 Chrome 调试器网络选项卡中所述）。jQuery`$.ajax`方法执行相同的调用，但将 xsrf 作为“表单数据”提交。

如何让 AngularJS 将 xsrf 作为表单数据而不是请求负载提交？

```
var url = 'http://somewhere.com/';
var xsrf = {fkey: 'xsrf key'};

$http({
    method: 'POST',
    url: url,
    data: xsrf
}).success(function () {});

$.ajax({
    type: 'POST',
    url: url,
    data: xsrf,
    dataType: 'json',
    success: function() {}
}); 
```

* * *

## 回答 #1

> 赞同：624
> 
> 时间：2012-07-11T23:31:37.627

需要在传递的 $http 对象中添加以下行：

```
headers: {'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'} 
```

并且传递的数据应转换为 URL 编码的字符串：

```
> $.param({fkey: "key"})
'fkey=key' 
```

所以你有类似的东西：

```
$http({
    method: 'POST',
    url: url,
    data: $.param({fkey: "key"}),
    headers: {'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'}
}) 
```

来自：[https ://groups.google.com/forum/#!msg/angular/5nAedJ1LyO0/4Vj_72EZcDsJ](https://groups.google.com/forum/#!msg/angular/5nAedJ1LyO0/4Vj_72EZcDsJ)

## 更新

要使用 AngularJS V1.4 添加的新服务，请参阅

*   [仅使用 AngularJS 服务的 URL 编码变量](https://stackoverflow.com/a/30970229/5535245)

* * *

## 回答 #2

> 赞同：194
> 
> 时间：2013-02-14T06:04:49.330

如果你不想在解决方案中使用 jQuery，你可以试试这个。解决方案从这里[https://stackoverflow.com/a/1714899/1784301](https://stackoverflow.com/a/1714899/1784301)

```
$http({
    method: 'POST',
    url: url,
    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
    transformRequest: function(obj) {
        var str = [];
        for(var p in obj)
        str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
        return str.join("&");
    },
    data: xsrf
}).success(function () {}); 
```

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2013-10-28T11:39:15.783

我拿了一些其他的答案，做了一些更干净的东西，把这个`.config()`调用放在你的 app.js 中你的 angular.module 的末尾：

```
.config(['$httpProvider', function ($httpProvider) {
  // Intercept POST requests, convert to standard form encoding
  $httpProvider.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded";
  $httpProvider.defaults.transformRequest.unshift(function (data, headersGetter) {
    var key, result = [];

    if (typeof data === "string")
      return data;

    for (key in data) {
      if (data.hasOwnProperty(key))
        result.push(encodeURIComponent(key) + "=" + encodeURIComponent(data[key]));
    }
    return result.join("&");
  });
}]); 
```

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2015-06-01T19:57:20.907

从 AngularJS v1.4.0 开始，有一个内置服务可以根据[文档页面](https://code.angularjs.org/1.4.0/docs/api/ng/service/$httpParamSerializer)`$httpParamSerializer`上列出的规则将任何对象转换为 HTTP 请求的一部分。

它可以这样使用：

```
$http.post('http://example.com', $httpParamSerializer(formDataObj)).
    success(function(data){/* response status 200-299 */}).
    error(function(data){/* response status 400-999 */}); 
```

请记住，对于正确的表单帖子，`Content-Type`必须更改标题。要对所有 POST 请求全局执行此操作，可以使用此代码（取自 Albireo 的半答案）：

```
$http.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded"; 
```

要仅对当前帖子执行此操作，`headers`需要修改请求对象的属性：

```
var req = {
 method: 'POST',
 url: 'http://example.com',
 headers: {
   'Content-Type': 'application/x-www-form-urlencoded'
 },
 data: $httpParamSerializer(formDataObj)
};

$http(req); 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2012-11-21T09:32:49.810

您可以全局定义行为：

```
$http.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded"; 
```

所以你不必每次都重新定义它：

```
$http.post("/handle/post", {
    foo: "FOO",
    bar: "BAR"
}).success(function (data, status, headers, config) {
    // TODO
}).error(function (data, status, headers, config) {
    // TODO
}); 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2013-11-08T22:57:52.957

作为一种解决方法，您可以简单地使接收 POST 的代码响应 application/json 数据。对于 PHP，我添加了下面的代码，允许我以表单编码或 JSON 的形式发布到它。

```
//handles JSON posted arguments and stuffs them into $_POST
//angular's $http makes JSON posts (not normal "form encoded")
$content_type_args = explode(';', $_SERVER['CONTENT_TYPE']); //parse content_type string
if ($content_type_args[0] == 'application/json')
  $_POST = json_decode(file_get_contents('php://input'),true);

//now continue to reference $_POST vars as usual 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2015-03-24T09:19:28.033

这些答案看起来像是疯狂的矫枉过正，有时，简单就是更好：

```
$http.post(loginUrl, "userName=" + encodeURIComponent(email) +
                     "&password=" + encodeURIComponent(password) +
                     "&grant_type=password"
).success(function (data) {
//... 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2013-10-09T11:00:31.043

您可以尝试以下解决方案

```
$http({
        method: 'POST',
        url: url-post,
        data: data-post-object-json,
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        transformRequest: function(obj) {
            var str = [];
            for (var key in obj) {
                if (obj[key] instanceof Array) {
                    for(var idx in obj[key]){
                        var subObj = obj[key][idx];
                        for(var subKey in subObj){
                            str.push(encodeURIComponent(key) + "[" + idx + "][" + encodeURIComponent(subKey) + "]=" + encodeURIComponent(subObj[subKey]));
                        }
                    }
                }
                else {
                    str.push(encodeURIComponent(key) + "=" + encodeURIComponent(obj[key]));
                }
            }
            return str.join("&");
        }
    }).success(function(response) {
          /* Do something */
        }); 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-05-16T23:41:34.713

为 post 创建一个适配器服务：

```
services.service('Http', function ($http) {

    var self = this

    this.post = function (url, data) {
        return $http({
            method: 'POST',
            url: url,
            data: $.param(data),
            headers: {'Content-Type': 'application/x-www-form-urlencoded'}
        })
    }

}) 
```

在您的控制器或其他任何东西中使用它：

```
ctrls.controller('PersonCtrl', function (Http /* our service */) {
    var self = this
    self.user = {name: "Ozgur", eMail: null}

    self.register = function () {
        Http.post('/user/register', self.user).then(function (r) {
            //response
            console.log(r)
        })
    }

}) 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2014-07-02T12:33:34.227

有一个非常好的教程，涵盖了这个和其他相关[的东西——提交 AJAX 表单：AngularJS 方式](http://scotch.io/tutorials/javascript/submitting-ajax-forms-the-angularjs-way)。

基本上，您需要设置 POST 请求的标头以表明您正在将表单数据作为 URL 编码字符串发送，并将要发送的数据设置为相同的格式

```
$http({
  method  : 'POST',
  url     : 'url',
  data    : $.param(xsrf),  // pass in data as strings
  headers : { 'Content-Type': 'application/x-www-form-urlencoded' }  // set the headers so angular passing info as form data (not request payload)
}); 
```

请注意，这里使用 jQuery 的 param() 辅助函数将数据序列化为字符串，但如果不使用 jQuery，您也可以手动执行此操作。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2015-04-29T10:14:13.373

```
var fd = new FormData();
    fd.append('file', file);
    $http.post(uploadUrl, fd, {
        transformRequest: angular.identity,
        headers: {'Content-Type': undefined}
    })
    .success(function(){
    })
    .error(function(){
    }); 
```

请结账！ [https://uncorkedstudios.com/blog/multipartformdata-file-upload-with-angularjs](https://uncorkedstudios.com/blog/multipartformdata-file-upload-with-angularjs)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-11-05T09:29:15.623

对于 Symfony2 用户：

如果您不想更改 javascript 中的任何内容以使其正常工作，您可以在 symfony 应用程序中进行以下修改：

创建一个扩展 Symfony\Component\HttpFoundation\Request 类的类：

```
<?php

namespace Acme\Test\MyRequest;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\ParameterBag;

class MyRequest extends Request{

/**
* Override and extend the createFromGlobals function.
* 
* 
*
* @return Request A new request
*
* @api
*/
public static function createFromGlobals()
{
  // Get what we would get from the parent
  $request = parent::createFromGlobals();

  // Add the handling for 'application/json' content type.
  if(0 === strpos($request->headers->get('CONTENT_TYPE'), 'application/json')){

    // The json is in the content
    $cont = $request->getContent();

    $json = json_decode($cont);

    // ParameterBag must be an Array.
    if(is_object($json)) {
      $json = (array) $json;
  }
  $request->request = new ParameterBag($json);

}

return $request;

}

} 
```

现在在 app_dev.php 中使用你的类（或你使用的任何索引文件）

```
// web/app_dev.php

$kernel = new AppKernel('dev', true);
// $kernel->loadClassCache();
$request = ForumBundleRequest::createFromGlobals();

// use your class instead
// $request = Request::createFromGlobals();
$response = $kernel->handle($request);
$response->send();
$kernel->terminate($request, $response); 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-10-01T06:32:47.187

仅仅设置 Content-Type 是不够的，发送前对表单数据进行 url 编码。 `$http.post(url, jQuery.param(data))`

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-10-15T23:02:22.053

我目前正在使用我在 AngularJS 谷歌组中[找到的以下解决方案。](https://groups.google.com/forum/#!topic/angular/Qrn0gyjRrkg/discussion)

```
$http
.post('/echo/json/', 'json=' + encodeURIComponent(angular.toJson(data)), {
    标题：{
        'Content-Type': 'application/x-www-form-urlencoded; 字符集=UTF-8'
    }
}).成功（函数（数据）{
    $scope.data = 数据；
});

```

请注意，如果您使用 PHP，则需要使用 Symfony 2 HTTP 组件之类的东西`Request::createFromGlobals()`来阅读此内容，因为 $_POST 不会自动加载它。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-07-22T10:27:08.790

AngularJS 做得对，因为它在 http-request 标头中执行以下内容类型：

```
Content-Type: application/json 
```

如果您像我一样使用 php，甚至使用 Symfony2，您可以简单地扩展您的服务器对 json 标准的兼容性，如下所述：http: [//silex.sensiolabs.org/doc/cookbook/json_request_body.html](http://silex.sensiolabs.org/doc/cookbook/json_request_body.html)

Symfony2 方式（例如在您的 DefaultController 中）：

```
$request = $this->getRequest();
if (0 === strpos($request->headers->get('Content-Type'), 'application/json')) {
    $data = json_decode($request->getContent(), true);
    $request->request->replace(is_array($data) ? $data : array());
}
var_dump($request->request->all()); 
```

优点是，您不需要使用 jQuery 参数，您可以使用 AngularJS 的原生方式来执行此类请求。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-11-20T21:46:28.440

完整答案（从角度 1.4 开始）。您需要包括 de 依赖 $httpParamSerializer

```
var res = $resource(serverUrl + 'Token', { }, {
                save: { method: 'POST', headers: { 'Content-Type': 'application/x-www-form-urlencoded' } }
            });

            res.save({ }, $httpParamSerializer({ param1: 'sdsd', param2: 'sdsd' }), function (response) {

            }, function (error) { 

            }); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-06-14T17:46:43.203

在您的应用配置中 -

```
$httpProvider.defaults.transformRequest = function (data) {
        if (data === undefined)
            return data;
        var clonedData = $.extend(true, {}, data);
        for (var property in clonedData)
            if (property.substr(0, 1) == '$')
                delete clonedData[property];

        return $.param(clonedData);
    }; 
```

根据您的资源请求 -

```
 headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-02-26T11:37:38.660

这不是一个直接的答案，而是一个稍微不同的设计方向：

**不要将数据作为表单发布，而是作为 JSON 对象直接映射到服务器端对象，或者使用 REST 样式的路径变量**

现在我知道这两个选项都不适合您的情况，因为您正在尝试传递 XSRF 密钥。将它映射到这样的路径变量是一个糟糕的设计：

```
http://www.someexample.com/xsrf/{xsrfKey} 
```

因为从本质上讲，您也希望将 xsrf 密钥传递给其他路径`/login`，`/book-appointment`等等，并且您不想弄乱漂亮的 URL

有趣的是，将其添加为对象字段也不合适，因为现在在您传递给服务器的每个 json 对象上，您都必须添加该字段

```
{
  appointmentId : 23,
  name : 'Joe Citizen',
  xsrf : '...'
} 
```

您当然不想在与域对象没有直接语义关联的服务器端类上添加另一个字段。

在我看来，传递 xsrf 密钥的最佳方式是通过 HTTP 标头。许多 xsrf 保护服务器端 Web 框架库都支持这一点。[例如在 Java Spring 中，您可以使用`X-CSRF-TOKEN`header](http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/#csrf-include-csrf-token)传递它。

Angular 将 JS 对象绑定到 UI 对象的出色能力意味着我们可以摆脱将表单一起发布的做法，而改为发布 JSON。JSON 可以很容易地反序列化为服务器端对象，并支持复杂的数据结构，如映射、数组、嵌套对象等。

您如何在表单有效负载中发布数组？也许是这样的：

```
shopLocation=downtown&daysOpen=Monday&daysOpen=Tuesday&daysOpen=Wednesday 
```

或这个：

```
shopLocation=downtwon&daysOpen=Monday,Tuesday,Wednesday 
```

两个设计都很差。。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-06-25T07:56:42.220

这就是我正在做的事情，我需要将登录数据作为表单数据发送到 API，并且 Javascript 对象（userData）会自动转换为 URL 编码数据

```
 var deferred = $q.defer();
        $http({
            method: 'POST',
            url: apiserver + '/authenticate',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            transformRequest: function (obj) {
                var str = [];
                for (var p in obj)
                    str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
                return str.join("&");
            },
            data: userData
        }).success(function (response) {
            //logics
            deferred.resolve(response);
        }).error(function (err, status) {
           deferred.reject(err);
        }); 
```

这就是我的用户数据

```
var userData = {
                grant_type: 'password',
                username: loginData.userName,
                password: loginData.password
            } 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2015-07-13T16:05:17.323

您唯一需要更改的是在创建 $http 对象时使用属性“params”而不是“data”：

```
$http({
   method: 'POST',
   url: serviceUrl + '/ClientUpdate',
   params: { LangUserId: userId, clientJSON: clients[i] },
}) 
```

在上面的示例中，clients[i] 只是 JSON 对象（未以任何方式序列化）。如果您使用“参数”而不是“数据”，角度将使用 $httpParamSerializer 为您序列化对象：[https](https://docs.angularjs.org/api/ng/service/) : //docs.angularjs.org/api/ng/service/ $httpParamSerializer

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2014-12-30T09:28:41.750

使用 AngularJS`$http`服务并使用它的`post`方法或配置`$http`函数。

# vim - 在 vim 中映射 alt+shift+]

> ID：11442642
> 
> 赞同：10
> 
> 时间：2012-07-11T22:45:03.887
> 
> 标签：vim

我想将 ++ 和 ++ 映射`Alt`到and `Shift`（所以它就像在 Mac 上一样工作）`]``Alt``Shift``[``gt``gT`

我该怎么做，因为如果我只是这样做似乎不起作用：

```
map <A-S-]> gt 
```

不知何故`]`需要逃脱什么的

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T22:50:00.707

你的定义没有错。Vim 将正确地映射该组合，但它并没有按照您期望的方式进行。该映射本质上说的是

> 当`Shift`+`Alt`被击中时`]`

在标准键盘上，`]`与 结合使用的字符`Shift`将产生`}`. 这意味着 Vim 永远不会看到与组合的`]`组合，`Shift`而只会看到`}`. 您可以利用它来获得您正在寻找的行为。请尝试以下映射（假设标准 QWERTY 键盘）

```
:map <A-}> gt
:map <A-{> gT 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-12T00:22:07.237

当您想在 vim 中重新映射键时，通常最好进入插入模式，点击`Ctrl+V`，然后键入要重新映射的键。在这种情况下，我得到一个`Escape`字符 ( `Ctrl+[`)，后跟`}`.

我确实喜欢使用`<A-}>`符号，但您可以通过编辑`.vimrc`文件、输入`map`文本、然后点击`Ctrl+V`和点击`Alt+Shift+]`然后添加`gt`. 你最终会得到像这样的一行

```
map ^[} gt 
```

（但使用实际`Escape`字符而不是我必须在这里输入的 a`^`和 a `[`）并且它会起作用。

PS 当我尝试这个时，`Alt+Shift+[`工作正常，但`Alt+Shift+]`似乎已经在我的 vim 副本中使用。我不确定它到底做了什么，但重新映射它对我不起作用。当我输入

```
:map <A-}> 
```

它打印`No mapping found.`

# c - LMAX 中断队列的高性能替代方案是什么？

> ID：11442645
> 
> 赞同：3
> 
> 时间：2012-07-11T22:45:18.993
> 
> 标签：c, concurrency, disruptor-pattern

我正在对 Disruptor Queues 的内部 C 实现进行性能测试，我很想对非线程事件流处理的其他类似方法进行基准测试。谷歌上的内容很少，因此非常感谢任何指针或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:06:36.713

具有 C++ 源的队列目录可能可以移植到 C）：

[http://www.1024cores.net/home/lock-free-algorithms/queues/queue-catalog](http://www.1024cores.net/home/lock-free-algorithms/queues/queue-catalog)

已经将其中一个移植到 Scala 并获得比标准 java.util.concurrent.ConcurrentLinkedQueue 更好的延迟和吞吐量：

[https://github.com/plokhotnyuk/actors/blob/c92576e3b200180ee1c8ea521fb668c538f125ab/src/main/scala/com/github/plokhotnyuk/actors/MPSCQueue.scala](https://github.com/plokhotnyuk/actors/blob/c92576e3b200180ee1c8ea521fb668c538f125ab/src/main/scala/com/github/plokhotnyuk/actors/MPSCQueue.scala)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:29:41.313

这里有一个 C 实现：

[https://github.com/colding/disruptorC](https://github.com/colding/disruptorC)

请注意 README 中关于性能的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T17:17:24.567

我会检查 ØMQ 并通过 PUSH/PULL [sockets使用他们的线程间通信传输](http://api.zeromq.org/3-2%3azmq-socket)[zmq_inproc](http://api.zeromq.org/3-2%3azmq-inproc)。通信是单向的，但却是最快的选择。

# android - ICS 中不推荐使用 ConnectivityManager.getBackgroundDataSetting()；如何改用 getActiveNetworkInfo()

> ID：11442648
> 
> 赞同：1
> 
> 时间：2012-07-11T22:45:34.057
> 
> 标签：android, sync, android-4.0-ice-cream-sandwich

根据 Android SDK 文档`ConnectivityManager`，`getBackgroundDataSetting()`在 Android 4.x 中已弃用，`getActiveNetworkInfo()`应该使用它来查看是否禁用了后台数据：

[http://developer.android.com/reference/android/net/ConnectivityManager.html#getBackgroundDataSetting()](http://developer.android.com/reference/android/net/ConnectivityManager.html#getBackgroundDataSetting())

但是，关闭同步后，当我`NetworkInfo`在服务中查询对象时，没有任何迹象表明后台数据被禁用：

```
ConnectivityManager connMgr = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
// getBackgroundDataSetting always returns true on Android 4.x
if (connMgr != null && !connMgr.getBackgroundDataSetting()) {
    Log.i(WootsUp.TAG, "background data off");
    return;
}

if (connMgr != null) {
    NetworkInfo netInfo = connMgr.getActiveNetworkInfo();
    if (netInfo == null || netInfo.isAvailable() == false || netInfo.isConnected() == false) {
        Log.i(WootsUp.TAG, "no active network");
        return;
    }
} 
```

当我关闭同步时，既不`isAvailable()`也不返回 false。`isConnect()`

`NetworkInfo`我应该查询是否有不同的方法来查看后台数据是否被禁用？仅供参考，我正在使用警报驱动的服务，而不是使用 SyncAdapter API，如果这有影响的话。

谢谢，

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:56:45.007

“背景数据”设置已在 ICS 中移动。它与“同步”设置分开。

您可以在设置 -> 数据使用 -> 菜单按钮 -> 限制背景数据下找到“背景数据”设置。

getActiveNetworkInfo() 确实尊重此设置。

另请参阅[https://android.stackexchange.com/a/17456](https://android.stackexchange.com/a/17456)

# javascript - 检查动态 Web 应用程序占用的空间

> ID：11442650
> 
> 赞同：1
> 
> 时间：2012-07-11T22:45:40.047
> 
> 标签：javascript, html, firefox, google-chrome

如何检查动态 Web 应用程序占用的磁盘空间？

我想知道动态 Web 应用程序的 CSS 文件、脚本文件和图像的大小总和。

* * *

这是一个在线网站，所以我无权访问根文件夹来检查大小，并且文件夹中的文件实际上并未发送到客户端，因为内容是使用 AJAX 按请求发送的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:53:47.397

在 Chrome 中，您可以打开“开发者工具”窗口（扳手 > 工具 > 开发者工具，或 Ctrl+Shift+I）并切换到“网络”选项卡。然后在您要检查的页面上，按住 shift 并单击刷新以强制重新加载而不从缓存中加载。加载完所有内容后，您应该会看到请求总数和传输的字节数。

![截屏](../Images/f9a514b40ad26de3b088daebfa2a3fd9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:47:02.353

查看包含所有内容的文件夹的文件大小（在您的文件系统中，无论是 Windows、Mac 还是其他）:-)

# c# - 显示验证消息，但清除值

> ID：11442652
> 
> 赞同：4
> 
> 时间：2012-07-11T22:46:02.460
> 
> 标签：c#, asp.net-mvc, validation, asp.net-mvc-4, data-annotations

我一直在四处寻找，但我无法找到看似简单的要求的答案：

使用 MVC Data Annotation 验证，是否可以在验证摘要或字段旁边显示验证消息（'必须是最大长度为 5 的字符串'），但清除文本框的值（当验证失败时）。

我尝试使用`ModelState.Clear()`and `ModelState.Remove("CompanyName")`，但这会清除值*和*验证消息（验证状态）。

我问这个是因为最近我们进行了渗透测试，其中一个建议是如果验证失败，则不要*预先填充*安全值（信用卡号等）。这显然是一个小问题，但如果我们没有必要，建议不要通过互联网（从服务器）发回价值。

这是我正在使用的代码：

```
public ActionResult Edit()
{
    return View();
}

[HttpPost]
public ActionResult Edit(CompanyInput input)
{
    if (ModelState.IsValid)
    {
        return View("Success");
    }
    //ModelState.Clear // clears both the value and validation message
    //ModelState.Remove("CompanyName") // same result
    return View(new CompanyInput());
} 
```

和视图模型：

```
public class CompanyInput
{
    [Required]
    [StringLength(5)]
    public string CompanyName { get; set; }

    [DataType(DataType.EmailAddress)]
    public string EmailAddress { get; set; }
} 
```

和观点：

```
@model Test.Models.CompanyInput

<h2>Edit</h2>

@using (Html.BeginForm("Edit", "Company"))
{
    @Html.EditorForModel()
    <button type="submit">Submit</button> 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:26:54.170

因为 ModelState 无效，您必须创建自定义验证器或 jQuery ajax/json 调用来确定是否需要清除数据。

只需将模型属性更改为 string.Empty 或类似的东西不会起作用，因为整个视图会使用先前成功发布的模型重新渲染，但会出现 ModelState 验证错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T23:54:19.227

每个字段的 ModelState 不仅包含值，因此将其从集合中完全删除会按预期删除您的错误消息。我相信你应该能够通过做类似的事情来清除价值。

```
ModelState["CompanyName"].Value = null; 
```

**EDIT:** Upon closer inspection I found that the Value property is of type `ValueProviderResult`, simply nulling it doesn't give the desired result, and because the properties of this class appear to be getters only you have to replace the instance with your own. I've tested the following and it works for me.

```
ModelState["CompanyName"].Value = new ValueProviderResult(string.Empty, string.Empty, ModelState["CompanyName"].Value.Culture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T22:54:16.010

是的，您可以添加这样的错误消息

```
[Required(ErrorMessage = "must be a string with a maximum length of 5")] 
```

OP明确后更新：

清除例如 Input.Field = string.Empty;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T23:03:58.757

您可以创建一个从类继承的自定义验证类`ValidationAttribute`以下链接清楚地说明了如何实现适合您的问题的自定义验证类。

[自定义数据注释](http://odetocode.com/blogs/scott/archive/2011/02/21/custom-data-annotation-validator-part-i-server-code.aspx)

# android - Android 和 IOS 上 zxing 解码的不同行为

> ID：11442656
> 
> 赞同：0
> 
> 时间：2012-07-11T22:46:17.900
> 
> 标签：android, iphone, decode, qr-code, zxing

我已经在Android上完成了将文本编码为二维码的工作，解码部分也运行良好。而且只是为了好玩，我把汉字编码成二维码，安卓上的zxing可以很好的识别。但是，我尝试了zxing iPhone app，它无法解码中文（长时间没有结果，而Android代码只需1秒即可返回识别的文本）。我还没有查看 IOS 的 zxing sdk，只是好奇为什么同一家公司的应用程序在这两个平台上的行为会有所不同，我认为算法应该是相同的。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T03:09:48.730

由于你不是中国人，但你发现了这个问题。你一定是一个好的测试人员。如您所知，zxing decode 与 iOS 和 Android 不同。可以说zixng iOS是zxing Android的子集（我认为）。如果要在zxing iOS 中支持中文，则必须改进c++ 端口中的StringUtils.cpp。添加这些代码可能会对您有所帮助。

```
if (length > 2) {
    for (int i = 0; i < length - 1; i++) {
        int value = bytes[i] & 0xFF;
        if (value > 0x7F) {
            if (value > 0xB0 && value <= 0xF7) {
                int value2 = bytes[i + 1] & 0xFF;
                if (value2 > 0xA0 && value2 <= 0xF7)
                    return GB2312;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:59:14.350

ZXing 不是一家公司，它是一个开源项目。

更重要的是，在这种情况下，从事 Java (Android) 和 C++ (iOS) 端口工作的人员重叠但并不相同。正如 ZXing 常见问题解答中提到的，这些端口是不等价的。

但是，Java 和 C++ 中的 QR 码支持非常小心地保持同步，因此结果应该不会有太大差异。您最好的选择是将导致问题的代码发布到 ZXing 邮件列表，以便人们有机会进行调查。

（FWIW，我是 C++/iOS ZXing 端口最常见的贡献者之一。）

# html - 浮动元素左右独立大小css

> ID：11442661
> 
> 赞同：0
> 
> 时间：2012-07-11T22:46:46.993
> 
> 标签：html, css

只是试图做一些像左右浮动的事情，但与高度无关......

这是我的[示例](http://jsfiddle.net/bta5Q/)，此示例中的问题 2 和 4 不存在似乎有空间。不确定如何实现最佳方法并且在不同的浏览器中没有问题（仅在 chrome 中进行测试）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:49:05.403

将“float left”元素放在一个容器中，将“float right”元素放在另一个容器中。然后浮动容器而不是元素。

# jpa-2.0 - 如何在 Spring Data JPA（或标准 JPA 2）中处理 EntityNotFoundException

> ID：11442663
> 
> 赞同：2
> 
> 时间：2012-07-11T22:47:01.553
> 
> 标签：jpa-2.0, spring-data

我正在清理数据库。这些过程涉及更改某些字段的格式并消除一些数据完整性问题。

我用 Spring Data 1.1 开发了一个程序来批量处理记录。@OneToOne 关系中的 2 个实体会出现问题。尽管实体 A 引用了实体 B，但实体 B 的记录不存在。如果是这种情况，我的工作是清除对实体 B 的引用。

问题是：我应该预处理数据以清理它，还是如果找不到实体，我可以调整 Spring Data 或 JPA 设置以将 null 放在字段中？

这是“正常的” - 使用这些数据 - 在实体 A 中有一个在实体 B 中不存在的 FK，所以我想在我的代码中处理这个，而不必使用额外的步骤或其他工具预处理数据. 数据将分批到达，因此任何预处理都会使用户的事情变得更加复杂。

总之，我希望 Spring Data 将该字段设置为 null 并继续该过程，而不是获取`org.springframework.orm.jpa.JpaObjectRetrievalFailureException: Unable to find...`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T03:52:07.063

也许您正在寻找 @NotFound 注释？

[这](https://stackoverflow.com/questions/7146064/bypass-entity-not-found-error-with-jpa)是一篇讨论它的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T11:21:25.813

我遇到了同样的问题，因为我的 orm 映射有错误的@一对一单向关系。

# audio - 如何在 XAudio2 中设置子混音的输出？（地铁）

> ID：11442665
> 
> 赞同：1
> 
> 时间：2012-07-11T22:47:12.530
> 
> 标签：audio, microsoft-metro, xaudio2

我尝试使用 SetOutputVoices 函数和构造函数参数，但是当用于子混音语音时，两者都会导致 XAUDIO2_E_INVALID_CALL 作为结果。

文档说你是通过从音频回调中调用它来得到这个错误的，但我不是。我什至尝试在启动音频引擎之前调用它。

同样的方法适用于源声音，所以我很确定我没有传递一个糟糕的 XAUDIO2_VOICE_SENDS 结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:17:03.953

子混音具有处理顺序，由 IXaudio2.CreateSubmixVoice 中的 processingStage 参数指定

您只能将输出发送到处理阶段较低的子混音。我在默认处理阶段 (0) 拥有所有子混音。

# .net - 简单的 T4 模板在 Visual Studio 2010 中不起作用，但在 MonoDevelop 中起作用？

> ID：11442667
> 
> 赞同：4
> 
> 时间：2012-07-11T22:47:21.723
> 
> 标签：.net, visual-studio-2010, mono, t4

我有各种各样的地狱让 Visual Studio 2010 编译我的 T4 模板。我很确定这个相同的模板在 2008 年有效，但我现在无法确认。我确信它适用于 MonoDevelop。

无论如何，这是我的模板的标题：

```
<#@ template language="C#v3.5" hostspecific="true" #>
<#@ output extension="cs" #>
<#@ assembly name=“System.Core” #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Linq" #> 
```

Visual Studio 2010 抱怨第一行，即模板指令：

> 以错误的格式指定了指令。转换将不会运行。请以 <#@ name [parameterName="parameterValue"]* #> 格式指定指令

为什么这没有按预期工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T22:56:36.303

# c# - 如何在 WSS 3.0 站点中嵌入 ASP.NET MVC 3 应用程序？

> ID：11442671
> 
> 赞同：0
> 
> 时间：2012-07-11T22:47:42.143
> 
> 标签：c#, asp.net-mvc, sharepoint-2007, wss-3.0

我对 SharePoint 开发非常陌生，我想知道如何将 ASP.NET 网站（最好是 MVC 3）嵌入到 WSS 3.0 网站中。我最近使用过 ASP.NET MVC 3，过去使用过 ASP.NET 3.5。

我计划将 SharePoint 用于管理任务和工作流。我需要在 SharePoint 中放置 aspx 或 mvc 页面。这些页面将允许用户对外部数据库执行 CRUD 操作。我想做的事可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:52:00.253

首先，即使有办法将 MVC 应用程序嵌入共享点，WSS 3 也是基于 .NET 2.0 运行时，而 MVC3 需要 .NET 4 运行时。这很可能永远不会奏效。

其次，我认为在 SharePoint 中嵌入 MVC 站点是不可能的，因为 sharepoint 有一组非常具体的基于 WebParts 的扩展方法，WebParts 是一种 ASP.NET 工具。您可以获得的最接近的方法是在共享点页面中使用 iframe，但这将是一个外部站点，SP 和站点之间没有交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:21:40.280

我无法在 SharePoint 中嵌入 MVC 应用程序，但我能够使用以下教程嵌入 .NET 4.0 ASP.NET Web 应用程序：

[http://www.devexpertise.com/2009/02/18/integrating-a-custom-aspnet-application-into-sharepoint-part-1/](http://www.devexpertise.com/2009/02/18/integrating-a-custom-aspnet-application-into-sharepoint-part-1/)

我尚未对其进行全面测试并确认所有 .NET 4.0 功能都可以正常工作，但到目前为止还不错。

# resharper - 禁用自动文件头创建（ReSharper 和 StyleCop）

> ID：11442676
> 
> 赞同：10
> 
> 时间：2012-07-11T22:48:07.777
> 
> 标签：resharper, stylecop, resharper-6.0, code-documentation

我最近安装了带有 StyleCop 4.7.34.0（带有 R# 插件）的 R# 6.1（C# 版本，不是完整版）。在项目中添加新类时，会自动添加文件头信息。你如何禁用它？

我已经在 StyleCop 的 R# 选项（选项 > 工具 > StyleCop > 标题部分）中关闭了“将文本插入文档和文件标题”的复选框......但仍然没有运气。

我还关闭了需要标头文档的 StyleCop 规则 SA1633 到 SA1640。

我发现这个[相关的帖子](https://stackoverflow.com/questions/8165425/resharper-how-to-disable-generation-of-rubbish-documentation-headers-in-code-c)表明：

> ReSharper -> 选项 -> 工具部分 -> 代码清理 -> 选择 StyleCop 配置文件 -> 文档部分 -> 取消勾选 1600

但我的工具部分没有“代码清理”节点。不确定我使用 R# 的“C#”版本是否与此有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:13:21.077

问题实际上是因为这个： [http ://stylecop.codeplex.com/discussions/348351/](http://stylecop.codeplex.com/discussions/348351/)

当您尝试取消选中代码清理下的 StyleCop 设置（选项 > 代码编辑 > 代码清理 > StyleCop > 1600 和 1633-1641）并单击保存时，它实际上并没有保存更改！这似乎是 ReSharper 中的一个错误。

我发现的唯一解决方法是创建一个新配置文件 ( `Add`) 并立即取消选中 1600 然后单击`Save`。这必须设置为`Profile to use on silent cleanup`. 祝你好运

* * *

编辑：这是我的个人资料的设置，设置为“无声清理”。它不添加标题。希望有帮助 ![ReSharper 代码清理配置文件](../Images/f2cde5464c7c6cdeffb6dfb9910a8a9d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T14:32:46.707

我遇到了这个问题，发现问题不是 ReSharpers 全局 StyleCop 设置（arserbin3s 答案）；但项目特定的。

右键单击现有项目并选择“StyleCop 设置”。 [第一步](http://i.stack.imgur.com/PpoSP.png)

从那里取消选择“文档规则”（或您想要的特定规则）。 [第二步](http://i.stack.imgur.com/UPbmc.png)

最后，我不得不关闭并打开 Visual Studio。这阻止了 Resharper 重构编写标题和文档。

您可能对我有不同的上下文菜单选项。无论哪种方式，关键是 StyleCop 可以是特定于项目的。

stylecop.codeplex.com/wikipage?title=管理%20StyleCop%20Project%20Settings

# javascript - 使用javascript以编程方式触发iOS Safari中的复制菜单？

> ID：11442682
> 
> 赞同：10
> 
> 时间：2012-07-11T22:48:51.893
> 
> 标签：javascript, ios, safari, copy

我正在尝试实现一种用户友好的方式来将一些文本从文本输入字段复制到 iOS/Safari 上的剪贴板。我知道在这个平台上没有办法以编程方式做到这一点，但我希望我能尽可能地指导用户体验。

在 iOS/Safari 上，当用户手动突出显示某些文本时，会弹出上下文复制菜单。我希望以编程方式选择文本时会弹出相同的菜单，但事实并非如此。甚至有可能做到这一点吗？

如果没有，关于如何最好地实现用户友好体验以将一些文本复制到 iOS/Safari 上的剪贴板的任何建议？

作为参考，我正在使用此问题中描述的方法 [选择文本：Programmatically selection text in an input field on iOS devices (mobile Safari)](https://stackoverflow.com/questions/3272089/programmatically-selecting-text-in-an-input-field-on-ios-devices-mobile-safari)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-08T13:10:02.003

不幸的是，这是不可能的。我会在输入下方包含一些信息性文本，希望在用户友好性方面可以解决问题。

另一种选择是原生，例如通过使用PhoneGap 进行包装，但我猜你已经很清楚这个选项了。如果是这样，这样的事情将在本机代码中工作：

```
[UIPasteboard generalPasteboard].string = @"your string"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T13:42:03.173

从 javascript 可以在 iOS 的帮助下（目标 C）。

```
var getVal = $("#textid").val();
localStorage.setItem("getVal",getVal); 
```

然后您可以使用您的本机代码从本地存储中获取此值。

我不了解目标 C，但您可以在 js 代码之后使用该方法。

# android - Android XML 中的新行 (\n)。Android 4.1 SDK 兼容性问题？

> ID：11442686
> 
> 赞同：0
> 
> 时间：2012-07-11T22:49:14.370
> 
> 标签：android, xml, layout, newline

我遇到了这个奇怪的问题。

在我的布局 xml 中，我有一个`TextView`，其中有以下文本：

“*欢迎使用应用程序。\n**等***”，在 中定义`strings.xml`。

在运行 4.0 的平板电脑中显示完整的字符串。

在运行 2.3.7 的智能手机中，它显示在`\n`.

在我以前创建的应用程序上，`\n`工作正常。

有人遇到过类似的事情吗？

XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textViewWelcomeNotes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="false"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="false"
        android:layout_margin="15dp"
        android:layout_marginTop="20dp"
        android:fitsSystemWindows="false"
        android:focusableInTouchMode="true"
        android:gravity="center_vertical|center_horizontal"
        android:hint="@string/msgWelcomeNotesHint"
        android:paddingTop="10dp"
        android:text="@string/msgWelcomeNotes"
        android:textSize="14dp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:15:40.270

这是最新的一个奇怪的错误`ADT 20.0`，在`Eclipse Juno`.

我重新安装了 Eclipse Juno，因为我用插件大量加载了它，现在`\n`在同一个 apk 中，在 2.3 和 4.0+ Android 版本上看起来没问题。

`New->Other->Android Activity`此 ADT 上还存在一些其他错误，例如创建新活动 ( ) 时。

# objective-c - 使按钮在缩放时改变大小

> ID：11442691
> 
> 赞同：0
> 
> 时间：2012-07-11T22:49:32.923
> 
> 标签：objective-c, uiview, uiscrollview, uibutton

我有一个 UIScrollView，里面有一个 UIImageView 和 UIButton。

![在此处输入图像描述](../Images/74be8299aa75354f4a067adf0b8f401b.png)

[我在这里](https://stackoverflow.com/questions/1580100/uibuttons-over-a-uiimageview-zooming)阅读答案，如果我有一个包含所有可缩放内容的视图，那么我应该没问题。问题是图像缩放时按钮不会缩放。

我认为我所拥有的会起作用，因为滚动视图是可缩放视图。

我是否需要创建另一个 UIView 并将所有内容都放在那里（并保持相同的层次结构？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:58:09.753

你检查过你的弹簧和支柱吗？在“自动调整大小”下查看大小检查器。那些小红线..如果这没有意义，请搜索“自动布局”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:00:40.353

我最终通过在代码中声明按钮来解决这个问题，并将 UView 添加到层次结构中。uiview是滚动视图的子视图，imageview是uiview的子视图。然后我将按钮添加到uiview。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
...
[view addSubview:button]; 
```

# xml - 在 muenchian 分组中，当我可以直接使用密钥时，为什么要选择 generate-id？

> ID：11442693
> 
> 赞同：1
> 
> 时间：2012-07-11T22:49:36.960
> 
> 标签：xml, xslt, xslt-1.0, muenchian-grouping

我的输入 xml 文件如下：

```
<root>
  <Property>
    <Name>Jack</Name>
    <Color>red.green</Color>    
  </Property>
  <Property>
    <Name>Jill</Name>
    <Color>red.blue</Color>    
  </Property>
  <Property>
    <Name>Jim</Name>
    <Color>red.orange</Color>    
  </Property>
  <Property>
    <Name>Tom</Name>
    <Color>black.brown</Color>    
  </Property>
  .
  .
  . 
  <Property>
    <Name>Tom</Name>
    <Color>white</Color>    
  </Property>
</root> 
```

在 XSLT 1.0 中，我想选择其元素值之前的所有 Property 元素。是相同的，并在 之前取得相同的值。作为一个记录。

示例（使用示例子输入文件） 1) input.xml

```
 <root>
      <Property>
        <Name>Jack</Name>
        <Color>red.green</Color>    
      </Property>
      <Property>
        <Name>Jill</Name>
        <Color>red.blue</Color>    
      </Property>
      <Property>
        <Name>Jim</Name>
        <Color>red.orange</Color>    
      </Property>             
    </root> 
```

示例子 output.xml

```
<red>
  <green>Jack<green>
  <blue>Jill<blue>
  <orange>Jim<orange>      
<red> 
```

2) 输入.xml

```
 <root>
      <Property>
        <Name>Jack</Name>
        <Color>red.green</Color>    
      </Property>
      <Property>
        <Name>Jill</Name>
        <Color>green.orange</Color>    
      </Property>
      <Property>
        <Name>Jim</Name>
        <Color>orange.red</Color>    
      </Property>
      <Property>
        <Name>Ted</Name>
        <Color>brown</Color>    
      </Property>     
    </root> 
```

示例子 output.xml

```
<red>
  <green>Jack</green>
</red>
<green>
  <orange>Jill<orange> 
</green>   
<orange> 
  <red>Jim</red>
</orange> 
<brown>Ted</brown> 
```

我在stackoverflow本身中问过类似的问题，但我对类似的陈述感到困惑

```
<xsl:apply-templates select="/root/Property[generate-id(.) = generate-id(key('test',Property)[1])]"/> 
```

其中关键是：

```
<xsl:key name='test' match='Property' use='.'/> 
```

[这里还有一个问题：键的匹配值应该作为 Property 或 root/Property 给出。我认为 key 根据上下文选择 Property 元素。（这里的上下文是 /root/Property，因为它是语句中给出的 XPATH 表达式`<xsl:apply-templates select="/root/Property)`Is that true please clear this.]

我真正关心的是

而不是使用这个：

```
<xsl:apply-templates select="/root/Property[generate-id(.) = generate-id(key('test',Property)[1])]"/> 
```

我可以使用这个：

```
<xsl:apply-templates select="key('test',//root/Property)"/> 
```

关键在哪里

```
<xsl:key name='test' match='Property' use='.'/> 
```

实际区别是什么（在执行和流程方面）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:34:37.057

该指令

```
<xsl:apply-templates select="key('test',//root/Property)"/> 
```

获取所有 Property 元素，提取它们的值，然后对于每个值，找到所有具有该值的 Property 元素；然后它消除了重复；所以最终结果是您通过一条非常冗长的路线找到所有 Property 元素。

该指令

```
<xsl:apply-templates 
select="/root/Property[generate-id(.) = generate-id(key('test',Property)[1])]"/> 
```

也不正确，除非您的 Property 元素有称为 Property 的子元素，这似乎不太可能。我想你打算

```
<xsl:apply-templates 
select="/root/Property[generate-id(.) = generate-id(key('test',.)[1])]"/> 
```

如果它的标识符 (generate-id) 与具有该值的第一个 Property 元素的标识符相同，则这样做是选择一个 Property 元素。换句话说：对于输入中的每个属性值，都有一组具有该值的 Property 元素，它的作用是选择每个组中的第一个元素。

如果您仍然无法理解它，请尝试迁移到 XSLT 2.0，其中分组变得非常简单。

# c - 我在这个终端里做什么？：C 编程

> ID：11442695
> 
> 赞同：-4
> 
> 时间：2012-07-11T22:49:39.643
> 
> 标签：c, ubuntu

这是程序的源代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int check_authentication(char *password)
{
if(strcmp(password, "brillig") == 0)
 return 1;

if(strcmp(password, "outgrabe") == 0)
 return 1;

   return 0;
}

int main(int argc, char *argv[])
{
if(argc < 2)
{
 printf("Usage: %s <password>\n", argv[0]);
 exit(0);
   }

   if(check_authentication(argv[1]))
   {
  printf("\n-=-=-=-=-=-=-=-=-=-=-=-=-=-\n");
  printf(" Access Granted.\n");
  printf("-=-=-=-=-=-=-=-=-=-=-=-=-=-\n");
    }
      else
     {
   printf("\nAccess Denied.\n");
     }
     return 0;
 } 
```

我到底对这张图片中的程序做了什么？ [http://i.imgur.com/7FF9x.png](http://i.imgur.com/7FF9x.png)。

当我尝试在 Windows 中运行该程序时，我无法向其中输入任何内容，但在 UBUNTU 中，我想我正在输入一些内容，但我不确定发生了什么。

如果我在 Windows [http://i.imgur.com/0X8ZO.png](http://i.imgur.com/0X8ZO.png)中运行它会发生这种情况，

顺便说一句，程序的重点是演示缓冲区溢出。

* * *

Linux 调用，截取自屏幕截图：

```
 $ ./auth_overflow AAAAAAAAAAAAAAAA

Access Denied.

 $ ./auth_overflow AAAAAAAAAAAAAAAAAAAAAAAAAAAAA

-=-=-=-=-=-=-=-=-=-=-=-=-=-
  Access Granted.
-=-=-=-=-=-=-=-=-=-=-=-=-=- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:12:15.680

从OP的评论：

> 好吧，我来自 C++ 背景，这很可能是这让我感到困惑的原因。我只是问为什么当我在代码块中键入程序并点击运行和构建时我不能输入任何内容。

您正在从 读取输入`argv`，这是程序运行时在命令行上提供的参数列表。当您使用 IDE 中内置的“运行”命令时，您的程序将在没有命令行参数的情况下运行（至少默认情况下）。不要通过 IDE 运行程序，而是打开命令提示符并手动运行程序。这样，您可以使用参数运行程序（就像您在 Linux shell 中所做的那样），`argv`以便您的程序可以读取一些内容。

# jenkins - 在 Jenkins v1.461 上使用 Maven 3 命中 org.apache.maven.lifecycle.LifecycleExecutionException

> ID：11442697
> 
> 赞同：2
> 
> 时间：2012-07-11T22:49:46.987
> 
> 标签：jenkins, maven-3, maven-failsafe-plugin

我正在尝试从 Maven 2 切换到 Maven 3 (v3.0.4)。使用的基本命令是 jenkins 上的 mvn clean verify。

当我在 jenkins 上运行构建时，我在它的控制台上得到以下堆栈跟踪：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE

<snip />

Waiting for Jenkins to finish collecting data
mavenExecutionResult exceptions not empty
message : Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.12:verify (default) on project myProject: There are test failures.

Please refer to /home/tc/.jenkins/jobs/myProject-selenium-adhoc/workspace/target/failsafe-reports for the individual test results.
cause : There are test failures.

Please refer to /home/tc/.jenkins/jobs/myProject-selenium-adhoc/workspace/target/failsafe-reports for the individual test results.
Stack trace : 
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-failsafe-plugin:2.12:verify (default) on project myProject: There are test failures.

Please refer to /home/tc/.jenkins/jobs/myProject-selenium-adhoc/workspace/target/failsafe-reports for the individual test results.
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
at hudson.remoting.UserRequest.perform(UserRequest.java:118)
at hudson.remoting.UserRequest.perform(UserRequest.java:48)
at hudson.remoting.Request$2.run(Request.java:287)
at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.maven.plugin.MojoFailureException: There are test failures.

Please refer to /home/tc/.jenkins/jobs/myProject-selenium-adhoc/workspace/target/failsafe-reports for the individual test results.
at org.apache.maven.plugin.surefire.SurefireHelper.reportExecution(SurefireHelper.java:121)
at org.apache.maven.plugin.failsafe.VerifyMojo.execute(VerifyMojo.java:208)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
... 27 more
Maven failed with error.
Sending e-mails to: person@org.com
channel stopped
2012-07-11 21:01:31.564:INFO::Shutdown hook executing
2012-07-11 21:01:31.564:INFO::Shutdown hook complete
Archiving artifacts
Sending e-mails to: person@org.com
Finished: SUCCESS 
```

我已经尝试在网上非常努力地搜索，尝试各种 pom 更改并使用 -e、-X、-fae 等运行 maven，但似乎没有什么能让我摆脱这个堆栈跟踪 :( .. 一直在苦苦挣扎现在几天。

任何能够提供一些建议和/或通过解决方案指出问题的人将不胜感激。

请注意，该项目的组织方式如下：

```
Parent pom
|
----------> module 1
----------> module 2
----------> ...
----------> module 6 
```

其中模块 6 对应于上面的 myProject，它依赖于一些库（即模块 1、模块 2 等）。

父 pom 有：

```
<reporting>
  <plugins>
      { several plugins including maven-dependency-plugin, maven-project-info-reports-plugin, cobertura-maven-plugin, maven-surefire-report-plugin (v2.12) 
       and maven-surefire-report-plugin (v2.12) specifically w/
        <reportSets>
          <reportSet>
            <id>integration-tests</id>
            <reports>
              <report>failsafe-report-only</report>
            </reports>
          </reportSet>
        </reportSets>
      }
  </plugins>
<reporting> 
```

和

```
<build>
  <pluginManagement>
    <plugins>
        {several plugins including maven-surefire-plugin, maven-surefire-report-plugin (v2.12), maven-assembly-plugin, maven-release-plugin (v2.3.2)
    </plugins>
  </pluginManagement>
    <plugins>
        {several plugins including maven-site-plugin (v3.1), maven-compiler-plugin (v2.5.1), maven-release-plugin (v2.3.2)
    </plugins>
</build> 
```

另请注意，当测试失败时，我会准确地看到问题，即当测试失败时，我想获得一个干净的（没有堆栈跟踪等）控制台输出。事实上，在我上面提到的故障排除过程中，我实际上设置了一个（故意）失败的测试。此外，当我查看“/home/tc/.jenkins/jobs/myProject-selenium-adhoc/workspace/target/failsafe-reports”时，故障安全报告/测试失败详细信息输出看起来不错，即我看到了预期的测试失败屏幕截图（我们框架中的自定义逻辑）以及各种摘要/报告，例如具有正确内容的 emailable-report.html。

谢谢 ！

# rally - Rally App SDK 2.0：如何获得工具提示

> ID：11442700
> 
> 赞同：0
> 
> 时间：2012-07-11T22:50:04.793
> 
> 标签：rally

如果我有一个 PortfolioItems 的拉力网格，并且在列配置中包含 PercentDoneByStoryPlanEstimate，我会按预期获得进度条。但是，当我将鼠标悬停在进度条上时，我看不到带有我在 Rally 本身中看到的额外信息的工具提示。

如何让工具提示显示在应用程序中？

示例代码：

```
 Rally.onReady(function() {
        Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

            launch: function() {
                Rally.data.ModelFactory.getModel({
                    type: 'PortfolioItem',
                    success: function(model) {
                        this.grid = this.add({
                            xtype: 'rallygrid',
                            model: model,
                            columnCfgs: [
                                'FormattedID',
                                'Name',
                                'PercentDoneByStoryPlanEstimate'
                            ]
                        });
                    },
                    scope: this
                });
            }
        });

        Rally.launchApp('CustomApp', {
            name: 'Grid Example'
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:54:27.320

您只需要指定一个 viewConfig 并添加 'rallypercentdonetooltip' 插件，如下所示：

```
success: function(model) {
    this.grid = this.add({
        xtype: 'rallygrid',
        model: model,
        columnCfgs: [
            'Name',
            'FormattedID',
            'PercentDoneByStoryPlanEstimate'
        ],
        viewConfig:{
            plugins:[
                {ptype:'rallypercentdonetooltip'}
            ]
        }
    }); 
```

# javascript - 使用 javascript 访问隐藏函数

> ID：11442701
> 
> 赞同：0
> 
> 时间：2012-07-11T22:50:21.907
> 
> 标签：javascript, jquery, dom

嗨，我有一些自定义函数包含在 jQuery 的 document.ready 函数中。这些函数中的大多数都是在该函数和工作中使用的，但是在某些情况下，我想从全局范围内访问包含在 this 中的函数。我怎样才能做到这一点？我可以做类似的事情：jQueryReadyScope.myFunctionName('paramaters');

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:52:58.020

不，但您可以命名函数并将其传递给`.ready()`：

```
var myFunctionName = function (params) {
   // do things
}

// pass as callback to ready function
jQuery(document).ready(myFunctionName);

// access directly like any other function:
myFunctionName('paramaters'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:53:54.653

要从全局范围访问它，需要将其分配给全局变量，方法是在您的文档之外声明它已准备好或将其分配为以下属性`window`：

```
var yourGlobalFunction1 = function() { ... }

$(document).ready(function() {
    function privateFunction() { ... }

    window.yourGlobalFunction2 = function() { ... };

    yourGlobalFunction1();
    privateFunction();
    yourGlobalFunction2();
});

yourGlobalFunction1();

// and then at some later point AFTER the document ready has run,
// e.g., in response to some event:
$("#someelement").click(function() {
    yourGlobalFunction2();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T22:52:35.823

这是一个范围问题，您需要做的就是指定命名空间。在这种情况下，您说的是全局，所以我们将使用 window.

```
window.myFunction = function() { ... stuff } 
```

# php - 只允许小数点后一个数字的最有效方法

> ID：11442704
> 
> 赞同：0
> 
> 时间：2012-07-11T22:50:56.307
> 
> 标签：php

我有一个从 yahoo Finance api 返回的数据集，其格式如下：

```
167.3B
97.719B
1.322B
973.4M
77.8M 
```

我只想允许小数点后一位。我可以想到很多方法来做到这一点，但它们似乎都有些麻烦。有人知道最佳做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:52:09.600

```
$letter = substr($number, -1);
$output = round($number, 1) . $letter; 
```

这将四舍五入到整数的最接近的 10

你可以这样做：

```
round(floor($number)*10)/10 
```

如果 $number 等于 5.69，则返回 5.6，但四舍五入会更准确，被认为是最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:55:30.687

另外一个选项：

```
number_format($number, 1) 
```

# ruby-on-rails - 部署 Rails 应用程序时遇到问题（Linode、Passenger）

> ID：11442706
> 
> 赞同：0
> 
> 时间：2012-07-11T22:51:20.237
> 
> 标签：ruby-on-rails, passenger, linode

我是一个全新的 Rails 用户，我正在关注本教程 - [http://ruby.railstutorial.org/chapters/a-demo-app#top](http://ruby.railstutorial.org/chapters/a-demo-app#top)。在本地服务器上访问演示应用程序（来自第 2 章）没有问题。但是在部署到我的 Linode 服务器时遇到问题。这是我所做的：

1.  将本地应用推送到 BitBucket
2.  将 Linode 上的 repo 克隆到：/srv/www/preziki/first_app
3.  捆绑安装
4.  耙分贝：迁移
5.  为 preziki 更新 VirtualHost：

    ServerAdmin oleg@preziki.com ServerName preziki.com ServerAlias www.preziki.com DocumentRoot /srv/www/preziki/first_app/public ErrorLog /srv/www/preziki/logs/error.log CustomLog /srv/www/preziki/logs/ access.log 结合

6.  a2ensite preziki

7.  重启阿帕奇
8.  重新加载阿帕奇

如果我访问 www.preziki.com（或 176.58.104.181），我会看到默认的 Rails“欢迎加入”页面。如果单击“关于您的应用程序环境”链接，则会收到“抱歉，但出现了问题”错误。如果我访问 www.preziki.com/users（就像我可以访问 localhost/users 一样），我会收到“抱歉，但出了点问题”错误。

如果我将 VirtualHost 指向我有“Hello world！”的目录。index.html 文件，然后 preziki.com 可以毫无问题地显示它。

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:59:57.297

首先您可以看到“默认 Rails”环境，这意味着检查您的 Web 服务器（apache）是否工作正常。因为它是一个静态请求。

第二件事，当您想进入应用程序环境时，它们是一个问题，意味着您的应用程序没有正确部署。

你需要检查的东西很少。

```
1\. Give the application directory all permission.
2\. bundle install properly
3\. Set RailsENV in virtual host
4\. rake db:migrate properly.
5\. Check your log file what problem it is showing.

<VirtualHost *:80>
      ServerName localhost
      DocumentRoot /home/user/project/trunk/public
      PassengerEnabled on
      RailsEnv development
      <Directory /home/user/project/trunk/public>
      </Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:36:30.490

It sounds like you're nearly there. My guess is that the app has a problem connecting to the database. But to see for yourself what the problem is, look in the production log file:

```
/srv/www/preziki/first_app/log/production.log 
```

That will usually tell you everything you need to know. Another thing you can do to debug is to use the console on the server, in production mode:

```
bundle exec rails console production 
```

# c - 在 C 中键入双关语和并集

> ID：11442708
> 
> 赞同：12
> 
> 时间：2012-07-11T22:51:36.137
> 
> 标签：c

我目前正在做一个项目来构建一个小型编译器，只是为了它。

我决定采用构建一个非常简单的虚拟机作为目标的方法，这样我就不必担心学习 elf、intel 汇编等的来龙去脉了。

我的问题是关于在 C 中使用联合的类型双关语。我决定在 vm 的内存中只支持 32 位整数和 32 位浮点值。为方便起见，vm的“主存”设置如下：

```
typedef union
{    
    int i;
    float f;
}word;

memory = (word *)malloc(mem_size * sizeof(word)); 
```

因此，我可以根据指令将内存部分视为 int 或 float。

这是技术上的双关语吗？如果我将整数用作记忆词，然后使用 float* 将它们视为浮点数，那肯定会是这样。我目前的方法虽然在语法上有所不同，但我不认为在语义上有所不同。最后，我仍然将内存中的 32 位视为 int 或 float。

我能在网上找到的唯一信息表明这取决于实现。有没有更便携的方法来实现这一点而不会浪费大量空间？

我可以执行以下操作，但是我将占用 2 倍以上的内存并在工会方面“重新发明轮子”。

```
typedef struct
{
    int i;
    float f;
    char is_int;
} 
```

**编辑**

我可能没有把我的确切问题说清楚。我知道我可以使用联合中的浮点数或整数，而不会出现未定义的行为。我所追求的是一种拥有 32 位内存位置的方法，我可以安全地将其用作 int 或 float，而无需知道最后设置的值是什么。我想说明使用其他类型的情况。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T23:33:43.367

是的，存储一个 union 成员并读取另一个成员是类型双关语（假设类型足够不同）。此外，这是 C 语言官方支持的唯一一种通用（任何类型到任何类型）类型双关语。在某种意义上支持该语言承诺在这种情况下类型双关语将实际发生，即将发生将一种类型的对象读取为另一种类型的对象的物理尝试。除其他外，这意味着写入联合的一个成员并读取另一个成员意味着写入和读取之间的数据依赖关系。然而，这仍然给您带来了确保类型双关语不会产生陷阱表示的负担。

当您将类型转换指针用于类型双关语（通常被理解为“经典”类型双关语）时，该语言明确指出在一般情况下行为是未定义的（除了将对象的值重新解释为`char`s 数组和其他受限情况）。像 GCC 这样的编译器实现了所谓的“严格别名语义”，这基本上意味着基于指针的类型双关语可能无法像您期望的那样工作。例如，编译器可能（并且将）忽略类型双关读取和写入之间的数据依赖性并任意重新排列它们，从而完全破坏您的意图。这

```
int i;
float f;

i = 5;
f = *(float *) &i; 
```

可以很容易地重新排列成实际的

```
f = *(float *) &i;
i = 5; 
```

特别是因为严格别名的编译器故意忽略了示例中写入和读取之间数据依赖的可能性。

在现代 C 编译器中，当您确实需要将一个对象值物理重新解释为另一种类型的值时，您被限制为`memcpy`从一个对象到另一个对象的 -ing 字节或基于联合的类型双关语。没有其他方法。铸造指针不再是一个可行的选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T22:58:57.947

只要您只访问最近存储的成员（`int`或），就没有问题，也没有真正的实现依赖性。`float`将值存储在联合成员中然后读取同一个成员是非常安全且定义明确的。

（请注意，不能保证`int`和`float`大小相同，尽管它们在我见过的每个系统上都有。）

如果您将一个值存储在一个成员中，然后读取另一个成员，那就是类型双关语。引用最新 C11 草案中的一个脚注：

> 如果用于读取联合对象内容的成员与上次用于在对象中存储值的成员不同，则将值的对象表示的适当部分重新解释为新类型中的对象表示在 6.2.6 中描述（有时称为“类型双关语”的过程）。这可能是一个陷阱表示。

# javascript - 从 url 获取远程图像的宽度高度

> ID：11442712
> 
> 赞同：80
> 
> 时间：2012-07-11T22:51:48.723
> 
> 标签：javascript, image, height, width

所以警报给出了未定义的宽度和高度值。我认为来自 img.onload 计算的图像的 w 和 h 值没有传递给要返回的值，或者它可能在 onload 计算它们**之前返回 w 和 h：**

```
function getMeta(url){
 var w; var h;
 var img=new Image;
 img.src=url;
 img.onload=function(){w=this.width; h=this.height;};
 return {w:w,h:h}    
}

// "http://snook.ca/files/mootools_83_snookca.png" //1024x678
// "http://shijitht.files.wordpress.com/2010/08/github.png" //128x128

var end = getMeta("http://shijitht.files.wordpress.com/2010/08/github.png");
var w = end.w;
var h = end.h;
alert(w+'width'+h+'height'); 
```

如何让警报显示正确的宽度和高度？

[http://jsfiddle.net/YtqXk/](http://jsfiddle.net/YtqXk/)

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-07-11T23:07:18.267

## 使用 jQuery 获取图像大小

```
function getMeta(url) {
    $("<img/>",{
        load: function() {
            alert( this.width +" "+ this.height );
        },
        src: url
    });
} 
```

## 使用 JavaScript 获取图像大小

```
function getMeta(url) {   
    var img = new Image();
    img.onload = function() {
        alert( this.width +" "+ this.height );
    };
    img.src = url;
} 
```

## 使用 JavaScript 获取图像大小*（现代浏览器，IE9+）*

```
function getMeta(url){   
    const img = new Image();
    img.addEventListener("load", function() {
        alert( this.naturalWidth +' '+ this.naturalHeight );
    });
    img.src = url;
} 
```

像这样使用：`getMeta( "http://example.com/img.jpg" );`

[https://developer.mozilla.org/en/docs/Web/API/HTMLImageElement](https://developer.mozilla.org/en/docs/Web/API/HTMLImageElement)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-10-13T12:02:40.327

只需将回调作为参数传递，如下所示：

```
function getMeta(url, callback) {
    const img = new Image();
    img.src = url;
    img.onload = function() { callback(this.width, this.height); }
}
getMeta(
  "http://snook.ca/files/mootools_83_snookca.png",
  (width, height) => { alert(width + 'px ' + height + 'px') }
);
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-06-27T13:18:42.473

# ES6

使用`async/await`您可以以类似顺序的方式执行以下`getMeta`功能，您可以按如下方式使用它（这与您问题中的代码几乎相同（我添加`await`关键字并将变量更改`end`为`img`，然后更改`var`为关键字） 。`let`您只需要从功能（运行）。`getMeta``await``async`

```
function getMeta(url) {
    return new Promise((resolve, reject) => {
        let img = new Image();
        img.onload = () => resolve(img);
        img.onerror = () => reject();
        img.src = url;
    });
}

async function run() {

  let img = await getMeta("http://shijitht.files.wordpress.com/2010/08/github.png");

  let w = img.width;
  let h = img.height; 

  size.innerText = `width=${w}px, height=${h}px`;
  size.appendChild(img);
}

run();
```

```
<div id="size" />
```

## Rxjs

```
const { race, fromEvent, map, mergeMap, of } = rxjs;

function getMeta(url) {
    return of(url).pipe(
        mergeMap((path) => {
            const img = new Image();
            let load = fromEvent(img, 'load').pipe(map(_=> img))
            let error = fromEvent(img, 'error').pipe(mergeMap((err) => throwError(() => err)));
            img.src = path;

            return race(load, error);
        })
    );
}

let url = "http://shijitht.files.wordpress.com/2010/08/github.png";

getMeta(url).subscribe(img=> { 
  let w = img.width;
  let h = img.height; 

  size.innerText = `width=${w}px, height=${h}px`;
  size.appendChild(img);
}, e=> console.log('Load error'))
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/7.5.2/rxjs.umd.min.js" integrity="sha512-wBEi/LQM8Pi08xK2jwHJNCiHchHnfcJao0XVQvkTGc91Q/yvC/6q0xPf+qQr54SlG8yRbRCA8QDYrA98+0H+hg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<div id="size" />
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-07-11T23:10:34.713

函数中的`w`和`h`变量与`img.onload`函数中的变量不在同一范围内`getMeta()`。一种方法如下：

**小提琴**：http: [//jsfiddle.net/ppanagi/28UES/2/](http://jsfiddle.net/ppanagi/28UES/2/)

```
function getMeta(varA, varB) {
    if (typeof varB !== 'undefined') {
       alert(varA + ' width ' + varB + ' height');
    } else {
       var img = new Image();
       img.src = varA;
       img.onload = getMeta(this.width, this.height);
    }
}

getMeta("http://snook.ca/files/mootools_83_snookca.png"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-16T21:47:00.520

**使用 jQuery 获取图像大小**
（取决于哪种格式化方法更适合您的喜好）：

```
function getMeta(url){
    $('<img/>',{
        src: url,
        on: {
            load: (e) => {
                console.log('image size:', $(e.target).width(), $(e.target).height());
            },
        }
    });
} 
```

或者

```
function getMeta(url){
    $('<img/>',{
        src: url,
    }).on({
        load: (e) => {
            console.log('image size:', $(e.target).width(), $(e.target).height());
        },
    });
} 
```

# ruby-on-rails - 在设计中设置语言

> ID：11442717
> 
> 赞同：2
> 
> 时间：2012-07-11T22:52:14.730
> 
> 标签：ruby-on-rails, ruby, internationalization, devise, ruby-on-rails-3.2

我是 Ruby/Rails 的菜鸟，我现在正在创建我的第一个项目。

我正在使用[Devise gem](https://github.com/plataformatec/devise)进行身份验证系统。我已经安装了它，我正在努力将默认消息从“en”（默认语言）更改为“pt-BR”。

我有一个名为`devise.pt-BR.yml`内部的文件`/config/locales/`，其中包含该语言的所有翻译，并且我遵循了一些提示，但是当我重新启动服务器时，我仍然将“en”作为默认语言。

我不想拥有两种或多种语言，我只需要使用“pt-BR”而不是“en”。

我的环境：

> Fedora 16
> Ruby 1.9.2p320
> Rails 3.2.6
> 设计 2.1.2

`/config/application.rb`内容（看底部）：

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module Foo
  class Application < Rails::Application
    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable escaping HTML in JSON.
    config.active_support.escape_html_entities_in_json = true

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    # config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'
    config.i18n.load_path += Dir[Rails.root.join('devise', 'locales', '*.{rb,yml}').to_s]
    config.i18n.default_locale = :"pt-BR"
    I18n.locale = :"pt-BR"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:31:16.343

我错了，它正在工作！

我不得不把它放到 application.rb 中：

```
config.i18n.load_path += Dir[Rails.root.join('locales', '*.{rb,yml}').to_s]
config.i18n.default_locale = :'pt-BR' 
```

并将“devise.pt-BR.yml”放入/config/locales/

我在“登录”视图的字段中寻找“登录”和标签，但我认为这些字符串不可翻译，我将生成这些视图并手动修改它们。

谢谢你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:07:21.443

换行

```
config.i18n.default_locale = :"pt-BR" 
```

至

```
config.i18n.default_locale = "pt-BR" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:09:52.720

尝试将您的语言环境文件重命名为`pt-BR.yml`，或者将您的引用更改`application.rb`为`devise.pt-BR.yml`.

# php - php。为什么函数的运行时间很大？

> ID：11442719
> 
> 赞同：0
> 
> 时间：2012-07-11T22:52:24.647
> 
> 标签：php, profiling

我在 php 中分析我的代码。问题是关于下一个功能：

```
// returns true if edge exists in the tree
protected function edgeExist( $srcNodeId, $firstToken ) {
    $result = array_key_exists( $srcNodeId, $this->edges )
              && array_key_exists( $firstToken, $this->edges[$srcNodeId]);
    return $result;
} 
```

根据分析器，函数`edgeExist`消耗大约 10% 的运行时间，但函数`array_key_exists`消耗大约 0.2% 的运行时间。为什么函数`edgeExist`消耗这么多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:56:40.970

This could be faster, try it:

```
protected function edgeExist( $srcNodeId, $firstToken ) {
    return isset($this->edges[$srcNodeId][$firstToken]);
} 
```

There is a small difference when using `array_key_exists()` and `isset()`. Look in to the manual.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:12:55.753

您可以尝试比较个人资料结果吗

```
protected function edgeExist( $srcNodeId, $firstToken ) {
    $result = array_key_exists( $firstToken, array());
    return $result;
} 
```

和

```
protected function edgeExist( $srcNodeId, $firstToken ) {
    $result = array_key_exists( $firstToken, $this->edges[$srcNodeId]);
    return $result;
} 
```

我想也许 $this->edges[$srcNodeId] 是一个巨大的数组，php需要在它上面做一些内部的魔法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:31:11.810

您可以通过以下方式测量每个部分的运行时间：

```
protected function edgeExist( $srcNodeId, $firstToken ) {
    $time = microtime();
    $result1 = array_key_exists( $srcNodeId, $this->edges )
    $time2 = microtime();
    $result2 = array_key_exists( $firstToken, $this->edges[$srcNodeId]);
    $time3 = microtime();
    $result = $result1 && $result2;
    $time4 = microtime();
    echo "calculating the first result took " . $time2 - $time1 . " microseconds\n".
    echo "calculating the second result took " . $time3 - $time2 . " microseconds\n".
    echo "calculating the && took " . $time4 - $time3 . " microseconds\n".
    return $result;
} 
```

这应该能解开谜团；）

# java - smartGWT rpc 的服务器端访问数据

> ID：11442722
> 
> 赞同：0
> 
> 时间：2012-07-11T22:52:31.767
> 
> 标签：java, rest, smartgwt

在服务器端，我想知道如何从 SmartGwt 访问 RPCRequest 中使用的数据。

这是 SmartGwt 客户端代码：

```
 private void update() {
        RPCRequest request = new RPCRequest();
        request.setData("RPC text from client");
        request.setActionURL("/Empi-MT/resources/empi/update");
        request.setContentType("text/xml");

        RPCManager.sendRequest(request,
            new RPCCallback() {

                public void execute(RPCResponse response, Object obj, RPCRequest request) {
                    SC.say("Response from the server:" + obj);
                }
            });
    } 
```

这是 RESTful java 服务器代码。

```
 @POST
    @Consumes("text/xml")
    @Produces("text/xml")
    @Path("/update")
    public String update() {
        return "We got to here";
    } 
```

这个简单的代码可以正常工作，但现在我需要知道如何访问放入 RPCRequest 的数据。我如何在服务器代码中做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:08:20.400

你看起来可能走错了方向；如果此“更新”操作是对某个对象的 CRUD 操作，您想使用 DataSources - 请查看数据集成的 QuickStart 概述，重点关注 RestDataSource。

[http://www.smartclient.com/releases/SmartGWT_Quick_Start_Guide.pdf](http://www.smartclient.com/releases/SmartGWT_Quick_Start_Guide.pdf)

此外，您似乎开始使用生成的 REST 服务，这几乎总是错误的 - 请参阅此常见问题解答：

[http://forums.smartclient.com/showthread.php?t=8159#aExistingRest](http://forums.smartclient.com/showthread.php?t=8159#aExistingRest)

最后，如果这真的不是一个 CRUD 操作，你想在 RPCRequest 上设置 useSimpleHttp，然后这个属性的文档解释了数据发送的不同方式。

[http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/rpc/RPCRequest.html#getUseSimpleHttp](http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/rpc/RPCRequest.html#getUseSimpleHttp) ()

# javascript - 如何在 jQuery 1.7.1 代码中将 bind() pass through (to on()) 转换为 delegate()-like？

> ID：11442723
> 
> 赞同：0
> 
> 时间：2012-07-11T22:52:33.870
> 
> 标签：javascript, jquery, jquery-selectors, drupal-7, jquery-1.7

我正在尝试通过 jQuery 更新一些 Drupal 7 内容，`load()`并且相关的 JS 代码没有处理它。有问题的代码使用`bind()`并分布在数十个 Drupal 核心 JS 文件中。

我想通过使用 jQuery 1.7.1 和更改来解决这个问题

```
bind: function( types, data, fn ) {
    return this.on( types, null, data, fn );
}, 
```

表现得像

```
delegate: function( selector, types, data, fn ) {
    return this.on( types, selector, data, fn );
}, 
```

唯一缺少的是`selector`如您所见。我能以某种方式从标准`bind()`调用中得到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:00:58.683

你可以尝试类似的东西

```
function(types, data, fn) {
    (this.context
      ? $(this.context)
      : this ).on(types, this.selector || null, data, fn);
    return this;
} 
```

因为每个 jQuery 对象都将当前选择器和上下文元素作为属性。

但是，您不应该通过覆盖功能来应用该*解决方法*，它只会将错误引入您的应用程序。最好更改调用绑定但不应该调用的代码。`.bind``delegate`

# ruby - Ruby Sequel.migration 中不区分大小写的唯一性验证

> ID：11442733
> 
> 赞同：1
> 
> 时间：2012-07-11T22:53:40.393
> 
> 标签：ruby, migration, email-validation, sequel

我试图找出一个很好的验证来在我的迁移中使用，这将需要用户电子邮件地址的不区分大小写的唯一性。简而言之，我想要一些东西，`validate :email, :uniqueness => {:case_sensitive => false}`而不必将所有东西都转换为使用 Rails 或 ActiveRecord。我可以通过正则表达式运行电子邮件，但我不喜欢那个解决方案。

我发现一条评论 [1] 说您可以使用，但我不明白该代码在做什么，并且当我不知道该对象是什么或发生了
`validates_unique(:email){ |ds| ds.opts[:where].args.map! { |x| Sequel.function(:lower, x)}; ds}`
什么时，我不想使用该代码（为什么， postgresql 有of吗？ ...可能，但我只是不知道。）`ds``map!``Sequel.function``:lower`

[1] [http://comments.gmane.org/gmane.comp.lang.ruby.sequel/6447](http://comments.gmane.org/gmane.comp.lang.ruby.sequel/6447)

所以我需要回答两件事之一：
1）如何在纯`Sequel.migration`（没有ActiveRecord，没有Rails）中执行不区分大小写的唯一性验证？
- 或者 -
2) 如果我在网上找到的代码片段实际上是我想要的，它是做什么的以及它是如何工作的？（`ds`对象是什么，这个验证对我的数据库有什么作用？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T14:57:49.383

正如 Tin Man 提到的，您混淆了验证和约束。您说您正在尝试添加约束并谈论`Sequel.migration`，但这些与验证无关。

如果要添加数据库约束，则需要在迁移中执行以下操作：

```
alter_table(:table){add_unique_constraint Sequel.function(:lower, :email)} 
```

这样做是为了使数据库不允许以不区分大小写的方式重复电子邮件。

验证只是为了向用户呈现漂亮的错误消息。它们在保存之前运行，这样您就不会得到一个很好的错误消息，而不是数据库引发异常（这很难处理）。

就像评论提到的那样，您不能使用 validates_unique 对区分大小写的数据库进行不区分大小写的查找而无需破解。这将要求 validates_unique 接受一个附加选项（将来可能会添加）。

如果您不想使用这样的 hack，则必须手动进行验证：

```
dataset = model.where{|o| {o.lower(:email)=>o.lower(email)}}
dataset.exclude(pk_hash) unless new?
errors.add(:email, 'is already taken') unless ds.count == 0 
```

就黑客所做的而言， `ds`是一个用于检查唯一性的`Sequel::Dataset`实例。`validates_unique`如果你这样做`validates_unique :email`，它会是这样的：

```
model.where(:email=>email)
# WHERE email = 'some email' 
```

`ds.opts[:where]`从该数据集中提取 where 子句，并转换参数，将它们包装在 SQL`lower`函数调用中，以便转换 where 子句，使其类似于：

```
model.where{|o| {o.lower(:email)=>o.lower(email)}}
# WHERE lower(email) = lower('some email') 
```

这是一个 hack，因为它仅在模型的数据集尚未过滤时才有效。

# c - 代码可以停止使用编译器优化

> ID：11442740
> 
> 赞同：1
> 
> 时间：2012-07-11T22:54:08.083
> 
> 标签：c, compiler-construction, compiler-optimization, pelles-c

我正在使用 PellesC C 编译器。有时我的代码会随机停止工作。一个特定的语句可以触发它。例如，我将一个变量乘以 sin(c)（c 是一个双精度数），我的代码似乎刚刚完成执行而没有结果。有时它会冻结，有时它似乎只是返回，但我总是可以通过删除有问题的语句或禁用编译器优化来修复它，特别是“最大化速度”或“最大化速度更多”。如果我在崩溃点附近的某个地方添加一个 printf 语句，冻结也会在几乎 100% 的情况下消失。我从来没有发现任何暗示我访问内存不正确的东西，我很确定这是一个编译器问题。我想知道是否有人可以对此有所了解。有没有可能我是，事实上，做错了什么？或者这是 Pelles C 编译器的一个已知问题？

编辑：

改变

```
canvas->pixels[(y*canvas->pitch)+(x*canvas->Bpp)+2]=(unsigned char)(255.0*dtempA*(1-sin(c)));
canvas->pixels[(y*canvas->pitch)+(x*canvas->Bpp)+1]=(unsigned char)(255.0*dtempA*(1+cos(c)));
canvas->pixels[(y*canvas->pitch)+(x*canvas->Bpp)]=(unsigned char)(255.0*dtempA*(1+sin(c))); 
```

to（最后一行末尾的差异）

```
canvas->pixels[(y*canvas->pitch)+(x*canvas->Bpp)+2]=(unsigned char)(255.0*dtempA*(1-sin(c)));
canvas->pixels[(y*canvas->pitch)+(x*canvas->Bpp)+1]=(unsigned char)(255.0*dtempA*(1+cos(c)));
canvas->pixels[(y*canvas->pitch)+(x*canvas->Bpp)]=(unsigned char)(255.0*dtempA*(1+1)); 
```

让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:58:46.110

可能是，但一个不错的选择是你 :) 未显式初始化的变量通常会在优化与未优化的构建中获得不同的值，因为堆栈布局可能会根据编译器删除临时变量的积极程度而微妙地变化，以及其他因素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T04:12:58.943

您可能不小心在某处使用了未定义的行为，并且更改程序中的随机指令正在破坏堆栈上代码的非常脆弱的对齐方式，而堆栈中恰好使程序工作。

# zend-framework - Zend_Rest_Controller 和 Zend_Rest_Route 用例

> ID：11442741
> 
> 赞同：0
> 
> 时间：2012-07-11T22:54:09.083
> 
> 标签：zend-framework, rest

我正在彻底遵循这些教程，并且必须说它们是很棒的教程！

[http://www.techchorus.net/create-restful-applications-using-zend-framework](http://www.techchorus.net/create-restful-applications-using-zend-framework)

我只是对 Zend_Rest 抽象方法的整个概念感到困惑。在示例中，您只看到

索引 POST GET PUT DELETE

虽然这些功能很有意义，但我试图弄清楚整个架构是否仅限于那些抽象方法。我正在考虑一个用例，其中消费者想要使用 API 来更新用户表中的特定字段，或者消费者想要更新活动表的另一种情况。这两个表的业务逻辑都包含在一个 RESTful api 控制器中。我将通过为每个表创建特定的更新/发布方法来解决这个问题，并使用函数参数来定义正在更新的字段。这种实现是否符合 REST，如果是，您如何超越 POST、GET、PUT、DELETE 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:16:40.280

REST 架构确实支持资源的层次关系，并且您的资源不会以任何方式与您的数据库绑定。您的“用户”资源可能有一个子资源“凭据”映射到用户表中的用户名和密码字段，因此您可以在“domain.com/users/{userId}/credentials”上执行 PUT 请求。您将通过创建一个控制器来实现这一点，比如 UserCredentials，更新逻辑将在 putAction 中。

不过，您必须修改路由才能在 Zend 中工作。请参阅[如何设置分层 Zend 休息路线？](https://stackoverflow.com/questions/2204653/how-to-set-up-hierarchical-zend-rest-routes)

# vb.net - VB 中的单击按钮事件，显示有关用户输入的消息

> ID：11442743
> 
> 赞同：0
> 
> 时间：2012-07-11T22:54:14.013
> 
> 标签：vb.net, button, message

我有一个非常简单的问题，我正在学习 C# 和 VB 编程，我需要使用 Visual Studio 在 Windows 窗体中创建一个 GUI 应用程序。此 GUI 将提示用户输入一个整数。我相信这部分没问题，但是我需要让用户单击一个按钮，该按钮会将用户的输入转换为整数并显示一条消息，指示用户是否成功。我想我什至正确地完成了转换，但如果用户成功，我在显示该消息时遇到问题。基本上我需要知道如何在 VB 中使用 click 方法来允许出现此消息。对此的任何帮助将不胜感激。以下代码是我已经为这个项目编写的代码：

```
Public Class Form1

    Private Sub EvaluateInput()
        Dim InputValue As String
        InputValue = ValueTextBox.Text
        If IsNumeric(InputValue) Then
            MessageBox.Show(InputValue & " is a number.")
        Else
            MessageBox.Show(InputValue & " is not a number.")
        End If
    End Sub

    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click 'Continue Button

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click 'Exit Button
        Dim button As DialogResult
        button = MessageBox.Show _
        ("Are you sure you want to exit this application?", _
        "Message", MessageBoxButtons.YesNo, MessageBoxIcon.Warning, MessageBoxDefaultButton.Button1)

        If button = Windows.Forms.DialogResult.Yes Then
            Me.Close()
        Else
            'Do Nothing    
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:10:33.957

如果我正确理解你的问题，那么你需要一个简单的改变：

```
Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) _
        Handles Button2.Click 'Continue Button
  EvaluateInput()
End Sub 
```

当您按下 Button2 时，它将调用 EvaluateInput 子并相应地显示一条消息。

# php - 将数组值传递给表单中的选择选项字段？

> ID：11442751
> 
> 赞同：1
> 
> 时间：2012-07-11T22:55:05.953
> 
> 标签：php, arrays

这是基于 PHP 的。

是否可以采用这样的数组：

```
$SELECT_INDUSTRY = array("Medical" => "Specialty", "Dental" => "Specialty", "Pediatrics" => "Specialty"); 
```

并将这两个值传递给像这样简单的东西：

```
<select>
    <option value="$SELECT_INDUSTRY[]">$SELECT_INDUSTRY[]</option>
</select> 
```

其中 Medical 是传递的值，而 Specialty 是面向公众的文本。

这是我用来构建实际选择框的函数：

```
$SELECT_INDUSTRY = array("Medical", "Dental", "Pediatrics");
$FORM_SELECT_SIZE = 'input-min';
function get_options_industry( $arr = array() ) {
global $FORM_SELECT_SIZE;
echo '<div class="control-group"><label class="control-label" for="industry">Industry</label><div class="controls"><select name="industry" id="industry" class="'.$FORM_SELECT_SIZE.'"><option value=>Select an Industry</option>';
foreach( $arr as $option ) {
    echo '<option>'.$option.'</option>';
}
echo '</select></div></div>';
}
$FORM_FIELD_INDUSTRY = $SELECT_INDUSTRY; 
```

这就是我显示选择的方式：

```
<?php get_options_industry( $FORM_FIELD_INDUSTRY ) ?> 
```

我觉得我已经接近了，或者至少在正确的轨道上，只是不知道如何将第一个数组值拉入 value 字段，然后将第二个拉入实际名称。

目标是获取表单中传递的值，与面向公众的名称不同。我意识到我给出的上述数组定义可能不是正确的方法。

**解决方案**

感谢下面的几个回复，这是解决我的问题的最终答案：

```
$SELECT_INDUSTRY = array("Medical" => "Medical", "Dental" => "Medical", "Pediatrics" => "Medical");
$FORM_SELECT_SIZE = 'input-min';
function get_options_industry( $arr = array() ) {
global $FORM_SELECT_SIZE;
echo '<div class="control-group"><label class="control-label" for="industry">Industry</label><div class="controls"><select name="industry" id="industry" class="'.$FORM_SELECT_SIZE.'"><option value=>Select an Industry</option>';
foreach( $arr as $key => $value ) {
    echo '<option value="'.$value.'">'.$key.'</option>';
}
    echo '</select></div></div>';
}
$FORM_FIELD_INDUSTRY = $SELECT_INDUSTRY; 
```

然后我必须确保我的密钥是唯一的，因此不会删除重复项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:58:33.557

这个怎么样？

```
$SELECT_INDUSTRY = array("Medical" => "Specialty", "Dental" => "Specialty", "Pediatrics" => "Specialty");

.... other stuff you already have ....

foreach( $arr as $val => $option ) {
    echo '<option value="'.$val.'">'.$option.'</option>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:00:42.900

快速示例...

```
$SELECT_INDUSTRY = array("Medical" => "Specialty", "Dental" => "Specialty", "Pediatrics" => "Specialty");

echo '<select>';    
foreach ($SELECT_INDUSTRY as $key => $value) {
    echo '<option value="' . $value . '">' . $key . '</option>';
}
echo '</select>'; 
```

您可以反转 $key 和 $value ，具体取决于您希望将哪个显示为文本以及您希望将哪个作为值传递。我在示例中显示它的方式对我来说最有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T10:59:51.020

**这个工作正常**

```
$SELECT_INDUSTRY = array("Medical", "Specialty", "Dental", "Specialty", "Pediatrics", "Specialty");

echo '<select>';    
foreach ($SELECT_INDUSTRY as $key => $value) {
    echo '<option value="' . $value . '">' . $key . '</option>';
}
echo '</select>'; 
```

# c++ - C ++通过引用传递与类中的指针

> ID：11442756
> 
> 赞同：3
> 
> 时间：2012-07-11T22:55:49.160
> 
> 标签：c++

所以，我有一个类，它存储一个指向对象的指针向量。我有一个将对象添加到向量的方法。添加时，我知道我可以通过引用或指针传递，并且已经阅读了每种方法的优缺点，但在这种情况下，我无法弄清楚哪个更好以及为什么。据我所知，它们几乎相同（但我可能错了！）

这是通过指针/地址传递的（释义）：

```
hpp:
class Room {
    vector<Item*> items;
public:
    void addItem(Item*);
};

cpp:
void Room :: addItem(Item* item) {
    items.push_back(item);
} 
```

...并通过引用传递：

```
hpp:
class Room {
    vector<Item*> items;
public:
    void addItem(Item &);
};

cpp:
void Room :: addItem(Item &item) {
    items.push_back(&item);
} 
```

我应该使用哪个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T23:03:51.287

这一点都没有关系，所以在调用站点上做任何看起来更自然的事情，或者与其余代码更一致。

好的，我可以看到有利于每个人的观点，但我不能告诉你它们是否对你的情况很重要。

*   通过指针传递更准确地反映了您如何*使用*参数（尽管我不知道这是有用的语义信息还是实现细节）
    *   传递指针（或`new`直接的结果）的调用站点看起来很自然
    *   一个调用站点会做一些愚蠢的事情，比如传递一个自动变量的地址
*   通过引用传递表明该论点不应该是正确和有用的`NULL`，也可能不正确和有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:00:52.367

无论如何，取决于您的程序的其余部分的上下文。

两者都可以正常工作，因此更多的是哪个会使代码更清晰的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T23:11:58.450

从技术上讲，两者都是等效的传球方式，并且效果同样好。然而，在设计层面，关于用户如何解释这些接口、承诺什么合同等方面存在差异。这也是自描述界面的问题。

乍一看，按指针版本说：项目**可能是**指向现有对象的指针，也**可能是** `nullptr`（可能`addItem`会测试指针并做出反应），而按引用版本表明，项目**必须**引用现有对象（调用者必须保证，所以`addItem`不必测试它）。

简而言之，选择语法也是清晰明确地表达您的意图的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T23:03:43.733

这是（您的）语法偏好的问题，因为这*不是*引用比指针提供一些好处的情况，反之亦然。我建议您使用指针，以便阅读客户端代码（使用房间类型）的人立即清楚您是通过引用而不是值传递项目。

# objective-c - 在 iOS 中有效地绘制带边框的文本

> ID：11442757
> 
> 赞同：1
> 
> 时间：2012-07-11T22:56:10.057
> 
> 标签：objective-c, ios, cocoa, text, border

我有一个自定义`drawRect`方法的视图，它有两条固定宽度的文本行。该视图以每秒约 16 个计时器的速度不断重绘，文本的位置和文本的内容一直在变化。我还需要以在任何背景下都清晰可见的方式绘制文本，为此我执行以下操作：

```
CGContextSetTextDrawingMode(ctx, kCGTextStroke);        // Border mode
[string drawAtPoint:point withFont:font];
CGContextSetTextDrawingMode(ctx, kCGTextFill);          // Text mode
[string drawAtPoint:point withFont:font]; 
```

此代码以固定线宽的边框模式绘制文本，然后在相同位置再次以填充模式绘制文本。通过这种方式，我得到一个蓝色文本，每个字母周围都有白色边框。

除了性能，结果对我来说绝对令人满意。使用 Time Profiler 我注意到绘制整个视图所花费的时间大约有 70% 用于执行以边框（笔划）模式绘制文本。但是在填充模式下绘制只需要整个视图绘制时间的 3%。考虑到视图重绘的频率，我认为这不是有效的。

那么有人知道如何以更有效的方式在每个字母周围绘制带有边框的文本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T23:05:41.550

两种选择：

1.  使用阴影而不是绘制轮廓：`CGContextSetShadowWithColor`
2.  使用 CGLayer 缓存字符串的图像及其轮廓：`CGLayerCreateWithContext`

2的解释：

绘图文本针对仅用一种颜色填充字母的标准情况进行了高度优化。单个字形（字母）不会每次都从轮廓中呈现。相反，字形只被绘制到缓存和重用的缓冲图像中。

由于很少绘制轮廓，因此此模式可能没有字形缓存或其他优化。所以想法是自己进行缓存：将整个字符串绘制到一个图像中，保留该图像并绘制它而不是从您的`drawRect:`方法中绘制文本。

有几种方法可以做到这一点：

1.  使用[CGBitmapContext](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html#//apple_ref/c/func/CGBitmapContextCreate)
2.  利用[`UIGraphicsBeginImageContext`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsBeginImageContext)
3.  用一个[`CGLayer`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGLayer/Reference/reference.html)

# jquery - 替代 :last 选择器以选择正确的 div

> ID：11442758
> 
> 赞同：0
> 
> 时间：2012-07-11T22:56:10.120
> 
> 标签：jquery

我有几个在文件上传后动态生成的 div。每个文件上传都会以这种格式创建一个 div：

```
<div id="uploadifive-fileupload-queue" class="uploadifive-queue">
    <div class="uploadifive-queue-item complete" id="uploadifive-fileupload-file-0">

        <div id="inputs">

            some text

        </div>
    </div>
</div> 
```

每个上传的项目都会将 uploadifive-queue-item 类的 id 递增到 uploadifive-fileupload-file-0、uploadifive-fileupload-file-1、uploadifive-fileupload-file-2 等。

我要做的是向 中添加一个类`#inputs`，但只添加一个刚刚创建的类。

当我一次只上传一个时，我可以使用 :last 来做到这一点，但如果我同时选择多个，它只适用于该组中的最后一个 div。

我正在寻找的是一个 $(this) 或一种定位该独特 div 的方法。

```
 $('#fileupload').uploadifive({
                'buttonClass'  : 'btn btn-primary',
                'buttonText'   : 'Select Thumbnail',
                'dnd' : false,
                'fileSizeLimit' : 1000,
                'method' : 'post',
                'simUploadLimit' : 1,
                'uploadScript' : './upload/',
                'onUploadComplete'  : function(file, data) {
                    $("#uploadifive-fileupload-queue .uploadifive-queue-item:last").find('#inputs').addClass('alert-error');
                }

            }); 
```

`#fileupload`只是表单的名称，这是 HTML：

```
<form id="fileupload">
    <input type="file" name="userfile" size="20" />
</form> 
```

div 直接添加到下方并位于同一容器内。

如何选择正确的 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:06:26.180

重复的 id 是问题的一部分，尝试将它们更改为类名或唯一值。

另一部分是：

```
$("#uploadifive-fileupload-queue .uploadifive-queue-item:last") 
```

...选择第一个唯一元素中的最后一个（也是唯一**一个**）：`.uploadifive-queue-item`http : [//jsfiddle.net/aLRhL/2/](http://jsfiddle.net/aLRhL/2/)**`#uploadifive-fileupload-queue`**

 **所以欺骗ID和不正确的选择器是问题所在。试试这个，改为`id="inputs"`并`class="inputs"`使用：

```
$(".uploadifive-queue:last .inputs").addClass('alert-error'); 
```

...并确保修复其余的重复 ID。

即使使用欺骗 ID，如果您有正确的选择器，它也[应该可以工作](http://jsfiddle.net/aLRhL/1/)，但不要依赖它。**

# apache - 使用 .htaccess 将 ip 重定向到 url

> ID：11442759
> 
> 赞同：1
> 
> 时间：2012-07-11T22:56:12.263
> 
> 标签：apache, .htaccess, redirect

我想从我的 ip（A 主机）重定向到我的网站 url。早些时候我在 .htaccess 文件中使用了以下几行，它工作正常。

```
RewriteCond %{HTTP_HOST} ^[0-9]+(\.[0-9]+){3} [OR]
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
RewriteRule ^ http://example.com/$1 [L,R=301] 
```

上面的代码将我的 ip 重定向到 web url。

现在我将代码更改为以下内容，并且 ip 重定向到一个奇怪的 url

```
RewriteCond %{HTTP_HOST} ^[0-9]+(\.[0-9]+){3} [OR]
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301] 
```

我想使用 {REQUEST_URI} 功能并同时重定向到我的基本网址。这样做的正确语法是什么？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:19:05.300

尝试：

```
RewriteCond %{HTTP_HOST} ^[0-9]+(\.[0-9]+){3} [OR]
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# selenium - “元素必须是用户可编辑的才能清除它”错误

> ID：11442761
> 
> 赞同：1
> 
> 时间：2012-07-11T22:56:17.500
> 
> 标签：selenium, cucumber, webdriver, capybara, selenium-chromedriver

> 元素必须是用户可编辑的才能清除它 (Selenium::WebDriver::Error::InvalidElementStateError) (eval):2:in `attach_file'

当我运行包含`attach_file`步骤的功能时，它给了我这个错误。

这是我的功能失败的行：

```
And I attach the file "images/cakes/1.jpeg" to "file_field" 
```

这是我的步骤定义：

```
When /^(?:|I )attach the file "([^"]*)" to "([^"]*)"(?: 
within "([^"]*)")?$/ do |path, field, selector|
  with_scope(selector) do
    attach_file(field, path)
  end
end 
```

有没有人知道问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:05:30.377

水豚有问题。您需要更新到 1.1.2。见[github](https://github.com/jnicklas/capybara/issues/541)。

# asp.net - HTML 敏捷包语法

> ID：11442763
> 
> 赞同：-1
> 
> 时间：2012-07-11T22:56:34.380
> 
> 标签：asp.net, html, vb.net

```
 <div class="logoDesc">

Gnb Road, Chandmari, Guwahati - 781003

    |
                <a href="http://www.justdial.com/Guwahati/Kiran-Mistanna-Bhandar-&lt;near&gt;-Chandmari/9999PX361-X361-1230284509G9V5B2-DC_R3V3YWhhdGkgQmFjaGVsb3IgQ2FrZQ==_BZDET/map">
                    View Map</a><br>
                <p>
                    <span class="Gray">Call: </span><span style="color: #424242; font-size: 12px;">+(91)-9954843180</span>
                    <span style="color: #424242;">|</span> <a href="http://contest.justdial.com/contest/register.php?utm_source=rsbnr&amp;utm_medium=banner&amp;cont_ref=rsbnr"
                        style="font-size: 12px; display: inline-block;" onclick="_ct('Win Ipad2','ltpg');"
                        target="_blank"><b>Win iPad2</b></a>
                </p>
                <p>
                    <span class="Gray">Also See :</span> <b>Cake Shops</b>, <a href="http://www.justdial.com/Guwahati/Bakeries/ct-10033880">
                        Bakeries</a>, <a href="http://www.justdial.com/Guwahati/Confectionery-Retailers/ct-10127628">
                            Confectionery Retailers</a>
                </p>
            </div> 
```

我正在使用 HTML Agility 包...我只想提取地址[在星星之间] ..语法应该是什么？请帮忙。

更新：我正在使用以下代码

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim webGet = New HtmlWeb()
        Dim document = webGet.Load("http://www.justdial.com/Guwahati/Bachelor-Cake/ct-10070075")

        Dim nodes1 = document.DocumentNode.SelectNodes("//*[@class='logoDesc']")

        For Each node In nodes1
            MsgBox(node.InnerText)
        Next node
    End Sub 
```

使用这个代码片段，我得到了 div 内的所有细节......我只想要地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:48:51.227

试试这个（将“/text()”添加到 XPath 的末尾）：

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim webGet = New HtmlWeb()
    Dim document = webGet.Load("http://www.justdial.com/Guwahati/Bachelor-Cake/ct-10070075")
    Dim nodes1 = document.DocumentNode.SelectNodes("//*[@class='logoDesc']/text()")
    For Each node In nodes1
        MsgBox(node.InnerText)
    Next node
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:02:51.817

不知道敏捷包，但这是一个直接向上的屏幕刮板：

```
 string page = Methods.GetPage("http://www.yoururl.com");
    int firstStars = page.IndexOf("***");
    string second = page.Substring(firstStars);
    int secondStars = second.IndexOf("***");

    //Add 3 to skip over the first three stars. May not need the +3, can't recall.
    string address = page.Substring(0 + 3, secondStars);

    public static string GetPage(string url)
    {
        WebClient webClient = new WebClient();
        byte[] reqHTML;
        string page = string.Empty;

        UTF8Encoding objUTF8 = new UTF8Encoding();
        try
        {
            reqHTML = webClient.DownloadData(url);
            page = objUTF8.GetString(reqHTML);
        }
        catch (Exception theex)
        {

        }
        return page;
    } 
```

# c# - 使用 touchDown 在 Datagrid 中模拟双击事件

> ID：11442768
> 
> 赞同：5
> 
> 时间：2012-07-11T22:56:54.260
> 
> 标签：c#, wpf, datagridview, mouse, emulation

我是使用 WPF 的新手。我有一个带有数据网格的 WPF 窗口，当双击发生时，它会启动一个进程。这很好用，但是当我在平板电脑（使用 Windows 7）中使用触摸屏执行此操作时，该过程永远不会发生。所以我需要用触摸事件来模拟双击事件。任何人都可以帮助我做到这一点，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:06:12.253

请参阅[如何在 C# 中模拟鼠标单击？](https://stackoverflow.com/questions/2416748/how-to-simulate-mouse-click-in-c)关于如何模拟鼠标单击（在 Windows 窗体中），但它通过以下方式在 WPF 中工作：

```
using System.Runtime.InteropServices;

namespace WpfApplication1
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
    public static extern void mouse_event(uint dwFlags, uint dx, uint dy, uint cButtons, uint dwExtraInfo);

    private const int MOUSEEVENTF_LEFTDOWN = 0x02;
    private const int MOUSEEVENTF_LEFTUP = 0x04;
    private const int MOUSEEVENTF_RIGHTDOWN = 0x08;
    private const int MOUSEEVENTF_RIGHTUP = 0x10;

    public void DoMouseClick()
    {
         //Call the imported function with the cursor's current position
        int X = //however you get the touch coordinates;
        int Y = //however you get the touch coordinates;
        mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP, X, Y, 0, 0);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T14:05:37.287

首先添加一个Mouse事件点击函数：

```
/// <summary>
/// Returns mouse click.
/// </summary>
/// <returns>mouseeEvent</returns>
public static MouseButtonEventArgs MouseClickEvent()
{
    MouseDevice md = InputManager.Current.PrimaryMouseDevice;
    MouseButtonEventArgs mouseEvent = new MouseButtonEventArgs(md, 0, MouseButton.Left);
    return mouseEvent;
} 
```

将单击事件添加到您的 WPF 控件之一：

```
private void btnDoSomeThing_Click(object sender, RoutedEventArgs e)
{
    // Do something
} 
```

最后，从任意函数调用 click 事件：

```
btnDoSomeThing_Click(new object(), MouseClickEvent()); 
```

要模拟双击，请添加一个双击事件，如 PreviewMouseDoubleClick 并确保任何代码都在单独的函数中开始：

```
private void lvFiles_PreviewMouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    DoMouseDoubleClick(e);
}

private void DoMouseDoubleClick(RoutedEventArgs e)
{
    // Add your logic here
} 
```

要调用双击事件，只需从另一个函数（如 KeyDown）调用它：

```
private void someControl_KeyDown(object sender, System.Windows.Input.KeyEventArgs e)
{
    if (e.Key == Key.Enter)
        DoMouseDoubleClick(e);
} 
```

# delphi - Sorting numbers and dates in a KGrid

> ID：11442769
> 
> 赞同：1
> 
> 时间：2012-07-11T22:57:09.210
> 
> 标签：delphi, gridview, lazarus, sorting

I have a KGrid in a Lazarus project that contains different columns with numeric, text and date data.

Sorting by the column with text data is OK but sorting by the columns containing numeric or date data does not work at all.

For instance

10,2,3,1,4,21,30 is sorted as 1,10,2,21,3,30,4 in that order.

Does anyone use KGrid and is there a way to change the grid's OnCompareCells event so that the sorting is done correctly?

Thanks.

# css - css3 simple animation, when hovering off of the element, it doesn't animate, it just snaps back. How to make it animate smoothly back?

> ID：11442771
> 
> 赞同：0
> 
> 时间：2012-07-11T22:57:11.733
> 
> 标签：css, css-animations

[http://jsfiddle.net/nicktheandroid/vX7CV/10/](http://jsfiddle.net/nicktheandroid/vX7CV/10/)

This is a simple example, but for what I need this for, transition will not work, animation needs to be used.

When hovering the element, the animation smoothly animates the element, when hovering off of the element it snaps back to it's original settings without smoothly animating back.

Is there a way to cause it to animate back to it's settings instead of snapping back like it is?

Animate needs to be used for the :hover event, but when hovering off the element, I could use transition, if this would work, I can't get it to work though.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:58:41.000

我已经在 Google Chrome 中测试了你的版本，它对我来说很好用。还添加了 Firefox 兼容性，这对我来说也很好用。

这是我现在拥有的：

HTML：

```
<ul>
    </li>test</li>
</ul> 
```

CSS：

```
ul {
    background-color:black;
    color:white;
    width: 100px;
    height:100px;
}
@-moz-keyframes flow-down {   
    0% {
      padding-bottom: 0%;
    }
    100% {
      padding-bottom: 30%;
    }
}
@-webkit-keyframes flow-down {   
    0% {
      padding-bottom: 0%;
    }
    100% {
      padding-bottom: 30%;
    }
}
ul:hover {
    -moz-animation-name: flow-down;
    -moz-animation-duration: 0.5s;
    -moz-animation-timing-function: ease-in-out;
    -moz-animation-fill-mode:forwards;
    -webkit-animation-name: flow-down;
    -webkit-animation-duration: 0.5s;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-fill-mode:forwards;
} 
```

这是 JSFiddle 版本，只是以防万一：

[http://jsfiddle.net/NQ5xk/1/](http://jsfiddle.net/NQ5xk/1/)

希望这可以帮助。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:12:32.893

在 Firefox 中，如果您在动画期间更改了 'position' 或 'z-index' attr，动画将不会运行

# ios - IOS自定义导航返回按钮不起作用

> ID：11442772
> 
> 赞同：2
> 
> 时间：2012-07-11T22:57:20.040
> 
> 标签：ios, uinavigationcontroller, uibarbuttonitem, uinavigationitem

我在我的视图控制器中尝试了以下操作。没用。我正在使用情节提要。

```
[super viewDidLoad];

UIImage *backImage = [UIImage imageNamed:@"Back.png"] ;
UIBarButtonItem *backButton=[[UIBarButtonItem alloc]initWithImage:backImage style:     (UIBarButtonItemStyleBordered) target:nil action:nil];
backButton.title=@"TEST";
[self.navigationItem setBackBarButtonItem:backButton]; 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:11:13.583

尝试

```
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:[UIImage imageNamed:@"someimage.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:52:30.670

试试这个，这将解决您的图像问题

```
UIImage *backImage = [[UIImage imageNamed:@"Back.png"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];

[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

愿这能解决你的问题。

快乐编码:)

# linux - vmalloc_to_pfn returns 32 bit address on Linux 32 system. Why does it chop off higher bits of PAE physical address?

> ID：11442773
> 
> 赞同：4
> 
> 时间：2012-07-11T22:57:35.523
> 
> 标签：linux, x86-64, 32-bit, vmalloc

I'm using **vmalloc_to_pfn()** to get the physical address on a 32-bit PAE Linux system. It looks like vmalloc_to_pfn() returns "unsigned long" which means it is 32 bit on a 32 bit system, 64 bit on a 64-bit system. On 64-bit Linux, unsigned long is 64 bit and I've no issues.

Problem: Using this function to convert virtual to physical:

VA: **0xf8ab87fc** PA using vmalloc_to_pfn: **0x36f7f7fc**. But I'm actually expecting: **0x136f7f7fc**.

The physical address falls between 4 to 5 GB. But I can't get the exact physical address, I only get the chopped off 32-bit address. Is there another way to get **true physical address?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T11:44:30.410

我自己正在研究这个，并且是 32 位的 - 所以这不完全是一个答案。但是通过相同的东西挖掘，我可以看到来源`vmalloc_to_pfn`说：

```
/*
 * Map a vmalloc()-space virtual address to the physical page frame number.
 */
unsigned long vmalloc_to_pfn(const void *vmalloc_addr)
{
        return page_to_pfn(vmalloc_to_page(vmalloc_addr));
}
EXPORT_SYMBOL(vmalloc_to_pfn); 
```

所以，它实际上不应该返回一个地址——它应该返回一个“页框号”（PFN）。与此相关：

[http://www.tldp.org/LDP/tlk/mm/memory.html](http://www.tldp.org/LDP/tlk/mm/memory.html)

> 再次使用上面的例子，进程 Y 的虚拟页框号 1 映射到物理页框号 4，它从 0x8000 (4 x 0x2000) 开始。添加 0x194 字节偏移量给我们最终的物理地址 0x8194。

显然，人们应该将 PFN 乘以`PAGE_SIZE`得到一个实际地址——这让人很奇怪，你为什么“在 Linux 32 系统上返回 32 位*地址*”完全可以工作（但话又说回来，我不是专家——也许 PFN 相当于 32 位的地址？）。可能是问题 OP 中一个模块的最小工作示例，以及两个平台上的输出以供比较，本来应该是有序的。

无论如何，我刚刚注意到您所拥有的 - 物理地址扩展 (PAE) 可能会对分页产生影响；显然，在页面全局目录 (PGD) 中存储为 PFN 的值是特定于体系结构的，并且根据它的不同定义不同：

```
typedef unsigned long   pgdval_t; // arch/x86/include/asm/pgtable-2level_types.h
typedef u64     pgdval_t;  // arch/x86/include/asm/pgtable-3level_types.h
typedef unsigned long   pgdval_t; // arch/x86/include/asm/pgtable_64_types.h 
```

总而言之-仅使用`vmalloc_to_pfn()`可能不是获取物理地址的全部内容。

# web-scraping - 从 Freebase 获取所有主题名称的列表

> ID：11442774
> 
> 赞同：1
> 
> 时间：2012-07-11T22:57:38.863
> 
> 标签：web-scraping, dump, freebase, data-collection

据[Freebase](http://www.freebase.com/view/common/topic)称，他们有 23,407,174 个主题。获取所有这些主题的 UI 友好名称（本质上是主题 JSON 的“文本”属性，单个主题 JSON 的示例在[这里](http://api.freebase.com/api/experimental/topic/basic?id=/en/bruce_lee)）的最简单方法是什么？我不需要任何其他元信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:08:11.627

```
wget -O - http://download.freebase.com/datadumps/latest/freebase-simple-topic-dump.tsv.bz2 | bunzip2 | cut -f 2 > freebase-topic-names.txt 
```

尽管您可能还需要 Freebase ID，以便知道名称指的是什么：

```
wget -O - http://download.freebase.com/datadumps/latest/freebase-simple-topic-dump.tsv.bz2 | bunzip2 | cut -f 1,2 
```

需要额外的两个后处理位：

1.  制表符转义为 \t
2.  字符串 \N 表示一个空（不存在的）名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:37:06.380

看看我们提供的[简单主题转储](http://wiki.freebase.com/wiki/Data_dumps#Simple_Topic_Dump)。它有超过 GB 的压缩数据，但下载起来比尝试通过 API 获取所有名称要快。

# java - 在实现 Iterator 的抽象类上调用 next() 返回 Object 而不是 E

> ID：11442776
> 
> 赞同：2
> 
> 时间：2012-07-11T22:57:55.397
> 
> 标签：java, generics

我有一个具有以下定义的类：

```
public abstract class A<T> implements Iterator<B> {} 
```

以下对 next() 的调用将返回 Object 而不是 B：

```
A a = new SomethingThatExtendsA();
B b = a.next(); 
```

我已经搜索了很长时间，但无法弄清楚为什么这个 next() 调用无法编译。有人可以为我描述这种行为吗？

编辑原件以进行模板化，因为这似乎很重要。

编辑以进一步澄清：这是一个编译时问题，而不是运行时问题。SomethingThatExtendsA() 的实现；在这种情况下，在编译时应该是无关紧要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T23:33:38.690

所以我们有这个代码：

```
public abstract class A<T> implements Iterator<B> {}
[...]
A a = new SomethingThatExtendsA();
a.next(); 
```

`A`是泛型类型，但您已`a`使用原始类型定义。忽略右边的`=`，我们只对静态类型感兴趣：

```
A/*<Something>*/ a = ...; 
```

编译器应该在这里给你警告。（至少相对较新的 javac 版本会这样做 - `rawtypes`Oracle javac 中的警告。）注意编译器的警告。（javac 不发出警告不是很好吗？）

所以现在我们处于一种`a`既是 raw 又是`Iterator<B>`. 这是一个非常令人困惑的情况，只有令人难以置信的困难含义。我们甚至不应该这样做——我们应该避免混合泛型和原始类型。因此 Java 语言规范采取了简单的方法并丢弃了部分泛型类型信息。

So, don't mix raw and generic types. Just use all generics and you should be fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:12:33.560

```
public abstract class A implements Iterator<B> {}
class B {}
class SomethingThatExtendsA extends A {
// implement A methods
}
A a = new SomethingThatExtendsA();
a.next(); 
```

此代码非常正确并返回 B 对象。可能你在`SomethingThatExtendsA`课堂上错过了什么。

通过调用来测试它：

```
B b1 = new Object();  // compilation error
B b2 = a.next(); // all is OK 
```

**更新：**将 SomethingThatExtendsA中的签名从更改 `public Object next() { }`为`public B next() {}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:31:42.077

The `SomethingThatExtendsA` class is a red herring here. You get the same problem with

```
List<String> list = new ArrayList<String>();
list.add("foo");
Iterator iterator = list.iterator(); // you should get a warning on this line...
String foo = iterator.next(); // ... and a compile error on this line 
```

The issue is that **raw types** are a horrible ugly hack for backwards compatibility only which cause all the generics around them to stop working. Specifically, `Iterator` is **not the same type** as `Iterator<String>`, `Iterator<Object>`, or even `Iterator<?>`. Instead, `Iterator` means "the `Iterator` class I would have got if I had compiled with a pre-generics version of Java". Since the pre-generics version of `Iterator` always returned `Object`, then that's what you get. And you can't assign a value of type `Object` to a more specific type (like `String`, or your type `B`) without a cast.

The Java Language Specification says this:

> The use of raw types is allowed only as a concession to compatibility of legacy code. The use of raw types in code written after the introduction of genericity into the Java programming language is **strongly discouraged**. It is possible that **future versions of the Java programming language will disallow the use of raw types**.

# php - 将文件复制并重命名到同一目录而不删除原始文件

> ID：11442779
> 
> 赞同：23
> 
> 时间：2012-07-11T22:58:21.013
> 
> 标签：php, file, file-upload, file-storage

> **可能重复：**
> [使用 PHP 克隆 + 重命名文件](https://stackoverflow.com/questions/5245369/clone-rename-file-with-php)

这应该很容易。我不想复制和重命名服务器上已经存在的图像，*同时仍保留原始图像*。

这是原始图像位置：

```
images/
   folder/
       one.jpg 
```

这就是我要的：

```
images/
   folder/
       one.jpg 
       one_thumb.jpg 
```

我怎样才能做到这一点？你可以看到我不只是简单地重命名一个现有的文件/图像。我想复制它并将其重命名为同一目录。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-11T23:02:29.837

只需使用复制方法： http: [//php.net/manual/en/function.copy.php](http://php.net/manual/en/function.copy.php)

前任：

```
<?php
$file = 'images/folder/one.jpg';
$newfile = 'Images/folder/one_thumb.jpg';

if (!copy($file, $newfile)) {
    echo "failed to copy";
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T23:03:21.023

PHP 有一个函数，[copy](http://php.net/manual/en/function.copy.php)内置可以做到这一点。这是一个例子：

```
<?php
$file = 'one.jpg';
$newfile = 'one_thumb.jpg';

if (!copy($file, $newfile)) {
    echo "failed to copy $file...\n";
}
?> 
```

该函数返回一个布尔值，指示复制是否成功。就这么简单！

# app-store - Apple 关于禁用旧版本应用程序的政策是什么？

> ID：11442780
> 
> 赞同：5
> 
> 时间：2012-07-11T22:58:24.057
> 
> 标签：app-store, app-store-connect

我的雇主在 iTunesConnect 中有一个免费的 iOS 应用程序，该应用程序最初于几年前发布，并且随着时间的推移收到了各种更新。他们现在希望停止支持旧版本的应用程序 (1.x) 并禁用这些旧版本的应用程序。

我的问题是：

1.  我们可以阻止用户重新安装旧版本的应用程序吗？如果是，如何？
2.  我们如何在 iTunesConnect 中禁用/删除旧版本的应用程序？
3.  Apple 关于禁用/删除旧版本应用程序的政策是什么？

我不是 iOS 开发人员，不熟悉整个 Apple 应用程序开发流程。我搜索了网络以及 Apple 开发者中心，并通读了 Apple 开发者计划条款和条件，但我无法找到任何问题的答案。

我设法找到有关从销售中删除应用程序的信息，但这会删除整个应用程序，而不仅仅是特定版本。（[从 iTunesConnect 删除免费应用程序](https://stackoverflow.com/questions/8475726/deleting-a-free-app-from-itunesconnect)）

David Smith 的关于付费升级的文章 ( [http://david-smith.org/blog/2012/06/20/hacking-paid-upgrades/](http://david-smith.org/blog/2012/06/20/hacking-paid-upgrades/) ) 提到了如果没有从 iTunesConnect 中删除之前的版本，则可以为它们提供修复。当我登录 iTunesConnect 时，我只看到列出的应用程序的当前版本，所以我假设之前的版本已经被删除。但是，我想确认用户不能再下载该应用程序的旧版本。

本文提到用户能够从 iCloud 下载旧版本的应用程序 ( [http://www.macrumors.com/2011/06/09/icloud-supports-re-downloading-some-discontinued-apps/](http://www.macrumors.com/2011/06/09/icloud-supports-re-downloading-some-discontinued-apps/) ) - 我们可以防止这个？一种选择是将版本标记为“法律问题”，但这有什么后果？如果我在 iTunesConnect 中看不到该应用程序，我该怎么做？

我发现一篇帖子询问如何在每次发布新版本时强制用户升级应用程序，但这也不能回答我的问题。我们希望用户升级，但我们不想以编程方式强制升级。（[我可以强制 iPhone 用户升级应用程序吗？](https://stackoverflow.com/questions/2221436/can-i-force-an-iphone-user-to-upgrade-an-application)）

我还发现很多帖子询问如何在应用商店中恢复到以前版本的应用，但同样，这不是我们想要做的。我们希望禁用该应用程序的旧版本，但保留最新版本。

在火焰战争开始之前：

1.  出于某种原因无法更新到最新版本的应用程序的用户可以使用移动网站来代替应用程序。该网站具有完全相同的功能。
2.  是否可以将答案保持在主题上，而不是就是否应该/不应该维护旧版本进行激烈辩论。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:58:37.067

用户通常只能下载最新版本的应用程序。我认为有几种方法可以解决这个问题，但通常只有最新版本才能通过正常方式提供给用户。

但是，如果您绝对必须阻止发布旧版本，您可以在提交新更新时这样做。在您说“准备上传”之后，您将被询问有关此更新是否出于“法律原因”的问题，如果您单击“是”，那么您将有机会禁用旧版本的应用程序下载。

至于苹果对此的政策......我不知道。但我想不出有什么政策会要求您支持旧版本向前发展。

# jquery - 如何处理不返回 JSON 的 JSON 请求？

> ID：11442784
> 
> 赞同：3
> 
> 时间：2012-07-11T22:58:46.117
> 
> 标签：jquery, json, syntax-error

在好的情况下，我的 JSON 端点将返回正确的 JSON 响应：`{status: "success"}`. 但是，如果我的网络服务器 500 错误，则 500 响应正文是 HTML，如果 jQuery 尝试使用`$.parseJSON`.

[这个问题](https://stackoverflow.com/questions/2756344/how-do-i-handle-a-json-request-returning-a-string-in-jquery?rq=1)建议只是从请求中删除 dataType 参数。我宁愿不这样做，有没有办法尝试/捕获由非 JSON 响应引发的 SyntaxError？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:17:11.807

[来自 jQuery API](http://api.jquery.com/jQuery.getJSON/)

```
Important: As of jQuery 1.4, if the JSON file contains a syntax error, 
the request will usually fail silently. 
```

您可以处理它的错误回调。

```
$.ajax({
        url: "MYURL",
        dataType: 'json',
        success: function(data) {

        },
        error: function(e) {
          if(e.status == 500)
            alert("500 Internal Server Error");
        }
}); 
```

# css - 为什么我需要 div 标签之间的内容才能应用样式？

> ID：11442785
> 
> 赞同：0
> 
> 时间：2012-07-11T22:58:53.880
> 
> 标签：css, xhtml

我有下面的代码，并注意到如果我不在标签之间插入任何副本，例如`<div id="header"></div`样式不适用。

*   是否要求标签之间必须始终有内容？
*   有没有更好的方法来实现结果，尤其是在没有要显示的内容时？

可以在[http://jsfiddle.net/7mZxG/找到输出示例](http://jsfiddle.net/7mZxG/)

**代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta http-equiv="content-language" content="en-us" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="&copy; 2012" />
    <meta name="robot" content="noindex, nofollow" />

    <title>XHTML/CSS</title>

    <base href="" />

    <link rel="stylesheet" type="text/css" media="all" href="" />

    <style type="text/css">
    * {
        margin: 0px;
        padding: 0px;
    }

    #header {
        background-color: #eeeeee;
    }

    #footer {
        background-color: #666666;
        position: fixed;
        width: 100%;
        bottom: 0px;
    }

    </style>

    <script type="text/javascript">

    </script>
</head>
<body>
    <div id="container">
        <div id="header">123</div>
        <div id="content">
            <p>
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
            </p>
            <p>
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
            </p>
            <p>
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
            </p>
            <p>
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
            </p>
        </div>
        <div id="footer">It&#39;s a test</div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T23:01:39.383

如果 div 标签中没有任何内容，它的高度将为零。该样式仍然适用，但您看不到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T23:02:06.237

Div 本身的高度为 0，宽度为 100%。

试试，例如：

```
#header {
    background-color: #eeeeee;
    height: 100px;
}

#footer {
    background-color: #666666;
    position: fixed;
    width: 100%;
    height: 100px;
    bottom: 0px;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T23:02:24.390

如果 div 中没有内容，它的高度将为零，您将看不到它。在你的风格中指定一个高度就可以了。

# javascript - Kinetic.js 无法将图像加载到画布上

> ID：11442792
> 
> 赞同：1
> 
> 时间：2012-07-11T23:00:09.440
> 
> 标签：javascript, canvas, kineticjs

我必须缺少一些简单的东西。我已经逐行进行了，但它似乎不起作用。我无法加载图像。

```
var imageToCanvas = function(){
  var stage = new Kinetic.Stage("imgarea", 250, 256);

  var layer = new Kinetic.Layer();

  var imageobj = new Image();
  imageobj.onload = function(){
    var img = new Kinetic.Image({
      x: 10,
      y: 10,
      image: imageobj,
    });
    layer.add(img);
    stage.add(layer);
  };
  imageobj.src = "/static/img/unit-test-image.png";
  console.log(imageobj);
};

$(document).ready( function(){
  imageToCanvas();
});

    <canvas id="imgarea" width="250px" height="256px"></canvas> 
```

相同的代码似乎适用于我使用 Kinetc.js 的另一个画布应用程序。我似乎无法弄清楚为什么这个不起作用。

代码看起来也与教程非常相似：http: [//www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-image-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-image-tutorial/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:47:08.237

看起来你没有正确定义阶段..当我尝试上面的代码时，我收到一个关于未定义容器的错误..试试这个..

```
var stage = new Kinetic.Stage({
  container: "imgarea",
  width: 250,
  height: 256
}); 
```

# php - PHP中Web服务认证的HMAC实现

> ID：11442793
> 
> 赞同：0
> 
> 时间：2012-07-11T23:00:37.097
> 
> 标签：php, web-services, security, authentication, hmac

我正在尝试实现 Web 服务，并且需要一些（非常）简单的 Authenticate 来限制对服务的访问。

我发现了 HMAC，我想我了解如何实现它。但我有几个问题。

假设我在消费者端有这个 HTML 表单。向我的服务器发出 GET/POST 请求时。

1.  是否足以创建一个哈希：`public_key`使用`secret_key`？
2.  或者，我是否需要创建整个`POST`变量/数组的哈希？

我认为发送`public_key`唯一的哈希就足够了，但只是想确保并询问你们。

**我打算这样做：**

1.  创建一个哈希`public_key`
2.  将哈希值与 public_key（或 client_id）和其他 POST/GET 变量一起作为参数放在隐藏字段或 URL 中。
3.  在我的服务器上接收并通过`public_key`使用`secret_key`.
4.  如果哈希匹配，我接受 POST/GET 请求。

你的意见？

**澄清：** `public_key`就像`client unique id`我可以用来识别`secret key`在服务器上生成散列的内容一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T21:30:42.260

pubkey 只是用作识别用户的另一种方式。顺便说一下，它也可能是用户电子邮件，因为您可能不希望将用户数据暴露给他们的程序员（或潜在的嗅探器），因此您为每个用户创建一个唯一标识符。这就是它的全部意思。然后你需要一个私钥来签署你的哈希。

当然，为了让它值得，您**必须**签署所有唯一的请求数据，否则有人可能会更改您的请求正文，而您将无法检测到它（MITM 攻击）。

您还应该注意创建必须包含在 HMAC 本身中的时间戳，然后将其与请求一起传递。通过这种方式，您可以使签名过期，因此您不会受到重放攻击（有人窃取了请求并且不修改它就将其回复到服务器，多次执行相同的操作......如果它是一个请求为您的服务付费，您的用户会非常生您的气）。

还要记住（没有人这样做）加密 HMAC 本身内部的 Request-URI 以及 HTTP 方法（又名动词）如果您使用的是 RESTful Web 服务，否则恶意用户将能够将请求发送到其他 URI 或（使用 RESTful 服务）会改变请求的含义，因此有效的 GET 可能会变成潜在的 DELETE。一个例子可能是：用户想要查看其所有数据，发出 GET 请求，中间人读取请求并使用 DELETE 更改 GET。如果某些内容不在您可以检查的 HMAC 内，您将没有机会检测到该内容已更改，因此您会收到 DELETE 请求并发出*轰隆声！*您销毁所有用户数据。

所以永远记住：**对你的请求至关重要的一切都必须是可验证** 的如果你依赖 HMAC，那么你必须加密你需要信任请求的所有内容。

还要始终记住通过拒绝所有请求来开始设计您的系统，然后如果您可以验证它们执行请求的操作。这样，您总是会依赖被拒绝的请求。最好有一封用户电子邮件告诉您他不能做一些让您的用户数据在网络上传播的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T03:43:08.683

使用 TLS。它解决了这个问题以及许多您甚至还没有想到的问题。

# matlab - 垂直连接矩阵时忽略相似的列

> ID：11442794
> 
> 赞同：1
> 
> 时间：2012-07-11T23:00:38.480
> 
> 标签：matlab, matrix, distance, similarity, concat

在 matlab 中，我有一个 128 x n 矩阵，我们可以称之为

> [ABC]

其中每个字母是一个 128 x 1 的矩阵。

所以我想做的是将上面的矩阵与另一个矩阵连接起来，

> [A~DE]。

其中 A~ 的值与 A 相似。作为 concat 的结果，我想要得到的是：

> [ABCDE],

其中 A~ 被省略。

做这个的最好方式是什么？请注意，我事先并不知道 A~ 是相似的。

为了澄清，我的问题是如何确定两列是否相似？类似的意思是在两列之间的位置，许多行值的值很接近。

也许插图也会有所帮助

```
Vector A: [1  2   3 4 5 6 7 8   9]'
           |  |   | | | | | |   | 
Vector B: [20 2.4 4 5 0 7 7 7.6 10]' 
```

在某些情况下，值完全不同，但在大多数情况下，值是接近的。我对此没有明确的阈值，但理想情况下，这将是我可以试验的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:08:20.960

如果您只想省略**相同**的列，这是一种方法：

```
%# Define the example matrices.

Matrix1 = [ 1 2 3; 4 5 6; 7 8 9 ]';

Matrix2 = [ 4 5 6; 7 8 10 ]';

%# Concatenate the matrices and keep only unique columns.

OutputMatrix = unique([ Matrix1, Matrix2 ]', 'rows')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:24:04.777

为了解决这个问题，可以使用一种称为 vl_ubcmatch 的匹配算法。

> [匹配，分数] = vl_ubcmatch(da, db) ; 对于 da 中的每个描述符，vl_ubcmatch 会在 db 中找到最接近的描述符（通过它们之间差异的 L2 范数来衡量）。原始匹配的索引和最接近的描述符存储在匹配的每一列中，配对之间的距离存储在分数中。

来源： [http ://www.vlfeat.org/overview/sift.html](http://www.vlfeat.org/overview/sift.html)

因此，解决方案是找到得分最高的匹配列，并在连接之前将其消除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:22:56.540

我想这是`pdist2`你需要的。考虑以下示例：

```
>> X = rand(25, 5); 
>> Y = rand(100, 5); 
>> Y(22, : ) = 0.99*X(22,:); 
>> D = pdist2(X,Y, 'euclidean'); 
>> [~,ind] = min(D(:)); 
>> [i,j]=ind2sub(size(D),ind)

    i = 
        22
    j = 
        22 
```

这确实是我们操纵的类似条目。阅读`help pdist2`或`doc pdist2`了解更多背景信息。

# c# - 无法在 Windows 7 x64 上正确注册 x64 COM dll

> ID：11442796
> 
> 赞同：3
> 
> 时间：2012-07-11T23:00:49.713
> 
> 标签：c#, .net, visual-studio, visual-c++, com

我有一个最初为 x86 构建的 C++ ATL COM DLL，为 x86 构建的 .NET 4.0 应用程序正在使用 dll，一切正常。

为 x64 重新编译 COM dll，然后使用注册它`c:\windows\system32\regsvr32`（在取消注册 x86 dll 之后），我无法在 Visual Studio 添加引用窗口中看到 COM DLL，我导出了 HKCR 和 HKLM\Softwares 的注册密钥使用 x64 和 x86 版本的 dll 注册，并且没有丢失任何键，相应的键都指向正确的 dll 位置。

此外，在注册 x64 dll 后，我可以通过导航到文件所在的文件夹并选择它来添加对 dll 的引用，但它仍然无法执行（.net 程序集设置为 x64）并出现以下错误

> System.Runtime.InteropServices.COMException (0x80040154)：检索具有 CLSID {00000000-0000-0000-0000-A797AD238051} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（来自 HRESULT 的异常：0x80040154（ REGDB_E_CLASS NOTREG))。在 System.RuntimeTypeHandle.CreateInstance（RuntimeType 类型，Boolean publicOnly，Boolea n noCheck，Boolean& canBeCached，RuntimeMethodHandleInternal& ctor，Boolean& bNeedSecurity Check）在 System.RuntimeType.CreateInstanceSlow（Boolean publicOnly，Boolean skipCheckThis，Boolean fillCache）在 System.RuntimeType.CreateInstanceDefaultCtor （布尔 publicOnly，布尔 skipVisibilityChecks，布尔 skipCheckThis，布尔 fillCache）在 System.Activator.CreateInstance（类型类型，布尔非公共）

我花了相当多的时间在网上搜索，但没有找到任何远程接近的东西，有人见过这样的东西，或者我可以使用的任何调试工具？

顺便说一句，我不拥有 dll，拥有它的人可以在机器上看到 x64 dll，但在其他 2 台机器上尝试过，但在任何一台机器上都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-01T18:59:06.017

这个问题很老，我需要更多信息才能完全排除故障。但是，我也许可以为遇到相同问题的任何人提供一些提示。

鉴于您正在使用`regsvr32`DLL，因此 DLL 正在使用一种称为[self-registration](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694515(v=vs.85).aspx)的东西。这意味着 DLL 正在一个名为[DllRegisterServer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682162(v=vs.85).aspx)的导出函数中处理它自己对 Windows 注册表的添加。正如您似乎已经发现的那样，x86 和 x64 之间的注册表项不同，但这不一定是您的核心问题。您可以而且通常应该同时注册 x86 和 x64 类型库。

检查特定类型库如何注册的一种方法是[oleview](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693754(v=vs.85).aspx)工具。相同的信息在注册表中，但这个工具可以更友好一些。该工具应位于 Visual Studio 命令提示符设置的路径中。听起来错误与具有给定 GUID 的类有关，您可以从树中的 Object Classes -> All Objects 中进行检查：

![在树中找到一个类](../Images/8f667efa3eefe9db9be45c5ace1cce45.png)

如果您碰巧拥有该类（您可能必须重新注册 x86 版本才能检查），您可以通过扩展您刚刚找到的 GUID 的条目来找到有关该类实现的 COM 接口的信息。如果有类型库，应该这样说。请注意， TypeLib 信息中的路径可以同时存在`win32`和条目：`win64`

![带有 win32 和 win64 路径的接口示例](../Images/2623b9254489f465ff36c5db56def70a.png)

如果没有更多信息，很难说，但我猜想 x64 的自注册和/或类型库有问题。顺便说一句，对于您计划发布的库，您可能无论如何都不依赖自注册——安装程序包可以而且应该自己创建注册表项。如果您确实有更多信息，我可以尝试提供更多细节。

# java - Eclipse将引用的jar添加到导出的jar文件的问题

> ID：11442800
> 
> 赞同：0
> 
> 时间：2012-07-11T23:01:29.707
> 
> 标签：java, eclipse, logging, log4j, slf4j

我想从 maven java 项目创建一个 jar 文件，并将其作为外部 jar 文件添加到另一个项目中。但是我不断收到 NoClassDefFoundError 错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at com.tutelatechnologies.dashboard.DataUsageLogs.Logging.getlogger(Logging.java:10)
    at com.tutelatechnologies.dashboard.DataUsageLogs.Logging.d(Logging.java:26)
    at com.tutelatechnologies.dashboard.DataUsageLogsRunner.DUL_TESTER.main(DUL_TESTER.java:11)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 3 more 
```

jar 文件非常简单。它仅包含使用 Log4J 和 SLF4J 进行日志记录的包装器。我已经把它包括在内：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class Logging {

    public void e(String msg, Class inputClass)
    {
        Logger logs = LoggerFactory.getLogger(inputClass);
        logs.error(msg);
    }
    public void w(String msg, Class inputClass)
    {
        Logger logs = LoggerFactory.getLogger(inputClass);
        logs.warn(msg);
    }
    public void d(String msg, Class inputClass)
    {
        Logger logs = LoggerFactory.getLogger(inputClass);
        logs.debug(msg);
    }
    public void t(String msg, Class inputClass)
    {
        Logger logs = LoggerFactory.getLogger(inputClass);
        logs.trace(msg);
    }    
} 
```

现在我右键单击这个项目，选择 Export -> Java -> Jar File 然后单击 Finish。选择所有文件夹。

然后我转到我的新项目并通过右键单击我的项目添加 jar 文件，选择 Build Path-> Configure Build Path。然后在库选项卡中，单击“添加外部罐子”按钮并将其链接到我的 jar 文件。我附上了我的源代码和一个 javadoc，以便我可以验证它是否正确链接。它看起来没问题，但是当我运行它时，我得到了 NoClassDefFoundError。这是因为 Eclipse 不会将依赖项添加到 jar 文件中。

如果我将项目添加到 Java Build 路径，我可以让它工作。但我希望这是一个自包含的 jar 文件。当它击中 LoggerFactory.getLogger(inputClass); 时它会崩溃 它正在寻找 slf4j 依赖项。

以下行是用于测试的唯一行。

```
Logging.d("test", thisClass.class); 
```

是否可以将所有依赖项打包到一个 jar 文件中并正确链接？

仅供参考，我已经尝试将它制作成一个可运行的 Jar，它可以正常工作，但是 jar 文件不知道如何链接到 log4j.properties 文件。该文件位于 src/main/resources 中。

任何帮助表示赞赏。

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:16:25.157

看起来丢失的 jar 是 SLF4J 本身，而不是您的代码。根据您的文件夹结构，您似乎正在使用 Maven。您是否可能仅将 slf4j-api.jar 标记为测试依赖项？您实际上*需要*针对该插件进行编译（即，将其标记为编译依赖项），但不同的插件可以是测试依赖项，例如 logback-classic 或您正在使用的任何插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:56:19.110

我不确定到底是什么问题，但我能够让它工作。我导出了文件，但只选择了相关的源文件和属性文件。然后我将它添加到我的其他项目订单和导出选项卡列表的顶部。

最终，我将 jar 添加为 maven 依赖项，然后将 jar 的所有必要依赖项也添加到新项目中，这很有效。

干杯。

# curl - 如何获取个人理财软件的数据

> ID：11442801
> 
> 赞同：0
> 
> 时间：2012-07-11T23:01:36.627
> 
> 标签：curl, web-crawler

对于一个学生项目，我想编写一个简单的个人理财软件。但我不知道如何获取银行数据。mint.com 和其他网站如何获取服务的财务数据？他们只是简单地卷曲银行的网上银行网站并过滤数据，还是有银行提供的通用 API 来获取银行数据？我做了一些研究，发现了诸如[电子银行互联网通信标准](http://en.wikipedia.org/wiki/Electronic_Banking_Internet_Communication_Standard)之类的东西，但我想这些需要银行的授权，不适合我的用例。有没有比通过 curl 等手动抓取网站更好的方法？

# asp.net-mvc-3 - 我可以关闭 Visual Studio 的“[文件] 已打开。要关闭它吗？” 行为？

> ID：11442803
> 
> 赞同：4
> 
> 时间：2012-07-11T23:01:51.207
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我今天在VS2010中安装了MVC3。从那时起，如果我双击解决方案资源管理器中的*某些*项目，我会得到这个对话框：

![在此处输入图像描述](../Images/c6f7babdad3f5167a75fc16664e62977.png)

这是间歇性的，但很烦人。它似乎只发生在几个文件中。我无法想象在解决方案资源管理器中双击文件时，我希望该文件关闭的情况。有问题的文件都是 Razor 视图，但并非所有 Razor 视图都发生这种情况，即使它们位于同一目录中。它们都具有相同的文件扩展名。

我可以禁用此对话框并将其设置为始终打开我在解决方案资源管理器中双击的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-28T17:54:29.273

关闭 VS 并重新打开对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:31:57.187

重新启动计算机，此问题就消失了。

# php - 我可以使用 javascript 但不使用 jquery 或 ajax 将参数发送到 php 控制器吗？

> ID：11442806
> 
> 赞同：0
> 
> 时间：2012-07-11T23:02:07.653
> 
> 标签：php, javascript, ajax

好吧，这个问题已经足够解释了。

我想做的是从弹出窗口中获取数据，然后关闭我想将检索到的内容发送到 php 控制器进行处理。

但我不想使用 jquery 库，因为它给我造成了冲突。

更新

```
window.onbeforeunload = confirmExit;
function confirmExit()
{        

    var a = document.getElementsByTagName("div");
    for (i = 0; i < a.length; i++) {           
        if(a[i].className == 'Ymacs-frame-content'){
            var b = a[i].getElementsByTagName("div").innerHTML;             
        //alert(b);
        }             
    }

//Ajax should be here

        window.onbeforeunload = reloadOpener;

        if (top.opener && !top.opener.closed) {
            try {
                opener.location.reload(1); 
            }
            catch(e) {  }
            window.close();
        }
    }
    window.ununload=function() {
        reloadOpener();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:04:53.103

你可以只使用 jquery-less AJAX：

```
var a = new XMLHttpRequest();
a.open("GET","myscript.php?var=foo&othervar=bar",true);
a.onreadystatechange = function() {
    if( this.readyState == 4) {
        if( this.status == 200) {
            // data sent successfully
            // response is in this.responseText
        }
        else alert("HTTP error "+this.status);
    }
};
a.send(); 
```

或者，您可以创建一个`iframe`标签并将其指向正确的页面。如果需要，您甚至可以创建一个表单并将其发布到框架中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:04:36.403

您可以在不使用 jQuery 的情况下在 javascript 中执行此操作，因为这就是 jQuery 在后台所做的一切。不过，您需要查看 IE 与其他浏览器相比的不同方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:04:40.397

是的，[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)，但是您需要考虑浏览器的差异，jQuery 为您做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T23:09:43.800

我刚刚经历了这个。使用 Javascript 将信息传递给 PHP 的唯一方法是使用 XMLHttpRequest，或者至少如果我没有找到另一种方法。这与 PHP 在服务器端呈现的事实有关，而 Javascript 直到它被提供给客户端之后才会执行……除非你使用 XHR，它是……AJAX。

# compiler-errors - 安装 ccons 的 Cmake 错误

> ID：11442808
> 
> 赞同：0
> 
> 时间：2012-07-11T23:02:23.237
> 
> 标签：compiler-errors, cmake, compiler-flags

在我执行之后`cmake CMakeLists.txt`，似乎没有错误，我运行 make 它给了我以下错误：

```
:/usr/local/src/llvm-3.1.src/tools/ccons$ sudo make
[  7%] Building CXX object CMakeFiles/ccons.dir/ccons.cpp.o
/usr/local/src/llvm-3.1.src/tools/ccons/ccons.cpp:1:0: error: bad value (x86_64) for -march= swi
tch
make[2]: *** [CMakeFiles/ccons.dir/ccons.cpp.o] Error 1
make[1]: *** [CMakeFiles/ccons.dir/all] Error 2
make: *** [all] Error 2 
```

有没有办法弄清楚如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:44:33.927

首先，您为什么要使用 构建软件`sudo`？那是自找麻烦。您应该只`sudo`在安装时需要（即`sudo make install`）。

无论出于何种原因，您的编译器似乎都传递了`-march=x86_64`它认为无效的标志。要查看 CMake 尝试使用哪些标志进行编译，请执行以下操作：

1.  运行`make edit_cache`。
2.  按下`t`以打开高级模式。这使您可以查看其他缓存变量。
3.  查找以 开头的变量`CMAKE_CXX_FLAGS`。不同的构建类型有不同的，但其中一个可能会有这个`-march=x64_64`标志。

祝你好运。

# c# - 来自通用基类中的字段的 C# 反射 GetValue

> ID：11442812
> 
> 赞同：6
> 
> 时间：2012-07-11T23:02:45.513
> 
> 标签：c#, generics, reflection, fieldinfo

问题是我们不能获取仅位于具有泛型类型的基类中的字段（非泛型）的值。请参阅下面的代码片段。打电话

```
f.GetValue(a) 
```

将抛出异常消息：不能对 Type.ContainsGenericParameters 为 true 的类型的字段执行后期绑定操作。

```
class Program
{
    static void Main(string[] args)
    {
        Type abstractGenericType = typeof (ClassB<>);
        FieldInfo[] fieldInfos =
            abstractGenericType.GetFields(BindingFlags.Public |  BindingFlags.Instance);

        ClassA a = new ClassA("hello");
        foreach(FieldInfo f in fieldInfos)
        {
            f.GetValue(a);// throws InvalidOperationhException 
        }
    }
}

internal class ClassB<T>
{
    public string str;
    public ClassB(string s)
    {
        str = s;
    }
}

internal class ClassA : ClassB<String>
{
    public ClassA(string value) : base(value)
    {}
} 
```

我们的设计要求我们在获得任何实际对象的实例之前首先获得 FieldInfo。所以我们不能使用

```
Type typeA = abstractGenericType.MakeGenericType(typeof(string));
FieldInfo[] fieldInfos = typeA.GetFields(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T18:53:49.110

如果您灵活并且愿意使用属性而不是字段，则可以通过在泛型基类上放置非泛型接口来完成您想要的事情。这是原始代码的重构版本，显示了更改和概念。

```
 class Program
    {
        public static void Main(string[] args)
        {
            Type interfaceType = typeof(IGetStr);
            PropertyInfo[] propertyInfos = interfaceType.GetProperties(BindingFlags.Public | BindingFlags.Instance);

            ClassA a = new ClassA("hello");

            foreach (PropertyInfo p in propertyInfos)
            {
                var myValue = p.GetValue(a, null); // does not throw InvalidOperationException 
            }
        }
    }

    internal interface IGetStr
    {
        string StringValue { get; set; }
    }

    internal class ClassB<T> : IGetStr
    {
        public string str;

        public ClassB(string s)
        {
            str = s;
        }

        public string StringValue
        {
            get
            {
                return str;
            }
            set
            {
                str = value;
            }
        }
    }

    internal class ClassA : ClassB<String>
    {
        public ClassA(string value)
            : base(value)
        { }
    } 
```

接口是访问泛型类的非泛型属性的好方法。使用如图所示的接口，只要您使用 IGetStr 的接口，您就可以获得从 ClassB<> 继承的任何类的名为“StringValue”的属性，而不管泛型类型如何。

您还可以将您的“ClassA”对象转换为 IGetStr，以下将起作用。（非常适合所有从您的通用基础继承的项目列表）

```
var result = ((IGetStr)a).StringValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:15:26.970

我想问题出在这一点上，泛型类是用特定类型动态编译的。泛型类型也可以定义为

```
internal class ClassB<T>
{
    public T value;

    public string str;
    public ClassB(string s)
    {
        str = s;
    }
} 
```

那么你在获取字段“value”的值时会遇到问题。解决方法是使用 .GetType() 直接检索类型，或者创建一个没有包含您要访问的字段的通用参数的新基类。

# batch-processing - 使用批处理脚本将大型 XML 行读取到变量

> ID：11442818
> 
> 赞同：0
> 
> 时间：2012-07-11T23:03:19.737
> 
> 标签：batch-processing, batch-file

我有一个只包含一行的 xml 文件，但问题是行非常大，所以我似乎无法存储在变量中。

我想要的是这个

给定tag1，tag2.....tag900，我想将每个标签分成一行，如下所示：

标签1

标签2

标签3

……

标签900

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:59:21.677

不要尝试使用本机批处理来执行此操作。这将非常困难，任何解决方案都会非常缓慢。

问题是本机批处理无法读取 > 8k 的行，并且批处理没有读取部分行的好方法。

有一种方法可以创建一个大小 >= 包含单个重复字符的文件的测试文件。然后进行二进制文件比较 ( `FC /B`)，并将结果逐个字符地解析为十六进制代码。它比那更复杂，但我认为你不想去那里。

唯一的其他选择是使用 SET /P 一次读取 1021 个字符，然后解析和拼凑。但这未经证实，而且我认为不值得付出努力。

如果你想使用原生脚本语言，我建议使用 VBScript 或 JScript。（也许是 PowerShell，但我不太了解它的功能）。

您可以下载已移植到 Windows 的 Unix 文本处理工具，例如 sed。

我对 XML 做的不多，但我必须相信有一个专门为 XML 设计的免费工具可以让您的工作相当轻松。

基本上，使用*除*批处理之外的任何东西！（这来自一个爱好批量解决问题的人）

# jquery - 滑动页面过渡

> ID：11442821
> 
> 赞同：0
> 
> 时间：2012-07-11T23:03:32.393
> 
> 标签：jquery, transitions, sliding

我想要一个在页面之间滑动的网站，但我发现的关于滑动页面转换的所有内容都适用于单页网站。对于某些 SEO 和营销目的，我宁愿有多个页面会在页面加载时滑动，这可能使用 jQuery 或其他一些语言吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:10:10.553

您需要将整个原始 html 发布到新页面（可能以表单值编码），然后在加载新页面时，首先实际显示此原始 html，然后在新页面中滑动。不过可能会很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:21:08.827

我在考虑这个问题，我是否可以不只是将其中所有内容的包装器放置在边缘，例如 -3000px，然后在页面加载时将其动画化到视图中，以及何时单击链接将其发送到另一侧?

# asp.net - 指定 WCF 数据服务的日期时间格式

> ID：11442836
> 
> 赞同：2
> 
> 时间：2012-07-11T23:04:58.600
> 
> 标签：asp.net, datetime, wcf-data-services, odata, datetime-format

有没有办法指定 WCF 数据服务返回的 DateTime 数据的格式？

[这个问题](https://stackoverflow.com/questions/3818719/how-to-handle-json-datetime-returned-from-wcf-data-services-odata)似乎是说默认格式（看起来像`/Date(1339515455030)/`）是自 1970 年 1 月 1 日午夜 UTC 以来的毫秒数。如果必须，我可以弄清楚如何解析它，但我宁愿指定更友好的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:46:01.027

OData DateTime 格式（假设您尚未将其格式化为字符串）取决于客户端和服务器之间协商的有线格式。上面的格式来自[JSON Verbose](http://www.odata.org/documentation/json-format#PrimitiveTypes)，对应一个标准的 JavaScript Date 对象。[Atom 格式](http://www.odata.org/developers/protocols/atom-format#PrimitiveTypes)不同，JSON Light 也不同。特别值得注意的是，我们决定放弃传统的 JavaScript 日期格式，转而支持 JSON Light 的[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)。在任何这些情况下，如果您使用的是 WCF DS 客户端或 data.js 等客户端，客户端将负责正确反序列化该值。

*   Atom 格式化日期：`<d:OrderDate m:type="Edm.DateTime">1996-07-04T00:00:00</d:OrderDate>`
*   JSON 详细格式化日期：`"OrderDate":"\/Date(836438400000)\/"`
*   JSON 轻格式日期：`"ShippedDate":"1996-07-16T00:00:00"`

有关各种平台上的当前客户端库，请参见此处：[http ://www.odata.org/libraries](http://www.odata.org/libraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:19:43.697

在 OData V3 中，JSON 详细格式使用 ISO 8601，这似乎对某些消费者更友好。请注意，仅当有效负载为 V3 时才会使用它。所以你需要更新你的服务器端以支持 OData V3（如果它是 WCF DS，那么你想使用 WCF DS 5.0 版本，例如可以在 NuGet [http://blogs.msdn.com/b/astoriateam /archive/2012/05/18/wcf-data-services-5-0-1-released.aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/05/18/wcf-data-services-5-0-1-released.aspx)）。

一旦你有了它，你可能需要强制服务器在响应负载中使用 V3，因为默认情况下它将使用最低版本的响应。这可以通过发送 MinDataServiceVersion: 3.0; 来完成。带有来自客户端的请求的标头。

在此之后，即使是 JSON 详细负载也应该使用 ISO 日期时间格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:13:52.013

我相信您应该能够将发送回的字符串值反馈到 datetime.parse(http://msdn.microsoft.com/en-us/library/1k1skd40.aspx) 并且不必担心其余的

这是一个示例用法： http: [//www.dotnetperls.com/datetime-parse](http://www.dotnetperls.com/datetime-parse)

# php - Codeigniter 函数列表

> ID：11442837
> 
> 赞同：-1
> 
> 时间：2012-07-11T23:04:58.713
> 
> 标签：php, list, function, codeigniter

我想要 Codeigniter 的所有功能列表来开发 Codeigniter 自动语法完整的程序。谁能给我一份Codeigniter所有功能的清单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:05:44.023

```
https://www.codeigniter.com/user_guide/ 
```

点击右上角的目录

这些是一些功能：

```
https://www.codeigniter.com/user_guide/libraries/loader.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:34:48.730

要么自己梳理源文件，要么使用像[phpDocumentor](http://www.phpdoc.org/)这样的文档工具。

甚至 CI 用户指南也没有列出所有可用的函数（例如，它没有列出任何私有类方法或 中的许多函数`core/Common.php`）。

一个好的 IDE 应该能够在扫描项目中的 CI 文件后处理自动完成，而无需您付出额外的努力。

# mysql - 简单的调查数据库设计

> ID：11442839
> 
> 赞同：0
> 
> 时间：2012-07-11T23:05:10.030
> 
> 标签：mysql, database-design, survey

我正在为我的活动的访客创建一项调查。但是，自从我创建数据库以来已经有一段时间了。所以我需要一些帮助。

我找到了一些解决方案，但它们的范围很广，这是我不需要的。

访客需要保持匿名，但他们可以留下他们的电子邮件（单独的表格电子邮件，未链接到任何 atm）。他们有大约 20 个问题，有些是开放的，有些是一个选项（单选），有些是多个选项（复选框）。这些问题需要可重复使用。就是这样。我只是不知道如何超越您在下图中看到的多对多。 ![调查数据库设计](../Images/372cb2f6cda047c4ebd23bfe9417b326.png)

我怎么从这里走？Answers 表需要与？Surveys_have_Questions 或有问题？

# 编辑：

正如以下链接中的答案所提到的，大多数调查都基于经典设计模式。我的就是其中一项调查。以下链接中的更多信息： [哪些 mysql 数据库表和关系将支持带有条件问题的问答调查？](https://stackoverflow.com/questions/540885/database-design-for-a-survey-system/5858666#answer-5858666)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:16:47.500

我可能会模拟用户进行调查的事件，可能是一个名为“User_Answer_Session”的表，其中包含指向调查和用户的链接；然后是“User_Answers”，它们与会话和问题相关联，并包含答案的实际 blob。我如何*准确地*模拟答案将取决于几件事（主要是我希望能够查找它们的稳健程度）。例如，我是否希望能够索引多项选择答案以实现极其快速的报告？如果是这样，那么您需要为此建模。这可能包括创建一个“Question_Options”表，该表是问题和可用选项之间的一对多...

这应该让你沿着一条好的道路思考。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-02T02:43:11.273

好吧，我不明白为什么你需要所有这些桌子！我认为它可以比这简单得多。

**调查**

```
desc VarChar
startDate timestamp
endDate timestamp
isOpen boolean 
```

**调查问题**

```
survery_id int (FK)
question Text
vote_count unsigned INT 
```

**用户调查**

```
user_id
survery_id 
unique key (user_id_survery_id) #to ensure no duplicate votes 
```

这一切:)。每当用户投票时

```
insert into user_survery (user_id,survery_id) VALUES (1,1);
update survery_questions set vote_count = vote_count+1; 
```

当您需要获得调查结果时

```
select * from survery_questions where survery_id = X; 
```

等等

# firefox - 更新我的 Firefox 扩展 - 自动更新不起作用

> ID：11442844
> 
> 赞同：1
> 
> 时间：2012-07-11T23:05:43.563
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我的 Firefox 扩展不在官方扩展网站上托管。它托管在安全 (https) 服务器上。根据我的阅读，我不需要签署我的附加组件，对吗？

问题是它不起作用。我安装了我的插件，然后单击“检查更新”，但它说没有找到更新。我已将更新清单和安装清单中的版本从 initial.rev332 设置为 initial.rev333。

有人可以说明我的情况吗？非常感谢 ：）

**我的安装清单...**

```
<?xml version="1.0" encoding="utf-8"?>
<RDF xmlns="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:em="http://www.mozilla.org/2004/em-rdf#">

<Description about="urn:mozilla:install-manifest">
<em:id>jid0-BsYlcooDmgR331LCKZwABfD4yQk@jetpack</em:id>
<em:version>initial.rev333</em:version>
<em:type>2</em:type>
<em:bootstrap>true</em:bootstrap>
<em:unpack>false</em:unpack>

<!-- Firefox -->
<em:targetApplication>
  <Description>
    <em:id>{jid0-BsYlcooDmgR331LCKZwABfD4yQk@jetpack}</em:id>
    <em:minVersion>3.4</em:minVersion>
    <em:maxVersion>30.*</em:maxVersion>
  </Description>
</em:targetApplication>

<!-- Front End MetaData -->
<em:name>iStyla</em:name>
<em:description>iStyla is a marketplace for themes for Facebook, Twitter and Google+     </em:description>
<em:creator>iStyla</em:creator>
<em:homepageURL>https://www.istyla.com/</em:homepageURL>

<em:updateURL>https://www.istyla.com/Updates/firefox.rdf</em:updateURL>

</Description>
</RDF> 
```

**我的更新清单**

```
<?xml version="1.0"?>
<r:RDF xmlns:r="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns="http://www.mozilla.org/2004/em-rdf#">

<r:Description about="urn:mozilla:extension:jid0-BsYlcooDmgR331LCKZwABfD4yQk@jetpack">
<updates>
<r:Seq>
<r:li>
<r:Description>
    <version>initial.rev333</version>
    <targetApplication>
        <r:Description>
        <id>{jid0-BsYlcooDmgR331LCKZwABfD4yQk@jetpack}</id>
        <minVersion>3.0</minVersion>
        <maxVersion>30.*</maxVersion>
        <updateLink>https://www.istyla.com/Updates/Firefox.xpi</updateLink>
        <updateHash>
        sha256:af031d8bb9303a42ab1f270845e9c692d65cd4fc
        </updateHash>
        </r:Description>
    </targetApplication>
</r:Description>
</r:li>
</r:Seq>
</updates>
</r:Description>

</r:RDF> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:36:32.277

我认为您的插件版本号需要采用不同的格式：[https ://developer.mozilla.org/en/Install_Manifests#version](https://developer.mozilla.org/en/Install_Manifests#version)

尝试此处列出的版本控制格式来区分版本：[https ://developer.mozilla.org/en/Toolkit_version_format](https://developer.mozilla.org/en/Toolkit_version_format)

也许试试`<em:version>0.0.333</em:version>`

另外，我认为这不是`<em:maxVersion>30.*</em:maxVersion>`有效的（不过我可能是错的。如果您不在 AMO 上托管它，它可能会正常工作）。以下是 FWIW 可用的有效 Firefox 版本号列表：[https ://addons.mozilla.org/en-US/firefox/pages/appversions/](https://addons.mozilla.org/en-US/firefox/pages/appversions/)

# objective-c - 将 KNSemiModal 或 MJPopUpView 与情节提要一起使用

> ID：11442855
> 
> 赞同：0
> 
> 时间：2012-07-11T23:08:03.737
> 
> 标签：objective-c, xcode

每当我尝试关闭半模态视图时，都会留下一个崩溃的应用程序。我想我已经正确设置了关闭模式视图，但它似乎不起作用。这是使用 XIB 文件的演示应用程序中的样子：

```
 MJDetailViewController *detailViewController = [[MJDetailViewController alloc] initWithNibName:@"MJDetailViewController" bundle:nil];
[self presentPopupViewController:detailViewController animationType:MJPopupViewAnimationSlideBottomBottom]; 
```

这是我要替换的内容：

```
[self presentPopupViewController:[self.storyboard instantiateViewCOntrollerWithIdentifier:@"example"]  animationType:MJPopupViewAnimationSlideBottomBottom]; 
```

`[self.storyboard instantiateViewControllerWithIdentifier:NSString]`似乎没有正确替换（`instWithNib`或任何功能）。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:36:13.027

我做了类似的事情。

我将删除 MJDetailViewController 中的所有 init 方法，并在身份检查器的“故事板 ID”属性中添加“示例”，然后调用

```
[self presentPopupViewController:[self.storyboard instantiateViewCOntrollerWithIdentifier:@"example"]  animationType:MJPopupViewAnimationSlideBottomBottom]; 
```

# javascript - CRM 2011：仅在某些实体上启用批量编辑

> ID：11442860
> 
> 赞同：0
> 
> 时间：2012-07-11T23:08:38.823
> 
> 标签：javascript, dynamics-crm-2011

我目前正在寻求禁用除少数实体以外的所有实体的批量编辑，其中之一是“活动响应”实体。

为了实现这一点，我做了以下工作：

*   在全局级别隐藏 OOTB 编辑按钮（据我所知，您无法以这种方式编辑 OOTB 功能区按钮）
*   在全局级别创建一个新的自定义编辑按钮（减去 SelectionCountRule 节点）
*   对于我需要批量编辑的每个实体：
    *   隐藏自定义编辑功能区按钮
    *   使用 SelectionCountRule 节点创建一个新的自定义编辑按钮。

现在这一切正常，直到我进入任何实体上的活动子网格。由于我处理此问题的方式，活动表单上现在有 2 个编辑按钮（一个用于常规编辑按钮，一个用于活动响应的编辑按钮）。

我不确定如何准确解决这个问题，但我有一个想法，我需要一些帮助：

*   删除“批量编辑”编辑按钮
*   在全局级别，在自定义编辑按钮的选择规则中添加 JavaScript
    *   JavaScript 将获取所选实体的逻辑名称（在所有子网格上）
    *   如果实体是活动响应，则启用（或附加？）SelectionCountRule 到功能区

我不确定这是否可能。我主要不确定 JavaScript 到功能区启用规则允许什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:25:54.170

小伙伴们别说

原来我所要做的就是覆盖 OOTB 按钮（如下所示：http: [//howto-mscrm.blogspot.com.au/2011/04/how-to-series-6-how-to-overrideenable.html](http://howto-mscrm.blogspot.com.au/2011/04/how-to-series-6-how-to-overrideenable.html) ) 使用一些简单的 XML：

```
<EnableRule Id="sample.AllGrids.AllEntities.MainTab.Management.Edit.Command.EnableRule.CustomRule">
  <CustomRule FunctionName="canBulkEdit" Library="$webresource:new_sample_generic_functions_javascript_library">
    <CrmParameter Value="SelectedControlSelectedItemCount" />
    <CrmParameter Value="SelectedEntityTypeName" />
  </CustomRule>
</EnableRule> 
```

和一些 JavaScript：

```
canBulkEdit = function (oSelectedControlSelectedItemCount, oSelectedEntityTypeName) {
    var canBulkEditEntity = false;
    if (oSelectedControlSelectedItemCount < 2 || oSelectedEntityTypeName == "campaignresponse")
        canBulkEditEntity = true;

    return canBulkEditEntity;
} 
```

还必须对 ActivityPointer“实体”做一些额外的调整。原来活动指针有一个不同的批量编辑按钮

# php - 如何让我的 iPhone 应用程序将我的 Facebook 身份验证令牌传递到我的网络服务器？

> ID：11442865
> 
> 赞同：0
> 
> 时间：2012-07-11T23:09:49.857
> 
> 标签：php, iphone, facebook, facebook-graph-api, ios4

我有一个 Web 服务器，它要求浏览器客户端首先通过 Facebook 进行身份验证，然后使用该会话访问 Facebook PHP SDK 并与 Facebook 交互。客户端从不直接与 FB 对话，只有 Web 服务器会

我希望在我的 iPhone 应用程序上使用相同的方案...让 iPhone 使用 FB 登录，然后我使用 NSURL API 与我的网络服务器通信并让 cookie 传递。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:21:00.197

[您可以从GitHub](https://github.com/facebook/facebook-ios-sdk)下载适用于 ios 的 Facebook SDK 。[此处](https://developers.facebook.com/docs/reference/iossdk/authentication/)还提供了有关如何从您的 iPhone 应用程序使用 facebook 进行身份验证的文档。然后，您想在服务器端开发一个 API，以便将 Facebook Auth 提供的令牌从您的应用程序传递到服务器。就是这样。您可以使用[NSURLConnection](http://www.google.co.in/url?sa=t&rct=j&q=nsurlconnection&source=web&cd=1&ved=0CEwQFjAA&url=http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html&ei=ZFD-T47oMIXWrQei34TPBg&usg=AFQjCNGgCeD6BC0kPwWGMhWms7OjuFTszg&cad=rja)与您的服务器通信。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:38:00.447

将 FB ios sdk 与您的应用程序集成。Facebook sdk 将返回通过应用程序登录的当前用户的 access_token。

但是我们不能通过 NSURL 设置域 cookie。它是一个不同的概念，称为跨域 cookie

# wpf - WPF ComboBox 错误的空白值

> ID：11442867
> 
> 赞同：-1
> 
> 时间：2012-07-11T23:09:55.950
> 
> 标签：wpf, drop-down-menu, combobox

我有一个绑定到一组数据的 WPF ComboBox。我没有权限直接修改控件，也不能更改数据。

我在 ComboBox 中返回了 1 项，但实际上有 2 行；空白行和我的期望值。两者的索引值似乎都是 0。我不想看到这个空白行，只是我在自动选择的 ComboBox 中的预期数据。我在这里查看了每个人的相关帖子，但没有一个解决方案适用于我的情况。我已经编程很长时间了，但对 WPF 还是很陌生。谢谢您的帮助。

XAML

```
<MyComboBox Name="myTemplate5" MyLookup="Lookup" MyFilter="att_idn=-37" MyData="Detail" MyName="comp_tmpl_idn_srt" ModCde="31" MyEmptyValue="0" ToolTip="Have a nice day" Margin="0,2.5,30,2.5" MinWidth="120" Grid.Column="1"  SelectionChanged="myTemplate5_SelectionChanged" /> 
```

C＃

```
private void myTemplate1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    MyComboBox work = sender as MyComboBox;
    if (work != null && work.HasSelectionChanged(e))
    {
        int compTmplId = int.Parse(work.SelectedValue.ToString());
        if (!_wpfIsDumb && !ChangeComponent(compTmplId))
        {
            _wpfIsDumb = true;
            work.SelectedItem = e.RemovedItems[0];
            _wpfIsDumb = false;
        }
    }
}

public bool HasSelectionChanged(SelectionChangedEventArgs e)
{
    if (e.RemovedItems.Count > 0 && e.AddedItems.Count > 0)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:26:15.170

我找到了解决方案。所选索引不起作用。问题出在数据上。我得到一个传递给盒子的 NULL 值。一旦我从 SQL 中删除了 NULL 返回，它就会按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:51:12.013

您可以通过将 SelectedIndex 设置为 0 来实现此目的。

XAML：

```
<ComboBox Name="myCB" 
                  SelectedIndex="0"
                  MaxWidth="200" MaxHeight="25" /> 
```

代码隐藏：

```
namespace nsComboBox
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            myCB.Items.Add("Item 1");
            myCB.Items.Add("Item 2");
            myCB.Items.Add("Item 3");

            myCB.SelectedIndex = 0;
        }     
    }
} 
```

# matlab - matlab中的for循环

> ID：11442868
> 
> 赞同：0
> 
> 时间：2012-07-11T23:09:59.440
> 
> 标签：matlab, optimization, for-loop, linear-programming

嗨，我有以下代码，我认为这些代码索引错误，所以我没有得到我正在寻找的答案

```
Diesel_matrix = xlsread('test_diesel.xlsx','Sheet2');

Diesel_supply = Diesel_matrix(:,1); % Power output of diesel generator

hourly_cost = Diesel_matrix(:,2);  % Diesel cost of running genreator at that output

 for z = 1:21

 A    = [-PV_supply -WT_supply -Diesel_supply(z)*ones(24,1)];

   f = [CRF_PV*CC_PV; CRF_WT*CC_WT; (CRF_Diesel_generator*CC_Diesel)+sum(hourly_cost(1:z))]  ;

 b = -Demand;

 [x,fval,exitflag] = linprog(f,A,b,[],[],lb,ub)
 end 
```

我试图只循环矩阵A的第三列。我想循环矩阵A的每行“Diesel_supply”中的所有行

目前，该代码适用于 21 组 x 输出，但第 3 列是第 1、2、3 行等，直到“Diesel_supply”的第 21 行。Wheras 我正在尝试将它用于第 1 行和第 2 行以及第 3 和第 4 行等，直到“Diesel_supply”的第 21 行。这将允许我检查“Diesel_Supply”中的所有元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:14:26.650

根据@user643469 和我在聊天中的对话（请参阅评论部分中的链接），然后查看 linprog 的文档，我认为您需要将每次 z 迭代的结果存储在数据结构中，然后选择最好的循环结束。

据我了解，生成器有 21 种不同的模式可以运行，它受到 24 种不同的约束。每种模式都会稍微改变约束。

代替

```
[x,fval,exitflag] = linprog(f,A,b,[],[],lb,ub) 
```

利用

```
val = linprog(f,A,b,[],[],lb,ub)
results(z) = val; 
```

循环完成后，您将得到一个尺寸为 4x21 的结果矩阵，其中第一列包含 x 值，第二列包含 fval 值，第三列包含 exitflag 值。然后，您可以通过这个“结果”矩阵来确定您可用于运行生成器的 21 种模式中的哪一种。

# java - 将 tools.jar 添加到 Maven 1.x 和 Eclipse

> ID：11442870
> 
> 赞同：0
> 
> 时间：2012-07-11T23:10:10.627
> 
> 标签：java, eclipse, api, maven-1

有谁知道如何将 Sun/Oracle JDK 中的 tools.jar 添加到 Maven 1.x 依赖项中，以便在运行后将其添加到 Eclipse 构建路径中：

```
>maven eclipse 
```

我可以在我的 maven.xml 中添加 tools.jar 依赖项作为 pregoal，但是当我运行上述命令在 Eclipse 中设置我的项目依赖项时，这对我没有帮助。要求签出源代码的每个人都在 Eclipse 中手动编辑他们的项目依赖项是一种反模式。

请注意，这必须针对 Maven 1.x，因为我们的项目太大并且在可预见的将来升级到 Maven 2 或 3 的配置太多。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:31:55.463

Java + Maven1.x的可能重复[：如何添加sun的tools.jar？](https://stackoverflow.com/questions/2149633/java-maven1-x-how-to-add-suns-tools-jar).

无论项目规模如何，我都强烈建议安排从 Maven 1.x 迁移到 Maven 3 的时间。（甚至不要考虑迁移到 Maven 2，因为这没有多大意义）。我很理解你。我不得不进行从 Ant 到 Maven 2.x 以及从 Maven 1.x 到 Maven 2.x 的大规模迁移（我为这两家公司做了 200-400 个模块）。我的观点是 Maven 1.x 在大约 2 到 3 年前（可能更早）就已经走到了生命的尽头。很少有人愿意帮助你解决基于果冻的混乱，你会陷得更深。

您可以尝试将 tools.jar 添加为项目的依赖项：

```
<dependency>
      <groupId>com.sun</groupId>
      <artifactId>tools</artifactId>
      <version>1.4.2</version>
      <scope>system</scope>
      <systemPath>${java.home}/../lib/tools.jar</systemPath>
      <properties>
           <eclipse.dependency>true</eclipse.dependency>
      </properties>
</dependency> 
```

如果旧的文档页面没有被弃用，我会看一看，可能会有更多帮助。告诉你“利益相关者”想想现在是哪一年。技术过期了，需要更新。显然，对于某些软件的创建者决定将其过期并要求您升级到更新的软件，他们应该有一个非常好的理由，例如 - 它不如它应该的那么好，他们有更好的东西给你。

看看[这里](http://maven.apache.org/maven-1.x/plugins/eclipse/faq.html)和[这里](http://maven.apache.org/general.html#tools-jar-dependency)。希望你能弄清楚。

# c# - MSChart 改变了我的价值

> ID：11442873
> 
> 赞同：0
> 
> 时间：2012-07-11T23:10:28.927
> 
> 标签：c#, .net, charts, mschart

我有一张 MS 图表。我的代码如下：

```
chart.Series[chartType].Points.DataBindXY(xValues, xCaption, yValues, yCaption);
chart.ChartAreas[0].AxisX.LabelStyle.Format = "CustomAxisXFormat";
chart.FormatNumber += new EventHandler<FormatNumberEventArgs>(chart_FormatNumber); 
```

然后

```
private void chart_FormatNumber(object sender, FormatNumberEventArgs e)
{
    if (e.ElementType == ChartElementType.AxisLabels &&
        e.Format == "CustomAxisXFormat")
    {
        e.LocalizedValue = string.Format("{0:hh tt}", new DateTime(1, 1, 2, (int)e.Value, 0, 0).AddHours(-1));
    }
} 
```

`xValues`和`yValues`are 是整数数组。
我遇到的问题是，如果`xValues = int[]{1,2,3}`在`chart_FormatNumber`处理事件时，值 ( `e.Value`) 更改为`{2,3,4}`.
所以必须在那里做减法以使其成为正确的值。
有人能告诉我发生了什么和/或如何阻止 MSChart 改变我的价值观吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:42:08.507

好的，经过一番摸索，我弄清楚发生了什么。我提供的 x 参数是 int。MS 图表将 +1 和 -1 添加到 x 轴范围。我提供的 x 值是`xValues = int[]{1,2,3}`. 在`chart_FormatNumber()`我得到`{0,1,2,3,4}`这让我失望。

# jquery - 为fancybox动态设置href目标？

> ID：11442877
> 
> 赞同：0
> 
> 时间：2012-07-11T23:10:42.717
> 
> 标签：jquery, fancybox

好的，我已经成功使用了 fancybox，但我想知道是否可以为 href 传递一个值？我已经把一个笨重的解决方案放在一起，但盒子告诉我“无法加载请求的内容。请稍后再试。” 我所做的是创建了一个单独的函数来触发fancybox的启动......

首先是 iframe/fancybox 元素的 html（作为一个用户看不到的小按钮）：

这是我的代码：

```
<a id="link2" href="ContentPage.aspx"><input id="Btn1" type="button" value="GetContent" class="smallBtnCls" /></a> 
```

..和javascript：

```
function launchCont(rid){
        var lnk = 'ContentPage.aspx ?act=Add&id=' + rid;
        $('#link2').attr('href',lnk);

        //alert($('#link2').attr('href'));
        $("#Btn1").fancybox().trigger('click');
    } 
```

花哨的盒子配置是：

```
 $("#Btn1").click(function() {
    $("#link2").fancybox({
        'width': '55%',
        'height': '45%',
        'autoScale': false,
        'modal': true,
        'transitionIn': 'elastic',
        'transitionOut': 'elastic',
        'type': 'iframe',
        onStart: function() {
            //return window.confirm('Continue?');
            $.fancybox.showActivity();
        },
        onCancel: function() {
            //alert('Canceled!');
        },
        onComplete: function() {
            //alert('Completed!');
            $.fancybox.hideActivity();
        },
        onCleanup: function() {
            //return window.confirm('Close?');
        },
        onClosed: function() {
            //alert('Closed!'); 
        }
    });

}); 
```

有任何想法吗？？？？还是我看错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:14:34.637

去掉第`fancybox()`一种方法和多余的空格：

```
function launchCont(rid){
    var lnk = 'ContentPage.aspx?act=Add&id=' + rid;
    $('#link2').attr('href',lnk);
    $("#Btn1").trigger('click');
} 
```

# python - 获取外键字段中引用的所有对象

> ID：11442882
> 
> 赞同：1
> 
> 时间：2012-07-11T23:11:23.007
> 
> 标签：python, django, django-models

我有类似的模型

```
class Person(Model):
    name = CharField(max_length=100)

class Movie(Model):
    ...
    director = ForeignKey(Person) 
```

我如何获得设置为任何 Movie 对象的导演的所有 Person 对象的集合？

编辑：澄清一下，如果我的电影“表”由两个条目组成，一个是导演 A，一个是导演 B，而我的人“表”由三个条目 A、B 和 C 组成，我想得到设置 {A, B}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:39:43.107

我想到了，

```
Person.objects.exclude(director__set=None) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:33:12.120

首先你需要得到这个人：

my_person = Person.objects.get(name="XXX")

然后，获取他所有的电影：

person.movi​​e_set.all()

# java - java-生成id（字符串和整数的组合）

> ID：11442884
> 
> 赞同：0
> 
> 时间：2012-07-11T23:11:37.780
> 
> 标签：java, sql, string

我正在 NetBeans (java) 中制作应用程序。此应用程序具有字符串和整数的唯一 id 组合，如`abc/111`or`xyz/253`并且整数部分应在数据库中出现新条目时增加，即`abc/112`和`xyz/254`。

问题是整数部分的值会增加，直到它以适当的方式达到 10，但之后它不会增加并且对于数据库中的进一步条目保持不变。

我使用了以下代码 -

```
try{
    String sql = "SELECT RegNumber FROM Death ORDER BY RegNumber DESC   ";
    pst = conn.prepareStatement(sql);

    rs = pst.executeQuery();

    if (rs.next()) {

        String add1 = rs.getString("RegNumber");
        String[] parts= add1.split("/");
        String part1= parts[0];
        String part2= parts[1];
        int a,b;
        a= Integer.parseInt(part2);
        b=a+1;

        jTextField20.setText(""+part1+"/"+b);

        JOptionPane.showMessageDialog(null, "done");
    }
   } 
```

“*整数部分增加到 10* ”意味着如果我在数据库中开始 id 的第一个值，`abc/1`那么新的 id 会自动为下一个条目生成增加值 1 ，`abc/2`对于下一个条目，它是这样`abc/3`的，依此**类推**: `abc/4`, ...,`abc/10`

但是当它达到`abc/10`新生成的 id 时，它仍然是相同的，即`abc/10`对于数据库中的每个新条目。（我使用的是 MS Access 2007 并且`id`是`text`类型）。数据库中的第一个 id 是由应用程序自己创建的。

如果有人有另一种生成方法`id`，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:18:19.683

问题是

```
String sql = "SELECT RegNumber FROM Death ORDER BY RegNumber DESC   "; 
```

将按字母降序排序，按字母顺序排列

```
"abc/9" > "abc/10" 
```

这就是为什么你的程序总是一遍又一遍地获取 9 ......

我认为您必须拆分该列进行存储，并将数字部分作为实际数字类型存储在数据库中。这可能并不像听起来那么难，您总是可以对 2 个字段进行排序

```
String sql = "SELECT RegNumber FROM Death ORDER BY RegString DESC, RegNumber DESC   "; 
```

您还可以考虑`SERIAL`在某些情况下（即如果 RegNumber 未重置，例如当字符串部分更改时）为 RegNumber 部分使用（自动增量）数据类型，以进一步简化您的插入逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T23:21:02.693

您的选择查询按 desc 顺序对条目进行排序，这些条目是 Varchar 类型“SELECT RegNumber FROM Death ORDER BY RegNumber DESC”

这意味着在将其获取值排序为 abc/9、abc/8、abc/7、abc/6、abc/5、abc/4、abc/3、abc/2、abc/10、abc/1 之后。

这意味着第一个 id 总是 9，这意味着下一个值总是 10。

# google-drive-api - Google Drive：从 Google Drive 仪表板禁用“打开方式”我们的应用程序

> ID：11442885
> 
> 赞同：0
> 
> 时间：2012-07-11T23:11:41.100
> 
> 标签：google-drive-api

我们有一个 Google Drive 集成应用程序 (marqueed.com)，它允许您从我们的应用程序内部验证和上传您的 Google Drive 图像。

但是，我们不希望 Google Drive 用户能够从 Google Drive 仪表板打开文件（“打开方式”）我们的 Marqueed 应用程序： ![禁用此](../Images/79c6779a2bd674ad600d9c3936d1b9d7.png)

我们不希望我们的应用出现在上面的屏幕截图中，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:37:16.303

对于那些 MIME 类型或扩展名列在 API 控制台的 Drive SDK 选项卡中的文件，您的应用程序会显示在“打开方式”菜单中：[https ://code.google.com/apis/console/](https://code.google.com/apis/console/)

只需从默认和次要 MIME 类型和扩展中删除这些值，您的应用程序将不再显示。

有关更多详细信息，请查看[https://developers.google.com/drive/register#setting_mime_types_and_extensions上的文档](https://developers.google.com/drive/register#setting_mime_types_and_extensions)

# c++ - 使用 condition_variable 控制多线程流

> ID：11442886
> 
> 赞同：7
> 
> 时间：2012-07-11T23:11:57.133
> 
> 标签：c++, multithreading, c++11, condition-variable

我还没有完全理解 C++11 多线程的东西，但是我试图让多个线程等到主线程上的某个事件，然后所有线程同时继续（处理发生的事情），`wait`当他们再次'完成处理......循环直到它们被关闭。下面不完全是 - 这是我的问题的更简单再现：

```
std::mutex mutex;
std::condition_variable cv;

std::thread thread1([&](){ std::unique_lock<std::mutex> lock(mutex); cv.wait(lock);  std::cout << "GO1!\n"; });
std::thread thread2([&](){ std::unique_lock<std::mutex> lock(mutex); cv.wait(lock);  std::cout << "GO2!\n"; });

cv.notify_all(); // Something happened - the threads can now process it

thread1.join();
thread2.join(); 
```

这行得通……除非我停在一些断点上并放慢速度。当我这样做时，我看到`Go1!`然后挂起，等待`thread2`'s `cv.wait`。怎么了？

也许我无论如何都不应该使用条件变量...... 周围没有任何条件`wait`，也没有需要用互斥锁保护的数据。我应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T23:22:29.840

你在正确的轨道上......

只需添加一个布尔值（受互斥体保护，由条件变量指示），表示“开始”：

```
std::mutex mutex;
std::condition_variable cv;
bool go = false;

std::thread thread1([&](){ std::unique_lock<std::mutex> lock(mutex); while (!go) cv.wait(lock);  std::cout << "GO1!\n"; });
std::thread thread2([&](){ std::unique_lock<std::mutex> lock(mutex); while (!go) cv.wait(lock);  std::cout << "GO2!\n"; });

{
    std::unique_lock<std::mutex> lock(mutex);
    go = true;
    cv.notify_all(); // Something happened - the threads can now process it
}

thread1.join();
thread2.join(); 
```

# python - Python多处理队列失败

> ID：11442892
> 
> 赞同：10
> 
> 时间：2012-07-11T23:12:20.617
> 
> 标签：python, queue, multiprocessing

我创建了 100 个子进程

```
proc_list = [
    Process(target = simulator, args=(result_queue,))
    for i in xrange(100)] 
```

并启动它们

```
for proc in proc_list: proc.start() 
```

每个进程在进行一些处理后放入 result_queue（multiprocessing.Queue 的实例）10000 个元组。

```
def simulate(alg_instance, image_ids, gamma, results,
                     simulations, sim_semaphore):
  (rs, qs, t_us) =  alg_instance.simulate_multiple(image_ids, gamma,
                                             simulations)
  all_tuples = zip(rs, qs, t_us)
  for result in all_tuples:
    results.put(result)
  sim_semaphore.release() 
```

我应该（？）在队列中获得 1000000 个元组，但经过各种运行后，我得到了这些（样本）大小：14912 19563 12952 13524 7487 18350 15986 11928 14281 14282 7317

有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-11T23:33:07.313

我对多处理问题的解决方案几乎总是使用 Manager 对象。虽然暴露的接口是相同的，但底层实现要简单得多，并且错误更少。

```
from multiprocessing import Manager
manager = Manager()
result_queue = manager.Queue() 
```

尝试一下，看看它是否不能解决您的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-25T00:46:39.763

multiprocessing.Queue 在其文档中被称为是线程安全的。但是当你使用 Queue 进行进程间通信时，它应该与 multiprocessing.Manager().Queue() 一起使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-12T18:13:18.060

OP帖子中没有任何证据表明`multiprocessing.Queue`它不起作用。OP 发布的代码根本不足以理解发生了什么：他们加入了所有流程吗？他们是否正确地将队列传递给子进程（如果它在 Windows 上，则必须作为参数）？他们的子进程是否验证他们实际上得到了 10000 个元组？等等

有可能 OP 确实遇到了一个难以重现的错误`mp.Queue`，但考虑到 CPython 的测试量，以及我刚刚运行 100 个进程 x 10000 个结果而没有任何问题的事实，我怀疑 OP 实际上他们自己的代码有问题。

是的，`Manager().Queue()`在其他答案中提到的是一种非常好的共享数据的方式，但是没有理由避免`multiprocessing.Queue()`基于未经证实的“它有问题”的报告。

# php - 用php设置图像宽度？

> ID：11442896
> 
> 赞同：1
> 
> 时间：2012-07-11T23:12:40.243
> 
> 标签：php

我正在用 php 创建一个自定义博客。当用户上传一篇文章时，我对帖子中的图片有疑问。一些图像的宽度大于我博客中的主 div (740)。我想使用 php 检查图像的宽度，如果它大于 740，然后将图像重新调整为 740。

```
<?php
$dom = new domDocument;
$dom->loadHTML($article_content);
$dom->preserveWhiteSpace = false;
$imgs  = $dom->getElementsByTagName("img");
$links = array();

for($i=0;$i<$imgs->length;$i++){
$links[]  = $imgs->item($i)->getAttribute("width");
$image_path = $links[];
$article_source = imagecreatefromstring(file_get_contents($image_path));
$image_width = imagesx($image_source);
if($image_width > 740){$image_width = 740;}      
}   

?> 
```

到目前为止，这是我拥有的代码。我不确定如何设置图像宽度。（图像已经具有其原始宽度） 更新：我没有尝试保存或复制图像。我正在尝试通过 php 访问 dom 并将图像宽度设置为 $image_width （所有图像）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:20:07.937

从您的代码中，我假设您正在使用 GD 库。在这种情况下，您正在寻找的是[imagecopyresized()](http://www.php.net/manual/en/function.imagecopyresized.php)。

如果图像宽度太大，这是您可能想要的示例：

```
$thumb = imagecreatetruecolor($newwidth, $newheight);

imagecopyresized($small_image, $image_source,
        0, 0, 0, 0, $newwidth, $newheight, $image_width, $image_height); 
```

然后`$small_image`将包含图像的缩放版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T02:51:55.800

如果不保存/复制图像，您将不得不将 HTML 文档中的 img 标签替换为具有 width 属性的标签。

```
$dom = new domDocument;
$dom->loadHTML($article_content);

$imgElements  = $dom->getElementsByTagName("img");
foreach ($imgElements as $imgElement) {

    $imgSrc = imagecreatefromstring(file_get_contents($imgElement->getAttribute("src")));

    if (imagesx($imgSrc) > 740) {

        // we replace the img tag with a new img having the desired width
        $newE = $dom->createElement('img');
        $newE->setAttribute('width', 740);
        $newE->setAttribute('src', $imgElement->getAttribute("src"));

        // replace the original img tag
        $imgElement->parentNode->replaceChild($newE, $imgElement);
    }
}

// html with "resized" images
echo $dom->saveHTML(); 
```

# c# - 使用 SQL Server 数据库上的查询来计算某种类型的记录并按某些外键分组

> ID：11442903
> 
> 赞同：1
> 
> 时间：2012-07-11T23:13:43.917
> 
> 标签：c#, asp.net, sql-server, select

我正在使用 Visual Studio 2010 Professional 和 SQL Server 数据库开发一个 ASP.NET Web 应用程序。我在数据库中有一些记录用于下一个表： ![在此处输入图像描述](../Images/104f231ad54042b645a9ac7774888f60.png)

有没有一种方法可以计算例如只有一个查询，根据 sarcini 中的每个员工（angajat）外键，表 sarcini 中有多少条记录有 stare_task（意味着 task_state）=关闭？我认为这太模棱两可了，但我不知道如何准确解释我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:29:18.767

```
Select
    id_angajat
    ,sum(case when stare_task = 'Closed' then 1 else 0 end) as [Closed_Records]
From sarcini
Group by id_angajat 
```

假设 MS SQL Server 并且您只是使用表 sarcini..

**编辑：** Sql Fiddle 示例：[http ://sqlfiddle.com/#!3/c2c89/2](http://sqlfiddle.com/#!3/c2c89/2)

# java - 使用 selenium java 按索引号选择列表值

> ID：11442905
> 
> 赞同：1
> 
> 时间：2012-07-11T23:14:11.807
> 
> 标签：java, drop-down-menu, selenium, webdriver

我尝试`select()`在我的代码中使用该方法，但 Eclipse 显示错误。是`select()`Selenium 的内置方法吗？我不明白。

```
select(driver2.findElement(By.xpath("//*@id='webLossReport.contact.address.state']")),index=i); 
```

Eclipse 说`"The method select(WebElement, int) is undefined for the type entry"`，它给了我一个在这个类中创建方法的选项。

请让我知道其他人如何使用它。我的要求是“根据索引号选择列表值”

更新：按要求发布的代码，

```
WebElement LSD = driver2.findElement(By.xpath("//select[@id='webLossReport.lossInformation.locationOfLoss.state']"));
List <WebElement> LLS = LossStateDropdown.findElements(By.tagName("option"));

int i= LLS.size();      
select(driver2.findElement(By.xpath("//*@id='webLossReport.contact.address.state']")),index=i); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T00:40:45.560

你不知何故迷失在 Selenium RC 和 Selenium WebDriver 之间。假设您想使用 WebDriver，[请参阅此文档，它解释了一切](http://seleniumhq.org/docs/03_webdriver.html#user-input-filling-in-forms)。

您可以执行以下操作 - 它直接`<option>`在指定的第三个标签中找到`<select>`并单击它：

```
driver.findElement(By.xpath("id('selectsId')/option[3]")).click(); 
```

或者这个使用[`Select`类](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/Select.html)：

```
Select sel = new Select(driver.findElement(By.id("selectsId")));
sel.selectByIndex(3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T12:58:00.133

在 C# 中，我用这个解决了：

```
selenium.Select("id=yourID", "index=" + i.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:34:27.940

我不熟悉这个库，但[Selenium 参考页面](http://release.seleniumhq.org/selenium-remote-control/0.9.0/doc/java/com/thoughtworks/selenium/Selenium.html#select%28java.lang.String,%20java.lang.String%29)给出了以下签名`select`：

`select(java.lang.String selectLocator, java.lang.String optionLocator)`

在您的代码中，第二个参数是`index=i`分配`index`给 的值`i`，然后返回该`int`。您打算将什么字符串作为第二个参数传递？`"index=i"`? `"index=" + i`?

# python - 如何设置 Pylint 只做一些检查

> ID：11442910
> 
> 赞同：11
> 
> 时间：2012-07-11T23:14:47.937
> 
> 标签：python, pylint

我正在尝试将 Pylint 设置为仅进行某些检查而不进行其他检查，例如仅检查 W0601 和 W0612。我尝试在我的 pylint.rc 部分使用`enable=`一行，`[MESSAGES CONTROL]`但这似乎并没有达到我想要的效果。

我正在使用 Pylint 0.25.1。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T05:47:23.047

看起来像 rc 文件解析方式的错误。

命令行上的订单事项（未记录？）因此您需要先禁用然后启用：

```
pylint xyz.py --disable R,C,W,E --enable W0601,W0612 
```

**但这不能正确反映`--generate-rcfile`并且不能用于`--rcfile`...这些可能是错误。就像[#36584](http://www.logilab.org/ticket/36584)一样。**

在带有 disable 行的 rc 文件中，所有消息都被禁用，即使在命令行上启用 disable before enable 也是如此。

```
[MESSAGES CONTROL]
disable=R,C,W,E
enable=W0601,W0612 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-22T02:50:08.323

在 Pylint >= 0.27 中有一个新`--disable=all`选项

`pylint --disable=all --enable=W0201`

或者

`pylint -d all -e W0201`

您可以将它放在 rc 文件中，但正如*aneroid*指出的那样，仍然存在一个错误，这意味着您无法启用任何消息，除了从命令行，所以：

```
[MESSAGES CONTROL]
disable=all 
```

然后

`pylint -e W0201`

会工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T07:10:11.180

@aneroid：您可能是对的，在生成/读取配置文件时可能存在顺序问题；并且还应记录命令行上的顺序很重要的事实。我已经计划并相应地评论了您所指的票。

@peter-graham，所以您可能必须使用命令行来实现这一点，直到修复 #36584 票证。我会推荐：

```
pylint --disable-all --enable=W0601,W0612 
```

# parameters - 如何将数据集从 TCL 中的 proc 中传递出去

> ID：11442912
> 
> 赞同：1
> 
> 时间：2012-07-11T23:14:58.847
> 
> 标签：parameters, return, tcl

我正在从程序中的文件中逐行读取一组数据。现在我怎样才能从这个过程中返回这些数据行。以及如何将从此过程输出的这些数据分配给数据集？

```
proc readdata{} {
    set fptr [open Test1.txt r]
    set fptr_data [read $fptr]
    set data [split $fptr_data "\n"]  
} 
```

我怎样才能从这个过程中返回这些数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:28:16.163

您可以使用[返回](http://tcl.tk/man/tcl8.5/TclCmd/return.htm)语句：

```
proc readdata {filename} {
    set fptr [open $filename r]
    set fptr_data [read $fptr]
    set data [split $fptr_data "\n"]
    return $data
}
...
set dataset [readdata Test1.txt] 
```

但是，默认情况下，Tcl 过程返回最后运行的命令的结果。就个人而言，我更喜欢明确的`return`陈述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T03:59:24.323

从技术上讲，您不需要做任何其他事情：

> 调用过程时，过程的返回值是`return`命令中指定的值。如果过程不执行显式`return`，则其返回值是过程主体中*执行的最后一个命令的值。*

-- [http://www.tcl.tk/man/tcl8.5/TclCmd/proc.htm](http://www.tcl.tk/man/tcl8.5/TclCmd/proc.htm)

# html - 当浏览器调整大小时，如何防止 div 元素移动？

> ID：11442914
> 
> 赞同：0
> 
> 时间：2012-07-11T23:15:43.323
> 
> 标签：html, css

我正在为学校作业做一个网站，但是当我调整屏幕大小并使其更宽时，这些`div`元素正在脱离它们的位置。

我怎样才能防止这种情况？

**大多数div是：**

```
.menu {
    padding-top:120px;
    position:absolute;
    color:white;
    font-size:28pt;
    font-weight:Bolder; 
} 
```

**我的html：**

```
<body id="BODY" class="BDNL" onResize="MOSTRA()"> 
  <div id="resizing" class="">
    <div id="intro" class="divintro">
      <p id="p" class="comeco">Trabalho Interdisciplinar Orientado:</p>
      <p id="texto" class="txtcomum">
        Trabalho no qual um grupo deve elaborar um site que <br />
        relacione todas as matérias técnicas estudadas.
      </p>
    </div>
    <form>
      <div id="menu" class="menu">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="index.html"><label>RECO</label></a>
        &nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;&nbsp;
        <a href=""><label>LOCO</label></a>
        &nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;&nbsp;
        <a href=""><label> LP1</label></a>
        &nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;&nbsp;
        <a href=""><label> LP2</label></a>
        &nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;&nbsp;
        <a href=""><label> INFO</label></a>
      </div>
    </form>
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:24:03.063

您可能想查看 CSS 的[min-width](http://www.w3schools.com/cssref/pr_dim_min-width.asp)和[width](http://www.w3schools.com/cssref/pr_dim_width.asp)属性。

* * *

好的。你的 HTML 看起来很乱。首先，为了您自己的眼睛，请开始缩进您的代码。

```
<html>
    <head>
        <title>Page title</title>
    </head>
    <body class="BDNL" onResize="MOSTRA()">
        <div id="resizing">
            <div class="menu">
                <a href="index.html">RECO</a>|
                <a href="other.html">LOCO</a>|
                [--]
            </div>
            <div id="intro">
                <p>
                    <h1>Trabalho Interdisciplinar Orientado</h1>
                    [..]
                </p>
            </div>
        </div>
    </body>
</html> 
```

这是实现所需结构所需的最小 HTML 源代码。你为什么要`position:absolute;`在 上使用`.menu`，我猜你希望它位于实际内容之上？我移动了容器`.menu`上方。`#intro`

使用以下 CSS 来实现您可能想要的结果：

```
.menu {
    margin: 0 0 30px 0; /* bottom margin 30px */
}

.menu a {
    margin: 0 20px; /* left, right margin 20px; top, bottom 0 */
} 
```

还

*   请决定是否要在元素上使用类或 ID，在大多数情况下，您不需要两者，
*   摆脱多余的类和 ID（*或没有*`<p class="p">`意义`<p id="p">`），
**   为您的内容使用适当的 html 元素。使用`<h1>`- .. 标签作为标题而不是不同样式的段落。*   让自己熟悉[CSS Margins](http://www.w3schools.com/css/css_margin.asp)并摆脱多个`&nbsp;`.*

 *正如您在另一个问题中提到的，您可能希望为您的元素（例如.menu）提供一个固定的（最小）宽度，以防止元素变得太窄：

```
.menu {
    min-width: 300px;
} 
```*

# postgresql - PostgreSQL 多种认证方式

> ID：11442915
> 
> 赞同：30
> 
> 时间：2012-07-11T23:15:44.377
> 
> 标签：postgresql, authentication, postgresql-9.1

如何为同一主机/数据库/用户规则设置多种身份验证方法？我希望能够同时使用`sudo -u postgres psql -U postgres`（无需输入 PostgreSQL 密码）和`psql -U postgres --password`. pg_hba.conf 中类似以下内容：

```
local   all             postgres                        md5
local   all             postgres                        peer 
```

我只能同时使用一种方法或另一种方法。

谢谢。

（我使用的是 PostgreSQL 9.1）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-12T02:12:00.280

没有。任何给定配置仅支持一种身份验证方法。

如果 Pg 可以支持后备身份验证，我会喜欢它，如果身份检查失败，它允许 md5 身份验证。不过，它目前不支持此功能，我怀疑（我尚未验证）需要更改协议来支持它。

您*可以*做的是将密码存储在系统用户的`$HOME/.pgpass`文件中。`postgres`将其设置为 0600 模式，使其只能由`postgres`用户和读取`root`，无论如何，他们都可以直接访问数据库文件和配置。这样你就可以轻松管理*和*md5 身份验证。在某些系统上，您可能必须先为用户设置和创建主目录，`postgres`然后才能执行此操作。查看用户是否有 homedir，`getent passwd postgres`如果`postgres`有，它在哪里。

（**更新：**用于阅读`$HOME/.psqlrc`- 这很有用，但`.pgpass`适用于密码存储）

# ruby - 局部变量中的实例与局部变量

> ID：11442916
> 
> 赞同：1
> 
> 时间：2012-07-11T23:15:55.350
> 
> 标签：ruby, ruby-on-rails-3

我目前正在阅读 Michael Hartl 的教程 Ruby on Rails 教程[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)。我对某些部分变量的来源感到困惑。在他的教程中，他创建了用户和微博。用户可以在他的主页上创建一个 Micropost（称为 Feed）并将它们发布到那里。布局看起来像这样[http://ruby.railstutorial.org/chapters/user-microposts#fig:proto_feed_mockup](http://ruby.railstutorial.org/chapters/user-microposts#fig:proto_feed_mockup)。现在 User 模型看起来像这样（我没有发布整个内容）：

```
class User < ActiveRecord::Base
  has_many :microposts, dependent: :destroy

  def feed
    Micropost.where("user_id = ?", id)
  end
end 
```

Micropost 模型如下所示：

```
class Micropost < ActiveRecord::Base
  belongs_to :user
end 
```

在文中作者说 User 模型中的 feed 方法可以等效地写成这样：

```
def feed
  microposts
end 
```

为什么它们是一样的？

我的下一个问题与局部有关。如果我没记错的话，在用户的显示页面 (show.html.erb) 上会调用 _microposts.html.erb：

```
<%= render @microposts %> 
```

_microposts.html.erb 看起来像这样：

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method: :delete,
      data: { confirm: "You sure?" },
      title: micropost.content %>
  <% end %>
</li> 
```

我的问题是 micropost 变量来自哪里？它与调用此部分的@micropost 变量相同吗？

现在在用户主页 (home.html.erb) 上有一个对 _feed.html.erb 部分的调用，如下所示：

```
<%= render 'shared/feed' %> 
```

_feed.html.erb 看起来像这样：

```
<% if @feed_items.any? %>
  <ol class="microposts">
    <%= render partial: 'shared/feed_item', collection: @feed_items %>
  </ol>
  <%= will_paginate @feed_items %>
<% end %> 
```

我知道@feed_items 来自哪里。它设置在控制器中。现在 _feed_item.html.erb 看起来像这样：

```
<li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
  <span class="user">
    <%= link_to feed_item.user.name, feed_item.user %>
  </span>
  <span class="content"><%= feed_item.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
  </span>
  <% if current_user?(feed_item.user) %>
    <%= link_to "delete", feed_item, method: :delete,
      data: { confirm: "You sure?" },
      title: feed_item.content %>
  <% end %>
</li> 
```

所以一个类似的问题是变量 feed_item 来自哪里，它包含什么？

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:30:43.527

好吧，让我们来看看。一口气问了很多问题，但是...

1.  为什么“feed”等同于“microposts”？这是 Rails 的协会在工作。当你`has_many`用来描述一个关联时，Rails 会根据关联名称创建一大堆方法。在这种情况下，您说 User `has_many :microposts`，其中包括创建一个`User#microposts`方法。

2.  渲染调用 ( `@microposts`) 中使用的实例变量可能是在控制器操作中设置的。当您以这种方式调用 render 时（使用 ActiveRecord 对象数组），Rails 会查找名称与这些对象的类名匹配的部分。在这种情况下，它们是 MicroPost 对象，因此它会查找已命名的部分`_micropost`并为数组中的每个对象呈现一次。在渲染局部时，可以使用与局部同名的局部变量来引用与局部关联的对象。由于这是`_micropost`局部变量，因此局部`micropost`变量指的是它正在渲染的对象。

3.  再一次，与局部同名的局部变量指的是局部正在渲染的对象。@feed_items 是一个集合，对于其中的每个对象，您都会获得一个局部渲染`_feed_item`，其中`feed_item`局部变量引用该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:22:53.820

1.  因为用户的微博是使用`has_many`和内部关联的，所以关系是基于用户的 id 的。“手动”获取它们本质上是相同的，但需要更多的工作。
2.  `micropost`来自约定——Rails 为您创建它。我不知道你所说的“`@micropost`调用这个部分的变量”是什么意思。
3.  相同的答案，尽管它明确基于模板名称（IIRC）而不是单数名称。它包含任何内容中的一个`@feed_items`。

# python - 从脚本运行五个 SQL 查询

> ID：11442917
> 
> 赞同：-4
> 
> 时间：2012-07-11T23:16:01.057
> 
> 标签：python, sql, perl, hive

我有`Five SQLquery`我需要运行的，要么`Sequentially`是一个接一个，要么是`Independently`. 目前我正在做的是，我需要`Five SQL query`在一个中按顺序运行所有这些，`Putty session`或者我可以打开五个`Putty Session`并在这五个 Putty 会话中分别输入一个查询。所以它非常乏味，我需要手动运行它。所以我在考虑自动化这个过程。

有什么方法可以使用某种脚本，例如 Perl 脚本或 Python 脚本，我可以从中依次或独立地运行我的所有五个查询？

就我而言，查询有点复杂且冗长，但考虑到上述情况，我以以下五个查询为例 - 这五个查询彼此不相关。还有我使用 Hive 运行的这五个 SQL 查询。

```
SELECT * FROM Table1;
SELECT * FROM Table2;
SELECT * FROM Table3;
SELECT * FROM Table4;
SELECT * FROM Table5; 
```

所以我的问题是如何用任何脚本语言做到这一点？此外，我并不特定于任何脚本，只是想知道在我的情况下哪种方法更好。任何满足我要求的代码片段将不胜感激。

我正在使用 HiveQL，HiveQL 语法与 SQL Sytnax 相同。

PS 我是所有脚本语言的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:01:20.617

有很多方法可以做到这一点，这是一个非常基本的例子。结果是，在 Perl 中，您只需按所需顺序放置“执行”命令即可控制执行顺序。我假设您熟悉 Perl DBI 以及如何连接到您的数据库。

```
#!/usr/bin/perl 
use DBI; 
use strict; 

my $dbh = DBI->connect($your_connect_string) || die qq{Could not connect to $dbase\n};     
my $sql_1 = qq{ select * from table1}; 
my $sql_2 = qq{ select * from table2};
my $sql_3 = qq{ select * from table3};

my $sth_1 = $dbh->prepare($sql_1); 
my $sth_2 = $dbh->prepare($sql_2);
my $sth_3 = $dbh->prepare($sql_3);

$sth_1->execute();
$sth_2->execute();
$sth_3->execute();

while (my $hashref_1 = $sth_1->selectrow_hashref()) { 
...do something
} 

while (my $hashref_2 = $sth_2->selectrow_hashref()) { 
...do something
} 

while (my $hashref_3 = $sth_3->selectrow_hashref()) { 
...do something
} 

$sth_1->finish(); 
$sth_2->finish(); 
$sth_3->finish(); 

$dbh->disconnect(); 

exit; 
```

# c++ - 将文件中的一行文本复制到c ++中的字符串

> ID：11442918
> 
> 赞同：0
> 
> 时间：2012-07-11T23:16:07.817
> 
> 标签：c++, parsing

我需要从 C++ 中的文本文件中复制一行文本，我有一个程序可以找到一个单词所在的行，所以我决定是否可以只取每一行并将其加载到我可以搜索的字符串中逐行逐个字符串地查找正确的单词及其在文件中的位置（以字符为单位，而不是行）。帮助将不胜感激。

编辑：我找到了我用来定位该行的代码

```
#include <cstdlib> 
#include <iostream>
#include <string>
#include <fstream>
#include <cstring>
#include <conio.h>

using namespace std;

int main()
{   

    ifstream in_stream;           //declaring the file input
    string filein, search, str, replace; //declaring strings
    int lines = 0, characters = 0, words = 0; //declaring integers
    char ch;

    cout << "Enter the name of the file\n";   //Tells user to input a file name
    cin >> filein;                            //User inputs incoming file name
    in_stream.open (filein.c_str(), ios::in | ios::binary); //Opens the file

    //FIND WORDS
    cout << "Enter word to search: " <<endl;
    cin >> search; //User inputs word they want to search

    while (!in_stream.eof())  
    {
        getline(in_stream, str); 
        lines++;                
        if ((str.find(search, 0)) != string::npos) 
        {
            cout << "found at line " << lines << endl;
        }
    }

    in_stream.seekg (0, ios::beg);  // the seek goes here to reset the pointer....

    in_stream.seekg (0, ios::beg);  // the seek goes here to reset the pointer.....
    //COUNT CHARACTERS

    while (!in_stream.eof())      
    {
        in_stream.get(ch);    
        cout << ch;
        characters ++;      
    }
    //COUNT WORDS

    in_stream.close ();               

    system("PAUSE");                     
    return EXIT_SUCCESS;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:59:07.837

You only need one loop to accomplish this. Your loop should look something like this:

```
while (getline(in_stream, str))
{
    lines++;
    size_t pos = str.find(search, 0);
    if (pos != string::npos) 
    {
        size_t position = characters + pos;
        cout << "found at line " << lines << " and character " << position << endl;
    }
    characters += str.length();
} 
```

I also recommend you don't mix int and size_t types. For example, characters should be declared as size_t, not int.

# internet-explorer - IE9 兼容性视图中 Knockout.js 中的绑定错误

> ID：11442919
> 
> 赞同：1
> 
> 时间：2012-07-11T23:16:09.577
> 
> 标签：internet-explorer, dom, knockout.js, ie8-compatibility-mode

我的 Web 应用程序的 UI 主要是使用出色的 Knockout.js 构建的。它在 IE7 兼容模式下显示 IE8 中的一些布局错误。我尝试添加一个元标记来强制标准模式，如下所示：

`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`

但是，在 IE9 的 IE9 兼容性视图下（我必须假设某些用户已经设置），当 Knockout 进行绑定时，这会导致错误：

DOM 异常：INVALID_CHARACTER_ERR (5)

我在网上找到了很多关于这个错误的引用——与创建 DOM 元素的方式有关——但显然我没有控制这一点，Knockout 是。

什么是强制（或鼓励）所有当前和未来版本的 IE 以标准模式呈现的强大且最小化的方式，这也与 Knockout.js 构建 DOM 的方式兼容？另外，任何人都可以详细说明 Knockout.js 在这里做什么，IE9 不喜欢吗？非常感谢。

更新：

我已经在我的标记中隔离了至少一个问题。我有一对单选按钮：

```
 <input type="radio" data-bind="checked: Gender, attr: { name: 'gender-' + ID() }" value="@((int)Sex.Male)" />
        <span>Male</span>
        <input type="radio" data-bind="checked: Gender, attr: { name: 'gender-' + ID() }" value="@((int)Sex.Female)" />
        <span>Female</span> 
```

这对单选按钮的名称属性生成为“gender-”加上当前绑定的视图模型的 ID，因为我有一个包含这对单选按钮的多个实例的深层层次结构。因为我使用 Knockout 生成名称属性，所以我没有针对标记中的输入指定它 - 当我还添加手动名称（例如“joe”）时，这会在浏览器模式下正确绑定：“IE9 兼容性视图” . 因此，就好像在兼容模式下，单选按钮被 IE 视为无效，因为它没有名称属性。但它在浏览器模式下工作：“IE9”。

此外，这与 IE-edge 元标记无关，无论何时切换到兼容性视图都会失败 - 但我的下一个问题是，为什么该元标记不覆盖浏览器设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:43:50.450

尝试用引号包裹名称属性。

```
 <input type="radio" data-bind="checked: Gender, attr: { 'name': 'gender-' + ID() }" value="@((int)Sex.Male)" /> 
```

在下面的评论中查看答案详情

# android - DoInBackground 第二次不起作用

> ID：11442920
> 
> 赞同：0
> 
> 时间：2012-07-11T23:16:15.530
> 
> 标签：android, android-asynctask

我有一个同步逻辑，使 sendOrder 从 android 中的 db 通过运行在`doInBackgroud()`.

首先我启动应用程序。然后单击`SyncClick`它并同步数据库而不会出现错误。之后，我进入应用程序向 orderTable 添加一些订单返回到主屏幕（具有 SyncClick），然后再次单击 SyncClick。`sendOrder()`它在重置数据库后发送命令（这意味着功能运行良好）并在`doInBackgroud()`. 但它得到这个错误；

```
07-11 23:38:15.406: E/AndroidRuntime(7864): java.lang.RuntimeException: An error occured while executing doInBackground()

07-11 23:38:15.406: E/AndroidRuntime(7864): Caused by: java.lang.NullPointerException 
```

在我启动应用程序并单击 SyncClick 后再次正常工作。所以在我添加一些订单然后同步后它不起作用，但在没有添加任何订单的情况下运行良好。

寻找问题。提前感谢您的时间。

```
public void SyncClick(View v) 
    {
        Loading = (ImageView)findViewById(R.id.imgLoadingAnim);
        LoadingLayout = (LinearLayout)findViewById(R.id.loLoadingAnim);
        LoadingLayout.setVisibility(VISIBLE);
        Loading.setBackgroundResource(R.drawable.loading);
        frameAnimation= (AnimationDrawable)Loading.getBackground();
        frameAnimation.setCallback(Loading);
        frameAnimation.setVisible(true, true);
        frameAnimation.start();

        if(!this.dhn.isTableExists("Orders"))
        {
            updateDB();
        }

        sendOrder();    
    }

    public void sendOrder()
    {
        ArrayList<Object[]> argumentsList = new ArrayList<Object[]>();
        Object[] stuff = {this.dhn, this};
        //SEND
        ArrayList<Order> orders = this.dhn.GetOrders();

        for(int i = 0 ; i < orders.size(); i++)
        {
            ArrayList<OrderItem> orderItems = this.dhn.GetOrderItems(orders.get(i).ID);

            String orderItemsS = "";

            for(int r = 0 ; r < orderItems.size(); r++)
            {
                orderItemsS = orderItemsS + orderItems.get(r).FinalCode + "|" + orderItems.get(r).Quantity + "|" +
                orderItems.get(r).Price + "|" + orderItems.get(r).Discount + "|" + orderItems.get(r).Status + "|" + "#";
            }

            orderItemsS = orderItemsS.substring(0, orderItemsS.length() - 1);

            Object[] arguments = { 
                    new String("OrderAdd"), 
                    stuff,

                    new String("UserId"),
                    new Integer (orders.get(i).UserId),
                    new String("int"),

                    new String("CustomerId"),
                    new Integer (orders.get(i).CustomerId),
                    new String("int"),

                    new String("Price"),
                    new Double (orders.get(i).Price),
                    new String("double"),

                    new String("Discount"),
                    new Double (orders.get(i).Discount),
                    new String("double"),

                    new String("Status"),
                    new Integer (orders.get(i).Status),
                    new String("int"),

                    new String("orderItems"),
                    new String (orderItemsS),
                    new String("String")
                    };

            argumentsList.add(arguments);
        }

        Object[] stuffALL = {this.dhn, this, argumentsList};

        Object[] argumentsALL = { 
                new String("recieveALL"), 
                stuffALL
                };

        //ConnectXML runXMLALL = new ConnectXML();
        new ConnectXML().execute(argumentsALL);

        Status = 1;

        updateDB();

        receive();
    }

    public void receive()
    {
        Object[] stuff = {this.dhn, this};
        ArrayList<Object[]> argumentsList1 = new ArrayList<Object[]>();

        //receive
        Object[] arguments = { 
                new String("ProductListGet"), 
                stuff,
                new String("CatID"),
                new Integer (-1),
                new String("int")
                };
        argumentsList1.add(arguments);
        Object[] arguments1 = { 
                new String("CustomerListGet"), 
                stuff
                };
        argumentsList1.add(arguments1);
        Object[] arguments2 = { 
                new String("CategoryListGet"), 
                stuff,
                new String("ParentID"),
                new Integer (-2),
                new String("int")
                };
        argumentsList1.add(arguments2);
        Object[] arguments3 = { 
                new String("UserListGet"), 
                stuff
                };
        argumentsList1.add(arguments3);
        Object[] arguments5 = { 
                new String("ProductCategoriesListGet"), 
                stuff
                };
        argumentsList1.add(arguments5);
        Object[] arguments6 = { 
                new String("ProductOptionListGet"), 
                stuff
                };
        argumentsList1.add(arguments6);
        Object[] arguments7 = { 
                new String("FinalProductListGet"), 
                stuff
                };
        argumentsList1.add(arguments7);
        Object[] arguments8 = { 
                new String("ProductDiscountsListGet"), 
                stuff
                };
        argumentsList1.add(arguments8);
        Object[] arguments9 = { 
                new String("ProductPriceGroupListGet"), 
                stuff
                };
        argumentsList1.add(arguments9);
        Object[] arguments10 = { 
                new String("OptionListGet"), 
                stuff
                };
        argumentsList1.add(arguments10);

        Object[] stuffALL1 = {this.dhn, this, argumentsList1};

        Object[] argumentsALL1 = { 
                new String("recieveALL"), 
                stuffALL1
                };

        //ConnectXML runXMLALL1 = new ConnectXML();
        new ConnectXML().execute(argumentsALL1);
    }

    int Stat;
    int Status;
    public void LoadAnim()
    {   
        if(Status == 1)
        {
            Stat++;
            if(Stat > 0)
            {
                LoadingLayout.setVisibility(GONE);
                if(frameAnimation !=null && frameAnimation.isRunning())
                { 
                    frameAnimation.stop();
                    Stat = 0;
                    Status = 0;
                }
            }
        }
    }

    public void updateDB()
    {
        this.dhn.close();

        try {
            InputStream myInput;

                myInput = getAssets().open("sistem.db");

            // Path to the just created empty db
            String outFileName = "/data/data/sistem.ss/databases/"
                    + "sistem.db";

            // Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }

            // Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();
            buffer = null;
            outFileName = null;
            this.dhn.close();
            this.dhn = null;
            this.dhn = DataHelper.getDataHelper(this);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    } 
```

日志猫

```
07-12 07:31:59.879: E/AndroidRuntime(2873): FATAL EXCEPTION: AsyncTask #1
07-12 07:31:59.879: E/AndroidRuntime(2873): java.lang.RuntimeException: An error occured while executing doInBackground()
07-12 07:31:59.879: E/AndroidRuntime(2873):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at java.lang.Thread.run(Thread.java:1096)
07-12 07:31:59.879: E/AndroidRuntime(2873): Caused by: java.lang.NullPointerException
07-12 07:31:59.879: E/AndroidRuntime(2873):     at sistem.ss.ConnectXML.doInBackground(ConnectXML.java:79)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at sistem.ss.ConnectXML.doInBackground(ConnectXML.java:1)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-12 07:31:59.879: E/AndroidRuntime(2873):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-12 07:31:59.879: E/AndroidRuntime(2873):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:22:04.843

我还没有机会使用 AsyncTask，但[文档](http://developer.android.com/reference/android/os/AsyncTask.html)说：

> 该任务只能执行一次（如果尝试第二次执行将引发异常。）

这意味着您只需要创建一个新实例并在该实例上执行。例如

```
new WhateverYourTaskIsCalled().execute(...); 
```

而不是调用`execute()`您已经使用过的实例。

# php - 从 mysql 中的 INSERT 查询返回一个值？

> ID：11442926
> 
> 赞同：2
> 
> 时间：2012-07-11T23:16:30.853
> 
> 标签：php, mysql, insert

> **可能重复：**
> [PHP：如何获取最后插入的表 ID？](https://stackoverflow.com/questions/1685860/php-how-to-get-last-inserted-id-of-a-table)

这是我在帖子表（PHP/mysql）中插入新帖子的查询。我可以返回刚刚插入同一语句的帖子的 post_id 吗？我需要将 post_id 插入另一个表。

```
mysql_query("INSERT INTO `posts` (`post_id`, `date`, `title`, `content`) VALUES (NULL,    NOW(), '$title', '$fileName')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:17:50.460

[mysql_insert_id()](http://php.net/manual/en/function.mysql-insert-id.php)会给你最后一个 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:18:28.467

这正是 MySQL 函数 last_insert_id() 的用途。所以，基本上答案是，“不，但有点”。您需要执行一个附加查询“select last_insert_id()”，它将返回 1 行，其中包含您的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:23:51.433

```
mysql_query("INSERT INTO `posts` (`date`, `title`, `content`) VALUES (NOW(), '$title', '$fileName')");
$last_inserted = mysql_insert_id(); // return last inserted id 
```

# javascript - 提示框打不开

> ID：11442932
> 
> 赞同：0
> 
> 时间：2012-07-11T23:17:18.533
> 
> 标签：javascript, debugging

我希望在单击按钮时出现一个警告框，但没有任何反应。我不确定的一件事是我是否应该`var`在函数签名中包含标识符的前面，例如`function popup(var message)`

```
<!DOCTYPE html>
<html lang="en-ca">
<head>
    <meta charset="utf-8" />
    <title>Testing...</title>
    <script type="text/javascript">
        function popup(var message)
        {
            var one = 5
            var two = 3
            alert(message)
            if(one*two == 15)
            {
                alert("you were right")
            }
            else
            {
                alert("you were wrong")
            }
        }
    </script>
</head>
<body>
Hello, I am here.<br />
<input type="button" value="click here" onclick="popup('this is my message')" />
</body>
</html> 
```

IE 给出以下错误详情： 网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0）时间戳： 2012 年 7 月 11 日星期三 23:12:07 UTC

消息：预期对象行：25 字符：1 代码：0 URI：file:///C:/Users/UJXB9EE/Desktop/jscripttest.html

我不确定如何在 FireFox 中找到它。

编辑：有没有更好的方法来获取 JavaScript 错误，而不是单击 IE 底部的小错误图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:18:21.227

改变

```
function popup(var message) 
```

到

```
function popup(message) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:57:33.280

`var` 函数参数之前不能有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:16:55.497

我只是在学习自己，但我认为 var 将使变量成为局部变量而不是全局变量。如果您想从不同的函数中访问变量，这一点很重要。希望有人可以为您确认。

# android - 触摸时放大画布的一部分

> ID：11442934
> 
> 赞同：2
> 
> 时间：2012-07-11T23:17:32.677
> 
> 标签：android, android-layout, zooming, android-canvas

我有一个扩展 SurfaceView 的自定义视图。我正在画布上绘制图像。当用户触摸画布上的一个点时，我想显示触摸坐标周围区域的放大视图。最好是，随着手指四处移动，我想相应地更新放大视图的内容。

我想知道android平台是否本机支持这样的功能。如果没有，你们中的哪一个可以指出一个很好的例子，可以让我开始或分享如何实施它的想法。我不做太多这类 2D 或 3D 图形，我仍在尝试了解 Canvas 和 Matrix 类，看看我可以使用什么。

我在论坛上搜索了类似的问题，但找不到任何问题。所以，请不要因为我问了一个已经存在的问题而标记我。

不 - 我没有使用 OpenGL-ES 或任何此类 3rd 方库（还）。

谢谢大家。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T11:25:21.477

要缩放您在画布上绘制的图像：

创建一个 BitmapShader（使用您正在绘制的图像的位图）、一个 Matrix 和一个 Paint：

```
shader = new BitmapShader(bmp, TileMode.CLAMP, TileMode.CLAMP);
matrix = new Matrix();
shaderPaint = new Paint();
shaderPaint.setShader(shader); 
```

在触摸事件上记录触摸位置（例如在 PointF 中）：

```
zoomPos.x = event.getX();
zoomPos.y = event.getY(); 
```

...并设置着色器的矩阵（我在每次触摸时都这样做，可能有更好的方法）：

```
matrix.reset();
matrix.postScale(2f, 2f);
matrix.postTranslate(-zoomPos.x, -zoomPos.y);
shader.setLocalMatrix(matrix); 
```

然后在绘图代码中，使用着色器Paint绘制一个圆。

```
canvas.drawCircle(zoomPos.x, zoomPos.y, size_of_the_circle, shaderPaint); 
```

**编辑**

两行：

```
matrix.postScale(2f, 2f);
matrix.postTranslate(-zoomPos.x, -zoomPos.y); 
```

可以替换为一个：

```
matrix.postScale(2f, 2f, zoomPos.x, zoomPos.y); 
```

这允许在不破坏偏移的情况下更改比例因子。

# python - python处理子进程

> ID：11442944
> 
> 赞同：2
> 
> 时间：2012-07-11T23:18:23.010
> 
> 标签：python, for-loop, subprocess

我正在`os.system(cmd)`for 循环中运行。由于有时它会挂起，因此我尝试`process=subprocess.pOpen(cmd)`在 for 循环中使用。但我想知道以下内容：

*   如果我这样做`sleep(60)`然后使用检查进程是否仍在运行`process.poll()`，我如何区分即使在 1 分钟后实际运行的进程和挂起的进程？

*   如果我杀死挂起的进程，for循环会继续还是会退出？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T00:07:43.503

我不知道有什么通用方法可以判断一个进程是挂起还是工作。如果某个进程由于锁定问题而挂起，那么它可能会消耗 0% 的 CPU，您可能会猜到它已挂起并且无法工作；但如果它以无限循环挂起，则该进程可能会使 CPU 100% 忙碌但无法完成任何有用的工作。你可能有一个在网络上通信的进程，它与一个非常慢且超时时间很长的主机通信；不会挂起，但在等待时会消耗 0% 的 CPU。

我认为，总的来说，您唯一的希望是建立某种“看门狗”系统，您的子进程使用进程间通信定期发送一个意味着“我还活着”的信号。

如果你不能修改你作为子进程运行的程序，那么至少试着找出它挂起的*原因*，然后看看你是否能找到一种方法来猜测它已经挂起。也许它通常具有 CPU 和 I/O 的平衡组合，但是当它挂起时，它会进入一个紧密的无限循环，并且 CPU 使用率会达到 100%；那将是您的线索，是时候杀死它并重新启动了。或者，它可能每 30 秒写入一个日志文件，您可以监控文件的大小并在文件没有增长时重新启动它。或者，也许您可​​以将程序置于“详细”模式，在它工作时打印消息（`stdout`要么`stderr`) 你可以看那些。或者，如果程序作为守护进程工作，也许你可以主动查询它，看看它是否还活着；例如，如果是数据库，发送一个简单的查询，看看是否成功。

所以我不能给你一个笼统的答案，但我希望你应该能够找到一种方法来检测你的特定程序何时挂起。

最后，最好的解决方案是找出它挂起的原因，并解决问题，使其不再发生。这可能是不可能的，但至少要记住这一点。如果程序不再挂起，您就不需要检测程序挂起！

PS 我建议您在 Google 上搜索“如何监控流程”，看看您是否从中得到任何有用的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T14:39:12.493

检测已停止工作的事物的一种常见方法是让它们以大致固定的时间间隔发出一个信号，并让另一个进程监视该信号。如果监视器在两次间隔之后发现没有信号到达，它可以采取诸如终止和重新启动进程之类的操作。

这个总体思路不仅可以用于软件，也可以用于硬件。我用它通过简单地从输出位的交流耦合信号为电容器充电来重新启动嵌入式控制器。一个简单的检测器监控电容器，如果电压低于阈值，它只会将复位线拉低，同时保持电容器充电足够长的时间以使控制器重新启动。

软件原理类似；一种方法是让进程每隔一段时间简单地触摸一个文件。监视器每隔一段时间检查文件修改时间，如果它太旧，则终止并重新启动该过程。

在 OP 的情况下，子进程可以将状态代码写入文件，以说明它在工作中的进展情况。

# ios - 如何使用 box-ios-sdk 上传 LARGE 文件？

> ID：11442947
> 
> 赞同：1
> 
> 时间：2012-07-11T23:18:29.343
> 
> 标签：ios, box-api

大家。我正在使用`BoxUploadOperation`的接口`box-ios-sdk`在iOS平台上上传文件。`BoxUploadOperation`我使用下面的类方法初始化了实例。

```
+ (BoxUploadOperation *)operationForUser:(BoxUser*)user
            targetFolderId:(NSString*)folderId
                data:(NSData *)data
                fileName:(NSString *)fileName
                contentType:(NSString *)contentType
                shouldShare:(BOOL)shouldShare
                message:(NSString *)message
                emails:(NSArray *)emails; 
```

该类方法的第三个参数需要是一个`NSData`对象，这对于小文件来说是个好主意，将整个文件加载到内存中没有问题（`NSData`（有限的。

那么如何将大文件上传到 box.net？我不知道，如果有人有建议，那么我很感激。

# javascript - Javascript滚动和移动位置

> ID：11442949
> 
> 赞同：0
> 
> 时间：2012-07-11T23:18:52.240
> 
> 标签：javascript, scroll

js中的window对象有一个scrollBy()方法，它接受两个参数，这些参数代表什么？我从中学习的那本书说“要滚动的像素数，但这是什么意思。这是否意味着当我在右侧拖动滚动条时，它会将内容移动 10 像素，或者如果我单击向下或向上滚动按钮，它会将内容移动我指定的 10 个像素还是什么？

另外，我似乎无法理解 moveTo() 方法和 moveBy() 方法之间的区别，它们似乎做同样的事情，但如果是这种情况，那么拥有两个做同样事情的函数有什么意义事物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:28:50.140

参数是以像素为单位的顶部和左侧坐标。

scrollTo 和 scrollBy 方法相同，但有一个例外。scrollTo 用作绝对坐标，scrollBy 用作相对于当前滚动位置。

同样的规则适用于 moveTo 和 moveBy 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:29:05.647

javascript中有很多重复属性的原因是所有浏览器都有自己的实现。MoveTo**从顶部**移动到指定数量的像素，而 moveBy 将视图**从当前位置移动指定数量的像素**

检查 javascript 属性使用情况的一个好工具是 firebug 浏览器插件。强烈推荐。[http://getfirebug.com/](http://getfirebug.com/)

# jquery - 在jquery中将输入中的值一起添加

> ID：11442950
> 
> 赞同：0
> 
> 时间：2012-07-11T23:18:52.700
> 
> 标签：jquery

我有下表：

```
<table>
    <thead>
        <tr>
            <th></th>
            <th>Female</th>
            <th>Male</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Rising 1</td>
            <td>
                <input id="firstinput" />
            </td>
            <td>
                <input id="secondinput" />
            </td>
        </tr>
        <tr>
            <td>Rising 2</td>
            <td>
                <input id="thirdinput" />
            </td>
            <td>
                <input id="fourthinput" />
            </td>
        </tr>
        <tr>
            <td>2+</td>
            <td>
                <input id="fifthinput" />
            </td>
            <td>
                <input id="sixthinput" />
            </td>
        </tr>
    </tbody>
</table> 
```

我想将这些输入中的所有值加在一起并显示它们的值：

```
$(document).ready(function () {

        $('#mybutton').click(function () {

            alert(parseInt($('#firstinput').val()) +
                parseInt($('#secondinput').val()) +
                parseInt($('#thirdinput).val()) +
                parseInt($('#fourthinput').val()) +
                parseInt($('#fifthinput).val()) +
                parseInt($('#sixthinput').val()));
        });
}); 
```

好吧，这仅在表中存在所有值时才有效。如果一个为空，则以 NaN 结尾。

你如何解决这个问题？

我也完全错误地接近这个吗？有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T23:22:37.447

你可以简单地把它变成一个 or 子句：

```
var total = 0;

$('input').each(function() {
    total += (+$(this).val() || 0);
});

alert(total); 
```

* * *

~~**记住：** `+$(this).val()`是`parseInt( $(this).val() )`. 尽管这很方便，但它遇到了与 ; 相同的问题`parseInt`。即，如果字符串以 a 开头`0`，则将其解析为 base `8`： parseInt("033"); // 27 +"033"; // 27 要绝对确定不会发生这种情况，请使用`parseInt`以 10 为底的：parseInt("033", 10); // 33 所以，在我们的上下文中，你会使用这个： total += ( parseInt( $(this).val(), 10 ) || 0 );~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T23:23:25.927

尝试这个：

```
$('#mybutton').click(function () {
   var sum = 0;  
    $('input').each(function(){
       var val = parseInt(this.value, 10)
       if (isNaN(val)) { val = 0 }
       sum += val
    })
}); 
```

[演示](http://jsfiddle.net/24rdY/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T23:25:46.930

请试试这个**Workingdemo** [http://jsfiddle.net/SmRXL/4/](http://jsfiddle.net/SmRXL/4/) **或** [http://jsfiddle.net/SmRXL/3/](http://jsfiddle.net/SmRXL/3/)

您可以使用类并对其进行迭代并将其全部汇总。

休息演示会有所帮助，`:)

**代码**

```
$(function() {
    $('#foo').click(function() {
        var total = 0;
        $('.hulk').each(function() {
            if ($(this).val() > 0) total += parseInt($(this).val());
        });
        alert(" TOTAL is => " + total);
    });
}); 
```

**html**

```
<table>
    <thead>
        <tr>
            <th></th>
            <th>Female</th>
            <th>Male</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Rising 1</td>
            <td>
                <input class="hulk" id="firstinput" />
            </td>
            <td>
                <input class="hulk"  id="secondinput" />
            </td>
        </tr>
        <tr>
            <td>Rising 2</td>
            <td>
                <input class="hulk"  id="thirdinput" />
            </td>
            <td>
                <input class="hulk"  id="fourthinput" />
            </td>
        </tr>
        <tr>
            <td>2+</td>
            <td>
                <input class="hulk"  id="fifthinput" />
            </td>
            <td>
                <input class="hulk"  id="sixthinput" />
            </td>
        </tr>
    </tbody>
</table>

<input type="button" id="foo" value="TOTAL ME" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T23:21:49.213

在您的代码中，将`parseInt($('#sixthinput').val())`'s 更改为`parseInt($('#sixthinput').val() || 0)`. 这样，如果输入为空，则返回 0，如果输入无效，则返回 NaN。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T23:25:11.240

```
$("#mybutton").click(function(){
alert(addValues($("input")));   
});

function addValues(selector){
    var total = 0;
    selector.each(function(){
        var thisVal = parseInt($(this).val());
        if(!isNaN(thisVal)) total += thisVal;
    });
    return total;
} 
```

使用 isNaN()**可靠地**检查值是否不是数字。

上面为了简单起见，我已将其添加到函数中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T23:25:45.440

```
$('#myButton').click(function() {
    var sum = 0;
    $('table input').each(function(){
        val = parseInt($(this).val(),10);
        sum += isNaN(val) ? 0 : val;
    }
    alert(sum);
} 
```

确保在调用中包含 10 的基数，以便`parseInt`正确解析。`08``09`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T23:21:42.590

`NaN`是假的，因此如果第一个为假，您可以使用 or 运算符 ( `||`) 返回第二个值。

```
$(document).ready(function () {

        $('#mybutton').click(function () {

            alert(parseInt($('#firstinput').val()) || 0 +
                parseInt($('#secondinput').val()) || 0 +
                parseInt($('#thirdinput').val()) || 0 +
                parseInt($('#fourthinput').val()) || 0 +
                parseInt($('#fifthinput').val()) || 0 +
                parseInt($('#sixthinput').val()) || 0 );
        });
}); 
```

# python - 使用 namedtuples 合并多个字典

> ID：11442954
> 
> 赞同：0
> 
> 时间：2012-07-11T23:19:11.550
> 
> 标签：python

给定包含 m 个键值对的 n 个模型，namedtuples 可以用于将这些信息整合到一个对象中吗？通过整合，我的意思是重构，以便我可以绕过这个对象并从中访问特定的信息位。

目前的组织方式：

```
Model_1_Dict = {'key1':('value1','value2','value3'),'key2':('value1','value2','value3')}

Model_2_Dict = {'key1':('value1','value2','value3'),'key2':('value1','value2','value3')} 
```

每个模型字典的每个键都有 3 个值对。键表示自变量名称（来自回归模型），值表示 beta 系数、计算值 (x) 和相关函数......语义上像这样：

```
>>> Model_1_Dict["Variable Name"]
("Beta Coefficient", "Calculated Value", "myClass.myFunction") 
```

`Model_1_Dict["Variable Name"][1]`稍后在代码中更新。我可以`= None`在初始化时通过，然后更新计算值。或者稍后将值附加到值列表对象（我认为这不是问题）。

我想知道是否有更好的方法来使用其他结构（例如命名元组）来处理模型信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:21:18.590

是的，您可以使用命名元组——直到您说您必须更新字典中的信息为止。元组和命名元组都不可修改。因此，如果您想通过名称 ratehr 而不是索引号来处理引用它的数据，您应该使用嵌套字典结构 - 或创建一个简单的类来保存您的数据。

为此创建自定义类的优点是您可以通过`__slots__`在类上具有属性来限制分配给它的名称，并且您可以自定义`__repr__`对象的属性，以便在检查时看起来不错 -

伴随着一些东西：

```
class Data(object):
    __slots__ = ("beta", "calculated", "function")
    def __init__(self, beta=None, calculated=None, function=None):
        self.beta = beta; self.calculated = calculated; self.function = function

    def __repr__(self):
        return "(%s, %s, %s)"  % (self.beta, self.calculated, self.function) 
```

像这样工作：

```
>>> Model_1_Dict = {'key1':Data('value1','value2','value3') } 
>>> 
>>> Model_1_Dict
{'key1': (value1, value2, value3)}
>>> Model_1_Dict["key1"].beta = "NewValue"
>>> Model_1_Dict
{'key1': (NewValue, value2, value3)}
>>> 
```

# c++ - 使用 Eigen 和 boost::thread 在 C++ 中出现奇怪的内存泄漏

> ID：11442956
> 
> 赞同：0
> 
> 时间：2012-07-11T23:19:27.500
> 
> 标签：c++, multithreading, memory-leaks, boost-thread, eigen

我有两个线程在一个程序中运行。它们是使用 boost::thread 创建的。

这两个线程在内存方面不共享任何东西。它们之间不共享数据结构或对象。

现在第二个线程使用了一个类，该类具有许多本征双矩阵作为私有成员。我确保使用 Eigen 指令 EIGEN_MAKE_ALIGNED_OPERATOR_NEW 等对齐矩阵

当第一个线程运行时，第二类矩阵中的元素被覆盖。我通过检查检查了这一点，因为应该是小数的元素突然变成了整数。当第一个线程未运行时，第二个线程没有问题，并且其 Eigen 成员具有正确的值。

同样：1）两个线程不共享数据结构。2）程序运行时没有分段错误消息或类似的东西或一些错误消息。3）任何建议如何保护第二个线程的内存或如何跟踪内存是如何被违反的？

先感谢您。我真的很抱歉我没有发布代码，但它是巨大的。如果您希望我发布代码中的特定内容，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:06:34.503

你可能需要一个调试工具，比如 Mac 的 mallocguard 或 Linux 的 Electric Fence。

这些通过在分配之前添加“保护页面”来工作，将它们标记为不可访问的虚拟内存。当内存被释放时，它也被标记为不可访问。如果程序试图访问它不应该访问的内存，修改后的分配器会确保它立即崩溃，以便您的调试器有望突出显示导致损坏的代码行。请注意，这会消耗大量内存，因此您可能需要一个小数据集来重现损坏。

# php - 多个输入同名

> ID：11442960
> 
> 赞同：-2
> 
> 时间：2012-07-11T23:20:32.007
> 
> 标签：php

我有一个表格......我必须为表格上的每个产品的字段使用相同的名称。

PartNo、Item 和 Price，如果我想用一个订单按钮添加多个项目，这不能改变。下面的示例代码适用于使用 Cart32 的购物车软件将多个商品添加到购物车。我想知道他们如何为许多项目使用像 PartNo 这样的相同名称，并且能够检索该字段的所有值。

我尝试编写自己的页面来接收输入，但在我的一生中，我无法为任何重复字段（如 PartNo、Qty 和 Price）获得多个项目。我已经尝试过 $_REQUEST、$_POST 和 $_GET，但我只得到了最后一个值，所以这不是案例问题。

这是一个精简的例子。

```
<FORM name ='x' METHOD="post" ACTION="https://www.cart32.com/cart32.ex…
<!-- item 1 -->
<div id'=x'>
#1 | desc1 | $27.99 Qty: <input type='text' size='3' name='Qty' value='0'>
<input type=hidden name='PartNo' value='11'>
<input type=hidden name='Item' value='product1'>
<input type=hidden name='Price' value='27.99'>
</div>

<!-- item 2 -->
<div id'=x'>
#2 | desc2 | $7.99 Qty: <input type='text' size='3' name='Qty' value='0'>
<input type=hidden name='PartNo' value='11'>
<input type=hidden name='Item' value='product1'>
<input type=hidden name='Price' value='7.99'>
</div>

<div><input type='submit' value='Order'></div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:31:20.703

如果将 [] 附加到表单字段名称，PHP 将获取这些字段并将它们转换为数组，例如

```
<input type="text" name="field[]" value="first" />
<input type="text" name="field[]" value="second" />
<input type="text" name="field[]" value="third" /> 
```

将产生以下 $_POST 结构：

```
$_POST = array(
    'field' => array(
         0 => 'first',
         1 => 'second',
         2 => 'third',
    )
); 
```

另一种方法是为每个字段名称附加递增的数字，因为您为每个新块复制现有字段集。这提供了块之间的良好分隔，并允许您保证相关字段具有相同的数字标签，但它确实使处理复杂化。

[向文件php表单提交添加多个输入](https://stackoverflow.com/questions/10763530/adding-multiple-inputs-to-file-php-form-submit)

# r - 计算频率

> ID：11442961
> 
> 赞同：1
> 
> 时间：2012-07-11T23:20:37.513
> 
> 标签：r, dataframe

我有一个这样的数据框：

```
Expt    Replicate
A       1
A       2
A       3
B       1
B       2
B       3
C       1
C       2
C       3
C       4 
```

我想返回每个实验的重复次数。像这样：

```
Expt    #Reps
A       3
B       3
C       4 
```

这必须非常简单，但我尝试了一些类似的东西

```
ddply(df, Expt, .fun=max(Replicate)) 
```

没有运气。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T00:01:42.053

A `data.table` solution (to counting the number of replicates)

```
library(data.table)
df <- data.table(df)
df[,list(max = .N),by='Expt'] 
```

If you want the maximum a column then use

```
df[,list(max = max(Replicate)),by='Expt'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T23:28:34.070

`table`是你的朋友。您甚至不需要第二列，`table`将为您计算第一列中的项目：

```
> x <- c('A', 'A', 'A', 'B', 'B', 'B', 'C', 'C', 'C', 'C')
> x
 [1] "A" "A" "A" "B" "B" "B" "C" "C" "C" "C"
> table(x)
x
A B C 
3 3 4 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T00:03:45.513

感谢大家。我还发现这很有效：

```
aggregate(as.numeric(df$Replicate), list(exptCount=df$expt),max) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T09:31:36.450

实现目标的另一种方法是

```
> df <- data.frame(Expt = rep(c('A', 'B', 'C'), c(3,3,4)), Replicate = append(rep(1:3, 3), 4, 10))
> tapply(df$Replicate, df$Expt, max)
A B C 
3 3 4 
```

但是如果你真的想用`ddply`，你可以试试：

```
library(plyr)
ddply(df,.(Expt),numcolwise(max)) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-11T23:52:59.947

另一种简单的方法：

```
 summary(df[,1]) #where df is your data frame and you want the 1st column counts ("Expt") 
```

注意：第一列是 a`factor`这适用于任何列`factor`

# python - 支持加权协方差计算的 Python 包

> ID：11442962
> 
> 赞同：11
> 
> 时间：2012-07-11T23:20:58.250
> 
> 标签：python, numpy, statistics, scipy, covariance

是否有支持计算加权协方差的python统计包（即每个观察值都有一个权重）？不幸的是 numpy.cov 不支持权重。

最好在 numpy/scipy 框架下工作（即，能够使用 numpy 数组来加速计算）。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T21:21:22.157

statsmodels 在`stats`.

但我们仍然可以直接计算：

```
# -*- coding: utf-8 -*-
"""descriptive statistic with case weights

Author: Josef Perktold
"""

import numpy as np
from statsmodels.stats.weightstats import DescrStatsW

np.random.seed(987467)
x = np.random.multivariate_normal([0, 1.], [[1., 0.5], [0.5, 1]], size=20)
weights = np.random.randint(1, 4, size=20)

xlong = np.repeat(x, weights, axis=0)

ds = DescrStatsW(x, weights=weights)

print 'cov statsmodels'
print ds.cov

self = ds  #alias to use copied expression
ds_cov = np.dot(self.weights * self.demeaned.T, self.demeaned) / self.sum_weights

print '\nddof=0'
print ds_cov
print np.cov(xlong.T, bias=1)

# calculating it directly
ds_cov0 = np.dot(self.weights * self.demeaned.T, self.demeaned) / \
              (self.sum_weights - 1)
print '\nddof=1'
print ds_cov0
print np.cov(xlong.T, bias=0) 
```

这打印：

```
cov  statsmodels
[[ 0.43671986  0.06551506]
 [ 0.06551506  0.66281218]]

ddof=0
[[ 0.43671986  0.06551506]
 [ 0.06551506  0.66281218]]
[[ 0.43671986  0.06551506]
 [ 0.06551506  0.66281218]]

ddof=1
[[ 0.44821249  0.06723914]
 [ 0.06723914  0.68025461]]
[[ 0.44821249  0.06723914]
 [ 0.06723914  0.68025461]] 
```

**编辑说明**

最初的答案指出了同时修复的 statsmodels 中的一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-01T19:23:45.527

由于 1.10 版[numpy.cov](https://numpy.org/doc/stable/reference/generated/numpy.cov.html)确实支持使用 'aweights' 参数的加权协方差计算。

# python - numpy 和 scipy 用于 mac OS Lion 上预装的 python 2.6.7

> ID：11442970
> 
> 赞同：13
> 
> 时间：2012-07-11T23:21:54.847
> 
> 标签：python, numpy, osx-lion, scipy

无论如何要在 Mac OS Lion 附带的 python 2.6.7 上安装 numpy 和 scipy 吗？我知道 Lion 也有 Python 2.7。但我需要坚持使用 Python 2.6，因为我使用的模块不适用于 Python 2.7。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-12T01:07:14.027

Lion为其每个 Python 实现都附带了一个[easy_install](https://web.archive.org/web/20130208091204/http://packages.python.org:80/distribute/easy_install.html)`/usr/bin/easy_install-2.7` ： for `/usr/bin/python2.7`，同样适用于 2.6 和 2.5。

但是，scipy 需要一个 Fortran 编译器，而 Lion 没有附带其中之一。看起来您必须在安装 numpy 之前安装 Fortran 编译器，否则以后无法安装 scipy。

首先，您需要 Xcode 命令行工具。（Apple 经常更改这个包的名称——它可能是“Unix 开发工具”或“CLI 开发工具链”等，具体取决于您的 Xcode 版本。）

这些可以由 Xcode 自己安装。如果您使用的是 4.3.x，在从 App Store 安装 Xcode 后，启动它，转到 Preferences、Downloads、Components，然后单击“Command Line Tools”旁边的 Install 按钮。对于不同的版本，或者如果您想在没有 Xcode 的情况下安装它们，Homebrew 页面（见下文）解释了如何获取它们，或者您可以查看[Apple 的开发者网站](https://developer.apple.com/)。

如果您已经有了包管理器（Homebrew、MacPorts 或 Fink），请使用它。如果没有，请安装[Homebrew](https://brew.sh/)：

```
curl https://raw.github.com/gist/323731/25f99360c7de3f72027d8fd07cb369b1c8756ea6/install_homebrew.rb -o /tmp/install_homebrew.rb
ruby /tmp/install_homebrew.rb
rehash 
```

然后像这样安装 gfortran：

```
brew install gfortran 
```

现在您已准备好安装 numpy 和 scipy。如果你更喜欢[pip](https://pypi.org/project/pip/)而不是 easy_install（如果你不知道，你可能更喜欢 pip），你必须先安装它：

```
sudo easy_install-2.6 pip 
```

然后使用它来安装软件包：

```
sudo pip-2.6 install numpy 
```

根据您的确切操作系统版本和其他详细信息，您可能已经拥有 2.6 的内置 numpy，但该 numpy 不支持 Fortran。你可以这么说，因为`sudo pip-2.6 install numpy`说`Requirement already satisfied (use --upgrade to upgrade): numpy in /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python`。解决方案是完全按照错误消息所说的去做：

```
sudo pip-2.6 install --upgrade numpy 
```

最后：

```
sudo pip-2.6 install scipy 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-08T17:38:39.347

我在 Mountain Lion 上安装 SciPy 时遇到了类似的问题。

OSX 山狮 10.8

Python 2.7.3

点 1.1

酿造 0.9.2

GNU Fortran (GCC) 4.2.1

我收到的一些错误包括：

这：

```
pip install scipy 
```

产生了这个错误：

```
Could not locate executable pgfortran

don't know how to compile Fortran code on platform 'posix'

building 'dfftpack' library

error: library dfftpack has Fortran sources but no Fortran compiler found 
```

这导致我寻找一个 Fortran 编译器：

这个命令：

```
brew install gfortran 
```

这产生了这个错误：

```
Error: Currently the gfortran compiler provided by this brew is only supports the following versions of XCode:

    - XCode 3.1.4 on OS X 10.5.x
    - XCode 3.2.2/3.2.3 -- 4.0 on OS X 10.6.x
    - XCode 4.1 or newer on OS X 10.7.x

The AppStore and Software Update can help upgrade your copy of XCode.
The latest version of XCode is also available from:

http://developer.apple.com/technologies/xcode.html 
```

这让我看到了一篇博文：http: [//www.joewandy.com/](http://www.joewandy.com/)。我遵循了这个建议：

这个命令：

```
brew edit gfortran 
```

将使用 xcode 打开一个文件。我在两个地方修改了这个文件：

论文2行：

```
if MacOS.xcode_version >= '4.2' and MACOS_VERSION == 10.7
    ohai "Installing gfortran 4.2.4 for XCode 4.2 (build 5666)" 
```

变成：

```
if MacOS.xcode_version >= '4.2' and MACOS_VERSION >= 10.7
    ohai "Installing gfortran 4.2.4 for XCode 4.2 (build 5666) or higher" 
```

换句话说：

更改`== 10.7`为`>= 10.7` 和更改`XCode 4.2 (build 5666)`为`XCode 4.2 (build 5666) or higher`

然后我做了

```
brew install gfortran 
```

再次。成功并显示以下消息：

```
Downloading http://r.research.att.com/tools/gcc-42-5666.3-darwin11.pkg

Already downloaded: /Library/Caches/Homebrew/gfortran-4.2.4-5666.3.pkg
==> Installing gfortran 4.2.4 for XCode 4.2 (build 5666) or higher
==> Caveats
Brews that require a Fortran compiler should not use:

depends_on 'gfortran'

The preferred method of declaring Fortran support is to use:

def install
    ...
    ENV.fortran
    ...
end

==> Summary

/usr/local/Cellar/gfortran/4.2.4-5666.3: 86 files, 72M, built in 2 seconds 
```

然后我做了：

```
pip install scipy 
```

但这给了我这个：

```
#error "<vecLib/vecLib.h> is deprecated.  Please #include <Accelerate/Accelerate.h> and link to Accelerate.framework." 
```

然后我找到了这篇博文：在 Mountain Lion 上编译 SciPy [http://www.thisisthegreenroom.com/2012/compiling-scipy-on-mountain-lion/](http://www.thisisthegreenroom.com/2012/compiling-scipy-on-mountain-lion/)

说要使用这个命令：

```
pip install -e git+https://github.com/scipy/scipy#egg=scipy-dev 
```

这大约需要 5 到 6 分钟才能完成

```
Installed /Users/hernamesbarbara/src/scipy
Successfully installed scipy
Cleaning up... 
```

之后我可以做

```
python

Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import scipy
>>> help(scipy)

    Help on package scipy:

NAME
    scipy 
```

成功！

已安装 SciPy 版本：

```
full_version = '0.12.0.dev-14b1e07'
git_revision = '14b1e07602ff33a6e8250eb2bc7a6816677606a9'
release = False
short_version = '0.12.0'
version = '0.12.0.dev-14b1e07' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T01:47:43.730

我认为您不需要安装 Brew 和 XCode，也不需要自己编译 gfortran：我从[http://hpc.sourceforge.net](http://hpc.sourceforge.net)安装了 gfortran 的编译版本，一切似乎都正常。（我在 10.7.5）

# qt - 服务器响应的 HTTP Content-Length 不正确会导致客户端的结果不同

> ID：11442974
> 
> 赞同：0
> 
> 时间：2012-07-11T23:22:30.253
> 
> 标签：qt, http, boost-asio, mime-types, asyncsocket

**服务器**

我有一个基于 Boost::Asio 的 http WebService，它异步处理客户端连接并回复带有 HTTP 标头的 JSON 内容：

```
std::string response += "HTTP/1.0 200 OK\r\n";
response += "Content-Length: 2000\r\n";        
response += "Content-Type: application/json\r\n";
response += "Connection: close\r\n";
response += "\r\n";
response += meassageBody; 
```

其中 messageBody 是一个大小不大于 500 的 JSON 结构。

每次 - 在将响应发送回客户端之后 - 我调用下面的序列来关闭（我相信）套接字：

```
m_oSocket.shutdown(boost::asio::ip::tcp::socket::shutdown_both, ec);
m_oSocket.close(); 
```

**客户**

为了测试服务器，我在 Qt 中编写了一个小型客户端应用程序，它向服务器询问内容并显示是否返回了任何错误。

如果服务器回复 http 标头中的“Content-Length”值：

*   硬编码（如上例中为 2000），然后 Qt 客户端显示错误代码 2，代表“连接关闭”；

*   设置为适当的 JSON 数据大小（通常约为 400-500），然后 Qt 客户端显示错误代码 0，代表“未知错误”；

**问题：**

1.  在 http 标头中发送不正确的“Content-Length”值是否会对连接终止方式产生这种影响？

2.  我认为关闭服务器端的套接字可以使连接在客户端也被视为关闭。如何同时完成两者：发送正确的“内容长度”值和客户端的“连接关闭”状态？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:40:30.657

Content-Length 标头必须是内容的字节数，不多也不少。如果不是，则从客户的角度来看，结果是不可预测的。

由于您使用的是 HTTP 1.0，因此不应关闭服务器上的连接（也不应发送`Connection: close`标头。客户端将在读取数据后关闭连接。

# r - ggplot2 剥离文本标签 facet_wrap

> ID：11442981
> 
> 赞同：2
> 
> 时间：2012-07-11T23:22:42.330
> 
> 标签：r, ggplot2

我已经搜索了有关此主题的其他帖子，但无法弄清楚我的问题。我有巴西政府机构的预算数据，并对机构类型进行分类。为了制作我的情节，我这样做：

```
g <- ggplot(data=totalex.df, aes(x=year, y=totalex.billions))

g + 
geom_line(aes(colour=factor(agency.type))) + 
facet_wrap(agency.type ~  unit, ncol=6) + 
opts(strip.text.x = theme_text(size=2)) + 
opts(axis.text.x=theme_text(size=4)) + 
opts(legend.position="none") + 
scale_y_sqrt("total expenditure (billions)") 
```

我的问题是，我的方面标签现在包含两条信息：代理类型和单位名称——这是使用上述代码生成[的图形的 pdf 。](https://dl.dropbox.com/u/4210336/sqrt_expenditure.pdf)我只希望它包含单位的名称。但是，如果我从 facet_wrap 命令中删除 agent.type，则 ggplot 会丢失机构的顺序。

的输出`dput(totalex.df)`很长，但这里是前 100 个观察值

```
> dput(totalex.df.short)
structure(list(year = c(2006, 2006, 2006, 2006, 2006, 2006, 2006, 
2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 
2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 
2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 
2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 
2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 
2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2007, 2007, 
2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 
2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 
2007, 2007, 2007, 2007, 2007), totalex = c(312685301, 46492724, 
85210069, 1478565787, 193941282, 260659307, 8327549603, 0, 18474604, 
91006939, 53538760, 91800981, 402711174, 1290377603, 978348209, 
48360776, 24676283, 89820385, 1038592122, 5364674136, 127383506, 
7552311, 3847705355, 232732854, 34317692, 351714802, 156996087, 
104782402, 0, 47741444, 475303761, 229743044, 102577783, 19106706, 
78619935, 0, 730381485, 998733938, 110785185, 37114540, 108530853, 
0, 0, 0, 2660417864, 169144966, 104350391, 1038914804, 336660855, 
11995616, 0, 0, 9085111, 0, 5281402, 138708048, 11283655, 478421026, 
221976619, 95680527, 8270558, 890375094, 0, 156563720, 198830207, 
286909569, 5525428151, 734738984, 218905808, 1120014693, 859180, 
359873525, 50214197, 95572929, 1628550454, 227051722, 286610734, 
8868199792, 17388668, 19551190, 101047436, 58123546, 101878908, 
423760647, 1019623567, 1061465081, 49559379, 24278026, 110344326, 
1145862548, 7610896352, 163919333, 8376104, 4355447941, 282679957, 
45506963, 392551882, 208594544, 122420822, 0), agency.type = structure(c(NA, 
NA, NA, 3L, 1L, 1L, 7L, 1L, 1L, 1L, 1L, 1L, 4L, 1L, 1L, 1L, 1L, 
3L, 1L, 6L, 1L, 1L, 7L, 1L, 3L, 3L, 1L, 3L, 1L, 1L, 1L, 3L, 3L, 
1L, 3L, 1L, 1L, 1L, 3L, 3L, 3L, 1L, 5L, 3L, 1L, 5L, 3L, 1L, 1L, 
1L, 1L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 3L, 1L, 1L, 4L, 1L, 1L, 2L, 
1L, 1L, 3L, 1L, 1L, 3L, NA, NA, NA, 3L, 1L, 1L, 7L, 1L, 1L, 1L, 
1L, 1L, 4L, 1L, 1L, 1L, 1L, 3L, 1L, 6L, 1L, 1L, 7L, 1L, 3L, 3L, 
1L, 3L, 1L), .Label = c("Delivery", "Guidance for policy formulation / Research", 
"Regulatory", "Regulatory / Delivery", "Regulatory/Delivery", 
"Transfer / delivery", "Transfer/Regulatory/Deliver"), class = "factor"), 
    unit = structure(c(29L, 28L, 27L, 17L, 21L, 66L, 55L, 5L, 
    69L, 25L, 33L, 36L, 44L, 45L, 9L, 34L, 68L, 13L, 6L, 61L, 
    53L, 65L, 51L, 31L, 41L, 39L, 37L, 49L, 22L, 58L, 47L, 71L, 
    40L, 60L, 19L, 18L, 64L, 10L, 62L, 59L, 42L, 7L, 11L, 4L, 
    52L, 32L, 38L, 8L, 54L, 20L, 12L, 24L, 1L, 63L, 3L, 16L, 
    57L, 70L, 43L, 15L, 2L, 46L, 30L, 35L, 56L, 23L, 48L, 26L, 
    14L, 50L, 67L, 29L, 28L, 27L, 17L, 21L, 66L, 55L, 5L, 69L, 
    25L, 33L, 36L, 44L, 45L, 9L, 34L, 68L, 13L, 6L, 61L, 53L, 
    65L, 51L, 31L, 41L, 39L, 37L, 49L, 22L), .Label = c("Administrative Council of Economic Defense (CADE)                              ", 
    "Air Force Real Estate Funding Agency (CFIAE)                                   ", 
    "Alexandre Gusmao Foundation (FUNAG)                                            ", 
    "Amazon Development Superintendency (SUDAM)                                     ", 
    "Applied Economic Research Institute (IPEA)                                     ", 
    "Brazilian Agricultural Research Corporation (EMBRAPA)                          ", 
    "Brazilian Communication Company (EBC)                                          ", 
    "Brazilian Company of Urban Railway (CBTU)                                      ", 
    "Brazilian Institute of Environment and Renewable Natural Resources (IBAMA)     ", 
    "Brazilian Institute of Geography and Statistics (IBGE)                         ", 
    "Brazilian Institute of Museums (IBRAM)                                         ", 
    "Brazilian Military Material Industry (IMBEL)                                   ", 
    "Brazilian Securities Comission (CVM)                                           ", 
    "Brazilian Space Agency (AEB)                                                   ", 
    "Brazilian Tourism Company (EMBRATUR)                                           ", 
    "Brazilian Urban Railway (TRENSUBR)                                             ", 
    "Central Bank (BACEN)                                                           ", 
    "Chico Mendes Institute (ICMBio)                                                ", 
    "Civil Aviation National Agency (ANAC)                                          ", 
    "Cultural Foundation Palmares                                                   ", 
    "Dom Pedro II School                                                            ", 
    "Energy Research Company (EPE)                                                  ", 
    "Engineering, Construction and Railway (VALEC)                                  ", 
    "Excellence center in advanced electronic technology (CEITEC)                   ", 
    "Federal Centre of Educational Technology Celso Suckow da Fonseca (CEFET-RJ)    ", 
    "Graduate students improvement coordination (CAPES)                             ", 
    "Hospital Cristo Redentor S.A.                                                  ", 
    "Hospital F\x90mina S.A                                                            ", 
    "Hospital Nossa Senhora da Concei\x8d\x8bo S.A                                        ", 
    "Housing Building Fund for Mariners (CCCPMC)                                    ", 
    "Indigenous National Foundation (FUNAI)                                         ", 
    "Institute of the Historical and Artistic National Heritage (IPHAN)             ", 
    "Joaquim Nabuco Foundation                                                      ", 
    "Jorge Duprat Figueiredo Foundation (FUNDACENTRO)                               ", 
    "Manaus Free Trade Zone Superintendency (SUFRAMA)                               ", 
    "Minas Gerais Federal Centre of Educational Technology (CEFET-MG)               ", 
    "Mineral Resources Research Institute (CPRM)                                    ", 
    "National  Agency of Land Transport (ANTT)                                      ", 
    "National  Agency of Sanitary Supervision (ANVISA)                              ", 
    "National  Agency of Supplementary Health (ANS)                                 ", 
    "National  Agency of Water Transport (ANTAQ)                                    ", 
    "National Agency of Electrical Energy (ANEEL)                                   ", 
    "National Agency of Oil, Natural Gas and Biofuel (ANP)                          ", 
    "National Commission of Nuclear Energy (CNEN)                                   ", 
    "National Company of Food Supply (CONAB)                                        ", 
    "National Council of Scientific and Technological Development (CNPq)            ", 
    "National Department of Draught Prevention (DNOCS)                              ", 
    "National Department of Infrasctructure Transport (DNIT)                        ", 
    "National Department of Mineral Production (DNPM)                               ", 
    "National Development Trust (FND)                                               ", 
    "National Health Foundation (FUNASA)                                            ", 
    "National Institute of Colonization and Land Reform (INCRA)                     ", 
    "National Institute of Industrial Property (INPI)                               ", 
    "National Institute of Metrology, Normalization and Industrial Quality (Inmetro)", 
    "National Institute of Social Security (INSS)                                   ", 
    "National Institute of Studies and Educational Research  Anisio Teixeira (INEP) ", 
    "National Institute of Technology Information (ITI)                             ", 
    "National Library Foundation                                                    ", 
    "National Movies Agency (ANCINE)                                                ", 
    "National School of Public Administration Foundation (ENAP)                     ", 
    "National Trust of Education Development (FNDE)                                 ", 
    "National Water Agency (ANA)                                                    ", 
    "Northeast Development Superintendency (SUDENE)                                 ", 
    "Oswaldo Cruz Foundation (FIOCRUZ)                                              ", 
    "Ozorio Foundation                                                              ", 
    "Porto Alegre Clinic Hospital                                                   ", 
    "Private Insurance Superintendency (SUSEP)                                      ", 
    "Rio de Janeiro Botanical Gardens Research Institute                            ", 
    "Rui Barbosa House Foundation                                                   ", 
    "Sao Francisco and Parnaiba Valleys Development Company (CODEVASF)              ", 
    "Telecom National Agency (ANATEL)                                               "
    ), class = "factor")), .Names = c("year", "totalex", "agency.type", 
"unit"), row.names = c(NA, 100L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:51:43.187

与我最初的想法相反，我认为这`labeller`对您没有帮助，因为它仅适用于`facet_grid`，而不适用于`facet_wrap`. 相反，我认为可以以更简单的方式处理问题。方面的顺序由因子级别的顺序控制，因此重新排序级别以`unit`使其分组`agency.type`就足够了。

```
agency.unit <- unique(totalex.df[c("agency.type", "unit")])

totalex.df$unit <- factor(totalex.df$unit, 
  levels = agency.unit[order(agency.unit$agency.type, 
                             agency.unit$unit), "unit"]) 
```

那么你`facet_wrap`不应该需要`agency.type`它。

```
facet_wrap(~  unit, ncol=6) 
```

总共：

```
ggplot(data=totalex.df, aes(x=year, y=totalex)) + 
    geom_line(aes(colour=factor(agency.type))) + 
    facet_wrap( ~  unit, ncol=6) + 
    opts(strip.text.x = theme_text(size=2)) + 
    opts(axis.text.x=theme_text(size=4)) + 
    opts(legend.position="none") + 
    scale_y_sqrt("total expenditure (billions)") 
```

![在此处输入图像描述](../Images/d1c7cd299972a1209712bcee33aecde8.png)

尽管无法阅读，但第一个单位是“空军房地产基金机构（CFIAE）”，其次是“亚历山大·古斯芒基金会（FUNAG）”、“应用经济研究所（IPEA）”等。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T23:49:49.827

如果你给我们一些数据，这样它就可以重现了，这会有所帮助。你可以在你的问题中添加`dput(totalex.df)`如果它不是太长的输出吗？

你想要每个方面`unit`吗？或者你想要每个组合的一个方面`unit & agency.type`？

如果只是`unit`，试试这个：

`facet_wrap( ~ unit, ncol=6)`

如果两者都是，试试这个：

`facet_grid(agency.type ~ unit, ncol=6)`

仅供参考 - 要更好地了解如何使用 facet_wrap 和 facet_grid 函数，请在此处查看 Hadley 的文档：

[http://had.co.nz/ggplot2/facet_wrap.html](http://had.co.nz/ggplot2/facet_wrap.html)

# asp.net - 保护 ASP.NET 中的可执行下载

> ID：11442985
> 
> 赞同：0
> 
> 时间：2012-07-11T23:23:04.473
> 
> 标签：asp.net, iis-7

我有一个可执行文件，我想限制谁可以下载。我有 UI 修剪到位，因此当用户无权下载可执行文件时链接不存在。我在 web.config 中设置了一条规则，以保护资源免受未经授权的下载，但它似乎不起作用。

```
<location path="Utilities/SomeTool.exe">
  <system.web>
    <authorization>
      <allow roles="SomeRole" />
      <deny users="*"/>
    </authorization>
  </system.web>
</location> 
```

当我尝试下载资源时看到的是登录页面，如果用户不属于应该能够下载资源的角色，这是可以预期的。

我可以更改 web.config 中的规则，使其允许特定用户，并且我可以使用该特定用户访问可执行文件，但这不起作用，因为我需要为每个用户修改访问规则添加到角色中。

```
<location path="Utilities/SomeTool.exe">
  <system.web>
    <authorization>
      <allow users="MyUserName"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</location> 
```

我已经设置了 web.config 以利用 IIS7 中的集成管道，方法是按照[此页面](http://learn.iis.net/page.aspx/244/how-to-take-advantage-of-the-iis-integrated-pipeline/)上的说明删除和重新添加模块列表。这应该将我的网站设置为将所有资源视为 ASP.NET 资源。

有人知道我在 IIS7 的配置中可能缺少什么来保护可执行文件吗？

我已经想到了可以实施的其他解决方案，以保护可执行文件免遭未经授权的下载，例如创建链接将调用并返回资源的 Web 服务。然后在 web 服务中，我可以在返回可执行文件之前执行用户角色的验证。但这似乎比我需要完成的工作要多。

这是我的 web.config 的 system.web 部分：

```
<system.web>
  <compilation debug="false" targetFramework="4.0" />
  <httpRuntime enableVersionHeader="false" requestValidationMode="2.0" />
  <customErrors mode="RemoteOnly">
    <error statusCode="404" redirect="~/MyErrorPage.aspx" />
  </customErrors>
  <authentication mode="Forms">
    <forms timeout="60" ticketCompatibilityMode="Framework40" />
  </authentication>
  <authorization>
    <deny users="?" />
  </authorization>
  <sessionState timeout="60" />
  <membership defaultProvider="MyMembershipProvider">
    <providers>
      <clear />
      <add name="MyMembershipProvider" type="MyMembershipProvider" applicationName="MyApp" />
    </providers>
  </membership>
  <roleManager defaultProvider="MyRoleProvider" enabled="true" cacheRolesInCookie="true" cookieTimeout="60">
    <providers>
      <clear />
      <add name="MyRoleProvider" type="MyRoleProvider" applicationName="MyApp" />
    </providers>
  </roleManager>
</system.web> 
```

附带说明一下，当 web.config 在 Visual Studio 2010 中托管时，它可以与我的网站一起使用，但在 IIS7 中运行时会失败。

更新：我试图根据角色保护 *.html 和 *.aspx 页面的不同资源，我看到了同样的问题，即使用户确实属于适当的角色，也会被重定向到登录页面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:44:06.430

您已经提到 IIS7 集成模式试图让 ASP.net 处理程序为所有文件类型调用...

您可以在此处阅读更多相关信息： [URL 授权和非 Asp.Net 相关文件类型](https://stackoverflow.com/questions/846133/url-authorization-and-non-asp-net-related-file-types) 以及此处： [web.config 授权是否适用于 aspx 以外的文件？](https://stackoverflow.com/questions/6291503/does-web-config-authorization-work-on-files-other-than-aspx)

在我的脑海中，我至少会尝试将所有私人文件放在一个子目录中，并将位置安全性应用于目录，而不是实际文件本身。这可能会解决您的问题。

就个人而言，我会保护一个目录路径，而不是一个文件，因为它将来会证明文件名不会发生变化。

# objective-c - 如何在 Cocoa Objective-C 中将文本转换为图像

> ID：11442993
> 
> 赞同：5
> 
> 时间：2012-07-11T23:24:15.713
> 
> 标签：objective-c, cocoa

我正在寻找一种将一段文本转换为 Cocoa 中的图像的方法。一切似乎都描述了将图像转换为文本而不是将文本转换为图像。

简单地说，我想取一个词（比如“Kevin”），将其转换为位图图像来操作并保存为JPEG。

给出答案的人真棒。感谢您提供三种不同且同样有效的方法（是的，我已经对其进行了测试）......非常酷，我希望我能给您所有正确的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T01:13:27.253

编辑：我误读了这个问题，并假设你想要 Cocoa-touch 代码（我把它放在最后，以防你这样做）。这是使用 CoreText 在 Cocoa 中执行此操作的一种方法（正如另一位海报所说的有很多方法）：

```
{
    NSString* string = @"Kevin";
    CGFloat fontSize = 12.0f;

    // Create an attributed string with string and font information
    CTFontRef font = CTFontCreateWithName(CFSTR("Helvetica Light"), fontSize, nil);
    NSDictionary* attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                (id)font, kCTFontAttributeName, 
                                nil];
    NSAttributedString* as = [[NSAttributedString alloc] initWithString:string attributes:attributes];
    CFRelease(font);

    // Figure out how big an image we need 
    CTLineRef line = CTLineCreateWithAttributedString((CFAttributedStringRef)as);
    CGFloat ascent, descent, leading;
    double fWidth = CTLineGetTypographicBounds(line, &ascent, &descent, &leading);

    // On iOS 4.0 and Mac OS X v10.6 you can pass null for data 
    size_t width = (size_t)ceilf(fWidth);
    size_t height = (size_t)ceilf(ascent + descent);
    void* data = malloc(width*height*4);

    // Create the context and fill it with white background
    CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGImageAlphaPremultipliedLast;
    CGContextRef ctx = CGBitmapContextCreate(data, width, height, 8, width*4, space, bitmapInfo);
    CGColorSpaceRelease(space);
    CGContextSetRGBFillColor(ctx, 1.0, 1.0, 1.0, 1.0); // white background
    CGContextFillRect(ctx, CGRectMake(0.0, 0.0, width, height));

    // Draw the text 
    CGFloat x = 0.0;
    CGFloat y = descent;
    CGContextSetTextPosition(ctx, x, y);
    CTLineDraw(line, ctx);
    CFRelease(line);

    // Save as JPEG
    CGImageRef imageRef = CGBitmapContextCreateImage(ctx);
    NSBitmapImageRep* imageRep = [[NSBitmapImageRep alloc] initWithCGImage:imageRef];
    NSAssert(imageRep, @"imageRep must not be nil");
    NSData* imageData = [imageRep representationUsingType:NSJPEGFileType properties:nil];
    NSString* fileName = [NSString stringWithFormat:@"Kevin.jpg"];
    NSString* fileDirectory = NSHomeDirectory();
    NSString* filePath = [fileDirectory stringByAppendingPathComponent:fileName];
    [imageData writeToFile:filePath atomically:YES];

    // Clean up
    [imageRep release];
    CGImageRelease(imageRef);
    free(data);
} 
```

这是可可触摸版本：

```
// Figure out the dimensions of the string in a given font.
NSString* kevin = @"Kevin";
UIFont* font = [UIFont systemFontOfSize:12.0f];
CGSize size = [kevin sizeWithFont:font];
// Create a bitmap context into which the text will be rendered.
UIGraphicsBeginImageContext(size);
// Render the text 
[kevin drawAtPoint:CGPointMake(0.0, 0.0) withFont:font];
// Retrieve the image
UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
// Convert to JPEG
NSData* data = UIImageJPEGRepresentation(image, 1.0);
// Figure out a safe path
NSArray *arrayPaths = NSSearchPathForDirectoriesInDomains(
                                    NSDocumentDirectory,
                                    NSUserDomainMask,
                                    YES);
NSString *docDir = [arrayPaths objectAtIndex:0];
// Write the file
NSString *filePath = [docDir stringByAppendingPathComponent:@"Kevin.jpg"];
BOOL success = [data writeToFile:filePath atomically:YES];
if(!success)
{
    NSLog(@"Failed to write to file. Perhaps it already exists?");
}
else
{
    NSLog(@"JPEG file successfully written to %@", filePath);
}
// Clean up
UIGraphicsEndImageContext(); 
```

当我开始 iOS 编程时，我发现以下事情不直观或不寻常。测量和绘制字符串的方法是 on `NSString`（不是其他系统中的图形上下文）的方法。保存数据的方法`NSData`不是文件类的方法！创建图形上下文的函数是纯 C 函数，不属于任何类。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T01:43:50.540

（幸运或不幸）有许多不同的方法可以做到这一点。

**版本 1：**仅 AppKit/Foundation

```
NSString *text = ...;
NSDictionary *attr = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSFont fontWithName:@"Helvetica" size:24], NSFontAttributeName,
    nil];
NSImage *img = [[NSImage alloc] initWithSize:NSMakeSize(250, 250)];
[img lockFocus];
[text drawAtPoint:NSMakePoint(10, 10) withAttributes:attr];
[img unlockFocus];

// when you want to write it to a JPEG
NSData *dat = [NSBitmapImageRep
    representationOfImageRepsInArray:[img representations]
    usingType:NSJPEGFileType
    properties:[NSDictionary dictionaryWithObjectsAndKeys:
        [NSNumber numberWithFloat:0.9], NSImageCompressionFactor,
        nil]]; 
```

然后，您可以根据需要写入`dat`文件。

**版本 2：**

同样可以使用`CGContextRef`（创建位图上下文）和等效的 Quartz API 来完成。这消除了对 Objective C 的需求，但代码会因此而稍长一些。您还可以使用 Quartz ( `CGxxx`) 和 AppKit ( `NSxxx`) API 的各种混合，但 Quartz API 通常使用起来更麻烦（因为它们的灵活性 wrt. 分配和其他问题）。

**版本 3：**

您还可以使用 OS X 10.5+ 的 Quartz + Core Text。这为您在文本布局方面提供了很大的灵活性，并且还提供了一种相对简单的方法来在将文本绘制到位图之前测量文本的大小（因此您可以使位图足够大）。

**脚注：**在绘制文本之前，像倾斜这样的东西很容易应用。文本可以倾斜绘制（参见`NSAffineTransform`Cocoa[绘图指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Transforms/Transforms.html#//apple_ref/doc/uid/TP40003290-CH204-BCIDJJBI)）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T23:31:27.190

我相信你想要的功能是[`CGContextShowTextAtPoint()`](http://developer.apple.com/library/mac/#DOCUMENTATION/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextShowTextAtPoint).

示例用法：

```
NSString *input = /* ... */;
CGContextRef context = /* create a graphics context */;

// make sure you have set up the font
CGContextShowTextAtPoint(context, 5, 5, [input UTF8String], [input length]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T04:22:00.587

这是一个最小的命令行工具，可以执行您所描述的操作。将它传递给您要保存结果的路径，例如：

" `./test foo.tiff`"

```
#import <Cocoa/Cocoa.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {
      NSString *string = @"Hello, World!";
      NSString *path = [[[NSProcessInfo processInfo] arguments] objectAtIndex:1];

      NSDictionary *attributes =
        @{ NSFontAttributeName : [NSFont fontWithName:@"Helvetica" size:40.0],
        NSForegroundColorAttributeName : NSColor.blackColor};

      NSImage *image = [[NSImage alloc] initWithSize:[string sizeWithAttributes:attributes]];
      [image lockFocus];
      [string drawAtPoint:NSZeroPoint withAttributes:attributes];
      [image unlockFocus];
      [[image TIFFRepresentation] writeToFile:path atomically:YES];
    }
    return 0;
} 
```