# StackOverflow 问答 11958000-11958999

# android - Facebook API 在发布模式下不起作用

> ID：11958000
> 
> 赞同：0
> 
> 时间：2012-08-14T17:55:51.743
> 
> 标签：android, facebook, key, release

我正在尝试将 Facebook API 支持集成到我的应用程序中。使用调试密钥可以正常工作。我正在使用以下命令：

`keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64`

但是当我尝试使用释放密钥时，它不起作用；我不能在墙上发帖。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:02:05.617

您是否将发布密钥添加到Facebook 上的[应用仪表板？](https://developers.facebook.com/apps)确保您用于开发应用程序的密钥位于应用程序基本设置的“Android 密钥哈希”部分。

# python - 如何更改 pycharm 的命令以将 rst 转换为 html

> ID：11958004
> 
> 赞同：2
> 
> 时间：2012-08-14T17:56:03.030
> 
> 标签：python, pycharm, restructuredtext, pygments, docutils

我安装 docutils 和 pygment 以在 rst 文件上突出显示语法。通过使用命令：

```
rst2html.py file.rst file.html 
```

我能得到好的结果。

当我使用 pycharm 编写 rst 文件时，它具有用于转换 rst 的内置脚本：

```
C:\Python27\python.exe "C:\Program Files (x86)\JetBrains\PyCharm 2.5.2\helpers\rest_runners\rst2smth.py" rst2html F:/Dropbox/notes/python/PythonNotes/1.rst F:/Dropbox/notes/python/PythonNotes/1.html 
```

我阅读了文件“rst2smth.py”，似乎使用系统安装的 docutils 命令 rst2html，但我得到的 html 没有语法高亮代码片段。为了方便描述，我截图如下： [https ://www.dropbox.com/s/frmf933t3kjcvum/pycharm_rst2html.png](https://www.dropbox.com/s/frmf933t3kjcvum/pycharm_rst2html.png)

有什么方法可以让 pycharm 将 rst 转换为 html，就像我在终端中使用的命令一样？

以下是pycharm上的python解释器设置： [https ://www.dropbox.com/s/qas4352r4fmi6iq/pycharm_packages.png](https://www.dropbox.com/s/qas4352r4fmi6iq/pycharm_packages.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:51:23.493

无法更改 PyCharm 使用的命令，但您可以使用所需的参数创建自己的[外部工具](http://www.jetbrains.com/pycharm/webhelp/configuring-third-party-tools.html)并将其绑定到热键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T12:44:54.613

使用较新版本的 Pycharm（使用 3.4 atm），您可以选择为*Python docs > Sphinx task*创建目标。您需要指定文档的根目录和目标目录。您可能还需要专门安装 sphinx 和 pygments。

# sql-server - 列不会绑定

> ID：11958006
> 
> 赞同：0
> 
> 时间：2012-08-14T17:56:08.907
> 
> 标签：sql-server

我有以下语句作为存储过程的第一步

```
As
BEGIN
SET NOCOUNT ON
  DELETE DB1.dbo.Members WHERE DB1.dbo.members.ID = DB2.dbo.in_table.ID
  --after the delete I will insert all of the new data from in_table to Members
END 
```

DB2.dbo.in_table.ID 不会绑定。存储过程设置为存储在 DB2 上。DB1 位置完美绑定。是数据库权限问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:04:50.010

您没有在查询中的任何位置引用或加入第二个表：

```
DELETE 
FROM DB1.dbo.Members 
WHERE EXISTS (SELECT ID 
                FROM DB2.dbo.in_table 
                WHERE DB1.dbo.Members.id = B2.dbo.in_table.ID) 
```

# php - mysql 遇到 UNION 查询问题

> ID：11958009
> 
> 赞同：2
> 
> 时间：2012-08-14T17:56:21.863
> 
> 标签：php, mysql, sql

我似乎无法获得以下查询的结果，以下查询返回 NULL

**查询联合**

```
"SELECT isbn    

    FROM ".TBL_BOOKS." 

    WHERE rank < 200000 AND rank IS NOT NULL 
    AND lowest_new_price < amazon_new_price/100*80 
    AND amazon_new_price < 9999 
    AND ROUND((amazon_new_price/100*80) - lowest_new_price) > (lowest_new_price/100*".MARGIN.") 

UNION 

SELECT isbn 

    FROM ".TBL_BOOKS." 

    WHERE rank < 200000 AND rank IS NOT NULL 
    AND lowest_used_price < amazon_used_price/100*80 
    AND amazon_used_price < 9999 
    AND amazon_used_price < amazon_new_price 
    AND ROUND((amazon_used_price/100*80) - lowest_used_price) > (lowest_used_price/100*".MARGIN.") 

ORDER BY rank ASC"; 
```

但是这两个quires自己工作得很好

**查询 1**

```
"SELECT isbn    

    FROM ".TBL_BOOKS." 

    WHERE rank < 200000 AND rank IS NOT NULL 
    AND lowest_new_price < amazon_new_price/100*80 
    AND amazon_new_price < 9999 
    AND ROUND((amazon_new_price/100*80) - lowest_new_price) > (lowest_new_price/100*".MARGIN.") 
ORDER BY rank ASC"; 
```

**查询 2**

```
"   SELECT isbn 

        FROM ".TBL_BOOKS." 

        WHERE rank < 200000 AND rank IS NOT NULL 
        AND lowest_used_price < amazon_used_price/100*80 
        AND amazon_used_price < 9999 
        AND amazon_used_price < amazon_new_price 
        AND ROUND((amazon_used_price/100*80) - lowest_used_price) > (lowest_used_price/100*".MARGIN.") 

ORDER BY rank ASC"; 
```

如果我打破联合并分别运行两个查询，我不会有任何问题，但由于某种原因，联合查询不起作用，可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:00:32.527

我认为——当你在联合中使用“order by”子句时——那么“order by”参数必须是单个查询返回的字段之一。

# c# - 动态控件未显示在页面上

> ID：11958010
> 
> 赞同：1
> 
> 时间：2012-08-14T17:56:22.460
> 
> 标签：c#, asp.net, code-behind, web-controls

这是相对简单的，但我显然错过了一步，无法找到解决我的问题的支持。

我只是想将一个动态创建的控件附加到我的页面，但这并没有发生。这是我正在做的精简版：

```
Button button = new Button();
button.Click += new EventHandler(btnTakeAction_Click);
button.Text = "Take Action";
button.ID = "btnTakeAction";
fullPayOnlyCoupon = string.Format(
    "<div>Some random text. I want my control to show up here: {0}</div>", button); 
```

假设这`btnTakeAction_Click`是有效的。另外，我知道这不会正确显示按钮，而是将其呈现为`WebControl.Button`. 但这就是我正在寻找的想法：按钮显示在字符串中动态创建的标记中的特定位置。据我了解，您必须将此按钮控件添加到页面上已经存在的另一个预先存在的控件中。所以我试过这个：

```
Button button = new Button();
button.Click += new EventHandler(btnTakeAction_Click);
button.Text = "Take Action";
button.ID = "btnTakeAction";
ControlOnAspxPage.Controls.Add(button); 
```

但是`ControlOnAspxPage`不会呈现我动态创建的按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:05:53.193

尝试使用[占位符控件：](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.placeholder%28v=vs.100%29.aspx)

```
<asp:PlaceHolder
  EnableTheming="True|False"
  EnableViewState="True|False"
  ID="string"
  OnDataBinding="DataBinding event handler"
  OnDisposed="Disposed event handler"
  OnInit="Init event handler"
  OnLoad="Load event handler"
  OnPreRender="PreRender event handler"
  OnUnload="Unload event handler"
  runat="server"
  SkinID="string"
  Visible="True|False"
/> 
```

和：

```
myButton = new HtmlButton();
myButton.InnerText = "Button 2";
PlaceHolder1.Controls.Add(myButton); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:06:46.873

您必须在每次`Page_Load`活动中创建动态控件。这是一个解释： http: [//www.codeproject.com/Articles/8114/Dynamically-Created-Controls-in-ASP-NET](http://www.codeproject.com/Articles/8114/Dynamically-Created-Controls-in-ASP-NET)

# actionscript-3 - 在图形周围画边框？

> ID：11958012
> 
> 赞同：0
> 
> 时间：2012-08-14T17:56:31.290
> 
> 标签：actionscript-3, flash

我有一个包含一些图形的 Movieclip（在 Actionscript 3.0 中），这些图形在运行时使用 mc.graphics.lineTo(); 现在我想在代表对象边界的绘制图形周围绘制一个矩形。那么 mc.x / mc.y 与绘制图形的左上边缘不同，所以对我来说 getBorders(mc); 功能不起作用。

我遇到的问题是 Rectale 不知何故没有在正确的位置产生，它总是关闭！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:01:45.387

根据您的需要，您可以使用MovieClip/Sprite`getRect`或`getBounds`任何 DisplayObject 的方法

*   [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#getBounds%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#getBounds%28%29)
*   [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#getRect%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#getRect%28%29)

# javascript - 当通过页面上的某个点时使div显示

> ID：11958014
> 
> 赞同：13
> 
> 时间：2012-08-14T17:56:32.140
> 
> 标签：javascript, jquery, css, html, show

真的不知道从哪里开始。一旦页面上的某个 div 被滚动过去，有谁知道一种从 display:none （或任何类似的东西）更改 div 的方法？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-14T18:04:25.673

首先，给你`div`一个 ID - 例如`dvid`，假设另一个`div`（你想要检测滚动之后）有一个 ID `othdiv`。然后你可以做这样的事情：

```
$(document).ready( function() {
    $("#dvid").hide(); //hide your div initially
    var topOfOthDiv = $("#othdiv").offset().top;
    $(window).scroll(function() {
        if($(window).scrollTop() > topOfOthDiv) { //scrolled past the other div?
            $("#dvid").show(); //reached the desired point -- show div
        }
    });
}); 
```

微小的 jsFiddle 演示：[微小的链接](http://jsfiddle.net/DnJ2z/11/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T18:07:35.457

在窗口的 onscroll 中，从页面顶部获取当前滚动位置以及 div 的位置，并相应地显示/隐藏您的元素。

```
window.onscroll = function (oEvent) {
  var mydivpos = document.getElementById("mydiv").offsetTop;
  var scrollPos = document.getElementsByTagName("body")[0].scrollTop;

  if(scrollPos >= mydivpos)
    document.getElementById("noshow").className = "";
  else
    document.getElementById("noshow").className = "hidden";
}; 
```

[**演示**](http://jsbin.com/evecef/2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-07T14:51:02.587

**滚动条和“****$(窗口).scrollTop()*****"*****

 ***我发现，在上面提供的解决方案中调用这样的功能，（在这个论坛中还有更多这样的例子——它们都运行良好）只有在滚动条实际可见并且可以操作时才能成功。

如果（正如我可能愚蠢地尝试过的那样），您希望实现这样的功能，并且您还希望，容我们说，实现一个没有滚动条的极简“干净屏幕”，例如在**[这个讨论](https://stackoverflow.com/questions/16670931/hide-scroll-bar-but-still-being-able-to-scroll)**中，然后是**$(window)。 scrollTop()**将不起作用。

这可能是一个编程基础，但我想我会向任何新手提供提醒，因为我花了很长时间才弄清楚这一点。

如果有人可以就如何克服这个问题或提供更多见解提供一些建议，请随时回复，因为我不得不在**[这里求助于显示/隐藏 onmouseover/mouseleave](http://www.collyg.com/architecture)**

长寿和编程，CollyG。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:08:59.247

修改@Abody97 的答案以在 div 滚动过去后显示

[http://jsfiddle.net/nickaknudson/f72vg/](http://jsfiddle.net/nickaknudson/f72vg/)

```
$(document).ready( function() {
    $("#div_to_show").hide(); //hide your div initially
    $(window).scroll(function() {
        // once top of div is scrolled past
        if($(body).scrollTop() >= $("#div_to_scroll_past").offset().top) {
            $("#div_to_show").show(); //reached the desired point -- show div
        }
    });
}); 
```

**或者**一旦 div 的底部滚动过去

```
$(document).ready( function() {
    $("#div_to_show").hide(); //hide your div initially
    $(window).scroll(function() {
        // once bottom of div is scrolled past
        if($(body).scrollTop() >= ( $("#div_to_scroll_past").offset().top + $("#div_to_scroll_past").outerHeight() )) {
            $("#div_to_show").show(); //reached the desired point -- show div
        }
    });
}); 
```

**资源**

*   [http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)
*   [http://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)
*   [http://api.jquery.com/offset/](http://api.jquery.com/offset/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T18:13:03.580

这是一个工作[小提琴](http://jsbin.com/ejufim/1/)

jQuery

```
$(function(){
    var d = $('.hidden');
    var dPosTop = d.offset().top;
    var win = $(window);
    win.scroll(function(e){
        var scrollTop = win.scrollTop();
        if(scrollTop >= dPosTop){
          d.show(2000);
        }
      else{
        d.hide(2000);
      }
    });

}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-14T18:07:44.913

最简单的方法是使用 jQuery 和这样的函数。

```
var eventPosition = 550; // This is the height position you want the event to fire on.
$(window).scroll(function(e) {
    if (window.screenY >= eventPosition) {
        fireEvent();
    }
});

function fireEvent() {
    // Add logic here to complete what you're trying to do.
}; 
```***

# sql - 提高从包含大量记录的表中选择 stmt 的性能

> ID：11958015
> 
> 赞同：0
> 
> 时间：2012-08-14T17:56:34.347
> 
> 标签：sql, sqlite

如何提高选择查询的性能，该查询从具有 100000 行且按任何列排序的表中检索 500 个项目。

目前我正在使用以下查询：

```
select * 
from Table1 
order by Column10 desc, Id asc 
limit :rowsOnPage offset :offset 
```

有没有更好的办法？

# php - 如何在 PHP 中修复此错误：“遇到格式不正确的数值”

> ID：11958019
> 
> 赞同：6
> 
> 时间：2012-08-14T17:56:48.747
> 
> 标签：php, strtotime

> **可能重复：**
> [遇到格式不正确的数值](https://stackoverflow.com/questions/6136430/a-non-well-formed-numeric-value-encountered)

为什么这不起作用？

```
echo gmdate('Y-m-d H:i:s',strtotime('+7 days','2035-01-01 00:00:00')); 
```

我看到的错误是：

> 遇到格式不正确的数值

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-14T17:59:18.623

的第二个参数`strtotime`需要时间戳，而不是字符串。参见手册[`strtotime`](http://php.net/manual/en/function.strtotime.php)。

您可以`strtotime`再次使用第二个参数来获得您想要的：

```
echo gmdate('Y-m-d H:i:s',strtotime('+7 days',strtotime('2035-01-01 00:00:00'))); 
```

# javascript - 专注于锚标签

> ID：11958021
> 
> 赞同：4
> 
> 时间：2012-08-14T17:56:51.930
> 
> 标签：javascript, jquery, html, knockout.js

我有一些看起来像这样的 HTML：

```
 <div id="zoomed" style="display:none; position:absolute;">
            <a href="#" alt="close" id="closeLink" onclick="closeZoom();" tabindex="2"><img alt="close" style="border-style:none" class="close" id="closeButton" src="Images/trans.png"/></a>
            <div class="zoomParent">
            <table>
                <tbody data-bind="with: currentFactor">
                    <tr><td class="zIngHeader" colspan="3">
                    <span data-bind="text: FactorName"></span>
                    </td>
                    </tr>
                    <tr>
                        <td class="zMin" data-bind="text: formatValues(Min)"></td>
                        <td><input type="text" data-bind="value: currentValue" class="channel" onkeydown="EnterToTabHack(event);" tabindex="1"/></td>
                        <td class="zMax" data-bind="text: formatValues(Max)"></td>
                    </tr>
                    <tr><td colspan="3" class="graphCell" data-bind="animateColor: $root.statusColor"><div id="zoomPlot" class="zoomPlotStyle"></div></td></tr>
                </tbody>
            </table>
            </div>
        </div> 
```

现在，当您在文本框中并按 Tab 键时，锚标记将获得焦点，因此如果您立即按 Enter，您将运行函数 closeZoom()。这工作正常。

我想要做的是，如果您在文本框中并按 Enter 键，它的行为方式与您按 Tab 键的方式相同。所以我有一个功能来做到这一点：

```
 function EnterToTabHack(event) {
        if ((event.which && event.which == 13) || (event.keyCode && event.keyCode == 13)) {
            $(".channel").blur();
            $("#closeLink").focus();
        }
    } 
```

模糊部分工作正常，文本框中的值按我的意愿写回我的视图模型，但焦点并没有最终落在我的链接上。按两次回车*应该*接受文本框中的值（确实如此），然后关闭窗口（它没有）。

知道这里可能有什么问题吗？我没有看到任何错误消息，但显然焦点不在锚链接上，就像我点击标签时那样（注意：只是模糊似乎也没有这样做）。

**编辑：**我添加了更多的 html，因为它可能相关，也可能不相关。特别是，我使用 KnockoutJS 进行数据绑定，我认为这使得无法使用几个人建议的 jQuery 绑定（事件）类型，或者至少，如果我要使用它们，我会每次“currentFactor”更改时都必须重新绑定，因为*我认为*淘汰赛正在做的是破坏桌子主体中的所有内容并在该部分更改时重新创建它。

**另一个编辑：**首先，非常感谢到目前为止所有试图提供帮助的人！我真的很感谢你花时间来看看这个。

我玩弄了一个 JS Fiddle：

[http://jsfiddle.net/sUh8G/4/](http://jsfiddle.net/sUh8G/4/)

起初我很困惑，因为当然，它工作得很好！然后我为 img 添加了样式，似乎以这种方式使用 sprite 会破坏它。如果您从 css 中删除所有 img 样式，它工作正常。有了他们，我无法以编程方式集中注意力。

以前有人见过这样的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:15:02.217

这将焦点设置为`#closeLink`

```
$('.channel').on('keydown', function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 13) {
        e.preventDefault();
        $('#closeLink').focus();
    }
}); 
```

您不必`onkeydown="EnterToTabHack(event);"`在输入中设置。大纲并不总是显示在 URL 周围，但该函数将`focus()`显示链接。这`preventDefault`是因为链接会在发生时触发`keyup`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T18:24:13.067

好的，这是一个简化的小提琴，我使用了其他答案之一的 js 代码。重点似乎适用于我当前的浏览器 FF 14

[http://jsfiddle.net/ZKYc3/](http://jsfiddle.net/ZKYc3/)

这是适用于 FF 14 的版本

[http://jsfiddle.net/ZKYc3/2/](http://jsfiddle.net/ZKYc3/2/) 点击closelInk时这个有一个警报。双输入触发警报。也许您需要做的就是将事件处理从 html 中取出并留给 jquery 来处理

更新：见[http://knockoutjs.com/documentation/event-binding.html](http://knockoutjs.com/documentation/event-binding.html)

我认为您可能应该遵循这一点，因为您使用的是淘汰赛

更新小提琴工作

[http://jsfiddle.net/sUh8G/5/](http://jsfiddle.net/sUh8G/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:13:30.283

我会从你的 html 元素中取出 onclick 和 onkeydown ......

```
<a href="#" id="closeLink" tabindex="2"><img class="close" style="border-style:none" id="closeButton" src="Images/trans.png"/></a>

<input type="text" data-bind="value: currentValue" class="channel" tabindex="1"/> 
```

并使用 jquery 来连接这些事件......

```
$(function(){
    $('#closeLink').click(closeZoom);

    $('.channel').keypress(function(e){
        var code = (e.keyCode ? e.keyCode : e.which);
        if(code == 13) { //Enter keycode
           $(".channel").blur();
           $("#closeLink").focus();
        }
    });
}); 
```

我在这里使用 keypress 而不是 keydown，因为 keydown 会聚焦链接，然后 keyup 会触发 click 事件。如果这是您想要的行为，请使用 keydown。否则，keypress 会将焦点设置到链接上，第二次 enter 按下将触发 click 事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T18:13:35.393

```
function EnterToTabHack(event) {
        if ((event.which && event.which == 13) || (event.keyCode && event.keyCode == 13)) {
            $(".channel").blur();
        }
    }    

$(".channel").blur(function() {
      $("#closeLink").focus();
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T18:50:36.377

使用 keyup 事件

```
<a href="#" id="closeLink" onclick="closeZoom();" tabindex="2" ><img alt='testtesttest' class="close" style="border-style:none" id="closeButton" src="Images/trans.png"/></a>

<input type="text" data-bind="value: currentValue" class="channel" onkeyup="EnterToTabHack(event);" tabindex="1"/> 
```

然后是js

```
function EnterToTabHack(event) {   
        if ((event.which && event.which == 13) || (event.keyCode && event.keyCode == 13)) {        
            $("#closeLink").focus();
        }
} 
```

[http://jsfiddle.net/wirey00/KcRyV/](http://jsfiddle.net/wirey00/KcRyV/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T18:05:26.517

这看起来不错，但你的最后一行`$("#closeLink").focus();`

应该改成这样：`$("#closeLink").click();`

# java - 在命令提示符和 IntelliJ IDEA 中使用自定义 jar 库

> ID：11958024
> 
> 赞同：3
> 
> 时间：2012-08-14T17:57:08.767
> 
> 标签：java, intellij-idea, cmd, classpath

我在命令提示符下使用自定义 jar 库（来自[http://algs4.cs.princeton.edu/home/的 algs4.jar/stdlib.jar）时遇到问题。](http://algs4.cs.princeton.edu/home/)我将这些库添加到 IntelliJ 类路径设置（项目结构 -> SDKs -> 类路径）中，并且能够毫无问题地使用它们的类。

但是，我也希望能够在命令提示符下使用这些库。尽管我在 Windows 设置中没有设置 CLASSPATH 变量，但在使用标准 java 库时，我已经能够在 cmd 中使用 javac/java 而没有问题。（可能是因为 IntelliJ 在每次启动/编译时为所有标准库设置了 CLASSPATH 以在系统范围内工作）。但是，即使将 2 个 jars 添加到 IntelliJ 类路径设置中，我也无法在 cmd 中使用“javac”。然后，我在 Windows 设置中创建了 CLASSPATH 变量，并将罐子添加到其中。在此之后，我能够毫无问题地使用 javac 进行编译。但是，当我尝试在 cmd 中运行程序时，我得到了这个：

“错误：无法找到或加载主类”。

每当我使用任何 jar 库（包括标准库）时，我都会收到此错误，在设置 Windows CLASSPATH 之前我没有遇到任何问题。我想一旦我设置了自己的 CLASSPATH 就会覆盖由 intelliJ 设置的类路径。当我删除 CLASSPATH 时，我再次能够在 cmd 中编译和运行标准库，但不能编译和运行 2 个自定义库。

请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:22:21.960

您应该通过将这些库作为库而不是 JDK添加到[模块依赖项中来使这些库成为项目的一部分，然后您可以](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)[生成一个工件 jar 文件，该文件将在 jar 内部](https://stackoverflow.com/q/2025607/104891)或[附近包含所有依赖项并通过 jar 清单引用文件类路径](https://stackoverflow.com/q/11176525/104891)。另请参阅[工件帮助部分](http://www.jetbrains.com/idea/webhelp/configuring-artifacts.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T20:29:16.520

正如[这篇文章指出的那样](https://devnet.jetbrains.com/message/5512652)，在这种特殊情况下，问题可能是由于库中的类“......放置在默认包（无包声明）和现代版本的 java（至少 7 8) 禁止引用默认包中的类，除非你自己的类也在默认包中。”

为了解决这个问题，我从 jar 中提取了 .java 文件（将文件类型从 .jar 更改为 .zip 并解压到一个目录）。我编了一个包名“com.sedge.stdlib”，并根据需要修改了 .java 文件。例如，我通过在顶部放置一个包指令从 algs4 修改了 StdLib.java 类：

```
package com.sedge.stdlib;

import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.io.UnsupportedEncodingException;
import java.util.Locale;

/**
 *  <i>Standard output</i>. This class provides methods for writing strings
 *  and numbers to standard output.
 *  <p>
 *  For additional documentation, see <a href="http://introcs.cs.princeton.edu/15inout">Section 1.5</a> of
 *  <i>Introduction to Programming in Java: An Interdisciplinary Approach</i> by Robert Sedgewick and Kevin Wayne.
 *
 *  @author Robert Sedgewick
 *  @author Kevin Wayne
 */
public final class StdOut {
. . . 
```

# clojure - Clojure 的 defrecord - 如何使用它？

> ID：11958027
> 
> 赞同：24
> 
> 时间：2012-08-14T17:57:21.047
> 
> 标签：clojure

`defrecord`我正在尝试在 Clojure中创建自己的不可变数据类型/方法。目标是拥有一个我可以创建实例的数据类型，然后调用它的方法来返回一个带有变异变量的新副本。假设 a 和 b 是向量。我想更新两者中的值并返回整个结构的新副本，其中更新了这些向量。这显然不能编译，我只是想表达我的想法。

```
(defrecord MyType [a b]
  (constructor [N]
    ; I'd like to build an initial instance, creating a and b as vectors of length N
  ) 

  (mutate-and-return [] 
    ; I'd like to mutate (assoc the vectors) and return the new structure, a and b modified
  )
) 
```

我想调用构造函数，然后调用 mutator 任意多次（还有其他函数不会发生变异，但我不想让问题变得更复杂）。

或者，如果这不是惯用的 Clojure，你应该怎么做这样的事情？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-14T18:21:16.027

以下是您定义记录的方式：

```
(defrecord MyType [a b]) 
```

请注意，在 Clojure 中，您通常不会在记录类型本身中定义“方法”（如果您想直接实现 Java 接口或协议，则例外）。

`->`免费自动生成一个基本的构造函数（以 为前缀）：

```
(def foo (->MyType [1 2 3] [4 5 6]))

foo
=> #user.MyType{:a [1 2 3], :b [4 5 6]} 
```

然后，您可以编写使用它的更复杂的构造函数，例如

```
(defn mytype-with-length [n]
  (let [a (vec (range n))
        b (vec (range n))] 
    (->MyType a b)))

(mytype-with-length 3)
=> #user.MyType{:a [0 1 2], :b [0 1 2]} 
```

而且“mutate-and-return”也是免费提供的——你可以使用[assoc](http://clojuredocs.org/clojure_core/clojure.core/assoc)：

```
(assoc foo :b [7 8 9])
=> user.MyType{:a [1 2 3], :b [7 8 9]} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-11T09:20:40.587

Clojure defrecord 示例：

;;定义地址记录

```
(defrecord Address [city state]) 
```

;;定义人员记录

```
(defrecord Person [firstname lastname ^Address address]) 
```

;;构建构造函数

```
(defn make-person ([fname lname city state]
               (->Person fname lname (->Address city state)))) 
```

;;创建一个人

```
(def person1 (make-person "John" "Doe" "LA" "CA")) 
```

;;检索值

```
(:firstname person1)
(:city (:address person1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-10T13:43:29.410

Clojure 允许您创建记录，这些记录是自定义的、类似地图的数据类型。它们类似于地图，因为它们将键与值相关联，您可以像使用地图一样查找它们的值，并且它们像地图一样是不可变的。

* * *

```
(defrecord Person [last first address])
;=> core.Person

(defrecord Ad [street city zip])
;=> core.Ad

(def p1 (Person. "Jhon" "Mick"
                 (Ad. "US187956" "NY" 3369)))
;=> #'core/p1

(update-in p1 [:address :zip] inc)
;=> #core.Person{:last "Jhon", :first "Mick", :address #playsync.core.Ad{:street "US187956", :city "NY", :zip 3370}}

(assoc p1 :last "Adam")
;=> #core.Person{:last "Adam", :first "Mick", :address #playsync.core.Ad{:street "US187956", :city "NY", :zip 3370}} 
```

# asp.net - 添加/更新 Web 引用时防止在 Reference.cs 中生成代理类

> ID：11958030
> 
> 赞同：8
> 
> 时间：2012-08-14T17:57:25.993
> 
> 标签：asp.net, web-services, visual-studio, asmx

我有一个网络服务和一个客户端。参数和返回类型中使用的类位于两者共享的公共 DLL 中。但是，每当我更新 Web 参考时，Visual Studio 都会生成具有相同名称和公共属性和方法的类的副本。然后解决方案将无法编译，因为客户端代码尝试使用公共 DLL 中的版本。我可以通过在每次更新 Web 引用时删除“重复”类并添加一个 using 语句来指向公共 dll 的命名空间来解决该问题。有没有办法永久解决这个问题？

更新：请参阅下面的评论。这是 asmx Web 服务的一个“特性”。除了以下之一之外，别无他法：1) 使用更现代的 Web 服务类型。2) 不要使用通用 DLL 3) 每次更新网络参考时手动修复，如上面的原始问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:11:10.357

这是 asmx Web 服务的一个“特性”。除了以下之一之外，没有其他方法可以解决它：

*   使用更现代的网络服务类型。
*   不要使用通用 DLL
*   每次更新网络参考时手动修复，如上面的原始问题。

资料来源：其他stackoverflow问题：

*   [添加服务引用时忽略“重用现有类型”](https://stackoverflow.com/questions/134064/reuse-existing-types-is-ignored-when-adding-a-service-reference)
*   [在生成 Web 服务代理类时，Visual Studio 2008 和 svcutil 如何决定从引用的程序集中重用哪些类型？](https://stackoverflow.com/questions/3389679/how-does-visual-studio-2008-and-svcutil-decide-which-types-to-re-use-from-refere)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:26:51.803

没有办法做到这一点。

但是，我认为我们这里有一个设计问题。当我们创建一个 Web 服务时，我们希望我们的客户不需要从我们这里引用任何 dll。只有 Web 服务公开的类型才足以供其使用（Web 服务都是关于互操作性的，想象您的客户端应用程序是用 Java 编写的，您无法引用 .NET dll）。

这就是在您引用 Web 服务时创建这些类型的原因。在我看来，您应该只依赖客户端应用程序中的 Web 服务生成的类。从客户端项目中删除对共享 dll 的引用。

这不会直接回答您的问题，而是为您的问题提供替代方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:52:35.930

我遇到了同样的问题，但我忽略了在我的客户端中使用请求/响应类型添加正确程序集的引用。一旦我添加了该引用，并确保“添加服务引用”对话框中的“重用类型”复选框处于打开状态，它就可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T00:59:49.267

在域类中，设置 AnonymousType=false 以防止在添加 Web 引用时生成前缀意外的类
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = **false** )] 但这仅确保类，在 Reference.cs 中自动生成具有与领域类相同的结构。

解决这个问题的一种方法是序列化/反序列化到域对象。

# android - 隐藏平板电脑系统栏

> ID：11958034
> 
> 赞同：14
> 
> 时间：2012-08-14T17:57:48.427
> 
> 标签：android, android-3.0-honeycomb, tablet, statusbar

我想隐藏平板设备的系统栏。我搜索了很多但没有成功。我为它添加了图像。

我找到了一些解决方案，例如

```
View v = findViewById(R.id.view_id);
v.setSystemUiVisibility(View.STATUS_BAR_HIDDEN); 
```

但我不知道如何使用它![在此处输入图像描述](../Images/564dc34e26c65f2eeb8001059f3836b2.png)

我知道这是可能的[http://forum.xda-developers.com/showthread.php?t=1228046](http://forum.xda-developers.com/showthread.php?t=1228046)有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-21T06:47:11.430

代码片段显示/隐藏植根的 android 平板电脑上的状态栏

隐藏：

* * *

```
 Process proc = null;

            String ProcID = "79"; //HONEYCOMB AND OLDER

            if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH){
                ProcID = "42"; //ICS AND NEWER
            }

            try {
                proc = Runtime.getRuntime().exec(new String[] { "su", "-c", "service call activity "+ProcID+" s16 com.android.systemui" });
            } catch (Exception e) {
                Log.w("Main","Failed to kill task bar (1).");
                e.printStackTrace();
            }
            try {
                proc.waitFor();
            } catch (Exception e) {
                Log.w("Main","Failed to kill task bar (2).");
                e.printStackTrace();
            } 
```

以显示：

* * *

```
 Process proc = null;
            try {
                proc = Runtime.getRuntime().exec(new String[] { "su", "-c", "am startservice -n com.android.systemui/.SystemUIService" });
            } catch (Exception e) {
                Log.w("Main","Failed to kill task bar (1).");
                e.printStackTrace();
            }
            try {
                proc.waitFor();
            } catch (Exception e) {
                Log.w("Main","Failed to kill task bar (2).");
                e.printStackTrace();
            } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T04:53:46.910

最后在搜索了很多时间之后，我得到了一些满足我要求的替代方案。

我知道对于程序员来说，从这种情况中退出并不是一个好主意，但是由于我的时间限制，我使用了这种方式......

我找到了满足我要求的这个链接和应用程序

[http://www.42gears.com/blog/2012/04/how-to-hide-bottom-bar-in-rooted-android-3-0-tablets-using-surelock/](http://www.42gears.com/blog/2012/04/how-to-hide-bottom-bar-in-rooted-android-3-0-tablets-using-surelock/)

如果您希望在您的应用程序中满足此类要求，请访问此网站一次....

感谢大家帮助我解决我的问题...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T18:04:21.197

无法隐藏系统栏。API 中没有任何内容允许这样做。这是因为用户总是需要访问 home 和 back 键，以防应用程序冻结或在用户只需要退出应用程序的地方做一些愚蠢的事情。您只能隐藏操作栏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T12:53:51.160

有一种解决方法可以在所有大多数平板电脑中禁用菜单栏而无需生根。但这有点棘手，但它很干净。目前市场上一些知名的应用程序使用这种策略来实现其应用程序的禁用菜单栏功能。

*   授予管理员权限。
*   使用设备管理员配置文件 api 设置密码并锁定设备
*   然后在本机锁定屏幕上加载任何 UI。（当然，每当活动之间发生转换时，这将显示背景锁定屏幕。但如果逻辑组织得好，那么它会很流畅，用户不会注意到）
*   当需要重新启用时，使用设备策略管理器对象的 resetPassword("", 0) 将密码重置为 ""。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-02T05:34:59.047

您只需要 SYSTEM_UI_FLAG_IMMERSIVE_STICKY | 的组合 SYSTEM_UI_FLAG_HIDE_NAVIGATION | SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN。例如，如果您使用 opengl 并且 glSurfaceView 是您的表面：

```
glSurfaceView.setSystemUiVisibility(
                View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY |
                View.SYSTEM_UI_FLAG_HIDE_NAVIGATION |
                View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN); 
```

在底部滑动以查看底部栏，它会在几秒钟后再次隐藏。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-11T08:04:27.707

```
var width = innerWidth;

var height = innerHeight; 
```

我认为这段代码对你有帮助。它不会隐藏平板电脑栏，但你的应用程序适合你可以使用的任何设备（我在 javascript 中使用了这段代码用于 cord ova 移动应用程序）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T18:00:22.293

我相信所有的安卓设备都是一样的。

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                     WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

I also found another solution but this of course is just a separate app called surelock.

[http://onkarsingh.sys-con.com/node/2184158](http://onkarsingh.sys-con.com/node/2184158)

EDIT:

The above code doesn't hide the Tablet Bar. I'll leave my answer up for those looking to hide the System Bar in another Android Device.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-27T06:09:53.297

你不能隐藏它，但你可以简单地禁用它，除了家。试试[这个链接。](https://stackoverflow.com/questions/14801928/is-it-possible-to-hide-the-system-bar/15652646#15652646). 使用 SYSTEM_UI_FLAG_LOW_PROFILE 您可以使系统栏变暗，并使用`onWindowFocusChanged()`可以获取焦点并折叠它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-17T14:21:17.580

[根据三星的开发人员指南，](http://developer.samsung.com/android/technical-docs/Neat-tricks-when-implementing-a-kiosk-app)我在 Galaxy 选项卡上发现了一个技巧，可将其用作信息亭

您可以要求您的应用程序通过锁定系统并要求返回按钮返回到您的应用程序的开始活动/视图。我为一个网络视图应用程序做了这个

```
 @Override
    public void onBackPressed() {
        //here asking to go back to home page
        mWebView.loadUrl(mHomepageUrl);
    } 
```

在 onCreate 方法上要求从锁定系统中起床：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED); 
```

然后当你点击两次电源按钮时，你又找到了你的应用程序，状态栏上只有后退按钮是活动的

所以唯一的方法是重启平板电脑（这样你就可以使用带有密码的经典锁系统来打开平板电脑）

如果访客无法使用电源按钮，或者您是唯一拥有解锁码的人，这可能会很有用

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-11-28T12:01:55.127

// 将代码放在活动/片段的 onCreate 方法上

```
@Override
        @SuppressLint("NewApi")
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            getSupportActionBar().hide();
            setContentView(R.layout.activity_main);

              getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);
        } 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-03-10T07:19:36.523

为了在 android 中创建 Kiosk 应用程序，您需要以下内容： - 覆盖 onkeydown

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode==KeyEvent.KEYCODE_BACK || keyCode==KeyEvent.KEYCODE_HOME){

        startActivity(new Intent(this,MainActivity.class));
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

然后将您的活动设置为启动器活动以覆盖主页按钮。（在清单中）

```
<intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

不需要要求一百万个权限的奇怪的储物柜应用程序。你不必root你的手机。

# java - Java：从配置文件中读取并根据值有效地执行测试

> ID：11958036
> 
> 赞同：0
> 
> 时间：2012-08-14T17:57:56.190
> 
> 标签：java, data-structures, mapping

好的，我确定我不会以最有效的方式解决这个问题，我正在寻求一些关于如何更有效地做到这一点的帮助......

*   config.txt 文件包含键/值对，其中 key = 测试名称和 value = 是否执行测试
*   解析配置文件并创建要运行的测试列表
*   运行这些测试

这是我目前的处理方式

*   通过在我的配置文件上传递给辅助函数 parseConfig、BufferedReader 来创建 ArrayList。parseConfig 返回一个 TreeSet ，我在 ArrayList 的构造方法中使用它
*   parseConfig 迭代配置文件中的文本行。如果 value 指示执行测试，则将测试名称添加到 TreeSet。返回树集。
*   使用增强的 for 循环遍历 ArrayList。增强的for循环体基本上是一个长的if/else语句...如果key.equals（“thisTest”），执行thisTest，否则如果key.equals（thatTest），执行thatTest...等

这是我真的不喜欢的最后一部分。它工作得很好，但似乎笨拙且效率低下。由于我的 ArrayList 是使用 TreeSet 构造的，因此它是按排序顺序排列的。我想使用一种更优雅和确定性的方法将我的键映射到要执行的测试。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:15:31.870

我会做其他事情，因为你需要对这个列表做的就是测试它的条目。

我会一行一行地对其应用正则表达式，据我所知，这将非常简单，只有两个组和一个积极的前瞻，这样我就可以只提取所有匹配的行并创建一个 ArrayList那些，然后迭代 ArrayList 并测试每个方法。如果您可以就文件的外观提供一些输入，我可以帮助您输入代码。

**更新**

例如，这是我提出的代码（可以在 5 分钟内改进）进行解析：

```
 /**
 * 
 * @param inputFile location of inputFile
 * @return {@link ImmutableSet} of tests to run
 */
public static ImmutableSet<String> parseConfigFile(File inputFile){
    HashSet<String> innerSet = Sets.newHashSet();
    BufferedReader bufferedReader = null;
    try {
        bufferedReader = new BufferedReader(new FileReader(inputFile));
        String newLine = "";
        while( (newLine = bufferedReader.readLine()) != null){
            Pattern p = Pattern.compile("(.+)=(?=yes|1|true)(.+)");
            Matcher m = p.matcher(newLine);

            while(m.find()){
                //System.out.println(m.group(1));
                innerSet.add(m.group(1));
            }
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if(bufferedReader != null)
            try {
                bufferedReader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
    }

    return ImmutableSet.copyOf(innerSet);
} 
```

我测试了一个看起来像这样的文件，例如：

```
 SomeTest=true
  SomeOtherTest=false
  YetAnotherTest=1
  LastTest=yes
  GogoTest=no
  OneMore=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:10:58.750

答案是创建一个`HashMap <String, Method>`对象。

# objective-c - 将 UIImage（或 JPEG）绘制到 EAGLView

> ID：11958037
> 
> 赞同：2
> 
> 时间：2012-08-14T17:57:58.460
> 
> 标签：objective-c, ios, opengl-es, uiimageview, eaglview

我正在制作 PDF 注释器，当您切换页面时，它必须重绘所有先前绘制的 OpenGL 内容（以 JSON 格式保存到文件中）。问题是绘制的内容越多，需要的时间就越长。我为每个页面都保存了一个 UIImage 到磁盘，所以我希望通过将 UIImage 一次性绘制到 EAGLContext 上来加快这个过程。

我想知道如何获取 UIImage（或 JPEG/PNG 文件）并将其直接绘制到屏幕上。它必须在 EAGLView 上的原因是因为它需要支持橡皮擦，而使用常规的 UIKit 方式将无法使用它。

我认为有某种方法可以将画笔设置为整个图像，然后在屏幕上标记一次。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:50:08.983

作为一个迂腐的注释，[没有名为 EAGLView 的标准类](https://stackoverflow.com/questions/8412302/whats-the-difference-between-glkview-and-eaglview/8438138#8438138)，但我假设您指的是 Apple 的承载 OpenGL ES 内容的示例 UIView 子类之一。

这样做的第一步是将 UIImage 加载到纹理中。以下是我在图像处理框架中使用的一些代码（`newImageSource`是输入 UIImage）：

```
CGSize pointSizeOfImage = [newImageSource size];
CGFloat scaleOfImage = [newImageSource scale];
pixelSizeOfImage = CGSizeMake(scaleOfImage * pointSizeOfImage.width, scaleOfImage * pointSizeOfImage.height);
CGSize pixelSizeToUseForTexture = pixelSizeOfImage;

BOOL shouldRedrawUsingCoreGraphics = YES;

// For now, deal with images larger than the maximum texture size by resizing to be within that limit
CGSize scaledImageSizeToFitOnGPU = [GPUImageOpenGLESContext sizeThatFitsWithinATextureForSize:pixelSizeOfImage];
if (!CGSizeEqualToSize(scaledImageSizeToFitOnGPU, pixelSizeOfImage))
{
    pixelSizeOfImage = scaledImageSizeToFitOnGPU;
    pixelSizeToUseForTexture = pixelSizeOfImage;
    shouldRedrawUsingCoreGraphics = YES;
}

if (self.shouldSmoothlyScaleOutput)
{
    // In order to use mipmaps, you need to provide power-of-two textures, so convert to the next largest power of two and stretch to fill
    CGFloat powerClosestToWidth = ceil(log2(pixelSizeOfImage.width));
    CGFloat powerClosestToHeight = ceil(log2(pixelSizeOfImage.height));

    pixelSizeToUseForTexture = CGSizeMake(pow(2.0, powerClosestToWidth), pow(2.0, powerClosestToHeight));

    shouldRedrawUsingCoreGraphics = YES;
}

GLubyte *imageData = NULL;
CFDataRef dataFromImageDataProvider;

if (shouldRedrawUsingCoreGraphics)
{
    // For resized image, redraw
    imageData = (GLubyte *) calloc(1, (int)pixelSizeToUseForTexture.width * (int)pixelSizeToUseForTexture.height * 4);

    CGColorSpaceRef genericRGBColorspace = CGColorSpaceCreateDeviceRGB();    
    CGContextRef imageContext = CGBitmapContextCreate(imageData, (int)pixelSizeToUseForTexture.width, (int)pixelSizeToUseForTexture.height, 8, (int)pixelSizeToUseForTexture.width * 4, genericRGBColorspace,  kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGContextDrawImage(imageContext, CGRectMake(0.0, 0.0, pixelSizeToUseForTexture.width, pixelSizeToUseForTexture.height), [newImageSource CGImage]);
    CGContextRelease(imageContext);
    CGColorSpaceRelease(genericRGBColorspace);
}
else
{
    // Access the raw image bytes directly
    dataFromImageDataProvider = CGDataProviderCopyData(CGImageGetDataProvider([newImageSource CGImage]));
    imageData = (GLubyte *)CFDataGetBytePtr(dataFromImageDataProvider);
}    

glBindTexture(GL_TEXTURE_2D, outputTexture);
if (self.shouldSmoothlyScaleOutput)
{
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
}
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (int)pixelSizeToUseForTexture.width, (int)pixelSizeToUseForTexture.height, 0, GL_BGRA, GL_UNSIGNED_BYTE, imageData);

if (self.shouldSmoothlyScaleOutput)
{
    glGenerateMipmap(GL_TEXTURE_2D);
}

if (shouldRedrawUsingCoreGraphics)
{
    free(imageData);
}
else
{
    CFRelease(dataFromImageDataProvider);
} 
```

如您所见，它具有一些用于调整超出设备最大纹理大小的图像大小的功能（上面代码中的类方法仅查询最大纹理大小），以及是否生成mipmap的布尔标志用于更平滑下采样的纹理。如果您不关心这些情况，可以将其删除。这也是 OpenGL ES 2.0 代码，因此`OES`您可能需要将一两个后缀添加到上面的某些函数中，以便它们与 1.1 一起使用。

在纹理中拥有 UIImage 后，您可以使用带纹理的四边形（两个三角形组成一个矩形，角具有适当的纹理坐标）将其绘制到屏幕上。OpenGL ES 1.1 和 2.0 之间的操作方式会有所不同。对于 2.0，您使用直通着色器程序，该程序仅从纹理中的该位置读取颜色并将其绘制到屏幕上；对于 1.1，您只需为几何体设置纹理坐标并绘制两个三角形。

我在[这个答案](https://stackoverflow.com/questions/4036737/how-to-draw-a-texture-as-a-2d-background-in-opengl-es-2-0/4227878#4227878)中有一些 OpenGL ES 2.0 代码。

# git - ssh 密钥和 github 提示输入密码

> ID：11958041
> 
> 赞同：1
> 
> 时间：2012-08-14T17:58:08.290
> 
> 标签：git, github, ssh-keys

我在主目录的 .ssh 文件夹中生成了 ssh 密钥，并且可以毫无问题地从 github 推送和拉取。

现在我有一台新电脑，我压缩并将我的 .ssh 文件夹复制到新电脑上。

所以现在新Mac上的设置应该是一样的。但是，当我向 github 推送、拉取、获取数据时，系统会提示我输入用户名和密码。

它与我的旧 Mac 上的 .ssh 文件夹相同，并且该计算机工作正常。为什么我的新电脑每次安装密钥都会提示我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:02:16.290

好的，事实证明，当我在新机器上克隆存储库时，不知何故，源被设置为使用 https 版本而不是 git@github.com:reponame url。一旦我解决了这个问题，它就不再提示我了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:18:39.120

正如您所说，网址必须是 ssh+git 才能使您的 ssh 密钥生效。但是，不要在机器之间复制私钥。这是一个非常糟糕的做法。在另一台机器上生成一组新密钥并将公钥上传到 git hub。这就是 GitHub 和其他启用 ssh 的网站支持多个密钥的原因。用那个。

# ios - 如何在 SplitViewController 中使用自定义左窗格推送视图

> ID：11958043
> 
> 赞同：1
> 
> 时间：2012-08-14T17:58:14.477
> 
> 标签：ios, uisplitviewcontroller

我的应用程序有一个 splitview 控制器，当在详细视图中选择一个单元格时，我想推送一个替换左右窗格的视图。

下面的代码仅将右窗格替换为自定义视图。

```
SecondViewController *secondView = [[SecondViewController alloc]
    initWithNibName:NSStringFromClass([SecondViewController class])
    bundle:nil];

[[self navigationController] pushViewController:secondView animated:YES]; 
```

我想在左窗格中加载另一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:13:51.763

您将要替换 splitviewcontroller 视图。您在那里所做的是推动您所在的任何导航控制器，我假设是您的详细信息或拆分视图控制器的导航端。

像这样的东西会蛮力它，但你必须改变它，你需要更多：

AppDelegate *myDelegate = [[UIApplication sharedApplication] 委托];

[myDelegate.splitViewController.view addSubView secondView.view];

或者尝试替换应用程序委托 rootViewcontroller

myDelegate.window.rootViewController = secondView;

这一切都假设您具有正确的属性，但是您必须考虑一种解决方案，该解决方案不仅将视图控制器推送到上述代码片段中的任何 self 上。我希望这会有所帮助

# c# - 使用 当新版本不存在时到新版本的程序集

> ID：11958045
> 
> 赞同：3
> 
> 时间：2012-08-14T17:58:20.000
> 
> 标签：c#, .net, web-config, assemblybinding

在某些客户端具有版本 11 而不是版本 10 的情况下，我使用 bindingRedirect 将 TFS 程序集从版本 10 重定向到版本 11。该应用程序是使用 TFS v10 DLL 编译的。

```
<dependentAssembly>
    <assemblyIdentity name="Microsoft.TeamFoundation.Common" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-10.65535.65535.65535" newVersion="11.0.0.0" />
</dependentAssembly> 
```

问题是，如果客户端具有 TFS 版本 11 而不是 TFS 版本 10，则重定向可以正常工作。如果客户端具有 TFS v10 而不是 TFS v11，则它们会收到运行时错误：

> 无法加载文件或程序集，:microsoft.TeamFoundation.Common, Version=11.0.0.0, ... 等等。

如果版本 11 不可用，应用程序不应该回退到使用 DLL 的 v10 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:04:12.840

> 如果版本 11 不可用，应用程序不应该回退到使用 dll 的 v10 吗？？？

不，因为您在配置文件中指示了绑定重定向。

# java - 这种奇怪的 Java 行为的原因是什么？

> ID：11958051
> 
> 赞同：6
> 
> 时间：2012-08-14T17:58:35.657
> 
> 标签：java, jvm, bytecode

我想在`Long`s 上测试 '==' 运算符，这就是我发现的：以下代码：

```
public static void main(final String[] args) {
    final Long n = 0L;
    final Long m = 0L;
    System.out.println(n + " == " + m + " : " + (n == m));

    final Long a = 127L;
    final Long b = 127L;
    System.out.println(a + " == " + b + " : " + (a == b));

    final Long A = 128L;
    final Long B = 128L;
    System.out.println(A + " == " + B + " : " + (A == B));

    final Long x = -128L;
    final Long y = -128L;
    System.out.println(x + " == " + y + " : " + (x == y));

    final Long X = -129L;
    final Long Y = -129L;
    System.out.println(X + " == " + Y + " : " + (X == Y));
} 
```

输出：

```
0 == 0 : true
127 == 127 : true
128 == 128 : false
-128 == -128 : true
-129 == -129 : false 
```

我能想到的唯一解释是 JVM 将所有`long`值存储`[-128, 127]`在 Perm 空间中，并将它们的地址提供给`Long`s 和上述范围之外的所有内容，它为代码中遇到的每个静态值创建一个新的分配。

我接近正确了吗？在什么情况下我们必须意识到类似的行为？

PS。我知道我应该使用`null`检查然后`.equals()`比较对象，但我很好奇是否有人知道答案。

**编辑**

在**jtahlborn**的回答谁给了我关键字**自动装箱**之后，我发现这篇很棒的文章有详细的[**答案**](http://www.javablogging.com/autoboxing-pitfalls-when-comparing-numbers-with/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T17:59:45.987

这是自动装箱的结果。请参阅[Long.valueOf()](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#valueOf%28long%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:08:04.707

`Long`对从 -128 到 127 的值有一个内部缓存。如果您在此间隔内`Long`通过`Long.valueOf(long)`方法或自动装箱创建，您总是会收到相同的对象以获得相等的值。这就是为什么 '==' 在您的示例中适用于 0、127 和 -128。

如果您在 [-128, 127] 之外创建，那么如果对象`Long`总是会创建新实例。`Long`这就是为什么 '==' 不适用于 128 和 -129。

看看`Long.valueOf(long)`源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:00:08.877

`-128 to +127``==`如果您是，将使用运算符评估为真`comparing object references`。Long 值（从 -128 到 +127）被放入缓存并多次返回，而`new Long`每次都会生成更高和更低的数字。

这也适用于原始包装类`Integer, Float`。试试整数和浮点数。

# regex - 简单的 perl 正则表达式搜索替换脚本

> ID：11958052
> 
> 赞同：2
> 
> 时间：2012-08-14T17:58:36.673
> 
> 标签：regex, perl

我`sed`可以这样做：

```
#!/bin/sed -f

s/pattern/replacement/g 
```

perl 中上述最简单的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:42:04.907

```
#!/usr/bin/env perl

while (my $m = <>) {
    $m =~ s/pattern/replacement/g;
    print $m;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:00:48.623

在 perl 中它只是

```
#!/usr/bin/perl -nw    

s/pattern/replacement/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:01:03.307

这将是 ：

```
my $str = "fred";
$str =~ s/f/g/g; 
```

# google-app-engine - Appengine - 从 db.Model 转换为 ndb.Model？

> ID：11958055
> 
> 赞同：2
> 
> 时间：2012-08-14T17:58:46.270
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我有一堆定义为 db.Model 的数据，我想将其转换为 ndb.Model。

我尝试从 db 更改为 ndb，如下所示：

```
class Temp(db.Model):
  temperature = db.FloatProperty() 

class Temp(ndb.Model):
  temperature = ndb.FloatProperty() 
```

问题是我可以使用 temp 的 ndb 定义查询旧值（db-values）。但是当我已经拥有具有相同型号名称的数据库值时，我似乎无法存储 ndb 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:10:16.090

您是否收到任何具体错误？

在这个[线程](https://groups.google.com/forum/#!topic/appengine-ndb-discuss/ar8ZIzGkF84%5B1-25%5D)中解释说

> 您甚至可以拥有两个版本的应用程序，一个使用 db，一个使用 ndb，在数据存储区中读取和写入相同的实体。

另请查看此[备忘单](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/edit?ndplr=1&pli=1)（也在线程中引用）以将一个 db 应用程序转换为 ndb 应用程序。

# c# - 为什么我可以将不兼容的 lambda 分配给 Action？

> ID：11958056
> 
> 赞同：2
> 
> 时间：2012-08-14T17:58:50.323
> 
> 标签：c#, lambda, action

我对为什么会这样感到困惑：

```
Action myAction1 = () => myIntFunc(); 
...
private Int32 myIntFunc() {
    return(4);
    } 
```

我希望编译器不允许这样做，因为 Action 表示不返回参数的函数，但 myIntFunc 清楚地返回一个参数。

作为进一步的证据，请注意这不起作用：

```
Action myAction2 = myIntFunc; 
```

所以这就像是 lambda 语法让我摆脱了一些我不应该摆脱的东西。我猜我忽略了与 Actions 和 lambdas 如何协同工作有关的事情......？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:01:19.670

我认为它与您执行此操作时相同：

```
myIntFunc(); 
```

忽略方法的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:08:43.333

您正在尝试做的事情是明确允许的。根据[`Action`](http://msdn.microsoft.com/en-us/library/system.action.aspx)委托的 MSDN 文档（强调添加）：

> 封装的方法必须没有参数，也没有返回值。（在 C# 中，该方法必须返回 void。[…]**它也可以是返回被忽略的值的方法。**）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:21:46.937

在[C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)第 6.5 段中，其中一个项目符号说：*如果 D 具有 void 返回类型并且 F 的主体是表达式，则当 F 的每个参数被赋予 D 中相应参数的类型时，主体F 是允许作为语句表达式（第 8.6 节）的有效表达式（wrt §7）。*

所以在这种情况下扔掉返回值是可以的。

对于方法组转换，请参阅第 6.6 段。然后方法必须兼容，**包括**返回类型。

所以匿名方法（lambda）和普通（命名）方法（或方法组）是有区别的。

# emacs - emacs - 将十进制值添加到数字列

> ID：11958057
> 
> 赞同：1
> 
> 时间：2012-08-14T17:58:57.797
> 
> 标签：emacs, macros

我正在使用一些具有以下结构的 nastran 输入文件：

```
GRID,1,,0.000,0.000,0.000,0
GRID,2,,0,000,1.653,0.000,0 
```

我想做的是向单个列添加特定值，例如，将 1.653 添加到第 4 列并获得：

```
GRID,1,,0.000,1.653,0.000,0
GRID,2,,0,000,3.306,0.000,0 
```

我找到了一些示例来展示如何对[整数](https://stackoverflow.com/questions/2686593/emacs-adding-1-to-every-number-made-of-2-digits-inside-a-marked-region)执行此操作，但似乎无法使其适用于我上面概述的示例。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:16:14.593

使用链接问题中的答案可以通过这样的替换来完成，例如：

`C-M-%`

`^\([^,]*,[^,]*,[^,]*,[^,]*,\)\([^,]*\)\(.*\)`

`return`

`\,(concat \1 (number-to-string (+ 1.653 (string-to-number \2))) \3)`

请注意，在您的示例中，第二行的列（逗号）比第一行多。可能是笔误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:50:36.557

分别作为命令

```
(defun raise-column ()
  (interactive "*")
  (save-excursion
    (save-restriction
      (widen)
      (goto-char (point-min))
      (while (re-search-forward "^\\([^,]*,[^,]*,[^,]*,[^,]*,\\)\\([^,]*\\)\\(.*\\)" nil t 1)
        (replace-match (concat (match-string-no-properties 1) (number-to-string (+ 1.653 (string-to-number (match-string-no-properties 2)))) (match-string-no-properties 3))))))) 
```

# jquery - jQuery-UI 对话框内的多个 jQuery-UI 选项卡中的 jqGrids 导致页面的水平滚动条出现

> ID：11958063
> 
> 赞同：1
> 
> 时间：2012-08-14T17:59:11.620
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jqgrid, internet-explorer-8

我有一个简单的搜索表单，它启动一个 jQuery UI 对话框，其中包含 5 个 jQuery UI 选项卡，每个选项卡都包含自己的 jqgrid。删除呈现网格的 javascript 会导致滚动条消失。更改网格的宽度没有效果。

正如您从屏幕截图中看到的那样，出现水平滚动条，这会导致出现垂直滚动条。

我正在使用 jquery 1.7.2、jqueryui 1.8.22、jqgrid 4.4.0 和 Internet Explorer 8.0

![呸呸呸](../Images/93d8ba3828f69034bde8b8621d5144fb.png)

我像这样通过ajax加载对话框

```
 function LoadDialog(id) {
        $('#myPopup').dialog({
            height: 800,
            width: 1100,
            autoOpen: false,
            open: function (event, ui) {
                $('#myPopup').html('');
                $.ajax(
                    '<%: Url.Action("loadDetails") %>/' + id,
                    {
                        success: function (data) {
                            $('#myPopup').html(data);
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            DisplayMessage(textStatus, errorThrown);
                        }
                    }
                );
            }
        });
        $('#myPopup').dialog('open');
    } 
```

loadDetails 操作方法返回此视图

```
<div id="contentWrapper">
    <div id="details"></div>
    <div id="tabs">
        <ul>
            <li><%: Html.ActionLink("tab1") %></li>
            <li><%: Html.ActionLink("tab2") %></li>
            <li><%: Html.ActionLink("tab3") %></li>
            <li><%: Html.ActionLink("tab4") %></li>
            <li><%: Html.ActionLink("tab5") %></li>
    </div>
<div> 
```

有了这个脚本

```
<script type="text/javascript">
$('#tabs').tabs({
    cache: true,
    ajaxOptions: {
        cache: true
    }
});
</script> 
```

每个选项卡为 jqgrid 加载一个表格和一个 div，并使用适当的 javascript 加载网格，它们的宽度设置为 1000px。

```
<table id="gridtableX'></table><div id="griddivX"></div>
<script type="text/javascript">
$('#gridtableX').jqGrid({
    url: '/Home/GetGridData/1234',
    datatype: 'json',
    height: 320,
    colNames: ['Col1','Col2','Col3','Col4'],
    colModel: [
        {name:'Col1',width:30,sortable:false},
        {name:'Col2',width:40,sortable:false}, 
        {name:'Col3',width:40,sortable:false}, 
        {name:'Col4',width:40,sortable:false}],
    rowNum:4,
    width:1000,
    scrollOffset:0,
    hidegrid: false,
    viewrecords: true,
    hoverrows: false,
    beforeSelectRow: function(rowid, e){ return false; },
    pager: '#griddivX'}).navGrid('#griddivX',{edit:false,add:false,del:false});
</script> 
```

我目前正在研究一个简单的示例，但这需要一段时间。如果有人以前遇到过这种情况，请告诉我。这是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:34:19.237

这是一个有趣的问题！您能否发布可用于检查问题的 URL？

我想，问题的原因可能是jqGrid 4.4.0 中引入的[cellWidth函数。](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L184-191)只是为了测试，您可以修改代码`cellWidth`并包含该行

```
if ($.browser.msie) { return false; } 
```

代码开头的某处`cellWidth`。在这种情况下，不会创建具有 10000px 的 div `left:10000px`。或者，您可以尝试使用 来修改`left:10000px`或`left:-10000px`进行一些其他实验。另外，我建议您阅读作为功能引入起源的[答案](https://stackoverflow.com/a/10621951/315935)`cellWidth`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:51:01.430

感谢奥列格的回答，我能够解决这个问题。为了便于维护，我在我的项目中添加了一个新的 javascript 文件，并将其包含在我之后`jquery.jgGrid.js`

```
$.jgrid.cellWidth = function () {
    var $testDiv = $("<div class='ui-jqgrid' style='position:absolute;left:-1000px;top:-1000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),
    testCell = $testDiv.appendTo("body")
        .find("td")
        .width();
    $testDiv.remove();
    return 5 !== testCell;
} 
```

# c++ - map 或 hashmap 用于有效查找通用字符串？

> ID：11958065
> 
> 赞同：2
> 
> 时间：2012-08-14T17:59:28.050
> 
> 标签：c++, string, hash, dictionary, unordered-set

我需要能够存储和查找通用字符串。我对字符串的内容不太了解，2/3 多一点是人类语言单词，其余的则更接近 UUID 或数字/字母组合。我知道任何特定的分组都是不变的（即，如果它有一些人类词，它将是所有人类词，如果它有一些 UUID，则所有内容都是 UUID 等）。

我需要决定是否应该将这些数据放在地图或哈希图中以获得最佳平均查找率。我倾向于使用 O(log n) 运行时说 map，因为当我对字符串的输入格式知之甚少时，我不相信我可以为字符串进行适当的有效散列。关于哪个会更好的任何想法？

编辑：我忘记了一个关键方面。我不知道字符串的长度，因此担心长字符串的内存使用量可能会增长过大。如果我使用散列方法，我会做一些事情，在 X 个字符之后，散列不会在每个字符的基础上散列，以避免内存消耗太大。

我真正想要的是一个哈希映射实现，它将“桶”中的多个值按有序的manaer排序，因此它可以提供桶的（log N）搜索；但我不认为 Stardrd C++ 中存在它，也不值得从头开始编写。

pps。数据接近静态。我偶尔会不得不将它添加到列表中，这很罕见，我愿意接受缓慢的写入时间。我只关心查找时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:04:02.993

很难提出单一的建议。这取决于几个权衡（迭代类型、内存与查找）。在整个过程中，我假设您可以使用 C++11 编译器（或等效的 Boost 或 TR1 库）。

如果**插入/查找**时间对您来说最重要，我肯定会使用`std::unordered_set`（参见[参考](http://en.cppreference.com/w/cpp/container/unordered_set)）和`std::hash<std::string>`（参见[参考](http://en.cppreference.com/w/cpp/string/basic_string/hash)）。[插入](http://en.cppreference.com/w/cpp/container/unordered_set/insert)和[查找](http://en.cppreference.com/w/cpp/container/unordered_set/find)都是`O(1)`平均的（摊销常数）。如果

请注意，无序散列容器不允许您按排序顺序进行迭代。所以如果你想要排序迭代，那么你可以使用有序容器`std::set<std::string>`，但你付出的代价是`O(log N)`查找/插入。

**内存限制**更难分析。`std::set`首先，有序容器`std::map`需要每个元素开销大约**3 个单词**来维护允许有序迭代的树结构。然而，无序散列容器具有一些**备用容量**，因为散列容器在满载因子下运行非常差。

```
#include <iostream>
#include <functional>
#include <string>
#include <unordered_set> // or <set> for ordered lookup

int main()
{
    // or std::set<std::string> for ordered lookup
    std::unordered_set<std::string> dictionary; 

    std::string str = "Meet the new boss...";
    dictionary.insert(str);
    auto it = dictionary.find(str);

    std::cout << *it << '\n';
} 
```

在[Ideone](http://ideone.com/qhfko)上输出。如果您还想`Value`与 一起存储`std::string`，则可以使用`std::unordered_map<std::string, Value>`, 或`std::map<std::string, Value>`具有相同的哈希函数。

**结论**：最好根据上述权衡取舍来衡量最适合您的应用程序的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:07:59.110

除了 std::set、std::map、std::unordered_set 和 std::unordered_map - 我还会考虑研究**Tries**以查看它们是否更适合：

[http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T05:46:49.397

[Cedar](http://www.tkl.iis.u-tokyo.ac.jp/~ynaga/cedar/#perf)、[HAT-Trie](https://github.com/luikore/hat-trie)和[JudyArray非常棒，你可以在](https://github.com/mpictor/judy-template)[这里](http://kokizzu.blogspot.com/2015/02/string-associative-array-benchmark.html)找到基准。

![基准测试结果](../Images/2f943a3160ac181af235f0e54d43e746.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:16:26.967

您可能想看看基准： http: [//www.dotnetperls.com/sorteddictionary](http://www.dotnetperls.com/sorteddictionary) 它出现在实际应用程序中，尽管发生冲突 字典比 SortedDictionary 更好。

# jquery - jquery：用映射项目点击匹配项目

> ID：11958066
> 
> 赞同：2
> 
> 时间：2012-08-14T17:59:34.850
> 
> 标签：jquery, map

这是我想做的事情：

我有一堆像这样的href：

```
<a href='javascript:void(0);' class='popup'>Word</a>....more stuff....<a href='javascript:void(0);' class='popup'>Another Word</a>... 
```

所以在我的代码中我有：

```
$('.popup').live('click', function() {

    var selectedPopUp = $(this);

    //get all the popups 
var popupList = $('.popup');

   $.map(popuplist, function(thisPopUp, i) {

       if (selectedPopUp == thisPopUp) { 
          //do something
       }

   });

}); 
```

我以为我可以通过这种方式匹配对象，但是当我记录它们时，这就是我得到的：

selectedPopup : [a.popupObj #]

这个弹出窗口：`<a class="popupObj" href="#">`

我这样做是因为我需要 selectedPopup 的索引 # 因为有一个对象包含所有这些用于显示弹出窗口的属性。显然我在这里以错误的方式进行，有人可以纠正我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:04:52.103

您似乎正在尝试将一个 HTML 元素与一组相关的数据或至少一个 id 进行匹配。这是使用该`rel`属性的好时机：

所以你的单词链接看起来像这样：

```
<a rel="1" href="#" class="popup">Word</a> 
```

（顺便说一句，不要使用`href='javascript:void(0);'`-- 只`preventDefault`在事件对象上使用，否则返回 false）

现在，您的处理程序如下所示：

```
$('.popup').on('click', function(e) {
    e.preventDefault();

    var selectedPopUp = $(this).attr('rel');

    // code follows
}); 
```

此外，您可以使用以下`data`属性：

```
<a href="#" data-title="My popup title" data-content="Blah blah blah!" class="popup">Word</a> 
```

然后你的处理程序看起来像这样：

```
$('.popup').on('click', function(e) {
    e.preventDefault();

    var title = $(this).data('title');
    var content = $(this).data('content');

    alert(title+"\n"+content);
}); 
```

试试看：http: [//jsfiddle.net/x4YmG/](http://jsfiddle.net/x4YmG/)

另请注意，您应该开始使用该`on`方法来绑定事件，而不是`live`. 从 jQuery 1.7 开始，该`live`方法已被弃用。

**相关文档**

*   jQuery `data`- [http://api.jquery.com/data/](http://api.jquery.com/data/)
*   jQuery `live`（已弃用）- [http://api.jquery.com/live/](http://api.jquery.com/live/)
*   jQuery `on`（绑定事件的新方法） - [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:15:57.157

这里有几件事..

`map`通常用于将函数应用于集合中的所有元素

例如，

```
a = [1,2,3,4]
$.map(a, function(e, i) {
  return e + 1;
});
# => [2,3,4,5] 
```

相反，您正在寻找的是`each`它允许您迭代元素集合。

```
a = [1,2,3,4]
$.each(a, function(e, i) {
  if(e % 2 == 0) {
    console.log(e);
  }
});
# => 2
# => 4 
```

您收到错误的原因是因为`selectedPopUp = $(this)`.

这意味着您将 DOM 元素 ( `thisPopUp`) 与 jQuery 选择器 ( `$(this)`) 进行比较。

这是一个带有工作示例的 JSFiddle：http: [//jsfiddle.net/28D3h/2/](http://jsfiddle.net/28D3h/2/)

最后，出于好奇——你到底需要做什么才能从列表中选择元素？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:36:17.113

如果组件具有正确的逻辑，您可以尝试使用 jquery [index()](http://api.jquery.com/index/)函数获取锚点的索引，然后将其与函数的`i`索引进行比较`.map()`。

```
$('body').on('click','.popup', function() {

   var selectedPopUp = $(this);

   //get all the popups 
   var popupList = $('.popup');
   $.map(popupList, function(thisPopUp, i) {
      console.log(thisPopUp + ' = ' + selectedPopUp.index() + ' y i = ' + i);

      if (selectedPopUp.index() == i) { 
         alert('you selected me!')
      }
   });
});​ 
```

这是一个工作[示例。](http://jsfiddle.net/S2Psk/16/)

# highcharts - Highcharts JSON 加载问题

> ID：11958067
> 
> 赞同：0
> 
> 时间：2012-08-14T17:59:42.880
> 
> 标签：highcharts

我有一个示例 Highchart，我试图在没有任何运气的情况下加载 JSON 数据。我在萤火虫中看到数据返回，但没有绘制图表条和线。[你可以在这里jsfiddle.net](http://jsfiddle.net/bphamous/S8GX5/14/)看到我的图表。我知道我错过了一些东西，但我似乎无法将手指放在它上面。任何帮助将不胜感激，在此先感谢您。

这是我的代码：

```
$(function() {
var options = {
    chart: {
        renderTo: 'container',
        zoomType: 'xy'
    },
    title: {
        text: 'JSON Chart'
    },
    subtitle: {
        text: '2012 vs 2011'
    },
    credits: false,
    xAxis: [{
        categories:['1','2','3','4','5','6','7','8','9','10']
    }],
    yAxis: [{ // Primary yAxis
        min: 0,
        max: 15000,
        tickInterval: 1000,
    labels: {
        formatter: function() {
            return Highcharts.numberFormat(this.value, 0);
        },
        style: {
        color: '#89A54E'
        }
    },
    title: {
        text: '2012',
        style: {
            color: '#89A54E'
        }
    }
    }, { // Secondary yAxis
        min: 0,
        max: 15000,
        tickInterval: 1000,
    labels: {
        formatter: function() {
           return Highcharts.numberFormat(this.value, 0);
        },
        style: {
            color: '#4572A7'
        }
    },
    title: {
        text: '2011',
        style: {
            color: '#4572A7'
        }
    },                        
    opposite: true
    }],
    tooltip: {
        formatter: function() {
           return Highcharts.numberFormat(this.y, 0);
        }
    },
    legend: {
        layout: 'vertical',
        align: 'left',
        x: 80,
        verticalAlign: 'top',
        y: 40,
        floating: true,
        backgroundColor: '#FFFFFF'
    },
    series: [{
        name: '2011',
        type: 'column',
        yAxis: 1,
        data: []        
    }, {
        name: '2012',
        type: 'spline',
        data: []
       }]
     };
});
$.getJSON('data.cfm', function(json) {
options.series = json;               
var chart = new Highcharts.Chart(options);
}) 
```

这是 data.cfm 返回的内容：

```
[[9233,14837,11442,8080,10302,5373,2450,9612,18656,8999],[7963,7845,8646,5130,2570,8936,17487,9141,6728,6046]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:42:11.463

不应该吗？

```
 options.series[0].data=json[0];
    options.series[1].data=json[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:12:04.353

这可能有用： http: [//livecoding.gabrielflor.it/3351656](http://livecoding.gabrielflor.it/3351656)

# views - ember.js 添加子视图

> ID：11958071
> 
> 赞同：0
> 
> 时间：2012-08-14T18:00:07.407
> 
> 标签：views, ember.js

我有以下代码片段：

```
App.TripLegView = Em.View.extend({
     transportMeanType: null,
     transportMeanTypeChanged: function  () {
          this.carView = App.CarView.create();
          var childView = this.createChildView(this.carView );
          this.get('childViews').pushObject(childView);
     }
}).observes('transportMeanType'),

App.CarView = Em.View.extend(); 
```

但是，当我调试上面的代码时，子视图似乎没有添加到 childViews 数组中。

谁能解释如何正确添加子视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:10:11.427

首先，您似乎在滥用`observes()`，它应该在函数上定义。如果你想操作子视图，我认为你应该使用[Ember.ContainerView](http://docs.emberjs.com/#doc=Ember.ContainerView&src=false)

您的代码将是这样的：

```
App.CarView = Em.View.extend();

App.TripLegView = Em.ContainerView.extend({
  transportMeanType: null,

  transportMeanTypeChanged: function  () {
    this.carView = App.CarView.create();
    var childView = this.createChildView(this.carView );
    this.get('childViews').pushObject(childView);
  }.observes('transportMeanType')
}); 
```

如果它不起作用，请发布一个 jsfiddle 来举例。

# javascript - 使用 javascript 提交表单

> ID：11958076
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:00:42.827
> 
> 标签：javascript, forms, javascript-events

过去两天我一直在与 javascript 中邪恶的 onbeforeunload 函数作斗争。我有一个功能可以在用户即将关闭页面时发出警告。但是，在页面关闭之前，我想使用 javascripts .submit() 提交表单。

这是我的代码

```
function setPopUpWindow(submitForm){
window.onbeforeunload = function () {
    if (submitForm == false ) {
    //alert("It worked");   --This code gets called so I know it works  
    document.getElementById("CancelScripting").submit();
    //return "Unsaved Data would be lost";
    }

} 
```

}

在我的 html 中，我有两个按钮，一个是（应该）触发 .submit() ，另一个将忽略它。

```
<body>
 <form action=tett.html id="popUpForm" method=POST>
<script>setPopUpWindow();</script>
<input type="submit" id="submit_button" onclick="setPopUpWindow(true);">
<input class=b1 type=submit id="CancelScripting"  style="visibility:hidden"  value="CancelScripting" >
</body> 
```

未定义第二个输入的 setPopWindow 值，因此它将为 false 出于某种原因，提交无法正常工作。

----------------------编辑我的问题---------- ------------------------- 即使用户通过关闭窗口上的“X”按钮离开页面，我也想提交表单。这就是我有隐藏按钮的原因......看起来人们误解了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:11:28.563

你唯一能做的就是询问用户是否真的想离开页面：

```
<head>
    <script type="text/javascript">
        var submitForm = false;
        window.onbeforeunload = function () {
            if(submitForm == false){
                return 'You have an unfinished form ...';
            }
        }
        function setPopUpWindow(type){
            submitForm = true;
        }
    </script>
</head>
<body>
   <form action="" method="post" name="SubmitForm" id="SubmitForm">
      <input type="submit" id="submit_button" onclick="setPopUpWindow(true);">
   </form>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:11:51.997

我认为您要做的是通过执行以下操作来提交表单而不是按钮：

```
document.forms["formId"].submit(); 
```

`formId`表单的 id 在哪里。

此外，我在您的代码中看不到表单所在的任何位置，但您的按钮应该位于表单标签内。

例如，它应该如下所示：

```
<body>
<script>setPopUpWindow();</script>
<form id="formId" action="" method="post">
    <input type="submit" id="submit_button" onclick="setPopUpWindow(true);">
    <input class=b1 type=submit id="CancelScripting"  style="visibility:hidden" value="CancelScripting" >
</form>
</body> 
```

# iphone - 有没有办法自定义 UITableViewCell 的 backgroundView 的大小？

> ID：11958081
> 
> 赞同：1
> 
> 时间：2012-08-14T18:01:08.027
> 
> 标签：iphone, ios, uitableview

我正在尝试将自定义背景视图分配给 UITableViewCell。该表已分组。

我有点像开拓者，所以我尝试使用 300 像素宽的图像，而不是使用背景视图的典型宽度 302 像素。

这是我的代码：

```
- (void)tableView:(UITableView*)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    // a 300 pixel wide image
    UIImage *backgroundImage = [UIImage imageNamed:@"tableViewCellBackgroundTop"];
    UIImageView *theBackgroundView = [[UIImageView alloc] initWithImage:backgroundImage];
    theBackgroundView.frame = CGRectMake(10, 0, 300, 49);
    cell.backgroundView = theBackgroundView;
} 
```

如果我在模拟器中运行它并使用 xScope 进行测量，则单元格仍然看起来是 302 像素宽。是什么赋予了？是否需要设置一些其他属性以使框架尊重我分配给背景视图的框架，或者表格视图单元格不打算以这种方式自定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:19:04.450

您可以创建一个`UIView`实例并为其创建`theBackgroundView`一个子视图，然后设置`cell.backgroundView`为创建的视图：

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(10, 0, 300, 49)];
[view addSubview:theBackgroundView];
cell.backgroundView = view; 
```

# r - 构建 R 包时的 cygwin 警告

> ID：11958083
> 
> 赞同：2
> 
> 时间：2012-08-14T18:01:13.867
> 
> 标签：r, package

我正在尝试使用 Windows 构建自己的包。我安装了我需要的一切，并且运行`R CMD build mypackage`并且`R CMD INSTALL mypackage`似乎运行良好。但是，当我运行`build`命令时，我收到了来自 cygwin 的警告：

```
cygwin warning:
  MS-DOS style path detected: C:/Documents and Settings/e_sander/My Documents/mypackage_1.0.tar.gz
  Preferred POSIX equivalent is: /cygdrive/c/Documents and Settings/e_sander/My Documents/mypackage_1.0.tar.gz
  CYGWIN environment variable option "nodosfilewarning"turns off this warning. Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames 
```

我确实去了推荐的网站，但我对 cygwin 或 linux 了解不多，所以我不确定我需要做些什么。我意识到在 cygwin 中不推荐使用 MS-DOS 样式路径并且不推荐使用，但我不确定如何更改它，因为我正在运行 Windows，这就是我需要的路径。我也没有注意到我的包有任何问题，至少当我将它安装到我的计算机时（虽然我没有使用 tarball，但我已经打开它并且一切看起来都很好）。所以这就是我想要弄清楚的：

*   原样离开路径会以任何方式影响我的包裹吗？

*   如果是这样，它如何对我的包裹产生不利影响？

*   如何更改路径以使 cygwin 快乐？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T18:05:20.027

这只是一个警告，它告诉您如何禁用它。它不影响任何事情。如果你想让它消失，从你的 shell 运行它：

```
export CYGWIN="nodosfilewarning" 
```

或者您可以安装`C:`到`/c/`（参见 参考资料`man mount`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:18:42.960

*   原样离开路径会以任何方式影响我的包裹吗？
    - 不，这只是一个警告。

*   如果是这样，它如何对我的包裹产生不利影响？
    - 不适用

*   如何更改路径以使 cygwin 快乐？
    - 将环境变量设置为输出状态。有多种方法可以做到这一点；我选择了一个解决方案，该解决方案通过使用[“快速环境编辑器”](http://www.rapidee.com/en/about)程序添加一个带有 value的`User Variable`命名来处理解析或从 windows 环境继承的任何调用环境中的问题。但是，如果您愿意，可以使用 . 通过控制面板添加它。`CYGWIN``nodosfilewarning``Add environment variables for your account`

# symfony-2.1 - 疑难解答“require_once(../bootstrap.php.cache)：打开流失败：没有这样的文件或目录”

> ID：11958091
> 
> 赞同：41
> 
> 时间：2012-08-14T18:01:36.377
> 
> 标签：symfony-2.1

我正在尝试重新部署我一直在从事的 Symfony 2.1x 项目，`app_dev.php`但由于找不到`app/bootstrap.php.cache`. 由于我使用了 Symfony2 的推荐文件，因此在项目的 git 存储库中省略了该`.gitignore`文件：

```
# .gitignore
/app/bootstrap* 
```

我认为`app/bootstrap.php.cache`在此过程中产生的想法是否正确`$ php composer.phar install`？如果是这种情况，那么我将为您包括我的`composer.json`：

```
// composer.json
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": "2.2.*",
        "doctrine/doctrine-bundle": "dev-master",
        "twig/extensions": "dev-master",
        "symfony/assetic-bundle": "dev-master",
        "symfony/swiftmailer-bundle": "dev-master",
        "symfony/monolog-bundle": "dev-master",
        "sensio/distribution-bundle": "dev-master",
        "sensio/framework-extra-bundle": "dev-master",
        "sensio/generator-bundle": "dev-master",
        "jms/security-extra-bundle": "1.1.*",
        "jms/di-extra-bundle": "1.0.*",
        "ddeboer/guzzle-bundle": "dev-master",
        "mopa/bootstrap-bundle": "dev-master",
        "twitter/bootstrap": "master",
        "knplabs/knp-paginator-bundle": "dev-master",
        "knplabs/knp-menu-bundle": "dev-master",
        "craue/formflow-bundle": "dev-master"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "version": "master",
                "name": "twitter/bootstrap",
                "source": {
                    "url": "https://github.com/twitter/bootstrap.git",
                    "type": "git",
                    "reference": "master"
                },
                "dist": {
                    "url": "https://github.com/twitter/bootstrap/zipball/master",
                    "type": "zip"
                }
            }
        }
    ],
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-install-cmd": [
            "Mopa\\Bundle\\BootstrapBundle\\Composer\\ScriptHandler::postInstallSymlinkTwitterBootstrap"
        ],
        "post-update-cmd": [
            "Mopa\\Bundle\\BootstrapBundle\\Composer\\ScriptHandler::postInstallSymlinkTwitterBootstrap"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

我怎样才能生成`bootstrap.php.cache`？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-10T18:46:02.850

只需转到您的项目并使用作曲家生成它

```
php /path/to/composer/composer.phar install 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-05T14:01:02.983

只需运行以下命令。

```
php composer.phar install 
```

**来源：** [http ://symfony.com/doc/master/book/performance.html#use-bootstrap-files](http://symfony.com/doc/master/book/performance.html#use-bootstrap-files)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T20:33:22.273

您已经复制了`post-install-cmd`，`post-updated-cmd`虽然您应该将 MopaBootstrapBundle 脚本添加到现有密钥。尝试以下 composer.json 并重新运行`php composer.phar install`

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": "2.2.*",
        "doctrine/doctrine-bundle": "dev-master",
        "twig/extensions": "dev-master",
        "symfony/assetic-bundle": "dev-master",
        "symfony/swiftmailer-bundle": "dev-master",
        "symfony/monolog-bundle": "dev-master",
        "sensio/distribution-bundle": "dev-master",
        "sensio/framework-extra-bundle": "dev-master",
        "sensio/generator-bundle": "dev-master",
        "jms/security-extra-bundle": "1.1.*",
        "jms/di-extra-bundle": "1.0.*",
        "ddeboer/guzzle-bundle": "dev-master",
        "mopa/bootstrap-bundle": "dev-master",
        "twitter/bootstrap": "master",
        "knplabs/knp-paginator-bundle": "dev-master",
        "knplabs/knp-menu-bundle": "dev-master",
        "craue/formflow-bundle": "dev-master"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "version": "master",
                "name": "twitter/bootstrap",
                "source": {
                    "url": "https://github.com/twitter/bootstrap.git",
                    "type": "git",
                    "reference": "master"
                },
                "dist": {
                    "url": "https://github.com/twitter/bootstrap/zipball/master",
                    "type": "zip"
                }
            }
        }
    ],
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile",
            "Mopa\\Bundle\\BootstrapBundle\\Composer\\ScriptHandler::postInstallSymlinkTwitterBootstrap"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile",
            "Mopa\\Bundle\\BootstrapBundle\\Composer\\ScriptHandler::postInstallSymlinkTwitterBootstrap"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-26T08:10:12.640

就我而言，我的作曲家版本是 2.x，所需的版本是 1.x 所以，首先我需要降级到版本 1，然后我运行 composer install

```
sudo composer self-update --1 && composer install -v --prefer-dist 
```

# linux - 为什么堆栈必须是页面对齐的？

> ID：11958092
> 
> 赞同：4
> 
> 时间：2012-08-14T18:01:36.867
> 
> 标签：linux, stack, kernel, aslr

在 Linux 中，我尝试（只是为了好玩）修改 process.c 中的内核源代码，创建一个具有更多熵的堆栈地址，即特别是以下行：

```
sp -= get_random_int() % 8192; 
```

当我改变太多时，内核会停止，或者我会得到一些看似未定义的行为。我猜这会导致 PAGE_ALIGN() 以某种方式失败？我对 PAGE_ALIGN() 为何特别失败，或者内核中究竟是哪一段代码失败（尽管也很高兴知道）不感兴趣；我对堆栈为什么必须驻留在特定区域更感兴趣。这背后的架构原因和动机是什么？这是否与 GDT/LDT 在保护模式下的工作方式有关？

只是为了弄清楚我在问什么：

为什么堆栈必须具有 0xbfXXXXXX 形式（在 32 位上）？为什么堆栈不能是例如 0xaaXXXXXX 或任何其他值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:13:53.117

`do_page_fault()`在它认为这是一个错误的访问之前，你可以在堆栈 vma 之外有多远是有限制的，也许你正在打那个？

# jquery - jquery：.css 与追加到头部之间的速度差异？

> ID：11958098
> 
> 赞同：1
> 
> 时间：2012-08-14T18:02:04.067
> 
> 标签：jquery, css

我们为内部应用程序提供了一些笨拙的解决方法，我想知道哪种 jQuery/css 技术被认为更快/更有效......等等。

**使用 .css**的技术 A****

 **```
$( "#doc" ).css( "margin-top", "90px" );
$( "#checkouthelp" ).css( "margin", "50px 50px 0 0" );

$( "#changelanguage" ).css( "float", "right" )
                      .css( "margin", "0 50px 0 0" ); 
```

**技术 B** .append to head

```
$("<style>")
    .prop("type", "text/css")
    .html("\
    #doc {\
        margin-top:90px;\
    }\
    #checkouthelp {\
        margin:50px 50px 0 0;\
    }\
    #changelanguage {\
        float:right;\
        margin:0 50px 0 0;\
    }")
  .appendTo("head"); 
```

这是开始时规模较小且相对无害的项目之一，但已发展成为一种相当臃肿的解决方法。**链接到场外 css 文件或直接更改 css 规则是否更快，就像我在这里所做的那样。**速度是关键问题，上述示例只是不断增长的杂物的一小部分。[值得庆幸的是，正在评估根本原因......但与此同时]。

谢谢！

**更新**

虽然我没有进行彻底的测试，但在我使用 Chrome 的开发人员工具完成的几次速度测试中，看起来从外部样式表加载规则的速度较慢。会做更多的测试，但我想我可能会坚持使用`.css`. 感谢您对这篇文章的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:28:32.330

异地CSS是要走的路。使用异地 css 浏览器只需要发出一个通常非常快的请求。

另一方面，每当您修改 css 元素时，浏览器必须重新解析整个 dom 树，这可能更昂贵。

另一个重要的问题是：

速度真的像你想象的那么重要吗？也许这些解决方案之间的差异是 45 毫秒，这几乎不是您应该关心的。您应该选择一种可以让您更快地编写代码并更好地维护代码的技术，这就是真正节省时间的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:25:05.010

我会通过 jQ 添加非语义类。如：'float-right'、'margin-right'。这对维护 imo 来说要干净得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:12:40.553

jQuery 的`.css`速度比将您提供的示例附加到头部要快。我创建了一个测试用例，在这里演示了这一点：http: [//jsperf.com/jquery-css-vs-append-to-head](http://jsperf.com/jquery-css-vs-append-to-head)

![在此处输入图像描述](../Images/efb572c01e218c40b1eedea9d8d0956a.png)

至于异地 CSS，它没有可比性，因为异地 CSS 速度取决于用户的互联网连接，以及您的服务器速度等。如果你有一个邪恶的服务器和宽带用户，我说异地会好得多，否则为了速度你只能可靠地依靠 javascript。**

# sql - sql server select内选择

> ID：11958105
> 
> 赞同：0
> 
> 时间：2012-08-14T18:02:27.017
> 
> 标签：sql, sql-server-2008-r2

说我有以下查询：

```
 select ID, ActualDate, DueDate
    from table1 
```

我需要做的是添加另一个名为 Flag 的字段，如果 ActualDate 大于 DueDate，它将被标记为“Y”

```
 select ID, ActualDate, DueDate,
     CASE  
      WHEN ActualDate > DueDate THEN 'Y' 
     ELSE 'N' 
      END as Flag 
     from table1 
```

当我得到无效的列名 ActualDate 时，上述内容将不起作用。无效的列名 DueDate。我需要做的是在这样的选择中进行选择：

```
 select ID, ActualDate, DueDate, 
    CASE  
     WHEN ActualDate > DueDate THEN 'Y' 
     ELSE 'N' 
    END as Flag  
    from
    (select ID, ActualDate, DueDate
     from table1) tbl1 
     ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:14:09.703

如果您的表中包含字段，则以下内容应该可以在不需要子查询的情况下工作：

```
select ID, 
    ActualDate, 
    DueDate,
    CASE  
        WHEN ActualDate > DueDate 
        THEN 'Y' 
        ELSE 'N' 
    END as Flag 
FROM table1 
```

您可以使用子查询，但这是不必要的：

```
select ID, 
    ActualDate, 
    DueDate, 
    CASE  
        WHEN ActualDate > DueDate 
        THEN 'Y' 
        ELSE 'N' 
    END as Flag  
FROM
(
    select ID, ActualDate, DueDate
    from table1
) tbl1 
```

# entity-framework - 在实体模型中为类型时间设置默认值

> ID：11958106
> 
> 赞同：0
> 
> 时间：2012-08-14T18:02:35.013
> 
> 标签：entity-framework, c#-4.0, time

我尝试了一些值，但没有任何效果。我可以随机尝试值（我做了一些）并尝试搜索（大约 30 分钟后什么都没有）或询问 SO 人。

因此，当我创建新记录时，尝试将默认时间设置为下午 5:30:00（17:30:00）。我认为我需要做的就是在属性中设置它，它看起来是正确的，但不喜欢我输入的值。17:00:00.0000000 和 17:00:00 和 17:00:00.0 都失败了。

看图片![注意右边默认并留下错误信息](../Images/b2f5f014bd644e0ac2974235e8383ce3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:53:15.347

尝试将时间设置为：

> 17:30:00.0000000z

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:32:23.363

```
17:30:00.0000000Z 
```

这对我来说适用于类型为 Time(7) 的数据库列。马克·奥雷塔（Mark Oreta）也工作过。当我省略 z 或 Z 时，我收到了同样的错误。你的表映射有问题吗？

# ios - 即使在 mergeChangesFromContextDidSaveNotification 之后停止 CoreData 缓存结果

> ID：11958107
> 
> 赞同：1
> 
> 时间：2012-08-14T18:02:40.470
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我在我的应用程序中广泛使用 CoreData 来查看产品。所有数据同步都在后台单独的 NSManagedObjectContexts 上完成，当更改同步完成时，我调用`mergeChangesFromContextDidSaveNotification`

这在 99% 的时间里都能完美运行。这是它崩溃的地方：

1.  我在我的应用程序中查看产品。
2.  我决定要更改价格，所以我转到我控制我的产品并更改价格的网络服务器。
3.  我回到我的应用程序，浏览该产品，然后我的应用程序同步在网络服务器上对我的应用程序所做的更改。
4.  我再次去看那个产品，价格没有改变。
5.  我完全退出应用程序并重新进入它，然后我可以看到价格变化。

我相信发生的事情是 CoreData 正在提供产品的缓存版本，而新版本直到应用程序重新启动后才提供，我查看了一堆其他项目。

`mergeChangesFromContextDidSaveNotification` 我被调用后如何清除此缓存 ？

这让我和我的客户发疯——有人知道我该如何补救这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:43:30.563

好吧，实际上可能有很多原因。Core Data 的一大优点是它的灵活性……这也是它的一大缺点。

您可以在数据库上设置大量与缓存和获取相关的旋钮。但是，最简单的方法之一是获取到数据库或只是到最近的 MOC。

也就是说，你应该看看这些：

```
- (BOOL)includesPendingChanges
- (BOOL)shouldRefreshRefetchedObjects 
```

此外，请确保您正确处理后台更新和 DidSave 通知，因为 MOC 应该已经合并了这些更改。

不幸的是，Core Data 在使用多个 MOC 时有一些，比如说，很难发现的交互。您必须非常小心地遵守所有规则。

# c# - 使用 AutoFixture 对使用 Castle Windsor 的应用程序进行集成测试的技术

> ID：11958110
> 
> 赞同：6
> 
> 时间：2012-08-14T18:02:48.717
> 
> 标签：c#, castle-windsor, integration-testing, autofixture

我是 AutoFixture 的新手，所以我不知道以下想法是否有意义或是否合理。我有一个我负责**集成测试**的应用程序，它大量使用了 Castle Windsor。为了简化依赖管理并使我的测试更像应用程序代码，我一直在我的测试初始化​​方法中构建 Windsor 容器，并使用 container.Resolve 来实例化我正在测试的代码。我想放弃这种方法，因为它在某些情况下限制了我的灵活性。

我想做的是进行如下所示的测试：

```
[Theory]
[Dependency]
public void TestWithDependencies(IThing thing)
{
    thing.Hello();
} 
```

为此，我可以执行以下操作：

```
public sealed class DependencyAttribute : AutoDataAttribute
{
    public DependencyAttribute()
        : base(new Fixture().Customize(new WindsorCustomization()))
    {
    }
}

public class WindsorCustomization : ICustomization
{
    public WindsorCustomization()
    {
        // build container here using SUT installers
    }

    public void Customize(IFixture fixture)
    {
        fixture.Inject<IThing>(new Thing());
    }
} 
```

这样做确实有效，但我想避免的是需要将每个接口复制到从 Windsor 容器到 AutoFixture IFixture 的实现映射。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T19:01:16.403

你应该能够做这样的事情：

```
public class WindsorCustomization : ICustomization
{
    private readonly IWindsorContainer container;

    public WindsorCustomization()
    {
        // build this.container here using SUT installers
    }

    public void Customize(IFixture fixture)
    {
        fixture.Customizations.Add(new WindsorAdapter(this.container));
    }
}

public WindsorAdapter : ISpecimenBuilder
{
    private readonly IWindsorContainer container;

    public WindsorAdapter(IWindsorContainer container)
    {
        this.container = container;
    }

    public object Create(object request, ISpecimenContext context)
    {
        var t = request as Type;
        if (t == null || !this.container.Kernel.HasComponent(t))
            return new NoSpecimen(request);

        return this.container.Resolve(t);                
    }
} 
```

WindsorAdapter 位于`Customizations`集合中，该集合在 AutoFixture 的责任树中相当早，因此它有机会处理每个（或大多数）传入请求。如果请求是 Type 实例并且 WindsorContainer 具有该类型的组件，则适配器将解析该类型的工作委托给容器。

否则，它会返回一个`NoSpecimen`实例，这基本上是 AutoFixture 发出此特定 ISpecimenBuilder 无法处理请求的信号的方式。AutoFixture 责任树中的一些其他组件然后有机会处理请求。

# class - 经典 ASP 中的连接类是否矫枉过正？

> ID：11958112
> 
> 赞同：0
> 
> 时间：2012-08-14T18:03:01.290
> 
> 标签：class, asp-classic

目前我被一些经典的 asp 文件所困扰，但我想整合一些代码。我发现了这个并想征求意见。这是矫枉过正吗？一个健壮的连接类会有用吗？我打算尽我所能创建关注点分离，我正在研究模型。由于我不能通过扩展继承（我可以找到），我想我只是在每个模型文件中包含这个类：

[http://www.sitepoint.com/forums/showthread.php?491770-Build-a-Database-Connections-Class-in-Classic-ASP](http://www.sitepoint.com/forums/showthread.php?491770-Build-a-Database-Connections-Class-in-Classic-ASP)

```
Class clsDatabaseConnections
    Private strConnection   ''# Connection string (change depending on what system we are using)
    Private objConn         ''# Connection object
    Private objComm         ''# Command Object
    Private objRS           ''# Recordset object

    Private Sub Class_Initialize()
        ''# What happens when the class is opened
        strConnection = "DRIVER={SQL Server}; ..........."

        Set objConn = Server.CreateObject("ADODB.Connection")
        objConn.ConnectionString = strConnection        
    End Sub

    Private Sub Class_Terminate()
        ''# What happens when the class is closed

        ''# Close connections
        If objConn.State <> 0 Then
            objConn.Close   
        End If
        Set objConn = Nothing
    End Sub         

    Public Sub SQLExecuteFromSQLString(ByRef strSQL)
        ''# Execute code and return nothing
        If objConn.State <> 0 Then
            objConn.Close
        End If  

        objConn.Execute strSQL      
    End Sub

    ''# This replicates the .NET ExecuteScalar
    Public Function ExecuteScalarFromSQLString(ByRef sSQL)
        ''# This is used when passing back single results. Replicating a .NET piece of functionality
        Dim objScalar
        Set objScalar = GetRecordSet(sSQL)

        If Not objScalar.EOF Then
            ExecuteScalar = objScalar(0)
        Else
            ''# Nothing returned
            ExecuteScalar = -1
        End If

        CloseRecordSet()
    End Function ''#ExecuteScalar

    Public Function GetRecordSetFromSQLString(ByRef strRS)
        If objConn.State <> 1 Then
            objConn.Open
        End If

        Set objRS = Server.CreateObject("ADODB.Recordset")
        objRS.Open strRS, objConn

        Set GetRecordSet = objRS
    End Function

    ''# Using SP code within class
    ''##########################################################################
    Public Sub CallSPNeedParams(ByRef strStoredProc)
        If objConn.State <> 1 Then
            objConn.Open
        End If

        If Not IsObject(objComm) Then
            Set objComm = Server.CreateObject("ADODB.Command") ''# This will be used for Stored Procedures
        End If

        With objComm
            .ActiveConnection = objConn
            .CommandText = strStoredProc
            .CommandType = adCmdStoredProc
        End With

        If Not IsObject(objRS) Then
            Set objRS = Server.CreateObject("ADODB.Recordset")
        End If

        Set objRS.ActiveConnection = objConn ''# Set connection
        Set objRS.Source = objComm  ''# Set source to use command object            
    End Sub

    Public Sub ApendParamsToRecordSet(ByRef Name, ByRef TypeParam, ByRef Direction, ByRef Size, ByRef Value)
        ''#Type adDate adDBDate, adVarChar, adChar, adBoolean
        If IsObject(objComm) Then
            objComm.Parameters.Append objComm.CreateParameter(Name, TypeParam, Direction, Size, Value)          
        End If
    End Sub

    Public Function GetRecordSetSPParams(ByRef strStoredProc)
        If strStoredProc = objComm.CommandText Then
            ''# This is being called for the right SP
            objRS.Open
            Set GetRecordSetSPParams = objRS

            ''# Need to clear out params from Command object
            Do While (objComm.Parameters.Count > 0)
                objComm.Parameters.Delete 0
            Loop

        End If
    End Function

    Public Sub CloseCommObject()
        If IsObject(objComm) Then
            Set objComm = Nothing
        End If
    End Sub
    ''##########################################################################

    Public Function ExecuteScalarSetSPParams(ByRef strStoredProc)
        ''# This is used when passing back single results. Replicating a .NET piece of functionality
        If strStoredProc = objComm.CommandText Then     
            objRS.Open
            If Not objRS.EOF Then
                ExecuteScalar = objRS(0)
            Else
                ''# Nothing returned
                ExecuteScalar = -1
            End If

            CloseRecordSet()
        End If
    End Function ''#ExecuteScalar               

    Public Sub ExecuteSPButNoRecordsReturned(ByRef strStoredProc)
        If strStoredProc = objComm.CommandText Then
            objComm.Execute
        End If
    End Sub ''#ExecuteSPButNoRecordsReturned()

    Public Sub CloseRecordSet() 
        If objRS.State <> 0 Then
            objRS.Close 
        End If

        Set objRS = Nothing
    End Sub

    Public Property Get ObjectConn()
        ObjectConn = objConn
    End Property    

    Public Property Let SwitchConnection(ByRef strConn)
        ''# Will allow user to change the connection from the default set up    
        strConnection = strConn
        Call SwitchConnection(strConnection)
    End Property

    Private Sub SwitchConnection(ByRef strConn)
        ''# Will allow user to change the connection from the default set up    
        strConnection = strConn
        If objConn.State <> adStateClosed Then
            objConn.ConnectionString = strConnection
        End If
    End Sub

End Class ''#clsDatabaseConnections 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:57:41.027

简单的答案？这取决于。

如果您只有几个文件可以包含和使用这样的类，我会说创建这样的类并重构包含文件的努力不太可能。

如果您有一个大型库或一组库，您认为它们需要很长时间才能过时/替换，那就去吧。

过去，我为大型数据相关的 ASP 库创建了类似的（尽管不是那么健壮）类，将它们放置在文件夹层次结构中，这样它们就可以被许多应用程序使用。

除了简单之外，我看到这样做的最大好处是能够确保您的连接和其他资源被正确关闭/管理......您不想激怒 DBA ;？）

# c# - 字符串解析 C# 创建段？

> ID：11958113
> 
> 赞同：2
> 
> 时间：2012-08-14T18:03:02.080
> 
> 标签：c#

我有一个形式为：

```
"company=ABCorp, location=New York, revenue=10million, type=informationTechnology" 
```

我希望能够解析出这个字符串并以以下形式获取“名称”、“值”对

公司 = ABCCorp

位置=纽约等

这可以是任何合适的数据结构来存储。我在想也许是一个`Dictionary<string, string>()`，但我愿意接受建议。

在 C# 中是否有合适的方法来执行此操作？

编辑：我的最终目标是拥有这样的东西：

数组[公司] = ABCCorp。数组[位置] = 纽约。

我们可以使用什么数据结构来实现上述目标？我的第一个想法是字典，但我不确定我是否遗漏了什么。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:12:36.083

使用[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)和[ToDictionary](http://msdn.microsoft.com/en-us/library/bb548657.aspx)，您可以：

```
var original = "company=ABCorp, location=New York, revenue=10million, type=informationTechnology";

var split = original.Split(',').Select(s => s.Trim().Split('='));

Dictionary<string,string> results = split.ToDictionary(s => s[0], s => s[1]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:11:01.420

```
string s = "company=ABCorp, location=New York, revenue=10million, type=informationTechnology";
var pairs = s.Split(',')
        .Select(x => x.Split('='))
        .ToDictionary(x => x[0], x => x[1]); 
```

对是带有键值对的字典。唯一需要注意的是，您可能需要处理逗号和字符串之间的任何空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T18:07:52.520

这在很大程度上取决于预期的语法。一种方法是使用 String.Split： http: [//msdn.microsoft.com/en-us/library/system.string.split (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.string.split(v=vs.110).aspx)

首先按逗号拆分，然后遍历返回的字符串列表中的所有项目，然后按相等拆分这些项目。

但是，这要求值中永远不存在逗号和相等？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T18:09:53.353

我假设 RegEx/LINQ 背景较弱，所以这是一种没有任何“特殊”的方法。

```
string text = "company=ABCorp, location=New York, revenue=10million, type=informationTechnology";

string[] pairs = text.Split(',');
Dictionary<string, string> dictData = new Dictionary<string, string>();

foreach (string currPair in pairs)
{
    string[] data = currPair.Trim().Split('=');

    dictData.Add(data[0], data[1]);
} 
```

这要求逗号 ( `,`) 和等号 ( `=`) 除了作为分隔符之外永远不会存在于数据中。

这在很大程度上依赖于[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split%28v=vs.110%29.aspx)。

# c# - 如何将 IEnumerable 的 IEnumerable 中的所有元素连接在一起？

> ID：11958116
> 
> 赞同：8
> 
> 时间：2012-08-14T18:03:18.687
> 
> 标签：c#, .net, linq, ienumerable

以防万一您想知道这是如何产生的，我正在使用来自 Entity Framework 的一些结果集。

我有一个对象是`IEnumerable<IEnumerable<string>>`; 基本上，一个字符串列表的列表。

我想将所有字符串列表合并到一个大字符串列表中。

在 C#.net 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T18:05:07.037

使用 LINQ SelectMany 方法：

```
IEnumerable<IEnumerable<string>> myOuterList = // some IEnumerable<IEnumerable<string>>...
IEnumerable<String> allMyStrings = myOuterList.SelectMany(sl => sl); 
```

要非常清楚这里发生了什么（因为我讨厌人们认为这是某种巫术，我为其他人删除相同的答案而感到难过）：

[SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)是一个[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)（通过语法糖看起来像特定类型的实例方法的静态方法）`IEnumerable<T>`。它需要您原始的枚举枚举和一个将其中的每个项目转换为枚举的函数。

因为这些项目*已经*是枚举，所以转换函数很简单——只需返回输入（`sl => sl`意思是“取一个命名的参数`sl`并返回它”）。SelectMany 然后依次提供对这些中的每一个的枚举，从而产生您的“扁平化”列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:23:25.377

使用`Concat`方法：

```
firstEnumerable.Concat(secondEnumerable) 
```

使用`SelectMany`将强制对您不需要的两个枚举的每个元素进行额外评估。

# php - UTF-8 有效文件名的正则表达式

> ID：11958117
> 
> 赞同：6
> 
> 时间：2012-08-14T18:03:19.897
> 
> 标签：php, file-upload, utf-8, filenames, sanitization

我正在尝试处理我的用户上传的文件的名称。我想支持所有有效的 UTF-8 字符，除了那些可能在 HTML 网页上显示、通过 CLI 界面访问或在文件系统上存储和检索可能造成问题的字符。

无论如何，我想出了以下宽松的功能，我想知道它是否足够安全以供使用。我对所有数据库查询都使用准备好的语句，并且我总是对我的输出进行 html 编码，但我仍然想知道这也是一个*经过深思熟虑的*方法。

```
// $filename = $_FILES['file']['name'];

$filename = 'Filename 123;".\'"."la\l[a]*(/.jpg
∮ E⋅da = Q,  n → ∞, ∑ f(i) = ∏ g(i), ∀x∈ℝ: ⌈x⌉ = −⌊−x⌋, α ∧ ¬β = ¬(¬α ∨ β),
  ℕ ⊆ ℕ₀ ⊂ ℤ ⊂ ℚ ⊂ ℝ ⊂ ℂ, ⊥ < a ≠ b ≡ c ≤ d ≪ ⊤ ⇒ (A ⇔ B),
  2H₂ + O₂ ⇌ 2H₂O, R = 4.7 kΩ, ⌀ 200 mm
sfajs,-=[];\',./09μετράει
าวนั้นเป็นชน
Καλημέρα κόσμε, コンニチハ
()_+{}|":?><';

// Replace symbols, punctuation, and ASCII control characters like \n or [BEL]
$filename = preg_replace('~[\p{S}\p{P}\p{C}]+~u', ' ', $filename); 
```

**这种方法对我来说安全吗？适合我的用户吗？**

### 更新

为了澄清，我不使用文件名作为文件系统上的文件名。我生成一个唯一的哈希并使用它 - 我只需要为用户保存原始名称，因为这是他们识别文件的方式。SHA1 哈希或 UUID 对他们来说并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:28:47.057

您需要做的第一件事是检查您的输入**是**UTF-8。

[mb_internal_encoding](http://us2.php.net/manual/en/function.mb-internal-encoding.php)和[mb_check_encoding](http://us2.php.net/manual/en/function.mb-check-encoding.php)是你的朋友。

当使用允许输入的白名单是一种良好的安全实践时，您正在使用黑名单。

**澄清后编辑**：

你应该是安全的。如果您不想召唤[Zalgo](http://www.eeemo.net/)`Lm`，请记住进行过滤。`No`

# command-line - 编写 Windows azure 命令行实用程序脚本

> ID：11958119
> 
> 赞同：0
> 
> 时间：2012-08-14T18:03:28.450
> 
> 标签：command-line, azure

有一个基于 java 的服务器组件负责远程管理亚马逊虚拟机。我需要为此组件编写一个 azure 适配器。我认为我最好使用基于 node.js 的命令行实用程序进行 azure 管理。

我想知道从 c#/java 调用脚本然后处理输出的方法，以便我可以将输出传递给调用服务器组件。

例如，创建新虚拟机的指令会将实例 ID 返回给调用方法。基本上我需要将逻辑编写到适配器方法中。

任何方向都会有很大帮助。

-沙拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:22:29.657

根据您选择的技术，您有几种选择：

*   使用 System.Management.Automation 程序集，您可以在 C#/.NET 应用程序中调用任何 PowerShell 脚本
*   在 Java 中，您可以调用运行 PowerShell 脚本的批处理文件（您可以在其中调用 Azure cmdlet）。MSDN 论坛上有[一个有趣的讨论。](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/d32537bd-0aef-440e-8760-6b3085390c37/)
*   为什么不使用服务管理 API？这是一个[REST API](http://msdn.microsoft.com/en-us/library/windowsazure/jj157194)，可以从 .NET、Java、Node、...

# python - 关于 Python 中的导入的一些混淆

> ID：11958121
> 
> 赞同：6
> 
> 时间：2012-08-14T18:03:30.403
> 
> 标签：python, import, module

我是 Python 新手，有一些事情困扰了我很长一段时间。我在 Mark Lutz 的“Learning Python”中读到，当我们使用`from`语句导入模块中存在的名称时，它首先导入模块，然后为其分配一个新名称（即函数、类等的名称）。存在于导入的模块中），然后使用该`del`语句删除模块对象。但是，如果我尝试使用`from`引用导入的模块中的名称来导入名称，而该名称本身并未导入，会发生什么情况？考虑以下示例，其中有两个模块`mod1.py`和`mod2.py`：

```
#mod1.py
from mod2 import test
test('mod1.py')        

#mod2.py
def countLines(name):
    print len(open(name).readlines())

def countChars(name):
    print len(open(name).read())

def test(name):
    print 'loading...'
    countLines(name)
    countChars(name)
    print '-'*10 
```

现在看看当我运行或导入 mod1 时会发生什么：

```
>>>import mod1

loading...
3
44
---------- 
```

这里当我导入并运行`test`函数时，虽然我没有导入`countChars`or `countLines`，但它运行成功，并且`from`语句已经删除了`mod2`模块对象。

所以我基本上需要知道为什么这段代码可以工作，即使考虑到我提到的问题它不应该。

编辑：非常感谢所有回答的人:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:13:12.643

每个函数都有一个`__globals__`属性，该属性保存了它搜索全局变量和函数的环境的引用。

然后将该`test`函数链接到 的全局变量`mod2`。因此，当它调用`countLines`解释器时，即使您在导入函数的模块中编写了一个具有相同名称的新函数，解释器也总能找到正确的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T18:07:40.447

我认为您正在与 python 处理的方式搏斗`namespaces`。当您键入时，`from module import thing`您将`thing`带入`module`您当前的命名空间。因此，在您的示例中，当`mod1`被导入时，代码按以下顺序进行评估：

```
from mod2 import test #Import mod2, bring test function into current module namespace
test("mod1.py")  #run the test function (defined in mod2) 
```

现在对于 mod2：

```
#create a new function named 'test' in the current (mod2) namespace 
#the first time this module is imported.  Note that this function has
#access to the entire namespace where it is defined (mod2).
def test(name):  
    print 'loading...'
    countLines(name)
    countChars(name)
    print '-'*10 
```

所有这一切都很重要的原因是因为 python 允许您准确地选择要拉入命名空间的内容。例如，假设您有一个`module1`which defined function `cool_func`。现在您正在编写另一个模块 ( `module2`)，并且它也使得 for`module2`也具有一个功能`cool_func`。Python 允许您将它们分开。在`module3`你可以这样做：

```
import module1
import module2
module1.cool_func()
module2.cool_func() 
```

或者，您可以这样做：

```
from module1 import cool_func
import module2 
cool_func() #module1
module2.cool_func() 
```

或者你可以这样做：

```
from module1 import cool_func as cool
from module2 import cool_func as cooler
cool()  #module1
cooler() #module2 
```

可能性继续...

希望我的观点很清楚。当你从一个模块中导入一个对象时，你是在选择你想如何在你当前的命名空间中引用那个对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T18:12:53.697

其他答案比这个更好，但是如果您运行以下命令，您可以看到`countChars`并且`countLines`实际上都定义在`test.__globals__`：

```
from pprint import pprint
from mod2 import test

pprint(test.__globals___)
test('mod1') 
```

您可以看到导入`test`带来了 中定义的其他全局变量`mod2`，让您运行该函数而不必担心必须导入您需要的所有内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T18:08:28.583

一条`import`语句将整个模块加载到内存中，这就是`test()`函数成功运行的原因。

但是当您使用`from`语句时，这就是为什么您不能直接使用`countLines`and`countChars`但`test`肯定可以调用它们的原因。

`from`语句基本上加载整个模块并将导入的函数、变量等设置为全局命名空间。

例如。

```
>>> from math import sin
>>> sin(90)               #now sin() is a global variable in the module and can be accesed directly
0.89399666360055785
>>> math
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    math
NameError: name 'math' is not defined
>>> vars()  #shows the current namespace, and there's sin() in it
{'__builtins__': <module '__builtin__' (built-in)>, '__file__': '/usr/bin/idle', '__package__': None, '__name__': '__main__', 'main': <function main at 0xb6ac702c>, 'sin': <built-in function sin>, '__doc__': None} 
```

考虑一个简单的文件 file.py：

```
def f1():
   print 2+2

def f2():
   f1() 
```

仅导入 f2：

```
>>> from file import f2
>>> f2()
4 
```

虽然我只导入了，`f2()`但`f1()`它运行`f1()`成功，这是因为模块已加载到内存中，但我们只能访问`f2()`，但`f2()`可以访问模块的其他部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T18:11:35.627

从[Python 命名空间指南](http://bytebaker.com/2008/07/30/python-namespaces/)，

> 尽管模块有自己的全局命名空间，但这并不意味着所有名称都可以在模块中的任何地方使用。范围是指程序的一个区域，可以从该区域访问命名空间而无需前缀。范围对于它们在模块中提供的隔离很重要。任何时候都有许多作用域在运行：你所在的当前函数的作用域、模块的作用域，然后是 Python 内置函数的作用域。这种范围的嵌套意味着一个函数不能访问另一个函数内的名称。
> 
> 名称空间也会从里到外搜索名称。这意味着如果在模块的全局命名空间中声明了某个名称，您可以在函数内部重用该名称，同时确保任何其他函数都将获得全局名称。当然，您可以通过在名称前加上“global”关键字来强制函数使用全局名称。但是如果你需要使用它，那么你最好使用类和对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T18:07:37.700

每个模块都有自己的范围。在 内`mod1`，您不能使用名称`countLines`或`countChars`（或`mod2`）。

`mod2`它本身不会受到它碰巧在其他地方进口的方式的影响；其中定义的所有名称都在模块中可用。

如果您引用的网页确实说该`del`语句删除了模块对象，那就错了。`del`只删除名称，不删除对象。

# android - 使用拖动排序列表视图 (DSLV) 时不会触发 setOnItemLongClickListener 和 setOnItemClickListener

> ID：11958125
> 
> 赞同：9
> 
> 时间：2012-08-14T18:03:51.280
> 
> 标签：android, listview, drag-and-drop, draggable, onitemclicklistener

我正在使用 Carl Bauer (https://github.com/bauerca/drag-sort-listview) 出色的拖动排序列表视图来实现启用拖动排序的列表视图。但是，我的要求是不需要列表上的拖动句柄，而是允许用户使用项目本身拖动列表项。

通过将@id/drag 属性设置为列表项本身，我已经完成了该部分的工作。但是，它具有不响应 itemClick 和 itemLongClick 事件的副作用。

有没有办法在没有单独的可拖动布局的情况下让项目点击/长按工作？

作为参考，我的代码如下所示 -

列表视图.xml：

```
<com.mobeta.android.dslv.DragSortListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:dslv="http://schemas.android.com/apk/res/com.myproject"
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    dslv:collapsed_height="1dp"
    dslv:drag_scroll_start="0.33"
    dslv:max_drag_scroll_speed="0.5" /> 
```

项目视图.xml：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="@dimen/list_item_height"
  android:orientation="horizontal">
  <CheckBox 
      android:id="@+id/check_box"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:gravity="center_vertical"/>
  <TextView
    android:id="@+id/drag"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:padding="@dimen/list_padding"
    android:gravity="center_vertical" />
</LinearLayout> 
```

活动.java：

```
 DragSortListView listView = (DragSortListView) view.findViewById(R.id.list);

    listView.setOnItemLongClickListener(new OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            Toast.makeText(arg0.getContext(), ((TextView)arg1).getText(), Toast.LENGTH_SHORT).show();
            return false;
        }
    });

    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> listView, View itemView, int index,
                long id) {
            Toast.makeText(getView().getContext(), ((TextView)itemView).getText(), Toast.LENGTH_SHORT).show();
        }
    }); 
```

作为奖励，如果有人可以帮助启用除单击/长按之外的多选，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T12:16:42.443

为了能够在列表中使用**OnItemClick**和**OnItemLongClick**，您需要将此参数设置为`com.mobeta.android.dslv.DragSortListView`布局。

```
dslv:drag_start_mode="onMove" 
```

# java - Hadoop 可写日期/日历

> ID：11958132
> 
> 赞同：1
> 
> 时间：2012-08-14T18:04:15.913
> 
> 标签：java, hadoop, mapreduce, writable

我正在寻找实现一个自定义 hadoop Writable 类，其中一个字段是时间戳。我似乎无法在 hadoop 库（例如，可写日期或日历）中找到可以简化此操作的类。我正在考虑在日历上使用 get/setTimeInMillis 创建自定义可写，但我想知道是否有更好/内置的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:11:25.157

Hadoop 中没有可写的日历/日期。考虑到您可以从 Calendar 对象中将 timeInMillis 作为 long 获取，当且仅当您的应用程序始终使用默认的 UTC 时区（即，它与时区“不可知”时，它始终假定您可以使用 LongWritable 序列化日历对象） timeInMillis 表示 UTC 时间）。

如果您使用另一个时区，或者如果您的应用程序需要能够根据不同的时区解释 timeInMillis，则必须从头开始编写默认的 Writable 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:15:14.727

这是我为您生成的自定义可写对象，用于说明具有三个属性的可写对象，其中一个是日期。您可以看到数据值以 long 形式保存，并且很容易将 long 与 Date 相互转换。如果拥有三个属性太多，我可以为您生成一个带有日期的可写文件。

```
package com.lmx.writable;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.DataInput;
import java.io.DataInputStream;
import java.io.DataOutput;
import java.io.DataOutputStream;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.util.*;
import com.eaio.uuid.UUID;
import org.apache.hadoop.io.*;
import org.apache.pig.ResourceSchema;
import org.apache.pig.ResourceSchema.ResourceFieldSchema;
import org.apache.pig.backend.executionengine.ExecException;
import org.apache.pig.data.DataBag;
import org.apache.pig.data.DataType;
import org.apache.pig.data.DefaultDataBag;
import org.apache.pig.data.Tuple;
import org.apache.pig.data.TupleFactory;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class MyCustomWritable implements Writable {

  public static int PROPERTY_DATE = 0;
  public static int PROPERTY_COUNT = 1;
  public static int PROPERTY_NAME = 2;

  private boolean[] changeFlag = new boolean[3];

  private Date  _date;
  private int   _count;
  private String    _name;

  public MyCustomWritable() {
    resetChangeFlags();
  }

  public MyCustomWritable(Date _date, int _count, String _name) {
    resetChangeFlags();
    setDate(_date);  
    setCount(_count);  
    setName(_name);  
  }

  public MyCustomWritable(byte[] bytes) {
    ByteArrayInputStream is = new ByteArrayInputStream(bytes);
    DataInput in = new DataInputStream(is);
    try { readFields(in); } catch (IOException e) { }
    resetChangeFlags();
  }

  public Date getDate() {
    return _date;
  }

  public void setDate(Date value) {
    _date = value;
    changeFlag[PROPERTY_DATE] = true;
  }  

  public int getCount() {
    return _count;
  }

  public void setCount(int value) {
    _count = value;
    changeFlag[PROPERTY_COUNT] = true;
  }  

  public String getName() {
    return _name;
  }

  public void setName(String value) {
    _name = value;
    changeFlag[PROPERTY_NAME] = true;
  }  

  public void readFields(DataInput in) throws IOException {

            // Read Date _date

        if (in.readBoolean()) {
            _date = new Date(in.readLong());
            changeFlag[PROPERTY_DATE] = true;
        } else {
            _date = null;
            changeFlag[PROPERTY_DATE] = false;
        }       
            // Read int _count

        _count = in.readInt();
        changeFlag[PROPERTY_COUNT] = true;

            // Read String _name

        if (in.readBoolean()) {
            _name = Text.readString(in);
            changeFlag[PROPERTY_NAME] = true;
        } else {
            _name = null;
            changeFlag[PROPERTY_NAME] = false;
        }
  }

  public void write(DataOutput out) throws IOException {

            // Write Date _date

      if (_date == null) {
            out.writeBoolean(false);
      } else {
            out.writeBoolean(true);
            out.writeLong(_date.getTime());
      }

            // Write int _count

      out.writeInt(_count);

            // Write String _name

      if (_name == null) {
            out.writeBoolean(false);
      } else {
            out.writeBoolean(true);
            Text.writeString(out,_name);
      }
  }

  public byte[] getBytes() throws IOException {
      ByteArrayOutputStream os = new ByteArrayOutputStream();
      DataOutputStream out = new DataOutputStream(os);
      write(out);
      out.flush();
      out.close();
      return os.toByteArray();
  }

  public void resetChangeFlags() {
    changeFlag[PROPERTY_DATE] = false;
    changeFlag[PROPERTY_COUNT] = false;
    changeFlag[PROPERTY_NAME] = false;
  }

  public boolean getChangeFlag(int i) {
    return changeFlag[i];
  }

   public byte[] getDateAsBytes() throws IOException {
      ByteArrayOutputStream os = new ByteArrayOutputStream();
      DataOutputStream out = new DataOutputStream(os);

            // Write Date _date

      if (_date == null) {
            out.writeBoolean(false);
      } else {
            out.writeBoolean(true);
            out.writeLong(_date.getTime());
      }

      out.flush();
      out.close();
      return os.toByteArray();
   }

   public byte[] getCountAsBytes() throws IOException {
      ByteArrayOutputStream os = new ByteArrayOutputStream();
      DataOutputStream out = new DataOutputStream(os);

            // Write int _count

      out.writeInt(_count);

      out.flush();
      out.close();
      return os.toByteArray();
   }

   public byte[] getNameAsBytes() throws IOException {
      ByteArrayOutputStream os = new ByteArrayOutputStream();
      DataOutputStream out = new DataOutputStream(os);

            // Write String _name

      if (_name == null) {
            out.writeBoolean(false);
      } else {
            out.writeBoolean(true);
            Text.writeString(out,_name);
      }

      out.flush();
      out.close();
      return os.toByteArray();
   }

   public void setDateFromBytes(byte[] b) throws IOException {
      ByteArrayInputStream is = new ByteArrayInputStream(b);
      DataInput in = new DataInputStream(is);
      int len;

            // Read Date _date

        if (in.readBoolean()) {
            _date = new Date(in.readLong());
            changeFlag[PROPERTY_DATE] = true;
        } else {
            _date = null;
            changeFlag[PROPERTY_DATE] = false;
        }
   }

   public void setCountFromBytes(byte[] b) throws IOException {
      ByteArrayInputStream is = new ByteArrayInputStream(b);
      DataInput in = new DataInputStream(is);
      int len;

            // Read int _count

        _count = in.readInt();
        changeFlag[PROPERTY_COUNT] = true;

   }

   public void setNameFromBytes(byte[] b) throws IOException {
      ByteArrayInputStream is = new ByteArrayInputStream(b);
      DataInput in = new DataInputStream(is);
      int len;

            // Read String _name

        if (in.readBoolean()) {
            _name = Text.readString(in);
            changeFlag[PROPERTY_NAME] = true;
        } else {
            _name = null;
            changeFlag[PROPERTY_NAME] = false;
        }

   }

    public Tuple asTuple() throws ExecException {

        Tuple tuple = TupleFactory.getInstance().newTuple(3);

        if (getDate() == null) {
            tuple.set(0, (Long) null);
        } else {
            tuple.set(0, new Long(getDate().getTime()));
        }
        tuple.set(1, new Integer(getCount()));
        if (getName() == null) {
            tuple.set(2, (String) null);
        } else {
            tuple.set(2, getName());
        }

        return tuple;
    }

    public static ResourceSchema getPigSchema() throws IOException {

        ResourceSchema schema = new ResourceSchema();
        ResourceFieldSchema fieldSchema[] = new ResourceFieldSchema[3];
        ResourceSchema bagSchema;
        ResourceFieldSchema bagField[];

        fieldSchema[0] = new ResourceFieldSchema();
        fieldSchema[0].setName("date");
        fieldSchema[0].setType(DataType.LONG);

        fieldSchema[1] = new ResourceFieldSchema();
        fieldSchema[1].setName("count");
        fieldSchema[1].setType(DataType.INTEGER);

        fieldSchema[2] = new ResourceFieldSchema();
        fieldSchema[2].setName("name");
        fieldSchema[2].setType(DataType.CHARARRAY);

        schema.setFields(fieldSchema);
        return schema;

    }

    public static MyCustomWritable fromJson(String source) {

        MyCustomWritable obj = null;

        try {
            JSONObject jsonObj = new JSONObject(source);
            obj = fromJson(jsonObj);
        } catch (JSONException e) {
            System.out.println(e.toString());
        }

        return obj; 
    }

    public static MyCustomWritable fromJson(JSONObject jsonObj) {

        MyCustomWritable obj = new MyCustomWritable();

        try {

            if (jsonObj.has("date")) {
                obj.setDate(new Date(jsonObj.getLong("date")));
            }

            if (jsonObj.has("count")) {
                obj.setCount(jsonObj.getInt("count"));
            }

            if (jsonObj.has("name")) {
                obj.setName(jsonObj.getString("name"));
            }

        } catch (JSONException e) {
            System.out.println(e.toString());
            obj = null;
        }

        return obj; 
    }

    public JSONObject toJson() {

        try {
            JSONObject jsonObj = new JSONObject();
            JSONArray jsonArray;

            if (getDate() != null) {
                jsonObj.put("date", getDate().getTime());
            }
            jsonObj.put("count", getCount());

            if (getName() != null) {
                jsonObj.put("name", getName());
            }
            return jsonObj; 
        } catch (JSONException e) { }

        return null;    
    }

    public String toJsonString() {

        return toJson().toString(); 

    }
} 
```

# iphone - 界面方向 iOS

> ID：11958135
> 
> 赞同：0
> 
> 时间：2012-08-14T18:04:28.250
> 
> 标签：iphone, ios, ios-simulator

我想知道我是否可以更改 iOS 中的界面方向。我将返回类型更改为 YES

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
return YES;
} 
```

但是当我启动模拟器时没有任何改变。这是怎么回事？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:12:32.927

您可以通过以下方法手动更改方向。

```
[[UIApplication sharedApplication] setStatusBarOrientation:(UIInterfaceOrientation) animated:(BOOL)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:06:16.180

![在此处输入图像描述](../Images/4018920769f7255203675f2fb8e22fe4.png)

打开您的 projectName-info.plist 并添加您想要的方向（在“支持的界面方向”下 -> 添加新项目）

编辑：只有当它的所有视图控制器都设置为自动旋转时，UITabBarController 才会自动旋转。

# asp.net-mvc - 如何将 JSON 模型绑定到嵌套对象

> ID：11958145
> 
> 赞同：0
> 
> 时间：2012-08-14T18:05:07.553
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, json.net

我正在使用 ASP.NET MVC3 和 C#。我有这堂课：

```
public class JobTitle
{
    public int ID { get; set; }
    public string Title { get; set; }
    public MinimumRequirements MinimumRequirements;

    public JobTitle(DataRow row)
    {
        ID = Utilities.SafeInt(row["JobTitle_ID"]);
        Title = Utilities.SafeString(row["Job_Title"]);

        MinimumRequirements = new MinimumRequirements()
        {
            Certifications = Utilities.SafeInt(row["....."]),
            ID = Utilities.SafeInt(row["....."]),
            Languages = Utilities.SafeString(row["....."]),
            MinimumEducation = Utilities.SafeString(row["....."]),
            MinimumGrade = Utilities.SafeString(row["....."]),
            MinimumYOS = Utilities.SafeInt(row["....."])
        };
    }
} 
```

发送的 JSON 如下所示：

```
{
"ID": 401,
"Title": "MinReq",
"MinimumRequirements": {
    "ID": 0,
    "MinimumEducation": "Bachelors",
    "MinimumGrade": "93",
    "MinimumYOS": 10,
    "Certifications": 1,
    "Languages": "English"
}} 
```

这是我的 c# 控制器方法的签名： [HttpPut] public ActionResult JobTitle(JobTitle jobTitle, bool doUpdate = true)

ID 和 Title 属性进来并填充了数据，一切都很好。但是 MinimumRequirements 嵌套对象为空。

我也试过这个：

[HttpPut] public ActionResult JobTitle([Bind(Prefix = "MinimumRequirements")]JobTitle jobTitle, bool doUpdate = true)

（这也不起作用）

这是 VS 调试器的屏幕截图，因此您可以了解绑定的外观：

![JSON 绑定到对象](../Images/8746492094d71f50954470271a858a33.png)

知道为什么嵌套对象没有绑定吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:10:18.783

在您的`JobTitle`班级`MinimumRequirements`中必须是 a [`property`](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)，而不是[`field`](http://msdn.microsoft.com/en-us/library/ms173118.aspx).

所以替换：

```
public MinimumRequirements MinimumRequirements; 
```

和：

```
public MinimumRequirements MinimumRequirements { get; set; } 
```

请记住，默认模型绑定器仅对属性进行操作，而不对字段进行操作。

同样从我可以看到您的`JobTitle`模型没有无参数构造函数，因此您不能将其用作操作参数，因为默认模型绑定器不知道如何实例化它。因此，请确保除了采用 a 的构造函数之外，`DataRow`您还有一个无参数构造函数，或者如果您希望它显示为操作参数，则必须为此类型编写自定义模型绑定器。

# iframe - Pinterest：如何使 iframe fancybox 窗口中的内容可固定？

> ID：11958153
> 
> 赞同：0
> 
> 时间：2012-08-14T18:05:39.363
> 
> 标签：iframe, fancybox, pinterest

在我的网站上，我有一个用户列表。通过单击每一个，将显示一个花式框弹出窗口。在窗口中，我使用 iframe 加载一个包含用户绘画的页面。

有什么方法可以通过单击 pinterest 书签固定按钮使 fancybox iframe 中的图像可固定？还是我必须在每个 HTML 页面上添加一个 pin it 按钮？

谢谢，

米洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T17:26:19.223

小书签按钮适用于当前加载的页面。通常，如果 iframe 与其原始 url 发生了细微的变化，则无法通过 javascript 访问父页面。实际的 iframe 本身必须启动适当的消息传递请求系统。

如果您可以让 iframe 向包含所需图像的父窗口发送消息，然后让父窗口将图像链接添加到页面，那么这似乎是目前唯一的方法。查看 postMessage() 函数。

当您问是否有“任何方式”可以做到这一点时，我会说是的。但是，它非常难看。将 pinit 按钮添加到 iframe 中的每个图像可能会更好。:)

# javascript - 解决 Drupal 站点的客户端 JS 问题？

> ID：11958154
> 
> 赞同：0
> 
> 时间：2012-08-14T18:05:47.960
> 
> 标签：javascript, debugging, drupal, civicrm

我管理基于 Drupal 7.14 的 CiviCRM (4.1.3) 安装，并试图解决 UI 难以捉摸的问题。该站点的几个（但不是全部）基于 Javascript 的元素已停止工作，即单击下拉箭头以显示“高级选项”或尝试打开日历小部件。这是我尝试过的： - 我检查了目录权限 - 我删除了 JS 缓存（~/public_html/civicrm/sites/default/files/js）和其他页面缓存（~/public_html/civicrm/sites/default/files/公民/模板_c）。- 我将 Drupal 模块更新到最新版本（尚未更新到 Drupal 7.15，但这个问题与 Drupal 7.14 更新不一致，所以我假设这不是问题） - 我启用（然后清除缓存）和禁用（然后清除缓存）然后在 drupal 中重新启用 JS 和 CSS 缓存/压缩/聚合

有没有人建议我应该从哪里开始以更细化的方式解决这个问题？我是 js 调试的新手，所以任何建议都会非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:17:16.730

在 Civicrm 中，这通常意味着您的资源 URL 不正确。请查看我在下面链接到的 wiki 页面中的第 14 步。即使您没有移动您的站点，您的主机也可能更改了一些路径，因此如果第 14 步不能单独工作，请检查此 wiki 页面中的所有步骤：

[移动现有安装](http://wiki.civicrm.org/confluence/display/CRMDOC41/Moving+an+Existing+Installation+to+a+New+Server+or+Location)

# c - 如何在 Linux 中将运算符添加到 Bash？

> ID：11958156
> 
> 赞同：3
> 
> 时间：2012-08-14T18:05:58.647
> 
> 标签：c, linux, bash

我想添加一个运算符（例如 ^> ）来处理前置而不是附加（>>）。我需要修改 Bash 源还是有更简单的方法（插件等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:45:16.503

First of all, you'd need to modify bash sources and quite heavily. Because, above all, your `^>` would be really hard to implement.

Note that bash redirection operators usually do a very simple writes, and work on a single file (or program in case of pipes) only. Excluding very specific solutions, you usually can't write to a beginning of a file for the very simple reason you'd need to move all remaining contents forward after each write. You *could* try doing that but it will be hard, very ineffective (since every write will require re-writing the whole file) and very unsafe (since with any error you will end up with random mix of old and new version).

That said, you are indeed probably better off with a function or any other solution which would use a temporary file, like others suggested.

For completeness, my own implementation of that:

```
prepend() {
    local tmp=$(tempfile)
    if cat - "${1}" > "${tmp}"; then
        mv "${tmp}" "${1}"
    else
        rm -f "${tmp}"
        # some error reporting
    fi
} 
```

Note that you unlike @jpa suggested, you should be writing the concatenated data to a temporary file as that operation *can fail* and if it does, you don't want to lose your original file. Afterwards, you just replace the old file with new one, or delete the temporary file and handle the failure any way you like.

Synopsis the same as with the other solution:

```
echo test | prepend file.txt 
```

* * *

And a bit modified version to retain permissions and play safe with symlinks (if that is necessary) like `>>` does:

```
prepend() {
    local tmp=$(tempfile)
    if cat - "${1}" > "${tmp}"; then
        cat "${tmp}" > "${1}"
        rm -f "${tmp}"
    else
        rm -f "${tmp}"
        # some error reporting
    fi
} 
```

Just note that this version is actually *less safe* since if during second `cat` something else will write to disk and fill it up, you'll end up with incomplete file.

To be honest, I wouldn't personally use it but handle symlinks and resetting permissions externally, if necessary.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:55:47.580

`^`是一个糟糕的字符选择，因为它已经用于[历史替换](http://www.gnu.org/software/bash/manual/bashref.html#Event-Designators)。

* * *

要向 shell 语法添加新的重定向类型，请从`parse.y`. 将它声明为新的`%token`以便可以使用，添加它`STRING_INT_ALIST other_token_alist[]`以便它可以出现在输出中（例如错误消息），更新`redirection`解析器中的规则，并更新词法分析器以在遇到适当的字符时发出此标记。

`command.h`包含`enum r_instruction`重定向类型，需要对其进行扩展。在处理重定向指令中有一个巨大的`switch`语句，实际的重定向是由整个函数执行的。其余的源代码中散布着用于打印、复制和销毁管道的各种功能，这些功能可能也需要更新。`make_redirection``make_cmd.c``redir.c`

就这样！Bash 并没有那么*复杂*。

* * *

这不讨论如何*实现*前置重定向，这将是困难的，因为 UNIX 文件 API 仅提供附加和覆盖。附加到文件的唯一方法是完全重写它，这（正如其他答案所提到的）比任何现有的 shell 重定向要复杂得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:30:24.293

添加运算符可能很难，但也许一个函数就足够了？

```
function prepend { tmp=`tempfile`; cp $1 $tmp; cat - $tmp > $1; rm $tmp; } 
```

示例使用：

```
echo foobar | prepend file.txt 
```

将文本“foobar”添加到 file.txt。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T21:37:41.660

大多数 Linux 文件系统不支持前置。事实上，我不知道有谁有一个稳定的用户空间界面。因此，正如其他人已经说过的那样，您只能依赖于**覆盖**，或者只是初始部分，或者整个文件，这取决于您的需要。

您可以轻松（部分）覆盖 Bash 中的初始文件内容，而无需截断文件：

```
 exec {fd}<>"$filename"
    printf 'New initial contents' >$fd
    exec {fd}>&- 
```

上面，`$fd`是 Bash 自动分配的文件描述符，`$filename`是目标文件的名称。Bash 在第一行为目标文件打开一个新的读写文件描述符；这不会**截断**文件。第二行覆盖文件的初始部分。文件中的位置前进，因此您可以使用多个命令覆盖文件中的连续部分。第三行关闭描述符；由于每个进程只有有限的数量可用，因此您希望在不再需要它们后关闭它们，否则长时间运行的脚本可能会用完。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T18:31:34.997

我认为 bash 的插件架构（通过“启用”内置命令加载共享对象）仅限于提供额外的内置命令。重定向运算符是运行简单命令的语法的一部分，因此我认为您需要修改解析器以识别和处理您的新`^>`运算符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T10:04:33.070

请注意，`>`这比您预期的要少：

1.  从命令行中删除`>`和以下单词，记住重定向。
2.  当命令行被处理并且可以启动命令时，调用`fork(2)`（或`clone(2)`）来创建一个新进程。
3.  **根据命令修改新进程。**这包括修改的环境变量 ( `SOMEVAR=foo yourcommand`) 之类的内容，但也包括更改的文件描述符。此时，`> yourfile`来自 cmdline 的 a 将产生文件`open(2)`在 stdout 文件描述符（即 #1）处以只写模式**将文件截断为零字节的**效果。A`>> yourfile`会产生文件在 stdout 中以只写模式**和追加模式**打开的效果。
4.  （现在才启动程序，比如`execv(yourprogram, yourargs)`

举个简单的例子，重定向可以像这样实现

```
open(yourfile, O_WRONLY|O_TRUNC); 
```

或者

```
open(yourfile, O_WRONLY|O_APPEND); 
```

分别。

然后启动的程序将设置正确的环境，并且可以愉快地写入 fd1。从这里开始，**不涉及外壳**。真正的工作不是由 shell 完成，而是由操作系统完成。由于 Unix 没有前置模式（并且不可能正确地集成该功能），因此您可以尝试的所有内容都以非常糟糕的 hack 告终。

尝试重新考虑您的要求，总有一种更简单的方法。

# merge - 删除 TortoiseHG 和 Mercurial 中的修订

> ID：11958158
> 
> 赞同：6
> 
> 时间：2012-08-14T18:06:02.537
> 
> 标签：merge, mercurial, tortoisehg, strip

在我的存储库中，我需要恢复到旧版本。我确实还原并进行了我需要的更改。如何将新修订版推送到上游？

当我需要恢复到第 13 版时，我在第 17 版。现在我已经进行了更改，我在第 18 版。事情是，当我去推动这些更改时（我正在使用 TortoiseHG），我得到一个错误`"abort:push create new remote head`。

我不想进行合并。我是想用`--force`命令强制执行还是需要删除 rev 14-17\. 如果需要删除，如何删除14-17.？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T05:04:44.447

正确的解决方案是实际与 option 合并`Discard all changes from merge target (other) revision`。但有时我们的生活更艰难，我们确实需要放弃一些更改（例如，我们提交了核发射代码或其他一些安全敏感数据）。那是你的情况吗？如果是，请遵循。

假设原始更改未发布，您可以：

*   启用`mq`扩展
*   r-单击有问题的更改并执行`Modify history->Strip`. 这将从您的本地历史记录中永久删除更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T19:51:58.010

您不想删除修订并因此破坏历史记录。这与版本控制存在的原因背道而驰。

您可以进行[合并和丢弃](http://mercurial.selenic.com/wiki/TipsAndTricks#Keep_.22My.22_or_.22Their.22_files_when_doing_a_merge)。

您也可以在 tortoiseHG 中执行此操作。

![在此处输入图像描述](../Images/2d2ea3c1b33297eae70d449d8ee4b588.png)

# python - 如何在 PyGTK 中从主题设置图标

> ID：11958162
> 
> 赞同：3
> 
> 时间：2012-08-14T18:06:19.920
> 
> 标签：python, button, icons, pygtk

如何设置`emblem-favorite`按钮上的图标，而不是来自`gtk.StockID`当前主题，而是来自当前主题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:45:26.320

如果你这样做应该可以工作：

```
button.props.image = gtk.image_new_from_icon_name('emblem-favorite', gtk.ICON_SIZE_BUTTON) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-02T08:04:07.650

您想通过实例化 Gio.ThemedIcon() 来加载主题图标，然后将其转换为图像并将其添加到您的按钮：

```
icon = Gio.ThemedIcon(name="emblem-favorite")
image = Gtk.Image.new_from_gicon(icon, Gtk.IconSize.BUTTON)
button.add(image) 
```

# php - 在 Magento 中，如何读取 exception.log？

> ID：11958163
> 
> 赞同：3
> 
> 时间：2012-08-14T18:06:34.090
> 
> 标签：php, magento, exception, stack-trace

我找不到任何关于如何阅读`exception.log`Magento 的文档；关于如何阅读的文档在哪里？

如果没有文档，打印例外的顺序是什么？

#0 是最后发生还是先发生？

```
Stack trace:
#0 .../html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 .../html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 .../html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 .../html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('select eav_opti...', Array)
#4 .../html/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('select eav_opti...', Array)
#5 .../html/app/code/local/FME/Manufacturers/Model/Observer/Product.php(47): Varien_Db_Adapter_Pdo_Mysql->query('select eav_opti...')
#6 .../html/app/code/core/Mage/Core/Model/App.php(1338): FME_Manufacturers_Model_Observer_Product->saveTabData(Object(Varien_Event_Observer))
#7 .../html/app/code/core/Mage/Core/Model/App.php(1317): Mage_Core_Model_App->_callObserverMethod(Object(FME_Manufacturers_Model_Observer_Product), 'saveTabData', Object(Varien_Event_Observer))
#8 .../html/app/Mage.php(447): Mage_Core_Model_App->dispatchEvent('catalog_product...', Array)
#9 .../html/app/code/core/Mage/Core/Model/Abstract.php(466): Mage::dispatchEvent('catalog_product...', Array)
#10 .../html/app/code/core/Mage/Catalog/Model/Product.php(548): Mage_Core_Model_Abstract->_afterSave()
#11 .../html/app/code/core/Mage/Core/Model/Abstract.php(319): Mage_Catalog_Model_Product->_afterSave()
#12 .../html/app/code/core/Mage/Adminhtml/controllers/Catalog/ProductController.php(714): Mage_Core_Model_Abstract->save()
#13 .../html/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Adminhtml_Catalog_ProductController->saveAction()
#14 .../html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('save')
#15 .../html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#16 .../html/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#17 .../html/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#18 .../html/index.php(91): Mage::run('', 'store')
#19 {main} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T02:15:25.870

这是一个常规的 PHP*异常堆栈跟踪*；它*不是*特定于 Magento 的。

第 #0 行告诉我们，`110`文件的行`lib/Varien/Db/Statement/Pdo/Mysql.php`成功地调用了方法`Zend_Db_Statement_Pdo->_execute()`，但随后执行该方法的命令之一导致抛出[`Exception`](http://php.net/manual/en/class.exception.php).

简单地说，堆栈跟踪只是方法/函数调用的列表，当抛出异常时，应用程序正处于执行过程中。

代码执行从 #19 `{main}`（堆栈底部）开始。

*   #18，`{main}`一直执行到
    方法被`Mage::run()`调用
    `91``index.php`

*   #17，`Mage::run()`一直执行到
    方法被`Mage_Core_Model_App->run()`调用
    `683``app/Mage.php`

*   ：

*   #1，`Zend_Db_Statement->execute()`一直执行到
    方法被`Varien_Db_Statement_Pdo_Mysql->_execute()`调用
    `300``lib/Zend/Db/Statement.php`

*   #0,`Varien_Db_Statement_Pdo_Mysql->_execute()`一直执行，直到在 的行中调用
    方法，但是该方法的某些命令导致抛出异常。`Zend_Db_Statement_Pdo->_execute()`
    `110``lib/Varien/Db/Statement/Pdo/Mysql.php`

作为旁注，我通常不会说堆栈跟踪是“沿着失败的函数列表向下移动”，就像@pzirkind 在他的回答中提到的那样。

因为如果在#0（堆栈顶部）中调用的方法不会“失败”，那么之前调用的许多方法仍然*可以*按预期工作（而且很多通常*都可以*，至少根据我的经验），甚至`catch`被抛出例外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:10:42.333

零最后发生了。

正在发生的事情是它正在失败的功能列表中下降。它从失败的实际功能开始，然后向您展示它如何继续导致其他事情失败（如果存在更深层次的问题，这将更容易追踪）。

逾越节

# jquery - 使用 JQuery 移动到页面的不同部分

> ID：11958169
> 
> 赞同：0
> 
> 时间：2012-08-14T18:07:03.260
> 
> 标签：jquery, html

我有一个项目表。每个项目都有细节。该表在项目名称和项目详细信息之间交替。我给每个项目行一个“项目名称”类，每个项目详细信息行一个“项目详细信息”类。当页面加载时，我隐藏了所有项目详细信息行，以便只有项目名称行可见。

当用户单击项目名称行时，它会在该行下方显示（展开）项目详细信息。如果用户单击不同的项目名称，它会关闭打开的项目详细信息并打开与单击的新项目相对应的项目详细信息。

我希望页面滚动到单击的项目名称，这与使用锚标签移动到页面的不同部分的方式非常相似。现在，如果用户单击项目名称中包含大量文本的项目详细信息，则用户可能必须向下滚动才能阅读全部内容。如果用户然后单击下一个项目名称，它将关闭上面的项目详细信息并打开新的项目详细信息。但是因为第一个 item-detail 太长了，所以新的 item-name 和 item-detail 实际上在窗口的滚动视图上方。它们在上一个项目的正下方展开，但用户之前已滚动到此点下方。

我考虑命名所有项目名称行并使用 jquery 使用各种锚标记来调用名称，但这似乎不是最理想的。

是否有 jquery 可以重新调整窗口焦点，使单击的项目名称位于页面顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:32:22.773

这应该有效：

```
$('.dropdown').click(function() {
    //drop down code
    var destination = $(this).offset().top;
    $("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination-20}, 500 );
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:34:33.970

你可以说类似

```
function scrollTo(theElement){
document.getElementById("myTable").scrollTop=theElement.offsetTop;
} 
```

并在单击元素时调用它，或者您可以使用 jQuery 的 scrollTo 方法

# c - C语言初始化换行符

> ID：11958170
> 
> 赞同：0
> 
> 时间：2012-08-14T18:07:07.810
> 
> 标签：c, char

如何在 C 中初始化新行字符？

例如，要初始化 char A：

```
char letter = 'A'; 
```

如何初始化新行？可能像这样：

```
char newLine = '0x0A'? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:08:07.047

使用这样的转义字符：

```
char letter = '\n'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:35:40.893

我更喜欢你阅读[New Line](http://en.wikipedia.org/wiki/Newline)，它完全解释了 \n \r 和 UNIX EOL 和 WINDOWS EOL。非常好。

# c - 宏和预处理器之间的区别

> ID：11958171
> 
> 赞同：16
> 
> 时间：2012-08-14T18:07:11.920
> 
> 标签：c, c-preprocessor

据我了解，`#define blah 8`是一个宏。而 ,`#`是预处理器指令。

我们可以说#include、#if、#ifdef 等吗？也是宏，还是它们被称为别的东西？还是宏只是用于#define 语句的术语？

*如果我错了，请纠正我。*

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-14T18:10:05.683

以 开头的行`#`是*预处理指令*。它们是告诉预处理器做某事的指令。

`#include`, `#if`, `#ifdef`, `#ifndef`, `#else`, `#elif`, `#endif`, `#define`, `#undef`, `#line`, `#error`, 和`#pragma`都是预处理指令。（包含 only 的行`#`也是预处理指令，但没有效果。）

`#define blah 8`是预处理指令，它不是宏。 `blah`是一个宏。该`#define`预处理指令将宏定义`blah`为由 token 替换的类对象宏`8`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T18:12:10.013

`#include`, `#if`, 等是预处理器的特性。

```
#define blah 8 
```

是一个预处理器指令，并声明了一个名为*blah*的新宏。

*   宏是`#define`语句的结果。
*   预处理器是 C 的一个特性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T18:12:58.407

Preporcessor：进行预处理（文件包含、宏扩展、条件编译）的程序。

宏：由`#define`预处理器指令定义的词，其计算结果为其他表达式。

预处理器指令：一个特殊的#-keyword，被预处理器识别。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-02T12:18:15.330

**预处理器**在将源文件交给编译器之前对其进行修改。

将预**处理器**视为在编译器之前运行的程序。

**预处理器指令**类似于**预处理器程序**的**命令**。C 中一些常见的预处理器指令是

 **1.  `#include <header name>`- 指示预处理器将给定文件的文本粘贴到当前文件。
2.  `#if <value>`- 检查值是否为真，如果是，它将包含代码，直到`#endif`
3.  `#define`- 用于定义常量和创建**宏**

**宏**是某些代码片段的名称。因此，无论在何处使用该名称，它都会**被****预处理程序**的代码片段替换。

**例如：**

`#define BUFFER_SIZE 100`
在您的代码中，无论您使用 BUFFER_SIZE ，它都会被 100
`int a=BUFFER_SIZE;`
a 替换为 100

C中还有许多预定义的宏，例如`__DATE__`，`__TIME__`等等。**

# joomla - 如何在 Joomla 2.5 中显示“菜单标题”

> ID：11958172
> 
> 赞同：0
> 
> 时间：2012-08-14T18:07:22.903
> 
> 标签：joomla, menu

我正在尝试在我的 Joomla 2.5 网站的标题区域中显示菜单标题文本（例如“主页”）。

Joomla 的默认设置（激活时）是将其放置在组件区域中。

我不确定实现这一目标的最佳方法。默认情况下，Joomla 使用 H1 标签包装菜单标题，但不使用 div 和类包装它。

我认为最好的方法是：

*   以某种方式用 div 和 class 包装所有菜单标题，以便我可以使用 css 将它们重新定位到标题中。

*   在我的模板中添加一些 php 代码。就像是：

    php $menuTitle = $this->params->get('fieldNameOfMenuTitle');

    php 回声 = $menuTitle;

任何想法、建议或答案将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:42:11.177

从未找到确切的答案，但找到了解决方法。

使用以下演示/插件的修改版本在文章菜单中创建自定义字段（命名为：“显示在网页上的标题”）。默认情况下，在网页中创建并显示的表格在组件区，并被包裹在 aw/ 一个类中。用 CSS 重新定位到标题/横幅区域。

[http://docs.joomla.org/Adding_custom_fields_to_the_article_component](http://docs.joomla.org/Adding_custom_fields_to_the_article_component)

# javascript - 如何触发jquery按href过滤

> ID：11958173
> 
> 赞同：0
> 
> 时间：2012-08-14T18:07:32.043
> 
> 标签：javascript, jquery, html

大家好，所以我有两个下拉选择，当用户选择第一个时，它只在第二个上显示具有相应值的选项，但我需要做的是将值更改为唯一值并在第二个上使用 href一组用于链接值的选项是 js：

```
jQuery.fn.filterOn = function(selectFrom, values) {
    return this.each(function() {
        var select = this;
        var options = [];
        $(select).find('option').each(function() {
            options.push({value: $(this).val(), text: $(this).text()});
        });
        $(select).data('options', options);
        console.log(selectFrom);
        $(selectFrom).change(function() {
            var options = $(select).empty().data('options');
            var haystack = values[$(this).val()];
            console.log(haystack);
            $.each(options, function(i) {
                var option = options[i];
                if($.inArray(option.value, haystack) !== -1) {
                    $(select).append(
                    $('<option>').text(option.text).val(option.value)
                    );
                }
            });
        });            
    });
}; 
```

那么这就是选择的样子：

```
<select id="1" name="1">
<option value="1">1</option>
<option value="2">2</option>
</select>

<select id="2" name"2">
<option href="1" value="1">1</option>
<option href="1" value="1">2</option>
<option href="1" value="1">3</option>
<option href="2" value="2">1</option>
<option href="2" value="2">2</option>
<option href="2" value="2">3</option>
</select> 
```

我需要做的是让第二个选择根据href而不是值进行排序，我尝试了一些事情，但似乎发生的一切都是其他jquery开始播放。

就目前而言，如果我在第一次选择时选择一个值为 1 的选项，它只会在第二次选择时显示具有相应值的选项，但我需要它来显示具有相应 href 的选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:12:24.897

```
$('select#1').on('change', function() {
  $('select#2 option[href="'+ this.value +'"]').show();
  $('select#2 option[href!="'+ this.value +'"]').hide();
}); 
```

**[演示](http://jsfiddle.net/4scmD/4/)**

或者，在单个链中：

```
$('select#1').on('change', function() {
    $('select#2')
          .find('option[href="'+ this.value +'"]') // find options with selected value           
          .show() // show them
          .end()  // backtrack to select#2
          .find('option[href!="'+ this.value +'"]') // find don't match options
          .hide();  // hide unmatched options
}); 
```

**[演示](http://jsfiddle.net/4scmD/3/)**

### 笔记

不要只使用数字`id`。

# c - 找出一个数字在 2 范围内的哪个幂？（在 C 中）

> ID：11958174
> 
> 赞同：4
> 
> 时间：2012-08-14T18:07:32.373
> 
> 标签：c, exponent

如它是否在 2^3 - 2^4、2^4 - 2^5 等范围内。返回的数字将是 EXPONENT 本身（减去偏移量）。

如何尽可能快速有效地完成这项工作？这个函数会在一个极度依赖速度的程序中被调用很多次。这是我当前的代码，但是因为它使用了 for 循环，所以效率太低了。

```
static inline size_t getIndex(size_t numOfBytes)
{
    int i = 3;
    for (; i < 32; i++) 
    {
        if (numOfBytes < (1 << i)) 
            return i - OFFSET;
    }
    return (NUM_OF_BUCKETS - 1);
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T18:15:13.100

据我所知，您所追求的只是 log [2] ( *n )。*

如果您的目标体系结构具有可以执行此操作的指令，则可能值得作弊并使用一些内联汇编。有关硬件支持的大量讨论和信息，请参阅有关“查找第一组”的[Wikipedia 条目。](http://en.wikipedia.org/wiki/Find_first_set#Hardware_support)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T18:09:16.123

一种方法是找到设置为 1 的最高位。我正在尝试考虑这是否有效，因为在最坏的情况下您仍然需要进行 n 次检查。

也许你可以做一个二进制搜索风格，检查它是否大于 2^16，如果是，检查它是否大于 2^24（假设这里是 32 位），如果不是，然后检查它是否大于 2^20等... 那将是 log(n) 检查，但我不确定位检查与完整 int 比较的效率。

可以得到一些性能数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:22:51.063

在 Sean Eron Anderson 的优秀[Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogDeBruijn)页面中描述了一种使用 de Bruijn 序列的特别有效的算法：

```
uint32_t v; // find the log base 2 of 32-bit v
int r;      // result goes here

static const int MultiplyDeBruijnBitPosition[32] = 
{
  0, 9, 1, 10, 13, 21, 2, 29, 11, 14, 16, 18, 22, 25, 3, 30,
  8, 12, 20, 28, 15, 17, 24, 7, 19, 27, 23, 6, 26, 5, 4, 31
};

v |= v >> 1; // first round down to one less than a power of 2 
v |= v >> 2;
v |= v >> 4;
v |= v >> 8;
v |= v >> 16;

r = MultiplyDeBruijnBitPosition[(uint32_t)(v * 0x07C4ACDDU) >> 27]; 
```

它可以在没有分支的情况下进行 13 次操作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T18:53:26.157

您可以使用浮点数表示：

```
double n_bytes = numOfBytes 
```

取指数位应该会给你结果，因为浮点数表示为：

```
(-1)^S X (1\. + M) X 2^E 
```

其中： S - 符号 M - 尾数 E - 指数

要构造掩码和移位，您必须阅读您正在使用的浮点类型的确切位模式。

CPU 浮点支持为您完成了大部分工作。

更好的方法是使用内置函数：

```
double frexp (double x, int * exp ); 
```

[浮点表示](http://fourier.eng.hmc.edu/e85/lectures/arithmetic_html/node11.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T18:37:31.833

您基本上是在尝试计算：`floor(log2(x))`

取对数以 2 为底，然后取地板。

在 C 中执行此操作的最可移植的方法是使用该函数，该函数找到以*e*`logf()`为基数的日志，然后调整： *`log2(x) == logf(x) / logf(2.0)`*

 *在此处查看答案：[如何在 c/c++ 中编写日志库（2）](https://stackoverflow.com/questions/3064926/how-to-write-log-base2-in-c-c)

如果您只是将生成的浮点值转换为，则同时进行`int`计算。`floor()`

但是，如果它可供您使用并且您可以使用它，那么有一种非常快速的方法可以计算`log2()`浮点数：`logbf()`

从手册页：

```
 The inte-
   ger constant FLT_RADIX, defined in <float.h>, indicates the radix  used
   for  the  system's  floating-point  representation.  If FLT_RADIX is 2,
   logb(x) is equal to floor(log2(x)), except that it is probably faster. 
```

[http://linux.die.net/man/3/logb](http://linux.die.net/man/3/logb)

如果您考虑浮点数的存储方式，您会意识到该值`floor(log2(x))`是数字的一部分，如果您只是提取该值，您就完成了。一点点移位和位掩码，并从指数（或技术上的“有效数字”）中减去偏差，你就有了。计算`floor(log2(x))`任何浮点值的最快方法`x`。

[http://en.wikipedia.org/wiki/Single_precision](http://en.wikipedia.org/wiki/Single_precision)

但实际上`logbf()`在将结果提供给您之前将结果转换为浮点数，并处理错误。如果您编写自己的函数来将指数提取为整数，它会稍微快一些，并且整数就是您想要的。如果您想编写自己的函数，则需要使用 C`union`来访问浮点数中的位；尝试使用指针会给你带来与“类型双关”相关的警告或错误，至少在 GCC 上是这样。如果您询问，我将详细说明如何执行此操作。我以前写过这段代码，作为一个`inline`函数。

如果您只有一小部分数字要测试，您可以将您的数字转换为整数，然后使用查找表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T23:09:39.993

这在任何具有硬件浮点单元的机器上通常都很快：

```
((union { float val; uint32_t repr; }){ x }.repr >> 23) - 0x7f 
```

它所做的唯一假设是浮点是 IEEE 并且整数和浮点字节序匹配，这两者在基本上所有现实世界的系统（当然是所有现代系统）上都是正确的。

**编辑：**当我过去使用它时，我不需要它来处理大量数据。Eric 指出，对于不适合浮点数的整数，它会给出错误的结果。这是一个修订版（尽管可能较慢），它修复了该问题并支持高达 52 位的值（特别是所有 32 位正整数输入）：

```
((union { double val; uint64_t repr; }){ x }.repr >> 52) - 0x3ff 
```

另请注意，我假设`x`是一个正数（不仅是非负数，也非零）。如果`x`是负数，你会得到一个虚假的结果，如果`x`是 0，你会得到一个很大的负数结果（近似负无穷大作为对数）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T00:28:20.537

```
#include <Limits.h>  // For CHAR_BIT.
#include <math.h>    // For frexp.
#include <stdio.h>   // For printing results, as a demonstration.

// These routines assume 0 < x.

/*  This requires GCC (or any other compiler that supplies __builtin_clz).  It
    should perform well on any machine with a count-leading-zeroes instruction
    or something similar.
*/
static int log2A(unsigned int x)
{
    return sizeof x * CHAR_BIT - 1 - __builtin_clz(x);
}

/*  This requires that a double be able to exactly represent any unsigned int.
    (This is true for 32-bit integers and 64-bit IEEE 754 floating-point.)  It
    might perform well on some machines and poorly on others.
*/
static int log2B(unsigned int x)
{
    int exponent;
    frexp(x, &exponent);
    return exponent - 1;
}

int main(void)
{
    // Demonstrate the routines.
    for (unsigned int x = 1; x; x <<= 1)
        printf("0x%08x:  log2A -> %2d, log2B -> %2d.\n", x, log2A(x), log2B(x));

    return 0;
} 
```*

# facebook - 如何从 Facebook Like Button 代码中检索喜欢的数量

> ID：11958182
> 
> 赞同：1
> 
> 时间：2012-08-14T18:07:54.097
> 
> 标签：facebook, facebook-graph-api, button, facebook-like

我需要用 PHP 检查 Facebook Like Button 中显示了多少喜欢。

由于某些原因，我不能只执行 FQL 查询来获得喜欢的数量。我必须对 FB Like Button html/js 代码进行操作。

例子：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<fb:like href="http://www.example.com" send="false" width="450" show_faces="false"></fb:like> 
```

我真的不想安装和使用一些 JS 解释器来检索 Likes 值。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:38:55.787

您可以使用 FQL 获取喜欢的数量。例如，我使用[Like Button 插件创建工具](https://developers.facebook.com/docs/reference/plugins/like/)创建了这个 Like 按钮：

```
<fb:like href="http://plooza.com" send="false" width="450" show_faces="true"></fb:like> 
```

然后我可以使用 FQL 获取喜欢的数量，使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)作为快速测试：

```
SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url="plooza.com" 
```

输出是：

```
{
  "data": [
    {
      "url": "plooza.com", 
      "normalized_url": "http://www.plooza.com/", 
      "share_count": 0, 
      "like_count": 2, 
      "comment_count": 0, 
      "total_count": 2, 
      "commentsbox_count": 0, 
      "comments_fbid": "1015079258276xxxx", 
      "click_count": 0
    }
  ]
} 
```

# groovy - 在运行时获取 groovy 源文件的路径

> ID：11958185
> 
> 赞同：5
> 
> 时间：2012-08-14T18:08:04.340
> 
> 标签：groovy, groovy-console

给定以下目录结构：

```
/home/some/random/foler/myScript.grooy 
```

...如何以编程方式在脚本本身中获取 myScript.grooy 父目录的路径？

最终，我试图从脚本所在的同一目录中读取多个文件。

**编辑：**尝试在 Windows 7、Groovy 2.0.1、groovy 控制台上运行它

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T18:28:35.200

好吧，解决方案在 Java 的 File 类中：

```
println new File(".").absolutePath 
```

如果您想获取同一目录中的每个 groovy 脚本，也许您可​​以使用 Groovy JDK 中的一些其他工具，例如`eachFile`：

```
def files = []
new File(".").eachFile { 
    if (it.name.endsWith(".groovy") ) files << it 
}
println files 
```

如果您想要运行脚本名称，那么您遇到了问题（[https://issues.apache.org/jira/browse/GROOVY-1642](https://issues.apache.org/jira/browse/GROOVY-1642)）

根据该 JIRA，这是当前的解决方法（并不总是有效）：

```
URL scriptUrl = getClass().classLoader.resourceLoader
    .loadGroovySource(getClass().name) 
```

# exploit - 使用漏洞作为功能。我应该允许吗？

> ID：11958194
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:08:35.030
> 
> 标签：exploit

如果用户想要一个特性，特性请求的优先级较低，但用户发现并利用了一个允许获得与该特性相同的结果的错误，作为开发人员应该怎么做？我应该修复错误（并失去“功能”）吗？

注意：该错误不是安全威胁，也不是数据完整性威胁。

场景#2：我们不知道用户是否将漏洞利用作为“功能”。同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:14:21.213

我觉得这取决于。如果他们没有恶意使用它，我会继续让他们使用该漏洞，然后确保无论何时实际实现该功能，您都会使其与漏洞的工作方式相似，同时确保用户免受崩溃和像。

我的意思是，如果我一直在使用漏洞利用来启用一项功能，但突然间我无法使用我一直在做的任何工作，我会非常沮丧。此外，当然，请务必告诉用户该漏洞已修复，并在您开始执行此操作时替换为某个功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:15:45.913

好吧，这更多是个人喜好问题，而不是编码问题，但是...

如果已知人们正在使用该错误/功能并假设我们 100% 确定该错误不是安全威胁，我会将其留在那里，直到我可以正确实施该功能为止。

我不想冒险让用户停止使用服务（即使这意味着他们必须暂时使用错误来做他们想做的事）。

但是，如果您认为没有人在使用该错误或者它可能对我构成安全威胁，我会修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:19:10.303

我认为您有 2 个选项： 选项 1：通过对错误进行良好的研究，确保错误不是安全威胁或数据完整性威胁。如果您发现使用该错误确实没有风险，您可以使用它并可能进一步开发它以提供良好的用户体验。

选项2：禁用它以您想要的方式开发并发布它。

# python - MongoDB - 打印

> ID：11958195
> 
> 赞同：1
> 
> 时间：2012-08-14T18:08:40.133
> 
> 标签：python, mongodb, pymongo

我有兴趣打印一系列查询。我有以下代码。

```
start = datetime.datetime(2012, 2, 2, 6, 35, 6, 764) 

end = datetime.datetime(2012, 2, 2, 6, 55, 3, 381) 

for doc in db.model.find({'time': {'$gte': start, '$lt': end}}): 
    print doc 
```

它完成了这项工作，基本上打印出我插入数据的方式。

我的问题是这样的：

是否可以打印出整个查询的一个元素？例如，我希望它只打印项目或日期或插入的其他输入，而不是给我 {'time': datetime.datime(....), 'input1': ..., 'item': 。 ..}。否则，如果我必须重新解析已经解析的 mongodb 查询数据以放入 mongodb，这将大大减慢我的程序。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T18:51:54.207

让我们了解一些有关 pymongo 工作原理的基础知识。

假设您在 Mongo 中有一些包含插入数据的集合。您想通过查询从该集合中获取数据：

```
cursor = db.model.find({'time': {'$gte': start, '$lt': end}}) 
```

*“模型”*集合对象的查找方法返回`Cursor`对象：一个包含有关查询和查询结果的所有信息的实体。

这样查询就完成了，下一步就是得到结果。Mongo 查询的结果类型可能因方法而异。在我们的例子中（`find`方法） - 结果是一堆 JSON 对象（迭代器对象），它们中的每一个都由`dict`Python 语言中的类型表示。这意味着**您不必解析结果：它们已经被解析为 dicts**。

另一件事`Cursor`：它是懒惰的。这意味着您可以按需收到结果。如果是`Cursor`对象，您必须遍历它以获取通过查询获取的对象：

```
for result_object in cursor:
    print result_object   # result_object is a dict that holds JSON object
    result_object['_id']  # Mongo ObjectId of the result_object
    # result_object["<field_name>"]  # Value stored in a field named <fieldname> 
```

通常，您必须尝试阅读[Pymongo 教程](http://api.mongodb.org/python/current/tutorial.html)：它很短，并提供了整个驱动程序如何工作的指导。

# c# - RemoteFileInfo 因 Using 语句而失败

> ID：11958198
> 
> 赞同：1
> 
> 时间：2012-08-14T18:08:50.013
> 
> 标签：c#, using

我遇到了一个非常简单的程序的问题。我们从这段工作代码开始：

```
RemoteFileInfo result = new RemoteFileInfo();

string filePath = System.IO.Path.Combine(ConfigurationManager.AppSettings["OmnitureSPDir"], request.FileName);
System.IO.FileInfo fileInfo = new System.IO.FileInfo(filePath);

// check if exists
if (!fileInfo.Exists)
    throw new System.IO.FileNotFoundException("File not found",
                      request.FileName);

// open stream
System.IO.FileStream stream = new System.IO.FileStream(filePath,
          System.IO.FileMode.Open, System.IO.FileAccess.Read);

// return result 
result.FileName = request.FileName;
result.Length = fileInfo.Length;
result.FileByteStream = stream;

return result; 
```

这需要一个名为“request”的参数，其中包含文件名，我们检查文件是否存在，如果存在，我们流式传输文件。

好吧，在 Visual Studio 中完成微软代码分析后，注意到没有 dispose()，我通过将其包装在 using 语句中“解决”了这个问题：

```
using (RemoteFileInfo result = new RemoteFileInfo()) {

    string filePath = System.IO.Path.Combine(ConfigurationManager.AppSettings["OmnitureSPDir"], request.FileName);
    System.IO.FileInfo fileInfo = new System.IO.FileInfo(filePath);

    // check if exists
    if (!fileInfo.Exists)
        throw new System.IO.FileNotFoundException("File not found",
                          request.FileName);

    // open stream
    System.IO.FileStream stream = new System.IO.FileStream(filePath,
              System.IO.FileMode.Open, System.IO.FileAccess.Read);

    // return result 
    result.FileName = request.FileName;
    result.Length = fileInfo.Length;
    result.FileByteStream = stream;

    return result;
} 
```

运行此代码后，我们发现文件不再流式传输，但会出现以下错误：

```
Value cannot be null.
Parameter name: FileByteStream 
```

取出 Using() 语句，解决了问题，但我不明白为什么。通过添加代码，我认为我在做一件好事。我想了解我做错了什么，这样我就不会重复它并且可以正确编码此方法。

这是 RemoteFileInfo 的定义

```
public class RemoteFileInfo : IDisposable
{
    [MessageHeader(MustUnderstand = true)]
    public string FileName;

    [MessageHeader(MustUnderstand = true)]
    public long Length;

    [MessageBodyMember(Order = 1)]
    public System.IO.Stream FileByteStream;

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);

    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing && FileByteStream != null)
            {
                FileByteStream.Close();
                FileByteStream = null;
            }

    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:05:15.847

如果你要返回一个实现的对象`IDisposable`，那么你不能`Dispose`。这必须由调用者决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:16:27.707

你必须在你的流中调用 Flush 方法，它会纠正问题。这是因为您在刷新流之前进行了处理，所以没有数据;-)

# c# - 在 ASP.NET C# Web 应用程序中授予上传文件夹权限的安全和自动化方式？

> ID：11958200
> 
> 赞同：1
> 
> 时间：2012-08-14T18:09:00.920
> 
> 标签：c#, asp.net, security, iis, permissions

我们的 ASP.NET C# Web 应用程序将各种文件（如 jpg、png、docx、txt 等）上传到名为 ClientBin 的文件夹中。在 Visual Studio 2010 .NET IDE 随附的 Visual Studio 2010 .NET 测试服务器上一切正常。

但是，如果我们将应用程序部署到 IIS7 服务器，我们必须授予应用程序的 Web 用户上传文件的权限。我们基本上使用 IIS7 登录到我们的服务器，然后手动修改名为 ClientBin 的文件夹的安全属性，该文件夹最终应包含 jpgs、pngs、docx、txt 等内容。

---允许网络用户成功上传的手动方法---------------

在资源管理器中右键单击 projectfolder\ClientBin 文件夹，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的复选框。---使上传成功的手动方法---------------------------

--在尝试上传时仍然给网络用户一个异常错误的编程方法--------

```
String DirectoryPath = System.IO.Path.Combine(Server.MapPath("~/ClientBin/"));
DirectorySecurity specificDirectorySecurity = Directory.GetAccessControl(DirectoryPath);
specificDirectorySecurity.AddAccessRule(new FileSystemAccessRule("Users", FileSystemRights.Modify, AccessControlType.Allow));
specificDirectorySecurity.AddAccessRule(new FileSystemAccessRule("Administrators", FileSystemRights.Modify, AccessControlType.Allow));
specificDirectorySecurity.AddAccessRule(new FileSystemAccessRule("SYSTEM", FileSystemRights.Modify, AccessControlType.Allow));
Directory.SetAccessControl(DirectoryPath, specificDirectorySecurity); 
```

--在尝试上传时仍然给网络用户一个异常错误的编程方法--------

另一个在线帖子建议我通过在 web.config 中输入以下内容来解决该问题：

----XML配置可能解决程序化方法的问题--------

身份模拟=“真”用户名=“计算机名\管理员”密码=“唐”

----XML配置可能解决程序化方法的问题--------

但是，如果我将身份模拟为真实，我会担心安全问题。

执行此操作的最安全和最自动化（可能意味着程序化解决方案）的方式是什么？

谢谢，

新员工

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:16:07.373

通常，应用程序被授予对目录的权限，并且应用程序管理用户对上传文件夹的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:11:18.427

全部：

即使我无法弄清楚 C# 如何修改上传文件夹的权限。

Microsoft Windows PowerShell 似乎可以以编程方式修改上传文件夹的权限。

这是以编程方式修改上传文件夹权限的代码片段：

```
$computerHostName = [System.Net.Dns]::GetHostName()

#These constants are used to set permissions
$inherit = [system.security.accesscontrol.InheritanceFlags]"ContainerInherit, ObjectInherit"

$propagation = [system.security.accesscontrol.PropagationFlags]::None

$colRights = [System.Security.AccessControl.FileSystemRights]"Modify"

$objType =[System.Security.AccessControl.AccessControlType]::Allow

#(MSDN Docs) The IIS_IUSRS Group has access to all the necessary file and system     resources
# so that an account, when added to this group, can seamlessly act as an application     pool identity.
#  IIS_IUSRS group by default includes the web users that log on to the Perls    Applications. 
#If a web user needs to upload resources to the folder within the Perls Web     Application that
# contains uploaded resource files then we need to ensure that the members of the
# IIS_IUSRS Group have permissions to add resource files to that particular Perls Web      Application upload folder.

#This determines which user is the guest user for IIS.  Windows Vista and 08 use the      IIS_USRS group, Previous version use
#IUSR_[MachineName]

  if ([environment]::osversion.Version.Major -eq 6) {
  $webUser="IIS_IUSRS"

  } else {

     $webUser="IUSR_" + $computerHostName

 }

$clientBinDirectoryPath = "D:\DeployedApplications\" + $umbrellaComponentName + "\" +     $siteWebComponentName + "\" + "ClientBin"

$perlsPivotErrorDirectoryPath = "D:\DeployedApplications\" + $umbrellaComponentName +      "\" + $siteWebComponentName + "\" + "PerlsPivotErrorDirectory"

$aclForClientBinDirectoryPath = Get-Acl $clientBinDirectoryPath

$accessRuleForClientBinDirectoryPath = New-Object     System.Security.AccessControl.FileSystemAccessRule($webUser, $colRights, $inherit,     $propagation, $objType)

$aclForClientBinDirectoryPath.AddAccessRule($accessRuleForClientBinDirectoryPath)

Set-Acl -aclobject $aclForClientBinDirectoryPath $clientBinDirectoryPath

$aclForPerlsPivotErrorDirectoryPath = Get-Acl $perlsPivotErrorDirectoryPath

$accessRuleForPerlsPivotErrorDirectoryPath  = New-Object     System.Security.AccessControl.FileSystemAccessRule($webUser, $colRights, $inherit,     $propagation, $objType)

$aclForPerlsPivotErrorDirectoryPath.AddAccessRule($accessRuleForPerlsPivotErrorDirectoryPath)

Set-Acl -aclobject $aclForPerlsPivotErrorDirectoryPath $perlsPivotErrorDirectoryPath 
```

# ruby-on-rails - 当类位于子目录中并被子类化时，Rspec 失败并显示 load_missing_constant

> ID：11958201
> 
> 赞同：11
> 
> 时间：2012-08-14T18:09:05.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

由于我怀疑与自动加载有关的事情，我在运行一堆 RSpec 测试时遇到了一些麻烦。这是错误：

```
/usr/share/ruby-rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:490:in `load_missing_constant': Expected /var/lib/jenkins/.../portfolios/base_manage_controller.rb to define Portfolios::BaseManageController (LoadError)
from /usr/share/ruby-rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:181:in `block in const_missing'
from /usr/share/ruby-rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:179:in `each'
from /usr/share/ruby-rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:179:in `const_missing'
from /usr/share/ruby-rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing'
from /var/lib/jenkins/jobs/.../app/controllers/portfolios/customize_controller.rb:1:in `<top (required)>' 
```

这是文件的标题：

```
class Portfolios::BaseManageController < ApplicationController 
```

它住在`app/controllers/portfolios/base_manage_controller.rb`

及其子类：

```
class Portfolios::CustomizeController < Portfolios::BaseManageController 
```

它住在`app/controllers/portfolios/customize_controller.rb`

最后这里有一堆自动加载：

```
config.autoload_paths += Dir["#{config.root}/lib",  "#{config.root}/lib/**/"]
config.autoload_paths += %W(#{config.root}/app/models/statistics)

#Any test/dev specific load paths
if not Rails.env.production?
  config.autoload_paths += %W(#{config.root}/spec/support)
  config.autoload_paths += %W(#{config.root}/spec/support/builders)
  config.autoload_paths += %W(#{config.root}/spec/support/modules)
  config.autoload_paths += %W(#{config.root}/spec/support/utils)
end 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:16:23.107

This error sometimes occurs when there is an exception raised when the class is defined. In this case, a runtime error may be occurring when attempting to define the class found in base_manage_controller.rb.

To verify this is the case, try stripping out everything from `base_manage_controller.rb`, except the class declaration:

```
class Portfolios::BaseManageController < ApplicationController
end 
```

It should result in the specs running, but failing.

To find the runtime error, put everything back into the class, and load it from `script/console`, by calling `Portfolios::BaseManageController`. That will attempt to dynamically load the class, and raise the exception that prevents your class from being defined.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:26:32.750

加载时似乎`Portfolios`没有定义。你在哪里定义的？如果它被定义为单独文件中某处的模块或类，则需要首先使用此文件。`rspec``Portfolios::BaseManageController``Portfolios``require`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:09:08.203

由于 /var/lib/jenkins/.../portfolios/base_manage_controller.rb 中存在同名文件，您的自动加载路径中存在冲突

您需要修改加载路径，以便 app/controllers 出现在列表的前面，或者应该重命名或删除在上面路径中指定的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T07:08:06.943

以下解决方案将为您提供帮助

在以下路径中为 app/controllers/portfolios/base_manage_controller.rb 创建 **规范 spec/controllers/portfolios/base_manage_controller_spec.rb**

规范内容应该是这样的

```
describe Portfolios::BaseManageController do
 -----
end 
```

您可以对 app/controllers/portfolios/customize_controller.rb 应用相同的逻辑

# c# - 泛型哈希是如何计算的？

> ID：11958209
> 
> 赞同：2
> 
> 时间：2012-08-14T18:09:30.017
> 
> 标签：c#, wcf, generics

在 WCF 服务中返回泛型类型时，服务客户端生成将生成名称为“[GenericType]Of[TypeParameterName][hash]”的类型。

根据此[Data Contract Names MSDN 文档](http://msdn.microsoft.com/en-us/library/ms731045.aspx)，哈希是由类型参数名称的名称及其命名空间生成的。但我想知道，这个哈希值究竟是如何计算的？

该文件仅说明以下内容：

> 哈希是一个数学函数的结果，它充当唯一标识一条数据的“指纹”。当所有泛型参数都是原始类型时，将省略散列。

# spring - 使用 Spring 的 Hibernate 4 实体映射

> ID：11958210
> 
> 赞同：1
> 
> 时间：2012-08-14T18:09:33.163
> 
> 标签：spring, hibernate

我有2个实体类如下：

```
@Entity
@Table(name = "USER_ACCT")
public class UserAccount implements Serializable{

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="USER_ACCT_ID_SEQ")
@SequenceGenerator(name="USER_ACCT_ID_SEQ", sequenceName="USER_ACCT_ID_SEQ")
@Column(name = "USER_ACCT_ID")
protected Long id;

@Basic(optional = false)
@Column(length = 50, unique = true)
private String username;

@Basic(optional = false)
@Column(length = 128, nullable = false)
private String password;

@ManyToMany(targetEntity = UserPermission.class)
@JoinTable(name = "USER_ACCT_PERM",
        joinColumns         = @JoinColumn(name = "USER_ACCT_ID"),
        inverseJoinColumns  = @JoinColumn(name = "USER_PERM_ID", referencedColumnName = "USER_PERM_ID"))
private Set<UserPermission> permissions;

// getters and setters...
} 
```

和

```
@Entity
@Table(name = "USER_PERM")
public class UserPermission implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="USER_PERM_ID_SEQ")
    @SequenceGenerator(name="USER_PERM_ID_SEQ", sequenceName="USER_PERM_ID_SEQ")
    @Column(name = "USER_PERM_ID")
    protected Long id;

    @Column(name = "PERM", unique = true, length = 255, nullable = false)
    private String authority;
// getters and setters...
} 
```

现在，当我创建一个 UserAccount 对象并尝试使用会话工厂保存它时，它给了我以下错误：

```
org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.rpm.domain.UserPermission 
```

UserPermission 类不应该自己保存吗？这是用于持久化的代码：

```
@Transactional
    public void addUser(){
                Set<UserPermission> permissions = new HashSet<UserPermission>();
    permissions.add(new UserPermission("ROLE_ADMIN"););
        sessionFactory.getCurrentSession().save(new UserAccount("admin", "d033e22ae348aeb5660fc2140aec35850c4da997", permissions));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:40:17.100

除非您指定级联选项，否则不会。

# fgets - fgets 不会让用户在凯撒密码中输入文本

> ID：11958212
> 
> 赞同：0
> 
> 时间：2012-08-14T18:09:55.820
> 
> 标签：fgets

在查看其他代码示例的帮助下，我制作了一个成功使用命令行参数的凯撒密码。但是，我想制作一个版本，您可以在其中扫描密钥，而不是将其作为命令行参数。问题是，由于某种原因我无法弄清楚，代码的 fgets 部分不允许用户输入任何内容，程序只是运行并返回 0。代码的顶部在这里：

```
#include        <stdio.h>
#include        <stdlib.h>
#include        <string.h>

int main (void)
{

int k;          //key
char  e[100];   //plain text to encrypt
int length;     //string length for plain text
int c;          //encrypted int (displays as char)

          //get key
          printf("Key? ");
          scanf("%d", &k);

         //display the key
    printf("The key is: %i\n", k);

         //prompt for plain text to encrypt
   printf("Please enter the words to encrypt:\n");
     fgets(e, 100, stdin);   

     printf("%s", e); //print words to encrypt

         //get length of plain text string
     length = strlen(e); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:17:56.797

`scanf()`将换行符留在缓冲区中，因此当您到达 时`fgets()`，读取的第一个字符是换行符，它终止`fgets()`调用，有效地返回一个空行。在调用之前，您需要做一些事情来跳过换行符`fgets()`。

# php - 如何使用 Joomla 和 Ajax 检测屏幕尺寸来调整我的导航？

> ID：11958221
> 
> 赞同：1
> 
> 时间：2012-08-14T18:10:19.727
> 
> 标签：php, ajax, mobile, joomla

我想创建一个移动网站，我试图让我的导航适应屏幕大小。导航的 HTML 结构将会改变，我知道我可以使用 CSS 和 @MEDIA 调用。但是，它不适用于我的情况，因为我使用的是[ZURB](http://foundation.zurb.com/docs/)框架中的 Foundation，我需要将元素从 UL 更改为 DD 或 DL 等。

我环顾了几个来源，我发现因为 PHP 在我的 AJAX 准备好之前首先加载，我无法让我的导航在移动设备上正确显示。

我需要一些方法来检测我的屏幕尺寸并将该值传达给我在 Joomla 中的 PHP 菜单生成函数。

我尝试了以下方法：

```
window.onload = function(){ 
var height = $(window).height();
var width = $(window).width();

 $.ajax({
    type: "POST",
    url: '',
    data: {
        "height": height,
        "width": width
    },
    success: function (data) {

    },
});
} 
```

mod_menu 示例：

```
<?php
   require_once('FirePHPCore/FirePHP.class.php');
   $firephp = FirePHP::getInstance(true);
   ob_start();

   $width = $_POST['width'];

   $firephp->group('Test Group');
   $firephp->log('Width');
   $firephp->log($width);
   $firephp->groupEnd();
?>

if ($width > 767) { 

?>

<!-- The class on the root UL tag was changed to match the Foundation nav style -->
<ul class="nav-bar<?php echo $params->get('class_sfx');?>"<?php
    $tag = '';
    if ($params->get('tag_id')!=NULL) {
        $tag = $params->get('tag_id').'';
        echo ' id="'.$tag.'"';
    }
?>>
<?php
foreach ($list as $i => &$item) :
    $id = '';
    if($item->id == $active_id)
    {
        $id = ' id="current"';
    }
    $class = '';
    if(in_array($item->id, $path))
    {
        $class .= 'current ';
    }
    if($item->deeper) {
        $class .= 'parent ';
    }

    $class = ' class="'.$class.'item'.$item->id.'"';

    echo '<li'.$id.$class.'>';

    // Render the menu item.
    switch ($item->type) :
        case 'separator':
        case 'url':
        case 'component':
            require JModuleHelper::getLayoutPath('mod_menu', 'default_'.$item->type);
            break;

        default:
            require JModuleHelper::getLayoutPath('mod_menu', 'default_url');
            break;
    endswitch;

    // The next item is deeper.
    if ($item->deeper) {
        echo '<ul>';
    }
    // The next item is shallower.
    elseif ($item->shallower) {
        echo '</li>';
        echo str_repeat('</ul></li>', $item->level_diff);
    }
    // The next item is on the same level.
    else {
        echo '</li>';
    }
endforeach;
?></ul>
<?php } ?> 
```

然后我使用 if 条件检查屏幕宽度并选择导航类型。一种导航使用 UL 结构，另一种必须使用 DL DD 结构。

我使用 FirePHP 来查看页面如何加载，我的导航没有显示，因为 PHP 在 Ajax 准备好之前首先加载，所以我看不到我的导航。我需要我的 PHP 等到 Ajax 准备好或页面的一部分等待。我不知道从这里去哪里。

我正在查看 Joomla MooTools，不确定是否可以利用它在页面加载之前等待 Ajax 加载。

我知道，有更简单的方法，比如在 Joomla 中制作一个全新的菜单项或在 Joomla 中隐藏一些东西以使其工作，但我想要一种更干净优雅的方式。

如果有人有任何代码示例。请发帖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:18:27.567

见下面网址

[http://forum.joomla.org/viewtopic.php?f=642&t=718062](http://forum.joomla.org/viewtopic.php?f=642&t=718062)

或阅读

我认为你可能会让这变得更加困难，那么它必须是。通常我会建议使用 CSS 和 @media，它们仍然可以实现以允许使用现有标准加载任何自适应样式，而无需编写任何新代码。然而，模块图像大小的调整是你“问题”的关键所在；这将需要一些手卷的善良。

您是否编写了幻灯片模块代码？您可以轻松地运行一个快速脚本来获取屏幕大小，然后更改从 db params 字段传递到您的代码的图像大小参数，以根据屏幕反映所需的大小。

如果您没有编写幻灯片代码或不想破解它，我的建议是创建一个 Joomla 内容插件，每次 Joomla 呈现一个新页面时，您的插件将检查两件事，是否任何幻灯片模块加载和屏幕大小。这种方式还具有额外的好处，即允许您合并自适应设计所需的任何新模块或组件特定布局/设计更改，而无需重新发明轮子。

让我知道这是怎么回事，这实际上与我刚刚交给我们公司 Joomla 投资组合的项目相同，并且也将解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:37:21.290

解决方法是通过浏览器识别：

```
User-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/528.16 
```

[我在这里](http://www.mlynn.org/2010/06/mobile-device-detection-and-redirection-with-php/)找到了一个很好的指南。

# regex - 为不匹配的正则表达式提供提示

> ID：11958226
> 
> 赞同：1
> 
> 时间：2012-08-14T18:10:38.593
> 
> 标签：regex, expression, error-correction

有没有人（遇到/工作过）一个工具，通过提供的语法给出关于无与伦比的正则表达式的提示？即想象正则表达式的一部分与某个标记匹配，但后者失败了：

```
(?P<name>[a-zA-Z])-(?P<number>\d+)_blah 
```

假设我们设法找到了名称，但“_”之前有一个字母（例如“foo-123Z_blah”）或“_blah”不匹配（例如“foo-123_Zblah”）。

如果用户能在长的正则表达式中得到一个提示出了什么问题并可能引入一些更正等，那将是非常棒的。

我记得读过 Antlr 非常擅长反转其解析过程，以便根据提供的语法定义为不正确的语言语句提供提示。在 Python 中是否有任何轻量级的东西可以做这种事情？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:35:31.207

您应该查看[http://www.regexbuddy.com/](http://www.regexbuddy.com/)以调试您的正则表达式。它有点像一个正则表达式 IDE，有一个完整的或常见的正则表达式库、正则表达式组合的实时帮助以及测试/调试工具。

不幸的是，它不是免费的，但他们收取的少量费用非常值得。调试工具非常棒，我相信它会帮助你。它显示哪些组件与字符串匹配，何时发生回溯，在哪些符号处等。

很不错的软件，强烈推荐！

# opengl - 显示不全是三角形或四边形的 .obj 文件

> ID：11958227
> 
> 赞同：4
> 
> 时间：2012-08-14T18:10:38.610
> 
> 标签：opengl, wavefront

我知道必须有一些索引魔术才能将 obj 文件转换为 OpenGL 的正确顶点/索引格式，但请考虑以下 .obj 文件：

```
# WaveFront *.obj file (generated by CINEMA 4D)

g Polygon
v -136.714894 0 -169.395745
v 134.53617 0 -224.953191
v 321.906383 0 -87.693617
v 358.944681 0 182.468085
v 49.565957 0 264.170213
v -340.425532 0 165.038298

f 6 5 4 3 2 1 
```

脸不是三角形或四边形，这是否意味着我必须在 cpu 或 gpu 上进行某种镶嵌？这会是处理这种类型的几何描述的标准方法吗？

编辑：此外，是否有一个库可以进行不受限制许可的三角测量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:29:06.530

希望它们是平面多边形并通过您喜欢的方法进行三角剖分。

如果它们*不是*平面的，那么您可能会使用[PCA](http://en.wikipedia.org/wiki/Principal_component_analysis)取消维度并对结果进行三角剖分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:53:35.570

这取决于你的多边形。OpenGL确实具有绘制多边形而不是四边形或三角形或条形​​等的功能。但是，多边形必须是凸多边形。否则你需要镶嵌。

如果您使用的是固定函数，则为“glBegin(GL_POLYGON)”

# java - Windows 上 Java 的 32 位/64 位 exe 包装器的问题

> ID：11958229
> 
> 赞同：0
> 
> 时间：2012-08-14T18:10:50.930
> 
> 标签：java, windows, installation, 64-bit, winrun4j

在[winrun4j](http://winrun4j.sourceforge.net/) java exe 包装器的 ini 文件中，我设置 vm.version.min=1.7 以指定 Java 7 作为要求。但是当我运行它时，我无法让 winrun4j 识别出我安装了 java 7 jre，即使命令行中的 java -version 返回了它。

经过进一步调查，我意识到我的 Java 7 安装是 64 位，而我的 Java 6 安装是 32 位。然后我发现 winrun4j 有一些 64 位版本的命令（即 rcedit64），如果我构建一个 appname64.exe 而不是 appname.exe 它不再抱怨 Java 7。

1.  所以有人可以确认这是我需要 64 位 exe 来运行 64 位 jvm 的问题吗
2.  其次，如果是这种情况，我如何向用户展示它，我将安装程序包装为 exe，这是否意味着我需要为用户提供 installer.exe 和 installer64.exe 并向用户解释选择正确的不是基于他们的处理器，而是基于他们安装的 Java 版本（32 位或 64 位）

**编辑**：听起来事情就像我描述的那样，使用[launch4j](http://launch4j.sourceforge.net/)也许是一个解决方案

[在 Windows 7 上启动 Java 应用程序的最佳方式是什么？](https://stackoverflow.com/questions/9330209/whats-the-best-way-to-start-java-applications-on-windows-7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:03:45.710

> 我需要一个 64 位 exe 来运行 64 位 jvm

是的。您不能使用 32 位 exe 来运行 64 位 JVM

> 其次，如果是这种情况，我该如何向用户展示它，我将安装程序包装为 exe ...

不。只需为 32 位系统和 64 位系统创建安装程序。根据目标系统，相应的安装程序应该运行

# java - 使用 Android 4 进行选项卡布局的最佳方式？

> ID：11958232
> 
> 赞同：1
> 
> 时间：2012-08-14T18:11:04.867
> 
> 标签：java, android, android-layout, android-4.0-ice-cream-sandwich, galaxy

我想开始为 Android 开发应用程序。我对 java 并不陌生，但是在寻找创建选项卡布局的“最佳”方式时，android sdk 让我感到困惑。

我的第一个应用程序应该很简单。我只需要大约 3 页。

实现选项卡布局的最佳方法是什么？也许你也可以告诉我我可以采取什么方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:24:25.807

有两种方法可以制作选项卡式活动。

1- TabActivity 这里有一个非常简单的教程： [http ://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

2-片段与另一个简单的教程在这里：
[http ://android.codeandmagic.org/2011/07/android-tabs-with-fragments/](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)

最近，使用 Fragments 已成为常态，因此您可能想检查一下。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:16:08.810

首先，它取决于您的目标 android 版本。如果您计划使用最新版本，那么[Fragments](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)是选项卡布局的最佳选择。

# php - mod_rewrite 适用于 linux，但不适用于 windows

> ID：11958233
> 
> 赞同：0
> 
> 时间：2012-08-14T18:11:05.647
> 
> 标签：php, mod-rewrite

此规则在基于 Linux 的机器上运行良好：

```
RewriteRule ^([^/]*)/([^/]*)$ /index.php?page=$1&id=$2 [L] 
```

但在基于 Windows 的情况下，它没有。也许还有另一种方法可以让它在两个系统上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:13:11.680

在 Windows 上“它不起作用”是什么意思？我很确定这是`mod_rewrite`处理 Windows 设置的问题，与此特定规则无关。我猜如果你看一下[`apache_get_modules()`](http://php.net/manual/en/function.apache-get-modules.php)，你会发现它没有列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:14:17.983

它不依赖于操作系统。我认为您在 Linux 上使用 Apache，现在使用 IIS。

此处解释了 IIS 的 htaccess：[http ://learn.iis.net/page.aspx/557/translate-htaccess-content-to-iis-webconfig/](http://learn.iis.net/page.aspx/557/translate-htaccess-content-to-iis-webconfig/)

# google-apps-script - 如何获取日期第一次出现在列中？

> ID：11958238
> 
> 赞同：0
> 
> 时间：2012-08-14T18:11:33.273
> 
> 标签：google-apps-script

我是 JavaScript 和 Google Speardsheet 的新手，我需要一些帮助。我在 google speardsheet 中有一张表格，在 L 列中 - 我有日期。该表按日期排序，从最早到最新。

现在，我需要 2 个函数 - 第一个 - 它将返回表中存在的最后一个（=最新）日期。第二个 - 这将返回最新日期出现在表格中的第一行。

我成功编写了第一个函数（称为：FindLastDate），但第二个函数有问题。请查看我的代码并给出您的建议：

```
 function TheFirstRowWithThisDate() {
    var sheet = SpreadsheetApp.getActiveSheet();
    var dataRange = sheet.getDataRange().getValues();
    var i = 0;
    var a = 0;
    d = FindLastDate();
    while (a==0) {
    if  (dataRange[d][11]==dataRange[i][11])
    { var a=i
    }
    i=i+1;
    }
    return a 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:01:16.037

由于许多原因，日期很难处理 - 电子表格单元格的格式、电子表格的时区和脚本都起作用。

因此，鉴于您的要求，我会以艰难的方式解析日期。

```
function TheFirstRowWithThisDate() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var dataRange = sheet.getDataRange().getValues();
  var d = FindLastDate(); 
  var lastDate = new Date(d); 
  for( var i = 0 ; i < dataRange.length ; i++){
    var tempDate = new Date(dataRange[i][11]); // Col L
    if(tempDate.getDate() == lastDate.getDate() && 
       tempDate.getMonth() == lastDate.getMonth() && 
       tempDate.getFullYear() == lastDate.getFullYear() ) { 
         return (i+1); // Return the row number which is 1 more than the index 
    }
  }
  return 0;
} 
```

# ruby-on-rails - 如何在 Ruby on Rails 中将数据从输入字段传递到我的数据库（解析）？

> ID：11958240
> 
> 赞同：0
> 
> 时间：2012-08-14T18:11:38.123
> 
> 标签：ruby-on-rails

我正在尝试传递从注册的人那里获得的电子邮件和密码（下面的 html）

```
<form id="frm-signup">
      <h5>Email</h5>
      <input id="email" type="text" name="email" />
      <h5>Password</h5>
      <input id="register-password" type="password" name="password" />
   /*Pass data*/
      <% users = User.new %>
      <% users.username = @email %>
      <% users.password = @password %>
      <% users.save %>
</form> 
```

并将其传递到我的数据库中，但我似乎无法弄清楚。我可能只是结合了几种不同的方法？我是 Ruby 的新手，但我仍在搞清楚。

**我的用户模型：**

```
class User < ParseUser
  fields :email, :password, :firstName, :lastName
  validates_presence_of :email, :password
  alias :email :username
  validates_length_of :password, :minimum => 8, :allow_blank => false

  has_many :items, :primary_key => "objectId"
end 
```

**我的用户控制器：**

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    user = User.authenticate(params[:username], params[:password])

    @email = params[:email].nil? 1; params[:email]
    @username = params[:email].nil? 1; params[:email]
    @password = params[:password].nil? 1; params[:password]

    if user
      session[:user_id] = user.id
      redirect_to root_url, :notice => "logged in !"
    else
      flash.now.alert = "Invalid username or password"
      render "new"
    end
  end

  def index

  end

  def destroy
    session[:user_id] = nil
    redirect_to root_url, :notice => "Logged out!"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:00:01.837

有几件事。

关于保存在数据库中，由于您的用户模型是从 ParseUser 继承的，因此应该有一个 ParseUser 方法可以让您保存。因此，您会调用`User.save(username,password)`（这实际上不是方法，而是类似于解析中的方法），并且会保存在数据库中。

另外，一些一般性建议：如果您是 Rails 新手，使用 Parse 之类的东西可能会让您的事情变得更加困难。去做许多教你基础知识的 Rails 教程（我推荐 railstutorial.org）中的一个，在你理解了基础知识之后，转向更复杂的事情。

# php - 运行 php 脚本而不更改当前页面的按钮

> ID：11958243
> 
> 赞同：5
> 
> 时间：2012-08-14T18:11:44.847
> 
> 标签：php, html

我有一个从 mysql 生成表的网页。我在每一行的开头都有一个按钮。我希望这样，如果用户决定按下按钮，则该单独行的内容将写入 MySQL 中的新表。

目前我正在考虑让按钮成为另一个连接到mysql并将行插入表的php脚本的href；但是，我认为这将重定向我当前的页面。

我希望按钮运行脚本，而不重定向我的当前页面。这样，用户可以继续分析表格，而不必每次都重新加载页面。

这就是我当前的表的样子。这只是一个片段，表格可能非常大（数百行） ![在此处输入图像描述](../Images/1445fee0af11f209dfd0b18257d84333.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T18:24:06.000

为了做这个客户端，我可以想到几种方法来做到这一点：

**Javascript**

您可以包含一个 Javascript 库（如曾经流行的 JQuery 库），或自己编写代码，但您可以将其实现为 XMLHTTPRequest，从按钮上的单击处理程序发出。使用库将是最简单的方法。

**一个 iframe**

创建一个隐藏的 iframe：

```
<iframe style="display:none;" name="target"></iframe> 
```

然后只需将标签的目标设置为 iframe：

```
<a href="your_script.php" target="target">...</a> 
```

每当有人点击链接时，页面将被加载到隐藏的 iframe 中。用户不会看到任何变化，但您的 PHP 脚本将被处理。

在这两个选项中，我推荐使用 Javascript 库，除非由于某种原因你不能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:31:52.307

您需要在单击按钮时向 mysql 表中插入一条记录，而无需重新加载页面。为了完成上述任务，您需要使用 AJAX，它将使用 xmlhttprequest 对象在后台向服务器发送 http 请求，从而在不重新加载网页的情况下更新网页。因此，您必须在 javascript 中创建一个函数，该函数将使用 xmlhttprequest 对象向服务器发送 http 请求，并且您还需要定义服务器端处理程序来处理使用 ajax 发送的 http 请求。关于 ajax 与 php 的实现细节，请参考下面链接中提到的示例 [http://www.w3schools.com/php/php_ajax_php.asp](http://www.w3schools.com/php/php_ajax_php.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:33:45.330

使用 jQuery 很容易做到：

```
<script>
$(function(){
    $('#your_button_dom_id').click(function(){
        $.ajax({
            url: 'your_php_script_url',
            type: 'POST', // GET or POST
            data: 'param1=value1&param2=value2', // will be in $_POST on PHP side
            success: function(data) { // data is the response from your php script
                // This function is called if your AJAX query was successful
                alert("Response is: " + data);
            },
            error: function() {
                // This callback is called if your AJAX query has failed
                alert("Error!");
            }
        });
    });
});
</script> 
```

您可以在此处阅读有关 jQuery 中 AJAX 的更多信息：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T10:32:21.613

您可以在具有隐藏类型的提交按钮之后使用另一个输入标签。

```
<input class="ButtonSubmit" type="Submit" name="Submit" id="Submit" value="Submit"/>

    </p>
        <input type="hidden" name="submitted" id="submitted" value="true" /> 
```

之后在你的代码顶部使用这个

```
if (isset($_POST['submitted'])) {
// your code is here
} 
```

这对我有用。您也可以在 wordpress 模板中使用它

# java - 带有 bouncycastle 的随机损坏的垫块

> ID：11958246
> 
> 赞同：1
> 
> 时间：2012-08-14T18:11:59.677
> 
> 标签：java, encryption, random, bouncycastle, pki

我正在解决加密数据传输的问题，我们在解密时遇到“损坏的垫块”失败大约 200 次。该方案与加密电子邮件非常相似（并且设计用于相当大量的数据：每单位最多 1 GB）：

1.  生成随机 256 字节用作会话密钥。
2.  使用接收者的公钥加密会话密钥
3.  使用会话密钥作为 AES 的密钥参数，使用 CBC AES PKCS#7 填充加密数据。

然后接收器将

1.  使用他的私钥解密会话密钥。
2.  使用会话密钥解密数据。

现在，平均大约 200 次中的 1 次，随机字节将导致数据不可解密：我们在解密结束时得到“填充块损坏”。相同的字节序列要么总是有效，要么总是导致失败。似乎要加密的数据内容没有任何区别（但我仍然在这方面进行了一些测试）。

关于如何避免失败的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:12:19.553

是的，维克多·索罗金是对的。会话密钥中的前导零在传输中被删除。

RSA 加密是一个纯粹的数学函数，它会丢弃任何前导零。当会话密钥被解密时，必须将前导零填充回去，以便密钥恢复其原始长度和值。有可用的填充方案，但它们必须在两边都使用。

Bouncycastle 常见问题解答添加了一些详细信息，请参阅此处的问题 4：http: [//www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions](http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions)

# database - db2 数据库创建

> ID：11958253
> 
> 赞同：1
> 
> 时间：2012-08-14T18:12:19.223
> 
> 标签：database, db2

我在我的系统中安装了 db2 客户端供个人使用。我无法理解从哪里创建数据库，以便我现在可以在该数据库上创建表并使用 sql 查询。

这完全与我个人的使用和学习目的有关。

请告知如何创建一个虚拟数据库并使用 db2 客户端玩弄它？

问候，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T21:22:53.270

你在 Windows 上吗？您在使用[DB2 Express-C](http://www.ibm.com/developerworks/downloads/im/udbexp/)吗？我假设你是，因为你说这是为了个人工作。

安装完 DB2 二进制文件后，应该会提示您使用“DB2 First Steps”应用程序，您可以在其中让应用程序通过 GUI 为您创建数据库。如果你错过了它，你应该可以在你的开始菜单中找到它`Start -> Programs -> IBM DB2 -> DB2COPY1 (Default) -> Set-up Tools -> First Steps`。

如果您更喜欢命令行，可以使用以下命令：

首先，使用命令确定您的安装是否创建了默认实例（在 Windows 上，这将被调用`DB2`）`db2ilist`。在 DB2 命令窗口中，如果您不在要在其中创建数据库的实例上，您可以使用以下命令进行切换：

```
set db2instance=DB2 
```

一定不要在等号周围包含空格。

现在，为了在当前实例中创建数据库，您可以使用以下命令：

```
db2 create database mydatbase 
```

为了进一步阅读，IBM[制作了一本入门电子书](http://public.dhe.ibm.com/software/dw/db2/express-c/wiki/Getting_Started_with_DB2_Express_v9.7_p4.pdf)，我强烈建议您查看！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:34:53.613

DB2 客户端就是这样——只是一个客户端。它不包括数据库引擎。

要创建数据库，您必须安装服务器。服务器包括客户端部分。

# jquery - 转换格式不正确的 XML 以在数组中使用

> ID：11958255
> 
> 赞同：1
> 
> 时间：2012-08-14T18:12:25.967
> 
> 标签：jquery, xml, arrays, iteration

我需要遍历这篇文章中示例 XML 中的所有属性（无论名称如何），并使用 JQuery 创建一个二维“数组数组”。

我正在使用 Microsoft 的 CAML 查询语言从 SharePoint 列表中返回属性。它作为加载到对象中的 XML 返回。这是返回的 XML：

```
<?xml version="1.0"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetListItemsResponse xmlns="http://schemas.microsoft.com/sharepoint/soap/"><GetListItemsResult><listitems xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema">
                <rs:data ItemCount="3">
                    <z:row ows_Attachments="0" ows_LinkTitle="Apple" ows_Color="Red" ows_Quantity="3.00000000000000" ows_Quantity2="5.00000000000000" ows_MetaInfo="1;#" ows__ModerationStatus="0" ows__Level="1" ows_Title="Apple" ows_ID="1" ows_UniqueId="1;#{FEDE3004-A0F4-421F-A76B-5BD51003B11C}" ows_owshiddenversion="2" ows_FSObjType="1;#0" ows_Created_x0020_Date="1;#2012-08-01 19:24:08" ows_Created="2012-08-01 19:24:08" ows_FileLeafRef="1;#1_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-05 13:59:06" ows_FileRef="1;#Sandbox/bitest/Lists/Produce/1_.000"/>
                    <z:row ows_Attachments="0" ows_LinkTitle="Orange" ows_Color="Orange" ows_Quantity="5.00000000000000" ows_Quantity2="3.00000000000000" ows_MetaInfo="2;#" ows__ModerationStatus="0" ows__Level="1" ows_Title="Orange" ows_ID="2" ows_UniqueId="2;#{1E40887F-87BF-4029-93A3-A1096DF1D1A7}" ows_owshiddenversion="2" ows_FSObjType="2;#0" ows_Created_x0020_Date="2;#2012-08-01 19:24:42" ows_Created="2012-08-01 19:24:42" ows_FileLeafRef="2;#2_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-05 13:59:08" ows_FileRef="2;#Sandbox/bitest/Lists/Produce/2_.000"/>
                    <z:row ows_Attachments="0" ows_LinkTitle="Corn" ows_Color="Yellow" ows_Quantity="9.00000000000000" ows_Quantity2="19.0000000000000" ows_MetaInfo="3;#" ows__ModerationStatus="0" ows__Level="1" ows_Title="Corn" ows_ID="3" ows_UniqueId="3;#{3873272A-61AA-49C0-B5D2-A228388ADE27}" ows_owshiddenversion="5" ows_FSObjType="3;#0" ows_Created_x0020_Date="3;#2012-08-01 19:24:57" ows_Created="2012-08-01 19:24:57" ows_FileLeafRef="3;#3_.000" ows_PermMask="0x7fffffffffffffff" ows_Modified="2012-08-08 13:58:38" ows_FileRef="3;#Sandbox/bitest/Lists/Produce/3_.000"/>
                </rs:data>
            </listitems></GetListItemsResult></GetListItemsResponse></soap:Body></soap:Envelope> 
```

此 xml 似乎“格式不正确”，因此我无法遍历其属性以在 2D 数组中使用。[StackOverflow 上](https://stackoverflow.com/questions/2224933/iterating-over-element-attributes-with-jquery)的另一篇文章给了我一些希望。似乎由于 XML 格式不正确，因此无法正常工作。

如果有更好的方法来处理这些数据，可以让我将*所有*这些属性加载到一个数组数组中（每个子节点一个数组），我很想听听。我对此很陌生，我希望能找到一些简单的东西，可以在未来与各种 CAML 查询一起使用。

**------------------------------------- 编辑和新信息---------- ----------------------**

在发布新问题之前，让我为这个问题添加一些信息。

我已经放弃了从所有列出的属性动态创建二维数组；我和另一个人无法让它工作。看来我每次只需要创建一个自定义数组。

我新的相关问题：假设我想从这个 SOAP 信封中获取所有“Quantity2”条目。

使用 JavaScript / JQuery 遍历每个行条目并为每行返回一个值的最佳方法是什么？我可以给出我正在使用的当前代码示例；它可以工作，但我担心它可能会被 XML 中的数据值混淆：

```
$(xData.responseXML).find("z\\:row").each(function() {
    quantityOneArray[i] = parseFloat($(this).attr("ows_Quantity"));
    quantityTwoArray[i] = parseFloat($(this).attr("ows_Quantity2"));
    i++
}); 
```

我更喜欢使用 DOM 元素，例如这个例子（这是无效的）：

```
for each $(this).childnode(function(){ 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:38:10.383

不太确定您在追求什么，但请尝试以下操作：

```
//get the parent XML node
var elems = document.getElementsByTagName('soap:Envelope')​;

//turn the collection into an aray
var arrayElem = $(elems).toArray();

//create an array with each node
var arr = [];
$.each($('*', elems), function(i,e) {
    arr.push(e);
}); 
```

[小提琴](http://jsfiddle.net/HWTPB/)

# css - z 索引不起作用。如何让我的文字显示在图像之上

> ID：11958256
> 
> 赞同：5
> 
> 时间：2012-08-14T18:12:28.610
> 
> 标签：css, jquery-ui-slider, jquery-slider

我正在使用皇家滑块。我有这个

```
<a class="rsImg" data-rsDelay="1000" href="image.jpg">
  <span>This is caption <b>HTML1</b> text</span>
</a> 
```

这可以正常工作并将文本放在图像下方。但是，我想在图像顶部显示文本。但是当我向上移动文字时，它会在图片下方而不是在顶部。我试过这个

```
<a class="rsImg" data-rsDelay="1000" href="image.jpg" style="z-index:-10000 !important;">
  <span style="z-index:10000 !important;margin-top:-100px;">
    This is caption <b>HTML1</b> text
  </span>
</a> 
```

但这没有用。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T18:14:24.010

来自[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

> 注意：z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T19:27:26.373

如前所述，将其添加到您的 CSS 中：

```
position: relative; 
```

那么它应该可以工作，在这种情况下，我会使用相对定位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-11T08:57:07.070

The z-index does not work if you do not use position. It works best if you have called position absolute.

# android - 谷歌日历生成器服务的问题

> ID：11958261
> 
> 赞同：0
> 
> 时间：2012-08-14T18:12:55.897
> 
> 标签：android, google-calendar-api, google-drive-api

我正在android上开发一个应用程序。我的应用程序使用 Google Calendar Api，现在我想包含 Google Drive Api，所以我更改了一些库。而且我的日历服务生成器有一行已弃用的代码，这是：

```
GoogleAccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(accesstoken); 
```

在更改我使用的库之前：

```
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource; 
```

但是现在，我不使用第一行代码，它已被弃用，我需要类似的东西。

这是我的第一个日历生成器服务：

```
public static Calendar build(String accessToken)
        {
        HttpTransport transport    = AndroidHttp.newCompatibleTransport();
        JacksonFactory jsonFactory = new JacksonFactory();

        GoogleAccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(accessToken);

        Calendar service = Calendar.builder(transport, jsonFactory).setApplicationName(Constants.APP_NAME).setJsonHttpRequestInitializer(new JsonHttpRequestInitializer()
            {
            @Override
            public void initialize(JsonHttpRequest request)
                {
                CalendarRequest calendarRequest = (CalendarRequest) request;
                calendarRequest.setKey(Constants.API_KEY);
                }
            }).setHttpRequestInitializer(accessProtectedResource).build();
        return service;
        }
    } 
```

现在我正在尝试，但它不起作用：

```
public static Calendar build(TokenResponse tokenResponse)
        {
        HttpTransport transport    = AndroidHttp.newCompatibleTransport();
        JacksonFactory jsonFactory = new JacksonFactory();

        GoogleCredential credential = new GoogleCredential().setFromTokenResponse(tokenResponse);
        Log.w("1","1"+credential);

        Calendar service = Calendar.builder(transport, jsonFactory).setApplicationName(Constants.APP_NAME).setJsonHttpRequestInitializer(new JsonHttpRequestInitializer()
            {
            @Override
            public void initialize(JsonHttpRequest request)
                {
                CalendarRequest calendarRequest = (CalendarRequest) request;
                calendarRequest.setKey(Constants.API_KEY);
                }
            }).setHttpRequestInitializer(credential).build();
        return service;
        }
    } 
```

但它从不显示日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:49:43.257

在上面的代码中进行以下更改以使其正常工作

```
static String authToken; 
HttpRequestInitializer requestInitializer = new HttpRequestInitializer() {
      public void initialize(HttpRequest request) throws IOException {
        request.getHeaders().setAuthorization(GoogleHeaders.getGoogleLoginValue(authToken));
      }
    };
    Calendar service = new Calendar.Builder(transport, jsonFactory, requestInitializer) 
```

# c# - 如何检查字符串是否包含值数组？

> ID：11958265
> 
> 赞同：5
> 
> 时间：2012-08-14T18:13:04.860
> 
> 标签：c#, .net, email

我有一组有效的电子邮件地址域。给定一个电子邮件地址，我想看看它的域是否有效

```
string[] validDomains = { "@test1.com", "@test2.com", "@test3.com" };
string email = "test@test1.com" 
```

有没有办法在不使用循环的情况下检查是否`email`包含任何值？`validDomains`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T18:14:46.683

我想向您推荐以下代码：

```
HashSet<string> validDomains = new HashSet<string>
    {
        "test1.com", "test2.com", "test3.com"
    };
const string email = "test@test1.com";

MailAddress mailAddress = new MailAddress(email);
if (validDomains.Contains(mailAddress.Host))
{
    // Contains!
} 
```

[HashSet.Contains 方法](http://msdn.microsoft.com/en-us/library/bb356440.aspx)是一个 O(1) 操作；而数组 - O(n)。所以`HashSet<T>.Contains`速度极快。此外，`HashSet`不存储重复值，并且没有必要将它们存储在您的案例中。

[MailAddress 类](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)表示电子邮件发件人或收件人的地址。它包含邮件地址解析逻辑（只是不要重新发明轮子）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T18:16:18.043

如果你想提高效率，不仅应该避免使用循环，而且应该`HashSet`为允许的域构造一个，这将允许 O(1) 查找：

```
string[] validDomains = { "@test1.com", "@test2.com", "@test3.com" };
HashSet<string> validDomainsHashSet = new HashSet<string>(validDomains);

string email = "test@test1.com";
string domain = email.Substring(email.IndexOf('@'));
bool isValidDomain = validDomainsHashSet.Contains(domain); 
```

从您的域中排除该字符也是有意义的`@`，因为它会存在于所有域中，因此是多余的：

```
string[] validDomains = { "test1.com", "test2.com", "test3.com" };
HashSet<string> validDomainsHashSet = new HashSet<string>(validDomains);

string email = "test@test1.com";
string domain = email.Substring(email.IndexOf('@') + 1);
bool isValidDomain = validDomainsHashSet.Contains(domain); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T18:16:31.790

使用 LINQ 的最简单方法（这也忽略了这种情况）：

```
bool validEmail = validDomains
   .Any(d => email.EndsWith(d, StringComparer.OrdinalIgnoreCase)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T18:16:23.250

```
int index = email.IndexOf("@");
var domain = email.Substring(index)
return validDomains.Any(x=>x == domain); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T18:16:24.727

看一下这个：

```
 string[] validDomains = { "@test1.com", "@test2.com", "@test3.com" };
        string email = "test@test1.com";
        if (validDomains.Contains(email.Substring(email.IndexOf("@"))))
        {

        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T18:17:47.937

以这种方式使用 for each 循环：

```
 string[] validDomains = { "@test1.com", "@test2.com", "@test3.com" };
    string email = "test@test1.com";
foreach (string x in validDomains)
{
    if (email.Contains(x))
    {
        //  Do Something
    }
} 
```

没有以这种方式循环（使用 LINQ）：

```
if(validDomains.Any(s => email.Contains(s))) {
//Do Something 
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-08-14T18:17:26.187

```
validDomains.Any(validDomain => email.EndsWith(validDomain)) 
```

有关详细信息，请参阅[IEnumerable.Any 的文档](http://msdn.microsoft.com/en-us/library/bb534972.aspx)。

# google-apps-script - 脚本编辑器不提供 Google Apps 脚本调试模式

> ID：11958266
> 
> 赞同：2
> 
> 时间：2012-08-14T18:13:07.900
> 
> 标签：google-apps-script, google-apps-script-editor

我无法在脚本编辑器中以调试模式启动我的脚本。代码本身有效，但调试图标为“灰色”。任何意见，将不胜感激。

解决方案：选择了调试图标的功能权限。选择 doGet-function 后，调试模式可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T02:00:24.777

从功能下拉菜单中选择一个功能。

选择功能后，您将能够在调试模式下运行。

# actionscript-3 - 如何让 AS3 facebook API 在自签名 https 站点上初始化

> ID：11958267
> 
> 赞同：0
> 
> 时间：2012-08-14T18:13:08.500
> 
> 标签：actionscript-3, flash, ssl-certificate, facebook-as3-api

我正在使用 AS3 facebook API 设置一个 facebook 应用程序。我做的第一件事是调用 Facebook.init()。当这在我们的正常开发设置（一个正常的 http 站点）上完成时 - 这完美地工作并且我能够访问图表。但是，当我切换到 https 站点（带有自签名证书）时，Facebook.init() 永远不会触发回调。我已正确设置 crossdomain.xml 以允许所有安全性错误。任何人都知道我如何设置它以使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:27:03.720

从 JS 中的 FB.init 获取 accessToken

将 accessToken 传递给 Flash（swf 参数或 ExternalInterface）

使用 accessToken 调用 Facebook.init() 并设置 options.status = true

```
var options:Object = {};
var accessToken:String = null;
if(!StringValidator._isNullOrEmpty(m_swfParameters._accessToken))
{
    options.status = true;
    accessToken = m_swfParameters._accessToken;
}

Facebook.init(m_facebookProvider._appId, _onInitedCallback, options, accessToken);

if(options.status === true)
{
    _onInitedCallback(options, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:29:11.823

事实上，自 8 月以来，Facebook 与 FB API AS3 的连接不再有效……

[使用来自http://code.google.com/p/facebook-actionscript-api/downloads/detail?name=GraphAPI_Examples_1_8_1.zip](http://code.google.com/p/facebook-actionscript-api/downloads/detail?name=GraphAPI_Examples_1_8_1.zip)的 FlashWebExemple.fla

```
 Facebook.init(APP_ID, onInit);

        protected function onInit(result:Object, fail:Object):void {
            trace("on INIT");
            if (result) { //already logged in because of existing session
                outputTxt.text = "onInit, Logged In\n";
                loginToggleBtn.label = "Log Out";
            } else {
                outputTxt.text = "onInit, Not Logged In\n";
            }
        } 
```

没有“在初始化”消息...

任何人 ？

# python - 子类化 static.File

> ID：11958272
> 
> 赞同：5
> 
> 时间：2012-08-14T18:13:16.600
> 
> 标签：python, http, twisted

我是 Twisted 的新手，我在为扭曲的 static.File 进行一些必要的子类化时遇到了麻烦。我正在尝试在子类中设置请求标头。

```
class ResponseFile(static.File):

    def render_GET(self, request):
        request.setHeader('Content-Disposition', ['attachment ; filename="tick_db_export.csv"'])
        static.File.render_GET(self, request)

if __name__ == "__main__":
    from twisted.internet import reactor
    root = ResponseFile('WebFolder')
    testHandler = TestHandler()
    root.putChild('main', testHandler)
    reactor.listenTCP(3650, server.Site(root))
    reactor.run() 
```

代码的第一位是子类定义本身（非常简单），而第二位是我代码的初始化部分（这不是我的全部代码）。我还继承了一个名为 TestHandler 的 resource.Resource 对象。WebFolder 是另一个包含许多静态文件的文件夹。

但是，在调用服务器时，我遇到了大多数这些类型的异常。

```
Unhandled Error
Traceback (most recent call last):
Failure: exceptions.RuntimeError: Producer was not unregistered for / 
```

除了根目录之外，还有许多不同的路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:38:37.317

您的代码中的问题在于`render_GET`方法。它什么也不返回。基本上它必须返回同步响应的字符串和`NOT_DONE_YET`异步响应的值。在您的情况下`render_GET`返回`None`（并且您的连接立即关闭）。

因此，您必须在`render_GET`（添加正确的`return`）中进行较小的更改：

```
def render_GET(self, request):
    request.setHeader('Content-Disposition', ['attachment ; filename="tick_db_export.csv"'])
    return static.File.render_GET(self, request) 
```

如果您检查 twisted.web.static.py 模块，您会发现 File.render_GET 生成生产者并返回`NOT_DONE_YET`使连接保持直到它没有显式关闭（在我们的例子中，在下载文件之后）。

# sql - 光标未打开

> ID：11958275
> 
> 赞同：1
> 
> 时间：2012-08-14T18:13:24.843
> 
> 标签：sql, sap-iq

我正在尝试使用存储在表中的语句创建表。我正在使用带有执行（sql）的游标，如下所示：

```
create table tab
(
  CreateSql varchar(250)
)

insert into tab values ('create table tab1 (id int )')
insert into tab values ('create table tab2 (id int )')
insert into tab values ('create table tab3 (id int )')

  declare cur cursor for
    select createsql
      from tab  

  declare @sql varchar(255)

  open cur
  fetch cur into @sql

  while @@SqlStatus = 0
    begin           
      execute(@Sql)               
      fetch cur into @sql
    end

  close cur
  deallocate cursor cur 
```

如果我运行它，则会出现错误：

> 无法执行语句。游标未打开 SQLCODE=-180, ODBC 3 State="34000"

第一个表 (tab1) 将创建，但其他 (tab2, tab3) 表不会。

如果我用 select sql 替换语句 execute(sql)，脚本将正常工作。

提前感谢您的回答。

PX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:32:22.650

为什么不使用 while loop.using Cursor 在这些情况下过度使用。我不熟悉 sybase 语法，但在 SQL Server 2008 中你可以这样做

```
create table tab
(
  CreateSql varchar(250)
  ,ID int IDENTITY(1,1) 
)

insert into tab values ('create table tab1 (id int )')
insert into tab values ('create table tab2 (id int )')
insert into tab values ('create table tab3 (id int )')

DECLARE @max INT = (SELECT MAX(ID) FROM tab) 
    ,@index int =1
    ,@sql varchar(255)

  while (@index<= @max  )
    begin           

      select @sql= createsql   from tab WHERE ID=@index

      execute(@Sql)  

      SET @index = @index+1
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:22:18.717

IQ 喜欢在第一次提交后关闭游标。

您需要使用 WITH HOLD 子句（或类似的东西）来保持光标打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:49:16.420

我不是 sybase 专家，但看起来您在 fetch 语句中缺少下一个。

```
 fetch next cur into @sql 
```

# javascript - Javascript Math.floor 函数错误或实现之谜？

> ID：11958279
> 
> 赞同：8
> 
> 时间：2012-08-14T18:13:37.843
> 
> 标签：javascript

```
 ​document.writeln(Math.floor(43.9)); 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​则则是却又在浏览器中产生了43。

```
​document.writeln(Math.floor(43.9999));​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

生产 43

```
 ​document.writeln(Math.floor(43.999999999999));​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

再次 43

然而，

```
 document.writeln(Math.floor(43.99999999999999)); 
```

产生44。

小数点后 9 的幻数似乎是 15*。

为什么是这样？

此外， Math.floor 函数是否接受数字作为数字对象或数字值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T18:26:49.943

IEEE 754 双精度二进制浮点格式（这是 JavaScript 用于其*Number*类型的格式）为您提供 15 - 17 位有效十进制数字的精度。

> 这给出了 15 - 17 位有效十进制数字的精度。如果将最多 15 位有效小数的十进制字符串转换为 IEEE 754 双精度，然后再转换回相同的有效小数位数，则最终字符串应与原始字符串匹配；如果将 IEEE 754 双精度转换为具有至少 17 位有效小数的十进制字符串，然后再转换回双精度，则最终数字必须与原始数字 [1] 匹配。

来源：[http ://en.wikipedia.org/wiki/Double-precision_floating-point_format#IEEE_754_double-precision_binary_floating-point_format:_binary64](http://en.wikipedia.org/wiki/Double-precision_floating-point_format#IEEE_754_double-precision_binary_floating-point_format:_binary64)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T18:27:11.780

[双精度浮点数](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)（又名双精度数）能够存储范围非常广泛的值，但精度有限——15-17 位有效数字。如果您执行以下操作，您将看到会发生什么：

```
var x = 43.99999999999999;
var y = 43.999999999999999;

document.writeln(x); // 43.99999999999999
document.writeln(y); // 44
document.writeln(Math.floor(x)); // 43
document.writeln(Math.floor(y)); // 44 
```

您也会在其他语言中看到相同的内容。例如，PHP：

```
echo floor(43.99999999999999); // 43
echo floor(43.999999999999999); // 44 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T18:21:43.177

在 Chrome 中，如果我只是`43.99999999999999999999999`在控制台中输入，它会输出`44`，这可能就是您遇到的问题。浮点数是近似值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T13:19:12.007

您可以同时传递 Number 的实例以及数字文字。

```
Math.floor(43.99999999999999);

Math.floor(new Number(43.99999999999999)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T18:25:02.520

请参阅此解决方法：

[http://jsfiddle.net/k7huV/3/](http://jsfiddle.net/k7huV/3/)

```
var x = 43;
for( var i = 0; i < 16; i++ ){
    if( i == 0 ) x += ".";
    x += "9";   
}
document.writeln(x);
document.writeln(parseInt(x)); 
```

输出：`43.9999999999999999 43`

正确楼层 43.999999999999999 至 43。

# struts-1 - Struts1.2中action类有多少个execute方法是可能的

> ID：11958280
> 
> 赞同：1
> 
> 时间：2012-08-14T18:13:47.630
> 
> 标签：struts-1

嗨 Struts 在 Action 类中有多少执行方法是可能的。

# ruby-on-rails - 向复数资源的基本 URL 添加路由

> ID：11958290
> 
> 赞同：0
> 
> 时间：2012-08-14T18:14:18.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在 Ruby on Rails 中，有没有办法向复数资源的基本 URL 添加另一个 RESTful 操作？我正在寻找这样的东西：

```
resources :groups do
  resources :users do
    put on: :base, to: 'users#update_all'
  end
end 
```

这将生成路线：`[PUT] groups/:group_id/users => users#update_all`

我已经尝试过这样做：

```
resources :groups do
  resources :users
  put 'users', on: :member, to: 'users#update_all'
end 
```

但这并不能保留`params[:group_id]`控制器中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:16:28.757

```
resources :users do
  collection do
    put '' => 'users#update_all' ## PUT /users
  end
end 
```

**更新**

建议这样做：

```
resources :users do
  collection do
    put 'update_all' ## PUT /users/update_all
  end
end 
```

两者都路由到用户控制器的 update_all 操作。

**资源**

*   [http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

# c++ - 在opengl中删除纹理

> ID：11958298
> 
> 赞同：4
> 
> 时间：2012-08-14T18:14:45.940
> 
> 标签：c++, windows, opengl, textures

我必须在程序存在之前删除我创建的所有纹理（使用 glDeleteTextures），还是 OpenGL 自己删除纹理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:46:51.070

根据管理 OpenGL 上下文的内容，您可能不需要删除纹理。例如，请参阅[此问题](https://stackoverflow.com/q/2034272/1272627)。

不过，似乎确实有共识，最好自己清理，但在使用 C++ RAII 时要小心！如果在没有 OpenGL 上下文的情况下创建或销毁通过 RAII 管理 OpenGL 对象的 C++ 对象，则会发生未定义的行为。

**请参阅：[面向对象的语言问题](http://www.opengl.org/wiki/Common_Mistakes#The_Object_Oriented_Language_Problem)**

OpenGL API 和 OpenGL 对象不能直观地映射到 C++ OOP 原则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:55:06.133

一旦所有可以访问它们的上下文都被销毁，OpenGL 资源就会被隐式释放。当客户端终止时，进程的 OpenGL 上下文被破坏；然而，在间接 GLX 上下文对象的情况下，可以在 X11 客户端之间共享，因此只有在最后一个可以访问它们的客户端终止后才能释放它们。

然而，在自己之后进行清理始终是一个好习惯。

# google-analytics - 谷歌分析过滤器不能应用于过去的数据？

> ID：11958301
> 
> 赞同：1
> 
> 时间：2012-08-14T18:14:58.733
> 
> 标签：google-analytics

我只知道 GA 过滤器不能应用于历史数据，那么这是否意味着过滤器仅适用于启用时的日期？例如，我在 8 月 15 日添加了一个 IP 地址过滤器，然后在 8 月 16 日将其删除。那么报告将始终在 8 月 15 日过滤该 IP 地址的数据，即使在我删除了过滤器之后，它是这样工作的吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:56:41.457

是的，这就是它的工作方式。最好始终拥有一个未过滤的单独主配置文件，以防您执行此类操作并需要该过滤期间的数据。

# c# - c# - 如何从 HTML 页面中读取特定行

> ID：11958306
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:15:12.727
> 
> 标签：c#

我有一个 2 行的 HTML 页面。这两行是关于更新的，但此更新只能由特定用户下载。基本上 HTML 文件包含：

```
beast
1.11 
```

第一行是用户，第二行是版本。没有 HTML 标题或其他行。

*   现在我的问题是，我真的不知道如何阅读**第二**行

可以通过以下方式轻松操作文本文档：

```
File.ReadLines("Text.txt").ElementAt(1); 
```

是否有类似的命令可用于逐行读取 HTML 文件？

非常感谢您的回复！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:17:06.300

您可以使用相同的代码来阅读 HTML。
HTML 文件是碰巧包含 HTML 标记的普通文本文件。

如果要*解析*HTML 标记，请使用 HTML Agility Pack（在 NuGet 上）。

# c++ - 宏长字符串关注

> ID：11958308
> 
> 赞同：1
> 
> 时间：2012-08-14T18:15:15.040
> 
> 标签：c++, string, macros

在我的应用程序中，我想将版本 ID 添加为宏并在应用程序的多个部分中使用它。正如[这个问题](https://stackoverflow.com/questions/5256313/c-c-macro-string-concatenation)中所解释的，我可以很容易地用这个生成一个字符串：

```
#define APP_VER "1.0"
#define APP_CAPTION "Stackoverflow example app v." ## APP_VER 
```

我现在的问题是，在某些部分，我需要将标题作为 unicode 字符串。

我尝试了以下方法：

```
MessageBoxW(0,_T(APP_CAPTION),L"Minimal Counterexample",0); 
```

但它给出了错误“不能关注广泛的'Stackoverflow示例应用程序v。' 狭窄的'1.0'"

我也试过

```
#define WIDE_CAPTION L ## APP_CAPTION 
```

但这只是给出了“LAPP_CAPTION”没有定义。

我知道我可以在运行时将字符串转换为 unicode，但这很麻烦。有人可以为我的问题提供宏观层面的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:16:56.877

你只想：

```
#define APP_CAPTION "Stackoverflow example app v." APP_VER 
```

因为`APP_VER`已经是一个字符串。

字符串连接是免费发生的，例如：

```
const char *str = "hello " "world" 
```

完整的可编译示例：

```
#include <iostream>
#define APP_VER "1.0"
#define APP_CAPTION "Stackoverflow example app v." APP_VER

int main() {
  std::cout << APP_CAPTION << "\n";
  return 0;
} 
```

# asp.net - 错误 CS1729：“附件”不包含采用 2 个参数的构造函数

> ID：11958310
> 
> 赞同：0
> 
> 时间：2012-08-14T18:15:20.977
> 
> 标签：asp.net, visual-studio-2010, c#-4.0

我正在尝试通过 smtp 协议发送带有附件的邮件，所以我在[http://csharpdotnetfreak.blogspot.com/2009/10/send-email-with-attachment-in-aspnet.html](http://csharpdotnetfreak.blogspot.com/2009/10/send-email-with-attachment-in-aspnet.html)找到了本教程。并尝试了以下简单的编码，该对象已正确创建用于附件，但它告诉我不带 2 个参数的错误。

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Net.Mail;

public partial class composemail : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
}
protected void SendMail()
{
    MailMessage mail = new MailMessage();
    mail.To.Add(YourEmail.Text);
    mail.From = new MailAddress(YourName.Text);
    mail.Subject = YourSubject.Text;
    mail.Body = Comments.Text;
    mail.IsBodyHtml = true;
    if (FileUpload1.HasFile)
    {
        mail.Attachments.Add(new Attachment(FileUpload1.PostedFile.InputStream, FileUpload1.FileName));
    }
}
protected void Button1_Click(object sender, EventArgs e)
{
    SendMail();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:35:02.397

正如 M4N 提到的，您不能直接在课堂上使用代码。您需要将其封装在一个方法中：

```
using System.IO;
using System.Net.Mail;

namespace AttachmentTest
{
  class Program
  {
    static void Main(string[] args)
    {
      var mail = new MailMessage();
      var fs = new FileStream("somepath", FileMode.Open);
      var att = new Attachment(fs, "");
      mail.Attachments.Add(att);
    }
  }
} 
```

# .net - 寻找开源 WCF 代理生成器

> ID：11958316
> 
> 赞同：0
> 
> 时间：2012-08-14T18:15:42.160
> 
> 标签：.net

WCF 是否有任何开源代理生成器？Visual Studio 中内置的那个有点糟糕，我想要一个效果更好或可以修改的版本。

例如，我确实需要 OnXxxChanging 和 OnXxxChanged 部分方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:38:03.667

我假设你已经知道[wscf.blue](http://wscfblue.codeplex.com/)

我不确定他们的数据合同生成器是否满足您的需求，但它带有源代码

虽然我从未使用过它，但我的印象是您还可以扩展 WCF 元数据管道，以用更复杂的东西替换代码生成。这是[msdn](http://msdn.microsoft.com/en-us/library/ms730243.aspx)文档。IWsdlImportExtension[看起来](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iwsdlimportextension.aspx)很有趣。

# java - 如何使用 Google gdata-client API 将数据单元格插入到 Google 电子表格中

> ID：11958321
> 
> 赞同：1
> 
> 时间：2012-08-14T18:16:03.907
> 
> 标签：java, spreadsheet, gdata

我需要使用 JAVA 用一些记录填充谷歌电子表格。为此，我使用 Google gdata 客户端 API 连接到相应的 google 电子表格并查询数据。然而，虽然我设法从电子表格中检索数据，但我仍在努力寻找一种以编程方式将一些数据单元格插入谷歌电子表格的方法。我尝试了几种方法和示例，但均未成功。感谢非常熟悉 gdata 客户端 API 的人是否可以对此有所了解。

下面显示的是我在将数据插入电子表格时尝试过的一种方法，但没有任何运气。

```
SpreadsheetService service = getSpreadSheetService();
WorksheetEntry currentWorkSheet = getCurrentWorkSheetEntry();

ListFeed listFeed = getListFeed(service, currentWorkSheet);
ListEntry row = listFeed.createEntry();
row.getCustomElements().setValueLocal("ID", "1");
row.getCustomElements().setValueLocal("NAME", "Prabath");

service.insert(currentWorkSheet.getListFeedUrl(), row); 
```

上述代码片段引发以下错误。

```
Caused by: com.google.gdata.util.NotImplementedException: Not Implemented
Bad or unsupported projection for this type of operation.

    at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:617)
    at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
    at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
    at com.google.gdata.client.Service.insert(Service.java:1409)
    at com.google.gdata.client.GoogleService.insert(GoogleService.java:613) 
```

感谢您对此的任何帮助。

在此先感谢，普拉巴斯

# c# - 在 XAML 模板中设置图像属性

> ID：11958329
> 
> 赞同：0
> 
> 时间：2012-08-14T18:16:19.823
> 
> 标签：c#, wpf, templates, xaml

所以我有一个带有图像和文本块的按钮模板。我拥有的图像太大，我想缩小它们。

```
<Style x:Key="ImageButton" TargetType="Button">
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <StackPanel Orientation="Vertical">
                <Image Source="{Binding Path=(local:ButtonProperties.Image), RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}" />
                <ContentPresenter Content="{Binding Path=Content, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}"></ContentPresenter>
                </StackPanel>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

是我拥有的特定代码块。但是，当我尝试添加`Height="X"`到模板时，出现错误。有没有办法在模板本身中指定图像大小？

# objective-c - 获取正确的字典索引

> ID：11958338
> 
> 赞同：0
> 
> 时间：2012-08-14T18:16:37.597
> 
> 标签：objective-c, indexing, nsmutablearray

```
 NSMutableArray *tmpMutArr = [NSMutableArray arrayWithArray:allObjectsArray];
    NSLog(@"The content of array is%@",tmpMutArr);

    int index;

     for (int i=0;i<[tmpMutArr count];i++) 
     {
     if([[tmpMutArr  objectAtIndex:i] isKindOfClass:[NSDictionary class]])
     {
     NSMutableDictionary *tempDict = [tmpMutArr  objectAtIndex:i];
         if([[tempDict valueForKey:@"Name"] isEqualToString:[NSString stringWithFormat:@"%@", nameString]])
     {
     index = i;

     }
     }
     }

     [tmpMutArr replaceObjectAtIndex:index withObject:[NSDictionary dictionaryWithDictionary:mutDict]]; 
```

这段代码并没有按照我的意愿替换**tmpMutArr 中的匹配对象**，而是替换**了 tmpMutArr 中的所有对象**。如何只替换我想要的索引？

我知道 tmpMutArr 包含替换之前的所有对象，所以我只需要正确指定我认为的索引。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:19:31.020

```
NSMutableArray *tmpMutArr = [NSMutableArray arrayWithArray:allObjectsArray];
NSLog(@"The content of array is%@",tmpMutArr);

int index;

for (int i=0;i<[tmpMutArr count];i++) 
{
    if([[tmpMutArr  objectAtIndex:i] isKindOfClass:[NSDictionary class]])
    {
        NSMutableDictionary *tempDict = [tmpMutArr  objectAtIndex:i];
        if([[tempDict valueForKey:@"Name"] isEqualToString:nameString])
        {
            index = i;
            break; // << added break
        }
    }
}

[tmpMutArr replaceObjectAtIndex:index withObject:[NSDictionary dictionaryWithDictionary:mutDict]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:31:36.400

也许，你应该尝试这个版本......你没有指定需要哪个索引，我想是第一个。

```
for (int i=0;i<[tmpMutArr count];i++) {
     if([[tmpMutArr  objectAtIndex:i] isKindOfClass:[NSDictionary class]]) {
         NSMutableDictionary *tempDict = [tmpMutArr  objectAtIndex:i];
         if([[tempDict valueForKey:@"Name"] isEqualToString:[NSString stringWithFormat:@"%@", nameString]]) {
             index = i;
             break; // when you find the first one, you should go out from the iteration
         }
     }
 } 
```

# django - 在负载均衡器后面处理 Django 站点上的上传

> ID：11958340
> 
> 赞同：3
> 
> 时间：2012-08-14T18:16:42.057
> 
> 标签：django, file-upload, load-balancing

我有一个中小型 Django 项目，其中客户端被迫更改主机。新主机说服他们，他们肯定需要在负载平衡器后面的几个 Web 服务器（并将数据库断开到第三台服务器）。我已将所有内容移植到新设置中，但我还不能让它生效，因为我不确定在网站上处理文件上传的最佳方式是什么，因为它们只会被推送到用户当前所在的服务器连接到。考虑到三台服务器（如果必须的话，数据库可以兼作静态文件服务器），处理这种情况的最干净和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:52:35.110

简单的解决方案，虽然有一些延迟，但无法扩展到多台服务器之外 - 在主机之间使用 rsync。只需将其添加到 cron 以双向上传目录同步，粘性会话在这里也会有所帮助 - 这样上传者会立即看到他们的文件可用，其他访问者将能够在下一次 rsync 完成后获取文件。

这样您还可以获得免费备份。

```
/usr/bin/rsync -url --size-only -e "ssh -i servers_ssh.key" user@server2:/dir /dir 
```

（你必须在两台服务器上的 cron 中都有这个）

# facebook - 如何验证用户身份并限制 Facebook 应用程序仅从服务器端发布？

> ID：11958341
> 
> 赞同：0
> 
> 时间：2012-08-14T18:16:46.967
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我正在使用 Flash（使用 Adob​​e AIR）为 iOS（可能还有 Android）创建游戏，并且正在尝试集成 Facebook。我已经阅读了很多类似的问题，但我仍然无法得到明确的答案。使用我的应用程序：

用户将能够在客户端使用 Facebook 登录。（这样做，使用 facebook-actionscript-api）

但是，用户不应在服务器端发布任何内容，以避免滥用（例如“我做了 9999999 分”的帖子）。

我有一个服务器（ASP.NET 4.0），我的服务器应该能够代表玩家发帖。（如“我取得了 1234 分”，经过有效性检查）

如何在服务器端验证我的 Facebook 用户，限制用户在客户端使用我的应用程序发布，并让我的服务器为该用户发布帖子？

是否有任何选项可以将发布权限仅授予服务器？Facebook 的服务器白名单会起作用吗？但是我将如何从客户端为用户进行 API 调用（或者我应该在获得令牌后将所有逻辑移动到服务器端？

谢谢，坎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:39:18.633

我说最好的选择是为用户分配一个令牌并在服务器端做作业。

# ios - 通过 JS api 调用操作时，有没有办法使用现有的 Facebook 应用程序令牌？

> ID：11958342
> 
> 赞同：1
> 
> 时间：2012-08-14T18:16:49.573
> 
> 标签：ios, facebook

我有一个使用 Facebook 的混合原生/HTML iOS 应用程序。在应用程序中，我通过单点登录 API 对用户进行了身份验证，并且我有一个有效的身份验证令牌。在 Web 视图中，我嵌入了一个也使用 FB 的 Web 组件（在我的例子中，我们的应用页面有一个 Like 框和按钮）。如果我单击 Like 按钮，我将被迫在浏览器的上下文中再次进行身份验证。有没有办法让我在此 Web 视图中利用容器应用程序获得的令牌，以避免第二次身份验证？

# asp.net - 通过 .resx 与 asp.net Web 应用程序中的静态图像检索图像

> ID：11958343
> 
> 赞同：0
> 
> 时间：2012-08-14T18:16:52.433
> 
> 标签：asp.net, resources, resource-management

我们目前的场景似乎是为 .resx 文件量身定制的，但我的理解有点模糊，我正在寻找一些钙化。

我们的 webApp 为我们不同的客户设置了不同的皮肤，但对于所有客户来说差异并不相同。我的意思是一个客户可能只想更改徽标，而另一个客户可能想更改徽标、一些按钮，也许还有背景颜色。

为了满足这个要求，我创建了一个 default.resx，其中包含我们的默认皮肤、所有元素图像、字符串和颜色代码。还有一个 client.resx，它只包含那些对客户端唯一的元素（不同的徽标和按钮）或其他任何东西。

然后我创建了一个资源管理器，它将检查 client.resx 中的资源，并将其返回到页面，如果资源不存在，那么它将从 default.resx 中检索图像。

其他开发人员之一说这是低效的，而不是使用 .resx 文件，我们应该有一个图像文件夹树并重新工具资源管理器以使用图像路径位置而不是 .resx 资源。

我对如何通过 .resx 文件提供图像以及如何通过文件夹树提供图像知之甚少，因此无法反驳他的说法。我认为通过 .resx 和文件夹中的图像提供图像所需的时间充其量可以忽略不计，但我无法找到有关此的任何特定信息。重新设计资源管理器以按照他喜欢的方式进行操作不会花费太多时间，但我想在我将时间投入到这个过程之前确保他的声明是合法的。

作为旁注，我们正在谈论 100 多张非常有用的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:36:45.990

我想建议您让您的客户有机会更改 CSS 文件，而不是 resx 文件来更改背景/颜色/图像等。因此您将拥有一些客户可以覆盖的默认 CSS 文件（他们将拥有有机会上传他们的 css 文件或只是在服务器上替换它）。在您的默认 CSS 中，您应该有 CSS 类，其中包含指向您的图像的链接作为背景（徽标等）。因此，如果客户想要更改徽标/图像/颜色 - 他们可以将一些图像放在服务器上 - 替换 CSS 文件并检查一切是否正常。对于字符串，只需继续使用 resx 文件。

并回答您的问题：如果您将拥有 100 多张图像-我认为将文件放在某个文件夹而不是 resx 文件中会更好（您想将所有图像作为原始数据放入 resx 文件中，对吗？或者您将拥有只是链接到正确的图像）。如果文件将包含所有图像作为原始数据，则文件可能会很大，因此要解析它，您将需要大量 RAM。而且我不认为你会在一个地方需要它们，也许你会在一天中只显示一些图像，对，所以最好不要加载它。但是，如果您的所有图像都将显示在主页（或母版页等）上 - 如果您使用缓存，您将不会看到性能上有很大差异。

# jboss - 在 JBoss 7.1.1 上调用 EJB 所需的 jar

> ID：11958347
> 
> 赞同：1
> 
> 时间：2012-08-14T18:17:01.270
> 
> 标签：jboss, ejb, ejb-3.0, jboss7.x

我一直在关注这里的教程： [https ://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)

它对启动带有 EJB 3.0 的 JBoss 7.1.1 项目有很大帮助。我的 EAR 已启动服务器并运行良好。我现在遇到的问题是客户。我认为我的类路径中没有所有必需的 JAR。我收到此错误： http: [//pastebin.com/0mMBKjGJ](http://pastebin.com/0mMBKjGJ)

我找到了本教程：[http](http://middlewaremagic.com/jboss/?p=1177)
://middlewaremagic.com/jboss/?p=1177 ，其中包含应包含的 JAR 列表。这些不是 JBoss 7.1.1 模块文件夹中的 JAR。我应该使用哪个 JAR？

# c# - 对简单代理服务器进行故障排除

> ID：11958350
> 
> 赞同：1
> 
> 时间：2012-08-14T18:17:15.393
> 
> 标签：c#, .net, network-programming

我使用 System.Net 和 System.Net.Sockets 的同步方法和类在 C# 中编写了一个简单的代理服务器。大部分事情都完成了，除了一个小故障。

当我从代理客户端（比如 www.google.com）浏览 url 时，它可以正常打开。当我进行关键字搜索时，这也很好。但是，当我点击搜索结果时，客户端再次在屏幕上看到 google.com 主页！！但是，客户端浏览器 url 栏仍然显示单击的搜索结果 url。也许这是因为谷歌结果页面没有提供指向结果 url 的直接链接，而是提供了返回谷歌本身的链接，我认为我的代码中的中继逻辑无法处理这个问题。你能帮我解决这个问题吗？我的代码如下：（ThreadHandleClient() 方法是处理所有客户端请求并中继请求和响应的重要方法）

```
 public void Start(IPAddress ip, int port)
    {
        try
        {
            TcpListener listener = new TcpListener(ip, port);
            listener.Start(100);
            while (!stopFlag)
            {
                Socket client = listener.AcceptSocket();
                IPEndPoint rep = (IPEndPoint)client.RemoteEndPoint;
                Thread th = new Thread(ThreadHandleClient);
                th.Start(client);
            }

            listener.Stop();
        }
        catch (Exception ex)
        {
            Debug.Print("START: " + ex.Message);
        }
    }

    public void Stop()
    {
        stopFlag = true;    
    }

    public void ThreadHandleClient(object o)
    {
        try
        {
            Socket client = (Socket)o;
            Debug.Print("lingerstate=" + client.LingerState.Enabled.ToString() + " timeout=" + client.LingerState.LingerTime.ToString());
            NetworkStream ns = new NetworkStream(client);
            //RECEIVE CLIENT DATA
            byte[] buffer = new byte[2048];
            int rec = 0, sent = 0, transferred = 0, rport = 0;
            string data = "";
            do
            {
                rec = ns.Read(buffer, 0, buffer.Length);
                data += Encoding.ASCII.GetString(buffer, 0, rec);
            } while (rec == buffer.Length);

            //PARSE DESTINATION AND SEND REQUEST
            string line = data.Replace("\r\n", "\n").Split(new string[] { "\n" }, StringSplitOptions.None)[0];
            Uri uri = new Uri(line.Split(new string[] { " " }, StringSplitOptions.None)[1]);
            Debug.Print("CLIENT REQUEST RECEIVED: " + uri.OriginalString);
            if (uri.Scheme == "https")
            {
                rport = 443;
                Debug.Print("HTTPS - 443");

                //rq = HttpVersion + " 200 Connection established\r\nProxy-Agent: Prahlad`s Proxy Server\r\n\r\n";
                //ClientSocket.BeginSend(Encoding.ASCII.GetBytes(rq), 0, rq.Length, SocketFlags.None, new AsyncCallback(this.OnOkSent), ClientSocket);
            }
            else
            {
                rport = 80;
                Debug.Print("HTTP - 443");
            }
            IPHostEntry rh = Dns.GetHostEntry(uri.Host);
            Socket webserver = new Socket(rh.AddressList[0].AddressFamily, SocketType.Stream, ProtocolType.IP);
            webserver.Connect(new IPEndPoint(rh.AddressList[0], rport));
            byte[] databytes = Encoding.ASCII.GetBytes(data);
            webserver.Send(databytes, databytes.Length, SocketFlags.None);
            Debug.Print("SENT TO SERVER. WILL NOW RELAY: " + data);

            //START RELAY
            buffer = new byte[2048];
            bool firstTime = true;
            rec = 0;
            data = "";
            do
            {
                transferred = 0;
                do
                {
                    if (webserver.Poll((firstTime ? 9000 : 2000) * 1000, SelectMode.SelectRead))
                    {
                        rec = webserver.Receive(buffer, buffer.Length, SocketFlags.None);
                        Debug.Print("RECEIVED FROM WEBSERVER[" + rec.ToString() + "]: " + Encoding.ASCII.GetString(buffer, 0, rec));
                        firstTime = false;
                        sent = client.Send(buffer, rec, SocketFlags.None);
                        Debug.Print("SENT TO CLIENT[" + sent.ToString() + "]: " + Encoding.ASCII.GetString(buffer, 0, rec));
                        transferred += rec;
                    }
                    else
                    {
                        Debug.Print("No data polled from webserver");
                    }
                } while (rec == buffer.Length);

                Debug.Print("loop-1 finished");

                //if (transferred == 0)
                //     break;

                //transferred = 0;
                rec = 0;
                do
                {
                    if (client.Poll(1000 * 1000, SelectMode.SelectRead))
                    {
                        rec = client.Receive(buffer, buffer.Length, SocketFlags.None);
                        Debug.Print("RECEIVED FROM CLIENT: " + Encoding.ASCII.GetString(buffer, 0, rec));

                        sent = webserver.Send(buffer, rec, SocketFlags.None);
                        Debug.Print("SENT TO WEBSERVER[" + sent.ToString() + "]: " + Encoding.ASCII.GetString(buffer, 0, rec));
                        transferred += rec;
                    }
                    else
                    {
                        Debug.Print("No data polled from client");
                    }
                } while (rec == buffer.Length);
                Debug.Print("loop-2 finished");

            } while (transferred > 0);
            Debug.Print("LOOP ENDS. EXITING THREAD");
            client.Close();
            webserver.Close();
        }
        catch (Exception ex)
        {
            Debug.Print("Error occured: " + ex.Message);
        }
        finally {
            Debug.Print("Client thread closed");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:43:06.740

经过反复试验，我找到了解决方案，因此我正在回答我自己的问题。我的中继逻辑的问题在于它曾经以两种方式中继，即从 webserver->client 和 client->webserver。我意识到中继第二部分可能会导致重定向问题，因为在重定向标头的 url 部分（“GET [http://debian.org](http://debian.org)HTTP/1.1") 会突然改变，因此它与被中继的网络服务器不同！！例如，google 重定向指向 debian.org，而代理仍将中继来自 google.com 而不是 debian 的流量.org. 为避免这种情况，我删除了第二个中继部分（即客户端->网络服务器）。如果客户端发送新请求，最好在单独的线程中处理，以便将其定向到正确的 url 主机. 所以，我所要做的就是在我的中继逻辑中注释掉第二个内部循环：

```
 //rec = 0;
                //do
                //{
                //    if (client.Poll(3000 * 1000, SelectMode.SelectRead))
                //    {
                //        rec = client.Receive(buffer, buffer.Length, SocketFlags.None);
                //        Debug.Print("RECEIVED FROM CLIENT: " + Encoding.ASCII.GetString(buffer, 0, rec));

                //        sent = webserver.Send(buffer, rec, SocketFlags.None);
                //        Debug.Print("SENT TO WEBSERVER[" + sent.ToString() + "]: " + Encoding.ASCII.GetString(buffer, 0, rec));
                //        transferred += rec;
                //    }
                //    else
                //    {
                //        Debug.Print("No data polled from client");
                //    }
                //} while (rec == buffer.Length);
                //Debug.Print("loop-2 finished"); 
```

# qt - 如何在 QT 中将文本插入文本文件的中间？

> ID：11958351
> 
> 赞同：1
> 
> 时间：2012-08-14T18:17:19.750
> 
> 标签：qt, text, insert

我正在编写一个在硬件单元上执行多个测试的程序，并记录每个测试的结果和执行测试所采取的步骤。诀窍是我希望程序在这些结果可用时将它们记录到文本文件中，这样如果程序崩溃，已经获得的结果不会丢失，并且日志可以帮助调试崩溃。

例如，假设一个程序由两个测试组成。如果程序已完成第一个测试并正在处理第二个测试，则日志文件将如下所示：

```
Results:
Test 1 Result A: Passed
Test 1 Result B: 1.5 Volts

Log:
Setting up instruments.
Beginning test 1.
[Steps in test 1]
Finished test 1.
Beginning test 2.
[whatever test 2 steps have been completed] 
```

第二次测试完成后，日志文件将如下所示：

```
Results:
Test 1 Result A: Passed
Test 1 Result B: 1.5 Volts
Test 2 Result A: Passed
Test 2 Result B: 2.0 Volts

Log:
Setting up instruments.
Beginning test 1.
[Steps in test 1]
Finished test 1.
Beginning test 2.
[Steps in test 2]
Finished test 2.
All tests complete. 
```

我该怎么做呢？我一直在查看 QFile 和 QTextStream 的帮助文件，但我没有看到在现有文本中间插入文本的方法。我不想创建单独的文件并在最后合并它们，因为如果发生崩溃，我最终会得到单独的文件。我也不想每次进行更改时都从头开始编写文件，因为似乎应该有一种更快、更优雅的方式来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:18:23.560

[QFile.readAll](http://qt-project.org/doc/qt-4.8/qiodevice.html#readAll)会将整个文件读入[QByteArray](http://qt-project.org/doc/qt-4.8/qbytearray.html#insert)。在 QByteArray 上，您可以使用 insert 在中间插入文本，然后再次将其写回文件。

或者你可以使用经典的 c 风格，它可以在文件指针的帮助下修改中间的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:21:00.223

正如@Roku 指出的那样，没有内置的方法可以通过重写将数据插入文件中。但是，如果您知道区域的大小，即，如果您要写入的文本具有固定长度，那么您可以在文件中写入一个空白区域并稍后替换它。检查 [此](https://stackoverflow.com/questions/2530274/how-to-overwrite-only-part-of-a-file-in-c)讨论以覆盖文件的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T21:22:21.880

我最终选择了“从头开始编写文件”方法，我在我的问题中提到过犹豫不决。这种技术的好处是它会生成一个文件，即使在发生崩溃的情况下，因为日志和结果从一开始就不会放在不同的文件中。此外，仅在添加新结果时才会重写文件（很少发生），而更新日志意味着像往常一样简单地将文本附加到文件中。我仍然有点惊讶，没有办法让操作系统为您将文本插入文件中。

哦，对于那些绝对必须尽可能高效地拥有此功能的人，以下内容可能有用： http: [//www.codeproject.com/Articles/17716/Insert-Text-into-Existing-Files-in -C-无温度](http://www.codeproject.com/Articles/17716/Insert-Text-into-Existing-Files-in-C-Without-Temp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:31:23.503

您只是不能在文件中间添加更多内容。我会使用两个单独的文件，另一个用于结果，另一个用于日志。

# java - JVM捕获InterruptedException时是否需要退出

> ID：11958354
> 
> 赞同：3
> 
> 时间：2012-08-14T18:17:28.173
> 
> 标签：java, jvm, signals, interrupted-exception

正如标题所暗示的，我们是否需要在得到 InterruptedException 时强制 jvm 退出？我问的原因是我对（Unix）中断信号有点困惑。当我们在 java 应用程序运行时按 Ctrl-C 时，阻塞线程会得到 InterruptedException 吗？

简单来说，
1) 何时以及为何抛出 InterruptedException？
2）当JVM从外部中断或杀死时（如Unix命令），线程会被中断吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:22:01.110

不，通常您不会退出 JVM 以响应`InterruptedException`.

`InterruptedException`可能在另一个线程调用其方法后在一个线程中引发[`interrupt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)。它与硬件中断或操作系统信号没有任何关系。中断是一种告诉线程停止它正在做的事情并尽快退出而不会使共享内存处于损坏状态的方法。

线程只有在明确描述了它们如何响应中断时才应该被中断。通常，这会例如响应用户交互（如按下“取消”按钮）来完成。

通常，中断只影响单个线程，应用程序的其余部分继续运行。但是，我可以设想在 JVM 中安装一个信号处理程序，通过干净地关闭整个服务器来响应信号；这可能需要中断请求进程线程和其他线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:21:40.120

中断异常与 JVM 错误条件无关，它是休眠线程在正常事件过程中被唤醒（通过 thread.interrupt()）时收到的内容。

# ios5 - 带有容器控制器和 UINavigationController 的 UIViewController 层次结构中出现意外的 UIView 偏移

> ID：11958357
> 
> 赞同：0
> 
> 时间：2012-08-14T18:17:41.213
> 
> 标签：ios5, uiview, uiviewcontroller

我有一个带有许多子视图控制器的 UINavigationController，其中一些是容器控制器。最后添加的子 UIViewController（绿色背景）的 UIView 框架布局有它的父背景（黄色），当它不应该时。

![在此处输入图像描述](../Images/a39a3d40fddb1e6a28988774554b49d8.png)

如何布局所有内容，以便所有视图都适合导航栏下方的屏幕范围，而不会出现奇怪的偏移？

UIViewController 层次结构，从我的 AppDelegate 开始：

```
UINavigationController rootViewController:FrontFacadeViewController < UIViewController
    view (0,0) dim:(320x460)

    => StandardCoverViewController < UIViewController
    added as addSubview of FrontFacadeViewController's view]    
    view: (0,0) dim:(320x460)       

        => ConfigurationViewController < UIViewController
        added by pushing onto self.navigationController
        view: (0,20) (320x460)

            => GearViewController < UIViewController
            added as subview of ConfigurationViewController's view 
            view: (0,0) (320x416) 
```

以下是所有视图控制器的创建方式：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    FrontFacadeViewController *frontController = [[FrontFacadeViewController alloc]
        initWithBundle:[NSBundle mainBundle]];

    _appNavigationController = [[UINavigationController alloc] 
        initWithRootViewController:frontController];        
} 
```

FrontFacadeViewController：

```
// FrontFacadeViewController determines a particular view controller to present 
// based on some business logic.
// Because of this, it adds child UIViewControllers using container controllers.
//
- (void)viewDidLoad {
    StandardCoverViewController *controller = [StandardCoverViewController alloc] initWithNibName:nil bundle:self.nibBundle];

    [self addChildViewController:controller];
    [controller didMoveToParentViewController:self];    
    [self.view addSubview:controller.view];    
    [controller didMoveToParentViewController:self];    
}

- (IBAction)onButtonPress {
    ConfigurationViewController *controller = [[ConfigurationViewController alloc] initWithNibName:nil bundle:self.nibBundle];
    [self.navigationController pushViewController:controller animated:YES];        
} 
```

ConfigurationViewController：（黄色背景）

```
- (void)viewDidLoad {
    [self.view setBackgroundColor:[UIColor yellowColor]];
    GearViewController *controller = [[GearViewController alloc] initWithNibName:nil bundle:self.nibBundle];
    [self addChildViewController:controller];
    [self.view addSubview:controller.view];
    [controller didMoveToParentViewController:self];    
} 
```

GearViewController：（绿色背景）

```
- (void)viewDidLoad {
    [self.view setBackgroundColor:[UIColor greenColor]];
    // nothing special
} 
```

我做这一切都错了吗？

# jsf - 使用@predestroy 方法在会话结束时执行未决指令？

> ID：11958361
> 
> 赞同：2
> 
> 时间：2012-08-14T18:17:50.157
> 
> 标签：jsf, jsf-2, session-scope

在会话范围的 bean 中的 Web 应用程序中的用户操作的上下文中存储待处理的执行列表是否安全，然后通过带`@Predestroy`注释的方法在会话结束时可靠地执行这些操作（*我的意思是，在方法的上下文中安全性`@predestroy`没有被调用 &因此在某些情况下没有执行操作*！？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:05:41.510

您可能想考虑将您的逻辑移动到 HttpSessionListener 实现（它是一个接口）。您将触发 sessionDestroyed 事件（通过在您的具体实现中实现该方法）。

它非常容易使用，也是处理这类事情的好地方（我在当前产品中实现了一个作为 JMX bean 来在运行时处理控制会话）。

TIA

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-28T07:31:36.150

在 @preDestroy 方法中存储挂起的执行或数据库提交是完全安全的。在这种状态下，托管 bean 不会被销毁。因此托管 bean 的状态将与 bean 内部的普通方法调用相同。请参考以下文档。

[http://docs.oracle.com/javaee/6/tutorial/doc/gmgkd.html#gmghg](http://docs.oracle.com/javaee/6/tutorial/doc/gmgkd.html#gmghg)

“使用@PreDestroy 注解准备销毁托管bean 准备销毁托管bean 指定生命周期回调方法，该方法表示应用程序组件即将被容器销毁。

在托管 bean 类或其任何超类中，准备销毁托管 bean。在此方法中，在销毁 bean 之前执行所需的任何清理，例如释放 bean 一直持有的资源。

使用 javax.annotation.PreDestroy 注释对方法的声明进行注释。CDI 在开始销毁 bean 之前调用此方法。”

# android - 将自定义标题栏应用于整个应用程序而不更改每个活动？

> ID：11958366
> 
> 赞同：2
> 
> 时间：2012-08-14T18:18:09.400
> 
> 标签：android, titlebar

现在我在它自己的 XML 布局文件中有我漂亮的自定义标题栏，我有我的自定义主题和样式 XML 文件。从我的 Activity 类中，我可以调用它，它看起来很棒。

问题是我的应用程序有 14 个活动，每个活动都有相关的布局文件。如果我想在我的应用程序中看到相同的标题栏，即在我的所有活动中，我看到的两个主要策略是：

1.  `<include layout="@layout/my_title_bar" />`在每个布局文件中为我的标题栏添加一个

...或者...

1.  更改我所有的 Activity 类以从调用新标题栏的一些常见 Activity 派生

在我开始做其中一个之前，我只是想确保没有更多的“集中式”方式来做这件事，比如在清单中。没有必要在每个活动中声明默认标题栏，它没有对于自定义标题栏等应用程序范围的功能，必须为每个活动单独更改似乎是不对的。

提前感谢您的任何提示！

# linux - 仅当当前行中存在字符串时才替换

> ID：11958369
> 
> 赞同：40
> 
> 时间：2012-08-14T18:18:32.160
> 
> 标签：linux, shell, sed

我有一条线，例如：

```
sed -i 's/mystring/newstring/' $target 
```

此命令将全部更改`mystring`为`newstring`.

我现在想要的是：当程序看到时，如果字符串存在与否`mystring`，我如何检查当前行？`searchstring`如果存在，`newstring`是`1`；否则，`newstring`是`0`。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-14T18:32:30.143

## 解决方案

假设您的输入文件 $target 包含以下内容：

```
some text mystring some other text
some text mystring a searchstring
just some more text 
```

这个命令：

```
sed -i -e '/searchstring/ s/mystring/1/ ; /searchstring/! s/mystring/0/' $target 
```

将其内容更改为：

```
some text 0 some other text
some text 1 a searchstring
just some more text 
```

## 解释

该脚本包含两个用分号分隔的替换 ( **s ) 命令。**

替换命令接受一个可选的地址范围，用于选择应该进行哪些行的替换。

在这种情况下，正则*表达式*地址用于选择包含第一个命令的搜索*字符串的行；*以及第二个不包含搜索字符串的行*（*注意正则表达式否定匹配后的感叹号）。

## 编辑

此命令将执行得更好并产生相同的结果：

```
sed -i -e '/searchstring/ s/mystring/1/ ; s/mystring/0/' $target 
```

关键是命令是按顺序执行的，因此如果在第一个命令完成*后*当前行中仍有一个*mystring*子字符串，那么其中肯定没有搜索*字符串。*

 **感谢 user946850。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-14T18:34:10.773

这是来自[sed one-liners](http://sed.sourceforge.net/sed1line.txt)页面：

> 优化速度：如果需要提高执行速度（由于输入文件大或处理器或硬盘速度慢），如果在给出“s/.../. ../“ 操作说明。因此：
> 
> ```
> sed 's/foo/bar/g' filename         # standard replace command
> sed '/foo/ s/foo/bar/g' filename   # executes more quickly
> sed '/foo/ s//bar/g' filename      # shorthand sed syntax 
> ```

速度不是手头问题的问题，但语法提示有助于制定解决方案：

```
sed -i '/searchstring/ s/mystring/1/; s/mystring/0/' $target 
```**

# vb.net - 将信息从 VBS 传递到 Visual Basic 应用程序？

> ID：11958372
> 
> 赞同：0
> 
> 时间：2012-08-14T18:18:48.023
> 
> 标签：vb.net, vbscript, active-directory

我想从 Visual Basic 应用程序运行 vbs 并将字符串返回给 vb 应用程序。谷歌并没有大打出手。这是我要运行的 vbs，我想将“ou”信息作为字符串传递回 Visual Basic 应用程序。

```
OPTION EXPLICIT
DIM objNetwork
DIM computerName
DIM ou

' Get the computerName of PC
set objNetwork = createobject("Wscript.Network")
'computerName = objNetwork.ComputerName
computername = Inputbox("Enter the network name of the PC to find :")

' Call function to find OU from computer name
ou = getOUByComputerName(computerName)

IF ou = "" THEN ou = "Not Found"

wscript.echo ou

function getOUByComputerName(byval computerName)
    ' *** Function to find ou/container of computer object from computer name ***

    DIM namingContext, ldapFilter, ou
    DIM cn, cmd, rs
    DIM objRootDSE

    ' Bind to the RootDSE to get the default naming context for
 ' the domain.  e.g. dc=HCHS,dc=co,dc=uk
 set objRootDSE = getobject("LDAP://RootDSE")
    namingContext = objRootDSE.Get("defaultNamingContext")
    set objRootDSE = nothing

    ' Construct an ldap filter to search for a computer object
 ' anywhere in the domain with a name of the value specified.
    ldapFilter = "<LDAP://" & namingContext & _
    ">;(&(objectCategory=Computer)(name=" & computerName & "))" & _
    ";distinguishedName;subtree"

    ' Standard ADO code to query database
 set cn = createobject("ADODB.Connection")
    set cmd = createobject("ADODB.Command")

    cn.open "Provider=ADsDSOObject;"
    cmd.activeconnection = cn
    cmd.commandtext = ldapFilter

    set rs = cmd.execute

    if rs.eof <> true and rs.bof <> true then
        ou = rs(0)
        ' Convert distinguished name into OU.
 ' e.g. cn=CLIENT01,OU=HCHS_Computers,dc=HCHS,dc=co,dc=uk
 ' to: OU=HCHS_Computers,dc=HCHS,dc=co,dc=uk
        ou = mid(ou,instr(ou,",")+1,len(ou)-instr(ou,","))
        getOUByComputerName = ou

    end if

    rs.close
    cn.close

end function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:24:20.057

您是否尝试过 ScriptControl？

看这里：

[http://msdn.microsoft.com/en-us/library/aa227413(v=vs.60](http://msdn.microsoft.com/en-us/library/aa227413(v=vs.60) )

[http://support.microsoft.com/kb/184740](http://support.microsoft.com/kb/184740)

[http://support.microsoft.com/kb/184739](http://support.microsoft.com/kb/184739)

[http://www.techrepublic.com/article/make-your-vb-apps-scriptable-with-the-microsoft-windows-script-control/1045808](http://www.techrepublic.com/article/make-your-vb-apps-scriptable-with-the-microsoft-windows-script-control/1045808)

# ruby - 从另一个哈希中的对应值中减去哈希中的值

> ID：11958374
> 
> 赞同：6
> 
> 时间：2012-08-14T18:18:53.490
> 
> 标签：ruby, hash

我希望能够减去两个哈希并在 Ruby 中获得第三个哈希。

这两个哈希看起来像这样：

```
h1 = {"Cat" => 100, "Dog" => 5, "Bird" => 2, "Snake" => 10}
h1.default = 0

h2 = {"cat" => 50, "dog" => 3, "BIRD" => 4, "Mouse" => 75, "Snake" => 10}
h2.default = 0 
```

我希望能够像这样在 h1 上调用一个方法：

```
h1.difference(h2) 
```

结果得到这个哈希：

```
{"Cat" => 50, "Dog" => 2, "BIRD" => -2, "Mouse" => -75} 
```

我想创建一个新的散列，其中包含来自散列的键和新散列的值，即第一个散列中的键值减去第二个散列中该键的值。问题是，无论键的大小写如何，我都希望这个 Hash 方法能够工作。换句话说，我希望“猫”与“猫”相匹配。

这是我到目前为止所拥有的：

```
class Hash
  def difference(another_hash)
    (keys + another_hash.keys).map { |key| key.strip }.uniq.inject(Hash.new(0)) { |acc, key| acc[key] = (self[key] - another_hash[key]); acc }.delete_if { |key, value| value == 0 }
  end
end 
```

这没关系，但不幸的是，结果不是我想要的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:57:13.943

如何将哈希转换为集合。

```
require 'set'

h1 = {"Cat" => 100, "Dog" => 5, "Bird" => 2, "Snake" => 10}
h1.default = 0

h2 = {"cat" => 50, "dog" => 3, "BIRD" => 4, "Mouse" => 75, "Snake" => 10}
h2.default = 0

p (h1.to_set - h2.to_set)
#=> #<Set: {["Cat", 100], ["Dog", 5], ["Bird", 2]}> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T19:42:26.163

作为推荐...

我过去用过这样的东西：

```
class Hash
  def downcase_keys
    Hash[map{ |k,v| [k.downcase, v]}]
  end

  def difference(other)
    Hash[self.to_a - other.to_a]
  end
  alias :- :difference
end 
```

这让我可以做以下事情：

```
irb(main):206:0> h1.downcase_keys - h2.downcase_keys
{
     "cat" => 100,
     "dog" => 5,
    "bird" => 2
}
irb(main):207:0> h2.downcase_keys - h1.downcase_keys
{
      "cat" => 50,
      "dog" => 3,
     "bird" => 4,
    "mouse" => 75
} 
```

为您提供了使用而不是的`alias`良好语法，类似于使用数组和集合。你仍然可以使用：`-``difference``-``difference`

```
irb(main):210:0> h1.downcase_keys.difference(h2.downcase_keys)
{
     "cat" => 100,
     "dog" => 5,
    "bird" => 2
}
irb(main):211:0> h2.downcase_keys.difference(h1.downcase_keys)
{
      "cat" => 50,
      "dog" => 3,
     "bird" => 4,
    "mouse" => 75
} 
```

我总是标准化我的哈希键，并且不允许变体泄漏。当您不知道键被称为什么时，它会使处理哈希变得非常困难，所以我强烈建议您首先这样做。这是一个代码维护问题。

否则，您可以创建原始键名及其规范化名称的映射，但如果您的哈希包含两个唯一大小写键（例如“key”和“KEY”），则会遇到问题，因为规范化会踩到一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:28:18.293

我得到了这个resque [https://github.com/junegunn/insensitive_hash](https://github.com/junegunn/insensitive_hash)

然后按照您的程序进行操作，但根据要求稍作调整

```
require 'insensitive_hash'

h1 = {"Cat" => 100, "Dog" => 5, "Bird" => 2, "Snake" => 10}.insensitive
h1.default = 0

h2 = {"cat" => 50, "dog" => 3, "BIRD" => 4, "Mouse" => 75, "Snake" => 10}.insensitive
h2.default = 0

class Hash
  def difference(another_hash)
    (keys + another_hash.keys).map { |key|
      key.downcase }.uniq.inject(Hash.new(0)) do |acc, key|
      val = self[key] - another_hash[key]
      acc[key] = val if val!= 0
      acc
    end
  end
end

h1.difference(h2)
# => {"cat"=>50, "dog"=>2, "bird"=>-2, "mouse"=>-75} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T19:08:59.140

抱歉，由于时间限制（我现在必须照顾我的男婴），才想出这个愚蠢但有效的代码：

```
h1 = {"Cat" => 100, "Dog" => 5, "Bird" => 2, "Snake" => 10}
h1.default = 0
h2 = {"cat" => 50, "dog" => 3, "BIRD" => 4, "Mouse" => 75, "Snake" => 10}
h2.default = 0
h3 = {"Cat" => 50, "Dog" => 2, "BIRD" => -2, "Mouse" => -75}

class Hash
  def difference(subtrahend)
    diff = {}
    self.each_pair do |k1, v1|
      flag = false
      subtrahend.each_pair do |k2, v2|
        if k1.downcase == k2.downcase
          flag = true
          v_diff = v1 - v2
          break if v_diff == 0
          v_diff > 0 ? diff[k1] = v_diff : diff[k2] = v_diff
        end
      end
      diff[k1] = v1 unless flag
    end
    subtrahend.each_pair do |k2, v2|
      flag = false
      self.each_pair do |k1, v1|
        if k1.downcase == k2.downcase
          flag = true
          break
        end
      end
      diff[k2] = -v2 unless flag
    end
    return diff
  end
end

h1.difference(h2) == h3 ? puts("Pass") : puts("Fail") #=> "Pass" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T11:53:14.687

这次我想提供另一种解决方案：规范化 -> 存储原始键值对 -> 获取具有较大值的原始键作为差异键。

```
h1 = {"Cat" => 100, "Dog" => 5, "Bird" => 2, "Snake" => 10}
h1.default = 0
h2 = {"cat" => 50, "dog" => 3, "BIRD" => 4, "Mouse" => 75, "Snake" => 10}
h2.default = 0
h3 = {"Cat" => 50, "Dog" => 2, "BIRD" => -2, "Mouse" => -75}

class Hash
  def difference(subtrahend)
    # create a hash which contains all normalized keys
    all_pairs = (self.keys.map{|x| x.downcase} + subtrahend.keys.map{|x| x.downcase}).uniq.inject({}) do |pairs, key|
      pairs[key] = []
      pairs
    end
    #=> {"mouse"=>[], "cat"=>[], "snake"=>[], "bird"=>[], "dog"=>[]}

    # push original key value pairs into array which is the value of just created hash
    [self, subtrahend].each_with_index do |hsh, idx|
      hsh.each_pair { |k, v| all_pairs[k.downcase].push([k, v]) }
      all_pairs.each_value { |v| v.push([nil, 0]) if v.size == idx }
    end
    #=> {"mouse"=>[[nil, 0], ["Mouse", 75]], "cat"=>[["Cat", 100], ["cat", 50]], "snake"=>[["Snake", 10], ["Snake", 10]], "bird"=>[["Bird", 2], ["BIRD", 4]], "dog"=>[["Dog", 5], ["dog", 3]]}

    results = {}
    all_pairs.each_value do |values|
      diff = values[0][1] - values[1][1]
      # always take the key whose value is larger
      if diff > 0
        results[values[0][0]] = diff
      elsif diff < 0
        results[values[1][0]] = diff
      end
    end
    return results
  end
end

puts h1.difference(h2).inspect #=> {"Cat" => 50, "Dog" => 2, "BIRD" => -2, "Mouse" => -75}
h1.difference(h2) == h3 ? puts("Pass") : puts("Fail") #=> "Pass" 
```

根据你的描述，这个做得很好。结果正是您所显示的（最终结果中的键未标准化，但取决于谁的值更大）。

# c# - 如何在不锁定 GUI 的情况下将数千个项目添加到绑定集合

> ID：11958375
> 
> 赞同：22
> 
> 时间：2012-08-14T18:18:56.787
> 
> 标签：c#, wpf, performance, observablecollection

我有一个设置，其中可能会将数千个项目（想想 3000-5000）添加到`ObservableCollection`绑定到某个可视界面的项目中。目前，添加它们的过程非常缓慢（大约 4 秒/1000 个项目），当然 GUI 在此期间没有响应。有什么好方法可以一次将这么多项目移动到一个集合中而不用担心系统锁定？我看过`DispatcherTimer`但我不确定它是否能提供我需要的一切。

另一个问题 - 我可以做些什么来加快这些对象的创建，以便将它们添加到集合中不需要很长时间？目前我像这样使用它们：`Collection.Add(new Item(<params>))`在后台线程中预先生成项目是否会显着减少添加它们所需的时间？

编辑：虚拟化是不可能的。要求指定`WrapPanel`外观，因此显示实际上是`ListBox`具有模板化 ItemsPanel 的

Edit2：根据秒表，瓶颈实际上是将物品放入我的`ObservableCollection`. 我将尝试更改该集合类型并做我自己的通知，看看是否会大大加快它的速度。

Edit3：所以答案在一个地方 - 我通过创建一个继承自`ObservableCollection`. 这个类做了两件事——暴露一个方法来一次添加集合，并添加了抑制`CollectionChanged`事件的能力。通过这些更改，添加 3000 个项目所需的时间大约为 0.4 秒（改进了 97%）。[此](http://peteohanlon.wordpress.com/2008/10/22/bulk-loading-in-observablecollection/)链接详细说明了这些更改的实施。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T18:33:48.833

你说的是 1000，所以我会以这个数字为例。

IIRC，可观察集合有一个小缺点——如果你一个一个地添加项目，它会为每个项目引发一次通知。这意味着您有 1000 条通知针对 1000 个项目，并且 UI 线程将以致命的速度运行，以跟上重新绘制屏幕的速度。

你需要尽快重绘吗？也许你可以批量添加？将 1000 件物品分成几包 100 件物品，或者多包 50 或 20 件物品。然后，不要将所有物品一件一件地放入，而是将它们放入包中。但请注意：您必须使用一些方法，例如由集合本身实现的 AddRange，而不是通过 LINQ，否则您将再次进行一对一的插入。如果您找到这样的方法，它应该会显着减少事件的数量，因为集合应该在每次 AddRange 调用时只引发一次 Changed 事件。

如果 observable 集合没有 AddRange，要么使用不同的集合，要么编写自己的集合，只需要一个包装器就足够了。目标是不要在每个 Add() 中引发 Changed 事件，而是在对它们进行合理计数之后，或者 - 可能只是在添加项目时跳过引发 Changed 并在某些固定时间间隔引发 Changed？如果您的数据以恒定速率无限期地“流入”，这将是特别有益的。

当然，在屏幕上出现这么多项目时，您也可以自己进行渲染。如果您的 ItemTemplates 很复杂，那么 1000 个对象乘以 1000 个可视层/属性实例可能只会扼杀用户体验。您是否已将 ItemTemplates 简化到最低限度？

最后一件事：考虑使用虚拟化 StackPanel 作为 ItemsControl/ListBoxes 中的 ItemPanel。它可以大大减少内存占用和单个时间点绘制的项目数。这不一定有助于提高引发的数量或事件，但当您拥有复杂的项目模板时，它可能会有很大帮助！

编辑：您正在使用 ObservableCollection，所以我假设 WPF/Silverlight .. 如果这不正确，请更新问题

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-14T18:24:33.903

`Binding`出于这个原因，WPF支持并发。尝试设置[`Binding.IsAsync`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.isasync)为真。此外。

*   不要使用`ObservableCollection<T>`，这样做很慢，因为每次添加项目时都会引发事件。添加所有项目*后*，使用更快的方法`List<T>`并提高属性更改通知。
**   在后台线程中预先创建您的项目，然后将它们推送到您的收藏中。*   检查涉及的代码的其他部分，看看是否有膨胀和修剪。*

 ** * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-12T14:08:17.303

根据要求，这是我解决此问题的方法。我首先创建了一个继承自`ObservableCollection`. 这个类做了两件事——公开一个方法来一次添加整个集合，并添加了抑制`CollectionChanged`事件的能力。通过这些更改，添加 3000 个项目所需的时间大约为 0.4 秒（改进了 97%）。[此](http://peteohanlon.wordpress.com/2008/10/22/bulk-loading-in-observablecollection/)链接详细说明了这些更改的实施。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-14T19:19:47.133

您可以尝试的另一件事：子类 ObservableCollection 并使其支持批量加载 (AddRange)。这是一篇文章： [AddRange 和 ObservableCollection](http://blogs.msdn.com/b/nathannesbit/archive/2009/04/20/addrange-and-observablecollection.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T18:30:35.387

对于第二个问题，如果在您的 GUI 中使用 WPF 技术，您可以使用 VirualizingStackPanel 提高性能，允许您仅创建可见项目*

# android - 从自己的应用程序访问电子邮件配置

> ID：11958378
> 
> 赞同：1
> 
> 时间：2012-08-14T18:01:42.937
> 
> 标签：android, email, configuration

我正在创建一个需要发送和接收电子邮件的 Android 应用程序。

我想知道是否可以检索用户在手机上输入的电子邮件地址（和 IMAP/POP3/Exchange 配置）？

最好不要让用户再次设置他们的电子邮件帐户（而且我不必开发配置屏幕）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:42:45.767

如果您拥有必要的权限，并且对于那些碰巧使用帐户管理系统的电子邮件应用程序，您最多可以通过帐户管理系统获取一些电子邮件地址。由于显而易见的原因，您将无法获得密码。

至于“IMAP/POP3/Exchange 配置”，您无法为 Gmail 或 AOSP 电子邮件应用程序获取该配置。如果第三方应用碰巧有一个安全的 API 来公开这些信息，你可以使用它，尽管我怀疑很少有人提供这个。

# c - 如何获取时区首字母？

> ID：11958379
> 
> 赞同：1
> 
> 时间：2012-08-14T18:19:31.507
> 
> 标签：c, datetime, timezone

我正在尝试`Date`为电子邮件创建标题。

格式如下：

```
DayOfWeek, Day ShortMonth Year Hours:Minutes:Seconds Offset (TimeZone) 
```

所以一个例子是：

```
Fri, 19 Mar 2010 11:44:09 -0700 (PDT) 
```

`PDT`它是我试图获得的 TimeZone 部分（在示例中）。我意识到这在不同的系统中会有所不同，但我想要一个适用于所有系统的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:29:29.180

您正在寻找`%Z`.`strftime()`

例如：

```
#include <stdio.h>
#include <time.h>

int main()
{
    char buf[16];
    time_t t = time(0);

    strftime(buf, sizeof(buf), "%Z", localtime(&t));
    printf("%s\n", buf);

    return 0;
} 
```

它是 C89，AFAIR（这意味着它非常便携）。

C99 标准的片段：

> `%Z`替换为区域设置的时区名称或缩写，如果没有可确定的时区，则替换为无字符。[ `tm_isdst`]

可悲的是，我们注意到并非每个系统都为其提供合理的值......

# php - PHP/Ajax 收集和传递表单数据

> ID：11958380
> 
> 赞同：0
> 
> 时间：2012-08-14T18:19:38.090
> 
> 标签：php, ajax, forms

我需要使用 php 表单收集输入（'x_amount'），然后将其发布到生成哈希的页面，然后将其发布到第三方站点。我不希望客户有一个两步过程，那么这可以用ajax和php来完成吗？这是我到目前为止所拥有的，但它需要被 ajaxified（我认为？）

```
 <form action="https://globalgatewaye4.firstdata.com/pay" method="POST">

        <?php
              $x_login = "xxx-xxx";  //  Take from Payment Page ID in Payment Pages interface
              $transaction_key = "xxxxxxx"; // Take from Payment Pages configuration interface
              $x_currency_code = "CAD"; // Needs to agree with the currency of the payment page
              srand(time()); // initialize random generator for x_fp_sequence
              $x_fp_sequence = rand(1000, 100000) + 123456;
              $x_fp_timestamp = time(); // needs to be in UTC. Make sure webserver produces UTC

              // The values that contribute to x_fp_hash 
              $hmac_data = $x_login . "^" . $x_fp_sequence . "^" . $x_fp_timestamp . "^" . $x_amount . "^" . $x_currency_code;
              $x_fp_hash = hash_hmac('MD5', $hmac_data, $transaction_key);

              echo ('<label>x_login</label><input name="x_login"  type="hidden" value="' . $x_login . '">' );
              echo ('<label>x_amount</label><input name="x_amount"  type="hidden" value="' . $x_amount . '">' );
              echo ('<label>x_fp_sequence</label><input name="x_fp_sequence"  type="hidden" value="' . $x_fp_sequence . '">' );
              echo ('<label>x_fp_timestamp</label><input name="x_fp_timestamp"  type="hidden" value="' . $x_fp_timestamp . '">' );
              echo ('<label>x_fp_hash</label><input name="x_fp_hash"  type="hidden" value="' . $x_fp_hash . '" size="50">' );
              echo ('<label>x_currency_code</label><input name="x_currency_code"  type="hidden" value="' . $x_currency_code . '">');
        ?>

              <input type="hidden" name="x_show_form" value="PAYMENT_FORM"/>
              <input type="hidden" name="x_test_request" value="FALSE"/>
              Enter Payment Amount:<br>
              <input type="text" name="x_amount"/>
              <input type="submit" value="Pay with Payment Pages"/>
            </form> 
```

换句话说，我可以一键收集x金额，生成哈希，然后将其发布给第三方吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:01:08.460

好的，所以我看到这`firstdata.com`实际上建议您这样做。我设法为你做了点什么。

您必须使用 ajax，将客户输入的金额发布到同一页面，处理并返回表单。仅在处理数据时提交表单。

我为你制作了整个脚本，因为它在某些时候变得令人沮丧，无法弄清楚如何去做。

测试.php

```
<?php
    if(isset($_POST['amount']) && ($_POST['amount'] != '')){
        $x_amount = $_POST['amount'];
        $x_login = "xxx-xxx";  //  Take from Payment Page ID in Payment Pages interface
        $transaction_key = "xxxxxxx"; // Take from Payment Pages configuration interface
        $x_currency_code = "CAD"; // Needs to agree with the currency of the payment page
        srand(time()); // initialize random generator for x_fp_sequence
        $x_fp_sequence = rand(1000, 100000) + 123456;
        $x_fp_timestamp = time(); // needs to be in UTC. Make sure webserver produces UTC

        // The values that contribute to x_fp_hash 
        $hmac_data = $x_login . "^" . $x_fp_sequence . "^" . $x_fp_timestamp . "^" . $x_amount . "^" . $x_currency_code;
        $x_fp_hash = hash_hmac('MD5', $hmac_data, $transaction_key);

        $values = array('login' => $x_login, 'amount' => $x_amount, 'sequence' => $x_fp_sequence, 'timestamp' => $x_fp_timestamp, 'hash' => $x_fp_hash, 'currency' => $x_currency_code);
        echo json_encode($values);
        die;    
    }

?><html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<script type="text/javascript">
    var processed = false;
    function makeProcessed(type){
        processed = type;
    }

    function prepareForm(){
        $('#submitPayment').val('Please wait ...');

        var processPayment = $.ajax({
            type: 'POST',       
            url: "test.php",
            data: {"amount": $('#x_my_amount').val()},
            dataType: 'json',
            async: false,
            success: function(data) {
                $('#x_login').val(data.login); 
                $('#x_amount').val(data.amount); 
                $('#x_fp_sequence').val(data.sequence); 
                $('#x_fp_timestamp').val(data.timestamp); 
                $('#x_fp_hash').val(data.hash); 
                $('#x_currency_code').val(data.currency);
                if(data.hash){
                    makeProcessed(true);
                }
            }
        });
        return processed;
    };
</script>

</head>
<body>
<form action="https://globalgatewaye4.firstdata.com/pay" method="POST" id="payment" onsubmit="return prepareForm();">
      <input type="hidden" name="x_show_form" value="PAYMENT_FORM"/>
      <input type="hidden" name="x_test_request" value="FALSE"/>

      <input name="x_login" id="x_login"  type="hidden" value="">
      <input name="x_amount" id="x_amount"  type="hidden" value="">
      <input name="x_fp_sequence" id="x_fp_sequence"  type="hidden" value="">
      <input name="x_fp_timestamp" id="x_fp_timestamp"  type="hidden" value="">
      <input name="x_fp_hash" id="x_fp_hash"  type="hidden" value="" size="50">
      <input name="x_currency_code" id="x_currency_code"  type="hidden" value="">

      Enter Payment Amount:<br>
      <input type="text" name="x_my_amount" id="x_my_amount" />
      <input type="submit" id="submitPayment" value="Pay with Payment Pages" />
    </form>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:42:16.750

我认为您可以通过使用“x_amount”字段在模糊事件上创建 ajax-request 来做到这一点。如果生成哈希需要 php，那么它将如下所示：

形式：

```
Enter Payment Amount:<br>
<input type="text" name="real_amount" id="real-amount"/>
<input type="hidden" name="x_amount" id="x-amount" /> 
```

javascript:

```
$('#real-amount').on('blur', function() {
    $.ajax({
        ....
        success: function(data) {
            // returned hash should be put in x_amount field here
            $('#x-amount').val(data); 
        }
    });
}); 
```

# math - 如果我每次 T 走一步，我的步长应该是多少？

> ID：11958384
> 
> 赞同：0
> 
> 时间：2012-08-14T18:20:04.823
> 
> 标签：math

我有一个距离**X**需要在**Y**时间内完成。

如果我每次**T走一步，我的****步长**应该是多少？

 **例如：我的距离是 360 应该在 5 秒内完成，每 10 米走一步，我的步长应该是多少？

这个方程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:26:56.760

步数为 5 秒 / 0.01 秒（10 毫秒）= 5 秒内 500 步。

每步距离 = 360/500 = 0.72 个单位（步长以您使用的任何单位表示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:29:28.237

你有`Y`时间和`T`- 时间一步。然后你会做`Y/T`步骤。所以你必须逐步覆盖距离`X`。`Y/T`然后`yourStepLength = X/(Y/T) = X/Y*T.`**

# c# - 对 ASP.NET Web 服务的 jQuery ajax POST 调用随机失败

> ID：11958387
> 
> 赞同：1
> 
> 时间：2012-08-14T18:20:14.833
> 
> 标签：c#, jquery, ajax, web-services, ipad

我正在为移动设备开发一个网站，该网站使用 jQuery (v 1.7.2) 对 ASP.NET (v 2.0.50727) Web 服务进行 ajax 调用。

调用在大约 95% 的时间内正常工作，但它会随机失败，返回 500 内部服务器错误。它在第一行代码执行之前在服务器端失败（第一行写入事件日志）。

我还没有看到使用我记得的桌面浏览器调用失败，但我已经看到使用 iPad 失败了。我添加了

```
<browserCaps userAgentCacheKeyLength="256"> 
```

到 Web 服务的 web.config 文件，但这没有帮助。

javascript:

```
$.ajax({
  type: "POST",
  url: serverURL + "/getImage",
  data: '{"formURL":"' + url + '", "rowNumber":"'+rowNumber+'"}',
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function (msg,textStatus, jqXHR) {
    ...
  }, error: function(xhr, ajaxOptions, thrownError) {
    ...
  }
}).done(function(){
  console.log("getImage call is done");
}); 
```

传递给 Web 服务的示例数据：

```
'{"formURL":"fileName.xml", "rowNumber":"1"}' 
```

C＃

```
[WebMethod(EnableSession = true)]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string getImage(string formURL, string rowNumber) {
  log("Retrieving image of form " + formURL);
  string image = "";
  string username = /*retrieve username*/;
  string password = /*retrieve password*/;
  if (username != null && username != "") {
    image = /*code to retrieve the image*/;
  }
  return image;
}

private void log(string message) {
  EvLog.WriteToEventLog(DateTime.Now.ToString("MM:dd:yyyy H:mm:ss:fff") + Environment.NewLine + message, 10);
} 
```

我发现唯一对我有一点帮助的是，当调用失败时，因为来自 Web 服务的响应标头包含“jsonerror：true”，尽管我无法确定它为什么会随机失败。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:28:51.970

不要以这种方式构建数据

`data: '{"formURL":"' + url + '", "rowNumber":"'+rowNumber+'"}',`

它可能导致格式错误的 JSON 字符串。

而不是使用 JSON.stringify 方法对您的 JavaScript 对象进行字符串化：

`data: JSON.stringify({formUrl: url, rowNumber: rowNumber}),`

JSON.stringify 将为您完成所有工作，以将您的对象表示为有效的 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:25:10.800

假设它确实是一个 JSON 错误，我的第一个想法是传递给参数的数据不正确。

以下行引用了变量的内容，我假设它是从代码中的其他地方加载的：

`data: '{"formURL":"' + url + '", "rowNumber":"'+rowNumber+'"}',`

假设您已经确定 rowNumber 是一个整数值并且不会破坏它，则可能是“url”变量破坏了您的 JSON 格式。发生这种情况的最简单方法是，如果您在文件名中有未转义的引号，特别是如果它在连接时比预期更早地关闭您的参数值。

字符总是有可能对字符集无效。您是否有触发失败的示例数据？提供的示例看起来很干净，所以我假设它不是错误案例之一。

# javascript - 使用 AJAX 时如何调用 Javascript

> ID：11958389
> 
> 赞同：0
> 
> 时间：2012-08-14T18:20:26.230
> 
> 标签：javascript, jsp, servlets

我是 web 开发的新手，我创建了一个网站，一个人可以通过单击主页上的链接进入并提出他的假期请求。一旦他点击休假申请链接，我就使用 AJAX 显示休假申请表。一旦他/她提交了休假请求，我使用 Ajax 将数据发送到 Servlet 并在休假请求表单下显示他/她的所有休假请求记录，并且此休假请求记录显示页面具有******刷新按钮****。现在，当我返回主页并再次单击休假请求并提交休假请求时，他的所有记录在他提交后显示，但是----* *当我单击刷新按钮时，我看到请求显示两次... .**

**如果我重复这些步骤（比如转到主页->休假申请->提交申请->所有记录显示->单击记录页面中的刷新按钮->我看到它已提交 3 次。**

所以它正在增加，看起来我在“记录显示”页面的标签中的 Javascript 文件一次又一次地复制并一次又一次地提交页面。

对不起，长篇大论...**请**建议我如何避免这种情况？

谢谢！

# php - 使用 MySQL 数据库的准备语句返回特定列

> ID：11958390
> 
> 赞同：0
> 
> 时间：2012-08-14T18:20:27.453
> 
> 标签：php, mysql, select, prepared-statement

我第一次尝试为 MySQL 使用准备好的语句，但它没有返回任何数据：

```
$pdo = new PDO('mysql:dbname=[DBASE];host=localhost', '[USER]', '[PWORD]',
                array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'));

$sth = $pdo->prepare('SELECT id FROM users WHERE username = "' . mysql_real_escape_string($_SESSION['myusername']) . '"');
$sth->execute();
$result = $sth->fetch(PDO::FETCH_OBJ);
$user_id = $result->id; 
```

可能很清楚，我正在尝试返回给定用户名的 user_id。有人可以让我知道我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:32:37.363

For what you are trying to do:

```
$pdo = new PDO('mysql:dbname=[DBASE];host=localhost', '[USER]', '[PWORD]',
                array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'));

$sth = $pdo->prepare('SELECT id FROM users WHERE username = ?');

$success = $sth->execute(array($_SESSION['username']));

if ($success) {
    $result = $sth->fetch(PDO::FETCH_OBJ);
    $user_id = $result->id;
} else {
    echo "Query failed.";
    var_dump($sth->errorInfo());
} 
```

You have to prepare a statement using either named or positional parameters. If the prepare was successful, you can then execute queries on that statement. Depending on how you bound the parameters, execute will accept different types of arguments.

If the execution of the statement was successful, you can then read results from it.

More examples in the manual:

*   [Prepared Statements and Stored Procedures](http://www.php.net/manual/en/pdo.prepared-statements.php)
*   [`PDO::prepare()`](http://www.php.net/manual/en/pdo.prepare.php)
*   [`PDOStatement::execute()`](http://www.php.net/manual/en/pdostatement.execute.php)
*   [Complete PDO Reference](http://php.net/pdo)

# html - 网站图标不起作用

> ID：11958392
> 
> 赞同：0
> 
> 时间：2012-08-14T18:20:32.117
> 
> 标签：html, favicon

我无法加载我的浏览器图标。

```
<link rel="icon" href="pics/favicon.ico"/> 
```

也试过：

```
<link rel="shortcut icon" href="pics/favicon.ico"/> 
```

~~当我打开 Chrome 开发者工具并单击 ico 文件的链接时，我收到了 404 错误。路径是正确的，我进行了两次和三次检查。~~任何帮助将非常感激。

**编辑**我将文件名更改为 favicon，现在浏览器可以找到它，但它不会在选项卡或地址栏中呈现。

**EDIT1**图标大小为 64x64。那不是太大，或者是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:22:42.553

您确定服务器上存在 favicon.ico。如果您在查看文件时收到 404，唯一的答案是路径错误或文件不存在。

编辑：

*rel="快捷图标"*是正确的。尝试清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:27:34.277

如果您正在使用它很难从缓存中刷新图标。但是，如果您使用的是 Google Chrome，请在刷新页面后清理缓存端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:53:30.667

我在服务器上没有我的图标。它在我的本地机器上。感谢大家。

# c# - 无法隐式转换类型 System.Collections.Generic.Dictionary , 匿名类型#1>

> ID：11958393
> 
> 赞同：2
> 
> 时间：2012-08-14T18:20:44.557
> 
> 标签：c#, linq-to-xml, idictionary

我在方法中有以下字典：

```
var nmDict = xelem.Descendants(plantNS + "Month").ToDictionary(
    k => new Tuple<int, int, string>(int.Parse(k.Ancestors(plantNS + "Year").First().Attribute("Year").Value), Int32.Parse(k.Attribute("Month1").Value), k.Ancestors(plantNS + "Report").First().Attribute("Location").Value.ToString()),
    v => { 
             var detail = v.Descendants(plantNS + "Details").First();                
             return
                 new
                    {
                      BaseHours = detail.Attribute("BaseHours").Value,
                      OvertimeHours = detail.Attribute("OvertimeHours").Value
                    };
         }); 
```

我需要返回 nmDict。问题是我无法弄清楚如何标记我的方法签名。我尝试了以下方法：

```
protected IDictionary<XElement, XElement> OvertimereportData(HarvestTargetTimeRangeUTC ranges) 
```

以上给了我这个错误：

```
Cannot implicitly convert type System.Collections.Generic.Dictionary<System.Tuple<int,int,string>,AnonymousType#1>' to 'System.Collections.Generic.IDictionary<System.Xml.Linq.XElement,System.Xml.Linq.XElement>'. An explicit conversion exists (are you missing a cast?) 

protected IDictionary<Tuple, XElement> OvertimereportData(HarvestTargetTimeRangeUTC ranges) 
```

给我这个错误：

```
'System.Tuple': static types cannot be used as type arguments 
```

我不知道该怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:24:30.650

简短的回答：您不能从函数返回匿名类型。

长答案：您的字典的值类型是匿名的`{BaseHours, OvertimeHours}`，它不能从函数返回或作为参数传递（作为对象除外，但除非您经历了反思的麻烦，否则没有任何好处）。要么在其中定义一个类/结构`BaseHours`，`OvertimeHours`要么使用一个元组。前者可能稍微好一些，因为您可以保留名称`BaseHours`和`OvertimeHours`; 使用一个元组，您可以得到`Value1`and `Value2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T18:34:20.263

如果您使用的是 C# 4.0，则可以通过**[动态](http://msdn.microsoft.com/en-us/library/dd264741.aspx)**类型返回匿名。所以你的方法签名看起来像这样

```
protected IDictionary<Tuple<int,int,string>, dynamic> OvertimereportData(HarvestTargetTimeRangeUTC ranges) 
```

并且通过动态对象可以找到运行时的属性。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:29:12.043

当您调用该`ToDictionary`方法时，结果字典的类型与源序列中元素的类型几乎没有关系。它完全由您提供给调用的键和值表达式返回的数据类型定义。例如，如果您要调用：

```
xelem.Descendants(plantNS + "Month").ToDictionary(
  k => int.Parse(k.Attribute("Year").Value),
  v => k.Attribute("Year).Value
); 
```

你会得到一个，`IDictionary<int, string>`因为这就是你的两个表达式返回的内容。要从方法中返回它，您只需要根据您的表达式构造正确的类型。

你的第一个很简单：

```
k => new Tuple<int, int, string>(...) 
```

但是，第二个将是一个问题。字典中的值是匿名类型：您返回 a`new { }`而不为该值指定具体类型名称。通常，这将使您无法将该字典用作返回值或参数。（*可以*使用一些看起来很奇怪的通用技术来完成，但我不推荐它。）

那么，您需要做的第一件事就是制作一个具体的类型来保存您的值，例如

```
public class HoursContainer 
{
  public string BaseHours { get; set; }
  public string OvertimeHouse { get; set; }
} 
```

并适当地更改您的 Linq 查询：

```
var detail = v.Descendants(plantNS + "Details").First();                
return new HoursContainer
{
    BaseHours = detail.Attribute("BaseHours").Value,
    OvertimeHours = detail.Attribute("OvertimeHours").Value
}; 
```

完成此操作后，您的字典将根据您在创建时指定的事物类型具有具体类型：

`IDictionary<Tuple<int, int, string>, HoursContainer>`

（注意：如果你愿意，你也可以在这里使用另一个`Tuple<int, int>`或任何东西，但是生成的泛型类型会很快变得笨拙。）

# sql - Oracle 程序对在程序之外运行良好的选择查询感到不满

> ID：11958396
> 
> 赞同：4
> 
> 时间：2012-08-14T18:20:53.133
> 
> 标签：sql, oracle, plsql

```
 WITH    Q (L) AS
        (
         SELECT  1 FROM DUAL
         UNION ALL
         SELECT  L + 1
         FROM    Q
         WHERE   L < 99
        )
SELECT  MIN(L)
INTO next_priority
FROM Q
LEFT JOIN gxrdird on gxrdird_priority = L 
 and gxrdird_pidm = aPidm_in and gxrdird_ap_ind = 'Y'
WHERE L NOT IN (select gxrdird_priority 
                  from gxrdird where gxrdird_pidm = aPidm_in); 
```

此查询在手动运行时返回我想要的结果。我试图把它放在一个包过程中，但我得到：

```
51/5  PL/SQL: SQL Statement ignored 
55/22  PL/SQL: ORA-00932: inconsistent datatypes: expected NUMBER got - 
```

这对应于 L 所在列上的“SELECT L + 1”行。有没有办法在 with 子句中将 L 声明为 NUMBER？我已经在谷歌上搜索了一个小时，我能找到的几个带有参数的 with 子句的例子并没有将它们声明为任何类型。

这让我发疯了，我想不出更简单的查询来给我正确的结果。

编辑，添加上下文：

```
 CURSOR xxx_cur IS
SELECT ROWID, GXRDIRD_PRIORITY
FROM GXRDIRD 
WHERE GXRDIRD_PIDM = aPidm_in 
  AND GXRDIRD_AP_IND = 'A' 
AND GXRDIRD_ATYP_CODE IS NULL 
AND GXRDIRD_ADDR_SEQNO IS NULL
ORDER BY GXRDIRD_PRIORITY DESC;

  xxx_rec   xxx_cur%ROWTYPE;
  next_priority         NUMBER;
BEGIN

OPEN xxx_cur;
LOOP
FETCH xxx_cur INTO xxx_rec;
EXIT WHEN xxx_cur%NOTFOUND;

-- Here we should update that particular row, but we can't just increment it.
WITH    Q (L) AS
        (
         SELECT  1 FROM DUAL
         UNION ALL
         SELECT  L + 1
         FROM    Q
         WHERE   L < 99
        )
SELECT  MIN(L)
INTO next_priority
FROM Q
LEFT JOIN gxrdird on gxrdird_priority = L and gxrdird_pidm = aPidm_in and gxrdird_ap_ind = 'Y'
WHERE L NOT IN (select gxrdird_priority from gxrdird where gxrdird_pidm = aPidm_in);    

-- The above query found the lowest-numbered unused priority, and now we'll set this record to that.
UPDATE GXRDIRD SET GXRDIRD_PRIORITY = next_priority WHERE ROWID = xxx_rec.ROWID;

-- If the above record was originally 7 and the lowest was 15, now 7 is free and will be used if we loop
-- again.
DBMS_OUTPUT.PUT_LINE(OBJECT_NAME || '.P_RESEQUENCE_INACTV_ACCNTS - Changed priority ' || xxx_rec.GXRDIRD_PRIORITY || ' into ' || next_priority);
END LOOP; 
```

第 51 行：与 Q (L) AS

第 55 行：选择 L + 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:35:47.073

看起来您正在尝试生成具有连续数字的虚拟行。我首选的方法是：

```
WITH    Q AS
        (
         SELECT  rownum AS l
         FROM    dual
         CONNECT BY level < 100
        )
SELECT  MIN(L)
INTO next_priority
FROM Q
... 
```

请尝试这是否适合您。

# makefile - Make 错误：Makefile 的第一行缺少分隔符

> ID：11958401
> 
> 赞同：0
> 
> 时间：2012-08-14T18:21:11.283
> 
> 标签：makefile

尝试运行 make 时出现以下错误：

```
Makefile:1: *** missing separator.  Stop. 
```

看起来我需要在第一行使用制表符。但是，我的 Makefile 的前 3 行是这样的。

```
[ -z "${PROJ_DIR}" ] && PROJ_DIR=/home/my_directory
[ -z "${BASE_DIR}" ] && BASE_DIR=/home/my_directory
[ -z "${TOOLCHAIN}" ] && TOOLCHAIN=${BASE_DIR}/mips-4.3 
```

没有任何空间修改的地方。我不知道错误可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:27:11.753

这甚至不*接近*正确的[makefile 语法](http://www.gnu.org/software/make/manual/html_node/Flavors.html#Flavors)。

```
PROJ_DIR ?= /home/my_directory
BASE_DIR ?= /home/my_directory
TOOLCHAIN ?= $(BASE_DIR)/mips-4.3 
```

# android - 安卓录音

> ID：11958407
> 
> 赞同：-5
> 
> 时间：2012-08-14T18:21:25.203
> 
> 标签：android

我需要使用 AudioRecord 类录制特定时间的音频。让我们说1秒钟。然后处理音频，当处理完成后，再次录制 1 秒并不断重复，直到我关闭程序。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:06:00.550

```
public void recordandprocess()
{        

AudioRecord recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
            44100, AudioFormat.CHANNEL_IN_STEREO,
            AudioFormat.ENCODING_PCM_16BIT, bufferSize);

        recorder.startRecording();

        //executes run() after 1000 msec
        Handler handler = new Handler(); 
        handler.postDelayed(new Runnable() { 
         public void run() { 
                      recorder.stop();
                      recorder.release(); 
                      // do your processing here
                      recordandprocess(); //recursive call to this function to start recording after processing is done
         } 
    }, 1000); 
        .
        .
        .
      return;
} 
```

调用此函数一次，`onCreate()`它将继续递归调用自身，直到您的活动被系统杀死。

如果您想在按下返回或主页按钮时停止递归，请在执行其中的所有代码之前检查函数内部的布尔值。在您的`onPause()`.

# c# - 蛇游戏赢形式

> ID：11958410
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:21:43.950
> 
> 标签：c#, winforms

我一直在尝试使用获胜表单创建一个蛇游戏，并且在使用箭头键移动我的按钮工具和事件处理时遇到了麻烦。如果有人可以向我解释如何使它工作，那将非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:38:04.767

从您提供的非常有限的信息来看，通常该方法应该是处理包含您的游戏的 Form 的 KeyDown 事件。当表单具有焦点时，只要按下某个键，就会在按下该键时引发此事件。（KeyPress 事件要求在触发之前按下并释放键；相同的操作也会触发 KeyDown 和 KeyUp 的组合）。

处理 KeyDown 事件时，检查 KeyEventArgs 的 KeyData 属性。该属性（只读）是一个标记的枚举（意味着它可以具有可用值的组合）。您需要查看是否按下了以下一项或多项：Keys.Up、Keys.Down、Keys.Left 和 Keys.Right。这些是箭头键。您还可以允许用户分别使用数字键盘键 8、2、4 和 6，它们具有不同的 Keys 枚举值。如果 KeyData 具有其中之一，则更改蛇的移动方向，并将 KeyEventArgs 的 Handled 属性设置为 true，这将告诉任何其他响应按键的代码不要继续。这将防止与箭头键相关的默认行为引起问题。

了解用户可能会按下多个箭头键。如果这些键的方向相反，或者您不允许向一个方向移动，您将需要决定如何处理这种情况。简单的解决方案是什么都不做。更复杂的解决方案是跟踪当前按下了哪些箭头键，如果按下了多个箭头键，则侦听 KeyUp 事件，该事件将告诉您何时释放了一个或多个，并且仅在当前按下一个键时改变方向。

# security - 使用预共享密钥进行身份验证

> ID：11958414
> 
> 赞同：2
> 
> 时间：2012-08-14T18:21:51.057
> 
> 标签：security, authentication, web-applications

我们正在开发一个需要安全用户身份验证的 GWT Web 应用程序。我们有可能通过传真向用户提供凭据。所以我们可以使用预共享密钥。我们不可能在这个应用程序中使用 ssl 或 https。

我想知道将通行证存储在服务器上并对用户进行身份验证的更安全的方法是什么？我怀疑我们应该对密码进行两次哈希处理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:49:06.153

如果无法进行加密，您应该在客户端对密码进行哈希处理（使用服务器提供的*随机*盐进行加盐）并比较生成的哈希值。

这种方法有两个优点：

1.  每次登录的哈希值都不同
2.  密码永远不会以纯文本形式发送。

但是，如果没有加密和*适当的*身份验证，会话劫持和此类攻击是微不足道的。

*请注意，如果没有在 http 之上的某种加密/身份验证层，就没有办法使其**足够安全，以挫败**相当有能力的恶意方的任何攻击尝试，因此最好不要给用户任何感觉虚假安全，mmkay？*

“让我们只让登录尽可能安全”中的最大问题是会话侧劫持攻击在没有加密的情况下是相当微不足道的。Sidejacking（定义在[Wikipedia](http://en.wikipedia.org/wiki/Session_hijacking#Methods)中）是：

> 会话劫持，攻击者使用数据包嗅探来读取两方之间的网络流量以窃取会话 cookie。许多网站对登录页面使用 SSL 加密以防止攻击者看到密码，但一旦通过身份验证，就不会对站点的其余部分使用加密。这允许可以读取网络流量的攻击者拦截提交给服务器的所有数据或客户端查看的网页。由于此数据包括会话 cookie，因此即使密码本身没有泄露，它也允许他冒充受害者。 [3] 不安全的 Wi-Fi 热点特别容易受到攻击，因为任何共享网络的人通常都能够读取其他节点和接入点之间的大部分网络流量。

# php - PHP 将所有 url 转换为 html 链接

> ID：11958415
> 
> 赞同：0
> 
> 时间：2012-08-14T18:21:57.700
> 
> 标签：php, regex, function, preg-replace

> **可能重复：**
> [用 HTML 链接替换文本中的 URL](https://stackoverflow.com/questions/1188129/replace-urls-in-text-with-html-links)

我正在通过下面的函数传递包含多个 url 的字符串变量，以仅通过正确的 HTML 链接获得相同的东西。

```
public function convertUrlsToLinks($text){
    return preg_replace( '@(?<![.*">])\b(?:(?:https?|ftp|file)://|[a-z]\.)[-A-Z0-9+&#/%=~_|$?!:,.]*[A-Z0-9+&#/%=~_|$]@i', '<a href="\0" target="_blank">\0</a>', $text );
} 
```

它根本不起作用。我错过了什么？

**代码必须跳过现有的链接，`<img>`的`src`值（或类似的东西。）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:45:28.580

假设您已经有一个 html 文档，我将 URL 的识别限制为

*   不以“开头
*   以 http 或 www 开头

我想出了这样的解决方案：

```
$string = 'lorem ipsum www.foo.bar dolor sit <a href="http://fail.org">http://fail.org</a><img src="www.foo.bar"> amet http://abc.de.fg.com?bar=baz';
$rx = '%[^"](?P<link>(?:https?://|www\.)(?:[-_a-z0-9]+\.)+(?:[a-z]{2,4}|museum/?)(?:[-_a-z0-9/]+)?(?:\?[-_a-z0-9+\%=&]+)?(?!</a)(\W|$))%ui';
echo preg_replace_callback($rx, function($matches) {
    return '<a href="'.$matches['link'].'">'.$matches['link'].'</a>';
}, $string).PHP_EOL; 
```

输出字符串是

```
lorem ipsum<a href="www.foo.bar ">www.foo.bar </a>dolor sit <a href="http://fail.org">http://fail.org</a><img src="www.foo.bar"> amet<a href="http://abc.de.fg.com?bar=baz">http://abc.de.fg.com?bar=baz</a> 
```

正则表达式*应该*作为意图工作，您的示例字符串可能会有所帮助

# excel - 如何将特定工作表中的矩阵和单元格从excel放入matlab

> ID：11958417
> 
> 赞同：0
> 
> 时间：2012-08-14T18:22:00.773
> 
> 标签：excel, matlab, vba

我的代码有问题。我一直在使用 VBA Excel 和 Matlab 完成我的任务。然后我想把我的矩阵从 Excel 放到 Matlab 中。但是我的代码没有按预期工作。

```
MLPutMatrix "jum_kel", Range("D17")
MLPutMatrix "prob_mut", Range("D18")
MLPutMatrix "prob_co", Range("D19")
MLPutMatrix "uk_pop", Range("D20") 
```

您如何编码以从特定工作表和单元格中放置矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:27:01.017

MLPutMatrix 是您从 Excel 运行的命令吗？我不熟悉它。将数据从 Excel 移动到 Matlab 可以简单地在 Matlab 中使用`xlsread`命令完成。文档解释了如何使用它。[http://www.mathworks.com/help/techdoc/ref/xlsread.html](http://www.mathworks.com/help/techdoc/ref/xlsread.html)

这对你有用吗？

# mysql - 嵌套的 CONCAT_WS 抛出 #1242 - 子查询返回超过 1 行错误

> ID：11958418
> 
> 赞同：0
> 
> 时间：2012-08-14T18:22:17.903
> 
> 标签：mysql, sql

让我们假设表 t 如下：

表：

```
a   b   c   d   e
a1  b1  c1  d1  e1  
a2  b2  c2  d2  e2
a3  b3  c3  d3  e3
.   .   .   .   .
.   .   .   .   .
.   .   .   .   . 
```

此查询引发 #1242 错误：

```
SELECT CONCAT_WS( '*', (SELECT CONCAT_WS( '_', a, b, c) FROM t)) AS test 
```

预期结果是：

```
test
a1_b1_c1*a2_b2_c2*a3_b3_c3*..... 
```

最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:45:08.673

问题是“t”不止一行。也许您想要以下之一：

```
SELECT CONCAT_WS( '*', (SELECT CONCAT_WS( '_', a, b, c) FROM t limit 1)) AS test 
```

或者

```
SELECT CONCAT_WS( '*', (SELECT max(CONCAT_WS( '_', a, b, c)) FROM t)) AS test 
```

糟糕，我错过了问题中的预期结果。你要：

```
select group_concat(vals SEPARATOR '*' ORDER BY t.id)
from (select concat_ws('_', a, b, c) as vals
      from t
     ) t 
```

（这假设有一个名为“id”的列用于对结果进行排序。如果没有，则省略 order by 子句。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:52:35.793

```
CREATE TEMPORARY TABLE tempFoo (
    col1 varchar(250) NOT NULL
);

INSERT INTO tempFoo (SELECT CONCAT_WS( '_', a, b, c) as r FROM t);

SELECT GROUP_CONCAT(col1 separator '*') FROM tempFoo; 
```

# wordpress - Woocommerce/Wordpress - 将用户登录重定向到主页

> ID：11958422
> 
> 赞同：6
> 
> 时间：2012-08-14T18:22:24.090
> 
> 标签：wordpress, redirect, login, widget, woocommerce

我已经搜索了这个问题的答案，使用了插件，但仍然没有任何效果。我希望我网站的用户在登录/注册后被重定向到主页。

目前，用户登录并被重定向到我的帐户页面。

Woocommerce 提供了此代码，但它对我不起作用：

```
/*
 * goes in theme functions.php or a custom plugin
 *
 * By default login goes to my account
 **/
add_filter('woocommerce_login_widget_redirect', 'custom_login_redirect');

function custom_login_redirect( $redirect_to ) {
     $redirect_to = 'http://anypage.com';
} 
```

我也尝试使用 Peter's Redirect 插件，但由于 woocommerce 绕过 wp-login.php，它不起作用。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:40:44.257

您可以下载[http://wordpress.org/extend/plugins/peters-login-redirect/](http://wordpress.org/extend/plugins/peters-login-redirect/)并将其替换为 widget-login.php

```
<input type="hidden" name="redirect_to" class="redirect_to" value="<?php echo $redirect_to; ?> 
```

和

```
<input type="hidden" name="redirect_to" class="redirect_to" value="<?php echo site_url('/wp-content/plugins/peters-login-redirect/wplogin_redirect_control.php/'); ?>" /> 
```

这样，您可以使用 peters 登录重定向来重定向使用 woocommerce 登录小部件的全局和特定用户。

确保更改“使用外部重定向文件。如果您使用的插件（例如 Gigya）绕过常规 WordPress 重定向过程（并且只允许一个固定的重定向 URL），请将其设置为“是”。然后，将重定向 URL 设置为 % s”设置为“YES”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-27T08:11:47.513

在functions.php上使用此代码

```
add_filter('woocommerce_login_redirect', 'wc_login_redirect');
function wc_login_redirect( $redirect_to ) {
     $redirect_to = 'https://www.google.co.in/';
     return $redirect_to;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T00:21:43.260

他们提供的修复仅在您使用登录小部件时才有效。登录到主页后，您需要做的就是将用户重定向到您的登录表单中：

```
<input type="hidden" name="redirect" value="<?php echo get_home_url(); ?>" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-22T18:44:54.093

做这个：

转到管理 > Woocommerce > 设置 > 常规

在“购物车、结帐和帐户”下找到“客户帐户”

**取消选中**“阻止客户访问 WordPress 管理员”

保存更改并测试！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T18:27:17.030

最近添加了一个过滤器，允许您在注册后重定向。登录时进行重定向就像上面提到的 Tomanow 一样简单（将其放在 form-login.php 中）。这是过滤器的链接以及在注册表单上处理此过滤器的一些说明。

[https://github.com/woothemes/woocommerce/commit/014e31952828377bf7a1ebf4e812a43d0bcefa67#commitcomment-3351995](https://github.com/woothemes/woocommerce/commit/014e31952828377bf7a1ebf4e812a43d0bcefa67#commitcomment-3351995)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-17T13:30:01.313

在functions.php上使用此代码

```
add_action('wp_logout','go_home');
function go_home(){
  wp_redirect( home_url() );
  exit();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-25T07:14:06.810

您可以根据用户角色设置重定向。下面给出了该重定向的代码，我为入门级用户或技术或非程序员开发了一个[WooCommerce 登录或注册重定向插件。](http://www.e2soft.com/blog/change-woocommerce-login-register-redirect-url/)

```
 //Redirect users to custom URL based on their role after login

function wp_woo_custom_redirect( $redirect, $user ) {

// Get the first of all the roles assigned to the user
$role = $user->roles[0];
$dashboard = admin_url();
$myaccount = get_permalink( wc_get_page_id( 'my-account' ) );

if( $role == 'administrator' ) {

    //Redirect administrators to the dashboard
    $admin_redirect = get_option('admin_redirect');
    $redirect = $admin_redirect;
} elseif ( $role == 'shop-manager' ) {

    //Redirect shop managers to the dashboard
    $shop_manager_redirect = get_option('shop_manager_redirect');
    $redirect = $shop_manager_redirect;
} elseif ( $role == 'customer' || $role == 'subscriber' ) {

    //Redirect customers and subscribers to the "My Account" page
    $customer_redirect = get_option('customer_redirect');
    $redirect = $customer_redirect;
} else {

    //Redirect any other role to the previous visited page or, if not available, to the home
    $redirect = wp_get_referer() ? wp_get_referer() : home_url();
}
return $redirect;
}
add_filter( 'woocommerce_login_redirect', 'wp_woo_custom_redirect', 10, 2 ); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-18T15:17:53.303

还包括使用 wp-login.php 的标准 WordPress 登录表单登录：

```
add_filter('login_redirect', 'custom_login_redirect'); 
```

我使用此过滤器和您提供的过滤器，针对相同的过滤器功能，它捕获用户可能登录的两个地方（WP 和 WC）。

也刚刚注意到明显的问题。您的过滤器功能中有这个：

```
$redirect_to = 'http://anypage.com'; 
```

但你需要这个：

```
return 'http://anypage.com'; 
```

$return_url 是从以前的过滤器传入的，因此您可以检查它并决定是否更改它。

编辑：

实际上，我需要纠正其中的一些。看起来 woocommerce_login_widget_redirect 过滤器用于在小部件登录表单中设置重定向参数。*这意味着它仅在用户未登录*并且显示小部件登录表单时触发。它不能用于决定用户登录后将其发送到哪里。

WP login_redirect 过滤器在用户登录*后*触发，并且可以修改随登录表单发送的任何 redirect_to URL，以使您能够将用户重定向到其他页面。

此外，WooCommerce 登录小部件不会处理您认为的登录。登录过程是通过 woocommerce-ajax.php 中的 AJAX 处理的。您将在其中看到重定向 URL 没有通过 woocommerce_login_widget_redirect 过滤器传递，因此无法修改。我将把它作为一个拉取请求向 WooCommerce 提出，因为我认为它应该被过滤。

[https://github.com/woothemes/woocommerce/pull/2508](https://github.com/woothemes/woocommerce/pull/2508)

# c# - C# 扩展方法中的通用约束

> ID：11958424
> 
> 赞同：4
> 
> 时间：2012-08-14T18:22:29.680
> 
> 标签：c#, .net, generics

我想提供一种扩展方法，但对可以调用它的东西有某种预防措施。

这就是我所拥有的：

```
using System;

public class Test
{
    public static void Main()
    {
        Person p = new Person();
            p.IsValid();
    }
}

public class Person
{
    public string Name {get;set;}
}

public static class ValidationExtensions
{
    public static void IsValid<T>(this T parent) where T : class
    {
        throw new NotImplementedException("test");
    }
} 
```

然而，这并不能阻止某人做`"this is a dumb idea".IsValid();`

我可以用接口、属性或基类标记 Person 对象，但我不想这样做。有没有办法强制执行约束？

**更新：**我试图解释的是通过命名空间强制执行约束，因为有一个字符串调用 IsValid 是愚蠢的，我只想要某些模型类

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T18:25:20.070

如果您想将其限制为仅适用于`Person`实例（以及从 派生的类型`Person`），您可以执行以下操作：

```
public static void IsValid<T>(this T parent) where T : Person 
```

但是，没有理由这样做，因为您也可以轻松编写：

```
public static void IsValid(this Person parent) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T18:24:05.733

约束*正在*执行。
`string`是一类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:41:49.930

C#（和 .Net 整体）中的命名空间是纯语法糖，可以使类名看起来更短。因此，您想要的是“通过类全名的子字符串限制泛型”，这在 C# 中不受支持。

正如已经建议的那样，您可能只想为有意义的类提供该方法，而不是采取其他方式。

# c - 打印字符串时出现意外错误

> ID：11958425
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:22:38.457
> 
> 标签：c, string, pointers

为什么这段代码会产生错误？它不应该输出zbcde吗？

```
int main()
{
char *p="abcde";
*p='z';
printf("%s\n",p);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:24:38.910

您正在尝试修改字符串文字；这是未定义的行为。

进一步解释：“abcde”不是 a`char *`而是 a `const char *`。您应该执行以下解决方案之一：

```
char p[] = "abcde"; 
```

或者

```
char *p = strdup("abcde"); 
```

（在后一种情况下，不要忘记 free() p！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T18:26:18.923

`char *p="abcde";`- 这会将`abcde`文本段中的字符串作为只读数据保存，并且地址将保存在本地指针变量`p`中。

`*p = 'z'`将尝试将只读数据替换`a`为`z`. 这是一种未定义的行为，可能导致崩溃。

因此，将字符串声明为本地 char 数组变量，如下所示。

```
char p[] = "abcde" 
```

因此，分配动态内存以保留如下所示的字符串。

```
char *p = strdup("abcde");
...
free(p); 
```

# mod-rewrite - 代理重写到新域？

> ID：11958426
> 
> 赞同：1
> 
> 时间：2012-08-14T18:22:40.660
> 
> 标签：mod-rewrite, apache2

我的问题是关于`RewriteMap`apache2：我想应用重写条件，以便我的代理上的所有请求都代理到一个全新的域。

例如`localhost/test`或任何其他 url 应该只是去`www.mydomain.com`：

```
RewriteRule / http://www.mydomain.com [P] 
```

工作正常。如果我访问 localhost，我仍然会在浏览器地址行中看到“localhost”，但会显示 mydomain.com。但是，如果我现在单击此 mydomain 站点上的任何链接，我将收到“未找到”响应。

mydomain 的源代码包含例如此链接：

```
<a href="/lab/sale.php">Link</a> 
```

如果我以正常方式访问该站点，这将导致：`www.mydomain.com/lab/sale.php`，并且工作正常。

如果我通过我的代理访问该站点并且发生了 rewriteRule，我会在链接点击后被定向到：`localhost/lab/sale.php`，这当然不存在。

问题：通过我的代理访问该站点的用户如何浏览整个站点，就好像他真的会访问该站点一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:52:33.723

该`RewriteRule`指令不像 a`ProxyPass`或`Redirect`它们本质上将 2 个节点链接在一起，并且它后面的所有内容也被代理。您拥有的规则**仅**代理请求 URI `/`，而不是`/lab/`或`/etc.php`其他任何东西。您需要创建一个匹配并将其作为反向引用传递：

```
RewriteRule ^/?(.*)$ http://www.mydomain.com/$1 [P] 
```

或者您可以使用 %{REQUEST_URI} 变量：

```
RewriteRule ^ http://www.mydomain.com%{REQUEST_URI} [P] 
```

# android - 将布局动态添加到 Scrollview

> ID：11958430
> 
> 赞同：4
> 
> 时间：2012-08-14T18:22:53.763
> 
> 标签：android

这个问题似乎已经被问了十几次了，但我无法从他们那里推断出解决方案。

我有一个名为的布局`tile.xml`，如下所示：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="50dp"
    android:layout_marginTop="10dp"
    android:text="May Fong Robinson"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textStyle="bold" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="50dp"
    android:layout_marginTop="10dp"
    android:text="Beautiful star-shaped spillway, Kechut Reservoir, Jermuk, Armenia"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

我需要添加`feed.xml`我已声明为的视图之一，`ScrollView`因为我想在其中包含多个对象，以便可以垂直滚动它们。这是我的`feed.xml`文件：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:background="#F1F1F1"
    android:layout_height="fill_parent" >

</ScrollView> 
```

我想在动态更改文本的同时将我的“平铺”动态添加`tile.xml`到“提要”视图中。`feed.xml``TextViews`

我怎样才能做到这一点？谢谢

* * *

新的`feed.xml`：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#F1F1F1" >

    <LinearLayout
        android:id="@+id/tiles"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </LinearLayout>

</ScrollView> 
```

...和新的`tile.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="10dp"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="10dp"
        android:text="May Fong Robinson"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="10dp"
        android:text="Beautiful star-shaped spillway, Kechut Reservoir, Jermuk, Armenia"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:41:16.997

首先，在布局中添加 2 个 TextView。

然后，在您的代码中，您要在其中动态添加 TextViews，您可以执行以下操作：

```
ScrollView scroll = (ScrollView) findViewById(R.id.scrollView1);
LayoutInflater inflater =  (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.tile, null);
scroll.addView(view); 
```

要访问 TextViews，您必须执行以下操作：

```
TextView textView1 = (TextView) view.findViewById(R.id.textView1);
textView1.setText(""); 
```

还要确保在 XML 文件中为您的 TextViews 提供不同的 ID。目前它们都是 textView1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:41:34.753

ScrollView 只能有 1 个子项，这意味着您的“平铺”布局的当前结构无法添加到 ScrollView。您需要添加另一个布局，比如说 LinearLayout 到您的 ScrollView，这样它将成为 ScrollView 的唯一直接子级。您可以在此 LinearLayout 中添加任意数量的子元素。这可以通过使用您可能在许多示例中遇到的 LayoutInflater 来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T02:46:07.540

```
**TRY THIS**
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#F1F1F1" >

<LinearLayout
    android:id="@+id/tiles"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

   <include layout="@layout/tile" />

</LinearLayout> 
```

# asp.net-mvc - Html.CheckBox 指定类

> ID：11958434
> 
> 赞同：4
> 
> 时间：2012-08-14T18:23:22.750
> 
> 标签：asp.net-mvc, razor

我们如何指定 Html.CheckBox 的类？

我正在尝试这样的事情，但这不起作用。

```
 @Html.CheckBox("chk_", abc.IsChecked, new { @class="checkbox" }) 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T21:12:42.300

指定类时，编译器会检查以确认 bool 值不可为空，我将数据类型从可空 bool 固定为 bool，并且运行良好。

@Html.CheckBox("chk_", abc.IsChecked, new { @class="checkbox" })

# java - 当我测试我的应用程序时，请继续关闭 Force

> ID：11958437
> 
> 赞同：0
> 
> 时间：2012-08-14T18:23:33.777
> 
> 标签：java, android

我正在构建一个由用户登录和注册组成的应用程序，但每次我在模拟器上测试它时都会收到强制关闭。以下是我在日志猫中收到的错误：

```
08-14 14:06:28.853: D/dalvikvm(828): GC_FOR_ALLOC freed 108K, 3% free 8262K/8455K, paused 89ms, total 92ms
08-14 14:06:29.273: I/Choreographer(828): Skipped 72 frames!  The application may be doing too much work on its main thread.
08-14 14:06:29.373: D/gralloc_goldfish(828): Emulator without GPU emulation detected.
08-14 14:06:29.373: D/dalvikvm(828): GC_CONCURRENT freed 5K, 3% free 8660K/8839K, paused 110ms+28ms, total 365ms
08-14 14:06:29.902: I/Choreographer(828): Skipped 85 frames!  The application may be doing too much work on its main thread.
08-14 14:06:32.533: D/dalvikvm(828): GC_CONCURRENT freed 32K, 3% free 9027K/9223K, paused 81ms+111ms, total 343ms
08-14 14:06:32.813: I/Choreographer(828): Skipped 71 frames!  The application may be doing too much work on its main thread.
08-14 14:06:33.303: I/Choreographer(828): Skipped 38 frames!  The application may be doing too much work on its main thread.
08-14 14:06:39.854: D/InputEventConsistencyVerifier(828): KeyEvent: ACTION_UP but key was not down.
08-14 14:06:39.854: D/InputEventConsistencyVerifier(828):   in android.widget.EditText@412b2f68
08-14 14:06:39.854: D/InputEventConsistencyVerifier(828):   0: sent at 1614282000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_M, scanCode=50, metaState=0, flags=0x8, repeatCount=0, eventTime=1614282, downTime=1614282, deviceId=0, source=0x301 }
08-14 14:06:39.874: D/InputEventConsistencyVerifier(828): KeyEvent: ACTION_UP but key was not down.
08-14 14:06:39.874: D/InputEventConsistencyVerifier(828):   in android.widget.EditText@412b2f68
08-14 14:06:39.874: D/InputEventConsistencyVerifier(828):   0: sent at 1614392000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_TAB, scanCode=15, metaState=0, flags=0x8, repeatCount=0, eventTime=1614392, downTime=1614282, deviceId=0, source=0x301 }
08-14 14:06:39.874: D/InputEventConsistencyVerifier(828):   -- recent events --
08-14 14:06:39.874: D/InputEventConsistencyVerifier(828):   1: sent at 1614282000000, (unhandled) KeyEvent { action=ACTION_UP, keyCode=KEYCODE_M, scanCode=50, metaState=0, flags=0x80000008, repeatCount=0, eventTime=1614282, downTime=1614282, deviceId=0, source=0x301 }
08-14 14:07:02.362: D/AndroidRuntime(828): Shutting down VM
08-14 14:07:02.362: W/dalvikvm(828): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
**08-14 14:07:02.472: E/AndroidRuntime(828): FATAL EXCEPTION: main
08-14 14:07:02.472: E/AndroidRuntime(828): android.os.NetworkOnMainThreadException
08-14 14:07:02.472: E/AndroidRuntime(828):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
08-14 14:07:02.472: E/AndroidRuntime(828):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
08-14 14:07:02.472: E/AndroidRuntime(828):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
08-14 14:07:02.472: E/AndroidRuntime(828):  at libcore.io.IoBridge.connect(IoBridge.java:112)
08-14 14:07:02.472: E/AndroidRuntime(828):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
08-14 14:07:02.472: E/AndroidRuntime(828):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
08-14 14:07:02.472: E/AndroidRuntime(828):  at java.net.Socket.connect(Socket.java:842)
08-14 14:07:02.472: E/AndroidRuntime(828):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
08-14 14:07:02.472: E/AndroidRuntime(828):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
08-14 14:07:02.472: E/AndroidRuntime(828):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-14 14:07:02.472: E/AndroidRuntime(828):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-14 14:07:02.472: E/AndroidRuntime(828):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-14 14:07:02.472: E/AndroidRuntime(828):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-14 14:07:02.472: E/AndroidRuntime(828):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-14 14:07:02.472: E/AndroidRuntime(828):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-14 14:07:02.472: E/AndroidRuntime(828):  at library.JSONParser.getJSONFromUrl(JSONParser.java:41)
08-14 14:07:02.472: E/AndroidRuntime(828):  at library.UserFunctions.loginUser(UserFunctions.java:40)
08-14 14:07:02.472: E/AndroidRuntime(828):  at com.thryfting.www.LoginActivity.onClick(LoginActivity.java:66)
08-14 14:07:02.472: E/AndroidRuntime(828):  at android.view.View.performClick(View.java:4084)
08-14 14:07:02.472: E/AndroidRuntime(828):  at android.view.View$PerformClick.run(View.java:16966)
08-14 14:07:02.472: E/AndroidRuntime(828):  at android.os.Handler.handleCallback(Handler.java:615)
08-14 14:07:02.472: E/AndroidRuntime(828):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-14 14:07:02.472: E/AndroidRuntime(828):  at android.os.Looper.loop(Looper.java:137)
08-14 14:07:02.472: E/AndroidRuntime(828):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-14 14:07:02.472: E/AndroidRuntime(828):  at java.lang.reflect.Method.invokeNative(Native Method)
08-14 14:07:02.472: E/AndroidRuntime(828):  at java.lang.reflect.Method.invoke(Method.java:511)
08-14 14:07:02.472: E/AndroidRuntime(828):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-14 14:07:02.472: E/AndroidRuntime(828):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-14 14:07:02.472: E/AndroidRuntime(828):  at dalvik.system.NativeStart.main(Native Method)** 
```

注册活动的更新代码：

```
 package com.thryfting.www;

import org.json.JSONException;
import org.json.JSONObject;

import library.DatabaseHandler;
import library.UserFunctions;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import com.actionbarsherlock.app.SherlockActivity;

public class RegisterActivity extends SherlockActivity implements OnClickListener{

    Button btnRegister;
    EditText inputFullName;
    EditText inputEmail;
    EditText inputPassword;
    TextView registerErrorMsg;
    TextView loginScreen;

    //JSON Response node names
    private static String KEY_SUCCESS    = "success";
    private static String KEY_ERROR      = "error";
    private static String KEY_ERROR_MSG  = "error_msg";
    private static String KEY_UID        = "uid";
    private static String KEY_NAME       = "name";
    private static String KEY_EMAIL      = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        loginScreen      = (TextView) findViewById(R.id.link_to_login);
        inputEmail       = (EditText) findViewById(R.id.etemailSignup);
        inputPassword    = (EditText) findViewById(R.id.etPasswordSignup);
        inputFullName    = (EditText) findViewById(R.id.etFullnameSignup);
        btnRegister      = (Button) findViewById(R.id.btnRegister);
        registerErrorMsg = (TextView) findViewById(R.id.register_error);

        loginScreen.setOnClickListener(this);
        btnRegister.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.btnRegister:

        new register().execute(KEY_SUCCESS);

        break;

    case R.id.link_to_login:
        Intent i = new Intent(getApplicationContext(), LoginActivity.class);
        startActivity(i);

        //Close Registration View
        finish();

        break;

        }

    }

    public class register extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            String name = inputFullName.getText().toString();
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();

            UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.registerUser(name, email, password);

            try{

                if(json.getString(KEY_SUCCESS) != null){
                    registerErrorMsg.setText("");

                    String res = json.getString(KEY_SUCCESS);
                    if(Integer.parseInt(res) == 1){
                        //user successfully registered
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        //Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));

                    }else{
                        //Error in registration
                        registerErrorMsg.setText("Error occured in registration");
                    }
                }
            } catch(JSONException e){
                e.printStackTrace();
            } finally{

                //Launch Dashboard 
                Intent dashboard = new Intent (getApplicationContext(), Timeline.class);

                //Close all views before launching Dashboard
                dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                //Close registration screen
                finish();
            } 

            return null;
        }

    }

} 
```

新的错误信息如下：

```
08-15 14:53:32.940: W/dalvikvm(865): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
08-15 14:53:33.060: E/AndroidRuntime(865): FATAL EXCEPTION: AsyncTask #1
08-15 14:53:33.060: E/AndroidRuntime(865): java.lang.RuntimeException: An error occured while executing doInBackground()
08-15 14:53:33.060: E/AndroidRuntime(865):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
08-15 14:53:33.060: E/AndroidRuntime(865):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-15 14:53:33.060: E/AndroidRuntime(865):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-15 14:53:33.060: E/AndroidRuntime(865):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-15 14:53:33.060: E/AndroidRuntime(865):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-15 14:53:33.060: E/AndroidRuntime(865):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
08-15 14:53:33.060: E/AndroidRuntime(865):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-15 14:53:33.060: E/AndroidRuntime(865):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-15 14:53:33.060: E/AndroidRuntime(865):  at java.lang.Thread.run(Thread.java:856)
08-15 14:53:33.060: E/AndroidRuntime(865): Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters. scheme=null, host=null, path=register
08-15 14:53:33.060: E/AndroidRuntime(865):  at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:591)
08-15 14:53:33.060: E/AndroidRuntime(865):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:293)
08-15 14:53:33.060: E/AndroidRuntime(865):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-15 14:53:33.060: E/AndroidRuntime(865):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-15 14:53:33.060: E/AndroidRuntime(865):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-15 14:53:33.060: E/AndroidRuntime(865):  at library.JSONParser.getJSONFromUrl(JSONParser.java:41)
08-15 14:53:33.060: E/AndroidRuntime(865):  at library.UserFunctions.registerUser(UserFunctions.java:63)
08-15 14:53:33.060: E/AndroidRuntime(865):  at com.thryfting.www.RegisterActivity$register.doInBackground(RegisterActivity.java:89)
08-15 14:53:33.060: E/AndroidRuntime(865):  at com.thryfting.www.RegisterActivity$register.doInBackground(RegisterActivity.java:1)
08-15 14:53:33.060: E/AndroidRuntime(865):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
08-15 14:53:33.060: E/AndroidRuntime(865):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-15 14:53:33.060: E/AndroidRuntime(865):  ... 5 more
08-15 14:53:34.812: I/Choreographer(865): Skipped 93 frames!  The application may be doing too much work on its main thread.
08-15 14:53:36.512: I/Process(865): Sending signal. PID: 865 SIG: 9

public JSONObject registerUser(String name, String email, String password){
        //building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", register_tag));
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));

        //Getting JSON object
        JSONObject json = jsonParser.getJSONFromUrl(register_tag, params);

        //return json
        return json;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:27:34.810

您违反了 StrictMode。这意味着您正在 UI 线程上做一些阻塞。因此，原因

> android.os.NetworkOnMainThreadException

从您的 LOG 的其余部分看来，您正在执行一个 Web 请求。确保 HTTP 请求包含在 AsyncTask（或类似的东西）中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:29:56.790

您似乎正在尝试在主线程上进行登录和注册。首先，这是一种不好的做法，并且不能在最近的 API 级别上完成。您需要做的就是在单独的线程中建立网络连接，无论是 AsyncTask 还是普通的旧 Thread()

举个例子 ：

用这个

```
public void login()
{
   new Thread(new Runnable() {

        @Override
        public void run() {
    //your network connection goes here
    }
   }).start();
} 
```

代替 ：

```
public void login()
{
    //your network connection goes here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:29:47.380

尝试在具有互联网连接的手机中检查相同的内容。logcat 还显示模拟器没有 GPS 连接。

# java - Java - 字符缓冲区问题

> ID：11958439
> 
> 赞同：3
> 
> 时间：2012-08-14T18:23:36.343
> 
> 标签：java

我有一个 1.99 GB 的字符文件。现在，我想从该文件中随机提取数百万个子序列，例如从位置 90 到 190、10 到 110、50000 到 50100 等（每个 100 个字符长）。

我通常使用它，

```
 FileChannel channel = new RandomAccessFile(file , "r").getChannel();
    ByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());
    Charset chars = Charset.forName("ISO-8859-1");
    CharBuffer cbuf = chars.decode(buffer);
    String sub = cbuf.subSequence(0, 100).toString();

    System.out.println(sub); 
```

但是，对于 1.99 gb 文件，上面的代码给出了错误，

```
java.lang.IllegalArgumentException
        at java.nio.CharBuffer.allocate(CharBuffer.java:328)
        at java.nio.charset.CharsetDecoder.decode(CharsetDecoder.java:792)
        at java.nio.charset.Charset.decode(Charset.java:791) 
```

所以，我使用了以下代码，

```
FileChannel channel = new RandomAccessFile(file , "r").getChannel();
CharBuffer cbuf = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size()).asCharBuffer() ;
String sub = cbuf.subSequence(0, 100).toString();

System.out.println(sub); 
```

它没有给出上述错误但返回输出：

```
ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ä¹ 
```

应该是“011111000000........”

任何人都可以帮助我为什么会发生这种情况以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:58:46.683

我只是在猜测，但我认为`Charset.decode(ByteBuffer)`当它试图在幕后为你分配*巨额资金时会失败。* `CharBuffer`同样，这只是一种预感，但该`decode`方法仅将缓冲区当前位置的字节解码到其限制，因此您可以执行类似的操作。

```
ByteBuffer buffer = ...
Charset charset = ...

buffer.position(0);
buffer.limit(100);

System.out.println(charset.decode(buffer)); 
```

`CharBuffer`该方法返回的容量（以字符为单位）`decode`将为 100。

[（附带说明一下，我认为您的第二次尝试给出了错误的输出，因为您没有使用特定的字符集来解码您的`CharBuffer`.）]

# php - 使用 PHP 从 Web 服务中检索 xml

> ID：11958442
> 
> 赞同：0
> 
> 时间：2012-08-14T18:24:06.593
> 
> 标签：php, xml

我正在尝试编写一个从 web 服务检索 xml 文件的 PHP 脚本。我已经在 C# 中获得了等效的工作，但我的总体目标是将我的最终脚本集成到 Wordpress 中。

诀窍是我需要添加一个身份验证标头令牌。

在 Fiddler 中，请求如下所示：

> 获取[https://service.domain.com/sample/stuff/555/state/PA/page/1/size/10](https://service.domain.com/sample/stuff/555/state/PA/page/1/size/10) HTTP/1.1
> 
> 用户代理：提琴手
> 
> 授权：123456789-123456789abcdef
> 
> 主机：service.mywebgrocer.com

我拥有（工作）的 C# 代码如下所示：

```
HttpWebRequest request =
    (HttpWebRequest)
    WebRequest.Create("https://service.domain.com/sample/stuff/555/state/PA/page/1/size/10");
  request.Method = "GET";
  request.Headers.Add("Authorization", "123456789-123456789abcdef");
  request.ContentType = "application/xml; charset=utf-8";

  HttpWebResponse httpWebResponse = (HttpWebResponse) request.GetResponse();

  Stream stream = httpWebResponse.GetResponseStream();
  StreamReader streamRead = new StreamReader(stream);
  String streamString = streamRead.ReadToEnd();
  XmlDocument doc = new XmlDocument();
  doc.LoadXml(streamString);

  Console.WriteLine("Name of xml document: {0}", doc.Name);
  Console.WriteLine("outer xml: {0}\n", doc.OuterXml); 
```

在 PHP 中实现这一点的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:26:37.957

最好的方法是使用[cURL](http://php.net/manual/en/book.curl.php)，因为您希望能够传递标头。 `file_get_contents`不会允许的。确保您查看[curl_setopt 函数](http://www.php.net/manual/en/function.curl-setopt.php)，了解您可以使用 cURL 执行的所有操作。

我想你会想要这个选项`CURLOPT_HTTPHEADER`。它需要一组 HTTP 标头字段来设置，格式为`array('Content-type: text/plain', 'Content-length: 100')`.

`CURLOPT_USERAGENT`如果您选择像 Fiddler 一样这样做（将其命名为 Fiddler 以外的其他名称），则将允许您传递用户代理字符串。

当您运行`curl_exec`它时，它应该从站点返回 XML。从那里您可以使用[XML Parser](http://php.net/manual/en/book.xml.php)、[SimpleXML](http://php.net/manual/en/book.simplexml.php)或任何您想要的。

# php - 使用 rand() 从 MySQL 生成唯一的随机元素

> ID：11958452
> 
> 赞同：1
> 
> 时间：2012-08-14T18:24:55.437
> 
> 标签：php, mysql

我通过使用此查询从 MySQL 获取元素；

```
select * from bahis where onay='1' or onay='2' order by rand() 
```

但是元素可以与此查询相同。例如，我有 3 个值与此查询匹配，A、B、C

它可以生成 AAB 或 ABC 或 ABB

但我想像 ABC 或 CBA 或 BA C 那样生成它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:37:09.900

使用这样的东西

```
select * from 
(select * from bahis where onay='1' or onay='2' group by abc_field) s1
order by rand() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:42:59.243

如所写，您的查询不会多次输出任何单独的行——它只会以随机顺序返回每一行。如果结果中有重复项，那么您的表必须包含重复项；如果这是正确的，并且您只需要抑制它们，请使用`DISTINCT`修饰符（例如，`SELECT DISTINCT * ...`）。

# java - 从泛型类派生类型

> ID：11958458
> 
> 赞同：0
> 
> 时间：2012-08-14T18:25:34.947
> 
> 标签：java, generics, factory, type-safety

我有一个泛型类，它接受两个类型参数：

```
public class MyGenericClass<T, S> {
    private List<T> myList;
    private List<S> mySecondList;

    //...

    public void addToFirstList(T e) {
        myList.add(e);
    }

    //...
} 
```

我希望能够在工厂中创建类的实例时为这两个参数指定具体类型，然后能够从我的其余代码中派生这些类型。

例如，如果我有代码：

```
public class AccessFactory {        
    public static MyGenericClass<Integer, Float> getInst() {
        return new MyGenericClass<Integer, Float>();;
    }
}

public class UsingFactoryClass {
    private MyGenericClass access;

    ...

    public foo() {
        access = AccessFactory.getInst();
    }
} 
```

我希望能够得出类中的实例`MyGenericClass`使用参数和.`access``UsingFactoryClass``Integer``Float`

是否有可能做到这一点而不必与无处不在的类型安全警告作斗争？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:34:13.543

将其声明为：

```
private MyGenericClass<Integer, Float> access; 
```

# asp.net - 如何使用 Windows 身份验证允许组成员访问我的 Web 应用程序

> ID：11958459
> 
> 赞同：1
> 
> 时间：2012-08-14T18:25:38.943
> 
> 标签：asp.net, iis-7

我了解如何在 Windows 身份验证下配置 .NET 授权，以限制特定用户和组对网站的访问。

但是，对于 Web 应用程序，如何设置数据库连接以模拟登录用户？SQl 数据库位于另一台服务器上。

如果这样严格 IIS 配置？代码？两个都？对于个人，我可以通过`<identity>`元素添加凭据，但是冒充 AD 组成员呢？

SQL Server 设置为*仅*允许来自特定组的连接。DBA设置了这个，我不知道细节。

环境

```
<identity impersonate="true" /> 
```

和 Integrated Security=true 导致以下错误：

```
HTTP Error 500.24 - Internal Server Error
An ASP.NET setting has been detected that does not apply in
Integrated managed pipeline mode. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:45:56.687

Using `<identity impersonate="true" />`

in your web.config along with `Integrated Security=true;` in your connection string should do this for you.

It will be up to the database to discover if the Active Directory User supplied is in the appropriate AD Group.

# objective-c - 使用某个对象类的类方法

> ID：11958460
> 
> 赞同：0
> 
> 时间：2012-08-14T18:25:40.833
> 
> 标签：objective-c, ios, casting, class-method

假设您有 A 类，A1、A2 和 A3 类继承自这些 A。所有四个类都实现了一个类方法：

```
+ (NSString *)idString; 
```

现在说你有一个对象

```
A *object1; //object may be of type A1, A2, or A3 
```

有什么方法可以调用适当的 idString 方法吗？我想也许：

```
[[object1 class] idString] 
```

但这不会编译，说不知道选择器 idString 的类方法。我还想过将 idString 视为私有方法并调用

```
[object1 idString] 
```

但这表示没有接口声明选择器 idString

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:43:17.287

获取您拥有的实例的类对象`[object class]`并向其发送消息，这正是它应该如何工作的。类也是 ObjC 中的对象，您可以将相同的消息发送到不同的类，就像您可以发送`intValue`到一个`NSString`或一个`NSNumber`实例（或者，`init`发送到（几乎）任何实例！）一样。这是 ObjC 的基础——在运行时根据消息查找方法。如果这一行：

```
[[object1 class] idString]; 
```

没有编译，那么你在其他地方有错误。这是完全合法的，而且你做你所描述的方式。

```
#import <Foundation/Foundation.h>

@interface Johnathan : NSObject
+ (NSString *)aNaughtyPhrase;
@end

@implementation Johnathan

+ (NSString *)aNaughtyPhrase
{
    return @"Knickers";
}

@end

@interface Johnny : Johnathan @end
@implementation Johnny

+ (NSString *)aNaughtyPhrase
{
    return @"Botty";
}

@end

@interface John : Johnathan @end
@implementation John

+ (NSString *)aNaughtyPhrase
{
    return @"Woo-woo";
}

@end

@interface Jack : Johnathan @end
@implementation Jack

+ (NSString *)aNaughtyPhrase
{
    return @"Semprini";
}

@end

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        Johnathan * jt = [Johnathan new];
        Johnny * jy = [Johnny new];
        John * jn = [John new];
        Jack * jk = [Jack new];

        NSLog(@"%@", [[jt class] aNaughtyPhrase]);
        NSLog(@"%@", [[jy class] aNaughtyPhrase]);
        NSLog(@"%@", [[jn class] aNaughtyPhrase]);
        NSLog(@"%@", [[jk class] aNaughtyPhrase]);

    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:29:28.347

```
[(Class)[object1 class] idString] 
```

是要走的路。如果这不能编译，请降低编译器的严格性（可能排除 -pedantic、-Werr、-Wall 等标志）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:34:02.517

试试这个，

```
if([object1 isKindOfClass:A])
{
  [A idString];
}
else if([object1 isKindOfClass:A1])
{
  [A1 idString];
} 
```

这`[object1 idString]`会给您警告，因为您将其视为私有方法。您不能通过它的对象调用私有方法，您需要在其实现本身中调用该方法。像`[self idString]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:35:36.363

如果你试图调用一个类方法，只需调用它`[Class method]`，这是因为你调用的方法与对象本身没有关系，实例化的对象和被调用的方法之间没有关系。因此它是一个类方法。

# xpath - 如何获取 Selenium IDE 中总是在变化的最后一个元素

> ID：11958462
> 
> 赞同：3
> 
> 时间：2012-08-14T18:25:46.327
> 
> 标签：xpath, selenium

在代码中：

```
<img style="cursor: pointer; background-color: transparent;" onclick="changeTeamHint(2155);" src="/images/icon_edit_inactive.png"> 
```

`onclick="changeTeamHint(2155);"`总是在变化。随着我在表单中添加更多字段，这个数字会增加。

如何获取 Selenium IDE 中的最后一个元素？例如，如果我添加一个带有 的文本字段`"changeTeamHint(2156)"`，如何使用 Selenium IDE 选择最新的？如果是 2157，则选择 2157。等等。

这是我到目前为止得到的：`xpath=(//img[@style='cursor:pointer;'])[last()]`

但是我的同事告诉我尝试通过 onclick 找到它，这就是我得到的有效方法：`xpath=(//img[@onclick='changeTeamHint(2155);'])[last()]`

我试过：`xpath=(//img[@onclick='changeTeamHint();'])[last()]`，但它给了我一个错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:41:33.800

我认为您想为 onclick 属性的值做一个开始：

```
xpath=(//img[starts-with(@onclick, 'changeTeamHint')])[last()] 
```

# apache-flex - Adobe AIR 接口名称格式

> ID：11958463
> 
> 赞同：0
> 
> 时间：2012-08-14T18:25:47.583
> 
> 标签：apache-flex, networking, air, adobe, ethernet

使用此代码：

```
results = NetworkInfo.networkInfo.findInterfaces();
for (var i:int =0; i<results.length; i++) {
     ethName = ethName + results[i].name
} 
```

我得到这个结果：

`{E9742B69-3B80-471A-AF41-B38753474834}`

我想我会得到接口的硬件信息或名称。这是什么？有人有类似的结果吗？

谢谢！

# hosting - 在服务器中存储 mp3 文件的最佳方法是什么？将其存储在数据库（BLOB）中，对吗？

> ID：11958465
> 
> 赞同：1
> 
> 时间：2012-08-14T18:26:02.860
> 
> 标签：hosting, storing-data, audio-comparison, audio

我有一个音频站点，用户可以在其中上传他们的音乐文件，但问题是我不能购买昂贵的托管服务，因为我没有通过这项服务获利。我正在寻找一些快捷方式来存储 mp3 文件以减少一些托管成本。

在技​​术上或任何（托管）建议中做的最好的想法将是充分的帮助。

我需要尽可能地节省服务器空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:33:11.657

在大多数情况下，您的数据库大小也*将*计入您的整体托管空间。此外，将巨大的 BLOB 插入数据库并不会提高性能。

执行此类操作时要遵循的典型模式是将 MP3（或任何二进制文件）保存在服务器上的特定目录中，并将文件的路径保存在数据库中。

除了使用原始托管环境之外，最便宜的方法可能是使用 Amazon AWS S3 减少冗余存储，起价为每 GB/每月 0.093 美元。相当便宜。

但是在回答您最初的问题时，在数据库中插入内容可能不会节省服务器空间，如果您的主机物有所值，即使他们声称“无限数据库”或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:53:21.097

只需考虑存储在数据库 (BLOB) 中通常是一种不好的做法，因为它会减慢查询速度、使数据库变大并降低数据库性能。数据库用于存储“可搜索”信息，而不是作为数据存储。尽管数据库可以做到这一点，但它并不是为此而设计的。

看看一些云存储服务/提供商，因为 ADrive 服务喜欢他们的个人计划（[http://www.adrive.com/personal_basic](http://www.adrive.com/personal_basic)），让你免费存储 50G（我不确定它是否是试用版），并且还具有远程文件传输功能，允许您从外部网站传输文件。

我从未尝试过这项服务，但试一试，它是免费的，也许可以解决您的问题

# sql - 使用联接和分组时，sql SUM 值不正确

> ID：11958469
> 
> 赞同：0
> 
> 时间：2012-08-14T18:26:25.297
> 
> 标签：sql

我正在编写一个查询，对按产品组细分的订单值进行求和 - 问题是当我添加连接时，聚合的 SUM 会大大膨胀 - 我认为这是因为它添加了重复的行。我对 SQL 有点陌生，但我认为这是因为我需要使用子选择或嵌套连接来构造查询？

所有数据都按预期返回，我的联接提取了所需的数据，但返回的 SUM(inv.item_total) AS 值远高于应有的值 - 下面的 SQL

```
SELECT  so.Company_id, SUM(inv.item_total) AS Value, co.company_name,
agents.short_desc, stock_type.short_desc AS Type

FROM SORDER as so

JOIN company AS co ON co.company_id = so.company_id
JOIN invoice AS inv ON inv.Sorder_id = so.Sorder_id
JOIN sorder_item AS soitem ON soitem.sorder_id = so.Sorder_id
JOIN STOCK AS stock ON stock.stock_id = soitem.stock_id
JOIN stock_type AS stock_type ON stock_type.stype_id = stock.stype_id
JOIN AGENTS AS AGENTS ON agents.agent_id = co.agent_id

WHERE
 co.last_ordered >'01-JAN-2012' and so.Sotype_id='1'

GROUP BY so.Company_id,co.company_name,agents.short_desc, stock_type.short_desc 
```

任何关于我应该如何构造此查询以提取“不重复”的 SUM(inv.item_total) AS 值的指南都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:33:35.440

要获得准确的总和，您只需要所需的连接。所以，这个版本应该可以工作：

```
SELECT so.Company_id, SUM(inv.item_total) AS Value, co.company_name
FROM SORDER so JOIN
     company co
     ON co.company_id = so.company_id JOIN
     invoice inv
     ON inv.Sorder_id = so.Sorder_id
group by so.Company_id, co.company_name 
```

然后，您可以一次添加一个连接，以查看乘法发生的位置。估计跟代理有关系。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T18:29:43.720

听起来连接不准确。

**第一个嫌疑人加入**

例如，代理是 per`company`还是 per `invoice`？

如果是按订单，那么连接是否应该类似于

`JOIN AGENTS AS AGENTS ON agents.agent_id = inv.agent_id`

**第二个嫌疑人加入**

一个人可以同时`order`拥有很多`items`和很多`invoices`吗？这也可能导致问题。假设一个订单有 3 件商品，并发出了 3 张发票。根据您的加入，相同的项目将显示 3 次意味着总共 9 个行项目应该只有 3 个。您可能需要消除该`invoices`表

**自行解决此问题的可能方法：**

我会删除所有分组和总和，看看您是否可以按一张发票过滤，为所有数据生成一组唯一的行。

从只有一个项目的发票开始，然后检查结果集的准确性。如果可行，则添加另一张包含多个发票的发票并检查行，看看您是否获得了完美的数据集。如果没有，那么具有重复值的列（公司名称、项目名称、代理名称等）通常是检查重复出现的原因的良好起点。

# kerberos - Kerberos/negotiate S4U2proxy 代表用户进行身份验证

> ID：11958470
> 
> 赞同：0
> 
> 时间：2012-08-14T18:26:28.317
> 
> 标签：kerberos

我想通过 Kerberos/Negotiate 协议代表用户在代理上进行身份验证。用户将通过服务器的表单登录进行身份验证，服务器知道用户是谁，并且服务器必须代表用户使用 kerberos 对后端服务器进行身份验证。

请帮助我提供示例代码或指出一些好的参考资料。

先感谢您

-csr

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:00:10.733

Michael：OP 询问的是 MS 所谓的“约束委派”，即他们发明的 S4U Kerberos 扩展，而不是您所指的标准委派（TGT 转发）。

CSR：首先：用户是否在您的“表单登录”中提供了他们的 Kerberos 密码？如果是，则不需要使用 S4U；您可以使用密码启动并直接获取凭据。

如果不是，那么这确实是 S4U 的一个用例。您没有说，但我假设您在 Windows 环境中，尽管 S4U 也已添加到 MIT Kerberos。

与让客户端转发 TGT 不同，S4U 允许域管理员授权服务主体独立地模拟任何用户使用一组有限的其他服务。要为约束委派启用服务：

*   MMC“用户和计算机”管理单元
*   选择服务帐户的属性
*   “委托”选项卡
*   “信任……委托给指定的服务”

在您的情况下，您还需要设置“使用任何身份验证协议；” 这使“协议转换”成为可能。如果您的服务正在使用 Kerberos 对用户进行身份验证，您可以让 DC 要求该服务提供来自客户端的最新票证，证明它有一些业务这样做。但是，由于您使用的是不同的身份验证方法，因此您必须放弃该检查；这就是协议转换所做的。

我将从这里开始了解 S4U： http: [//msdn.microsoft.com/en-us/library/cc246071](http://msdn.microsoft.com/en-us/library/cc246071(PROT.13).aspx) (PROT.13).aspx 。

我为 Apache mod_auth_kerb 编写了一个补丁，为 Unix Web 服务实现了约束委派，所以它确实有效。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:44:59.990

让客户向您发送可转发的（OK-AS-DELEGATE）票证。您可以从中提取 TGT 并模拟执行您的任务。当我从 IE 或 FF 收到服务票证并为用户绑定 AD 时，这适用于我的情况。

# image-processing - OpenCV (Emgu.CV)——用 alpha 合成图像

> ID：11958473
> 
> 赞同：8
> 
> 时间：2012-08-14T18:26:42.933
> 
> 标签：image-processing, opencv, emgucv, alphablending

我正在使用 Emgu.CV 执行一些基本的图像处理和合成。我的图像加载为`Image<Bgra,Byte>`.

**问题 #1：**当我使用该`Image<,>.Add()`方法时，无论 alpha 值如何，图像总是混合在一起。相反，我希望它们一个接一个地合成，并使用包含的 alpha 通道来确定应该如何混合图像。因此，如果我调用`image1.Add(image2)`image2 中的任何完全不透明像素将完全覆盖 image1 中的像素，而半透明像素将基于 alpha 值进行混合。

这就是我试图以视觉形式做的事情。有一个城市形象，剪掉了一些“透明的洞”，后面是一只青蛙。这应该是这样的：

![在此处输入图像描述](../Images/63e6cfeb39764c9fbc451056f92c211a.png)

这就是 openCV 产生的。

![这就是我打电话时 OpenCV (Emgu.CV) 产生的结果](../Images/7a606a10874d76050ad1c163bc3c3098.png)

如何使用 OpenCV 获得这种效果？它会像打电话一样快`Add()`吗？

**问题 #2：**有没有办法就地执行此合成，而不是在每次调用时创建一个新图像`Add()`？（例如`image1.AddImageInPlace(image2)`修改 `image1`? 的字节）

**注意**：在 Emgu.CV 中寻找答案，我使用它是因为它处理透视变形的能力。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T18:58:10.930

**在 OpenCV 2.4 之前，不支持带有 alpha 通道的 PNG。**

要验证您当前的版本是否支持它，请在加载您确定为 RGBA 的图像后打印通道数。如果支持，应用程序将输出数字 4，否则将输出数字 3 (RGB)。使用 C API，您可以：

```
IplImage* t_img = cvLoadImage(argv[1], CV_LOAD_IMAGE_UNCHANGED);
if (!t_img)
{
    printf("!!! Unable to load transparent image.\n");
    return -1;
}
printf("Channels: %d\n", t_img->nChannels); 
```

**如果您无法更新 OpenCV**：

*   [有](https://stackoverflow.com/a/8280564/176769) [一些帖子](https://web.archive.org/web/20120909192400/http://blog.developer.stylight.de/2010/05/how-to-load-alpha-channel-pngs-with.html)试图绕过这个限制，但我自己没有测试过；
*   最简单的解决方案是使用另一个 API 来加载图像并混合它，检查[blImageBlending](http://www.barbato.us/2010/12/01/blimageblending-emulating-photoshops-blending-modes-opencv/)；
*   另一种不是轻量级的替代方法是[使用](http://www.idevelopsoftware.com/2008/03/use-qimage-to-create-a-composite-image-ie-one-image-with-another-overlaid-on-top-of-it/) [**Qt**](https://stackoverflow.com/a/4379632/176769)。

**如果您的版本已经支持带有 RGBA 的 PNG**：

*   看看[在 OpenCV 中模拟 Photoshop 的混合模式](http://www.barbato.us/2010/12/01/blimageblending-emulating-photoshops-blending-modes-opencv/)。它实现了几种[Photoshop 混合模式](http://www.northlite.net/ps/blend.htm)，我想您能够将该代码转换为 .Net。

**编辑：**

## 我最近不得不处理这个问题，并且我已经在[这个答案](https://stackoverflow.com/a/20673435/176769)上演示了如何处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:00:04.777

您必须遍历每个像素。我假设图像 1 是青蛙图像，图像 2 是城市图像，图像 1 总是大于图像 2。

```
//to simulate image1.AddInPlace(image2)
 int image2w = image2.Width;
 int image2h = image2.Height;
 int i,j;
 var alpha;
 for (i = 0; i < w; i++)
 {
     for (j = 0; j < h; j++)
     {
           //alpha=255 is opaque > image2 should be used
           alpha = image2[3][j,i].Intensity;
           image1[j, i] 
               = new Bgra(
               image2[j, i].Blue * alpha + (image1[j, i].Blue * (255-alpha)),
               image2[j, i].Green * alpha + (image1[j, i].Green * (255-alpha)),
               image2[j, i].Red * alpha + (image1[j, i].Red * (255-alpha)));
      }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:19:50.847

我在互联网上发现了一篇有趣的博客文章，我认为这与您正在尝试做的事情有关。

请查看[创建叠加层方法](http://www.aishack.in/2010/07/transparent-image-overlays-in-opencv/)（[archive.org 链接](https://web.archive.org/web/20100710151657/http://www.aishack.in/2010/07/transparent-image-overlays-in-opencv/)）。您可以使用这个想法来实现自己的功能，以上述方式添加两个图像，使图像中的某些特定区域透明，而其余部分保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T14:46:46.577

以 Osiris 的建议为起点，并在 Wikipedia 上查看了 alpha compositing，我最终得到了以下内容，这对我的目的非常有效。

这与 Emgucv 一起使用。我希望在 Emgucv 中可以使用 opencv gpu::AlphaComposite 方法，我相信它会为我完成以下工作，但可惜我使用的版本似乎没有实现它们。

```
static public Image<Bgra, Byte> Overlay( Image<Bgra, Byte> image1, Image<Bgra, Byte> image2 )
        {

            Image<Bgra, Byte> result = image1.Copy();
            Image<Bgra, Byte> src = image2;
            Image<Bgra, Byte> dst = image1;

            int rows = result.Rows;
            int cols = result.Cols;
            for (int y = 0; y < rows; ++y)
            {
                for (int x = 0; x < cols; ++x)
                {
                    // http://en.wikipedia.org/wiki/Alpha_compositing
                    double  srcA = 1.0/255 * src.Data[y, x, 3];
                    double dstA = 1.0/255 * dst.Data[y, x, 3];
                    double outA = (srcA + (dstA - dstA * srcA));
                    result.Data[y, x, 0] = (Byte)(((src.Data[y, x, 0] * srcA) + (dst.Data[y, x, 0] * (1 - srcA))) / outA);  // Blue
                    result.Data[y, x, 1] = (Byte)(((src.Data[y, x, 1] * srcA) + (dst.Data[y, x, 1] * (1 - srcA))) / outA);  // Green
                    result.Data[y, x, 2] = (Byte)(((src.Data[y, x, 2] * srcA) + (dst.Data[y, x, 2] * (1 - srcA))) / outA); // Red
                    result.Data[y, x, 3] = (Byte)(outA*255);
                }
            }
            return result;
        } 
```

较新的版本，使用 emgucv 方法。而不是一个循环。不确定它会提高性能。双单位 = 1.0 / 255.0；图像[] dstS = dst.Split(); 图像[] srcS = src.Split(); 图像[] rs = 结果.Split();

```
 Image<Gray, double> srcA = srcS[3] * unit;
        Image<Gray, double> dstA = dstS[3] * unit;
        Image<Gray, double> outA = srcA.Add(dstA.Sub(dstA.Mul(srcA)));// (srcA + (dstA - dstA * srcA));

        // Red.
        rs[0] = srcS[0].Mul(srcA).Add(dstS[0].Mul(1 - srcA)).Mul(outA.Pow(-1.0)); // Mul.Pow is divide.
        rs[1] = srcS[1].Mul(srcA).Add(dstS[1].Mul(1 - srcA)).Mul(outA.Pow(-1.0));
        rs[2] = srcS[2].Mul(srcA).Add(dstS[2].Mul(1 - srcA)).Mul(outA.Pow(-1.0));
        rs[3] = outA.Mul(255);

        // Merge image back together.
        CvInvoke.cvMerge(rs[0], rs[1], rs[2], rs[3], result);
        return result.Convert<Bgra, Byte>(); 
```

# jquery - FullCalendar 在周末和无周末之间切换

> ID：11958479
> 
> 赞同：3
> 
> 时间：2012-08-14T18:27:14.200
> 
> 标签：jquery, fullcalendar

我想知道 Arshaw 的 FullCalendar 中是否有办法： 1- 将日历从显示周末更改为不显示周末，反之亦然。2-动态地将时隙间隔从 30 分钟更改为 60 分钟。

换句话说，我想做的是：

```
//Clicking the button that shows Saturday and Sunday too
    $('#weekend-yes').click(function(){
        $('#weekend-yes').hide();
        $('#weekend-no').fadeIn();
            //HYPOTHETICALLY  DO THIS
        $('#calendar').fullCalendar('option', 'weekends', true/false);
    }); 
```

如果这样的事情是不可能的，那么最好的解决方法是什么？我想我可以有第二个日历，它是第一个日历的复制品，但复制太多了。

感谢我能得到的任何帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T10:19:08.723

尝试这个：

```
$('#values').click(function(){
    var weekend = $('#calendar').fullCalendar('option', 'weekends');
    if (weekend){
        $('#values').text('Show weekend');
        $('.fc-header').remove();
        $('.fc-content').remove();
        $('#calendar').fullCalendar({ firstDay:1, height:650, 
                                           weekMode:'liquid', weekends:false, 
                                           header: {left: 'prev,next today', 
                                                    center: 'title',
                                                    right: 'month,
                                                    agendaWeek,agendaDay'}});
    } else {
        $('#values').text('Hide weekend');
        $('.fc-header').remove();
        $('.fc-content').remove();
        $('#calendar').fullCalendar({ firstDay:1, height:650, 
                               weekMode:'liquid', weekends:true, 
                               header: {left: 'prev,next today',
                                        center: 'title',
                                         right: 'month,agendaWeek,agendaDay'}});
    };
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T20:51:44.677

根据该插件的作者，所有 FullCalendar 选项都没有设置器（不幸`weekends`的是其中之一）。所以我认为你有几个选择

1.  重新初始化（销毁并初始化）周末设置为 true/false 的日历
2.  编辑插件的源代码以为此选项添加一个设置器。我已经看到有关此问题的记录，但我认为该插件不再被积极开发。

一切顺利！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-01T22:35:42.060

旧主题，但仍无法通过 fullCalendar (2 & 3) 的当前实现来解决。fullCalendar 具有“ **changeView** ”功能。您必须自定义视图。您可以通过扩展现有的一个来做到这一点。

```
$('#calendar').fullCalendar({
views: {
    workWeek: {
        type: 'agendaWeek',
        hiddenDays: [0, 6]
    }
}}); 
```

现在，您可以随时更改视图。

```
$('#calendar').fullCalendar( 'changeView', 'workWeek' ) 
```

或者

```
$('#calendar').fullCalendar( 'changeView', 'agendaWeek' ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-26T03:25:25.973

**2017 年更新：** FullCalendar 在 2.9.0 (7-10-2016) 中添加了周末设置器，因此不再需要销毁日历或自定义视图操作。

以下是我使用 FullCalendar 3.1.0 在我的生产应用程序中实现周末切换的方法：

```
var calendarOptions = {
  ...
  customButtons: {
    toggleWeekends: {
      text: 'Show Weekends',
      click: function() {
        toggleWeekends();
      },
    },
  },
  ...
  header: {
    left: 'today toggleWeekends',
    ...
  },
  weekends: false,
}

function toggleWeekends() {
  var weekends = $('#calendar').fullCalendar('option', 'weekends');
  var text = 'Show Weekends';

  if (weekends == false) {
    text = 'Hide Weekends';
  }

  $('#calendar').fullCalendar('option', {
    customButtons: {
      toggleWeekends: {
        text: text,
        click: function() {
          toggleWeekends();
        },
      },
    },
    weekends: !weekends,
  });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-20T14:23:55.363

我在谷歌上遇到了这个，并想我会添加一个尚未提及的选项。日历日都有一个带有其名称的 css 类，使它们易于定位。

```
$(document).ready(function(){
   $('#toggleOff').on('click', function(){
       $('.fc-sat').hide();
       $('.fc-sun').hide();
   });

   $('#toggleOn').on('click', function(){
       $('.fc-sat').show();
       $('.fc-sun').show();
   });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-04T00:00:23.017

希望下面的代码片段可能对您有所帮助（我使用的是 fullcalendar.js 版本 2）

```
var calendarInitiate = function(noWeekend){
$("#calendar").fullCalendar('destroy');
$("#calendar").fullCalendar({weekends:noWeekend, events: [{ ...enter events list here... }]});
}
calendarInitiate(true); //True initially to show weekends

$("#showWeekends").click(function(){ calendarInitiate(true); //This will show weekends });
$("#hideWeekends").click(function(){ calendarInitiate(false); //This will hide weekends }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-03T20:27:53.337

对于切换周末：

1.  创建[自定义视图](https://fullcalendar.io/docs/views/Custom_Views/)
2.  [在自定义视图的属性中将周末](https://fullcalendar.io/docs/display/weekends/)设置为 false
3.  将自定义视图的名称添加到[header](https://fullcalendar.io/docs/display/header/)中，以便此视图出现一个按钮。
4.  使用[defaultView](https://fullcalendar.io/docs/views/defaultView/)设置您的初始视图

* * *

```
$('#calendar').fullCalendar({
    //defaultView: 'agendaWeekdays',
    header: {
        right: 'month,monthWeekdays,agendaWeek,agendaWeekdays'
    },
    views: {
        agendaWeekdays: {
            buttonText: 'Weekdays',
            type: 'agendaWeek',
            weekends: false
        },
        monthWeekdays: {
            buttonText: 'Month (Weekdays)',
            type: 'month',
            weekends: false
        }
    }
}); 
```

* * *

至于插槽持续时间，您可以[销毁日历并通过更改](https://fullcalendar.io/docs/display/destroy/)[slotDuration](https://fullcalendar.io/docs/agenda/slotDuration/)属性再次创建它。

或者，您可以创建更多自定义视图，每个视图都有不同的 slotDurations。您无需将这些视图的按钮添加到标题中，而是为调用您的自定义视图的插槽持续时间创建自己的 UI。

* * *

```
$('#calendar').fullCalendar('changeView', 'agendaWeekdaysSlotDuration15'); 
```

# javascript - 如何从函数中引用元素（从事件侦听器调用）

> ID：11958488
> 
> 赞同：0
> 
> 时间：2012-08-14T18:27:59.977
> 
> 标签：javascript, jquery

单击时如何将类添加到特定类的对象？应该获得额外类的元素包含“日期”类。

```
$(".date").bind("click",addClass());

function addClass(){
//objectClicked.className+=""
} 
```

我无法弄清楚如何识别被点击的确切元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:30:49.623

在 jQuery 事件处理程序中，`this`绑定到事件的源元素，因此您可以使用`$(this).addClass('yourClass');`将新类添加到单击的元素。

```
$(".date").bind("click", addClass);

function addClass() {
    $(this).addClass('yourClass');
} 
```

另外，请注意不要`addClass`在调用`bind`. 那是行不通的。您需要像我一样传递函数本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:41:56.267

虽然 FishBasketGordo 答案是一个可行的解决方案，但您也可以这样做：

```
$(".date").click(function() {
    $(this).addClass("yourClass");
}); 
```

# javascript - 单击更改另一个元素源

> ID：11958489
> 
> 赞同：0
> 
> 时间：2012-08-14T18:28:16.493
> 
> 标签：javascript, jquery, attributes, image

此处损坏代码的工作版本[http://jsfiddle.net/Uey6W/8/](http://jsfiddle.net/Uey6W/8/)

无法确定如何从点击功能更改另一个元素上的属性

狙击

```
$('#black').click(function() {
$('#blackbox').slideToggle('slow', function() {});
$('#yellowbox').slideUp();
}); 
```

单击此处，我​​希望不仅隐藏其他元素，还希望还原其他按钮

基本上，当另一个按钮切换到打开状态时，我如何将另一个按钮切换到关闭状态

```
$("#black").toggle(
    function () {
      var src = $(this).attr("src").replace("ready.png", "pressed.png");
      $(this).attr("src", src);
     },
    function () {
      var src = $(this).attr("src").replace("pressed.png", "ready.png");
      $(this).attr("src", src);
    }
);
$('#black').click(function() {
$('#blackbox').slideToggle('slow', function() {});
$('#yellowbox').slideUp();
});

$("#yellow").toggle(
    function () {
      var src = $(this).attr("src").replace("ready.png", "pressed.png");
      $(this).attr("src", src);
     },
    function () {
      var src = $(this).attr("src").replace("pressed.png", "ready.png");
      $(this).attr("src", src);
    }
);
$('#yellow').click(function() {
$('#yellowbox').slideToggle('slow', function() {});
$('#blackbox').slideUp();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:44:15.630

~~From what I can see in the [api reference](http://api.jquery.com/toggle/), toggle doesn't take two functions as parameters.~~ And you're passing an empty function to slideToggle (just omit the empty function as a parameter if that's the intention). It looks like you're on the right train of thought with just a few errors.

Edit: Was looking at the wrong toggle. Correct documentation [here](http://api.jquery.com/toggle-event/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:54:46.123

您几乎可以通过以下方式实现完全相同的目标：

```
var btn1 = "ready.png",
    btn2 = "pressed.png";

$("#black, #yellow").on('click', function() {
    $("#black, #yellow").not(this).prop('src', this.src);
    this.src = this.src==btn1 ? btn2 : btn1;
    $('#'+this.id+'box').slideToggle('slow').siblings('div').slideUp('slow');
}); 
```

[**小提琴**](http://jsfiddle.net/Uey6W/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:50:29.107

答案一直在我面前为了恢复其他按钮我只是改变了点击语句

```
$('#black').click(function() {
$('#blackbox').slideToggle('slow', function() {});
$('#yellowbox').slideUp();
    $('yellow').atr('src', ready.png)
}); 
```

# java - 是否有理由更喜欢 Executors 工厂方法而不是直接实例化类？

> ID：11958494
> 
> 赞同：3
> 
> 时间：2012-08-14T18:28:36.520
> 
> 标签：java, concurrency, java.util.concurrent

是否有理由更喜欢这样做：

```
private static ExecutorService service = Executors.newScheduledThreadPool(10); 
```

对此：

```
private static ExecutorService service = new ScheduledThreadPoolExecutor(10); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T18:30:09.133

没有特别的原因，没有。静态方法是为了方便而`Executors`编写的，旨在涵盖大部分标准用例。

尽管不是您提到的情况，但使用其他一些静态方法会使您的代码更加简单且更具可读性。例如：

```
threadPool = Executors.newFixedThreadPool(10); 
```

相对：

```
threadPool = new ThreadPoolExecutor(10, 10, 0L, TimeUnit.MILLISECONDS,
      new LinkedBlockingQueue<Runnable>()); 
```

我能想到为什么使用这些`Executors`方法会更好的唯一可能原因是，如果在未来的 JDK 版本中，他们更改了一些底层`ExecutorService`类的默认值，然后 Sun/Oracle 会调整静态方法以更好地利用新的构造函数参数，您不必更改代码。

# php - PHP 缓存脚本

> ID：11958495
> 
> 赞同：0
> 
> 时间：2012-08-14T18:28:36.607
> 
> 标签：php, caching, ini

我遇到了 PHP 或 Apache 的问题。它正在缓存网页。

我正在尝试使用 PHP 5 在 Ubuntu Server 和 Apache 下进行开发。我在缓存页面时遇到问题：我正在进行更改，但我看不到它们。即使我删除了整个脚本并添加了 echo 'HI'; 它没有显示。

如何阻止页面被缓存？

如果我停止 apache 并重新启动它，页面会显示得很好。

看到 session.cache_expire 但似乎不是我要找的。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:48:21.387

如果响应状态`500 Internal Server Error.`显示新代码中有错误，并且浏览器显示旧缓存。仔细检查您的新代码，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:04:33.620

它不是缓存结果，但您禁用了 error_reporting 和/或显示错误，因此您得到一个空白页。

你应该在你的 php.ini 中设置这个参数：

display_errors：打开 error_reporting：E_ALL log_errors：打开

您可以在[这里](http://www.phptherightway.com/#error_reporting)找到更多信息：

# jquery - KnockoutJS 中的嵌套模板绑定

> ID：11958499
> 
> 赞同：0
> 
> 时间：2012-08-14T18:28:51.583
> 
> 标签：jquery, knockout.js, templatebinding

好的，在我展示我的代码和我的方法之前，让我解释一下手头的问题是什么，也许有人有更好的解决方案。问题是我有一个按特定标准分组的数组列表。我需要根据标准呈现一个列表/部分，每个部分都包含一个对象列表，这些对象也应该呈现为 HTML。

我是 KnockoutJS 的新手——我昨天开始使用它。但是考虑到手头的问题，我在文档中搜索了可观察的字典或类似的东西。幸运的是，我找到了[ko.observableDictionary 插件](https://github.com/jamesfoster/knockout.observableDictionary)。所以我认为这应该可以解决问题并编写了以下代码（只是一些概念证明）：

```
<div id="tiles-holder" data-bind="template: { name: 'tile-list', foreach: dictionary }">

</div>

<script type="text/html" id="tile-list">
<div class="md-auto-max-width">
    <div class="md-list-tiles md-auto-arrange-tiles" data-bind="template: { name: 'tile-default', foreach: items }"></div>
</div>
</script>

<script type="text/html" id="tile-default">
    <div class="metro-tile-square  md-list-item md-list-tile-large">
        <div class="md-list-item-image" data-bind="css: { defaultimage: $data.title() != 'architect' }"></div>

        <div>
            <span data-bind="text: name"></span> - <span data-bind="text: $data.department"></span>
        </div>

    </div>
</script>

<script type="text/javascript" src="@Url.Content("~/Scripts/metro/ko.observableDictionary.js")"></script>
<script type="text/javascript">

    $(function () {
        var viewModel = function TileViewModel() {
            var self = this;

            self.dictionary = new ko.observableDictionary();

            for (var i = 0; i < 15; i++) {
                self.dictionary.push("Developers", new employee('developer' + i, 'developer', 'projectDevelopment'));
                self.dictionary.push("Analysts", new employee('analyst' + i, 'analyst', 'business intelligence'));
            }
            self.dictionary.push("Architects",new employee('Some Architect', 'architect', 'Architecture and development'));

            function employee(name, title, department) {
                this.name = ko.observable(name);
                this.title = ko.observable(title);
                this.department = ko.observable(department);
            }
        };

        ko.applyBindings(new viewModel(), $('#tiles-holder').get(0));
    });
</script> 
```

但我不断收到以下错误：

> 错误：无法解析绑定。消息：TypeError：$data.title 不是函数；绑定值：css: { defaultimage: $data.title() != 'architect' }

我认为问题在于`$data`没有引用模板的数据上下文。但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:48:55.687

为什么首先使用字典，您没有将其用作字典，因此请改用 observableArray

无论如何，您需要访问每个项目的 value 道具

[http://jsfiddle.net/X2xZM/](http://jsfiddle.net/X2xZM/)

# delphi - 模拟网页反馈按钮

> ID：11958503
> 
> 赞同：2
> 
> 时间：2012-08-14T18:29:00.880
> 
> 标签：delphi, feedback

我喜欢在模拟网页中的可能主（MDIParent）表单上放置一个反馈按钮。

当鼠标经过它时喜欢它生长。就像网络一样。带有问题的表格和数据的发送，我真的不需要它，只是视觉的东西。

有没有这样的组件？我不认为这很难做到，但如果它已经存在，它会和我一样一段时间。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:50:13.823

要制作动画幻灯片面板，您可以使用如下代码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    FFeedbackBtn: TPanel;
    FFeedbackPanel: TPanel;
    procedure OnFeedbackBtnMouseEnter(Sender: TObject);
    procedure OnFeedbackPanelMouseLeave(Sender: TObject);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  FFeedbackBtn := TPanel.Create(Self);
  FFeedbackBtn.Parent := Self;
  FFeedbackBtn.Anchors := [akLeft, akTop, akBottom];
  FFeedbackBtn.Caption := '';
  FFeedbackBtn.SetBounds(0, 0, 40, ClientHeight);
  FFeedbackBtn.OnMouseEnter := OnFeedbackBtnMouseEnter;

  FFeedbackPanel := TPanel.Create(Self);
  FFeedbackPanel.Parent := Self;
  FFeedbackPanel.Anchors := [akLeft, akTop, akBottom];
  FFeedbackPanel.Caption := 'Feedback panel';
  FFeedbackPanel.Visible := False;
  FFeedbackPanel.SetBounds(0, 0, 250, ClientHeight);
  FFeedbackPanel.OnMouseLeave := OnFeedbackPanelMouseLeave;
end;

procedure TForm1.OnFeedbackBtnMouseEnter(Sender: TObject);
begin
  AnimateWindow(FFeedbackPanel.Handle, 150, AW_ACTIVATE or AW_SLIDE or
    AW_HOR_POSITIVE);
end;

procedure TForm1.OnFeedbackPanelMouseLeave(Sender: TObject);
begin
  AnimateWindow(FFeedbackPanel.Handle, 150, AW_HIDE or AW_SLIDE or
    AW_HOR_NEGATIVE);
end;

end. 
```

***更新：***

这是上面的另一个版本，现在像*典型的反馈按钮*一样具有垂直文本，呈现在*按钮*面板上拉伸的油漆框上：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    FFeedbackBtn: TPanel;
    FFeedbackBtnOverlay: TPaintBox;
    FFeedbackPanel: TPanel;
    procedure OnFeedbackBtnMouseEnter(Sender: TObject);
    procedure OnFeedbackPanelMouseLeave(Sender: TObject);
    procedure OnFeedbackBtnOverlayPaint(Sender: TObject);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  FFeedbackBtn := TPanel.Create(Self);
  FFeedbackBtn.Parent := Self;
  FFeedbackBtn.Anchors := [akLeft, akTop, akBottom];
  FFeedbackBtn.Caption := '';
  FFeedbackBtn.Color := $0000B3FF;
  FFeedbackBtn.ParentBackground := False;
  FFeedbackBtn.SetBounds(0, 0, 40, ClientHeight);

  FFeedbackBtnOverlay := TPaintBox.Create(Self);
  FFeedbackBtnOverlay.Parent := FFeedbackBtn;
  FFeedbackBtnOverlay.Align := alClient;
  FFeedbackBtnOverlay.OnPaint := OnFeedbackBtnOverlayPaint;
  FFeedbackBtnOverlay.OnMouseEnter := OnFeedbackBtnMouseEnter;

  FFeedbackPanel := TPanel.Create(Self);
  FFeedbackPanel.Parent := Self;
  FFeedbackPanel.Anchors := [akLeft, akTop, akBottom];
  FFeedbackPanel.Caption := 'Feedback panel';
  FFeedbackPanel.Color := $0000F9FF;
  FFeedbackPanel.ParentBackground := False;
  FFeedbackPanel.Visible := False;
  FFeedbackPanel.SetBounds(0, 0, 250, ClientHeight);
  FFeedbackPanel.OnMouseLeave := OnFeedbackPanelMouseLeave;
end;

procedure TForm1.OnFeedbackBtnMouseEnter(Sender: TObject);
begin
  AnimateWindow(FFeedbackPanel.Handle, 150, AW_ACTIVATE or AW_SLIDE or
    AW_HOR_POSITIVE);
end;

procedure TForm1.OnFeedbackPanelMouseLeave(Sender: TObject);
begin
  AnimateWindow(FFeedbackPanel.Handle, 150, AW_HIDE or AW_SLIDE or
    AW_HOR_NEGATIVE);
end;

procedure TForm1.OnFeedbackBtnOverlayPaint(Sender: TObject);
var
  S: string;
  X, Y: Integer;
begin
  S := 'Feedback...';
  with FFeedbackBtnOverlay do
  begin
    Canvas.Brush.Color := $0000B3FF;
    Canvas.FillRect(ClientRect);
    Canvas.Font.Orientation := 900;
    X := (ClientWidth - Canvas.TextHeight(S)) div 2;
    Y := ClientHeight - (ClientHeight - Canvas.TextWidth(S)) div 2;
    Canvas.TextOut(X, Y, S);
  end;
end;

end. 
```

结果：

![结果](../Images/0bd70d8cc7a2b24f096b8f98d09ca4c4.png)

您还应该实现一些逻辑以防止用户在实际填写字段时隐藏反馈面板，但这是此类反馈表单的自然弱点。

# symfony1 - 访问为空的左连接成员时的教义痛苦

> ID：11958504
> 
> 赞同：4
> 
> 时间：2012-08-14T18:29:02.237
> 
> 标签：symfony1, symfony-1.4, doctrine-1.2, doctrine-query

我的模型中有一个 Doctrine 查询，说 Model_1Table.class.php 与 Model_2 连接。Model_2 在多对一关系上与 Model_1 相关。（它确实是一对一的关系，而不是多对一的关系，但架构是这样设计的）

我的查询是：

```
$this->select('m1.*, m2.primaryKeyOfModel2')->leftJoin('m1.model2 m2')->where('m1.record = ?', some_value); 
```

检查 SF 调试器日志，它按应有的方式检索信息，保留 Model_1 中满足 where 子句的所有表记录，并保留 Model_2 的所有值以及那些不存在的空值。

当我想访问此信息并根据表中是否存在 model_2 记录有条件地呈现信息时，痛苦就开始了。我喜欢这样：

```
<?php foreach($Model1Records as $Model1Record) :
          if($Model1Record->getModel2()) :
              foreach($Model1Record->getModel2() as $Model2Record):
                        //do something 
               end foreach ; 
          else: //basically checking for if(!($Model1Record->getModel2()))
              // do something else
           endif;
    endforeach ; ?> 
```

现在基于此它应该真的可以工作，但我认为正在发生的事情是对于 model2 的空值它失败了。我该如何推断，因为如果我删除上述记录中的 if-else 语句并简单地使用 foreach 循环访问 Model2Record 的集合，则检索 Model2Record 中的可用行，但是它当然不会访问空值. 从本质上讲，我从中获得的信息就是我通常从内部连接中获得的信息。

要提出一个问题，我如何访问 Model1 的记录，其中 Model2 记录为空值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T23:46:58.207

不确定通过学说模型1和模型2之间的空关系的默认返回是什么，但显然它没有返回false，否则你会遇到else条件，请尝试'instanceof'，例如：

```
<?php foreach($Model1Records as $Model1Record) :

      if($Model1Record->getModel2() instanceof Model2) : 
```

您还可以尝试将 Model1 对象转换为数组：

```
<?php foreach($Model1Records as $Model1Record) :

    <?php $model1 = $Model1Record->toArray();  ?>

      if(isset($model1['Model2'])) : 
```

- 更新 -

如果它返回一个 Doctrine_Collection 实例，你应该能够做到：

```
<?php foreach($Model1Records as $Model1Record) :

      if($Model1Record->getModel2()->count() > 0) : 
```

# twitter-bootstrap - Twitter Bootstrap：使标题不固定，但仍保留旧行为

> ID：11958517
> 
> 赞同：0
> 
> 时间：2012-08-14T18:29:32.923
> 
> 标签：twitter-bootstrap

我的标题现在很好用，但我想让它不粘在视口的顶部。

但是，当我从 更改为`.navbar.navbar-fixed-top`时`.navbar`，我失去了很多其他标题功能：徽标不再与我页面上的内容对齐（相反，它一直向左对齐）。同样，对于与我的页面右侧对齐的链接 - 现在链接一直向右。此外，头部略微圆润，在右上角和左上角留下白点。

有什么简单的方法可以解决这些问题而无需手动解决每个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:14:16.097

较小的足迹将是添加

```
.navbar-fixed-top { position: absolute!important; } 
```

这将替换`fixed`为`absolute`.

# jquery - jQuery淡入淡出速度效果只工作一次

> ID：11958522
> 
> 赞同：1
> 
> 时间：2012-08-14T18:29:51.513
> 
> 标签：jquery, css

所以我有一个 div 自动设置为在页面加载时不显示。当一个特定的链接被点击时，它应该显示为淡入“慢”，反之亦然淡出。

fadeIn 在 http 请求后第一次被点击时起作用，但 fadeOut 不起作用（但是确实关闭）。在第一次之后，整个淡入淡出效果根本不起作用。然后它的行为就像是 hide() 和 show()

编码：

```
$('#req_login, #srch_login').click(function() {
    $('#popbox, #popbox_bg').show(0); // opacity background
    $('#popbox #container').fadeIn('slow'); // actual div with content
    $("#email_alt_lgn").focus(); // first field in form

    // close popbox with escape key
    $(document).keyup(function(e) {
        if (e.keyCode == 27) { 
            $('#popbox_close').click(); // trigger close link
        }
    });
});     
$('#popbox_close').click(function() {
    $('#popbox #container').fadeOut('slow'); // actual div with content
    $('#popbox, #popbox_bg').hide(0); // opacity background
}); 
```

HTML：

```
// this is the part that should fadeIn() and fadeOut()
<div id="popbox" style="display: none;">
    <div id="container">
        <form method="POST" action="" name="login_form">
            <span style="float: right;"><a id="popbox_close" class="button makeCircle"     title="Sluiten of [Esc]">X</a></span>
            (... form content omitted)
        </form>
    </div>
</div>
<div id="popbox_bg" style="display: none;"></div>

// this is what should trigger the fadeIn() event
<a id="req_login">Inloggen</a><span class="pin_split_white"></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:03:18.923

我认为你的问题是这一行：`$('#popbox, #popbox_bg').hide(0); **// opacity background**`在“关闭”点击处理程序中。

问题是该`hide()`方法将在调用之后立即`fadeOut()`调用（在`fadeOut`完成之前）。删除它，看看它是否有效。

对不起，如果这不能解决它，但没有小提琴这是我能为你做的最好的。

祝你好运 ：）

# javascript - 在 Twitter Bootstrap 上切换复选框

> ID：11958523
> 
> 赞同：9
> 
> 时间：2012-08-14T18:29:52.250
> 
> 标签：javascript, jquery, checkbox, twitter-bootstrap

我用 Twitter Bootstrap 制作了一组复选框。现在我想做一个“全选”或“取消全选”按钮。我怎么能使用 JS 函数来做到这一点？

Twitter Bootstrap 文档说要使用 $().button('toggle') 但它不起作用。

这是我的代码片段：

```
<div class="control-group">
<div class="controls">
    <div class="input">
        <div class="btn-group">
            <label class="btn  btn-toggle" for="colors-1-toggle-0">
                <input type="checkbox" id="colors-1-toggle-0" name="colors-1[]" value="color_c" />C
            </label>
            <label class="btn  btn-toggle" for="colors-1-toggle-1">
                <input type="checkbox" id="colors-1-toggle-1" name="colors-1[]" value="color_m" />M
            </label>
            <label class="btn  btn-toggle" for="colors-1-toggle-2">
                <input type="checkbox" id="colors-1-toggle-2" name="colors-1[]" value="color_y" />Y
            </label>
            <label class="btn  btn-toggle" for="colors-1-toggle-3">
                <input type="checkbox" id="colors-1-toggle-3" name="colors-1[]" value="color_k" />K
            </label>
        </div>
    </div>
</div></div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T23:51:26.890

从技术上讲，Twitter Bootstrap Buttons 插件旨在与`<button>`元素一起使用，并让它们表现得*好像它们是*单选或复选框输入。

此外，`$().button('toggle')`这只是伪代码，实际上是为了与选择器一起使用，例如`$('.btn-toggle').button('toggle')`. 但是，您的示例有点不合标准，因为您已将用于按钮的类分配给`<label>`元素。

无论如何，尽管如此，如果您只想将所有输入框设置为 true，您可以使用以下内容：

```
$('.btn-group input[type="checkbox"]').prop('checked', true); 
```

### [JSFiddle](http://jsfiddle.net/mmfansler/g3mu8/)

如果你想用`<button>`元素来做，它会是这样的：

### [JSFiddle](http://jsfiddle.net/mmfansler/g3mu8/3/)

但是，这会丢弃您正在使用的一堆输入数据。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T09:18:05.320

谢谢你！多亏了你，我来到了这个解决方案：

```
<button id="toggle-colors" class="btn btn-info">Toggle</button>
<script>
    $('#toggle-colors').click(function() {
        $('.btn-group input[name^="colors"]').each(function(){
            // toggle checkbox
            $(this).prop('checked',!$(this).prop('checked'));
            // toggle class
            $(this).parents('label').toggleClass('active');
        });
    });
</script> 
```

我不使用 Twitter Bootstrap 推荐的按钮标签，因为它不会发送每个 POST 的值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-29T10:21:50.617

我找到了一种不用 JS 的方法

[http://codepen.io/ibanez182/pen/WxKABq/](http://codepen.io/ibanez182/pen/WxKABq/)

```
<div class="form-group">
    <div class="checkbox">
        <label data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
            <input type="checkbox"/> A checkbox
        </label>
    </div>
</div>
<div id="collapseOne" aria-expanded="false" class="collapse">
    <div class="well">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Saepe ut molestias eius, nam neque esse eos modi corrupti harum fugit, hic recusandae praesentium, minima ipsa eligendi architecto at! Culpa, explicabo.</div>
</div> 
```

# sql - 在 sqlite 中删除 9D（十六进制）字符

> ID：11958528
> 
> 赞同：2
> 
> 时间：2012-08-14T18:30:23.233
> 
> 标签：sql, sqlite

我想从 my_table 中选择家庭，其中家庭 LIKE '%HEX(9D)' 家庭十六进制格式以 9D 十六进制结尾我将 excel 文件转换为 sqlite 数据库，但我的一些数据在结尾添加了 9D 我无法正确搜索请指导我如何删除家庭列中的 9D 十六进制字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:54:54.583

要在 SQLLite 中获取 HEX(9D)，请使用`cast(X'9D' as text)`. 所以要更新使用类似的东西：

`UPDATE YOURTABLE SET YOURCOLUMN=REPLACE(YOURCOLUMN,cast(X'9D' as text),'') where YOURCOLUMN like '%'||cast(X'9D' as text)||'%'`;

要不就

```
UPDATE YOURTABLE SET YOURCOLUMN=REPLACE(YOURCOLUMN,X'9D','') where YOURCOLUMN like '%'||x'9D'||'%'; 
```

# mysql - 如何将 Hive 数据表移动到 MySql？

> ID：11958529
> 
> 赞同：4
> 
> 时间：2012-08-14T18:30:22.637
> 
> 标签：mysql, hadoop, hive, hiveql

我想知道如何将日期从 Hive 移动到 MySQL？

我已经看到了有关如何将配置单元数据移动到 Amazon DynamoDB 的示例，但没有看到像 MySQL 这样的 RDBMS。这是我在 DynamoDB 中看到的示例：

```
CREATE EXTERNAL TABLE tbl1 ( name string, location string )
STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler'
TBLPROPERTIES ("dynamodb.table.name" = "table",
"dynamodb.column.mapping" = "name:name,location:location") ; 
```

我想做同样的事情，但用 MySQL 代替。我想知道是否需要编写自己的 StorageHandler 代码？我也不想用sqoop。我希望能够直接在我的 HiveQL 脚本中进行查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:12:31.240

您当前需要一个 JDBC StorageHandler，它尚未创建，但您可以确定自己构建。

目前有一个问题报告，您可以在此处关注：

[https://issues.apache.org/jira/browse/HIVE-1555](https://issues.apache.org/jira/browse/HIVE-1555)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T09:13:02.970

您是否尝试过使用[Sqoop？](http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html). 它是做这类事情的好工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T18:27:52.000

有很多选择。您可以将 hive 中的文件下载为 csv 文件，然后尝试将其批量插入 mysql 表中。您可以使用 Sqoop。或者，您可以使用一些流行的 ETL 工具，例如 Pentaho 和许多其他工具。

# javascript - 使用js创建一个带有单选框的弹出窗口

> ID：11958531
> 
> 赞同：0
> 
> 时间：2012-08-14T18:30:26.337
> 
> 标签：javascript

首先，我只是一个对java脚本知之甚少的菜鸟

我想创建一个弹出窗口，上面有三个单选按钮，比如说 A、B 和 C

我该怎么做，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:41:19.417

在您的应用程序中包含 jQuery 和 jQuery UI（将使这更容易）。

在您的 HTML 页面 HEAD 部分中说：

```
<script>
    $(function() {
        $( "#dialog" ).dialog();
    });
    </script> 
```

在您的 HTML 正文中说：

```
<div id="dialog" title="Radio Dialog">
    <input type='radio' value='A' name='myRadio'>A
    <input type='radio' value='B' name='myRadio'>B
    <input type='radio' value='C' name='myRadio'>C
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:42:07.857

您不能使用本机 JS`alert`或`confirm`方法来包含单选按钮，它们仅用于文本目的。如果您想要自定义弹出窗口，请使用 jQuery UI（如上面提到的 Joshua）之类的东西，或者更好，只需自己制作。制作一个带有单选按钮的“div”，添加适当的 CSS 来设计它，然后将其保留在 HTML 边缘而不附加它。将附件绑定到您选择的事件。

# php - 网页设计图像文件夹访问

> ID：11958533
> 
> 赞同：0
> 
> 时间：2012-08-14T18:30:30.363
> 
> 标签：php, sql, upload, directory

> **可能重复：**
> [如何阻止 Apache 列出我的用户目录的内容](https://stackoverflow.com/questions/1845981/how-to-stop-apache-from-listing-the-contents-of-my-user-directories)

我正在写一个博客，我成功地将我上传的图像的文件路径放入了一个 sql 数据库。图像本身存储在 img 文件夹中。我希望用户能够使用主键在他们自己的博客页面上检索他们自己的图像，并且该主键有效。

另一方面，如果您访问我的网站，然后在 url 中添加 /img，则任何用户都可以公开查看所有其他用户的图片。

有什么办法可以防止任何人弄乱或公开查看我的 /img 文件夹，而登录的普通用户仍然可以通过 sql 文件路径进程在自己的博客页面上检索自己的图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:07:19.550

您可以将文件放在公共文件夹下，即根目录下，然后根据它们的 id 使用 php 包装器调用它们。类似于：`<img src="img/img.php?id=ac34" />`在您的 img.php 中，如果用户有权查看图像，则输出带有图像标题的图像。在您的数据库表中，您拥有与您的 ac34 令牌相对应的真实图像路径，这就是您的 img.php 加载并作为图像输出给请求者的内容。这样，您的服务器文件的真实路径就会隐藏起来，您可以检查每个图像加载的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:35:28.807

创建`.htaccess`文件并添加：

```
Options -Indexes 
```

它将阻止所有文件夹中的所有索引。

# javascript - jQuery：如何根据数值隐藏 div？

> ID：11958541
> 
> 赞同：1
> 
> 时间：2012-08-14T18:30:47.767
> 
> 标签：javascript, jquery

如果跨度内的数字为0，我试图在页面加载时隐藏一个div。

这是我尝试使用的，但不起作用：

```
$(document).ready(function() {

   var x = $("span#number").val();

   if (x = 0){
     $("div#container").hide();
   };    

});​ 
```

这是我设置的小提琴：http: [//jsfiddle.net/Cmsvj/](http://jsfiddle.net/Cmsvj/)

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:31:51.120

对于 span 元素，您应该使用`text()`method 而不是`val()`，也在 if 语句中将`=`运算符更改为`==`，目前而不是比较您分配的值：

```
$(document).ready(function() {
   var x = $("span#number").text();
   if (x == 0){
     $("div#container").hide();
   };        
});​ 
```

[演示](http://jsfiddle.net/Cmsvj/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:32:40.810

[http://jsfiddle.net/Cmsvj/1/](http://jsfiddle.net/Cmsvj/1/)

```
$(document).ready(function() {
   var x = $("span#number").text();

   if (+x === 0){
     $("div#container").hide();
   };
}); 
```

1.  使用`.text`代替`.val`- a`<span>`不是输入元素。
2.  用于`===`平等；`=`是为了分配。
3.  用于`+`转换为数字（`.val`返回字符串）。
4.  在 jsFiddle 中选择 jQuery。

# javascript - 想要使用 javascript 显示“正在加载”文本？

> ID：11958542
> 
> 赞同：0
> 
> 时间：2012-08-14T18:30:48.550
> 
> 标签：javascript, asp.net

我在 ASP.NET 中使用`SmtpClient`'s`Send`方法从联系我们页面发送电子邮件。在发送消息时，我想显示加载图像。更具体地说，当用户按下发送按钮发送电子邮件时，加载图像会出现，一旦消息发送，加载图像就会消失。我知道我可以使用`onclick`方法来显示加载图像。但是，一旦发送消息，如何删除此图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:39:11.823

将您的按钮封装在更新面板中。

然后，您可以使用 updateprogress 模板显示加载标志。

```
<asp:updatepanel id="MailUpdatePanel" runat="server">    
<contenttemplate>

<asp:updateprogress id="UpdateProgress1" runat="server" associatedupdatepanelid="MailUpdatePanel" dynamiclayout="true">
      <progresstemplate>
            <img src="images/loading.gif">
        </progresstemplate>
 </asp:updateprogress>
<asp:Button ID="SendMail" runat="server" OnClick="SendMail_Click" Text="Mail" />
</contenttemplate>
</asp:updatepanel> 
```

如果您不熟悉更新面板，请查看此[更新面板介绍](http://msdn.microsoft.com/en-us/library/bb399001.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:32:49.723

我会通过 ajax 调用您的发送方法/操作，然后在`success`回调中隐藏加载 div。

您可能还想在 ajax 调用中添加一个错误处理程序，这样如果无法发送消息，加载文本就不会停留在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:39:00.517

如果你使用 jQuery

```
$("#btonId").click(function(e){
 e.preventDefault();

 $("#loadingDiv").html("Sending...").fadeIn(300,function(){
   $.post("yourserverpage.aspx", { data : somedata },function(response){
       if(response=="sent")
       {
         $("#loadingDiv").html("Email Sent")
       }
       else
       {
           $("#loadingDiv").html("error in sending!");
       }       
   });

 });
}); 
```

假设`btnId`是要发送的按钮的 ID，并且`loadingDiv`是要显示加载消息的 div 的 ID，并且在发送电子邮件后，如果成功，您将返回一个字符串“已发送”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:41:44.137

如果您使用 ajax ，最好的方法是在用户单击按钮时调用加载图像，并在事务完成时释放它。
这是一个使用 jquery ajax 的示例：

HTML：

```
<input type='submit' ... onlick='$("#loading").fadeIn();'> 
```

JS：

```
 $.post($('FORM').attr('action'),
        {{args you wanna pass}},
        function (data) {
            process_callback_data(data);
            $("#loading").fadeOut();
        }); 
```

# image - 发布打开图形操作时的图像截断

> ID：11958544
> 
> 赞同：1
> 
> 时间：2012-08-14T18:30:56.227
> 
> 标签：image, facebook-graph-api

我目前正在向图形 API 发布一个操作，其中引用的图像为 120 x 55。这高于 50 x 50 的最小值，低于 3:1 的纵横比限制。我使用的标签是：

```
<meta property="og:image" content="http://www.pickmoto.com/img/pennants/ravens_fb.png" />
<meta property="og:image:width" content="120" />
<meta property="og:image:height" content="55" />
<meta property="og:image:type" content="image/png" /> 
```

图像显示出来了，但它被切断了。 ![在此处输入图像描述](../Images/16bd73938c873a9fd7f623cf75f0af28.png)

我该如何解决？我希望图像至少清晰易读。有没有办法强制 facebook 缩小图像，或者以正确的纵横比显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:20:46.947

您必须重新调整图像的大小。在不拉伸图像的情况下增加高度（Photoshop 处理*Canvas Resize*的方式）。为了简化事情，有些人会[即时调整图像大小](https://stackoverflow.com/questions/9030929/dynamically-resized-images-for-ogimage-ok)。

# javascript - WinJS 与 AngularJS

> ID：11958553
> 
> 赞同：12
> 
> 时间：2012-08-14T18:31:37.180
> 
> 标签：javascript, windows-8, winjs, angularjs

我有很多 angularjs 代码（由一位同事编写），我正在尝试评估其中有多少可以在 Windows 8 Metro（或他们决定重命名的任何内容）应用程序中重用。

有谁知道 angularjs 与 WinJS 的融合程度如何？

由于 Windows 8 仍然很新，可能没有太多人（如果有的话）尝试使用 Angular 来构建 Windows 8 应用程序，有没有人有尝试将 Angular 与需要特定专有 html 的其他框架一起使用的经验属性（比如可能是 Yahoo Connected TV 应用程序）。

我主要担心的是，当通过角度将内容动态插入 DOM 时，WinJS 专有的 html 属性不会被拾取并正确执行，但我不知道。

我还在等待我的 Windows 开发盒到货，所以我现在只是在做研究。如果它在任何人回答之前出现，我会回圈并分享我的结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T18:55:31.323

它只是一个普通的HTML平台，在能力上与IE10相同。某些直接设置innerHTML等有限制，很多都是先通过toStaticHTML。但是，这可以解决。

注意，不需要使用 WinJS 编写 HTML5 Win8 应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T21:14:19.730

WinJS.Binding命名空间做了很多 AngularJS 所做的事情[。](http://msdn.microsoft.com/en-us/library/windows/apps/br229775.aspx)它使用`data-`类似于 AngularJS 的属性，因此将模板从 AngularJS 移植到 WinJS 可能并不难，尽管许多后端 JavaScript 可能需要更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-03T01:17:47.673

查看这个库：[https](https://github.com/codemonkeychris/angular-winjs) ://github.com/codemonkeychris/angular-winjs ，它可以帮助您将 WinJS UI 控件与 AngularJS 一起使用。在测试应用程序自述文件中，它讨论了在 Windows 8 环境中启动和运行 Angular 需要做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-13T20:00:23.070

这个博客（[http://onehungrymind.com/windows-8-and-angularjs/](http://onehungrymind.com/windows-8-and-angularjs/)）似乎解决了这个问题，尽管我认为可能还有一些副作用需要解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-11T02:39:33.687

虽然我们可以无缝地使用 Angular 和 WinJS（除了小的 jquery 和 appendto 问题），关键是如何在 angularJS 中使用 winJS 控件。我相信我们最终会编写在 Angular 项目中使用 WinJS 控件的指令（就像我们通常为 jquery 小部件所做的那样）。在我看来，我们需要使用 winjs 控件，因为它们遵循 win8 标准和外观。另一个问题是使用哪个导航框架——我认为答案是 angularJS，因为它简单且强大：）另一方面，WinJS 具有丰富的 indexedDB、内置的本地存储功能，我们可能可以在 angular 中重复使用。简而言之，我认为两者可以相互补充。

# javascript - while循环奇怪的行为

> ID：11958554
> 
> 赞同：0
> 
> 时间：2012-08-14T18:31:46.643
> 
> 标签：javascript, html, loops

我有一个像这样的while循环：

```
var running_time = 0;
var start_time = new Date();
while( cars.length > 0 )
{
    this.update(null, running_time)
    for(var i in cars )
    {
        var car = cars[i];
        car.delay = 0;
        car.update(start_time, this)
    } 

    for( var i in cars_to_remove )
    {
        var index = cars.indexOf(cars_to_remove[i]);
        if( index > -1 )
        {
            cars.splice(index, 1);
        }
    }
    cars_to_remove.splice(0, cars_to_remove.length);
    running_time++;
}
var end_time = new Date(); 
```

我在这里所做的是，我正在模拟汽车运动和交通信号灯的动画。循环运行，直到所有汽车到达目的地。当汽车到达目的地被标记为从汽车阵列中移除（参见第二个循环）。

当我在while循环中用断点调试这个while循环时，running_time变量通常在90左右，但是当我在while循环中没有断点，并在上面示例的最后一行设置断点时，running_time变量的值更多（约 12000）。

问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:00:15.793

您不会将成品车推向`cars_to_remove`阵列。（或者它只是从显示的代码中丢失了？）

您是否在更新动画的功能中使用`setTimeout`/ ？`setInterval`如果在更新汽车位置时涉及超时，则在调试和等待断点时进行的迭代将少于正常执行。

通常这必须通过以下任一方式完成。

*方法1*（伪代码）

```
while(condition){
    calculatePosition();
    updatePosition();
}

function updatePosition(){
    if(condition){
       marktoRemove();
    }else{
       setTimeout(function(){
           updateDisplay();
       }, delay);
       delay += 100; // for e.g.
    }
} 
```

*方法*2（伪代码）- 无 While 循环

```
setTimeout(function(){

    calculatePosition();

    if(condition){
       marktoRemove();
    }else{
       updateDisplay();
    }     

}, delay); 
```

推荐第二种方法。

# javascript - 需要修复添加/删除字段行

> ID：11958559
> 
> 赞同：1
> 
> 时间：2012-08-14T18:31:56.447
> 
> 标签：javascript, jquery

这个“几乎”有效[http://jsfiddle.net/RfWsy/4/](http://jsfiddle.net/RfWsy/4/)

```
$(document).ready(function() {

  function addRows(label, maxRows, minRows) {
  $('.add-' + label).live('click', function() {
    if ($("." + label + "-group").length < maxRows) {

      var newrow = $('#' + label + '-template')
        .clone().removeAttr('id');

      newrow.insertAfter($(this)
        .closest('.' + label + '-group'))
        .find('.minus').show();

      newrow.find('input').val('');
      newrow.find('select').val('');

    }
  });

  $('.remove-' + label).live('click', function() {
    if ($("." + label + "-group").length > minRows) {
      $(this).closest('.' + label + '-group').remove();
    }
  });
}
  addRows('hs-community-service', 3, 1);
});​ 
```

用户最多可以添加三组字段，然后删除除一组以外的所有字段。这可行，但是在删除除一组之外的所有内容后（通过单击最顶部的第一个减号链接），尝试单击添加按钮，您会注意到它不会添加新的字段集。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:42:28.370

发生这种情况是因为您删除了用作模板的 div。
如果您检查您的 html，您会发现它`#hs-comunity-service-template`不存在。

修复以下代码：

```
$('.remove-' + label).live('click', function() {
    var $element = $("." + label + "-group");
    if ($element.length > minRows) {
        $element.last().remove();
    }
}); 
```

[**演示**](http://jsfiddle.net/RfWsy/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:43:54.360

换行怎么样：

```
$(this).closest('.' + label + '-group').remove(); 
```

到：

```
$("." + label + "-group").last().remove(); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/RfWsy/12/)**

顺便说一句， .live() 在最新版本的 jQuery 中已被弃用，取而代之的是 .on() （这是示例所使用的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:44:04.190

在查看了您的 jsfiddle 代码后，我注意到您正在将`closest`组删除到`minus`链接中，这恰好是第一个组，并且由于您正在删除该组的`id`属性，因此要添加的组的选择器不再适用。我修改了你的代码，你可以在这里找到：http: [//jsfiddle.net/RfWsy/7/](http://jsfiddle.net/RfWsy/7/)

# memory - 如何在 Linux 内核中对非用户空间内存执行内存范围检查？

> ID：11958560
> 
> 赞同：0
> 
> 时间：2012-08-14T18:31:59.393
> 
> 标签：memory, linux-kernel

我正在编写一个 API 作为另一个模块的 linux 内核模块。对于初始开发，我想对传递给我的 API 的物理内存指针进行一些内存范围检查。这样我的模块可以帮助捕获他们模块中的错误，并且我的模块不能因为错误的指针而受到指责。

我知道有很多方法可以检查内核中的用户空间指针是否有有效内存。问题是我还没有找到一种预先打包的方法来检查内核可访问的物理内存的范围。

检查正常的内核线性地址范围肯定是可能的（0x00000000 到 0xbfffffff 和 0xc0000000 到 0xffffffff [了解 Linux 内核第三版]）。内核中是否有任何可用的函数或宏来执行此操作并且可能比我的建议更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:30:00.447

如果它们真的是您可以使用的物理地址`page_is_ram()`。

不过，您可能正在获取内核虚拟地址，在这种情况下，您必须先转换它们。

# ruby-on-rails - 我应该如何重构复杂的 If else 阻止视图？

> ID：11958561
> 
> 赞同：0
> 
> 时间：2012-08-14T18:32:01.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, view, view-helpers

我认为我有以下代码：

```
# panel.html.erb
<% if content.content_type == "image" && content.content_image_url =~ URI::ABS_URI %>
  <%= image_tag content.content_image.pinboard_thumb %>
<% elsif content.content_image? == false && content.content_value =~ URI::ABS_URI %>
  <%= image_tag content.content_value %>
<% else %>
  <%= auto_link content.content_value %>
<% end %> 
```

我在想我应该把这个逻辑从 if else 块移到哪里。如何做到这一点 Rails 方式。把它移给助手？？

还是更好的方法？下面的代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:54:21.570

是的，助手是正确的地方，因为代码似乎只是关于渲染。所以那里没有业务逻辑。如果您看到自己将很多类似的东西放入助手中，您可以查看[http://github.com/jcasimir/draper](http://github.com/jcasimir/draper)，它是一个实现演示者模式的 gem。

# excel - Excel折线图在空值上截取x轴

> ID：11958562
> 
> 赞同：0
> 
> 时间：2012-08-14T18:32:06.283
> 
> 标签：excel, charts

我有一个 Excel 折线图，它的 x 轴保存时间值，y 轴保存平均股价。

例如，x 轴从 9 - 18 开始，每个值之间跳跃 5 分钟。现在，我的问题是当价格没有价值时如何忽略 x 轴值。我的意思是图表的源数据设置为整个 x 轴，但由于 14 之前只有价格数据，我希望图表仅显示 x 轴和 y 轴直到 14。

非常感谢，奥马尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:58:04.697

给定以下数据设置：

![在此处输入图像描述](../Images/9d7e7d8ca3e68a7ee7e1edd765638d76.png)

采取以下步骤。

1.  定义两个命名范围`x_Axis`& `y_Axis`如下所示。请参阅参考：x_Axis 公式的框。y_Axis 公式是相同的，除了替换`chart!$A$1`为`chart!$B$1`

![在此处输入图像描述](../Images/3676362312651e2d6082ca6d01a186fb.png)

1.  将您的 x 轴系列值命名为图表！x_Axis

![在此处输入图像描述](../Images/9e31682c0d09bdcbb7087a3061f5e7d9.png)

1.  将您的 y 轴系列值命名为图表！y_Axis

![在此处输入图像描述](../Images/88b170e26966c5c074b0a1dc51a260ac.png)

我刚刚意识到我可能在我的示例中转置了 x 和 y 轴！但是，我想你明白了 :) 另外，重要的说明。此设置假定 A 列和 B 列中不存在其他数据。

# c# - WndProc 覆盖奇怪的消息，不能正确

> ID：11958565
> 
> 赞同：1
> 
> 时间：2012-08-14T18:32:28.787
> 
> 标签：c#, windows

我正在查看[此处](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=10675)发布的代码，特别是覆盖方法中的 SyntaxRichTextBox.cs `WndProc`。

这只是代码中的错字吗？什么是 Windows 味精`0x00f`？他们的意思是`0x0f`为了`WM_PAINT`？捕获该消息的代码的作者是什么？

代码：

```
protected override void WndProc(ref System.Windows.Forms.Message m)
{
    if (m.Msg == 0x00f)
    {
        if (m_bPaint)
            base.WndProc(ref m);
        else
            m.Result = IntPtr.Zero;
    }
    else
        base.WndProc(ref m);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:37:01.107

首先，正如 James McNellis 在上面的评论中所建议的那样，0x00f 和 0x0f 表示相同的数字。我没有检查`WM_PAINT`消息的值，但代码看起来正在处理此消息。

它看起来像一个简单的优化：如果`m_bPaint`是`false`，跳过`base.WndProc()`调用。可能`m_bPaint`是一个标志，表明有一些东西需要重新绘制。

# ios - iOS：从具有正确比例因子的加载图像中为 UIImageView 设置图像以用于视网膜显示器

> ID：11958571
> 
> 赞同：1
> 
> 时间：2012-08-14T18:32:56.937
> 
> 标签：ios, uiimageview, uiimage, scale, retina-display

我正在使用带有视网膜显示器的 iOS 设备。基本上，我有一个并通过在**文档文件夹**`UIImageView`中加载一个 jpeg 图像来设置它的图像。

 **假设`UIImageView`它的大小为 100x100 点。jpeg 图像的尺寸为 200x200 像素。据我了解，应该在`UIImageView`没有任何缩放的情况下查看 jpeg 图像。我将 jpeg 图像读为

```
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];            
NSString *jpegFilePath = [NSString stringWithFormat:@"%@/im_%d_%d.jpeg",docDir, dbPhotoId, i];
UIImage* tmpImage = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@", jpegFilePath]]; 
```

的`UIImage* tmpImage`比例因子为 1，宽度和高度分别为 200 和 200（从和`tmpImage.scale`观察）。`tmpImage.size.width``tmpImage.size.height`

`UIImageView`在这种情况下，如果我将（尺寸为 100x100 点）的图像属性设置为`tmpImage`，我可以安全地假设不会有任何缩放或视网膜显示问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:56:38.003

这取决于`contentMode`图像视图的属性值。如果值是`UIViewContentModeScaleToFill`图像在视网膜显示器上看起来不错，但这不是正确的方法。

最好有两个版本的图像，一个用于正常显示，另一个用于视网膜，如此[处](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreens/SupportingHiResScreens.html)所述。**

# php - 存储foreach循环的结果

> ID：11958574
> 
> 赞同：0
> 
> 时间：2012-08-14T18:33:08.037
> 
> 标签：php, foreach

我有以下 php 脚本：

```
<?php
  session_start();
  global $db;
  $cart = $_SESSION['cart'];
  if ($cart) {
    $items = explode(',',$cart);
    $contents = array();
    foreach ($items as $item) {
      $contents[$item] = (isset($contents[$item])) ? $contents[$item] + 1 : 1;
    }

    $output[] = '<form action="cart.php?action=update" method="post" id="cart">';
    $total=0;
    echo 'you have following books';
    echo '</br>';
    $output[] = '<table>';

    foreach ($contents as $id=>$qty) {
      $sql = "SELECT * FROM books WHERE bcode ='$id'";
      $result = $db->query($sql);
      $row = $result->fetch();
      extract($row);
      $output[] = '<tr>';

      $a = $output[] = '<td>  '.$bname.'</td>';
      $output[] = '<td>'.$price.'rs.</td>';
      $output[] = '<td>*'.$qty.'</td>';
      '</br>';
      $output[] = '<td>Rs.'.($price * $qty).'</td>';
      $total += $price * $qty;
      $output[] = '</tr>';
    }

    $output[] = '</table>';
    $output[] = '<p>Grand total: <strong>Rs.'.$total.'</strong></p>';

    $output[] = '</form>';
  } else {
    $output[] = '<p>You shopping cart is empty.</p>';
  }

?> 
```

有没有办法将`foreach`循环的结果存储在变量中？.ie $a 将包含书名，但如果有两本书 $a 的值会被下一本书覆盖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:35:55.380

```
$a= $output[] = '<td>  '.$bname.'</td>'; 
```

您在循环的每次迭代中都重新初始化`$a`。

你需要做的就是在函数的最后设置它，比如说，一个内爆`$output`

```
$a = implode ('\n', $output); 
```

或者，如果您不想要整个输出，只需将其用作数组：

```
$a[] = $output[] = '<td>  '.$bname.'</td>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:40:38.833

您要问的核心是如何设置键值对：

```
$books = array();
foreach ($items as $item) {
  //get $bookName and $bookInformation

  //Save
  $books[$bookName] = $bookInformation;
} 
```

因为您指定了 key `$bookName`，所以任何其他具有相同名称的东西都会`$bookName`用新值 ( ) 覆盖 key ( `$bookInformation`)。在 php 中，如果使用构造：

```
$books[] = $bookInformation; 
```

您只需附加`$bookInformation`到`$books`数组的末尾。

请注意，您的代码还有许多其他问题。`$bname`例如，从未定义过，并且您将输出 ( `echo`) 与业务逻辑（例如将书名保存到数组）混合在一起。你真的应该把这些部分分开。另请注意，您至少有一行不做任何事情：

```
'</br>'; 
```

# jquery - 有序列表编号使用 jQuery SlideDown 消失

> ID：11958579
> 
> 赞同：1
> 
> 时间：2012-08-14T18:33:28.037
> 
> 标签：jquery, css, slidedown, slideup

看看这个[小提琴](http://jsfiddle.net/Sb7aP/)

谁能解释为什么：

一个。在动画完成之前，有序列表中的数字不会出现。当数字弹出时，导致它猛拉。

湾。第一次关闭手风琴后，数字不再返回。

切换标题时，.sublinks 的 css 从可见切换到隐藏一次，然后永远不会变回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:15:52.267

*** 编辑 ***

我修好了它！看看这个 jsFiddle：http: [//jsfiddle.net/QtQjx/](http://jsfiddle.net/QtQjx/)

***结束编辑***

`.sublinks`您的 CSS 中的类有冲突的填充。

这是相关的CSS：

```
.sublinks {
    display:none;
    list-style-type:none;
    padding:10px 0 20px 55px;
}

.sublinks {
    padding:0;
} 
```

一方面你告诉它给出`.sublinks`列表`padding:10px 0 20px 55px`，另一方面你告诉它根本不给它填充。摆脱第二个`.sublinks`并将第一个的填充更改`.sublinks`为 10px 0px 20px 0px。

此外，当数字消失时检查下拉菜单，我注意到它将顶级 OL 代码更新为以下内容：

```
<ol class="loweralpha sublinks" style="display: block; overflow: hidden; height: 335px; margin-top: 10px; margin-bottom: 10px; padding-top: 10px; padding-bottom: 20px; "> 
```

如果你能找出这是如何发生的并消除`overflow:hidden`，我认为你会解决你的问题。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:59:09.723

不幸的是，我不知道如何解决抽搐问题 - 您必须根据其余代码来解决这个问题。但是，对于您的有序符号消失，我确实有一个非常简单的修复：

```
$(".dropdown").click(function() { 
     $(".sublinks").slideToggle(500, function() {
         ...perform your style changes that you were doing on callback here...
     }); 
}); 
```

我可以向您建议的另一件事是您尝试使用淡入淡出效果而不是幻灯片效果。您可以制作一个非常平滑的淡入淡出效果，它将“滑入”您的列表并一次淡出每个元素，它看起来比幻灯片更干净。此外，您的元素不应该跳得太多。几乎每个浏览器中的幻灯片效果都非常跳跃。所有浏览器都支持淡入淡出效果（尽管 IE 不支持 fadeTo）。如果您决定改用淡入淡出并需要帮助编写插件，请告诉我，我很乐意为您提供帮助。

祝你好运 ：）

# debugging - ADPlus / CDB 的行为不一致 - “g”中没有可运行的调试程序错误

> ID：11958582
> 
> 赞同：4
> 
> 时间：2012-08-14T18:33:35.153
> 
> 标签：debugging, windbg, sos, adplus

我已将 ADPlus / cdb 设置为我机器上的默认即时调试器。当任何进程出现未处理的异常或因任何其他原因崩溃时，我希望 ADPlus 为我生成故障转储。我正在使用 ADPlus 配置文件来设置输出目录并运行用于将 dmp 文件推送到云的预命令。

为了测试以确保它有效，我编写了一个非常简单的程序，该程序抛出未处理的异常并崩溃。ADPlus 总是像它应该的那样附加自己，但它只成功地生成了我想要的转储，大约 15 次。在不更改系统上的任何内容的情况下，我背靠背运行崩溃的程序并获得不同的结果。

大多数时候，我从 cdb 收到以下错误：

```
0:000> g

       ^ No runnable debuggees error in 'g'

0:000>

*[EOF]* 
```

当它正常工作时，日志中的相同位置如下所示：

```
0:004> g

FirstChance_epr_Process_Shut_Down

*[More stuff after here]* 
```

知道为什么我会得到这种行为吗？如果有帮助，我可以发布我的配置文件和完整日志。when-it-works 日志和 when-it-doesn't-work 日志之间的唯一区别是所有行都以`0:004>`它工作的时间和不工作的时间开始`0:000>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:56:09.530

评论无法容纳所有这些...所以放在这里...

是的，使用 DebugDiag，您可以预先附加 VBS 脚本，并且您可以在事件发生时定义自定义操作（即运行 VBS 脚本）。

我认为您需要等到 CDB 完成转储并且 CDB/您的进程已经退出，然后再尝试再次启动您的应用程序。（您可以在脚本中使用 tlist 来监视进程...等到它消失）。...否则带有 -PN 选项的 ADPlus 可能会使 CDB 尝试重新附加到已经崩溃的进程...它不能因为已经附加了调试器。

安装 TaskManager 并查看是否出现了应用程序的多个实例（如果出现了，那么您可能必须使用 -p PID 选项来让 adplus 监控正确的进程……这并不理想，因为您必须这样做已首先启动该进程以获取其 PID）。

还可以查看 ProcDump，它使用一种称为 Reflected Processes 的技术......它允许一种非常快速的方法来复制进程空间并让转储完成而不会阻碍事情......如果 DebugDiag 没有，这可能会有所帮助。

看看这个链接......就在底部......它显示了如何等待 CDB 完成转储（但它是一个 Powershell 脚本）。

*   [https://powerdbg.svn.codeplex.com/svn/Dev/src/Scenarios/CreateTestDumps.ps1](https://powerdbg.svn.codeplex.com/svn/Dev/src/Scenarios/CreateTestDumps.ps1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T12:52:32.733

WinDbg 命令 'g' 表示 [继续]

由于您正在打开转储文件，因此无法“继续”，它只包含进程内存。

因此，在您的情况下，消息“'g' 中没有*可运行*的调试错误”是合乎逻辑的，因为进程没有*运行*。

关于加载正确版本的 SOS，请根据 .NET 版本使用以下命令。

**.NET 4 及更高版本** *.loadby sos*

**.NET 3.5 和 2** *.loadby sos mscorwks*

**.NET 1.0 和 1.1** *.load clr10\sos*

# vbscript - 检查旧文件和新文件，如果不存在任何内容，则使用 vbscript 创建一个

> ID：11958584
> 
> 赞同：1
> 
> 时间：2012-08-14T18:33:37.643
> 
> 标签：vbscript, filesystemobject

所以我正在尝试为 Windows 编写一个脚本来检查用户是否同时存在旧的和新的 Outlook 配置文件。如果旧文件存在而新文件不存在，则会复制旧文件并为其指定新文件名。

我对语法有一个大致的了解，看起来像这样。

```
If Exist \users\%%UserName%%\%%OldFileName%% 

   If NOT Exist \users\%%UserName%%\%%NewFileName%% 

      copy \users\%%UserName%%\%%OldFileName%%  \users\%%UserName%%\%%NewFileName%% 

   End If

End If 
```

**更新！**
这是我到目前为止所能想到的。

```
Dim objFSO

Set objFSO = CreateObject("Scripting.FileSystemObject")

        strOldFileName = “Default Outlook Profile.NK2”
        strNewFileName = “Default Profile.NK2”

    If objFSO.FileExists "\\comfilesrv1\users\%%UserName%%\&OldFileName&" Then
        objFSO.CopyFile "\\comfilesrv1\users\%%UserName%%\&OldFileName&", "\\comfilesrv1\users\%%UserName%%\&NewFileName&"
    End If 
```

我不是要求任何人为我写这篇文章，但如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:45:47.970

试试这个

```
Dim objFSO, strOldFileName, strNewFileName, strOldProfile, strNewprofile, bOverwrite

Set objFSO = CreateObject("Scripting.FileSystemObject")
bOverwrite = true

strOldFileName = "Default Outlook Profile.NK2"
strNewFileName = "Default Profile.NK2"

strOldProfile = "\\comfilesrv1\users\" & UserName & "\" & strOldFileName
strNewprofile = "\\comfilesrv1\users\" & UserName & "\" & strNewFileName

If objFSO.FileExists(strOldProfile) Then
  objFSO.CopyFile strOldProfile, strNewprofile, bOverwrite
End If 
```

# html - 使用 HTML 在网页上的 .ico 文件中显示不同的图标大小

> ID：11958585
> 
> 赞同：3
> 
> 时间：2012-08-14T18:33:39.147
> 
> 标签：html, icons

我正在尝试在网页上的 .ico 文件中显示不同大小的图标。使用 HTML img 标签会显示最小的（.ico 文件中的第一个图标，真的）图标。

是否可以显示 .ico 文件中的其他图标？或者 .ico 格式是否被认为过于特定于 Windows，因此不受 HTML/浏览器的支持？

在这里和其他地方解决一些相关问题，人们必须解析 .ico 文件的内容，例如 C#，我猜这是不可能的。

我当然可以将各个图标从 .ico 文件中拉出并单独保存，但我很好奇在这种情况下是否有办法使用现有文件。

（以防万一免责声明：我不是在谈论网站图标；我在网页上显示图标）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:53:31.077

你不能在 HTML 中做到这一点。

您可以做的是使用脚本语言（例如 PHP）来读取 .ico 并将其存储的不同图像输出到不同的转换图像中。

如果您想在 PHP 中执行此操作，请查看[此页面](http://www.phpclasses.org/package/2369-PHP-Extract-graphics-from-ico-files-into-PNG-images.html)

# sql - 没有索引的堆上的碎片

> ID：11958596
> 
> 赞同：0
> 
> 时间：2012-08-14T18:34:34.303
> 
> 标签：sql, sql-server, tsql

没有非聚集索引的堆表上会出现碎片吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:47:16.027

***是的当然。***

堆也是页面的集合——如果页面没有填充到 100%——你有（*内部*）碎片。

此外 - 堆在索引目录视图和动态管理视图中也显示为*伪索引*（id = 0），您可以观察到它也可能有（并且很可能会有）碎片。

有关更多见解和背景，请参阅：

*   [每天一个 SQL Server DBA 神话：（29/30）修复堆碎片](http://www.sqlskills.com/BLOGS/PAUL/post/A-SQL-Server-DBA-myth-a-day-%282930%29-fixing-heap-fragmentation.aspx)
*   [SQL Server 存储引擎博客 - 碎片（第 4 部分）：什么是堆？](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2006/09/19/761437.aspx)
*   [SQL SERVER – Fragmentation – 检测碎片并消除碎片](http://blog.sqlauthority.com/2010/01/12/sql-server-fragmentation-detect-fragmentation-and-eliminate-fragmentation/)
*   [堆（在 SQLServerPedia 上）](http://sqlserverpedia.com/wiki/Heaps)带有关于碎片的段落以及如何处理它

# foreign-keys - 如何在Datamapper + Codeiginter中一对多地命名字段

> ID：11958598
> 
> 赞同：0
> 
> 时间：2012-08-14T18:34:42.083
> 
> 标签：foreign-keys, codeigniter-datamapper

```
class Games{
    var $has_many = array('gameSetting','team','log');
}

class GameSetting {}

class Team{
    var $has_many = array('user','log');
}
class User {
    var $has_many = array('log');
}

class Log {
} 
```

根据官方文档，如果不加入表，我必须创建后缀 _id 作为外键。所以在logs表中有3个外键game_id,team_id,user_id。

我应该如何命名 FK 列以及 Datamapper 如何知道哪个 FK 引用了具有相同后缀 _id 的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:40:26.850

首先，您需要确保您的关系配置正确。这意味着在*两个*相关模型中定义关系 (http://datamapper.wanwizard.eu/pages/settingrelations.html)。

所以你的 Log 模型应该是这样的：

```
class Log extends DataMapper {
    var $has_one = array('game','team','user');
} 
```

然后，*日志*表只需要列“game_id”、“team_id”和“user_id”——DataMapper 将知道在哪里查找以填充相关对象。

It's all explained clearly in the docs (look under 'In-Table Foreign Keys'): [http://datamapper.wanwizard.eu/pages/database.html](http://datamapper.wanwizard.eu/pages/database.html)

# php - FPDF - MemImage 问题 - OO 语法

> ID：11958602
> 
> 赞同：0
> 
> 时间：2012-08-14T18:35:06.353
> 
> 标签：php, fpdf

```
require('inc/fpdf.php');
require('inc/mem_image.php');

class PDF extends FPDF
{
    // Colored table
    function FancyTable()
    {
        $this->SetFont('Helvetica','B');
        $this->Cell(27, 4, 'Other Title', 1, 0);
    }  
}

$pdf = new PDF_MemImage();
//$pdf = new PDF();
$pdf->SetFont('Helvetica','',7);
$pdf->AddPage();

$img = file_get_contents('logo.jpg');

$pdf->MemImage($img, 50, 30);
$pdf->Cell(20,10,'Title',1,1,'C');

//$pdf->FancyTable();
$pdf->Output(); 
```

我正在尝试将 mem_image 脚本合并到我现有的 FPDF 页面中。我正在使用一种名为 fancyTable 的方法来设置我的表数据/布局。不幸的是，试图调用 fancyTable 会破坏页面（空白）。如果我把它注释掉，那很好。如果我将 $pdf 声明切换为 new PDF() 而不是 new PDF_memimage() fancyTable 工作，但显然我的图像没有加载。我认为它可能只是与类的冲突，但我并不精通 OO 语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:15:52.810

对此的解决方案实际上非常简单：您扩展了错误的类。

你需要做的就是改变它：

```
class PDF extends FPDF 
```

...对此：

```
class PDF extends PDF_MemImage 
```

...然后改变这个：

```
$pdf = new PDF_MemImage(); 
```

...对此：

```
$pdf = new PDF(); 
```

通过扩展`FPDF`，您在继承树中基于*主干*( `FPDF`) 创建了一个新分支，而您想要做的是基于现有分支`PDF_MemImage`。

作为记录，命名你的类`PDF`可能不是一个好主意 - 首先它不是很有描述性（它并不表示它继承自 FPDF 或 MemImage），其次它很短并且会冒与另一个类发生冲突的风险如果用作更大应用程序的一部分。我个人会称之为`FPDF_MemImage_FancyTable`YMMV。

此外，在这个时代，真的没有必要编写与 PHP4 兼容的类。（这么说，我实际上*确实*需要偶尔这样做，但我怀疑你这样做）

**编辑**

如果从上面的描述中不清楚，最终代码将如下所示：

```
require('inc/fpdf.php');
require('inc/mem_image.php');

class FPDF_MemImage_FancyTable extends PDF_MemImage
{
    // Colored table
    function FancyTable()
    {
        $this->SetFont('Helvetica','B');
        $this->Cell(27, 4, 'Other Title', 1, 0);
    }  
}

$pdf = new FPDF_MemImage_FancyTable();

$pdf->SetFont('Helvetica','',7);
$pdf->AddPage();

$img = file_get_contents('logo.jpg');
$pdf->MemImage($img, 50, 30);

$pdf->Cell(20,10,'Title',1,1,'C');

$pdf->FancyTable();

$pdf->Output(); 
```

# c# - 在 MVC3/C# 中过滤（或清理用户输入）？

> ID：11958604
> 
> 赞同：0
> 
> 时间：2012-08-14T18:35:12.890
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

什么是最好/最安全的方法来确保如果用户将任何 html 或 javascript（甚至 SQL）输入到一个表单中，它都会被清除并且只显示纯文本（或将以纯文本显示他们的 html）或给出用户出错？显然，我试图阻止 XSS 和任何类型的注入，并且我不希望用户尝试使用他们自己的 HTML 来干扰我的页面的显示。理想情况下，我宁愿不将 HTML 写入数据库。

编辑：我不确定将谁标记为答案，因为你们都从不同角度解决了这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:43:06.520

为什么要在存储到数据库之前进行过滤？输出时过滤。例如，在 Web 应用程序中，您可以进行 HTML 编码。Razor`@`功能已经这样做了：

```
@Model.SomePropertyThatCouldContainHTML 
```

现在你安全了。在您的数据库中，您存储了可以在其他应用程序中重用的实际字符串。例如，在桌面应用程序中，您无需担心 XSS，因此去除这些标签是没有意义的。

但是，如果您需要显示未编码的用户输入，您可以使用[AntiXSS](http://wpl.codeplex.com/)库从中删除所有可能导致 XSS 的危险 javascript 代码。

就 SQL 而言，始终使用参数化查询，这样您就不必担心任何 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:47:02.147

默认情况下，请求验证在您的网站中打开。基本上，这会检查到达服务器的每个请求，如果它检测到有潜在危险的请求，它将抛出异常。理论上它很棒，但现实是，至少在我的经验中，你几乎总是在使用某种 RTE（或通常的用户输入）的页面上关闭它，因为 HTML 的存在会导致验证失败。

有很多方法可以防止 XSS，但这里有一些基础知识：

*   限制您的输入。这意味着如果您有一个字段中应该只包含数字（例如电话号码），那么请阻止用户在该字段中输入除数字之外的任何内容。
*   解码/编码您的输入
*   简单地找到一个正则表达式来剥离并不是灵丹妙药，因为 XSS 请求可以被编码，因此请求中不存在物理标签。

以下是一些资源：

*   [http://msdn.microsoft.com/en-us/security/aa973814.aspx](http://msdn.microsoft.com/en-us/security/aa973814.aspx)我在几个项目中使用过这个库，它非常健壮。
*   [http://msdn.microsoft.com/library/ms998274.aspx](http://msdn.microsoft.com/library/ms998274.aspx)关于如何防止 XSS 的模式和实践

最后，当有疑问时[谷歌](http://www.google.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:00:19.150

调查

1.  这里：[在asp.net mvc中处理javascript注入](https://stackoverflow.com/questions/2212223/handle-javascript-injection-in-asp-net-mvc)
2.  这里：[关于 Javascript 注入的问题](https://stackoverflow.com/questions/1157775/questions-about-javascript-injection)
3.  此处：[如何在 c# 中的 codefirst 技术中使用带有 EF 的 Linq 避免 SQL 注入](https://stackoverflow.com/questions/8357062/how-to-avoid-sql-injection-with-linq-with-ef-in-codefirst-technique-in-c-sharp)
4.  此处：[在 MVC 中控制 SQL 注入](https://stackoverflow.com/questions/9079400/control-sql-injection-in-mvc)

# objective-c - 为什么我使用 MapViewController 将无法识别的选择器发送到实例异常？(iOS)

> ID：11958605
> 
> 赞同：1
> 
> 时间：2012-08-14T18:35:19.013
> 
> 标签：objective-c, ios, unrecognized-selector, cs193p

我正在上斯坦福的 iOS 课程（抱歉，我是这些人中的一员，但我想我必须以某种方式学习）并且我使用的代码与教授在关于 MKMapViews 的讲座中使用的代码几乎完全相同，但是我得到了他没有的这个例外，我真的无法弄清楚。这可能是什么原因造成的？

我得到的例外：

> -[NSConcreteData _isResizable]：无法识别的选择器发送到实例 0x90a4c00

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKAnnotationView *aView = [mapView dequeueReusableAnnotationViewWithIdentifier:@"MapVC"];
    if (!aView) {
        aView = [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@"MapVC"];
        aView.canShowCallout=YES;
        aView.leftCalloutAccessoryView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 30, 30)];
        aView.rightCalloutAccessoryView= [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    }
    aView.annotation=annotation;
    [(UIImageView *)aView.leftCalloutAccessoryView setImage:nil];
    return aView;
}

-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    UIImage *image = [self.delegate getImageForMapViewController:self withAnnotation:view.annotation];
    [(UIImageView *)view.leftCalloutAccessoryView setImage:image]; // this is where I get the exception.
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T19:31:08.343

如果您传递的参数不是真正的 a ，则在调用a`-[NSConcreteData _isResizable]: unrecognized selector sent to instance`时可能会发生错误。`setImage``UIImageView``UIImage`

根据您的评论，该`getImageForMapViewController`方法实际上是返回`NSData`而不是`UIImage`. 这可能会导致您看到的错误。

修复`getImageForMapViewController`返回 a 的方法`UIImage`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:54:01.540

如果您需要更改`MKPinAnnotationView`使用的图像，例如：

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    MKAnnotation *pin = view.annotation;
    UIImage *image = [self.delegate getImageForMapViewController:self withAnnotation:view.annotation];

    UIImageView *imagePin = [[UIImageView alloc] initWithImage:image];
   [[mapView viewForAnnotation:pin] addSubview:imagePin];
} 
```

这是问题，更改此方法：

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    UIImage *image = [self.delegate getImageForMapViewController:self withAnnotation:view.annotation];
    [(UIImageView *)view.leftCalloutAccessoryView setImage:image]; // this is where I get the exception.
} 
```

到

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    UIImage *image = [self.delegate getImageForMapViewController:self withAnnotation:view.annotation];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    view.leftCalloutAccessoryView = imageView; // this is where I get the exception.
} 
```

这里的问题是`leftCalloutAccessoryView`是 type `UIView`。您正在尝试设置`image`。不响应方法。将您尝试投射的图像设置为 后，这是一个坏习惯。因此，您需要将图像添加到 imageView 之后，您需要将 imageView 分配为.`UIView``UIView``setImage``UIView``UIImageView``leftCalloutAccessoryView`

当您尝试这样编写时，`[(UIImageView *)view.leftCalloutAccessoryView setImage:image];`请记住先转换它然后调用该方法。对于上面的行，最好这样写，

```
UIImageView *imgView = (UIImageView *)view.leftCalloutAccessoryView;
[imgView setImage:image]; 
```

# android - Android 计算器中的多点触控按钮是如何实现的？

> ID：11958607
> 
> 赞同：0
> 
> 时间：2012-08-14T18:35:23.113
> 
> 标签：android, button, calculator, multi-touch

我最近购买了 Nexus 7，发现内置的 Android 计算器使用多点触控按钮。据我了解，这样做的唯一方法是在一个视图中捕获所有事件并将它们自己传递给子视图。像这样：

[http://www.passsy.de/multitouch-for-all-views/](http://www.passsy.de/multitouch-for-all-views/)

但是，我搜索了一些代码存储库，但看不到 Android Calculator 正在执行此类工作的任何地方，这让我认为有一种更简单的方法：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/calculator2/Calculator.java?av=f](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/calculator2/Calculator.java?av=f)

有人看到 Android Calculator 是如何实现多点触控按钮的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:39:16.083

我知道这是一个老问题，但我最近偶然发现了答案。正如[zapl](https://stackoverflow.com/users/995891/zapl)指出的那样，可以同时触摸布局中的多个按钮，而无需添加任何特殊代码。

但是，我的应用程序的目标 API 为 10，这不起作用。将我的目标 API 更改为 15 突然在我的 ICS 和更新的设备上运行。我不确定 Honeycomb(11) 的目标 API 是否可以工作，但 15+ 可以。

# c# - 有没有办法对四元数使用 CatmullRom 插值？

> ID：11958612
> 
> 赞同：1
> 
> 时间：2012-08-14T18:35:39.217
> 
> 标签：c#, math, unity3d, quaternions

我正在使用以下公式在 Unity 中沿样条线获取位置：

```
public Vector3 CatmullRom(float t, Vector3 a, Vector3 b, Vector3 c, Vector3 d)
{
    return (
        (b * 2.0f) +
        (-a + c) * t +
        (a * 2.0f - b * 5.0f + c * 4.0f - d) * t * t +
        (-a + b * 3.0f - c * 3.0f + d) * t * t * t
        ) * 0.5f;
} 
```

给定四个四元数，有没有办法找到每个点的旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:07:55.853

您不能直接执行此操作，但您可以扩展 Spline 代码以适应四元数。我手头没有任何代码，但我可以为您指出[Ogre3D SDK](http://www.ogre3d.org/docs/api/html/classOgre_1_1RotationalSpline.html#_details)，您可以将其用作起点。

使用样条曲线，您可以使用控制点和切线来生成中间点。对于四元数，您需要求导数以找到方向的变化率，然后使用它来创建中间点。

看食人魔代码。标头提供了一些详细信息，您可以下载 .cpp 以进行实施。

# perl - 如何安全卸载通过 CPAN 安装的 bioperl？

> ID：11958614
> 
> 赞同：0
> 
> 时间：2012-08-14T18:35:46.420
> 
> 标签：perl, uninstallation, cpan, bioperl

我通过 CPAN 安装了 BioPerl。几个测试失败了，我强行安装了它。我现在想通过 ubuntu 软件中心安装它。

谁能描述如何使用[此处](http://www.bioperl.org/wiki/Installing_Bioperl_for_Unix#INSTALLING_BIOPERL_THE_EASY_WAY_USING_CPAN)给出的方法删除通过 CPAN 安装的 BioPerl 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:53:17.990

如果您想清理 cpan 首先执行的操作，我将从运行以下命令开始：

```
perl -mBio::Perl -e 'print $::INC{"Bio/Perl.pm"}."\n"' 
```

这将向您显示一条以以下内容结尾的路径：

```
...lib/perl/5.10.0/Bio/Perl.pm 
```

我只是 rm -rf 整个 Bio 目录。

BioPerl 还安装了一堆手册页，可能在 /usr/share/man/man3 或 /usr/local/share/man/man3 中。所以我会跑

```
rm -rf /usr{,/local}/share/man/man3/Bio::*.3pm 
```

还有一些文件放在 /usr/bin 中，并附带手册页。删除那些：

```
rm -rf /usr/{,/local}/bin/bp_*.pl
rm -rf /usr/{,/local}/share/man/man1/bp_*.pl.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:07:03.017

我认为没有办法使用 cpan （源安装）删除模块。您可以尝试定位模块并手动删除文件，但通常您可以忽略现有文件并使用包管理器安装二进制包。

# c# - 如何禁用 Windows 8/WinRT AppBar？

> ID：11958620
> 
> 赞同：11
> 
> 时间：2012-08-14T18:35:59.947
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, winrt-xaml

我的目标是仅在特定情况下提供 AppBar。我试图通过创建一个 AppBar 来实现这一点，但在出现这种情况之前将其禁用。但是，如果您将`IsEnabled`AppBar 上的属性设置为`False`，则当您启动应用并右键单击（通常会打开 AppBar）时，应用会崩溃。这是框架中的错误吗？禁用 AppBar 的正确方法是什么？

编辑：当您设置`Visibility`为`Collapsed`.

更多信息：我正在通过 Visual Studio 调试器运行它，但是会弹出一个单独的“Visual Studio 即时调试器”窗口，并显示消息“App.exe [2596] 中发生未处理的 win32 异常”。上面会弹出一个警告框，上面写着“调试器已附加到 App.exe，但未配置为调试此未处理的异常。要调试此异常，请分离当前调试器。”

编辑2：这不仅仅是我的代码。如果您只是添加`IsEnabled="False"`到 Microsoft 自己的示例 AppBarControl 项目中的 AppBar，它也会崩溃（可在此处找到：[http](http://code.msdn.microsoft.com/windowsapps/XAML-AppBar-control-sample-2aa1cbb4) ://code.msdn.microsoft.com/windowsapps/XAML-AppBar-control-sample-2aa1cbb4 ）

编辑 3：@G。Andrew Duthie - devhammer 提供了我正在使用的答案。我只是想补充一点，我发现最好使用`this.BottomAppBar = null`禁用它而不是设置`IsEnabled`or`Visibility`属性。如果您只是设置`Visibility`为`Collapsed`，那么当您右键单击时，应用程序仍然认为 AppBar 存在，即使它不可见，因此您的下一次常规单击将被解释为通常关闭 AppBar 的单击，因此您将必须再次单击才能实际执行您尝试的操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T19:30:35.797

我一直在玩这个（同时使用 IsEnabled，以及将 Visibility 属性设置为 Visibility.Collapsed），并且我可以成功禁用 AppBar 而不会引发异常的唯一方法是首先显示 AppBar。显示 AppBar 后，将 IsEnabled 设置为 false 或将 Visibility 设置为 Visibility.Collapsed 不再引发异常。

但是，如果您以编程方式创建 AppBar，如下所示：

```
myAppBar = new AppBar();
StackPanel sp = new StackPanel();
sp.Orientation = Orientation.Horizontal;
Button myButton = new Button();
myButton.Content = "Click Me";
sp.Children.Add(myButton);
myAppBar.Content = sp; 
```

但是在第一次需要它之前不要将它添加到 Page.BottomAppBar ，你不会得到异常。

我使用带有以下处理程序的按钮进行了测试：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    if (this.BottomAppBar == null)
    {
        this.BottomAppBar = myAppBar;
    }
    else {
        this.BottomAppBar = null;
    }
} 
```

当应用程序第一次加载时，如果您尝试调用 AppBar，则不会发生任何事情。单击按钮（将 AppBar 添加到 Page.BottomAppBar），调用 AppBar 将显示 AppBar。再次单击该按钮，AppBar 不再显示（尽管 myAppBar 仍被实例化并在您再次需要时准备就绪）。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T19:43:36.060

如果您仍想在 XAML 中定义您的 AppBar，您可以在后面的代码中以编程方式关闭 AppBar。在 XAML 中，创建底部 AppBar：

```
<Page.BottomAppBar>
    <AppBar Name="MyAppBar" Opened="AppBarOpened">
        ...
    </AppBar>
</Page.BottomAppBar> 
```

然后，在后面的 C# 代码中：

```
private void AppBarOpened(object sender, object e)
{
    if ( CanAppBarOpen() == false)
    {
        MyAppBar.IsOpen = false;
    }
} 
```

您必须自己检查“CanAppBarOpen()”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T19:01:07.713

您可以使用[WinRT XAML Toolkit](http://bit.ly/WinRTXamlToolkit)中的 CustomAppBar 。它可以通过多种方式禁用 - 您可以绑定其 CanOpen 或 CanDismiss 属性以阻止它出现或消失，这可能是您想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T11:28:04.780

您可以通过处理**AppBar的****打开**事件来做到这一点

 **在 XAML 中：

```
<Page.BottomAppbar>
   <AppBar IsEnabled="False" Visibility="Collapsed" Opened="bottomappbar_opened_event">
</Page.BottomAppbar> 
```

在 C# 代码中：

```
 private void bottomappbar_opened_event(object sender, object e)
 {
     if (!this.BottomAppBar.IsEnabled)
     {
         if (this.BottomAppBar.IsOpen)
         this.BottomAppBar.IsOpen = false;
     }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T04:14:22.893

**1\. Add a selection changed event to your flipview control in the xaml file:**

```
<FlipView SelectionChanged="MyFlipView_SelectionChanged" /> 
```

**2\. Add this class member variable to your xaml code-behind file:**

```
Dictionary<object, Tuple<AppBar, AppBar>> _appbarDictionary = new Dictionary<object, Tuple<AppBar, AppBar>>(); 
```

**3\. Implement the FlipView's selection changed handler here:**

```
private void MyFlipView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var flipView = sender as FlipView;

    BuildPageAppBarDictionary();

    InitializeAppBar(flipView);
    NullOtherAppBars(flipView);
} 
```

1.  Add these methods:

    private void BuildPageAppBarDictionary() { _appbarDictionary.Clear();

    ```
    foreach (var item in MyFlipView.Items)
    {
        var page = item as Page;
        Tuple<AppBar, AppBar> appbars = new Tuple<AppBar, AppBar>(page.TopAppBar, page.BottomAppBar);
        _appbarDictionary.Add(page, appbars);
    } 
    ```

    }

    private void InitializeAppBar(FlipView flipView) { if (_appbarDictionary.Count > 0) { var currentPage = flipView.SelectedItem as Page; currentPage.TopAppBar = _appbarDictionary[currentPage].Item1; currentPage.BottomAppBar = _appbarDictionary[currentPage].Item2;

    ```
     if (currentPage.TopAppBar != null)
        {
            currentPage.TopAppBar.IsEnabled = true;
        }

        if (currentPage.BottomAppBar != null)
        {
            currentPage.BottomAppBar.IsEnabled = true;
        }
    } 
    ```

    }

    private void NullOtherAppBars(FlipView flipView) { foreach (var item in MyFlipView.Items) { if (item != flipView.SelectedItem) { var page = item as Page;

    ```
     page.TopAppBar = null;
                page.BottomAppBar = null;
            }
        }
    } 
    ```

***Please forgive the snippet formatting issues. I tried to make the example format to this page as best as I could.*****

# rest - 用于 uCLib 的 RESTful 客户端 API

> ID：11958621
> 
> 赞同：1
> 
> 时间：2012-08-14T18:36:12.303
> 
> 标签：rest, embedded, uclibc

我需要使用 uClibc 在嵌入式环境中实现 RESTfull 客户端。

是否有任何在 C 中实现 RESTful Client 的开源库只能依赖 µClibc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:49:17.630

REST 是一种架构模式。它是您系统上的一组约束，以便您的系统具有一组特定的属性。

约束是；

*   客户端-服务器 - 关注点分离。
*   无状态 - 对服务器的每个请求都必须是完整且可理解的请求。
*   cache-able - 每个请求的结果都应该是可缓存的（如果重复相同的请求）。
*   分层 - 没有组件必须知道或理解另一层中的另一个组件。
*   统一接口——简化和解耦架构。
*   按需代码 -（可选）允许在客户端传输和执行扩展。

您系统的属性是；

*   组件交互的可扩展性
*   接口的通用性
*   组件独立部署
*   减少延迟、加强安全性和封装遗留系统的中间组件（来自 REST wiki 页面）

这里与您如何实现 REST 无关。REST 可以发生在任何提供约束机制的传输层上。

# jquery - client_side_validation 和 date_picker - 不工作（Rails）

> ID：11958622
> 
> 赞同：0
> 
> 时间：2012-08-14T18:36:12.623
> 
> 标签：jquery, ruby-on-rails, gem, client-side-validation

即使我有一个值，我也会收到“不能为空白”错误。

如果我在字段中手动输入数据，验证工作正常。

如果我要使用日期选择器填充日期，它会禁用提交按钮并且我无法提交表单。

我正在使用 JQuery 日期选择器、Rails 3.2.6 和最新的 client_side_validation gem。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:54:29.577

ClientSideValidations github 项目中有一些已解决的问题。我建议在那里搜索答案。

# android - ViewPager - setCurrentItem(int) 不滑动

> ID：11958623
> 
> 赞同：2
> 
> 时间：2012-08-14T18:36:13.310
> 
> 标签：android

当我在 ViewPager 上执行滑动操作时，页面会滑动，但如果我从选项卡执行 viewPager.setCurrentItem(pageNum)，它会重置页面但不会滑动。如何以编程方式使页面滑动？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T18:47:16.780

尝试

viewPager.setCurrentItem(item, true);

# c# - 使用选定的选项值回发 onchange

> ID：11958624
> 
> 赞同：0
> 
> 时间：2012-08-14T18:36:15.427
> 
> 标签：c#, asp.net-mvc-3

我想回发并传入一个参数`onchange`。我有

```
@Html.DropDownList("CategoryID", (System.Collections.Generic.IEnumerable<System.Web.Mvc.SelectListItem>)@Model.PhaseNames, new { @onchange = "location.href='/Home/Index?phaseFilter=this.value;'" }) 
```

这几乎可以工作。 `this.value`不会像我期望的那样被选定的选项值替换。另外，在这种情况下是否有更好的方法来创建 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:40:18.670

这应该有效：

```
@Html.DropDownList("CategoryID", (IEnumerable<SelectListItem>)@Model.PhaseNames, new { @onchange = "location.href='/Home/Index?phaseFilter=' + this.value;" }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:38:59.920

我猜你想写这样的`onchange`部分：

```
@onchange = "location.href='/Home/Index?phaseFilter=' + this.value;" 
```

# makefile - 制作文件警告，覆盖目标命令

> ID：11958626
> 
> 赞同：28
> 
> 时间：2012-08-14T18:36:22.160
> 
> 标签：makefile, warnings

作为 makefile 的一部分，我想生成目标的调试或发布版本。

**从功能上讲，一切正常**，但是，我在运行 make 时收到警告

```
 12 SRC := $(shell echo src/*.cpp)
 13 SRC += $(shell echo $(TEST_ROOT)/*.cpp)
 14 
 15 D_OBJECTS = $(SRC:.cpp=.o)       # same objects will need to be built differently
 16 R_OBJECTS = $(SRC:.cpp=.o)       # same objects will need to be built differently

 22 all: $(TARGET)
 23 
 25 $(TARGET): $(D_OBJECTS)
 26   $(CC) $(D_OBJECTS) -o $(TARGET)
 27 
 28 $(D_OBJECTS) : %.o: %.cpp                     # ----- run with debug flags 
 29   $(CC) $(COMMON_FLAGS) $(DEBUG_FLAGS) -c $< -o $@
 30 
 31 release: $(R_OBJECTS)
 32   $(CC) $(R_OBJECTS) -o $(TARGET)
 33 
 34 $(R_OBJECTS) : %.o: %.cpp                     # ----- run with release flags
 35   $(CC) $(COMMON_FLAGS) $(RELEASE_FLAGS) -c $< -o $@ 
```

当我`make`得到调试版本时，当`make release`我得到发布版本时。

但我也收到警告：

```
Makefile:35: warning: overriding commands for target `src/Timer.o'
Makefile:29: warning: ignoring old commands for target `src/Timer.o'
Makefile:35: warning: overriding commands for target `test/TimerTest.o'
Makefile:29: warning: ignoring old commands for target `test/TimerTest.o' 
```

带着这2个问题：

1.  任何忽略警告的方法
2.  我做对了吗？需要做哪些改变？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2018-04-12T19:46:53.883

像 OP（詹姆斯伦纳德）一样，我想压制或避免有关压倒`Makefile`目标的警告。但是，我的情况和目标不同。

我想要`Makefile`，`include base.mk`并且我希望`Makefile`能够在`base.mk`没有任何警告消息的情况下覆盖目标。我正在使用 GNU Make。

GNU Make 文档描述了这样做的一种方法：

创建`Makefile`如下：

```
foo:
        echo 'bar' > foo

%: force
        @$(MAKE) -f base.mk $@
force: ; 
```

来源： [https ://www.gnu.org/software/make/manual/html_node/Overriding-Makefiles.html](https://www.gnu.org/software/make/manual/html_node/Overriding-Makefiles.html)

上面的方法有一个（可能很严重的）缺点，它会调用一个单独的实例`$(MAKE)`，这意味着（一些或全部？）变量可能（将？）不会在 make 的父子调用和子调用之间共享。

令人高兴的是，我找到了一个更好的解决方案，如下所述：

创建`base.mk`如下：

```
foo-default:
        echo  'foo-default'

bar-default:
        echo  'bar-default'

%:  %-default
        @  true 
```

创建`Makefile`如下：

```
include  base.mk

foo:
        echo  'foo  Makefile' 
```

示例输出：

```
$ make foo
echo  'foo  Makefile'
foo  Makefile

$ make bar
echo  'bar-default'
bar-default 
```

请注意，您需要能够控制目标的名称，`base.mk`以便您可以命名它们`<target>-default`。换句话说，您不能使用这种方法来扩展任意基础 makefile。但是，如果您同时控制`base.mk`和`Makefile`，则此方法将允许您创建一个`base.mk`，然后创建多个自定义。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-14T19:11:48.560

执行此操作的最常见方法之一是将发布对象和调试对象放在单独的子目录中。这样您就不会重新定义对象的规则，因为它们将具有不同的名称。像这样的东西：

```
D_OBJECTS=$(SRC:%.cpp=debug/%.o)
R_OBJECTS=$(SRC:%.cpp=release/%.o)

RTARGET = a.out
DTARGET = a.out.debug

all : dirs $(RTARGET)

debug : dirs $(DTARGET)

dirs :
    @mkdir -p debug release

debug/%.o : %.c
    $(CC) $(DEBUG_CFLAGS) -o $@ -c $<

release/%.o : %.c
    $(CC) $(RELEASE_CFLAGS) -o $@ -c $<

$(DTARGET) : $(D_OBJECTS)
    $(CC) $(DEBUG_CFLAGS) -o $@ $(D_OBJECTS)

$(RTARGET) : $(R_OBJECTS)
    $(CC) $(RELEASE_CFLAGS) -o $@ $(R_OBJECTS) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-27T22:09:52.997

为避免多次包含同一个文件，您可以使用 C 样式的标头“指令”：

```
ifeq ($(_MY_MAKEFILE_),)
_MY_MAKEFILE_ := defined

...

endif 
```

*   `ifeq`这里只是说“值是空的”
*   有可能可以做类似的事情，`ifndef`但我首先得到了这个工作
*   “定义”的值就是任何不为空的东西

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-07-17T19:58:16.170

我遵守了自己的制作并注释掉了打印这些警告的部分。奇迹般有效。在第 2114 行附近制作 v4.2，read.c

# opengl-es - Cocos2d：无法让片段着色器仅绘制图像的非透明像素

> ID：11958630
> 
> 赞同：0
> 
> 时间：2012-08-14T18:36:40.290
> 
> 标签：opengl-es, cocos2d-iphone, fragment-shader

我正在尝试使用[这个 raywenderlich 教程。](http://www.raywenderlich.com/10862/how-to-create-cool-effects-with-custom-shaders-in-opengl-es-2-0-and-cocos2d-2-x)我对 CSEGrass 示例（页面按钮）感兴趣。

我确实尝试在带有 alpha 通道的小图像上运行着色器，该通道在蓝色背景后添加到场景中。这是代码（几乎与教程相同，见下文）。我期待红色图像显示没有黑色边框。

这是图像：

![图片](../Images/54f636ec75dea171593ed70f783e4846.png)

结果是这样的： ![图像弯曲](../Images/55b0e72bef7feb972d1d3de46f4117a2.png)

![图像弯曲 2](../Images/d87d334c72ddfa41e247f05c82561cd7.png)

我对此完全没有经验，但我猜所写的着色器无法识别透明像素并将它们绘制为黑色..在代码（第 5 节）中，似乎绘制的是正常颜色，实际上它应该是透明的..看起来透明像素有一个对应于黑色的rgb值..

```
vec3 normalColor = texture2D(u_texture, fract(vec2(v_texCoord.x + offset, v_texCoord.y))).rgb; 
```

我有点失落。我在这里发布代码：

```
 CCSprite *background = [CCSprite spriteWithFile:@"icewallpaper.png"];
        background.anchorPoint = CGPointMake(0.5f, 0.5f);
        background.position = CGPointMake( 160.0f, 240.0f);
        [self addChild:background];

        // 1
        sprite = [CCSprite spriteWithFile:@"grass.png"];
        sprite.anchorPoint =CGPointMake(0.5f, 0.5f);
        sprite.position =  CGPointMake( 160.0f, 240.0f);
        [self addChild:sprite z:0 tag:69];

        CCSprite *altra = [CCSprite spriteWithFile:@"Icon-Small.png"];
        altra.anchorPoint = CGPointMake(0.5, 0.5f);
        altra.position = CGPointMake(20.0f, 300.0f);
        [self addChild:altra z:0 tag:99];

        // 2
        const GLchar * fragmentSource = (GLchar*) [[NSString stringWithContentsOfFile:[CCFileUtils fullPathFromRelativePath:@"CSEGrass.fsh"] encoding:NSUTF8StringEncoding error:nil] UTF8String];
        sprite.shaderProgram = [[CCGLProgram alloc] initWithVertexShaderByteArray:ccPositionTextureA8Color_vert
                                                          fragmentShaderByteArray:fragmentSource];
        [sprite.shaderProgram addAttribute:kCCAttributeNamePosition index:kCCVertexAttrib_Position];
        [sprite.shaderProgram addAttribute:kCCAttributeNameTexCoord index:kCCVertexAttrib_TexCoords];
        [sprite.shaderProgram link];
        [sprite.shaderProgram updateUniforms];

        // 3
        timeUniformLocation = glGetUniformLocation(sprite.shaderProgram->program_, "u_time");

        // 4
        [self scheduleUpdate];

        // 5
        [sprite.shaderProgram use]; 
```

这是着色器文件**CSEGrass.fsh**：

```
#ifdef GL_ES
precision mediump float;
#endif

varying vec2 v_texCoord;
uniform sampler2D u_texture;
uniform float u_time;

// 1
const float speed = 4.0;
const float bendFactor = 0.5;
void main()
{
    // 2
    float height = 0.0 + v_texCoord.y;
    // 3
    float offset = pow(height, 2.5);

    // 4 multiply by sin since it gives us nice bending
    offset *= (sin(u_time * speed) * bendFactor);

    // 5
    vec3 normalColor = texture2D(u_texture, fract(vec2(v_texCoord.x + offset, v_texCoord.y))).rgb;
    gl_FragColor = vec4(normalColor, 1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:24:13.400

```
vec3 normalColor = texture2D(u_texture, fract(vec2(v_texCoord.x + offset, v_texCoord.y))).rgb;
gl_FragColor = vec4(normalColor, 1); 
```

您正在获取纹理颜色的 RGB 值并将它们与 alpha 值一起使用。因此，(0, 0, 0, 0) 变为 (0, 0, 0, 1)，纯黑色。解决方案：使用纹理中的 alpha 值。

```
gl_FragColor = texture2D(u_texture, fract(vec2(v_texCoord.x + offset, v_texCoord.y))).rgba; 
```

# android - 如何按下 ArrayList 并显示包含来自另一个 ArrayList 的信息的 AlertDialog？

> ID：11958635
> 
> 赞同：0
> 
> 时间：2012-08-14T18:36:47.193
> 
> 标签：android, oop, arraylist, android-alertdialog

好的，这就是我到目前为止所得到的：

```
public class Perks extends ListActivity {

 ArrayList<Item> items = new ArrayList<Item>();
 ArrayList<Item> entry = new ArrayList<Item>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        items.add(new SectionItem("Tier 1"));
        items.add(new EntryItem("Flak Jacket"));
        items.add(new EntryItem("Ghost"));
        items.add(new EntryItem("Blind Eye"));
        items.add(new EntryItem("Hardline"));
        items.add(new EntryItem("Lightweight"));

        items.add(new SectionItem("Tier 2"));
        items.add(new EntryItem("Hard Wired"));
        items.add(new EntryItem("Scavenger"));
        items.add(new EntryItem("Cold Blooded"));
        items.add(new EntryItem("Toughness"));
        items.add(new EntryItem("Fast Hands"));

        items.add(new SectionItem("Tier 3"));
        items.add(new EntryItem("Engineer"));
        items.add(new EntryItem("Dead Silence"));
        items.add(new EntryItem("Extreme Conditioning"));
        items.add(new EntryItem("Tactical Mask"));
        items.add(new EntryItem("Awareness"));
        items.add(new EntryItem("Dexterity"));

        EntryAdapter adapter = new EntryAdapter(this, items);

        entry.add(new SectionItem("Tier 1"));
        entry.add(new EntryItem("Take less explosive damage."));
        entry.add(new EntryItem("Cannot be detected by enemy UAV while moving."));
        entry.add(new EntryItem("Unaffected by AI-controlled perks."));
        entry.add(new EntryItem("Receive bonus score points."));
        entry.add(new EntryItem("Move faster, take no damage from falling."));

        entry.add(new SectionItem("Tier 2"));
        entry.add(new EntryItem("Immune to counter-UAV and enemy EMPs."));
        entry.add(new EntryItem("Replenish ammo and grenades from fallen enemies."));
        entry.add(new EntryItem("Resistence to targeting systems including Dual Band, Target Finder," +
                "Sensor Grenades and player-controlled aircraft."));
        entry.add(new EntryItem("Flinch less when shot."));
        entry.add(new EntryItem("Swap grenades faster, use grenades and equipment faster, and safely throw" +
                "back frag grenades."));

        entry.add(new SectionItem("Tier 3"));
        entry.add(new EntryItem("Show enemy equipment, delay explosives, and re-roll and booby trap care" +
                "packages."));
        entry.add(new EntryItem("Move silently."));
        entry.add(new EntryItem("Sprint for a longer duration."));
        entry.add(new EntryItem("Reduce the effect of flash, concussiona and shock charges."));
        entry.add(new EntryItem("Enemy movements are easier to hear."));
        entry.add(new EntryItem("Climb ladders and mantle over objects faster, recover from melee faster and" +
                "aim faster after sprinting."));

        setListAdapter(adapter);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        if(!items.get(position).isSection()){

            EntryItem item = (EntryItem)items.get(position);

            //Toast.makeText(this, "You clicked " + item.title , Toast.LENGTH_SHORT).show();

                  AlertDialog.Builder adb=new AlertDialog.Builder(Perks.this);
                  adb.setTitle(item.title);
                  adb.setMessage();
                  adb.setPositiveButton("Ok", null);
                  adb.show();
              }

        super.onListItemClick(l, v, position, id);
    }
} 
```

我想要做的是拥有它，以便当按下“项目”时，它将在 AlertDialog 中显示相应的“条目”。任何有关此事的帮助将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:48:08.387

好吧，看起来您当前的数组列表对于相应的索引具有相同的值......换句话说......如果用户在项目列表中选择项目 2，您希望在条目列表中显示项目 2。

```
 @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        if(!items.get(position).isSection()){

            EntryItem item = (EntryItem)items.get(position);
            EntryItem discriptor = (EntryItem) entry.get(position);

                  AlertDialog.Builder adb=new AlertDialog.Builder(Perks.this);
                  adb.setTitle(item.title);
                  adb.setMessage(discriptor.getTitle()); //get the value of this element.
                  adb.setPositiveButton("Ok", null);
                  adb.show();
              }

        super.onListItemClick(l, v, position, id);
    } 
```

否则，我个人认为只创建一个类来处理两组数据会容易得多......例如

```
public class EntryItem {

     private String name;
     private String description;

     public EntryItem(String name, String discription){
          this.name = name;
          this.description = discription;
     }
} 
```

我只是认为这样管理会更容易。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:41:37.687

您可能会将通过`EntryItem`构造函数发送的值存储到该特定类中的某个变量中。对？

如果你这样做，你可以使用：

```
adb.setMessage(""+item.getTheValueFromTheVariable()); 
```

# javascript - 下拉菜单的可用性

> ID：11958636
> 
> 赞同：0
> 
> 时间：2012-08-14T18:37:00.773
> 
> 标签：javascript, jquery, html, css

有没有办法为客户增加下拉菜单的可用性，例如如果用户将鼠标移到他们不想要的区域上，它会在淡出之间引入一些延迟，或者让宽菜单更容易让用户获得通过计算鼠标移动的角度或猜测用户的意图到第二级，这样他们在尝试访问第二级下拉菜单的弹出时不会感到沮丧并且它会改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:19:03.383

实际上有一个 jquery 方法叫做 Hover Intent Interval 和 Hover Intent Timeout。哪个可以满足您的要求，您可以设置超时，因此如果他们将鼠标悬停在菜单上然后悬停，则可以说需要 500 毫秒才能动画消失，反之亦然（动画进入）。

这是更多信息的链接，也尝试做一些谷歌搜索我确定有更好的资源： [http ://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

我过去在 megamenus 中使用的另一种方法是用户必须单击才能打开/动画菜单，然后它会保持打开状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:41:11.687

我建议使用或查看[Superfish](http://users.tpg.com.au/j_birch/plugins/superfish/ "超级鱼")，这是一个 jQuery 插件，可以很好地处理下拉菜单，并提供许多您正在谈论的可用性功能，特别是精心设计的延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T18:29:17.787

悬停意图效果很好，我在我的网站上使用过

# javascript - 在表格中打印出 Javascript 数组

> ID：11958641
> 
> 赞同：5
> 
> 时间：2012-08-14T18:37:29.163
> 
> 标签：javascript, arrays, html-table

我有这个数组：

```
var employees = [
{ "firstName":"John" , "lastName":"Doe" }, 
{ "firstName":"Anna" , "lastName":"Smith" }, 
{ "firstName":"Peter" , "lastName": "Jones" }
]; 
```

我想将整个数组打印为 html 表。我将如何做到这一点？

我试过了，但只能得到最终的打印名称：

```
<!DOCTYPE html>
<html>
<body>
<h2>Create Object from JSON String</h2>
<p>
First Name: <span id="fname"></span><br /> 
Last Name: <span id="lname"></span><br /> 
</p> 
<script type="text/javascript">
var txt = '{"employees":[' +
'{"firstName":"John","lastName":"Doe" },' +
'{"firstName":"Anna","lastName":"Smith" },' +
'{"firstName":"Peter","lastName":"Jones" }]}';

var obj = eval ("(" + txt + ")");

for (i=0; i<txt.length; i++){
    document.getElementById("fname").innerHTML=obj.employees[i].firstName 
    document.getElementById("lname").innerHTML=obj.employees[i].lastName 
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T18:48:24.077

使用 jQuery，您可以执行以下操作：

```
var txt = '{"employees":[' +
    '{"firstName":"John","lastName":"Doe" },' +
    '{"firstName":"Anna","lastName":"Smith" },' +
    '{"firstName":"Peter","lastName":"Jones" }]}';

// $.parseJSON will parse the txt (JSON) and convert it to an
// JavaScript object. After its call, it gets the employees property
// and sets it to the employees variable
var employees = $.parseJSON( txt ).employees;

var $table = $( "<table></table>" );

for ( var i = 0; i < employees.length; i++ ) {
    var emp = employees[i];
    var $line = $( "<tr></tr>" );
    $line.append( $( "<td></td>" ).html( emp.firstName ) );
    $line.append( $( "<td></td>" ).html( emp.lastName ) );
    $table.append( $line );
}

$table.appendTo( document.body );

// if you want to insert this table in a div with id attribute 
// set as "myDiv", you can do this:
$table.appendTo( $( "#myDiv" ) ); 
```

jsFiddle：http: [//jsfiddle.net/davidbuzatto/aDX7E/](http://jsfiddle.net/davidbuzatto/aDX7E/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T18:47:31.427

```
var table = document.createElement("table");
for (var i = 0; i < employees.length; i++) {
  var row = table.insertRow(-1);
  var firstNameCell = row.insertCell(-1);
  firstNameCell.appendChild(document.createTextNode(employees[i].firstName));
  var lastNameCell = row.insertCell(-1);
  lastNameCell.appendChild(document.createTextNode(employees[i].lastName));
}
document.body.appendChild(table); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-31T13:06:33.773

针对数组类型数据结构中的对象的可重用 JSON 到表转换解决方案。对象属性插入标题单元格，值插入数据单元格。很抱歉我的非正统缩进，但它让我对函数式编程感到舒服。

```
var employees = [
{ "firstName":"John" , "lastName":"Doe" }, 
{ "firstName":"Anna" , "lastName":"Smith" }, 
{ "firstName":"Peter" , "lastName": "Jones" }
],
goods = [
{ "ID":"0001" , "Description":"Cool Table", "Price":"499" , "Color":"Green" }, 
{ "ID":"0002" , "Description":"Ceramic Vase", "Price":"120" , "Color":"Beige" }, 
{ "ID":"0003" , "Description":"Titanium Ashtray", "Price":"999" , "Color":"Titanium Color" },
{ "ID":"0004" , "Description":"Story Book", "Price":"1" , "Color":"Yellow" },
{ "ID":"0005" , "Description":"Chair", "Price":"120" , "Color":"Pink" }
],

tableMaker = o => {var keys = Object.keys(o[0]),
                   rowMaker = (a,t) => a.reduce((p,c,i,a) => p + (i === a.length-1 ? "<" + t + ">" + c + "</" + t + "></tr>"
                                                                                   : "<" + t + ">" + c + "</" + t + ">"),"<tr>"),
                       rows = o.reduce((r,c) => r + rowMaker(keys.reduce((v,k) => v.concat(c[k]),[]),"td"),rowMaker(keys,"th"));
                   return "<table>" + rows + "</table>";
                  };

document.write(tableMaker(employees));
document.write(tableMaker(goods));
```

# code-signing - 在 Mountain Lion 中安装我的签名应用程序时，如何防止出现“使用无效证书签名包”警告？

> ID：11958643
> 
> 赞同：0
> 
> 时间：2012-08-14T18:37:43.503
> 
> 标签：code-signing, osx-mountain-lion

我有一个使用`[path]/PackageMaker --sign [MyPackage].pkg -c "3rd Party Mac Developer Installer: [MyCompany]" -o [MyPackage]-signed.pkg`.

这成功了，`spctl --assess --type install [MyPackage]-signed.pkg`也成功了。

但是，当我尝试在运行 OS X 10.8 Mountain Lion 的计算机上安装它时，我收到一条警告：

> 使用无效证书对包进行签名。此软件包可能无法安装您所期望的。是否仍要继续安装？

如果我出示证书，则名称为“3rd Party Mac Developer Installer: [MyCompany]”，并列为由“Apple Worldwide Developer Relations Certification Authority”颁发。显示“此证书由未知机构签署”的警告。

计算机的安全设置设置为“允许从：Mac App Store 和已识别的开发人员下载的应用程序”。

我已经尝试过 packagemaker（来自 Xcode 3.2.4）和 PackageMaker（来自辅助工具下载的 3.0.6），结果相同。

该证书是从 Xcode 4 中请求的，据我所知似乎是正确的。它在 Keychain Access 中正确显示，并在其下方嵌套了一个私钥。

我需要做什么才能让我的应用程序的安装程序包运行而不在 Mountain Lion 中显示此警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:32:23.677

“3rd Party Mac Developer Installer: [MyCompany]”证书适用于提交到应用商店的应用。对于您自己分发的应用程序，您需要签名的证书是“开发人员 ID 安装程序：[MyCompany]”证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:17:55.370

您还必须确保“开发人员 ID 证书颁发机构”证书在您的钥匙串中。你可以从这里得到它：

[https://developer.apple.com/certificationauthority/AppleWWDRCA.cer](https://developer.apple.com/certificationauthority/AppleWWDRCA.cer)

# c# - 破解密码的最佳循环

> ID：11958645
> 
> 赞同：1
> 
> 时间：2012-08-14T18:37:53.487
> 
> 标签：c#, passwords, forgot-password, cracking

我正在创建一个程序，用于帮助我的客户恢复放置在 Word 和 Excel 等办公文档中的密码。该程序运行良好，但比您可以免费下载的类似产品慢得多。我想使用我自己的程序，因为我觉得你免费下载的很多程序并不完全安全，并且缺少一些我想要的控件。

更重要的是......我需要帮助弄清楚为什么我的程序这么慢。我用一个简单的 3 个字母密码“TFX”创建了一个 Excel 文档。我下载的程序找到密码的速度几乎与单击“开始”后松开鼠标按钮的速度一样快。我的程序需要 10 分钟。这是 3 个字符的循环：

```
 private string ThreeCharPass(string file, Microsoft.Office.Interop.Excel.Application exApp, char[] combarr)
    {
        for (int three = 0; three < combarr.Length; three++)
        {
            for (int two = 0; two < combarr.Length; two++)
            {
                for (int one = 0; one < combarr.Length; one++)
                {
                    try
                    {
                        string pass = combarr[three].ToString() + combarr[two].ToString() + combarr[one].ToString();
                        exApp.Workbooks.Open(file, false, true, Type.Missing, pass, Type.Missing, true, Type.Missing, Type.Missing, false, false, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
                        return pass;
                    }
                    catch
                    {
                    }
                }
            }
        }
        return string.Empty;
    } 
```

数组“combarr”是一个字符数组，包含密码中所有可能的字符。它是根据用户选择的选项在程序的早期生成的。我认为问题必须出在我循环数组以创建密码组合的方式上，因为仅在这种 3 个字符的密码方法中，它花费超过 5 分钟，而其他“专业”程序花费几秒钟。任何反馈将不胜感激！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:43:22.443

您可以对代码进行一些小的优化，但最可能的罪魁祸首是`exApp.Workbooks.Open`调用。我认为该调用非常慢，但是您可以使用分析器对其进行测试。

其他工具所做的是读取实际的文档结构（DOC、DOCX 格式）并确定密码是否正确，这与 Word 试图找出密码的方式完全相同。我不知道确切的细节，但很可能有一种方法可以让 Word 知道密码是正确的。一个例子可能是一个唯一的字符串，当正确解密时，它具有预期值；或加起来的校验和。当您知道格式的规范时，您可以自己进行测试，从而节省昂贵的互操作调用。

[此页面](http://msdn.microsoft.com/en-us/library/cc313105)包含有关许多 Microsoft Office 格式的详细信息。实现这些规范的一部分需要做很多工作，但它肯定会加快速度。只有在删除了互操作调用后，您才能了解更高效的循环、多线程和其他策略。

请注意，Office 格式是专有的，因此并非所有信息都可用、完整、最新或可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T17:14:44.527

对于 .docx 文档，有一种更简单的方法。

1.  将扩展名重命名为 .zip，
2.  进入文件，在那里你找到文件夹“word”
3.  在这里你删除“settings.xml”
4.  现在关闭文件夹，将文件重命名为 .docx。

完成的。在[http://www.nextofwindows.com/how-to-remove-password-from-protected-word-file-in-word-2007-and-2010上找到](http://www.nextofwindows.com/how-to-remove-password-from-protected-word-file-in-word-2007-and-2010)

对于 Excel 有一个非常相似的方法，但它涉及更多的工作

1.  将扩展名重命名为 .zip，
2.  进入文件，在那里你找到文件夹“xl”，然后在该文件夹下找到“工作表”
3.  应该有一个或多个文件，名称如下：sheet1.xml（sheet2.xml 等）。其中一个文件内部是一个 XML 标记：< sheetProtection password=... />。删除整个 XML 标记。
4.  现在关闭文件夹，将文件重命名为 .xlsx 或 .xlsm（如果它是启用宏的工作簿）。

[在http://blog.bitcollectors.com/adam/2011/10/how-to-unprotect-a-password-protected-xlsx-file/](http://blog.bitcollectors.com/adam/2011/10/how-to-unprotect-a-password-protected-xlsx-file/)上找到

或者，以下方法对我来说效果很好.. [http://www.instructables.com/id/VBA-Code-To-Unlock-A-Locked-Excel-Sheet/](http://www.instructables.com/id/VBA-Code-To-Unlock-A-Locked-Excel-Sheet/)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:51:55.953

完全错误的做法。

1.  多线程
2.  除非您知道特定的密码长度并且它是随机/安全的（很少有用户选择真正随机的密码），否则您可能会使用字典攻击和/或彩虹表做得更好
3.  对于像 Excel 这样常见的东西，我首先会查找有关算法/弱点的已知信息，以确定密码长度以及 Excel 如何实际解密/解锁文件。
4.  直接使用 API 测试您的密码可能会很慢。最好在某个位置找到一个已知值并对其进行处理。如果使用#3，您可以确定 Excel 如何解密/解锁文件，您可以在自己的代码中复制它，以与调用 Excel 方法时自身的互操作开销一样快。

话虽这么说，你真的应该这样做吗？

# cocoa - 为什么我无法连接到苹果 _apple-midi._udp。使用 NSNetService 的 NetService？

> ID：11958653
> 
> 赞同：1
> 
> 时间：2012-08-14T18:38:14.360
> 
> 标签：cocoa, core-audio, bonjour, nsnetservice, coremidi

在苹果发布的 bonjour 网络服务 _apple-midi._udp 上打开输入流时收到错误消息。我收到以下错误：错误域 = NSPOSIXErrorDomain 代码 = 61“操作无法完成。连接被拒绝”用户信息 = 0x100358780 {}。

Apple 是否对试图以这种方式访问​​ MIDI 流的人不满意？我正在尝试创建客户端可以从中选择的 midi 网络流的可发现列表。通过 MacOSX 连接时，我试图从等式中删除 Audio Midi Setup 应用程序。

谢谢，

帕特里克

# c# - NHibernate QueryOver 多个连接别名，只有第一个生成连接

> ID：11958654
> 
> 赞同：5
> 
> 时间：2012-08-14T18:38:26.183
> 
> 标签：c#, nhibernate

我正在尝试使用 JoinAlias 加入多个实体，但不知道如何让多个实体加入。以下代码导致 SQL 错误：

```
[TestMethod]
public void TestAliases()
{
    App_Start.NHibernateProfilerBootstrapper.PreStart();

    var type = new ShirtStyleType {Id = 1};
    var style = new ShirtStyle {Id = 1, ShirtStyleType = type};
    var shirt = new Shirt {Id = 1};
    var shirtStyle = new ShirtShirtStyle {Shirt = shirt, ShirtStyle = style};
    shirt.ShirtStyles = new[] {shirtStyle};

    using (Session.BeginTransaction())
        Session.Save(shirt);

    Session.Clear();

    using (Session.BeginTransaction())
    {
        Shirt shirtAlias = null;
        ShirtShirtStyle shirtStylesAlias = null;
        ShirtStyle shirtStyleAlias = null;
        ShirtStyleType shirtStyleTypeAlias = null;

        var query = Session.QueryOver<Shirt>(() => shirtAlias)
            .JoinAlias(() => shirtAlias.ShirtStyles, () => shirtStylesAlias)
            .JoinAlias(() => shirtStylesAlias.ShirtStyle, () => shirtStyleAlias)
            .JoinAlias(() => shirtStyleAlias.ShirtStyleType, () => shirtStyleTypeAlias)
            .Where(() => shirtStyleTypeAlias.Id == 1)
            .List();
    }
} 
```

错误：

```
ERROR: 
SQLite error
no such column: shirtstyle3_.Id 
```

导致错误的 SQL：

```
SELECT this_.Id                as Id0_1_,
       shirtstyle1_.Shirt      as Shirt1_0_,
       shirtstyle1_.ShirtStyle as ShirtStyle1_0_
FROM   "Shirt" this_
       inner join "ShirtShirtStyle" shirtstyle1_
         on this_.Id = shirtstyle1_.Shirt_id
WHERE  shirtstyle3_.Id = 1 /* @p0 */ 
```

很明显可以看出为什么会发生错误 - 查询缺少连接，特别是“衬衫衬衫样式”以外的每个连接。根据我对 JoinAlias 的理解，我提供的代码*应该*是加入必要的表，但事实并非如此，我也不明白为什么。在这种情况下，我还需要让 JoinAlias 工作吗？

我为此测试创建的实体和映射如下，以防它与它们的映射方式有关。

实体：

```
public class Shirt
{
    public virtual int Id { get; set; }
    public virtual IList<ShirtShirtStyle> ShirtStyles { get; set; } 
}

public class ShirtShirtStyle
{
    public virtual Shirt Shirt { get; set; }
    public virtual ShirtStyle ShirtStyle { get; set; }

    protected bool Equals(ShirtShirtStyle other)
    {
        return Equals(Shirt, other.Shirt) && Equals(ShirtStyle, other.ShirtStyle);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != this.GetType()) return false;
        return Equals((ShirtShirtStyle) obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return ((Shirt != null ? Shirt.GetHashCode() : 0)*397) ^ (ShirtStyle != null ? ShirtStyle.GetHashCode() : 0);
        }
    }
    }

    public class ShirtStyle
    {
        public virtual int Id { get; set; }
        public virtual ShirtStyleType ShirtStyleType { get; set; }
    }

    public class ShirtStyleType
    {
        public virtual int Id { get; set; }
    } 
```

地图：

```
public class ShirtMap : ClassMap<Shirt>
{
    public ShirtMap()
    {
        Id(x => x.Id).GeneratedBy.Assigned();
        HasMany(x => x.ShirtStyles);
    }
}

public sealed class ShirtShirtStyleMap : ClassMap<ShirtShirtStyle>
{
    public ShirtShirtStyleMap()
    {
        CompositeId()
            .KeyReference(x => x.Shirt)
            .KeyReference(x => x.ShirtStyle);
    }
}

public sealed class ShirtStyleMap : ClassMap<ShirtStyle>
{
    public ShirtStyleMap()
    {
        Id(x => x.Id).GeneratedBy.Assigned();
        References(x => x.ShirtStyleType);
    }
}

public sealed class ShirtStyleTypeMap : ClassMap<ShirtStyleType>
{
    public ShirtStyleTypeMap()
    {
        Id(x => x.Id).GeneratedBy.Assigned();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:10:23.080

好吧，这个查询似乎按预期运行 - 问题似乎与 Fluent NHibernate 有关。即使通过 .KeyReference 在复合实体上指定了引用，您也需要根据[https://stackoverflow.com/a/10995486/981205在映射中](https://stackoverflow.com/a/10995486/981205)*明确地*重新指定它们。不确定这是错误还是预期行为。

# .net - Resolve中T型隐含的温莎城堡工厂可以吗 ?

> ID：11958655
> 
> 赞同：0
> 
> 时间：2012-08-14T18:38:31.180
> 
> 标签：.net, castle-windsor, factory-pattern

我有以下城堡温莎流利的配置代码...

```
container
  .AddFacility<TypedFactoryFacility>()
  .Register(

  Component
    .For<IXxxCache>()
    .ImplementedBy<AppFabricXxxCache>()
    .Named("AppFabricXxxCache")
    .LifeStyle.FromContext(),

  Component
    .For<IXxxCache>()
    .ImplementedBy<DatabaseXxxCache>()
    .Named("DatabaseXxxCache")
    .LifeStyle.FromContext(),

  Component
    .For<IXxxCacheFactory>()
    .ImplementedBy<XxxCacheFactory>()
    .DependsOn(new {cacheName})
  ); 
```

XxxCacheFactory 如下...

```
public class XxxCacheFactory : IXxxCacheFactory
{
    private readonly IWindsorContainer _container;
    private readonly string _cacheName;

    public XxxCacheFactory(IWindsorContainer container, string cacheName)
    {
        _container = container;
        _cacheName = cacheName;
    }

    public IXxxCache Create()
    {
        try
        {
            var cache = new DataCacheFactory().GetCache(_cacheName);
            return _container.Resolve<IXxxCache>("AppFabricXxxCache", new {cache});
        }
        catch (DataCacheException)
        {
            return _container.Resolve<IXxxCache>("DatabaseXxxCache");
        }
    }

    public void Release(IXxxCache component)
    {
        _container.Release(component);
    }
} 
```

我可以使用以下代码来实现它...

```
[Test]
public void database_xxx_cache_returned_when_cache_does_not_exist()
{
    ConfigurationManager.AppSettings["CacheName"] = "this_cache_does_not_exist";
    var container = Castle.WindsorContainerBootStrap.BootStrapContainerAndRunInstallers<SingletonLifestyleManager>();
    var factory = container.Resolve<IXxxCacheFactory>();
    var cache = factory.Create();
} 
```

理想情况下，我想删除工厂创建部分，让容器使用我拥有的工厂类获得正确的实现，就像这样......

```
[Test]
public void database_xxx_cache_returned_when_cache_does_not_exist()
{
    ConfigurationManager.AppSettings["CacheName"] = "this_cache_does_not_exist";
    var container = Castle.WindsorContainerBootStrap.BootStrapContainerAndRunInstallers<SingletonLifestyleManager>();
    var cache = container.Resolve<IXxxCache>();
} 
```

这可能吗？如果是这样，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:06:46.213

我的一位同事向我指出了温莎的工厂方法支持

只需将其添加到我的安装程序中就可以了...

```
container
    .Register(
        Component
            .For<DataCacheFactory>()
            .ImplementedBy<DataCacheFactory>()
            .LifeStyle.Singleton
        ,
        Component
            .For<IXxxCacheFactory>()
            .ImplementedBy<XxxCacheFactory>()
            .DependsOn(new {cacheName})
            .LifeStyle.Transient
        ,
        Component
            .For<IXxxCache>()
            .UsingFactoryMethod(kernel => kernel.Resolve<IXxxCacheFactory>().Create())
        ,
        Component
            .For<IXxxCache>()
            .ImplementedBy<AppFabricXxxCache>()
            .Named("AppFabricXxxCache")
            .LifeStyle.FromContext()
        ,
        Component
            .For<IXxxCache>()
            .ImplementedBy<DatabaseXxxCache>()
            .Named("DatabaseXxxCache")
            .LifeStyle.FromContext()
     ); 
```

我还使用容器来创建 DataCacheFactory，因为这显然是一项昂贵的操作。所以现在的用法是...

```
[Test]
public void database_xxx_cache_returned_when_cache_does_not_exist()
{
    // ARRANGE
    ConfigurationManager.AppSettings["CacheName"] = "this_cache_does_not_exist";
    var container = Castle.WindsorContainerBootStrap.BootStrapContainerAndRunInstallers<SingletonLifestyleManager>();

    // ACT
    var cache = container.Resolve<IXxxCache>();

    // ASSERT
    Assert.That(cache, Is.InstanceOf<DatabaseXxxCache>());

    // TIDYUP
    container.Dispose();
} 
```

# ruby-on-rails - /lib 中类的活动管理员未初始化常量

> ID：11958662
> 
> 赞同：1
> 
> 时间：2012-08-14T18:39:06.593
> 
> 标签：ruby-on-rails, activeadmin

我正在尝试为 ActiveAdmin 创建一个自定义类，以尝试从我的资源文件中的控制器覆盖中清理代码。

我有一`creditcard.rb`堂课`/lib`：

```
class Creditcard

def initialize
    1
end

end 
```

我有这个控制器代码`subscriptions.rb`

```
ActiveAdmin.register Subscription do

  controller do
    def update
    @test=Creditcard.new 
```

繁荣。`uninitialized constant Creditcard`. 有人知道如何在 ActiveAdmin 中使用自定义类吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:01:33.270

如果您使用的是 Rails 3+，则可能必须将 lib 目录添加到自动加载路径。

您可以通过将此行添加到定义中的`application.rb`文件来执行此操作`class Application < Rails::Application`：

```
config.autoload_paths += %W(#{Rails.root}/lib) 
```

# javascript - toDataURL()，从网络到我的电脑

> ID：11958667
> 
> 赞同：0
> 
> 时间：2012-08-14T18:39:18.010
> 
> 标签：javascript, canvas

> **可能重复：**
> [将 HTML Canvas 捕获为 gif/jpg/png/pdf？](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)

我对使用 canvas 方法`toDataURL()`从画布中抓取帧并最终将其变成电影感兴趣。

我可以使用这种方法轻松创建一个帧数组。问题是，我如何将这些帧放到我的硬盘上以便我可以使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:49:57.340

您不能仅通过 Javascript 做到这一点。引用[这个答案](https://stackoverflow.com/questions/371875/local-file-access-with-javascript)：

> JavaScript 和 DOM 为恶意作者提供了通过 Web 传递脚本以在客户端计算机上运行的可能性。浏览器作者使用两个限制来控制这种风险。首先，脚本在沙箱中运行，它们只能执行与 Web 相关的操作，而不是创建文件等通用编程任务。

但是，还有其他方法可以实现您的目标。例如，如果您使用 HTML5，则可以使用文件 API。[在这里](http://www.html5rocks.com/en/tutorials/file/dndfiles/)查看教程。

祝你好运！

# c++ - 我可以避免由特定类定义的限定名称吗？

> ID：11958668
> 
> 赞同：1
> 
> 时间：2012-08-14T18:39:22.823
> 
> 标签：c++, class, enums, scope, naming

假设我有一个 MessageBox 类，如下所示：

```
class MyMessageBox
{
public:
    enum Priority {
        Prior_Dialog,
        Prior_Warning,
        // ...
    };

    enum Icon {
        Icon_Question,
        Icon_Exclamation,
        // ...
    };

    enum Button {
        Button_Yes,
        Button_No,
        Button_Cancel,
        // ...
    };

    static void Show(Priority pPriority, Icon pIcon, Button pButton1, Button pButton2);

    // ...
}; 
```

现在，如果我想抛出一个消息框，我必须`MyMessageBox::`为每个标识符输入：

```
MyMessageBox::Show(MyMessageBox::Prior_Dialog, MyMessageBox::Icon_Question, MyMessageBox::Button_Yes, MyMessageBox::Button_No); 
```

理想情况下，我想要一些非宏解决方案，它允许源文件在任何地方`#include "MyMessageBox.h"`省略`MyMessageBox::`限定条件。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T18:41:16.390

是的，而且很简单。如果您不希望`enum`s 在类中，那么...不要在类中定义它们。

```
enum Priority {
    Prior_Dialog,
    Prior_Warning,
    // ...
};

enum Icon {
    Icon_Question,
    Icon_Exclamation,
    // ...
};

enum Button {
    Button_Yes,
    Button_No,
    Button_Cancel,
    // ...
};

class MyMessageBox
{
public:
    static void Show(Priority pPriority, Icon pIcon, Button pButton1, Button pButton2);
// ...
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T18:56:52.093

**如果枚举和类在单独**的命名空间中声明（即枚举应该在类之外声明）只是为了**不污染全局命名空间，**也许会很方便。

```
namespace MessageBoxUtils {

enum Priority {
    Prior_Dialog,
    Prior_Warning,
    // ...
};

enum Icon {
    Icon_Question,
    Icon_Exclamation,
    // ...
};

enum Button {
    Button_Yes,
    Button_No,
    Button_Cancel,
    // ...
};

class MyMessageBox
{
public:
    static void Show(Priority pPriority, Icon pIcon, Button pButton1, Button pButton2);

    // ...
};

} // namespace MessageBoxUtils 
```

客户端代码（一些 cpp 文件）：

```
#include ...

using namespace MessageBoxUtils;

...

void SomeClass::Foo()
{
    MyMessageBox::Show(Prior_Dialog, Icon_Question, ...);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T19:41:35.930

如果您想在类之外定义枚举，并且您还想避免重复并避免枚举名称冲突的风险，请考虑 C++11 的`enum class`可能性：

重新制作 Luchian Grigore 样本

```
enum class Priority {
    Dialog,
    Warning,
    // ...
};

enum class Icon {
    Question,
    Exclamation,
    // ...
};

enum class Button {
    Yes,
    No,
    Cancel,
    // ...
}; 
```

您现在被迫通过显式限定枚举来使用枚举，例如等`Button::Yes`，`Icon::Question`并且您还被迫显式转换为 int（不存在隐式转换）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:46:45.140

You cannot "import" identifiers into the global namespace by means of the `using` keyword:

```
using MyMessageBox::Prior_Dialog; // won't work 
```

(The first glance on the documentation misled me: [http://msdn.microsoft.com/en-us/library/was37tzw%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/was37tzw%28v=vs.80%29.aspx))

Still, I would recommend leaving the enums where they belong -- in the MessageBox class. This avoids confusion and ambiguities -- someone else could define the same enum item but assign it a different value, leading to a compilation error.

Alternatively, you could change the class into a namespace, and then "load" identifiers (or even the whole namespace, if you wish), using `using`.

Other possible shortcuts include:

*   `typedef`ing the enum inside the `MessageBox` class to a short convenient identifier and use this as qualification (hacky)

*   Copying individual constants into your namespace as they are required (cumbersome)

*   ...?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T18:55:24.937

另一种选择是将您的枚举放入与您的小部件相关的完全不同的命名空间中。`Qt`例如，图书馆就是这样做的。他们将大量枚举放在`Qt`命名空间中，而不是将它们放在特定的类中

# c# - CREATE FUNCTION for <> T-SQL 和 CLR 类型的返回值不匹配

> ID：11958669
> 
> 赞同：1
> 
> 时间：2012-08-14T18:39:39.730
> 
> 标签：c#, sql, tsql, sqlclr, sql-types

我正在尝试通过 CRL 集成创建 SQL 函数，但出现以下错误：

> “GetWSClient”的 CREATE FUNCTION 失败，因为返回值的 T-SQL 和 CLR 类型不匹配。

我正在尝试在我的 dll 中使用 WebService，然后将其集成为 SQL Server 中的程序集。

我的 C# 代码是：

```
namespace InternalLists
{
    public class UserDefinedFunctions
    {

      [Microsoft.SqlServer.Server.SqlFunction(DataAccess = DataAccessKind.Read, Name = "WSClient", FillRowMethodName = "Fill_WSClient",
        TableDefinition = "Name nvarchar(255)")]
       public static DataSet WSClient(SqlString url, SqlString idClient)
       {
           WSInternalList.CLIENTS client = new WSInternalList.CLIENTS();
           client.Url = url.ToString();
           return client.WM_CLIENT(idClient.ToString());
       }

       public static void Fill_WSClient(object ProductObj, out SqlString Name)
       {
           DataRow row = (DataRow)ProductObj;
           Name = new SqlString(row["VWSDN_NAME"].ToString());
       }
    }
} 
```

我的 SQL 代码是：

```
CREATE FUNCTION [dbo].[GetWSClient](@url nvarchar(255), @idClient nvarchar(255))
RETURNS  TABLE (
Name nvarchar(255) NULL
)
EXTERNAL NAME [InternalLists].[InternalLists.UserDefinedFunctions].[WSClient]
GO 
```

我已经看到[了这个](https://stackoverflow.com/questions/7172326/t-sql-and-clr-types-for-return-value-do-not-match)答案，但是我将我的函数声明为 DataSet 返回类型，并且我知道我的 WS 正在返回一个 DataSet 结果。

那么，我做错了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:17:00.550

您正在创建一个 CLR*表值函数*。[来自http://msdn.microsoft.com/en-us/library/ms131103.aspx](http://msdn.microsoft.com/en-us/library/ms131103.aspx)的文档，这里有一个示例：

```
using System;
using System.Data.Sql;
using Microsoft.SqlServer.Server;
using System.Collections;
using System.Data.SqlTypes;
using System.Diagnostics;

public class TabularEventLog
{
    [SqlFunction(FillRowMethodName = "FillRow")]
    public static IEnumerable InitMethod(String logname)
    {
        return new EventLog(logname).Entries;
    }

    public static void FillRow(Object obj, out SqlDateTime timeWritten, out SqlChars message, out SqlChars category, out long instanceId)
    {
        EventLogEntry eventLogEntry = (EventLogEntry)obj;
        timeWritten = new SqlDateTime(eventLogEntry.TimeWritten);
        message = new SqlChars(eventLogEntry.Message);
        category = new SqlChars(eventLogEntry.Category);
        instanceId = eventLogEntry.InstanceId;
    }
} 
```

您需要返回一个`IEnumerable`or `IEnumerable<T>`。运行时将负责对其进行枚举`IEnumerable`，将每个枚举对象传递给您的 Fill Row 方法（作为第一个参数，`Object obj`在上面的示例中），并负责将其映射到可以通过 TDS 向下喷射到客户端的内容中，其中客户端，根据它是什么，将它转换成一个结果集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:13:05.203

T-SQL 表数据类型与 DataSet 数据类型不同。SQLCLR 程序集中的UDF 需要返回一个IEnumerable 类型，而DataSet 不实现IEnumerable。

您也许可以将该函数转换为返回 IListSource.GetList()，它确实实现了 IEnumerable，例如：

```
return ((IListSource)client.WM_CLIENT(idClient.ToString())).GetList(); 
```

标准警告适用 - 未经测试 - 但也许这会让你朝着正确的方向前进。祝福！

# c# - 防止在 IIS 中加载特定的 dll

> ID：11958676
> 
> 赞同：4
> 
> 时间：2012-08-14T18:40:18.660
> 
> 标签：c#, c++, iis-7

我收到以下常见错误：

> 无法加载文件或程序集“...”或其依赖项之一。指定的模块无法找到。

问题是这个 dll 引用了非托管 dll，因此它永远无法正确加载。我只是想让 IIS 忽略这个文件。

我正在使用`<remove assembly>`web.config 中的标签，但没有运气。

关于如何防止我的一个 dll 加载的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:42:49.477

虽然我无法找到限制特定程序集的方法，但我能够通过删除所有程序集并添加我需要的特定程序集来完成它。将 web.config 文件更改为：

```
<system.web>
    <compilation targetFramework="4.0">
        <assemblies>
            <remove assembly="*"/>
            <add assembly="example.dll"/>
        </assemblies>
    </compilation>
</system.web> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:46:35.640

.Net 运行时不会为了好玩而加载程序集。它仅在需要时才这样做 - 即您正在积极使用该程序集中的类/方法。只要不执行使用它们的代码，您甚至可以引用不存在的程序集。

因此，阻止程序集被加载不会使您的应用程序工作 - 即删除程序集并看到您的应用程序由于缺少依赖项而崩溃。

如果您以某种方式自己加载程序集（例如 Assembly.Load），那么您需要弄清楚如何跳过此类程序集......

# css - IE7 和下拉列表 - 添加某种边距

> ID：11958677
> 
> 赞同：1
> 
> 时间：2012-08-14T18:40:25.420
> 
> 标签：css, drop-down-menu, internet-explorer-7

我创建了一个下拉菜单，IE7 决定在下拉选择的每个列表项之间创建一些边距，即使列表项没有边距或填充。

你可以在这里看到它：http: [//www.condorstudios.com/stuff/temp/index.php](http://www.condorstudios.com/stuff/temp/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:44:32.400

You could solve this pretty quickly by setting the background color of the parent div to the same as the background color of the list items. You'll always find quirks with Internet Explorer and margins, padding, widths, etc.

This CSS should also work (IE pads all list items), but I'd test this first to see how it changes the layout on other browsers.

```
li {
    margin:0px;
    padding:0px;
} 
```

Depending on how 'hacky' you want to get, there are ways of including CSS that only IE-6,7,8 will interpret: [http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/) Scroll down to the 'Hacks' section.

# c# - Selenium 在 Windows Server 上作为计划任务运行

> ID：11958678
> 
> 赞同：2
> 
> 时间：2012-08-14T18:40:29.087
> 
> 标签：c#, selenium

我们有一个使用 Selenium 测试框架的应用程序。该应用程序在 Windows Server 2012 上运行，并通过 Windows 任务计划程序定期运行。我通过远程桌面连接到服务器。

当我在计划任务设置选项中设置“无论用户是否登录时运行”时都会出现问题。我的应用程序开始使用此 javascript 代码正常运行，但随后立即以错误异常结束 - 它在下面的行中标记。如果我正常启动应用程序，一切正常。不幸的是，我需要制作一个即使没有人登录也可以运行的应用程序。没有人已经遇到过这个问题吗？

这是我的代码：

```
public Bitmap MakeBitmap(Uri url)
{
    driver = MakeFirefoxDriver();
    driver.Navigate().GoToUrl(url.AbsoluteUri);

    // In this command, an exception occurs.
    driver.ExecuteScript("document.body.style.overflow = 'hidden'")

    Thread.Sleep(TimeSpan.FromSeconds(SleepTime));
    var screenshot = driver.GetScreenshot();
    return new Bitmap(Image.FromStream(new MemoryStream(screenshot.AsByteArray)));
}

private FirefoxDriver MakeFirefoxDriver() 
{
    var profile = new FirefoxProfile { EnableNativeEvents = true };
    var capabilityValue = new List<string> { "-width", "500", "-height", "340" };
    var capabilities = DesiredCapabilities.Firefox();
    capabilities.SetCapability("initial", capabilityValue);
    capabilities.SetCapability(FirefoxDriver.ProfileCapabilityName, profile);
    return new FirefoxDriver(capabilities);
} 
```

异常如下所示：

```
Exception log: No response from server for url http://localhost:7062/hub/session/......
StackTrace: at OpenQA.Selenium.Remote.HttpCommandExecutor.CreateResponse(WebRequest
request) at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String
driverCommandToExecute, Dictionary`2 parameters) at ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:19:58.950

我在 Windows 7 上使用任务计划程序，希望它是一样的。在调度程序的“常规”选项卡上，单击“无论用户是否登录都运行”。使用此设置，每次保存属性时都需要输入密码。当它运行时，屏幕上不会出现任何内容。我在这些论坛上读到，在这种模式下运行，如果您尝试抓取图像，它将是空白的。

# jquery - 为什么我的单选按钮没有被选中？

> ID：11958681
> 
> 赞同：0
> 
> 时间：2012-08-14T18:40:40.203
> 
> 标签：jquery, html

jQuery：

这是我编辑的 jquery：

```
$(document).ready(function(){
    $("#set-button").click(function(){
        $("#radio-choice-a").attr("checked", "checked");
        counter=aRoute;
        $('#data-scroller').scroller('destroy');
        scroller();     
    });
}); 
```

html: 已编辑

```
<div data-role="fieldcontain">
      <fieldset data-role="controlgroup" data-type="horizontal">
              <input type="radio" name="radio-choice" id="radio-choice-a"
              value="on" checked="checked" /> <label for="radio-choice-a">A</label>
               <input type="radio" name="radio-choice" id="radio-choice-b"
               value="off" /> <label for="radio-choice-b">B</label> 
               <input type="radio" name="radio-choice" id="radio-choice-c"
           value="other" /> <label for="radio-choice-c">C</label>
       </fieldset>
</div>
<a href="#" id="set-button" data-theme="a">Set</a> 
```

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:19:23.630

伙计们，我用过这个，它奏效了。它之前不起作用的原因是因为我使用的是 jquery.mobile-1.1.1 javascript 文件。因此需要刷新以更新视觉样式。

```
 $("#radio-choice-a").attr("checked",true).checkboxradio("refresh"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:45:52.053

[http://jsfiddle.net/9y5na/](http://jsfiddle.net/9y5na/)

You might as well just search by that ID if that's the specific one you want. Use `.prop('checked', true);` and you're all set. Also radio-choice-a already has checked="checked" within it, why it might seem like the JS isn't doing anything!

```
$("#radio-choice-a").prop("checked", true);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:45:57.963

You can simply do this:

```
$("#radio-choice-a").attr("checked", "checked");​
$("#buttonSetSelector").buttonset("refresh");    //If you are using a buttonset

$("#radio-choice-a").button("refresh");   // If you are just using buttons 
```

See this fiddle for an example: [http://jsfiddle.net/johnkoer/SLqWG/4/](http://jsfiddle.net/johnkoer/SLqWG/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:46:13.730

You can select the elements by their IDs, also you can use the `prop` method for modifying the `checked` property of the inputs:

```
$(document).ready(function() {
    $('#radio-choice-a').prop('checked', true)
    $('#radio-choice-b').prop('checked', false)
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T19:01:19.600

```
document.getElementById('radio-choice-a')​​​​.checked=true;​ 
```

[小提琴](http://jsfiddle.net/)

# php - php数组分组

> ID：11958683
> 
> 赞同：-2
> 
> 时间：2012-08-14T18:40:57.607
> 
> 标签：php, arrays, grouping

我有这个数组：

```
array{
  0 => string '1' (length=1) 
  1 => string '18' (length=2)
  2 => string '18' (length=2)
  3 => string '1' (length=1)
  4 => string '1' (length=1)
  5 => string '1' (length=1)
  6 => string '1' (length=1)
  7 => string '1' (length=1)
  8 => string '18' (length=2)
  9 => string '18' (length=2)
} 
```

我想让它看起来像这样：

```
array{
  0 => array (
          0 => '1'
             )
  1 => array (
          0 => '18' 
          1 => '18' 
             )
  2 => array (
          0 => '1'
          1 => '1'
          2 => '1'
          3 => '1'
          4 => '1'
          5 => '1' 
             )
  3 => array (
          0 => '18'
          1 => '18' 
             )
} 
```

所以想法是，我想通过查找下一个数组键是否与当前键相同来对数组进行分组，如果下一个数组键与当前键相同，它将其合并到一个新数组中，就像分组一样。

我真的无法在这里找到答案，或者在谷歌上，想法是有键 1 然后 2 再次 1，我想对相似的键进行分组，直到另一个键进入，键 (2) 破坏了分组和开始了一个新组，然后按 1 键打破也开始了一个新组，

这个想法是用于聊天消息，facebook 和 msn 他们按发送消息的用户对消息进行分组，直到另一个用户进来并破坏组。但不知道如何。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:49:16.103

未经测试，因为您没有提供复制/粘贴示例输入。

```
$prev = current($arr);
$grp = array();
$res = array();
foreach ($arr as $v) {
    if ($v === $prev) {
        $grp[] = $v;
    } else {
        $res[] = $grp;
        $grp = array();
    }
    $prev = $v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:53:45.133

您必须自己循环它，找到当前元素`$i`与下一个元素匹配的块，在等式成立时`$j`继续递增`$j`，然后将该部分切成自己的数组[`array_slice()`](http://php.net/array_slice)：

```
$new = array(); $count = count( $old) - 1;
for( $i = 0, $j = 1; $i < $count; $i = $j, $j = $i + 1) {
    while( $old[$i] === $old[$j]) $j++;
    $new[] = array_slice( $old, $i, $j - $i);
} 
```

这[将打印](http://codepad.org/1CJAcqQX)：

```
Array
(
    [0] => Array
        (
            [0] => 1
        )

    [1] => Array
        (
            [0] => 18
            [1] => 18
        )

    [2] => Array
        (
            [0] => 1
            [1] => 1
            [2] => 1
            [3] => 1
            [4] => 1
        )

    [3] => Array
        (
            [0] => 18
            [1] => 18
        )

) 
```

# html - 如何设置这两个横幅？

> ID：11958699
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:41:51.070
> 
> 标签：html, css

我目前正在为一个俱乐部建立一个网站，我需要帮助来修复横幅。有 2 个横幅，第一个横幅将重复几次，第二个横幅将最后显示。例如：

```
[ banner 1 ][ banner 1 ][ banner 1 ][ banner 1 ][ banner 2 ] 
```

横幅 1 基本上是一些会重复的装饰，横幅 2 是标志。

问题是我无法让横幅 #1 停止重复，因此横幅 #2 可以显示。到目前为止，这是我正在使用的 CSS：

```
#banner
{   
    background-image    : url(images/banner1.jpg), url(images/banner2.jpg);
    background-repeat   : repeat-x, no-repeat;
    min-height      : 175px;
} 
```

有没有办法按照我想象的方式去做？我去过这个网站：[http](http://www.css3.info/preview/multiple-backgrounds/) ://www.css3.info/preview/multiple-backgrounds/我想知道我是否不能重复它，也许我可以把一个横幅放在另一个上面。我尝试使用背景位置，但解决方案不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:02:31.717

您必须定义重复元素的宽度：

**HTML：**

```
<div class="banner1"></div><div class="banner2"></div> 
```

**CSS：**

```
.banner1, .banner2 {
    display: inline-block;
    height: 150px;
}
.banner1 {
    width: 75%;
    background: url('http://jsfiddle.net/img/top-bg.png') repeat-x;
}
.banner2 {
    width: 25%;
    background: red;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/vj4q6/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:18:55.530

你可以有两个`divs`有自己背景的

HTML：

```
<div class="banner1">
    <div class="banner2">
    </div>
</div> 
```

CSS：

```
.banner1 {
    width: 200px;
    height:50px;
    background: url('http://jsfiddle.net/img/top-bg.png') repeat-x;
}

.banner2 {
    width:50px;
    float:right;
    height: inherit;
    background-color: red;
} 
```

[jsFiddle](http://jsfiddle.net/jaL5z/)

如果您想要两个 div 并排或一个在另一个上，这取决于您

# c# - 使用 Webdriver 使用 Selenium 超时的最佳方法是什么

> ID：11958701
> 
> 赞同：3
> 
> 时间：2012-08-14T18:41:56.000
> 
> 标签：c#, selenium, webdriver, selenium-webdriver

我遇到了一个问题。我的网页有一个`DropDownList`控件。一旦`DropDownList`值更改（通过选择不同的值），页面就会刷新并呈现内容。

然后我必须`Thread.Sleep(2000);`在它去之前使用 and `FindElement`。

**我的问题：**等待页面加载的最佳方法是什么？

我的代码中有很多实例，`Thread.Sleep(2000)`以至于我开始认为这不是解决问题的最佳方法。

这是我的代码：

```
[TestInitialize()]
public void Setup()
{
    if (BaseIntegrationTest.browserType.Equals(BaseIntegrationTest.IE))
    {
        driver = new InternetExplorerDriver();
    }
    else if (BaseIntegrationTest.browserType.Equals(BaseIntegrationTest.CHROME))
    {
        //driver = new ChromeDriver();
    }
    else if (BaseIntegrationTest.browserType.Equals(BaseIntegrationTest.FIREFOX))
    {
        driver = new FirefoxDriver();
    }
} 
```

第二部分：

```
[TestMethod]
public void testVerifyData()
{
    // ...................
    // ...................
    driver.FindElement(By.XPath("//*[@id='ctl00_NavigationControl1_lnke']")).Click();

    Thread.Sleep(2000);

    //select from the dropdownlist.
    IWebElement catagory = driver.FindElement(By.Id("ctl00_ContentPlaceHolder1_Filter"));
    SelectElement selectCatagory = new SelectElement(catagory);
    selectCatagory.SelectByText("Employee");

    Thread.Sleep(2000);
    // ...................
    // ...................
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T22:07:01.737

Thread.Sleep() 是一种非常不鼓励实现等待的方法

此代码在 selenium 文档[http://seleniumhq.org/docs/04_webdriver_advanced.html中进行了概述](http://seleniumhq.org/docs/04_webdriver_advanced.html)

```
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
IWebElement category = wait.Until<IWebElement>((d) =>
    {
        return d.FindElement(By.Id("ctl00_ContentPlaceHolder1_Filter"));
    }); 
```

这是一个显式等待的示例，其中 selenium 在找到您的元素之前不会执行任何操作

隐式等待的一个示例是：

```
driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10));
IWebElement category = driver.FindElement(By.Id("ctl00_ContentPlaceHolder1_Filter")); 
```

在隐式等待中，驱动程序将等待给定的时间并轮询 DOM 以查找任何不存在的元素。

*编辑*

```
public WaitForElement(string el_id)
{
    WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
    IWebElement category = wait.Until<IWebElement>((d) =>
    {
        return d.FindElement(By.Id(el_id));
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T07:16:52.067

我也通过使用 WebDriverWait 解决了这个问题。

但我设置等到最后一个元素出现（例如：页脚，列表中的最后一项）。

```
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
wait.Until(d => d.FindElement(By.Id("footer")).Displayed); 
```

或者

```
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
wait.Until(d => d.FindElements(By.TagName("li")).Last().Displayed); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-23T17:43:55.653

在某些情况下您确实需要等待，在这种情况下，Task.Delay 方法将提供比 Thread.Sleep 更可预测的结果

Task.Delay(1000).Wait(); // 等待 1 秒

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T19:44:59.160

假设由交互引起的刷新是 Selenium 可以检测到的，那么以下方法可能会满足您的需求：

[等待页面加载](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#waitForPageToLoad%28java.lang.String%29 "等待页面加载")

据我所知，此方法检查浏览器中的状态以查看浏览器是否认为它正在加载某些内容，并等待该状态被清除。然而，这种就绪状态有点陈旧——有很多方法可以动态加载页面或页面的一部分，以至于就绪状态并不总是准确描述正在发生的事情。

如果您知道您的操作会发生什么变化 - 也就是说，如果您知道在与下拉列表交互后，将出现以前不在页面上的特定 UI 元素 - 那么您可能会更好等待那些特定的 UI 元素出现。您可以通过编写一个重复检查[isTextPresent](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#isTextPresent%28java.lang.String%29 "isTextPresent")并以小增量等待的方法来做到这一点，直到达到超时或出现预期的元素。在这些方法中可以使用其他“is X Present”方法，您可以在我链接到的 Selenium 接口的其他地方找到这些方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-04T12:07:29.607

我为自己制作了一个自定义功能，也许它对某人有用：

```
 public static void waitForPageToBeLoaded(WebDriver driver, int time) {

     ExpectedCondition<Boolean> expectation = new
     ExpectedCondition<Boolean>() {     
         public Boolean apply(WebDriver driver) {
             return ((JavascriptExecutor) driver).executeScript("return document.readyState").equals("complete");
            }
     };

     Wait<WebDriver> wait = new WebDriverWait(driver, Long.valueOf(time)); 
     try {
         wait.until(expectation);
     } catch(Throwable error) {
         System.out.println(error);
         mainFunctions.reportFailure("[waitForPageToBeLoaded] Page load took longer than " + time/60 + " min.");
     }
 }  // waitForPageLoaded 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-20T06:04:32.530

如果您想在页面加载或超时过期后获取 html：

```
using (var chromeDriver = new ChromeDriver())
        {
            chromeDriver.Manage().Timeouts().SetPageLoadTimeout(TimeSpan.FromSeconds(30));

            try
            {
                chromeDriver.Navigate().GoToUrl(link);
                return chromeDriver.PageSource;
            }
            catch (WebDriverTimeoutException)
            {
                return chromeDriver.PageSource;
            }
        } 
```

# java - 内部和外部 ChangeEvent（带有更改侦听器的 JSlider）

> ID：11958703
> 
> 赞同：0
> 
> 时间：2012-08-14T18:42:04.487
> 
> 标签：java, swing

据我所知，如果我将 a 添加`ChangeListener`到`JSlider`组件中，则`ChangeEvent`无论上述滑块的值是由程序内部更改还是由用户通过 GUI 在外部更改，都会触发一个事件。

有没有办法只`ChangeListener`识别`JSlider`' 值的外部变化？也就是说，我希望能够在整个程序过程中多次在内部设置滑块的值，而不会触发事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:51:05.003

一个选项是在您的侦听器中保留一个标志，指示接收到的事件是否是外部触发的。

当您更改值时，您首先更新标志的值，避免您的侦听器对您刚刚所做的更改做出反应。之后，您恢复标志的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:52:32.627

无论您在内部还是外部`ChangeEvent`更改值，您总是会触发 a 。`JSlider`您总是可以有一个类成员变量来指示从哪里进行更改...

# matlab - MatLab - 霍纳算法

> ID：11958706
> 
> 赞同：1
> 
> 时间：2012-08-14T18:42:12.093
> 
> 标签：matlab, polynomial-math

我在将霍纳算法的伪代码翻译成 MatLab 中的正确代码时遇到了一些麻烦。我认为我的困惑源于代码假设第一个向量条目可以由 0 引用，而在 MatLab 中，这必须是 1。我试图相应地修改我的代码，但我不明白正常工作。伪代码如下：

```
input n, (a_i, : 0 ≤ i ≤ n), z_0
   for k = 0 to n-1 do
      for j = n-1 to k step -1 do
          a_j = a_j + z_0*a_(j+1)
      end do
end do
output (a_i: 0 ≤ i ≤ n) 
```

这是我在 MatLab 中编写的尝试，其中`a`是表示多项式系数的输入向量：

```
function x = horner(a,z_0)
n = length(a);
for k = 1:n-1
    for j = n-1:-1:k
        a(j) = a(j) + (z_0)*a(j+1);
    end
end
x = a; 
```

`a = [1 -4 7 -5 -2]`我在表示多项式系数的向量上尝试了这个。我也设置了`z_0 = 3`。根据我的书，我应该收到输出 vecor `a = [1 8 25 37 19]`，但我的代码给出了输出向量`a = [-245 -313 -146 -29 -2]`。

如果有人能帮我清理这段代码，我将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:58:46.410

试试这个 - 这`a`是多项式系数的向量，其中 a(1) 作为多项式中最高次数项的系数。如果你的向量是相反的方向，只需设置

```
b = fliplr(a) 
```

并使用 vector 调用该函数`b`。此函数将使用 Horners 算法评估多项式。请注意，这假设`z_0`是您希望评估多项式的​​值，因此返回单个值（不是向量）

```
function x = horner(a,z_0)
n = length(a);
result = a(1);
for j = 2:n
    result = result*z_0 + a(j);
end
x = result; 
```

如果你想传入一个值的向量`z`来评估，这样你就可以同时评估多个点（ 的元素`z`），你可以通过一个向量来传递它们：

```
function x = horner(a,z)
n = length(a);
m = length(z);
result = a(1)*ones(1,m);
for j = 2:n
    result = result.*z + a(j);
end
x = result; 
```

现在返回的`x`将是您的结果向量

# ruby-on-rails - RoR：“用户||= User.new”的含义

> ID：11958708
> 
> 赞同：0
> 
> 时间：2012-08-14T18:42:13.440
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [||=（或等于）在 Ruby 中是什么意思？](https://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby)

[在互联网上，](http://railsapps.github.com/tutorials-rails-bootstrap-devise-cancan.html)我在 Ruby/Rails 中看到了以下语法：

```
user ||= User.new 
```

我是新手，我无法解析这个。有人可以向我解释“||=”运算符的作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:46:01.590

If `user` is already set this does nothing, otherwise it will assign a new `User` object (created with `User.new`).

[According to David A. Black](https://groups.google.com/forum/?fromgroups#!topic/comp.lang.ruby/y1Maaqk_Q7c%5B1-25%5D), author of "The Well-Grounded Rubyist":

> x ||= y means: x || x = y
> 
> The difference is that x ||= y won't complain if x is undefined, whereas if you type x || x = y and there's no x in scope, it will.

For some added details, here's the relevant part of [parse.y](https://github.com/ruby/ruby/blob/trunk/parse.y):

```
| var_lhs tOP_ASGN command_call
{
  /*%%%*/
  value_expr($3);
  if ($1) {
    ID vid = $1->nd_vid;
    if ($2 == tOROP) {
      $1->nd_value = $3;
      $$ = NEW_OP_ASGN_OR(gettable(vid), $1);
      if (is_asgn_or_id(vid)) {
        $$->nd_aid = vid;
      }
    }
    else if ($2 == tANDOP) {
      $1->nd_value = $3;
      $$ = NEW_OP_ASGN_AND(gettable(vid), $1);
    }
    else {
      $$ = $1;
      $$->nd_value = NEW_CALL(gettable(vid), $2, NEW_LIST($3));
    }
  } 
```

`NEW_OP_ASGN_OR` is defined in `node.h`:

```
#define NEW_OP_ASGN_OR(i,val) NEW_NODE(NODE_OP_ASGN_OR,i,val,0) 
```

`NEW_NODE` looks like this:

```
#define NEW_NODE(t,a0,a1,a2) rb_node_newnode((t),(VALUE)(a0),(VALUE)(a1),(VALUE)(a2)) 
```

Looking for `NODE_OP_ASGN_OR` leads to `compile.c`, where the interesting part looks like this:

```
case NODE_OP_ASGN_OR:{
   LABEL *lfin = NEW_LABEL(nd_line(node));
   LABEL *lassign;

   if (nd_type(node) == NODE_OP_ASGN_OR) {
     LABEL *lfinish[2];
     lfinish[0] = lfin;
     lfinish[1] = 0;
     defined_expr(iseq, ret, node->nd_head, lfinish, Qfalse);
     lassign = lfinish[1];
     if (!lassign) {
       lassign = NEW_LABEL(nd_line(node));
     }
     ADD_INSNL(ret, nd_line(node), branchunless, lassign);
   }
   else {
     lassign = NEW_LABEL(nd_line(node));
   }

   COMPILE(ret, "NODE_OP_ASGN_AND/OR#nd_head", node->nd_head);
   ADD_INSN(ret, nd_line(node), dup);

   if (nd_type(node) == NODE_OP_ASGN_AND) {
     ADD_INSNL(ret, nd_line(node), branchunless, lfin);
   }
   else {
     ADD_INSNL(ret, nd_line(node), branchif, lfin);
   }

   ADD_INSN(ret, nd_line(node), pop);
   ADD_LABEL(ret, lassign);
   COMPILE(ret, "NODE_OP_ASGN_AND/OR#nd_value", node->nd_value);
   ADD_LABEL(ret, lfin);

   if (poped) {
     /* we can apply more optimize */
     ADD_INSN(ret, nd_line(node), pop);
   }
   break;
 } 
```

I think this is more than I ever wanted to know about assignment in Ruby, but it was rather entertaining to look this up.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T18:46:58.163

It's basically a shortcut for:

```
user = user || User.new 
```

or for better understanding:

```
if user.nil?
    user = User.new
end 
```

I bet you've seen similar notations before with operators like '+'

```
i += 1 
```

which can also be written out as:

```
i = i + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:47:48.213

该语句等价于

```
user = user || User.new 
```

这相当于

```
user = user ? user : User.new 
```

当且仅当为*nil*时，它会将 的值分配给`User.new`变量。如果不是，则 的内容将保持不变。`user``user`*`user`*

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T18:51:37.543

它相当于`user = user || User.new`.

这取决于操作员的短路行为`||`。如果表达式的左侧为真，那么无论右侧是什么，整个表达式都为真，因此运算符“短路”并停止计算。而不是返回一个布尔值“真”，该`||`运算符返回它评估的最后一个值。

因此，`||=`对于分配默认值很有用。如果`user`有一个值，则`user || User.new`评估为，`user`否则评估为`User.new`哪个是默认值。

一个等效的块是：

```
if user
    user = user
else 
    user = User.new
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T18:45:49.867

The statement set `user` to itself (if it is already an existing object) or `User.new` (which will create a new user if user is null). It's a logical OR that will avoid having an assigned null user object.

The code is a shorthand for

```
user = user || User.new 
```

If user is null, then user will be set to `User.new`.*

# sql-server - 当我有大量 ID 列表时，如何在 SQL Server 中创建临时表

> ID：11958710
> 
> 赞同：7
> 
> 时间：2012-08-14T18:42:13.707
> 
> 标签：sql-server, database, temp-tables

我有一个应该放入临时表的原始 ID 列表。我不确定这在 SQL Server 中是如何工作的：

我知道一般格式：

```
select PID into #myPIDs
from ... ? 
```

我已经有一个我要使用的大约 30 个 PID 的列表。它们看起来像这样：

```
'U388279963',
'U388631403',
'U389925814' 
```

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T18:51:30.790

您的格式将适用于为一个插入创建一个新的临时表。如果您需要复制和粘贴您的 ID，则以下操作将起作用。

```
CREATE TABLE #myPIDs
(
     PID VARCHAR(30)
);

INSERT INTO #myPIDs
VALUES
(....),
(....); 
```

复制并粘贴您的 PID，并使用正则表达式查找和替换以使用选中的正则表达式选项替换每一行。删除最后一个'，'你很好。

> 查找 - ^{U:z+}$
> 
> 替换 - ('\1'),\n

或者，您可以让 sql server 从系统上的文件中读取您的 id。如果您详细说明您的需求，我可以给您更好的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T18:45:34.283

```
insert into #myPIDs (ID) 
select 'U388279963'
union 
select 'U388631403'
union 
select 'U389925814' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-19T14:00:30.833

如果您的原始表（来自女巫的 ID）是可访问的，并且每个 ID 总是有一行：

```
SELECT originalTable.ID
INTO #myPIDs
FROM originalTable
WHERE originalTable.ID IN ('U388279963', 'U388631403', 'U389925814') 
```

# php - 迄今为止添加 X 天，不包括周末

> ID：11958712
> 
> 赞同：3
> 
> 时间：2012-08-14T18:42:25.373
> 
> 标签：php, date

我目前正在开发一个在线订阅应用程序。我在用户选择订阅天数然后选择开始日期的部分遇到了一些挑战。然后 PHP 应用程序应该能够计算不包括周末的结束日期。

```
<form method="post">
    <input name="startdate" type="text" />
    <input name="numberofdays" type="text" />
</form> 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T18:51:53.443

取决于`startdate`发送方式，但假设您使用的是 Ymd，您可以使用[DateTime](http://uk.php.net/DateTime)

例如：

```
<?php 

    $_POST['startdate'] = '2012-08-14';
    $_POST['numberofdays'] = 10;

    $d = new DateTime( $_POST['startdate'] );
    $t = $d->getTimestamp();

    // loop for X days
    for($i=0; $i<$_POST['numberofdays']; $i++){

        // add 1 day to timestamp
        $addDay = 86400;

        // get what day it is next day
        $nextDay = date('w', ($t+$addDay));

        // if it's Saturday or Sunday get $i-1
        if($nextDay == 0 || $nextDay == 6) {
            $i--;
        }

        // modify timestamp, add 1 day
        $t = $t+$addDay;
    }

    $d->setTimestamp($t);

    echo $d->format( 'Y-m-d' ). "\n";

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-07T08:20:14.807

相同的结果，更短的版本：

```
function addDays($days,$format="Y-m-d"){

    for($i=0;$i<$days;$i++){
        $day = date('N',strtotime("+".($i+1)."day"));
        if($day>5)
            $days++;
    }
    return date($format,strtotime("+$i day"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-26T19:15:46.037

我今天开发了一个新功能，可以帮助遇到此类问题的人。

```
function sumDays($days = 0, $format = 'd/m/Y') {
    $incrementing = $days > 0;
    $days         = abs($days);
    $actualDate   = date('Y-m-d');

    while ($days > 0) {
        $tsDate    = strtotime($actualDate . ' ' . ($incrementing ? '+' : '-') . ' 1 days');
        $actualDate = date('Y-m-d', $tsDate);

        if (date('N', $tsDate) < 6) {
            $days--;
        }
    }

    return date($format, strtotime($actualDate));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-17T07:57:24.483

> **我今天开发了一个新功能，可以帮助遇到此类问题的人。取决于 startdate 的发送方式，但假设您使用的是 Ymd，您可以使用 DateTime**

```
<?php  public static function getOrderEndDate( $start_date, $orderDaysCode ){

    $saturday_off = false;
    if( $orderDaysCode == 'meal_monthly_6' ) { $orderDays = 24; }
    elseif( $orderDaysCode == 'meal_monthly_5' ) {
        $orderDays = 20;
        $saturday_off = true;
    }elseif( $orderDaysCode == 'meal_weekly' ) {
        $orderDays = 5;
        $saturday_off = true;
    }
    else{ $orderDays = 1; }   // Daily Meal

    $formatted_date = new DateTime( $start_date );

    $date_timestamp = $formatted_date->getTimestamp();
    // loop for X days
    for( $i = 0; $i < ( $orderDays - 1 ); $i++ ) {
        // get what day it is next day
        $nextDay = date('w', strtotime('+1day', $date_timestamp) );
        // if it's Sunday or Saturday get $i-1
        if( $nextDay == 0 || ( $nextDay == 6 && $saturday_off ) ) { $i--; }
        // modify timestamp, add 1 day
        $date_timestamp = strtotime('+1day', $date_timestamp);
    }

    $formatted_date->setTimestamp($date_timestamp);

    return $formatted_date->format( 'Y-m-d' );
}

$orderEndDate = getOrderEndDate( '2020-06-17', 'meal_monthly_6' ); ?> 
```

# wix - 为什么 FileInUse 的 Wix session.Message 显示为空？

> ID：11958714
> 
> 赞同：2
> 
> 时间：2012-08-14T18:42:32.787
> 
> 标签：wix, windows-installer, wix3.5

我有一个 Wix 自定义操作，它查找 Outlook 并提示用户将其杀死。我不想自己杀死 OL，但希望用户这样做。这是我的自定义操作：

```
[CustomAction]
    public static ActionResult PromptToCloseOutlook(Session session)
    {
        session.Log("Detecting running instances of Microsoft Outlook...");
        ActionResult retVal = ActionResult.Success;

        Process outlook;
        while (null != (outlook = Process.GetProcessesByName("outlook").FirstOrDefault()))
        {
            session.Log("Microsoft Outlook is running.");

            var result = session.Message(
                // See: http://msdn.microsoft.com/en-us/library/windows/desktop/aa371614(v=vs.85).aspx
                InstallMessage.FilesInUse,
                new Record(null, "outlook.exe", outlook.Id)
            );

            session.Log("User selected option:" + result);

            if (result == MessageResult.Cancel)
            {
                session.Log("User does not wish to close Outlook at this time.");
                retVal = ActionResult.UserExit;
            }
            else if (result == MessageResult.Ignore)
            {
                session.Log("User wished to ignore and proceed.");
                break;
            }
        }
        return retVal;
    } 
```

我将此调用为：

```
<Custom Action="CA.PromptToCloseOutlook" Before="InstallValidate" /> 
```

但是，当它在 Win7 上运行时，它会显示一个空白窗口（但正确地等到 OL 关闭） ![空窗](../Images/0cdb1088179b93aee621edd29056037b.png)

在 WinXP 上，循环永远运行，说 PID 无效。因为，我使用正在运行的实例中的 PID，所以我不确定这怎么可能。

任何想法代码有什么问题？

# mysql - 参考上面的单元格

> ID：11958719
> 
> 赞同：1
> 
> 时间：2012-08-14T18:43:00.437
> 
> 标签：mysql, cell

我需要有关引用上述单元格的 mysql 查询的帮助。
例如，在下表中：

```
primary key(id)     day             count           percentage change
1                  monday             1               0  
2                  tuesday            2              (1-0)*100%=100%  
3                  wednesday          5              (2-1)*100%=100%  
4                  thursday           9              (5-2)*100%=300%  
5                  friday             27             (9-5)*100%=400% 
```

百分比变化结果基于计数列前两天的结果。有没有办法合并主键（id）来引用“上面”的单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:54:57.513

没有简单的方法。您需要使用自联接。

```
select t.*,
       (coalesce(t_1.count, 0) - coalesce(t_2.count, 0)) * 100.0
from t left outer join
     t t_1
     on t.id = t_1.id + 1 left outer join
     t t_2
     on t.id = t_2.id + 2 
```

确保所有原始`left outer join`行都保留，即使没有前面的 id。

这是有效的，因为 id 是连续的。如果 id 不是连续的，并且计数单调增加，您可以使用相关子查询执行此操作：

```
select t.*,
       (coalesce((select max(`count`) as val
                  from table1 t_1
                  where t_1.`count` < t.`count`
                 ), 0)
       ) -
       (coalesce((select max(`count`)
                  from table1 t_2
                  where t_2.`count` < (select max(`count`) from table1 t_1 where t_1.`count` < t.`count`)
                 ), 0)
       )
from table1 t 
```

注意：如果两个值连续相同，这将无法正常工作。为此，您需要使用 id 代替：

```
select t.*,
       (coalesce((select max(`count`) as val
                  from table1 t_1
                  where t_1.`id` < t.`id`
                 ), 0)
       ) -
       (coalesce((select max(`count`)
                  from table1 t_2
                  where t_2.`id` < (select max(`id`) from table1 t_1 where t_1.`id` < t.`id`)
                 ), 0)
       )
from table1 t 
```

如果计数没有增加，那么您必须获取 id，然后再次加入值。多么有趣！这是代码：

```
select t.*,
       coalesce(t1.count, 0) - coalesce(t2.count, 0)
from (select t.*,
             (select max(`id`) as id1 from table1 t_1 where t_1.`id` < t.`id`
             ) as id1,
             (select max(`count`) from table1 t_2
              where t_2.`id` < (select max(`id`) from table1 t_1 where t_1.`id` < t.`id`)
             ) id2
      from table1 t
     ) t left outer join
     table1 t1
     on t.id1 = t1.id left outer join
     table1 t2
     on t.id2 = t2.id 
```

# git - 在 Git 中丢弃更改的正确方法

> ID：11958723
> 
> 赞同：10
> 
> 时间：2012-08-14T18:43:17.620
> 
> 标签：git, branch, rollback, git-reset

我见过许多使用 Git 丢弃更改/恢复到先前提交的不同方法。我通常可以弄清楚哪种方法适合我的情况，但在此过程中，我对不同的方法感到非常困惑。最近我试图撤消一些文件重命名，无论我多么努力地尝试`git checkout`旧版本的文件，我仍然无法恢复我的旧文件。

我正在寻找有关使用哪种方法以及原因的说明。这是我对几种方法的理解。我意识到答案可能与上下文相关，但我想尝试找出哪些上下文需要哪些方法。

* * *

1)**`git checkout -- .`**

*   用于检出最新版本的文件，将覆盖旧文件但不会影响已删除、重命名或新文件。

2）**`git stash save --keep-index`**其次是**`git stash drop`**

*   隐藏未提交的文件，然后完全删除它们。如果您已经提交了想要保留的更改和想要丢弃的未提交/未暂存的更改，那么这是一种很好的方法。

3)**`git reset --hard`**

*   清除自上次提交以来的所有内容，包括文件重命名、删除和添加。

* * *

这是我目前对我的选择的理解。你会对我的解释有什么改变吗？我也不确定何时使用 a`git revert`代替上述命令。

来源帖子：

*   [似乎无法丢弃 Git 中的更改](https://stackoverflow.com/questions/1575682/cant-seem-to-discard-changes-in-git)
*   [如何丢弃 Git 中未暂存的更改？](https://stackoverflow.com/questions/52704/how-do-you-discard-unstaged-changes-in-git)
*   [GIT 放弃我对分支所做的任何更改](https://stackoverflow.com/questions/4830056/git-discard-any-changes-ive-made-to-a-branch)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T19:16:06.950

```
git stash -u 
```

是首选方式。不要掉。他们不会被推。如果您确实删除了您发现的重要内容，您可以将它们取回。

你的其他选择是破坏性的。

Revert 是向历史添加一个新的提交，该提交应用与提交引入的补丁相反。您在此处的选择是针对您想要对尚未成为历史一部分的工作树中的更改执行的操作。Revert 适用于作为历史一部分的已提交更改。

# jquery - 用jquery比较两个值

> ID：11958725
> 
> 赞同：0
> 
> 时间：2012-08-14T18:43:22.833
> 
> 标签：jquery

我正在尝试使用**JQuery**检查两个文本字段中的值。我需要比较美元金额以查看新输入的值是否大于原始金额。结果完全不是我所期待的。第一个值通过 PHP 预先填充`OrigAMTVal`，第二个值`amtTOrefundVal`由用户输入。这是代码：

```
$('#doREFUND').on("click", function() {
    var amtTOrefundVal = $('.amtTOrefund').val();
    var OrigAMTVal     = $('.CustomerOrderTotal').val();

    var doamtTOrefund  = parseInt(amtTOrefundVal).toFixed(2);
    var doOrigAMT      = parseInt(OrigAMTVal).toFixed(2);

    if( doamtTOrefund > doOrigAMT ) {    
        var balance = OrigAMTVal - doamtTOrefund;
        alert("BAD: $" + balance + " Over Limit");
    } else {
        var balance = OrigAMTVal - doamtTOrefund;
        alert("GOOD: $" + balance + " Left to Go");
    }
}); 
```

这是一个小提琴：http: [//jsfiddle.net/dM2Fr/2/](http://jsfiddle.net/dM2Fr/2/)

我知道我错过了一些东西，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:52:18.387

`toFixed`返回一个字符串，只需比较没有它的值。

问题是您正在比较字符串并且`"174 > "1000"`是真的。

PS 你应该使用`parseInt(value, 10)`.

# python - python 正则表达式 findall 和多行

> ID：11958728
> 
> 赞同：16
> 
> 时间：2012-08-14T18:43:28.603
> 
> 标签：python, regex

蟒蛇2.6.8

```
s= '''
foo 
bar
baz
'''
>>>re.findall(r'^\S*',s,re.MULTILINE)
['', 'foo', 'bar', 'baz', '']
>>>ptrn = re.compile(r'^\S*',re.MULTILINE)
>>>ptrn.findall(s)
['', 'foo', 'bar', 'baz', '']
>>>ptrn.findall(s,re.MULTILINE)
['baz', ''] 
```

为什么在 findall 中使用 MULTILINE 标志有区别？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-14T18:47:51.367

在正则表达式对象上调用`findall()`方法时，第二个参数不是实参`flags`（因为在编译正则表达式时已经使用过），而是实参`pos`，告诉正则表达式引擎在字符串中的哪个点开始匹配。

`re.MULTILINE`只是一个整数（恰好是`8`）。

请参阅[文档](http://docs.python.org/library/re.html#re.RegexObject.findall)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T18:49:14.190

因为`findall`编译对象的方法`ptrn`不带 MULTILINE 参数。这需要一个`position`论据。

见这里：[http ://docs.python.org/library/re.html#re.RegexObject.findall](http://docs.python.org/library/re.html#re.RegexObject.findall)

MULTILINE 说明符仅在您调用`re.compile()`结果`ptrn`对象已经“知道”它是时使用`MULTILINE`。

# linux - 管道文件内容到conky？

> ID：11958729
> 
> 赞同：2
> 
> 时间：2012-08-14T18:43:43.430
> 
> 标签：linux, conky

我一直在写一个脚本来检查天气。该脚本很好，并且作为 cronjob 工作得很好，但是，我现在正试图将脚本（今天的天气预报）的结果显示在 conky 中。

我有一个 python-weather 脚本写入的文件“weather-outside”，然后我将它添加到 conkyrc 文件中：

```
${color grey}Weather:${scroll 16 $execi 3600 cat $/home/User/Desktop/misc./weather-outside | fold} 
```

execi命令**应该**以设置为 3600secs 的间隔运行，但是，这是在运行 conky 之后出现的错误消息：

```
Conky: execi needs arguments
Conky: Error destroying thread
***** Imlib2 Developer Warning ***** :
    This program is calling the Imlib call:

    imlib_context_free();

    With the parameter:

    context

    being NULL. Please fix your program. 
```

我已将**execi**更改为**exec**但是，然后实际行 'cat $home/User/Desktop/misc./weather-outside | fold' 在 conky 上滚动而不是该文件中的文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:51:04.317

不要使用文件来获取在 conky 中显示的信息。我不知道你是如何在 Python 中做到这一点的，但是当我编写 Java 应用程序以让 Twitter 提要在 conky 中显示时，我直接将它打印到控制台并使用了 execi。这就是我使用它的方式

```
${execi 600 java -cp /home/aman/java/classes MyApp} 
```

你的文件路径对我来说也很奇怪。

这样您就可以保持天气信息的更新，而无需更新文本文件。

# wordpress - Wordpress 页脚问题（出现随机文本）

> ID：11958732
> 
> 赞同：0
> 
> 时间：2012-08-14T18:43:54.257
> 
> 标签：wordpress

好吧，今天早上我醒来看到这个我一直在研究的 wordpress 时突然出现在我的 wordpress 的页脚中。它导致每个页面多次复制自己。有谁知道这可能是什么？

**启动函数 wbga_insert_html_once: head, Footer hooked: HTML 插入: Location is HEAD 启动函数 wbga_get_option: footer_hooked wbga_options: array ( 'internal_domains' => 'beta.fundly.com', 'account_id' => 'UA-18454942-1', 'enable_tracker' => true, 'track_adm_pages' => false, 'ignore_users' => true, 'max_user_level' => '8', 'footer_hooked' => false, 'filter_content' => true, 'filter_comments' => true , 'filter_comment_authors' => true, 'track_ext_links' => true, 'prefix_ext_links' => '/out/', 'track_files' => true, 'prefix_file_links' => '/download/', 'track_extensions' => ' gif,jpg,jpeg,bmp,png,pdf,mp3,wav,phps,zip,gz,tar,rar,jar,exe,pps,ppt,xls,doc', 'track_mail_links' => true, 'prefix_mail_links' => '/mailto/', 'debug' => true, 'advanced_config' => false, 'tracking_type' => '1', 'fb_cam_tracking' => false, ) 结束函数 wbga_get_option: footer_hooked () 由于页脚未钩住而插入 HTML 结束函数 wbga_insert_html 结束函数 wbga_wp_head_track: 开始函数 wbga_filter:footer_hooked () 插入 HTML，因为页脚没有被钩住 End function wbga_insert_html Ending function wbga_wp_head_track: Start function wbga_filter:footer_hooked () 插入 HTML，因为页脚没有被钩住 End function wbga_insert_html Ending function wbga_wp_head_track: Start function wbga_filter:**

问题链接：http: [//beta.fundly.com/features](http://beta.fundly.com/features)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:52:02.070

这是由您使用的 Web Ninja Google Analytics 插件引起的。如果您有 home.php 或 front-page.php，您能否评论一下带有代码的 pastebin 的链接？如果您没有 home.php 或 front-page.php，请使用指向包含您的 index.php 和 footer.php 内容的 pastebin 的链接发表评论。

# magento - Magento 开发应用程序在更新后重定向到生产 URL。

> ID：11958737
> 
> 赞同：0
> 
> 时间：2012-08-14T18:44:05.163
> 
> 标签：magento, caching, redirect

背景：我有一个我们一直在开发的 dev magento 站点，并且有一个很大的更新，我们希望将其从本地数据库副本推送到 dev。在复制数据库并将更改推送到 magento 文件后，我的开发站点将重定向到 localhost。

我已经尝试了我能想到的一切，但我仍然缺少一些东西。

我试过了：

*   将安全和不安全站点的 db 值编辑为 dev 值
*   删除 magento var/cache 内容，重新启动 php
*   为“localhost/[site]”的所有实例查找 magento 目录，仅找到的实例位于 var/cache 中，显然在删除后不断重新填充不正确的值
*   在 core_config 表中禁用 SEO 重定向和整页缓存并刷新缓存并重新启动 php
*   明确检查 web/.htaccess 文件中是否有提及 localhost，但没有发现
*   检查了 nginx vhost，没有提到 localhost

我的想法已经用完了，如果有任何关于下一步看哪里的建议，我将不胜感激。目前我想知道是否有一个替代缓存位置保存旧值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:07:39.980

您可能需要刷新其他缓存（在后端可用）。

要务实地做到这一点，请参见[此处](http://www.yameveo.com/development/php/flush-every-magento-cache-from-the-command-line)。

逾越节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:41:09.247

重新启动服务器解决了这个问题。

我相信块对象被缓存在 memcached 中并且重新启动清除了这些。

# regex - 使用正则表达式删除小数点

> ID：11958738
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:44:06.933
> 
> 标签：regex, bash, unix, sed, awk

我有大约 5,000 个文件需要纠正错误。每个文件都有一个类似于以下内容的部分：

```
<rating system="nl-movies">16.0</rating>
<rating system="ro-movies">8.0</rating>

<rating *something*>A.0</rating> 
```

我需要`.0`从每一个中删除 ，以便文本看起来像：

```
<rating system="nl-movies">16</rating>
<rating system="ro-movies">8</rating>

<rating *something*>A</rating> 
```

换句话说，我需要替换`.0</rating>`为`</rating>`. 我将如何在 unix 中执行此操作并使更改沿文件夹结构递归？

感谢所有的帮助：这就是最终的工作：

```
find ./ -type f -name '*.xml' -exec sed -i 's/\.0<\/rating>/<\/rating>/g' {} \; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:48:14.310

### 替换所有尾随小数

如果要替换所有尾随小数，而不仅仅是以 结尾的小数，`.0`则可以使用此表达式。

```
sed 's/\.[[:digit:]]\+</</' /tmp/foo 
```

### 仅替换 .0

如果您只想删除 .0 而不是其他小数，那么您可以更具体。例如：

```
sed 's/\.0</</' /tmp/foo 
```

在这种情况下，它将从 8.0 中删除小数点，但不会从 8.1 中删除。如果你想处理像“B.6”这样的情况，你可能需要做一些额外的调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:52:19.450

像下面这样的东西应该为你做这个

```
find /some/path -type f | xargs sed -i 's/\.0\(<\/rating>\)/\1/g' 
```

替换为您要开始替换的基本目录的路径，如果所有文件都具有相同的后缀`/some/path`，您可能还想`-name *.xml`在命令中添加类似的内容。`find`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:10:56.240

单个文件的安全解决方案是：

```
sed -ri 's/(<rating[^>]*>[^.<]+)\.0(<\/rating>)/\1\2/g' file.txt 
```

对于目录中的多个文件`/path`：

```
find /path -name *.txt | xargs sed -ri 's/(<rating[^>]*>[^.<]+)\.0(<\/rating>)/\1\2/g' 
```

# objective-c - 我应该如何通过电子邮件发送我自己格式的文件，我应该怎么做才能在我自己的 iOS 5 应用程序中打开它？

> ID：11958742
> 
> 赞同：1
> 
> 时间：2012-08-14T18:44:30.103
> 
> 标签：objective-c, ios, email, mime-types

我正在使用 MIME 类型“application/tfk”发送我的文件，我在我的 Info.plist 中写了这个：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>My document</string>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>tfk</string>
        </array>
        <key>CFBundleTypeMIMETypes</key>
        <array>
            <string>application/tfk</string>
        </array>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.dmm.tfk</string>
        </array>
    </dict>
</array> 
```

但它不工作。我的应用程序不在邮件应用程序的列表中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:23:02.423

我相信你也需要申报尿路感染。这是有关[统一类型标识符](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_declare/understand_utis_declare.html)的文档。

这是您应该添加的示例：

```
<key>UTExportedTypeDeclarations</key>
    <array>
        <dict>
            <key>UTTypeConformsTo</key>
            <array>
                <string></string>
            </array>
            <key>UTTypeDescription</key>
            <string>My document</string>
            <key>UTTypeIdentifier</key>
            <string>com.dmm.tfk</string>
            <key>UTTypeTagSpecification</key>
            <dict>
                <key>public.filename-extension</key>
                <array>
                    <string>tfk</string>
                    <string>TFK</string>
                </array>
                <key>public.mime-type</key>
                <string>application/tfk</string>
            </dict>
        </dict>
    </array> 
```

不确定这是否就是您所需要的，但是一旦您使用它，它就会将launchOptions 发送到您的AppDelegate。文件URL 将作为您`UIApplicationLaunchOptionsURLKey`的`launchOptions`. 然后，您可以使用以下 URL 从该 URL 中提取文件数据：。希望有帮助！`application:didFinishLaunchingWithOptions:``AppDelegate``NSData dataWithContentsOfURL:`

# .net - Change the size of the button with size of the window in vb.net

> ID：11958745
> 
> 赞同：1
> 
> 时间：2012-05-15T06:57:26.923
> 
> 标签：.net, winforms, visual-studio-2010, resize

How do I connect the size of any button in the form to the size of the window so that it would change proportionally to the size of the window?

I went through these:

1.  [How to: Anchor Controls on Windows Forms](http://msdn.microsoft.com/en-us/library/8y52cxte%28v=vs.80%29.aspx)
2.  [AutoSize Property Overview](http://msdn.microsoft.com/en-us/library/ms171729%28v=vs.80%29.aspx)

All the buttons I had on the window I applied proper anchoring and set auto size to true, but as I increase the size of the window, the size of the buttons doesn't increase with them.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:03:55.330

You'll want to set the `Anchor` property to match what you're trying to accomplish. If you want the width to update, set it to 'Left,Right'; for height, set it to 'Top,Bottom'.

The `AutoSize` property just tells the control to resize to fit **it's own content**, so that's not really applicable to what you're trying to do. Setting the `AutoSize` property to true overrides/cancels out the resizing that would happen with the correct anchoring.

# javascript - 主干.js：覆盖 toJSON

> ID：11958747
> 
> 赞同：3
> 
> 时间：2012-08-14T18:44:51.360
> 
> 标签：javascript, json, backbone.js, underscore.js

我正在尝试在 Backbone.Model 中实现某种嵌套集合

为此，我必须覆盖解析服务器响应并将数组包装到集合中的适配器函数，以及在没有任何帮助方法的情况下序列化整个对象的函数。我对第二个有问题。

```
var Model = Backbone.Model.extend({

    urlRoot: "/model",

    idAttribute: "_id",

    // this wraps the arrays in the server response into a backbone  collection
    parse: function(resp, xhr) {
        $.each(resp, function(key, value) {
            if (_.isArray(value)) {
                resp[key] = new Backbone.Collection(value);
            } 
        });
        return resp;
    },

    // serializes the data without any helper methods
    toJSON: function() {
        // clone all attributes
        var attributes = _.clone(this.attributes);

        // go through each attribute
        $.each(attributes, function(key, value) {
            // check if we have some nested object with a toJSON method
            if (_.has(value, 'toJSON')) {
                // execute toJSON and overwrite the value in attributes
                attributes[key] = value.toJSON();
            } 
        });

        return attributes;
    }

}); 
```

问题现在出现在 toJSON 的第二部分。由于某些原因

```
_.has(value, 'toJSON') !== true 
```

不返回真

有人可以告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:04:53.977

[下划线是`has`](http://underscorejs.org/#has)这样做的：

> **拥有** `_.has(object, key)`
> 
> 对象是否包含给定的键？与 相同`object.hasOwnProperty(key)`，但使用对该`hasOwnProperty`函数的安全引用，以防它被意外覆盖。

但是您`value`将没有`toJSON`属性，因为`toJSON`来自原型（请参阅[http://jsfiddle.net/ambiguous/x6577/](http://jsfiddle.net/ambiguous/x6577/)）。

您应该`_(value.toJSON).isFunction()`改用：

```
if(_(value.toJSON).isFunction()) {
    // execute toJSON and overwrite the value in attributes
    attributes[key] = value.toJSON();
} 
```

# r - R：如何计算 1,5*IQR 晶须的值

> ID：11958749
> 
> 赞同：3
> 
> 时间：2012-08-14T18:44:53.477
> 
> 标签：r, statistics, boxplot

如何计算 1,5×IQR 的上下边框的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T18:46:25.247

您可以使用以下`boxplot.stats()`功能`boxplot()`：

```
R> boxplot.stats(rnorm(100))
$stats
[1] -2.3865817 -0.7195878  0.0889332  0.6237745  2.3702410

$n
[1] 100

$conf
[1] -0.123318  0.301184

$out
numeric(0)

R> 
```

它被记录在案：

> 价值：
> 
> ```
>  List with named components as follows: 
> ```
> 
> stats：长度为 5 的向量，包含下胡须的极值、下“铰链”、中值、上“铰链”和上胡须的极值。
> 
> ```
>  n: the number of non-‘NA’ observations in the sample.
> 
> conf: the lower and upper extremes of the ‘notch’ (‘if(do.conf)’).
>       See the details.
> 
>  out: the values of any data points which lie beyond the extremes
>       of the whiskers (‘if(do.out)’).
>  Note that ‘$stats’ and ‘$conf’ are sorted in _in_creasing order,
>  unlike S, and that ‘$n’ and ‘$out’ include any ‘+- Inf’ values. 
> ```

# windows - windows驱动程序可以在没有客户端的情况下运行吗？

> ID：11958751
> 
> 赞同：1
> 
> 时间：2012-08-14T18:45:10.727
> 
> 标签：windows, driver, hid

是否可以编写一个 HID 驱动程序，从设备输入执行某些操作，而不需要用户层中的应用程序？

[Microsoft 文档](http://msdn.microsoft.com/en-us/library/jj126193%28v=vs.85%29)描述了用户层中的客户端应用程序通过 HID.dll 与内核中的 HID 体系结构交互。当没有客户端存在时，内核级驱动程序代码是否仍然运行？

如果可能，允许哪些类型的操作？比如说，驱动程序可以将来自设备的信息通过 UDP 流传输吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:34:18.177

是的。如果您不能从中断例程中完成您需要的所有操作，内核模式驱动程序可以在启动时（即，从[DriverEntry](http://msdn.microsoft.com/en-us/library/ff544113%28v=vs.85%29)）使用[PsCreateSystemThread](http://msdn.microsoft.com/en-us/library/ff559932%28v=vs.85%29)启动一个或多个系统线程，然后充当它自己的客户端。

当然，您只能执行内核模式下可能执行的操作。对于网络操作，可以使用[Winsock 内核](http://msdn.microsoft.com/en-us/library/ff556958%28v=vs.85%29)API。从文档中并不完全清楚该接口是否适用于所有驱动程序或仅适用于网络驱动程序，但如有必要，您始终可以在您自己的驱动程序旁边安装网络过滤器驱动程序。

但是请注意，安装系统服务以充当用户模式组件可能更容易。[您应该能够从此处所述](http://msdn.microsoft.com/en-us/library/ff728854%28v=vs.85%29)的特定于设备的共同安装程序执行此操作。

# c# - AsParallel 使 MonoTouch 应用程序崩溃

> ID：11958754
> 
> 赞同：5
> 
> 时间：2012-08-14T18:45:23.440
> 
> 标签：c#, xamarin.ios, task-parallel-library, plinq

MonoTouch在其网站上通过以下代码片段[宣传](http://xamarin.com/monotouch/)支持：`AsParallel`

```
from item in items.AsParallel ()
   let result = DoExpensiveWork (item)
   select result; 
```

但是，即使是一个微不足道的示例也会使我的应用程序崩溃：

```
 var items = new [] { 1, 2, 3 };
 var twice = (
        from x in items.AsParallel()
        select 2 * x
    ).ToArray(); 
```

![System.ExecutionEngineException 已被抛出。 尝试在使用 --仅 aot。](../Images/2be55bb196fc344aa2a68ae0f4223d48.png)

我知道 MonoTouch 不能处理虚拟泛型方法，但 PLINQ 不应该工作吗？
我在做什么错了？

MonoTouch 版本是 5.3.5。

同样适用于`Parallel.ForEach`：

```
System.AggregateException: One or more errors occured ---> System.Exception:
Attempting to JIT compile method 'System.Threading.Tasks.Parallel:<ForEach`1>m__36<int> ()' while running with --aot-only.
See http://docs.xamarin.com/ios/about/limitations for more information. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:12:57.537

[这是 MonoTouch 和泛型的一个已知限制](http://docs.xamarin.com/ios/about/limitations#Limited_Generics_Support)- 在这种情况下，这是因为您正在使用结构。

如果您改用对象，它应该可以工作：

```
var items = new object [] { 1, 2, 3 };
var twice = (
    from x in items.AsParallel()
    select 2 * x
).ToArray(); 
```

我们正在努力修复其中的一些限制，因此如果您可以提交带有示例项目的错误报告，以便我们查看是否有可能在当天实际修复此案例，那就太好了。

# c++ - do i need to traverse both subtrees for computing, the root to leaf sum, to a given value?

> ID：11958765
> 
> 赞同：0
> 
> 时间：2012-08-14T18:46:15.890
> 
> 标签：c++, recursion, tree, binary-tree

This is the problem statement:

"Given a tree and a sum, return true if there is a path from the root down to a leaf, such that adding up all the values along the path equals the given sum."

I implemented it like this:

```
int hasPathSum(Node* node, int sum) {
    if(node == NULL)
        return sum == 0;

    int diff = sum - node->data;

    if(diff < 0) return 0;

    if(diff == 0)
        return node->left == NULL && node->right == NULL ? 1 : 0;

    if(diff < node->data)
        return hasPathSum(node->left, diff);
    else
        return hasPathSum(node->right, diff);
} 
```

I only traverse 1 sub-tree and not both, depending on the difference of `(sum - node->data)`.

However, the recommended solution required traversing both the subtrees like this:

```
int hasPathSum(Node* node, int sum) { 
  // return true if we run out of tree and sum==0 
  if (node == NULL) { 
    return(sum == 0); 
  } 
  else { 
  // otherwise check both subtrees 
    int subSum = sum - node->data; 
    return(hasPathSum(node->left, subSum) || 
           hasPathSum(node->right, subSum)); 
  } 
} 
```

I don't see why do we have to traverse both the subtrees ?

Here is the source of the problem: [Problem 7](http://cslibrary.stanford.edu/110/BinaryTrees.html)

**EDIT**:

Bad assumption on my part that the tree is a BST. Its just a binary tree.

However, if it were a BST, I'd like to hear some feedback on my implementation ? Would it not be better to do it the way I did it than the other solution ? (which is a little unfair to compare since that solution is for *any* binary tree)

**EDIT** *solution*:

Please see anatolyg's response [here](https://stackoverflow.com/a/11959031/280924) which explains the problem with my proposed solution. Thanks anatolyg.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:52:04.877

你的问题陈述没有提到任何关于树的排列方式，所以我不明白你的左/右测试试图做什么。`node->left`如果不对其进行测试，您将无法了解有关或`node->right`子树的内容。

此外，在建议的解决方案中，`||`如果左子树匹配，则会短路，因此您不一定要遍历两个子树。如果没有路径，您只会遍历整个树：您显然必须测试每条路径以确保没有路径。（好吧，如果你在最终路径上找到匹配项，你也会遍历整个树......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:01:48.720

二叉搜索树中节点的特殊排列仅有助于搜索数字，而不是求和。想象一棵非常大的树，深度约为 100，沿着所有左侧节点寻找路径，目标总和适中（例如 1+2+3+...+100）。

当你的算法从根开始时，`diff`它会很大，它会转到树的右分支，总和不一定存在（例如，所有元素都大于 1000000000，所以太大了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T19:03:13.000

考虑一棵二叉树，其根节点的数据为 1。根节点有两个子树，左侧为 2，右侧为 3。节点 2 的左子树为 5。

如果你问从整个根到叶节点的路径加起来是否可以达到 8，答案是肯定的。

总根 = 1，左子树 = 2，左子树 = 5，加起来为 8。但是，您提前不知道哪条路径加起来是正确的总和（如果有的话），因此您必须沿着两个子树递归地。

二叉树代码应该很短。使用二叉树的递归性质以及树为空或具有左右子树的事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:53:31.167

这棵树不是[搜索树](http://www.personal.kent.edu/~rmuhamma/Algorithms/MyAlgorithms/binarySearchTree.htm)，因此，您从父亲的数据中对孩子的数据一无所知。

# php - SQL Query from two tables with repeating values in one of the tables

> ID：11958766
> 
> 赞同：0
> 
> 时间：2012-08-14T18:46:21.100
> 
> 标签：php, mysql, sql, join

A little background. I'm building a auctioneer project (PHP/MySQL) where there is an unknown amount of images to be uploaded. The amount of images to be uploaded is to be defined by the user depending on amount of photos available. Uploading them online is no problem. I can see all the important info in the tables.

I have two relevant tables:

1.  Properties (Mish/Mash of columns)
2.  Images (Three columns: images_id, images_url, images_entry_id)

The images_entry_id refers to the unique properties.property_id. The problem lies in when I upload several images; There is an unique id, url and they have the same images_entry_id so I can reference them to the Properties table. So when I try an inner join I get several of the same outputs from the properties table depending on the amount of images. Hope this explains what I mean?

My Query:

```
$sql = "SELECT * FROM properties INNER JOIN images
                ON properties.prop_id=images.images_entry_id ORDER BY properties.prop_id DESC"; 
```

So basically, if there are three images for one prop_id, I then get three outputs of the same output from the properties table! There! Any ideas? Is the database layout poor or is it just a simple query that has stared me in the face?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:00:51.480

好的，这将起作用：

```
$sql = "SELECT DISTINCT properties.* FROM properties 
INNER JOIN images ON (properties.prop_id=images.images_entry_id) 
ORDER BY properties.prop_id DESC"; 
```

或者这个

```
$sql = "SELECT properties.* FROM properties 
WHERE EXISTS (SELECT * FROM images WHERE properties.prop_id=images.images_entry_id) 
ORDER BY properties.prop_id DESC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:02:11.170

您的预期结果不会来自连接表的单个查询，您需要独立查询每个表。

# javascript - Javascript function called when textboxes are filled with data

> ID：11958768
> 
> 赞同：0
> 
> 时间：2012-08-14T18:46:23.777
> 
> 标签：javascript, ajax

How would one make a javascript function which constantly checks to see if the user has input data into one or more textboxes? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:54:45.577

你不应该使用`setInterval`. 你应该使用`onchange`事件。

见[http://jsfiddle.net/QwBU8/](http://jsfiddle.net/QwBU8/)

```
document.getElementById('myinput').onchange=change;
document.getElementById('mytextarea').onchange=change;
function change(e){
    if(!e){e=window.event;}
    document.getElementById('log').innerHTML+='Element with id "'+this.id+'" has changed\n';  
} 
```

但请注意，在修改文本框时不会触发此事件；它在失去焦点时被触发（当然，只有在它发生变化的情况下）。

如果您想在每次修改时触发事件，您可以使用`oninput`（但并非所有浏览器都支持）。

但是避免使用`setInterval`，它会消耗大量资源。想象一下，您在浏览器中打开了 30 个选项卡，并且所有选项卡都有不同的`setInterval`. 浏览器会死机！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:48:26.253

您可以使用该[`window.setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval?redirectlocale=en-US&redirectslug=window.setInterval)函数定期执行某些功能：

```
window.setInterval(function() {
    // do your check here => this will run every second
}, 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:51:23.327

您可以做两件事，运行一个`setInterval`定期检查 textarea 值的函数，或者绑定 、 、 和 events 的组合`mousedown`以`keydown`检测`keyup`输入数据的所有可能方式`keypress`，`keyup`然后将 textarea 文本的当前长度与最后一个值（0，最初）来查看是否有变化。如果有，请调用该函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T18:52:44.650

```
window.setInterval(function() {
   if(($('#textbox').val() != "")){
        //do something  or call function
}
else{
       // do something or call function    
}

}, 1000); 
```

# lua - lua 变量闭包

> ID：11958778
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:46:56.193
> 
> 标签：lua, closures, anonymous-function, coronasdk

我是 lua 新手，我对闭包有一些问题。我有一个功能：

```
function cell(x,y,s, group)
    local myCircle = display.newCircle( x, y, s )
    myCircle.la = 1
    local myclosure = function() 

      myCircle.la= myCirle.la + 1

    end
    timer.performWithDelay( 1500, myclosure, 0  )
    return true
end 
```

但是当执行定时器回调时，我得到一个错误：

```
 file.lua:39: attempt to index global 'myCirle' (a nil value) 
```

函数 myclosure 是否从函数中“看到”变量`cell`？如果没有，有什么办法可以访问它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:48:59.480

你拼错了。该错误实际上声称您试图访问“myCirle”，而不是“myCircle”。

# sql-server - 在 TSQL 中处理不明确的 varchar（或不唯一标识符）时转换失败

> ID：11958782
> 
> 赞同：2
> 
> 时间：2012-08-14T18:47:01.643
> 
> 标签：sql-server, tsql

允许用户通过方案的 id 或方案的名称发送对方案的引用。如果在记录中找到给定方案作为 id 或名称，则数据有效。临时表...

```
CREATE TABLE #ModelsForScheme( 
[modelid] uniqueidentifier,  
[schemeid] VARCHAR (36)) 
```

临时表稍后被填充。我现在拥有的...

```
DECLARE @XMLScheme VARCHAR (36)
SET @XMLScheme = (SELECT TOP 1 schemeid FROM #ModelsForScheme) --there will only be one row

DECLARE @SchemeID VARCHAR (36)
SELECT @SchemeID=schemeid FROM SCHEMES WHERE schemeid=@XMLScheme
IF @SchemeID IS NULL
  SELECT @SchemeID=schemeid FROM SCHEMES WHERE [name]=@XMLScheme

IF @SchemeID IS NULL
  SELECT 'Scheme is NULL' 
```

（该列`schemeid`是`uniqueidentifier`表中的a `SCHEMES`）。

这在`uniqueidentifier`发送 a 时工作正常。但是当发送一个名称（例如`@XMLScheme = 'dog'`）时，我收到以下错误；

> *从字符串转换为唯一标识符时转换失败。*

我试过`CAST`and `CONVERT`，但我无法让它们工作。`SCHEMES`如果我得到保证，那是我可以让它工作的唯一一个方案，但事实并非如此。

```
SET @XMLSchemeID = (SELECT TOP 1 schemeid FROM #ModelsForScheme)
SET @SchemeID= (SELECT TOP 1 schemeid FROM SCHEMES)
IF @XMLSchemeID<>@SchemeID
  Select 'yeaaaaa no error' 
```

任何想法表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:37:42.897

您的查询失败，因为

```
.... WHERE schemeid=@XMLScheme 
```

`varchar(36)`进行从到`uniqueidentifier`on的隐式类型转换`@XMLScheme`

您可以在执行查询之前测试是否`@XMLScheme`有效。`uniqueidentifier`

```
if (@XMLScheme like '________-____-____-____-____________' and patindex('%[^-0-9A-F]%', @XMLScheme) = 0)
  SELECT @SchemeID=schemeid FROM SCHEMES WHERE schemeid=@XMLScheme 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:31:35.687

Use Following IF to check if @XMLScheme is an uid or a string.

```
DECLARE @XMLScheme VARCHAR (36)
SET @XMLScheme = (SELECT TOP 1 schemeid FROM #ModelsForScheme) --there will only be one row

DECLARE @SchemeID VARCHAR (36)

IF @XMLScheme like replace('00000000-0000-0000-0000-000000000000','0','[a-fA-F0-9]')
   SELECT @SchemeID=schemeid FROM SCHEMES WHERE schemeid=@XMLScheme
ELSE
  SELECT @SchemeID=schemeid FROM SCHEMES WHERE [name]=@XMLScheme;

IF @SchemeID IS NULL
  SELECT 'Scheme is NULL' 
```

# android - 如何让项目使用另一个项目的资源？

> ID：11958791
> 
> 赞同：0
> 
> 时间：2012-08-14T18:47:25.163
> 
> 标签：android

我有一个在许多应用程序中使用的简单活动。布局是相同的，但唯一不同的是活动中使用的可绘制对象。

因此，假设我在自己的项目中使用自己的布局文件定义了这个简单的活动 (A)。我有什么办法可以将 A 导入到其他项目 B 和 C 中，但要使用他们自己的可绘制对象？因此，在使用 A 的布局时，B 会用其所有资源等填充它。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:57:08.757

首先，创建您的库项目：http: [//developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)

```
public class MySharedActivity extends Activity(

int drawable1;
int drawable2;

//Your stuff here
) 
```

然后，在您的项目 B、C 中：

```
 public class BlaBla extends MySharedActivity(
   //Somewhere in your code:
   this.drawable1=R.drawable.localpicture
   ) 
```

# r - R中的Read.table给出逻辑（0）

> ID：11958792
> 
> 赞同：0
> 
> 时间：2012-08-14T18:47:26.330
> 
> 标签：r

我正在尝试将许多文件读入 R 以将每个文件的第 14 列中的数据评估为自己的直方图。在我尝试访问实际数据（列名除外）之前，它似乎可以正常工作。

该代码似乎在一定程度上起作用：

```
 test<-sapply(1:Num.Files,function(x){readLines(File.names[x])})
    head(test)
    data<-read.table(header=TRUE,text=test[1])
    head(data)
    names(data)[14]<-'column14'
    names(data)
    data$column14 
```

但结果如下：

> test<-sapply(1:Num.Files,function(x){readLines(File.names[x])}) #进入数据头(test) #这里可以看到信息都在[,1]
> [ 1，]“目标cov av_cov 87A_cvg 87Ag 87Agr 87Agr 87A_gra 87A%_1 87A%_3 87A%_5 87A%_10 87A%_20 87A%_30 87A%_40\t87A%_50\t87A%_75\t87A%_100”[2]， "1:028 400\t0.42\t400\t0.42\t1\t1\t2\t41.8\t0.0\t0.0\t0.0\t0.0\t0.0\t0.0\ t0.0\t0.0\t0.0"
> [3,] "1:296 400\t0.42\t400\t0.42\t1\t1\t2\t41.8\t0.0\t0.0\ t0.0\t0.0\t0.0\t0.0\t0.0\t0.0\t0.0"
> [4,] "1:453 1646\t8.11\t1646\t8.11\t7\ t8\t13\t100.0\t100.0\t87.2\t32.0\t0.0\t0.0\t0.0\t0.0\t0.0\t0.0"
> [5,] "1 :427 1646\t8.11\t1646\t8.11\t7\t8\t13\t100.0\t100.0\t87.2\t32.0\t0.0\t0.0\t0.0\t0。 0\t0.0\t0.0"
> [6,] "1:736 5105\t29.68\t5105\t29.68\t14\t29\t48\t100.0\t100.0\t100.0\t86.0\t65.7\t49.4\ t35.5\t16.9\t0.0\t0.0"
> data<-read.table(header=TRUE,text=test[1]) head(data) #所有正确的列名 [1] Targ cov av_cov X87A_cvg X87Ag X87Agr X87Agr.1 [8] X87A_gra X87A._1 X87A._3 X87A._5 X87A._10 X87A._20 X87A._30 [15] X87A._40 X87A._50 X87A._75 X87A._100 <0 行>（或 0 -length row.names) names(data)[14]<-'column14' names(data) #column 14 被改变了 [1] "Targ" "cov" "av_cov" "X87A_cvg" "X87Ag" "X87Agr"
> [7] “X87Agr.1” “X87A_gra” “X87A._1” “X87A._3” “X87A._5” “X87A._10” [13] “X87A._20” “column14” “X87A._40” “X87A. _50" "X87A._75" "X87A._100" data$column14 #但逻辑列中没有任何内容(0)

我是否错误地使用了 read.table？有人有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:31:01.373

why not just use `read.table` to begin with instead of the `readLines` business? try:

```
test <- lapply(File.names, read.table, header=TRUE, sep='\t')`. 
```

Also, your variable `test` is a vector of rows. the first row is the header. you're passing only the first row `test[1]` as the argument to `read.table(text=...)`.

using `read.table(text=test)` should work better. However, you should probably use some variation on the `lapply` call that I wrote above instead of all this extra monkeying around.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:17:41.710

是的，您错误地使用了 read.table，您只传递了标题行 ( `text[1]`)。

我会`read.table`直接调用文件名。如果你坚持传递 的结果`readLines`，你可能想重新加入一切，比如`paste(test, collapse="\n")`.

# android - 将 APK 加载到 TestDroid

> ID：11958795
> 
> 赞同：1
> 
> 时间：2012-08-14T18:47:32.953
> 
> 标签：android, user-interface, automation, testdroid

我在将 .apk 加载到 Testdroid 时遇到问题，如本教程所示：

[http://testdroid.com/testdroid-recorder-recording-without-source-code](http://testdroid.com/testdroid-recorder-recording-without-source-code)

当我进入第 8 步并点击“浏览”时，我收到以下错误：

“签署apk出现问题。请联系支持（support@bitbar.com）。”

我尝试将可调试标志设置为真，并检查“我设置了可调试标志......等”。有没有其他人遇到过这个问题并解决了？更一般地说，有没有人知道任何其他不需要源的 UI 自动化包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:08:00.177

不久之前，新版本的记录器就出来了，这应该被修复。尝试更新。

# jquery - jQuery 和预选下拉菜单

> ID：11958798
> 
> 赞同：0
> 
> 时间：2012-08-14T18:47:43.123
> 
> 标签：jquery, html

我在使用 HTML 下拉列表和 jQuery 时遇到了一些问题。预选了一个选项

```
<select id="category">
 <option value="1" selected="selected">Value 1</option>
 <option value="2">Value 2</option>
</select> 
```

我尝试使用此行获取所选值

```
$("#category").val(); 
```

但我总是得到预选的选项“1”。还有变体，例如

```
$("select option:selected").val(); 
```

不工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:50:13.550

`$("#category").val()`给你选择的选项**值**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:50:00.667

我认为你需要这个：

```
$("#category option:selected").text(); 
```

**[演示](http://jsfiddle.net/8QLuk/1/)**

因为。`$('#category').val()`将为您输出所选选项的`value`属性。为了获得`text`您在上面需要的所选选项的属性。

# jsf - 在 jsf 中，bean 应该如何与常规 java 类（又名业务逻辑）进行通信

> ID：11958802
> 
> 赞同：0
> 
> 时间：2012-08-14T18:47:49.500
> 
> 标签：jsf, netbeans, glassfish, javabeans, facelets

这是一个使用 Netbeans 开发的 glassfish 上的 jsf 项目。我尝试将我的 bean 连接到我的常规 java 类。

这是我的理解：
- 托管 bean 或它们的 CDI 等效项负责处理与 UI 相关的用户数据（例如，用户输入）
- 业务逻辑在常规 Java 类中实现
- 2 个托管 bean 或其 CDI 等效项可以与 @ 通信注射

我缺少的是：bean 如何与*常规 java 类*通信？（我的业务逻辑在哪里？）
换句话说，我希望我可以通过使用 bean 作为其构造函数的参数来运行我的 java 类！

我试过：
- 在我的java类中包含一个@Inject注释，但这不起作用（bean没有注入，保持为空）
就像

```
public class myJavaProgram (){
@Inject
UserInputBean userInputBean;
//my business logic using the properties of userInputBean here...  //does not work, userInputBean is null!
} 
```

*   在我的 java 类的构造函数中将 bean 的属性作为参数传递。有效，但丑陋：为什么我不能简单地将整个 bean 作为参数直接传递给构造函数？但是当我这样做时，我的 java 类中的 bean 上再次出现空指针异常。

    我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:46:09.457

现代企业应用程序通常在整个应用程序中使用依赖注入模式，而不仅仅是表示层。因此，您将有一个数据访问层贡献 bean，例如`EntityManager`. 这些被注入到业务服务中，形成业务服务层。反过来，业务服务被注入到您的 JSF 支持 bean 中。什么依赖注入容器最好是一个争论的问题，你也可以混合它们。

在 Java EE 6 标准中（至少我是这么理解的），EJB 充当数据访问和业务服务层的依赖注入容器，而 CDI 充当表示层的依赖注入容器（这就是您可以在 CDI 中注入 EJB 的原因豆子）。其他人希望替换 EJB 并通过所有层使用 CDI。还有一些人仍然聪明地摆脱了 J2EE 造成的伤害，并使用 Spring 作为依赖注入容器。

给出一些代码，你可以这样做：

```
@Named
@SessionScoped
public class UserBean {

    @Inject UserService userService;

    User user;

    public void save() {
        userService.create(user);
    }

}

@Stateless
public class UserService {
    public void create(User user) { ... }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:09:51.197

我假设当您说 CGI 时，您实际上是指 CDI ......

这是一个 IoC（控制反转）框架，用于促进 JSF 应用程序中的 DI（依赖注入）。这种框架的另一个例子是 Spring，它正在慢慢开始采用更好的 JSF 支持。

如果您打算将业务逻辑与托管 bean 分离为 CDI 注入 bean，那么 JSF 托管 bean 的角色是您的表示逻辑的视图控制器和存储库。

`@Inject`注释只会注入已通过 CDI 配置的对象，这取决于您的项目设置，实际上可能包含也可能不包含 JSF Managed Beans。这一切都取决于您如何配置项目以及正在使用什么 EL Resolver 实现。如果它是您的 JSF 实现（例如 Mojarra）的默认 EL 解析器，那么正在使用 EL 解析器的 JSF 实现，您的 IoC 将无法识别这些依赖关系。

当然，您仍然可以将托管 bean 依赖注入到其他托管 bean，但您需要通过 EL Resolver 执行此操作。

```
@ManagedProperty("#{userInputBean}")
UserInputBean userInputBean; 
```

您引用的其他 Java 类依赖项应该代表您的业务逻辑层，并且应该由 CDI 配置和处理。

# php - PHP PDO 显示表功能仅显示最新表而不是全部

> ID：11958804
> 
> 赞同：2
> 
> 时间：2012-08-14T18:47:53.187
> 
> 标签：php, count, pdo, mysql

以下代码应该计算数据库中的表数。它只计算最新的表。我尝试按名称列出表格，只列出最新的。所有表仅用于测试，没有任何不同的属性。

```
function checkdbempty(){
    global $fsdbh;
    $results = $fsdbh->query("show tables");
    foreach($results as $result); { $int += 1; }
    return $int;
} 
```

这将返回 1 个结果。

```
function checkdbempty(){
    global $fsdbh;
    $check = $fsdbh->query('show tables')->fetch(PDO::FETCH_ASSOC);
    foreach($check as $ch){ echo $ch; }
} 
```

这将告诉我第一个表的名称：

```
function checkdbempty(){
    global $fsdbh;
    $check = $fsdbh->query('show tables')->fetch(PDO::FETCH_ASSOC); $result = '';
    foreach($check as $ch){ $result.= $ch; }
    return $result;
} 
```

它只会计算一个`->fetch(PDO::FETCH_NUM);`

问题是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:55:42.377

```
foreach($results as $result); { $int += 1; } 
```

`foreach`以分号结束，之后的代码只执行一次。

```
 $check = $fsdbh->query('show tables')->fetch(PDO::FETCH_ASSOC); 
```

`$check`是从语句中获取的单行，如果要遍历每一行使用`fetchAll`方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:56:00.773

`fetch()`只会获取一行，并且在方法链接中没有太多使用。你想[`fetchAll()`](http://php.net/manual/en/pdostatement.fetchall.php)改为。当您使用时`PDO::FETCH_NUM`，您获取的是带有数字索引的列，而不是关联数组中的列名——您*不是*检索查询返回的行数。

```
$check = $fsdbh->query('show tables')->fetchAll(PDO::FETCH_ASSOC);
var_dump($check); 
```

以这种方式链接方法是不明智的，即使`show tables`已知在语法上是正确的并且不应该在 RDBMS 中失败。相反，检查`FALSE`返回然后获取：

```
$result = $fsdbh->query('show tables');
if ($result) {
  $check = $result->fetchAll(PDO::FETCH_ASSOC);
} 
```

使用`fetch()`单行假设您将在`while`循环内获取：

```
$rows = array();
$results = $fsdbj->query('show tables');
if ($results){
  while ($row = $results->fetch(PDO::FETCH_ASSOC)) {
    $rows[] = $row;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:00:58.307

尝试这个：

```
$sth = $fsdbh->prepare('show tables');
$sth->execute();
return $sth->rowCount(); 
```

# php - 无法在 Windows Apache 上的 PHP 中加载 cURL

> ID：11958807
> 
> 赞同：1
> 
> 时间：2012-08-14T18:48:12.477
> 
> 标签：php, windows, apache, curl

我完全不熟悉设置 Apache/PHP Web 服务器，但我必须这样做，因为我的 IT 人员不会。我已经查看了我可以在网上找到的所有内容，但我无法在 windows apache 上的 PHP 中加载 cURL。我安装了 Apache 2.2，它可以工作。我安装了 PHP，它可以工作，我知道这是因为我的 php 脚本检查以确保加载 cURL 扩展，并且我的 php 回显返回到浏览器，我的代码如下所示：

```
 if (!extension_loaded("curl")) {
     header('Status: 500', true, 500);
     echo 'cURL extension for PHP is not loaded! <br/> Add the following lines to your php.ini file: <br/> extension_dir = &quot;&lt;your-php-install-location&gt;/ext&quot; <br/> extension = php_curl.dll';
     return;
  } 
```

我做了以下事情：

*   我没有注释`extension_dir="c:\php\ext\"`（并尝试了该路径的多种变体，使用正斜杠和反斜杠等，以及`./ext/`方法）。
*   我确保我`extension=php_curl.dll`的`php.ini`.
*   我已确保我的 apache 用户对 PHP 文件夹和所有子文件夹/文件具有读取和执行权限
*   我已经确定我`C:\PHP`的路径环境变量中有。
*   我在这里尝试了以下建议：[Could not load php_curl](https://stackoverflow.com/questions/2662336/could-not-load-php-curl)和这里：[PHP cURL is not loaded on modifying php.ini](https://stackoverflow.com/questions/7738306/php-curl-is-not-loaded-on-modifying-php-ini)以及 StackOverflow 之外的许多其他内容。

没有任何效果。我在 Windows Server 2003 机器上运行。我在 Apache 日志中没有收到错误消息。我被困住了。请帮忙！谢谢。

添加请求的 Apache 日志信息：

```
[Tue Aug 14 14:38:22 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Aug 14 14:38:23 2012] [notice] Apache/2.2.22 (Win32) PHP/5.2.17 mod_ssl/2.2.22 OpenSSL/0.9.8t configured -- resuming normal operations
[Tue Aug 14 14:38:23 2012] [notice] Server built: Jan 28 2012 11:16:39
[Tue Aug 14 14:38:23 2012] [notice] Parent: Created child process 5616
[Tue Aug 14 14:38:24 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Aug 14 14:38:25 2012] [notice] Child 5616: Child process is running
[Tue Aug 14 14:38:25 2012] [notice] Child 5616: Acquired the start mutex.
[Tue Aug 14 14:38:25 2012] [notice] Child 5616: Starting 64 worker threads.
[Tue Aug 14 14:38:25 2012] [notice] Child 5616: Starting thread to listen on port 8080. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-24T16:03:42.720

如果您在 Windows 操作系统中安装 PHP、Apache，那么以下步骤可以帮助您`php_curl.dll`顺利运行。

1.  找到`php.ini`（可能在`C:\Windows`）文件的位置并打开它。然后取消注释（从 中删除分号（;）`;extension=php_curl.dll`）并保存文件。
2.  确保它`php_curl.dll`存在于您的 PHP 扩展目录 ( `C:\php\ext`) 中。此扩展路径定义在您的 php.ini 文件中。
3.  复制`php4ts.dll`（如果您使用 PHP4）或`php5ts.dll`（如果您使用 PHP5），`libeay32.dll`并复制`ssleay32.dll`到`C:\WINNT`(Windows 2000) 或`C:\Windows`(Windows 2003) 目录。如果在您的计算机`php4ts.dll`中`php5ts.dll`没有找到，请在谷歌中搜索并下载。其他两个 dll 可以在你的 PHP 目录的 dlls 目录中找到（可能在`C:\php\ext`）
4.  重新启动 Apache 服务。

再次检查 cURL 是否启用。如果没有，请重新启动计算机。
现在再次运行脚本，看看你的 php_curl 现在运行顺利。
如果没有，则将上面的 3 个 dll 文件（在第 3 项中描述）复制到您的 PHP 根目录（可能是`C:\php`）以及 Windows system32 目录（`C:\Windows\system32`）中。

现在顺利运行您的 php cURL 脚本。祝你今天过得愉快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T09:30:10.307

对于 Windows 7 64 位，我必须将 php_curl.dll、libeay32.dll 和 ssleay32.dll 复制到 \Windows\SysWOW64。

# javascript - 如何使用 COSTUM 控件创建 HTML5 和 javascript 视频播放器？

> ID：11958809
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:48:17.230
> 
> 标签：javascript, html, html5-video

我想要的 COSTUM 控件是：播放/暂停（带图像）、声音（带图像）、进度条、视频时间。请如果你有代码或一些网址并且你回应它会很棒。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:05:27.860

Video.js 将是一个不错的选择。它是一个带有 Flash 后备功能的 HTML5 视频播放器，您可以使用 css 对其进行皮肤处理。[http://videojs.com/](http://videojs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:05:09.547

[http://www.w3.org/TR/html5/media-elements.html#mediaevents](http://www.w3.org/TR/html5/media-elements.html#mediaevents)

使用这些事件和 javascript，您可以创建任何这些控件。不是一个完整的答案，但我希望这会引导您走上相对正确的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:08:01.390

[jPlayer](http://www.jplayer.org/)是一个不错的选择。它还支持模板，因此您可以根据需要轻松自定义它。

# php - 将数据从 PHP 传输到 JavaScript 时计算时区偏移量

> ID：11958814
> 
> 赞同：3
> 
> 时间：2012-08-14T18:48:34.450
> 
> 标签：php, javascript, timezone

好吧，这是一个奇怪的问题。在我的一项修改中，PHP 代码使用 time() 将时间戳存储在数据库中——据我所知，这使用 UTC 时区。现在，我获取这些数据并将其用作一些 Javascript 函数中的参数。此函数返回类似于“30 秒前”或“2 小时 30 分钟前”等的时间字符串。这是完整的函数：

```
time_string : function(seconds,complexity,seconds_left,suffix,prefix){
    var difference = Math.abs(dynamo.time - seconds);
    seconds_left = seconds_left == null ? 0 : seconds_left;
    seconds = +seconds;
    if(difference < 15 && !seconds_left){
        return "Just now";
    }
    suffix = suffix != null
        ? (seconds_left == 1
            ? ""
            : suffix)
        : (seconds_left == 1
            ? ""
            : " ago");
    prefix = prefix != null ? prefix : "";
    if(difference > 86400){
        return new Date(seconds * 1000).toDateString();
    } else {
        var years = Math.floor(difference / 31536000);
        var days = Math.floor((difference / 86400) % 365);
        var hours = Math.floor((difference / 3600) % 24);
        var minutes = Math.floor((difference / 60) % 60);
        var second = difference % 60;
        var time_str = [];
        if(years > 0) time_str[time_str.length] = dynamo.toolbox.format_number(years) + " year" + (years == 1 ? '' : 's');
        if(days > 0) time_str[time_str.length] = days + " day" + (days == 1 ? '' : 's');
        if(hours > 0) time_str[time_str.length] = hours + " hour" + (hours == 1 ? '' : 's');
        if(days <= 1){
            if(minutes > 0) time_str[time_str.length] = minutes + " minute" + (minutes == 1 ? '' : 's');
            if(second > 0 && !minutes && !hours && !days){
                time_str[time_str.length] = second + " second" + (second == 1 ? '' : 's');
            }
        }
        complexity = complexity != null ? complexity : 2;
        time_str = time_str.slice(0,complexity);
        if(time_str.length > 1){
            var final_str = time_str[time_str.length-1];
            time_str.pop();
            time_str = time_str.join(", ") + " and " + final_str;
        } else {
            time_str = time_str.join("");
        }
    }
    return prefix + time_str + suffix;
} 
```

在代码中，`dynamo.time`被使用。`dynamo.time`设置为`time()`来自 PHP 的当前时间（我用它来计算存储时间和当前时间之间的时间差）。

但是，我需要调整`difference`变量以说明客户端与服务器的时区差异（和以前一样，我相信是 UTC）。

我该怎么做呢？

如果你想要它，这里有一个 JS Fiddle，对函数进行了一些测试：http: [//jsfiddle.net/Jskjv/1/](http://jsfiddle.net/Jskjv/1/)

编辑：我可以用 new Date().getTimezoneOffset() 来实现这个吗？唯一的问题是与 DST 不一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:56:04.657

我不确定混乱来自哪里；假设访客系统时钟足够好，您可以将任何时间戳与此进行比较：

```
Math.round(new Date().getTime() / 1000) 
```

它还返回相同类型的 unix 时间戳，因此没有时区偏移的复杂性。

用户系统时钟可能太乱了。在这些情况下，您可以进行时间偏移计算，从而`time()`通过内联 JavaScript 传递 PHP。同样，没有时区:)

# sql-server - T-SQL 查询返回从当月 1 日到永远的日期范围？

> ID：11958818
> 
> 赞同：-3
> 
> 时间：2012-08-14T18:48:45.920
> 
> 标签：sql-server, sql-server-2000

有人可以告诉我如何编写一个 T-SQL 查询来返回从本月 1 日到永远的日期范围吗？

换句话说，所有记录的日期都大于 2012 年 8 月 1 日。

谢谢！

编辑：SQL Server 2000 我不需要日期范围。我只需要本月初之后的所有日期。但是我不能对当前月份进行硬编码，因为我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:23:08.973

我假设您想要本月的所有内容，即“大于或等于”而不是“大于”。如果您的措辞准确，则更`>=`改为`>`：

```
SELECT x 
  FROM dbo.table_name 
  WHERE DateColumn >= DATEADD(MONTH, 
    DATEDIFF(MONTH, '20000101', CURRENT_TIMESTAMP), '20000101'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:09:37.790

“所有记录的日期都大于 2012 年 8 月 1 日”：

```
select 42 from MyTable where MyDate > Convert( Date, '20120801', 112 ) 
```

这应该避免一些国际化问题。

# c# - 包含所有打开窗口的窗口标题/句柄对的二维数组

> ID：11958823
> 
> 赞同：0
> 
> 时间：2012-08-14T18:48:59.387
> 
> 标签：c#, process, multidimensional-array

**有没有办法获得一个包含所有现有窗口的窗口标题和句柄对的二维数组？**

我认为这需要首先获取所有打开的窗口的标题，然后检索它们的句柄并从两个列表构建二维数组，但我不完全确定如何做到这一点。

我也知道它涉及`Process.GetProcesses()`方法，但我不完全确定如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:20:40.543

查看[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)并阅读 MainWindowTitle 和 MainWindowHandle 属性。

GetProcesses 方法为您返回一个正是此类 Process 对象的列表。因此，以详细的形式：

```
Process[] procs = Process.GetProcesses();
object[,] thearray = new object[procs.Length,2];
for(int i=0;i<procs.Length;++i)
{
    thearray[i,0] = procs[i].MainWindowTitle;
    thearray[i,1] = procs[i].MainWindowHandle;
} 
```

就是这样。现在，如果您想获取第 N 个进程信息：

```
string title = (string)thearray[n][0];
IntPtr handle = (IntPtr)thearray[n][1]; 
```

如您所见，存在数组只有一种数据类型的问题。这意味着保留一个字符串和一个 IntPtr（句柄）会迫使您找到一个通用的超类型，即 .. 最通用的“对象”类型。因此，您必须在读取数据时进行强制转换，因为只有您知道在 [0] 处的对象实际上是一个字符串。

考虑使用 Dictionary 类。这样您就可以很好地输入您的数据 - 但您将失去流程的“顺序”。它们将被随机排序。但我不认为此时您仍然需要订单？请参阅此处的代码：

```
Process[] procs = Process.GetProcesses();
Dictionary<string, IntPtr> theMap = new Dictionary<string,IntPtr>();
foreach(var p in procs)
    theMap[p.MainWindowTitle] = p.MainWindowHandle; 
```

就是这样。现在，如果您想阅读流程信息：

```
foreach(var aPair in theMap)
{
    string title = aPair.Key;
    IntPtr handle = aPair.Value;
    ...
} 
```

请注意，使用 Dictionary 访问第 N 个元素有点困难，但通常无论如何您都不需要它。如果您需要它 - 您可以将 LINQ 添加到工具集中：

```
using System.Linq;

var myNthPair = theMap.ElementAt(n);
string title = myNthPair.Key;
IntPtr handle = myNthPair.Value; 
```

所以，还不错。由于我们手头有 LINQ，我们可以编写更短的初始字典创建代码：

```
var theMap = Process.GetProcesses().ToDictionary(p => p.MainWindowTitle, p => p.MainWindowHandle); 
```

行。所以让我们解决一件事——我用字典骗了你一点。Dictio 有一个约束：键必须是唯一的。窗口标题可能是任何！他们可能会重复，而且肯定会重复。因此，您必须将键与值交换并形成字典 - 因为句柄不应重复 - 否则您可以使用 LINQ .ToLookup 方法而不是 .ToDictionary。Lookup 为单个键保存多个值，因此对于“Internet Explorer”窗口标题，它将能够保存 15 个句柄的列表等。

玩得开心。

# c# - C#创建类的实例并在字符串中按名称设置属性

> ID：11958825
> 
> 赞同：28
> 
> 时间：2012-08-14T18:49:02.967
> 
> 标签：c#, reflection

我有一些问题。我想按名称创建类的实例。我找到了`Activator.CreateInstance` [http://msdn.microsoft.com/en-us/library/d133hta4.aspx](http://msdn.microsoft.com/en-us/library/d133hta4.aspx)，它工作正常，我发现这个： [Set a property by reflection with a string value](https://stackoverflow.com/questions/1089123/setting-a-property-by-reflection-with-a-string-value) too。

但是如何做到这一点呢？我的意思是，我知道类的名称，我知道该类中的所有属性，并且我在字符串中有这个。例如：

```
string name = "MyClass";
string property = "PropertyInMyClass"; 
```

如何创建实例并为属性设置一些值？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-14T18:52:18.140

你可以使用反射：

```
using System;
using System.Reflection;

public class Foo
{
    public string Bar { get; set; }
}

public class Program
{
    static void Main()
    {
        string name = "Foo";
        string property = "Bar";
        string value = "Baz";

        // Get the type contained in the name string
        Type type = Type.GetType(name, true);

        // create an instance of that type
        object instance = Activator.CreateInstance(type);

        // Get a property on the type that is stored in the 
        // property string
        PropertyInfo prop = type.GetProperty(property);

        // Set the value of the given property on the given instance
        prop.SetValue(instance, value, null);

        // at this stage instance.Bar will equal to the value
        Console.WriteLine(((Foo)instance).Bar);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-16T22:28:43.070

如果你有 System.TypeLoad 异常，你的类名是错误的。

对于 Type.GetType 方法，您必须输入**程序集限定名称**。即与项目名称例如：**GenerateClassDynamically_ConsoleApp1.Foo**

如果它在另一个程序集中，则必须在逗号后输入程序集名称（[https://stackoverflow.com/a/3512351/1540350](https://stackoverflow.com/a/3512351/1540350)上的详细信息）： **Type.GetType("GenerateClassDynamically_ConsoleApp1.Foo,GenerateClassDynamically_ConsoleApp1");**

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2016-03-27T14:29:39.157

```
Type tp = Type.GetType(Namespace.class + "," + n.Attributes["ProductName"].Value + ",Version=" + n.Attributes["ProductVersion"].Value + ", Culture=neutral, PublicKeyToken=null");
if (tp != null)
{
    object o = Activator.CreateInstance(tp);
    Control x = (Control)o;
    panel1.Controls.Add(x);
} 
```

# c# - 在 feed RSS 阅读器中使用 Web 浏览器控件

> ID：11958831
> 
> 赞同：0
> 
> 时间：2012-08-14T18:49:18.640
> 
> 标签：c#, silverlight, windows-phone-7

我按照本指南创建了一个 RSS 阅读器

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh487167(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh487167(v=vs.92).aspx)

但我想使用 Web 浏览器控件而不是 WebBrowserTask 打开提要。我怎样才能实现它？

注意：我使用的是 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:21:46.753

参考您的链接。您可以遵循以下方法：

在您的页面上创建一个 webBrowser 控件。叫它说`"webBrowser"`

使用`webBrowser.Navigate(uri);`代替以下三个语句

```
 WebBrowserTask webBrowserTask = new WebBrowserTask();
        webBrowserTask.Uri = uri;
        webBrowserTask.Show(); 
```

在函数中`feedListBox_SelectionChanged`。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T03:18:54.700

像这样调用 webBrowser.xaml 页面

`NavigationSerivce.Navigate(new Uri("<webBrowser.xaml path>?url="+url,UriKind.Relative));`

在 webBrowser.xaml 上

```
 <Grid x:Name="ContentPanel" Grid.Row="1" >
             <phone:WebBrowser IsScriptEnabled="True" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Name="browser" />
        </Grid> 
```

在 webBrowser.xaml.cs 上做：

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        String url = NavigationContext.QueryString["url"];
        if (!String.IsNullOrEmpty(url))
        {
            browser.Navigate(new Uri(url));
        }
    } 
```

请检查编译错误。它应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T07:08:13.373

为防止自动刷新，请在您的`webBrowser.xaml.cs`

```
 String _oldUrl;
    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
         String url = NavigationContext.QueryString["url"];
         if(url!=_oldUrl)
         {
              if (!String.IsNullOrEmpty(url))
              {
                     browser.Navigate(new Uri(url));
              }
              _oldUrl = url;
         }
    } 
```

# mysql - MySQL - 在单列上选择不同的

> ID：11958838
> 
> 赞同：0
> 
> 时间：2012-08-14T18:50:01.227
> 
> 标签：mysql, join, inner-join

我有这个很好用的查询。我与 Freetrials 和 Contacts 有 N:N 关系，与 Freetrials 和 Companies 有 N:1 关系。免费试用可以有多个联系人，并且联系人可能会注册多个免费试用。免费试用只能有 1 家公司，而公司可能会注册多个免费试用。

```
SELECT `freetrial`.*,`company`.name as name, `contact`.first_name,`contact`.last_name FROM `contact_freetrial`
    INNER JOIN `freetrial` ON `contact_freetrial`.freetrial_id=`freetrial`.id
    INNER JOIN `contact` ON `contact_freetrial`.contact_id=`contact`.id
    LEFT JOIN `company` ON `company`.id=`freetrial`.company_id 
```

这很好用，直到我有 2 个联系人：

```
Id  Company    Contact          Date     
110 MCC        P Sh***      08/14/2012
110 MCC        W Bu***      08/14/2012
111 Foo        x yy***      08/14/2012
112 BAR        y zz***      08/14/2012 
```

如果有多个联系人，我只想显示一个公司/免费试用。所以我基本上只是希望它看起来像这样：

```
Id  Company    Contact          Date     
110 MCC        P Sh***      08/14/2012
111 Foo        x yy***      08/14/2012
112 BAR        y zz***      08/14/2012 
```

任何帮助它做到这一点将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:00:50.597

这个想法是你想得到一个随机的联系。然后加入联系方式：

```
select t.*, c.first_name, c.last_name
from (SELECT `freetrial`.*,`company`.name as name,
             (select ContactId
              from Contact where contact.company_id = company.id
              order by rand()
              limit 1
             ) as thecontactid
      FROM  `contact_freetrial` INNER JOIN
             freetrial`
             ON `contact_freetrial`.freetrial_id=`freetrial`.id LEFT JOIN
            `company` ON `company`.id=`freetrial`.company_id
    ) t join
    contact c
    on t.thecontactid = c.contactid 
```

这使用相关子查询选择随机联系人。然后它加入信息。

使用“group by”方法的问题是mysql不保证不同的字段来自同一条记录。您可能会从一条记录中获取名字，而从另一条记录中获取姓氏。因此，即使它看起来有效，也不能保证有效。（除了它使用非标准的 group by 语法这一事实之外。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:55:00.973

您可以使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html), 例如`GROUP BY freetrial.id, company.name`将所有结果按免费试用/公司组合分组 - 因此每个免费试用/公司仅返回单行：

```
SELECT
    `freetrial`.*,`company`.name as name, `contact`.first_name,`contact`.last_name
FROM
    `contact_freetrial`
    INNER JOIN `freetrial` ON `contact_freetrial`.freetrial_id=`freetrial`.id
    INNER JOIN `contact` ON `contact_freetrial`.contact_id=`contact`.id
    LEFT JOIN `company` ON `company`.id=`freetrial`.company_id
GROUP BY
    freetrial.id, company.name 
```

作为额外的奖励，您可以使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)获取给定免费试用/公司的*每个*联系人的列表 - 都在同一行中：

```
SELECT
    `freetrial`.*,`company`.name as name,
    GROUP_CONCAT(CONCAT(contact.first_name, ' ', contact.last_name)) AS contacts
FROM
    `contact_freetrial`
    INNER JOIN `freetrial` ON `contact_freetrial`.freetrial_id=`freetrial`.id
    INNER JOIN `contact` ON `contact_freetrial`.contact_id=`contact`.id
    LEFT JOIN `company` ON `company`.id=`freetrial`.company_id
GROUP BY
    freetrial.id, company.name 
```

在此示例中，我还使用`CONCAT()`了组合联系人的名字和姓氏。它将返回的列表将是每个免费试用/公司组合的每个联系人的逗号分隔列表（如果有多个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:58:05.903

这将为您提供最新联系人的行。

```
SELECT `freetrial`.*,`company`.name as name, `contact`.first_name,
                   `contact`.last_name FROM `contact_freetrial` A
    INNER JOIN `freetrial` ON `contact_freetrial`.freetrial_id=`freetrial`.id
    INNER JOIN `contact` ON `A`.contact_id=`contact`.id
    LEFT JOIN `company` ON `company`.id=`freetrial`.company_id
where A.id = (select max(id) from contact_freetrial where contact_id = A.id) 
```

# jquery - 绝对位置问题

> ID：11958845
> 
> 赞同：0
> 
> 时间：2012-08-14T18:50:33.610
> 
> 标签：jquery, html, css

我正在尝试在元素 A 之上设置元素 B 的绝对位置。我有

```
var left = $('#elementA').offset().left;

var top  = $('#elementA').offset().top;

---------------------------
|    -----------           |    
|   |o          |          |        
|   |           |          |
|   |           |          |
|   |           |          |    
|    -----------           |
|-------------------------- 
```

o 表示我的元素A。

我想将元素 B 放在与元素 A 相同的位置

```
$('elementB').css({ position:'absolute',
            top:top,
            left:left}) 

---------------------------
|    -----------          | 
|   |o          |         |     
|   |  b        |         |
|   |           |         |
|   |           |         | 
|    -----------          |
|--------------------------
b means my element b 
```

但事实证明如上。

如果我设置

```
$('elementB').css({ position:'absolute',
            top:0,
            left:0}) 
```

它会起作用的。但我有许多不同的元素 B 和元素 A，我不能对所有元素都使用 0。

任何人都可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:12:17.677

您可以使用 jQuery UI Position 插件来相对于任何其他元素定位任何元素。请参阅：[http ://docs.jquery.com/UI/Position](http://docs.jquery.com/UI/Position)

在您的情况下，它将是：

```
$('#elementB').position({
  my: 'left top',
  at: 'left top',
  of: '#elementA'
}); 
```

另外我认为将'px'添加到css属性的值是一个好习惯，例如：

```
$('...').css({
    left: 100 + 'px'
}); 
```

如上所述，您应该始终考虑相对于彼此的元素配置。如果父元素是“定位的”，那么子元素的定位不是相对于窗口，而是相对于它们的父元素。如果您想要更多的灵活性，您可以将元素 B 从元素 A 中取出（使它们成为兄弟）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:56:33.327

函数 offset() 将为您提供窗口中元素的偏移量。您需要的是 elementA 在其容器内的相对偏移量。

尝试使用 position() 而不是 offset()

基于另一个例子：http: [//jsfiddle.net/dcFXj/](http://jsfiddle.net/dcFXj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:01:24.280

当一个元素是另一个元素的子元素时，绝对定位对于窗口来说并不是绝对的，而是*相对于其父*元素的绝对定位。如果您希望 div 的左上角与它的父级左上角完美匹配，那么您希望它`top`与`left`父级的距离正好为零像素。它只是绝对的，因为它忽略了可能将其移出位置的所有其他项目。

[这是实际操作的演示](http://jsfiddle.net/mRsgv/)

当 B 是 A 的孩子时，对于 B 需要与 A 对齐的每种情况，只需始终将其左上角设置为 0。

# .net - 如何根据 XAML 中的运行时属性值动态选择上下文菜单模板？（上下文菜单定制）

> ID：11958846
> 
> 赞同：1
> 
> 时间：2012-08-14T18:50:34.490
> 
> 标签：.net, wpf, xaml, contextmenu, customization

有两个上下文菜单。要打开所需的上下文菜单，请单击鼠标右键。如果 IsData 为真，则 ContextMenu1 将打开；如果 IsData 为 false，则 ContextMenu2 将打开。该问题将在 XAML 中展开。

DataTemplate 中有两个静态上下文菜单。一个上下文菜单如何使用它们？此块完全设置模板上下文菜单。选择哪个，取决于条件。

```
<DataTemplate x:Key="ContextMenuControlTemplate">
    <DataTemplate.Resources>

        <ContextMenu x:Key="ContextMenuSet">
            <MenuItem>
                <MenuItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <Image Width="15" Height="15" Source="{DynamicResource img_icon}"/>
                        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Text="  Add item" />

                    </StackPanel>
                </MenuItem.Header>
                <MenuItem.Icon>
                    <RadioButton IsChecked="True"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Remove"></MenuItem>
        </ContextMenu>

        <ContextMenu x:Key="ContextMenuDel">
            <MenuItem Header=" Del all"></MenuItem>
        </ContextMenu>

    </DataTemplate.Resources>

    <ContextMenu x:Name="contextMenuForItems"/>

    <DataTemplate.Triggers>

        <DataTrigger Binding="{Binding Data.IsData}" Value="true">
            <Setter TargetName="contextMenuForItems" Property="ContextMenu" Value="{StaticResource ContextMenuSet}" />
        </DataTrigger>

        <DataTrigger Binding="{Binding Data.IsData}" Value="false">
            <Setter TargetName="contextMenuForItems" Property="ContextMenu" Value="{StaticResource ContextMenuDel}" />
        </DataTrigger>

    </DataTemplate.Triggers>
</DataTemplate> 
```

而这里的块正在尝试使用我们建立的上下文菜单。一个问题就在这里面。

```
 <DataTemplate>
                            <DockPanel>
                                <ContextMenu>
                                <DataTemplate>
                                        <ContentControl Content="{Binding Data.IsData}"
                                    ContentTemplate="{StaticResource ContextMenuControlTemplate}"
                                     />
                                </DataTemplate>
                                </ContextMenu>
                            </DockPanel>
                        </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:50:21.597

我使用了解决方法。我制作了一份复杂的菜单。并且删除了一些缺少的 MenuItem。请参阅关键字 Visibility 和 booleanToVisibilityConverter。我的例子如下。

```
 <DockPanel.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem IsEnabled="False" Visibility="{Binding Data.IsData, Converter={StaticResource booleanToVisibilityConverter2}}">
                                            <MenuItem.Header>
                                                <StackPanel Orientation="Horizontal">
                                                    <Image Width="15" Height="15" Source="{DynamicResource img_icon}"/>
                                                    <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Text="  Add item" />

                                                </StackPanel>
                                            </MenuItem.Header>
                                            <MenuItem.Icon>
                                                <RadioButton IsChecked="True"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Click="MenuItem_Click"  Header="Remove" Visibility="{Binding Data.IsData, Converter={StaticResource booleanToVisibilityConverter2}}" />
                                        <MenuItem Click="MenuItem_Click" Header="Del all" Visibility="{Binding Data.IsData, Converter={StaticResource booleanToVisibilityConverter2}, ConverterParameter=InvertCollapse}" />
                                    </ContextMenu>
                                </DockPanel.ContextMenu> 
```

booleanToVisibilityConverter2 是 BooleanToVisibilityConverter 的包装器，它具有其他属性。

# javascript - Javascript：为我的数组添加更多灵活性，例如在数组选项中间插入 html 代码？

> ID：11958848
> 
> 赞同：0
> 
> 时间：2012-08-14T18:51:02.940
> 
> 标签：javascript, html, arrays, syntax

所以这是我的脚本：

```
function getRandomArrayIndex(source_array) {

return Math.floor(Math.random() * source_array.length);

}

function getRandomArrayEntry(source_array) {

var random_index = getRandomArrayIndex(source_array);

return source_array[random_index];

}

function getRandomV5test() {

var v5tests = [
["This should tell me I have the following amount of minutes: "],
["This is the number of times I want to jump up and down: "],
["This is a quote."],
]; var random_v5test = getRandomArrayEntry(v5tests);

return random_v5test;

}

function displayV5test(v5test) {
    var element = document.getElementById("v5test");
    if(element !== null){
        var TEXT_ROW = 0;
        var LINK_ROW = 1;
        var v5test_text = v5test[TEXT_ROW];
        var v5test_link = v5test[LINK_ROW]; 
        if (v5test_link != null) {
            element.innerHTML = '<a href="' + v5test_link + '">' + v5test_text + '</a>';
        } else {
            element.innerHTML = v5test_text + '<span id="time"></span>';
        }
    }
}

function generateRandomV5test(){

var random_v5test = getRandomV5test();

displayV5test(random_v5test);

} 
```

它的作用是结合多个同级脚本，生成一个带有随机结果的短语。它在其他脚本之前运行，这些脚本将*它们的*随机短语插入指定的跨度 id ('time')，页面上的最终结果可能类似于以下内容：

> 这应该告诉我我有以下分钟数：40

问题是这给了我任何灵活性——我在“v5test_text”之后指定的跨度必须总是在之后。此外，无论脚本选择了哪个数组选项，第三个数组选项仍将返回一个随机数，如下所示：

> 这是一个报价。25

我想要做的是将 html 代码放在不同的数组选项中，如下所示：

```
var v5tests = [
["This should tell me I have <span id="time"></span> minutes. "],
["I want to jump up and down <span id="time"></span> times. "],
["This is a quote."], 
```

所以，这真的是一个简单的问题。**如果我想防止在此实例中使用的 html 代码被脚本本身混淆，我应该使用什么语法？**知道这一点将使我在网站内容方面具有几乎无限的灵活性。

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:56:00.320

看起来您需要使用反斜杠转义字符转义引号。

```
var v5tests = [
    "This should tell me I have <span id=\"time\"></span> minutes.",
    "I want to jump up and down <span id=\"time\"></span> times. ",
    "This is a quote."
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:53:44.923

使用单引号来定义你的字符串...

```
var v5tests = [
['This should tell me I have <span id="time"></span> minutes.'],
['I want to jump up and down <span id="time"></span> times.'],
['This is a quote.'], 
```

或在字符串中转义双引号：

```
var v5tests = [
["This should tell me I have <span id=\"time\"></span> minutes. "],
["I want to jump up and down <span id=\"time\"></span> times. "],
["This is a quote."], 
```

# python - python的日志记录模块在cygwin下报告不正确的时区

> ID：11958870
> 
> 赞同：6
> 
> 时间：2012-08-14T18:52:06.413
> 
> 标签：python, logging, timezone

我正在运行 python 脚本，该脚本在 Windows 7 上的 cygwin 下使用日志记录模块。该`date`命令报告正确的时间：

```
$ date
Tue, Aug 14, 2012  2:47:49 PM 
```

但是，python 脚本要休息五个小时：

```
2012-08-14 19:39:06,438: Done! 
```

当我为脚本配置日志记录时，我没有做任何花哨的事情：

```
logging.basicConfig(format='%(asctime)-15s: %(message)s', level=logging.DEBUG) 
```

有人可以告诉我发生了什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T01:27:49.317

在导入任何日期/时间模块之前，您需要在 python 脚本中取消设置环境“TZ”。它由 cygwin 设置，但 Windows 不理解：

```
if os.getenv("TZ"):
    os.unsetenv("TZ") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-07T00:09:30.900

似乎如果`TZ`设置了环境变量，Cygwin 中的 Python 将在 GMT (UTC) 时区运行。即使`TZ`设置为与 Windows 框相同的时区也是如此！

作为一种解决方法，您可以`unset TZ`在调用 Python 之前调用 bash shell，然后 Python 将使用 Windows 时区。对我来说，删除 Python 中的 ENV 变量不起作用，它需要在启动 Python 之前发生（即使`os.environ['TZ']`在导入任何与时间相关的模块之前在 Python 进程中尽早删除，可能是因为必须导入`os`，也许这会触发 Cygwin/Python “错误”，从而使时区变为 UTC？）。

`unset TZ`可以通过添加到 .bash_profile 文件（`/home/<user>`其中是 Cygwin 安装位置的子目录）来自动修复。

# jquery - .slideToggle 不工作

> ID：11958871
> 
> 赞同：0
> 
> 时间：2012-08-14T18:52:10.210
> 
> 标签：jquery, slidetoggle

我知道我的文件链接正确，因为它显示在 Chrome 的检查器中。这是我的 HTML：

```
 <!DOCTYPE html>
      <html>
        <head>
          <title>jQuery</title>
          <script type='text/javascript' src='jquery-1.7.2.min.js'></script>
          <script type='text/javascript' src='scripts/change.js'></script>
        </head>
        <body>
          <p>
            <button id="start">Start</button>
            <button id="stop">Stop</button>
          </p>
          <p id="image">
            <img src='images/image.jpg' alt="image" />
          </p>
        </body>
      </html> 
```

jQuery：

```
 $('#start').click(function() {
        $('#image').slideToggle(3000);
      }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:53:18.107

您需要将整个代码包装在`$(document).ready()`处理程序中。因此，它确保在整个资源加载完成后代码将绑定到 dom。

```
$(document).ready(function() {
  $('#start').click(function() {
    $('#image').slideToggle(3000);
  });
}); 
```

### 笔记

检查外部 JavaScript 文件的路径是否***正常***。

# javascript - Highcharts，在现有行而不是新行上添加新系列渲染

> ID：11958872
> 
> 赞同：0
> 
> 时间：2012-08-14T18:52:13.610
> 
> 标签：javascript, highcharts

我正在构建一个类似于此的图表：http: [//jsfiddle.net/highcharts/r6emu/](http://jsfiddle.net/highcharts/r6emu/)

通过 chart.addSeries 添加新系列时，新项目正在绘制现有行，即使它应该创建一个新行。

这是一个问题示例（等待 2-3 秒）：http: [//jsfiddle.net/r6emu/653/](http://jsfiddle.net/r6emu/653/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:54:00.313

它的发生是因为 y 轴位置不是增量的。当您向系列添加新任务时，计数器`each`将从零开始，并将添加到同一系列中。

Highchart 使用 y 位置来绘制系列。

所以，

1.  在定义任务中更改任务的顺序。
2.  填充任务时不要使用反向。
3.  使用全局索引位置而不是`each`索引。
4.  将新任务添加到原始任务数组，然后使用 addSeries 调用它。（正如您使用任务数组填充 y 轴标签）

这是小提琴链接：http: [//jsfiddle.net/mhardik/Ef8Mp/](http://jsfiddle.net/mhardik/Ef8Mp/)

# sql-server - 实体框架：防止读取部分写入的实体？

> ID：11958881
> 
> 赞同：1
> 
> 时间：2012-08-14T18:52:51.530
> 
> 标签：sql-server, sql-server-2008, entity-framework, sql-server-2008-r2

我想做一些压力测试来模拟我的应用程序的多用户环境。我们使用实体框架 (EF) 作为我们的 ORM，使用 SQL Server 2008 R2 Enterprise 作为我们的后端。

这是模型的一部分 - 每个对象 ( `NodeBase`) 都有`Metadatum`对象 - 1:1 映射。似乎`NodeBase`是首先写入，然后是`Metadatum`第二个对象（或与`Metadatum`对象的关联，不确定）。无论哪种方式，当我执行搜索时，我都会拉起 a `NodeBase`，但它`Metadatum`是空的。5 秒后，同样的搜索发现了该`Metadatum`对象。:-/。令人沮丧。

![在此处输入图像描述](../Images/229696f6efcd3bf13f301cf9c0417bf2.png)

在我的测试中，我有 2 个实例运行我们的应用程序（用于读取的 GUI，以及用于 R/W 的单元测试）。单元测试锤击数据库，创建对象的最坏情况读取和写入，GUI 正在读取数据库发生的所有更改（通过请求新数据锤击数据库）。

![在此处输入图像描述](../Images/95dbc91ce22c04d11cd1689c173bcc23.png)

问题似乎是我的搜索引擎正在读取一个新写入的对象，并在对象的子对象和写入之前对其进行处理。当搜索去处理孩子时，有一个空异常。如果搜索等待几秒钟（没有比`DateTime.Now.AddSeconds(-5)`看起来运行良好的更新），一切都会好起来的。虽然这适用于我当前的特定问题，但我怀疑它不会出现在应用程序的其他地方。

我试过的：

1.  我编写代码中的事务（我可能没有所有选项都正确，或者可能做错了），但这似乎没有任何效果。每次写入都使用此事务：

    ```
     using (TransactionScope transactionScope = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions(){IsolationLevel = System.Transactions.IsolationLevel.Serializable}))
        {
            ContainerResult = OasisModelContainer.SaveChanges(false);
            OasisModelContainer.AcceptAllChanges();
            transactionScope.Complete();
        } 
    ```

2.  尝试先在单独的数据库上下文中将我的子对象抢先写入数据库，释放上下文，在当前上下文中重新读取子对象，附加到父对象（在事务中），但这不起作用.

3.  其他只是闲逛的东西，关于 Stack Overflow 的提示等。

4.  我尝试使用快照，但我不确定我是否正确使用它 - 我在我的数据库上设置了它：

    ```
    ALTER DATABASE [ObjectModel] SET ALLOW_SNAPSHOT_ISOLATION ON 
    ALTER DATABASE [ObjectModel] SET READ_COMMITTED_SNAPSHOT ON 
    ```

我在想什么：

1.  将 WriteLock 布尔值添加到在写入期间设置的每个对象，并且任何时候读取对象时，只有在清除 WriteLock 时才会继续。这具有巨大的影响（重构大量代码），并且不是可取的。

2.  读取期间轮询 - 如果子对象为 Null，则延迟，再试一次。再次，潜在的巨大重构。

3.  在写入期间向数据库添加表/数据库锁。我对 SQL Server 知之甚少，不知道这是聪明还是愚蠢。你能以不会导致死锁的方式锁定数据库或表吗？您可以设置 SQL Server 死锁超时，以便客户端应用程序不会超时吗？

任何帮助/指针/建议将不胜感激！

# c# - WinForms 的彩色进度条

> ID：11958882
> 
> 赞同：1
> 
> 时间：2012-08-14T18:53:04.940
> 
> 标签：c#, winforms, progress-bar

我想用 C# 制作一个具有多种颜色的进度条。例如，它的最大值为 15。

1-5 红色 5-7 蓝色 7-8 颜色3 8-12 颜色4 等

我环顾四周，但没有找到很多关于这个主题的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:00:55.403

检查这篇文章：[http](http://www.silverlightshow.net/items/Red-To-Green-scale-using-an-IValueConverter.aspx) ://www.silverlightshow.net/items/Red-To-Green-scale-using-an-IValueConverter.aspx 有一个示例如何根据数值计算颜色以及此类转换器的可能方式用于对值的“严重性”进行颜色编码。

即使你没有使用 WPF（我希望你是），这些知识肯定会对你有用。

# sql-server - LINQ“无法检测到以下存储过程的返回类型”（不是临时表）

> ID：11958888
> 
> 赞同：7
> 
> 时间：2012-08-14T18:53:24.203
> 
> 标签：sql-server, linq

长期潜伏者，第一次在这里发帖:)

我决定在这里问，因为我已经厌倦了在 Google、SO 等中搜索。将存储过程从我的 SQL 2005 DB 导入到我的网站（FW 4.0，C#）LINQ 项目时，我遇到了这个错误：

**“无法检测到以下存储过程的返回类型”**

我有两个疑问。**我想指出我没有使用临时表**。出于安全措施，这些查询仅在变量名称等中进行了编辑。无论如何，这是一个**有效**的：

```
ALTER PROCEDURE [dbo].[spMyWorkingProc]
@OS numeric
AS
BEGIN
SET NOCOUNT ON;

DECLARE @sql varchar(5000)

set @sql = '
        SELECT
        *
        FROM MYDB.dbo.MYVIEW 
        WHERE OS = ' + CONVERT(varchar, @OS)

EXEC('
SET NOCOUNT ON
SELECT * FROM
OPENROWSET(''SQLOLEDB'', ''MYDB''; ''user''; ''password'', ''' + @sql + ''')')

END 
```

这是一个**没有**的：

```
ALTER PROCEDURE [dbo].[spNotWorking]
@IDCLIENT int,
@PPNO char(10)
AS
BEGIN
SET NOCOUNT ON;

DECLARE @sql varchar(5000)

set @sql = '
        SELECT
        *
        FROM MYDB.dbo.MYOTHERVIEW
        WHERE ID = ' + CONVERT(VARCHAR, @IDCLIENT) + ' AND PASSPORTNO = ' + @PPNO + ' ORDER BY AGE'

EXEC('
SET NOCOUNT ON
SELECT * FROM
OPENROWSET(''SQLOLEDB'', ''MYDB''; ''user''; ''password'', ''' + @sql + ''')')  

END 
```

这是我尝试并发现的内容，以及一些注释和问题：

*   两个用户（LINQ 和远程服务器）都是 db_owner。

*   如果我只保留一个参数（不管哪个参数），非工作存储过程就可以工作。如果我添加一个新的，它不起作用。

*   如果我从任何表中使用简单的 select * 和两个或更多参数创建一个空 SP，它就可以工作（所以它没有意义）。

*   假设问题出在 EXEC 中。如果是这样，第一个 SP 是如何工作的？好的，那么问题就不存在了。（这就是逻辑告诉我的，我猜？）

*   问题不在于视图，因为如果我使用我在工作 SP 中访问的视图，它就不起作用。

*   我需要使用提供的查询来执行此操作。我不能使用链接服务器或任何类似的东西，因为我们需要这样做来连接到 6.5 数据库，并且它不能解决或解释为什么第一个 SP 工作而第二个不工作，同时使用相同的方法。

*   我试图将一个参数（取自非工作 SP）添加到工作 SP 并且它工作，所以它必须是第二个 SP 的东西，但我不知道是什么：/

*   好的，如果我修改第二个 SP 并删除 @VAR 样式的参数并将它们硬编码到单个 @sql 变量中，它会完美运行。所以，我认为它必须是将变量包含到动态查询（或其他东西）中。

我真的是在扯我的头发，所以欢迎任何想法和建议！

提前致谢！- 黑暗小子

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T19:55:00.080

ORM 代码生成工具（例如`Linq2Sql`函数导入中的工具）通常在打开[SHOWPLAN_ALL](http://msdn.microsoft.com/en-us/library/ms187735.aspx)设置的情况下运行 SPROC，而不实际执行 proc，以便“嗅探”结果集。

正如您所发现的，这种方法在动态 SQL 方面存在局限性，并且通常是使用 TempDB 或具有返回具有不同模式的数据的分支的 procs 的问题。

您的解决方案是一个很好的解决方案，即将实际过程替换为硬编码但返回代表实际数据的模拟数据。

**编辑**

我见过的另一种解决此问题的模式是将硬编码的“模式”结果嵌入到不可调用的条件中，如下所示：

```
ALTER PROCEDURE [dbo].[someProc]
AS
BEGIN
  SET NOCOUNT ON;
  IF (1 = 0)
    BEGIN
      -- "Cheat" the ORM resultset sniffing by returning an example of the schema.
      -- Casting and name aliasing to ensure the ORM derives the correct types
      SELECT CAST('Hello' AS NVARCHAR(50)) AS Name, CAST (1 AS BIT) AS IsOnline, ...
      RETURN;
    END
    .. rest of the REAL proc goes here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T17:54:29.133

I too had same issue. And solution was at [http://developwith.net/2012/07/16/unknown-return-type-linq-to-sql/](http://developwith.net/2012/07/16/unknown-return-type-linq-to-sql/) Checking many sites says about those 3 points mentioned in this link but nowhere mentioned about transaction causing the problem. In my case, it was try catch block raising the hell. After removing it, LINQ to SQL behaved normal. Later introduced the try catch back.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T22:26:24.730

Use below format for writing proc ..

```
CREATE PROCEDURE PROC_NAME
@variableName nvarchar(150)
AS
IF 1=0 BEGIN
SET FMTONLY OFF
END
BEGIN
SET NOCOUNT ON;
DECLARE @Sql nvarchar(MAX)
SET @Sql = 'SELECT Column1, Column2, Column3 FROM' ;
EXEC sp_executesql @Sql
END 
```

Difference in above format is `IF 1=0 BEGIN SET FMTONLY OFF END`

Which helps to solve this problem and determine the return type .

# xslt - XSLT 计数不同的值

> ID：11958902
> 
> 赞同：0
> 
> 时间：2012-08-14T18:54:03.610
> 
> 标签：xslt, xpath

我有一个项目，我需要在 XML 文档的标签中获取和计算不同的值。如果您查看 XML，我会特别尝试计算周二的 WorkOrderNumbers 的不同数量。稍后我会在星期一等。我已经尝试了以下代码。

```
 <xsl:variable name="tmp" select="count(//Tuesday/TimeDetail/WorkOrderNumber[generate-id() = generate-id(key('distinctWorkOrder', .)[1])])"></xsl:variable> 
```

这返回 2。我也试过这个

```
 <xsl:variable name="tmp2" select="count(//Tuesday/TimeDetail/WorkOrderNumber[not(.=/preceding-sibling::WorkOrderNumber)])"></xsl:variable> 
```

它返回 4。正确答案是 3。

我在下面添加了 XML。有人可以指出我做错了什么吗？非常感谢。

```
 <Timesheet>
<WeekEnding>Sep 18, 2011</WeekEnding>
<JobNumber>00010-5523</JobNumber>
<Customer>Test Company INC</Customer>
<TeamMember>
    <EmployeeNumber>10566</EmployeeNumber>
    <EmployeeName>Employee, One</EmployeeName>
    <EmployeeClass>Class</EmployeeClass>
    <Monday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>14963</WorkOrderNumber>
            <RegularHours>8</RegularHours>
            <OverTimeHours>3</OverTimeHours>
            <OtherHours>4 - Holiday</OtherHours>
            <Notes>I took the afternoon off.</Notes>
        </TimeDetail>
    </Monday>
    <Tuesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>14963</WorkOrderNumber>
            <RegularHours>5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>15101</WorkOrderNumber>
            <RegularHours>2</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Tuesday>
    <Wednesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>14963</WorkOrderNumber>
            <RegularHours>5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Wednesday>
    <Thursday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>14963</WorkOrderNumber>
            <RegularHours>5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Thursday>
    <Friday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>14963</WorkOrderNumber>
            <RegularHours>5</RegularHours>
            <OverTimeHours>2</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Friday>
    <Saturday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>14963</WorkOrderNumber>
            <RegularHours>5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Saturday>
    <Sunday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>14963</WorkOrderNumber>
            <RegularHours>5</RegularHours>
            <OverTimeHours>1</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Sunday>
</TeamMember>
<TeamMember>
    <EmployeeNumber>81135</EmployeeNumber>
    <EmployeeName>Employee, Two</EmployeeName>
    <EmployeeClass>Class</EmployeeClass>
    <Monday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>15100</WorkOrderNumber>
            <RegularHours>5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>1 - Company Meetings</OtherHours>
            <Notes>These are my notes.</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>22965</WorkOrderNumber>
            <RegularHours>7</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>23570</WorkOrderNumber>
            <RegularHours>Regular</RegularHours>
            <OverTimeHours>1</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Monday>
    <Tuesday></Tuesday>
    <Wednesday></Wednesday>
    <Thursday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>23591</WorkOrderNumber>
            <RegularHours>7</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>15100</WorkOrderNumber>
            <RegularHours>1</RegularHours>
            <OverTimeHours>1</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Test</Notes>
        </TimeDetail>
    </Thursday>
    <Friday></Friday>
    <Saturday></Saturday>
    <Sunday></Sunday>
</TeamMember>
<TeamMember>
    <EmployeeNumber>105779</EmployeeNumber>
    <EmployeeName>Employee, Three</EmployeeName>
    <EmployeeClass>W</EmployeeClass>
    <Monday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>19583</WorkOrderNumber>
            <RegularHours>8</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Monday>
    <Tuesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>15099</WorkOrderNumber>
            <RegularHours>1</RegularHours>
            <OverTimeHours>7</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Tuesday>
    <Wednesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>15099</WorkOrderNumber>
            <RegularHours>1</RegularHours>
            <OverTimeHours>7</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Wednesday>
    <Thursday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>15099</WorkOrderNumber>
            <RegularHours>1</RegularHours>
            <OverTimeHours>7</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Thursday>
    <Friday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>15099</WorkOrderNumber>
            <RegularHours>1</RegularHours>
            <OverTimeHours>7</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <Notes>Notes</Notes>
        </TimeDetail>
    </Friday>
    <Saturday></Saturday>
    <Sunday></Sunday>
</TeamMember> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:39:45.717

这个 XSLT 2.0 xpath 表达式将计算不同的工单...

```
count(fn:distinct-values(/*/*/Tuesday/*/WorkOrderNumber)) 
```

这是 XSLT 1.0 等价物...

```
count(/*/*/Tuesday/*/WorkOrderNumber[not(. = following::WorkOrderNumber)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:59:21.097

如果您正在寻找给定日期的不同元素，那么您需要确保日期元素的名称构成键的一部分

```
<xsl:key name="distinctWorkOrder" 
   match="TimeDetail" 
   use="concat(local-name(..), '|', WorkOrderNumber)" /> 
```

因此，这将使用日期和工单编号。然后你可以像这样计算给定一天的不同项目

```
<xsl:variable name="tmp" 
 select="count(//Tuesday/TimeDetail
  [generate-id() 
  = generate-id(key('distinctWorkOrder', concat(local-name(..), '|', WorkOrderNumber))[1])])"/> 
```

这应该给出答案 3。

# php - 微调正则表达式以跳过标签

> ID：11958903
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:54:04.720
> 
> 标签：php, regex, preg-replace

代码必须跳过现有的链接，`<img>`的 src 值（或类似的东西）

```
public function convertUrlsToLinks($text){
    return preg_replace('@(https?://([-\w\.]+)+(:\d+)?(/([\w/_\.-]*(\?\S+)?)?)?)@', '<a href="$1" target="_blank">$1</a>', $text);
} 
```

想不通，我需要在这个函数中修改什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:57:41.643

向您的正则表达式添加一小部分，以检查您的正则表达式是否不在标签“内部”。所以应该是

```
 <tag>HERE</tag> 
```

并不是

```
 <tag src="HERE"></tag>. 
```

由于 url 将始终位于 html 标记内，因此如果您将正则表达式微调到此用途，它应该可以工作。我不是正则表达式的专业人士，所以不能帮助你更多，但我认为这应该让你朝着正确的方向前进。

# javascript - 我可以使用 SkyDrive 来托管和链接到 JavaScript 和 CSS 文件吗？

> ID：11958905
> 
> 赞同：3
> 
> 时间：2012-08-14T18:54:16.447
> 
> 标签：javascript, css, onedrive

我想托管并直接链接到 SkyDrive 中的一些 JS 和 CSS 文件，但我不确定这是否可行。绝对*可以*公开共享文件以供下载，但我需要一种直接链接到这些文件的方法，而无需单独下载。我看到“嵌入”和“共享”的链接，但生成的 URL 都不允许我直接托管文件而无需下载。

是否可以在 SkyDrive 上托管和允许链接以直接使用 JS 和 CSS 文件（类似于 Google 代码）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T11:18:19.307

我看到这项工作的唯一方法是使用 Live Connect API。您将需要获得访问令牌。 [http://msdn.microsoft.com/en-us/library/ff750952.aspx](http://msdn.microsoft.com/en-us/library/ff750952.aspx)

然后您可以使用 Live Connect REST API 调用这些文件。像这样：

```
https://apis.live.net/v5.0/file.F147027E527AFCA7.F147027E527AFCA7!118?access_token=ACCESS_TOKEN 
```

这将返回一个 JSON 文件，其中包含有关您的 Skydrive 文件的大量有用信息。（包括您的 .css 或 .docx 的实际源路径或可以在 JSON 响应的源属性中找到的任何文件）

![JSON 对文件对象的响应](../Images/140f5d048338cab2ece488fe726b0aaf.png)

在上面的 URL 中，文件。-> 表示您正在请求一个文件对象。F147027E527AFCA7 是文件夹。F147027E527AFCA7!118 指的是确切的文件 ID。

当您通过浏览器访问 Skydrive 中的文件时（或在共享 url 中），您可以在您的 url 中查看这些内容。

事实上，这个 API 有很多用途——你实际上可以做很多事情。msdn.microsoft.com/en-us/library/live/hh243648.aspx

希望能帮助到你！:)

# ios - iOS环境下的GNUPG解密

> ID：11958913
> 
> 赞同：1
> 
> 时间：2012-08-14T18:54:51.510
> 
> 标签：ios, aes, gnupg

一位同事向我提供了两个他使用 GNUPG 加密的文本文件，AES128/AES256 没有加盐。

使用以下示例[https://stackoverflow.com/a/1400596/300972](https://stackoverflow.com/a/1400596/300972)，我尝试在 iOS 应用程序中解密这两个文件，一个使用 AES256 示例，第二个通过将算法修改为 kCCAlgorithmAES128 并将密钥大小修改为 kCCKeySizeAES128。

将文件加载到 NSData 对象证明是成功的；我能够输出 NSData。但是，在解密时，它们总是以 kCCDecodeError (-4304) 失败。我认为可能是填充，所以我们尝试了不同的变体，原来是 kCCOptionPKCS7Padding，仍然是同样的错误。我尝试了填充 0，它提供了一个截断的 NSData 对象，我无法从中创建 NSString。（UTF8 编码）。

有没有人能够在 iOS 环境中成功解密使用 GNUPG 加密的文件？你能给我们提供经验教训吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:21:21.017

GnuPG 以 OpenPGP 文件格式 ( [RFC-4880](https://www.rfc-editor.org/rfc/rfc4880) ) 写入。这是一种相当复杂的格式，您甚至需要在开始解密数据之前对其进行解析。GnuPG 还会在加密数据之前对其进行压缩。它使用“OpenPGP 的密码反馈 (CFB) 模式变体”。虽然 iOS 5 支持 CFB，但这与 RFC-4880 不太一样。例如，它们不使用普通的 IV，而是以一种新颖的方式进行同步，以提供与标准 CFB 不兼容的“快速检查”。然后是他们的 String-to-Key (S2K) 算法，与 PBKDF2 不同。

简而言之，CommonCryptor 是将其分解为交给 AES 的一系列步骤中的最后一个。你可以看看 libgcrypt，但它的 LGPL 许可证通常与 iOS 开发不兼容。您可能应该调查其他 OpenPGP 实现。我知道 JavaScript 中有一些（这很疯狂，但仍然可以工作而不会造成许可问题）。也许[是 Cryptlib](http://www.cs.auckland.ac.nz/%7Epgut001/cryptlib/)（具有商业许可证）。

就个人而言，如果可以的话，我会选择其他一些加密器。OpenSSL 虽然不是特别安全，但非常便携，并且像命令行应用程序一样易于使用。[RNCryptor](https://github.com/rnapier/RNCryptor)可以在 iOS 上读写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T14:29:00.597

您可以检查[ObjectivePGP](http://objectivepgp.com)框架。

# architecture - NoSQL 独立应用架构

> ID：11958914
> 
> 赞同：1
> 
> 时间：2012-08-14T18:54:51.453
> 
> 标签：architecture, nosql, database-independent

如何创建一个 Web 应用程序（使用 Java、C# 或 JavaScript），它使用 NoSQL 数据库作为后端，但可以灵活地更改后端（例如从 couchDB 到 mongoDB），而无需重写大量代码。

我认为最好使用一些框架，例如 Java 的 Spring 和 JavaScript 的 Wakanda。如果这是要走的路，那么请列举一些框架。

我知道不同类型的 NoSQL 数据库之间存在很大差异，我也知道这取决于需要解决的问题。但这是一个理论问题，因此我想获得许多不同的选项，可以用来解决不同的问题，同时让 NoSQL 的应用程序“独立”（在某种程度上，例如仅在基于图形的）后端。

感谢您的回答和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:41:57.347

如果你真的想独立于数据库，你必须抽象出所有实体和数据库访问。最常见的方法是实现存储库模式。

请注意 OR/Ms（和 NoSQL 客户端）通常要求您违反封装（公共设置器或使用`List<T>`而不是`IEnumerable<T>`用于集合属性）。

如果这是您愿意做出的牺牲，您也可以将您的域实体用作数据库实体。（恕我直言，在一个小项目中很好，但在中/大型项目中不行）

# php - phpdocx - 如何使图像被文本淹没？

> ID：11958918
> 
> 赞同：0
> 
> 时间：2012-08-14T18:55:04.887
> 
> 标签：php, docx, phpdocx

我开始使用 PHPDocx 库。我仍然不确定这是否是从 PHP 制作 docx 文件的最佳方式。现在我遇到了这样一个问题：

我有一个图像和一个长文本。我想让这张图片被文字淹没（不确定我是否使用正确的词来描述 - 对不起）。它应该如下所示：

```
text text text text text text  ---------------------------
text text text text text text |                           |
text text text text text text |         I M A G E         |
text text text text text text |                           |
text text text text text text |___________________________|
text text text text text text text text text text text text 
text text text text text text text text text text text text 
```

我的代码如下所示：

```
$paramsImg = array(
'name' => '/images/image.jpg',
'scaling' => 1,
'spacingLeft' => 100,
'spacingTop' => 100,
'spacingRight' => 100,
'spacingBottom' => 100,
'textWrap' => 3,
'border' => 3,
'jc' => 'right'
);

$docx->addImage($paramsImg);

$paramsText = array(
    'jc' => 'both',
    'font' => 'Calibri'
);

$str = 'text text text text text';

$docx->addText($str, $paramsText); 
```

虽然我使用了多个 'wordwrap' 参数等等，但它总是看起来像这样：

```
 ----------------------------
|                            |
|                            |
|          I M A G E         |
|                            |
|____________________________|
text text text text text text text text text text text text text text text 
text text text text text text text text text text text text text text text 
```

首先显示什么也无关紧要 - 文本或图像。你有使用 phpdocx 处理图像的经验吗？或者，也许您可​​以建议任何其他库制作动态 doc 文件？

编辑：还有一件事-所有格式的图像都不起作用-虽然应该没有边框，但间距也不起作用..不知道为什么。

编辑 2：因为我发现的所有库都不适合我的需要，所以我决定将我的 docx 文件制作为 word 2003 xml 文件。有了它，您可以随心所欲地处理文字！希望能帮助到你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:12:02.787

自 PHPDocX PRO 2.6 版以来，有一个[addParagraph](http://www.phpdocx.com/documentation/api-documentation/addparagraph-inserts-complex-paragraphs-into-a-word-document)方法允许您插入复杂的段落，其中可能包括：

1.  格式化文本
2.  浮动图像（使用您要查找的格式）
3.  书签
4.  脚注
5.  尾注

您也可以使用 embedHTML 方法获得类似的结果（如果您使用模板，则选项是 replaceTemplateVariableByHTML()）

# php - 使用不同的重定向位置而不是操作提交表单

> ID：11958923
> 
> 赞同：3
> 
> 时间：2012-08-14T18:55:24.990
> 
> 标签：php, html, forms, rss, onsubmit

**问题：**
我有一个 RSS 提要。你们中的一些人可能知道，RSS 提要并不总是及时更新（我正在使用 FeedBurner），所以我想在我的网页上提供更新 RSS 提要的选项。这是一个简单的过程，我只需要 ping 一个地址。问题是：我想留在初始页面上，理想情况下刷新它。

我已经看到了一些使用隐藏 iframe 和 javascript、Ajax 等的“解决方案”。
我想知道是否有***一种使用 php/html 的优雅方法来做到这一点。***

下面是一个流程图，准确地说明了我希望系统如何运行。 ![](../Images/f431b92b91b488c0d7900d2f05e91aaf.png)

**编辑：**
这是我目前拥有的简单表单代码：

```
<form action="http://url.to.ping" method="post">
   <input type="submit" value="Refresh" />
</form> 
```

这是一个标准表单，在提交时执行操作。我现在要求浏览器目标（从用户看来）是与操作中*不同*的url。值得注意的是，操作页面**不在**我的域中，也不属于我拥有或有权访问的域。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:28:42.913

我的意思是，

/contactme.php

一旦他们提交并返回页面，是否还有其他变量，例如

/contactme.php?thanks=1

基本上有什么可以声明他们刚刚提交并返回原始页面，如果是的话..

你可以这样做；

```
<?php
if(isset($_GET['thanks']))
{
    $pingServer = file_get_contents('http://www.the.server.to.ping.com/pingit.php');
    unset($pingServer);
}
?> 
```

在页面底部，它只会点击该页面。

这样您就不会依赖启用的 JavaScript，并且用户不会在多个 URL 之间跳来跳去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:22:14.000

当我需要登录页面与处理页面不同时，我所做的就是添加一个 JavaScript 重定向，将他们的“感谢填写我的表单”材料放在其中。

因此，代码过程将是：

1.  用户填写表单，点击提交
2.  服务器端验证和处理。
3.  如果成功，则`location.href(URL, 0);`执行错误情况
4.  用户被重定向到新 URL（您的刷新页面）

# google-apps-script - 如何在文档中创建上标/下标字符？

> ID：11958924
> 
> 赞同：1
> 
> 时间：2012-08-14T18:55:24.950
> 
> 标签：google-apps-script

我正在编写一个脚本，将一些专有格式的文档转换为谷歌文档。我已经能够处理大多数各种格式选项（字体、磅值、粗体等），但我被困在下标和上标上。

我试过用下标段落创建一个新的谷歌文档。然后，我编写了一个脚本来查看段落和子项，在这两种情况下都没有看到为下划线设置的属性。

我尝试将文本包装在^(st)中，但这只会将确切的文本添加到文档中。这是我目前正在使用的一些代码：

```
if (superscript == true ) {
  paragraph.appendText(txt.sup()).setAttributes(style);
} else if (subscript == true) {
  paragraph.appendText(txt.sub()).setAttributes(style);
} else {
  paragraph.appendText(txt).setAttributes(style);
} 
```

还有什么要尝试的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T15:31:16.280

目前没有办法做到这一点——如果可能的话，它会存在于 Text 类 API ( [https://developers.google.com/apps-script/reference/document/text](https://developers.google.com/apps-script/reference/document/text) ) 中的某个地方。

我在这里提交了上标/下标的功能请求[https://code.google.com/p/google-apps-script-issues/issues/detail?id=2885](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2885)。随意给问题加注星标以注册您的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-22T03:48:11.650

为了任何寻找这个的人的利益，自从这个问题被作为一个[`TextAlignment`类](https://developers.google.com/apps-script/reference/document/text-alignment)[`getTextAttributeIndices`](https://developers.google.com/apps-script/reference/document/text#getTextAttributeIndices())提出以来，它就被实现了——它在文档中没有明确说明*，但幸运的是，这些在使用该方法观察到的文本元素上创建了索引。

^(* 如中，它不是由列出的属性，`getAttributes`而是*被* 索引的`getTextAttributeIndices()`)

我刚刚修改了我正在处理的 Docs-to-markdown 处理脚本，以合并子和上标对齐处理，这可能作为一个有用的示例（参见[commit diff](https://github.com/lmmx/gdocs2md-html/commit/8519a10e385cd54e0e9bcd57cd2c76d2dda2463b)）。

请注意，如果跨段落应用，则该`getTextAlignment`方法返回`null`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-07T00:41:47.163

*   您想使用 Google Apps 脚本将上标和下标字符放入 Google 文档。

如果我的理解是正确的，那么这个示例脚本怎么样？不幸的是，即使在现阶段，仍然没有使用文档服务放置上标和下标字符的方法。

但是当使用 2019 年初添加的 Google Docs API 时，这些都可以实现。将来可能会将此类功能添加到文档服务中。因此，作为当前的解决方法，我想提出使用 Docs API 的方法。示例脚本如下。

**在使用此脚本之前，请在[Advanced Google services](https://developers.google.com/apps-script/guides/services/advanced#enabling_advanced_services)中启用 Google Docs API 。**

### 示例脚本：

```
function myFunction() {
  var documentId = "###"; // Please set document ID here.

  var resource = {requests: [
    {insertText: {text: "SampleSuperscriptSubscript", location: {index: 1}}},
    {updateTextStyle: {range: {startIndex: 7, endIndex: 18}, textStyle: {baselineOffset: "SUPERSCRIPT"}, fields: "baselineOffset"}},
    {updateTextStyle: {range: {startIndex: 18, endIndex: 27}, textStyle: {baselineOffset: "SUBSCRIPT"}, fields: "baselineOffset"}}
  ]};
  Docs.Documents.batchUpdate(resource, documentId);
} 
```

### 结果：

当为新的 Google 文档运行上述脚本时，将获得以下结果。首先，`SampleSuperscriptSubscript`放置一个文本。然后，修改文本样式。这些是使用 batchUpdate 方法运行的。如果要将这些值放入现有 Document，请修改`resource`.

[![在此处输入图像描述](../Images/9b21e99779ce358b94653c70f38b3747.png)](https://i.stack.imgur.com/Hi4QH.png)

### 参考：

*   [文件服务](https://developers.google.com/apps-script/reference/document/)
*   [谷歌文档 API](https://developers.google.com/docs/api/)
*   [高级谷歌服务](https://developers.google.com/apps-script/guides/services/advanced)
*   [方法：documents.batchUpdate](https://developers.google.com/docs/api/reference/rest/v1/documents/batchUpdate)
*   [文本样式](https://developers.google.com/docs/api/reference/rest/v1/documents#textstyle)
*   [基线偏移](https://developers.google.com/docs/api/reference/rest/v1/documents#BaselineOffset)

如果这不是你想要的方向，我很抱歉。

# objective-c - dispatch_async 冲突

> ID：11958932
> 
> 赞同：0
> 
> 时间：2012-08-14T18:56:02.420
> 
> 标签：objective-c, ios

目前我正在开发一个聊天应用程序，我正在尝试上传图像，除了图像上传 UI 冻结时，一切都工作正常，所以异步方法进入了场景，这就是我想要做的：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    [self dismissModalViewControllerAnimated:YES];
        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul);
        dispatch_async(queue, ^{

        UIImage *image = [info objectForKey: UIImagePickerControllerOriginalImage]; 
        NSData *imgData = UIImageJPEGRepresentation(image, 1.0);

        //[self performSelectorOnMainThread:@selector(send:) withObject:imgData waitUntilDone:YES];

        [self send:imgData];
});

} 
```

我收到此错误：

> 试图从除主线程或 web 线程之外的线程获取 web lock。这可能是从辅助线程调用 UIKit 的结果。现在崩溃...
> 
> 1.  Web线程锁
> 2.  -[UITextView 设置文本：]
> 3.  -[HPTextView 内部设置文本：]
> 4.  -[HPGrowingTextView 设置文本：]
> 5.  -[chatViewController 发送：]
> 6.  __74-[chatViewController imagePickerController:didFinishPickingMediaWithInfo:]_block_invoke_0
> 7.  _dispatch_call_block_and_release
> 8.  _dispatch_worker_thread2
> 9.  _pthread_wqthread
> 10.  start_wqthread

我正在使用 HPGrowingTextView 提供一种 iMessage 类型的可扩展输入区域来输入消息，但是遇到了这个问题。

我搜索了这个错误

> 试图从除主线程或 web 线程之外的线程获取 web lock。这可能是从辅助线程调用 UIKit 的结果

人们建议使用`performSelectorOnMainThread`，但这种方法再次冻结了 UI。

如何解决这个冲突或者有没有其他方法。

```
Inside [self send:imageData]
...building a url and appending hFile(imageData)
[body appendData:[NSData dataWithData:hFile]];
            [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
            // setting the body of the post to the reqeust
            [request setHTTPBody:body];

            NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
            NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

            NSString *imgUrl = [NSString stringWithFormat:@"http://www.www.www/uImages/thumbs/%@",returnString];
... 
```

上传后，返回图像的缩略图，如果我使用`[NSURLConnection sendAsynchronousRequest`我会得到空的缩略图，我正在 uitableview 中显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:20:15.253

当您想更改 UI 中的任何内容时，您应该在主线程上进行。

因此，如果您想更改`HPGrowingTextView`您拥有的控件文本，您可以执行以下操作：

```
dispatch_async(dispatch_get_main_queue(), ^{
    growingTextView.text = @"Some text";
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:34:09.753

您正在崩溃，因为您在主线程之外调用 send 。关于这个事实，堆栈跟踪是显而易见的。

您需要在主线程上进行这些调用。但是，当你这样做时，你的 UI 当然会因为这个调用而挂起......

```
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

从方法名可以看出，这个调用是同步的，会阻塞直到返回结果。

因此，您需要改用异步形式。

```
sendAsynchronousRequest:queue:completionHandler: 
```

# latex - 如何使用 anysize 或 cm-super 更改 Sphinx latexpdf 中的字体大小？

> ID：11958934
> 
> 赞同：1
> 
> 时间：2012-08-14T18:56:05.973
> 
> 标签：latex, python-sphinx, tex

这不是[这个问题](https://stackoverflow.com/questions/9899283/how-do-you-change-the-code-example-font-size-in-latex-pdf-output-with-sphinx)的重复：我正在尝试为所有元素设置更大的字体大小。我设法将字体大小设置为 12 而不是 10，但它仍然太小而无法阅读。

Werner 在评论中建议使用`cm-super`字体或`anysize`扩展名。我可以在 Ubuntu 中看到这样的包。我该如何安装它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:23:29.527

默认文档类仅允许某些基本字体大小（`10pt`或`11pt`）`12pt`。`40pt`不支持。您需要包含支持该字体大小的软件包。喜欢[`anyfontsize`](http://ctan.org/pkg/anyfontsize)或[`lmodern`](http://ctan.org/pkg/lm)或[`cm-super`](http://ctan.org/pkg/cm-super)。然后你会在你的文档中使用类似的东西`\fontsize{40}{51}\selectfont`，而不是`40pt`作为文档类选项提供。

有关软件包的安装，请参阅[如何在 Debian 或 Ubuntu 上安装“vanilla”TeXLive？](https://tex.stackexchange.com/q/1092/5764)或[如何更新我的 TeX 发行版？](https://tex.stackexchange.com/q/55437/5764)

# asp.net-mvc - 负载平衡环境中的 Elmah XML 日志记录

> ID：11958937
> 
> 赞同：1
> 
> 时间：2012-08-14T18:56:15.130
> 
> 标签：asp.net-mvc, elmah

我们正在为一个内部应用程序实现 Elmah。对于开发和测试，我们使用单个服务器实例，但在生产环境中，应用程序是使用负载平衡环境交付的。

除了日志在每台服务器中独立完成之外，一切都像 Elmah 一样迷人。我的意思是，如果 Server1 中发生错误，则 xml 文件物理存储在该服务器上，对于 Server2 也是如此，因为我将这些文件存储在 App_Data

当我访问 axd 位置以查看错误列表时，我只看到碰巧参加我请求的服务器。

除了将它们放在共享文件夹中之外，还有什么方法可以合并 xml 文件？拥有一个共享文件夹将使我们允许在服务器上执行应用程序的用户有权访问该单独的文件夹，并且只能在其中一个服务器上而不是同时在两个服务器上。

我不能使用内存或数据库日志，因为 FileLog 是唯一允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:59:14.643

在这种情况下，您可能会考虑使用[ElmahR](https://bitbucket.org/wasp/elmahr/wiki/Home)，因为您无法实现内存或数据库日志记录。ElmahR 将为您提供两个负载平衡服务器的中心位置，以通过 Http 帖子将错误发送到（除了在本地记录它们）。然后您可以访问 ElmahR 站点以查看汇总列表。此外，ElmahR 将错误消息存储在 SqlServerCE 数据库中，因此它可以保存收到的错误消息。

请记住，如果 ElamhR Dashboard 应用程序设计不能满足您的初始需求/愿望，则可以根据需要对其进行修改，因为它是一个开源项目。

希望这可能是一个可行的选择。

# php - 使用 php 和 javascript 流式传输视频

> ID：11958938
> 
> 赞同：1
> 
> 时间：2012-08-14T18:56:17.903
> 
> 标签：php, javascript

你好，所以我正在使用以下脚本通过 php 脚本将几个文件上传到我的 apache 服务器

```
$uploaddir = 'photos/';
$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir . $file;
if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) else 
```

我的目标是让我的服务器压缩并将它们发送到网页，以便直播视频并相应地删除它们。我将如何执行并将视频转换为 mpeg 或 h264 格式？我还应该在每次有新视频上传到服务器时重定向最终网页，还是使用 javascript 进行长轮询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:58:14.623

要转换您的视频，请查看[FFMPEG](http://ffmpeg.org/)。它处理许多编解码器和容器格式。我建议直接使用 直接执行它`exec()`，但也有一个[PHP 扩展](http://ffmpeg-php.sourceforge.net/)可用。

另外，你现在所做的非常不安全！永远不要将用户上传的内容留在网络根目录中……否则，他们可以上传他们想要远程控制您的服务器的任何脚本。也不要留下原始文件名。将文件命名为在 Web 根目录之外的伪随机文件，没有文件扩展名。将文件详细信息（例如原始名称和内容类型）保存在数据库中。

# jquery - 将页面发布到 iframe 会导致弹出窗口阻止程序阻止发布操作

> ID：11958940
> 
> 赞同：3
> 
> 时间：2012-08-14T18:56:22.920
> 
> 标签：jquery, post, iframe, popup

我正在尝试从帖子中加载一个页面以将其加载到 Iframe 中，其中 POST 变量与将要加载的页面一起发送。没有明确打开新窗口的内容，但我在 FF 和 Chrome 中收到弹出窗口阻止通知。IE 还没有阻止 POST，但可能会在未来的更新中。下面列出的是触发弹出的代码。

```
gamePage.name = 'game_page';
setTimeout('', 100);
gamePage.onload = setTimeout("$.download(getCompletePath() +'account/SomeFile.php',  gameId='+game_Id+'&playMode=J', 'post', 'game_page')", 0); 
```

这是 $.download 函数：

```
jQuery.download = function(url, data, method, target){
    //url and data options required
    if( url && data ){ 
        //data can be string of parameters or array/object
        data = typeof data == 'string' ? data : jQuery.param(data);
        //split params into form inputs
        var inputs = '';
        jQuery.each(data.split('&'), function(){ 
            var pair = this.split('=');
            inputs+='<input type="hidden" name="'+ pair[0] +'" value="'+ pair[1] +'" />'; 
        });
        //send request
        jQuery('<form action="'+ url +'" method="'+ (method||'post') +'" target="' + target +'">'+inputs+'</form>')
        .appendTo('body').submit().remove();
    };
}; 
```

目前，我们正在通过 GET 执行此操作，但如果不是所有 GET 请求，我们将尽可能切换到 POST。在发布到 iframe 时如何绕过弹出窗口阻止程序的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T09:30:53.140

而不是 iFrame，只使用一个简单的 DIV。

*调用 jQuery.post() 方法，并使用 jQuery.html(/ response* /) 函数将响应作为你的 div 的 innerHTML 。

像这样的东西：

```
$.post("urlToLoad.ext", { name: "John", time: "2pm" })
.success(function(data) {
    $('#yourDivID').html(data);
}); 
```

# parsing - 在 PowerShell 语法中，“lvalueExpression”规则是什么意思？

> ID：11958941
> 
> 赞同：3
> 
> 时间：2012-08-14T18:56:32.493
> 
> 标签：parsing, powershell, grammar, ebnf

我正在查看此处发布的 PowerShell 语法：http: [//www.manning.com/payette/AppCexcerpt.pdf](http://www.manning.com/payette/AppCexcerpt.pdf)

（我认为它自 PowerShell v1 以来没有更新，并且存在一些拼写错误。所以，它显然不是**真正**的PowerShell 语法，而是一个以人为本的文档。）

在 C.2.1 节中，它说：

```
<lvalueExpression> = <lvalue> [? |? <lvalue>]* 
```

问号的含义是什么？我不知道它的意思是“匹配任何字符”还是“匹配问号”或者是拼写错误。

我不确定这是要匹配的输入，但也许是这样的：

```
$a,$b = 1, 2 
```

在这种情况下，问号应该是逗号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T23:36:23.583

根据其在上述规则 ( `<assignmentStatementRule> = <lvalueExpression> <AssignmentOperatorToken> <pipelineRule>`) 中的使用，似乎`lvalueExpression`在[Windows PowerShell in Action的](http://www.manning.com/payette)[附录 C](http://www.manning.com/payette/AppCexcerpt.pdf)中对应于[Joey](https://stackoverflow.com/q/11958941#comment15936543_11958941)链接到的[The PowerShell Language Specification 的](http://www.microsoft.com/en-us/download/details.aspx?id=9706)B.2.3**节**。比这更进一步匹配它是困难的，但无论如何我会添加一些猜测:)`expression`

 **中的`?`字符`[? |? <lvalue>]*`很可能是错误的。如果它被用来表示“前一个标记是可选的”，那么：

*   它所应用的`[`和`|`标记应该被引用
*   仅`[`作为值表达式的一部分才有意义，但该`propertyOrArrayReferenceOperator`规则稍后已经涵盖了索引
*   `?`不在语法中的其他任何地方使用，但多次用于表示“可以出现零次或一次`{0|1}` *”*

鉴于它与本节中第一条规则末尾的相似性`[ '|' <cmdletCall> ]*`，它可能是一个复制粘贴错误，加上一个“智能引用”往返编码错误。假设这是为了稍后编辑而复制的，那么`?|?`可能已经成为`'.'`表示多个属性访问（但同样，这已被`propertyOrArrayReferenceOperator`规则涵盖）。

**虽然基于第C.2.1**节末尾的声明“[管道规则] 也处理解析赋值表达式”，`lvalueExpression`但可能是为了列出除`simpleLvalue`(例如`cast-expression`for `[int]$x = 1`、`array-literal-expression`for `$a,$b,$c = 1,2,3`) 等之外的所有可赋值表达式。**

# blackberry - 将 FMS RTMP 直播流转换为 BlackBerry 的 RTSP

> ID：11958945
> 
> 赞同：0
> 
> 时间：2012-08-14T18:56:40.350
> 
> 标签：blackberry, rtsp, rtmp, flash-media-server, live-streaming

有没有办法将 RTMP 实时流从 FMS 4.5 转换为 BlackBerry 应用程序的 RTSP？我部署了 FMS 4.5 服务器，希望通过本机应用程序向 BlackBerry 用户启用实时流媒体，根据 BlackBerry 文档，在 BlackBerry 设备上支持实时流媒体的唯一协议是 HTTP 和 RTSP。

[BlackBerry 支持媒体流](http://docs.blackberry.com/en/developers/deliverables/11844/feature_media_streaming_438282_11.jsp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T11:03:26.860

您可以在 cgi 中使用 rtmpdump 并写入标准输出，不会是 rtsp，只是 http。这就是我在没有 Flash 的情况下使用 NBC 播放 rtmp 流的方式。该脚本以 rtmp 流作为参数调用。如：

[http://example.com/cgi-bin/nbc.cgi?nbcv=url-minus-domain/movie.mp4](http://example.com/cgi-bin/nbc.cgi?nbcv=url-minus-domain/movie.mp4)

```
#!/usr/bin/env python

import cgi
import subprocess

rtmpdump='/usr/local/bin/rtmpdump';
# use the quiet switch we are writing the video to stdout.
quiet='-q';

# swf verification
swfUrlswitch='-s';
swfUrl='http://www.nbc.com/assets/video/3-0/swf/NBCVideoApp.swf';

rtmpUrlswitch='-r';
rtmpbase= 'rtmp://cp81777.edgefcs.net/ondemand/';
# grab the argument
a=cgi.FieldStorage()

rtmpUrl=rtmpbase+a.getvalue('nbcv');

pargs=[rtmpdump,quiet,swfUrlswitch,swfUrl,rtmpUrlswitch,rtmpUrl]

# http headers 
if rtmpUrl[-3:]=='mp4':
    print 'Content-Type: video/x-mp4'
if rtmpUrl[-3:]=='flv':
    print 'Content-Type: video/x-flv'

# make sure you print a blank line after the header.
print ''
# call rtmpdump
subprocess.Popen(pargs) 
```

# android - 在图像下方设置超链接

> ID：11958949
> 
> 赞同：-2
> 
> 时间：2012-08-14T18:56:52.817
> 
> 标签：android, hyperlink

我想在我的活动中在我的图像下方设置超链接。例如，当我单击超链接时，新活动应该打开

我的 Main.java 文件

```
>package com.a.test;  
import android.app.Activity;  
import android.content.Intent;  
import android.net.Uri;  
import android.os.Bundle;  
import android.text.method.LinkMovementMethod;  
import android.view.View;  
import android.widget.Button;  
import android.widget.TextView;  
import android.widget.Toast;  
public class Main extends Activity {  
/** Called when the activity is first created. */  
    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main);  
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/background"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center_vertical"
android:orientation="vertical" >

<ImageView
android:id="@+id/product"
android:layout_width="match_parent"
android:layout_height="192dp"
android:layout_gravity="top"
android:contentDescription="@string/test"
android:gravity="center"
android:scaleType="fitCenter"
android:src="@drawable/img9" />

<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/hello" />

<TextView
android:id="@+id/textview2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="  Brand Name: Dolce and Gabbana"
android:textColor="#000000" />

<TextView
android:id="@+id/textview1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:ellipsize="end"
android:text="  Color: Light Green"
android:textColor="#000000" />
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="  Product Name: Hand Bag"
android:textColor="#000000" />

<TextView
android:layout_width="310dp"
android:layout_height="wrap_content"
android:text="  Price: $599.89"
android:textColor="#000000" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:14:21.920

设置应该包含以下链接的 TextView 的文本：

```
 SpannableString text = new SpannableString("Lorem ipsum dolor sit amet");
 ClickableSpan clickableSpan = new ClickableSpan() {
    @Override
    public void onClick(View view) {
        startActivity(new Intent(context , NewActivity.class));
    }
};
text.setSpan(clickableSpan, start, end, 0); 
TextView textView = (TextView) findViewById(R.id.textView1);
textView.setText(text);
textView.setMovementMethod(LinkMovementMethod.getInstance());
textView.setText(text, BufferType.SPANNABLE); 
```

请注意，“开始”和“结束”是您要作为链接的字符串部分的相应索引。

# python - Python从数组索引更改数组的值

> ID：11958950
> 
> 赞同：-5
> 
> 时间：2012-08-14T18:56:57.030
> 
> 标签：python

```
a=["a",["b",["c","d","e"],"f","g"],"h","j"]
b=a
index=[1,1,1]
for c in index:
  b=b[c]
print("Value: "+b.__str__())
#Code for change value to "k"
print(a)#result is ["a",["b",["c","k","e"],"f","g"],"h","j"] 
```

在那里我可以获得价值，但我想把它换成另一个。

yourDict[1][1][1] = "测试"

不是这样的。索引必须来自数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:22:32.837

```
yourDict['b']['d']['b'] = "test" 
```

* * *

*编辑*——OP提到这是不可接受的，因为索引必须来自运行时定义的任意长度的列表。

解决方案：

```
reduce(lambda d,i:d[i], indexList[:-1], yourDict)[indexList[-1]] = "test" 
```

* * *

演示：

```
>>> yourDict = {'a':1, 'b':{'c':1, 'd': {'b':1}}}
>>> indexList = ['b','d','b']

>>> reduce(lambda d,i:d[i], indexList[:-1], yourDict)[indexList[-1]] = "test"
>>> yourDict
{'a': 1, 'b': {'c': 1, 'd': {'b': 'test'}}} 
```

演示 2：

```
>>> yourDict = {'a':1, 'b':{'c':1, 'd': {'b':1}}}
>>> indexList=['a']

>>> reduce(lambda d,i:d[i], indexList[:-1], yourDict)[indexList[-1]] = "test"
>>> yourDict
{'a': 'test', 'b': {'c': 1, 'd': {'b': 1}}} 
```

# php - 如何使 json 变量成为 php 变量？

> ID：11958951
> 
> 赞同：-3
> 
> 时间：2012-08-14T18:57:01.837
> 
> 标签：php, json

刚刚学习json。我在这里有一个 php 脚本，它可以获取 Google 的示例地理编码 json 结果，我想知道如何获取该结果的一部分并将其转换为 php 变量。这是我所拥有的：

```
<?php

$data = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true");
echo $data;

?> 
```

这显示了一个带有许多键和值的 JSON 字符串。我想知道如何将 LAT 和 LON 从 JSON 中取出并将它们转换为 $lat 和 $lon，可在 php 中使用。

谢谢，山姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:58:37.230

用于[`json_decode`](http://php.net/json_decode)将其转换为 PHP 数据结构，然后像任何其他 PHP 数据结构一样访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:02:09.123

```
$string = 'some json blah blah';
$array = json_decode($string, true); // Second param turns it into a full array, not an array of objects

echo '<pre>', print_r($array), '</pre>'; // echo it out 
```

# java - Spring Security 简单应用

> ID：11958955
> 
> 赞同：1
> 
> 时间：2012-08-14T18:57:19.040
> 
> 标签：java, spring, spring-security

嗨，我是 Spring Security 的新手，但我在使用 Spring 方面有一些经验，我按照 mkyong.com 网站上的教程在 Spring 3.07 中创建简单的应用程序，它运行良好但是当我尝试添加注释时“@secured ('ROLE_ADMIN ')”，我发现错误“无法创建 loginCONtroller bean” 任何人都可以指出错误或为我提供简单的 SPring 安全应用程序这是我的代码

web.xml

```
 <web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>Spring MVC Application</display-name>

    <!-- Spring MVC -->
    <servlet>
        <servlet-name>mvc-dispatcher</servlet-name>
        <servlet-class>
                    org.springframework.web.servlet.DispatcherServlet
                </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

     <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>
                  org.springframework.web.context.ContextLoaderListener
                </listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/mvc-dispatcher-servlet.xml,
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
                  org.springframework.web.filter.DelegatingFilterProxy
                </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

springsecurity.xml（调度程序 servlet）

```
 <beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:s="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security
                    http://www.springframework.org/schema/security/spring-security-3.0.xsd">   

 <s:global-method-security secured-annotations="enabled" />
 <s:http auto-config="true" use-expressions="true">
    <s:intercept-url pattern="/index.jsp" access="permitAll" />
    <s:intercept-url pattern="/welcome*" access="hasRole('ROLE_USER')" />
    <s:intercept-url pattern="/helloadmin*" access="hasRole('ROLE_ADMIN')" />
    <s:form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <s:logout logout-success-url="/logout" />
</s:http>
<bean id="LoginController" class="com.mkyong.common.controller.LoginController" />
<s:authentication-manager>
  <s:authentication-provider>
    <s:user-service>
        <s:user name="joseph" password="123456" authorities="ROLE_USER,ROLE_ADMIN" />
        <s:user name="jane" password="123456" authorities="ROLE_USER" />          
    </s:user-service>
  </s:authentication-provider>
</s:authentication-manager>
</beans> 
```

mvc 调度程序 servlet.xml

```
 <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="com.mkyong.common.controller" >
    </context:component-scan>
    <bean
      class="org.springframework.web.servlet.view.InternalResourceViewResolver">
      <property name="prefix">
        <value>/WEB-INF/pages/</value>
      </property>
      <property name="suffix">
        <value>.jsp</value>
      </property>
    </bean>

</beans> 
```

登录控制器.java

```
 @Controller
public class LoginController {

    @RequestMapping(value = "/welcome", method = RequestMethod.GET)
    public String printWelcome(ModelMap model, Principal principal) {

        String name = principal.getName();
        model.addAttribute("username", name);
        model.addAttribute("message", "Spring Security Custom Form example");
        return "hello";

    }

    @RequestMapping(value = "/login", method = RequestMethod.GET)
    public String login(ModelMap model) {

        return "login";

    }

    // @Secured("ROLE_ADMIN")
     @RequestMapping(value="/delete", method = RequestMethod.GET)
    public String DeleteAll(ModelMap model, Principal principal ) {
        return "deleteUsers";
    }

    @RequestMapping(value = "/loginfailed", method = RequestMethod.GET)
    public String loginerror(ModelMap model) {

        model.addAttribute("error", "true");
        return "login";

    }

    @RequestMapping(value = "/logout", method = RequestMethod.GET)
    public String logout(ModelMap model) {

        return "login";

    }

    } 
```

当前状态下的代码成功执行，但是当我删除 @Secured('ROLE_ADMIN') 代码的注释时显示错误无法创建登录控制器 bean 谁能告诉我我缺少什么或提供简单的 Spring SEcurity 应用程序的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:24:17.010

对我来说没问题。但我使用的是 3.1.0.RELEASE 而不是 3.0.7。另外，请检查您的进口。应该是 import org.springframework.security.access.annotation.Secured；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:14:13.503

只需使用这个：`@Secured({"ROLE_ADMIN"})`

# modeling - Visio 2007 的 UML 功能：它支持什么方法？

> ID：11958958
> 
> 赞同：1
> 
> 时间：2012-08-14T18:57:34.563
> 
> 标签：modeling, visio, uml, methodology

我正在尝试使用 Visio 2007 在 UML 中描述正在开发的系统。

您在 Web 上找到的大多数 UML 图示例都相当简单，尤其是类图。但是在 Visio 中，您会发现许多其他实体：异常对象、组件对象、大量原型、实体之间的关系、对多种语言（包括伪代码）的支持和模型层次结构查看器（无法在其中移动东西，但我离题了）。

让我好奇的是：这里不仅仅是简单地绘制图表。您可以输入的许多信息和您可以构建的交叉引用都指向一个实际可行的模型，可能用于代码生成。但是我无法找到正在实施的建模愿景，或者它支持什么方法。

这个实现支持谁的想法？这是为什么系统建模方法设计的？有可用的资源吗？

# tridion - 是否可以默认为 SDL Tridion 2011 CME 的“主视图”而不是仪表板？

> ID：11958962
> 
> 赞同：6
> 
> 时间：2012-08-14T18:57:44.333
> 
> 标签：tridion

SDL Tridion 2011 在 CME 中引入了新的仪表板（或控制面板）。在`User Preferences > View Settings`该页面下，用户可以更改其启动视图以加载主视图而不是仪表板。是否可以将此设置为所有用户的系统范围设置？

我们有兴趣这样做，因为我们有一个希望我们的编辑看到的默认自定义页面，但是由于默认加载仪表板，该页面不再加载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T20:16:53.417

我们可以在每个用户的设置中做到这一点：

1.  设置：`Screen Displayed after starting SDL Tridion`到主视图
2.  保持未选中`Start on specific folder`状态。
3.  右键单击一个自定义页面并将其设置为`default`。

该用户现在将在该默认自定义页面上打开 Tridion。

但是，我看到组织希望为*所有*用户设置此设置，而无需手动进行。我已经能够在我的个人 VM 上这样做，但不能将其推荐用于生产环境：

在`%TRIDION_HOME%\web\WebUI\Editors\CME\Configuration\CME.config`中，将以下内容设置为现有的自定义页面 URI。

```
<settings>
  <defaultpage>/Views/Dashboard/Dashboard.aspx#locationId=cme:0-1-custompg</defaultpage>
  <navigatorurl>/Views/Dashboard/Dashboard.aspx#locationId=cme:0-1-custompg</navigatorurl>
  ...
</settings> 
```

所以是的，至少*可以为这个版本的 SDL Tridion 强制默认设置。*但我不确定支持的方式。

# javascript - 我的 AJAX 请求对象没有正确解析 URL 的协议部分

> ID：11958964
> 
> 赞同：2
> 
> 时间：2012-08-14T18:57:58.790
> 
> 标签：javascript, ajax, https

我正在尝试从安全页面发送 AJAX 请求，但 XMLHttpRequest 对象无法正确解析 URL 的协议部分。这种行为在 Safari、Chrome 和 Canary 中是相同的。

这是我的 JavaScript：

```
function sendGETRequest(url, params, callback) {
    "use strict";
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState === 4) {
            if (req.status !== 200) {
                callback({ajaxError: true, status: req.status});
            } else {
                callback(req);
            }
        }
    };
    req.open("GET", url + "?" + params, true);
    req.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    req.send();
} 
```

以下是传递给 sendGETRequest() 的一些不同 URL 及其结果：

```
url = "ajax/";
GET https://mydomain/mypage/ajax/?params 404 (NOT FOUND) 
```

以上是预期的行为：相对 url 在协议完好无损的情况下正确解析。

```
url = "/ajax/";
The page at https://mydomain/mypage/ displayed insecure content from http://mydomain/ajax/?params. 
```

在这里，真实 url 正确地附加到域根目录，但使用了错误的协议。

```
url = "https://mydomain/ajax/";
The page at https://mydomain/mypage/ displayed insecure content from http://mydomain/ajax/?params. 
```

在这里，协议只是被忽略了。

需要明确的是，我并不是在尝试解决相同的原产地政策。我想将 AJAX 请求从安全页面发送到具有相同（安全）来源的资源。我怎样才能完成这个简单的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:08:43.467

这里有一个关于这个话题的对话：http: [//bytes.com/topic/javascript/answers/459071-ajax-https](http://bytes.com/topic/javascript/answers/459071-ajax-https)

最后一篇文章指出“绝对明确；XML HTTP 请求在 https 上的工作与在 http 上的工作完全一样。如果他们不这样做，我们的 QA 部门现在会说些什么，因为他们几乎完全通过 https 进行测试”

也许服务器在发出请求时没有使用 Https (ssl) `mydomain/ajax/`：.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:41:12.420

这与 HTTP 和 HTTPS 无关。正如您在评论中提到的，由于同源策略，该请求永远不会被发送。如果请求从未发送，请求怎么会使用错误的策略？令您困惑的是，生成错误消息的任何程序/附加组件/工具/等都显示“HTTP”而不是“HTTPS”。设置 HTTPS 时，请求是并且始终尊重 HTTPS。

您真正的问题很简单，就是您违反了跨域政策。看到这个： [https ://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file:_URIs](https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file%3a_URIs)

您不能向上走目录树，只能向下走。在第一个示例中，您正在请求一个子文件夹。没关系。在第二个和第三个示例中，您正在从父目录请求一个页面（即，而不是`https://mydomain/mypage/ajax/`您正在请求`https://mydomain/ajax/`. 您不能向这样的目录树提出请求。

将您的索引页面移动到域的根目录，或者更改在文件上发送的同源策略标头，或者在服务器上创建一个子目录来处理请求（您可以使用 PHP 的[include](http://us3.php.net/manual/en/function.include.php)之类的东西来仅包含父文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T03:17:49.863

这是 WebKit 中的一个错误。它已在 Safari 5 中针对 Lion**而非**Snow Leopard 进行了修复，并且已在 Chrome 中修复但未在**Canary**中修复，......真是个错误。

# jquery - 尾声滑块错误

> ID：11958965
> 
> 赞同：0
> 
> 时间：2012-08-14T18:58:02.580
> 
> 标签：jquery, asp.net, html, visual-studio-2008, coda-slider

我目前正在尝试在我的网站中实施 Coda-Slider 3。

除了查看滑块是否真的可以工作并且它不工作之外，我还没有做任何事情。

加载后，我得到了布局和所有内容，但滑块不会滑动，并且内容区域中有损坏的图像和“正在加载...”文本。

我也在状态栏中收到错误消息

“对象不支持方法行的此属性：5”

这是我的 javascript / html

```
<script src="Scripts/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.coda-slider-3.0.min.js" type="text/javascript"></script>
<link href="CSS/coda-slider.css" rel="stylesheet" type="text/css" />
<link href="CSS/Stylesheet1.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">
    $(document).ready(function() {
        $("#slidertabs").codaSlider();
    });
</script>

</head>
<body>
<form id="form1" runat="server">
<div class="coda-slider" id="slidertabs">
    <div>
        <h2 class="title">Trial</h2>
            bambambasdfasf
            adfasf
    </div>
    <div>
        <h2 class="title">Trial 2</h2>
            la mambaafasdf
            asdfasfsa
    </div>
</div>
</form> 
```

源代码

```
<script src="Scripts/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.coda-slider-3.0.min.js" type="text/javascript"></script>
<link href="CSS/coda-slider.css" rel="stylesheet" type="text/css" /><link href="CSS/Stylesheet1.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">
    $(document).ready(function() {
        $("#slidertabs").codaSlider();
    });
</script>

</head>
<body>
<form name="form1" method="post" action="User.aspx" id="form1">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTQzMzc5MDEyMmRkIe8VCRe6PXi+FaNtf5wR5Ucxk58=" />
</div>

<div class="coda-slider" id="slidertabs">
    <div>
        <h2 class="title">Trial</h2>
            bambambasdfasf
            adfasf
    </div>
    <div>
        <h2 class="title">Trial 2</h2>
            la mambaafasdf
            asdfasfsa
    </div>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:10:22.687

总是在任何其他依赖它的库之前加载 jQuery，比如 jQuery UI。

来自[http://kevinbatdorf.github.com/codaslider/](http://kevinbatdorf.github.com/codaslider/)

> You also need to be sure you import the jQuery, jQuery UI, and the Coda Slider script files as well as the Coda Slider stylesheet. See below for detailed instructions and advanced options.

# redis - Redis SLAVE 在 MASTER 宕机时刷新数据

> ID：11958968
> 
> 赞同：2
> 
> 时间：2012-08-14T18:58:11.693
> 
> 标签：redis, replication

我已经在我的主服务器和从服务器中注释了“保存”命令，因为我只想在内存缓存中执行而不是持久保存到文件中。这工作正常，但是一旦主服务器关闭并且在从服务器可以提升为主服务器之前（它实际上会冻结一分钟），它就会开始刷新数据。如何防止从站刷新数据。

谢谢 zafer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:33:09.643

实际上，当主服务器宕机时，从服务器不会刷新数据。

当它失去与master的连接时，它开始与master进行SYNC（之前刷新数据），并再次建立连接。

IMO，问题是主服务器立即重新启动，因此从服务器可以在提升为主服务器之前重新连接。

您应该延迟主服务器的重启，直到从服务器被提升。根据 HA 的自动化方式，它可能不太方便。一个简单（但不是很可靠）的解决方案是在 Redis 实例的启动脚本中放置一个延迟。应该计算延迟，以便您 100% 确定从站将在超时之前被提升。一个更复杂的解决方案是尝试在master的启动脚本中连接到slave，并在允许启动之前运行INFO命令检查它的状态。

有关更多信息，请参阅以下讨论：

[https://groups.google.com/d/topic/redis-db/wmRSuIgHcEs/discussion](https://groups.google.com/d/topic/redis-db/wmRSuIgHcEs/discussion)

# c# - 使用 Linq 查询填充 Datagrid

> ID：11958970
> 
> 赞同：0
> 
> 时间：2012-08-14T18:58:16.293
> 
> 标签：c#, .net, wpf, linq, datagrid

我有以下 wpf 形式的数据网格：

```
<DataGrid Name="DataGrid" AutoGenerateColumns="False" VerticalScrollBarVisibility="Auto">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Name" Width="200"></DataGridTextColumn>
        <DataGridTextColumn Header="Text" Width="200"></DataGridTextColumn>
        <DataGridTemplateColumn Header="Edit" Width="50">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button>View Details</Button>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

我想从我的代码中填充它。我使用 linq 语句来获取我想放入数据网格的值

```
var query =
    (
        from modules ...
        join ...
        join ...
        where ...
        select new { ID = modules.ID, Name = strings.Name, Text = stringTexts.Text }
    ); 
```

我想用查询中的名称和文本填充“名称”和“文本”列，但我也希望每一行都有一个按钮，当按下该按钮时，我必须知道的 ID按下的行，但 ID 不必显示在网格上。

如何使用这些值填充网格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:04:07.307

告诉列绑定到属性使用

```
<DataGridTextColumn Header="Name" Width="200" Binding="{Binding Name}" /> 
```

以此类推其他列。

然后在后面的代码中

```
DataGrid.ItemsSource = query; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:15:15.107

这应该适合你：

```
Grid.DataSource = from x in modules
                  select new
                  {
                      x.Name,
                      x.Text
                  };
Grid.DataBind(); 
```

祝你好运！

# android-activity - ADB 和 Activity Manager 问题

> ID：11958973
> 
> 赞同：1
> 
> 时间：2012-08-14T18:58:39.570
> 
> 标签：android-activity, adb

已使用 adb Activity Manager 阅读了我 Galaxy S2 上启动器应用程序中的 Activity。

我在我的 Windows PC 上启动 ADB Logcat 并在我的设备上启动应用程序，然后我可以看到哪个 Activity 准确启动。

现在我有一个新设备，一个 Galaxy S3。我在这个设备上尝试了相同的 adb logcat，活动管理器不显示来自应用程序的活动，只显示来自应用程序的 pid、uid，但不显示更多活动名称？

设备的驱动程序已正确安装并且设备已root。

为什么我看不到应用程序中的 adb logcat 活动？

对不起我的英语不好。:)

格雷茨

# java - Spring 3.0 Helloworld 示例

> ID：11958975
> 
> 赞同：1
> 
> 时间：2012-08-14T18:58:43.277
> 
> 标签：java, spring, jsp, spring-mvc

这是我第一次尝试使用 Spring。我可能犯了一个愚蠢的错误，但我找不到它。

我使用 GlassFish 3.1.2 版作为服务器。当我运行程序时，我得到了索引页。在此页面上，我单击链接，然后出现错误：

```
WARNING: No mapping found for HTTP request with URI [/nameProject/hello.html] in DispatcherServlet with name 'dispatcher' 
```

感谢您的帮助。

这些是我的文件：

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>redirect.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

调度程序-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/>

<!--
Most controllers will use the ControllerClassNameHandlerMapping above, but
for the index controller we are using ParameterizableViewController, so we must
define an explicit mapping for it.
-->
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
        </props>
    </property>
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<!--
The index controller.
-->
<bean name="indexController"
      class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="index" />

<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
<mvc:annotation-driven />          

</beans> 
```

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="http://www.springframework.org/schema/context

   http://www.springframework.org/schema/context/spring-context-3.0.xsd
   http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<context:component-scan base-package="example" />

</beans> 
```

HelloWorldController.java：

```
package example;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class HelloWorldController {

    @RequestMapping("/hello")
    public ModelAndView hello(){
        String message = "Good evening sir.";
        return new ModelAndView("hello", "message", message);
    }

} 
```

你好.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <h1>${message}</h1>
</body>
</html> 
```

index.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Welcome to Spring Web MVC project</title>
</head>

<body>
    <a href="hello.html">Say hello</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:03:54.933

您在 href 上的文件扩展名是`.html`，因此调度程序 servlet 应该允许 . `html`图案

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
    <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:40:22.973

如果要启用spring mvc注解，spring配置中需要这几行

```
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"

http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd

<mvc:annotation-driven />

<context:component-scan base-package="example" /> 
```

* * *

编辑：

1.在类级别和方法级别启用@RequestMapping注解也需要遵循XML

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" /> 
```

2.删除关于更改 indexController 的错误建议

3.请将班级更改为：

```
@Controller
//@RequestMapping("/hello"), you still can use class level mapping, but it's optional
public class HelloWorldController {

    @RequestMapping("/hello") //a must-set, also can be something like ("/hello/index")
    public ModelAndView hello(){ //method renamed, the original name is same as Constructor name, which is not recommended
        String message = "Good evening sir.";
        return new ModelAndView("hello", "message", message);
    }
} 
```

# java - Java - 从图像的 RGB 值中减去一个标量

> ID：11958981
> 
> 赞同：0
> 
> 时间：2012-08-14T18:59:17.123
> 
> 标签：java, image, rgb

使用 Java 编辑：以及除 ImageMagick/JMagick 之外的良好图像库：

我想从**所有**像素的 RGB 值中减去一个标量（比如 100）（最低为零）。这有效地使图像变暗。

例如，对于具有**R: 20 G: 103 B: 200**的给定像素，在减去该像素之后，该像素应该是**R: 0 G: 3 B: 100**（再次，我想在所有像素上快速有效地执行此操作，而不仅仅是一）

我已经尝试过使用 ImageMagick 并得到不精确的结果 - 减法准确并且没有舍入错误等至关重要。还有其他擅长这个的图书馆吗？是否有其他选项不处理迭代 RGB 值数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:04:21.300

该类`BufferedImage`具有可作用于单个像素或像素数组的a`getRGB()`和方法。`setRGB()`

[http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:58:03.367

试试这个：如果 R 或 G 或 B 是负数，那么你可以将其设为 0。

```
//At first get the RGB value
int RGB=getRGB(x,y);
int R=RGB>>>16-100; //shift by 16 bit to get the R value
if(R<0) R=0;
int G=(RGB<<<8)>>>16-100;//clear the preceding numbers than shift 16 bit
if(G<0) G=0;
int B=(RGB<<<16)>>>16-100;
if(B<0)B=0;
int newRGB=R<<<16+G<<<8+B;
setRGB(x,y,newRGB); 
```

# cookies - JMeter Cookie Manager - 不存储 cookie？

> ID：11958983
> 
> 赞同：1
> 
> 时间：2012-08-14T18:59:20.107
> 
> 标签：cookies, jmeter

请投票结束，而不是投反对票。既然有答案，我就不能删除这个问题。

几天来我一直在玩 JMeter，我开始进入看起来更陡峭的学习曲线部分。我添加了一个登录请求（我必须把它放在线程组的循环控制器中）。然后，我有一个 cookie 管理器，然后是登录后由浏览器发出的两个请求（根据 fiddler）。接下来的两个请求虽然需要一个 cookie，但它们现在似乎无法正常工作。我已将 Cookie 管理器设置为 Cookie 策略的“兼容性”。然后我查看视图结果树，我看到登录后的两个请求都失败了，在请求选项卡中我看到“[no cookies]”。

比较费解。这是一个屏幕截图。

![截屏。](../Images/53f7a1bcb8180913cc9791680b71c73c.png)

我稍微修改了我的登录请求：

![在此处输入图像描述](../Images/cc2210762b97e880d7ea97ca35a73c65.png)

但是下一个请求仍然失败，并显示“未登录”和“禁止”消息：

![在此处输入图像描述](../Images/0b14afbc43f3ee219f116975d6f85d58.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:45:33.300

不确定，因为我没有完整的测试计划，但您的登录请求似乎失败了，因为您在树结果中获得了从 http 到 https 的重定向。

正如您在树中看到的那样，您在 Login 内有 2 个样本，一个是 http，一个是 http。

我建议如果您是初学者，请阅读以下内容：

*   [http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

它将帮助您轻松构建您的测试计划。

如果您使用代理没有成功，那么我建议您删除循环控制器并仅使用一次迭代进行测试以查看发生了什么。您可以单击树结果中的采样器并选择请求选项卡。

检查您的登录请求是否使用 https，它在 http 采样器的方案中。

如果它是您无法预料的重定向，则禁用跟随重定向并使用正则表达式后处理器：

*   [http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)

从重定向中提取 url 并在下一个 http 采样器中使用登录名和密码提交。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:14:35.650

我必须更多地了解对系统发出的请求才能使其正常工作。我没有调用 www.server.com/login，而是向 www.server.com/sessions.json 发出请求，并提供了一个包含用户名和密码的 json 文件。点此设置 cookie 和 cookie 管理器接管。然后在不修改其他两个请求的情况下，一切都是 honky dory。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-17T07:37:47.127

根据您发布的图像，我发现了错误。Cookie 管理器应在“测试计划”范围内。您已经创建了一个范围为 HTTP 请求的 Cookie 管理器。请将 HTTP Cookie 管理器保留为标准设置。它应该工作。 [在此处输入图像描述](https://i.stack.imgur.com/aPcq1.jpg)

有关更多详细信息，请参阅以下 JMeter 文档 [http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cookie_Manager](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cookie_Manager)

# php - 如何将参数绑定到未准备好的查询？

> ID：11958985
> 
> 赞同：8
> 
> 时间：2012-08-14T18:59:19.983
> 
> 标签：php, pdo, mysqli

我正在制作一个小型 Web 应用程序，它将定期接收用户输入的数据。在研究如何确保首先清理数据输入时，似乎准备好的语句是要走的路。

但是，我发现[了这个 SO question](https://stackoverflow.com/questions/535464/when-not-to-use-prepared-statements)，并且由于我的应用程序（至少据我所知）不会对每个页面请求进行一个以上的查询，看来我真正需要的只是将值绑定到参数查询。

我一直在查看有关 PDO 和 mysqli 的 PHP 手册，但我找不到任何将值绑定到普通查询的示例。我发现的所有示例`$stmt->prepare`在绑定之前都有一个地方。

语句是否“准备好”是由数据库的支持决定的，而准备语句将始终在代码中？或者有没有办法将参数直接绑定到一个`$dbh->query(...)`？

为了解释为什么我想看看它是否可以不使用准备，是由于我在帖子前面链接的 SO question 中的这个声明：

> 什么时候不使用准备好的语句？当您在数据库连接消失之前只运行一次语句时。
> 
> 什么时候不使用绑定查询参数（这实际上是大多数人使用准备好的语句来获取的）？

和这个

> 我个人不会打扰。伪准备语句可能对它们可能提供的安全变量引用有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T19:03:20.643

> 如何将参数绑定到未准备好的查询？

你没有。带参数的 SQL 字符串（即特定位置的问号）需要先被解析（即*准备好*），然后这些问号才能被视为参数值的插入点。

因此，您始终需要先调用`prepare()`，然后才能调用`bind()`。

* * *

**参数化语句**是包含 SQL 和占位符标记的字符串（例如问号，但不同的数据库使用不同的占位符）：

```
$sql = "SELECT user_id FROM user WHERE user_name = ?" 
```

现在假设您要在此位置插入一个**值：**

```
$_POST["username"] 
```

**从广义上讲，准备一个语句**给问号赋予其特殊含义*“可以在此处插入一个值”*。换句话说，它从占位符创建*参数。*

```
$stmt->prepare($sql) 
```

**将值绑定到参数**会将参数设置为特定值。

```
$stmt->bind_param("s", $_POST["username"]) 
```

现在可以执行查询，而无需 SQL 字符串和用户提供的值实际上相互接触。**这是重要的一点：** SQL 和参数值分别发送到服务器。他们从不互相接触。

```
$stmt->execute(); 
```

优点是：

*   您可以将新值绑定到参数并再次执行查询，而无需重复所有操作（在循环中很有用）。
*   SQL 注入是不可能的，无论`$_POST["username"]`包含什么值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T19:33:03.050

You Don't. Here's why:

If using `$dbh->query(...)` you can just call sql with the parameters interpolated into the sql string. By using a query like

```
$dbh->query("INS INTO MY_TABLE_OF_NAMES ('$name');"); 
```

10 or so years ago, this is how most sql was done. This is the most straight forward way of invoking the database, using the SQL interface alreaady implemented by the RDMS, without the need for a special lower level interface. But people discovered that this was dangerous because of something called sql injection.

[http://en.wikipedia.org/wiki/Sql_injection](http://en.wikipedia.org/wiki/Sql_injection)

The simplest and most common example goes something like this. Suppose you had a sql call in your web page that would run:

```
 INS INTO MY_TABLE_OF_NAMES VALUE ('$name'); 
```

But then someone would come to your site and enter there name as `bob'); DROP TABLE MY_TABLE_OF_NAMES;`

suddenly your interpolated sql statement becomes

```
INS INTO MY_TABLE_OF_NAMES VALUE ('bob'); DROP TABLE MY_TABLE_OF_NAMES; ); 
```

which would subsequently insert bob into your database, delete all of your names, and throw an error for the trailing `);` when your website ran it.

So, prepared statements were invented. Instead of interpolating string directly into your strings it will use `?` chars to denote dynamic values, and a `bind` function is used to insert the string safely. This way manevolent input will never be interpreted as SQL code by your database engine and you site cant be tricked into doing things it doesnt want to do. The prepare command takes a sql string takes a bit of sql and semi compiles into a lower level database langauge leaving spaces open of dynamic strings wherever a `?` is used. Bind then takes one of those open spaces and fills it with a piece of data, encoded to escaped ascii, so that it cannot be misinterpreted as SQL code. Once all of those `?`s are filled, the sql is ready to be sent to the RDMS to be run.

So to answer your question, you will never bind a parameter to a simple query. If you want dynamic varables in a simple query you will just interpolate them into the SQL string. But this is dangerous. Prepared statements allow you to precompile a sql statement then safely bind dynamic parameters to it to create safe dynamic SQL. Binding to sql is purely a construct of prepared statements.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:13:23.350

为了使用绑定参数，您必须使用准备好的语句。这正是目前在 pdo 和 mysqli 中实现的方式。我不确定某些数据库产品是否支持某种类型的通信协议，其中参数化 sql（使用占位符的 sql 文本）与参数值一起发送，而无需先进行显式准备调用，但 pdo 和 mysqli 不会公开此功能（如果可用）。这肯定是 Web 应用程序的一个受欢迎的功能。

使用 pdo，是的，调用时是否实际准备好 sql 语句`$dbh->prepare($sql)`取决于数据库支持。当数据库不支持准备好的语句时，pdo 将模拟它们，或者如果配置为这样做，它总是可以模拟它们。事实上，pdo 默认模拟 mysql 驱动程序的预处理语句，并且默认情况下这样做了很长时间。它通过创建动态 sql 来模拟它们，引用值，就像你一样。在这种情况下，当您调用`$stmt->execute()`. 是的，在某些情况下，这里可以进行 sql 注入。

# google-maps-api-3 - 使用 XML 填充 GoogleMap

> ID：11958987
> 
> 赞同：0
> 
> 时间：2012-08-14T18:59:42.413
> 
> 标签：google-maps-api-3

我为我的地图点创建了一个自定义 XML 结构。该结构类似于下面的代码。我想读取这些点并将它们相应地放在地图上，点击时会弹出一个窗口和一个特定的标记图标。我将不胜感激任何帮助。

地图点.xml

```
<MapPoints>
<MapPoint PointID="1">
    <LocationName></LocationName>
    <LocationAddress></LocationAddress>
    <LocationURL></LocationURL>
    <LocationExt></LocationExt>
    <LocationFax></LocationFax>
    <LocationLat></LocationLat>
    <LocationLong></LocationLong>
    <LocationMarker></LocationMarker>
</MapPoint>
<MapPoint PointID="2">
    <LocationName></LocationName>
    <LocationAddress></LocationAddress>
    <LocationURL></LocationURL>
    <LocationExt></LocationExt>
    <LocationFax></LocationFax>
    <LocationLat></LocationLat>
    <LocationLong></LocationLong>
    <LocationMarker></LocationMarker>
</MapPoint>
<MapPoint PointID="3">
    <LocationName></LocationName>
    <LocationAddress></LocationAddress>
    <LocationURL></LocationURL>
    <LocationExt></LocationExt>
    <LocationFax></LocationFax>
    <LocationLat></LocationLat>
    <LocationLong></LocationLong>
    <LocationMarker></LocationMarker>
</MapPoint>
<MapPoint PointID="4">
    <LocationName></LocationName>
    <LocationAddress></LocationAddress>
    <LocationURL></LocationURL>
    <LocationExt></LocationExt>
    <LocationFax></LocationFax>
    <LocationLat></LocationLat>
    <LocationLong></LocationLong>
    <LocationMarker></LocationMarker>
</MapPoint>
</MapPoints> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:36:16.373

使用[jQuery](http://jquery.org/)。在您的 html 文档的开头，放入以下行：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script> 
```

现在对本地 XML 文件使用 jQuery ajax 调用。

```
 //pulls in the xml
        $.ajax({
        type: "GET",
            url: "MapPoints.xml",
            dataType: "xml",
            success: function(xml) {
                $(xml).find('MapPoint').each(function(){
                    var lat = $.trim(this.LocationLat);
                    var lng = $.trim(this.LocationLng);

                    //use the same method to extract your other data
                    var mappoint = new google.maps.LatLng(lng,lat);

                    //now create the marker and set it to your map
                    var marker = new google.maps.Marker({
                     position:mappoint,
                     map:map,
                     title:'Your Marker Title',
                     icon:null
                    });

                });

            }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:55:10.210

有很多使用属性以“Mike Williams Google Maps API v2 教程”格式解析 xml 的示例，[这里是一个](http://www.geocodezip.com/v3_MW_example_map3.html).

要使用您的“自定义”格式，您需要替换此行（查找“MapPoint”而不是“标记”）：

```
var markers = xmlDoc.documentElement.getElementsByTagName("marker"); 
```

这些行：

```
 var lat = parseFloat(markers[i].getAttribute("lat"));
      var lng = parseFloat(markers[i].getAttribute("lng"));
      var point = new google.maps.LatLng(lat,lng);
      var html = markers[i].getAttribute("html");
      var label = markers[i].getAttribute("label");
      // create the marker
      var marker = createMarker(point,label,html); 
```

使用从 xml 中解析元素内容的代码。

要获取元素内容，您需要执行以下操作：

```
var lat = parseFloat(nodeValue(markers[i].getElementsByTagName("LocationLat")[0])); 
```

其中 nodeValue （从 geoxml3 借来的）是：

```
//nodeValue: Extract the text value of a DOM node, with leading and trailing whitespace trimmed
geoXML3.nodeValue = function(node) {
  var retStr="";
  if (!node) {
    return '';
  }
   if(node.nodeType==3||node.nodeType==4||node.nodeType==2){
      retStr+=node.nodeValue;
   }else if(node.nodeType==1||node.nodeType==9||node.nodeType==11){
      for(var i=0;i<node.childNodes.length;++i){
         retStr+=arguments.callee(node.childNodes[i]);
      }
   }
   return retStr;
}; 
```

# profiling - 函数式语言的简单时序分析器

> ID：11958988
> 
> 赞同：3
> 
> 时间：2012-08-14T18:59:47.480
> 
> 标签：profiling, ocaml

我需要一个简单的时序分析器来估计我的程序的某些部分的运行时间（用 OCaml 编写，但我相信这可以适用于其他函数式语言），我找不到一个非常简单的解决方案，类似于编写代码在命令式语言中，使用诸如`timer.start`/之类的函数`timer.stop`。所以我尝试了一个使用惰性评估的方法，它对我的​​需要非常有效，但是我没有找到对这种方法的任何引用，所以我想知道这种方法有缺陷，或者是否有更简单的解决方案。

所以，问题是：你知道函数式语言（尤其是 OCaml）的类似实现吗？如果是这样，请向我指出，我想借用他们的一些想法来改进我的“穷人的剖析器”（我看过[这个问题](https://stackoverflow.com/questions/9191718/tools-for-profiling-ocaml-code "用于分析 OCaml 代码的工具")，但对我没有多大帮助）。据我所见，GHC 已经有办法收集时间信息，所以这对 Haskell 来说可能不是问题。

顺便说一句，我尝试按照 OCaml 手册（17.4）中的说明进行时序分析，但它对于我需要的东西来说太“低级”了：它在 C 函数级别提供了大量信息，这使得评估变得更加困难正是 OCaml 代码的哪一部分是罪魁祸首。

下面是我在 OCaml 中的实现（请注意，每次我想测量时间时都需要添加“惰性”表达式，但同时我可以很好地控制我需要多少信息）。

```
open Unix (* for the timers *)

(** 'timers' associates keys (strings) to time counters, 
   to allow for multiple simultaneous measurements. *)
let timers : (string, (float * float)) Hashtbl.t = Hashtbl.create 1

(** starts the timer associated with key <name> *)
let timer_start (name : string) : unit =
  let now = Unix.times () in
  Hashtbl.replace timers name (now.tms_utime, now.tms_stime)

(** Returns time elapsed between the corresponding call to 
   timer_start and this call *)
let timer_stop (name : string) : float =
  try
    let now = Unix.times () in
    let t = Hashtbl.find timers name in
    (now.tms_utime -. fst t) +. (now.tms_stime -. snd t)
  with
    Not_found -> 0.0

(** Wrapper for the timer function using lazy evaluation *)
let time (s : string) (e : 'a Lazy.t) : 'a =
  timer_start s;
  let a = Lazy.force e in
  let t2 = timer_stop s in
  (* outputs timing information *)
  Printf.printf "TIMER,%s,%f\n" s t2; a

(** Example *)
let rec fibo n = 
  match n with
    | 0 -> 1
    | 1 -> 1
    | n' -> fibo (n - 1) + fibo (n - 2)

let main =
  let f = time "fibo" (lazy (fibo 42)) in
  Printf.printf "f = %d\n" f 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:04:09.557

`Unix.times`测量 CPU 时间，而不是挂钟时间。因此，这仅适用于将所有时间都花在 CPU 上的计算代码。并且 BTW hashtbl 不需要，即使对于多个同时测量，只需返回开始时间`timer_start`并将其减去`timer_stop`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:36:05.433

合并来自@Jeffrey_Scofield 和@ygrek 的想法，“最穷人的时序分析器”确实非常简单，几乎不需要提及，这可以解释为什么我没有找到它。所以我合并了他们的答案并制作了一个更简单的版本：

```
open Unix (* for the timers *)

(* Wrapper for the timer function using a "unit -> 'a" thunk *)
let time (s : string) (e : unit -> 'a) : 'a =
  let tstart = Unix.times () in
  let a = e () in
  let tend = Unix.times () in
  let delta = (tend.tms_utime -. tstart.tms_utime) +. 
              (tend.tms_stime -. tstart.tms_stime) in
  (* outputs timing information *)
  Printf.printf "TIMER,%s,%f\n" s delta; a

(* Example *)
let rec fibo n = 
  match n with
    | 0 -> 1
    | 1 -> 1
    | n' -> fibo (n - 1) + fibo (n - 2)

let main =
  let f = time "fibo" (fun () -> fibo 42) in
  Printf.printf "f = %d\n" f 
```

# python - 使用原始输入访问字典

> ID：11958989
> 
> 赞同：-1
> 
> 时间：2012-08-14T18:59:59.783
> 
> 标签：python, loops, if-statement, dictionary, raw-input

我正在尝试让用户输入 1、2、3、4、5、6。然后让该整数与我字典中的字符名称对齐。

```
characters = {
'Stark': '1',
'Greyjoy': '2',
'California': '3',
'Whitewalkers': '4',
'Knights Watch': '5',
'Dalthraki': '6'
 }   

print 'Type 1 for Stark'
print 'Type 2 for Greyjoy'
print 'Type 3 for Lannister'
print 'Type 4 for Whitewalkers'
print 'Type 5 for Knights Watch'
print 'Type 6 for Dalthraki' 
choice = raw_input("> ")
if choice in characters:
    print 'You\'ve selected', choice 
else:
    splash() 
```

在用户输入 1 后，我想让我的脚本打印“您已选择 Stark”。感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:04:29.563

你有`dict`倒退：

```
characters = {
'1': 'Stark',
'2': 'Greyjoy',
'3': 'California',
'4': 'Whitewalkers',
'5': 'Knights Watch',
'6': 'Dalthraki',
}   

print 'Type 1 for Stark'
print 'Type 2 for Greyjoy'
print 'Type 3 for Lannister'
print 'Type 4 for Whitewalkers'
print 'Type 5 for Knights Watch'
print 'Type 6 for Dalthraki' 
choice = raw_input("> ")
if choice in characters:
    print 'You\'ve selected', characters[choice] 
else:
    pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:03:01.407

将您的 dict 更改为：

```
characters = {
'1':'Stark',
 '2':'Greyjoy',
'3':'California',
'4':'Whitewalkers',
'5':'Knights Watch',
'6':'Dalthraki'
 } 
```

并使用：

```
if choice in characters:
    print 'You\'ve selected {0}'.format(characters[choice])
else:
    splash() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:11:07.810

你真的不能那样使用字典。您可以反转键/值对，然后使用 characters[choice] 来获取角色的名称。如果您想按原样保留字典，最好的办法是遍历项目

```
characterName = None
names = characters.items()
while characterName is None and names:
    if names[0][1] == choice:
        characterName = names[0][0]
    else:
        names = names[1:] 
```

运行此程序后，您将在 characterName 中有一个字符名称，或者如果用户输入了无效条目，它将为 None。

# salesforce - 刷新沙盒时的远程访问

> ID：11958992
> 
> 赞同：0
> 
> 时间：2012-08-14T19:00:10.200
> 
> 标签：salesforce, sandbox

刷新沙盒时，远程访问配置（客户端密码、用户的安全令牌）是否会更改？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:37:34.720

org id 可以，服务器可以。虽然不知道其他的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:47:15.190

是的，沙盒刷新后，所有安全信息都会发生变化。用户密码和令牌将与创建刷新时生产中的值相匹配。远程站点设置也将从生产中继承。

事实上，我们在刷新后有一个手动过程步骤来更新远程站点设置和我们的 Web 服务配置以指向我们的 QA 环境。

# javascript - ASP.Net VB - 显示数据手风琴样式

> ID：11958996
> 
> 赞同：0
> 
> 时间：2012-08-14T19:00:16.750
> 
> 标签：javascript, vb.net, gridview, datatable, treeview

我希望显示评论列表、用户名和发表评论的日期/时间。我正在从数据表中的查询中获取结果。我有数据表显示。我想显示我的结果是一个“Accordian”风格的树形视图。有没有办法让树视图显示不止一个数据字段在一行上？是否可以让它显示一个表格？使用javascript / J Query修改表格会更容易吗？

如果您有任何其他想法/建议，那将非常有帮助！只是寻找指导/想法。

干杯，格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:10:47.157

我的建议是使用 an`asp:listview`来显示您的信息，因为使用 listview，您可以完全控制呈现的 html（有关 listview 控件的更多信息[http://msdn.microsoft.com/en-us/magazine/cc337898 .aspx](http://msdn.microsoft.com/en-us/magazine/cc337898.aspx)）。

然后，对于“Accordian”风格，您可以使用 JQuery`.show`和`.hide`. 然后，您可以通过在显示一条“线”时关闭每条“线”来决定是否同时显示一条“线”。

# c# - 在表单中声明 C# 类对象

> ID：11958998
> 
> 赞同：1
> 
> 时间：2012-08-14T19:00:23.623
> 
> 标签：c#, visual-studio, forms, collections

可以放置`"view = new Person"`在按钮事件处理程序中吗？如果我不这样做，并且我将它放在 Form1 构造函数中，那么只会添加我的最后一个值。如果我想声明一个新实例然后将它添加到我的 Arraylist，这是正确的方法吗？

```
 private ArrayList store;

    public Form1()
    {
        InitializeComponent();
        store = new ArrayList();
    }

    private void Form1_Load(object sender, EventArgs e)
    { }

    private void button1_Click(object sender, EventArgs e)
    {
        //Is it okay to declare a new instance of the Person class 
        // with each button push?            
        Person view = new Person();
        view.firstname = txtFirstName.Text;
        view.lastname = txtLastName.Text;
        store.Add(view);
        txtFirstName.Clear();
        txtLastName.Clear();   
    }

    private void button2_Click(object sender, EventArgs e)
    {
        foreach (Person display in store)
        {
            MessageBox.Show(display.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T19:03:42.377

> 可以在按钮事件处理程序中放置“view = new Person”吗？

是的。如果您的目标是每次单击按钮时都创建一个新人，那么这样做是合适的。

附带说明：您应该考虑使用`List<Person>`而不是`ArrayList`. 这是较新的类型安全列表类（从 .NET 2.0 开始），使用起来更方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:12:07.210

这看起来*正是*你应该做的。

我想你在某处读到你应该避免做复杂的事情，比如在表单的事件处理程序中实例化对象。这听起来像是一种称为“模型-视图-控制器”的应用程序设计模式，要实现它，您将拥有一个与此处的 WinForm 分开的类，其中包含单击按钮时应执行的逻辑，以及窗体的相反，控件链接到此 Controller 的方法，而不是包含其自己的处理程序的表单。它有它的优点，但对于一般的小型项目来说，它是没有必要的。继续做你正在做的事情，一切都很好。

有几件事：首先，除非您使用 .NET 1.1 进行编码，否则 ArrayList 通常不是一件好事。从 .NET 2.0 开始，语言中引入了一个称为泛型的概念，泛型允许您做的主要事情之一是指定集合可以包含的对象的类型。该类`System.Collections.Generics.List<T>`是一个更好的选择，`store`因为它只存储人；将声明更改为`private List<Person> store;`. 使用泛型集合的优点是需要取出对象的代码将知道对象是什么类型，因为该集合将禁止向其添加不同类型的对象。

其次，在定义事件处理程序之前，在将按钮放入设计器时为其命名。代码应该是自记录的，一个名为“button1”的按钮并没有告诉我们它应该做什么。如果您在将该按钮从工具箱拖到窗体上之后将其命名为“CreatePersonButton”，那么当您双击它以定义其行为时，事件处理程序将被命名为“CreatePersonButton_Click”，这更具描述性。