# StackOverflow 问答 11062000-11062999

# macos - OSX上的OpenGL Adob e冲突

> ID：11062001
> 
> 赞同：2
> 
> 时间：2012-06-16T08:44:08.193
> 
> 标签：macos, opengl, adobe

我有一个用于粒子动力学的简单 OpenGL 程序。在 OSX 10.6.8 上编译时，当调用键盘处理程序时，程序会以以下方式退出。

*2012-06-16 07:30:28.110 xel2d.out[2846:903] 加载/Library/ScriptingAdditions/Adobe Unit Types.osax/Contents/MacOS/Adobe Unit Types 时出错：dlopen(/Library/ScriptingAdditions/Adobe Unit Types. osax/Contents/MacOS/Adobe Unit Types, 262)：找不到合适的图像。确实找到了：/Library/ScriptingAdditions/Adobe Unit Types.osax/Contents/MacOS/Adobe Unit Types：通用包装器 xel2d.out 中没有匹配的架构：OpenScripting.framework - 脚本添加“/Library/ScriptingAdditions/Adobe Unit Types.osax”声明没有可加载的处理程序。开始*

到底为什么 Adob​​e 会出现这种情况？相同的代码在 Linux 上编译并运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:39:39.417

这是您机器上的配置问题。只是垃圾（或至少移到一边）`/Library/ScriptingAdditions/Adobe Unit Types.osax`。

正如您可能已经猜到的那样，这是一个脚本添加。我猜你正在加载一些框架，然后尝试加载脚本添加。无法加载此特定脚本添加，因为它不是相同的体系结构。我怀疑您的程序是 64 位的，而脚本添加只是 32 位的。

我不知道 Adob​​e Unit Types.osax 来自哪里。网络搜索可能会告诉您。或者，如果把它移到一边，有什么东西坏了，那么你就会知道它需要什么。

# ruby-on-rails - 似乎 Rails 正在重播迁移

> ID：11062002
> 
> 赞同：1
> 
> 时间：2012-06-16T08:44:10.703
> 
> 标签：ruby-on-rails, rails-migrations

当我新迁移并运行它时，发生错误：

> $ rake db:migrate
> == CreateEReadings: 迁移 ======================================= ========
> -- create_table(:e_readings) rake 中止！发生错误，此迁移和所有后续迁移均已取消：
> 
> SQLite3::SQLException: 表“e_readings”已经存在

而这个 e_readings 是我使用迁移创建的最后一个表。

迁移文件名为：20120508145115_create_e_readings.rb

db/schema.rb 中的版本是：

> ：版本=> 20120508145115

似乎rails忘记了我已经运行了这个迁移并尝试重新播放它，所以发生了错误，但是为什么会发生这种情况，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:22:27.680

似乎您之前可能已经运行过它，但由于某种原因在创建表后它失败了。如果您确定它已经运行，您可以手动将记录添加到“schema_migrations”表，版本为 20120508145115。

如果这只是一个开发环境并且您不介意将它吹走，您也可以运行`rake db:reset`它会删除、创建、加载模式并重新植入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:50:08.080

我同意比灵顿和安迪的观点。如果是开发环境，请在终端中尝试以下操作：

```
rake db:drop
rake db:create
rake db:migrate 
```

这将破坏您的数据库，重新创建它并运行您的所有迁移。

您可以尝试的另一件事是使用回滚，`rake db:rollback`直到您看到此迁移（或之前的迁移）已回滚，然后`rake db:migrate`从该点再次运行直到您的最新点。`rake db:rollback`一次回滚一个迁移文件。

不过，我会选择删除并重新创建，以确保没有任何有趣的东西存在。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T12:35:04.040

我认为比灵顿是对的。您的迁移可能在您第一次运行时失败。除了他的建议之外，您还可以尝试手动从数据库中删除表并重新运行迁移，看看第一次出了什么问题

# php - 如何在php中通过mysql结果

> ID：11062003
> 
> 赞同：2
> 
> 时间：2012-06-16T08:44:29.443
> 
> 标签：php, foreach, fetch

我收到错误：`Invalid argument supplied for foreach()`

这是我连接到数据库的类：

```
class dbMySql {

    static function Exec($query) {
        // open database
        $conn = mysql_connect('localhost','root','****');
        if($conn == false) {
            throw new Exception(mysql_connect_error());
    }
        mysql_select_db('data',$conn);

    $result = mysql_query($query,$conn);

        if(is_bool($result) && !$result) {
            $error = mysql_error($conn);
            mysql_close($conn);
            throw new Exception($error);
        }

        mysql_close($conn);

    return $result;
    }
} 
```

我有这个代码：

```
echo '{ "results" : [ ';

$gettruck_result = dbMySql::Exec("SELECT  id, name, lat, lng FROM data)");
$result_array = array();

foreach($gettruck_result as $row) {

  $row_object = '{';
  $row_object .= '"id": "' . $row['id'] . '", ';
  $row_object .= '"name": "' . $row['name'] . '", ';
  $row_object .= '"lat": "' . $row['lat'] . '", ';
  $row_object .= '"lng": "' . $row['lng'] . '", ';
  $row_object .= '}';    
  $result_array[] = $row_object;
}

$result_str = implode(", ", $result_array);
echo $result_str;
echo " ] }";
?> 
```

知道为什么我在 foreach 循环中出现错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:57:33.047

你必须更换：

```
foreach($gettruck_result as $row) { 
```

... 和 ...

```
while($row = mysql_fetch_assoc($gettruck_result)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:39:53.813

您已检查结果数组是否为空..

```
if(mysql_num_rows($gettruck_result)>0)
{
     foreach($gettruck_result as $row) {
      .
      .
     }
} 
```

# php - PHP，MySQL - 在字段中查找特定部分并将其删除

> ID：11062004
> 
> 赞同：0
> 
> 时间：2012-06-16T08:44:30.737
> 
> 标签：php, mysql

例如：在我的表格中，我有带有以下文本的文本字段：

**敏捷的棕色狐狸跳过了懒惰的狗。**

如何找到**棕狐**并将其删除，以便新字段值为：

**快速跳过了懒惰的狗。**

这可能与MySQL有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T08:47:53.140

```
update `table`
    set `field` = replace(`field`, 'brown fox ', '')
    where `field` = 'The quick brown fox jumped over the lazy dog.'; 
```

**编辑：**正如@Cranio 指出的那样，我们需要删除“棕狐”两侧的间距才能获得预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T08:50:36.610

```
SELECT
CONCAT(
    LEFT("the quick brown fox jumps over the lazy dog",
        INSTR("the quick brown fox jumps over the lazy dog","brown fox")-1),
    MID("the quick brown fox jumps over the lazy dog",
        INSTR("the quick brown fox jumps over the lazy dog","brown fox")+
        LENGTH("brown fox"))
) 
```

使用字段将是

```
SELECT
CONCAT(
    LEFT(myField,
        INSTR(myField,substring)-1),
    MID(myField,
        INSTR(myField)+
        LENGTH(substring))
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T08:48:36.943

您可以使用编辑来检索该字段`like`，然后将其保存回来。

# asp.net-mvc-3 - MVC Action 被调用两次？

> ID：11062006
> 
> 赞同：4
> 
> 时间：2012-06-16T08:44:45.493
> 
> 标签：asp.net-mvc-3

我正在为一个项目使用 Asp.Net MVC3。

在其中一个页面中，我使用的是 MS Charts。在视图中，我有一个显示图表的图像，如下所示：

```
<img src="@Url.Action("RenderCharts", "Home", new
                 {
                     XAxisColor = ViewBag.XAxisColor,
                     YAxisColor = ViewBag.YAxisColor,

                 })" alt="Charts" runat="server"  /> 
```

我有 2 个复选框，用于更改图表轴颜色。单击复选框时，将提交页面并存储复选框状态并基于该图表呈现：

```
bool XAxisColor = (@ViewBag.XAxisColor) ?? true;
bool YAxisColor = @ViewBag.YAxisColor ?? false;

@Html.CheckBox("chkXAxisColor", XAxisColor, new { @Id = "chkXAxisColor", 
                       onClick = "this.form.submit();" })
        X Axis Color

@Html.CheckBox("chkYAxisColor", YAxisColor, new { @Id = "chkScatter", 
                      onClick = "this.form.submit();" })
        Y Axis Color 
```

首次加载页面时，会调用**RenderCharts() 操作**并呈现图表。但是，当我单击任何 CheckBox 时，**RenderCharts() Action**会被**调用两次**。

我无法理解这个问题。我创建了一个示例应用程序，可以从这里下载[https://www.dropbox.com/s/ig8gi3xh4cx245j/MVC_Test.zip](https://www.dropbox.com/s/ig8gi3xh4cx245j/MVC_Test.zip)

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:50:12.977

这似乎与 Internet Explorer 有关。使用您的示例应用程序，在 Google Chrome 和 Firefox 中一切正常，但在使用 IE9 时，回发时有两个 Action 请求。

使用网络选项卡上的 F12 开发人员工具，它显示了对 RenderCharts 的初始请求，该请求似乎已中止：

![网络活动图的捕获](../Images/8ada38a70d472fe940c10fb869b10b9b.png)

我怀疑中间的（中止）行是您看到的附加请求。为什么会这样，我不知道！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:35:52.147

终于得到了答案。问题是

```
runat="server" 
```

在 Img 标签中。

删除**runat**解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T19:28:52.123

我可以通过简单地使用一点 JQuery 来通过以下方式消除 IE 问题。一些可能的优势...

1.  它消除了跨浏览器的问题。
2.  这是一种不显眼的方法（不在视图中混合 javascript 和 HTML）。
3.  您可以通过 ajax 更新图像。

在脚本文件夹（例如“chart.js”）中创建一个新文件，该文件将简单地将匿名函数附加到文档就绪函数中复选框的单击事件。您显然还需要在页面中包含脚本引用：

```
$(document).ready(function () {
    // Attach a function to the click event of both checkboxes
    $("#chkXAxisColor,#chkScatter").click(function () {
        // Make an ajax request and send the current checkbox values.
        $.ajax({
            url: "/Home/RenderCharts",
            type: "GET",
            cache: false,
            data: {
                XAxisColor: $("#chkXAxisColor").attr("checked"),
                YAxisColor: $("#chkScatter").attr("checked")
            },
            success: function (result) {
                alert(result);
                $("#chart").attr("src", result);
            }
        });
    });
}); 
```

最重要的是，您可以从您的视图中消除 javascript :)

```
...
<div style="margin: 2px 0 2px 0">
    @Html.CheckBox("chkXAxisColor", XAxisColor, new { @Id = "chkXAxisColor" })
    X Axis Color
    @Html.CheckBox("chkYAxisColor", YAxisColor, new { @Id = "chkScatter" })
    Y Axis Color            
</div>
... 
```

这当然是一个非常基本的示例，它确实消除了 IE 问题，但您可以从那里获得更高级的更新图像 + 显示加载 gif 等方面的信息，只需几行。

希望这对您来说是一个可行的解决方案！

# javascript - Facebook API Javascript JSON 响应

> ID：11062007
> 
> 赞同：3
> 
> 时间：2012-06-16T08:44:52.733
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

```
function getUser()
{
    FB.api('/me', function(response) {
       console.log('Response is '+response);
       alert('Your name is ' + response.first_name);
       alert('Your last name is ' + response.last_name);
       alert('Your Gender is ' + response.gender);
       alert('Your status is '+response.username);
    } 
```

我怎样才能得到像下面这样打印的整个响应？

```
{
  "id": "blah blah", 
  "name": "blah blah", 
  "first_name": "blah blah", 
  "last_name": "blah blah", 
  "link": "https://www.facebook.com/blah blah", 
  "username": "blah blah", 
  "hometown": {
    "id": "106442706060302", 
    "name": "Pune, Maharashtra"
  }, 
  "location": {
    "id": "106377336067638", 
    "name": "Bangalore, India"
  }, 
  "bio": "╔══╗♫ ♪♫\n║██║\n║¨o•♫\n╚═|̲̅̅●̲̅̅|̅lιlllι ♫ I LoVe MuZiK!!\n\n█║▌│█│║▌║│█║▌│║\n® Copyright © 2012 ™\n█║▌│█│║▌║│█║▌│║\n\nReVoLt", 
  "gender": "male", 
  "relationship_status": "Single", 
  "timezone": 5.5, 
  "locale": "en_GB", 
  "verified": true, 
  "updated_time": "2012-06-15T05:33:31+0000", 
  "type": "user"
} 
```

同样通过 respose.name 获取用户名。如何在参数位置中获取位置，因为它是 JSON 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:17:53.607

使用 JSON.stringify(response); 它应该打印整个对象。

使用 JSON.parse() 或 jQuery.parseJSON(); 在此处解析和获取响应对象示例的任何属性：jsfiddle.net/epinapala/HrfkL 和此处：jsfiddle.net/epinapala/zfWWv/3

```
 var obj2 = JSON.parse('{"id":"579156356","name":"Vishal Jethani","first_name":"Vishal","last_name":"Jethani","link":"https://www.facebook.com/vishal.jethani","username":"vishal.jethani","hometown":{"id":"106442706060302","name":"Pune, Maharashtra"},"location":{"id":"106377336067638","name":"Bangalore, India"},"bio":"bye bye to bad characters","gender":"male","relationship_status":"Single","timezone":5.5,"locale":"en_GB","verified":true,"updated_time":"2012-06-15T05:33:31+0000","type":"user"}');
alert("Parsing with Json : " + obj2.location.name);​ 
```

对于请求者要求的多维数组：这应该有效：http: [//jsfiddle.net/epinapala/WQcDg/](http://jsfiddle.net/epinapala/WQcDg/)

```
var obj2 = JSON.parse('{"work":[{"employer":{"id":"185998961446429","name":"Pvt Ltd"}}]}');

alert("Parsing with Json : " + JSON.stringify(obj2.work[0].employer.name)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:04:23.607

我认为你必须使用 FB Graph api。如果您想要更多信息，那么您必须像这样使用

```
https://graph.facebook.com/579156356

https://graph.facebook.com/btaylor?access_token=AAAAAAITEghMBAHTRFEKjKcvFe1W2NJTu1Gsy20cNWEe0Dh98KoOhJEInZB1kXrMprNUaN6nq8FZA7YMZBvNVLwuz6pglh1SIBbZCnEECOAZDZD 
```

我正在使用这样的。

```
function(evt){
     console.log(evt.target.responseText);
     var FB_obj = JSON.parse(evt.target.responseText);
     console.log("fb id >>"+FB_obj.id);
     console.log("fb name >>"+FB_obj.name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T11:07:19.787

使用 Jquery get Json 方法 isted 使用纯 javascript，

1.  你需要获取Accesstoken
2.  将您的访问令牌替换为文本 YOUR_ACCESS_TOKEN 字段下方

我使用这个库来格式化日期， [https://github.com/datejs/Datejs](https://github.com/datejs/Datejs)

```
 $.getJSON("https://graph.facebook.com/5973249561/events/?access_token=YOUR_ACCESS_TOKEN&fields=id,name,description,start_time,place,cover,end_time&limit=4",
      function(result){
        for(x = 0; x < result.data.length; x++) {
          var id = result.data[x].id;
          var name = result.data[x].name;
          var cover = result.data[x].cover.source;
          var date = new Date(result.data[x].start_time);
          var place = result.data[x].place.name;
          var day = date.toString('dd');
          var month = date.toString('MMM');
          var url = 'https://facebook.com/'+id;
          var time = date.toString("hh:mm tt");
          $("#evt").append(name);
        }
      }); 
```

# php - PHP将列表项四舍五入到最接近的五个

> ID：11062009
> 
> 赞同：0
> 
> 时间：2012-06-16T08:44:57.977
> 
> 标签：php, list, rounding

我有一个由 10 个方形列表项组成的网格。有点像画廊。如果用户添加另一个项目，将会有 11 个。但是这看起来很奇怪，因为第 11^个项目将在新行中独立存在。如何使用 PHP 四舍五入到最接近的 5 并添加一些空白/虚拟列表项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:54:46.137

您可以使用[模运算符](http://de2.php.net/manual/en/language.operators.arithmetic.php)来识别除法的其余部分：

```
10 % 5 = 0
11 % 5 = 1
12 % 5 = 2
13 % 5 = 3
14 % 5 = 4
15 % 5 = 0 
```

有了它，您可以确定这样一个不完整的行是否（以及有多大）。知道最后一个不完整的行中有多少元素可以让您计算剩余单元格的数量以填充该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:02:57.150

```
($y+(($y%$x)?($x-($y%$x)):0)) 
```

...其中**$y**是项目数（例如 11），**$x**是一行中的项目数（例如 5）

# ios - CoreData 模型无法正常工作

> ID：11062020
> 
> 赞同：0
> 
> 时间：2012-06-16T08:47:08.737
> 
> 标签：ios, core-data, xcode4.3, core-data-migration, xcdatamodel

我正在更新一个使用 CoreData 的应用程序。在完整版本中，我制作了它，以便用户可以将他/她自己的数据保存在数据库中（应用程序填充一个预填充的数据库）。

该应用程序是在 Xcode 4.2 上编写的，部署目标是 iOS 4.1，所以在 ARC 和 Storyboards 之前。

现在我想稍微更新一下，将部署目标设置为 5.1 并将代码调整为最新的 Xcode，因此实现 Storyboards 和 ARC，因为我现在已经习惯了，而且我发现维护此代码更直观。所以我从头开始了一个新项目，我构建了故事板，并从 1.0 版本中拖动了大部分内容。此外，我检查了 Build Phases 选项卡上的“Compile Sources”和“Copy Bundle Resources”是否正常，并且包括我拖过的所有内容。

但是我遇到了数据库问题。当我尝试运行应用程序时它崩溃告诉我：

```
'Cannot create an NSPersistentStoreCoordinator with a nil model' 
```

所以我不确定我在这里做错了什么。我不想更改 CoreData 模型，因为一切都保持不变，我没有添加或删除任何实体或属性。所以我认为将旧模型拖到新项目就足够了。

这里有什么建议吗？我可以轻松地从头开始编写整个 codeData 内容，因为它并不是很复杂，但我相信购买完整版本并保存自定义数据的用户会非常沮丧。

任何建议都将受到欢迎。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:23:56.287

您需要检查您的 AppDelegate 方法`managedObjectModel`。确保它检索模型（检查`NSLog`语句）。很可能它与一些命名约定有关：

```
NSString *modelPath = [[NSBundle mainBundle] 
    pathForResource:@"Model" ofType:@"momd"];
NSURL *modelURL = [NSURL fileURLWithPath:modelPath]; 
```

专门检查您的`modelPath`.

此外，可能发生的情况是，当您导入模型时，您并没有真正导入所有文件。该模型实际上是一个名为的目录`YourModel.xcdatamodeld`，其中 final`d`大概代表“目录”。在 Finder 中，您实际上可以右键单击并选择`Show Package Contents`以确保必要的文件在那里（使用命令行更好）。里面应该有一个名为`YourModel.xcdatamodel`（不带`d`）的文件。在这方面应该至少有一个名为`content`（有时也是`layout`）的文件。它是一个简单的 XML 文件。

确保将所有这些都导入到您的项目中！

# javascript - 在 IE 中使用 javascript 删除单选按钮的问题

> ID：11062021
> 
> 赞同：0
> 
> 时间：2012-06-16T08:47:35.853
> 
> 标签：javascript, internet-explorer

我有一个动态创建单选按钮的实现，实际上所有字段和值都相互依赖，例如父子孙子等等。我可以删除按钮，但在 Firefox 中使用`innerHtml`但在 IE 中它不起作用。对于 IE，我得到了一个不同的代码，但在下面我粘贴生成它并删除它的代码时它也不能正常工作。

```
var idToUpdate = "radioID";
var nameToUpdate = "radioName";
var labelToUpdate = "labelText";

var tbody = document.createElement('tbody');
var row = document.createElement("tr")
var data1 = document.createElement("td")
var newRadio = document.createElement("input");
newRadio.type = "radio";
newRadio.id = idToUpdate;
newRadio.name = nameToUpdate;
newRadio.value = labelToUpdate;
if (defUpdater == 1)
    newRadio.setAttribute('checked', 'checked');
newRadio.setAttribute("onclick", "javascript:dependentFieldsValue('" + idToUpdate + "');");
var data11 = document.createElement("td")
var newLabel = document.createElement("label");
newLabel.htmlFor = idToUpdate;
newLabel.id = idToUpdate;
newLabel.appendChild(document.createTextNode(labelToUpdate));
tbody.appendChild(row);
row.appendChild(data1);
data1.appendChild(newRadio);
row.appendChild(data11);
data11.appendChild(newLabel);
Node1.appendChild(row);
defUpdater = 0; 
```

最后的for循环用于删除radio，我们只需使用表ID获取htmlelemnt并将innerHTML设置为“”。

```
for (var i = 0; i < len; i++) {
  var node = documnet.getElemtsById("tableID"); // every button group have table and table is havin id.
  Node.childNodes[i].innerHTML = ""; /// works for firefox// works fine
  //Node.childNodes[i].Node.removeChild(Node.childNodes[i]);// works for IE but not properly
} 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:44:04.503

我会使用这种结构：

```
var table = documnet.getElemtsById("tableID");
for (var i = 0; i < len; i++) { 
    var tr = table.childNodes[i];
    tr.parentNode.removeChild(tr);
} 
```

# php - PHP：将部分代码运行到后台

> ID：11062022
> 
> 赞同：0
> 
> 时间：2012-06-16T08:47:36.417
> 
> 标签：php, fork

我正在使用 Facebook SDK 在时间轴上发布一些内容。问题是 API 请求通常需要大约 2-3 秒，这会减慢我的网站速度，特别是因为我有很多 ajax 请求。

有没有办法将部分 PHP 代码分叉到后台？我希望所有全局、会话等都保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:07:08.807

您可以使用 PHP`exec()`执行单独的 PHP 脚本。

```
$cmd = "php5 -q /path/to/php/send_fb_request.php";

exec(sprintf("%s > %s 2>&1 & echo $! >> %s", $cmd, $outputfile, $pidfile)); 
```

然后如果你想监控进程是否仍在运行：

```
function isRunning($pid){
    try{
        $result = shell_exec(sprintf("ps %d", $pid));
        if( count(preg_split("/\n/", $result)) > 2){
            return true;
        }
    }catch(Exception $e){}

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:03:12.170

如果可能的话，我会为它创建一个队列，并从队列中执行那些时间成本问题，而不是从为您的网站生成和处理 Web 请求的 http 进程中执行。

这样您就可以完全控制，甚至可以将其与其他服务器分开，这是此类问题的最常见解决方案。

您最好使用真正的队列解决方案，但我也看到很多简单的 MySQL 解决方案在项目很小的情况下工作。在此处阅读有关此内容的更多信息： [http ://www.engineyard.com/blog/2011/5-subtle-ways-youre-using-mysql-as-a-queue-and-why-itll-bite-you/](http://www.engineyard.com/blog/2011/5-subtle-ways-youre-using-mysql-as-a-queue-and-why-itll-bite-you/)

还检查了我们的一些队列，它还允许诸如速率限制、日志记录和测量等可能发生在几个 API 上的事情。好处是它将发布和与外部方的实际处理分开，从而提供了控制和代码分离的中心点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T11:22:09.680

您可以尝试独立的 Symfony2 组件[Process](http://symfony.com/doc/current/components/process.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T09:13:45.497

听起来你在使用异步 PHP。这篇文章很好地解释了一种技术：http: [//petewarden.typepad.com/searchbrowser/2008/06/how-to-post-an.html](http://petewarden.typepad.com/searchbrowser/2008/06/how-to-post-an.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T14:35:32.913

请使用它，它对我有用。它工作得很棒。

```
$pid = pcntl_fork();
if($pid === -1) die('error: unable to fork.');
else if($pid) exit(0);

posix_setsid();
sleep(1);

ob_start(); 
```

# c# - 在 64 位机器上的 AnyCPU 与 x64 平台上构建的 C# 应用程序的性能

> ID：11062028
> 
> 赞同：34
> 
> 时间：2012-06-16T08:48:21.313
> 
> 标签：c#, .net, clr

我必须在 64 位机器上部署 C# 应用程序，尽管它也有可能部署在 32 位机器上。我应该针对 x86 和 x64 平台构建两个单独的可执行文件，还是应该针对“AnyCPU”平台构建单个可执行文件（在项目属性的“构建选项”中指定）。针对“AnyCPU”构建的 C# 程序集之间是否存在任何性能差异部署在 64 位机器上与专门针对“x64”平台构建的相同程序集？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-16T09:01:23.037

不，在 64 位 Windows 上运行的 AnyCPU 应用程序和在其上运行的 x64 应用程序之间的性能没有差异。唯一改变标志的是已编译程序集标头中的一些标志，CLR 仅使用它来决定是使用 x86 还是 x64，仅此而已

如果您问在 64 位 Windows 和 x64（或 AnyCPU）上运行的 x86 应用程序之间是否有区别，那么答案是肯定的。两者的区别在于：

*   64位显然使用的引用是32位的两倍，这意味着更大的内存消耗，但这也意味着你可以使用更多的内存
*   64 位可以使用更多的寄存器，这些寄存器只有在 CPU 的 64 位模式下才可用
*   64 位 JIT 与 32 位 JIT 不同，它有不同的优化集：例如 64 位 JIT 有时会使用[尾调用优化](http://en.wikipedia.org/wiki/Tail_call)，即使您没有使用`tail.`指令特别请求它（例如 C# 从来没有)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-02T16:30:15.400

作为上述答案的旁注。在使用 AnyCPU 的 x64 操作系统上将**P/Invoke**或**DotNetInterop**用于 x86 DLL*可能*会出现问题。在没有 64 位版本的 DLL 可用的情况下，可能需要编译 x86 而不是 AnyCPU，因为操作系统将尝试加载 64 位版本......并且失败。

# java - 有时，在使用 Liferay Portal 6.1.1 时，我会收到一个错误页面，其中包含下一个内容

> ID：11062041
> 
> 赞同：1
> 
> 时间：2012-06-16T08:52:00.487
> 
> 标签：java, jsp, liferay, portal, jsr286

有时，在使用 Liferay Portal 6.1.1 时，我会收到一个错误页面，其中包含下一个内容

有人可以解释一下，如何解决这个问题？

内容：

```
The page cannot be displayed
Explanation: The Web server refused the connection, possibly because a service on the upstream server is inactive.

Try the following:

    Refresh page: Search for the page again by clicking the Refresh button. The timeout may have occurred due to Internet congestion.
    Check spelling: Check that you typed the Web page address correctly. The address may have been mistyped.
    Access from a link: If there is a link to the page you are looking for, try accessing the page from that link.
    Contact website: You may want to contact the website administrator to make sure the Web page still exists. You can do this by using the e-mail address or phone number listed on the website home page. 

Technical Information (for support personnel)

    Error Code 10061: Connection refused
    Background: When the gateway or proxy server contacted the upstream (Web) server, the connection was refused. This usually results from trying to connect to a service that is inactive on the upstream server. 
```

在我添加到防火墙的配置代理设置之前，我认为这是问题，但它没有帮助。

有时门户显示另一个错误页面，也许他们有依赖，另一个 [错误页面](https://stackoverflow.com/questions/10977611/getting-blank-page-with-next-content-in-liferay)

# android - 数据库锁定错误（sqlite）

> ID：11062043
> 
> 赞同：0
> 
> 时间：2012-06-16T08:52:27.613
> 
> 标签：android, sqlite

在这个应用程序中，我想从我使用 Firefox sqlite 管理器创建的数据库中获取问题。

当我运行代码时，我在错误日志中**锁定了一个数据库**，并且无法在`textview`.

**能力活动**

```
public class AptitudeActivity extends Activity implements OnClickListener {
    private Button next;
    private Button previous;
      private TextView qdisply,adisplay;
     int counter=0;
    private String v;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        next = (Button)findViewById(R.id.button1);
        previous = (Button)findViewById(R.id.button2);
        qdisply = (TextView)findViewById(R.id.textView1);
       adisplay = (TextView)findViewById(R.id.textView2);

        next.setOnClickListener(this);
        previous.setOnClickListener(this);

    }

    public void onClick(View arg) {

        switch(arg.getId())
        {
        case R.id.button1:
            counter++;
            upper up=new upper(this);
            up.open();
            // here i want to display based on the counter value which will be +1 when the button is clicked

            up.close();

        break;
        case  R.id.button2:
        //not defined till now  
            break;
        }
    }

} 
```

* * *

**插入q**

```
public class upper {
    static String path;
    insertq q;
    private String dispa;
    String dispq;

    static SQLiteDatabase db1;
    static Context ourcontext;
    static String mydb = "APTITUDE.sqlite";
    static Boolean dbchk;

    private static class insertq extends SQLiteOpenHelper {

        private String dbpath;

        public insertq(Context context) {
            super(context, mydb, null, 1);
            path = "/data/data/"
                    + context.getApplicationContext().getPackageName()
                    + "/databases/";

        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            boolean addb = chechkdb();
            if (!addb) {
                this.getReadableDatabase();
                try {
                    copyDataBase();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else {

            }
        }

        private void copyDataBase() throws IOException {

            InputStream myInput = ourcontext.getAssets().open(mydb);

            String outFileName = path + mydb;

            OutputStream myOutput = new FileOutputStream(outFileName);

            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }
            // Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();
        }

        private Boolean chechkdb() {
            dbpath = path + mydb;

            SQLiteDatabase check = null;
            check = SQLiteDatabase.openDatabase(dbpath, null,
                    SQLiteDatabase.OPEN_READONLY);
            if (check != null) {
                dbchk = true;
            } else {
                dbchk = false;
            }
            return dbchk;

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        }
    }

    public void fetchqan() {

    String qu="SELECT QUESTION,ANSWER FROM QNA WHERE QID=1 ";
    q.getWritableDatabase();
    Cursor c=db1.rawQuery(qu, null);
dispq=c.getString(1);
dispa=c.getString(2);

    }

    public upper(Context c) {
        ourcontext = c;
    }

    public upper open() {

        q = new insertq(ourcontext);
        db1 = q.getWritableDatabase();
        return this;

    }

    public void close() {
        q.close();
    }

} 
```

**堆栈跟踪**

```
Thread [<1> main] (Suspended (exception SQLiteException))   
    upper$insertq(SQLiteOpenHelper).getWritableDatabase() line: 96  
    upper.open() line: 112  
    AptitudeActivity.onClick(View) line: 41 
    Button(View).performClick() line: 2485  
    View$PerformClick.run() line: 9080  
    ViewRoot(Handler).handleCallback(Message) line: 587 
    ViewRoot(Handler).dispatchMessage(Message) line: 92 
    Looper.loop() line: 123 
    ActivityThread.main(String[]) line: 3683    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 507  
    ZygoteInit$MethodAndArgsCaller.run() line: 839  
    ZygoteInit.main(String[]) line: 597 
    NativeStart.main(String[]) line: not available [native method] 
```

# c# - 从字符串中删除符号的问题

> ID：11062044
> 
> 赞同：1
> 
> 时间：2012-06-16T08:52:27.987
> 
> 标签：c#

我想`"\n"`从每个数组元素中删除每个符号。但是使用此代码后，什么也没有发生；

```
string[] Words = TextBox.Text.Split(' ');

for (int i = 0; i < Words.Length; i++)
{
    Words[i].Replace("\n", "");
} 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T08:55:24.430

`String.Replace`返回一个新字符串；不影响原版。你需要使用

```
Words[i] = Words[i].Replace("\n", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T08:55:07.467

试试这个

```
TextBox.Text = TextBox.Text.Replace(Environment.NewLine, string.Empty); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T08:56:30.283

尝试`Words[i] = Words[i].Replace("\n", "");`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-16T09:34:30.650

字符串是不可变的。这意味着对已经设置了值的字符串的任何操作都会返回一个新字符串并且不会更改原始字符串。

正如其他人所说，您需要将替换操作的结果分配给新字符串。

# c# - 为什么 DataInputStream.readline 在字符串的开头添加奇怪的字节

> ID：11062046
> 
> 赞同：0
> 
> 时间：2012-06-16T08:52:45.190
> 
> 标签：c#, java, android, xmlserializer, readline

从 C# 服务器发送 XML 并在 Android Java 客户端中接收它

这是接收到的 XML 的样子：

```
ï»¿<?xml version="1.0" encoding="utf-8"?>..... 
```

这是c#发送代码

```
// convert the class WorkItem to xml
MemoryStream memoryStream = new MemoryStream();
XmlSerializer xs = new XmlSerializer(typeof(WorkItem));
XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
xs.Serialize(xmlTextWriter, p);

// send the xml version of WorkItem to client
byte[] data = memoryStream.ToArray();
clientStream.Write(data, 0, data.Length);
Console.WriteLine(" send.." + data);
clientStream.Close(); 
```

在Java中我只是这样做：

```
in = new DataInputStream(skt.getInputStream());
String XMlString = in.readLine(); 
```

如果我每次都从`XMlString`.
如果可能的话，我真的很想以更好的方式做到这一点

*更新添加Android java客户端

```
@Override
protected String doInBackground(Long... params) {

    textTopInfo.setText("Loading workitems..");

    DataOutputStream out = null;
    DataInputStream in = null;

    try {

        Socket skt = new Socket(Consts.SERVER_URL_1, Consts.SERVER_PORT_1);
        skt.setSoTimeout(10000); //10 sec timout
        out = new DataOutputStream(skt.getOutputStream());
        in = new DataInputStream(skt.getInputStream());

        // check valid user id
        String id = prefs.getString("id", "");

        if(id.equals(""))
            return "Open menu and enter User Id";

        String theString =  Consts.PUSH_GET_WORKITEM + ":" + id ;

        out.write(theString.getBytes());

        BufferedReader d = new BufferedReader
        (new InputStreamReader(skt.getInputStream()));
        String XMlString = d.readLine();

            // here I remove the BOM
        XMlString = XMlString.substring(3);

        Log.d(TAG, "GF");   

        XStream xstream = new XStream();
        xstream.alias("WorkItem", WorkItem.class);
        xstream.alias("OneItem", OneItem.class);
        pl = (WorkItem)xstream.fromXML(XMlString);

    } catch (Exception e) {

        return "cannot connect to server " + e.toString();

    }finally{
        //kill out/in
        try {
            if(out != null)
                out.close();
            if(in!=null)
                in.close(); 
        } catch (IOException e) {

        }
    }
    return "here is the list";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:58:17.070

在 Java 1.7 中不推荐使用 readLine 方法；来自javadocs：

readLine() 已弃用。此方法不能正确地将字节转换为字符。从 JDK 1.1 开始，读取文本行的首选方法是通过 BufferedReader.readLine() 方法。使用 DataInputStream 类读取行的程序可以通过替换以下形式的代码转换为使用 BufferedReader 类： DataInputStream d = new DataInputStream(in);

与： BufferedReader d = new BufferedReader(new InputStreamReader(in));

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T09:02:14.120

三个初始字节是 UTF8 BOM（字节排序标记）。您将需要告诉您的 Java 代码使用相同的编码。

# c# - 区分两个表的最快方法，一个在 sql 中，一个在 access 中

> ID：11062050
> 
> 赞同：1
> 
> 时间：2012-06-16T08:53:22.013
> 
> 标签：c#, sql-server, ms-access

我正在编写一个 table different 实用程序来检查 access 和 sql server 中类似模式表之间的差异。我只想知道实现它的最快方法是什么，因为我在两个数据库中都有大量表。

我正在比较两个表让我们在 access 和 sql 中说 tableX 具有相同的模式和相同的列定义和约束，并且它在表中具有不同的行和元组我想识别差异并提取差异

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T16:26:34.800

不幸的是，听起来您希望在两个不同的系统之间进行非常细粒度的差异，这并不能提高效率。

如果表格不是太大，最好的办法可能是导出为 CSV（确保对结果进行排序！）并对它们运行 diff 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:57:23.453

如果您只需要检查字段名称和类型，ADO 可能适合：[http](http://www.w3schools.com/ado/met_conn_openschema.asp) ://www.w3schools.com/ado/met_conn_openschema.asp 。您不会在 Access 字段类型和 SQL Server 字段类型之间获得完全匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T17:57:11.403

为您的 ms 访问数据库创建一个链接服务器并使用查询来区分您的表：

```
EXEC sp_addlinkedserver @server = 'DBName'
                      , @provider = 'Microsoft.Jet.OLEDB.4.0'
                      , @srvproduct = 'OLE DB Provider for Jet'
                      , @datasrc = 'C:\myaccessdb.mdb' 
```

使用这样的查询比较 2 个表是最简单的

```
SELECT MIN(table_name), column1, column2, ...
FROM (
  SELECT 'sql server table' , column1, column2, ...
  FROM A
  UNION ALL
  SELECT 'msaccess table' , column1, column2, ...
  FROM B) tmp
GROUP BY column1, column2, ...
HAVING COUNT(*) = 1 
```

另一种选择是依赖`tablediff.exe`Sql Server 附带的实用程序。在 msdn 上查看[更多信息](http://msdn.microsoft.com/en-us/library/ms162843.aspx)

# iphone - 尝试提交 iphone 应用程序时出现问题

> ID：11062054
> 
> 赞同：0
> 
> 时间：2012-06-16T08:54:13.723
> 
> 标签：iphone, xcode

我是一个相当新的开发人员。当我尝试使用 xcode 提交我的 iphone 应用程序时，出现如下错误；

代码签名错误：身份“iPhone Distribution”与默认钥匙串中的任何有效、未过期的证书/私钥对不匹配

经过搜索，我发现我必须创建一个 Distribution Provisioning Profile。但是，我的分发配置文件不起作用，即使我的开发配置文件运行良好。

有人可以帮我解决这个问题吗？我整天都被困住了……请原谅我的英语不是很好。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:07:46.110

此[链接](http://www.idev101.com/code/Distribution/build.html)应该对您有所帮助，它解释了如何构建分发。

如果没有，那么您应该考虑进入 iOS 配置门户并重新创建您的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:11:37.757

您是否已将分发证书（而不是分发配置文件）安装到 KeyChain Access 中？

![在此处输入图像描述](../Images/a3aa2c1c9108d2c1f1b78c83094c2e36.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:26:28.893

我希望您的项目在基于开发人员配置文件的设备上运行。

在你准备提交之前。只需按照这些事情，

1.  在 developer.apple.com--> iOs 配置门户中创建分发配置文件。下载并安装到您的系统和 iosdevice 中。2.然后转到您的项目-->信息在注释行构建使用上方按+按钮。选择任何一个重复项。然后将其重命名为“分发”
2.  然后选择您的项目--> 构建设置和目标--> 构建设置将代码设置为您的分发配置文件。

这只能构建。

然后选择您的产品部分。右键单击它选择在 finder 选项中显示并压缩您的 .app 文件。

完成进入 itunesconnect.apple.com 后必须使用此文件 ---> 管理您的应用程序选择。

转到应用程序加载器-> 选择您的 .app zip 文件

这用于提交应用商店。

# java - Applet 参数不保留 CRLF

> ID：11062058
> 
> 赞同：0
> 
> 时间：2012-06-16T08:54:41.210
> 
> 标签：java, html, applet, param

我编写了一个将多段字符串作为参数上传的小程序。当我在 Netbeans 中对其进行测试时，它会保留 CRLF，但是当我在应用程序中实时部署它时，它会丢弃它们 为什么会发生这种情况，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:08:04.280

> 为什么会发生这种情况..（？）

我不相信参数值意味着多行。这就是 W3C 关于[`CDATA`价值](http://www.w3.org/TR/html4/types.html#type-cdata)内容的说法。

> **CDATA**是来自文档字符集的字符序列，可能包括字符实体。用户代理应该如下解释属性值：
> 
> *   用字符替换字符实体，
> *   ***忽略换行，***
> *   用一个空格替换每个回车符或制表符。

## 建议

> ..我能做些什么呢？

### 长“单行”参数

1.  使用多行文本组件，例如`JTextArea`在需要的地方显示和换行。
2.  使用 HTML 格式（包括 CSS 中的宽度）到`JLabel`. 那将支持多个段落。
3.  在需要的地方进行硬编码`\n`。

### 每行单个参数

编号（例如`name=`-> `text1`, `text2`, .. `textNNN`），当你得到一个返回值时停止`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:03:59.370

是的，这很可能是浏览器的问题，它用空格替换了 CRLF，因为它控制了参数输入。这可能是特定于浏览器的（关于更改）。最好的机制是使用一些 CRLF 编码，然后在运行时对其进行解码。

# jquery - 使用 asp.net 重新排序服务器中的图像

> ID：11062059
> 
> 赞同：1
> 
> 时间：2012-06-16T08:54:42.580
> 
> 标签：jquery, asp.net

我有一个 asp.net 网站，人们可以在其中上传他们的图像文件。我有一次上传多个文件的代码。

我还有一个要求，我需要填充一个按顺序列出图像文件名的列表。

所以用户上传了10个图片文件后，应该可以按照自己喜欢的顺序排列图片了。

我一直在考虑使用 ListBox 显示文件名，但是当文件很多时，很难记住哪个文件显示什么图像。我也在阅读有关使用 jQuery 拖放的内容，但没有使用 jQuery 的经验。AJAX 并且找不到在屏幕上显示图像并将它们拖放到 box1、box2、box3 中的示例。

任何帮助，将不胜感激。谢谢

# c# - wpf中的树视图大小

> ID：11062063
> 
> 赞同：0
> 
> 时间：2012-06-16T08:55:08.610
> 
> 标签：c#, wpf, treeview, scrollbar

请让我知道如何在更改屏幕分辨率时重新调整树视图控件的高度？

请看这段代码：

```
<TreeView  Name="treeView1" Height="150" VerticalAlignment="Top">
    <TreeViewItem Header="Root" IsExpanded="True">
        <TreeViewItem Header="Item 1"></TreeViewItem>
        <TreeViewItem Header="Item 2"></TreeViewItem>
        <TreeViewItem Header="Item 3"></TreeViewItem>
        <TreeViewItem Header="Item 4"></TreeViewItem>
        <TreeViewItem Header="Item 5"></TreeViewItem>
        <TreeViewItem Header="Item 6"></TreeViewItem>
        <TreeViewItem Header="Item 7"></TreeViewItem>
        <TreeViewItem Header="Item 8"></TreeViewItem>
        <TreeViewItem Header="Item 9"></TreeViewItem>
        <TreeViewItem Header="Item 10"></TreeViewItem>
        <TreeViewItem Header="Item 11"></TreeViewItem>
        <TreeViewItem Header="Item 12"></TreeViewItem>
        <TreeViewItem Header="Item 13"></TreeViewItem>
        <TreeViewItem Header="Item 14"></TreeViewItem>
        <TreeViewItem Header="Item 15"></TreeViewItem>
        <TreeViewItem Header="Item 16"></TreeViewItem>
        <TreeViewItem Header="Item 17"></TreeViewItem>
        <TreeViewItem Header="Item 18"></TreeViewItem>
        <TreeViewItem Header="Item 19"></TreeViewItem>
        <TreeViewItem Header="Item 20"></TreeViewItem>
        <TreeViewItem Header="Item 21"></TreeViewItem>
        <TreeViewItem Header="Item 22"></TreeViewItem>
        <TreeViewItem Header="Item 23"></TreeViewItem>
        <TreeViewItem Header="Item 24"></TreeViewItem>
        <TreeViewItem Header="Item 24"></TreeViewItem>
    </TreeViewItem>
</TreeView> 
```

在某些屏幕分辨率下，我可以看到所有节点，在某些分辨率下，我可以看到滚动条。我想查看所有没有滚动条的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:02:59.380

你可以尝试这样的事情，使用[SystemEvents.DisplaySettingsChanged](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.displaysettingschanged.aspx)事件：

```
public partial class Window1 : Window
{
    public static EventHandler HandleDisplaySettingsChanged = 
        new EventHandler(SystemEvents_DisplaySettingsChanged);

    public Window1()
    {
        InitializeComponent();
        Microsoft.Win32.SystemEvents.DisplaySettingsChanged += HandleDisplaySettingsChanged;
    }

    public void Close()
    {
        SystemEvents.DisplaySettingsChanged -= HandleDisplaySettingsChanged;
    }

    public static void SystemEvents_DisplaySettingsChanged(object sender, EventArgs e)
    {
        Console.WriteLine("display settings changed");

        // change treeview size as you think what is appropriate here...
    }
} 
```

# c# - 我们如何使用 LINQ 从 asp.net mvc3 中的长字符串中提取一个短字符串？

> ID：11062065
> 
> 赞同：2
> 
> 时间：2012-06-16T08:55:17.667
> 
> 标签：c#, asp.net-mvc, string, linq

我目前正在从事一个小型电子商务项目。我想显示产品的简短描述，而不是显示所有描述（来自数据库）。
这是我的控制器；

```
var products = context.Products.OrderBy(p => p.ProductName);
@ViewBag.ProductList = products.ToList<Product>(); 
```

这是我的视图代码；

```
<ul class="display" id="content">
@foreach( var item in @ViewBag.ProductList as IEnumerable<Product>)
{
    @Html.Partial("_ProductPartial", item)
}
</ul> 
```

现在在我的部分**“_ProductPartial”**视图中，我调用了该描述字段；

```
<p>
    @Html.DisplayFor(model => model.ProductDescription)
</p> 
```

现在，我想显示一个产品的简短描述（而不是显示默认工作的整个描述）。
**那么，我怎样才能使用 LINQ 做到这一点？**
**有没有其他方法（如果可能）？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T09:07:47.010

我通过使用 ViewModel 来做到这一点：

```
 public string ProductDescription { get; set; }

    public string ShortDescription
    {
        get
        {
            var text = ProductDescription;
            if (text.Length > 21)
            {
                text = text.Remove(19);
                text += "..";
            }
            return text ;
        }
    } 
```

对于您来说，如果您不想制作 ViewModel，您可以扩展您的 Product 类以具有此只读属性

# iphone - iOS：单击表格视图中行的计数器

> ID：11062066
> 
> 赞同：0
> 
> 时间：2012-06-16T08:55:24.597
> 
> 标签：iphone, objective-c, ios, uitableview

我正在开发和 tableView，在其中的每一行中，我必须显示点击计数器和行号。初始化应用程序时，每个单元格的初始点击计数器值必须为 0。然后，每当用户单击单元格时，递增单元格内的点击计数器值。

我有 26 个固定的行。我已经采取了 tableData.plist 文件，如附图所示。![在此处输入图像描述](../Images/737b07beb185940bf352dec54336d994.png)

我正在使用 plist 初始化 self.dataArray 。

现在我想在 didSelectRowAtIndexPath 委托方法中实现，如果点击任何行，该行的点击计数器应该增加。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"tableData" ofType:@"plist"];
    self.dataArray = [NSMutableArray arrayWithContentsOfFile:path];//array initialized with plist
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.dataArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *kCustomCellID = @"MyCellID";
    UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(160.0f, 2.0f, 30.0f, 20.0f)];//label for rowid
    UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(160.0f, 24.0f, 30.0f, 30.0f)];//label for counter
    label2.textColor = [UIColor grayColor];
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:kCustomCellID];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kCustomCellID] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }
    if([self.dataArray count]>indexPath.row)
    {
        label1.text = [[self.dataArray objectAtIndex:indexPath.row] objectForKey:@"Lable1"];
        label2.text =[[self.dataArray objectAtIndex:indexPath.row] objectForKey:@"Lable2"]; 
    }
    else {
        label1.text = @"";
        label2.text =@"";
    }
    [cell.contentView addSubview:label1];
    [cell.contentView addSubview:label2];
    [label1 release];
    [label2 release];
    return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
   //implementation for row counter incrementer.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:08:55.937

试试这个。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
   //take dictionary object from dataArray at selected index
   //take Lable2 value as a string and convert it into integer and increment the integer value
   //now convert this incremented integer value into string
   //now save it new string in Lable2 for the object dictionary and add this dict object into dataArray at selected index
    NSMutableDictionary * tempDict = [self.dataArray objectAtIndex:indexPath.row];
    int tempLableInt = [[tempDict objectForKey:@"Lable2"] intValue];
    tempLableInt = tempLableInt +1;
    [tempDict setObject:[NSString stringWithFormat:@"%d",tempLableInt] forKey:@"Lable2"];
    [self.dataArray replaceObjectAtIndex:indexPath.row withObject:tempDict];
    [tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:01:58.960

只需设置 nsdictionary 值。在该设置中 forkey 是您的 uitableview didselectrowatindexpath 值。基于 for 键值增加值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:11:19.587

您可以执行以下操作在您的类中定义此属性

```
NSMutableDictionary *dicCounter; 
```

然后在你的`didSelectRowAtIndexPath`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = [NSString stringWithFormat:@"%@,%@", indexPath.section, indexPath.row];
    //Get the old counter
    int counterForCell = [[dicCounter valueForKey:cellIdentifier] intValue];
    //increment it
    counterForCell++;
    //set it in the dictionary
    [dicCounter setValue:[NSNumber numberWithInt:counterForCell] forKey:cellIdentifier];
} 
```

# java - 在按钮 LWUIT Java ME 中设置图标

> ID：11062072
> 
> 赞同：0
> 
> 时间：2012-06-16T08:56:01.557
> 
> 标签：java, lwuit-button

谁能建议如何设置图标按钮？这是我的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package tajwed;

import javax.microedition.midlet.*;

    import com.sun.lwuit.*;
    import com.sun.lwuit.animations.*;
    import com.sun.lwuit.events.*;
    import com.sun.lwuit.layouts.BoxLayout;
    import com.sun.lwuit.plaf.*;
    import java.io.IOException;
    import java.util.Hashtable;

/**
 * @author Muhamad BUrhanudin
 */
public class tajwedMidlet extends MIDlet implements ActionListener{

    Form    mHomeForm;
    Form    mAwayForm;
    Form    mMenuTajwid;

    Command mExitCommand;

    Button btMenu;
    Button btNunSukun, btMimSukun, btNunTasjid;
    Button btLamtarif, btIdgham, btMaad, btRaa;
    Button btHelp;
    Button btExit;

    Command mBackCommand;

    public void startApp() {
        Display.init(this);

        installTheme();
        createUI();
        mHomeForm.show();

    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {

    }

    public void actionPerformed(ActionEvent ae)
    {
            mAwayForm.setTransitionInAnimator(
                Transition3D.createCube(400, false));

            mMenuTajwid.setTransitionInAnimator(
                Transition3D.createCube(400, false));

            mMenuTajwid.setTransitionOutAnimator(
                Transition3D.createCube(400, true));

            mAwayForm.setTransitionOutAnimator(
                Transition3D.createCube(400, true));

        if ((ae.getSource()==btMenu)|| (ae.getSource()==btHelp))
        {
            //mAwayForm.show();
            if(ae.getSource()== btMenu)
            {
                mMenuTajwid.show();
            }
        }
        else if (ae.getSource() == mBackCommand) {
            mHomeForm.show();
        }
        else if ((ae.getCommand() == mExitCommand) || (ae.getSource()== btExit))

          notifyDestroyed();
    }

    private void installTheme()
    {
       UIManager uim = UIManager.getInstance();
        Hashtable ht = new Hashtable();
        ht.put("sel#" + Style.BG_COLOR, "ffffff");
        ht.put(Style.BG_COLOR, "d5fff9");
        ht.put(Style.FG_COLOR, "000000");
        uim.setThemeProps(ht);

     }
    private void createUI() {
      // Set up screen for transitions.
      mAwayForm = new Form("Away");
      mAwayForm.addComponent(new Label("Choose Back to return to the home screen."));

      mMenuTajwid = new Form("MENU DASAR TAJWID");
    //  mMenuTajwid
      mMenuTajwid.setLayout(new BoxLayout(BoxLayout.Y_AXIS));

      btNunSukun = new Button("Hukum Nun Sukun & Tanwin");
      btNunSukun.addActionListener(this);
      mMenuTajwid.addComponent(btNunSukun);

      btMimSukun = new Button("Hukum Mim Sukun");
      btMimSukun.addActionListener(this);
      mMenuTajwid.addComponent(btMimSukun);

      btNunTasjid = new Button("Hukum Nun Tasydid & Min Tasydid");
      btNunTasjid.addActionListener(this);
      mMenuTajwid.addComponent(btNunTasjid);

      btLamtarif = new Button("Hukum Laam Ta'rief");
      btLamtarif.addActionListener(this);
      mMenuTajwid.addComponent(btLamtarif);

      btIdgham = new Button("Idgham");
      btIdgham.addActionListener(this);
      mMenuTajwid.addComponent(btIdgham);

      btMaad = new Button("Maad");
      btMaad.addActionListener(this);
      mMenuTajwid.addComponent(btMaad);

      btRaa = new Button("Raa'");
      btRaa.addActionListener(this);
      mMenuTajwid.addComponent(btRaa);

      mBackCommand = new Command("Back");
      mMenuTajwid.addCommand(mBackCommand);
      mMenuTajwid.addCommandListener(this); // Use setCommandListener() with LWUIT 1.3 or earlier.

      // Set up main screen.
      mHomeForm = new Form("Java Mobile Learning");
      mHomeForm.setLayout(new BoxLayout(BoxLayout.Y_AXIS));

      btMenu = new Button("TAJWID LEARNING");
      btMenu.addActionListener(this);
      mHomeForm.addComponent(btMenu);

      try
      {
      btHelp = new Button("HELP",Image.createImage("/help.ico"));
      btHelp.addActionListener(this);
      mHomeForm.addComponent(btHelp);
      }
      catch(IOException e)
      {

      }

      btExit = new Button("EXIT");
      btExit.addActionListener(this);
      mHomeForm.addComponent(btExit);

      mExitCommand = new Command("Keluar");
      mHomeForm.addCommand(mExitCommand);
      mHomeForm.addCommandListener(this); // Use setCommandListener() with LWUIT 1.3 or earlier.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:12:44.203

您将一个额外的`Image`参数传递给按钮构造函数；您使用 ImageIO 类构建图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:29:32.110

我假设您想要一个图像（图标），单击该图像（图标）会执行操作。IE。你不想要一个厚的矩形按钮。

所以如果是这样：

```
Button myButton = new Button("HELP",Image.createImage("/help.ico"));

    myButton.getStyle().setBgImage(null);
    myButton.getStyle().setPadding(0, 0, 0, 0);
    myButton.getStyle().setBorder(null);

    myButton.getPressedStyle().setBgImage(null);
    myButton.getPressedStyle().setPadding(0, 0, 0, 0);
    myButton.getPressedStyle().setBorder(null); 
```

或者：

一种更简单但占用大量内存的方法是：

```
myButton.setFlatten(true); 
```

或者：

使用资源编辑器...一个 GUI，您可以在其中为按钮、标签等不同组件指定样式等。

# vbscript - VBScript 和 loadXML：在文档的顶层无效。如何解决？

> ID：11062074
> 
> 赞同：3
> 
> 时间：2012-06-16T08:56:18.630
> 
> 标签：vbscript, xmldom

这是我在 stackoverflow 上的堡垒帖子。我在这个网站上搜索了许多类似的问答，但我的情况似乎有点不同。这是我的 vbscript 代码：

------------ 代码片段 ----------------

```
xmlurl = "songs.xml"

set xmlDoc = CreateObject("Microsoft.XMLDOM")
xmlDoc.async = False
xmlDoc.loadXML(xmlurl)

if xmlDoc.parseError.errorcode<>0 then
  'error handling code
  msgbox("error! " & xmlDoc.parseError.reason)
end if 
```

------------ 结束代码片段 ---------------

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<nowplaying-info-list>
  <nowplaying-info mountName="CKOIFMAAC" timestamp="1339771946" type="track">
    <property name="track_artist_name"><![CDATA[CKOI]]></property>
    <property name="cue_title"><![CDATA[HITMIX]]></property>
  </nowplaying-info>
  <nowplaying-info mountName="CKOIFMAAC" timestamp="1339771364" type="track">
    <property name="track_artist_name"><![CDATA[AMYLIE]]></property>
    <property name="cue_title"><![CDATA[LES FILLES]]></property>
  </nowplaying-info>
  <nowplaying-info mountName="CKOIFMAAC" timestamp="1339771149" type="track">
    <property name="track_artist_name"><![CDATA[MIA MARTINA]]></property>
    <property name="cue_title"><![CDATA[TOI ET MOI]]></property>
  </nowplaying-info>
</nowplaying-info-list> 
```

我还尝试删除第一行以防 UTF-8 可能与 windows 不兼容（看到一些关于此的帖子），但我仍然遇到同样的错误。我还尝试了 unix2dos，反之亦然，以防出现回车问题（嵌入在 xml 中的隐藏字符）。我似乎无法弄清楚出了什么问题。这是一个简单的 XML 文件。我可以使用 perl 正则表达式在几分钟内解析它，但我需要在 Windows 上运行这个脚本，所以使用 vbscript。我使用相同的技术从其他来源解析 XML，没有任何问题。不幸的是，我无法修改 XML，它来自外部来源。我的 Windows Vista 家庭版和 Windows Server 2008 都出现了同样的错误。到目前为止，我正在从命令行运行 vbscript 进行测试（即不在 ASP 中）。

提前致谢，

山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:22:11.407

`xmlDoc.loadXML()`可以加载一个 XML 字符串。它无法检索 URL。

如果需要发出 HTTP 请求，请使用 XMLHTTPRequest 对象。

```
Function LoadXml(xmlurl)
  Dim xmlhttp

  Set xmlhttp = CreateObject("MSXML2.XMLHTTP")
  xmlhttp.Open "GET", xmlurl, false

  ' switch to manual error handling
  On Error Resume Next

  xmlhttp.Send
  If err.number <> 0 Then 
    WScript.Echo xmlhttp.parseError.Reason
    Err.Clear
  End If 

  ' switch back to automatic error handling 
  On Error Goto 0

  Set LoadXml = xmlhttp.ResponseXml
End Function 
```

使用喜欢

```
Set doc = LoadXml("http://your.url/here") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T23:17:11.023

三个补充说明：

(1) 由于 .parseError.reason 往往是神秘的，因此包含它的 .srcTxt 属性（以及 .loadXml 的参数）是值得的：

```
 Dim xmlurl : xmlurl = "song.xml"
  Dim xmlDoc : Set xmlDoc = CreateObject("Microsoft.XMLDOM")
  xmlDoc.async = False
  xmlDoc.loadXML xmlurl
  If 0 <> xmlDoc.parseError.errorcode Then
     WScript.Echo xmlDoc.parseError.reason, "Src:", xmlDoc.parseError.srcText
  Else
     WScript.Echo "surprise, surprise"
  End if 
```

输出：

```
Invalid at the top level of the document.
 Src:  song.xml 
```

当然，编写一个将 .parseError 的所有属性都考虑在内并始终使用它的 Function/Sub 会更好。

(2) 要加载文件或 URL，请使用 .load：

```
 Dim xmlDoc : Set xmlDoc = CreateObject("Microsoft.XMLDOM")
  Dim xmlurl
  For Each xmlurl In Array("song.xml", "http://gent/~eh/song.xml", "zilch")
    xmlDoc.async = False
    if xmlDoc.load(xmlurl) Then
       With xmlDoc.documentElement.firstChild
          WScript.Echo    xmlurl _
                       , .tagName _
                       , .firstChild.tagName _
                       , .firstChild.text
       End With
    Else
       WScript.Echo xmlurl, xmlDoc.parseError.reason, "Src:", xmlDoc.parseError.srcText
    End if
  Next 
```

输出：

```
song.xml nowplaying-info property CKOI-ÄÖÜ
http://gent/~eh/song.xml nowplaying-info property CKOI-ÄÖÜ
zilch The system cannot locate the object specified.
 Src: 
```

(3) 使用 DOM 避免了所有编码问题（这就是为什么我将一些德语变音符号放入“你的”文件中 - 甚至将其放入 DOS-Box 输出）并使 RegExps（甚至是 Perl 的）成为第二好的选择。

# java - 如何将 BufferedImage 转换为 8 位？

> ID：11062078
> 
> 赞同：11
> 
> 时间：2012-06-16T08:56:53.023
> 
> 标签：java, image, image-processing, bufferedimage, 8-bit

我正在查看 ImageConverter 类，试图弄清楚如何将 BufferedImage 转换为 8 位颜色，但我不知道该怎么做。我也在互联网上搜索，我找不到简单的答案，他们都在谈论 8 位灰度图像。我只是想将图像的颜色转换为 8 位......没有别的，没有调整大小没有。有没有人介意告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T09:10:39.553

您可以使用 Sun（现在的 Oracle）官方图像库 JAI（Java Advanced Imaging）来做到这一点。

[ColorQuantizerDescriptor](http://docs.oracle.com/cd/E17802_01/products/products/java-media/jai/forDevelopers/jai-apidocs/javax/media/jai/operator/ColorQuantizerDescriptor.html)显示您可以应用的量化过程的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T09:17:59.583

[*G-Man 的 Uber 软件工程博客上*](http://gman.eichberger.de/2007/07/transparent-gifs-in-java.html)[的文章“Java 中的透明 gifs”中](http://gman.eichberger.de/2007/07/transparent-gifs-in-java.html)*的这段代码片段运行良好：*

 *```
public static void main(String[] args) throws Exception {
    BufferedImage src = convertRGBAToIndexed(ImageIO.read(new File("/src.jpg")));
    ImageIO.write(src, "gif", new File("/dest.gif"));
}

public static BufferedImage convertRGBAToIndexed(BufferedImage src) {
    BufferedImage dest = new BufferedImage(src.getWidth(), src.getHeight(), BufferedImage.TYPE_BYTE_INDEXED);
    Graphics g = dest.getGraphics();
    g.setColor(new Color(231, 20, 189));

    // fill with a hideous color and make it transparent
    g.fillRect(0, 0, dest.getWidth(), dest.getHeight());
    dest = makeTransparent(dest, 0, 0);

    dest.createGraphics().drawImage(src, 0, 0, null);
    return dest;
}

public static BufferedImage makeTransparent(BufferedImage image, int x, int y) {
    ColorModel cm = image.getColorModel();
    if (!(cm instanceof IndexColorModel))
        return image; // sorry...
    IndexColorModel icm = (IndexColorModel) cm;
    WritableRaster raster = image.getRaster();
    int pixel = raster.getSample(x, y, 0); // pixel is offset in ICM's palette
    int size = icm.getMapSize();
    byte[] reds = new byte[size];
    byte[] greens = new byte[size];
    byte[] blues = new byte[size];
    icm.getReds(reds);
    icm.getGreens(greens);
    icm.getBlues(blues);
    IndexColorModel icm2 = new IndexColorModel(8, size, reds, greens, blues, pixel);
    return new BufferedImage(icm2, raster, image.isAlphaPremultiplied(), null);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T09:03:40.993

您可以在类中使用该`convert8`方法。`ConvertUtil`

详情请看[这里](http://image4j.sourceforge.net/javadoc/index.html?net/sf/image4j/util/ConvertUtil.html)。*

# asp-classic - 使用表单 POST 将文件发送到另一台服务器

> ID：11062079
> 
> 赞同：0
> 
> 时间：2012-06-16T08:57:00.840
> 
> 标签：asp-classic

我需要能够从服务器端经典 ASP 代码将文件发送到另一个网站。另一个网站有一个带有文件上传控件的表单，我需要模拟发布到这个表单。

[我在这里](http://multicolorengine.tineye.com/docs/code/classic_asp_sample.html)找到了一些似乎非常适合这项工作的示例代码，它上传文件没有错误，但接收到的文件无效，当我在另一台服务器上检查它时，文件的开头是在二进制数据的一部分之前在其中发布了不应该存在的数据，例如：

> ntent-Type: image/jpeg
> Content-Disposition: form-data; 名称=“文件”；文件名="档案箱.jpg"
> 
> ÿØÿà...

当我通过表单上传数据时，接收网站代码工作正常，所以看起来问题显然出在上面的代码上。

如果此代码不起作用，其他人可以指出我以这种方式提交文件的另一个示例的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T07:05:12.910

使用我问题中链接中的代码示例，我对其进行了修改以手动构建请求并且它有效。我还转换为一个函数，它接受一个二进制文件和一个参数并发布请求。

```
Function PostDocument(intDocumentID, binFile, strFilename, strContentType)
Dim objHttp, strBoundary, strRequestStart, strRequestEnd, binPost
Dim objStream

strBoundary = "---------------------------9849436581144108930470211272"

Set objHttp = Server.CreateObject("MSXML2.ServerXMLHTTP.6.0")

strRequestStart = "--" & strBoundary & vbCrlf &_
    "Content-Disposition: form-data; name=""id""" & vbCrlf &_
    vbCrlf &_
    intDocumentID & vbCrlf &_
    vbCrlf &_
    "--" & strBoundary & vbCrlf &_
    "Content-Disposition: form-data; name=""file""; filename=""" & strFilename & """" & vbCrlf &_
    "Content-Type: " & strContentType & vbCrlf &_
    vbCrlf

strRequestEnd = vbCrLf & "--" & strBoundary & "--"

Set objStream = Server.CreateObject("ADODB.Stream")

objStream.Type = adTypeBinary '1
objStream.Mode = adModeReadWrite '3
objStream.Open
objStream.Write StringToBinary(strRequestStart)
objStream.Write binFile
objStream.Write StringToBinary(strRequestEnd)
objStream.Position = 0

binPost = objStream.Read

Response.Write binPost

objStream.Close
Set objStream = Nothing

objHttp.Open "POST", "(url removed)", False, "(username removed)", "(password removed)"
objHttp.setRequestHeader "Content-Type", "multipart/form-data; boundary=""" & strBoundary & """"
objHttp.Send binPost

PostDocument = objHttp.ResponseText

Set objHttp = Nothing
End Function

Function StringToBinary(toConvert)
Dim objStream, data

Set objStream = Server.CreateObject("ADODB.Stream")

objStream.Charset = "ISO-8859-1"
objStream.Type = adTypeText '2
objStream.Mode = adModeReadWrite '3
objStream.Open
objStream.WriteText toConvert

objStream.Position = 0
objStream.Type = adTypeBinary '1
StringToBinary = objStream.Read

objStream.Close
Set objStream = Nothing
End Function 
```

# windows - 实时捕获 WScript.Shell 的输出

> ID：11062086
> 
> 赞同：1
> 
> 时间：2012-06-16T08:58:04.333
> 
> 标签：windows, command-line, vbscript, hta, jscript

我在 .hta 文件中使用 JScript（几乎与 VBScript 相同）来打开一个新的 shell 命令并捕获其输出。这是我在谷歌搜索后得到的结果：

```
var shell = new ActiveXObject("WScript.Shell")
var e = shell.Exec("%comspec% /c ping google.com 2>&1 ") 
while(!e.StdOut.AtEndofStream) {
    var line = e.StdOut.ReadLine()
    document.getElementById('log').value = line
} 
```

这行得通。但是，它不是异步的。while 循环导致我的 .hta 界面只是阻塞（UI 变得不可用），直到 shell 命令完成。如果我删除`while loop`，该`shell.Exec`命令似乎不会阻塞，因此问题出在循环中。

我认为阻塞问题只会发生，因为我在 .hta 环境中。如果我通过命令行运行我的脚本，这似乎不会发生`cscript.exe`

如何避免阻塞行为并实时访问命令的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:07:59.313

您可能必须通过重复调用来[伪造后台线程](https://developer.mozilla.org/en/Code_snippets/Threads#Using_setTimeout_to_schedule_tasks)`setTimeOut`，并且只在计时器回调中做少量工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:00:40.653

正如 Anders 所指出的，您需要实现伪多线程策略，因为只要执行 JScript 代码（任何函数），您的 GUI 就不会对任何用户输入做出反应。

[出于此处](http://javascript.about.com/library/blstvsi.htm)给出的原因，我使用了 setInterval() 而不是 setTimeout() 。

这个.hta

```
<html>
 <head>
  <title>Ping HTA (JScript)</title>
  <HTA:APPLICATION
    APPLICATIONNAME="PingHTA"
  >
  <SCRIPT Language="JScript" src="ping.js"></SCRIPT>
 </head>
 <body onload="onLoadBody()">
  <form name="anonymous">
   <h2>Ping HTA (JScript)</h2>
   <hr>
   <input id="bttStartPing" type="BUTTON" value="StartPing" onclick="startPing()">
   <hr>
   <textarea id="taDisplay" rows="25" cols="80"></textarea>
  </form>
 </body>
</html> 
```

和.js

```
//= app globals
g_sCmd      = '%comspec% /c ping.exe /n 8 google.com 2>&1';
g_taDisplay = null;
g_PSIHandle = 0;
g_PSILock   = false;
g_oExec     = null;

//= prep for log
function onLoadBody() {
  g_taDisplay = window.document.getElementById("taDisplay");
  log("OnLoadBody() done.");
}

//= log
function log(msg) {
  g_taDisplay.value = new Date().toString() + "\n   " + msg + "\n" + g_taDisplay.value;
}

//= start job
function startPing() {
  if (0 == g_PSIHandle) {
     g_PSIHandle = setInterval(stepPing, 100);
     log('setInterval(stepPing, 100)');
     g_oExec = new ActiveXObject("WScript.Shell").Exec(g_sCmd);
     log("started " + g_sCmd);
  } else {
     log('***** Ping is running!');
  }
}

//= one step of job
function stepPing() {
  if (! g_PSILock) {
     g_PSILock = true;
     if (null !== g_oExec) {
        if (g_oExec.StdOut.AtEndofStream) {
           clearInterval(g_PSIHandle);
           g_PSIHandle = 0;
           log('StdOut.AtEndofStream, terminate ping');
           g_oExec.Terminate();
           g_oExec = null;
        } else {
           log(g_oExec.StdOut.ReadLine());
        }
     }
     g_PSILock = false;
  }
} 
```

应该证明：

1.  在 .hta 中使用 .Exec 将打开一个 shell 窗口（对于某些人来说，这是不合格的）
2.  .hta 将开始拾取 ping 输出行，在该过程终止之前
3.  在进程运行时单击按钮将在消息中穿插 ping 输出（尽管反应感觉迟缓）

**生产版本将不得不花费更多的精力来处理 .Exec 的可能状态和错误处理。**

为此，请[在此处](http://msdn.microsoft.com/en-us/library/2f38xsxe%28v=vs.84%29.aspx)开始您的研究并在 Google 上搜索“WshScriptExec 对象”。

# php - Symfony2 Sonata 管理员访问容器

> ID：11062089
> 
> 赞同：1
> 
> 时间：2012-06-16T08:58:53.123
> 
> 标签：php, symfony, symfony-sonata

我有一个带有必填活动用户字段的实体，因此我需要在以下位置添加活动用户的名称`configureFormFields()`：

```
class DokumentAdmin extends Admin
{    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
                ->add('email')
                 ...
                ->add('user_name',null,array('required' => true, 'data' => "THIS IS A LOGGED ADMIN NAME"))
        ;
    } 
```

我尝试使用监听器，

```
public function prePersist(LifecycleEventArgs $args)
    {
        $entity = $args->getEntity();
        if ($entity instanceof Dokument) {
         //set user name

        }
    } 
```

但我现在不知道如何在这里使用容器对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-06T10:09:22.830

您可以使用以下容器：

```
$this->getConfigurationPool()->getContainer(); 
```

例如：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $container = $this->getConfigurationPool()->getContainer();
    ...
    // Using the container here...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T12:55:23.480

您可以注入容器：

尝试以下操作：

```
class DokumentAdmin extends Admin {

private $container = null;

/**
 * @param string $code
 * @param string $class
 * @param string $baseControllerName
 */
public function __construct($code, $class, $baseControllerName, $container=null)
{
    parent::__construct($code, $class, $baseControllerName);
    $this->container = $container;  
}
.... 
```

在您的 service.yml 中输入 @service_container 到管理员条目。

```
acme.demo.document:
      class: Acme\DemoBundle\Admin\DocumentAdmin
      tags:
      arguments: [null, Acme\Demobundle\Entity\Document, ApplicationAcmeDemoBundle:Default, @service_container] 
```

而已。现在您可以访问管理类中的容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:36:03.183

我有同样的问题。我需要从我的 config.yml 解析一些参数，但它失败了。

作为解决方案，您可以将容器注入您的管理类，但这不是推荐的。您应该只注入您需要的服务或参数。

怎么做 ？

您应该使用 setter 注入而不是构造注入。

这是在 snata Admin Class 中注入参数的示例：

当您定义您的管理服务时，只需添加如下调用：

```
<service id="skonsoft.znata.admin.keyword" class="%skonsoft.znata.admin.keyword.class%">
        <tag name="sonata.admin" manager_type="orm" group="Keyword" label="Keyword"/>
        <argument />
        <argument>%skonsoft.znata.admin.keyword.entity.class%</argument>
        <argument>SonataAdminBundle:CRUD</argument>
        <call method="setTranslationDomain">
            <argument>SkonsoftZnataBundle</argument>
        </call>

         <!-- here you inject your parameter using setter injection -->
        <call method="setEnabledLocales">
            <argument>%skonsoft_znata.locales%</argument>
        </call>
    </service> 
```

之后，只需在您的管理类中添加一个名为 setEnabledLocales 的方法

```
public function setEnabledLocales($locales){
    $this->enabedLocales = $locales;
} 
```

不要忘记在您的管理类中添加 $enabedLocales 作为属性。

最后，您可以使用此属性。

# java - 如何使用来自另一个 JList 的数据填充 JList

> ID：11062095
> 
> 赞同：2
> 
> 时间：2012-06-16T08:59:37.133
> 
> 标签：java, mysql, swing, jlist

我有一个 MySQL 数据库，其中包含我想在我的 java 程序中填充到 JList 中的数据。我有两个JList，一个是填写事件标题，第二个是填写来宾姓名。

我想要的是当用户单击任何事件标题时，第二个 JList 将显示属于该事件的所有来宾名称。

我已经成功地用所有事件标题填充了第一个 JList。我遇到的问题是当用户单击事件标题时，客人姓名将在第二个 JList 上显示两次。我怎样才能让它只显示一次？

这是我到目前为止所得到的...

Java 类

```
private JList getJListEvents() {
    if (jListEvents == null) {
        jListEvents = new JList();
        Border border = BorderFactory.createTitledBorder(BorderFactory.createBevelBorder(1, Color.black, Color.black), "Events", TitledBorder.LEFT, TitledBorder.TOP);
        jListEvents.setBorder(border);
        jListEvents.setModel(new DefaultListModel());
        jListEvents.setBounds(new Rectangle(15, 60, 361, 421));

        Events lEvents = new Events();
        lEvents.loadEvents(jListEvents);

        jListEvents.addListSelectionListener(new ListSelectionListener(){
            public void valueChanged(ListSelectionEvent e){
                EventC eventC = new EventC();
                //eventC.MonitorRegDetailsInfo(jListEvents, jTextFieldEventName, jTextFieldEventVenue, jTextFieldEventDate, jTextFieldEventTime, jTextAreaEventDesc);
                //eventC.MonitorRegPackageInfo(jListEvents, jTextFieldBallroom, jTextFieldBallroomPrice, jTextFieldMeal, jTextFieldMealPrice, jTextFieldEntertainment, jTextFieldEntertainmentPrice);
                eventC.MonitorRegGuest(jListEvents, jListGuest);
            }
        });
    }
    return jListEvents;
} 
```

控制器类

```
public void MonitorRegGuest(JList l, JList l2){
    String event = l.getSelectedValue().toString();
    Events retrieveGuest = new Events(event);
    retrieveGuest.loadGuests(l2);
} 
```

带有所有 sql 语句的类

```
public void loadGuests(JList l){
    ResultSet rs = null;
    ResultSet rs2 = null;
    ResultSet rs3 = null;
    MySQLController db = new MySQLController();
    db.getConnection();

    String sqlQuery = "SELECT MemberID FROM event WHERE EventName = '" + EventName + "'";
    try {
        rs = db.readRequest(sqlQuery);
        while(rs.next()){
            MemberID = rs.getString("MemberID");
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    String sqlQuery2 = "SELECT GuestListID FROM guestlist WHERE MemberID = '" + MemberID + "'";
    try {
        rs2 = db.readRequest(sqlQuery2);
        while(rs2.next()){
            GuestListID = rs2.getString("GuestListID");
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    String sqlQuery3 = "SELECT Name FROM guestcontact WHERE GuestListID = '" + GuestListID + "'";
    try {
        rs3 = db.readRequest(sqlQuery3);
        while(rs3.next()){
            ((DefaultListModel)l.getModel()).addElement(rs3.getString("Name"));
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    db.terminate();
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T09:15:10.750

请暂时忘记`SQL`。然后按照以下步骤操作：

1.  [从示例](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html#ListDemo)开始--- 对应的[Java Web Start 链接](http://docs.oracle.com/javase/tutorialJWS/uiswing/components/ex6/ListDemo.jnlp)。
2.  播放示例，了解如何将元素添加到列表中。
3.  然后，您需要做的就是获取对要复制的元素的引用，并为每个元素复制它，然后将其添加到第二个列表中。
4.  享受 Java。

**EDIT:** I am still looking at your code and I am still confused of what is going on (Please consider making a [SSCCE](http://sscce.org)). But let me guess, as something is telling me that when you are calling the `ListSelectionListener` you are not using [getIsValueAdjusting()](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/ListSelectionEvent.html#getValueIsAdjusting%28%29) of the `ListSelectionEvent`, right? Therefore, this might be as well it, [for more read here](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T09:11:23.817

据我所见，您没有在填充列表之前清除列表，您可以尝试先清除模型，例如：

```
String sqlQuery3 = "SELECT Name FROM guestcontact WHERE GuestListID = '" + GuestListID + "'";
try {
    rs3 = db.readRequest(sqlQuery3);
    DefaultListModel lm = (DefaultListModel)l;
    lm.clear();
    while(rs3.next()){
        (lm.getModel()).addElement(rs3.getString("Name"));
    }
} catch (SQLException e) {
    e.printStackTrace();
} 
```

# javascript - 滚动父窗口以在 iframe 中锚定

> ID：11062099
> 
> 赞同：4
> 
> 时间：2012-06-16T09:00:57.280
> 
> 标签：javascript, iframe, scroll

父级和 iframe 在同一个域上。iframe 具有动态高度并且没有自己的滚动条 - 滚动条位于父窗口上。

尽管进行了很多搜索，但我找不到在加载时将父窗口滚动到 iframe 中的锚点的方法。即 iframe url 是 abc.com/iframe.html#link，但在加载时，只有 iframe 的顶部可见 - 父框架不会滚动到 #link。有谁知道可以使用 javascript（在父级或 iframe 中或两者中）或其他方式来完成此操作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:16:44.357

这可以通过 javascript 来完成。假设您单击一个链接，而不是锚链接它，试试这个：

```
document.getElementById('id_of_link').scrollIntoView(true); 
```

编辑：window.parent.scroll(x,y) 怎么样，其中 x,y 是通过此方法检索到的元素的位置：

```
function getOffset( el ) {
    var _x = 0;
    var _y = 0;
    while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
        _x += el.offsetLeft - el.scrollLeft;
        _y += el.offsetTop - el.scrollTop;
        el = el.offsetParent;
    }
    return { top: _y, left: _x };
}
var x = getOffset( document.getElementById('yourElId') ).left; 
```

From:[获取一个 HTML 元素的位置 (X,Y)](https://stackoverflow.com/questions/442404/dynamically-retrieve-html-element-x-y-position-with-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T19:59:18.520

您是否尝试对#进行urlencoding？

尝试：%23

# soap - 是否有任何免费软件可以开发 XMPP 网关？

> ID：11062101
> 
> 赞同：0
> 
> 时间：2012-06-16T09:01:22.940
> 
> 标签：soap, xmpp

我正在尝试开发可以从标准 XMPP 客户端发送/接收的 XMPP 网关。此 XMPP 网关应支持将 XMPP 请求转换为 Soap，反之亦然。我正在尝试集成的服务器仅支持soap。我不想从头开始开发 XMPP 网关。我看过 Axis Vysper，但找不到如何根据我的要求进行调整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:54:31.600

Apache Vysper 可以用来做到这一点。即使 Vysper 没有对 SOAP 的内置支持（如标准 XMPP 扩展[http://xmpp.org/extensions/xep-0072.html](http://xmpp.org/extensions/xep-0072.html)），您也可以创建自己的模块来捕获 XMPP 消息并发出 SOAP 调用，只需就像在 Web 应用程序中一样，您正在创建自己的 Servlet 来拦截 HTTP 请求并发出数据库调用。

您可以在下面找到如何创建模块和相关内容的一个示例

[https://svn.apache.org/repos/asf/mina/vysper/trunk/server/core/src/test/java/org/apache/vysper/xmpp/modules/extension/xep0054_vcardtemp](https://svn.apache.org/repos/asf/mina/vysper/trunk/server/core/src/test/java/org/apache/vysper/xmpp/modules/extension/xep0054_vcardtemp)

# ios - iOS播放视频黑屏？

> ID：11062103
> 
> 赞同：2
> 
> 时间：2012-06-16T09:01:24.583
> 
> 标签：ios

我一直在通过谷歌浏览各种解释，但我仍然无法弄清楚这段代码何时触发屏幕是漆黑的。任何人都能够发现错误？

**更新**

```
- (IBAction)playVideo:(id)sender {
    NSURL *videoUrl = [[DataStore singletonInstance] getVideoUrl:self withUuid:self.eventDetailVC.event.uuid];
    if ([videoUrl checkResourceIsReachableAndReturnError:nil] == NO) {
        NSLog(@"Video doesn't not exist.");
        return;
    }
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoUrl];
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayBackDidFinish:) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification 
                                               object:player];
    [previewView addSubview:player.view];
    player.view.frame = previewView.bounds;
    player.controlStyle = MPMovieControlStyleDefault;
    [player play];
}

- (void)moviePlayBackDidFinish:(NSNotification*)notification {
    NSLog(@"moviePlayBackDidFinish: called");
    MPMoviePlayerController *player = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification 
                                                  object:player];
    // Checking for errors
    NSDictionary *notiUserInfo = [notification userInfo];
    if (notiUserInfo != nil) {
        NSError *errorInfo = [notiUserInfo objectForKey:@"error"];
        if ([[errorInfo domain] isEqualToString:@"MediaPlayerErrorDomain"]) {
            UIAlertView *notice = [[UIAlertView alloc] initWithTitle:@"Error" 
                                                             message:[errorInfo localizedDescription] 
                                                            delegate:self 
                                                   cancelButtonTitle:@"OK" 
                                                   otherButtonTitles:nil];
            [notice show];
            return;
        }
    }
    // Remove from view
    [player.view removeFromSuperview];
    [player stop];
} 
```

仅供参考，moviePlayBackDidFinish 根本没有被调用。我不知道为什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T23:17:43.250

为 MPMoviePlayerController 创建属性，因为您在将其添加为子视图后保留视图，但不保留控制器。

```
@property (strong, nonatomic) MPMoviePlayerController *player;

...

@synthesize player = _player;

...

- (IBAction)playVideo:(id)sender
{
    NSURL *videoUrl = [[DataStore singletonInstance] getVideoUrl:self withUuid:self.eventDetailVC.event.uuid];
    if ([videoUrl checkResourceIsReachableAndReturnError:nil] == NO)
    {
        NSLog(@"Video doesn't not exist.");
        return;
    }
    self.player = [[MPMoviePlayerController alloc] initWithContentURL:videoUrl];
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayBackDidFinish:) 
                                                 name:MPMoviePlayerPlaybackDidFinishNotification 
                                               object:nil];
    [previewView addSubview:_player.view];
    _player.view.frame = previewView.bounds;
    _player.controlStyle = MPMovieControlStyleDefault;
    [_player play];
}

- (void)moviePlayBackDidFinish:(NSNotification*)notification
{
    NSLog(@"moviePlayBackDidFinish: called");
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification 
                                                  object:nil];
    // Checking for errors
    NSDictionary *notiUserInfo = [notification userInfo];
    if (notiUserInfo != nil)
    {
        NSError *errorInfo = [notiUserInfo objectForKey:@"error"];
        if ([[errorInfo domain] isEqualToString:@"MediaPlayerErrorDomain"])
        {
            UIAlertView *notice = [[UIAlertView alloc] initWithTitle:@"Error" 
                                                             message:[errorInfo localizedDescription] 
                                                            delegate:self 
                                                   cancelButtonTitle:@"OK" 
                                                   otherButtonTitles:nil];
            [notice show];
            return;
        }
    }
    // Remove from view
    [_player.view removeFromSuperview];
    [_player stop];
    self.player = nil;
} 
```

# c# - Windows 8 中的购物车应用程序

> ID：11062106
> 
> 赞同：0
> 
> 时间：2012-06-16T09:01:52.000
> 
> 标签：c#, windows-8, windows-runtime

我想在 Windows 8 上开发一个小型原型，我可以在其中选择产品并将它们添加到购物车。但是我知道 WinRT 不支持本地数据库（MS-Access、SQL），因此我如何存储产品和购物车信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:49:41.397

您可以使用 SQLite。有关详细信息，请参阅[http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)。

# java - 在课堂上呼叫位置经理

> ID：11062112
> 
> 赞同：0
> 
> 时间：2012-06-16T09:02:18.870
> 
> 标签：java, android, location, android-context

我有以下课程

```
public class GPSManager  {

Context MyContext;
boolean GotLocation = false;
Location CurrentLocation;

public GPSManager(Context context){
    MyContext =  context;
}
LocationManager locationManager = (LocationManager)MyContext.getSystemService(MyContext.LOCATION_SERVICE);

LocationListener locationlistener = new LocationListener() {
    public void onLocationChanged(Location location) {
      // Called when a new location is found by the network location provider.
        GotLocation = true;
      CurrentLocation = location;
    } 
```

//ETC

从活动中调用如下调用

```
GPSManager myGPS = new GPSManager(this); 
```

但是当我运行它失败时，我相信它与上下文传递有关，因为在调试器中我*认为*（对于 Eclipse 来说仍然是新的）它是一个空值。

我想要的只是一个返回当前位置的类（不需要最后知道的位置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:46:15.920

从您的活动中，您可以收到您当前的位置，添加
`locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE); location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER); locationListener = new CurrentGPSLocation();locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);`
到您的 onCreate 函数中。
然后加...
`private class CurrentGPSLocation implements LocationListener { @Override public void onLocationChanged(Location location) { if (location != null) { GeoPoint CurrentLocation = new GeoPoint( (int) (location.getLatitude() * 1E6), (int) (location.getLongitude() * 1E6)); } }`

# java - 如何删除 JSON 或 XML 中来自 Axis2 Web 服务响应的标记？

> ID：11062113
> 
> 赞同：0
> 
> 时间：2012-06-16T09:02:52.773
> 
> 标签：java, json

我创建了一个使用 Axis2 框架的 Web 服务。我注意到为 Web 服务生成的响应总是包含返回标签。那么，如何从 Web 服务响应中删除返回标签？我只想要普通的 XML/JSON 响应……
例如。1 顶峰

```
 I need response like,-

             <Student>
                   <rollNo>1</rollNo>
                   <studentNm>Sumit</studentNm>
             </Student> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:17:27.837

您可能无法从 Web 服务的响应对象中删除标头。通常返回值被包装在一个返回对象中。为什么不将“返回”添加到您正在获取的路径或获取子部分？

# vba - 如何区分列表框中显示的文本和实际值。？

> ID：11062114
> 
> 赞同：4
> 
> 时间：2012-06-16T09:02:52.740
> 
> 标签：vba

我有一个带有多选选项的列表框。`addItem`我使用该函数填充它。我在谷歌上找不到任何关于这个的文章，但我需要区分列表框中显示的文本和一个真实的值。

例如：

```
shown      hiddenvalue
--------   -----------
monday     A1
tuesday    A2
wednesday  C7 
```

等等

是否可以？如何访问这些值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T09:32:10.123

对于 VBA 列表框，您想要：

1.  声明两列 ( `ColumnCount = 2`)。
2.  使第二个隐藏：`ColumnWidths = ";0"`。
3.  将第二列声明为绑定 ( `BoundColumn = 2`)，将第一列声明为文本 ( `TextColumn = 1`)。
4.  有一个添加值的过程：

    ```
    Private Sub AddWithID(Text As String, ID As String)
      ListBox1.AddItem Text
      ListBox1.List(ListBox1.ListCount - 1, 1) = ID
    End Sub 
    ```

现在，对于单选列表框，您可以使用`.Value`或`.Text`找出选定的值/文本。

对于多选列表框，您可以在一行的索引中使用`.List(i, 0)`文本和`.List(i, 1)`值。`i`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T11:22:02.877

另一种方式...使用集合。

```
Private HiddenValue As New Collection

Private Sub CommandButton1_Click()
    AddItems "monday", "A1"
    AddItems "tuesday", "A2"
    AddItems "wednesday", "C7"
End Sub

Private Sub CommandButton2_Click()
    MsgBox "Shown Value :" & ListBox1.List(ListBox1.ListIndex) & vbNewLine & _
    "Hidden Value " & HiddenValue(ListBox1.ListIndex + 1)
End Sub

Private Sub AddItems(Text As String, ID As String)
    ListBox1.AddItem Text
    HiddenValue.Add ID
End Sub 
```

快照

![在此处输入图像描述](../Images/706a2f09617c314de13cd7760dc356b0.png)

# php - 在这种情况下哪个最好，Base64 还是静态图像？

> ID：11062117
> 
> 赞同：4
> 
> 时间：2012-06-16T09:03:09.083
> 
> 标签：php, javascript, jquery

我的应用程序的一部分 大量使用图像处理。使用 ajax 帖子和图像处理服务器端使用多种方法进行裁剪、过滤器等。用户采取的每个操作动作都会创建一个物理图像而不删除原始图像，以便允许“撤消”系统使用户能够将他的图像恢复到任何先前的时间点。

当用户完成会话或关闭浏览器时，所有这些“临时”图像都会通过发布到服务器的方式删除。

对于现代浏览器，我们将使用 html5 扩展图像处理功能。使用画布使我们能够在客户端执行所有这些图像操作，而无需通过编码和动态嵌入 base64 数据来创建额外的静态图像。

我担心的是“撤消”系统。使用静态回退方法，我们存储了一个对象数组，其中包含指向静态图像的链接。这提供了完整的撤消功能。但是，如果我们在所有客户端都这样做，那么这个数组实际上必须包含每个“撤消”点的 base64 数据的副本对于用户正在操作的每个图像（典型的用例可能是 20 个原始图像，每个图像有 4-5 个撤消点）。

在我花了几天时间对此进行原型设计之前，我希望有人可能会对这种方法提出一些意见。这是个好主意吗？馊主意？从浏览器性能和内存使用的角度来看，存储大量 base64 图像数据对象是不是一个坏主意？

欢迎任何想法，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:17:16.430

这是个坏主意。Base64 占用的存储空间比实际编码的数据多 30%。如果您的服务器上的图像可以通过实际的 URL 访问，请考虑保留对`<img>`与 DOM 分离的元素的引用。

# php - 无法打开流：HTTP 请求失败-Google API 请求在 php 中计算距离？

> ID：11062123
> 
> 赞同：2
> 
> 时间：2012-06-16T09:04:00.367
> 
> 标签：php, google-maps

我正在向 google maps api 服务发送请求以计算距离，如下所示：

```
$apiURL = "http://maps.google.com/maps/geo?&output=xml&key=AIzaSyCYz5Kpw4xTYVwAUibaMIUVBcaL-RfTumk&q=myAddress" 
```

我正在尝试使用 来获得响应`file_get_contents($apiURL)`，并且它与我的本地系统运行良好。当我将相同的文件上传到服务器时，输出`file_get_contents($apiURL)`似乎为空并给出错误，如 - 警告：

```
file_get_contents(http://maps.google.com/maps/geo?&output=xml&key=AIzaSyCYz5Kpw4xTYVwAUibaMIUVBcaL-RfTumk&q=Aerekere
%2Cbangalore%2Ckarnataka) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 403 Forbidden in /mnt/stor2-wc1-dfw1/410304/hfg.mpadusa.com/web/content/components/com_helping/controllers/distance.php 
on line 108. 
```

我检查了几件事，比如

1.  allow_url_fopen : 没问题
2.  Linux 服务器的新 ApI 密钥。
3.  在本地 Windows 系统中，所有响应都正常。

什么可能我的问题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:35:59.760

由于在访问外部内容（例如通过 http）时存在安全风险，file_get_contents 通常在 Web 服务器上被禁用/阻止。

作为一种良好做法，始终使用 curl 函数来获取外部内容，包括对 google API 的调用。你可以在网上找到很多使用 curl 的例子，但是一个简单的起点是手册：[http ://au2.php.net/curl_exec](http://au2.php.net/curl_exec)

# android - 如何在android中以固定大小捕获图像？

> ID：11062125
> 
> 赞同：4
> 
> 时间：2012-06-16T09:04:12.360
> 
> 标签：android, android-camera, android-image

我使用以下代码来捕获图像。一切正常，当我捕获它具有 2592x1944 大小的图像时，图像是在横向模式下捕获的。现在我想捕捉尺寸为 534x534 的图像。我改变了这个参数值`params.setPictureSize(534, 534);`什么都不会改变。我怎样才能做到这一点。提前致谢。

**DgCamActivity.java**

```
public class DgCamActivity extends Activity implements SensorEventListener {
    private Camera mCamera;
    private CameraPreview mPreview;
    private SensorManager sensorManager = null;
    private int orientation;
    private ExifInterface exif;
    private int deviceHeight;
    private Button ibRetake;
    private Button ibUse;
    private Button ibCapture;
    // private FrameLayout flBtnContainer;
    private File sdRoot;
    private String dir;
    private String fileName;
    // private ImageView rotatingImage;
    private int degrees = -1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

        // Setting all the path for the image
        sdRoot = Environment.getExternalStorageDirectory();
        dir = "/SimpleCamera/";

        // Getting all the needed elements from the layout
        // rotatingImage = (ImageView) findViewById(R.id.imageView1);
        ibRetake = (Button) findViewById(R.id.ibRetake);
        ibUse = (Button) findViewById(R.id.ibUse);
        ibCapture = (Button) findViewById(R.id.ibCapture);
        // flBtnContainer = (FrameLayout) findViewById(R.id.flBtnContainer);

        // Getting the sensor service.
        sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);

        // Selecting the resolution of the Android device so we can create a
        // proportional preview
        Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay();
        deviceHeight = display.getHeight();

        // Add a listener to the Capture button
        ibCapture.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                mCamera.takePicture(null, null, mPicture);
            }
        });

        // Add a listener to the Retake button
        ibRetake.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Deleting the image from the SD card/
                File discardedPhoto = new File(sdRoot, dir + fileName);
                discardedPhoto.delete();

                // Restart the camera preview.
                mCamera.startPreview();

                // Reorganize the buttons on the screen
                // flBtnContainer.setVisibility(LinearLayout.VISIBLE);
                ibRetake.setVisibility(LinearLayout.GONE);
                ibUse.setVisibility(LinearLayout.GONE);
            }
        });

        // Add a listener to the Use button
        ibUse.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Everything is saved so we can quit the app.
                finish();
            }
        });
    }

    private void createCamera() {
        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Setting the right parameters in the camera
        Camera.Parameters params = mCamera.getParameters();
        List<Camera.Size> sizes = params.getSupportedPictureSizes();
        Log.v("SUPORTED SIZE IS>>>>>.", params.getSupportedPictureSizes() + "");
        Log.v("SUPORTED SIZE IS>>>>>.", sizes.size() + "");
        params.setPictureSize(1600, 1200);
        params.setPictureFormat(PixelFormat.JPEG);
        params.setJpegQuality(100);
        mCamera.setParameters(params);

        // Create our Preview view and set it as the content of our activity.
        mPreview = new CameraPreview(this, mCamera);
        RelativeLayout preview = (RelativeLayout) findViewById(R.id.camera_preview);

        // Calculating the width of the preview so it is proportional.
        float widthFloat = (float) (deviceHeight) * 4 / 3;
        int width = Math.round(widthFloat);

        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        preview.setLayoutParams(layoutParams);
        preview.addView(mPreview, 0);
    }

    @Override
    protected void onResume() {
        super.onResume();

        createCamera();

        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    protected void onPause() {
        super.onPause();

        releaseCamera();
        RelativeLayout preview = (RelativeLayout) findViewById(R.id.camera_preview);
        preview.removeViewAt(0);
    }

    private void releaseCamera() {
        if (mCamera != null) {
            mCamera.release(); // release the camera for other applications
            mCamera = null;
        }
    }

    public static Camera getCameraInstance() {
        Camera c = null;
        try {
            // attempt to get a Camera instance
            c = Camera.open();
        } catch (Exception e) {
            // Camera is not available (in use or does not exist)
        }

        // returns null if camera is unavailable
        return c;
    }

    private PictureCallback mPicture = new PictureCallback() {

        public void onPictureTaken(byte[] data, Camera camera) {

            ibRetake.setVisibility(View.VISIBLE);
            ibUse.setVisibility(View.VISIBLE);

            // File name of the image that we just took.
            fileName = "IMG_"
                    + new SimpleDateFormat("yyyyMMdd_HHmmss")
                            .format(new Date()).toString() + ".jpg";

            File mkDir = new File(sdRoot, dir);
            mkDir.mkdirs();

            // Main file where to save the data that we recive from the camera
            File pictureFile = new File(sdRoot, dir + fileName);

            try {
                FileOutputStream purge = new FileOutputStream(pictureFile);
                purge.write(data);
                purge.close();
            } catch (FileNotFoundException e) {
                Log.d("DG_DEBUG", "File not found: " + e.getMessage());
            } catch (IOException e) {
                Log.d("DG_DEBUG", "Error accessing file: " + e.getMessage());
            }

            try {
                exif = new ExifInterface("/sdcard/" + dir + fileName);
                exif.setAttribute(ExifInterface.TAG_ORIENTATION, ""
                        + orientation);
                exif.saveAttributes();
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
    };

    /**
     * Putting in place a listener so we can get the sensor data only when
     * something changes.
     */
    public void onSensorChanged(SensorEvent event) {
        synchronized (this) {
            if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
                RotateAnimation animation = null;
                if (event.values[0] < 4 && event.values[0] > -4) {
                    if (event.values[1] > 0
                            && orientation != ExifInterface.ORIENTATION_ROTATE_90) {
                        // UP
                        orientation = ExifInterface.ORIENTATION_ROTATE_90;
                        animation = getRotateAnimation(270);
                        degrees = 270;
                    } else if (event.values[1] < 0
                            && orientation != ExifInterface.ORIENTATION_ROTATE_270) {
                        // UP SIDE DOWN
                        orientation = ExifInterface.ORIENTATION_ROTATE_270;
                        animation = getRotateAnimation(90);
                        degrees = 90;
                    }
                } else if (event.values[1] < 4 && event.values[1] > -4) {
                    if (event.values[0] > 0
                            && orientation != ExifInterface.ORIENTATION_NORMAL) {
                        // LEFT
                        orientation = ExifInterface.ORIENTATION_NORMAL;
                        animation = getRotateAnimation(0);
                        degrees = 0;
                    } else if (event.values[0] < 0
                            && orientation != ExifInterface.ORIENTATION_ROTATE_180) {
                        // RIGHT
                        orientation = ExifInterface.ORIENTATION_ROTATE_180;
                        animation = getRotateAnimation(180);
                        degrees = 180;
                    }
                }
                if (animation != null) {
                    // rotatingImage.startAnimation(animation);
                }
            }

        }
    }

    /**
     * Calculating the degrees needed to rotate the image imposed on the button
     * so it is always facing the user in the right direction
     * 
     * @param toDegrees
     * @return
     */
    private RotateAnimation getRotateAnimation(float toDegrees) {
        float compensation = 0;

        if (Math.abs(degrees - toDegrees) > 180) {
            compensation = 360;
        }

        // When the device is being held on the left side (default position for
        // a camera) we need to add, not subtract from the toDegrees.
        if (toDegrees == 0) {
            compensation = -compensation;
        }

        // Creating the animation and the RELATIVE_TO_SELF means that he image
        // will rotate on it center instead of a corner.
        RotateAnimation animation = new RotateAnimation(degrees, toDegrees
                - compensation, Animation.RELATIVE_TO_SELF, 0.5f,
                Animation.RELATIVE_TO_SELF, 0.5f);

        // Adding the time needed to rotate the image
        animation.setDuration(250);

        // Set the animation to stop after reaching the desired position. With
        // out this it would return to the original state.
        animation.setFillAfter(true);

        return animation;
    }

    /**
     * STUFF THAT WE DON'T NEED BUT MUST BE HEAR FOR THE COMPILER TO BE HAPPY.
     */
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
    }
} 
```

**CameraPreview.java**

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;

    public CameraPreview(Context context, Camera camera) {
        super(context);
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        mHolder.setSizeFromLayout();
        mHolder.setFixedSize(100, 100);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the
        // preview.
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();
        } catch (IOException e) {
            Log.d("DG_DEBUG", "Error setting camera preview: " + e.getMessage());
        }

    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null) {
            // preview surface does not exist
            return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e) {
            // ignore: tried to stop a non-existent preview
        }

        // make any resize, rotate or reformatting changes here

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e) {
            Log.d("DG_DEBUG", "Error starting camera preview: " + e.getMessage());
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // empty. Take care of releasing the Camera preview in your activity.
    }

} 
```

**测试.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/camera_preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" >
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="41dp" >

        <Button
            android:id="@+id/ibCapture"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/relativeLayout1"
            android:layout_alignLeft="@+id/camera_preview"
            android:text="Capture" />

        <Button
            android:id="@+id/ibRetake"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="36dp"
            android:layout_toRightOf="@+id/ibCapture"
            android:text="ReTake" />

        <Button
            android:id="@+id/ibUse"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="38dp"
            android:text="Save" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-11T07:35:36.283

我相信Android在拍照时不会允许任意图像尺寸，您应该使用[parameters.getSupportedPictureSizes()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPictureSizes())方法来查询支持的图像尺寸。

我怀疑你必须选择一个足够大的尺寸来切割你想要的 534x534 补丁。您可以通过使用[BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html)方法对拍摄的图片进行解码，然后使用 bitmap.getPixels() 方法来提取所需的补丁大小，或者使用类似 bitmap.createScaledBitmap() 的方法将图片缩放到所需的大小。

在您拥有正确大小的位图后，您可以使用 bitmap.compress() 来保存您的图像，如果这是您要使用的最终格式。

# java - 如何在 cmd 中查看我的数据库表和插入的值。在android中创建表后

> ID：11062132
> 
> 赞同：0
> 
> 时间：2012-06-16T09:04:53.537
> 
> 标签：java, android, database, cmd

请帮助我查看 Sqlite 表及其内容的命令。

```
 mydb = DbActivity.this.openOrCreateDatabase("asd", MODE_APPEND, null);
    mydb.execSQL("CREATE TABLE IF NOT EXISTS hai(name varchar,password varchar)");
    mydb.execSQL("INSERT INTO hai VALUES('"+ a + "','" + b + "')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:19:33.747

使用 sqlite 工具打开数据库：

```
C:\> adb shell 
# sqlite3 /data/data/com.org.sample/databases/history.db

SQLite version 3.5.9
Enter ".help" for instructions

sqlite> .tables
android_metadata  suggestions

sqlite> .schema suggestions
CREATE TABLE suggestions (_id INTEGER PRIMARY KEY,display1 TEXT UNIQUE ON CONFLICT REPLACE,display2 TEXT,query TEXT,date LONG);

sqlite> select * from suggestions;
2|randy pausch last lecture|Results for "randy pausch last lecture"|randy pausch last lecture|1264159994987 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:46:19.007

**如果**您使用模拟器或**您**的设备已植根：

1）首先我推荐你这个eclipse插件：[http ://coderzheaven.com/2011/04/sqlitemanager-plugin-for-eclipse/](http://coderzheaven.com/2011/04/sqlitemanager-plugin-for-eclipse/)

你可以在里面浏览你的数据库

2）cmd中的第二种方式：

```
adb -s emulator-5554 shell
sqlite3 /data/data/your-app-folder/databases/database-name.db
select * from myTable 
```

**如果**您的设备没有植根，您将无能为力。

# asp.net - 如何将 AJAX 发布到类库中的 url 但不是同一个 IIS Web 应用程序？

> ID：11062133
> 
> 赞同：0
> 
> 时间：2012-06-16T09:04:54.840
> 
> 标签：asp.net, ajax, jquery

我一直在使用 ajax，下面没有问题是我的 ajax 邮政编码的样子：

```
$.ajax({
  type: "POST",
  url: '<%=ResolveUrl("TodoService.asmx/CreateNewToDo")%>',
  data: jsonData,
  contentType: "application/json; charset=utf-8",
  datatype: "json",
  success: function () {
    //if (msg.d) {
      $('#ContentPlaceHolder1_useridHiddenField').val("");
      $('#ContentPlaceHolder1_titleTextBox').val("");
      $('#ContentPlaceHolder1_destTextBox').val("");

      $('#ContentPlaceHolder1_duedateTextBox').val("");
      alert('Your todo has been saved');
     // }
  },

  error: function (msg) {
    alert('There was an error processing your request');
  }

}); 
```

但是，当我尝试获取位于同一解决方案中的类库中的 Web 服务的 URL 时，问题出现了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:32:23.647

这个[ASP.Net](http://forums.asp.net/t/1805440.aspx/1)

说如果你想把webservice放到classlibrary，你可以试着把Webservice.asmx.cs文件放到class library里，把Webservice.asmx文件放到web application project中，然后用jquery在.页面

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T09:20:38.083

如果它与您的应用程序不同，则被视为 XSS（跨站点脚本），并且不允许这样做。

但是，您可以在自己的应用程序中包装对外部服务的调用（[比如说在 REST 服务中](https://stackoverflow.com/a/10967315/1268570)），然后从 jquery 调用您的服务

# css - 是否建议将 CSS 背景属性放在 HTML 标记或正文中？

> ID：11062134
> 
> 赞同：2
> 
> 时间：2012-06-16T09:04:55.267
> 
> 标签：css, styles

我见过一个使用谷歌浏览器的网站，他们将 CSS 背景属性放在 HTML 标记中，如下所示：

```
html { background: #eee url('../img/bg.jpg') center center repeat fixed; } 
```

可以这样做还是应该将其放入体内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:16:05.650

你把背景放在哪个上并不重要，两者都一样好，但有一个问题。

如果`BODY`只放背景，即使页面上没有内容，背景也会拉伸整个`HTML`屏幕`BODY`高度`BODY`, 就像任何`DIV`.

当需要两个背景图像时，我经常在两者上都使用背景，因为这消除了对不必要的`DIV`包装器的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:16:01.050

我建议在`body`标签上放置一个页面宽的背景图像。

```
<body> 
```

然后在您的样式表中，您可以指定背景

```
body
 {
   background-image:url('blah.jpg');
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:15:07.773

[lea.verou.me](http://lea.verou.me/)把它放在 html 标签上。如果这对她来说足够好，那么对你来说就足够了。;)

你可能也想扔`height: 100%;`在那里。

# javascript - Web Driver：如何知道当前帧的活跃度？

> ID：11062135
> 
> 赞同：1
> 
> 时间：2012-06-16T09:05:07.150
> 
> 标签：javascript, webdriver

我需要在页面中移动 15 个框架，

我怎样才能知道我在哪个框架下？

例如从 frame1 到 frame8 和 frame8 到 frame12 等等......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:29:36.860

`driver.switchTo().frame()`在 WebDriver 中，您必须明确地通过（或您使用的任何语言绑定中的等效项）切换到框架或 iframe 。因此，您应该始终**知道**您所在的框架或 iframe，因为您切换到了它。如果您发现出于某种原因需要对其进行跟踪，您可以尝试在每次切换到框架或 iframe 时将对象添加到列表中。您无法切换到 WebDriver 中的父框架或同级框架，因此要导航到其中之一，您需要使用 use `driver.switchTo().defaultContent()`，它将始终切换到顶级框架，并再次向下导航层次结构。

# jquery - 单击链接后，jQuery 菜单保持打开状态

> ID：11062139
> 
> 赞同：0
> 
> 时间：2012-06-16T09:06:09.327
> 
> 标签：jquery, wordpress, menu, onclick

我有一个 jQuery 菜单，在“单击”时打开并在“dblclick”时关闭。 [http://jsfiddle.net/snoffoz/4rZa9/1/](http://jsfiddle.net/snoffoz/4rZa9/1/)

我的问题是它（子菜单）在我单击链接后关闭。有没有办法让它只在单击主菜单点（菜单 1、菜单 2）时打开/关闭？

编辑：我的问题不会出现在 jsfiddle 中，因为链接不是真实的。

"ul" "li" 由 Wordpress 生成。WP 链接[http://wptemp.site90.net/](http://wptemp.site90.net/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:24:33.163

**工作演示** [http://jsfiddle.net/JuvwB/](http://jsfiddle.net/JuvwB/)

如果我建议您尝试重构您的无序列表，那么您遇到了绑定问题，因为您的顶部`ul`列表`li`嵌套了全新的`ul`即水平菜单。

此代码应该对您有所帮助，我所做的只是在用户单击嵌套列表时返回 false。

你也可以试试这个：[http ://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

希望这会有所帮助，干杯！

**代码**

```
jQuery.noConflict();
(function($) {
$(function() {

    // Dropdown Menu

    var timeout    = 100;
    var closetimer = 0;
    var ddmenuitem = 0;

    function jsddm_open() {
        jsddm_canceltimer();
        jsddm_close();
        ddmenuitem = $(this).find('ul').css('visibility', 'visible').parent().addClass('jsddm_hover').end();
    }
    function jsddm_close() {
        if(ddmenuitem) ddmenuitem.css('visibility', 'hidden').parent().removeClass('jsddm_hover');
    }
    function jsddm_timer() {
        closetimer = window.setTimeout(jsddm_close, timeout);
    }
    function jsddm_canceltimer() {
        if(closetimer) {
            window.clearTimeout(closetimer);
            closetimer = null;
        }
    }

    $('ul.jsddm li').bind('click', jsddm_open);

    $('ul.jsddm li').bind('dblclick',  jsddm_timer);
    $('ul.sub-menu li a').bind('dblclick', function(){
        return false;        
    });
    //document.onclick = jsddm_close;

    $('.thumb img').after('<span></span>');
    $('.thumb span').css('opacity','0');
    $('.post_home a:first-child').hover(function(){

    }); 

});
})(jQuery); 
```

​</p>

# sqlite - 无法使用 QT 在 sqlite 中存储二进制数据

> ID：11062145
> 
> 赞同：1
> 
> 时间：2012-06-16T09:07:22.800
> 
> 标签：sqlite, qt

**无法使用 QT 将所有二进制数据值存储到 sqlite3 表中。**

为此，我创建了一个 BLOB 数据列来存储名为 logTable 的二进制数据表。我正在尝试将二进制数据插入到 binary_data[] 缓冲区，其值为 0x1 到 0xFF 和 0x00 到 0xFF 等等，直到 1024 字节。但是当我执行查询来存储数据时，表格只显示 0x1 到 0xFF，但剩余的字符没有被存储（因为下一个立即值是 0x00）。我想存储所有的二进制数据值？

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    conect_to_log_db("./log.db");

    unsigned char binary_data[1024];

    for(unsigned int i = 0, value = 1; i < 1024; i++, value++)
    {
        binary_data[i] = value;
    }
    store_to_log_db("01/02/2012,13:03:58", binary_data, 1024);
    ......
}

bool store_to_log_db(QString dateTime, unsigned char *data, unsigned int dataLength)
{
    QSqlQuery objQuery(objLogsDB);

    QString query = "CREATE TABLE IF NOT EXISTS logTable(logDateTime VARCHAR(19), packet BLOB, direction INTEGER)";
    objQuery.exec(query);

    QByteArray dataArr;
    dataArr.resize(dataLength);
    for(unsigned int i = 0; i < dataLength; i++)
    {
        dataArr[i] = data[i];
    }

    QVariant blobData = dataArr.data();

    objQuery.prepare("INSERT INTO logTable VALUES(:logDateTime,:packet,:direction)");
    objQuery.bindValue(":logDateTime",dateTime);
    objQuery.bindValue(":packet",blobData,QSql::In | QSql::Binary);
    objQuery.bindValue(":direction",1);

    qDebug() << objQuery.exec();

    return true;
} 
```

执行此代码后，当我使用 sqlite 输出时，表的结果是 254 个字符

$sqlite3 日志.db

sqlite>.输出try.txt

sqlite>从logTable中选择*；

$ls -l 尝试.txt

大小为 406 字节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:10:45.653

您必须使用`.dump`. sqlite3 交互式客户端不输出 BLOB 列。

```
$sqlite3 log.db
sqlite> .output try.txt
sqlite> .dump
sqlite> .quit 
```

下面的代码是创建一个简单的包含 blob 的数据库的自包含示例。

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/sqlite-blob-11062145
#include <QtSql>

int main()
{
    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName("./log.db");

    if (!db.open()) { qDebug() << "can't open the database"; return 1; }

    QSqlQuery query{db};

    query.exec("DROP TABLE log");

    if (!query.exec("CREATE TABLE log(packet BLOB)"))
        qDebug() << "create table failed";

    QVariant data[2] = {QByteArray{1024, 1}, QByteArray{2048, 2}};

    query.prepare("INSERT INTO log VALUES(:packet)");

    query.bindValue(":packet", data[0], QSql::In | QSql::Binary);
    if (!query.exec()) qDebug() << "insert failed";

    query.bindValue(":packet", data[1], QSql::In | QSql::Binary);
    if (!query.exec()) qDebug() << "insert failed";

    db.close();

    if (!db.open()) { qDebug() << "can't reopen the database"; return 2; }

    query.prepare("SELECT (packet) FROM log");
    if (!query.exec()) qDebug() << "select failed";

    for (auto const & d : data) if (query.next()) {
        qDebug() << query.value(0).toByteArray().size() << d.toByteArray().size();
        if (d != query.value(0)) qDebug() << "mismatched readback value";
    }

    db.close();
} 
```

# html - 向右浮动图像

> ID：11062153
> 
> 赞同：-1
> 
> 时间：2012-06-16T09:08:50.663
> 
> 标签：html, image, css-float

我想将 div#rakshak 中的图像浮动到 div#MainMenu 的右侧。如何修复以下站点中的 css

[网站已删除]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:19:34.510

在 html 中替换它们的位置（div#rakshak 应该在 html 中的 div#MainMenu 之上），从 div#MainMenu 中删除 clear:right ，如果你想将其 margin-right 增加到 0 以上（我的建议是 10px）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:50:05.343

您将主菜单 div 和 rakshak div 的浮动设置为正确。

我建议您将菜单更改为向左浮动，这将解决问题，否则您更改 div 的顺序

**选项1**

```
＃主菜单 {
向左飘浮;
明确：正确；
边距右：-8px；
边距顶部：42px；
}

```

**选项 2**

```
<div id="MainHeader" class="pageWrapper clearfix">
                <h1 id="Logo"><a href="http://www.gauravgatha.org">    <img src="http://www.gauravgatha.org/wp-content/uploads/2012/05/logo.png" alt="Gaurav Gatha" width="140" height="40"></a></h1>
<div id="rakshak" style="clear: right;float:right; margin-top:35px;">
                        <a href="http://www.rakshakfoundation.org"><img src="http://www.gauravgatha.org/wp-content/themes/parallelus-salutation/assets/images/rakshak.png"></a>
                    </div>

                <div id="MainMenu">
                    <div class="inner-1">
                        <div class="inner-2">
                            <nav>

                                <div id="MM" class="slideMenu">
                                    <ul id="menu-main-menu" class="menu"><li id="menu-item-3552" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-3552"><a href="http://www.gauravgatha.org">Home</a></li>
<li id="menu-item-3554" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3554" style="z-index: 300; "><a href="#" class="hasSubMenu">Contest<span class="subDown"></span></a>
<ul class="sub-menu" style="top: 31px; display: none; visibility: visible; ">
    <li id="menu-item-3553" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3553"><a href="http://www.gauravgatha.org/contest/rules/">Rules and Regulations</a></li>
    <li id="menu-item-3555" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3555"><a href="http://www.gauravgatha.org/contest/judging-criteria/">Judging Criteria</a></li>
    <li id="menu-item-3556" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3556"><a href="http://www.gauravgatha.org/contest/the-jury/">The Jury</a></li>
    <li id="menu-item-3557" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3557"><a href="http://www.gauravgatha.org/contest/rules/">Rules and Regulations</a></li>
    <li id="menu-item-3558" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3558"><a href="http://www.gauravgatha.org/contest/important-dates/">Important Dates</a></li>
</ul>
</li>
<li id="menu-item-3559" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3559"><a href="#">Participate</a></li>
<li id="menu-item-3560" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3560"><a href="http://www.gauravgatha.org/faqs/">FAQs</a></li>
<li id="menu-item-3561" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3561"><a href="http://www.gauravgatha.org/contact/">Contact Us</a></li>
<li id="menu-item-3563" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3563"><a href="http://www.rakshakfoundation.org/poem/" onclick="javascript:_gaq.push(['_trackEvent','outbound-menu','http://www.rakshakfoundation.org']);">Last Year Entries</a></li>
</ul>                                           <div style="clear:left"></div>
                                </div>

                            </nav>
                        </div>
                    </div>
                </div>

            </div> 
```

您将需要更改主菜单的样式：

```
＃主菜单 {
浮动：对；
右边距：20px；
边距顶部：42px；
}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:14:38.820

改变 rakshak 和 mainmenu 的位置或浮动离开主菜单

# python - 如何使用 python 3.2 提取与 XML 文件属性关联的数据

> ID：11062163
> 
> 赞同：0
> 
> 时间：2012-06-16T09:11:40.363
> 
> 标签：python, xml-parsing

我有这种xml格式......

```
<event timestamp="0.447463" bustype="LIN" channel="LIN 1">  
 <col name="Time"/>  
 <col name="Start of Frame">0.440708</col>  
 <col name="Channel">LIN 1</col>  
 <col name="Dir">Tx</col>  
 <col name="Event Type">LIN Frame (Diagnostic Request)</col>  
 <col name="Frame Name">MasterReq_DB</col>  
 <col name="Id">3C</col>  
 <col name="Data">81 06 04 04 FF FF 50 4C</col>  
 <col name="Publisher">TestMaster (simulated)</col>  
 <col name="Checksum">D3 &quot;Classic&quot;</col>  
 <col name="Header Duration">2.090 ms (40.1 bits)</col>  
 <col name="Resp. Duration">4.688 ms (90.0 bits)</col>  
 <col name="Time difference">0.049987</col>  
 <empty/>  
</event> 
```

在上面的 xml 中，我需要提取与属性“名称”相关的数据
能够获取所有名称但无法获取 >MasterReq_DB< 字段
请帮助我...
提前致谢

我的python代码是...

```
import sys 
import array
import string
from xml.dom.minidom import parse,parseString
from xml.dom import minidom                                              
input_file = open("test_input.txt",'r')                                                
alines = input_file.read()
word_lst = alines.split("'")
filename = word_lst[1]
pathname=word_lst[3]                                               
f = open(pathname,'r')
doc = minidom.parse(f)
node = doc.documentElement
events = doc.getElementsByTagName('event')
for event in events:
    #print (event)
    columns =  event.getElementsByTagName('col')
    for column in columns:
        #print (column)
        head = column.getAttribute('name')
        if (head == ('Frame Name')):
           print (head)
           request = head.firstChild.wholeText
           print (request)
print ("DOne") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:58:34.960

`lxml`如果您愿意，这里有一个入门指南，可以帮助您入门：

```
In [1]: x = '''<event timestamp="0.447463" bustype="LIN" channel="LIN 1">  
   ...:  <col name="Time"/>  
   ...:  <col name="Start of Frame">0.440708</col>  
   ...:  <col name="Channel">LIN 1</col>  
   ...:  <col name="Dir">Tx</col>  
   ...:  <col name="Event Type">LIN Frame (Diagnostic Request)</col>  
   ...:  <col name="Frame Name">MasterReq_DB</col>  
   ...:  <col name="Id">3C</col>  
   ...:  <col name="Data">81 06 04 04 FF FF 50 4C</col>  
   ...:  <col name="Publisher">TestMaster (simulated)</col>  
   ...:  <col name="Checksum">D3 &quot;Classic&quot;</col>  
   ...:  <col name="Header Duration">2.090 ms (40.1 bits)</col>  
   ...:  <col name="Resp. Duration">4.688 ms (90.0 bits)</col>  
   ...:  <col name="Time difference">0.049987</col>  
   ...:  <empty/>  
   ...: </event> '''

In [2]: from lxml import etree

In [3]: tree = etree.fromstring(x)

In [4]: [elem.text for elem in tree.xpath('//*[@name]')]
Out[4]: 
[None,
 '0.440708',
 'LIN 1',
 'Tx',
 'LIN Frame (Diagnostic Request)',
 'MasterReq_DB',
 '3C',
 '81 06 04 04 FF FF 50 4C',
 'TestMaster (simulated)',
 'D3 "Classic"',
 '2.090 ms (40.1 bits)',
 '4.688 ms (90.0 bits)',
 '0.049987']

In [5]: [name for name in tree.xpath('//@name')]
Out[5]: 
['Time',
 'Start of Frame',
 'Channel',
 'Dir',
 'Event Type',
 'Frame Name',
 'Id',
 'Data',
 'Publisher',
 'Checksum',
 'Header Duration',
 'Resp. Duration',
 'Time difference'] 
```

要从文件而不是字符串中读取，请使用`lxml.etree.parse`函数。

这是[`lxml`教程](http://lxml.de/)的链接。这是[XPath 语法](http://www.w3schools.com/xpath/xpath_syntax.asp)的参考。

# scala - 使用新的 Scala 反射 API 进行“动态”方法调用

> ID：11062166
> 
> 赞同：19
> 
> 时间：2012-06-16T09:12:15.227
> 
> 标签：scala, reflection

在过去，当[Invocation](http://harrah.github.com/browse/samples/library/scala/reflect/Invocation.scala.html)是一个实验性实用程序，是标准库的一部分时，可以“动态地”调用方法，如下所示：

```
"Hello!" o 'substring(0, 4)  // to get Any back
"Hello!" oo 'substring(0, 4) // for an automatic unsafe cast to expected type 
```

如何使用新的 Scala 反射 API 做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-17T21:14:42.180

```
Welcome to Scala version 2.10.0-20120617-072418-9a28ee1ffc (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_33).
Type in expressions to have them evaluated.
Type :help for more information.

scala> class Foo { def bar(x: Int) = x }
defined class Foo

scala> val foo = new Foo
foo @ 5935b50c: Foo = Foo@5935b50c

scala> runtimeMirror(getClass.getClassLoader).reflect(foo)
res0 @ 65c24701: reflect.runtime.universe.InstanceMirror = scala.reflect.runtime.JavaMirrors$JavaMirror$JavaInstanceMirror@65c24701

scala> res0.symbol.typeSignature.member(newTermName("bar"))
res1 @ 69624a1c: reflect.runtime.universe.Symbol = method bar

scala> res0.reflectMethod(res1.asMethodSymbol)(42)
res2 @ 4ac1d188: Any = 42 
```

可以在此处找到有关如何设计 API 的一些背景信息：[使用新的 Scala 反射 API 获取伴随对象实例](https://stackoverflow.com/questions/11020746/get-companion-object-instance-with-new-scala-reflection-api/11031443#11031443)。

# playframework - 龙目岛与玩 2

> ID：11062167
> 
> 赞同：8
> 
> 时间：2012-06-16T09:12:28.117
> 
> 标签：playframework, lombok

Lombok 与 Play Framework 2 的集成怎么样？我真的很喜欢[Lombok](http://projectlombok.org/)，它使我的代码更具可读性和更少的样板。Play Framework 也很棒。但是，如果您要混淆它们，则会有很大的麻烦。

主要原因是在域类*之前编译的 play 项目中的 scala 模板。*因此，Lombok 本身就是编译器的 hack，此时不会生成访问器。

问题是：是否有任何方法可以使它起作用？

[我在Google](https://groups.google.com/group/play-framework/browse_thread/thread/67030ceff3ba26c2) [Groups](https://groups.google.com/forum/#!topic/play-framework/Ojn4EcR6Yns)中发现了一些讨论，但它们没有提供任何合理的解决方案。那么你有没有成功呢？

还有.. 为什么 Play Framework 项目的人不提供一些类似 Lombok 的解决方案？无论如何，Play 充满了代码生成魔法和影子编译……那么，为什么不呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T06:56:12.343

因此，解决方法相当简单，并且是在[google groups](https://groups.google.com/forum/#!topic/play-framework/MV11Ru_t4LE/discussion)中提出的，但是在文档中有一些晦涩难懂的地方，我将逐步描述应该做什么。

**1\. 逻辑隔离你的领域模型**

这意味着域类不应该从*视图*或*控制器*中调用任何东西。

**2.创建包含领域类的子项目**

[这里](https://github.com/playframework/Play20/wiki/SBTSubProjects)给出了一些信息。子项目与默认播放的项目非常相似，创建起来并不难。我没有从 play 的控制台中找到任何工具来执行此操作，因此您需要手动创建一些文件夹。

首先在主项目的文件夹中创建子项目文件夹。假设您将其命名为*domain-data*。接下来，创建所需的文件夹，如[标准应用程序中所述。布局](https://github.com/playframework/Play20/wiki/Anatomy)。在大多数情况下，您想在创建的子文件夹中创建简单的目录树：

```
app
 └ models
    └ myclasses 
```

现在将所有域类移动到子项目的目录树中。

**3.配置**

配置将很简单。移动到主项目的*项目*文件夹并打开*Build.scala*文件。这是 SBT 构建系统的构建脚本。

首先定义一些依赖项。将以下字符串添加到您的构建文件中：

```
val domainDependencies = Seq(
    "org.projectlombok" % "lombok" % "0.11.4"
) 
```

这会将 Lombok 的 jar 添加到您的子项目中。现在创建子项目定义：

```
val domainProject = PlayProject(
                            "domain-data", appVersion, domainDependencies, path=file("domain"), mainLang=JAVA
) 
```

路径应该指向子项目的文件夹*。*

最后一步是更新主项目配置，使其依赖于子项目。依赖将需要在每个主项目重建时进行子项目重建。

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).dependsOn(domainProject) 
```

毕竟使用终端中给出的*播放命令启动主项目，然后输入**项目*命令。您应该看到您的新子项目。

**4\. 利润**

现在是时候使用 Lombok 安全地重构现有代码了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T20:15:43.203

我的应用程序是“conseillers”（Play 2.2.1 项目），我的模型是 /app/models 中的“Conseiller.java”

a) 只需创建两个文件夹并将“/app/models”文件夹移动到新的子文件夹：/models/app/models ![创建一个新目录](../Images/4174ab37cf4267c69e27080fb406e7ed.png) ![移动文件夹](../Images/c1db946a7d4ef573ac4e4d58a06585b2.png)

b) 将新的 build.sbt 文件添加到这个新文件夹 ![创建一个新的 sbt 文件](../Images/460a252956757859bf36176d8342d33d.png)

c）使用 .dependsOn 修改根应用程序文件夹中的 build.sbt（不确定 .aggregate 是否 100% 必要）： ![修改根构建 sbt 文件](../Images/26367f98d3dc8852bf90b5532c49e8a7.png)

d) 检查、编译、运行 ![查看](../Images/9bb3ec5c7c63438456807f78667a0134.png)

e)[在 Play 网站上查看更多 sbt 子项目文档](http://www.playframework.com/documentation/2.2.1/SBTSubProjects)

# apache-flex - 在 html iFrame 中加载 flex 应用程序

> ID：11062169
> 
> 赞同：0
> 
> 时间：2012-06-16T09:12:49.987
> 
> 标签：apache-flex, iframe

我正在尝试在 html iFrame 中加载我的 felx Web 应用程序。有时它会成功加载，但在某些情况下，它会要求在同一台机器上下载 Flash 播放器。

样本

谢谢你

# python - 为什么设置 stderr=subprocess.STDOUT 修复 subprocess.check_output 调用？

> ID：11062170
> 
> 赞同：2
> 
> 时间：2012-06-16T09:13:03.060
> 
> 标签：python, subprocess

我有一个在小型服务器上运行的 python 脚本，它以三种不同的方式调用 - 从另一个 python 脚本中、通过 cron 或通过 gammu-smsd（具有出色的移动实用程序 [gammu] 的 SMS 守护程序）。该脚本用于维护，并包含以下用于测量系统上已用空间的组件（可能这可以在 Python 中实现，但这又快又脏）：

`reportdict['Used Space'] = subprocess.check_output(["df / | tail -1 | awk '{ print $5; }'"], shell=True)[0:-1]`

奇怪的是，只有当脚本被从 gammu-smsd 运行的 shell 脚本调用时，这一行**才会失败。**即使 CalledProcessError 对象的输出属性包含正确的输出，该行也会失败，并出现 CalledProcessError 异常“返回退出状态 2”。shell 命令序列中唯一会给出这种错误状态的命令是 awk，状态 2 表示致命错误。

如果该行的 python 脚本由 cron、另一个 python 脚本或从命令行调用，则该行可以正常工作。我试图修复脚本的环境，我想这一定是问题所在。最后虽然我输入了stderr=subprocess.STDOUT，像这样：

`reportdict['Used Space'] = subprocess.check_output(["df / | tail -1 | awk '{ print $5; }'"], stderr=subprocess.STDOUT, shell=True)[0:-1]`

这是一个调试措施，可以帮助我确定是否有一些输出出现在 stderr 上。但在此之后脚本开始工作，即使是从 gammu-smsd 调用！为什么会这样？使用子流程时，我要求将来参考...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:39:31.130

Gammu SMSD 将在所有文件描述符关闭的情况下调用脚本（请参阅[文档](http://wammu.eu/docs/manual/smsd/run.html)），这可能是失败的原因。

# php - 如何将 javascript 值发送到 PHP 页面，然后在 PHP 页面中引用该值？

> ID：11062172
> 
> 赞同：-1
> 
> 时间：2012-06-16T09:13:26.180
> 
> 标签：php, ajax

如何将 javascript 值发送到 PHP 页面，然后在 PHP 页面中引用该值？

假设我有某种 javascript AJAX 解决方案，例如：

```
var id=5;
      obj.onreadystatechange=showContent;
      obj.open("GET","test.php",true);
      obj.send(id); 
```

我想在 test.php 中使用这个特定的 id。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:15:52.050

将您的代码更改为：

```
obj.open("GET","test.php?id=" + id,true);
obj.send(); 
```

然后在 test.php 中使用`$_GET['id']`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T10:45:18.977

在 javascript 中（我正在制作一个函数，以便您可以将其分配给其他事件）

```
//jQuery has to be included, and so if it's not, 
//I'm going to load it for you from the CDN, 
//but you should load this by default in your page using a script tag, like this:
//<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
window.jQuery || document.write('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"><\/script>')

function sendValueGet(passedValue){
  jQuery.get('test.php', { value: passedValue });
}
function sendValuePost(passedValue){
  jQuery.post('test.php', { value: passedValue });
} 
```

然后在你的 PHP 中：

```
<?php
if( $_REQUEST["value"] )
{
   $value = $_REQUEST['value'];
   echo "Received ". $value;
}
?> 
```

请注意，我在 javascript“object”`{ value: ... }`和 PHP“REQUEST”变量中使用了“value”`$_REQUEST["value"]`

如果你想给它一个不同的参考名称，那么你需要在两个地方都改变它。

使用 GET 或 POST 是您的偏好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T09:25:24.167

//得到

```
if (window.XMLHttpRequest)
{
  xmlhttp=new XMLHttpRequest();
}
else
{
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
    var x=xmlhttp.responseText;
    alert(x);
  }
}
xmlhttp.open("GET","test.php?q="+id,true);
xmlhttp.send(); 
```

在 test.php 中

```
$id=$_GET['q'] 
```

//邮政

```
if (window.XMLHttpRequest)
{
  xmlhttp=new XMLHttpRequest();
}
else
{
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
    var x=xmlhttp.responseText;
    alert(x);
  }
}
xmlhttp.open("POST","test.php",true);
xmlhttp.send("x=id"); 
```

在 test.php 中

```
$id=$_POST['x'] 
```

# ruby - 根据First table的ID在多个表中添加一条记录

> ID：11062173
> 
> 赞同：0
> 
> 时间：2012-06-16T09:13:29.290
> 
> 标签：ruby, ruby-on-rails-3, activerecord, model, controller

伙计们，我有 3 张桌子，如下所示：

*   项目 {id, name, owner, ....}
*   ProjectMilestones {id, project_id, name ....}
*   UserProjects {id, project_id, ....}

在这里，一旦我创建了一个新项目，我将获取**Project_ID** *(@@IDENTITY)*列，并使用此 ID在**ProjectMilestones**和**UserProjects表中创建一个新行。**我的代码如下所示

```
def create
    ActiveRecord::Base.transaction do
    # Instantiate a new object using form parameters
      @project = Project.new(params[:project])
      if @project.save
        # if project saves, Create a new insteance into User Projects
        @userproject=UserProject.new(
        :project_id=>@project.id
        )
        @userproject.save

        # Create a new insteance into ProjectMilestone
        @projectmilestone=ProjectMilestone.new(
        :project_id=>@project.id,
        :milestone_id=>12,
        :milestone_date=>@project.created_at
        )
        @projectmilestone.save
        flash[:notice] = "A new project has been created successfully"
        redirect_to(:action => 'list')
      else
      # If save fails, redisplay the form so user can fix problems
        render('new')
      end
    end
  end 
```

它对我来说很好。我想知道有没有可用的优化方法？所以我可以将业务逻辑移动到模型并让项目创建所有关联的记录或失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:24:31.167

如果您在创建新项目后总是想创建一个新的 UserProject 和一个新的 ProjectMilestone，您可以使用 ActiveRecord-Callbacks 之一。

在您的项目模型中，您可以添加此回调：

```
after_create :create_other_models 
```

您现在可以在 create_other_models 方法中复制用于创建其他模型的部件。

# objective-c - 正则表达式在目标 c 中不起作用

> ID：11062174
> 
> 赞同：0
> 
> 时间：2012-06-16T09:13:44.590
> 
> 标签：objective-c, regex

```
//string
NSString *haystack = @".test {test:test} .test2{dasf:asdF}";
//pattern
 NSString *needle = @"[^{}]*{[^{}]*}"; 
```

我想要的是数组中的 .test {test:test} 和 .test2{dasf:asdF} （其余代码处理这个），但由于某种原因，这个正则表达式无法正常工作，因为没有找到结果。

如果

```
NSString *needle = @"[^{}]*"; 
```

我得到以下

```
(
".test ",
"",
"test:test",
"",
" .test2",
"",
"dasf:asdF",
"",
""
) 
```

这是预期的。经过大量的摆弄之后，正则表达式中的 { 和 } 似乎有问题，但我想不出为什么。

顺便说一句，如果有人能解释为什么我在上面的数组中得到这些空元素，那也很有用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:17:03.297

您是否尝试过 [^{}]+（带加号）而不是 [^{}]*？只是因为 * 也匹配零个字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:21:04.337

你会尝试使用：

```
 NSString *needle = @"[^{}]*\{[^{}]*\}"; 
```

确实，`{`并且`}`在正则表达式中具有特殊含义（但在使用时它们会“自动”转义`[]`）

# c - 宏定义函数

> ID：11062178
> 
> 赞同：2
> 
> 时间：2012-06-16T09:14:31.813
> 
> 标签：c

```
#include <stdio.h>

#define next(x) x + 1
#define prev(x) x - 1
#define mult(x,y) x * y

int main(void) {

int a = 3, b = 4;
printf("%d\n", mult(next(a), prev(b)));
return 0;

} 
```

`mult(next(3),prev(4))`扩展`mult(3+1, 4-1)`为 12。但答案是 6。

这是为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T09:16:01.313

...并`mult(3+1, 4-1)`扩展到

```
3+1 * 4-1 
```

这导致 3 + 4 - 1 或 6。

在像宏定义这样的函数中，在每个参数和整个定义周围加上括号

```
#define next(x) ((x) + 1)
#define prev(x) ((x) - 1)
#define mult(x, y) ((x) * (y)) 
```

# android - 如何在Android中动态设置边距？

> ID：11062187
> 
> 赞同：35
> 
> 时间：2012-06-16T09:15:34.683
> 
> 标签：android, margins

我目前正在做一个包含自定义警报对话框的 android 应用程序。它包含一个按钮，但我无法设置按钮的边距。代码如下。setmargin 方法不起作用

```
AlertDialog.Builder myDialog = new AlertDialog.Builder(Login.this);
Button button = new Button(Login.this);

button.setText("Send");
LayoutParams buttonLayoutParams 
    = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

button.setLayoutParams(buttonLayoutParams);

resetPassword=editText.getText().toString();

LinearLayout layout = new LinearLayout(Login.this);
layout.setOrientation(LinearLayout.VERTICAL);
layout.addView(textView);
layout.addView(editText);
layout.addView(button);

myDialog.setView(layout); 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-16T09:22:35.460

编写下面的代码来设置边距，它可能会对你有所帮助。

```
AlertDialog.Builder myDialog = new AlertDialog.Builder(Login.this);
Button button = new Button(Login.this);
EditText editText = new EditText(Login.this);
TextView textView = new TextView(Login.this);
button.setText("Send");
LinearLayout.LayoutParams buttonLayoutParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
buttonLayoutParams.setMargins(50, 10, 0, 0);
button.setLayoutParams(buttonLayoutParams);
String resetPassword = editText.getText().toString();
LinearLayout layout = new LinearLayout(Login.this);
layout.setOrientation(LinearLayout.VERTICAL);
layout.addView(textView);
layout.addView(editText);
layout.addView(button);
myDialog.setView(layout);
myDialog.show(); 
```

使用`LinearLayout.LayoutParams`或`RelativeLayout.LayoutParams`根据子视图的父布局

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-06-26T15:59:59.177

只是分享一个稍微不同的方法。

您可以只转换为 ,而不是转换为`LinearLayout.LayoutParams`,`RelativeLayout.LayoutParams`等`MarginLayoutParams`。

转换`MarginLayoutParams`为更好，因为您可以稍后更新您的布局，并且您不需要返回到您的 java 代码来更改`LinearLayout`to`RelativeLayout`或任何其他布局类型

您可以执行以下操作：

```
MarginLayoutParams layoutParams = (MarginLayoutParams) view.getLayoutParams();

// Set bottom margin
layoutParams.bottomMargin = x;

// Set top margin
layoutParams.topMargin = x;

// Set left margin
// This won't have effect if you set any relative margin (start) previously or in the layout.xml
layoutParams.leftMargin = x;

// Set left margin
// This won't have effect if you set any relative margin (end) previously or in the layout.xml
layoutParams.rightMargin = x;

// Set start margin
layoutParams.setMarginStart(x);

// Set end margin
layoutParams.setMarginStart(x);

// Set all left, top, right, bottom margins at once
// Note that here, left and right margins are set (not start/end).
// So, if you have used start/end margin before (or via layout.xml), 
// setting left/right here won't have any effect.
layoutParams.setMargins(left, top, end, bottom)

// Then re-apply the layout params again to force the view to be re-draw
// This step may not be necessary because depending where you set the margin, 
// view is already scheduled to be drawn
// For any case, to ensure the view will apply the new margin, call:
view.setLayoutParams(layoutParams); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-16T09:18:27.130

```
buttonLayoutParams.bottomMargin
buttonLayoutParams.topMargin
buttonLayoutParams.leftMargin
buttonLayoutParams.rightMargin 
```

可用于设置边距

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-08T16:49:58.453

setMargin() 方法在您使用 LinearLayout.LayoutParams 时可用，但在您使用 ViewGroup.LayoutParams 时不可用。Dipak Keshariya 暗示了这一点，但并没有说太多。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-02T09:37:42.890

```
You can set in LinearLayout margin

LinearLayout ll = new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);
LinearLayout.LayoutParams layoutParams = new
LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, 
LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.setMargins(30, 20, 30, 0);
Button okButton=new Button(this);
okButton.setText("some text");
ll.addView(okButton, layoutParams); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-06T02:53:01.503

这对我有用（支持库（需要使用 AndroidX）：

科特林

```
val params = LinearLayoutCompat.LayoutParams(
               LinearLayout.LayoutParams.WRAP_CONTENT,
               LinearLayout.LayoutParams.WRAP_CONTENT
               ).apply {
                 setMargins(0,16,0,16)
               } 
```

爪哇

```
LinearLayoutCompat.LayoutParams params = LinearLayoutCompat.LayoutParams(
                   LinearLayout.LayoutParams.WRAP_CONTENT,
                   LinearLayout.LayoutParams.WRAP_CONTENT
                   )
                   params.setMargins(0,16,0,16) 
```

# c# - 使用varchar列在sql中查找给定日期范围之间的记录

> ID：11062195
> 
> 赞同：2
> 
> 时间：2012-06-16T09:16:47.223
> 
> 标签：c#, sql, string, date

我有以下问题。我写了一个查询来获取 C# 中的订单日期：

```
QueryDate = string.Format("(Order.Begin>= '{0}' and Order.End<= '{1}')", BeginDate, EndDate); 
```

问题是我的 SQL Server 表列“开始”和“结束”是 varchar 列，我想以这种方式保留它们。例如，它们被保存为“12-4-2012”。

现在我想得到“12-4-2012”和“19-4-2012”之间的日期。但结果是前 2 位数字介于 '12' 和 '19' 之间的所有内容。因此，结果还包括例如“14-8-2011”。

有没有办法只用字符串列检索“12-4-2012”和“19-4-2012”之间的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:22:38.160

使用参数并用方括号封装列名
然后假设您的输入字符串是有效日期，您可以这样做：

```
DateTime dStart = DateTime.ParseExact(BeginDate, "dd/MM/yyyy", CurrentCulture.CultureInfo); 
DateTime dEnd = DateTime.ParseExact(EndDate, "dd/MM/yyyy", CurrentCulture.CultureInfo); 

string QueryDate = "SELECT * FROM Order " + 
                   "WHERE CONVERT('smalldatetime', [Begin], 105) >= @start " + 
                   "AND CONVERT('smalldatetime', [End], 105) <= @end";
SqlCommand cmd = new SqlCommand(QueryDate, con);
cmd.Parameters.AddWithValue("@start", dStart);
cmd.Parameters.AddWithValue("@end", dEnd);
SqlDataReader reader = cmd.ExecuteReader(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:32:40.857

我认为您可以将 Begin 和 Order 列转换为 DateTime 格式，如下所示：

`QueryDate = string.Format("(convert(datetime, Order.Begin, 105) >= @startdate and convert(datetime, Order.End, 105)<= @enddate;"`

然后添加他@startdate 和@enddae 参数...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:33:49.333

这不是一种可能吗？

```
string.Format("(convert(datetime, Order.Begin, 105)>= convert(datetime, '{0}', 105) and convert(datetime, Order.End, 105)<= convert(datetime, '{1}', 105))", BeginDate, EndDate); 
```

# iphone - 不断检查 ios 中启用的位置服务

> ID：11062201
> 
> 赞同：1
> 
> 时间：2012-06-16T09:17:25.243
> 
> 标签：iphone, objective-c, ios5

我正在尝试制作一个应用程序，其中视图将检查位置服务是否已启用。如果未启用，则会弹出提示，但仍会继续搜索位置但不提示。一旦启用位置服务，它将继续其过程。

怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:45:22.287

如果位置服务被禁用，您将无法继续获取位置。

如果您想继续搜索位置，请确保通过检查启用该服务

```
[CLLocationManager locationServicesEnabled] 
```

如果启用，开始更新位置

```
[locationManager startUpdatingLocation]; 
```

然后在

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {
    [locationManager stopUpdatingLocation]; // This will stop to check the location
} 
```

删除此代码以仍然检查位置`[locationManager stopUpdatingLocation];`，但这不是最好的方法，请务必阅读`apple documentation for the policy of getting the location`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:43:02.513

添加 .h 文件 int 计数器；

在你的视图的 viewDidLoad 方法中添加这个，因为它会检查你可以增加计数器的每一秒：

```
[NSTimer scheduledTimerWithTimeInterval:1.0     
                             target:self
                           selector:@selector(checkLocationMangerEnabled:)     
                           userInfo:nil     
                            repeats:YES];

 counter = 0; 
```

现在选择器将是：

```
-(void)checkLocationMangerEnabled:(id)sender
{
   if([CLLocationManager locationServicesEnabled])
   {
      //here location is enabled
   }
   else
   { //Not enabled
     if(counter == 60) // alert will showed in every 1 min u can increase or decrese
     {
       UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Location Service Disabled" 
                                                    message:@"To re-enable, please go to Settings and turn on Location Service for this app." 
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles:nil];
      [alert show];
      [alert release];
    }
    counter++;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:30:07.177

您可以通过此代码检查位置服务的可用性：

```
MKUserLocation *userLocation = map.userLocation;
    BOOL locationAllowed = [CLLocationManager locationServicesEnabled];
    BOOL locationAvailable = userLocation.location!=nil;

    if (locationAllowed==NO) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Location Service Disabled" 
                                                        message:@"To re-enable, please go to Settings and turn on Location Service for this app." 
                                                       delegate:nil 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    } else {
        if (locationAvailable==NO) 
            [self.map.userLocation addObserver:self forKeyPath:@"location" options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld) context:nil];
    } 
```

# php - 浏览器关闭/崩溃时如何写入数据库用户的注销时间戳

> ID：11062209
> 
> 赞同：1
> 
> 时间：2012-06-16T09:18:15.200
> 
> 标签：php

我的数据库上有一个名为“日志”的表。此日志表包含 ID、用户名、LoginTime 和 LogoutTime。就这样。

插入 ID、用户名和登录时间列真的很容易......

但是在处理 LogoutTime 时，我想会有两个条件：

1.  用户单击注销按钮>>问题已解决，我可以轻松地将 INSERT 脚本放在我的 logout.php 上以处理 LogoutTime 列。

2.  用户只需单击浏览器的关闭按钮即可逃离我的网站>>这将导致问题。在这种情况下，如何写入 LogoutTime 列？

它只能由PHP处理吗？我的意思是，不必使用 jQuery...谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:25:21.640

完成此操作的最常见解决方案是使用超时。所以你定期运行一个 cron 来检查是否有不再活跃的用户。例如，在最后半小时内可能没有请求完成。然后添加当时的注销时间。

因此，每个操作都会使用上次请求时间更新用户会话，以便您知道他们何时超时。

控制 100% 关闭浏览器是不可能的。例如，考虑一下客户端计算机的电源故障，您肯定不会得到任何回报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:24:41.017

在 IE 中你可以尝试这样的事情：

```
< body onbeforeunload="alert('Closed!');"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T09:31:15.367

您可以实现类似的东西，时间可以根据您的需要而有所不同

```
if (isset($_SESSION['browser_last_activity']) && (time() - $_SESSION['browser_last_activity'] > 1800)) {
    // request 30 minates ago
    // set the logout time here
}
$_SESSION['browser_last_activity'] = time(); // update last activity time 
```

但是你不可能用 php 实现 100% 满足你要求的功能。

并且您可以尝试使用`onbeforeunload`javascript，由于开销原因，与使用 javascript 而不是使用 php 相比，这是一种很好的做法。

# asp.net-mvc-3 - 模型数据在传递给控制器 时始终为空（mvc3 with razor）

> ID：11062210
> 
> 赞同：0
> 
> 时间：2012-06-16T09:18:26.537
> 
> 标签：asp.net-mvc-3, razor

我在表单内使用回调面板，当 Combobox 值更改时，CallbackPanel 内的字段值应相应更新。

我的问题是控制器内的模型值始终为空，我不知道为什么！（model.Documents = null 和 model.SelectedDocument = null）

如果有人能告诉我我的问题在哪里以及如何解决它，那就太好了。

这是我的代码（已编辑）：

看法

```
@using (Html.BeginForm("Finalize", "DocumentsWaitingApproval", FormMethod.Post, Model))
{
    <table>
        <tr>
            <td>
                @Html.DevExpress().ComboBox(settings =>
                        {
                            settings.SelectedIndex = 0;
                            settings.Properties.TextField = "Title";
                            settings.ClientEnabled = true;
                            settings.Properties.ClientInstanceName = "CmbBoxFiles";
                            settings.Properties.EnableClientSideAPI = true;
                            settings.Properties.ValueType = typeof(int);
                            settings.Properties.ValueField = "DocumentID";
                            settings.Name = "CmbBoxFiles";
                            settings.Properties.ClientSideEvents.SelectedIndexChanged = "function(s,e) { cmbBoxFiles_SelectedIndexChanged(s,e);  }";
                        }).BindList(Model.Documents).GetHtml()
            </td>
        </tr>
    </table>
    @Html.DevExpress().CallbackPanel(
    settings =>
    {
        settings.Name = "cbpDocWaiting";
        settings.CallbackRouteValues = new { Controller = "DocumentsWaitingApproval", Action = "Refresh" }; 
```

控制器方法

```
 [Authorize]
        public ActionResult Refresh(DocumentsWaitingApprovalModel model) // model.SelectedDocument is always null
        {

        }

        [Authorize]
        public ActionResult Finalize([Bind]DocumentsWaitingApprovalModel model) //model.SelectedDocument is always null
        {
            return RedirectToAction("Index");
        }
    } 
```

# javascript - 如何从托管 bean 调用 javascript 函数？

> ID：11062212
> 
> 赞同：0
> 
> 时间：2012-06-16T09:18:37.783
> 
> 标签：javascript, jsf-2, primefaces

我在托管 bean 中有 if 条件。我想在条件为真时显示警报。我该怎么做？就像是：

```
 public void catInsert()
        {
            if(abr.searchCategoryByCategoryName(CategoryName)!=null){
    //                msg = "<div style = 'color:red'>CategoryName already exist!</div>";
    //                System.out.println(msg);
//  i want alert here

            }else
            {
            abr.addCategory(CategoryName);
            CategoryName="";
            }
         } 
```

而xhtml页面是；

```
<table class="nostyle">
                <tr>
                    <td align="right">
                    <h:outputText value="Category Name:"></h:outputText>
                    </td>
                    <td>
                        <h:inputText id="txtcatname" value="#{categoryBean.categoryName}" required="true" requiredMessage="Enter category Name" >
                        </h:inputText>
                    </td>
                    <td ><h:message for="txtcatname" style="color: #df0000"></h:message></td>>            
                </tr>
                <tr>
                    <td></td>
                    <td align="left">
                        <h:commandButton id="submit" type="Submit" value="submit" action="#{categoryBean.catInsert()}" >
                        </h:commandButton>
                    </td>

                </tr>
            </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:32:19.907

你犯了一个概念上的错误。HTML/JS 代码不属于控制器，而是属于视图。控制器必须以某种方式通知视图它必须生成所需的一堆 HTML/JS 代码。

你可以通过像这样设置一个布尔属性来做到这一点

```
private boolean showCategoryNameAlert;

public void catInsert() {
    if (abr.searchCategoryByCategoryName(categoryName) != null) {
        showCategoryNameAlert = true;
    } else {
        abr.addCategory(categoryName);
    }
}

public boolean isShowCategoryNameAlert() {
    return showCategoryNameAlert;
} 
```

和

```
<h:outputScript rendered="#{categoryBean.showCategoryNameAlert}">
    alert("CategoryName already exist!");
</h:outputScript> 
```

顺便说一句，您为什么不在输入字段上`FacesContext#addMessage()`使用`<h:messages>`甚至是普通的 JSF ？`Validator`显示 JavaScript 警报是 90 年代的事情，并且在操作方法中执行输入验证是糟糕的设计。

# windows - 如何从“CEdit”框中获得通知？

> ID：11062217
> 
> 赞同：6
> 
> 时间：2012-06-16T09:19:27.850
> 
> 标签：windows, mfc, desktop-application

我有一个`CEdit`框，用户可以在其中输入相关信息。当他\她开始在盒子里写字时，我需要一个通知，以便我可以打电话`doSomething()`来执行一些其他任务。Windows 是否提供回调，如果提供，我该如何使用它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T09:02:36.957

使用 MFC 并没有这样的回调，而是通过为适当的事件实现处理程序来做到这一点。您需要处理以下两个事件之一：`WM_CHAR`或`EN_CHANGE`

处理对话框`EN_CHANGE`，例如在对话框的其他地方实时复制输入的文本。您需要首先在对话框的消息映射中添加一个条目，然后覆盖相应的处理程序：

```
BEGIN_MESSAGE_MAP(CstackmfcDlg, CDialog)
    ON_EN_CHANGE(IDC_EDIT1, &CstackmfcDlg::OnEnChangeEdit1)
END_MESSAGE_MAP()

void CstackmfcDlg::OnEnChangeEdit1()
    {
    CString text;
    m_edit.GetWindowText(text);
    m_label.SetWindowText(text); // update a label control to match typed text
    } 
```

或者，处理编辑框类`WM_CHAR`，例如阻止输入某些字符，例如忽略除数字以外的任何内容以进行数字输入。从 CEdit 派生一个类，处理`WM_CHAR`该类的事件（而不是对话框）并使您的编辑控件成为该类的实例。

```
BEGIN_MESSAGE_MAP(CCtrlEdit, CEdit)
    ON_WM_CHAR()
END_MESSAGE_MAP()

void CCtrlEdit::OnChar(UINT nChar, UINT nRepCnt, UINT nFlags)
    {
    // Do nothing if not numeric chars entered, otherwise pass to base CEdit class
    if ((nChar >= '0' && nChar <= '9') || VK_BACK == nChar)
        CEdit::OnChar(nChar, nRepCnt, nFlags);
    } 
```

请注意，您可以使用 VS IDE 通过在消息映射块中使用鼠标选择属性栏来为处理程序覆盖添加存根。

**编辑：**添加了示例代码，并更正了`WM_CHAR`我错误的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:23:49.540

If you double click on the edit box in the resource editor it automatically creates the OnEnChanged event for you.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-11T16:43:09.537

下面假设您有一个 MFC 对话框应用程序。

可以通过右键单击启动类向导： [![开始课堂向导](../Images/71a10ba252a1f0c0a9b768bc09d9aa0b.png)](https://i.stack.imgur.com/UZJbK.png)

双击新编辑控件的控件 ID（有一个带有绿色小加号的图标）以将相应的成员变量添加到类中。

[![创建了新的提议变量](../Images/8df36ed5bd1021ad9a1276092a066826.png)](https://i.stack.imgur.com/7eolN.png)

类和事件向导将更新类定义并添加一个`CEdit`成员：

```
afx_msg void OnEnChangeEdit1(); // Added by event wizard
CEdit m_edit1; // member added by class wizard 
```

类向导将更新函数：

```
void CMFCApplication5Dlg::DoDataExchange(CDataExchange* pDX)
{
    CDialogEx::DoDataExchange(pDX);
    DDX_Control(pDX, IDC_EDIT1, m_edit1); // new variable added with class wizard
} 
```

双击控件或右键单击并选择添加事件向导将更新消息映射并创建函数声明和定义：

```
BEGIN_MESSAGE_MAP(CMFCApplication5Dlg, CDialogEx)
    ON_WM_SYSCOMMAND()
    ON_WM_PAINT()
    ON_WM_QUERYDRAGICON()
    ON_EN_CHANGE(IDC_EDIT1, &CMFCApplication5Dlg::OnEnChangeEdit1) // new event handler added with wizard
END_MESSAGE_MAP() 
```

最后，可以更新代码以与编辑控件交互：

```
void CMFCApplication5Dlg::OnEnChangeEdit1()
{
    // TODO:  Add your control notification handler code here
    CString text;
    m_edit1.GetWindowText(text);
    //m_edit1.SetWindowText(text);
} 
```

# android - Android：FragmentAdapter 和 pageview 不更新视图

> ID：11062219
> 
> 赞同：1
> 
> 时间：2012-06-16T09:19:32.233
> 
> 标签：android, adapter, fragment

我的麻烦是：当我获得新数据时，使用我的自定义适配器的 viewpager 不会更新视图。我发现许多程序员都有同样的错误，所以我尝试了很多建议，但对我没有任何帮助。很累。再一次，阅读我的源代码并帮助我理解为什么我更新视图失败了！这是我的片段适配器：

```
private class SwipeyTabsPagerAdapter extends FragmentPagerAdapter implements
        SwipeyTabsAdapter {

    private final Context mContext;
    private String[] datas;

    public SwipeyTabsPagerAdapter(Context context, FragmentManager fm, String[] ds) {
        super(fm);
        this.mContext = context;
        datas=ds;
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }

    @Override
    public Fragment getItem(int position) {
        Log.e("new item:", datas[position]);
        return SwipeyTabFragment.newInstance(datas[position]);
    }

    @Override
    public int getCount() {
        return datas.length;
    }

    public TextView getTab(final int position, SwipeyTabs root) {
        TextView view = (TextView) LayoutInflater.from(mContext).inflate(
                R.layout.swipey_tab_indicator, root, false);
        view.setText(datas[position]);
        view.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mViewPager.setCurrentItem(position);
            }
        });

        return view;
    }

} 
```

这是我设置适配器的地方：

```
SwipeyTabsPagerAdapter adapter = new SwipeyTabsPagerAdapter(getApplicationContext(), getSupportFragmentManager(),dicts);
            mViewPager.setAdapter(adapter);
            mTabs.setAdapter(adapter);
            mViewPager.getAdapter().notifyDataSetChanged(); 
```

通过logcat，可以清楚的看到：只有第一次，newItem被处理，所以视图不能更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:51:56.137

我也遇到了这个问题，并尝试了我在互联网上找到的所有内容，但没有成功。

有效的解决方案是使用 FragmentStatePagerAdapter 而不是 FragmentPagerAdapter。FragmentPagerAdapter 似乎是“不可变的”（至少它的行为方式是这样）。

请参阅本主题以获取更多信息：

[动态更新 ViewPager？](https://stackoverflow.com/questions/10849552/android-viewpager-cant-update-dynamically)

另一种可行但不好的解决方案是每次重新实例化所有内容（ViewPager、Adapter），以编程方式删除旧的并添加新的。

**编辑**

我忘记了适配器中的一些重要内容，您还必须添加此方法：

```
@Override
public int getItemPosition(Object object) {
    return POSITION_NONE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:45:58.550

在您的 mTab​​ 上也调用 notifyDataSetChanged()。在 SwipeyTabsView 类中查看此方法的实现：

```
public void notifyDatasetChanged() {
    if (mPager != null && mAdapter != null) {
        initTabs();
        measure(mWidthMeasureSpec, mHeightMeasureSpec);
        calculateNewPositions(true);
    }
} 
```

# sql - 用于添加字段并根据另一个字段填充值的 SQL 语句

> ID：11062225
> 
> 赞同：0
> 
> 时间：2012-06-16T09:20:14.963
> 
> 标签：sql

我想在我的查询中添加一个额外的字段，该字段将根据字段（CheckNum）是否返回支票号码而具有“现金”或“支票”的值。

```
SELECT t1.DocNum, t0.DocDate, t0.CardName, t0.CardCode, t1.CheckNum, t0.DocTotal
FROM   OVPM t0 INNER JOIN
VPM1   t1 ON t1.docnum = t0.docnum LEFT OUTER JOIN
OACT   t2 ON t2.AcctCode = t1.CheckAct

UNION ALL

SELECT t1.DocNum, t0.DocDate, t0.CardName, t0.CardCode, t1.CheckNum, t0.DocTotal
FROM   ORCT t0 INNER JOIN
       RCT1 t1 ON t1.docnum = t0.docnum LEFT OUTER JOIN
       OACT t2 ON t2.AcctCode = t1.CheckAct 
```

上述查询的示例结果：

```
 CheckNum     DocTotal
3   Alibhai shariff & Sons Ltd  S0003     67901        39663.000000
5   Silverstone Tyres (K) Ltd   S0191     0            93200.000000
6   Lam Limited                 S0167     1372         66380.000000
7   Osho Chemicals Industries   S0198     0            21100.000000 
```

我想要什么：

```
 CheckNum     DocTotal           PayType
3   Alibhai shariff & Sons Ltd  S0003     67901        39663.000000       Check
5   Silverstone Tyres (K) Ltd   S0191     0            93200.000000       Cash
6   Lam Limited                 S0167     1372         66380.000000       Check
7   Osho Chemicals Industries   S0198     0            21100.000000       Cash 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:23:49.127

你可以`CASE`在这里使用。像这样 -

```
SELECT t1.DocNum, t0.DocDate, t0.CardName, t0.CardCode, t1.CheckNum, t0.DocTotal,
       CASE WHEN t1.CheckNum = 0 THEN 'Cash' ELSE 'Check' END AS PayType
FROM   OVPM t0 INNER JOIN
       VPM1   t1 ON t1.docnum = t0.docnum LEFT OUTER JOIN
       OACT   t2 ON t2.AcctCode = t1.CheckAct

UNION ALL

SELECT t1.DocNum, t0.DocDate, t0.CardName, t0.CardCode, t1.CheckNum, t0.DocTotal,
       CASE WHEN t1.CheckNum = 0 THEN 'Cash' ELSE 'Check' END AS PayType
FROM   ORCT t0 INNER JOIN
       RCT1 t1 ON t1.docnum = t0.docnum LEFT OUTER JOIN
       OACT t2 ON t2.AcctCode = t1.CheckAct 
```

# css - 用 IE 适配 @font-face

> ID：11062228
> 
> 赞同：0
> 
> 时间：2012-06-16T09:21:00.703
> 
> 标签：css, internet-explorer

我已经在一个网站上工作了大约一周，我们需要包含一些非常规字体。没问题，我会在 CSS 中使用 @font-face{}，它就像一个魅力。. . 除非你的名字是 Internet Explorer。

由于 IE 仅采用 .eot 字体（作为所有主要现代浏览器中唯一的一种），因此当它是访问该站点的 IE 浏览器时，我需要包含一种使用我的字体的 .eot 格式的方法。

所以，这是我可以用手的地方。

如果我使用 IE 条件 HTML 为 IE 指定样式表，我如何确保浏览器将解释正确的@font-familiy？（假设我将使用具有不同 src 的相同字体系列名称）

```
//Using this
@font-face {
font-family: "ArdleysHand";
src: url(../Fonts/ArdleysHand.ttf) format("truetype");
}
//But would have to use this if IE
@font-face {
font-family: "ArdleysHand";
src: url(../Fonts/ArdleysHand.eot) format("truetype");
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:25:43.057

您可以在 HTML 文件中使用条件注释，例如：

```
 <!--[if IE]> <link rel="stylesheet" type="text/css" href="ie_font.css"> <![endif]--> 
```

对于所有其他浏览器，您可以使用此评论：

```
<!--[if !IE]> <link type="text/css" href="other_font.css"> <![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:31:19.257

**样式表的条件注释**

> 条件注释仅适用于 IE，因此非常适合提供仅适用于 IE 的特殊指令。从 IE 5 开始支持它们。

```
<!--[if IE]>
  <style type="text/css"> 
    @import 'iestyle.css'; 
  </style> 
<![endif]--> 
```

# java - 关闭 JOptionPane 后返回 JWindow

> ID：11062230
> 
> 赞同：0
> 
> 时间：2012-06-16T09:21:06.287
> 
> 标签：java, joptionpane, jwindow

当用户想要删除项目或关闭窗口时，我会显示 MessageDialog。当我按如下方式显示对话框时：

```
else if (e.getSource() == delete_btn)
{
  int result = JOptionPane.showConfirmDialog(AgentFrame.this,
     "Are you sure you want to delete Agent: " + availableAgents_list.getSelectedValue().toString() +
     " ?", null, JOptionPane.YES_NO_OPTION);
  if (result == JOptionPane.YES_OPTION)
  {
    availableAgents_list.removeSelectionInterval(availableAgents_list.getSelectedIndex(),
                                                     availableAgents_list.getSelectedIndex());
  }
} 
```

当用户按下 YES 或 CANCEL 时，窗口会显示......我需要返回窗口执行一些操作。

# xml - Sencha Touch 读取 XML 数据

> ID：11062233
> 
> 赞同：1
> 
> 时间：2012-06-16T09:21:41.483
> 
> 标签：xml, sencha-touch, extjs4, extjs, xmlreader

我最近才开始使用 Sencha Touch 2.0。我在读取 XML 数据时遇到问题。我从下载附带的基本“入门”应用程序开始，它运行良好，这意味着我已正确完成设置。现在我做了一些更改来读取简单的 XML，但我无法在屏幕上看到任何数据。下面是我的代码。请帮我解决一下这个。- 这里是 app.js 文件的内容 -

```
Ext.Loader.setPath({
    'Ext': 'lib/touch/src'
});

Ext.define('User', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['id', 'name', 'email']
    }
});

var mystore = Ext.create('Ext.data.Store', {
    model: 'User',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url : 'userData.xml',
        reader: {
            type: 'xml',
            rootProperty: 'users',
            record: 'user'
        }
    }
});  

Ext.application({
    name: 'Sencha',

    launch: function() {
        //The whole app UI lives in this tab panel
        Ext.Viewport.add({
            xtype: 'tabpanel',
            fullscreen: true,
            tabBarPosition: 'bottom',   
            items: [
                // This is the home page, just some simple html
                {
                    title: 'Home',
                    iconCls: 'home',
                    cls: 'home',
                    scrollable: true,
                    html: [
                        '<img height=260 src="http://staging.sencha.com/img/sencha.png" />',
                        '<h1>Welcome to Sencha Touch</h1>',
                        "<p>Building the Getting Started app</p>",
                        '<h2>Sencha Touch (2.0.0)</h2>'
                    ].join("")
                },

                {
                    xtype: 'list',
                    title: 'Events',
                    iconCls: 'star',
                    itemTpl: '{id}',                     
                    store: mystore                    
                }

            ]
        });
    }
}); 
```

XML 与此 app.js 文件位于同一位置。请注意，我没有安装任何服务器。我只是对 app.js 进行更改并在 chrome 浏览器中打开“index.html”。

这是 XML。它与 Sencha Docs 上给出的相同。-

```
<?xml version="1.0" encoding="UTF-8"?>
<users>
<user>
    <id>112</id>
    <name>Ed Spencer</name>
    <email>ed@sencha.com</email>
</user>
<user>
    <id>248</id>
    <name>Abe Elias</name>
    <email>abe@sencha.com</email>
</user>
</users> 
```

这是我更改后的代码 -

```
Ext.Loader.setPath({
    'Ext': 'lib/touch/src'
});

Ext.regModel('Personal', {
    fields  : [
        'id',
            {name: 'name',  type: 'string'}, 
            {name: 'email', type: 'string'}
    ]
});

Ext.application({
    name: 'Sencha',

    launch: function() {
        //The whole app UI lives in this tab panel
        Ext.Viewport.add({
            xtype: 'tabpanel',
            fullscreen: true,
            tabBarPosition: 'bottom',   
            items: [
                // This is the home page, just some simple html                                                

            {
                xtype   : 'selectfield',
                name    : 'user',
                label   : 'Users',
                store   : new Ext.data.Store({
                            model       : 'Personal',
                            autoLoad    : true,
                            proxy       : {
                                type    : 'ajax',
                                url     : 'userData.xml',
                                reader  : {
                                    type    : 'xml',
                                    root    : 'users'
                                }
                            }
                        }),
                valueField  : 'name',
                displayField    : 'name'
            }

            ]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:51:40.670

嘿@GordanWebb 试试这个来显示来自 XML 文件的数据，

```
Ext.regModel('Personal', {
    fields  : [
        'id',
            {name: 'name',  type: 'string'}, 
            {name: 'email', type: 'string'}
    ]
}), {
        scroll  : 'vertical',
        items   : [
            {
                xtype   : 'selectfield',
                name    : 'user',
                label   : 'Users',
                store   : new Ext.data.Store({
                            model       : 'Personal',
                            autoLoad    : true,
                            proxy       : {
                                type    : 'ajax',
                                url     : 'userData.xml',
                                reader  : {
                                    type    : 'xml',
                                    root    : 'users'
                                }
                            }
                        }),
                valueField  : 'name',
                displayField    : 'name',
            }
        ]
    } 
```

此示例显示`selectfield`元素 Sencha 的数据。我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:33:04.493

您只需要使用 Web 服务器（easyphp 或 wamp）（Linux 和 MacOS 上的 xamp）并访问您的应用程序抛出 localhost/yourAppDirectory，一切都会好起来的

# php - 在 PHP 中用逗号分解复杂字符串

> ID：11062241
> 
> 赞同：2
> 
> 时间：2012-06-16T09:22:47.283
> 
> 标签：php, regex, string, split

我需要拆分一个包含逗号的字符串。我已经为 ( `str_getcsv`) 之类的字符串找到了一些东西：

```
'A', 'B with a comma, eh', 'C' 
```

但我的字符串是这样的，例如，值没有封闭字符：

```
A, B (one, two), C 
```

我需要爆炸并获得：

```
array(3) {
  [0]=>
  string(1) "A"
  [1]=>
  string(12) "B (one, two)"
  [2]=>
  string(1) "C"
} 
```

***我想使用不在*括号内的逗号来拆分字符串，因为这是在我的情况下发生的唯一一种情况 explode failed**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T09:40:13.213

但是有一个解决方案可以满足您的疯狂愿望；）

```
$a = "(Z) X, (Y, W) A, B (one, two), C, D (E,F,G) H, I J";
$reg = '/[^(,]*(?:\([^)]+\))?[^),]*/';
preg_match_all($reg, $a, $matches);
$result = array_filter($matches[0]);
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T00:17:26.720

这个片段可以帮助我使用嵌套括号。基本上想法是用一些标识符递归替换 (*) 直到没有更多的括号。然后用逗号分解字符串，然后将所有内容放回原处。这不是理想的解决方案 - 刚刚在大约 30 分钟内完成，但它可以工作:) 它绝对可以以某种方式进行优化。

```
/**
 * Explode string by delimiter, but don't explode if delimiter is inside parenthesis.
 * This also support nested parenthesis - that's where pure RegExp solutions fails.
 * 
 * For example,
 *  $input = "one, two three, four (five, (six, seven), (eight)) (nine, ten), eleven";
 *  $output = array(
 *      'one',
 *      'two three',
 *      'four (five, (six, seven), (eight)) (nine, ten)',
 *      'eleven'
 *  );
 * 
 * @param string $input
 * @param string $delimiter = ,
 * @param string $open_tag = \(
 * @param string $close_tag = \)
 * @return array
 */
function exploder($input, $delimiter = ',', $open_tag = '\(', $close_tag = '\)')
{
    // this will match any text inside parenthesis
    // including parenthesis itself and without nested parenthesis
    $regexp = '/'.$open_tag.'[^'.$open_tag.$close_tag.']*'.$close_tag.'/';

    // put in placeholders like {{\d}}. They can be nested.
    $r = array();
    while (preg_match_all($regexp, $input, $matches)) {
        if ($matches[0]) {
            foreach ($matches[0] as $match) {
                $r[] = $match;
                $input = str_replace($match, '{{'.count($r).'}}', $input);
            }
        } else {
            break;
        }
    }
    $output = array_map('trim', explode($delimiter, $input));

    // put everything back
    foreach ($output as &$a) {
        while (preg_match('/{{(\d+)}}/', $a, $matches)) {
            $a = str_replace($matches[0], $r[$matches[1] - 1], $a);
        }
    }

    return $output;
}

$a = "one, two three, four (five, (six, seven), (eight)) (nine, ten), eleven";
var_dump(exploder($a)); 
```

这将输出：

```
array (size=4)
  0 => string 'one' (length=3)
  1 => string 'two three' (length=9)
  2 => string 'four (five, (six, seven), (eight)) (nine, ten)' (length=46)
  3 => &string 'eleven' (length=6) 
```

正如预期的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-15T02:51:25.870

比创建一个数组然后过滤结果更优雅，您可以`preg_split()`在这个单函数单行器中使用：

代码：（[演示](http://sandbox.onlinephpfunctions.com/code/7cb34bf7212eed6c62aa668c2ac2b15247ea012e)）

```
$string='A, B (one, two), C';
var_export(preg_split('/(?:\([^)]*\)(*SKIP)(*FAIL))|, /',$string)); 
```

输出：

```
array (
  0 => 'A',
  1 => 'B (one, two)',
  2 => 'C',
) 
```

[模式演示](https://regex101.com/r/AVk1ce/2)

*   `(*SKIP)(*FAIL)`是一种在匹配之前取消子字符串资格的技术。
*   否定字符类`[^)]*`是`.`(dot) 的更快替代方案。*如果您有嵌套的括号表达式，则此模式将不起作用......为该场景编写模式有点超出了这个问题的范围。

# .htaccess - 如何使用 .HTACCESS 重定向某人？

> ID：11062242
> 
> 赞同：0
> 
> 时间：2012-06-16T09:23:11.950
> 
> 标签：.htaccess

如何将在地址栏中键入[http://domain.com/+abc](http://domain.com/+abc)的人（这只适用于带有前面“+”号的字母数字字符）重定向到[http://domain.com/abc](http://domain.com/abc)而没有前面“+”？

我是否必须通过 .htaccess 执行此操作？如果是这样，怎么办？它还需要一些正则表达式吗？

我将不胜感激任何帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:34:14.873

是的，你可以用 .htaccess 来做，它需要正则表达式。将这些行添加到您的 .htaccess 文件中：

```
RewriteEngine On
RewriteRule ^\+(.*) $1 
```

这应该有效。

# android - Galaxy S3：Broadcastreceiver 没有收到任何东西。适用于任何其他手机

> ID：11062248
> 
> 赞同：1
> 
> 时间：2012-06-16T09:24:06.377
> 
> 标签：android, broadcastreceiver, galaxy

我有一个必须接收广播的插件。manifest中的声明如下：

```
<receiver
    android:name=".Receiver"
    android:permission="de.bulling.smstalkvc_offline.permission.RECEIVE" >
    <intent-filter>
        <action android:name="de.bulling.smstalkvc_offline.ISINSTALLED" />
    </intent-filter>
</receiver> 
```

主应用程序和插件具有清单中声明的​​权限：

```
<permission
    android:name="de.bulling.smstalkvc_offline.permission.RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="de.bulling.smstalkvc_offline.permission.RECEIVE" /> 
```

我检查了 PackageManager 类，**两个应用程序都授予了权限**（只是为了仔细检查，Android 还说它是相同的签名）。

*然而*，接收者没有收到任何东西。因为这种情况只发生在 Galaxy S3 上，所以一定是设备有问题。有什么建议可以解决这个问题，或者至少知道为什么会这样？

# java - 我有一个必须显示 3 个组件的 JApplet。（2 JPanel 和 1 油漆方法）

> ID：11062249
> 
> 赞同：2
> 
> 时间：2012-06-16T09:24:16.897
> 
> 标签：java, swing, applet, layout-manager

我有一个任务，我必须允许用户使用二次方程绘制图形。

我设法绘制了图形的骨架，现在我试图显示“控制面板”供用户输入值。

我有 4 个文件：

*   `graph.java`
*   `panel.java`
*   `panelB.java`
*   `panelC.java`

我的问题是，当我运行代码时，它只`panel.java`在容器中显示偶数，它应该显示其他两个面板。

### 面板.java

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.*;
import java.awt.geom.*;
import javax.swing.JPanel;

public class panel extends JPanel {

    public panel(){
        this.setBackground(Color.yellow);
    }
} 
```

谁能告诉我应该做些什么改变来解决这个问题？

我对 graph.java 文件做了一些修改：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Dimension;
import javax.swing.*;

public class GraphApplet extends JApplet{

    public GraphApplet(){

    raph p = new Graph();//graph

    p.setPreferredSize(new Dimension(760,500));
        conn.add(p,BorderLayout.CENTER);
    } 
```

现在显示的只是图表。

关于其他代码，我还对类名进行了一些更改：

**gnjk;.java**

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.*;
import java.awt.geom.*;
import javax.swing.JPanel;

public class Graph extends JPanel {

public Graph(){
    this.setBackground(Color.yellow);
    }

    public void paintComponent(Graphics p) {

        super.paintComponent(p);

        Graphics2D graph = (Graphics2D)p;

        this.setBackground(Color.yellow);//set background color.

        int x,y,y1,x1,a,b,p1x,p1y,p2x,p2y;

        int xstart = 7;
        int ystart = 1;

        int xfinish = 3; 
```

…………

**bhfvhn.java**

```
import javax.swing.*;

import java.awt.*;

import javax.swing.JPanel;

public class ControlsA extends JPanel{

public void init (Box g) {

    a = Box.createVerticalBox();
    a.add(new JLabel("Please enter the values below:"));
    a.add(new JLabel("h"));

}

} 
```

**jknmk.java**

```
import javax.swing.*;

import java.awt.Component;
import java.awt.Dimension;

public class ControlsB extends JPanel{

public void init (Box b) {

    b = Box.createHorizontalBox();
    b.add(new JLabel("a"));
    JTextField f1 = new JTextField("0.0");
    f1.setMaximumSize(new Dimension(100,30));
    b.add(f1);

}
} 
```

* * *

这是我的项目的更新：

**jkl.java**

```
import java.awt.BorderLayout;
import java.awt.Container;

public class GraphApplet extends JApplet{
  public GraphApplet() {
    public void init(){
        SwingUtilities.invokeLater(new Runnable() {

         public void run(){
             Container conn = getContentPane();
             conn.setLayout(new BorderLayout());

             Graph z = new Graph();
             conn.add(p,BorderLayout.CENTER);

             fasfae a = new ControlsA(box1);
             conn.add(a,BorderLayout.LINE_START);

             adsfawef b = new ControlsB(box2);
             conn.add(b,BorderLayout.PAGE_END);
         }
        });
        }
        }

    /*Container conn = getContentPane();
    conn.setLayout(new BorderLayout());     

    Graph p = new Graph();//graph

    p.setPreferredSize(new Dimension(460,560));
    conn.add(p,BorderLayout.CENTER);

    Box a = new Box(BoxLayout.Y_AXIS);

    a.setPreferredSize(new Dimension(50,50));
    conn.add(a,BorderLayout.EAST);

    Box b = new Box(BoxLayout.X_AXIS);

    b.setPreferredSize(new Dimension(201,50));
    conn.add(b,BorderLayout.SOUTH);*/
    //this code is commented not to loose it 
```

**vtk.java**

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.*;
import java.awt.geom.*;
import javax.swing.JPanel;

class Graph extends JPanel {

public Graph(){
    this.setBackground(Color.yellow);
}
@Override
public Dimension getPreferredSize(){return (new Dimension(460,560)); }

public void paint(Graphics z) {

        Graphics graph = (Graphics2D)z;

        this.setBackground(Color.yellow).

        int x,y,y1,x1,a,b,p1x,p1y,p2x,p2y;

        //line co-ordinates
        //the numbers represent the number of boxes on the graph
        int xstart = 7;
        int ystart = 1;

        int x = 3;
        int y = 9;

        //other variables
        int i = 0;
        int i2 = 0;
        int m = 0;
        int n = 0;
        int m2 = 0;
        int n2 = 0;
        int f2 = 0;
        int g2 = 1;

        //ranges
        int f = 5;
        int g = -5;

        //change -ve num to +ve
        int g3 = Math.abs(g);

        int a1 = g3 + f;
        int b1 = a1;

        a = (Height);
        f = (Width);

        }
    }
}

// 6 variables the user has to input

}
@Override
public Dimension getPreferredSize() {return (new Dimension(200,100));}
} 
```

**nllkl.java**

```
 @Override
 public Dimension getPreferredSize(){return (new Dimension(201,50));}
} 
```

还是没有起色。我无法理解发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:55:32.980

该代码中的主要问题是：

1.  该小程序正在添加 3 个实例，`panel`而不是`panel`, `panelB`&中的每个实例`panelC`。
2.  既不`panelB`&`panelC`也不会将其添加`Box`到面板中，因此它不会出现。
3.  您在代码中暗示`panelB`应该垂直对齐，这意味着它会更好地适合 . 的`LINE_START`( `WEST`) `BorderLayout`，而不是`NORTH`.
4.  `public void paint(Graphics p) {..`是错误的`panel`。既然`panel`是 Swing`JPanel`它应该是`public void paintComponent(Graphics p) {..`

一旦这些事情得到处理，这就是它可能出现的样子。

![图形](../Images/0605666f23fe3198fd5b510cef462b87.png)

其他问题。

*   唯一需要扩展类的代码是小程序本身和`panel`. 事实上，甚至`panel`可以更改为`BufferedImage`在 a 中显示 a（图表）`JLabel`
*   `panelB`和`panelC`完全是多余的，只需在需要的父组件的布局区域中直接添加一个即可`Box`。
*   命名是错误的。
    1.  Java 类名应该是`EachWordUpperCase`
    2.  使用有意义的类名——小程序可能是`GraphApplet`、图形区域`Graph`、..我不确定最后两个面板应该叫什么，因为它们带有相同的组件。如果只有一个，我可能会将它`Controls`称为一个类（这对于这个来说是多余的），或者`controls`如果它是一个普通的`JPanel`或`Box`.
*   在这种情况下，不建议调用任何设置最大或首选大小的方法。唯一可以做到的情况是图形本身的首选大小，但由于这出现在`CENTER`小程序中，因此大小将由 HTML 中指定的小程序宽度/高度建议，减去另一个的自然大小组件（`CENTER`组件将获得“剩余空间”）。

## 更新

> ..我将如何更改我的小程序中的代码，以便小程序添加每个面板之一（？）

**改变：**

```
panel a = new panel();//vertical 
```

**到：**

```
panelB a = new panelB(new Box(BoxLayout.Y_AXIS));//vertical 
```

是最简单的方法。请注意，如果您决定`Box`直接添加它，它会发生变化。

```
Box a = new Box(BoxLayout.Y_AXIS);//vertical 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:45:28.453

请尝试现在运行此代码，告诉我这更接近您想要的吗？如果是这样，请告诉我，以便我可以删除我的答案。请注意我所做的更改：

*   在你的`PanelC`类中，我没有使用`init()`方法，而是创建了构造函数。
*   在您的 Graph 类中，我已删除所有`setPreferredSizes(...)` 调用，而是`getPreferredSize()`为每个扩展类覆盖了`JPanel`. 对于本次访问每个类面板，面板 B 和面板 C。
*   最后，我将提供给 的 Dimension 值更改为`JPanel`可以`LEFT/LINE_START`看到的东西
*   最好的改变是使用 EDT - Event Dispatch Thread，好像你真的不知道[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

* * *

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

public class Graph extends JApplet{

    public void init(){

        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                Container conn = getContentPane();
                conn.setLayout(new BorderLayout());

                Panel p = new Panel();//graph
                conn.add(p,BorderLayout.CENTER);

                Box box1 = new Box(BoxLayout.Y_AXIS);
                PanelB a = new PanelB(box1);//vertical
                conn.add(a,BorderLayout.LINE_START);

                Box box2 = new Box(BoxLayout.X_AXIS);
                PanelC b = new PanelC(box2);//horizontal
                conn.add(b,BorderLayout.PAGE_END);
            }
        });
    }
}

class Panel extends JPanel {

    public Panel(){
        this.setBackground(Color.yellow);
    }

    @Override
    public Dimension getPreferredSize()
    {   
        return (new Dimension(460,560));
    }

    public void paintComponent(Graphics p) {

        super.paintComponent(p);

        Graphics2D graph = (Graphics2D)p;

        Dimension appletSize = this.getSize();
        int appletHeight = (int)(appletSize.height);
        int appletWidth = appletSize.width;

        this.setBackground(Color.yellow);//set background color.

        int x,y,y1,x1,a,b,p1x,p1y,p2x,p2y;

        //line co-ordinates
        //the numbers represent the number of boxes on the graph
        int xstart = 7;
        int ystart = 1;

        int xfinish = 3;
        int yfinish = 9;

        //other variables
        int i = 0;
        int i2 = 0;
        int m = 0;
        int n = 0;
        int m2 = 0;
        int n2 = 0;
        int f2 = 0;
        int g2 = 1;

        //ranges
        int f = 5;
        int g = -5;

        //change -ve num to +ve
        int g3 = Math.abs(g);

        int a1 = g3 + f;
        int b1 = a1;

        y1 = (appletHeight);
        x1 = (appletWidth);
        y = (appletHeight / 2);
        x = (appletWidth / 2);
        a = (appletWidth / a1);
        b = (appletHeight / b1);

        int d = (appletWidth / a1);
        int e = (appletHeight / b1);

        /**
         to determine the
         ammount of pixles there
         is in each box of the
         graph, both y-axis and 
         x-axis
         */
        int xbox = x1 / 10;
        int ybox = y1 / 10;

        //line variables
        //the xstart, ystart, etc represent the number of boxes

        //top point of the line on the graph
        p1x = xbox * xstart;//start x
        p1y = ybox * ystart;//start y

        //lowwer point of the line on the graph
        p2x = xbox * xfinish;//finish x
        p2y = ybox * yfinish;//finish y

        //draw y-axis numbers 
        //(+ve)
        while(f != 0){
            String s = String.valueOf(f);
            p.drawString(s,(x + 5),m + 13);
            m = m + b;
            f = f - 1;
        }
        //(-ve)
        m2 = y;
        while(f2 != g-1){
            String u = String.valueOf(f2);
            p.drawString(u,(x + 5),m2 - 3);
            m2 = m2 + b;
            f2 = f2 - 1;
        }
        //draw x-axis numbers.
        //(-ve)
        while(g != 0){
            String t = String.valueOf(g);
            p.drawString(t,n,y - 5);
            n = n + a;
            g = g + 1;
        }
        //(+ve)
        n2 = x + a;
        while(g2 != g3+1){
            String vw = String.valueOf(g2);
            p.drawString(vw,n2 -10,y - 5);
            n2 = n2 + a;
            g2 = g2 + 1;
        }

        BasicStroke aLine2 = new BasicStroke(1.0F,
           BasicStroke.CAP_ROUND,BasicStroke.JOIN_ROUND);
        graph.setStroke(aLine2);

        //notch on numbers and grid lines
        //left to right, top to bottom notches
        int v2 = -5;
        int v5 = 0;
        while(i <= a1-1){
            p.setColor(Color.lightGray);//lightgray line
            p.drawLine(a,0,a,y1);//vertical lightgray
            p.drawLine(0,b,x1,b);//horizontal lightgray
            a = a + d;
            b = b + e;
            i = i + 1;
        }
        //notches
        while(i2 <= a1){
            p.setColor(Color.blue);//notch color
            p.drawString("x",v2+2,y+3);//xaxis
            p.drawString("x",x-4,v5+4);//yaxis
            v5 = v5 + e;
            v2 = v2 + d;
            i2 = i2 + 1;
        }

        //draws the border of the graph
        p.setColor(Color.black);
        Rectangle2D.Float rect = new Rectangle2D.Float(0,0,x1,y1);
        BasicStroke aLine = new BasicStroke(2.5F, 
               BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND);
        graph.setStroke(aLine);
        graph.draw(rect);

        //draw cross
        BasicStroke aLine3 = new BasicStroke(2.5F,
                     BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND);
        graph.setStroke(aLine3);
        p.drawLine(x,0,x,y1); //vertical line
        p.drawLine(0,y,x1,y); //horizontal line

        //display the value of graph width and graph height
        String aw = String.valueOf(x1);
        p.drawString("Graph Width = ", 50,90);
        p.drawString(aw,150,90);
        p.drawString("Graph Height = ", 50,110);
        String ah = String.valueOf(y1);
        p.drawString(ah,156,110);

        //draw line on graph

        BasicStroke aLine4 = new BasicStroke(1.5F,
                         BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND);
        graph.setStroke(aLine4);
        p.setColor(Color.red);

        if(p1x <= x1 && p2x <= x1 && p1y <= y1 && p2y <= y1){
            p.drawLine(p1x,p1y,p2x,p2y);
            Color c = new Color(0,0,0);
            p.setColor(c);
            p.drawString("X", p1x-4,p1y+4);
            p.drawString("X", p2x-4,p2y+4);
        }
        else{
            p.setColor(Color.black);
            p.drawRect(48,34,223,35);
            p.setColor(Color.white);
            p.fillRect(49,35,222,34);
            p.setColor(Color.red);
            p.drawString("Wrong co-ordinates!!!", 50,50);
            p.drawString("Values exceede applet dimensions.", 50,65);
        }
    }
}

class PanelB extends JPanel{

    public PanelB (Box a) {

        a = Box.createVerticalBox();
        a.add(new JLabel("Please enter the values below:"));
        a.add(new JLabel("a"));
        JTextField g1 = new JTextField("0.0");
        g1.setMaximumSize(new Dimension(100,30));
        a.add(g1);
        a.add(new JLabel("b"));
        JTextField g2 = new JTextField("0.0");
        g2.setMaximumSize(new Dimension(100,30));
        a.add(g2);
        a.add(new JLabel("c"));
        JTextField g3 = new JTextField("0.0");
        g3.setMaximumSize(new Dimension(100,30));
        a.add(g3);
        a.add(new JLabel("d"));
        JTextField g4 = new JTextField("0.0");
        g4.setMaximumSize(new Dimension(100,30));
        a.add(g4);
        a.add(new JButton("Plot"));
        a.add(new JButton("Refine"));
        add(a);
    }

    @Override
    public Dimension getPreferredSize()
    {   
        return (new Dimension(200,100));
    }
}

class PanelC extends JPanel{

    public PanelC (Box b) {

        b = Box.createHorizontalBox();
        b.add(new JLabel("a"));
        JTextField f1 = new JTextField("0.0");
        f1.setMaximumSize(new Dimension(100,30));
        b.add(f1);
        b.add(new JLabel("b"));
        JTextField f2 = new JTextField("0.0");
        f2.setMaximumSize(new Dimension(100,30));
        b.add(f2);
        b.add(new JLabel("c"));
        JTextField f3 = new JTextField("0.0");
        f3.setMaximumSize(new Dimension(100,30));
        b.add(f3);
        b.add(new JLabel("d"));
        JTextField f4 = new JTextField("0.0");
        f4.setMaximumSize(new Dimension(100,30));
        b.add(f4);
        b.add(new JButton("Plot"));
        b.add(new JButton("Refine"));
        add(b);
    }

    @Override
    public Dimension getPreferredSize()
    {   
        return (new Dimension(201,50));
    }
} 
```

这是我使用的 HTML 文件：

```
<html>
    <p> This file launches the 'Graph' applet: Graph.class! </p>  
    <applet code= "Graph.class" height = 550 width = 1000>
        No Java?!
    </applet>
 </html> 
```

这是我得到的输出：

![图形](../Images/6b14062aa1295028ae1d19118d18db6a.png)

# .net - 如何在 ProjectTemplate1.vstemplate 中添加“添加为链接文件”？

> ID：11062250
> 
> 赞同：0
> 
> 时间：2012-06-16T09:24:27.473
> 
> 标签：.net, templates, vsix, visual-studio-extensions

我在我的项目中的文件夹调用下添加了一个类文件（LocalInitializer.cs）作为“添加为链接文件”，说“Initializer”。我将在 ProjectTemplate1.vstemplate 文件中做什么来添加它。目前的结构是

```
<TemplateContent>
    <Project File="ProjectTemplate.csproj" ReplaceParameters="true">      

      <ProjectItem ReplaceParameters="true" OpenInEditor="true">Initializer\GlobalInitializer.cs</ProjectItem>

    </Project>   
  </TemplateContent> 
```

但它给出了错误

找不到文件“D:\ProjectTemplate1\ProjectTemplate1\Initializer\GlobalInitializer.cs”

我什至尝试添加

```
<ItemGroup>     
    <Compile Include="Initializer\GlobalInitializer.cs" />      
</ItemGroup> 
```

进入 ProjectTemplate.csproj 但同样的错误。

知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:15:17.170

我怀疑您将需要查看名为“自定义向导”的方法。阅读 VSX MSDN 论坛（Visual Studio 可扩展性）上的这些主题作为起点：

*   [c# 带有链接文件的项目模板](http://social.msdn.microsoft.com/forums/en-US/vsx/thread/df624bb3-2b9b-4559-8e54-be721cefbcad/)
*   [如何将文件添加到 Visual Studio 模板，但此文件不应成为已创建解决方案的一部分](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/46bc738e-a0af-48ac-941c-097bd17a0dfb)

希望有帮助

# c++ - 如何在box2d中检测碰撞但不碰撞？

> ID：11062252
> 
> 赞同：14
> 
> 时间：2012-06-16T09:24:31.777
> 
> 标签：c++, box2d, collision

如何检测身体是否与其他身体发生碰撞但不对碰撞做出反应。

默认*情况下*i - 检测碰撞和物体碰撞。

如果我设置了 fixtureDef 过滤器 - 身体不会发生碰撞，但我无法检测到碰撞。

请帮忙！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-16T10:16:06.410

如果夹具永远不需要与任何东西碰撞，你可以把它做成一个传感器。如果您需要它与某些东西而不是其他东西发生碰撞，您可以在碰撞侦听器的 PreSolve 中执行 contact->SetEnabled(false)，具体取决于它与什么碰撞。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-28T12:51:14.810

您在这里想要的是身体上的传感器固定装置。来自 box2d 手册：

> 有时游戏逻辑需要知道两个固定装置何时重叠但不应该有碰撞响应。这是通过使用传感器来完成的。传感器是检测碰撞但不产生响应的夹具。
> 
> 您可以将任何灯具标记为传感器。传感器可以是静态的或动态的。请记住，每个主体可能有多个固定装置，并且可以混合使用传感器和实体固定装置。
> 
> 传感器不产生接触点。有两种方法可以获取传感器的状态：
> 
> 1.  b2Contact::IsTouching
> 2.  b2ContactListener::BeginContact 和 EndContact

您可以将夹具设置为传感器，然后将其写入您的联系人监听器。如果一个夹具的传感器标志设置为真，它将提供碰撞数据而无需物理模拟碰撞（即允许您测试任何其他碰撞夹具之间的重叠。）

这是关于如何开始使用传感器[Ray Wenderlich 传感器教程的有用教程](http://www.raywenderlich.com/4653/intermediate-box2d-physics-forces-ray-casts-and-sensors)

# windows - iis7.5 只允许脚本访问文件

> ID：11062257
> 
> 赞同：0
> 
> 时间：2012-06-16T09:25:06.257
> 
> 标签：windows, iis, iis-7.5, file-permissions

我的 iis7.5 服务器上有一个文件（称为“log.html”），我希望我的 PHP 安装能够访问和写入，但我不希望任何人直接访问该文件，例如输入' [http://computername/log.html](http://computername/log.html) '（我在局域网上）。

如何阻止用户访问它但允许 php 看到它？

使用下面建议的 web.config 文件时，我收到此错误： ![web.config 错误](../Images/b75aeec0a073888a8d6eb4918005ba91.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:24:36.103

您可以使用 IIS URL 重写并创建*请求阻止规则*来阻止通过 HTTP 的访问：

例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="BlockLogFile" 
              patternSyntax="Wildcard" 
              stopProcessing="true">
          <match url="*" />
          <conditions>
            <add input="{URL}" pattern="/log.html" />
          </conditions>
          <action type="CustomResponse" 
                  statusCode="403" 
                  statusReason="Forbidden: Access is denied." 
                  statusDescription="This is sekret!" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:57:50.560

我想我可能已经回答了我自己的问题！我仍然需要对其进行更多测试，也许如果它不能完全工作，那么有人可以纠正我：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <httpProtocol>
            <customHeaders>
                <add name="cache-control" value="no-store, no-cache, must-revalidate, max-age=0" />
            </customHeaders>
        </httpProtocol>
        <staticContent>
            <clientCache cacheControlMode="DisableCache" />
        </staticContent>
        <security>
            <requestFiltering>
                <denyUrlSequences>
                    <add sequence="log.html" />
                </denyUrlSequences>
            </requestFiltering>
        </security> 
    </system.webServer>
</configuration> 
```

缓存控制位防止浏览器缓存它返回的任何内容。

希望这对其他人有帮助！我对此还是很陌生，所以你也许可以解决这个问题。

# ruby-on-rails-3 - Rails - 我如何验证外键引用的行的存在

> ID：11062258
> 
> 赞同：16
> 
> 时间：2012-06-16T09:25:20.390
> 
> 标签：ruby-on-rails-3, foreign-keys

鉴于“Rails 方式”似乎不使用外键约束，我正在寻找一种替代方法，允许我在将对象保存到 TableB 之前验证外键引用的行确实存在于 TableA 中与 table_a_id。

到目前为止，我发现的唯一资源（找不到指向它提到的博客文章的链接，日期为 2007 年）似乎与 Rails 3.2 不兼容，所以任何人都可以提出一种方法这样做？

我目前正在考虑创建一个验证器以手动分配给我的模型中的相关属性，但我无法弄清楚如何使用 validate_each(object, attribute, value) 来完成它。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-04-23T19:58:29.673

只需像下面这样使用，

```
validates :user, presence: true 
```

它将自动检查数据库中是否存在用户记录。

来自[Active Record Validation 的参考 -`presence`](https://guides.rubyonrails.org/active_record_validations.html#presence)：

> 如果您想确定关联是否存在，则需要测试关联对象本身是否存在，而不是用于映射关联的外键。这样，不仅可以检查外键是否为空，还可以检查引用的对象是否存在。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-16T09:36:59.987

有一个插件可以帮助您处理**belongs_to**关联：[验证](https://github.com/perfectline/validates_existence). 但是，也许您可​​以添加自己的验证？像这样的东西怎么样：

```
# Assuming your foreign key is user_id (which references the table User)
validate :user_id_exists

def user_id_exists
  return false if User.find_by_id(self.user_id).nil?
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T05:06:47.140

我对这段代码有问题：

```
return false if User.find(self.user_id).nil? 
```

当没有找到匹配的记录时，我必须捕获 ActiveRecord 异常。*零？*没有找到记录时不起作用；*在nil*之前抛出异常？被执行。

```
# Assuming your foreign key is user_id (which references the table User)
validate :user_id_exists

def user_id_exists
  begin
    User.find(self.user_id)
  rescue ActiveRecord::RecordNotFound
    errors.add(:user_id, "user_id foreign key must exist")
    false
  end
end 
```

*这在你使用无效*时有用吗？单元测试中的断言。

```
request.user_id = unknown
assert request.invalid?

request.user_id = 1
assert request.valid? 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-25T00:24:52.747

请注意，从 Rails 3.2 开始， validates_presence_of 在这种情况下完全按照您想要的方式工作，您不必像上面的答案那样构建复杂的结构，甚至不必使用漂亮的 validates_existence_of gem。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-28T01:28:16.393

您需要指定`inverse_of`选项并验证它是否存在。

从[活动记录验证指南](http://guides.rubyonrails.org/active_record_validations.html#validation-helpers)：

> 为了验证需要存在的关联记录，您必须为关联指定**:inverse_of**选项

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-24T06:26:17.807

我不喜欢例外。我通过这样做解决了这个问题：

```
class Foo < ActiveRecord::Base

    validate :bar_exists

    protected

    def bar_exists
        if !User.where(bar_id: self.bar_id).exists? then
            errors.add(:bar_id, 'A valid bar_id is valid.')
        end
    end

end 
```

# menu - CSS Accordion + inline-block 问题

> ID：11062260
> 
> 赞同：-1
> 
> 时间：2012-06-16T09:25:22.090
> 
> 标签：menu, slider, accordion, css

我的 css 手风琴菜单有问题...

我创建了一个不错的滑块，如下所示：http: [//jsfiddle.net/LedZep257/hDzyH/1/](http://jsfiddle.net/LedZep257/hDzyH/1/)

但是 lis 没有很好地间隔，这意味着某些项目没有完全出现。

当我使用内联块时，间距是正确的，但它弄乱了整个滑块：http: [//jsfiddle.net/LedZep257/hDzyH/](http://jsfiddle.net/LedZep257/hDzyH/)

任何人都可以帮助/有没有人有任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:10:19.793

我认为你不能在不同的措施中设置过渡，我认为“自动”和“％”是不同的措施，你可以只使用一种措施来设置过渡，如果你有太多的麻烦，你真的需要要做到这一点，为什么不使用另一种措施，如“em”meaby 来解决它。

例如

```
.horizontalaccordion>ul>li
{
display: inline-block;
overflow: hidden;
float: left;
margin: 0;
padding: 0;

list-style: none;
width: 8em; /*I was here*/
height: 40px;
background: -webkit-gradient(linear, left top, left bottom, from(#454545), to(#000000));
transition: width 0.6s ease-in-out;
-moz-transition: width 0.6s ease-in-out;
-webkit-transition: width 0.6s ease-in-out;
-o-transition: width 0.6s ease-in-out;
}

.horizontalaccordion>ul>li>h3
{
display: inline-block;
float: left;
margin: 0;
padding: 10px;
padding-left:19px;
padding-right:18px;
height: 19px;
width: 8em; /*I was here*/
border-left: none;
font-family: Arial, Helvetica, sans-serif;
text-decoration: none;
color: #000;
background: -webkit-gradient(linear, left top, left bottom, from(#999999), to(#cccccc));
white-space: nowrap;
filter: progid;
-ms-filter: progid;
}

.horizontalaccordion>ul>li:hover
{
overflow: hidden;
width: 60em; /*I was here, I just set 60em for example*/
}

.horizontalaccordion:hover li
{

    width: 0em; /*I was here*/
} 
```

# azure - 部署的默认操作系统系列

> ID：11062263
> 
> 赞同：5
> 
> 时间：2012-06-16T09:25:30.247
> 
> 标签：azure, azure-web-roles

我们有一个迁移到 Windows Azure 的 Web 应用程序。它是从安装了最新 Azure SDK 的 Visual Studio 2010 内部部署的。一切正常，除了我们对 Windows Server 2008 R2 有一些依赖，我需要在每次部署后通过他们的管理门户网站手动更改操作系统系列（云服务 -> 配置 -> 操作系统）。

我想应该有一个选项可以将其设为默认选择，但我在 Visual Studio 内的 azure 项目设置中没有找到任何内容。有谁知道避免手动执行此操作的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T09:48:55.037

您可以通过 Visual Studio 中的服务配置文件来执行此操作，只需在ServiceConfiguration.Cloud.cscfg 文件的元素中添加一个`osFamily="2"`属性。`ServiceConfiguration`

一般好的默认值是星号 (*)，它将确保您拥有最新的客户操作系统。（**注意：**正如 Robert Muehsig 在下面的评论中指出的那样，星号仅适用于`osVersion`，而不适用于`osFamiliy`）

如何通过修改服务配置文件升级 Windows Azure 客户操作系统：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg456324.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg456324.aspx)

Windows Azure 服务配置架构（.cscfg 文件）：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx)

# c# - 删除存储文件（图片）C# Metro 应用程序

> ID：11062264
> 
> 赞同：1
> 
> 时间：2012-06-16T09:25:42.117
> 
> 标签：c#, windows-8, microsoft-metro

我有一个问题，在我的应用程序中使用或显示保存在我的应用程序本地文件夹中的 Gridview 中的图像，我想通过选择它们来删除这些图像，但问题是这些图像正在使用中并且在任何情况下都在 Windows 中（文件或图像）打开或正在使用，因此不应从驱动器中删除。我想从硬盘中删除图像。m 通过BitmapImage 中的URI 路径在GridView 中使用或访问这些图像。像这样

私有 ImageSource _image = null; this._image = new BitmapImage(new Uri(new Uri("ms-appdata:///local/RecentImages/"), this._imagePath));

我试图删除请告诉我如何停止或处理 GridView 和 StorageFile 之间的链接或如何从存储设备中删除图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:48:55.853

我假设没有其他应用程序同时加载相同的图像。这是一种在将图像文件流加载到内存后关闭图像文件流的方法。

```
 /// <summary>
    /// Gets the bitmap.
    /// </summary>
    /// <param name="path">The path.</param>
    /// <returns></returns>
    public static BitmapSource GetBitmap(string path)
    {
        if (!File.Exists(path)) return null;

        MemoryStream ms = new MemoryStream();
        BitmapImage bi = new BitmapImage();
        byte[] bytArray = File.ReadAllBytes(path);
        ms.Write(bytArray, 0, bytArray.Length); ms.Position = 0;
        bi.BeginInit();
        bi.StreamSource = ms;
        bi.EndInit();
        return bi;
    } 
```

# java - 将多个文件选择到一个 zip 并下载 zip 文件时出错？

> ID：11062267
> 
> 赞同：-2
> 
> 时间：2012-06-16T09:25:57.270
> 
> 标签：java

```
 <% // Set the content type based to zip
    response.setContentType("Content-type:text/zip");
    response.setHeader("Content-Disposition", "attachment; filename=mytest.zip");

    // List of files to be downloaded
    List files = new ArrayList();
    files.add(new File("C:/first.txt"));
    files.add(new File("C:/second.txt"));
    files.add(new File("C:/third.txt"));

    ServletOutputStream out1 = response.getOutputStream();
    ZipOutputStream zos = new ZipOutputStream(new BufferedOutputStream(out1));
    for (Object file : files) 
    {
        //System.out.println("Adding file " + file.getName());
        System.out.println("Adding file " + file.getClass().getName());
        //zos.putNextEntry(new ZipEntry(file.getName()));
        zos.putNextEntry(new ZipEntry(file.getClass().getName()));
        // Get the file
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(file);
        } catch (Exception E) {
            // If the file does not exists, write an error entry instead of file  contents
            //zos.write(("ERROR: Could not find file " + file.getName()).getBytes());
            zos.write(("ERROR: Could not find file" +file.getClass().getName()).getBytes());
            zos.closeEntry();
            //System.out.println("Could not find file "+ file.getAbsolutePath());
            continue;
        }
        BufferedInputStream fif = new BufferedInputStream(fis);
        // Write the contents of the file
        int data = 0;
        while ((data = fif.read()) != -1) {
            zos.write(data);
        }
        fif.close();
        zos.closeEntry();
        //System.out.println("Finished adding file " + file.getName());
        System.out.println("Finished adding file " + file.getClass().getName());
    }
    zos.close();
%> 
```

这是我的实际程序，想要压缩多个文件然后下载它，我这样做是对还是错，我是 JAVA 编程新手，你能帮帮我吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:45:21.457

您的`for`循环应如下所示：

```
for (File file : files) {
   ... 
```

或者

```
for (String file : files) {
   ... 
```

您声明`file`变量的方式使编译器假定它是一个`Object`，而不是一个`File`实例。因此，您会收到编译错误，因为没有`FileInputStream`构造函数接受`Object`. `file`必须是文件的绝对路径`File`或`String`包含文件的绝对路径。

另一个错误是您将文​​件名传递给 ZipEntry 的方式。使用：

```
file.getClass().getName() 
```

将导致`"java.io.File"`or `"java.lang.String"`，而不是文件名。要设置文件的正确名称，请使用[`File#getName()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#getName%28%29).

# php - 浏览器不显示 价值链选择

> ID：11062269
> 
> 赞同：0
> 
> 时间：2012-06-16T09:26:13.100
> 
> 标签：php, mysql, internet-explorer, select, option

我已经浏览并查看了有关 IE 和问题的所有答案，但我相信我的答案是独一无二的。如果没有，对不起。

我正忙着为朋友建立一个车辆列表网站，我得到了一位现在无处可寻的自由职业者的帮助。

当我在我的网站上选择汽车制造商时，IE 没有显示我的车型范围。

这是网站[在这里查看](http://www.usedcarsforsaleingauteng.com/index.php)！

FF 和所有其他浏览器都可以完美运行。如果需要，我还会分享一些代码。谢谢。但我确信您可以通过源代码查看器看到问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:49:35.777

这是一个已知的错误，因为 IE 在选择菜单的情况下不支持 innerHTML 属性。

因此，请点击此链接[http://support.microsoft.com/kb/276228](http://support.microsoft.com/kb/276228)

尝试这种方式而不是使用 innerHTML 只使用 outerHTML 你还必须`<select>`在 getodels.php 中回显标签，而且这段代码比你的更聪明更短

```
function makeModel(str, change)
{var xmlhttp;
    if (str!="")
    {
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Msxml2.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            var model = document.getElementById("model");
            model.outerHTML=xmlhttp.responseText;
            if(change) {
            }
        }
    }
    xmlhttp.open("GET","getmodels.php?make="+str,true);
    xmlhttp.send();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T09:33:46.120

乍一看，它看起来像是一个 javascript 问题，可能与 AJAX 相关。

如果您的其他 IE ajax 声明失败，请尝试添加以下内容。我在我的项目中为 IE8+ 列出了这个。

```
xmlHttp = new ActiveXObject("Msxml2.XMLHTTP"); 
```

# objective-c - 如何通过单击按钮在图像数组中的图像视图上显示下一个图像

> ID：11062272
> 
> 赞同：1
> 
> 时间：2012-06-16T09:26:53.370
> 
> 标签：objective-c, ipad, ios5, ios4, xcode4.2

**我有图像数组，其中包含第一张图像中的两个图像，它在图像视图上正确显示，因为我在视图中编写代码是否加载为`**

```
NSString *urlString=[NSString stringWithFormat:@"%@",[imageArray1 objectAtIndex:i]];
  NSLog(@"selected image:%@",urlString);
NSURL *url =[NSURL URLWithString:urlString];
NSData *imagedata =[[NSData alloc]initWithContentsOfURL:url];
UIImage *image=[[UIImage alloc]initWithData:imagedata];
[imgvw setImage:image]; 
```

**现在我需要在单击条形按钮时显示下一个图像，该代码是**`

```
i=i+1;
NSLog(@"i=%d",i);
NSString *urlstr=[NSString stringWithFormat:@"%@",[imageArray1 objectAtIndex:i]];
NSLog(@"selected image:%@",urlstr);
NSURL *url =[NSURL URLWithString:urlstr];
NSData *imagedata =[[NSData alloc]initWithContentsOfURL:url];
UIImage *image1=[[UIImage alloc]initWithData:imagedata];
[imgvw setImage:image1]; 
```

**但是在线崩溃** ``NSString *urlstr=[NSString stringWithFormat:@"%@",[imageArray1 objectAtIndex:i]];` 我不明白为什么会发生请提出一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:35:33.713

```
int i=0;

NSString *urlString=[NSString stringWithFormat:@"%@",[imageArray1 objectAtIndex:i]];
SURL *url =[NSURL URLWithString:urlString];
NSData *imagedata =[[NSData alloc]initWithContentsOfURL:url];
UIImage *image=[[UIImage alloc]initWithData:imagedata];
[imgvw setImage:image];

in button action event.

if(i<[imageArray1 count]-1)
{
i++;

NSString *urlString=[NSString stringWithFormat:@"%@",[imageArray1 objectAtIndex:i]];
SURL *url =[NSURL URLWithString:urlString];
NSData *imagedata =[[NSData alloc]initWithContentsOfURL:url];
UIImage *image=[[UIImage alloc]initWithData:imagedata];
[imgvw setImage:image];

}
else
{
// 
/NSLog(@" you reach the last items ");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:42:09.483

`int i;`在 yourviewcontroller.h 文件中声明

我 = 0; 在 `viewDidLoad`方法中

您在按下按钮时实现代码。

```
 int noOfImages = [imageArray1 count];

    if(++i< noofImages){

    NSString *urlString=[NSString stringWithFormat:@"%@",[imageArray1 objectAtIndex:i]];
    SURL *url =[NSURL URLWithString:urlString];
    NSData *imagedata =[[NSData alloc]initWithContentsOfURL:url];
    UIImage *image=[[UIImage alloc]initWithData:imagedata];
    [imgvw setImage:image];

    }
    else
    {
    i =0;
    NSString *urlString=[NSString stringWithFormat:@"%@",[imageArray1 objectAtIndex:i]];
    SURL *url =[NSURL URLWithString:urlString];
    NSData *imagedata =[[NSData alloc]initWithContentsOfURL:url];
    UIImage *image=[[UIImage alloc]initWithData:imagedata];
    [imgvw setImage:image];
    } 
```

# asp.net - 如何使用用户名和密码保护 WCF Rest 服务？

> ID：11062274
> 
> 赞同：0
> 
> 时间：2012-06-16T09:27:19.597
> 
> 标签：asp.net, wcf, wcf-rest, wcf-authentication

我是 WCF 的新手，我想知道如何保护 WCF Rest 服务。我有一个 asp.net 网站，只有注册用户才能访问它，该应用程序使用托管在同一 IIS 服务器上的服务，我的问题是，我该如何限制该服务的使用，因为只有注册用户才能使用它，知道该服务可以被许多客户端（Android、iPhone、...）使用。我可以使用什么类型的身份验证？为了测试我创建了一个 winform 的服务，我使用了一个 HttpWebRequest。 **PS：我不能使用https。** 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:49:58.563

最简单的方法是使用 asp.net 兼容模式。WCF 服务调用将导致用于 ASP.NET 页面的相同预处理，包括检查 ASP.NET 身份验证和会话 cookie。您还可以检查 HttpContext，包括 httpcontext.current.user.identity.isauthenticated。如果用户未通过身份验证，则抛出异常或返回错误代码。以下是更多信息：http: [//msdn.microsoft.com/en-us/library/aa702682.aspx](http://msdn.microsoft.com/en-us/library/aa702682.aspx)。

因此，如果您已经为您的应用程序使用表单身份验证，并且应该在用户登录到您的应用程序后调用该服务，那么您就设置好了。

您还可以创建身份验证服务。该服务将允许客户端发送用户名/密码，并将使用 ASP.NET 身份验证对用户进行身份验证。它将发回一个 auth cookie，然后您可以如上所述检查未来的服务调用。请参阅[http://msdn.microsoft.com/en-us/library/bb386582.aspx](http://msdn.microsoft.com/en-us/library/bb386582.aspx)。

我相信可以使用 json 调用身份验证服务。请参阅[如何在没有 ASP.NET 的情况下从 json 客户端调用 .NET AuthenticationService](https://stackoverflow.com/questions/8918322/how-to-call-net-authenticationservice-from-json-client-without-asp-net)。

# memory - 如何在谷歌电视模拟器中增加内存大小

> ID：11062275
> 
> 赞同：2
> 
> 时间：2012-06-16T09:27:51.337
> 
> 标签：memory, emulation, internal, google-tv

我想在谷歌电视模拟器中安装应用程序，但由于内部内存不足而无法安装。

我试过 1) disk.dataPartition.size=1024 in avd config ini file 2) emulator -avd -partition-size 1024 -wipe-data

但没有任何结果。内部内存大小仅为 12 MB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:39:42.750

SO上有一些关于增加Android模拟器内部内存的帖子，同样适用于谷歌电视模拟器：

[https://stackoverflow.com/a/5616720/251956](https://stackoverflow.com/a/5616720/251956)

[https://stackoverflow.com/a/3945915/251956](https://stackoverflow.com/a/3945915/251956)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:18:34.063

-partition-size**不起作用**。

这是一个 Google TV 插件错误。

`vim <android-sdks>/add-ons/addon-google_tv_addon-google-12/skins/720p/hardware.ini`

更改
`disk.dataPartition.size=128`
为
`disk.dataPartition.size=128m`

看

*   [http://code.google.com/p/android/issues/detail?id=33697](http://code.google.com/p/android/issues/detail?id=33697)
*   [http://code.google.com/p/googletv-issues/issues/detail?id=104](http://code.google.com/p/googletv-issues/issues/detail?id=104)

# macos - 有没有办法在机器不运行的情况下从 VMWare 客户端复制文件？

> ID：11062278
> 
> 赞同：0
> 
> 时间：2012-06-16T09:29:14.213
> 
> 标签：macos, vmware-workstation

我更新到 Mac OS-X 10.7.4，客户端停止工作。

我有我愚蠢地没有备份的开发文件。有人知道有什么方法可以恢复客户端上的文件或进入“安全模式”，这可能会让我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:36:47.457

这是来自 VMware 的 KB，它解释了如何在不实际启动 VM 的情况下挂载 VM 磁盘： http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId= [1010989](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1010989)

# objective-c - 12 小时模式下的 NSDateFormatter

> ID：11062280
> 
> 赞同：28
> 
> 时间：2012-06-16T09:29:44.227
> 
> 标签：objective-c, ios, datetime, nsdate, nsdateformatter

我有以下代码。

```
NSDateFormatter *df = ...;
[df setTimeZone:[NSTimeZone defaultTimeZone]];
[df setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSZZZ"];
NSDate * date = [df dateFromString:date_string]; //here is the problem 
```

在 24 小时模式下，一切正常。在设备上设置 12 小时模式时，stringFromDate 返回 null。date_string 的格式一直都是一样的，日期格式也是一样的。为什么会这样？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-16T09:34:51.587

在你的`NSDateFormatter "yyyy-MM-dd'T'HH:mm:ss.SSSZZZ"` `HH`看台上 24 小时和`hh`12 小时

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-16T09:35:48.150

尝试以这种方式设置语言环境：

```
NSLocale *twelveHourLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
df.locale = twelveHourLocale; 
```

要强制改为 24 小时，您可以使用：

```
NSLocale *twentyFour = [[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T10:31:09.300

12 小时制到 24 小时制：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"hh:mm a"];
NSDate *amPmDate = [formatter dateFromString:amPmHourString];
[formatter setDateFormat:@"HH:mm"];
NSString *24HourString = [formatter stringFromDate:amPmDate]]; 
```

对于 24 小时模式到 12 小时模式，只需执行相反的操作

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-29T14:47:44.830

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
NSLocale *locale = [[[NSLocale alloc] 
                initWithLocaleIdentifier:@"en_US_POSIX"] autorelease];  
[dateFormat setLocale:locale]; 
```

# c# - 资源文件夹 VS Resx 文件

> ID：11062281
> 
> 赞同：0
> 
> 时间：2012-06-16T09:29:46.067
> 
> 标签：c#, .net, visual-studio-2008, c#-3.0

首先，请注意我是一名 Java 开发人员，几周前才开始使用 C#。这是我的问题，它是关于 Visual Studio IDE 的。

我正在使用 Visual Studio IDE 2008 创建 C# 项目。我打开了一个新的 Windows 应用程序，在表单中添加了一个图片框，现在准备向其中添加图像。我单击图片框中的黑色小箭头按钮，它会打开一个对话框，我们可以在其中放置图像。

现在，问题来了。在我的 c# 书中，他们使用第一个选项“本地资源”添加图像。无论如何，由于我必须添加图像数量，因此我选择了“项目资源文件”并将所有图像一次添加到文件夹中。现在我工作顺利，没有任何问题。但是，我可以看到“Form.resx”文件是空的（在我的书中，他们显示该文件包含所有图像文件）。

我想知道我所做的是否正确。即使该文件是空的，程序中也没有错误。我不知道分发后是否会出现任何问题，例如缺少资源（在 Java 中通常会发生这种情况，除非您将所有资源放入项目内的新“包”中。这就是我选择第二个选项时的原因之一添加图像）。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:07:25.050

您的资源将位于名为 Resources.Resx 的文件中（我认为），这可以在项目文件的 Properties 文件夹中找到

[http://msdn.microsoft.com/en-us/library/7k989cfy(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7k989cfy(v=vs.80).aspx)这个链接有一些关于使用资源的信息

如果您需要在项目中的多个表单上使用文件，最好将文件添加到项目资源中。如果它们只需要当前表单，您不妨将它们放在表单资源文件中

# android - 如何让 Android 系统强制所有 apk 使用 LANDSCAPE？

> ID：11062288
> 
> 赞同：3
> 
> 时间：2012-06-16T09:31:51.327
> 
> 标签：android, android-activity, orientation, apk, landscape

为此，我在android系统（v4.04）中做了三种修改。它们是： 1\. WindowsManagerService.java，修改了getOrientationFromWindowsLocked()；2.Activity.java，修改onResume()；3.PhoneWindowManager.java，修改setInitialDisplaySize()；他们都得到了工作，但也有一些副作用。那么有没有更好的修改呢？任何建议将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:18:33.033

据我说，你必须在 android 中修改你的 SensorManager 类。提供的方法是 onSensorChange()。在这种方法中，您可以编写代码以满足您的要求，即横向模式。

# iphone - 触摸时应用程序崩溃

> ID：11062289
> 
> 赞同：2
> 
> 时间：2012-06-16T09:32:01.247
> 
> 标签：iphone, objective-c, xcode, ios-simulator

当我构建应用程序时，我在 UITouch 行上收到警告说

> 不兼容的 Object-c 初始化“struct NSArray *”，预期为“struct UITouch *”

```
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
        UITouch *myTouch = [[event allTouches] allObjects];
        player.center = [myTouch locationInView:self.view];
    } 
```

当我运行该应用程序时，一切都开始正常，直到我单击播放器然后它关闭。谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:33:54.410

`-allObjects`方法返回`NSArray`您的触摸，如果您想从集合中获取单个对象，您需要使用`-anyObject`方法：

```
UITouch *myTouch = [[event allTouches] anyObject]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:33:59.663

可能你的意思是：

```
UITouch *myTouch = [[event allTouches] anyObject]; 
```

或者：

```
UITouch *myTouch = [touches anyObject]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:40:43.260

您的变量`myTouch`是指向`UITouch`对象的指针。但是，如果您查看文档，您会发现`allTouches`a`UIEvent`返回 an `NSSet`，并且`allObjects`an`NSSet`返回 an `NSArray`。因此，您试图告诉计算机`myTouch`将获得一个`UITouch`传入的对象，而它几乎肯定会获得一个`NSArray`.

就像把一个方形钉子放在一个圆孔里。

# python - 运行 python 文件或脚本

> ID：11062290
> 
> 赞同：-2
> 
> 时间：2012-06-16T09:32:02.420
> 
> 标签：python

我正在尝试运行 python 文件，但我真的不知道该怎么做？例如让我们以下面的函数示例为例

```
def fib(n):
a, b=0, 1
while a < n:
print(a, end='')
a,b=b,a+b
print() 
```

它取自此链接

[http://docs.python.org/py3k/tutorial/controlflow.html](http://docs.python.org/py3k/tutorial/controlflow.html) 我在记事本++中输入了这段代码，但无法理解几件事 1：这里表示函数声明完成的地方？或者哪一行表示函数完成?如果我们将它与 c++ 进行比较，我们有

```
int fibonaci(int n)
{
 return something

} 
```

第二件事是我们如何使用例如 fibonaci(200)？最后一个我如何运行？我也对循环停止感到困惑，但这是另一个话题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:40:21.287

根据该教程中代码示例下方的注释：

> *循环体*是*缩进*的：缩进是 Python 对语句进行分组的方式。在交互式提示下，您必须为每个缩进的行键入一个制表符或空格。在实践中，您将使用文本编辑器为 Python 准备更复杂的输入；所有体面的文本编辑器都有自动缩进功能。当以交互方式输入复合语句时，它必须后跟一个空行以表示完成（因为解析器无法猜测您何时键入最后一行）。请注意，基本块中的每一行必须缩进相同的数量。

函数声明的工作方式相同 - 它需要缩进与教程中给出的示例相同。函数声明在缩进不超过`def`语句的第一行结束。

要运行该函数，您可以调用它 - 这看起来与 C 版本相同：

```
fib(200) 
```

会`fib`带你进去`n=200`。

至于运行脚本本身，Notepad++ 周围有一些插件可以教它如何给你一个“在 Python 中运行”命令，但最简单的方法可能是使用 IDLE——它应该与 Python 一起安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:41:30.850

“这里在哪里指出函数声明已完成？”

缩进决定了函数的内容。或者，在这种特殊情况下，只是文件的结尾。

对于运行 python 脚本，我可以推荐安装了 Python 扩展的 Chrome。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T09:21:21.517

1）您的代码中存在一些缩进问题。

您需要将以下代码放入记事本并使用 abc.py 保存文件（.py 是 python 文件扩展名）。

```
def fib(n):
    a, b=0, 1
    while a < n:
        print(a, end=' ')
        a,b=b,a+b

fib(200) 
```

***输出***：

```
0 1 1 2 3 5 8 13 21 34 55 89 144 
```

2) 在python中，函数体或循环体用`indentation`. 您只需要将`tab`按钮放在键盘上，它在 python 中被视为函数/循环体。

3) 对于 Fibonacci 的评估`200`，需要`fib`通过传递 200 的参数来调用函数

# pthreads - pthread 属性对象是否需要在使用它们的对象的生命周期内存在？

> ID：11062292
> 
> 赞同：6
> 
> 时间：2012-06-16T09:32:22.660
> 
> 标签：pthreads, posix

pthread 属性对象是否需要在使用它们的对象的生命周期内存在，或者在使用它们后立即销毁它们是否安全？例如：

```
// Create the mutex attributes.
pthread_mutexattr_t attributes;
pthread_mutexattr_init( &attributes );
pthread_mutexattr_settype( &attributes, PTHREAD_MUTEX_NORMAL );

// Create the mutex using the attributes from above.
pthread_mutex_t mutex;
pthread_mutex_init( &mutex, &attributes ); 
```

现在可以使用 pthread_mutexattr_destroy() 安全地销毁属性，还是需要等到使用 pthread_mutex_destroy() 销毁互斥体之后？

这同样适用于使用属性的其他 pthread 对象吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T09:39:42.053

[http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_mutexattr_init.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_mutexattr_init.html)

> 在使用互斥体属性对象初始化一个或多个互斥体后，任何影响属性对象（包括销毁）的函数都不应影响任何先前初始化的互斥体。

因此，在创建互斥锁后销毁 mutexattr 对象是非常安全的。

# java - 为什么Java允许使用对象实例访问静态成员

> ID：11062293
> 
> 赞同：5
> 
> 时间：2012-06-16T09:32:23.350
> 
> 标签：java, oop

我的理解是静态成员属于该类。那么为什么Java允许我用一个对象来访问它们呢？

要理解我的意思，请参阅以下示例：

```
public class Student {
  public static int number = 0;
} 
```

这`number`是一个属于 class 的静态字段`Student`，但我仍然可以访问它，如下所示：

```
Student s = new Student();
int n = s.number; 
```

这个决定背后的理由是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T09:57:48.487

这背后的基本原理是对象是类的一个实例，因此除了实例级属性之外，它还应该能够访问属于该类的每个属性。

这就像传统的邮件。如果您收到一封寄给您全家人（静态成员）的邮件，您会觉得被授权打开它，因为您是该家庭的成员。另一方面，如果邮件是寄给您（实例成员）的，则只有您有权打开它，您的家人无权打开它。

这也适用于其他面向对象的语言，如 C++。但是，不鼓励使用该`s.number`符号来访问静态成员，因为它会误导代码的读者。您应该始终使用该`Student.number`符号，因为这清楚地表明它`number`是一个静态成员。如果您通过实例变量访问静态成员，现代语言（例如 C#）会发出警告，但根据语言规范，它仍然是完全合法的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T09:54:41.403

经过一些明显的阅读后，java编译器做了必要的不祥之物来处理访问静态变量的对象实例，它知道你想要你的意思.. IDEs会给你一个警告..

关于原因和解释，请阅读：[为什么通过实例调用静态方法不是Java编译器的错误？](https://stackoverflow.com/questions/610458/why-isnt-calling-a-static-method-by-way-of-an-instance-an-error-for-the-java-co)

最终它是一个语言规范，你只需要处理它.. 是否使用它是你的决定.. 我的建议：**不要！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:54:22.653

这背后的基本原理是...... [JLS - 第 8.3.1.1 章。静态字段](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.1)

# c# - WPF - MVVM - ComboBox SelectedItem

> ID：11062297
> 
> 赞同：18
> 
> 时间：2012-06-16T09:33:07.370
> 
> 标签：c#, .net, wpf, data-binding, mvvm

我在背景和类中`ViewModel`（已实现）只有一个类型的属性。我的 ComboBox SelectedItem 绑定到类别的实例。当我更改实例的值时，未更新 SelectedItem 并且未更改 Combobox。`INotifyPropertyChanged``Category``string`

编辑：代码

组合框：

```
<ComboBox x:Name="categoryComboBox" Grid.Column="1"  Grid.Row="3" Grid.ColumnSpan="2" 
          Margin="10" ItemsSource="{Binding Categories}"
          DisplayMemberPath="Name" SelectedValue="{Binding NodeCategory, Mode=TwoWay}"/> 
```

财产：

```
private Category _NodeCategory;
public Category NodeCategory
{
    get
    {
        return _NodeCategory;
    }
    set
    {
        _NodeCategory = value;
        OnPropertyChanged("NodeCategory");
    }
}

[Serializable]
public class Category : INotifyPropertyChanged
{
    private string _Name;
    [XmlAttribute("Name")]
    public string Name
    {
        get
        {
            return _Name;
        }
        set
        {
            _Name = value;
            OnPropertyChanged("Name");
        }
    }

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    [field:NonSerialized]
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

我正在尝试的是：当我设置

```
NodeCategory = some_list_of_other_objects.Category; 
```

`Combobox`以适当的方式选择该项目`DisplayMemberPath`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-16T10:28:42.543

您在此行中设置的类别 -

```
NodeCategory = some_list_of_other_objects.Category; 
```

并且您的 Categories 集合（`ItemsSource="{Binding Categories}"`）中的一个应该指的是同一个对象。如果他们不是，那么`SelectedItem`将无法正常工作。

### 解决方案 1 -

你也可以尝试这样使用`SelectedValuePath`——

```
<ComboBox x:Name="categoryComboBox" 
          ItemsSource="{Binding Categories}"
          DisplayMemberPath="Name" 
          SelectedValuePath="Name" 
          SelectedValue="{Binding NodeCategory, Mode=TwoWay}" /> 
```

在代码中你可以做这样的事情 -

```
private string _NodeCategory;
public string NodeCategory
{
    get
    {
        return _NodeCategory;
    }
    set
    {
        _NodeCategory = value;
        OnPropertyChanged("NodeCategory");
    }
} 
```

并像这样设置选定的项目 -

```
NodeCategory = some_list_of_other_objects.Category.Name; 
```

并使用这样的选定值 -

```
Category selectedCategory = 
   some_list_of_other_objects.FirstOrDefault(cat=> cat.Name == NodeCategory); 
```

或者

```
Category selectedCategory = 
   Categories.FirstOrDefault(cat=> cat.Name == NodeCategory); 
```

* * *

### 解决方案 2 -

另一种可能的解决方案是 -

```
NodeCategory = 
  Categories.FirstOrDefault(cat=> cat.Name == some_list_of_other_objects.Category.Name); 
```

这样，您的`NodeCategory`属性将具有`Categories`集合中对象的引用并且`SelectedItem`可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T10:12:08.093

您的 XAML 需要进行一些修改，但我认为真正的问题在于您发布的代码，我认为这并不能说明全部情况。对于初学者，您的组合框`ItemSource`绑定到一个名为 Categories 的属性，但您没有显示该属性是如何编码的，或者您的`NodeCategory`属性最初是如何与项目同步的。

尝试使用以下代码，您将看到所选项目在用户更改组合框中的值时保持同步。

**XAML**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel>
    <ComboBox x:Name="categoryComboBox"
              Grid.Column="1"
              Grid.Row="3"
              Grid.ColumnSpan="2"
              Margin="10"
              ItemsSource="{Binding Categories}"
              DisplayMemberPath="Name"
              SelectedItem="{Binding NodeCategory}" />
    <Label Content="{Binding NodeCategory.Name}" />
</StackPanel> 
```

**代码隐藏**

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private ObservableCollection<Category> _categories = new ObservableCollection<Category>
    {
        new Category { Name = "Squares"},
        new Category { Name = "Triangles"},
        new Category { Name = "Circles"},
    };

    public MainWindow()
    {
        InitializeComponent();
        NodeCategory = _categories.First();
        this.DataContext = this;
    }

    public IEnumerable<Category> Categories
    {
        get { return _categories; }
    }

    private Category _NodeCategory;
    public Category NodeCategory
    {
        get
        {
            return _NodeCategory;
        }
        set
        {
            _NodeCategory = value;
            OnPropertyChanged("NodeCategory");
        }
    }

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
}

[Serializable]
public class Category : INotifyPropertyChanged
{
    private string _Name;
    [XmlAttribute("Name")]
    public string Name
    {
        get
        {
            return _Name;
        }
        set
        {
            _Name = value;
            OnPropertyChanged("Name");
        }
    }

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    [field: NonSerialized]
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T10:43:38.920

从我的小例子：

注意：这只是设置一个字符串（或另一个列表中的一个类别），但这里的基础应该是相同的：

基本上这是完成的：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    (this.DataContext as ComboBoxSampleViewModel).SelectCategory("Categorie 4");
} 
```

这是我的 XAML：

```
<Grid>
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="76,59,0,0"   
              Name="comboBox1" VerticalAlignment="Top" Width="120" 
              ItemsSource="{Binding List.Categories}" 
              DisplayMemberPath="Name" 
              SelectedValue="{Binding NodeCategory, Mode=TwoWay}" />
    <Button Content="Button" Height="27" HorizontalAlignment="Left" 
            Margin="76,110,0,0" Name="button1" VerticalAlignment="Top" 
            Width="120" Click="button1_Click" />
</Grid> 
```

并在 Window 的 ViewModel 中

```
class ComboBoxSampleViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    public CategoryList List { get; set; }

    public ComboBoxSampleViewModel()
    {
        this.List = new CategoryList();
        NodeCategory = List.Selected;
    }

    private ComboBoxSampleItemViewModel nodeCategory;
    public ComboBoxSampleItemViewModel NodeCategory
    {
        get
        {
            return nodeCategory;
        }
        set
        {
            nodeCategory = value;
            NotifyPropertyChanged("NodeCategory");
        }
    }

    internal void SelectCategory(string p)
    {
        this.List.SelectByName(p);
        this.NodeCategory = this.List.Selected;
    }
} 
```

在这个小班的帮助下：

```
public class CategoryList
{
    public ObservableCollection<ComboBoxSampleItemViewModel> Categories { get; set; }
    public ComboBoxSampleItemViewModel Selected { get; set; }
    public CategoryList()
    {
        Categories = new ObservableCollection<ComboBoxSampleItemViewModel>();

        var cat1 = new ComboBoxSampleItemViewModel() { Name = "Categorie 1" };
        var cat2 = new ComboBoxSampleItemViewModel() { Name = "Categorie 2" };
        var cat3 = new ComboBoxSampleItemViewModel() { Name = "Categorie 3" };
        var cat4 = new ComboBoxSampleItemViewModel() { Name = "Categorie 4" };

        Categories.Add(cat1);
        Categories.Add(cat2);
        Categories.Add(cat3);
        Categories.Add(cat4);

        this.Selected = cat3;
    }

    internal void SelectByName(string p)
    {
        this.Selected = this.Categories.Where(s => s.Name.Equals(p)).FirstOrDefault();
    }
} 
```

而这个 Item ViewModel

```
public class ComboBoxSampleItemViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    private string name;

    public string Name 
    { 
        get
        {
            return name;
        }
        set
        {
            name = value;
            NotifyPropertyChanged("Name");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-18T17:33:11.900

如果 Combobox 绑定到 View Model 的对象类，而`SelectionBoxItem`发送者对象（在`SelectionChanged`后面的代码中）没有该类型，则表示它仍在加载。

```
ComboBox combo = sender as ComboBox;
if (combo.SelectionBoxItem.GetType() == typeof(BindedClass))
{
            // Not loading
} 
```

# javascript - jQuery UI - 将 jQuery UI Datepicker 转换为 UNIX 时间

> ID：11062314
> 
> 赞同：9
> 
> 时间：2012-06-16T09:35:53.900
> 
> 标签：javascript, jquery-ui, datepicker, datetimepicker, unix-timestamp

我正在使用带有时间插件的 jQuery UI 日期选择器。这就是我在 datepicker 本身的页面上显示时间的方式：

```
21.06.2012 08:00 
```

我想在发送到后端之前将此时间转换为 UNIX 时间戳。我怎样才能做到这一点？我不需要在页面上显示 UNIX 时间，我只需要在发布前转换。我试过了：

```
var d = Date.parse(value_of_datepicker); 
```

但没有运气。似乎日期应该以另一种方式格式化。我也尝试了几个内置的日期选择器功能，但它们都设置了日期显示视图。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-16T10:08:24.770

如果你使用 Trent Richardson 的 jQuery timepicker，你可以这样做：`$("#your_datepicker").datetimepicker("getDate").getTime() / 1000`

[http://jsfiddle.net/d6Tky/](http://jsfiddle.net/d6Tky/)

请记住，如果未选择日期，此函数可能会返回 null。

# c# - 获取以@开头的单词，例如通过正则表达式和 javascript 提及的 facebook

> ID：11062317
> 
> 赞同：-1
> 
> 时间：2012-06-16T09:36:56.633
> 
> 标签：c#, javascript, regex

首先，我知道有很多关于这个案例的话题，但不像我想要的那样，我想得到像 Facebook 这样的词在评论中提到名字
这里是我的条件

1-我希望所有单词都以 @ char 开头

2-我想要孤独@char

3-我不想要任何包含“@”的单词，例如 any@hotmail.com

EX：“@this d@y @hmed @nd May@去玩了@g@arden”

我想要的结果是

{“@”、“@hmed”、“@nd”、“@”}

**请注意我想要的第二个条件** 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:04:22.297

正**则表达式**应该是`/(?:^|\s)(@[^@\s]*)(?=\s|$)/g`

[*测试：http: [//ideone.com/1LK80](http://ideone.com/1LK80)* ]

# scheme - 编写可移植方案代码。除了 R5RS 本身还有什么“标准”吗？

> ID：11062320
> 
> 赞同：14
> 
> 时间：2012-06-16T09:37:58.620
> 
> 标签：scheme

我正在学习计划，直到现在一直在使用诡计。我真的只是在学习一种自学函数式编程语言的方法，但我想发布一个开源项目以加强这项研究——还不确定是什么......我是一名网络开发人员，所以可能是网状的。

很明显，发布方案代码并不是一件容易的事，因为所有这些不同的实现，而且除了语言本身的核心 (R5RS) 之外没有真正的标准。例如，我几乎肯定需要在磁盘上和通过 TCP 套接字进行基本 IO，以及字符串操作，例如扫描/正则表达式，这似乎没有被 R5RS 覆盖，除非我没有看到它在文档中。似乎 Scheme 更像是一种“概念”而不是实用语言……这是一个公平的评估吗？如果我想学习一种更适合在开源项目中使用的函数式编程语言，也许我应该看看 Haskell 之类的东西？

实际上，当您想要发布一个开源项目时，不同的方案实现会带来多大的痛苦？我真的不喜欢在各种主流实现（Chicken、guile、MIT、DrRacket）下维护 5 个不同的函数来处理基本的事情，比如字符串操作。有多少人真正为跨实现兼容性编写方案，而不是与只存在于他们自己方案中的库函数紧密耦合？

我已经阅读了[http://www.ccs.neu.edu/home/dorai/scmxlate/scheme-boston/talk.html](http://www.ccs.neu.edu/home/dorai/scmxlate/scheme-boston/talk.html)，这并没有让我充满信心；）

编辑 | 让我们将“标准”重新定义为“普通”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-16T19:01:37.487

我相信**在 Scheme 中，可移植性是一件傻事**，因为 Scheme 实现的不同之处多于相似之处，并且没有其他实现试图模仿的单一实现（例如，与 Python 和 Ruby 不同）。

因此，Scheme 中的可移植性类似于使用软件渲染来编写游戏，“因为它位于 OpenGL 和 DirectX 之间的公共子集中”。换句话说，它是一个最小的公分母——它可以做到，但是您无法访问实现提供的许多功能。

出于这个原因，虽然 SRFI 通常具有可移植的参考实现（在可行的情况下），但其中一些伴随着注释，即高质量的 Scheme 实现应该定制库以使用特定于实现的特性，以便以最佳方式运行。

*   一个典型的例子是`case-lambda`（[SRFI 16](http://srfi.schemers.org/srfi-16/srfi-16.html)）；它可以被移植地实现，并且参考实现演示了它，但与内置的相比，它肯定不是最优的`case-lambda`，因为您必须在“用户”代码中实现函数调度。
*   另一个例子`stream-constant`来自[SRFI 41](http://srfi.schemers.org/srfi-41/srfi-41.html)。参考实现使用循环列表的 O(n) 模拟来实现可移植性，但任何体面的实现都应该调整该函数以使用真正的循环列表，以便它是 O(1)。^(†</sup>)

名单还在继续。Scheme 中的许多有用的东西是不可移植的——SRFI 有助于使更多的功能可移植，但 SRFI 不可能涵盖所有内容。如果您想有效地完成有用的工作，您很有可能必须使用非便携式功能。我认为，你能做的最好的事情就是编写一个外观来封装那些 SRFI 尚未涵盖的功能。

^(†</sup> 实际上[现在有一种方法可以`stream-constant`以 O(1) 的方式](http://srfi-email.schemers.org/srfi-41/msg/3066997)实现而不使用循环列表。便携和快速的胜利！)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-16T12:06:57.297

困难的问题。

大多数人决定务实。如果实现之间的可移植性很重要，他们会在标准 Scheme 中编写大部分程序，并将非标准部分隔离在（小型）库中。有多种方法可以准确地做到这一点。最近的一项努力是 SnowFort。

[http://snow.iro.umontreal.ca/](http://snow.iro.umontreal.ca/)

较早的努力是 SLIB。

[http://people.csail.mit.edu/jaffer/SLIB](http://people.csail.mit.edu/jaffer/SLIB)

如果您查找 - 或要求 - 正则表达式和词法分析器/解析器的库，您会很快找到一些。

由于 R5RS 的理念是只包含所有实现者都同意的语言特性，因此标准很小 - 但也非常稳定。

然而，对于“现实世界”编程，R5RS 可能不是最合适的。因此 R6RS（和 R7RS？）包含更多“真实世界”的库。

也就是说，如果您只需要可移植性，因为它似乎是正确的事情，那么如果您*真的*想付出努力，请仔细重新考虑。我只会在我最了解的实现上编写我的程序。然后如果有必要之后移植它。这通常比预期的要容易。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-16T13:16:37.323

我写了一个使用 Scheme 作为其实现语言的[博客。](http://programmingpraxis.com)因为我不想疏远任何特定 Scheme 实现的用户，所以我使用基于 R5RS 加上语法案例宏以及我的[标准前奏的 Scheme 的受限方言编写](http://programmingpraxis.com/standard-prelude). 对于我编写的算法程序，我认为这并没有过度限制，但您的需求可能会有所不同。如果您查看博客上的各种练习，您会发现我编写了自己的正则表达式匹配器，我已经完成了大量的字符串操作，并且我已经从互联网上抢走了文件wget（我使用 Chez Scheme——如果他们使用其他任何东西，用户必须提供他们自己的非便携式 shell 机制）；我什至通过编写 ANSI 终端序列完成了一些有限的图形工作。

我会有点不同意 Jens。我发现从一开始就更容易构建可移植性，而不是事后移植。我以前不这么想，但我过去三年的经验表明它是有效的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-10T03:27:10.977

值得指出的是，现代 Scheme 实现本身是相当可移植的。您通常只需携带适当的方案即可将整个程序移植到新环境。不过，这对库程序员没有多大帮助，而这正是最新的 Scheme 定义 R7RS-small 的用武之地。它尚未广泛实施，但它提供了比 R5RS 更大的通用核心。

# database - Codeigniter TankAuth：如何将 phpass 哈希便携式设置为 FALSE 的数据库移动到新服务器

> ID：11062324
> 
> 赞同：5
> 
> 时间：2012-06-16T09:38:48.533
> 
> 标签：database, codeigniter, passwords, tankauth, phpass

TankAuth 使用 PHPass 进行密码散列，便携模式默认设置为 FALSE，这让 PHPass 使用 bcript 代替，因为便携散列不会在其散列中存储盐。

但是，如果我们想将数据库移动到不同的服务器，我们需要在将记录添加到表之前将其设置为 TRUE，以避免以后重新生成密码。显然，保持可移植哈希为 TRUE 会使加密的密码非常不安全

有没有更好的解决方案使用 tank auth 对密码哈希进行 bcrypt 并且跨服务器轻松进行数据库迁移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:34:04.940

我认为你需要硬着头皮打开便携模式。不幸的是，正如@Cyber​​Junkie 提供的问题所述，这是必要的。

[便携式（PHPPass）密码哈希。我应该使用它们吗？](https://stackoverflow.com/questions/5343611/portable-phpass-password-hashes-should-i-use-them)

# php - 让我的介绍页面仅由用户或计算机显示一次

> ID：11062325
> 
> 赞同：0
> 
> 时间：2012-06-16T09:38:49.643
> 
> 标签：php, javascript

我有一个问题，我有一个 index.php 页面，它是我网站的介绍，当介绍开始和完成时，它会重定向到我的 home.php 页面，但我想让这个介绍页面只由用户出现一次或通过计算机，如果用户已经访问过介绍页面，他将被重定向到主页，而不会转到 index.php（介绍）页面。我怎样才能在php中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:42:36.840

```
index.php

if(isset($_COOKIE['visit'])){
header("Location:home.php");
}

Your Intro

setCookie("visit","1",time()+60*60*7*12); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:48:14.263

没有 100% 的方法可以做到这一点。您可以使用`$_SESSION`或`$_COOKIE`保存当前用户的一些数据（例如，他或她访问过该站点），但如果他在不同的浏览器中打开您的站点，他会再次看到介绍。用户还可以清除 cookie，这样他或她会再次看到介绍。

如果您的站点实现了会员资格，用户可以在其中保持登录状态，那么您可以将此信息存储在数据库（或其他数据源）中，因此用户将看不到介绍（除非他注销）。

使用 session 为当前用户存储一些信息的示例（它不需要会员资格或喜欢，它会起作用，因为每个访问您网站的用户都会保存数据）：

```
<?php
    // index.php
    // if you prefer to use cookies instead of sessions
    // then replace $_SESSION with $_COOKIE
    $hasVisited = ($_SESSION['hasVisited'] === true);
    if($hasVisited) {
        header("Location: home.php");
        die();
    }

    // here you show your intro

    // user has visited this site, so:
    $_SESSION['hasVisited'] = true;
?> 
```

cookie 和 session 之间的差异说明：[Cookies vs. Sessions](http://www.tuxradar.com/practicalphp/10/1/0)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:42:29.610

也许您可以尝试在用户第一次登陆主页时设置一个 cookie。这样，下次用户访问您的网站时，您可以在介绍播放之前查找 cookie。

[如何在php中设置cookie](http://www.w3schools.com/php/func_http_setcookie.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T09:40:28.167

您可以向用户发送一个 cookie，以便当他回来时您可以识别该 cookie。虽然设置 cookie 并不好，但用户可能会删除它。

# kohana - Kohana 3.2 Response::send_file 对我来说似乎坏了

> ID：11062327
> 
> 赞同：3
> 
> 时间：2012-06-16T09:39:24.963
> 
> 标签：kohana, kohana-3, kohana-3.2

我正在尝试将文件发送到浏览器进行下载，但没有`$this->response->send_file($file_path);`在控制器中使用。

我收到以下错误：

`ErrorException [ Warning ]: finfo::file() [<a href='finfo.file'>finfo.file</a>]: Empty filename or path`

$file_path 可以是绝对路径或相对路径，但我仍然得到同样的错误。在查看了此实现的 Kohana 代码后，我无法弄清楚它应该如何工作。

以下代码将显示基本文件名（例如，filename.ext）如何传递到 File::mime() - 这是错误的

[https://github.com/kohana/core/blob/3.2/develop/classes/kohana/response.php#L434-453](https://github.com/kohana/core/blob/3.2/develop/classes/kohana/response.php#L434-453)

```
// Get the complete file path
$filename = realpath($filename);

if (empty($download))
{
    // Use the file name as the download file name
    $download = pathinfo($filename, PATHINFO_BASENAME);
}

// Get the file size
$size = filesize($filename);

if ( ! isset($mime))
{
    // Get the mime type
    // HERE'S THE ISSUE!!!
    $mime = File::mime($download);
} 
```

[File::mime](https://github.com/kohana/core/blob/3.2/develop/classes/kohana/file.php#L24)期望文件路径是文件系统上的绝对路径或相对路径，但 $download 只会是基本文件名（例如 filename.ext）；

现在唯一对我有用的解决方案是更改 send_file() 方法“classes/kohana/response.php”中的代码

从`File::mime($download);` 到`$mime = File::mime($filename);`。

Kohana 3.3 已将此实现更改为：

`$mime = File::mime_by_ext(pathinfo($download, PATHINFO_EXTENSION));`

如果没有此修复，基本上 send_file 在 3.2 中不起作用。这是一个错误，还是我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:05:40.830

我正在使用并链接到 3.2 开发分支。3.2 master 分支中不存在此问题。

对于那些感兴趣的人，请关注有关此拉取请求的讨论以查看最终修复：[https ://github.com/kohana/core/pull/183](https://github.com/kohana/core/pull/183)

# mysql - MySQL 将 Unicode 解码为 UTF-8 函数

> ID：11062330
> 
> 赞同：2
> 
> 时间：2012-06-16T09:39:46.123
> 
> 标签：mysql, sql, unicode, utf-8

我想在插入表时将 Unicode 字符串解码为 UTF-8。这是我所拥有的：

```
('\u0645\u064e\u062b\u0652\u0646\u064e\u0649 \u00a0\u062c \u0645\u064e\u062b\u064e\u0627\u0646\u064d') 
```

所以我希望将这些值转换为 UTF-8，例如：

```
INSERT INTO `nouns`(`NOUNID`, `WORDID`, `SINGULAR`, `PLURAL`) VALUES (781, 3188, '\u0646\u064e\u062c\u0652\u0645', ('\u0646\u064e\u062c\u0652\u0645')) 
```

我正在将我的 h2 数据库迁移到 MySQL，所以我在编写 h2 db 脚本时得到了这个：

```
INSERT INTO PUBLIC.NOUNS(NOUNID, WORDID, SINGULAR, PLURAL) VALUES
  (1, 5, STRINGDECODE('\u0623\u0628\u0651 '), STRINGDECODE
  ('\u0623\u0624\u064f\u0628\u0651')),
  (2, 9, STRINGDECODE('\u0623\u064e\u0628\u0627\u0628'), ''), 
```

* * *

基本上这些 \u0623\u0632\u0651 是 unicode 表示的阿拉伯字符，我想将它们转换为真正的阿拉伯字符，以便像这样存储在数据库中。我正在尝试转换功能，但因为我是 mysql 新手，所以我无法做到这一点：

```
SELECT CONVERT(_ucs2'\u0623' USING utf8); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T19:43:07.537

MySQL 中没有内置函数来解码 unicode 转义，但您可以创建一个；见下文：

请注意，反斜杠是 MySQL 中的转义字符，因此在编写 SQL 时需要将它们加倍：`'\\u0623\\u064e\\u0628\\u0627\\u0628'`

```
DELIMITER //

CREATE FUNCTION STRINGDECODE(str TEXT CHARSET utf8)
RETURNS text CHARSET utf8 DETERMINISTIC
BEGIN
declare pos int;
declare escape char(6) charset utf8;
declare unescape char(3) charset utf8;
set pos = locate('\\u', str);
while pos > 0 do
    set escape = substring(str, pos, 6);
    set unescape = char(conv(substring(escape,3),16,10) using ucs2);
    set str = replace(str, escape, unescape);
    set pos = locate('\\u', str, pos+1);
end while;
return str;
END//

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-22T21:12:53.133

受到@Joni 回答的启发，以防万一您不想使用函数，我将它们放在一个查询中。缺点是您必须多次执行查询，因为每次执行时只有一个“字符”逐行被转换。

```
UPDATE table_name 
SET content = REPLACE(
  content,
  SUBSTRING(content, locate('\\u', content), 6),
  CHAR(CONV(SUBSTRING(content, LOCATE('\\u', content) + 2, 4), 16, 10)  using 
  ucs2)) 
WHERE content like '%\\u0%'; 
```

# r - 删除不同列中具有重复值的行

> ID：11062331
> 
> 赞同：1
> 
> 时间：2012-06-16T09:39:49.587
> 
> 标签：r, dataframe

我在一个数据框中有两列，并且我已经能够删除所有重复`unique( )`的行 - 有效。

但是现在我想删除行是值是相同的，不管它们在哪一列。就像......

```
data1    data2
data3    data2
data2    data1
data2    data3 
```

应该简化为

```
data1    data2
data3    data2 
```

因为第 3 行和第 4 行与第 1 行和第 2 行相同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:34:45.850

首先按列对每一行进行排序（使用`apply`and `sort`），然后使用`unique`：

```
dat <- read.table(text="
data1    data2
data3    data2
data2    data1
data2    data3")

unique(t(apply(dat, 1, sort)))
     [,1]    [,2]   
[1,] "data1" "data2"
[2,] "data2" "data3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:45:07.800

我将使用您粘贴在一起的排序列创建一个新列，然后使用 unique() 。

```
# create some dummy data
adf <- data.frame(colA=c('data1', 'data3', 'data2', 'data2'),
       colB=c('data2', 'data2', 'data1', 'data3'), stringsAsFactors=FALSE)

# function to fix up this data...
# can't see a way of avoiding the loop at the moment, but I'm sure somebody will!
fixit <- function(adf) {
  nc <- vector(mode='character', length=nrow(adf))
  for (i in 1:nrow(adf)) {
    nc[i] <- paste(sort(c(adf[i,1], adf[i,2])), collapse='')
  } 
  adf[!duplicated(nc),]
} 
fixit(adf) 
```

在大 data.frame 上循环会很慢，但可以通过使用来加速

```
library(compiler)
faster.fixit <- cmpfun(fixit)
faster.fixit(adf) 
```

我知道这有点离题，但有趣的是，当我对这个循环函数进行基准测试时，字节编译的版本只快了大约 5%

```
# create a bigger test data.frame
N <- 10
adf.bigger <- data.frame(colA=rep(adf$colA, N), colB=rep(adf$colB, N),
               stringsAsFactors=FALSE)

N <- 1000
adf.biggest <- data.frame(colA=rep(adf$colA, N), colB=rep(adf$colB, N),
               stringsAsFactors=FALSE)

library(microbenchmark)
microbenchmark(fixit(adf), faster.fixit(adf), times=1000L)
microbenchmark(fixit(adf.bigger), faster.fixit(adf.bigger), times=1000L)
microbenchmark(fixit(adf.biggest), faster.fixit(adf.biggest), times=100L) 
```

# python - 在 VC++/MFC 应用程序中嵌入 Python

> ID：11062333
> 
> 赞同：0
> 
> 时间：2012-06-16T09:39:53.223
> 
> 标签：python, visual-c++

是否可以在`VC++/MFC`应用程序中嵌入 Python。如果是的话，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:49:11.780

是的，您可以将 python 嵌入到任何可以从 C 库调用函数的应用程序中。您使用 MFC 的事实对此并不重要。

这方面的官方 python 文档非常好：

*   [http://docs.python.org/extending/embedding.html](http://docs.python.org/extending/embedding.html)
*   [http://docs.python.org/c-api/index.html](http://docs.python.org/c-api/index.html)

关于如何做到这一点：基本上你只需调用`Py_Initialize();`初始化 Python，然后用它做任何你想做的事情。`Py_Finalize();`在您的应用程序退出之前，调用清理内容是个好主意。

# ubuntu - 从战争文件更新 Jenkins

> ID：11062335
> 
> 赞同：105
> 
> 时间：2012-06-16T09:39:54.940
> 
> 标签：ubuntu, jenkins, war

我有一台装有 Ubuntu 12.04 的机器并安装了 Jenkins 版本。1.424.6 使用 apt-get 基于*[this guide](http://www.mabishu.com/blog/2012/04/17/setting-up-jenkins-in-ubuntu-precise-12-04-for-php-projects/)*，但有一个新版本：

```
New version of Jenkins (1.447.2) is available for download (changelog). 
```

如果我按下下载，我会得到一个 jenkins.war 文件......但是如何使用它来升级我当前的安装？还是在 apt 存储库更新之前这是不可能的？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-06-16T09:43:37.407

您可以用新文件覆盖现有`jenkins.war`文件，然后重新启动 Jenkins。

该文件通常位于`/usr/share/jenkins`.

如果您的系统不是这种情况，则在 中`Manage Jenkins -> System Information`，它将显示`.war`文件的路径`executable-war`。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2017-10-13T15:35:42.923

```
#on ubuntu, in /usr/share/jenkins:

sudo service jenkins stop
sudo mv jenkins.war jenkins.war.old
sudo wget https://updates.jenkins-ci.org/latest/jenkins.war
sudo service jenkins start 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-06-16T19:27:20.157

如果您已经通过 apt-get 安装了 Jenkins，您还应该通过 apt-get 更新 Jenkins 以避免将来出现问题。更新应该通过“apt-get update”然后“apt-get upgrade”进行。

详情请访问以下网址：

[https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-03-17T14:27:35.913

```
apt-get 更新
apt-get 升级

```

到目前为止，在 linux 上升级最简单的方法，每次都像魅力一样工作。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-11-18T09:17:18.453

当您打开 Jenkins 面板时，它将显示最新版本的可用包。您可以通过服务器中的*wget*命令下载它。下载最新的软件包后，您应该将 .war 备份文件。

**例如：wget [http://updates.jenkins-ci.org/download/war/2.205/jenkins.war](http://updates.jenkins-ci.org/download/war/2.205/jenkins.war)**

Ubuntu 的 Jenkins 战争文件路径 - /usr/share/jenkins/

centos 的 Jenkins 战争文件路径 - /usr/lib/jenkins/

备份后覆盖war文件并重新启动jenkins服务。

Ubuntu - 服务 jenkins 重启，centos - systemctl 重启 jenkins.service

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-15T17:48:18.750

虽然我不认为这是对 OP 问题的有效答案，但我仍然强调在 Ubuntu 上部署 Jenkins（如果不是所有库/包/软件）的最佳方法是利用 aptitude（或 apt-得到）管理系统。

它记录在这里：[https](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu) ://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu （请注意，如果您想使用 LTS 构建，请点击此 repo [http://pkg。 jenkins-ci.org/debian-stable/](http://pkg.jenkins-ci.org/debian-stable/)）

因此，如果您有任何机会确实使用了这种方法，您只需做一个`apt-get upgrade jenkins`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-28T19:50:47.613

我使用这个 groovy 脚本来下载新的战争文件

```
import java.util.concurrent.atomic.AtomicInteger

class ThreadHelper{
    static done = false;
    static starttime = System.currentTimeMillis()
    static synchronized printx (message) {    printf ("%5s seconds: %20s",(System.currentTimeMillis()-starttime)/1000.0 , message); println("") }
    def download(address)
    {
    def filename = new File(System.getenv()['CI_HOME'] + '/' + address.tokenize("/")[-1])
    println(filename.getCanonicalPath())
    def file = new FileOutputStream(filename)
    def out = new BufferedOutputStream(file)
    out << new URL(address).openStream()
    out.close()
    done=true;
    }

}

println("executing from ... "+ new File(".").getCanonicalPath())

def counter = new AtomicInteger();
    th = Thread.start {
    while(!ThreadHelper.done) {
    sleep 1000
    counter.incrementAndGet()
    print '.'
    }
}

th2 = Thread.start { new ThreadHelper().download("http://mirrors.jenkins-ci.org/war/latest/jenkins.war") }
th.join()
th2.join()

ThreadHelper.printx('done') 
```

另一个脚本关闭tomcat - 复制战争并重新启动它

我们将它托管在 windows 2008 和 tomcat 上，我使用 sc query、sc config、sc stop、sc start 来管理 windows 服务

```
 set warname=jenkins

if '%name%' == 'trak' set warname=trak

pushd .
if '%name%'=='' goto badname
if '%warname%'=='' goto badname

if '%ci_home%'=='' goto badcihome

REM =====================================================
REM stop windows service
sc stop %name%

REM sleep for 5 seconds see http:\\stackoverflow.com\questions\1672338\how-to-sleep-for-5-seconds-in-windowss-command-prompt-or-dos
ping 1.1.1.1 -n 1 -w 3000 > nul

rem replace forward slash with backward slash
set tomcat_dir=%ci_home:/=\%\instances\tomcat7-%name%

REM Create sub directory called bak-yymmdd-hhmmss
REM where yymmdd-hhmmss is a date-time stamp like 120601-142907

set hh=%time:~0,2%

REM Since there is no leading zero for times before 10 am, have to put in
REM a zero when this is run before 10 am.

if "%time:~0,1%"==" " set hh=0%hh:~1,1%

set yymmdd_hhmmss=%date:~12,2%%date:~4,2%%date:~7,2%-%hh%%time:~3,2%%time:~6,2%

set backupdir=bak-%yymmdd_hhmmss%

REM =====================================================
md %tomcat_dir%\logs\%backupdir%

cd %tomcat_dir%\logs

dir bak*
echo "nothing-to-log" >> force.log

REM move command will fail if there is nothing to move hence the force log statement above

call move *.* %backupdir%

REM =====================================================
rmdir %tomcat_dir%\webapps\%name% /q/s

echo f|xcopy %ci_home%\%warname%.war %tomcat_dir%\webapps\%name%.war /y

REM TODO===== something about jenkins plugins

REM =====================================================
cd "%tomcat_dir%\bin"
call catalina version

echo =====================================================
echo ====== removing %name%
call service remove %name%

echo =====================================================
echo ====== installing %name%
call service install %name%

echo on

REM setting service to start automatically, note that space before the word auto IS REQUIRED
sc config %name% start= auto

REM =====================================================
sc start %name%

popd

exit 0

goto done

:badname
echo 'name required - this will be used as windows service name as well'
pause
exit 1

:badcihome
echo 'CI home env var required - ci_home'
pause
exit 1

:done 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-09-05T14:44:16.530

我们使用以下命令从 .war 文件运行 jenkins。

```
java -Xmx2500M -jar jenkins.war --httpPort=3333 --prefix=/jenkins 
```

您甚至可以从 ~/Downloads 目录运行命令

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-09-10T10:02:43.253

```
https://wiki.jenkins.io/display/JENKINS/Installing+Jenkins+on+Ubuntu

Once installed like this, you can update to the later version of Jenkins (when it comes out) by running the following commands:
-------
sudo apt-get update
sudo apt-get install jenkins
-------
(aptitude or apt-get doesn't make any difference.)
What does this package do?
Jenkins will be launched as a daemon up on start. See /etc/init.d/jenkins for more details.
The 'jenkins' user is created to run this service.
Log file will be placed in /var/log/jenkins/jenkins.log. Check this file if you are troubleshooting Jenkins.
/etc/default/jenkins will capture configuration parameters for the launch like e.g JENKINS_HOME
By default, Jenkins listen on port 8080\. Access this port with your browser to start configuration. 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-12-13T15:47:58.303

我的安装在 /usr/share/jenkins 我认为它是通过 apt-get 安装的，所以可能也想在那里检查。

Ubuntu 12.04.1

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-04-05T16:53:20.533

我不想安装 apt-get install 方法中捆绑的 x11-common 和其他组件，所以我只是下载了 .war 文件并运行了 Francois 提到的命令。效果很好，但是您必须使用这种方法编写自己的守护程序脚本。完整的细节在这里：[http ://strem.in/stream/9488/Using-the-war-file-for-jenkins-ci](http://strem.in/stream/9488/Using-the-war-file-for-jenkins-ci)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-09-17T09:27:12.370

这可以通过两种方式完成

1.  直接下载 .war 文件并将其替换为现有文件。
2.  直接从 ubuntu 更新

**第一种方法**

如果您在标准路径中找不到 jenkins war 文件，您可以转到管理 Jenkins → 系统信息，它将显示 .war 文件的路径。

Jenkins war 文件在 ubuntu 服务器上的常见位置是：

```
/usr/share/jenkins 
```

跳转到詹金斯主目录

```
cd /usr/share/jenkins 
```

停止詹金斯服务器

```
sudo service jenkins stop 
```

移动现有的詹金斯战争文件

```
sudo mv jenkins.war jenkins.war.old 
```

下载最新的詹金斯战争文件

```
sudo wget https://updates.jenkins-ci.org/latest/jenkins.war 
```

启动 Jenkins 服务器

```
sudo service jenkins start 
```

现在一切都应该很好。

**故障排除步骤**

如果您使用 root 权限运行 jenkins（您不应该这样做），您需要更改 jenkins.war 权限。

```
$ sudo chown root:root jenkins.war 
```

您可以选择使用以下命令重新启动 jenkins 服务器：

$ sudo /etc/init.d/jenkins 重启

**第二种方法**

在 ubuntu 上，您还可以尝试以下两个命令来更新所有内容：

```
$ sudo apt-get update
$ sudo apt-get install jenkins --fix-missing 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-08-17T12:53:24.660

要升级 Jenkins WAR 文件，请按照以下步骤操作：

*   使用命令停止 Jenkins 服务器：`systemctl stop jenkins`
*   去詹金斯战争地点：例如：`/usr/lib/jenkins`
*   从 jenkins.war 备份：`mv jenkins.war jenkins.war_bkp`
*   使用 wget 或 curl 命令下载 Jenkins： `wget http://updates.jenkinsci.org/download/war/(version)/jenkins.war`
*   使用命令启动 Jenkins 服务器：`systemctl start jenkins`
*   使用命令检查 Jenkins 服务器状态：`systemctl status jenkin`

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2021-04-02T16:42:29.467

正如 Vasan 所说，到目前为止，在 ubuntu 中升级 jenkins 的最简单方法。

apt-get 更新 apt-get 升级

# c# - C# 创建高分文本文件并对结果重新排序

> ID：11062338
> 
> 赞同：0
> 
> 时间：2012-06-16T09:40:22.810
> 
> 标签：c#

我正在尝试创建一个包含玩家游戏分数的文本文件。文本文件的结构应遵循以下顺序：数字。姓名分数（例如 1\. Helen 2500）。我尝试拆分该行，以便可以将数据引入到名称和分数的特定数组中，以便我可以比较结果并重新排序它们（数字保持不变：1、2、3 等）但它没有不行。我没有收到错误，但由于数组 v[] 的使用不正确，构建在此函数处停止。你建议我怎么做才能让它发挥作用？

[代码]

```
private void New_Score(int score)
        {
            int k=0, i;
            char[] sep = new char[] { ' ', '\n', '.' };
            string line, aux1, aux2;
            string n=null, s=null;
            n = textBox1.Text;
            s = Convert.ToString(score);
            string[] part=null, nr=null, name=null, result=null;
            file_path = @"D:\Visual Studio 2005\Projects\WindowsApplication2\WindowsApplication2\Resources\HighScore.txt";
            StreamReader f = new StreamReader(file_path);

            while ((line = f.ReadLine()) != null)
            {
                part = null;
                v = null;
                part = line.Split(sep);
                i=0;
                foreach(string c in part)
                {
                    v[i]= c;
                    i++;
                }
                nr[k] = v[0];
                name[k] = v[1];
                result[k] = v[2];
            }

            for (i = 0; i < k; i++)
                if (string.CompareOrdinal(s,result[i]) == 1)
                {
                    aux1 = s;
                    s = result[i];
                    result[i] = aux1;

                    aux2 = n;
                    n = name[i];
                    name[i] = aux2;
                }

            for (i = 0; i < k; i++)
            {
                line = nr[i] + ". " + name[i] + " " + result[i] + "\n";
                File.WriteAllText(file_path, line);
            }
        } 
```

[/代码]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T09:51:50.173

我个人会更多地抽象代码，但如果您不想添加更多类或真的在方法之外做任何事情，这就是我要做的：

*   将高分解析为`List<Tuple<int, string, int>>`
*   添加新分数
*   使用`list.Sort()`LINQ 或 LINQ 对列表进行排序
*   将列表写入文件。

它比您在问题中的内容更干净，更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T10:09:33.860

尽管这完全违背了我强烈支持的[关于钓鱼和吃饭的说法](http://en.wiktionary.org/wiki/give_a_man_a_fish_and_you_feed_him_for_a_day._Teach_a_man_to_fish_and_you_feed_him_for_a_lifetime)，但我冒昧地通过完全重写你的代码来进行一些改进。

首先，我摆脱了将播放器的位置存储在文本文件中。这效率不高，因为当您添加得分最高的玩家（将他渲染为 #1）时，您必须重新编号当时文件中存在的其他所有人。

所以生成的文件如下所示：

```
Foo 123 
Qux 714 
Bar 456 
Baz 999 
```

该`main()`方法如下所示：

```
var scores = ReadScoresFromFile("Highscores.txt");

scores.ForEach(s => Console.WriteLine(s));

Console.ReadKey(); 
```

然后是`Highscore`课堂：

```
class Highscore
{
    public String Name { get; set; }
    public int Position { get; set; }
    public int Score { get; set; }

    public Highscore(String data)
    {
        var d = data.Split(' ');

        if (String.IsNullOrEmpty(data) || d.Length < 2)
            throw new ArgumentException("Invalid high score string", "data");

        this.Name = d[0];

        int num;
        if (int.TryParse(d[1], out num))
        {
            this.Score = num;
        }
        else
        {
            throw new ArgumentException("Invalid score", "data");
        }
    }

    public override string ToString()
    {
        return String.Format("{0}. {1}: {2}", this.Position, this.Name, this.Score);
    }
} 
```

您会看到一个 Highscore 根据它提供的 Highscore 文件中的行填充自己。我使用此方法填充分数列表：

```
static List<Highscore> ReadScoresFromFile(String path)
{
    var scores = new List<Highscore>();

    using (StreamReader reader = new StreamReader(path))
    {
        String line;
        while (!reader.EndOfStream)
        {
            line = reader.ReadLine();
            try
            {
                scores.Add(new Highscore(line));
            }
            catch (ArgumentException ex)
            {
                Console.WriteLine("Invalid score at line \"{0}\": {1}", line, ex);
            }
        }
    }

    return SortAndPositionHighscores(scores);
} 
```

最后是一些排序和位置分配：

```
static List<Highscore> SortAndPositionHighscores(List<Highscore> scores)
{
    scores = scores.OrderByDescending(s => s.Score).ToList();

    int pos = 1;

    scores.ForEach(s => s.Position = pos++);

    return scores.ToList();
} 
```

导致：

```
1\. Baz: 999
2\. Qux: 714
3\. Bar: 456
4\. Foo: 123 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T10:02:52.240

没有理由存储号码，行位置可以用于该目的。更好的方法是将带有分数对象的 List 序列化为例如 XML（如果您想保留人类可读的分数文件），以避免行解析。但是，如果您想存储为纯文本，这是一个简单的示例：

```
private void New_Score(int score, string name)
{
  string filename = "scores.txt";
  List<string> scoreList;
  if (File.Exists(filename))
    scoreList = File.ReadAllLines(filename).ToList();
  else
    scoreList = new List<string>();
  scoreList.Add(name + " " + score.ToString());
  var sortedScoreList = scoreList.OrderByDescending(ss => int.Parse(ss.Substring(ss.LastIndexOf(" ") + 1)));
  File.WriteAllLines(filename, sortedScoreList.ToArray());
} 
```

稍后在显示结果时在前面添加订单号，如下所示：

```
 int xx = 1;
  List<string> scoreList = File.ReadAllLines(filename).ToList();
  foreach (string oneScore in scoreList)
  {
    Console.WriteLine(xx.ToString() + ". " + oneScore);
    xx++;
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T10:02:35.080

似乎是一种存储简单高分列表的复杂方法。你为什么不试试下面的。

定义一个简单的对象来保存玩家的分数。

```
[Serializable]
public class HighScore
{
    public string PlayerName { get; set; }

    public int Score { get; set; }
} 
```

确保使用[[Serializable]](http://msdn.microsoft.com/en-us/library/system.serializableattribute.aspx)属性对其进行标记。

让我们快速为几个玩家创建一个高分列表。

```
var highScores = new List<HighScore>()
{
    new HighScore { PlayerName = "Helen", Score = 1000 },
    new HighScore { PlayerName = "Christophe", Score = 2000 },
    new HighScore { PlayerName = "Ruben", Score = 3000 },
    new HighScore { PlayerName = "John", Score = 4000 },
    new HighScore { PlayerName = "The Last Starfighter", Score = 5000 }
}; 
```

现在您可以使用[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)序列化分数并将它们保存到本地文件。

```
using (var fileStream = new FileStream(@"C:\temp\scores.dat", FileMode.Create, FileAccess.Write))
{
    var formatter = new BinaryFormatter();
    formatter.Serialize(fileStream, highScores);
} 
```

稍后您可以以类似的方式从此文件中加载高分。

```
using (var fileStream = new FileStream(@"C:\temp\scores.dat", FileMode.Open, FileAccess.Read))
{
    var formatter = new BinaryFormatter();
    highScores = (List<HighScore>) formatter.Deserialize(fileStream);
} 
```

如果要对它们进行排序，可以在 HighScore 类型上实现[IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)接口。

```
[Serializable]
public class HighScore : IComparable
{
    //...

    public int CompareTo(object obj)
    {
        var otherScore = (HighScore) obj;
        if (Score == otherScore.Score)            
            return 0;            

        if (Score < otherScore.Score)            
            return 1;            

        return -1;
    }
} 
```

现在您可以在您的通用 List 集合上调用 Sort(...) 。

```
highScores.Sort(); 
```

瞧，分数按降序排序。

```
foreach(var score in highScores)
{
    Console.WriteLine(String.Format("{0}: {1} points", score.PlayerName, score.Score));
} 
```

或者更简单，只需使用 LINQ 对高分进行排序。

```
var sortedScores = highScores.OrderByDescending(s => s.Score).ToList(); 
```

# javascript - 在 Sharepoint 2010 Webpart 中从 javascript 调用 C# 方法

> ID：11062340
> 
> 赞同：0
> 
> 时间：2012-06-16T09:40:23.623
> 
> 标签：javascript, sharepoint

我正在尝试从 javascript 调用 c# 函数，我尝试过的代码如下。

C# 代码

```
[System.Web.Services.WebMethod]
    public void myFun()
    {
        Response.Redirect("http://google.com");
    } 
```

在javascript中，我尝试了以下两个代码

```
function CallMe(src, dest) {

    //First code i have tried

    //var ctrl = document.getElementById(src);
    // call server side method
    //PageMethods.myFun(CallSuccess, CallFailed, dest);

    //Second code i have tried
    $.ajax({ type: "POST",
        url: myFun, contentType: "application/json; charset=utf-8",
        //data: "{passedVal:" + JSON.stringify(clientRequest) + "}", dataType: "json",
        success: function (result, status) {
            alert("success");
        },
        error: function (xhr, status, error) {
            alert("ERROR");
        }

    });
}

function CallSuccess(res, destCtrl) {
    alert("success");
}

function CallFailed(res, destCtrl) {
    alert("fail");
} 
```

但两者都没有醒来。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:22:16.997

“myFun”是一个WS的函数吗？如果是，在url参数中你需要在WS上写完整的函数url，而不仅仅是它的名字。

希望这能解决问题。

# php - 在php中使用wget下载

> ID：11062346
> 
> 赞同：0
> 
> 时间：2012-06-16T09:41:16.607
> 
> 标签：php, linux, wget

我在 php 脚本中使用 wget 从用户提交的 url 下载图像。在实际下载图像并将下载大小限制为 1mb 之前，我有什么方法可以确定图像的大小吗？我还可以检查网址是否仅指向图像而不是整个网站而不下载？

我不想最终用恶意软件填充我的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:49:38.417

在加载之前，您可以检查标题（尽管您必须下载它们）。我使用 curl - 而不是 wget。这是一个例子：

```
   $ curl --head http://img.yandex.net/i/www/logo.png

   HTTP/1.1 200 正常
   服务器：nginx
   日期：2012 年 6 月 16 日星期六 09:46:36 GMT
   内容类型：图片/png
   内容长度：3729
   最后修改时间：2010 年 4 月 26 日星期一 08:00:35 GMT
   连接：保持活动
   到期时间：格林威治标准时间 2037 年 12 月 31 日星期四 23:55:55
   缓存控制：max-age=315360000
   接受范围：字节

```

Content-Type 和 Content-Length 通常应该表示图片没问题

# javascript - 如何在表格单元格中添加图像

> ID：11062349
> 
> 赞同：1
> 
> 时间：2012-06-16T09:41:38.260
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-mobile

您好我想根据表格中的条件在表格单元格中添加图像。我正在使用如下动态表：

```
$.get('http://myDomain.com/RIA/topIndiaDetails.asp', function(data)
{    
    console.log("####"+data);

    var up = new Image();
    var down = new Image();

    up.src = "../../jquery.mobile/images/up.png";
    down.src = "../../jquery.mobile/images/down.png"

    substr = data.split('$');

    //alert(substr.length);
    //var theader = '<table border="1">\n';
    //<table id="auditOverview" border="1">
    var theader = '<table border="1" id=\"tableId\">\n';
    var tbody = '';

    for (var out = 1;out<substr.length-1;out++)
    {
        //alert(substr[out]);
        tbody += '<tr>';
        var pra = substr[out].split('|^');
        //alert('pra.length is: '+pra.length);

        for (var i=0;i<pra.length-1;i++)
        {
            tbody += '<td>';

            if (pra[i]=="Red")
            {
                pra[i].append("<img id='theImg' src='../../jquery.mobile/images/down.png'/>");
            }
            else if (pra[i]=="Green")
            {
                pra[i].append("<img id='theImg' src='../../jquery.mobile/images/up.png'/>");
            }
            tbody += pra[i];    
            tbody += '</td>'  
        }
        tbody += '</tr>\n';
    }       
    var tfooter = '</table>';
    document.getElementById('wrapper').innerHTML = theader + tbody + tfooter;       

}); 
```

现在我正在检查条件，因为`if (pra[i]=="Green")`我想在插入“绿色”字符串的单元格中添加图像，对于红色字符串也是如此。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:44:46.243

代替 ：

```
pra[i].append("<img id='theImg' src='../../jquery.mobile/images/up.png'/>"); 
```

做

```
pra[i] = "<img id='theImg' src='../../jquery.mobile/images/up.png'/>"; 
```

# javascript - 用于理解源代码的 JavaScript 调试器

> ID：11062350
> 
> 赞同：0
> 
> 时间：2012-06-16T09:41:39.943
> 
> 标签：javascript

## 语境

我试图了解一个庞大的、毛茸茸的 JavaScript 库的内部结构。

我已经有了未缩小的版本。

JavaScript 的动态性让我很难通过阅读代码来猜测发生了什么。

我想要 gdb 之类的东西……我可以在其中“逐步”通过每个单独的 JavaScript 函数/代码行。

## 问题：

我应该使用什么浏览器（Safari？Firefox？Chrome？），以及使用什么插件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:43:20.860

使用[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)。包括调试器和分析器。

当您只想知道对象内部的内容时，请使用 console.log(obj) ：您将在属性树中看到它的内容。由于工具很多，我建议您完全阅读官方文档：正确使用它们确实会对您的工作效率产生*很大*影响。

现在在 Firefox 中出现了一个类似的工具（您之前必须使用 Firebug），但 Chrome 使用得更多，部分原因是其更强大的 js 引擎（V8）。

IE 开始包含这样的工具集，但现在使用起来真的很糟糕而且很痛苦（我想这会改变）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:47:53.893

如今，每个现代浏览器中都有一个开发人员工具。在浏览器窗口上按`F12`OR`ctrl+shift+k`来获得一个。

您可以设置断点并使用即时控制台来分析代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:45:08.913

你可以得到Firefox 的[FireBug](http://getfirebug.com/javascript)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T09:54:41.310

对于调试，我会先使用 Firefox 的开发者工具->错误控制台来检查错误。是的，我使用 firebug 进行更高级的调试。但是我通过查看错误控制台解决了我的大部分问题。

“简单是终极的复杂性。” ——列奥纳多·达·芬奇

# ruby-on-rails - 为什么唯一性记录的唯一性验证会失败？

> ID：11062354
> 
> 赞同：2
> 
> 时间：2012-06-16T09:42:01.420
> 
> 标签：ruby-on-rails

我正在使用初始数据填充 Rails 3.2 应用程序。我有一个 Country 和 State 模型。在我的状态模型中

```
 validates :country_id,
    presence: true

  validates :name,
    presence: true,
    uniqueness: {
      scope: :country_id
    } 
```

当我尝试创建一个状态时，我得到了

```
State Exists (0.9ms)  SELECT 1 FROM "states" WHERE ("states"."name" = 'my-test-state' AND "states"."country_id" = 220) LIMIT 1
  Country Load (0.6ms)  SELECT "countries".* FROM "countries" WHERE "countries"."id" = 220 LIMIT 1
   (0.6ms)  ROLLBACK 
```

问题是，State 模型中只有 4 条记录，没有一条与我试图创建的唯一一条相同。这绝对是独一无二的记录。

为什么验证会失败？我的语法对于验证两列是否正确？（姓名 + country_id）

谢谢

# actionscript - actionscript 3，多次补间完成后的动作

> ID：11062355
> 
> 赞同：1
> 
> 时间：2012-06-16T09:42:06.967
> 
> 标签：actionscript

我是游戏开发的新手，现在我正在使用射击游戏来学习。我有个问题，

在我的游戏中，我创建了三个补间动画：

```
var myTween:Tween = new Tween(this, "scaleX", Back.easeIn, 1.2, 0, 10);
var myTween2:Tween = new Tween(this, "scaleY", Back.easeIn, 1.2, 0, 10);
var myTween3:Tween = new Tween(this, "alpha", None.easeIn, 1, 0, 10); 
```

这个补间将在敌人的生命值变为零后发生，我的意图是在动画之后，剪辑将从舞台上移除。

我的问题是，有没有办法知道所有这些补间已经完成？我尝试为每个 tween 应用 TweenEvent.MOTION_FINISH 事件，但如果我这样做，我必须创建三个 listeners（如果我想创建十个 tween，这将是有问题的）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T21:11:25.747

**Greensock 的 TweenLite 和 TimelineLite 为 +1。**

使补间变得更干净、更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:56:01.130

由于所有补间都运行相同的持续时间，您是否可以不只是将您的侦听器添加到最后一个补间，并且当处理程序执行时您会知道它们都已完成？

或者，您可以执行以下操作：

```
import fl.transitions.Tween;
import fl.transitions.TweenEvent;
import fl.motion.easing.Back;
import fl.transitions.easing.None;

// Populate an array with the tweens
var tweens:Array = [];
tweens.push(new Tween(this, "scaleX", Back.easeIn, 1.2, 0, 10));
tweens.push(new Tween(this, "scaleY", Back.easeIn, 1.2, 0, 10));
tweens.push(new Tween(this, "alpha", None.easeIn, 1, 0, 10));

// Finished tweens count
var finishedCount:int = 0;

// Loop through all the tweens and add a handler for the motion finished event
for (var i:int = 0; i < tweens.length; i ++)
{
    // Each of the tweens motion finished event can be assigned to the same handler
    Tween(tweens[i]).addEventListener(TweenEvent.MOTION_FINISH, motionFinishedHandler);
}

function motionFinishedHandler(e:TweenEvent):void
{
    // Good practice to remove the event listener when it is no longer needed
    e.target.removeEventListener(TweenEvent.MOTION_FINISH, motionFinishedHandler);

    // Increment the count and test whether it equals the number of tweens
    if (++ finishedCount == tweens.length)
        trace("Finished");
} 
```

您可能还想考虑[Greensock 的 TweenLite](http://www.greensock.com/tweenlite/)，它几乎是 Flash 中动画对象的标准，它允许您在一次调用中对同一对象的多个属性进行补间。

# extjs - 将滑块值显示为鼠标悬停的提示

> ID：11062357
> 
> 赞同：1
> 
> 时间：2012-06-16T09:42:20.250
> 
> 标签：extjs, extjs4, slider

如何在鼠标悬停时将 ExtJs4 滑块的值显示为工具提示。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-04T12:36:59.667

哇9年7个月后...

您正在寻找 reversePixelValue

```
slider.el.on('mousemove', function (event,element) {
            var xy = event.getXY();
                trackPoint = slider.getTrackpoint(event.getXY()),
                value = Ext.util.Format.round(slider.reversePixelValue(trackPoint), me.decimalPrecision),
                pd = Ext.Date.parse(value, 'U'),
                fd = Ext.Date.format(new Date(pd), me.dateFormat);

            tip.setTitle(fd);
            tip.showAt([xy[0]-38, slider.getXY()[1]-31]);
        }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T07:11:59.727

您是否检查了 extjs 中的示例滑块。如果不是这里是链接[http://docs.sencha.com/ext-js/4-1/#!/example/slider/slider.html](http://docs.sencha.com/ext-js/4-1/#!/example/slider/slider.html)。检查`tip-slider`或`custom-tip-slider`。

否则你必须在监听器中处理渲染事件。鼠标有`onNodeEnter`事件。

```
 listeners: {

    render: function (v) {

            //      On entry into a target node, highlight that node.
            onNodeEnter: function (target, dd, e, data) {
                //You will get the target here, try t 
                Ext.fly(target).addCls('control-target-hover');
            }
    }
} 
```

# html - 填充动态 的内容。但是怎么表现呢？

> ID：11062367
> 
> 赞同：3
> 
> 时间：2012-06-16T09:43:30.007
> 
> 标签：html, css, dynamic

我的意图是在一个站点上有 4 个主要的导航栏。如果用户将鼠标悬停在其中，它会展开并显示内容。但是我应该怎么做内容部分呢？

```
#bottom-menu:hover #contact{
    visibility: visible ;
} 
```

如果我在盒子完全展开时使其可见，它可以工作，但存在一个问题：内容虽然不可见，但仍然存在并且需要空间，这会导致布局折叠。

我想用纯 CSS 来做到这一点，尽管我知道 jQuery。

[http://jsfiddle.net/RbZwx/1/](http://jsfiddle.net/RbZwx/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T09:45:09.097

`visibility: hidden`导致元素继续[消耗布局空间](https://developer.mozilla.org/en/CSS/visibility)。

`display:none`导致它不占用[布局空间](https://developer.mozilla.org/en/CSS/display)。

想想“剧透”与“隐藏”。

[https://developer.mozilla.org/en/CSS/visibility](https://developer.mozilla.org/en/CSS/visibility)

> 可见性 CSS 属性用于两件事：
> 
> *   hidden 值隐藏了一个元素，但在它本来应该存在的地方留下了空间。
> *   折叠值隐藏表格的行或列。它还折叠 XUL 元素。

[https://developer.mozilla.org/en/CSS/display](https://developer.mozilla.org/en/CSS/display)

> display CSS 属性指定用于元素的呈现框的类型。在 HTML 中，默认显示属性值取自 HTML 规范中描述的行为或浏览器/用户默认样式表。XML 中的默认值是内联的。
> 
> 除了许多不同的显示框类型之外，none 值允许您关闭元素的显示；当您使用 none 时，所有子元素的显示也会关闭。文档呈现为好像该元素在文档树中不存在。

我仍然鼓励您阅读这两篇文章，并了解它们如何影响页面，而不仅仅是针对这种特殊情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:45:27.010

使用`display: none`. 请参阅[CSS 2.1：11.2 可见性：“可见性”属性](http://www.w3.org/TR/CSS2/visufx.html#visibility)：

> 该`'visibility'`属性指定是否呈现由元素生成的框。不可见的盒子仍然会影响布局（将`'display'`属性设置`'none'`为完全禁止盒子生成）。值具有以下含义： [...]
> 
> **`hidden`**生成的框是不可见的（完全透明，没有绘制任何内容），但仍然影响布局。此外，如果元素的后代具有`'visibility: visible'`.

# jquery - jQuery 不更新元素的类

> ID：11062372
> 
> 赞同：0
> 
> 时间：2012-06-16T09:44:11.893
> 
> 标签：jquery, class

我有一个脚本，其中 jQuery 与类一起使用，对于第一次使用脚本，它可以工作，但 jQuery 不会更新某些东西，所以 jQuery 的类仍然存在，但在代码中它被改变了..

```
$(function(){
  var page = $('#subpage'),
      where = this.href;
  $('.hiddenItem').hide();
  $('#submenu .actualItem').next().click(function(){
    page.fadeOut(200, function(){
      page.load(where, function(){
        page.fadeIn(200)
      });
    });

    var $this = $(this);
    $this.prev().prev().hide();
    $this.prev().addClass('previousItem');
    $this.prev().removeClass('actualItem');
    $this.prev().prev().addClass('hiddenItem');
    $this.prev().prev().removeClass('previousItem');
    $this.addClass('actualItem');
    $this.removeClass('nextItem');
    $this.next().show();
    $this.next().addClass('nextItem');
    $this.next().removeClass('hiddenItem');
    return false;
  });
}); 
```

HTML 看起来像这样：

```
<div id="submenu">
<span class="previousItem">
previous
</span>
<span class="actualItem">
actual
</span>
<span class="nextItem">
next
</span>
<span class="hiddenItem">
hidden
</span>
<span class="hiddenItem">
otherhidden
</span>
</div>
<div id="subpage">
</div> 
```

# c# - 与 SQL Server 2008 建立连接

> ID：11062373
> 
> 赞同：0
> 
> 时间：2012-06-16T09:44:16.163
> 
> 标签：c#, asp.net, sql-server-2008

这是我意识到的一个非常基本的问题，我最近开始使用 asp.net，并且与 Access 数据库建立连接非常简单......

```
string insertedBookTitle;
conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                             Data Source=" + Server.MapPath("App_Data\\BookRateInitial.mdb"));
conn.Open() 
```

我用什么代码连接到 SQL Server 2008，同名 (BookRateInitial)？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:49:04.727

这是标准安全性的示例连接字符串（用户名和密码）：

> ```
> Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
> ```

你需要做一个：

```
using(SqlConnection conn = new SqlConnection(connectionString)) 
{
    conn.Open();
    //Use connection here
    using(SqlCommand cmd = conn.CreateCommand())
    {
        //...
    }
} 
```

# php - HTML DOMNodelist？

> ID：11062380
> 
> 赞同：2
> 
> 时间：2012-06-16T09:45:11.717
> 
> 标签：php, domdocument

我尝试将以下代码用于 HTML 页面，但它不起作用。如何在一页中检索和操作所有输出的 HTML 元素？

```
$doc = new DOMDocument;
$doc->load('http://localhost/foo/index.php');

$items = $doc->getElementsByTagName('img');

foreach ($items as $item) {
    echo $item->nodeValue . "\n";
} 
```

**编辑：**

```
$dom = new DOMDocument;
$html = 'http://localhost/foo/index.php';
$dom->loadHTML($html);
foreach ($dom->getElementsByTagName('a') as $node) {
    echo $dom->saveHtml($node), PHP_EOL;

} 
```

上面的代码什么也不输出

**调试代码：**

```
<?php

$dom = new DOMDocument;
$html = 'http://localhost/foo/index.php';

var_dump($dom->loadHTML($html));

echo '<br />';

var_dump($dom);

echo '<br />';

var_dump($dom->saveHTML());

echo '<br />';

var_dump($dom->getElementsByTagName('a'));

echo '<br />';

foreach ($dom->getElementsByTagName('a') as $node) {

    var_dump($node);

    echo '<br />';

    var_dump( $dom->saveHtml($node) );
    echo '<br />';

}

?> 
```

**调试结果：**

```
bool(true)
object(DOMDocument)#1 (0) { }
string(170) "

http://localhost/foo/index.php
"
object(DOMNodeList)#2 (0) { } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:20:42.903

一些`DOMDocument`调试提示。

> 如果适用，请升级到最新的 PHP 5.4，因为它将为您提供更多关于`var_dump`for`DOMDocument`和 Friends 的信息。

我以您的小示例为例，并将添加一些提示如何调试代码：

```
$dom = new DOMDocument;
$html = 'http://localhost/foo/index.php';
$dom->loadHTML($html);
foreach ($dom->getElementsByTagName('a') as $node) {
    echo $dom->saveHtml($node), PHP_EOL;
} 
```

加载是否有效？就是这一行：

```
$dom->loadHTML($html); 
```

您可以通过输出文档的内容来查看文档内部。如果您在浏览器中显示它，您需要查看文档的源代码，*或者*您只需使用以下命令更改输出`htmlspecialchars`：

```
var_dump(htmlspecialchars($dom->saveHTML())); 
```

这将为您提供在浏览器中逐字加载在 HTML 变体中的文档。

您可能要调试的下一部分是以下结果`getElementsByTagName`：

```
foreach ($dom->getElementsByTagName('a') as $node) { 
```

首先将它分配给一个变量，然后检查`length`它是否不是`NULL`或`FALSE`：

```
$aTags = $dom->getElementsByTagName('a');
var_dump(htmlspecialchars($aTags), $aTags->length()); 
```

长度将告诉您匹配了多少元素。

示例/[演示](http://codepad.org/iAHeVpMP)：

```
<?php

$dom = new DOMDocument;
$html = 'http://localhost/foo/index.php';
$dom->loadHTML($html);
echo 'Document HTML loaded: ', var_dump($dom->saveHTML()), "\n";
$aTags = $dom->getElementsByTagName('a');
echo 'A Elements found: ', var_dump($aTags->length), "\n";
foreach ($aTags as $node) {
   echo $dom->saveHtml($node), "\n";
} 
```

输出：

```
Document HTML loaded: string(171) "<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><p>http://localhost/foo/index.php</p></body></html>
"

A Elements found: int(0) 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:51:14.273

使用 PHP 简单 HTML DOM 解析器

如果您在 body 下的 div 下有图像，您会说：

```
$html->find('body',0)->find('div[id=foo]',0)->find('img')->src; 
```

这只是一个例子，但是你可以使用这个类做更多的事情。

请参阅其手册

*   [http://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

# php - while循环内的while循环

> ID：11062382
> 
> 赞同：1
> 
> 时间：2012-06-16T09:45:30.567
> 
> 标签：php, while-loop

我有一张包含事件和日期的表格，另一张包含这些夜晚的客人名单。我可以像这样打印夜晚：

```
$day = date("l");
$date = getFullDateString($day);

$result = mysql_query("SELECT * FROM nights WHERE day = '$day' AND promoter = 'blah'") or die(mysql_error);

while ($row = mysql_fetch_array($result)) {
    echo "<h2>";
    echo $row[name];
    echo " (";
    echo getFullDateString($row[day]);
    echo ")</h2>";
} 
```

问题是，对于这些事件中的每一个，我都希望在其下方打印来宾列表。我试过在`while`里面放另一个循环，但即使是测试回声也不起作用。

```
$result2 = mysql_query("SELECT DISTINCT guest FROM guestlists WHERE night = '$row[name]' AND date = 'getFullDateString($row[day])'") or die(mysql_error ());

    while($row2 = mysql_fetch_array($result2)) {
        echo $row2[0];
        echo "test";
        echo "<br />";
} 
```

基本上我想要以下内容：

> **活动一**
> 
> 名称 1
> 
> 名称 2
> 
> 名称 3
> 
> **活动 2**
> 
> 名称 1
> 
> 名称 2
> 
> 名称 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:53:44.230

您在查询字符串中有一个不会运行的方法。

尝试：

```
$sql = "SELECT DISTINCT guest FROM guestlists WHERE night = '".$row['name']."' AND `date` = '".getFullDateString($row['day'])."'" 
```

此外，`date`是 MySQL 中的保留字，应封装在反引号内或更改为其他内容。

此外，这些[`mysql_`](http://php.net/manual/en/function.mysql-connect.php)函数已被弃用，建议用[PDO 或 MySQLi](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)替换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:54:44.477

查看[用于字符串解析的复杂（卷曲）语法，](http://bg2.php.net/manual/en/language.types.string.php#language.types.string.parsing)了解将变量嵌入字符串的正确方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:55:07.797

尝试这个...

```
$result = mysql_query("SELECT * FROM nights WHERE day = '".$day."' AND promoter = 'blah'") or die(mysql_error);

while ($row = mysql_fetch_array($result)) {
    echo "<h2>".$row[cname]."</h2>";

    $result2 = mysql_query("SELECT DISTINCT guest FROM guestlists WHERE night = '$row[name]' AND date = '".getFullDateString($row[day])."'") or die(mysql_error);

   while ($row2 = mysql_fetch_array($result2))  
    {
        echo $row2[cname];  
    }

} 
```

# c# - 在追随者的墙上发帖

> ID：11062384
> 
> 赞同：0
> 
> 时间：2012-06-16T09:46:39.127
> 
> 标签：c#, linq-to-twitter

如何使用 LinqToTwitter 在 Twitter 上更新特定用户的状态我试过这个：

```
 twitterCtx = new TwitterContext(auth);

 twitterCtx.UpdateStatus("Welcom  " + DateTime.Now.ToString(), "userId"); 
```

问题是我所有关注者的更新状态

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:15:17.157

您的意思是向另一个 Twitter 用户发送直接消息吗？

[这](http://linqtotwitter.codeplex.com/wikipage?title=Sending%20Direct%20Messages&referringTitle=Working%20with%20Direct%20Messages)描述了如何发送直接消息：

```
var message = twitterCtx.NewDirectMessage("16761255", "Direct Message Test - " 
                                      + DateTime.Now); 
```

# ruby - 为类的许多成员赋值

> ID：11062385
> 
> 赞同：1
> 
> 时间：2012-06-16T09:47:05.030
> 
> 标签：ruby, arrays

```
class A
  attr_accessor :dab
  ....
end 
```

现在我有一个 A 的实例数组，比如说

```
arr = [A.new, A.new, A.new] 
```

现在我想为`A`数组中存在的所有类实例设置一个值`arr`。ruby/rails 中有没有捷径可以做到这一点？

此外，我确实`A`继承自`ActiveRecord::Base`

而我的实际需要是：

```
A.find_all_by_some_condition.all.dabs = 2 
```

因此，所有找到的对象都将`dab`设置为 2。

这有捷径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:43:53.813

要从数组中获取 A 类的项目，您可以使用 select/find_all

`arr.select { |el| el.class == A }`或者`arr.select { |el| A === el }`

尽管您希望为多个对象而不是它们对应的类分配一个值，但要实现您的实际结果。A 类没有定义实际的对象，它只是定义了对象在创建时使用的蓝图。因此，找到一种方法来分配 A 的所有实例的值并不是您所追求的（尽管我可能错过了您所要求的重点）

要将值分配给对象数组，这是可行的：

```
A.find_all_by_some_condition.each { |a| a.dab = 2 } 
```

也许你想在那之后保存它们，现在`arr.each(&:save)`可能会派上用场。如果你还不知道的话，去查一下 & 号。很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:38:09.653

默认情况下你不能直接这样做，但是你可以使用 Ruby 的`method_missing`.

两种解决方案：

**解决方案 1 - 使用包装类**

我们将这个类称为`MArray`多分配数组。

```
class MArray
  def initialize(inner_array)
    @inner = inner_array
  end

  def method_missing(meth, value)
    # Check if assignement, and if it is then run mass-assign
    if meth.to_s =~ /^\w+=$/
      @inner.each { |itm| itm.send(meth, value) }
    else
      raise ArgumentError, "MArray: not an assignment"
    end
  end
end 
```

我们还需要添加对`MArray`in的支持`Array`，以便进行包装。我们将调用`mas`“质量分配”的方法：

```
class Array
  def mas
    # Wrap MArray around self
    MArray.new(self)
  end
end 
```

用法很简单：

```
Blob = Struct.new(:dab)
arr = [Blob.new] * 3
arr.mas.dab = 123
arr
=> [#<struct Blob dab=123>, #<struct Blob dab=123>, #<struct Blob dab=123>] 
```

**解决方案 2 - 直接创建批量分配支持`Array`**

这有点“危险”，因为我们直接`method_missing`在`Array`. 它*可能会*产生一些奇怪的副作用（例如，如果`method_missing`已经被其他库重新定义，或者您无意中调用了质量分配）。

它的工作原理是尝试检测带有复数词（以 结尾的词`s`）的赋值，然后触发批量赋值：

```
class Array
  def method_missing(meth, *args, &block)
    # Check for plural assignment, and as an added safety check also
    # see if all elements in the array support the assignment:
    if meth.to_s =~ /^(\w+)s=$/ && 
       self.all? { |itm| itm.respond_to?("#{$1}=") }
      self.each { |itm| itm.send("#{$1}=", *args) }
    else
      super
    end
  end
end 
```

然后使用变得比 with 更短`MArray`：

```
Blob = Struct.new(:dab)
arr = [Blob.new] * 3
arr.dabs = 123
arr
=> [#<struct Blob dab=123>, #<struct Blob dab=123>, #<struct Blob dab=123>] 
```

# php - Yii 弹出窗口中奇怪的验证码

> ID：11062386
> 
> 赞同：0
> 
> 时间：2012-06-16T09:47:14.077
> 
> 标签：php, jquery, yii

我的 YII 项目中有验证码问题。我在弹出表单中包含了一个验证码。它显示正确，但验证存在问题。验证有时是正确的，如果我们第一次尝试输入正确的单词，验证说它是错误的，在生成另一个代码后验证成功。为什么？

在模型-> 规则中：

```
array('verifyCode', 'captcha', 'allowEmpty'=>!CCaptcha::checkRequirements(),'on'=> 'signup') 
```

在控制器中 -> 通过 renderPartial 调用注册表单

```
$this->renderPartial('signUp',array('model'=>$model),false,true); 
```

鉴于：

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'sign-up-form',
    'enableAjaxValidation'=>true,
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
    ),
)); ?>

-----------------------
-----------------------

<?php if(CCaptcha::checkRequirements()): ?>                             
    <?php echo $form->labelEx($model, 'verifyCode', array('for'=>'User_security_code')); ?>
    <?php $this->widget('CCaptcha'); ?>     
    <?php echo $form->textField($model,'verifyCode',array('class'=>'txt-style width-289')); ?>
    Please enter the letters as they are shown in the image above. Letters are not case-sensitive.
    <?php echo $form->error($model,'verifyCode',array('class'=>'error_msg')); ?>
 <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:52:41.757

我在视图中添加了这个

```
<?php
Yii::app()->clientScript->registerScript(
        'initCaptcha',
        '$("#yw0_button").trigger("click");',
        CClientScript::POS_READY);
?> 
```

并且在

```
`CCaptchaAction.php` updated `$testLimit = 0;` //for unlimted test` 
```

问题解决了。我不确定这是正确的方法，但对于我目前的情况，它有所帮助。

# c++ - c++ multithread - 信号处理器线程

> ID：11062387
> 
> 赞同：1
> 
> 时间：2012-06-16T09:47:48.897
> 
> 标签：c++, multithreading, pthreads, signals

[http://pubs.opengroup.org/onlinepubs/009604499/functions/sigprocmask.html](http://pubs.opengroup.org/onlinepubs/009604499/functions/sigprocmask.html)

文档显示了需要存储在全局范围变量中的所有信号的示例（在信号线程启动**之前**`wait`在 main() 填充。在示例信号线程在阻塞信号**之后启动。** ****`SIG_BLOCK`****

 ****它是否正确并且不会导致一些未定义的行为或崩溃，如果我将在 main() 阻塞信号**之前** `SIG_BLOCK`创建我的信号线程，然后我将阻塞所有其他新创建的线程的信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:36:35.673

只要信号线程明确阻止它最终将等待的信号`sigwait`，那么它就是安全的。

例如，以下两个流程示例都是安全的：

```
main:
  create_signal_thread() // Inherits mask from main, so signals are not blocked.
  block_signals()        
  create_more_threads()  // Inherit mask from main, so signals are blocked.

signal_thread:
  block_signals()        // Must block signals, as this thread will wait on them.
  sigwait()              // Behavior is defined. 
```

和

```
main:
  block_signals()        
  create_signal_thread() // Inherits mask from main, so signals are blocked.
  create_more_threads()  // Inherit mask from main, so signals are blocked.

signal_thread:
  sigwait()              // Behavior is defined. 
```

然而，这个例子并不安全：

```
main:
  create_signal_thread() // Inherits mask from main, so signals are not blocked.
  block_signals()        
  create_more_threads()  // Inherit mask from main, so signals are blocked.

signal_thread:
  sigwait()              // Behavior is undefined. 
```

以下是相关摘录[`sigwait`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sigwait.html)：

> set 定义的信号将在调用时被阻塞，`sigwait();`否则行为未定义。`sigwait()`未指定集合中信号对信号动作的影响。****

# iphone - '加速和减速滚动' 像 iPhone 中的小塔（靠近大堂）？

> ID：11062391
> 
> 赞同：-1
> 
> 时间：2012-06-16T09:48:18.847
> 
> 标签：iphone, ios, scroll, touch, cocos2d-x

我将如何在滚动时实现加速/减速效果，就像您在小塔游戏中的大厅附近看到的那样？

它会是引擎盖下的滚动视图吗？

-edit- 如果需要在cocos2d-x中做会不会是一个更有趣的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:27:54.590

[http://getsetgames.com/2009/08/21/cocos2d-and-uiscrollview/](http://getsetgames.com/2009/08/21/cocos2d-and-uiscrollview/)

我使用上面的教程成功地用 cocos2d-x 实现了类似 UI 的滚动视图。

# php - php 类扩展，来自其他扩展类的变量

> ID：11062392
> 
> 赞同：1
> 
> 时间：2012-06-16T09:48:35.263
> 
> 标签：php, class

我有一个主类和两个扩展类：

```
class Main {
    public $foo;
}

class A extends Main {
  public function setVar()
    {
      $foo = "test"; 
    }
}

class B extends Main {
  public function getVar()
    {
      return $this->foo;
    }
}

$A = new A;
$B = new B;

$A->setVar();

echo "result: ".$B->getVar(); 
```

但结果 ($B->getVar()) 保持为空。我显然在这里遗漏了一些简单的东西......除此之外，这是在相关子类中拆分长类的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T10:31:35.537

改变：

```
class A extends Main {
    public function setVar()
    {
     $foo = "test"; 
    }
} 
```

至：

```
class A extends Main {
    public function setVar()
    {
     $this->foo = "test"; 
    }
} 
```

注意**$this**关键字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T10:26:00.830

使用依赖注入 (DI) 在不同类实例之间共享 Main 实例而不是尝试使用继承的示例

```
class Main {
    public $foo;
}

class A {

    protected $main;

  public function setVar($data)
    {
      $this->main->foo = $data;
    }

  public function __construct(Main $main)
    {
      $this->main = $main;
    }
}

class B extends Main {
    protected $main;

  public function getVar()
    {
      return $this->main->foo;
    }

  public function __construct(Main $main)
    {
      $this->main = $main;
    }
}

$M = new Main;
$A = new A($M);
$B = new B($M);

$A->setVar("test");

echo "result: ".$B->getVar(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T10:28:56.667

为了进一步澄清事情，以这种方式思考可能会有所帮助。假设您`Main`是代表车辆的类（因此我们将其重命名`Vehicle`），因此*类*意味着`Vehicle`定义车辆的特征，而不是用于操作的特定特征（我们需要一个*实例*）。让我们也翻译你的类 A in`Car`和 B in `Truck`：因此它们是你的主类的*专业化*，除了拥有泛型的所有特征外`Vehicle`，还扩展了“车辆”的概念并指出了 Cars 的*一般*行为和属性，并且*一般*的卡车，但是——这就是重点——不要参考*特定*的汽车或卡车。我们需要*实例*。

```
class Vehicle
{
   public $numberOfTires;
}

class Car extends Vehicle
{
    function smashMe()
    {
        echo "Oops!";
    }
}

class Truck extends Vehicle
{
    function smashMe()
    {
        echo "More Oops!";
    }
} 
```

从这一点开始，我们可以定义特定的*实例*（您的保时捷、我的 Camaro……不同的汽车），我们可以在这些实例上执行操作（调用方法）并设置属性。

```
$genericVehicle = new Vehicle;
$myPorsche = new Car;
$yourCamaro = new Car;
$hisTruck = new Truck;
$herTruck = new Truck; 
```

但是每个实例都保持独立于另一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T09:57:26.257

两者都是同一类的不同实例。

在一个实例上完成的操作不适用于任何其他实例（这有点像 OOP）。

为了做你想做的事，你可以让 B 扩展 A，然后在 B 类的单个实例上执行这两个操作。

# php - 使用php和mysql水平打印数据

> ID：11062398
> 
> 赞同：-2
> 
> 时间：2012-06-16T09:48:59.473
> 
> 标签：php, mysql

我想以水平方式打印数据库中的数据。我有两个表，一个保存产品名称，另一个保存产品性能的月份，例如我希望数据出现在像这个产品名称这样的表中，从 1 月到 12 月的性能，例如产品 A、1000、2000 等按月的性能产品B、2000、3300等按月表现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:05:52.550

**编辑**：我没有意识到你说你有*两张*桌子。因此，我的解决方案中的查询应该用 a`JOIN`和有序的方式进行调整，但是如果不知道您的架构，我们就无法进一步深入研究。我的解决方案解决了主要问题（即水平打印结果），前提是您获得两个字段以显示在两个不同的*行*中。

* * *

只需检索您的数据并将其存储在多维数组中，然后创建表。

```
$data = array();
$sql = "SELECT product, performance FROM table";
$rs = mysql_query($sql);
while ($row = mysql_fetch_assoc($rs))
{
    $data[] = array($row['product'], $row['performance']);
}

echo "<table><tr>";

// print products in the first line of the table

foreach($data as $d)
{
   echo "<td>" . $d[0] . "</td>";
}
echo "</tr><tr>";

// then print performances

foreach($data as $d)
{
   echo "<td>" . $d[1] . "</td>";
}
echo "</tr></table>"; 
```

# mysql - 计算表中有多少个不同的国家

> ID：11062401
> 
> 赞同：0
> 
> 时间：2012-06-16T09:49:26.897
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
 ID  country 
    -------------
    1       US            
    2       Japan           
    3       China           
    4       US          
    5       China 
```

如何查询该表，使其返回表中有多少个不同的国家（即 3 个）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T09:51:23.903

以下 SQL 查询将计算表中唯一国家/地区的数量。

```
select  count(distinct country)
from    YourTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T09:51:05.137

您需要的是选择独特国家的数量。这是通过选择所有国家条目来完成的，然后将它们分组，因此每个国家名称只有一个国家条目。

`SELECT count(country) from countrytable group by country;`

这与安多玛斯的回答基本相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-27T06:38:07.107

你可以用这个

```
SELECT country, COUNT( id ) 
   FROM [table_name] GROUP BY country
   LIMIT 0 , 30 
```

输出 ：

```
 country count(id) 
---------------------
 US       2            
 Japan    1           
 china    2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T09:51:23.977

从国家表中选择计数（不同的国家）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T10:18:01.473

从表 1 中选择计数（不同国家/地区）

```
 SELECT count( DISTINCT country )
 FROM table1 c
 WHERE c.item_id = (
 SELECT main_id
 FROM table2
 WHERE main_id = c.item_id ) 
```

# sql - 如何使用 Oracle 触发器通知 JBoss

> ID：11062404
> 
> 赞同：3
> 
> 时间：2012-06-16T09:49:48.397
> 
> 标签：sql, oracle, hibernate, jboss, triggers

我需要实现以下内容：

有一个表 A 应该被来自另一个表 B 上的触发器的 DML 操作更改。

我想在每次触发器工作时通知 Jboss bean。在最好的情况下，我希望有机会查看 bean 中的旧数据和新数据。

最好的方法是什么？你能推荐任何阅读的材料吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T15:11:41.607

Alex 提出的使用[数据库更改通知](http://docs.oracle.com/cd/E14072_01/java.112/e10589/dbchgnf.htm)的建议可能是最好的方法。以下是一些其他选项，用于从 Oracle PL/SQL 包（您可以从触发器调用）向 Java 进程发送事件信号：

*   使用[DBMS_PIPE](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_pipe.htm#CHDDFCFC)将消息异步发送到在同一管道上侦听的 Java 客户端。
*   使用[DBMS_ALERT](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_alert.htm#CHDDJCJG)向侦听目标警报的 Java 客户端发送消息。在事务提交之前不会收到消息。
*   使用[UTL_HTTP](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_http.htm#CHDIAFFA)或[UTL_SMTP](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_smtp.htm#CHDHHBJD)或[UTL_TCP](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/u_tcp.htm#CEGDFJJE)将消息发送到侦听目标 HTTP、SMTP 或 TCP 端点的 Java 进程。
*   向侦听目标队列/主题的 Java 客户端发送[Oracle/AQ JMS消息。](http://download.oracle.com/docs/cd/B10500_01/appdev.920/a96587/qintro.htm)
*   在 Java 中创建一个 JMS 客户端[并将 Java 类 [和依赖项] 加载](http://docs.oracle.com/cd/B10501_01/java.920/a96659.pdf)到 Oracle 数据库中。将该类包装在一个 PL/SQL 过程中，并调用它以向 Java 客户端发出信号，该客户端正在侦听目标队列/主题。

[在问题Calling/Using JMS from PL/SQL](https://stackoverflow.com/questions/5819420/calling-using-jms-from-pl-sql)中有更多关于从 PL/SQL 发送 JMS 消息的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:54:16.990

您可以让触发器在信号表中插入一行。

然后，JBoss 进程可以监视信号表，定期检查新信号。

# javascript - 对方法或属性访问的意外调用。jquery.js?ver=1.7.1

> ID：11062406
> 
> 赞同：2
> 
> 时间：2012-06-16T09:49:52.530
> 
> 标签：javascript, jquery, html, internet-explorer

我在 IE7 中收到“对方法或属性访问的意外调用”，而我的脚本在 IE8 中无法运行，我终生无法弄清楚原因。

我一直在 IE 中使用开发人员工具（哇哦！），但这并没有多大帮助。我得到的错误是在 Jquery 中：

SCRIPT65535：对方法或属性访问的意外调用。jquery.js?ver=1.7.1，第 3 行字符 31871

它在 IE9、Safari、FF 和 chrome 中运行良好。

在 Html 页面上，我单击以下链接，该链接将 data-tax 属性的值传递给脚本。你认为它可能与 html5 有什么关系吗？任何指针将不胜感激。

例如，如果您单击布拉德皮特，它应该显示布拉德皮特所在的电影：

```
<li class="ajaxFilterItem brad-pitt af-actor-6 filter-selected" data-tax="actor=6"><a href="#" class="ajax-filter-label"><span class="checkbox"></span>Brad Pitt</a> (1)</li> 
```

我将以下值传递给

```
filterAjaxify("actor=6") 
```

这是有问题的代码：

```
(function($){
    var isRunning = false;
    // Return an array of selected navigation classes.
    function loopSelected(_node) {
        var _arr = [];
        _node.each(function(){
            var _class = $(this).attr('data-tax');
            _arr.push(_class);
        });
        return _arr;
    };

    // Animate the progress bar based on Ajax step completion.
    function increaseProgressBar(percent){
        $('div#progbar').animate({
            width: percent + '%'
        },30);
    };

    // Join the array with an & so we can break it later.
    function returnSelected(){
        var selected = loopSelected($('li.filter-selected'));
            return selected.join('&');
    };

    // When the navigation is clicked run the ajax function.
    $('a.ajax-filter-label, a.paginationNav, a.pagelink').live('click', function(e) {
        if(isRunning == false){
            isRunning = true;
            e.preventDefault();
            var relation = $(this).attr('rel');
            if($(this).parent('li').length > 0) {
                $(this).parent('li').toggleClass('filter-selected');
                thisPage = 1;
            }
            if(relation === 'next'){
                thisPage++;
            } else if(relation === 'prev') {
                thisPage--;
            } else if($(this).hasClass('pagelink')){
                thisPage = relation;
            }
            filterAjaxify(returnSelected());
        }
    });

    // Do all the ajax functions.
    function filterAjaxify(selected){
        $.ajax({
            url: ajaxurl,
            type: 'post',
            data: {
                "action":"affilterposts",
                "filters": selected,
                "posttypes": posttypes,
                "qo": qo,
                "paged": thisPage,
                "_ajax_nonce": nonce
            },
            beforeSend: function(){
                $('div#ajax-loader').fadeIn();
                $('section#ajax-filtered-section').fadeTo('slow',0.4);
                increaseProgressBar(33);
            },
            success: function(html){
                increaseProgressBar(80);
                $('section#ajax-filtered-section').html(html);
            },
            complete: function(){
                $('section#ajax-filtered-section').fadeTo('slow',1);
                increaseProgressBar(100);
                $('div#ajax-loader').fadeOut();
                isRunning = false;
            },
            error: function(){}
        });
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T10:09:10.340

这`<section>`是 HTML5 中的新内容，较旧的 IE 不知道如何消化它，并且当您尝试将内容附加到此类元素时会出现一些 DOM 问题。

例如[http://jsfiddle.net/EKU7R/](http://jsfiddle.net/EKU7R/)

# java - 休眠后线程恢复出错

> ID：11062407
> 
> 赞同：0
> 
> 时间：2012-06-16T09:49:55.100
> 
> 标签：java

您好，我在恢复线程时遇到问题，我的代码是

```
 public boolean Wait(String Reply){     
        if (Reply.equalsIgnoreCase("Y")){
            try {
                t.resume();
            }
            catch (Exception e){
              System.out.println("\n" + "The exception in resume thread method:::: " + e);                
            }
            System.out.println("\n" + "In the Wait Function of Sender");
            return true;

        }
        JOptionPane.showMessageDialog(j ,
                    "Please Wait While The User Accpets the Trasmission ",
                    "",
                    JOptionPane.INFORMATION_MESSAGE);

       try{
         t = new Thread(this);
         t.sleep(100000);  
        }
       catch (InterruptedException ie){
         System.out.println(ie.getMessage());
       }
    return false;
} 
```

我可能会向您解释它是如何工作的，因为它将帮助您确定问题。首先线程进入睡眠状态......然后我`public boolean Wait()`从另一个名为“Y”的函数调用这个函数，然后`ReplyYes`我尝试恢复线程但是`t.resume()`函数调用，而不是恢复线程给了我一个`Java.Lang.Null.PointerException`并且线程未恢复，导致返回 FALSE 值。另外，由于这个线程，我什至无法停止我的服务，我必须等待线程超时。

任何人都可以解释如何使其正常工作！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:53:23.743

我想你误解了它`Thread.sleep`的工作原理。它是一种*静态*方法。

该`t.sleep(100000);`行使*当前线程*进入睡眠状态，而不是线程`t`。

从[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long%29)中：

> 使**当前正在执行的线程**休眠（暂时停止执行）指定的毫秒数

强调我的。

您应该启动线程并从该线程调用 sleep 。有关启动线程的两种不同方法，请参阅以下文章：

*   [定义和启动线程](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)

此外，[`resume`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#resume%28%29)仅用于与它们一起使用[`suspend`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#suspend%28%29)并且它们都已被弃用。从文档中：

> **已弃用。**此方法仅用于 with `suspend()`，已被弃用，因为它容易死锁。有关详细信息，请参阅[为什么不推荐使用 Thread.stop、Thread.suspend、Thread.resume 和 Runtime.runFinalizersOnExit？](http://docs.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)

您得到 a 的原因`NullPointerException`可能是因为您*在*调用`t.resume()`. 所以在那个时候， t 仍然有值`null`。基本上，您的代码需要从头开始完全重写。我建议按照上面链接的教程进行操作，然后在您了解如何创建线程后转到下一章：

*   [用睡眠暂停执行](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)
*   [中断](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:54:50.300

首先你必须启动新线程：`t.start();`然后尝试唤醒你的线程：`t.interrupt();`

`Thread.sleep()`在您的方法内部调用`run()`，这会导致调用此方法的线程休眠

# emacs - 连接来自不同目录的 TAGS 文件的内容

> ID：11062411
> 
> 赞同：3
> 
> 时间：2012-06-16T09:50:13.140
> 
> 标签：emacs, etag

我指的是由 ctags 或 etags 生成的 TAGS 文件，以便在 Emacs 中使用`M-.`.

典型的项目如下所示：

*   大型标准库（超过 100 个文件，但很少更新）。

*   特定于项目的库（每天更新）。

我希望项目能够使用两个（或者可能更多的 TAGS 文件），但只重新生成它们的一部分，只重新生成特定项目中使用的那些。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T11:19:44.127

`etags --help`：

```
-i FILE, --include=FILE
     Include a note in tag file indicating that, when searching for
     a tag, one should also consult the tags file FILE after
     checking the current file. 
```

# ios - 在生产模式下无法接收推送通知

> ID：11062412
> 
> 赞同：0
> 
> 时间：2012-06-16T09:50:16.633
> 
> 标签：ios, apple-push-notifications, ad-hoc-distribution

我实施了我的项目以获取通知。我在开发配置文件（开发证书）中对其进行了测试，设备正常收到通知，但是当我转移到分发模式时

我已将 ssl 网关更改为 ssl://gateway.push.apple.com:2195 并将 Provisioning 设置为 adhoc 模式，我的设备没有收到任何通知）：

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:53:22.847

我得到了答案，问题出在代码符号上：

1.  转到项目->信息->配置->+重复发布配置，命名它（临时）
2.  转到产品->编辑架构->存档->构建配置：临时->确定
3.  打开组织者->提交。
4.  将弹出一个带有 3 个选项的窗口，选择（保存为 Enterprise 或 ad hoc），桌面中将保存一个 .ipa 文件，这就是您的应用程序。
5.  插入设备，然后打开 iTunes 并从向上栏中选择应用程序
6.  检查同步应用程序并检查您的应用程序，然后单击应用。应用程序在您的设备中后，您可以尝试通知，它会起作用，inshallah。

# python - py2exe 与 matplotlib、numpy 和 pylab

> ID：11062417
> 
> 赞同：0
> 
> 时间：2012-06-16T09:51:10.957
> 
> 标签：python, py2exe, matplotlib

我正在尝试生成一个可执行文件。我正在使用的软件包是

```
import sys
import matplotlib.pyplot as plt
from pylab import *
from numpy import * 
```

setup.py 如下

```
from distutils.core import setup
import py2exe
import matplotlib

setup(console=['<python file>'],data_files=matplotlib.get_py2exe_datafiles(),) 
```

但我收到与 pyplot.pyc 相关的错误

> 导入错误：没有名为 backend_tkagg 的模块

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T11:05:03.567

您应该明确包含 matplotlib 模块。如果你这样做，你可能会从不可用的 dll 中得到一些错误，所以你应该排除它们。
适用于我的文件的设置：

```
from distutils.core import setup
import py2exe
import matplotlib

setup(console=['afile.py'],
      options={
               'py2exe': {
                          'packages' :  ['matplotlib', 'pytz'],
                          'dll_excludes': ['libgdk-win32-2.0-0.dll',
                                         'libgobject-2.0-0.dll',
                                         'libgdk_pixbuf-2.0-0.dll',
                                         'libgtk-win32-2.0-0.dll',
                                         'libglib-2.0-0.dll',
                                         'libcairo-2.dll',
                                         'libpango-1.0-0.dll',
                                         'libpangowin32-1.0-0.dll',
                                         'libpangocairo-1.0-0.dll',
                                         'libglade-2.0-0.dll',
                                         'libgmodule-2.0-0.dll',
                                         'libgthread-2.0-0.dll',
                                         'QtGui4.dll', 'QtCore.dll',
                                         'QtCore4.dll'
                                        ],
                          }
                },
      data_files=matplotlib.get_py2exe_datafiles(),) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:13:16.767

我需要添加（python2.7）：

```
 import sys
    sys.path.append("C:\\pathToYourPython\\pythonxy2731\\console\\Microsoft.VC90.CRT") 
```

# jquery - 使用 HTML 页面包含页面时 jQuery 不起作用

> ID：11062425
> 
> 赞同：0
> 
> 时间：2012-06-16T09:51:58.287
> 
> 标签：jquery, css, jsp

参考[这个问题](https://stackoverflow.com/questions/2820867/jquery-ui-datepicker-will-not-display-full-code-included)

我们有一个带有日期选择组件（Jquery 和 css）的标题。当仅存在标题时，日期选择器工作正常。当我尝试包含另一个页面作为带有此标题的正文时，日期选择器不起作用。

我们正在使用[此链接中提到的日期选择器](https://stackoverflow.com/questions/2820867/jquery-ui-datepicker-will-not-display-full-code-included)

当我们在上述代码中包含另一个页面时，选择的日期不起作用。

包括我使用的命令。`<%@ include file="enterClarity.jsp" %>` enterCalrity.jsp 页面中存在一些表单验证 java 脚本

编辑：

单独使用标题

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../css/calendar.css" type="text/css" />
<link rel="stylesheet" href="../css/datepicker_comp_1.css" type="text/css"/>
<link rel="stylesheet" href="../css/datepicker_comp_2.css" type="text/css"/>
<script type="text/javascript" src="../js/datepickr.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
<script type="text/javascript" charset="utf-8">
 jQuery(function(){
  jQuery("#datepicker").datepicker();
 });
</script>
<title>Clarity</title>
</head>

<body>

<form id="clarityaction" name="tstest" onsubmit="return true;" action="/metrix/clarityaction.action" method="post"><table class="wwFormTable">
        <table width="100%" border="0" style="height: 616px; width: 1260px;"
            cellpadding="0" cellspacing="0">
            <tr class="header">
                <td align="right" valign="bottom">
                <B>Welcome Karthik Prabhu D </B>
                </td>
            </tr>
            <tr class="header">
                <td align="right" valign="top">your last login was : 2012-06-16 15:33:51.0
                </td>
            </tr>
            <tr align="left" valign="bottom"><td>
            <input type="text" id="datepicker" class="haspicker" /></td></tr>

            <tr>
                <td bgcolor="#FFFFFF" height="70%" width="100%">
                    <table width="60%" border="0" style="height: 430px; width: 1206px;"
                        cellpadding="0" cellspacing="0">
                        <tr>
                            <td>
                                <table border="0" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td>
                                            <table border="0"style="vertical-align: top" cellpadding="0" cellspacing="0">

                                                <tr>
                                                    <td>

                                                    </td>
                                                </tr>
                                            </table></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </td>

                        </tr>
                    </table></td>
            </tr>

            <tr>

                <td class="footer"></td>
            </tr>

        </table>

    </table></form>

</body>

</html> 
```

包含页面后：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../css/calendar.css" type="text/css" />
<link rel="stylesheet" href="../css/datepicker_comp_1.css" type="text/css"/>
<link rel="stylesheet" href="../css/datepicker_comp_2.css" type="text/css"/>
<script type="text/javascript" src="../js/datepickr.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
<script type="text/javascript" charset="utf-8">
 jQuery(function(){
  jQuery("#datepicker").datepicker();
 });
</script>
<title>Clarity</title>
</head>

<body>

<form id="clarityaction" name="tstest" onsubmit="return true;" action="/metrix/clarityaction.action" method="post"><table class="wwFormTable">
        <table width="100%" border="0" style="height: 616px; width: 1260px;"
            cellpadding="0" cellspacing="0">
            <tr class="header">
                <td align="right" valign="bottom">
                <B>Welcome Karthik Prabhu D </B>
                </td>
            </tr>
            <tr class="header">
                <td align="right" valign="top">your last login was : 2012-06-16 15:36:10.0
                </td>
            </tr>
            <tr align="left" valign="bottom"><td>
            <input type="text" id="datepicker" class="haspicker" /></td></tr>

            <tr>
                <td bgcolor="#FFFFFF" height="70%" width="100%">
                    <table width="60%" border="0" style="height: 430px; width: 1206px;"
                        cellpadding="0" cellspacing="0">
                        <tr>
                            <td>
                                <table border="0" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td>
                                            <table border="0"style="vertical-align: top" cellpadding="0" cellspacing="0">

                                                <tr>
                                                    <td>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript"  src="../js/tabing.js"></script>
<script type="text/javascript" src="../js/tabjs.js"></script>
<script type="text/javascript" src="../js/validaionjs.js"></script>
<link rel="stylesheet" href="../css/tabStyle.css" type="text/css" />
</head>
<body>

<-- Other page contents -->         

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:13:58.957

根据您发布的代码，第二个完整的 html 文件被注入到另一个文件中。你在另一个里面有一个html页面......绝对不好;）

```
 !DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
       "http://www.w3.org/TR/html4/loose.dtd">

    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../css/calendar.css" type="text/css" />
    <link rel="stylesheet" href="../css/datepicker_comp_1.css" type="text/css"/>
    <link rel="stylesheet" href="../css/datepicker_comp_2.css" type="text/css"/>
    <script type="text/javascript" src="../js/datepickr.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
    <script type="text/javascript" charset="utf-8">
     jQuery(function(){
      jQuery("#datepicker").datepicker();
     });
    </script>
    <title>Clarity</title>
    </head>

    <body>

    <form id="clarityaction" name="tstest" onsubmit="return true;" action="/metrix/clarityaction.action" method="post"><table class="wwFormTable">
            <table width="100%" border="0" style="height: 616px; width: 1260px;"
                cellpadding="0" cellspacing="0">
[...]    
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript"  src="../js/tabing.js"></script>
    <script type="text/javascript" src="../js/tabjs.js"></script>
    <script type="text/javascript" src="../js/validaionjs.js"></script>
    <link rel="stylesheet" href="../css/tabStyle.css" type="text/css" />
    </head>
    <body>

    <-- Other page contents --> 
```

# php - 致命错误：未捕获的 CurlException：26：创建 formpost 数据失败抛出

> ID：11062427
> 
> 赞同：3
> 
> 时间：2012-06-16T09:52:10.547
> 
> 标签：php, facebook, facebook-php-sdk, fatal-error

我收到以下错误：

```
Fatal error: Uncaught CurlException: 26: failed creating formpost data thrown in /home/u801961841/public_html/inc/lib/base_facebook.php on line 814 
```

这是我使用的代码：

```
 if ($result === false) {
      $e = new FacebookApiException(array(
        'error_code' => curl_errno($ch),
        'error' => array(
        'message' => curl_error($ch),
        'type' => 'CurlException',
        ),
      ));
      curl_close($ch);
      throw $e;
    }
    curl_close($ch);
    return $result;
  } 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T16:35:13.217

图像的路径不正确。纠正它，问题就会得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:49:48.060

如果您使用 $_FILE 上传文件，则需要使用“realpath($_FILE)”。但是，如果您使用服务器中的本地图像文件，则需要使用 dirname() 正确指向图像。

目录名（目录名（目录名（**文件**）））。'/plugins/fun/images/'.$image_name;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T11:23:19.927

我假设您正在尝试将文件上传到 Facebook，例如照片上传。涉及读取文件并构建到调用中的东西。

如果不是，则修改问题。（您的源链接对我不起作用 - 所以将相关位放在问题中。）

如果是这样，则此错误是因为 PHP 无法读取您尝试上传的文件。检查文件是否存在，检查您对该文件的权限，以及 PHP/Apache 用户是否有权读取它。您可以在构建 facebook 调用之前使用 file_exists() 和 is_readable() 执行此操作。

# objective-c - 关闭模态视图控制器以查看其父视图以外的视图

> ID：11062429
> 
> 赞同：0
> 
> 时间：2012-06-16T09:52:46.743
> 
> 标签：objective-c, ios, modal-dialog

在我的应用程序中，我展示了一个带有导航控制器的模态视图。在导航中浏览了几个屏幕后，我只需使用即可关闭视图

```
[self dismissModalViewControllerAnimated:YES]; 
```

它以自上而下的过渡优雅地退出视图。但它会进入初始视图，我希望它使用相同的自上而下模式转换返回导航控制器的根目录。有没有一种巧妙的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:55:16.663

要转到根目录，请使用以下命令

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

但这不会向您显示自上而下的动画，为了实现您需要进行一些自定义修改，您可能需要创建 onw UINavigationController

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:01:32.027

如果你想切换它。

```
 yourclassName *obj=[[yourclassName alloc]initWithNibName:@"yourclassName" bundle:nil];
    [self presentModalViewController:obj animated:YES]; 
```

# google-maps - InfoBubble z-Index 和 GMap Marker z-index

> ID：11062439
> 
> 赞同：1
> 
> 时间：2012-06-16T09:54:42.983
> 
> 标签：google-maps, z-index, google-maps-markers, infobubble

我正在使用[InfoBubble](http://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/infobubble/src/infobubble.js?r=356)在 GMap 中显示内容。但是 zIndex 似乎不起作用，因为具有较低 zIndex 的 InfoBubble 仍然阻止具有较高 zIndex 的标记，有人遇到类似的问题吗？

GMap 标记：

```
new google.maps.Marker({
    draggable: true,
    raiseOnDrag: true,
    icon: currentLocationMarkerImage,
    shadow: currentLocationMarkerShadow,
    shape: currentLocationMarkerShape,
    map: map,
    animation: google.maps.Animation.DROP,
    position: getOriginLatLng(),
    zIndex: 11
}); 
```

信息泡泡：

```
new InfoBubble({
    /*maxWidth: 300,*/
    borderRadius        : 4,
    arrowStyle          : arrowStyle,
    color               : "#fff",
    borderColor         : '#1e90ff',
    backgroundColor     : '#fefefe',
    disableAutoPan      : disableAutoPan,
    shadowStyle         : 0,
    padding             : 5,
    arrowSize           : 10,
    borderWidth         : 2,
    // hideCloseButton  : true,
    arrowPosition       : 50,
    backgroundClassName : 'phoney',
    disableAnimation    : disableAnimation,
    zIndex              : 10
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:37:38.277

infoBubble 将始终显示在标记的顶部。看：

[https://developers.google.com/maps/documentation/javascript/overlays#Initializing](https://developers.google.com/maps/documentation/javascript/overlays#Initializing)

infoBubble 位于浮动窗格上。标记位于覆盖窗格上。

# linux - 通过文件进行进程间通信

> ID：11062444
> 
> 赞同：5
> 
> 时间：2012-06-16T09:54:51.937
> 
> 标签：linux, process, ipc

当我回显到 Linux 中某些任意位置的文件时，即`echo > /tmp/file`某些正在运行的进程会响应。这是通过文件管道的 IPC 吗？

这是否意味着正在运行的进程总是打开要读取的文件？但是，既然文件流被自己的进程锁定，那么如何写入文件呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T10:01:22.243

如果你想使用一个文件与另一个进程通信，你应该看看`man fifo`.

我将在这里只报告第一行：

```
NAME
       fifo - first-in first-out special file, named pipe

DESCRIPTION
       A FIFO special file (a named pipe) is similar to a pipe, except that it
       is accessed as part of the file system.  It can be opened  by  multiple
       processes  for  reading or writing.  When processes are exchanging data
       via the FIFO, the kernel passes all data internally without writing  it
       to the file system.  Thus, the FIFO special file has no contents on the
       file system; the file system entry merely serves as a  reference  point
       so that processes can access the pipe using a name in the file system. 
```

我认为这就是你所需要的。

只需将其视为缓冲区。必须打开它以供不同进程读取和写入。正在读取的进程将被阻塞，直到写入进程不对其进行写入。当写入过程完成写入时，关闭文件，这是读取过程开始清空缓冲区的绿灯。它是一个 FIFO，因此写入的第一行将是读取的第一行。然后写入过程可以再次打开它并重新开始。

您可以使用`mkfifo`. 看看`man mkfifo`。

# php - 学习 htaccess 命令

> ID：11062449
> 
> 赞同：-1
> 
> 时间：2012-06-16T09:55:29.330
> 
> 标签：php, html, .htaccess

^ 在 htaccess 重写代码中代表什么。我在哪里可以找到所有 htaccess 实体，如 ^ \d 等及其含义。我已经开始寻找，但我能找到的只是例子，而不是基本运算符的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:13:38.410

'^' 指的是匹配字符串的开头。

\d - 匹配任何特殊字符，这里它将匹配 'd'。

您可以参考[此链接](http://x10hosting.com/forums/tutorials/96310-htaccess-regular-expressions.html)编写 .htaccess

# azure - 新的 Azure SDK 1.7 和增强的发布是否允许将静态文件自动发布到 Blob 存储？

> ID：11062450
> 
> 赞同：2
> 
> 时间：2012-06-16T09:55:31.247
> 
> 标签：azure, publish, azure-blob-storage

有谁知道 Azure 发布中是否有任何更改以允许将静态内容（js、css、图像）等作为发布操作的一部分自动放入 blob 存储？

这将使发布应用程序变得更加容易，因为您不必一直将静态文件放入 blob 存储。将静态文件远离 Web 角色是有意义的，因为它有助于扩展应用程序。

Azure 相对于其他开发环境的主要优势之一应该是它与 Visual Studio 的集成以及良好的全栈体验

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:05:57.160

一个稍微长一点的答案是，CDN 会在网络角色和存储之间做出决定，这是一个有争议的问题。至少对于在整个站点中使用的常用静态文件而言。

您可以将托管服务用作源服务器，以通过 CDN 分发出去。看看[http://blogs.msdn.com/b/scicoria/archive/2011/07/10/hosted-service-as-a-windows-azure-cdn-origin-tips.aspx](http://blogs.msdn.com/b/scicoria/archive/2011/07/10/hosted-service-as-a-windows-azure-cdn-origin-tips.aspx)

但是，正如上面 David 所指出的，通过在打包过程中将它们移动到 blob 存储来减少发布包大小可能会有一些好处。作为自动构建过程的一部分编写脚本然后进行差异更新很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T13:14:45.860

简短的回答是*否定*的 - v1.7 工具或项目类型中没有将 Windows Azure 存储内容作为其元素之一。不过，在开发环境中，我确实看到了吸引力。对于生产系统，我觉得自动化工具更合适。

并不是说这就是您要寻找的答案，但是……不过，有一种方法可以使存储上传自动化。您可以利用 PowerShell，结合您选择的自动化工具（无论您是使用 TFS/MSBuild 100% 还是在 Team City、CruiseControl.net 或其他东西中混合使用）。

REST API 已经涵盖了存储管理（包括上传块和页面 blob 的能力）。PowerShell cmdlet 使上传 blob 内容变得非常容易，这使您可以决定何时执行脚本（以及部署、部署之前、以后作为更新等）。

还要考虑一件事：静态内容的大小可能很大。您可能希望避免完全上传，并专注于单个对象。我合作过的一些合作伙伴拥有数百 MB 的静态内容（有几个拥有 GB）。批量推送此内容不太实用。PowerShell cmdlet 在这些情况下提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T23:35:31.733

我刚刚发布了[https://github.com/Plasma/AzureBlobUtility](https://github.com/Plasma/AzureBlobUtility)，它是一个命令行实用程序，用于将文件从本地存储上传到 blob 存储，我现在使用它让 TeamCity 提前将 cspkg 上传到 blob 存储。

您可能会发现自动上传资产很有用。

# symfony - symfony 2 管理员设置错误

> ID：11062453
> 
> 赞同：2
> 
> 时间：2012-06-16T09:56:27.677
> 
> 标签：symfony, installation, admin

当我尝试在控制台中设置管理员时：

```
php app/console admin:setup 
```

我收到一个错误：

```
ParameterNotFoundException: You have requested a non-existent parameter "twig.form.resources". 
```

我尝试在 config.yml 中添加 twig.form.resources 参数，但没有帮助 =(

```
twig:
    form:
         resources: 
                - 'GeneratorBundle::fields.html.twig' 
```

问题是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:30:46.277

在 config.yml 中定义东西并没有定义参数。

为了定义参数，您需要将它们放在parameters.ini（symfony 2.0）或parameters.yml（2.1）中，或者将它们设置在依赖注入扩展中。

# java - java中的数组在哪里覆盖了clone()？

> ID：11062455
> 
> 赞同：3
> 
> 时间：2012-06-16T09:56:48.860
> 
> 标签：java, arrays, clone, overriding

类的重写`clone()`方法`java.lang.Object`可用于所有数组。

这个方法在哪里被数组覆盖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T10:06:15.880

它由[JLS 10.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.7)定义：

> 公有方法clone，覆盖Object类中的同名方法，不抛出检查异常。数组类型 T[] 的克隆方法的返回类型是 T[]。
> 多维数组的克隆是浅的，也就是说它只创建一个新数组。子数组是共享的。

它在哪里以及如何被覆盖是特定于实现的。例如，对于 HotSpot，您可以在第 539 行及以下位置找到[它](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/tip/src/share/vm/prims/jvm.cpp)。如果您向下钻取，您将看到它调用了一个依赖于平台的方法。例如，对于 Windows-x86，该`pd_conjoint_jlongs_atomic`方法位于[此处](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/9b0ca45cd756/src/os_cpu/windows_x86/vm/copy_windows_x86.inline.hpp)的第 97 行并使用汇编代码。

# php - 创建动态 URL

> ID：11062458
> 
> 赞同：-1
> 
> 时间：2012-06-16T09:57:46.367
> 
> 标签：php, url

我即将发起一个广告活动来推广我的网站，问题是我想创建具有不同 URL 的登录页面，以便我轻松跟踪访问者并了解哪种活动效果最好，我已经看到了[http之类的链接://www.mywebsite.com/?id=1](http://www.mywebsite.com/?id=1)和[http://www.mywebsite.com/?id=2](http://www.mywebsite.com/?id=2)，两个链接也显示主要网站内容，但使用不同的 URL 以便于跟踪访问者，我想知道如何创建这样的 URL，希望您能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:02:59.447

在您的`index.php`（或执行的任何 PHP 脚本`http://www.mywebsite.com/`）中添加类似于此的代码：

```
if(!empty($_GET['id'])) {
    $id = $_GET['id'];
    track_visit($id);
    header('Location: /');
    exit;
} 
```

该功能`track_visit()`可以像记录给定 ID 的访问一样简单，也可以更复杂，例如检查用户的 IP 最近是否已被跟踪。

使用跟踪后的重定向，因此 id 参数不会保留在 URL 中 - 否则如果您使用最简单的实现方式，点击刷新将再次跟踪用户`track_visit`。除此之外，在 URL 中保留跟踪信息会使其看起来很丑陋（只需查看`utm_campaign=...`您在关注 rss 提要或时事通讯链接时经常在 URL 中拥有的令人难以置信的长等数据），并且用户将链接复制给其他人会导致他们被跟踪到 - 这可能不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:03:24.800

除了您应该真正了解与动态网站相关的所有基本知识外，您还可以使用 Google Analytics 来跟踪这些活动，因为它会为您提供有关每个访问者的更多信息……</p>

[谷歌分析 - 活动跟踪是如何工作的？](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55540)

如果您不想使用 Google 产品，我建议您改用 Piwik

[跟踪活动 – 分析 Piwik](http://piwik.org/docs/tracking-campaigns/)

# c# - 如何创建接口的实例（访问接口）

> ID：11062461
> 
> 赞同：1
> 
> 时间：2012-06-16T09:57:53.180
> 
> 标签：c#

我有一个这样的界面：

```
namespace QuickRoutes.Model.Utilities
{
    public interface IRoutesManager
    {
        bool ImportRoute(Stream inputStream, string fileName);
        List<Route> GetAllRoutes();
        List<Route> GetAllRoutesForDate(DateTime from, DateTime to);
        void DeleteRoute(string routeName);
        void DeleteAllRoutes();

    }
} 
```

我想从我的表单访问 ie ImportRoute 函数，但我无法访问这个函数，并且发生了这样的错误： **无法创建抽象类或接口的实例** 如何访问这些函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:59:30.933

您需要有一个定义实际行为的接口的*实现。*接口本身只声明成员 - 正如您所看到的，那里没有代码可以说明要做什么。

您`Form`可以创建某个实现的实例，也可以将其提供给它 - 很可能*只是*作为一个`IRoutesManager`, 以便表单本身不需要关心它正在使用哪个实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:00:42.727

你永远不会创建接口的实例，接口只是合同。你会做的是： -

```
public class MyRouteManager : IRoutesManager
{ 
    bool ImportRoute(Stream inputStream, string fileName)
    { code here etc etc } 
    List<Route> GetAllRoutes();
    List<Route> GetAllRoutesForDate(DateTime from, DateTime to);
    void DeleteRoute(string routeName);
    void DeleteAllRoutes();

} 
```

如果您希望它是一个类，您还可以将单词接口更改为类。

# iphone - 带有连字符的 iOS 数字键盘和 HTML 输入标记

> ID：11062463
> 
> 赞同：1
> 
> 时间：2012-06-16T09:58:15.490
> 
> 标签：iphone, html, ios, input, keyboard

*在带有模式“[0-9] ”或“\d* ”的网页表单输入字段上，iOS 可以切换到数字键盘以获得更好的可用性：http: [//developer.apple.com/library/ios/#documentation/ StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW1](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW1)

但是，对于用户可能输入“-”（连字符）的邮政编码字段，我需要将模式更改为类似“[0-9-]”的内容。但 iOS 随后将数字键盘改回全键盘。

有没有办法添加连字符但保留数字键盘？我不是在开发应用程序，所以我没有客观的 C 方法。

感谢您的时间！

# python - py2exe: WindowsError: [错误 267] 目录名无效

> ID：11062466
> 
> 赞同：1
> 
> 时间：2012-06-16T09:58:30.547
> 
> 标签：python, py2exe

**安装程序.py**

```
from distutils.core import setup
import py2exe

setup(console=['program.py']) 
```

**错误**

```
Traceback (most recent call last):
File "program.py", line 427, in <module>
File "program.py", line 242, in __init__
WindowsError: [Error 267] The directory name is invalid: 'C:\\Users\\Bob\applications\\Program\\test\\v0.6\\dist\\library.zip/*.*' 
```

目录名称是指名为的 zip 文件`library`，该文件位于 dist 文件夹中，并在编译期间创建。

**program.py 的第 240 - 246 行**

```
 file_list = []
 root_dir = sys.path[0]
 for path in os.listdir(root_dir):
    full_path = os.path.join(root_dir, path).lower()
    if os.path.isfile(full_path) and full_path.endswith('txt'):
        # create list of (filename, dir) tuples
        file_list.append((path.lower(), full_path)) 
```

**program.py 的第 427 行**

```
gui = GuiTk(win) 
```

任何想法是什么导致了问题？我使用 Windows 7 64Bit 和 PortablePython 2.7.2.1 创建可执行文件。编译过程中没有其他错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:30:41.057

您正在尝试列出 中的项目`sys.path()`。来自文档：

> sys.path 指定模块搜索路径的字符串列表。从环境变量 PYTHONPATH 初始化，加上依赖于安装的默认值。
> 
> 在程序启动时初始化时，此列表的第一项 path[0] 是包含用于调用 Python 解释器的脚本的目录。如果脚本目录不可用（例如，如果交互调用解释器或从标准输入读取脚本），path[0] 是空字符串，它指示 Python 首先搜索当前目录中的模块。请注意，脚本目录是在 PYTHONPATH 插入的条目之前插入的。

对于像您这样的 py2exe 可执行文件，`sys.path`是一个包含 library.zip 路径的列表（包含在您的安装中找到的所有纯源模块 py2exe 的存档，您的可执行文件可能需要这些模块才能工作）。
但是您不能使用 zip 存档作为路径`os.listdir`

```
>>> import os
>>> d = 'C:\\test.zip'
>>> os.listdir(d)
Traceback (most recent call last):
  File "<input>", line 1, in <module>
WindowsError: [Error 267] El nombre del directorio no es válido: 'C:\\test.zip/*.*'
>>> 
```

可能您不是在寻找 sys.path 而是在寻找变量名称所指示的“当前目录”。
如果是这种情况，那么`os.getcwd`将完成这项工作

# c++ - C++：使用选择（）

> ID：11062469
> 
> 赞同：1
> 
> 时间：2012-06-16T09:58:41.637
> 
> 标签：c++, sockets, select

我正在构建一个可以从服务器和用户（`stdin`）接收信息的客户端，所以我使用 select 来监控两者。发生的情况是键盘输入被监控，我向客户端发送消息并返回，没问题。但是当服务器发送消息时没有任何反应，我不知道为什么。是否使用`select()`正确的方法来做到这一点？

这是我的代码：

```
void readSocket(fd_set tempfd) {
    const char * tweet, * inMessage;
    if (FD_ISSET(srverfd,&tempfd)) {
        inMessage = getMessage();
        printSystemMessages(inMessage);
    }

    if (FD_ISSET(STDIN_FILENO,&tempfd)) {
        tweet = getUserTweet();
        sendMessage(tweet);
        inMessage = getMessage();
        if (strcmp(inMessage,OK) != 0) {
            printSystemMessages(inMessage);
        }
        if (strcmp(inMessage,EXIT) == 0) {
            return;
        }
    }
    return;
}

int main (int argc, char *argv[] ){
    int value;
    bool clientON = false;
    fd_set tempfd;

    if(establishConnection(argv[2],argv[3])){
        cerr << "usage: failed to make connection" << endl << "exiting..." << endl;
        exit(EXIT_FAILURE);
    }

    cout << "Connected successfully" << endl;
    sendMessage("CONNECT "+clientName); //Connect
    if(strcmp(getMessage(),OK) == 0){
        build_select_list();
        printSystemMessages("Welcome!");
        clientON = true;
        cout<< man <<endl;
    }
    while(clientON){
        tempfd = inputFdSet;
        printTweetFormat("TweetMy:");

        value = select(maxSock, &tempfd, NULL, NULL, NULL);
        if (value < 0) {
            perror("select");
            exit(EXIT_FAILURE);
        }
        if (value == 0) {
            continue;
        }
        else {
            readSocket(tempfd);
        }
    }
    close(srverfd);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:57:57.160

这可能会对您有所帮助 - 将 maxSock+1 而不是 maxSock 传递给您的 select() 调用；

从 select() 的手册页中

```
 nfds  is the highest-numbered file descriptor in any of the three sets,
      plus 1. 
```

# components - 为 joomla 2.5 编写组件的最佳方式

> ID：11062470
> 
> 赞同：3
> 
> 时间：2012-06-16T09:58:42.960
> 
> 标签：components, custom-component, joomla2.5

我想知道为 joomla 2.5 编写组件的最佳方法是什么，因为有很多方法可以做到这一点。我寻找了一些已经完成的组件，这很容易让人困惑。JForms 基础控制器和模型类哪个更舒服。我想制作一个组件，它应该在前端有表单，以便在前端发布用户或会员注册字段的一些通知或广告。谢谢阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T10:12:43.650

[我相信在 Joomla 2.5 中创建组件的“正确方法”是使用此处](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5)找到的 joomla wiki 教程定义的 MVC 方法。然而，在现实中，并不是每个人都有时间或智慧以“正确的方式”做事。从我从市场下载/购买的许多组件和模块中，我还没有看到两个不同的开发人员以“相同”的方式实现事物。由于害怕获得 OT 和编程哲学，这里是我迄今为止使用的一些指导：

来自最近的 Joomla 聚会，专注于从头开始创建组件。如果您想查看它们，这里是幻灯片和下载。

[http://www.tamlyncreative.com.au/software/howtocreatejoomlacomponent.zip](http://www.tamlyncreative.com.au/software/howtocreatejoomlacomponent.zip)

[http://www.slideshare.net/TimPlummer/](http://www.slideshare.net/TimPlummer/)

最近引起我注意的你可能想要研究的东西叫做 Fabrik。将其视为 Joomla 对 RoR 的回答。

[http://fabrikar.com/](http://fabrikar.com/)

# networking - Solaris 上的网络帮助

> ID：11062471
> 
> 赞同：2
> 
> 时间：2012-06-16T09:58:50.747
> 
> 标签：networking, tcp, routing, solaris

我的 Solaris 机器上有两个网络接口，ifconfig -a 的输出如下所示：

```
lo0: flags=1000849<UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000
bge0: flags=1000843<UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
        inet 10.17.56.150 netmask ffffff00 broadcast 10.17.56.255
        ether 0:14:4f:7e:4a:68
bge1: flags=1000843<UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 3
    inet 10.0.226.166 netmask ffffff00 broadcast 10.255.255.255
    ether 0:14:4f:7e:4a:69 
```

我的路由表如下所示：

```
# netstat -nr

Routing Table: IPv4
Destination           Gateway           Flags  Ref   Use   Interface
-------------------- -------------------- ----- ----- ------ ---------
10.17.56.0           10.17.56.150         U         1   5670  bge0
10.0.226.0           10.0.226.166         U         1   1107  bge1
224.0.0.0            10.17.56.150         U         1      0  bge0
default              10.0.226.1           UG        1      0
127.0.0.1            127.0.0.1            UH        8 162738  lo0 
```

我有一个正在运行的应用程序正在侦听接口 bge0 上的端口 7710。

问题是，当我尝试在端口 7710 上 telnet 到 10.17.56.150 时，它可以从外部机器工作。但在另一个接口上它不起作用，即在端口 7710 上 telnet 到 10.0.226.166 不起作用。中间没有防火墙。

任何人都可以帮助解决问题以及如何实现。我希望能够在端口 7710 上远程登录到 10.0.226.166。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:57:32.527

如果您可以 ping bge1，但无法连接到 bge1 上的 tcp/7710，则最可能的原因是：

*   您尚未将服务绑定到 tcp/7710 上的 bge1。通过查看来检查这一点`netstat -an | grep 10.0.226.166`。
*   路径中有防火墙或路由器 ACL 阻止您的流量

# ios - iOS App的分发

> ID：11062472
> 
> 赞同：1
> 
> 时间：2012-06-16T09:59:25.100
> 
> 标签：ios, notifications, push, distribution

我想测试我的第一个应用程序（离发布应用程序商店不远）是否也可以在生产模式下工作。所以我在 appID 中添加了 Production Push SSL 证书，并在 Urban Airship 中添加了一个新应用程序，这样该应用程序现在就可以使用生产服务器了。首先，它不起作用，该应用程序仍然尝试使用开发服务器并且无法连接到它们。所以我将代码签名身份更改为分发。然后它连接到生产服务器，我得到一个设备令牌。但是 1-2 秒后应用程序崩溃，我收到错误消息：错误：无法启动'/Users/"MyName"/Library/Developer/Xcode/DerivedData/"AppName"-crdfguzuswjwdkfesxsjpooswbgf/Build/Products/Debug-iphoneos /"AppName".app/"AppName"' -- 发送 qLaunchSuccess 数据包失败

我必须改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:22:53.097

您需要为代码签名创建一个 Ad-Hoc 配置文件，以便在生产模式下测试推送通知。

阅读此答案了解更多信息： [https ://stackoverflow.com/a/6413247/550177](https://stackoverflow.com/a/6413247/550177)

# vim - 设置 Ack 以查看车把文件

> ID：11062475
> 
> 赞同：3
> 
> 时间：2012-06-16T09:59:35.333
> 
> 标签：vim, ack

我在 Vim 中设置了 Ack，但目前它不在 .handlebars 文件中搜索。

有谁知道如何将把手添加到文件列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:43:41.143

我们一个命令：

```
cat >> ~/.ackrc
--type-add
html=.html.erb,.html.haml,.handlebars,.hbs 
```

你也应该添加一个类型

```
cat >> ~/.ackrc
--type-set
mustache=.html.erb,.html.haml,.handlebars,.hbs 
```

并像这样使用

```
ack --type mustache 'search' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T10:29:41.280

将以下行添加到我的 ~/.ackrc 告诉 ack 在我需要的文件中搜索：

```
--type-add=html=.html.erb,.html.haml,.handlebars 
```

# java - ASTParser 方法声明类型参数

> ID：11062485
> 
> 赞同：0
> 
> 时间：2012-06-16T10:02:12.740
> 
> 标签：java

如何使用 ASTParser 获取方法声明的 typeParameters。同样，如何获取方法调用的 typeArguments。

例如：

```
public void abc(String a[], String b[])
{ .. } 
```

我想提取“ `[String[], String[]]`”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:45:51.020

您可以执行以下操作：

```
import java.util.ArrayList;
import java.util.List;

import org.eclipse.jdt.core.dom.AST;
import org.eclipse.jdt.core.dom.ASTParser;
import org.eclipse.jdt.core.dom.ASTVisitor;
import org.eclipse.jdt.core.dom.CompilationUnit;
import org.eclipse.jdt.core.dom.MethodDeclaration;
import org.eclipse.jdt.core.dom.SingleVariableDeclaration;
import org.eclipse.jdt.core.dom.VariableDeclaration;

public class Test {
    public static void main(final String args[]) {
        ASTParser parser = ASTParser.newParser(AST.JLS3);
        parser.setSource("public class A { int i = 9;  \n int j; \n ArrayList<Integer> al = new ArrayList<Integer>();j=1000; public void test(String arg1[], String arg2[]) {}}"
                .toCharArray());

        parser.setKind(ASTParser.K_COMPILATION_UNIT);

        final CompilationUnit cu = (CompilationUnit) parser.createAST(null);

        cu.accept(new ASTVisitor() {

            @Override
            public boolean visit(final MethodDeclaration node) {
                System.out.println("declaring method '" + node.getName() + "' that returns " + node.getReturnType2());
                List<String> parameters = new ArrayList<String>();
                for (Object parameter : node.parameters()) {
                    VariableDeclaration variableDeclaration = (VariableDeclaration) parameter;
                    String type = variableDeclaration.getStructuralProperty(SingleVariableDeclaration.TYPE_PROPERTY)
                            .toString();
                    for (int i = 0; i < variableDeclaration.getExtraDimensions(); i++) {
                        type += "[]";
                    }
                    parameters.add(type);
                }

                System.out.println(parameters);

                return true;
            }

        });
    }
} 
```

# jquery - 如何在jquery中获取html元素的索引

> ID：11062490
> 
> 赞同：0
> 
> 时间：2012-06-16T10:03:11.950
> 
> 标签：jquery, html, indexing

我有 html 元素

> ```
> <ul>
> <li>
>     <dl class="details clear">
>         <dt>TIME&nbsp;:&nbsp;&nbsp;&nbsp;</dt>
>         <dd>09:00:00-10:00:00</dd>
>         <dt>Availible&nbsp;Days&nbsp;:&nbsp;&nbsp;</dt>
>         <dd>monday,tuesday,wednesday</dd>
>         <dt></dt>
>         <dd>
>         <label class="edit-details white_blue" style="float:right;margin-right:10px;">EDIT</label>
>         <label class="delete-details white_red" style="float:right;margin-right:10px;">DELETE</label>
>         </dd>
>     </dl>
>     <dl class="details clear">
>         <dt>TIME&nbsp;:&nbsp;&nbsp;&nbsp;</dt>
>         <dd>10:30:00-11:30:00</dd>
>         <dt>Availible&nbsp;Days&nbsp;:&nbsp;&nbsp;</dt>
>         <dd>monday,tuesday,wednesday</dd>
>         <dt></dt>
>         <dd>
>         <label class="edit-details white_blue" style="float:right;margin-right:10px;">EDIT</label>
>         <label class="delete-details white_red" style="float:right;margin-right:10px;">DELETE</label>
>         </dd>
>     </dl>
> </li>
> </ul> 
> ```

我想获取编辑标签的索引，如果它在第**一个“dl”**中必须警告**0**，否则如果它在**第二个“dl”**中必须警告**1**

到目前为止我做到了

```
$("label").click(function () {
    var parent_el = $(this).parents('li');
    alert(parent_el.index(this));
}); 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:07:41.370

```
$("label").click(function () {
    var parent_el = $(this).parents('dl');
    alert($("dl").index(parent_el));
}); 
```

或者

```
$("label").click(function () {
        var parent_el = $(this).parents('dl');
        alert(parent_el.index());
    }); 
```

# c# - 必须声明标量变量“@lblCmpUserName”

> ID：11062491
> 
> 赞同：-3
> 
> 时间：2012-06-16T10:03:20.867
> 
> 标签：c#, asp.net, .net

当用户使用他的登录时`UserName`，我将`UserName`如下代码发送到下一页`Page_Load`

```
 lblCmpUserName.Text = Server.UrlDecode(Request.QueryString["Parameter"].ToString()); 
```

然后我想将带有用户名的“公司详细信息”存储在 SQL Server 2008 表中。

我得到了错误

> 必须声明标量变量“@lblCmpUserName”

代码：

```
 protected void BtnCmpApproval_Click(object sender, EventArgs e)
    {
       SqlConnection SqlCon = new SqlConnection(GetConnectionString());
       string query = "INSERT INTO Company_Info2 VALUES (@lblCmpUserName, @txtCmpName,  @txtRegCountry, @txtCmpRegNo, @txtCmpEstdate,@AFU1, @txtCmpAddress, @ddlAddrIn)";
       try
       {
          SqlCon.Open();

          SqlCommand cmd = new SqlCommand(query, SqlCon);
          cmd.CommandType = CommandType.Text;
          cmd.Parameters.AddWithValue("@UserName", lblCmpUserName.Text);
          cmd.Parameters.AddWithValue("@Cmp_Name", txtCmpName.Text);
          cmd.Parameters.AddWithValue("@Commercial_RegNo", txtRegCountry.Text);
          cmd.Parameters.AddWithValue("@Comm_Country", txtCmpRegNo.Text);
          cmd.Parameters.AddWithValue("@Cmp_EstablishDate", txtCmpEstdate.Text);
          cmd.Parameters.AddWithValue("@Cmp_DocPath", AFU1.FileName);
          cmd.Parameters.AddWithValue("@txtCmpAddress", txtCmpAddress.Text);
          cmd.Parameters.AddWithValue("@ddlAddrIn", ddlAddrIn.SelectedItem.Text);

          cmd.ExecuteNonQuery();
      }
      catch (Exception ex)
      {
         throw new Exception(ex.Message);
      }
      finally
      { 
         SqlCon.Close();
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:08:44.577

试试这个

```
protected void BtnCmpApproval_Click(object sender, EventArgs e)
    {
    SqlConnection SqlCon = new SqlConnection(GetConnectionString());
    string query = "INSERT INTO Company_Info2 VALUES (@lblCmpUserName,@txtCmpName,
    @txtRegCountry,@txtCmpRegNo,@txtCmpEstdate,@txtCmpAddress,@ddlAddrIn)";
    try
    {
     SqlCon.Open();
     SqlCommand cmd = new SqlCommand(query, SqlCon);
     cmd.CommandType = CommandType.Text;
     cmd.Parameters.AddWithValue("@lblCmpUserName", lblCmpUserName.Text);
     cmd.Parameters.AddWithValue("@txtCmpName", txtCmpName.Text);
     cmd.Parameters.AddWithValue("@txtRegCountry", txtRegCountry.Text);
     cmd.Parameters.AddWithValue("@txtCmpRegNo", txtCmpRegNo.Text);
     cmd.Parameters.AddWithValue("@txtCmpEstdate", txtCmpEstdate.Text);
     cmd.Parameters.AddWithValue("@Cmp_DocPath", AFU1.FileName);

     cmd.Parameters.AddWithValue("@txtCmpAddress", txtCmpAddress.Text);
     cmd.Parameters.AddWithValue("@ddlAddrIn", ddlAddrIn.SelectedItem.Text);
     cmd.ExecuteNonQuery();
  }
  catch (Exception ex)
  {
     throw new Exception(ex.Message);
  }
  finally
  { 
           SqlCon.Close();
  }
  } 
```

实际上，除了最后两个之外，您添加的参数都与 Query 中存在的参数不匹配。Query & Parameter 中定义的参数添加到命令中使用

```
cmd.Parameters.AddWithValue(...) 
```

或者

```
cmd.Parameters.Add(...) 
```

必须相同，否则肯定会出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T10:41:07.517

当您在上面的代码中编写 SqlCommand 时，就像您对 NET Runtime 说的那样。“嘿，我正在将此字符串发送`query`到 SqlServer，并带有命令集合中存在的参数的占位符。请用您将在集合中找到的参数值替换占位符”。现在 NET 运行时在您的字符串中搜索占位符，但没有与占位符 @lblCmpUserName 对应的参数，因此它会向您抱怨。（NET 停在第一个，但在第一个之后还有更多）

```
@lblCmpUserName,   -> No match found 
@txtCmpName,       -> No match found
@txtRegCountry,    -> No match found
@txtCmpRegNo,      -> No match found
@txtCmpEstdate,    -> No match found
@txtCmpAddress,    -> Found match 
@ddlAddrIn         -> Found match 
```

现在您有两个选择，更改占位符以匹配参数名称或更改参数名称以匹配占位符。这是你的选择。

此外，在解析字符串`query`时，NET 运行时会注意到您有 7 个占位符和 8 个参数。这将是另一个错误。您添加参数`@Cmp_DocPath`，但字符串没有占位符 -

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T10:05:32.707

```
@lblCmpUserName 
```

没有匹配的

```
cmd.Parameters.AddWithValue("@UserName", lblCmpUserName.Text); 
```

线为`@lblCmpUserName.`

添加这一行：

```
 cmd.Parameters.AddWithValue("@lblCmpUserName",  lblCmpUserName.Text); 
```

你仍然会得到错误。对于`@Parameter`您在 sql 语句中添加的每个内容，您都需要有一个匹配的`cmd.Parameters.AddWithValue`行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T07:05:48.200

我得到了解决方案，我在`INSERT`查询中犯了一个错误。

应该是这样的。

```
string query="INSERT INTO Company_Info2 VALUES     (@UserName,@Cmp_Name,@Comm_Country,
    @Commercial_RegNo,@Cmp_DocPath,  
    @Cmp_EstablishDate,@Cmp_Address,@IsAddress)"; 
```

# shell - 将 imagemagick 文件从 ec2 直接保存到 s3

> ID：11062494
> 
> 赞同：1
> 
> 时间：2012-06-16T10:03:39.357
> 
> 标签：shell, amazon-s3, amazon-ec2, amazon-web-services, imagemagick

我将图像从 url 下载到 ec2 实例（wget），使用 imagemagick（convert -actions $savedfilename）处理它，然后将其保存到 s3（使用 php api）。

1.  是否可以在ec2上处理图像并直接将其保存到s3而不写入s3卷？
2.  如果这是可能的，它是否有意义——它会更快/更便宜吗？
3.  是否还有其他措施可以提高流程的效率？
4.  是否有直接从 shell 保存到 s3 的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:23:34.433

我猜你的意思是*“......不写到**EBS**卷”*我是对的吗？您可以将 Wgets 输出直接通过管道传输到 ImageMagicks convert，如下所示：

```
wget -O - 'http://d24w6bsrhbeh9d.cloudfront.net/photo/4498158_700b_v1.jpg' | convert - test.png 
```

看一下[s3cmd](http://s3tools.org/s3cmd)，它将允许您直接从命令行与 S3 交互。我们的示例工作流程将如下所示：

```
wget -O - 'http://d24w6bsrhbeh9d.cloudfront.net/photo/4498158_700b_v1.jpg' | convert - test.png && s3cmd put --acl-public --guess-mime-type test.png s3://example.com/images/test.png 
```

这将为您提供以下结果，您可以使用正则表达式对其进行过滤以获取公共 URL：

```
File 'test.png' stored as s3://example.com/images/test.png (xxxx bytes)
Public URL of the object is: http://example.com.s3.amazonaws.com/images/test.png 
```

从文本中获取 URL：

```
<?php
  $reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";
  $cmd_output = "File 'test.png' stored as s3://example.com/images/test.png (xxxx bytes) Public URL of the object is: http://example.com.s3.amazonaws.com/images/test.png";
  if(preg_match($reg_exUrl, $cmd_output, $url)) {
    $image_url = $url[0];
  }
  else {
    // no url found …
  }
?> 
```

我想这是处理你的过程的一种优雅方式:) 我不确定它是否会更快或更便宜……也许是因为 EBS 的磁盘 I/O 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T15:36:21.963

从 aws s3 cli [cp 文档](https://docs.aws.amazon.com/cli/latest/reference/s3/cp.html)：

> 将本地文件流上传到 S3
> 
> 警告:: PowerShell 可能会更改编码或将 CRLF 添加到管道输入。
> 
> 以下 cp 命令将本地文件流从标准输入上传到指定的存储桶和密钥：
> 
> ```
> aws s3 cp - s3://mybucket/stream.txt 
> ```

与@dom的答案非常相似，您可以这样做

```
wget -O - 'http://d24w6bsrhbeh9d.cloudfront.net/photo/4498158_700b_v1.jpg' | convert - test.png | aws s3 cp - s3://example.com/images/test.png --acl public 
```

# php - 比较字符串不起作用php

> ID：11062495
> 
> 赞同：1
> 
> 时间：2012-06-16T10:03:53.757
> 
> 标签：php, string, comparison, explode, login-script

当我执行此代码时，用户是正确的，但通行证不正确，为什么会这样？它快把我逼疯了。

```
<?php
$user = $_POST['myusername'];
$pass = $_POST['mypassword'];
$file_handle = fopen("db.txt", "rb");
while (!feof($file_handle)){
    $line_of_text = fgets($file_handle);
    $parts = explode('=', $line_of_text);
    if($parts[0] == $user){
        echo $parts[0];
    }
    if($parts[1] == $pass){
        echo $parts[1];
    }
}
fclose($file_handle);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:27:04.110

试试这个，你可能会在你的输入或文件中的值中得到空白

```
if(trim($parts[0]) == trim($user)){
    echo $parts[0];
}
if(trim($parts[1]) == trim($pass)){
    echo $parts[1];
} 
```

# r - 如何避免在每个 \Sexpr{} 中使用 round()？

> ID：11062497
> 
> 赞同：30
> 
> 时间：2012-06-16T10:03:59.280
> 
> 标签：r, latex, sweave, knitr

`round()` 使用 Sweave/knitr 时有没有办法避免该功能？`round(,2)`每次都写真的很烦`\Sexpr{}`。我想在整个文档中保留两位小数。

感谢您的
帮助

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-17T15:47:38.913

如果你看过[包装](http://yihui.name/knitr/)[的动机](https://github.com/yihui/knitr#motivation)，你可能知道我是里面最讨厌的人。我很久以前就向 R core 建议过 Sweave，但它被忽略了，所以我开始了自己的包。[`knitr`](http://yihui.name/knitr/)`round()``\Sexpr{}`

虽然 Josh O'Brien 的回答是绝对正确的，但我应该说你真的只需要`options(digits = 2)`with `knitr`，并且不需要重置默认的内联钩子，因为默认的钩子尊重这个选项。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-16T16:17:08.127

在`knitr`中，**内联**钩子可用于处理`\Sexpr{}`语句的输出。因此，如果您只想打印内联代码的小数点后 2 位数字（同时不考虑整体`digits`选项），您可以这样做：

```
## First have a look at the default inline hook function
knit_hooks$get("inline")

## Then customize it to your own liking
inline_hook <- function(x) {
    if(is.numeric(x)) x <- round(x, 2)
    paste(as.character(x), collapse=", ")
}
knit_hooks$set(inline = inline_hook) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-16T19:23:16.877

首先，您可能想要使用`formatC`而不是`round`获得两位数，即使它们为零。在 Sweave 中没有很好的方法来做到这一点。最好的选择可能是简单地创建一个具有短名称的新函数来执行您想要的格式；就像是

```
p <- function(x) {formatC(x, format="f", digits=2)} 
```

这至少节省了一点打字：

```
The answer is $\Sexpr{p(x)}$. 
```

不幸的是，如果不使用新的 Sweave 驱动程序，我认为没有其他事情可做（也许这是另一个尝试的理由`knitr`，这似乎正在快速取得进展）。Sweave 对`Sexpr`语句中的内容执行此操作，然后将`Sexpr`调用替换为结果。

```
as.character(eval(parse(text = cmd), envir = .GlobalEnv)) 
```

但是，你不能只写一个新版本的`as.character`; 除了可能以其他意想不到的方式改变行为的问题之外，由于命名空间，`base`即使全局环境中有另一个版本，它也总是调用该版本。

# android - 通过 Rest API 向 Redmine 添加问题

> ID：11062498
> 
> 赞同：0
> 
> 时间：2012-06-16T10:04:19.807
> 
> 标签：android, rest, redmine

[Redmine](http://www.redmine.org/)支持 REST API。它还提供了一个Java库，但它与android> 2.2兼容。我需要有关如何编写附加问题的提示，但与 android 兼容的版本应为 1.6。提前谢谢你，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T20:38:50.830

I had the same problem. My solution was to checkout a copy of the [redmine-java-api](https://github.com/taskadapter/redmine-java-api) and modify it. This is what I ended up having to do:

1.  Replace all references to JSONWriter with JSONStringer.
2.  Replace all slf4j logging with android logging
3.  Followed these answers to replace the encoding method [https://stackoverflow.com/a/2533538](https://stackoverflow.com/a/2533538), [https://stackoverflow.com/a/8059544](https://stackoverflow.com/a/8059544).
4.  Followed this answer to replace the PoolingClientConnectionManager [https://stackoverflow.com/a/12045168](https://stackoverflow.com/a/12045168)
5.  Follow this answer to replace the NaiveSLLFactory [https://stackoverflow.com/a/7636810](https://stackoverflow.com/a/7636810)

Alternatively, If you look at this [issue](https://github.com/taskadapter/redmine-java-api/issues/49), another person has solved the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:21:31.853

尝试添加库的源代码（如果有），并将 Android 版本设置为 1.6。然后所有不受支持的类都将可见。然后你必须实现这些类。

基于 2.2+ 的限制，我猜这个限制是这个库使用的 Http 客户端（即[http://developer.android.com/reference/android/net/http/AndroidHttpClient.html](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)）。

希望这可以帮助！

如果您有任何其他具体问题，请不要犹豫再次询问我们！

# powershell - 并非我的所有 PowerShell v2 作业都能运行

> ID：11062499
> 
> 赞同：1
> 
> 时间：2012-06-16T10:04:39.717
> 
> 标签：powershell, jobs

我正在尝试使用作业来同时运行 PowerShell 实例，以便我的脚本可以更快地完成。我调用的脚本都是独立的，不需要互斥等。问题是它会调用 50 个脚本中的 5 个然后它会停止。其余的脚本似乎永远不会运行。等待工作有什么问题吗？同样由于某种原因，实际运行的五个脚本似乎被执行了两次，所以我得到了双倍的输出......

```
$Invocation = (Get-Variable MyInvocation -Scope 1).Value
$ScriptDir = Split-Path $Invocation.MyCommand
$ScriptDir -match '(?<content>.*\d)' | out-null
$MainDir = $matches['content']
$ScriptName = $MyInvocation.MyCommand.Name
$Items = Get-ChildItem -Path $MainDir | Where-Object {$_.mode -match "d"}

$jobMax = 4
$jobs = @()

$jobWork = {
    param ($MyInput,$dir)
    $command = "$dir\" + $MyInput.name + "\" + $MyInput.name + ".ps1"
    Start-Process powershell.exe -argumentlist $command -WindowStyle Hidden #-wait
}

foreach ($Item in $Items) {
    if ($jobs.Count -le $jobMax) {
        $jobs += Start-Job -ScriptBlock $jobWork -ArgumentList $Item,$MainDir
    } else {
        $jobs | Wait-Job -Any
    }
}
$jobs | Wait-Job 
```

编辑：另外，由于我使用的是启动进程 powershell，所有脚本同时运行（除非我启用 -wait），而不需要启动作业。我想使用工作，以便我可以节流。也许我有一份工作开始一个新的powershell实例是错误的逻辑？

Edit2：因为我认为使用 start-job 启动一个新的 poweshell 实例是错误的。这样，在打开新的 powershell 实例后工作就完成了，实际的脚本内容与工作的开始和结束无关。这是我的固定脚本:)

```
$Invocation = (Get-Variable MyInvocation -Scope 1).Value
$ScriptDir = Split-Path $Invocation.MyCommand
$ScriptDir -match '(?<content>.*\d)' | out-null
$MainDir = $matches['content']
$ScriptName = $MyInvocation.MyCommand.Name
$Items = Get-ChildItem -Path $MainDir | Where-Object {$_.mode -match "d"}

$maxJobs = 4
$jobs = @()

foreach ($Item in $Items) {
    $command = "$MainDir\" + $Item.name + "\" + $Item.name + ".ps1"
    $jobs += Start-Job -filepath $command -ArgumentList $MainDir,$Item 
    $running = @($jobs | ? {$_.State -eq 'Running'})

    while ($running.Count -ge $maxJobs) {
        $finished = Wait-Job -Job $jobs -Any
        $running = @($jobs | ? {$_.State -eq 'Running'})
    }      
}
Wait-Job -Job $jobs > $null 
```

我必须编辑所有脚本，以便可以将参数作为参数传递，但现在一切正常。该线程很有帮助[使用 Start-Job 同时运行多个脚本块（而不是循环）](https://stackoverflow.com/questions/9601118/running-multiple-scriptblocks-at-the-same-time-with-start-job-instead-of-loopin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:11:50.900

我的猜测是（在查看您的代码之后）您只会开始前 4 个工作。作业（即使已完成）不会自动消失。完成后您需要清理它们（也许是 Receive-Job 的第一个）。如果你不这样做 - PowerShell 将旋转 $jobsMax 工作，一旦完成 - 我会很惊讶看到任何其他“新人”。

添加一些接收/删除作业逻辑，它应该会更好地工作。

另外：据我所知，您正在运行脚本，所以我建议在 powershell.exe 上使用 -File 参数而不是 -command。

HTH 巴特克

# android - 在 Android 小部件中处理 onClick 和接收器事件

> ID：11062501
> 
> 赞同：1
> 
> 时间：2012-06-16T10:05:06.020
> 
> 标签：android, android-widget

目前，我有一个服务 TimerService，它可以广播更新、里程碑和警报。

在清单文件中：

```
 <!-- WIDGET! -->
    <service android:name=".UpdateWidgetService" android:permission="android.permission.BIND_REMOTEVIEWS" ></service>
    <receiver
        android:icon="@drawable/icon"
        android:label="JustInTime"
        android:name="com.JustInTime.widget.WidgetProvider" >
        <intent-filter >
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_info" />
    </receiver> 
```

UpdateWidgetService 会为 TimerService 注册接收器吗？一个服务正在监听另一个这样的服务似乎是错误的。此外，在小部件中注册 onClick 功能是否正常，还是必须使用 setOnClickPendingIntent？

目标：拥有一个像闹钟一样工作的小部件，它可以监听来自服务的广播，然后根据需要更新小部件。此更新应更新 UI，其中有多个视图项。

如果您有很好的小部件示例，请分享。从我所看到的来看，它们中的大多数都是非常基本的。

# cairo - 如何在两条曲线之间创建渐变？

> ID：11062502
> 
> 赞同：0
> 
> 时间：2012-06-16T10:05:16.880
> 
> 标签：cairo

我有两条曲线，一条在另一条之内，例如圆内的椭圆。我需要在它们之间创建渐变。

这是更好解释的公式：

```
d_e = min_dist(ellipse,pixel)
d_c = min_dist(circle,pixel)
pixel_color = (e_color * d_e + c_color * d_c) / (d_e + d_c) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:11:53.087

开罗只有由两个圆定义的放射状图案，而不是椭圆和圆。

其他替代方案是网格梯度（cairo 1.12 中的新功能），但为此您需要自己计算分段近似值。听起来很难，只是一个粗略的近似值。

所以我想我能提出的最好建议是：通过自己设置单个像素来自己绘制那个东西，并将结果用作图像表面。

# java - 整数 => 数字，反之亦然

> ID：11062507
> 
> 赞同：1
> 
> 时间：2012-06-16T10:05:40.230
> 
> 标签：java, integer

Java中有没有办法将整数转换为个位数，反之亦然。像这样：

所以我有数字 345。我想把它分解为 3、4 和 5——三个单独的数字。

我有数字 3、4 和 5。我想把它们放在一起做 345？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:12:29.213

您必须使用`mod`和的组合`divide`。

这是一个简短的方法 -

```
public void integerToSingleDigit(int number){
 while (number > 0) {
    System.out.print(number % 10 + " "); // get u the right most single digit
    number = number / 10; // remove the single digit from the right
 } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:10:03.740

好吧，您可以轻松地将其转换为字符数组，然后从那里开始：

```
char[] parts = Integer.toString(value).toCharArray();
int[] digits = new int[parts.length];
for (int i = 0; i < parts.length; i++) {
  digits[i] = parts[i] - '0';
} 
```

（您在这里并不真正*需要*char 数组 - 您可以只使用字符串并使用`length()`and`charAt()`而不是`length`和索引器 - 但我发现这更清楚。）

然后重新组装，只需执行相反的操作 -`char[]`从数字创建 a （通过添加`'0'`到每个数字），然后从 . 创建一个字符串`char[]`，然后使用`Integer.parseInt`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T10:24:53.450

最简单的方法如下

```
for (char c : String.valueOf(numberToSplit).toCharArray()) {
  int digit = Character.getNumericValue(c);
} 
```

# android - TextView 的 HTML 格式

> ID：11062508
> 
> 赞同：5
> 
> 时间：2012-06-16T10:05:48.697
> 
> 标签：android, android-layout, string-formatting, textview

我对 TextView 元素何时以格式化形式显示文本的“规则”有点困惑。

像一个字符串

```
"There are <i>different ways</i> of coding.\n"; 
```

在我编码时显示没有任何格式（包括 HTML 代码）

```
tvMyTextView.setText("There are <i>different ways</i> of coding.\n"); 
```

但是当我在 strings.xml 中定义相同的字符串然后加载时

```
tvMyTextView.setText(R.strings.TestString); 
```

它显示强调。

尝试在 TextView 中嵌入 URL 时，我感到更加困惑，如下所示：

```
"Click <a href="http://www.poon-world.com">here</a> to switch on the red light.\n"; 
```

不用说，我已经尝试了 TextView 的各种属性选项——但除非我错过了什么，否则它们似乎并没有太大的区别。在某些情况下，URL 在文本中以蓝色编码并且可以单击，在其他情况下，我可以看到 HTML 格式。在其他情况下，它是彩色编码的，并且 URL 似乎以某种方式编码在文本中 - 但是当我单击它时没有任何反应。关于 URL 的嵌入，与其他具有“简单”HTML 格式的示例不同，到目前为止，我什至无法找到关于何时有效以及何时无效的规则。谁能帮我解开我头上的结..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T10:49:56.773

实际上，来自Android Docs ..

```
public final void setText (CharSequence text) 
```

设置 TextView 的字符串值。**TextView 不接受类似 HTML 的格式**，您可以对 XML 资源文件中的文本字符串执行此操作。要设置字符串样式，请将 android.text.style.* 对象附加到 SpannableString，或查看可用资源类型文档以获取在 XML 资源文件中设置格式化文本的示例。

但，

```
public final void setText (int resid) 
```

*   没有更多的规范..

但是来自Android Resource String docs..

您可以使用 HTML 标记为字符串添加样式。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="welcome">Welcome to <b>Android</b>!</string>
</resources> 
```

支持的 HTML 元素包括：

```
<b> for bold text.
<i> for italic text.
<u> for underline text. 
```

有时您可能想要创建一个样式化的文本资源，它也用作格式字符串。通常，这不起作用，因为该`String.format(String, Object...)`方法将从字符串中删除所有样式信息。解决此问题的方法是编写带有转义实体的 HTML 标记，然后`fromHtml(String)`在格式化发生后用 恢复。

关于您的 URL 字符串，...

```
tvMyTextView.setText(Html.fromHtml("Click <a href="http://www.poon-world.com">here</a> to switch on the red light.\n")); 
```

另请查看此 SO Question [Set TextView text from html-formatted string resource in XML](https://stackoverflow.com/questions/3235131/set-textview-text-from-html-formatted-string-resource-in-xml)

和

[Android 字符串资源](http://developer.android.com/guide/topics/resources/string-resource.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T10:11:42.377

```
tvMyTextView.setText(Html.fromHtml("There are <i>different ways</i> of coding.\n")); 
```

也试试

下面的链接用于链接化，以便自动分配网站链接。

[http://developer.android.com/resources/articles/wikinotes-linkify.html](http://developer.android.com/resources/articles/wikinotes-linkify.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:31:35.897

在我自己的问题中添加一些注释并且在收到到目前为止的答案之后，我只能得出结论，似乎没有一种可靠的方法可以在任何地方都有效。

在某些情况下 - 根据我的经验，如果格式化的 URL 是纯文本的一部分并且没有被标签包围（例如[http://www.poon-world.com](http://www.poon-world.com)，即使只是“Poon-World.com”似乎也可以在大多数情况下），只需设置 TextView 的属性似乎就足够了，链接将是可点击的。但是，如果链接嵌入在 HTML 标记中并且应该可以从某些链接文本中单击，那么似乎除了使用 Html.fromHtml(..) 之外别无他法。

但也有一些我无法解释的特殊情况：在一些活动/布局中，我使用“嵌入式” URL 并设置了前面提到的 Click-properties，不要使用 Html.fromHtml .. 和惊喜！，单击文本中确实创建的链接确实会打开浏览器，但只有在 OnCreate-Event 的代码中添加了以下行之后：

```
myTextView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

（我在另一个线程中发现了这个技巧，感谢作者）不知道为什么，这似乎是Android解析和评估字符串资源的方式。我刚刚提到，除了已经说过的所有内容之外，其他所有寻找解决方案并感到困惑的人都不会开始认为他开始失去理智 - 不，只需测试此页面上提到的方法，通常应该锻炼。

# jsf-2 - 如何使用 PrimeFaces 数据表进行 CRUD 操作

> ID：11062511
> 
> 赞同：0
> 
> 时间：2012-06-16T10:06:03.860
> 
> 标签：jsf-2, datatable, primefaces, crud

我有一个使用 PrimeFaces 3.3 数据表创建的数据表。该表是从数据库中填充的。

在行选择中，我填充了类似的字段进行编辑。编辑后，我想写入数据库。同样，我希望能够在文本项中创建新记录，并且一旦用户将其保存，数据表就会被刷新。

数据选择工作正常，但是，当我想不出添加/编辑/删除的方法时，不同的错误会带来不同的方法，我已经尝试了所有在谷歌上可以找到的方法。这些错误有时是逻辑错误，有时是 nullpointerexception 或类启动错误。我已经在网上尝试了十几个用于 jtable + crud 的示例，但似乎没有什么对我有用。

例如，数据显示在数据表中，并且文本字段中的即时选择也已完成，但是当我单击添加按钮时，没有任何反应，我希望“编辑属性”面板中的字段被清除，有时我得到一个`NullPointerException`，即使我修改文本项中的值并按保存，不写入值。当我调试时，我发现错误正在`em.getTransaction().begin`排队。

如果我`em.joinTransaction`再次使用它会在提交语句中引发错误。由于我是 Java EE 的新手，我认为我犯了一些可怕的错误。

如果有人可以举一些类似场景的例子，我将不胜感激：jtable + 绑定字段 + 添加/编辑/删除操作。

下面是我的代码：

```
@Entity
@Table(name = "users")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Users.findAll", query = "SELECT u FROM Users u"),
    @NamedQuery(name = "Users.findByIduser", query = "SELECT u FROM Users u WHERE u.iduser = :iduser"),
    @NamedQuery(name = "Users.findByLogin_Name", query = "SELECT u FROM Users u WHERE u.login_name = :login_name"),
    @NamedQuery(name = "Users.findByFullName", query = "SELECT u FROM Users u WHERE u.fullName = :fullName"),
    @NamedQuery(name = "Users.findByPassword", query = "SELECT u FROM Users u WHERE u.password = :password"),
    @NamedQuery(name = "Users.authenticate", query = "SELECT u FROM Users u WHERE u.login_name = :login_name and u.password = :password and u.active=1"),
    @NamedQuery(name = "Users.findByActive", query = "SELECT u FROM Users u WHERE u.active = :active"),
    @NamedQuery(name = "Users.findByUserType", query = "SELECT u FROM Users u WHERE u.userType = :userType"),
    @NamedQuery(name = "Users.findByEmail", query = "SELECT u FROM Users u WHERE u.email = :email"),
    @NamedQuery(name = "Users.findByPhone", query = "SELECT u FROM Users u WHERE u.phone = :phone"),
    @NamedQuery(name = "Users.findByCreated", query = "SELECT u FROM Users u WHERE u.created = :created"),
    @NamedQuery(name = "Users.findByUpdated", query = "SELECT u FROM Users u WHERE u.updated = :updated")})

public class Users implements Serializable {
    @Basic(optional =     false)
    @NotNull
    @Column(name = "created")
    @Temporal(TemporalType.TIMESTAMP)
    private Date created;

    @Basic(optional =     false)
    @NotNull
    @Column(name = "updated")    
    @Temporal(TemporalType.TIMESTAMP)
    private Date updated;

    private static final long serialVersionUID = 1L;
    @Id
     @GeneratedValue(strategy = GenerationType.AUTO ) 
    @Basic(optional = false)
    @NotNull
    @Column(name = "iduser")
    private Integer iduser;
    //getter & setters ....

    @Stateless
    public class UsersFacade extends AbstractFacade<Users>  {
        @PersistenceContext(unitName = "VUProjectPU")
        private EntityManager em;
    ///////////////////////////////////////////////////////////////////////////////
        @Override
        protected EntityManager getEntityManager() {
            return em;
        }

    ///////////////////////////////////////////////////////////////////////////////
        public UsersFacade() {
            super(Users.class);
        }
    ///////////////////////////////////////////////////////////////////////////////
        public Users authenticate(String login_id, String pwd) {
            List <Users> userList = new ArrayList();
            Users user =null;
            userList =  em.createNamedQuery("Users.authenticate")
                    .setParameter("login_name", login_id) 
                    .setParameter("password", pwd)
                    .getResultList();
            if (userList.isEmpty()) {
                return null;
            }
            else{
                user = userList.get(0);
            }
            return user;
        }

    ///////////////////////////////////////////////////////////////////////////////
        public Users deactivateUser (Users u){
            u.setActive(false);
            return u;
        }
    ///////////////////////////////////////////////////////////////////////////////
        public Users activateUser (Users u){
            u.setActive(true);
            return u;
        }

    ///////////////////////////////////////////////////////////////////////////////
        public Users createAnalyst(Users u){
            u.setActive(false);
            u.setUserType("Analyst");
            u.setCreated(new Date());
            u.setUpdated(new Date());
            em.persist(u);
            em.flush();
            em.refresh(u);
            return u;
        }
    }

    @ManagedBean
    @ViewScoped
    public class UsersList implements Serializable {
        private List<Users> uList;
        private Users selUser ;
        private Users user;
        private String operation;
        private @EJB UsersFacade ufs;     
        private FacesContext context;
        private FacesMessage msg;
        private Boolean edit=false;
        public UsersList(){
            ufs = new UsersFacade();   
        }

        public void getAllUsersList(){
            uList=ufs.findAll();           
        }

        public Boolean isEdit() {
            return edit;
        }

        public void add(){
            context = FacesContext.getCurrentInstance();
                operation = "new";
                edit=true;
                selUser = new Users();            
        }

        public void save(){
            context = FacesContext.getCurrentInstance();
                if (operation.equals("new")){
                    ufs.create(selUser);
                }
                ufs.save(selUser);
                operation = null;
                msg = new FacesMessage(FacesMessage.SEVERITY_INFO,"Success", "Record Saved");
                context.addMessage(null, msg);
                edit=false;
                    getAllUsersList(); //refresh table
        }

        public void delete(Users u){
            context = FacesContext.getCurrentInstance();
                ufs.delete(u);
                msg = new FacesMessage(FacesMessage.SEVERITY_INFO,"Success", "Record Deleted");
                context.addMessage(null, msg);
        }

        public void refresh(){
            context = FacesContext.getCurrentInstance();
                    getAllUsersList();
                msg = new FacesMessage(FacesMessage.SEVERITY_INFO,"Success", "Data Refreshed");
                context.addMessage(null, msg);
        }

        public List<Users> getuList() {
            uList = ufs.findAll();
            return uList;
        }

        public void setuList(List<Users> uList) {
            this.uList = uList;
        }

        public Users getSelUser() {
            return selUser;
        }

        public void setSelUser(Users selUser) {
            this.selUser = selUser;
        }

        public void onRowSelect(SelectEvent event) {
            edit=true;
            context = FacesContext.getCurrentInstance();
            msg = new FacesMessage("User Selected", ((Users) event.getObject()).getLogin_name());
            context.addMessage(null, msg);
        }

        public void onRowUnSelect(UnselectEvent event) {
            edit=false;
            context = FacesContext.getCurrentInstance();
            msg = new FacesMessage("User Unselected", ((Users) event.getObject()).getLogin_name());
            context.addMessage(null, msg);
        }

        public Users getUser() {
            return user;
        }
    }

below is user.xhtml

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html   xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui" 
        xmlns:f="http://java.sun.com/jsf/core">
    <body>
        <ui:composition template="./../../WEB-INF/Templates/Template.xhtml">
            <ui:define name="menu">
            </ui:define>
            <ui:define name="content">
                <h:form id="form">
                    <p:growl id="growl" showDetail="true"/>  

                    <p:dataTable id="utable" var="users" 
                                 value="#{usersList.getuList()}" 
                                 selection="#{usersList.selUser}"  
                                 rowKey="#{users.iduser}"
                                 selectionMode="single" 
                                 paginator="true" rows="5" 
                                 paginatorPosition="bottom" 
                                 editable="true"
                                 >                                
                        <p:ajax event="rowSelect" listener="#{usersList.onRowSelect}" update=":form:display :form:growl"  />  
                        <p:ajax event="rowUnselect" listener="#{usersList.onRowUnSelect}" update=":form:growl"/>  

                        <f:facet name="header">  
                            List of Users  
                        </f:facet>  
                        <p:column id="login" sortBy ="#{users.login_name}">
                            <f:facet name="header">Login</f:facet> 
                            <h:outputText value="#{users.login_name}" />
                        </p:column>
                        <p:column id="fullname" sortBy ="#{users.fullName}">
                            <f:facet name="header">User Name</f:facet>
                            <h:outputText value="#{users.fullName}" />
                        </p:column>
                        <p:column id="email" sortBy ="#{users.email}">
                            <f:facet name="header">E-mail</f:facet>
                            <h:outputText value="#{users.email}" />
                        </p:column>
                        <p:column id="phone" sortBy ="#{users.phone}">
                            <f:facet name="header">Phone</f:facet>
                            <h:outputText value="#{users.phone}" />
                        </p:column>
                        <p:column id="created" sortBy ="#{users.created}">
                            <f:facet name="header">Created On</f:facet>
                            <h:outputText value="#{users.created}" />
                        </p:column>
                        <p:column id="active" sortBy ="#{users.active}">
                            <f:facet name="header">Active</f:facet>
                            <h:outputText value="#{users.active}" />
                        </p:column>
                        <p:column id="userType" sortBy ="#{users.userType}">
                            <f:facet name="header">User Type</f:facet>
                            <h:outputText value="#{users.userType}" />
                        </p:column >                                

                    </p:dataTable>
                    <p:panel header="Edit User Properties">

                        <h:panelGrid id="display" columns="6" cellpadding="4" >
                            <h:outputText value="Login:" />
                            <p:inputText readonly="#{usersList.edit}"
                                         value="#{usersList[usersList.edit ? 'user' : 'selUser'].login_name}" />

                            <h:outputText value="Password:" />
                            <p:inputText readonly="#{usersList.edit}"
                                         value="#{usersList[usersList.edit ? 'user' : 'selUser'].password}" />

                            <h:outputText value="User Name:" />
                            <p:inputText readonly="#{usersList.edit}"
                                         value="#{usersList[usersList.edit ? 'user' : 'selUser'].fullName}" />

                            <h:outputText value="E-mail:" />
                            <p:inputText readonly="#{usersList.edit}"
                                         value="#{usersList[usersList.edit ? 'user' : 'selUser'].email}" />

                            <h:outputText value="Phone:" />
                            <p:inputText readonly="#{usersList.edit}"
                                         value="#{usersList[usersList.edit ? 'user' : 'selUser'].phone}" />

                            <h:outputText value="User Type:" />
                            <p:inputText readonly="#{usersList.edit}"
                                         value="#{usersList[usersList.edit ? 'user' : 'selUser'].userType}" />
                            <h:outputText value="Active:" />
                            <p:selectBooleanCheckbox 
                                value="#{usersList[usersList.edit ? 'user' : 'selUser'].active}"/>
                        </h:panelGrid>

                        <h:panelGrid id="command" columns="6"  cellpadding="4" >
                            <p:commandButton id="new" value="New" actionListener="#{usersList.add()}"  
                                             update="result,utable,display"
                                             rendered="#{usersList.edit}}">                                
                            </p:commandButton>
                            <p:commandButton id="save" value="Save" actionListener="#{usersList.save()}"  update="result utable">                                
                            </p:commandButton>
                            <p:commandButton id="delete"  value="Delete" actionListener="#{usersList.delete()}"  update="result utable">                                
                            </p:commandButton>
                            <p:commandButton id="refresh"  value="Refresh" actionListener="#{usersList.refresh()}"  update="result utable">                                
                            </p:commandButton>
                        </h:panelGrid>
                        <p:messages id="result" showDetail="true" autoUpdate="true"/>  
                    </p:panel>
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html> 
```

# ruby-on-rails-3 - 如何在模型中调用 ApplicationController 辅助方法？回报率

> ID：11062514
> 
> 赞同：0
> 
> 时间：2012-06-16T10:06:33.333
> 
> 标签：ruby-on-rails-3, model, helpermethods, applicationcontroller

伙计们，我在 ApplicationController 中有一个辅助方法，如下所示

```
class ApplicationController < ActionController::Base
  helper_method :current_user
end 
```

我想在我的模型（比如项目）中调用它，如下所示：

```
class Project < ActiveRecord::Base
  after_save :update_other_tables

  private

  def update_other_tables
  # if project saves, Create a new insteance into User Projects
  @userproject=UserProject.new(
   :user_id=>User.current_user.id,
   :project_id=>self.id
  )
  @userproject.save
end 
```

在这里，我得到了类似**未定义方法`current_user'的**错误 那么，如何在模型中调用这个方法呢？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:26:41.447

我会通过以下方式做到这一点：

```
class ApplicationController < ActionController::Base
  # Assignment method
  def current_user=(user)
    @current_user = user
  end

  # Returns the current user, nil otherwise
  def current_user
    @current_user
  end
end 
```

现在，当用户登录时，您可以设置： `current_user = the_user`

从那时起，您可以执行以下操作： `current_user.id`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:11:23.443

**不是一个红宝石人**，但我猜这里的用户不是指你的控制器命名空间中存在的用户，这就是为什么对象上没有方法 current_user 。你可能需要将用户对象传递给你的辅助方法或只是通过id..

上述理论来自我在.Net MVC中处理类似问题的经验，所以如果我错了请纠正我，我将删除答案..

PS：评论太长了

# jsf-2 - 在 Primefaces 中单击命令按钮时面板未呈现

> ID：11062519
> 
> 赞同：1
> 
> 时间：2012-06-16T10:06:57.217
> 
> 标签：jsf-2, primefaces, panel

当我偶然发现这个问题时，我正在玩 primefaces 组件......

我有一个示例页面，其中包含以下内容，

```
<h:form>
  <p:panel id="p1">
  <p:commandButton value="display" actionListener="#{myTestBean.display}" update="p2">     </p:commandButton>

  </p:panel>

  <p:panel id="p2" rendered="#{myTestBean.show}">

  <p:inputText value="#{myTestBean.val1}" id="t1"></p:inputText>
  <p:inputText value="#{myTestBean.val2}" id="t2"></p:inputText>
  <p:commandButton value="click me" update="@form" action="#{myTestBean.disply}"></p:commandButton>

  </p:panel>
   </h:form> 
```

我的支持 bean 包含以下内容，

```
 public class Testbean implements Serializable {
    private String val1;
  private String val2;

  private boolean show;

    //getters and setters for the above...

        public void display(){

    if(show == false){
        setShow(true);
    }

}

public void disply(){
    System.out.println("I am here");
    val1 = "hi";
    val2 = "hello";
    if(show == false){
        setShow(true);
    }

}
} 
```

现在，这里的问题是，当我单击第一个按钮（显示）时，下面的面板（p2）会正确呈现。但是，当我单击第二个按钮（单击我）时，面板会被隐藏，并且单击第二个按钮时，它永远不会转到支持 bean 方法“disply()”。

我在第二个按钮中使用了动作监听器，但同样的行为。另外，我在第二个按钮中给出了 update = "p2" ，即使这并没有产生我想要的结果。

谁能帮我解决这个问题，让我知道我在哪里做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T13:46:25.970

需要将 bean 放置在视图范围内，以便记住同一视图上的所有先前 (ajax) 操作。

```
@ManagedBean
@ViewScoped
public class TestBean {
    // ...
} 
```

当 bean 放置在请求范围内时，`boolean show`将重新初始化为默认值`false`，因此当 JSF 正在寻找要调用的操作方法时`rendered`属性将评估，因此永远不会找到和调用操作方法。`false`

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/)
*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T21:08:23.260

使用`actionListener="#{myTestBean.display}"`时，`backinbean`方法应为

```
public void display(**ActionEvent event**){

    if(show == false){
        setShow(true);
    }

} 
```

并且必须声明一个 ActionEvent 参数。

# networking - 如何在 DDoS 下查看网站

> ID：11062523
> 
> 赞同：-3
> 
> 时间：2012-06-16T10:07:32.837
> 
> 标签：networking, browser, ddos

我需要访问当前受到 DDoS 攻击或负载过大的站点。有什么办法吗？也许浏览器或某些端口中的一些特定选项，或其他任何东西？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:15:16.710

可能会发生各种类型的 DDoS 攻击，但您访问其中的网站的机会几乎是靠运气。

*   内存 DDOS - 当攻击者利用代码中的特定缺陷来缓存大量数据并在内存之外运行服务器时，就会发生这种情况。结果将是许多缓慢的连接延伸到中止。你在这里什么都做不了，等着吧。

*   网络 DDOS - 当大量数据从攻击者进入网络时会发生这种情况，在这种情况下，您有时可以访问它，但耐心是一种美德。但是在数据被发回之前，您的连接可能会超时

*   CPU DDOS - 当攻击者利用代码中的特定缺陷来处理大量数据时，就会发生这种情况，从而导致 CPU 飙升。同样，这是一个等待的场景，因为可能没有足够的汁液来处理请求。

**在 DDOS 中，处理此类事情的最佳方法恐怕是等待，用更多数据访问已经关闭的网站也是不礼貌的；）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:09:14.473

DDoS 的全部目的是阻止访问该站点 :-) 因此，请联系您的网络管理员，以便他将防火墙配置为阻止除您之外的所有 IP 地址访问该站点。

# facebook - 如何与访问令牌共享？

> ID：11062525
> 
> 赞同：0
> 
> 时间：2012-06-16T10:07:52.720
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-access-token

我已经编写了这段代码，但它只有在我已经登录 facebook 时才有效，否则会出现一个弹出窗口，需要我使用电子邮件和密码才能登录 facebook。

这是代码：

```
window.fbAsyncInit = function () {
    FB.init({
        appId: 'xxx',
        frictionlessRequests: true,
        status: true,
        cookie: true,
        xfbml: true,
        oauth: true
    });

    function update(response) {
        if (response.authResponse) {
            FB.api('/me', function (info) {
                login(response, info);
            });

        } else {

        }
    }

    FB.getLoginStatus(update);
};
(function () {
    var e = document.createElement('script');
    e.async = true;
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
}());

function login(response, info) {
    if (response.authResponse) {
        publish();
    }
}

function publish() {
    var publish = {
        method: 'feed',
        access_token: '<?php echo $token; ?>',
        message: 'How are you ?',
        name: 'hi friends',
        caption: 'yuhuuuuuuuu',
        description: (' '),
        link: 'http://www.example.com',
        picture: 'http://cdn1.hark.com/images/000/004/514/4514/original.jpg',
        actions: [{
            name: 'Hello',
            link: 'http://www.example.com/'
        }],
        user_message_prompt: 'Share on facebook'
    };

    FB.ui(
    publish, function (response) {
        if (response && response.post_id) {
            alert('Post was published.');

        } else {
            alert('Post was not published.');
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:36:49.963

在您的`update`方法中，`else`您应该在空白处调用[FB.login](http://developers.facebook.com/docs/reference/javascript/FB.login/)方法：

> 调用 FB.login 会提示用户使用 OAuth 对话框对您的应用程序进行身份验证。

但是，您不能只这样做：

```
function update(response) {
    if (response.authResponse) {
        FB.api('/me', function (info) {
        login(response, info);
        });

    } else {
        FB.login(function(response) {
            if (response.authResponse) {
                console.log("user is logged in!", response.authResponse);
            }
        });
    }
} 
```

正如文档中所述：

> 调用 FB.login 会导致 JS SDK 尝试打开一个弹出窗口。因此，该方法只能在用户点击事件后调用，否则弹出窗口将被大多数浏览器阻止。

您必须向用户显示一个按钮或告诉他单击以登录的东西，然后您可以调用该`FB.login`方法。

# java - 观察和通知

> ID：11062532
> 
> 赞同：2
> 
> 时间：2012-06-16T10:08:52.917
> 
> 标签：java

我必须实现一个通知服务并发送一条包含一些关于音乐的新内容的消息。

```
 public class FilterByMusic implements Observer {

    private String music;
    private Observable observe;

    public FilterByMusic(String music, Observable observe) {
        this.music = music;
        this.observe = observe;
    }

    @Override
    public void update(Observable o, Object arg) {
        System.out.println(arg);
    }
} 
```

我创建了另一个类，它用这种方法扩展了 Observable

```
 public void newMusicNotify() {
    //new music here.. 
    this.setChanged();
    this.notifyObservers(music);
    } 
```

因此，如果有新音乐它会通知所有观察该对象的观察者，它就会起作用。但是现在我想要一个过滤器，它只向观察者发送一条消息，如果它是由我在 FilterByMusic 中作为参数的特定音乐发出的。我有一个想要通知所有新音乐的观察者和一个只想要特定音乐的观察者（因为他不喜欢所有类型的音乐）我该怎么做？

我感谢你所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:22:28.157

如果你想有不止一个`Observable`使用某种`Container`like `Map`（即`map["rockObserver"]`），并且进入方法`update(Observable o, Object arg)`使用`switch`取决于`music`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T10:12:16.577

我建议不要使用 Java 的 oberver 接口，而是自己做。这样，您将更加灵活。

# service - 无法将瘦 Web 服务器作为服务运行 - 瘦：无法识别的服务

> ID：11062533
> 
> 赞同：3
> 
> 时间：2012-06-16T10:08:56.547
> 
> 标签：service, thin

我尝试根据[RVM 和 Thin、root 与本地用户](https://stackoverflow.com/questions/3230404/rvm-and-thin-root-vs-local-user)以及[http://wiki.rubyonrails.org/deployment/nginx-thin?rev=1233246014设置瘦服务](http://wiki.rubyonrails.org/deployment/nginx-thin?rev=1233246014)

而且我**变瘦**了：启动服务时无法识别服务。如何解决？

```
~ > sudo /usr/sbin/update-rc.d -f thin defaults 
update-rc.d: warning: thin stop runlevel arguments (0 1 6) do not match LSB Default-Stop values (S 0 1 6)
 Adding system startup for /etc/init.d/thin ...
   /etc/rc0.d/K20thin -> ../init.d/thin
   /etc/rc1.d/K20thin -> ../init.d/thin
   /etc/rc6.d/K20thin -> ../init.d/thin
   /etc/rc2.d/S20thin -> ../init.d/thin
   /etc/rc3.d/S20thin -> ../init.d/thin
   /etc/rc4.d/S20thin -> ../init.d/thin
   /etc/rc5.d/S20thin -> ../init.d/thin 
```

我将守护进程更改为指向 /usr/local/rvm/bin/bootup_thin

```
~ > sudo cat /etc/init.d/thin
#!/bin/sh
### BEGIN INIT INFO
# Provides:          thin
# Required-Start:    $local_fs $remote_fs
# Required-Stop:     $local_fs $remote_fs
# Default-Start:     2 3 4 5
# Default-Stop:      S 0 1 6
# Short-Description: thin initscript
# Description:       thin
### END INIT INFO

# Original author: Forrest Robertson

# Do NOT "set -e"

DAEMON=/usr/local/rvm/bin/bootup_thin
SCRIPT_NAME=/etc/init.d/thin
CONFIG_PATH=/etc/thin

# Exit if the package is not installed
[ -x "$DAEMON" ] || exit 0

case "$1" in
    start)
    $DAEMON start --all $CONFIG_PATH
    ;;
stop)
    $DAEMON stop --all $CONFIG_PATH
    ;;
restart)
    $DAEMON restart --all $CONFIG_PATH
    ;;
*)
   echo "Usage: $SCRIPT_NAME {start|stop|restart}" >&2
   exit 3
   ;;
esac 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T10:48:26.437

嗯，刚刚找到原因了。

首先我删除`/etc/init.d/thin`了，然后创建并忘记了 chmod +x 它。

所以在`chmod +x /etc/init.d/thin`它工作之后。

# php - 为非拉丁 Web 地址配置 WampServer

> ID：11062538
> 
> 赞同：1
> 
> 时间：2012-06-16T10:09:16.887
> 
> 标签：php, wordpress, wampserver, right-to-left

我已经在 WampServer 上本地安装了 WordPress 以进行测试。我发现当我更改永久链接结构以反映帖子标题时（标题是我的母语“乌尔都语”），并在浏览器中请求以下页面

```
http://localhost/blog/طوفان-اور-سیاست-دان/ 
```

它返回了一个 404 错误，它说

```
The requested URL /blog/Ø·ÙˆÙØ§Ù†-Ø§ÙˆØ±-Ø³ÛŒØ§Ø³Øª-Ø¯Ø§Ù†/ was not found on this server. 
```

我正在使用 WampServer 2.2 和 WordPress 3.4。

由于许多电脑没有安装乌尔都语字体，这里是第一个地址的图像给你。 ![在此处输入图像描述](../Images/21649c0e8c02018b7f593daba2aab621.png)

乌尔都语部分的英文翻译是“Storm-and-politicians”。乌尔都语与英语不同，是从右向左书写的。

如何配置我的本地 Web 服务器以接受乌尔都语的 Web 地址？包括乌尔都语维基百科在内的许多网站都使用此方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:45:49.800

如何了解有关此问题的更多信息：

每次您看到 apache 给您一条未找到的消息时，您都会在您的网络服务器的错误日志中找到相应的条目。它包含更多信息幕后发生的事情。

例如，您将看到与此类似的消息：

```
File does not exist: C:/.../htdocs/blog/\xd8\xb7\xd9\x88\xd9\x81\xd8\xa7\xd9\x86-\xd8\xa7\xd9\x88\xd8\xb1-\xd8\xb3\xdb\x8c\xd8\xa7\xd8\xb3\xd8\xaa-\xd8\xaf\xd8\xa7\xd9\x86 
```

这很有用，因为它允许您查看 apache 网络服务器用于在文件系统中查询文件的二进制序列。

你可以把它变成一个 PHP 字符串来破译它：

```
echo "\xd8\xb7\xd9\x88\xd9\x81\xd8\xa7\xd9\x86-\xd8\xa7\xd9\x88\xd8\xb1-\xd8\xb3\xdb\x8c\xd8\xa7\xd8\xb3\xd8\xaa-\xd8\xaf\xd8\xa7\xd9\x86"; 
```

根据您查看此输出的编码，它可能如下所示：

```
UTF-8     : طوفان-اور-سیاست-دان
Ansi      : ÏÀ┘ê┘üÏº┘å-Ïº┘êÏ▒-Ï│█îÏºÏ│Ï¬-Ï»Ïº┘å
ISO-8859-1: Ø·ÙˆÙØ§Ù†-Ø§ÙˆØ±-Ø³ÛŒØ§Ø³Øª-Ø¯Ø§Ù† 
```

除了看起来不同之外，问题是为什么网络服务器找不到这个文件？

当您使用 wordpress 编写代码时，您可能只是错过了启用这些类型的 URL，在 Wordpress 行话中，这些 URL 被称为[“Pretty”永久链接^(*Codex*)](http://codex.wordpress.org/Using_Permalinks#Using_.22Pretty.22_permalinks)。

# r - 映射两个列表

> ID：11062540
> 
> 赞同：3
> 
> 时间：2012-06-16T10:09:52.583
> 
> 标签：r, list, apply

我最近问了一个关于`apply`在两个列表上使用函数的问题。每个列表都是通过拆分大型数据框创建的数据框列表。每次函数运行时，我都想从第一个元素（数据帧）中获取向量，并从第一个元素（数据帧）中`mylist1`获取一些向量，`mylist2`并将它们相互回归。然后移动到下一个`mylist1`元素和`mylist2`元素。实际上，该函数采用两个具有相同数量元素的列表并采用一对（每个列表中的一个）并使用它们。

我尝试了以下方法，但得到的结果不是我想要的：

```
a1<-c(1:5,rep(0,5))
a2<-c(1:5,10:6)
b2<-c(rep(100,5),rep(50,5))
z<-c(rep("part1",5),rep("part2",5))
df1<-data.frame(a1,z)
df2<-data.frame(a2,b2,z)

mylist1<-split(df1,z)
mylist2<-split(df2,z)

myfunction<-function(x,y) 
{

meana <- mean(x$a)
meanb <- mean(y$b)
model<-lm((x$a)~(y$a))
return(c(model$coefficients[2],meana=meana,meanb=meanb))
}

result <- mapply(myfunction,x=mylist,y=mylist2)

 #result
#        x   y
#y$a     1  -1
#meana   3   8
#meanb 100  50 
```

我想要的是：

```
#y$a     1   0   
#meana   3   0
#meanb   100 50

#e.g. the results in the first row are from lm((mylist1[[1]][,1])~(mylist2[[1]][,1]))  and lm((mylist1[[2]][,1])~(mylist2[[2]][,1])) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:47:42.157

我运行了你的代码并得到了

```
> result <- mapply(myfunction,x=mylist1,y=mylist2)
> result
      part1 part2
y$a       1     0
meana     3     0
meanb   100    50 
```

你有错字

```
result <- mapply(myfunction,x=mylist,y=mylist2) 
```

我改成

```
result <- mapply(myfunction,x=mylist1,y=mylist2) 
```

也许这就是问题

# c# - 使用线程池直接从方法返回对象

> ID：11062541
> 
> 赞同：1
> 
> 时间：2012-06-16T10:09:53.397
> 
> 标签：c#

我有这样的方法：

```
public IOrganizationService GetConnection(bool multi)
        {
            if(!multi)
            {

            Parallel.For(0, 1, i =>
            {
               dynamic _serviceobject= InitializeCRMService();

            });
            }

            else
            {
                ThreadPool.QueueUserWorkItem
                (
                    new WaitCallback
                     (
                         (_) =>
                        {
                            dynamic _serviceobject= InitializeCRMService();

                        }
                     )
                );
            }

        } 
```

我想从方法内部*直接***返回**_serviceobject * 。将返回它两次，即一次从if 和一次从else 循环解决我的问题。请注意，我使用的是使用池线程概念的多线程。_serviceobjects 会保留**吗**在两个线程并行运行的情况下是独一无二的。我不希望我的线程之间发生任何交互。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:37:35.637

内部的代码`WaitCallback`将在线程池中执行，并且可能在`GetConnection`返回后执行（这就是执行异步操作的重点）。因此，由于它是另一个线程（具有另一个调用堆栈）并且它可能会在`GetConnection`返回后执行，因此您不能`GetConnection`从`WaitCallback`. 如果你真的想这样做，那么你将不得不`GetConnection`等待直到`WaitCallback`完成执行。ManualResetEvent 可以解决问题：

```
public IOrganizationService GetConnection(bool multi)
{
    var waitHandle = new ManualResetEvent(false);
    dynamic result = null;
    if(!multi)
    {
        Parallel.For(0, 1, i =>
        {
           result = InitializeCRMService();
           waitHandle.Set();
        });
    }
    else
    {
        ThreadPool.QueueUserWorkItem
        (
            new WaitCallback
            (
                (_) =>
                {
                    result = InitializeCRMService();
                    waitHandle.Set();
                }
            )
        );
    }
    //We wait until the job is done...
    waitHandle.WaitOne();
    return result as IOrganizationService; //Or use an adecuate casting
} 
```

但是这样做首先违背了异步操作的意义。由于调用者线程必须等到另一个线程中的工作完成，坐在那里，什么都不做......那么，为什么不同步地做呢？一句话：没意义。

问题是直接返回值是一个同步 API。如果您想要异步操作，您将需要一个异步 API。如果您将有一个异步 API，那么您将不得不改变调用者的工作方式。

解决方案包括：

1.  拥有[访问 reuslt 的公共财产](https://stackoverflow.com/a/11060729/402022)（选项 1）
2.  有[回调](https://stackoverflow.com/a/11060729/402022)（选项 2）
3.  [为活动提供资源](https://stackoverflow.com/a/11062602/402022)
4.  返回一个任务（或使用异步密钥，如果可用）
5.  返回 IObservable（如果可用，使用响应式扩展）

笔记：

1.  拥有公共属性意味着您将需要处理调用者中的同步。
2.  有一个回调，意味着调用该方法的一种奇怪的方式，并且没有明确的等待方式。
3.  使用事件有调用者保持订阅事件处理程序的风险。
4.  由于您使用的是线程池，因此返回任务似乎有点过头了。
5.  使用没有响应式扩展的 IObservable 很容易出错，并且与替代方案相比，工作量要大得多。

我个人会选择回调选项：

```
public void GetConnection(bool multi, Action<IOrganizationService> callback)
{
    if (ReferenceEquals(callback, null))
    {
        throw new ArgumentNullException("callback");
    }
    if(!multi)
    {
        Parallel.For(0, 1, i =>
        {
            callback(InitializeCRMService() as IOrganizationService);
            //Or instead of using "as", use an adecuate casting
        });
    }
    else
    {
        ThreadPool.QueueUserWorkItem
        (
             new WaitCallback
             (
                 (_) =>
                 {
                      callback(InitializeCRMService() as IOrganizationService);
                      //Or instead of using "as", use an adecuate casting
                 }
             )
        );
    }
} 
```

调用者然后做这样的事情：

```
GetConnection
    (
        false,
        (seriveObject) =>
        {
            /* do something with seriveObject here */
        }
    );
//Remember, even after GetConnection completed seriveObject may not be ready
// That's because it is asyncrhonous: you want to say "hey Bob do this for me"
// and you can go do something else
// after a while Bob comes back an says:
// "that thing you asked me to do? well here is the result".
// We call that a callback, and the point is that you didn't have to wait for Bob
// you just kept doing your stuff...
//So... when is seriveObject ready? I don't know.
//But when seriveObject is ready the callback will run and then you can use it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:21:07.483

您不能从 WaitCallback 处理程序内部返回它，因为您的代码中没有人可以将其返回。那只是一个回调。您可能想尝试定义一个具有动态成员的自定义事件（从 EventArgs 派生）。

然后，您可以从您的工作人员入口点引发此事件，并与它一起发送动态对象。

您可以在需要的地方（即您想使用动态对象的地方）绑定到事件。

编辑（也显示一些代码）：

在您拥有 GetConnection 方法的同一个类中，还定义一个事件：

```
internal event EventHandler<SomeEventArgs> OnWorkerFinished = (s, e) => {}; 
```

然后，在项目中的某个位置（靠近此类）定义 SomeEventArgs 类：

```
internal class SomeEventArgs : EventArgs 
{
  public dynamic WorkerResult { get; private set; }

  public SomeEventArgs(dynamic workerResult) 
  {
    WorkerResult = workerResult;
  }
} 
```

接下来，在工人中：

```
 new WaitCallback
 (
    (_) =>
    {
      dynamic _serviceobject= InitializeCRMService();
     //Here raise the event
     SomeEventArgs e = new SomeEventArgs(_serviceObject);
     OnWorkerFinished(this, e);
    }
 ) 
```

我不知道你想在哪里获取结果，但是在那个地方你应该绑定到这个类的 OnWorkerFinished 事件（你有 GetConnectionMethod）。*

# extjs - ExtJS 4.1 控制器继承，为存储和模型生成 getter

> ID：11062543
> 
> 赞同：0
> 
> 时间：2012-06-16T10:10:09.400
> 
> 标签：extjs, extjs4, extjs4.1

我尝试创建基本控制器并在其中写入：

```
Ext.define('My.Users.controller.Role', {
    extend      : 'Ext.app.Controller',
    stores       : [
        'Modules', 'ModulesList'
    ],
    models       : [
        'Modules', 'ModulesList'
    ]
}); 
```

但是当我尝试为它们使用 getter 时（在这个基类中，或者在它的子类中，比如 My.Users.controller.Group），比如 getModulesStore() 或 getModulesListModel()，我有一个错误，它们不是函数. 在 Firebug 中，我可以看到子类和超类中没有这种方法。我该如何解决？

如何重现此错误的完整说明： 1) 从 Sencha 下载 ExtJS 4.1 GPL

2) 解压压缩包，进入目录 extjs-4.1.0/examples/app/feed-viewer/

3）在文件feed-viewer.html注释行`<script type="text/javascript" src="all-classes.js"></script>`强制动态加载js文件：现在可以正常编辑项目文件的内容了。

4) 在文件夹 app/controller 中创建名为 Entities.js 的文件，代码如下：

```
Ext.define('FV.controller.Entities', {
    extend: 'Ext.app.Controller',
    models: ['Shared'],
    stores: ['Shared']
}); 
```

5) 在文件 Articles.js 和 Feeds.js 中更改为“FV.controller.Entities”

6）在文件夹 app/model 和 app/store 创建文件 Shared.js 与内容

```
Ext.define('FV.model.Shared', {
    extend: 'Ext.data.Model',
    idProperty: 'id',
    fields: [
    {
        name: 'id',
        type: 'int'
    },
    {
        name: 'title',
        type: 'string'
    }
    ]
}); 
```

对于模型和

```
Ext.define('FV.store.Shared', {
    extend: 'Ext.data.Store',
    model: 'FV.model.Shared',
    proxy: {
        type: 'ajax',
        url: 'test.json',
        reader: {
            type: 'json',
            root: 'item'
        }
    }
}); 
```

为商店。

7）最后，例如在Article.js的init方法中尝试console.log(this)；在 Firebug 中，您不会获得 getSharedModel() 和 getSharedStore() 方法。

我已将样本上传到[http://nekaka.com/d/W1_EOlnPST](http://nekaka.com/d/W1_EOlnPST)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:28:05.257

如果您使用`refs`属性，则会为视图生成 Getter。

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.app.Controller](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.app.Controller) - 查看“使用参考”部分。

对于商店只需使用`this.getStore('Modules')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:20:45.577

`models`并且`stores`是配置属性。如果您查看源代码，`Ext.app.Controller`您会看到在构造函数中创建的 getter。

`FV.controller.Articles`您的控制器类固有的，但它有自己的`models`和`stores`属性，这些属性将覆盖您自己的基类中的属性。这与您的组件具有配置的方式非常相似`height`，它将覆盖所有基类的配置（除非基类通过在构造函数或 initComponent 中覆盖它来强制此类配置`controller`，使用简单配置属性的情况并非如此）。

如果你想让它工作，你的控制器所固有的类必须明确地将基类配置与其新配置合并。同样，与组件相同。

或者（可能是更好的解决方案），而不是将共享模型和存储定义为基类中的配置属性，您可以将它们合并到构造函数获取的配置中。在你的基本控制器类的构造函数中是这样的：

```
Ext.merge( config, {
    models: ['Shared'],
    stores: ['Shared']
}); 
```

# ruby-on-rails - Formtastic 和 belongs_to 关联

> ID：11062544
> 
> 赞同：0
> 
> 时间：2012-06-16T10:10:16.783
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, formtastic

我正在尝试边做边学，需要一些帮助。

因此，formtastic 可以处理 belongs_to 关联（如 Post belongs_to :author），使用来自父模型的选择来渲染一个选择或一组无线电输入。

我想要做的是创建一个帖子，而不必在创建表单中选择作者。

我想通过隐藏的表单字段设置作者 ID，但是当我尝试这个时

```
 <%= f.input :author, :as => :hidden, :value => '33' %> 
```

我得到了未初始化的常量作者，并尝试了我未能开始工作的各种其他方式。

我得到的最接近的方法是尝试自定义选择的选择并隐藏选择，如下所示：

```
<%= f.input :author, :as => :select, :collection => ["33"], :input_html => { :style => 'visibility: hidden' } %> 
```

但是即使上面隐藏了选择并且可以工作，它仍然会为作者显示一个表单标签，我不希望它显示

如果我试图实现的目标仍然不清楚，这是一个更好地解释我的场景的示例：

想象一下，你有一个作者列表页面，作为作者，你点击你的名字进入一个可以管理各种事情和创建帖子的区域。

**问题：**当您单击创建帖子并呈现表单时，您不希望必须从其中一个字段中选择您的姓名来告诉应用您正在创建的帖子属于您，因为您希望系统知道它是您的因为你在一个属于你的配置区域。

我试图通过使用隐藏的表单字段来设置作者 ID，以便在用户提交表单时以正确的关联保存帖子。

谁能给我一个如何做到这一点的例子？作为一名学习者，也许有更好的方法来解决这个问题，所以任何人都可以给我建议并指出一些好的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:35:47.317

您不应该在隐藏的表单字段中填充它；隐藏的表单字段仍然可以由用户更改，最终您允许用户创建其他作者的帖子。

执行此操作的正确方法是`@post.author = current_user`在 PostsController 的创建操作中分配。

# wordpress - IIS7 上的 URLrewrite 用于 wordpress 博客

> ID：11062547
> 
> 赞同：0
> 
> 时间：2012-06-16T10:10:53.753
> 
> 标签：wordpress

我在文件夹 example.com/blog 中安装了一个 wordpress 博客，现在我想将 wordpress 用作 CMS，所以我需要将 wordpress 移动到根目录，页面需要像 example.com/page1 一样位于根目录中，但我想要那个我的博客文章将保留在 example.com/blog/ 上，并带有默认的永久链接 example.com/blog/?p=123

我如何通过 Windows 服务器上的 web.config 文件来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:04:46.530

除非我误解它，否则你最好的选择可能只是保留两个单独的 wordpress 安装。

# dotnetnuke - 如何将 asp:ImageButton 更改为 type="submit" 按钮？

> ID：11062549
> 
> 赞同：0
> 
> 时间：2012-06-16T10:11:01.290
> 
> 标签：dotnetnuke

我在 DNN 模块中有以下内容

```
<asp:ImageButton ID="btnAddItem" CssClass="add-item-btn" runat="server" ImageUrl="add_to_cart.gif" /> 
```

我需要将其更改为常规 type="submit" 按钮。

我尝试将其更改为 asp:HyperLink 但我认为它连接到其他东西，因此分页符的原因是什么？

非常感谢

编辑：

我需要使用 css 为按钮设置皮肤，并且它不能作为 ImageButton 进行皮肤设置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:08:35.337

但是，您要查找的控件是`<asp:Button>`，但是，正如您似乎遇到的那样，如果不对代码隐藏文件进行更改（可能非常小），您可能无法更改控件的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:17:37.437

您可以使用 OnClientClick 属性使用 JS 手动提交表单：

```
<asp:ImageButton ID="btnAddItem" CssClass="add-item-btn" runat="server" ImageUrl="add_to_cart.gif" OnClientClick="document.getElementById('myForm').submit(); return false;" /> 
```

这里的 'myForm' 是您的表单的 ID。

# html - IE9 和 Opera 中的破碎列表

> ID：11062558
> 
> 赞同：2
> 
> 时间：2012-06-16T10:12:27.767
> 
> 标签：html, css, css-float, cross-browser

我准备了这个演示： [https ://dl.dropbox.com/u/7224702/lists-bug.html](https://dl.dropbox.com/u/7224702/lists-bug.html)

它在 Firefox、Chrome 和 IE8 中运行良好，但在 Opera 和 IE9 中出现故障。

哦，我不想使用 list-style-position: inside; 因为如果某些 <li> 更长，那么一行第二行的缩进不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:19:10.867

这是 CSS 未真正指定的列表的问题。它只是说标记在框外，但没有准确指定位置。

您也许可以通过`text-indent`将第一行再次移回来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:24:43.860

这也是困扰我一段时间的问题。

首先，如果我们查看描述`list-style-position: outside`属性的规范，我们会看到

> “CSS 2.1 未指定标记框的精确位置或其在绘制顺序中的位置”。

这实际上使这种情况不是错误，只是不同的实现。

IMO Opera 和 IE9 使其更接近规范 - 即将标记......好吧......放在盒子外面。在浮动的情况下，由`li`元素组成的框仍然是全角的，只有内容在其中移动。

我试图考虑替代解决方案，但结果仍然不合适，并且导致的问题比解决的问题多。可以在这里看到使用 css3[计数器增量](http://www.w3.org/TR/CSS21/generate.html#propdef-counter-increment)的示例：http: [//jsfiddle.net/s3sZS/3/](http://jsfiddle.net/s3sZS/3/)，但在视觉上它看起来像`list-style-position: inside`（您的缩进问题仍然存在）并且增量本身是可选择和可复制的（至少在 Opera 中） .

实际上`list-style-position: inside`看起来是这个 imo 唯一合适的解决方案。

如果您对列表的未来实现感兴趣 - 您可以阅读[CSS 列表和计数器模块第 3 级](http://dev.w3.org/csswg/css3-lists/)（目前为编辑草稿）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:38:32.533

稍后计划，但这是我的最终解决方案。

1.  使用列表样式位置：内部；。
2.  要修复第二行和后续行的缩进，请使用负文本缩进（感谢乔伊！）
3.  确定负文本缩进的正确值并不容易，因为每个浏览器的处理方式都略有不同。知道我们将需要使用可以手动设置标记宽度的东西。那东西是伪元素:before。（感谢skip405！）
4.  使用 :before 伪元素和 content 属性的右值，我们现在可以使用 list-style-type: none;
5.  从 1\. 中删除 list-style-position，因为它现在没用了。

您可以在此处查看工作演示： [https ://dl.dropbox.com/u/7224702/lists-counters.html](https://dl.dropbox.com/u/7224702/lists-counters.html)

唯一的缺点是 content: counter(list, disc); 在 Opera 12 中。圆盘/圆形/方形值无法正常工作，十进制之类的值还可以。我已经将它报告为一个错误，所以希望它会在下一个版本中得到修复。

# iphone - 在 iPhone 中运行用 XCODE 开发的应用程序

> ID：11062564
> 
> 赞同：-1
> 
> 时间：2012-06-16T10:13:53.410
> 
> 标签：iphone, ios, xcode, jailbreak

我需要在我的 iPhone 上运行我在 Xcode 中制作的应用程序。它在模拟器中运行良好。我有一个开发者帐户，但我没有 iPhone SDK。这是棘手的部分：

我使用 Cocoa-touch 使用 iOS SDK 开发了应用程序。现在所有那些越狱的东西都不会在那里工作。我的 Mac Mini 中没有 /Developer 之类的文件夹。

请帮助我在我的 iPhone 上运行它来测试它在真实设备上的外观，而不是在模拟器上。

请注意，我没有 iPHONE SDK，因此所有越狱技术都不起作用。或者至少我无法实施。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T10:14:33.493

> 我有一个开发者帐户，但我没有 iPhone SDK

使用您的开发者帐户并下载 iPhone SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:35:56.947

即使是您基本的免费 Apple 开发者帐户也可以让您下载最新版本的 iOS SDK。如果您有付费版本，则可以下载所有版本。

显然，您需要下载 SDK 才能运行代码。SDK 是使应用程序首先运行的原因。

我不明白的是你说你想把应用程序放在你的iOS设备上，而不是放在你电脑上的模拟器上。您的设备上不是已经安装了 SDK 吗？它必须。

# jquery - Wordpress 3.4 升级创建 jQuery 问题

> ID：11062569
> 
> 赞同：-1
> 
> 时间：2012-06-16T10:14:55.063
> 
> 标签：jquery, wordpress

我已将我的网站升级到 wordpress 3.4，它破坏了几乎所有使用 jQuery 的插件。我认为原因是它在 wp-head 之后加载了 wp-includes/jquery 文件。

请让我知道任何解决方案。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:25:00.167

```
add_action('wp_head', 'load_scripts'); // to load jquery on the font page
add_action('admin_head', 'load_scripts'); // to load jquery on the admin page
function load_scripts(){
wp_enqueue_script('jquery');
//other scripts
} 
```

此外，如果您知道插件，您可以在脚本列表中显式地将“jquery”排入队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:45:06.210

看来 WordPress 现在正在加载页脚中的所有脚本 - 将您的脚本放在那里，它会正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T03:54:36.877

Subharanjan 的回答对我来说是正确的——就像 WebandSteak 的一样。

我有一个自定义模式弹出窗口，我在几个电子商务网站上使用它，我发现我需要使用 Subharanjan 的强制 jQuery 在标题中排队的方法来调用 jQuery，但是我不需要调用我的 jQuery 函数，直到在 footer.php 中调用 wp_footer() 函数之后。

如果您需要更好的解释，我会在这里完整地写下我的解决方案——https: [//bitly.com/O6pBUN](https://bitly.com/O6pBUN)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T05:36:41.213

你可以添加ff。在您的模板文件夹（wp-content/templates/template-folder/functions.php）

```
add_action('wp_head', 'load_scripts'); // to load jquery on the font page
add_action('admin_head', 'load_scripts'); // to load jquery on the admin page
function load_scripts(){
wp_enqueue_script('jquery');
//insert all other wp_enqueue_scripts() calls here
} 
```

详细信息在[webdev-tuts/wordpress/jquery-is-not-defined-in-wordpress-3-4.html](http://www.webdev-tuts.com/wordpress/jquery-is-not-defined-in-wordpress-3-4.html)

# sql - 为什么不能在索引视图中使用左连接

> ID：11062574
> 
> 赞同：1
> 
> 时间：2012-06-16T10:15:20.053
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

我知道不能在索引视图中使用左连接。但我不明白为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:17:21.870

> 问：为什么我不能在索引视图中使用 OUTER JOIN？
> 
> A. 当您将数据插入基表时，行可以从基于 OUTER JOIN 的索引视图中逻辑消失。这使得增量更新 OUTER JOIN 视图的实现相对复杂，并且实现的性能会比基于标准 (INNER) JOIN 的视图慢。

学分转到[http://blog.sqlauthority.com/2009/09/25/sql-server-outer-join-in-indexed-view-question-to-readers/](http://blog.sqlauthority.com/2009/09/25/sql-server-outer-join-in-indexed-view-question-to-readers/)

# iphone - 使用 MapKit 聚类点在缩小时仅显示第一个或最后一个绘制的图钉？（而不是堆叠？）

> ID：11062580
> 
> 赞同：0
> 
> 时间：2012-06-16T10:17:16.730
> 
> 标签：iphone, google-maps, mapkit, google-maps-markers, markerclusterer

因此，当用户缩小时，我试图让 MapKit 中的地图点聚集到该区域的第一个或最后一个放置的图钉中，而不是让它们堆叠起来。当用户重新放大时，它们会再次被放下。

有没有办法做到这一点是实用的，还是必须在服务器端实时完成？我不明白为什么它不能在客户端上完成，除非它对 iOS 来说过于资源密集。

# c++ - 在主程序中包含头文件和源文件之间的混淆

> ID：11062581
> 
> 赞同：1
> 
> 时间：2012-06-16T10:17:21.200
> 
> 标签：c++, header

我听说我们应该将声明写在头文件中，将定义写在源文件中，源文件和头文件名称相同。然后只需在源代码中包含标题。

这是一个例子`myFile.h`：

```
void printer (void); 
```

这是打印机的实现`myFile.cpp`：

```
#include "myFile.h"
#include <iostream>
using namespace std;

void printer ()
{
    cout<< "I am a printer";
} 
```

这是我的`main.cpp`：

```
#include "myFile.h"

int main ()
{
    printer();
    return 0;
} 
```

现在，当我运行程序时，我得到了预期的错误：`undefined reference to printer`. 但是当我在 github 或其他项目上看到代码时，我发现它们通常包含头文件而不是源文件。我也尝试使用标题保护`ifndef`，但仍然出现同样的错误。如果满足以下条件，则成功编译主程序：

1.  如果我在 myFile.h 中包含 myFIle.cpp

2.  如果我只在 main 中包含 myFile.cpp

我在做同样的事情时一般的做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T10:21:54.637

您应该`myFile.cpp`在链接过程中包含您的：

```
g++ myFile.cpp main.cpp 
```

错误消息`undefined reference to printer`实际上是链接器错误，而不是编译器错误。

### 解释

如果您只使用`g++ main.cpp`编译器，则不会从`myFile.cpp`. 他知道应该有一个带有签名的函数`void printer(void)`，但他现在还不知道这个函数在哪里。他完全忽略了这个事实，因为您可以提供预编译的目标文件（“myFile.o”）并在以后链接它们：

```
g++ myFile.cpp -c       # compile myFile.cpp
g++ main.cpp -c         # compile myFile.cpp
g++ myFile.o main.o     # link both files together. 
```

`-c`只会告诉`g++`编译文件，但不会将它们链接到可执行文件。这是由链接器完成的（`g++`可能会`ld`在您的配置中调用）。链接器将创建一个可执行文件，其中包含所有需要的库（如`libc++`实际代码）。

### IDE 备注

如果您使用 IDE，请确保所有需要的文件都包含在项目中。这包括所有头文件和源文件以及其他库的链接选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:21:05.880

当你自己定义一个头文件并想包含它时，你应该把它括起来“”，例如：

```
#include "myFile.h" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T10:21:27.600

```
#include "myFile.h" // would be better. 
```

似乎您忘记了`"`周围的包含。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T10:38:07.577

你应该使用

```
#include "myFile.h" 
```

或者

```
#include <myFile.h> 
```

后者更适合系统库。两种形式在搜索文件的方式上有所不同。您可以在以下位置找到更多详细信息

[http://msdn.microsoft.com/en-us/library/36k2cdd4%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/36k2cdd4%28v=vs.71%29.aspx)

# java - Spring并发会话控制不起作用，用户可以多次登录

> ID：11062585
> 
> 赞同：1
> 
> 时间：2012-06-16T10:17:45.707
> 
> 标签：java, authentication, spring-security, session-management

我在 Tomcat7 上使用 Spring 3.2 和 Spring-security 3.1 以及 jsf + primefaces 和 hibernate4

我想添加一个并发控制以将用户的会话限制为一个，并在他/她第二次尝试登录时显示和错误消息。问题是。我可以在 chrome 和 firefox 中登录。它不会阻止多次登录。你可以看到我的安全配置。以及第一次登录和第二次登录时产生的日志是怎么回事？

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http pattern="/resources/**" security="none" />
<security:http pattern="/authentication/**" security="none" />

<security:http auto-config='true'
    access-decision-manager-ref="accessDecisionManager">
    <security:intercept-url pattern="/pages/**"
        access="PRV_LOGIN" />
    <security:access-denied-handler
        error-page="/error/error.jsf" />
    <security:logout logout-success-url="/" logout-url="/logout"
        delete-cookies="JSESSIONID" />
    <security:form-login login-page='/login'
        login-processing-url="/logincheck" default-target-url="/home"
        always-use-default-target="true" />
    <security:session-management
        invalid-session-url="/login">
        <security:concurrency-control
            error-if-maximum-exceeded="true" max-sessions="1" expired-url="/login"
            session-registry-ref="sessionRegistry" />
    </security:session-management>
</security:http>

<security:authentication-manager>
    <security:authentication-provider
        user-service-ref="userSessionDetailsUtil">
        <security:password-encoder ref="passwordEncoderUtil">
            <security:salt-source user-property="username" />
        </security:password-encoder>
    </security:authentication-provider>
</security:authentication-manager>

<!-- Security(Authentication, Encoding) implementations -->
<bean id="userSessionDetailsUtil" class="com.i2i.copycat.service.util.UserSessionDetailsUtil">
</bean>

<bean id="passwordEncoderUtil" class="com.i2i.copycat.service.util.PasswordEncoderUtil">
    <property name="passwordEncoder" ref="springShaPasswordEncoder"></property>
</bean>

<!-- Spring Security's sha capable password encoder -->
<bean id="springShaPasswordEncoder"
    class="org.springframework.security.authentication.encoding.ShaPasswordEncoder">
    <constructor-arg value="256" />
</bean>

<!-- Custom Privilege Names to be accepted -->
<bean id="accessDecisionManager"
    class="org.springframework.security.access.vote.AffirmativeBased">
    <property name="decisionVoters">
        <bean class="org.springframework.security.access.vote.RoleVoter">
            <property name="rolePrefix" value="PRV_" />
        </bean>
    </property>
</bean>
<!-- Concurrent Session Control Beans -->

<bean id="sessionRegistry"
    class="org.springframework.security.core.session.SessionRegistryImpl" /> 
```

首次登录

```
2012-06-16 13:18:22,325 231156 [080-exec-9] DEBUG ..hibernate.internal.SessionImpl           - Opened session at timestamp: 5487992431767552
2012-06-16 13:18:22,342 231173 [080-exec-9] DEBUG ..jdbc.internal.LogicalConnectionImpl      - Obtaining JDBC connection
2012-06-16 13:18:22,343 231174 [080-exec-9] DEBUG ..jdbc.internal.LogicalConnectionImpl      - Obtained JDBC connection
2012-06-16 13:18:22,343 231174 [080-exec-9] DEBUG ..transaction.spi.AbstractTransactionImpl  - begin
2012-06-16 13:18:22,343 231174 [080-exec-9] DEBUG ..internal.jdbc.JdbcTransaction            - initial autocommit status: true
2012-06-16 13:18:22,343 231174 [080-exec-9] DEBUG ..internal.jdbc.JdbcTransaction            - disabling autocommit
2012-06-16 13:18:22,346 231177 [080-exec-9] DEBUG ..service.util.UserSessionDetailsUtil      - Loading user by name[admin]
2012-06-16 13:18:22,347 231178 [080-exec-9] DEBUG ..copycat.domain.User                      - [User][Operation:getMatchingUnique() ][Session:1630011351][Transaction:151891478]User
2012-06-16 13:18:22,351 231182 [080-exec-9] DEBUG ..copycat.domain.User                      - [User][Operation:addRestrictionToCriteria() ][Session:1630011351][Transaction:151891478]User
2012-06-16 13:18:22,497 231328 [080-exec-9] DEBUG ..org.hibernate.SQL                        - 
2012-06-16 13:18:22,546 231377 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result set row: 0
2012-06-16 13:18:22,552 231383 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result row: EntityKey[com.i2i.copycat.domain.User#2]
2012-06-16 13:18:22,563 231394 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Resolving associations for [com.i2i.copycat.domain.User#2]
2012-06-16 13:18:22,567 231398 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Loading entity: [com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:18:22,567 231398 [080-exec-9] DEBUG ..org.hibernate.SQL                        

2012-06-16 13:18:22,568 231399 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result set row: 0
2012-06-16 13:18:22,568 231399 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result row: EntityKey[com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:18:22,569 231400 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Resolving associations for [com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:18:22,577 231408 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Adding entity to second-level cache: [com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:18:22,585 231416 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Done materializing entity [com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:18:22,585 231416 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Done entity load
2012-06-16 13:18:22,586 231417 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Loading entity: [com.i2i.copycat.domain.Group#1]
2012-06-16 13:18:22,586 231417 [080-exec-9] DEBUG ..org.hibernate.SQL                        - 
2012-06-16 13:18:22,588 231419 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result set row: 0
2012-06-16 13:18:22,588 231419 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result row: EntityKey[com.i2i.copycat.domain.Group#1]
2012-06-16 13:18:22,590 231421 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Resolving associations for [com.i2i.copycat.domain.Group#1]
2012-06-16 13:18:22,592 231423 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Adding entity to second-level cache: [com.i2i.copycat.domain.Group#1]
2012-06-16 13:18:22,597 231428 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Done materializing entity [com.i2i.copycat.domain.Group#1]
2012-06-16 13:18:22,597 231428 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Done entity load
2012-06-16 13:18:22,597 231428 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Adding entity to second-level cache: [com.i2i.copycat.domain.User#2]
2012-06-16 13:18:22,597 231428 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Done materializing entity [com.i2i.copycat.domain.User#2]
2012-06-16 13:18:22,597 231428 [080-exec-9] DEBUG ..engine.internal.StatefulPersistenceContext - Initializing non-lazy collections
2012-06-16 13:18:22,602 231433 [080-exec-9] DEBUG ..service.bean.CopycatUserDetails          - [getPrivileges() ][User:[Sk: 2][Name: ADMIN][UserType:[Code: SYS][Type: SYSTEM]][Group:[Sk: 1][Name: SYSTEM_ADMIN]]]
2012-06-16 13:18:22,604 231435 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Loading collection: [com.i2i.copycat.domain.User.privileges#2]
2012-06-16 13:18:22,605 231436 [080-exec-9] DEBUG ..org.hibernate.SQL                        
2012-06-16 13:18:22,606 231437 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result set contains (possibly empty) collection: [com.i2i.copycat.domain.User.privileges#2]
2012-06-16 13:18:22,611 231442 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result set row: 0
2012-06-16 13:18:22,611 231442 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Result row: EntityKey[com.i2i.copycat.domain.Privilege#LOGIN]
2012-06-16 13:18:22,612 231443 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Found row of collection: [com.i2i.copycat.domain.User.privileges#2]
2012-06-16 13:18:22,613 231444 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Resolving associations for [com.i2i.copycat.domain.Privilege#LOGIN]
2012-06-16 13:18:22,613 231444 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Adding entity to second-level cache: [com.i2i.copycat.domain.Privilege#LOGIN]
2012-06-16 13:18:22,613 231444 [080-exec-9] DEBUG ..engine.internal.TwoPhaseLoad             - Done materializing entity [com.i2i.copycat.domain.Privilege#LOGIN]
2012-06-16 13:18:22,614 231445 [080-exec-9] DEBUG ..loading.internal.CollectionLoadContext   - 1 collections were found in result set for role: com.i2i.copycat.domain.User.privileges
2012-06-16 13:18:22,614 231445 [080-exec-9] DEBUG ..loading.internal.CollectionLoadContext   - Collection fully initialized: [com.i2i.copycat.domain.User.privileges#2]
2012-06-16 13:18:22,614 231445 [080-exec-9] DEBUG ..loading.internal.CollectionLoadContext   - 1 collections initialized for role: com.i2i.copycat.domain.User.privileges
2012-06-16 13:18:22,614 231445 [080-exec-9] DEBUG ..engine.internal.StatefulPersistenceContext - Initializing non-lazy collections
2012-06-16 13:18:22,614 231445 [080-exec-9] DEBUG ..hibernate.loader.Loader                  - Done loading collection
2012-06-16 13:18:22,615 231446 [080-exec-9] DEBUG ..service.bean.CopycatUserDetails          - [getPrivileges() ]...[DONE]
2012-06-16 13:18:22,615 231446 [080-exec-9] DEBUG ..transaction.spi.AbstractTransactionImpl  - committing
2012-06-16 13:18:22,617 231448 [080-exec-9] DEBUG ..internal.jdbc.JdbcTransaction            - committed JDBC Connection
2012-06-16 13:18:22,617 231448 [080-exec-9] DEBUG ..internal.jdbc.JdbcTransaction            - re-enabling autocommit
2012-06-16 13:18:22,618 231449 [080-exec-9] DEBUG ..jdbc.internal.LogicalConnectionImpl      - Releasing JDBC connection
2012-06-16 13:18:22,619 231450 [080-exec-9] DEBUG ..jdbc.internal.LogicalConnectionImpl      - Released JDBC connection
2012-06-16 13:18:22,619 231450 [080-exec-9] DEBUG ..internal.proxy.ConnectionProxyHandler    - HHH000163: Logical connection releasing its physical connection
2012-06-16 13:18:22,619 231450 [080-exec-9] DEBUG ..internal.proxy.ConnectionProxyHandler    - HHH000163: Logical connection releasing its physical connection
2012-06-16 13:18:22,619 231450 [080-exec-9] DEBUG ..internal.proxy.ConnectionProxyHandler    - HHH000163: Logical connection releasing its physical connection
2012-06-16 13:18:22,619 231450 [080-exec-9] DEBUG ..internal.proxy.ConnectionProxyHandler    - HHH000163: Logical connection releasing its physical connection 
```

第二次登录

```
2012-06-16 13:21:38,352 427183 [080-exec-7] DEBUG ..hibernate.internal.SessionImpl           - Opened session at timestamp: 5487993234845696
2012-06-16 13:21:38,354 427185 [080-exec-7] DEBUG ..jdbc.internal.LogicalConnectionImpl      - Obtaining JDBC connection
2012-06-16 13:21:38,354 427185 [080-exec-7] DEBUG ..jdbc.internal.LogicalConnectionImpl      - Obtained JDBC connection
2012-06-16 13:21:38,354 427185 [080-exec-7] DEBUG ..transaction.spi.AbstractTransactionImpl  - begin
2012-06-16 13:21:38,355 427186 [080-exec-7] DEBUG ..internal.jdbc.JdbcTransaction            - initial autocommit status: true
2012-06-16 13:21:38,355 427186 [080-exec-7] DEBUG ..internal.jdbc.JdbcTransaction            - disabling autocommit
2012-06-16 13:21:38,355 427186 [080-exec-7] DEBUG ..service.util.UserSessionDetailsUtil      - Loading user by name[admin]
2012-06-16 13:21:38,356 427187 [080-exec-7] DEBUG ..copycat.domain.User                      - [User][Operation:getMatchingUnique() ][Session:2031763761][Transaction:716060180]User
2012-06-16 13:21:38,356 427187 [080-exec-7] DEBUG ..copycat.domain.User                      - [User][Operation:addRestrictionToCriteria() ][Session:2031763761][Transaction:716060180]User
2012-06-16 13:21:38,357 427188 [080-exec-7] DEBUG ..org.hibernate.SQL                        - 
2012-06-16 13:21:38,365 427196 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result set row: 0
2012-06-16 13:21:38,365 427196 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result row: EntityKey[com.i2i.copycat.domain.User#2]
2012-06-16 13:21:38,366 427197 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Resolving associations for [com.i2i.copycat.domain.User#2]
2012-06-16 13:21:38,367 427198 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Loading entity: [com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:21:38,368 427199 [080-exec-7] DEBUG ..org.hibernate.SQL                        - 
2012-06-16 13:21:38,369 427200 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result set row: 0
2012-06-16 13:21:38,370 427201 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result row: EntityKey[com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:21:38,370 427201 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Resolving associations for [com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:21:38,370 427201 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Adding entity to second-level cache: [com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:21:38,371 427202 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Done materializing entity [com.i2i.copycat.domain.UserType#SYS]
2012-06-16 13:21:38,371 427202 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Done entity load
2012-06-16 13:21:38,371 427202 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Loading entity: [com.i2i.copycat.domain.Group#1]
2012-06-16 13:21:38,372 427203 [080-exec-7] DEBUG ..org.hibernate.SQL                        - 
2012-06-16 13:21:38,373 427204 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result set row: 0
2012-06-16 13:21:38,374 427205 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result row: EntityKey[com.i2i.copycat.domain.Group#1]
2012-06-16 13:21:38,374 427205 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Resolving associations for [com.i2i.copycat.domain.Group#1]
2012-06-16 13:21:38,375 427206 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Adding entity to second-level cache: [com.i2i.copycat.domain.Group#1]
2012-06-16 13:21:38,375 427206 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Done materializing entity [com.i2i.copycat.domain.Group#1]
2012-06-16 13:21:38,375 427206 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Done entity load
2012-06-16 13:21:38,376 427207 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Adding entity to second-level cache: [com.i2i.copycat.domain.User#2]
2012-06-16 13:21:38,376 427207 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Done materializing entity [com.i2i.copycat.domain.User#2]
2012-06-16 13:21:38,376 427207 [080-exec-7] DEBUG ..engine.internal.StatefulPersistenceContext - Initializing non-lazy collections
2012-06-16 13:21:38,377 427208 [080-exec-7] DEBUG ..service.bean.CopycatUserDetails          - [getPrivileges() ][User:[Sk: 2][Name: ADMIN][UserType:[Code: SYS][Type: SYSTEM]][Group:[Sk: 1][Name: SYSTEM_ADMIN]]]
2012-06-16 13:21:38,377 427208 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Loading collection: [com.i2i.copycat.domain.User.privileges#2]
2012-06-16 13:21:38,377 427208 [080-exec-7] DEBUG ..org.hibernate.SQL                        - 

2012-06-16 13:21:38,379 427210 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result set contains (possibly empty) collection: [com.i2i.copycat.domain.User.privileges#2]
2012-06-16 13:21:38,379 427210 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result set row: 0
2012-06-16 13:21:38,380 427211 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Result row: EntityKey[com.i2i.copycat.domain.Privilege#LOGIN]
2012-06-16 13:21:38,380 427211 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Found row of collection: [com.i2i.copycat.domain.User.privileges#2]
2012-06-16 13:21:38,383 427214 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Resolving associations for [com.i2i.copycat.domain.Privilege#LOGIN]
2012-06-16 13:21:38,383 427214 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Adding entity to second-level cache: [com.i2i.copycat.domain.Privilege#LOGIN]
2012-06-16 13:21:38,384 427215 [080-exec-7] DEBUG ..engine.internal.TwoPhaseLoad             - Done materializing entity [com.i2i.copycat.domain.Privilege#LOGIN]
2012-06-16 13:21:38,384 427215 [080-exec-7] DEBUG ..loading.internal.CollectionLoadContext   - 1 collections were found in result set for role: com.i2i.copycat.domain.User.privileges
2012-06-16 13:21:38,384 427215 [080-exec-7] DEBUG ..loading.internal.CollectionLoadContext   - Collection fully initialized: [com.i2i.copycat.domain.User.privileges#2]
2012-06-16 13:21:38,384 427215 [080-exec-7] DEBUG ..loading.internal.CollectionLoadContext   - 1 collections initialized for role: com.i2i.copycat.domain.User.privileges
2012-06-16 13:21:38,385 427216 [080-exec-7] DEBUG ..engine.internal.StatefulPersistenceContext - Initializing non-lazy collections
2012-06-16 13:21:38,385 427216 [080-exec-7] DEBUG ..hibernate.loader.Loader                  - Done loading collection
2012-06-16 13:21:38,385 427216 [080-exec-7] DEBUG ..service.bean.CopycatUserDetails          - [getPrivileges() ]...[DONE]
2012-06-16 13:21:38,385 427216 [080-exec-7] DEBUG ..transaction.spi.AbstractTransactionImpl  - committing
2012-06-16 13:21:38,385 427216 [080-exec-7] DEBUG ..internal.jdbc.JdbcTransaction            - committed JDBC Connection
2012-06-16 13:21:38,386 427217 [080-exec-7] DEBUG ..internal.jdbc.JdbcTransaction            - re-enabling autocommit
2012-06-16 13:21:38,386 427217 [080-exec-7] DEBUG ..jdbc.internal.LogicalConnectionImpl      - Releasing JDBC connection
2012-06-16 13:21:38,386 427217 [080-exec-7] DEBUG ..jdbc.internal.LogicalConnectionImpl      - Released JDBC connection
2012-06-16 13:21:38,387 427218 [080-exec-7] DEBUG ..internal.proxy.ConnectionProxyHandler    - HHH000163: Logical connection releasing its physical connection
2012-06-16 13:21:38,387 427218 [080-exec-7] DEBUG ..internal.proxy.ConnectionProxyHandler    - HHH000163: Logical connection releasing its physical connection
2012-06-16 13:21:38,387 427218 [080-exec-7] DEBUG ..internal.proxy.ConnectionProxyHandler    - HHH000163: Logical connection releasing its physical connection
2012-06-16 13:21:38,387 427218 [080-exec-7] DEBUG ..internal.proxy.ConnectionProxyHandler    - HHH000163: Logical connection releasing its physical connection 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T20:02:34.137

我没有看到任何表明`FilterChainProxy`正在调用 Spring Security 的日志。您是否只是将这些日志排除在外，还是您自己对用户进行身份验证？通常，会话的注册`UsernamePasswordAuthenticationFilter`由`AbstractAuthenticationProcessingFilter`. 如果您自己对用户进行身份验证，那么您需要确保调用`ConcurrentSessionControlStrategy#onAuthentication`.

看来您正在使用 custom `UserDetailsService`，这可能意味着您正在返回 custom `UserDetails`。由于它由. `UserDetails#hashCode`_`UserDetails#equals``SessionRegistryImpl``ConcurrentMap`

如果您有集群部署，`SessionRegistryImpl`则不会工作，因为集群不与环境中的其他节点共享内存。在这种情况下，您需要提供自己的`SessionRegistry`实现。

PS：看来您只是在保护 /pages/** 这通常不推荐。相反，建议您明确授予对页面的访问权限，并默认限制访问权限。

# perl - 如何确定散列在分配中是否有奇数个元素？

> ID：11062586
> 
> 赞同：3
> 
> 时间：2012-06-16T10:17:53.623
> 
> 标签：perl, hash

我怎么知道这个哈希是否有奇数个元素？

```
my %hash = ( 1, 2, 3, 4, 5 ); 
```

好吧，我应该写更多的信息。

```
sub routine {
    my ( $first, $hash_ref ) = @_;
    if ( $hash_ref refers to a hash with odd numbers of elements ) {
        "Second argument refers to a hash with odd numbers of elements.\nFalling back to default values";
        $hash_ref = { option1 => 'office', option2 => 34, option3 => 'fast'  };
    }
    ...
    ...
}

routine( [ 'one', 'two', 'three' ], { option1 =>, option2 => undef, option3 => 'fast' ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T10:43:08.043

好吧，我想应该澄清问题中的一些术语混淆。

Perl 中的散列*总是*具有相同数量的键和值——因为它本质上是一个通过键存储某些值的引擎。我的意思是，键值对在这里应该被视为一个元素。)

但我想这不是真正被问到的。) 我想 OP 试图从一个列表（不是一个数组 - 差异是微妙的，但它仍然存在）构建一个哈希，并得到了警告。

所以重点是检查*列表*中将分配给哈希的元素数量。它可以简单地完成......

```
my @list = ( ... there goes a list ... ); 
print @list % 2; # 1 if the list had an odd number of elements, 0 otherwise 
```

请注意，`%`运算符将标量上下文强加在列表变量上：它简单而优雅。)

**如我所见，更新**，问题略有不同。好的，让我们谈谈给出的例子，简化一点。

```
my $anhash = { 
   option1 =>, 
   option2 => undef, 
   option3 => 'fast'
}; 
```

看，`=>`只是语法糖；这个任务可以很容易地重写为......

```
my $anhash = { 
   'option1', , 'option2', undef, 'option3', 'fast'
}; 
```

关键是第一个逗号后面的缺失值和`undef` *不一样*，因为列表（任何列表）在 Perl 中会自动展平。`undef`可以是任何列表的普通元素，但空格将被忽略。

请注意，如果使用包含在引用中的无效哈希来调用您的过程，则会在调用您的过程之前*引发*您关心的警告（如果`use warnings`已设置） 。所以造成这种情况的人应该自己处理，看看他自己的代码：早点失败，他们说。)

 *您想使用命名参数，但为缺少的参数设置一些默认值？使用这种技术：

```
sub test_sub {
  my ($args_ref) = @_;
  my $default_args_ref = {
    option1 => 'xxx',
    option2 => 'yyy',
  };
  $args_ref = { %$default_args_ref, %$args_ref,  };
} 
```

那么你的 test_sub 可能会被这样调用......

```
test_sub { option1 => 'zzz' }; 
```

... 甚至 ...

```
test_sub {}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-16T10:38:09.323

简单的答案是：您会收到有关它的警告：

```
Odd number of elements in hash assignment at... 
```

假设您没有愚蠢并关闭警告。

硬性的答案是，一旦完成对哈希的分配（并发出警告），它就不再奇怪了。所以你不能。

```
my %hash = (1,2,3,4,5);
use Data::Dumper;
print Dumper \%hash;

$VAR1 = {
      '1' => 2,
      '3' => 4,
      '5' => undef
    }; 
```

如您所见，`undef`已插入空白处。现在，您可以检查未定义的值并**假装**任何现有的未定义值构成散列中的奇数个元素。但是，如果未定义的值是哈希中的有效值，那么您就有麻烦了。

```
perl -lwe '
    sub isodd { my $count = @_ = grep defined, @_; return ($count % 2) }; 
    %a=(a=>1,2); 
    print isodd(%a);'
Odd number of elements in hash assignment at -e line 1.
1 
```

在这个单行中，函数`isodd`计算定义的参数并返回参数的数量是否为奇数。但如您所见，它仍然发出警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T13:13:51.487

当哈希分配不正确时，您可以使用该`__WARN__`信号“陷阱”。

```
use strict ;
use warnings ;

my $odd_hash_length = 0 ;   
{
  local $SIG{__WARN__} = sub {
    my $msg = shift ;
    if ($msg =~ m{Odd number of elements in hash assignment at}) {
      $odd_hash_length = 1 ;
    }
  } ;

  my %hash = (1, 2, 3, 4, 5) ;
}

# Now do what you want based on $odd_hash_length
if ($odd_hash_length) {
  die "the hash had an odd hash length assignment...aborting\n" ;
} else {
  print "the hash was initialized correctly\n";
} 
```

另请参阅[如何在 Perl 中捕获和保存警告](http://szabgab.com/how-to-capture-and-save-warnings-in-perl.html)。*

# python - 蛞蝓和通用视图

> ID：11062587
> 
> 赞同：0
> 
> 时间：2012-06-16T10:18:00.407
> 
> 标签：python, django

我有一个名为 blog 和 blog 以及 Post and Categories 模型的应用程序。

```
url(r'^(?P<slug>[-\w]+)/$', ListView.as_view(
                    queryset=Post.objects.filter(category=4)[:5],
                    template_name='blog.html')), 
```

我可以看到上面这样的代码

127.0.0.1/categories/php/

使用上面的 url，我可以看到 5 篇分类为 4 的文章。我想要什么让它动态化。例如，python 是第 3 类

```
queryset=Post.objects.filter(category='P<pk>\d')[:5] 
```

我试过这个但不工作。还有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:31:47.617

您可以创建自定义`ListView`并在其中添加功能：

```
class BlogPostView(ListView):
    template_name = 'blog.html'

    def get(self, request, *args, **kwargs):
        slug = kwargs.get('slug')
        slug_id = ... # code here to determine id of slug's category
        self.queryset = Post.objects.filter(category=slug_id)[:5]
        return super(BlogPostView, self).get(request, *args, **kwargs) 
```

使用以下作为 URL 配置：

```
url(r'^(?P<slug>[-\w]+)/$', BlogListView.as_view()), 
```

Django 只会解析 URL 字符串/正则表达式以确定它具有哪些参数，您不能传递字符串/正则表达式来过滤查询集的对象。

# iphone - 具有可拉伸背景图像的 UITableViewCell

> ID：11062591
> 
> 赞同：0
> 
> 时间：2012-06-16T10:19:20.870
> 
> 标签：iphone, objective-c, ios, xcode

我有单元格`UITableView`，我为单元格上的标签制作了自定义框架，并且该框架根据文本调整大小。

但我的问题是，随着文本大小的增加，如何在气泡（图像）中显示这些文本，气泡图像的大小也会增加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:24:59.373

为您使用的图像尝试此代码：

```
- (UIImage *)stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T11:01:04.987

试试这个：

在自定义 Cell.m 文件中：

```
bgImageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 30, 80, 40)];
[self.contentView addSubview:bgImageView];

messageContentView = [[UITextView alloc] init];
messageContentView.backgroundColor = [UIColor clearColor];
messageContentView.editable = NO;
messageContentView.scrollEnabled = NO;
[messageContentView sizeToFit];
[self.contentView addSubview:messageContentView]; 
```

在`tableView:cellForRowAtindexPath`方法中：

```
static CGFloat padding = 20.0;  
CGSize textSize = {260.0 , 10000.0};
CGSize size = [message sizeWithFont:[UIFont boldSystemFontOfSize:13] constrainedToSize:textSize lineBreakMode:UILineBreakModeWordWrap];
size.width += (padding/2);
UIImage *bgImage = nil;

    if([sender isEqualToString:@"you"])
    {
        bgImage = [[UIImage imageNamed:@"orange.png"] stretchableImageWithLeftCapWidth:24 topCapHeight:15];

     [cell.messageContentView setFrame: CGRectMake(padding, padding*2, size.width, size.height)];

        [cell.bgImageView setFrame:CGRectMake(cell.messageContentView.frame.origin.x - padding/2,cell.messageContentView.frame.origin.y - padding/2,size.width+padding, size.height+padding)];
    }
    else
    {
        bgImage = [[UIImage imageNamed:@"aqua.png"] stretchableImageWithLeftCapWidth:24  topCapHeight:15];
                [cell.messageContentView setFrame:CGRectMake(320 - size.width - padding,padding*2,size.width, size.height)];
                [cell.bgImageView setFrame:CGRectMake(cell.messageContentView.frame.origin.x - padding/2,  cell.messageContentView.frame.origin.y - padding/2,size.width+padding,size.height+padding)];

    }

    cell.bgImageView.image = bgImage; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T10:21:44.060

您可以使用大写字母拉伸图像，具体取决于您可以使用的图像形状

您可以使用此代码

```
//Your image view
UIImageView *imageView;
//Your image
UIImage *image;

//Left cap is the space you dont wanna stretch on the left side and right side of the image
int leftCap = 20;
//Left cap is the space you dont wanna stretch on the top side and bottom side of the image
int topCap = 20;
//this will only stretch the inner side of the image
imageView.image = [image stretchableImageWithLeftCapWidth:leftCap topCapHeight:topCap]; 
```

有关更多信息，请查看本[教程](http://idevrecipes.com/2010/12/08/stretchable-images-and-buttons/)

# java - Android Eclipse 编译器看不到布局和 id

> ID：11062592
> 
> 赞同：0
> 
> 时间：2012-06-16T10:19:30.770
> 
> 标签：java, android, eclipse

问题是 Eclipse 编译器在 res 文件夹中看不到任何布局或 ID，甚至看不到字符串和值，尽管 R 类生成得很好（我已经打开它，但当然没有改变任何东西）。所以我尝试清理和构建项目，甚至重新启动 Eclipse，比较 ids - 问题仍然是 Eclipse 没有从 res 中看到任何东西。我该怎么办？可能有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:23:37.827

SDK 在项目的根包中生成资源类。因此，如果您的根包是 com.project，并且您正尝试从其他包（位于或不直接位于根包下）使用它，则需要导入 com.project.R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:25:59.377

我认为导入`import android.R;`你看不到任何 id 或布局或字符串

改变它`import com.companyname.projectname.R;`

*   从android清单文件中获取包名。然后像这样导入 `import packageName.R;`

# c# - 倒数计时器在asp.net中停止后如何禁用页面上的所有控件？

> ID：11062593
> 
> 赞同：-4
> 
> 时间：2012-06-16T10:19:40.153
> 
> 标签：c#, asp.net

我试图禁用以下代码中的下一个按钮，但它不起作用....请帮助...

```
 protected void timer1_Tick(object sender, EventArgs e)
    {
        CurrentTime = CurrentTime.AddSeconds(-1);
        LblTime.Text = "Time Left: " + CurrentTime.TimeOfDay;

        if (CurrentTime.TimeOfDay == DateTime.MinValue.TimeOfDay)
        {
            LblTime.Text = "Oops!! Time Up";         

            timer1.Enabled = false;

            btnnext.Enabled = false;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:35:47.143

在 asp.net 中无法在服务器端使用计时器。你走错了路。除非您使用更新面板控件

# objective-c - 如何关闭应用内声音

> ID：11062594
> 
> 赞同：0
> 
> 时间：2012-06-16T10:19:57.890
> 
> 标签：objective-c, ios5, xcode4.3

我怎样才能让用户选择关闭我的应用程序中的所有声音 - 如果他们愿意的话。

我希望声音作为标准存在。但是，有些用户可能不喜欢在我的应用程序中显示哔哔声和音效等。例如，在 Camera plus 或 Paste Bot 中，您必须选择使用 UI 开关关闭声音。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:29:02.110

您只需要定义一个变量来指示此选项，并将其保存在某个位置。

# java - 桌面和 Android 应用程序之间的类序列化

> ID：11062600
> 
> 赞同：0
> 
> 时间：2012-06-16T10:21:04.193
> 
> 标签：java, android, serialization

我有一个桌面应用程序（不是 Android），它允许我实例化一个类，改变它的内部状态，并将其序列化为一个文件（使用标准的 Java 序列化机制）。然后我将此文件复制到我单独的 Android 应用程序的资源中。我希望将此文件反序列化为与我的 Android 应用程序中相同的类结构。

但是，桌面类和 Android 类之间的数据成员略有不同，例如，我不能在 Android 中使用 BufferedImage，而必须使用 Bitmap。

显然系统不会喜欢这样，所以因为它对我没有任何影响，所以我将这些特定的数据成员设置为瞬态的。在桌面上再次序列化后，该文件仍然无法在 Android 上反序列化。执行时出现 ClassNotFoundException 错误

```
myclass = (MyClass)ois.readObject(); 
```

有谁知道我是否可以通过编写自己的序列化函数来使用 Externalizable 来实现我的目标，还是我必须编写完全独立的序列化（没有 Serializable/Externalizable）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:43:08.560

要解决这个问题，您需要实现 Externalizable 并实现自己的序列化函数。这使您能够序列化和反序列化不同类中的相同数据。

但是，ClassNotFoundException 是枚举类型的不正确序列化/反序列化的结果。

# python - 完成特定任务后暂停线程的条件变量（在 Python 中）

> ID：11062606
> 
> 赞同：2
> 
> 时间：2012-06-16T10:21:36.783
> 
> 标签：python, multithreading, conditional-statements

我正在为一个程序实现一个 GUI，该程序为总线路由问题构建和修改一个大图。

我想要一个播放按钮，它应该开始模拟（创建一个执行模拟（）方法的新线程 simThread，这几乎是一个无限循环，一遍又一遍地调用方法 modifyGraph（））。

我还想要一个暂停按钮，当按下它时会导致 simThread 等待，但不是直到它完成当前对 modifyGraph()) 的调用。这是因为在 modifyGraph() 期间，图形通常处于不应绘制的状态。当我再次按 Play 时，理想情况下 simThread 应该继续原处。

我对一般的线程，特别是在 Python 中相对较新，但我觉得条件变量是要走的路。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:57:14.557

如果您的 simThread 看起来像这样：

```
class simThread(threading.Thread):
    def run(self):
        while True:
            modifyGraph() 
```

您可以像这样引入要取消暂停的事件：

```
class simThread(threading.Thread):
    def __init__(self):
        self.unpaused = threading.Event()
        self.unpaused.set()
        threading.Thread.__init__(self)

    def run(self):
        while True:
            modifyGraph()
            unpaused.wait() 
```

您将像这样使用此功能：

```
thread = simThread()
thread.start()
thread.unpaused.clear()
[...]
thread.unpaused.set() 
```

如果您认为调用的事件`unpaused`有点尴尬，您还可以添加一个`pause`最初设置为的附加布尔变量`False`。在线程中，您将检查它是否存在`True`，然后等待取消暂停事件。所以是这样的：

```
class simThread(threading.Thread):
    def __init__(self):
        self.pause = False
        self.unpause = threading.Event()
        threading.Thread.__init__(self)

    def run(self):
        while True:
            modifyGraph()
            if self.pause:
                unpause.wait()

    def pause(self):
        self.unpause.clear()
        self.pause = True

    def unpause(self):
        self.pause = False
        self.unpause.set()

thread = simThread()
thread.start()
thread.pause()
thread.unpause() 
```

你应该使用一个事件而不是让另一个 while 循环旋转的`self.pause`原因是为了避免浪费 CPU 周期。

# jsf-2 - 提交表单时保留获取参数

> ID：11062609
> 
> 赞同：0
> 
> 时间：2012-06-16T10:22:01.420
> 
> 标签：jsf-2, java-ee-6

我正在尝试在 JSF 中做一些简单的事情，但由于某种原因我无法让它工作。我想要的是使用 GET 参数到达的页面中的表单发布信息，并在我提交表单时保留此 GET 参数。

```
<f:metadata>
    <f:viewParam name="someId" value="#{someController.something}" converter="#{someConverter}" />
</f:metadata> 
```

这是我选择绑定 GET 参数的方式，这在我执行 GET 请求时工作正常。

在同一页面上，我有一个

```
<h:form>
    <!-- (... various input ...) -->
    <h:commandLink action="#{someController.create}"  value="Create" />
</h:form> 
```

当我提交它时，即使数据是正确的，我也永远不会让我的“某物”不为空。

用例很简单，我有一个一对多的关系，我想使用 id 作为 GET 参数访问“一个”，并在页面上列出“很多”，在列表下方，表单允许我添加一个新的“许多”列表中的元素。

我想让它工作（当然）并尽可能地清洁，

有人能告诉我实现这一目标的最佳方法是什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:37:05.757

要么制作`SomeController`bean `@ViewScoped`，只要你与同一个视图交互，bean 就可以存活，

```
@ManagedBean
@ViewScoped
public class SomeController {
    // ...
} 
```

或`<f:param>`在`UICommand`组件中使用以传递 GET 参数

```
<h:commandLink>
    <f:param name="someId" value="#{param.someId}" />
</h:commandLink> 
```

# html - 在 html 中显示文章的一部分并正确处理未关闭的 html 标签

> ID：11062613
> 
> 赞同：1
> 
> 时间：2012-06-16T10:22:55.387
> 
> 标签：html

问题是我有一个显示文章标题的页面。每个标题包含图像标题和文章的第一个例如 1000 个字符。文章内容作为 HTML 文本存储在数据库中。

当我在例如`<b>`标签的中间剪切文章的内容（以将其显示在标题中）时出现问题：

```
this is my article, 1000 characters foo foo <b> here is bold ... [here I do the cut] 
```

结果页面的其余部分（带有文章标题）也是粗体的。人们如何应对呢？我想显示每篇文章的样式化 html 描述。

非常感谢您的帮助

# eclipse - Eclipse GUI 包

> ID：11062614
> 
> 赞同：0
> 
> 时间：2012-06-16T10:23:06.270
> 
> 标签：eclipse, osgi, equinox

我正在构建一个应用程序，它的 GUI 应该看起来像 eclipse。由于 Eclipse 使用 Equinox OSGi 框架，是否可以在我的应用程序中重用负责 Eclipse GUI 的包？如果是这样，哪个是负责 Eclipse GUI 的包？任何帮助表示赞赏..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T13:25:33.080

我相信您做出了错误的假设：在 Eclipse 安装通常包含的许多包（也称为插件）中，没有一个*包*负责整个 GUI。相反，它是 SWT 图形库、视图、工作台等的大量依赖包。

因此，如果您想创建一些看起来像 Eclipse 并且行为像 Eclipse 的东西，那么您希望重用其中的许多插件，并且您可能希望进一步阅读[Eclipse Rich Client Platform](http://wiki.eclipse.org/index.php/Rich_Client_Platform)，它是用于创建 Eclipse 的最小的可重用包集- 基于应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:03:12.290

这是可能的，但有点复杂。下载[SWT](http://www.eclipse.org/swt/)（标签、按钮和表格等基本构建块）和可能的[JFace](http://wiki.eclipse.org/JFace)（高级 UI 组件）的档案，并将 JAR 添加到您的类路径中。

获取它们的一种方法是为您的平台下载 Eclipse；这为您提供了 JFace JAR。SWT 稍微复杂一些，因为每个支持的平台都包含一个 JAR；您可以在“Delta Pack”中找到所有平台的 JAR（[下载 Eclipse 4.2](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2-201206081400/#DeltaPack)）

编写应用程序时，您需要确定平台并将正确的 SWT JAR 添加到类路径中。这是执行此操作的代码：[创建跨平台 Java SWT 应用程序](https://stackoverflow.com/questions/2706222/create-cross-platform-java-swt-application/3204032#3204032)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T12:19:56.723

为了构建类似 Eclipse 的应用程序，您当然可以使用自己的插件扩展 Eclipse 平台。然而，OSGi 可能非常复杂。

如果您只想要 Eclipse 的一般外观，您只需使用[SWT：The Standard Widget Toolkit](http://www.eclipse.org/swt/)。该工具包提供 GUI 元素并负责 Eclipse 的外观。

# css - CSS 3 是否仍允许省略最后的分号？

> ID：11062615
> 
> 赞同：10
> 
> 时间：2012-06-16T10:23:06.350
> 
> 标签：css

即将发布的 CSS 语法模块第 3 级规范草案中似乎有一个重大更改（即向后不兼容）：现在可能需要在块中的最后一个声明之后使用分号。

比较旧的措辞（[W3C 工作草案 2003 年 8 月 13 日](http://www.w3.org/TR/css3-syntax/#rule-sets)）：

> 4.8\. 规则集、声明块和选择器 声明块（在下文中也称为 {} 块）以左大括号 ({) 开始，以匹配的右大括号 (}) 结束。在两者之间必须有零个或多个分号**分隔**(;) 声明的列表。

使用新的（[编辑草稿 2012 年 6 月 14 日](http://dev.w3.org/csswg/css3-syntax/#syntax-description)）：

> 2\. CSS 语法描述 规则以选择器（由选择器规范定义）开始，然后有一个包含一系列声明的 {} 包装块。选择器指定声明将应用于哪些元素。每个声明都有一个属性名称，后跟一个冒号和属性值，并**以**分号结尾。

（强调我的）。

所以漂亮的简短形式，例如：

```
em { color: lime } 
```

（目前在 CSS 颜色模块级别 3 建议中作为有效示例给出）将不再验证。

有人可以对整个 3 级草稿集合更了解吗？对于面向未来的样式表，我们真的必须在规范最终确定之前彻底检查现有的 CSS 文件（如果缺少则插入分号）还是我误解了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T10:48:03.937

看起来目前规范中存在歧义。

您正确地指出[2\. Syntax Description 部分](http://dev.w3.org/csswg/css3-syntax/#syntax-description)规定每条规则都以分号结尾：

> 每个声明都有一个属性名称，后跟一个冒号和属性值，并以分号结尾。

同时，第[3.6.8 节中对解析自动机的描述。声明值模式](http://dev.w3.org/csswg/css3-syntax/#declaration-value-mode)读取不带分号的右大括号同时正确结束声明和当前规则：

> *} 令牌*
> 
> 将当前声明附加到当前规则的值。从打开的规则堆栈中弹出当前规则，并将其附加到新的当前规则的值中。切换到当前规则的内容模式。

所以根据*3.6.8*尾随分号是可选的。

我不能说规范作者的实际意图。但目前的情况可能应该报告和修复。可以肯定的是，他们无意破坏与 CSS 2.1 的兼容性，并将在最终版本中改写他们的*语法描述部分。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T10:41:43.313

我认为在编写规范时这只是一个错误，真正的意图是把它作为分隔符，就像在以前的版本中一样。我希望在以后的草稿中对此进行调整。

[W3C 验证服务](http://jigsaw.w3.org/css-validator/)表示没有尾随分号的示例是有效的 CSS 级别 3 。

但是，我将一如既往地用分号结束每个声明。这是一个很好的做法，这样您在添加更多声明时就不会忘记分隔符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T10:31:03.363

这是“分隔符-​​终结符”问题的一个例子。显然，CSS 3 已经从分号作为分隔符转变为分号作为终止符。这意味着在每个元素之后都需要它，而不仅仅是在元素之间。Pascal（分隔符）和 C（终止符）提供了其他示例。这导致 Pascal 中的明显异常，例如分号在“else”或“until”之前是非法的。为什么 CSS 3 采用与 CSS-2 不兼容的规则超出了我的理解，实现是否会坚持是另一回事，但引用的意图很明确：它是一个终止符，因此必须出现在包括最后一个在内的所有条目上。

# java - 如何计算 BitSet 对象中的总位数？

> ID：11062616
> 
> 赞同：1
> 
> 时间：2012-06-16T10:23:21.950
> 
> 标签：java, bits, bitset

我想计算对象中的总位数`BitSet`。该方法`length`返回的“逻辑大小” `BitSet`：加一中设置的最高位的索引`BitSet`，而方法`cardinality`将给出对象中设置为 1 的总位数。

我想计算包括 0 和 1 在内的总位数。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:26:49.840

怎么样[`BitSet.size()`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html#size%28%29)？......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T17:37:21.903

Instrumentation 库中的 getObjectSize(Object o) 方法是你的人：[http ://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html)

这有几个线程。

*   [http://www.javaworld.com/article/2077496/testing-debugging/java-tip-130--do-you-know-your-data-size-.html](http://www.javaworld.com/article/2077496/testing-debugging/java-tip-130--do-you-know-your-data-size-.html)
*   [在 Java 中，确定对象大小的最佳方法是什么？](https://stackoverflow.com/questions/52353/in-java-what-is-the-best-way-to-determine-the-size-of-an-object)

干杯!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T12:58:09.047

该[站点](http://www.java2s.com/Code/Java/Collections-Data-Structure/Convertbitsettointarrayandstring.htm)展示了如何将 BitSet 转换为二进制字符串。然后只需计算`string.length()`

# apache - 将图像发布到 xmpp pubsub 节点

> ID：11062617
> 
> 赞同：1
> 
> 时间：2012-06-16T10:23:34.663
> 
> 标签：apache, mongodb, xmpp, publish-subscribe, strophe

我正在阅读 Jack Moffit 的《Professional XMPP Programming》一书，我有一些问题是我当前问题的正确解决方案。我主要构建一个 XMPP 应用程序，其中主要将文本发布到 pubsub 节点，但也发布图像（稍后可能是文件和视频）。我看到有两个选项可以实现图像发布：

*   用户可以上传经过 base64 编码的图像并将其作为项目存储在 pubsub 节点中（这样做有一些缺点：db 作为性能瓶颈，但可能是 NoSQL db 作为选项？我可以使用哪个 xmpp 服务器来使用它像 MongoDB 这样的 NoSQL 数据库）或
*   我必须使用网络服务器将图像上传到，但随后

    一个。我需要一个单独的 Web 应用程序作为外部 Web 应用程序附加到吗？湾。xmpp 用户应该只获取那些在他们订阅的节点上发布的图像 c. 我必须跟踪图像将存储在网络服务器上的哪个位置（该数据库表或仅基于 pubsub 节点名称和 pubsub 项 id 组合的文件夹/文件结构，以访问网络服务器上的图像文件）

任何意见将不胜感激！谢谢！

# c# - Wix 中的大多数事情都必须手动完成吗？

> ID：11062619
> 
> 赞同：4
> 
> 时间：2012-06-16T10:23:43.987
> 
> 标签：c#, winforms, visual-studio-2010, wix

我使用 Click Once 的时间已经很久了，它很容易将应用程序部署给我的客户。但最近我决定是时候继续前进了，因为有些事情我根本无法在`ClickOnce`部署中修复（比如 ngen Devexpress 库）。

所以我想搬到 WiX 但我想知道我是否真的必须

```
<DirectoryRef Id="INSTALLLOCATION">
  <Component Id="Executable.exe" Guid="{C4DCEDD2-B4FF-4DFB-B7D6-2FA8B16D7740}">
    <File Id="Executable.exe" Source="C:\MySourceFiles\Executable.exe" KeyPath="yes" Checksum="yes"/>
  </Component>
  <Component Id="documentation.html" Guid="PUT-GUID-HERE">
    <File Id="documentation.html" Source="C:\MySourceFiles\documentation.html" KeyPath="yes"/>
  </Component>

  ... each dll goes here
  ... each xml goes here
</DirectoryRef> 
```

我是否必须真正浏览 70 多个文件并一一放置并为其生成 GUID？它不能从目录或其他东西自动生成它，然后最终我可以填写它吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T14:57:03.393

不，你不可以使用收获工具 heat 来生成 wxs 文件。有关更多信息，请参阅[http://wix.sourceforge.net/manual-wix3/heat.htm](http://wix.sourceforge.net/manual-wix3/heat.htm)。3.6 的最新版本中还有更多功能未在此处记录，因此请查看您的版本的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T13:07:55.100

您可以尝试很多外部 wix 工具，这里有一些：

[蜡编辑](http://wixedit.sourceforge.net/)

[伊斯维克斯](http://iswix.codeplex.com/)

您还可以滚动您自己的自定义脚本来生成您需要的 XML。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T18:38:10.517

> *我是否必须真正浏览 70 多个文件并一一放置并为其生成 GUID？*

不，您可以省略 GUID。从属性的[组件元素文档](http://wix.sourceforge.net/manual-wix3/wix_xsd_component.htm)中：`GUID`

> 如果省略，默认值为“*”，表示链接器应生成稳定的 guid。仅具有单个文件作为组件的 keypath 或没有文件和注册表值作为 keypath 的组件支持可生成的 guid。

您也可以省略文件`Id`和`Keypath`属性。`Id`可以从`Source`文件名自动生成。并且`KeyPath`是多余的，因为如果一个组件只有一个文件，那么 wix 会自动将该文件标记为 keypath。

# windows - 在屏幕上居中 swf（没有 html）

> ID：11062620
> 
> 赞同：1
> 
> 时间：2012-06-16T10:24:00.893
> 
> 标签：windows, actionscript-3, flash, actionscript-2

我创建了一个 Flash 动画，我想将它作为 .exe 文件打开。如何在屏幕中央打开 exe？我的项目使用的是 AS3，但也可以是 as2。我只需要在 Windows 操作系统上打开这个 exe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:03:02.447

我不知道有什么方法可以在纯闪存中做到这一点，但如果你使用 AIR 就很容易做到。

这是一个使窗口居中的示例：

```
import flash.system.Capabilities
public function setupWindow():void
{
    var screenX:uint = Capabilities.screenResolutionX
    var screenY:uint = Capabilities.screenResolutionY
    stage.nativeWindow.x = (screenX-stage.nativeWindow.width)/2
    stage.nativeWindow.y = (screenY-stage.nativeWindow.height)/2
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T15:21:09.357

Flash 窗口有一个属性“Startposition”；将其设置为“CenterScreen”

# android - 通过 Internet 调试 android 设备

> ID：11062629
> 
> 赞同：34
> 
> 时间：2012-06-16T10:25:21.857
> 
> 标签：android, remote-debugging

我正在寻找一种通过 Internet 远程调试设备的方法。

我从我的用户那里收到了很多我什至无法重现的错误报告。如果我可以通过 Internet 调试设备，就好像它连接到我的 PC 一样，那么解决它们将很容易。这可能吗？

我听说在本地网络中通过 wifi 进行调试，也许有类似的方法可以通过 Internet 实现它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-01T00:04:53.947

可以设置 Android 设备以通过 Internet 进行调试，但它需要 USB 连接才能启用它或设备上的 root 访问权限。除此之外，您还必须设置端口转发到设备以接受来自 Internet 的传入 ADB 连接。除非您的应用程序的用户是非常渴望合作的开发人员，否则它几乎无济于事。

您可以在此处找到详细说明：http: [//www.cleansoft.lv/debugging-android-applications-remotely/](http://www.cleansoft.lv/debugging-android-applications-remotely/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-31T07:06:54.167

**要遵循的步骤：**

1.  首先在 Android*设置*应用程序中转到*关于设备*选项。
    2.  *在Build Number*选项上单击 9 次，这样您就可以解锁*Developer Options*设置。
    3.  现在在您的设置应用程序中，您将启用*开发人员选项*，然后单击它。
    4.  设置以下选项：*保持清醒*，*USB 调试*，如果您在菜单集中有*Internet Adb*选项，如果没有启用，请不要担心继续这些步骤。
    5.  现在打开您的*Android Studio*和您要在 android 设备上运行的应用程序。
    6.  在 Android Studio 中，在底部单击*终端*选项卡，终端窗口打开。
    7.  现在通过您的终端转到存储*Android SDK的目录*
    8.  在 SDK 目录中，转到*platform-tools*目录。
    9.  *现在，如果您在平台工具*中列出文件，您将在那里看到*adb*。
    10.  运行以下命令。

举个例子。

```
adb connect <ip-address-of-your-device>:5555 
```

举个例子：

```
adb connect 10.10.0.21:5555 
```

终端应显示如下

```
adb server is out of date. killing...
*daemon started successfully*
connected to 10.10.0.21:5555 
```

现在运行shell命令

```
adb shell 
```

你会得到类似这样的提示，我的情况是我使用 android x86 设备进行调试。

```
shell@x86_64:/$ 
```

现在，如果您转到 android studio 中的任务栏并单击*Run* options 然后*Run'app'*您将能够看到该设备作为您的*Deployment Target*。

希望能帮助到你 ！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-14T12:49:34.013

您可以在您的应用程序中使用[Crashlytics](https://docs.fabric.io/android/crashlytics/overview.html)。它可以帮助您获取详细的崩溃日志。每当应用程序崩溃时，它都会向您发送详细的崩溃报告，您可以从中了解客户端发生的情况。[从此处](https://fabric.io/kits/android/crashlytics/install)获取有关将 crashlytics 添加到应用程序的更多信息。

将此新应用程序发送给客户端，以便有解决方法：

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-15T16:12:21.247

您还可以通过 tcp ip 使用 adb：

```
adb connect ip:port 
```

*   使用远程访问（teamviewer 或 droid apk）在 android 开发者工具中启用调试。
*   在连接android的路由器中，记住创建端口转发到android ip。

在安装了 adb 的机器上执行以下操作：

```
adb connect public_ip:port 
```

连接后，您可以：

```
adb logcat 
```

或者

```
adb shell 
```

或您想要的任何 adb 命令。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-14T10:03:52.353

尝试 Debugging Firefox for Android over Wifi 它对我有用

[https://developer.mozilla.org/en-US/docs/Tools/Remote_Debugging/Debugging_Firefox_for_Android_over_Wifi](https://developer.mozilla.org/en-US/docs/Tools/Remote_Debugging/Debugging_Firefox_for_Android_over_Wifi)

# macos - Firefox for Mac 上深色背景上的浅色文本太粗

> ID：11062631
> 
> 赞同：3
> 
> 时间：2012-06-16T10:25:29.357
> 
> 标签：macos, firefox

当网页的深色背景上显示浅色文本时，Firefox for Mac 会使字体变得过于粗体。这仅适用于 Mac 版本，windows 版本渲染良好。

Mac 上的 Safari 也出现了这个问题，但是通过`-webkit-font-smoothing: antialiased;`在站点的 css 代码中添加：来纠正它。

是否有类似的代码可以为 Firefox Mac 做同样的事情？已经尝试过`opacity:0.99;`，但这不是这种字体的解决方案。

这是一个测试文件：[http ://tinyurl.com/d88o2f8](http://tinyurl.com/d88o2f8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T15:28:16.793

`-moz-osx-font-smoothing: grayscale`将在 Mac 上的 Firefox 中做同样的事情。

# php - 用于查找 Web 服务器名称的 php 脚本

> ID：11062632
> 
> 赞同：2
> 
> 时间：2012-06-16T10:25:43.683
> 
> 标签：php, apache, nginx, webserver, varnish

是否有任何 php 脚本来查找 web 服务器的名称，如 apache、varnish、nginx 等。

我知道 netcraft 和 wappalyzer，但我想在我的本地机器上运行一个脚本

主要原因是，我的本地机器 Apache2、nginx、Varnish 和 Lighty 中有 4 台服务器。

我为它们设置了不同的端口，例如 localhost:70 localhost:7070 等。但是所有服务器的根文件夹都是 /var/www/ 并且我在 /www 中有一个 index.php，它列出了 /www 文件夹下的所有项目。

我需要一些 php 脚本来回显要插入到我的 index.php 文件中的服务器名称，例如：如果我使用 localhost:70，该脚本将检测其 Apache 并显示 Apache，依此类推。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T10:32:28.080

您可以使用 php.ini 中的方法获取服务器信息`$_SERVER`。

`$_SERVER['SERVER_SOFTWARE']`返回名称如**Apache/2.2.21 (Win32) PHP/5.3.10**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-20T16:22:15.460

使用`$_SERVER`索引为 的超全局变量`SERVER_SOFTWARE`：

```
$serverSoftware = $_SERVER['SERVER_SOFTWARE']; 
```

上面的代码为您提供了服务器软件的全名。如果您只想获取 Web 服务器名称，请使用以下方式：

```
$webServerName = explode('/', $serverSoftware)[0]; 
```

**注意：**的索引`$_SERVER`区分大小写。`server_software`不起作用（正如我之前尝试过的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T08:00:28.627

Wappalyzer 有一个 PHP 端口，您可以从命令行或 PHP 脚本运行：

[https://github.com/ElbertF/Wappalyzer#drivers](https://github.com/ElbertF/Wappalyzer#drivers)
[https://github.com/ElbertF/Wappalyzer/tree/master/drivers/php](https://github.com/ElbertF/Wappalyzer/tree/master/drivers/php)

# java - Java：有效地存储布尔值[32]？

> ID：11062640
> 
> 赞同：10
> 
> 时间：2012-06-16T10:26:52.847
> 
> 标签：java, performance

在 Java 中，我想将 (>10'000) 个长度为 32 的布尔值数组 (boolean[]) 存储到磁盘上，稍后再读取它们以进行进一步的计算和比较。

由于单个数组的长度为 32，我想知道将其存储为整数值是否有意义以加快读写速度（在 32 位机器上）。你会建议使用 BitSet 然后转换为 int 吗？或者甚至忘记 int 并使用字节？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T10:40:04.877

对于二进制存储，使用`int`and a `DataOutputStream`(`DataInputStream`用于读取)。

我认为 boolean 数组在 Java 内部存储为 byte 或 int 数组，因此您可能需要考虑避免开销并始终保持 int 编码，即根本不使用 boolean[]。

相反，有类似的东西

```
public class BooleanArray32 {
  private int values;

  public boolean get(int pos) {
    return (values & (1 << pos)) != 0;
  }

  public void set(int pos, boolean value) {
     int mask = 1 << pos;
     values = (values & ~mask) | (value ? mask : 0);
  }

  public void write(DataOutputStream dos) throws IOException {
    dos.writeInt(values);
  }

  public void read(DataInputStream dis) throws IOException {
    values = dis.readInt();
  }

  public int compare(BooleanArray32 b2) {
     return countBits(b2.values & values);
  }

  // From http://graphics.stanford.edu/~seander/bithacks.html
  // Disclaimer: I did not fully double check whether this works for Java's signed ints
  public static int countBits(int v) {
    v = v - ((v >>> 1) & 0x55555555);                    // reuse input as temporary
    v = (v & 0x33333333) + ((v >>> 2) & 0x33333333);     // temp
    return ((v + (v >>> 4) & 0xF0F0F0F) * 0x1010101) >>> 24; 
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:40:13.787

~~我的强烈印象是，您为打包布尔值而进行的任何压缩都会**增加**读取和写入时间。~~（我的错误，我显然错过了我的药物）。您宁愿在所涉及的存储方面获得收益。

在您的业务逻辑方面，BitSet 是一个明智的选择。它在内部存储一个 long，您可以将其转换为 int。但是，由于 BitSet 足够谨慎，不会向您显示其私有信息，因此您需要按顺序获取每个位索引。这意味着我想转换为 int 而不是直接使用字节并没有真正的优势。

因此，Stefan Haustein 的自己滚动解决方案（根据需要扩展以模仿 BitSet）更适合您的存储需求，因为您不会产生任何不必要的开销。

# ruby-on-rails-3 - 我的 FactoryGirl 创建的对象没有持久化？

> ID：11062645
> 
> 赞同：0
> 
> 时间：2012-06-16T10:27:16.960
> 
> 标签：ruby-on-rails-3, cucumber, capybara, factory-bot

我正在运行以下功能：

```
 Scenario: viewing existing images
    Given I am on the images page
    And 4 images already exist
    Then I should see a table containg those 4 images
    And have the option to show images
    And have the option to delete images 
```

定义了这些步骤：

```
Given /^I am on the images page$/ do
  visit(images_path)
end

Given /^(\d+) images already exist$/ do |count|
  count.to_i.times {
    FactoryGirl.build(:image).save!
  }
end

Then /^I should see a table containg those (\d+) images$/ do |count|
  page.all('table#imagesTable tr').count.should == count
end 
```

最后一步，计算表中的行数，失败得很惨。它只能找到一行，我假设是标题行。这些是索引页面的测试，我已经手动确认它有效。为什么我的 FactoryGirl 创建的对象没有拾取我的控制器？

控制器的索引方法：

```
 def index
    @images = Image.all
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:57:50.773

交换“我在图片页面”和“4 张图片已经存在”的顺序。

索引操作被称为视图在创建图像之前呈现，因此它们不会被拾取。

另外，我不知道你是否已经知道这一点，而不是

```
FactoryGirl.build(:image).save! 
```

你可以做

```
FactoryGirl.create(:image) 
```

# database - 我应该使用什么 NoSQL 数据库？

> ID：11062648
> 
> 赞同：2
> 
> 时间：2012-06-16T10:28:32.180
> 
> 标签：database, nosql

好的，所以我一直在对 NoSQL 数据库进行一些研究，它们似乎是我需要的正确选择。然而，问题是，很多这些数据库，如果不是大多数的话，都是从 RAM 读取/写入，而不是磁盘。当您拥有大量服务器资源或不期望大量数据块时，这很好 - 但我认为我应该为最坏的情况做好准备。

我期望从这些数据源收到的数据是每个查询从 25KB 到 150KB 不等 - 是的 - 对于单个键值，最多可达 150KB。普通用户将产生 500 到 5000 个这样的密钥，并且它们可以无限增长（但可能会在 5000 范围内的某个地方停止）。如果您快速进行计算（大部分数据将在 25-150 的较高端，所以我将使用 100KB 作为“平均值”，大多数用户可能会产生 2000-3000 个查询）：100KB*3000 - 那就是每位用户 300MB！当您开始获得体面的用户群时，会产生大量*数据*。因此，最终我可能会丢弃查询中的大部分数据，使其不超过 1KB 左右，但这仍将远远超过大多数 RAM 功能。

所以我认为我正在寻找一种将数据存储到磁盘并将对象缓存在 RAM 中的解决方案。但我对所有解决方案都持开放态度！让我知道你们的想法。我很想保持这件事*快速*运行......

编辑：

措辞略有不同，以便对路人有用：

如果希望最大化性能但在 NoSQL 数据库中处理大量数据负载，那么推荐的 NoSQL 数据库是什么？我认为它将是将数据存储到磁盘的一种，但这会严重影响性能。那里有“两全其美”的解决方案吗？重要的是要注意我假设，这些记录一旦提交就不会被修改，只会读取（但可能甚至不会经常）。

我一直在研究 Redis 来完成这样的任务，因为它看起来非常易于管理 - 但是它完全在 RAM 中运行，因此需要小数据块，或者多个服务器同时运行多个实例。这是我不知道的可使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:05:30.583

首先，我认为当您说大多数您所见过的将数据存储在 RAM 中时，您指的是内存中的 Key/Value 数据存储，例如 Redis 或 Memcached。但不止于此。在结束关于内存中 NoSQL 选项的讨论之前，我应该说你是对的。内存很容易填满，根据您的要求，您将需要大量内存。所以应该丢弃内存中的选项（不是它们没有用，但在这种特定情况下不是）。

我的建议是 MongoDb。满足您的需求：将数据存储在磁盘上，将内容缓存在内存中（尽可能多地）。但是，您需要一些强大的数据存储选项（SSD 是您应该考虑的），以便它可以处理您的数据吞吐量需求。我已经测试过 Mongo，但数据要少得多。我正在寻找超过 100 万个元素集合，其值大小从 5Kb 到 50Kb 不等。

我最感兴趣的是阅读速度。我还应该提到我测试过的写入速度，并且必须说它们令人印象深刻。几分钟内插入 100 万个 20Kb（在小型服务器上 - 四核、8GB RAM、VMware VM）。

回到读取速度，我一直在寻找半并发查询，它可以为大约 100 个并发用户提供低于 50 毫秒的读取时间。

在 MongoDb 团队的帮助下，我设法接近了那个时代，但后来我开始做别的事情，不得不放弃我的研究（暂时，我希望能尽快恢复）。还有更多的事情需要研究，例如聚合速度、map/reduce 等。我可以说服务器上的查询时间非常快，所有开销都是由 BSON 序列化/反序列化和网络传输增加的。

所以，对你来说，Mongo 是合适的，但你必须用一些好的硬件来支持它。您应该真正安装它并在您的特定情况下对其进行测试，并从您自己的测试中得出结论。

如果您要这样做并且您的客户端是 .NET，那么您应该使用他们的官方驱动程序。否则，这里列出了很多其他内容：[http](http://www.mongodb.org/display/DOCS/Drivers) ://www.mongodb.org/display/DOCS/Drivers 。

可以在这里找到有关 Mongo 功能以及如何使用它们的良好介绍：[http](http://www.mongodb.org/display/DOCS/Developer+Zone) ://www.mongodb.org/display/DOCS/Developer+Zone 。诚然，他们的文档不如 RavenDb（我测试过的另一种 NOSQL 解决方案，但速度没有那么快），但您可以在此处或 Google Groups 上获得良好的支持。

# ruby-on-rails - ruby on rails 重用视图

> ID：11062652
> 
> 赞同：1
> 
> 时间：2012-06-16T10:29:04.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个“食谱”表和一个“成分”表。每个配方“has_and_belong_to_many”成分和每种成分“has_and_belong_to_many”配方。

我想添加一个指向成分页面的链接：“显示所有包含该成分的食谱”。

我在成分控制器中编写了以下代码：

```
def recipes
    @ingredient = Ingredient.find(params[:id])
    @recipes = @ingredient.recipes
    respond_to do |format|
       format.html # index.html.erb
       format.json { render json: @recipes }
    end
end 
```

我的问题是现在它希望我在“成分”视图下有一个“recipes.html.erb”文件。我不想为此创建一个新视图，我只想使用我在“食谱”视图 (recipes/index.html.erb) 中使用的相同代码。我怎样才能将rails引导到这个视图？

（我使用的是 Rails 3.x）

谢谢，李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:33:13.837

像这样：

```
def recipes
    @ingredient = Ingredient.find(params[:id])
    @recipes = @ingredient.recipes
    respond_to do |format|
       format.html { render "recipes/index" }
       format.json { render json: @recipes }
    end
end 
```

详情请看rails指南： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

# android - 如何通过按下应用小部件来启动 IntentService

> ID：11062653
> 
> 赞同：3
> 
> 时间：2012-06-16T10:29:17.437
> 
> 标签：android, widget, intentservice

按下我的应用小部件时，我想启动一个 IntentService。

我知道如何通过按下它来更新小部件，但我不知道如何实际启动 IntentService。

这是如何启动小部件更新

```
 Intent intent = new Intent(context, MyWidgetProvider.class);

        intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

        PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
                0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        remoteViews.setOnClickPendingIntent(R.id.update, pendingIntent);
        appWidgetManager.updateAppWidget(widgetId, remoteViews); 
```

我需要改变什么来启动一个 INtentService 呢？

ps 我还根据媒体启动了一项活动，但这会显示在屏幕上——我确实想避免这种情况。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T15:23:04.103

使用`getService()`代替`getBroacast()`，并使用`Intent`标识您的服务的 。

# sql - SELECT for List of course 一个人没有参加，使用 Oracle

> ID：11062654
> 
> 赞同：0
> 
> 时间：2012-06-16T10:29:24.473
> 
> 标签：sql, oracle, oracle10g, oracle11g

我知道可用的课程列表和一个人上过的课程列表。如何以逗号分隔格式选择/输出以下人员未参加的课程，

```
SELECT to list all courses:
SELECT DISTINCT(COURSE) FROM tblCOURSE

SELECT to list all courses taken by user
SELECT DISTINCT(COURSE) FROM tblCOURSE WHERE pid='XXXXX' 
```

我想用 将`LISTAGG(COURSETYPE, ',') WITHIN GROUP (ORDER BY pid,course)`它们列为`COURSE2,COURSE4,COURSE5,COURSE6,COURSE7,。

示例：说可用的课程列表是： `COURSE1,COURSE2,COURSE3,COURSE4,COURSE5,COURSE6,COURSE7,COURSE8`

个人参加的课程列表`XXXXX`是： `COURSE1,COURSE3,COURSE8`

SELECT 输出/结果应该是：

```
 PID         COURSES
--------------------------------------------------
 XXXXX    COURSE2,COURSE4,COURSE5,COURSE6,COURSE7`
-------------------------------------------------- 
```

`COURSES`pid`XXXXX`没有使用的课程列表在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:53:57.943

```
create table tblcourse(pid number,course varchar2(20));

Insert into TBLCOURSE  (PID, COURSE) Values (1, 'COURSE1');
Insert into TBLCOURSE  (PID, COURSE) Values (1, 'COURSE3');
Insert into TBLCOURSE  (PID, COURSE) Values (1, 'COURSE5');
Insert into TBLCOURSE  (PID, COURSE) Values (2, 'COURSE8');
Insert into TBLCOURSE  (PID, COURSE) Values (3, 'COURSE8');
Insert into TBLCOURSE  (PID, COURSE) Values (4, 'COURSE2');
Insert into TBLCOURSE  (PID, COURSE) Values (5, 'COURSE4');
Insert into TBLCOURSE  (PID, COURSE) Values (5, 'COURSE6');
COMMIT; 
```

**询问 ：**

```
WITH TAB AS 
(
 SELECT DISTINCT(COURSE) as course  
   FROM tblcourse --distinct courses  
MINUS   
 SELECT DISTINCT(COURSE) as course  
  FROM tblcourse 
 WHERE pid=:pid --will give you distinct courses that pid subscribe
)
SELECT  :pid,LISTAGG(COURSE, ',') WITHIN GROUP (ORDER BY COURSE) as courses 
  FROM TAB; 
```

*结果如你所愿：* `pass pid as 1`

```
PID           COURSES
-------------------------
 1            COURSE2,COURSE4,COURSE6,COURSE8 
```

[SQLFIDDLE 中的试用示例](http://www.sqlfiddle.com/#!4/c02f8/1)

**编辑**

*我想不出更好的解决方案，可能有人可以提出更好的方法来做到这一点，同时你可以看看这个，但有时笛卡尔积会摇摆不定:)*

```
WITH course_cartesian as (
       SELECT pid,course 
         FROM (SELECT DISTINCT course 
                 FROM tblcourse)q1,
              (SELECT DISTINCT pid 
                 FROM tblcourse)q2 
             ORDER BY pid,course
   )
,tbl_course AS(SELECT pid,course 
                 FROM course_cartesian
                MINUS
              SELECT pid,course FROM tblcourse
              )
SELECT pid,listagg(course,',') WITHIN GROUP (ORDER BY course) as courses 
  FROM   tbl_course  
 GROUP BY pid 
 ORDER BY pid; 
```

**输出**

![输出](../Images/5107850b97df4279acf7acbf85e38572.png)

SQLFIDDLE[链接](http://www.sqlfiddle.com/#!4/c02f8/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:31:57.180

基本选择将类似于：

```
SELECT :pid, LISTAGG(C, ',') WITHIN GROUP ORDER BY course FROM
(
  SELECT DISTINCT(COURSE) as C FROM tblCOURSE
  MINUS
  SELECT DISTINCT(COURSE) as C FROM tblCOURSE WHERE pid=:pid
) 
```

将 :pid 替换为您正在查找的 id。

（这是未经测试的，我在网上查了 LISTAGG 语法）

# java - Drools 中的“无法找到类”错误

> ID：11062657
> 
> 赞同：3
> 
> 时间：2012-06-16T10:30:06.070
> 
> 标签：java, jboss, drools

我正在尝试定义一个非常简单的函数，`Drools`如下所示：

```
import java.util.List;

function int sumLengths(List<String> strings) {
    int counter = 0;
    for (String s : strings)
        counter += s.length();
    return counter;
} 
```

但它给了我错误：

```
Exception in thread "main" java.lang.RuntimeException: [ function sumLengths (line:5):
Unable to resolve type List<String> while building function. java.lang.ClassNotFoundException: Unable to find class 'List<String>' ] 
```

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T07:20:38.340

也许这是泛型的问题（[这](http://osdir.com/ml/java.drools.user/2008-02/msg00024.html)让我得出了这个结论）。您是否尝试过以下（或类似的）：

```
function int sumLengths(List strings) {
    int counter = 0;
    for (Object s : strings)
        counter += ((String) s).length();
    return counter;
} 
```

如果它不起作用，您可以改用它：

```
function int sumLengths(String[] strings) {
    int counter = 0;
    int length = (strings != null) ? strings.length : -1;
    for (int idx = 0; idx < length; ++idx) {
        counter += strings[idx].length();
    }
    return counter;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-26T03:53:47.933

改成

```
function Boolean consulta(celda cref, java.util.List celdas) {

......

 celda c = (celda) celdas.get(y);
} 
```

# objective-c - 从 h 文件分配方法

> ID：11062660
> 
> 赞同：0
> 
> 时间：2012-06-16T10:30:37.740
> 
> 标签：objective-c

嗨，我是 object-c 的新手，这可能是个愚蠢的问题。我研究了在 m 文件中创建逻辑之前，我必须在头文件（.h 文件）上分配方法的名称。但是我发现一些示例仅在 m 文件中分配方法，而不是在 h 文件中。它工作正常。我有点困惑现在该做什么。请解释我的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:44:04.750

在您的项目中应公开的所有方法都转到 .h 文件。如果您希望该方法是私有的，请不要将其添加到 h.-file 中，而是在 .m-file 中定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:43:55.423

最新版本的 Xcode 包含一个编译器，如果您只想在定义它的同一个 .m 文件中使用该方法，则该编译器允许您跳过头文件中的声明。

这可能是你所看到的。

相同的较新版本的 Xcode 还允许您在 .m 文件中声明 ivars，这也有助于更简单的头文件和实现文件中更高程度的局部性。

# c# - 客户端在收到来自其他客户端的消息时断开连接

> ID：11062663
> 
> 赞同：1
> 
> 时间：2012-06-16T10:30:50.153
> 
> 标签：c#

我正在研究基于局域网的办公室间消息传递系统。

我的应用程序中的步骤是：

1.  服务器启动并监听客户端
2.  连接上的客户端获取所有其他已连接客户端的视图。
3.  在连接到服务器时，我会在数据库中检查该客户端是否被授权。
4.  如果我没有在客户端连接到服务器时检查数据库，那么应用程序确实可以正常工作，否则客户端如果数据库中不存在客户端应用程序就关闭了。

相关代码在这里：

```
public void CheckUserName(string userName)
        {

        if (userName != "Usman")  // checking in database( a static name)
        {
              //Check if the username is registered
              Send("sorry@Invalid Username, try another Username!!");
              Disconnect();
              return;
        }
        else
        {
            //If name is not duplicate then the client is connected
            this.connected =true;
            this.userName =userName;
            //Build the Usernames list and send it to the client
            StringBuilder userList = new StringBuilder();
            userList.Append(this.clientID);
            Hashtable clientTable =ClientList.GetList;
            foreach(DictionaryEntry d in clientTable)
            {
                //Seperate the usernames by a '@'
                userList.Append("@");
                userList.Append(d.Value.ToString());
            }
            //Start the llistening
            lock(myClient.GetStream())
            {
                AsyncCallback GetStreamMsgCallback = new AsyncCallback(GetStreamMsg);
                myClient.GetStream().BeginRead(recByte,0,1024,GetStreamMsgCallback,null);
            }
            //Send the Userlist
            Send(userList.ToString());
            //Raise the Connected Event
            if(Connected!=null)
            {
                EventArgs e = new EventArgs();
                Connected(this, e);
            }
        }
    } 
```

有谁可以建议如何摆脱这件坏事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:18:59.450

您是否考虑过在服务器启动时最初为所有启用的用户查询数据库，然后缓存这些结果？这样您就可以避免查询每个用户连接。您可以将授权用户存储在字典或某种其他样式的查找表中。

# database - 当外部联接查询只会将它们重新添加回时，避免空值有什么好处？

> ID：11062664
> 
> 赞同：0
> 
> 时间：2012-06-16T10:31:01.260
> 
> 标签：database, null, normalization

示例：具有可选 DateOfBirth 字段的 Employee 表可以规范化为两个表，一个专门用于保存具有已知出生日期的员工的 DateOfBirth 字段。但是这并没有增加 DateOfBirth 表中缺少行的语义含义，并且当您查询员工时，您几乎肯定需要将那些缺失的行外部连接回空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:43:23.643

您在这里谈论的是两个完全不同的概念。一个与规范化有关，一个与查询结果有关。在查询结果中包含大量空值是完全可以接受的，并且通常是可取的，以表示缺失值。表列中有大量空值表示设计问题。通常，如果您发现一个表包含具有大量空值的列，则该表是非规范化的。这对于报告数据库或仓库类型数据库可能没问题。但是，对于生产数据，您通常希望避免这种情况。

# javascript - 延迟到像 thread.sleep() 这样的 ajax 响应

> ID：11062666
> 
> 赞同：0
> 
> 时间：2012-06-16T10:31:10.650
> 
> 标签：javascript, jquery

我有将表单值发布到 url 的按钮，但在发布期间我也想将该值捕获到我的数据库中。所以在按钮单击时，我创建了新的 ajax 线程并由 while 循环暂停，因此用户无法因表单发布而重定向。

**但问题是程序在 while 循环中没有响应并且没有发布 ajax 调用。**

```
function btnSubmitId_Onclick() {

    window.setTimeout(function () {

        var FirstName = $(txtFirstNameId).val()
        var Email = $(txtEmailId).val()

        AJAXPost(   //Url
                "Signup"
                , //Data
                {Ip: Ip, CustomerKey: CustomerKey, FirstName: FirstName, Email: Email }
                , //Success
                function (data) {
                    response2 = true;
                }
                , //error
                function (xhr, textStatus, errorThrown) { }
            );

    }, 0);

    var date = new Date();
    var curDate = null;
    do { curDate = new Date(); }
    while (response2 == false)

}

var response2 = false; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:37:50.633

你**真的不应该那样做**。主动等待可能会阻止**整个浏览器**或至少阻止当前选项卡。

将请求成功后需要运行的所有代码放在成功回调中。

由于您显然想要正常提交表单*并*使用 AJAX（为什么？！），解决方案相当简单：通过调用`e.preventDefault()`（`e`作为传递给 jQuery 事件处理程序的第一个参数）和AJAX 请求成功后`.submit()`的表单。为了避免再次发送 AJAX 请求，您可能需要在 AJAX 请求完成后取消绑定提交事件处理程序或设置变量。

# mysql - 选择子 MySQL

> ID：11062670
> 
> 赞同：0
> 
> 时间：2012-06-16T10:32:01.513
> 
> 标签：mysql, sql, codeigniter, children

想通了怎么搞定父母后，想搞定孩子，可是想不通。。

我的桌子：

```
nvc_blog
    blogID
    Title
    Content

nvc_blog_cat
    catID
    parentID
    catSafe

nvc_blog_catmap
    id
    blogID
    catID 
```

我能够从所选类别（照片）中获取博客文章但是如何从子类别中获取博客文章？不起作用：/
`JOIN `nvc_blog_cat` AS child1 ON `child1`.`parentID` = `parent`.`catID``

```
SELECT * 
FROM (`nvc_blog`)
JOIN `nvc_blog_catmap` AS map ON `map`.`blogID` = `nvc_blog`.`blogID`
JOIN `nvc_blog_cat` AS parent ON `parent`.`catID` = `map`.`catID`

WHERE `parent`.`catSafe` =  'fotografie' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:08:54.087

如果您使用类别/子类别/子子类别...，那么您必须更改在 nvc_blog_catmap 中插入条目的逻辑。

首先，您的初始插入必须具有最后一个类别级别。然后，当一个类别有一个与其 id 不同的父级（或 0 - 表示没有父级）时，您必须使用父级作为您的 catID 将另一条记录插入到 nvc_blog_catmap 中。

这种方法将允许您避免在选择查询中涉及嵌套类别。

# openssl - 在 windows 上编译 OpenSSL 1.0.1

> ID：11062672
> 
> 赞同：1
> 
> 时间：2012-06-16T10:32:28.220
> 
> 标签：openssl, nmake, cl.exe

我正在尝试为 windows 编译 openssl。这是我第一次在没有适当的 Visual Studio 项目文件的情况下编译任何东西。

我遵循了这里的指南： [http](http://wp.libpf.com/?p=535) : //wp.libpf.com/?p=535 除了我在启动 git 之前发布 vcvarsall.bat 的详细信息。

可悲的是，现在 cl.exe 返回错误代码 0x02

我该如何解决？有没有什么地方可以让我获得 openSSL 1.0.1 for windows 的预编译二进制文件？

错误日志：

```
 Building OpenSSL
cl /Fotmp32\e_capi.obj  -Iinc32 -Itmp32 -DOPENSSL_NO_HW  /MT /Ox /O2 /Ob2 -DOPENSSL_THREADS  -DDSO_WIN32 -DOPENSSL_NO_HW -W3 -Gs0 -GF -Gy -nologo -DOPENSSL_SYSNAME_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDIAN -D_CRT_SECURE_NO_DEPRECATE -DOPENSSL_NO_RC5 -DOPENSSL_NO_MD2 -DOPENSSL_NO_MDC2 -DOPENSSL_NO_BF -DOPENSSL_NO_CAST -DOPENSSL_NO_DES -DOPENSSL_NO_DSA -DOPENSSL_NO_DH -DOPENSSL_NO_KRB5 -DOPENSSL_NO_GOST -DOPENSSL_NO_JPAKE -DOPENSSL_NO_DYNAMIC_ENGINE /Zl /Zi /Fdtmp32/lib -c .\engines\e_capi.c
e_capi.c
.\engines\e_capi.c(150) : error C2143: syntax error : missing '{' before '*'
.\engines\e_capi.c(424) : error C2079: 'capi_dsa_method' uses undefined struct 'dsa_method'
.\engines\e_capi.c(426) : warning C4047: 'initializing' : 'int' differs in levels of indirection from 'char [21]'
.\engines\e_capi.c(427) : error C2078: too many initializers
.\engines\e_capi.c(463) : warning C4013: 'DSA_get_ex_new_index' undefined; assuming extern returning int
.\engines\e_capi.c(464) : warning C4013: 'DSA_OpenSSL' undefined; assuming extern returning int
.\engines\e_capi.c(464) : warning C4047: '=' : 'const DSA_METHOD *' differs in levels of indirection from 'int'
.\engines\e_capi.c(465) : error C2224: left of '.dsa_do_verify' must have struct/union type
.\engines\e_capi.c(465) : error C2037: left of 'dsa_do_verify' specifies undefined struct/union 'dsa_method'
.\engines\e_capi.c(466) : error C2224: left of '.dsa_mod_exp' must have struct/union type
.\engines\e_capi.c(466) : error C2037: left of 'dsa_mod_exp' specifies undefined struct/union 'dsa_method'
.\engines\e_capi.c(467) : error C2224: left of '.bn_mod_exp' must have struct/union type
.\engines\e_capi.c(467) : error C2037: left of 'bn_mod_exp' specifies undefined struct/union 'dsa_method'
.\engines\e_capi.c(538) : warning C4133: 'function' : incompatible types - from 'int *' to 'const DSA_METHOD *'
.\engines\e_capi.c(700) : warning C4013: 'DSA_new_method' undefined; assuming extern returning int
.\engines\e_capi.c(700) : warning C4047: '=' : 'DSA *' differs in levels of indirection from 'int'
.\engines\e_capi.c(703) : error C2037: left of 'p' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(704) : error C2037: left of 'q' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(705) : error C2037: left of 'g' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(706) : error C2037: left of 'pub_key' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(707) : error C2037: left of 'p' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(707) : error C2037: left of 'q' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(707) : error C2037: left of 'g' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(707) : error C2037: left of 'pub_key' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(709) : error C2037: left of 'p' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(709) : warning C4133: 'function' : incompatible types - from 'unsigned char *' to 'BIGNUM *'
.\engines\e_capi.c(709) : warning C4047: 'function' : 'unsigned char *' differs in levels of indirection from 'DWORD'
.\engines\e_capi.c(709) : warning C4024: 'lend_tobn' : different types for formal and actual parameter 2
.\engines\e_capi.c(709) : error C2198: 'lend_tobn' : too few arguments for call
.\engines\e_capi.c(712) : error C2037: left of 'q' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(712) : warning C4133: 'function' : incompatible types - from 'unsigned char *' to 'BIGNUM *'
.\engines\e_capi.c(712) : warning C4047: 'function' : 'unsigned char *' differs in levels of indirection from 'int'
.\engines\e_capi.c(712) : warning C4024: 'lend_tobn' : different types for formal and actual parameter 2
.\engines\e_capi.c(712) : error C2198: 'lend_tobn' : too few arguments for call
.\engines\e_capi.c(715) : error C2037: left of 'g' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(715) : warning C4133: 'function' : incompatible types - from 'unsigned char *' to 'BIGNUM *'
.\engines\e_capi.c(715) : warning C4047: 'function' : 'unsigned char *' differs in levels of indirection from 'DWORD'
.\engines\e_capi.c(715) : warning C4024: 'lend_tobn' : different types for formal and actual parameter 2
.\engines\e_capi.c(715) : error C2198: 'lend_tobn' : too few arguments for call
.\engines\e_capi.c(718) : error C2037: left of 'pub_key' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(718) : warning C4133: 'function' : incompatible types - from 'unsigned char *' to 'BIGNUM *'
.\engines\e_capi.c(718) : warning C4047: 'function' : 'unsigned char *' differs in levels of indirection from 'DWORD'
.\engines\e_capi.c(718) : warning C4024: 'lend_tobn' : different types for formal and actual parameter 2
.\engines\e_capi.c(718) : error C2198: 'lend_tobn' : too few arguments for call
.\engines\e_capi.c(722) : warning C4013: 'DSA_set_ex_data' undefined; assuming extern returning int
.\engines\e_capi.c(727) : warning C4013: 'EVP_PKEY_assign_DSA' undefined; assuming extern returning int
.\engines\e_capi.c(748) : warning C4013: 'DSA_free' undefined; assuming extern returning int
.\engines\e_capi.c(952) : error C2143: syntax error : missing '{' before '*'
.\engines\e_capi.c(957) : error C2065: 'DSA_SIG' : undeclared identifier
.\engines\e_capi.c(957) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(957) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'
.\engines\e_capi.c(957) : error C2106: '=' : left operand must be l-value
.\engines\e_capi.c(958) : error C2275: 'CAPI_KEY' : illegal use of this type as an expression
        .\engines\e_capi.c(124) : see declaration of 'CAPI_KEY'
.\engines\e_capi.c(958) : error C2065: 'capi_key' : undeclared identifier
.\engines\e_capi.c(959) : error C2275: 'CAPI_CTX' : illegal use of this type as an expression
        .\engines\e_capi.c(123) : see declaration of 'CAPI_CTX'
.\engines\e_capi.c(959) : error C2065: 'ctx' : undeclared identifier
.\engines\e_capi.c(960) : error C2143: syntax error : missing ';' before 'type'
.\engines\e_capi.c(962) : error C2065: 'ctx' : undeclared identifier
.\engines\e_capi.c(962) : error C2037: left of 'engine' specifies undefined struct/union 'dsa_st'
.\engines\e_capi.c(962) : warning C4047: 'function' : 'const ENGINE *' differs in levels of indirection from 'int'
.\engines\e_capi.c(962) : warning C4024: 'ENGINE_get_ex_data' : different types for formal and actual parameter 1
.\engines\e_capi.c(962) : error C2198: 'ENGINE_get_ex_data' : too few arguments for call
.\engines\e_capi.c(962) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'
.\engines\e_capi.c(964) : error C2065: 'ctx' : undeclared identifier
.\engines\e_capi.c(964) : warning C4047: 'function' : 'CAPI_CTX *' differs in levels of indirection from 'int'
.\engines\e_capi.c(964) : warning C4024: 'CAPI_trace' : different types for formal and actual parameter 1
.\engines\e_capi.c(966) : error C2065: 'capi_key' : undeclared identifier
.\engines\e_capi.c(966) : warning C4013: 'DSA_get_ex_data' undefined; assuming extern returning int
.\engines\e_capi.c(968) : error C2065: 'capi_key' : undeclared identifier
.\engines\e_capi.c(981) : error C2065: 'capi_key' : undeclared identifier
.\engines\e_capi.c(981) : error C2223: left of '->hprov' must point to struct/union
.\engines\e_capi.c(981) : warning C4047: 'function' : 'DWORD' differs in levels of indirection from 'HCRYPTHASH *'
.\engines\e_capi.c(981) : warning C4024: 'CryptCreateHash' : different types for formal and actual parameter 4
.\engines\e_capi.c(981) : error C2198: 'CryptCreateHash' : too few arguments for call
.\engines\e_capi.c(998) : error C2065: 'csigbuf' : undeclared identifier
.\engines\e_capi.c(999) : error C2065: 'capi_key' : undeclared identifier
.\engines\e_capi.c(999) : error C2223: left of '->keyspec' must point to struct/union
.\engines\e_capi.c(999) : warning C4047: 'function' : 'DWORD' differs in levels of indirection from 'void *'
.\engines\e_capi.c(999) : warning C4024: 'CryptSignHashA' : different types for formal and actual parameter 2
.\engines\e_capi.c(999) : error C2065: 'csigbuf' : undeclared identifier
.\engines\e_capi.c(999) : warning C4133: 'function' : incompatible types - from 'DWORD *' to 'BYTE *'
.\engines\e_capi.c(999) : error C2198: 'CryptSignHashA' : too few arguments for call
.\engines\e_capi.c(1007) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1007) : warning C4013: 'DSA_SIG_new' undefined; assuming extern returning int
.\engines\e_capi.c(1008) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1010) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1010) : error C2223: left of '->r' must point to struct/union
.\engines\e_capi.c(1011) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1011) : error C2223: left of '->s' must point to struct/union
.\engines\e_capi.c(1012) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1012) : error C2223: left of '->r' must point to struct/union
.\engines\e_capi.c(1012) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1012) : error C2223: left of '->s' must point to struct/union
.\engines\e_capi.c(1014) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1014) : error C2223: left of '->r' must point to struct/union
.\engines\e_capi.c(1014) : error C2065: 'csigbuf' : undeclared identifier
.\engines\e_capi.c(1014) : warning C4047: 'function' : 'BIGNUM *' differs in levels of indirection from 'int'
.\engines\e_capi.c(1014) : warning C4024: 'lend_tobn' : different types for formal and actual parameter 1
.\engines\e_capi.c(1014) : warning C4047: 'function' : 'unsigned char *' differs in levels of indirection from 'int'
.\engines\e_capi.c(1014) : warning C4024: 'lend_tobn' : different types for formal and actual parameter 2
.\engines\e_capi.c(1014) : error C2198: 'lend_tobn' : too few arguments for call
.\engines\e_capi.c(1015) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1015) : error C2223: left of '->s' must point to struct/union
.\engines\e_capi.c(1015) : error C2065: 'csigbuf' : undeclared identifier
.\engines\e_capi.c(1015) : warning C4047: 'function' : 'BIGNUM *' differs in levels of indirection from 'int'
.\engines\e_capi.c(1015) : warning C4024: 'lend_tobn' : different types for formal and actual parameter 1
.\engines\e_capi.c(1015) : warning C4047: 'function' : 'unsigned char *' differs in levels of indirection from 'int'
.\engines\e_capi.c(1015) : warning C4024: 'lend_tobn' : different types for formal and actual parameter 2
.\engines\e_capi.c(1015) : error C2198: 'lend_tobn' : too few arguments for call
.\engines\e_capi.c(1017) : warning C4013: 'DSA_SIG_free' undefined; assuming extern returning int
.\engines\e_capi.c(1017) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1018) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1018) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'
.\engines\e_capi.c(1026) : error C2065: 'csigbuf' : undeclared identifier
.\engines\e_capi.c(1026) : warning C4022: 'OPENSSL_cleanse' : pointer mismatch for actual parameter 1
.\engines\e_capi.c(1028) : error C2065: 'ret' : undeclared identifier
.\engines\e_capi.c(1028) : warning C4047: 'return' : 'int *' differs in levels of indirection from 'int'
.\engines\e_capi.c(1034) : warning C4047: '=' : 'CAPI_KEY *' differs in levels of indirection from 'int' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:06:27.710

我遇到了同样的问题。调查的时候发现openssl文件夹里面其实有两个include目录：include和inc32。“include”文件夹中的文件不是有效的 C/C++ 头文件，但由于某种原因，您的编译器使用此包含目录而不是 inc32（在我的情况下，罪魁祸首是我使用的其他人的自定义批处理脚本）。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T11:51:25.140

```
init_xp.cmd
call "%VS140COMNTOOLS%\..\..\VC\bin\vcvars32.bat"

set __OPENSSL_VER__=102l
perl Configure VC-WIN32 no-shared threads --prefix=C:\Dev\OpenSSL_%__OPENSSL_VER__%_vs2015_32_xp --openssldir=C:\Dev\OpenSSL_Config_%__OPENSSL_VER__%
if ERRORLEVEL 1 goto :ERROR
call ms\do_ms
call ms\do_nasm
nmake -f ms\nt.mak clean
nmake -f ms\nt.mak
nmake -f ms\nt.mak install 
```

它帮助了我：'call ms\do_ms'

# c - 带有套接字的 C 中的事件驱动模型

> ID：11062674
> 
> 赞同：23
> 
> 时间：2012-06-16T10:32:38.433
> 
> 标签：c, linux, unix, operating-system, event-driven

我对 C 中的事件驱动编程非常感兴趣，尤其是套接字，所以我将花一些时间进行研究。

假设我想构建一个包含大量文件和网络 I/O 的程序，比如客户端/服务器应用程序，基本上，第一个问题是这个模型背后的理念是什么。虽然在正常编程中我会产生新的进程，但一个进程实际上可以服务于许多其他请求。例如，有一些网络服务器可以在不创建线程或其他进程的情况下处理连接，只需一个主进程。

我知道这很复杂，但很高兴知道不同的解决方案是如何工作的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-16T12:26:36.863

您绝对必须阅读以下内容：http: [//www.kegel.com/c10k.html](http://www.kegel.com/c10k.html)。该页面是事件驱动和异步技术的完美概述。

然而，一个**快速而肮脏的答案**：事件驱动既不是非阻塞的，也不是异步的。

事件驱动意味着，该进程将监视其文件描述符（和套接字），并且仅在某些描述符上发生某些事件时才采取行动（事件是：接收到的数据，错误，变得可写，...）。

BSD 套接字具有“select()”函数。调用时，操作系统将监视描述符，并在其中一个描述符上发生某些事件时立即返回进程。

但是，上面的网站有更好的描述（以及有关不同 API 的详细信息）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-12T21:04:22.323

“这个模型背后的哲学是什么”

事件驱动意味着没有“监控”，而是事件本身启动动作。

通常这是由中断启动的，中断是来自外部设备的系统信号，或者（在软件中断的情况下）异步过程。

[https://en.wikipedia.org/wiki/Interrupt](https://en.wikipedia.org/wiki/Interrupt)

进一步阅读似乎在这里：

[https://docs.oracle.com/cd/E19455-01/806-1017/6jab5di2m/index.html#sockets-40](https://docs.oracle.com/cd/E19455-01/806-1017/6jab5di2m/index.html#sockets-40) - “中断驱动的套接字 I/O”

[http://cs.baylor.edu/~donahoo/practical/CSockets/textcode.html](http://cs.baylor.edu/~donahoo/practical/CSockets/textcode.html)也有一些中断驱动套接字的示例，以及其他套接字编程示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T12:30:10.157

事件驱动编程基于事件循环。循环只是等待一个新事件，调度代码来处理该事件，然后循环回来等待下一个事件。在套接字的情况下，您正在谈论“异步网络编程”。这涉及[select](https://en.wikipedia.org/wiki/Select_%28Unix%29) () 或其他一些选项，如[Kqueue](https://en.wikipedia.org/wiki/Kqueue) () 来等待事件循环中的事件。套接字需要设置为*非阻塞*，这样当您 read() 或 write() 时，您的代码就不会等待 I/O 完成。

异步网络编程可能非常复杂，而且很难正确处理。[在这里](http://www.nightmare.com/medusa/async_sockets.html)和[这里](http://www.wangafu.net/~nickm/libevent-book/01_intro.html)查看一些介绍。我强烈建议使用[libevent](http://libevent.org/)或[liboop 之](http://git.lysator.liu.se/liboop)类的库来解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T10:13:36.660

这种 TCP 服务器/客户端可以通过使用`select(2)`调用和非阻塞套接字来实现。

使用非阻塞套接字比使用阻塞套接字更棘手。

例子：

`connect``EINPROGRESS`调用通常立即返回 -1 并在使用非阻塞套接字时设置 errno 。在这种情况下，您应该`select`在连接打开或失败时使用等待。`connect`也可能返回 0。如果您创建到本地主机的连接，就会发生这种情况。这样，您可以在一个套接字打开 TCP 连接时为其他套接字提供服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T11:13:08.993

它实际上是非常特定于平台的，它是如何工作的。

如果您在 linux 系统上运行，这真的不难，您只需要使用“fork”生成进程的副本，如下所示即可：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <netinet.h>
#include <signal.h>
#include <unistd.h>

int main()
{
  int server_sockfd, client_sockfd;
  int server_len, client_len;
  struct sockaddr_in server_address;
  struct sockaddr_in client_address;

  server_sockfd = socket(AF_INET, SOCK_STREAM, 0);

  server_address.sin_family = AF_INET;
  server_address.sin_addr.s_addr = htonl(INADDR_ANY);
  server_Address.sin_port = htons(1234);
  server_len = sizeof(server_address);
  bind(server_sockfd, (struct sockaddr *)&server_address, server_len);

  listen(server_sockfd, 5);

  signal(SIGCHLD, SIG_IGN);

  while(1)
  {
    char ch;
    printf("Server Waiting\n");
    client_len = sizeof(client_address);
    client_sockfd = accept(server_sockfd, (struct sockaddr *)&client_address, &client_len)

    // Here's where we do the forking, if you've forked already then this will be the child running, if not then your still the parent task.

    if(fork() == 0)
    {
      // Do what ever the child needs to do with the connected client
      read(client_sockfd, &ch, 1);
      sleep(5); // just for show :-)
      ch++;
      write(client_sockfd, &ch, 1);
      close(client_sockfd);
      exit(0);
    }
    else
    {
      // Parent code here, close and loop for next connection
      close(client_sockfd);
    }
  }
} 
```

您可能不得不稍微摆弄一下该代码我现在不在Linux机器附近进行测试编译，而且我几乎是从内存中输入的。

然而，使用 fork 是在基于 Linux / Unix 的系统下用 C 语言执行此操作的标准方法。

在 Windows 下，这是一个非常不同的故事，我不太记得所有需要的代码（这些天我已经习惯用 C# 编码了）但是设置套接字几乎是一样的，除了你需要使用'Winsock' API 以获得更好的兼容性。

您仍然可以（无论如何我相信）在 windows 下使用标准的 berkley 插座，但它充满了陷阱和漏洞，对于 windows winsock，这是一个很好的起点：

[http://tangentsoft.net/wskfaq/](http://tangentsoft.net/wskfaq/)

据我所知，如果您使用 Winsock 它有一些东西可以帮助生成和多客户端，但是就我个人而言，我通常只是分离一个单独的线程并将套接字连接复制到该线程，然后返回循环监听我的服务器。

# android - 从具有许多子句的表中选择数据 where

> ID：11062676
> 
> 赞同：0
> 
> 时间：2012-06-16T10:32:42.040
> 
> 标签：android, database, sqlite

我尝试从具有许多条件子句的数据库表中选择数据，其中我的代码看起来像这样

```
Cursor cursor = sqliteDatabase.rawQuery("SELECT "+  
                AndroidOpenDbHelper.COLUMN_NAME_FILE_NAME+" FROM " + 
                AndroidOpenDbHelper.TABLE_FILE + " where "+ 
                AndroidOpenDbHelper.COLUMN_NAME_FILE_CATEGORY+" = "+ category+","+
                AndroidOpenDbHelper.COLLUMN_NAME_FILE_THEME+" = "+theme+","+ 
                AndroidOpenDbHelper.COLLUMN_NAME_FILE_DATE_CREATING+"="+date); 
```

我知道这是代码不正确，我该如何更正

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:39:56.093

使用一个 WHERE 并将条件与 AND 结合

... 其中 a=5 AND b=7 AND c='Ivan'

# java - 如何优化android代码

> ID：11062677
> 
> 赞同：2
> 
> 时间：2012-06-16T10:32:53.887
> 
> 标签：java, android, coding-style, standards

```
public String getBrotherHood() throws Exception{        
    client = new DefaultHttpClient();
    get = new HttpGet(uri);
    res = client.execute(get);
    sl = res.getStatusLine();
    sCode = sl.getStatusCode();
    if(sCode==200)
    {
        try{
            reader = new BufferedReader(new InputStreamReader(res.getEntity().getContent()));
            readBuffer = new StringBuffer();
            while((nl = reader.readLine())!=null){
                readBuffer.append(nl);
            }
            reader.close();
        }finally{
            if(reader !=null)
            {
                try{
                    reader.close();
                }catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }
            }
        }
    }
    return readBuffer.toString();       
  }
} 
```

我有这段代码，这是正确的编写方式，还是我需要遵循任何编码模式或标准？

请给我一些建议，因为我不是 Android Coding。

**更新：**

```
public class JSONData {

public ArrayList<String> getBrotherHoodJSON() throws JSONException,IOException,Exception{
    ArrayList<String> item = new ArrayList<String>();
    JSONArray jA = new JSONArray(getBrotherHood());

    for(int i=0; i<jA.length(); i++)
    {
        JSONObject jO = jA.getJSONObject(i);
        String n = jO.getString("name");
        item.add(n);
        Log.i("JsonData:",jO.getString("name"));
    }

    return item;
}   

public String getBrotherHood() throws Exception{    
    BufferedReader in = null;
    String data= null;
    HttpClient client = new DefaultHttpClient();
    URI uri = new URI("http://fahidmohammad.in/demo/Android/api.php?user=fah");
    HttpGet get = new HttpGet();
    get.setURI(uri);
    HttpResponse res = client.execute(get);
    StatusLine sl = res.getStatusLine();
    int sCode = sl.getStatusCode();
    if(sCode==200)
    {
        try{
            in = new BufferedReader(new InputStreamReader(res.getEntity().getContent()));
            StringBuffer sb = new StringBuffer();
            String nl;
            while((nl = in.readLine())!=null){
                sb.append(nl);
            }
            in.close();
            data = sb.toString();
            Log.i("Raw Data:",data);
            return data;
        }finally{
            if(in !=null)
            {
                try{
                    in.close();
                    return data;
                }catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }
            }
        }
    }
    return data;        
} 
```

这是相同代码的更新版本。处理了所有提到的问题。

而且它的工作就像一个魅力，但不知道它的稳定性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:46:56.637

您显然已经在您的方法之外声明了所有变量，即使它们似乎只在此方法中使用。这是没有意义的。它可以防止多个对象被垃圾收集。您最好将声明移到方法中。

而且声明`throws Exception`也没有多大意义。最好是声明一个可能发生的特定异常，或者将所有不太可能的异常转换为`RuntimeException`不需要声明它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:40:50.617

有一个默认的代码格式化程序可用 eclipse。编写代码后，只需键入**"Control + Shift + F"**。您的 android 代码将自动格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T11:08:19.523

更重要的一点是重新升级 readBuffer 变量

在函数的最后一个返回 readBuffer.toString() 并且仅当状态为 200 时才对其进行初始化。但如果状态不是 200，那么它将为空（假设声明不可见），因此 null.toString() 将思想异常。

# php - 添加第二个 php sql 查询以对来自两个不同表的结果进行排序

> ID：11062679
> 
> 赞同：0
> 
> 时间：2012-06-16T10:34:33.210
> 
> 标签：php, sql

我已经在互联网上搜索过，但由于我是 php 的初学者，我已经解决了一些问题。我有一个脚本，可以按级别和点数对一些游戏服务器角色进行排序。按级别订购很容易。

数据库是：`cDtb`
包含`Level`字段的表名是`Character`。

现在，我想在同一个脚本中使用第二个查询，它将在`Points`字段之后排序，并且调用表名`Reward`。我试图像第一个查询一样添加第二个查询，但它没有显示任何结果。

最终结果应按递减值排序并使用两个表中的结果`Character`和`Reward`，从 Points 开始，然后是 Level

说...用户名 Test1 和 Tes2 获得相同的级别 100 但 Test1 获得 30Points 和 Test2 35Points 在这种情况下，排名将是 Test2, Test1

有人可以帮助我了解如何添加第二个查询以及按点和级别排序的外观吗？

先谢谢了，下面是脚本

```
 <tr>
    <td><div align="center">Level</div></td>
    <td><div align="center">Points</div></td>
    </tr>

    <tr>                    

    <?
    $query=mssql_query("select TOP 15 * from cDtb.dbo.Character order by Level desc");
//---------- second query ??? --------------
    while($row=mssql_fetch_assoc($query)){
    $levelz=$row['Level'];
    $pointz=$row['Points'];

    ?>

    <td style="color: rgb(196, 37, 0); font-weight: bold;">
    <div align="center">
    <td><?=$levelz;?></td>
    <td><?=$pointz;?></td> 
    </div></td>

    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:56:01.350

您可以按相同结果集中的第二个字段排序，如下所示：

```
select TOP 15 * from cDtb.dbo.Character order by Level desc, Points desc; 
```

希望这可以帮助！

# javascript - 谷歌图表 - 获取行的颜色

> ID：11062680
> 
> 赞同：4
> 
> 时间：2012-06-16T10:34:42.870
> 
> 标签：javascript, charts, pie-chart, google-visualization

我有一个包含很多元素的饼图。我已经将颜色选择留给了谷歌图表，但是在绘制图表之后，我需要检索每一行的颜色。

我知道我可以生成颜色数组，并将其设置在图表选项中，这将解决我的问题，我将能够从那里检索颜色。但我真的不想手动创建那个大数组。

那么有没有办法获得给定行的颜色？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:43:07.620

我对谷歌饼图不熟悉，但我有一个基本的 JavaScript 建议给你。也许这有帮助。如果你有一个画布图像，你可以使用 JavaScript 像素拾取方法，如下所示：

```
//get the image
var sampleImage = document.getElementById("checkimg");
//convert the image to canvas
function convertImageToCanvas(image) {
    var canvas = document.createElement("canvas");
    canvas.width = image.width;
    canvas.height = image.height;
    canvas.getContext("2d").drawImage(image, 0, 0);
    return canvas;
}
var canvas = convertImageToCanvas(sampleImage);
sampleImage.style.display = 'none';
//real position functions
function absleft(el) {
    return (el.offsetParent) ? el.offsetLeft+absleft(el.offsetParent) : el.offsetLeft;
}
function abstop(el) {
    return (el.offsetParent) ? el.offsetTop+abstop(el.offsetParent) : el.offsetTop;
}
canvas.onclick = function(event) {
    //get real position
    if (event.hasOwnProperty('offsetX')) {
        var x = event.offsetX;
        var y = event.offsetY;
    }
    else {
        var x = event.layerX - absleft(canvas);
        var y = event.layerY - abstop(canvas);
    }
    //get the pixel data
    var pixelData = this.getContext('2d').getImageData(x, y, 1, 1).data;
}
document.getElementById("temp").appendChild(canvas); 
```

# width - 框架不符合设定尺寸

> ID：11062684
> 
> 赞同：1
> 
> 时间：2012-06-16T10:35:35.193
> 
> 标签：width, frame, frameset

只是做一个小的 PHP 任务，我在其中使用框架来分隔用户界面。

框架本身工作正常，但是我定义为 150,700,200 的三列似乎不遵守设定的尺寸，而是选择占据整个屏幕的一部分。

有人有什么建议吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="CSS/QBStyle.css" type="text/css" />
<title>Quality Books</title>
</head>
<frameset rows="180,*", frameborder="no", framespacing="0">
    <frame src="Frames/Header.php" />
    <frameset cols="150,700,200", frameborder="no", framespacing="0">
        <frame src="Frames/Navigation.php"/>
        <frame src="Introduction.php" name="contentframe"/>
        <frame name="sidebar"/>
    </frameset>
</frameset>
</html> 
```

# xml - XSD 中的条件

> ID：11062685
> 
> 赞同：0
> 
> 时间：2012-06-16T10:35:41.027
> 
> 标签：xml, xsd

我的 XSD 文件中有两个元素：

```
<element name="accountnumber" type="" />
<element name="accounttype" type="" /> 
```

有两种类型的账户：1）储蓄 2）活期

储蓄账户类型和活期账户类型的帐号格式应该不同。

如何在 XSD 中实现这一点？是否可以在 XSD 中编写 ifs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:29:22.053

如果`<SavingsAccount>`和`<CurrentAccount>`是不同的元素名称，则它们可以具有不同的类型，并且两种类型都可以包含一个`<AccountNumber>`元素，并且它们可以具有不同的类型-只需确保在每种情况下 AccountNumber 都是本地元素声明而不是对全局元素的引用宣言。

如果您通过属性区分帐户类型，则该解决方案不起作用，例如`<account type="current">`and `<account type="savings">`。在这种情况下，您将需要使用称为条件类型分配的 XSD 1.1 功能，其中元素的类型可能取决于其属性的值。XSD 1.1 目前在 Xerces 和 Saxon 中实现。

# php - 从 url 问题中获取文件

> ID：11062689
> 
> 赞同：0
> 
> 时间：2012-06-16T10:36:31.090
> 
> 标签：php, file

我想使用 (file_put_contents) 函数从 url 获取文件，但我不能，我得到错误（找不到文件），但我确信 100% 文件的路径是正确的，因为当我点击下载文件的链接时在同一个站点它可以工作，但是当我想抓住它时它说找不到。

看到这条路

[http://bramegm.com/software/files/soft53/ElaSalaty.exe](http://bramegm.com/software/files/soft53/ElaSalaty.exe)

当您尝试抓取它或尝试使用（像 wget 这样的 linux 命令）时，您会发现该文件未找到，但请查看文件页面

[http://www.bramegm.com/software/download/elasalaty/%D8%AA%D8%AD%D9%85%D9%8A%D9%84-%D8%A7%D9%84%D9%89- %D8%B5%D9%84%D8%A7%D8%AA%D9%8A](http://www.bramegm.com/software/download/elasalaty/%D8%AA%D8%AD%D9%85%D9%8A%D9%84-%D8%A7%D9%84%D9%89-%D8%B5%D9%84%D8%A7%D8%AA%D9%8A)

转到底部，您将看到相同的文件路径单击它，它将被下载。

无需进入网站即可获取此文件的任何帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:47:21.117

您正在尝试从中下载文件，`http://bramegm.com/software/files/soft53/ElaSalaty.exe`但在给定的 URL 中，我看到实际链接是`http://www.bramegm.com/software/files/soft54/ElaSalaty.exe`. 请注意**soft53**和**soft54**的区别。

# iphone - 如何在csv文件中添加元素每个元素都应该插入该行的新列中..在目标c中

> ID：11062692
> 
> 赞同：-2
> 
> 时间：2012-06-16T10:37:09.103
> 
> 标签：iphone, objective-c

```
//NSString *csvString = @"S.No,Task,Date,Time";
//NSArray *csvArray=[csvString componentsSeparatedByString:@","];
// Create .csv file and save in Documents Directory. 
```

NSArray *csvArray =[[NSArray alloc]initWithObjects:@"SNo",@"Task",@"Date",@"Time",nil]; //创建 NSFileManager 实例 // NSFileManager *fileManager = [NSFileManager defaultManager];

```
//create an array and store result of our search for the documents directory in it
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

//create NSString object, that holds our exact path to the documents directory
NSString *documentsDirectory = [paths objectAtIndex:0];
NSLog(@"Document Dir: %@",documentsDirectory);

NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.csv", @"userdata"]]; //add our file to the path 
```

// [fileManager createFileAtPath:fullPath contents:[csvString dataUsingEncoding:NSUTF8StringEncoding] attributes:nil]; //最后保存路径（文件）

```
CHCSVWriter * csvWriter = [[CHCSVWriter alloc] initWithCSVFile:fullPath atomic:NO];
NSInteger numberOfColumns = 4;
for (NSInteger currentIndex = 0; currentIndex < [csvArray count]; currentIndex++) {
    id field = [csvArray objectAtIndex:currentIndex];
    [csvWriter writeField:field];
    if ((currentIndex % numberOfColumns) == (numberOfColumns - 1)) {
        [csvWriter writeLine];
    }
}
[csvWriter release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:01:13.990

CSV 文件基本上用于备份 iphone 联系人，它是一个 Excel 文件，为什么要制作 CSV 文件，如果需要，那么您必须根据您的 CSV 制作一个数组，为此您必须学习....这里是在 CSV 文件中写入文本并将其保存到文档目录中的代码....

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [path objectAtIndex:0];
NSString *FileName = [NSString stringWithFormat:@"%@/File.csv", documentsDirectory];
NSString *Content = [[NSString alloc] initWithFormat:@"%@", stringForCsv];
//stringForCsv is your string which you want to write in file.
[Content writeToFile:FileName atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil]; 
```

谢谢你！

# javascript - 单击图像时交换多个图像

> ID：11062693
> 
> 赞同：0
> 
> 时间：2012-06-16T10:37:44.367
> 
> 标签：javascript, jquery, html

我正在尝试对图像进行多图像交换。我想要实现的是，

我在页面上有 6 个图像，如果单击图像 #1，它会切换到不同的图像，与图像 #2、#3、#4、#5、#6 相同，如果单击图像，则所有 6 个图像都会更改.

当光标在图像上滚动时，它会变为单击时该图像将变为相同的图像，其他图像此时不会更改，只有单击时所有图像都会更改。

帮助将不胜感激。

# multithreading - pthread_cond_wait 在等待时自动原子地解锁互斥锁

> ID：11062701
> 
> 赞同：2
> 
> 时间：2012-06-16T10:40:10.230
> 
> 标签：multithreading, pthreads, condition-variable

从这里开始：[https ://computing.llnl.gov/tutorials/pthreads/#ConVarSignal](https://computing.llnl.gov/tutorials/pthreads/#ConVarSignal)

> 请注意，pthread_cond_wait 例程将在等待时自动且原子地解锁互斥锁。

以下子代码来自同一链接（由我格式化）：

```
pthread_mutex_lock(&count_mutex);

  while (count<COUNT_LIMIT) 
  {
      pthread_cond_wait(&count_threshold_cv, &count_mutex);
      printf("watch_count(): thread %ld Condition signal received.\n", my_id);
      count += 125;
      printf("watch_count(): thread %ld count now = %d.\n", my_id, count);
  }

pthread_mutex_unlock(&count_mutex); 
```

问题：
当它说`pthread_cond_wait`在等待时会自动解锁互斥锁，**那么为什么我们必须在上面的代码末尾*显式*指定函数？`pthread_mutex_unlock`**

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T10:46:54.720

当`pthread_cond_wait`解除阻塞时，它再次持有锁。例如，假设您绕过循环两次，您会在互斥体上获得以下锁定/解锁序列：

```
lock

# Around loop twice:
    wait (unlock)
    awaken (holding lock)
    wait (unlock)
    awaken (holding lock)

# loop done, still holding lock

unlock 
```

如果您没有最后一次解锁，那么下次其他人想要获得锁时，您将陷入死锁。

# iphone - 编码为结构的 NSValue 数组

> ID：11062702
> 
> 赞同：2
> 
> 时间：2012-06-16T10:40:11.883
> 
> 标签：iphone, objective-c, ios, c, opengl-es

我试图将结构的多维数组编码为 NSValue。

这是结构：

```
typedef struct {
    float Position[3];
    float Color[4];
} Vertex;

const Vertex Vertices[] = {
    // Front
    {{1, -1, 0}, {1, 0, 0, 1}},
    {{1, 1, 0}, {1, 0, 0, 1}},
(etc...) 
```

我需要编码成 NSValue 以将其存储在对象“块”中。

这就是我要存储的内容：

```
Block *newBlock = [[Block alloc] init];
newBlock.blockVertices = [NSValue value:&Vertices withObjCType:@encode(Vertex)]; 
```

并将其取回：

```
Vertex tempVertices[24];
[newBlock.blockVertices getValue:&tempVertices]; 
```

一切似乎都很好，然后我尝试比较这样的值：

```
for (int i = 0; i < 24; i++){
    NSLog(@"%f = %f", Vertices[i].Position[0], tempVertices[i].Position[0]);
    NSLog(@"%f = %f", Vertices[i].Position[1], tempVertices[i].Position[1]);
    NSLog(@"%f = %f", Vertices[i].Position[2], tempVertices[i].Position[2]);
    NSLog(@" ");
} 
```

而且我得到了奇怪的结果，例如：-1.000000 = -1.998905

问题出在哪里？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:15:51.270

你需要知道`@encode`有多少`Vertex`结构被编码，例如：

```
[NSValue value:&Vertices withObjCType:@encode(Vertex[24])]; 
```

# ios - iOS - UITableViewCell 文本对齐

> ID：11062707
> 
> 赞同：7
> 
> 时间：2012-06-16T10:40:54.410
> 
> 标签：ios, uitableview, text-alignment

我添加了一个 tableView 并将一个表格视图单元格拖到其中。在实用程序面板中，我将样式更改为字幕。我也尝试在代码中更改它：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.textAlignment = UITextAlignmentCenter;
    cell.detailTextLabel.textAlignment = UITextAlignmentCenter;

    cell.textLabel.text = [myArray objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [myArray2 objectAtIndex:indexPath.row];

    return cell; 
```

中心对齐不起作用！

我已经尝试将标签对象添加到单元格中以获得解决方法。但我不知道如何访问它。即使我为它分配了一个插座，这也行不通：

```
cell.labelForCell.... 
```

我该怎么办？关于如何使其以通常的方式工作的任何建议，而无需在单元格中添加标签或其他内容？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-16T10:48:42.643

对于`UITableViewCellStyleSubtitle`无法更改文本对齐方式，您必须放置一个标签并为其添加对齐方式，为此您可以使用此代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UILabel *myLabel;
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        myLabel = [[UILabel alloc] initWithFrame:Your_Frame];
        //Add a tag to it in order to find it later
        myLabel.tag = 111;
        //Align it
        myLabel.textAlignment= UITextAlignmentCenter;

        [cell.contentView addSubview:myLabel];
    }

    myLabel = (UILabel*)[cell.contentView viewWithTag:111];
    //Add text to it
    myLabel.text = [myArray objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T21:53:30.350

字幕样式的问题在于它在布局时会执行 [self.textLabel sizeToFit]。当您在内容完美大小的容器中居中时，没有任何变化。

试试这个。在 UITableViewCell 的子类中，设置您的 textAlignment，并将其用作您的 layoutSubviews 代码：

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    {
        CGRect frame = self.textLabel.frame;
        frame.size.width = CGRectGetWidth(self.frame);
        frame.origin.x = 0.0;
        self.textLabel.frame = frame;
    }

    {
        CGRect frame = self.detailTextLabel.frame;
        frame.size.width = CGRectGetWidth(self.frame);
        frame.origin.x = 0.0;
        self.detailTextLabel.frame = frame;
    }
} 
```

这使得 textLabel 的框架全宽，从而使居中效果变得明显。

注意：由于这会覆盖 layoutSubviews，因此会经常调用它，因此会产生性能成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T14:55:41.643

我认为原因是：textLabel的宽度取决于文本长度，如果文本太长而无法在一条信号行中显示，并且您已经设置了换行模式并将行数设置为0，您将发现文本对齐会起作用。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     static NSString *identifier = @"identifier";
     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
    if (nil == cell)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:identifier] autorelease];
        cell.textLabel.textAlignment = UITextAlignmentLeft;
        cell.textLabel.textColor = [UIColor redColor];
        cell.detailTextLabel.textColor = [UIColor greenColor];
        cell.detailTextLabel.textAlignment = UITextAlignmentCenter;
        cell.textLabel.lineBreakMode = UILineBreakModeTailTruncation;
        cell.textLabel.numberOfLines = 0;
    }
    cell.textLabel.text = [NSString stringWithFormat:@"You can initialize a very long string for the textLabel, or you can set the font to be a large number to make sure that the text cann't be shown in a singal line totally:%d", indexPath.row];
    return cell; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-23T13:25:55.057

我认为调整框架会起作用。我有 UITableViewCellStyleValue2 的样式，但如果我在 textLabel 中有一个有点长的文本，它会在尾部被截断并且 textAlignment 在这里不起作用，所以想增加 textLabel 的宽度。

```
 -(void)layoutSubviews{
        [super layoutSubviews];

        if ([self.reuseIdentifier isEqualToString:@"FooterCell"]) {
            CGRect aTframe  = self.textLabel.frame;
            aTframe.size.width += 40;
            self.textLabel.frame = aTframe;

            CGRect adTframe  = self.detailTextLabel.frame;
            adTframe.origin.x += 70;
            self.detailTextLabel.frame = adTframe;        
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-19T14:55:40.073

无法 在 cellForRowAtIndexPath: 方法中更改*UITableViewCell中**textLabel*和*detailTextLabel*的框架。

 *如果您不想对您的单元进行子类化，您可以使用

```
performSelector:withObject:afterDelay: 
```

*在默认 layoutSubviews*之后更改几何图形的零延迟：

```
[self performSelector:@selector(alignText:) withObject:cell afterDelay:0.0]; 
```

[在此处](https://stackoverflow.com/a/24841582/2066428)查看详细信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-24T11:59:29.210

嗨，请添加以下内容而不是您的代码，

```
cell.textLabel.textAlignment = UITextAlignmentCenter;
cell.detailTextLabel.textAlignment = UITextAlignmentCenter; 
```

改成

```
cell.textLabel.textAlignment = NSTextAlignmentCenter;
cell.detailTextLabel.textAlignment = NSTextAlignmentCenter; 
```

它会正常工作。*

# jquery - 为特定操作显示加载 gif 的更好方法

> ID：11062723
> 
> 赞同：0
> 
> 时间：2012-06-16T10:44:04.017
> 
> 标签：jquery, popup, gif

我正在使用`ASP.NET/C#`。在我的一个页面中，我正在显示客户列表及其详细信息`ASP.NET Listview`。在每一行中，我都有一个`Linkbutton`将在 a 中显示该客户的信息`popup`。当前，当`ShowDetails`单击链接时，我正在显示 a `loading gif`，然后信息`popup`是显示。我`jquery delay()`用来延迟显示信息`popup`。

**显示弹出窗口的 Jquery 函数：**

```
function ShowCustomerInformationPopUp()
 {
    $('#AuthorizeCustomerLoadImg').show();
    $('#AuthorizeCustomerMask').delay(1200).show("slow");
    $('#AuthorizeCustomerShowCustInfo').delay(1200).show("slow");
 } 
```

我在使用的单击事件上调用此函数`Linkbutton`。`code behind`所以`ClientScriptManager.RegisterStartupScript`现在当用户单击时`Show Details` `Linkbutton`会`popup`延迟一点同时`loading gif`显示。所以我的问题是，`loading gif`通过延迟显示其他元素是否是显示的好方法。有吗这种方法的任何缺点。你们中的许多人如何表现`gif's`。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:08:56.343

我会谨慎使用加载 gif。这意味着我只会在我期望从已执行的过程回调时使用它。IE。例如 AJAX 请求。

`loading`由于您正在打开一个新窗口，所以当新的浏览器窗口已经有一个指示器 时，我不明白为什么要在打开器窗口上加载 gif 。

如果您确实想在弹出页面加载后准确地使 gif 消失，那么您的代码必须放置在针对打开器窗口的弹出窗口内。

编辑：

既然你声称它不是一个新窗口，那么一个很酷的方法是使用 a `fadeIn()`，你也可以使用它，`show()`但我认为如果你这样做，gif 甚至没有足够的时间显示.

无论如何，您将在回调中删除加载 gif，如下所示：

```
function ShowCustomerInformationPopUp()
 {
    $('#AuthorizeCustomerLoadImg').show();
    $('#AuthorizeCustomerMask').show(1200);

    $('#AuthorizeCustomerShowCustInfo').show(1200, function(){
        // this is the callback function when competed, remove the gif here
        $('#AuthorizeCustomerLoadImg').hide();
    });

 } 
```

不确定哪个`div`是嫌疑人，因此您可以将上述回调函数应用于您的任一`.show()`语句。

# javascript - 结合滚动提要推特风格

> ID：11062726
> 
> 赞同：0
> 
> 时间：2012-06-16T10:44:34.033
> 
> 标签：javascript, html, css

我正在尝试制作一个类似于 twitter 的系统，它可以缓慢地滚动信息然后重复。感谢本[教程](http://www.9lessons.info/2009/02/auto-scrolling-effect-with-javascript.html "使用 javascript 和 DHTML 的自动滚动效果。")，我把它记下来了（有点） 。我让它自己工作，我添加了我自己的内容，但是当我尝试将它添加到我的网页时，它需要我 ac*** 并将我的所有内容放在页面顶部。有什么建议么？

```
<div class="header">
    <h2><span>Resteruant Consulting</span></h2>
    <h1>Tasty Solutions</h1>
</div>

<div class="content">
                    <DIV align=center style="background:#fff">
                    <DIV id="tempholder"></DIV>

                    <SCRIPT language=JavaScript 
                    src="dhtmllib.js"></SCRIPT>

                    <SCRIPT language=JavaScript 
                    src="scroller.js"></SCRIPT>

                    <SCRIPT language=JavaScript 
                    src="mydata.js"></SCRIPT>

                    <SCRIPT language=JavaScript>
  //SET SCROLLER APPEARANCE AND MESSAGES
  function runmikescroll() {

  var layer;
  var mikex, mikey;

  // Locate placeholder layer so we can use it to position the scrollers.

  layer = getLayer("placeholder");
  mikex = getPageLeft(layer);
  mikey = getPageTop(layer);

 // Create the first scroller and position it.

 myScroller1.create();
 myScroller1.hide();
 myScroller1.moveTo(mikex, mikey);
 myScroller1.setzIndex(200);
 myScroller1.show();
 }

 window.onload=runmikescroll
                    </SCRIPT>

 <center><DIV id='placeholder'></DIV></div></DIV></center> 
    </div> 
```

我在同一目录中拥有所有其他 javascript。我在我的网络浏览器中启用了 javascript，当我将它合并到我的 index.html 中时，它就可以正常工作了。

![这是它的样子。](../Images/5ca16bec5a90d201def132444dd70b81.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:17:17.693

每个标题都有一个“位置：绝对”，也许如果你把这些标题放在一个 div 中

```
position:relative; 
```

所以头条新闻至少会留在那个div中。

如果我错了请原谅我，如果我是对的，请告诉我。

# css - div内的中心选择下拉菜单

> ID：11062727
> 
> 赞同：10
> 
> 时间：2012-06-16T10:45:08.447
> 
> 标签：css, drop-down-menu

我正在努力将选择下拉菜单置于 div 的中心。我已经尝试了两个 margin: auto; 和文本对齐：居中；无济于事

这是我的小提琴[http://jsfiddle.net/U8Kja/](http://jsfiddle.net/U8Kja/)

任何人都可以解决这个问题吗？我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-09-17T19:53:18.310

将此添加到小提琴的底部。

```
select {
display: block;
margin: 0 auto;
} 
```

右侧和左侧的边距 auto 将使块元素在父 div 中居中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-16T10:47:34.293

你已经设置`text-align:centre`

它应该是`text-align:center`

[检查演示](http://jsfiddle.net/U8Kja/5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T10:47:06.063

你应该使用

```
text-align: center 
```

错误在 text-align: **center**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-20T21:34:59.477

尝试这个

```
text-align-last: center 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-04T15:00:39.730

尝试这个：

```
.center {
    text-align: center;
    /*These options are for the div to be visible in the example, the important is the first*/
    border:1px solid black;
    width: auto;
    height: 50px;
}

.cmb {
    display: block;
    margin: 0 auto;
}
```

```
<div class="center">
  <select class="cmb">
    <option value=1>Option 1</option>
    <option value=2>Option 2</option>
    <option value=3>Option 3</option>
  </select>
<div>
```

# python - qmtest 未在 CENTOS 上运行。在 Mac OS x 上构建

> ID：11062730
> 
> 赞同：0
> 
> 时间：2012-06-16T10:45:28.903
> 
> 标签：python, linux, frameworks, centos

我为 Mac OS X 下载了 qmtest，并在 MAC OS-X m/c 上构建并安装它，然后将相关的站点包/二进制文件复制到 CENT-OS m/c 中，以便我可以从 cENT-os m 运行 qmtest /C。

但是我得到了一个错误。

```
Traceback (most recent call last):
  File "/usr/bin/qmtest", line 74, in <module>
    import qm.test.cmdline
  File "/data/build/spike/python/install/lib/python2.7/site-packages/qm/test/cmdline.py", line 20, in <module>
    import base
  File "/data/build/spike/python/install/lib/python2.7/site-packages/qm/test/base.py", line 483, in <module>
    import qm.host
  File "/data/build/spike/python/install/lib/python2.7/site-packages/qm/host.py", line 18, in <module>
    from   qm.executable import RedirectedExecutable
  File "/data/build/spike/python/install/lib/python2.7/site-packages/qm/executable.py", line 41, in <module>
    import qm.sigmask
ImportError: /data/build/spike/python/install/lib/python2.7/site-packages/qm/sigmask.so: invalid ELF header 
```

由于我要运行 qmtest 的 m/c 是 CENTOS 类型，所以我怎样才能删除这个错误，或者我在哪里可以获得 centos m/c 的 QMTEST 版本，以便我可以在那里复制相关文件，然后工作出来。

qmtest 在 MacOS X m/c 上完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:49:27.050

您应该获取 QMTest 的源代码并在 CentOS 本身上构建它。

CentOS 和 Mac 不是二进制兼容的。

# sql-server - 如何在 ASP.net 的 SQL Server 数据库中设置角色/成员对象？

> ID：11062731
> 
> 赞同：1
> 
> 时间：2012-06-16T10:45:39.837
> 
> 标签：sql-server, asp.net-membership

我通常使用命令创建角色/成员数据库：

```
aspnet_regsql.exe -S (local) -E -A all 
```

但我目前的网络托管公司只允许使用 phpMyLittleadmin 创建数据库。

如何手动为 asp.net 角色/成员创建数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:49:21.533

在您的`aspnet_regsql`实用程序所在的目录中（取决于您使用的 .NET 框架版本 - 可能类似于`C:\Windows\Microsoft.NET\Framework\v4.0.30319`），有一个`Install*.sql`脚本文件列表，这些文件将为 ASP.NET 成员资格和角色系统创建必要的表。

```
InstallCommon.sql
InstallMembership.sql
InstallPersistSqlState.sql
InstallPersonalization.sql
InstallProfile.SQL
InstallRoles.sql
InstallSqlState.sql
InstallSqlStateTemplate.sql
InstallWebEventSqlProvider.sql 
```

所以基本上你只需要弄清楚你到底需要哪些脚本文件，以及在哪个序列中运行它们 - 然后只需将这些（或上传）发送到你的站点，然后在那里执行。

还有用于从数据库中卸载表和其他数据库对象的相同文件（称为`Uninstall*.sql`）。

# javascript - 如何为动态表添加标题

> ID：11062735
> 
> 赞同：1
> 
> 时间：2012-06-16T10:46:30.367
> 
> 标签：javascript, jquery, html, jquery-ui

大家好，我正在绘制动态表，我想为表添加表头如何将表头添加到动态表这里是我的表代码：

```
$.get('http://myDomain.com/RIA/topIndiaDetails.asp', function(data)
{    
    console.log("####"+data);

    var up = new Image();
    var down = new Image();

    up.src = "../../jquery.mobile/images/up.png";
    down.src = "../../jquery.mobile/images/down.png"

    substr = data.split('$');

    //alert(substr.length);
    //var theader = '<table border="1">\n';
    //<table id="auditOverview" border="1">
    var theader = '<table border="1" id=\"tableId\">\n';
    var tbody = '';

    for (var out = 1;out<substr.length-1;out++)
    {
        //alert(substr[out]);
        tbody += '<tr>';
        var pra = substr[out].split('|^');
        //alert('pra.length is: '+pra.length);

        for (var i=0;i<pra.length-1;i++)
        {
            tbody += '<td>';

            if (pra[i]=="Red")
            {
                pra[i].append("<img id='theImg' src='../../jquery.mobile/images/down.png'/>");
            }
            else if (pra[i]=="Green")
            {
                pra[i].append("<img id='theImg' src='../../jquery.mobile/images/up.png'/>");
            }
            tbody += pra[i];    
            tbody += '</td>'  
        }
        tbody += '</tr>\n';
    }       
    var tfooter = '</table>';
    document.getElementById('wrapper').innerHTML = theader + tbody + tfooter;       

}); 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:54:35.883

您可以构建标题：

```
var header = "<th>...</th>"; 
```

然后：

```
$("table").append(header); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:56:31.353

如果我能正确理解你的观点

**演示**：http: [//jsfiddle.net/75zFX/8/](http://jsfiddle.net/75zFX/8/)

```
var colheader = '<tr><th>Column1</th><th>Column2</th> .....</tr>\n';
var tbody = colheader ;// and replace with var tbody = ''; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-20T16:23:42.207

如果您想手动将标题添加到表中，请使用此代码。

**JSP**

```
<th id="example"></th> 
```

**JavaScript**

```
$("#example").html("Header Value"); 
```

# mysql - 将电子邮件存储为三个属性而不是一个（出于统计目的）

> ID：11062738
> 
> 赞同：0
> 
> 时间：2012-06-16T10:46:59.333
> 
> 标签：mysql, database-design

我有一个数据库，它有一个表 email_eml，它存储 3 个属性 name_eml、host_eml 和 domain_eml。哪个存储电子邮件名称网站名称和域名（如 .com .net 等） 它不存储 @ 或 . 在任何变量中。这给了我一些灵活性（例如检查平均名称长度（在@符号之前）会更快）。我可以收集有关电子邮件名称的一些统计信息，还可以从 name_eml 属性创建用户名。然而，当人们提交他们的电子邮件或者我必须比较整封电子邮件时，这也是一个负担。这将使我存储额外的 @ 和 . 当我想收集统计数据时，让我通过脚本分隔名称。

我想知道将电子邮件存储在单列而不是 3 列中是否更好。其中一种方式是更合适还是更规范化的方式？

我希望答案包括两种存储电子邮件地址的方法的优缺点。（即使将电子邮件存储在 3 列中也没有很多优点）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:00:22.573

> 它不存储 @ 或 a 。在任何变量中。

好吧，它应该；`cat.call@somedomain.com`是合法的电子邮件地址。

> 我想知道将电子邮件存储在单列而不是 3 列中是否更好。其中一种方式是更合适还是更规范化的方式？

这与标准化没有任何关系。它与复杂的数据类型有关。

关系模型允许任意复杂的数据类型。常用的复杂数据类型是时间戳，通常包括年、月、日、小时、分钟、秒和微秒。

给定时间戳，有时您可能只需要知道日期，有时您可能只需要知道年份或小时。在处理复杂的数据类型时，关系模型给 dbms 带来了特定的负担。对于复杂的数据类型，dbms 要么完整地返回它，要么提供返回其各个部分的函数。关键是，如果用户只想要时间戳中的小时，则*用户*不需要编写代码来获取它。

SQL dbms 对时间戳有很好的支持；我熟悉的每个 dbms 都提供了返回时间戳各个部分的函数。他们都没有对电子邮件地址的原生支持。

在 SQL 平台上，您至少有两种选择可以使您的数据库接近关系模型。您可以编写可以合并到数据库服务器中的函数（如果您的 dbms 和您的编程技能允许的话），或者您可以将数据类型拆分为多个部分，以便可以像任何其他值一样完整地处理每个部分。

虽然可能有一些数据类型可以像这样拆分（街道地址可能是其中之一），但我真的没有看到拆分电子邮件地址的任何令人信服的理由。

> 这给了我一些灵活性（例如检查平均名称长度（在@符号之前）会更快）。我可以收集有关电子邮件名称的一些统计信息，还可以从 name_eml 属性创建用户名。

虽然这是真的，但现在我无法想象用户名的平均长度有什么有趣的地方。我不认为你的任何理由令人信服，但你比我更了解你的申请。

如果您确实*需要*对这些片段进行大量操作，那么将这些片段分开会更有意义。更“正常”的客户端代码应该通过连接各个部分的视图来访问电子邮件地址。（连接比在运行时解析电子邮件地址*要容易得多。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:18:56.343

将电子邮件地址存储在三列中的情况极为罕见。如果您想在@符号之前的电子邮件部分进行搜索，您可以使用 LIKE 查询...

```
SELECT email FROM people WHERE email LIKE 'john.smith@%'; 
```

我很想听听任何无法使用 SQL 查询的真实示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T02:17:32.290

在规范化方面，一旦你分解了公共方面（例如主机，尤其是顶级域），它们应该被建模为外部关系。所以你最终得到了三个表：

1.  电子邮件名称
2.  电子邮件主机
3.  电子邮件顶级域名

emailNames 然后有三列：

1.  电子邮件名称
2.  主机ID
3.  域名

请注意，我使用了“TLD”，因为这可能是主机名中唯一有显着重叠的部分，您可以期待“。” TLD 开始之前的主机名中的字符。

# javascript - 在javascript中解析xml

> ID：11062745
> 
> 赞同：0
> 
> 时间：2012-06-16T10:47:42.630
> 
> 标签：javascript

当我尝试显示 ajax 获取的 xml 数据时出现问题。数据来得很顺利，但是当我尝试将其解析为 xml 时，它失败了。这是代码：我试图显示序列化的 xml 数据，它运行良好，解析有问题......

```
<script type="text/javascript">
    $.ajax({
        url: 'Flights.xml',
        type: 'GET',
        dataType: 'xml',
        timeout: 1000,
        error: function () {
            alert('Error loading XML document');
        },
        success: function (data) {
            //data.xml check for IE
            //            var xmlstr = data.xml ? data.xml : ;
            //            alert(xmlstr);
            var xmlstr = data.xml ? data.xml : (new XMLSerializer()).serializeToString(data);
            var xmlDoc = StringtoXML(xmlstr);
            var x = xmlDoc.getElementsByTagName("Flight");
            var y = document.write(x[i].getElementsByTagName("Type")[0].childNodes[0].nodeValue);
            alert(y);
        }
    });
    function StringtoXML(text) {
        if (window.ActiveXObject) {
            var doc = new ActiveXObject('Microsoft.XMLDOM');
            doc.async = 'false';
            doc.loadXML(text);
        } else {
            var parser = new DOMParser();
            var doc = parser.parseFromString(text, 'text/xml');
        }
        return doc;
    }

</script> 
```

这里是 XML 文件

```
<?xml version="1.0"?>
<Flights>
  <Flight ID="0">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="1">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="2">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="3">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="4">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="5">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="6">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="7">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="8">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="9">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="10">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="54">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="55">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="56">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="57">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="58">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="59">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="60">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="61">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="62">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="63">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="64">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="65">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="66">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="67">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="68">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="69">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="70">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="71">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="72">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="73">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="74">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="75">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="76">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="77">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="78">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="79">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="80">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="81">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="82">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="83">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="84">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="85">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="86">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="87">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="88">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="89">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="90">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="91">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="92">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="93">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="94">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="95">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="96">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="97">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="98">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="99">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="100">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="101">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="102">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="103">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="104">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="105">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="106">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="107">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="108">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="109">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
  <Flight ID="110">
    <Type>SpecialKazakhstan</Type>
    <Discription>СпециальныйтарифэкономическогоклассасограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>47917KZT</minimanPrice>
  </Flight>
  <Flight ID="111">
    <Type>FlexibleKazakhstan</Type>
    <Discription>Специальныйтарифэкономическогоклассасвозможностьюбесплатногоперебронированиядоотправления.Дополнительнаяинформация</Discription>
    <minimanPrice>52397KZT</minimanPrice>
  </Flight>
  <Flight ID="112">
    <Type>Fullflexible</Type>
    <Discription>НормальныйтарифэкономическогоклассабезограниченийДополнительнаяинформация</Discription>
    <minimanPrice>56267KZT</minimanPrice>
  </Flight>
  <Flight ID="113">
    <Type>BusinessKazakhstan</Type>
    <Discription>НормальныйтарифбизнесклассаснекоторымиограничениямиДополнительнаяинформация</Discription>
    <minimanPrice>89557KZT</minimanPrice>
  </Flight>
  <Flight ID="114">
    <Type>Business</Type>
    <Discription>Нормальныйтарифбизнесклассабезограничений.ПочувствуйтенастоящийкомфортДополнительнаяинформация</Discription>
    <minimanPrice>98345KZT</minimanPrice>
  </Flight>
</Flights> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:52:21.850

尝试用 jQuery 解析它

```
success: function(xml)
{
   $(xml).find("Flight").each(function() {
      // code here
   });
} 
```

像这样：

```
 $.ajax({
        url: 'Flights.xml',
        type: 'GET',
        dataType: 'xml',
        timeout: 1000,
        error: function () {
            alert('Error loading XML document');
        },
        success: function(xml)
        {
          $(xml).find("Flight").each(function() {
            $(this).attr('id') // ID
            $(this).find('discription').text() // Discription content
          });
        }
    }); 
```

# mainframe - 我可以让 SST/Sysview 在工作完成时通知我吗？

> ID：11062747
> 
> 赞同：0
> 
> 时间：2012-06-16T10:48:19.620
> 
> 标签：mainframe, mvs

我正在我们辉煌的 IBM 大型机上使用 Sysview 监控一项工作。我能否以某种方式让工具或大型机在工作完成后通知我，还是我必须坐下来轮询几个小时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:45:42.750

您可以在批处理作业中添加最后一个步骤，该步骤执行[IEBGENER](https://www.ibm.com/docs/en/zos/2.4.0?topic=utilities-iebgener-sequential-copygenerate-data-set-program) ，以通过 SYSUT2 DD 指向的[OUTPUT](https://www.ibm.com/docs/en/zos/2.4.0?topic=reference-output-jcl-statement)语句发送电子邮件或文本消息。使用 OUTPUT 语句的[MAILTO](https://www.ibm.com/docs/en/zos/2.4.0?topic=statement-mailto-parameter)参数。

我承认这很笨拙。您可能希望将您的愿望传达给 IBM Rational 人员，作为营销需求或[SHARE 需求](http://www.share.org/p/cm/ld/fid=131)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:14:38.573

您可以使用 JCL 中的**SMTP**实用程序，并将数据显示在相应 DD 中的电子邮件中。我这里没有语法，但如果你需要，请让我知道。

# perl - Deparsing/Decomposing - 一步一步的混淆 perl 脚本

> ID：11062749
> 
> 赞同：7
> 
> 时间：2012-06-16T10:48:29.067
> 
> 标签：perl, deobfuscation

作为标题 - 请任何人解释下一个脚本是如何工作的

这将打印文本：“Perl guy are smart”

```
''=~('(?{'.('])@@^{'^'-[).*[').'"'.('-[)@{:__({:)[{(-:)^}'^'}>[,[]*&[[[[>[[@[[*_').',$/})') 
```

这仅打印“b”

```
use strict;
use warnings;
''=~('(?{'.('_/).+{'^'/]@@_[').'"'.('=^'^'_|').',$/})') 
```

perl -MO=Deparse 仅显示以下内容：

```
use warnings;
use strict 'refs';
'' =~ m[(?{print "b",$/})]; 
```

但不知道为什么... ;(

像脚本一样分解的推荐方法是什么？如何开始？

所以，尝试了这个：

```
'' =~
(
        '(?{'
        .
        (
                '])@@^{' ^ '-[).*['
        )
        .
        '"'
        .
        (
                 '-[)@{:__({:)[{(-:)^}' ^ '}>[,[]*&[[[[>[[@[[*_'
        )
        .
        ',$/})'
) 
```

几个部分由 连接`.`。并且按位的结果`^`可能给出了文本部分。这：

```
perl -e "print '-[)@{:__({:)[{(-:)^}' ^ '}>[,[]*&[[[[>[[@[[*_'" 
```

打印“Perl guy are smart”和第一个`^`生成的“print”。

但是，当我将其重写为：

```
'' =~
(
    '(?{'
    .
    (
        'print'
    )
    .
    '"'
    .
    (
         'Perl guys are smart'
    )
    .
    ',$/})'
) 
```

我的 perl 告诉我：

```
panic: top_env 
```

奇怪，我第一次看到这样的错误消息...

这意味着：不允许用 , 替换`'str1' ^ 'str2'`, `result`（不明白为什么）以及为什么 perl 会打印恐慌消息？

我的perl：

```
This is perl 5, version 12, subversion 4 (v5.12.4) built for darwin-multi-2level 
```

*[ps：这里](http://vrm.wom.hu/scriptgen.cgi)生成例子*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T13:10:53.413

在行

```
.('_/).+{' ^ '/]@@_[ 
```

当您评估时`']' ^ '-'`，结果将是字母`p`。`^`是按位字符串运算，所以之后我们逐个字母地得到结果字符串。

检查我的脚本，它就像你的例子一样工作。我希望它会帮助你。

```
use v5.14;

# actually we obfuscated print and your word + "
# it looks like that (print).'"'.(yor_word")
my $print  = 'print';
my $string = 'special for stackoverflow by fxzuz"';

my $left  = get_obfuscated($print);
my $right = get_obfuscated($string);

# prepare result regexp
my $result = "'' =~ ('(?{'.($left).'\"'.($right).',\$/})');";

say 'result obfuscated ' .  $result;
eval $result;

sub get_obfuscated {

    my $string = shift;
    my @letters = split //, $string;

    # all symbols like :,&? etc (exclude ' and \)
    # we use them for obfuscation
    my @array = (32..38, 40..47, 58..64, 91, 93..95, 123..126);

    my $left_str = '';
    my $right_str = '';

    # obfuscated letter by letter
    for my $letter (@letters) {

        my @result;
        # get right xor letters
        for my $symbol (@array) {

            # prepare xor results
           my $result = ord $letter ^ $symbol;
           push @result, { left => $result, right => $symbol } if $result ~~ @array;
        }

        my $rand_elem = $result[rand $#result];
        $left_str  .= chr $rand_elem->{left};
        $right_str .= chr $rand_elem->{right};
    }

    my $obfuscated = "'$left_str' ^ '$right_str'";
    say "$string => $obfuscated";

    return $obfuscated;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T12:01:12.867

理解这里发生的事情的诀窍是查看由 XOR 和连接构造的字符串：

```
(?{print "Perl guys are smart",$/}) 
```

[这是(?{ code })](http://perldoc.perl.org/perlre.html#%28?%7B-code-%7D%29)形式的实验性正则表达式功能。所以你看到打印到终端的是结果

```
print "Perl guys are smart",$/ 
```

被调用`''=~...`。`$/`是 Perl 的输入记录分隔符，默认是换行符。

# php - 如何使用 Zend 框架关闭会话

> ID：11062750
> 
> 赞同：1
> 
> 时间：2012-06-16T10:48:40.673
> 
> 标签：php, zend-framework, zend-studio, zend-form-element

例如：

```
http://example.com/login 
```

这是我在内部登录并使用用户页面后的站点`example.com/user`，当我在外部登录时`www.example.com/logout`，会话将被关闭。

但是，如果在任何人使用详细信息时用户没有登录，则不`example.com/user`应该出现，因为我希望关闭会话并且它也会影响不同的浏览器。

如何做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:03:19.197

[Zend 会话管理](http://framework.zend.com/manual/en/zend.session.global_session_management.html)可以选择通过“跳跃”或基于时间来[过期](http://framework.zend.com/manual/en/zend.session.advanced_usage.html)命名空间，您还可以通过 Zend_Session::writeclose 编写锁定会话或使用 Zend_Session::destroy() 销毁它（参考：[http://framework.zend .com/manual/en/zend.session.global_session_management.html](http://framework.zend.com/manual/en/zend.session.global_session_management.html) )

破坏（）：

> destroy(bool $remove_cookie = true, bool $readonly = true) Zend_Session::destroy() 销毁所有与当前会话相关的持久数据。但是，PHP 中的变量不会受到影响，因此您的命名空间会话（Zend_Session_Namespace 的实例）仍然是可读的。要完成“注销”，请将可选参数设置为 TRUE（默认值）以同时删除用户代理的会话 id cookie。可选的 $readonly 参数删除了创建新 Zend_Session_Namespace 实例和 Zend_Session 方法写入会话数据存储的能力。

写关闭（）：

> writeClose($readonly = true) 关闭会话，关闭写入并从后端存储机制中分离 $_SESSION。这将完成对该请求的内部数据转换。可选的 $readonly 布尔参数可以通过在尝试通过 Zend_Session 或 Zend_Session_Namespace 写入会话时抛出异常来删除写入访问。

# css - 使用 CellFactory 时的 Javafx ListView 选择栏文本颜色

> ID：11062754
> 
> 赞同：2
> 
> 时间：2012-06-16T10:49:17.357
> 
> 标签：css, listview, javafx-2

有什么方法可以更改列表视图中的选择栏文本颜色？最好使用 CSS。在 TableView 中，您可以使用：

```
-fx-selection-bar-text: white; 
```

但这不适用于 ListView。

**更新：**上述情况发生在使用 CellFactories 渲染单元格时。

```
lvRooms.setCellFactory(new Callback<ListView<String>, ListCell<String>>() {
        @Override public ListCell<String> call(ListView<String> list) {
            return new RoomCell();
        }
    }); 
```

在 Cell Factory 类中，我很乐意介绍选择行时的情况。

**但是：**它在开始时只调用一次，而不是每次移动选择栏时调用，因此 isSelected() 方法总是呈现 false。

**更新 2**：这是 RoomCell 实现：

```
class RoomCell extends ListCell<String> {
        @Override
        public void updateItem(String item, boolean empty) {
            super.updateItem(item, empty);

            if (item != null) {
                Log.debug("RoomCell called, item: "+item);
                final Label lbl = new Label(item); // The room name will be displayed here
                lbl.setFont(Font.font("Segoe UI", FontWeight.BOLD, 18));
                lbl.setStyle("-fx-text-fill: black");

                //lbl.setTextFill(isSelected()?Color.WHITE: Color.BLACK);
                if (isSelected())  // This is always false :(
                   lbl.setStyle("-fx-text-fill: yellow");

                if (Rooms.getBoolean(item, "OwnerStatus")) {
                    lbl.setEffect(new DropShadow(15, Color.BLUEVIOLET));
                    lbl.setGraphic(new ImageView(
                                    new Image(getClass().getResourceAsStream("images/universal.png"))));
                } else  {
                    lbl.setGraphic(new ImageView(
                                    new Image(getClass().getResourceAsStream("images/yin-yang.png"))));
                    lbl.setEffect(new DropShadow(15, Color.WHITE));
                } 
                setGraphic(lbl); 

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T12:49:08.250

`-fx-selection-bar-text`是在根默认 CSS 选择器中定义的调色板（不是 css 属性），它是`Scene`. 我不知道你是如何使用它的，但如果你定义它（全局因为它是场景的选择器），比如：

```
.root{
    -fx-selection-bar-text: red;
} 
```

在您的 CSS 文件中，所有使用的控件的 CSS 属性`-fx-selection-bar-text`都将变为红色。`ListView`也会受到影响（请参阅下面注释掉的原始用法）。
但是，如果您只想自定义 ListView 的样式，请以这种方式覆盖默认属性
（注意：仅`-fx-text-fill`被覆盖。原始值被注释掉，在哪里`-fx-selection-bar-text`使用）：

```
/* When the list-cell is selected and focused */
.list-view:focused .list-cell:filled:focused:selected {
    -fx-background-color: -fx-focus-color, -fx-cell-focus-inner-border, -fx-selection-bar;
    -fx-background-insets: 0, 1, 2;
    -fx-background: -fx-accent;
    /* -fx-text-fill: -fx-selection-bar-text;  */
    -fx-text-fill: red;
}

/* When the list-cell is selected and selected-hovered but not focused. 
    Applied when the multiple items are selected but not focused */
.list-view:focused .list-cell:filled:selected, .list-view:focused .list-cell:filled:selected:hover {
    -fx-background: -fx-accent;
    -fx-background-color: -fx-selection-bar;
    /* -fx-text-fill: -fx-selection-bar-text;  */
    -fx-text-fill: green;
}

/* When the list-cell is selected, focused and mouse hovered */
.list-view:focused .list-cell:filled:focused:selected:hover {
    -fx-background: -fx-accent;
    -fx-background-color: -fx-focus-color, -fx-cell-focus-inner-border, -fx-selection-bar;
    -fx-background-insets: 0, 1, 2;
    /* -fx-text-fill: -fx-selection-bar-text;  */
    -fx-text-fill: yellow;
} 
```

这些 CSS 属性和更多属性在内置**caspian.css**中可用。

* * *

**更新：**我强烈建议您阅读[Cell API](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Cell.html)。从那里

> ...我们仅使用很少的单元来表示非常大的数据集。每个 Cell 都被“回收”或重复使用。

请注意，不同的字符串项目可能使用相同的单元格，并以误导性的视觉效果/渲染结尾，就像`isSelected()`在您的代码中一样。另外在API中它说

> 因为到目前为止，单元格最常见的用例是向用户显示文本，所以此用例专门针对 Cell 内部进行了优化。这是由从 Labeled 扩展的 Cell 完成的。这意味着 Cell 的子类只需要设置 text 属性，而不是创建一个单独的 Label 并在 Cell 中设置它。

所以我重构了你的代码如下。

```
class RoomCell extends ListCell<String> {
    @Override
    public void updateItem(String item, boolean empty) {
        super.updateItem(item, empty);

        if (item != null) {
            Log.debug("RoomCell called, item: "+item);
            setFont(Font.font("Segoe UI", FontWeight.BOLD, 18));
            ImageView iView = new ImageView();
            if (Rooms.getBoolean(item, "OwnerStatus")) {
                iView.setEffect(new DropShadow(15, Color.BLUEVIOLET));
                iView.setImage(new Image(getClass().getResourceAsStream("images/universal.png")));
            } else  {
                iView.setEffect(new DropShadow(15, Color.WHITE));
                iView.setImage(new Image(getClass().getResourceAsStream("images/yin-yang.png")));
            } 
            setGraphic(iView);  // The image will be displayed here
            setText(item); // The room name will be displayed here
        }
    }
} 
```

单元格文本的所有`-fx-text-fill`样式将根据 CSS 文件中的定义进行更改。

现在这里是单元格的文本阴影效果和它的 CSS 文件填充颜色之间的权衡：
-- 如果你想使用阴影效果，你应该像现在这样，即创建标签，设置它的文本，给 dorpshadow 效果标签和 setGraphic（标签）。但是这一次您不会喜欢设置`setText(item)`单元格的文本 ( )，因此 CSS 文件中的文本颜色样式将不起作用。
-- 另一方面，如果您更喜欢我重构的代码，那么您应该通过将其设置为或并在 CSS 文件中设置为 dropshadow 来禁用`-fx-background-color`单元格（扩展`Labeled`），以便能够将阴影效果应用于直接发文。清除单元格的背景不是 IMO 的首选方式。代码解释：`transparent``null``-fx-effect`

```
Label lbl = new Label("This text will have a dropshadow on itself directly");
lbl.setEffect(new DropShadow(15, Color.BLUE));

Label another_lbl = new Label("This text will have a dropshadow applied on the background bounds, not to text");
another_lbl.setEffect(new DropShadow(15, Color.BLUE));
another_lbl.setStyle("-fx-background-color:gray"); 
```

测试它们以查看差异。就这样。

# android - “android.view.View 无法转换为 android.view.ViewGroup”异常

> ID：11062761
> 
> 赞同：24
> 
> 时间：2012-06-16T10:50:41.783
> 
> 标签：android, android-layout

我正在开发一个 android 应用程序，并添加了一个 xml 布局文件，该文件稍后应该是一个片段：

```
<?xml version="1.0" encoding="utf-8"?>
<View xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imgTile"
        android:src="@drawable/tile_background"
        android:contentDescription="@string/CD_TILE_BACKGROUND_IMAGE"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    </ImageView>

</View> 
```

当我尝试移回 中的图形布局时`Eclipse`，我在错误日志中收到此异常：

```
java.lang.ClassCastException: android.view.View cannot be cast to android.view.ViewGroup
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:740)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:324)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1361)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1115)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:941)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:450)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:358)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:290)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4128)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1457)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1480)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1465)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1270)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2746)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1433)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4128)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1457)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1480)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1465)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1270)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3974)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3613)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

谁能帮我解决这个例外？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-16T12:04:07.130

我认为你应该使用

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imgTile"
        android:src="@drawable/tile_background"
        android:contentDescription="@string/CD_TILE_BACKGROUND_IMAGE"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    </ImageView>

</LinearLayout > 
```

由于 View 没有 add(other_view) 之类的任何功能，您可以在 ViewGorup 中添加视图 ....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-04T02:39:45.583

我知道我参加聚会迟到了，但以防万一有人因为同样的问题撞到头，当我尝试在寻呼机适配器图像中添加缩放功能时，这是一种可能的解决方案。信息：这不是确切的答案，但对于那些面临同样问题的人来说，这是一个可能的解决方案。我发布这个是因为我没有在 stackOverflow 的任何地方找到这种解决方案

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <ImageView
            android:id="@+id/head_image"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:scaleType="centerCrop"
            android:src="@drawable/head_image" />

    </RelativeLayout> 
```

在上面的代码中，只需替换`<ImageView`为`<com.yourPackage.TouchImageView`.

**TouchImageView** （或任何其他类）是一个自定义类（你需要制作），它应该扩展**android.support.v7.widget.AppCompatImageView**

# php - 将 HTML Div 内容转换为图像

> ID：11062768
> 
> 赞同：2
> 
> 时间：2012-06-16T10:52:07.660
> 
> 标签：php, html, jquery-plugins

我正在尝试制作一种图像编辑器类型的页面。人物可以向背景图像添加文本和样式。我通过 HTML、Jquery 和 css 完成的所有工作，但都将其导出为图像。我想将特定的 div 转换为图像。

注意：*我已经知道通过 SVG 和 HTML5 Canvas 可以实现 HTML 到图像的转换。由于浏览器兼容性，我不能做这些事情。*

如果有任何 PHP 类或 jquery 插件可用，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:58:00.540

我认为直接在客户端没有 HTML5 功能是不可能的。可能是我错了吗？

我的解决方案是将整个 div（带有样式）发送到后端服务器，在后端服务器上使用 PhantomJS 或 Qt Webkit 捕获屏幕截图。在服务器端，您应该打开在用户浏览器中显示的 DIV 用户，然后对该 DIV 进行截图。

# asp.net - 从表中删除记录

> ID：11062771
> 
> 赞同：0
> 
> 时间：2012-06-16T10:52:21.043
> 
> 标签：asp.net

![在此处输入图像描述](../Images/290cda49825c215c0e50d252eb314d12.png)

在上面的照片中，我有一个表格，其中包含在表格中动态添加的用户列表。我希望当我单击红十字图像按钮时，要从数据库中删除相应的用户。

这是填写表格的代码：

```
/****** Filling the originators table ********/
          string[] oa1 = originator;
            for (int i = 0; i < oa1.Length; i++)
            {
                TableRow row = new TableRow();
                users_table.Rows.Add(row);
                for (int colCount = 0; colCount < 4; colCount++)
                {
                    TableCell cell = new TableCell();
                    row.Cells.Add(cell);

                    if (colCount == 0)
                    {
                        cell.Controls.Add(new LiteralControl(oa1[i]));
                    }
                    else if (colCount == 1)
                    {
                        cell.Controls.Add(new LiteralControl("|"));
                    }
                    else if (colCount == 2)
                    {
                        LLKB userInfo = new LLKB();
                        cell.Controls.Add(new LiteralControl(userInfo.InfoGetter(oa1[i].Trim(), "name")));
                    }
                    else if (colCount == 3)
                    {
                        ImageButton btn = new ImageButton();
                        btn.ImageUrl = "img/DeleteRed.png";
                        btn.ID = oa1[i] + "_" + i;
                        btn.Click += new ImageClickEventHandler(delete_originator);
                        cell.Controls.Add(btn);
                    }
                }
            } 
```

这是显示删除的方法：

```
public void delete_originator(object sender, ImageClickEventArgs e)
    {
        //some code here
    } 
```

那么，你建议我在删除方法中写什么？

或者如果你有其他想法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:43:57.930

您应该清空表并重新创建表并通过“_”拆分图像按钮 ID 来获取用户名，因此当该用户名出现时，您可以在循环中添加 continue 语句。Delete 事件中的一些类似的东西：

```
string Username=((imagebutton)sender).ID.toString().tosplit('_')[0]; 
```

# python - 颜色空间之间的python转换

> ID：11062773
> 
> 赞同：2
> 
> 时间：2012-06-16T10:52:25.623
> 
> 标签：python, color-space

我想从 rgb 转换为 hsv，但结果似乎出乎意料

以下是代码

```
 import colorsys

   print colorsys.rgb_to_hsv(144, 190, 255) 
```

它打印如下

```
 (0.5, 0, 255) 
```

我期待它在哪里

```
 (215,44,100) 
```

或者

```
 (215,0.44,1.0) 
```

任何的想法？？？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T10:54:42.663

的[文档`colorsys`](http://docs.python.org/library/colorsys.html)`0.0`解释说所有颜色空间坐标都是介于和之间的浮点数`1.0`- 相应地重新调整您的值以获得所需的结果：

```
>>> h, s, v = colorsys.rgb_to_hsv(144/255., 190/255., 255/255.)
>>> 360 * h, 100 * s, 100 * v
(215.13513513513513, 43.529411764705884, 100.0) 
```

# mysql - MySQL查询选择日期范围内具有值的所有行

> ID：11062779
> 
> 赞同：0
> 
> 时间：2012-06-16T10:53:22.610
> 
> 标签：mysql, date, range

我有以下 MySQL 查询：

```
SELECT 
  s.student_socialnr, s.student_lastname, s.student_firstname,
  cs.city_name,
  scp.cpl_startdate, scp.cpl_enddate, scp.cpl_invoice,
  cu.customer_name, scp.cpl_coursename
FROM students s
 INNER JOIN studentcourseplan scp ON scp.student_id = s.student_id
 INNER JOIN cityselections cs ON cs.city_id = s.student_city_id
 INNER JOIN customers cu ON cu.customer_id = s.student_customer_id 
```

这将输出如下内容：

```
+------------------+------------------+------------------+-----------+---------------+--------------+-------------+---------------+----------------+
| student_socialnr | student_lastname | student_firstname| city_name | cpl_startdate | cpl_enddate  | cpl_invoice | customer_name | cpl_coursename |
+------------------+------------------+------------------+-----------+---------------+--------------+-------------+---------------+----------------+
| 000000-0000      | Doe              | John             | Dallas    | 2012-06-01    | 2012-06-30   | 1337        | The customer  | The course     |
+------------------+------------------+------------------+-----------+---------------+--------------+-------------+---------------+----------------+
| 000000-0000      | Johnsson         | Derp             | Texas     | 2012-02-01    | 2012-07-28   | 5000        | The customer  | The course     |
+------------------+------------------+------------------+-----------+---------------+--------------+-------------+---------------+----------------+
| 000000-0000      | Derpina          | Lisa             | New York  | 2013-01-01    | 2013-04-01   | 2001        | The customer  | The course     |
+------------------+------------------+------------------+-----------+---------------+--------------+-------------+---------------+----------------+ 
```

我有两个问题。我希望能够在字段`cpl_startdate`和`cpl_enddate`. 因此，例如，如果用户设置了过滤器`cpl_startdate = '2012-01-01'`，`cpl_enddate = '2012-12-31'`它应该输出日期在该范围内的所有行。所以使用上面的例子，它应该只输出前两行，因为它们在选定的日期范围内。

我试过

```
.. WHERE scp.cpl_startdate <= '2012-01-01' AND scp.cpl_enddate >= '2012-12-31' 
```

..没有运气。我可以`BETWEEN`以某种方式使用 MySQL 语法吗？

另外，是否可以计算两个日期范围之间的天数？我想输出一个跨度之间天数的 INT。不一定在同一个查询中..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:57:45.947

切换比较符号：

```
.. WHERE scp.cpl_startdate >= '2012-01-01' AND scp.cpl_enddate <= '2012-12-31' 
```

要计算给定行的开始日期和结束日期之间的天数，请将其添加到您的 select 语句中：

```
DATEDIFF(scp.cpl_enddate, scp.cpl_startdate) AS DaysDifference 
```

DATEDIFF(expr1, expr2) 返回 expr1 - expr2 的日期差。在 MySQL[文档](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)中查看更多信息。

# android - 如何在用户卸载 App 应用程序之前启动 Activity 或 Service？

> ID：11062780
> 
> 赞同：17
> 
> 时间：2012-06-16T10:53:33.820
> 
> 标签：android

**为什么又是同一个问题**

这个问题在 SO 上被问了大约 100 次。*我再问一次，*因为所有答案都说`this is not possible`，但市场中至少有一个应用程序正在这样做`NQ Mobile Security`。我在类似的问题上开始了 100 分的赏金，但没有得到足够的关注。如果社区不接受，我将删除该问题。

**应用程序在做什么**

该应用程序在用户尝试卸载它时显示一个活动

![在此处输入图像描述](../Images/37cce792bef8cf8b6d3c83679dc881e0.png)

并在卸载之前进行一些处理

![在此处输入图像描述](../Images/25265b74695f146f59cf09aa8cdaff5c.png)

**我的问题是什么**

如何在之前在其设备上安装应用程序的用户卸载应用程序之前启动`Activity`或启动应用程序？`IntentService`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:26:58.617

正如@CommonsWare 所说`The techniques used by NQ Mobile Security have been reported to the Android Security group, and they are working on a fix to stop this behavior from occurring.`，并已向 Google 提出了功能请求，希望他们可以听取它。

[http://code.google.com/p/android/issues/detail?can=2&q=33315&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&id=33315](http://code.google.com/p/android/issues/detail?can=2&q=33315&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&id=33315)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:59:50.320

我认为您可以跟踪 logcat，所有活动、事件、意图都在其中注册，并找到何时发送 Intent 以卸载此应用程序。

然后你可能会执行一个动作，即启动一个活动，但我不确定这一步。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:08:26.087

我不知道它是怎么发生的`NQ Mobile Security application`，

但在一般情况下，我发现这是不可能的（或者可能有可能但我找不到路），

因为，

当您在自己的应用中注册并卸载应用时，已注册`BroadcastReceiver`的应用在应用卸载之前已被卸载，因此不会收到自己的卸载事件。`android.intent.action.PACKAGE_REMOVED``BroadcastReceiver``BroadcastReceiver`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-27T07:58:48.013

我知道这很旧，但我想提供这个答案。听你自己的卸载很容易。您只需要使用在后台执行和运行的二进制文件（使用 nohup 命令）。

这个二进制文件可以监听 PACKAGE_REMOVED 广播，或者您可以定期检查文件是否仍然存在于 /data/app/ 中（这些文件是世界可读的，目录列表已禁用，但您知道您自己的包名:)）我不知道第二种解决方案可以在不耗尽电池的情况下完成。

# java - 是否可以使用 post 协议获得返回值？

> ID：11062781
> 
> 赞同：0
> 
> 时间：2012-06-16T10:53:34.063
> 
> 标签：java, php, asp.net, web-services

假设我需要使用以编程方式上传文件以编程方式将文件上传到[服务器](https://stackoverflow.com/questions/4127982/uploading-a-file-programmatically)，无论使用`POST`请求方法而不是php java 或 asp.net，服务器都可以返回一个值`GET`吗？

如果不是，我如何询问服务器哪些文件已正确上传或上传已完成？

我的意思是如果服务器是另一个服务器而不是我的服务器，我看不到如何获得响应，所以你能提供一些示例代码或参考一些 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:55:58.677

它可以与请求相同，`GET`例如服务器可以使用 JSON 格式的字符串响应来回答，其中将包括上传的文件，或者它可以返回完整的 html 页面，无论您需要什么。

例如，如果你想使用方法向服务器发送一些数据`POST`并且你想提醒它你可以做这样的事情（jQuery）：

```
$.ajax({
  type: "POST",
  url: "http://localhost/testing.php",
  data: { name: "John Doe" } // sample data sent to server
}).done(function( msg ) {
  alert( "Response data: " + msg );
}); 
```

一般来说，如果它是`GET`或`POST`，从服务器返回响应并不重要，您唯一需要做的就是捕获它并根据响应内容执行操作。

# c++ - 在代码中使用#import，在if语句中

> ID：11062788
> 
> 赞同：-2
> 
> 时间：2012-06-16T10:55:35.253
> 
> 标签：c++, c, import, ms-office, conditional

我正在构建 ac/c++ 程序，并且正在使用 MS Excel 进行结果表示。问题是我必须导入 2 个文件：

```
 #import "C:\Program Files (x86)\Common Files\microsoft shared\OFFICE14\MSO.DLL"
    #import "C:\Program Files (x86)\Microsoft Office\Office14\EXCEL.EXE" 
```

它在我的计算机上完美运行，但这些文件的路径取决于 Windows 版本（x64/x86）和 Office 版本（11、12、14）。所以我的想法是向客户询问这些版本（主要），然后根据输入使用不同的导入。但我不知道该怎么做......这样的事情不起作用：

```
 scanf("%d",ver_office);
if (ver_office==1){
    #import "C:\Program Files (x86)\Common Files\microsoft shared\OFFICE12\MSO.DLL"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:59:34.033

导入是由预处理器执行的，所以你不能在运行时进行，即在编译开始之前你必须知道所有路径

# c# - 正在访问字典 键属性线程安全吗？

> ID：11062790
> 
> 赞同：2
> 
> 时间：2012-06-16T10:55:52.363
> 
> 标签：c#, thread-safety

例如我可以去：

```
string[] keys = new string[items.Count];
items.Keys.CopyTo(keys); 
```

其中项目是：

```
Dictionary<string, MyObject> 
```

可能被另一个线程修改的实例？（我不清楚在访问 Keys 属性时 Dictionary 的内部工作是否会迭代集合——在这种情况下，我知道它不是线程安全的）。

**更新：**我意识到我上面的例子不是线程安全的，因为字典的大小可以在行之间改变。但是呢：

```
Dictionary<string, MyObject> keys = items.Keys;
string[] copyOfKeys = new string[keys.Count];
keys.Keys.CopyTo(copyOfKeys ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:59:03.380

不，`Dictionary`不是线程安全的。如果您需要线程安全并且您使用的是 .NET 4 或更高版本，您应该使用`ConcurrentDictionary`.

来自 MSDN：

> 只要不修改集合，字典就可以同时支持多个阅读器。即便如此，通过集合枚举本质上不是线程安全的过程。在枚举与写访问竞争的极少数情况下，必须在整个枚举期间锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T10:59:07.123

如果字典在另一个线程上被变异，那么这样做是不安全的。首先想到的是字典可能会调整其内部缓冲区的大小，这肯定不能很好地与并发迭代配合使用。

如果您不更改键并且只写入值，那么这在实践中应该是安全的。

无论如何，我不会将这样的代码投入生产，因为风险太高。如果某些 .NET 补丁改变了内部结构`Dictionary`，突然出现了错误怎么办。还有其他担忧。

我建议您使用`ConcurrentDictionary`或其他一些安全策略。为什么要赌代码的正确性？

# c++ - 异常不会被捕获

> ID：11062793
> 
> 赞同：1
> 
> 时间：2012-06-16T10:56:08.120
> 
> 标签：c++, exception

我有一个基础异常和一个派生异常，存储的公共内部类：

```
//base class - ProductException
    class ProductException: exception
    {
    protected:
        const int prodNum;
    public:
        //default+input constructor
        ProductException(const int& inputNum=0);
        //destructor
        ~ProductException();
        virtual const char* what() const throw();
    };

    //derived class - AddProdException
    class AddProdException: ProductException
    {
    public:
        //default+input constructor
        AddProdException(const int& inputNum=0);
        //destructor
        ~AddProdException();
        //override base exception's method
        virtual const char* what() const throw();
    }; 
```

这个抛出派生异常的函数：

```
void addProduct(const int& num,const string& name) throw(AddProdException);
void Store::addProduct( const int& num,const string& name )
{
    //irrelevant code...
    throw(AddProdException(num));
} 
```

和一个调用该函数并尝试捕获异常的函数：

```
try
{
    switch(op)
    {
        case 1:
        {
            cin>>num>>name;
            st.addProduct(num,name);
            break;
        }
    }
}
...
catch(Store::ProductException& e)
{
    const char* errStr=e.what();
    cout<<errStr;
    delete[] errStr;
} 
```

派生类应该被捕获，但我不断收到错误“未处理的异常”。任何想法为什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T10:58:40.000

如果没有`public`关键字，继承默认被认为是[私有的。](http://www.parashift.com/c++-faq-lite/private-inheritance.html)这意味着`AddProdException`is-not a `ProductException`。像这样使用公共继承：

```
class AddProdException : public ProductException
{
public:
    //default+input constructor
    AddProdException(const int& inputNum=0);
    //destructor
    ~AddProdException();
    //override base exception's method
    virtual const char* what() const throw();
}; 
```

`std::exception`另外，也可以从public in继承`ProductException`，否则您将无法捕获`std::exception`s （甚至更好， from `std::runtime_error`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T10:59:26.600

原因是`AddProdException`不是 a `ProductException`，因为您使用的是私有继承：

```
class AddProdException: ProductException {}; 
```

您需要使用公共继承：

```
class AddProdException: public ProductException {}; 
```

这同样适用于`ProductException`and `exception`，假设后者是`std::exception`。

# opengl - 如何在OpenGL中放大对象的区域

> ID：11062801
> 
> 赞同：0
> 
> 时间：2012-06-16T10:57:26.377
> 
> 标签：opengl

好的，我用OpenGL做了简单的矩形，看起来很简单

```
 glNormal3f(0.0f, 0.0f, 0.0f);

    glVertex3f(-0.0, 2.0, 0.0);
    glVertex3f(1.0, 2.0, 0.0);
    glVertex3f(1.0, 0.0, 0.0);
    glVertex3f(0.0, 0.0, 0.0); 
```

也很小。所以我的问题是如何使用一行代码将其放大两倍，或者我如何让我们说只有 X 轴值加倍。我知道这是可能的，但我不知道要搜索什么功能。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:07:21.317

好吧，您可以使用 将相机移近`glTranslate`或使用 缩放场景`glScale`。但坦率地说？

```
x *= 2.0;
y *= 2.0;

glVertex3f(-0.0, y*2.0, 0.0);
glVertex3f(x*1.0, y*2.0, 0.0);
glVertex3f(x*1.0, 0.0, 0.0);
glVertex3f(0.0, 0.0, 0.0); 
```

... 这是要走的路。

# jquery - 如何在没有 async = false 的情况下执行 jQuery 阻止 AJAX 调用？

> ID：11062803
> 
> 赞同：14
> 
> 时间：2012-06-16T10:57:40.150
> 
> 标签：jquery, ajax, html, validation, asynchronous

我有一个页面使用 HTML5 setCustomValidity() 方法[使用旧浏览器的 webshims 库]，在继续到下一页之前对电子邮件进行 AJAX 验证。

为此，我在 $.ajax() 调用中将 async 选项设置为 false 以使其同步，从而阻塞等待 AJAX 响应的页面，否则表单会在 ajax 调用返回之前提交，从而使验证无效。

```
<script>
  function validateEmailRegistered(input) {
    if (input.setCustomValidity === undefined) return;
    var err = 'Email address not found';
    $.ajax({
      url: 'email-is-registered.php', 
      data: { email: input.value }, 
      async: false, 
      success: function(data) {
        var ok = data=='true';
        input.setCustomValidity(ok ? '' : err)
      }
    });
  }
</script>

<form method="get" action="nextpage.php">
  <input name="email" id="email" type="email" required
    onChange="validateEmailRegistered(this)">
  <button type="submit">go</button>
<form> 
```

我看到从 jQuery 1.8 开始不推荐使用 async 选项。

如果没有 async 选项，如何实现此阻止操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T18:13:20.547

[http://bugs.jquery.com/ticket/11013#comment:40](http://bugs.jquery.com/ticket/11013#comment:40)

> 在同步 ajax 请求中使用 Deferred/Promise 功能已在 1.8 中弃用。支持带有 async: false 的 $.ajax 方法，但您必须使用回调参数而不是 Promise 方法，例如`.then`or `.done`。

因此，如果您使用的是成功/完成/错误处理程序，您仍然可以使用`async:false`. 更多信息在上面的 jquery 票上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T14:43:21.710

> 从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用完成/成功/错误回调。
> 
> [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)（异步部分）

我发现这有点烦人......如果平台允许，开发人员应该可以*选择*进行阻塞调用`async: false`- 为什么要限制它？我只是设置了一个超时以最大程度地减少挂起的影响。

尽管如此，我现在在 1.8 中使用队列，它是非阻塞的，并且工作得很好。Sebastien Roch 创建了一个易于使用的实用程序，允许您对函数进行排队并运行/暂停它们。 [https://github.com/mjward/Jquery-Async-queue](https://github.com/mjward/Jquery-Async-queue)

```
 queue = new $.AsyncQueue();
    queue.add(function (queue) { ajaxCall1(queue); });
    queue.add(function (queue) { ajaxCall2(queue); });
    queue.add(function() { ajaxCall3() });
    queue.run(); 
```

在前 2 个函数中，我将`queue`对象传递给调用，调用如下所示：

```
function ajaxCall1(queue) {
    queue.pause();
    $.ajax({
       // your parameters ....
       complete: function() {
         // your completing steps
         queue.run();
       }
    });
}

// similar for ajaxCall2 
```

注意`queue.pause();`每个函数开头的 ，并在语句`queue.run()`末尾继续队列执行。`complete`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T11:24:57.370

我假设您无论如何都会在提交时进行完整的表单验证，所以如果您键入电子邮件验证被中断，并且优先考虑表单提交，也许没问题。

我想我要做的是在用户提交表单时中止“validateEmailRegistered”AJAX 请求。然后，像往常一样执行完整的服务器端表单验证——包括电子邮件验证。

我对 as-you-type 验证的理解是，它是一种很好的方式，而不是在提交表单时验证表单的替代品。所以阻止表单提交对我来说没有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:47:52.160

您可以异步执行此操作。

创建一个全局变量，我称之为 ajax_done_and_successful_flag，您在程序开始时将其初始化为 false。您将在 Ajax 函数（例如 Ajax 成功函数或 Ajax 错误函数）的各个位置将其设置为 true 或 false。

然后您需要在验证函数的底部添加一个提交处理程序。

```
submitHandler: function(form) {
   if (ajax_done_and_successful_flag === true) {
     form.submit()
   }
} 
```

问题是代码没有以线性方式执行。
在您的代码中放置一堆 Firebug 的 console.log 语句。
观察执行顺序。您将看到您的
Ajax 响应将最后返回，或者任何时候都返回。
这就是为什么您需要 submitHandler 和全局标志来强制验证函数 在提交表单之前
等待正确的 Ajax结果。

任何从 Ajax 响应到屏幕的输出，都需要在 Ajax 函数中完成，例如成功函数和错误函数。
您需要写入与验证函数的成功/错误函数相同的位置。
通过这种方式，Ajax 错误消息与 validate 函数的错误函数融合在一起。
这个概念可能看起来有点棘手。
要记住的想法是，验证函数中的成功和错误函数与 Ajax 调用中的成功和错误函数写入相同的位置，这没关系，应该是这样。
我的错误消息的位置就在用户键入输入的位置旁边。这创造了我认为您所要求的良好用户体验。

这是我的代码示例。我简化了它。

我正在运行 jQuery-1.7.1
和 jQuery 验证插件 1.6
我正在使用 Firefox 14.0.1，我也在 Chrome 21.0 上成功尝试过。

```
 var ajax_done_and_successful_flag = false;

 // Add methods
  ...

 $.validator.addMethod("USERNAME_NOT_DUPLICATE", function (value, element) {
   return this.optional(element) || validate_username_not_duplicate( );
  },
  "Duplicate user name.");

// validate
$(document).ready(function ( ) {
   $('#register_entry_form form').validate({
      rules: {
         username: {
         required: true,
         minlength: 2,
         maxlength: 20,
         USERNAME_PATTERN: true,
         USERNAME_NOT_DUPLICATE: true
        },    
    ...
    errorPlacement: function (error, element) { 
       element.closest("div").find(".reg_entry_error").html(error);
    },
    success: function(label) {
       label.text('Success!');
    } ,

    submitHandler: function(form) {   
       if (ajax_done_and_successful_flag === true ) {    
          form.submit();
       }
    }
  });
});

/* validation functions*/

function validate_username_not_duplicate() {

   var username_value = $('#username').val(); // whatever is typed in

   $.ajax({
      url: "check_duplicate_username.php",
      type: "POST",
      data: { username: username_value },
      dataType: "text",
      cache: false,
      //async: false,
      timeout: 5000,
      error: function (jqXHR, errorType, errorMessage) {
         ajax_done_and_successful_flag = false;

        if ( errorType === "timeout" ) {
           $('#username').closest("div").find(".reg_entry_error").html("Server timeout, try again later" );
        } else if ...

      },

      success:  function (retString, textStatus,jqXRH) {

        if ( retString === "yes") { // duplicate name 
           // output message next to input field        
           $('#username').closest("div").find(".reg_entry_error").html("Name already taken.");
           ajax_done_and_successful_flag = false;
        } else if ( retString === "no") { // name is okay
           // output message next to input field
           $('#username').closest("div").find(".reg_entry_error").html("success!");
           ajax_done_and_successful_flag = true;

        } else {
           console.log("in validate_username_duplicate func, success function, string returned was not yes or no." );
           $('#username').closest("div").find(".reg_entry_error").html("There are server problems. Try again later.");
           ajax_done_and_successful_flag = false;
       }
     } // end success function

   }); // end ajax call

  return true; // automatically return true, the true/false is handled in
              // the server side program and then the  submit handler

} 
```

reg_entry_error 是文本输入旁边的位置。这是表单的简化代码示例。

```
 <label class="reg_entry_label" for="username">Username</label>
  <input class="reg_entry_input" type="text" name="username" id="username" value="" />
  <span class="reg_entry_error" id="usernameError" ></span> 
```

我希望这回答了你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T11:29:42.093

我认为你需要改变一下你的工作方式。不要试图实现阻塞，而要拥抱非阻塞。

我会这样做： - 保留电子邮件验证；使其异步。当它有效时，在变量中的某处设置一个标志以知道它是好的。- 在 form.submit() 上添加回调以检查电子邮件是否正常（使用变量），如果不正常则阻止提交。

这样您就可以保持异步调用而不会冻结 Web 浏览器 UI。

- [编辑] -

这是我刚刚根据您已有的内容为示例编写的一些快速代码。

供您参考，已经发明了一种称为“承诺”（期货和延期是它的其他术语）的编程概念，以准确解决您遇到的问题。

这是一篇关于它是什么以及如何在 JavaScript 中使用它们（使用 dojo 或 jQuery）的文章：http: [//blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript -with-promises.aspx](http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx)

```
<script>
  function validateEmailRegistered(input) {
    if (input.setCustomValidity === undefined) return;
    var err = 'Email address not found';
    $.ajax({
      url: 'email-is-registered.php', 
      data: { email: input.value }, 
      success: function(data) {
        var ok = data=='true';
        input.setCustomValidity(ok ? '' : err);
        // If the form was already submited, re-launch the check
        if (form_submitted) {
            input.form.submit();
        }
      }
    });
  }

  var form_submitted = false;

  function submitForm(form) {
    // Save the user clicked on "submit"
    form_submitted = true;
    return checkForm(form);
  }

  function checkForm(form, doSubmit) {
    if (doSubmit) {
        form_submitted = true;
    }
    // If the email is not valid (it can be delayed due to asynchronous call)
    if (!form.email.is_valid) {
        return false;
    }
    return true;
  }
</script>

<form method="get" action="nextpage.php" onsumbit="return submitForm(this);">
  <input name="email" id="email" type="email" required
    onChange="validateEmailRegistered(this)">
  <button type="submit">go</button>
<form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T15:30:51.073

如果您真的决定在检查电子邮件有效性之前不让他们提交表单，请使用`disabled`属性启动提交按钮，然后设置回调`$('form button').removeAttr('disabled');`

话虽如此，我和其他人在一起 - 让他们提交表格！通常人们做对了，你把它们传递出去，没有错误……

# c++ - 测量 C++ 代码的运行时间？

> ID：11062804
> 
> 赞同：41
> 
> 时间：2012-06-16T10:57:40.773
> 
> 标签：c++, linux

我想测量我的 C++ 代码的运行时间。执行我的代码大约需要 12 个小时，我想在代码执行结束时编写这个时间。我怎样才能在我的代码中做到这一点？

操作系统：Linux

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-06-16T11:02:27.760

如果您使用的是 C++11，则可以使用`system_clock::now()`：

```
auto start = std::chrono::system_clock::now();

/* do some work */

auto end = std::chrono::system_clock::now();
auto elapsed = end - start;
std::cout << elapsed.count() << '\n'; 
```

您还可以指定用于表示持续时间的粒度：

```
// this constructs a duration object using milliseconds
auto elapsed =
    std::chrono::duration_cast<std::chrono::milliseconds>(end - start);

// this constructs a duration object using seconds
auto elapsed =
    std::chrono::duration_cast<std::chrono::seconds>(end - start); 
```

如果您不能使用 C++11，请查看 Boost 中的[chrono](http://www.boost.org/doc/libs/1_49_0/doc/html/chrono.html)。

使用这样一个标准库的最大好处是它们的可移植性非常高（例如，它们都可以在 Linux 和 Windows 中工作）。因此，如果您决定在之后移植您的应用程序，您无需太担心。

这些库也遵循现代 C++ 设计，而不是类似 C 的方法。

**编辑：**上面的例子可以用来测量[挂钟时间](http://en.wikipedia.org/wiki/Wall_clock_time)。然而，这并不是衡量程序执行时间的唯一方法。首先，我们可以区分用户时间和系统时间：

*   *用户时间：程序在*[用户空间](http://en.wikipedia.org/wiki/User_space)运行所花费的时间。
*   *系统时间：*程序在系统（或内核）空间中运行所花费的时间。例如，当执行[系统调用](http://en.wikipedia.org/wiki/System_call)时，程序会进入内核空间。

根据目标，可能需要或不需要将系统时间视为程序执行时间的一部分。例如，如果目标只是衡量对用户代码的编译器优化，那么最好省略系统时间。另一方面，如果用户想确定系统调用是否是一个显着的开销，那么也有必要测量系统时间。

此外，由于大多数现代系统是[分时的](http://en.wikipedia.org/wiki/Time-sharing)，不同的程序可能会竞争几个计算资源（例如，CPU）。在这种情况下，可以进行另一种区分：

*   *[挂钟时间](http://en.wikipedia.org/wiki/Wall_clock_time)：*通过使用挂钟时间，程序的执行以与我们使用外部（挂钟）时钟相同的方式测量。这种方法不考虑程序之间的交互。
*   *[CPU 时间](http://en.wikipedia.org/wiki/Process_time)：*在这种情况下，我们只计算程序实际在 CPU 上运行的时间。如果一个程序 (P1) 与另一个程序 (P2) 共同调度，并且我们想要获取 P1 的 CPU 时间，则此方法不包括 P2 运行和 P1 等待 CPU 的时间（而不是挂钟时间方法）。

为了测量 CPU 时间，Boost[包含一组额外的时钟](http://www.boost.org/doc/libs/1_49_0/doc/html/chrono.html#chrono.overview.description.other_clocks)：

*   `process_real_cpu_clock`, 捕获当前进程花费的挂钟 CPU 时间。
*   `process_user_cpu_clock`, 捕获当前进程花费的用户 CPU 时间。
*   `process_system_cpu_clock`, 捕获当前进程花费的系统 CPU 时间。一个类似元组的类`process_cpu_clock`，它一起捕获真实的、用户 CPU 和系统 CPU 进程时间。
*   一个`thread_clock`线程稳定时钟，给出当前线程所花费的时间（当平台支持时）。

不幸的是，C++11 没有这样的时钟。但是 Boost 是一个广泛使用的库，并且这些额外的时钟可能会在某个时候被合并到 C++1x 中。因此，如果您使用 Boost，那么当新的 C++ 标准添加它们时，您将做好准备。

最后，如果您想测量从命令行执行程序所需的时间（而不是在程序中添加一些代码），您可以查看[time](http://unixhelp.ed.ac.uk/CGI/man-cgi?time)命令，正如@BЈовић 建议的那样。然而，这种方法不允许您测量程序的各个部分（例如，执行一个函数所花费的时间）。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-09-08T15:19:48.337

在 C++11 中使用[`std::chrono::steady_clock`](http://en.cppreference.com/w/cpp/chrono/steady_clock)而不是[`std::chrono::system_clock`](http://en.cppreference.com/w/cpp/chrono/system_clock)测量运行时间。原因是（引用`system_clock`的文档）：

> 在大多数系统上，系统时间可以随时调整

而 stable_clock 是单调的，更适合测量间隔：

> 类 std::chrono::steady_clock 表示单调时钟。这个时钟的时间点不能随着物理时间的推移而减少。此时钟与挂钟时间无关，最适合测量间隔。

这是一个例子：

```
auto start = std::chrono::steady_clock::now();
// do something
auto finish = std::chrono::steady_clock::now();
double elapsed_seconds = std::chrono::duration_cast<
  std::chrono::duration<double> >(finish - start).count(); 
```

一个实用的小技巧：如果您正在测量运行时间并且想要报告秒数`std::chrono::duration_cast<std::chrono::seconds>`，那么您很少需要，因为它会为您提供*整数*秒数。要以秒为单位获取时间，`double`请使用上面的示例。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-16T11:03:12.583

您可以使用[时间](http://unixhelp.ed.ac.uk/CGI/man-cgi?time)来启动您的程序。当它结束时，它会打印有关程序运行的漂亮时间统计信息。配置要打印的内容很容易。默认情况下，它会打印执行程序所花费的用户和 CPU 时间。

编辑：请注意，代码中的每个度量都不正确，因为您的应用程序将被其他程序阻止，因此给您错误的值^(*****)。

^(*****通过错误的值，我的意思是很容易获得执行程序所花费的时间，但该时间会根据程序执行期间的 CPU 负载而有所不同。为了获得相对稳定的时间测量，不依赖于 CPU 负载，可以使用[时间](http://unixhelp.ed.ac.uk/CGI/man-cgi?time)执行应用程序并将 CPU 作为测量结果。)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-16T11:02:22.090

我在我的一个项目中使用了这样的东西：

```
#include <sys/time.h>

struct timeval start, end;
gettimeofday(&start, NULL);
//Compute
gettimeofday(&end, NULL);
double elapsed = ((end.tv_sec - start.tv_sec) * 1000) 
        + (end.tv_usec / 1000 - start.tv_usec / 1000); 
```

这是毫秒，它适用于 C 和 C++。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-08-20T07:55:37.923

如果你想用 printf() 打印测量的时间，你可以使用这个：

```
auto start = std::chrono::system_clock::now();
/* measured work */
auto end = std::chrono::system_clock::now();
auto elapsed = std::chrono::duration_cast<std::chrono::milliseconds>(end - start);
printf("Time = %lld ms\n", static_cast<long long int>(elapsed.count())); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-04-02T16:48:33.800

这是我使用的代码：

```
 const auto start = std::chrono::steady_clock::now();

  // Your code here.

  const auto end = std::chrono::steady_clock::now();
  std::chrono::duration<double> elapsed = end - start;
  std::cout << "Time in seconds: " << elapsed.count() << '\n'; 
```

你不想使用`std::chrono::system_clock`，因为它不是单调的！如果用户在您的代码中间更改时间，您的结果将是错误的——它甚至可能是负数。`std::chrono::high_resolution_clock`可能使用实现，`std::chrono::system_clock`所以我也不建议这样做。

此代码还避免了丑陋的演员表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-14T07:21:28.797

您还可以尝试一些自动启动和停止的计时器类，并收集有关在任何代码块中花费的平均、最大和最小时间以及调用次数的统计信息。这些 cxx-rtimer 类在[GitHub](https://github.com/rwpenney/cxx-rtimers)上可用，并支持使用 std::chrono、clock_gettime() 或 boost::posix_time 作为后端时钟源。

使用这些计时器，您可以执行以下操作：

```
void timeCriticalFunction() {
    static rtimers::cxx11::DefaultTimer timer("expensive");
    auto scopedStartStop = timer.scopedStart();
    // Do something costly...
} 
```

在程序完成时将计时统计信息写入 std::cerr。

# html - 切换标签，使它们跳转到页面顶部

> ID：11062808
> 
> 赞同：2
> 
> 时间：2012-06-16T10:57:57.020
> 
> 标签：html, tabs

如果我的滚动更改选项卡 html 如下所示：

```
<a class="cute" onClick="document.getElementById('content').innerHTML=document.getElementById('others').innerHTML" title="OTHERS">OTHERS[/a> 
```

和

```
<div id="others" style="display:none;"> 
```

例如，如果您访问我的博客@http: [//shoppers-insane.blogspot.sg/](http://shoppers-insane.blogspot.sg/)并单击“instocks”然后向下滚动以按，比如说，连衣裙，切换后它不会上到顶部链接！

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:27:39.150

如果您想在单击元素时阻止页面滚动，则需要使用 jQuery click 处理程序返回 false 以防止发生默认操作：

```
<a href="#" id="test1">Do something!</a> 
```

然后使用 jQuery：

```
$('#test1').click(function(e) {
     return false; // prevent default click action from happening!
     e.preventDefault(); // same thing as above
}); 
```

如果您希望页面在单击时滚动到特定元素，您只需将锚点设置为您要滚动到的元素的 id。

```
<a href="#test1">Go to #test1 div</a>

<div id="test1"></div> 
```

# php - get_terms('类别')

> ID：11062811
> 
> 赞同：0
> 
> 时间：2012-06-16T10:58:07.093
> 
> 标签：php, wordpress

我正在尝试使用以下代码使用 get_terms 函数显示类别：

```
$categories = get_terms( 'category');
$categories_count = count($categories);

                    for ($i = 0; $i < $categories_count; $i++) {
                        echo($i . $categories[$i]->name.' <br /> ');
                    } 
```

但是由于某种原因没有显示所有类别，其中一些缺少未分类和其他内容，这是我在运行此代码时在屏幕上看到的内容：

*   0 椅子
*   1
*   2 内饰
*   3
*   4 精选

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:01:36.123

据我所知，您的代码是正确的，但是这将是 get_terms() 中的一个问题，或者这些术语本身实际上没有名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:26:25.873

您可以尝试`get_categories()`代替`get_terms()`. 你应该这样做：

```
<?php 
    $categories = get_categories(); 
    $number = 1;
    foreach ($categories as $category) {
        print $number . $category->cat_name . '<br />';
        $number++;
    }
?> 
```

试一试...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-08T22:33:16.483

要显示标签和/或类别列表：

```
<span>Tags: <?php 
                    global $post;
                    $terms = wp_get_post_terms($post->ID, 'your-taxonomy');
                    if ($terms) {
                        $output = array();
                            foreach ($terms as $term) {
                            $output[] = '<a href="' .get_term_link( $term->slug, 'your-taxonomy') .'\*for CPT please add url suffix /?post_types=your_cpt*\">' .$term->name .'</a>';
                            }
                            echo join( ', ', $output );
                                }
                                        ?>

                <span> 
```

# mysql - 如何将对象（从 MySQL 临时表）返回到 Coldfusion 存储过程？

> ID：11062812
> 
> 赞同：1
> 
> 时间：2012-06-16T10:58:08.767
> 
> 标签：mysql, stored-procedures, coldfusion, resultset, temp-tables

我在 Coldfusion8/MySQL 中调用存储过程，它从产品表中获取 3 种类型的最低和最高价格。

我在将临时表返回给 MySQL 时遇到问题。下面的代码只返回第一个*foundMin*值，而不是临时表本身。

如果我在 MySQL 中运行它，结果是

```
foundmin 1st price > returned to Coldfusion
foundmax 1st price
foundmin 2nd price
foundmax 2nd price
foundmin 3rd price
foundmax 3rd price
temporary table 
```

因此，当我只想要表格时，我将返回所有单独的表格条目和表格。

这是我的代码：

```
BEGIN
    DECLARE filterILN  vARCHAR(100);
    DECLARE localILN   vARCHAR(100);
    DECLARE orderILN   vARCHAR(55);
    #search strings
    DECLARE p_e        vARCHAR(55) DEFAULT 'art.preis_ek';
    DECLARE p_a        vARCHAR(55) DEFAULT 'art.preis_aktuell';
    DECLARE p_r        vARCHAR(55) DEFAULT 'art.rabatt';
    DECLARE strLen     INT DEFAULT 4;
    DECLARE strCount   INT DEFAULT 1;
    DECLARE searchFor  vARCHAR(55);
    DECLARE foundMin     DECIMAL(12,2);
    DECLARE foundMax   DECIMAL(12,2);

    # temp table
    DROP TEMPORARY TABLE IF EXISTS MinMax;
    CREATE TEMPORARY TABLE MinMax (
        price  vARCHAR(50) DEFAULT ''
      , minVal DECIMAL(12,2) DEFAULT 0.00      
      , maxVal DECIMAL(12,2) DEFAULT 0.00    
    ) ENGINE=MEMORY;

    # FILTER 1
    IF param_reference_iln = 'A' THEN SET filterILN = 'B'
    ELSEIF param_reference_iln = 'C' THEN SET filterILN = 'D'
    END IF;

    # FILTER 2
    IF param_filter IS NOT NULL AND param_filter != ""
    THEN SET localILN = CONCAT('AND (iln = "', param_filter, '")');
    ELSE SET localILN = '*';
    END IF;

    # FILTER 3
    IF param_preorder = 'ja'
    THEN SET orderILN = CONCAT('AND vororder = "',param_preorder, '"');
    ELSE SET orderILN = '*';
    END IF;

    #loop over strIDs
    getPrice:
      LOOP
        IF ELT(strCount, p_e, p_a, p_r) = 'art.rabatt'
        THEN SET searchFor = 'art.preis_ek - art.preis_aktuell)/art.preis_ek';
        ELSE SET searchFor = ELT(strCount, p_e, p_a, p_r);
        END IF;

        #min
        SELECT MIN(searchFor) AS foundMin
        FROM artikelstammdaten AS art
           WHERE art.aktiv = "ja"
           AND art.bestand != "0"
           AND filterILN
           AND art.modus = CONCAT('OPEN ', param_unlocked_iln)
           AND localILN
           AND orderILN
           LIMIT 1;
        #max
        SELECT MAX(searchFor) AS foundMax
        FROM artikelstammdaten AS art
           WHERE art.aktiv = "ja"
           AND art.bestand != "0"
           AND filterILN       
           AND art.modus = CONCAT('OPEN ', param_unlocked_iln)
           AND localILN
           AND orderILN
           LIMIT 1;

        # insert into temp table
        INSERT INTO MinMax ( price, minVal, maxVal )
        VALUES( ELT(strCount, p_e, p_a, p_r), foundMin, foundMax );

        # increate counter by 1, end if strLen reached
        SET strCount = strCount+1;
        IF strCount = strLen
        THEN LEAVE getPrice;
        END IF;

      END LOOP getPrice;

    #output table
    SELECT * FROM MinMax;

    #destroy
    DROP TABLE MinMax;

END 
```

这些值被正确计算，并且也插入到它们应该在的临时表中。唯一的问题是上面返回表条目和表。

**问题**：
如何将临时表作为结果集/结构返回，然后我可以在 Coldfusion 中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:23:09.260

IMO 真正的问题是您的 mySQL 过程返回*多个*结果集（不是结构）。虽然这在某些情况下很有用，但您的程序是在无意中这样做的。由于您没有在*CF 代码*中使用这些结果，因此更好的解决方案是消除它们并仅返回一个结果。即没有必要浪费资源来返回您不需要的数据。

您的过程返回多个结果的原因是循环中的 SELECT 语句。每个`SELECT`生成一个单独的结果集（即查询对象）。您可以通过删除这两个语句来消除这些，`SELECT`并将 MIN/MAX 值直接插入到您的临时表中：

```
 INSERT INTO MinMax ( price, minVal, maxVal )
    SELECT ELT(strCount, p_e, p_a, p_r), MIN(searchFor), MAX(searchFor)
    FROM   artikelstammdaten AS art
    WHERE  art.aktiv = "ja"
       AND art.bestand != "0"
       AND filterILN
       AND art.modus = CONCAT('OPEN ', param_unlocked_iln)
       AND localILN
       AND orderILN 
```

然后该过程应生成单个结果集，即`SELECT * FROM MinMax;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:20:06.387

我相信没有任何机制可以让过程/函数返回整个表（TABLE 不是 AFAIK 类型）。另一方面，您可以`SELECT * FROM MinMax`在程序完成后立即从您的应用程序中执行此操作，只要您在同一会话中执行此操作（〜在同一数据库连接上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T12:16:01.830

知道了。我需要像这样在 Coldfusion中使用**结果集属性：**

```
<!--- my stored proc --->
<cfstoredproc procedure="proc_search_select_minmax" datasource="db">
    <cfprocparam type="in" value="#A#" cfsqltype="cf_sql_varchar" maxlength="13">
    <cfprocparam type="in" value="#B#" cfsqltype="cf_sql_varchar" maxlength="13">
    <cfprocparam type="in" value="#C#" cfsqltype="cf_sql_text">
    <cfprocparam type="in" value="#D#" cfsqltype="cf_sql_char" maxlength="4">
    <!--- 7 results (3 min/3 max/temp table, I need to get the 7th resultset --->
    <cfprocresult name="min_max_struct" resultSet=7>
</cfstoredproc> 
```

所以可以从 MySQL 输出一个结构体！你只需要知道它在哪里...

# php - spl_autoload_register 意外的 T_FUNCTION

> ID：11062813
> 
> 赞同：2
> 
> 时间：2012-06-16T10:58:15.037
> 
> 标签：php, api

> **可能重复：**
> [php 5.2.17 的意外 T_FUNCTION 但在 localhost 和 php 5.3.10 上很好](https://stackoverflow.com/questions/10886282/unexpected-t-function-with-php-5-2-17-but-fine-on-localhost-and-php-5-3-10)

我真的不习惯用 PHP 编程，这是我第一次使用 API，所以这就是我调用它的方式（从他们的 wiki 复制/粘贴）

```
spl_autoload_register(function($class) {
    $dir = __DIR__ .'/lib/';
    $file = $dir . strtr($class, '\\', '/') . '.php';
    if (file_exists($file)) {
        require $file;
        return true;
    }
});

use WowApi\Client; 
```

当我在自己的计算机上处​​理 localhost 时，一切正常，我没有收到任何警告，没有错误，一切正常。问题是当我在我的 FTP 上上传它时，我遇到了以下错误：

```
Parse error: syntax error, unexpected T_FUNCTION, expecting ')' 
```

指的是这一行：

```
spl_autoload_register(function($class) { 
```

有人告诉我在我的 .htaccess 中写这个：

```
suPHP_ConfigPath /home/MYUSERNAME/public_html/php.ini 
```

这在我的 php.ini 中

```
safe_mode = OFF 
```

但不幸的是，没有任何效果，我仍然遇到错误。你们知道如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T11:00:32.147

匿名函数来自 php 5.3，请检查您服务器的 php 版本。如果是5.3以下，需要先定义函数。

# ant - 蚂蚁 类型不支持嵌套文本数据（“”）问题

> ID：11062814
> 
> 赞同：6
> 
> 时间：2012-06-16T10:58:25.360
> 
> 标签：ant

嗨，我的 ant 构建脚本片段看起来像这样。

```
<copy todir="${warDir}/WEB-INF/classes">
    <fileset dir="${classdir}" includes="**/*.class" /> 
</copy> 
```

当我对此 build.xml 执行 ant 时收到此错误消息

```
The <copy> type doesn't support nested text data (" "). 
```

有人能指出我使用 Fedora 16 和 ant 发行版 1.7.0 的问题吗

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T06:41:04.387

我弄清楚了这个问题。我

> 复制内容并粘贴在vim编辑器中

，由于编码不可见，有一些垃圾字符。如果在 vim 编辑器中输入整个内容而不复制它就可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-28T20:38:49.743

看起来这是由于解析器遇到了错误的字符。在错误末尾的括号内，它告诉您问题字符是什么。由于复制粘贴错误（在元素末尾引入了分号），我遇到了同样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T13:33:30.323

无法重现您的问题。也许这个错误是针对您构建中的不同**复制任务报告的？**

当您错误地指定了 ANT 任务时，ANT 通常会抛出此错误消息。

例如：

```
 <copy> todir="${warDir}/WEB-INF/classes"
        <fileset dir="${classdir}" includes="**/*.class" />
    </copy> 
```

ANT 不喜欢这样，因为“todir”参数现在位于标记的主体中，而不是被指定为 XML 属性。

# android - 应用程序因“从错误的线程异常调用”而崩溃

> ID：11062818
> 
> 赞同：14
> 
> 时间：2012-06-16T10:58:56.617
> 
> 标签：android, handler, timertask

我在我的方法中添加了这部分代码，`onCreate()`它使我的应用程序崩溃。需要帮忙。

**日志猫：**

```
android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread 
that created a view hierarchy can touch its views. 
```

**代码：**

```
final TextView timerDisplayPanel = (TextView) findViewById(R.id.textView2);

    Timer t = new Timer();
    t.schedule(new TimerTask(){
        public void run(){
            timerInt++;
            Log.d("timer", "timer");
            timerDisplayPanel.setText("Time ="+ timerInt +"Sec");
        }
    },10, 1000); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-16T11:00:46.407

```
Only the UI thread that created a view hierarchy can touch its views. 
```

您正在尝试更改非 UI 线程中 UI 元素的文本，因此它给出了异常。使用`runOnUiThread`

```
 Timer t = new Timer();
 t.schedule(new TimerTask() {
 public void run() {
        timerInt++;
        Log.d("timer", "timer");

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                timerDisplayPanel.setText("Time =" + timerInt + "Sec");
            }
        });

    }
}, 10, 1000); 
```

# java - 错误：卡片标记阵列没有足够的空间

> ID：11062819
> 
> 赞同：2
> 
> 时间：2012-06-16T10:58:57.160
> 
> 标签：java, memory

基本上，我的问题是如果我尝试保留超过 512M 的堆空间，我的 Java 会抛出错误，即使我的 2GB RAM 虚拟服务器上有大约 1.7GB 的可用 RAM。

我将使用 bash 来解释它。我想为我的 Minecraft 服务器保留大约 1024M 的 RAM，该服务器大约在 3 或 4 天前工作，但在我们的主机出现服务器问题后它停止工作。我仍在与房东联系，但他们目前需要时间来回答。

我在这个例子中使用 java -version：

```
root@v0057:~# java -Xmx1024M -version
Error occurred during initialization of VM
Could not reserve enough space for the card marking array 
```

但是，当我这样做时，它会起作用：

```
root@v0057:~# java -Xmx512M -version
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

没有`-Xmx`.

我已经尝试重新安装虚拟服务器和 java，将我的 Java 从 6 升级到 7，并在仅运行系统进程的情况下启动 java 进程。我现在将不胜感激。

服务器在 Debian Squeeze 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:39:17.063

那么 -Xmx 设置最大堆大小。您需要记住，除了堆之外还有 PermGen（和*许多*其他东西）。您还需要记住，java 进程本身将使用一些 RAM。即使您有大约 1.7GB 的空闲空间并且您将 -Xmx 设置为“仅”1GB 并不意味着您实际上将拥有那么多可用的 RAM，因为所有上述内容也会消耗一些（并且有一些 JVM/OS 特定的东西，例如操作系统是否需要连续的内存块来分配对象，当没有 -Xms 时，JVM 是否从 bat 右侧的 -Xmx 开始等等。尽管在 Debian 上所有这些都应该不是问题）。

您可以尝试在客户端模式下运行 java（有趣的是，现代个人计算机足以让 java 默认作为服务器运行）：

```
java -client -Xmx1024M 
```

或者你可以尝试降低`-XX:MaxPermSize`属性。

# javascript - 如何在ajax应用程序中确定浏览器前进或后退

> ID：11062823
> 
> 赞同：1
> 
> 时间：2012-06-16T10:59:09.223
> 
> 标签：javascript, browser-history

我有一个使用 hashbanging 进行导航的 ajax 应用程序，并且我在我的应用程序中跟踪导航堆栈。有没有什么好的方法可以确定用户是按下浏览器中的后退按钮还是只是按下指向相同 url 的链接。

示例：假设用户位于[http://mysite.com/#home](http://mysite.com/#home)，然后按下指向[http://mysite.com/#settings](http://mysite.com/#settings)的链接。这个新的设置页面包含一个指向 http//mysite.com/#home 的链接。我如何确定用户是否按下链接返回主页，或者用户是否按下浏览器上的后退按钮。

由于我在内部跟踪历史堆栈，因此我想知道是否应该推送或弹出堆栈的 url。

一种解决方案是使用计数器或时间戳毒化 url，但最好避免。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:46:33.920

忘记 hashbang 并使用 html5 [pushState](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)。当页面历史改变时，会触发[popState](https://developer.mozilla.org/en/DOM/window.onpopstate)事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:03:29.423

您可以轻松检查用户是否按下了链接：

```
var link = document.getElementById("backLink"), pressedBackLink;
link.addEventListener("click", function() {
    pressedBackLink = true;
    // Do stuff here
}, false);

function hashChange() {
    if (pressedBackLink) {
        pressedBackLink = false;
        // Do other stuff
    }
} 
```

请记住`attachEvent`用于 IE<9。我认为你的链接有 id`"backLink"`并且你的事件监听`haschange`器是 function `hashChange`。

关于后退浏览器按钮，无法确定。用户也可以单击前进或他的历史记录中的任何其他链接，而无需按顺序关注它们。不要在这上面浪费你的时间。

# perl - Blowfish.pm 中的错误 - 输入必须为 8 个字节长

> ID：11062827
> 
> 赞同：1
> 
> 时间：2012-06-16T10:59:52.607
> 
> 标签：perl, blowfish

我正在尝试使用 Perl 的模块加密纯文本[`Crypt::Blowfish`](http://search.cpan.org/perldoc?Crypt%3a%3aBlowfish)。

我的代码是

```
#!/usr/bin/perl
use Crypt::Blowfish;
my $key = pack("H16", "0123456789ABCDEF");
my $cipher = Crypt::Blowfish->new($key);
my $cipher_text = $cipher->encrypt($plain_text); 
```

但它返回错误“”在 Crypt/Blowfish.pm 处输入必须为 8 个字节长”

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:51:21.760

Blowfish 与类似的加密算法一样，加密的是块而不是字节。您需要使用类似[Crypt::CBC](http://search.cpan.org/perldoc?Crypt%3a%3aCBC)的东西来提供填充。

Crypt::CBC 还提供了另外两个非常重要的功能：加盐和链接。没有这些，加密会被严重削弱。

# asp.net-mvc - 未指定类型时在页面中显示文件

> ID：11062828
> 
> 赞同：1
> 
> 时间：2012-06-16T11:00:02.073
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html, razor

当我想显示图像时，我使用这样的东西：

```
public ActionResult Show(int id) {
  var MyFile = GetFromDB(id);
  return File(MyFile.Data, MyFile.ContentType);
} 
```

在视图中：

```
<img alt ="" src='@Url.Action("show", new { id = 36 })'/> 
```

所以假设我们有一些其他类型的文件，比如`txt`, `pdf`, ... 而且我认为使用通用标签来显示所有类型的文件而不是`<img>`. 有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:20:20.410

这并不容易，因为有些文件需要初始化或需要额外的声明来指定它们应该如何呈现，但你可以尝试使用 iframe：

```
<iframe src='@Url.Action("show", new { id = 36 })'></iframe> 
```

它将使用浏览器内置的方式呈现文档。

# javascript - 将值传递给弹出窗口

> ID：11062829
> 
> 赞同：2
> 
> 时间：2012-06-16T11:00:13.963
> 
> 标签：javascript, jquery, html

在这里我遇到了一个问题，我将解释：我在我的网站上设置了一个日历，当我点击这个日历的一个事件时，我打开一个弹出窗口，直到希望它正常工作，我想更改我的弹出窗口的内容通过插入值我的事件。

```
eventClick: function(calEvent, jsEvent, view) {
                z=open('popup.html','','width=400,height=200,toolbar=no,scrollbars=no,resizable=yes,location=0,directories=no,menubar=no,status=no');
                z.document.getElementById('test').append(toto);
              }, 
```

在我上面正确打开弹出窗口的代码我通过“popup.html”创建了一个新文件。

最后一行不适用于...

```
z.document.getElementById('test').append(toto); 
```

我的弹出窗口的 HTML 文件中有一个 ID 为“test”的元素。我还尝试从我的脚本中生成弹出窗口，我在正确传输我想在弹出窗口中显示的信息中得到了这个解决方案不幸的是我没有找到风格化弹出窗口的解决方案

```
w=open("",'popup','width=400,height=200,toolbar=no,scrollbars=no,resizable=yes');  
w.document.write("<TITLE>"+document.forms[0].elements["titre"].value+"</TITLE>");
w.document.write("<BODY> Hello"+document.forms[0].elements["nom"].value+"<BR><BR>");
w.document.write("this popup work");
w.document.write("</BODY>");
w.document.close(); 
```

你有解决我/我的问题的方法吗？提前谢谢你，下午好，诚挚的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:06:27.000

你真的想要一个新窗口吗？或者你只想要一个模式，比如[jQuery.UI 对话框](http://jqueryui.com/docs/dialog/)？为了使用后者，您通常准备一个`<div>`，例如

```
var myDialog = $("#toto"); 
myDialog.dialog({ autoOpen: false }); 
```

并使用`myDialog.dialog('open')`打开它。请注意，这将从`#toto`其父级中删除。如果您不希望这种行为尝试`var myDialog = $("#toto").clone()`。

然后，您可以使用[jQuery css 方法](http://api.jquery.com/category/css/)设置新对话框的样式。

# java - MySQL：如何根据工作记录申请付款

> ID：11062836
> 
> 赞同：0
> 
> 时间：2012-06-16T11:01:19.040
> 
> 标签：java, mysql, database, user-interface

我在 MySQL 数据库中有两个表：jobs 和 payment。我想通过 Java GUI Swing Form 单独处理每个工作的付款。但我不确定如何使用 jobID 搜索相应的工作来支付。因此，欢迎任何支持编码，并将有很大帮助。

这是我的表格的结构。

```
Table:   Jobs  
Columns: JobID,  CustomerID,  StartDate,  JobPriority, JobStatus
         , EndDate, NumberOfTasks, Payment 

Table:     Payment 
Columns:   JobID, paymenttype, amount, card details 
```

我想提取工作信息并仅在未支付且工作状态为“完成”时才显示它。然后通过现金卡等接受付款细节。下面是另一个部分的代码片段来演示。我想创建类似的东西，但改用 jobID。即传入一个工作ID并找到工作详细信息。

```
public void updateAccountName(String name, String phone, String address, String number)throws SQLException{
    String qry = "UPDATE CustomerAccount SET AccountName = \""+name+
                   "\", Address = \""+address+
                   "\", Phone = \""+phone+
                   "\" WHERE AccountNumber= \"" +number + "\"";

    Connection con = null;
    PreparedStatement stmt = null;

    try{
        con = DriverManager.getConnection("URL");
        stmt = con.prepareStatement(qry);
        stmt.executeUpdate();

    } finally{
        if (stmt != null) try{ stmt.close();} catch (SQLException se) {}
        if (con != null) try{ con.close();} catch (SQLException se) {}
    }
    notifyListeners();
} 
```

# iphone - 在 iPhone 中单击按钮导航到新页面

> ID：11062837
> 
> 赞同：0
> 
> 时间：2012-06-16T11:01:25.267
> 
> 标签：iphone, animation, navigation, uibutton, buttonclick

我是 iPhone 开发人员的新手。

我想用动画导航到新页面，但我无法导航到新页面，

这是我的代码片段，

```
UIButton *Planbtn = (UIButton *)[self.view viewWithTag:1];
    [Planbtn addTarget:self action:@selector(btnClicked) forControlEvents:UIControlEventTouchUpInside]; 
```

..

```
-(void)btnClicked{
    NSLog(@"btnClicked");

    PlanPage *yourViewController = [[PlanPage alloc] initWithNibName:@"PlanPage" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:yourViewController animated:TRUE];
    [yourViewController release];
} 
```

我可以`btnClicked`在我的日志中看到。

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:24:31.767

作为基于您的应用程序视图，您无法推送控制器，最简单的做法是：

```
PlanPage *yourViewController = [[PlanPage alloc] initWithNibName:@"PlanPage" bundle:[NSBundle mainBundle]];
[self.view addSubView:yourViewController.view];
[yourViewController release]; 
```

如果你想动画，恐怕你要么自己实现动画，要么添加一个导航控制器来为你完成这项工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:31:05.713

将这些属性写入`AppDelegate.h`文件

```
@property (strong, nonatomic) YourFirstViewController *yourFirstController;
@property (nonatomic, retain) UINavigationController *navigationControl; 
```

将此代码写入`AppDelegate.m`文件

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {

        self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
        self.yourFirstViewController = [[YourFirstViewController alloc] initWithNibName:@"YourFirstViewController" bundle:nil]];
        navigationController = [[UINavigationController alloc] initWithRootViewController:self.yourFirstViewController];
        [self.window addSubview:[navigationController view]];
        [self.window makeKeyAndVisible];
        return YES;
    } 
```

我想这会对你有所帮助。

# jquery - 跨浏览器添加/删除 MediaElementJS 视频

> ID：11062838
> 
> 赞同：0
> 
> 时间：2012-06-16T11:01:26.577
> 
> 标签：jquery, firefox, mediaelement.js

我正在使用 MediaElementJS [http://mediaelementjs.com/](http://mediaelementjs.com/) ，所以我可以在 IE6+ 等浏览器上播放 mp4 视频。

我想要它，这样视频最初是不可见的，然后它会弹出并可以隐藏，然后可能会回来，从头开始重播。

可能的方法包括最初隐藏视频然后显示它，然后再次隐藏它......

或动态创建视频对象然后删除它，然后创建一个新的视频对象...

一个版本：http: [//vc4hp.net/vidtest/test5.php](http://vc4hp.net/vidtest/test5.php)

iPad：好的，IE9：好的，Chrome：好的

Firefox：“显示”必须按两次并且没有声音。[http://vc4hp.net/vidtest/test5f.php](http://vc4hp.net/vidtest/test5f.php)最初显示视频而不是隐藏视频（并且禁用自动播放）。如果您立即播放视频（您需要按“显示”），声音会起作用。如果你隐藏然后显示然后播放它，声音不起作用。

IE6-IE8：需要按两次“显示”...如果延迟太短，要么没有播放视频，要么出现有声音的黑屏。如果延迟足够，则视频可以正常播放。（我无法让它显示视频的图形，同时只需要按一次“显示”）

```
$(document).ready(function(){
    $('#videocontainer').hide();
    $("#show").click(function () { 
        $('#videocontainer').show('slow');
        if (nativeMP4) {
            $('#player1').attr('src','comm5intro.mp4');
        }
        else {
            if (my_media.length > 0) {
                my_media[0].setSrc('comm5intro.mp4');
                my_media[0].play();
            }
        }        
    });    
    $("#hide").click(function () { 
        $('#videocontainer').hide('slow');
        if (nativeMP4) {
            $('video')[0].pause();
        }
        else {
            if (my_media.length > 0) {
                my_media[0].pause();
            }
        }        
    });        
}); 
```

由于 Firefox 没有声音的问题，我尝试了一种不同的方法 - 创建和销毁视频对象：

[http://vc4hp.net/vidtest/test11.php](http://vc4hp.net/vidtest/test11.php)

iPad：好的（“显示”使视频出现[当然不会自动播放]，“隐藏”使视频消失等）

IE9：第一次按“显示”和“隐藏”工作。第二次按“显示”同时播放两个视频，当您按“隐藏”时这些视频不会被删除

Firefox：“显示”使视频出现，“隐藏”不做任何事情。

Chrome：“显示”通常会导致回显 - 即使检测到原生 MP4 支持是为了防止播放第二个版本，也可能正在播放两个视频。“隐藏”会停止回声，这意味着其他视频仍在播放。

IE6-IE8：与 Firefox 一样，“Show”会显示另一个视频并开始播放。“隐藏”什么都不做。

```
$(document).ready(function(){
    $("#show").click(function () { 
        $('#videocontainer').append('<video id="player1" width="640" height="460" src="comm5intro.mp4" type="video/mp4" controls="controls" autoplay="true"></video>');
        var v = document.createElement('video'); 
        if (v.canPlayType && v.canPlayType('video/mp4').replace(/no/, '')) { 
            // native MP4 support
            alert('Native MP4 Support');
        } 
        else {
            $('#videocontainer video').mediaelementplayer({features: ['playpause','progress','volume']});
        }
    });    
    $("#hide").click(function () { 
        $('#videocontainer video').remove();
    });    
}); 
```

我希望这些方法中的一种或两种能够在尽可能多的浏览器中正常工作。

这是一个可以在我检查的所有浏览器中正确播放视频的版本...

[http://vc4hp.net/vidtest/test.html](http://vc4hp.net/vidtest/test.html)

虽然按钮似乎在 IE7 和 IE8 中不起作用。

这是主要文件的 zip.... [http://vc4hp.net/vidtest/mediaelementjs.zip](http://vc4hp.net/vidtest/mediaelementjs.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:32:56.903

我找到了一个适用于我测试过的所有浏览器的解决方案，而且非常简单：

[http://vc4hp.net/vidtest/iframe1.html](http://vc4hp.net/vidtest/iframe1.html)

基本上它使用 iframe，并且可以使用 jquery 动画显示和隐藏。

# android - 在android中检查互联网连接的最佳方法

> ID：11062840
> 
> 赞同：3
> 
> 时间：2012-06-16T11:01:44.907
> 
> 标签：android, networking, connectivity

我正在开发一个`android`应用程序，我想知道检查互联网连接是否存在的最佳方法。我尝试过使用`connectivity manager`和`networkinfo`上课，但无济于事，因为我的应用程序在没有网络的情况下不断崩溃，否则我会去`HttpConnection`方法。有人可以提出宝贵的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:10:08.540

```
 URL myurl = new URL(url);
    URLConnection connection = myurl.openConnection();
    connection.setConnectTimeout(20 * 1000);
    HttpURLConnection httpConnection = (HttpURLConnection) connection;
    int responseCode = -1;
    try {
        responseCode = httpConnection.getResponseCode();
    } catch (Exception e1) {                    
            throw e1;                   
    }
    if (responseCode == HttpURLConnection.HTTP_OK) {
          //connection is OK and do what you want
          //...
    }
    else
    {
          //connection is not OK
          httpConnection.disconnect();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T11:08:48.520

这是一个古老的问题，但我正在做的是在这里回答以使其对其他人也有用。创建一个如下所示的类：

```
public class ConnectionDetector {

    private Context context;

    public ConnectionDetector(Context context) {
        this.context = context;
    }

    public boolean isConnectedToInternet() {

        ConnectivityManager connectivity = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity != null) {
            NetworkInfo[] info = connectivity.getAllNetworkInfo();
            if (info != null)
                for (int i = 0; i < info.length; i++)
                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                        return true;
                    }

        }
        return false;
    }
} 
```

`method`然后像这样调用类`activity`来检查连接：

```
 if(new ConnectionDetector(context).isConnectedToInternet()){
   //Connected 
   //do what you want to do here
 } else{
   // Not connected
   // show appropriate message
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T23:15:31.613

Udacity 优秀的 Advanced Android App Development 课程使用 getActiveNetworkInfo()

[https://www.udacity.com/course/advanced-android-app-development--ud855](https://www.udacity.com/course/advanced-android-app-development--ud855)

```
/**
 * @param context Context used to get the ConnectivityManager
 * @return true if network has connectivity (i.e. is reachable), else return false
 */
static public boolean isNetworkAvailable(Context context) {
    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return ((activeNetworkInfo != null)
            && activeNetworkInfo.isConnectedOrConnecting());
} 
```

顺便说一句：Clairvoyant 的好答案使用了 getAllNetworkInfo，现在在 API 级别 23 中已弃用。

Android 文档说使用 getAllNetworks() 和 getNetworkInfo(android.net.Network) 代替。

[http://developer.android.com/reference/android/net/ConnectivityManager.html#getAllNetworkInfo()](http://developer.android.com/reference/android/net/ConnectivityManager.html#getAllNetworkInfo())

我更新了 Clairvoyant 的方法如下并使用它，直到我看到上面 Udacity 的更简单的 isNetworkAvailable 方法。

```
/**
 * @return true if network has connectivity (i.e. is reachable), else return false
 */
boolean hasConnectivity(Context context) {
    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

    if (connectivityManager != null) {
        Network[] networks = connectivityManager.getAllNetworks();
        if ((networks != null)
                && (networks.length > 0)) {
            for (Network network : networks) {
                NetworkInfo info = connectivityManager.getNetworkInfo(network);
                if (info.getState() == NetworkInfo.State.CONNECTED) {
                    return true;
                }
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T15:24:00.297

我建议您检查异常以指定发生了什么错误，您可以根据错误提示用户。

```
try {
    URL url = new URL("https://google.com");
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setConnectTimeout(10000);
    connection.connect();
    success = connection.getResponseCode() == 200;
} catch (IOException e) {
    //use the function here
    onError(this,e);
}

public void onError(Activity activity,Throwable e){
        try {
            e.printStackTrace();
            FirebaseCrash.report(e);

            if (e instanceof HttpException) {
                Response body = ((HttpException) e).response();
                if (body.code() == 401) {
                    Toast.makeText(activity, "Not Authorized Access", Toast.LENGTH_SHORT).show();
                } else if (body.code() == 404) {
                    Toast.makeText(activity, "Request not found", Toast.LENGTH_SHORT).show();
                } else if (body.code() == 400) {
                    Toast.makeText(activity, "Bad Request", Toast.LENGTH_SHORT).show();
                } else if (body.code() == 500) {
                    Toast.makeText(activity, "Internal Server Error", Toast.LENGTH_SHORT).show();
                } else {
                    Log.e(Constants.TAG, "Error : Code HTTP = " + body.code());
                }
            }else if(e instanceof ConnectException || e instanceof SocketException){
                Toast.makeText(activity, "No Internet Connection", Toast.LENGTH_SHORT).show();
            } else if (e instanceof UnknownHostException) {
                Toast.makeText(activity, "Make Sure Your Internet Connection is Properly Connected", Toast.LENGTH_SHORT).show();
            } else if (e instanceof SSLHandshakeException || e instanceof SSLPeerUnverifiedException) {
                Toast.makeText(activity, "Server Connection Problem..Please Try Again", Toast.LENGTH_SHORT).show();
            } else {
                Toast.makeText(activity, "Data Load Error", Toast.LENGTH_SHORT).show();
            }
        }
        catch (Exception ex){
            FirebaseCrash.report(e);
            e.printStackTrace();
        }
    } 
```

# c# - 从窗体应用程序 c# 启动停止服务

> ID：11062841
> 
> 赞同：41
> 
> 时间：2012-06-16T11:01:53.240
> 
> 标签：c#, .net, windows-services

如何从 ac# Form 应用程序启动和停止 Windows 服务？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-16T11:07:02.863

添加对`System.ServiceProcess.dll`. 然后您可以使用[ServiceController](http://msdn.microsoft.com/en-us/library/yb9w7ytd)类。

```
// Check whether the Alerter service is started.
ServiceController sc  = new ServiceController();
sc.ServiceName = "Alerter";
Console.WriteLine("The Alerter service status is currently set to {0}", 
                   sc.Status.ToString());

if (sc.Status == ServiceControllerStatus.Stopped)
{
   // Start the service if the current status is stopped.
   Console.WriteLine("Starting the Alerter service...");
   try 
   {
      // Start the service, and wait until its status is "Running".
      sc.Start();
      sc.WaitForStatus(ServiceControllerStatus.Running);

      // Display the current service status.
      Console.WriteLine("The Alerter service status is now set to {0}.", 
                         sc.Status.ToString());
   }
   catch (InvalidOperationException)
   {
      Console.WriteLine("Could not start the Alerter service.");
   }
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-16T11:09:03.153

首先添加对 System.ServiceProcess 程序集的引用。

开始：

```
ServiceController service = new ServiceController("YourServiceName");
service.Start();
var timeout = new TimeSpan(0, 0, 5); // 5seconds
service.WaitForStatus(ServiceControllerStatus.Running, timeout); 
```

停止：

```
ServiceController service = new ServiceController("YourServiceName");
service.Stop();
 var timeout = new TimeSpan(0, 0, 5); // 5seconds
service.WaitForStatus(ServiceControllerStatus.Stopped, timeout); 
```

这两个示例都显示了如何等待服务达到新状态（正在运行、已停止...等）。WaitForStatus 中的 timeout 参数是可选的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T11:05:23.283

你可以这样做，[服务控制器的详细信息](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)

```
ServiceController sc = new ServiceController("your service name");
if (sc.Status == ServiceControllerStatus.Stopped)
{
  sc.Start();

} 
```

同样，您可以停止使用 stop 方法

```
 sc.Stop(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-16T11:09:19.233

有一个更脏，但相同的..
只需执行shell命令

```
NET STOP "MYSERVICENAME"
NET START "MYSERVICENAME" 
```

编辑：想扩展“更脏”：
1.速度较慢。
2\. 这可能会导致一些巧妙的漏洞
3\. 这是一个无法“理解”的代码
4\. 它是高度不可移植的（如果你使用 .NET Core 肯定会这样）

我敢肯定它还有更多问题...
但是如果您搜索小型内部工具...就可以了。
（想说暂时的，但临时的东西最好！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-19T11:06:15.727

```
// Check whether the U-TEST RTC service is started.
        ServiceController sc = new ServiceController();
        sc.ServiceName = "U-TEST RTC";
        m_objMainChainRTC.m_objUC.ValidationLogMessages(String.Format(LocalizeDictionary.Instance.GetLocalizedValue("MsgStatusService"), sc.Status.ToString()), Alstom.Automation.Forms.ViewModels.RTCAutomationViewModel.ColorLog.Log);

        if (sc.Status == ServiceControllerStatus.Stopped)
        {
            m_objMainChainRTC.m_objUC.ValidationLogMessages(String.Format(LocalizeDictionary.Instance.GetLocalizedValue("MsgStartService")), Alstom.Automation.Forms.ViewModels.RTCAutomationViewModel.ColorLog.Log);
            try
            {
                // Start the service, and wait until its status is "Running".
                sc.Start();
                var timeout = new TimeSpan(0, 0, 5); // 5seconds
                sc.WaitForStatus(ServiceControllerStatus.Running, timeout);
                m_objMainChainRTC.m_objUC.ValidationLogMessages(String.Format(LocalizeDictionary.Instance.GetLocalizedValue("MsgNowService"), sc.Status.ToString()), Alstom.Automation.Forms.ViewModels.RTCAutomationViewModel.ColorLog.Log);
            }
            catch (InvalidOperationException)
            {
                m_objMainChainRTC.m_objUC.ValidationLogMessages(String.Format(LocalizeDictionary.Instance.GetLocalizedValue("MsgExceptionStartService")), Alstom.Automation.Forms.ViewModels.RTCAutomationViewModel.ColorLog.Log);
            }
        } 
```

# java - 如何应对 ConcurrentModificationException？

> ID：11062843
> 
> 赞同：0
> 
> 时间：2012-06-16T11:01:54.697
> 
> 标签：java, for-loop, concurrentmodification

如果有以下问题：我有一个列表，我正在使用增强的 for 循环。每次我想从列表中删除某事时，我都会得到一个 ConcurrentModificationException。我已经知道为什么会抛出这个异常，但我不知道如何修改我的代码，以便它工作。这是我的代码：

```
for(Subject s : SerData.schedule)
    {
        //Checking of the class is already existing
        for(Classes c : s.classes)
        {
            if(c.day == day &c.which_class == which_class)
            {
                int index = getclassesindex(s.classes, new Classes(day, which_class));
                synchronized (s) {
                    s.classes.remove(index);

                }
            }
        }
            //More code....
    } 
```

我也尝试了这个实现。

```
for(Subject s : SerData.schedule)
    {
        //Checking of the class is already existing
        Iterator<Classes> x = s.classes.iterator();
        while(x.hasNext())
        {
            Classes c = x.next();
            if(c.day == day &c.which_class == which_class)
            {
                int index = getclassesindex(s.classes, new Classes(day, which_class));
                synchronized (s) {
                    s.classes.remove(index);
                }
            }
        }
        //More code....
    } 
```

也不工作...

是否有常用的标准解决方案？（希望……这并不明显：D）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:18:08.777

出现此问题的主要原因是您的 for-each 循环的语义。

使用 for-each 循环时，**无法**修改正在遍历的数据结构。

基本上这种形式的任何东西都会抛出这个异常：

```
for( Object o : objCollection )
{
    // ...
    if ( satisfiesSomeProperty ( o ) )
       objList.remove(o);    // This is an error!!
    // ...
} 
```

作为旁注，您也不能添加或替换集合中的元素。

有几种方法可以执行此操作。

一种方法是使用迭代器并在`remove()`要删除对象时调用该方法。

```
Iterator <Object> objItr = objCollection.iterator();

while(objItr.hasNext())
{
    Object o = objItr.next();
    // ...
    if ( satifiesSomeProperty ( o ) )
        objItr.remove();    // This is okay
    // ...
} 
```

`remove`这个选项的特性是对象的移除是在与迭代器的方法成比例的时间内完成的。

下一个选项是存储要删除的对象，然后在遍历列表后将其删除。这在迭代期间删除可能产生不一致结果的情况下可能很有用。

```
Collection <Object> objsToRemove = // ...
for( Object o : objCollection )
{
    // ...
    if ( satisfiesSomeProperty ( o ) )
       objsToRemove.add (o);
    // ...
}
objCollection.removeAll ( objsToRemove ); 
```

这两种方法适用于一般`Collection`类型，但对于列表，您可以使用标准的 for 循环并将列表从列表末尾移到前面，删除您喜欢的内容。

```
for (int i = objList.size() - 1; i >= 0; i--)
{
    Object o = objList.get(i);
    // ...
    if ( satisfiesSomeProperty(o) )
       objList.remove(i);
    // ...
} 
```

也可以沿正常方向行走并移除，但您必须注意增量是如何发生的；具体来说，您不想`i`在删除时增加，因为下一个元素会向下移动到相同的索引。

```
for (int i = 0; i < objList.size(); i++)
{
    Object o = objList.get(i);
    // ...
    if ( satisfiesSomeProperty(o) )
    {
       objList.remove(i);
       i--;
    }

    //caveat: only works if you don't use `i` later here
    // ...
} 
```

希望这可以很好地概述这些概念并有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:12:32.183

使用`Iterator.remove()`应该防止异常被抛出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:14:00.820

嗯，如果我做对了，你是在迭代一个类的集合，如果给定的类符合某些条件，你正在寻找它的索引并尝试删除它？

为什么不这样做：

```
Iterator<Classes> x = s.classes.iterator();
while(x.hasNext()){
    Classes c = x.next();
    if(c.day == day && c.which_class == which_class) {
        x.remove();
    }
} 
```

如果需要，添加同步（但如果我是你，我更喜欢并发集合），最好将“==”更改为 equals()，添加 getter/setter 等。java 中的约定是使用 camelCase 命名变量和方法（而不是用“_”分隔它们）。

实际上，这是您*必须*使用迭代器的情况之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T11:10:34.553

一般来说，对于子类没有通用的解决方案`Collection`——如果集合被修改，大多数迭代器将变得无效，*除非*修改通过迭代器本身通过[`Iterator.remove()`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#remove%28%29).

*在实现方面*有一个潜在的解决方案[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)：`List`接口具有基于索引的[添加](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)/[获取](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get%28int%29)/[设置](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#set%28int,%20E%29)/[删除](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove%28int%29)操作。`Iterator`您可以使用基于计数器的循环显式地遍历列表，而不是使用实例，就像使用数组一样。但是，您应该注意在插入或删除元素时适当地更新循环计数器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T11:13:45.560

来自 ConcurrentModificationException 的 javadoc：

“如果线程在使用快速失败迭代器迭代集合时直接修改集合，则迭代器将抛出此异常。”

所以在你的 for (Classes c : s.classes)

你正在执行 s.classes.remove(index)

并且迭代器正在做它的合同所说的。在循环外的范围内声明索引，并在循环完成后删除您的目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T11:14:39.387

```
Iterator<Classes> classesIterator = s.classes.iterator();
while (classesIterator.hasNext()) {
    Classes c = classesIterator.next();
    if (c.day == day && c.which_class == which_class) {
        classesIterator.remove();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-16T12:49:31.013

您的 for-each 迭代器是快速失败的，这就是删除操作失败的原因，因为它会在遍历集合时更改集合。

您正在使用 List 接口的什么实现？注意到主题上的同步，您是否同时使用此代码？

If concurrency is the case, then I would recommend using [CopyOnWriteArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html). It doesn't need synchronisation and its for-each iterator doesn't throw ConcurrentModificationException.

# php - Yii，在 cgridview(table) 值中显示工具提示

> ID：11062852
> 
> 赞同：6
> 
> 时间：2012-06-16T11:03:42.013
> 
> 标签：php, yii

我想在 cgridview 值中显示工具提示，因为它必须显示存储在变量中的整个内容。我想将变量 $data["comment"] 中的 contant 显示为工具提示 ( title )，目前它将整个字符串显示为 - $data["comment"]。

```
 array(
                        'name'=>'Comment',
                        'header'=>'Comment',
                        'value'=>'(strlen($data["comment"])>35)?substr($data["comment"], 0, 35)."..":$data["comment"];',
                        'htmlOptions'=>array('title'=>'$data["comment"]'),  // this what i have do
                    ), 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T15:08:48.927

试试这个：

```
array(
    'name'=>'Comment',
    'header'=>'Comment',
    'type'=>'raw',
    'value'=>'( strlen($data["comment"]) > 35
        ? CHtml::tag("span", array("title"=>$data["comment"]), CHtml::encode(substr($data["comment"], 0, 35)) . "..")
        : CHtml::encode($data["comment"])
    );',
), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:22:34.313

您可能需要为您的列构建一个自定义[CGridColumn](http://www.yiiframework.com/doc/api/1.1/CGridColumn)类，然后构建一个支持表达式的标题。

我会查看 Yii 网站上扩展区域中可用的列以获取想法： [http ://www.yiiframework.com/extensions/?tag=column](http://www.yiiframework.com/extensions/?tag=column)

这两个列都做了类似的事情（我已经使用并覆盖了它们），所以你应该能够接受他们的想法并简单地制作你自己的列类： [http](http://www.yiiframework.com/extension/jtogglecolumn/) ://www.yiiframework.com/extension/jtogglecolumn/ http://www.yiiframework.com/extension/gridcolumns/

# java - 如何在 AJAX 应用程序中检测 Java 及其版本

> ID：11062856
> 
> 赞同：3
> 
> 时间：2012-06-16T11:05:06.613
> 
> 标签：java, jquery, ajax, detect

我正在开发带有 jquery、jqueryui、ajaxify 和许多 jquery 扩展的网络应用程序。在应用程序的某个时刻，我必须使用 Java 小程序。小程序通过 ajax 调用运行，假设 jquery.load 加载生成小程序代码的页面。然后我想检测运行该应用程序的计算机上是否安装了 Java，以及它是否是 1.7+ 版本。仅当要使用小程序时才应进行检测，因为此功能仅供有限数量的用户使用，并且仅在某些情况下使用。

我不能使用 deploy.js，因为这个脚本不是为通过 ajax 调用运行而设计的，而且只是失败了。我只想在它真正需要的时候检测java，即当用户要启动小程序时。

我怎样才能做到这一点？

我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:14:58.010

无论如何，您都应该使用[Java Deployment Toolkit 。](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html)当我需要一些特定的检查时，我打开 java_deploy.js 并查看它是如何工作的。这并不难理解，真的。例如，在 Chrome 中它只是插入一个特定的****带有某些uid**的标签。没什么复杂的。然后我只是手动执行代码。**

 **在 deploy.js 结束时，它只是在页面加载后启动 Java 检查。一种方法调用。我刚刚删除了这段代码并在我自己的代码中手动启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:46:03.023

最后我找到了一种方法来检测是否安装了java。起初我尝试使用 navigator.javaEnabled()，但它在 IE 中无法正常工作。然后我尝试了 Java 部署工具包，但由于 window.write 与通过 ajax 获取的页面不兼容而没有成功。然后我尝试按照 odiszapc 的建议自定义 Java 部署工具包……但到最后我使用了未修改的 Java 开发工具包，只是使用了它的 versionCheck 方法。

如果未检测到 java，则通知用户下载并安装 JRE，并提供链接。如果安装了正确版本的 Java，则子页面将通过参数 javaOK=1 的 ajax 重新加载。这种情况下没有java检测，只有纯applet标签，简而言之：

```
 $SuccessUrl = FileName . "?javaOK=1&" . $_SERVER['QUERY_STRING'];   
    (...)
    $java_detect=EOQ (heredoc shoud be here, some tags don't work)

        var version = '1.7'; //required version

        var check = deployJava.versionCheck(version+"+"); //1.7 and higher
        if(!check){ 
          $("#sign_dialog").html("$java_err"); //wrong java or no java at all
        }else{
          $("#sign_dialog").load("$SuccessUrl");
        }

    EOQ;
    (...)
        if(isset($_GET['javaOK']) && $_GET['javaOK']=='1'){
          echo $applet;
        }else{
          echo $java_detect;
        } 
```**

# python - 修复此 ListCtrl 的布局

> ID：11062864
> 
> 赞同：0
> 
> 时间：2012-06-16T11:06:31.747
> 
> 标签：python, wxpython, responsive-design

我知道有很多设置布局的设置。这是`ListCtrl`水平尺寸器内的固定尺寸。

![在此处输入图像描述](../Images/d280c2568ccf41871d9dbd80bad8aff2.png)

这个绝对大小要么显示剩余空间，要么太小，具体取决于列数。

绘制 a 的布局命令是`ListCtrl`什么？

如何使`ListCtrl`响应更灵敏，以便：

*   一目了然地显示来自多列的数据，无需调整大小
*   在不同的 GUI 和调整大小时不会变坏

* * *

托管列表的面板的代码清单：

```
class CalcPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

        self.lc = wx.ListCtrl(self, -1, size=(200,200), style=wx.LC_REPORT)
        self.lc.InsertColumn(0, 'State')
        self.lc.InsertColumn(1, 'Capital')
        #self.lc.SetColumnWidth(0, 140)
        #self.lc.SetColumnWidth(1, 153)
    #self.list_ctrl.Show()

        self.sizer = wx.BoxSizer(wx.HORIZONTAL)

        btn = wx.Button(self, label="Add Line")

        self.sizer.Add(btn)
        self.sizer.Add(self.lc, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.SetSizer(self.sizer)
        self.Fit()

    def InitUI(self):
    pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:20:59.097

你看过[`wx.lib.mixins.listctrl.ListCtrlAutoWidthMixin`](http://wxpython.org/docs/api/wx.lib.mixins.listctrl.ListCtrlAutoWidthMixin-class.html)吗？

如果您继承自`wx.lib.mixins.listctrl.ListCtrlAutoWidthMixin`as well ，并在您的方法中`wx.ListCtrl`调用类，则最后一列将使用 resize 事件自动调整大小`__init__``__init__`

您还可以更改自动调整大小的列`setResizeColumn`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:32:28.047

我提交了一个完全错误的答案，因为我没有很好地阅读这个问题。为了弥补这个错误，我做了一些研究，我认为我有一个可行的答案。

检查`wx.ListCtrl` [API](http://wxpython.org/docs/api/wx.ListCtrl-class.html)，我发现了一种`SetColumnWidth(self, col, width)`我认为完全符合您要求的方法。

你说你`wx.ListCtrl`的是固定宽度？在这种情况下...

```
lcWidth = 200
lcHeight = 200

self.lc = wx.ListCtrl(self, -1, size=(lcWidth,lcHeight), style=wx.LC_REPORT)
self.lc.InsertColumn(0, 'State')
self.lc.InsertColumn(1, 'Capital')

stateWidth = self.lc.GetColumnWidth(0)
self.lc.SetColumnWidth(1, (lcWidth - stateWdith)) 
```

顺便说一句，如果您希望`wx.ListCtrl`保持固定大小，则应从调用中删除该`wx.GROW`标志。将调整项目的大小以填充所有可用空间，而不是您想要的。`self.sizer.Add()``wx.GROW`

```
self.sizer.Add(self.lc, 1, wx.LEFT | wx.TOP) 
```

如果您`wx.ListCtrl`不是固定宽度，则可以声明一个自定义`wx.ListCtrl`来相应地处理此调整大小

```
class ResizingColListCtrl (wx.ListCtrl):
    def __init__(self, *args, **kwargs):
        wx.ListCtrl.__init__(self, *args, **kwargs)

        self.sizeColumns()

        self.Bind(EVT_SIZE, self.sizeColumns)

    def sizeColumns(event=None)
        width = self.GetSize()[0]
        numCols = self.GetColumnCount()

        for i in range(numCols):
             self.SetColumnWidth(i, width/numCols) #set your column width to whatever proportions you want

        if event:
            event.Skip() #since this is a wx.EVT_SIZE, this line is important 
```

据我所知，wxPython 本身并没有这个功能。

# vba - 隐藏行的 Excel VBA 优化

> ID：11062866
> 
> 赞同：1
> 
> 时间：2012-06-16T11:07:09.803
> 
> 标签：vba, optimization, excel

我有一个遍历某些行的宏，以更新相关图表中数据点的颜色。这些行可以被用户隐藏，所以它检查隐藏的值，即

```
Do While wsGraph.Cells(RowCounter, 1) <> ""
    If wsGraph.Rows(RowCounter).Hidden = False Then
        'code here
    End If
    RowCounter = RowCounter + 1
Loop 
```

此代码需要 69 秒才能运行。如果我对隐藏行进行测试，则需要 1 秒才能运行。

有没有更好的方法来做这个测试，否则我将不得不告诉用户他们不能使用隐藏功能（或处理 69 秒的延迟）。

谢谢

* * *

根据要求，这是完整的代码。

该图是条形图，我根据特定范围内的值对点进行着色，例如：超过 75% = 绿色，超过 50% = 黄色，超过 25% = 橙色，否则为红色。表单上有一个按钮可以重新着色图表，执行此代码。

如果有人过滤数据表，发生的情况是这样的：假设前 20 行超过 75%，并且最初是绿色的。过滤表格后，说只有前 5 个超过 75%。该图仍将前 20 个显示为绿色。所以这个带有宏的按钮会重新着色条。

```
' --- set the colour of the items
Dim iPoint As Long
Dim RowCounter As Integer, iPointCounter As Integer
Dim wsGraph As Excel.Worksheet
Set wsGraph = ThisWorkbook.Worksheets(cGraph5)
wsGraph.ChartObjects("Chart 1").Activate
' for each point in the series...
For iPoint = 1 To UBound(wsGraph.ChartObjects("Chart 1").Chart.SeriesCollection(1).Values)
    RowCounter = 26
    iPointCounter = 0
    ' loop through the rows in the table
    Do While wsGraph.Cells(RowCounter, 1) <> ""
        ' if it's a visible row, add it to the counter, if it's the same counter as in the series, exit do
        If wsGraph.Rows(RowCounter).Hidden = False Then
            iPointCounter = iPointCounter + 1
            If iPointCounter = iPoint Then Exit Do
        End If
        RowCounter = RowCounter + 1
    Loop
    ' colour the point from the matched row in the data table
    Dim ColorIndex As Integer
    If wsGraph.Cells(RowCounter, 5) >= 0.75 Then
        ColorIndex = ScoreGreen
    ElseIf wsGraph.Cells(RowCounter, 5) >= 0.5 Then
        ColorIndex = ScoreYellow
    ElseIf wsGraph.Cells(RowCounter, 5) >= 0.25 Then
        ColorIndex = ScoreOrange
    ElseIf wsGraph.Cells(RowCounter, 5) >= 0 Then
        ColorIndex = ScoreRed
    Else
        ColorIndex = 1
    End If
    ActiveChart.SeriesCollection(1).Points(iPoint).Interior.ColorIndex = ColorIndex
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:30:25.360

尝试`Special Cells`

```
Sub LoopOverVisibleCells()
    Dim r As Range
    Dim a As Range
    dim cl As Range

    Set r = ActiveSheet.UsedRange.Columns(1).SpecialCells(xlCellTypeVisible)

    For Each a In r.Areas
        For Each cl In a
            ' code here
        Next
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:42:50.023

这就是我所做的，使用 Chris 的建议。它没有回答为什么隐藏检查这么慢，但它是一种更有效的重新着色方法：

```
Dim myrange As range
Set myrange = wsGraph.range("E26:E304").SpecialCells(xlCellTypeVisible)
Dim i As Integer
For i = 1 To myrange.Rows.Count
    If myrange.Cells(i, 1) >= 0.75 Then
        ColorIndex = ScoreGreen
    ElseIf myrange.Cells(i, 1) >= 0.5 Then
        ColorIndex = ScoreYellow
    ElseIf myrange.Cells(i, 1) >= 0.25 Then
        ColorIndex = ScoreOrange
    ElseIf myrange.Cells(i, 1) >= 0 Then
        ColorIndex = ScoreRed
    Else
        ColorIndex = 1
    End If
    ActiveChart.SeriesCollection(1).Points(i).Interior.ColorIndex = ColorIndex
Next i 
```

# ruby-on-rails - RSpec 的生成器列表

> ID：11062869
> 
> 赞同：7
> 
> 时间：2012-06-16T11:07:30.843
> 
> 标签：ruby-on-rails, rspec

我正在寻找**RSpec 生成器**的完整列表，以便轻松生成控制器、模型、助手等的规范。我发现的唯一一个是：

> rails g integration_test*名称*

将规范保存在规范/请求文件夹中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T07:47:51.227

*   控制器
*   帮手
*   安装
*   一体化
*   邮递员
*   模型
*   观察者
*   脚手架
*   看法

示例用法：

```
rails g rspec:integration events
--> create  spec/requests/events_spec.rb 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T12:03:24.683

所有 rspec-rails 生成器都可以在[https://github.com/rspec/rspec-rails/tree/master/lib/generators/rspec](https://github.com/rspec/rspec-rails/tree/master/lib/generators/rspec)找到你必须在代码中挖掘一下看看他们做了什么，但它们组织得很好，所以应该不会太痛苦。

生成器上还有一个[简短的自述文件](https://github.com/rspec/rspec-rails/blob/master/features/Generators.md)，基本上说当您运行标准 Rails 生成器之一（rails g model User）时它们会自动运行：

> 如果您键入 script/rails generate，您实际看到的唯一 RSpec 生成器是 rspec:install。这是因为 RSpec 是作为测试框架注册到 Rails 的，所以每当您生成模型、控制器等应用程序组件时，都会生成 RSpec 规范而不是 Test::Unit 测试。

# android - 虚拟设备的 Android sdk 问题

> ID：11062870
> 
> 赞同：0
> 
> 时间：2012-06-16T11:07:37.220
> 
> 标签：android, sdk

我有一个问题，当我去 sdk 管理器并且当我想创建一个新的 avd 时，有一个问题是：

> > 当我之后设置名称时，未选中目标 texboxt，我无法在此处写入目标，CPU/ABI 也未选中，我无法对它们做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:20:18.463

我认为你没有安装 android sdk 属性。更新android sdk manager，先检查android sdk工具是否安装正确。

# c - filelock 允许打开文件

> ID：11062880
> 
> 赞同：0
> 
> 时间：2012-06-16T11:09:31.280
> 
> 标签：c, file, file-locking

我在我的 ubuntu 机器上执行了以下 c 代码...我已经阅读了有关 fcntl() 用于锁定文件的信息，**如果设置了 F_WRLCK 选项，则甚至不允许读取**...所以我**在放弃之前启动了这个程序通过按回车锁定**我尝试以两种方式打开文件 - 直接双击 file1.cpp 并在新终端中运行不同的 c 程序...在打开文件的时间...那么如何fcntl() 允许在设置 F_WRLCK 时打开这些文件...

```
int main(int argc, char *argv[])
{

struct flock fl = {F_WRLCK, SEEK_SET,   0,      0,     0 };
int fd;

fl.l_pid = getpid();

if ((fd = open("/home/file1.cpp", O_WRONLY)) == -1)
{
    perror("open");
    exit(1);
}

if (fcntl(fd, F_SETLKW, &fl) == -1) 
{
    perror("fcntl");
    exit(1);
}

printf("Press <RETURN> to release lock: ");
getchar();

fl.l_type = F_UNLCK;  /* set to unlock same region */

if (fcntl(fd, F_SETLK, &fl) == -1)
{
    perror("fcntl");
    exit(1);
}

printf("Unlocked.\n");

close(fd);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:15:47.123

`fcntl`锁是纯粹的咨询锁。它们的**唯一**`fcntl` `F_SETLK`作用是在无法获得锁时导致调用阻塞。它们对 IO 操作绝对没有影响。当需要同步时，由您的程序在执行 IO 之前获取所需的锁。

这完全类似于使用互斥锁来保护内存中的对象。互斥锁不会阻止您读取或写入内存地址；它只是你用来确保你的程序只读写和正确时间的协议。

# javascript - 使用 Phonegap 文件 API 获取所有文件名

> ID：11062882
> 
> 赞同：2
> 
> 时间：2012-06-16T11:10:25.003
> 
> 标签：javascript, ipad, cordova

我正在使用 Phonegap 文件上传将 SVG 文件上传到我的服务器。它工作正常。但我需要从 iPad 的绝对路径中获取所有 SVG 文件并将它们发送到我的服务器。我不知道如何使用 Phonegap 的文件 API 获取所有 .svg 文件，以便我可以通过文件名循环发送到服务器。请告诉我如何做到这一点。

我的文件上传代码是：

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
  window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}
function gotFS(fileSystem) {
  fileSystem.root.getFile("image5_2.jpg.svg", {create: true, exclusive: false}, gotFileEntry, fail);
}
function gotFileEntry(fileEntry) {
  var localpath=fileEntry.fullPath;
  uploadPhoto(localpath);
}
function uploadPhoto(imageURI) {
  var options = new FileUploadOptions();
  var ft = new FileTransfer();
  ft.upload(imageURI, "http://192.168.1.54:8080/POC/fileUploader", win, fail, options);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T16:38:08.243

您需要从根 FileSystem 创建一个[DirectoryReader](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#DirectoryReader)并遍历所有条目以查找 .svg 文件。

```
function gotFS(fileSystem) {
    var reader = fileSystem.root.createReader();
    reader.readEntries(gotList, fail);    
}

function gotList(entries) {
    var i;
    for (i=0; i<entries.length; i++) {
        if (entries[i].name.indexOf(".svg") != -1) {
            uploadPhoto(entries[i].fullPath);
        }
    }
} 
```

您可能需要对此代码进行一些小的编辑，但它应该可以帮助您入门。

# r - 创建网络服务器 CRAN 存储库 - 对目录结构进行故障排除

> ID：11062884
> 
> 赞同：5
> 
> 时间：2012-06-16T11:10:41.240
> 
> 标签：r, packaging

我试图弄清楚如何创建一个 http CRAN 存储库。我试图遵循[本地 CRAN 存储库](https://stackoverflow.com/questions/2905650/creating-a-local-cran-repository)但没有真正成功。

基本上我的本地存储库是这样设置的（我不确定源目录是否有意义，但我添加它以防万一）：

```
library(tools)
reposRoot <- "C:\\Software\\repository"
r_ver <- "2.15"
contribPaths <- c(source = "src\\contrib", windows = "bin\\windows\\contrib")
write_PACKAGES(paste(reposRoot, contribPaths["windows"], r_ver, sep="\\"), 
               type="win.binary",
               unpacked=FALSE,
               latestOnly=FALSE,
               verbose=TRUE)
write_PACKAGES(paste(reposRoot, contribPaths["source"], r_ver, sep="\\"), 
               type="source",
               unpacked=FALSE,
               latestOnly=FALSE,
               verbose=TRUE) 
```

然后我将存储库上传到我的网络服务器：[cran.gforge.se](http://cran.gforge.se)但是当我尝试找到我得到的包时：

```
> available.packages(contriburl="http://cran.gforge.se")
Warning: unable to access index for repository http://cran.gforge.se
     Package Version Priority Depends Imports LinkingTo Suggests Enhances OS_type License Archs
     File Repository 
```

所以我的结论是它找不到存储库，但奇怪的是当我尝试时：

```
> available.packages(contriburl="http://cran.gforge.se/bin/windows/contrib/2.15")
      Package Version Priority Depends                                                   Imports
Gmisc "Gmisc" "0.2"   NA       "grid, testthat, miscTools, rms, Hmisc, survival, cmprsk" NA     
      LinkingTo Suggests Enhances OS_type License      Archs File
Gmisc NA        NA       NA       NA      "GPL (>= 2)" NA    NA  
      Repository                                                    
Gmisc "http://cran.gforge.se/bin/windows/contrib/2.15/./src/contrib" 
```

它实际上找到了我漂亮的包裹，但路径都混淆了。如果我尝试运行安装，我会得到：

```
> install.packages("Gmisc", contriburl="http://cran.gforge.se/")
Installing package(s) into ‘C:/Users/max/R/win-library/2.15’
(as ‘lib’ is unspecified)
Warning in install.packages :
  package ‘Gmisc’ is not available (for R version 2.15.0)
> install.packages("Gmisc", contriburl="http://cran.gforge.se/bin/windows/contrib/2.15")
Installing package(s) into ‘C:/Users/max/R/win-library/2.15’
(as ‘lib’ is unspecified)
trying URL 'http://cran.gforge.se/bin/windows/contrib/2.15/./src/contrib/Gmisc_0.2.zip'
Warning in install.packages :
  cannot open: HTTP status was '500 Internal Server Error'
Error in download.file(url, destfile, method, mode = "wb", ...) : 
  cannot open URL 'http://cran.gforge.se/bin/windows/contrib/2.15/./src/contrib/Gmisc_0.2.zip'
Warning in install.packages :
  download of package ‘Gmisc’ failed 
```

[我已经在手册](http://cran.r-project.org/doc/manuals/R-admin.html#Setting-up-a-package-repository)和[SONIVIS wiki](http://sonivis.org/wiki/index.php/HowTo_set_up_a_R_repository)中寻找任何帮助，但我一定是盲人......请指导我:-S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:34:27.523

经过一番搜索，我发现：

1.  包不应该由构建，`R CMD BUILD`而是由`R CMD INSTALL --build`
2.  它似乎与 repos 一起使用，而不是使用 contriburl：

    install.packages("Gmisc", repos=c("http://ftp.sunet.se/pub/lang/CRAN", "http://cran.gforge.se"), dependencies=TRUE)

# c - 如何用递归实现这个新操作？

> ID：11062886
> 
> 赞同：-2
> 
> 时间：2012-06-16T11:11:05.343
> 
> 标签：c, recursion

我有一个包含新操作（a [n] b）的作业，给定：

*   a [1] b = a ^b
*   一个 [n] 1 = 一个
*   2 [2] 3 = 2 [2-1] (2 [2-1] 2) `2 repeated 3 times`= 2 [1] (2 [1] 2) = 2 ^(2 ²) = 16
*   2 [2] 2 = 2 [2-1] 2 `2 repeated 2 times`= 2 [1] 2 = (2 ² ) = 4

*   4 [3] 3 = 4 [3-1] (4 [3-1] 4) = 4 [2] (4 [2] 4) `4 repeated 3 times`= 4 [2] (4 [1] (4 [1] ( 4 [1] 4))) =
    = 4 [2] 4 ^(4 ^(4 ⁴))

我不需要解决方案，我只需要建议，以便我自己解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:34:55.763

这里所说的可以改写如下。

> 对于任何正整数 a、b 和 n 定义

```
 a [n] b = a [n-1] ( a [n-1] ( ... a ) ) taken b times 
```

在类 C 语言中

```
int myoperator (a, n, b) {
    int x, i;
    x = a;
    if (n == 1){
       x = pow(a,b);
    } else {
       for(i = 1; i < b; i++){
           x = myoperator (a, [n-1], x);
       }
    return x;
} 
```

请注意，这些值将快速增长并很快超出机器整数范围。

另请注意，`a[n]b`可以定义为

```
 a [n] b = a [n-1] ( a [n-1] (b-1) ). 
```

使用这个定义`for`可以消除上面的循环。

```
int myoperator (a, n, b) 
int a,n,b;
{
    int x;
    x = a;
    if (n == 1) 
        x = pow(a,b);
    else if (b == 1) 
                x = a;
         else {
              assert(b>1 && n>1);
              x = myoperator (a, n-1, myoperator(a,n-1,b-1));
         }
    return x;
} 
```

# php - PHP没有响应exec

> ID：11062887
> 
> 赞同：1
> 
> 时间：2012-06-16T11:11:07.610
> 
> 标签：php, exec, wget

```
exec('wget  --progress=bar  http://technabob.com/blog/wp-
content/uploads/2011/04/light_up_pi_symbol_1.jpg');

echo "1";

output   1 
```

即下载不工作。我确定命令是正确的。我相信这与我的 Apache 有关。任何帮助将不胜感激。图像没有被下载。

我错了 Apache 。我认为这是`wget`因为我可以使用在我的服务器上运行其他命令

```
$output = `ls -al`;
echo "<pre>$output</pre>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:14:01.783

这与 Apache 无关。另外，请阅读`exec()`. 您很可能会看到该函数调用将当前进程*替换*为参数中指定的进程，这意味着您的其余代码将无法运行。

更新

也许 PATH 不正确？请尝试使用 wget 命令的完整路径。此外，当前工作目录将用作您的命令的下载目的地，并且该进程可能没有写入该目录的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T17:51:11.500

错误是我没有指定下载位置，所以它被保存在某个随机位置。但是该命令仍然正常工作。正确的方法可能是 $command="wget --output-document=/var/2 --progress=bar http://"."/technabob.com/blog/wp-content/uploads/2011/04/light_up_pi_symbol_1。 jpg";

# java - 码头、websockets 和 UTF8 编码

> ID：11062888
> 
> 赞同：2
> 
> 时间：2012-06-16T11:11:18.310
> 
> 标签：java, javascript, jetty, websocket, embedded-jetty

我有一个小问题。我正在基于jetty websockets实现用java构建一个小型服务器。客户端是浏览器，我使用 websockets javascript api 发送信息。

一切正常，直到我发送那些特殊字符，例如：ă Ț î ș ê ñ ü 所以这就是问题所在。客户端 1 使用其中一个字符向服务器发送一条消息。服务器打印消息，然后将消息发送给客户端 2。

客户端 2 收到消息并在浏览器 html 页面上打印消息，效果很好 字符显示正确。

问题是当我想在服务器站点上打印字符串时。而不是**ă**向我显示**?** 字符。这给我带来了问题，因为我想在数据库中插入文本（mysql-启用了 ut8 编码）

所以..似乎有什么问题。从浏览器发送的文本不是 UT8 编码的吗？或者码头 websocket 实现没有接收 utf8 编码的字符串？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:22:24.427

首先阅读此[http://kunststube.net/encoding/](http://kunststube.net/encoding/)

然后检查您已将字节转换为字符串（或相反）的所有位置。出错的常见地方包括在没有指定编码的情况下调用`getBytes()`a 。`String`其他缺陷包括未在数据库连接字符串中设置编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:11:05.390

这是我用来对字符串中的所有特殊字符（但不是 html 本身（如`<`或`>`））进行 HTML 编码的函数。如果您在向服务器发送字符串之前应用它，每个人都应该看到相同的内容，您可以将其存储在数据库表中：

```
function toHtmlEncoded(string){
    return string.replace(/[\u0080-\uC350]/g, 
                      function(a) {return '&#'+a.charCodeAt(0)+';';}
           );
} 
```

# python - Python守护进程检查进程是否在Linux中挂起

> ID：11062890
> 
> 赞同：3
> 
> 时间：2012-06-16T11:11:33.413
> 
> 标签：python, linux, process, skype

我在 Ubuntu 12.04 下使用 Skype，有时它会挂起（我以前用过卡住的词） - 我没有收到消息，我的消息也没有传递。很难发现何时发生这种情况，因为没有错误或警告。如果在那一刻我杀死了 Skype 进程，它不会被杀死（除非我这样做`kill -9`）。

所以，我的想法是创建一个 Python 守护进程，它会检查 Skype 是否每分钟都卡住，如果是，则重新启动该进程。

我的问题是如何检查进程是否挂起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:18:39.787

我怀疑是否有可能确定一般的进程挂起。但对于 Skype，这绝对是可能的。Skype 有明确定义的 API。因此，您可以每分钟 ping 它一次。

这是它：http: [//developer.skype.com/public-api-reference#Linux](http://developer.skype.com/public-api-reference#Linux)

以下是 C++ 在 Windows 上使用 API 的示例：http: [//devforum.skype.com/t5/Desktop-API/C-Skype-Desktop-API-Example/td-p/8175](http://devforum.skype.com/t5/Desktop-API/C-Skype-Desktop-API-Example/td-p/8175)

如果您需要更多示例，可以在论坛上提问。那里的人不会因为语法而惩罚你。

# c# - 用于突出显示行和切换 onclick 颜色的 javascript

> ID：11062891
> 
> 赞同：0
> 
> 时间：2012-06-16T11:11:37.917
> 
> 标签：c#, asp.net, onclick, row, onmouseover

我需要能够在 TR 上执行以下操作：

*   onmouseover 突出显示整行一种颜色
*   onclick 该行以另一种颜色突出显示该行（如果再次单击同一行，它将取消突出显示该行 - 将其设置为原始 bgcolor）
*   我遇到的一个问题是，在我的列表视图中，行的 bgcolor 在两种颜色之间交替。
*   下面的代码仅适用于一次突出显示一行，该行需要保持突出显示，直到再次单击它。

这是我用来单击以选择哪个有效但我需要更改它以便它打开/关闭行突出显示的一些代码

```
<script type="text/javascript"> 
var preEl;
var orgBColor;
var orgTColor;
function highlighttr(el, backColor, textColor) {
    if (typeof (preEl) != 'undefined') {
        preEl.bgColor = orgBColor;
        try { ChangeTextColor(preEl, orgTColor); } catch (e) { ; }
    }
    orgBColor = el.bgColor;
    orgTColor = el.style.color;
    el.bgColor = backColor;

    try { ChangeTextColor(el, textColor); } catch (e) { ; }
    preEl = el;
}

function ChangeTextColor(a_obj, a_color) {
    ;
    for (i = 0; i < a_obj.cells.length; i++)
        a_obj.cells(i).style.color = a_color;
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:21:45.493

*   onmouseover 突出显示整行一种颜色

添加`:hover`到`tr`样式

*   onclick 该行以另一种颜色突出显示该行（如果再次单击同一行，它将取消突出显示该行 - 将其设置为原始 bgcolor）

    ```
    $('tr').click( function () {
        if($(this).hasClass("clicked"))
        {
            $(this).removeClass("clicked");
        }else{
            $(this).addClass("clicked");
    }
    }); 
    ```

并为其添加样式。

*   我遇到的一个问题是，在我的列表视图中，行的 bgcolor 在两种颜色之间交替。

您可以添加`:nth-child(2n)`到您的样式中以将它们组合在一起。

**例子**

[http://jsfiddle.net/uuZdB/6/](http://jsfiddle.net/uuZdB/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:38:29.570

这是一种传统的方式，顺便说一下是跨浏览器（和平台）。

CSS

```
.tr {background-color:#fff}
.trOver {background-color:#ddd}
.trClicked {background-color:#bbb} 
```

JS

```
function over(o)
{
    if ('trClicked' != o.className) o.className = 'trOver';
}
function out(o)
{
    if ('trClicked' != o.className) o.className = 'tr';
}
function clicked(o)
{
    o.className = ('trClicked' == o.className) ? 'tr' : 'trClicked';
} 
```

HTML

```
<tr class="tr" onmouseover="over(this)" onmouseout="out(this)" onclick="clicked(this)">
    // tds without defined background color...
</tr> 
```

# java - java中的多线程持久队列

> ID：11062892
> 
> 赞同：0
> 
> 时间：2012-06-16T11:11:40.733
> 
> 标签：java, sql, multithreading, nosql, queue

架构模块所需的建议

我有一个监听端口的端口监听器。所有收到的请求都需要排队。我有 5 个线程来处理队列。同时，所有传入的请求都必须被持久化，处理相同的响应也是如此。

实现它的最佳方法是什么？

请求和响应不能同时存在，因为有时我必须暂时停止处理几个小时。另一种情况可能是此应用程序失败。我们应该能够从持久存储中恢复队列。

另一个问题是我们不能保证队列的大小。因此从 db 中连续获取项目所需的时间应该更少。有时可能在 DB 中没有请求。我应该选择 NOSQL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:02:52.727

基本概念是使用持久队列。

您的请求处理程序（例如 Servlet）应将请求转换为 JMS 消息并通过 JMS 队列发送它们。您可以使用[ActiveMQ](http://activemq.apache.org)、[HornetQ](http://www.jboss.org/hornetq)或其他。接下来，创建一个使用来自该队列的消息的消息驱动 Bean。

JMS 队列是持久的，因此如果您的服务器出现故障，您不会丢失任务。可以控制 MDB（例如使用 JMX 或系统属性），因此您可以随时停止处理，并且任务将存储在队列中，直到您再次启用 MDB。

[这是来自 Oracle 的完整 JMS 演练](http://docs.oracle.com/javaee/5/tutorial/doc/bnbpk.html)，将逐步向您展示如何执行此操作。

# objective-c - Cocoa (OS X) 有条码识别框架吗？

> ID：11062893
> 
> 赞同：2
> 
> 时间：2012-06-16T11:11:49.527
> 
> 标签：objective-c, cocoa, barcode

是否有在可可 [OS X] 上进行条码识别（创建和扫描）的框架或其他示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:17:43.127

您必须为此使用第三方框架。

例如，您可以使用：

*   [志兴](http://code.google.com/p/zxing/)。请注意，一维代码不稳定，因此您可能必须深入研究代码。
*   [条形图](http://zbar.sourceforge.net/iphone/index.html)。似乎是一个非常有能力的图书馆。

一个简单的 Google 搜索或 StackOverflow 搜索也可以为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:07:21.663

这里为 mac 和 iphone 创建二维条码： [Cocoa Barcodes](http://code.google.com/p/cocoabarcodes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-08T11:09:42.357

从 macOS 10.10 开始，您可以使用 CIFilter 来读取 QRCode，而无需任何第三方框架：

这是官方[文档](https://developer.apple.com/documentation/coreimage/ciqrcodefeature)的链接，以及展示如何使用它的博客[文章。](https://www.shinobicontrols.com/blog/ios8-day-by-day-day-13-coreimage-detectors)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-29T16:20:10.060

在尝试创建和读取条形码时，您可以使用付费的 macOS 框架。LEADTOOLS SDK BarcodeReader 和 BarcodeWriter 类都可以读取和写入条形码，并且可以在 Objective-C 和 Swift 项目中使用。

[https://www.leadtools.com/help/sdk/v21/dh/ba/barcodewriter.html](https://www.leadtools.com/help/sdk/v21/dh/ba/barcodewriter.html)

创建条形码时，您需要提供必要的条形码数据和写入时所需的选项。

```
 LTBarcodeData * const barcodeData = writeBarcodeView.barcodeData;

        _selectedSymbology = writeBarcodeView.selectedSymbology;

        _indexOfSelectedWriteOption = writeBarcodeView.indexOfSelectedWriteOption;

        LeadRect writeBounds = LeadRectMake(0, 0, image.width, image.height);

        if (!LeadRectIsZero(writeBounds) && !LeadRectEqualToRect(writeBounds, barcodeData.bounds))

            writeBounds = barcodeData.bounds;

        for (LTBarcodeWriteOptions *writeOption in _barcodeEngine.writer.allDefaultOptions) {

            writeOption.foreColor = [writeBarcodeView.foreColorWell.color colorUsingColorSpaceName:NSCalibratedRGBColorSpace].LTRasterColor;

            NSColor * const color = [writeBarcodeView.backColorWell.color colorUsingColorSpaceName:NSCalibratedRGBColorSpace];

            writeOption.backColor = [NSColor colorWithSRGBRed:color.redComponent green:color.greenComponent blue:color.blueComponent alpha:1.0].LTRasterColor;

        }

        NSError *error = nil;

        if (![_barcodeEngine.writer calculateBarcodeDataBounds:writeBounds xResolution:image.xResolution yResolution:image.yResolution data:barcodeData options:nil error:&error]) {

            [self displayAlertWithMessage:@"Error while writing barcode" informativeText:error.localizedDescription];

            return;

        }

        if (![_barcodeEngine.writer writeBarcode:image data:barcodeData options:nil error:&error]) {

            [self displayAlertWithMessage:@"Error while writing barcode" informativeText:error.localizedDescription];

            return;

        }

        _imageViewer.rasterImage = image; 
```

[https://www.leadtools.com/help/sdk/v21/dh/ba/barcodereader.html](https://www.leadtools.com/help/sdk/v21/dh/ba/barcodereader.html)

这是在图像中搜索条形码的小代码片段

```
NSArray<LTBarcodeData *> *barcodeData = [_barcodeEngine.reader readBarcodes:processingImage searchBounds:bounds maximumBarcodes:0 symbologies:nil error:&error]; 
```

有一个示例 macOS 应用程序使用当前托管在 Mac App Store 上的 LEADTOOLS SDK 框架。 [https://apps.apple.com/us/app/leadtools-barcode/id602159087](https://apps.apple.com/us/app/leadtools-barcode/id602159087)

# spring - j_username cannot be accessed using spring_security_check

> ID：11062895
> 
> 赞同：0
> 
> 时间：2012-06-16T11:12:04.373
> 
> 标签：spring, spring-security, j-security-check

I created a login page using spring_security_check.
Here:

```
<form name='f' action="/sec_test/j_spring_security_check" method='POST'>

    <table>
        <tr>
            <td>User:</td>
            <td><input type="text" name="j_username" value=''>
            </td>
        </tr>
        <tr>
            <td>Password:</td>
            <td><input type="password" name="j_password" />
            </td>
        </tr>
        <tr>
            <td colspan='2'><input name="submit" type="submit"
                value="submit" />
            </td>
        </tr>
        <tr>
            <td colspan='2'><input name="reset" type="reset" />
            </td>
        </tr>
    </table>
</form> 
```

But I can not have access to ***j_username*** afterward.

I've tried:

* request.getParameter("j_username")
* request.getAttribute("j_username")
* request.getAttribute("j_username")
* request.getUserPrincipal().getName()
* request.getRemoteUser()

From all of them, all I'm getting is null!

Any idea what to do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:50:33.547

Spring does authentication for you based on type of the authentication configured in your configuration file. Once authentication is successful it redirects to the login success url(say /login.htm). Because it redirects to /login.htm, you will not get any request parameter (username/user role) unless explicitly set in request in overriden authentication filter.

After successful authentication spring stores the authenticated information in security context, including user roles. You can access this information from SecurityContext. Refer - [link](http://www.mkyong.com/spring-security/get-current-logged-in-username-in-spring-security/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:23:03.207

I'd be interested to see your spring config files. Regardless, it appears you are trying to validate the user's credentials when spring security will actually do that for you. If you're unsure how to get started, read up on spring's documentation, including any online tutorials you can find. Here's what my spring security config looks like:

```
<security:http auto-config="true" use-expressions="true" access-denied-page="/login.html">
    <security:form-login
        login-page="/login.html"
        authentication-failure-url="/loginfail.html"
        default-target-url="/authenticate.html"/>

    <security:logout
        invalidate-session="true"
        logout-success-url="/login.html"
        logout-url="/logoff.html"/>
</security:http>

<bean id="securityDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/security_DS"/>
    <property name="resourceRef" value="true"/>
</bean>

<bean id="encoder" class="org.springframework.security.crypto.password.StandardPasswordEncoder" />

<security:authentication-manager>
    <security:authentication-provider>
        <security:password-encoder ref="encoder" />
        <security:jdbc-user-service 
            data-source-ref="securityDataSource"
            authorities-by-username-query="SELECT l.user_name as username, r.role_name AS authority FROM login l join user_role ur on l.user_id = ur.user_id join role r on ur.role_id = r.role_id WHERE l.user_name = ?"
            users-by-username-query="SELECT user_name as username, password_value AS password, active_flg AS enabled FROM login WHERE user_name = ?"
        />        
    </security:authentication-provider>
</security:authentication-manager> 
```

If you want to have access to the user name after spring has validated the user's credentials, do something like this:

```
@RequestMapping(value = { "/authenticate.html" }, method = { RequestMethod.GET, RequestMethod.HEAD })
public ModelAndView authenticateUser(final HttpServletRequest httpServletRequest, HttpSession httpSession, Authentication authentication) {
    User user = (User) authentication.getPrincipal();
    String userName = user.getUsername();
    ... 
```

You can see that the request will be forwarded to the /authenticate.html method based on the default-target-url that I specified in my spring config.

# sql - 需要自连接和排名的 SQL

> ID：11062899
> 
> 赞同：1
> 
> 时间：2012-06-16T11:12:40.273
> 
> 标签：sql, oracle

我有一个足球结果表：

```
 CREATE TABLE matches(
    season NUMBER(4),
    matchDate DATE,
    homeTeam VARCHAR2(25),
    awayTeam VARCHAR2(25),
    homeGoals NUMBER(2),
    awayGoals NUMBER(2),
    totalGoals NUMBER(3)); 
```

对于每一行，我希望更新`totalGoals`列。计算方法是将最近 5 场主场比赛`totalGoals`的进球数 ( `homeGoals`+ `awayGoals`) 与最近5 场客场比赛的进球数相加。`homeTeam``awayTeam`

它仅使用同一赛季的比赛来计算进球数。它不包括当前行的进球数。如果任何一支球队在赛季中没有参加规定的比赛次数，则`totalGoals`保持为 NULL。

我可以使用 PL/SQL 来更新它，但是有没有办法只使用 SQL 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:40:44.290

如果我了解您想要什么，您可以使用[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm#SQLRF06174)和[窗口子句](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm#i97640)来做到这一点。

```
select season, matchdate, hometeam, awayteam, homegoals, awaygoals,
    case when home_cnt >= 5 and away_cnt >= 5 then
        home_tot + away_tot
    else null end as totalgoals
from (
    select season, matchdate, hometeam, awayteam, homegoals, awaygoals,
        count(*) over (partition by season, hometeam
            order by matchdate
            rows between 5 preceding and 1 preceding) as home_cnt,
        sum(homegoals + awaygoals) over (partition by season, hometeam
            order by matchdate
            rows between 5 preceding and 1 preceding) as home_tot,
        count(*) over (partition by season, awayteam
            order by matchdate
            rows between 5 preceding and 1 preceding) as away_cnt,
        sum(homegoals + awaygoals) over (partition by season, awayteam
            order by matchdate
            rows between 5 preceding and 1 preceding) as away_tot
    from matches
)
order by season, matchdate, hometeam, awayteam; 
```

内部选择使用 和 的解析版本计算每个赛季中每个主队/客队的比赛次数和总进球数`count`，`sum`并且窗口子句`rows between ...`将两者限制为前五个，不包括当前行，我认为这就是你想要的。然后，外部选择将当前行中两个团队的相关总数相加，但会检查两个计数，如果其中一个小于 5，则将总数留空。请注意，它只命中`matches`表一次。

在 order-by 之前有一个额外的过滤器：

```
where season = 2012 and homeTeam = 'Norwich' and awayteam = 'Aston Villa' 
```

... 你得到：

```
 SEASON MATCHDATE HOMETEAM                  AWAYTEAM                   HOMEGOALS  AWAYGOALS TOTALGOALS
---------- --------- ------------------------- ------------------------- ---------- ---------- ----------
      2012 13-MAY-12 Norwich                   Aston Villa                        2          0         30 
```

您可以使用它来更新匹配行的表，但通常我会根据需要计算它以避免潜在的数据完整性错误，可能在视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:45:45.873

我在 MySQL 上尝试了以下操作，但失败并显示“错误代码：1093。您无法在 FROM 子句中指定目标表 'm' 进行更新”。

也许你可以用 Oracle 试试。您必须用 Oracle 限制行数的特定方式替换“limit 0,5”子句。我认为他们使用“rownum < 6”。

```
update matches m
  set totalGoals = (select sum(homeGoals) + sum(awayGoals) 
                      from matches
                      where homeTeam = m.homeTeam
                        and season = m.season
                        and matchDate < m.matchDate
                      having count(matchDate) > 4
                      order by matchDate limit 0,5) +
                   (select sum(homeGoals) + sum(awayGoals) 
                      from matches
                      where awayTeam = m.awayTeamm
                        and season = m.season
                        and matchDate < m.matchDate
                      having count(matchDate) > 4
                      order by matchDate limit 0,5); 
```

# jquery - jquery 中的 end() 方法有效但表现出奇怪的行为

> ID：11062903
> 
> 赞同：0
> 
> 时间：2012-06-16T11:13:37.870
> 
> 标签：jquery

下面是 HTML 代码

```
<div id="Parent">
            This is Parent Div
             <p> This is first child.</p>
             <p> This is second child.</p>
             <p> This is Third child.</p>
        </div>

<input type="button" id="clickme" value ="click me" /> 
```

这是jQuery代码

```
$('#clickme').click(function() {
    $('#Parent')
    .children() // 1st phase action on children begins here
    .css('color', 'blue')
    .end() //Here 1st phase action on children ends 
    .css({
        'color': 'red',
        'border-color': 'blue',
        'border-width': '3px',
        'border-style': 'solid'
    }) // Here 1st phase action on Parent completed
   .children() //2nd phase action on children begins
   .css({
        'border-color': 'red',
        'border-width': '2px',
        'border-style': 'solid'
    }).end() // 2nd phase action on children ends
    .css('font-style', 'italic'); //2nd phase action on parent begin/ends
});​ 
```

在上面的 jquery 代码中，我试图将不同的样式应用于子级和父级。除了斜体样式外，一切正常。谁能解释一下为什么会发生这种奇怪的事情。

抱歉错过了这个 - 我将斜体应用于父母，但孩子们也会改变。如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:49:39.197

在父母和孩子之间来回弹跳以设置不同的CSS没有什么意义。

只需将父级的 css 属性和子级的属性结合起来，并且只为每个属性调用一个 css。它消除了使用`end()`中的混乱，并且更高效且更易于阅读。

```
$('#clickme').click(function() {
    $('#Parent')   
    .css({
        'font-style': 'italic',
        'color': 'red',
        'border-color': 'blue',
        'border-width': '3px',
        'border-style': 'solid'
    })
   .children()
   .css({
       'color':'blue',
        'border-color': 'red',
        'border-width': '2px',
        'border-style': 'solid'
    })
}); 
```

演示：http: [//jsfiddle.net/T9zBS/](http://jsfiddle.net/T9zBS/)

我怀疑您只希望在父项中的文本上使用斜体，在这种情况下，现在很明显您也需要将子项设置为普通字体。

# php - 无法让动画在 jQuery 中正常工作

> ID：11062905
> 
> 赞同：0
> 
> 时间：2012-06-16T11:13:44.380
> 
> 标签：php, javascript, jquery, fadeout

我最近才开始学习[jQuery](http://en.wikipedia.org/wiki/JQuery)。为了帮助我学习，我开始重新设计[这个](http://www.mjbox.info)网站。我目前遇到的问题是：

1.  单击缩略图并加载主帖子后；关闭主帖后，再次将鼠标悬停在拇指上时，标题和帖子信息不再淡入拇指上方和旁边。

2.  第一次将鼠标悬停在拇指图像上时，您应该注意到它隐藏了所有内容（包括自身），然后再次显示自己，这给人一种闪烁的错觉。我怎样才能阻止这个？

这是包含 jQuery 代码的 .js 文件：

```
$(".post").hover(
    function () {
        $(this).children(".post_title, .post_info").stop(true).fadeIn();
        $(this).children(".link-to-post").stop().show();
        $(".post").stop().fadeTo(0,0.2);
        $(this).fadeTo(300,1);
    },
    function () {
        $(this).parent().find(".post_title, .post_info").stop(true).hide();
        $(this).parent().find(".link-to-post").stop().hide();
        $(".post").stop().fadeTo(300,1);
    });

    $(".cover-img").click(function(){
        $("#main-post").fadeIn(1000);
        $.post("inc/fullpost.php", {postid: $(this).data('postid')},
            function(output){
                $("#gotpostid").html(output).show();
            }).fail(function(x,y,z){
                $("#gotpostid").html(x + "<br />" + y + "<br />" + z)
            });
        $('.post').fadeTo(0,0);
    });

    $('input[name=close]').click(function(){
        $(this).closest('#main-post').hide(); 
```

每个缩略图都在其自己的类中：

```
// Retrieve all active posts order by lastest first
$resultarray = retrieve_active_posts();

echo '<div id="content-wrap">';
foreach($resultarray AS $value){
    $filename = substr($value['img_file_name'],9);
    $cat_id = $value['cat_id'];
    echo '<article class="post">';
    echo '<div class="post_title">' . stripslashes(stripslashes($value['post_title'])) . '</div>';
    echo '<div class="post_info">' .
    'Category: ' . $cat_name = get_cat_name($cat_id) .'<br />'.
    'Year: ' . $value['post_year'] .'<br />'.
    stripslashes($value['post_desc']) .'<br />'.
    '</div>';
    echo '<div class="link-to-post"><a href="#">Click to view</a></div>';
    echo '<a href="#'.$value['post_id'].'" class="linktopost"><img class="post-thumb" src="img/thumb_/'.$filename.'" alt="MJbox Michael Jackson memorabilia thumbnail" data-postid="'.$value['post_id'].'"/></a>';
    echo '<a href="#'.$value['post_id'].'" class="linktopost"><img class="cover-img" src="img/post-bg-1.png" alt="test" data-postid="'.$value['post_id'].'"/></a>';
    echo '</article>';
}
echo '</div>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:36:13.573

我再去一次:-)

我查看了谷歌开发者工具，看起来这就是问题所在......

```
 $('.post').fadeTo(0,0); 
```

它将不透明度属性保留为 0。当我在开发人员工具中覆盖它时，弹出窗口再次显示。尝试将其更改为：

```
 $('.post').fadeOut; 
```

甚至

```
 $('.post').hide(); 
```

应该做的伎俩。

我很确定我有另一个问题的答案：

你有两个动画。您正在淡出所有 .post 项目，然后再次淡入 $(this) 。你需要这个解决方案：

```
$(".post").hover(
function () {
    $(this).children(".post_title, .post_info").stop(true).fadeIn();
    $(this).children(".link-to-post").stop().show();
    $(this).siblings.().stop().fadeTo(0,0.2);
}, 
```

这只会淡出其他的，所以你不必再次淡入 $(this) ！

手指交叉！

* * *

我已经对此进行了测试。它解决了这两个问题，并在您单击其中一个拇指时阻止浏览器转到页面顶部。

这是完整的jQuery代码

```
$(document).ready(function(){
$(".fancybox").fancybox();

$("#login").click(function(){
    $("#searchform").hide();
    $("#loginform").fadeIn('3000','swing'); 
});

$("#search").click(function(){
    $("#loginform").hide();
    $("#searchform").fadeIn('3000','swing');    

});

$(".post").hover(
  function () {
    $(this).children(".post_title, .post_info").stop(true).fadeIn();
    $(this).children(".link-to-post").stop().show();
    $(this).siblings().stop().fadeTo(0,0.2);
  }, 
  function () {
    $(this).parent().find(".post_title, .post_info").stop(true).hide();
    $(this).parent().find(".link-to-post").stop().hide();
    $(".post").stop().fadeTo(300,1);
  });

  $(".cover-img").click(function(e){
    e.preventDefault();
    $("#main-post").fadeIn(1000);
    $.post("inc/fullpost.php", {postid: $(this).data('postid')},
        function(output){
            $("#gotpostid").html(output).show();
        }).fail(function(x,y,z){ 
            $("#gotpostid").html(x + "<br />" + y + "<br />" + z)
        });
    $('.post').fadeOut();

 });

 $('input[name=close]').click(function(){
    $(this).closest('#main-post').hide();

 }); 
```

});

只需剪切并粘贴它来代替您的代码。

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:35:58.287

这是你的第一个问题。

尝试做...

```
$(".cover-img").click(function(e){
        e.preventDefault();
        .... rest of your code 
```

这可以防止浏览器的默认行为跟随链接。这可能会解决您的第一个问题，但无论如何都应该存在点击事件。

# entity-framework - EF 4.3（代码优先） - 确定何时将项目添加到虚拟 ICollection 属性

> ID：11062910
> 
> 赞同：3
> 
> 时间：2012-06-16T11:14:05.300
> 
> 标签：entity-framework, ef-code-first

从查询中加载 ICollection<> 虚拟成员时，是否有任何方法可以确定何时将实际项目添加到该成员？

希望下面的代码能够证明我的观点！！

```
public class DbAppointment
{
    public DbAppointment()
    {
    }

    public virtual int AppointmentId { get; set; }
    public virtual string Subject { get; set; }
    public virtual string Body { get; set; }
    public virtual DateTime Start { get; set; }
    public virtual DateTime End { get; set; }

   private ICollection<DbExceptionOcurrence> exceptionOcurrences;
   public virtual ICollection<DbExceptionOcurrence> ExceptionOcurrences
   {
        get { return exceptionOcurrences; }
        set
        {
            exceptionOcurrences = value;
        }
    }
} 
```

和

```
public class DbExceptionOcurrence
{
    public DbExceptionOcurrence()
    {
    }

    public virtual int ExceptionId { get; set; }
    public virtual int AppointmentId { get; set; }
    public virtual DateTime ExceptionDate { get; set; }
    public virtual DbAppointment DbAppointment { get; set; }
} 
```

加载这些的代码是

```
 Database.SetInitializer(new ContextInitializer());
        var db = new Context("EFCodeFirst");

        // when this query executes the DbAppointment ExceptionOcurrenes (ICollection) is set
        // but for some reason I only see this as an empty collection in the virtual setter DbAppointment
        // once the query has completed I can see the ExceptionOcurrences
        var result = db.Appointments.Include(a => a.ExceptionOcurrences).ToList(); 
```

在每个项目的 DbAppointment ICollection ExceptionOcurrences 设置器中，我需要执行一些额外的逻辑。我遇到的问题是，一旦创建了 DbAppointment 对象，我似乎才拥有此信息。

有什么方法可以确定何时添加了这些项目，以便我可以执行我的逻辑。

干杯腹肌

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:35:21.667

显然，您看到的行为意味着 Entity Framework 创建并填充与此类似的集合：

```
// setter called with empty collection
dbAppointment.ExceptionOcurrences = new HashSet<DbExceptionOcurrence>();

// only getter gets called now
dbAppointment.ExceptionOcurrences.Add(dbExceptionOcurrence1);
dbAppointment.ExceptionOcurrences.Add(dbExceptionOcurrence2);
dbAppointment.ExceptionOcurrences.Add(dbExceptionOcurrence3);
//... 
```

我曾希望您可以使用[ObjectMaterialized 事件](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.objectmaterialized.aspx)（可以`DbContext`在此示例中注册：[https](https://stackoverflow.com/a/4765989/270591) : //stackoverflow.com/a/4765989/270591，EventArgs 包含物化实体）但不幸的是文档说：

> 在对象上设置了所有标量、复杂和引用属性之后，**但在加载集合之前**引发此事件。

看起来您必须在完全加载结果集合后运行它，并在每个结果项上调用一些方法，该方法在导航集合上执行您的自定义逻辑。

也许另一种选择是创建一个自定义集合类型，该集合类型`ICollection<T>`使用该方法的事件处理程序实现，`Add`并允许您在每次添加新项目时挂钩某些逻辑。您在模型类中的导航集合必须属于该类型。也许甚至`ObservableCollection<T>`可以用于此目的。

# image-processing - 在二进制图像中检测破损的有缺陷的饼干

> ID：11062911
> 
> 赞同：0
> 
> 时间：2012-06-16T11:14:16.127
> 
> 标签：image-processing, opencv, image-recognition

我是 OpenCV 的新手，我正在尝试计算和定位图像中破损或破裂的饼干（那些不应该是*完美的圆圈）。*

我应该遵循什么样的策略？

任何建议都可以帮助我打开思路。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:12:04.080

您的问题很抽象（如果您提供一些图片会更好），但我可以尝试回答。

首先，您必须检测图像上的*所有 busquits*。为此，您必须在图片上找到*bisquit 颜色*（也许[HSV 颜色空间](http://en.wikipedia.org/wiki/HSL_and_HSV)更适合您的目标）并将输入图像转换为单通道图像（或矩阵），该矩阵的每个元素可以是：

*   **如果该像素属于 bisquit，则为**1（或 255）****
***   **如果没有，则为**0 。******

 *****[OpenCV 函数[inRange](http://opencv.willowgarage.com/documentation/cpp/operations_on_arrays.html#cv-inrange)可以帮助您进行这种转换。]*

当检测到饼干时，您可以：

1.  使用[HoughCircles](http://opencv.willowgarage.com/documentation/cpp/imgproc_feature_detection.html#cv-houghcircles)检测*正常的 bisquit*（如果*正常*的 bisquit是圆形的）。
2.  查找每个 bisquit 的轮廓（查看[findContours ），并使用](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)[交叉关联](http://paulbourke.net/miscellaneous/correlate/)或其他方法（[欧几里德距离](http://en.wikipedia.org/wiki/Euclidean_distance)等）将每个轮廓与正常的 bisquit（如果它不是圆形）进行比较。

如果您的图像不包含其他圆圈（饼干除外），还请查看[HoughCircle 教程以仅检测圆圈。](http://opencv.itseez.com/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)****

# php - 默认值被空值覆盖

> ID：11062915
> 
> 赞同：0
> 
> 时间：2012-06-16T11:15:00.757
> 
> 标签：php, mysql

我已经将这个简单的插入到数据库中，但不幸的是，如果没有任何内容插入到字段中，则 DB 中的默认值 N/A 将被空值覆盖。下面是插入代码，我怎样才能让它保持 N/A？

```
$insertSQL = sprintf("INSERT INTO application_forms (application_type) VALUES (%s)", GetSQLValueString($_POST['application_type'], "text")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:22:48.743

测试它是否为空，如果是，请不要插入。

# java - Java 错误“未使用局部变量的值”

> ID：11062919
> 
> 赞同：8
> 
> 时间：2012-06-16T11:15:29.523
> 
> 标签：java

我对java真的很陌生（2天前开始学习）。对不起，如果这是一个愚蠢的问题。我正在尝试学习如何使用 rt.exec 和类似的方法，所以我尝试制作一个运行 calc.exe 的非常简单的程序。这是代码：

```
public class main {
{
try {
Runtime rt = Runtime.getRuntime() ;
Process p = rt.exec("calc.exe") ;
 }

catch(Exception exc){/*handle exception*/}
    }
} 
```

![http://i.stack.imgur.com/KrpsT.png](../Images/408d0349ef0880e9ca04a18a8705adc1.png)

我收到错误“未使用局部变量 p 的值”。

如果我尝试编译这就是我得到的：

![http://i.stack.imgur.com/Ryllw.pngI](../Images/24eaaf4f5c7394dc4b215e55cecff65f.png)

我认为这很容易解决，但我不知道如何解决。如果有人帮忙就好了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T11:19:33.737

嗯，报错“The value of local variable p is not used.”，其实不是报错。这是您的 IDE (Eclipse)，警告您实际上并没有读取该变量，因此您没有收到任何输入。

您的课程的另一个问题是，您没有 main 方法。像这样，

```
public class main {
public static void main(String[] args) {
try {
Runtime rt = Runtime.getRuntime() ;
Process p = rt.exec("calc.exe") ;
} catch(Exception exc){
/*handle exception*/
}
    }
} 
```

顺便说一句，您应该始终以大写字母开头的类名。所以`public class main`，实际上应该是`public class Main`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:18:20.663

您收到该错误是因为您没有`main`用于启动 java 程序的方法：

```
public class main {

public static void main(String[] args) {
   try {
       Runtime rt = Runtime.getRuntime() ;
       Process p = rt.exec("calc.exe") ; // here, eclipse is WARINING(so you can ignore it) you that that the variable p is never used(it's just a warning)
   } catch(Exception exc) {
       /*handle exception*/
       // never do this, always put at least a System.out.println("some error here" + e); so you don't ignore a potential exception
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:18:44.263

我相信您所拥有的不是错误，而是警告；eclipse（和其他 IDE/编译器）会告诉你，虽然你给变量 p 赋值了，但你并没有在任何地方使用它。它会告诉您这一点，因为这有时是一个错误；大多数情况下，当您为变量赋值时，您稍后会以某种方式使用该变量。

您可以通过将该特定语句更改为只是

```
rt.exec("calc.exe") 
```

因为您不需要从对 exec 的调用中分配值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T04:30:18.350

你没有使用 main 你怎么编译请使用 main 方法。第二个是在你的方法中使用 p 局部变量。否则声明 p 变量开始的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T11:24:32.877

错误“未使用局部变量 p 的值”，因为代码中的任何地方都没有使用变量 p。

要删除错误 - 有必要删除变量“p”。

要运行计算器，您必须使用以下代码：

```
public class MainClass {

    public static void main(String args[]) throws IOException {

        Runtime.getRuntime().exec("cmd /c calc.exe");

    }

} 
```

此评论和所有其他评论由 Google 翻译翻译

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T11:28:57.260

没有愚蠢的问题（只有放错地方，在最坏的情况下）。

“编辑器不包含主类型”是指您没有定义主方法的事实。所有 java 程序都需要一个 main 方法，例如：

```
public static void main(String [] args){
    <code>
} 
```

这是您必须放置代码的地方。

“未使用的值”只是一个警告；它告诉你你的变量 p 只存在于 try 块中。您可以在 try 之前声明您的 p 变量 - 这样，您可以在 try 范围之外使用它（变量的范围是指它存在的位置，在这种情况下，仅在 try 块内）。

如果你想使用你的 p，这就是你所追求的：

```
public class Main {
    public static void main(String[] args) {
        Process p;
        try {
            Runtime rt = Runtime.getRuntime();
            p = rt.exec("calc.exe");
        } catch(Exception exc) {/*handle exception*/}
    }
} 
```

[编辑]：请注意，使用大写字母作为类的第一个字母是 java 编码约定的一部分，例如 Main.java(not main.java)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-16T11:30:45.007

变量的使用在这里没有问题。出现该错误是因为 JVM 需要一个带有签名的方法来知道从哪里开始执行。

```
public static void main( String args[] ){ //TODO: Stuff here } 
```

在您的类中引入具有此签名的方法，它将清除该错误。或者，您可以将代码嵌入到静态块中，如下所示 - 但不推荐使用此方法。

```
static {
    // TODO: Your code here
} 
```

# objective-c - 再次显示“旧”视图后插座无法正常工作

> ID：11062920
> 
> 赞同：1
> 
> 时间：2012-06-16T11:15:31.397
> 
> 标签：objective-c, storyboard, iboutletcollection

我的 Storyboard 中有几个 UIView，当然，我可以使用 segue 在它们之间切换。最初这很好用：notenKurse 是一个 NSMutableArray，而 kurse1Outlets 是我的 UITextFields 的一个出口集合。

```
int counter = 0;
for (UITextField *tf in kurse1Outlets) {
    NSMutableString *t = [NSMutableString stringWithFormat:@"%@", [notenKurse objectAtIndex:counter]];
    NSLog(@"Object at index %i is %@", counter, [notenKurse objectAtIndex:counter]);
    if ([t isEqualToString:@"42"]) {
        [t setString:@""];
    }
    [tf setText:t];
    NSLog(@"UITextField in slot %i should now display %@", counter, t);
    counter++;
} 
```

我所有的 UITextFields 都显示存储在数组中的值。但是，如果我转到另一个视图（假设我有一个 Button ；））更改某些内容，然后返回到原始 UIView 上面的代码仍然会被执行，并且数组中有不同的值（这应该是是）。我可以在日志中看到这一点。但是愚蠢的 UITextField 只是不显示任何内容。既不是以前的内容，也不是新的文本。但为什么？日志清楚地表明 t 是它应该是的，所以错误一定是在将它写入文本字段时，因此我猜这是一个出口问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:49:11.277

我们无法保证您的奥特莱斯收藏顺序。它的处理方式非常像 NSDictionary 而不是 NSArray - 保证顺序。迭代这种集合将为不同的设备/人/月相产生不同的结果。

当我使用这样的集合时，我倾向于设置“标签”，然后在 viewDidLoad 时通过对标签进行排序来重新排序插座集合。

```
self.calendarDayImageViews = [_calendarDayImageViews sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    if ([(UIView *)obj1 tag] < [(UIView *)obj2 tag]) {
        return NSOrderedAscending;
    }
    else if([(UIView *)obj1 tag] > [(UIView *)obj2 tag]){
        return NSOrderedDescending;
    }
    else{
        return NSOrderedSame;
    }
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:20:52.190

你可以输出 tf,by

NSLog(@"%@",tf);

检查 tf 是否为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:08:16.613

好的，我找到了。我忘了释放一些东西，所以我的 UITextFields 确实在数组排序之前设置好了。我的错！

# php - 如何将自定义视图助手添加到 Zend Framework 2（beta 4）

> ID：11062923
> 
> 赞同：0
> 
> 时间：2012-06-16T11:16:07.760
> 
> 标签：php, dependency-injection, zend-framework2, zend-view

## 注意：这是一个老问题，这里的答案不再有效（自 beta5 起）。请参阅[*此*](https://stackoverflow.com/questions/11392624/how-to-add-custom-view-helpers-to-zend-framework-2)问题，了解如何使用 ZF2 稳定版进行操作。

我已经从手册中查看[了这个示例。](http://packages.zendframework.com/docs/latest/manual/en/zend.view.helpers.html#zend.view.helpers.register)请注意，这是 Zend 框架的第 2 版。

我创建了这个助手：

```
<?php
namespace Mats\Helper;    
use Zend\View\Helper\AbstractHelper;    
class SpecialPurpose extends AbstractHelper
{
    protected $count = 0;    
    public function __invoke()
    {
        $this->count++;
        $output = sprintf("I have seen 'The Jerk' %d time(s).", $this->count);
        return htmlspecialchars($output, ENT_QUOTES, 'UTF-8');
    }
}
?> 
```

然后尝试像这样注册它：

```
return array(
    'di' => array('instance' => array(
        'Zend\View\HelperLoader' => array('parameters' => array(
            'map' => array(
                'specialpurpose' => 'Mats\Helper\SpecialPurpose',
            ),
        )),
    )),
); 
```

但是在视图中执行此操作时，例如 add.phtml

```
<?php echo $this->specialPurpose(); ?> 
```

它会崩溃，说它找不到帮助者。

但是，在同一个 add.phtml 文件中我可以做

```
<?php $helper = new Mats\Helper\SpecialPurpose(); ?> 
```

并且可以访问它，所以我猜命名空间应该是正确的？

目前我在 Module.php 中注册它，但我也在其他地方尝试过。

*我的目标是在我的模块中的所有视图中访问视图助手，而不必在每个 phtml 文件中创建它的实例，也不必每次都在控制器中添加它。*

如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:28:10.193

ZF2 使用程序化工厂转移到服务经理，而 di 用作后备工厂。

对于视图，现在有视图管理器，并且由于服务解析在找到工厂后立即停止，因此通过 di 配置的助手不再起作用。

[现在您可以在ZfcUser 模块配置](https://github.com/ZF-Commons/ZfcUser/blob/dc26512d1624908e581b8810a9af362fb3347e23/config/module.config.php#L26)中找到如何注册帮助程序的示例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T15:26:05.937

添加自定义助手非常简单，只需在您的模块配置文件中添加一行，如下所示：

```
return array(
    'view_manager' => array(
        'helper_map' => array(
            'specialPurpose' => 'Mats\Helper\SpecialPurpose',
        ),
    ),
); 
```

# c++ - 静态断言检查静态常量类数据成员？

> ID：11062924
> 
> 赞同：5
> 
> 时间：2012-06-16T11:16:16.997
> 
> 标签：c++, class, c++11, static-assert

我有几个带有“静态常量”数据成员的类。我想知道如何在编译时使用 static_assert 检查它们的值。我可以将 static_assert 直接放在类体中吗？（将我的 static_assert 放在每个构造函数中并不是很实用。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T12:21:08.317

是`static_assert()`的，声明也可以放在任何地方。这包括一个类的主体：

```
class C {
public:
    enum E {
      A, B, C,
      NumEes
    };
    constexpr Foo foos[] = { {...}, {...}, {...} };
    static_assert( NumEes == sizeof foos / sizeof *foos, "size mismatch" );

    // ...
}; 
```

# php - PHP中的打印变量导致服务器返回false

> ID：11062925
> 
> 赞同：1
> 
> 时间：2012-06-16T11:16:22.147
> 
> 标签：php, variables, memory, printing, echo

我有 145064642 个字符长的 HTML 字符串，我正在尝试打印。

当我尝试对其进行 echo/var_dump/die 时，它​​会导致页面返回 false(0)，但如果我尝试仅打印变量的一半，它工作正常。

例子：

不工作：

`echo $MY_HTML_STR;` `die($MY_HTML_STR);` `var_dump($MY_HTML_STR)`

这两行中的每一个都有效：

`die(var_dump(substr($MY_HTML_STR,strlen($MY_HTML_STR)/2)));`

`die(var_dump(substr($MY_HTML_STR,0,strlen($MY_HTML_STR)/2)));`

但是当尝试将两者一起打印时：

```
var_dump(substr($MY_HTML_STR,strlen($MY_HTML_STR)/2));
die(var_dump(substr($MY_HTML_STR,0,strlen($MY_HTML_STR)/2))); 
```

它又崩溃了。

一种回显方式确实给了我一个错误：

```
echo <<<EOF
    TEXTTEXT...
       $MY_HTML_STR                   
    BLABLAHTML...
EOF; 
```

错误：`Fatal error: Out of memory (allocated 324009984) (tried to allocate 145090561 bytes) in .....page.php on line 675`

第 675 行是该`EOF;`行。该脚本使用 WAMPSERVER 在我的家用计算机上运行，​​并且 memory_limit 设置为 -1（无限制）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:45:40.857

检查输出缓冲是否打开。请记住，如果启用了输出缓冲，您输出的所有内容都将保存在内存中，直到输出被刷新（这也会在脚本关闭时隐式发生）。

在打印之前尝试 ob_end_clean() 看看是否可以解决您的问题。

另外，在打印之前尝试添加下面的代码。您可能处于嵌套输出缓冲中（例如，如果您在 php.ini 中启用它并在脚本开头调用 ob_start）

```
print ob_get_level();
exit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:35:00.427

echo 不喜欢太长的字符串。如果要打印，请使用 for 循环将其拆分为较小的字符串，substr() 大约为 10000 个字符或更小，如果这会出现问题。

您超出了内部写入缓冲区太多。

# mysql - 如何从活动资源中调用活动记录的操作方法？

> ID：11062928
> 
> 赞同：0
> 
> 时间：2012-06-16T11:17:15.293
> 
> 标签：mysql, ruby, ruby-on-rails-3

我有一个 Web 服务，为此我制作了两个应用程序，称为后端和前端。前端是一个活动资源客户端，我希望它从前端控制器的自定义操作方法调用后端控制器的自定义操作方法。我是 ROR 的新手。

**前端控制器**：

```
class ProductsController < ApplicationController

 def my_method

    # call custom action of backend's controller 

 end
.....

end 
```

**后端控制器：**

```
class ProductsController < ApplicationController

 def my_method

 # my code go here

 end

end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:46:41.880

如果您处理这两个应用程序不是一个更好的设计，那么前端应用程序与后端交互会抛出一个 API 吗？我建议你看看[这个](http://api.rubyonrails.org/files/activeresource/README_rdoc.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:52:11.827

调用`ProductsController.my_method` 但更好的是，将其设为`Products`模型，然后调用`Product.method`(any_params_you_want)

# c# - “类、结构或接口成员声明中的标记 '{' 无效”

> ID：11062933
> 
> 赞同：3
> 
> 时间：2012-06-16T11:18:18.353
> 
> 标签：c#, token

我在下面的 C# 代码中收到错误“类、结构或接口成员声明中的无效标记 '{'”。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication3
{
    class Program
    {
        static int a, b;
        void add(int x, int y);
        {
            int c= x+y;
            Console.WriteLine("addition is " + char);
        }

        static void Main(string[] args)
        {   

        }
   }
} 
```

您在解决问题方面的帮助将不胜感激。

谢谢你。

阿内斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T11:19:18.510

有错误，因为你在那里有分号并且有错误的变量名，修复：

```
void add(int x, int y)
{
    int c= x+y;
    Console.WriteLine("addition is " + c);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T11:23:38.853

删除方法声明后的分号`void add(int x, int y);`。将其更改为

```
void add(int x, int y) 
```

`char`里面是什么`Console.WriteLine("addition is " + char)`？更改`char`为`c`。

```
Console.WriteLine("addition is " + c); 
```

无需编写`c.ToString()`，因为当实体附加字符串时，它会自动调用其`ToString()`方法。（因为此方法适用于 .Net 的所有实体）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:24:40.863

在此方法声明后删除分号并在 Console.Writeline 中将 char 更改为 c

```
void add(int x, int y);
{
        int c= x+y;
        Console.WriteLine("addition is " + char);
    } 
```

而是写

```
 void add(int x, int y)
{
        int c= x+y;
        Console.WriteLine("addition is " + c);
    } 
```

# optimization - GCC -mthumb 反对 -marm

> ID：11062936
> 
> 赞同：17
> 
> 时间：2012-06-16T11:18:26.807
> 
> 标签：optimization, gcc, arm

我正在研究用 GCC 编译的 ARM C/C++ 代码的性能优化。CPU 是 Tegra 3。据我所知，标志`-mthumb`意味着生成旧的 16 位 Thumb 指令。在不同的测试中，我的性能提高了 10-15 `-marm`% `-mthumb`。

`-mthumb`仅用于兼容性和性能，而`-marm`通常更好？我问是因为 android-cmake`-mthumb`在发布模式和`-marm`调试中使用。这让我很困惑。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-16T17:58:01.203

Thumb 不是较旧的指令集，而是较新的指令集。当前版本是 Thumb-2，它是一个混合的 16/32 位指令集。Thumb1 指令集是原始 ARM 指令集的压缩版本。CPU 将获取指令，将其解压缩到 ARM 中，然后对其进行处理。如今（ARMv7 及更高版本），除了性能关键或系统代码之外，Thumb-2 是首选。例如，GCC 默认为 ARMv7 生成 Thumb2（就像您的 Tegra3），因为 16/32 位 ISA 提供的更高代码密度允许更好的 icache 利用率。但这是在普通基准测试中很难衡量的东西，因为大多数基准测试无论如何都适合 L1 icache。

有关更多信息，请查看 Wikipedia 站点：[http ://en.wikipedia.org/wiki/ARM_architecture#Thumb](http://en.wikipedia.org/wiki/ARM_architecture#Thumb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-16T10:41:41.693

ARM 是 32 位指令，因此在一条指令中有更多位可以做更多事情，而只有 16 位的 THUMB 可能必须在 2 条指令之间拆分相同的功能。基于非内存指令或多或少花费相同时间的假设，更少的指令意味着更快的代码。还有一些事情是 THUMB 代码无法完成的。

当时的想法是 ARM 将用于性能关键功能，而 THUMB（将 2 条指令放入 32 位字）将用于最小化程序的存储空间。

随着 CPU 内存缓存变得越来越重要，在 icache 中拥有更多指令是比每条指令的功能密度更大的速度决定因素。这意味着 THUMB 代码变得比等效的 ARM 代码更快。因此，ARM (corp) 创建了 THUMB32，它是一个可变长度指令，包含了大多数 ARM 功能。由于更好的缓存，THUMB32 在大多数情况下应该为您提供更密集和更快的代码。

# visual-studio-2010 - Windows 窗体中的 SHGetFolderPathA (VS2010)

> ID：11062937
> 
> 赞同：1
> 
> 时间：2012-06-16T11:18:30.740
> 
> 标签：visual-studio-2010, path, c++-cli, directory

我在 Visual Studio 2010（Windows 窗体）中遇到了 SHGetFolderPathA 的问题。我包含到项目中`ShlObj.h`并为按钮添加了此代码：

```
char SciezkaCookies[MAX_PATH];
HRESULT hr = ::SHGetFolderPathA(0, CSIDL_APPDATA, 0, SHGFP_TYPE_DEFAULT, SciezkaCookies); 
```

但是当我尝试编译我的项目时，视觉返回错误：

> 错误 LNK2028：未解析的令牌 (0A000012) “extern "C" long **stdcall SHGetFolderPathA(struct HWND** *,int,void *,unsigned long,char *)" (?SHGetFolderPathA@@$$J220YGJPAUHWND__@@HPAXKPAD@Z) 在函数中引用“私人：void __clrcall VoxPopuli::Form1::start_Click(类 System::Object ^,类 System::EventArgs ^)”(?start_Click@Form1@VoxPopuli@@$$FA$AAMXP$AAVObject@System@@P$ AAVEventArgs@4@@Z)

和

> 1>VoxPopuli.obj : 错误 LNK2019: 无法解析的外部符号 "extern "C" long **stdcall SHGetFolderPathA(struct HWND** *,int,void *,unsigned long,char *)" (?SHGetFolderPathA@@$$J220YGJPAUHWND__@@HPAXKPAD@Z ) 在函数“private: void __clrcall VoxPopuli::Form1::start_Click(class System::Object ^,class System::EventArgs ^)”中引用 (?start_Click@Form1@VoxPopuli@@$$FA$AAMXP$AAVObject@System @@P$AAVEventArgs@4@@Z)

我正在谷歌中寻找解决方案，但所有示例都不起作用；/

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:09:29.503

从 C++/CLI 调用像 SHGetFolderPath() 这样的原生 winapi 函数就很好，这是该语言擅长的，但你必须让链接器自己开心。使用该功能的[MSDN 库文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)（不是今天，站点已经关闭了一个星期）。在文章的底部，它列出了“Header”，这就是你发现你需要告诉编译器关于 shlobj.h 的方式。它还列出了“导入库”，这就是您需要告诉链接器的内容。导入库告诉链接器在运行时需要加载什么 DLL 来调用函数。

项目 + 属性、链接器、输入、附加依赖项。添加“shell32.lib”

或者您在源代码中使用#pragma 执行此操作，这是一种将链接指令传递给链接器的方法：

```
#include <shlobj.h>
#pragma comment(lib, "shell32.lib") 
```

应该说，这绝对是你真正希望别人处理的一个api函数。请注意 MSDN Library 文章如何也说该功能已弃用。跨 Windows 版本的标准文件夹路径有很多变化。您可以在 .NET 应用程序中随时使用“其他人”，Environment::GetFolderPath() 会为您执行此操作。还可以让您免于处理不同字符串类型的麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:25:40.163

您必须自己声明它以避免包含 Windows 标头 - 不是我责怪您这样做 - 但您已经破坏了名称，因此链接器无法从本机库中解析它。

哦，你在 C++/CLI 中？那么，也许编译器完全不喜欢对托管代码的本机调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:17:31.520

如果 .NET 解决方案可行，我会避免使用本机函数。尝试使用

```
 Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)); 
```

此处讨论了本机和 .NET 方法：http: [//bytes.com/topic/c-sharp/answers/269259-my-documents-path-c](http://bytes.com/topic/c-sharp/answers/269259-my-documents-path-c)

# zend-framework - 在zend框架中自动加载模型，模块内的表单

> ID：11062938
> 
> 赞同：0
> 
> 时间：2012-06-16T11:18:41.330
> 
> 标签：zend-framework, zend-autoloader

我的应用结构是这样的：

*   应用
    *   模块
        *   默认
        *   学生
            *   控制器
            *   形式
                *   学生家长.php
            *   楷模
            *   意见
            *   Boostrap.php

我在学生模块的表单文件夹中有一个 studentParent.php。

```
class Student_Form_studentParent extends Zend_Dojo_Form{
} 
```

每当我在学生模块的控制器中调用此表单类时，我都会收到类未找到错误我已将 Bootstrap.php 放在学生模块中。

```
class Student_Bootstrap extends Zend_Application_Module_Bootstrap
{

} 
```

这是我的 application.ini 文件配置

```
resources.frontController.params.displayExceptions = 0
resource.modules=""
resources.view = ""
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts"
resources.layout.layout = "main_template" 
```

我的 Bootstrap.php 文件：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
     protected function _initDefaultModuleAutoloader()
     {
         $moduleLoader = new Zend_Application_Module_Autoloader(
    array(
        "namespace" => '',
        "basePath"  => APPLICATION_PATH.'/modules/default'
        )
      );

          Zend_Controller_Action_HelperBroker::addPrefix('App_Action_Helper');

          return $moduleLoader;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:22:41.333

```
resource.modules="" 
```

应该：

```
resources.modules="" 
```

（即资源复数）。

我还建议您使用大写字母来开始您的类名，`Student_Form_StudentParent`而不是`Student_Form_studentParent`（文件名也需要`StudentParent.php`）。我想是个人偏好，但是如果框架以一种方式执行，而您的应用程序以另一种方式执行，那么您的类命名将不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:26:13.653

还有

```
$moduleLoader = new Zend_Application_Module_Autoloader(
array(
    "namespace" => '',
    "basePath"  => APPLICATION_PATH.'/modules/default'
    )
  ); 
```

**basePath**应该指向包含模块的目录，而不是像您的示例中那样指向特定的模块目录。

# c# - 如何控制 ToolStripStatusLabel 的 ToolTipText 的位置

> ID：11062945
> 
> 赞同：3
> 
> 时间：2012-06-16T11:19:14.950
> 
> 标签：c#, winforms, tooltip

我在位于 Windows 窗体底部的 StatusStrip 中有一个 ToolTipStatusLabel。当鼠标悬停在它上面时，我想显示一些信息。我找到了确实显示但向下和向右的 ToolTipText。当窗口最大化但闪烁严重时，它似乎在某种程度上出现（显示是一个列表，所以它可能很长）。

我找不到改变提示显示方式的方法，以便它向上和向右。我也找不到将工具提示附加到状态标签的方法。我已经读到我可以使用放置属性控制工具提示的位置，但它们不可用（据我所知（对于 StatusLable ToolTipText.

另一种方法是让我通过 StatusLabel 的 MouseEnter 和 MouseLeave 事件来处理这个问题，并编写某种无边框窗口。如果有其他方法，我宁愿不要。

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:52:15.537

尝试将工具提示附加到 StatusStrip 控件，然后从那里，您应该能够在标签的 MouseHover 事件上显示提示：

```
ToolTip tt = new ToolTip();

public Form1() {
  InitializeComponent();
}

private void toolStripStatusLabel1_MouseHover(object sender, EventArgs e) {
  tt.Show("This is my tool tip", 
          statusStrip1,
          new Point(toolStripStatusLabel1.Bounds.Right, 
                    toolStripStatusLabel1.Bounds.Top - 10));
}

private void toolStripStatusLabel1_MouseLeave(object sender, EventArgs e) {
  tt.Hide(statusStrip1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T16:50:29.977

Visual Studio 2017 ' ToolStripStatusLabel1 ToolTipText için;

```
Private Sub ssLDBStatus_MouseHover(sender As Object, e As EventArgs) Handles ssLDBStatus.MouseHover

    ToolTip1.SetToolTip(StatusStrip1, "test")

End Sub 
```

# cordova - Openlayers 地图不显示，直到地图 div 点击，然后在错误的位置

> ID：11062951
> 
> 赞同：1
> 
> 时间：2012-06-16T11:20:00.803
> 
> 标签：cordova, openlayers, openstreetmap

我正在尝试使用 PhoneGap 和 JQuery Mobile 将 OpenLayers OSM 地图放置在应用程序中，但在单击该区域或控件之前，该地图不会显示在 Xcode iOS 模拟器中。我已经阅读了相关问题并实施了“DeviceReady”检查，但这没有任何区别。

更重要的是，当我确实让地图出现时，它会以接近最大范围而不是放大的方式出现。我已将警报添加到代码中，并且发现警报 1 正确触发时，警报 2 不会触发。但是，如果我用 .zoomToMaxExtent 替换 .setCenter 和 .zoom 指令，它确实可以（尽管不点击地图仍然无法加载）。任何人都可以帮忙吗？

贾尔斯

```
<!DOCTYPE html> 
<html> 
<head> 
<title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="jquery.mobilecus-1.1.0.min.css"/>
        <script src="cordova-1.8.1.js"></script>
        <script src="js/OpenLayers.js"></script>
        <script src="js/jquery-1.7.2.js"></script>
        <script src="js/jquery.mobile-1.1.0.min.js"></script>
        <script src="js/sessionstorage.1.4.js"></script>

    <script type="text/javascript" charset="utf-8">

        var map

        function init() {
            map = new OpenLayers.Map("mapholder", {maxResolution:300});
            map.addLayer(new OpenLayers.Layer.OSM());
            var lonlat = new OpenLayers.LonLat( -0.1279688 ,51.5077286 )
            .transform(
                       new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
                       map.getProjectionObject() // to Spherical Mercator Projection
                       );
            var zoom=16;
            alert ("1!");
            //map.zoomToMaxExtent; //alert 2 fires if I uncomment this and comment 
// the 2 lines below
            map.setCenter (lonlat);
            map.zoom (zoom);
            alert ("2!"); // doesn't fire with setCenter and zoom lines active, and 
// map  doesn't center or zoom either.
        }

    $(function() { //ready

    <!-- JQUERY STUFF TRIMMED -->

    }); //end ready

        function onBodyLoad(){
            document.addEventListener("deviceready",init(),false);
        }

   </script>

</head>

<body onload="onBodyLoad();"> 
<div data-role="page" id="page1" class="page">
    <!-- page 1 stuff here -->
</div><!-- /page -->

<div data-role="page" id="page2" class="page">
    <div data-role="header" data-id="fixedheader" data-position="fixed" >   
    <h1>Fixed header</h1>
    </div><!-- /header -->

    <div data-role="content">
    <div id="leftbar">
      <img src="images/leftbar.png">
    </div><!-- /leftbar -->
    <div id="mapview">
        <div id = "mapholder">
        <!-- map should load here -->
        </div>
    </div><!-- /mapview -->
    </div><!-- /content -->

    <div data-role="footer"data-id="fixedfooter" data-position="fixed">
    <a id="ForwardButton">Forward</a><a id = "BackButton" href="#page2">Back</a>
    </div><!--/footer -->
</div><!-- /page -->

</body>
</html> 
```

* * *

好的，我尝试从头开始重建我的文件，从简单的地图视图开始并添加回其他页面组件。似乎这不是 OpenLayers 问题，而是与页面或 div 加载有关 - 我的应用程序布局在同一个 html 文件中有两个单独的页面，第二页上有地图，这似乎是导致问题的原因。将地图交换为第一页上的内容（因此地图是您在加载 html 时首先看到的内容），它工作正常 - 但作用于第二页上 div 的 jQuery 脚本现在不起作用！现在我已经澄清了这个问题，我将寻找解决方案，如有必要，发布一个更严格定义的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:59:20.670

改变你的功能

```
 function onBodyLoad(){
      init();
      document.addEventListener("deviceready",init(),false);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T05:12:04.307

这段代码：

```
document.addEventListener("deviceready",init(),false); 
```

立即调用 init()，而不是在分派事件时传递对要调用的函数的引用。

实际上， init 是在 onload 处理程序中调用的，而不是作为设备就绪处理程序调用的，这正是您想要的。

试试这个：

```
document.addEventListener("deviceready",init,false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T09:45:08.413

我以前遇到过同样的问题，并找到了一个可行的解决方案，但感觉有点hacky。问题是由于某种原因 OpenLayers 使图块不可见，因此解决方案是在地图加载时使它们可见：

```
$(document).delegate("#map-page", "pageshow", function() {
    $(".olLayerDiv").children("div").not(":visible").show();
}); 
```

# opencl - 通知 OpenCL 内核许多内存对象的正确方法？

> ID：11062955
> 
> 赞同：7
> 
> 时间：2012-06-16T11:20:22.160
> 
> 标签：opencl, gpgpu

在我的 OpenCL 程序中，我将最终得到 60 多个全局内存缓冲区，每个内核都需要能够访问这些缓冲区。让每个内核知道每个缓冲区的位置的推荐方法是什么？

缓冲区本身在应用程序的整个生命周期中都是稳定的——也就是说，我们将在应用程序启动时分配缓冲区，调用多个内核，然后只在应用程序结束时释放缓冲区。然而，它们的内容可能会随着内核读取/写入它们而改变。

在 CUDA 中，我这样做的方式是在我的 CUDA 代码中创建 60 多个程序范围的全局变量。然后，我会在主机上将分配的设备缓冲区的地址写入这些全局变量中。然后内核将简单地使用这些全局变量来找到它需要使用的缓冲区。

在 OpenCL 中执行此操作的最佳方法是什么？似乎 CL 的全局变量与 CUDA 的有点不同，但我无法找到关于我的 CUDA 方法是否有效的明确答案，如果可以，如何将缓冲区指针转换为全局变量。如果这不起作用，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:04:27.777

60 个全局变量肯定很多！您确定没有办法稍微重构您的算法以使用更小的数据块吗？请记住，每个内核都应该是一个最小的工作单元，而不是巨大的！

但是，有一种可能的解决方案。假设您的 60 个数组的大小已知，您可以将它们全部存储到一个大缓冲区中，然后使用偏移量来访问该大数组的各个部分。这是一个包含三个数组的非常简单的示例：

```
A is 100 elements
B is 200 elements
C is 100 elements

big_array = A[0:100] B[0:200] C[0:100]
offsets = [0, 100, 300] 
```

然后，您只需将 big_array 和偏移量传递给您的内核，您就可以访问每个数组。例如：

```
A[50] = big_array[offsets[0] + 50]
B[20] = big_array[offsets[1] + 20]
C[0] = big_array[offsets[2] + 0] 
```

我不确定这会如何影响您特定设备上的缓存，但我最初的猜测是“不太好”。这种数组访问也有点讨厌。我不确定它是否有效，但是您可以使用一些代码启动每个内核，这些代码提取每个偏移量并将其添加到原始指针的副本中。

在主机端，为了让您的阵列更易于访问，您可以使用 clCreateSubBuffer：[http](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateSubBuffer.html) ://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateSubBuffer.html这也允许您可以在没有偏移数组的情况下传递对特定数组的引用。

我认为这个解决方案不会比传递 60 个内核参数更好，但根据您的 OpenCL 实现的 clSetKernelArgs，它可能会更快。它肯定会减少参数列表的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:23:41.997

你需要做两件事。首先，使用每个全局内存缓冲区的每个内核都应该为每个内核声明一个参数*，*如下所示：

```
kernel void awesome_parallel_stuff(global float* buf1, ..., global float* buf60) 
```

以便列出该内核的每个已使用缓冲区。然后，在*主机*端，您需要创建每个缓冲区并使用`clSetKernelArg`将给定的内存缓冲区附加到给定的内核参数，然后再调用`clEnqueueNDRangeKernel`以启动聚会。

请注意，如果内核将在每次内核执行时继续使用相同的缓冲区，则您只需设置一次内核**参数**。我看到的一个常见错误可能会降低主机端的性能，`clSetKernelArg`那就是在完全没有必要的情况下重复调用。

# java - 编写 Java 服务器以支持使用远程处理的现有 .NET 客户端？

> ID：11062958
> 
> 赞同：0
> 
> 时间：2012-06-16T11:21:00.117
> 
> 标签：java, .net, interop, .net-remoting

我正在开发一个使用 .NET 2.0 远程处理编写的现有系统，以将许多嵌入式客户端集成到中央服务器。由于许多问题，希望用 Java 重写服务器。在这一点上更新客户端是不可行的；它们中有很多而且它们在地理上分散，因此更新可能会很昂贵。为此，我想知道有哪些解决方案可用于实现与现有无线协议兼容的 Java 服务器？

我知道 JNBridgePro，但不幸的是，它对于我们目前的预算来说太贵了。我还有来自*Microsoft® .NE​​T 和 J2EE 互操作性工具包*（Microsoft Press）一书的 CD，其中有一个来自 Intrinsyc Software 的名为“ja.net”的软件的副本，该软件承诺实现此功能，但为了使用它，您需要从 Intrinsyc 获得许可证，并且他们的网站没有响应（也许自从这本书出版以来他们已经停业了？）。

还有其他我不知道的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:28:48.680

不，没有这样的事情（定制商业解决方案除外）。但是，如果您需要内部解决方案，您可以：

1.  编写您自己的 .NET 远程处理适配器，它位于 .NET 客户端和 Java 服务器之间。
2.  .NET 适配器将请求转换为 Java 服务器已知的内容（可能是 Web 服务接口，通过 SOAP），响应也是如此。

因此，.NET 适配器类似于传递和映射组件，没有实际逻辑。这样，所有逻辑都可以在 Java 服务器中（这似乎是您想要的）。

这可能需要一些时间，但这直接取决于您拥有的客户数量以及请求和响应类型的数量。

# android - 在Android中遍历一个XML文件

> ID：11062961
> 
> 赞同：0
> 
> 时间：2012-06-16T11:21:11.050
> 
> 标签：android, xml, dom, saxparser

我正在 Android 中开发一个应用程序，我需要遍历一个 xml 文件。

我需要从给定位置来回遍历 xml。这意味着我开始解析文件，但在每一刻我都可以停下来倒退或继续。

我正在考虑使用 DOM，通过它的 for 循环，我可以控制它并做我想做的事。但是我要解析的 xml 文件至少有 8 Mb，并且由于 DOM 非常占用内存，因此似乎不是一个好的解决方案。

解决此问题的方法是不加载整个文档进行解析。喜欢将文档分成几部分，只将一部分加载到内存中并解析。当我结束这部分时，我加载另一个。当我想倒带时也是如此。

我的问题是，我怎样才能将文件分成几部分。因为它是一个 xml 文件，而孩子们的大小不一样？

例如：

```
<root>
   <child time="A">
     <sub1>1</sub1>
     <sub2>2</sub2>
   </child>

   <child time="B">
     <sub1>3</sub1>
   </child>

   <child time="C">
     <sub2>4</sub2>
   </child>
</root> 
```

如您所见，他们的孩子有不同的大小，我不知道如何以有效的方式将这样的文件分成几个部分。

谁能给我一个线索？

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:17:53.647

对于 XML，您通常必须做出选择。DOM 是内存密集型的，SAX 不能倒退，手工制作的解析器创建和维护起来很繁琐。

如果你能负担得起消耗数十 MB 的内存，那就简单地使用 DOM。

SAX 和手动解析之间的决定取决于您实际需要返回的频率以及此时您是否可以承受延迟。

如果你不能，你将不得不实现一个带有预计算的手工解析器。例如，可以使用 SAX、与[CountingInputStream](http://commons.apache.org/io/apidocs/org/apache/commons/io/input/CountingInputStream.html)结合使用或手动进行预计算。`n`您将预先计算每个-th元素的开始和结束偏移量，`child`并将其存储为间隔数组，如下所示：

```
public class Interval {
    public int startOffset;
    public int endOffset;
}

Interval[] precomputedOffsets; 
```

的值`n`，即页面大小，可能是 20 左右。平衡它以控制内存消耗和返回性能之间的权衡。

现在，如果您知道需要在运行时转到 item `i`，您将在输入流上调用`reset`和`skip(precomputedOffsets[i / n])`，并从那里手动解析`i % n`剩余`child`元素。

# java - 你好世界不在 IntelliJ Idea 中运行

> ID：11062972
> 
> 赞同：-2
> 
> 时间：2012-06-16T11:23:01.237
> 
> 标签：java, eclipse, intellij-idea

我在 Eclipse 上工作了很多年。决定尝试 IntelliJ Idea 后。Bua 也是简单的 java Hello World 不运行！它只是什么也没发生。我应该检查/调整什么？谢谢。

```
package test; 
/** * Created with IntelliJ IDEA. 
    * Date: 16/06/12 
    * Time: 12:13 
    * To change this template use File | Settings | File Templates. 
*/ 
public class Main { 
    public static void main(String ...args)
       { System.out.println("Hello World"); } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T07:55:45.707

这是因为共享网盘的问题。如果共享网络磁盘 IntelliJ 上的默认用户文件夹将无法正常工作。查找idea.properties并修复路径不使用共享网盘

# php - PHP 查找文本模式

> ID：11062977
> 
> 赞同：0
> 
> 时间：2012-06-16T11:23:30.100
> 
> 标签：php, match

如何在以下字符串中找到 3 个字符的文本模式：一个大写或小写字母字符（a 到 z 或 A 到 Z）后跟一个数字字符（0 到 9），后跟一个大写或小写字母字符（a 到z 或 A 到 Z)

例如 x4A 或 A3j 或 A7X 或 h1k

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:25:39.773

我认为你应该使用

```
/[a-zA-Z][0-9][a-zA-Z]/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:27:34.163

尝试 ：

```
[a-zA-Z]{1}[0-9][a-zA-Z]{1} 
```

演示：[http ://regexr.com?3199m](http://regexr.com?3199m)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:27:35.117

```
$matches = array();
preg_match('/[a-z]\d[a-z]/i', $my_string, $matches);
// now $matches contains all you want 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T11:26:44.310

试试这个：

```
preg_match_all('/[A-Za-z]{1}[0-9]{1}[A-Za-z]{1}/',$string,$matches); 
```

`$matches`现在包含所有匹配项。

# java - 通配符编译时错误

> ID：11062984
> 
> 赞同：1
> 
> 时间：2012-06-16T11:24:15.400
> 
> 标签：java, generics

在泛型中查看此示例：

```
// abstract class   
public abstract class Shape {
    public abstract void draw(Canvas c);

}

//implementation of shape class
public class Rectangle extends Shape {
    private int x, y, width, height;
    public void draw(Canvas c) { ... }
}

//function to add rectangle object in a list
public void addRectangle(List<? extends Shape> shapes) {
    shapes.add(0, new Rectangle()); // compile-time error!
} 
```

为什么这是编译错误？我无法弄清楚它是类型列表中的形状，它们是形状的子类，而矩形是形状的子类。

请帮我弄清楚这个查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:29:16.997

这是因为`List< ? extends Shape >`意味着传递的真实对象可能被声明为`List<Rectangle>`or `List<Circle>`。

如果您尝试将 Rectangle 插入到 Circles 列表中，那将是一个真正的问题。

要使插入成功，您需要使用`super`，如`List< ? super Shape >`.

这意味着传递给这个函数的真实对象可能只声明为`List<Shape>`或什至`List<Object>`。这样的列表肯定可以同时包含 Rectangles 和 Circles （嘿，在后一种情况下，甚至 Apples 和 Oranges 也是如此）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T11:29:29.007

[Java 教程](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)中解释了这个**确切的**示例：

> 像往常一样，使用通配符的灵活性需要付出一定的代价。`shapes` 这个代价是现在在方法体中写入是非法的。例如，这是不允许的：
> 
> ```
> public void addRectangle(List<? extends Shape> shapes) {
>     // Compile-time error!
>     shapes.add(0, new Rectangle());
> } 
> ```
> 
> 您应该能够弄清楚为什么不允许上面的代码。第二个参数的类型 `shapes.add()`是`? extends Shape`- 的未知子类型`Shape`。由于我们不知道它是什么类型，所以我们不知道它是否是 `Rectangle`;的超类型。它可能是也可能不是这样的超类型，因此将 a 传递到那里是不安全的`Rectangle`。

# c++ - c++11和MPI库的兼容性

> ID：11062986
> 
> 赞同：5
> 
> 时间：2012-06-16T11:24:30.787
> 
> 标签：c++, linux, gcc, c++11, mpi

在我的 linux 中安装 gcc 和 mpich 库后，我可以使用编译器编译我的代码`mpicxx`。只需升级 gcc 编译器就可以将 c++11 与 mpi 库一起使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T11:57:09.760

据我所知，没有问题，因为您不应该以任何方式篡改 MPI 指令，除此之外，MPI 和 C++11 关注点是正交的。

顺便说一句，在我的机器上发出`mpic++`或`mpicxx`（gcc 4.6.3，MPICH2 1.4.1）简单地转换为

`c++ -Wl,-Bsymbolic-functions -Wl,-z,relro -I/usr/include/mpich2 -L/usr/lib -lmpichcxx -lmpich -lopa -lmpl -lrt -lcr -lpthread`

您可以在自己的机器上使用`mpic++ -show`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T20:23:28.990

除非观察到一些强烈的代码生成更改（例如不同的数据对齐或不同的 ABI），否则使用较新版本更改编译器通常应该可以工作。MPI 是一个库，因此它不关心您使用的是什么语言结构，只要这些结构不会弄乱它的内部结构。由于您将使用 C++11 作为它提供的线程，因此您应该注意一些事项。

首先，多线程并不总是与 MPI 配合得很好。大多数 MPI 实现本身都是内部线程的，但默认情况下**不是**线程安全的。

其次，MPI 定义了四个级别的线程支持：

*   `MPI_THREAD_SINGLE`: 不支持线程 - MPI 只有在被单线程应用程序使用时才能安全运行；
*   `MPI_THREAD_FUNNELED`: 部分线程支持 - MPI 可以在多线程应用程序中使用，但只有*主线程*可以调用 MPI；
*   `MPI_THREAD_SERIALIZED`: 部分线程支持 - MPI 可以在多线程应用程序中使用，但不允许在不同线程中进行并发调用。也就是说，每个线程都可以调用 MPI，但必须有序列化机制；
*   `MPI_THREAD_MULTIPLE`：全线程支持 - 可以从多个线程自由调用 MPI。

事实是大多数 MPI 实现都支持开箱即`MPI_THREAD_FUNNELED`用，其中大多数仅支持`MPI_THERAD_SINGLE`. 例如，必须使用非默认选项编译 Open MPI 以获得完整的线程支持。

多线程应用程序应该使用 in 来初始化 MPI 库`MPI_Init_thread()`，`MPI_Init()`并且进行初始化调用的线程成为*主线程*- 相同的*主线程*只允许在支持的级别为 时调用 MPI `MPI_THREAD_FUNNELED`。一个给出`MPI_Thread_init()`所需的线程支持级别，该函数返回可能低于所需*的**支持级别。*在后一种情况下，正确和可移植的程序应该相应地采取行动，或者切换到非线程操作，或者中止向用户发送相应的错误消息。

有关 MPI 如何与线程一起工作的更多信息，请参见[MPI Standard v2.2](http://www.mpi-forum.org/docs/mpi22-report/node257.htm)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T17:51:41.250

将 C++11 与 MPI 结合起来是没有问题的。

mpic++ 和 mpicxx 只是包装器，使用标准编译器或用户指定的编译器。因此，您可以定义 mpic++ 和 mpicxx 使用与 C++11 兼容的编译器。

我不知道 mpich 的确切命令。对于 opemmpi，您需要设置以下环境标志：

```
export OMPI_CC='gcc-mp-4.7'
export OMPI_CXX='g++-mp-4.7' 
```

就我而言，我使用 openmpi 1.5.5 和 macports 的 gcc 4.7 编译器。

# c - 是否可以成功链接具有不同导出 API 但具有相同对象名称的静态 linux 库？

> ID：11062987
> 
> 赞同：1
> 
> 时间：2012-06-16T11:24:30.453
> 
> 标签：c, linux, linker

我有两个 linux 静态库。

它们完全分开编译并且具有不同的名称，并且它们发布的 API 也不同，但是它们构建的 C 文件使用相同的名称 - 因此组成库的目标文件具有相同的名称。

当我来链接这些库时，我是否会因为对象名称相同而出现链接问题，即使函数名称是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:46:12.850

`.o`（对象）文件的名称无关紧要。只要它们不定义具有重复名称的外部函数/对象（在 C 意义上的对象，而不是“对象文件”意义上），就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:54:26.117

具有相同文件名的静态库没有问题 - 您可以使用绝对文件路径链接它们以避免歧义。只要它们没有任何共同的*符号*名称（即任何导出的函数或具有相同名称的变量），您应该没问题。

也就是说，拥有两个同名的库会导致混乱和未来的灾难，更不用说如果您决定动态链接这些库会使事情变得复杂。

如果我是你，我会调查在项目管理级别解决此命名冲突的可能解决方案。也许这两者中的一个可以轻松地重命名？

# jquery - 如何通过javascript中的url将对象作为单个var传递

> ID：11062994
> 
> 赞同：6
> 
> 时间：2012-06-16T11:25:09.070
> 
> 标签：jquery, url, object

如何通过url传递一个js对象

我有一个 js 对象

```
var info = {
    status: 1 ,
    time: "10:00:00-12:00:00" ,
    weekdays: {
      "monday",
      "tuesday"
    }
}; 
```

我**不想使用序列化**，我想要**“localhost/jstest/#test?info”之类的东西**

有什么办法可以做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T11:28:12.300

您将不得不以一种或另一种方式对其进行序列化。您可以按照您建议的方式执行此操作，方法是将表示您的对象的 JSON 字符串存储在 eg[`sessionStorage`](https://developer.mozilla.org/en/DOM/Storage#sessionStorage)中，并传递密钥的名称：

```
sessionStorage.setItem("info", JSON.stringify(info));
window.location("localhost/jstest/#test?info"); 
```

然后，您可以访问存储在该密钥中的数据：

```
var info = JSON.parse(sessionStorage.getItem("info")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:29:14.250

您可以使用主题标签创建自己的查询字符串，然后从代码中的 url/hashtag 获取数据以检索数据。

像这样：

`localhost/jstest/#info!status=1!time=10:00:00-12:00:00!weekdays=monday,tuesday`

然后，您可以在此处找到有关如何读取主题标签数据的更多帮助：[Working with single page website and maintain state using a URL hash and jQuery](https://stackoverflow.com/questions/4113397/jquery-url-hash)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-25T02:13:43.187

这是我的解决方案。在这里，您首先将对象转换为 JSON，然后使用 base64 编码使该字符串安全，以便在 URL 中使用。请注意，这使用了一个额外的插件`jquery.base64.js`来处理 base64。您可以使用自己的库。

```
function packer(o){
    var str = JSON.stringify(a);
    var mess = $.base64.encode(str);
    return mess.replace(/\+/g,'-').replace(/\//g,'_').replace(/=/g,',');
}
function unpacker(str){
    var mess  = str.replace(/-/g,'+').replace(/_/g,'/').replace(/,/g,'=');
    mess = $.base64.decode(mess);
    return JSON.parse(mess);
} 
```

# node.js - 使用 nodejs 异步和请求模块

> ID：11062995
> 
> 赞同：7
> 
> 时间：2012-06-16T11:25:10.973
> 
> 标签：node.js, asynchronous, httprequest, async.js

我正在尝试同时使用异步和请求模块，但我不明白回调是如何传递的。我的代码是

```
var fetch = function(file, cb) {
    return request(file, cb);
};

async.map(['file1', 'file2', 'file3'], fetch, function(err, resp, body) {
    // is this function passed as an argument to _fetch_ 
    // or is it excecuted as a callback at the end of all the request?
    // if so how do i pass a callback to the _fetch_ function
    if(!err) console.log(body);
}); 
```

我正在尝试按顺序获取 3 个文件并连接结果。我的头陷入了我尝试过的回调和我能想到的不同组合中。谷歌没有太大帮助。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-16T12:36:09.933

请求是异步函数，它不返回任何东西，当它的工作完成时，它会回调。从[请求示例](https://github.com/mikeal/request#examples)中，您应该执行以下操作：

```
var fetch = function(file,cb){
     request.get(file, function(err,response,body){
           if ( err){
                 cb(err);
           } else {
                 cb(null, body); // First param indicates error, null=> no error
           }
     });
}
async.map(["file1", "file2", "file3"], fetch, function(err, results){
    if ( err){
       // either file1, file2 or file3 has raised an error, so you should not use results and handle the error
    } else {
       // results[0] -> "file1" body
       // results[1] -> "file2" body
       // results[2] -> "file3" body
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T12:39:17.550

在您的示例中，该`fetch`函数将被调用三次，对于作为第一个参数传递给的数组中的每个文件名调用一次`async.map`。第二个回调参数也将传递给`fetch`，但该回调由异步框架提供，您必须在`fetch`函数完成其工作时调用它，并将其结果作为第二个参数提供给该回调。`async.map`当所有三个`fetch`调用都调用了提供给它们的回调时，将调用您作为第三个参数提供的回调。

见[https://github.com/caolan/async#map](https://github.com/caolan/async#map)

因此，要在代码中回答您的具体问题，您提供的回调函数将在所有请求结束时作为回调执行。如果您需要将回调传递给`fetch`您，请执行以下操作：

```
async.map([['file1', 'file2', 'file3'], function(value, callback) {
    fetch(value, <your result processing callback goes here>);
}, ... 
```

# java - 如何获取刚刚从相机拍摄的图像的名称？

> ID：11062996
> 
> 赞同：2
> 
> 时间：2012-06-16T11:25:15.010
> 
> 标签：java, android

正如标题所说，我想获取刚刚从相机拍摄的文件的名称。我有一个完整的图像路径，比如这样`sdcard\image.jpg`。那么如何在 android 中获取 image.jpg 名称？任何示例代码都会有所帮助。

**更新**

或者我怎样才能简单地获取刚刚从相机拍摄的照片的名称？我是否知道图像的路径并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:40:53.070

```
 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
```

在 onActivityResult() 方法中：

```
 Bitmap thumbnail = (Bitmap) data.getExtras().get("data"); 
                path=getLastImagePath();      
                int dotposition= path.lastIndexOf("/");
                imageName = path.substring(dotposition + 1, path.length()); 
```

这将为您提供“path”变量中最后一个图像的路径和“imageName”变量中的图像名称。