# StackOverflow 问答 12191000-12191999

# python - 如何在 osqa 中更改默认用户配置文件地址

> ID：12191006
> 
> 赞同：0
> 
> 时间：2012-08-30T06:24:41.073
> 
> 标签：python, osqa

我正在开发一个基于网络的程序，我想在其中使用 osqa 作为问答模块。我不再需要 osqa 配置文件，所以我想将用户重定向到另一个地址。现在 osqa 中的 url 配置文件是[这样](http://www.hamcodi.ir/qa/users/8/hamedkh)的，我想把它改成[这个](http://www.hamcodi.ir/members/8/hamedkh)。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:43:40.153

如果我理解正确，您想显示基于 Web 程序的用户配置文件而不是 OSQA 配置文件，对吗？

我看到的最简单的方法是从正确的 Django 视图重定向用户。在 forum/views/users.py 转到第 340 行，这是 user_profile 视图。该方法的第一行如下所示：

```
profileUrl = 'http://www.hamcodi.ir/members/' + str(user.id) + '/' + user.username + '/'
return HttpResponseRedirect(profileUrl) 
```

然后对您的程序进行适当的处​​理。

# ios - iOS - 选择选项卡时的后退按钮

> ID：12191009
> 
> 赞同：0
> 
> 时间：2012-08-30T06:24:49.747
> 
> 标签：ios, uinavigationcontroller, tabs

我有一个 UITabBarController。当我选择第一个选项卡以外的选项卡时，我希望隐藏选项卡栏（我通过 hidesBottomBarWhenPushed 实现）并且导航栏有一个后退按钮（不是普通的，而是默认箭头）（进入第一个选项卡）。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:14:40.427

我将在下面回答你的问题，但我不得不说这是一个非常不标准的用户界面，它混合了隐喻。如果你真的想推送到不同的视图控制器，你真的*不*应该使用标签栏。您可能应该只使用简单的按钮来访问您的辅助视图控制器。如果 Apple 会拒绝像您想象的那样使用标签栏的应用程序，我不会感到惊讶。

无论如何，要回答您的问题，您不想尝试向辅助视图添加“后退”按钮，而只想正确实现导航控制器。然后，当您推送到辅助视图时，您会自动获得后退按钮。而且您也不必担心与隐藏标签栏相关的愚蠢，因为当您推送到另一个视图时，它也会被推开。

所以，考虑这个例子，你有一个带有按钮“一”、“二”和“三”的标签栏。但是，不是一个正确的标签栏控制器配置，你会有这样的东西，其中“一个”在导航控制器上，并且上面有一个简单的标签栏用户界面控件，如果你碰巧点击第二个或第三个选项卡，它只会推送到相应的视图。因此，从逻辑上讲，它可能看起来像这样（即使您不使用情节提要，这也可能有助于可视化潜在的配置）：

![示例故事板](../Images/e85a214f4ee7f6eca6362a92d0d1fd02.png)

因此，在主视图控制器（“One”）上，您将添加一个标签栏，其中包含`IBOutlet`：

```
@property (weak, nonatomic) IBOutlet UITabBar *tabBar; 
```

然后我会在中配置该标签栏`viewDidLoad`，例如：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tabBar.delegate = self;
    self.tabBar.selectedItem = [self.tabBar.items objectAtIndex:0];
} 
```

显然，视图控制器本身需要是 a `UITabBarDelegate`，并且您需要 a`didSelectItem`可以执行 push segue 或使用您的`navigationController`to `pushViewController`。而且，很明显，您将希望更改对标签栏按钮上实际标签的引用`@"Two"`和`@"Three"`实际标签，但希望这能给您带来想法：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
    if ([item.title isEqualToString:@"Two"])
    {
        // put code for pushing to second view controller here
    }
    if ([item.title isEqualToString:@"Three"])
    {
        // put code for pushing to third view controller here
    }
} 
```

我还希望主视图控制器确保在您弹出后重新出现时将所选项目设置回第一个项目：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    self.tabBar.selectedItem = [self.tabBar.items objectAtIndex:0];
} 
```

无论如何，如果你这样做，标签栏就不会隐藏（因为它不再是控制器，而只是第一个标签上的用户界面元素）。这可能是实现所需用户界面的最简单方法。

# git - git：只保留特定文件的最新版本

> ID：12191010
> 
> 赞同：8
> 
> 时间：2012-08-30T06:24:57.017
> 
> 标签：git, pdf, version-control, github, binaryfiles

我在 github 中保留了一些[LaTex 课程笔记。](https://github.com/adamatan/technion_android_crash_course_notes)我的同事不知道如何使用 LaTex，并要求我将最终的 PDF 放在 repo 中。

将二进制构建结果保存在存储库中通常是一个坏主意，并且在每次推送后将[PDF 作为外部文件](https://github.com/adamatan/technion_android_crash_course_notes/downloads)上传并不方便。

有没有办法在 repo 中只保留最新版本的 PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:41:04.013

如果您已经在 github 上，则有一个名为“下载”的面板，您可以在其中添加您拥有的任何文件。如果您想在推送时将其添加到挂钩中，则可能有一个 API 调用。您也可能只是构建 + 将 pdf 复制到您的保管箱帐户/rsync 到一个公共文件夹/使用另一个 share-my-files-API/..

您最好生成 pdf + 通过电子邮件将其发送给他们，这也是由钩子触发的。

如果您最终构建，将 pdf 添加到 repo，然后大量更新该文件，repo 将变得非常大，因为它必须坚持的差异将占用大量不必要的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T07:01:51.770

没有从存储库中删除旧版本文件的好方法。每个提交都是安全的，这意味着提交的标识符是使用每个文件的内容构建的。有很多方法可以[重写](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)git 存储库的历史，但这样做会完全破坏任何协作的机会，因为每次重写历史时基本上都是在创建一个新的存储库。

另一种方法是使用专门为此目标设计的[git 附件：在小型存储库中管理大文件。](http://git-annex.branchable.com/)不幸的是，这是一个相当新的特性，而且它不是官方 Git 的一部分，所以对它的支持不是很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-01T23:50:53.663

我有完全相同的问题。几年过去了，我认为现有的答案不再是最佳的。如果我理解正确的话，github 下载不再是免费功能——只有在您为 github 帐户付费时才能获得此功能。

尽管 Sergiu Dumitriu 的回答指出了用 git 重写历史的缺点是正确的，但我和 OP 都在进行单独的项目，对于这样的项目，重写历史实际上并不是什么大不了的事。

以下是截至 2022 年对我来说效果很好的解决方案。我在 docs/ 子目录中为我的项目制作了一个 Github Pages 网页。当我将我的乳胶文件编译为 pdf 时，我的 makefile 会将 pdf 复制到该目录中。pdf 文件受版本控制。随着时间的推移，这个 pdf 文件的二进制差异会大大增加我的目录树的大小。但是，我可以使用 git filter-repo（第三方工具）从我的项目历史记录中删除该文件。然后我的 makefile 脚本将文件的最新版本复制回 docs/ 子目录。这是我的 makefile 的相关部分的样子：

```
forget_pdf_history:
    test -e $(BOOK).pdf || exit 1
    git commit --allow-empty -a -m "updating before erasing history of docs/$(BOOK).pdf"
    git filter-repo --path docs/$(BOOK).pdf --invert-paths
    make reconfigure_git
    cp $(BOOK).pdf docs
    git add docs/$(BOOK).pdf
    git push --force -u origin master

reconfigure_git:
    git remote add origin https://github.com/bcrowell/ransom.git
    git config remote.origin.url git@github.com:bcrowell/ransom.git 
```

无可否认，我必须重新构建 git 的配置非常难看，但它确实有效，并且它允许我在不使用 github 以外的任何资源的情况下为这本书提供一个合理的网站。

# jquery - jQuery Accordion HTML 链接问题

> ID：12191012
> 
> 赞同：2
> 
> 时间：2012-08-30T06:24:58.880
> 
> 标签：jquery, html, css, hyperlink

我注意到当我在手风琴的 html 部分输入一个链接时，该链接显示为粗体并且没有打开。我该如何解决这个问题？我想过创建一个类或 ID，但在摆弄之后，我无法让它工作。[http://jsfiddle.net/q2Gm9/](http://jsfiddle.net/q2Gm9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:43:59.617

给目标空白然后它会工作

```
<dl class="accordion">

<dt><a href="">Panel 1</a></dt>
<dd><a href="http://www.google.com" target="_blank">Google</a></dd>

</dl>​ 
```

只是`font-weight:bold`从你的班级中删除

```
 a {
       display: block;
        color: black;
        font-weight: bold;
      } 
```

它应该是

```
 a {
       display: block;
        color: black;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:37:02.900

尝试在脚本中使用这样的东西

```
 window.open("www.myaddress.com","_self") 
```

# php - 如何为动态创建的元素分配唯一 ID - Javascript

> ID：12191013
> 
> 赞同：2
> 
> 时间：2012-08-30T06:25:00.573
> 
> 标签：php, javascript, dynamic, element, unique

您好，我正在尝试使用文本框生成动态 div 并在其中删除按钮。在提交表单时，我想要所有动态生成的文本框值，如何为文本框元素分配唯一 ID。文本框的 ID / 名称应该是唯一的.. 才能正确获取所有值。请建议..

我的代码：

```
<HTML>
<HEAD>
<TITLE> Add/Remove dynamic elements</TITLE>
<SCRIPT language="javascript">
    function addRow(divId) {
        count = 0;
        count++;

        var parentDiv = document.getElementById(divId);

        // create a div dynamically
        var eleDiv = document.createElement("div");
        eleDiv.setAttribute("name", "olddiv");
        eleDiv.setAttribute("id", "olddiv");

         // create a textbox dynamically
        var eleText = document.createElement("input");
        eleText.setAttribute("type", "text");
        eleText.setAttribute("name", 'textbox' + count);
        eleText.setAttribute("id", "textbox");

        // create a delete button dynamically
        var eleBtn = document.createElement("input");
        eleBtn.setAttribute("type", "button");
        eleBtn.setAttribute("value", "delete");
        eleBtn.setAttribute("name", "button");
        eleBtn.setAttribute("id", "button");
        eleBtn.setAttribute("onclick", "deleteRow('button')");

        // append new div to parent div 
        parentDiv.appendChild(eleDiv);

        // append textbox & button to new div 
        eleDiv.appendChild(eleText);
        eleDiv.appendChild(eleBtn);

    }

    function deleteRow(tableID) {
            var div = document.getElementById('olddiv');
            if (div) {
                div.parentNode.removeChild(div);
            }
    }

</SCRIPT> 
```

```
<form name="objForm" action="test1.php">
    <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />
    <div id="dataTable" width="350px"><INPUT type="text" name="txtData" /></div>
    <input  type="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T06:27:26.170

您可以保留一个全局计数变量（在函数 divId 之外）。每次创建一个新的 div 时，都会向计数器添加 1 并将其用作文本框的唯一 ID。

```
<script language="javascript">
    var globalcount=0;
    function addRow()
    {
         globalcount++;
         //the rest
    }

</script> 
```

其余的就像你已经为这个名字所做的一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:28:37.643

要直接回答您的问题，您可以尝试：

```
var textboxCount = 0;

/* In your function */
// create a textbox dynamically
var eleText = document.createElement("input");
eleText.setAttribute("type", "text");
eleText.setAttribute("name", 'textbox' + count);
eleText.setAttribute("id", "textbox" + textboxCount);
textboxCount += 1; //Increment the count 
```

这将创建带有 id 、 等的`textbox0`文本`textbox1`框`textbox2`。

或者，为了更有效的选择，您可以将创建的所有文本框存储在一个数组中，如下所示：

```
var textboxes = new Array();

/* In your function */
// create a textbox dynamically
var eleText = document.createElement("input");
eleText.setAttribute("type", "text");
eleText.setAttribute("name", 'textbox' + count);

textboxes.push(eleText); 
```

现在`e = document.getElementById('textbox4');`你可以打电话而不是打电话`e = textboxes[4];`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T06:29:29.807

此函数将生成一个唯一 ID：

```
function uniqueId() {
    var uid;
    do {
        uid = 'uid-' + Math.random();
    } while (document.getElementById(uid));
    return uid;
} 
```

# c - C中的静态数组初始化

> ID：12191016
> 
> 赞同：3
> 
> 时间：2012-08-30T06:25:10.713
> 
> 标签：c, arrays, pointers

我正在阅读Yashavant Kanetkar的书[Let us C。](https://rads.stackoverflow.com/amzn/click/com/8176566217)

在指针数组部分有一段代码给我带来了问题：

```
int main()
{
    static int a[]={0,1,2,3,4}; //-----------(MY PROBLEM)
    int *p[]={a,a+1,a+2,a+3,a+4};
    printf("%u %u %d\n",p,*p,*(*p));
    return 0;
} 
```

我不明白为什么必须将数组`a`初始化为静态。我尝试在没有 static 关键字的情况下对其进行初始化，但出现“非法”错误。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T06:36:56.917

C90 (6.5.7) 有

> 具有静态存储持续时间的对象的初始化程序或具有聚合或联合类型的对象的初始化程序列表中的所有表达式都应为常量表达式。

而且您正在初始化一个具有聚合类型的对象，因此在编译时必须知道该值，并且在这种情况下不知道自动变量的地址。

请注意，这在 C99 (6.7.8/4) 中已更改

> 具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

对具有聚合或联合类型的对象的约束已被删除，我还没有发现它放在其他地方。C99 编译器应该接受删除了 static 的代码（`gcc -std=c99`例如，这似乎证实了我没有忽略其他地方的约束）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:29:00.797

我的猜测是数组初始化程序的内容必须是编译时常量。通过`static`在函数中使用局部变量，您基本上可以使该变量成为全局变量，但具有局部范围除外。

# javascript - 使用 html5 FileReader 访问本地文件

> ID：12191021
> 
> 赞同：4
> 
> 时间：2012-08-30T06:25:57.717
> 
> 标签：javascript, html, sandbox, filereader

我正在尝试制作一个从本地存储的文本文件中读取文本的离线应用程序。我知道这可以通过 html5 和 FileReader 实现。我想硬编码相对路径。我已经阅读了这些文档，它们都基于一个 FileList 数组。但是因为我只是在做一个带有静态路径的文件，所以我无法理解它。这很愚蠢，我知道，但到目前为止我所拥有的：

```
var file = "data/data";
var reader = new FileReader();
reader.readAsText(file);
alert(reader.String); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:28:48.060

FileReader API 允许您读取用户在文件输入中选择的文件。

它不允许网页的作者从访问者的系统中选择要阅读的文件。那将是一个安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T19:10:31.530

使用 ActiveX 可以做到这一点，如果您从未使用过它，这并不难做到。查看更多信息： http: [//msdn.microsoft.com/en-us/library/2z9ffy99 (v=vs.84).aspx](http://msdn.microsoft.com/en-us/library/2z9ffy99(v=vs.84).aspx)

只是意味着用户可能不得不同意让 ActiveX 运行.. 诚然，这可能会吓跑一些人。所以这取决于你实际需要多少。

# jquery - Jquery将逗号添加到输入中的粘贴字符串

> ID：12191024
> 
> 赞同：1
> 
> 时间：2012-08-30T06:26:15.597
> 
> 标签：jquery

我想在将粘贴字符串复制到输入后添加一个逗号

```
$("#keywords").bind('paste', function() {

   var a=$("#keywords").val();
   alert(a);
  }); 
```

我尝试了上面的代码来检查粘贴的值是否传递到变量中。在警报中它显示空值。我怎么知道粘贴的字符串的值是否传递到变量中，然后将逗号附加到变量中。

这是[小提琴](http://jsfiddle.net/v9NG3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:33:46.610

这里的粘贴事件在实际内容粘贴到控件之前触发/触发，如果您执行超时并找出粘贴之前和之后的值，您可以找出并添加一个；到最后。

我在这里找到了一个类似的线程[Catch paste input](https://stackoverflow.com/questions/686995/jquery-catch-paste-input)，你也可以找到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:30:41.883

`paste`在粘贴的文本可用作文本框上的值属性之前触发该事件。您需要等待几毫秒，然后只需将逗号添加到值中，如下所示：

```
$("#keywords").on('paste', function() {
    var self = this, timer = setTimeout(function() {
        self.value=self.value+',';
    }, 300);
});​ 
```

[**小提琴**](http://jsfiddle.net/v9NG3/1/)

# java - 使用线程同时运行两个独立的任务

> ID：12191029
> 
> 赞同：11
> 
> 时间：2012-08-30T06:26:48.833
> 
> 标签：java, multithreading, threadpool

我研究了很多关于java线程的教程，但我找不到我的答案。

我的问题是：如何同时运行两个独立的线程？

我的情况是：我有两个任务；

1.  将一些数据保存到数据库
2.  在移动设备上发送推送通知。

由于这两个任务是独立的，我想同时执行它们。

我尝试使用具有两个线程的线程池，但问题是数据库任务很快完成，但发送推送通知需要一些时间。

因此，当一项任务完成而另一项任务仍处于挂起状态时，它会引发异常。

我的代码也没有问题，因为它在不使用线程的情况下运行良好。

提前致谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-30T06:30:29.963

```
new Thread(new Runnable() {
    public void run() {
        System.out.println("Look ma, no hands");
    }
}).start();

new Thread(new Runnable() {
    public void run() {
        System.out.println("Look at me, look at me...");
    }
}).start(); 
```

工作得很好...

我个人更喜欢使用[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)。

**更新了 ExecutorService 示例**

所以我写了这个非常简单的例子......

基本上它使用一个`ExecutorService`来运行几个简单的任务。就目前而言，这两个任务将彼此并行运行（同时）

```
public static void main(String[] args) throws InterruptedException {
    ExecutorService service = Executors.newFixedThreadPool(2);
    service.submit(new PathScanner());
    service.submit(new Counter());

    service.shutdown();
    service.awaitTermination(1, TimeUnit.DAYS);

    System.exit(0);
}

public static class PathScanner implements Callable<Object> {

    @Override
    public Object call() throws Exception {
        scan(new File("C:/"), 0);
        return null;
    }

    protected void scan(File path, int deepth) {
        if (deepth < 15) {
            System.out.println("Scanning " + path + " at a deepth of " + deepth);

            File[] files = path.listFiles();
            for (File file : files) {
                if (file.isDirectory()) {
                    scan(file, ++deepth);
                }
            }
        }
    }
}

public static class Counter implements Callable<Object> {

    @Override
    public Object call() throws Exception {
        for (int index = 0; index < 1000; index++) {
            Thread.sleep(1);
            System.out.println(index);
        }
        return null;
    }
} 
```

运行...

现在更改`ExecutorService service = Executors.newFixedThreadPool(2);`为`ExecutorService service = Executors.newFixedThreadPool(1);`并再次运行它。你看到区别了吗？

这是控制执行程序在处理队列时可以使用的同时线程数的方法。

制作更多任务并将它们添加到队列中，看看你得到了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T10:40:50.550

我有一个使用多线程在多个文件夹中搜索文件的用例。作为输入，我只有根目录路径，并且可以有任意数量的子目录。假设 - 文件将始终仅在其中一个子目录中可用。

```
import java.io.File;
import java.io.FileFilter;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class SearchFile implements Runnable {

    private String dirPath = null;

    public SearchFile() {

    }

    public SearchFile(String dirPath) {
        this.dirPath = dirPath;
    }

    public static void main(String[] args) {
        long startTime = System.currentTimeMillis();
        File dir = new File("D://");
        checkRootDirectory(dir);
        long endTime = System.currentTimeMillis();
        System.out.println("Time taken: "+(endTime - startTime) + "ms");
    }

    private static void checkRootDirectory(File root) {
        File[] list = root.listFiles(new FileFilter() {

            @Override
            public boolean accept(File pathname) {
                return pathname.isDirectory() && !pathname.isHidden();
            }
        });

        ExecutorService service = Executors.newFixedThreadPool(list.length);
        for (File directories : list) {
            String dirPath = directories.getAbsolutePath();
            Thread thread = new Thread(new SearchFile(dirPath));
            service.execute(thread);
        }
        service.shutdown();
        while(!service.isTerminated()) {

        }
    }

    @Override
    public void run() {
        checkEachDirectory(new File(dirPath), "Temp.txt");
    }

    private void checkEachDirectory(File root, String fileName) {
        File[] list = root.listFiles();
        if (null != list) {
            for (File dir : list) {
                if (dir.isDirectory()) {
                    checkEachDirectory(dir, fileName);
                } else if (fileName.equalsIgnoreCase(dir.getName())) {
                    System.out.println(
                            "Thread name: " + Thread.currentThread().getName() + " Founded @" + dir.getAbsolutePath());
                }
            }
        }
    }
} 
```

# javascript - jquery not recognised.How 使 Jquery 工作？

> ID：12191032
> 
> 赞同：3
> 
> 时间：2012-08-30T06:26:59.493
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui, asp.net-mvc-4

我的代码是

```
 <script src="~/Scripts/jquery-1.8.0.min.js"></script>

   <script type="text/javascript">
    $(document).ready(function() {
        alert("hello");
   });
   </script> 
```

如何使 Jquery 工作。谢谢。

更新：“你好”味精没有显示。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T06:36:21.020

该`~`符号只有在服务器中执行时才能代表网站的根。使用以下内容替换脚本包括：

```
<script src="@Url.Content("~/Scripts/jquery-1.8.0.min.js")"></script> 
```

希望这会对你有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:35:38.727

我会检查你的路径。~/ 是在 ASP.NET 服务器端控件上解析的，但不是在输入到页面中的普通 HTML 标记上。我认为您想要以下内容。

传统的 ASP.NET

```
<script src="<%=ResolveUrl("~/Scripts/jquery-1.8.0.min.js")%>"></script> 
```

ASP.NET MVC 剃刀

```
<script src="@Url.Content("~/Scripts/jquery-1.8.0.min.js")"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:35:46.537

尝试使用来自 CDN 的 jquery 脚本

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

否则你的代码可以 **[工作演示](http://jsfiddle.net/24x2B/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:35:51.973

试试这个可能对你有用

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

# android - 将图像从移动设备（iOS 或 android）发送到服务器的更好技术

> ID：12191033
> 
> 赞同：0
> 
> 时间：2012-08-30T06:27:00.690
> 
> 标签：android, ios, utf-8, client-server, base64

您能否建议我将图像从 iphone/android 传输到服务器的有效编码技术。

**base64**编码太容易了，但我听说不推荐，因为它会将原始图像的大小增加到 37%

我应该使用**base64 编码**、**UTF-8 编码**还是读写**流**将图像发送到服务器？

我想在作为客户端服务器应用程序的图像共享应用程序中使用它，客户端会将他们的图像上传到服务器。

你能告诉我其他可能的技术吗？使用哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:43:54.267

对于手机，尤其是 Android 流媒体将是您的最佳选择。

无论您选择 base64 还是 UTF-8 格式，最终都会在后台打开一个流。

唯一重要的是您的应用程序消耗的 RAM 空间，如果您的客户端在发送之前尝试自己对其进行编码，您将使用更多内存并且某些设备将耗尽内存，这更加无能为力将图像上传到服务器所需的时间或服务器使用的磁盘空间。

所以我的建议是：不要操纵图像，只需按原样流式传输，使用您的客户可以找到的最常见的系统工具。

# javascript - 按下按钮时添加无限滚动路径

> ID：12191034
> 
> 赞同：1
> 
> 时间：2012-08-30T06:27:09.073
> 
> 标签：javascript, jquery, path, scroll

希望有人可以帮助我。我正在尝试创建一个过山车，只要添加新轨道，它就必须下降。我在顶部添加了一个按钮，它有 2 条路径。这些路径必须一次生成一个，但在彼此下方。到目前为止我的代码：

```
$(window).load(function(){
     $(document).ready();
            function pathOne(){
                var roadDiv = document.createElement("div");
                var roadImage = document.createElement("div");

                roadDiv.className = "road1";

                roadImage.className = "roadImage1"

                $('.wrapper').append(roadDiv);
                $(roadDiv).append(roadImage);

                $.fn.scrollPath("getPath")
                .moveTo(340, 50, {})
                .lineTo(340, 300, {rotate: .1})
                .lineTo(340, 300, {rotate: .7})
                .lineTo(620, 600, {})
                .rotate(0, {})
                .lineTo(620, 820, {})
                .rotate(- .8, {})
                .lineTo(160, 1280, {})
                .rotate(0, {})
                .lineTo(160, 1484, {})
            }

            function pathTwo(){
                var roadDiv = document.createElement("div");

                var roadImage = document.createElement("div");

                roadDiv.className = "road2";
                roadImage.className = "roadImage2"

                $('.wrapper').append(roadDiv);
                $(roadDiv).append(roadImage);

                $.fn.scrollPath("getPath")
                //.moveTo(160, 1580, {})
                .lineTo(160, 1580, {})
                .rotate(-.8, {})
                .lineTo(-80, 1820, {})
                .rotate(0, {})
                .lineTo(-80, 2190, {})
                .rotate(.8, {})
                .lineTo(180, 2460, {})
                .rotate(0, {})
                .lineTo(180, 2680, {})
                .rotate(-.8, {})
                .lineTo(50, 2820, {})
                .rotate(0, {})
                .lineTo(50, 2918, {})
            }

            $(".addRow").click(function(){

                if ($(".wrapper").is(':empty')) {
                    pathOne();
                    //alert("added pathOne");
                }
                else if ( $('.road1').length > 0 ){
                    pathTwo();
                    alert("added pathTwo");
                    return;
                }
                $(".wrapper").scrollPath({drawPath: false, wrapAround: false, scrollBar: true});
            });

            function ordinal(num) {
                return num + (
                    (num % 10 == 1 && num % 100 != 11) ? 'st' :
                    (num % 10 == 2 && num % 100 != 12) ? 'nd' :
                    (num % 10 == 3 && num % 100 != 13) ? 'rd' : 'th'
                );
            }
    }); 
```

演示可以在这里看到： [过山车轨道](http://graahf.dk/rollercoaster/rollercoaster_demo.html)

我的问题是，当我添加新曲目时，它最常将其添加到其他曲目下方并在曲目 1（pathOne）和曲目 2（pathTwo）之间切换。从音轨 1 开始，按下按钮添加音轨 2，再次按下它应该在音轨 2 下方添加音轨 1，依此类推。

任何帮助都会很甜蜜:)

我正在使用[这里的插件](http://joelb.me/scrollpath/)

# linux - 手机上的 SD 卡图像在 PC 上不显示

> ID：12191036
> 
> 赞同：1
> 
> 时间：2012-08-30T06:27:09.790
> 
> 标签：linux, mobile, sd-card

在 USB 大容量存储模式下访问 SD 卡时，手机上 SD 卡上新添加的图像不会显示在 PC 上。但是，如果从手机中取出卡并重新插入，则可以在 PC 上看到图像（SD 卡连接为 USB 大容量存储器）。

其次，当在 PC 上看不到图像时，如果从读卡器访问同一张卡，则 SD 卡上会出现丢失的图像。

这是否意味着这是手机上的 USB 大容量存储问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:29:38.937

好吧，终于找到了这个问题的根本原因。问题是当手机处于大容量存储模式 (MSM) 时，linux 会维护一个缓存。每次手机在 MSM 中连接时，它都会在插入时插入驱动程序，在移除时插入 rmmods。但是在驱动程序被 rmmod 之后，linux 不会删除缓存。因此，以下修复解决了该问题：

```
sync;
echo 3 > /proc/sys/vm/drop_caches;
insmod driver.ko; 
```

第二个命令在插入驱动程序之前删除缓存。

# c++ - 如何将库添加到xcode

> ID：12191039
> 
> 赞同：5
> 
> 时间：2012-08-30T06:27:18.293
> 
> 标签：c++, xcode, frameworks

这已经被问过很多次了，但我总是觉得很难理解。它很简单。您如何将库和/或框架添加到 xcode 和/或您的 xcode 项目。我需要从下载库到在代码中键入#include 之间的所有步骤。但我还需要每一步背后的一些背景信息，否则它不会留在我的脑海中，我会在一周后回到这里。请记住，我对 xcode 开发环境的了解有限。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:52:09.623

按照屏幕截图，你很高兴

![在此处输入图像描述](../Images/331c1a7272af2eaa4e7b51c69e6618ba.png)

![在此处输入图像描述](../Images/83e3a59533e4e3a0aea99cd6f8f8fa33.png)

![在此处输入图像描述](../Images/04ce0e348643716cc456cc57c52ca75e.png)

# javascript - jquery mobile在页面更改之间停止

> ID：12191040
> 
> 赞同：0
> 
> 时间：2012-08-30T06:27:24.387
> 
> 标签：javascript, jquery, jquery-mobile

我有一个 jQuery 移动应用程序，它是分页的，但都是一个 DOM。但是我注意到，当单击链接时，即：`<a href="#page2">Page 2</a>`有时需要一段时间才能加载下一页上的任何内容。更糟糕的是，jQuery mobile 保留了第一页之前的文本，并且在过渡期间，文本和元素都可以看到 - 太丑了！

我的问题是我可以使用什么事件来隐藏这些东西/在两者之间显示一个微调器，以向用户显示正在发生的事情，但他们需要耐心，同时不要让点击/点击开心。

理想情况下，我想要 2 个事件。一开始一站。因此：

1.  event1 开始，我隐藏第 1 页并显示微调器
2.  微调器继续旋转并且工作正在完成（已加载谷歌地图等）
3.  event2 触发，页面完成加载。我显示第 2 页并停止微调。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:25:37.387

您可以使用在加载新页面之前触发的文档事件“pagebeforechange”来触发事件 1，并使用页面事件“pageshow”来触发事件 2

```
$(document).on( "pagebeforechange", function( e, data ) {
    showSpinner();
});

$("div[data-role]='page'").on("pageshow",function(event,data) {  
    hideSpinner();
}); 
```

# php - 在 Yii SQL 命令对象中添加 case when 语句

> ID：12191043
> 
> 赞同：6
> 
> 时间：2012-08-30T06:27:45.617
> 
> 标签：php, yii

在 YII 中，我已经有一个工作功能：

```
$sql = Yii::app()->db->createCommand();
$sql->select('A.name as client_name, B.name as product_name');
$sql->join('tableb B', 'A.id=B.product_id');
$sql->from('tablea A');
$sql->where('1 = 1'); 
```

现在我正在尝试向 product_name 字段添加一个微小的逻辑，在 MYSQL 中它将是

```
CASE WHEN B.name = "sth"
THEN B.name 
ELSE B.another_name
END AS product_name 
```

在 select() 函数中阻塞时是否可以添加这种**情况？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T07:18:40.970

我在这里用谷歌搜索了 2 个小时后在这里问了这个问题，并在这里搜索了很多。但是10分钟后，我发现我得到了答案……

在查看了 select() 方法的源代码之后，

```
public function select($columns='*', $option='')
{
    if(is_string($columns) && strpos($columns,'(')!==false)
        $this->_query['select']=$columns;
    else
    {
        if(!is_array($columns))
            $columns=preg_split('/\s*,\s*/',trim($columns),-1,PREG_SPLIT_NO_EMPTY);

        foreach($columns as $i=>$column)
        {
            if(is_object($column))
                $columns[$i]=(string)$column;
            else if(strpos($column,'(')===false)
            {
                if(preg_match('/^(.*?)(?i:\s+as\s+|\s+)(.*)$/',$column,$matches))
                    $columns[$i]=$this->_connection->quoteColumnName($matches[1]).' AS '.$this->_connection->quoteColumnName($matches[2]);
                else
                    $columns[$i]=$this->_connection->quoteColumnName($column);
            }
        }
        $this->_query['select']=implode(', ',$columns);
    }
    if($option!='')
        $this->_query['select']=$option.' '.$this->_query['select'];
    return $this;
} 
```

注意第一个if语句，当传递一个字符串并且它包含“（”时，$columns变量将直接返回，这真的是我要找的！

所以解决方案是：

```
$sql->select('A.name as client_name, (CASE WHEN B.name = "sth" THEN B.name ELSE B.product_name END ) as product_name'); 
```

注意别名部分“as product_name”应该在 () 部分之外。

# openssl - OpenSSL rsa_private_decrypt 错误：0406506c:lib(4):func(101):reason(108)

> ID：12191045
> 
> 赞同：1
> 
> 时间：2012-08-30T06:27:56.030
> 
> 标签：openssl

我正在尝试在 openssl 中使用函数 RSA_private_decrypt 使用私钥解密。演示测试程序完成，但不幸的是它不起作用。所有代码都是从 openssl 中的原始测试模块修改的。

我检查了密钥和密文，一切正常。编译后运行程序报错：error:0406506C:lib(4):func(101):reason(108) 什么意思？如何找到原因？任何人都可以帮助我吗？谢谢大家！

```
/* test vectors from p1ovect1.txt */

#include <stdio.h>
#include <string.h>

#include "e_os.h"

#include <openssl/crypto.h>
#include <openssl/err.h>
#include <openssl/rand.h>
#include <openssl/bn.h>
#ifdef OPENSSL_NO_RSA
int main(int argc, char *argv[])
{
    printf("No RSA support\n");
    return(0);
}
#else
#include <openssl/rsa.h>

#define SetKey \
  BN_dec2bn(&key->n, n); \
  BN_dec2bn(&key->d, d); \
  BN_dec2bn(&key->e, e); \
  return 0;

int get_key(RSA *key)
{
    static unsigned char n[] =
"9371630458513538614700745634649520797491568155168133301060614397"
"9751660657428852845087672310448592787191681231125442581642251207"
"6274432436386486727760163436686441566403892007588636246674079539"
"8424907957591099362409156898826262775257410650392782996749570788"
"0595781666554070793222145163225943407723575126201759";

    static unsigned char e[] = "65537";

    static unsigned char d[] =
"1898149483594133261692443925634950319146483294806014944814053061"
"9149847316274937709472416531865886761023275045576683779067080313"
"8692140564270476598322907775584173165745869684564814756756282410"
"5523409115330652968833389931424803742277184063260858317510246331"
"1992939017567767983973542782514344223016146752560753";

    static unsigned char p[] =
"1898149483594133261692443925634950319146483294806014944814053061"
"9149847316274937709472416531865886761023275045576683779067080313"
"8692140564270476598322907775584173165745869684564814756756282410"
"5523409115330652968833389931424803742277184063260858317510246331"
"1992939017567767983973542782514344223016146752560753";

    static unsigned char q[] =
"\x00\xC9\x7F\xB1\xF0\x27\xF4\x53\xF6\x34\x12\x33\xEA\xAA\xD1\xD9"
"\x35\x3F\x6C\x42\xD0\x88\x66\xB1\xD0\x5A\x0F\x20\x35\x02\x8B\x9D"
"\x89";

    static unsigned char dmp1[] =
"\x59\x0B\x95\x72\xA2\xC2\xA9\xC4\x06\x05\x9D\xC2\xAB\x2F\x1D\xAF"
"\xEB\x7E\x8B\x4F\x10\xA7\x54\x9E\x8E\xED\xF5\xB4\xFC\xE0\x9E\x05";

    static unsigned char dmq1[] =
"\x00\x8E\x3C\x05\x21\xFE\x15\xE0\xEA\x06\xA3\x6F\xF0\xF1\x0C\x99"
"\x52\xC3\x5B\x7A\x75\x14\xFD\x32\x38\xB8\x0A\xAD\x52\x98\x62\x8D"
"\x51";

    static unsigned char iqmp[] =
"\x36\x3F\xF7\x18\x9D\xA8\xE9\x0B\x1D\x34\x1F\x71\xD0\x9B\x76\xA8"
"\xA9\x43\xE1\x1D\x10\xB2\x4D\x24\x9F\x2D\xEA\xFE\xF8\x0C\x18\x26";

  BN_dec2bn(&key->n, n);
  BN_dec2bn(&key->d, d);
  BN_dec2bn(&key->e, e);
  return 0;
}

static int pad_unknown(void)
{
    unsigned long l;
    while ((l = ERR_get_error()) != 0)
      if (ERR_GET_REASON(l) == RSA_R_UNKNOWN_PADDING_TYPE)
    return(1);
    return(0);
}

static const char rnd_seed[] = "string to make the random number generator think it has entropy";

int main(int argc, char *argv[])
    {
    int err=0;
    int v;
    RSA *key;
    unsigned char ptext[256];
    unsigned char err_msg[256];
    static unsigned char ptext_ex[] = "\x54\x85\x9b\x34\x2c\x49\xea\x2a";
    unsigned char ctext_ex[]=
    "11A10DBC32E75CD4A4A5FBDF79B9DCEB5FAA8CCA56925F8FFD09265CAE63"
    "02F4FAD8CF647D2C64107EEE254033B81DD22DACAE7ECBE873CD958D248C"
    "5F60CD223D5C963077406E398232CF4C36715FD63F640F1AF1E44E86D244"
    "6FB6B773A17B790938FAC5DFE9257639D60FB1FA4B2082098068549D37C6"
    "EBD5164E77A68876";
    int plen;
    int clen = 0;
    int num;
    int n;

    CRYPTO_malloc_debug_init();
    CRYPTO_dbg_set_options(V_CRYPTO_MDEBUG_ALL);
    CRYPTO_mem_ctrl(CRYPTO_MEM_CHECK_ON);

    RAND_seed(rnd_seed, sizeof rnd_seed); /* or OAEP may fail */

    plen = sizeof(ptext_ex) - 1;

    key = RSA_new();
    clen = get_key(key);
    printf("clen[%d]\n", clen);
    key->flags |= RSA_FLAG_NO_CONSTTIME;

    key->p=NULL;
    key->q=NULL;
    key->dmp1=NULL;
    key->dmq1=NULL;
    key->iqmp=NULL;
    printf("n[%s]\n", BN_bn2dec(key->n));
    num = strlen(ctext_ex);
    printf("num[%d]\n", num);
    memset(ptext, '\0', sizeof(ptext));
    num = RSA_private_decrypt(num, ctext_ex, ptext, key,
                  RSA_PKCS1_PADDING);
    ERR_error_string(ERR_get_error(), err_msg);
    printf("num[%d], err[%s]\n", num, err_msg);
    for(v=0; v<6; v++) {
        printf("ptext%d[%d]\n", v, ptext[v]);
    }
    RSA_free(key);

    CRYPTO_cleanup_all_ex_data();
    ERR_remove_thread_state(NULL);

    CRYPTO_mem_leaks_fp(stderr);

#ifdef OPENSSL_SYS_NETWARE
    if (err) printf("ERROR: %d\n", err);
#endif
    return err;
    }
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:40:12.340

呃……我终于找到原因了。密文需要先转换为 HEX。在我这样做之后，它工作得很好。这真是一个愚蠢的问题。

# php - 在正则表达式中循环

> ID：12191051
> 
> 赞同：2
> 
> 时间：2012-08-30T06:28:06.617
> 
> 标签：php, regex, pattern-matching, iteration

正则表达式能找到一个模式吗？

> {{foo.bar1.bar2.bar3}}

组中的位置

> $1 = foo $2 = bar1 $3 = bar2 $4 = bar3 等等..

这就像一遍又一遍地重新做表达式，直到它无法获得匹配。

我正在处理的当前表达式是

```
(?:\{{2})([\w]+).([\w]+)(?:\}{2}) 
```

这是来自正则表达式的链接。

> [http://regexr.com?3203h](http://regexr.com?3203h)

--

好的，我想我没有很好地解释我在这里想要实现的目标。

假设我正在尝试替换所有

**.barX**在**{{foo . . . }}**

我的预期结果应该是

```
$foo->bar1->bar2->bar3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:03:38.627

假设匹配中不允许使用大括号，这应该可以工作：

```
preg_match_all(
    '%(?<=     # Assert that the previous character(s) are either
     \{\{      # {{
    |          # or
     \.        # .
    )          # End of lookbehind
    [^{}.]*    # Match any number of characters besides braces/dots.
    (?=        # Assert that the following regex can be matched here:
     (?:       # Try to match
      \.       #  a dot, followed by
      [^{}]*   #  any number of characters except braces
     )?        # optionally
     \}\}      # Match }}
    )          # End of lookahead%x', 
    $subject, $result, PREG_PATTERN_ORDER);
$result = $result[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:42:27.470

我不是 PHP 人，但我设法在这里构建了这段代码：

```
preg_match_all("([a-z0-9]+)",
"{{foo.bar1.bar2.bar3}}",
$out, PREG_PATTERN_ORDER);

foreach($out[0] as $val)
{
echo($val);
echo("<br>");
} 
```

上面的代码打印以下内容：

```
foo 
bar1
bar2
bar3 
```

它应该允许您使用简单的正则表达式彻底搜索给定的字符串。我认为您还应该能够通过删除大括号并拆分字符串来获得所需的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:40:08.413

我不这么认为，但是在这样的句点上拆分字符串相对容易：

```
$str = "{{foo.bar1.bar2.bar3}}";
$str = str_replace(array("{","}"), "", $str);
$values = explode(".", $str);

print_r($values);  // Yields an array with values foo, bar1, bar2, and bar3 
```

**编辑：**响应您的问题编辑，您可以`barX`通过执行以下操作替换字符串中的所有内容：

```
$str = "{{foo.bar1.bar2.bar3}}";
$newStr = preg_replace("#bar\d#, "hi", $str);

echo $newStr; // outputs "{{foo.hi.hi.hi}}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:35:35.587

我不知道 PHP 中用于提取结果的正确语法，但您可以这样做：

```
\{{2}(\w+)(?:\.(\w+))*\}{2} 
```

这将在第一个捕获组中捕获第一个命中，在第二个捕获组中捕获其余命中。据我所知，regexr.com 缺乏展示这一点的能力。试试[Expresso](http://www.ultrapico.com/Expresso.htm)，你就会明白我的意思。

# vb.net - 如何在 Win32_Directory.Name 中表示网络路径

> ID：12191052
> 
> 赞同：1
> 
> 时间：2012-08-30T06:28:13.567
> 
> 标签：vb.net, vb6, macros

我的 vb 宏监视文件夹路径以创建新文件。我可以监视本地驱动器中的路径。如何提供网络驱动器的路径？？？

下面是我的代码。这里 strDirToMonitor 是我需要提供网络路径（\share\files）的地方

但是 \ 不工作..

```
strComputer = "."
strDirToMonitor = "c:\\\\test"
'// Monitor Above every 10 secs...
strTime = "10"

Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")

Set colMonitoredEvents = objWMIService.ExecNotificationQuery _
("SELECT * FROM __InstanceOperationEvent WITHIN " & strTime & " WHERE " _
    & "Targetinstance ISA 'CIM_DirectoryContainsFile' and " _
        & "TargetInstance.GroupComponent= " _
            & "'Win32_Directory.Name=" & Chr(34) & strDirToMonitor & Chr(34) & "'") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:30:20.037

网络路径指定如下：`\\COMPUTUER_NAME\SHARE\PATH`. 显然，您需要像使用本地路径一样转义（加倍）反斜杠

但是，您可以对网络和本地路径执行的操作存在一些差异，因为远程路径不受本地计算机控制 - 所以我不确定您尝试完成的操作是否有效。

编辑：正如评论中所讨论的......

```
strComputer = "CompB"
strDirToMonitor = "c:\\\\test"
'// Monitor Above every 10 secs...
strTime = "10"

Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")

Set colMonitoredEvents = objWMIService.ExecNotificationQuery _
("SELECT * FROM __InstanceOperationEvent WITHIN " & strTime & " WHERE " _
    & "Targetinstance ISA 'CIM_DirectoryContainsFile' and " _
        & "TargetInstance.GroupComponent= " _
            & "'Win32_Directory.Name=" & Chr(34) & strDirToMonitor & Chr(34) & "'") 
```

# mongodb - 为什么MongoDB中没有连接关系？

> ID：12191053
> 
> 赞同：2
> 
> 时间：2012-08-30T06:28:17.847
> 
> 标签：mongodb

这些天我正在学习 MongoDB。我发现 MongoDB 不支持加入。我只想知道为什么MongoDB选择这样做？

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:33:13.927

1.  Mongo - 不是关系数据库，没有物理关系和约束。
2.  加入会扼杀可扩展性。

通常非规范化替换 sql join。

例如，在 stackoverflow 上你有问题和他的所有者，在 mongodb 中，将所有者数据去规范化并避免加入是正常的情况：

```
question
{
  _id,
  text,
  user_short :
  {
    id,
    full_name
  }
} 
```

这肯定会导致更新的额外复杂性，但它会在您读取数据时显着提高性能。对于大多数应用程序而言，读取率为 95%，而写入率仅为 5% 甚至更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:32:56.783

因为 MongoDb 是一个非关系型数据库。非关系数据库不支持连接，这是设计使然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-12T02:45:11.110

您现在可以在 Mongo 3.2 中使用[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)

`$lookup`接受四个参数

`from`：指定同一数据库中的集合以执行连接。from 集合不能被分片。

`localField`：指定从文档输入到 $lookup 阶段的字段。$lookup 对 from 集合的文档中的 localField 到 foreignField 执行相等匹配。

`foreignField`：指定来自集合中文档的字段。

`as`：指定要添加到输入文档的新数组字段的名称。新的数组字段包含来自 from 集合的匹配文档。

```
db.Foo.aggregate(
  {$unwind: "$bars"},
  {$lookup: {
    from:"bar",
    localField: "bars",
    foreignField: "_id",
    as: "bar"

   }},
   {$match: {
    "bar.testprop": true
   }}
) 
```

# collision-detection - 搞清楚椭球-椭球碰撞检测

> ID：12191060
> 
> 赞同：2
> 
> 时间：2012-08-30T06:28:54.000
> 
> 标签：collision-detection, game-physics

我一直在为一个项目编写碰撞检测代码，并试图找出用于检测对象之间碰撞的方法。由于我使用椭球来测试关卡几何，我也想将它们用于对象之间的碰撞。问题在于弄清楚到底是怎么做的。我见过的一种方法将椭圆体转换为球体和轴对齐的椭圆体，这看起来是一个很好的解决方案，但该方法涉及找到特征向量和其他我还不太了解并且宁愿不了解的高级东西必须实施。

通过应用一系列仿射变换，应该很容易将椭圆体转换为球体和倾斜的椭圆体。我读过倾斜的椭圆仍然是椭圆的，所以倾斜相当于旋转和缩放，我假设同样的原理适用于椭圆体。但是，我不确定如何确定新椭圆的旋转和轴长。如果我知道这一点，就很容易使椭圆体轴对齐。在那之后，我希望能够进行扫描测试，但我不确定它的效率如何，而且我还没有弄清楚要使用的方程式，尽管我可能会用一点工作。

如果椭圆体不起作用，我也在考虑使用其他碰撞形状，但是能够为对象世界和对象对象碰撞使用相同的形状真的很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:28:41.410

你是对的，这很复杂。

有一篇题为[An Algebraic Approach to Continuous Collision Detection for Ellipsoids的论文](http://hal.inria.fr/hal-00646511/PDF/CCD.3.0.pdf)

[该站点](http://www.geometrictools.com/LibMathematics/Intersection/Intersection.html)的另一篇论文（[存档](http://web.archive.org/web/%2a/http://www.geometrictools.com/Documentation/IntersectionOfEllipsoids.pdf)）在[数学](http://www.geometrictools.com/Documentation/IntersectionOfEllipsoids.pdf)上描述了一种算法。

Matlab脚本[是两个椭圆体接触吗？](http://www.mathworks.com/matlabcentral/fileexchange/32172-are-two-ellipsoids-in-contact-algebraic-separation-condition-for-ellipsoids/content/Algebraic%20Separation%20Condition/Algebraic_Separation_Condition.m)，其中引用了上述论文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-27T12:29:54.877

**免责声明：此方法在某些情况下不起作用。我在发布答案后发现了这一点。但是，对于简单的用例，结果可能已经足够好了，这就是我将这个答案留在这里的原因。**

在如下图所示的情况下，我的方法返回 false。

[![在此处输入图像描述](../Images/d41f65925b697d08b80a626e82f35d21.png)](https://i.stack.imgur.com/oSYmj.png)

**原答案：**

我现在已经多次看到这个问题，但我设法想出了一个非常简单的解决方案：

为了检查两个球体之间的碰撞，我们通常希望使用它们的半径并查看它是否小于两个球体之间的距离。

对于椭球体，我们可以尝试做同样的事情。然而，整个椭球的半径是不同的。但这很容易实现，我们只需要知道我们想要获得半径的方向即可。

```
float EllipsoidRadius(VECTOR ellipsoidRadius, VECTOR direction)
{
    direction /= ellipsoidRadius;
    normalize(direction);
    return length(direction * ellipsoidRadius);
    // The * is just a multiplication
} 
```

我们知道我们的方向，这只是我们一个椭球体的位置减去另一个椭球体的位置。我们可以使用这个方向来获得两个椭圆体的半径，因为半径在相对两侧总是相等的（只要我们有轴对齐的椭圆体）。

```
bool EllipsoidIntersects(POINT positionA, VECTOR sizeA, POINT positionB, VECTOR sizeB)
{
    VECTOR direction = positionA - positionB;
    float distance = length(direction);

    float radiusA = EllipsoidRadius(sizeA, direction);
    float radiusB = EllipsoidRadius(sizeB, direction);

    return distance < radiusA + radiusB;
} 
```

现在我们知道了两个椭球的半径，我们可以使用良好的旧球体碰撞检查来查看它们是否发生碰撞。

# javascript - Android Web View 到 Android Java Activity 类

> ID：12191066
> 
> 赞同：1
> 
> 时间：2012-08-30T06:29:09.307
> 
> 标签：javascript, android, android-webview

是否可以制作一个 html 按钮，当我单击时，它将转到我的 android 活动类。就像在我查看 Activity 到另一个 Activity 时使用 Intent

有人有想法吗？

我的 JsInteface 类变成了这个

```
 public class JavaScriptInterface {
    Context mContext;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    public void showToast(String toast) {
        Intent mainIntent = new Intent(mContext, echos.class); 
        mContext.startActivity(mainIntent); 

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:46:55.993

```
public class JavaScriptInterface {
Context mContext;

/** Instantiate the interface and set the context */
JavaScriptInterface(Context c) {
    mContext = c;
}

/** Show a toast from the web page */
public void showToast(String toast) {
    Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
}
}

 WebView webView = (WebView) findViewById(R.id.webview);
 webView.addJavascriptInterface(new JavaScriptInterface(this), "Android"); 
```

在java脚本中

```
 <input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />

  <script type="text/javascript">
    function showAndroidToast(toast) {
    Android.showToast(toast);
   }
  </script> 
```

# python - 欧拉计划挑战的逻辑谬误 31

> ID：12191069
> 
> 赞同：1
> 
> 时间：2012-08-30T06:29:33.270
> 
> 标签：python, algorithm, dynamic-programming, combinatorics

也许我误读了这个问题。对于那些不熟悉[Project Euler 的问题 31 的](http://projecteuler.net/problem=31 "调查英国货币面额的组合。")人，这里是问题：

> ## 调查英国货币面额的组合。
> 
> 在英格兰，货币由英镑、英镑和便士组成，一般流通的硬币有八种：
> 
> > 1p、2p、5p、10p、20p、50p、1 英镑（100 便士）和 2 英镑（200 便士）。
> 
> 可以通过以下方式赚取 2 英镑：
> 
> > 1×£1 + 1×50p + 2×20p + 1×5p + 1×2p + 3×1p
> 
> 使用任意数量的硬币可以通过多少种不同的方式制作 2 英镑？

我知道这可能是一个动态编程问题，但我不禁走捷径：

为了解决这个问题，我分解了使用 1p、1p 和 2p 以及 1p、2p 和 5p 硬币可以制作 1 到 6 便士的方法。

### 仅使用一便士硬币

1.  1个组合
    *   1便士
2.  1个组合
    *   2×1p
3.  1个组合
    *   3×1p
4.  1个组合
    *   4×1p
5.  1个组合
    *   5×1p
6.  1个组合
    *   6×1p

* * *

### 仅使用一便士和两便士硬币

1.  1个组合
    *   1便士
2.  2种组合
    *   2p
    *   2×1p
3.  2种组合
    *   2便士+1便士
    *   3×1p
4.  3种组合
    *   2×2p
    *   2p + 2×1p
    *   4×1p
5.  3种组合
    *   2×2p + 1p
    *   2p + 3×1p
    *   5×1p
6.  4种组合
    *   3×2p
    *   2×2p + 2×1p
    *   2p + 4×2p
    *   6×2p

* * *

### 仅使用一便士、两便士和五便士硬币

1.  1 组合
    *   1便士
2.  2种组合
    *   2p
    *   2×1p
3.  2种组合
    *   2便士+1便士
    *   3×1p
4.  3种组合
    *   2×2p
    *   2p + 2×1p
    *   4×1p
5.  4种组合
    *   5便士
    *   2×2p + 1p
    *   2p + 3×1p
    *   5×1p
6.  5种组合
    *   5便士+1便士
    *   3×2p
    *   2×2p + 2×1p
    *   2p + 4×2p
    *   6×2p

我注意到这种疯狂是有规律的。显然，最多只有一种方法可以仅用一种硬币获得所需的“余额”。对于这个问题的情况，没有必要考虑一分钱。因此，仅使用一美分硬币，只有一种方法可以获得任何非负余额。请注意，只有一种方法可以获得零余额：没有硬币。

快速浏览了一下，我注意到第二个示例中的模式。可能组合的数量等于 n / 2 加 1 的商，其中 n 是任何非负整数。在 Python（我编写解决方案时使用的语言）中，如下所示：

```
n // 2 + 1 
```

我注意到这`+ 1`是为特定的“目标余额”添加上一个示例的结果。巧合？也许。但是在查看第三个示例后，我很快注意到可能的组合数量如下：

```
n // 5 + n // 2 + 1 
```

我实现了这个模式，它将占所有八个硬币：

```
n // 200 + n // 100 + n // 50 + n // 20 + n // 10 + n // 5 + n // 2 + 1 
```

设置为 200，我推断答案是 178。这个`n`数字对我来说是有意义的，不过，我不会自己写出所有可能的组合。然而，Project Euler 指出这是不正确的。

> 我在网上发现正确的解决方案是 73682。

所以我的问题是，仍在阅读的 Stack Overflow 用户，我的推理中的谬误在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T07:29:01.993

仅使用 [1, 2, 5] 制作 10p 的正确组合数是 10，而您的解决方案给出 10 / 5 + 10 / 2 + 1 = 2 + 5 + 1 = 8。显然你的假设是不正确的。

错误在于您只是在尝试一些案例，并假设适用于少数小案例的方法适用于所有案例，而没有任何证据。

# database - 实现只读/只写数据库服务器架构

> ID：12191071
> 
> 赞同：1
> 
> 时间：2012-08-30T06:29:40.973
> 
> 标签：database, asp.net-mvc-3, architecture, sql-server-2008-r2

我们有一个 ASP.NET MVC3 Web 应用程序，它包括以下内容：

*   网站 (MVC3)
*   数据访问服务 (WCF + EF)
*   数据库服务器 (SQL Server 2008 R2)

我们被建议实施以下架构以获得性能优势：

*   Web服务器集群（网站+数据访问服务）
    *   它具有**循环负载平衡**
    *   此集群中的每台服务器都有一个**缓存**（只读）数据库
    *   我们有一组 SP，我们可以清楚地分为两类 -**读取 SP**和**写入 SP**
    *   每个 Read SP 将连接到**Cache DB**，每个 Write SP 将连接到**Write DB**
*   具有复制/镜像功能的数据库服务器
    *   这是**写数据库**。
    *   每当它发生更改时，它将**所有更改**传播到所有**缓存数据库**
    *   除此之外，它还实现了复制/镜像，因此它在出现故障时具有备份。

这是一个非常粗略的想法，我不确定它是否会给我们的系统带来性能提升。

支持它的论点是**80%**的时间，操作是只读的。它们可以在**缓存数据库**上制作（因为配置为只读，所以它们更快）。其他**20%**可以在**Write DB上完成**上完成。

但是，我有以下问题：

*   **只读配置**：我们真的可以将**缓存数据库**配置为只读吗？自从**写数据库**需要在更改时将更改推送给它们。
*   **同步**：由于网络上的所有这些复杂性，确保一切同步有多容易？ **网络延迟**：保持一切同步的网络开销如何？
*   **复杂性和维护**：增加维护开销和增加系统复杂性真的值得吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:11:49.233

不错的设计，它类似于我曾经讨论过如何创建一个每个人都可以添加但无法更新或删除的审计数据库。

如果状态设置为只读，则无法更改数据库，因此无法利用 SQL Server 中的该功能。我认为只读数据库的真正优势在于您可以在执行查询时忽略锁定，并且可以创建专门的索引，因为知道不会有任何变化。根据[http://sqlblog.com/blogs/linchi_shea/archive/2007/10/01/performance-impact-setting-a-database-to-read-only.aspx](http://sqlblog.com/blogs/linchi_shea/archive/2007/10/01/performance-impact-setting-a-database-to-read-only.aspx)（对于 SQL 2005）将其设置为只读没那么大。

如果您愿意牺牲一些一致性，您可以将查询的隔离级别降低到例如已提交的读取，以便生成更少的锁。

创建两个数据库的一个优点是它使您能够跨不同的数据库服务器分离数据库。这将使您能够保证写入操作成功，即使 CacheDb 服务器具有 100% 的 CPU 负载和网络负载。

我假设 Write DB 将允许所有用户写入（甚至可能不允许读取？），而 Cache DB 只会为用户提供读取权限，并且特定服务帐户具有写入权限。

可以使用 SQL Server Integration Services (SSIS) 实现 Write DB 和 Cache DB 之间的内容同步，我认为设计传输逻辑并不难。将两台服务器放在同一建筑物中，它们之间有千兆网络，这意味着您的传输延迟会很低。

# linux - 从 proc 转储 CPU 寄存器

> ID：12191072
> 
> 赞同：0
> 
> 时间：2012-08-30T06:29:43.203
> 
> 标签：linux, cpu, mips, proc

是否有转储 MIPS CPU 寄存器的 proc 文件？在进行一些实时操作时，我必须随时查看寄存器的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:44:59.083

我不这么认为。CPU寄存器的值变化太快，转储它们是没有意义的。为什么你必须在旅途中查看寄存器的内容？

# flash - 动作脚本 2 - 随机使用 if 语句？

> ID：12191073
> 
> 赞同：0
> 
> 时间：2012-08-30T06:29:45.813
> 
> 标签：flash, random, if-statement, actionscript-2

我在 Flash 中制作了一个硬币、骰子和一个 8 号球的动画（如果有的话，则为 CS 5.5），一旦单击它们，您就可以在单击对象时扔/滚动/摇动相应的对象（它们已经是所有按钮了） ，并且对于要计算的随机结果，确定 gotoAndPlay 的帧。

我假设掷硬币/掷骰子背后的过程是相似的，所以我将掷骰子和掷硬币的 8 个球作为基础......我试图找到关于如何做类似我正在做的事情的教程但是该方法已关闭。

我在随机生成一个数字方面没有任何问题，但我不知道从哪里去。

编辑：当我最初写这篇文章时，我没有任何要粘贴的代码，有人建议我试试

```
(int)(Math.random()*2) 
if((int)(Math.random()*2) == 0)
  {gotoAndPlay("label a");} 
else if((int)(Math.random()*2) == 1)
  {gotoAndPlay("label b"); 
```

但这没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:47:20.603

好吧，如果我正确理解了您的问题，那么您需要生成随机数，然后转到相应的帧。假设您已经创建了动画，您需要将类似这样的代码粘贴到您的影片剪辑按钮上

上（释放）{

```
var xy=Math.round(Math.random() * 2)+1 //"2" is the number of frames you have
gotoAndStop(xy); 
```

}

如果按钮和动画 mc 不同，您可能需要用 mc_name.gotoAndStop 替换 gotoAndStop。

告诉我进展如何！

已编辑： Math.random()*2 很少会生成整数。因此，您应该使用 round 选项对数字进行四舍五入。但是如果你期望一个数字 1 或 0，你应该只使用 Math.round(Math.random()) 你遇到的问题是你在 if 语句中使用 Math.random 你的代码应该是什么样子是 ：

```
var num:Number=Math.round(Math.random());
if(num==0){
//Do something
}else{
//Do Something
} 
```

如果您期望超过 2 个案例，那么

```
var num:Number=Math.round(Math.random()*numberofcases);
switch(num){
case 0:
//do something
break;
case 1:
//do something
break;
case 2:
//do something 
break;
...
default:
//do something as default
break
} 
```

这应该适合你。

请告诉我进展如何，如果可行，请接受答案！谢谢。

# python - Python 类构造函数中是否有“self.somevariable = somevariable”的快捷方式？

> ID：12191075
> 
> 赞同：7
> 
> 时间：2012-08-30T06:29:54.017
> 
> 标签：python, class, constructor

Python 中的构造函数通常如下所示：

```
class SomeClass:
    def __init__(self, a, b = None, c = defC):
        self.a = a
        self.b = b or []
        self.c = c 
```

是否有一个快捷方式，例如简单地定义`__init__(self,**kwargs)`和使用键作为属性`self`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T06:33:33.477

我见过的一个成语是`self.__dict__.update(locals())`. 如果您在方法的开头运行它，这将使用参数更新对象的字典（因为这些是方法开头的唯一局部变量）。如果你通过`**kwargs`你可以做到`self.__dict__.update(**kwargs)`。

当然，这是一种脆弱的方法。如果您不小心传入了掩盖现有属性的参数，则可能会导致令人费解的错误。例如，如果您的类有一个`.doSomething()`方法并且您不小心将其传递`doSomething=1`给了构造函数，那么如果您稍后尝试调用该方法，它将覆盖该方法并导致错误。出于这个原因，最好不要这样做，除非在某些微不足道的情况下（例如，某种代理对象，其唯一目的是充当包含一些属性的“包”）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T06:31:10.200

是的：

```
class SomeClass:
    def __init__(self, **kwargs):
        self.__dict__.update(kwargs) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-30T06:38:32.660

一个问题

```
self.__dict__.update(locals()) 
```

是它包括`self`，所以你得到`self.self`。最好过滤`self`掉`locals()`

例如。

```
vars(self).update((k,v) for k,v in vars().items() if k != 'self') 
```

您可以防止使用此变体意外覆盖方法

```
vars(self).update((k,v) for k,v in vars().items()
                   if k != 'self' and k not in vars(self)) 
```

如果您不希望它静默失败，您也可以像这样预先检查

```
if any(k in vars(self) for k in vars()):
    raise blahblah
vars(self).update((k,v) for k,v in vars().items() if k != 'self') 
```

# php - 加载 xml 数据时的 file_get_contents() 警告

> ID：12191076
> 
> 赞同：1
> 
> 时间：2012-08-30T06:29:56.060
> 
> 标签：php, xml, domdocument

我想做的是：我有一个 CRM API，它以 xml 格式生成数据，
我正在使用 DOMDocument() 将数据提取成碎片。问题是当我尝试加载数据时：`$dom->loadXML($data);`

我得到了错误：

`DOMDocument::loadXML() [domdocument.loadxml]: Input is not proper UTF-8`

我用谷歌搜索了一个替代解决方案，`file_get_contents()`但我仍然收到如下警告：

![在此处输入图像描述](../Images/4a113d8b11e3a553aed3a180bf836b7e.png)

这是我用来获取 xml 数据的代码：

```
$text = file_get_contents(stripslashes(utf8_decode($data)));

$doc = new DOMDocument();
$doc->loadXML($text); 
```

在这里我放了我的 XML 返回数据，不完整，只是一小部分：

```
<?xml version="1.0" encoding="utf-8"?>
<whmcsapi version="5.0.3">
<action>getticket</action>
<result>success</result>
<ticketid>5767</ticketid>
<tid>409865</tid>
<c>NwLldOG6</c>
<deptid>2</deptid>
<deptname>Technical</deptname>
<userid>27476</userid>
<name>shirley b broyles (home)</name>
<email>sbroyles1@stx.rr.com</email>
<cc></cc>
<date>2012-08-27 19:52:12</date>
<subject>printer not working</subject>
<status>Customer-Reply</status>
<priority>High</priority>
<admin></admin>
<lastreply>2012-08-28 23:34:17</lastreply>
<flag>0</flag>
<service></service>
<replies>
<reply> 
```

谁能告诉我问题出在哪里？或任何替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:36:13.113

好的，让我们把问题剥离。如果`$data`包含无效的 UTF-8，您应该考虑如何使其有效；一种方法（不确定这是否适合您）是使用`utf8_encode()`而不是`utf8_decode()`（用于将 UTF-8 转换为 ISO-8859-1）：

```
$doc = new DOMDocument();
$doc->loadXML(utf8_encode($data)); 
```

否则，您将需要找出文本的哪一部分包含错误输入。我会看看我能想出什么。

# 资源

[确保 PHP 中的 utf-8 有效](https://stackoverflow.com/questions/1523460/ensuring-valid-utf-8-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:33:39.483

你可以试试**simplexml_load_file** php函数..

```
$xml = simplexml_load_file("addinsrss.xml");
echo "<pre>";print_r($xml);echo "</pre>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:46:16.490

如果您已经拥有 xml 源，则不要将其传递给 FGC。将其直接传递给 domDocument。

或者你也可以使用 simplexml_load_string()，

```
<?php
$xml = '<?xml version="1.0" encoding="utf-8"?>
<whmcsapi version="5.0.3">
<action>getticket</action>
<result>success</result>
<ticketid>5767</ticketid>
<tid>409865</tid>
<c>NwLldOG6</c>
<deptid>2</deptid>
<deptname>Technical</deptname>
<userid>27476</userid>
</whmcsapi>
';

$xml = simplexml_load_string($xml);

print_r($xml);
/*
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [version] => 5.0.3
        )

    [action] => getticket
    [result] => success
    [ticketid] => 5767
    [tid] => 409865
    [c] => NwLldOG6
    [deptid] => 2
    [deptname] => Technical
    [userid] => 27476
    ...
    ...
)
*/
echo $xml->tid; //409865 
?> 
```

或直接用于`$xml = simplexml_load_file('http://example.com/somexml.xml');`从外部 url 加载。

# jquery - 如何通过 jquery 验证收音机 [必需]

> ID：12191078
> 
> 赞同：0
> 
> 时间：2012-08-30T06:30:08.560
> 
> 标签：jquery, jquery-validate, validation, radio

我有 10 组收音机。每组有2个或3个或更多收音机没关系。您需要从每组中至少选择 1 台收音机。

当您提交表单时，如果其中任何一个（组）留空，它必须检查并返回错误。

我尝试了一些代码，但无法解决。我编写了这段代码来查找并显示错误，但它会一一查找，因此如果有 1 个已满，则提交表单。

```
 $('#myForm').submit(function () {

     $(".radiogrup").each(function () {
         var sel = $(this).find("input[type='radio']:checked").val();

         if (sel == null) {
             alert("error msg");
             return false;

         }

     });

 }); 
```

html:

如果你知道如何配置 required="required" 也许我可以使用它。

```
<div class="radiogrup">
    <form id="form1" name="form1" method="post" action="">
      <p>
        <label>
          <input type="radio" name="RadioGroup1" value="radyo" id="RadioGroup1_0" />
          Radyo</label>
        <br />
        <label>
          <input type="radio" name="RadioGroup1" value="radyo" id="RadioGroup1_1" />
          Radyo</label>
        <br />

        <input name="" type="submit" />
      </p>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:50:22.487

尝试以这种方式更正您的 JS 代码：

```
$('form').on("submit",function () {
    var valid=true; 
    $(".radiogrup").each(function(){
        var sel=$(this).find("input:radio:checked");
         if(!sel.length){
             valid=false;
         }
    });
    if(!valid){
        alert("error msg"); 
        return false;
    }

}); 
```

看到这个：http: [//jsfiddle.net/32aew/](http://jsfiddle.net/32aew/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:43:27.053

可能这个可以帮助你不要为此使用 $.each

```
$('#myForm').submit(function () {    
var $elems = $(".radiogrup");

        (function fetch(i) {
            if(i >= $elems.length) return;  // no elems left

            var $elem = $elems.eq(i);

            var sel = $($elem).find("input[type='radio']:checked").val();
            if (sel == null) {
                     alert("error msg"); // just don't call fetch again
            }
            else
            {
                 fetch(i + 1); //next one
                 //apply more code here if form validation successfull
            }
        })(0);  // start with first elem
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:48:17.557

```
function ValidateRadioButtons() {  //Function for Validating If Radio Button isselected
     var ischecked = false;
    $('.radiogrup').children('radio').each(function () {   //LoopingthroughradioButtons
    // "this" is the current element(radio) in the loop
      if ($(this).is(':checked')) {
          ischecked = true; //Radio Button is Checked
        }
    });
   if (ischecked == true) {
    alert("Validation Passed");
    }
   else {
    alert("Please select a Radio Button");
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T07:01:48.663

此代码为您工作

//jQuery

```
$(function(){

 $('#myForm').submit(function () {
         if ($('input[type=radio]:checked').val() != "") {
             return true;
         }

alert('error msg')
return false

     });
}) 
```

//HTML

```
<form id="myForm" name="form1" method="post" action="">
      <p>
        <label>
          <input type="radio" name="RadioGroup1" value="" id="RadioGroup1_0" />
          radyo
          </label>
        <br />
        <label>
          <input type="radio" name="RadioGroup1" value="radyo" id="RadioGroup1_1" />
          Radyo</label>
        <br />

        <input name="" type="submit" />
      </p>
    </form> 
```

# iphone - 如何在 ios 中自定义键盘以使用其他语言

> ID：12191082
> 
> 赞同：0
> 
> 时间：2012-08-30T06:30:11.717
> 
> 标签：iphone, ios, uitextfield, uikeyboard

我想为 ios 制作高棉键盘。如何在objective-C中制作这个键盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:47:23.747

我认为您应该为相应的语言字母创建一个带有按钮的视图，它看起来像 iPhone 键盘，并将此视图设置为文本字段的输入视图为

textField.inputView = yourkeyboarview;

# c - C 和全局变量/函数

> ID：12191083
> 
> 赞同：0
> 
> 时间：2012-08-30T06:30:14.690
> 
> 标签：c, header, global, extern

我正在移植我拥有的一些 C++ 代码。它在 C++ 中完美运行，所以我不知道我做错了什么。我有“ `a.c`”和“ `b.c`”。它们都包括“ `a.h`”，而后者又包括“ `b.h`”。“”中的函数在`b.c`其头文件中声明（使用`extern`关键字），其中之一是从“ `a.c`”调用的。它编译并运行，但调用似乎从未通过（我什至输入了几`printf()`行进行诊断，但没有任何反应）。

我知道我忽略了一些简单的事情，我只是无法确定是什么。任何帮助表示赞赏。

编辑：粘贴一些简化代码： 编辑 2：调用通过，有一个库问题需要修复。现在索引变量没有增加，我认为这可能是一个范围问题。

在“交流”中

```
 #include "a.h"
    ...
    int sSimDisp(void){
        buttons();
    printf("x = %04d\n", index);
        ...
    }
    int main(){
    ...
    while(1) {
        sSimDisp();
        ...
    }
    return 0;
    } 
```

在“啊”

```
 #ifndef a_H_
    #define a_H_
    ...
    #include "b.h"
    #include "c.h"
    int sSimDisp(void);
    int main(void);
    #endif /* a_H_ */ 
```

在“公元前”

```
 #include "a.h"
    ...
    int index = 0;
    void buttons(){
      printf("Entry to button subroutine.\n");
        index++;
        ...
    }
    void touchscreen(){
    ...
    } 
```

在“bh”中

```
 #ifndef b_H_
    #define b_H_
    ...
    extern int index;
    //button handler
    void buttons();
    //touch screen handler
    void touchscreen();   
    #endif /* b_H_ */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:20:35.840

我的代码没有问题，图书馆真的被抬高了。我要抓住这些家伙，我们将整理对 repo 的最后更改。感谢您的帮助，我只是想确保我没有做错任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:16:06.350

Your declaration of int main(void) in a.h could well result in undefined behaviour.

There can only be ONE main in a program, and you don't put a prototype in the header.

# perl - Perl 错误“无法在 Parser.pl 第 6 行的未定义值上调用方法“get_tag””

> ID：12191086
> 
> 赞同：1
> 
> 时间：2012-08-30T06:30:18.830
> 
> 标签：perl, html-parsing, www-mechanize, html-parser

我写了一个简单的 perl 脚本，但我得到了这个运行时错误：

无法在 Parser.pl 第 6 行的未定义值上调用方法“get_tag”

下面是我的代码：

```
#!usr/bin/perl
use HTML::TokeParser
my $p=HTML::TokeParser->new('bad.html');
while (my $token=$p->get_tag('a')){
my $url=$token->[1]{href};
print "$url\n";
} 
```

我在这个 perl 程序的同一目录下放置了一个文件 bad.html。下面是 bad.html 的代码

```
<html><body>
<a href="https://www.Google.com">Google</a>
<a href="https://www.yahoo.com">Yahoo</a>
</body></html> 
```

请帮助我解决运行我的 perl 代码时的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T06:33:04.473

不使用的问题：

```
use strict;
use warnings; 
```

它们可以为您**节省****时间**！你错过了`;`排队`use HTML::TokeParser`。

您可以以更好的方式编写脚本：

```
#!/usr/bin/env perl

use strict;
use warnings;

use HTML::TokeParser;

my $p = HTML::TokeParser->new('bad.html');
while ( my $token = $p->get_tag('a') ) {
    my $url = $token->[1]{href};
    print "$url\n";
} 
```

# android - 设置全屏模式会在 android 应用程序底部留下死区

> ID：12191098
> 
> 赞同：3
> 
> 时间：2012-08-30T06:31:25.497
> 
> 标签：android, android-layout

我正在研究应该是全屏应用程序，但是当我将应用程序设置为全屏时，我注意到底部有一个死区。就像应用程序有一个底部边距一样，我似乎无法摆脱它。我试过从

```
 android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

我也像这样以编程方式尝试过

```
 requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
         WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

我在 setContentView 之前编写的最后一段代码，只是为了清除它。但似乎没有任何效果。我真的不知道问题是什么，但我真的很感激一些指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:35:06.717

这与清单中的目标 SDK 有关，尝试通过将其设置为 14 和 4 来使用它

**编辑**

尝试

```
WebView view = new WebView(this);
view.setSystemUiVisibility(WebView.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

# sql - 无法连接到 SQL Server - 登录失败

> ID：12191099
> 
> 赞同：15
> 
> 时间：2012-08-30T06:31:27.300
> 
> 标签：sql, sql-server, tsql

我正在尝试连接到 SQL Server 2008，但出现此错误：

> *用户“xyz”登录失败，因为该帐户当前已被锁定。系统管理员可以将其解锁。（Microsoft SQL Server，错误 18486）*

请检查图像。

![在此处输入图像描述](../Images/3181604939598c9f81dcb3d2293c1b0e.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-30T06:34:39.417

> SQL Server 具有本地密码策略。如果启用了在尝试 X 次失败后锁定帐户的策略，则该帐户将自动锁定。“sa”帐户的此错误非常常见。sa 是 SQL Server 可用的默认管理员登录名。因此，有可能有一个 ousider 试图暴力破解您的系统。（即使合法尝试使用错误密码访问帐户，这也可能导致。有时用户会在不通知其他人的情况下更改密码。）

如果您知道另一个管理员帐户，您可以使用此查询解锁它，

```
ALTER LOGIN sa WITH PASSWORD='password' UNLOCK 
```

**[在此链接上阅读更多信息。](http://weblogs.asp.net/cabhilash/archive/2010/04/07/login-failed-for-user-sa-because-the-account-is-currently-locked-out-the-system-administrator-can-unlock-it.aspx)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-16T11:02:27.503

还有另一种解锁方式。使用 windows 身份验证连接到 sql server，但要确保 windows 用户是 sql 中的管理员。然后可以转到安全文件夹，选择锁定的用户，转到属性，然后转到状态。需要取消选中“登录已锁定”并解锁帐户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-30T09:32:10.160

来自[http://blog.sqlauthority.com/2009/04/23/sql-server-fix-error-18486-login-failed-for-user-sa-because-the-account-is-currently-locked-out -the-system-administrator-can-unlock-it-unlock-sa-login/](http://blog.sqlauthority.com/2009/04/23/sql-server-fix-error-18486-login-failed-for-user-sa-because-the-account-is-currently-locked-out-the-system-administrator-can-unlock-it-unlock-sa-login/)

> 更改登录 sa WITH CHECK_POLICY = OFF；
> 
> 更改登录 sa WITH CHECK_POLICY = ON; 去

对我来说工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-20T06:08:28.773

我已经多次尝试远程数据库失败，并且 sa 帐户被锁定。

"ALTER LOGIN sa WITH PASSWORD='password' UNLOCK" 这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-01T09:01:28.347

如果 sa 是您唯一的管理员帐户，您还可以遵循MSDN 上的[“当系统管理员被锁定时连接到 SQL Server”页面中给出的建议。](https://msdn.microsoft.com/en-us/library/dd207004.aspx)

[![在此处输入图像描述](../Images/30349bbb5ab3db87350ebfa641b6fd29.png)](https://i.stack.imgur.com/0ib46.png)

# c# - 如何创建相机捕捉引导线条

> ID：12191102
> 
> 赞同：1
> 
> 时间：2012-08-30T06:31:44.610
> 
> 标签：c#, windows-phone-7, xaml

我想模仿 Windows Phone 默认相机应用程序，其中两个白条 [ ] 在相机即将拍照时出现。我一直在研究，但我不知道如何在我自己的应用程序中实现这样的功能。我已经设置了所有相机按钮，并且一切正常，但这是我当然希望拥有的功能。我打算只显示条形并将它们隐藏在相机取景器上，然后使用 DispatcherTimer 将它们显示为可见以控制时间。唯一的问题是，我不知道如何做到这一点，然后让 DispatcherTimer Tick 事件仅在相机拍照之前激活？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:02:04.343

显示焦点栏的最简单方法是使用带有打开和关闭括号“[]”的文本块，当您关注某个点时，您可以显示和隐藏它。当用户点击一个点时，您只需执行以下操作：

```
Point tapLocation = e.GetPosition(viewfinderCanvas);

// Position the focus brackets with the estimated offsets.
focusBrackets.SetValue(Canvas.LeftProperty, tapLocation.X - 30);
focusBrackets.SetValue(Canvas.TopProperty, tapLocation.Y - 28);

// Determine the focus point.
double focusXPercentage = tapLocation.X / viewfinderCanvas.Width;
double focusYPercentage = tapLocation.Y / viewfinderCanvas.Height;

// Show the focus brackets and focus at point.
focusBrackets.Visibility = Visibility.Visible;
cam.FocusAtPoint(focusXPercentage, focusYPercentage); 
```

代码取自 MSDN，您可以在其中找到整个实现：

[如何：在 Windows Phone 应用程序中使用相机对焦](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202964%28v=vs.92%29.aspx)

# java - JBossWS 与 JAX-WS

> ID：12191104
> 
> 赞同：1
> 
> 时间：2012-08-30T06:32:16.440
> 
> 标签：java, web-services, jax-ws, jbossws

这可能是一个微不足道的问题，但它一直让我感到困惑，我无法从谷歌和在线搜索中找到直接答案。

JBossWS 和 JAX-WS 有什么区别？

JBossWS 是建立在 JAX-WS 上的实现吗，所以从某种意义上说 JBossWS 包含 JAX-WS？如果是这样，是什么让人们使用 JBossWS 而不是 JAX-WS？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:04:01.697

> JBossWS 和 JAX-WS 有什么区别？
> 
> JBossWS 是建立在 JAX-WS 上的实现吗，所以从某种意义上说 JBossWS 包含 JAX-WS？

JAX-WS 是用于在 Java 中构建 Web 服务的规范。它定义了要使用的注解（@WebService, ...）等等。jdk 包含本规范的参考实现，即 JAX-WS RI。

JBossWS 实现了 JAX-WS 规范。也就是说，它支持与 JAX-WS RI 相同的注释和编程模型。它确实不包含 RI，但提供了自己的实现。

> 如果是这样，是什么让人们使用 JBossWS 而不是 JAX-WS？

无论您使用的是 JBossWS 还是 RI，您都将使用 JAX-WS。人们将使用不同于 RI 的实现，因为他们需要其他 WS 标准的支持，例如 WS-Security、WS-ReliableMessaging 等等。RI 支持的唯一附加标准（当然，除了 WSDL 和 SOAP）是 WS-Addressing。

关于这一点：还有更多的 JAX-WS 实现具有不同程度的支持。例如 Apache CXF 或 Metro。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:17:59.223

根据他们的网页（http://www.jboss.org/jbossws/），JBossWS 似乎是 JBoss 应用服务器的一部分，所以它是一个 JAX-WS 实现。

特征：

*   JAX-RPC 和 JAX-WS (2.2) 支持
*   JBoss Application Server 5（JavaEE 5 兼容）Web 服务堆栈
*   EJB 2.1、EJB3 和 JSE 端点
*   附件配置文件版本 1.0
*   支持 MTOM/XOP 和 SwA-Ref
*   用于 SOAP 消息的 XML 加密/签名的 WS-Security 1.0
*   WS-Addressing（W3C 候选版本）和 JSR-261
*   WS-ReliableMessaging
*   WS-Eventing
*   WS-策略

# tsql - 如何对 Union All 进行排序

> ID：12191105
> 
> 赞同：1
> 
> 时间：2012-08-30T06:32:26.470
> 
> 标签：tsql

我无法对此进行排序。我想要按 DateId 然后 productName 排序的整个结果集，但不能让它工作。

```
SELECT  d.DateId,
    s.product_name1 as productName
FROM    dbo.SaleDates d
INNER JOIN dbo.Sale s ON s.saleId = d.saleId

UNION ALL

SELECT  d.DateId,
    s.product_name2 as productName
FROM    dbo.SaleDates d
INNER JOIN dbo.Sale s ON s.saleId = d.saleId

UNION ALL

SELECT  d.DateId,
    s.product_name3 as productName
FROM    dbo.SaleDates d
INNER JOIN dbo.Sale s ON s.saleId = d.saleId
order by d.DateId, productName 
```

基本上不知道在哪里以及如何添加这个订单。我不想为每个选择添加一个 order by，因为那样我就会有排序的子集。我想订购-整个-结束的结果集...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:36:01.413

你可以试试这个：

```
SELECT * FROM 
(
    SELECT  d.DateId as DateId,
        s.product_name1 as productName
    FROM    dbo.SaleDates d
    INNER JOIN dbo.Sale s ON s.saleId = d.saleId

    UNION ALL

    SELECT  d.DateId as DateId,
        s.product_name2 as productName
    FROM    dbo.SaleDates d
    INNER JOIN dbo.Sale s ON s.saleId = d.saleId

    UNION ALL

    SELECT  d.DateId as DateId,
        s.product_name3 as productName
    FROM    dbo.SaleDates d
    INNER JOIN dbo.Sale s ON s.saleId = d.saleId
) AS A
order by DateId, ProductName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:25:27.180

参考列别名（在您的情况下为 DateId、Productname）

```
select 1 a
union all
select 2 a
order by a desc 
```

或参考列号

```
select 1 a
union all
select 2 a
order by 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:43:52.150

```
 Select Col1, Col2 from tblA where <some condition>
    Union All
    Select Col1,Col2 from tblB where <some condition>
    Union All
    Select Col1,Col2 from tblC where <some condition>

    Order By 1,2 -- means by first column,second column

-- or Order By Col1, Col2 
```

但你的应该可以正常工作`Order by DateId,productName`

此外，您可以通过在某个临时表中捕获公共结果集然后在所需列上执行联合来提高查询的性能，而不是点击表 Sales 和 SalesDate 3 次，例如

```
SELECT d.DateId,s.product_name1,s.product_name2,s.product_name3
INTO #temp
FROM    dbo.SaleDates d
INNER JOIN dbo.Sale s ON s.saleId = d.saleId

Select t.DateId,t.product_name1 As productName From #temp t Union All
Select t.DateId,t.product_name2 From #temp t Union All
Select t.DateId,t.product_name3 From #temp t 
Order By DateId,productName

Drop Table #temp 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:35:26.287

您可以为此使用 CTE。或者只是这样做：

```
Select res.DateID, res.productName from 
(
SELECT  d.DateId,
    s.product_name1 as productName
FROM    dbo.SaleDates d
INNER JOIN dbo.Sale s ON s.saleId = d.saleId

UNION ALL

SELECT  d.DateId,
    s.product_name2 as productName
FROM    dbo.SaleDates d
INNER JOIN dbo.Sale s ON s.saleId = d.saleId

UNION ALL

SELECT  d.DateId,
    s.product_name3 as productName
FROM    dbo.SaleDates d
INNER JOIN dbo.Sale s ON s.saleId = d.saleId
)
order by res.DateId, res.productName 
```

# python - 特定异常的处理程序

> ID：12191110
> 
> 赞同：1
> 
> 时间：2012-08-30T06:33:00.043
> 
> 标签：python, django

我创建了一个特定的异常类

```
class myException(Exception):
    ... 
```

我在某些特定的观点上提出了例外

在 django 中已经存在一种方法来处理 urls.py 中的一些异常（如 Http404、Http403....）

```
handler404 = 'myViews.error.not_found' 
```

我想做的是处理 myException，以便重定向到另一个视图。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:56:19.757

您应该能够通过为您的项目编写和注册自定义[Django 中间件类来实现此目的。](https://docs.djangoproject.com/en/1.4/topics/http/middleware/#writing-your-own-middleware)

在中间件的[`process_exception`](https://docs.djangoproject.com/en/1.4/topics/http/middleware/#process-exception)方法中，检查你感兴趣的异常并生成一个合适的HttpResponse：

```
def process_exception(self, request, exception):
    if isinstance(exception, myException):
        return http.HttpResponse("myException raised")
    else:
        # Perform standard error handling for other exceptions:
        return None 
```

# url - 随机化订单状态 URL 的优势？

> ID：12191120
> 
> 赞同：0
> 
> 时间：2012-08-30T06:33:34.753
> 
> 标签：url, rest

随机化订单状态的 URL 是否有优势？

现在，URL 是基于一个递增的订单号，比如`blah.com/orderstatus/1`，`blah.com/orderstatus/2`并且只有用户能够看到他自己的订单。如果他试图通过更改 url 中的数字来查看其他人的订单，他将收到错误消息。

这样做有什么缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:45:01.640

这样做很好，实际上几乎每个网站都使用这样的索引。

使用随机索引会很复杂，绝对不推荐。

# facebook - 我们可以在 Chrome 中缓存 Facebook 朋友的图像吗？

> ID：12191121
> 
> 赞同：1
> 
> 时间：2012-08-30T06:33:36.030
> 
> 标签：facebook, image, google-chrome, caching, browser-cache

我们正在开发一个 chrome 扩展，其中我们有 FB 朋友导入功能。现在，每当加载扩展程序时，它都会显示所有 FB 好友图像，因此从 FB 加载这些图像需要时间。我们希望最小化图像加载时间。有什么办法可以做到这一点？我们可以将图像缓存到 chrome 缓存并在第二次加载时从缓存中读取它们吗？

我也不认为这是相同的解决方案。但想检查有没有办法实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:15:43.480

I guess you’re loading the images by pointing to `http(s)://graph.facebook.com/userid/picture`?

Well, Facebook delivers these URLs with caching headers as follows,

```
Cache-Control: private, no-cache, no-store, must-revalidate 
Expires:       Sat, 01 Jan 2000 00:00:00 GMT    
Pragma:        no-cache 
```

These are for the Graph API redirect URL – Facebook is forbidding caching here, so that the browser has to look up these resources every time again. The final image URL on their CDN, to which these URLs redirect with a `Location` header – *those* have the following headers regarding caching,

```
Last-Modified: Fri, 01 Jan 2010 00:00:00 GMT    
Cache-Control: max-age=1209600  
Expires:       Thu, 13 Sep 2012 08:07:52 GMT 
```

So you *could* try and require the CDN URLs in your app upfront, and then use these as image URLs in your app’s HTML pages – then the browser won’t have to make a request every time to see if the cached version of the image URL is still valid, but can serve it from it’s cache straight away.

CDN URLs *should not* be used over longer time spans – they *can* change; but for a shorter amount of time it’s probably safe to use them, because they will not change willy-nilly without a good reason. F.e., the user changing their profile pic might be such a reason – but caching them for up to an hour or so could be a compromise that makes the user experience while using your app better.

But the drawback of doing so is, that your app will have to make an API request for each friend’s image initially, to *get* the CDN profile pic URL – and that’s time-consuming as well, if you do it for large number of friends. (Although batch requests or an FQL multi-query might be able to shorten that to *one* HTTP request instead of multiple ones.)

# android - Android：从数据库加载图像的 Horizo ntalScrollView

> ID：12191123
> 
> 赞同：0
> 
> 时间：2012-08-30T06:33:38.957
> 
> 标签：android

> **可能重复：**
> [Android UI - Android 水平滚动视图](https://stackoverflow.com/questions/5565949/android-ui-android-horizontal-scroll-view)

我找不到有关如何使用从as`HorizontalScrollView`加载的图像创建的解决方案。我想创建类似的东西，但我不能使用小部件，因为我想要多项选择。有人能帮我吗？谢谢你。`database``BLOB``Gallery``Gallery`

# iphone - CGAffineTransformScale 缩放图像视图，但重绘时的子元素变得模糊

> ID：12191135
> 
> 赞同：1
> 
> 时间：2012-08-30T06:34:51.420
> 
> 标签：iphone, objective-c, ios, cgaffinetransform, cgaffinetransformscale

我只是使用此代码将 imageView 转换为两倍或三倍。

```
imageView.transform = CGAffineTransformScale(CGAffineTransformIdentity, scale, scale); 
```

我在drawRect中的这个imageView上画线，在缩放所有东西之后。我想要的是我正在绘制的那些线条在缩放后应该保持相同的大小或宽度。为了做到这一点，我在缩放的 imageView 上重绘线条，高度和宽度比例较小，但结果就像线条变得模糊/阴暗。我考虑转换像素大小也增加了imageView..我想知道有没有什么方法可以绘制正确的线条，而不会对转换后的imageView等产生任何模糊影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:04:02.973

缩放图像后绘制线条。只需将线的宽度更改为相同的比例（即图像为4x，线宽为4x）。

# wpf - 在 Prism 中为 WPF 应用程序设置焦点 OnNavigatedTo

> ID：12191138
> 
> 赞同：2
> 
> 时间：2012-08-30T06:35:06.840
> 
> 标签：wpf, xaml, mvvm, prism-4

我想在使用 Prism 的 WPF 应用程序中的视图之间导航，以便能够将焦点设置到特定的文本框，以便用户可以执行导航，然后开始在相关的文本框中键入，而无需再次单击文本框。

我有一个用 Prism 构建的应用程序，它有一个带有`ContentControl`“MainContentRegionContentControl”的外壳。然后，我在顶部有一些按钮，点击它们时我会执行`region.RequestNavigate("UserControlToLoad")`. 在`UserControl`我有`OnNavigatedTo`and 在我调用的那个方法中`this.MainTextBox.Focus()`。

以上似乎不起作用，导航似乎起作用并且`OnNavigatedTo`调用了该方法，但是文本框没有焦点。

我已经添加`FocusManager.IsFocusScope="True"`到文本框中，但这并没有什么不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:42:59.590

对每个页面使用`Loaded()`方法，而不是`OnNavigatedTo()`然后`TextBox.Focus()`将正常工作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:21:20.243

尝试以下操作...在您的视图中实施 IActiveAware

```
class ViewModel : IActiveAware
{
    #region IActiveAware Members
    private bool isActive = false;

    public bool IsActive
    {
        get
        {
            return isActive;
        }
        set
        {
            if (value != isActive)
            {
                isActive = value;
                OnIsActiveChanged(EventArgs.Empty);
            }
        }
    }

    public event EventHandler IsActiveChanged = delegate { };

    protected virtual void OnIsActiveChanged(EventArgs args)
    {
        IsActiveChanged(this, args);
    }
    #endregion
} 
```

`OnIsActiveChanged`, 当 IsActive 变为 true 时，尝试将焦点设置为您想要关注的 TextBox

# c#-4.0 - 数据写入现有文件和从 C# 中复制另一个文件的全部内容之间的区别

> ID：12191141
> 
> 赞同：0
> 
> 时间：2012-08-30T06:35:10.820
> 
> 标签：c#-4.0, window

我开发了一个 Windows 应用程序，它正在检查目录中新更新或生成的文件并将数据复制到临时文件。我的应用程序完美地完成了它的工作。但是，有一个第三方应用程序“POS 文本发送器”，如果我使用记事本文本编辑器复制数据，它将从临时文件中读取所有文本并显示在闭路电视摄像机上。但是当我的应用程序执行此操作时，POS Text Sender 将从第一个文件中读取内容并跟踪更新的内容不时读取该文件。一旦在该目录中生成新文件，像往常一样，我的应用程序会将该文件的全部内容复制到临时文件，但 POS 文本发送器不会读取该数据，然后如果它必须显示任何内容，我应该重新启动 POS Text Sender。我真的不知道 POS Text Sender 如何知道我的应用程序正在从新生成的文件中复制以及如何停止它。数据写入现有文件和从另一个文件复制整个内容有什么区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:42:10.280

> 将数据写入现有文件和从另一个文件复制全部内容有什么区别？

听起来可能是第 3 方应用程序正在查看文件上*创建*或*修改*的日期戳，而不是同时考虑两者。区别如下：

*   当你创建一个新文件时，*created*和*modified*是一样的
*   当您编辑现有文件时，*修改*将晚于*创建*
*   当您复制现有文件时，新文件的*创建*将晚于其*修改*的时间戳

# ios - 如何使用 myapp 跟踪设备的位置

> ID：12191144
> 
> 赞同：0
> 
> 时间：2012-08-30T06:35:30.650
> 
> 标签：ios, gps

如何使用 myapp 跟踪在汽车中移动的设备的位置。它需要社交网络的目的。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:36:37.713

您必须需要一个 Web 服务来在应用程序运行时存储设备的位置，然后从您的应用程序向 Web 服务发送查询，从那里您将找到使用该应用程序的设备列表。

# svn - 多个存储库之间的 SVN 同步

> ID：12191152
> 
> 赞同：1
> 
> 时间：2012-08-30T06:35:41.210
> 
> 标签：svn, synchronization, svnsync

我们正在使用 SVN，我们有现场和离岸团队。SVN 存储库目前位于岸上，这意味着从离岸到 SVN 的连接非常缓慢。我们也想在离岸设置和SVN。我们需要两个 SVN 存储库同步。这样做的最佳做法是什么，需要任何第三方产品？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:04:13.907

在这里，您需要设置一个 SVN 主从设置。

基本上：

*   从服务器有自己的本地仓库，可以服务本地读请求
*   对从服务器的写入请求必须转发到主服务器（使用[WebDAV 代理](http://www.webdav.org/other/proxy.html)或[提交后挂钩](http://svnbook.red-bean.com/en/1.7/svn.ref.reposhooks.post-commit.html)，我会选择第二个）
*   从存储库必须与服务器的存储库同步（使用[`svnsync`](http://svnbook.red-bean.com/en/1.7/svn.ref.svnsync.html)）

[如果您更喜欢使用 WebDAV，这篇博文](http://www.tty1.net/blog/2007-08-26-subversion-proxy_en.html)是一个很好的起点，而[这篇](http://kbflow.wordpress.com/2011/04/25/quick-recipe-setting-up-master-slave-subversion-servers-with-replication-using-svnsync-and-transparent-proxy-in-ubuntu/)博文将向您展示如何使用提交后挂钩设置同步。

请注意，您还必须修改从服务器上的默认[pre-revprop-change 挂钩](https://stackoverflow.com/q/197224/1374267)脚本，因为`svnsync`需要直接修改一些属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:34:53.337

由于您询问了第三方产品，WANdisco Subversion MultiSite 是第三方产品，它使用真正的主动-主动复制为 Subversion 存储库提供无缝 HADR 和全局多站点。写入和读取始终针对本地 LAN 存储库。我们的客户来自上述 svnsync 部署，因为他们需要 svnsync 提供之外的性能、可扩展性和数据安全性。

DVCS 不能自行修复 WAN 克隆或复制问题。

免责声明：我是 WANdisco plc 的员工

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T10:07:47.493

VisualSVN Server 3.0（企业版）引入了遵循经典主/从复制架构的[多站点存储库复制功能。](http://www.visualsvn.com/server/features/multisite-replication/)该功能基于 VDFS（VisualSVN 分布式文件系统）技术，允许在多个远程站点之间双向、自动和透明地复制数据：

*   从存储库和主存储库都是可写的，从最终用户的角度来看，它们就像一个常规的 Subversion 存储库。

*   开箱即用。您只需要对存储库复制执行最少的权限管理并调整防火墙规则，

*   复制是自动且透明地完成的。

请参阅[**“开始使用多站点存储库复制”**](http://www.visualsvn.com/support/topic/00068/)。

# c# - 使用 C# 进行内容感知图像裁剪

> ID：12191153
> 
> 赞同：4
> 
> 时间：2012-08-30T06:35:43.860
> 
> 标签：c#, asp.net, .net, image, image-processing

我正在开发一个类似 CMS 的项目，用户可以上传带有内容的图像。我必须即时为上传的图像创建缩略图。假设缩略图大小为 125x75

我可以毫无问题地调整图像大小，但是在裁剪操作方面会出现几个问题。我的调整大小和裁剪过程是这样的：

1.  加载原始图像。
2.  根据给定的最大宽度或高度将图像调整为所需大小，防止原始纵横比
3.  如果结果图像的纵横比与输出纵横比不同，则应用居中裁剪操作。

但是我想要实现的是内容感知裁剪，如 Juue Wang 的文章[Opticrop: Content-aware Cropping with PHP and ImageMagick中所述](http://jueseph.com/2010/06/opticrop-content-aware-cropping-with-php-and-imagemagick/)

有没有办法用 C# 来做，或者有没有可以做这个操作的库。

注意：我不希望内容感知调整大小。可以使用 ImageResizing.net [SeamCarving 插件进行内容感知大小调整（接缝渴望）](http://imageresizing.net/plugins/seamcarving)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:31:49.050

如果您使用的是 ImageResizing.net 框架，我认为[WhitespaceTrimmer 插件](http://imageresizing.net/plugins/whitespacetrimmer)可能是一个很好的起点。

如果您想自己编写代码，[这个 Gist](https://gist.github.com/a54cd41137b678935c91)展示了一个使用熵的很好的解决方案，但它是用 Ruby 编写的。

# ios - NSdictionary 在尝试加载到 tableviewcell 时崩溃应用程序

> ID：12191163
> 
> 赞同：0
> 
> 时间：2012-08-30T06:36:14.610
> 
> 标签：ios, xcode

我正在编写一个应用程序，该应用程序通过 NSMutableArray nd NSdictionary 用法将从 mysql 数据库检索到的数据加载到表视图中。而且我担心我在 NSDictionary 位中犯了一个错误。

我有 2 个控制 NSMutableArrays 可以正确加载到表格单元格中，但是一旦我尝试拆分收到的 NSDictionary 并将键“名称”和“艺术家”中的数据加载到单元格中，它就会崩溃。请帮我识别错误。

我知道问题不在于 php 或字典，因为我记录了收到的字典并且输出非常完整。（粘贴在下面）

```
2012-08-28 15:53:52.339 es[11783:c07] {
Artist = "K-Phlowz";
Likes = 27;
Link = "http://localhost/SNTestFiles/Music/K-PHLOWZ-BENOITSHIT.mp3";
Name = "Benoit Shit";
PhotoLink = "http://localhost/SNTestFiles/Photos/TopMusic/K-PHLOWZ-BENOITSHIT.jpg";
} 
```

但是，当我在 tableviewcell 方法中声明 NSDictionary 时，它会崩溃，因此当我尝试将“name”和“Artist”中的字符串加载到 cell.labeltext 和 cell.detaillabeltext 中时，它不起作用。请帮助我确定问题和/或让我知道是否有更准确的方法来解决此问题。（源代码粘贴在下面）。

随意复制并粘贴到您的 xcode 中，以帮助清楚地识别问题..

```
// ChanViewController.h
// es
//
// Created by Nnamdi Okeke on 8/7/12.
// Copyright (c) 2012 Bubble Technology. All rights reserved.
//

#import <UIKit/UIKit.h>

#define kGETUrl @"http://localhost/SNTestFiles/PHPFiles/FetchSongs.php?Artist=%@"

@interface ChanViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

{
NSDictionary *stuff;
IBOutlet UILabel *label;
NSMutableArray *jams;
NSMutableArray *artists;
NSMutableArray *json;
IBOutlet UITableView *songs;
IBOutlet UILabel *artist;
IBOutlet UIImageView *ArtistCovers;
} 
@property (nonatomic, retain) UIImageView *ArtistCovers;

-(IBAction)back:(id)sender;

@end

// ChanViewController.m
// es
//
// Created by Nnamdi Okeke on 8/7/12.
// Copyright (c) 2012 Bubble Technology. All rights reserved.
//

#import "ChanViewController.h"
#import "AppDelegate.h"
#import "ViewController.h"

@implementation ChanViewController

@synthesize ArtistCovers; 

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
// Custom initialization
}
return self;
}

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{

//--------------------------------passing in data from homepage---------------

AppDelegate *artistname = (AppDelegate *) [[UIApplication sharedApplication] delegate];
[artist setText:artistname.artistsnames];

//----------------------------------Fetchin Cover Photos---------------------------

NSString *url = [NSString stringWithFormat:@"http://localhost/SNTestFiles/Photos/ArtistCovers/%@.jpg", artist.text];

UIImage *ArtistCover = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url]]];

[ArtistCovers setImage:ArtistCover];

[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

//----------------------------test nsmutablearrays-------------------------------

jams = [[NSMutableArray alloc] initWithObjects:@"Medusa", @"Toyin", @"So Incredible", @"I Don Hammer",@"Dami Duro", @"Senrenre", @"Sisi Nene", @"Benoit Shit", @"Dance For Me", @"Tom Ford Flow", @"Magic", @"Gidi Swag", @"Aunty Dupe", nil];

artists = [[NSMutableArray alloc] initWithObjects:@"Tobias", @"DRBLasgidi", @"JRah", @"T-Topz",@"Davido", @"Ajebutter22", @"Wizkid", @"K-Phlowz", @"Wizkid", @"DRBLasgidi", @"L.O.S", @"Ajebutter22", @"Joules Da Kidd", nil];

//---------------------------------------------------------------------------------------------

NSString *fetchjamsurl = [NSString stringWithFormat:kGETUrl, artist.text];
NSData *fetchjamsdata = [NSData dataWithContentsOfURL:[NSURL URLWithString:fetchjamsurl]];
NSError *e;
json = (NSMutableArray*)[NSJSONSerialization JSONObjectWithData:fetchjamsdata options:kNilOptions error:&e];
NSDictionary *info = [json objectAtIndex:0];
NSLog(@"%@", info);
label.text = [info objectForKey:@"Artist"];

}

-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [json count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
return 40;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

/////////////////////// -- THE PROBLEM -- \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
//                                                                        \\
//                                                                        //
    stuff = (NSDictionary *)[json objectAtIndex:indexPath.row];
//                                                                        \\
//                                                                        \\
////////////////////////////////////////////\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

//-------------------------test strings for cells-----------------------

NSString *SongTitle = [[jams objectAtIndex:indexPath.row] objectForKey:@"Name"];
NSString *ArtistNames = [[artists objectAtIndex:indexPath.row] objectForKey:@"Artist"];

//------------------------------------------------------------------------

NSString *SongTitlejson = [stuff objectForKey:@"Name"];
NSString *ArtistNamesjson = [stuff objectForKey:@"Artist"];

cell.textLabel.text = SongTitlejson;
cell.detailTextLabel.text = ArtistNamesjson;
cell.textLabel.backgroundColor = [UIColor clearColor];
cell.detailTextLabel.backgroundColor = [UIColor clearColor];
cell.textLabel.font = [UIFont fontWithName:@"Heiti TC" size:18];
cell.detailTextLabel.font = [UIFont fontWithName:@"Heiti TC" size:11];
cell.textLabel.textColor = [UIColor lightGrayColor];
cell.detailTextLabel.textColor = [UIColor whiteColor];

UIButton *AddToPlaylist = [UIButton buttonWithType:UIButtonTypeCustom];
AddToPlaylist.frame = CGRectMake(240, 5, 30, 30);
[AddToPlaylist setImage:[UIImage imageNamed:@"addtoplaylist.png"] forState:UIControlStateNormal];
[AddToPlaylist addTarget:self action:@selector(AddToPlaylists:) forControlEvents:UIControlEventTouchUpInside];

UIButton *LikeSong = [UIButton buttonWithType:UIButtonTypeCustom];
LikeSong.frame = CGRectMake(280, 5, 30, 30);
[LikeSong setImage:[UIImage imageNamed:@"CellLike.png"] forState:UIControlStateNormal];
[LikeSong addTarget:self action:@selector(Like:) forControlEvents:UIControlEventTouchUpInside];

[cell addSubview:AddToPlaylist];
[cell addSubview:LikeSong];

return cell;
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

> ///////////////////////////////////////// ////////////////////////////////////

非常感谢伙计们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:11:49.200

好的。您的问题的解决方案是在 .h 中声明内容，并在 @property 和 @synthesize 中声明它，或者在 -init 中使用`NSDictionary *stuff = [NSDictionary new];`或类似的方式对其进行初始化。然后你可以设置`stuff`为`(NSDictionary *)[json objectAtIndex:indexPath.row];`没有问题。（这是假设 json 可以与 NSDictionary 互换。）

请注意，问题是东西还没有被初始化，所以编译器在运行时没有为它分配任何内存。当然，另一种可能性是您的 json 对象与 NSDictionary 类不兼容。

# android - 在android中同时在同一活动上使用多种语言文本

> ID：12191170
> 
> 赞同：1
> 
> 时间：2012-08-30T06:36:29.353
> 
> 标签：android

我需要在同一活动中以多种语言显示短信。是否可以这样做，如果可以，那么可以共享一些参考代码或逻辑来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:29:55.920

使用 Locale
在 res.Inside values-hi 创建 strings.xml 的 side values 文件夹旁边创建一个 values-hi 文件夹（用于印地语）。定义字符串名称对应于 values 文件夹中的 string.xml。

Java 代码 -

```
hindi_language.setOnClickListner(new OnClickListner(){
public void onclick(View v)
{
Locale locale=new Locale("hi");
Configuration newconfig=new Configuration();
Locale.setDefault(locale);
newconfig.locale=Locale.getDefault();
onConfigurationChanged(newconfig);
//refresh activity
}
});

@Override
public void onConfigurationChanged(Configuration newConfig)
{
super.onConfigurationChanged(newConfig);
getBaseContext().getResources().updateConfiguration(newConfig, getBaseContext().getResources().getDisplayMetrics());
setContentView(yourlayout);
SetTitle(R.string.app_name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-12T18:29:23.650

这很容易。
它与本地化无关。
1.直接复制粘贴其他语言文本。Android 将按原样显示。

```
 <TextView
  android:height="wrap_content"
  android:width="wrap_content"
  android:text="Ladakh ལ་དྭགས" /> 
```

2.  在strings.xml中定义

    ```
    <string name="some_text">Ladakh ལ་དྭགས</string> 
    ```

# python - python pyplot x 轴注释

> ID：12191174
> 
> 赞同：0
> 
> 时间：2012-08-30T06:36:42.883
> 
> 标签：python, matplotlib

我目前正在生成表格的情节：

![在此处输入图像描述](../Images/2fe1c389c67c6c7e2914b661708b1375.png)

我要添加的是在底部轴上我想写一些文本，因为每个点都有一些不同的设置。例如，在第 0 点我想写（因为文本很长，所以向下倾斜）真、真、真、真然后在第 1 点真、真、真、假、...、假、假、假flase。

有人可以解释我如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:21:39.813

请参阅[set_xticklabels 的文档](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_xticklabels)。你想要的是这样的：

```
ax.set_xticklabels(['true true true...', 'true true false...', ...], rotation=45) 
```

# silverlight - Silverlight 是 Web 开发语言还是窗口应用程序？

> ID：12191180
> 
> 赞同：0
> 
> 时间：2012-08-30T06:37:02.957
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0

我是这项技术的新手。其实我很困惑，Silverlight，它是一种 Web 开发语言、桌面应用程序还是两者兼而有之？

我可以使用 Silverlight 开发网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:48:08.077

> 实际上我很困惑 SilverLight 是 Web 开发语言还是桌面应用程序或两者兼而有之？

两者（以及可用于针对 XBox 360 的开发）……尽管它用于客户端 Web 开发是一个笑话（因为它就像支持不太好的 Flash）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:39:42.200

Silverlight 是 WPF 的子集。WPF 用于基于 Windows 的应用程序，silverlight 用于基于 Web 的应用程序。但是，从 UI 角度来看，两者都使用 XAML 语言。**http://www.lynda.com/**有学习 Silverlight 的精彩视频。

# java - JPA 与 JDBC - 2 个问题

> ID：12191181
> 
> 赞同：0
> 
> 时间：2012-08-30T06:37:03.167
> 
> 标签：java, database, jpa, jdbc, entity

我正在使用 Eclipse Juno IDE

在 phpMyAdmin 中，我创建了自己的数据库和表。现在使用 JDBC，我输入了一些记录。

接下来，我尝试使用 JPA 实现一些查询，我创建了一个具有相同列的实体，并将 persistence.xml 连接到我的数据库。但是当我运行程序时，它会删除所有记录并在我的数据库中创建一个新的空表（同名）。所以我的问题是：我如何连接到数据库中的现有表但不创建新表。

另一个问题是：我没有给我的表一个主键，因为我的表是关于司机旅行的，所以每个司机可以旅行很多次......所以如果我使用主键，它不会添加关于司机的新数据. 使用 JDBC 它可以正常工作。但是对于 JPA，实体需要一些字段作为主键.. 那么如何在 JPA 中添加关于同一驱动程序的新数据？

持久性文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xsi:schemaLocation="http://java.sun.com/xml/ns/persistence                                   
         http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/persistence" version="1.0"> 
         <persistence-unit transaction-type="RESOURCE_LOCAL" name="MyJPA"> 
             <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider> 
             <class>pack.bl.Travels</class> 
             <properties> <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/> 
                 <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/drivers"/> 
                 <property name="javax.persistence.jdbc.password" value=""/> 
                 <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/> 
                 <property name="javax.persistence.jdbc.user" value="root"/>

             </properties> 
         </persistence-unit> 
```

代码：

```
 EntityManagerFactory emf = Persistence.createEntityManagerFactory("MyJPA");
     EntityManager em = emf.createEntityManager();

     List<Travels> allTravels = em.createQuery("SELECT t FROM travels t",Travels.class).getResultList();
     for (Travels s : allTravels)
         System.out.println(s.toString());

     em.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:40:40.583

在您的休眠配置中，确保 hibernate.hbm2ddl.auto 未设置为 create-drop（因为这听起来像）。尝试将其设置为验证 [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:39:48.663

将`id`自动增量字段添加到您的表中。它将是主键。

关于表的自动创建，请看这里（我假设您使用 Hibernate 作为 JPA 实现）： [Hibernate hbm2ddl.auto 可能的值以及它们的作用？](https://stackoverflow.com/questions/438146/hibernate-question-hbm2ddl-auto-possible-values-and-what-they-do)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:46:46.430

按照链接进行 jpa 配置

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

在配置 xml 文件中添加代码

```
<property name="hibernate.hbm2ddl.auto" value="validate"/> 
```

# sockets - Azure Worker Role 上的被动 FTP 通过套接字编程

> ID：12191183
> 
> 赞同：2
> 
> 时间：2012-08-30T06:37:30.193
> 
> 标签：sockets, azure, ftp, ip, passive-mode

我需要在端口 21 上部署一个带有输入端点的 Azure Worker 角色，以便它可以接受传入的 FTP 连接。这样我就应该能够通过 Filezilla 等 FTP 客户端连接到 Worker 角色并访问 azure blob 存储。

为此，我能够实现 FTP 命令，如 LIST、RETR、STOR、PORT、USER 和 PASS。所有这些都适用于 FTP 的活动模式。

但是当我切换到 FTP 的 PASSIVE 模式（对 Azure Worker Role 执行 PASV 命令）时，我发现了问题。因为我是 Azure 的新手，所以无法追踪问题。通过几个博客知道，因为 Azure Worker 角色超出了负载均衡器，因此 PASSIVE 模式需要配置。我看到很少有博客讨论手动配置 FTP 的 Web 角色。因为我正在处理 Worker 角色，配置是否更改以及如何在代码中处理它等等因为我们不确定该角色将部署哪台 vm 机器..我该如何处理配置

我试过的方法：

1.在Azure Worker角色中，我设置了以下端点

FTP 输入 tcp 21

Endpoint1 输入 tcp 1025

最初在 Start() 上，我有这个代码在线

TcpListener server = SocketHelpers.CreateTcpListener(RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["FTP"].IPEndpoint);

在 PASV 模式下，我有以下

TcpListener server = SocketHelpers.CreateTcpListener(RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].IPEndpoint); 以便它在新的端口 1025 上打开并发送回客户端。在发送回客户端时，我得到了如下异常：

SocketErrorCode 是 10053 和 SocketErrorDesc:System.Net.Sockets.SocketError.ConnectionAborthed

无法将数据写入传输连接：已建立的连接被主机中的软件中止。

2.通过使用[http://checkip.dyndns.org/](http://checkip.dyndns.org/,if)获取外部IP地址的其他方式，如果我从中获取IPadress，我是否需要使用RoleEnvironment.CurrentRoleInstance.InstanceEndpoints [“Endpoint1”].IPEndpoint从代码中获取端口？？？

真的，我真的对 Azure 的东西和 FTP 配置感到困惑。

我浏览了以下文章，但找不到如何以编程方式配置工作角色（设置端口范围，从代码中检索）以在 PASSIVE 模式下工作。

[http://www.itq.nl/blogs/post/Walkthrough-Hosting-FTP-on-IIS-75-in-Windows-Azure-VM.aspx](http://www.itq.nl/blogs/post/Walkthrough-Hosting-FTP-on-IIS-75-in-Windows-Azure-VM.aspx) http://angelolaris.blogspot.com/

问候， 维维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:30:43.157

首先我想我可以确认的是，不确定你是否也开始如下或现在的监听器：

```
TcpListener myPortListener = new TcpListener(RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["MY_PORT"].IPEndpoint);
myPortListener.Start(); 
```

接下来，当您的工作角色具有上述代码时，端口开始接收传入请求，并且任何绑定到 IP/端口的应用程序都将接收数据包。

如果您真的想了解如何让它在您的 Worker 角色中工作，您可以做的是，[按照本指南首先在 Web 角色中进行设置](http://www.itq.nl/blogs/post/Walkthrough-Hosting-FTP-on-IIS-75-in-Windows-Azure-VM.aspx)，然后尝试在您的 Worker 角色中复制相同的配置。做起来并不复杂，但首先你需要了解事情是如何工作的，然后你才能实现自己。

您的要求也不清楚，因为我不确定您为什么需要这样的配置，因为您可以从 Worker 角色直接连接到 Azure Blob 存储（如果您的数据位于 Azure Blob 存储中）并访问内容，为什么要有 FTP/本地连接使其变得复杂。如果你重新审视你的应用程序架构，你可能不需要做这样的工作。

# c# - 如何在 WinDBG 中分析内核转储

> ID：12191192
> 
> 赞同：1
> 
> 时间：2012-08-30T06:37:56.217
> 
> 标签：c#, windows-7, crash, kernel, windbg

在我们基于窗体的 Windows 应用程序中，当导航到 WPF 屏幕选项卡之一（其他是普通屏幕）时，整个系统挂起并且必须重新启动机器。当系统挂起并在 WinDBG 中打开转储时，我们对该问题进行了内核转储。下面给出了给定的命令和我们在 WinDBG 中得到的结果。我们发现发生了死锁，但无法找到导致确切问题的原因。请帮助我们分析结果。

```
3: kd> !locks
**** DUMP OF ALL RESOURCE OBJECTS ****
KD: Scanning for held locks...........................................................................................................

Resource @ 0x852878d0    Exclusively owned
    Contention Count = 46437
    NumberOfExclusiveWaiters = 34
     Threads: 8584ad48-01<*> 
     Threads Waiting On Exclusive Access:
              85387d48       857aed48       8577a4d0       8577a1e8       
              858de748       857feac8       854527d0       859b7030       
              85808d48       8583dd48       858db678       857fe7e0       
              8588a030       871103c0       87eb6d48       8645aa88       
              85a38b20       859bfb08       857a9b80       85805618       
              87ea2a90       853b8b80       85a61970       86a83520       
              8776ad48       857df970       85440030       854407f0       
              857df688       8749d030       87e25350       864c3d48       
              8645a380       86efd2e8       

KD: Scanning for held locks.

Resource @ 0x86ec5f28    Shared 3 owning threads
    Contention Count = 20
     Threads: 85f2b030-01<*> 8584ad48-01<*> 86efcd48-01<*> 

Resource @ 0x86ec5ed8    Shared 1 owning threads
    Contention Count = 273
     Threads: 85f2b030-01<*> 
KD: Scanning for held locks.

Resource @ 0x86ec5de8    Exclusively owned
    Contention Count = 53
    NumberOfSharedWaiters = 2
     Threads: 85f2b030-01<*> 8584ad48-01    86efcd48-01    
KD: Scanning for held locks....

Resource @ 0x86edfe88    Exclusively owned
    Contention Count = 5
     Threads: 86efcd48-01<*> 
KD: Scanning for held locks........................................................................................................................................................................................................................................................................
11983 total locks, 5 locks currently held

3: kd> !thread 8584ad48
THREAD 8584ad48  Cid 164c.1654  Teb: 7ffdf000 Win32Thread: fd816c28 WAIT: (WrResource) KernelMode Non-Alertable
    86f403a8  Semaphore Limit 0x7fffffff
IRP List:
    85f45008: (0006,01d8) Flags: 00060000  Mdl: 00000000
Not impersonating
DeviceMap                 b24698e8
Owning Process            856a7bd0       Image:         ICEProLauncher.exe
Attached Process          N/A            Image:         N/A
Wait Start TickCount      24324          Ticks: 2 (0:00:00:00.031)
Context Switch Count      16352             
UserTime                  00:00:11.575
KernelTime                00:00:03.900
Win32 Start Address 0x1016479e
Stack Init c6c47fd0 Current c6c47628 Base c6c48000 Limit c6c45000 Call 0
Priority 14 BasePriority 8 UnusualBoost 3 ForegroundBoost 2 IoPriority 2 PagePriority 5
ChildEBP RetAddr  Args to Child              
c6c47640 82ab0c65 8584ad48 00000000 807c8120 nt!KiSwapContext+0x26 (FPO: [Uses EBP] [0,0,4])
c6c47678 82aaf563 8584ae08 8584ad48 86f403a8 nt!KiSwapThread+0x266
c6c476a0 82aa940f 8584ad48 8584ae08 00000005 nt!KiCommitThreadWait+0x1df
c6c4771c 82ae12e5 86f403a8 0000001b 00000000 nt!KeWaitForSingleObject+0x393
c6c47774 82a7f8d4 86f403a8 00000001 8584ad48 nt!ExpWaitForResource+0x16f
c6c477b4 82acc714 86ec5de8 00000001 82acae87 nt!ExAcquireResourceSharedLite+0x22c
c6c477c8 8250dcbc 86ec5de8 8250fe3f c6c47a80 nt!ExEnterPriorityRegionAndAcquireResourceShared+0x24
WARNING: Stack unwind information not available. Following frames may be wrong.
c6c4780c 825107a3 ffb808e0 00000000 c6c47b9c win32k+0xbdcbc
c6c47a94 8252e2f0 ffb808e0 fdacedc0 00000000 win32k+0xc07a3
c6c47ac8 8252eb42 ffb808e0 fdacedc0 00000000 win32k+0xde2f0
c6c47bb0 8254ef82 ffbbd550 826694f8 ffbbd550 win32k+0xdeb42
c6c47c00 825162d2 2b010eab fd816c28 fea00618 win32k+0xfef82
c6c47c20 825162fa fea53a50 fd816c28 00000030 win32k+0xc62d2
c6c47c44 8251708c fea00618 fd816c28 00000030 win32k+0xc62fa
c6c47c60 8250b830 00000000 c6c47ce4 44a1c376 win32k+0xc708c
c6c47cb4 82503ba9 c6c47ce4 000025ff 00000000 win32k+0xbb830
c6c47d18 82a8544a 0027eeb4 00000000 00000000 win32k+0xb3ba9
c6c47d18 771e6194 0027eeb4 00000000 00000000 nt!KiFastCallEntry+0x12a (FPO: [0,3] TrapFrame @ c6c47d34)
0027eddc 00000000 00000000 00000000 00000000 0x771e6194

3: kd> !thread 85f2b030
THREAD 85f2b030  Cid 164c.1038  Teb: 7ff4c000 Win32Thread: fde81dd8 WAIT: (UserRequest) KernelMode Non-Alertable
    86f5c030  Mutant - owning thread 8584ad48
Not impersonating
DeviceMap                 b24698e8
Owning Process            856a7bd0       Image:         ICEProLauncher.exe
Attached Process          N/A            Image:         N/A
Wait Start TickCount      23777          Ticks: 549 (0:00:00:08.564)
Context Switch Count      1040             
UserTime                  00:00:00.109
KernelTime                00:00:00.530
Win32 Start Address 0x613cb684
Stack Init c363bfd0 Current c363baa0 Base c363c000 Limit c3639000 Call 0
Priority 14 BasePriority 8 UnusualBoost 4 ForegroundBoost 2 IoPriority 2 PagePriority 5
ChildEBP RetAddr  Args to Child              
c363bab8 82ab0c65 85f2b030 00000000 807c8120 nt!KiSwapContext+0x26 (FPO: [Uses EBP] [0,0,4])
c363baf0 82aaf563 85f2b0f0 85f2b030 86f5c030 nt!KiSwapThread+0x266
c363bb18 82aa940f 85f2b030 85f2b0f0 00000000 nt!KiCommitThreadWait+0x1df
c363bb90 82510c3e 86f5c030 00000006 00000000 nt!KeWaitForSingleObject+0x393
WARNING: Stack unwind information not available. Following frames may be wrong.
c363bbd0 8252dddc c363bc38 c363bbfc 8252ed0f win32k+0xc0c3e
c363bbdc 8252ed0f c363bc38 c363bc10 8252df22 win32k+0xddddc
c363bbfc 8252ebd2 500107c0 82516caf 06ebf9fc win32k+0xded0f
c363bccc 82516cde fd7cf320 ffaa18f8 ffbbd550 win32k+0xdebd2
c363bd00 82a8544a 500107c0 00000000 00000000 win32k+0xc6cde
c363bd00 771e6194 500107c0 00000000 00000000 nt!KiFastCallEntry+0x12a (FPO: [0,3] TrapFrame @ c363bd34)
06ebfa0c 00000000 00000000 00000000 00000000 0x771e6194

3: kd> !thread 86efcd48
THREAD 86efcd48  Cid 01ac.01fc  Teb: 7ffd8000 Win32Thread: ffb1a3b8 WAIT: (WrResource) KernelMode Non-Alertable
    86f403a8  Semaphore Limit 0x7fffffff
IRP List:
    868ec990: (0006,0100) Flags: 00060970  Mdl: 00000000
Not impersonating
DeviceMap                 8ce050a8
Owning Process            86ec5348       Image:         csrss.exe
Attached Process          N/A            Image:         N/A
Wait Start TickCount      24077          Ticks: 249 (0:00:00:03.884)
Context Switch Count      11243             
UserTime                  00:00:00.000
KernelTime                00:00:01.201
Win32 Start Address 0x75313146
Stack Init af886fd0 Current af8865c8 Base af887000 Limit af884000 Call 0
Priority 13 BasePriority 13 UnusualBoost 0 ForegroundBoost 0 IoPriority 2 PagePriority 5
ChildEBP RetAddr  Args to Child              
af8865e0 82ab0c65 86efcd48 00000000 807c8120 nt!KiSwapContext+0x26 (FPO: [Uses EBP] [0,0,4])
af886618 82aaf563 86efce08 86efcd48 86f403a8 nt!KiSwapThread+0x266
af886640 82aa940f 86efcd48 86efce08 0000000e nt!KiCommitThreadWait+0x1df
af8866bc 82ae12e5 86f403a8 0000001b 00000000 nt!KeWaitForSingleObject+0x393
af886714 82ae0361 86f403a8 00000098 86ec5de8 nt!ExpWaitForResource+0x16f
af886750 825a2607 86ec5de8 00000001 ffb83050 nt!ExAcquireSharedStarveExclusive+0x18d
WARNING: Stack unwind information not available. Following frames may be wrong.
af8868f4 825a2a07 ffb808e0 000000f1 00000098 win32k+0x152607
af88694c 8249adf1 ffb808e0 000000f1 00000098 win32k+0x152a07
af886974 8249e7af ffb83008 000000f1 00000098 win32k+0x4adf1
af8869b4 8256fc98 00b83008 000000f1 00000098 win32k+0x4e7af
af8869f4 8253e849 000000f1 00000098 00000000 win32k+0x11fc98
af886a2c 8253e6ca 00000000 86467e18 af886a84 win32k+0xee849
af886a3c 82aea163 ffb22aa0 ffb22ac8 00000000 win32k+0xee6ca
af886a84 82ab0c4d 00000000 00000000 00000000 nt!KiDeliverApc+0x17f
af886ac8 82aaf563 86ef13f8 86efcd48 86efce44 nt!KiSwapThread+0x24e
af886af0 82aab82f 86efcd48 86efce08 00000000 nt!KiCommitThreadWait+0x1df
af886c68 824ef74d 00000002 865544d0 00000001 nt!KeWaitForMultipleObjects+0x535
af886cc0 82459008 00000001 865544d0 82463048 win32k+0x9f74d
af886d04 82458599 865544d0 00000001 82672ce0 win32k+0x9008
af886d18 8251e170 00000004 00cafd3c af886d34 win32k+0x8599
af886d28 82a8544a 00000004 00cafd7c 771e6194 win32k+0xce170
af886d28 771e6194 00000004 00cafd7c 771e6194 nt!KiFastCallEntry+0x12a (FPO: [0,3] TrapFrame @ af886d34)
00cafd7c 00000000 00000000 00000000 00000000 0x771e6194 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:23:37.907

您有 2 个线程在等待同一事件：

```
8584ad48
c6c4771c 82ae12e5 86f403a8 0000001b 00000000 nt!KeWaitForSingleObject+0x393

and
86efcd48
af8866bc 82ae12e5 86f403a8 0000001b 00000000 nt!KeWaitForSingleObject+0x393 
```

您可以看到`86f403a8`两个线程都在等待它，找出谁拥有这个事件对象，它应该指出可能是您的问题的根源。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-30T06:46:38.177

如果应用程序在 .NET 4.0 中，请在 Visual Studio 2010 中打开转储，如果链接正确的 PDB 文件，则可以毫无问题地进入代码。比 WinDBG 容易得多。

您可以通过单击按钮来查看应用程序在何处中止，`Debug with mixed`然后将应用程序的所有正确符号设置到正确的位置。[更多信息](http://msdn.microsoft.com/en-us/library/fk551230.aspx)

# flash - 鼠标滚轮事件未在 IE9 中触发

> ID：12191193
> 
> 赞同：0
> 
> 时间：2012-08-30T06:38:07.510
> 
> 标签：flash, internet-explorer

我们公司有一个图形可视化解决方案，由 Flash 制成。

我们将一个事件绑定到 Flash 上的鼠标滚轮移动事件。

它适用于 Chrome 和 IE9 兼容模式，但不适用于 IE9。

也许我可以使用 jquery 做同样的事情，但我不想要任何绕行。

有人有同样的症状吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:52:51.213

它适用于我的项目。

也许你可以试试这样的技巧：[https ://stackoverflow.com/a/5489123/1517816](https://stackoverflow.com/a/5489123/1517816)

嗨，M。

# jquery - 文件上传和表单，在 UI 对话框中为每个请求发布一个额外的时间

> ID：12191195
> 
> 赞同：0
> 
> 时间：2012-08-30T06:38:12.550
> 
> 标签：jquery, jquery-ui

我正在为每个请求额外发布一次的表格而苦苦挣扎。我在对话框中使用 jquery 文件上传。

我相信的情况是每次上传都会增加一次点击事件。但我不希望表单记住这一点，我在对话框关闭时使用“销毁”功能..

提交代码：

```
$('#fileupload').fileupload({
     url: 'fileupload.aspx',
     add: function (e, data) {
         $("#upload").live("click", function (ev) {
             data.submit();
         });
     },
     formData: function () {
         return $('#myform').serializeArray();
     },
     maxNumberOfFiles: 1,
     replaceFileInput: false,
     dataType: 'json',

     done: function (e, data) {
         $('#myform')[0].reset();

         $('.ui-dialog-titlebar-close').click();
     }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:15:12.983

是`#fileupload`一部分`#myform`？如果是，`$('#myform').serializeArray()`则包含该元素，因此文件将作为附加数据与文件上传一起发送。

# android - 在引擎中设置动体的用户海量数据

> ID：12191196
> 
> 赞同：1
> 
> 时间：2012-08-30T06:38:13.063
> 
> 标签：android, andengine

如何在andEngine中设置动体的用户海量数据。我的问题是，在我的游戏中，当我提高跑步玩家的速度时，跳跃的玩家用 x 轴覆盖很长的距离。这个距离随速度而变化。请任何解决方案..

# ios - 来自 iOS 设备的天文高度

> ID：12191197
> 
> 赞同：0
> 
> 时间：2012-08-30T06:38:19.447
> 
> 标签：ios, accelerometer, gyroscope, astronomy, altitude

如何检索 iOS 设备指向的天文高度？目标是能够将设备相机指向天空并让它显示高度。

天文高度是物体与观察者当地地平线之间的角度。这与从位置管理器返回的高度不同。更多信息：[http://en.wikipedia.org/wiki/Altitude_(astronomy)](http://en.wikipedia.org/wiki/Altitude_%28astronomy%29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:27:58.203

a 没有返回高度或类似信息`CLLocationManager`。

您需要的是[CMMotionManager](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html)。
使用您选择的读出频率启动一个计时器并读取您的 CMMotionManager 的[态度](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/doc/c_ref/CMAttitude)。请记住只创建一个`CMMotionManager`.

该`CMAttitude`对象有一个名为的属性`pitch`，它使您可以围绕从一侧到另一侧穿过设备的横向轴进行旋转。所以基本上它与您想要的高度相同。

# android - 安装我的应用程序时如何获取 Android 用户/电话信息

> ID：12191203
> 
> 赞同：0
> 
> 时间：2012-08-30T06:38:51.270
> 
> 标签：android

每当用户安装我的 android 应用程序时，我都应该获取他们的设备信息，并且我喜欢维护有关安装我的应用程序的用户的网络服务。这可能吗？这样做是否有效。一般来说，应用程序开发公司会有安装他们的应用程序的用户信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:49:03.820

通常，开发者会保持匿名统计，或使用 IMEI 号或 wifi/蓝牙 MAC 地址来识别个人用户。使用用户的电话号码通常是一种非常糟糕的做法。经验法则是，如果您想要电话号码或电子邮件地址等个人联系方式，您明确要求用户输入它们，并获得他们的许可以用于任何目的。未经用户同意，您不得**从**用户那里获取个人信息。

# android - 如何将传入的消息存储到android中的另一个文件夹中？

> ID：12191204
> 
> 赞同：0
> 
> 时间：2012-08-30T06:38:58.447
> 
> 标签：android, sms, message

我想阻止一些来自特定号码的传入消息，然后将该消息存储/移动到我创建的另一个文件夹中。

有可能吗？任何人都可以建议我使用哪种方式可以满足我的要求..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:51:38.913

意图接收器的代码，它将从接收到的意图中读取 SMS 并显示消息。

```
 public class SmsReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }
            //---display the new SMS message---
            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        }                         
    }
} 
```

并确保在您的清单文件中添加此权限。

```
<uses-permission android:name="android.permission.RECEIVE_SMS">
</uses-permission> 
```

此外，**`msgs[i].getOriginatingAddress()`**为您提供 SMS 的发件人，您可以检查此号码是否在您的阻止列表中。然后用于**`msgs[i].getMessageBody().toString();`**将短信内容存储在您的数据库/文件中。

本[教程](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)涵盖了您问题的一些方面。

希望能帮助到你。

# android - 动态片段中的布局

> ID：12191206
> 
> 赞同：1
> 
> 时间：2012-08-30T06:38:59.617
> 
> 标签：android, android-layout

我正在编写一个计算器应用程序，我希望能够在其中切换 4 种计算模式：十进制、二进制、八进制和十六进制。为了管理不同模式的不同 UI，我的 Activity 中有 4 个 Fragment 子类。除了 Activity 的主 XML 文件外，每个 Fragment 都有自己的 XML 布局文件。我在 Android 开发者网站上找到了为 Fragments 充气布局的指南，并且我已经遵循了该指南。但是，我想将侦听器等添加到布局的各个组件中，最好是在 Fragment 的 onCreateLayout 方法中，或者在我可以轻松完成并最大限度减少代码重复的其他地方。

但是，当我尝试调用 findViewByID 来访问其中一个膨胀视图时（显然是在我调用 LayoutInflater.inflate 之后），我似乎得到了一个空返回值。无论我是从 onCreateLayout 内还是从 Activity 中的其他地方调用 findViewByID 都会出现此问题（理论上，在创建视图之后）。这里出了什么问题？

我认为可能是一个问题是我在各种片段布局之间重载了视图的名称。例如，二进制布局中的“1”按钮与十六进制布局中的“1”按钮具有相同的 ID。这是否允许，假设二进制和十六进制布局永远不会同时成为 Activity 的一部分？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:08:03.990

我认为不同布局中的相同 id 在 Fragment 中没有问题。首先，您必须捕捉膨胀的视图，然后在其中找到任何内容。例如 -

```
@Override
public View onCreateView(LayoutInflater inflater,  ViewGroup container, Bundle savedInstanceState) {

    view = inflater.inflate(R.layout.frg1, container, false);
    android.util.Log.v("", "!!!!!!!!!! Frg1  !!!!!!!!!");   

    Button b = (Button) view.findViewById(R.id.b1);
    b.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v) {
            Toast.makeText(getActivity(), "here", Toast.LENGTH_SHORT).show();
        }
    });

    return view;
} 
```

# iphone - 如何使用 pagecontrol 在 imageview 中显示图像

> ID：12191207
> 
> 赞同：0
> 
> 时间：2012-08-30T06:38:59.817
> 
> 标签：iphone, uiscrollview, uipagecontrol

我在滚动视图中有一个图像视图，并且我正在使用页面控件来滚动图像。问题只是最后一个图像不显示前两个图像。但是当我滚动时，我可以看到第二个图像扩展一些然后消失。如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:29:41.727

```
 memberScrollview=[[UIScrollView alloc]initWithFrame:memberScrollviewFrame];
    memberScrollview.pagingEnabled=YES;
    memberScrollview.backgroundColor = [UIColor colorWithRed:0.95 green:0.95 blue:0.95 alpha:0.2];
    memberScrollview.showsVerticalScrollIndicator=NO;
    memberScrollview.showsHorizontalScrollIndicator=NO;
    memberScrollview.delegate =self;
    memberScrollview.scrollEnabled = YES;
    int scrollength = 50;
    memberScrollview.contentSize = CGSizeMake(scrollength,60);
    memberImageArray =[[NSMutableArray alloc]init];
    memberScrollViewImageArray=[[NSArray alloc]initWithObjects:kmemberScrollViewImageArray];
    leftValue =0;

    for (int j=0; j<12; j++){

        if (j%3 == 0) {
            y = float2;
        }

        else if (j % 3 == 1) {
            //x = 32;
            y = float32;
        }        
        else if(j % 3 == 2) {
            //x = 62;
            y = float62;
           // leftValue += 30;
        }        
        profileImageViewFrame=CGRectMake(x,y,float28,float28);
        profileImageView=[[UIImageView alloc]initWithFrame:profileImageViewFrame];            

        profileImageView.image=[UIImage imageNamed:[memberScrollViewImageArray objectAtIndex:j]];
        [memberImageArray insertObject:profileImageView atIndex:j];

        profileImageView.backgroundColor = [UIColor clearColor];

        memberScrollview.contentSize=CGSizeMake(x+float30,float90);

        [memberScrollview addSubview:[memberImageArray objectAtIndex:j]];

        if(j % 3 == 2) {
            x = x+float30;
        }
    }

    [thirdView addSubview:memberScrollview]; 
```

# debugging - OpenCV中CV_32FC3和CV_64FC3的区别？

> ID：12191211
> 
> 赞同：3
> 
> 时间：2012-08-30T06:39:19.833
> 
> 标签：debugging, opencv, matrix

我正在使用 OpenCV 矩阵和显示功能进行测试，并遇到了这个错误。我花了半天多的时间才揭晓：

我最初尝试显示 OpenCV 矩阵，而不考虑矩阵的类型，例如 CvMat 或 Mat，......使用 vasile 先生从我的另一篇文章[Multi channel Mat display function推荐的显示方法](https://stackoverflow.com/questions/12179059/multi-channel-mat-display-function/12179129#12179129)

display 方法只是将矩阵的所有数据获取到 cout 流

这是我的程序：

```
// First: CV_32FC3 works OK

float objpts[12] = {0, 105, 105, 0, 0, 0, 105, 105, 0, 0, 0, 0};
CvMat objptsmat = cvMat( 1, 4, CV_32FC3, objpts);  
CvMat* objectPoints = &objptsmat;
CvMatShow(objectPoints);
getchar(); 
```

输出：

![在此处输入图像描述](../Images/085bfd8492f74ccdbbef3214517733fd.png)

```
// Second: CV_64FC3 crashes

float objpts[12] = {0, 105, 105, 0, 0, 0, 105, 105, 0, 0, 0, 0};
CvMat objptsmat = cvMat( 1, 4, CV_64FC3, objpts);  
CvMat* objectPoints = &objptsmat;
CvMatShow(objectPoints);
getchar(); 
```

输出： ![在此处输入图像描述](../Images/6f0d09997e911457d30803d026ec8e1d.png)

他们应该是一样的。对？？！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T06:45:09.077

在第二个示例中，您应该将数组声明为

```
double objpts[12] = {0, 105, 105, 0, 0, 0, 105, 105, 0, 0, 0, 0}; 
```

你可以读`CV_xxtCn`为

*   xx：位数
*   t：类型（F = 浮点类型，S = 有符号整数，U = 无符号整数）
*   n：通道数

# java - UI 元素未显示在 Android 虚拟设备上

> ID：12191212
> 
> 赞同：0
> 
> 时间：2012-08-30T06:39:32.127
> 
> 标签：java, android

我刚刚开始学习 Android 并按照[Android 网站上](http://developer.android.com/training/basics/firstapp/building-ui.html)的教程进行操作。我完全遵循了它。小程序假设显示 a`textfield`和 a `button`。“activity_main.xml”是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="horizontal" >

    <EditText android:id="@+id/edit_message"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" 
        android:layout_weight="1" />

     <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" />

</LinearLayout> 
```

“strings.xml”是：

```
<resources>
    <string name="app_name">My First App</string>
    <string name="edit_message">Enter a message</string>
    <string name="button_send">Send</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>
</resources> 
```

“MainActivity.java”是默认的，我没有对它做任何事情：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

问题是当我运行程序时，模拟器出现了，但`Textfield`从来`Button`没有出现过。我在 Windows 机器上使用 Eclipse。Eclipse 和 Android 开发工具都是全新安装的。

这是我的第一个 Android 应用程序，只是不知道为什么没有显示文本字段和按钮。

## 编辑

当我运行程序时，我也会收到以下警告：

```
 [2012-08-30 08:42:59 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.

    [2012-08-30 08:42:59 - Emulator] could not get wglGetExtensionsStringARB
    [2012-08-30 08:42:59 - Emulator] could not get wglGetExtensionsStringARB
    [2012-08-30 08:42:59 - Emulator] could not get wglGetExtensionsStringARB
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:49:43.983

改变

```
 android:layout_width="0dp" 
```

到

```
 android:layout_width="wrap_content" 
```

第一次在模拟器上运行时，显示输出屏幕需要一些时间。从下一次开始，它将显示得更快。你等了一段时间然后检查一下吗？

# django - 在 Django 中优化（和缓存？）postgreSQL 写入

> ID：12191214
> 
> 赞同：1
> 
> 时间：2012-08-30T06:39:39.773
> 
> 标签：django, postgresql, memcached, redis

我有一个应用程序，当未优化时，将需要多次写入 postgreSQL 数据库以响应实时信息 - 每秒多达 1 次！！！

因此，我想通过 redis/redisco 或 memcache 缓存这个数据流，然后每 5 分钟在我的 postgreSQL 数据库中执行一次 bulk_create。

据我了解，django memcache 将存储在内存中，但是当需要写入时，可以使 memcache 无效。

或者，我正在考虑将信息放入 redis 中，可能使用 redisco 模型，并每隔约 5 分钟对数据库执行一次 bulk_create。

3部分问题：

*   哪个选项更适合长期扩展？
*   每种都有哪些优点/缺点？
*   最后，有没有人有任何我可以阅读的参考资料/教程？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:40:29.183

过早的优化是万恶之源。PostgreSQL 能够处理繁重的混合读/写工作负载。从那里开始，并根据需要开始探索其他选项，但是使用高端服务器，当 PostgreSQL 9.2 发布时，您将能够在 PostgreSQL 9.2 上获得高达每秒约 14000 次写入（取决于查询细节）。使用 9.1，您每秒最多可以写入约 3000 次，差异与锁定行为有关。

暂时不要优化。如果您开始每秒进行数百次写入，那么也许这是值得的。然而，特别是如果这些是简单的写入，你最好保持你的架构简单。

# triggers - 触发器如何在 SQL Server 内部工作

> ID：12191215
> 
> 赞同：1
> 
> 时间：2012-08-30T06:39:40.637
> 
> 标签：triggers, sql-server-2008-r2

如果我错了，请纠正我。

我对触发器的了解是它们是由事件（插入、更新、删除）触发的。所以我们可以在触发器中运行存储过程等。

这将为应用程序提供良好的响应能力，因为用户与之交互的查询非常小，并且服务器内部将这种“其他”较长时间的东西作为单独的任务来处理。

但我不知道如何在服务器内部处理触发器。我真正想知道的是在下面给出的场景中会发生什么。

触发后插入。而take trigger正在执行一个更长的存储过程。然后在触发器的中间可以有另一个插入。我想知道的是第二个触发器会发生什么。如果可能的话，我可以让第二个触发器忽略它自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:27:08.443

marc_s 给出了正确答案。为了完整起见，我将复制它。

**触发器是同步的**

**如果您想拥有异步功能，请使用 SQL 代理实现。**

触发器由事件触发 - 然后它们被执行 - 现在。由于您无法控制触发它们的时间和频率，因此您应该将这些触发器中的处理保持在绝对最小值 - 我总是尝试 - 最多 - 进入另一个表（“审核”表）或可能放一个将“标记”行放入“命令”表中。但是该信息的实际处理 - 运行存储过程等 - 应该留给外部工作 - 不要在触发器中进行大量处理！这将可靠地杀死你所有的性能\响应能力。

# mysql - MySQL 独立还是通过 XAMPP？

> ID：12191216
> 
> 赞同：1
> 
> 时间：2012-08-30T06:39:41.767
> 
> 标签：mysql, phpmyadmin, xampp

这是我在stackoverflow上的第一个问题，希望我能理解它。这些天我开始学习数据库和编程。所以我想得到一些关于 MySQL 数据库的建议。虽然它是开源的并且可以下载，但我应该在我的笔记本电脑（Windows 7 32bit）上安装独立的 MySQL GUI 版本还是应该安装 XAMPP 然后通过 phpMyAdmin 访问它？我问这个问题的目的是，对于初学者..我正在学习 SQL 和查询。然后我想学习使用 php 或 JavaEE 创建 Web 应用程序。我完全不知道这些概念，所以如果有人能花几分钟时间并相应地指导我，我将不胜感激。

谢谢 ！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:43:21.230

并欢迎:)

如果您计划专注于 PHP 而不是 MySQL，那么安装 XAMPP 是一个好的开始。它更轻量级，同时包含 PHP 和 Mysql。你最好先集中精力学习基础知识，而不是花时间在软件组件上。这就是为什么我会选择 XAMPP（或者我个人最喜欢的：WAMP Server）

如果您想花更多时间在数据库管理上，例如用户管理、作业……从他们的站点下载 Mysql 服务器包可能会很有趣。此外，该软件包还附带示例数据库，您可以使用这些数据库来学习一些 SELECT 和 UPDATE 查询。它比 PHPMyAdmin 更容易查询。

如果您的目标是将 MySQL 与自制应用程序一起使用，请在深入查询之前获取 XAMPP 并学习一些 PHP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:46:56.787

> > 然后我想学习使用 php 创建 Web 应用程序

在这种情况下，XAMPP 应该是你的朋友。顺便说一句，使用 XAMPP，您将获得一个与独立 MySQL 相同的 MySQL 服务器。您可以使用 phpmyadmin 触发您的查询，或通过 shell（控制台）或第三方程序进行连接....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T19:06:39.430

如果您使用 NPM，您可以使用 mysql-server 包安装独立版本的 MySQL：[https ://www.npmjs.com/package/mysql-server](https://www.npmjs.com/package/mysql-server)

# android - Android XML解析问题

> ID：12191217
> 
> 赞同：2
> 
> 时间：2012-08-30T06:39:44.047
> 
> 标签：android, gridview, xml-parsing

我有一个很大的 xml 文件（大约 100 多个项目），你如何根据`String KEY_ID = "id";`XML 中的“”过滤下载？下面是我的 XML 代码示例。例如，我想列出`String KEY_ID = "id";`从 1 到 20 的项目“”以显示在我的网格视图中。我的目标是限制 xmlparsing。目前我的代码只是下载我的 xml 中的所有内容并在 gridview 中显示它们。

我的XML.xml

```
<song>
<id>1</id>
<title>1</title>
<artist>Blabla</artist>
<duration>0</duration>
<thumb_url>https://jpg</thumb_url>
<big_url>https://jpg</big_url>
</song>

<song>
<id>2</id>
<title>2</title>
<artist>Nature</artist>
<duration>0</duration>
<thumb_url>https://jpg</thumb_url>
<big_url>https://jpg</big_url>
</song>

<song>
<id>3</id>
<title>3</title>
<artist>Nature</artist>
<duration>0</duration>
<thumb_url>https://jpg</thumb_url>
<big_url>https://jpg</big_url>
</song>
</music> 
```

MainGridView.class

```
public class MainGridView extends Activity {

    private ProgressDialog pDialog;
    ArrayList<HashMap<String, String>> songsList;
    static final String KEY_SONG = "song"; 
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_CAT_ARTIST = "artistcat";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";
    static final String KEY_BIG_URL = "big_url";
    static final String KEY_CAT_URL = "cat_url";
    static String IMAGE_POSITION;
    GridView grid;
    MainGridViewLazyAdapter adapter;
    String cat_url;
    String artist_url;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gridview_main);
        new loadGridView().execute();

        grid = (GridView) findViewById(R.id.grid_view);

  public class loadGridView extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainGridView.this);
            pDialog.setTitle("Connect to Server");
            pDialog.setMessage("This process can take a few seconds to a few minutes, depending on your Internet Connection Speed.");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }
        @Override
        protected String doInBackground(Integer... args) {
            // updating UI from Background Thread
                    Intent in = getIntent();
                    songsList = new ArrayList<HashMap<String, String>>();
                    cat_url = in.getStringExtra(KEY_CAT_URL);
                    artist_url = in.getStringExtra(KEY_CAT_ARTIST);

                    XMLParser parser = new XMLParser();
                    String xml = parser.getXmlFromUrl(cat_url); // getting XML from URL
                    Document doc = parser.getDomElement(xml); // getting DOM element

                    NodeList nl = doc.getElementsByTagName(KEY_SONG);
                    // looping through all song nodes <song>
                    for (int i = 0; i < nl.getLength(); i++) {
                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();
                        Element e = (Element) nl.item(i);
                        // adding each child node to HashMap key => value
                        map.put(KEY_ID, parser.getValue(e, KEY_ID));
                        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                        map.put(KEY_BIG_URL, parser.getValue(e, KEY_BIG_URL));
                        // adding HashList to ArrayList
                        songsList.add(map);

                    }
                    return null;
                }   

        @Override
        protected void onPostExecute(String args) {

            adapter=new MainGridViewLazyAdapter(MainGridView.this, songsList);   
            grid.setAdapter(adapter);
            pDialog.dismiss();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:46:16.393

XML 解析实际上通常非常快（在某些手机中比 JSON 更快）。但是要显示您可能想要查看 XPath (java.xml.xpath) 的一些文档 - 例如：

```
/music/song[id <= 20] 
```

请参阅[http://developer.android.com/reference/javax/xml/xpath/package-summary.html](http://developer.android.com/reference/javax/xml/xpath/package-summary.html)

# clojure - 地图中的地图中的计数值

> ID：12191221
> 
> 赞同：1
> 
> 时间：2012-08-30T06:39:55.747
> 
> 标签：clojure

一个仍在学习的 clojure-newbie（我）得到了一张地图列表。
每张地图包含一个帐号和其他信息
（例如（{:account 123, :type "PK", :end "01.01.2013", ...} {:account 456 :type "GK" :end "01.07.2016 ", ...}) 现在我需要一个函数来依次放置一个递增的数字和帐号
（like `{1, 123, 2, 456 etc}`）。无论我尝试什么，我都没有得到它。

我曾经学过德尔福，它会在那里

`for i :=1 to (count MYMAP)
do (put-in-a-list i AND i-th account number in the list)
inc i`

由于一些限制，我不允许使用核心之外的功能，而且我不能使用“use”、“ns”、“require”、“cycle”、“time”、“loop”、“while”、“ defn”、“defstruct”、“defmacro”、“def”、“defn”、“doall”、“dorun”、“eval”、“read-string”、“repeatedly”、“repeat”、“iterate”、“进口”、“啜饮”、“吐口水”。

并且 - 如果有任何不好的英语，请原谅 - 我不经常用英语问这样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:38:42.943

对于散布有帐号的自然数的惰性序列，您可以尝试以下操作：

```
(interleave ; splices together the following sequences
 (map inc (range)) ; an infinite sequence of numbers starting at 1
 (map :account ; gets account numbers out of maps
      [{:account 123, :type "PK", :end "01.01.2013", ...}, ...])) ; your accounts 
```

但是，`{}`您的示例 ( ) 中的符号`{1, 123, 2, 456 etc}`表明您可能对地图更感兴趣。在这种情况下，您可以使用`zipmap`：

```
(zipmap ; makes a map with keys from first sequence to values from the second
 (map inc (range))
 (map :account
      [{:account 123, :type "PK", :end "01.01.2013", ...}, ...])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:12:51.417

`map-indexed`将帮助您创建一个递增的数列：

```
user> (let [f (comp (partial into {})
                    (partial map-indexed #(vector (inc %) (:account %2))))]
        (f [{:account 123, :type "PK", :end "01.01.2013"} {:account 456 :type "GK" :end "01.07.2016"}]))
{1 123, 2 456} 
```

# django - 如何隐藏 django 服务器打印的消息

> ID：12191226
> 
> 赞同：2
> 
> 时间：2012-08-30T06:40:26.027
> 
> 标签：django

我现在有个问题。我想通过django服务器隐藏消息，例如'get /index.html ...'，这是对客户端的响应。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:36:12.307

django 不直接支持隐藏开发服务器的消息，但是您可以通过修改 django 的代码来实现。只需打开文件：

`[PYTHON site-packages]/django/core/servers/basehttp.py`

在文本编辑器中并注释该行（django 1.4.1 中的第 200 行）：

```
sys.stderr.write(msg) 
```

要查找 python 站点包，您可以在终端 (cmd) 中键入：

```
python -c "import sys; sys.path = sys.path[1:]; import django; print(django.__path__)" 
```

# ruby-on-rails - Cucumber 功能需要时间才能运行

> ID：12191232
> 
> 赞同：0
> 
> 时间：2012-08-30T06:40:48.773
> 
> 标签：ruby-on-rails, cucumber

我有用于 rails 2 应用程序的 12,000 行代码的黄瓜功能。我正在运行所有功能以获取应用程序代码的代码覆盖率，例如控制器、模型、帮助程序、查看页面代码。运行所有功能需要 4 小时。我仍然没有获得 100% 的代码覆盖率，我的问题是如何通过黄瓜功能获得 100% 的代码覆盖率以及如何将所有功能的运行时间从 4 小时减少到最短可行时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:28:18.997

我确信有很多关于加速 Cucumber 的页面，例如[http://aaron-jensen.com/post/5019042852/speed-up-your-rspec-cucumber-run](http://aaron-jensen.com/post/5019042852/speed-up-your-rspec-cucumber-run)就是其中之一。

您可能需要查看分析，因为使 Cucumber 变慢的原因可能特定于您的代码，只有您可以看到。

请记住，集成测试确实以缓慢而闻名，因为它们正在测试整个堆栈（这就是重点）。这就是为什么人们经常进行彻底的单元测试而不是彻底的集成测试的原因，因为在集成级别测试所有内容太慢了。

关于获得更好的覆盖率，如果您使用覆盖率报告来告诉您覆盖了多少，它应该在其 HTML 报告中告诉您哪些行没有被覆盖，您可以为此定制测试。

但是，实际上可能有些事情您无法在用户界面中进行测试，因为它们是为了稳健性而存在的 - 即您不希望在实践中发生的事情，但您正在处理以防万一他们这样做意外的原因，或由于未来的代码更改。在这些情况下，单元测试可能是覆盖这些代码行的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:07:54.297

当然，运行该功能需要时间，因为它实际上模拟了用户交互。您可以通过指定要运行的确切场景来避免重新运行相同的场景

```
 cucumber path/to/file.feature:33 
```

这里 33 指定要运行的文件中特定场景的行号。

# ios - iOS 在运行时更改应用程序图标

> ID：12191233
> 
> 赞同：0
> 
> 时间：2012-08-30T06:40:49.430
> 
> 标签：ios, xcode

我想在运行时更改我的应用程序图标。我在 SO 上阅读了其他类似的线程，他们说使用 Apple 认可的 API 是不可能的。其中一个回复提到它可能使用受限制的 API，但没有详细说明。

我了解，如果我使用受限 API，我的应用程序范围将缩小到仅限越狱设备。我很好，但我该如何实现这个功能。

抱歉，我无法为这个问题指出任何研究工作，因为我不知道如何去做，甚至不知道如何开始。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-07T08:47:58.250

虽然这是一个老问题，但我最近发现这现在是可能的，从 iOS 10.3 开始：

[https://developer.apple.com/documentation/uikit/uiapplication/2806818-setalternateiconname](https://developer.apple.com/documentation/uikit/uiapplication/2806818-setalternateiconname)

...使用`UIApplication.setAlternateIconName(_:completionHandler:)`API。

但是请注意，您只能使用已作为应用程序包的一部分提供的图标。

# javascript - 将“this”关键字发送到对象中

> ID：12191234
> 
> 赞同：0
> 
> 时间：2012-08-30T06:40:54.737
> 
> 标签：javascript, backbone.js, this

```
var View = Backbone.View.extend({
    id: 'foobar',

    param: {
        x: this.id // Will be "undefined"
    }
}); 
```

有什么方法可以利用`this`, 可以`this.param.x`指向，或与 具有相同的价值`this.id`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:47:15.507

您不能`this`在静态声明中使用该对象。您可以在方法调用或构造函数中使用代码设置该值，但不能在静态声明中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:32:12.887

使用类似的东西，

```
var View = Backbone.View.extend({
  id: 'foobar',

  initialize: function () {
      this.param = { x: this.id };
  }
}); 
```

# android - 如何设置 Edittext 的高度和宽度，以便当我在按钮旁边的 edittext 中键入内容时应该变得可见

> ID：12191235
> 
> 赞同：0
> 
> 时间：2012-08-30T06:40:58.897
> 
> 标签：android, android-layout, android-ui

我有`EditText`&`Button`在`LinearLayout`。我现在和我的是`Button`隐形的。`EditText``fill parent`

但是，当我想在`EditText`编辑文本的宽度中输入内容时，应该换行 & `Button`旁边应该变得可见。任何代码片段都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:49:41.103

不要做`EditText`to `fill_parent`。您可以尝试使用：

```
<EditText
    android:layout_width = "0dp"
    android:layout_height = "wrap_content"
    android:layout_weight = "1"
    />

<YourButton/> 
```

我假设你`LinearLayout`是有`horizontal`方向的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:51:04.597

尝试这个：

*   [将 OnFocusChangedListener](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)注册到您的 EditText。
*   覆盖[`onFocusChange()`](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html#onFocusChange%28android.view.View,%20boolean%29)并执行以下 if `hasFocus== true`：
    *   将 EditText 的 LayoutParameters 更改为 wrap_content 的宽度和高度。
    *   将您的按钮设置为可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:48:36.380

Button 有 setVisibility 方法。要使其可见，请使用以下命令：

```
Button button.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:49:45.437

尝试这个

```
<LinearLayout android:orientation="horizontal">
     <EditText android:layout_weight="1" android:layout_height="wrap_content" 
         anroid:layout_width="0dp" />
     <Button android:layout_width="50dp" android:layout_height="wrap_content"
         android:visibility="gone" />
</LinearLayout> 
```

我假设您已经有了在 EditText 中键入内容时显示按钮的代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T07:00:12.313

尝试这个 ：

布局 ：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/btnClickMe"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Click Me"
        android:visibility="gone" />
</LinearLayout> 
```

代码 ：

```
EditText editText=(EditText)findViewById(R.id.editText);
    final Button btnClickMe=(Button) findViewById(R.id.btnClickMe);

    editText.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            btnClickMe.setVisibility(View.VISIBLE);
        }
    }); 
```

# r - 为R中数据帧中列的每个唯一值选择顶部有限行数

> ID：12191236
> 
> 赞同：0
> 
> 时间：2012-08-30T06:41:01.220
> 
> 标签：r

我有一个包含 3 列的数据框。a，b，c。多行对应于 a 列的每个唯一值。我想选择与 a 列的每个唯一值相对应的前 5 行。c 列是某个值，并且数据框已经按降序排序，所以这不是问题。谁能建议我如何在 R 中做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:50:16.337

窃取@ptocquin 的示例，这是使用基本功能的方法`by`。`do.call`您可以使用（见下文）展平结果。

```
> by(data = data, INDICES = data$a, FUN = function(x) head(x, 5))
# or by(data = data, INDICES = data$a, FUN = head, 5)
data$a: 1
   a          b         c
21 1  0.1188552 1.6389895
41 1  1.0182033 1.4811359
61 1 -0.8795879 0.7784072
81 1  0.6485745 0.7734652
31 1  1.5102255 0.7107957
------------------------------------------------------------ 
data$a: 2
   a           b          c
15 2 -1.09704040  1.1710693
85 2  0.42914795  0.8826820
65 2 -1.01480957  0.6736782
45 2 -0.07982711  0.3693384
35 2 -0.67643885 -0.2170767
------------------------------------------------------------ 
```

类似的事情可以通过拆分你的 data.frame 来实现`a`，然后使用`lapply`它来逐步遍历每个元素子集的第一`n`行。

```
split.data <- split(data, data$a)
subsetted.data <- lapply(split.data, FUN = function(x) head(x, 5)) # or ..., FUN = head, 5) like above
flatten.data <- do.call("rbind", subsetted.data)
head(flatten.data)
       a           b           c
1.21   1  0.11885516  1.63898947
1.41   1  1.01820329  1.48113594
1.61   1 -0.87958790  0.77840718
1.81   1  0.64857445  0.77346517
1.31   1  1.51022545  0.71079568
2.15   2 -1.09704040  1.17106930
2.85   2  0.42914795  0.88268205
2.65   2 -1.01480957  0.67367823
2.45   2 -0.07982711  0.36933837
2.35   2 -0.67643885 -0.21707668 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:26:06.677

这是我的尝试：

```
library(plyr)
data <- data.frame(a=rep(sample(1:20,10),10),b=rnorm(100),c=rnorm(100))
data <- data[rev(order(data$c)),]
head(data, 15)

 a           b        c
28  6  1.69611039 1.720081
91 11  1.62656460 1.651574
70  9 -1.17808386 1.641954
6  15  1.23420550 1.603140
23  7  0.70854914 1.588352
51 11 -1.41234359 1.540738
19 10  2.83730734 1.522825
49 10  0.39313579 1.370831
80  9 -0.59445323 1.327825
59 10 -0.55538404 1.214901
18  6  0.08445888 1.152266
86 15  0.53027267 1.066034
69 10 -1.89077464 1.037447
62  1 -0.43599566 1.026505
3   7  0.78544009 1.014770

result <- ddply(data, .(a), "head", 5)
head(result, 15)

   a           b           c
1  1 -0.43599566  1.02650544
2  1 -1.55113486  0.36380251
3  1  0.68608364  0.30911430
4  1 -0.85406406  0.05555500
5  1 -1.83894595 -0.11850847
6  5 -1.79715809  0.77760033
7  5  0.82814909  0.22401278
8  5 -1.52726859  0.06745849
9  5  0.51655092 -0.02737905
10 5 -0.44004646 -0.28106808
11 6  1.69611039  1.72008079
12 6  0.08445888  1.15226601
13 6 -1.99465060  0.82214319
14 6  0.43855489  0.76221979
15 6 -2.15251353  0.64417757 
```

# android - 在不将 target-densitydpi 设置为 device-dpi 的情况下防止 Android 浏览器在旋转时缩放

> ID：12191240
> 
> 赞同：4
> 
> 时间：2012-08-30T06:41:15.947
> 
> 标签：android, html, css, web-applications, mobile-website

现在我正在使用以下视口元标记：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, target-densitydpi=medium-dpi, user-scalable=0" /> 
```

就默认易读性而言，中等 dpi 缩放似乎获得了最佳结果。在大多数页面上，当我在纵向和横向之间旋转时，缩放保持在该级别，但是，在我有方向媒体查询的页面上，会触发更高的缩放级别，这是不需要的。

我知道这*可以*通过使用.`target-densitydpi=device-dpi``target-densitydpi=medium-dpi`

我认为上述元标记应该将缩放锁定在中等 dpi 是否正确？另外，有没有办法防止如上所述的旋转缩放/缩放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T12:30:31.003

有了下面我从来没有遇到过你的问题

```
<meta name="viewport" content="user-scalable=0, initial-scale=1.0, width=device-width" /> 
```

# entity-framework - 我应该如何将 EF 代码优先 DAL 的集成测试和 DAL 客户端的纯单元测试分开？

> ID：12191241
> 
> 赞同：0
> 
> 时间：2012-08-30T06:41:20.690
> 
> 标签：entity-framework, unit-testing, ef-code-first, integration-testing, entity-framework-5

看到一些针对模拟测试 EF 的强烈建议，尤其是 Code First，我决定对专用于测试的 SqlCe 数据库进行集成测试，然后在 DbContext 提供的工作单元和存储库的下游使用纯单元测试和数据库集。

我只是不清楚在哪里画线以及在哪里测试什么。我知道当我确信 DAL 特定的集成测试涵盖了它的内部时，我可以在我的服务层中模拟 DAL，但是我在 DAL 中测试什么？似乎没有太多意义的测试来查看我是否可以保存和读取对象，因为 EF 是外部的并且已经过测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:52:52.023

您将使用集成测试在 DAL 中测试您的映射和查询。例子：

```
public class Service {
   private readonly IDAL _dal;

   public Service(IDAL dal) {
       // Not null validation here
       _dal = dal;
   }

   public void DoSomething() {
       SomeData data = FindSomeData();
       // Do some logic
       _dal.Commit();
   }

   protected virtual SomeData FindSomeData() {
       return _dal.SomeData.Where(...).FirstOrDefault();
   }
} 
```

这是一个非常简化的示例，显示：

*   `Service`依赖于`DAL`。`DAL`接口通过构造函数注入传递。
*   `Service`包含您想要测试以了解逻辑是否正确执行的公共 DoSomething 方法。但是这种方法也依赖于数据库查询和数据库持久性（`Commit`）。
*   查询是您的逻辑的一部分，但执行此类查询是单独的关注点，因此它由自己的方法处理。在更复杂的情况下，此方法可以在其他类中注入到`Service`该类（存储库）中。这些查询方法的关键标准是：
    *   他们不回来`IQueryable`
    *   他们不接受`Expression<>`作为参数

如何单元测试`DoSomething`方法：

*   在这个简单的示例中，您的测试类将从`Service`类派生并覆盖`FindSomeData`以返回测试数据。在注入的情况下，您将改为为注入的类定义假。
*   您还将模拟`IDAL`，您可以验证是否`Commit`已调用

您应该使用什么集成测试：

*   `FindSomeData`您应该为查询真实数据库创建测试
*   一般来说，您还应该进行集成测试，`Commit`但实现起来更加困难，因为该示例直接从`DoSomething`. 您不想再次测试该方法，并且同时`Commit`方法具有太多通用案例，因为它只是将所有更改从当前上下文刷新到数据库。我通常对插入、更新和删除每个实体类型进行单独的测试。当该`DoSomething`方法进行一些复杂的修改时，您可以将该方法拆分为两种方法，一种由单元测试处理，用于真实逻辑，另一种由集成测试覆盖，用于您的逻辑可以产生的不同持久性场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:59:49.017

我们通常在 DB 方面测试的是复杂对象图是否可以正确插入、更新、删除；基本上测试更复杂的映射。
在我看来，测试是否可以插入具有 3 个原始值属性的对象并没有什么意义，因为那样你就永远看不到它的结尾。
我们倾向于保持乐观（简单的东西会起作用），我们测试更复杂的关联，如果我们在映射中遇到错误（例如应该删除但没有删除的对象），我们会编写一个额外的测试为了那个原因。
从业务角度对所有内容进行绝对测试通常是不明智的。你应该首先关注高风险/高伤害的东西，然后沿着严重程度的阶梯往下走，直到你认为它不再值得了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:01:37.947

1）有一组集成测试来测试你的映射

2）使您的 DAL重量*非常*轻，但具有足够的能力来构建查询，例如：

```
public interface IDb
{
    IQueryable<T>Query<T>();
    ... (save, delete, get-by-id methods)...
} 
```

3) 编写对象，这些对象封装了针对 DAL 构建查询背后的逻辑

```
public class MuppetSearch
{
    public MuppetColor? Color { get; set;}
    public string Name{ get; set; }
    public IQueryable<Muppet> ConstructQuery(IDb db)
    {
        var query = db.Query<Muppet>();
        if(Color.HasValue)
        {
            query = query.Where(m=>m.Value == Color.Value);
        }
        if(!String.IsNullOrEmpty(Name))
        {
            query = query.Where(m=>m.Name.Contains(Name));
        }
        return query;
    }
} 
```

4）测试那些，模拟你需要的所有数据应该很简单

5）在您的服务中使用搜索类来进行查询构建

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:49:24.820

实体框架经过测试，但您的 DAL，尤其是映射，没有。我更喜欢进行集成测试，以向我展示至少我的映射是正确的，而且更好的是，我可以成功地对我的数据库执行所有 CRUD 操作。

# networking - 两个虚拟机之间的通信

> ID：12191250
> 
> 赞同：3
> 
> 时间：2012-08-30T06:42:19.363
> 
> 标签：networking, windows-7, virtual-machine, virtualbox

我的主机操作系统是 Ubuntu 12.04，我在其中安装了 VirtualBox。然后我在 VirtualBox 中配置了两台 Windows 7 客户机。我需要在两台 Windows 机器之间进行通信。我参考以下文章尝试使用桥接网络和内部网络：

[http://www.virtualbox.org/manual/ch06.html](http://www.virtualbox.org/manual/ch06.html)

在我的实验中，我为两种网络类型使用了相同的网络名称。但是，我仍然无法从一台 Windows 机器 ping 到另一台机器。如果有人这样做过，请给我一些指导方针。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:10:10.870

当两个虚拟盒（最终还有主机）都在同一个 LAN 上时，它应该与 Bridge 网络一起使用。

但是，请注意，通常 Windows 仅在至少有一个共享文件夹时才会响应 ping 请求！如果您没有任何共享文件夹，Windows 将不会返回 ping，这可能就是问题所在。

所以我建议你在两台 Windows 机器上共享一个文件夹，用桥接网络设置它们，然后再次尝试 ping。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:27:19.190

也许你可以试试[这里](http://dev.nirmalya.net/articles/setup/enabling-vm-to-be-accessed-from-virtualbox-host-and-other-computers-on-the-network)的建议。工作解决方案涉及桥接适配器 + NAT + 仅主机适配器的组合。

# xml - 如何检查 xslt 2.0 中上下文节点的第一个前同级是 w:tbl？

> ID：12191251
> 
> 赞同：0
> 
> 时间：2012-08-30T06:42:20.047
> 
> 标签：xml, xslt, xpath, xslt-2.0, xpath-2.0

这是 XML 文档。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
        <w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
                    xmlns:v="urn:schemas-microsoft-com:vml">
        <w:body>

          <w:p>para1</w:p>
          <w:tbl>table data 1</w:tbl>
          <w:p>para2</w:p>   <!-- have to check whether this node is w:tbl or not  with respect to the context node below-->
          <w:tbl>table data 2</w:tbl> <!-- Assume this is context node -->

       </w:body>
      </w:document> 
```

所以，我想检查**上下文节点[** **]**的**第一个preceding-sibling[ `<w:p>para2</w:p>`]**是否**>**。**`<w:tbl>table data 2</w:tbl>`****`<w:tbl`**

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T06:50:58.930

我想你在要求

```
<xsl:if test="preceding-sibling::*[1]/self::w:p">....</xsl:if> 
```

# git - gitignore 强制添加一次后继续跟踪文件

> ID：12191254
> 
> 赞同：9
> 
> 时间：2012-08-30T06:42:28.277
> 
> 标签：git, gitignore

我在 .gitignore 中提到了一个文件，但我添加它是`git add -f`因为我只想添加它一次，然后像往常一样忽略它。

但是，现在默认情况下会对其进行跟踪。如何撤消此操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T06:52:32.183

不完全确定您要查找的内容，但是您可以删除要在将来的提交中忽略的文件

```
git rm --cached filename 
```

> *请注意，在将规则添加到此文件以忽略它之前，git 不会忽略已经跟踪的文件。在这种情况下，必须取消跟踪文件，通常使用 git rm --cached 文件名*

信息：[https ://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

或者您可以告诉 git 它忽略文件的更改

```
git update-index --assume-unchanged filename 
```

并撤消它

```
git update-index --no-assume-unchanged filename 
```

要列出所有假定未更改的文件，请运行

```
git ls-files -v|grep '^h' 
```

信息：[如何在不影响其他工作副本的情况下 .gitignore 并删除已提交的文件？](https://stackoverflow.com/questions/3833757/how-do-i-gitignore-and-delete-an-already-commited-file-without-affecting-other)

但是请记住，假设不变（在我看来）违背了 git 的哲学，这个命令只会忽略它在你的机器上所做的更改。其他人仍然可以覆盖它。

在大多数情况下，您将其用于配置文件。您可以避免使用此选项的方法是将其保留在 .gitignore 中，并将设置描述添加到 README 或创建一个小的设置脚本来创建这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:48:11.880

你可以用...删除它

```
git rm --cached file 
```

然后提交。

# cassandra - Cassandra Cql 范围选择

> ID：12191255
> 
> 赞同：3
> 
> 时间：2012-08-30T06:42:30.617
> 
> 标签：cassandra

我们来自 RDBMS 背景，我们正在尝试做的是将现有的数据存储移植到 cassandra，以利用分布式数据库的强大功能。我们的要求是存储一个键的值，可能键是时间（计划使用纪元时间）并检索键范围之间的值

对于测试，我们创建了 ColumnFamily 并使用 cql（通过`cqlsh`）插入数据：

```
CREATE COLUMNFAMILY Log( KEY int PRIMARY KEY,Val1 varchar,Val2 varchar);

INSERT INTO Log (KEY,val1, val2) VALUES (1,'673153106.00','448768737.33'); 
INSERT INTO Log (KEY,val1, val2) VALUES (2,'673153106.50','448768737.67'); 
INSERT INTO Log (KEY,val1, val2) VALUES (3,'673153107.00','448768738.00'); 
INSERT INTO Log (KEY,val1, val2) VALUES (4,'673153107.50','448768738.33'); 
INSERT INTO Log (KEY,val1, val2) VALUES (5,'673153108.00','448768738.67'); 
INSERT INTO Log (KEY,val1, val2) VALUES (6,'673153108.50','448768739.00'); 
INSERT INTO Log (KEY,val1, val2) VALUES (7,'673153109.00','448768739.33'); 
INSERT INTO Log (KEY,val1, val2) VALUES (8,'673153109.50','448768739.67'); 
INSERT INTO Log (KEY,val1, val2) VALUES (9,'673153110.00','448768740.00'); 
INSERT INTO Log (KEY,val1, val2) VALUES (10,'673153110.50','448768740.33'); 
```

但是我们的选择未能返回正确的数据

```
select * from Log where KEY>4 and KEY<9; 
```

**键| val1 | val2 | 10 | 673153110.50 | 448768740.33 | 8 | 673153109.50 | 448768739.67 |**

```
select * from Log where KEY>4 and KEY<9; 
```

> 错误请求：开始键的 md5 排序在结束键的 md5 之后。这是不允许的；您可能根本不应该在 RandomPartitioner 下指定结束键

我们做错了什么吗？有没有使用随机分区在键范围之间选择值的解决方案

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T08:14:17.197

Cassandra 禁止此类查询是有充分理由的。目前，您的所有日志条目都使用主键的 md5 和均匀分布在您的节点上。支持您的查询意味着 Cassandra 必须查询所有节点、检索所有条目、将它们存储在磁盘上并对其进行排序。每当您执行此查询时，都需要这样做。

如果您希望能够执行此查询，您可以使用 Order-Preserving-Partioner，但也不建议这样做，因为如果您按顺序插入数据，您的所有查询都将命中单个节点，从而导致不必要的热点。

通常的解决方案是使用复合主键（例如 index_name + timeuuid）。这将确保您的索引通过使用索引名称的 md5sum 均匀分布在整个集群中。但是访问索引（例如`SELECT * FROM log WHERE index_name = ? AND time >= ? AND time < ?`）仍然是有效的，因为数据已经按排序顺序存储在负责的节点上`md5sum(index_name)`。index_name 通常是一些可以帮助您对数据进行分区的键 - user_id 或 application_id 可能是一个不错的选择。

如果您认为单个 index_name 的索引对于单个节点来说可能太大，那么您可以通过将当前年份和月份添加到 index_name 来调整以前的模式。请阅读以下两篇文章以获取更多信息：

*   [Cassandra 的基本时间序列](http://rubyscale.com/blog/2011/03/06/basic-time-series-with-cassandra/)
*   [Cassandra 的高级时间序列](http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra)

# c++ - 为什么在 MFC 中收到错误消息而不是计时器消息？

> ID：12191262
> 
> 赞同：1
> 
> 时间：2012-08-30T06:43:23.217
> 
> 标签：c++, winapi, mfc

我有一个从 ClistCtrl 继承的 ClistCtrlEx 类。

我加

*   ON_WM_TIMER() 到消息表
*   OnTimer 功能

但在调用 SetTimer 函数程序之前，通过事件 id 45 接收 WM_TIMER 消息，当我调用 SetTimer 时根本不发送 WM_TIMER。

我怎样才能开始调试它或解决问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T07:10:29.450

这篇知识库文章似乎很合适：[PRB: OnTimer() Is Not Calledly for a List Control](http://support.microsoft.com/kb/200054)。

基本上，他们建议仅在事件 id 不是您的情况下调用默认处理程序，因为列表控件设置了自己的计时器，并且其 WM_TIMER 处理程序将`KillTimer()`不管 id。

```
void CMyListCtrl::OnTimer(UINT nIDEvent)
{
   if (nIDEvent == m_myTimerID)
   {
       // handle timer event
   }
   else
   {
      CListCtrl::OnTimer(nIDEvent);
   }
} 
```

# objective-c - 如何让我的 MKMapView 注释显示出来？

> ID：12191264
> 
> 赞同：0
> 
> 时间：2012-08-30T06:43:36.040
> 
> 标签：objective-c, ios, annotations, mkmapview

我是新手，我正在把头撞到墙上，所以你能提供的任何帮助都将不胜感激。

我的应用程序正在下载一系列坐标和标题，我将它们转换为 MKAnnotations。我已经很好地实现了 MKAnnotation 协议，因为它不再抱怨这个，但这里是代码：

注释器.h：

```
#import <Foundation/Foundation.h>
#import "MapKit/Mapkit.h"

@interface Annotator : NSObject <MKAnnotation>

+ (Annotator *) createAnnotator:(CLLocationCoordinate2D *)coordinate
                      withTitle:(NSString *)title
                    andSubtitle:(NSString *)subtitle;

@property (nonatomic, strong) NSString *myTitle;
@property (nonatomic, strong) NSString *mySubtitle;
@property (nonatomic) CLLocationCoordinate2D *coordinate;

@end 
```

到现在还挺无聊的。这是 Annotator.m：

```
#import "Annotator.h"

@implementation Annotator

@synthesize myTitle = _myTitle;
@synthesize mySubtitle = _mySubtitle;
@synthesize coordinate = _coordinate;

+ (Annotator *)createAnnotator:(CLLocationCoordinate2D *)coordinate
                     withTitle:(NSString *)title
                   andSubtitle:(NSString *)subtitle
{
    Annotator *annotation = [[Annotator alloc] init];
    annotation.myTitle = title;
    annotation.mySubtitle = subtitle;
    annotation.coordinate = coordinate;
    return annotation;
}

- (NSString *)title
{
    return self.myTitle;
}

- (NSString *)subtitle
{
    return self.mySubtitle;
}

@end 
```

现在，我已经在一个中央视图控制器中获得了大部分其他代码，所以只要 HTTP 请求返回数据，我就会遍历它，创建我的 MKAnnotation 对象，然后为每个对象执行此操作：

```
[self.territoryMap addAnnotation:locationPin]; 
```

...其中 self.territoryMap 是我拖入故事板的 MKMapView 的出口，而 locationPin 是我使用上面的 Annotator 实现创建的 MKAnnotation 对象。

我看过的一些解决方案有 MKMapViewDelegate 方法，但在我看来它们不是必需的，因为我只是在寻找默认行为。我放了一个我发现的委托，它可以让我改变用户定位销的颜色，但这不是我担心的。

还有什么我需要做的吗？我很困惑！感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:32:35.427

您必须设置 MapViews 委托。然后它应该可以正常工作。

或者看看这个： http: [//maybelost.com/2011/01/a-basic-mapview-and-annotation-tutorial/](http://maybelost.com/2011/01/a-basic-mapview-and-annotation-tutorial/) 它看起来很像你想要做的！

# css - 如何在 Chrome 中调整文本字段的大小？

> ID：12191265
> 
> 赞同：3
> 
> 时间：2012-08-30T06:43:42.387
> 
> 标签：css, html, google-chrome, dom

我需要在谷歌浏览器中调整文本字段的大小。我希望能够水平和垂直拖动文本字段的末尾。

这是我到目前为止所尝试的。我可以在文本字段的角落看到调整大小图标，但无法以任何方式移动它。我用过`style="resize:horizontal;"`可以告诉我哪里出错了...谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Text Feilds</title>
       <script type="text/javascript">
       </script>
 </head>
<body>
<table>
<tr>
<td>
<input type="text" id="txt1" style="resize:horizontal;" />
<input type="text" id="txt2" style="resize:both;" />
<input type="text" id="txt3" style="resize:vertical;"/>
</td>
</tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:07:57.997

根据规范，除了设置属性之外，您还可以通过将属性设置为除 之外的任何值来调整任何元素（包括`<input type=text>`元素）的大小。`overflow``visible``resize`

实际上，即使是完全支持该`resize`属性的浏览器也可能对其适用性有所限制。`<input type=text>`如果您执行上述操作，Chrome 不会使元素可调整大小。这可能是一个错误，因为它显然正在尝试这样做：出现调整大小句柄。另一方面，即使您只是设置`resize`，Safari 也可以调整大小，而无需设置`overflow`.

有一种解决方法似乎可以在 Chrome 上运行，尽管它很笨拙而且看起来不健壮。将`input`元素放在 a`div`中，并使其`div`可调整大小并将`input`宽度设置为接近 100%。不是 100%，因为这会搞砸（调整大小手柄没有空间）。像这样的东西：

```
<div style="resize: horizontal; width: 15em; 
            overflow: auto; border: solid gray 1px">
  <input style="width: 96%; border: none; resize: none">
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:46:12.597

请改用 textarea 元素。

[这里的例子](http://jsfiddle.net/AAWwa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:55:57.723

`resize`是 html 输入类型的非样式属性`text`。因此，这意味着您正在尝试为文本输入标签分配错误的属性。

检查此[链接](http://www.cssportal.com/css-properties/resize.htm)以获取更多详细信息。从链接

> 适用于具有“溢出”而不是可见的元素

`textarea`按照其他答案中的说明使用。

# java - 将字节数组转换为固定长度的字母数字字符串

> ID：12191275
> 
> 赞同：0
> 
> 时间：2012-08-30T06:44:42.550
> 
> 标签：java, hash

在 Java 中，将 13 个字符的字符串映射到 3 个字符的字符串以进行错误检查的最佳库/方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:19:30.017

最简单的方法是使用 hashCode()

```
int threeByteHash = string.hashCode() & 0xFFFFFF; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:50:25.933

对此没有内置方法。如果您真的是指 3 个字节而不是字符，则可以实现[24 位 CRC 。](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)

如果您的意思是`char`，您在输出中接受哪些字符？只有ASCII？任何Unicode字符？

# rdf - RDF/OWL 中的字符串操作

> ID：12191283
> 
> 赞同：4
> 
> 时间：2012-08-30T06:45:19.543
> 
> 标签：rdf, sparql, semantic-web, owl

关于语义网的初学者问题。

我有一个颜色知识库，其中包括相似的颜色、颜色修饰符（深色、浅色、〜ish 等）、颜色关系（更深、更亮）、颜色同义词等。我试图弄清楚 RDF/OWL 是否是操作（主要是查询）这个 KB 的好选择。以下是我需要支持的查询。

1) 找出与给定颜色相似的所有颜色。如果我用“相似”谓词表示颜色相似性，则可以使用简单的 Sparql 查询。同义词和关系也是如此。好的。

2) 当我需要查找标记或短语 x 是否为有效颜色时，问题变得更加棘手。如果 x 是未修改的颜色，则可以通过创建 Color 类并确保所有已知颜色都是该类的实例来解决问题。但是如果 x 是像 "redish" 这样的修改颜色呢？显然，一种解决方案是通过显式添加所有修改后的颜色来将它们包含在 KB 中。

但是，是否可以将所有修改后的颜色自动添加到 RDF 中？换句话说，是否有可能定义一类需要所有修改颜色的修改颜色？这需要一些连接运算符。这有可能吗？

另一种解决方案是有一些逻辑来分解 x 并检查 a）它是否包含已知的修饰符和 b）修改的东西是否是有效的颜色。当然，我也希望在 RDF/OWL 中描述这个逻辑。任何想法？

提前感谢您的任何意见或建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T09:15:22.693

IMO，使用您最喜欢的编程语言编写的自定义代码似乎可以更好地处理您想要做的事情。在 OWL 中很难表达这些东西，当然效率也不高。

但是FWIW，这是您可以做的事情。系好安全带，开始高级 OWL 2 建模之旅。假设您有基本颜色“蓝色”、“绿色”、“红色”。您可以定义包含三个字符串的数据类型（我使用 Turtle 语法）：

```
:baseColor  a  rdfs:Datatype;
    owl:equivalentClass  [
        a  rdfs:Datatype;
        owl:withRestrictions ( [ xsd:pattern "blue|green|red" ] )
    ] . 
```

然后您可以定义修改后的颜色：

```
:modColor  a  rdfs:Datatype;
    owl:equivalentClass  [
        a  rdfs:Datatype;
        owl:withRestrictions (
            [ xsd:pattern "(dark|light)?(blue|green|red)(ish)?" ]
        )
    ] . 
```

您甚至可以拥有更多的数据类型，例如`:lightColor`, `:darkColor`, `mediumColor`.

然后创建一个`:Color`具有数据类型属性的类`:hasColor`：

```
:hasColor  a  owl:DatatypeProperty;
    rdfs:domain  :Color;
    rdfs:range  [
        a  rdfs:Dataype;
        owl:unionOf  ( :baseColor :modColor )
    ]
:Color  a  owl:Class;
    rdfs:subClassOf  [
       a  owl:Restriction;
       owl:onProperty  :hasColor;
       owl:someValuesFrom  xsd:string
    ];
    owl:hasKey  ( :hasColor ) . 
```

在这里，我强加`:Color`至少有一个颜色字符串的实例，并且我强加颜色字符串是颜色的唯一标识符（它是一个键）。因此，每当我使用其颜色字符串给出颜色时，我都可以验证该字符串是否在上面给出的正则表达式模式中。假设我定义了数据类型和`:darkColor`，我也可以表达和关系：`:lightColor``:mediumColor``:darker``:lighter`

```
:DarkColor  a  owl:Class;
    rdfs:subClassOf  :Color, [
        a  owl:Restriction;
        owl:onProperty  :hasColor;
        owl:allValuesFrom  :darkColor
    ] .
:LightColor  a  owl:Class;
    rdfs:subClassOf  :Color, [
        a  owl:Restriction;
        owl:onProperty  :hasColor;
        owl:allValuesFrom  :lightColor
    ] .
:MediumColor  a  owl:Class;
    rdfs:subClassOf  :Color, [
        a  owl:Restriction;
        owl:onProperty  :hasColor;
        owl:allValuesFrom  :mediumColor
    ] . 
```

然后你想说 all `:DarkColor`s`:darker`比 all`:MediumColor`和 all `:LightColor`。这样的公理并不容易实现，因为它需要引入辅助项。*[All Elephants are Bigger than All Mice](http://korrekt.org/papers/RudolphKroetzschHitzer_DL-Concept-Product_TR_2008.pdf)*一文中对此进行了解释，在 DL 术语中，它被称为概念产品：

```
:p1  a  owl:ObjectProperty . # auxiliary property (do not reuse elsewhere)
:p2  a  owl:ObjectProperty . # idem
:x  a  owl:Thing .           # auxiliary individual
:darker  owl:propertyChainAxiom ( :p1 :p2 ) .
:DarkColor  rdfs:subClassOf  [
    a  owl:Restriction;
    owl:onProperty  :p1;
    owl:hasValue  :x
] .
[ owl:unionOf ( :LightColor :MediumColor ) ] rdfs:SubClassOf  [
    a  owl:Restriction;
    owl:onProperty  [ owl:inverseOf :p2 ];
    owl:hasValue  :x
] . 
```

对 做同样的事情`:lighter`。

您不能真正自动引入修改后的颜色。您确实必须提供一个包含所有基色 + 修饰符的图案。但这可以很容易地以编程方式完成。在任何情况下，我给出的 OWL 代码都不应该使用，IMO，因为定制程序可以更好/更有效地解决它。

# r - 有条件的申请

> ID：12191284
> 
> 赞同：0
> 
> 时间：2012-08-30T06:45:20.513
> 
> 标签：r, list, function, dataframe, lapply

所以我在一个列表对象中有一堆数据框。框架的组织方式如

```
ID     Category    Value
2323   Friend      23.40
3434   Foe         -4.00 
```

我按照[这个主题](https://stackoverflow.com/questions/12168944/assign-names-to-variable-using-regular-expression-in-r)将它们列入了一个列表。我还可以在它们上运行简单的函数，如[本主题](https://stackoverflow.com/questions/12172456/run-function-in-data-frames-within-list)所示。

现在我正在尝试使用 lapply运行**条件函数，但遇到了麻烦。**在某些表中，“ID”列具有不同的名称（例如“recnum”），我需要告诉 lapply 遍历每个数据框，检查是否有名为“recnum”的列，并将其名称更改为“ ID'，如

```
colnr <- which(names(x) == "recnum"
if (length(colnr > 0)) {names(x)[colnr] <- "ID"} 
```

但是我在本地范围内遇到了麻烦，谁知道呢。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:57:31.800

使用`rename`函数`plyr`; 它按名称重命名，而不是位置：

```
x <- data.frame(ID = 1:2,z=1:2)
y <- data.frame('recnum' = 1:2,z=3:4)

.list <- list(x,y)
library(plyr)
lapply(.list, rename, replace = c('recnum' = 'ID'))

[[1]]
  ID z
1  1 1
2  2 2

[[2]]
  ID z
1  1 3
2  2 4 
```

您的原始代码工作正常：

```
foo <- function(x){
  colnr <- which(names(x) == "recnum")

  if (length(colnr > 0)) {names(x)[colnr] <- "ID"}
  x
}
.list <- list(x,y)
lapply(.list, foo) 
```

不知道你的问题是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:43:36.600

如果您查看 mnel 答案的第二部分，您可以看到该函数的`foo`计算结果`x`是其最后一个表达式。否则，如果您尝试直接从传递给的匿名函数中更改列表中 data.frames 的名称`lapply`，它可能无法正常工作。

作为替代方案，您可以使用`gsub`并避免加载额外的包（虽然`plyr`是一个不错的包）：

```
xx <- list(data.frame("recnum" = 1:3, "recnum2" = 1:3),
  data.frame("ID" = 4:6, "hat" = 4:6))

lapply(xx, function(x){ 
  names(x) <- gsub("^recnum$", "ID", names(x))
  return(x)
})
# [[1]]
#   ID recnum2
# 1  1       1
# 2  2       2
# 3  3       3

# [[2]]
#   ID hat
# 1  4   4
# 2  5   5
# 3  6   6 
```

# java - 捕获异常后请求输入

> ID：12191285
> 
> 赞同：6
> 
> 时间：2012-08-30T06:45:36.447
> 
> 标签：java, java.util.scanner, numberformatexception, inputmismatchexception

我希望用户输入一个由以下代码扫描的数字：

```
scanner.nextInt(); 
```

如果用户输入一个字符串，程序会抛出`InputMismatchException`，这是显而易见的。我想以这样一种方式捕获异常，即程序提示用户输入输入，直到用户输入一个整数值。

```
Scanner scanner = new Scanner(System.in);
while(true) {
    try {
        System.out.println("Please enter a number: ");
        int input = scanner.nextInt();
        System.out.println(input);
        //statements
        break;
    }
    catch(InputMismatchException | NumberFormatException ex ) {
        continue;
    }
} 
```

如果输入字符串，此代码将创建一个无限循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T04:54:45.710

我的问题的答案如下：

```
Scanner scanner = new Scanner(System.in);
while(true) {
    try {
        System.out.println("Please enter a number: ");
        int input = scanner.nextInt();
        System.out.println(input);
        //statements
        break;
    }
    catch(InputMismatchException | NumberFormatException ex ) {
        scanner.next();//new piece of code which parses the wrong input and clears the //scanner for new input
        continue;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T06:49:19.930

放入`Scanner scanner = new Scanner(System.in);`您的`while`循环中。

```
Scanner scanner;
while(true) {    
    try {
        System.out.println("Please enter a number: ");
        scanner = new Scanner(System.in);
        int input = scanner.nextInt();
        System.out.println(input);
        //statements
        break;
    }
    catch(InputMismatchException | NumberFormatException ex ) {
        System.out.println("I said a number...");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:58:59.107

这个怎么样？

```
while(true) {    
    try {
        System.out.println("Please enter a number: ");
        Scanner scanner = new Scanner(System.in);
        int input = scanner.nextInt();
        System.out.println("\n\nEntered number is : " + input);
        break;
    } catch(InputMismatchException | NumberFormatException ex ) {
        System.out.println("\n\nInput was not a number. Please enter number again : ");
    } catch(Exception e ) {
        System.out.println("\n\nException caught :: " + e);
    }
} 
```

我还删除`continue`了不需要的语法。

# database - 在struts2中获取数据库

> ID：12191288
> 
> 赞同：-1
> 
> 时间：2012-08-30T06:45:42.387
> 
> 标签：database, jsp, struts2, ognl

我已经使用 mysql 数据库完成了 struts2 登录操作，如下所示。对于初始登录操作，我使用 LoginActionBean 来检查用户名和密码。登录到主页后，我需要再次从数据库中获取团队详细信息。为此，我使用了 jsp scriplet 标签。谁能告诉我另一种通过javabean（而不是通过LoginActionBean）而不使用jsp scriplets 从数据库访问团队详细信息的方法。

**登录.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib prefix="s" uri="/struts-tags" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<head>
</head>
<body>
    <s:form action="log">
    <s:textfield label="USERNAME" name="uname"/>
    <s:password label="PASSWORD" name="pass"/>
    <s:submit label="SUBMIT"/>
    </s:form>
</body>
</html> 
```

**主.jsp**

```
<%@page import="java.sql.ResultSet"%>
<%@page import="DbCon.DataConnection"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Welcome to Employee Home!</h1>
        SELECT A TEAM:<select name="team">
            <%
             DataConnection db=new DataConnection();
             ResultSet rs=db.exeQuery("select * from team");
             while(rs.next())
                 {
            %>
            <option value="<%=rs.getString("teamname")%>" ><%=rs.getString("teamname")%></option>
            <%
            }
            %>
        </select>
    </body>
</html> 
```

**struts.xml**

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="true" />
    <package name="default" extends="struts-default">
        <action name="log" class="login.Action.LoginActionBean" >
         <result name="success">/Main.jsp</result>
         <result name="error">/login.jsp</result>
        </action>
    </package>
</struts> 
```

**数据连接.java**

```
package DbCon;
import java.io.FileInputStream;
import java.sql.*;
public class DataConnection
{
    Connection con;
    Statement stmt;
    PreparedStatement pstmt;
    ResultSet rs=null;
    public DataConnection()
    {
        try
        {
            Class.forName("com.mysql.jdbc.Driver");
            con=DriverManager.getConnection("jdbc:mysql://localhost/test","root","");
            stmt=con.createStatement();
            con.setAutoCommit(false);
        }catch(Exception e){
            System.out.println("Err in constructor"+e);
        }
    }
    public ResultSet exeQuery(String query)
    {
        try
        {
           // con.commit();
            rs=stmt.executeQuery(query);
        }catch(Exception e){System.out.println(e);}
        return rs;
    }
    public int exeUpdate(String query)
    {
        int i = 0;
        try
        {
            //con.commit();
            i=stmt.executeUpdate(query);
            con.commit();
        }catch(Exception e){System.out.println(e);}
        return i;
    }
} 
```

**登录ActionBean.java**

```
package login.Action;

import DbCon.DataConnection;
import com.opensymphony.xwork2.ActionSupport;
import java.sql.ResultSet;
import java.sql.SQLException;

public class LoginActionBean extends ActionSupport {
public String uname,pass;

    public String getPass() {
        return pass;
    }

    public void setPass(String pass) {
        this.pass = pass;
    }

    public String getUname() {
        return uname;
    }

    public void setUname(String uname) {
        this.uname = uname;
    }

    public String execute() throws SQLException
    {
        DataConnection db=new DataConnection();
        ResultSet rs=db.exeQuery("select * from admin where name='"+uname+"' and  pass='"+pass+"'");
        if(rs.next())
         return SUCCESS;
        else
        return ERROR;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:59:25.413

好吧，你已经完成了大部分工作，所以你可以做一些简单的事情，比如在你的动作课中

1.  使用要在 JSP 中显示的属性创建一个 bean，比如 TeamDetails
2.  在您的 Action 类中定义此 bean 并使用 DB 调用填充它
3.  在您的 JSP 中使用 OGN 来访问数据并使用 struts2 标记显示它。

`Action`班级：

```
public class TeamDetailAction extends ActionSupport{
  List<TeamDetailData> teamDetails;
   //getter and setter

 public String execute() throws Exception{
             teamDetails=fill it by retrieving from BD
    }
} 
```

TeamDetailData Java

```
public class TeamDetailData{

 private teamMemberName;
 // other properties
//getter and setters
} 
```

在您的 JSP 上使用 OGNL[迭代器](http://struts.apache.org/2.3.1/docs/iterator.html)标记来显示数据

JSP 页面

```
<s:iterator value="teamDetails">
  <p>Name : <s:property value="teamMemberName"/></p>
</s:iterator> 
```

# zend-framework - Zend Framework 1.11 - CSS 不呈现 header.phtml ， footer.phtml

> ID：12191291
> 
> 赞同：0
> 
> 时间：2012-08-30T06:46:08.100
> 
> 标签：zend-framework

我的问题与 zend 布局中的部分文件有关。这是我的目录结构

![在此处输入图像描述](../Images/c509915429769ca250cae6684e504af3.png)

admin.html 的内容如下

![在此处输入图像描述](../Images/19c8dc60a07d9d6ee1a5695826590597.png)

application.ini 如下： ![在此处输入图像描述](../Images/0ec152b89acb1dfea07dcdd53ddc0c4b.png)

现在的问题是 admin_header.phtml 和 admin_footer.phtml 的 css 没有呈现。布局能够包含文件，但 css 不适用于包含的文件。CSS 适用于除页眉和页脚之外的其余布局。如果有人帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:23:48.273

是的，我的 CSS 中存在路径不匹配。它现在工作。谢谢大家。

# iphone - 全局定义服务器 IP

> ID：12191293
> 
> 赞同：0
> 
> 时间：2012-08-30T06:46:15.083
> 
> 标签：iphone, objective-c, ios, xcode, plist

我想定义一个全局保存 IP 地址的字符串变量，这样如果将来 IPAddress 发生更改，则无需转到每个类文件并更新它，因此，实现是否使用**plist**或的最佳方法是什么我的应用程序的**全局宏类**或**.pch 文件**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:53:44.673

创建一个 .h 文件。说，GlobalMacros.h

在 GlobalMacros.h

```
#define IP_ADDR @“SERVER_IP” 
```

在您的 .pch 文件中

```
import “GlobalMacros.h” 
```

现在您可以在任何地方轻松访问 IP_ADDR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:48:57.537

只需创建 NSObject 类，然后将您的 URL 放入其中，然后访问它并在您想要的地方使用它。

在 h 文件中

```
#import <Foundation/Foundation.h>

@interface Config : NSObject {

}

//configuration section... 
extern  NSString        *SiteURL;
extern  NSString        *SiteAPIURL;

@end 
```

米

```
#import "Config.h"

@implementation Config
//live
NSString        *SiteURL                = @"http://yourIP/";
NSString        *SiteAPIURL             = @"http://yourIP/";

@end 
```

`Prefix.pch`只需导入它`#import "Config.h"`

并在要使用的类中使用它

```
NSString *apiURLString = [NSString stringWithFormat:@"%@login.php",SiteAPIURL]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:49:01.950

.pch 文件，如果你永远不会改变它。

# c++ - 删除 C 结构结束填充的最佳做法是什么？

> ID：12191297
> 
> 赞同：4
> 
> 时间：2012-08-30T06:46:23.453
> 
> 标签：c++, c, struct, c++11

在 C 或 C++ 中制作非压缩非填充结构的最佳方法是什么？目标是：

```
typedef struct {
    char first[3]; //padded to 8 because next type has size 8
    double second;
    char third;
} SomeStruct;

but do something to make sizeof(SomeStruct) be equal 17; 
```

该结构由外部库规范定义。我有两个决定：

1)

```
#pragma pack (push, 1)

typedef struct {
    char first[3];
        char unused[5]; // Manual padding of second field.
    double second;
    char third;
} SomeStruct;

#pragma pack (pop) 
```

2）使用声明的第一个变体，但在序列化数据时写入`(int)(&((SomeStruct*)0)->third) + sizeof(((SomeStruct*)0)->third)`而不是写入。`sizeof(SomeStruct)`我不需要序列化此类结构的数组，所以可以这样做。

但他们都是肮脏的黑客。是否有删除 C 中的结构填充的标准方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:40:14.553

C11 现在有一个`_Alignas`关键字，可以建议您的更窄对齐`double`

```
typedef struct {
    char first[3]; //padded to 8 because next type has size 8
    _Alignas(uint16_t) double second;
    char third;
} SomeStruct; 
```

只要有可能，这将进行更窄的对齐，也就是说，如果`double`您平台上的标准运算符能够处理这种对齐。（如果不是，无论如何你都被搞砸了。）

Clang 已经实现了该功能，并且 gcc 等其他编译器已经具有接近它的扩展，因此您可以轻松地为自己编写一个使用这种语法并且“面向未来”的包装器。

*编辑：*我在发布后才看到您的问题也是关于 C++ 的。我认为 C++1 具有与`alignas`. （C11`alignas -> _Alignas`通过标准头文件中的宏。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:54:53.267

尝试以正确的顺序放置它

```
#include <stdio.h>

struct s
{
    char first[3];
    char second;
    double third;
};

int main()
{
    printf("%u\n", sizeof(struct s));
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:00:34.157

如果外部库规范规定大小为 17 字节，那么您对 ​​SomeStruct 的第零个声明是不准确的。正如 James McNellis 在评论中指出的那样，您的版本大小为 24。但是，我们可以弄清楚您的意思。

您对 SomeStruct 的第一个声明完成了您所需要的，因为任何地方都没有填充，并且您放入了 5 个未使用的字节以匹配外部库规范。您的结构有 17 个字节。所以这看起来像你的答案。

您的第二个提案不清楚，因为您没有说明 SomeStruct 的第二个声明是什么。

是否使用 SomeStruct 数组并不重要。正如 James McNellis 的评论所指出的那样，标准要求编译器允许数组的可能性，无论您是否使用一些。

（当然，这假设 double 是 8 个字节，并且您的 pragma 以您想要的方式工作，等等。）

# wpf - 如何从 WPF 应用程序打开 MFC 对话框？

> ID：12191300
> 
> 赞同：2
> 
> 时间：2012-08-30T06:46:38.800
> 
> 标签：wpf, vb.net, mfc, pinvoke, showdialog

我在 .dll 项目中创建了对话框。现在我想通过单击按钮从 WPF 应用程序打开该对话框。以下是对话框的代码：

测试对话.h：

```
class CTestDialog : public CDialogEx
{
    DECLARE_DYNAMIC(CTestDialog)

public:
    CTestDialog(CWnd* pParent = NULL);   // standard constructor
    virtual ~CTestDialog();

// Dialog Data
    enum { IDD = 1000 };

protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

    DECLARE_MESSAGE_MAP()
}; 
```

测试对话.cpp：

```
#include "stdafx.h"
#include "MFCDll.h"
#include "TestDialog.h"
#include "afxdialogex.h"

IMPLEMENT_DYNAMIC(CTestDialog, CDialogEx)

CTestDialog::CTestDialog(CWnd* pParent /*=NULL*/)
    : CDialogEx(CTestDialog::IDD, pParent)
{
}

CTestDialog::~CTestDialog()
{
}

void CTestDialog::DoDataExchange(CDataExchange* pDX)
{
    CDialogEx::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CTestDialog, CDialogEx)
END_MESSAGE_MAP() 
```

我创建了导出函数，它创建对话框对象并通过调用 DoModel() 函数打开该对话框。

```
extern "C" void PASCAL EXPORT ShowDialogFromDLL()
{
    CTestDialog dlg;
    theApp.m_pMainWnd = &dlg;
    dlg.DoModal();
} 
```

之后我从 WPF 表单调用这个导出函数，下面是 WPF 表单的代码。

MainWindow.xaml.vb：

```
namespace MainApp
{
    public partial class MainWindow : Window
    {
        [DllImport("MFCDll.dll", CharSet = CharSet.Auto, SetLastError = false)]
        public static extern void ShowDialogFromDLL();
        public MainWindow()
        {
            InitializeComponent();
        }

        private void btnShow_Click(object sender, RoutedEventArgs e)
        {
            ShowDialogFromDLL();
        }
    }
} 
```

但是现在当我调用 ShowDialogFromDLL(); 单击按钮后。它会给我抛出异常

```
Microsoft Visual C++ Debug Library
Debug Assertion Failed!

Program: E:\EDR1\Test\MainApp\bin\Debug\MainApp.vshost.exe
File: f:\dd\vctools\vc7libs\ship\atlmfc\include\afxwin1.inl
Line: 24

For information on how your program can cause an assertion failure, see the Visual C++ documentation on asserts.

(Press Retry to debug the application) 
```

当我调用`dlg.DoModal();`方法时出现上述错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:31:48.983

**这应该工作**-

```
extern "C" __declspec(dllexport) void __stdcall ShowDialogFromDLL()
{
    AFX_MANAGE_STATE(AfxGetStaticModuleState())
    CTestDialog dlg;
    dlg.DoModal();
} 
```

在构建动态链接到 MFC 的常规 DLL 时，需要使用宏[AFX_MANAGE_STATE](http://msdn.microsoft.com/en-us/library/30c674tx%28VS.80%29.aspx)来正确切换 MFC 模块状态。

# javascript - 在json中声明整数或数值

> ID：12191301
> 
> 赞同：0
> 
> 时间：2012-08-30T06:46:41.860
> 
> 标签：javascript, json

现在我正在使用json。我面临的问题是我声明了一些要传递给图表的值。这些值读得很好，但是当传递给图表时。它会产生一个运行时错误，显示其 NaN（非数字）。我在这里包含我的 Json 文件

```
{
data: [
{
"value": 100
},
{
"value": 140
},
{
"value": 70
},
{
"value": 200
},
{
"value": 50
},
{
"value": 120
}]
} 
```

请找出问题所在或说出如何在 json 中包含数字数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:48:43.183

那不是有效的 JSON。您需要在所有标识符周围加上引号：

```
{
"data": [
{
"value": 100
},
{
"value": 140
},
{
"value": 70
},
{
"value": 200
},
{
"value": 50
},
{
"value": 120
}]
} 
```

# java - java文件路径中的空格

> ID：12191302
> 
> 赞同：1
> 
> 时间：2012-08-30T06:46:43.253
> 
> 标签：java, space, filepath

我有一个包含几个 jar 文件的文件夹。我指的是来自其他位置的另一个 jar 文件中的那些 jar 文件。

我的问题是，当我像这样给出 jar 文件夹的路径时`C:\Trial Library\jar Folder\`。如果文件夹名称（试用库）中有空格，则无法找到此文件夹。

如果我给没有空间即`C:\Trial_Library\jar_Folder\`它工作正常。

请帮我尽快解决这个问题。

这是我的批处理文件

```
set CURRENT_DIRECTORY=%~dp0

set ANT_HOME=%"CURRENT_DIRECTORY"%ant\apache-ant-1.8.3
ECHO current directory is %CURRENT_DIRECTORY%
ECHO %ANT_HOME%
set Path=%ANT_HOME%\bin
set ADAPTER_LIBRAY_PATH=%1
set USER_JAR_PATH=%2
set CLASS_NAME=%3
set RESULTS_PATH=%4
set JUNIT_PATH=%"CURRENT_DIRECTORY"%ANT\test\junit-4.1.jar
set LIBRAIES_TO_INCLUDE="%JUNIT_PATH%";"%ADAPTER_LIBRAY_PATH%";"%USER_JAR_PATH%"
ECHO %LIBRAIES_TO_INCLUDE%
ECHO %ADAPTER_LIBRAY_PATH%
ECHO %JUNIT_PATH%
ECHO %USER_JAR_PATH%
ECHO %CLASS_NAME%
ECHO %RESULTS_PATH% 

ant -lib "%LIBRAIES_TO_INCLUDE%" -Dlibraries="%ADAPTER_LIBRAY_PATH%" -Djunitlibrary="%JUNIT_PATH%" -Djartobeexec="%USER_JAR_PATH%" -Duserclass=%CLASS_NAME% -Dresultspath=%RESULTS_PATH% -buildfile build.xml test-html 
```

这是我将值传递给我的批处理文件的地方

```
String[] commands=new String[5];
commands[0]="driver.bat";
commands[1]=finalLibraryPath;
commands[2]=executingJarLocation;
commands[3]=tempPackageName;
commands[4]=resultsFolderPath;
process = Runtime.getRuntime().exec(commands); 
InputStream is = process.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
StringBuffer errorStr = new StringBuffer(); 
String line;
while ((line = br.readLine()) != null) {
errorStr.append(line);
errorStr.append(System.getProperty("line.separator"));  

} 
```

提前感谢

问候，帕布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:44:36.210

好的，据我了解，我“猜测”您正在做类似的事情

```
Runtime.exec("myBatchFile.bat " + path); 
```

这将以泪水告终。这相当于说：

```
C:> myBatchFile.bat C:\Path to my jar files 
```

这行不通。基本上，您的批处理文件现在认为它有 5 个参数而不是一个。

要解决问题，您需要分别传递每个命令/参数...

```
Runtime.exec(new String[] {"mybatchFile.bat", path}); 
```

或者更好的是，使用`ProcessBuilder`

```
ProcessBuilder pb = new ProcessBuilder("myBatchFile.bar", path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:56:02.650

将路径用引号括起来。这意味着计算机从字面上理解它。记事本可能会遇到类似的问题，`.txt`即使您提供了扩展名，它也会在末尾添加扩展名。用引号括起来可以解决这个问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-11-21T13:51:54.850

通常将路径括在双引号（“路径”）中适用于 Unix、Linux 等平台。问题仅出现在 WIN 平台上。这背后的原因是，只要 WIN 在要执行的文件路径中看到空格，它就会恢复为 8.3 命名。在此命名中，它以 Sub 目录的前 6 个字符作为参数并搜索模式。要解决此问题，您必须在前 6 个字符后面附加一个波浪号 (~) 和一个表示该模式实例的数字。

例如：

**原始路径：C:/Program Files/Jdk1.6.0_07/bin

使用路径：C:/Progra~1/Jdk1.6.0_07/bin**

我在很多 Java 应用程序中都使用了类似的方法，并且它一直都能正常工作。

# java - Mongodb避免重复条目

> ID：12191311
> 
> 赞同：28
> 
> 时间：2012-08-30T06:47:32.183
> 
> 标签：java, mongodb, mongodb-java

我是 mongodb 的新手。我可以知道如何避免重复条目。在关系表中，我们使用主键来避免它。我可以知道如何使用 java 在 Mongodb 中指定它吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-30T07:11:32.227

使用带有`{unique:true}`选项的索引。

```
// everyone's username must be unique:
db.users.createIndex({email:1},{unique:true}); 
```

您也可以跨多个字段执行此操作。*有关更多详细信息和示例，请参阅文档中的[此部分](https://docs.mongodb.com/manual/core/index-unique/)*。

> 唯一索引确保索引字段不存储重复值；即强制索引字段的唯一性。默认情况下，MongoDB 在创建集合期间会在 _id 字段上创建唯一索引。

如果您希望`null`从唯一键中忽略值，那么您还必须通过添加选项来使索引稀疏（*参见[此处](https://docs.mongodb.com/manual/core/index-sparse/#sparse-and-unique-properties)*） ：`sparse`

```
// everyone's username must be unique,
//but there can be multiple users with no email field or a null email:
db.users.createIndex({email:1},{unique:true, sparse:true}); 
```

如果要使用 MongoDB Java 驱动程序创建索引。尝试：

```
Document keys = new Document("email", 1);
collection.createIndex(keys, new IndexOptions().unique(true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T19:32:18.377

这可以使用“_id”字段来完成，尽管不鼓励这种使用。假设您希望名称是唯一的，那么您可以将名称放在“_id”列中，并且您可能知道“_id”列对于每个条目都是唯一的。

```
BasicDBObject bdbo = new BasicDBObject("_id","amit"); 
```

现在，集合中没有其他条目可以将名称命名为“amit”。这可能是您要求的方式之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T21:11:27.600

在 Mongo 的 v3.0 Java 驱动程序中，创建索引的代码如下所示：

```
public void createUniqueIndex() {
    Document index = new Document("fieldName", 1);
    MongoCollection<Document> collection = client.getDatabase("dbName").getCollection("CollectionName");
    collection.createIndex(index, new IndexOptions().unique(true));
}

// And test to verify it works as expected
@Test
public void testIndex() {
    MongoCollection<Document> collection = client.getDatabase("dbName").getCollection("CollectionName");

    Document newDoc = new Document("fieldName", "duplicateValue");
    collection.insertOne(newDoc);

    // this will throw a MongoWriteException
    try {
        collection.insertOne(newDoc);
        fail("Should have thrown a mongo write exception due to duplicate key");
    } catch (MongoWriteException e) {
        assertTrue(e.getMessage().contains("duplicate key"));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T07:07:35.293

我不是 Java 程序员，但是您可以将其转换过来。

默认情况下，MongoDB 确实有一个主键，称为`_id`您可以使用`upsert()`或`save()`在此键上，以防止文档被写入两次，如下所示：

```
var doc = {'name': 'sam'};
db.users.insert(doc); // doc will get an _id assigned to it
db.users.insert(doc); // Will fail since it already exists 
```

这将立即停止重复。至于某些条件下的多线程安全插入：好吧，在这种情况下，我们需要更多地了解您的情况。

但是，我应该补充`_id`一点，默认情况下索引是 unqiue 的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T16:30:24.750

Theon 解决方案对我不起作用，但这个解决方案确实有效：

```
BasicDBObject query = new BasicDBObject(<fieldname>, 1);
collection.ensureIndex(query, <index_name>, true); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-28T14:20:11.447

使用 pymongo 它看起来像：

```
mycol.create_index("id", unique=True) 
```

其中 myCol 是数据库中的集合

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import pymongo

myclient = pymongo.MongoClient("mongodb://localhost:27017/")
mydb = myclient["mydatabase"]
mycol = mydb["customers"]
mycol.create_index("id", unique=True)
mydict = {"name": "xoce", "address": "Highway to hell 666", "id": 1}
x = mycol.insert_one(mydict) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-18T06:21:21.287

### 防止 mongoDB 保存重复的电子邮件

```
 UserSchema.path('email').validate(async(email)=>{
   const emailcount = await mongoose.models.User.countDocuments({email})
   return !emailcount
 }, 'Email already exits') 
```

可以帮助你的问题......对我有用......在用户模型中使用。 [参考解释](https://youtu.be/Z8Aebt9tvT8) 谢谢...

# jquery - Jquerychosen：来自mysql数据库的填充值

> ID：12191312
> 
> 赞同：0
> 
> 时间：2012-08-30T06:47:32.923
> 
> 标签：jquery, ajax, jquery-chosen

我正在使用 JQuery Chosen 来选择许多标签

这是我的代码

```
 <tr>                        
                    <td>Category</td>
                        <td> 
                        <select onchange="showUser(this.value)" name="mySelect"   style="width:350px;" > 
                            <?php $result= mysql_query('SELECT DISTINCT category  FROM demo_tags'); ?> 
                            <?php while($row= mysql_fetch_assoc($result)) { ?> 
                                <option value="<?php echo htmlspecialchars($row['category']);?>"> 
                                    <?php echo htmlspecialchars($row['category']); ?> 
                                </option> 
                            <?php } ?> 
                        </select> 
                    </td>
            </tr>   

                <!-- tags workspace ----------------------- -->

                <tr>                        
                    <td>Tags</td>
                        <td id = "getit">   
                             <select id ="hi" data-placeholder="Choose a tag" class="chzn-select" multiple style="width:350px;" tabindex="4">
                                  <option value=""></option> 
                                  <option value="United States">United States</option> 
                        </select>
                    </td>
            </tr>   

                <!-- -      Tags Workspace ends  --> 
```

在上面的代码中，我有两个选择框，一个用于类别选择，第二个用于标签选择

标签值取决于类别平均值如果我选择医疗类别标签的选项将来自数据库

所以我正在使用 showUser() 进行 Ajax 调用，例如

```
 <script>
    function showUser(val){
        alert(val);
        var dataString = 'cat='+ val;
            $.ajax
            ({
                type: "GET",
                url: "http://localhost/UI/user/taggin.php",
                data: dataString,
                cache: false,

                success: function(html)
                    {
                    alert(html);
                    $("#getit").html(html);

                    }
            });
            alert("somthing happning");
        }
    </script> 
```

这个 ajax 调用正在返回类似的数据

```
<select  data-placeholder="Choose a tag" class="chzn-select" multiple style="width:350px;" tabindex="4"><option value="dentist">dentist</option></select> 
```

现在我将此 html 返回附加到 tr id getit

但 css 属性不适用于数据库填充值

请告诉我应该怎么做才能让我的数据库填充标签看起来像选择的 Jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:58:33.097

修改 DOM 后，您必须`$('.chzn-select').chosen()`再次调用以使插件对新元素进行操作。

# android - 在布局上绘制位图的问题

> ID：12191317
> 
> 赞同：0
> 
> 时间：2012-08-30T06:47:47.830
> 
> 标签：android, layout, bitmap, nullpointerexception, mutable

我在 onCreate 中以编程方式创建布局：

```
new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {
            myView = new MyView(SketchActivity.this, layout.getWidth(), layout.getHeight());

            layout2.addView(myView);
            layout2.bringToFront();

        }
    }, 50); 
```

我创建（可变？）位图的视图：

```
public MyView(Context c, int width, int height) {
        super(c);

        WindowManager wm = (WindowManager) c.getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();
        int w = display.getWidth(); // deprecated
        int h = display.getHeight();
        setFocusable(true);
        setBackgroundResource(R.drawable.download);

        // setting paint
        mPaint = new Paint();
        mPaint.setAlpha(0);
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
        mPaint.setAntiAlias(true);

        // getting image from resources
        Resources r = this.getContext().getResources();

        Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.smoke);

        // converting image bitmap into mutable bitmap

        bitmap = bm.createBitmap(w, h, Config.ARGB_8888);
        mCanvas = new Canvas();
        mCanvas.setBitmap(bitmap); // drawXY will result on that Bitmap
        mCanvas.drawBitmap(bm, 0, 0, null);

    } 
```

我的 onDraw 函数：

```
 @Override
    protected void onDraw(Canvas canvas) {
        mCanvas.drawCircle(x, y, r, mPaint);

        canvas.drawBitmap(bitmap, 0, 0, null);

        super.onDraw(canvas);

    } 
```

OnTouch事件：

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        x = (int) event.getX();
        y = (int) event.getY();

        r = 20;
        // Atlast invalidate canvas
        invalidate();

        return true;
    } 
```

没有 LogCat 错误问题出在 myView 中。当我创建位图 bitmap = bm.createBitmap(w, h, Config.ARGB_8888); 如果我放一个小数字而不是 w,h(屏幕的宽度和高度) 示例：bitmap = bm.createBitmap(20, 20, Config.ARGB_8888); 它创建了一个小图片。但是如果我把 w 和 h 放在一起，那么不是在所有的布局上绘制，而是只在一小部分上绘制。（即使我尝试： bitmap = bm.createBitmap(800, 1080, Config.ARGB_8888); 它仍然在一小部分上绘制，而不是在整个屏幕上。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:59:17.250

这解决了它：

```
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // CREATE A MATRIX FOR THE MANIPULATION
    Matrix matrix = new Matrix();
    // RESIZE THE BIT MAP
    matrix.postScale(scaleWidth, scaleHeight);
    // RECREATE THE NEW BITMAP
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
    return resizedBitmap;
}

public MyView(Context c, int width, int height) {
        super(c);

        WindowManager wm = (WindowManager) c.getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();
        int w = display.getWidth(); // deprecated
        int h = display.getHeight();
        setFocusable(true);
        setBackgroundResource(R.drawable.download);

        // setting paint
        mPaint = new Paint();
        mPaint.setAlpha(0);
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
        mPaint.setAntiAlias(true);
        mPaint.setMaskFilter(new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL));

        // getting image from resources
        Resources r = this.getContext().getResources();

        Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.smoke);
        Bitmap bm2 = getResizedBitmap(bm, h, w);

        // converting image bitmap into mutable bitmap

        bitmap = bm2.createBitmap(w, h, Config.ARGB_8888);
        mCanvas = new Canvas();
        mCanvas.setBitmap(bitmap); // drawXY will result on that Bitmap
        mCanvas.drawBitmap(bm2, 0, 0, null);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:18:26.027

您需要添加这样的`Options`数据：

```
Options options = new Options();
options.isMutable = true; // works from api 11

mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.smoke, options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:52:08.907

看起来你正在回收`Bitmap`代码中的某个地方。这儿存在一个问题。

是的，你应该`recycle`这样做，但它总是有点冒险。

**编辑**

看起来你正在绘制`Bitmap`. 如果这不是您想要做的，那么您不应该`onDraw`手动调用。而是`invalidate()`在您想重绘视图时调用。

# python - 在python中为打印设置命令别名？

> ID：12191318
> 
> 赞同：6
> 
> 时间：2012-08-30T06:47:53.377
> 
> 标签：python, aliases

在 bash 中，您可以给命令一个别名，如下所示：

```
alias e=echoset 
alias e="echo blah" 
```

我想知道如何在 Python 中做同样的事情。我知道你可以给类别名，但是当我尝试给一个命令（例如 print 语句）一个别名时，我得到一个错误：

```
>>> p = print
  File "<stdin>", line 1
    p = print
            ^
SyntaxError: invalid syntax 
```

我可以做这个：

```
p = "print"
exec(p) 
```

但这与别名并不完全相同，我无法为命令提供任何输入。

**更新：** @atzz 你猜对了，它不是专门用来打印的。我想要开始工作的是：

这应该设置命令，但是，当我输入此命令时，它只会发出哔哔声：
`>>> beep = Popen(['play', '-q', '/home/Username/Mich/Sound Effects/Beeps/beep-17-short.ogg'])`

然后，当我在提示中输入 beep 时，它会显示：
`>>> beep <subprocess.Popen object at 0x9967b8c>`

但除此之外我还有这个问题，至少现在我知道你不能给语句别名。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T06:54:37.577

您的问题是针对特定的`print`吗？

在 Python 3.0 之前，`print`是语言语法中的关键字。由于它不是一流的语言对象，因此您不能将其分配给变量。

在 Python 3.0 中，没有关键字`print`; 有一个`print`函数（[文档](http://docs.python.org/library/functions.html#print)）。

通过适当的 future 语句，您可以在 Python 2.6+ 中使用 print 函数：

```
from __future__ import print_function
a = print
a("Hello!") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T06:51:19.740

这只是您遇到此问题的打印语句，因为它是一个语句（如 while/if/etc.）而不是一个函数。

如果你想“重命名”（例如）len，它会工作得很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T21:20:45.560

要回答您的新问题，如果您想这样做并稍后执行 beep：

```
beep = Popen(['play', '-q', '/home/Username/Mich/Sound Effects/Beeps/beep-17-short.ogg']) 
```

将其更改为：

```
beep = lambda: Popen(['play', '-q', '/home/Username/Mich/Sound Effects/Beeps/beep-17-short.ogg']) 
```

或者只是一个功能:-)

```
def beep(): Popen(['play', '-q', '/home/Username/Mich/Sound Effects/Beeps/beep-17-short.ogg']) 
```

否则 'beep' 将只保存 Popen 的返回值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T06:51:36.300

这种行为正是 Python 3 发生的原因。在 PY3`print`中是一个函数，而不是关键字，是的，你可以在那里做。

# java - 包含集合中的方法替换

> ID：12191325
> 
> 赞同：0
> 
> 时间：2012-08-30T06:48:27.187
> 
> 标签：java, collections, contains

我还可以使用什么来代替包含集合的方法来找出集合中的类似条目。因为包含是一种非常繁重（耗时）的方法。

现在我正在使用这样的包含

```
if (EntityTree.setMobileEnablerTxnList.contains(iMobileEnablerTxnList)) {

 } 
```

这里 setMobileEnablerTxnList 是一个集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:04:38.500

该`contains`方法不一定*非常繁重（耗时）*。例如，如果您使用 a`HashSet`它会相当快。对于 a `HashSet`，它将计算`hashCode`对象的 ，并且只遍历相应“桶”中的对象。它肯定不会遍历所有元素（或者您对该`hashCode`方法的实现会很差）。

这在方法的源码中可以看出`HashSet#contains`，最终调用如下代码`HashMap`：

```
final Entry<K,V> getEntry(Object key) {
    int hash = (key == null) ? 0 : hash(key.hashCode());
    for (Entry<K,V> e = table[indexFor(hash, table.length)];
         e != null;
         e = e.next) {
        Object k;
        if (e.hash == hash &&
            ((k = e.key) == key || (key != null && key.equals(k))))
            return e;
    }
    return null;
} 
```

这清楚地表明它仅在有限的一组对象上循环。

另请参阅[此问题](https://stackoverflow.com/questions/6493605/how-does-java-hashmap-work)以获取有关 a 的更多信息`HashMap`（由 a 内部使用`HashSet`）

最后一条建议：如果您遇到性能问题，请使用分析器查看实际瓶颈所在的位置。我怀疑它会在`contains`电话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:06:44.890

的实现`List.contains()`遍历列表检查是否`target.equals(element)`.

如果可能，将您的列表放入 a`HashSet`中，其`contains()`方法总是很快返回。

仅当您可以重用它时，使用 a`HashSet`才会有好处，因为填充它的成本通常会大于执行`List.contains()`。

您的代码如下所示：

设置 set = new HashSet(EntityTree.setMobileEnablerTxnList);

如果（set.contains（iMobileEnablerTxnList））{

您必须确保正确`MobileEnablerTxnList`执行。`hashCode()``equals()`

# java - Hadoop：我的 reducer 输出与 mapper 相同，但“INFO mapreduce.Job: map 100% reduce 100%”

> ID：12191332
> 
> 赞同：0
> 
> 时间：2012-08-30T06:48:44.127
> 
> 标签：java, hadoop

我能够执行映射器，但我的减速器不起作用。我什至尝试调试，我的控制台只是进入减速器的类，然后在没有进入 reduce 方法的情况下出来。谁能建议我一些解决方案来摆脱这种奇怪的情况？

# java - 如何从批处理脚本执行 Java 代码？

> ID：12191333
> 
> 赞同：2
> 
> 时间：2012-08-30T06:48:45.780
> 
> 标签：java, batch-file

我必须使用批处理脚本执行 java 代码，其中 java 代码必须获取从 .bat 文件生成的变量值并执行 java 代码，然后将另一个变量值返回给 .bat 。

比如说，exec.bat文件得到一个值“456”。这个“456”必须发送到java文件，执行后我们得到另一个值“789”。我希望这个“789”返回exe.bat

请让我知道要在 java 和批处理文件中编写的代码和语法。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T07:04:17.910

这是一种方法：

**在 Java 代码中：**

在程序的最后放这一行

```
System.exit(789); 
```

这`789`是您将返回到批处理文件的值。

**在批处理文件中：**

```
@echo off
java Test %1
set exitcode=%ERRORLEVEL%
echo %exitcode% 
```

这里

`java Test %1`是使用从批处理文件传递的参数的通常 java 执行，其中 %1 将映射到从命令提示符传递给批处理文件的第一个参数（*就像你可以有 %2 等一样*......[检查这篇文章](http://www.windowsitpro.com/article/server-management/how-do-i-pass-parameters-to-a-batch-file-)）。

`ERRORLEVEL`是用于存储从 java 返回的值的标准批处理变量

假设您的批处理文件名是`Test.bat`，您从命令提示符批处理运行它

`Test 456`

**编辑**：添加两个数字的示例

Example.java

```
public class Example extends TestBase<String>
{
     public static void  main(String[] arg){
         int result = Integer.parseInt(arg[0].trim()) ;+Integer.parseInt(arg[1].trim())
          System.exit(result);
     }

} 
```

编译这个文件，生成一个类文件Example.class

批处理文件：

例子.bat

```
@echo off
java Example %1 %2
set exitcode=%ERRORLEVEL%
echo %exitcode% 
```

将此批处理文件和 Example.class 放在一个文件夹中。从该文件夹打开命令提示符并按如下方式运行

```
Example 111 222 
```

这将打印这两个数字的加法

# python - 将数据文件添加到 python 项目 setup.py

> ID：12191339
> 
> 赞同：24
> 
> 时间：2012-08-30T06:49:15.913
> 
> 标签：python, setuptools, setup.py

我有一个这样的项目：

```
├── CHANGES.txt
├── LICENSE
├── MANIFEST.in
...
├── docs
│   └── index.rst
├── negar
│   ├── Negar.py
│   ├── Virastar.py
│   ├── Virastar.pyc
│   ├── __init__.py
│   ├── data
│   │   ├── __init__.py
│   │   └── untouchable.dat
│   ├── gui.py
│   ├── gui.pyc
│   ├── i18n
│   │   ├── fa_IR.qm
│   │   └── fa_IR.ts
│   └── negar.pro
├── setup.py
... 
```

在里面我的文件`Virastar.py`需要一些来自`data.untouchable.dat`. 在我用这个安装项目之前它工作正常`setup.py`：

```
setup(
    ...
    include_package_data=True,
    packages = find_packages() + ['negar'],
    package_dir={'negar': 'negar'},
    package_data={'negar': ['data/*.dat']},
    entry_points={
        'console_scripts': [
            'negar = negar.Negar:main',
        ],
    }, 
    ...  
) 
```

之后，当我启动程序并需要该数据文件时，它会返回此错误：

```
IOError: [Errno 2] No such file or directory: 'data/untochable.dat' 
```

即使在我的`egg-info`来源中，我也找不到任何数据文件：

```
...
negar/Negar.py
negar/Virastar.py
negar/__init__.py
negar/gui.py
negar/data/__init__.py 
```

我在这里错过了什么吗？

谢谢你们。

编辑：我必须在**init** .py 中添加任何特殊的东西吗？

我必须添加这个：我使用 untouchable.dat 就像这样：

```
f = codecs.open('data/untouchable.dat', encoding="utf-8") 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-10T14:19:35.703

我使用[了 data_files](http://docs.python.org/2/distutils/setupscript.html#distutils-additional-files)

```
data_files = [('', ['negar/data/untouchable.dat'])], 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-31T05:56:40.877

第一个问题是我没有将我的数据文件导入到带有`MANIFEST.in`文件的包中。我是这样导入的：

```
include negar/data/*.dat 
```

之后，我的数据文件已经与我的包安装一起导入。但是因为我打开我的数据文件时出错，python找不到它。这个问题帮助我找到了 [包子目录中 Python 访问数据](https://stackoverflow.com/q/779495/1573477)的正确方法，现在我使用这样的东西：

```
import os
this_dir, this_filename = os.path.split(__file__)
DATA_PATH = os.path.join(this_dir, "data", "data.txt")
print open(DATA_PATH).read() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T07:38:20.363

也许尝试：

```
package_data={'negar/data': ['data/*.dat']}, 
```

# c# - QueryExtender Linq Orderby 使用 TimeSpan.Parse

> ID：12191341
> 
> 赞同：2
> 
> 时间：2012-08-30T06:49:19.477
> 
> 标签：c#, asp.net, linq, query-extender

基本上我有一个 ASP.NET 的 QueryExtender 控件，首先我需要将 sql varchar 值转换为 CSharp 类型的 TimeSpan，然后在其上应用 Linq OrderBy 子句，但在执行时会出错。

这是我的代码：

```
 protected void FilterProducts(object sender, CustomExpressionEventArgs e)
    {
      e.Query = (from p in e.Query.Cast<accounts>()
                  select p).OrderBy(p=> TimeSpan.Parse(p.TimeTo));
    } 
```

错误：LINQ to Entities 无法识别方法“System.TimeSpan Parse(System.String)”方法，并且此方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:59:09.213

那是因为`TimeSpan.Parse`在商店中不可用，如果您使用 SQLServer，您的查询将被转换为 SQL，而该商店没有`TimeSpan.Parse`，一种方法是将其转换为列表，然后再次查询。

```
e.Query = (from p in e.Query.Cast<accounts>()
           select p).ToList().OrderBy(p=> TimeSpan.Parse(p.TimeTo)); 
```

`ToList`但是如果返回大量数据，上述解决方案可能会导致一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:15:13.510

在不了解`p.TimeTo`数据形状的情况下，我认为您可以使用字符串值进行排序，这样：

```
from p in e.Query.Cast<accounts>()
select p).OrderBy(p => p.TimeTo.Length).ThenBy(p => p.TimeTo) 
```

这样，一个值`1:00`将排在 之前`11:00`。

**编辑**

拿：

```
var s = new[] { "12:10", "8:00", "8:20",  "1:00", "1:02", "10:00", "11:10" }; 
```

并查看两者之间的区别

```
s.OrderBy (x => x); 
```

和

```
s.OrderBy (x => x.Length).ThenBy (x => x); 
```

这是：

> 1:00
> 1:02
> 10:00
> 11:10
> 12:10
> 8:00
> 8:20

和

> 1:00
> 1:02
> 8:00
> 8:20
> 10:00
> 11:10
> 12:10

# visual-studio - Resharper 7：MSTest 不工作 - “测试未运行”

> ID：12191352
> 
> 赞同：26
> 
> 时间：2012-08-30T06:49:45.770
> 
> 标签：visual-studio, resharper, mstest, visual-studio-2012, resharper-7.0

由于我升级到 VS2012 和 Resharper 7，我以前工作的 MS 测试不再运行。

![在此处输入图像描述](../Images/1e921a8bc57c54870a810191ae25da49.png)

测试在 ASP.NET 环境中运行。我使用以下属性：

```
 [TestMethod]
    [HostType("ASP.NET")]
    [AspNetDevelopmentServerHost("C:\\Projekte\\****\\Website", "/")]
    [UrlToTest("http://localhost:7924/")] 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-18T17:19:39.273

奇怪的是，使用 VS2012，使用 Resharper 8.0，使用 NUnit，由于我的 app.config 文件中有一个条目，我收到了这个错误。我添加了一个 EntityFramework 连接字符串，并且此行为开始了。删除整个连接字符串部分显示测试运行程序再次启动/工作。查看输出显示 app.config 无效 - 这导致了测试运行器中的这种特定行为 - “测试未运行”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-02T15:10:16.377

发生这种情况时，我将 testproject 设置为 AnyCPU，并将项目明确设置为 x86。将 testproject 设置为 x86 为我解决了这个问题。

我正在使用 VS2012 R#8 和 nUnit

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-15T12:25:53.827

尝试使用 MSTest 测试资源管理器运行单元测试。您可能会在根本原因的输出窗口中找到更多详细信息。

对我来说，这是一个引用的程序集，它使用的 NUnit 版本比测试项目中引用的版本更新。使用相同的最新版本解决了该问题。

> System.IO.FileLoadException：无法加载文件或程序集“nunit.framework，版本=2.6.3.13283，文化=中性，PublicKeyToken=96d09a1eb7f44a77”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-13T18:41:09.133

我有同样的问题，我只是..

*   将方法访问修饰符从私有更改为公共。
*   从方法中删除了 static 关键字。

而已。它对我有用。但这是针对 C# 的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-21T20:52:41.817

就我而言，需要删除的是 NUnitTestAdapter nuget。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-04T23:01:31.460

检查您在测试项目中的所有引用是否设置为 Copy Local True。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-01T13:41:54.950

我有同样的问题。无法让 Visual Studio 测试运行程序工作，所以我尝试调试测试。这引发了一个 ConfigurationErrorsException，它没有太多的堆栈跟踪，但包含短语“ClientSettingProvider”。我搜索了我的解决方案，发现某些东西已将“ClientSettingProvider.ServiceUri”的 appSetting 键添加到我的 app.config 中。我删除了这个（连同一个空的 connectionStrings 元素）并重建了一切——解决了这个问题！

仔细检查您的 app.config 并尝试删除任何空元素或任何看起来可疑的内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-01T18:55:52.027

使用 VS2010 和 ReSharper 9.1 的问题是该文件`LocalTestRun.testrunconfig`丢失但在我的`.vsmdi`文件中被引用。

没有 VS 的测试运行正常，但我在 ReSharper 测试 UI 中总是出现“测试未运行”错误。

所以我只是恢复了我的旧`LocalTestRun.testrunconfig`文件，一切都运行得很完美。

我可能已经更新了我的`.vsmdi`文件以不引用丢失的文件……我没有对此进行测试。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-07T08:27:45.693

可能是另一个（愚蠢的）问题；我不小心将项目设置为不构建。转到构建/“配置管理器”，并确保项目设置为构建。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-05T07:30:54.830

我在测试中遇到了类似的问题`NUnit`，它不会被执行，但`R#`只会将它们标记为“测试未运行”。

使用本机运行程序执行它们`NUnit`显示***app.config***文件有一个错误（实际上是 2 个 ConnectionString 部分）。解决这个问题也使测试在测试运行器中运行`R#`。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-02T18:12:38.087

在 VS2012 上，测试项目不适用于 \XXXXXX\XXX 等共享文件夹我解决了它在本地设备上复制了测试项目。祝你好运

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-03-29T02:11:37.443

我遇到了同样的问题，因为测试类名称中包含字符“<”和“>”（也是“（”和“）”导致此问题）。
删除这些符号解决了这个问题。

*由于 F# 的 Unicode 支持，我可以在标识符中使用符号。*

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-08-03T08:42:02.880

我有完全相同的问题，没有任何帮助。

最终我发现我的单元项目和单元测试项目的命名空间不匹配。

我的单元项目的命名空间是 unit.project ，测试项目名为 unit.project.tests 但测试的默认命名空间与单元相同，都是 unit.project。

一旦我将命名空间更新为不同的（每个项目一个命名空间），一切正常！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-02-18T11:39:40.413

我发现单元测试的设置文件可能需要检查 ReSharper 指向的设置文件。我也发生了同样的事情，这取决于我对 RS Harness 指向错误文件的单元测试。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-26T14:25:16.553

我在 Resharper 中不断收到“测试未运行”。我尝试了所有建议，但没有任何效果。为我解决的问题是以管理员身份运行 Visual Studio。（带有 Resharper 8.1 的 VS2013）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-06-09T14:42:10.587

[只是 MSDN 关于Assert.Inconclusive](https://msdn.microsoft.com/en-us/library/ms243815.aspx "断言")的摘录 ：

> 创建单元测试时由 Visual Studio 生成的代码包含一个 Inconclusive 语句作为占位符。

如果解决方案出现问题，最常见的是配置错误，例如错误或不匹配的名称空间，不一致的构建目标等，这会导致 UnitTestExplorer 无法正确使用提供的单元测试。所以一般的解决方案是检查最新的更改并修复错误。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-09-14T12:07:29.617

也可能是您的解决方案包含安装在不同项目中的多个版本的 ie nUnit。就我而言，这是问题的原因。统一解决方案中的nUnit版本后，问题就没有了。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-02-03T11:16:21.067

我在 C# 中遇到了同样的问题：由 ReSharper 运行的单元测试都刚刚以“未运行测试”而停止。没有其他信息。

原来是因为我在 App.Config 中的自定义部分。删除它并且它起作用了。

配置：Visual Studio C# 12、ReSharper 8.2.3

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2015-05-01T21:24:53.070

只是为了补充一点，我已经用一个缺少我需要的部分的新文件覆盖了我的 app.config 文件。我重新添加了这些部分，此时我在 resharper 中遇到了同样的错误。感谢上面的评论，我将它与旧版本进行了比较，发现我缺少 configSections 中的部分名称。

# javascript - 从 JSON 对象创建带有超链接的 HTML 表

> ID：12191353
> 
> 赞同：1
> 
> 时间：2012-08-30T06:49:50.203
> 
> 标签：javascript

我有一个返回 JSONObject 的应用程序。我可以使用以下代码从 JSON 对象获取数据。

* * *

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0  Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <head>
    <style type="text/css">

table, td, th
{
border:1px collapse black;
font-family:Arial;
font-size :small;
}
th
{
background-color:green;
color:white;
}
.hideMe
{
    /*display : none;*/
    /*visibility: hidden;*/
}

</style>
   <script type="text/javascript" language="jscript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js">   
   </script>
   <script type="text/javascript" language="javascript">
           var host = "somehost";
           var mystr = "http://"+ host  +"/rest/bpm/wle/v1/exposed/process";   // use get for this
           var ulink = "";

           $(document).ready(function () {
           $.get(mystr, function (data) {
                   var obj = JSON.parse(data);
               var thtml = "<table id='proctable'>";

                   for (i = 0; i < obj.data.exposedItemsList.length; i++) {
                       ulink = "http://" + host + obj.data.exposedItemsList[i].startURL;
                       thtml = thtml + "<tr><td><a onclick='my_function()' href='javascript:void(0)'>" + obj.data.exposedItemsList[i].display + "</a></td><td id='linkcell' class='hideMe'>" + ulink + "</td></tr>";                   
               }
               thtml = thtml + "</table>";
               document.getElementById('contentdiv').innerHTML = thtml;
           });
       });

       //javascript 
       my_function = null;

       //jquery
       $(function () {
           function generateBPDInstance() {
               $.post(ulink, function (taskdata) {
                   var tobj = JSON.parse(taskdata);
                   alert(tobj.data.tasks[0].name);
                   alert(tobj.data.tasks[0].tkiid);                  
               });
           }
           my_function = generateBPDInstance;
           ulink = "";
       })
`

   </script>
</head>
<body>
 <form name="myform">           
            <div id="contentdiv">
            <table id="proctable">
            </table>
            </div>
        </form>
</body>
</html> 
```

* * *

上面的 html 创建了一个表格，显示了返回值的列表。我还想获取超链接的 rowIndex 并将 column2 的值传递给函数 generateBPDInstance。

我不太擅长 HTML 和 Jquery。请建议我如何获取通过 javascript 创建的 HTML 表的 rowIndex。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:03:48.010

简单的方法是：

将您的表格建筑更改为此

for (i = 0; i < obj.data.exposedItemsList.length; i++) { ulink = "http://" + host + obj.data.exposedItemsList[i].startURL; thtml = thtml + "" + obj.data.exposedItemsList[i].display + "" + ulink + "";

function my_function(e){ //e 是行索引，当你调用 document.getLementById("proctable").rows[e]; 这将为您提供完整的行。

}

--这是一种简单的方法，如果你想遍历树并获取，你总是有父节点或者你可以使用jquery $(object).parent() 来获取超链接的父节点并遍历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:04:32.457

您的问题是“将 column2 的值传递给函数 generateBPDInstance”。为什么不在生成表格时通过它？

```
for (i = 0; i < obj.data.exposedItemsList.length; i++) {
   ulink = "http://" + host + obj.data.exposedItemsList[i].startURL;
   thtml = thtml + "<tr><td><a onclick='my_function('" + ulink + "')' href='javascript:void(0)'>" + obj.data.exposedItemsList[i].display + "</a></td><td id='linkcell' class='hideMe'>" + ulink + "</td></tr>";
 // ------------------------------------------------------^ pass the value
} 
```

将参数添加到您的函数`generateBPDInstance`

```
function generateBPDInstance(ulink) {
   //--------------------------^----
   $.post(ulink, function (taskdata) {
      var tobj = JSON.parse(taskdata);
      alert(tobj.data.tasks[0].name);
      alert(tobj.data.tasks[0].tkiid);                  
   });
} 
```

# facebook-graph-api - 如何在facebook上的朋友墙上发帖？

> ID：12191354
> 
> 赞同：-1
> 
> 时间：2012-08-30T06:49:55.227
> 
> 标签：facebook-graph-api, facebook-php-sdk, facebook-opengraph

我正在使用 facebook php sdk。我已经在我的应用程序上集成了 facebook 开放图。我想使用这张图片中的开放图在朋友墙上发帖。我已经从另一个应用程序中捕获了这个图像墙帖子，我想制作这样的相同帖子。

我也想制作一个像“获取应用程序”这样的操作链接。当用户点击获取应用程序时。我的应用程序应该在新选项卡上打开。

我读了很多文档。他们说不可能使用开放图在朋友墙上发帖，我尝试了 $facebook->api('/$firend_id/feed) 但它在朋友墙上发布了一个链接。我不想要链接我想向朋友墙发布礼物。

请建议我该怎么做？

问候，克里希纳![发布他人的应用程序](../Images/987f2c39726df0bdf32a5c687a783630.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:48:51.343

根据附件，我认为您的意思是“如何将操作链接添加到墙贴？” 请参阅[https://developers.facebook.com/docs/opengraph/actionlinks/](https://developers.facebook.com/docs/opengraph/actionlinks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:39:42.227

我使用命中和试验方法解决了它。

```
$attachment = array(
             'message' => $d['giftmsg'],
            'name' => 'You have recived a gift voucher for a '.$dd['title'].'!' .'',
            'link'=>'https://thevoucherlink.com/redirect.php',
            'description' => " Please click on the link to claim your gift card. Do it soon! This promotional card is valid for a limited time.. <center>&nbsp;</center> The Voucher Link allows facebook users send gift vouchers from local businesses to their friends",
            'picture' => $im,
            'actions'=>array('name'=>'Get Voucher','link'=>'https://thevoucherlink.com/redirect.php')
        );  

        try {
             $t=    $facebook->api('/' . $_POST['friend_id']. '/feed', 'POST', $attachment);
        } catch (Exception $exc) {
            $err= $exc->getTraceAsString();
        } 
```

您可以在帖子上使用这些参数发布相同的帖子。

谢谢您的回答..

# php - 在 php onclick 中传递 Javascript 值

> ID：12191356
> 
> 赞同：-2
> 
> 时间：2012-08-30T06:50:12.610
> 
> 标签：php, javascript

下面是我需要获取输入文本 onblur 值的 PHP 代码。

```
echo $script = "<script>";
$q = "select * from sp_documentocompra_detalle where dcd_codigo
='<script>document.getElementById('busqueda_de_producto').value;</script>'";
$res = mysql_query($q);
$row = mysql_fetch_array($res);
echo $script .= $row."</script>"; 
```

下面是包含输入文本的 HTML 代码。

```
<input type='text' name='busqueda_de_producto' id='busqueda_de_producto' value='' onclick="text();"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:56:42.557

您有您的 php 脚本，并且在您的视图文件中，您可以使用 AJAX 在点击时传递值。

```
<script src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script type="text/javascript">
    function text()
    {
        var textVal=$("#busqueda_de_producto").val();
        $.ajax(
        {
            type:"POST",
            url:"index.php",  //here goes your php script file where you want to pass value
            data: textVal,
            success:function(response)
            {
               //what to do in case of response
            }
        });

        return false;
    }
</script> 
```

对于文本输入，执行类似的操作

```
<input type='text' name='busqueda_de_producto' id='busqueda_de_producto' value='' onclick="javascript:text();"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:56:14.803

您不能以这种方式使用 Javascript 来写入您的 PHP 代码。在经典场景中，PHP 源代码在您的服务器上编译和/或解释，然后将 HTML 和 JS 发送到您的客户端。在解释 PHP 代码*之后*，Javascript 在浏览器中被解释。

您可以使用 PHP 生成 JS 代码，但不能反过来。一旦您的 Javascript 获得所需的值，就必须有某种 HTTP 请求（通过页面加载或通过使用 XMLHttpRequest 对象）才能构建 SQL 查询（可能在 PHP 中）并将其传递给服务器。

# ruby-on-rails - 用于多个内部应用程序和主站点的 OAuth

> ID：12191359
> 
> 赞同：0
> 
> 时间：2012-08-30T06:50:23.203
> 
> 标签：ruby-on-rails, asp.net-mvc, node.js, authentication, oauth

我有一个主要的 Asp.net MVC 应用程序，还有一个帮助站点和很多内部应用程序（我需要构建这些应用程序 - 报告、统计信息、支持票证）。

问题：OAuth 可以这样使用吗？即用户可以通过身份验证使用所有应用程序（如果他们有权访问该应用程序）？

理想情况下，所有或大部分其他应用程序都将在 Ruby 或 Node.js 中实现 - 所以我希望我可以通过 OAuth 实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:15:43.360

只要您的所有应用程序都在同一个顶级域下运行，就不必严格要求使用 OAuth 或类似方法来获取共享会话。相反，您可以依赖普通的会话 cookie。您可以在您的应用程序和用户之间运行某种中间件。

仅当主应用程序提供您可能希望在各种客户端应用程序上使用的 REST API 时，其中一些应用程序在外部环境/域中运行，使用 OAuth 可能是相关的。

# android - 通过编码在通话过程中播放声音时手机没有发出声音？

> ID：12191367
> 
> 赞同：1
> 
> 时间：2012-08-30T06:51:03.137
> 
> 标签：android, broadcastreceiver, media-player, phone-call

我已经测试了我的应用程序：它通过在具有足够音量的外部扬声器上接听来电来开始播放歌曲，以使另一边的人听到我们在我们这边播放的内容。

但是当我接听电话时，播放的歌曲停止了。我希望在通话期间播放这首歌，以便对方可以听到。

如果任何人也遇到过这个问题或知道解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:18:31.703

这是因为在您通话时，媒体播放路由将遵循语音通话路由。如果您没有连接任何附件，语音通话的默认输出路由是使用听筒。

您可以尝试等待手机状态切换到[MODE_IN_CALL](http://developer.android.com/reference/android/media/AudioManager.html#getMode%28%29)，然后使用[setSpeakerPhoneOn](http://developer.android.com/reference/android/media/AudioManager.html#setSpeakerphoneOn%28boolean%29)更改输出路由以使用扬声器。请注意，这还将语音呼叫音频路由到扬声器，而不仅仅是媒体音频。

**编辑：**您可以尝试使用流类型 ENFORCED_AUDIBLE（整数值 7）进行媒体播放。但是，它可能不适用于所有设备/所有 Android 版本。

# jsp - tomcat目录结构

> ID：12191369
> 
> 赞同：0
> 
> 时间：2012-08-30T06:51:09.680
> 
> 标签：jsp

嗨，我有一个项目可以在 Netbeans 上完美运行，语法或连接没有任何问题，但是当我尝试在 tomcat 中运行相同的 jsp 页面时，它会产生错误。错误可能出在目录结构中。

我将 jsp 页面、html 页面、css、images 文件夹、web-inf 文件夹和 .js 文件都放在了 webapps\login 的一个文件夹中。当我运行 index.html 页面时，当我单击登录页面链接时它会运行 bUt，它会显示以下异常。

有人可以帮我吗？

> HTTP 状态 500 - 消息描述 服务器遇到内部错误 () 阻止它完成此请求。

例外：

```
javax.servlet.ServletException: com.mysql.jdbc.Driver
        org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:848)
        org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:781)
        org.apache.jsp.login_jsp._jspService(org.apache.jsp.login_jsp:907)
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:322)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)

root cause 

java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
        org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1332)
        org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1181)
        org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:150)
        org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:71)
        java.lang.Class.forName0(Native Method)
        java.lang.Class.forName(Unknown Source)
        org.apache.jsp.login_jsp._jspService(org.apache.jsp.login_jsp:445)
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:322)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:00:11.667

看来这`com.mysql.jdbc.Driver`不是你的类路径。您必须将所有需要的罐子（在这种情况下应该是`mysql-connector-java.jar`，但应该有更多）添加到：

webapps/*应用程序名称*/WEB-INF/lib/

在您的情况下，*app-name*是登录名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:15:03.220

通常您会生成一个包含您的代码库以及所有相关库的 WAR（网络存档）文件，并将其部署到 tomcat 中（例如，通过复制到 webapp 文件夹中）。~~据我记得，~~ NB 已经生成了 WAR 文件（[stackoverflow：如何在 NetBeans 中创建我的项目的 war 文件？](https://stackoverflow.com/questions/1007346/how-can-i-create-a-war-file-of-my-project-in-netbeans)）并将其存储在`dist/`项目的文件夹中。检查您是否可以在该文件夹中找到调用`<projectname>.war`的文件并将其复制到您的 webapp 目录。

# android - Android 无法在 TextView 上正确显示 >

> ID：12191370
> 
> 赞同：0
> 
> 时间：2012-08-30T06:51:10.360
> 
> 标签：android, xml

我试过搜索它，但我似乎找不到任何东西，因为用 > 或 > 搜索。并没有真正给你预期的搜索结果。

我面临的问题是，每当我将字符串放入 strings.xml 时，例如我输入，

1 > 2 > 3

它将其更改为 1 > 2 > 3

我尝试在布局文件本身中对字符串进行硬编码，但它似乎自动更改为>，我尝试在模拟器上运行它，以及它在预览中显示，它似乎只显示 html它的数量。

任何解决方案将不胜感激。当然，我想避免使用手动输入所有文本`Html.fromHtml`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:56:42.337

我不明白，因为我做了一个测试项目，它按预期工作：

在我的 res/values/string.xml 文件中：

```
 <string name="test_string">This is &gt; a string &lt;</string> 
```

在我的 res/layout/main.xml 文件中：

```
 <TextView  
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/test_string" /> 
```

在我的 Android 设备上，它显示：

**这是 > 一个字符串 <**

您可以发布您自己的 string.xml 和布局文件的摘录，并提供您的应用程序的屏幕截图吗？

# drupal - Ajax 过滤 Drupal 7 视图

> ID：12191371
> 
> 赞同：0
> 
> 时间：2012-08-30T06:51:12.800
> 
> 标签：drupal, drupal-7, drupal-views

我有一个视图，我想在其中公开过滤器以允许用户自定义视图输出。我知道我可以使用暴露的过滤器，但是，我想放置一个 DIV 或 LI 列表，而不是下拉列表（或暴露过滤器的复选框/单选按钮），单击该列表可以通过 ajax 更新视图输出。以何种方式可以使用 Views 3 和 Drupal 7？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:03:12.903

您可以使用[更好的暴露过滤器](http://drupal.org/project/better_exposed_filters)模块将过滤器项目的输出更改为链接。并在视图的高级设置中使用 AJAX 选项使过滤 ajaxified。

# android - 覆盖另一个活动

> ID：12191373
> 
> 赞同：0
> 
> 时间：2012-08-30T06:51:17.173
> 
> 标签：android, android-intent, android-widget, android-tabhost

[1](https://i.stack.imgur.com/tjSL7.jpg)这是我的代码片段

```
TabHost tabHost = getTabHost();    
TabSpec aboutus = tabHost.newTabSpec("About us");
aboutus.setIndicator("___", getResources().getDrawable(R.drawable.icon_aboutus_tab));
Intent photosIntent = new Intent(getApplicationContext(), readmore.class);

aboutus.setContent(photosIntent);
TabSpec contactus = tabHost.newTabSpec("Contact us");
// setting Title and Icon for the Tab
contactus.setIndicator("___", getResources().getDrawable(R.drawable.icon_contactus_tab));
Intent songsIntent = new Intent(getApplicationContext(), contactus.class);
contactus.setContent(songsIntent);
TabSpec orderhistory = tabHost.newTabSpec("Order history");
orderhistory.setIndicator("___", getResources().getDrawable(R.drawable.icon_orderhistory_tab));
Intent videosIntent = new Intent(getApplicationContext(), readmore.class);
orderhistory.setContent(videosIntent);
TabSpec home = tabHost.newTabSpec("Home");
home.setIndicator("___", getResources().getDrawable(R.drawable.icon_home_tab));
Intent homeIntent = new Intent(getApplicationContext(), Mainpage.class);
homeIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
homeIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
homeIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
home.setContent(homeIntent);
// Adding all TabSpec to TabHost
tabHost.addTab(aboutus); // Adding about us tab
tabHost.addTab(contactus); // Adding contact us tab
tabHost.addTab(orderhistory); // Adding order history tab
tabHost.addTab(home); 
```

![这是我在 emulato 上的截图](../Images/0cd8d98e7033bdb504e679ffe6d34080.png)

Intent 没有覆盖主要活动。我应该如何覆盖它。

这是我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.androidhive.xmlparsing"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.READ_CONTACTS"/>
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
 <uses-permission android:name="android.permission.CLEAR_APP_CACHE"/>
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<application
    android:icon="@drawable/zaggleicon"
    android:label="@string/app_name"
    android:name=".MyApplication"
    android:theme="@android:style/Theme.Light" 

    >`<activity
        android:label="@string/app_name"
        android:name=".AndroidTabLayoutActivity" >
        <intent-filter >

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>`<activity
        android:label="@string/app_name"
        android:name=".readmore" >
        <intent-filter >

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>` <activity android:name=".Mainpage">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>`<activity
        android:label="@string/app_name"
        android:name=".contactus" >
        <intent-filter >

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>` 
```

从我的图像中可以看出，当我按下按钮时，活动显示在特定部分，最后一个活动在活动中保持不变。所以当我按下选项卡按钮时如何覆盖该活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:36:21.067

只需按照以下方式声明您的标签活动 -

```
<activity
    android:label="@string/app_name"
    android:name=".readmore"> </activity>

<activity android:name=".Mainpage"></activity>

<activity
    android:label="@string/app_name"
    android:name=".contactus" ></activity> 
```

并且，看看[TabLayout](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)教程。

# javascript - 如何选择跨度标签内的所有内容，包括跨度标签本身？

> ID：12191379
> 
> 赞同：2
> 
> 时间：2012-08-30T06:51:40.607
> 
> 标签：javascript, contenteditable, html

我有一个 contenteditable div，其中有一个 span 标签，其中包含一些文本。如何选择跨度标记及其所有内容，因此当用户按退格键或删除时，跨度及其内容会被删除？

**更新：**当我说选择时，我的意思是突出显示。带来不便敬请谅解。

**更新2：**我正在考虑'element.outerHTML.select（）'。看看是否有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:42:37.693

在 Firefox 中，您可以使用[Selection API](https://developer.mozilla.org/en-US/docs/DOM/Selection)来执行此操作。将它与[DOM2 Range API](http://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113/ranges.html#Level-2-Range-idl)结合起来，[你就拥有了你想要的东西](http://jsfiddle.net/qpykF/)：

```
var r = document.createRange();
r.selectNode(domElement);
var s = window.getSelection();
s.removeAllRanges();
s.addRange(r); 
```

选择 API 在未来的标准[HTML 编辑 API](http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)中找到了自己的位置，但要在大多数浏览器中可用还需要一段时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:06:54.403

昨天我回答[了你的另一个问题](https://stackoverflow.com/questions/12172520/how-to-delete-whole-span-element-with-contenteditable-spans-inside-it/)。我修改了该答案随附的 jsfiddle，[请重新检查](http://jsfiddle.net/KooiInc/JyzDb/)。`shift+delete`在可编辑范围内使用以调出对话框并“选择”当前范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:05:34.393

尝试这个：

```
var span = document.getElementById("myspan");

span.onclick = function() {
    var range = document.createRange();
    range.selectNodeContents(span);
    var sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);
};​ 
```

# javascript - 使用 Javascript 重新缩放图像

> ID：12191386
> 
> 赞同：0
> 
> 时间：2012-08-30T06:52:13.467
> 
> 标签：javascript, jquery, html, image

我正在使用 jQuery 的 .css() 函数使用 javascript 在我的网站上重新缩放图像（取决于屏幕大小）。现在我正在尝试对一堆重新缩放的图像进行动画处理，并且性能在旧系统上崩溃了......我的猜测是浏览器在动画的每一步都会重新缩放图像。有什么办法可以防止这种情况发生，例如通过重新缩放图像并将这个重新缩放的版本用于动画？

最大限度

编辑：

```
function adjustTile(contentHeight)
{
    TILE_GLOBAL.values.tileWidth = contentHeight/TILE_GLOBAL.def.tileWidthRatio;
    var windowWidth = jq(window).width();
    var tileStackDistance = windowWidth / TILE_GLOBAL.values.tiles.length / 3;
    var tileOffset = (windowWidth - TILE_GLOBAL.values.tileWidth - tileStackDistance*(TILE_GLOBAL.values.tiles.length-1))/2;

for(var i = 0; i < TILE_GLOBAL.values.tiles.length; i++)
{
    var position = tileOffset + tileStackDistance * i;
    jq(TILE_GLOBAL.values.tiles[i]) .css({  'left' : position + 'px', 
                                            'z-index' : TILE_GLOBAL.values.tiles.length - i, 
                                            'width' : TILE_GLOBAL.values.tileWidth + 'px', 
                                            'height' : contentHeight + 'px',
                                            'border' : TILE_GLOBAL.values.tileBorderSize + 'px solid #a3aba5'})
                                    .attr('data-original_pos', position);
}
jq('.tile-description').css({'font-size' : contentHeight / 20 + 'px'});
}

function slideTiles(e)
{
    TILE_GLOBAL.values.cancelReset = true;
    var chosenTile = jq(e.delegateTarget);
    var prevTiles = chosenTile.prevAll('div');
    var nextTiles = chosenTile.nextAll('div');

    for(var i = 0; i < prevTiles.length; i++)
    {
        jq(prevTiles[i]).animate({left :  jq(prevTiles[i]).attr('data-original_pos') - (TILE_GLOBAL.values.tileWidth/3*2.5) + 'px'}, {queue : false});
    }

    chosenTile.animate({left :  chosenTile.attr('data-original_pos') + 'px'}, {queue : false});

    for(var i = 0; i < nextTiles.length; i++)
    {
        jq(nextTiles[i]).animate({left :  jq(nextTiles[i]).attr('data-original_pos') + 'px'}, {queue : false});
    }
}

<div class="tile"><a href="isiplan-rv.html" target="_self"><img class="tile-image" src="images/template/tiles/rvtile.jpg" border="0" /></a>
<div class="tile-overlay"> </div>
<img class="tile-product-headline" src="images/template/tiles/rvheadline.png" border="0" />
<div class="tile-shadow"> </div>
<p class="tile-description"></p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:56:23.947

我也有这个问题......

您应该将重新缩放的图像放入一个 div 中，该 div 应该根据图像大小具有固定的宽度和高度，并且应该移动该 div（它将在其中移动图像），而不仅仅是图像。

或者

即使您可以根据屏幕大小重新调整 div 大小，并且可以将图像的高度/宽度指定为 100%，并且可以移动 div。

供您[参考](https://stackoverflow.com/questions/11428719/how-to-move-a-div-containing-image-inside-another-div-using-jquery)

# linux - Linux gui中的DDE/IPC？

> ID：12191393
> 
> 赞同：1
> 
> 时间：2012-08-30T06:52:37.803
> 
> 标签：linux, ipc, gnome, x11

Windows 中曾经有动态数据交换 API（IPC 类型），它允许向正在运行的进程发送带有参数的通知，它们会抓住焦点并进行操作。xwindows/gnome 中有类似的东西吗？

例如，当我收到 phpunit 错误时，它带有文件路径和行号。想知道是否使用任何 bash 脚本或 perl 等，我可以获取输出并使下面的行可点击

```
protected/tests/controllers/CmsControllerTest.php:17 
```

所以它很快专注于我的日食，打开文件并将光标移动到正确的行号。phpunit 和 eclipse 仅作为示例。说够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:30:58.037

解决这个问题的常用方法是使该功能成为 Eclipse 插件。

有很多关于如何编写此类插件的示例。

此外，您可能可以依靠/重用完整的现有视图（问题视图、任务视图等），因此使其看起来很漂亮并且匹配 Eclipse 应该是轻而易举的事。

或者，您可以使用丰富的 API 来实现您自己的 IPC 通道，以便在 Eclipse 之外与您的测试运行程序进行对话。一个例子就是`eclimd`Vim-eclipse 集成的东西。具体来说，看看它在[“Headed Eclipse”](http://eclim.org/eclimd.html#headed-eclipse-server)模式下的行为。

# android - 从 onTextChangeListener() 更改 EditText 文本

> ID：12191394
> 
> 赞同：5
> 
> 时间：2012-08-30T06:52:38.817
> 
> 标签：android, android-edittext

我正在开发一个 Android 应用程序。在我的应用程序中，我必须使用基于文本的图像。所以我写`OnChangeListener()`了`EditText`。以下是我的示例代码。

```
edt.addTextChangedListener(this);  
@Override
public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub
    CharSequence cs=convert(edt.getText.toString());
            edt.setText(cs);
}
@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    // TODO Auto-generated method stub

}
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub

} 
```

但是我得到了上述代码的异常。我知道异常的原因是`setText()`从`afterTextChanged()`方法调用。但是我必须`EditText`根据相同的`EditText`文本更改来更改文本值。帮助我的朋友

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-21T05:24:08.393

另一种解决方案是使用布尔变量，这样它就不会进入无限调用堆栈并最终给出`stackoverflow exception`

```
public void afterTextChanged(Editable s) {
    if(!flag) 
    {
            flag = true;

            edt.setText("string");

            flag = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:15:52.783

只需在设置文本之前删除您的侦听器，并在完成后再次注册，如下所述：

[添加 onTextChanged 实现后清除 EditText 文本](https://stackoverflow.com/questions/5567373/clear-edittext-text-after-adding-ontextchanged-implemenation)

# objective-c - RestKit with Core Data - 没有主键的映射

> ID：12191395
> 
> 赞同：0
> 
> 时间：2012-08-30T06:52:39.987
> 
> 标签：objective-c, ios, core-data, restkit

通过 RestKit 我加载了一个看起来像这样的 XML：

```
<item>
<test_number>1</test_number> 
<test_question>test question</test_question> 
<test_answer>test answer</test_question> 
</item>

<item>
<test_number>2</test_number> 
<test_question>test question 2</test_question> 
<test_question>test question 2</test_question> 
</item>
... 
```

在我的核心数据中，我得到了获取数据的 Item 对象。如果我正在加载 xml，我想更新我的核心数据对象，只有在核心数据中不存在该对象时才插入。通常我会设置 RestKit 能够识别可以更新哪个对象的主键。但就我而言，我可以有多个项目具有相同的测试编号，但其他问题和答案。所以没有主键。如何在 RestKit 中进行映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:09:52.627

正如我通过一些论坛和文档发现的那样——RestKit 需要一个主键来将对象映射到 CoreData。否则它只会创建新对象而不是更新正确的对象。一种解决方案是使用重要字段生成自己的主键，然后使用它。另一种方法是手动映射所有内容，而不是使用 RestKit 自动映射。

# java - 为 PHP 生成 JSON

> ID：12191399
> 
> 赞同：-1
> 
> 时间：2012-08-30T06:53:11.970
> 
> 标签：java, php, android, json, web-services

我正在通过 PHP 生成 JSON 以集成到 android 应用程序中，我不知道它是否正确，因为很多人不知道 PHP，JSON 是在没有缩进的情况下生成的，并且在 java 中阅读时遇到问题，然后想知道它是否正确，如果有任何例子欢迎。

遵循以下代码：

```
<?php

 $modulos = array(
     "inicial" => array(
            "conteudo" => "A  é uma empresa especializada no desenvolvimento de
                    aplicativos móveis e sistemas para smartphones e tablets. ",
            //Não é o logotipo, é a imagem principal da primeira pag
            "imagem" => "http://.com.br/wp-content/uploads/logotipo.png"
                        ),// fim nó inicial

    "quemsomos" => array(
        //conteudo bem resumido, seria intereçante o usuario ter um local no site
        // para definir os textos e parametros mobile
        "conteudo" => "Desenvolve soluções móveis de acordo com a necessidade do cliente 
                       independentemente do segmento, exploramos as amplas possibilidades 
                       dos novos recursos em comunicação móvel para uso em Smartphones e Tablets."
                        ),//fim nó quem somos

    "produtos" => array(
        "produto" => array(
            "titulo" => "Aplicativo gloop",
            "descricao" => "Pacote completo, Web Site/App IOS/App Android",
            "imagem" => "http://site.holyis.com/sites/5/imagens/logo.png",
            "detalhes" => "link de JSON que contem dados dos detalhes do produto"
                        ),

        //para mais que um produto é só copiar o primeiro e incluir aqui
        "produto" => array(
            "titulo" => "Aplicativo gloop ",
            "descricao" => "Pacote completo, Web Site/App IOS/App Android",
            "imagem" => "http://site.holyis.com/sites/5/imagens/logo.png",
            "detalhes" => "link de JSON que contem dados dos detalhes do produto"
                            ),
                        ),//fim nó produtos

    "servicos" => array(
        "servico" => array(
            "titulo" => "Desenvolvimento mobile",
            "descricao" => "Atuamos no desenvolvimento de aplicações móveis para as 
                            plataformas IOS e Android usando seus próprios SDKs. Publicamos
                            sua aplicação nas lojas Apple Store e Google play.",
            "imagem" => "http://.com.br/wp-content/uploads/2012/08/android-iphone-sdk1.png"
                            ),
        //para mais que um servico é só copiar o primeiro e incluir aqui
        "servico" => array(
            "titulo" => "Implementação de idéias",
            "descricao" => "Teve uma idéia mas não tem conhecimento para implementa-la ? 
                            Entre em contato que temos toda estrutura para colocar em prática.",
            "imagem" => "http://.com.br/wp-content/uploads/2012/08/ideia.png"
                            ),
                        ),//fim nó servicos

                );//fim nó pai

utf8_encode($modulos);
$json = json_encode($modulos);

echo $json;

?> 
```

结果：

> Teve uma id\u00e9ia mas n\u00e3o tem conhecimento para implementa-la ? \n\t\t\t\t\t\t\tEntre em contato que que temos toda estrutura para colocar em pr\u00e1tica。","imagem":"http://.com.br/wp-content/uploads /2012/08/ideia.png"}}} Teve uma id\u00e9ia mas n\u00e3o tem conhecimento para implementa-la ? \n\t\t\t\t\t\t\tEntre em contato que que temos toda estrutura para colocar em pr\u00e1tica。","imagem":"http://.com.br/wp-content/uploads /2012/08/ideia.png"}}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:54:26.653

没错，以后你可以用[JSONLint自己检查](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:20:46.717

[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)是另一个可以验证 JSON 的页面。它是正确的。

# sharepoint - 导出 Sharepoint 2010 站点

> ID：12191401
> 
> 赞同：0
> 
> 时间：2012-08-30T06:53:16.527
> 
> 标签：sharepoint, sharepoint-2010

我从生产服务器 (_admin/SiteAndListExport.aspx) 导出了站点。所有 cmp 文件大小约为 8GB。该站点使用 EBS ( [http://technet.microsoft.com/en-us/magazine/2009.06.insidesharepoint.aspx](http://technet.microsoft.com/en-us/magazine/2009.06.insidesharepoint.aspx) )。

当我尝试使用命令将该站点导入我的开发环境时

```
Import-SPWeb http://dev2:8080 -Path C:\spbackup\site.cmp 
```

我有错误：

```
Cannot import site. The exported site is based on the template STS#0 but the destination site is based on the template SPS#0\. You can import sites only into sites that are based on same template as the exported site. 
```

在 DEV 环境中，我使用“稍后选择模板”选项创建了站点。

1.  如何解决该错误？

2.  我想加快出口和进口网站。是否可以使用一些转储 EBS 提供程序来忽略存储在 EBS 中的所有文件和附件？

3.  是否可以从 ISPExternalBinaryProvider 实现中检测到调用 RetrieveBinary 方法来自导出过程？

# java - 生命游戏 - 蟾蜍模式的输入

> ID：12191404
> 
> 赞同：1
> 
> 时间：2012-08-30T06:53:35.287
> 
> 标签：java, algorithm, conways-game-of-life

任何人都可以确认生命游戏：

如果输入

```
- - - -
- x x x
x x x -
- - - - 
```

和

```
- x x x
x x x - 
```

是相似的。如是。如何 ？？请解释。

关于“生命游戏”问题的背景..请参阅[生命游戏中的蟾蜍图案](https://stackoverflow.com/questions/11982217/toad-pattern-in-game-of-life)它基本上是蟾蜍图案输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:20:34.637

从理论的角度来看，两者是相同的，因为单元格的网格是无限的，并且所有未表示的单元格都假定最初是死的。

然而，在实践中，这取决于您的 Life 实现如何处理当前网格“边缘”上的单元格。根据实现的不同，处理“边缘”单元格的常用方法有以下三种：

1.  网格被扩展以适应在当前网格之外出现的新单元（达到一定限制，因为只有有限的内存可用）。
2.  将在网格外复活的单元格将被忽略。
3.  边缘上的单元格被认为与相对边缘上的单元格相邻（即网格环绕）。

如果您的实现采用第二种或第三种方法，模式将产生不同的结果。

为了避免这种混淆，可以将包含在某个空间内的模式表示为包括任何必要的初始死区，从而一起避免边缘问题。这是第一种模式中采用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:12:45.357

它们的相似之处仅在于输入*看起来*相似。结果非常不同：

## 模式 1

```
- - - -
- x x x
x x x -
- - - -

- - x -
x - - x
x - - x
- x - -

- - - -
- x x x
x x x -
- - - - 
```

## 模式 2

```
- x x x
x x x -

x - - x
x - - x

- - - -
- - - - 
```

# database-design - 将一个数据表拆分为 2 个

> ID：12191405
> 
> 赞同：0
> 
> 时间：2012-08-30T06:53:38.433
> 
> 标签：database-design

我有一个数据库表，它会不断更新和读取。它包含大约 15 列，我在其中更新了大约 5 列。其中 2 个非常重要，3 个不太重要，但也很重要。不幸的是，我一直在日志中看到：

进程 40900 在 4150.000 毫秒后获得了事务 50309403 上的 ShareLock

我认为只有 2 个不同的进程想要更新同一行。我想知道，如果拆分这个表是明智的，那么这两个列组将被分成 2 个表？当然，缺点是必须索引/查找另一个表。

你怎么看？

# objective-c - 在 NSTableView 中滚动或排序时固定第一行

> ID：12191408
> 
> 赞同：0
> 
> 时间：2012-08-30T06:53:51.193
> 
> 标签：objective-c, cocoa, nstableview

我有一个 NSTableView 我希望第一行被修复。我不希望在单击任何表格列的标题时对第一行进行排序。该行也应该在滚动时固定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:31:15.043

我认为有两种方法可以：向 tableview 中的对象添加属性。例如一个名为“isFirstRow”的布尔值。将此对象设置为您首先想要的行的 YES，并基于此属性添加一个 sortDescriptor。（我认为这是最干净的解决方案）。

或者从 tableArray 中删除该行，构建表并将该行添加回第一个位置。

# android - 类似于 android 应用程序中的下拉菜单？

> ID：12191413
> 
> 赞同：1
> 
> 时间：2012-08-30T06:54:12.527
> 
> 标签：android

我正在一个 android 应用程序中搜索一个小部件，用户可以在其中从特定列表中选择一个项目。只能选择一个，列表由应用程序定义。

这就像一个下拉菜单。我不能使用简单的 listView，因为我需要在一页上至少有 4 个控件。那么什么是好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:58:34.680

我想，你正在寻找类似[Spinners的东西](http://developer.android.com/guide/topics/ui/controls/spinner.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T07:00:21.417

[Spinners](http://developer.android.com/guide/topics/ui/controls/spinner.html)是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:00:53.157

您可以`Spinner`在 android 中使用 dropdown。或者您可以`AlertDialog`像使用下拉菜单一样使用。对于使用微调器，请阅读[此](http://developer.android.com/guide/topics/ui/controls/spinner.html)内容。对于使用，`AlertDialog`请阅读[此内容](http://developer.android.com/guide/topics/ui/dialogs.html)

# java - Node.getTextContent() 有没有办法获取当前节点的文本内容，而不是后代的文本

> ID：12191414
> 
> 赞同：16
> 
> 时间：2012-08-30T06:54:24.273
> 
> 标签：java, xml, dom

Node.getTextContent() 返回当前节点及其后代的文本内容。

有没有办法获取当前节点的文本内容，而不是后代的文本。

例子

```
<paragraph>
    <link>XML</link>
    is a 
    <strong>browser based XML editor</strong>
    editor allows users to edit XML data in an intuitive word processor.
</paragraph> 
```

预期产出

```
paragraph = is a editor allows users to edit XML data in an intuitive word processor.
link = XML
strong = browser based XML editor 
```

我试过下面的代码

```
String str =            "<paragraph>"+
                            "<link>XML</link>"+
                            " is a "+ 
                            "<strong>browser based XML editor</strong>"+
                            "editor allows users to edit XML data in an intuitive word processor."+
                        "</paragraph>";

        org.w3c.dom.Document domDoc = null;
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder;

        try {
            docBuilder = docFactory.newDocumentBuilder();
            ByteArrayInputStream bis = new ByteArrayInputStream(str.getBytes());
            domDoc = docBuilder.parse(bis);         
        } catch (ParserConfigurationException e1) {         
            e1.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }       

        DocumentTraversal traversal = (DocumentTraversal) domDoc;
        NodeIterator iterator = traversal.createNodeIterator(
                domDoc.getDocumentElement(), NodeFilter.SHOW_ELEMENT, null, true);

        for (Node n = iterator.nextNode(); n != null; n = iterator.nextNode()) {           
            String tagname = ((Element) n).getTagName();
            System.out.println(tagname + "=" + ((Element)n).getTextContent());
        } 
```

但它给出了这样的输出

```
paragraph=XML is a browser based XML editoreditor allows users to edit XML data in an intuitive word processor.
link=XML
strong=browser based XML editor 
```

请注意，**段落**元素包含我不想要的**链接**文本和**强**标记。请提出一些想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T07:38:39.160

您想要的是过滤节点的子节点`<paragraph>`以仅保留节点类型的子节点`Node.TEXT_NODE`。

这是将返回您所需内容的方法示例

```
public static String getFirstLevelTextContent(Node node) {
    NodeList list = node.getChildNodes();
    StringBuilder textContent = new StringBuilder();
    for (int i = 0; i < list.getLength(); ++i) {
        Node child = list.item(i);
        if (child.getNodeType() == Node.TEXT_NODE)
            textContent.append(child.getTextContent());
    }
    return textContent.toString();
} 
```

在您的示例中，这意味着：

```
String str = "<paragraph>" + //
        "<link>XML</link>" + //
        " is a " + //
        "<strong>browser based XML editor</strong>" + //
        "editor allows users to edit XML data in an intuitive word processor." + //
        "</paragraph>";
Document domDoc = null;
try {
    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
    ByteArrayInputStream bis = new ByteArrayInputStream(str.getBytes());
    domDoc = docBuilder.parse(bis);
} catch (Exception e) {
    e.printStackTrace();
}
DocumentTraversal traversal = (DocumentTraversal) domDoc;
NodeIterator iterator = traversal.createNodeIterator(domDoc.getDocumentElement(), NodeFilter.SHOW_ELEMENT, null, true);
for (Node n = iterator.nextNode(); n != null; n = iterator.nextNode()) {
    String tagname = ((Element) n).getTagName();
    System.out.println(tagname + "=" + getFirstLevelTextContent(n));
} 
```

输出：

```
paragraph= is a editor allows users to edit XML data in an intuitive word processor.
link=XML
strong=browser based XML editor 
```

它所做的是迭代节点的所有子节点，只保留 TEXT（因此不包括评论、节点等）并累积它们各自的文本内容。

没有直接的方法`Node`或`Element`仅获取第一级的文本内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T07:38:06.813

如果您将最后一个 for 循环更改为以下循环，它的行为将如您所愿

```
for (Node n = iterator.nextNode(); n != null; n = iterator.nextNode()) {           
    String tagname = ((Element) n).getTagName();
    StringBuilder content = new StringBuilder();
    NodeList children = n.getChildNodes();
    for(int i=0; i<children.getLength(); i++) {
        Node child = children.item(i);
        if(child.getNodeName().equals("#text"))
            content.append(child.getTextContent());
    }
    System.out.println(tagname + "=" + content);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-25T10:08:47.613

我使用 Java 8 流和一个辅助类来做到这一点：

```
import java.util.*;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class NodeLists
{
    /** converts a NodeList to java.util.List of Node */
    static List<Node> list(NodeList nodeList)
    {
        List<Node> list = new ArrayList<>();
        for(int i=0;i<nodeList.getLength();i++) {list.add(nodeList.item(i));}
        return list;
    }
} 
```

接着

```
 NodeLists.list(node)
.stream()
.filter(node->node.getNodeType()==Node.TEXT_NODE)
 .map(Node::getTextContent)
 .reduce("",(s,t)->s+t); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-15T13:05:33.187

隐式地对实际节点文本没有任何功能，但通过一个简单的技巧就可以做到。询问 node.getTextContent() 是否包含“\n”，如果是这种情况，则实际节点没有任何文本。

希望这有帮助。

# jquery - jQuery 根据名称获取 $(this) 中的输入值

> ID：12191416
> 
> 赞同：2
> 
> 时间：2012-08-30T06:54:32.133
> 
> 标签：jquery

我想获取输入的值（name="id"），输入必须在 $(this) 内。

```
<form>
<input name="id" />
</form> 
```

这就是我现在正在尝试的：

```
$(this).("[name='id']").val 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T06:56:59.437

如果它必须`$(this)`作为父母，就这样做

```
$(this).find("[name='id']").val() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:59:43.297

用于[`.find`](http://api.jquery.com/find/)遍历元素后代。另请注意，通常，当您`input`在属性等于选择器中包含元素类型（例如 ）时，您会获得更好的性能：

```
$(this).find("input[name='id']").val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:37:27.437

尝试这个

```
 var $selectedInput = $("input[name=id]");

    if($selectedInput.length > 0){
//element is available

    alert($selectedInput.val());

    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-30T06:56:20.173

你可以简单地这样做

```
$("[name='id']").val()​; 
```

​<a href="http://jsfiddle.net/cjqed/" rel="nofollow">现场演示

# android - listview 必须显示所有项目列表

> ID：12191421
> 
> 赞同：0
> 
> 时间：2012-08-30T06:54:46.673
> 
> 标签：android

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/asda"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/TableLayout01"
    android:layout_marginLeft="50dp"
    android:layout_marginRight="40dp"
    android:layout_marginTop="1dp" >

    <ListView
        android:id="@+id/_lv_labels"
        android:layout_width="wrap_content"
        android:layout_height="318dp"
        android:layout_weight="1"
        android:choiceMode="multipleChoice" />
</LinearLayout>

<TableLayout
    android:id="@+id/TableLayout01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignRight="@+id/asda"
    android:layout_marginBottom="114dp"
    android:gravity="bottom"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/TableRow01"
        android:gravity="bottom" >

        <Button
            android:id="@+id/_btn_scannewitem"
            android:layout_width="90dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:text="Scan New Item" />

        <Button
            android:id="@+id/_btn_saveNewItem"
            android:layout_width="90dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:text="Save Your Item"
            android:visibility="gone" />

        <Button
            android:id="@+id/_btn_changeprofile"
            android:layout_width="80dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:text="Change Profile" />
    </TableRow>
</TableLayout>

 </RelativeLayout> 
```

我已经使用了这段代码，但我得到了我所期望的设计，而不是我得到这样的页面。 [列表视图具有 olny 有限列表](http://i.stack.imgur.com/nJfrR.png)

但我期待这样的设计。！ [第二张图片是我所期待的](http://i.stack.imgur.com/0bBSk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:02:12.807

您不必将您的包装`ListView`成`LinearLayout`，您可以将您的`ListView`高度设置为`match_parent`或`fill_parent`。

此外，从列表下方删除该`android:layout_marginBottom="114dp"`属性。`TableLayout`

# ruby - 如何找到更大的版本号？

> ID：12191435
> 
> 赞同：2
> 
> 时间：2012-08-30T06:55:51.823
> 
> 标签：ruby

比较两个版本字符串时，`to_f`效果不佳：

```
 > "1.5.8".to_f > "1.5.7".to_f
  => false 
```

字符串比较更好，但并不总是正确的：

```
 > "1.5.8" > "1.5.7"
  => true 

 > "1.5.8" > "1.5.9"
  => false 

 > "1.5.8" > "1.5.10" # oops!
  => true 
```

如何正确比较版本字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:19:17.333

一个想法：创建一个`Object#compare_by`行为类似于`compare`（又名宇宙飞船运算符[Object#<=>](http://ruby-doc.org/core-1.9.3/Object.html#method-i-3C-3D-3E)）但采用自定义块的方法：

```
class Object
  def compare_by(other)
    yield(self) <=> yield(other)
  end
end

>> "1.5.2".compare_by("1.5.7") { |s| s.split(".").map(&:to_i) }
#=> -1 
```

您还可以根据该方法采取更具体的`compare`方法：

```
class String
  def compare_by_fields(other, fieldsep = ".")
    cmp = proc { |s| s.split(fieldsep).map(&:to_i) }
    cmp.call(self) <=> cmp.call(other)
  end
end

>> "1.5.8".compare_by_fields("1.5.8")
#=> 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T08:31:08.490

就我个人而言，我可能只使用[Versionomy](http://dazuma.github.com/versionomy/) gem，恕我直言，无需重新发明这个特定的轮子。

例子：

```
require 'versionomy'
v1 = Versionomy.parse("1.5.8")
v2 = Versionomy.parse("1.5.10")
v2 > v1
#=> true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:08:01.103

首先从拆分版本的不同部分开始：

```
v1 = "1.5.8"
v2 = "1.5.7"
v1_arr = v1.split(".")
=> ["1", "5", "8"]
v2_arr = v2.split(".")
=> ["1", "5", "7"]
v1_arr.size.times do |index|
   if v1_arr[index] != v2_arr[index]
     # compare the values at the given index. Don't forget to use to_i!
     break
   end
end 
```

# c# - 如何使用 UpdateProgress 控件显示等待符号？

> ID：12191436
> 
> 赞同：5
> 
> 时间：2012-08-30T06:55:54.303
> 
> 标签：c#, asp.net, listview, updateprogress

我有一个带有`ListView`. 我从 Active Directory 获取数据，现在如果`ListVew`正在构建，我想要一个等待符号。我想我会使用`UpdateProgress`Ajax Control 工具包中的控件。但是我不知道如果我单击一个按钮并且等待符号（例如 gif）在`ListView`完成后关闭，我该如何使用它。:(

我的 CS 文件：

```
protected void btnBenutzerSuchen_Click(object sender, EventArgs e)
{
     //If I click on this Button the gif must start

    try
    {
        ... // my ListView get data

        this.myListView.DataSource = dv; 
        this.myListView.DataBind();

        ...

    }
    catch (Exception)
    {
        ...
    }

   //If the ListView is finish the gif must close 
} 
```

我怎么能做到这一点？我可以这样做吗`UpdateProgress`：

```
<asp:UpdateProgress ID="UpdateProgress1" DynamicLayout="true" runat="server" AssociatedUpdatePanelID="?" >
    <ProgressTemplate>
    <div class="progress">
        <img src="images/ajax-loader-arrows.gif" />&nbsp;please wait...
    </div>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

我的 update.aspx 文件：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="~/BenutzerListe.aspx.cs" Inherits="BenutzerListe.BenutzerListe" %>
<%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <script src="Scripte/jquery-1.7.2.js" type="text/javascript"></script>
    <script type="text/javascript" src="Scripte/jquery-ui-1.8.22.custom.min.js" ></script>

    <script language="javascript" type="text/javascript">

// my javascript code

    </script>

     <link href="~/App_Theme/BenutzerListeStyle.css" type="text/css" rel="Stylesheet" />
     <link href="App_Theme/jquery-ui-1.8.22.custom.css" type="text/css" rel="Stylesheet" />
     <link href="App_Theme/PopUpDialog_Style.css" type="text/css" rel="Stylesheet" />

    <style type="text/css">
        #SuchTabelle
        {
            width: 587px;
        }
    </style>

</head>

<body>
    <form id="form1" runat="server">

    <asp:scriptmanager id="ScriptManager1" runat="server">
       </asp:scriptmanager> 

           <div class="header">
           <br />

        <table id="SuchTabelle" class="SuchTabelle" runat="server" border="0" width="100%">
            <tr>
                <th><asp:Label ID="id_SearchUser" runat="server" Text="lblSearchUser"></asp:Label></th>
                <th class="txtBenutzerSuchen"><asp:TextBox ID="txtBenutzer"  runat="server" Width="150px" ToolTip="Gesucht wird nach Vorname, Nachname, eMail , Abteilung und Telefonnummer"></asp:TextBox></th>
                <th><asp:Label ID="id_location" runat="server" Text="lblLocation"></asp:Label></th>
                <th class="DropDownList"><asp:DropDownList ID="dropWerk" runat="server" Width="200px" /></th>
                <th>

                        <asp:Button  ID="Button2" runat="server" Text="Suchen" onclick="btnBenutzerSuchen_Click" Width="150px"/>

                </th>
            </tr>
        </table>

      </div>

           <div class="bodyList">

           <asp:UpdatePanel ID="update" runat="server">
            <ContentTemplate>

                <asp:ListView> .... </asp:ListView>

            </ContentTemplate>
           </asp:UpdatePanel>

           <asp:UpdateProgress ID="updatePro" DynamicLayout="true" runat="server" AssociatedUpdatePanelID="update">
            <ProgressTemplate>
               <asp:Image ImageUrl="~/App_Theme/ajax_loader_circle.gif" runat="server" ID="waitsymbol" />
            </ProgressTemplate>
           </asp:UpdateProgress>

        <hr />
    </div>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T07:17:13.127

首先将您的 listview aspx 代码放在更新面板中

```
<asp:UpdatePanel ID="up" runat="server">
    <ContentTemplate>
        // Place your list View Code here
        <asp:ListView ..........
         ...... </asp:ListView>
    </ContentTemplate>
    <Triggers>
       // If button is present outside update panel then specify AsynPostBackTrigger
       <asp:AsyncPostBackTrigger ControlID="btnControlID" EventName="Click" /> 
    </Triggers>
</asp:UpdatePanel>

// Now Set AssociatedUpdatePanelID="up" in the UpdateProgress

<asp:UpdateProgress ID="UpdateProgress1" DynamicLayout="true" runat="server"  AssociatedUpdatePanelID="up" >
<ProgressTemplate>
<div class="progress">
    <img src="images/ajax-loader-arrows.gif" />&nbsp;please wait...
</div>
</ProgressTemplate>
</asp:UpdateProgress> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T07:32:53.917

尝试将按钮放在包含代码的 UpdatePanel 中可能需要很长时间才能执行，然后将 UpdateProgress 控件关联到 UpdatePanel。您可能需要的代码就像：

```
<asp:UpdatePanel ID="updatePanelMain" runat="server">
<ContentTemplate>
    <asp:button runat="server" ID="btnBenutzerSuchen" OnClick="btnBenutzerSuchen_Click"/>
</ContentTemplate>
</asp:UpdatePanel>

<asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="updatePanelMain" DisplayAfter="200">
<ProgressTemplate>
    <div class="progress">
        <img src="images/ajax-loader-arrows.gif" />&nbsp;please wait...
    </div>
</ProgressTemplate>
</asp:UpdateProgress> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T07:39:30.627

我做了一个小例子，模拟了**updatePanel 中的按钮点击**。注意`AssociatedUpdatePanelID`必须设置的属性，*以显示您的 progressTemplate*。

**默认.aspx**

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
    <asp:Button ID="btnDoSomething" runat="server" Text="Do Something" 
        onclick="btnDoSomething_Click" />
    <asp:ListView> YOUR_LISTVIEW_GOES_HERE </asp:ListView>
</ContentTemplate>
</asp:UpdatePanel>

<asp:UpdateProgress ID="UpdateProgress1" DynamicLayout="true" runat="server"
                    AssociatedUpdatePanelID="UpdatePanel1">
    <ProgressTemplate>
        <div class="progress">
            <img src="images/ajax-loader-arrows.gif" />&nbsp;please wait...
        </div>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

**默认.aspx.cs**

```
protected void btnDoSomething_Click(object sender, EventArgs e)
{
    System.Threading.Thread.Sleep(5000);
    // or update listView
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T07:40:34.303

在 Asp.net 中使用 UpdateProgress 控件显示进度条

请参阅此链接了解更多信息

[http://www.freshcodehub.com/Article/22/show-progress-bar-using-updateprogress-control-in-aspnet](http://www.freshcodehub.com/Article/22/show-progress-bar-using-updateprogress-control-in-aspnet)

```
<asp:UpdateProgress ID="prgLoadingStatus" runat="server" DynamicLayout="true">
        <ProgressTemplate>
            <div id="overlay">
                <div id="modalprogress">
                    <div id="theprogress">
                        <asp:Image ID="imgWaitIcon" runat="server" ImageAlign="AbsMiddle" ImageUrl="~/img/progress.gif"
                            Width="230px" /><br />
                        Please wait...
                    </div>
                </div>
            </div>
        </ProgressTemplate>
    </asp:UpdateProgress>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Button ID="btnProgress" runat="server" Text="Show Progress" OnClick="btnProgress_Click" />            
        </ContentTemplate>
    </asp:UpdatePanel>
```

# javascript - VS2010中的Javascript调试不使用关键字debugger

> ID：12191442
> 
> 赞同：0
> 
> 时间：2012-08-30T06:56:15.927
> 
> 标签：javascript, visual-studio-2010, debugging

我正在使用带有 JQuery 的 Visual Studio 2010、MVC3。
我在我的 javascript 函数中设置了断点。
我检查了我的设置是否处于调试模式。
但是，断点没有被击中。有许多建议使用“调试器”键并确保未选中某些 silverlight 选项。如果不使用关键字“调试器”，就没有办法让调试工作吗？不久前我已经让它在另一个项目上工作，但对于我的生活，我不记得我是如何做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:03:53.923

尝试改用 firebug --> [http://getfirebug.com/](http://getfirebug.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:06:52.447

运行 Web 应用程序
在您的解决方案资源管理器中，请注意顶部会出现一个新项目。就我而言，出现了 localhost 。
![在此处输入图像描述](../Images/528ef7e064ad2acf759eb83646dd49ee.png)

双击文件将其打开。
找到你想要的 javascript 行并设置断点。

# python - django '列中的空值'

> ID：12191451
> 
> 赞同：0
> 
> 时间：2012-08-30T06:56:50.393
> 
> 标签：python, django, postgresql

我尝试保存用户的出生日期，但得到“列“dob”中的空值违反非空约束”错误。

模型.py：

```
class Profile(models.Model):
  user = models.OneToOneField(User, unique=True)

  nickname = models.CharField(max_length=32)
  dob = models.DateField(null=False)
  sex = models.BooleanField(null=False) 
```

在这里我尝试生成随机用户：

```
def create_random_users(userCount=1000):
  random.seed()

  for i in range(0, userCount):
    sex = random.randint(0, 1)
    name = random.choice(names[sex])

    email = "{0}{1}@mail.com".format(name, i)
    user = soc_models.User.objects.create_user(email, email, password='password')
    user.save()

    userProfile = soc_models.Profile.objects.create()
    userProfile.user = user
    _year = random.randrange(1962, 1995)
    _month = random.randrange(1, 12)
    _day = random.randrange(1, calendar.monthrange(_year, _month)[1])
    userProfile.dob = datetime.datetime(_year, _month, _day)

    userProfile.sex = random.randrange(0, 1)
    userProfile.city = random.randrange(4000000)
    userProfile.country = random.randrange(230)
    userProfile.save() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:10:57.243

[create](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#django.db.models.query.QuerySet.create)方法被记录为“一种创建对象并将其全部保存的便捷方法”。因此，当示例数据创建脚本中的以下语句运行时：

```
userProfile = soc_models.Profile.objects.create() 
```

它试图将一个空`Profile`对象保存到数据库中。由于此时您尚未设置`dob`属性，因此您触发了`NOT NULL`约束。

避免这种情况的两种方法是：

1.  通过构造函数创建对象，以便它不会立即保存到数据库中。
2.  通过关键字参数为所有字段提供值`create`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:15:02.440

使用时`create`，您必须将所有必需的值传递给它，如果您想`save()`稍后调用，请改用模型构造函数，即：

```
userProfile = soc_models.Profile() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:00:15.210

我不确定它是否修复了您的错误，但关于文档，`DateField`应该用于存储`datetime.date`实例，并`DateTimeField`存储`datetime.datetime`.

PS真的，看起来您正在尝试“迁移”数据库方案（以更改已创建的列）。Django 不支持此类功能，但您可以使用外部应用程序，例如[South](http://south.aeracode.org/)。

# iphone - 从许多图像视图中检测精确的图像视图

> ID：12191452
> 
> 赞同：1
> 
> 时间：2012-08-30T06:56:51.940
> 
> 标签：iphone

我使用标签值创建了 5 个具有不同图像的图像视图。现在我想在 touches Began 方法中确定当前触摸的图像视图。

请任何人帮助指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:04:32.587

尝试这个：-

联系开始方法

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [[touches allTouches]anyObject]; // Picks up the touch
NSLog(@"touched view%@",[touch view]);
UIView *view=[touch view];//here you can find the view which is touched and after that you can compare it with your image views like
if(view==(UIImageView *)[self.view viewWithTag:1])
{
//first image view touched
}
}
//you can proceed in this way. 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:14:00.333

尝试这个：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  UITouch *touch = [[touches allTouches]anyObject]; // Picks up the touch
  UIImageView *view=(UIImageView *)[touch view];//here you can find the view which is touched and after that you can compare it with your image views like
 if(view){

      if([view tag] == 0)
      {
          //UIImageView with tag 0 touched
      }
      else if([view tag] == 1)
      {
          //UIImageView with tag 1 touched
      }
      else if([view tag] == 2)
      {
          //UIImageView with tag 2 touched
      }
      else if([view tag] == 3)
      {
          //UIImageView with tag 3 touched
      }
      else if([view tag] == 4)
      {
          //UIImageView with tag 4 touched
      }
    }
  }
} 
```

# javascript - FCKEditor 或 CKEditor 插件，其中某些文本是不可修改的

> ID：12191453
> 
> 赞同：0
> 
> 时间：2012-08-30T06:56:53.570
> 
> 标签：javascript, jsp, ckeditor, fckeditor

我在我的项目中使用 FCKEditor，并且需要其中一些文本不可修改。我想创建一些插件，这将使某些特定标签（如`<a href...>`标签）不可修改。

见下图......喜欢`EBL:{Blood Loss:minimal}` 并且`Fluids {Fluids: none}`是 HTML 中不可修改的部分。我的意思是这些。Text 的某些部分不可修改。任何人都可以给我任何关于任何插件的提示......谢谢......

![在此处输入图像描述](../Images/8ab89b7dbc99000ee265f1d0ce17ae2e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:06:57.217

CKEditor 有官方的占位符插件。您可以在这里查看[http://nightly.ckeditor.com/7597/_samples/placeholder.html](http://nightly.ckeditor.com/7597/_samples/placeholder.html)它应该适合您的需求。

# scala - Scala 用于理解 unapplySeq

> ID：12191456
> 
> 赞同：0
> 
> 时间：2012-08-30T06:56:59.453
> 
> 标签：scala, for-comprehension, unapply

我有一个

```
object radExtractor{
    def unapplySeq(row:HtmlTableRow):Option[List[String]]={
      val lista = (for{
        a<-row.getByXPath("td/span/a")
        ah= a.asInstanceOf[DomNode]
        if(ah.getFirstChild!=null)
      } yield a.asInstanceOf[DomNode].getFirstChild.toString).toList
      lista match{
        case Nil=>None
        case l @ List(duns,companyname,address,city,postal,_bs,orgnummer, _*) =>Some(l) 
        case _ =>println("WTF");None
      }
    }
  } 
```

我想在列表理解中使用它，例如：

```
val toReturn = for{
      rad<-rader
      val radExtractor(duns,companyname,address,city,postal,_,orgnummer,_*)=rad
} yield Something(duns,companyname,address,city,postal,orgnummer) 
```

但是当“rader”中的“rad”因为提取器返回而失败时，`None`我得到一个`MatchError`.

理解提取器不应该处理/忽略这些`None`案例还是我只是错过了什么？

我可以做

```
 val toReturn = rader.collect{case radExtractor(duns,companyname,address,city,postal,_,orgnummer,  _*)=>
          Something(companyname=companyname,address=address,city=city,postalcode=postal,orgnummer=orgnummer,duns=duns.toInt)
} 
```

但这不会那么性感；）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:12:07.483

因为您在对 a 的分配中执行模式匹配`val`：

```
val radExtractor(duns,companyname,address,city,postal,_,orgnummer,_*)=rad 
```

...匹配必须成功，否则您将遇到错误。上面的语法在 for-comprehension 之外是有效的，Scala 不为不匹配的情况提供任何特殊行为。

要在 for-comprehension 中过滤掉不匹配的值，请直接使用 左侧的模式`<-`：

```
val toReturn = for {
  radExtractor(duns,companyname,address,city,postal,_,orgnummer,_*) <- rader
} yield Something(duns,companyname,address,city,postal,orgnummer) 
```

# c++ - C++面试功能

> ID：12191458
> 
> 赞同：2
> 
> 时间：2012-08-30T06:57:04.500
> 
> 标签：c++

> **可能重复：**
> [“while(*s++ = *t++)”是如何工作的？](https://stackoverflow.com/questions/810129/how-does-whiles-t-work)

在一次采访中，我有以下问题。有人可以向我解释一下吗？

```
void question( char *s, char *t)
{
  while (*s++ = *t++);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:17:29.753

它在您的程序中引入了一个巨大的安全漏洞。在任何情况下都不要编写或使用这样的代码。

如果我们分解代码，我们会得到：

*   `*t++`读取 指向的字符`t`，并递增`t`; 表达式的值是读取的字符。
*   `*s++ = expression`将该字符写入 where`s`点，并递增`s`；表达式的值是写入的字符。
*   `while (expression);`只要表达式的值非零，就会一直循环；在这种情况下，直到我们写了一个值为零的字符。

所以该函数不断地从`t`to复制字符，`s`直到它到达一个零值字符。没有办法判断`s`指向是否足够大的数组来容纳这些，所以通常它会写到数组的末尾并导致未定义的行为；从没有不良影响的微妙行为到崩溃，再到执行恶意代码。

如果您事先知道（上限）将复制多少个字符，则只能调用此函数；如果您知道这一点，那么（通常）有比检查每个数据的值更有效的方法来复制数据。因此，您应该（几乎）永远不要使用这个函数，或者`strcpy`它所近似的 C 库函数 ( )。

这种使用零值字符来终止字符串是 C 语言中的常见习惯用法。`std::string`在 C++ 中，使用类来表示字符串通常更方便。在这种情况下，等效代码将是简单`s = t`的，它将安全地管理字符串的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T06:57:46.887

复制字符串，指针指向`t`内存，指针指向`s`。

* * *

`operator=`将返回分配的值。`t`应该指向一个 -`NULL`终止的字符串，并且`s`应该指向内存，足够大以存储该字符串。

因此，`while`当被击中时循环将停止`\0`，这是字符串的结尾，由 . 指向`t`。在此`while`循环中，所有字符（不同于`\0`）都`t`将被复制到`s`.

* * *

稍微扩展一下，和下面的一样：

```
while( *t != '\0' ) // while the current char is not NULL
{
    *s = *t; // copy it into s
    ++s; // increment s, to point to the next byte
    ++t; // increment t, to point to the next char, that will be copied
}
*s = *t; // copy the last char of t - the '\0' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T06:58:22.677

它将以 null 结尾的字符串复制`t`到`s`. 语义为`strcpy`.

# solr - 是否有必要在 solr doc 中有唯一字段？请帮助修复我的 solr 设计

> ID：12191459
> 
> 赞同：1
> 
> 时间：2012-08-30T06:57:09.383
> 
> 标签：solr

我有一个单核 solr 实例正在运行。我想存储两种不同类型的文档。

1.  用户的基本配置文件。（字段：uid：“1”，docType="profile"..）
2.  每个用户拥有的汽车。(字段 uid:"1", docType="cars"...)

1 每个用户将有一个文档。2 将为每个用户提供多个文档（每个单独的汽车）。

由于某些设计原因，我不想要汽车的多值字段。我需要为每个用户提供 1 辆车的多个文档。

如果我将 uid 声明为模式中的唯一字段，那么我稍后添加的汽车文档将覆盖该用户的我的个人资料文档，甚至是来自同一用户的其他汽车文档，因为之前添加的 uid 是相同的。我怎样才能实现我想要的（即每个用户 1 个个人资料文档和每个用户多个汽车文档）

我刚刚开始研究 solr，所以这个 cud 非常基本，所以请原谅我。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:50:50.993

您可以通过将通用唯一标识符添加到 schema.xml 来解决此问题。

在 schema.xml 文件中添加以下字段类型。

```
<fieldType name="uuid" class="solr.UUIDField" indexed="true" /> 
```

然后添加此类型的新字段。

```
<field name="id" type="uuid" indexed="true" stored="true" default="NEW" /> 
```

最后，使用此字段定义您的 uniqueId 键。

```
<uniqueKey>id</uniqueKey> 
```

有关更多信息，请查看[Solr wiki 中的 UniqueKey 页面](http://wiki.apache.org/solr/UniqueKey)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:46:05.827

建议有一个独特的字段，以便更好地维护文档。

Solr 基于唯一 ID 维护文档。如果您插入具有相同现有 ID 的文档，Solr 将覆盖前一个。

在您的示例中，对个人资料和汽车使用相同的 uid 不是一个好的解决方案。只让其中一个使用该 uid。例如，仅将 uid 分配给用户并使其唯一。

```
<uniqueKey>uid</uniqueKey> 
```

现在给汽车不同的ID。

您可能还想使用多值字段。例如，

```
 <field name="user" type="string" indexed="true" stored="true"/>
 <field name="cars" type="string" indexed="true" stored="true" multiValued="true"/> 
```

你可以有这样的文档：

```
<doc>
  <field name="uid">UserID</field>
  <field name="name">User Name</field>
  <field name="cars">Car 1</field>
  <field name="cars">Car 2</field>
  <field name="cars">Car 3</field>
</doc> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:16:45.550

根据您将文档放入索引的方式，如果组合是唯一的，您可以创建一个人工键作为 uid 和 docType 的串联。使用 UUIDField 当然也是一个有效的选项，尽管你得到了无意义的键。

# executable - 字节码（如 Java 字节码）与文件和机器码可执行文件（如 ELF）有什么区别？

> ID：12191462
> 
> 赞同：5
> 
> 时间：2012-08-30T06:57:30.583
> 
> 标签：executable, bytecode, elf, machine-code, .class-file

字节码二进制可执行文件（如 Java 类文件、Parrot 字节码文件或 CLR 文件）与机器码可执行文件（如 ELF、Mach-O 和 PE）之间有什么区别。

两者之间的显着区别是什么？

比如ELF结构中的.text区域等于class文件的哪一部分？

或者它们都有标头，但 ELF 和 PE 标头包含体系结构，但类文件没有

Java 类文件 ![Java 类文件](../Images/086a6fe8aecfa7e5c89b25aed9c55a68.png)

精灵文件 ![精灵档案](../Images/4d47149e01fb76a9842421aeeca4beb2.png)

体育档案 ![体育档案](../Images/cdbccc090b297d392da3bdee338cecf4.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T22:45:10.537

正如 imulsion 所指出的，字节码是一个中间步骤，就在编译成机器码之前。因为最后一步是加载时间（通常是运行时，就像即时（JIT）编译一样，字节码是独立于架构的：运行时（.net 的 CLR 或 Java 的 JVM）负责将字节码操作码映射到它们的底层机器码表示。

相比之下，本机代码（Windows：PE、PE32+、OS X/iOS：Mach-O、Linux/Android/etc：ELF）是编译后的代码，适用于特定架构（Android/iOS：ARM，其他大多数：Intel 32位（i386）或 64 位）。这些都非常相似，但仍然需要部分（或者，用 Mach-O 的说法“加载命令”）来设置可执行文件的内存结构，因为它成为一个进程（旧 DOS 支持“.com”格式，这是一个原始内存映像）。在以上所有内容中，您可以粗略地说以下内容：

*   带有“.”的部分 由编译器创建，并且是“默认”或预期具有默认行为
    *   可执行文件有主代码部分，通常称为“text”或“.text”。这是本机代码，可以在特定架构上运行
    *   字符串存储在单独的部分中。这些用于硬编码输出（您打印的内容）以及符号名称。
    *   符号 - 链接器用来将可执行文件与其库（Windows：DLL、Linux/Android：共享对象、OS X/iOS：.dylibs 或框架）放在一起的符号存储在单独的部分中。通常还有一个“PLT”（过程链接表），它使编译器能够简单地将存根放入您调用的函数（printf、open 等），链接器可以在可执行文件加载时连接。
    *   导入表（在 Windows 用语中。在 ELF 中这是一个 DYNAMIC 部分，在 OS X 中这是一个 LC_LOAD_LIBRARY 命令）用于声明其他库。如果在加载可执行文件时未找到这些，则加载失败，您无法运行它。
    *   导出表（用于库/dylibs/etc）是库（或在 Windows 中，甚至是 .exe）可以导出以便其他人链接的符号。
    *   常量通常位于您所看到的“.rodata”中。

希望这可以帮助。真的，你的问题很模糊..

TG

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T07:01:44.017

字节码是一个“中途”步骤。所以Java编译器（javac）会把源代码转成字节码。机器代码是下一步，计算机获取字节代码，将其转换为机器代码（计算机可以读取），然后通过读取机器代码来执行您的程序。计算机不能直接读取源代码，同样编译器也不能立即翻译成机器代码。您需要一个中途步骤才能使程序正常工作。

# java - Ant 无法在 linux 上构建

> ID：12191468
> 
> 赞同：0
> 
> 时间：2012-08-30T06:58:09.280
> 
> 标签：java, linux, eclipse, ant, junit

我希望有人可以帮助我解决这个问题。我正在使用 Ant 脚本编译我的 java 代码，但出现以下错误：

```
[junitreport] Processing /home/sander/workspace/AntIntro/reports/junit/TESTS-TestSuites.xml to /tmp/null1570204945<br />
[junitreport] Loading stylesheet jar:file:/usr/share/eclipse/plugins/org.apache.ant_1.8.2.v20120109-1030/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl<br />
[junitreport] : Error! The first argument to the non-static Java function 'replace' is not a valid object reference.<br />
[junitreport] : Error! Cannot convert data-type 'void' to 'reference'.<br />
[junitreport] : Fatal Error! Could not compile stylesheet<br />
[junitreport] Failed to process /home/sander/workspace/AntIntro/reports/junit/TESTS-TestSuites.xml 
```

我正在使用：
- Eclipse 3.7.2
- OpenJDK 7
- Archlinux x64
- JUnit 4
- Ant 1.7.2

希望有人可以帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:12:48.667

见我之前的评论。这是一个已知问题，解决方法是将 apache-ant-1.8.3 与 JDK-7 或 apache-ant-1.8.2 与 JDK-6 一起使用。

# c# - C# RichTextBox 彩色文本

> ID：12191472
> 
> 赞同：4
> 
> 时间：2012-08-30T06:58:23.350
> 
> 标签：c#, winforms, richtextbox, textcolor

我有一个 RichTextBox，我想要其中的彩色文本。有标签选项吗？我想要这样的东西`[color:red]nick[/color] some message`。因为我需要将其另存为文本，并且我想在重新加载时也有彩色文本。

我可以在不编写自己的方法的情况下做这样的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T07:09:34.093

您可以使用 RichTextBox 为文本设置颜色[`SelectionColor`](http://msdn.microsoft.com/library/system.windows.forms.richtextbox.selectioncolor.aspx)

如果您想将 rtf 保存为纯文本，那么您将不得不查看 rtf [format](http://www.pindari.com/rtf1.html)。例子：

> {\rtf1\ansi\deff0 {\colortbl;\red0\green0\blue0;\red255\green0\blue0;} 此行为默认颜色\line \cf2 此行为红色\line \cf1 此行为默认颜色}

**编辑：**

从这个例子 - 首先你必须以`\colortbl`下列格式声明颜色表：

```
{\colortbl; color1; color2; ... ; colorN;} 
```

然后在文本中，您必须将文本括起来，`{\cfN YOUR_TEXT}`其中 N 是表格中的颜色数；您不能指定块 {} 的边界，那么 \cfN 之后的所有内容都将是一种颜色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T07:10:12.550

顾名思义，RichTextBox 包含 RichText

要使用“rtf specific-tags”更改 Rtf 文本，您可以设置/使用

[RichTextBox.RtfProperty](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.rtf)

还可以看看[RichTextBox.SelectionColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectioncolor.aspx)在代码中为文本模式着色

但是当你不想使用 rtf 时，你说

> 需要另存为文本。

您可以编写自己的“标记”，没有内置的期望 rtf/html？

但**rtf 是文本**- 根本

使用 RichTextBix.SelectionColor 为文本着色的示例

```
richTextBox1.Text = "Hello";
richTextBox1.Select(0,2);
richTextBox1.SelectionColor = Color.Red; 
```

将“Hello”的开头涂成红色，现在您可以访问 RichTextBox 的 RTFProperty 中的“taggeg”文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:04:48.063

如果您需要在 RTF 中如何编码的示例，您可以在 Word 或写字板中手动创建文档，并将其保存为 RTF。这将为您提供有关如何对格式进行编码的提示。此外，如果您正在创建帮助文档，您可以将它们作为嵌入式资源包含在内，并将它们直接加载到 RichTextBox 中，并包含所有格式。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-06T15:13:01.013

```
rtfMain.SaveFile(dlgSave.FileName); 
```

From Reference [Save text from rich text box with C#](https://stackoverflow.com/questions/3751929/save-text-from-rich-text-box-with-c-sharp)

# xml - 在 XML 文件中搜索文本

> ID：12191473
> 
> 赞同：0
> 
> 时间：2012-08-30T06:58:23.143
> 
> 标签：xml, search-engine, pentaho, kettle

我有许多 Kettle Transformation 保存的文件（保存在桌面中）。我需要做的是创建一个搜索页面，用户可以在其中输入任何文本。显示的结果是出现该特定类型字符串的所有可能的转换保存文件。

请注意，转换文件为 XML 格式。搜索字符串可以是 XML 文件可以包含的任何内容。我不知道如何开发此搜索？请帮帮我。

[我尝试使用 XPATH 读取 xml 文件（使用 Pentaho 数据集成工具），但缺少搜索连接。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:55:58.727

如果我正确理解了您想要的内容，请尝试：

1.  在**转换的属性中**定义一个**参数**“String4Search”。
2.  您采取“**从 XML 获取数据**”步骤。要获取所有 XML 文件，您应该将“**文件/目录**”设置为**桌面路径**，并设置通配符“ **.*.xml** ”，然后定义一个包含搜索字符串的字段（例如名为“found_string”），如果它出现在文件（XPath: **//*[contains(text(),"${String4Search}")]**）。您还应该选中复选框“**在输出中包含文件名**”并定义包含输入文件名称的字段的名称。
3.  在“从 XML 获取数据”步骤之后连接一个“**过滤行**”步骤，您可以**在那里过滤“found_string”字段为空的所有记录**。
4.  然后，您只需添加步骤以**选择**具有文件名的字段，并**删除重复项**，这就是您的结果。

每次**开始转换**时，都会**要求您设置**参数**“String4Search”**的值。因此，您只需将其设置为要在文件中找到的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:24:35.570

Kettle 不是搜索工具。最好的办法是对这些文件执行 grep 并重新读取结果。

如果您使用的是数据库存储库，那么您当然可以直接查询数据库，这样会好得多。

# c# - 我可以让 mvc 模型验证对不同的编辑器使用不同的错误 css 样式吗？

> ID：12191475
> 
> 赞同：3
> 
> 时间：2012-08-30T06:58:29.100
> 
> 标签：c#, css, asp.net-mvc-3, validation, razor

当我们使用 mvc 模型验证引擎时，它会自动将 Site.css 中的某些 css 类添加到编辑器中，由 HTML 辅助方法生成；即其中一个用于某些对象：

```
.field-validation-error
{
    color: #ff0000;
}

.field-validation-valid
{
    display: none;
}

.input-validation-error
{
    border: 1px solid #ff0000;
    background-color: #ffeeee;
}

.validation-summary-errors
{
    font-weight: bold;
    color: #ff0000;
}

.validation-summary-valid
{
    display: none;
} 
```

我们当然可以编辑这些样式以应用所需的样式。

但是有没有机会告诉模型验证引擎，根据任何用户要求使用什么确切的样式，以便我们可以拥有一个具有不同字段的页面，不同的样式？

**编辑**

假设我们有以下观点：

```
@model ModelValidation.Models.Appointment
@{
    ViewBag.Title = "Make a Booking";
}
<h2>
    Book an Appointment</h2>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <p>
        @Html.LabelFor(m => m.ClientName, "Your name: ") @Html.EditorFor(m => m.ClientName)
        @Html.ValidationMessageFor(m => m.ClientName)
    </p>        
    <p>
        @Html.LabelFor(m => m.Date, "Appointment Date: ") @Html.EditorFor(m => m.Date)
        @Html.ValidationMessageFor(m => m.Date)
    </p>
    <p>
        @Html.EditorFor(m => m.TermsAccepted) @Html.LabelFor(m => m.TermsAccepted, "I accept the terms & conditions")
        @Html.ValidationMessageFor(m => m.TermsAccepted, null, new { @class = "other-input-validation-error" })
    </p>
    <input type="submit" value="Make Booking" />
} 
```

通过`@Html.ValidationMessageFor`重载，我们可以指定 css 类来设置错误消息的样式。但是我们如何为编辑器指定 css 类呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:35:24.863

我确实在不耐烦地等待其他答案，但直到这就是我想出的。

`Html.TextBoxFor`像or等​​具体的辅助方法有必要的重载`Html.PasswordFor`。所以下面的例子展示了我想要的：

```
@using (Html.BeginForm())
{
    <p>
        @{ModelState state = ViewData.ModelState["ClientName"];            
        }
        @Html.LabelFor(m => m.ClientName, "Your name: ")
        @if (state != null && state.Errors.Count > 0)
        {
            @Html.TextBoxFor(m => m.ClientName, new { @class = "other-input-validation-error" })
        }
        else
        {
            @Html.EditorFor(m => m.ClientName)
        }
        @Html.ValidationMessageFor(m => m.ClientName)
    </p>        
} 
```

但我仍然对如何做到这一点的任何其他想法持开放态度。一般来说，我对asp很陌生，可能很容易错过（只是不知道）该技术的一些不错的功能。

**编辑**

正如*Sanderson S. Freeman A. - Pro ASP.NET MVC 3 Framework 第三版中所说*

> 如果我们还想提供额外的属性，我们不能使用模板化的帮助器来为属性生成编辑器，所以我们使用了 Html.TextBoxFor 帮助器，并使用了接受匿名类型的版本来用于 HTML 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:05:31.013

您始终可以使用包含在该特定页面中的另一个 css 文件来覆盖您的设置。要覆盖 MVC 生成的 CSS 的设置，您可以使用这样的容器 ID

```
#container .mvc_css_class
{
    display: none;

} 
```

另一种选择是使用元素名称来增加您自己的 css 的优先级，但通过指定不同的 ID 不起作用

```
div.mvc_css_class
{
    display: none;

} 
```

因此，如果您想为单个页面设置不同的样式，只需包含您的 css 文件并将该页面的容器 ID 设置为不同的值，新的 css 设置将根据容器覆盖。

编辑：要选择覆盖每个页面上的样式，必须在每个页面上使用单独的设置。首先以不同的方式命名表单容器 ID

```
<div id="container-homepage">
    ...... the form data with original settings ..
</div> 
```

在您的 css 文件中，使用 id 应用您想要的主页样式

```
#container-homepage .mv_generated_class{ 
    color : blue;
} 
```

对您希望看起来不同的所有页面和类重复相同的操作

# actionscript-3 - Flex 项目未执行

> ID：12191480
> 
> 赞同：0
> 
> 时间：2012-08-30T06:58:45.910
> 
> 标签：actionscript-3, flash, apache-flex

I'm using Flash Builder 4.5 and i've developed one web application in it, now if i try to run the project it is executing in flash player not in browser window, can anybody help how to run this application in web browser.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:03:54.403

右键单击您的项目转到属性，然后在左侧选择 Flex 编译器设置，在底部右侧选择生成 HTML 模板。

# git - 在 git 上删除远程分支时被拒绝

> ID：12191481
> 
> 赞同：4
> 
> 时间：2012-08-30T06:58:48.970
> 
> 标签：git, gerrit

尝试删除远程分支时，出现以下错误：

```
$ git push work :18300-018_5
remote: Processing changes: refs: 1, done
! [remote rejected] 18300-018_5 (can not delete references)
error: failed to push some refs  [...] 
```

任何想法这意味着什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T07:27:04.240

这看起来像一个 Gerrit 答案，如[函数 parseDelete()](http://code.google.com/p/gerrit/source/browse/gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java?spec=svn2719faf576a500220d707c06862022f6186aebb6&name=v2.2.2-rc0&r=2719faf576a500220d707c06862022f6186aebb6#567)所示。

```
 private void parseDelete(final ReceiveCommand cmd) {
    RefControl ctl = projectControl.controlForRef(cmd.getRefName());
    if (ctl.canDelete()) {
      // Let the core receive process handle it
    } else {
      reject(cmd, "can not delete references");
    }
  } 
```

这是指向[由 Gerrit 控制的推送策略](https://review.typo3.org/Documentation/access-control.html#category_push)的链接。

> 此类别控制如何允许用户将新提交上传到 Gerrit 中的项目。
> **拒绝删除现有分支。这是最安全的模式，因为提交不能被丢弃**。

因此，除非您在此 Gerrit 类别上激活“强制选项”，否则您将无法删除该服务器上的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:03:56.213

那是什么样的服务器？我猜这不是 GitHub，而是专门配置为禁止删除分支的自定义服务器。与您的系统管理员讨论此问题。

# javascript - 如何查找具有相同文件名的图像的数量？

> ID：12191482
> 
> 赞同：3
> 
> 时间：2012-08-30T06:58:56.167
> 
> 标签：javascript, jquery

你能帮我找到相同文件名的图像数量吗？

```
 var images =["Cat.png", "Cock.png","Dog.png","Parrot.png","Penguin.png",
              "Rabbit.png","Parrot.png"]; 
```

在这里，我在数组中有 7 个图像...我需要像 ..

```
 Cat:1   
               Parrot :2
               Penguin:1 
```

请给我建议

谢谢， 拉贾塞卡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:05:47.033

通常的解决方案是使用对象作为映射来建立键（文件名）和计数之间的链接：

```
var count = {};
for (var i=images.length; i-->0;) {
   var key = images[i].split(".")[0]; // this makes 'Parrot' from 'Parrot.png'
   if (count[key]) count[key]++;
   else count[key] = 1;
} 
```

然后你有，例如`count['Parrot'] == 2`

演示：http: [//jsfiddle.net/tS6gY/](http://jsfiddle.net/tS6gY/)

如果你执行 console.log(count)，你会在控制台上看到这个（在大多数浏览器上是 Ctrl+Uppercase+i）：

![在此处输入图像描述](../Images/6cc11fc539d0d05601d3d1f2740fd26f.png)

**根据评论中的要求编辑 i--> ：**

```
for (var i=images.length; i-->0;) { 
```

做的事情比

```
for (var i=0; i<images.length; i++) { 
```

但在其他方向上，并且只调用数组长度的一次（因此速度非常快，在这种情况下不是以明显的方式）。

当您需要计算很长的迭代长度并且您只想执行一次时，通常会使用此构造。

关于的意思`i--`，读到[这里](https://stackoverflow.com/questions/10436604/why-does-this-snippet-display-the-answer-as-6/10436646#10436646)。

`i-->0`可以读作：

*   递减我
*   检查减量前 i 的值是否严格为正（因此循环中使用的 i 为正或零）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:13:40.523

不确定效率，但这应该可以：

```
var images =["Cat.png", "Cock.png","Dog.png","Parrot.png","Penguin.png","Rabbit.png","Parrot.png"];

images.forEach(function(img){
    var count = 0;
    images.forEach(function(image, i){
        if(img === image){
            delete images[i];
            count++;
        }
    });
    console.log(img, count);          
}); 
```

[**演示**](http://jsfiddle.net/PkPMj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:09:56.820

您可以在数组中保留唯一键并使用另一个数组来计算频率：

```
var images =["Cat.png", "Cock.png","Dog.png","Parrot.png","Penguin.png","Rabbit.png","Parrot.png"]; 
var counts = [];
var keys = [];

for (i = 0; i < images.length; i++){
    if (!counts[images[i]]) {
        counts[images[i]] = 0;
        keys.push(images[i]);
    }
    counts[images[i]]++;
}

for (i = 0; i < keys.length; i++) alert(keys[i] + " : " + counts[keys[i]]);
​ 
```

这是一个演示：http: [//jsfiddle.net/e5zFC/1/](http://jsfiddle.net/e5zFC/1/)

# tsql - 从多个计数中获得总计

> ID：12191486
> 
> 赞同：0
> 
> 时间：2012-08-30T06:59:16.453
> 
> 标签：tsql

我只需要在下面添加每个计数的总计，这对我不起作用，我得到“关键字'SELECT'附近的语法不正确。”：

```
DECLARE @total int

SET @total = Count(some select statement)

@total = @total + Count(some select statement)
@total = @total + Count(some select statement)
@total = @total + Count(some select statement)
.. and so on

-- now return the grand total
select @total 
```

或者，如果您认为有更简单或更有效的方法来做到这一点，我也全神贯注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:20:26.277

```
declare @total int = 0

select @total += count(*) from (select 1 col1) a
select @total += count(*) from (select 1 col1) a
select @total += count(*) from (select 1 col1) a

select @total 
```

# jenkins - 如何从 Jenkins 捕获 Gerrit Repo 中的更改并根据更改构建项目？

> ID：12191490
> 
> 赞同：0
> 
> 时间：2012-08-30T06:59:26.037
> 
> 标签：jenkins, jenkins-plugins

我已经设置项目来使用 Gerrit Repo 从 Jenkins 构建基于 Gerrit 的 android ICS 源代码。它成功构建源。现在，我想在 Gerrit 的任何分支上对我的 Android 源代码进行一些更改。如何从 jenkins 检测到这些更改并为我在基于 gerrit 的 android 源中合并的每个更改自动触发构建，而无需任何手动干预？Gerrit Trigger 插件对它有用吗？，我在 Jenkins 测试连接中设置了 Gerrit Trigger 工作正常，但是当我对源代码进行一些更改时，构建没有被触发？请提供解决方案或任何其他选项以从 jenkins 捕获更改和构建源代码？谢谢，阿马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T07:02:04.030

我不确定我是否理解这个问题，但是如果您只是希望构建以获取对 git 存储库所做的更改，只需配置一个提交后挂钩或轮询存储库以获取间隔中的更改。

如果您的意思是想更改 gerrit 中的某些内容以进行新的提交，这可能就是您要寻找的内容：[Gerrit change-merged Hook](https://stackoverflow.com/questions/9336804/gerrit-change-merged-hook)

# sql-server-2008 - 自加入 insted of loop

> ID：12191491
> 
> 赞同：1
> 
> 时间：2012-08-30T06:59:33.343
> 
> 标签：sql-server-2008

我有一张如下表

```
DocNo       Account ExRate  Amount
65000071    5666    null    1000
65000072    5666    4.3     -290
65000073    5666    5.9     -290
65000074    5667    null    4500
65000075    5667    null    -500
65000076    5667    2.3     -500
65000077    5667    1.6     -500
65000078    5668    null    3450
65000079    5668    7.4     -453
65000080    5668    8.1     -453
65000081    5668    8.4     -453
65000082    5668    7.9     -453
 65000081   5669    8.4     -453
    65000082    5669    7.9     -453 
```

我需要应用汇率。只需要选择第一笔交易费用。下面是输出

```
DocNo   Account ExRate  Amount  
65000071    5666    null    1000    
65000072    5666    4.3    -1247    (-290*4.3)
65000073    5666    5.9    -1247    (-290*4.3)
65000074    5667    null    4500    
65000075    5667    null    -500    
65000076    5667    2.3     -500    
65000077    5667    1.6     -500    
65000078    5668    null    3450    
65000079    5668    7.4  -3352.2    (-453*7.4)
65000080    5668    8.1  -3352.2    (-453*7.4)
65000081    5668    8.4  -3352.2    (-453*7.4)
65000082    5668    7.9  -3352.2    (-453*7.4)
65000081     5669   8.4     -453
65000082    5669    7.9     -453 
```

为此，现在写我写的while循环。但这太过分了。我们可以使用连接来做到这一点吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:27:13.740

```
SELECT  tbl.DocNo, tbl.Account, tbl.ExRate,
        CASE WHEN tbl.Amount < 0 THEN (tbl.Amount * t.NewExRate)
            ELSE tbl.Amount END
        AS NewAmount
FROM table tbl
LEFT OUTER JOIN (
                SELECT  t1.Account,
                        CASE WHEN tMin.MaxAmount >= 0 THEN ISNULL(t1.ExRate,1)
                            ELSE 1 END
                        AS NewExRate
                FROM    table t1
                LEFT OUTER JOIN (SELECT t2.Account,MIN(t2.DocNo) AS MinDocNo,tMax.MaxAmount
                                FROm    table t2
                                LEFT OUTER JOIN (SELECT t3.Account,MAX(t3.Amount) AS MaxAmount
                                            FROm    table t3
                                            GROUP BY t3.Account)tMax
                                ON t2.Account = tMax.Account
                                WHERE   t2.Amount < 0
                                GROUP BY t2.Account, tMax.MaxAmount
                                ) tMin
                ON t1.Account = tMin.Account
                WHERE t1.DocNo = tMin.DocNo
                )t
ON tbl.Account = t.Account 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:12:04.360

```
select DocNo, t.Account as Account, t.ExRate as ExRate,
       case when Amount >= 0 then Amount
            else Amount * coalesce(t1.ExRate, 1)
       end as Amount
from MyTable as t
left outer join
     (select m.Account as Account, ExRate
      from MyTable as t
      join (select Account, min(DocNo) as MinDoc
            from MyTable
            where ExRate is not null and Amount < 0
            group by Account) as m
      on t.DocNo = m.MinDoc) as t1
on t.Account = t1.Account
order by DocNo 
```

# google-chrome - HTML 5 web SQL chrome 支持，我应该使用 webSQL 吗？

> ID：12191492
> 
> 赞同：0
> 
> 时间：2012-08-30T06:59:39.640
> 
> 标签：google-chrome, web-sql, indexeddb

在这里，我必须制作一个基于服务器的应用程序，它将在封闭的网络上运行并且特定于 chrome。我现在必须决定是应该使用 WebSQL（这肯定会节省我们的开发时间）还是应该使用 IndexedDB（我们对此知之甚少）。

我如何才能知道 chrome 会在功能版本中继续支持 WebSQL？或者我必须将我的客户限制在支持版本，这不利于长期的业务关系。

还请告诉我学习索引数据库的任何不错的教程或指南...

我无法理解 w3c 停止支持 webSQL 的原因。有人知道吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:29:39.737

自 2010 年 11 月 18 日起， WebSql 不再是[W3C 维护的标准](http://www.w3.org/TR/webdatabase/)

> 该文档位于 W3C 推荐轨道上，但规范工作已停止。规范陷入僵局：所有感兴趣的实现者都使用相同的 SQL 后端（Sqlite），但我们需要多个独立的实现来沿着标准化路径前进。

这是我维护[的 github](https://github.com/denimf/IndexedDbToDo)项目的链接，其中包含 IndexedDB 基本功能的示例，例如：创建数据库、插入、检索、更新和删除数据。我刚刚更新了它以在最新版本的 Chrome 和 Firefox 中工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:42:43.207

实际上，IndexedDB 会在您继续前进时节省您的时间。通过版本控制更改版本非常容易。

对于教程，我真的推荐我自己的[http://dev.yathit.com/ydn-db/starting/query.html](http://dev.yathit.com/ydn-db/starting/query.html)是教程 javascript indexeddb 包装器，但是你可以很快理解和感受它。在 chrome、safari 和 firefox 上阅读，打开开发控制台并复制并粘贴代码片段，稍作更改。了解关键范围的重要性非常重要。关于密钥生成和过滤光标迭代有一些技巧。

我认为这是因为 WebSQL 查询结果与 JSON 非常不同。使用 NoSQL，如果我们只想持久化 JSON 对象，为什么还要定义 TABLE 是多么愚蠢。与 WebSQL 相比，IndexedDB 非常简单且重量非常轻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-10T18:52:34.233

我迟到了几年，但认为回答那些尚未直接回答的 OP 问题会有所帮助，并添加一些有用的建议:)。

> 我如何才能知道 chrome 会在功能版本中继续支持 WebSQL？

据我所知，没有办法确定给定的浏览器供应商何时会放弃对技术或 API 的支持。但是，供应商通常会在他们这样做之前一段时间（大约几个月或几年）通知开发人员。

> 我应该使用 webSQL 吗？

简而言之，没有。由于 Deni Spasovski 的回答，关于[弃用 WebSQL 的一切仍然存在](http://caniuse.com/#search=websql)。另一方面，IndexedDB[享有所有主要浏览器供应商的支持](http://caniuse.com/#search=indexeddb)。所以选择后者。

然而，我应该指出，两个数据库之间的决定并非必须做出的决定。可以简单地选择（或制作）一个库，该库利用客户端计算机上可用的任何数据库。

[BakedGoods](https://github.com/klawson88/Baked-Goods)与这里已经建议的此类库在几个方面有所不同；最相关的是，它允许明确指定要使用的存储类型，从而允许开发人员在决策过程中引入其他因素（例如性能特征）。

有了它，在支持的任何一种数据库类型中执行存储操作都是...

...为两种数据库类型指定适当的操作选项和等效配置：

```
//If the operation is a set(), and the referenced structures 
//don't exist, they will be created automatically.

var webSQLOptionsObj = {
    databaseName: "Example_DB",
    databaseDisplayName: "Example DB",
    databaseVersion: "",
    estimatedDatabaseSize: 1024 * 1024,
    tableData: {
        name: "Main",
        keyColumnName: "lastName",
        columnDefinitions: "(lastName TEXT PRIMARY KEY, firstName TEXT)"
    }, 
    tableIndexDataArray: [name: "First_Name_Index", columnNames: "(firstName)"]
};

var indexedDBOptionsObj = {
    databaseName: "Example_DB",
    databaseVersion: 1,
    objectStoreData: {
        name: "Main",
        keyPath: lastName,
        autoIncrement: false
    },
    objectStoreIndexDataArray: [
        {name: "First_Name_Index", keyPath: "firstName", unique: false, multiEntry: false}
    ],
};

var optionsObj = {
    conductDisjointly: false, 
    webSQL: webSQLOptionsObj, 
    indexedDB: indexedDBOptionsObj
}; 
```

...并进行操作：

```
bakedGoods.set({
    data: [
        {value: {lastName: "Obama", firstName: "Barack"}}, 
        {value: {lastName: "Biden", firstName: "Joe"}}
    ],
    storageTypes: ["indexedDB", "webSQL"],
    options: optionsObj,
    complete: function(byStorageTypeStoredItemRangeDataObj, byStorageTypeErrorObj){}
}); 
```

其简单的界面和无与伦比的存储设施支持是以缺乏对某些存储设施特定配置的支持为代价的。例如，它不支持在具有多列主键的 WebSQL 表中进行存储操作。

因此，如果您大量使用这些类型的功能，您可能想看看其他地方。

哦，为了完全透明，BakedGoods 确实由您维护 :)。

# visual-studio-2010 - 构建 MSI 文件（wix 项目）时，在文件名（OutputName）中包含 MajorVersion 等

> ID：12191502
> 
> 赞同：24
> 
> 时间：2012-08-30T07:00:02.377
> 
> 标签：visual-studio-2010, msbuild, wix, windows-installer

在我的 Defines.wxi 中，我有：

```
<?define MajorVersion="1" ?>
<?define MinorVersion="08" ?>
<?define BuildVersion="11" ?> 
```

在我的 MyProject.Setup.wixproj 我有：

```
<OutputName>MyProject</OutputName>
<OutputType>Package</OutputType> 
```

是否可以以某种方式在文件名中包含版本变量，以便我的文件可以命名为 MyProject.1.08.11.msi？

这不起作用（没有定义这样的变量）：

```
<OutputName>MyProject-$(MajorVersion)</OutputName>
<OutputType>Package</OutputType> 
```

这不起作用（没有定义这样的变量）：

```
<Target Name="AfterBuild" Condition="'$(Configuration)' == 'Release'">
    <Copy SourceFiles="$(OutputPath)$(OutputName).msi" DestinationFiles="C:\$(OutputName)-$(MajorVersion).msi" />
</Target> 
```

我似乎很清楚 $(MajorVersion) 不是从 Defines.wxi 文件中获取定义的正确方法。什么是？

* * *

**更新**

我试图把它放在 MyProject.Setup.wixproj 中：

```
<InstallerMajorVersion>7</InstallerMajorVersion>
<InstallerMinorVersion>7</InstallerMinorVersion>
<InstallerBuildNumber>7</InstallerBuildNumber> 
```

...

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    <OutputPath>bin\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
    <DefineConstants>PrebuildPath=..\..\obj\prebuild\web\;InstallerMajorVersion=$(InstallerMajorVersion);InstallerMinorVersion=$(InstallerMinorVersion);InstallerBuildNumber=$(InstallerBuildNumber)</DefineConstants>
</PropertyGroup> 
```

这在Defines.wxi中：

```
<?define MajorVersion="$(var.InstallerMajorVersion)" ?>
<?define MinorVersion="$(var.InstallerMinorVersion)" ?>
<?define BuildVersion="$(var.InstallerBuildNumber)" ?>
<?define Revision="0" ?>
<?define VersionNumber="$(var.InstallerMajorVersion).$(var.InstallerMinorVersion).$(var.InstallerBuildNumber)" ?> 
```

也没有用。收到以下错误消息：

*   Product/@Version 属性的值“..”不是有效版本。合法版本值应类似于“xxxx”，其中 x 是 0 到 65534 之间的整数。
*   未找到 Product/@Version 属性；这是必需的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T14:55:27.777

这就是我最终得到的，它有效！

**安装程序.版本.proj**

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <InstallerMajorVersion>55</InstallerMajorVersion>
        <InstallerMinorVersion>66</InstallerMinorVersion>
    <InstallerBuildVersion>$(BuildNumber)</InstallerBuildVersion>
        <InstallerBuildVersion Condition="$(InstallerBuildVersion) == ''">0</InstallerBuildVersion>
  </PropertyGroup>
</Project> 
```

**MyProject.Setup.wixproj**

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="Setup.Version.proj" />
  <PropertyGroup>
    <OutputName>MyProject_$(InstallerMajorVersion)_$(InstallerMinorVersion)_$(InstallerBuildVersion)</OutputName>
    <OutputType>Package</OutputType>
    <DefineConstants>InstallerMajorVersion=$(InstallerMajorVersion);InstallerMinorVersion=$(InstallerMinorVersion);InstallerBuildVersion=$(InstallerBuildVersion)</DefineConstants>
    ... 
```

**定义.wxi**

```
<?define MajorVersion="$(var.InstallerMajorVersion)" ?>
<?define MinorVersion="$(var.InstallerMinorVersion)" ?>
<?define BuildVersion="$(var.InstallerBuildVersion)" ?> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-17T08:38:18.520

在未来的 WiX 版本中应该简化这个常见的任务！

这个解决方案结合了@Wimmel 和[这篇文章](https://stackoverflow.com/questions/8400868/referencing-a-wixvariable-defined-in-a-wix-library-project-from-a-wix-setup-proj)。它从目标 .exe 中提取版本，否则不在文件中存储版本号；它不会在构建后重命名输出文件。但是，有必要更新属性 ProjectDefineConstants，从中派生蜡烛参数（在 wix.targets 中）。否则，仅更新 TargetPath 属性不会更改烛台.exe 的输入。

***.wi​​xproj：**

```
<Import Project="$(WixTargetsPath)" />
<Target Name="BeforeBuild">
  <!-- Read the version from the to-be-installed .exe -->
  <GetAssemblyIdentity AssemblyFiles="path.to.primary.exe">
    <Output TaskParameter="Assemblies" ItemName="AsmInfo" />
  </GetAssemblyIdentity>

  <!-- Create the MSBuild property $(VersionNumber) -->
  <CreateProperty Value="%(AsmInfo.Version)">
    <Output TaskParameter="Value" PropertyName="VersionNumber" />
  </CreateProperty>

  <!-- Create the WiX preprocessor variable $(var.VersionNumber) -->
  <CreateProperty Value="$(DefineConstants);VersionNumber=$(VersionNumber)">
    <Output TaskParameter="Value" PropertyName="DefineConstants" />
  </CreateProperty>

  <!-- Update the MSBuild properties $(TargetName), etc. -->
  <CreateProperty Value="$(SolutionName)-$(Platform)-$(VersionNumber)">
    <Output TaskParameter="Value" PropertyName="TargetName" />
  </CreateProperty>
  <CreateProperty Value="$(TargetName)$(TargetExt)">
    <Output TaskParameter="Value" PropertyName="TargetFileName" />
  </CreateProperty>
  <CreateProperty Value="$(TargetName)$(TargetPdbExt)">
    <Output TaskParameter="Value" PropertyName="TargetPdbName" />
  </CreateProperty>
  <CreateProperty Value="$(TargetDir)$(TargetFileName)">
    <Output TaskParameter="Value" PropertyName="TargetPath" />
  </CreateProperty>
  <CreateProperty Value="$(TargetPdbDir)$(TargetPdbName)">
    <Output TaskParameter="Value" PropertyName="TargetPdbPath" />
  </CreateProperty>

  <!-- Update the MSBuild property from which candle.exe args are derived -->
  <CreateProperty Value="
    Configuration=$(ConfigurationName);
    OutDir=$(OutDir);
    Platform=$(PlatformName);
    ProjectDir=$(ProjectDir);
    ProjectExt=$(ProjectExt);
    ProjectFileName=$(ProjectFileName);
    ProjectName=$(ProjectName);
    ProjectPath=$(ProjectPath);
    TargetDir=$(TargetDir);
    TargetExt=$(TargetExt);
    TargetFileName=$(TargetFileName);
    TargetName=$(TargetName);
    TargetPath=$(TargetPath);
  ">
    <Output TaskParameter="Value" PropertyName="ProjectDefineConstants" />
  </CreateProperty>
</Target> 
```

***.wxs**

```
<Product Id="*" Version="$(var.VersionNumber)" ... >
  ...
</Product> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-16T10:37:36.073

在您的 .wixproj 文件中。`</Project>`在标记之前添加以下部分。

```
<!-- rename the output msi with Version number -->
  <Target Name="AfterBuild">
    <GetAssemblyIdentity AssemblyFiles="[Path of the main assembly with the assembly version number you want to use]">
      <Output TaskParameter="Assemblies" ItemName="AssemblyVersion"/>
    </GetAssemblyIdentity>
    <Copy SourceFiles=".\bin\$(Configuration)\$(OutputName).msi" DestinationFiles=".\bin\$(Configuration)\$(OutputName)_%(AssemblyVersion.Version).msi" />
    <Delete Files=".\bin\$(Configuration)\$(OutputName).msi" />
  </Target> 
```

这对我有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-07T18:49:27.843

无法从 .wixproj 文件中读取 .wxi 文件。所以你必须使用另一种方式来指定版本。我可以举一个例子，我从安装程序中包含的程序集中读取版本，并使用该版本重命名 msi；

在编辑器中打开 .wixproj 文件并添加一个`ReadVersion`目标：

```
 <Target Name="ReadVersion">
    <GetAssemblyIdentity AssemblyFiles="bin\program.exe">
      <Output TaskParameter="Assemblies" ItemName="MyAssemblyIdentities" />
    </GetAssemblyIdentity>
    <Message Text="AssemblyVersion = %(MyAssemblyIdentities.Version)" />
    <CreateProperty Value="$(TargetName) %(MyAssemblyIdentities.Version)">
      <Output TaskParameter="Value" PropertyName="TargetName" />
    </CreateProperty>
    <CreateProperty Value="$(TargetName)$(TargetExt)">
      <Output TaskParameter="Value" PropertyName="TargetFileName" />
    </CreateProperty>
    <CreateProperty Value="$(OutDir)$(TargetFileName)">
      <Output TaskParameter="Value" PropertyName="TargetPath" />
    </CreateProperty>
  </Target> 
```

这将从 中读取版本`bin\program.exe`，将其显示以进行调试，并更改 TargetName、TargetFileName 和 TargetPath。

在包含 的行之后`<Import Project="$(WixTargetsPath)" />`，添加以下内容以将此目标注入到构建过程中：

```
 <PropertyGroup>
    <BuildDependsOn>ReadVersion;$(BuildDependsOn)</BuildDependsOn>
  </PropertyGroup> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-07T15:29:39.177

一种方法是在您的 MSBuild 脚本中定义变量，并让它在构建时更新 Defines.wxi，如[本例所示](https://web.archive.org/web/20140301225546/http://tranxcoder.wordpress.com/2008/07/03/a-custom-task-for-building-wix-under-msbuild-tfs/)。

在您的 MSBuild 脚本中，您可以按如下方式定义版本属性：

```
 <PropertyGroup>
    <MajorVersion>1</MajorVersion>
    <MinorVersion>08</MinorVersion>
    <BuildVersion>11</BuildVersion>
    <WixConfigPath>.\Defines.wxi</WixConfigPath>

    <_VariableDefinitions>
      <Root>
        <VariableDefinition Name="MajorVersion" NewValue="$(MajorVersion)" />
        <VariableDefinition Name="MinorVersion" NewValue="$(MinorVersion)" />
        <VariableDefinition Name="BuildVersion" NewValue="$(BuildVersion)" />
      </Root>
    </_VariableDefinitions>
  </PropertyGroup>

  <Target Name="UpdateWixVars">
    <WixVarSubstitution SourceFile="$(WixConfigPath)" VariableDefinitions="$(_VariableDefinitions)"/>
  </Target> 
```

然后运行 ​​UpdateWixVars 目标将使用 MSBuild 项目中指定的版本号更新 Defines.wxi 中的版本号。

请注意，我无法使用此自定义构建任务找到实际编译的 dll，因此我必须通过以下方式创建它：

1.  [从这里](http://www.hempel.cx/Misc/WixVarSubstitution.cs)下载源代码。构建它并将文件命名为 Tranxition.BuildTasks.dll。
2.  添加对构建任务的引用，如下所示：

    ```
    <UsingTask TaskName="WixVarSubstitution"
         AssemblyFile="$(MSBuildExtensionsPath)\Tranxition\Tranxition.BuildTasks.dll"/> 
    ```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-02T19:04:50.190

您可以通过实现以下两个答案来无缝完成此任务：

*   首先，更新您的项目`AfterBuild`任务以重命名 WIX 构建的 MSI：[https ://stackoverflow.com/a/10716409/374198](https://stackoverflow.com/a/10716409/374198)
*   然后，更新您的 WIX 项目以自动使用您正在打包的程序集的版本号：[https ://stackoverflow.com/a/641094/374198](https://stackoverflow.com/a/641094/374198)

其他答案太复杂了！

PS：如果你想去掉第四位，按照语义版本控制，你可以这样做：

```
<Target Name="AfterBuild">
    <GetAssemblyIdentity AssemblyFiles="..\Path\To\MyProject\bin\$(Platform)\$(Configuration)\MyProject.dll">
        <Output TaskParameter="Assemblies" ItemName="AssemblyInfo" />
    </GetAssemblyIdentity>
    <PropertyGroup>
        <In>%(AssemblyInfo.Version)</In>
        <Pattern>^(\d+.\d+.\d+)</Pattern>
        <AssemblyVersion>$([System.Text.RegularExpressions.Regex]::Match($(In), $(Pattern)))</AssemblyVersion>
    </PropertyGroup>
    <Move SourceFiles="bin\$(Platform)\$(Configuration)\MyProject.msi" DestinationFiles="bin\$(Platform)\$(Configuration)\CodeGenerator-$(AssemblyVersion).$(Platform).msi" />
</Target> 
```

这将创建一个名为的 MSI，例如`MyProject-1.2.3.x64.msi`. 有关更多信息，请参阅[此答案](https://stackoverflow.com/a/18889431/374198)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-24T06:15:27.863

这是 wixproj 文件的完整示例，您可以在其中设置 UI 中的版本号并使用它来修改输出 msi 文件名。

在 Visual Studio（例如 2015）中：

*   在项目属性窗口的“定义预处理器变量”中定义版本号。我在这个例子中输入了 VersionNumber=1.14；
*   在解决方案资源管理器中卸载您的项目；
*   在解决方案资源管理器中右键单击您的项目，然后选择编辑 yourproject.wixproj 文件；
*   在 Target Name="BeforeBuild" 元素中添加代码，如下所示。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <Project ToolsVersion="4.0" DefaultTargets="Build" InitialTargets="EnsureWixToolsetInstalled" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
      <PropertyGroup>
        <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
        <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
        <ProductVersion>3.10</ProductVersion>
        <ProjectGuid>PROJECT-GUID</ProjectGuid>
        <SchemaVersion>2.0</SchemaVersion>
        <OutputName>my project</OutputName>
        <OutputType>Package</OutputType>
      </PropertyGroup>
      <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
        <OutputPath>bin\$(Configuration)\</OutputPath>
        <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
        <!-- These constants can be set in the UI -->
        <DefineConstants>VersionNumber=1.14</DefineConstants>
      </PropertyGroup>
      <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
        <OutputPath>bin\$(Configuration)\</OutputPath>
        <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
        <DefineConstants>VersionNumber=1.14</DefineConstants>
      </PropertyGroup>
      <ItemGroup>
        <Compile Include="Product.wxs" />
      </ItemGroup>
      <ItemGroup>
        <WixExtension Include="WixUIExtension">
          <HintPath>$(WixExtDir)\WixUIExtension.dll</HintPath>
          <Name>WixUIExtension</Name>
        </WixExtension>
      </ItemGroup>
      <Import Project="$(WixTargetsPath)" Condition=" '$(WixTargetsPath)' != '' " />
      <Import Project="$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets" Condition=" '$(WixTargetsPath)' == '' AND Exists('$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets') " />

      <Target Name="BeforeBuild">
        <!-- This extracts the version number from a setting in the UI -->
        <!-- This method comes from: geekswithblogs.net/alexhildyard/archive/2013/03/09/passing-data-between-msbuild-and-wix.aspx -->
        <ItemGroup>
          <DefineConstantsKVPairs Include="$(DefineConstants)" />
        </ItemGroup>
        <!-- Evaluate each key/value pair with task batching, then make a conditional assignment -->
        <PropertyGroup>
          <VersionNumber Condition="$([System.String]::new('%(DefineConstantsKVPairs.Identity)').Contains('VersionNumber='))">$([System.String]::new('%(DefineConstantsKVPairs.Identity)').Split('=')[1])</VersionNumber>
        </PropertyGroup>

        <CreateProperty Value="$(OutputName)-$(VersionNumber)">
          <Output TaskParameter="Value" PropertyName="TargetName" />
        </CreateProperty>
        <CreateProperty Value="$(TargetName)$(TargetExt)">
          <Output TaskParameter="Value" PropertyName="TargetFileName" />
        </CreateProperty>
        <CreateProperty Value="$(TargetDir)$(TargetFileName)">
          <Output TaskParameter="Value" PropertyName="TargetPath" />
        </CreateProperty>
      </Target>
    </Project> 
    ```

# sql - 无法执行查询分组

> ID：12191506
> 
> 赞同：1
> 
> 时间：2012-08-30T07:00:14.143
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我想水平旋转我的桌子 -

表格如下：

Master_Choicecode

```
ChoiceCode      MainCourseId    CourseLevelId    InstituteId 
```

Master_MainCourse

```
MainCourseId     MainCourseName   CourseLevelId   CourseProgram
   11                x                1             abc
   12                y                2             xyz 
```

Master_CourseLevel

```
CourseLevelId    CourseLevelName     
   1                deg
   2                Dip 
```

硕士_研究所

```
Instituteid     InstituteName    Statusid
    1001           Insti1          100
    1002           Insti2          200 
```

Master_InstituteStatus

```
StatusId   StatusName
  100            Status1
  200            Status2 
```

现在使用所有这些表我想展示这个：

```
CourseProgram   CourseLevelName  Status1(from Master_InstituteStatus)     Status2(from Master_InstituteStatus)    
    abc             Deg          Count of institutes belonging to status1  Count of institutes belonging to status2 
```

现在这是我尝试过的：

```
SELECT B.CourseProgram,C.CourseLevelName,
case when E.InstituteStatusName =' Status1' then COUNT(*) else null end as     Status1,
case when E.InstituteStatusName =' Status2' then COUNT(*) else null  end as  Status2,
FROM Master_ChoiceCode A 
inner join Master_MainCourse B on A.MainCourseID=B.MainCourseID
inner join Master_CourseLevel C on A.CourseLevelID=C.CourseLevelID  
inner join  Master_Institute D on A.InstituteID=D.InstituteID
inner join Master_InstituteStatus1 E on D.InstituteStatusID1=E.InstituteStatusID
where B.CourseLevelID IN(1,2)
GROUP BY B.CourseProgram,A.CourseLevelID,C.CourseLevelName,E.InstituteStatusName
order by B.CourseProgram,C.CourseLevelName; 
```

但是有了这个我得到这样的输出：

```
CourseProgram   CourseLevelName  Status1(from Master_InstituteStatus)     Status2(from Master_InstituteStatus)    
    abc             Deg          Count of institutes belonging to status1  
    abc             Deg                      Null                              Count of institutes belonging to status1 
```

我得到的解决方案是使用枢轴...但我不知道如何在当前查询中使用枢轴。请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:07:40.960

您已经接近了，但是分组`E.InstituteStatusName`意味着您将无法将数据组合到一行中。您可以使用条件总和，而不是使用`case`带有 a 的语句。`count`

```
SELECT B.CourseProgram,C.CourseLevelName,
sum(case when E.InstituteStatusName =' Status1' then 1 else 0 end) as     Status1,
sum(case when E.InstituteStatusName =' Status2' then 1 else 0 end) as  Status2,
FROM Master_ChoiceCode A 
inner join Master_MainCourse B on A.MainCourseID=B.MainCourseID
inner join Master_CourseLevel C on A.CourseLevelID=C.CourseLevelID  
inner join  Master_Institute D on A.InstituteID=D.InstituteID
inner join Master_InstituteStatus1 E on D.InstituteStatusID1=E.InstituteStatusID
where B.CourseLevelID IN(1,2)
GROUP BY B.CourseProgram,A.CourseLevelID,C.CourseLevelName
order by B.CourseProgram,C.CourseLevelName; 
```

这将有效地计算与该状态匹配的行，而无需对该字段进行分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:58:17.003

您可以在 SQL-Server 中使用内置的 PIVOT 函数：

```
WITH CTE AS
(   SELECT  B.CourseProgram,
            C.CourseLevelName, 
            E.InstituteStatusName,
            b.CourseLevelID
    FROM    Master_ChoiceCode A 
            INNER JOIN Master_MainCourse B 
                ON A.MainCourseID=B.MainCourseID
            INNER JOIN Master_CourseLevel C 
                ON A.CourseLevelID=C.CourseLevelID  
            INNER JOIN  Master_Institute D 
                ON A.InstituteID=D.InstituteID
            INNER JOIN Master_InstituteStatus1 E 
                ON D.InstituteStatusID1=E.InstituteStatusID
    WHERE   B.CourseLevelID IN (1,2)
)
SELECT  CourseProgram, CourseLevelName, [Status1], [Status2]
FROM    CTE
        PIVOT
        (   COUNT(CourseLevelID)
            FOR InstituteStatusName IN ([Status1], [Status2])
        ) pvt

ORDER BY CourseProgram, CourseLevelName; 
```

# sql - 给每个sql查询输出一个标题

> ID：12191507
> 
> 赞同：11
> 
> 时间：2012-08-30T07:00:17.337
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个 sql 脚本，它不过是多个“选择”查询的组合，例如：

```
Select * from ABC
Select * from CD
Select * from EN 
```

现在当我执行它时，我用来获取输出

```
<output 1>
<output 2>
<output 3> 
```

要求：我需要为每个输出显示一些标题。

更清楚地说，我想要输出如下：

```
Heading for Output of SQL query 1  
 output 1  
Heading for Output of SQL query 2  
output 2  
Heading for Output of SQL query 3  
output 3 
```

数据库是 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T07:02:15.143

有很多方法可以实现这一目标。你到底需要这个做什么？

**1.**

```
SELECT 'ABC' As title
Select * from ABC

SELECT 'CD' As title
Select * from CD

SELECT 'ABC' As title
Select * from EN 
```

**2.**

```
Select 'ABC' As title, * from ABC
Select 'CD' As title, * from CD
Select 'EN' As title, * from EN 
```

**3.**

适用于**SQL Server**。不确定其他数据库

```
PRINT 'ABC'
Select * from ABC

PRINT 'CD'
Select * from CD

PRINT 'ABC'
Select * from EN 
```

# c++ - C++ - 应用于对象类的 sizeof 函数

> ID：12191510
> 
> 赞同：2
> 
> 时间：2012-08-30T07:00:26.307
> 
> 标签：c++

我收到了以下与以下相关的问题`sizeof()`：

```
class C
{
public:
    C();
    virtual ~C();

    unsigned char _member0 s[4];
    static long _member1 d;
}

int main()
{
    C vc;
    cout << sizeof(vc);
} 
```

有人可以解释`sizeof()`在这种情况下如何评估函数吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T07:07:28.737

The exact answer could vary from compiler to compiler so in strict sense the answer to your question is this is ***Implementation Defined***.
Considering this to be an interview Q(*saw your previous Q*), You should have pointed out the following points:

*   A compiler is allowed to add padding bytes to a structure/class,this might add to the size.
*   A compiler might add `vptr` to an class instance,this might add to the size.
*   The class members will occupy memory.
*   `static` members do not contribute towards the size of an class object because they do not belong to an instance of class but to the class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:04:34.840

它给出了vc的大小。vc 属于 C 类。C 类的每个对象都包含元数据（指向 vtable 的指针），因为 C 包含虚方法。此外，C 有一个数据字段（字符数组）。

因此 vc 的大小应该是指针的大小加上四个字节（加上填充，请参阅下面的评论，谢谢）。

d 不是 C 类对象的组成部分，因为它是静态的，因此不计算在内。

所以我们有：

```
------vc---------             ----vtable for C----           ----statics----
| ptr to vtable | ----------> | pointer to ~C    |           | C::d        |       
|---------------|             | ...              |           | ...         |
| char [4]      |             --------------------           ---------------
----------------- 
```

# c - 在C中提取整数（假设为32位整数）中的8个半字节的方法是什么？

> ID：12191511
> 
> 赞同：1
> 
> 时间：2012-08-30T07:00:28.403
> 
> 标签：c, bitwise-operators, bit-shift

我正在尝试一个基本的哈希表程序..它是在一个整数中计算 1 的数量：

我有一个哈希表，它是一个包含 1 的数组`0,1,2...E,F`

```
HashTable:
0   0
1   1
2   1
3   2
4   1
5   1
6   2
7   3
8   1
9   2
A   2
B   3
C   2
D   3
E   3
F   4 
```

现在，我想从整数中提取 8 个半字节，以便我可以`arr[nibble-value]`用来获取每个半字节中 1 的数量。

```
int arr[16] = {0,1,1,2,1,1,2,3,1,2,2,3,2,3,3,4};

int main (void)  
{
    int x = 127;
    int temp, sum =0, i;
    int nibbles = 2 * sizeof(x);
    for (i = 1; i<= nibbles; i++) 
    {
        temp = x << (4*i);   //  <<< I Know this is wrong!!!! <<Here is what I need!!>>
        printf("Temp[%d]:%d\n", i, temp);
        sum = sum + arr[temp];
    }
    printf("No.of ones: %d\n", sum);
    return 0;
} 
```

可能是一个简单的逻辑...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:12:13.333

请记住，第一位编号为零，第一个半字节也是如此，就像数组索引一样。因此，通过从`1`你开始循环实际上从*第二个*半字节开始，并从整数*之外*获取最后一个半字节。

此外，您朝错误的方向移动，并且应该掩盖最高位，即

```
for (i = 0; i< nibbles; i++) 
{
    temp = (x >> (4 * i)) & 0x0f;
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:12:39.193

更改如下：`temp = 0xF & (x >> i*4);`

```
#include <stdio.h>

int arr[16] = {0,1,1,2,1,1,2,3,1,2,2,3,2,3,3,4};

int main (void)  
{
     int x = 127;
     int temp, sum =0, i;
     int nibbles = 2 * sizeof(x);
     for (i = 0; i<nibbles; i++) 
     {
         temp = 0xF & (x >> i*4); // I Know this is wrong!!!! <<Here is what I need!!>>
         printf("Temp[%d]:%d\n", i, temp);
         sum = sum + arr[temp];
     }
     printf("No.of ones: %d\n", sum);
     return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:14:44.270

有时，修改现有状态并在循环体中做更少（看似）工作会更容易：

```
for (i = 0; i < nibbles; i++, x >>= 4) 
{
    temp = x & 0xf;
    /* ... */
} 
```

上面的`x`内容在每次循环迭代时都会进行修改，因此要提取下一个半字节，我们只需要在每次迭代中获取四个最低有效位。这消除了半复杂的半字节掩码表达式，这可能被认为使代码更易于阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T07:24:03.633

我想你需要

```
for (i = 0; i<8; i++) 
{

     temp = (x>>(i*4)) & 0xF;
     printf("Temp[%d]:%d\n", i, temp);
     sum += arr[temp];
} 
```

# excel - 单元格中带有换行符的 CSV 字段以导入到 Excel

> ID：12191516
> 
> 赞同：1
> 
> 时间：2012-08-30T07:00:43.927
> 
> 标签：excel, csv, import

我在将 CSV 文件中的数据导入 Excel 时遇到问题。

我已经解析了来自网站的数据，并包含换行符`<br>`，我将此标签转换为`"\n"`并写入 CSV 文件。但是，当我将此 CSV 文件导入 Excel 时，换行符显示不正确。它将新行作为新行而不是单个单元格本身中的新行。有人遇到过这个问题吗？非常感谢您的建议。

谢谢！

`Edit`：这里的示例来演示我的情况

```
static void TestLine()
{
    string sampleData = "日찬양 까페에 올린 충격적인 <br>글코리아타임스";
    string formattedData = sampleData.Replace("<br>", "\n");
    using (StreamWriter writer = new StreamWriter(@"C:\SampleData.csv", false, Encoding.Unicode))
    {
        writer.WriteLine(formattedData);
    }
} 
```

我希望`sampleData`在一个单元格中显示，但是，结果发生在 2 个单元格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:20:23.923

请查看[CSV-1203 文件格式规范](http://mastpoint.curzonnassau.com/csv-1203)，特别是“*记录结束标记*”和“*字段有效负载保护*”部分。希望这应该为 CSV 文件格式的内部工作提供清晰的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:06:54.420

在我看来，它就像格式错误的 CSV 文件。要正确处理这种情况，您需要在引号中包含一个包含换行符的字段。

样本后更新：

这工作正常：

```
static void Main(string[] args)
{
    string sampleData = "\"日찬양 까페에 올린 충격적인 <br>글코리아타임스\"";
    string formattedData = sampleData.Replace("<br>", "\n");
    using (StreamWriter writer = new StreamWriter(@"C:\SampleData.csv", false, Encoding.Unicode))
    {
        writer.WriteLine(formattedData);
    }

} 
```

您需要将字段括在引号 (") 中

# javascript - javascript格式化日期格式

> ID：12191517
> 
> 赞同：2
> 
> 时间：2012-08-30T07:00:48.573
> 
> 标签：javascript, date, format

我有一个脚本，用于在某些日期中添加或减去天数。

例如，如果我的日期是 2012 年 8 月 10 日并且我做 +5 它应该返回 15/08/2012

如果我们是月底，它应该在下个月返回。

实际上这个脚本看起来不错，但问题是日期格式。它返回类似时间戳的东西，我真的不知道如何格式化它，因为 javascript 对我来说并不容易我试图找到在 php 中做类似的事情`date('d-m-y', strtotime($row['date'])` 但我没有找到 javascript 的等价物。

首先是我曾经拥有所有日期的代码。

```
<?php $jours=d ate( 'Y-m-d'); $sql="SELECT * FROM agenda WHERE n_doss='"
.mysql_real_escape_string($_GET[ 'n_doss']). "' AND qualite='".mysql_real_escape_string($_GET[
'qualite']). "' AND liasse='".$_GET[ 'liasse']. "'"; $qry=m ysql_query($sql) or
die(__LINE__.mysql_error().$sql); $i=- 1; // index des enregistrements
?>
    <form action="<?php echo (isset($_POST['go'])) ? 'go2.php' : '#'; ?>"
    method="post">
        <input type="hidden" name="liasse" value="<?php echo $_GET['liasse']; ?>"
        />
        <input type="hidden" name="n_doss" value="<?php echo $_GET['n_doss']; ?>"
        />
        <table id="box-table-a">
            <tr>
                <th scope="col">
                    <input name="data[<?php echo ++$i; ?>][code_s]" type="text" value="CODE S"
                    size="10">
                </th>
                <th scope="col">
                    <input name="data[<?php echo $i; ?>][libelle]" type="text" value="LIBELLE"
                    size="30">
                </th>
                <th scope="col">
                    <input name="data[<?php echo $i; ?>][action]" type="text" value="ACTION"
                    size="15">
                </th>
                <th scope="col">
                    <input name="data[<?php echo $i; ?>][libelle]" type="text" value="DESCRIPTION"
                    size="40">
                </th>
                <th scope="col">
                    <input type="text" name="data[<?php echo $i; ?>][date]" value="DATE D'ACTION"
                    size="12">
                </th>
                <th scope="col">
                    <input type="text" name="data[<?php echo $i; ?>][date]" value="VALIDATION"
                    size="12">
                </th>
                <th scope="col"><strong>ETAT</strong>
                </th>
            </tr>
            <?php while($row=m ysql_fetch_assoc($qry)): ?>
                <tr>
                    <td>
                        <input name="data[<?php echo ++$i; ?>][code_s]" type="text" value="<?php echo $row['code_s'];?>"
                        size="10">
                    </td>
                    <td>
                        <input name="data[<?php echo $i; ?>][libelle]" type="text" value="<?php echo $row['libelle']; ?>"
                        size="30">
                    </td>
                    <td>
                        <input name="data[<?php echo $i; ?>][action]" type="text" value="<?php echo $row['action']; ?>"
                        size="15">
                    </td>
                    <td>
                        <input name="data[<?php echo $i; ?>][libelle]" type="text" value="<?php echo $row['description']; ?>"
                        size="40">
                    </td>
                    <td>
                        <input type="text" name="data[<?php echo $i; ?>][date]" class="date" id="date<?php echo $i; ?>"
                        value="<?php 

echo date('d-m-Y',strtotime($row['date_action'])) ;

 ?>" size="12">
                    </td>
                    <td nowrap>
                        <input type="text" name="data[<?php echo $i; ?>][date_validation]" id="data[<?php echo $i; ?>][date_validation]"
                        value="<?php if($row['date_validation']=='0000-00-00') {echo 'Non trait&eacute;' ; }
 else {
echo (date('d-m-Y',strtotime($row['date_validation']))); }
 ?>" size="12">
                    </td>
                    <td nowrap>
                        <?php if($row[ 'date_validation']=='0000-00-00' AND strtotime($row[
                        'date_action'])>strtotime(date('Y-m-d'))) {?><a href="edit-action.php?id=<?php echo $row['id'] ; ?>&n_doss=<?php echo $row['n_doss'] ; ?>&liasse=<?php echo $_GET['liasse'] ?>&qualite=<?php echo $_GET['qualite'] ?>"><img src="images/gtk-edit.png" width="24" height="24"></a> 
                            <a
                            href="validate-action.php?id=<?php echo $row['id'] ; ?>&n_doss=<?php echo $row['n_doss'] ; ?>&liasse=<?php echo $_GET['liasse'] ?>&qualite=<?php echo $_GET['qualite'] ?>">
                                <img src="images/go.gif" width="24" height="24">
                                </a> <a href="delete-action.php?id=<?php echo $row['id'] ; ?>&n_doss=<?php echo $row['n_doss'] ; ?>&liasse=<?php echo $_GET['liasse'] ?>"
                                onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a>
                                <?php
                                } elseif($row[ 'date_validation']=='0000-00-00' AND strtotime($row[
                                'date_action'])<=strtotime(date( 'Y-m-d'))) {?><a href="#" onClick="return confirm('Vous ne pouvez pas &eacute;diter ou changer la date d\'une action appartenant à votre passif !')"><img src="images/gtk-edit.png" width="24" height="24"></a> 
                                    <a
                                    href="validate-action.php?id=<?php echo $row['id'] ; ?>&n_doss=<?php echo $row['n_doss'] ; ?>&liasse=<?php echo $_GET['liasse'] ?>&qualite=<?php echo $_GET['qualite'] ?>">
                                        <img src="images/go.gif" width="24" height="24">
                                        </a> <a href="#" onClick="return confirm('Vous ne pouvez pas supprimer une action appartenant à votre passif !')"><img src="images/trash-paper.png" width="24" height="24"></a>
                                        <?php
                                        } else { ?>
                                            <img src="images/tick_48.png" width="24" height="24">
                                            <?php } ?>
                    </td>
                </tr>
                <?php endwhile; ?>
                    </td>
                    </tr>
        </table> 
```

这是我用于添加天数的表格（用于减去天数的表格没有完成，因为我在添加天数的功能上遇到了一些问题。

```
<table width="50%">
    <tr>
        <td>
            <div class="info"> <strong>Décalage des date </strong>

                <table width="150" border="0" cellspacing="0"
                cellpadding="0">
                    <tr>
                        <td align="center" bgcolor="#FFFF99">
                            <input type="image" src="images/minus_remove_green.png" width="22" height="22"
                            name="submit" value="moins" />
                            <input name="jours" type="text" value="" size="5" id="nb" />
                            <input type="image" src="images/plus_add_green.png" width="22" height="22"
                            onClick="addday()" />
                        </td>
                    </tr>
                </table>Ajouter une action <a href="add-action.php?n_doss=<?php echo $_GET['n_doss'] ; ?>&liasse=<?php echo $_GET['liasse'] ?>&amp;qualite=<?php echo $_GET['qualite'] ; ?>"><img src="images/plus.png" width="24" height="24" border="0"></a>

            </div>
        </td>
    </tr>
</table> 
```

最后，我完成了这个 javascript：

```
<script type="text/javascript">
    function addday() {
        var items = new Array();
        var itemCount = document.getElementsByClassName("date");

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
        }

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
            var itemDtParts = items[i].split("-");
            var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
            nb = document.getElementById('nb').value;

        var newDate = itemDt.getDate() + nb;
        itemDt.setDate(newDate ) ;
        itemCount[i].value = itemDt;
        }

        return items;
    }
</script>​ 
```

问题是它没有返回好的日期，而是返回了一些奇怪的东西。

2013 年 4 月 29 日星期一 00:00:00 GMT+0200（巴黎，马德里（heure d'été））

我不知道如何返回像 dd-mm-yyyy 这样的格式

我真的迷路了。

我试图这样做来格式化 itemCount[i].value = itemDt.format("dd-mm-yyyy");

但它会返回错误，说这`date.format`对于数据对象或类似的东西是不可接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:28:49.107

如果你想用自定义格式返回一个漂亮的字符串，你可能会更好地手工完成：

*   用于**`.getDate()`**查找月份中的哪一天。
*   用于**`.getMonth()`**查找月份的编号。
*   用于**`.getFullYear()`**查找 4 位数字的年份。
*   将其全部添加到一个字符串中。

现在，您声明`itemDt = new Date(...)`了这很好，但是您需要做的就是这样：

```
itemDt.setDate(itemDt.getDate()+5) 
```

**Date 对象将自己处理月/年**。

您可以使用前面提到的函数来格式化您的字符串，如下所示：

```
return itemDt.getDate()+"/"+itemDt.getMonth()+"/"+itemDt.getFullYear() // 15/08/2012 
```

编辑：

上面的代码将返回`15/8/2012`没有零填充。

```
return (new Array(2 + 1 - itemDt.getDate().toString().length)).join('0') + itemDt.getDate() + "/" + (new Array(2 + 1 - itemDt.getMonth().toString().length)).join('0') + itemDt.getMonth() + "/" +itemDt.getFullYear();
// returns zero padded dates 09/07/2012 
```

# android - 'ID_GY' 未在此范围内声明

> ID：12191519
> 
> 赞同：0
> 
> 时间：2012-08-30T07:01:04.457
> 
> 标签：android, c++, header

我是一个完整的代码菜鸟，我正在尝试在我的 Android 设备上实现一个 HAL（特别是 BMA222 传感器）。

当我尝试此代码（BMA222.cpp）时：

```
#include <fcntl.h>
#include <errno.h>
#include <math.h>
#include <poll.h>
#include <unistd.h>
#include <dirent.h>
#include <sys/select.h>
#include <cutils/log.h>

#include "BMA222Sensor.h"

#define CONVERT                     (GRAVITY_EARTH / 256)
//#define CONVERT_GRAVITY_X           (CONVERT)
//#define CONVERT_GRAVITY_Y           (-1 * CONVERT)
//#define CONVERT_GRAVITY_Z           (-1 * CONVERT)
#define SENSOR_NAME                 "bma222"

/*****************************************************************************/

BMA222Sensor::BMA222Sensor()
    : SensorBase(NULL, SENSOR_NAME),
      mEnabled(0),
      mInputReader(4),
      mHasPendingEvent(false),
      mEnabledTime(0)
{
    mPendingEvent.version = sizeof(sensors_event_t);
    mPendingEvent.sensor = ID_GY;
    mPendingEvent.type = SENSOR_TYPE_ACCELEROMETER;
    memset(mPendingEvent.data, 0, sizeof(mPendingEvent.data));

    if (sensor_get_class_path() < 0)
        LOGD("Failed to get class path\n");
}

BMA222Sensor::~BMA222Sensor() {
    if (mEnabled) {
        enable(0, 0);
    }
}

int BMA222Sensor::enable(int32_t, int en) {
    int flags = en ? 1 : 0;
    char buf[2];
    int count = 0;;

    if (flags != mEnabled) {
            buf[1] = 0;
            if (flags) {
                buf[0] = '1';
                mEnabledTime = getTimestamp();
            } else {
                buf[0] = '0';
            }
        set_sysfs_input_attr(class_path, "enable", buf, 1);
            mEnabled = flags;
    }
    return 0;
}

bool BMA222Sensor::hasPendingEvents() const {
    return mHasPendingEvent;
}

int BMA222Sensor::setDelay(int32_t handle, int64_t delay_ns)
{
    char buf[80];
    int count = 0;;
    int64_t delay_ms = delay_ns / 1000000;

    count = sprintf(buf, "%lld", delay_ms);
    set_sysfs_input_attr(class_path, "delay", buf, count);

    return 0;
}

int BMA222Sensor::readEvents(sensors_event_t* data, int count)
{
    if (count < 1)
        return -EINVAL;

    if (mHasPendingEvent) {
        mHasPendingEvent = false;
        mPendingEvent.timestamp = getTimestamp();
        *data = mPendingEvent;
        return mEnabled ? 1 : 0;
    }

    ssize_t n = mInputReader.fill(data_fd);
    if (n < 0)
        return n;

    int numEventReceived = 0;
    input_event const* event;

    while (count && mInputReader.readEvent(&event)) {
        int type = event->type;
        if (type == EV_ABS) {
            float value = event->value;
            if (event->code == ABS_X) {
                //mPendingEvent.data[1] = value * CONVERT_GRAVITY_Y;
                mPendingEvent.data[0] = value * CONVERT;
            } else if (event->code == ABS_Y) {
                //mPendingEvent.data[0] = value * CONVERT_GRAVITY_X;
                mPendingEvent.data[1] = value * CONVERT;
            } else if (event->code == ABS_Z) {
                //mPendingEvent.data[2] = value * CONVERT_GRAVITY_Z;
                mPendingEvent.data[2] = value * CONVERT;
            }
        } else if (type == EV_SYN) {
            mPendingEvent.version = sizeof(sensors_event_t);
            mPendingEvent.sensor = ID_A;
            mPendingEvent.type = SENSOR_TYPE_ACCELEROMETER;
            mPendingEvent.timestamp = timevalToNano(event->time);
            *data++ = mPendingEvent;
            numEventReceived++;
            count--;
        } else {
            LOGE("BMA222Sensor: unknown event (type=%d, code=%d)",
                    type, event->code);
        }
        mInputReader.next();
    }

    return numEventReceived;
}

bool BMA222Sensor::isEnabled(int32_t handle) {
    return (0 != (mEnabled)) ? true : false;
}

int BMA222Sensor::sensor_get_class_path()
{
    char dirname[] = "/sys/class/input";
    char buf[256];
    int res;
    DIR *dir;
    struct dirent *de;
    int fd = -1;
    int found = 0;

    dir = opendir(dirname);
    if (dir == NULL)
        return -1;

    while((de = readdir(dir))) {
        if (strncmp(de->d_name, "input", strlen("input")) != 0) {
                continue;
        }

        sprintf(class_path, "%s/%s", dirname, de->d_name);
        snprintf(buf, sizeof(buf), "%s/name", class_path);

        fd = open(buf, O_RDONLY);
        if (fd < 0) {
                continue;
        }
        if ((res = read(fd, buf, sizeof(buf))) < 0) {
                close(fd);
                continue;
        }
        buf[res - 1] = '\0';
        if (strcmp(buf, SENSOR_NAME) == 0) {
                found = 1;
                close(fd);
                break;
        }

        close(fd);
        fd = -1;
    }
    closedir(dir);

    if (found) {
        return 0;
    }else {
        *class_path = '\0';
        return -1;
    }
}

int BMA222Sensor:: set_sysfs_input_attr(char *class_path,
                const char *attr, char *value, int len)
{
    char path[256];
    int fd;

    if (class_path == NULL || *class_path == '\0'
            || attr == NULL || value == NULL || len < 1) {
        return -EINVAL;
    }
    snprintf(path, sizeof(path), "%s/%s", class_path, attr);
    path[sizeof(path) - 1] = '\0';
    fd = open(path, O_RDWR);
    if (fd < 0) {
            return -errno;
    }
    if (write(fd, value, len) < 0) {
        close(fd);
        return -errno;
    }
    close(fd);
    return 0;
} 
```

而这个（BMA222Sensor.h）：

```
#ifndef ANDROID_BMA222_SENSOR_H
#define ANDROID_BMA222_SENSOR_H

#include <stdint.h>
#include <errno.h>
#include <sys/cdefs.h>
#include <sys/types.h>

#include "sensors.h"
#include "SensorBase.h"
#include "InputEventReader.h"

/*****************************************************************************/

struct input_event;

class BMA222Sensor : public SensorBase {
    int mEnabled;
    InputEventCircularReader mInputReader;
    sensors_event_t mPendingEvent;
    bool mHasPendingEvent;
    char input_sysfs_path[PATH_MAX];
    int input_sysfs_path_len;
    int64_t mEnabledTime;

    char class_path[256];
    int sensor_get_class_path();
    int set_sysfs_input_attr(char *class_path,
                             const char *attr, char *value, int len);
public:
            BMA222Sensor();
    virtual ~BMA222Sensor();
    virtual int readEvents(sensors_event_t* data, int count);
    virtual bool hasPendingEvents() const;
    virtual int setDelay(int32_t handle, int64_t ns);
    virtual int enable(int32_t handle, int enabled);
    virtual bool isEnabled(int32_t handle);     //rockie
};

/*****************************************************************************/

#endif  // ANDROID_BMA222_SENSOR_H 
```

我明白了（缩短）：

```
In constructor 'BMA222Sensor::BMA222Sensor()':
error: 'ID_GY' was not declared in this scope
make: *** [BMA222Sensor.o] Error 1 
```

我不明白我要去哪里错了，有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:21:27.630

不幸的是，我对只有 C++ 的 android 一无所知。我猜想 ID_GY 是一个标识传感器的整数值。定义它的一种方法是写

```
#define ID_GY 100 
```

就在你写的地方之后

```
#define SENSOR_NAME "bma222" 
```

100 的值是任意的，实际值可能无关紧要，但我很容易就错了。

# c# - 使用任务并行库时的线程数增长

> ID：12191520
> 
> 赞同：8
> 
> 时间：2012-08-30T07:01:05.480
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library, producer-consumer

我正在使用 C# TPL，但生产者/消费者代码有问题......出于某种原因，TPL 不会重用线程并不断创建新线程而不会停止

我做了一个简单的例子来演示这种行为：

```
class Program
{
    static BlockingCollection<int> m_Buffer = new BlockingCollection<int>(1);
    static CancellationTokenSource m_Cts = new CancellationTokenSource();

    static void Producer()
    {
        try
        {
            while (!m_Cts.IsCancellationRequested)
            {
                Console.WriteLine("Enqueuing job");
                m_Buffer.Add(0);
                Thread.Sleep(1000);
            }
        }
        finally
        {
            m_Buffer.CompleteAdding();
        }
    }

    static void Consumer()
    {
        Parallel.ForEach(m_Buffer.GetConsumingEnumerable(), Run);
    }

    static void Run(int i)
    {
        Console.WriteLine
            ("Job Processed\tThread: {0}\tProcess Thread Count: {1}",
              Thread.CurrentThread.ManagedThreadId, 
              Process.GetCurrentProcess().Threads.Count);
    }

    static void Main(string[] args)
    {
        Task producer = new Task(Producer);
        Task consumer = new Task(Consumer);
        producer.Start();
        consumer.Start();

        Console.ReadKey();
        m_Cts.Cancel();

        Task.WaitAll(producer, consumer);
    }
} 
```

此代码创建 2 个任务，生产者和消费者。Produces 每秒添加 1 个工作项，Consumer 只打印出一个带有信息的字符串。我会假设在这种情况下 1 个使用者线程就足够了，因为任务的处理速度比它们添加到队列中的速度要快得多，但实际发生的是进程中的每秒钟线程数增加 1... 好像TPL 正在为每个项目创建新线程

在试图了解发生了什么之后，我还注意到了另一件事：即使 BlockingCollection 的大小为 1，但一段时间后 Consumer 开始被突然调用，例如，它是这样开始的：

> 排队工作
> 
> 作业处理线程：4 处理线程数：9
> 
> 排队工作
> 
> 作业处理线程：6 处理线程数：9
> 
> 排队工作
> 
> 作业处理线程：5 处理线程数：10
> 
> 排队工作
> 
> 作业处理线程：4 处理线程数：10
> 
> 排队工作
> 
> 作业处理线程：6 处理线程数：11

这就是它在不到一分钟后处理项目的方式：

> 排队工作
> 
> 作业处理线程：25 处理线程数：52
> 
> 排队工作
> 
> 排队工作
> 
> 作业处理线程：5 处理线程数：54
> 
> 作业处理线程：5 处理线程数：54

并且因为线程在完成 Parallel.ForEach 循环后被释放（我没有在这个例子中展示它，但它是在真实的项目中）我认为它与 ForEach 具体有关......我找到了这篇文章[http： //reedcopsey.com/2010/01/26/parallelism-in-net-part-5-partitioning-of-work/](http://reedcopsey.com/2010/01/26/parallelism-in-net-part-5-partitioning-of-work/)，我认为我的问题是由这个默认分区器引起的，所以我从 TPL 示例中获取了自定义分区器那是一项一项地为消费者线程提供服务，尽管它固定了执行顺序（摆脱了延迟）...

> 排队工作
> 
> 作业处理线程：71 处理线程数：140
> 
> 排队工作
> 
> 作业处理线程：12 处理线程数：141
> 
> 排队工作
> 
> 作业处理线程：72 处理线程数：142
> 
> 排队工作
> 
> 作业处理线程：38 处理线程数：143
> 
> 排队工作
> 
> 作业处理线程：73 处理线程数：143
> 
> 排队工作
> 
> 作业处理线程：21 处理线程数：144
> 
> 排队工作
> 
> 作业处理线程：74 处理线程数：145

...它并没有阻止线程增长

我知道 ParallelOptions.MaxDegreeOfParallelism，但我仍然想了解 TPL 发生了什么以及为什么它会无缘无故地创建数百个线程

在我的项目中，我的代码必须运行数小时并从数据库中读取新数据，将其放入 BlockingCollections 并由其他代码处理数据，大约每 5 秒有 1 个新项目，它需要几毫秒到几乎一个分钟来处理它，运行大约 10 分钟后，线程数达到了 1000 多个线程

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T08:22:28.193

有两件事共同导致了这种行为：

1.  `ThreadPool`尝试根据您的情况使用最佳线程数。但是，如果池中的一个线程阻塞，池会认为该线程没有做任何有用的工作，因此它倾向于在此之后很快创建另一个线程。这意味着如果您有很多阻塞，`ThreadPool`那么在猜测最佳线程数方面真的很糟糕，并且它倾向于创建新线程直到达到限制。

2.  `Parallel.ForEach()`信任`ThreadPool`猜测正确的线程数，除非您明确设置最大线程数。`Parallel.ForEach()`也主要用于有界集合，而不是数据流。

当你将这两件事与 结合起来时`GetConsumingEnumerable()`，你得到的是`Parallel.ForEach()`创建几乎总是被阻塞的线程。看到这`ThreadPool`一点，为了尽量保持 CPU 的利用率，创建了越来越多的线程。

这里正确的解决方案是设置`MaxDegreeOfParallelism`. 如果您的计算受 CPU 限制，则最佳值很可能是[`Environment.ProcessorCount`](http://msdn.microsoft.com/en-us/library/system.environment.processorcount.aspx). 如果它们受 IO 限制，则必须通过实验找出最佳值。

如果您可以使用 .Net 4.5，另一种选择是使用 TPL 数据流。这个库是专门用来处理数据流的，就像你有的那样，所以它没有你的代码有的问题。它实际上甚至比这更好，并且在当前不处理任何内容时根本不使用任何线程。

注意：为每个新项目创建一个新线程还有一个很好的理由，但解释这需要我`Parallel.ForEach()`更详细地解释如何工作，我觉得这里没有必要。

# android - 为什么如果我在edittext中输入任何数据，而该数据未在android的那个edittext中打印？

> ID：12191522
> 
> 赞同：0
> 
> 时间：2012-08-30T07:01:10.153
> 
> 标签：android, android-emulator, android-edittext

我在edittext中做一个应用程序。我需要输入一些数据，例如名称，但是当我将数据输入到未显示的编辑文本中时。我在另一个系统中运行的同一个应用程序运行良好。但在某些系统中它不起作用。问题是什么？

我的代码：

```
<EditText android:id="@+id/editText1" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_marginTop="425dp"
    android:textSize="25dp" android:layout_marginLeft="290dp" android:ems="11">

    <requestFocus />
</EditText> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:35:27.937

你用的是什么主题？尝试更改 EditText 颜色。

```
 chdnm=(EditText)findViewById(R.id.editText1); 
chdnm.setTextColor(Color.WHITE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:07:21.420

你的代码没有意义。你有巨大的保证金价值。尝试这个：

```
<EditText
android:id="@+id/editText1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:textSize="18dp"> 
```

# jdbc - Modeshape JDBC 连接器：表之间的引用

> ID：12191524
> 
> 赞同：0
> 
> 时间：2012-08-30T07:01:32.860
> 
> 标签：jdbc, foreign-keys, modeshape

我将 Modeshape 与 jdbc-metadata-connector 一起使用。它将数据库结构获取到存储中。

但是我找不到任何方法来获取有关表之间的引用（外键）的信息：所有外键都有相应的 dbms 数据类型，并且没有额外的`REF`类型列。

如何获取有关数据库中外键的信息？

感谢您的任何帮助。祝你有美好的一天！

* * *

[Modeshape 的 JIRA 功能请求](https://issues.jboss.org/browse/MODE-1610)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:27:22.480

元数据连接器尚未提供外键关系。[随时在ModeShape 的 JIRA 系统](https://issues.jboss.org/browse/MODE)中记录功能请求。

# php - 警告：php 文件中的非法字符串偏移“参数”

> ID：12191528
> 
> 赞同：0
> 
> 时间：2012-08-30T07:01:50.707
> 
> 标签：php

此错误出现在 index.php 文件中

警告：非法字符串偏移 'id' 警告：非法字符串偏移 'std'

```
<?php
    global $options;
    foreach ($options as $value) {
        if (get_settings( $value['id'] ) === FALSE) {
            $$value['id'] = $value['std']; 
        } else {    
            $$value['id'] = get_settings( $value['id'] ); 
        }
    } 
```

尝试在 Wordpress 中加载新主题时出现此问题...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T07:07:38.160

对于以下两件事：

```
$value['id']
$value['std'] 
```

变量`$value`不是数组而是字符串。然后方括号是子字符串访问。因为字符串为空，您会收到错误消息。

演示：[http ://codepad.org/UDMtuO2x](http://codepad.org/UDMtuO2x)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:06:23.913

[] 比 $$ 绑定更强，即 php 首先计算`$value['id']`，然后将这个值用作变量变量的名称/标识符。
使用花括号更改优先级。

```
<?php
$array = array('id'=>123);
$value = 'array';
echo ${$value}['id']; 
```

打印`123`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:04:01.423

除非我们知道`$options`所持有的模式，否则很难说。尝试

`$value->id`代替`$value["id"]`

# javascript - jQueryUI 和 SlidesJS 冲突

> ID：12191532
> 
> 赞同：0
> 
> 时间：2012-08-30T07:02:01.170
> 
> 标签：javascript, jquery, jquery-ui, slideshow, conflict

我无法摆脱看似简单的冲突问题。我有一个页面，使用**jquery.1.8**、**jquery-ui.1.8.20**和一个非常不错的幻灯片和轮播插件，称为**SlidesJs** ( [http://slidesjs.com](http://slidesjs.com "幻灯片") )。

在同一页面中同时加载 jQueryUI 和 SlidesJs 会使 slidesJS 失去幻灯片过渡效果动画（从一张幻灯片移动到另一张幻灯片时）。一切正常，但这个。我的幻灯片在没有动画的情况下切换，无论如何滑动动画的速度保持不变（我的毫秒在幻灯片切换之前正确等待）。“淡入淡出”等其他过渡效果效果很好。我尝试添加 jquery.easing 插件（[http://gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/ "jQuery 缓动")）并明确使用一些缓动效果，但没有任何改变。

这是我对 SlidesJS 的初始化配置。

```
 $(function(){
    $('#slides').slides({
        preload: true,
        generateNextPrev: false, //Default is false
        container: 'slides_container', //Default is "slides_container"
        pagination: true, //if slider use pagination, Default is TRUE
        generatePagination: true,
        slideSpeed: 250,
        effect: 'slide, fade',              
        preloadImage: '../images/loading.gif',              
        play: 0,
    });
}); 
```

有同样问题的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:39:12.590

尝试删除图像周围的 div。

[http://slidesjs.com/#docs](http://slidesjs.com/#docs)

```
<div id="slides">
    <div class="slides_container">
        <img src="http://placehold.it/570x270">
        <img src="http://placehold.it/570x270">
        <img src="http://placehold.it/570x270">
        <img src="http://placehold.it/570x270">
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:47:58.213

打开 slides.jquery.js 找到第 98 行和第 99 行

寻找：

```
    位置=宽度*2；
    方向=-宽度*2；

```

```
Replace: 
```

```
    位置=选项.宽度*2；
    方向=-option.width*2；

```

# android - 列表视图中的内容数据

> ID：12191535
> 
> 赞同：0
> 
> 时间：2012-08-30T07:02:06.030
> 
> 标签：android, android-listview

我想获取列表视图内容的所有记录。我使用了 row.setonclicklistner 但前 3-4 项工作正常，下一项显示空指针异常。我该怎么办？我已经使用 (*) 指出了该特定行。

```
package com.example.tex.list;
public class tex extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_xutex);
    ListView lt=(ListView)findViewById(R.id.listView1);

    Databasequery db =  new Databasequery(this);
    db.open();
    List<Propertiess>test= db.getAllcards();
    lt.setAdapter(new myadatper(getApplicationContext(),R.layout.listlayoutdesign, test));

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_xutex, menu);
    return true;
}

 public class myadatper extends ArrayAdapter<Propertiess>
{
List<Propertiess> items;

LayoutInflater mInflater ; 

Context context;

int layoutResourceId; 
Propertiess p;

public myadatper(Context context, int layoutResourceId,
          List<Propertiess>items)
        {
       super(context, layoutResourceId, items);

        this.layoutResourceId=layoutResourceId;

        this.items = items;

        this.context=context;
         // TODO Auto-generated constructor stub
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent)
        {
         // TODO Auto-generated method stub
         //return super.getView(position, convertView, parent);

         View row = convertView;
         ViewHolder holder = new ViewHolder();

         if(row==null)
         {

          LayoutInflater inflater=getLayoutInflater();
          row=inflater.inflate(R.layout.listlayoutdesign, parent, false);        
          holder.name = (TextView) row.findViewById(R.id.TextView01);
          holder.address = (TextView) row.findViewById(R.id.TextView02);
          holder.designation=(TextView)row.findViewById(R.id.TextView03);
          holder.contactno=(TextView)row.findViewById(R.id.textView1);
          holder.Emailaddress=(TextView)row.findViewById(R.id.TextView04);
          holder.TapToadd=(ImageView)row.findViewById(R.id.imageView1);

          row.setTag(holder);

    row.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {       
                // TODO Auto-generated method stub

                ListView l3t=(ListView)findViewById(R.id.listView1);
                View view = l3t.getChildAt(position);
        Exception Point      ******************TextView t = (TextView)view.findViewById(R.id.TextView01);******************
                  TextView t2 = (TextView)view.findViewById(R.id.TextView02);
                 TextView t3=(TextView)view.findViewById(R.id.TextView03);
                 String data=t.getText().toString();
                Toast.makeText(getApplicationContext(), data, Toast.LENGTH_SHORT).show();

            }
        });

         }

         else
         {

                holder=(ViewHolder)row.getTag();

         }

                String name=items.get(position).getCompanyname();
                String contactno=items.get(position).getCompanycontactno();
                String address=items.get(position).getCompanyaddress();
                String designation=items.get(position).getCompanyempdesignation();
                String Emailaddress=items.get(position).getCompanyemailaddress();
                holder.name.setText(name);
                holder.contactno.setText(contactno);
                holder.designation.setText(designation);
                holder.address.setText(address);
                holder.Emailaddress.setText(Emailaddress);

                int Datacount=items.size();
                if(position==Datacount-1)
                {
                Toast.makeText(getApplicationContext(), Datacount+"", Toast.LENGTH_SHORT).show();
                holder.TapToadd.setBackgroundResource(R.drawable.taptoadd);
                }

                Toast.makeText(getApplicationContext(), position+"", Toast.LENGTH_SHORT).show();
                return row;

}

                  public class ViewHolder
                  {

                      TextView name;
                      TextView address;
                      TextView designation;
                      TextView contactno;
                      TextView Emailaddress;
                      ImageView TapToadd;
                      Object obj;

                  }
      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:17:20.397

当你想从你的 ListView 中提取数据时，你不能使用一行的 Views。这是因为视图在构建（和显示）ListView 的行时被回收。

你在一个**适配器类**中，它应该**处理 ListView 后面的数据**，所以使用它！

你应该更换你的

```
ListView l3t=(ListView)findViewById(R.id.listView1);
View view = l3t.getChildAt(position);
TextView t = (TextView)view.findViewById(R.id.TextView01);
TextView t2 = (TextView)view.findViewById(R.id.TextView02);
TextView t3=(TextView)view.findViewById(R.id.TextView03);
String data=t.getText().toString(); 
```

通过一个非常简单的方法：

```
String data = items.get(position).getCompanyname(); 
```

# libavcodec - sws_scale 的替代方案

> ID：12191540
> 
> 赞同：0
> 
> 时间：2012-08-30T07:02:24.493
> 
> 标签：libavcodec, color-space, libx264

我正在使用 libavcodec 使用 x264 对捕获的 Windows 屏幕进行编码。由于输入是 RGB，我将其转换为 YUV 以使其与 x264 兼容。我正在使用 sws_scale 函数。我的问题是这个功能是否有任何替代品，因为在我的情况下我不需要进行任何缩放。此外，如果有人可以阐明此功能的工作流程，那将很有用。

PS：我假设 x264 仅在 YUV 颜色空间中运行。如果这个假设不正确，请同样通知我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:30:18.980

我找不到 swscale 的替代方法，似乎除了快速双线性算法（用于缩放）之外，库中使用的所有其他算法都提供了相当可忽略的颜色偏移。
此外，在没有任何颜色偏移的情况下从 RGB 到 YUV 颜色空间在数学上是不可能的（由于方程中的近似值）。
PS：我无法使用 RGB 版本的 libx264 / libavcodec。如果您有关于如何实现以及如何在 Windows 上构建相应版本的详细信息，请发布相同的链接/信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:03:16.523

> PS：我假设 x264 仅在 YUV 颜色空间中运行。如果这个假设不正确，请同样通知我。

libx264 支持编码为 YUV 4:2:0/YUV 4:2:2/YUV 4:4:4/ 的 I420/YV12/NV12/I422/YV16/NV16/I444/YV24/BGR24/BGR32/RGB24 输入色彩空间RGB（应在参数中指定）。但是除了 YUV 4:2:0 之外的任何东西都需要解码器的支持，因为它们不是高配置文件的一部分，而是更新的配置文件（高 4:2:2 和高 4:4:4 配置文件）。

# udp - 使用 WinPCap 进行 UDP 接收

> ID：12191541
> 
> 赞同：1
> 
> 时间：2012-08-30T07:02:36.053
> 
> 标签：udp, winpcap

我想在我的 C++ 应用程序中使用 WinPCap 库进行“可靠”的 UDP 接收。我找到的所有示例都使用此库进行捕获然后处理。有什么方法（示例）如何将 PCap 配置为流模式并仅在用户定义的端口上接收 UDP 或如何解决此问题。在这个时候，我有可靠的 UDP 服务器能够接收 0.5Gb/s。但是在较慢的 PC 上，我丢失了一个数据包，我可以在 ethereal 中看到数据包，但在应用程序中看不到数据包。

谢谢

虚拟机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:28:39.980

我假设您已经尝试了所有更标准的方法来增加您能够处理的数据报的数量？诸如增加 recv 缓冲区大小、加快您对每个数据报的处理速度以及使用 IOCP 允许您带来更多线程来解决问题或使用 RIO（如果您可以针对 Windows 8）之类的事情？

如果是这样，那么使用 WinPCap 可能会起作用，但这听起来有点极端。

您需要做的是创建一个过滤器，以便您只捕获您感兴趣的数据报......文档包括使用过滤器的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:21:48.540

我有来自这里的服务器：[http](http://www.gamedev.net/topic/533159-article-using-udp-with-iocp/) ://www.gamedev.net/topic/533159-article-using-udp-with-iocp/ 。此代码与 IOCP 一起使用。它在 Windows XP 上运行良好。接收 0.5Gb/s 没有问题。但是现在在Win7上有点不可靠。有时会出现数据包位置错误。（我的设备生成 udp 数据包，并且在其有效负载中有 PacketNumber - 数字随着每个数据包而增加。发生错误时，我将所有数据包编号写入文件。我可以看到例如：10,11,290,13,14...）。IOCP 和多线程在 WinXP 和 Win7 中是否存在任何已知差异？或者你知道任何带有 IOCP 处理的免费 UDP 服务器吗？

在处理循环中，我只将数据包添加到缓冲区并检查它们的数量。

# performance - Entity Framework 4 多余查询加载关系

> ID：12191543
> 
> 赞同：0
> 
> 时间：2012-08-30T07:02:40.873
> 
> 标签：performance, entity-framework-4, relationship

在我们当前的一个项目中针对 SQL Server 数据库使用 EF4 并遇到了性能问题。假设我有下面的 Book 和 Author 类（未编译，仅出于示例的目的）。

```
public class Book
{
    public Author Author { get; set; }
}

public class Author
{
    public List<Book> Books { get; set; }
} 
```

可以轻松加载一本书，但是当按以下方式将作者分配给一本书时，**即使从未显式访问 Books 属性，也会运行查询以查找作者的所有书籍**

在我们的真实示例（不是书籍和作者）中，这可能会加载数千个永远不会使用的对象。没有花哨的 getter/setter 可以触发这个。

关于可能导致问题的任何想法？删除图书列表时不会运行查询，但在某些情况下可能会合法使用。

谢谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T20:07:24.553

如果您使用的是实体框架，则在首次创建对象时将加载任何未标记为“虚拟”的相关属性。如果您不想为作者自动加载 Books 属性，那么只需像这样更新您的代码：

```
public class Book
{
    public Author Author { get; set; }
}

public class Author
{
    public virtual List<Book> Books { get; set; }
} 
```

有关急切加载与延迟加载的更多信息，请参阅... [http://msdn.microsoft.com/en-us/data/jj574232.aspx](http://msdn.microsoft.com/en-us/data/jj574232.aspx)

# ios - 如何在 iphone 中播放任何视频时触发自定义视频播放器？

> ID：12191545
> 
> 赞同：0
> 
> 时间：2012-08-30T07:02:43.207
> 
> 标签：ios, ios5, mpmovieplayer

我想创建一个具有更多功能和设置的自定义视频播放器。

所以我的问题是：

1）当用户点击任何视频时，我可以触发我的应用程序吗？2）我如何获取保存在 iPhone 中的所有视频列表（不是在相机胶卷中）？我想在我创建的视频播放器中播放它们。

请指导我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:21:57.163

我认为您无法捕获所有视频。外部应用程序倾向于使用 Apple 的原生视频支持。

唯一的例外是，如果您注册应用程序以打开某些文件类型。然后应用程序可以允许您在外部应用程序（例如您的应用程序）中打开文件。但这需要其他应用程序的配合才能实现“Open In”功能；由于对视频的原生支持，很少有应用程序倾向于提供此功能。请参阅此处[Apple 文档](http://bit.ly/y2qC00)

文件系统被锁定，如果它不在相机胶卷或“打开方式”中，您将无法访问它。

# model-view-controller - 通过 grails 控制器中的 render() 发送值

> ID：12191546
> 
> 赞同：0
> 
> 时间：2012-08-30T07:02:47.333
> 
> 标签：model-view-controller, grails, groovy

这可能是一个非常简单的问题，但我无法通过 Grails 框架中的控制器输出我试图发送到视图的变量。

```
render(view: 'parseerror', error: it) 
```

那是我在控制器中的代码，它可以正确呈现视图，但是一旦我尝试通过`${error}`它调用变量，它什么也不会输出。它应该输出一个字符串，因为当我打印迭代器时，控制台输出：`The example string`

谢谢你的协助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:13:34.297

地图键是“错误”，而不是“错误”，但我相信，你想要实现类似于这段代码的东西：

```
render( view: 'parseerror', model: [ 'error': error ] ) 
```

# sql - SQL过滤具有相似值的表

> ID：12191549
> 
> 赞同：-3
> 
> 时间：2012-08-30T07:02:57.683
> 
> 标签：sql, oracle

我在表1中有这些数据

```
table1
ColA    ColB    ColC    ColD
  A       B       C       D
  A       B       G       F
  A       B       C       G
  G       B       C       F
  A       B       C       H 
```

我正在尝试创建一个 sql 语句，以便在 ColB 中搜索相同的值，然后在 ColD 中搜索相同的值

```
table1
ColA    ColB    ColC    ColD
 A       B       G       F
 G       B       C       F 
```

我试过了

```
select * from table1 where ColB = ColB and ColD = ColD. 
```

无论如何我可以使用一个 sql 语句过滤掉出现在 ColB 和 ColD 中的类似数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:19:46.443

“类似列”：

```
select colB, ColD 
from table1 
group by colB, ColD
having count(*) > 1 
```

具有“相似列”的数据：

```
select * 
from table1
join (    select colB, ColD 
    from table1 
    group by colB, ColD
    having count(*) > 1
) a on table1.colB = a.colB and table1.colD = a.colD 
```

另一种方法是：

```
select * from (
    select 
    s.*,
    count(*) over (partition by colB, ColD) as cnt
    from table1 s
)
where cnt > 1 
```

# javascript - 限制文本框以特定字符开头

> ID：12191557
> 
> 赞同：0
> 
> 时间：2012-08-30T07:03:26.690
> 
> 标签：javascript, html

在 Html 中，我需要限制用户输入应以特定字符/数字开头的文本框，

（例如：数字 6- 在这种情况下，用户可以在文本框中输入仅以“6”开头的数字）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:06:22.220

像下面这样的东西？

```
<input onblur="if (!/^6/.test(this.value)) alert('Ooops');"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:09:27.790

您想使用一段 javascript 来检查此客户端。不要忘记验证输入服务器端！每个人都没有启用 javascript，恶意用户可以禁用它来规避您的检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:12:18.577

```
$("#textbox").on("keypress",function(e){

//you can use e.which or e.keyCode based on the browser
//check if it is the first character
//here i used 56 as it is keycode for your example of 6
if($("#textbox").val().length ==0 && e.which == 56)
{

   alert("yes i accept");

}
else
{

   alert("no i dont accept");

}

}); 
```

# ios - 当我不创建 NSTimer 对象时如何使计时器无效

> ID：12191558
> 
> 赞同：6
> 
> 时间：2012-08-30T07:03:30.513
> 
> 标签：ios, nstimer

**我不想创建 NSTimer 对象。**如何使计时器无效？我想使 viewWillDisappear 中的计时器无效。

```
-(void) viewDidLoad
{ 
 [super viewDidLoad];
 [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(onTimer:) userInfo:nil repeats:YES];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:09:34.527

**一种**

你必须坚持你创建的计时器：

```
@interface MONObject ()
@property (nonatomic, retain) NSTimer * timerIvar;
@end

@implementation MONObject
...
- (void)viewDidLoad
{ 
 [super viewDidLoad];
 self.timerIvar = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(onTimer:) userInfo:nil repeats:YES];
}

- (void)invalidateTimer
{
  [self.timerIvar invalidate];
  self.timerIvar = nil;
}

- (void)viewWillDisappear:(BOOL)animated
{
  ...
  [self invalidateTimer];
} 
```

**乙**

另一种选择是使回调中传递的计时器无效，但这不会发生在`viewDidUnload:`. 因此，它并不完全适用于这种情况：

```
- (void)onTimer:(NSTimer *)pTimer
{
  [pTimer invalidate];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:14:19.473

如果您希望能够取消计时器，则必须参考要取消的计时器，这意味着您必须保留指向计时器的指针，请参阅贾斯汀的回答。

保持对计时器的引用是正确的方法，但为了完整起见，您也可以将该`-performSelector:withObject:afterDelay:`方法用作穷人的计时器。该调用可能会使用`+cancelPreviousPerformRequestsWithTarget:`. 示例代码：

```
- (void) viewDidLoad
{
    [super viewDidLoad];
    [self performSelector:@selector(timerTick) withObject:nil afterDelay:10];
} 
```

进而：

```
- (void) viewWillDisappear
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
    [super viewWillDisappear];
} 
```

但这不是正确的方法，因为您可能会取消您的对象上未决的其他执行选择器请求。最好保留计时器，这样您就可以确切地知道要取消的内容。

顺便说一句，在`-viewDidLoad`. 视图加载可能随时发生，与显示的视图无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:10:59.007

也许这种方法可以帮助你：

```
[self performSelector:@selector(onTimer:) withObject:nil afterDelay:10]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T22:52:08.250

如果您不想保留计时器，则 NSTimer 对象将被传递给计时器方法（在您的情况下为 onTimer:)，因此在该方法中您可以检查是否仍然需要计时器并将其无效。但是，如果视图在您使计时器无效之前返回并创建一个新的，您将遇到麻烦。

到目前为止，最好的方法是将计时器存储到实例变量中。它有效，没有聪明的技巧，六个月后你就会知道你做了什么。我可能会写一个

```
@property (readwrite, nonatomic) BOOL hasTimer; 
```

如果计时器不为零，getter 返回 YES，setter 使计时器无效或创建一个新计时器。

# jquery - 如何在 Jquery 中使用输入类型处理嵌套的每个

> ID：12191559
> 
> 赞同：0
> 
> 时间：2012-08-30T07:03:37.840
> 
> 标签：jquery, each

我试图解决类似的问题，但在这里找不到任何问题。所以这是我的问题。我有一个包含多个 div 的结构。每个 div 都有一个类名“testClass”。我需要获取所有输入类型的属性，按钮这是我的代码，

```
<body>

<div class="testClass">
    /* Few Code */
    <input type="text" id="txt1" /> <br/>   <input type="text" id="txt21" />
    /* Few Code */
    <button id="btn1">Button1</button>  
</div>

<div class="testClass">
    /* Few Code */
    <input type="text" id="txt2" /> <br/>   <input type="text" id="txt22" />
    /* Few Code */
    <button id="btn2">Button2</button>  
</div>

<div class="testClass">
    /* Few Code */
    <input type="text" id="txt3" /> <br/>   <input type="text" id="txt23" />
    /* Few Code */
    <button id="btn3">Button3</button>  
</div> 
```

我试过以下

```
$("div .testClass").each(function() {

/* Some code present */

      $(this).find('input,button').each(function(){

      });
}); 
```

但它不工作。如何在第一个每个语句之后从 div 类 testClass 中选择输入类型。

你能帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:08:40.880

这应该有效：

```
$("div.testClass").find(":input").each(function() {
    var type = $(this).attr('type');
    // Do something with the returned type
}); 
```

如果您只需要按钮，请将查找值设置为 ':button'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:20:13.767

也许你应该试试这个：

```
$("div.testClass :input").each(function() {
    var type = $(this).attr('type');
}); 
```

# macos - Mac APE 安装错误>>configure: 错误: 安装或配置: C 编译器无法创建可执行文件

> ID：12191565
> 
> 赞同：0
> 
> 时间：2012-08-30T07:04:04.403
> 
> 标签：macos, gcc-warning, ape

我正在我的 MAC 上安装 APE（Ajax 推送引擎）。但它在安装过程中给我一个错误，

```
configure: error: installation or configuration problem: C compiler cannot create executables. 
```

我的机器上安装了 gcc：`gcc -v`给出“gcc 版本 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.1.00）”

如何消除此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:30:21.197

正如 Mat 所说，检查`config.log`. 我在 ML 上构建 SpiderMonkey 时遇到了类似的问题，结果证明该错误与配置期望调用 C 编译器可执行文件有关，`gcc-4.2`而`g++-4.2`在 OSX 中不是这种情况，而是调用`gcc`它们`g++`。

为了解决我所做的问题：

```
$ export CC=gcc
$ export CXX=g++
$ ./configure 
```

这样它就成功了。感谢马特。

# sql - 用于比较行的 SQL 查询

> ID：12191568
> 
> 赞同：2
> 
> 时间：2012-08-30T07:04:23.807
> 
> 标签：sql, compare

我有一张这样的桌子：

```
 Sequence    ID      Date          other fields

    1           23      2012-01-01
    2           23      2012-02-03
    3           23      2012-02-02
    4           45      2012-01-01
    5           45      2012-01-02
    6           52      2012-01-01
    7           52      2012-03-01
    ..          ... 
```

我需要一个查询来返回具有相反日期的行（有一个更高的序列和一个更旧的日期

在示例 abow 中，它应该返回带有序列 2 和 3 的 rowq。对于 id 23，Seq 2 的日期比序列号 3 更新。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:24:40.530

```
select t1.*
from <table> t1
  join <table> t2 
    on  t1.Id=t2.Id
    and (((t1.Sequence>t2.Sequence) and (t1.Date<t2.Date)) or
         ((t1.Sequence<t2.Sequence) and (t1.Date>t2.Date))) 
```

和它的小提琴[http://sqlfiddle.com/#!3/beaf8/2/0](http://sqlfiddle.com/#!3/beaf8/2/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:09:35.707

尝试这个：

```
select Sequence,ID,Date 
from   
   ( select *,
     ROW_NUMBER() over (partition by ID order by date) as row_num_date,
     ROW_NUMBER() over (partition by ID order by Sequence) as row_num_seq
     from your_table )a
where row_num_date!=row_num_seq 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/aac41/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:11:09.303

```
select * from 
   (select T1.Sequence as S1, T2.Sequence as S2, T1.ID 
    from T as T1, T as T2
    where T1.Sequence < T2.Sequence 
      and T1.Date > T2.Date 
      and T1.ID = T2.ID) Subq
   inner join T on (T.ID = Subq.ID 
               and (T.Sequence = Subq.S1 or T.Sequence = Subq.S2)) 
```

# operating-system - x86-64 中 64 的意义

> ID：12191571
> 
> 赞同：1
> 
> 时间：2012-08-30T07:04:30.263
> 
> 标签：operating-system, cpu, processor, cpu-registers

我知道这`x86`意味着 a `32 bit CPU`（或数据和地址总线能够承载`32 bits`），我还发现它被称为`x86-64`. 中的`64`意思是`x86-64`什么？呢`registers`？

如果我错了也请纠正我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:44:48.563

有关详细信息，请参阅[简单的 x86-64](http://ianseyler.github.com/easy_x86-64/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:06:39.833

x86_64 位表示您正在查看的资源是 64 位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:08:37.180

x86 是指与老式 Intel 8086 CPU 兼容的指令集。所以它指的是指令集，而不是它是32位还是64位。请参阅[维基百科文章](http://en.wikipedia.org/wiki/X86)。

x86_64 是与该指令集兼容的芯片，但支持 64 位。

# c++ - 程序hadoop启动错误：PriviledgedActionException

> ID：12191575
> 
> 赞同：1
> 
> 时间：2012-08-30T07:04:34.007
> 
> 标签：c++, linux, hadoop, mapreduce, solaris

我写了以下程序

```
using namespace std;

#include "hadoop/Pipes.hh"
#include "hadoop/TemplateFactory.hh"
#include "hadoop/StringUtils.hh"
#include "libpq-fe.h"

extern "C" {
    #include "traverser.h"
}

class IndexMap:public HadoopPipes::Mapper {
  public:
    IndexMap(HadoopPipes::TaskContext & context) { }
    void map(HadoopPipes::MapContext & context) {
        std::vector<std::string> paths = HadoopUtils::splitString(context.getInputValue(), "rn");
        unsigned int k = 4;
        unsigned int l = 0;
        string concatpaths[k];
        if (paths.size() % k == 0) {
            for (unsigned int i = 0; i < k; ++i) {
                concatpaths[i] = paths[l];
                l = l + paths.size() / k;
            }

            for (unsigned int i = 0; i < k; ++i) {
                for (unsigned int j = 1; j < paths.size() / k; ++j) {
                    concatpaths[i] = +" " + paths[i * paths.size() / k + j];
                }
            }
        } else {
            l = 0;
            for (unsigned int i = 0; i < k; ++i) {
                concatpaths[i] = paths[l];
                l = l + paths.size() / (k - 1);
            }
            for (unsigned int i = 0; i < k - 1; ++i) {
                for (unsigned int j = 1; j < paths.size() / (k - 1); ++j) {
                    concatpaths[i] = +" " + paths[i * paths.size() / (k - 1) + j];
                }
            }
            for (unsigned int j = 1; j < paths.size() - paths.size() / (k - 1) * (k - 1); ++j) {
                concatpaths[k - 1] = +" " + paths[(k - 1) * paths.size() / (k - 1) + j];
            }
            for (unsigned int i = 0; i < k; ++i) {
                context.emit(concatpaths[i], "0");
            }
        }
    }
};

class IndexReduce:public HadoopPipes::Reducer {
  public:
    IndexReduce(HadoopPipes::TaskContext & context) { }
    void reduce(HadoopPipes::ReduceContext & context) {
        long int count = 0;
        long int result = 0;
        std::vector<std::string> processedpaths = HadoopUtils::splitString(context.getInputValue(), " ");
        result = Configure("/export/hadoop-1.0.1/src/c++/hadoopc++/src/nsindexer.conf");
        for (unsigned int i = 0; i < processedpaths.size(); ++i) {
            count = Traverser(processedpaths[i].c_str());
        }
        context.emit(processedpaths[processedpaths.size() - 1], HadoopUtils::toString(count));
    }
};

int main(int argc, char *argv[])
{
    return HadoopPipes::runTask(HadoopPipes::TemplateFactory<IndexMap, IndexReduce> ());
} 
```

我开始了

```
root@one: /export/hadoop-1.0.1/bin# ./hadoop 管道 -D hadoop.pipes.java.recordreader=true -D hadoop.pipes.java.recordwriter=true -input paths.txt -输出输出。 txt -程序 bin/parindex

```

根据[这个文件](http://www.google.ru/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=2&cad=rja&ved=0CC0QFjAB&url=http%3A%2F%2Fcs.smith.edu%2Fdftwiki%2Findex.php%2FHadoop_Tutorial_2.2_--_Running_C%252B%252B_Programs_on_Hadoop&ei=Swc_UIyfBoPj4QTC-YBg&usg=AFQjCNGIVyzsLACb65APibo_hafV0UnQ-w&sig2=2BxaE1JSiKVWq0TdTaTpHw)。

我收到以下错误

```
12/08/29 08:02:10 WARN util.NativeCodeLoader：无法为您的平台加载 native-hadoop 库...在适用的情况下使用内置 java 类
12/08/29 08:02:10 WARN mapred.JobClient：没有设置作业 jar 文件。可能找不到用户类。请参阅 JobConf(Class) 或 JobConf#setJar(String)。
12/08/29 08:02:10 INFO mapred.JobClient：清理暂存区文件：/tmp/hadoop-root/mapred/staging/root-2093574148/.staging/job_local_0001
12/08/29 08:02:10 错误 security.UserGroupInformation：PriviledgedActionException as：根本原因：org.apache.hadoop.mapred.FileAlreadyExistsException：输出目录文件：/export/hadoop-1.0.1/bin/out.txt 已经存在
线程“主”org.apache.hadoop.mapred.FileAlreadyExistsException 中的异常：输出目录文件：/export/hadoop-1.0.1/bin/out.txt 已存在
    在 org.apache.hadoop.mapred.FileOutputFormat.checkOutputSpecs (FileOutputFormat.java:121)
    在 org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:891)
    在 org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 javax.security.auth.Subject.doAs(Subject.java:415)
    在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    在 org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    在 org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
    在 org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
    在 org.apache.hadoop.mapred.pipes.Submitter.runJob（Submitter.java:248）
    在 org.apache.hadoop.mapred.pipes.Submitter.run（Submitter.java:479）
    在 org.apache.hadoop.mapred.pipes.Submitter.main(Submitter.java:494)

```

# c++ - 当 LD_LIBRARY_PATH 包含 32 位和 64 位版本的路径时，如何指定要使用的正确库

> ID：12191579
> 
> 赞同：0
> 
> 时间：2012-08-30T07:04:40.843
> 
> 标签：c++, linux, g++

我在 linux 机器上编写了一个小型 c++ 项目。我能够使用 -I 和 _L,-l 命令正确编译和链接代码。

我在网上读到，在运行代码时，我们需要在 LD_LIBRARY_PATH 变量中拥有 .so 文件的路径。现在我使用的盒子是 64 位的，还有另一个使用 32 位版本的库的应用程序。所以 LD_LIBRARY_PATH 有两个版本的库的路径。

当我尝试运行我的应用程序时，例如。./xyz arg1 arg2，我收到以下错误

```
./DaemonCpp: error while loading shared libraries: libldap.so: wrong ELF class: ELFCLASS32 
```

我认为这是因为它试图加载 32 位版本而不是 64 位版本。我尝试更改 LD_LIBRARY_PATH 中提到路径的顺序，以便首先出现 64 位路径，但我仍然收到此错误。有没有办法让应用程序使用 64 位版本的库。

作为我的主要问题的第二个问题，当我们链接 c++ 代码时，我们确实使用 -L 指定库路径，使用 -l 指定库名称。然后它应该知道在我运行可执行文件时要使用哪个库，而且我一开始就不应该遇到这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:18:55.280

在回答您的第二个问题时，您仅用于`-L`指定链接时间路径。您还需要为`-rpath=<path>`您指定的每个路径添加`-L`. 让它也查看运行时。

如果您使用 gcc/g++ 驱动程序进行链接，那么您应该使用`-Wl,-rpath=<path>`

例如库 libfoo.so 在`/opt/libs/lib64`：

```
gcc -o test test.o -L/opt/libs/lib64 -Wl,-rpath=/opt/libs/lib64 -lfoo 
```

在回答您的第一个问题时，如果`LD_LIBRARY_PATH`导致问题，那么您的第一个调用端口是`ldd`显示在运行时链接的库的路径。从一个空字符串开始，然后从那里开始。

第三，如果`LD_LIBRARY_PATH`需要设置的原因是因为 /opt/lib 中有库等......那么您应该将这些路径添加到您的`/etc/ld.so.conf`并`ldconfig`用于更新这些库的搜索地图。这通常会使您`LD_LIBRARY_PATH`根本不需要该变量。

# python - 关于，Python、Scrapy 和 Xpath

> ID：12191580
> 
> 赞同：0
> 
> 时间：2012-08-30T07:04:51.177
> 
> 标签：python, sqlite, xpath, scrapy

我正在使用 Scrapy 和 xpaths 从网站上获取一堆已售房产数据。总共有 9 个不同的“项目”（销售价格、销售日期、代理、代理、地址、财产类型、卧室、浴室和完整 URL），每页 20 条记录。然后我将结果存入 SQLite3 数据库。

一切都运行良好，直到我点击一个数据稍微不完整的页面。如果一个变量甚至从一条记录中丢失，它就会搞砸一切，页面中的任何内容都不会写入数据库。

我很确定这是因为我以“非pythonic”的方式编写了代码，但无法找到解决这个问题的方法（pythonic 或其他方式）。

这是我的 pipelines.py 文件中似乎出现问题的部分：

```
def process_item(self, item, spider):

    self.cur.execute("CREATE TABLE IF NOT EXISTS Diditwork(Id INTEGER PRIMARY KEY, SalePrice TEXT, Address TEXT, Agent TEXT, Agency TEXT, DateSold TEXT, TypeOfProperty TEXT, Bedrooms TEXT, Bathrooms TEXT, FullURL TEXT)")
    n=int(0)
    for data in item['address']:

        self.cur.execute("INSERT INTO Diditwork (Saleprice, Agent, Agency, Address, DateSold, TypeOfProperty, Bedrooms, Bathrooms, FullURL) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)", ((item['saleprice'][n]), (item['agent'][n]), (item['agency'][n]), (item['address'][n]), (item['datesold'][n]), (item['typeofproperty'][n]), (item['bedrooms'][n]), (item['bathrooms'][n]), (item['fullurl'][n])))

        self.conn.commit()
        n +=1

    return item 
```

记录中缺少变量时出现的错误是“exceptions.IndexError: list index out of range”

我认为这是因为我的循环的编写方式。它将查找其中包含 20 个变量的列表，但在某些页面上，如果一条或多条记录不完整或丢失，它会尝试调用不存在的列表索引。

例如，在一页上可能有 20 个地址记录，但只有 15 个代理记录。它尝试调用 item['agent'][16] 然后返回一个错误，因为列表没有那么长。

无论如何，我很抱歉对我的问题的解释不佳。我不确定我是否应该尝试实现某种错误处理，例如

```
if len(item['address']) != len(item['agent']): 
            #item['agent'] = ["not available"] * 20 
```

或者我的整个方法是否错误。

任何帮助将不胜感激 - 我在这里有点超出我的深度，并且一直在尝试一天半的大部分时间来自己解决这个问题。

编辑：谢谢大家。我还有更多的测试要做，但我想我实际上最终解决了这个问题。这是我正在使用的代码。如果有人想出一个更优雅的解决方案，我会在 24 小时内不回答这个问题。

```
if len(item['address']) != len(item['agent']): #error checking
            difference = len(item['address']) - len(item['agent']) #find the disparity
            item['agent'].extend(["not available"] * difference) #append/extend the list by an appropriate number 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:19:32.267

您的方法很紧凑，需要更少的代码和更少的处理，所以很好。您所缺少的只是适当的验证。输入到数据库的任何数据都必须经过验证，不仅是长度，还包括在解析和存储之前应该验证和修复的字段类型。

# cassandra - Cassandra 读取不一致

> ID：12191581
> 
> 赞同：1
> 
> 时间：2012-08-30T07:05:06.810
> 
> 标签：cassandra

我正在使用 Cassandra 作为我公司的生产数据库，我遇到了读取一致性问题。每天的记录应该是 1440 ，在第一次读取时显示 600-700 奇数记录，在第二次读取时显示 1440+ 记录。我在集群中有 3 个节点和 3 个二级索引，请帮帮我。我已使用以下 cassandra 版本和配置进行写入和读取。

```
Cassandra Version:
1.1.4 

Thrift Version:
070

Consistency level 
for Read  - ALL
for Write - ANY 
```

我已经做了几次尝试，包括增加超时时间，还检查了每个节点中运行的 Nodetool 修复仍然没有任何一致性变化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T17:29:15.107

Le douard 很接近：W=QUORUM + R=QUORUM 会给你很强的一致性。W=ONE + R=ALL 也是如此。但不是 W=ANY，这是一个“特殊”级别，即使在所有“自然”副本（由读取查询的）都关闭时，集群也可以接受写入。

请参阅[http://www.datastax.com/docs/1.1/dml/data_consistency](http://www.datastax.com/docs/1.1/dml/data_consistency)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T16:55:45.413

你弄错了一致性。要在 cassandra 中保持一致性，您至少需要读取和写入一致性级别 QUORUM

# html - 将工作网址更改为新网址并收到 404 错误

> ID：12191588
> 
> 赞同：0
> 
> 时间：2012-08-30T07:05:29.297
> 
> 标签：html, url, path, http-status-code-404

我对所有网络应用程序都很陌生。我有一个从其他人那里得到的源代码，我用来登录的常用网址是：

[http://www.ctdm.org:8080/WebCT/login.html?pin=10](http://www.ctdm.org:8080/WebCT/login.html?pin=10)

这工作得很好，虽然在服务器中唯一的文件“login.html”在“WebCT/WebContent/login.html”中。你知道为什么会这样吗？另外，如果我将额外的文件夹（这是真正的路径）添加到 url，它就不起作用（错误 404）-即

[http://www.ctdm.org:8080/WebCT/WebContent/login.html?pin=10](http://www.ctdm.org:8080/WebCT/WebContent/login.html?pin=10)

现在，我添加了更多页面，所以我现在希望用户将再次进入页面“WebCT/WebContent/index.html”。我收到 404 错误。我认为这与 login.html 文件的问题相同。

你知道发生了什么事吗？

提前致谢 或者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:09:38.250

您必须定义本地文件系统中的文件（例如 index.html）和可通过 URL 访问的资源之间的映射。我不知道您使用什么工具来创建 Web 应用程序，但我知道在 Eclipse 中，Web 应用程序使用的所有文件都存储在 WebContent 目录中。这只是它使用的约定。当应用程序部署到 Web 服务器时，此目录是应用程序上下文路径中的根目录。

# android - onPageFinished 时 WebView 不删除进度条

> ID：12191593
> 
> 赞同：-1
> 
> 时间：2012-08-30T07:05:40.163
> 
> 标签：android, webview, progress-bar

我有一个在启动时`activity`显示的，当页面完成加载时它应该消失。我在上面放了一个日志，但只有日志在工作，并且仍然在那里。我的代码是这样的：`ProgressDialog``WebView``onPageFinished``progbar.dissmiss()``ProgressBar`

```
ProgressDialog progbar;
progbar = ProgressDialog.show(SchoolActivity.this, "", "Loading...");
wv.setWebViewClient(new WebViewClient(){                
@Override
public void onPageFinished(WebView view, String url) {
    super.onPageFinished(wv, link);
    Log.d("log","Finished!!!");
    progbar.dismiss();
    }
}
});

wv.loadUrl(link); //"wv" is the webview and "link" is the url 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:09:14.443

这对我有用：

```
private void initializeWebView() {
        // fix weird recursive-loop bug in WebView
        final ProgressDialog dialog = new ProgressDialog(Activity.this);
        dialog.setMessage("Please wait while the form is loading...");
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.show();

        wv.setWebViewClient(new WebViewClient() {
            @Override           
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }

            public void onPageFinished(WebView view, String url) {
                dialog.dismiss();
           }
        });
} 
```

# javascript - JavaScript 中的 Null 与空白

> ID：12191594
> 
> 赞同：0
> 
> 时间：2012-08-30T07:05:41.020
> 
> 标签：javascript, html

我在[这里](http://jsfiddle.net/k4FnB/)附上了 jsfiddle 示例。我想知道null和blank的区别

我的功能工作正常，但是当我在 if 条件下将空白更改为 null 时，它停止工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:23:55.163

您必须注意`""`,`null`和`undefined`, 在 javascript 中的含义。它可能会导致布尔测试中有关值和类型的一些误解。

**`""`**是空字符串，也用作空属性。字符串对象 "" 已定义且不为空。

**`null`**是一个类型为空的对象。当一个对象没有其他值/属性（其类型为空）时，它被称为空。

**`undefined`**表示对象未定义，解释器没有引用它。undefined 不是对象。

当您尝试将这些值与 进行比较时，会出现一些问题**`false`**。试着看看下面的例子。

以下是一些参考链接：

[一些类型检查的教程](http://eloquentjavascript.net/chapter2.html)

[多一点解释](http://saladwithsteve.com/2008/02/javascript-undefined-vs-null.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:32:40.860

1.  您可能应该将条件更改为`if('input[type=radio]:checked').val())`这种方式，它将同时检查空字符串和空字符串。但在这种情况下，我认为你永远不会得到一个空字符串。

2.  不要`"!="`在这里使用，因为这可能会导致一些不可预知的行为使用`"!=="`。

3.  当对象实际上没有指向任何东西时，null 可能就像一个空指针

4.  其中空字符串指向一个对象，该对象是`""`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T07:10:12.067

NULL 值表示字段中没有记录值。

空值是其中没有重要数据的值。

为什么“空字符串”与空值不同？因为您正在将字符串（内部没有字符）与没有数据类型值的 a 进行比较：它们不同！

# java - Python-Django 项目，可以在云（gae）和本地运行，无需互联网连接

> ID：12191625
> 
> 赞同：0
> 
> 时间：2012-08-30T07:08:04.133
> 
> 标签：java, python, django, google-app-engine

我正在使用 Python on Django Project 开发一个测试项目，并将在 GAE 上运行。当其中一个要求指出应用程序应该具有从交易中保存数据的设施/机制时，我偶然发现了一个问题，即使没有互联网连接也是如此。

通常它应该可以通过网络发送数据以进行存储。但是，当连接不可用时，它应该将数据保存在本地临时存储中。一旦检测到本地存储具有最新数据，系统还应该具有更新云存储的功能。这就像解决最终用户方面的停机问题的解决方案（我的意思是，我相信云平台有不同的解决停机时间的方法，但最终用户的停机时间呢？没有互联网连接）。

因此，应用程序应该可以在可能的情况下在“云”上运行（通过强大的互联网连接），或者也可以通过保存在本地存储上而在没有连接的情况下运行。我真的需要谷歌应用引擎开发人员的意见。实际上，我正在尝试在 Java 和 Python 上对此进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:20:10.953

这里没有任何魔法。在云中工作的东西，如果没有互联网，就不能真正开箱即用。

只是为了给您指明一个方向，如果您想在 Internet 连接中断时为最终用户提供顺畅的支持，您必须自己手动完成。除其他外，您很可能会使用[Web Storage、IndexedDB 和 Web SQL 数据库](http://www.html5rocks.com/en/features/storage)来支持离线功能，它们都与 GAE 无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:31:03.083

您描述的问题与 GAE、您的托管服务提供商或 Django 无关或不特定。您需要的是在客户端（即您的 Web 浏览器）上启用离线功能并与您的后端（即 Django）同步的方法。为此，您需要熟悉 HTML 5，并且您可能想查看一下。

*   离线功能：[http ://diveintohtml5.info/offline.html](http://diveintohtml5.info/offline.html)
*   本地存储：[http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

但正如您将看到的，这些都与 GAE 无关。Backbonejs.org 是一个很好的支持它的库

# ios - 如何使用相同的 URL Schemes 打开两个不同的 iOS 应用

> ID：12191628
> 
> 赞同：0
> 
> 时间：2012-08-30T07:08:19.303
> 
> 标签：ios

我有一些 iOS 应用程序，我想使用相同的 URL 方案从 safari 或其他应用程序打开它们，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:13:53.467

这是我在此博客中写的一个条目：如何从 Safari 启动您的应用程序 [http://appleiostips.wordpress.com/2011/07/27/launch-app-from-safari/](http://appleiostips.wordpress.com/2011/07/27/launch-app-from-safari/)

您必须使用 XCode 打开文件 myapp-Info.plist 。然后添加一种名为：URL Types 的新行，在里面添加一个 Item 0。在项目内添加 URL 方案。在此 URL 方案中，写下您要为您的应用程序注册的名称。在这个例子中，我们使用了 myapp 。

然后，当 iOS 找到指向 myapp://withsomestuff 的链接时，将启动应用程序并调用应用程序委托中的 handleURL 方法：

```
- (BOOL)application:(UIApplication*) application handleOpenURL:(NSURL*) url
Inside this method you can parse the url to obtain aditional parameters.

    - (BOOL)application:(UIApplication*) application handleOpenURL:(NSURL*) url{
    if (!url) return NO;
    NSString* urlString=[url absoluteString];
    NSLog(@”Received URL %@”,urlString);
    NSString *loginCmd=@”myapp://login?”;
    //Expects to receive myapp://login?user_name&password
    if ([urlString hasPrefix:loginCmd]){
        NSRange rangeAmp=[urlString rangeOfString:@"&"];
        if (rangeAmp.location>([loginCmd length]+1)){
            NSString* password=[urlString substringFromIndex:rangeAmp.location+1];
            NSRange userRange={[loginCmd length],rangeAmp.location-[loginCm length]};
            NSString* user=[urlString substringWithRange:userRange];
        }
    }
returnYES;
} 
```

# python - 在 Scrapy 中初始化 CrawlSpider

> ID：12191631
> 
> 赞同：4
> 
> 时间：2012-08-30T07:08:26.130
> 
> 标签：python, web-scraping, scrapy

我在 Scrapy 中编写了一个蜘蛛，它基本上做得很好，并且完全按照它应该做的。问题是我需要对其进行一些小改动，并且我尝试了几种方法都没有成功（例如修改 InitSpider）。这是脚本现在应该执行的操作：

*   抓取起始网址`http://www.example.de/index/search?method=simple`
*   现在继续访问网址`http://www.example.de/index/search?filter=homepage`
*   使用规则中定义的模式从这里开始爬行

所以基本上所有需要改变的就是在两者之间调用一个 URL。我宁愿不用 BaseSpider 重写整个事情，所以我希望有人对如何实现这一点有一个想法:)

如果您需要任何其他信息，请告诉我。您可以在下面找到当前脚本。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request
from example.items import ExampleItem
from scrapy.contrib.loader.processor import TakeFirst
import re
import urllib

take_first = TakeFirst()

class ExampleSpider(CrawlSpider):
    name = "example"
    allowed_domains = ["example.de"]

    start_url = "http://www.example.de/index/search?method=simple"
    start_urls = [start_url]

    rules = (
        # http://www.example.de/index/search?page=2
        # http://www.example.de/index/search?page=1&tab=direct
        Rule(SgmlLinkExtractor(allow=('\/index\/search\?page=\d*$', )), callback='parse_item', follow=True),
        Rule(SgmlLinkExtractor(allow=('\/index\/search\?page=\d*&tab=direct', )), callback='parse_item', follow=True),
    )

    def parse_item(self, response):
        hxs = HtmlXPathSelector(response)

        # fetch all company entries
        companies = hxs.select("//ul[contains(@class, 'directresults')]/li[contains(@id, 'entry')]")
        items = []

        for company in companies:
            item = ExampleItem()
            item['name'] = take_first(company.select(".//span[@class='fn']/text()").extract())
            item['address'] = company.select(".//p[@class='data track']/text()").extract()
            item['website'] = take_first(company.select(".//p[@class='customurl track']/a/@href").extract())

            # we try to fetch the number directly from the page (only works for premium entries)
            item['telephone'] = take_first(company.select(".//p[@class='numericdata track']/a/text()").extract())

            if not item['telephone']:
              # if we cannot fetch the number it has been encoded on the client and hidden in the rel=""
              item['telephone'] = take_first(company.select(".//p[@class='numericdata track']/a/@rel").extract())

            items.append(item)
        return items 
```

**编辑**

这是我对 InitSpider 的尝试：[https](https://gist.github.com/150b30eaa97e0518673a) ://gist.github.com/150b30eaa97e0518673a 我从这里得到了这个想法：[Crawling with an authenticated session in Scrapy](https://stackoverflow.com/questions/5851213/crawling-with-an-authenticated-session-in-scrapy)

如您所见，它仍然继承自 CrawlSpider，但我对核心 Scrapy 文件进行了一些更改（不是我最喜欢的方法）。我让 CrawlSpider 从 InitSpider 而不是 BaseSpider ( [source](https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/spiders/crawl.py) ) 继承。

到目前为止，这是可行的，但是蜘蛛只是在第一页之后停止，而不是拾取所有其他页面。

此外，这种方法对我来说似乎完全没有必要:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:04:38.063

好的，我自己找到了解决方案，它实际上比我最初想象的要简单得多:)

这是简化的脚本：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from scrapy.spider import BaseSpider
from scrapy.http import Request
from scrapy import log
from scrapy.selector import HtmlXPathSelector
from example.items import ExampleItem
from scrapy.contrib.loader.processor import TakeFirst
import re
import urllib

take_first = TakeFirst()

class ExampleSpider(BaseSpider):
    name = "ExampleNew"
    allowed_domains = ["www.example.de"]

    start_page = "http://www.example.de/index/search?method=simple"
    direct_page = "http://www.example.de/index/search?page=1&tab=direct"
    filter_page = "http://www.example.de/index/search?filter=homepage"

    def start_requests(self):
        """This function is called before crawling starts."""
        return [Request(url=self.start_page, callback=self.request_direct_tab)]

    def request_direct_tab(self, response):
        return [Request(url=self.direct_page, callback=self.request_filter)]

    def request_filter(self, response):
        return [Request(url=self.filter_page, callback=self.parse_item)]

    def parse_item(self, response):
        hxs = HtmlXPathSelector(response)

        # fetch the items you need and yield them like this:
        # yield item

        # fetch the next pages to scrape
        for url in hxs.select("//div[@class='limiter']/a/@href").extract():
            absolute_url = "http://www.example.de" + url             
            yield Request(absolute_url, callback=self.parse_item) 
```

如您所见，我现在正在使用 BaseSpider 并在最后自己生成新的请求。在开始的时候，我只是简单地浏览了在开始爬行之前需要提出的所有不同请求。

我希望这对某人有帮助:) 如果您有任何问题，我很乐意回答。

# objective-c - NSScrollView 的文档视图上的自动布局问题

> ID：12191634
> 
> 赞同：2
> 
> 时间：2012-08-30T07:08:41.883
> 
> 标签：objective-c, cocoa, appkit, autolayout

我试图找到使用 Lion 的自动布局的最佳方法来制作这个简单的窗口，其中包含一个可滚动的视图，其中包含一个居中的图像和一个边框。看看我很棒的 ascii 艺术：

```
+==============+
|             ||
|    XXXXXX   ||
|    XXXXXX   ||
|    XXXXXX   ||
|              |
+--------------+ 
```

NSScrollView 的文档视图是一个翻转的 NSView 子类，它绘制背景图案，并在其中添加用户选择的图像（即不确定大小）。添加图像视图时，我给它约束以使其在文档视图中居中。文档视图本身受到约束，表示它希望比加载的图像略大。我想要的是明显的行为：在加载大于 scollview 的图像时，滚动条变为活动状态，在调整窗口大小时滚动条正常激活/停用。

但是，在加载大图像时，我看到的是文档视图正常扩展，但滚动视图和窗口随之扩展！在那之后，窗口不允许将大小调整得更小。显然我做得不对，但我不明白为什么。

我尝试更改文档视图的约束的优先级，任何高于 NSLayoutPriorityWindowSizeStayPut 的内容和窗口都会像上面一样扩展（我猜是有道理的），但任何更低的内容和文档视图永远不会调整大小，调整窗口的大小更小但滚动条不是启用。

有谁知道我是否需要在其他地方设置其他优先级，或者我需要额外的约束，或者完全不同的方法......我应该设置文档视图的“固有大小”吗？指向我还没有看到的任何自动布局开源/示例代码的指针也会很酷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:02:53.137

这原来是老`translatesAutoresizingMaskIntoConstraints`问题。当我遇到这些问题时，我在 Interface Builder 中设置了 NSScrollView 的文档视图。

我改为在运行时创建视图（或者我可以在 IB 中将它单独定义为“松散”视图），然后在我的窗口控制器中连接它：

```
self.backgroundPatternView.translatesAutoresizingMaskIntoConstraints = NO;
self.scrollView.documentView = self.backgroundPatternView; 
```

在此更改之后，默认优先级工作正常。

# ide - Lazarus/Ubuntu - 启动错误

> ID：12191635
> 
> 赞同：1
> 
> 时间：2012-08-30T07:08:43.150
> 
> 标签：ide, freepascal, lazarus

当 Ubuntu 12.04 上的 Lazarus 启动时，我收到此错误（附屏幕截图）。

这对构建的应用程序有影响吗？

![在此处输入图像描述](../Images/80ba0a74c99bb8772e253a69cc78e862.png)

单击确定后，IDE 启动，我可以创建简单的表单。但我不确定这是否是正确的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:03:34.750

这是指免费的 pascal 编译器本身的源代码。它不应影响您编译和运行普通应用程序的能力。

如果您发现编译器中的错误或想要构建交叉编译器以针对与您正在开发的平台不同的平台，则拥有编译器的源代码很有用。

我主要在 Windows 上使用 Lazarus，但从对错误消息的简单互联网搜索来看，似乎某些版本的 Ubuntu 没有/没有安装 fpc 源以及 Lazarus。检查以确保`fpc-source`软件包已安装。如果它不存在安装它。

然后确保路径实际上是正确的。我见过的大多数 Linux 安装都将其作为`/usr/share/fpcsrc/$(FPCVer)/`. 在 Windows 上，它通常`$(LazarusDir)fpc\$(FPCVer)\source`

# java - JSP 上的相对路径还是绝对路径？

> ID：12191636
> 
> 赞同：2
> 
> 时间：2012-08-30T07:09:11.483
> 
> 标签：java, jsp, contextpath

我正在尝试在根目录中创建一个带有头部和尾部 jsp 文件的主页。我也有相同的 _head 和 _tail jsp 只是为了在将来需要时简单使用。在head jsp中，我添加了两个js文件，一个css文件在里面。

我在头部 jsp 根目录上创建了另一个文件夹，名为 bbs。在这里，我创建了另一个文件寄存器 jsp，这包括根上的头部和尾部。结构是这样的...

```
root
|---bbs
|  |-_head.jsp
|  |-_tail.jsp
|  |-register.jsp
|
|---css
|---js
|
|-head.jsp
|-tail.jsp
|-index.jsp 
```

index.jsp 只是一个字符编码的空白文件，包含头尾文件。bbs _head 和 _tail 中的文件都包含根的头部和尾部。register.jsp 仅用于正文编码。

现在，问题是当我加载 register.jsp 时，所有位于根目录中的 css 和 js 现在都指向了 bbs。我想尝试在 register.jsp 中创建一个相对路径字符串变量，以便可以使用 head.jsp 中的路径变量。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:28:21.330

您可以将 register.jsp 移动到根目录，因为它使用 head.jsp 和 tail.jsp 而不是 _head 和 _tail 版本。

别的，

您可以使用获取上下文路径`${pageContext.request.contextPath}`

如果要为所有相对链接设置基本路径，以便不需要`${pageContext.request.contextPath}`在每个相对链接中重复，请使用`<base>`标签。

[这里](https://stackoverflow.com/questions/4764405/how-to-use-relative-paths-without-including-the-context-root-name)有一个很好的解释

# architecture - Symfony2 使用 wrt 到 Symfony1.4 组织

> ID：12191637
> 
> 赞同：1
> 
> 时间：2012-08-30T07:09:11.977
> 
> 标签：architecture, symfony, symfony-1.4

我已经使用 Symfony1.4 超过 2.5 年了。现在有一个新项目，客户想为这个项目使用 Symfony2。

在学习了 Symfony2 几个星期之后，现在我几乎没有什么可以决定我的结构，理想情况下可以在 Symfony1.4 中正确组织，但我无法在 Symfony2 中找到完美的方法（可能是因为我对 Symfony2 的经验还不够多）

1.  我在项目中有 3 个应用程序。我是否为这 3 个应用程序创建捆绑包？或者我是否在 src/ 目录中创建 3 个应用程序文件夹并为各个应用程序的各个模块创建捆绑包？

2.  如果我们为上述 Q1 的每个应用程序创建包，我无法找到一种方法来组织同一包中的模块明智实体。例如。我有模块前端的用户、事件、日历等模块，我如何在 frontendBundle 中组织模块？

3.  所有应用程序的通用代码都存储在 Symfony1.4 的根 lib/ 文件夹中，并且过去可以在所有应用程序中访问。我不明白在哪里有这个通用代码？我在供应商文件夹中有那个吗？或者供应商文件夹只是为了像 Doctrine 这样的第三方插入扩展的目的？

请问一些 Symfony2 专家可以澄清这些疑问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:23:44.743

1.  您创建 3 个不同的捆绑包

2.  有两种方法。

    a）您为实体、存储库等（通常是业务逻辑）以平面结构创建所有内容。对于视图、配置、翻译等，您可以根据控制器结构创建单独的命名空间（以及目录）。例如。

    ```
    src/
        COMPANY/
            App1Bundle/
                Controller/
                    UsersController.php
                    EventsController.php
                    ...
                Entity/
                    User.php
                    Even.php
                    ...
                Repository/
                    UserRepository.php
                    ...
                Model/
                    SomeServiceRelatedToUsers.php
                    SomeServiceRelatedToEvents.php
                    ...
                Resources/
                    views/
                        Users/
                            someUserView.twig.html
                        Events/
                            someEventsView.twig.html 
    ```

    b）和第二种方法 - 您为不同的逻辑部分创建单独的名称空间。例如。

    ```
    src/
        COMPANY/
            App1Bundle/
                Controller/
                    Users/
                        UserSpecificController1.php
                        UserSpecificController2.php 
                    Events/
                        EventsSpecificController1.php
                        EventsSpecificController1.php
                     ...
                Entity/
                    Users/
                        User.php
                    Events/
                        Even.php
                    ...
                Repository/
                    Users/
                        UserRepository.php
                    ...
                Model/
                    Users/
                        SomeServiceRelatedToUsers.php
                    Events/
                        SomeServiceRelatedToEvents.php
                    ...
                Resources/
                    views/
                        Users/
                            someUserView.twig.html
                        Events/
                            someEventsView.twig.html 
    ```

    我更喜欢第一个。

3.  您为此创建单独的捆绑包，例如 CommonBundle 或某事。有些人更喜欢创建像供应商库这样的通用代码，然后创建捆绑包，这是您的库和 symfony 应用程序之间的桥梁。

以下是可能对您有用的链接：

*   [我会为了什么做一个捆绑包？(Symfony 2)](https://stackoverflow.com/questions/11935213/for-what-would-i-make-a-bundle-symfony-2/11936570#11936570)

*   [Symfony 2.x 中的一切真的应该是一个捆绑包吗？](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-in-symfony-2)

*   [Symfony2 概念问题：一般捆绑包与特定捆绑包](https://stackoverflow.com/questions/8012191/symfony2-conceptual-issue-general-bundles-vs-specific-ones)

# entity-framework - 使用 POCO 时我是否应该使外键与引用保持同步

> ID：12191643
> 
> 赞同：6
> 
> 时间：2012-08-30T07:09:33.507
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, entity-framework-5

我看到很多关于首先使用 EF 代码和 POCO 的示例，这些示例显示如下：

```
public class Post
{
    public int PostId { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }

    public int BlogId { get; set; }
    public virtual Blog Blog { get; set; }
} 
```

现在，看看`Blog`房产。不应该是这样吗：

```
private Blog blog;
public virtual Blog Blog 
{ 
    get
    {
        return blog;
    } 
    set
    {
        blog = value;
        if (blog != null)
        {
            BlogId = blog.BlogId;
        }
    } 
} 
```

我的意思是，既然你已经用外键“污染”了你的模型，你不应该至少让它与参考保持同步吗？或者你不应该在读取数据时依赖`BlogId`（例如，你想知道一个特定`BlogId`的是否在列表中）。或者也许`DbContext`(like `KeepForeingKeysPropertiesSyncronizedWithReferences`) 上有一个神奇的属性对我这样做，而我是唯一对此感到担忧的可悲程序员？还是我偏执？（另外，对不起我的英语不好）

**编辑** 对不起-这确实是一个愚蠢的问题。Stefan 是对的，EF 确实为您做到了这一点。我没有看到这个，因为我传递的引用加载了`AsNoTracking()`. 只有在这种情况下，您才会有一个带有 ID 的引用，并且外键字段将为 0。只要您传递一个已经在上下文中的引用，它应该可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:49:20.390

您本身不需要执行此操作，EF 会为您执行此操作。
如果您设置独立关联属性，EF 将同步外键属性以反映您的更改，反之亦然。请注意，它不会立即自动发生，我认为这是在调用 SaveChanges 之后发生的，但我不确定。
如果您想知道为什么有些人使用外键属性：它在分离的应用程序（如 Web 应用程序）中更方便。当您需要扩展您的应用程序时，它还可以帮助提高性能（在某处最近的 MS 博客文章中阅读此内容）。
基本上，您只需要在混合和匹配时自己执行此操作；当在一种方法中使用独立关联属性而在另一种方法中使用外键属性时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:53:43.533

生成数据库优先代码。

看来您是这样做的，否则您将收到以下错误。

> 发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

Principle 是您的 Post 对象，dependent 是 Blog 对象。

当您尝试将未分配的无上下文 POCO 附加回上下文 EF 4.1 DBContext 时：

```
using (TransactionScope scope = new TransactionScope())
using (ITAMdbContext db = new ITAMdbContext())
{
   db.Entry(post).State = System.Data.EntityState.Unchanged; // error here
   db.Entry(post).State = System.Data.EntityState.Modified; 
   db.SaveChnages(); 
```

此错误由..解决

```
using (TransactionScope scope = new TransactionScope())
using (ITAMdbContext db = new ITAMdbContext())
{
   post.BlogId = post.Blog.BlogId;
 // fix the broken FK value, EF will not do this for
 // you, it does not know if post.BlogId or the post.Blog.BlogId should be chosen. 

   db.Entry(post).State = System.Data.EntityState.Unchanged; 
   db.Entry(post).State = System.Data.EntityState.Modified; 
   db.SaveChnages(); 
```

如果您的 POCO 对象不是自动生成的，那么按照您的方式进行操作是有效的。

您将 post 设置为 Unchanged 然后将其设置为 Modified 的原因是因为在对象上设置的第一个 Entry().State 会将相同的状态级联到所有子对象！可怕，但这就是它的工作方式。然后当你再次调用它时，它只会修改 post 对象。这会阻止修改或添加子对象。

编辑：这不再需要，它为你完成

# oracle - Oracle 10g DB - 如何让多个用户访问同一个数据库

> ID：12191652
> 
> 赞同：2
> 
> 时间：2012-08-30T07:09:59.030
> 
> 标签：oracle

我的应用程序有一个包含许多表的数据库。现在有一个新的应用程序，我必须让他们只能访问一个表。怎么做...是否可以创建一个指向同一个数据库并只能访问特定表的新用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:28:07.323

```
CREATE ROLE app_usr_role;

CREATE USER app_user IDENTIFIED BY password;

GRANT app_usr_role TO app_user;

GRANT SELECT,INSERT,UPDATE ON table TO app_usr_role; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:28:50.557

是的，这是可能的。为此，您需要使用 GRANT 或 REVOKE 命令。首先，您必须撤销新用户不需要的权限。请参阅[此处](http://psoug.org/reference/system_privs.html)的脚本以列出和撤销此权限。然后仅授予对您的表的访问权限，例如

```
GRANT SELECT, INSERT, UPDATE, DELETE on YOUR_TABLE to NEW_USER 
```

在此处查看更多信息[http://www.techonthenet.com/oracle/grant_revoke.php](http://www.techonthenet.com/oracle/grant_revoke.php)

# java - 滑动到新页面时在 pdf 上书写文本

> ID：12191657
> 
> 赞同：1
> 
> 时间：2012-08-30T07:10:22.983
> 
> 标签：java, pdf, itext

我正在使用 Itext 编写 pdf 文件。

我正在读取文件并将其内容写入 pdf 文件。

问题是，当文件超过一页时，生成的 pdf 只写一页，并且没有打印很多文本。

我用：

`ColumnText.addElement(Paragraph)`

我猜测它的发生是因为 ColumnText 是按一定大小定义的，但是我需要使用 ColumnText 是因为我从右到左编写文本并使用希伯来字母，段落不支持这一点（据我所知）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:43:04.637

当您使用 ColumnText 时，您需要提供一种机制来检查何时需要新页面。这在“iText in Action”的第 3 章中有详细解释。请参阅示例 ColumnMovies 和 MovieColumns：[http ://itextpdf.com/book/chapter.php?id=3](http://itextpdf.com/book/chapter.php?id=3)

另一种方法是使用 PdfPTable。PdfPCell 还支持 RTL 写入。您可以创建一个无边框的 PdfPTable，每个段落有一列一行。当您将此表添加到 Document 时，将自动添加新页面（您可能需要更改 setSplitLate 设置以避免有太多空白空间）。

# java - 在推特墙上发布链接？

> ID：12191664
> 
> 赞同：0
> 
> 时间：2012-08-30T07:10:35.363
> 
> 标签：java, android

我正在尝试在我的推特墙上发布链接，就像更新状态或在墙上发布推文一样。

我目前正在使用**twitter4j-core-2.1.11.jar**库在 twitter 上发布推文，但我也想发布一个带有推文文本的链接。

我该怎么做请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T07:15:19.087

这可能会帮助你！

```
public class ShareButtonActivity extends Activity {

    // SocialAuth Component
    SocialAuthAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Welcome Message
        TextView textview = (TextView)findViewById(R.id.text);
        textview.setText("Title");

        //Create Your Own Share Button
        Button share = (Button)findViewById(R.id.sharebutton);
        share.setText("Share");
        share.setTextColor(Color.WHITE);
        share.setBackgroundResource(R.drawable.button_gradient);

        // Add it to Library
        adapter = new SocialAuthAdapter(new ResponseListener());

        // Add providers

        adapter.addProvider(Provider.TWITTER, R.drawable.twitter);

       //before that import library which is given by socialauth in link given below
        adapter.enable(share);

    }

    /**
     * Listens Response from Library
     * 
     */

    private final class ResponseListener implements DialogListener 
    {
        public void onComplete(Bundle values) {

            // Variable to receive message status

            Log.d("ShareButton" , "Authentication Successful");

            // Get name of provider after authentication
            String providerName = values.getString(SocialAuthAdapter.PROVIDER);
            Log.d("ShareButton", "Provider Name = " + providerName);

            adapter.updateStatus("your message|link" + System.currentTimeMillis());
            Toast.makeText(ShareButtonActivity.this, "Message posted on " + providerName, Toast.LENGTH_SHORT).show();       

         }

         public void onError(SocialAuthError error) {
             Log.d("ShareButton" , "Authentication Error");
         }

         public void onCancel() {
             Log.d("ShareButton" , "Authentication Cancelled");
         }

     }

} 
```

[点击这里](http://code.google.com/p/socialauth-android/)

# asp.net - 在 aspnetdb 表中添加列好吗？

> ID：12191665
> 
> 赞同：2
> 
> 时间：2012-08-30T07:10:41.197
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, .net-security

我正在使用 SQL Server 开发 MVC3 应用程序。为了安全起见，我使用基于表单的身份验证（我需要在应用程序中提供身份验证和授权）。

目前，用户由 Membership api 在 aspnet_users 表中进行管理。除了在 aspnet_users 表中添加列之外，我没有其他选择。

我需要在 aspnet_users 表中添加以下其他列：

1.  CreatedBy 创建用户的用户 ID
2.  创建日期时间
3.  EditedBy 用户 id
4.  编辑日期时间
5.  IP地址

我正在考虑编写自己的方法来添加这些记录，而不是试图干扰 aspnet 存储的过程。

请问有什么指导或建议吗？我相信开发者会有这样的需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:37:19.607

您应该使用[Membership User Profile API](http://msdn.microsoft.com/en-us/library/2y3fs9xs%28v=vs.100%29.aspx)将自定义属性扩展到您的用户，而不是直接将列添加到`aspnet_Membership`和`aspnet_Users`表。

看看[Defining ASP.NET Profile Properties](http://msdn.microsoft.com/en-us/library/d8b58y5d%28v=vs.100%29.aspx)，这应该是你所需要的。

同样默认情况下，每个用户都有一个`Comment`列，您可以在`string`.

还有一个[用于 Web 应用程序项目的 Web Profile Builder，](http://weblogs.asp.net/joewrobel/archive/2008/02/03/web-profile-builder-for-web-application-projects.aspx)但我认为您不需要走那条路。

# android - 如何为超过 1 个微调器设置 setOnClickListener

> ID：12191668
> 
> 赞同：1
> 
> 时间：2012-08-30T07:10:57.120
> 
> 标签：android, spinner, onclicklistener

> 实际上我在服务器中有一个值来创建微调器。我尝试为所有微调器设置 setOnClickListener，但出现错误。请参阅下面的代码。

```
public static Spinner[] clickspin = new Spinner[nvalue];//nvalue = 2 (get from server)
for(int i=0;i<nvalue;i++)
{
clickspin[i]=new Spinner(this);
        clickspin[i].setLayoutParams(new TableRow.LayoutParams(90/*length of combo box*/, TableRow.LayoutParams.WRAP_CONTENT));
        clickspin[i].setAdapter(adapter1);
        clickspin[i].setId(i);
        clickspin[i].setClickable(true);
        clickspin[i].setOnClickListener(new OnClickListener() 
        {               
            public void onClick(View v) 
            {
                int n = v.getId();

            }
        });
} 
```

> 如何为每个微调器设置 setOnClickListener

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:19:42.067

对于 Spinner ，我们使用[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)。

```
clickspin[i].OnItemSelectedListener(new AdapterView.OnItemSelectedListener() {               

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    // An item was selected. You can retrieve the selected item using
    // parent.getItemAtPosition(pos)
    }

    public void onNothingSelected(AdapterView<?> parent) {
    // Another interface callback
    }
}); 
```

请参阅[微调器指南](http://developer.android.com/guide/topics/ui/controls/spinner.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:24:47.363

实施`onClickListener`到您的活动中......如果你想在每个项目中提供不同的功能......那么也实施`onItemSelectedListener`

# jsf - Primefaces数据过滤器问题

> ID：12191670
> 
> 赞同：1
> 
> 时间：2012-08-30T07:10:59.180
> 
> 标签：jsf, jakarta-ee, jsf-2, primefaces

我正在尝试在我的数据表上应用过滤器，但我不知道为什么它不起作用。我一次又一次地检查了所有的东西，但它仍然不起作用，甚至没有显示任何错误或异常。这是我的代码
页。 xhtml

```
<p:dataTable id="masterResult" value="#{masterSearch.masterSearchResultList}" var="srvc" 
                             styleClass="display" style="cursor:pointer;" rows="6" 
                             paginator="true" rowsPerPageTemplate="5,10,15" paginatorAlwaysVisible="false" paginatorPosition="bottom"
                             widgetVar="viewTable" filteredValue="#{masterSearch.filterMasterSearchResult}">

                                <p:column filterBy="#{srvc.serviceNumber}"  
                                                headerText="Service Number"
                                                filterMatchMode="endsWith">  
                                        <h:outputText value="#{srvc.serviceNumber}"/>  
                                </p:column>

                                <p:column headerText="Rank">
                                #{srvc.rank}
                                </p:column>

                                <p:column headerText="Name">
                                #{srvc.name}
                                </p:column>

                                <p:column headerText="Course">
                                #{srvc.course}
                                </p:column>

                                <p:column headerText="Unit">
                                #{srvc.unit}
                                </p:column>

                                <p:column headerText="Relation">
                                #{srvc.relation}
                                </p:column>
                            </p:dataTable> 
```

在这里，我得到了正确的值，但是当我在过滤器文本字段中写东西时（由 primefaces 显示）它不起作用。
如果有人对此有所了解，请提供帮助
谢谢

# 编辑：

```
public class MasterSearch {

    String serviceNumber;
    String rank;
    String fullName;
    String CNICNumber;
    String phoneNumber;
    String emailAddress;
    List<MasterSearchResult> masterSearchResultList;
    List<MasterSearchResult> filterMasterSearchResult;

               // getter 
               //  setters 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:38:24.933

删除这部分：`filteredValue="#{masterSearch.filterMasterSearchResult}"`

从这里检查我的样本：[https ://dl.dropbox.com/s/v3ihl25aozt8qyn/mavenproject.zip?dl=1](https://dl.dropbox.com/s/v3ihl25aozt8qyn/mavenproject.zip?dl=1)

# wpf - WPF 图像边框

> ID：12191678
> 
> 赞同：1
> 
> 时间：2012-08-30T07:11:49.037
> 
> 标签：wpf, image, border

我有这张图片：

![箭头图像](../Images/c3e042e4fdf9ae6f32cb659ee6b7fa7a.png)

我希望图像有边框如果我这样做：

```
<Border BorderThickness="1" BorderBrush="Black" HorizontalAlignment="Right" Width="22" VerticalAlignment="Center">
            <Image Source="/<AppName>;component/Images/Background/Achtergrond_Arrow.png" HorizontalAlignment="Right" Width="22" >
                <Image.Effect>
                    <DropShadowEffect Color="#FF868686" Direction="0" ShadowDepth="0" BlurRadius="10"  />
                </Image.Effect>
            </Image>
        </Border> 
```

它给出了方形边框，而不是跟随箭头本身。

![方形图像](../Images/9d026934a9580519b91c3592ff436ceb.png)

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:14:24.997

不要使用图像，而是自己绘制边框和三角形。您可以为此使用 a `Path`、 a`Line`和其他基本几何形状。

[这篇文章](https://stackoverflow.com/questions/4732869/draw-a-filled-triangle-in-drawingcontext)可能会给你一个起点。或者[Petzold](http://www.charlespetzold.com/blog/2008/04/Rounded-Graphics-in-WPF.html)博客文章可以为您提供进一步的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:46:16.940

我的解决方案：

```
<Path Fill="Black" Data="M 0 44 L 22 22 L 0 0 Z"  HorizontalAlignment="Right" VerticalAlignment="Center" Width="22" >
        <Path.Effect>
            <DropShadowEffect Color="#FF868686" Direction="0" ShadowDepth="0" BlurRadius="10"  />
        </Path.Effect>
    </Path> 
```

我把箭头图像扔掉了。

不管怎么说，还是要谢谢你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:17:49.007

WPF 中的边框总是矩形的。

如果你想要一个轮廓，你将不得不绘制它或[使用效果](http://wpffx.codeplex.com/)

# c# - 如何使用innerhtml设置高度和宽度？

> ID：12191686
> 
> 赞同：0
> 
> 时间：2012-08-30T07:12:12.080
> 
> 标签：c#, asp.net

我在 c# 代码中为容器设置高度

```
 public string Height34
        {
           get { return Convert.ToString(Settings["container"]); }
       } 
```

我在 ascx 页面中接收这些值，例如

```
height:<%= this.Height34 %>px; 
```

当我运行它的错误时

错误：DNAiusTwitter 目前不可用。DotNetNuke.Services.Exceptions.ModuleLoadException：无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。---> System.Web.HttpException：无法修改Controls 集合，因为该控件包含代码块（即<% ... %>）。在 System.Web.UI.ControlCollection.Add(Control child) 在 DotNetNuke.Modules.DNAiusTwitter.View.Page_Load(Object sender, EventArgs e) 在 C:\Users\DNAius-3\Documents\Visual Studio 2010\WebSites\DotNetNukeverticalsliding \DesktopModules\DNAiusTwitter\View.ascx.cs:line 123 --- 内部异常堆栈跟踪结束 --- 因为我正在使用

```
this.Controls.Add(scriptTagLinks); 
```

# javascript - 在 javascript Webview 中调用 Intent

> ID：12191688
> 
> 赞同：1
> 
> 时间：2012-08-30T07:12:36.073
> 
> 标签：javascript, android, android-intent

我正在使用此代码使用 HTML 按钮调用 Android Activity。但这对我不起作用。当我从我的 html 页面单击按钮时，我只想调用我的 Android 活动“echos.class”。

我的 JavaScriptInterface 类

```
public class JavaScriptInterface {
    Context mContext;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    public void showToast(String toast) {
        Intent mainIntent = new Intent(mContext, echos.class); 
        JavaScriptInterface.this.startActivity(mainIntent); 

    }

    private void startActivity(Intent mainIntent) {
        // TODO Auto-generated method stub

    }
} 
```

我的 webview 课

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView myWebView = (WebView) findViewById(R.id.web1);
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        myWebView.addJavascriptInterface(new JavaScriptInterface(this), "Android");
        myWebView.loadUrl("file:///android_asset/www/index.html");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我的html页面

```
<html>
<head>

</head>
<body>
    <input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />

    <script type="text/javascript">
    function showAndroidToast(toast) {
        Android.showToast(toast);
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:17:43.810

改变

```
JavaScriptInterface.this.startActivity(mainIntent); 
```

到

```
 mContext.startActivity(mainIntent); 
```

因为 JavaScriptInterface 不是一个活动

# php - 无法使用 file_get_contents 检索页面

> ID：12191689
> 
> 赞同：-1
> 
> 时间：2012-08-30T07:12:36.307
> 
> 标签：php

我想用文件获取内容功能抓取一些谷歌页面：

```
 $encoded='http://www.google.co.il/#hl=en&biw=1440&bih=799&sclient=psy-ab&q=site:'.urlencode("http://stackoverflow.com/");

    echo  file_get_contents($encoded); 
```

当我这样做时：

回声$编码；

我明白了：

```
http://www.google.co.il/#hl=en&biw=1440&bih=799&sclient=psy-ab&q=site:http%3A%2F%2Fstackoverflow.com%2F 
```

当我把它放在网址中时..我得到了我想要的页面

但是当我使用该功能时，我只是得到了谷歌主页..为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:14:34.433

这是因为您的网址使用了谷歌新的**客户**端功能。之后的一切都是`#`给客户端的，服务器会为你提供 . 下的内容`http://www.google.co.il/`。

### 更新

如果您想在您的程序中使用 google 搜索结果，请尝试使用他们的[API 之一进行自定义搜索](https://developers.google.com/custom-search/v1/overview)。在这个 url 下有一个用于 ajax 客户端的搜索网络服务：

```
http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=your+term+goes+here

```

它以 JSON 格式返回结果，第一个结果在`responseData->results`数组下：

```
$search_results = json_decode(file_get_contents('http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=your+term+goes+here'), true);
var_export($search_results['responseData']['results'][0]); 
```

但我认为[这已经被弃用](https://developers.google.com/web-search/)了（但是仍然响应）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:16:43.813

您可以删除 URL 中的 # 并使用 ? 然后试试

```
<?php
$encoded='http://www.google.co.il/?hl=en&biw=1440&bih=799&sclient=psy-ab&q=site:'.urlencode("http://stackoverflow.com/");

echo  file_get_contents($encoded); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-13T09:58:12.893

`$url = "https://www.google.co.in/gfe_rd=cr&ei=RCjlVsPSDPDI8Ae1nruADw&gws_rd=ssl#q=SUCCES"`;

```
echo  file_get_contents($url); 
```

给我谷歌页面，但不是谷歌搜索页面......

# iphone - 如何在从 iPhone 拍照时以编程方式更改背景颜色

> ID：12191693
> 
> 赞同：0
> 
> 时间：2012-08-30T07:12:46.650
> 
> 标签：iphone, ios, camera, uiimagepickercontroller, background-color

嗨，我是 iOS 新手

我想在从 iPhone 拍照时以编程方式将**照片的背景颜色更改为全白**，

可能吗？如果是这样，我必须做什么，如果有人知道，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:57:00.997

我认为你最好看看[GPUImage](https://github.com/BradLarson/GPUImage)框架。

# java - Play framework 2.0 尝试级联删除时出错“参数“#1”未设置；SQL语句：delete”

> ID：12191696
> 
> 赞同：2
> 
> 时间：2012-08-30T07:13:06.370
> 
> 标签：java, jpa, playframework-2.0, h2, ebean

我的示例中的完整错误行是“[PersistenceException: org.h2.jdbc.JdbcSQLException: Parameter "#1" is not set; SQL statement: delete from class4 where (class3_id) in (?) [90012-158]]”

这发生在我的单元测试中，所以决定创建一个测试项目来尝试重现它，它确实做到了。

基本上，我有 1-4 类，每个类都与 onetomany 相关，我尝试创建它们，然后按 1、2、3、4 4、3、2、1 的顺序删除它们，但我收到此错误。

除了数字之外，这些类都是相同的（最后一个类没有列表

```
@Entity
public class Class1 extends Model{

/**
 * 
 */
private static final long serialVersionUID = 4322329984247299024L;

@Id
@GeneratedValue
public Long id;

@OneToMany(mappedBy="class1",cascade={CascadeType.PERSIST, CascadeType.ALL})
private List<Class2> class2s = new ArrayList<Class2>();

public Class2 add()
{
    Class2 class2 = new Class2(this);
    Class2.create(class2);
    return class2;
}

@play.db.ebean.Transactional 
public static void create(Class1 class1) {
    class1.save();
    }

  @play.db.ebean.Transactional 
 public static void delete(Class1 class1) {
      class1.delete();
    }
} 
```

我的导致错误的应用程序代码运行如下

```
 Class1 class1 = new Class1();
  Class1.create(class1);
  Class2 class2 = class1.add();
  class1.add();

  Class2.delete(class2);
  Class1.delete(class1); 
```

我还附上了一个示例应用程序，显示它正在发生，如果有人能指出我做错了什么，或者如果有人知道我如何解决它，如果它是 API 的一个错误，我将非常感激。

[http://stowelly.co.uk/play-2.0.3-persistence-test.zip](http://stowelly.co.uk/play-2.0.3-persistence-test.zip)

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:52:56.457

似乎这是Ebean中的一个错误

[http://www.avaje.org/bugdetail-420.html](http://www.avaje.org/bugdetail-420.html)

无论如何，解决此问题的临时解决方法是每个类删除函数中的以下代码

```
 @play.db.ebean.Transactional 
     public static void delete(Class2 class2)
  {  
     List<Class3> list = class2.getClass3s();
     for(int i = 0; i < list.size(); ++i)
     {
       Class3.delete(list.get(i));
     }  
     list.clear();
     class2.getClass1().getClass2s().remove(class2);
     class2.delete();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T06:08:54.417

不要`@Transactional`在你的实体中使用类似的东西。而是在业务逻辑/持久性上使用它。

```
@Entity
public class A
{
    Long id;
    List<B> bs;

    //...
}

public class DAO
{
    @Transactional
    public void addBtoA(A a, B b)
    {
         b = em.persist(b);
         a = em.find(a);
         a.addB(b);
         em.persist(a);
    }
} 
```

简单的解释是事务存在，因此如果出现问题，它可以回滚。这是为了防止一半持久化的东西，在示例`B`中被提交，`A`不存在，`B`成为数据库中的非引用条目。

# iphone - UIImageView 上的“涟漪效应”

> ID：12191697
> 
> 赞同：3
> 
> 时间：2012-08-30T07:13:09.613
> 
> 标签：iphone, objective-c, ios, xcode, animation

我现在正在尝试使用代码下面的代码制作波纹动画，我每次都在同一位置获取动画

```
CATransition *animation = [CATransition animation];
[animation setDelegate:self];
[animation setDuration:2.0f];
[animation setTimingFunction:UIViewAnimationCurveEaseInOut];
[animation setType:@"rippleEffect" ];
[imgView.layer addAnimation:animation forKey:NULL]; 
```

但我想在 imageview 上的触摸点上获得动画意味着动画将在用户点击 UIImageView 的那一点发生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:02:25.800

我认为下面的代码可以帮助你。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:(UIViewAnimationTransition) 110 forView:view cache:NO];
[UIView commitAnimations]; 
```

您也可以更好地访问与您[的](https://stackoverflow.com/questions/5973530/iphone-having-a-ripple-effect-on-a-uiimageview)帖子相似的帖子。

# sharepoint - FBA 用户的访问被拒绝 - IIS7 虚拟目录

> ID：12191698
> 
> 赞同：0
> 
> 时间：2012-08-30T07:13:30.633
> 
> 标签：sharepoint, iis, virtual-directory

我的机器 Machine1 上安装了 SharePoint。我们有一个文件服务器 Machine2 用于部署我们的 asp 页面。这将是 1000 多个文件，这就是我们拥有这个单独的文件服务器的原因。

sharepoint 站点已启用 FBA 身份验证。

我面临的问题是 FBA 身份验证的用户无法查看共享文件夹中的 asp 页面。但它适用于匿名用户。

我通过向“所有人、匿名访问、经过身份验证的用户、应用程序池所有者”提供读取权限来共享该文件夹。在文件夹属性窗口的安全选项卡中，我还为上述用户授予了读取权限。

匿名用户能够查看页面的原因是，在 IIS7 中，我设置的匿名身份验证用户使用“ApplicationIdentity”运行，这可能是匿名用户能够查看的原因。

有人遇到过这个问题吗？我只需要允许 FBA 用户浏览页面。

# .net - 即使 dll 与可执行文件位于同一文件夹中，DllImport 也找不到 dll

> ID：12191702
> 
> 赞同：12
> 
> 时间：2012-08-30T07:13:51.237
> 
> 标签：.net, f#, llvm, dllimport, llvm-fs

我正在尝试使用[llvm-fs](https://github.com/keithshep/llvm-fs)项目，该项目为 F# 提供 llvm 绑定。我已经编译了该`LLVM-3.1.dll`文件，`--enable-shared`它现在与我编译的可执行文件位于同一目录中（我检查了`Environment.CurrentDirectory`）。在`DllImport`llvm-fs 看起来像：

```
[<DllImport(
    "LLVM-3.1.dll",
    EntryPoint="LLVMModuleCreateWithName",
    CallingConvention=CallingConvention.Cdecl,
    CharSet=CharSet.Ansi)>]
extern void* (* LLVMModuleRef *) moduleCreateWithNameNative(string ModuleID) 
```

然而，当我运行我的应用程序时，它会出错：

```
Unable to load DLL 'LLVM-3.1.dll': The specified module could not be found.
(Exception from HRESULT: 0x8007007E) 
```

如何获取要加载的 DLL？作为参考，[这是我尝试加载的确切 DLL](https://github.com/CRogers/BasicCompiler/blob/05e0c6dce687f58b925e9e4425ec019bff2ad88a/lib/llvm-3.1/LLVM-3.1.dll)。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T07:41:25.000

这：

> “指定的模块无法找到”

可以指向某个库，该库`LLVM-3.1.dll`依赖于，而不是`LLVM-3.1.dll`自身。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-30T17:03:20.130

在这种情况下，当 DLL 或 EXE 无法加载时，[Depends.exe](http://dependencywalker.com/)非常方便 - 它显示完整的 EXE/DLL 依赖关系树，突出显示无法加载或丢失的内容。

# extjs - 带有隐藏组件的 ExtJs hbox

> ID：12191707
> 
> 赞同：0
> 
> 时间：2012-08-30T07:14:10.177
> 
> 标签：extjs, combobox, hbox

在 hbox 布局中，如果我们隐藏一个组件，那么所有其他组件都会重新对齐。

考虑到我有以下布局，

```
hbox1:

   combo1  combo2 combo3 combo4 
```

如果我隐藏组合 1，那么布局会重新对齐，

```
hbox2:

  combo2 combo3 combo4 
```

这里combo2重新定位到combo1的地方。

但我喜欢保留组件在 hbox1 中的位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:25:00.503

1*您可能应该制作2个嵌套控件并隐藏内部控件，同时保持外部控件的宽度不变..这种方法增加了开销，但会做
2*您可以做的另一件事是远离extjs操作 dom .. extjs 在彼此内部创建多个 div，因此您可以手动访问其中一个内部 div 并将其隐藏
3* 不要在 extjs 中使用 hide() 函数，
而是创建一个特殊的隐藏函数来更改 div 组件的样式隐藏并将 div 的所有可能颜色设置为透明或背景颜色。它仍然会被隐藏，只是所有附加的事件都会起作用..
4 * 或者，您可以屏蔽组件而不是隐藏它。这样用户会知道这个特定项目被禁用，并且用户也不会被允许与相应的组件交互

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:06:10.423

(1) 我们最近实施的一个解决方案是允许隐藏组件参与 HBOX 布局的布局/调整大小：

不要使用 隐藏组件，而是`Ext.Component#hide`使用 禁用它们`Ext.Component#disable`。此外，`cls`在每个组件上配置一个属性，例如`ghost`.

然后定义一个CSS规则

```
ghost.x-item-disabled {
    visibility: hidden;
} 
```

背景：

*   因为组件不被视为“隐藏”到 Ext 布局引擎，所以将考虑调整大小/布局。
*   `display:block`浏览器不会渲染任何可见的表示，而是让元素占据盒子模型中的空间——这是和之间的主要区别`visibility:hidden`。
*   因为组件是`disabled`，所以它不会响应任何用户交互。

(2) 尝试将`hideMode`这些组件设置为`visibility`。请参阅[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-hideMode](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-hideMode)。

如果您使用最初可见的所有项目呈现工具栏，然后隐藏单个项目，这可能会起作用。但是，我实际上希望它根本不工作或在非常有限的情况下工作。最好选择（1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T17:39:29.957

感谢您的回答。我通过使dom被隐藏来实现，

```
component.el.dom.hidden=true;  //Hides the text field of combo
component.el.dom.nextSibiling.hidden = true; // hides the drop down imageof combo 
```

# java - 来自类加载器的损坏的输入流

> ID：12191708
> 
> 赞同：0
> 
> 时间：2012-08-30T07:14:14.077
> 
> 标签：java, jakarta-ee, jboss, resources, birt

我有以下问题，我想知道原因可能在哪里。我正在尝试从服务器`conf`的文件夹中加载资源。`JBoss`

```
final String REPORT_DESIGN = "report_name.rptdesign"; //xml file
templateIS = Thread.currentThread().getContextClassLoader().getResourceAsStream(REPORT_DESIGN); 
```

这很好用，我什至可以将流写入文本文件并得到正确的结果。但问题是当我试图将输入流传递给[Birt](http://www.eclipse.org/birt/phoenix/)引擎时，我总是得到`org.eclipse.birt.report.engine.api.EngineException: The design file <stream> has error and can not be run`.

我也尝试过`/`文件开头的版本。

当我尝试从我的项目的资源中加载相同的文件时（所以从带有 的 jar 文件中`this.getClass().getResourceAsStream`），它起作用了。我也`JBoss`以同样的方式从同一个文件夹中读取属性文件，它也可以工作。我真的被这个卡住了，什么可能导致这种奇怪的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:01:56.333

1.  添加`null`检查以确保您可以实际找到资源（即`Validate.notNull(templateIS, "%s not found in classpath", REPORT_DESIGN)`或类似的）。这将确保您可以真正找到报告。

2.  检查您的 BIRT 报告中是否有变音符号（代码点 > 128 的字符）。如果有，请确保报告的编码正确，并且文件实际上是该编码。

# node.js - 如何从 node-memcached get 函数返回结果？

> ID：12191711
> 
> 赞同：1
> 
> 时间：2012-08-30T07:14:17.980
> 
> 标签：node.js

节点 memcached 具有`get`检索 memcachd 键值的功能，例如：

```
memcached.get( "hello",function( err, result ){
if( err ) console.error( err );
this.r = result;
console.dir( result );
memcached.end();}); 
```

函数中的第二个参数是回调函数
中的回调函数，我可以轻松地记录我的键的值。
我试图分配一个属性`r`，`memcached`当我尝试记录`memcached.r`外部`get`函数`undefined`结果时。
我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T02:44:50.017

尽管`this`看起来像一个变量并且经常表现得像一个变量，但它并不是真正的变量，因此在闭包中的行为不像一个变量。当您将一个函数嵌套在另一个函数中时，内部函数将获得一个全新的版本，`this`该版本不太可能与外部函数的`this`.

`this`因此，如果您需要在内部函数中引用外部函数，则必须先将其复制到真正的变量中（大多数人喜欢调用它，`self`但有些人更喜欢`that`），然后在内部函数中引用该变量。

但是，在您的情况下，您已经有了一个真正的变量，即`memcached`，您可以分配给它，因此只需在回调中替换`this`为。`memcached`它是由您的回调创建的闭包的一个适当范围的外部变量（从您可以在其中使用的事实可以看出`memcached.end()`）。

[更新以包含评论中提到的正确格式的代码版本]

```
memcached.get = function get(key, callback) {
  if (Array.isArray(key)) return this.getMulti.apply(this, arguments);
  this.command(function getCommand (noreply) {
    return { key: key , callback: callback ,
      validate: [['key', String], ['callback', Function]] ,
      type: 'get' , command: 'get ' + key };
  });
}; 
```

看起来您正在尝试异步调用多个函数并期望`return`从它们中获取值。那根本行不通。

# ant - Ant，从远程机器下载文件集

> ID：12191713
> 
> 赞同：0
> 
> 时间：2012-08-30T07:14:22.490
> 
> 标签：ant, download, scp, fileset

正如我读过的那样，当通过 scp 任务从远程机器下载文件时，ant 不提供 'fileset' 属性。从本地机器发送文件时它可以工作，但在远程机器上启动时它不起作用。那是来自文档。因此，在远程机器中，我在每个目录中都有一些文件夹和文件加载。我想从每个文件夹中下载所有文件夹和一个指定文件。下载所有文件然后删除不需要的文件将不是解决方案，因为有数千个文件。

所以。如何从远程机器的指定目录下载所有文件夹（仅在磁盘上创建没有内容的文件夹），然后从远程机器的每个目录下载一个指定的文件并使用ant将其放到相应的文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:26:35.110

由于您没有指定，我假设您的本地和远程系统是基于 unix 的，因此支持[rsync](http://en.wikipedia.org/wiki/Rsync)和 ssh。

一个更跨平台的解决方案具有挑战性……

# 例子

## 配置 SSH

生成 SSH 密钥（指定一个空密码）：

```
ssh-keygen -f rsync 
```

这将生成 2 个文件，对应于私钥和公钥：

```
|-- rsync
`-- rsync.pub 
```

在远程服务器上安装公钥

```
ssh-copy-id -i rsync.pub user@remote 
```

测试您现在可以执行无密码登录，使用 ssh 私钥进行身份验证：

```
ssh -i rsync user@remote 
```

## 蚂蚁

“下载”目标调用 rsync 在本地复制远程文件系统树。如果需要，可以另外指定 rsync 排除项（请参阅 rsync 文档）。

```
<project name="rsync" default="download">

    <target name="download">
        <exec executable="rsync">
            <arg line="-avz -e 'ssh -i rsync' user@remote:/path/to/data/ data"/>
        </exec>
    </target>

    <target name="clean">
        <delete dir="data"/>
    </target>

</project> 
```

# python - 在 twilio Rest API 上使用 Status_Callback

> ID：12191719
> 
> 赞同：2
> 
> 时间：2012-08-30T07:14:35.417
> 
> 标签：python, rest, twilio

当用户挂断或完成时，我试图从 twilio 获得通知。我已经获得了呼叫用户的代码，但呼叫完成后我无法收到通知。

```
from twilio.rest import TwilioRestClient

def call():
    account_sid = '************************'
    auth_token = '***********************'

    client = TwilioRestClient(account_sid, auth_token)

    call = client.calls.create(to='+254723453841',
                       from_='+1 214-390-9422',
                       url='https://dl.dropbox.com/u/*******/acceptanceOfTerms.xml',
                       if_machine='Hangup', timeout=20,  status_callback='https://dl.dropbox.com/u/*******/response.xml' )

     print call.sid

     print 'The Sid is '+ call.sid+' and the call status is '+call.status 
```

Frrm twilio 文档[http://www.twilio.com/docs/quickstart/python/rest/call-request](http://www.twilio.com/docs/quickstart/python/rest/call-request)您应该包含一个用于通知的 url。我的问题是 url 中这个文件的内容应该是什么，以及我如何才能收到关于呼叫已完成或拒绝等状态的返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:11:58.143

我在那里找到了答案：http: [//www.twilio.com/docs/api/twiml/twilio_request](http://www.twilio.com/docs/api/twiml/twilio_request)

在收到呼叫、从您的应用程序请求 TwiML、对其进行处理并最终结束呼叫后，Twilio 将向为被呼叫的 Twilio 号码（如果有）配置的 StatusCallback URL 发出异步 HTTP 请求。通过为您的 Twilio 号码提供 StatusCallback URL 并捕获此请求，您可以确定呼叫何时结束并接收有关呼叫的信息。

请求参数

Twilio 在对 StatusCallback URL 的异步请求中传递给应用程序的参数包括在同步 TwiML 请求中传递的所有参数。

按照链接[http://www.twilio.com/docs/api/twiml/twilio_request#synchronous](http://www.twilio.com/docs/api/twiml/twilio_request#synchronous)

当 Twilio 收到对您的某个 Twilio 号码的呼叫时，它会向为该号码配置的语音 URL 发出同步 HTTP 请求，并期望收到 TwiML 作为响应。Twilio 将以下参数及其请求作为 POST 参数或 URL 查询参数发送，具体取决于您配置的 HTTP 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:11:19.233

```
status_callback (string) – A URL that Twilio will request when the call ends to notify your app. 
```

~~除了“请求”它之外，他们不会说它通过 URL 发送的内容，因此您必须反复试验才能找出答案。~~ 它将发回您发送给它们以打开呼叫的相同参数。

给它一个回调 url - 一个在你的控制下访问服务器的 - 看看会发生什么。希望它会传递一些参数（通过 GET 或 POST）来标识哪个调用已结束。您可能还需要嗅探远程 IP 地址以确认它来自正确的人。

```
status_method (string) – The HTTP method Twilio should use when requesting the above URL. 
```

有了这个，你可以告诉它大概是“获取”还是“发布”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T13:42:53.687

```
import configobj
from twilio.rest import TwilioRestClient
import time

 def call_to(url, to):

    cfg = configobj.ConfigObj("config.ini")
    sid = cfg["twilio"]["sid"]
    auth_token = cfg["twilio"]["auth_token"]
    twilio_number = cfg["twilio"]["twilio_number"]

    client = TwilioRestClient(sid, auth_token)

    call = client.calls.create(
        to=to,
        from_=twilio_number,
        url=url
    )

    for i in range(0,10):
        print i
        time.sleep(5)
        sid=call.sid
        callinfo = client.calls.get(sid)
        print callinfo.status 
```

[![在此处输入图像描述](../Images/2aaf0a02e1588f599fbc06b2b7da1541.png)](https://i.stack.imgur.com/vlpm4.jpg)

# java - 如何在 wmic 输出中使用分隔符来分隔列？

> ID：12191721
> 
> 赞同：1
> 
> 时间：2012-08-30T07:14:42.440
> 
> 标签：java, windows, windows-7, groovy, wmic

我想获取某种格式的 Windows 修补程序列表，其输出可以用一些分隔符分隔。到目前为止，我找到了一个 wmic 命令，它给了我想要的输出，但问题是`\s`分隔符在这里不起作用。有没有办法可以放置一些`,`或任何其他字符，以后可以在java程序中使用它来获取各个列？

命令

```
wmic qfe get caption,csname,description,hotfixid,installedby,installedon 
```

输出

```
Caption                                        CSName    Description      HotFixID   InstalledBy          InstalledOn
http://go.microsoft.com/fwlink/?LinkId=161784  Abhishek  Update           KB971033   NT AUTHORITY\SYSTEM  3/15/2012
http://support.microsoft.com/?kbid=2032276     Abhishek  Security Update  KB2032276  NT AUTHORITY\SYSTEM  3/15/2012
..
. 
```

**更新**

我在尝试

```
for /f "tokens=1,2,3,4,5,6,7,8,9,10,11" %g in ('wmic qfe get caption,csname,description,fixcomments,hotfixid,installdate,installedby,installedon,name,servicepackineffect,status') do @echo %g,%h,%i,%j,%k,%l,%m,%n,%o,%p 
```

但它给了我无效的 GET 表达式

```
C:\Users\Abhishek\Desktop>for /f "tokens=1,2,3,4,5,6,7,8,9,10,11" %g in ('wmic qfe get caption,csname,description,fixcomments,hotfixid,installdate,installedby,installedon,name,servicepackineffect,status') do @echo %g,%h,%i,%j,%k,%l,%m,%n,%o,%p
Invalid GET Expression. 
```

这里有什么问题？这可能会为我解决问题。

**更多更新**

我什至尝试了以下命令，但这也不能解决空间问题

命令

```
for /f "tokens=1,2,3,4,5,6,7,8,9,10,11" %g in ('wmic qfe list') do @echo %g,%h,%i,%j,%k,%l,%m,%n,%o,%p 
```

输出

```
Caption,CSName,Description,FixComments,HotFixID,InstallDate,InstalledBy,InstalledOn,Name,ServicePackInEffect
http://go.microsoft.com/fwlink/?LinkId=161784,Abhishek,Update,KB971033,NT,AUTHOR,,Y\SYSTEM,3/15/2012,
http://support.microsoft.com/?kbid=2281679,Abhishek,Security,Update,KB2281679,NT,AUTHORITY\SYSTEM,3/15/2012,
http://support.microsoft.com/?kbid=2284742,Abhishek,Update,KB2284742,NT,AUTHORIT,,SYSTEM,3/15/2012,
http://support.microsoft.com/?kbid=2286198,Abhishek,Security,Update,KB2286198,NT,AUTHORITY\SYSTEM,3/15/2012, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:07:19.577

正如我在 wmic 的结果中看到的那样，列***至少***由**2 个空格**分隔。

```
Caption                                        CSName    Description      HotFixID   InstalledBy          InstalledOn
http://go.microsoft.com/fwlink/?LinkId=161784  Abhishek  Update           KB971033   NT AUTHORITY\SYSTEM  3/15/2012
http://support.microsoft.com/?kbid=2032276     Abhishek  Security Update  KB2032276  NT AUTHORITY\SYSTEM  3/15/2012 
```

因此，这可以通过使用`\s{2,}`正则表达式在 Java 中轻松解析：

```
String result = "...";
for (String line : result.split("\n")) {
     System.out.println("-> " + line);
     for (String column : line.split("\\s{2,}")) {
         System.out.println("  => [" + column.trim() + "]");
     }
 } 
```

输出：

```
-> Caption                                        CSName    Description      HotFixID   InstalledBy          InstalledOn
  => [Caption]
  => [CSName]
  => [Description]
  => [HotFixID]
  => [InstalledBy]
  => [InstalledOn]
-> http://go.microsoft.com/fwlink/?LinkId=161784  Abhishek  Update           KB971033   NT AUTHORITY\SYSTEM  3/15/2012
  => [http://go.microsoft.com/fwlink/?LinkId=161784]
  => [Abhishek]
  => [Update]
  => [KB971033]
  => [NT AUTHORITY\SYSTEM]
  => [3/15/2012]
-> http://support.microsoft.com/?kbid=2032276     Abhishek  Security Update  KB2032276  NT AUTHORITY\SYSTEM  3/15/2012
  => [http://support.microsoft.com/?kbid=2032276]
  => [Abhishek]
  => [Security Update]
  => [KB2032276]
  => [NT AUTHORITY\SYSTEM]
  => [3/15/2012] 
```

对于批处理方面，我无法帮助您，因为我对此一无所知:-)

**编辑：** 显然有一个开关应该生成一个CSV，你也可以很容易地用Java解析`/format:csv`。`wmic`我无法让它在我的机器上工作，但值得关注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T14:53:37.473

我最近为这类事情做了一些事情，并设法让它使用以下语法。下面的代码片段。

```
FOR /F "tokens=1,2,3,4,5,6,7,8 delims=," %%a IN ('WMIC /NODE:"%PCNAME%" PRODUCT GET 
IDENTIFYINGNUMBER^,INSTALLSOURCE^,NAME^,PACKAGECACHE^,PACKAGENAME^,VENDOR^,VERSION 
/FORMAT:CSV') DO (
 SET ELE1=%%a
 SET ELE2=%%b
 SET ELE3=%%c
 SET ELE4=%%d
 SET ELE5=%%e
 SET ELE6=%%f
 SET ELE7=%%g
 SET ELE8=%%h
 CALL :CheckIt
) 
```

# javascript - JavaScript：可选回调？

> ID：12191722
> 
> 赞同：3
> 
> 时间：2012-08-30T07:14:44.920
> 
> 标签：javascript

我编写了一个函数，它有 3 个参数，其中一个是回调函数。如何使回调成为可选参数，而无需在没有回调参数的情况下编写另一个函数？

```
function myFunction(arg1, arg2, callback){
    // do something

    // callback() if it has been passed
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-30T07:16:05.917

确保回调是一个函数，然后调用它。

```
function myFunction(arg1, arg2, callback){
    // do something

    typeof callback == "function" && callback();
} 
```

如果您想更好地控制调用它，请使用`call()`, `apply()`, `bind()`（无论实现您的目标）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T07:16:44.683

很简单，只需在调用之前检查是否定义了回调。

```
function myFunction(arg1, arg2, callback){
    // do something

    if (callback) {
        callback();
    }
} 
```

# windows-server-2008 - 客户端认证身份验证有效，但回发导致 403.7 错误

> ID：12191723
> 
> 赞同：0
> 
> 时间：2012-08-30T07:14:52.063
> 
> 标签：windows-server-2008, iis-7.5, asp.net-4.0, http-status-code-403, client-certificates

我的任务是利用客户端认证身份验证在外部供应商和我们的 Web 表单之间进行通信。我已经使用 oneToOneMappings 设置了 iisClientCertificateMappingAuthentication 并且身份验证工作正常。SSL 设置设置为“需要 SSL”，客户端证书为“需要”，这是项目要求。

信息：

1.  Web 窗体使用 ASP.NET 4.0。
2.  IIS 7.5
3.  视窗服务器 2008 R2

场景：

1.  外部供应商使用客户认证身份验证向我们发布信息。
2.  信息在网络表单中进行解释和显示。
3.  提交后，订单被创建，用户将被重定向到同一页面，但附加了一个创建订单 ID 的查询字符串。

问题：

重定向后，将出现“403.7 - 禁止访问：拒绝访问”。有人可以提供一些建议吗？是否可以只要求客户端证书身份验证一次，以便任何回发或导航到其他页面都不需要再次身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:05:59.927

发现错误是由直接重定向到目标站点而不是通过提供客户端证书进行身份验证的代理网络引起的。改为将重定向更改为代理，问题就解决了。

# magento - 如何将搜索结果页面从 magento Go 中剩下的 3 列更改为 2 列？

> ID：12191724
> 
> 赞同：0
> 
> 时间：2012-08-30T07:14:58.257
> 
> 标签：magento, layout

我需要使用左栏将搜索结果页面布局从 3 列设置为 2 列。

但我没有从哪里可以改变，因为我没有 xml 文件

谁能帮我找到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T07:51:40.947

我必须在 Magento go 中做同样的事情，所以我所做的是使用主题编辑器更改块的位置并使用 css 增加主列的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:48:14.773

去`\app\design\frontend\default\your theme\layout/catalogsearch.xml`

**在第 52 行：**

`<action method="setTemplate"><template>page/3columns.phtml</template></action>`

**变成：**

`<action method="setTemplate"><template>page/2columns-left.phtml</template></action>`

# eclipse - 如何生成 PDE 测试类列表？

> ID：12191732
> 
> 赞同：0
> 
> 时间：2012-08-30T07:15:17.383
> 
> 标签：eclipse, ant, junit

我正在试验[本文的示例代码](http://www.eclipse.org/articles/article.php?file=Article-PDEJUnitAntAutomation/index.html)

我有一个代码的工作示例，但文章的作者谈到了 PDE 测试类列表：

> PDE 测试运行程序进程将要在 PDE 测试运行中运行的测试类的逗号分隔列表作为参数。在示例代码中，要运行的单个测试类的名称是硬编码的，即 phonebookexample.dialogs.PhoneBookEntryEditorDialogTest 但 PDE 测试类列表的生成可以很容易地自动化。

他的示例中的代码在 -classnames 属性中使用了一个测试类：

```
<target name="run_pde_tests">
   <property name="test.classes.list" value="phonebookexample.dialogs.PhoneBookEntryEditorDialogTest"/>
   <mkdir dir="${test.reports.dir}/output/ws"/>
   <java dir="${plugin.dir}" classname="org.eclipse.equinox.launcher.Main" fork="yes" classpathref="equinox.launcher.class.path">
       <arg line="-application org.eclipse.pde.junit.runtime.uitestapplication -data ${test.reports.dir}/output/ws -dev bin -clean -port ${pde.test.port} -testpluginname PhoneBookExample -classnames ${test.classes.list}"/>
   </java>
</target> 
```

有没有人知道如何使用 ant 生成测试类列表并将此列表提供给 org.eclipse.pde.junit.runtime.uitestapplication 的 -classnames 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:00:55.237

我解决了我的问题。这是我的解决方案。我将 test.dir.totest 指向包含插件的目录。使用 java 文件创建文件集。该集合被转换为一个空格分隔的列表，并分配给一个 ant 属性。此属性在 java 任务中用于运行测试。

```
<!-- point to a directory with java files to PDE unit test -->
    <property name="test.dir.totest" location="/pathtomytestclasses/testplugin"/>
 <!-- Include all java files in the given directory and sub directories -->
 <path id="semantics.classpath">     
      <fileset dir="${test.dir.totest}" id="test.files">
           <include name="**/*.java"/>
      </fileset>
 </path>

 <!-- this will convert the java files to a space separated list -->
 <!-- ant place it in a javafiles ant property -->
 <!-- This property is passed in the arg line of the ant java task -->
 <!-- to run the PDE tests -->
 <pathconvert pathsep=" " property="javafiles">
      <path refid="semantics.classpath"/>
      <!-- this regex will create 3 groups -->
      <!-- group 1 is the path -->
      <!-- group 2 is the filename withouth the .java extension -->
      <!-- group 3 is the file extension -->
      <mapper type="regexp" from="^(.+)/([^/]+)$?.java" to="my.package.name.\2"/>
 </pathconvert> 
```

# jquery - jQuery：通过 HTML 选择下拉列表

> ID：12191738
> 
> 赞同：1
> 
> 时间：2012-08-30T07:16:02.550
> 
> 标签：jquery, drop-down-menu, special-characters, html-select, ampersand

我编写了一个 jQuery 函数，它允许我使用选项的 HTML 从下拉列表中选择一个选项。

```
$.fn.select = function( option ) {
    $(selector +  ' option').each(function() {
        if ($(this).text() == option)
            $(selector).val($(this).val());
    });
    return this;
}; 
```

该函数工作得非常好，除了包含与号 ( `&`) 的选项。在这种情况下，将无法正确选择相应的选项。

有什么办法可以使这项工作？

我知道`select`jQuery 已经存在一个函数；但是，似乎我的`select`函数能够覆盖现有函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:22:05.203

尝试替换`&`为`&amp;`然后比较它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:36:37.203

似乎可以正常工作`&`，有什么问题？

虽然换成`&`会`&amp;`更好。

# android - 如何使用 Asynctask 在 autocompletetextview 中接收来自服务器的输入？

> ID：12191742
> 
> 赞同：0
> 
> 时间：2012-08-30T07:16:28.663
> 
> 标签：android, android-asynctask, autocompletetextview

我正在使用 Asynctask 在 autocompletetextview 中从服务器检索列表，但我正在强制关闭。我的代码是：

```
public class Aixclass extends Activity 
{

    protected Void[] params1;
    String[] strarray;
    TextView myXmlContent;
    AutoCompleteTextView actv;
    static final String URL="http://cympac.com/apps/xmlfile.xml";
    static final String KEY_COMMAND = "command"; // parent node
    static final String KEY_WORD = "word";
    static final String KEY_EXPLANATION = "explanation";
    String stringXmlContent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newaix);
        TextView tv1=(TextView)findViewById(R.id.textView1);
        TextView tv2=(TextView)findViewById(R.id.textView2);
        TextView tv4=(TextView)findViewById(R.id.textView4);
        //TextView tv5=(TextView)findViewById(R.id.textView5);
        String text="Cympac Software Solutions Pvt Ltd. www.cympac.com";
        tv4.setText(text);
        tv4.setTextColor(Color.RED);
        Pattern pattern=Pattern.compile("www.cympac.com");
        Linkify.addLinks(tv4,pattern,"http://");
        tv4.setTextColor(Color.GREEN);

         actv=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        Button b1=(Button)findViewById(R.id.button1);
        Button b2=(Button)findViewById(R.id.button2);
        Button b3=(Button)findViewById(R.id.button3);
        Button b4=(Button)findViewById(R.id.button4);

        actv = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        actv.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                new Mytask1().execute(params1);

            }
        });

    }

    private class Mytask1 extends AsyncTask<Void,Void,String[]>
    {

        @Override
        protected String[] doInBackground(Void... params1) 
    {
        try{             
            URL url=new URL("http://cympac.com/apps/aixcomm.txt");
            BufferedReader buf = new BufferedReader(new InputStreamReader(url.openStream())); 

               String readString = new String();   

               ArrayList<String> val = new ArrayList();
               int i=0;

               while ((readString = buf.readLine()) != null) {
                   Log.d("line: ", readString);   
                   val.add(readString);
                   Log.d("values", val.get(i).toString());
                   i++;
               }

               /*String[] strarray = new String[val.size()];
                strarray = val.toArray(strarray);
                for(String s : strarray)
                Toast.makeText(getBaseContext(), "data:"+s, Toast.LENGTH_SHORT).show();*/

               String[] strarray = new String[val.size()];/// SEE THIS
               strarray = val.toArray(strarray);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        return strarray;
    }
        protected void onPostExecute(String[] result) 
        {
            ArrayAdapter<String> adapter = 
                new ArrayAdapter<String>(Aixclass.this,android.R.layout.select_dialog_item,strarray);
             actv.setThreshold(1);
             actv.setAdapter(adapter);
            super.onPostExecute(result);
        }

    }

} 
```

但我正在强制关闭。不使用 asynctask 我运行程序，它在模拟器上工作但在真实设备上失败。所以我使用 aynctask 但上面的代码显示强制关闭。当我点击 autocompletetextview 我得到“强制关闭”我的logcat 输出为：

```
 08-30 14:44:40.894: E/AndroidRuntime(1026): FATAL EXCEPTION: main
08-30 14:44:40.894: E/AndroidRuntime(1026): java.lang.NullPointerException
08-30 14:44:40.894: E/AndroidRuntime(1026):     at java.util.Arrays$ArrayList.<init>(Arrays.java:49)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at java.util.Arrays.asList(Arrays.java:171)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:125)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at com.example.cd16.Aixclass$Mytask1.onPostExecute(Aixclass.java:205)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at com.example.cd16.Aixclass$Mytask1.onPostExecute(Aixclass.java:1)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at android.os.AsyncTask.finish(AsyncTask.java:417)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at android.os.Looper.loop(Looper.java:123)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at java.lang.reflect.Method.invokeNative(Native Method)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at java.lang.reflect.Method.invoke(Method.java:521)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-30 14:44:40.894: E/AndroidRuntime(1026):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T10:40:41.810

问题出在这条线上`while ((readString = buf.readLine()) != null) {`。我想`String readString=new String()`是问题。

只需将 String 声明为`String readString`;

这可能会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:48:34.150

问题出在你的 doInBackground 中，你得到一些值为 null 你正在使用多个 try catch 假设其中一个失败了，当你将它用于某些操作时会发生什么，你得到空指针异常。最好的办法是调试您在什么时候收到错误并对操作进行空检查，例如读取值等。

```
strarray = new String[val.size()];/// SEE THIS
   strarray = val.toArray(strarray);
   return strarray; 
```

就像这里你假设 val 有一些价值但它可能是 null 因为你的其余代码在 try catch 中，这可能是错误点。在 DoInBackground 中的所有代码上放置一个 Try Catch 块。

# javascript - 如何知道鼠标按钮的当前状态（mouseup 状态或 mousedown 状态）

> ID：12191743
> 
> 赞同：6
> 
> 时间：2012-08-30T07:16:29.413
> 
> 标签：javascript, internet-explorer, google-chrome, mousedown, mouseup

在 Javascript 中，当我单击滚动条（页面中出现的任何滚动条）并将鼠标悬停在图像上时，图像再次开始拖动。

图像只能在鼠标按钮按下状态下拖动。

所以我试图通过了解鼠标按钮状态（mousedown 或 mouseup）来解决这个问题

这个问题只存在于**IE**和**chrome**中，而不存在于我尝试过的其他浏览器中。

Javascript：

```
document.onmousemove = mouseMove;
document.onmousedown = mouseDown;
document.onmouseup   = mouseUp;

function mouseMove(ev) {

    var mouseButtonState;
    // put code here to get mouseButtonState variable
    console.log('state of mouse is'+mouseButtonState);
} 
```

当我移动鼠标时，程序应该显示所需的`mouseButtonState` **向上**或**向下值**

我如何知道鼠标按钮的当前状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T08:42:36.753

## 在回答这个问题

我不太确定为什么您的系统决定在点击发生在浏览器*之外（或在图像之外）*时拖动图像..为了正确回答这个问题，我需要查看您的实际代码*（只是鼠标事件会做）*。但是，如果您实施我在下面提到的系统，那么您不应该遇到您要问的问题。

## 更多信息

好老的 Quirksmode 对此有话要说......这基本上相当于这样一个事实，即由于 W3C，您无法检测到鼠标移动处理程序中是否按下了左键，因为当没有按下任何按钮时`e.button`报告 0，而当左键被按下 - 你猜怎么着？-`e.button`报告 0！*（适用于 W3C 兼容的浏览器）*。这是我完全同意 Internet Explorer 的“二进制标志”实现的时候之一：

[http://www.quirksmode.org/js/events_properties.html#button](http://www.quirksmode.org/js/events_properties.html#button)

获得鼠标状态的唯一方法 - 我知道 - 是使用`mousedown`和- 检测和记录`mouseup`- 这听起来像你已经在做的事情。现在我还没有机会玩任何新的基于“触摸”的事件，他们可能会帮助你……但让它在跨浏览器上工作会很棘手。在一天结束时，有时您必须接受您在浏览器环境中工作，它永远不会像专门设计的应用程序那样流畅。

**适用于 Internet Explorer 的快速代码：**

```
document.body.onmousemove = function(e){
  e = e ? e : Event;
  if ( e.button == 1 ) {
    /// mouse button is pressed
  }
} 
```

**适用于 IE 和几乎其他任何东西的快速代码：**

```
var delm = document.documentElement ? document.documentElement : document.body;
var buttonPressed = false;

delm.onmousdown = function(e){
  buttonPressed = true;
}

delm.onmousup = function(e){
  buttonPressed = false;
}

delm.onmousmove = function(e){
  if ( buttonPressed ) {
    /// the button is pressed, but only whilst being 
    /// detected inside the browser
  }
} 
```

正如其他海报所指出的那样，您可以尝试实现一个系统，该系统可以检测用户指针何时离开/重新进入浏览器环境 - 但多年来我在这方面的所有尝试都不是很成功。Flash对此有更好的支持，但我怀疑你会想去那里......

## 边注

正如一些历史信息，今天可能仍然有用，在处理拖动图像时，旧版本的 Internet Explorer 要求在拖动成功之前将以下内容应用于图像。这防止了默认的浏览器拖动系统插入和妨碍。有比使用内联处理程序更好的方法来实现这一点，但我把它放在这里是为了简单明了。

```
<img src="..." ondragstart="return false;" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:31:02.647

在您描述的情况下，问题在于您正在处理`mouseup`和`mousedown`状态。您还应该考虑处理`blur`事件以了解鼠标已离开对象。您可能希望为其分配相同的处理程序`mouseup`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:19:19.377

为什么不直接使用可以处理此类事件的 jquery drag 呢？

如果你真的想绑定 mouseup 和 mousedown 你可以使用 jquery

```
$(object).on("mouseup",function(){}); 
```

# java - 如何停止liferay中的缓存？

> ID：12191744
> 
> 赞同：1
> 
> 时间：2012-08-30T07:16:30.753
> 
> 标签：java, jakarta-ee, liferay, portlet

我正在处理的站点有时需要对内容进行非常快速的更改，但是这些 portlet 会保留缓存，并且在特定时间内不会反映更改。我需要立即改变。一些消息来源建议使用 portal-developer.properties。但是我猜在生产中使用 portal-developer.properties 是不合适的。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:21:41.187

尝试`<expiration-cache>0</expiration-cache>`在 portlet.xml 中处理。请建议

# node.js - Express+node CSRF 禁止

> ID：12191745
> 
> 赞同：2
> 
> 时间：2012-08-30T07:16:32.453
> 
> 标签：node.js, express, csrf

我见过类似的问题，但没有一个解决方案对我有用。我正在使用 express 3，使用 ejs 进行模板化。令牌被填充到 html 中，如下所示：

```
<input type="hidden" name="_csrf" value="IS+SwCqr3j+vGW9QSqIk56ZC/"> 
```

这是我的模板 html 在输入字段中的样子：

```
<input type="hidden" name="_csrf" value=<%= token %>/> 
```

但是当我提交表格时，我得到

```
Error: Forbidden at Object.exports.error 
```

这是我的主要应用程序配置功能的样子

```
app.configure(function () {
    app.engine('.html', require('ejs').__express);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.static(__dirname + '/public'));
    app.use(express.session({
        store:  new mongoStore({
            url:'mongodb://localhost/test',
            maxAge: 300000
        }),
        secret: '076ee61d63ba104r4e34872411e433b2',
        cookie: {
            path     : '/',
            httpOnly : true,
            maxAge   : 1000*60*60*24*30*12
        }
    }));
    app.use(express.csrf());
    app.use(function(req, res, next){
        res.locals.token = req.session._csrf;
        next();
    });
    app.use(app.router);
}); 
```

会话运行良好，并且令牌正在被填充，所以我现在被困在做什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T07:27:40.850

如果有人遇到这个，我忘了在令牌周围添加引号

```
<input type="hidden" name="_csrf" value="<%= token %>"/> 
```

# msbuild - Msbuild 失败并显示错误消息“字典中不存在给定的键”。

> ID：12191750
> 
> 赞同：2
> 
> 时间：2012-08-30T07:16:52.127
> 
> 标签：msbuild

当我开始构建我的应用程序时，Msbuild 向我抛出了一个异常。如果有人对此错误有任何想法，请告诉我。

```
Unhandled Exception: Microsoft.Build.Shared.InternalErrorException: MSB0001: Internal MSBuild Error: The given key was not present in the dictionary.
=============
System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
at Microsoft.Build.Construction.SolutionProjectGenerator.AddMetaprojectReferenceItems(ProjectInstance traversalProject, ProjectInstance metaprojectInstance, ProjectInSolution project)
at Microsoft.Build.Construction.SolutionProjectGenerator.CreateMetaproject(ProjectInstance traversalProject, ProjectInSolution project, ProjectConfigurationInSolution projectConfiguration)
at Microsoft.Build.Construction.SolutionProjectGenerator.EvaluateAndAddProjects(List`1 projectsInOrder, List`1 projectInstances, ProjectInstance traversalInstance, String selectedSolutionConfiguration)
at Microsoft.Build.Construction.SolutionProjectGenerator.CreateSolutionProject(String wrapperProjectToolsVersion, Boolean explicitToolsVersionSpecified)
at Microsoft.Build.Construction.SolutionProjectGenerator.Generate()
at Microsoft.Build.Execution.ProjectInstance.GenerateSolutionWrapper(String projectFile, IDictionary`2 globalProperties, String toolsVersion, ILoggingService loggingService, BuildEventContext projectBuildEventContext)
at Microsoft.Build.Execution.ProjectInstance.LoadSolutionForBuild(String projectFile, PropertyDictionary`1 globalPropertiesInstances, String toolsVersion, BuildParameters buildParameters, ILoggingService loggingService, BuildEventContext projectBuildEventContext)
at Microsoft.Build.Execution.BuildManager.LoadSolutionIntoConfiguration(BuildRequestConfiguration config, BuildEventContext buildEventContext)
at Microsoft.Build.Execution.BuildManager.HandleNewRequest(Int32 node, BuildRequestBlocker blocker)
at Microsoft.Build.Execution.BuildManager.Microsoft.Build.BackEnd.INodePacketHandler.PacketReceived(Int32 node, INodePacket packet)
at Microsoft.Build.BackEnd.NodeManager.RoutePacket(Int32 nodeId, INodePacket packet)
at Microsoft.Build.BackEnd.NodeProviderInProc.RoutePacket(Int32 nodeId, INodePacket packet)
at Microsoft.Build.BackEnd.NodeEndpointInProc.SendData(INodePacket packet)
at Microsoft.Build.BackEnd.InProcNode.OnNewRequest(BuildRequestBlocker blocker)
at Microsoft.Build.BackEnd.BuildRequestEngine.RaiseRequestBlocked(BuildRequestBlocker blocker)
at Microsoft.Build.BackEnd.BuildRequestEngine.IssueBuildRequest(BuildRequestBlocker blocker)
at Microsoft.Build.BackEnd.BuildRequestEngine.ReportConfigurationResponse(BuildRequestConfigurationResponse response)
at Microsoft.Build.BackEnd.InProcNode.HandlePacket(INodePacket packet)
at Microsoft.Build.BackEnd.InProcNode.Run(Exception& shutdownException)

---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
at Microsoft.Build.Construction.SolutionProjectGenerator.AddMetaprojectReferenceItems(ProjectInstance traversalProject, ProjectInstance metaprojectInstance, ProjectInSolution project)
at Microsoft.Build.Construction.SolutionProjectGenerator.CreateMetaproject(ProjectInstance traversalProject, ProjectInSolution project, ProjectConfigurationInSolution projectConfiguration)
at Microsoft.Build.Construction.SolutionProjectGenerator.EvaluateAndAddProjects(List`1 projectsInOrder, List`1 projectInstances, ProjectInstance traversalInstance, String selectedSolutionConfiguration)
at Microsoft.Build.Construction.SolutionProjectGenerator.CreateSolutionProject(String wrapperProjectToolsVersion, Boolean explicitToolsVersionSpecified)
at Microsoft.Build.Construction.SolutionProjectGenerator.Generate()
at Microsoft.Build.Execution.ProjectInstance.GenerateSolutionWrapper(String projectFile, IDictionary`2 globalProperties, String toolsVersion, ILoggingService loggingService, BuildEventContext projectBuildEventContext)
at Microsoft.Build.Execution.ProjectInstance.LoadSolutionForBuild(String projectFile, PropertyDictionary`1 globalPropertiesInstances, String toolsVersion, BuildParameters buildParameters, ILoggingService loggingService, BuildEventContext projectBuildEventContext) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-13T16:42:47.727

这是一个内部错误。您可以通过异常类型以及错误代码 (MSB0001) 来判断。这意味着它只会发生在某些 MSBuild 版本中，并且可能只会发生在某些特定的项目文件中。

我见过在 VS2010 中出现类似错误并在后续版本中修复的情况。我见过一些情况，它没有出现在 VS2013 中，而是在 VS2015 或 VS2017 中引入（没有检查所有版本）。这些案件可能不相关。

要询问有关内部工具问题的正确问题，您需要花一些时间修改（简化）您的项目，直到您知道哪种项目文件更改（或源文件更改）会打开和关闭此问题，以及使用哪个工具版本（ s)。

# css - CSS - 覆盖继承的 text-decoration:line-through

> ID：12191753
> 
> 赞同：1
> 
> 时间：2012-08-30T07:17:16.070
> 
> 标签：css, inheritance, strikethrough

我创建了一个[小提琴](http://jsfiddle.net/Y7ZVp/)来演示这个问题。我希望下面的选择框是普通文本，其余的被删除。HTML 是：

```
<div class="strike">
    This is struck out text
    <select>
        <option>but</option>
        <option>and</option>
    <select>
    this is struck out, too.
<div> 
```

CSS是：

```
div.strike {
    text-decoration: line-through
}
div.strike select,
div.strike option {
    text-decoration: none
} 
```

然而，`select`盒子仍然被剔除。

如果您尝试以下操作，您会看到闪烁的删除文本！

```
div.strike select,
div.strike option {
    text-decoration: blink
} 
```

如何将`select`框设置回普通文本？

谢谢。

编辑：我在 Bugzilla 记录了一个[错误](https://bugzilla.mozilla.org/show_bug.cgi?id=786946)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:21:37.587

试试这些[http://jsfiddle.net/Y7ZVp/4/](http://jsfiddle.net/Y7ZVp/4/)

它工作正常。

否则你可以添加你的文字

标记并`line-through`放弃`.strike p`

你可以试穿它们

# java - Selenium WebDriver 第一个 Java 示例设置

> ID：12191754
> 
> 赞同：1
> 
> 时间：2012-08-30T07:17:15.963
> 
> 标签：java, maven, selenium-webdriver

我创建了 pom.xml 和一个示例文件 Selenium2Example.java 来设置 Maven。我按照这里的说明[http://seleniumhq.org/docs/03_webdriver.html#chrome-driver](http://seleniumhq.org/docs/03_webdriver.html#chrome-driver)

但是在将Selenium2Example.java 作为 Java 应用程序运行时出现错误**“选择不包含主要类型” 。**

这是我正在使用的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" >
        <modelVersion>4.0.0</modelVersion>
        <groupId>MySel20Proj</groupId>
        <artifactId>MySel20Proj</artifactId>
        <version>1.0</version>
        <dependencies>
            <dependency>
                <groupId>org.seleniumhq.selenium</groupId>
                <artifactId>selenium-java</artifactId>
                <version>2.25.0</version>
            </dependency>
            <dependency>
                <groupId>com.opera</groupId>
                <artifactId>operadriver</artifactId>
            </dependency>
        </dependencies>
        <dependencyManagement>
            <dependencies>
                <dependency>
                    <groupId>com.opera</groupId>
                    <artifactId>operadriver</artifactId>
                    <version>0.16</version>
                    <exclusions>
                        <exclusion>
                            <groupId>org.seleniumhq.selenium</groupId>
                            <artifactId>selenium-remote-driver</artifactId>
                        </exclusion>
                    </exclusions>
                </dependency>
            </dependencies>
        </dependencyManagement>
</project> 
```

这是我正在使用的 Selenium2Example.java：

```
package org.openqa.selenium.example;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.Chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.WebDriverWait;

public class Selenium2Example  {
    public static void main(String[] args) {
        // Create a new instance of the Chrome driver
        // Notice that the remainder of the code relies on the interface, 
        // not the implementation.
        WebDriver driver = new ChromeDriver();
        // And now use this to visit Google
        driver.get("http://www.google.com");
        // Alternatively the same thing can be done like this
        // driver.navigate().to("http://www.google.com");
        // Find the text input element by its name
        WebElement element = driver.findElement(By.name("q"));

        // Enter something to search for
        element.sendKeys("Cheese!");
        // Now submit the form. WebDriver will find the form for us from the element
        element.submit();

        // Check the title of the page
        System.out.println("Page title is: " + driver.getTitle());

        // Google's search is rendered dynamically with JavaScript.
        // Wait for the page to load, timeout after 10 seconds
        (new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
            public Boolean apply(WebDriver d) {
                return d.getTitle().toLowerCase().startsWith("cheese!");
            }
        });
        // Should see: "cheese! - Google Search"
        System.out.println("Page title is: " + driver.getTitle());        
        //Close the browser
        driver.quit();
    }
} 
```

运行时出现以下错误 Run as -> Run config -> (selecting Selenium2Example.java under TestNG

错误是

```
org.testng.TestNGException: 
Cannot find class in classpath: Selenium2Example
    at org.testng.xml.XmlClass.loadClass(XmlClass.java:76)
    at org.testng.xml.XmlClass.init(XmlClass.java:68)
    at org.testng.xml.XmlClass.<init>(XmlClass.java:54)
    at org.testng.xml.TestNGContentHandler.startElement(TestNGContentHandler.java:542)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:182)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(XMLDTDValidator.java:766)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1302)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:195)
    at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:17)
    at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:10)
    at org.testng.xml.Parser.parse(Parser.java:172)
    at org.testng.TestNG.initializeSuitesAndJarFile(TestNG.java:310)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:88)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:58:30.613

首先，你做出了正确的决定（从我的角度来看）使用 Maven、Java 和 WebDriver ;)

您所做的看起来像是您选择了错误的包或文件来运行！

这不是 Selenium 的问题，而是您的运行配置和 IDE 的问题！

我猜你使用Eclipse？

尝试右键单击要运行的文件-> 运行方式-> Java 应用程序

那应该可以解决您的问题...

如果你想用 Selenium WebDriver 做一些测试，别忘了选择一个测试框架。我会推荐 JUnit 甚至更好的 TestNG ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T08:00:36.613

java代码没有问题。请检查是否安装了正确的驱动程序。尝试使用 Firefox 驱动程序更改 chrome 驱动程序。

# ruby-on-rails - 如何在另一个列表中“打印”一个列表？

> ID：12191756
> 
> 赞同：0
> 
> 时间：2012-08-30T07:17:23.000
> 
> 标签：ruby-on-rails, ruby, macos, redirect, scaffold

我今天开始使用 Rails 并遇到了问题。

我创建了三个类：Item、Requisito 和 Video。最后两个有一个脚手架项：references

然后我将 Item 类指向其他两个项目。

```
class Item < ActiveRecord::Base
  attr_accessible :materia
  has_many :requisitos
  has_many :videos
end 
```

现在，我想打印所有内容。

项目名

item.requisito.type

item.video.link

所以我做了这个代码。

```
<h1>Listing items</h1>

<table>
  <tr>
    <th>Materia</th>
    <th>Requisitos</th>
    <th>Videos</th>
<th></th>
<th></th>
<th></th>
</tr>

<% @items.each do |item| %>
  <tr>
    <td><%= item.name %></td>
    <td>
        <% @items.requisitos.each do |requisito|%>
    <%= requisito.type %>
    <br>
    <% end %>
    </td>
<td>
    <% @items.videos.each do |video|%>
    <%= video.link %>
    <br>
    <% end %>
    </td>
   <td><%= link_to 'Show', item %></td>
   <td><%= link_to 'Edit', edit_item_path(item) %></td>
   <td><%= link_to 'Destroy', item, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Item', new_item_path %> 
```

如您所见，我只是对代码应该如何进行了一次尝试……正如我所料，这是错误的。有人可以指出正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:22:03.557

您的嵌套块应该不`each`迭代（视频相同）。所以像这样：`item.requisitos``@items.requisitos`

```
<% item.requisitos.each do |requisito|%>
  <%= requisito.type %>
  <br>
<% end %> 
```

和

```
<% item.videos.each do |video|%>
  <%= video.link %>
  <br>
<% end %> 
```

希望有帮助。

# iphone - 我正在使用 facebook ios sdk 3.0 登录我的应用程序 fb 登录工作但未连接到应用程序？

> ID：12191757
> 
> 赞同：0
> 
> 时间：2012-08-30T07:17:28.693
> 
> 标签：iphone, ios, facebook

这是我用于我的应用程序的 Facebook 登录的代码。我只是按照这个[链接](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

```
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{
switch (state)
{
    case FBSessionStateOpen:
        if (!error) {
            // We have a valid session
            NSLog(@"User session found");
        }
        break;
    case FBSessionStateClosed:
    case FBSessionStateClosedLoginFailed:
        [FBSession.activeSession closeAndClearTokenInformation];
        break;
    default:
        break;
}

[[NSNotificationCenter defaultCenter]
 postNotificationName:FBSessionStateChangedNotification
 object:session];

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:error.localizedDescription
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertView show];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:24:21.640

您必须调用 openSessionWithAllowLoginUI。

# android - Android中的水平可扩展列表视图

> ID：12191763
> 
> 赞同：3
> 
> 时间：2012-08-30T07:17:54.697
> 
> 标签：android, user-interface, expandablelistview

我需要制作一个水平列表视图，在被点击时展开。实现这一目标的最佳方法是什么？谢谢 ！

也参考[这个](https://stackoverflow.com/questions/15000702/recycling-views-inside-a-horizontal-scrollview-android/15025196#15025196)问题。它也解决了类似的问题。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:06:02.903

我认为最好的解决方案是使用 setOnItemClickListener() 并在运行时使用 setLayoutParams(new LayoutParams(width, height)) 增加大小。

# excel - EXCEL（VBA）如何将sql查询值传递给变量？

> ID：12191766
> 
> 赞同：0
> 
> 时间：2012-08-30T07:18:06.180
> 
> 标签：excel, mysql-5.1, vba

我正在使用 MySQL 和 EXCEL(VBA) 如何将 sql 查询**值**传递给变量？

我有一个变量 Dim-ed：

```
Dim sqlVar As Variant 
```

它是变体，因为我不确定应该使用哪种类型。我已将 sql 查询设置为如下变量：

```
sqlVar = "SELECT datum FROM arfolyam ORDER BY datum ASC LIMIT 1 " 
```

但是像这样，它存储的是sql查询，而不是查询的值！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:41:13.337

```
...
Dim strSQL as String    
...
strSQL = "SELECT column FROM table ORDER BY column DESC LIMIT 1"
Set rs = cn.Execute(strSQL)   
variable1 = rs.Fields(0).Value 
```

这样，在这种情况下，sql 查询的值是一个单元格，将被赋予变量 1

# iphone - 如何在iphone应用程序中将int值从一个视图控制器传递到下一个视图控制器

> ID：12191767
> 
> 赞同：3
> 
> 时间：2012-08-30T07:18:07.680
> 
> 标签：iphone, xcode

我想将 myNumber 值发送到 iphone 应用程序中的下一个控制器，就像正常为 NSString 所做的那样，我正在这样做，但它不起作用

```
 int mynumber=100;
  NextViewController*targetController=[[NextViewController alloc]init];
  targetController.mynumber=mynumber;
  [self.navigationController pushViewController animated:YES]; 
```

下一个视图控制器

```
 int mynumber; 
```

实现 NextViewController

```
 int mydata=mynumber; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T08:13:44.350

在你`NextViewController.h`的文件中声明一个带有 var 名称`property`的类型，如下所示 -`int``mynumber`

```
NextViewController.h

@property (nonatomic) int mynumber; 
```

然后`synthesize`它在`NextViewController.m`

```
NextViewController.m

@synthesize mynumber; 
```

现在您可以`assign`照常操作了；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:12:02.097

在`NextViewController`整数的make属性中合成它。

```
@property(nonatomic) NSInteger mynumber; 

@synthesize mynumber; 
```

然后

```
int mynumber=100;
NextViewController *targetController=[[NextViewController alloc]init];
targetController.mynumber=mynumber;
[self.navigationController pushViewController:targetController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:16:11.653

您需要先在 NextViewController.h 中设置属性：

```
@property NSInteger mynumber; 
```

在 NextViewController.m 中：

```
@synthesize mynumber; 
```

Your code will work after these steps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-26T07:58:59.677

@property NSInteger mynumber;

And in NextViewController.m:

@synthesize mynumber;

work very good

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-30T07:46:57.703

我将您`AppDelegate.m`创建`int dataString;`为全局变量。现在使用它将数据从一个视图传递到另一个视图，方法是将您的代码添加到您的第一个视图中，就像`int FirstViewData = dataString;`现在类似地在您的第二个视图中调用它一样。

# java - mongodb 是否将系统时区保留为时区？

> ID：12191769
> 
> 赞同：2
> 
> 时间：2012-08-30T07:18:19.803
> 
> 标签：java, mongodb, datetime

我正在将 Java(JOOQ) 与 mongoDB 一起使用，

mongodb 是否将系统时区保留为时区？

有没有办法设置 mongoDB 的默认时区？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:27:54.927

不，mongo 不保留系统时区。在数据库中，日期以 UTC 格式存储：

> BSON 日期值将自 Unix 纪元（1970 年 1 月 1 日）以来的毫秒数存储为 64 位整数。v2.0+ ：此数字已签名，因此 1970 年之前的日期存储为负数。

但是大多数司机在阅读时都会将日期转换回您当地的时区。我不确定 java 驱动程序，但在 c# 中，您实际上可以说驱动程序读取 utc 中的所有日期，并在客户端代码中自己转换到适当的时区。但默认情况下，c# 驱动程序将日期转换为计算机时区。

# android - 推荐跟踪 - 通过桌面浏览器安装应用程序时不起作用

> ID：12191776
> 
> 赞同：4
> 
> 时间：2012-08-30T07:18:55.697
> 
> 标签：android, google-analytics

我正在使用 google analytics 和[url builder](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-tracking)跟踪我的 android 应用程序的推荐。
一切都很好，除了当我尝试从计算机上的网页安装时。如果我去桌面浏览器，打开生成的链接并按安装，应用程序将不会收到推荐参数。

所有其他方法都有效：
- 如果我使用 adb shell 发送 INSTALL_REFERRER 意图，应用程序将按预期接收推荐参数
- 如果我从代码手动发送 Intent INSTALL_REFERRER，应用程序将按预期接收推荐参数
- 如果我扫描由生成的 qrcode使用我的设备的[url builder](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-tracking)，该应用程序将按预期接收推荐参数

这是否意味着当用户从桌面通过网页安装应用程序时不会通过推荐？
如果不是，是什么让这个案例如此特别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:18:21.700

人们注意到市场应用程序的更高版本发生了变化，请参见[此处](https://code.google.com/p/android/issues/detail?id=19247)。问题是引用者在应用程序第一次启动时通过，而不是在安装后立即通过。

但如果这不是您的问题，那么可能是旧 Android 版本的已知问题，[在此处](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#known-issues)描述。我发现一篇[博客文章](http://support.hasoffers.com/entries/22326108-google-play-web-versions-not-tracking-install-referrer)解释了如何通过重定向链接来克服这个问题。

# r - R：具有观察子集的多项 Logistic 回归（面板数据）

> ID：12191777
> 
> 赞同：0
> 
> 时间：2012-08-30T07:19:06.833
> 
> 标签：r, regression

我有面板数据和不同工作日的观察结果，可以在 R 中运行多项 Logistic 回归。

我知道那个`mlogit`包，在它的使用定义中包含这个主题：

`mlogit(formula, data,`**`subset`**`, weights,....)`

但我没有任何包含工作日之间相关性的示例。

是否可以？你有什么例子吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:02:07.523

不确定我是否理解正确，但我会试一试。我认为您必须确保您的数据（子集或非子集）以正确的方式构建。您需要观察每个离散选择中的每个单元（也包括未采取的选择）。可能是拿一个子集搞砸了。根据我对 mlogit 包的经验，这是一个棘手的问题。发现`vignette('mlogit')`很有帮助。

# aop - 模板类的 Spring AOP 切入点不起作用

> ID：12191778
> 
> 赞同：0
> 
> 时间：2012-08-30T07:19:14.340
> 
> 标签：aop, spring-aop, pointcuts, template-classes

我有以下课程作为我的切入点

```
 public class GenricExceptionMapper implements ExceptionMapper<Exception> {

Logger logger = Logger.getLogger(GenricExceptionMapper.class);
public Response toResponse(Exception exception) {
    logger.error(exception.getStackTrace());
    logger.info("Exception Thrown");
    String res="500 - Internal Server Error";
    exception.printStackTrace();
    logger.debug("Sending Http Response :"+res);
    return Response.status(500).entity(res).build();
}

} 
```

以及为它定义的以下建议......

```
 @Aspect
 public class ExceptionMapperAspect {
Logger logger = Logger.getLogger(ExceptionMapperAspect.class);

//@Context HttpServletRequest servletRequest;

@AfterReturning( pointcut="execution(* toResponse(..))")
public void logExceptionAspect()
{
    //logger.info("statsKey in request object "+servletRequest.getAttribute("statsKey"));
} 
```

当我尝试运行它时，我收到以下异常错误消息..

**

> 找不到接口 javax.ws.rs.ext.ExceptionMapper 的类型参数

** 这个类抛出错误 [http://grepcode.com/file/repo1.maven.org/maven2/org.jboss.resteasy/resteasy-jaxrs/2.2.2.GA/org/jboss/resteasy/ util/Types.java#Types.getActualTypeArgumentsOfAnInterface%28java.lang.Class%2Cjava.lang.Class%29](http://grepcode.com/file/repo1.maven.org/maven2/org.jboss.resteasy/resteasy-jaxrs/2.2.2.GA/org/jboss/resteasy/util/Types.java#Types.getActualTypeArgumentsOfAnInterface%28java.lang.Class%2Cjava.lang.Class%29)

RESTEasy 代码的一部分。

这是因为“Spring AOP 无法建议实现模板接口的切入点类”吗？有任何想法吗？Spring AOP 如何为实现参数化接口的类创建代理对象？...它使用 CGLIB 还是 JDK 代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:52:20.517

我认为您的问题出在其他地方。我用谷歌搜索了你的例外

> 找不到接口的类型参数

并发现它与 JBoss RESTEasy 相关。尝试注释掉部分类或方面代码，直到找到罪魁祸首。

顺便说一句，您的实现`toResponse`返回原始类型。这样做是`Response<Exception>`为了更加类型安全并避免警告。

# google-analytics - 谷歌分析 API 的配额限制

> ID：12191783
> 
> 赞同：4
> 
> 时间：2012-08-30T07:19:31.237
> 
> 标签：google-analytics, google-analytics-api

我正在开发一个应用程序，该应用程序使用 Google Analytics API v3 从用户 Google 分析帐户访问数据并生成不同的报告。该应用程序将使用 cron 脚本为每位用户每天生成大约 30 个 API 调用并更新我们的数据库。

问题是我们在 Core Reporting API 上的每个配置文件每天 10,000 个请求的配额限制。有了这个限制，我们不能超过 10000/30 即。333 个用户。这是决定项目可行性的关键因素。我见过类似的应用程序在相同的概念上工作，但拥有非常大的用户群。

请帮我找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T12:30:59.517

[Google Analytics API 的配额政策](https://developers.google.com/analytics/devguides/reporting/core/v3/#quota_policy)

您将需要为每个帐户创建更多配置文件并点击每个帐户。2 个配置文件将您的配额增加到 20,000 个，依此类推，因为您添加了配置文件。编写 cron 作业以在接近配额或运行一定次数后切换到不同的配置文件。

或者，您可以要求 Google 增加配额：

> 如果您认为您的应用程序需要额外的每日配额，您可以使用 API 控制台中的“请求更多”链接请求更多配额。请简要说明您需要此额外配额的原因。有关配额管理以及如何针对配额使用微调应用程序的更多详细信息，请参阅监控、过滤和限制使用部分。

如果您需要如此频繁地访问分析数据，您可能需要考虑使用 Google Analytics 以外的服务或使用[Google Analytics Premium](http://www.google.com/analytics/premium/features.html)将每年 150,000 美元的成本转嫁给您的客户。

基本的谷歌分析是免费的，谷歌正试图阻止人们滥用它并引导重度用户使用它的高级服务。您所要求的超出了 GA 愿意免费提供的范围。

**更新（2013 年 3 月 6 日）：**

每天的请求可以增加，但每个配置文件的请求不能根据谷歌的配额增加请求表（感谢@fuzzybee 的澄清）：

> > 此表单用于请求增加每个项目每天的请求限制（默认为 50,000 个请求/天）。
> > 
> > 以下配额不能增加：每个配置文件的每日限制（10,000 个请求/天）、每个 IP 10 QPS 和每个配置文件 10 个并发请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-23T07:30:57.967

在使用 API 向多个用户显示我公司的分析数据时，我遇到了类似的问题。这就是我解决问题的方法。

设置 cron 任务以将数据添加到您的数据库，您的所有用户都可以查询数据库以获取最新数据。这样，用户就不会直接调用 API。因此，API 调用的数量将不依赖于尝试访问数据的用户数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:54:02.970

即使您创建了多个帐户，谷歌仍会根据您发送请求的 IP 来跟踪您。

我今天将亲自为我的一个申请尝试这个，并会让你知道我的结果..

同时..如果有人能够为此制定出完整的证明计划，请在此处分享。

# android - onActivityResult 总是返回 0

> ID：12191785
> 
> 赞同：1
> 
> 时间：2012-08-30T07:19:34.057
> 
> 标签：android, android-activity

我有 LoginActivity 在登录后返回结果。但是，我总是在`onActivityResult()`方法中得到 0。我无法找到原因。这是我的代码：

**MainActivity.java：**

```
@Override
protected void onResume() {
    super.onResume();

    Intent intent = new Intent(this, LoginActivity.class);
    startActivityForResult(intent, R.id.login);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

     if (requestCode == R.id.login || resultCode==RESULT_OK)
    synchronizeContacts(R.id.contactList);
     }
} 
```

**登录活动.java：**

```
private TaskCompleteListener<CsResult> taskCompleteListener = new TaskCompleteListener<CsResult>(){
    @Override
    public void onComplete(int requestId, CsResult result) {
        if (result==null || result.return_code!=0){
            String message = !TextUtils.isEmpty(result.return_message) ? result.return_message : getString(R.string.msg_invalid_user);
            JAppUtils.showMsg(LoginActivity.this, message, MsgType.ERROR);
            return;
        }
        Log.d(TAG, "***** I can see this is called ******");
        setResult(RESULT_OK);
        finish();
    }
};

public void loginClick(View view){
    LoginTask task = new LoginTask(this);
    task.setTaskCompleteListener(taskCompleteListener);
    task.setLoginUser("user_id", "password");
    task.execute(ServerConfig.URL);
} 
```

当我调试或查看日志时，`taskCompleteListener.onComplete()`方法调用正确并返回`MainActivity`调用`onActivitResult()`方法。`RequestCode`是对的，但`resultCode`总是如此`Activity.RESULT_CANCEL`。

我可以再次检查什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:23:49.467

尝试这个：

```
 Log.d(TAG, "***** I can see this is called ******");
        setResult(RESULT_OK, new Intent());
     finish(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:33:22.597

尝试这个

```
Intent intent = new Intent(this, LoginActivity.class);
startActivityForResult(intent, 1); 
```

在你`onActivityResult()`使用这个。

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode == 1 && resultCode == RESULT_OK && data != null )
    {                       
      // Here you can get the username and password         
    }       
} 
```

在您的登录活动中

```
 Intent intent = getIntent();
 intent.putExtra("UserName", user_id); // Place your information.
 intent.putExtra("Password", password);
 setResult(RESULT_OK, intent);  
 finish(); 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:37:25.650

我想知道一些事情。`onActivityResult()`您通过in方法调用下一个应用程序，`onResume()`因此示例中的活动生命周期如下所示。

onCreate -> onResume -> 下一个活动 -> 返回主活动 -> ???

现在我的问题是`onActivityResult()`之前`onResume()`还是之后？因为`onResume()`只要当前活动进入前台就会调用。所以我想知道是否是每次您进行授权过程时都会调用您的第二个 Activity 。

如果你只是想直接从主 Activity 移动到登录 Activity，你为什么不把`onResume()`代码片段放进`onCreate()`去呢？这样你就可以确定授权过程被调用一次，而且我看到的方式几乎没有什么不同。我并不是说这是解决方案，只是提供一些我注意到的想法。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-03-30T12:33:45.950

设置 RESULT_OK 设置请求代码的值不能为 -1,0 和 1，因为它已被 Android 使用。

```
E.g:
 startActivityForResult(5,new Intent());

and 
Intent intent = getIntent();
setResult(5, intent); 

Remember value must not be -1,0 or 1 as request code 
```

# ruby-on-rails - 网站放大 - 缩小

> ID：12191786
> 
> 赞同：0
> 
> 时间：2012-08-30T07:19:38.727
> 
> 标签：ruby-on-rails, ruby, html, refinerycms

当我想缩小整个网站时，我可以修改什么属性，如何修改以及在哪里修改。问题是当我打开我的网站时 - 它太“放大”了。我希望整个页面缩小约 10%。（网站是用refineryCMS，ruby on rails 制作的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:14:40.263

有一个 css 属性可以控制当前元素的放大倍数。元素的渲染效果是相机上的“缩放”功能。即使这个属性没有被继承，它仍然会影响子元素的渲染。

例子

```
div { zoom: 200% }
<div style=”zoom: 200%”&gt;This is x2 text </div> 
```

您可能可以将其应用于身体..

# c# - 使用 VSTO 在 Outlook 2010 中创建命令按钮

> ID：12191787
> 
> 赞同：1
> 
> 时间：2012-08-30T07:19:41.203
> 
> 标签：c#, outlook, vsto

我正在查看一些创建 Outlook 上下文菜单按钮的示例，如下所示：

```
 private void Application_ItemContextMenuDisplay(Microsoft.Office.Core.CommandBar CommandBar, 
                                                    Selection Selection)
    {

        var button = (Office.CommandBarButton)CommandBar.Controls.
                            Add(Office.MsoControlType.msoControlButton, missing,
                                missing, missing, missing);            
        button.accName = "SowSelectedItem";
        button.DescriptionText = "Show Selected item";
        button.Caption = button.DescriptionText;
        button.Tag = "ShowSelectedItem";
        button.Click += ContextMenuItemClicked;
    } 
```

这一次就可以正常工作 - 它在菜单上创建一个按钮就好了，它是可点击的，我的事件处理程序在第一次访问时触发。

但是，菜单激活会反复触发，并且每次运行时似乎都添加了另一个事件处理程序（但菜单上只显示一个按钮），因此现在单击该按钮会多次触发处理程序 - 对于之前进行的每次访问一次 - 使用点击处理程序正在累积（即使我每次都添加一个新按钮）。

好的，所以我想我可以：

*   设置一个标志并只加载一次按钮（在后续激活时不显示）
*   缓存按钮并每次添加（也不会在后续激活时显示）
*   缓存并使按钮每次可见并启用（不显示）

我觉得我在这里遗漏了一些东西。如何连接按钮，以便获得正确的按钮激活并且只命中一个事件处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:14:53.913

我仍然不太确定 Outlook 对按钮做了什么，但以下代码通过实现菜单激活和取消激活以及在取消激活中删除事件处理程序来解决该问题。

```
public partial class ContextMenuLookupAddin
{
    Outlook.Explorer currentExplorer = null;
    CommandBarButton contextButton = null;

    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        currentExplorer = Application.ActiveExplorer();
        Application.ItemContextMenuDisplay += Application_ItemContextMenuDisplay;
        Application.ContextMenuClose +=Application_ContextMenuClose;
    }

    private void Application_ItemContextMenuDisplay(Microsoft.Office.Core.CommandBar CommandBar, 
                                                    Selection Selection)
    {
        if (contextButton == null)
        {
            contextButton = (Office.CommandBarButton)CommandBar.Controls.
                                Add(Office.MsoControlType.msoControlButton, missing,
                                    missing, missing, missing);

            contextButton.accName = "SowSelectedItem";
        }

        contextButton.DescriptionText = "Show Selected item";
        contextButton.Caption = contextButton.DescriptionText;
        contextButton.Tag = "ShowSelectedItem";
        contextButton.FaceId = 4000;
        contextButton.OnAction = "OutlookIntegration.ThisAddIn.ContextMenuItemClicked";
        contextButton.Click += ContextMenuItemClicked;
    }

    private void Application_ContextMenuClose(OlContextMenu ContextMenu)
    {
        contextButton.Click -= ContextMenuItemClicked;
        contextButton.Delete(missing);
        contextButton = null;
    }

    private void ContextMenuItemClicked(CommandBarButton Ctrl, ref bool CancelDefault)
    {
        if (currentExplorer.Selection.Count > 0)
        {
            object selObject = currentExplorer.Selection[1];
            if (selObject is MailItem)
            {
                // do your stuff with the selected message here
                MailItem mail = selObject as MailItem;
                MessageBox.Show("Message Subject: " + mail.Subject);
            }
        } 
    }
 } 
```

# java - JavaEE 应用程序中的 app-inf 和 web-inf 文件夹有什么区别？

> ID：12191794
> 
> 赞同：12
> 
> 时间：2012-08-30T07:20:08.850
> 
> 标签：java, jakarta-ee, web-inf

您能否让我了解 javaEE 应用程序中 APP-INF 和 WEB-INF 文件夹之间的主要区别。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-31T07:57:50.997

**应用程序信息**

在包含许多 war 和 jar（例如 WebApp1.war、WebApp2.war、EJB1.jar 和 EJB2.jar。）的企业应用程序（EAR 应用程序）中，并假设所有这些模块都希望使用一些作为一部分可用的类一个罐子（common.jar）。所以在这种情况下最好把这个jar文件放在“APP-INF”目录下，这就是为什么我们不需要在每个模块中放置4次同一个Jar。

**网络信息**

WEB-INF 是一个目录，是Web 应用程序的私有区域，WEB-INF 目录下的任何文件都不能通过指定URL 直接从浏览器访问。

参见 EAR 应用程序结构；

![在此处输入图像描述](../Images/7c5e2ea0aa7e6316ddc34c64f388e7ac.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-01T21:48:26.860

> 您能否让我了解 Java EE 应用程序中 APP-INF 和 WEB-INF 文件夹之间的主要区别。

APP-INF 特定于 WebLogic。在 Java EE 标准中它不存在，因此对于 Java EE 应用程序没有什么可比较的。Java EE 确实有一个 [EAR]/lib 目录来代替非标准的 APP-INF/lib。可选地，可以在 [EAR]/META-INF/application.xml 中配置另一个目录"

```
<application>
   <library-directory>APP-INF/lib</library-directory>
</application> 
```

标准 Java EE 中的 APP-INF/类没有直接替代品。您还必须将它们打包并放入 [EAR]/lib 中。

# c# - 创建依赖于另一种类型 C# 的泛型类型

> ID：12191795
> 
> 赞同：0
> 
> 时间：2012-08-30T07:20:09.690
> 
> 标签：c#, list, generics, sortedlist

我有一个定义为的类

```
public class SerializableList<TList, TValue> : IXmlSerializable where TList : IList<TValue> 
```

当尝试实现构造函数以确保我有一个 TList 对象时，问题就出现了。

```
public SerializableList()
{
    FList = new TList();
} 
```

这会引发没有 new() 约束的预期错误。因为我希望能够使用

```
var myList = new SerializableList<SortedList<string>, string>(); 
```

这是否意味着我以错误的方式看待事物，或者有没有办法可以定义新的 FList 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:21:57.863

```
public class SerializableList<TList, TValue> : IXmlSerializable
    where TList : IList<TValue>, new() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:24:47.143

你想要的是[通用类型约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

在您的实例中，类声明需要是

```
public class SerializableList<TList, TValue> 
    : IXmlSerializable where TList : IList<TValue>, new() 
```

Where`new()`强制`TList`必须有一个无参数的构造函数

# web-services - 使用 Linkedin API 搜索人

> ID：12191798
> 
> 赞同：8
> 
> 时间：2012-08-30T07:20:16.723
> 
> 标签：web-services, api, rest, linkedin, mashup

我注意到在我的应用程序中使用 LinkedIn REST API，我有一个奇怪的行为

（我以比尔盖茨为例，但每个名字都这样）

第一个 REST 网址请求：

```
http://api.linkedin.com/v1/people-search:(people:(id))?first-name=bill&last-name=gates 
```

返回 110 个结果

第二个 REST url 请求：

```
http://api.linkedin.com/v1/people-search:(people:(id))?keywords=bill%20gates 
```

返回 0 结果

但是，根据 API 文档 (https://developer.linkedin.com/documents/people-search-api)，第二次搜索应该**至少**返回前一个请求返回的 110 个“账单门”，最后加上其他人他们个人资料中的一些“比尔盖茨”字符串（行业或学校名称中的“比尔盖茨”等）

我的第二个请求做错了什么还是什么？

**更新：** 这是第二个请求的[屏幕截图](http://postimage.org/image/c23ds2wvx/)，使用[LinkedIn REST Console](http://developer.linkedinlabs.com/rest-console/)完成。我想知道除了我之外的任何人是否通过复制该请求获得了 110 个结果......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T19:42:18.610

我发现 0 结果与我的网络有关：我与一个叫比尔盖茨的人没有任何一级或二级关系。

关键字搜索在您的网络内部工作，搜索一级和二级连接，同时名字/姓氏搜索在它之外工作，所以我的结果不是 0 与后者。

# c++ - 在 GPU 中使用八叉树组织 3D 体积数据

> ID：12191802
> 
> 赞同：4
> 
> 时间：2012-08-30T07:20:32.340
> 
> 标签：c++, opengl, graphics, 3d, glsl

我现在正在尝试使用 C++、OpenGL 和 GLSL（用于 GPU 加速）来实现 Ray Casting Volume Rendering。为了获得更好的质量和性能，我想用八叉树来组织3D医学体数据，这样我就可以很容易地使用一些算法，比如空间跳跃和自适应采样。

但是如何有效地构建八叉树呢？如何参观八叉树？当光线在体数据中传播时，如何确定采样点属于八叉树的哪个单元或叶？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T08:10:42.580

这里有一篇关于 GPU octree 的优秀文章（[这里](https://developer.nvidia.com/gpugems/GPUGems2/gpugems2_chapter37.html)也有可用的源代码[）](http://www.antexel.com/sylefeb/octreetex/)。然而，它是基于 Cg 的，但这可以被认为是一个优势。

看到您正在使用医疗数据，而且数据更密集，您可能还对[Cyril Crassin 的博士论文](http://maverick.inria.fr/Publications/2011/Cra11/)感兴趣，该论文使用流 GPU 稀疏八叉树来组织密集体素数据。在这里，八叉树是在 GPU 上构建的，使用 3D 体积纹理用于数据存储（叶节点）和用于分配内部节点的砖池，从底部向上构建，然后通过 mip-map'ed 进行光线投射。

如果你愿意弯曲一点，有一个关于使用 CUDA[的稀疏体素八叉树的](http://code.google.com/p/efficient-sparse-voxel-octrees/)大项目，这将为稀疏八叉树和光线投射提供有价值的见解。

# mysql - 用于频繁选择和偶尔更新的 Mysql 分区方案

> ID：12191805
> 
> 赞同：0
> 
> 时间：2012-08-30T07:20:35.497
> 
> 标签：mysql, partitioning

我有一个包含超过 500,000 条记录的 MySql 表。此表包含一些要检测和阻止的关键字，例如成人关键字。所以我要做的就是在这个表中查找一个单词，就会有一个`%like%`匹配。如果找到肯定的类似匹配，则将选择该关键字。

现在整个表上的这种匹配本质上会变慢。那么我可以按范围对这个表进行分区吗？像广告然后呃等等？如果是这样，我可以使用任何特定的引擎吗？

现在还有一种情况。该表将每周更新一次或更频繁。目前它是默认的 MyISAM 表。我读过 MyISAM 实现了表级锁定。那么每当这张表有更新时，他们不会从任何分区方案中受益吗？

那么谁能解释我可以在这种情况下使用哪种分区方案，或者我可以从任何分区方案中受益吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:49:14.370

如果您真的需要 %like%，则需要一种完全不同的方法。看看 Tries 和 Suffix Trees： [https](https://en.wikipedia.org/wiki/Trie) ://en.wikipedia.org/wiki/Trie https://en.wikipedia.org/wiki/Suffix_tree

# mvvm - 并行调用RIA服务的多个异步函数是否有效

> ID：12191806
> 
> 赞同：0
> 
> 时间：2012-08-30T07:20:39.817
> 
> 标签：mvvm, silverlight-4.0, wcf-ria-services

我正在使用带有 MVVM 架构的 SIlverlight 4.0 应用程序，使用 RIA 服务我正在调用 RIA 服务的多个异步函数，它为我提供了同一视图模型中不同实体的列表，最初它没有给出任何问题，但现在我得到了错误，例如“ **'TFM.Entities.Type' 类型已被多次映射。** 你能建议我任何解决方案来避免这种类型的错误.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:57:29.360

您的错误似乎来自实体框架而不是来自 ria 服务。你如何实例化你的 ObjectContext ？
一个可能的原因是您尝试从 DomainService 类中实例化一个附加的 ObjectContext，在这种情况下，请记住基类已经为您实例化了一个。

# javascript - ContentType 发送失败

> ID：12191810
> 
> 赞同：0
> 
> 时间：2012-08-30T07:21:03.340
> 
> 标签：javascript, ajax, json, cordova, jquery-mobile

在我的应用程序中，我有此代码。我注意到，内容类型无法发送。你知道如何强制发送吗？

```
$.ajax({                                                                   
        crossDomain: true,
        type: 'GET',
        url: 'http://serv/services/rest/contact/' + localStorage.getItem('contact'), 
        callback: 'jsonpCallback',
        jsonpCallback: 'jsonpCallback',
        jsonp: '_jsonp',
        **contentType:  'application/json',**
        dataType: 'jsonp json',
        timeout : 10000,

        success: function(data){
            $("#name").attr("value", data.response.label);
        }           },
        error: function (xhr, ajaxOptions, thrownError){
            alert("Status: " + xhr.status + ", Ajax option: " + ajaxOptions + ", Thrown error: " + thrownError);
        },
    }); 
```

我的请求标头是：

```
Accept:*/*
Accept-Charset:ISO-8859-2,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:pl-PL,pl;q=0.8,en-US;q=0.6,en;q=0.4
Connection:keep-alive
Cookie:JSESSIONID=F0ED33279488888888B35A731B40EE0C; oam.Flash.RENDERMAP.TOKEN=789456321
Host:serv
User-Agent:Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.1 (KHTML, like Gecko)                   Chrome/21.0.1180.83 Safari/537.1 
```

正如我所说，缺少 contentType。我错过了什么？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:35:38.327

您不需要请求的内容类型。

把你`dataType`改成`json`这样：

```
$.ajax({
    type: "GET",
    url: 'http://serv/services/rest/contact/' + localStorage.getItem('contact'), 
    dataType: "json",
    success: function(data){
        $("#name").attr("value", data.response.label);
    },
    error: function (xhr, ajaxOptions, thrownError){
        alert("Status: " + xhr.status + ", Ajax option: " + ajaxOptions + ", Thrown error: " + thrownError);
    }
}); 
```

而是将您的数据返回为`JSON`.

我确实注意到了您的`crossDomain: true,`，为此您需要阅读[Cross-Origin Resource Sharing](http://www.w3.org/TR/cors/#access-control-allow-origin-response-hea)，更准确地添加此标题`Access-Control-Allow-Origin: http://www.example.com`作为响应。

以 PHP 为例：

```
header('Access-Control-Allow-Origin: http://www.example.com'); 
```

示例`.htaccess`

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "http://www.example.com"
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:26:52.337

如果您要发布数据，则只能设置 Content-Type。所以你需要改变：

```
type: 'POST' 
```

您可能希望告诉服务器您接受的响应尝试：

```
accepts: 'application/json' 
```

有关更多信息，请参见此处[jQuery Ajax API](http://api.jquery.com/jQuery.ajax/)

# rest - JavaEE 示例 FirstCup dukesAge 的问题

> ID：12191811
> 
> 赞同：6
> 
> 时间：2012-08-30T07:21:17.070
> 
> 标签：rest, jakarta-ee, netbeans, jersey

昨天开始学习JavaEE，选择了Oracle官方指南[FirstCup上手](http://docs.oracle.com/javaee/6/firstcup/doc/gcrkm.html)

我将 Netbeans 7.2 与 GlassFish Server 3.1.2.2 一起使用，我确信我一步一步地遵循了每一个说明。但是我有两个问题：

1.  我没有看到文档中所说的任何 REST 资源配置对话框。
2.  最后我得到一个404错误。但是如果我将网址更改为

    ```
    http://localhost:8080/DukesAgeService/webresources/dukesAge 
    ```

    有用！我通过展开 RESTful Web Services-> 右键单击​​ DUkesAgeResource [dukesAge] -> 测试资源 Uri 得到了这个 url

我想知道：

1.  我可以在 1 中找到此 REST 资源配置对话框。

2.  如果 2 是 Oracle 文档中的打印错误。它说相对网址应该是`/resources/dukesAge`

3.  为什么 url 必须以 结尾`/webresources/dukesAge`，我可以更改它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T07:49:48.703

正如评论中所指出的，`NetBeans 7.2`为 RESTFul Web 服务实现了与以前版本不同的默认配置。在创建 Web 服务期间可以覆盖此标准配置。使用默认值创建后，您将无法再使用该向导（右键单击菜单中的配置选项显示为灰色）。

因此，为了查看/编辑 RESTFul 路径，您需要直接编辑自动生成的 Java 类：

1.  ApplicationConfig.java 类在注解中包含 RESTFul 主路径`@javax.ws.rs.ApplicationPath("webresources")`
2.  每个自动生成`XYZFacadeREST`的类都包含相对于注解中每个实体类的路径`@Path("entity.XYZ")`

如果您想拥有与教程中相同的路径，则需要替换`webresources`为`resources`(point 1) 并将点 2 中的路径替换为`dukesAge`.

# python - 如何跳出这个递归循环？

> ID：12191812
> 
> 赞同：0
> 
> 时间：2012-08-30T07:21:18.303
> 
> 标签：python, recursion, break

我仍然是 Python 的新手，所以请容忍我糟糕的语法和逻辑，如果有的话。无论如何，我有一个函数，我正试图干净地（请不要花哨的动作）打破递归循环。它是程序中的一个函数，它递归地遍历 1 和 0（参见下面的输入文件），并将相邻的 0 标识为不同的子集。我有一个名为“checkAllInOneDirection”的递归函数，它将遍历每个位置，向右、向左、向上、向下移动以检查 0。（对于每个递归，它在 4 个方向中的每一个上只剩下一个深度/更远）。

问题是由于某种原因，第三组的输出应该仅将 0,9 和 0,10 检测为一个不同的集合，但是当它在第二组检测后脱离递归时，它拾取 [0, 4] 和 [1 , 3] 在第三组检查的开始...有什么帮助吗？

这是输出 [行，列]：

```
Distinct subset found :  [[0, 0]]
Distinct subset found :  [[0, 3], [0, 4], [1, 3], [0, 5], [1, 4], [1, 5]]
Distinct subset found :  [[0, 9], [0, 4], [1, 3], [0, 10]] 
```

正确的第三个子集应该只有：

```
Distinct subset found :  [[0, 9], [0, 10]] 
```

这是一个示例输入文件：

```
01100011100100000
11100011111111011
10011111101011011 
```

这是该函数的一个片段，它被称为“checkAllInOneDirection”：

```
isItLast = checkLast(forBoo, bakBoo, upBoo, dwnBoo)
if isItLast:
    for each in tempCatch:
        if not each in finalCatch:
            finalCatch.append(each)
    tempCatch=[]
    for each in newCatch:
        if not each in finalCatch:
            finalCatch.append(each)
    newCatch=[]
    return finalCatch, newCatch, columnCount, rowCount, width, height, posToCheck, forBoo, bakBoo, upBoo, dwnBoo
else:
    for each in tempCatch:
        if not each in finalCatch:
            finalCatch.append(each)
    tempCatch =[]
    for each in newCatch:    
        if not each in finalCatch:
            finalCatch.append(each)
            tempCatch.append(each)
    newCatch = []

return checkAllInOneDirection(finalCatch,tempCatch,recursiveCount,newCatch, columnCount, rowCount, width, height, posToCheck, forBoo, bakBoo, upBoo, dwnBoo) 
```

这是整个功能，希望它只是澄清而不是让我的问题更加混乱：

```
def checkAllInOneDirection(finalCatch,tempCatch,recursiveCount,newCatch, columnCount, rowCount, width, height, posToCheck, forBoo, bakBoo, upBoo, dwnBoo):
    for each in range (0, len(tempCatch)):
        posToCheck = posToCheckBak = posToCheckUp = posToCheckDwn = [tempCatch[each][0], tempCatch[each][1]]
        newPosForward = checkForward(posToCheck, width)
        if newPosForward != False:
            tempLocale = locale[newPosForward[0]][newPosForward[1]]
        elif newPosForward == False:
            tempLocale = 1
        if newPosForward != False and tempLocale ==0 and not newPosForward in finalCatch and not newPosForward in newCatch:
            forVal = locale[newPosForward[0]][newPosForward[1]]
            newCatch.append(newPosForward)
            posToCheck = newPosForward
            forBoo = True
        elif newPosForward == False and tempLocale == 1 and not newPosForward in newCatch:
            forBoo = False

        newPosBackward = checkBackward(posToCheckBak)
        if newPosBackward != False:
            tempLocale = locale[newPosBackward[0]][newPosBackward[1]]
        elif newPosBackward == False:
            tempLocale = 1    
        if newPosBackward != False and tempLocale ==0 and not newPosBackward in finalCatch and not newPosBackward in newCatch:
            forVal = locale[newPosBackward[0]][newPosBackward[1]]
            newCatch.append(newPosBackward)
            posToCheckBak = newPosBackward
            bakBoo = True
        elif newPosBackward == False and tempLocale == 1 and not newPosBackward in newCatch:
            bakBoo = False

        newPosUp = checkUpRow(posToCheckUp)
        if newPosUp != False:
            tempLocale = locale[newPosUp[0]][newPosUp[1]]
        elif newPosUp == False:
            tempLocale = 1
        if newPosUp != False and tempLocale ==0 and not newPosUp in finalCatch and not newPosUp in newCatch:
            forVal = locale[newPosUp[0]][newPosUp[1]]
            newCatch.append(newPosUp)
            posToCheckUp = newPosUp
            upBoo = True
        elif newPosUp == False and tempLocale == 1 and not newPosUp in newCatch:
            upBoo = False

        newPosDwn = checkDwnRow(posToCheckDwn, height)
        if newPosDwn != False:
            tempLocale = locale[newPosDwn[0]][newPosDwn[1]]
        elif newPosDwn == False:
            tempLocale = 1
        if newPosDwn != False and tempLocale ==0 and not newPosDwn in finalCatch and not newPosDwn in newCatch:
            forVal = locale[newPosDwn[0]][newPosDwn[1]]
            newCatch.append(newPosDwn)
            posToCheckDwn = newPosDwn
            dwnBoo = True
        elif newPosDwn == False and tempLocale == 1 and not newPosDwn in newCatch:
            dwnBoo = False

    isItLast = checkLast(forBoo, bakBoo, upBoo, dwnBoo)
    if isItLast:
        for each in tempCatch:
            if not each in finalCatch:
                finalCatch.append(each)
        tempCatch=[]
        for each in newCatch:
            if not each in finalCatch:
                finalCatch.append(each)
        newCatch=[]
        return finalCatch, newCatch, columnCount, rowCount, width, height, posToCheck, forBoo, bakBoo, upBoo, dwnBoo
    else:
        for each in tempCatch:
            if not each in finalCatch:
                finalCatch.append(each)
        tempCatch =[]
        for each in newCatch:    
            if not each in finalCatch:
                finalCatch.append(each)
                tempCatch.append(each)
        newCatch = []

    return checkAllInOneDirection(finalCatch,tempCatch,recursiveCount,newCatch, columnCount, rowCount, width, height, posToCheck, forBoo, bakBoo, upBoo, dwnBoo) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:55:45.360

当使用递归时，你真的不应该使用像“loop”和“break”这样的短语。相反，将问题视为由在基本情况下变得微不足道的类似子问题组成。

您的一般问题是找到`0`与其他 's 相邻的`0`'s 。（顺便说一下，这称为[4 方向洪水填充](http://en.wikipedia.org/wiki/Flood_fill)。）所以较大的问题具有相同的子问题；所有已连接的列表与`0`以下组合相同：

*   仅包含一个“起点”的列表`0`
*   包含`0`“起点”右侧所有 ' 的列表`0`
*   包含`0`“起点”左侧所有 ' 的列表`0`
*   包含`0`“起点”上方所有 ' 的列表`0`
*   包含`0`“起点”下方所有 ' 的列表`0`

所以在你的递归函数的某个地方，你会有一些效果：

```
return [[y,x]] + getConnectedZeros(x+1, y) + getConnectedZeros(x-1, y) + getConnectedZeros(x, y+1) + getConnectedZeros(x, y-1) 
```

知道了这一点，您需要考虑您的基本案例，这些案例`getConnectedZeros()`必须返回与其子问题解决方案组合不同的东西。对我来说，基本情况是：

*   当函数在包含`1`
*   `0`当在已经“找到”的函数上调用函数时

对于这两种情况，只需返回一个空列表即可，因为何时`[]`返回，它代替了更多的递归调用。如果不包括这些条件，则递归将永远运行，并且永远不会~~休息~~打了一个基本案例。

基于这些想法，以下是您的问题的解决方案：

```
sampleInput = "01100011100100000\n11100011111111011\n10011111101011011"
inputMatrix = [[int(n) for n in row] for row in sampleInput.split('\n')] #matrix where each row is a list of the numbers from sampleInput

def getConnectedZeros(matrix, x, y, foundIndicies=[]):
    if 0<=y<len(matrix) and 0<=x<len(matrix[y]): #catch out of bounds
        if matrix[y][x] == 1: #catch 1s
            return []
        else:
            if not (x,y) in foundIndicies: #catch 0's we've already "seen"
                foundIndicies.append((x,y))
                return [[y,x]] + getConnectedZeros(matrix, x+1, y, foundIndicies) + getConnectedZeros(matrix, x-1, y, foundIndicies) + getConnectedZeros(matrix, x, y+1, foundIndicies) + getConnectedZeros(matrix, x, y-1, foundIndicies)
            else:
                return []
    else:
        return []

#Now we can just loop through the inputMatrix and find all of the subsets
foundZeroIndicies = []
subsets = []
y = -1
for row in inputMatrix:
    y += 1
    x = -1
    for val in row:
        x += 1
        if (not [y,x] in foundZeroIndicies) and val==0:
            zerosList = getConnectedZeros(inputMatrix, x, y)
            subsets.append(zerosList)
            foundZeroIndicies.extend(zerosList)
for subset in subsets:
    print "Distinct Subset Found  : ", subset 
```

希望这会有所帮助。（希望它是连贯的，现在是凌晨 5 点......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T08:48:38.743

我的代码是使用递归函数 walk() 的示例。我希望它能帮助你解决问题。

```
input = ['01100011100100000',
         '11100011111111011',
         '10011111101011011']
col_len = 17
row_len = 3

walked = []
output = []

def walk(subset_in, row, col):
    if (0 <= row < row_len) and (0 <= col < col_len) and (row, col) not in walked:
        walked.append((row, col))
        if input[row][col] == '0':
            if subset_in is not None:
                subset = subset_in
            else:
                subset = []

            subset.append((row, col))
            walk(subset, row, col+1)
            walk(subset, row+1, col)
            walk(subset, row, col-1)
            walk(subset, row-1, col)

            if subset_in is None:
                output.append(subset)

for row in xrange(row_len):
    for col in xrange(col_len):
        if (row, col) not in walked:
            walk(None, row, col)

for subset in output: print subset 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:44:06.613

要摆脱递归，您需要使用 return。如果您的递归进一步继续，您需要重新考虑您的基本情况。

只是为了好玩，我尝试为此使用 networkx，而不是它回答了您的问题：

```
data = """01100011100100000
11100011111111011
10011111101011011""".splitlines()

import networkx

G = networkx.Graph()
found = set()

for i, row in enumerate(data):
    for j, c in enumerate(row):
        if c == '0':
            found.add((i, j))
            if i + 1 < len(data) and data[i + 1][j] == '0':
                G.add_edge((i, j), (i + 1, j))
            if j + 1 < len(row) and row[j + 1] == '0':
                G.add_edge((i, j), (i, j + 1))

groups = map(list, networkx.connected_component_subgraphs(G))
group_nodes = set(node for group in groups for node in group)
individuals = found - group_nodes

print groups
print individuals

"""
[[(0, 15), (0, 14), (1, 14), (0, 13), (0, 12), (0, 16), (2, 14)], [(1, 3), (1, 4), (1, 5), (0, 5), (0, 4), (0, 3)], [(2, 1), (2, 2)], [(0, 9), (0, 10)]]
set([(0, 0), (2, 11), (2, 9)])
""" 
```

# php - 自动从服务器存储中获取数据然后上传到数据库

> ID：12191813
> 
> 赞同：-1
> 
> 时间：2012-08-30T07:21:22.483
> 
> 标签：php, mysql

我想问一下如何每天为我的网站（基于php和mysql）自动将数据插入数据库？数据源来自计算机服务器存储。场景是这样的：每天都会有不同格式的文件（可以是txt文件或excel文件）上传到我的电脑服务器。我想每天使用这些数据自动更新我的数据库。

之前非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:31:35.727

如果服务器是基于 Linux 的，您可以使用 cron 作业。在 cron 作业中，您必须设置为每天打开一次脚本。这样脚本将自动上传数据库中的信息。如果服务器是基于 Windows 的，您可以使用计划任务。您必须为浏览器制作脚本主页，并在计划任务中将其设置为每天打开一次浏览器，这样您就可以自动化它。我不完全确定，但这样你就必须手动关闭浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:32:37.640

cronjob 是此类工作的最佳选择。在 cronjob 中，您可以编写用于数据插入的脚本并根据需要设置时间。假设您设置了 24 小时，那么每 24 小时后，该脚本由 cronjob 执行，您的数据将被执行。希望它有一些意义。cronjob 是一个服务器选项，如果您的服务器支持它，您通常可以在底部通过它的名称找到它。快乐编码！

# objective-c - 自动布局正在调整我的窗口大小

> ID：12191817
> 
> 赞同：10
> 
> 时间：2012-08-30T07:21:36.413
> 
> 标签：objective-c, cocoa, appkit, autolayout, nslayoutmanager

我有一个启用了自动布局的笔尖，其中包含一个视图控制器的视图，另外还有一个带有占位符视图的窗口，可以将它们添加到其中。占位符具有相对于它的超级视图和窗口中的其他视图的约束，并且在涉及我的视图控制器之前，我让占位符按照我想要的方式调整窗口大小。稍后我加载笔尖并将其顶级视图添加为占位符的子视图，并且我还手动创建约束以使其与占位符的边缘对齐。

一切都很好，我在我的应用程序中的几个实例中使用了这种模式，但在某些情况下，添加视图后，我的窗口会调整大小！它正在缩小到添加视图的最小尺寸，而不是扩大到当前窗口大小的视图。

到目前为止，我发现防止这种情况发生的唯一方法是，在添加视图并创建其约束时，还要设置视图的框架，以使其具有占位符和窗口当前状态的初始大小。有时这没问题，但我希望能够定义更复杂的约束，而不是简单地将每个边缘与占位符超级视图对齐。我不想为每种情况编写帧算法。

有谁知道发生了什么？如果窗口已经决定了占位符的大小，而不是相反，那么在添加子视图以使当前窗口大小仍然优先时我该怎么办？

我已经看到 Xcode 的 IB 窗口中的弹出菜单似乎是关于仅影响子视图和超级视图的约束（对于我的所有笔尖都设置为前者），与此功能相关的是什么？我还没有找到任何关于它的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-09T05:23:32.167

您希望将抗压缩优先级设置为小于`NSLayoutPriorityWindowSizeStayPut`500 的值。这意味着窗口的大小优先于视图的大小。

您可以从 IB 大小检查器中进行设置。

![抗压优先](../Images/cfcf2814a7bd9538a6bf59f5237138f7.png)

或者您可以通过编程方式设置它`-[NSView setContentCompressionResistancePriority:forOrientation:]`

# highstock - 在标志上单击获取系列（图表）它在 highstock 上吗？

> ID：12191821
> 
> 赞同：0
> 
> 时间：2012-08-30T07:21:44.060
> 
> 标签：highstock

我有几个标志系列，每个系列都属于不同的图表（我使用 onSeries 道具）。我想知道当我点击它时标志在哪个图表上，这样当我在 plotOptions.series.point.events.click 中使用点击事件时，我可以获得图表点而不是标志点。

```
plotOptions.series.point.events.click = function(){console.log(this)} 
```

我试图将事件参数传递给回调，但没有任何关于它所在的图表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:55:08.187

你应该看看*this.options*数组。onSeries 选项可用于*this.options.onSeries*。

这是一个简单的例子：http: [//jsfiddle.net/yP5z3/1/](http://jsfiddle.net/yP5z3/1/)

# ruby-on-rails - Rails 引擎：仅在重新启动服务器时重新加载帮助程序

> ID：12191822
> 
> 赞同：12
> 
> 时间：2012-08-30T07:21:46.240
> 
> 标签：ruby-on-rails, helper, rails-engines

我目前正在尝试将功能转移到引擎中。到目前为止它工作得很好，但我有点困惑为什么引擎的某些部分总是在发生变化时自动重新加载，而有些则没有。

具体来说，添加辅助方法时，我必须重启 Rails 服务器，否则 Rails 看不到。这是正常行为吗？这是我的引擎的相关部分：

组件/iq_list.rb

```
# encoding: utf-8
require 'iq_list/engine'

# Load IqList Modules
module IqList
  extend ActiveSupport::Autoload
  autoload :Helpers
  autoload :Models
  autoload :Controllers
end 
```

组件/iq_list/engine.rb

```
module IqList
  class Engine < ::Rails::Engine
  end
end 
```

组件/iq_list/helpers.rb

```
module IqList
  module Helpers
    extend ActiveSupport::Autoload
    autoload :IqListHelper
  end
end 
```

组件/iq_list/helpers/iq_list_helper.rb

```
module IqList
  module Helpers
    module IqListHelper
      def some_method
        # ...
      end
    end
  end
end 
```

我对引擎还是很陌生，上面的很多代码都是我从别人的工作中得到的，所以请耐心等待。任何指向正确方向的提示都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T05:42:56.883

如果您需要在每次请求时重新加载引擎中的代码，则需要将其放在引擎初始化代码的 to_prepare 块中

```
module IqList
  class Engine < ::Rails::Engine
    config.to_prepare do
     ApplicationController.helper(IqListHelper)
    end
  end
end 
```

to_prepare 块中的代码保证在生产中运行一次，每次在开发中运行。

请参阅 Rails 指南以及 [此 Rails 引擎代码是什么意思：config.to_prepare &method(:activate).to_proc](https://stackoverflow.com/questions/5103860/what-does-this-rails-engine-code-mean-config-to-prepare-methodactivate-to-p)

和

[http://robots.thoughtbot.com/tips-for-writing-your-own-rails-engine](http://robots.thoughtbot.com/tips-for-writing-your-own-rails-engine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-03T16:58:21.557

看来您可能在使用 Engines 时发现错误的树。如果您想简单地实现关注点分离，您可能只想制作一些普通的旧 ruby​​ 类并将它们插入`lib/`（当然以有组织的方式）。

引擎将与您的“当前”项目分开开发，可能是通过 gem 引入的。包含的 gem 的更改将需要重新启动服务器 AFAIK。

# php - 更改 PHP 中作为数组的类变量

> ID：12191824
> 
> 赞同：3
> 
> 时间：2012-08-30T07:21:49.940
> 
> 标签：php, arrays, object, class-variables

我进行了广泛的搜索，发现了这个：

[&__get() 问题，再次。重大挫折正在发生](https://stackoverflow.com/questions/6287982/get-issues-again-major-frustration-is-afoot)

但是，所提供的示例都没有真正起作用。

我有一个对象，它有一个变量，它是一个多维数组。我需要更改该数组中键的值。

例子：

```
foreach ($code->files as $index => $value)
{
    if (strcmp($code->files[$index]['id'], $fileid) == 0)
    {                               
        $code->files[$index]['title'] = "Test";
        $code->save();  
    }
} 
```

上面的代码确实会产生错误：

```
Notice: Indirect modification of overloaded property CodeDocument::$files has no effect in /var/www/deletefile.php on line 57 
```

我已经尝试了之前引用的线程链接中的所有示例，但它们都不起作用。它们都产生上述错误。

我正在使用预构建的类库（phpillow），但我尝试将 __get 函数更改为 &__get 并抑制上面的错误，但我尝试更改的变量仍然没有获得新值。

我不确定我是否做得对，但我完全不知所措。在不将数组作为类变量的情况下执行此操作将需要大量重构，如果可能的话，我宁愿避免这样做。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:39:49.590

这是否有效：

```
foreach ($code->files as $index => $value)
{
    if (strcmp($value['id'], $fileid) == 0)
    {                               
       $value['title'] = "Test";
       $code->save();  
    }
} 
```

# .net - 如何使用 NUnit（或可能使用另一个框架）测试异步方法？

> ID：12191831
> 
> 赞同：77
> 
> 时间：2012-08-30T07:22:19.110
> 
> 标签：.net, unit-testing, asynchronous, nunit, async-await

我有一个 ASP.NET Web API 应用程序，它带有一个具有异步方法、返回`Task<>`对象并用`async`关键字标记的 ApiController。

```
public class MyApiController : ApiController
{
    public async Task<MyData> GetDataById(string id)
    {
        ...
    }
} 
```

如何为 ApiController 的异步方法编写 NUnit 测试？如果我需要使用另一个测试框架，我也愿意。一般来说，我对 .NET 单元测试还很陌生，所以我对学习最佳实践很感兴趣。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-02-07T01:01:34.997

截至今天（2014 年 7 月 2 日），异步测试受以下支持：

*   xUnit：[带有返回任务的异步方法（从 1.9 开始）](http://bradwilson.typepad.com/blog/2012/01/xunit19.html)
*   MSTest：[使用返回任务的异步方法（自 VS 2012 起）](http://blogs.msdn.com/b/visualstudioalm/archive/2012/03/13/what-s-new-for-mstest-unit-tests-in-visual-studio-11-beta.aspx)
*   NUnit：[从 2.6.2 开始，使用返回任务的异步方法，甚至返回 void](http://simoneb.github.io/blog/2013/01/19/async-support-in-nunit/)。由于不支持返回 void 的 3.0 选项，因为分析器错误[NUnit1012 The async test method must have a non-void return type](https://docs.nunit.org/articles/nunit-analyzers/NUnit1012.html)的文档说明了这一点。

在前两个框架​​中，测试方法必须有这个签名：

```
[TestMethod]
public async Task MyTestMethod()
{
   ...
   var result = await objectUnderTest.TestedAsyncMethod(...);
   // Make assertions
} 
```

NUnit v2.6.2+（但在 3.0 之前），除了那个签名，还支持这个：

```
public async void MyTestMethod() 
```

当然，在任何这些测试方法中，您都可以使用`await`来调用和等待异步方法。

如果您使用的测试框架不支持异步测试方法，那么唯一的方法是调用异步方法并使用任何常用方法等待它完成运行：`await`，读取`Result`属性由方法`Task<T>`返回的`async`，使用任何常用的等待方法，`Task`依此类推。在等待之后，您可以像往常一样执行所有断言。例如，使用 MSTest：

```
[TestMethod]
public void MyTestMethod()
{
    ...
    Task<MyResultClass> task = objectUnderTest.MyAsyncMethod(...);
    // Make anything that waits for the method to end
    MyResultClass result = task.Result;

    // Make the assertions
    Assert.IsNotNull(result);
    ...
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-03T12:47:13.250

在我看来，NUnit 2.6 中不支持测试返回任务的异步方法。我现在能看到的最佳选择是使用 Visual Studio 自己的 UnitTesting 框架或 xUnit.net [，因为它们都支持异步测试](http://www.dotnetcurry.com/ShowArticle.aspx?ID=790)。

使用 Visual Studio UnitTesting 框架，我可以编写如下异步测试：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;

[TestClass]
public class TestAsyncMethods
{
    [TestMethod]
    public async Task TestGetBinBuildById()
    {
         ...
         var rslt = await obj.GetAsync();
         Assert.AreEqual(rslt, expected);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-28T15:48:45.127

请记住，NUnit 2.6 系列与之前的系列一样，都是针对 .NET 2.0 框架而构建的。因此，NUnit 只能在面向 .NET 2.0 的程序集中执行您自己编写的代码。

具体来说，您不能将您的测试方法标记为*异步*并期望 NUnit 对其进行任何特殊处理。

但是，您可以

*   以 .NET 4.5 为目标进行测试。NUnit 将在单独的进程中运行它们。
*   在测试中使用*await*来等待调用 *异步*方法的结果。

如果这是您所希望的，以上都不会为您提供异步测试执行。在等待异步操作完成时不会执行其他测试。

另一种选择是使用 NUnitLite。NUnitLite 0.8 支持 [Asynchronous] 属性，这将允许其他测试在您的异步测试完成时继续。该属性的优点是它允许异步测试在 .NET 2.0 到 4.0 中工作

我们目前没有 NUnitLite 的 .NET 4.5 版本，但很快就会添加它，我们正在努力进行更改，以在该环境中使用 [Asynchronous] 可选。现在，您可以轻松下载并重新编译 .NET 4.5 的源代码。

对于未来，期待 NUnit 3.0 完全支持异步方法以及在多个线程或多个进程中的通用并行执行测试。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-25T04:31:39.823

我正在将我的一些方法转换为`async`. 让它与 NUnit 一起工作非常简单。

测试方法不能是异步的。但是我们仍然可以访问任务并行库的全部功能，只是不能`await`在测试方法中直接使用关键字。

在我的示例中，我有一个方法：

```
public string SendUpdateRequestToPlayer(long playerId) 
```

它在 NUnit 中进行了如下测试：

```
string result = mgr.SendUpdateRequestToPlayer(player.Id.Value);
Assert.AreEqual("Status update request sent", result);
mocks.VerifyAll(); 
```

现在我已经将方法更改`SendUpdateRequestToPlayer`为异步

```
public async Task<string> SendUpdateRequestToPlayer(long playerId) 
```

我只需要修改我的测试来`Wait`完成任务：

```
Task<string> task = mgr.SendUpdateRequestToPlayer(player.Id.Value);
task.Wait(); // The task runs to completion on a background thread
Assert.AreEqual("Status update request sent", task.Result);
mocks.VerifyAll(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T07:39:25.190

这真的取决于他们在做什么。通常他们将依赖于提供 a或类似的东西的*其他东西。*`Task<T>`在这种情况下，您可能能够提供虚假的依赖项，从而允许您以细粒度的方式控制所有这些。我有一个原型“时间机器”，它允许您对任务进行预编程以在特定的人工时间完成，然后将时间向前移动并随时执行断言。有[一篇关于它的博客文章](https://codeblog.jonskeet.uk/2011/11/25/eduasync-part-17-unit-testing/)，您可能会发现它很有用。正如我所说，它只是一个原型，并不适合*所有*场景——但它可能适合你。

Stephen Cleary 也有几篇关于单元测试的博客文章（[1、2](http://blog.stephencleary.com/2012/02/async-unit-tests-part-1-wrong-way.html) [）](http://blog.stephencleary.com/2012/02/async-unit-tests-part-2-right-way.html)，采用了稍微不同的方法，以及一个您可能会发现有用的[NuGet 包。](http://nuget.org/packages/AsyncUnitTests-MSTest)

基本方法与正常方法相同：为您的方法提供不同的输入（和依赖项输出）并测试结果。用异步实现这一点肯定更棘手，但它是可行的。

# php - 调用 Vps.net api 类

> ID：12191832
> 
> 赞同：0
> 
> 时间：2012-08-30T07:22:31.840
> 
> 标签：php, api, class

我想使用 VPS.NET PHP api，但我不知道如何使用给定的类。例如，我想调用 VPSNET 类中的 getDomains 函数。课程： http: [//pastebin.com/wn4UYQB7](http://pastebin.com/wn4UYQB7) 感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:42:35.427

未经测试，但类似：

```
<?php 
//Include the class into the script
include('VPSNET.class.php');

//Start the class & get instance, pass your username, api key ect
$vpsAPI = VPSNET::getInstance($username, $_auth_api_key);

//Call the getDomains method from the class
$result = $vpsAPI->getDomains();

//Do somthing with the result
print_r($result);
?> 
```

# jquery - 链接失效了？

> ID：12191835
> 
> 赞同：-1
> 
> 时间：2012-08-30T07:22:54.860
> 
> 标签：jquery, html, jquery-mobile

我的html代码是

```
<div id="starimg">
  <a href="#" class="imgstar" onclick="ratingFunc()"><img src="images/star1.png" class="star" /></a>
  <a href="#" class="imgstar" onclick="ratingFunc()"><img src="images/star1.png" class="star" /></a>
  <a href="#" class="imgstar" onclick="ratingFunc()"><img src="images/star1.png" class="star"/></a>
  <a href="#" class="imgdarkstar" onclick="ratingApp()"><img src="images/star2.png" class="star1"/></a>
  <a href="#" class="imgdarkstar" onclick="ratingApp()"><img src="images/star2.png" class="star1" /</a>  
</div> 
```

我的java脚本代码是

```
function ratingFunc(){
    if( $('.star').attr("src")=='images/star1.png'){
        $(this).replaceWith("<img src='images/star2.png' class="star1"/>");
        starcheck=true;
    }
    else{
        $(this).replaceWith("<img src='images/star1.png' class="star"/>");
        starcheck=false;
    }
}

function ratingApp(){
    if($('.star1').attr("src")=='images/star2.png'){
        $(this).replaceWith("<img src='images/star1.png' class="star"/>");
        starcheck=true;
    }
    else{
        $(this).replaceWith("<img src='images/star2.png' class"star1"/>");
        starcheck=false;
    }
} 
```

当我单击图像时，这些功能不起作用..请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:26:35.910

您的功能不知道这`$(this)`在内部意味着什么。确实如此，但这不是你要找的:)

在第一个函数中替换为`$(this)`并在其他函数中替换为。`$(".star")``$(this)``$(".star1")`

它会正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T07:35:28.570

`starcheck`变量有什么用？

我可以看到您的链接同时有两个类：我不确定这是否有帮助。您应该使用单个空格分隔您的类名，以便为单个元素使用多个类：

```
<a href="#" class="imgstar star" onclick="ratingFunc()"><img src="images/star1.png"/></a> 
```

有关更多信息，[请查看 W3C HTML 标准](http://www.w3schools.com/tags/att_standard_class.asp)。

# java - JComboBox 工作

> ID：12191836
> 
> 赞同：0
> 
> 时间：2012-08-30T07:23:01.553
> 
> 标签：java, swing, jcombobox, actionlistener, itemlistener

我有一个组合框，其中包含一个项目，可以说“a”。我想仅在手动选择项目“a”时调用该组合框的动作侦听器。我也尝试过 ItemStateChanged，但它的工作方式类似于 Action Listener。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:31:46.040

看看下面的例子。

```
// Create an editable combobox
String[] items = {"item1", "item2"};
JComboBox cb = new JComboBox(items);
cb.setEditable(true);

// Create and register listener
 MyItemListener actionListener = new MyItemListener();
 cb.addItemListener(actionListener);

class MyItemListener implements ItemListener {
 // This method is called only if a new item has been selected.
  public void itemStateChanged(ItemEvent evt) {
    JComboBox cb = (JComboBox)evt.getSource();

    // Get the affected item
    Object item = evt.getItem();

    if (evt.getStateChange() == ItemEvent.SELECTED) {
        // Item was just selected
    } else if (evt.getStateChange() == ItemEvent.DESELECTED) {
        // Item is no longer selected
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:32:57.467

我不认为你可以只监听一个 ComboBox 项的事件，但是当监听整个组合框时，在回调中你可以在处理事件（或忽略它）之前检查所选项目。

在**Sumit Singh**提供的示例中，检查受影响的项目

```
// Get the affected item
Object item = evt.getItem();

//check item
if(item == <the item you want to watch>)
{
    //process
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:35:49.803

制作 2 个动作监听器怎么样，一个会查看是否选择了“a”，如果是，它将调用第二个

# iphone - 我们可以在 plist 文件中存储登录详细信息 - IOS

> ID：12191837
> 
> 赞同：0
> 
> 时间：2012-08-30T07:23:07.090
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我想存储我的登录详细信息以便下次取回。是否可以将登录相关信息存储在 plist 文件中？还是我需要为此创建自己的文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:28:15.937

是的，你可以，你也可以看看[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)和[KeyChain Access](https://developer.apple.com/library/mac/#documentation/security/conceptual/keychainServConcepts/02concepts/concepts.html)

但是如果你想使用 plist. 这是一个同样的问题。

[如何在plist中写入数据？](https://stackoverflow.com/questions/905542/how-to-write-data-in-plist)

# linux - linux系统命令邮件- GUI客户端？

> ID：12191841
> 
> 赞同：2
> 
> 时间：2012-08-30T07:23:24.157
> 
> 标签：linux, email, client, command, system

你们有没有人听说过一些可以在 Linux 中读取系统邮件的应用程序`KDE`或（通常是 GUI）应用程序？`GNOME`

使用`mail`命令或浏览`/var/mail/root`文件似乎很不方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:54:55.953

通常您不应该使用 root 帐户来阅读邮件。相反，请将邮件转发到您的普通帐户或外部电子邮件地址。

转发可以在邮件服务器配置中完成，或者更容易通过创建一个`/root/.forward`包含您的电子邮件地址（仅此而已）的文件来完成。

递送到外部地址需要您配置了要使用的 SMTP 服务器；您可以通过发送消息来测试它是否有效`mail myaddress@example.com`。

# javascript - 可调整大小的滚动条

> ID：12191848
> 
> 赞同：1
> 
> 时间：2012-08-30T07:23:46.110
> 
> 标签：javascript, components

我正在寻找类似于 Google Finance 可调整大小滚动条的组件。这是链接： [http](http://www.google.com/finance?q=EURUSD&ei=bhM_UKDXF-aIwAPVNQ) ://www.google.com/finance?q=EURUSD&ei=bhM_UKDXF-aIwAPVNQ 您可以在图表下方找到它。有谁知道我在哪里可以找到类似的组件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:41:09.530

我在 D3 框架中发现了一个不错的组件。它被称为泳道图，可以在以下位置找到：

[http://bl.ocks.org/1962173](http://bl.ocks.org/1962173)

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:25:45.453

我认为[amcharts.com](http://amcharts.com)也是如此。检查网站一次。

# excel - VBA从文件夹中的工作簿复制单元格值

> ID：12191856
> 
> 赞同：1
> 
> 时间：2012-08-30T07:24:06.193
> 
> 标签：excel, vba, loops, copy

我需要为大约 150 个产品创建计算，每个产品包含大约 50-60 个子产品。根据子产品是从外部来源生产还是购买，价格的计算方式会有所不同。本质上，我需要复制粘贴产品中包含的每个子产品的重量和价格，并确定来源是什么。

我希望 excel 查看以前在同一个文件夹（所有不同的工作簿）中进行的计算，如果它在其中一个工作簿中找到一个单元格，然后将重量、价格和来源复制粘贴到当前打开的工作簿中。我完全不知道如何比较单元格，如果找到匹配项，则将其复制到正确的位置。我相信 .Find 和 .FindNext 在这里可能很有用，但我不完全确定如何使用它们。

以下是我的数据结构的示例： ![在此处输入图像描述](../Images/7f47dd1a72ef1b64ace658cddc1f2e3c.png)

这就是我到目前为止发现的：

```
 Sub RunCodeOnAllXLSFiles()
            Dim lCount As Long
            Dim wbResults As Workbook
            Dim wbCodeBook As Workbook

       Application.ScreenUpdating = False
       Application.DisplayAlerts = False
       Application.EnableEvents = False

       On Error Resume Next
           Set wbCodeBook = ThisWorkbook
               With Application.FileSearch
                    .NewSearch
                    'Change path to suit
                    .LookIn = "C:\ahjualune\stuff"
                    .FileType = msoFileTypeExcelWorkbooks
                    'Optional filter with wildcard
                    .Filename = "*NAV*.xls*"
            If .Execute > 0 Then 'Workbooks in folder
                For lCount = 1 To .FoundFiles.Count 'Loop through all
                    'Open Workbook x and Set a Workbook variable to it
                    Set wbResults = Workbooks.Open(Filename:=.FoundFiles(lCount), UpdateLinks:=0)

                    'DO YOUR CODE HERE
                    With ActiveSheet
                             For Each c In .Range("B2:B90").Cells
   ' problematic place         If c.Value = Then

                                  End If
                            Next c
                    End With

                    wbResults.Close SaveChanges:=False
                Next lCount
            End If
    End With
    On Error GoTo 0
    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
    Application.EnableEvents = True
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T17:27:35.953

将源存储在变量中

找出当前行的价格 - 添加到变量

当源更改时，将总计放在右侧的列中

也许使用类似的东西

```
range("A2").select

dim sSource as string
dim dPrice as decimal
Dim dWeight as decimal
dim dtotal as decimal

Do Until ActiveCell = ""
    sSource = ActiveCell.Offset(0,8).value
    dprice = Activecell.offset(0,7).value
   Activecell.Offset(1,0).Select
   etc.....
   when your source changes write out to a column to the right...or something like that
Loop 
```

抱歉，没时间为你写出完整的代码……但试图让你走上正轨……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:59:46.643

*   这是我从你的问题中了解到的，你有 150 种产品。
*   每个产品将有 50 到 60 个子产品。
*   您将获得每个子产品的重量和价格。根据您拥有的那种子产品的套数，您将每套价格和套数相乘以找到该子产品的总价。
*   之后，您将添加所有子产品价格以找到一个产品价格。

如果这是您正在寻找的东西，我有一个想法。

将所有主要产品类型放在一个工作簿的 sheet1 中。

从第二张表开始，将每个产品子产品放在一张表中。使用 Excel 表格公式来乘以和添加价格。

记录一个宏以将该子产品的价格复制到 sheet1。

# c# - 堆大小溢出

> ID：12191860
> 
> 赞同：0
> 
> 时间：2012-08-30T07:24:28.507
> 
> 标签：c#, asp.net

作为 .Net 应用程序的日志，我收到以下错误。

> APC：GCHeapSizeMB=1507，AdminGCHeapLimitMB=1500。堆大小无法减少到所需的级别。

我知道堆内存溢出，但有人可以告诉我如何避免/管理这个问题。

我在 System.Runtime 中遇到了一个名为 MemoryFailingPoint 的类，但想知道有多少可用内存并希望以编程方式对其进行管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:41:11.683

如果内存确实存在问题，那么您应该使用内存分析器来调试问题。谷歌搜索`memory profiler .NET`会给你一个列表。当然，我推荐 JetBrains 的一款，因为我在那里工作 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T04:20:33.227

我调试了自己，发现似乎可以处理很多文件句柄，并且可以处理不需要的临时内存。所以，我也做了同样的事情，而且似乎少了一些。但是，我需要解决或应该以零错误记录，以便在整个项目中解决这个问题，这是一项非常乏味的任务。

感谢您的所有投入。

# sql-server - 将变量保存在内存中的服务器上，避免使用数据库，用于 flex 应用程序

> ID：12191861
> 
> 赞同：0
> 
> 时间：2012-08-30T07:24:28.300
> 
> 标签：sql-server, database, actionscript-3, apache-flex, cgi

我正在构建一个有很多玩家的游戏，我想找到一种方法来存储玩家位置并快速再次为他们提供服务，我不需要将这些信息写入磁盘。

我能找到的所有示例都使用一个运行一次的脚本来从数据库中检索一些信息。

在 flash builder 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:02:50.317

您应该考虑使用 Adob​​e Cirrus 进行 P2P 通信。 [http://labs.adobe.com/technologies/cirrus/](http://labs.adobe.com/technologies/cirrus/)

看来本教程还展示了如何使用 C# 和 AS3 为多人游戏设置客户端和服务器：

[http://playerio.com/documentation/tutorials/building-flash-multiplayer-games-tutorial/](http://playerio.com/documentation/tutorials/building-flash-multiplayer-games-tutorial/)

# android - 如何在活动显示之前加载 Android 首选项？

> ID：12191862
> 
> 赞同：1
> 
> 时间：2012-08-30T07:24:32.713
> 
> 标签：android, load, sharedpreferences

我正在构建需要接受免责声明和其他一些清单的应用程序。

所以在第一次启动应用程序是这样的：

启动画面 -> 免责声明 -> 清单 -> 应用程序设置 -> 我的应用程序

在所有其他加载时，它都会直接进入我的应用程序部分。

现在，我创建了名为“setupCheck”的活动，如果前三个屏幕被“使用”，它将转到“我的应用程序”。这很好用，即使我没有设置任何布局并且我没有在“setupCheck”中设置“setContextView”，在我的应用程序加载之前我仍然会收到丑陋的空白屏幕。

在没有任何屏幕可见的情况下加载 Sherd 首选项的正确方法是什么，然后根据真假状态转到 Splash 或转到我的应用程序。

Tnx 在这方面提供帮助。

编辑：设置中的代码

```
boolean disclamerChecked = getPrefs.getBoolean("disclamer", true); 
boolean screeningChecked = getPrefs.getBoolean("screening", true); 
boolean splashChecked = getPrefs.getBoolean("splash", true); 
if (splashChecked == true) { 
    if (disclamerChecked == true) { 
        if (screeningChecked == true) { 
            Intent intent = new Intent( "mypackage.mypackage.SPLASH");
            startActivity(intent); 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:55:53.650

在您的应用程序启动之前总会有一个屏幕，但可以使用全尺寸图像/全尺寸纯色的平铺视图来更改它。

在 onCreate() 结束之前，您的第一个视图不会显示。因此，如果您在 onCreate() 中进行大量处理，那么在显示初始视图之前将花费大量时间。这也是为什么建议在后台线程中而不是在启动时进行尽可能多的处理的原因。

# javascript - 如何更改 Sencha Touch 中按钮的尺寸

> ID：12191867
> 
> 赞同：1
> 
> 时间：2012-08-30T07:24:49.573
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2, sencha-touch-theming

我在 Sencha Touch 2 中有这个按钮，我需要将大小调整为“小”，我需要改变它的高度。你能给我一个代码示例吗？谢谢

```
 navigationBar: {

        items:[{
            xtype: 'button',              
            text: 'Settings',
            itemId: 'settingsButton',
            align: 'right',
            iconMask: true,
            iconCls: 'settings9'
        }],
        ui: 'custom-toolbar-top-1L'
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:21:18.767

使用 css 执行此操作的良好做法，或者使用[Sencha Theming](http://docs.sencha.com/touch/2-0/#!/guide/theming)更精确。

您的问题的起点是[Sencha Kitchen 水槽样品](http://docs.sencha.com/touch/2-0/touch-build/examples/production/kitchensink/index.html#demo/buttons)

简而言之，您必须将 ui: 'small' 添加到按钮的配置中

干杯，奥列格

# stress-testing - 使用不同的用户代理进行压力测试

> ID：12191870
> 
> 赞同：0
> 
> 时间：2012-08-30T07:25:00.393
> 
> 标签：stress-testing

我正在尝试在具有不同用户代理的网页上进行压力测试，

我正在尝试围攻，但它看起来只支持一个特定测试的用户代理，我如何为特定测试中的每个请求随机化用户代理。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:26:38.870

使用[Load Tester LITE](http://www.webperformance.com/load-testing/free-load-tester-lite.html)，您可以将任意数量的用户代理放入列表中，并将其替换为 User-Agent 标头。创建列表后，更改配置大约需要 1 分钟。

# windows - USB 驱动器上的 GIT

> ID：12191873
> 
> 赞同：0
> 
> 时间：2012-08-30T07:25:13.383
> 
> 标签：windows, git, repository

我想控制版本并将备份保存在笔式驱动器中。我安装了 GIT 并使用它。但我对 GIT 还是很陌生。我将我的工作项目的副本克隆到笔式驱动器中。现在我想通过 IDE 或 GIT gui 向存储库（笔的克隆项目）发送新的提交或新更改，并在笔内继续相同的副本。（维护远程服务器对我来说是成本，因为我的互联网服务有限）

我读[了这个](https://stackoverflow.com/questions/97850/version-control-on-a-2gb-usb-drive)。我想知道如何使用 GIT 的 gui 或 Netbeans IDE（因为它更容易并节省时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:36:57.617

只需您必须进行`commit`更改，然后进行`push`. 您可以在 GUI 中找到这两个命令。顺便说一句，GUI 启动与 shell 应用程序相同的命令，它的工作原理相同，几乎没有任何魔法，所以你可以[在这里](http://gitref.org/)查看参考。

然后第一次使用 CLI 比 GUI 更容易学习，所以我建议你用它来学习

# html - 如何将下拉菜单放入导航部分（Twitter Bootstrap）？

> ID：12191874
> 
> 赞同：1
> 
> 时间：2012-08-30T07:25:15.187
> 
> 标签：html, css, twitter-bootstrap

您好，我遇到了这个麻烦：我的标题中有两个部分，但是当我将下拉菜单放入导航部分时，它会像这样使我的标题崩溃：

![](../Images/c8801792893f992534d127d06c7e3636.png)

如果我使用绝对位置，我的下拉菜单将移出 div 并在不同的显示器上看起来不同。

也许我解释得不好，所以我会给出我想要的图片： ![](../Images/0d79fa830f04a925d06af8ff2f4cb865.png) 和下面的导航部分。

这是我的 HTML：

```
<div class="container">

<div class="navbar ">

 <div class="container">

    <div class="top">
        <div class="img">
          <a href="#" id="facebook" title="facebook"></a>

          <a href="#" id="linkedin" title="linkedin"></a>

          <a href="#" id="youtube" title="youtube"></a>
        </div>

          <ul class="nav nav-pills">
      <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">med@mail.com
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" style="display: none; ">
                <li><a href="/users/edit.6">My Account</a></li>

                <li><a href="/users/edit.6">Settings</a></li>

                <li><a href="/users/edit.6">Analytics</a></li>

                <li><a href="/users/sign_out" data-method="delete" rel="nofollow">Sign out</a></li>
              </ul>
            </li>   
          </ul>
        </div>
    </div>
    <div class="white_line"></div>
    <div class="grey_line"></div>              
   <ul class="nav pull-left">
      <li><a href="/">Home</a></li>
      <li><a href="/what_we_do">What we do</a></li>
      <li><a href="#">My account</a></li>
      <li><a href="/contact">Contact</a></li>
    </ul>
  </div> 
```

和我的 CSS：

```
 .navbar .nav {
background-color: #f2f2f2;
float: left;
}

      .navbar .nav > li {
  padding-top: 0px;
   }

.navbar-inner{
padding:0px;
width:960px;
}

.navbar .nav > li > a{
 padding: 28px 25px 10px 0px;
}

 .navbar .nav-pills > li > a{
 padding-top:22px;
 }
 //top - top class with icons

.top{
height: 35px;
background: #c7dbaa;
}
.top .img:first-child{
 margin-bottom:1px;
 }
 .top .img{
 display:inline-block;
 padding: 5px 0 0 5px;
 }
.nav-pills{
 //here I need to change positioning or something like that
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:56:45.867

```
<div class="top row">
        <div class="img">
          <a href="#" id="facebook" title="facebook"></a>

          <a href="#" id="linkedin" title="linkedin"></a>

          <a href="#" id="youtube" title="youtube"></a>
        </div> 
```

看到你需要在你的 class="top row" 上添加行，这样你的菜单就会出现在导航中。然后你需要删除颜色和所有东西

# mysql - 尝试从phpmyadmin导出大表，只导出2675条记录

> ID：12191879
> 
> 赞同：1
> 
> 时间：2012-08-30T07:25:29.687
> 
> 标签：mysql, wordpress, phpmyadmin

我试图将一个表从 MySQL 数据库复制到另一个 MySQL 数据库，具有完全相同的结构。

我注意到在导出其中一张表时，它只导出了 2675 条记录。

我正在使用 phpmyadmin： 1\. 转到 Export-tab 2\. 选择 Bzip 3\. 运行

但这仅提供原始表的 med 1/3。我错过了什么？

编辑缺失信息：1\. phpmyadmin 版本是 3.3.7deb7 2\. Apache/2.2.16 (Debian) 3\. MySQL 客户端版本：5.1.63

到目前为止，我无法通过任何其他接口访问数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:28:27.923

如果您使用的是 Windows 操作系统，请`my.conf`在 wamp 文件夹中找到该文件。相应地更改`max_allowed_packet`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:31:02.943

您需要提供更多详细信息，phpmyadmin 上的哪个版本，哪个操作系统。

您是否尝试通过其他方法导出数据库，另一种方法是here

[https://stackoverflow.com/questions/2707930/mysql-db-import-export-command-line-in-windows](https://stackoverflow.com/questions/2707930/mysql-db-import-export-command-line-in-windows)

# iphone - 如何在 NSMutableDictionary 中存储自定义对象？

> ID：12191885
> 
> 赞同：2
> 
> 时间：2012-08-30T07:25:56.867
> 
> 标签：iphone, ios, nsmutabledictionary, nsobject

我是 iOS 新手。我有一个派生自的类`NSObject`，我想将其引用存储到`NSMutableDictionary`. 我怎样才能？例如

```
 @interface CustomClass : NSObject
    {
    } 
```

我想将此 CustomClass 的引用 (*customClass) 存储到`NSMutableDictionary`. 请给我一个简单的方法来存储和检索它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-01T13:04:20.493

为此，您需要使用 NSKeyedArchiver 和 NSCoder 类，如下所示：

在您的 CustomClass.m 文件中，实现以下两种编码和解码方法：

```
- (void)encodeWithCoder:(NSCoder *)encoder {
    // encoding properties 
    [encoder encodeObject:self.property1 forKey:@"property1"];
    [encoder encodeObject:self.property2 forKey:@"property2"];
}

- (id)initWithCoder:(NSCoder *)decoder {
    if((self = [super init])) {
        // decoding properties 
        self.property1 = [decoder decodeObjectForKey:@"property1"];
        self.property2 = [decoder decodeObjectForKey:@"property2"];
    }
    return self;
} 
```

使用它来设置和获取对象，如下所示：

```
 // For setting custom class objects on dictionary

 CustomClass * object = /*..initialisation....*/;
 NSData *encodedObject = [NSKeyedArchiver archivedDataWithRootObject:object];
 [dictionary setObject:encodedObject forKey:key];

 // For getting custom class objects from dictionary

 NSData *encodedObject = [dictionary objectForKey:key];
 CustomClass * object = (CustomClass *)[NSKeyedUnarchiver unarchiveObjectWithData:encodedObject]; 
```

**更新：** 更好的方法是使用简单易用的第三方库：RMMapper - [https://github.com/roomorama/RMMapper](https://github.com/roomorama/RMMapper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:36:55.417

将对象存储在 a 中时，`NSMutableDictionary`您存储的是对该对象的引用（指针），而不是对象本身。因此，您无需将您的对象`CustomClass`与标准对象区别对待。

以下所有内容都将起作用：

```
 CustomClass *customObject;

    NSMutableDictionary *mutableDictionary = [[NSMutableDictionary alloc] initWithObjectsAndKeys:customObject, @"key", nil];
    [mutableDictionary setObject:customObject forKey:@"key"];
    CustomClass *retrievedObject = [mutableDictionary objectForKey:@"key"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:40:24.743

利用

```
 NSMutableDictionary *obect = [[NSMutableDictionary alloc] initWithObjects:CustomObject forKeys:@"Customobjectkey"]; 
```

您可以使用此键“ **Customobjectkey** ”获取对象，并根据类对该对象进行类型转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T07:40:48.597

A[`NSMutableDictionary`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)是一个`NSDictionary`，您可以在其中动态添加和删除 value-key 中的对。

`NSString`当您在其中添加自定义对象（即 a ）时，您只需指定一些键值来配对它。

```
 CustomClass * myObj = ... //declared and initialized obj

 NSMutableDictionary * myDict = [[NSMutableDictionary alloc] init]; //declared and initialized mutable dictionary

 [myDict setObject:myObj forKey:@"first"]; //assigning a string key to the object

 NSLog(@"My first object was %@", [myDict objectForKey:@"first"]); //retrieving the object using its key. It will print its reference

 CustomClass * anotherObj = (CustomClass *)[myDict objectForKey:@"first"]; //retrieving it and assigning to another reference obj. It returns a NSObject, you have to cast it

 [myDict removeObjectForKey:@"first"]; //removing the pair obj-key
 NSLog(@"My first object was %@", [myDict objectForKey:@"first"]); //cannot find it anymore 
```

[这是NSDictionaries](http://cocoadevcentral.com/articles/000010.php)的小教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T07:41:57.650

假设您想在名为 ViewController 的 UIViewController 类中创建 NSMutableDictionary iVar。

视图控制器.h：

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController{
}
@property (nonatomic, strong) NSMutableDictionary *mutDict;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "CustomClass.h"

@interface ViewController ()
@end

@implementation ViewController
@synthesize mutDict=_mutDict;

-(void)viewDidLoad{
 [super viewDidLoad];
 CustomClass *cc1=[[CustomClass alloc] init];
 CustomClass *cc2=[[CustomClass alloc] init];
 self.mutDict=[[NSMutableDictionary alloc] initWithObjectsAndKeys: cc1, @"key1", cc2, @"key2", nil];
}

@end 
```

请注意，在这个例子中我没有做任何内存管理（假设为 ARC），我也没有测试过这段代码。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-30T07:36:40.870

```
//store
NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithObject:customClass forKey:@"myCustomClass"];

//retrieve
CustomClass *c = (CustomClass*)[dictionary objectForKey:@"myCustomClass"] 
```

# assembly - 如何在这里输出第二个数字？

> ID：12191889
> 
> 赞同：0
> 
> 时间：2012-08-30T07:26:06.363
> 
> 标签：assembly, mips, nios

根据规范，我的输出应该是这样的：

```
00:00
00:01
00:12
01:23
12:34
23:45
34:56
45:67
56:78
67:89
78:9A
89:AB
9A:BC
AB:CD
BC:DE
CD:EF
DE:F0
EF:01
F0:12
01:23
12:34 
```

等等。我编写了 2 个汇编子例程，一个进行十六进制转换，一个从测试程序中获取要打印的数字，现在我得到的输出开始类似于它应该看起来的样子：

```
0:
1:
2:
3:
4:
5:
6:
7:
8:
9:
A:
B:
C:
D:
E:
F:
0:
1:
2:
3:
4:
5: 
```

所以看来我得到了最右边的数字，但我应该如何得到其余的数字？它在[作业](http://www.ict.kth.se/courses/IS1200/2012/nios2time/index.html)中说

> 示例：内存位置 0x0047114 包含二进制值 0101 0011（十六进制 0x53） 内存位置 0x0047115 包含二进制值 0001 0110（十六进制 0x16） 内存位置 0x0047116 包含二进制值 0000 0000（十六进制 0x00） 内存位置 0x00047110 包含二进制值(十六进制 0x00) 调用者将寄存器 r4 设置为 0x0047114 并调用 puttime；puttime 在新行上打印出 16:53。

更多背景可以从我最近发布的其他问题中获得，这些问题是相同的任务，但侧重于它的其他部分：

[https://stackoverflow.com/questions/12105322/how-to-proceed-coding-for-this-assignment](https://stackoverflow.com/questions/12105322/how-to-proceed-coding-for-this-assignment)

[加载词和移动之间的区别？](https://stackoverflow.com/questions/12155118/difference-between-load-word-and-move)

[https://stackoverflow.com/questions/12152323/why-is-load-word-not-working](https://stackoverflow.com/questions/12152323/why-is-load-word-not-working)

我进行转换的程序是：

```
.global hexasc 

        .text
        .align 2

hexasc: movi r8, 0x09
        movi r9, 0x0f
        andi r4, r4, 0x0f #keep only 4 bits
        bgt r4, r8, L1  #is x>9?
        movi r2, 0x30
        add r2, r2, r4  
        andi r2, r2, 0xff
        ret  

L1:     movi r2, 0x37
        add r2, r2, r4
        andi r2, r2, 0xff
        ret 
```

我认为上述内容是正确且有效的，但我不确定如何对获取变量并将其传递给我的子程序的中间部分进行编程：

```
.macro PUSH reg
        subi    sp, sp, 4
        stw     \reg, 0(sp)
.endm

.macro POP reg
        ldw     \reg, 0(sp)
        addi    sp, sp, 4
.endm

.global puttime 

        .text
        .align 2

puttime: 
        PUSH r31
        ldw r8,0(r4)            # put the variable in register 8
        PUSH r8
        nop
        movi r4, 0x0A           # put newline char in register 4
        movia   r9,putchar      # copy subroutine address to a register
        callr   r9              # call subroutine via register
        POP r8
        mov r4, r8
        call hexasc
        mov r4, r2
        movia   r9,putchar      # copy subroutine address to a register
        callr   r9
        movi r4, 0x3A
        movia r9, putchar
        callr r9
        POP r31
        ret 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:53:55.040

我认为您需要调用 hexasc 两次，输入数据中的每个十六进制数字一次。您需要在每次调用 hexasc 之间将输入数据右移 4 位，因为 hexasc 只转换输入数据的低 4 位。

顺便说一句，使用 PUSH 和 POP 不是惯用的 MIPS 代码。在 MIPS 中，您通常在进入例程时从堆栈指针中减去一个常量值，并在退出路由时添加回常量值。像这样：

```
puttime:
  subi sp, 8       # reserve space for 2 words on the stack
  sw   r31, 4(sp)
  ...
  lw   r31, 4(sp)
  addi sp, 8
  ret 
```

# ruby-on-rails - 使用 rufus 调度程序完成上一个作业后调度作业

> ID：12191890
> 
> 赞同：0
> 
> 时间：2012-08-30T07:26:23.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scheduled-tasks, rufus-scheduler, sidekiq

我有如下 task_scheduler 文件，

```
 require 'rubygems'
    require 'rufus/scheduler'
      scheduler = Rufus::Scheduler.start_new

   scheduler.cron '0 20 * * *' do

     StartJOb1.perform_async
     Startjob2.perform_async
     Startjob3.perform_async
     Startjob4.perform_async
     Startjob5.perform_async

     end 
```

我需要拆分这些作业，并希望在 job1、job2 和 job3 完成后运行 Startjob4.perform_async 、 Startjob5.perform_async 。问题是我不知道完成这些作业需要多长时间。

我正在使用 sidekiq 执行这些后台任务

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:40:09.570

这对于 Cron 是不可能的，可能你应该从当前工作中调用下一个工作。

而且，因为使用了 cron，所以你不需要 sidekiq。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T04:56:28.370

您也可以为此使用[Sidekiq Superworker](https://github.com/socialpandas/sidekiq-superworker)，因为它可以让您定义工作人员的依赖关系图。（作为免责声明，我是宝石的作者。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T09:43:45.073

我没有使用过sidekiq，所以不确定这是否有效。您可以尝试使用信号量或[互斥](http://corelib.rubyonrails.org/classes/Mutex.html)量，因为它在 rails 中被调用。类似的东西

```
mutex1, mutex2, mutex3 = new_mutexes_already_locked
StartJOb1.perform_async(mutex1) #-> unlocks mutex1 as soon as work is finished
Startjob2.perform_async(mutex2) #-> unlocks mutex2 as soon as work is finished
Startjob3.perform_async(mutex3) #-> unlocks mutex3 as soon as work is finished
Startjob4.perform_async(mutex1, mutex2, mutex3) #starts work if mutex1..3 unlocked
Startjob5.perform_async(mutex1, mutex2, mutex3) #dito 
```

您还可以使用单个方法启动 Job4+5，并让此方法等待获取 mutex1..3 的锁

但是我不确定这是否适合您正在做的事情以及它是否与sidekiq一起使用，因为Mutex实际上是用于并行您自己的线程（因此它可能不会在进程上工作，我想sidekiq在它自己的进程中运行？）。

作为互斥锁的替代方案，您可以将作业的状态写入数据库并从作业 4 +5 轮询以查看它们何时完成。

# android - GCM Android是注册id应该保存吗？

> ID：12191896
> 
> 赞同：0
> 
> 时间：2012-08-30T07:26:49.743
> 
> 标签：android, cordova, google-cloud-messaging

我正在尝试构建获取 GCM 消息的 PhoneGap android 应用程序。
我使用了示例代码，它最初从服务器接收注册 ID。
每次应用程序启动时都应该收到这个 ID，还是我应该第一次保存它并稍后使用保存的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:35:19.413

您必须将注册 ID 发送到您自己的服务器并将其保存在您的服务器上。因此，您可以在向 GCM 服务器发送推送消息时使用它。GCM 服务器将根据该注册 ID 向您的设备发送 put 消息。

**更新：**

为了获得更好的说明，您可以随时观看[Google I/O 视频](https://developers.google.com/events/io/sessions/gooio2012/100/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:32:51.773

您可以在任何地方通过 GCMRegistrar.getRegistrationId(context) 获取注册 ID。您不应该将其保存在您的应用程序中。

# javascript - Array.map() 和 D3 选择？

> ID：12191899
> 
> 赞同：7
> 
> 时间：2012-08-30T07:26:56.413
> 
> 标签：javascript, svg, selector, d3.js

有什么类似`Array.map()`D3 的选择吗？为了找到一组 SVG`<text/>`元素的最大长度，我目前执行以下操作。然而`.selectAll(...)[0].map(...)`，对我来说似乎是一个黑客。有没有更好的办法？

```
 var chi = svg.selectAll('.chi');

      var xChi = d3.max(chi[0].map(function (itm) { return itm.getComputedTextLength(); })); 
```

我可以使用`selection.each()`在选择上迭代函数，但我不确定如何将它与`d3.max()`. 我试过了`d3.max(chi.each(function (itm) { return itm.getComputedTextLength(); }))`，但`d3.each()`没有返回返回值的数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T20:57:12.630

```
var allLength

d3.selectAll(".element")
.each(function(d, i) {allLength[i]=d3.select(this).node().getComputedTextLength() })

var maxLength = d3.max(a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-09T01:39:15.640

是的..那个支架也让我的眼睛酸痛。

```
d3.max(svg.selectAll('.chi').pop(), function(item) {
  return itm.getComputedTextLength()
}) 
```

问题是从 2012 年开始的。我不知道当时 d3 是什么样的，但当前版本`d3.max`接受了一个访问器函数来检索你最大化的值。

# mysql - tomcat7：无法加载 JDBC 驱动程序类 [com.mysql.jdbc.Driver]

> ID：12191900
> 
> 赞同：13
> 
> 时间：2012-08-30T07:26:57.810
> 
> 标签：mysql, spring, tomcat, tomcat7

我在stackoverflow上看到了几个类似的问题，但它们并没有解决我的问题。[这个](https://stackoverflow.com/questions/8106011/java-lang-classnotfoundexception-com-mysql-jdbc-driver-during-runtime-eclipse)特别有用，因为它指向官方的[tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html) ，特别是[本节](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example)。

简而言之，那里提供的解决方案是：tomcat 需要将 jdbc 数据库驱动程序复制`$CATALINA_HOME/lib`到`WEB-INF/lib/`. 好的，但它仍然对我不起作用，我变得很生气。

让我们看看您是否可以提供任何进一步的想法。

环境是*Windows XP、Tomcat7、Eclipse Indigo、Java6 和 Spring3*。

`mysql-connector`已复制到`$CATALINA_HOME/lib`

```
C:\>dir "c:\Program Files\Apache-Tomcat-7.0.12\lib"\mysql*
[...]
/2012  13:39           877.094 mysql-connector-java-5.1.21.jar
[...]
C:\> 
```

您可能知道 Eclipse 的 Tomcat 集成为其部署创建了一个特定于WTP的目录`CATALINA_BASE`（`mysql-conector.jar``CATALINA_HOME``CATALINA_BASE`

```
C:\>dir c:\Share\genesis\wsEclipse-indigo\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\lib
[...]
29/08/2012  13:39           877.094 mysql-connector-java-5.1.21.jar
[...]
C:\> 
```

据我了解 Tomcat 的 catalina.properties 文件，它们都被添加到类路径中，所以我没想到有任何区别，但我尝试了，以防万一。

我的spring数据源定义很简单：

```
 <bean id="securityDataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/venus" />
    <property name="username" value="root" />
    <property name="password" value="" />
  </bean> 
```

但是当我重新启动tomcat时，出现以下错误：

```
ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityDataSource' defined in ServletContext resource [/WEB-INF/spring/root-context.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.mysql.jdbc.Driver]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1396)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4701)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5204)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5199)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.mysql.jdbc.Driver]
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1393)
    ... 21 more
30-ago-2012 8:38:11 org.apache.catalina.core.StandardContext listenerStart
GRAVE: Excepción enviando evento inicializado de contexto a instancia de escuchador de clase org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityDataSource' defined in ServletContext resource [/WEB-INF/spring/root-context.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.mysql.jdbc.Driver]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1396)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4701)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5204)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5199)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'driverClassName' threw exception; nested exception is java.lang.IllegalStateException: Could not load JDBC driver class [com.mysql.jdbc.Driver]
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1393)
    ... 21 more 
```

另一个提示：使用 Sysinternals Process Explorer 我可以看到`mysql-connector-java.jar`Tomcat 正在打开：

```
"C:\Program Files\Java\jre6\bin\javaw.exe" -Dcatalina.base=C:\Share\genesis\wsEclipse-indigo\.metadata\.plugins\org.eclipse.wst.server.core\tmp0 "-Dcatalina.home=C:\Program Files\Apache-Tomcat-7.0.12" -Dwtp.deploy=C:\Share\genesis\wsEclipse-indigo\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps "-Djava.endorsed.dirs=C:\Program Files\Apache-Tomcat-7.0.12\endorsed" -Dfile.encoding=Cp1252 -classpath "C:\Program Files\Apache-Tomcat-7.0.12\bin\bootstrap.jar;C:\Program Files\Apache-Tomcat-7.0.12\bin\tomcat-juli.jar" org.apache.catalina.startup.Bootstrap start 
```

![](../Images/e42e4537cae1d4e14f5dca8d0f91c6e4.png)

![Tomcat@进程资源管理器](../Images/e42e4537cae1d4e14f5dca8d0f91c6e4.png)

*还有什么想法吗？*

* * *

**EDIT1：**我尝试使用 Oracle 并且它有效！

```
C:\>dir "c:\Program Files\Apache-Tomcat-7.0.12\lib"\oci*
[...]
02/10/2006  22:36         1.545.954 ocijdbc10.jar
[...]
C:\> 
```

数据源：

```
 <bean id="securityDataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
    <property name="url" value="jdbc:oracle:oci:@BARVDB002D:1545:TFSDB0" />
    <property name="username" value="me" />
    <property name="password" value="qwerty" />
  </bean> 
```

我对mysql做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T12:34:14.957

解决了！

Arturs Licis 的建议是关键。不知何故，mysql驱动程序被错误地下载了。它似乎是一个 .jar 文件，但无法加载。Tomcat 只显示了第一级异常：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
[...] 
```

但是当我用 Class.forName("com.mysql.jdbc.Driver") 编写一个非常简单的 helloworld 时，却显示了以下错误：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
[...]
Caused by: java.util.zip.ZipException: invalid LOC header (bad signature)
[...] 
```

尤里卡！在 WinRar 上打开 .jar 文件显示它可以打开...但有一些错误。

再次下载驱动程序确实解决了问题。

为我自己投反对票:-(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T09:09:09.103

> 简而言之，那里提供的解决方案是：tomcat 需要将 jdbc 数据库驱动程序复制`$CATALINA_HOME/lib/`到`WEB-INF/lib/`. 好的，但它仍然对我不起作用，我变得很生气。

这取决于您如何加载驱动程序。

如果您在 tomcat 中配置驱动程序并将其提供给应用程序，则此语句是正确的。

但是您直接在应用程序中加载驱动程序。然后两种方式，`$CATALINA_HOME/lib/`（在tomcat中）以及`WEB-INF/lib/`（在应用程序中）都应该工作。

但是 Spring 使用一种特殊的方式来加载该类`Class.forName(driverClassNameToUse, true, ClassUtils.getDefaultClassLoader())`，我不知道它对文件的行为，`$CATALINA_HOME/lib/`所以我会尝试将文件放在你的应用程序`WEB-INF/lib/`文件夹中

# jquery - 为什么我得到无限循环？

> ID：12191901
> 
> 赞同：0
> 
> 时间：2012-08-30T07:27:00.970
> 
> 标签：jquery

我正在尝试调整容器的大小并为其设置宽度和高度。这不是代码的全部部分，但出现无限循环然后我调用 **$.fn.imageScale.resizeContainer**函数，我找不到为什么？

```
$( window ).load(function(){    
    $( '#scalable_images' ).imageScale();
});

(function($){
$.fn.imageScale = function(){

    thisCallback = $( this ); // for usage in inner other function
    images = $( this ).find( 'img' ); // images
    imagesHolder = $( this ).find( '.item' ); // image holder
    frameSize = 34; // frame size
    sizingCof = 1.5; // image size cofficient to scale, 1.5 = 150% normal state
    speed = 600; // speed in ms

    $.fn.imageScale.resizeContainer();
    $.fn.imageScale.resize();
    OldContainerW = imagesHolder.width();
    OldOffsetL = offsetL;

    $( window ).bind( 'resize', function(){
        $.fn.imageScale.resizeContainer();
        $.fn.imageScale.resize();
        OldContainerW = imagesHolder.width();
        OldOffsetL = offsetL;
    });
}

$.fn.imageScale.resizeContainer = function(){

    var windowW = $( window ).width();
    var windowH = $( window ).height();
    var scaleImgH = windowH - frameSize * 2;
    var scaleImgW = windowW - frameSize * 2;

    $( this ).height( scaleImgH );
    $( this ).width( scaleImgW );
}
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:28:56.267

因为你将 resizeContainer 函数绑定到了 resize 事件，并且在 resizeContainer 函数中你调整了容器的大小，再次触发了 resize 事件，它再次执行了 resizeContainer ，无穷无尽

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:52:54.640

如果您已经创建了一个函数来触发调整大小事件，那么为什么要将它绑定到函数中

如果调用 $( '#scalable_images' ).imageScale(); 表示调整大小，然后用下面的代码替换下面的代码

```
 $( window ).bind( 'resize', function(){

        $.fn.imageScale.resizeContainer();
        $.fn.imageScale.resize();
            OldContainerW = imagesHolder.width();
        OldOffsetL = offsetL;
    }); 
```

并将其替换为

```
 $.fn.imageScale.resizeContainer();
    OldContainerW = imagesHolder.width();
    OldOffsetL = offsetL; 
```

# iphone - 在 Objective C 中将 xml 解析为对象的问题

> ID：12191905
> 
> 赞同：0
> 
> 时间：2012-08-30T07:27:17.203
> 
> 标签：iphone, objective-c, xml, xml-parsing

我有这个带有一些 id 的 XML，每个都有一个数据，我试图解析所有的 XML，所以最后我会得到一个像这样的对象：

```
A1Object[a1,a1,a1,a1]
A2Object[a2,a2,a2,a2] 
```

问题是首先只解析 A1,A2 ......

xml：

```
<response>
    <tmm>
        <tm id="A1"><DocumentElement>
            <cell>
                <name>Tom</name>
                <lastName>LastNameTom</lastName>
            </cell>
            <cell>
                <name>Tom1</name>
                <lastName>LastNameTom1</lastName>
            </cell>
        </tm>
        <tm id="A2">
            <cell>
                <carType>5</carType>
                <catId>4545</carId>
            </cell>
            <cell>
                <carType>6</carType>
                <catId>565656</carId>
            </cell>
        </tm>
        <tm id="A3">...</tm>
    </tmm>
</response> 
```

我对每个对象（a1，a2 ...）都有他与他的领域的干扰

我正在尝试下一件事：

```
 if (xmlDocument != nil)
        {
            NSArray *nodes = [xmlDocument nodesForXPath:@"//cell" error: nil];
            if (nodes != nil)
            { 
                for (CXMLNode *node in nodes)
                {
                     A1 *a1Object = [[A1 alloc] init];

                    for (int i = 0; i < [node childCount]; i++)
                    {
                        CXMLNode *child = [node childAtIndex: i];
                        NSString *str = [child stringValue];
                        if ([[child name] isEqualToString: @"name"])
                        { 
                            a1Object.A1FacilityId = ([str length] > 0) ? str : nil;
                        }
                        if ([[child name] isEqualToString: @"lastName"])
                        { 
                            a1Object.A1FacilityStreetName = ([str length] > 0) ? str : nil;
                        }                      
                    }

                    [self.A1s addObject:a1Object];
                    [a1Object release];
                }            
            }
        } 
```

我如何才能改进它，所以最后我得到它：

```
A1Object[a1,a1,a1,a1]
A2Object[a2,a2,a2,a2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:02:04.653

您可以使用 TBXML 来解析 XML。

[http://tbxml.co.uk/](http://tbxml.co.uk/)

# c# - Convert.ToInt32(x) 与 (int)x 相同

> ID：12191907
> 
> 赞同：2
> 
> 时间：2012-08-30T07:27:25.613
> 
> 标签：c#

如果 x 是一个值，那么以下只是语法不同但实际上相同吗？第二个是第一个的捷径吗？

```
Convert.ToInt32(x);
(int)x; 
```

还是可以在某些情况下使用其中一种？

在[MSDN](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)中，似乎第一个做的事情与第二个不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:30:43.270

`(int)`是**显式**`Convert.ToInt`转换方法在哪里

考虑：

```
string x = "1";
int temp = 0;
temp = Convert.ToInt32(x);
temp = (int)x; //This will give compiler error 
```

**铸造适用于兼容类型**：

```
long l = 123;
int temp2 = (int)l;

double d = 123.2d;
int temp3 = (int)d; // holds only the int part 123 
```

您可能会看到[Explicit cast - MSDN](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

> 如果无法在没有丢失信息的风险的情况下进行转换，则编译器会要求您执行显式转换，这称为强制转换。强制转换是一种明确通知编译器您打算进行转换并且您知道可能会发生数据丢失的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:33:24.227

除了这里的所有其他帖子之外，这`Convert.ToInt32`往往会舍入结果，而 会`int`截断它。

例子：

```
 float x = -0.6f;
  var b = Convert.ToInt32(x);
  var r = (int)x; 
```

这样做的结果是`b==-1`， bur `r==0`。

这是要记住的**根本区别**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T07:32:29.227

For `(int)x`, 内置在 CLR 中并要求它`x`是一个数字变量，否则将给出异常。

`Convert.ToInt32`被设计成一个通用的转换函数，可以从任何原始类型转换为`int`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T07:29:19.837

如果`x`是一个包含数字的字符串，第一个将成功，但第二个将失败。

```
object x = "1";
Convert.ToInt32(x); // works
(int)x; // fails 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T07:29:51.437

[Convert.ToInt32](http://msdn.microsoft.com/library/system.convert.toint32.aspx)是一种方法，它将多种类型的对象转换为`int`，并且`(int)`是简单的强制转换 - 这可能会导致异常

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T07:30:38.730

它们不一样。int 是一个强制转换，ToInt32 是一个转换过程。它做得更多，更能容忍不正确的数据，而且几乎总是有效的。

# jquery - 获取下拉jQuery的组文本值

> ID：12191910
> 
> 赞同：0
> 
> 时间：2012-08-30T07:27:45.567
> 
> 标签：jquery

我想在变量中检索我的下拉列表的组文本，然后分配给一个名为“txtRegion”的文本框

```
<select id="cmbCity" name="cmbCity" multiple="multiple">
      <option group='Andaman & Nicobar Islands|NORTH' value='1' >Port Blair</option>
</select> 
```

我尝试了以下代码，但似乎没有用

```
$("#cmbCity").change(function() {
    var n = $("#cmbCity").attr('group').text();
    alert(n);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:43:10.563

这是工作代码

/jquery

```
$(function(){

$("#cmbCity").change(function() {
    var n = $("#cmbCity option:selected").attr('group');
    alert(n);
});
}) 
```

//HTML

```
<select id="cmbCity" name="cmbCity" >
<option>select</option>

      <option group='Andaman & Nicobar Islands|NORTH' value='1' >Port Blair</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:35:45.947

你应该给出正确的选择器路径。检查这个... [http://jsfiddle.net/Mprks/](http://jsfiddle.net/Mprks/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:30:30.073

```
$("#cmbCity").click(function(event) {

    var n = $("#cmbCity :selected").attr('group');
    alert(n);
}); 
```

[http://jsfiddle.net/Mprks/1/](http://jsfiddle.net/Mprks/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T07:38:36.330

```
$("#cmbCity").change(function() {
    var n = $("#cmbCity option").attr('group');
    alert(n);
}); 
```

# html - 如何在煎茶触摸轮播中应用放大和缩小功能

> ID：12191912
> 
> 赞同：1
> 
> 时间：2012-08-30T07:27:47.777
> 
> 标签：html, sencha-touch, extjs, zooming, carousel

我有示例应用程序，我在轮播中添加了一些图像，并尝试放大和缩小图像，我面临的问题是只有轮播中的第一张图像响应放大和缩小，无法缩放其余图像轮播中的图像

这是示例代码：

```
Ext.define("PinchTest.view.Main", {
    //extend: 'Ext.List',
    extend: 'Ext.Carousel',
    xtype: 'stcrop',
    require: [
      'Ext.Img',
        'Ext.Loader'
    ],
    config: {
        layout: {
            type: 'fit',
            pack: 'center'
        },

        scrollable: false,
        image: null,
        imageWidth: 140,
        imageHeight: 180,
        imageAdded: false
    },

    initialize: function () {
        var me = this;
        me.callParent();

        //                // me.setImage(me.config.image);
        //               me.setImage("resources/images/CAK_SCA6REDVELV_RedVelvet_GEN_11_OU_SQ.jpg");
        //                me.addImage();
        var carouse = Ext.create('Ext.Carousel', {
            id: 'carose',
            scope: this
        });

        var imgArray = [];
        var images = ["resources/images/CAK_SCA6REDVELV_RedVelvet_GEN_11_OU_SQ.jpg", "resources/images/Home_Blue_Icon.png", "resources/images/twitter.png"];
        Ext.each(images, function (picture) {
            //var i = 0;
            imgArray.push({
                xtype: 'image',
                cls: 'br0',
                src: picture

            });
            console.log(picture);
            me.setImage(picture);
            me.addImage(picture);

        });
        carouse.setItems(imgArray);
        carouse.setActiveItem(0);
        this.add(carouse);

    },
    addImage: function (picture) {
        console.log(this.getImage());
        //console.log(this.getImageAdded());
        // if (!this.getImageAdded(picture)) {
        //if()
        var c = Ext.create('Ext.Container', {
            cls: 'stcrop-picture',
            width: '100%',
            height: '100%',
            cls: 'stcrop-image-container',
            style: 'margin:auto;background-size:100%;background-image:url(' + this.getImage() + ');background-position:center center;background-repeat:no-repeat;',
            draggable: {
                constraint: {
                    min: { x: 0, y: 0 },
                    max: { x: 0, y: 0 }
                },
                listeners: {
                    dragstart: {
                        fn: this.dragStart,
                        order: 'before',
                        scope: this
                    },
                    drag: this.drag,
                    dragend: this.dragEnd,
                    scope: this
                }
            }
        });

        c.element.on('tap', this.tap, this);
        c.element.on('pinchstart', function (e) {
            var xa = e.touches[0].pageX,
            xb = e.touches[1].pageX,
            ya = e.touches[0].pageY,
            yb = e.touches[1].pageY,
            x = Math.abs(xa - xb),
            y = Math.abs(ya - yb),
            h = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));
            this.h = h;
        }, this);

        c.element.on('pinch', function (e) {
            var xa = e.touches[0].pageX,
            xb = e.touches[1].pageX,
            ya = e.touches[0].pageY,
            yb = e.touches[1].pageY,
            x = Math.abs(xa - xb),
            y = Math.abs(ya - yb),
            h = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));

            var p = parseInt(e.target.parentNode.style.backgroundSize);
            ((this.h - h) > 0) ? p-- : p++;
            e.target.parentNode.style.backgroundSize = p + '%';

            this.h = h;

        }, this);

        c.element.on('pinchend', function () { console.log('pinchend') });

        this.add(c);
        //this.setImageAdded(true);
        //}

        return c;
    },

    tap: function (e) {
        if (typeof this.cropper !== 'undefined') { this.cropper.destroy(); }
    },

    dragStart: function (d, e, x, y) {
        console.log(e.getTarget().className);
        var x = e.startX,
        y = e.startY;

        if (e.getTarget().className.indexOf('stcrop-image-container') === -1) { return false; }

        this.tap();

        this.cropper = Ext.create('Ext.Container', {
            height: 1,
            width: 1,
            top: y,
            left: x,
            style: 'position:absolute;z-index:10;border:1px dashed #333;background-color:rgba(0,0,0,0.3);'
        });

        Ext.Viewport.add(this.cropper);
        this.cropper.show();
    },

    drag: function (d, e, x, y) {
        var c = this.cropper,
        w = Math.max(e.startX, e.pageX) - Math.min(e.startX, e.pageX),
        h = Math.max(e.startY, e.pageY) - Math.min(e.startY, e.pageY);

        if (e.startX > e.pageX) { c.setLeft(e.startX - w); }
        if (e.startY > e.pageY) { c.setTop(e.startY - h); }

        c.setHeight(h);
        c.setWidth(w);
    },

    dragEnd: function (d, e, x, y) {
        var c = this.cropper;

        c.setHtml('<div class="stcrop-tab tab-top-left"></div>' +
    '<div class="stcrop-tab tab-top"></div>' +
    '<div class="stcrop-tab tab-top-right"></div>' +
    '<div class="stcrop-tab tab-left"></div>' +
    '<div class="stcrop-tab tab-right"></div>' +
    '<div class="stcrop-tab tab-bottom-left"></div>' +
    '<div class="stcrop-tab tab-bottom"></div>' +
    '<div class="stcrop-tab tab-bottom-right"></div>');

        c.setDraggable({
            constraint: {
                min: { x: parseInt(-c.getLeft()), y: parseInt(-(c.getTop() - this.element.dom.parentNode.offsetTop)) },
                max: { x: parseInt(this.getImageWidth() - (c.getLeft() + c.getWidth())), y: parseInt(this.getImageHeight() - (c.getTop() + c.getHeight() - this.element.dom.parentNode.offsetTop)) }
            }
        });

        console.log('top : ' + parseInt(c.getTop() - this.element.dom.parentNode.offsetTop));
        console.log('left : ' + c.getLeft());
        console.log('height : ' + c.getHeight());
        console.log('width : ' + c.getWidth());
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:30:56.397

以下是针对您的问题的一些现有解决方案。我之前使用 Pinch zoom 在容器内成像 - 但我不记得我是否使用过这两个中的任何一个。

1.  [https://market.sencha.com/users/134/extensions/159](https://market.sencha.com/users/134/extensions/159)

2.  [http://www.sencha.com/forum/showthread.php?197903-Pinch-Image-with-carousel-and-working-fine](http://www.sencha.com/forum/showthread.php?197903-Pinch-Image-with-carousel-and-working-fine)

# spring - META-INF/persistence.xml 无法打开，因为它不存在

> ID：12191914
> 
> 赞同：2
> 
> 时间：2012-08-30T07:27:57.300
> 
> 标签：spring, classpath, persistence.xml, applicationcontext

我正在创建一个基本的 spring-maven 项目，该项目应该作为 java 应用程序运行（在进程中，而不是通过 Web 服务器）。

我的应用程序上下文位于我的类路径中的资源文件夹下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:ox="http://www.springframework.org/schema/oxm"
    xsi:schemaLocation="
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
   http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.1xsd">

<!-- Root Context: defines shared resources visible to all other web components -->

<!-- Context -->
<context:component-scan base-package="me.co.nutrition" />

<!-- Properties -->
<context:property-placeholder
    location="classpath:/nutrition.accumulation.properties" />

<!-- DB -->
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="persistenceUnitManager"
    class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
    <property name="defaultPersistenceUnitName" value="nutrition-pu"/>
    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    <property name="defaultDataSource" ref="dataSource" />
</bean>

<!-- JPA -->
<bean id="entityManager"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitManager" ref="persistenceUnitManager" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
</bean>

<!-- jpaVendorAdapter (works in conjunction with the persistence.xml) -->
<bean id="jpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="database" value="${jpa.database}" />
    <property name="showSql" value="${jpa.showSql}" />
    <property name="databasePlatform" value="${jpa.dialect}" />
    <property name="generateDdl" value="${jpa.generateDdl}" />
</bean>

<!-- Transactions -->
<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManager" />
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="persistenceAnnotation" class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

</beans> 
```

我创建了一个 META-INF 文件夹作为源文件夹，并将这个文件夹添加到我的类路径中。我在这个文件夹下创建了我的 persistence.xml 文件。

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">

<persistence-unit name="nutrition-pu" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
</persistence-unit>
</persistence> 
```

如前所述，它位于我的类路径中的 META-INF 文件夹下。这是我的 .classpath 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="target/classes" path="src/main/java"/>
    <classpathentry kind="src" output="target/test-classes" path="src/test/java"/>
    <classpathentry kind="src" path="META-INF"/>
    <classpathentry kind="src" path="resources"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"/>
    <classpathentry kind="output" path="target/classes"/>
</classpath> 
```

您可以看到 META-INF 文件夹在那里。我创建了一个简单的 main 运行：

```
public static void main(String[] args) throws Exception {

            ApplicationContext context = new ClassPathXmlApplicationContext("accumulationApplicationContext.xml");

...
} 
```

当我运行它时，当我尝试加载应用程序上下文时，我得到一个异常，指出无法找到或解析persistence.xml：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'persistenceUnitManager' defined in class path resource [accumulationApplicationContext.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Cannot parse persistence unit from class path resource [META-INF/persistence.xml]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 30 more
Caused by: java.lang.IllegalArgumentException: Cannot parse persistence unit from class path resource [META-INF/persistence.xml]
    at org.springframework.orm.jpa.persistenceunit.PersistenceUnitReader.readPersistenceUnitInfos(PersistenceUnitReader.java:141)
    at org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager.readPersistenceUnitInfos(DefaultPersistenceUnitManager.java:380)
    at org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager.preparePersistenceUnitInfos(DefaultPersistenceUnitManager.java:341)
    at org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager.afterPropertiesSet(DefaultPersistenceUnitManager.java:326)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 37 more
Caused by: java.io.FileNotFoundException: class path resource [META-INF/persistence.xml] cannot be opened because it does not exist
    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:158)
    at org.springframework.orm.jpa.persistenceunit.PersistenceUnitReader.readPersistenceUnitInfos(PersistenceUnitReader.java:129) 
```

我无法理解这个问题。我很确定我有[正确](http://i.cubeupload.com/rK1LQW.png)的结构，为什么我的 persistence.xml 不能加载？

提前致谢！

更新：

感谢[鲍里斯](https://stackoverflow.com/users/241986/boris-treukhov)，我得到了它的工作。似乎我在错误的路径下创建了 META-INF。发生这种情况是因为我错过了对 Eclipse 项目结构的理解。[这](http://i.cubeupload.com/546Cga.png)是正确的结构。我希望这可以帮助别人..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T08:15:43.557

您的 META-INF 文件夹应该直接位于源文件夹*下*，而不是单独的源文件夹。

请参阅[我应该在 Eclipse 中将 META-INF 放在哪里？](https://stackoverflow.com/questions/9998360/where-do-i-put-meta-inf-in-eclipse)

*[从 JPA 2.0 规范](http://jcp.org/en/jsr/detail?id=317)*更新**

 *> 8.2 <...> 持久性单元由persistence.xml 文件定义。META-INF 目录包含persistence.xml 文件的jar 文件或目录称为持久单元的根。在 Java EE 环境中，持久性单元的根必须是以下之一：
> 
> *   一个 EJB-JAR 文件
> *   WAR 文件的 WEB-INF/classes 目录
> *   WAR文件的WEB-INF/lib目录下的jar文件
> *   EAR 库目录中的 jar 文件
> *   应用程序客户端 jar 文件

> 8.2.1 <...> persistence.xml 文件定义了一个持久性单元。persistence.xml 文件位于 持久单元根目录的*META-INF目录中。*

因此，如何配置项目没有区别，重要的是生成的 jar。如果您使用的是 maven，通常的做法是使用*src/main/resources*文件夹作为 META-INF。*

# mysql - 是否可以使用 MySQL 的模型/模式进行复杂查询？

> ID：12191915
> 
> 赞同：0
> 
> 时间：2012-08-30T07:27:57.323
> 
> 标签：mysql, database-design

复杂查询是指您必须使用至少 2 个连接的查询。假设我已经构建了数据库的模式/模型。现在，只要我有，我就`users.user_id = 5`要求`logins.lastlogin`,`groups.groupname`和`history.user_weight`. 我不会编写任何连接 SQL 语句，所有这些语句都将在后台通过数据库的模式/模型进行连接。MySQL可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:53:29.857

如果你不喜欢 Views 的想法——顺便说一句，这是**理想**的——你总是可以模仿Branko 提到的[Oracle 物化视图，方法是：](https://stackoverflow.com/questions/93539/what-is-the-difference-between-views-and-materialized-views-in-oracle)

在要加入的每个表上创建和触发器`INSERT`、、和; 这将更新一个名为(example)的新的第 5 个表`DELETE``UPDATE``users``logins``groups``history``lgh`

因此，您将这个新`lgh`表用于上面想要的查询。与实际视图相比，它可能会减少扫描的行数，但现在每次原始 4 个表中的任何一个表中的数据更改时都会产生开销。根据您使用这个新 lgh 表与更新其他 4 个表的频率，您可能会看到一些性能改进。

**免责声明：**

*   我不宽恕这种解决方法，这只是针对您的问题的替代建议。
*   您应该真正考虑为原始 4 个表添加更多索引，甚至可能为您在该连接查询中使用的每一列添加更多索引。
*   这可能类似于“缓存”……不完全是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:31:06.440

是的，有可能`views`

[http://dev.mysql.com/doc/refman/5.5/en/views.html](http://dev.mysql.com/doc/refman/5.5/en/views.html)

# android - 无法在 android 中导入 android.widget.NumberPicker

> ID：12191924
> 
> 赞同：3
> 
> 时间：2012-08-30T07:28:30.823
> 
> 标签：android, android-widget

嗨，我使用的是 Android 版本 2.3.3 。我想使用 NumberPicker 视图，我可以在我的 xml 代码中看到它。但是当我尝试在我的 java 类中导入 NumberPicker 时，我没有在那里找到它。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T07:29:57.170

[NumberPicker](http://developer.android.com/reference/android/widget/NumberPicker.html)是在 API 级别 11 中添加的。因此，您不能将其导入您的 API 10 (Android 2.3.3) 项目。

备择方案：

*   [android-numberpicker](https://github.com/SimonVT/android-numberpicker/)：Android 4.0 NumberPicker 向后移植到 2.1。
*   [android-wheel](http://code.google.com/p/android-wheel/)：具有自定义项目支持的灵活轮子。

如果我是你，我会选择第一个。

# jquery - 从另一个页面加载此下拉菜单后，Jquery 立即将值添加到选择语法中

> ID：12191925
> 
> 赞同：0
> 
> 时间：2012-08-30T07:28:32.783
> 
> 标签：jquery, select, load, onchange

我有以下代码将元素从远程页面（在同一域下）加载到当前页面中。#Beijing 元素包含一个下拉菜单，我希望在加载后以选择语法在菜单中添加一些值。我想添加的价值是：

**onChange="this.form['CAT_Custom_221342'].value=this[this.selectedIndex].value"**

这是我得到的代码，请帮助我进一步编辑它，谢谢。

```
function StateBeijingNext() { 
$('#SuburbSelect').load('/Country/CN/_CN_suburbs.html #Beijing');   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:32:11.333

`.load()`接受一个回调函数，允许您在加载后访问正在加载的元素，见下文：

```
function StateBeijingNext() { 
    $('#SuburbSelect').load('/Country/CN/_CN_suburbs.html #Beijing', function(){
      //the element has been successfully loaded into the DOM.
      //peform your custom logic against the #Beijing element here.
    });   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:34:07.917

无需在 html 中插入 javascript 事件处理程序；这在调试时很难在逻辑上遵循，而且风格很差，因为您没有清晰地分离内容和功能。由于您使用的是 jQuery，因此请利用其事件绑定功能：

```
$('#SuburbSelect').on('change', '#Beijing', function() {
    this.form['CAT_Custom_221342'].value = this[this.selectedIndex].value;
}); 
```

您可以**在 DOM 就绪**后立即绑定此事件处理程序，并且当您插入新内容时，更改处理程序将按预期工作。

# javascript - 更改 javascript 中的 tab 键行为

> ID：12191931
> 
> 赞同：2
> 
> 时间：2012-08-30T07:28:55.003
> 
> 标签：javascript

我在 contenteditable div 中有一个文本编辑器。

我需要更改 [TAB] 行为以插入空格或 \t 而不是关注下一个元素，这是默认浏览器行为。

我有一个像这样的事件处理程序：

```
function keyDown(e) {
    // press tab.
    if (e.keyCode == 9) {
        e.preventDefault();
        return;
    }
} 
```

这导致不会失去对 div 的关注，我现在只需要在光标位置插入 [TAB] 或空格。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:37:23.310

这可以解决问题：http: [//jsfiddle.net/eFLGZ/](http://jsfiddle.net/eFLGZ/)

```
$('textarea').keydown(keyDown);

function keyDown(e) {

    // press tab.
    if (e.keyCode == 9) {
        e.preventDefault();

        // Insert a space.
        var txt = $('textarea').val();
        $('textarea').val(txt + ' ');

        return;
    }
} 
```

请参阅[此处](https://stackoverflow.com/questions/1064089/inserting-a-text-where-cursor-is-using-javascript-jquery)了解如何输入当前放置光标的文本。

# c++ - 奇怪的警告：std::string::find 返回 size_t，但它可能是 npos

> ID：12191937
> 
> 赞同：0
> 
> 时间：2012-08-30T07:29:23.613
> 
> 标签：c++, string, stl

我有以下编译器 (g++ (GCC) 4.1.2 20071124) 警告

“有符号和无符号整数表达式之间的比较”

```
 string a_str = ...

 if(a_str.rfind("<CDATA") == string::npos ) ... 
```

这很奇怪。为什么这么标准的东西会产生警告？

# iphone - 我怎么知道相机是否对焦？

> ID：12191940
> 
> 赞同：2
> 
> 时间：2012-08-30T07:29:30.783
> 
> 标签：iphone, camera

我想这样做：当相机对焦时，应用程序会自动拍照。但我发现没有办法检测相机是否对焦。

我怎么知道相机是否对焦？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T07:51:29.613

[`AVCuptureDevice`](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html)你应该检查是否支持焦点。并非所有 iOS 设备都支持对焦，因此您确实需要通过调用检查是否支持对焦[`isFocusModeSupported:`](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/occ/instm/AVCaptureDevice/isFocusModeSupported%3a)

然后开始监控[`adjustingFocus`](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009520)财产。这会告诉您设备是否正在对焦。

因此，虽然[`adjustingFocus`](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009520)返回`YES`不拍照，但如果它更改为`NO`设备，则应聚焦。

# django - 视图问题

> ID：12191943
> 
> 赞同：0
> 
> 时间：2012-08-30T07:29:50.320
> 
> 标签：django, django-views

我已将 urls.py 文件中的 url 指定为**url(r'^register/$', 'drinker.views.drinker_reg'),**

我在views.py 文件中创建了drinker_reg 视图。

views.py 的代码是：

```
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template import RequestContext
from drinker.forms import RegistrationForm

def drinker_reg(request):
    if request.user.is_authenticated():
         return HttpResponseRedirect("/profile/")
    if request.method == 'POST':
         pass
    else:
           ''' user is not submitting the form, show them a blank registration form '''

           form=RegistrationForm()
           context={'form':form}
           return render_to_response('registration.html', context, context_instance=RequestContext(request)) 
```

但我仍然**在 /register 处收到错误 ViewDoesNotExist 无法导入 Drinker.views.drinker_reg。模块drinker.views 中不存在视图。**

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:46:17.990

尝试

```
url(r'^drinker_reg/?$', 'drinker.views.drinker_reg'), 
```

确保`drinker`应该在您的`INSTALLED_APPS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:25:06.760

您是如何创建饮酒者应用程序的？

你有一个**__ *init* __** .py 文件在饮酒者应用程序目录中吗？

我们可以看看你的目录布局吗？

您确定饮酒者在您的 INSTALLED_APPS 中吗？

你可以从你的 shell (./manage.py shell) 中从饮用者应用程序中导入一个模块吗？

# hibernate - 部分复合键上的休眠映射

> ID：12191948
> 
> 赞同：2
> 
> 时间：2012-08-30T07:30:03.940
> 
> 标签：hibernate, partial, composite

我有类似这样的表结构，一对多和多对一映射到复合键之一。

```
@Entity
@Table(name = "parent", catalog = "testdb")
public class Parent implements java.io.Serializable {

private Long fileId;

private Set<Children> children = new HashSet<Children>();

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "file_id", unique = true, nullable = false)
public Long getFileId() {
    return this.fileId;
}

public void setFileId(Long fileId) {
    this.fileId = fileId;
}

@OneToMany(mappedBy = "id.childrenIc")
public Set<Children> getChildren() {
    return children;
}

public void setChildren(Set<Children> children) {
    this.children= children;
}
}

@Entity
@Table(name = "children", catalog = "testdb")
public class Children implements java.io.Serializable {
private ChildrenId id;

@EmbeddedId
@AttributeOverrides({
    @AttributeOverride(name = "childId", column = @Column(name = "child_id", nullable = false)),
    @AttributeOverride(name = "childrenIc", column = @Column(name = "child_ic", nullable = false)) })
public ChildrenId getId () {
    return this.id;
}

public void setId(ChildrenId id) {
    this.id = id;
}
}

@Embeddable
public class ChildrenId implements java.io.Serializable {
private long childId;
private Children childIc;

@ManyToOne
public Children getChildIc() {
    return childIc;
}

public void setChildIc(Children childIc) {
    this.childIc= childIc;
}

@Column(name = "child_id", nullable = false)
public long getChildId() {
    return this.childId;
}

    public void setChildId(long childId) {
        this.childId= childId;
    }
}

Criteria criteria = session.createCriteria(Parents.class);
Criteria childCri = criteria.createCriteria("childrenIc");
childCri .add(Restrictions.eq("childId", childId)); 
```

当我尝试使用标准加入表格时，它失败了。“where 子句”org.hibernate.exception.SQLGrammarException 中的未知列“this_.childrenIc_child_id”：无法执行查询

即使我改成

```
Criteria childCri = criteria.createCriteria("id.childrenIc"); 
```

它也失败了。

请帮忙，谢谢。

# android - Android，如何滚动几个ListView

> ID：12191955
> 
> 赞同：1
> 
> 时间：2012-08-30T07:30:37.517
> 
> 标签：android, listview, scroll

我`ListView`在相同的布局中有 3 个，我希望它们都显示所有行，所以我需要滚动到 3 `ListViews`。我试着把类似的东西...

```
ScrollView
  RelativeLayout
   ListView1
   ListView2
   ListView3 
```

但是列表只显示一行半而不是所有行。

另一方面，我也尝试使用可滚动的`LinearLayout`或`RelativeLayout`但它不起作用。

任何想法？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:40:40.193

永远不要封装你的`ListView`内心`ScrollView`。因为在可滚动容器中放置可滚动视图是没有意义的。

此外，您应该平均分配您的`LinearLayout`使用`android:weightSum`并应用于`android:layout_weight`您的 ListViews。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T07:39:01.813

检查这个[http://www.androidpeople.com/android-scrollview-example/](http://www.androidpeople.com/android-scrollview-example/)

把你所有的都放在 `ListView` 里面`ScrollView`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T07:59:56.210

我对您的建议是不要在单个布局屏幕中使用多个列表视图，因为这会使用户感到困惑并使他/她的事情变得复杂。我认为将多个列表放在单个屏幕中并不是一个好主意，因为触摸会变得奇怪和使用屏幕会变得复杂。您应该考虑其他方式，在一个屏幕中同时显示多个列表，就像您可以使用[TabWidget](http://developer.android.com/reference/android/widget/TabWidget.html)一样。您也可以使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)。

Romain Guy（Google 开发人员）也在以下链接中接受了这一事实，即如果您在单个屏幕中使用多个列表，则 UI 设计是有问题的。

[http://groups.google.com/group/android-developers/browse_thread/thread/77acd4e54120b777](http://groups.google.com/group/android-developers/browse_thread/thread/77acd4e54120b777)

我希望我的回答对您有所帮助，并使您考虑改变您的 UI 设计。

# javascript - 仅在 Chrome 中堆叠在一起的图像

> ID：12191969
> 
> 赞同：0
> 
> 时间：2012-08-30T07:31:46.627
> 
> 标签：javascript, css, google-chrome, gallery

我在[sidenote.hu/cellwars/pagez/screenshots/](http://sidenote.hu/cellwars/pagez/screenshots/)有一个小的侧滚动画廊，它在所有主要浏览器（Firefox、Safari、Opera、IE9）中都能正确显示，但在 Google Chrome 中却没有。

在 Chrome 中，所有图像都堆叠成一列显示，因此侧面滚动画廊被破坏：

[![](../Images/632a76be8f93a7d1b62078c1f140243a.png)](https://i.stack.imgur.com/ohBhN.png)[![](../Images/7c208a88ca411dbd3a89ef6474c45ea3.png)](https://i.stack.imgur.com/bK2ui.png)

左：Firefox 15.0，右：谷歌浏览器 21.0.1180.83

不幸的是，我不熟悉 JavaScript，但我熟悉 CSS，并且我已经尝试了我能想到的一切，但没有任何帮助。所有来源都可以在链接的网站上找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:53:47.037

尝试使您的#image-holder 足够宽。我将其设置为 1680 像素宽，现在该图库在 Chrome 21 中运行良好。当然，您需要根据图库中的特定图像设置宽度。

编辑：我看到你已经将它设置为 100000000px。对于新的 Chrome 来说，这似乎太过分了。工作正常，少一个零。

# javascript - 谷歌街景广角

> ID：12191971
> 
> 赞同：2
> 
> 时间：2012-08-30T07:32:01.530
> 
> 标签：javascript, google-maps, google-street-view

我在自己的网站上有一张街景地图，但它是广角透视图。我在看一条路，右边是一条 90 度角的支路。你在 maps.google.com 上看不到这条路，但在我自己的街景地图上，这条路是对角线的。

我正在使用 Google Maps JavaScript API v3

有没有办法可以禁用广角透视？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:36:46.237

对于那些需要澄清的人：

![自己的网站](../Images/f697000235ad3413c8279f0e2ccc5e9c.png)

![来自谷歌本身的网站](../Images/701876a6c6c62a0389082d2923cac903.png)

正如你所看到的第一个，小路似乎以一个角度与主干道相撞，但在谷歌地图上的主干道上不会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:18:11.170

可能是您使用了不同的缩放级别吗？谷歌[关于街景全景缩放级别的文档](https://developers.google.com/maps/documentation/javascript/streetview#TilingPanoramas)表明，缩放级别 0 会导致 180º 视野，而缩放级别 1 会导致 90º 视野；这似乎与[Sietse 的回答](https://stackoverflow.com/questions/12191971/google-streetview-wide-angle#answer-12192030)大致相符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:46:36.847

我试图重现该问题，但已解决。我什么都没做，所以它一定是谷歌 API 的东西，尽管这似乎不太可能。

感谢您的所有兴趣。

# c# - MVC3 在 URL 中按 Enter

> ID：12191972
> 
> 赞同：0
> 
> 时间：2012-08-30T07:32:04.080
> 
> 标签：c#, asp.net-mvc

我在一个网站上工作，我在我的网站上有一个注册视图，在按下注册按钮时，我正在点击一个 ActionMethod，一切正常，问题是在成功注册后，如果用户在显示的 URL 上按 Enter 键找不到资源，我该如何处理？下面是我的控制器代码 ==>

```
 public ActionResult Join(SignUpModel model)
        {        
                int create = Repository1.Create(UserEntity);
                if (create > 0)//if <= 0 means username already exists
                {
                    int savesetup = Repository2.SaveInfo(model);                                        
                    TempData["SucessMsg"] = "User registered Successfully";
                    return View("Index");
                }
                if (create < 0)
                {
                    TempData["ErrorMessage"] = "Username already exists";
                    return View("Index", model);
                }         

            return RedirectToAction("Index", "SignUp");
        } 
```

并且注册的视图是索引视图

```
public ActionResult Index()
        {         
            return View();
        } 
```

由于我没有名为 Join 的视图，而是将其重定向到索引页面，但是当用户在注册/加入 URL 上并按 Enter 时，它显示找不到资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:43:44.373

是否`ActionResult Join(SignUpModel model)`标有 [HttpPost] 属性？如果是这样，那么只有在用户发出 POST 请求时才会调用它（并且自己输入 url 将执行 GET 请求。如果是这种情况，只需添加另一个名为 Join() 的操作方法，而无需 [HttpPost] -attribute 并使用它来将它们重定向到正确的页面（或显示您当然想要的任何信息）。

## 编辑

阅读您的问题时我有点仓促，并错过了您已经将用户重定向离开`ActionResult Join(SignUpModel model)`的事实，对此深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:41:48.940

您是否检查过是否有一个名为 Index 的视图。

```
 return RedirectToAction("Index", "SignUp");
    }

    public ActionResult Index()
    {         
        return View();
    } 
```

如果有一个名为Index的View，上面的代码是正确的。返回View()会在MVC中搜索一个与ActionResult同名的View。确保有一个名为 Index 的视图。如果没有名为 index 的视图，它将给出一个错误页面，例如找不到页面。

# python - Pyro4 无法在计算机之间连接

> ID：12191978
> 
> 赞同：2
> 
> 时间：2012-08-30T07:32:45.960
> 
> 标签：python, pyro

我对 Python 和 Pyro4 比较陌生，并且正在尝试弄清楚如何使用它们。我的问题是，鉴于以下服务器和客户端代码，我的两台计算机似乎无法相互通信。它们都运行 Ubuntu 12.04，并且在同一个本地网络上，并且可以互相 ping（和 ssh）。服务器 IP 为 192.168.0.18，客户端为 192.168.0.22。

这是我玩过（服务器）的（非常基本的）服务器代码：

```
import Pyro4

class dispatcher(object):
    def __init__(self):
        self.name = "Dispatcher"
        self.version = "0.1"

    def request_work(self):
        print("Someone requested work!")
        return ['Work']

disp = dispatcher()
daemon = Pyro4.Daemon(host="192.168.0.18", port=5150)
Pyro4.Daemon.serveSimple(
    { disp: "test.dispatcher" },
    ns=False,
    daemon=daemon,
    verbose = True
) 
```

这将运行并输出以下内容：

```
/usr/local/lib/python2.7/dist-packages/Pyro4-4.14-py2.7.egg/Pyro4/core.py:155:    UserWarning: HMAC_KEY not set, protocol data may not be secure warnings.warn("HMAC_KEY not set, protocol data may not be secure") 
Object <__main__.dispatcher object at 0x7ff21f9a6b90>:
uri = PYRO:mb.dispatcher@192.168.0.18:5150
Pyro daemon running. 
```

在客户端：

```
import Pyro4
di = Pyro4.Proxy("PYRO:test.dispatcher@192.168.0.18:5150")
di.request_work() 
```

过了一会儿，这又回来了：

```
Pyro4.errors.CommunicationError: cannot connect: [Errno 110] Connection timed out 
```

我也尝试过设置 Pyro4.config.HOST = '192.168.0.18' 而不是设置守护进程，但没有运气。

任何想法为什么这不起作用，或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:17:15.280

我不确定这个问题。你打开 Pyro4 的名称服务了吗？根据教程，我通常执行以下shell

```
python -Wigonre -m Pyro4.naming --host [your ip] --port [your port] 
```

这个 shell 可以为 Pyro4 提供名称服务，我通常使用 PYRONAME 而不是 PYRO。

# php - 如何使用 php 调用 javascript 函数？

> ID：12191983
> 
> 赞同：0
> 
> 时间：2012-08-30T07:32:56.037
> 
> 标签：php, javascript

这个问题比我们想象的要复杂。

如果满足某些条件，我需要从 php 调用 javascript 中的函数。

php 代码和 javascript 函数在同一个文件中。

我不需要生成java脚本函数的代码，因为在带参数的函数中完成是无效的，我还需要对函数的内容进行更改。

如何`CreateSVG();`在 php 代码中调用第 58 行？非常感谢。

我的完整文件如下所示：

```
<?php
require_once("includes/initialize.php");
?>
<!DOCTYPE html>
<html>
<head>
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

</head>
<body>

    <div id="frame_shape">&nbsp;
        <div id="main">
            <h2>OOP Class Demo using PHP</h2>
            <h2>Drawing shape usinig user parameteres.</h2>
            <p>
            Please enter two numbers to calculate the area of rectangle or tringle and press submit...
            <p>
                <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
                    <br>width<input type=text name='width'>
                    <br>height<input type=text name='height'>
                    <h2>select shape</h2>
                    <input type="radio" name="shape" value="Rectangle" /> Rectangle
                    <br><input type="radio" name="shape" value="Tringle" /> Tringle
                    <br><input type="submit" name="submit" value="Submit Form"><br>
                </form>
        <br/><br/>
        </div>
        <div id="retangle">
            <div id="svgContainer"></div>
        </div>
        <div id="Tringle"></div>
            <div id="contener">
                <?php
                 echo("<br>");
                        if (isset($_POST['submit'])) {
                                if (!empty($_POST['shape'])) {
                                  if ($_POST['shape'] === 'Rectangle') { 
                                      // create object of rectangle and calculate it is area
                  $rect = new Rectangle ($_POST['width'], $_POST['height']);
                  echo 'rectangle of this size would have the area of ', $rect->GetArea(), "<br />";
                  //echo '<script type="text/javascript">', 'CreateSVG();', '</script>';
                  echo '<script>CreateSVG();</script>';

                                  }
                                    else if ($_POST['shape'] === 'Tringle'){
                                              // create object of tringle and calculate it is area by extends
                  $tri = new Triangle ($_POST['width'], $_POST['height']);
                  echo 'triangle of this sizes would have the area of ', $tri->GetArea();
                                         }
                                }
                       }
                ?>
            </div>
    </div>

<script>

$(document).ready(function() {

    function CreateSVG(){
            var xmlns = "http://www.w3.org/2000/svg";
            var boxWidth = <?php echo $_POST['width'];?>;
            var boxHeight = <?php echo $_POST['height'];?>;
            alert(boxWidth + ' ' + boxHeight);
            var svgElem = document.createElementNS (xmlns, "svg");
            svgElem.setAttributeNS (null, "viewBox", "0 0 " + boxWidth + " " + boxHeight);
            svgElem.setAttributeNS (null, "width", boxWidth);
            svgElem.setAttributeNS (null, "height", boxHeight);
            svgElem.style.display = "block";

            var g = document.createElementNS (xmlns, "g");
            svgElem.appendChild (g);
            g.setAttributeNS (null, 'transform', 'matrix(1,0,0,-1,0,300)');

                // draw linear gradient
            var defs = document.createElementNS (xmlns, "defs");
            var grad = document.createElementNS (xmlns, "linearGradient");
            grad.setAttributeNS (null, "id", "gradient");
            grad.setAttributeNS (null, "x1", "0%");
            grad.setAttributeNS (null, "x2", "0%");
            grad.setAttributeNS (null, "y1", "100%");
            grad.setAttributeNS (null, "y2", "0%");
            var stopTop = document.createElementNS (xmlns, "stop");
            stopTop.setAttributeNS (null, "offset", "0%");
            stopTop.setAttributeNS (null, "stop-color", "#ff0000");
            grad.appendChild (stopTop);
            var stopBottom = document.createElementNS (xmlns, "stop");
            stopBottom.setAttributeNS (null, "offset", "100%");
            stopBottom.setAttributeNS (null, "stop-color", "#0000ff");
            grad.appendChild (stopBottom);
            defs.appendChild (grad);
            g.appendChild (defs);

                // draw borders
            var coords = "M 0, 0";
            coords += " l 0, 300";
            coords += " l 300, 0";
            coords += " l 0, -300";
            coords += " l -300, 0";

            var path = document.createElementNS (xmlns, "path");
            path.setAttributeNS (null, 'stroke', "#000000");
            path.setAttributeNS (null, 'stroke-width', 10);
            path.setAttributeNS (null, 'stroke-linejoin', "round");
            path.setAttributeNS (null, 'd', coords);
            path.setAttributeNS (null, 'fill', "url(#gradient)");
            path.setAttributeNS (null, 'opacity', 1.0);
            g.appendChild (path);

            var svgContainer = document.getElementById ("svgContainer");
            svgContainer.appendChild (svgElem); 
    }

});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:42:17.940

以下示例将帮助您：

```
 <?php
     ----
     ----

    if (< SOME CONDITION >) {
    echo "<script language=javascript>CreateSVG()</script>";
    }

    ---- 
    ---- 
   ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:44:51.277

将 CreateSVG() Javascript 函数移动到 HEAD 区域，并删除 document.Ready 语法，以便标题读取...

```
<?php
require_once("includes/initialize.php");
?>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>OOP Class Demo using PHP by yossi levi.</title>
    <script src="http://www.centerwow.com/gotemp/gotemptics.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
        function CreateSVG() {
             /* Add the existing function here */
        }
    </script>
    <style>
        body {  font-size:20px; background:#00CCFF; }
        button { margin:2px; }
        /* Styles removed for simplicity */
     </style>
</head> 
```

在您的方法中，您试图调用尚未定义的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:44:17.713

`<?php if (condition) :?>`在这个函数之间放置块

```
<?php if (condition): ?>
    <script>

    $(document).ready(function() {

        function CreateSVG(){
                var xmlns = "http://www.w3.org/2000/svg";
                var boxWidth = <?php echo $_POST['width'];?>;
                var boxHeight = <?php echo $_POST['height'];?>;
                alert(boxWidth + ' ' + boxHeight);
                var svgElem = document.createElementNS (xmlns, "svg");
                svgElem.setAttributeNS (null, "viewBox", "0 0 " + boxWidth + " " + boxHeight);
                svgElem.setAttributeNS (null, "width", boxWidth);
                svgElem.setAttributeNS (null, "height", boxHeight);
                svgElem.style.display = "block";

                var g = document.createElementNS (xmlns, "g");
                svgElem.appendChild (g);
                g.setAttributeNS (null, 'transform', 'matrix(1,0,0,-1,0,300)');

                    // draw linear gradient
                var defs = document.createElementNS (xmlns, "defs");
                var grad = document.createElementNS (xmlns, "linearGradient");
                grad.setAttributeNS (null, "id", "gradient");
                grad.setAttributeNS (null, "x1", "0%");
                grad.setAttributeNS (null, "x2", "0%");
                grad.setAttributeNS (null, "y1", "100%");
                grad.setAttributeNS (null, "y2", "0%");
                var stopTop = document.createElementNS (xmlns, "stop");
                stopTop.setAttributeNS (null, "offset", "0%");
                stopTop.setAttributeNS (null, "stop-color", "#ff0000");
                grad.appendChild (stopTop);
                var stopBottom = document.createElementNS (xmlns, "stop");
                stopBottom.setAttributeNS (null, "offset", "100%");
                stopBottom.setAttributeNS (null, "stop-color", "#0000ff");
                grad.appendChild (stopBottom);
                defs.appendChild (grad);
                g.appendChild (defs);

                    // draw borders
                var coords = "M 0, 0";
                coords += " l 0, 300";
                coords += " l 300, 0";
                coords += " l 0, -300";
                coords += " l -300, 0";

                var path = document.createElementNS (xmlns, "path");
                path.setAttributeNS (null, 'stroke', "#000000");
                path.setAttributeNS (null, 'stroke-width', 10);
                path.setAttributeNS (null, 'stroke-linejoin', "round");
                path.setAttributeNS (null, 'd', coords);
                path.setAttributeNS (null, 'fill', "url(#gradient)");
                path.setAttributeNS (null, 'opacity', 1.0);
                g.appendChild (path);

                var svgContainer = document.getElementById ("svgContainer");
                svgContainer.appendChild (svgElem); 
        }

    });
    </script>
<?php endif; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T07:45:07.297

将此代码插入脚本标记的末尾...

```
<?php          
    if (isset($_POST['submit'])) {
        if (!empty($_POST['shape'])) {
            if ($_POST['shape'] === 'Rectangle') { 
                  echo "CreateSVG();";
            }
        }
    }
?> 
```

像这样...显示部分代码...

```
$("#Tringle").text($("#Tringle").width() +' '+ $("#Tringle").height() );
$("#Tringle").text($("#Tringle").width() +' '+ $("#Tringle").height() +', left: '+ $("#Tringle").position().left +' top: '+ $("#Tringle").position().top);

<?php          
    if (isset($_POST['submit'])) {
        if (!empty($_POST['shape'])) {
            if ($_POST['shape'] === 'Rectangle') { 
                  echo "CreateSVG();";
            }
        }
    }
?>

});
</script> 
```

# database - 如何隔离数据库中的数据

> ID：12191985
> 
> 赞同：0
> 
> 时间：2012-08-30T07:33:01.603
> 
> 标签：database, view, schema

我有一个结构如下的表：

```
ProjectID | Field1 | Field2 | Field3 | ...
------------------------------------------
1         | aaa    | aaa    | aaa    | ...
------------------------------------------
2         | aaa    | aaa    | aaa    | ...
------------------------------------------
3         | aaa    | aaa    | aaa    | ...
------------------------------------------
1         | aaa    | aaa    | aaa    | ...
------------------------------------------
1         | aaa    | aaa    | aaa    | ...
------------------------------------------
2         | aaa    | aaa    | aaa    | ... 
```

以及一些需要访问该表以读取数据并在进程的和写回一个值的外部系统。

问题是每个外部系统只能访问与他的项目相关的数据，IE：

*   系统 1 -> 项目 ID = 2
*   系统 2 -> 项目 ID = 3
*   系统 3 -> ProjectID = 1

我想保持这些数据分开以避免错误，因为这些系统将在我们的应用程序外部开发，我不能假设他们只会使用他们的数据。

我遇到了两种解决方案：

1.  在不同的 DB 模式中为每个 ProjectID 创建一个表，并仅向每个外部系统提供访问其表的凭据。
2.  为每个 ProjectID 创建一个可更新的视图，该视图仅为特定项目提取数据，并仅向每个外部系统提供访问其视图的凭据。

还有其他想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:37:13.950

如果您有多个项目与之交互，您确实需要开发一个与数据库进行所有交互的 API。保持你的理智、你的睡眠时间表和你的数据完整性。不要在数据库层解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:55:22.703

因此，如果我关于 API 的其他答案对您不起作用，那么安全处理此问题的适当方法是完全分离数据。不要混合行或将任何内容存储在同一个表（或最好是数据库）中。

我将创建一个特定于客户端的数据库，并让每个外部系统只能访问该数据库。

您是否需要在某个时候合并数据？如果是这样，您将失去密钥完整性，因为您将在每个数据库表中（大部分）具有相同的 PK。

如果您确实需要合并数据，并且不能选择多列键，那么可更新视图确实是您唯一的选择，这样您就可以保持完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:15:16.230

只是一些清晰的流...

我正在努力解决类似的问题。我目前的解决方案是我有一组表，但每条记录都有一个引用 OrganizationID 的列。然后我的外部程序附加在 SQL Select... Where...and User.OrganizationID = table.OrganizationID 中。

当一个人（父组织的负责人）查看数据时，我不会附加 sql，因此他们可以看到跨越所有子组织的数据。

这个解决方案与可更新视图没有太大区别（除了我有一个应用程序处理它）。我也在寻找更好的解决方案，因为我的一些数据可能跨越多个应该与其他数据交互的组织（例如，项目 1 和项目 2 可以与其他数据交互，但项目 3 是孤立的，项目 4 可以看到这一切）

# android - 如何使在 1 个活动中获取的相同数据（大数据）可用于应用程序的所有活动？

> ID：12191986
> 
> 赞同：0
> 
> 时间：2012-08-30T07:33:03.173
> 
> 标签：android, database, sqlite

似乎是一个熟悉的问题。但我无法得到完美的解决方案，因此提出了这个问题。

在我的应用程序中，我正在获取 30k 字符串的数据并将其存储在字符串数组中。由于从 Web 服务器获取这些数据需要花费大量时间，因此我在后台执行此操作并在 UI 线程中显示启动画面。

因此，这个字符串数组被创建并填充`SplashActivity`并制作`Public` `Static`。我在下一个名为 ListViewActivity 的活动中使用它，就像这样：

```
SplashActivity.myArrayOfStrings; 
```

这里的问题是当我在`ListViewActivity`和时`i press Home button`，将其放置 3-5 分钟并尝试重新打开应用程序，它说`ArrayIndexOutOfBoundsException`是因为 SplashActivity 中的 Array 项已被破坏，我试图在 ListViewActivity 中访问它的值。

所以我知道如何存储这些数据以在所有活动中使用它，只需 1 次获取。

我不想要共享首选项之类的东西，因为每天都会有 30k 个字符串发生变化。

我从未在我的应用程序中使用过 SQLite，但如果我在 SpalshActivity 中时将字符串存储在数据库中，我可以在所有其他活动中使用数据吗？我的意思是即使我的应用程序进入后台并在 5 分钟后重新打开，这些数据也会存在吗？

还是有更好更明显的解决方案？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:40:50.637

存储这么多数据必须在 SQLite DB 中完成。您不应该依赖活动类中的任何数据存储是永久性的，因为系统将随意回收活动（如果内存不足，则更有可能......）

相反，存储在 SQLite 中的数据应该是永久的，即使您关闭了您的活动、您的应用程序，或者即使您关闭了您的手机。

# c++ - 映射/设置迭代器不可取消引用运行时错误

> ID：12191987
> 
> 赞同：0
> 
> 时间：2012-08-30T07:33:08.553
> 
> 标签：c++, stl, map, iterator

我正在尝试运行此功能：

```
os::TMXTileset* os::TMXMap::getTilesetFromGid(int gid)
    {
        TMXTileset* tileset;
        std::map<std::string, TMXTileset>::iterator it;
        std::map<std::string, TMXTileset>::iterator comp;

        for (it=tilesetMap.begin(); it != tilesetMap.end(); it++)
        {
            comp = it;
            comp++;
            if ((gid >= it->second.getFirstGid()) && (gid < comp->second.getFirstGid()))
            {
                return &it->second;
            }
        }
        tileset = &it->second;
        return tileset;
    } 
```

..但它给了我这个错误：

> “映射/设置迭代器不可取消引用”

我的第一个想法是停止取消引用它（使用 it->second 而不是 (*it).second），但这并没有改变任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:37:55.353

您首先复制它，然后推进副本，然后取消引用副本。这意味着只要 end() 在最后一个元素之前的元素上，您就可以取消引用它。

您可以轻松地在仅包含 1 个条目的地图上对此进行测试 - 它应该始终无法取消引用 comp。

您应该执行以下操作：

```
TMXTileset* tileset;
std::map<std::string, TMXTileset>::iterator it;
std::map<std::string, TMXTileset>::iterator comp;

for (it=tilesetMap.begin(); /*it != tilesetMap.end() can be ommited due to check for comp */; it++)
{
    comp = it;
    comp++;
    if (comp == tilesetMap.end())
    {
       break;
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:36:26.097

如果没有中断，您的 for 循环将超出地图的末尾，因此您的倒数第三行将失败。

# hibernate - 具有多个模式/命名空间和一个 SessionFactory 的休眠

> ID：12191992
> 
> 赞同：2
> 
> 时间：2012-08-30T07:33:29.237
> 
> 标签：hibernate, multiple-databases

我有一个相当大的应用程序，有数百个表。

出于组织目的，我想将表分成几组（比如 5 个左右），并将它们放在数据库中的不同模式中。我只想使用一个数据库，所以我仍然可以跨模式将表连接在一起，所以只有一个 SessionFactory。

但是，我不确定如果我们在所有模式之间发生名称冲突会发生什么。我可以很容易地在休眠对象的代码中包含不同的包，这不是问题。但是当谈到 HQL 时，如果我在不同的包中有两个都称为“客户”的实体，是否可以区分 HQL 查询中的实体？也许带有某种前缀？

任何建议或您在尝试执行此操作时看到的任何其他陷阱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:47:00.870

我从未尝试过，但它应该基本上可以工作。

Hibernate 不允许多次映射相同的类名（请参阅[此问题](https://stackoverflow.com/questions/5327682/hql-with-fully-qualified-class-name)），除非您使用实体名称。（非常准确地说：Hibernate 不允许多次使用相同的实体名称。当未指定其他内容时，类将其类名称作为实体名称）。

文档中没有太多关于它的内容。请参阅[第 5.3 章，多次映射一个类](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch05.html#mapping-entityname)。

实体名称可用于：

*   查询
*   保存实体时（在您的情况下，不需要指定实体名称，因为它不是多次映射的同一个类。但您需要尝试）。
*   映射引用时（此处相同：在您的情况下不需要）

祝你好运 ;-）

# networking - DirectShow Pushsource 用于解复用数据。我需要2个来源吗

> ID：12191995
> 
> 赞同：0
> 
> 时间：2012-08-30T07:33:53.717
> 
> 标签：networking, directshow, pins

我得到 2 字节 *（一个音频和一个视频，已经解复用）。所以它不是标准文件。

我可以创建一个带有 2 个输入引脚的推源吗？一个用于音频，一个用于视频。我知道亚型和所有。

我正在获取这些网络数据。所以它是一个活源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:05:57.947

您可以创建带有两个引脚的单推源，以及每个带有单引脚的两个推源。两种方式都可以解决。在一个过滤器上使用两个引脚，确保从不同的线程流式传输/传递数据。

# php - 命令行中的 PHP - 分段错误（核心转储） - 在 Magento 中运行 phpindexer.php 时进行调试

> ID：12191996
> 
> 赞同：0
> 
> 时间：2012-08-30T07:33:54.120
> 
> 标签：php, shell, magento, command-line, segmentation-fault

我正在命令行中运行脚本。它运行大约 5 分钟，然后返回`Segmentation fault (core dumped)`

该脚本是一个 Magento 重新索引脚本。在 /shell 中为熟悉该平台的人找到

命令行脚本运行是`php indexer.php --reindex catalog_url`

它只是抛出`Segmentation fault (core dumped)`- 我不知道在哪里可以找到更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:03:21.167

脚本似乎内存不足。Magento 本机 UrlRewrite 索引器非常慢并且使用大量内存。如果您有 26k 产品和很多类别，则可能会产生分段错误。

您可以尝试替代 Url Rewrite 索引器，它使用更少的内存并且比核心索引器花费更少的时间，因为在数据库级别执行所有操作。但它需要创建和使用存储例程的权限才能正常工作。另外强烈建议先在开发环境中尝试，看看它不会被破坏，因为有时开发人员向 core_url_rewrite 表添加无效记录会破坏一些操作。

可以通过以下 url 找到该扩展：http: [//www.ecomdev.org/2011/10/08/ecomdev-breaks-magento-speed-limits.html](http://www.ecomdev.org/2011/10/08/ecomdev-breaks-magento-speed-limits.html)

# c# - 如何跟踪最后一分钟的最大值/最小值？

> ID：12191997
> 
> 赞同：1
> 
> 时间：2012-08-30T07:33:55.633
> 
> 标签：c#, algorithm

我想创建这样的类：

```
public TrackMaxMin(int periodInSec)

// use current system time as time
public Add(decimal value)

// return maximum Value for the last periodInSec
public Max { get {} }

// return minimum Value for the last periodInSec
public Min { get {} } 
```

我想我可以使用 FIFO 查询来存储`Pair<DateTime, decimal`> 并且在每次`Add`调用时我应该：

*   从查询中删除“过时”的值。如果需要，删除“更新”缓存的 Max/Min 时
*   添加新的价值。如果需要，更新 Max/Min

我的解决方案简单明了。也许您可以提出更好的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:38:17.847

您可以使用`max-heap`被叫`max`、`min-heap`被叫`min`和`queue`被叫`q`。

让`x`成为具有属性`x.time`和的元素`x.val`。

何时`Add`调用：

*   `Create`一个新元素`x`。
*   `Add` `x`到所有的数据结构。

的运行时间`Add`为`O(lgn)`。

何时`Max`调用：

*   `max.GetMax()`

的运行时间`Max`为`O(1)`。

何时`Min`调用：

*   `min.GetMin()`

的运行时间`Min`为`O(1)`。

对于模型的维护，请执行以下操作：

每次下一个退出元素的周期`q`到期时，只有一个计时器被触发。

当期限`x`到期时：

*   `q.Dequeue()`, `max.Delete(x)`,`min.Delete(x)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:40:36.053

您可以将每对存储在一个队列中。您应该将数据保留至少一分钟，然后在调用 Add 时删除过时的数据。

但是，您应该通过循环遍历堆栈数据来动态计算 Max 和 Min，否则您将失去数据完整性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T07:39:20.080

这个好用

```
System.Diagnostics.Stopwatch s = new System.Diagnostics.Stopwatch();
s.Start();
s.Stop();
long elapsedms = s.ElapsedMilliseconds; 
```

# php - Magento 产品编辑 - 保存产品后数量自动增加

> ID：12191999
> 
> 赞同：1
> 
> 时间：2012-08-30T07:33:59.803
> 
> 标签：php, magento

我在我们正在开发的一个 Magento 网站上遇到了同样的问题。它对我们来说是 Magento 1.6.2。

有时发生的情况是，有一个简单的产品，它的数量设置为 0。在管理员中，当我将数量设置为 1 并保存产品时，产品被保存并显示两次成功消息。Ans 还增加了 2 个数量而不是 1 个。不知道为什么会发生这种情况，奇怪的是，它只在某个时候发生，并不总是发生。主要是它工作正常。这种问题只发生过几次。