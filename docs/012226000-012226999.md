# StackOverflow 问答 12226000-12226999

# jquery - 在处理脚本时使用 jQuery 显示动画加载消息

> ID：12226005
> 
> 赞同：3
> 
> 时间：2012-09-01T07:57:42.253
> 
> 标签：jquery

**我正在尝试做的事情：**将表单提交给将在后台运行的脚本，在输入字段中提供带有动画点的加载文本，并在同一字段中完成后返回一条消息。

**问题**：我设法捕获输入变量并显示动画加载消息。我对此有点陌生，所以嵌套代码可能很乱，加载显示应该是一个可以嵌套的函数（如果我理解正确的话）。它在显示加载消息时停止，所以我假设表单实际上从未被提交，整个脚本只是在某处出现。

**我有什么**：

```
<script>
  jQuery(document).ready(function($)
  {
    $("#subsenid").submit(function(e)
    {
      e.preventDefault();
      var senid = $("input:text[name=submit_sen]").val();
      i = 0;
      setInterval(function() 
      {
        i = ++i % 4;
        $("#submit_senid").val("Importing"+Array(i+1).join("."));
      }, 500, function()
        {
          $.get("/inc/receiving_script.php", {psnid: senid}, function(data)
          {
            $("#submit_senid").val("All done");
          });
        }
      });
    });
  </script> 
```

长话短说：提交表单，显示动画加载消息并从脚本返回消息（我只是添加了“全部完成”消息而不是脚本的正确返回消息，以查看是否发生了任何事情）。

非常感谢任何正确方向的指示和建议。

如果需要更多信息，我会尽快提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:31:10.103

您使用的是[萤火虫](http://getfirebug.com)之类的东西吗？你应该。它是 Firefox 的插件，可帮助您调试代码。（其他现代浏览器也有类似的控制台和工具，通常您可以通过右键单击页面并选择“检查元素”或类似内容来访问它们）

如果您打开 firebug，您将能够看到对您的脚本的 ajax 调用，以及它的结果。它还允许您在代码中设置执行断点（在提交处理程序的开头设置一个）并逐行遍历脚本。这样您就可以看到实际发生的情况并检查变量的内容等。此外，可以轻松检查 DOM。对任何前端开发人员的宝贵帮助！

其次，我在您的代码中看到了一些问题。您在匿名函数中执行 ajax 调用，并将其作为第三个参数提供给 setInterval，但这是行不通的。您需要启动动画，执行 ajax 调用，并在 ajax 回调中停止动画并将检索到的数据设置在您想要的位置。

未经测试，但这样的事情应该让你走上正轨：

```
jQuery(document).ready(function($){

    $("#subsenid").submit(function(e){
        e.preventDefault();
        var senid = $("input:text[name=submit_sen]").val();
        var i = 0;

        var animationInt = setInterval(animateBox, 500);
        function animateBox(){
            i = ++i % 4;
            $("#submit_senid").val("Importing"+Array(i+1).join("."));
        }

        $.get("/inc/receiving_script.php", {psnid: senid}, function(data){
            clearInterval(animationInt);
            $("#submit_senid").val("All done");
        });
    }
  });
}); 
```

# visual-studio-2010 - 在 Visual Studio 2010 中设计页面

> ID：12226007
> 
> 赞同：1
> 
> 时间：2012-09-01T07:58:02.557
> 
> 标签：visual-studio-2010

我已经安装了 Visual Studio Professional 2010 [没有任何错误]，但我无法在其中设计网页。我已经安装

*   VB.NET
*   C＃
*   仅限 Web 开发 [或类似的东西]。

我可以在 VB.NET / C# 中编码和调试，但问题在于设计页面！ ![VS 2010 截图](../Images/14437f3d0904257d9c37e6b7f2e41f24.png)

ASPX 文件中缺少“设计视图”选项。

系统信息：Windows 7 X64 Ultimate [已卸载 SP1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:03:26.353

您正在查看`"Default.aspx.cs"`的是在设计模式下无法查看的页面背后的代码。

因此，只需将您的控件更改为`"Default.aspx"`并按下`Design`按钮，如下所示。

![设计模式](../Images/555d8b9629f6aa31c3a876ea165253ec.png)

或者在您将看到设计模式的页面上按下`F7`键 。`"Default.aspx.cs"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:40:28.200

问题已解决

**Tools->Options->HTML Designer->勾选【Enable HTML Designer】前面的框**

![启用 HTML](../Images/38046a8fefa76194a698e6d21c0fb293.png)

# java - Guice - 默认绑定定义

> ID：12226013
> 
> 赞同：2
> 
> 时间：2012-09-01T07:59:00.367
> 
> 标签：java, binding, guice

有没有办法在 Guice 3.0 中声明默认绑定？

这是我期望的一个例子：

```
//Constructor for Class Impl1
@Inject
public Impl1 (@One IMyOwn own)
{
   ...
}

//Constructor for Class Impl2
@Inject
public Impl2 (@Two IMyOwn own)
{
   ...
} 
```

* * *

```
//Declare a default binding
bind(IMyOwn.class).to(DefaultMyOwn.class); 
```

* * *

```
//Then, if I want to bind a custom implementation for @Two
bind(IMyOwn.class).annotatedWith(Two.class).to(TwoMyOwn.class); 
```

实际上，这个例子是行不通的，因为我必须为所有注解（@One、@Two）声明一个绑定。

Guice 有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-23T03:24:47.347

使用@Named 绑定。

来自[Github 上的 Guice 参考：](https://github.com/google/guice/wiki/BindingAnnotations#named)

Guice 带有一个使用字符串的内置绑定注解@Named：

```
public class RealBillingService implements BillingService {
  @Inject
  public RealBillingService(@Named("Checkout") CreditCardProcessor processor) {
    ...
  } 
```

要绑定特定名称，请使用 Names.named() 创建一个实例以传递给 annotatedWith：

```
bind(CreditCardProcessor.class)
    .annotatedWith(Names.named("Checkout"))
    .to(CheckoutCreditCardProcessor.class); 
```

所以在你的情况下，

```
//Constructor for Class Impl1
@Inject
public Impl1 (@Named("One") IMyOwn own)
{
   ...
}

//Constructor for Class Impl2
@Inject
public Impl2 (@Named("Two") IMyOwn own)
{
   ...
} 
```

你的模块看起来像：

```
public class MyOwnModule extends AbstractModule {
  @Override 
  protected void configure() {
    bind(IMyOwn.class)
        .annotatedWith(Names.named("One"))
        .to(DefaultMyOwn.class);

    bind(IMyOwn.class)
        .annotatedWith(Names.named("Two"))
        .to(TwoMyOwn.class);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-20T08:56:23.543

Guice 4.X 有[可选的 Binder](https://google.github.io/guice/api-docs/4.1/javadoc/com/google/inject/multibindings/OptionalBinder.html)。

```
public class FrameworkModule extends AbstractModule {
  protected void configure() {
    OptionalBinder.newOptionalBinder(binder(), Renamer.class);
  }
}

public class FrameworkModule extends AbstractModule {
  protected void configure() {
    OptionalBinder.newOptionalBinder(
               binder(),
               Key.get(String.class, LookupUrl.class))
                  .setDefault().toInstance(DEFAULT_LOOKUP_URL);
  }
} 
```

在 Guice 3.0 中，您可以利用默认构造函数的自动绑定。

> 11.  使用单个 @Inject 或公共无参数构造函数。

但这有限制，因为您的默认构造函数需要属于相同的具体类，因此派生可能会变得很麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T11:27:15.117

Guice 尝试尽可能多地检查您的配置（也称为绑定）。这也意味着，Guice 无法判断缺少的绑定`@One`是错误还是应该映射到某些默认情况。

如果您对细节感兴趣，请在 Guice 中查找[BindingResolution](http://code.google.com/p/google-guice/wiki/BindingResolution)序列。由于第 4 步和第 6 步处理绑定注释，而第 6 步明确禁止默认，我认为您不走运。

> .6\. 如果依赖有绑定注解，放弃。Guice 不会为带注释的依赖项创建默认绑定。

所以你能做的最好的就是为 Guice 提供一个提示，它`@One`应该像这样映射到默认值：

```
bind(IMyOwn.class).annotatedWith(One.class).to(IMyOwn.class); 
```

所以你不需要`DefaultMyOwn`多次声明具体的默认类。

# gwt - gwt sencha uibinder中的基本网格不起作用

> ID：12226014
> 
> 赞同：1
> 
> 时间：2012-09-01T07:59:08.093
> 
> 标签：gwt, extjs

我正在尝试在 GWT Sencha 中制作一个基本网格。它工作正常，但我不确定如何将网格放在 UiBinder 中，不知道父小部件是什么，

这就是我在做什么

```
 <!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent"> 
```

```
 <c:FramedPanel>
    <grid:GridView ui:field="gridMain">
    </grid:GridView>
    </c:FramedPanel> 
```

错误：

```
 Expected a widget or <g:cell>, found <grid:GridView ui:field='gridMain'> Element <g:VerticalPanel> (:4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:42:12.907

在 ui.xml 中添加以下行

```
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"

xmlns:grid="urn:import:Package-of-GridView"> 
```

如果您已经添加了这两行，那么很好

这是我的问题和答案。

我猜`GridView`是你的视图类。**它是否扩展了任何小部件**？

如果它扩展了任何小部件，那么它将起作用。如果不是它只是一个类。

**我们可以在一个小部件中添加一个小部件，但我们不能在一个小部件中添加一个类**。

因此，如果需要，将适当的小部件扩展到 GridView

例如。`public class Gridview extends VerticalPanel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:19:32.283

gxt 的 UIBinder 示例可以在这里找到：

[http://gxt-uibinder.appspot.com/](http://gxt-uibinder.appspot.com/)

这就是您正在寻找的示例：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'
    xmlns:gxt="urn:import:com.extjs.gxt.ui.client.widget" xmlns:toolbar="urn:import:com.extjs.gxt.ui.client.widget.toolbar" xmlns:form="urn:import:com.extjs.gxt.ui.client.widget.form" xmlns:grid="urn:import:com.extjs.gxt.ui.client.widget.grid">     
    <ui:with type="com.jhickman.web.gwt.gxtuibindertest.client.resources.icons.ExampleIcons" field="icons" />
    <ui:with type="com.extjs.gxt.ui.client.store.ListStore" field="store" />
    <ui:with type="com.google.gwt.i18n.client.DateTimeFormat" field="dateformat" />
    <ui:with type="com.jhickman.web.gwt.gxtuibindertest.client.view.grids.BasicGridView.ChangeCellRenderer" field="change" />
    <ui:with type="com.jhickman.web.gwt.gxtuibindertest.client.view.grids.BasicGridView.GridNumberRenderer" field="gridNumber" />

  <gxt:LayoutContainer layout="FlowLayout">
    <gxt:layoutdata type="FlowData" margins="10">
      <gxt:ContentPanel bodyBorder="true" icon="{icons.table}" heading="Basic Grid" buttonAlign="CENTER" layout="FitLayout" width="600" height="300">
        <gxt:topcomponent>
          <toolbar:ToolBar>
            <toolbar:LabelToolItem label="Selection Mode:" />
            <form:SimpleComboBox triggerAction="ALL" editable="false" fireChangeEventOnSetValue="true" width="100" ui:field="selectionModeComboBox" />
          </toolbar:ToolBar>
        </gxt:topcomponent>

        <grid:Grid store="{store}"
            ui:field="grid"
            styleAttribute="borderTop:none"
            autoExpandColumn="name"
            borders="false"
            stripeRows="true"
            columnLines="true"
            columnReordering="true">
          <grid:column id="name"
                      header="Company"
                      width="200"
                      rowHeader="true" />
              <grid:column id="symbol"
                      header="Symbol"
                      width="100" />
          <grid:column id="last"
            header="Last"
            alignment="RIGHT"
            width="75"
            renderer="{gridNumber}"/>
          <grid:column id="change"
            header="Change"
            width="100"
            alignment="RIGHT"
            renderer="{change}" />
          <grid:column id="date"
            header="Last Updated"
            width="100"
            alignment="RIGHT"
            dateTimeFormat="{dateformat}" />
        </grid:Grid>
      </gxt:ContentPanel>
    </gxt:layoutdata>
  </gxt:LayoutContainer>

</ui:UiBinder> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T09:07:27.837

不能直接在 FramedPanel 下添加网格 尝试在添加网格之前添加一个容器，例如 VerticalLayoutContainer 作为 FramedPanel 的子项。

在 UiBinder 中

```
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:gxt="urn:import:com.sencha.gxt.widget.core.client"
xmlns:row="urn:import:com.sencha.gxt.widget.core.client.container"> 
```

在你的 FramedPanel 下

```
<gxt:FramedPanel ui:field="panel" headingText="VerticalLayout Example"
        collapsible="false">
        <row:VerticalLayoutContainer>
            <row:child><grid:GridView ui:field="view"></grid:GridView>
            </row:child>
<row:VerticalLayoutContainer> 
```

# c# - Arraylist indexOf 返回 -1

> ID：12226020
> 
> 赞同：2
> 
> 时间：2012-09-01T07:59:53.127
> 
> 标签：c#, .net, arrays, arraylist

我有一个名为gatherSplit的arraylist，它从一个名为splitMeToDelete的字符串中获取元素，该字符串包含以下内容：

```
splitMeToDelete = "Salary, Personal Savings, Pensions, Annuities, Social Security" 
```

字符串像这样拆分为 ArrayList：

```
ArrayList gatherSplit = new ArrayList(splitMeToDelete.Split(new char[] { ',' })); 
```

当我给出以下代码行时，我应该得到 IndexOf as 3 ，但我得到了错误。

```
gatherSplit.RemoveAt(gatherSplit.IndexOf("Annuities")); 
```

我得到的错误是：

> 指数超出范围。必须是非负数且小于集合的大小。

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T08:02:09.300

您的调用`IndexOf`返回 -1，因为数组中的项目包含“Annuities”（前导空格）。尝试`Trim`每个项目以删除空间：

```
ArrayList gatherSplit = new ArrayList(
    splitMeToDelete.Split(new char[] { ',' }).Select(item => item.Trim()).ToArray()
); 
```

（或者可能更简单，只需拆分`", ".ToCharArray()`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T08:03:51.093

除了 dbaseman 指出的内容之外，您还可以使用`Remove`它。

```
gatherSplit.Remove(" Annuities"); //Note the space if you don't do the trim that dbaseman suggests. 
```

您也可以在导致问题的行上的代码中设置一个断点并将鼠标悬停在“gatherSplit”上以查看它的值，按加号检查对象内部，您将看到额外的空格。

点击图片中红圈所在的位置就是设置断点的方法。

![调试看问题](../Images/f574e3c6d8904908f6e0a1b46b81b14d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:16:12.310

使用下面的行。它与空间分裂。它在快照中不可见，但单击“文本可视化器”查看，它包含空间。

```
ArrayList gatherSplit = new ArrayList(splitMeToDelete.Split(new string[] { ", " }, StringSplitOptions.RemoveEmptyEntries)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T09:45:26.133

请检查每个项目之间的空格

![在此处输入图像描述](../Images/78edb2f02d0a74ccfa655bf16bb5d2ec.png)

而不是上面的字符串尝试使用，

```
string splitMeToDelete = "Salary,Personal Savings,Pensions,Annuities,Social Security"; 
```

# spring - 春天 不工作

> ID：12226027
> 
> 赞同：3
> 
> 时间：2012-09-01T08:01:06.643
> 
> 标签：spring, spring-mvc

嗨映射css不起作用。

这是我的配置：

弹簧servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

    <context:component-scan base-package="spring.controllers" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
       <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
       <property name="prefix" value="/WEB-INF/jsp/content/" />
       <property name="suffix" value=".jsp" />
    </bean>

    <context:component-scan base-package="it.jsoftware.jacciseweb.controllers"></context:component-scan>
    <mvc:annotation-driven />

    <bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" />
    <mvc:resources mapping="/css/**" location="/css/" />
    <mvc:resources mapping="/images/**" location="/images/" />
    <mvc:resources mapping="/js/**" location="/js/" /> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

  <display-name>JewishProjectT</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping> 
```

和我的 heder 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <c:choose>
            <c:when test="${sessionScope['org.springframework.web.servlet.i18n.SessionLocaleResolver.LOCALE'] eq 'i18en'}">
                <c:set var="approach" value="left" scope="page"></c:set>
            </c:when>
            <c:when test="${sessionScope['org.springframework.web.servlet.i18n.SessionLocaleResolver.LOCALE'] eq 'i18ru'}">
                <c:set var="approach" value="left" scope="page"></c:set>
            </c:when>
            <c:when test="${sessionScope['org.springframework.web.servlet.i18n.SessionLocaleResolver.LOCALE'] eq 'i18he'}">
                <c:set var="approach" value="right" scope="page"></c:set>
            </c:when>
            <c:otherwise>
                <c:set var="approach" value="left"></c:set>
            </c:otherwise>
        </c:choose>
        <link rel="stylesheet" media="all" type="text/css" href="/css/common.css">
        <link rel="stylesheet" media="all" type="text/css" href="/css/lavamenu.css">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script type="text/javascript" src="/js/<c:out value="${approach}"/>/lavalamp.js"></script>
        <title>${title}</title>
    </head>
    <body>
        <div id="main"> 
```

在 chrome 中它显示：

> /js/left/lavalamp.js 404（未找到）0:19 GET
> 
> /css/common.css 404（未找到）0:17 GET
> 
> /css/lavamenu.css 404（未找到）

如何正确配置 css/images/js 的路径？

PS我排除了所有以 http:\\ 开头的链接，因为stackoverflow的规则不允许我发布它们，因为我是初学者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T08:43:38.190

您`<mvc:resources mapping="/css/**" location="/css/" />`对我来说似乎很好，但是您确定您的应用程序在根目录下运行吗？您的 URL 不应该以其他上下文开头，例如：

```
href="/myapp/css/common.css" 
```

或者，为了避免硬编码引用：

```
href="<c:url value="/css/common.css" />" 
```

如果您的应用程序在根目录中运行，那么您可能需要正确的命名空间声明？就像是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc 
      http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
      http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context 
      http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 
```

# asp.net-mvc - 从 T4 模板中的 MVC 应用程序中提取路由表

> ID：12226029
> 
> 赞同：2
> 
> 时间：2012-09-01T08:01:17.180
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, t4

有人对我如何从 T4 模板中的 MVC 应用程序中提取路由表有任何想法吗？

理想情况下，我想做的是创建一个'MvcApplication：System.Web.HttpApplication'的实例并将其设置为'startup'，这样路由就被注册了，我可以从Routes.RouteTable中提取它们。

如果做不到这一点，我考虑使用反射来查找具有遵循 Register[xxxx]Route 命名约定的方法的静态类。在很多情况下都可以工作。

我可能错过的任何其他建议？

编辑 - 似乎对这个问题有些困惑。我知道 T4 在设计时运行。我知道路由是在运行时注册的。这个[人](http://weblogs.asp.net/zowens/archive/2010/12/20/asp-net-mvc-javascript-routing.aspx)做了一些类似于我想做的事情——在设计时提取 roues，但他强迫你以一种特定的方式注册路由，这样他就可以使用反射来读回它们。如果可能的话，想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T18:20:44.203

您可以在具有方法的 MVC 期货中使用库 Microsoft.Web.Mvc

```
ExpressionHelper.GetRouteValuesFromExpression<TController>(Expression<Action<TController>> action) 
```

它给你你想要的。

更新：它可以在没有 Asp.Net MVC 的情况下工作，但您需要将 Microsoft.Web.Mvc.Internal.ExpressionHelper 的实现复制到您自己的类中，并`where TController:Controller`从 GetRouteValuesFromExpression 方法的签名中删除限制：

```
public static class MyOwnExpressionHelper
{
    public static RouteValueDictionary GetRouteValuesFromExpression<TController>(Expression<Action<TController>> action) //where TController : Controller
    {
        if (action == null)
            throw new ArgumentNullException("action");
        MethodCallExpression call = action.Body as MethodCallExpression;
        if (call == null)
            throw new ArgumentException("MustBeMethodCall", "action");
        string name = typeof(TController).Name;
        if (!name.EndsWith("Controller", StringComparison.OrdinalIgnoreCase))
            throw new ArgumentException("TargetMustEndInController", "action");
        string str = name.Substring(0, name.Length - "Controller".Length);
        if (str.Length == 0)
            throw new ArgumentException("_CannotRouteToController", "action");
        string targetActionName = GetTargetActionName(call.Method);
        RouteValueDictionary rvd = new RouteValueDictionary();
        rvd.Add("Controller", (object)str);
        rvd.Add("Action", (object)targetActionName);
        ActionLinkAreaAttribute linkAreaAttribute = Enumerable.FirstOrDefault<object>((IEnumerable<object>)typeof(TController).GetCustomAttributes(typeof(ActionLinkAreaAttribute), true)) as ActionLinkAreaAttribute;
        if (linkAreaAttribute != null)
        {
            string area = linkAreaAttribute.Area;
            rvd.Add("Area", (object)area);
        }
        AddParameterValuesFromExpressionToDictionary(rvd, call);
        return rvd;
    }

    public static string GetInputName<TModel, TProperty>(Expression<Func<TModel, TProperty>> expression)
    {
        if (expression.Body.NodeType == ExpressionType.Call)
            return GetInputName((MethodCallExpression)expression.Body).Substring(expression.Parameters[0].Name.Length + 1);
        else
            return expression.Body.ToString().Substring(expression.Parameters[0].Name.Length + 1);
    }

    private static string GetInputName(MethodCallExpression expression)
    {
        MethodCallExpression expression1 = expression.Object as MethodCallExpression;
        if (expression1 != null)
            return MyOwnExpressionHelper.GetInputName(expression1);
        else
            return expression.Object.ToString();
    }

    private static string GetTargetActionName(MethodInfo methodInfo)
    {
        string name = methodInfo.Name;
        if (methodInfo.IsDefined(typeof(NonActionAttribute), true))
        {
            throw new InvalidOperationException(string.Format((IFormatProvider)CultureInfo.CurrentCulture,"An Error", new object[1]
    {
      (object) name
    }));
        }
        else
        {
            ActionNameAttribute actionNameAttribute = Enumerable.FirstOrDefault<ActionNameAttribute>(Enumerable.OfType<ActionNameAttribute>((IEnumerable)methodInfo.GetCustomAttributes(typeof(ActionNameAttribute), true)));
            if (actionNameAttribute != null)
                return actionNameAttribute.Name;
            if (methodInfo.DeclaringType.IsSubclassOf(typeof(AsyncController)))
            {
                if (name.EndsWith("Async", StringComparison.OrdinalIgnoreCase))
                    return name.Substring(0, name.Length - "Async".Length);
                if (name.EndsWith("Completed", StringComparison.OrdinalIgnoreCase))
                    throw new InvalidOperationException(string.Format((IFormatProvider)CultureInfo.CurrentCulture, "CannotCallCompletedMethod", new object[1]
        {
          (object) name
        }));
            }
            return name;
        }
    }

    private static void AddParameterValuesFromExpressionToDictionary(RouteValueDictionary rvd, MethodCallExpression call)
    {
        ParameterInfo[] parameters = call.Method.GetParameters();
        if (parameters.Length <= 0)
            return;
        for (int index = 0; index < parameters.Length; ++index)
        {
            Expression expression = call.Arguments[index];
            ConstantExpression constantExpression = expression as ConstantExpression;
            object obj = constantExpression == null ? CachedExpressionCompiler.Evaluate(expression) : constantExpression.Value;
            rvd.Add(parameters[index].Name, obj);
        }
    }
} 
```

# django - 如何使用 django 对多个表进行大型查询

> ID：12226036
> 
> 赞同：0
> 
> 时间：2012-09-01T08:02:25.343
> 
> 标签：django, orm, foreign-keys, models

一段时间以来，我一直在尝试找出实现此查询的最佳方法，但没有太多关注

我有一个非常基本的用户下表..

```
class followTable(models.Model):
   user = models.ForeignKey(User)
   datetime = models.DateTimeField(auto_now_add=True)
   taget_user = models.ForeignKey(User) 
```

我希望能够获取当前用户关注的所有用户（target_user），然后从属于 target_user 的另一个表中返回所有帖子，最好的方法是什么？

我试过了

```
userlist = followTable.objects.filter(user=request.user) 
```

然后在用户列表上进行 foreach 并单独查询每个用户，但这似乎有点混乱，有没有人有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:01:29.463

```
Post.objects.filter(
    author__in=followTable.objects.filter(user=MY_USER).values_list('target_user', flat=True)) 
```

# mongodb - 如何在 MongoDB 中更改文档属性

> ID：12226038
> 
> 赞同：3
> 
> 时间：2012-09-01T08:02:33.223
> 
> 标签：mongodb, model, mongodb-.net-driver, nosql

我是 MongoDB 的新手，我刚刚成功地从 MS SQL 迁移到 MongoDB。当我为 MongoDB 集合创建自定义类时，我有一些额外的属性，我不需要它。

我怎样才能删除它？

例如，假设我有基础课

```
public class Basic {

public ObjectId _id {get;set;}
public string Name {get;set;
public string Description {get;set;

} 
```

然后我在 Mongo 中存储一些项目

```
var collection = Mongo.GetCollection<Basic>("basic");
var item = new Basic{ Name = "TestName", Description = "Remove me"};
collection.insert(item); 
```

例如，当我进行更改时，我的 Basic 类中不需要 Description 属性，我想删除所有文档中的每个 Description 属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:06:23.083

您可以执行批量更新。这就是你在 mongo shell 中的操作方式：

```
db.yourcollection.update({}, {$unset: {description: 1}}, false, true); 
```

文档`$unset`：[http](http://www.mongodb.org/display/DOCS/Updating#Updating-%24unset) ://www.mongodb.org/display/DOCS/Updating#Updating-%24unset 文档`update()`：[http ://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)

# java - Java中具有继承的可变参数

> ID：12226040
> 
> 赞同：2
> 
> 时间：2012-09-01T08:03:00.690
> 
> 标签：java, generics, inheritance, variadic-functions, member-hiding

假设我有这样的课程`Foo`：

```
public class Foo<T> {
    protected T invoke(Object... args);
} 
```

现在假设我添加这个：

```
public class Bar<T, Arg> extends Foo<T> {
    public T invoke(Arg arg);
} 
```

这是否意味着我不能创建一个`Bar<T, Object[]>`，因为它会创建两个`invoke()`具有“基本上”相同签名的方法？或者在这种情况下会`Bar.invoke()`安全地隐藏（因为运行时，采取而不是of ）？`Foo.invoke()``Bar.invoke()``Object``Object[]``Foo.invoke()`

与此相关：转发`Bar.invoke()`是否`Foo.invoke()`安全无虞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:16:02.270

`Bar.invoke`不覆盖`Foo.invoke`. 如果您只调用`bar.invoke`没有参数，您将被`foo.invoke`调用。

`reference to invoke is ambiguous`但是如果你构造一个`Bar`object:`Bar<Object, Object[]> bar = new Bar<Object, Object[]>()`然后调用，你会得到一个编译时错误 ( )，`bar.invoke(new Object[]{})`因为这 2 个调用方法在运行时具有相同的擦除。

# objective-c - 如何在 Xcode 中添加到 int

> ID：12226042
> 
> 赞同：1
> 
> 时间：2012-09-01T08:03:22.747
> 
> 标签：objective-c, xcode, integer, int, add

似乎这应该是你可以用 int 做的最简单的事情，但我似乎找不到任何显示如何做到这一点的东西。试过谷歌，但我得到了一百万次点击，所有这些都比我试图理解的更深入。

我想要做的是有一个整数，当发生某些事情时（按钮按下，图像移动，等等）我想给这个整数加 1 并有一个单独的方法，当它被调用时，检查整数并根据几个动作之一执行关于价值。

除了将 1 添加到 int 之外，我知道如何执行所有这些操作？

我知道这对你们来说一定是一个疯狂的愚蠢问题，有人愿意给我一根骨头吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:05:59.403

```
int i = 4;
i++; 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T08:06:54.707

在 .h 文件中声明 int 索引

现在点击按钮：

```
 -(void)btnClicked:(id)sender
 {
     index++;
 } 
```

然后移动任何其他方法图像

```
index++; 
```

现在执行如下操作：

```
-(void)performAction:(int)index
{
   switch(index)
   {
      //make case depending on number
      case : 1
      {
          // do something here on index 1
      }
      break;
      .....
      .....
      .....
      default
      {
          // do something here if not that index 
      }
      break;

   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:06:07.253

您应该向 UIViewController 添加一个 NSUInteger 属性，在该 UIViewController 中发生您要计算的操作。然后作为每个操作的第一步，您可以向该属性添加 1。

```
@interface MyViewController extends UIViewController
@property (nonatomic) NSUInteger actionCounter;
@end

@implementation MyViewController
@synthesize actionCounter;

//in your actions here, add one to actionCounter
-(void) IBAction doSomething{
    self.actionCounter++;

    //do the actual action here
}

//in your check method, read the actionCounter value and do something
-(void) checkActionCount{
    if(self.actionCounter => 1){
        NSLog(@"User did something");
    }
}

@end 
```

# java - 如何在另一个类中访问对象及其方法

> ID：12226047
> 
> 赞同：-2
> 
> 时间：2012-09-01T08:04:42.197
> 
> 标签：java, variables, object

例如，两者`class`都在同一`package`

```
class A extends JFrame{

    public JTextField username = new JTextField;
    A a = new A();
    ------------------------------
    ------------------------------
}

class B extends JFrame{
    String user;

    // i am able to acess like this
    user = new A().username.getText();
    //but i want to acess like followin and its not working
    user = a.username.getText();
} 
```

如果可以的话建议我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:13:33.827

尝试这个：

```
class A extends JFrame{

    public JTextField username = new JTextField();        
}

class B extends JFrame{
    String user;
     A a=new A();   //Now A's instance a is B's field.

    //Now, Inside A Method You Can DO:
    user = a.username.getText();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:14:19.593

这应该工作

```
class A extends JFrame{

  public static JTextField username = new JTextField;

} 

class B extends JFrame{
  String user;

  user = A.username.getText();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:10:52.037

答： 中没有`a`定义任何名称`class B`。所以`a.username`在 内没有任何意义`class B`。

很抱歉没有多说，但是由于不清楚您要实现的目标，所以不能多说。

评论：注意`class B`不继承自`class A`. 这可能（也可能不是）是一个错误。

附加评论：

如果您确定整个程序只有一个“a”，则可以将其设为静态成员：

```
class A {
   static A a = new A ();
   ...
}

class B {
   void someMethod () {
      // you can access a in class A as follows:
      A.a.doSomething ();
   }

} 
```

# android - 具有root权限的/system目录中的文件复制和替换？

> ID：12226053
> 
> 赞同：0
> 
> 时间：2012-09-01T08:05:25.240
> 
> 标签：android, file, replace, copy, root

谁能告诉我如何将文件从我的应用程序资产文件夹复制到 /system 文件夹？我知道如何获得 root 访问权限等等。例如：我想从“/assets/lib/libs.so”复制文件并检查该文件是否已经存在，如果它确实将其替换为新的“/system/lib/libs.so”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:19:55.200

尝试这个：

```
try {
    File from = new File( "/assets/lib/libs.so" );
    File to = new File( "/system/lib/libs.so" );
    if( from.exists() && to.exists() ) {
        FileInputStream is = new FileInputStream( from );
        FileOutputStream os = new FileOutputStream( to );
        FileChannel src = is.getChannel();
        FileChannel dst = os.getChannel();
        dst.transferFrom( src, 0, src.size() );
        src.close();
        dst.close();
        is.close();
        os.close();
    }
} catch( Exception e ) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:28:07.390

这将检查您的文件是否存在，将其删除，然后复制资产中的所有内容。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

   File exists = new File("/system/lib/libs.so");
   if(exists.exists()){       
   exists.delete();
   CopyAssets();
   }else{
       CopyAssets();
   }

}

private void CopyAssets() { 
    AssetManager assetManager = getAssets(); 
    String[] files = null; 
    try { 
        files = assetManager.list(""); 
    } catch (IOException e) { 
        Log.e("tag", e.getMessage()); 
    } 
    for(String filename : files) { 
        InputStream in = null; 
        OutputStream out = null; 
        try { 
          in = assetManager.open(filename); 
          out = new FileOutputStream("/system/lib/" + filename);
          copyFile(in, out); 
          in.close(); 
          in = null; 
          out.flush(); 
          out.close(); 
          out = null; 
        } catch(Exception e) { 
            Log.e("tag", e.getMessage()); 
        }        
    }

} 

private void copyFile(InputStream in, OutputStream out) throws IOException { 
    byte[] buffer = new byte[1024]; 
    int read; 
    while((read = in.read(buffer)) != -1){ 
      out.write(buffer, 0, read); 
    } 
} 
```

编辑：

在文件系统的清单文件中声明此权限。

```
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"/> 
```

# node.js - Nodejs 要求：一次还是按需？

> ID：12226054
> 
> 赞同：2
> 
> 时间：2012-09-01T08:05:32.460
> 
> 标签：node.js, optimization

目前加载模型的最佳做法是什么（我猜想适用于所有必需的文件）？

我正在考虑这两种方法来实现解决方案（废话代码说明如下）：

```
var Post = require('../models/post');

function findById(id) {
    return new Post(id);
}

function party() {
    return Post.getParty();
} 
```

对比

```
function findById(id) {
    return new require('../models/post')(id);
}

function party() {
    return require('../models/post').getParty();
} 
```

这些片段之一是首选吗？是否存在相当大的内存和时间权衡？还是只是过早的优化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T11:04:41.493

这是一个过早的优化（调用`require()`被缓存和幂等），但我个人会更好地调用您的第一种样式（在初始化期间加载依赖项而不是后续处理），因为它更容易让您了解您正在做的事情。在开始时加载所有内容会稍微减慢您的启动速度（这几乎不是问题），以换取使大多数请求运行得稍微快一些（除非您已经确定了瓶颈并进行了一些核心分析，否则您不应该担心这一点）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T12:48:33.493

您应该`require`在开始时使用带有单个调用的版本。虽然它对模块的加载频率没有任何影响（它们只加载一次，但是你这样做），第二种方式存在性能问题。

问题在于，这`require`是 Node.js 中仅有的几个阻塞功能之一。这意味着，只要它运行，Node.js 就无法满足任何传入的请求。启动时这没问题：您的应用程序启动并运行只需要一段时间。

但可以肯定的是，当您的应用程序已经运行了一段时间时，您不希望有阻塞时刻。

因此，如果您对第二个选项没有*非常*特殊的原因，请选择第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T17:31:20.347

我相信第二种情况对于避免循环模块依赖很有用，因为 require() 发生在运行时而不是加载时。

否则，我相信第一个（稍微？）更快，对我来说，更具可读性。

# c# - 如何在 Windows Phone 7 Mango 中获取联系人交互历史记录？

> ID：12226059
> 
> 赞同：0
> 
> 时间：2012-09-01T08:06:07.240
> 
> 标签：c#, windows-phone-7

我阅读了有关访问联系人数据的演示

> [http://msdn.microsoft.com/en-us/library/hh286416(v=vs.92)#BKMK_Accessing](http://msdn.microsoft.com/en-us/library/hh286416(v=vs.92)#BKMK_Accessing)

但是是否可以获取交互历史记录，例如当您在人员中心查看联系人详细信息时，您会获得历史记录页面，并且您将获得以前的交互，如通话、邮件等。

我了解 WP 几乎没有沙盒限制但是
是否有可能至少在一个联系人的基础上获得交互历史记录，如上次通话时长等？

此外，我了解 WP 没有任何来电警报事件，但说我想在应用程序处于后台（不拦截呼叫）时在呼叫完成后获取当前呼叫的号码/持续时间是否允许？如果有怎么办？
有任何迹象表明它会出现在 WP8 等未来版本中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:58:05.607

**不**，您不能在 WP7^ 中访问用户通话记录。没有用于检索通话记录的 API。

没有**迹象**表明微软将在不久的将来允许开发人员访问“通话记录”。
将在 WP8 SDK 中进行的一些更改在[这里](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2012/06/29/recapping-windows-phone-8-developer-news.aspx)，它们都与通话记录问题无关。

*除非使用应用程序本身拨打电话，否则您只能拨打电话号码而不是确切的通话时间。

# c# - Task.ContinueWith 在任务完成执行之前运行

> ID：12226060
> 
> 赞同：4
> 
> 时间：2012-09-01T08:06:08.500
> 
> 标签：c#, task-parallel-library

在`Main`控制台应用程序的方法中：

```
Do().ContinueWith(t => Do())
    .ContinueWith(t => Do())
    .ContinueWith(t => Do()); 
```

`Do`是一个返回的方法`Task`：

```
var source = new CancellationTokenSource();
var token = source.Token;
return Task.Factory.StartNew(() =>
{
    Console.WriteLine("Inside " + _Counter);
    token.WaitHandle.WaitOne(1000);
    Console.WriteLine(_Counter++ + " is done");
}, token); 
```

并且`_Counter`是一个整数字段：

```
private static int _Counter = 1; 
```

当我运行时，结果是这样的：

> 内部 1
> 1 完成
> 内部 2
> 内部 2
> 内部 2
> 2 完成
> 3 完成
> 4 完成

所以让我们假设我有一个`Task`被称为**t**和一个`Action<Task>`被称为**a**。
如果我打电话`t.ContinueWith(a)`，应该*在***t**完成后调用**a ，对吗？**当**a**运行时，这应该意味着任何委托**t**调用都已结束。

 *******是什么导致了这个结果？我在这里没有得到明显的东西吗？
我用什么：

*   视窗 8 RTM
*   .NET 框架 4.5

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T08:09:12.203

> 如果我调用 t.ContinueWith(a)，应该在 t 完成后调用 a，对吗？

当然。但是由于您的`Do`函数创建了一个新任务，它会立即完成，从而开始下一个`Do`. `Do`从（仅保留 Console.WriteLine 内容）中删除任务创建，它应该可以按预期工作。

```
 static void Do()
    {
        Console.WriteLine("Inside " + _Counter);
        Thread.Sleep(1000);
        Console.WriteLine(_Counter + " is done");
    }

    static void Main(string[] args)
    {
        Task.Factory.StartNew(Do)
            .ContinueWith(t => Do())
            .ContinueWith(t => Do())
            .ContinueWith(t => Do());
    } 
```*******

# dialog - 如何定位和延迟扩展库中的tooltipDialog

> ID：12226061
> 
> 赞同：0
> 
> 时间：2012-09-01T08:06:10.710
> 
> 标签：dialog, tooltip, dojo, xpages

我正在使用 extlib 中的 tooltipDialog 并希望将工具提示定位在左侧和右侧，而不是似乎在下面的默认值。

知道怎么做吗？

== 更新 ==

在 extlib eclipse\plugins\com.ibm.xsp.extlib.controls\resources\web\extlib\dijit\TooltipDialog.js 中找到以下代码

所以我尝试了一些不同的选项，但无法让它工作 [http://dojo-toolkit.33424.n3.nabble.com/dijit-TooltipDialog-orientation-of-popup-td1007523.html](http://dojo-toolkit.33424.n3.nabble.com/dijit-TooltipDialog-orientation-of-popup-td1007523.html)

XSP.openTooltipDialog("#{id:tooltipDialog1}","#{id:link2}","orient:{BR:'BL',BL:'BR'}") XSP.openTooltipDialog("#{id:tooltipDialog1 }","#{id:link2}","orient:[BR:'BL',BL:'BR']")

```
XSP.openTooltipDialog = function xe_otd(dialogId,_for,options,params) {
dojo.addOnLoad(function(){
    var created = false
    var dlg = dijit.byId(dialogId)
    if(!dlg) {
        options = dojo.mixin({dojoType:"extlib.dijit.TooltipDialog"},options)
        dojo.parser.instantiate([dojo.byId(dialogId)],options);
        dlg = dijit.byId(dialogId)
        created = true;
    } else {
        if(dlg.keepComponents) {
            dijit.popup.open({
                popup: dlg, 
                around: dojo.byId(_for)
            });
            return;
        }
    }
    if(created) {
        dojo.connect(dlg, 'onBlur', function(){
            dijit.popup.close(dlg);
        })
    }
    dlg.attr("content", "<div id='"+dialogId+":_content'></div>");
    var onComplete = function() {
        dijit.popup.open({
            popup: dlg, 
            around: dojo.byId(_for)
        });
        dlg.focus();
    }
    var axOptions = {
        "params": dojo.mixin({'$$showdialog':true,'$$created':created},params),
        "onComplete": onComplete,
        "formId": dialogId
    }
    XSP.partialRefreshGet(dialogId+":_content",axOptions)
}) 
```

}

顺便说一句：我还需要设置 showDelay

还发现了这些有用的链接 [http://dojotoolkit.org/api/1.6/dijit/TooltipDialog](http://dojotoolkit.org/api/1.6/dijit/TooltipDialog)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:13:54.633

至少在 dojo-1.8.1 中，

```
dijit.popup.open({
    popup: dlg, 
    around: node,
    orient: ["after-centered"]
}); 
```

将 ToolTipDialog 放在节点的右侧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T16:16:10.007

我认为您需要设置以下 dojo 属性：

```
<xp:dojoAttribute name="data-dojo-props" value="position:['before']">
</xp:dojoAttribute> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:57:16.650

工具提示控件的“位置”属性支持“上”、“下”、“左”和“右”的值。

# mysql - mysql查询获取未来10天的生日

> ID：12226062
> 
> 赞同：0
> 
> 时间：2012-09-01T08:06:16.127
> 
> 标签：mysql

我正在查询未来 10 天的生日。我今天可以查询，但即使在引用了一些帖子之后，也无法在接下来的 10 天内查询。这是我为获得今天的生日而进行的查询

```
$count=mysql_query("SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, 
f.friend_id, f.status FROM friend_list f, users_profile u 
WHERE f.uid = '$id' AND f.status = '1' 
AND u.uid = f.friend_id 
AND DAY(STR_TO_DATE(u.bday, '%m-%d-%y')) = DAY(CURDATE()) 
AND MONTH(STR_TO_DATE(u.bday, '%m-%d-%y')) = MONTH(CURDATE())"); 
```

谁能帮我查询 10 天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:10:19.807

如果 u.bday 是一个日期，你可以这样做：

```
WHERE u.bday < NOW() + INTERVAL 10 DAY AND u.bday >= NOW() 
```

MySQL具有良好的日期比较和计算功能。有关详细信息，请参阅手册：http: [//dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

如果 u.bday 是 varchar 格式的 mm-dd-yyyy，请使用：

```
WHERE STR_TO_DATE(u.bday, '%m-%d-%Y') < NOW() + INTERVAL 10 DAY 
                              AND STR_TO_DATE(u.bday, '%m-%d-%Y') >= NOW() 
```

（如果 u.bday 不是日期，则将其设为一个。为列使用正确的数据类型会使您的生活更轻松。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:20:31.613

努力了这么久，我找到了解决方案，与大家分享，以便它可以帮助某人。

> “选择 u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status FROMfriend_list f, users_profile u WHERE f.uid = '$id' AND f .status = '1' AND u.uid = f.friend_id and DAY(STR_TO_DATE(u.bday, '%m-%d-%y')) < DAY(CURDATE())+7 and DAY(STR_TO_DATE(u .bday, '%m-%d-%y')) != DAY(CURDATE()) AND MONTH(STR_TO_DATE(u.bday, '%m-%d-%y')) = MONTH(CURDATE() )"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:10:02.823

您将需要一个日历表。

看到这个最近的帖子；

[使用 MYSQL 从结果中获取报告](https://stackoverflow.com/questions/12173324/get-report-from-a-the-result-using-mysql/12173429#12173429)

或我所指的原始帖子；

[Mysql：选择两个日期之间的所有数据](https://stackoverflow.com/questions/1080207/mysql-select-all-data-between-two-dates)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T15:45:11.420

良好做法：始终使用与数据匹配的正确字段类型，并避免使用 unix_timestamp 作为日期，除非您有充分的理由。还要指定您的联接。

如果您的 bday 不是时间戳或日期字段（应该使用日期类型而不是时间戳 bdays 不要更改），则将其写为：

```
SELECT u.fname, u.lname, u.profile_pic, u.uid, u.bday, f.uid, f.friend_id, f.status<br> 
FROM friend_list f <br>
    join users_profile u on(<br>
    u.uid = f.friend_id  AND f.status = '1' AND STR_TO_DATE(u.bday, '%Y-%m-%d') between date(now()) AND date(DATE_ADD(NOW(), INTERVAL 10 DAY))<br>
    )<br>
where f.uid = '$id'

And if you did use a date type for the field you can change <br>
STR_TO_DATE(u.bday, '%Y-%m-%d')<br>
to<br>
date(u.bday) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-04T06:01:51.330

```
SELECT * FROM tablename WHERE DAYOFYEAR(curdate()) <= DAYOFYEAR(fieldname) AND DAYOFYEAR(curdate()) +10 >= DAYOFYEAR(fieldname) LIMIT 30; 
```

# linker - 设置 SDLmain.lib 和其他 SDL 功能以正确链接

> ID：12226063
> 
> 赞同：0
> 
> 时间：2012-09-01T08:06:18.797
> 
> 标签：linker, sdl, visual-studio-2012

我不是一个大 C++ 编码器，我自己不喜欢这种语言，但我知道即使我只是想搞砸，我也需要尝试强迫自己让它工作。

无论如何，我的问题是我正在尝试将 64 位 SDL 库链接起来，这样我就可以继续制作东西了，但是在设置项目并将开发人员 DLL 添加到我的 VC 文件夹之后（我是从那以后又被一个朋友指导，而不是一个大的 C++ 编码器），我在这里展示了。 ![目录](../Images/5253beb64a8e12812ca346da13e49489.png) ![目录2](../Images/937c68388189e74d354cb5c77f5ccce9.png)

无论如何，当我尝试在 VS2012 中链接它们时，它只会给我一个如下所示的一般错误 ![链接错误](../Images/1eea5534baf870b82770755b4e7800f8.png)

不管我给它起什么名字，如果它是 SDLmain.lib 或 Cats.lib，它只会给我这个错误。

我几乎不知道如何解决这个问题，大多数 SDL 教程使用不同的编辑器/编译器或使用旧版本的 VS，它允许您从外部文件夹手动链接它们。

我把它放在错误的目录还是什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:58:52.643

我想您的错误意味着 VS 没有“**查找**”该文件。

尝试设置库的完整路径，例如`"D:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\lib\SDLmain.lib"`

如果它解决了错误，则本地 VS 目录可能是错误的。

# ios - 想要将我现有的网站转换为移动网站。解决方案可能是phonegap

> ID：12226065
> 
> 赞同：-1
> 
> 时间：2012-09-01T08:06:29.870
> 
> 标签：ios, flash, mobile, cordova

我用 Drupal 开发了一个网站，并使用了 PHP/jQuery/Ajax (jQuery)/CSS/HTML/Flash/Drupal 模块；对于我使用 Apache 的网络服务器。

我想运行与移动网站相同的网站。我知道我必须更改移动设备页面的格式。我做了一些研究，发现 PhoneGap 是更好的解决方案。因为它与黑莓、iPhone、iPad、Android 等所有移动设备兼容。

我也知道我必须将我的 Flash 插件更改为 Javascript 插件等。我没有 Mac OS X，我想开始在 Windows 机器上使用 Phonegap 并将文件上传到基于 Linux 的托管系统上。我不知道如何开始学习 Phonegap 以及如何在 Windows 7 客户端上安装 Phonegap。如果有人有建议的工具，请提供帮助。我也愿意为此参加良好的在线培训或阅读书籍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:23:31.320

最好的起点是[入门指南](http://docs.phonegap.com/en/2.0.0/guide_getting-started_index.md.html)。在进入 Phonegap 之前，你真的应该弄清楚你想要开发的平台，但在你做任何事情之前，让我澄清一些事情。

Phonegap 是一种 API，可让您制作混合应用程序 - 本质上，这些是移动设备上的应用程序，允许您使用 HTML/CSS/JS 进行开发，但同时仍允许您访问许多本机功能，包括 Accelerometer，相机、位置等。如果您的应用程序/网站不使用任何这些，那么您可能不需要经历所有这些麻烦。

你说你只是在开发一个网站。如果您想运行您的网站的移动版本，您可以考虑创建一个子域并创建一个仅适用于移动用户的网站（有一些方法可以检测某人正在查看您的网站的浏览器，以便您可以引导他们如果他们使用的是移动浏览器，则转到移动版本）。还有很多网站可以帮助您动员您的网站——[这](https://www.uppsite.com/)是我不久前找到的一个，但从未有机会尝试，尽管我认为如果您自己开发会好很多。如果对您有帮助，您仍然可以看看。

仅供参考，简单地开发您网站的移动版本要简单得多，因为您只做一次，它应该可以跨浏览器工作。当然，您可能需要针对特定​​浏览器进行一些调整，但针对不同设备进行开发也是如此。Phonegap 确实具有跨平台功能，但它仍然需要您在不同设备之间以不同方式处理代码（注意如何有一个 android sdk、一个 ios sdk 等......）希望这会有所帮助。

# ruby - 具有双高清和“名称中的空间”错误的 RVM

> ID：12226069
> 
> 赞同：1
> 
> 时间：2012-09-01T08:06:54.817
> 
> 标签：ruby, macos, rvm, hardware

我有两台开发机器，都运行 Mac OS Mountain Lion。我必须安装 HD 的桌面之一（应用程序和系统安装在 SD 和标准用户帐户上。）在这台机器上，当我去安装 RVM 时，它说是幸运的“用户名中的空格”用户和我需要添加一些特殊的链接或诸如此类的东西。然后这些方法会导致它们自己的大量错误。我的问题是，将我的 usr/local 放在一个 hd 上，将我的用户帐户放在另一个 hd 上会导致这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-15T00:35:01.763

[我遇到了与motleydev](https://stackoverflow.com/users/1053260/motleydev)相同的问题，结果证明这些空间是红鲱鱼。相反，RVM 脚本似乎在某处硬编码“/Volumes/Macintosh HD”。我通过以下实验得出结论：

我有两个分区，原来的（“Macintosh HD”）和我正在处理的新分区（“Macintosh HD Rawr”）。*（在制作我的原始分区时，我认为分区名称中的空格是可以的，因为显然 Macintosh HD 以前一直对我有用）*

运行时初始错误`rvm install ruby-1.9.3-p484 --verify-downloads 1:`

```
/bin/sh: /Volumes/Macintosh: No such file or directory
make: *** [enc] Error 127 
```

当我尝试将“/Volumes/Macintosh\ HD\ Rawr”重命名为“/Volumes/Macintosh”（我通过 Finder 重命名，符号链接`/Volumes/Macintosh -> /`保持不变）时，安装仍然失败，但出现了不同的错误：

```
/bin/sh: /Volumes/Macintosh: source: no such file or directory
make: *** [enc] Error 127 
```

然后我将旧卷从“/Volumes/Macintosh\ HD”重命名为“/Volumes/MacintoshHD”，安装仍然失败，但现在我遇到了不同的错误：

```
command(7): ./configure --prefix=/opt/twitter/rvm/rubies/ruby-1.9.3-p484 --with-opt-dir=/opt/twitter/opt/libyaml:/opt/twitter/opt/readline:/opt/twitter/opt/libksba:/opt/twitter/opt/openssl --without-tcl --without-tk --disable-install-doc --enable-shared
configure: WARNING: unrecognized options: --without-tcl, --without-tk
checking build system type... x86_64-apple-darwin13.3.0
checking host system type... x86_64-apple-darwin13.3.0
checking target system type... x86_64-apple-darwin13.3.0
checking whether the C compiler works... no
configure: error: in `/opt/twitter/rvm/src/ruby-1.9.3-p484':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

查看config.log，发现如下错误：

```
xcrun: error: active developer path ("/Volumes/Macintosh HD/Applications/Xcode.app/Contents/Developer") does not exist, use xcode-select to change 
```

由于此时两个卷都未被命名为“Macintosh HD”，这表明这已在 RVM 代码中的某处进行了硬编码。

果然，将我想要的分区更改为“/Volumes/Macintosh\ HD”允许 rvm 完成其业务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:55:55.990

我总是假设大多数工具不理解名称中的空格，所以我的用户名从不包含空格。例如，比较这两行（这些是我设置中的真实姓名）

```
source /Volumes/MySSD/Users/sergio/.rvm/scripts/rvm
source /Volumes/Macintosh HD/Users/sergio/.rvm/scripts/rvm 
```

第二行将失败并显示消息“源：没有这样的文件或目录：/Volumes/Macintosh”，因为它将此路径解释为两个参数，以空格分隔。要使其工作，您必须将路径括在引号中（或使用反斜杠转义空格）。据我记得，RVM 脚本包含一两个未引用路径的命令。当我迁移到双磁盘设置时，我必须自己处理这些问题。我现在不记得细节了，但这可能是你的问题的根源，路径被错误地解释了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-04T21:46:06.727

我正在处理类似的双高清情况：

这可能是因为 xcode-select 没有选择正确的应用程序。检查 xcode-select 的帮助，您会看到可以将它选择的应用程序重置为系统默认值，如下所示：

```
sudo xcode-select -r 
```

或者，如果您已经知道 XCode 的位置，您可以使用以下代码：

```
sudo xcode-select --switch /Applications/Xcode.app 
```

xcode-select 文档：[https ://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T16:59:40.397

### 只需按照说明进行操作：

看起来你是快乐的*空间*用户之一（在主目录名称中），RVM 还没有完全准备好，使用这个技巧来修复它：

```
sudo ln -s "$HOME/.rvm/" /$USER.rvm
echo "export rvm_path=/$USER.rvm" >> "$HOME/.rvmrc" 
```

并重新开始安装。

# python - python dict的键默认排序发生了什么

> ID：12226071
> 
> 赞同：1
> 
> 时间：2012-09-01T08:07:14.350
> 
> 标签：python, sorting, dictionary, key

因为我想将 dict 解码为 json，但我发现输出顺序不是我想要的，然后我做了这样的测试：

```
a = {'a':'1st','ab':'2nd'}
print(a)
a = {'b':'1st','bc':'2nd'}
print(a)
a = {'c':'1st','cd':'2nd'}
print(a)
a = {'d':'1st','de':'2nd'}
print(a)
a = {'e':'1st','ef':'2nd'}
print(a)
a = {'f':'1st','fg':'2nd'}
print(a) 
```

输出是

```
{'a': '1st', 'ab': '2nd'}
{'b': '1st', 'bc': '2nd'}
{'c': '1st', 'cd': '2nd'}
{'de': '2nd', 'd': '1st'}
{'ef': '2nd', 'e': '1st'}
{'fg': '2nd', 'f': '1st'} 
```

因为 d 在 ascii 中是 100？

如何解释？我可以更改迭代顺序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:11:01.337

字典不是在 Python 中排序的。如果要排序字典，请使用`OrderedDict`：

```
>>> from collections import OrderedDict
>>> a = OrderedDict((('f','1st'),('fg','2nd')))
>>> a
OrderedDict([('f', '1st'), ('fg', '2nd')]) 
```

但是，为了构造一个`OrderedDict`，您需要使用一个保留其排序顺序的对象，例如 a`list`或 a `tuple`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:10:41.600

`dict`项目没有顺序。无论出现什么顺序都是一个实现细节——你不能指望它。

如果您需要订购商品，请使用[collections.OrderedDict](http://docs.python.org/library/collections.html#ordereddict-examples-and-recipes)（在 Python 2.7 中引入）。

```
In [1]: import collections
In [9]: a = collections.OrderedDict([('d', '1st'), ('de', '2nd')])

In [10]: a
Out[10]: OrderedDict([('d', '1st'), ('de', '2nd')]) 
```

# jquery - 在 Firefox 14.0.1 中使用 jQuery 获取 CSS 边框值

> ID：12226073
> 
> 赞同：15
> 
> 时间：2012-09-01T08:07:51.400
> 
> 标签：jquery, html, css, firefox

我在 Firebug 控制台中运行以下代码。

```
$('img').css('border', 'solid 2px red').css('border'); 
```

出现红色图片边框，但返回的是空字符串，这是为什么呢？

它在 Chrome 和 Safari 开发者工具中运行良好。

**更新**：jQuery 文档说在获取 CSS 值时不支持速记属性。但是，我在 Firefox 中也尝试了以下方法，但没有成功（在 Chrome 和 Safari 中都可以使用）

```
$('img').css('border-style', 'solid').css('border-style');
$('img').css('borderStyle', 'solid').css('borderStyle');
$('img').css('border', 'solid 2px green').css('borderStyle'); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-01T08:13:18.493

引用[`.css`](http://api.jquery.com/css/)文档。

> 不支持速记 CSS 属性（例如边距、背景、**边框**）。例如，如果要检索渲染的边距，请使用:`$(elem).css('marginTop')`和`$(elem).css('marginRight')`，依此类推。

对于 的情况，[`border`](https://developer.mozilla.org/en-US/docs/CSS/border)您需要使用`border-width`和相关的属性。`border-style``border-color`

例如`border-color`：

```
$('img').css('border-top-color', 'red').css('borderTopColor');
$('img').css('border-right-color', 'red').css('borderRightColor');
$('img').css('border-bottom-color', 'red').css('borderBottomColor');
$('img').css('border-left-color', 'red').css('borderLeftColor'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T08:36:44.800

试试这个：

```
var border = $('img').css('border', '2px solid red')[0].style.border; 
```

[**小提琴**](http://jsfiddle.net/xZXDM/2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T08:17:03.313

Firefox 中支持的属性：

```
'border-top-color'
'border-right-color'
'border-bottom-color'
'border-left-color'

'border-top-width'
'border-right-width'
'border-bottom-width'
'border-left-width'

'border-top-style'
'border-right-style'
'border-bottom-style'
'border-left-style' 
```

是支持的长手:) 干杯！享受！！！

在大多数情况下，您仍然可以使用速记来设置边框。

如果您确定它们相同，请执行以下操作

```
var borderString = $('img').css('border-top-width') + " " 
                 + $('img').css('border-top-style') + " " 
                 + $('img').css('border-top-color'); 
```

得到像 "`2px solid rgb(255,255,255)'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T08:18:49.607

也许您正在尝试使用多个属性，请使用以下语法

$('img').css({'border':'solid 2px red','color':'green'})

Jquery 不支持速记属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T08:28:28.893

```
var objImage = $('img').css('border', 'solid 2px red');
objImage.css('border-top-color');
objImage.css('border-top-width');
objImage.css('border-top-style'); 
```

不仅适用于 ,`top`也适用于`right`,`left`和`bottom`。

这也是一个非工作代码：

```
objImage.css('border-style'); 
```

由于`border`, `margin`, `padding`CSS 的属性是可单独编辑的。如果`border-top`不同`border-left`，浏览器可能会在您刚刚询问时混淆它必须返回哪个`border`。

# iphone - 如何根据 iPhone 中的值按字母顺序对 NSMutableArray 进行排序

> ID：12226074
> 
> 赞同：0
> 
> 时间：2012-09-01T08:07:54.817
> 
> 标签：iphone, sorting, nsmutablearray

在我的应用程序中，我从 Web 服务器获取了一些队列详细信息值，我已将队列 ID 和队列标题存储在 NSMutableArray 中，现在我需要按字母顺序对队列标题进行排序，但是如果我这样做，我的所有队列 ID 值都会混合up，那么如何使队列标题按字母顺序排序并存储在那里相应的队列 id 值。

```
NSArray *DicPicklistValues = [tempPickList valueForKey:@"PickListValue"];
for(int i=0;i<[DicPicklistValues count];i++){

    NSDictionary *tempDic = [DicPicklistValues objectAtIndex:i];
    [queueId addObject:[tempDic objectForKey:@"Value"]];
    [queueLabel addObject:[tempDic objectForKey:@"Label"]];
}

[queueLabel sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:32:15.720

您可以在构建and`DicPicklistValues`数组*之前*对数组进行排序。（顺便说一句。变量的名称通常以小写字母开头。）`queueId``queueLabel`

```
NSArray *dicPicklistValues = [tempPickList valueForKey:@"PickListValue"];
NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"Label"
                        ascending:YES
                        selector:@selector(localizedCaseInsensitiveCompare:)];
NSArray *sortedPicklistValues = [dicPicklistValues sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]];
// now use sortedPicklistValues instead of dicPicklistValues ... 
```

还有一种更简单的方法来构建`queueId`and`queueLabel`数组：

```
NSArray *queueId = [sortedPicklistValues valueForKey:@"Value"];
NSArray *queueLabel = [sortedPicklistValues valueForKey:@"Label"]; 
```

# android - 画布随机运动

> ID：12226075
> 
> 赞同：3
> 
> 时间：2012-09-01T08:08:03.980
> 
> 标签：android, canvas

我正在研究动态壁纸。但首先我必须学习画布动画。我这里有一个可以正常工作的代码。它使用 math.random()。但我想要的是这样的。 ![在此处输入图像描述](../Images/447f9ffcd3b2dc35b7af1034406df6a7.png)

在这里，我希望图像像上面所示的路径一样移动。我的想法是对 x 和 y 使用 math.random。但是使用它的问题是图像会出现在屏幕的任何地方。我想要图像，以创建随机路径。我知道它关于 x 和 y 坐标，但我想不出路径将如何随机触发？我实际上无法解释它。但是如果你知道弹跳球，球有一个随机坐标。就这样。这是我的代码。

```
public class MainActivity extends Activity {

    private Game game;
     public Handler updateHandler = new Handler(){
            /** Gets called on every message that is received */
            // @Override
            public void handleMessage(Message msg) {
                game.update();
                game.invalidate();
                super.handleMessage(msg);
            }
        };
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        game = new Game(this);
        setContentView(game);

        Thread myThread = new Thread(new UpdateThread());
        myThread.start();
    }

    public class UpdateThread implements Runnable {

        @Override
        public void run() {

             while(true){
                 try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                 MainActivity.this.updateHandler.sendEmptyMessage(0);
            }
        }

    }

}

public class Game extends View {

    private Bitmap image;
    private Paint paint;
    private int x=0;

    public Game(Context context) {
        super(context);
        image = Bitmap.createBitmap(BitmapFactory.decodeResource(this.getResources(), R.drawable.ic_launcher));
        paint = new Paint();
    }

    // called every Frame
    protected void onDraw(Canvas canvas) {

        canvas.drawBitmap(image, x, 0, paint);
    }

    // called by thread
    public void update() {
            x = 1;
            x += Math.random() * 100;

    }

} 
```

我希望你能在这里帮助我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T08:51:13.363

这是无限线性插值循环的代码（您可能希望稍后将其更改为平滑曲线）；

```
PointF mImagePos = new PointF();
PointF mImageSource = new PointF();
PointF mImageTarget = new PointF();
long mInterpolateTime;

protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(image, mImagePos.x, mImagePos.y, paint);
}

public void update() {
    final long INTERPOLATION_LENGTH = 2000;
    long time = SystemClock.uptimeMillis();
    if (time - mInterpolateTime > INTERPOLATION_LENGTH) {
        mImageSource.set(mImageTarget);
        mImageTarget.x = (float)(Math.random() * 100);
        mImageTarget.y = (float)(Math.random() * 100);
        mInterpolateTime = time;
    }

    float t = (float)(time - mInterpolateTime) / INTERPOLATION_LENGTH;
    // For some smoothness uncomment this line;
    // t = t * t * (3 - 2 * t);

    mImagePox.x = mImageSource.x + (mImageTarget.x - mImageSource.x) * t;
    mImagePos.y = mImageSource.y + (mImageTarget.y - mImageSource.y) * t;
} 
```

# python - PyCuda 执行错误

> ID：12226076
> 
> 赞同：-2
> 
> 时间：2012-09-01T08:08:10.760
> 
> 标签：python, cuda, pycuda

这是我用于旋转的 pycuda 代码。我已经安装了最新的 cuda 驱动程序，并且我使用了支持 cuda 的 nvidia gpu。我还安装了 cuda 工具包和 pycuda 驱动程序。我仍然收到这个奇怪的错误。

```
import pycuda.driver as cuda
import pycuda.compiler
import pycuda.autoinit
import numpy
from math import pi,cos,sin

_rotation_kernel_source = """
texture<float, 2> tex;

__global__ void copy_texture_kernel(
    const float resize_val, 
    const float alpha, 
    unsigned short oldiw, unsigned short oldih,
    unsigned short newiw, unsigned short newih,
    unsigned char* data) {

        unsigned int x = blockIdx.x * blockDim.x + threadIdx.x;
        unsigned int y = blockIdx.y * blockDim.y + threadIdx.y;

        if( (x >= newiw) || (y >= newih) )
            return;

        unsigned int didx = y * newiw + x;

        float xmiddle = (x-newiw/2.) / resize_val;
        float ymiddle = (y-newih/2.) / resize_val;
        float sx = ( xmiddle*cos(alpha)+ymiddle*sin(alpha) + oldiw/2.) ;
        float sy = ( -xmiddle*sin(alpha)+ymiddle*cos(alpha) + oldih/2.);

        if( (sx < 0) || (sx >= oldiw) || (sy < 0) || (sy >= oldih) ) { 
            data[didx] = 255; 
            return;
        }

        data[didx] = tex2D(tex, sx, sy);
    }
"""
mod_copy_texture=pycuda.compiler.SourceModule( _rotation_kernel_source )

copy_texture_func = mod_copy_texture.get_function("copy_texture_kernel")
texref = mod_copy_texture.get_texref("tex")

def rotate_image( a, resize = 1.5, angle = 20., interpolation = "linear", blocks = (16,16,1)  ):

    angle = angle/180\. *pi

    a = a.astype("float32")

    calc_x = lambda (x,y): (x*a.shape[1]/2.*cos(angle)-y*a.shape[0]/2.*sin(angle))
    calc_y = lambda (x,y): (x*a.shape[1]/2.*sin(angle)+y*a.shape[0]/2.*cos(angle))

    xs = [ calc_x(p) for p in [ (-1.,-1.),(1.,-1.),(1.,1.),(-1.,1.) ] ]
    ys = [ calc_y(p) for p in [ (-1.,-1.),(1.,-1.),(1.,1.),(-1.,1.) ] ]

    new_image_dim = (
        int(numpy.ceil(max(ys)-min(ys))*resize),
        int(numpy.ceil(max(xs)-min(xs))*resize),
    )

    cuda.matrix_to_texref(a, texref, order="C")

    if interpolation == "linear":
        texref.set_filter_mode(cuda.filter_mode.LINEAR)

    gridx = new_image_dim[0]/blocks[0] if \
            new_image_dim[0]%blocks[0]==1 else new_image_dim[0]/blocks[0] +1
    gridy = new_image_dim[1]/blocks[1] if \
            new_image_dim[1]%blocks[1]==0 else new_image_dim[1]/blocks[1] +1

    output = numpy.zeros(new_image_dim,dtype="uint8")

    copy_texture_func(
        numpy.float32(resize), numpy.float32(angle),
        numpy.uint16(a.shape[1]), numpy.uint16(a.shape[0]),
        numpy.uint16(new_image_dim[1]), numpy.uint16(new_image_dim[0]),
            cuda.Out(output),texrefs=[texref],block=blocks,grid=(gridx,gridy))

    return output

if __name__ == '__main__':
    import Image
    import sys

    def main( ):
        if len(sys.argv) != 2:
            print "You should really read the source...\n\nUsage: rotate.py <Imagename>\n"
            sys.exit(-1)

        img = Image.open(sys.argv[1]).convert("L")
        i = numpy.fromstring(img.tostring(),dtype="uint8").reshape(img.size[1],img.size[0])

        irot = rotate_image(i)
        rotimg = Image.fromarray(irot,mode="L")

        rotimg.save("rotated.png")
        rotimg.show()

    main() 
```

这是我的错误。

```
ImportError: libboost_python-gcc43-mt-1_39.so.1.39.0: cannot open
    shared object file: No such file or directory 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:11:41.270

你在这里问之前用谷歌搜索错误吗？无论如何试试这个 [BoostInstallationHowto#LD_LIBRARY_PATH](http://wiki.tiker.net/BoostInstallationHowto#LD_LIBRARY_PATH)。请在你问这里之前用谷歌搜索。希望这对你有帮助。

# wpf - WPF的语义缩放控件？

> ID：12226077
> 
> 赞同：3
> 
> 时间：2012-09-01T08:08:30.510
> 
> 标签：wpf, controls, semantic-zoom

WinRT/Metro 正在获得一个新的[SemanticZoom](http://mikaelkoskinen.net/post/winrt-tutorial-mvvm-gridview-semanticzoom.aspx)控件，但我很难为 WPF 找到任何东西。

我不想为我的特定项目切换到 Metro，因为它不允许我在多个监视器上制作窗口应用程序或多个实例。

WPF 是否有任何第三方语义缩放控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:28:24.927

我知道您要求控件，但您也可以使用[ZoomableCanvas](http://blogs.msdn.com/b/kaelr/archive/2010/07/29/zoomablecanvas.aspx)代码作为您自己实现语义缩放的基础。我计划自己为一个时间线项目实现它，并可能将它添加到 CodeProject 上。

# php - PHP创建缩略图功能，使文件尺寸更小，但文件尺寸更大？

> ID：12226078
> 
> 赞同：0
> 
> 时间：2012-09-01T08:08:48.537
> 
> 标签：php, file, thumbnails

这是我的创建缩略图代码。缩略图宽度/高度较小 (400)。但文件大小更大（111KB），旧文件大小（95KB）

为什么？如何压缩和缩小文件大小？

create_thumbnail( 'http://upload.wikimedia.org/wikipedia/en/2/2e/Doraemon_first_appearance.jpg', './test.jpg', 400,'w','jpg' );

```
function create_thumbnail( $source_file, $destination_file, $max_dimension, $one_dimension=false,$source_file_type=false)
{
    list($img_width,$img_height) = getimagesize($source_file); // Get the original dimentions
    $aspect_ratio = $img_width / $img_height;

    // If either dimension is too big...
    if ( ($img_width > $max_dimension) || ($img_height > $max_dimension) ) 
    {
        if ( $img_width > $img_height ) // For wide images...
        {
            if($one_dimension=='h')
            {
                $new_width = $img_width * $max_dimension / $img_height;
                $new_height = $max_dimension;
            }
            else
            {
                $new_width = $max_dimension;
                $new_height = $new_width / $aspect_ratio;
            }
        }
        elseif ( $img_width < $img_height ) // For tall images...
        {
            if($one_dimension=='w')
            {
                $new_width = $max_dimension;
                $new_height = $img_height * $max_dimension / $img_width;
            }
            else
            {
                $new_height = $max_dimension;
                $new_width = $new_height * $aspect_ratio;
            }
        }
        elseif ( $img_width == $img_height ) // For square images...
        {
           $new_width = $max_dimension;
           $new_height = $max_dimension;
        }
        else { echo "Error reading image size."; return FALSE; }

        // Make sure these are integers.
        $new_width = intval($new_width);
        $new_height = intval($new_height);

        $thumbnail = imagecreatetruecolor($new_width,$new_height); // Creates a new image in memory.

        // The following block retrieves the source file.  It assumes the filename extensions match the file's format.
        if(!$source_file_type) $source_file_type = get_file_ext($source_file,true);

        if ( $source_file_type=="gif" ) { $img_source = ImageCreateFromGIF($source_file); }
        elseif ( ($source_file_type=="jpg") || ($source_file_type=="jpeg") || ($source_file_type=="pjpeg") ) { $img_source = imagecreatefromjpeg($source_file); }
        elseif ( $source_file_type=="bmp" ) { $img_source = imagecreatefromwbmp($source_file); }
        elseif ( $source_file_type=="png" ) { $img_source = imagecreatefrompng($source_file); }

        // Here we resample and create the new jpeg.
        imagecopyresampled($thumbnail, $img_source, 0, 0, 0, 0, $new_width, $new_height, $img_width, $img_height);
        imagejpeg( $thumbnail, $destination_file, 100 );

        // Finally, we destroy the two images in memory.
        imagedestroy($img_source);
        imagedestroy($thumbnail);
    }
    // If it's already smaller, don't change the size.
    else { 
        copy($source_file, $destination_file);
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:11:21.600

通过调整的第三个参数来降低输出图像的质量`imagejpeg`（范围从 0 到 100，当 100 是最佳质量时）。例如：

```
imagejpeg($thumbnail, $destination_file, 80); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T09:19:04.983

更好的方法是使用 ImageMagick 库和许多其他图像操作

[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

# ruby - 如何包含来自其他模块的 Ruby 类扩展？

> ID：12226082
> 
> 赞同：2
> 
> 时间：2012-09-01T08:09:23.263
> 
> 标签：ruby, class, module, include

我想让其他模块/类/文件可以使用类扩展。例如：

```
module UsefulStuff
  class Object
    def blank?
      respond_to?(:empty?) ? empty? : !self
    end
  end
end 
```

在其他类/模块/文件中：

```
if string.blank? ... 
```

什么以及如何包含/加载/要求/... 使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T08:33:27.370

您应该使用模块而不是类：

```
module UsefulStuff
  module Blank
    def blank?
      respond_to?(:empty?) ? empty? : !self
    end
  end
end 
```

您可以将其包含在 String 类中：

```
class String
  include UsefulStuff::Blank
end 
```

或者，如果您希望它对对象是全局的：

```
class Object
  include UsefulStuff::Blank
end 
```

# android - Android离线文档与在线文档不同

> ID：12226084
> 
> 赞同：3
> 
> 时间：2012-09-01T08:09:43.710
> 
> 标签：android, offline

就在这周，我下载了最新的 Android SDK (20.0.3)。在我下载了离线文档（应该是 API 16）后，我发现它包含的材料比在线的要旧。当我浏览离线文档时，它提到的 ADT 版本是 20.0.0，而最新版本已经是 20.0.3。此外，文档的某些部分与实际的示例源代码不同。例如，当我关注“构建一个简单的用户界面页面”时，离线文档指出在 Eclipse 的默认 Hello World 应用程序中使用了 LinearLayout，而实际上使用的是相对布局（这在在线文档）。

有没有办法获得最新版本的文档以供离线使用，或者这就是我们在捆绑包中真正得到的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:04:19.430

> 就在这周，我下载了最新的Android SDK（20.0.3）

那不是 Android SDK 版本。那是一个Android工具版本。

> 有没有办法获得最新版本的文档以供离线使用，或者这就是我们在捆绑包中真正得到的东西？

在线版本总是更新的。通常，离线文档只会在正式的 Android SDK 版本上更新。此外，有些东西只在在线版本上（例如，设备仪表板）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:36:36.077

尝试这个：

[CHM 格式的 Android 文档](http://code.google.com/p/android-chm-documentation/downloads/detail?name=Android.4.2.documentation-1.6.zip&can=2&q=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T01:18:46.527

您可以找到大多数每月构建的部分的 pdf 版本，其中包含上个月更改的详细信息。该网站已分为每本书的部分。

[https://www.docand.com/](https://docand.com)

```
Design ………………….. https://docand.com/android-design-methods-book/
Training…………………. https://docand.com/training-in-android-book/
Android Components………… https://docand.com/a-guide-to-android-api-components-book/
Google Services…………… https://docand.com/android-google-available-services-book/ 
Distribution Methods……….. https://docand.com/android-distribution-methods-book/
Tools of the Android Developer…………… https://docand.com/tools-of-the-android-developer-book/ 
```

这些部分都可以预览和免费下载。

# java - 如何将包含用于 Java 库的 IBM 类的 Eclipse 项目导出到可执行 JAR 中

> ID：12226085
> 
> 赞同：0
> 
> 时间：2012-09-01T08:09:48.187
> 
> 标签：java, eclipse, jar, websphere, noclassdeffounderror

我正在尝试将`Eclipse`项目导出到`JAR`可执行文件。
这个项目包括一个带有两个 IBM 包的个人库`com.ibm.mq.jar`和`com.ibm.mq.jmqi.jar`

`Eclipse`从运行按钮或命令运行应用程序没有错误：`java MainClass`从项目 bin 文件夹。

不幸的是，一旦创建了 jar (File > Export > Runnable Jar) 并启动`java -jar MainClass.jar`，结果如下：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: java.lang.NoClassDefFoundError: javax/resource/ResourceException
        at com.ibm.mq.MQEnvironment.<clinit>(MQEnvironment.java:520)
        at MQtestMain.<init>(MQtestMain.java:38)
        at MQtestMain.main(MQtestMain.java:18)
        ... 5 more
Caused by: java.lang.ClassNotFoundException: javax.resource.ResourceException
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 8 more 
```

我也尝试过`Fat Jar`用于导出的插件，但结果`java -jar MainClass_fat.jar`非常相似：

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/resource/ResourceException
        at com.ibm.mq.MQEnvironment.<clinit>(MQEnvironment.java:520)
        at MQtestMain.<init>(MQtestMain.java:38)
        at MQtestMain.main(MQtestMain.java:18)
Caused by: java.lang.ClassNotFoundException: javax.resource.ResourceException
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 3 more 
```

`Eclipse`将项目导出和运行到包含库的`Jar`文件的正确方法是什么？`IBM MQ Classes for Java`

* * *

**更新 1：**不必要但对解决问题非常有用。

Integrating Stuff 建议： Java EE 安装中的
包含`javaee.jar`文件以导入项目中包含的 IBM 类 jar 的所有依赖项。

* * *

**解决方案：**尊重所有 IBM 类的 Java 依赖项。

将**所有**`jar`文件从`C:\...\IBM\WebSphere MQ\java\lib`
导出的可运行 Jar导入自定义库`Eclipse`（也不需要 Fat Jar 插件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:23:27.230

javax.resource.ResourceException 是 Java EE api 的一部分。

您的 Eclipse 项目可能假定此 jar 将在目标环境中可用/在其与应用程序一起打包的 jar 列表中没有 java-ee api。

您使用的是哪种构建工具？Maven 或 Ant，或者您是在 Eclipse 本身中打包，而不使用外部工具？

要解决此问题，您需要确保 Java EE api jar 包含在您的可执行 jar 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:06:06.813

**解决方案：**尊重所有 IBM 类的 Java 依赖项。

我发现非常有用的*Integrating Stuff*建议`javaee.jar`从 Java EE 安装中包含文件以导入项目中包含的 IBM 类 jar 的所有依赖项。
这并不能解决他的错误，但让我找到了解决方案：

将**所有**`jar`文件从`C:\...\IBM\WebSphere MQ\java\lib`
导出的可运行 Jar导入自定义库`Eclipse`（也不需要 Fat Jar 插件）

# c# - Fluent Interfaces - 确保新实例

> ID：12226089
> 
> 赞同：7
> 
> 时间：2012-09-01T08:10:41.193
> 
> 标签：c#, thread-safety, fluent-interface, method-chaining, reentrancy

我有一个类公开了一个流利的界面样式，我也希望它是线程安全的。

目前，在类的实例上调用可链接的方法会设置各种带有操作（`Func<T>`'s）的集合。

当请求结果时，真正的工作就会发生。这允许用户以任何顺序链接方法调用，以便：

```
var result = myFluentThing
.Execute(() => serviceCall.ExecHttp(), 5) 
.IfExecFails(() => DoSomeShizzle())
.Result<TheResultType>(); 
```

（这里，5 是重试失败的服务调用的次数。）

显然这不是线程安全的或可重入的。

有哪些常见的设计模式可以解决这个问题？

如果必须首先调用 Execute 方法，我每次都可以简单地返回一个新的类实例来使用，但是由于可以在链中的任何点调用任何方法，你将如何解决这个问题？

我更感兴趣的是理解解决这个问题的各种方法，而不是仅仅为了“让它正常工作”而给出一个单一的答案。

我已将完整代码放在 GitHub 上，以防有人需要更广泛的背景来了解我的目标：[https ://github.com/JamieDixon/ServiceManager](https://github.com/JamieDixon/ServiceManager)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T19:36:53.757

我们可以将流利的方法分为两种类型；变异和非变异。

变异情况在 .NET 中并不是很常见（直到 Linq 引入了 fluent 方法，它才普遍使用流畅的方法，相比之下，Java 在属性设置器中大量使用它们，而 C# 使用属性来提供相同的语法将属性设置为设置字段）。一个例子是`StringBuilder`.

```
StringBuilder sb = new StringBuilder("a").Append("b").Append("c"); 
```

基本形式是：

```
TypeOfContainingClass SomeMethod(/*... arguments ... */)
{
  //Do something, generally mutating the current object
  //though we could perhaps mix in some non-mutating methods
  //with the mutating methods a class like this uses, for
  //consistency.
  return this;
} 
```

这是一种固有的非线程安全方法，因为它会改变有问题的对象，因此来自不同线程的两个调用会相互干扰。当然可以创建一个在面对此类调用时是线程安全的类，因为它不会进入不连贯的状态，但通常当我们采用这种方法时，我们关心这些突变的结果，和那些单独的。例如，对于`StringbBuilder`上面的示例，我们关心`sb`最终持有 string `"abc"`，线程安全`StringBuilder`将毫无意义，因为我们不会考虑保证它会成功地最终持有`"abc"`或被`"acb"`接受 - 这样一个假设的类本身会是线程安全的，但调用代码不会。

（这并不意味着我们不能在线程安全代码中使用这些类；我们可以在线程安全代码中使用任何类，但这对我们没有帮助）。

现在，非变异形式本身就是线程安全的。这并不意味着所有使用都是线程安全的，但这意味着它们可以。考虑以下 LINQ 代码：

```
var results = someSource
  .Where(somePredicate)
  .OrderBy(someOrderer)
  .Select(someFactory); 
```

这是线程安全的，只要：

1.  遍历 someSource 是线程安全的。
2.  调用 somePredicate 是线程安全的。
3.  调用 someOrder 是线程安全的。
4.  调用 someFactory 是线程安全的。

这可能看起来像很多标准，但实际上，最后一个标准都是相同的：我们要求我们的`Func`实例是功能性的——它们没有副作用*，而是它们返回一个取决于它们的输入的结果（我们可以改变一些关于功能性的规则，同时仍然是线程安全的，但我们现在不要让事情复杂化）。好吧，这大概就是他们想出这个名字时所考虑的那种情况`Func`。请注意，Linq 最常见的情况符合此描述。例如：

```
var results = someSource
  .Where(item => item.IsActive)//functional. Thread-safe as long as accessing IsActive is.
  .OrderBy(item => item.Priority)//functional. Thread-safe as long as accessing Priority is.
  .Select(item => new {item.ID, item.Name});//functional. Thread-safe as long as accessing ID and Name is. 
```

现在，对于 99% 的属性实现，`getter`只要我们没有另一个线程写入，从多个线程调用 s 是线程安全的。这是一个常见的场景，所以我们在能够安全地满足这种情况方面是线程安全的，尽管面对另一个线程进行此类突变时我们不是线程安全的。

同样，我们可以将源`someSource`分为四类：

1.  记忆中的一个集合。
2.  针对数据库或其他数据源的调用。
3.  一个可枚举的对象，它将通过从某处获得的信息进行单次传递，但源不具有在第二次迭代中再次检索该信息所需的信息。
4.  其他。

第一种情况的绝大多数仅在其他读者面前都是线程安全的。面对并发编写者，有些也是线程安全的。对于第二种情况，它取决于实现 - 它是根据当前线程的需要获得连接等，还是使用调用之间共享的连接？对于第三种情况，它绝对不是线程安全的，除非我们认为“丢失”其他线程而不是我们获得的那些项目是可以接受的。好吧，“其他”就像“其他”一样。

因此，从所有这些来看，我们没有保证线程安全的东西，但我们确实有一些东西可以为我们提供足够程度的线程安全，如果与提供我们需要的线程安全程度的其他组件一起使用，我们得到它。

面对所有可能的用途，100% 线程安全？不，没有什么能给你。确实，没有数据类型是线程安全的，只有特定的操作组 - 在将数据类型描述为“线程安全”时，我们是说它的所有成员方法和属性都是线程安全的，反过来，在将方法或属性描述为线程安全时，我们是说它本身是线程安全的，因此*可以*是线程安全操作组的一部分，但并非每组线程安全操作都是线程安全的。

如果我们想实现这种方法，我们需要创建一个方法或扩展来创建一个对象，基于调用的对象（如果是成员而不是扩展）和参数，但不会发生变异。

让我们有两个单独的方法实现，如`Enumerable.Select`讨论：

```
public static IEnumerable<TResult> SelectRightNow<TSource, TResult>(
  this IEnumerable<TSource> source,
  Func<TSource, TResult> selector)
  {
    var list = new List<TResult>();
    foreach(TSource item in source)
      list.Add(selector(item));
    return list;
  }

public static IEnumerable<TResult> SelectEventually<TSource, TResult>(
  this IEnumerable<TSource> source,
  Func<TSource, TResult> selector)
  {
    foreach(TSource item in source)
      yield return selector(item);
  } 
```

在这两种情况下，该方法都会立即返回一个新对象，该对象以某种方式基于`source`. `source`只有第二个具有我们从 linq 获得的那种延迟迭代。第一个实际上让我们比第二个更好地处理一些多线程情况，但是这样做很糟糕（例如，如果您想在持有锁的同时获取副本作为并发管理的一部分，请通过在持有锁的同时获取副本来实现锁定，而不是在其他任何东西中）。

在任何一种情况下，返回的对象都是我们可以提供线程安全的关键。第一个已获得有关其结果的所有信息，因此只要它仅在本地引用到单个线程，它就是线程安全的。第二个具有产生这些结果所需的信息，因此只要它仅在本地引用到单个线程，访问源是线程安全的，并且调用`Func` 是线程安全的，它是线程安全的（以及那些也适用于首先创建第一个）。

总而言之，如果我们有方法生成仅引用源和`Func`s 的对象，我们可以像源和`Func`s 一样是线程安全的，但并不安全。

*作为优化，记忆会导致从外部看不到的副作用。如果我们`Func`的 s 或他们调用的某些东西（例如 getter）使用它，那么必须以线程安全的方式实现记忆，以实现线程安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:30:09.267

为了添加一些关于我如何解决这个问题的额外信息，我认为发布一个关联的答案会很有用。

链接方法调用的“标准”方式是返回同一类的实例，在该实例上可以进行后续方法调用。

我的原始代码通过直接返回来做到这一点`this`，但是，由于我的方法通过建立`Func<T>`'s 的集合来改变字段，这使得消费者对线程和重入问题持开放态度。

为了解决这个问题，我决定隐含`ICloneable`并让它通过`object.MemberwiseClone()`. 这种浅克隆在这种情况下工作得很好，因为添加到的字段是在浅克隆过程中复制的值类型。

我的类中的每个公共方法现在都执行实例`Clone`方法并在返回克隆之前更新私有字段，这样：

```
public class ServiceManager : IServiceManager
    {
        /// <summary>
        /// A collection of Funcs to execute if the service fails.
        /// </summary>
        private readonly List<Func<dynamic>> failedFuncs = 
                                             new List<Func<dynamic>>();

        /// <summary>
        /// The number of times the service call has been attempted.
        /// </summary>
        private int count;

        /// <summary>
        /// The number of times to re-try the service if it fails.
        /// </summary>
        private int attemptsAllowed;

        /// <summary>
        /// Gets or sets a value indicating whether failed.
        /// </summary>
        public bool Failed { get; set; }

        /// <summary>
        /// Gets or sets the service func.
        /// </summary>
        private Func<dynamic> ServiceFunc { get; set; }

        /// <summary>
        /// Gets or sets the result implimentation.
        /// </summary>
        private dynamic ResultImplimentation { get; set; }

        /// <summary>
        /// Gets the results.
        /// </summary>
        /// <typeparam name="TResult">
        /// The result.
        /// </typeparam>
        /// <returns>
        /// The TResult.
        /// </returns>
        public TResult Result<TResult>()
        {
            var result = this.Execute<TResult>();

            return result;
        }

        /// <summary>
        /// The execute service.
        /// </summary>
        /// <typeparam name="TResult">
        /// The result.
        /// </typeparam>
        /// <param name="action">
        /// The action.
        /// </param>
        /// <param name="attempts">
        /// The attempts.
        /// </param>
        /// <returns>
        /// ServiceManager.IServiceManager.
        /// </returns>
        public IServiceManager ExecuteService<TResult>(
                                   Func<TResult> action, int attempts)
        {
            var serviceManager  = (ServiceManager)this.Clone();
            serviceManager.ServiceFunc = (dynamic)action;
            serviceManager.attemptsAllowed = attempts;

            return serviceManager;
        }

        /// <summary>
        /// The if service fails.
        /// </summary>
        /// <typeparam name="TResult">
        /// The result.
        /// </typeparam>
        /// <param name="action">
        /// The action.
        /// </param>
        /// <returns>
        /// ServiceManager.IServiceManager`1[TResult -&gt; TResult].
        /// </returns>
        public IServiceManager IfServiceFailsThen<TResult>(
                                      Func<TResult> action)
        {
            var serviceManager = (ServiceManager)this.Clone();
            serviceManager.failedFuncs.Add((dynamic)action);
            return serviceManager;
        }

        /// <summary>
        /// Clones the current instance of ServiceManager.
        /// </summary>
        /// <returns>
        /// An object reprisenting a clone of the current ServiceManager.
        /// </returns>
        public object Clone()
        {
            return this.MemberwiseClone();
        }        
    } 
```

为简洁起见删除了私有方法。完整的源代码可以在这里找到：

[https://github.com/JamieDixon/ServiceManager](https://github.com/JamieDixon/ServiceManager)

# wpf - WPF相对于自动调整列宽设置网格列宽

> ID：12226092
> 
> 赞同：0
> 
> 时间：2012-09-01T08:10:55.613
> 
> 标签：wpf, layout, styles

我该如何执行以下操作：

```
<Window x:Class="MyClientsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Login" WindowStartupLocation="CenterScreen"
    SizeToContent="WidthAndHeight" 
    MaxWidth="800" MaxHeight="600">

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto" Name="labelColumn"/>
      <ColumnDefinition Width="2*" Name="entryColumn"/>
    </Grid.ColumnDefinitions>

    <TextBlock Grid.Row="0" Text="First name: " Name="firstNameLabel"
               Margin="4" VerticalAlignment="Center"/>
    <TextBox Grid.Row="0" Grid.Column="1" 
             Margin="4" HorizontalAlignment="Stretch"  />
    <TextBlock Grid.Row="1" Text="Last name: " Name="lastNameLabel"
               Margin="4" VerticalAlignment="Center"/>
    <TextBox Grid.Row="1" Grid.Column="1" 
             Margin="4" HorizontalAlignment="Stretch"  />
  </Grid> 
```

第二列的宽度必须是第一列的两倍，但第一列的宽度是自动的，取决于字体系列、字体大小等。此外，调整窗口大小时需要拉伸第二列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:51:12.787

我不知道这是否是最佳答案，但我找到了两种方法：

1)

```
<ColumnDefinition Width="*" Name="entryColumn" MinWidth="{Binding 
                ElementName=firstNameLabel, Path=ActualWidth}, 
                Converter={StaticResource MultiplyByTwoConverter}"/> 
```

2) 在代码隐藏中，在 Window.Loaded 事件处理程序中：

```
private void onLoaded(object sender, RoutedEventArgs e)
{
     entryColumn.MinWidth = labelColumn.ActualWidth * 2;
} 
```

第一个也可以在设计模式下工作，但第二个不行。以下在设计模式下有效，但在运行时无效：

```
<ColumnDefinition Width="*" Name="entryColumn" MinWidth="{Binding 
                ElementName=labelColumn, Path=ActualWidth}, 
                Converter={StaticResource MultiplyByTwoConverter}"/> 
```

# php - 在 PHP 中以透明方式旋转 PNG

> ID：12226093
> 
> 赞同：1
> 
> 时间：2012-09-01T08:11:00.050
> 
> 标签：php, image-processing, png

我在旋转 PNG 图像并保持与未旋转时一样高的质量时遇到问题。它也正在失去透明度。

这是我用来旋转它的代码：

```
$source = imagecreatefrompng('cake-test.png');
$col = imagecolorexact($source, 255, 255, 255);
imagecolortransparent($source, $col) ;
$rotate = imagerotate($source, 10, 0);

imagepng($rotate, 'temp.png') ; 
```

创建的图像在边缘看起来全部锯齿并且没有透明度。有谁知道如何让它工作或拥有他们愿意分享的功能？

* * *

谢谢！我在图像所在的 div 上设置了背景，现在看起来很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:20:39.903

您必须分配 alpha 通道`imagecolorallocatealpha`并将其设置`imagesavealpha`为 true。试试这个：

```
 $source  = imagecreatefrompng('cake-test.png');
 $bgColor = imagecolorallocatealpha($source, 255, 255, 255, 127);
 $rotate  = imagerotate($source, 10, $bgColor);
 imagesavealpha($rotate, true);

 imagepng($rotate, 'temp.png') ; 
```

# perl - 如何连接多个 LWP get 命令

> ID：12226097
> 
> 赞同：1
> 
> 时间：2012-09-01T08:11:31.190
> 
> 标签：perl, lwp

我正在使用 LWP 从三个不同的网页（动态定义）获取 html 并将其分配给一个 scalar `$content`。有时我搜索的一个或多个页面将不存在，因此`get`有时会返回 undef。我应该如何处理这个，这样`$content`将包括所有成功的 get 命令？

`get`如果我的请求中只有一个返回了定义的值，我有以下工作：

```
unless ($content = get $page_one)
{
   unless ($content = get $page_two)
   {
      unless ($content = get $page_three)
      {
         $content = "";
      }
   }
} 
```

但显然，如果不止一页要返回一个定义的值，它就不会获得所有的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:11:28.087

那是因为您嵌套了条件并使它们依赖于先前获取的成功，而它们不应该这样做。

```
my $result;
if ($content = get $page_one) { $result .= $content }
if ($content = get $page_two) { $result .= $content }
if ($content = get $page_three) { $result .= $content } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T09:13:53.187

一种可能：

```
$content = join '', grep { $_ } map { get($_) } ($page_one, $page_two, $page_three); 
```

从右到左看：

首先，我构造了一个包含三个页面地址的数组。

这将移交给[`map`](http://perldoc.perl.org/functions/map.html)它检索每个返回三个元素的数组的页面。每个元素要么是页面的内容，要么是`undef`.

然后[`grep`](http://perldoc.perl.org/functions/grep.html)扔掉`undef`s。

[`join`](http://perldoc.perl.org/functions/join.html)最后连接已成功检索的内容。

# c# - 如何在 C# 的 Metro 风格应用程序中居中弹出窗口

> ID：12226099
> 
> 赞同：2
> 
> 时间：2012-09-01T08:12:10.697
> 
> 标签：c#, popup, microsoft-metro, windows-runtime, center

有什么方法可以在 Windows 8 Metro 中心显示**弹出窗口？**

将`VerticalAlignment`and设置`HorizontalAlignment`为“Center”，并将`VerticsalOffset`and`HorizontalOffset`设置为 0 会导致屏幕中心左上角的弹出窗口。

有什么办法可以做得很好吗？

为了使这个问题更难，这个弹出窗口在快照视图中具有不同的大小，也应该居中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:56:39.397

希望这会有所帮助，如何将弹出窗口放在画布中然后操作画布......

# XAML

```
<Canvas x:Name="myCanvas"
            HorizontalAlignment="Center"
            Height="127"
            VerticalAlignment="Center"
            Width="191"/>
    <Button Content="myButton"
            Height="100"
            Width="100"
            Click="myButton_Click"/> 
```

# C＃

```
 private void myButton_Click(object sender, RoutedEventArgs e)
    {
        Popup myPopup = new Popup();
        myPopup.IsOpen = true;

        TextBox myTextbox = new TextBox();
        myTextbox.Text = "Your Message Here";

        myPopup.Child = myTextbox;

        myCanvas.Children.Add(myPopup);
    } 
```

只是玩得开心尝试...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T20:27:00.573

我把它放在我的 Xaml 中主网格的末尾，在其他所有内容之后，所以它肯定会出现在前面。

```
<Canvas x:Name="pCanvas" HorizontalAlignment="Center" VerticalAlignment="Center">
    <StackPanel x:Name="pStackPanel">

        <TextBlock x:Name="pText" Text="Enter Name of Playlist:" Margin="25,12" Width="300" />

        <TextBox x:Name="pInputBox" Margin="25,12" Width="300" />

        <Button x:Name="pButton" Content="OK" Height="30" Width="100" Click="pButton_Clicked" Margin="6,12" />

    </StackPanel>
</Canvas> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:33:22.187

I also added the following code to my xaml.cs (code behind) file:

(see the xaml I posted previously)

I then just wire up any test button's _Tapped event with the myPopup() function below.

I still haven't quite got the hang of Stackpanel to get the message centered, etc, but I'm getting there!

```
 async void messageBox(String msg)
    {
        MessageDialog dialog = new MessageDialog(msg,"Alert");
        await dialog.ShowAsync();
    }

   private void pButton_Clicked(object sender, RoutedEventArgs e)
    {
        PLPopup.IsOpen = false;

        String str = pInputBox.Text;

        hidePopup();

        messageBox(str);
    }

    void hidePopup()
    {
        pCanvas.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        pStackPanel.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        pText.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        pInputBox.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        pButton.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
    }

    void showPopup()
    {
        pCanvas.Visibility = Windows.UI.Xaml.Visibility.Visible;
        pStackPanel.Visibility = Windows.UI.Xaml.Visibility.Visible;
        pText.Visibility = Windows.UI.Xaml.Visibility.Visible;
        pInputBox.Visibility = Windows.UI.Xaml.Visibility.Visible;
        pButton.Visibility = Windows.UI.Xaml.Visibility.Visible;
    }

    private void myPopup(object sender, RoutedEventArgs e)
    {
        Brush myBrush = new SolidColorBrush(Windows.UI.Colors.Black);

        topAppBar.IsOpen = false;
        bottomAppBar.IsOpen = false;

        myBrush.Opacity = .5;

        PLPopup = new Popup();
        PLPopup.IsOpen = true;

        //PLPopup.Child = myTextbox;

        pCanvas.Background = myBrush;
        pCanvas.Children.Add(PLPopup);

        pCanvas.Width = this.ActualWidth;
        pCanvas.Height = this.ActualHeight;

        showPopup();
    } 
```

# javascript - 使用 AJAX 的 JSON 跨域 不适用于 ie

> ID：12226102
> 
> 赞同：0
> 
> 时间：2012-09-01T08:12:28.913
> 
> 标签：javascript, ajax, json

我正在使用 Ajax 确实使用 JSON 进行跨域调用，并且脚本在 FF 中运行良好，但在 ie 中，脚本不会填充`select menu`结果，在 ie 中它会显示错误，所以我知道脚本肯定在工作并进行跨域打电话，谁能告诉我我做错了什么？

```
function xss_ajax(url) {

    var script = document.createElement('script');
    script.setAttribute('type', 'text/javascript');
    script.setAttribute('src', url);
    script.setAttribute('id', 'script_id');

    script_id = document.getElementById('script_id');
    if (script_id) {
        document.getElementsByTagName('head')[0].removeChild(script_id);
    }

    document.getElementsByTagName('head')[0].appendChild(script);

    document.getElementById("addrlist").innerHTML = "";
    document.getElementById("errlog").innerHTML = "";
}

function callback(data) {

    if (typeof data['error'] != "undefined") {
        if (window.on_error) {
            on_error();
        }

        if (document.getElementById("errlog")) {
            document.getElementById("errlog").innerHTML = "<br>" + data['error'] + "<br>";
        } else {
            alert(data['error']);
        }

    } else {

        var val = data['address1'] + ", " + data['address2'] + ", " + data['address3'] + ", " + data['address4'] + ", " + data['postcode'];

        document.getElementById("addrlist").innerHTML += "<option value='" + val + "'>" + val + "</option>";

    }
}

function searchpost() {

    var license = '98798797';
    var url = "http://mydomin.co.uk/myfile.php?postcode=" + escape(document.getElementById("field1").value) + '&license=' + escape(license);

    xss_ajax(url);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:40:08.130

您应该使用[jQuery](http://jquery.com)库使事情变得更容易：

```
var license = '98798797';
var url = "http://mydomin.co.uk/myfile.php?postcode="+escape($("#field1").val())+'&license='+escape(license);

$.getJSON(url+'&callback=?', function(data) {
    var val = data.address1 + ", " + data.address2 + ", " + data.address3 + ", " + data.address4 + ", " + data.postcode;
    var opt = $('option').text(val).val(val);
    $("#addrlist").append(opt); 
}); 
```

看看你的代码现在有多短？

顺便说一句，您将 json 数据视为一个数组，它不是一个数组，所以不是（例如）：`data['address1']`我将其更改为`data.address1`因为解析的 json 是一个对象。

此外，我删除了所有错误检查，因为它根本没有必要。

*ps 我添加了`callback=?`它以使其成为**JSONP** ajax 请求，因为 jsonp 用于跨域 ajax。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:41:57.030

我认为这是您将选项添加到选择的方式。创建一个新的 option 元素并添加到 select 元素中，而不是替换所有 HTML 内容：

```
var opt = document.createElement('OPTION');
opt.text = val;
opt.value = val;
document.getElementById("addrlist").options.add(opt); 
```

# mysql - 插入选择时Mysql自动增量跳转

> ID：12226105
> 
> 赞同：15
> 
> 时间：2012-09-01T08:13:06.463
> 
> 标签：mysql, auto-increment

我正在测试插入选择查询并注意到一个奇怪的结果。

```
CREATE TABLE `test` (
  `cnt` int(11) NOT NULL AUTO_INCREMENT,
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL,
  PRIMARY KEY (`cnt`)
)

CREATE TABLE `test_current` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL
) 
```

首先我创建了两个表，并将一些值插入到 test_current

```
mysql> insert into test_current (a,b) values (1,1),(2,2);
Query OK, 2 rows affected (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 0 
```

我做了这个查询

```
mysql> INSERT INTO test (a,b) SELECT a,b FROM test_current;
Query OK, 2 rows affected, 1 warning (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 1

mysql> select * from test;
+-----+------+------+
| cnt | a    | b    |
+-----+------+------+
|   1 |    1 |    1 |
|   2 |    2 |    2 |
+-----+------+------+
2 rows in set (0.00 sec) 
```

但是当我再次查询时

```
mysql> INSERT INTO test (a,b) SELECT a,b FROM test_current;
Query OK, 2 rows affected, 1 warning (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 1

mysql> select * from test;
+-----+------+------+
| cnt | a    | b    |
+-----+------+------+
|   1 |    1 |    1 |
|   2 |    2 |    2 |
|   4 |    1 |    1 |
|   5 |    2 |    2 |
+-----+------+------+ 
```

自动增量只是跳过了 cnt 3。我想知道这是怎么回事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:37:47.703

您可以在每次将值插入表之前将 auto_increment 值重置为 1：

```
ALTER TABLE `test` AUTO_INCREMENT = 1;
INSERT INTO test (a,b) SELECT a,b FROM test_current; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-27T08:04:02.360

**您可以从my.ini**更改 innodb_autoinc_lock_mode=0（“传统”锁定模式）以避免在某些情况下跳过主键中的值。有关更多详细信息，请参阅手动[mysql 手册以了解 innodb 自动增量处理](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html) 。

> 根据手册“提供传统锁定模式选项是为了向后兼容性、性能测试以及解决“混合模式插入”的问题，因为语义上可能存在差异。
> 
> '在这种锁定模式下，所有“INSERT-like”语句都获得一个特殊的表级 AUTO-INC 锁，用于插入具有 AUTO_INCREMENT 列的表。此锁通常保持到语句的末尾（而不是事务的末尾），以确保为给定的 INSERT 语句序列以可预测和可重复的顺序分配自动递增值，并确保自动递增任何给定语句分配的值都是连续的。

要检查的另一件事是 auto_increment_increment 配置变量的值。默认情况下为 1，但您可能已更改此值。将其设置为高于 1 或 2 的值非常罕见，但有可能。

或者，如果它在您的情况下不起作用，您也可以在同一页面中使用 AnandPhadke 的答案之类的查询，例如：

> ALTER TABLE 表名 AUTO_INCREMENT = 1;
> 插入表名 (col1,col2,col3) 从表名中选择 col1,col2,col3;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-02T12:12:17.563

放入你的 My.cnf：

```
innodb_autoinc_lock_mode=0 
```

# jquery - 切换后地图显示不正确

> ID：12226106
> 
> 赞同：1
> 
> 时间：2012-09-01T08:13:14.470
> 
> 标签：jquery, jquery-ui

我正在使用 jquery-ui-map api。最初，我想隐藏我的地图。所以我将“显示”属性更改为“无”。但是，当我通过 jquery 的 show() 函数显示它时，只有四分之一的地图显示正确。另一方面，如果我不将显示属性设置为无，则没有任何问题。这是一个屏幕截图和我的代码相关的问题部分：

![上部分是初始视图，下部分是调用 show() 之后](../Images/4890c5115aaca6dd2c7c7cfce9d0dec6.png)

```
<div id="map_canvas" style="display : none; width : 100%; height : 300px;"></div>

$("#map_toggle").click( function() 
    {
        if ($("#map_toggle").text() == "Find Address >>>")
            $("#map_toggle").text("Collapse <<<");
        else
            $("#map_toggle").text("Find Address >>>");

        $('#map_canvas').slideToggle("slow");

    }); 
```

顺便说一句，map_canvas div 在表格内。

# python - Python 代码因“Pythonw.exe 停止工作”而崩溃，但在调试模式下工作正常

> ID：12226108
> 
> 赞同：1
> 
> 时间：2012-09-01T08:13:57.543
> 
> 标签：python, debugging, pycharm

我正在处理一个奇怪的问题。我有一些用 Python 编写的大量代码。当我使用 PyCharm 在调试模式下运行它时，它工作正常。但它在 Python IDLE 和 PyCharm IDE 的运行模式下崩溃，并出现一个 Windows 对话框，显示“Pythonw.exe 停止工作”。

我在 Windows 7 32 位中使用 Python 2.6.6 和 PyCharm 2.5 作为我的 IDE。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:06:23.463

这有点不寻常，您是否使用了任何可能导致崩溃的扩展（用 C 编写）？

如果您可以从崩溃的进程中获取堆栈跟踪，您应该能够查看它是否在外部模块或 python 附带的东西中崩溃。您也可以尝试升级到最新的 2.7 版本的 python。如果它真的是 python 中的一个错误，那么它有可能在最新版本中得到修复。

要尝试的另一件事是尝试使用 PyPy、jython、IronPython（前提是您不需要在这些平台上不可用的扩展）和其他操作系统上运行它，这可能会帮助您找出问题所在。

此外，就像 Blender 已经说过的那样，如果您可以发布一些导致问题的代码，人们可能会帮助找到问题。

没有更多信息，很难给出更好的建议。

**更新：** 刚刚看了你提到的pythonocc。看起来它使用了很多 c/c++ 代码，因此在其他 python 实现或版本上对其进行测试可能效果不佳。由于这似乎是某个地方的错误，我建议联系 pythonocc 人员尝试描述您的问题，并希望他们能解决它。

# matlab - 非常简单的 MATLAB 代码，结果不合逻辑

> ID：12226111
> 
> 赞同：2
> 
> 时间：2012-09-01T08:15:02.067
> 
> 标签：matlab

下面是我的 MATLAB 代码，用于生成波速 (c) 的虚部，当雷诺数为 249 并且我想以 2 为步长在 0.1 到 2 之间运行波数 (alpha) 时，使用函数 oscalcpcf。

```
c1holder = [];
c2holder = [];
reyholder = [];
alphaholder = [];
wantedrey = [];
wantedalpha = [];
for Rey = 249
    for alpha = 0.1:0.1:2
        c1=oscalcpcf(Rey,alpha,100);
        c2=oscalcpcf(Rey,alpha,200);
        c1holder = [c1holder c1];
        c2holder = [c2holder c2];    
        reyholder = [reyholder Rey];
        alphaholder = [alphaholder alpha];      
    end
end
vectors = [c1holder' c2holder' reyholder' alphaholder']; 
```

在我看来，上面的代码一点也不难，但是我的笔记本电脑因为一些雷诺数和阿尔法而变得暴躁。只需命名其中一个，`Reynolds number = 249`并且`alpha = 0.3`.

当我运行上面的代码时，我得到`c1 = 6.06002472332094E-08`and `c2 = 0.0000010870344982811`。

现在问题来了。如果我用步骤从`2`到运行，我得到和。`0.1``-0.1``c1 = -0.337584041016646``c2 = 0.0000364854401656638`

`oscalcpcf`如果我要使用, 即`oscalcpcf(249,0.3,100)`and手动检查`oscalcpcf(249,0.3,200)`，我会得到`c1 = -0.337583911335139`and `c2 = -0.337577395716528`。

我真的不知道这里发生了什么，有人可以帮忙！

编辑

```
alpha: 2.000000000000000000000000000000
alpha: 1.899999999999999900000000000000
alpha: 1.800000000000000000000000000000
alpha: 1.700000000000000000000000000000
alpha: 1.600000000000000100000000000000
alpha: 1.500000000000000000000000000000
alpha: 1.399999999999999900000000000000
alpha: 1.299999999999999800000000000000
alpha: 1.200000000000000000000000000000
alpha: 1.100000000000000100000000000000
alpha: 1.000000000000000000000000000000
alpha: 0.899999999999999910000000000000
alpha: 0.799999999999999820000000000000
alpha: 0.699999999999999960000000000000
alpha: 0.599999999999999870000000000000
alpha: 0.500000000000000000000000000000
alpha: 0.399999999999999910000000000000
alpha: 0.299999999999999820000000000000
alpha: 0.199999999999999960000000000000
alpha: 0.099999999999999867000000000000 
```

并且`0.1`为了`2`

```
alpha: 0.100000000000000010000000000000
alpha: 0.200000000000000010000000000000
alpha: 0.300000000000000040000000000000
alpha: 0.400000000000000020000000000000
alpha: 0.500000000000000000000000000000
alpha: 0.599999999999999980000000000000
alpha: 0.700000000000000070000000000000
alpha: 0.800000000000000040000000000000
alpha: 0.900000000000000020000000000000
alpha: 1.000000000000000000000000000000
alpha: 1.100000000000000100000000000000
alpha: 1.200000000000000200000000000000
alpha: 1.300000000000000300000000000000
alpha: 1.400000000000000100000000000000
alpha: 1.500000000000000200000000000000
alpha: 1.600000000000000100000000000000
alpha: 1.700000000000000200000000000000
alpha: 1.800000000000000300000000000000
alpha: 1.900000000000000100000000000000
alpha: 2.000000000000000000000000000000 
```

我的天啊，为什么我的电脑没有给出`0.1`我告诉它这样做的精确步骤。该函数`oscalcpcf`对 中的微小变化非常敏感`alpha`，当我检查我的脚本使用的这些值时，如果我手动执行它，它匹配`oscalcpcf`。你能建议我的电脑给出精确步骤的方法`0.1`吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:10:21.167

我相信你有一个浮点错误，因为你的冒号生成的`0.1:0.1:2`向量。

得到的值不准确`alpha`，因为在给定固定存储大小（例如双精度）的情况下，计算机无法准确表示所有数字。[对于冒号运算符](http://www.mathworks.com/help/techdoc/math/f1-84864.html#f1-85254)尤其如此，这会使不准确性通过向量元素传播。

现在，我不确定这是否会改善您的结果，但根据[COLON 运算符的工作原理](http://www.mathworks.com/support/solutions/en/data/1-4FLI96/?solution=1-4FLI96)，我建议您尝试按以下方式运行循环（类似于我的[这个答案](https://stackoverflow.com/a/10931099/1336150)）：

```
for alpha = ((1:20) / 10) 
```

此外，如果`oscalcpcf()`是一个允许被篡改的函数，我建议您对其进行研究并提高其对输入中微小变化的鲁棒性/敏感性。10 ^(-14) % 的误差绝不会对您的结果产生重大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:18:24.113

尝试这个：

```
alpha = ((1:20) *1e-1). you should get :

0.100000000000000005551115123126 
0.200000000000000011102230246252 
0.300000000000000044408920985006 
0.400000000000000022204460492503 
0.500000000000000000000000000000 
0.600000000000000088817841970013 
0.700000000000000066613381477509 
0.800000000000000044408920985006 
0.900000000000000022204460492503 
1.000000000000000000000000000000 
1.100000000000000088817841970013 
1.200000000000000177635683940025 
1.300000000000000044408920985006 
1.400000000000000133226762955019 
1.500000000000000000000000000000 
1.600000000000000088817841970013 
1.700000000000000177635683940025 
1.800000000000000044408920985006 
1.900000000000000133226762955019 
2.000000000000000000000000000000 
```

结果将精确到双精度标准。此外，如果你有 [matlab 符号工具箱](http://www.mathworks.com/help/toolbox/symbolic/vpa.html)`sym`中的`vpa`函数， 它可能会有所帮助。

# python - supervisor.conf 默认位置

> ID：12226113
> 
> 赞同：21
> 
> 时间：2012-09-01T08:15:26.313
> 
> 标签：python, deployment, configuration, supervisord

我试图进行自动部署，包括 supervisord 和默认设置路径混淆。

`/etc/supervisor/supervisor.conf`我发现使用的每个部署方案都`/etc/supervisor/conf.d/`没有任何预设和链接，此外，在通过 apt-get 安装主管包后，此路径实际上由示例配置填充。

在此[示例](https://github.com/samuelclay/NewsBlur/blob/master/fabfile.py)中，流程看起来像这样，没有任何链接和创建类似`/etc/supervisor.conf`：

```
sudo('apt-get -y install supervisor')
put('config/supervisor_gunicorn.conf', '/etc/supervisor/conf.d/gunicorn.conf', use_sudo=True)
sudo('supervisorctl reload') 
```

但是在`supervisorctl`此路径中未指定为默认路径，并且假定默认位置在附近某处`/etc/supervisor.conf`，因此在[手册中指定](http://supervisord.org/installing.html)

我尝试了所有可能的方式安装主管，但我无法得到结果。

我知道这只是一些愚蠢的小细节，但我将非常感谢您帮助我保持良好的部署方案。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-01T08:44:19.297

*通常*默认文件确实是`/etc/supervisor.conf`.，但[Debian 发行版修补了这个](http://ftp.de.debian.org/debian/pool/main/s/supervisor/supervisor_3.0a8-1.1.diff.gz)（链接到 Debian 提供的 gzipped 补丁）以`/etc/supervisor/supervisor.conf`首先查找：

```
--- supervisor-3.0a8.orig/src/supervisor/options.py
+++ supervisor-3.0a8/src/supervisor/options.py
@@ -105,7 +105,7 @@
     def default_configfile(self):
         """Return the name of the found config file or raise. """
         paths = ['supervisord.conf', 'etc/supervisord.conf',
-                 '/etc/supervisord.conf']
+                 '/etc/supervisor/supervisord.conf', '/etc/supervisord.conf']
         config = None
         for path in paths:
             if os.path.exists(path): 
```

因此，使用该补丁，主管`supervisord.conf`在本地目录中查找，在`etc/`子目录中，然后在全局`/etc/supervisor/`和`/etc/`目录中查找。

Debian安装的默认`supervisord.conf`文件最后有这个：

```
[include]
files = /etc/supervisor/conf.d/*.conf 
```

导致 supervisord 加载放在`conf.d`目录中的任何额外文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-28T01:13:17.433

您可能已经通过 pip 安装了主管，因此在

`/usr/local/lib/python2.7/dist-packages/supervisor/`

优先于补丁版本

`/usr/lib/pymodules/python2.7/supervisor`

有关补丁的详细信息，请参阅 Martjin 的回答。简单的解决方案是：

`pip uninstall supervisor`

然后重新运行包安装，以防它只是部分安装：

`apt-get install supervisor`

还要确保你`/etc/supervisor/supervisord.conf`的存在。如果没有，您可能需要手动重新创建它，我的看起来像这样：

```
; supervisor config file

[unix_http_server]
file=/var/run//supervisor.sock   ; (the path to the socket file)
chmod=0700                       ; sockef file mode (default 0700)

[supervisord]
logfile=/var/log/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log)
pidfile=/var/run/supervisord.pid ; (supervisord pidfile;default supervisord.pid)
childlogdir=/var/log/supervisor            ; ('AUTO' child log dir, default $TEMP)

; the below section must remain in the config file for RPC
; (supervisorctl/web interface) to work, additional interfaces may be
; added by defining them in separate rpcinterface: sections
[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run//supervisor.sock ; use a unix:// URL  for a unix socket

; The [include] section can just contain the "files" setting.  This
; setting can list multiple files (separated by whitespace or
; newlines).  It can also contain wildcards.  The filenames are
; interpreted as relative to this file.  Included files *cannot*
; include files themselves.

[include]
files = /etc/supervisor/conf.d/*.conf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T15:48:12.837

来自ze实际文档：[http ://supervisord.org/configuration.html#configuration-file](http://supervisord.org/configuration.html#configuration-file)

> Supervisor 配置文件通常命名为 supervisord.conf。supervisord 和 supervisorctl 都使用它。如果任一应用程序在没有 -c 选项（用于明确告诉应用程序配置文件名的选项）的情况下启动，应用程序将按指定顺序在以下位置查找名为 supervisord.conf 的文件。它将使用它找到的第一个文件。
> 
> 1.  $CWD/supervisord.conf
> 2.  $CWD/etc/supervisord.conf
> 3.  /etc/supervisord.conf
> 4.  /etc/supervisor/supervisord.conf（从 Supervisor 3.3.0 开始）
> 5.  ../etc/supervisord.conf（相对于可执行文件）
> 6.  ../supervisord.conf（相对于可执行文件）

# joomla - 如何从 joomla 的语言管理器中获取语言？

> ID：12226117
> 
> 赞同：1
> 
> 时间：2012-09-01T08:16:30.927
> 
> 标签：joomla

我如何在 joomla 的语言管理器中安装语言，因为我知道以下内容：

*   getLocal() 为本地机器语言提供未获取应用程序中安装的语言

*   getname() , getTag() 给你当前的语言名称/标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:20:13.990

此代码返回当前语言...

```
$lang =& JFactory::getLanguage();
echo 'Current language is: ' . $lang->getName(); 
```

通过使用以下查询，您可以获得 Joomla 中安装的所有语言。

```
$db =& JFactory::getDbo();
$db->setQuery(
'SELECT sef, title_native' .
' FROM #__languages' .
' ORDER BY sef ASC'
);
$options = $db->loadObjectList(); 
```

* * *

如果您在 joomla 中安装了任何语言，它将使用参数存储到 #__extensions 表中。因此，您可以从以下查询中获取所有已安装的语言...

```
$db =& JFactory::getDbo();
            $query = "SELECT name FROM #__extensions WHERE type='package'";
            $db->SetQuery($query);
            $options = $db->loadObjectList();
            echo "<pre>"; print_r($options); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T17:02:57.120

从 contentlanguage 字段类型：

[http://docs.joomla.org/Standard_form_field_types](http://docs.joomla.org/Standard_form_field_types)

```
JLanguage::getKnownLanguages() 
```

你会得到一个这样的列表：

```
Array
(
    [en-GB] => Array
        (
            [name] => English (United Kingdom)
            [tag] => en-GB
            [rtl] => 0
            [locale] => en_GB.utf8, en_GB.UTF-8, en_GB, eng_GB, en, english, english-uk, uk, gbr, britain, england, great britain, uk, united kingdom, united-kingdom
            [firstDay] => 0
            [weekEnd] => 0,6
        )

    [es-ES] => Array
        (
            [name] => Spanish (español)
            [tag] => es-ES
            [rtl] => 0
            [locale] => es_ES.utf8, es_ES.UTF-8, es_ES, spanish
            [weekEnd] => 0,6
        )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-25T17:14:16.437

此行返回一组已发布语言

```
$languages = JLanguageHelper::getLanguages(); 
```

# java - Wicket - DropDownChoice + ChoiceRenderer - 预选不起作用

> ID：12226118
> 
> 赞同：2
> 
> 时间：2012-09-01T08:16:47.743
> 
> 标签：java, wicket

我正在我的 Web 应用程序中创建一个带有选择框的表单。我以下述方式使用 DropDownChoice + ChoiceRenderer 组合。它工作正常，但一方面 - in 不会预先选择默认值。

我已经为此苦苦挣扎了很长时间。我在互联网上找到了几个据说可以工作但对我不起作用的例子。

我的代码库看起来像这样（不相关的部分已被省略或简化以提高清晰度）：

**商业实体**

```
public class MultivalueType
{
    private Long id;
    private String label;
    private String description;

    public MultivalueType(Long id, String label, String description) 
    {
        this.id = id
        this.label = label;
        this.description = description;
    }

    public Long getId()
    {
        return id;
    }

    public String getLabel() 
    {
        return label;
    }

    public String getDescription() 
    {
        return description;
    }
}

public class PropertySettings
{
    private Long id;
    private String property;
    private MultivalueType multivalueType;

    public PropertySettings(Long id, String property, MultivalueType multivalueType) 
    {
        this.id = id;
        this.property = property;
        this.multivalueType = multivalueType;
    }

    public MultivalueType getMultivalueType()
    {
        return multivalueType;
    }
} 
```

**道**

```
public class PropertySettingsDao
{
    ...
    @Override
    public PropertySettings load(Long id)
    {
        String query = " ... query ... ";
        Object[] params = { id };
        return getJdbcTemplate().queryForObject(query, params, getRowMapper());
}
    ...
} 
```

**表单类**

```
PropertySettings property = propertySettingsDao.load(propertyId);
IModel<PropertySettings> formModel = new CompoundPropertyModel<PropertySettings>(property);

Form<PropertySettings> form = new Form<PropertySettings>("editPropertyForm", formModel)
{
    @Override
    protected void onSubmit()
    {
        PropertySettings propertySettings = this.getModelObject();
        ...         
    }
};

form.add(createEnumSelectbox(multivalueTypeDao, new PropertyModel<MultivalueType>(property, "multivalueType"), "multivalueType", true));

add(form); 
```

**创建选择框**

```
protected DropDownChoice<MultivalueType> createEnumSelectbox(DaoForEntityWithSurrogateKey<MultivalueType> dao, IModel<MultivalueType> model, String componentName, boolean required)
{
    // create the model
    IModel<List<MultivalueType>> choices = createModelForListView(dao);

    // prepare the select-box renderer
    ChoiceRenderer<MultivalueType> renderer = new ChoiceRenderer<MultivalueType>("label", "id");

    // create the select-box component
    DropDownChoice<MultivalueType> selectBox = new DropDownChoice<MultivalueType>
    (
        componentName,
        model,
        choices,
        renderer
    );

    // mark the select-box as a required form field
    selectBox.setRequired(required);

    return selectBox;
}

protected IModel<List<MultivalueType>> createModelForListView(final DaoForEntityWithSurrogateKey<MultivalueType> dao)
{
    return new LoadableDetachableModel<List<MultivalueType>>() 
    {
        @Override
        protected List<BO> load() 
        {
            return dao.loadAll();
        }
     };
} 
```

请注意，我将默认 MultivalueType 实例（冗余）设置为 Form 组件的 CompundPropertyModel 和直接作为 DropDownChoice 组件的模型。根据我在网上找到的，这应该足以让选择框在页面加载时预先选择相应的值，但它不起作用。

我已经验证了 Form 组件中的属性变量（从 DAO 获得）确实包含有效数据。

另请注意，除了预选外，一切正常 - 我在表单的 onSubmit 方法中正确填充了 propertySettings 变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:47:58.680

我终于设法找到了问题所在。

我意识到当我显示表单时，Wicket 会记录以下警告：

```
Model returned object ... which is not available in the list of selected objects. 
```

根据该错误消息，我发现为了使默认选项的预选起作用，业务实体必须覆盖 equals 方法（请参阅[相应的 JIRA 票证](https://issues.apache.org/jira/browse/WICKET-4353)）。至少在我正在使用的 Wicket 版本 1.5.4 中。

希望这可以帮助其他遇到同样问题的人！

# java - **BUSTED** 如何使用 sun.misc.Unsafe 加快 byte[] 查找速度？

> ID：12226123
> 
> 赞同：8
> 
> 时间：2012-09-01T08:17:19.060
> 
> 标签：java, performance, unsafe

我正在尝试使用 Unsafe 来迭代内存，而不是迭代 byte[] 中的值。使用 unsafe 分配内存块。内存足以容纳 65536 个字节的值。

我正在尝试这个：

```
char aChar = some character

if ((byte) 0 == (unsafe.getByte(base_address + aChar) & mask)){
 // do something
} 
```

代替：

```
char aChar = some character

if ((byte) 0 == ( lookup[aChar] & mask )){
 // do something
} 
```

* * *

我*认为*Unsafe 可以比使用常规数组访问更快地访问内存，并为每个索引执行索引检查......

jvm 会有一个特殊的操作（不安全）以某种方式使常规数组访问和迭代更快，这只是一厢情愿。在我看来，jvm 在正常的 byte[] 迭代中运行良好，并且使用正常的、纯粹的、vanilla java 代码尽可能快地完成它们。

@millimoose 击中了众所周知的“头上钉子”

***“不安全可能对很多事情都有用，但这种级别的微优化不是其中之一。——millimoose”***

在非常严格的有限情况下，使用 Unsafe 会更快：

*   （仅限 64 位 jvm）对于每个测试只执行**一次**65535 字节 [] 查找更快。在这种情况下，64 位 jvm 上的 UnsafeLookup_8B 速度提高了 24%。如果测试重复进行，每次测试都进行两次，那么现在正常方法比不安全方法快 30%。在冷 jvm 上的纯解释模式下，Unsafe 到目前为止更快 --- 但只是第一次并且仅适用于小数组大小。在 32 位标准 Oracle JVM 7.x 上，正常比使用 unsafe 快三倍。

使用 Unsafe（在我的测试中）比较慢：

*   在 Oracle java 64 位和 32 位虚拟机上速度较慢
*   较慢的操作系统和机器架构（32 位和 64 位）
*   即使`server`调用了 jvm 选项也更慢

*   Unsafe 比 9% 或更多慢（1_GB 数组和 UnsafeLookup_8B(fastest one) 在下面的 32 位 jvm 代码中（64 位甚至更慢？？））

*   Unsafe 在 64 位 jvm 上低于 234% 或更多（ 1_MB 数组和 UnsafeLookup_1B （最快）在下面的代码中。

这有什么原因吗？**

当我运行下面发布的代码 YellowB 时（检查 1GB 字节 []），正常情况下也是最快的：

```
C:\Users\wilf>java -Xms1600m -Xprof -jar "S:\wilf\testing\dist\testing.jar"
initialize data...
initialize data done!

use normalLookup()...
Not found '0'
time : 1967737 us.

use unsafeLookup_1B()...
Not found '0'
time : 2923367 us.

use unsafeLookup_8B()...
Not found '0'
time : 2495663 us.

Flat profile of 26.35 secs (2018 total ticks): main

  Interpreted + native   Method
  0.0%     1  +     0    test.StackOverflow.main
  0.0%     1  +     0    Total interpreted

     Compiled + native   Method
 67.8%  1369  +     0    test.StackOverflow.main
 11.7%   236  +     0    test.StackOverflow.unsafeLookup_8B
 11.2%   227  +     0    test.StackOverflow.unsafeLookup_1B
  9.1%   184  +     0    test.StackOverflow.normalLookup
 99.9%  2016  +     0    Total compiled

         Stub + native   Method
  0.0%     0  +     1    sun.misc.Unsafe.getLong
  0.0%     0  +     1    Total stub

Flat profile of 0.00 secs (1 total ticks): DestroyJavaVM

  Thread-local ticks:
100.0%     1             Blocked (of total)

Global summary of 26.39 seconds:
100.0%  2023             Received ticks

C:\Users\wilf>java -version
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b11)
Java HotSpot(TM) Client VM (build 23.3-b01, mixed mode, sharing) 
```

CPU 为：Intel Core 2 Duo E4600 @ 2.4GHZ 4.00GB（3.25GB 可用） 操作系统：Windows 7 (32)

在带有 Windows 7_64、32 位 java 的 4 核 AMD64 上运行测试：

```
initialize data...
initialize data done!

use normalLookup()...
Not found '0'
time : 1631142 us.

use unsafeLookup_1B()...
Not found '0'
time : 2365214 us.

use unsafeLookup_8B()...
Not found '0'
time : 1783320 us. 
```

在带有 Windows 7_64、64 位 java 的 4 核 AMD64 上运行测试：

```
use normalLookup()...
Not found '0'
time : 655146 us.

use unsafeLookup_1B()...
Not found '0'
time : 904783 us.

use unsafeLookup_8B()...
Not found '0'
time : 764427 us.

Flat profile of 6.34 secs (13 total ticks): main

  Interpreted + native   Method
 23.1%     3  +     0    java.io.PrintStream.println
 23.1%     3  +     0    test.StackOverflow.unsafeLookup_8B
 15.4%     2  +     0    test.StackOverflow.main
  7.7%     1  +     0    java.io.DataInputStream.<init>
 69.2%     9  +     0    Total interpreted

     Compiled + native   Method
  7.7%     0  +     1    test.StackOverflow.unsafeLookup_1B
  7.7%     0  +     1    test.StackOverflow.main
  7.7%     0  +     1    test.StackOverflow.normalLookup
  7.7%     0  +     1    test.StackOverflow.unsafeLookup_8B
 30.8%     0  +     4    Total compiled

Flat profile of 0.00 secs (1 total ticks): DestroyJavaVM

  Thread-local ticks:
100.0%     1             Blocked (of total)

Global summary of 6.35 seconds:
100.0%    14             Received ticks
 42.9%     6             Compilation 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T04:50:06.157

我认为您发布的两个函数基本相同，因为它们只读取 1 个字节，然后将其转换为 int 并进行进一步比较。

每次读取 4-Byte int 或 8-Byte long 更有效。我写了两个函数来做同样的事情：比较两个 byte[] 的内容，看看它们是否相同：

功能一：

```
public static boolean hadoopEquals(byte[] b1, byte[] b2)
  {
    if(b1 == b2)
    {
      return true;
    }
    if(b1.length != b2.length)
    {
      return false;
    }
    // Bring WritableComparator code local

    for(int i = 0;i < b1.length; ++i)
    {
     int a = (b1[i] & 0xff);
     int b = (b2[i] & 0xff);
     if (a != b) 
     {
       return false;
     }
    }
    return true;
  } 
```

功能二：

```
public static boolean goodEquals(byte[] b1,byte[] b2)
  {   
    if(b1 == b2)
    {
      return true;
    }
    if(b1.length != b2.length)
    {
      return false;
    }
    int baseOffset = UnSafe.arrayBaseOffset(byte[].class);

    int numLongs = (int)Math.ceil(b1.length / 8.0);

    for(int i = 0;i < numLongs; ++i)
    {
      long currentOffset = baseOffset + (i * 8);
      long l1 = UnSafe.getLong(b1, currentOffset);
      long l2 = UnSafe.getLong(b2, currentOffset);
      if(0L != (l1 ^ l2))
      {
        return false;
      }
    }
    return true;    
  } 
```

我在笔记本电脑上运行了这两个函数（corei7 2630QM，8GB DDR3，64bit win 7，64bit Hotspot JVM），比较两个400MB byte[]，结果如下：

功能1：~670ms

功能2：~80ms

2更快。

所以我的建议是每次读取 8 个字节并使用 XOR 运算符（^）：

```
long l1 = UnSafe.getLong(byteArray, offset);  //8 byte
if(0L == l1 ^ 0xFF)  //if the lowest byte == 0?
/* do something */
if(0L == l1 ^ 0xFF00)  //if the 2nd lowest byte == 0?
/* do something */
/* go on... */ 
```

==================================================== ===========================

嗨，Wilf，我使用您的代码制作了一个测试类，如下所示，该类比较了 3 个函数在字节数组中查找第一个 0 的速度：

```
package test;

import java.lang.reflect.Field;

import sun.misc.Unsafe;

/**
 * Test the speed in looking up the 1st 0 in a byte array
 * Set -Xms the same as -Xms to avoid Heap reallocation
 * 
 * @author yellowb
 *
 */
public class StackOverflow
{
    public static Unsafe UnSafe;

    public static Unsafe getUnsafe() throws SecurityException,
            NoSuchFieldException, IllegalArgumentException,
            IllegalAccessException
    {
        Field theUnsafe = Unsafe.class.getDeclaredField("theUnsafe");
        theUnsafe.setAccessible(true);
        Unsafe unsafe = (Unsafe) theUnsafe.get(null);
        return unsafe;
    }

    /**
     * use 'byte[index]' form to read 1 byte every time
     * @param buf
     */
    public static void normalLookup(byte[] buf)
    {
        for (int i = 0; i < buf.length; ++i)
        {
            if ((byte) 0 == buf[i])
            {
                System.out.println("The 1st '0' is at position : " + i);
                return;
            }
        }
        System.out.println("Not found '0'");
    }

    /**
     * use Unsafe.getByte to read 1 byte every time directly from the memory
     * @param buf
     */
    public static void unsafeLookup_1B(byte[] buf)
    {
        int baseOffset = UnSafe.arrayBaseOffset(byte[].class);
        for (int i = 0; i < buf.length; ++i)
        {
            byte b = UnSafe.getByte(buf, (long) (baseOffset + i));
            if (0 == ((int) b & 0xFF))
            {
                System.out.println("The 1st '0' is at position : " + i);
                return;
            }

        }
        System.out.println("Not found '0'");
    }

    /**
     * use Unsafe.getLong to read 8 byte every time directly from the memory
     * @param buf
     */
    public static void unsafeLookup_8B(byte[] buf)
    {
        int baseOffset = UnSafe.arrayBaseOffset(byte[].class);

        //The first (numLongs * 8) bytes will be read by Unsafe.getLong in below loop
        int numLongs = buf.length / 8;
        long currentOffset = 0L;
        for (int i = 0; i < numLongs; ++i)
        {
            currentOffset = baseOffset + (i * 8);  //the step is 8 bytes
            long l = UnSafe.getLong(buf, currentOffset);
            //Compare each byte(in the 8-Byte long) to 0
            //PS:x86 cpu is little-endian mode
            if (0L == (l & 0xFF))
            {
                System.out.println("The 1st '0' is at position : " + (i * 8));
                return;
            }
            if (0L == (l & 0xFF00L))
            {
                System.out.println("The 1st '0' is at position : " + (i * 8 + 1));
                return;
            }
            if (0L == (l & 0xFF0000L))
            {
                System.out.println("The 1st '0' is at position : " + (i * 8 + 2));
                return;
            }
            if (0L == (l & 0xFF000000L))
            {
                System.out.println("The 1st '0' is at position : " + (i * 8 + 3));
                return;
            }
            if (0L == (l & 0xFF00000000L))
            {
                System.out.println("The 1st '0' is at position : " + (i * 8 + 4));
                return;
            }
            if (0L == (l & 0xFF0000000000L))
            {
                System.out.println("The 1st '0' is at position : " + (i * 8 + 5));
                return;
            }
            if (0L == (l & 0xFF000000000000L))
            {
                System.out.println("The 1st '0' is at position : " + (i * 8 + 6));
                return;
            }
            if (0L == (l & 0xFF00000000000000L))
            {
                System.out.println("The 1st '0' is at position : " + (i * 8 + 7));
                return;
            }
        }

        //If some rest bytes exists
        int rest = buf.length % 8;
        if(0 != rest)
        {
            currentOffset = currentOffset + 8;
            //Because the length of rest bytes < 8,we have to read them one by one
            for(; currentOffset < (baseOffset + buf.length); ++currentOffset)
            {
                byte b = UnSafe.getByte(buf, (long)currentOffset);
                if (0 == ((int) b & 0xFF))
                {
                    System.out.println("The 1st '0' is at position : " + (currentOffset - baseOffset));
                    return;
                }
            }
        }
        System.out.println("Not found '0'");
    }

    public static void main(String[] args) throws SecurityException,
            NoSuchFieldException, IllegalArgumentException,
            IllegalAccessException
    {
        UnSafe = getUnsafe();

        int len = 1024 * 1024 * 1024;  //1G
        long startTime = 0L;
        long endTime = 0L;

        System.out.println("initialize data...");
        byte[] byteArray1 = new byte[len];
        for (int i = 0; i < len; ++i)
        {
            byteArray1[i] = (byte) (i % 128 + 1);  //No byte will equal to 0
        }
        //If you want to set one byte to 0,uncomment the below statement
//      byteArray1[2500] = (byte)0;
        System.out.println("initialize data done!");

        System.out.println("use normalLookup()...");
        startTime = System.nanoTime();
        normalLookup(byteArray1);
        endTime = System.nanoTime();
        System.out.println("time : " + ((endTime - startTime) / 1000) + " us.");

        System.out.println("use unsafeLookup_1B()...");
        startTime = System.nanoTime();
        unsafeLookup_1B(byteArray1);
        endTime = System.nanoTime();
        System.out.println("time : " + ((endTime - startTime) / 1000) + " us.");

        System.out.println("use unsafeLookup_8B()...");
        startTime = System.nanoTime();
        unsafeLookup_8B(byteArray1);
        endTime = System.nanoTime();
        System.out.println("time : " + ((endTime - startTime) / 1000) + " us.");
    }
} 
```

输出是：

```
initialize data...
initialize data done!
use normalLookup()...
Not found '0'
time : 1271781 us.
use unsafeLookup_1B()...
Not found '0'
time : 716898 us.
use unsafeLookup_8B()...
Not found '0'
time : 591689 us. 
```

结果表明，即使每次通过 Unsafe.getByte() 读取 1 个字节也比定期迭代 byte[] 快得多。并且读取 8 字节长是最快的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:01:37.413

> 我认为 Unsafe 可以比使用常规数组访问更快地访问内存，并为每个索引执行索引检查......

范围检查可能不是一个因素的一个*可能*原因是 JIT 编译器的优化器。由于数组的大小永远不会改变，优化器可能会“提升”所有范围检查并在循环开始时执行一次。

相比之下，JIT 编译器可能无法优化（例如内联） Unsafe.getByte() 调用。或者该`getByte`方法可能有一个读取障碍......）

然而，这是猜测。确定的方法是让 JVM 为这两种情况转储 JIT 编译的本机代码，并逐条比较它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:39:17.057

不安全的方法可能被标记为原生，但这并不意味着它们一定是 JNI。[对于](http://psy-lob-saw.blogspot.co.uk/2012/10/java-intrinsics-are-not-jni-calls.html)_ _ Sun JVM 它们将被转换为单个汇编指令（在许多情况下），对于其他 JVM，它们可能不擅长处理内在函数，并且可能将它们转换为 JNI 调用或纯 java 调用。据我所知，JRockit 倾向于采用 JNI 方式，Android JVM 也是如此。

# facebook - 如何使用 Facebook 的图形 API 获取朋友的链接？

> ID：12226124
> 
> 赞同：0
> 
> 时间：2012-09-01T08:17:24.937
> 
> 标签：facebook, facebook-graph-api

我为我的访问令牌启用了所有权限，但我无法访问我朋友的链接。

我试过：https://graph.facebook.com/[friend]/links?access_token=[token]

目前不支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:29:34.857

您可以通过使用获取朋友链接

```
https://graph.facebook.com/me?fields=friends.fields(link)&access_token={accesstoken} 
```

[**图形 API 资源管理器**](http://developers.facebook.com/tools/explorer/?method=GET&path=me?fields=friends.fields%28link%29)

# c# - 如果变量存在于任何操作中，则设置 cookie

> ID：12226127
> 
> 赞同：2
> 
> 时间：2012-09-01T08:17:48.403
> 
> 标签：c#, asp.net-mvc-3, arguments

我有几个变量希望在 url 中得到普遍关注。如果它们在 url 中设置，我想设置一个 cookie 来存储此信息。

例如...

`http://www.website.com/?SomeVariable=something`

和

`http://www.website.com/SomeController/SomeAction?SomeVariable=something`

在这两种情况下，我都希望`SomeVariable`得到回应（并且我希望在整个网站的任何控制器/操作上都得到回应。

我已经解决了它的 cookie 部分并在主页上运行，但我现在想将人们放在主页之外的一些 url 上，并且希望在这种情况发生变化时不必重做逻辑。

这可以做到吗？我应该把代码放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:21:08.090

创建一个自定义操作过滤器，然后查找请求变量并在其中设置 cookie。

请参阅[http://msdn.microsoft.com/en-us/library/dd410056(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dd410056(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T08:30:54.857

创建一个将读取变量的自定义控制器，例如

```
public class BaseController:Controller
{
    protected override void ExecuteCore()
    {

      var somevar = HttpContext.Request.QueryString["SomveVariable"];
      .
      .
      .
      base.ExecuteCore();
    }
} 
```

然后从这个自定义控制器派生所有控制器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T08:48:22.517

好的，我最终根据来自 Matt Tew 和 user850010 的信息弄清楚了我需要做什么。

自定义动作过滤器：

```
public class CheckForAd : ActionFilterAttribute {
    public override void OnActionExecuted( ActionExecutedContext filterContext ) {
        var data = filterContext.HttpContext.Request.QueryString["AdName"];

        if( data != null ) {
            HttpCookie aCookie = new HttpCookie( "Url-Referrer" );
            aCookie.Value = data;
            aCookie.Expires = DateTime.Now.AddDays( 2 );
            filterContext.HttpContext.Response.Cookies.Add( aCookie );
        }

        base.OnActionExecuted( filterContext );
    }
} 
```

一旦我有了我的自定义操作过滤器，我就可以去`Global.asax`

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    ...
    filters.Add( new CheckForAd() );
} 
```

这允许我从任何动作/控制器设置 cookie，而无需我装饰动作/控制器。这也不需要我的控制器从标准之外的任何东西派生`Controller`（我不想忘记这一点，然后在需要时没有设置 cookie）。

# java - 计算有多少 HashMap 条目具有给定值

> ID：12226130
> 
> 赞同：16
> 
> 时间：2012-09-01T08:18:20.913
> 
> 标签：java, hashmap, key

```
public final static HashMap<String, Integer> party = new HashMap<String, Integer>();
party.put("Jan",1);
party.put("John",1);
party.put("Brian",1);
party.put("Dave",1);
party.put("David",2); 
```

我怎样才能返回有**多少人**的值**1**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-01T08:29:00.547

我只是在 HashMap 值上使用 Collections.frequency() 方法，就像这样。

```
int count = Collections.frequency(party.values(), 1);
System.out.println(count);
===> 4 
```

或通用解决方案，生成频率与数字的映射。

```
Map<Integer, Integer> counts = new HashMap<Integer, Integer>();
for (Integer c : party.values()) {
    int value = counts.get(c) == null ? 0 : counts.get(c);
    counts.put(c, value + 1);
}
System.out.println(counts);
==> {1=4, 2=1} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-10-07T18:02:10.887

使用 Java 8：

```
party.values().stream().filter(v -> v == 1).count(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T08:22:59.103

尝试这个：

```
int counter = 0;
Iterator it = party.entrySet().iterator();
while (it.hasNext()) {
  Map.Entry pairs = (Map.Entry)it.next();
  if(pairs.getValue() == 1){
    counter++; 
  }      
}
System.out.println("number of 1's: "+counter); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T08:23:28.973

你可以用这个

```
HashMap<String, Integer> party = new HashMap<String, Integer>();
party.put("Jan",1);
party.put("John",1);
party.put("Brian",1);
party.put("Dave",1);
party.put("David",2);

Set<Entry<String, Integer>> set = party.entrySet();
for (Entry<String, Integer> me : set) {
    if(me.getValue()==1)
    System.out.println(me.getKey() + " : " + me.getValue());
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-01T09:07:43.653

[按函数http://code.google.com/p/lambdaj/wiki/LambdajFeatures](http://code.google.com/p/lambdaj/wiki/LambdajFeatures)为很多这样的组尝试这个库

```
HashMap<String, Integer> party = new HashMap<String, Integer>();
    party.put("Jan",1);
    party.put("John",1);
    party.put("Brian",1);
    party.put("Dave",1);
    party.put("David",2);
    List<Integer> list = filter(equalTo(1),party.values());
    System.out.println(list.size()); 
```

您可能需要导入这些 Maven 依赖项

> ```
> <dependency>
>       <groupId>com.googlecode.lambdaj</groupId>
>      <artifactId>lambdaj</artifactId>
>     <version>2.3.3</version> 
> ```

和 hamcrest 匹配器

```
equalTo(1) 
```

# google-maps - 通过将鼠标悬停在地址上触发标记上的鼠标悬停

> ID：12226131
> 
> 赞同：1
> 
> 时间：2012-09-01T08:18:26.120
> 
> 标签：google-maps

当用户将鼠标悬停在地址上时，我试图在标记上调用鼠标悬停事件，但这似乎不起作用。打开这个页面

[http://tinyurl.com/bp94qdy](http://tinyurl.com/bp94qdy)

输入地铁，然后点击去。这是地址中的链接

```
 <a  onmouseover="javascript:google.maps.event.trigger(markersArray['+i+'],onmouseover);" 
```

我还试图在初始化时缩放地图，以便所有标记都适合它，但这给了我一个未定义的 GLatLngBounds 错误。使用的代码是 function calculateCenter() {

```
 /* var latlngbounds = new GLatLngBounds();
  for (var i = 0; i < latlng.length; i++)
   {
       latlngbounds.extend(latlng[i]);
    }
    map.setCenter(latlngbounds.getCenter(), map.getBoundsZoomLevel(latlngbounds));*/
    center = map.getCenter();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T08:33:44.333

查看[**google.maps.event.trigger**](https://developers.google.com/maps/documentation/javascript/reference#event)的语法 这不起作用：

```
<a onmouseover="javascript:google.maps.event.trigger(markersArray['+i+'],onmouseover);" ... 
```

因为事件名称应该是一个字符串，所以：

```
<a  onmouseover="javascript:google.maps.event.trigger(markersArray['+i+'],'onmouseover');" ... 
```

甚至更好，使用 DHTML：

```
var div = document.createElement('DIV');
div.onmouseover = function(i){
google.maps.event.trigger(markersArray[i],'mouseover');
}
div.innerHTML = contentString;
var listContainer = document.getElementById("listingAddress");
listContainer.appendChild(div); 
```

在事件名称两边加上引号。还有另一个错误： `var markerBounds = new GLatLngBounds();` 是 API V2 语法。在 V3 API 中是

```
var markerBounds = new google.maps.LatLngBounds(); 
```

# ios - 内存问题 - 生活与整体 -> 应用程序被杀死

> ID：12226132
> 
> 赞同：0
> 
> 时间：2012-09-01T08:18:41.060
> 
> 标签：ios, memory-management, didreceivememorywarning, xcode-instruments, memory-warning

我正在尝试在 Instruments 中检查我的应用程序内存问题。当我加载应用程序时，我会播放一些声音并在 UIImageViews 中显示一些动画。为了节省一些内存，我只在需要时加载声音，当我停止播放时，我将它从内存中释放出来。

问题1：

我的应用程序使用了大约 5.5MB 的 Living 内存。但是整体部分在开始到 20MB 后开始增长，然后缓慢增长（大约 100kB/秒）。但是负责的库是 OpenAL (OAL::Buffer)、dyld (_dyld_start)——我不确定这到底是什么，还有一些其他的东西，比如 ft_mem_qrealloc、CGFontStrikeSetValue，……

问题2：

当整个部分超过 30MB 时，应用程序崩溃（被杀死）。根据我已经阅读的有关整体内存的事实，这意味着我的所有分配和释放大约是 30MB。但我真的看不出问题所在。例如，当我需要一些声音时，我将它加载到内存中，当我不再需要它时，我释放它。但这意味着当我加载 1MB 声音时，此操作会增加 2MB 的整体内存使用量。我对吗？当我加载 10 种声音时，我的应用程序崩溃只是因为我的总体水平太高，即使生活仍然很低？？？我对此感到非常困惑。

有人可以帮我清理一下吗？

（我在 iOS 5 上并使用 ARC）

一些代码：

创建声音 OpenAL：

```
MYOpenALSound *sound = [[MyOpenALSound alloc] initWithSoundFile:filename willRepeat:NO];

if(!sound)
    return;

[soundDictionary addObject:sound]; 
```

播放：

```
[sound play];

dispatch_after(dispatch_time(DISPATCH_TIME_NOW, ((sound.duration * sound.pitch) + 0.1) * NSEC_PER_SEC), dispatch_get_current_queue(), ^{
[soundDictionary removeObjectForKey:[NSNumber numberWithInt:soundID]];
    });
} 
```

使用 AVAudioPlayer 创建声音：

```
[musics replaceObjectAtIndex:ID_MUSIC_MAP withObject:[[Music alloc] initWithFilename:@"mapMusic.mp3" andWillRepeat:YES]];

pom = [musics objectAtIndex:musicID];
[pom playMusic]; 
```

并停止并释放它：

```
[musics replaceObjectAtIndex:ID_MUSIC_MAP withObject:[NSNull null]]; 
```

和图像动画：我从大 PNG 文件加载图像（这也适用于我的另一个主题：[https](https://stackoverflow.com/questions/12223714/memory-warning-uiimageview-and-its-animations) ://stackoverflow.com/questions/12223714/memory-warning-uiimageview-and-its-animations ）我有几个 UIImageViews 和到时候我正在设置动画数组来播放动画......

```
UIImage *source = [[UIImage alloc] initWithCGImage:[[UIImage imageNamed:@"imageSource.png"] CGImage]];

cutRect = CGRectMake(0*dimForImg.width,1*dimForImg.height,dimForImg.width,dimForImg.height);
image1 = [[UIImage alloc] initWithCGImage:CGImageCreateWithImageInRect([source CGImage], cutRect)];
cutRect = CGRectMake(1*dimForImg.width,1*dimForImg.height,dimForImg.width,dimForImg.height);
...
image12 = [[UIImage alloc] initWithCGImage:CGImageCreateWithImageInRect([source CGImage], cutRect)];

NSArray *images = [[NSArray alloc] initWithObjects:image1, image2, image3, image4, image5, image6, image7, image8, image9, image10, image11, image12, image12, image12, nil]; 
```

我只是简单地使用这个数组：

```
myUIImageView.animationImages = images, ... duration -> startAnimating 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:33:34.543

消除内存泄漏的建议：

1）使用ARC的iOS5功能。

[2）使用此](https://stackoverflow.com/questions/12211158/memory-leak-when-using-cgimagecreatewithjpegdataprovider/12211965#12211965)进一步检查项目中的内存泄漏

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:59:21.450

> MYOpenALSound *sound = [[MyOpenALSound alloc] initWithSoundFile:filename willRepeat:NO];

你永远不会释放这个。您在分配时的保留计数为 1。

在其所在的数组上调用替换或将数组索引设置为 NSNull，不会释放对象。

您必须在存储的声音的每个实例上调用 release。

# java - Web应用程序和应用程序之间的区别？

> ID：12226136
> 
> 赞同：0
> 
> 时间：2012-09-01T08:18:53.860
> 
> 标签：java, google-app-engine, web-applications, heroku

我已经用 Java 构建了一个类似于 iTunes 的音乐商店程序，并希望将其部署到网络上。但是当我去 Heroku App 并查看演示应用程序时，它就完全不同了。他们说我们需要上传一个网络应用程序。在 Google App Engine 中，他们指定我们必须将 Google 插件下载到 Eclipse 和 SDK 并创建一个 Web 应用程序项目。

我正在使用 Eclipse 并且不想再次重写我的整个应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:01:22.207

Web 应用程序是用服务器端语言编码的程序：在 java 的情况下是 PHP、ASP...JSP。不同之处在于，Web 应用程序将驻留在服务器而不是客户端的计算机中，并将处理服务器中的所有内容 - 但是，程序的控制权留给了客户端。Web 应用程序的一个很好的例子就是这个站点。当按下“发布您的答案”按钮时，来自我的客户端计算机的命令将被发送到 Stackoverflow 的 Web 应用程序，并且应该处理发布此答案的所有必要内容将在 Stackoverflow 的服务器上处理。

关于您的应用程序，您有两种选择：

1.  将 UI 与内部逻辑分离，将 UI 重写为 Web 应用程序
2.  不是最好的选择：将您的应用程序转换为小程序并将其嵌入到网页中（您的网络应用程序的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:57:11.910

假设您已经使用 Swing 编写了应用程序，您将需要编写额外的代码以使其作为 Web 应用程序运行。

我建议将演示代码与您的模型和业务逻辑分开。如果你能做到这一点，那么你将需要编写一个新的表示层，然后调整你的模型/业务逻辑代码以支持你决定使用的服务器端架构。

# objective-c - 是否有可能获得 UIControl 的缩放大小？

> ID：12226139
> 
> 赞同：1
> 
> 时间：2012-09-01T08:19:45.997
> 
> 标签：objective-c, uikit

我正在尝试手动制作可以识别用户触摸的自定义控件（如 UIButton）。

所以，当**自定义控件的超层被缩放**时，我想知道用户的触摸点是否包含在自定义控件的框架中。

因此我需要知道自定义控件的缩放大小。

CALayer 是否支持这个属性或功能？

对不起。以前的代码有错误，所以我编辑了如下代码。

```
uiView1 = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)] autorelease];
uiView1.backgroundColor = [UIColor yellowColor];
uiView1.transform = CGAffineTransformScale(uiView1.transform, 2.0, 2.0);

scaledButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
scaledButton.frame = CGRectMake(100, 100, 100, 40);
[scaledButton setTitle:@"Test" forState:UIControlStateNormal];

nonscaledButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
nonscaledButton.frame = CGRectMake(100, 100, 100, 40);
[nonscaledButton setTitle:@"Test" forState:UIControlStateNormal];

[uiView1 addSubview:scaledButton];
[self.view addSubview:uiView1];

[self.view addSubview:nonscaledButton];

NSLog(@"uiButton1 width : %f, height : %f", scaledButton.frame.size.width, scaledButton.frame.size.height);
NSLog(@"uiButton1 width : %f, height : %f", scaledButton.layer.bounds.size.width, scaledButton.layer.bounds.size.height);

NSLog(@"uiButton1 width : %f, height : %f", scaledButton.realFrame(???).size.width, scaledButton.realFrame(???).size.height); 
```

不知道如何获得缩放大小... => scaledButton (200,80)

以下是运行结果。

/Users/nice7285/Library/Caches/appCode10/DerivedData/RealSize-e4f66643/Build/Products/Debug-iphonesimulator/RealSize.app/RealSize 模拟器会话以进程 1567 开始

2012-09-01 16:52:31.124 RealSize [1567:15d03] uiButton1 宽度：100.000000，高度：40.000000

2012-09-01 16:52:31.126 RealSize [1567:15d03] uiButton1 宽度：100.000000，高度：40.000000

![在此处输入图像描述](../Images/882c401dc7fd3160729ca841abb33e07.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:06:19.693

像这样的 CGAffineTransformScale 之后，您会得到 CGRect：

```
 CGAffineTransform newtransform = CGAffineTransformScale([scaledButton transform], 2.0, 2.0);

 CGRect newFame = CGRectApplyAffineTransform(scaledButton.frame, newtransform); 
```

# javascript - 在 Android WebView 中编辑 Dropbox 文件

> ID：12226140
> 
> 赞同：1
> 
> 时间：2012-09-01T08:19:53.907
> 
> 标签：javascript, android, api, webview, dropbox

如何在 WebView 中读取和编辑 Dropbox 文件？

我读到有用于访问 Dropbox 文件的[JS 库。](https://tech.dropbox.com/?p=345)在这种情况下，我不知道它们是否有效，因为不允许某些 JavaScript 操作（如果我的本地 HTML+JS 文件在`raw`文件夹中，则更接近），例如使用[Google Analytics](http://www.google.com/analytics/)。

我也知道 Android 允许使用类似于以下的代码拦截 WebView 上加载的特定网页。

```
browser.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView  view, String  url) {
        return false;
    }
    @Override
    public void onLoadResource(WebView  view, String  url) {
        String needle = "file:///android_asset/interceptedresource.html";
        if(url.startsWith(needle)) {
            url = url.replace(needle, "");
            // here I should access to my Dropbox file, through Dropbox API, and return it to the browser
            // ...
        }
    }
}); 
```

后一种情况可以实现吗？

# mysql - 在 qlik 视图中显示 mysql 表？

> ID：12226142
> 
> 赞同：1
> 
> 时间：2012-09-01T08:20:03.457
> 
> 标签：mysql, qlikview

我将 QlikView 版本 11 与 MySQL 数据库一起使用。

我在 MySQL 中创建了一个数据库和一个表。现在我想在 QlikView 中加载该表。我创建了一个数据源，但我的数据库没有显示在 QlikView 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:54:19.610

在 qlikview 中创建一个新文件 (CTRL+N)。如果出现向导，请单击取消。

现在编辑加载脚本 (CTRL-E)。

在数据选项卡的底部，选择数据库作为 ODBC，然后单击连接，然后检查**显示用户 DSN，如果您在用户 DSN 下创建了数据源**输入凭据，然后单击测试连接，然后按确定。然后按 (Ctrl+E) 并按底部的选择按钮，然后将列出数据库中存在的所有表，选择要加载到 qlikview 的表和列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:34:01.060

我假设您的数据库已启动，您可以通过[odbc](/questions/tagged/odbc "显示标记为“odbc”的问题")连接它。

（我使用 qlikview 的德语用户界面，所以我对菜单条目的翻译可能不完全适合。）

在 clikview 中创建一个新文件 (CTRL+N)。如果向导出现，请单击取消。

现在编辑加载脚本 (CTRL-E)。

在底部，您可以选择您的数据来自哪里。从数据库中选择 ODBC，然后单击连接。

选择您的数据源并输入凭据。之后，您应该测试您的连接！成功测试后，您可以单击“确定”。

现在你的脚本中应该有一个 ODBC 行，像这样

```
ODBC CONNECT TO [Foo;DBQ=bar] (XUserId is UAIAARGJCEEEF, XPassword is DFASDYFSFGbbCWERAB); 
```

现在单击底部数据库部分中的选择按钮。弹出一个窗口，您可以选择所需的列和表。首先尝试该建议，然后单击“确定”。

现在你应该从你的数据库中获得你的第一个 LOAD 命令。

```
LOAD `run_id`,
   `question_id`,
   question; 
SQL SELECT *
FROM foobar.run; 
```

单击“确定”完成脚本的编辑。

按 CTRL+R 重新加载数据。（如果尚未完成，请保存您的 *.qvw 文件。）

现在在您的工作表中单击鼠标右键并为列添加一个列表框。例如本例中的“问题”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-08T12:18:48.140

**步骤 1**
您首先需要安装 ODBC 连接器。按照此[下载链接](https://dev.mysql.com/downloads/connector/odbc/)
**步骤 2**
添加用户 DSN，输入适当的条目。之后跟随这个视频：[视频链接](https://www.youtube.com/watch?v=STsYZHUoFrM)

希望这能解决您的问题。

# datagridview - DataGridView 固定列

> ID：12226144
> 
> 赞同：0
> 
> 时间：2012-09-01T08:20:30.883
> 
> 标签：datagridview, fixed, appearance

我有一个 DataGridView，我用它来从 access 数据库中放入数据。我现在在主表单上，当表单打开时，网格只是灰色的。

但是，当单击按钮时，信息会与列一起显示。我希望在单击按钮之前列存在，因此当打开表单时，您可以看到列减去数据的内容。

我尝试在设计模式下添加列，但是当单击按钮时，其他列只会被添加。

我当前的代码如下。

```
string sConnection = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=Sailing.accdb";
OleDbConnection conSailing = new OleDbConnection(sConnection);
conSailing.Open();

string sQueryShipsPort = "Select ShipName, Weight FROM Ships WHERE Inport = True ;";
OleDbDataAdapter dataadapter = new OleDbDataAdapter(sQueryShipsPort, conSailing);
DataSet ds = new DataSet();

dataadapter.Fill(ds, "Ships Table");
conSailing.Close();
dataGridView1.DataSource = ds;
dataGridView1.DataMember = "Ships Table"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:14:33.570

要解决此问题，您需要做两件事 - 首先，您需要告诉您创建的列与您的数据表的关系。其次，您需要告诉数据网格不要为您生成列。

**将 DataGridView 列数据绑定到数据源**

当您使用设计器将列添加到网格时，您将看到编辑此列的选项。选择此项，您将看到 DataGridViewColumn 的属性列表。

您感兴趣的属性是`DataPropertyName`- 这告诉列要绑定到数据源中的哪个属性。

因此，例如，如果在您的数据表中有一个“名字”列，则需要`DataPropertyName`为添加的网格名字列设置为“名字”。

**停止网格自动生成列**

添加数据源时看到更多列的原因是，添加数据源时`DataGridView`会自动为您生成列。

要关闭此功能，您只需将该`DataGridView`属性设置`AutoGenerateColumns`为 false。这可以通过设计器或通过代码来完成。

（有时你不需要这样做——我发现`DataPropertyName`经常设置 will 就可以了，但是`AutoGenerateColumns`当你不想要它时设置为 false 通常是一个好习惯）

# drupal - 在 Drupal 7 中设置 oauth 模块/登录

> ID：12226146
> 
> 赞同：3
> 
> 时间：2012-09-01T08:20:40.190
> 
> 标签：drupal, login, oauth, drupal-7, facebook-login

我想让我的用户以一种通用且安全的方式从 Facebook/Google+/Twitter 登录。以这样的方式，用户不能被监视。所以我认为一种非常常见的方法是使用 oauth，但这并不像我预期的那样工作。

我不知道如何正确设置[oauth 模块](http://drupal.org/project/oauth)。我还发现了[如何配置服务 OAuth 子模块的问题？](https://drupal.stackexchange.com/questions/1077/how-do-i-configure-the-services-oauth-sub-module)但这个答案非常古老，并以“待续......”声明结束。

到目前为止，我能够理解我需要生成一个上下文（[http://example.org/admin/config/services/oauth/contexts](http://example.org/admin/config/services/oauth/contexts)）和一个[oauth 连接器](http://drupal.org/project/oauthconnector)（[http://example.org/admin/structure/ oauth 连接器](http://example.org/admin/structure/oauthconnector)）。所以我认为我正确设置了它们，但我看不到用户可以在哪里访问它。

你能给我指一个教程或类似的东西吗？我自己找不到合适的词来谷歌。对不起！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-11T04:20:09.340

Drupal 模块说明通常位于资源> 阅读文档部分下的同一模块页面上。这是开始的重要教程之一。所以用[这个](https://www.drupal.org/node/2110825)

# c++ - Visual C++ 输出退出速度如此之快

> ID：12226148
> 
> 赞同：1
> 
> 时间：2012-09-01T08:21:18.893
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, visual-c++-2010

> **可能重复：**
> [Visual Studio 终止我的控制台应用程序太快](https://stackoverflow.com/questions/3726685/visual-studio-terminates-my-console-application-too-fast)

我是 Visual Studio C++ 的 100% 新手。我也是 C++ 的新手，到目前为止，我一直使用 netbeans 和 cygwin。今天我安装了visual C++ 2012并运行了以下简单代码

```
// HelloWorld.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello World" << endl;
} 
```

控制台窗口来了，它来得太快了，我也没有机会看到输出，提到以下内容。

```
'HelloWorld.exe': Loaded 'C:\Users\yohan\Documents\Visual Studio 2010\Projects\HelloWorld\Debug\HelloWorld.exe', Symbols loaded.
'HelloWorld.exe': Loaded 'C:\Windows\System32\ntdll.dll', Cannot find or open the PDB file
'HelloWorld.exe': Loaded 'C:\Windows\System32\kernel32.dll', Cannot find or open the PDB file
'HelloWorld.exe': Loaded 'C:\Windows\System32\KernelBase.dll', Cannot find or open the PDB file
'HelloWorld.exe': Loaded 'C:\Windows\System32\msvcp100d.dll', Symbols loaded.
'HelloWorld.exe': Loaded 'C:\Windows\System32\msvcr100d.dll', Symbols loaded.
The program '[3436] HelloWorld.exe: Native' has exited with code 0 (0x0). 
```

我浏览了互联网，有些人建议将项目属性 > 配置属性 > 链接器 > 调试选项卡 > 生成调试信息设置为“是”。这已经设置为是，但仍然没有好处。我也计划在这个 IDE 中使用 opencv。所以请帮忙！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T08:25:16.437

`cin`编辑：除非您真的想读入输入，否则您显然不应该将 a放入真正的程序中。

发生的事情是您的程序正在打印“Hello World”，正如您告诉它的那样，然后完成。

VS 作为一个 MS 程序，它只会为你的程序创建一个终端，直到它完成，然后它会关闭终端。

为了查看输出，您可以将其放在 cout 之后：

```
string buffer;
cin >> buffer; 
```

这将在终止程序之前等待您按 Enter。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T09:17:06.920

如果您从 IDE 单独运行程序（通过 Ctrl+F5 而不是 F5），它不会在最后关闭控制台窗口，而是会打印“Press any key to continue...”（无需修改源代码反正）。

这种方法的缺点是所有断言和失败都会导致程序崩溃，而不是被 Visual Studio 捕获。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T08:25:33.080

这是在没有打开控制台的情况下调用的控制台应用程序的正常行为。例如，转到您的 system32 文件夹并双击`attrib.exe`.

查看输出的最简单方法是在程序的最后一行设置断点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T08:30:49.637

它被归类为“黑客”，但对于像您这样的简单应用程序，您可以使用以下行：

```
system(“pause”); 
```

它是特定于平台的并且速度很慢，但似乎您在 Windows 上。

断点也是暂停执行的好方法。一旦 Main 执行，您的应用程序就完成了，这就是您所见证的。在 Main 的最后一个花括号上放置一个断点。

```
char a = getchar(); 
```

将暂停并等待您输入一个字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T08:55:38.413

如果您制作控制台应用程序，这是合乎逻辑的 - 尝试从控制台运行您的程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T09:01:25.423

您可以在 main 的末尾放置一个断点，或者 call `getchar()`，或者 `system("pause")`通过控制台执行您的程序

设置断点时，请确保您处于调试模式

# java - 寻找 Amazon DynamoDB java 库

> ID：12226149
> 
> 赞同：2
> 
> 时间：2012-09-01T08:21:45.400
> 
> 标签：java, amazon-dynamodb

我正在寻找一个允许持久性和检索 Java POJO 的 Java 库。

我正在寻找的一些特定功能：

1.  描述 POJO 属性应如何存储的属性的注释机制。
2.  存储、更新和删除方法
3.  简单的 Finder 机制，便于查找数据。
4.  创建/删除表的实用方法

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T00:56:03.997

查看Amazon 提供的[AWS 开发工具包。](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/AboutJava.html)它包含您正在寻找的所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T07:48:00.440

检查[jcabi-dynamo](http://www.jcabi.com/jcabi-dynamo/index.html)，它是 DynamoDB SDK 之上的对象层，例如：

```
Credentials credentials = new Credentials.Simple("AWS key", "AWS secret");
Region region = new Region.Simple(credentials);
Table table = region.table("foo");
Collection<Item> items = table.frame().where("id", Conditions.equalTo(123));
for (Item item : items) {
  System.out.println(item.get("name").getS());
} 
```

# c# - 发布有效数据后从 C# 下载文件

> ID：12226152
> 
> 赞同：2
> 
> 时间：2012-09-01T08:22:11.500
> 
> 标签：c#, php

如果我的 c# 应用程序的用户提供了某些详细信息，我希望他们能够从我的网站下载文件。

我可以在 c# 中使用以下方法下载文件：

```
WebClient webClient = new WebClient();
webClient.DownloadFile("http://www.example.com/download.php", "file.txt"); 
```

我可以使用 webClient.UploadValues 方法上传值，但我不知道如何组合它们。即同时下载文件和发布数据。

download.php 文件包含以下内容：

```
$file = 'file.png';
if ((file_exists($file)) and ($_POST["ID"] == 'abc') ) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
else
header('HTTP/1.0 404 Not Found');
}
?> 
```

我应该如何从 C# 发布数据然后下载文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T08:50:41.813

您必须设置`Content-Type`并传递数据。

```
 WebClient client = new WebClient();
 client.Headers.Add("Content-Type", "application/x-www-form-urlencoded");
 byte []result=client.UploadData("http://www.example.com/download.php",
                                 "POST",
                                  System.Text.Encoding.UTF8.GetBytes("ID=abc"));
 //save the byte array `result` into disk file. 
```

# php - 在mysql数据库中存储路径以进行多次拖放上传

> ID：12226154
> 
> 赞同：0
> 
> 时间：2012-09-01T08:22:38.013
> 
> 标签：php, mysql, file, file-upload, upload

我一直在关注本[教程](http://demo.tutorialzine.com/2011/09/html5-file-upload-jquery-php/)，效果很好，但我想将每个图像的路径存储在 mysql 数据库中。我的代码是

```
$upload_dir = 'uploads/';
$allowed_ext = array('jpg','jpeg','png','gif');

if(strtolower($_SERVER['REQUEST_METHOD']) != 'post'){
exit_status('Error! Wrong HTTP method!');
 }

if(array_key_exists('pic',$_FILES) && $_FILES['pic']['error'] == 0 ){

$pic = $_FILES['pic'];

if(!in_array(get_extension($pic['name']),$allowed_ext)){

            exit_status('Only '.implode(',',$allowed_ext).' files are allowed!');
}   

if(move_uploaded_file($pic['tmp_name'], $upload_dir.$pic['name'])){

    exit_status('File was uploaded successfuly!');
}

 }

 exit_status('Something went wrong with your upload!');

// Helper functions

function exit_status($str){
echo json_encode(array('status'=>$str));
exit;
}

function get_extension($file_name){
$ext = explode('.', $file_name);
$ext = array_pop($ext);
return strtolower($ext);
} 
```

循环文件并插入mysql数据库路径的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:10:03.097

由于您问题的性质，我将首先创建表来存储上传图像的名称。

```
CREATE TABLE IF NOT EXISTS `images` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(30) NOT NULL,
  `date` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

上表只有这几个字段，但如果您认为需要更多字段，您可以稍后随时向表中添加其他字段。
现在是 PHP 部分。

```
$upload_dir = 'uploads/';
$allowed_ext = array('jpg','jpeg','png','gif');

// create the PHP Data Object to communicate with your MySQL database
$host = 'localhost';
$dbname = 'db_name';  // the database name in which you've created the above table  
$user = 'username';  // replace with your username
$pass = 'password';  // same goes for password
$db = new PDO("mysql:host=$host;db=$dbname", $user, $pass);  

if(strtolower($_SERVER['REQUEST_METHOD']) != 'post'){
    exit_status('Error! Wrong HTTP method!');
}

if(array_key_exists('pic',$_FILES) && $_FILES['pic']['error'] == 0 ){

    $pic = $_FILES['pic'];

    if(!in_array(get_extension($pic['name']),$allowed_ext)){
        exit_status('Only '.implode(',',$allowed_ext).' files are allowed!');
    }   

    if($demo_mode){

        // File uploads are ignored. We only log them.

        $line = implode('       ', array( date('r'), $_SERVER['REMOTE_ADDR'], $pic['size'], $pic['name']));
        file_put_contents('log.txt', $line.PHP_EOL, FILE_APPEND);

        exit_status('Uploads are ignored in demo mode.');
    }

    // Move the uploaded file from the temporary
    // directory to the uploads folder:

    if(move_uploaded_file($pic['tmp_name'], $upload_dir.$pic['name'])){
        // now insert the data in the database
        $stm = "INSERT INTO images (name,date) VALUES (:name,:date)";
        $query = $db->prepare($stm);
        $query->execute(array(':name'=>$pic['name'], 
                              ':date'=>date("Y-m-d H:i:s", time())
                              )
                        );
        exit_status('File was uploaded successfuly!');
    }

}

exit_status('Something went wrong with your upload!');

// Helper functions
// ..... 
```

# database-design - 从 Informatica Powercenter Monitor 导出工作流详细信息

> ID：12226157
> 
> 赞同：1
> 
> 时间：2012-09-01T08:23:12.583
> 
> 标签：database-design, data-warehouse, informatica-powercenter, informatica

我是 informatica 的新手。每当我们运行任何工作流程时，其详细信息都会显示在监视器中。每天我都需要手动准备这些详细信息的 Excel 报告。

我想自动化这个过程。

> 对于这项工作，我想知道 Informatica 监视器显示的工作流运行的哪些文件详细信息存储在哪些文件中。这样我就可以构建一个程序，该程序将读取该文件并解释这些值并自动创建一个 Excel 报告，从而避免我的手动工作。

修改 - 通过工作流程的详细信息，我的意思是......

> 1.  作为接口输入提供的记录数。
> 2.  成功处理并发送到目标表的记录数。
> 3.  在此过程中被拒绝的记录数。
> 4.  进入异常表的记录数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:03:57.703

存储库数据库提供一组称为元数据交换 (MX) 视图的视图，这些视图允许 SQL 访问元数据。您需要的信息可以在`REP_SESS_LOG`和中找到`REP_SESS_TBL_LOG`。*您可以在存储库指南*中找到这些视图的详细说明- 您可以在服务器上的 Informatica 安装目录中找到它，或从[Informatica 我的支持站点](https://communities.informatica.com/)下载（您需要是注册用户）。

# c - 结构数组，无法检查条目是否为 NULL

> ID：12226159
> 
> 赞同：1
> 
> 时间：2012-09-01T08:23:26.747
> 
> 标签：c, arrays, pointers, struct

我正在尝试创建自己的哈希表数据结构，但遇到了一个意想不到的问题，我无法解决，也没有找到令人满意的解决方案。

看，我有这个链表结构

```
struct Link
{
   int v;
   struct Link* next;
} 
```

然后在哈希表结构中，我想跟踪数组链表，如下所示：

```
struct Link** entries; 
```

我遇到的是，为了让它工作，我首先必须像这样初始化数组：

```
entries = malloc(sizeof(struct Link*) * N);

for (i = 0; i < N; i++)
   entries[i] = malloc(sizeof(struct Link)); 
```

我想要的是不必执行`for`初始化结构的循环，因为这不是链表的工作方式，我想`entries[x]`留空，直到它实际被赋值。

如果我不执行`for`循环，则会发生这种情况：

```
if (entries[x] != NULL)  /* true, the array is initialized */
  entries[x]->v = value; /* SEGFAULT, there is no struct initialized */ 
```

如果我还没有为它分配一个 Link 结构，那么该`if`语句“应该”返回 false，但它没有。

解决这个问题的一种方法是使用 for 循环初始化链表的所有第一个链接，然后检查值，但这不是我想要的。

那么有谁知道按照我想要的方式解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:27:06.353

好吧，你不能。未初始化的指针不一定`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:31:46.803

您可以使用`calloc`而不是`malloc`在分配时使用`entries`：

```
entries = calloc(sizeof(struct Link*),  N); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:38:02.213

在为指针数组分配空间后，您需要初始化指针数组`malloc()`。您可以使用另一个`for`循环，例如：

```
for (i = 0; i < N; i++)
{
   entries[i] = NULL;
} 
```

或简单地用于`calloc()`分配数组。这会将所有元素设置为`0`.

```
entries = calloc(N, sizeof(struct Link*)); 
```

之后，您需要根据需要分配元素：

```
if (entries[x] == NULL)
{
   entries[x] = malloc(sizeof(struct Link));
}
entries[x]->v = value; 
```

# .htaccess - Htaccess 从一个文件重写到另一个文件

> ID：12226168
> 
> 赞同：1
> 
> 时间：2012-09-01T08:24:17.973
> 
> 标签：.htaccess, redirect

我需要将所有查询重定向到文件 1.php 到文件 2.php。所以我需要如果有人会问 1.php 服务器会给他 2.php。1.php 和 2.php 在同一个文件夹中。

```
RewriteEngine On
RewriteRule ^2.php 1.php 
```

htaccess 中的这段代码不起作用。错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:28:28.527

试试这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?[the folder]/1.php$
RewriteRule ^(/)?$ [the folder]/2.php [L] 
```

# python - 求解包含大量重积分和导数的耦合迭代方程组

> ID：12226171
> 
> 赞同：1
> 
> 时间：2012-09-01T08:24:39.603
> 
> 标签：python, integration, sage, iteration, derivative

我正在尝试解决一个耦合迭代方程系统，每个方程都包含许多积分和导数。

首先，我使用最大值（嵌入 Sage 中）对其进行解析求解，但该解决方案过于依赖于我对未知函数所做的初始猜测，恒定的初始猜测几乎立即产生了响应，而符号函数在用作初始猜测时产生了系统深入计算，有时似乎永无止境。

然而，我用 Sage 尝试的实际上是我原始方程的简化版本，所以我认为可能是我别无选择，只能以数字方式处理积分和导数，但是，我有一些不可忽视的问题：

1.  积分只允许有数值限制，并且不允许变量作为它们的上限（我认为也许数值方法算法比解析算法更快 - 尽管我在其计算中留下了变量或参数，但它只是没有'不能这样工作）。

2.  被积函数也不能承认没有被积分的额外变量和参数。

3.  导数函数本身就是一个很大的障碍，因为我无法计算偏导数或在积分的被积函数中使用导数。

为了摆脱数值导数的所有问题，我用符号 diff() 函数代替它，速度提高仍然有希望，但数值积分的问题仍然存在。

现在我有三个问题：

a-是否可以得出结论，除了离散方程并进行完整的数值处理而不是混合处理之外，我别无他法？

b-如果是这样，那么有什么方法可以自动执行此操作吗？我的方程不是使用 ODEint 的 DE 方程，否则它们是迭代方程，我有积分和导数，只是为了在每一步将我的未知数更新为更新的值。

c-如果我的计算量如此之大，是否有任何关于从 python 切换到 fortran 或类似的东西的建议？

此致

# php - 在 url 模式中使用 / 时的 URL 重写问题

> ID：12226174
> 
> 赞同：0
> 
> 时间：2012-09-01T08:25:46.343
> 
> 标签：php, url-rewriting

我在使用 .htaccess 文件重写 URL 时遇到问题，问题如下。

当我将以下代码放入服务器上的 .htaccess 文件中时

```
RewriteRule ^/?xyz http://google.com [R=301] 
```

我在浏览器中调用 url MY_WEB_DOMAIN.COM/xyza 它会将我重定向到 google.com（如预期的那样）

如果我调用 url MY_WEB_DOMAIN.COM/xyz/abc 我得到 404 错误..

在这两种情况下都不应该重定向到谷歌吗？还是在我的模式中使用 /（斜杠）影响了我的代码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:40:34.553

阿卡沙是对的。用这个：

```
RewriteRule ^/?xyz.* http://www.google.com [R=301] 
```

这 /？使它成为第一个/可选的，在这种情况下这是一种愚蠢的。但是 .* 是你想要捕捉任何匹配 /xyz 的东西-----

如果 arkascha 将其作为答案发布，您应该接受它。我对此进行了测试，效果很好。如果它对您不起作用，请检查 htaccess 中此规则上方的哪些行。你可能有冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:05:14.003

重写工作正常。

我检查了服务器端的标头是否有重写的 URL 并直接调用 url。我发现只有一个变化。

在直接 url 它包含 redirect_url 和 request_uri 是相同的..对于重写的 url 两者都是不同的。（我认为 oxwall 可能正在使用 request_uri 来处理......因为它不是我想要的......

所以我只是让它们与 php 中重写的 url 相同。通过放置行 $_SERVER['REQUEST_URI']=$_SERVER['REDIRECT_URL'];

它完成了。:)

# asp.net - Web 应用程序无法删除 ASP.NET 中已启用读/写的文件夹的文件

> ID：12226179
> 
> 赞同：0
> 
> 时间：2012-09-01T08:27:02.333
> 
> 标签：asp.net, file-io, ftp, shared-hosting

当我尝试删除我通过名为“SampleApplication”的网站上传的图像时，我可以在 Stack Trace 中看到以下错误

```
 The process cannot access the file 'D:\Hosting\123456\html\App_Images\myfolder1\eKuK2511.png' because it is being used by another process.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.IO.IOException: The process cannot access the file 'D:\Hosting\123456\html\App_Images\myfolder1\eKuK2511.png' because it is being used by another process.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[IOException: The process cannot access the file 'D:\Hosting\123456\html\App_Images\myfolder1\eKuK2511.png' because it is being used by another process.]
   System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) +9723350
   System.IO.File.Delete(String path) +9545728
   SampleApplication.BasePage.DeleteApp_ImagesById(DataTable dt) +503
   SampleApplication.PostLease.MyAccount.DeleteAd_Property(Object sender, EventArgs e) +193
   System.Web.UI.WebControls.LinkButton.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +113
   System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +9
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +176
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

文件夹 App_Images 已被授予读/写权限并继承到子文件夹，即 myfolder1、myfolder2、myfolder3、myfolder4。即使我试图从 FTP 文件管理器中强制删除图像 eKuK2511.png，它也会显示以下错误：

```
550 The process cannot access the file because it is being used by another process. 
```

如何摆脱这个错误？

编辑：上传代码：

```
public void UploadImages()
        {
            if (ServerSideValidation() == true)
            {
                string SavePath;
                ImgPaths = new List<string>();
                // Get the HttpFileCollection
                HttpFileCollection hfc = Request.Files;
                if (hfc.Count > 0)
                {
                    for (int i = 0; i < hfc.Count; i++)
                    {
                        HttpPostedFile hpf = hfc[i];
                        if (hpf.ContentLength > 0)
                        {
                            #region trials compression.
                            SavePath = "~/App_Images/" + Session["AppContext"].ToString() + "/" + GetUniqueKey() + GetFileExtension(hpf.FileName);
                            SaveImageByCompressing(hpf, SavePath);

                            #endregion
                            //SavePath can be saved in DB.
                            ImgPaths.Add(SavePath);
                            //Save Thumbnail Image.
                            if (i == 0)
                            {
                                string savedName = "Thumb_" + GetUniqueKey() + GetFileExtension(AppDomain.CurrentDomain.BaseDirectory + ImgPaths[0].ToString().Replace("~/", "\\").Replace("/", "\\"));
                                SavePath = "~/App_Images/" + Session["AppContext"].ToString() + "/" + savedName;
                                SaveThumbImage(AppDomain.CurrentDomain.BaseDirectory + ImgPaths[0].ToString().Replace("~/", "").Replace("/", "\\"), AppDomain.CurrentDomain.BaseDirectory + "App_Images\\" + Session["AppContext"].ToString() + "\\" + savedName, 75, 75);
                                ImgPaths.Add(SavePath);
                            }
                        }
                    }
                    Session.Remove("AppContext");
                    lblMsg.Text = "Images Uploaded Successfully.";
                    //ShowUploadedImages(ImgPaths);
                }
                else
                {
                    lblMsg.Text = "Images uploaded are either in wrong format or were deleted after uploading.";
                }
            }
            else
            {
                lstPaths = new List<string>();
                lblMsg.Text = "No Images Uploaded";
            }
        }

        private void SaveImageByCompressing(HttpPostedFile hpf, string filePath)
        {
            Image imgFromClient = Image.FromStream(hpf.InputStream);
            string SavetoFullPath = AppDomain.CurrentDomain.BaseDirectory + filePath.Replace("~/", "").Replace("/", "\\");
            Image.GetThumbnailImageAbort myCallbackCompressed = new Image.GetThumbnailImageAbort(ThumbnailCallback);
            Image imageToSave= imgFromClient.GetThumbnailImage(imgFromClient.Width, imgFromClient.Height, myCallbackCompressed, IntPtr.Zero);
            imageToSave.Save(SavetoFullPath, System.Drawing.Imaging.ImageFormat.Jpeg);

        }
        public static void SaveThumbImage(string imagePath, string filePath, int width = 0, int height = 0)
        {
            Image originalImage = Image.FromFile(imagePath);
            if (width > 0 && height > 0)
            {
                Image.GetThumbnailImageAbort myCallback = new Image.GetThumbnailImageAbort(ThumbnailCallback);
                Image imageToSave = originalImage.GetThumbnailImage(width, height, myCallback, IntPtr.Zero);
                imageToSave.Save(filePath, System.Drawing.Imaging.ImageFormat.Jpeg);
            }
            else
            {
                originalImage.Save(filePath, System.Drawing.Imaging.ImageFormat.Jpeg);
            }
        }
        private static bool ThumbnailCallback() { return false; }

        private bool ServerSideValidation()
        {
            string errorMsg = string.Empty, temp = null;
            bool errorFlag = true;

            // Get the HttpFileCollection
            HttpFileCollection hfc = Request.Files;
            for (int i = 0; i < hfc.Count; i++)
            {
                HttpPostedFile hpf = hfc[i];
                if (hpf.ContentLength > 0 && hpf.FileName!=String.Empty)
                {
                    temp = ValidateImage(hpf);
                    if (temp != null)
                    {
                        errorMsg += GetFileName(hpf.FileName.ToString()) + " has error : " + temp;
                        temp = null;
                    }
                }
                else
                {
                    return false;
                }
            }

            if (!string.IsNullOrWhiteSpace(errorMsg))
            {
                lblMsg.Text = errorMsg;
                errorFlag = false;
            }
            return errorFlag;
        }

        private string GetFileExtension(string filePath)
        {
            FileInfo fi = new FileInfo(filePath);
            return fi.Extension;
        }

        private string GetFileName(string filePath)
        {
            FileInfo fi = new FileInfo(filePath);
            return fi.Name;
        }

        private string GetUniqueKey()
        {
            int maxSize = 8;
            char[] chars = new char[62];
            string a = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";

            chars = a.ToCharArray();

            int size = maxSize;
            byte[] data = new byte[1];

            RNGCryptoServiceProvider crypto = new RNGCryptoServiceProvider();

            crypto.GetNonZeroBytes(data);
            size = maxSize;
            data = new byte[size];
            crypto.GetNonZeroBytes(data);
            StringBuilder result = new StringBuilder(size);

            foreach (byte b in data)
            {
                result.Append(chars[b % (chars.Length - 1)]);
            }
            return Session["AppContext"].ToString() + Page.User.Identity.Name.ToString() + result.ToString();
        }

        private string ValidateImage(HttpPostedFile myFile)
        {
            string msg = null;
            //6MB
            int FileMaxSize = 6291456;
            //Check Length of File is Valid or Not.
            if (myFile.ContentLength > FileMaxSize)
            {
                msg = msg + "File Size is Too Large. You are allowed only a maximum of 6MB per Image.";
            }
            //Check File Type is Valid or Not.
            if (!IsValidFile(myFile.FileName))
            {
                msg = msg + "Invalid File Type.";
            }
            return msg;
        }

        private bool IsValidFile(string filePath)
        {
            bool isValid = false;

            string[] fileExtensions = { ".BMP", ".JPG", ".PNG", ".GIF", ".JPEG" };

            for (int i = 0; i < fileExtensions.Length; i++)
            {
                if (filePath.ToUpper().Contains(fileExtensions[i]))
                {
                    isValid = true; break;
                }
            }
            return isValid;
        } 
```

删除代码：

```
/// <summary>
        /// Delete all images. If there are no Images then by default NoImage.png is assigned. So skip deleting that image.
        /// </summary>
        /// <param name="dt"></param>
        protected void DeleteApp_ImagesById(DataTable dt)
        {
            if (dt.Rows[0][0].ToString() != "~/images/NoImage.png")
            {
                for (int i = 0; i < dt.Columns.Count; i++)
                {
                    if (dt.Rows[0][i].ToString() != string.Empty)
                    {
                        string str = Regex.Replace(dt.Rows[0][i].ToString(), "~/", "");
                        File.Delete(Request.PhysicalApplicationPath.ToString() + Regex.Replace(str, "/", "\\").ToString());
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:16:46.557

[MSDN 上](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)有关 Image.Save的文档说该文件保持锁定状态，直到图像被处置。

所以我想改变以这种方式保存图像的代码

```
 private void SaveImageByCompressing(HttpPostedFile hpf, string filePath) 
    { 
        using(Image imgFromClient = Image.FromStream(hpf.InputStream))
        { 
            string SavetoFullPath = AppDomain.CurrentDomain.BaseDirectory + 
                                    filePath.Replace("~/", "").Replace("/", "\\"); 
            Image.GetThumbnailImageAbort myCallbackCompressed = 
                                    new Image.GetThumbnailImageAbort(ThumbnailCallback); 
            using(Image imageToSave= imgFromClient.GetThumbnailImage(imgFromClient.Width,
                                    imgFromClient.Height, myCallbackCompressed, IntPtr.Zero))
            {
                 imageToSave.Save(SavetoFullPath, System.Drawing.Imaging.ImageFormat.Jpeg); 
            }
        }
    } 

    public static void SaveThumbImage(string imagePath, string filePath, 
                                      int width = 0, int height = 0)   
    {   
        using(Image originalImage = Image.FromFile(imagePath))
        {
            if (width > 0 && height > 0)   
            {   
                Image.GetThumbnailImageAbort myCallback = 
                      new Image.GetThumbnailImageAbort(ThumbnailCallback);   
                using(Image imageToSave = originalImage.GetThumbnailImage(width, height, 
                                    myCallback, IntPtr.Zero))
                {
                    imageToSave.Save(filePath, System.Drawing.Imaging.ImageFormat.Jpeg);   
                }
            }   
            else   
            {   
                originalImage.Save(filePath, System.Drawing.Imaging.ImageFormat.Jpeg);   
            }   
        }   
     } 
```

是一种确保您的图像在完成上传代码后立即解锁的安全方法

# android - 果冻豆和 ICS 模拟器无法打开

> ID：12226185
> 
> 赞同：0
> 
> 时间：2012-09-01T08:27:39.967
> 
> 标签：android, android-emulator, android-4.2-jelly-bean

我正在使用 Eclipse IDE 并添加了 ADT 插件。我为 Android 2.2 Froyo、2.3 Ginger Bread、4.0 ICS、4.1 Jelly Beans 创建了模拟器。

在这里，Froyo 和 Ginger 工作正常，当我启动 ICS Emulator 时，它需要很长时间才能开始工作，速度非常慢，果冻豆还没有工作。当我启动 Jelly Beans Emulator 时出现这样的错误，

```
Starting emulator for AVD 'JF'
Failed to allocate memory: 8
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

我的系统配置是 Ram 4GB Core i5 64 bit Window XP SP2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T18:57:48.350

您是否尝试过增加分配的内存？也许到 256、512 或 1024？

此外，您可能想[检查一下](https://stackoverflow.com/questions/5969067/android-failed-to-allocate-memory)。

# javascript - 我可以在javascript中为新打开的窗口获取任何唯一标识吗？

> ID：12226191
> 
> 赞同：-1
> 
> 时间：2012-09-01T08:28:36.573
> 
> 标签：javascript, window, unique

我想为每个窗口保留单独的值，并且该窗口的值应该保持相同，尽管我重新加载了该窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:45:09.140

[`window.open`](https://developer.mozilla.org/en-US/docs/DOM/window.open)将返回一个`windowObjectReference`您可以使用的所有[`window`](https://developer.mozilla.org/en-US/docs/DOM/window)操作。

因此，如果您想打开并重新加载一个窗口，您可以这样做：

```
var myWindow = window.open("http://whatever");
myWindow.location.reload(true); 
```

您可能还想阅读有关[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:53:59.400

尝试这个：

```
 var winArr = { keys:[] , values:[] };

    var newWindowForOpen= 'http://stackoverflow.com/questions/12226191/can-i-get-any-unique-identity-for-new-opened-window-in-javascript';
    var winExist=false;

    for(var i = 0; i < winArr.keys.length; i++){
       if(winArr.keys[i] === newWindowForOpen){
           winExist = true;
        }
    }

   if(!winExist){
    winArr.keys.push(newWindowForOpen);
    var obj={}; // contais information about an open window, your window information 
    winArr.values.push(obj);
    } 
```

我希望这个对你有用。

# android - 从 AsyncTask 返回结果

> ID：12226192
> 
> 赞同：0
> 
> 时间：2012-09-01T08:28:39.323
> 
> 标签：android, android-asynctask

```
public int postToTwitter(String msg) {
    String url = null;

    new ImageSender().execute();
    // Twitlink I have to pass in next line but it showing null
    twitter.updateStatus(msg+" "+twitlink);

    return 1;
} 
```

异步任务类：

```
private class ImageSender extends AsyncTask<URL, Integer, Long> {
    private String url;

    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(OutgoingHome.this, "", "Sending image...", true);
        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
    }

    protected Long doInBackground(URL... urls) {            
        long result = 0;

        ImageUpload upload = ImageUpload.getTwitpicUploader ("8b8f5db5ca383798509af8459f968dbc",auth);
        try {
            twitlink = upload.upload(new File(path));
            result = 1;
        } catch (Exception e) {        

        }

        return result;
    }

    protected void onPostExecute(Long result) {
        mProgressDialog.cancel();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:58:54.650

最简单的方法是`get()`使用`AsyncTask`. 另一种方法是实现一个`OnResultListener`并`onResult()`在`AsyncTask` `onPostExecute()`. 但是，第一个解决方案应该足够了。希望这可以帮助。

# perl - 如果您准备好 perl 脚本（在 Windows 中），那么从命令行运行它 100 次并收集它产生的数据的最佳方法是什么？

> ID：12226195
> 
> 赞同：1
> 
> 时间：2012-09-01T08:28:54.987
> 
> 标签：perl, command-line, batch-file, command-prompt

我在 Windows 中编写了一个 perl 脚本，它产生一两行输出。

我希望能够从命令行运行脚本 n=100 次，而不需要在脚本中进行更多编码（除非有简单的方法）并收集输出？有人建议我可能需要一个批处理文件？

基本上，有没有简单的方法：

`[perl script.pl >> output + [Enter Key]] # n times in cmd`

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:35:19.900

您可以在批处理文件中使用 FOR 循环：

```
for /L %%N IN (1, 1, 100) DO perl script.pl >> output.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T09:15:29.787

只需在您的代码周围包裹一个 for 循环：

```
#!/your/perl

for ( my $i = 0; $i < 100; $i++ ) {
    # YOUR ORIGINAL PERL CODE HERE
} 
```

# r - 如何在 R 括号表示法中使用函数变量？

> ID：12226197
> 
> 赞同：2
> 
> 时间：2012-09-01T08:29:00.697
> 
> 标签：r, plyr

我正在尝试计算一些简单的比率并使用 R 的括号符号来表示比率的基线。

现在我正在努力定义一个让我参数化基线的函数。我不想硬编码它，因为我有几个。而且，我真的不明白 R 到底在做什么，我很好奇如何实现所需的行为。

这里有一些基于示例数据的代码：

```
data("singer", package = "lattice")

# this is what I want, but what currently doesn't work
my_ratio <- function(voice) {
  ddply(singer, ~ voice.part,
        transform,
        # how do I refer to the voice variable here?
        # it looks like it misunderstands it as column?
        ratio = height / mean(height[voice.part == voice]))
}

# this version works with a hardcoded voice part
my_ratio_hard <- function() {
  ddply(singer, ~ voice.part,
        transform,
        ratio = height / mean(height[voice.part == "Soprano 1"]))
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:37:27.887

**这不是我想要的，但在其他情况下可能会有所帮助。**

问了这个问题后，我发现[了一些东西](https://stackoverflow.com/questions/8869005/how-can-i-use-variable-names-to-refer-to-data-frame-columns-with-ddply)：

为了能够引用变量，而不是数据框、对象等的一部分，可以使用点括号表示法：`.(voice)`是解决方案。因此，正确的函数定义如下所示：

```
my_ratio <- function(voice) {
  ddply(singer, ~ voice.part,
        transform,
        ratio = height / mean(height[voice.part == .(voice)]))
} 
```

但是，它不会导致与使用文字字符串相同的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:24:23.223

这个怎么样：

```
my_ratio <- function(voice) {
  my_transform <- function(x) {
    transform(x, ratio = height / mean(height[voice.part == voice]))
  }
  ddply(singer, ~voice.part, my_transform)
} 
```

您真的只想缩放匹配的行`voice`并在`NaN`其他地方拥有（这也是您的硬编码函数所做的）？

上述更紧凑的版本：

```
my_ratio <- function(voice) {
  ddply(singer, ~voice.part, 
    function(x) transform(x, ratio = height/mean(height[voice.part == voice])))
} 
```

如果您真的想缩放所有记录（如您的评论所示）：

```
my_ratio <- function(voice) {
  scale <- with(singer, mean(height[voice.part == voice]))
  ddply(singer, ~voice.part, 
    function(x) transform(x, ratio = height / scale))
} 
```

# java - 程序未访问扩展 JPanel 类的方法 paintComponent()

> ID：12226198
> 
> 赞同：5
> 
> 时间：2012-09-01T08:29:04.103
> 
> 标签：java, swing, jframe, jpanel, repaint

这是`JFrame`

```
package client.connection;

import java.awt.Dimension;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import javax.swing.JFrame;

class DrawFrameRemoteControl extends JFrame
{
    private DrawPanelRemoteControl imagePanel;
    private ClientRemoteControlConnection clientRemoteControlConnection;
    private ObjectInputStream clientInputStream;
    private ObjectOutputStream clientOutputStream;
    private Dimension imageDimension;
    private Dimension serverDimension;

    public DrawFrameRemoteControl(Dimension imageDimension,ClientRemoteControlConnection clientRemoteControlConnection,ObjectInputStream clientInputStream,ObjectOutputStream clientOutputStream,Dimension serverDimension)
    {
        super("Remote Desktop Control");

        this.clientRemoteControlConnection=clientRemoteControlConnection;
        this.clientInputStream=clientInputStream;
        this.clientOutputStream=clientOutputStream;
        this.imageDimension=imageDimension;
        this.serverDimension=serverDimension;

        imagePanel=new DrawPanelRemoteControl(imageDimension);
        add(imagePanel);

        setSize(imageDimension.width,imageDimension.height);
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);
        setLocationRelativeTo(null);
    }

    void drawNewImageGrayscale(byte[] array)
    {
        imagePanel.setNewImageGrayscale(array);
        imagePanel.repaint();
    }
} 
```

这是扩展的 JPanel 类-

```
package client.connection;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.Transparency;
import java.awt.color.ColorSpace;
import java.awt.image.BufferedImage;
import java.awt.image.ColorModel;
import java.awt.image.ComponentColorModel;
import java.awt.image.DataBuffer;
import java.awt.image.DataBufferByte;
import java.awt.image.MemoryImageSource;
import java.awt.image.Raster;
import java.awt.image.SampleModel;
import java.awt.image.WritableRaster;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;

class DrawPanelRemoteControl extends JPanel
{
    private byte[] byteArray=null;
    private Image image;
    private JLabel imageLabel=new JLabel();
    private Dimension imageDimension;

    public DrawPanelRemoteControl(Dimension imageDimension)
    {
        this.imageDimension=imageDimension;
        add(imageLabel);
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        System.out.println(".");
        if(byteArray!=null)
        {
            image=getGrayscaleImageFromArray(byteArray,imageDimension.width,imageDimension.height);
            imageLabel.setIcon(new ImageIcon(image));
        }
    }

    private Image getGrayscaleImageFromArray(byte[] buffer, int width, int height)
    {
        ColorSpace cs = ColorSpace.getInstance(ColorSpace.CS_GRAY);
        int[] nBits = { 8 };
        ColorModel cm = new ComponentColorModel(cs, nBits, false, true,Transparency.OPAQUE, DataBuffer.TYPE_BYTE);
        SampleModel sm = cm.createCompatibleSampleModel(width, height);
        DataBufferByte db = new DataBufferByte(buffer, width * height);
        WritableRaster raster = Raster.createWritableRaster(sm, db, null);
        BufferedImage result = new BufferedImage(cm, raster, false, null);
        return result;
    }

    void setNewImageGrayscale(byte[] array)
    {
        this.byteArray=array;
        this.intArray=null;
    }
} 
```

我试过调试代码，即使`imagePanel.repaint()`被执行了很多次，程序也永远不会到达类的`paintComponent()`方法`DrawPanelRemoteControl`。

谁能告诉我为什么会发生这种情况？和`imageDimension`对象有关系吗？

**附加信息：**在`main()`方法中，`DrawFrameRemoteControl`创建了一个对象，并且它的方法每秒`drawNewImageGrayscale(byte[] arr)`都在更新。`main()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T14:39:27.817

目前尚不清楚您为什么要四处走动`byte[]`，但看起来您想`Icon`用灰色缩略图更新组件。下面的示例从现有示例图标创建灰度图标并用于`setIcon()`进行更新。类似的方法适用于任何`Image`. 另请参阅这个建议的[示例](https://stackoverflow.com/a/3106550/230513)`ColorConvertOp`，以及更新整个组件而不是图标的这个[示例。](https://stackoverflow.com/a/7935040/230513)

![灰色图标 Aqua](../Images/d5b31743d3c340437df9eb70123bfafd.png)

![灰色图标 Nimbus](../Images/24bf14f4757266880476fd6f74bc86a5.png)

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.awt.image.ColorConvertOp;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JToggleButton;
import javax.swing.Timer;
import javax.swing.UIManager;

/**
 * @see https://stackoverflow.com/a/12228640/230513
 * @see https://stackoverflow.com/a/7935040/230513
 */
public class GrayIcons extends JPanel {

    private List<Icon> list = new ArrayList<Icon>();
    private List<JToggleButton> buttons = new ArrayList<JToggleButton>();
    private Timer timer = new Timer(1000, new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            update();
        }
    });

    public GrayIcons() {
        this.setLayout(new GridLayout(1, 0));
        list.add(getGray(UIManager.getIcon("OptionPane.errorIcon")));
        list.add(getGray(UIManager.getIcon("OptionPane.informationIcon")));
        list.add(getGray(UIManager.getIcon("OptionPane.warningIcon")));
        list.add(getGray(UIManager.getIcon("OptionPane.questionIcon")));
        for (Icon icon : list) {
            JToggleButton jtb = new JToggleButton(icon);
            buttons.add(jtb);
            this.add(jtb);
        }
        timer.start();
    }

    private void update() {
        Collections.shuffle(list);
        int index = 0;
        for (JToggleButton b : buttons) {
            b.setIcon(list.get(index++));
        }
    }

    /**
     * @see https://stackoverflow.com/q/5830533/230513
     * @see https://stackoverflow.com/a/3106550/230513
     */
    private Icon getGray(Icon icon) {
        final int w = icon.getIconWidth();
        final int h = icon.getIconHeight();
        GraphicsEnvironment ge =
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();
        GraphicsConfiguration gc = gd.getDefaultConfiguration();
        BufferedImage image = gc.createCompatibleImage(w, h);
        Graphics2D g2d = image.createGraphics();
        g2d.setPaint(new Color(0x00f0f0f0));
        g2d.fillRect(0, 0, w, h);
        icon.paintIcon(null, g2d, 0, 0);
        BufferedImage gray = new BufferedImage(w, h, BufferedImage.TYPE_BYTE_GRAY);
        ColorConvertOp op = new ColorConvertOp(
            image.getColorModel().getColorSpace(),
            gray.getColorModel().getColorSpace(), null);
        op.filter(image, gray);
        return new ImageIcon(gray);
    }

    private void display() {
        JFrame f = new JFrame("GrayIcons");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new GrayIcons().display();
            }
        });
    }
} 
```

# javascript - 最小的 CommonJS 实现

> ID：12226199
> 
> 赞同：6
> 
> 时间：2012-09-01T08:29:10.603
> 
> 标签：javascript, desktop, commonjs

我想`CommonJS`在我的一些脚本中使用一些兼容的模块。这些脚本只是为了在我的笔记本电脑上做事：它不在浏览器中，也不在服务器中。我只是操纵`mongodb`我在本地使用的一个。

所以我想知道，最好的方法是什么？我只发现了提供 CommonJS 功能**和**mongo shell 的过时包装器。

我应该对`require`系统进行手动编码吗？我应该手动编写解决方法吗？是否已经存在最小加载程序？

当然，您对此事的所有想法都会受到赞赏。

指向实现 CommonJS 其他部分的指针也将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T08:55:43.380

@猫

您应该尝试[http://code.google.com/p/gpsee/](http://code.google.com/p/gpsee/) ，它具有用于嵌入 SpiderMonkey 和 CommonJS 的通用 C API。

# android - Android位图像素 - 直接写入文件？

> ID：12226201
> 
> 赞同：6
> 
> 时间：2012-09-01T08:29:31.020
> 
> 标签：android, image, opengl-es, bitmap, memory-optimization

背景：

目标是使用 OpenGL 渲染数据编写一个相当大（至少 2048 x 2048 像素）的图像文件。

今天我首先使用 glReadPixels 将 32 位（argb8888）像素数据放入一个 int 数组中。

然后我将数据复制到一个新的短数组中，将 32 位 argb 值转换为 16 位 (rgb565) 值。此时我也将图像倒过来，改变颜色顺序，使opengl-image数据与android位图数据兼容（不同的行顺序和颜色通道顺序）。

最后，我创建了一个 Bitmap() 实例和 .copyPixelsFromBuffer(Buffer b) 以便能够将其作为 png 文件保存到磁盘。

但是，我想更有效地使用内存，以避免某些手机上的内存不足崩溃。

* * *

问题：

1.  我可以以某种方式跳过从 int[] -> short[] 的第一次转换（并避免为像素数据分配新数组）吗？也许只是使用字节数组/缓冲区并将转换后的像素写入我读取的同一个数组......

2.  更重要的是：我可以跳过位图创建（程序崩溃的地方）并以某种方式将数据作为工作图像文件直接写入磁盘（并避免在位图对象中再次分配像素数据）？

编辑：如果我可以将数据直接写入文件，也许我不需要转换为 16 位像素数据，具体取决于文件大小以及稍后将文件读入内存的速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:02:44.760

我不确定这是否有帮助，但是这个[PNGJ](https://code.google.com/p/pngj/)库允许逐行顺序编写 PNG。如果您主要关心的是内存使用情况（并且如果您可以从渲染数据中按照最终 PNG 文件的顺序访问像素值），它可能会很有用。

# extjs - Extjs - 网格连续显示加载掩码

> ID：12226202
> 
> 赞同：0
> 
> 时间：2012-09-01T08:29:36.083
> 
> 标签：extjs, grid, panel

我正在使用 extjs(4.1.0) MVC 。我有一个使用组合框过滤器、日期选择器过滤器等设置的自定义网格。我正在附加来自控制器、视图和存储的片段。

传入的响应与模型不同，因此，响应通过覆盖故事代理的 read() 来拦截。此外，数据需要作为 Json 数据在 payload 中发送，因此 store 代理的 buildRequest() 也被覆盖以将 json 数据添加到请求中。（所有排序，分页参数也在这里添加）添加到这个 - 视图具有无限滚动。

视图第一次加载良好。但是在组合框更改/日期更改时，将重新加载存储并在请求中将这些作为 json 参数传递。

我在 firebug/chrome 中看到 XHR 中的响应，但网格不断显示加载掩码，等待加载。请帮助解决可能出现的问题。

```
Ext.define('Message.store.ListingStore', {
extend: 'Ext.data.Store',
model: 'Message.model.ListingModel',
autoLoad: true,
remoteSort: true,
purgePageCount:0,
buffered: true,....
.......
proxy: {
    type: 'ajax',
    actionMethods: {
        read: 'POST'
        },
    url: 'http://localhost:8080
    buildRequest: function(operation) {
    Ext.apply(request, {
       params: null,
       jsonData: Ext.apply(request.params, {
           page: operation.page,
           start: operation.start,
           limit: operation.limit,
           catId:catValue,
           sort:operation.sorters[0].property,
           dir:operation.sorters[0].direction
       })
   });
   ........return request;
   }
   root: 'data',
        totalProperty:'total',
        successProperty :'success'
    },
.....
});

//controller

Ext.define('Message.controller.Listing', {
extend:'Ext.app.Controller',
stores:          ['ListingStore','SubscriptionStore','SubCategoryMasterStore','PriorityMasterStore'],
models: ['ListingModel'],
views: [
        'MessageListing'
    ],
init:function () {
    var controller = this;
'messagelisting  combo' : {
            select : this.handleComboSelect
        },

        'messagelisting  datefield' : {
            select : this.handleDateSelect
        },
 .....
 handleComboSelect : function(gridview, el, rowIndex, colIndex, e, rec, rowEl) {
    this.getStore('ListingStore').load();
},

handleDateSelect: function(gridview, el, rowIndex, colIndex, e, rec, rowEl) {
    this.getStore('ListingStore').load({callback: function(response){

    }}); 
```

这是一个非常复杂的案例，所以我无法发布整个代码。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:47:32.760

我想你有我在这里描述的问题：
[http ://www.sencha.com/forum/showthread.php?242445-Grid-filters-race-conditions-FiltersFeature](http://www.sencha.com/forum/showthread.php?242445-Grid-filters-race-conditions-FiltersFeature)

问候， 阿列克

# mongodb - 使用 mongodb 进行索引：性能不佳 / indexOnly=false

> ID：12226205
> 
> 赞同：2
> 
> 时间：2012-09-01T08:30:23.240
> 
> 标签：mongodb, indexing

我在运行 8GB linux 机器上有一个 mongodb。目前它处于测试模式，因此几乎没有其他请求进入（如果有的话）。

我有一个收藏品，里面有 100 万份文件。我正在以下字段上创建索引：PeerGroup 和 CategoryIds（这是一个由 3-6 个元素组成的数组，将在多键中产生）`db.items.ensureIndex({PeerGroup:1, CategoryIds:1}`：。

当我查询时

```
db.items.find({"CategoryIds" : new BinData(3,"xqScEqwPiEOjQg7tzs6PHA=="), "PeerGroup" : "anonymous"}).explain() 
```

我有以下结果：

```
{
    "cursor" : "BtreeCursor PeerGroup_1_CategoryIds_1",
    "isMultiKey" : true,
    "n" : 203944,
    "nscannedObjects" : 203944,
    "nscanned" : 203944,
    "nscannedObjectsAllPlans" : 203944,
    "nscannedAllPlans" : 203944,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 1,
    "nChunkSkips" : 0,
    "millis" : 680,
    "indexBounds" : {
            "PeerGroup" : [
                    [
                            "anonymous",
                            "anonymous"
                    ]
            ],
            "CategoryIds" : [
                    [
                            BinData(3,"BXzpwVQozECLaPkJy26t6Q=="),
                            BinData(3,"BXzpwVQozECLaPkJy26t6Q==")
                    ]
            ]
    },
    "server" : "db02:27017" 
```

}

我认为680ms并不是那么快。或者这是可以接受的吗？另外，为什么说 "indexOnly:false" ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T12:40:10.067

> 我认为680ms并不是那么快。或者这是可以接受的吗？

这取决于这些物体有多大以及这是否是第一次运行。假设您返回的整个数据集（包括索引）都适合内存，那么下次运行时它们将是一个内存查询，然后基本上会尽可能快地返回。nscanned 很高意味着这个查询不是很有选择性，大多数记录在 PeerGroup 中是否会有一个“匿名”值？如果是这样，并且 CategoryId 更具选择性，那么您可以尝试使用索引`{CategoryIds:1, PeerGroup:1}`（使用[hint()](http://www.mongodb.org/display/DOCS/Optimization#Optimization-Hint)来尝试一个与另一个）。

> 另外，为什么说“indexOnly：false”

这只是表示您希望返回的所有字段都不在索引中，`BtreeCursor`表示索引已用于查询（BasicCursor 表示它没有）。要使这是一个`indexOnly`查询，您只需`{_id : 0, PeerGroup:1, CategoryIds:1}`在您的[projection](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)中返回索引中的两个字段（即：） 。这意味着它永远不必接触数据本身，并且可以仅从索引中返回您需要的所有内容。

# c# - 移动远程程序

> ID：12226210
> 
> 赞同：1
> 
> 时间：2012-09-01T08:31:15.910
> 
> 标签：c#, java, android

我正在编写一个移动远程程序，移动设备的触摸屏将是远程计算机鼠标。我将 android 用于移动设备，将 C# 用于服务器端编程。

问题：

*   如何在手机和电脑之间建立连续传递鼠标位置而不停止的数据连接？

我发现[32feet.net](http://32feet.codeplex.com/)是关于蓝牙的免费类库，但我无法解决我的问题。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:24:06.110

您必须建立客户端服务器连接并通过蓝牙套接字发送信息。因此，您需要一个 C# 蓝牙 API，或者如果它不存在，您可以使用套接字编写自己的。

我认为让你的生活更轻松的是在服务器端使用 Java 而不是 C#，因为 android 使用 Java，这就是我的观点。

但我建议您阅读更多有关蓝牙协议如何与 android 和 C# 协同工作的信息 这里有 2 个链接可能会帮助您入门。

[C# 和蓝牙编程](https://stackoverflow.com/questions/824357/c-sharp-and-bluetooth-programming)

[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

我希望这对你有帮助。

# web - 缩略图内容管理系统 (CMS)？

> ID：12226211
> 
> 赞同：0
> 
> 时间：2012-09-01T08:31:18.793
> 
> 标签：web, content-management-system

您好我正在寻找一个 CMS，它可以让我根据类别添加/查看项目。就像一个购物车，但比这简单得多。我正在做一个需要根据电影类型对电影进行分类的项目。因此，会有动作，浪漫等类别。在每个类别下，我需要显示一个图像/视频和一些关于电影的文本。哪个 CMS 允许我这样做？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:25:36.463

我们公司已经有一个 CMS 可以促进这一点。其中一个客户是一家拥有在线电子商务网站的视频/游戏和娱乐公司。

您可以通过我们的网站 www.monadel.com 联系我们。

但是，我们是 B2B，您可能正在寻找免费软件——我们目前不提供。

祝你在你的努力中取得成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:41:15.000

我建议你根据`Joomla`你的要求使用。Joomla 有很多组件和模块可以满足您的需求。

最好使用 Joomla .. :)

这个 Joomla 插件拥有满足您要求的所有权限。

[点击这里](http://extensions.joomla.org/extensions/authoring-a-content/content-construction/8061)

# entity-framework - 在多个项目上分布实体类（EF 数据库优先）

> ID：12226217
> 
> 赞同：1
> 
> 时间：2012-09-01T08:32:19.680
> 
> 标签：entity-framework, entity, dbcontext

我正在使用实体框架数据库第一方法。是否可以在 DbContext 中使用来自另一个程序集的实体？

我有一个包含 DbContext 的中央数据库层项目。它应该引用来自不同项目/程序集的实体。

我的想法是以下不起作用：

1.  在中央数据库项目中创建 *.edmx 文件并使用 DbContext 代码生成来生成实体类。
2.  将每个实体类移动到其正确的项目中。例如`User`实体类将被移动到“身份验证”类库。

# iphone - 如何检查 NSMutable Array 中是否有任何值？

> ID：12226219
> 
> 赞同：0
> 
> 时间：2012-09-01T08:32:29.637
> 
> 标签：iphone, nsmutablearray

我正在开发一个应用程序，在其中我从 URL 获取值，例如，将其作为 (demo.png)，这里我正在做的是，我将字符串 `<componentsSeparatedByString:@"." >`与`array (Index 0 : demo & Index 1: png )`. 而且，它工作正常。现在，我在这里受到打击，当 URL 中的值不包含时，`".png, .jpeg"`就会出现错误消息。我如何检查 ObjectAtIndex:1 中的值是否为空。我为此做的是，

编码：

```
if ([array45 objectAtIndex:1] == NSNULL NULL) {
   NSLog(@"object at index %i has no data", i);
} 
```

错误信息：

```
[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

帮助我提供有价值的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:16:04.593

```
NSArray *aray = [@"demo.png" componentsSeparatedByString:@"."];

if ([[aray lastObject] isEqualToString:@"png"])
{
    NSLog(@"There is an image with .png");
}
else {
    NSLog(@"There is no image eith .png extension");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:47:50.810

首先，您想找出数组中有多少对象。

```
int count = [array count]; 
```

如果您没有正确的计数，则不会检查索引中的内容。

# ruby-on-rails - gem 安装可以，但不能使用 bundle

> ID：12226221
> 
> 赞同：0
> 
> 时间：2012-09-01T08:32:44.550
> 
> 标签：ruby-on-rails, gem, bundle, pusher

我正在尝试安装 pusher-client gem。

我把它放在我的 Gemfile 中：

```
gem "pusher-client",:git=>"git://github.com/logankoester/pusher-client.git" 
```

捆绑安装没问题

但是当我启动应用程序时：

```
/Users/thomas/.rvm/gems/ruby-1.9.2-p318/gems/bundler-1.2.0/lib/bundler/runtime.rb:76:in `require': no such file to load -- pusher/client (LoadError)
from /Users/thomas/.rvm/gems/ruby-1.9.2-p318/gems/bundler-1.2.0/lib/bundler/runtime.rb:76:in `rescue in block in require'
from /Users/thomas/.rvm/gems/ruby-1.9.2-p318/gems/bundler-1.2.0/lib/bundler/runtime.rb:62:in `block in require'
from /Users/thomas/.rvm/gems/ruby-1.9.2-p318/gems/bundler-1.2.0/lib/bundler/runtime.rb:55:in `each'
from /Users/thomas/.rvm/gems/ruby-1.9.2-p318/gems/bundler-1.2.0/lib/bundler/runtime.rb:55:in `require'
from /Users/thomas/.rvm/gems/ruby-1.9.2-p318/gems/bundler-1.2.0/lib/bundler.rb:128:in `require'
from /Users/thomas/Documents/TweetTv/server/tvtweet/config/application.rb:12:in `<top (required)>'
from /Users/thomas/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.0/lib/rails/commands.rb:38:in `require'
from /Users/thomas/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.1.0/lib/rails/commands.rb:38:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

它似乎与 gem 名称中的 - 相关联，但其他 gem 安装正确。

任何帮助或建议都非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:25:02.460

你的`git`路径是错误的。如果您访问GitHub 上[的存储库](https://github.com/logankoester/pusher-client)，您会看到代码已移至[此处](https://github.com/pusher/pusher-ruby-client)。

您应该`Gemfile`改为：

```
gem 'pusher-client', :git => "git://github.com/pusher/pusher-ruby-client.git" 
```

# php - PHP 类序列化/反序列化混淆

> ID：12226223
> 
> 赞同：0
> 
> 时间：2012-09-01T08:32:55.580
> 
> 标签：php, serialization, instantiation

我没有得到序列化如何帮助我编写高效的 PHP*应用程序*。

我目前正在开发一个关于 PHP 的独立项目，在那里我创建了一个类来显示一个问题提要，其中包含抛出前端 HTML 的方法，并且处理部分也写在同一个类中。

仅举一个例子，我概述的课程如下

```
class QuestionFeed{
    protected $vars;

    public function throwHTML($filter_params){
        ........
    }

    public function InsertAnswers($answer_sanitized){
        .........
    }
} 
```

我有一个页面来显示前面部分和一个单独的页面用于插入部分。所以很自然，我必须先在显示页面实例化该类，然后再在处理页面实例化该类。在这一点上，序列化对象可以在任何方面有所帮助吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T16:50:31.283

当您需要保存对象的状态以供以后使用时，序列化对象很有用。例如，您可能有一个用户对象来保存用户偏好等。由于网络是无状态的，您将在每个请求中丢失该对象。但是，如果您要说序列化该对象并将其保存在会话变量中，则可以通过反序列化来重建该对象，从而使您不必重建在上次请求期间已经拥有的新对象。

附带说明：序列化然后反序列化对象也将完成对象的深层复制，其中（克隆）只会执行浅层复制。

序列化示例

```
<?php

class User {

    private $name = "";

    public function __construct($name) {
        $this->name = $name;
    }

    public function getName() {
        return $this->name;
    }

    public function setName($name) {
        $this->name = $name;
    }

    /*
    public function __sleep() {
        print "sleep";
    }

    public function __wakeup() {
        print "wakeup";
    }
    */
}

$user = new User("Andrew Schools");
$userSerialized = serialize($user); // usually you would save this in a session or DB
$user2 = unserialize($userSerialized);

echo $user->getName();
echo "<br />";
echo $user2->getName();
echo "<br />";
var_dump($user);
var_dump($user2);

?> 
```

这应该打印出以下内容：

```
Andrew Schools

Andrew Schools

class User#1 (1) {
  private $name =>
  string(14) "Andrew Schools"
}
class User#2 (1) {
  private $name =>
  string(14) "Andrew Schools"
} 
```

如您所见，我可以将对象恢复到序列化之前的状态。此外， __sleep() 函数在序列化开始之前触发，因此您可以进行任何清理。并且在反序列化之后调用__wakeup，以便在对象恢复后可以做一些额外的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:39:51.063

当我们需要将数组存储到单个字符串中时，序列化是一个过程。我主要序列化数组以存储在我的数据库中的单个字段中。

在您的代码中，我认为序列化不会有帮助。

# python - 如何跟踪树遍历的进度？

> ID：12226224
> 
> 赞同：4
> 
> 时间：2012-09-01T08:33:02.583
> 
> 标签：python, storage, tree-traversal

我有一棵树。它有一个平底。我们只对最底部的叶子感兴趣，但这大致是底部有多少叶子......

2×1600×1600×10×4×1600×10×4

那是〜13,107,200,000,000片叶子？由于大小（在每片叶子上执行的计算似乎不太可能优化到不到一秒钟），我已经放弃了访问每片叶子的想法。

所以我想我会构建一个“智能”叶子爬虫，它首先检查最“可能”的节点（基于它周围的结果）。因此，期望叶子在分支/邻居组中进行评估是合理的，但这些组的大小和分布会有所不同。

记录哪些叶子被访问过和哪些没有被访问过的最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T20:48:45.583

您没有提供很多信息，但我建议调整您的搜索算法以帮助您跟踪所看到的内容。如果您有一种按“可能性”对叶子进行排序的全局方法，那么您就不会遇到问题，因为您可以按照可能性的降序访问叶子。但如果我理解正确的话，你只是在爬山，对吧？您可以通过搜索完整的子树（例如，集群中被选为“可能”的所有 1600 x 10 x 4 叶子）并跟踪集群而不是单个叶子来减少存储需求。

听起来您的树几何形状是一致的，因此根据您的搜索工作方式，向上合并节点应该很容易......例如，跟踪所有叶子都已检查的级别 1 节点，以及何时2 级节点在您的列表中，删除子节点并保留其父节点。这也可能是选择检查内容的好方法：如果已经检查了 3 级节点的三个子节点，那么第四个也是最后一个节点可能也值得检查。

最后，一个想法：你真的，真的确定没有办法在组中排除一些解决方案（不检查每个单独的解决方案）吗？像数独这样的问题有一个天文数字般的大搜索空间，但是一个好的蛮力求解器会消除大量的可能性，而不需要检查每一个可能的 9 x 9 棋盘。鉴于您的问题的规模，这将是解决问题的最实用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:50:15.750

您似乎正在寻找一种快速有效（就内存使用而言）的方法来进行成员资格测试。如果是这样，并且如果您可以应对一些误报，请使用[**布隆过滤器**](http://en.wikipedia.org/wiki/Bloom_filter)。

底线是：*在您的数据集非常大*并且*您所需要的只是检查集合中是否存在特定元素并且*误报*的可能性很小的*情况下使用布隆过滤器。

应该存在一些 Python 实现。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:24:00.020

也许这太明显了，但是您可以将结果存储在类似的树中。由于您的计算速度很慢，因此结果树不应过快增长。然后查找是否有给定节点的结果。

# ruby - 使用 % 表示法有什么好处？

> ID：12226225
> 
> 赞同：0
> 
> 时间：2012-09-01T08:33:08.950
> 
> 标签：ruby

我看到像一直在使用的字面符号`%w[foo bar]`，但我没有看到使用它的好处`["foo", "bar"]`。它是用作惯例，还是有一些性能/时间优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:43:56.780

在某些情况下，它更具可读性。比较这些虚构的例子：

```
%w(the quick brown fox jumped over the lazy dog)
["the", "quick", "brown", "fox", "jumped", "over", "the", "lazy", "dog"]
"the quick brown fox jumped over the lazy dog".split(' ') 
```

虽然第三个*几乎*和第一个一样可读，但它的性能更差（需要分配和填充数组）。另一方面，前两个是在解析时处理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:35:39.193

不，没有任何性能优势。如果你使用它，有时它会更容易并且看起来更好。更容易编写和更简单`%(One Two Three Four)`的是，仅此而已......

# jquery - jQuery 标记它！- 如何更改焦点边框

> ID：12226233
> 
> 赞同：2
> 
> 时间：2012-09-01T08:34:20.920
> 
> 标签：jquery, css, tag-it

我正在使用[jQuery Tag-It！](http://aehlke.github.com/tag-it/)在我的项目中。我想让我的对象的边框在`onfocus`事件触发时可见，但我不能让它工作。

我的代码：

```
<ul id="TagsDesc" name="nameOfSelect" runat="server" ></ul>

<script type="text/javascript">
   $(document).ready(function () {
      $('#<%=TagsDesc.ClientID %>').focus(function () {
         $(this).css("border", "1px solid");
      });

      $('#<%=TagsDesc.ClientID %>').tagit({ 
        'maxTags': 10,'minLength': 1,
        'maxLength': 12,
        'tagsChanged': showTags
      });

      function showTags() {
         var tags = $('#<%=TagsDesc.ClientID %>').tagit("tags");
         var tagsContainer = $('#<%=tagsContainer.ClientID %>');
         var res = '';
         for (var i in tags)
            res += ',' + tags[i].value;
         tagsContainer.val(res);
      }
   });
</script> 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T09:07:17.330

焦点事件实际上只适用于可聚焦元素。( `<input>`, `<select>`, 等)

`ul`或者`li`默认情况下不可聚焦。

> 当元素获得焦点时，焦点事件被发送到元素。此事件隐式适用于一组有限的元素，例如表单元素（`<input>`、`<select>`等）和链接（`<a href>`）。在最近的浏览器版本中，可以通过显式设置元素的 tabindex 属性来扩展事件以包括所有元素类型。元素可以通过键盘命令（例如 Tab 键）或通过鼠标单击元素获得焦点。

一种解决方法是`tabidex`在要使其具有焦点的元素上使用，不确定它是否完全跨浏览器。添加 a`tabindex`使大多数元素都可以聚焦，因为它强制通过 keboard 聚焦。

要设置 css 值，您可以使用`:focus`伪选择器而不是使用 jquery。

```
.focusableelement:focus{
  border: 1px solid red;
  } 
```

# tagit的具体答案：

使用类在输入上应用`focus`事件并使用类`ui-widget-content ui-autocomplete-input`更改父元素的边框`tagit ui-widget ui-widget-content ui-corner-all`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T13:53:26.360

您必须在 tag-it 创建的输入字段上附加事件处理程序。遍历 DOM 有点麻烦，但这对使用 jQuery 1.11 和 tag-it 2.0 的我来说很有效：

```
 $("#selector")
    .tagit({
       // whatever you need
    })
    // bind events on tag-it's input field 
    .siblings("ul.tagit")
    .first()
    .find("input:first")
    .on("focus", function() {
      $(this).closest("ul.tagit").addClass("focus");
    })
    .on("blur", function() {
      $(this).closest("ul.tagit").removeClass("focus");
    }); 
```

现在在您的样式表中添加适当的 CSS 规则：

```
ul.tagit.focus {
  border: 1px solid;
} 
```

# iphone - JSON 解析没有给出正确的 NSMutable 数组：

> ID：12226240
> 
> 赞同：0
> 
> 时间：2012-09-01T08:35:23.333
> 
> 标签：iphone, ios, json, web-services

我正在开发一个 Webservice 应用程序。

他们给我这样的回应：

**JSON响应：**

> {"1":"03:30 PM 到 04:30 PM","2":"01:30 PM 到 02:30 PM","3":"02:30 AM 到 03:30 PM"," 4":"04:30 PM 到 05:30 PM","5":"05:30 PM 到 06:30 PM","6":"06:30 PM 到 07:30 PM"}

我想在我的另一个视图控制器中显示所有这些**时间**间隔复选框，以便用户可以选择它。

我怎么得到这个...

需要帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:48:39.590

查看`NSArray componentsSeparatedByString:(NSString *)`. 这会将 Json 回复分隔到您指定的字符串中的数组中。我可能会使用@","。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:38:36.677

您可以使用 SBJson 类来解析 json 数据，

这是获取所有课程的方法

[SBJson](http://stig.github.com/json-framework/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:02:04.240

您可以通过以下方法简单地解析 JSON

```
NSString* strJSONResponse = @"{\"1\":\"03:30 PM To 04:30 PM\",\"2\":\"01:30 PM To 02:30 PM\",\"3\":\"02:30 AM To 03:30 PM\",\"4\":\"04:30 PM To 05:30 PM\",\"5\":\"05:30 PM To 06:30 PM\",\"6\":\"06:30 PM To 07:30 PM\"}";

NSDictionary* dataDict = [strJSONResponse JSONValue];

NSLog(@"%@",dataDict); 
```

这是输出：

```
Printing description of dataDict:
{
    1 = "03:30 PM To 04:30 PM";
    2 = "01:30 PM To 02:30 PM";
    3 = "02:30 AM To 03:30 PM";
    4 = "04:30 PM To 05:30 PM";
    5 = "05:30 PM To 06:30 PM";
    6 = "06:30 PM To 07:30 PM";
} 
```

有了这本词典，您可以根据您的要求简单地使用。

在这里，您需要包含[此处找到的 SBJSON 所需的类](http://stig.github.com/json-framework/)

我必须添加“\”作为转义字符才能将其用作字符串。

希望能帮助到你

# windows-phone-7 - ToggleSwitch 标题颜色

> ID：12226241
> 
> 赞同：3
> 
> 时间：2012-09-01T08:35:26.443
> 
> 标签：windows-phone-7, xaml

我有一个 ToggleSwitch 控件，标题文本是白色的。Off 和 On 文本为黑色。如何将标题文本更改为黑色？代码如下

```
 <toolkit:ToggleSwitch x:Name="Toggle" Header="Background process" Margin="0,20,0,460" 
     Checked="ToggleSwitch_Checked" Unchecked="ToggleSwitch_Unchecked" Background="Black" 
     Foreground="black" FontSize="40">        
     </toolkit:ToggleSwitch> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T08:56:50.500

您可以尝试以下方法：

```
<toolkit:ToggleSwitch>
    <toolkit:ToggleSwitch.Header>
        <TextBlock Text="Background process" Foreground="Black" />
    </toolkit:ToggleSwitch.Header>
</toolkit:ToggleSwitch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:50:18.813

更改属性背景和前景的值。

```
<toolkit:ToggleSwitch x:Name="Toggle" Header="Background process" Margin="0,20,0,460" 
 Checked="ToggleSwitch_Checked" Unchecked="ToggleSwitch_Unchecked" Background="white" 
 Foreground="black" FontSize="40">        
 </toolkit:ToggleSwitch> 
```

# java - Java技术冲突

> ID：12226245
> 
> 赞同：2
> 
> 时间：2012-09-01T08:36:35.923
> 
> 标签：java, class

我的在线测验中有这个问题，因为我正在兼职攻读学位，我很少有朋友甚至没有参加我的课程。所以我在这里有点困惑......

这是我的问题

```
Which of the following statement regarding class in Java is true:
Answer

A class is made of objects

A class is used as a template to create objects

A class supplies or delivers objects to the rest of the application 

A class is a collection of objects 
```

所以我想答案是

```
A class is used as a template to create objects 
```

我将解释为什么我会这样想，这是因为，即使是 mainmethod 也在一个类中，它确实是一个模板.. 这就是为什么。但是我的蜘蛛感觉告诉我选择最长的答案（一个很好的技巧，有时帮助了我）。那么各位专家怎么看？请不要否定这个问题..如果它不合适请评论它然后我会关闭它.. tks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T08:38:37.587

第二句话是正确的，因为一个类为从它创建的所有实例提供了行为和结构。（但是请注意，编程上下文中的“模板”通常意味着不同的东西，请参见，例如 C++ 中的模板。）

第一句话是错误的——类可以在没有任何实例的情况下存在（例如，考虑一个静态类）。

第三句是错误的——这将是对工厂方法或工厂对象的描述（在 Wikipedia 中查找工厂模式）。

第四句是错误的——类不必是集合。有提供集合功能的类（例如列表或映射或集合），但这些是特定的类——还有许多其他类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:40:06.303

你说的对。但`main`它不是一个很好的例子，因为它是`static`（因此，必须创建它的类的任何对象才能被调用）。

原因是，要创建一个新对象，您需要执行以下操作：

```
MyClass myObject = new MyClass(); 
```

这样，myObject 将拥有 MyClass 中定义的所有方法和属性。

# .net - 如何在 GUI 中处理任务异常？

> ID：12226246
> 
> 赞同：0
> 
> 时间：2012-09-01T08:36:41.790
> 
> 标签：.net, vb.net, exception-handling, task-parallel-library

使用 Tasks 解锁 UI 并且不能使用 Aync/Await 时，推荐的处理错误的方法是什么？

我通常希望通过更新 UI 来处理预期的错误，并在 Application_DispatcherUnhandledException 等全局错误处理程序中处理意外错误（记录异常、通知用户和关闭应用程序）。

我正在使用以下对我来说看起来很难看的方法。

```
Private Sub _showAsyncButton_Click(sender As Object, e As RoutedEventArgs) Handles _showAsyncButton.Click
Dim task = New WebClient().DownloadStringTaskAsync("http://www.microsoft.com")
'Dim task = New WebClient().DownloadStringTaskAsync("forcing error in async I/O")
task.ContinueWith(
    Sub()
        _resultField.Text = task.Result
        'Throw New ApplicationException("forcing error in End method")
    End Sub, Nothing, Nothing, TaskScheduler.FromCurrentSynchronizationContext
    ).ContinueWith(
        Sub(a)
            Select Case True
                Case TypeOf (a.Exception.GetBaseException) Is WebException AndAlso CType(a.Exception.GetBaseException, WebException).Status = WebExceptionStatus.NameResolutionFailure
                    'Handle expected error
                    Dispatcher.Invoke(Sub() MessageBox.Show("Cannot access web site. Please try again later"))
                Case Else
                    'Rethrow unexpected error in global error handler
                    Dispatcher.BeginInvoke(Sub() ExceptionDispatchInfo.Capture(a.Exception).Throw())
                    'ExceptionDispatchInfo.Capture(aex).Throw() 'Does not work 
            End Select
        End Sub, TaskContinuationOptions.OnlyOnFaulted) 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:04:48.617

在处理许多其他事情的同时处理并行应用程序中的异常是一项痛苦的任务，需要足够的知识和技能。考虑使用 .Net 4.5 中引入的关键字重写上述代码`async-await`，然后它允许您以与在同步编程模型中相同的方式处理异常。当然，也有一些情况`async-await`不够用，需要直接使用TPL API。

然后，您可以使用 .Net 反编译器（即 .Net Reflector）来查看编译器为您做了多少工作，这也是一个非常宝贵的学习资源。

还可以考虑查看[使用任务并行库的异常处理，](http://www.ademiller.com/blogs/tech/2010/10/exception-handling-with-the-task-parallel-library/)它为您提供了在使用 TPL 进行并行编程时如何处理异常的良好见解。

Stephen Toub 提出的“[异步之禅：最佳性能的最佳实践](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-829T)”还深入探讨了`async`.Net 4.5 的底层工作原理，并涵盖了一些高级主题，异常处理就是其中之一。

# android-view - event.getAction() 错过了 MotionEvent.ACTION_MOVE

> ID：12226253
> 
> 赞同：0
> 
> 时间：2012-09-01T08:37:58.827
> 
> 标签：android-view

我有一个绘制点网格的应用程序（比如说 3x3）。要求用户在该网格上绘制一些东西。如果用户的手指触摸网格中的一个点，则该点被着色。此外，将在每两个触摸点之间画一条线。

问题 - event.getAction() 经常会错过 MotionEvent.ACTION_MOVE。我是什么意思？- 好吧，假设用户画了一条连接三个点的直线。通常第一个点会被着色，第三个（最后一个）点会被着色，但第二个（中间）点不会被着色。

所以我记录了`else if(event.getAction() == MotionEvent.ACTION_MOVE)`正在做的事情，发现通常`event.getAction()`不会“注意到”屏幕上手指位置的变化。

我注意到，如果我的手指沿着我想画的假想路径越慢，就越能`event.getAction()`注意到手指的运动。

**经过一些测试后，我还注意到随着我在屏幕上绘制越来越多的线条，游戏变得越来越慢/迟钝。似乎该应用程序正在收集太多数据（事件数据？），它无法及时处理它（我得到日志：I/Choreographer：跳过 45 帧！应用程序可能做的工作太多在其主线程上）。这可能是某种超大缓存的问题吗？一旦我知道用户的操作已经完成，我该如何清理那个“缓存”？**

有没有人遇到过系统无法足够快地跟踪手指运动的情况？

============ 进一步的实验 ==========================

在阅读了@Jimpanzee 所写的内容后，我更深入地研究了文档：我阅读了有关使用 getHistoricalX(int, int) 和 getHistoricalY(int, int) 的信息。看起来 Android 会批处理运动事件，因此 getX 和 getY 可能只提供该批处理中的最后一个事件。如果您在屏幕上有快速移动，这可能是一个问题。因此，除了 getX 和 getY，我转而使用 getHistoricalX 和 getHistoricalY。出于某种奇怪的原因，这并没有解决问题：我仍然得到被触摸但没有着色的点。

一个例子可以在下面看到：

![显示两条线 - 一条缺少一个点。 两条线都是从上到下画的，先画左边的](../Images/2b8f5b5d8a8710d5484ce42f402f5366.png)

我正在使用一个 ArrayList> 每个 ArrayList 定义一个由点组成的路径，按照它们被触摸的顺序。一个 ArrayList 包含所有路径

1.  网格在 X 和 Y 轴上分别编号为 0、100、200、300、400
2.  第一个晕倒的点是 [100, 100] - 手指一直向下，画了四个点，最后一个点是 [100, 400]。
3.  第二条线也是从上到下绘制的，但您可以看到顶部的第三个点 [200, 300] 丢失了。

我无法解释，所以我记录了触摸事件：

1.  moveH 表示动作 MOVE + 历史数据
2.  moveC 表示动作 MOVE + 当前数据
3.  当触摸点靠近网格上的一个点时 [添加点] 会被记录
4.  不时打印出整个路径数组

**如果您查看日志，您会看到在添加点 [200, 200] 之后，Y 值变得奇怪 - 它们从 212.53839（在最后一次看到的历史点）跳到 412.45544 并一直保持高位，直到下一个点是添加到数组中。这就解释了为什么点 [200, 300] 被忽略并且从未绘制。**

```
383:  Action moveH x: 198.75 y: 284.8833
383:  Action moveH x: 199.6875 y: 305.07257
387:  Action moveH x: 204.84375 y: 326.94427
387:  Action moveH x: 196.875 y: 212.53839
387:  Action moveH [add point] x: 200 y: 200
387:  [[Point(100, 100), Point(100, 200), Point(100, 300), Point(100, 400)], [Point(200, 100), Point(200, 200)]]
504:  Action moveE x: 210.0 y: 412.45544
504:  Action moveH x: 205.78125 y: 345.4511
504:  Action moveH x: 207.1875 y: 362.2755
504:  Action moveH x: 207.65625 y: 369.00528
504:  Action moveH x: 208.125 y: 378.2587
504:  Action moveH x: 209.53125 y: 397.60675
504:  Action moveH x: 209.53125 y: 400.97162
508:  Action moveH x: 210.0 y: 404.3365
508:  Action moveH x: 210.0 y: 407.7014
508:  Action moveH x: 210.0 y: 411.90747
508:  Action moveH x: 205.78125 y: 345.4511
508:  Action moveH x: 207.1875 y: 362.2755
508:  Action moveH x: 207.65625 y: 369.00528
508:  Action moveH x: 208.125 y: 378.2587
508:  Action moveH x: 209.53125 y: 397.60675
508:  Action moveH x: 209.53125 y: 400.97162
508:  Action moveH x: 210.0 y: 404.3365
508:  Action moveH x: 210.0 y: 407.7014
508:  Action moveH x: 210.0 y: 411.90747
508:  Action moveH x: 205.78125 y: 345.4511
508:  Action moveH x: 207.1875 y: 362.2755
508:  Action moveH x: 207.65625 y: 369.00528
508:  Action moveH x: 208.125 y: 378.2587
508:  Action moveH x: 209.53125 y: 397.60675
508:  Action moveH x: 209.53125 y: 400.97162
512:  Action moveH x: 210.0 y: 404.3365
512:  Action moveH x: 210.0 y: 407.7014
512:  Action moveH x: 210.0 y: 411.90747
512:  Action moveH x: 205.78125 y: 345.4511
512:  Action moveH x: 207.1875 y: 362.2755
512:  Action moveH x: 207.65625 y: 369.00528
512:  Action moveH x: 208.125 y: 378.2587
512:  Action moveH x: 209.53125 y: 397.60675
512:  Action moveH x: 209.53125 y: 400.97162
512:  Action moveH x: 210.0 y: 404.3365
512:  Action moveH x: 210.0 y: 407.7014
512:  Action moveH x: 210.0 y: 411.90747
512:  Action moveH x: 205.78125 y: 345.4511
515:  Action moveH x: 207.1875 y: 362.2755
515:  Action moveH x: 207.65625 y: 369.00528
515:  Action moveH x: 208.125 y: 378.2587
515:  Action moveH x: 209.53125 y: 397.60675
515:  Action moveH x: 209.53125 y: 400.97162
515:  Action moveH x: 210.0 y: 404.3365
515:  Action moveH x: 210.0 y: 407.7014
515:  Action moveH x: 210.0 y: 411.90747
515:  Action moveH x: 205.78125 y: 345.4511
515:  Action moveH x: 207.1875 y: 362.2755
515:  Action moveH x: 207.65625 y: 369.00528
515:  Action moveH x: 208.125 y: 378.2587
515:  Action moveH x: 209.53125 y: 397.60675
515:  Action moveH x: 209.53125 y: 400.97162
515:  Action moveH x: 210.0 y: 404.3365
515:  Action moveH x: 210.0 y: 407.7014
515:  Action moveH x: 210.0 y: 411.90747
519:  Action moveH x: 205.78125 y: 345.4511
519:  Action moveH x: 207.1875 y: 362.2755
519:  Action moveH x: 207.65625 y: 369.00528
519:  Action moveH x: 208.125 y: 378.2587
519:  Action moveH x: 209.53125 y: 397.60675
519:  Action moveH x: 209.53125 y: 400.97162
519:  Action moveH x: 210.0 y: 404.3365
519:  Action moveH x: 210.0 y: 407.7014
519:  Action moveH x: 210.0 y: 411.90747
523:  Action moveH x: 205.78125 y: 345.4511
523:  Action moveH x: 207.1875 y: 362.2755
523:  Action moveH x: 207.65625 y: 369.00528
527:  Action moveH x: 208.125 y: 378.2587
527:  Action moveH x: 209.53125 y: 397.60675
527:  Action moveH x: 209.53125 y: 400.97162
527:  Action moveH x: 210.0 y: 404.3365
527:  Action moveH x: 210.0 y: 407.7014
527:  Action moveH x: 210.0 y: 411.90747
527:  Action moveH x: 205.78125 y: 345.4511
527:  Action moveH x: 207.1875 y: 362.2755
527:  Action moveH x: 207.65625 y: 369.00528
527:  Action moveH x: 208.125 y: 378.2587
527:  Action moveH x: 209.53125 y: 397.60675
527:  Action moveH x: 209.53125 y: 400.97162
527:  Action moveH x: 210.0 y: 404.3365
527:  Action moveH x: 210.0 y: 407.7014
527:  Action moveH x: 210.0 y: 411.90747
531:  Action moveH x: 205.78125 y: 345.4511
531:  Action moveH x: 207.1875 y: 362.2755
531:  Action moveH x: 207.65625 y: 369.00528
531:  Action moveH x: 208.125 y: 378.2587
531:  Action moveH x: 209.53125 y: 397.60675
531:  Action moveH x: 209.53125 y: 400.97162
531:  Action moveH x: 210.0 y: 404.3365
531:  Action moveH x: 210.0 y: 407.7014
531:  Action moveH x: 210.0 y: 411.90747
531:  Action moveH x: 205.78125 y: 345.4511
531:  Action moveH x: 207.1875 y: 362.2755
531:  Action moveH x: 207.65625 y: 369.00528
531:  Action moveH x: 208.125 y: 378.2587
531:  Action moveH x: 209.53125 y: 397.60675
531:  Action moveH x: 209.53125 y: 400.97162
531:  Action moveH x: 210.0 y: 404.3365
531:  Action moveH x: 210.0 y: 407.7014
535:  Action moveH x: 210.0 y: 411.90747
535:  Action moveH x: 205.78125 y: 345.4511
535:  Action moveH x: 207.1875 y: 362.2755
535:  Action moveH x: 207.65625 y: 369.00528
535:  Action moveH x: 208.125 y: 378.2587
535:  Action moveH x: 209.53125 y: 397.60675
535:  Action moveH x: 209.53125 y: 400.97162
535:  Action moveH x: 210.0 y: 404.3365
535:  Action moveH x: 210.0 y: 407.7014
535:  Action moveH x: 210.0 y: 411.90747
535:  Action moveH x: 205.78125 y: 345.4511
535:  Action moveH x: 207.1875 y: 362.2755
535:  Action moveH x: 207.65625 y: 369.00528
535:  Action moveH x: 208.125 y: 378.2587
535:  Action moveH x: 209.53125 y: 397.60675
535:  Action moveH x: 209.53125 y: 400.97162
535:  Action moveH x: 210.0 y: 404.3365
535:  Action moveH x: 210.0 y: 407.7014
535:  Action moveH x: 210.0 y: 411.90747
535:  Action moveH x: 205.78125 y: 345.4511
539:  Action moveH x: 207.1875 y: 362.2755
539:  Action moveH x: 207.65625 y: 369.00528
539:  Action moveH x: 208.125 y: 378.2587
539:  Action moveH x: 209.53125 y: 397.60675
539:  Action moveH x: 209.53125 y: 400.97162
539:  Action moveH x: 210.0 y: 404.3365
539:  Action moveH x: 210.0 y: 407.7014
539:  Action moveH x: 210.0 y: 411.90747
539:  Action moveH x: 205.78125 y: 345.4511
539:  Action moveH x: 207.1875 y: 362.2755
539:  Action moveH x: 207.65625 y: 369.00528
539:  Action moveH x: 208.125 y: 378.2587
539:  Action moveH x: 209.53125 y: 397.60675
539:  Action moveH x: 209.53125 y: 400.97162
539:  Action moveH x: 210.0 y: 404.3365
539:  Action moveH x: 210.0 y: 407.7014
539:  Action moveH x: 210.0 y: 411.90747
539:  Action moveH x: 205.78125 y: 345.4511
539:  Action moveH x: 207.1875 y: 362.2755
539:  Action moveH x: 207.65625 y: 369.00528
543:  Action moveH x: 208.125 y: 378.2587
543:  Action moveH x: 209.53125 y: 397.60675
543:  Action moveH x: 209.53125 y: 400.97162
543:  Action moveH x: 210.0 y: 404.3365
543:  Action moveH x: 210.0 y: 407.7014
543:  Action moveH x: 210.0 y: 411.90747
543:  Action moveH x: 205.78125 y: 345.4511
543:  Action moveH x: 207.1875 y: 362.2755
543:  Action moveH x: 207.65625 y: 369.00528
543:  Action moveH x: 208.125 y: 378.2587
543:  Action moveH x: 209.53125 y: 397.60675
543:  Action moveH x: 209.53125 y: 400.97162
543:  Action moveH x: 210.0 y: 404.3365
543:  Action moveH x: 210.0 y: 407.7014
543:  Action moveH x: 210.0 y: 411.90747
543:  Action moveH x: 205.78125 y: 345.4511
543:  Action moveH x: 207.1875 y: 362.2755
543:  Action moveH x: 207.65625 y: 369.00528
543:  Action moveH x: 208.125 y: 378.2587
543:  Action moveH x: 209.53125 y: 397.60675
543:  Action moveH x: 209.53125 y: 400.97162
543:  Action moveH x: 210.0 y: 404.3365
543:  Action moveH x: 210.0 y: 407.7014
543:  Action moveH x: 210.0 y: 411.90747
547:  Action moveH x: 205.78125 y: 345.4511
547:  Action moveH x: 207.1875 y: 362.2755
547:  Action moveH x: 207.65625 y: 369.00528
547:  Action moveH x: 208.125 y: 378.2587
547:  Action moveH x: 209.53125 y: 397.60675
547:  Action moveH x: 209.53125 y: 400.97162
547:  Action moveH x: 210.0 y: 404.3365
547:  Action moveH x: 210.0 y: 407.7014
547:  Action moveH x: 210.0 y: 411.90747
547:  Action moveH x: 205.78125 y: 345.4511
547:  Action moveH x: 207.1875 y: 362.2755
547:  Action moveH x: 207.65625 y: 369.00528
547:  Action moveH x: 208.125 y: 378.2587
547:  Action moveH x: 209.53125 y: 397.60675
547:  Action moveH x: 209.53125 y: 400.97162
547:  Action moveH x: 210.0 y: 404.3365
547:  Action moveH x: 210.0 y: 407.7014
547:  Action moveH x: 210.0 y: 411.90747
547:  Action moveH x: 205.78125 y: 345.4511
547:  Action moveH x: 207.1875 y: 362.2755
547:  Action moveH x: 207.65625 y: 369.00528
547:  Action moveH x: 208.125 y: 378.2587
547:  Action moveH x: 209.53125 y: 397.60675
551:  Action moveH x: 209.53125 y: 400.97162
551:  Action moveH x: 210.0 y: 404.3365
551:  Action moveH x: 210.0 y: 407.7014
551:  Action moveH x: 210.0 y: 411.90747
551:  Action moveH x: 205.78125 y: 345.4511
551:  Action moveH x: 207.1875 y: 362.2755
551:  Action moveH x: 207.65625 y: 369.00528
551:  Action moveH x: 208.125 y: 378.2587
551:  Action moveH x: 209.53125 y: 397.60675
551:  Action moveH x: 209.53125 y: 400.97162
551:  Action moveH x: 210.0 y: 404.3365
551:  Action moveH x: 210.0 y: 407.7014
551:  Action moveH x: 210.0 y: 411.90747
551:  Action moveC [add point] x: 200 y: 400
551:  [[Point(100, 100), Point(100, 200), Point(100, 300), Point(100, 400)], [Point(200, 100), Point(200, 200), Point(200, 400)]]
719:  Action moveE x: 210.0 y: 424.52576
719:  Action moveH x: 210.46875 y: 415.27234
719:  Action moveH x: 210.46875 y: 418.63724
719:  Action moveH x: 210.46875 y: 421.1609 
```

这是我的 doDraw（如 onDraw）：

```
 public void doDraw(Canvas canvas) 
{
    PathPoint xya = null;       

    canvas.drawColor(Color.WHITE);

    for (int i = 0; i < 5; i++) 
    {
        for (int j = 0; j < 5; j++) 
        {
            int xPos = j * mNodeGap;
            int yPos = i * mNodeGap;

            try {
                xya = new PathPoint(xPos, yPos, null);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }               

            mNodeCoordinates[i][j] = xya;

            canvas.drawBitmap(mBitmap, xPos, yPos, null);
        }
    }

    synchronized (mViewThread.getSurefaceHolder()) 
    {
        //draw path
        for (Path path : mGraphics)
        {           
            float aStartCoordinates[] = {0f, 0f};
            float aEndCoordinates[] = {0f, 0f};

            //get path values       
            PathMeasure pm = new PathMeasure(path, true);

            pm.getPosTan(0f, aStartCoordinates, null);  
            //System.out.println("aStartCoordinates X:" + aStartCoordinates[0] + " aStartCoordinates Y:" + aStartCoordinates[1]);
            pm.getPosTan(pm.getLength(), aEndCoordinates, null);
            //System.out.println("aEndCoordinates X:" + aEndCoordinates[0] + " aEndCoordinates Y:" + aEndCoordinates[1]);

            //coordinates are within game board boundaries
            if((aStartCoordinates[0] >= 1  && aStartCoordinates[1] >= 1) && (aEndCoordinates[0] >= 1 && aEndCoordinates[1] >= 1))
            {
                canvas.drawPath(path, mPathPaint);
            }                   
        }

        for (ArrayList<PathPoint> nodePattern : mNodesHitPatterns) 
        {
            for (PathPoint nodeHit : nodePattern) 
            {
                canvas.drawBitmap(mDotOK, nodeHit.x - ((mDotOK.getWidth()/2) - (mBitmap.getWidth()/2)), nodeHit.y - ((mDotOK.getHeight()/2) - (mBitmap.getHeight()/2)), null);
            }               
        }           
    }
} 
```

和 onTouchEvent：

```
 @Override
public boolean onTouchEvent(MotionEvent event) {            

    synchronized (mViewThread.getSurefaceHolder()) {

        if(event.getAction() == MotionEvent.ACTION_DOWN)
        {
            System.out.println("Action downE x: " + event.getX() + " y: " + event.getY());

            for (int i = 0; i < mGridSize; i++) 
            {                   
                for (int j = 0; j < mGridSize; j++) 
                {
                    PathPoint pathPoint = mNodeCoordinates[i][j];

                    if((Math.abs((int)event.getX() - pathPoint.x) <= 35) && (Math.abs((int)event.getY() - pathPoint.y) <= 35))
                    {
                        //mPath.moveTo(pathPoint.x + mBitmap.getWidth() / 2, pathPoint.y + mBitmap.getHeight() / 2);

                        //System.out.println("Action down x: " + pathPoint.x + " y: " + pathPoint.y);
                        ArrayList<PathPoint> newNodesPattern = new ArrayList<PathPoint>();
                        mNodesHitPatterns.add(newNodesPattern);
                        //mNodesHitPatterns.add(nh);
                        //                          pathPoint.setAction("down");
                        break;
                    }
                }
            }                   
        }
        else if(event.getAction() == MotionEvent.ACTION_MOVE)
        {
            final int historySize = event.getHistorySize();

            System.out.println("Action moveE x: " + event.getX() + " y: " + event.getY());

            coordinateFound:
                for (int i = 0; i < mGridSize; i++) 
                {
                    for (int j = 0; j < mGridSize; j++) 
                    {
                        PathPoint pathPoint = mNodeCoordinates[i][j];   

                        if((Math.abs((int)event.getX() - pathPoint.x) <= 35) && (Math.abs((int)event.getY() - pathPoint.y) <= 35))
                        {                               
                            int lastPatternIndex = mNodesHitPatterns.size()-1;                  
                            ArrayList<PathPoint> lastPattern = mNodesHitPatterns.get(lastPatternIndex);
                            int lastPatternLastNode = lastPattern.size()-1;                             

                            if(lastPatternLastNode != -1)
                            {
                                if(!pathPoint.equals(lastPattern.get(lastPatternLastNode).x, lastPattern.get(lastPatternLastNode).y))
                                {
                                    lastPattern.add(pathPoint);     
                                    System.out.println("Action moveC [add point] x: " + pathPoint.x + " y: " + pathPoint.y);
                                }
                            }
                            else
                            {
                                lastPattern.add(pathPoint);
                                System.out.println("Action moveC [add point] x: " + pathPoint.x + " y: " + pathPoint.y);
                            }                                           

                            break coordinateFound;
                        }
                        else //no current match => try historical
                        {
                            if(historySize > 0)
                            {
                                for (int k = 0; k < historySize; k++)
                                {
                                    System.out.println("Action moveH x: " + event.getHistoricalX(k) + " y: " + event.getHistoricalY(k));
                                    if((Math.abs((int)event.getHistoricalX(k) - pathPoint.x) <= 35) && (Math.abs((int)event.getHistoricalY(k) - pathPoint.y) <= 35))
                                    {                                                   
                                        int lastPatternIndex = mNodesHitPatterns.size()-1;                  
                                        ArrayList<PathPoint> lastPattern = mNodesHitPatterns.get(lastPatternIndex);
                                        int lastPatternLastNode = lastPattern.size()-1;                             

                                        if(lastPatternLastNode != -1)
                                        {
                                            if(!pathPoint.equals(lastPattern.get(lastPatternLastNode).x, lastPattern.get(lastPatternLastNode).y))
                                            {
                                                lastPattern.add(pathPoint);
                                                System.out.println("Action moveH [add point] x: " + pathPoint.x + " y: " + pathPoint.y);
                                            }
                                        }
                                        else
                                        {
                                            lastPattern.add(pathPoint);
                                            System.out.println("Action moveH [add point] x: " + pathPoint.x + " y: " + pathPoint.y);
                                        }                                           

                                        break coordinateFound;
                                    }
                                }
                            }                               
                        }
                    }
                }       
        }
        else if(event.getAction() == MotionEvent.ACTION_UP)
        {
            for (int i = 0; i < mGridSize; i++) {

                for (int j = 0; j < mGridSize; j++) {

                    PathPoint pathPoint = mNodeCoordinates[i][j];

                    if((Math.abs((int)event.getX() - pathPoint.x) <= 35) && (Math.abs((int)event.getY() - pathPoint.y) <= 35))
                    {
                        //the location of the node                      
                        //mPath.lineTo(pathPoint.x + mBitmap.getWidth() / 2, pathPoint.y + mBitmap.getHeight() / 2);

                        //System.out.println("Action up x: " + pathPoint.x + " y: " + pathPoint.y);

                        //mGraphics.add(mPath);
                        //                          mNodesHit.add(pathPoint);
                        //                          pathPoint.setAction("up");
                        break;
                    }                       
                }
            }               
        }

        System.out.println(mNodesHitPatterns.toString());

        //create mPath
        for (ArrayList<PathPoint> nodePattern : mNodesHitPatterns) 
        {

            for (int i = 0; i < nodePattern.size(); i++) 
            {
                if(i == 0) //first node in pattern
                {
                    mPath.moveTo(nodePattern.get(i).x + mBitmap.getWidth() / 2, nodePattern.get(i).y + mBitmap.getHeight() / 2);
                }
                else
                {
                    mPath.lineTo(nodePattern.get(i).x + mBitmap.getWidth() / 2, nodePattern.get(i).y + mBitmap.getHeight() / 2);
                }

                mGraphics.add(mPath);
            }                               
        }

        return true;
    }  
} 
```

============ 更多信息 ===========================

问题是——为什么设备会这样？

感谢您对此的任何意见，D.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:50:13.310

我找到了有关单点触控的教程：[http](http://www.vogella.com/articles/AndroidTouch/article.html) ://www.vogella.com/articles/AndroidTouch/article.html 您可以实现并运行它以确保您的硬件正常工作。问题可能是您评估 event.getAction() 的方式 此外，如果您使用了事件，则当您覆盖 boolean onTouch 返回 tru 时。

# encryption - J2ME 加密算法

> ID：12226256
> 
> 赞同：0
> 
> 时间：2012-09-01T08:38:10.480
> 
> 标签：encryption, java-me, midp

我正在尝试使用 MIDP2.0 为 J2ME 移动应用程序开发自己的加密算法。
但本人对加密算法没有任何经验，请各位大侠给点意见。

我想加密文档，我需要在资源目录中维护该文档，这就是为什么我需要加密以防止黑客攻击他人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:17:02.720

不。加密是高度专业化的，最小的错误可能导致弱密码。那里有很多很好的加密算法，例如 AES、Salsa20 等。使用其中之一。由于有可用的库，这也为您省去了编写自己代码的麻烦。

阅读关于业余密码学的 Bruce Schneier：[给业余密码设计者的备忘录](http://www.schneier.com/crypto-gram-9810.html#cipherdesign)，当您阅读它时，放弃任何设计自己的密码的想法，并使用其中一种标准密码。AES-CTR + HMAC 或 AES-GCM 是我个人的偏好，YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:31:56.823

a) 我完全同意 rossum。不要编写自己的加密。这真是个坏主意（一个错误的步骤，它根本不安全）。

b）我相信有支持 J2ME的 Bouncy Castle 加密库（ [http://www.bouncycastle.org/latest_releases.html ）。](http://www.bouncycastle.org/latest_releases.html)

c）我建议阅读以下文章，其中提供了有关 j2me 数据加密/解密的信息和示例（[http://www.ibm.com/developerworks/java/tutorials/wi-encrypt/index.html](http://www.ibm.com/developerworks/java/tutorials/wi-encrypt/index.html)）

# mysql - 为不同的用户类型在数据库中存储多个电子邮件地址

> ID：12226260
> 
> 赞同：1
> 
> 时间：2012-09-01T08:38:35.330
> 
> 标签：mysql, sql, database, database-design

关于最有效的快速问题是处理这个问题，我有一个具有用户类型树结构的数据库，

```
system ---  1 to m --- account --- 1 to m --- customer 
```

所有三种类型都可以有多个电子邮件地址，我想知道在数据库中处理这个问题的最佳方法是什么，所有用户类型都有 auto_id 作为他们的主键，所以有一个由相关主键标识的地址的表不会像那里一样工作可能是每个 3 个。例如带有密钥 2 的电子邮件，将链接到带有 id 2 的系统、带有 id 2 的帐户等。

我应该为每种类型创建一个电子邮件地址表吗？还是有更优雅的解决方案。？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:49:23.280

您要么有一个电子邮件表，它的外键要么是 system_id、account_id 或 customer_id。然后你可以有一个字段来指定该外键的类型。另一个更复杂的策略是保留电子邮件表但没有外键。另一个称为 email_relation 的表，由 email_id 和外键组成。这样您就可以为所有三个表使用一个电子邮件地址。

两个表的使用示例

```
system
--------
s1 
s2
s3

account
--------
a1
a2
a3

customer
--------
c1
c2
c3

email
------
e1 example1@a.com
e2 example2@a.com
e3 example3@a.com
e4 example4@a.com

email_relation
---------------
email_id     foreign_id      relation_type
e1           s1              system
e1           a1              account
e1           c1              customer
e2           c1              customer
e3           c2              customer
e4           a3              account
e4           c3              customer 
```

如果您想要包含电子邮件地址的客户表

```
select c.customer_id, e.email
from customer c
left join email_relation r on (r.foreign_id = c.customer_id and relation_type = 'customer')
left join email          e on (e.email_id    = r.email_id)
where r.email_id is not null 
```

如果您希望将所有电子邮件发送到系统，您还可以

```
select e.email
  from email e
  join email_relation r on (r.email_id = e.email_id and relation_type = "system")
 where r.foreign_id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:49:40.490

您可以构造一个**复合键**来标识层次结构中任何级别的记录，然后将其用作电子邮件表中的 FK。所以一个电子邮件记录可以指向`sys1.acc7`，其他一些可以指向`sys3.acc4.cus99`。复合键由 auto_ids 组成，这些 auto_ids 以任何对您的系统有意义的方式串在一起。

您可以为层次结构中的任何点确定此复合键，并从那里找到该点的所有相应电子邮件地址。

# css - Play Framework 2.0.3 中的 CSS

> ID：12226267
> 
> 赞同：1
> 
> 时间：2012-09-01T08:39:54.893
> 
> 标签：css, playframework, playframework-2.0

我在 Play Framework 2.0.3 中使用 CSS 时遇到了一些问题，想知道是否有人能发现我所犯的错误。

我有一个名为 siteview.scala.html 的视图，定义为：

```
@(name: String, records: List[Record])

@import helper._

@main(name) {
<html>
    <head>
    <link rel="stylesheet" type="text/css" href="@routes.Assets.at("stylesheets/main.css")">
    </head> 
    <h1>@name</h1>

    <ul>
          ...
    </ul>
</html>
} 
```

我定义了一个 CSS 文件，如下`main.less`所示`app/assets/stylesheets`：

```
h1 {color:#F6F9ED;}

@font-face {
    font-family: Gentium;
    src: url(fonts/GenBasR.ttf);
}
font-family: Gentium, Arial, Georgia; 
```

为糟糕的风格道歉，我一直在改变以尝试让它做点什么！到资产的路线已保留为默认值。

Play 肯定会编译 CSS；如果有语法错误，就会被发现。但是，CSS 只是没有被加载到 HTML 中。

我尝试将 CSS 文件直接复制到公用文件夹中，但这给了我来自编译器的重复文件错误，这可能表明文件被放在正确的位置。

如何使用样式显示 HTML？我有一种感觉，我遗漏了一些非常明显的东西，但是对 Web 开发很陌生，所以我完全没有想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T11:15:43.667

我认为默认方法可能会使开发人员和 Play 都感到困惑，因此我建议将文件夹重命名`app/assets/stylesheets`为`app/assets/less`（或其他名称，通常确保您在 中没有同名的文件夹`/public`）。多亏了这一点，您可以始终确定您使用的是 LESS 或静态资产，因为您可以看到路径的差异：

```
<!-- resolves to '/public/less/main.css' or (main.min.css) 
                                                   from app/assets/less folder -->
<link rel="stylesheet" type="text/css" 
                       href='@routes.Assets.at("less/main.min.css")'>

<!-- resolves to '/public/stylesheets/main.css' from 'public/stylesheets' folder -->
<link rel="stylesheet" type="text/css" 
                       href='@routes.Assets.at("stylesheets/main.css")'> 
```

路线保持不变：

```
GET     /public/*file      controllers.Assets.at(path="/public", file) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-15T16:51:00.740

@biesor 提供的解决方案对我不起作用。我在路由文件中添加了这一行：

```
GET     /stylesheets/*file          @controllers.Assets.at(path="/public/stylesheets", file) 
```

然后我以这种方式将css文件包含在我的html页面中：

```
<link rel="stylesheet" media="screen" href="/stylesheets/core.css"> 
```

我认为这不是包含 css 文件的最佳方式，但我找不到其他解决方案。

# .net - 在 GUI 应用程序中处理 TaskScheduler.UnobservedTaskException 的推荐方法是什么？

> ID：12226268
> 
> 赞同：3
> 
> 时间：2012-09-01T08:39:56.813
> 
> 标签：.net, vb.net, exception-handling, task-parallel-library

为了稳健性，我想为 TaskScheduler.UnobservedTaskException 添加一个处理程序。处理程序确实记录异常通知用户并关闭应用程序。

下面的实现有意义吗？在 WPF 中是否可以在此处理程序中显示 MessageBox 或 Windows，或者这是一个坏主意，因为我们在未观察任务的终结器中运行？

```
Private Sub TaskSheduler_UnobservedTaskException(sender As Object, e As UnobservedTaskExceptionEventArgs)
Static _wasUserInformed As Boolean = False

e.SetObserved()

'Trace all Exceptions
e.Exception.Flatten.Handle(Function(ex As Exception)
                               'TODO trace and log Exception
                               Debug.Print("UnobservedTaskException: {0}", ex.Message)
                               Return True
                           End Function)

If Not _wasUserInformed Then
    'Show root Exception 
    _wasUserInformed = True
    Application.Current.Dispatcher.BeginInvoke(Sub()
                                                   'MessageBox.Show(e.Exception.GetBaseException.Message)

                                                   Dim win As New UnexpectedExceptionWindow
                                                   win.UnexpectedException = e.Exception.GetBaseException
                                                   win.ShowDialog()

                                                   Application.Current.Dispatcher.BeginInvoke(Sub() Application.Current.Shutdown())
                                               End Sub)
End If 
```

结束子

[编辑] 作为我们讨论的结果，我想出了以下解决方案。

```
Private Sub TaskScheduler_UnobservedTaskException(sender As Object, e As UnobservedTaskExceptionEventArgs
                                                  ) Handles TaskScheduler.UnobservedTaskException
    Static _wasUserInformed As Boolean = False

    'Free the finalizer thread and execute on the UI thread to be able to inform user
    Dispatcher.BeginInvoke(Sub() LogException(e.Exception))
    e.SetObserved()
    If Not _wasUserInformed Then
        _wasUserInformed = True
        'Show first error 
        Dispatcher.BeginInvoke(Sub()
                                   NotifyUser(e.Exception)
                                   Application.Current.Shutdown()
                               End Sub)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T21:16:33.570

这个问题问得好。由于此事件在终结器线程上运行（我已通过 Reflector 确认了这一点），因此我们不能长时间阻塞。这将停止处理终结器。

所以答案是：这不是一个好的设计，因为 UI 操作的持续时间是无限的。

更好的解决方案是将处理排队到一个新的`Task`，以便它在线程池上运行。

这个答案取决于实现细节（终结器在单个线程上执行，事件在终结器线程上触发）。但至少对于支持 .NET 4.0 的应用来说，这个答案是有效的。

# sql - SQL 为数据分配/生成唯一颜色

> ID：12226269
> 
> 赞同：0
> 
> 时间：2012-09-01T08:39:59.903
> 
> 标签：sql, sql-server-2008, colors, unique

我有一个返回多个字符串值的查询。我需要为每个唯一值分配一种颜色，但我无法知道会有多少个唯一值或以什么顺序。以下是查询目前返回的内容：

```
 |    ID    |    Value    |   Colour   | 
         1         XF452          ?
         2         ALL1F5         ?
         3         NULL           ?
         1         XF452
         2         BD4F
         3         NULL
         1         XF452
         2         XF452
         3         XF452 
```

我想为每个不同的值分配一种颜色，以便它最终看起来像这样：

```
 |    ID    |    Value    |   Colour   | 
         1         XF452        #880010
         2         ALL1F5       #FF0000
         3         NULL         #8C8C8C
         1         XF452        #880010
         2         BD4F         #002871
         3         NULL         #8C8C8C
         1         XF452        #880010
         2         XF452        #880010
         3         XF452        #880010 
```

我已经通过获取 Value 列的 unicode 值并在开头附加一个“#”来实现这一点，但颜色变化非常小——主要是相同颜色的不同深浅。有没有人有更好的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:44:33.987

您可以使用子查询来获取每个值并使用以下方法为其分配颜色（使用您选择的任何方法）：

```
SELECT value, getMyColour() AS colour FROM table GROUP BY value; 
```

然后，您可以将此子查询加入原始表以获取值：

```
SELECT table.id, table.value, subq.colour 
FROM table, 
    (SELECT value, getMyColour() AS colour FROM table GROUP BY value) subq
WHERE table.value = subq.value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:49:57.863

我的建议是，

从您的表中获取不同的值到临时表中。

```
create table #temp(value varchar(10),color_code varchar(100))

insert into #temp
select distinct value,getcolor from yourtable 
```

现在你只需要像这样加入表格

```
update u SET Color=t.color_code from yourtable u join #temp t
on u.value=t.value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T16:21:01.700

一种方法是使用 NEWID()。下面是一个为 information_schema.columns 中的表分配随机 4 字节值的示例：

```
select max(cast(NEWID() as BINARY(4))) over (partition by table_name), table_name
from INFORMATION_SCHEMA.COLUMNS 
```

该`cast(NEWID() as BINARY(4))`表达式生成一个随机的 4 字节值。将`max() over (partition . . .)` 相同的值分配给具有相同 table_name 的所有内容（在这种情况下）。您将使用以下表达式：

```
select max(cast(NEWID() as BINARY(4))) over (partition by value) 
```

顺便说一句，如果您想要渐变颜色而不是随机颜色，我会考虑类似：

```
select cast((dense_rank(value) over (partition by value))/(select count(distinct value)*1.0 from table)*power(2.0, 32) as binary(4)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-13T10:07:44.877

```
SET [Color] =  '#' +  CONVERT(VARCHAR(max), CRYPT_GEN_RANDOM(3), 2) 
```

# asp.net-mvc-3 - 如何刷新/重新加载 dhtmlx 网格

> ID：12226273
> 
> 赞同：0
> 
> 时间：2012-09-01T08:40:08.380
> 
> 标签：asp.net-mvc-3, visual-studio-2010, dhtmlx

我正在使用 dhtmlx 网格。我有两个名为 grid1、grid2 的网格。我已经使用 json 对象加载了两个网格。

如果我在 grid1 中选择一个记录，然后单击该记录必须加载到第二个记录中的按钮。我可以使用它在第二个网格中加载所选记录`document.location.reload(true);`，总页面正在刷新。但我想刷新仅网格2。

我只想在单击按钮后刷新 grid2。如何刷新/重新加载 grid2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:34:34.630

您可以使用`Ajax`加载和替换第二个网格。假设第二个网格的 id 为`second-grid`，类似于

```
@Ajax.ActionLink("Load Second Grid", "ActionName", new AjaxOptions
{
    UpdateTargetId = "second-grid",
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "GET"
}) 
```

将用单击时`second-grid`的结果替换里面的内容。`ActionName``Load Second Grid`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:36:15.493

您可以使用 onRowSelect 处理程序来捕捉在主网格中单击行的时刻。您可以使用 grid.parse API 在第二个网格中加载新数据。

```
<script>
grid1.attachEvent("onRowSelect", function(id){
    grid2.parse(some_data, "json")
})
</script> 
```

# java - 是否可以在构造函数中使用此类实例？

> ID：12226277
> 
> 赞同：2
> 
> 时间：2012-09-01T08:40:43.340
> 
> 标签：java, android, constructor, broadcastreceiver, this

这只是让我感到困惑的事情。是否可以在构造函数中使用类的当前实例？

我创建了一个 BroadcastReceiver，它在 BroadcastReceiver 的构造函数中使用上下文注册自身。此外，它将再次注销。这是好风格吗？

这是我的例子：

```
public class MyBroadcastReceiver extends BroadcastReceiver {

    protected Context                       context;
    protected MyOnBroadcastReceivedListener listener;
    protected int                           receiverId;
    protected String                        receiverTag;

    public MyBroadcastReceiver(int receiverId, Context context, MyOnBroadcastReceivedListener listener, String receiverTag) {
        super();

        this.context = context;
        this.listener = listener;
        this.receiverId = receiverId;
        this.receiverTag = receiverTag;

        IntentFilter intentFilter = new IntentFilter(receiverTag);

        context.registerReceiver(this, intentFilter);   // <--- Look at the use of this here
    }

    public void detach() {
        if (context != null) {
            context.unregisterReceiver(this);   // <--- Look at the use of this 
        }
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        // ...
        if (listener != null) {
            listener.onBroadcastReceived(receiverId, "Bla", "Blub");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:46:42.677

如果您指的是`this`在构造函数代码中使用，那么是的 - 它是完全有效的，否则构造函数将无法真正在自己的实例中构造太多。但是，我建议遵循常见做法并为您的班级成员添加前缀（最常用的前缀是“m”），这有助于避免有时难以调试的问题。所以而不是：

```
protected Context                       context;
protected MyOnBroadcastReceivedListener listener; 
```

你将会拥有：

```
protected Context                       mContext;
protected MyOnBroadcastReceivedListener mListener; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:47:09.060

是的，一点问题都没有。

在构造函数内部，对象已创建，但仍未返回对其余 java 代码的引用。您可以`this`放心使用。

无论如何，在某些属性可能会自动初始化的框架中（Context Dependent Injection，CDI），不可能在构造函数中完全初始化类（因为这些属性仍然不可用并且可能需要）。这些框架依赖于您将方法标记为`@PostConstruct`; 在设置了所有属性之后，将调用该方法（只是为了让您在找到它时知道它的含义）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:51:14.530

你可以这样做，但不是一个好的风格。从类构造函数内部传递`this`是危险的，因为当前仍在构造的对象可能没有完全初始化。

例如，您可能有一天会向 中添加一个新的 int 字段`MyBroadcastReceiver`，但忽略了您有该语句`context.registerReceiver(this, intentFilter);`并在构造函数的末尾添加了新字段的初始化：

```
public MyBroadcastReceiver(int receiverId, Context context, MyOnBroadcastReceivedListener listener, String receiverTag) {
    super();

    this.context = context;
    this.listener = listener;
    this.receiverId = receiverId;
    this.receiverTag = receiverTag;

    IntentFilter intentFilter = new IntentFilter(receiverTag);

    context.registerReceiver(this, intentFilter);   // <--- Look at the use of this here

    this.newField = 1;
} 
```

现在，您可能期望在构造函数中初始化的`Context.registerReceiver`方法中 the`newField`为 1 `MyBroadcastReceiver`。但是你会得到值 0。

另请参阅以下 SO 问题以获取更多信息和更多可能出现的潜在问题：[在 java 构造函数中传递“this”](https://stackoverflow.com/questions/2419410/passing-this-in-java-constructor)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-01T08:51:03.653

是的，它有效。我尝试了一个简单的测试用例。它有效。：

```
public class Test {
    private int variable;
    private Test2 test2;

    public Test(int variable, Test2 test2) {
        this.variable = variable;
        this.test2 = test2;
        test2.printTest(this);
    }

    public int getVariable() {
        return variable;
    }

    public static void main(String[] args) {
        Test test = new Test(111111,new Test2());
    }
}
class Test2{

    Test2() {
    }

    public void printTest(Test test){
        System.out.println(test.getVariable());
    }
} 
```

它就像一个魅力

# c - Openssl 中 RSA 结构的大小和公钥的大小

> ID：12226283
> 
> 赞同：1
> 
> 时间：2012-09-01T08:42:04.383
> 
> 标签：c, openssl, rsa

为什么如果我调用`RSA_size()`一个 RSA 对象，我获得的值会小于`i2d_RSAPublicKey`在同一个 RSA 对象上调用的（公钥的大小）的返回值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:50:06.853

因为`i2d_RSAPublicKey`为您提供了密钥的 PKCS#1 编码版本，包括公共指数和 DER 元素。

`RSA_size()`只为您提供纯模数的字节大小（这也是该密钥的任何未编码签名或密文的大小）。

# java - 春季计划作业中的休眠延迟初始化异常

> ID：12226284
> 
> 赞同：6
> 
> 时间：2012-09-01T08:42:31.193
> 
> 标签：java, spring, hibernate

我有一个春季计划作业 ( `@Scheduled`)，它根据数据库中的收件人列表从我的系统发送电子邮件。

该方法使用注解进行`@Scheduled`注解，它从另一个接口调用方法，接口中的方法使用注解进行`@Transactional`注解。

现在，当我手动调用预定方法时，它可以完美运行。但是当弹簧调度程序调用该方法时，我在实现所述接口的方法中得到 LazyInitFailed 异常。

我究竟做错了什么？

代码：

预定方法：

```
@Component
public class ScheduledReportsSender {

    public static final int MAX_RETIRES = 3;
    public static final long HALF_HOUR = 1000 * 60 * 30; 

    @Autowired
    IScheduledReportDAO scheduledReportDAO;

    @Autowired
    IDataService dataService;

    @Autowired
    IErrorService errorService;

    @Scheduled(cron = "0 0 3 ? * *") // every day at 2:10AM
    public void runDailyReports() {
        // get all daily reports
        List<ScheduledReport> scheduledReports = scheduledReportDAO.getDaily();
        sendScheduledReports(scheduledReports);
    }

    private void sendScheduledReports(List<ScheduledReport> scheduledReports) {
        if(scheduledReports.size()<1) {
            return;
        }
        //check if data flow ended its process by checking the report_last_updated table in dwh
        int reportTimeId = scheduledReportDAO.getReportTimeId();
        String todayTimeId = DateUtils.getTimeid(DateUtils.getTodayDate());
        int yesterdayTimeId = Integer.parseInt(DateUtils.addDaysSafe(todayTimeId, -1));
        int counter = 0;

        //wait for time id to update from the daily flow
        while (reportTimeId != yesterdayTimeId && counter < MAX_RETIRES) {
            errorService.logException("Daily report sender, data not ready. Will try again in one hour.", null, null, null);
            try {
                Thread.sleep(HALF_HOUR);
            } catch (InterruptedException ignore) {}
            reportTimeId = scheduledReportDAO.getReportTimeId();
            counter++;
        }

        if (counter == MAX_RETIRES) {
            MarketplaceServiceException mse = new MarketplaceServiceException();
            mse.setMessage("Data flow not done for today, reports are not sent.");
            throw mse;
        }

        // get updated timeid
        updateTimeId();

        for (ScheduledReport scheduledReport : scheduledReports) {
            dataService.generateScheduledReport(scheduledReport);
        }
    }

} 
```

调用接口：

```
public interface IDataService {

    @Transactional
    public void generateScheduledReport(ScheduledReport scheduledReport);
} 
```

实现（直到异常行）：

```
@Service
public class DataService implements IDataService {

public void generateScheduledReport(ScheduledReport scheduledReport) {

        // if no recipients or no export type - return
        if(scheduledReport.getRecipients()==null || scheduledReport.getRecipients().size()==0 || scheduledReport.getExportType() == null) {
            return;
        }
}
} 
```

堆栈跟踪：

```
ERROR: 2012-09-01 03:30:00,365 [Scheduler-15] LazyInitializationException.<init>(42) | failed to lazily initialize a collection of role: com.x.model.scheduledReports.ScheduledReport.recipients, no session or session was closed
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.x.model.scheduledReports.ScheduledReport.recipients, no session or session was closed
        at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:383)
        at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:375)
        at org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:122)
        at org.hibernate.collection.PersistentBag.size(PersistentBag.java:248)
        at com.x.service.DataService.generateScheduledReport(DataService.java:219)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy208.generateScheduledReport(Unknown Source)
        at com.x.scheduledJobs.ScheduledReportsSender.sendScheduledReports(ScheduledReportsSender.java:85)
        at com.x.scheduledJobs.ScheduledReportsSender.runDailyReports(ScheduledReportsSender.java:38)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)
        at org.springframework.scheduling.support.MethodInvokingRunnable.run(MethodInvokingRunnable.java:65)
        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:51)
        at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:165)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:636)
ERROR: 2012-09-01 03:30:00,366 [Scheduler-15] MethodInvokingRunnable.run(68) | Invocation of method 'runDailyReports' on target class [class com.x.scheduledJobs.ScheduledReportsSender] failed
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.x.model.scheduledReports.ScheduledReport.recipients, no session or session was closed
        at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:383)
        at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:375)
        at org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:122)
        at org.hibernate.collection.PersistentBag.size(PersistentBag.java:248)
        at com.x.service.DataService.generateScheduledReport(DataService.java:219)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy208.generateScheduledReport(Unknown Source)
        at com.x.scheduledJobs.ScheduledReportsSender.sendScheduledReports(ScheduledReportsSender.java:85)
        at com.x.scheduledJobs.ScheduledReportsSender.runDailyReports(ScheduledReportsSender.java:38)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)
        at org.springframework.scheduling.support.MethodInvokingRunnable.run(MethodInvokingRunnable.java:65)
        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:51)
        at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:165)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:636) 
```

getReportTimeid 实现：

```
@Override
    public int getReportTimeId() {
        Query query = super.entityManager.createNativeQuery("select timeid from lgdwh.report_last_updated order by timeid desc limit 1");
        return (Integer) query.getSingleResult();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:36:19.300

问题是我从调度类中的数据库中提取一个对象并将其传递给一个对对象起作用的类，我的解决方案是在将它传递给执行工作的类之前初始化调度类中的对象.

# jquery - 编辑在另一个可调整大小的 div 中放置一个小 div，而不会干扰容器的内容

> ID：12226285
> 
> 赞同：1
> 
> 时间：2012-09-01T08:42:35.070
> 
> 标签：jquery, css, html, positioning, resizable

我在这里有一个 jsfiddle：http: [//jsfiddle.net/asaakius/5nGYS/7/](http://jsfiddle.net/asaakius/5nGYS/7/)

你会注意到这个`$(#menu)`带有字母“v”的小 div，如果我删除这个 div，textarea 和 textbox 会根据需要对齐，并且调整大小时两个 div 的位置完全同步。

但是当我添加`$(#menu)`div 时它会变得混乱。我只希望小菜单 div 位于 的右上角`$(#textarea)`，而不会干扰其中的文本，也不会干扰 and 的`$(#textarea)`对齐`$(#textbox)`。我的意思是，我希望它在文本上方可见，就像它具有更高的 z-index 一样（它是一个小菜单的开头）。

## 编辑

我刚刚意识到，如果我保持菜单的位置：绝对，它就会留在容器中。但是如何保持它在右侧呢？我希望它始终位于右上角，无论调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:51:12.433

将#menu 的样式更改为：

```
#menu{ right: 0; color:red; position:absolute; }​ 
```

`Float:right`导致下一个 div 围绕它流动，`position:absolute;`使其完全脱离流动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:55:00.803

您不能将 div 的位置与相对位置重叠以获得更高的 z-index。您必须在菜单 div 上使用 position:absolute。并正确：0；坚持向右。可以选择将更高的 z-index 应用于菜单 div。见例子：http: [//jsfiddle.net/5nGYS/10/](http://jsfiddle.net/5nGYS/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:04:12.313

作为记录，如果您修改布局，您可以使用`position`to 。`relative`

```
<div id="textbox" class="textbox" style="top: 10px; left: 10px;">
  <span id='menu'>v</span>
  <span Hello there
</div> 
```

带零`border`和`padding`.

```
#menu {
  ...
  padding: 0;
  border: 0;
}​ 
```

# entity-framework - EntityFramework Query select (contains) (所有有种植苹果的农民的村庄)

> ID：12226286
> 
> 赞同：0
> 
> 时间：2012-09-01T08:43:03.487
> 
> 标签：entity-framework

```
village(id, list(farmers))
farmer(id, List(fruits));
fruit(id,name). 
```

我将如何编写一个查询来选择所有拥有 ID 为 23 的水果（例如苹果）的村庄？

用 2 个查询很容易写出来。你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:27:49.997

尝试

```
var villages = db.Villages
          .Where(v => v.Farmaers.Any(f => f.Fruits.Any(t => t.Id == 23))); 
```

# java - Java - Jena API - 获取多个数据类型属性

> ID：12226295
> 
> 赞同：0
> 
> 时间：2012-09-01T08:45:02.213
> 
> 标签：java, rdf, jena, object-properties

我正在使用 Java 和 Jena API。我有一个***类婚姻***，它有 3 个对象属性，称为**"hasHusband"**、**"Haswife"**和**"dateOfMarriage"**。前两个与具有数据类型**属性 hasFirstName**、**hasLastName**、**dateOfBirth** ...的***类 Person相关联。***

 ******通过下面的代码，我可以访问丈夫的 hasFirstName 属性。

```
StmtIterator iter = onto.model.listStatements(null,onto.hasHusband,(RDFNode)null);  
while (iter.hasNext()) {
    Statement stmt = iter.nextStatement();  
    Resource P = ((Resource) stmt.getObject());

    StmtIterator iter2 = onto.model.listStatements(((Resource) P),onto.hasFirstName,(RDFNode)null);  
    while (iter2.hasNext()) {
         Statement stmt2 = iter2.nextStatement();  
         firstnameHusband = stmt2.getObject().toString();
    }} 
```

**我想修改这一行**

```
 StmtIterator iter2 = onto.model.listStatements(((Resource) P),onto.hasFirstName,(RDFNode)null); 
```

**为了访问 hasLastName 和 hasDateofBirth...**

你能解释一下我该怎么做吗？

谢谢

**已编辑：@Pierre** 现在它只涉及 Person 类。如果是女性，我想在一个新文件（文本文件）中*为每个女性*输出以下这一行：

```
[label= \"" +firstName+ " \"\n\n\"D.Naiss:"+dnai1+"\", "+shape2+"] 
```

对于*每个人来说*：

```
[label= \"" +firstName+ " \"\n\n\"D.Naiss:"+dnai1+"\", "+shape+"] 
```

区别在于形状的价值。我的问题是他只输出一个女人和一个男人。

一个人在我的 rdf 文件中是这样表示的：

```
 <rdf:Description rdf:about="http://www.fam.com/FAM#Bruno04/02/1980 ">
    <j.0:FAMhasGender>H</j.0:FAMhasGender>
    <j.0:FAMhasDateOfBirth>04/02/1980</j.0:FAMhasDateOfBirth>
    <j.0:FAMhasLastName>DS </j.0:FAMhasLastName>
    <j.0:FAMhasFirstName> Bruno</j.0:FAMhasFirstName>
  </rdf:Description> 
```

以下是相关代码：

```
public void accessProp() {

    readFile(inputFile); // rdf
    String fname;
    String dd;
    String gen;

    ExtendedIterator instances = onto.person.listInstances();
    Individual instance = null;
    Individual firstInstance = null;
    while (instances.hasNext()) {
        instance = (Individual) instances.next();

        gen = instance.getPropertyValue(onto.hasGender).toString();
        fname = instance.getPropertyValue(onto.hasFirstName).toString();
        dd = instance.getPropertyValue(onto.hasDateOfBirth).toString();

        writeFile(fname, dd, genr);
    }
}

// Write text file
public void writeFile(String fn, String dbir, String gn) {
    String fileout = "D:/file1.txt";
    String firstName = fn;
    String dateB = dbir;
    String gender = gn;

    BufferedWriter out;
    try {
        out = new BufferedWriter(new FileWriter(fileout, true));

        if (gender.equals("F")) {
            out.write("[label= \"" + firstName + " \"\n\n\"D.Naiss:" + dnai1 + "\", " + shape + "]");
        }

        else if (gender.equals("M")) {
            out.write("[label= \"" + firstName + " \"\n\n\"D.Naiss:" + dnai1 + "\", " + shape2 + "]");
        }

        out.newLine();

        // flushes and closes the stream
        out.close();
    } catch (IOException e) {
        System.out.println("There was a problem:" + e);
    }
} 
```

你能告诉我该怎么做才能解决我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T16:29:27.500

如果我理解问题的意图，您需要一个迭代器，为您提供每个资源的名字、姓氏、出生日期等。迭代器将是每个资源一行。

这就是 SPARQL 可以为您做的事情。

概述：

```
PREFIX  : ...
SELECT *
{   ?z :hasHusband      ?p .
    ?p :hasFirstName    ?firstName ;
       :hasLastName     ?lastName ;
       :hasDateOfBirth  ?dob ;
    .
 } 
```

并查询 on.model。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T11:07:17.143

创建一个辅助函数来获取特定属性：

```
public RDFNode getProperty(Resource subject,Property prop)
   {
   RDFNode object=null;
   StmtIterator iter2 = this.onto.model.listStatements(subject,prop,(RDFNode)null);  
    while (iter2.hasNext()) {
         object = iter2.nextStatement().getObject();
         break;
    }}
   iter2.close();
   return object;
   }

public String getPropertyAsString(Resource subject,Property prop)
   {
   RDFNode object=getProperty(subject,prop);
   return object==null?null:object.toString();
   }

(...)
String s1=getPropertyAsString(P,onto.hasFirstName);
String s2=getPropertyAsString(P,onto.hasLastName);
(...) 
```******

# iphone - 如何允许用户在 UITextField 中输入法文字符？

> ID：12226300
> 
> 赞同：-4
> 
> 时间：2012-09-01T08:45:35.220
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

我无法搜索带有特殊字符 (éàùçêî...) 的术语，例如：Bérubé 或 Système

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:51:58.900

通过进入设置将法语键盘包含在您的模拟器中。相应地在`UITextField`当时搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:19:24.147

假设用户正在使用基于拉丁字符集的键盘（例如美国英语或法语），他们只需在软键盘上按住相关字母（例如“e”）即可访问到“é”的重音变体等等。用户可能不知道这一点，因此您可能需要在您的应用（或网站）帮助系统中指导他们如何执行此操作。

如果他们使用的是非拉丁键盘，那就更棘手了。然后用户需要在 Settings.app 中通过 General->International->Keyboards 添加一个额外的拉丁键盘（例如美国英语或法语），然后通过点击现在出现在其软键盘上的地球键来选择相关键盘。

# asp.net-mvc - asp.net mvc 嵌套模型返回空值

> ID：12226301
> 
> 赞同：0
> 
> 时间：2012-09-01T08:45:48.107
> 
> 标签：asp.net-mvc

我正在做一个 ASP.NET MVC 项目，我有一个嵌套模型如下：

```
public class A
.........

public class B
.............

public class AB
{
  public A _a;
  public B _b;
  public AB()
  {
    _a = new A();
    _b = new B();
  }
} 
```

在控制器中：

```
public ActionResult Create()
{
  AB model = new AB();
  return View(model);
}

[HttpPost]
public ActionResult Create(AB abModel)
{
  //all properties of abModel._a and abModel._b are null 
  return View(abModel);
} 
```

我的视图是 AB 模型类的强类型视图，我不知道为什么所有回发的值都是空的，这只发生在嵌套模型中。我错过了什么吗？

谢谢你帮助我

@rene 提议的更新模型

```
public class AB
{
  public A _a {get; set};
  public B _b {get; set};
  public AB()
  {
    _a = new A();
    _b = new B();
  }
} 
```

查看代码：

```
 @model TestMVC.AB    
    @{
        ViewBag.Title = "Create";
    }
    @using (Html.BeginForm()) {
     @Html.ValidationSummary(true)
       <table cellspacing="0" cellpadding="0" class="forms">

       <tbody>
              <tr><th>
            @Html.LabelFor(model => model._a.ClientName)
      </th>
      <td>
            @Html.TextBoxFor(model => model._a.ClientName, new { @class = "inputbox"})
            @Html.ValidationMessageFor(model => model._a.ClientName)
       </td></tr>
      <tr><th></th><td><input type="submit" value="Create" /></td></tr>
      </tbody></table>

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:50:21.223

MVC 模型绑定器仅绑定到属性而不绑定到字段。这个模型适用于我在 MVC3 中的控制器和视图

按如下方式更改模型类：

```
public class A
{
    public string ClientName { get; set; }
}

public class B
{
    public string Address { get; set; }
}

public class AB
{
    public A  _a { get; set;}
    public B _b { get; set;  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:56:06.103

为了让模型绑定器捕获它们，它们需要在 HTML 表单中命名为子属性。根据您构建视图的方式，它们可能不会自动生成。检查您的表格

```
<input name="_a.descendant"> 
```

如果您的子属性具有模板并且没有自动使用它们，则可能需要：

```
@{ Html.RenderPartial("Template_A", Model._a, new ViewDataDictionary {
    TemplateInfo = new System.Web.Mvc.TemplateInfo {
         HtmlFieldPrefix = "_a"
    }
});} 
```

# python - Python范围问题

> ID：12226302
> 
> 赞同：1
> 
> 时间：2012-09-01T08:45:51.150
> 
> 标签：python, while-loop, range

我正在编写一个程序，它需要确定数字的范围，就好像我将 15 放在 user_input 'a' 中，所以它应该打印从 'a' 到 'b' 的范围，但不幸的是我无法解决它可以任何人请帮我解决这个问题。这是我的代码：

```
a = int(raw_input("How many did you say you're going to count down? "))
b = int(raw_input("When are you actually going to stop? "))
i = 0
for i in range(a, b):
    i = i + 1
    print i 
```

我希望它像这样工作：

```
How many did you say you're going to count down? 15
When are you actually going to stop? 8
15
14
13
12
11
10
9
8 
```

或者

```
How many did you say you're going to count down? 6
When are you actually going to stop? 4
6
5
4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:48:35.463

循环可以是：

```
a = int(raw_input("How many did you say you're going to count down? "))
b = int(raw_input("When are you actually going to stop? "))

for i in range(a, b-1, -1):
    print i 
```

（假设计数减少）。

你必须知道的是：

1.  `for`循环会为您减量（不需要`i = i-1`像 C 中的那样）。
2.  `range(a, b-1, -1)`是一个列表（在 Python 2 中），从`a`到`b-1`（不包括在内），按`-1`. 例如，您可以尝试在 Python shell 中执行此操作`print range(10, 5, -1)`。您还可以检查 , 的输出`range(5, 11, 2)`以更好地了解`range()`它的作用。

# struts2 - 在struts2中使用瓦片

> ID：12226304
> 
> 赞同：3
> 
> 时间：2012-09-01T08:46:08.823
> 
> 标签：struts2, tile

我正在关注 Struts2 中的 Tile 教程，但遇到了以下错误：

```
SEVERE: Error configuring application listener of class org.apache.struts2.tiles.StrutsTilesListener
java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
at org.apache.tiles.web.startup.AbstractTilesListener.<init>(AbstractTilesListener.java:44)
at org.apache.tiles.web.startup.TilesListener.<init>(TilesListener.java:38)
at org.apache.struts2.tiles.StrutsTilesListener.<init>(StrutsTilesListener.java:48)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at  sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at     sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:125)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4715)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
    Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 20 more
Sep 1, 2012 6:43:25 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Skipped installing application listeners due to previous error(s)
Sep 1, 2012 6:43:25 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Sep 1, 2012 6:43:25 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/Tiles] startup failed due to previous errors
Sep 1, 2012 6:43:25 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-2005"]
Sep 1, 2012 6:43:25 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Sep 1, 2012 6:43:25 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1990 ms 
```

我的 Web-Content/lib 文件夹中的所有 jar 文件如下：

```
axis.jar
axis2.war
axis2-1.6.2-bin.zip
axis2-1.6.2-src.zip
commons-beanutils-1.8.0.jar
commons-collections-3.2.1.jar
commons-digester-2.1.jar
commons-discovery-0.2.jar
commons-fileupload-1.2.1.jar
commons-io-1.3.2.jar
commons-lang-2.3.jar
commons-logging.jar
commons-logging-api-1.1.jar
commons-validator-1.3.1.jar
freemarker-2.3.15.jar
freemarker-2.3.16.jar
javassist-3.7.1.GA.jar
jaxrpc.jar
jdom-1.1.jar
json-lib-2.1-jdk15.jar
junit-4.8.2.jar
mysql-connector-java-5.1.17.jar
ognl-3.0.jar
saaj.jar
saaj-api-1.3.jar
spring-beans-2.5.6.jar
spring-context-2.5.6.jar
spring-core-2.5.6.jar
spring-test-2.5.6.jar
spring-web-2.5.6.jar
sqlitejdbc-v056.jar
struts2-core-2.2.1.jar
struts2-dojo-plugin-2.2.1.jar
struts2-json-plugin-2.2.1.jar
struts2-junit-plugin-2.2.1.jar
struts2-spring-plugin-2.2.1.jar
struts2-tiles-plugin-2.2.1.jar
tiles-api-2.2.1.jar
tiles-compat-2.2.1.jar
tiles-core-2.2.1.jar
tiles-extras-2.2.1.jar
tiles-jsp-2.2.1.jar
tiles-portlet-2.2.1.jar
tiles-servlet-2.2.1.jar
wsdl4j.jar
xstream-1.2.2.jar
xwork-core-2.2.1.jar 
```

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T18:01:03.103

您添加错误消息说丢失的库；Slf4J。

看起来您正在尝试手动进行依赖管理——IMO 这是一个非常糟糕的主意。它使升级困难、部署困难、难以理解编译、测试和部署要求之间的差异等等。

例如，为什么要部署源 jar 或 junit？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T19:01:37.853

如果您收到以下错误：java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory at org.apache.tiles.web.startup.AbstractTilesListener。

添加此依赖项

```
<dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-core</artifactId>
            <version>2.2.2</version>
        </dependency> 
```

或添加这个罐子：slf4j-api-1.5.8.jar jcl-over-slf4j-1.5.8.jar

# php - shell_exec() 不执行 pdftotext 命令

> ID：12226310
> 
> 赞同：2
> 
> 时间：2012-09-01T08:46:42.770
> 
> 标签：php, shell-exec, pdftotext, xpdf

我安装了所需的库及其在终端中的工作，但不在我的 php 文件中。我的代码是：

```
$mypdf = shell_exec('/usr/local/bin/pdftotext test.pdf test.txt');
echo $mypdf; 
```

`/usr/local/bin/pdftotext test.pdf test.txt`如果我在终端中执行此命令，它工作正常。

我也写我的代码这种类型：

```
shell_exec('/usr/local/bin/pdftotext test.pdf test.txt');
$mypdf = file_get_contents("test.txt");
echo $mypdf; 
```

在错误日志中，消息是：

```
/usr/local/bin/pdftotext: /opt/lampp/lib/libgcc_s.so.1: version `GCC_4.2.0' not found (required by /usr/lib/i386-linux-gnu/libstdc++.so.6) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:54:42.097

我的猜测是您希望`$mypdf`包含 PDF 文档，而不是执行命令的返回值。如果您尝试打印出“test.txt”，则需要将其加载并打印出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:16:47.843

问题是：`/usr/local/bin/pdftotext: /opt/lampp/lib/libgcc_s.so.1: version 'GCC_4.2.0' not found (required by /usr/lib/i386-linux-gnu/libstdc++.so.6)`

解决方案是重命名`/opt/lampp/lib/libgcc_s.so.1`并`libgcc_s.so.1.bak`解决我的问题。但令人困惑的是其中的问题是什么：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:28:20.693

我认为您在依赖方面遇到了一些麻烦。检查您的`error.log`. 找出丢失的文件并将其添加到您的 php 安装的路径环境变量中。

# javascript - 使用 Javascript 或 Jquery 获取自定义属性的值

> ID：12226311
> 
> 赞同：45
> 
> 时间：2012-09-01T08:46:47.440
> 
> 标签：javascript, jquery, attributes

如何使用 javascript 或 jquery 获取自定义属性的值？

像

```
<strong id="the id" original-title="I NEED THIS"> 
```

我试过`.getAttribute() and attr()`..(Javascrupt & jQuery) 没有成功任何想法？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-01T08:55:29.140

不要在 id 中使用空格。

添加自定义属性会使您的 html 无效。改用`data-attributes`：

```
<strong id="the_id" data-original-title="I NEED THIS">

$('#the_id').data('original-title'); 
```

[http://jsbin.com/akoyut/2/edit](http://jsbin.com/akoyut/2/edit)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-09-01T09:00:03.853

将“id”更改为“the_id”。

您可以使用纯 javascript 来做到这一点：

```
document.getElementById("the_id").getAttribute("original-title"); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-11-20T06:21:53.407

像这样使用的最佳方式：

```
jQuery(this).attr('original-title'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-01T08:48:18.637

您可以使用以下语法获取值

```
$('#theid').attr('original-title'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-19T06:30:15.507

```
a var DateofEvent = $('[data-original-title=I NEED THIS]').val(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-01T08:59:01.540

如果*必须*在 id 中使用空格，则检索元素和属性值，如下所示：

```
$('[id="the id"]').attr([some attribute string]);
//or
$('#the\\ id').attr([some attribute string]); 
```

对于自定义属性，最好使用 HTML5`data-[somelabel]`属性，它是向后兼容和标准化的。所以在你的情况下是这样的：

```
<strong id="the id" data-originalTitle="I NEED THIS"> 
```

[阅读有关数据属性的更多信息](http://html5doctor.com/html5-custom-data-attributes/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-13T07:42:53.910

我这样做是因为我在 foreach 中需要它

```
$(this).data('original-title') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-01T08:49:01.410

```
$('#the<remove space from here>id').attr('original-title'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-01T08:57:51.797

以下是一个工作示例：

Javascript：

```
$(document).ready(function() {    
  var title = $("#the_id").attr("original-title");
} 
```

html:

```
<strong id="the_id" original-title="I NEED THIS"></strong> 
```

# maven - Maven 和 emma 插件

> ID：12226313
> 
> 赞同：0
> 
> 时间：2012-09-01T08:47:44.873
> 
> 标签：maven, osgi, emma

如果某些要检测的捆绑包拼写错误或未生成 target/coverage/coverage.xml 文件报告，如何将 maven 构建配置为失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:46:12.410

我没有检查，尝试：

```
<build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-verifier-plugin</artifactId>
        <version>1.0</version>
        <configuration>
          <verificationFile>target/coverage/coverage.xml</verificationFile>
        </configuration>
        <executions>
          <execution>
            <id>main</id>
            <phase>package</phase>
            <goals>
              <goal>verify</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

# boost-spirit - boost::spirit::qi 为什么递归解析器不能按预期工作？

> ID：12226314
> 
> 赞同：1
> 
> 时间：2012-09-01T08:47:45.390
> 
> 标签：boost-spirit, boost-spirit-qi

我想要下面的语法来解析输入，例如

```
a_end
a_b_end
a_b_c_end 
```

但它只解析`a_end`并失败超过一个的任何东西`_`。这是语法：

```
template < typename Iterator >
struct recursive_parser : qi::grammar< Iterator >
{
    qi::rule< Iterator > start;
    qi::rule< Iterator > end;
    recursive_parser() : recursive_parser::base_type( start )
    {
        using namespace qi;
        end = string("_end") | start;
        start = +(char_ - '_') >> end;
    }
}; 
```

规则不是为递归使用而设计的，还是我遗漏了一些更明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:40:08.417

使用您的语法和输入字符串，`a_b_end`我们会进行以下解析：

```
In Start: consume "a". Iterate into end.
In End:   The next part of the string is not "_end", so the first alternative fails.
          Try the second alternative, which is to iterate into start.
In Start: The next character is a "_", so start fails. 
```

所以你的语法应该是：

```
end = string("end") | start;
start = +(char_ - '_') >> '_' >> end; 
```

# ios - CALayer内存管理

> ID：12226323
> 
> 赞同：0
> 
> 时间：2012-09-01T08:49:11.030
> 
> 标签：ios, xcode

我发现 CALayer 占用了大量内存。由于我有很多图像，删除图层，我已经看到它非常快：

```
CALayer * l = [image1 layer];
[l setMasksToBounds:YES];
[l setCornerRadius:6.0]; 
```

我可以这样做吗：

```
image1.layer.cornerRadius = 6.0;
                image1.layer.masksToBounds = YES; 
```

会不会占内存少？？有没有别的办法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:51:33.577

不，它不会占用更少的内存。在变量中存储对对象的引用不会复制对象 - 这两种方法是等效的，而且都是正确的。

# visual-studio-2010 - Mercurial 存储库和 MSVS - 两个项目和共享文件

> ID：12226326
> 
> 赞同：1
> 
> 时间：2012-09-01T08:49:31.423
> 
> 标签：visual-studio-2010, mercurial, repository, hardlink, shared-file

我目前正在 MS VS2010 中开发一个基于客户端-服务器架构的应用程序，VS 中的每个部分都有一个项目。直到最近，他们都在 Hg 中拥有自己的存储库，但我决定将它们移动到一起，因为现在共享了很多文件。

我一直在使用硬链接来确保将一个文件上的更改传播到另一个文件夹/项目中的同一文件。但是，如果您克隆存储库或从在线存储库中签出，则硬链接会损坏。

我已经尽可能多地阅读了 Hg 的软链接和硬链接，在这一点上，它们似乎都不是一个好的、可移植的解决方案。您建议在两个项目之间共享文件的哪种方法，请记住，理想情况下，我希望在 VS 中也反映一个干净的结构？

最好的问候，马克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:07:38.730

您可以使用 Mercurial 的[子存储库功能](http://mercurial.selenic.com/wiki/Subrepository)将共享文件放在外部存储库中，并在您需要的地方共享。还有[来宾存储库扩展](http://mercurial.selenic.com/wiki/GuestrepoExtension)，它比子存储库相对更新和轻量级。

但是，我不会在版本控制中解决它，而是重新安排您的 Visual Studio 项目，以便您的共享代码编译为您的客户端和服务器程序集使用和依赖的程序集。 **在汇编级别而不是代码级别共享代码。**

如果你真的必须保持现有的结构，我会使用 NTFS 连接（类似于 UNIX 风格的软链接）来连接共享代码需要去的地方。然后，您会将这些联结添加到存储库的忽略列表（在 中`.hgignore`）。创建一个您和其他开发人员可以运行的 PowerShell 脚本，该脚本将使用正确的联结初始化您的存储库。

# json - 使用 .text() 获取 JSON 数据的格式

> ID：12226329
> 
> 赞同：0
> 
> 时间：2012-09-01T08:50:04.220
> 
> 标签：json, formatting

我在用着：

```
function pipeCallback(obj) { 
```

获取 Yahoo 管道的内容（以 JSON 格式）。然后我在里面创建一个字符串：

```
document.write("<div......);
var buildstring = ".......;
document.write(buildstring);
document.write("</div>"); 
```

一切正常，除了字符串中的一项：

```
obj.value.items[x].description.content 
```

包含大量文本，并被剥离其格式。有没有办法定义一个 var（使用 .text()？）来保持格式，然后在字符串中使用定义的术语 - 例如：

```
var description = (obj.value.items[x].description.content).text() 
```

然后在 buildstring 中使用术语“描述”代替 obj.value.items[x].description.content。

感谢您的任何建议/帮助。

编辑

@Barmar 谢谢。我试过了（我认为......）：

```
var description = function() {return (obj.value.items[x].description.content).text()};

var buildstring = "<table><tr><img src=" + imageurl  + "> <b>" + obj.value.items[x].title + "</b><br /><td>" + description() + "</td></tr></table><br />"; 
```

（imageurl 是一个单独定义的变量）。我想我一定错过了你的建议的重点（或者一开始没有给出正确的信息）。无论如何..它没有工作。

编辑#2

```
function pipeCallback(obj) {
document.write("<div id=testdiv><b>LATEST NEWS</b><hr>");
var x;
for (x = 0; x < obj.count ; x++)
{

var imageurl = (typeof obj.value.items[x]["media:content"] == 'undefined') ? "http://default.png" : obj.value.items[x]["media:content"].url;

var buildstring = "<table><tr><img src=" + imageurl  + "> <b>" + obj.value.items[x].title + "</b><br /><td>" + obj.value.items[x].description.content + "</td></tr></table><br />";
document.write(buildstring);
buildstring = null;
}
document.write("</div>");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:13:35.233

你可以做：

```
var description = function() {return (obj.value.items[x].description.content).text()}; 
```

然后`description()`用来得到这个。

# javascript - 如何在不更改 mvc3 中的当前页面的情况下执行操作

> ID：12226334
> 
> 赞同：0
> 
> 时间：2012-09-01T08:50:26.683
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-events

我用 Javascript 是我最喜欢的产品是没有窗口。单击是按钮时，产品将获得我最喜欢的并刷新背景页面。我`MakeMyFavorite`在控制器中有操作，但每次调用都会返回**相同的结果。**

```
public ActionResult MakeMyFavorite( int id )
{
   ....
   return RedirectToAction( "Details", "Product", product );
} 
```

和 Javascript：

```
<script language="JavaScript" type="text/javascript">
    function confirmFavorite() {
        if (confirm("Are you sure make favorite?")) {
            document.location.reload(true);
            return true;
        } else {
            return false;
        }
    } 
</script> 
```

和链接：

```
<a href="@Html.Action ( "MakeMyFavorite", "Product", new { id = item.ID } )" 
     onclick = "return confirmFavorite()"> Make Favorite </a> 
```

我在站点的不同位置（详细信息、索引和其他视图）使用 **“收藏”**链接。单击链接时，产品被收藏，页面刷新，但始终打开详细信息视图。我在控制器中更改`ActionResult`了`void`，但从未打开，因为没有返回视图。我该怎么办，在网站的不同页面，当我点击**收藏**链接时，产品被收藏了，但背景页面没有改变？保持当前视图。（抱歉英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:23:50.677

当你想要重新加载时传入一个值 (true)，当你不想时传入一个值 (false 或无参数)：

```
<a href="@Html.Action ( "MakeMyFavorite", "Product", new { id = item.ID } )" 
 onclick = "return confirmFavorite( true )"> Make Favorite </a>

<a href="@Html.Action ( "MakeMyFavorite", "Product", new { id = item.ID } )" 
 onclick = "return confirmFavorite( false )"> Make Favorite </a> 
```

然后在js中：

```
function confirmFavorite( reload ) {
    if (confirm("Are you sure make favorite?")) {
        if( reload ) {
            document.location.reload(true);
        }
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:32:30.323

你可以这样做

做一个 JsonResult 动作

像

```
public JsonResult MakeMyFavorite(int id)
{
   ......
   string result = "favorite";
   return this.Json(result, JsonRequestBehavior.AllowGet);
} 
```

让你的锚标签像

```
<a href="#" id="myfav" onclick="confirmFavorite(@item.id);">Favorite</a> 
```

和你的 jquery 来处理这个

```
<script type="text/javascript">
    function confirmFavorite (id) {
        if(confirm("Are you sure make favorite?")) {
           var data = { "id": id };
           $.getJSON("/Product/MakeMyFavorite", data, function (data) {
               //check your data here what it is returning
               if($.trim(data)=="favorite")
               {
                //Do what you want to do.
               }
           });
        }
     }

</script> 
```

# javascript - 对 contenteditable div 中的元素使用焦点？

> ID：12226335
> 
> 赞同：3
> 
> 时间：2012-09-01T08:50:30.457
> 
> 标签：javascript, jquery, html, contenteditable

我正在尝试使用以下代码来引用集中在我的 contenteditable div 中的任何内容，其 id 为`rt`：

```
var lastfocused;
$("#rt *").focus(function () {
  lastfocused = $(this);
}); 
```

出于某种原因， lastfocused 始终等于`$("#rt");`，但绝不是可能在 contenteditable div 内的任何其他内容。我如何才能使内容可编辑 div 中的所有内容都存储在`lastfocused`变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:01:21.800

看起来你的问题在其他地方。上面的代码非常适合我：

[http://jsfiddle.net/8hZWq/](http://jsfiddle.net/8hZWq/)

**编辑**

如果子元素不是您所说的输入，而是 div - focus() 方法不适用于它们，因为它仅适用于输入、文本区域、选择等。

您还可以使用 .click() 而不是 focus() 来存储对最后单击元素的引用。但请记住，它还取决于元素的结构。

例如，如果您在子 div 中有多个级别的容器，则`#ID *`选择器实际上会从 #ID 开始多次触发每个级别的子级。

如果您希望仅存储对 #ID 的第一级子级的引用，则应使用`#ID > *`选择器仅引用直接子级。

如果您只想存储对被点击的元素的引用，而不管它与容器相关的级别，您应该使用点击事件目标引用：

```
var clicked;
$('#ID').click(function(event){
   clicked = $(event.target);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T07:25:40.503

事实上，你的问题是因为函数中的变量声明。设置它，在每个焦点事件中，“lastfocused”变量将被重新分配。

我来晚了，但如果我到达这里，其他人可以。

做这个：

```
$("#rt *").focus(function () {
   var lastfocused = $(this);
}); 
```

# java - EL 语法错误：表达式不能以二元运算符开头

> ID：12226351
> 
> 赞同：2
> 
> 时间：2012-09-01T08:52:25.043
> 
> 标签：java, eclipse, el

任何人都对我如何解决这个警告有任何创造性的想法？

> EL 语法错误：表达式不能以二元运算符开头

由以下代码引起：

```
String.format("#{myController.deleteItemById(%d)}", getId()) 
```

我的代码以前看起来像这样：

```
"#{myController.deleteItemById(" + getId() + ")}" 
```

但这导致eclipse产生以下警告：

> EL 语法错误：字符串未关闭

更新：

```
@ManagedBean(name = "myController")
@ViewScoped
public class MyController implements Serializable {

  private long id;
  private HtmlPanelGroup panel;

  public long getId() {return this.id; }

  private void getPanel() {

  /// bunch of code for programatically creating a form

    HtmlCommandButton deleteButton = new HtmlCommandButton();
    deleteButton.setId(id);
    deleteButton.setValue(value);
    deleteButton.setActionExpression(/* EL expression used here */);
   }
}

<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"> 
    <!-- some other elements removed for the sake of clarity -->      
    <h:body>
        <h:panelGroup binding="#{myController.panel}" />
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T14:51:13.293

您可以对方法进行注释`@SupressWarnings("el-syntax")`，Eclipse 将不再唠叨您。它会要求抑制未知的（对Java框架）抑制警告等。如果你不让它抑制，它会向注释添加警告。

.

**但是通过在运行时构建 EL 表达式，您将应用程序暴露给[EL Injection](https://www.owasp.org/index.php/Expression_Language_Injection)。**

.

有人可以通过注入方法调用和东西在您的服务器上运行恶意代码。

检查EL中间的字符串的来源是否来自完全安全的来源，

或[清理您的输入](http://xkcd.com/327/)以防止它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:10:53.703

您的`el`表达式虽然有效，但在运行时构造。但是 Eclipse 在开发/编译时会显示警告。因此，它现在可以在编译时检查`getId`运行时返回的内容，以便正确验证`el`表达式。

对于这种运行时构造的表达式，如果它们打扰您，您可以禁用来自 IDE 的警告。我个人不会禁用它们，所以他们会永远记住我，这是那个`el`表达的特别之处。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-01T09:06:29.270

```
"#{myController.deleteItemById(" + getId() + ")}" 
```

在这段代码中，我理解 myController 是您的托管 bean，而 deleteItemById 是您在该托管 Bean 中实现的方法，只需调用您的方法并在该方法中处理您想要的任何内容，获取您的 id 并在必要时实现您的 CRUD 操作，如果它在数据表中，您想发送可以使用的对象，如下所示：

```
 <h:dataTable value="#{bean.list}" var="item">
                <h:column><f:facet name="header">ID</f:facet>#{item.id}</h:column>
                <h:column><f:facet name="header">Value</f:facet>#{item.value}</h:column>
                <h:column><h:commandButton value="edit" action="#{bean.edit(item)}" /></h:column>
                <h:column><h:commandButton value="delete" action="#{bean.delete(item)}" /></h:column>
            </h:dataTable> 
```

请参阅[此处](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)（BalusC 的帖子“@ViewScoped 的好处和陷阱”）以获得完整的教程

# c# - 未显示将 HTML 转换为 PDF 精确副本

> ID：12226352
> 
> 赞同：2
> 
> 时间：2012-09-01T08:53:05.477
> 
> 标签：c#, asp.net, html, pdf-generation, wkhtmltopdf

我正在进行将 HTML 转换为 PDF 的研发。我们在 Asp.net 中创建了一个页面，并在其上放置了一个 CKEditor，其中包含选择字体、字体大小、邦德、斜体等简单选项。还有两个文本框，用户可以在其中输入要生成的 PDF 的高度和宽度. 除此之外，我们还有 div，它根据编辑器中插入的文本显示内容的预览。div 的高度和宽度是在运行时设置的，基本上我们想通过这个 div 来展示 pdf 的外观。我们正在使用 wkhtmltopdf exe 来生成 PDF。

现在我的问题是正在创建的 PDF 不是 Div 中显示的内容的精确副本，有时它会逐行显示确切的内容，但有时有些单词会移到 PDF 中的下一行

我们已经尝试了很多很多事情来达到确切的结果，但没有成功，任何帮助都是可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T20:50:24.880

您可能会尝试的一件事是使用 DOMPDF： [https ://code.google.com/p/dompdf/](https://code.google.com/p/dompdf/)

它经常更新，并且总是给我很好的结果。

另一个建议是创建特定于 PDF 的样式以获得所需的结果，然后在创建 PDF 时应用这些样式。

换句话说，如果您有一个“生成 pdf”按钮，则让它获取所有 HTML 内容，然后插入您在 PDF 生成器中测试过的 PDF 特定样式标签，使呈现与浏览器相同。你可以通过替换来做到这一点：

```
</head> 
```

和

```
<style>STYLES SPECIFIC TO PDF</style>
</head> 
```

创建 PDF 后。

根据我的经验，PDF 渲染通常需要一些额外的规则才能使其看起来像网络渲染引擎。

希望有帮助。

# javascript - 如何在mongodb中查询？

> ID：12226356
> 
> 赞同：3
> 
> 时间：2012-09-01T08:54:05.463
> 
> 标签：javascript, node.js, mongodb

我的收藏中有这份文件 foo

```
provincia:
  {
    cod_provincia:5,
    nom_provincia:'Cordoba'
  },
 localidad: 
  {
    cod_localidad:107,
    nom_localidad:'Cordoba'
  },
 barrio:
  {
    cod_barrio:0,
    nom_barrio:'Nva Cordoba'
  } 
```

我像这样在mongo提示符中查询

```
db.foo.find(
{
provincia:
      {
        cod_provincia:5,
        nom_provincia:'Cordoba'
      },
     localidad: 
      {
        cod_localidad:107,
        nom_localidad:'Cordoba'
      },
     barrio:
      {
        cod_barrio:0,
        nom_barrio:'Nva Cordoba'
      }
}) 
```

我的控制台中有这个结果

```
_id("5041a53dd163651512000001") 
```

但是当我查询时

```
db.foo.find(
{
provincia:
      {
        cod_provincia:5

      },
     localidad: 
  {
    cod_localidad:107,
    nom_localidad:'Cordoba'
  },
 barrio:
  {
    cod_barrio:0,
    nom_barrio:'Nva Cordoba'
      }
}) 
```

我什么都没有……这是为什么？？？我试图了解如何在没有 nom_provincia 的情况下查询所有文档

全部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:16:13.113

您需要使用点符号来访问嵌套对象：

```
db.test.find({ 
  'provincia.cod_provincia': 5,
  localidad: {
    cod_localidad:107,
    nom_localidad:'Cordoba'
  },
  barrio: {
    cod_barrio:0,
    nom_barrio:'Nva Cordoba'
  }
}) 
```

更多信息[在这里](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:46:33.803

那个部分

```
provincia:
      {
        cod_provincia:5
      }, 
```

搜索 provincia 子对象看起来完全一样的文档，没有 nom_provincia 字段。请改用点符号：

```
'provincia.cod_provincia':5, 
```

# game-engine - 平台游戏的基本 A Star 寻路。

> ID：12226359
> 
> 赞同：1
> 
> 时间：2012-09-01T08:54:42.543
> 
> 标签：game-engine, path-finding

我目前正在编写一个基本的平台游戏，其想法是学习 2D 游戏开发的基本模式。其中之一是惊人的 A Star Pathfinding。在阅读和研究了几篇文章之后（其中两篇最好：[http](http://www.policyalmanac.org/games/aStarTutorial.htm) ://www.policyalmanac.org/games/aStarTutorial.htm和 [http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html# S7](http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html#S7) )、教程和源代码，我使用曼哈顿方法做了一个简单的 A Star Pathfinding，非常适合我的个人学习过程。

下一步也是合乎逻辑的步骤是在平台场景中执行相同的操作，NPC 必须跳过或爬梯子才能到达目标。我发现这些截屏视频[http://www.youtube.com/watch?v=W2xoJfT6sek](http://www.youtube.com/watch?v=W2xoJfT6sek)和[https://www.youtube.com/watch?v=Bc7tu-KwfoU](https://www.youtube.com/watch?v=Bc7tu-KwfoU)完美地展示了我想做的事情。

目前我还没有找到任何资源来解释实现它的方法。有人可以给我一个可以合作的起点吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T09:00:06.887

据我所知，跳跃/梯子的唯一区别是它们会影响可能的运动。因此，您的算法所要做的就是考虑角色可以和不能移动到的位置，以及移动到那里的成本（如果您正在实施）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:18:46.513

我没有任何适合示例的干净 A* 代码，但让我在实现 A* 时给你一些指示。

首先，我经常发现在教程中被忽略的最基本技巧是*使用优先级队列*。

每当您生成可能的移动状态时，将它们放入优先级队列中，优先级是该移动状态的启发式值。这将 A* 与 DFS（使用堆栈和回溯）或简单的贪心寻路（相对于当前状态简单地进入最佳状态）区分开来。

接下来，请注意这些指示！我不知道你会用什么语言来实现它，但即使你用某种抽象指针的语言（不像 C）来实现它，你也必须理解*deep copy*与 plain *shallow copy*的概念。我记得我第一次做 A*（在 Python 中）时并没有注意这一点。我的状态被反复覆盖导致不可预测的行为。原来我没有做深拷贝！

也就是说，根据您所考虑的任务的复杂程度，所有这些深层副本可能会使您的记忆变得混乱。虽然良好的内存管理会有所帮助，但对于需要实际性能的大问题实例，我倾向于只使用迭代加深 A*，以便在每次迭代之后，我可以整理我的内存。

# dom - 使用 javascript 进行某些类型的 DOM 操作是否需要全局变量？

> ID：12226360
> 
> 赞同：0
> 
> 时间：2012-09-01T08:54:43.697
> 
> 标签：dom

在下面的示例代码中，我想知道为什么名为**child**的变量必须是全局的（无*var*）才能使代码正常工作。我还想知道下面的代码是否因为有一个全局变量而被认为是不好的做法，以及下面代码的更好实践的再现可能看起来如何。谢谢。

```
<!DOCTYPE html>
<meta charset="UTF-8">
<title>dom</title>

<div class="product">
<h2> Product Name </h2>
<img src="pic.jpg" />
<p> Description </p> </div>

<script>
var products = document.getElementsByClassName("product"), 

        child;   // how come var breaks the code ?

    for ( i = 0; i < products.length; i++) {
        child = products[i].firstChild;
        while (child.nodeType !== 1) {
            child = child.nextSibling;
        }
        console.log(child);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:01:06.607

您已经有一个`var`，因为在 child 之前有一个逗号。因此添加`var`会给你

```
var product, var child 
```

这是非法的。

`child`不是全局的，因为`var`在

```
var product, child 
```

适用于后面的整个变量列表`var`。（嗯，`child`无论如何都是全局的，因为它没有嵌套在 a 中`function`。但这与`var`或不无关`var`。）

如果你坚持要吃`var`两次，写

```
var product = ... ;
var child; 
```

# css - html代码中的颜色文本

> ID：12226364
> 
> 赞同：3
> 
> 时间：2012-09-01T08:55:17.227
> 
> 标签：css, html

我有一个单词 ONE_WORD，我想让它变大一点，更改文本样式并将其涂成红色。我怎样才能做到这一点？我尝试使用此代码，但它不起作用：

```
<font color="#B00000 ">ONE_WORD</font> 
```

谢谢，D.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T08:59:59.120

`Font`已弃用。`span`改为使用

```
<span class="word">Your Word</span> 
```

然后对其应用样式。

**CSS：**

```
.word
{
font-size:20px;
color:Red;
//Other styles
} 
```

`inline`不推荐使用样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T08:57:36.443

`font`已弃用。使用`<span>`和 CSS 应用特定样式：

```
<span style="color: #b00; font-size: 16px; font-style: italic;">ONE_WORD</span> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T08:58:50.423

使用属性样式编辑样式属性：

```
<span style="color:#B00000;">This is dark red.</span> 
```

更多信息：~~http~~ ://www.w3schools.com/html/html_css.asp （根据大众需求：使用[http://www.w3.org/Style/Examples/011/firstcss.en.html#colors](http://www.w3.org/Style/Examples/011/firstcss.en.html#colors)和[https ://developer.mozilla.org/en-US/docs/CSS/color](https://developer.mozilla.org/en-US/docs/CSS/color)代替。可能需要很长时间才能找到您在 w3.org 或 MDN 中寻找的内容，但正如所指出的那样，它们肯定更多比 w3schools.com 可靠的来源）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-01T09:01:48.510

你可以试试这个

***HTML 和内联 CSS***

```
<div class="text" style="color:red; font-size:20px;">ONE_WORD</div> 
```

***或使用以下 CSS***

```
.text{color:red; font-size:20px;} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-01T09:13:19.740

首先，想想你想要增加它的大小的原因。如果有一个 HTML 元素与该原因相匹配（例如`<em>` 强调），那么这就是要使用的元素：

```
<em>ONE_WORD</em> 
```

如果您在其他地方使用相同的元素但不希望其他用途具有相同的外观，则将其与类一起使用。类名也应该反映你的想法，导致你想要它更大：

```
<em class="ourName">ONE_WORD</em> 
```

如果没有自然匹配，请使用`<span>`.

```
<span class="ourName">ONE_WORD</span> 
```

然后在您的 CSS 中设置要匹配的样式。如果您选择第一个选择：

```
em
{
  color: red;
  font-size: 120%;
  font-style: italic;/*em does this by default, but we'll include it anyway*/
} 
```

如果您选择第二选择或第三选择，那么：

```
.ourName
{
  color: red;
  font-size: 120%;
  font-style: italic;
} 
```

或者例如仅将此样式应用于`<em>`具有该类的元素 - 并处理您使用相同类的其他元素：

```
em.ourName
{
  color: red;
  font-size: 120%;
  font-style: italic;/*em does this by default, but we'll include it anyway*/
} 
```

虽然这个词的更多工作只是将样式直接放在它上面，但将这种方法应用于您的整个站点将使其更简单、更快、更合乎逻辑，以便您以后理解，并且更快地进行更改。只需一份文件，它就会开始得到回报。将 CSS 放在单独的文件中将在第二页之后开始获得回报，并继续给予。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-01T08:57:22.373

`<span style="font-size: 20px; font-style: italic; color: red;">ONE_WORD</span>`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-01T08:57:43.257

**在style**中定义 CSS 属性。像这样写：

```
<font style="color:#B00000">ONE_WORD</font> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-01T08:59:09.457

你必须使用 style 属性来做到这一点：
`<font style="color: #B00000>ONE_WORD</font>"`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-01T12:40:14.100

如果发布的代码没有设置文本颜色，那么问题出在其他地方，可能在覆盖此设置的样式表中，或者在浏览器设置中（浏览器可以设置为忽略网页上建议的颜色）。

人们和组织有不同的意见，但从技术上讲，`font`标签仍然有效，您还可以在那里设置字体系列和大小，例如

```
<font color="#B00000" face="Verdana" size="4">ONE_WORD</font> 
```

然而，这是相当不灵活的，因为这里的字体大小由 1 到 7 的数字表示，因此 3 是正常大小，而其他大小则不同，取决于浏览器。为了获得更好的控制，您可以添加一段 CSS，例如

```
<font color="#B00000" face="Verdana" size="4"
      style="font-size: 135%">ONE_WORD</font> 
```

要将文本样式更改为斜体，您可以环绕`<i>`它`</i>`；获得粗体字体，使用`<b>`和`</b>`周围。

当然，您可以使用语义上的空`span`标记并在 CSS 中设置所有内容，尽管几乎没有实际理由这样做来设置单个单词的样式。

# ios - 如何更改应用资源？

> ID：12226369
> 
> 赞同：0
> 
> 时间：2012-09-01T08:56:18.400
> 
> 标签：ios, resources

我的应用程序中有一些 json 资源（txt 文件）。我不仅需要阅读它们，还需要以编程方式更改它们。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:09:52.663

将文件复制到 Documents 文件夹，然后您可以对其进行读写。存储在主包中的任何内容都是只读的。

有关更多信息，请参阅此答案：[iPhone（iOS）：将文件从主包复制到文档文件夹错误](https://stackoverflow.com/questions/3246109/iphone-ios-copying-files-from-main-bundle-to-documents-folder-error)

# java - 如何在 JAVA 中查看完整的异常日志？

> ID：12226375
> 
> 赞同：13
> 
> 时间：2012-09-01T08:56:56.053
> 
> 标签：java, exception-logging

**当我使用命令java ExceptionTest**运行一些 java 程序时，有时会省略异常，看起来像

```
Exception in thread "main" java.lang.NoClassDefFoundError: aa/bb/DD
        at SOMEWHERE(unknown source)
Caused by: java.lang.ClassNotFoundException: aaa.bbb.CC
        at SOMEWHER(unknown source)
        ... 13 more 
```

在这种情况下，我希望再看到 13 个例外。是否有查看所有异常日志的选项？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-01T09:05:21.520

你已经看到了，这只是 Java（和默认的 Logback）默认打印异常的荒谬方式。此堆栈跟踪：

```
Exception in thread "main" java.lang.NoClassDefFoundError: aa/bb/DD
        at SOMEWHERE(unknown source)
Caused by: java.lang.ClassNotFoundException: aaa.bbb.CC
        at SOMEWHER(unknown source)
        ... 13 more 
```

实际上是指以下程序流程（从下到上）：

```
Caused by: java.lang.ClassNotFoundException: aaa.bbb.CC
        at SOMEWHER(unknown source)
Exception in thread "main" java.lang.NoClassDefFoundError: aa/bb/DD
        at SOMEWHERE(unknown source) 
```

(在 Logback`... 13 more`中`N common frames omitted`) 仅表示这些异常之前已经打印过。在 Logback 中，您可以重组堆栈跟踪以避免重复并始终以正确的顺序打印堆栈行，请参阅[我的博客](http://nurkiewicz.blogspot.no/2011/09/logging-exceptions-root-cause-first.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T09:06:56.180

没有其他 13 个例外。调用堆栈还有 13 行与以前的调用堆栈相同，如下所述：http: [//java.sun.com/j2se/1.5.0/docs/api/java/lang/Throwable.html#printStackTrace](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Throwable.html#printStackTrace) ()

# batch-file - ibatis的SqlExecutor中如何设置statementList属性或多个子批处理

> ID：12226385
> 
> 赞同：0
> 
> 时间：2012-09-01T08:57:56.077
> 
> 标签：batch-file, ibatis, statements

我正在使用 ibatis-sqlmap-2.3.0 版本并且需要在表中插入大约 70K 行。

使用 SqlExecutor Batch 功能我还想知道在 executeBatch() 中间失败的语句索引；

以下是相同的代码片段。

```
 public Object doInSqlMapClient(SqlMapExecutor executor) throws SQLException {
    executor.startBatch();
    try {
   for (TableRow ar1 : AllRows) {
    executor.insert("myRates.insertData", ar1);
    }
    aBatchList = executor.executeBatchDetailed();
    } catch (BatchException e) {
     e.printStackTrace();
     System.out.println("failing exception " + e.getFailingSqlStatement());
     System.out.println("failing statement id " + e.getFailingStatementId());
     System.out.println("message exception is  " + e.getMessage());
     System.out.println(e.getSuccessfulBatchResults());
    } 
```

}

问题：当失败结果出现时，它给了我重复数据的错误消息“om.ibatis.sqlmap.engine.execution.BatchException：子批次编号1失败”。

索引 1 是错误的，因为我知道重复条目位于其他行。

原因：我检查了这个 jar 的代码，它只考虑由我所有的 executor.insert("ratesUtil.insertAreaData", ar1); 组成的单个语句。

因此索引为 1。

输出供您参考：

1) System.out.println("失败异常" + e.getFailingSqlStatement()); --insert into table values (?,?,?) 2)System.out.println("failing statement id " + e.getFailingStatementId()); 3)System.out.println("消息异常为" + e.getMessage()); --子批号 1 失败。4)System.out.println(e.getSuccessfulBatchResults()); - 无效的

请帮助我 1）如何将这些插入查询设置为单个执行器中的多个批处理语句，并在单个 executor.executeBatch() 中执行所有这些批处理语句；

2）有没有其他方法来获得失败语句的正确索引。

我无法根据项目配置的一些问题更改版本。也不想依赖 updateCount 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:50:22.890

您可以添加多个批次，而不是使用一个在批次中添加所有语句。这将使您了解哪个批次给您带来问题。但是这不是您问题的实际答案

# git - 网页开发工作流程

> ID：12226395
> 
> 赞同：7
> 
> 时间：2012-09-01T09:01:03.810
> 
> 标签：git, web

这绝对是我学习源代码控制的时候了，尤其是 git。

我做了很多 Web 开发，大部分时间我在实时生产服务器上做很多开发工作。我知道这真的很糟糕。

我只是不太了解本地开发然后使用 git 部署到实时站点是如何工作的。

以下是如何解决的：

1.  在我的本地机器上设置一个尽可能靠近我的 Web 服务器的环境

2.  创建一个 git 文件夹，我将在其中开发我的项目（或从实时服务器下载现有项目）。

3.  当我准备好推送我的更改时，将它们提交到 git 中。

我不确定的是：

*   如何将我的更改推送到实时服务器？
*   如果我不小心删除了本地副本怎么办？
*   我的数据库呢？如果我在本地机器上添加新表和数据，我是否也需要在我的实时服务器上手动进行这些更改？

* * *

**编辑**

是的，对不起，不够详细。

我在 Coda for Mac 中完成所有编码，我有几个不同的项目在进行中，但其中大部分是在 Apache 上运行的 PHP/YII。选择的数据库是 MySQL。

PHP 即将推出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T09:23:18.280

如果您的网站不需要编译，您可以选择直接从 Git 存储库部署它。

*   像往常一样在本地机器上进行开发。
*   经常将您的代码检查到 Github 或其他类似的站点
*   由于您不需要编译您的网站，您的 Git 副本几乎可以直接使用
*   您要么想从 APACHE 服务中排除 .git 目录，要么 在“git clone”之后[删除它们](https://stackoverflow.com/questions/160608/how-to-do-a-git-export-like-svn-export)

您的数据库是另一个问题。你可能会：

*   编写脚本来更改您的数据库，而不是在 UI 中进行更改
*   在某处（可能在数据库中）包含一个版本标记来标识当前模式
*   用数据库版本号命名您的脚本（我还保留了兼容性所需的相关代码修订的指示符 - 我自动用 Git 变更集 ID 标记它）
*   按顺序运行所有大于当前数据库版本的脚本（但不大于当前软件版本。我也编写了这个过程）

你在你的开发机器上零零碎碎地做这一切，就好像你在生产中做一样。到了该走的时候，您仍然可能真的想要测试：

*   使用友好的分支名称标记您的修订，例如 Release23a 或您选择的任何名称，以便您以后找到它
*   将您的生产数据库复制到测试环境（可能会在中途阻止升级的实时数据问题是一种痛苦）
*   将整个包部署到测试环境，运行 MySQL 脚本并执行 Git 导出（使用新分支名称）

然后，您可能会像往常一样继续工作并检查 Git。通常，您将在实现一段难看的代码的过程中，需要快速修补您的实时站点。但是您不想只是将代码破解到您的实时站点中。反而：

*   查看您的 Release23a
*   制作您的修补程序
*   像往常一样签入（它将保存到 Release23a 分支）
*   再次标记它，Release23b
*   像以前一样部署 (Release23b)
*   将 Release23b 合并回您的主代码行

关于分支的快速说明。您可以随时返回并按日期/时间获取您签入的任何版本，但按名称查找它们更容易。此外，一旦你分支，你可以*在那个分支上*工作，然后再次签入。现在，您的代码线出现了分歧。您正在对昨天的热度进行更改，它不会自动应用于今天的热度。如果你想要，你必须手动合并它。合并是说“Git 客户端，请尝试自动将 Release23a/Release23b *delta*中的所有代码编辑应用到我最近的热点”的过程。

如您所见，您可以使用 Git 提供一些非常酷的工具。假设您一直很好并且经常签到，删除您的本地代码不是问题。

请注意，Git 具有本地提交的概念。在您同步之前，这些不会将您的工作从硬盘驱动器崩溃中拯救出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T09:08:43.767

*   如何将我的更改推送到实时服务器？

我建议使用[GitHub](http://github.com)来托管您的存储库，或者创建您自己的私有存储库。然后你会`git clone`在你的开发文件夹中创建一个存储库，在你的生产服务器上也是如此。

您将对本地开发文件夹进行更改，准备就绪后，将它们推送到您的 GitHub 存储库。然后，您将进入服务器，并从 GitHub 存储库中提取更改。

*   如果我不小心删除了本地副本怎么办？

你在 GitHub 和你的生产服务器上还有另一个。

*   我的数据库呢？如果我在本地机器上添加新表和数据，我是否也需要在我的实时服务器上手动进行这些更改？

除非您有一个可以放入 git 的脚本，并且您没有发生任何数据库复制，否则您必须手动进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T09:24:39.817

这里有几个链接有助于回答您的几个问题。

对于 git 使用： [Git 工作流程](https://github.com/diaspora/diaspora/wiki/Git-Workflow/48f9c0a30007575a7a09939d5aaa95e9d53e0c21)

有关维护分支的指南：[分支模型](http://nvie.com/posts/a-successful-git-branching-model/)

用于更新服务器：[Fabric](http://docs.fabfile.org/en/1.4.3/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T00:35:10.250

我也是一个 Git 新手。然而，这个 Git 工作流模型在设置后似乎是独一无二且简单的：

[http://joemaller.com/990/a-web-focused-git-workflow/](http://joemaller.com/990/a-web-focused-git-workflow/)

它可能不适合您，但是一旦您了解了 Git 的工作原理，它可能会提供一种低维护的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-15T03:39:49.610

如果您需要帮助设置本地/git/live 环境，这里是个好去处：[http ://www.mybringback.com/bringers/14509/git-local-and-shared-server-development-environment-with- ssh-设置/](http://www.mybringback.com/bringers/14509/git-local-and-shared-server-development-environment-with-ssh-setup/)

就数据库架构而言，您要么需要编写一些部署脚本，要么需要手动对本地和实时环境进行修改。

希望这有帮助吗？

# android - 保存活动的所有内容

> ID：12226406
> 
> 赞同：-1
> 
> 时间：2012-09-01T09:01:57.107
> 
> 标签：android, lifecycle, application-restart

我有一个活动，我想保留其中的所有内容（位图、文本、按钮..），因此当用户重新启动手机并单击我的应用程序时，一切都像他上次使用它时一样。

任何想法？

我一直在阅读有关 Android 应用程序生命周期的信息，我在*理论上*了解基础知识，但我不知道如何实现它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:11:09.320

实际上，您不需要对 和 等对象执行任何操作`Buttons`，因为它们在您的生命周期`TextViews`内不会改变。`Activity`当您的应用程序重新启动时，它们只是被重新创建，并且它们在任何时候看起来都一样。您要保存的内容可能是用户输入或下载的文件。如果你有这些，那么我建议你学习[这篇](http://developer.android.com/guide/topics/data/data-storage.html)文章，它描述了 Android 中不同的数据存储机制。对于不同类型的数据，您将需要不同的解决方案，例如文本输入可以保存在 中`SharedPreferences`，但位图可能应该保存在文件系统中。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:07:13.260

也许这不是最好的解决方案，但您可以尝试[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)并在退出时将不同的用户数据保存到不同的变量中。

重新启动应用程序时，读取存储在 SharedPreferences 中的值并在各自的视图中显示这些值。

除了 SharedPreferences，您还可以根据您想要保留的数据类型尝试[这些不同的选项！](http://developer.android.com/guide/topics/data/data-storage.html)

# oracle - oracle 10g服务无法启动？

> ID：12226407
> 
> 赞同：1
> 
> 时间：2012-09-01T09:02:04.867
> 
> 标签：oracle, oracle10g

它工作正常。突然，当我尝试启动服务器时，它显示此消息

```
E:\OracleXE\app\oracle\product\10.2.0\server\BIN>net start OracleServiceXE
The service is not responding to the control function.

More help is available by typing NET HELPMSG 2186. 
```

当我输入 NET HELPMSG 2186 时。

> E:\OracleXE\app\oracle\product\10.2.0\server\BIN>NET HELPMSG 2186
> 
> 服务没有响应控制功能。
> 
> ### 解释
> 
> 该服务目前无法运行您的命令。
> 
> ### 行动
> 
> 稍后再试该命令。
> 
> 如果问题仍然存在，请停止并重新启动服务。
> 
> 但是，如果在您重新启动服务后问题仍然存在，请报告问题。请务必将服务名称和被拒绝的命令提供给技术支持。

我重新启动计算机后再次尝试，但没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-20T18:03:36.230

您可以尝试以管理员身份运行该程序，看看是否有帮助。

a) 右键单击​​该程序。

b) 选择以管理员身份运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T17:34:55.267

这通常是由于更改了您的机器名称，因此存储在 listener.ora 中的配置不再正确。更新存储在其中的机器名称。文件位置是（第一部分取决于您安装它的位置）：

```
\Oraclexe\app\oracle\product\10.2.0\server\NETWORK\ADMIN\listner.ora 
```

# javascript - 当用户在谷歌翻译中查看页面时，我如何获得未翻译的数据？

> ID：12226408
> 
> 赞同：0
> 
> 时间：2012-09-01T09:02:04.440
> 
> 标签：javascript, google-chrome-extension, google-translate, content-script

我的扩展使用内容脚本从某些页面中获取数据。但是，有时用户在页面上使用*谷歌翻译*，我需要原始数据。

我怎么才能得到它？内容脚本抓取翻译后的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:48:24.963

要获取原始（未翻译）版本：

1.  从 translate-address 输入中获取其地址： ![地址栏](../Images/4ffea5d253fc6e12f8b7c6df5e58cca2.png)

2.  将该地址加载到隐藏的 iframe 中。

3.  [使用在 Google-Chrome 扩展程序中处理 iframe 的常用方法，](https://stackoverflow.com/questions/tagged/google-chrome-extension+iframe?sort=votes)从新隐藏的 iframe 中获取您想要的数据。

如果翻译后的页面已被 AJAX 修改，则 AJAX 添加在“原始”版本中不可用，但谷歌翻译也不会翻译这些（目前）——所以只需直接从翻译页面 iframe。

# jquery - 如何在 Coldfusion 中压缩大型 Ajax 响应（仅限 HTML）？

> ID：12226409
> 
> 赞同：1
> 
> 时间：2012-09-01T09:02:37.300
> 
> 标签：jquery, ajax, coldfusion, compression, gzip

我正在运行`Coldfusion8`并且`jquery/jquery-mobile`在前端。

我正在使用 Ajax 驱动的搜索引擎，试图找到数据量和客户端处理时间之间的最佳折衷。

目前我的 AJAX 搜索返回 40k（JQM 增强标记），这避免了任何客户端增强。通过这种方式，我可以在没有页面停顿约 2-3 秒的情况下度过难关，而 JQM 增强了搜索结果中的所有元素。

我很好奇是否可以`gzip Ajax responses`从Coldfusion 发送。如果我现在检查我的搜索标题，我有这个：

```
 RESPONSE-header
    Connection  Keep-Alive
    Content-Type    text/html; charset=UTF-8
    Date    Sat, 01 Sep 2012 08:47:07 GMT
    Keep-Alive  timeout=5, max=95
    Server  Apache/2.2.21 (Win32) mod_ssl/2.2.21 ...
    Transfer-Encoding   chunked

    REQUEST-header
    Accept  */*
    Accept-Encoding gzip, deflate
    Accept-Language de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
    Connection  keep-alive
    Cookie  CFID=   ; CFTOKEN=   ; resolution=1143
    Host    www.host.com
    Referer http://www.host.com/dev/users/index.cfm 
```

所以，我的请求会接受`gzip, deflate`，但我会回来`chunked`。

我在`cfsavecontent`（称为compressedHTML）中生成AJAX响应并运行它以消除空格

```
<cfrscipt>
compressedHTML = reReplace(renderedResults, "\>\s+\<", "> <", "ALL");    
compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(13), "ALL");
compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(09), "ALL");
</cfscript> 
```

在像这样在响应对象中发送压缩HTML之前：

```
 {"SUCCESS":true,"DATA":  compressedHTML  } 
```

**问题**
如果我知道我正在`HTML`通过 Ajax 发回我的数据对象，在返回它与发送之前有没有办法到`gzip`响应服务器端`chunked`？如果这完全有可能？如果是这样，我可以在我的响应对象中执行此操作，还是必须发回“纯”HTML？

谢谢！

**编辑：**
在为动态压缩设置“web.config”时 发现[这个](http://www.coldfusionmuse.com/index.cfm/2010/9/24/coldfusion-IIS7-Compression-Issue)- 似乎不起作用

**EDIT2**：找到了[这个](http://cfspaghetti.blogspot.de/2007/07/how-to-gzip-compress-coldfusion-8.html)片段并正在使用它，尽管我不确定这是否可行。

```
<cfscript>
compressedHTML = reReplace(renderedResults, "\>\s+\<", "> <", "ALL");
compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(13), "ALL");
compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(09), "ALL");

if ( cgi.HTTP_ACCEPT_ENCODING contains "gzip" AND not showRaw ){
    cfheader name="Content-Encoding" value="gzip";

    bos = createObject("java","java.io.ByteArrayOutputStream").init();
    gzipStream = createObject("java","java.util.zip.GZIPOutputStream");
    gzipStream.init(bos);
    gzipStream.write(compressedHTML.getBytes("utf-8"));
    gzipStream.close();
    bos.flush();
    bos.close();
    encoder = createObject("java","sun.misc.
    outStr= encoder.encode(bos.toByteArray());

    compressedHTML = toString(bos.toByteArray());
    } 
</cfscript> 
```

`response object`可能需要在变量而不是`compressedTHML`变量上尝试这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:54:20.990

行。让它工作。

我在 CFLib中使用[它，如下所示：](http://cflib.org/udf/gzip#examples)

```
<cfscript>
    // remove whitespace
    compressedHTML = reReplace(renderedResults, "\>\s+\<", "> <", "ALL");
    compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(13), "ALL");
    compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(09), "ALL");
    // gzip
    compressedHTML = gzip(compressedHTML);
</cfscript>
<!--- modify header --->
<cfheader name="Content-Encoding" value="gzip">
<cfheader name="Content-Length" value="#len(compressedHTML)#" >
<!--- return cfcontent with reset="no", so I'm not disrupting the Ajax request --->
<cfcontent reset="no" variable="#compressedHTML#" />
<cfreturn  /> 
```

您还需要确保为包含上述内容的函数设置返回变量，`binary`并且 Ajax 请求必须使用`returntype="html"`. 至少我是这样让它工作的。

似乎工作得很好，我的 Ajax 请求从 50-60k 增强标记下降到 1-2k。移动端不错:-)

**编辑**：
如果您遇到特殊字符无法正确显示的问题，请尝试设置

```
 <cfheader name="Content-Type" value="text/html; charset=ISO-8859-1"> 
```

在返回之前`cfcontent`。我不知道这是否优于`UTF-8`，但它适用于 German `äöüß`，这是我在 Ajax 响应中遗漏的。

# javascript - 使用javascript检查服务器上是否存在html文件

> ID：12226410
> 
> 赞同：3
> 
> 时间：2012-09-01T09:02:43.683
> 
> 标签：javascript, html

我的 ASPX 代码生成了一些 html 文件，我只是在其中放置了分页链接，例如

```
<a href="1.html">First</a>&nbsp;|&nbsp;
<a href="3.html">Next</a>&nbsp;|&nbsp;
<a href="1.html">Previous</a>&nbsp;|&nbsp;
<a href="9.html">Last</a> 
```

说如果用户当前在第二页按下 Next 移动到第三页...

现在的问题是当用户多次单击“下一步”按钮并且系统正在进行生成让说第 5 页时，它将显示错误页面。

有没有办法通过 javascript 从 html 检查文件是否存在？请帮助我摆脱这个节目停止问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T09:14:38.820

您可以使用 ajax 检查文件是否存在

使用 jQuery

```
$.ajax({
        url:'http://www.example.com/3.html',
        error: function()
        {
           alert('file does not exists');
        },
        success: function()
        {
            alert('file exists');
        }
    }); 
```

使用 Javascript

```
function checkIfRemoteFileExists(fileToCheck)
{
    var tmp=new Image;
    tmp.src=fileToCheck;

    if(tmp.complete)        
        alert(fileToCheck+" is available");        
    else        
     alert(fileToCheck+" is not available");        
} 
```

现在检查文件是否存在或不调用这样的js函数

```
checkIfRemoteFileExists('http://www.yoursite.com/abc.html');​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-14T20:04:35.223

我喜欢使用这种类型的脚本

```
function CheckFileExist(fileToCheck: string) {

    return new Promise((resolve, reject) => {
        fetch(fileToCheck).then(res => {
            if (res.status == 404) resolve(false);
            if (res.status == 200) resolve(true);
            return res.text()
        }) 
    })

} 
```

并使用它

```
 var exists = await CheckFileExist(link); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-30T18:46:38.070

*   @Sibu 的解决方案存在一个问题：它实际上会下载文件（它可能会很大，浪费流量）
*   在 2021 年，一个不应该在新项目中[使用 jQuery](https://www.google.com/search?q=should+i+use+jquery)
*   原生[Promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)和[Fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)是今天要走的路

```
<output id="output"></output>

<script>
// create a non-cached HTTP HEAD request
const fileExists = file =>
  fetch(file, {method: 'HEAD', cache: 'no-store'})
  .then(r => r.status==200);

// check the file existence on the server
// and place the link asynchronously after the response is given
const placeNext = file => fileExists(file).then(yes => output.innerHTML = 
   (yes ? `<a href="3.html">Next</a>` : '')
);

// place the "next" link in the output if "3.html" exists on the server
placeNext('3.html');
</script> 
```

# c# - 在 C# 中具有通用列表的类

> ID：12226418
> 
> 赞同：0
> 
> 时间：2012-09-01T09:05:26.190
> 
> 标签：c#

我有一个像这样的课程：

```
 public class boolMessage
{
    public bool Message { get; set; }
    public ResponseType Resp { get; set; }

    public boolMessage(bool _Message, ResponseType _Resp)
    {
        Message = _Message;
        Resp = _Resp;
    }
} 
```

我想做的是创建一个类似的类：

```
 public class listMessage
{
    public List<T> Message { get; set; }
    public ResponseType Resp { get; set; }

    public listMessage(List<T> _Message, ResponseType _Resp)
    {
        Message = _Message;
        Resp = _Resp;
    }
} 
```

我想我可以使用通用类之类的东西。我用谷歌搜索了很多页面，但找不到一些简单的解决方案。

为什么我需要就像我想返回一个不同类型的对象数组，如学生 [] 或教师 []。

这些像教师这样的类是由实体框架生成的。

我想和他们一起返回一些额外的信息......

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:06:46.663

```
 class ListMessage<T> {
     ...
  } 
```

进一步评论：

1.  ListMessage 中的构造函数名称错误。
2.  您不应该将成员变量暴露给外部。

关于2.，我会做以下事情：

```
class ListMessage<T> {
   private List<T> _messages;
   public IEnumerable<T> Messages { get { return _messages; } }

   public ListMessage (IEnumerable<T> messages) {
      this._messages = messages.ToList ();
   }
} 
```

# c++ - 在对象旋转/平移后重新计算正确的 AABB

> ID：12226420
> 
> 赞同：1
> 
> 时间：2012-09-01T09:05:37.527
> 
> 标签：c++, opengl, collision-detection, physics-engine, aabb

我在这里看到了这个主题，但它并没有真正帮助我解决问题:( ）因为我正在使用 libqglviewer 并且出于某种奇怪的原因，如果我确实使用 glLoadIdentity() 对象（常规立方体）会消失:(所以我的解决方法是每次我必须使用 glPopMatrix 和 glPushMatrix 来保持世界矩阵完好无损翻译/旋转一个对象。原始矩阵被存储起来，然后一旦翻译/旋转完成，我就会再次将其弹出。

到目前为止效果很好，但是一旦我尝试实现边界框的重新计算，我的框从与立方体相同的位置开始，但是一旦我开始旋转它，边界框有时会“内爆”，因此我需要检查最大值/min 角落，所以它们不会比立方体本身小，但是当我旋转相机时，边界框会移动到一侧或另一侧。

我正在使用 GLM 加载模型，不幸的是旧版 OpenGL，我对旧版 OGL 的工作原理有些熟悉，但我认为重新计算边界框时的计算有些不对劲。

这段代码在我的渲染函数中：

```
glPushMatrix();
  glTranslatef(position.x, position.y, position.z);
  glRotatef(m_angle, m_torque.x, m_torque.y, m_torque.z);
  glGetFloatv(GL_MODELVIEW_MATRIX, mvMatrix);
  glmDraw(pModelCube, GLM_SMOOTH); // Renders the object
glPopMatrix();

glPushMatrix();
  glTranslatef(position.x, position.y, position.z);
  bb->RecalculateBox(pModelCube, mvMatrix, BBid);
  bb->DrawBox(bb->GetBoundingBox(BBid)); 
glPopMatrix(); 
```

这是我设置边界框的代码：

```
void AABB::initBox(BoundingBox* b)
{
    b->min.x = 10000.0f;
    b->min.y = 10000.0f;
    b->min.z = 10000.0f;

    b->max.x = -10000.0f;
    b->max.y = -10000.0f;
    b->max.z = -10000.0f;
}

BoundingBox* AABB::CreateCollisionBox(GLMmodel* model, GLMgroup* object)
{
    BoundingBox* box = (BoundingBox*)malloc(sizeof(BoundingBox));
    initBox(box);

    for(int i = 0; i < object->numtriangles; i++)
    {
        for(int j = 0; j < 3; j++)
        {
            GLuint index = model->triangles[object->triangles[i]].vindices[j];
            GLfloat x = model->vertices[index*3 + 0];
            GLfloat y = model->vertices[index*3 + 1];
            GLfloat z = model->vertices[index*3 + 2];

            if(box->min.x > x) box->min.x = x;
            if(box->min.y > y) box->min.y = y;
            if(box->min.z > z) box->min.z = z;

            if(box->max.x < x) box->max.x = x;
            if(box->max.y < y) box->max.y = y;
            if(box->max.z < z) box->max.z = z;
        }
    }

    return box;
}

void AABB::DrawBox(BoundingBox* b)
{
    if(collision)
    {
        // Sets color to red
        glColor3f(1.0f, 0.0f, 0.0f);
    }
    else
    {
        // Sets color to yellow
        glColor3f(1.0f, 1.0f, 0.0f);
    }

    glBegin(GL_LINE_LOOP);
    glVertex3f(b->max.x, b->max.y, b->min.z);
    glVertex3f(b->min.x, b->max.y, b->min.z);
    glVertex3f(b->min.x, b->min.y, b->min.z);
    glVertex3f(b->max.x, b->min.y, b->min.z);
    glEnd();

    glBegin(GL_LINE_LOOP);
    glVertex3f(b->max.x, b->min.y, b->max.z);
    glVertex3f(b->max.x, b->max.y, b->max.z);
    glVertex3f(b->min.x, b->max.y, b->max.z);
    glVertex3f(b->min.x, b->min.y, b->max.z);
    glEnd();

    glBegin(GL_LINE_LOOP);
    glVertex3f(b->max.x, b->max.y, b->min.z);
    glVertex3f(b->max.x, b->max.y, b->max.z);
    glVertex3f(b->min.x, b->max.y, b->max.z);
    glVertex3f(b->min.x, b->max.y, b->min.z);
    glEnd();

    glBegin(GL_LINE_LOOP);
    glVertex3f(b->max.x, b->min.y, b->max.z);
    glVertex3f(b->min.x, b->min.y, b->max.z);
    glVertex3f(b->min.x, b->min.y, b->min.z);
    glVertex3f(b->max.z, b->min.y, b->min.z);
    glEnd();
} 
```

最后一块是我重新计算盒子的地方：

```
void AABB::RecalculateBox(GLMmodel* model, float matrix[16], int &id)
{
    BoundingBox* box = boxes[id]/*(BoundingBox*)malloc(sizeof(BoundingBox))*/;
    initBox(box);
    float   dimensions[3];

    // This will get the absolute dimensions of the object
    glmDimensions(model, dimensions);

    box->max.x = dimensions[0] / 2.0f, box->min.x = -1.0f * box->max.x;
    box->max.y = dimensions[1] / 2.0f, box->min.y = -1.0f * box->max.y;
    box->max.z = dimensions[2] / 2.0f; box->min.z = -1.0f * box->max.z;

    box->max.x = matrix[0] * box->max.x + matrix[4] * box->max.y + matrix[8] * box->max.z + matrix[12];
    box->max.y = matrix[1] * box->max.x + matrix[5] * box->max.y + matrix[9] * box->max.z + matrix[13];
    box->max.z = matrix[2] * box->max.x + matrix[6] * box->max.y + matrix[10] * box->max.z + matrix[14];
    box->min.x = matrix[0] * box->min.x + matrix[4] * box->min.y + matrix[8] * box->min.z + matrix[12];
    box->min.y = matrix[1] * box->min.x + matrix[5] * box->min.y + matrix[9] * box->min.z + matrix[13];
    box->min.z = matrix[2] * box->min.x + matrix[6] * box->min.y + matrix[10] * box->min.z + matrix[14];

    box->bounds[0] = Vec(box->max.x, box->max.y, box->min.z);
    box->bounds[1] = Vec(box->min.x, box->max.y, box->min.z);
    box->bounds[2] = Vec(box->min.x, box->min.y, box->min.z);
    box->bounds[3] = Vec(box->max.x, box->min.y, box->min.z);
    box->bounds[4] = Vec(box->max.x, box->min.y, box->max.z);
    box->bounds[5] = Vec(box->max.x, box->max.y, box->max.z);
    box->bounds[6] = Vec(box->min.x, box->max.y, box->max.z);
    box->bounds[7] = Vec(box->min.x, box->min.y, box->max.z);

    //This code below is from how my bounding box was calculated before.
    /*for(int i = 0; i < object->numtriangles; i++)
    {
        for(int j = 0; j < 3; j++)
        {
            GLuint index = model->triangles[object->triangles[i]].vindices[j];
            GLfloat x = model->vertices[index*3 + 0];
            GLfloat y = model->vertices[index*3 + 1];
            GLfloat z = model->vertices[index*3 + 2];

            if(box->min.x > x) box->min.x = x;
            if(box->min.y > y) box->min.y = y;
            if(box->min.z > z) box->min.z = z;

            if(box->max.x < x) box->max.x = x;
            if(box->max.y < y) box->max.y = y;
            if(box->max.z < z) box->max.z = z;
        }
    }*/

    boxes[id] = box;
} 
```

我一直在尝试关注这篇文章[如何在平移/旋转后重新计算轴对齐边界框？](https://stackoverflow.com/questions/6053522/how-to-recalculate-axis-aligned-bounding-box-after-translate-rotate)但还没有设法让它与我上面的代码一起工作。

关于我哪里出错的任何指示都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T23:02:17.320

1.  您应该使用库或为向量矩阵乘法编写自己的函数，手动执行此操作很容易出错（如此处）。
2.  与矩阵相乘时，您会覆盖矢量分量，而您仍然需要读取旧值（例如 box->max.x）。您应该将结果存储在一个新框 (boxTransformed) 中（完成后，您可以根据需要复制回旧框）。
3.  转换后，您应该取 boxTransformed 的最大和最小向量的分量最大值和最小值来生成新的边界框。

# animation - 为什么这个简单的 CSS 动画不起作用？

> ID：12226423
> 
> 赞同：0
> 
> 时间：2012-09-01T09:06:20.863
> 
> 标签：animation, css, webkit

我创建了一个 JSFiddle 来显示我的问题。

[http://jsfiddle.net/sqMT6/1/](http://jsfiddle.net/sqMT6/1/)

当你点击一个段落时，'hidden' 类被设置，所以应该播放一个 webkit 动画，段落应该在 5 秒内消失。

设置类，不播放动画。

我一定错过了一些非常简单的事情。

有人可以指出吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:13:01.893

尝试在 @keyframe 规则中删除 from/to 属性之前的冒号。

**原始 CSS**

```
@-webkit-keyframes appear{
    from:{opacity: 0;}
    to: {opacity: 1;}
}

@-webkit-keyframes disappear{
    from:{opacity: 1;}
    to: {opacity: 0;}
}​ 
```

**固定的 CSS**

```
@-webkit-keyframes appear{
    from {opacity: 0;}
    to {opacity: 1;}
}

@-webkit-keyframes disappear{
    from {opacity: 1;}
    to  {opacity: 0;}
}​ 
```

示例：http: [//jsfiddle.net/sqMT6/3/](http://jsfiddle.net/sqMT6/3/)

# php - 在 Zend 表单中设置描述

> ID：12226434
> 
> 赞同：-3
> 
> 时间：2012-09-01T09:07:57.473
> 
> 标签：php, zend-framework, zend-form, zend-decorators

我在我的项目中使用 Zend Framework。我想在我的表格中添加描述/注释，例如

`fields marked by * are mandatory`

但我没有找到如何向表单添加描述以及如何将其与装饰器一起使用。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:33:06.710

有两种选择：

*   使用 from 装饰器或
*   扩展`Zend_Form_Element`以创建自定义元素

我会选择后者，因为将部分原始 html 代码添加到表单中非常常见，不仅在元素之前或之后，而且在它们之间。

你应该这样做：

```
class My_Form_Element_Raw extends Zend_Form_Element
{
    protected $raw_html;
    public function setRawHtml($value)
    {
        $this->raw_html = $value;
        return $this;
    }
    public function getRawHtml()
    {
        return $this->raw_html;
    }
    public function render()
    {
        // you can use decorators here yourself if you want, or wrap html in container tags
        return $this->raw_html;
    }
}

$form = new Zend_Form();
// add elements
$form->addElement(
    new My_Form_Element_Raw(
        'my_raw_element', 
        array('raw_html' => '<p class="highlight">fields marked by * are mandatory</p>')
    )
);
echo $form->render(); 
```

扩展时，`Zend_Form_Element`您不需要覆盖`setOption/s`,`getOption/s`方法。Zend 在内部使用**set***和**get***和受保护的属性来检测在这种情况下的元素选项`protected $raw_html;`，`public function setRawHtml($value)`并且`public function getRawHtml()` 命名您的属性`$raw_html`将分别接受 'raw_html' 和 'rawHtml' 两个选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:43:21.310

向表单添加额外文本的最简单方法是将适当的 html 添加到页面视图：

```
<div>
    <h4>fields marked by * are mandatory</h>
    <?php echo $this->form ?>
</div> 
```

或者使用 viewScript 装饰器来控制整个表单体验：

```
<article class="login">
    <form action="<?php echo $this->element->getAction() ?>"
          method="<?php echo $this->element->getMethod() ?>">
        <table>
            <tr>
                <th>Login</th>
            </tr>
            <tr>fields marked by * are mandatory</tr>
            <tr>
                <td><?php echo $this->element->name->renderViewHelper() ?></td>
            </tr>
            <tr>
                <td><?php echo $this->element->password->renderViewHelper() ?></td>
            </tr>
            <tr>
                <td><?php echo $this->element->submit ?></td>
            </tr>
        </table>
    </form>
</article> 
```

但是，您可以使用向表单添加描述，`$form->setDescription()`然后您可以使用呈现该描述`echo $this->form->getDescription()`。最好在元素级别使用这些方法以及 set 和 getTag() 而不是表单级别。

为了提供星号线索，我只使用 css：

```
dt label.required:before {
    content: "* ";
    color: #ff0000;
} 
```

我敢肯定，如果需要，您可以仅使用 css 显示您想要的任何注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:31:53.057

```
 class FormDecorators {
    public static $simpleElementDecorators = array(
        array('ViewHelper'),
        array('Label', array('tag' => 'span', 'escape' => false, 'requiredPrefix' => '<span class="required">* </span>')),
        array('Description', array('tag' => 'div', 'class' => 'desc-item')),
        array('Errors', array('class' => 'errors')),
        array('HtmlTag', array('tag' => 'div', 'class' => 'form-item'))
    );
    } 
```

这些是我通常使用的元素的装饰器，它们包含带 * 的前缀和描述装饰器。

然后使用代码：

```
$element->setDescription('fields marked by * are mandatory'); 
```

向一个元素添加描述，之后您可以将描述样式设置为出现在底部的某处，我希望这会有所帮助，祝您有美好的一天。

# python - Python 计数单词

> ID：12226437
> 
> 赞同：1
> 
> 时间：2012-09-01T09:08:32.387
> 
> 标签：python, count, range

我想运行一个程序，它从一个句子中每隔三个字母选择一个（从第一个字母开始），然后打印出那些字母之间有空格的字母。我无法解决它，因为它应该像这样运行：

```
Message? pbaynatnahproarnsm
p y t h o n 
```

我用它来计算的代码是：

```
p = raw_input("Message? ")
count = 3
p.count()
print p 
```

你能帮我解决这个问题吗谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T09:09:26.067

[使用Python 切片表示法](http://docs.python.org/release/2.3.5/whatsnew/section-slices.html)很容易抓取每三个字母：

```
In [5]: x = 'pbaynatnahproarnsm'

In [6]: x[::3]
Out[6]: 'python' 
```

然后，您可以使用[str.join](http://docs.python.org/library/stdtypes.html#str.join)在每个字母之间添加一个空格：

```
In [7]: ' '.join(x[::3])
Out[7]: 'p y t h o n' 
```

# windows-8 - 关闭 XAML 表单

> ID：12226438
> 
> 赞同：0
> 
> 时间：2012-09-01T09:08:33.173
> 
> 标签：windows-8, visual-studio-2012

我正在使用**vs2012**创建一个 Windows 8 商店应用程序。我想通过单击按钮切换到另一个**xaml**表单，但无法做到。我希望代码关闭或隐藏当前表单并切换到新表单。
问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:57:33.107

如果您希望批量替换内容，则可以使用 Frame.Navigate() 方法。

```
Frame rootFrame = Window.Current.Content as Frame;
rootFrame.Navigate(typeof(YourPageClass)); 
```

或者干脆

```
this.Frame.Navigate(typeof(YourPageClass)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:59:05.980

请记住，并非每个元素都有属性 hide 或类似的东西。如果你想用表格隐藏网格或做类似的事情，你需要知道负责可见性的属性（在大多数情况下它是 Visibility，它是一个布尔值）。

第二件事是您可以成为新手，但是如果您需要帮助，请付出一些努力并给我们您想要的

第三件事。如果您想在单击后更改页面，请使用 Marc 的解决方案

# php - PHP将字节转换为正确的单位

> ID：12226442
> 
> 赞同：-1
> 
> 时间：2012-09-01T09:09:16.840
> 
> 标签：php

我正在使用[https://stackoverflow.com/users/227532/mef](https://stackoverflow.com/a/2510459/425964)编写的`PHP`函数[https://stackoverflow.com/a/2510459/425964](https://stackoverflow.com/users/227532/mef)将字节格式化为千字节、兆字节、千兆字节等。`@Mef`

问题是：

```
echo formatBytes(9287695, 2); 
```

退货`8.86 MB`。不应该`9.3 MB`吗？我在这里错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:13:32.253

它不应该是 9.3 MB，当转换为 KB / MB 等时，字节总是会减少，因为它乘以 1024。

所以如果字节数以 92 开头.. 它永远不会导致 9.3 MB

我想 8.86 是正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:13:33.567

9287695/1024/1024=8.86
9287695/1000/1000=9.30
1 MB = 1024 KB = 1024*1024 字节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:15:22.843

内存单位

```
Bit=a 1 or 0  
Byte=8 Bits  
Kilobyte=1024 Bytes  
Megabyte=1024 Kilobytes  
Gigabyte=1024 Megabytes  
Terabyte=1024 Gigabytes 
```

所以 9287695 字节实际上是 8.86 MB

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T09:17:15.937

IT 界对于区分 Mebi* 和 Mega*、Kibi* 和kilo* 存在很多困惑。您实际上是完全正确的，因为 8.86 的正确后缀应该是“MiB”而不是“MB”。

这是因为 1 MiB = 1024 KiB 和 1 KiB = 1024 B。但是 1 MB = 1000 kB 和 1 kB = 1000 B。

从而混乱。

所以 8.86 是 OK ( `(9287695/1024)/1024 = 8,857`) 只要是`8.86 MiB`.

请参阅此处了解更多信息：[http ://en.wikipedia.org/wiki/Mebibyte](http://en.wikipedia.org/wiki/Mebibyte)

# c# - 如何检查 linq 查询中的空值？

> ID：12226444
> 
> 赞同：4
> 
> 时间：2012-09-01T09:09:45.590
> 
> 标签：c#, linq

我有以下代码：

```
protected IEnumerable<string> GetErrorsFromModelState() {

    var exceptions = ModelState.SelectMany(x => x.Value.Errors
        .Select(error => error.Exception.Message));

    var errors = ModelState.SelectMany(x => x.Value.Errors
        .Select(error => error.ErrorMessage));

    return exceptions.Union(errors);
} 
```

如果出现以下情况，有没有办法可以停止给出 nullReference 异常：

```
error.Exception is null  or if error.Exception.Message is null 
```

这两种情况都给我带来了问题，我不确定如何使用 IsNullOrEmpty 检查**对这两种**情况进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:12:05.160

在您的选择之前添加 a`.Where(error.Exception != null && error.Exception.Message != null)`以仅包含您想要的值不是的那些`null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T09:16:30.057

怎么样

```
protected IEnumerable<string> GetErrorsFromModelState()
{        
    var exceptions = ModelState.SelectMany(x => x.Value.Errors
                            .Where(error => (error != null) && 
                                            (error.Exception != null) &&
                                            (error.Exception.Message != null))
                            .Select(error => error.Exception.Message));

    var errors = ModelState.SelectMany(x => x.Value.Errors
                            .Where(error => (error != null) && 
                                            (error.ErrorMessage != null))
                            .Select(error => error.ErrorMessage));

    return exceptions.Union(errors);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T09:16:51.800

您可以使用[May be Monad](http://www.codeproject.com/KB/cs/maybemonads.aspx)，首先编写一个静态类并将`With` 扩展方法放在该类中，然后简单地使用`With`方法。在链接中有一些其他类似的类型也很有帮助。

```
public static TResult With<TInput, TResult>(this TInput o, 
       Func<TInput, TResult> evaluator)
       where TResult : class where TInput : class
{
  if (o == null) return null;
  return evaluator(o);
} 
```

并简单地使用它：

```
var exceptions = ModelState.SelectMany(x => x.With(y=>y.Value).With(z=>z.Errors))
        .Select(error => error.With(e=>e.Exception).With(m=>m.Message)); 
```

**更新：**为了更清楚（链接中也存在类似的示例），假设您具有`Person`类层次结构：

```
public class Person
{
   public Address Adress{get;set;}
}

public class Address
{
   public string PostCode{get;set;}
} 
```

现在您想获取人员的相关邮政编码并且您不知道输入人员是否为空：

```
var postCode = 
// this gives address or null, if either person is null or its address
person.With(x=>x.Address) 
// this gives post code or returns null, 
// if previous value in chain is null or post code is null 
      .With(x=>x.PostCode); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T09:17:42.277

然后过滤掉空值`.Where(error => error.Exception != null)` （`Exception`对象应该总是有一个非空消息，所以如果有异常，我会把它算作一个错误来检测和修复）。

在这种情况下表现不同，然后例如`.Select(error => error.Exception == null ? "No Error" : error.Exception.Message)`。

# xcode - . git属性不起作用

> ID：12226445
> 
> 赞同：2
> 
> 时间：2012-09-01T09:09:49.373
> 
> 标签：xcode, git, gitattributes

`.gitattributes`为了**区分 XCode**项目（纯文本），我有以下内容

```
*.pbxproj -crlf -diff -merge 
```

但是当我比较时，仍然显示二进制文件

```
# git diff MyApp.xcodeproj/project.pbxproj
diff --git a/MyApp.xcodeproj/project.pbxproj b/MyApp.xcodeproj/project.pbxproj
index xxx..xxx xxx
Binary files a/MyApp.xcodeproj/project.pbxproj and b/MyApp.xcodeproj/project.pbxproj differ 
```

我`.gitattributes`在同一级别的`.git`文件夹中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:56:50.703

正确的。您`.gitattributes`的意思是在进行差异和合并时将文件视为二进制文件。看看这个 StackOverflow 问题，它与你的问题非常相似：[Git and pbxproj](https://stackoverflow.com/questions/1549578/git-and-pbxproj)

# java - java方法可以在一个类之外

> ID：12226458
> 
> 赞同：1
> 
> 时间：2012-09-01T09:12:17.667
> 
> 标签：java

我对家庭作业有这个问题：

> `foo()`类中定义的方法`Quiz`具有以下签名：`public static double foo(double f)`. 你能说什么呢`foo()`？
> 
> 1.  这是一个类方法
>     
>     
> 2.  它是一个实例变量
>     
>     
> 3.  它是一个实例方法
>     
>     
> 4.  它是一个类属性

我认为它是一个类方法，因为它是`foo()`在一个类中声明的。答案和我想的一样直截了当吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T09:13:52.853

答案是它的一个`class method`

声明的字段或方法`static`始终**分别是类的属性或行为。**

`Non-static`变量是**每个对象一个**，而 as`static variables`是**每个类一个**。

`static`方法**无权**访问变量或方法**。**`Non-static`

`static``Class_Name`可以使用with `"."`（点）运算符调用方法和变量。

虽然**如果**没有（**数学类有私有构造函数**）`class` **，**那么您也可以为类创建一个实例来调用静态方法或变量，但这**不是合法的方法。**`private constructor`

 ****您还应该记住，您可以使用它们所在的**空引用**来**调用....是的，它有效....** `static methods or variables`**`class`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:22:45.753

好吧，你已经成功了一半……

在java中你有**实例方法**和**类方法**

实例方法是与类的实例相关联的方法：

```
class InstanceTest {
    public void instanceMethod() { }
}
(...)
InstanceTest it = new InstanceTest();
it.instanceMethod(); 
```

要调用此方法，您必须实例化该类并调用它。

类方法 - 由*static*修饰符标识可以直接在类上调用：

```
class ClassTest {
    public static void instanceMethod() { }
}
(...)
ClassTest.classMethod(); 
```

变量的“规则”也是一样的，你可以有实例变量和类变量。

[您可以在此处](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)了解有关实例与类成员的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:15:05.613

它是一个类方法，但不是因为它是在类中声明的，而是因为它是`static`，因此它不使用定义它们的类的任何对象的实例变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T09:16:59.550

它是一个类方法，因为使用了`static`关键字，这意味着您不需要类的实例来调用它。

你这样称呼它：

```
Quiz.foo(2.5); 
```

相反，如果它是一个实例方法（没有`static`关键字），则需要在调用该方法之前进行实例化

```
Quiz q = new Quiz();
q.foo(2.5); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T09:17:50.383

它是类方法，因为它是静态方法。它属于类而不是对象（实例）。

静态方法只能访问静态变量。原因很明显。类共有的东西不能指代特定于对象的东西。******

# html - 上一页按钮使用导致多个当前页面按钮状态

> ID：12226460
> 
> 赞同：0
> 
> 时间：2012-09-01T09:12:58.217
> 
> 标签：html, css

我有一个问题，如果使用上一页浏览器按钮，则之前查看过的页面的当前页面按钮状态仍然存在。这导致当使用上一页浏览器按钮时，多个菜单项会以它们的“当前”状态出现。如果先前查看的页面的“当前”状态翻转，它将恢复到正常状态。没有意义吗？[点击这里查看网站。](http://www.goldencreekolives.com.au/dev/)我以前从未遇到过这个问题，并且厌倦了一切！任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:30:48.453

`mouseout`您的问题是，当您离开页面然后返回时，您的原始图像（在您离开时已悬停）在事件发生之前不会切换回其非悬停状态。

我的建议是使用`background-image`而不是`img`s，然后您可以使用 CSS`:hover`选择器在悬停时轻松更改它，例如：

```
<a id = "groove" href = "/groove/">

</a> 
```

CSS：

```
#groove {
    background-image: url('groove.gif');
    height: 20px; /*just an example*/
    width: 100px; /*another example*/
}
#groove:hover {
    background-image: url('groovehover.gif');
} 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:30:40.083

鉴于没有与此相关的 Javascript，这似乎是一个简单的缓存问题。

在任何受影响的浏览器中，尝试清除缓存，然后刷新页面。

# java - 匹配的通配符是严格的，但是找不到元素的声明

> ID：12226463
> 
> 赞同：11
> 
> 时间：2012-09-01T09:13:09.990
> 
> 标签：java, spring-mvc, sts-springsourcetoolsuite

我正在使用 Springsource Tools Suite 3 并尝试实现拦截。这就是代码和错误的注释：

**servlet-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<annotation-driven />

<resources mapping="/resources/**" location="/resources/" />

<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<beans:bean id="authInterceptor" class="com.bank.accounting.authentication.AuthInterceptor" />
<beans:bean id="authUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"> 
```

*bean 定义解析期间意外失败：配置问题：Cannot locate BeanDefinitionParser for element [list]*

```
 <beans:property name="interceptors">
        <list> 
```

*匹配的通配符是严格的，但找不到元素“list”的声明。*

```
 <ref bean="authInterceptor" />
        </list>
    </beans:property>
    <beans:property name="mappings">
        <props> 
```

*匹配的通配符是严格的，但找不到元素“props”的声明。*

```
 <prop key="/home">HomeController</prop>
        </props>
    </beans:property>
</beans:bean>
<beans:bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"> 
```

*bean 定义解析期间意外失败：配置问题：Cannot locate BeanDefinitionParser for element [props]*

```
 <beans:property name="mappings">
        <props> 
```

*匹配的通配符是严格的，但找不到元素“props”的声明。*

```
 <prop key="/login">LoginController</prop>
        </props>
    </beans:property>
</beans:bean>
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-01T09:26:08.007

`<list>`和`<ref>`标签属于`util` [命名空间](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-util-list)。首先添加它：

```
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd" 
```

然后适当地为这些声明添加前缀：

```
<util:list>
  ... 
```

您也可以尝试使用`<beans:util>`.

# android - Android列表视图中的不同行

> ID：12226465
> 
> 赞同：1
> 
> 时间：2012-09-01T09:13:25.467
> 
> 标签：android, listview, row

我有新闻应用程序，可以从网络下载数据并将其显示在列表视图中，但我怎样才能使第一行不同，更大的高度，不同的布局和东西？

这是主要活动来源

```
public class Home extends Activity {
    // All static variables
    static final String URL = "http://dmb.site50.net/application.php?app_access_key=c4ca4238a0b923820dcc509a6f75849b";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    public static final String TAG_NEWS = "news";
    public static final String TAG_ID = "id";
    public static final String TAG_TITLE = "title";
    public static final String TAG_STORY = "story";
    public static final String TAG_SH_STORY = "shorten";
    public static final String TAG_DATETIME = "datetime";
    public static final String TAG_AUTHOR = "author";
    public static final String TAG_IMG = "img";

    ListView list;
    LazyAdapter adapter;
    Button mBtnNaslovnica;
    private ViewSwitcher viewSwitcher;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);

        mBtnNaslovnica = (Button) findViewById(R.id.mBtnNaslovnica);
        mBtnNaslovnica.setSelected(true);
        TextView txtView=(TextView) findViewById(R.id.scroller);
    txtView.setSelected(true);

        ImageButton mBtnRefresh = (ImageButton) findViewById(R.id.btnRefresh);
        mBtnRefresh.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                new LoadingTask().execute(URL);
            }
        });

            ArrayList<HashMap<String, String>> homeList = new ArrayList<HashMap<String, String>>();

                JSONObject jsonobj;
                try {
                    jsonobj = new JSONObject(getIntent().getStringExtra("json"));
                    JSONArray news = jsonobj.getJSONArray(TAG_NEWS);
                    for(int i = 0; i < news.length(); i++){
                        JSONObject c = news.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_ID);
                        String title = c.getString(TAG_TITLE);
                        String story = c.getString(TAG_STORY);
                        String shorten = c.getString(TAG_SH_STORY);
                        String author = c.getString(TAG_AUTHOR);
                        String datetime = c.getString(TAG_DATETIME);
                        String img = c.getString(TAG_IMG);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_ID, id);
                        map.put(TAG_TITLE, title);
                        map.put(TAG_STORY, story);
                        map.put(TAG_IMG, img);
                        map.put(TAG_DATETIME, datetime);
                        map.put(TAG_AUTHOR, author);

                        // adding HashList to ArrayList
                        homeList.add(map);}
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            list=(ListView)findViewById(R.id.list);

            // Getting adapter by passing xml data ArrayList
            adapter=new LazyAdapter(this, homeList);        
            list.setAdapter(adapter);

            // Click event for single list row
            list.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
                    String cur_title = ((TextView) view.findViewById(R.id.title)).getText().toString();
                    String cur_story = ((TextView) view.findViewById(R.id.einfo2)).getText().toString();
                    String cur_author = ((TextView) view.findViewById(R.id.einfo1)).getText().toString();
                    String cur_datetime  = ((TextView) view.findViewById(R.id.einfo)).getText().toString();
                    ImageView cur_img = (ImageView) view.findViewById(R.id.list_image);
                    String cur_img_url = (String) cur_img.getTag();

                    Intent i = new Intent("com.example.androidhive.CURENTNEWS");
                    i.putExtra("CUR_TITLE", cur_title);
                    i.putExtra("CUR_STORY", cur_story);
                    i.putExtra("CUR_AUTHOR", cur_author);
                    i.putExtra("CUR_DATETIME", cur_datetime);
                    i.putExtra("CUR_IMG_URL", cur_img_url);
                    startActivity(i);
                }
            });     
        }   

    public void loadPage(){

    }

    public void startNewActivity(){

    }
    public class LoadingTask extends AsyncTask<String, Object, Object>{
        XMLParser parser = new XMLParser();
        JSONParser jParser = new JSONParser();
        @Override
        protected Object doInBackground(String... params) {
            // TODO Auto-generated method stub
            String URL = params[0];
            JSONObject json = jParser.getJSONFromUrl(URL);
            //String xml = parser.getXmlFromUrl(URL); // getting XML from URL
             // getting DOM element
            return json;
        }

        protected void onPostExecute(Object result){
            Intent startApp = new Intent("com.example.androidhive.HOME");
            startApp.putExtra("json", result.toString());
            startActivity(startApp);
        }

    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:15:59.833

您需要修改`LazyAdapter`代码以根据您想要的任何标准为每一行返回正确的布局。ListView 只是使用适配器提供的视图，因此将每一行布局不同并没有什么特别的。请注意，要使其正常工作，您还需要`getItemViewType()`实施`getViewTypeCount()`。

# java - 如何“\\p{javaUpperCase}.*\\.” 模式真的有效吗？

> ID：12226473
> 
> 赞同：1
> 
> 时间：2012-09-01T09:13:52.767
> 
> 标签：java, regex

我有以下字符串：“Perl 是唯一一种在 RSA 加密前后看起来相同的语言。” :) 此模式`"\\p{javaUpperCase}.*\\."`查找大写字符和句点。它为该字符串返回 true，但如果我删除单词“Perl”，它会给我`false`. 这是为什么？还有“RSA”字，也是大写的。

`\p{javaUpperCase}`- 代表大写字符
`.`是指大写之后的任何字符
`*`是贪婪量词，一次或多次
`\\.`- 句号。

我哪里错了？为什么它只看开头和结尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:18:00.313

可能是因为它试图匹配整个字符串。（参考：[http](http://www.regular-expressions.info/java.html) ://www.regular-expressions.info/java.html说**“重要的是要记住 String.matches() 只有在整个字符串可以匹配时才返回 true”**）。根据您使用的正则表达式库/函数，它可能需要对所有内容进行匹配。

如果没有“Perl”，则字符串不会以大写字符开头，因此即使子字符串匹配，整个字符串也不匹配。

尝试`.*(\p{javaUpperCase}.*\.).*`匹配子字符串。

`.*`两端的添加允许在感兴趣的子字符串的任一端有额外的字符。

# cocos2d-iphone - 在一个主体中创建多个夹具

> ID：12226475
> 
> 赞同：0
> 
> 时间：2012-09-01T09:14:30.337
> 
> 标签：cocos2d-iphone, box2d-iphone

![在此处输入图像描述](../Images/a0d3ad2b53a0984e131e915b9d983930.png)

我想在一个主体中创建这种类型的夹具。在这里，正方形和圆形都是不同的固定装置，但连接在一个主体中

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:46:37.393

您可以使用许多工具来制作固定装置。据我所知，有一些工具列出如下

**[物理编辑器](http://www.codeandweb.com/)**

**[顶点助手](http://itunes.apple.com/us/app/vertexhelper-pro/id411684411?mt=12)**

**[精灵助手](http://www.spritehelper.org/)**

**[关卡助手](http://www.levelhelper.org/)**

物理编辑器可能有更多工具，但我更喜欢使用物理编辑器。

# ruby - Ruby 在初始化时将 self 作为实例传递

> ID：12226478
> 
> 赞同：5
> 
> 时间：2012-09-01T09:14:44.187
> 
> 标签：ruby

```
def initialize()
  @attribute = AnotherClass.new(self)
end 
```

我要从python ruby​​。在 python 中，我知道我可以将 self 作为对象传递给函数。现在，我想将 self 传递给另一个类的初始化方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T09:40:54.497

就像您期望的那样：

```
class A
  def initialize(foo)
    @foo = foo
  end
end

class B
  attr_reader :bar

  def initialize
   @bar = A.new(self)
  end
end

B.new.bar.class #=> A 
```

# java - SWT 中的 PropertyChangeSupport。如何收听通知，例如在表格中？

> ID：12226479
> 
> 赞同：0
> 
> 时间：2012-09-01T09:14:50.090
> 
> 标签：java, eclipse, swt, javabeans, jface

使用`Jfaces`组件我想知道如何检测 UI 控件是否已被用户更改。
我已经看到有接口[PropertyChangeSupport](http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyChangeSupport.html#PropertyChangeSupport%28java.lang.Object%29)，您可以在其中注册[PropertyChangeListener](http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyChangeListener.html)，但我不知道如何在 SWT 应用程序中使用它们。
例如，我的数据模型有以下类。

```
class Person{  
   String firstName;  
   String lastName;  
   String address;  
   //etc  

} 
```

这本质上表示 SWT 中的一行`Table`（`LabelProvider`将使行对象成为`Person`）。
我假设班级人员应该有一个`PropertyChangeSupport`用于更改的成员变量，但我无法弄清楚谁注册了通知？?
_ ? `ViewPart`_ `LabelProvider`还有什么？
任何帮助清除这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:31:09.163

Vogella 有两个关于这个主题的非常好的教程。

[这](http://www.vogella.com/articles/EclipseJFaceTable/article.html)解释了如何设置你的数据结构并包含`PropertyChangeSupport`（但是，它没有在本教程中使用）。更新查看器的一种简单方法是`viewer.refresh()`. 这必须手动调用。

[本](http://www.vogella.com/articles/EclipseDataBinding/article.html)教程展示了如何使用 DataBinding（最后使用`PropertyChangeSupport`），它会在发生变化时通知监听器。

# node.js - 节点 JS html 游戏

> ID：12226480
> 
> 赞同：1
> 
> 时间：2012-09-01T09:14:53.847
> 
> 标签：node.js, socket.io, drawrectangle

```
<!doctype html>
<html>
<head>
    <script  src="http://localhost:8000/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
    <script>
        var name='';                
        var socket = io.connect('http://localhost:8000');
        $(document).ready(function() {
            //var app = require('http').createServer(handler),
            //io = require('socket.io').listen(app);
            //app.listen(8000);

            //var url = 'http://localhost:8000';
            //var socket = io.connect(url);

            //socket.connect();
            //socket.on('movement', function() {socket.send();
            //console.log('Connected!');});

            while (name == '') { name = prompt("What's your name?",""); }

               var left =5;
               var top = 5;
               var width =20;
               var height =20;

               var rcolor= get_random_color();   
               var ctx = $('#cgame')[0].getContext("2d");
               ctx.fillStyle = rcolor;         
               ctx.fillRect(left, top, width, height);
               ctx.lineWidth = 10;
            $(document).keydown(onkeydown);
            socket.emit('movement',  function onkeydown(left,top, width, height)
            {
            var kycode;

                if (evt!= null)
                {
                kycode = evt.keyCode;
                ctx = $('#cgame')[0].getContext("2d");      
                switch(kycode)
                            {
                    case 37: //left
                        if(left >> ctx.left){
                        call: clear();
                        left--;
                        call:draw();
                        //alert("Hi left");
                        break;
                        }
                    case 38: //up
                        if(top >> ctx.top)
                        {
                        call: clear();
                        top--;
                        call:draw();
                        //alert("Hi Up");
                        break;
                        }
                            case 39://right
                        if((left+width)  << (ctx.width+ctx.left) )
                        {
                        call: clear();
                        left++;
                        call:draw();
                        //alert("Hi right");
                        break;
                        }
                    case 40:
                        {
                        call: clear();
                        top++;
                        call:draw();
                        //alert("Hi down");
                        break;
                        }
                            Default:
                        {
                        alert("Hi");
                        break;
                        }
                    }       
                }

            }
            ); 

            function get_random_color() 
            {
                var letters = '0123456789ABCDEF'.split('');
            var color = '#';
            for (var i = 0; i < 6; i++ ) 
            {
            color += letters[Math.round(Math.random() * 15)];
            }
                return color;
            }

            function clear()
            {   
            ctx.width = ctx.width;
            ctx.height = ctx.height;
            ctx = $('#cgame')[0].getContext("2d");
            ctx.clearRect(0,0,cgame.width,cgame.height);
            }

            function draw()
            {   
                ctx.width = ctx.width;
            ctx.height = ctx.height;
            ctx = $('#cgame')[0].getContext("2d");
            ctx.fillRect(left, top, width, height);
                }

            socket.emit('register', name );

            $('#Name').hide(); 
            $('#Game').hide();  
            $('#start').hide(); 
            });
            </script>
        </head>
        <body>
            <label id="Game">Welcome to Node JS Gaming</label>
            <input type='text'  id ='Name'>
            <input type='button' id="start" value= 'login' Onclick="welcome()" >
            <div>
                <canvas id= "cgame" style="border:1px solid #000000; width: 100%; height: 100%;"; onkeydown ="onkeydown"></canvas>
            </div>
        </body>
    </html> 
```

尝试的套接字代码：

```
var io = require('socket.io').listen(8000);
io.sockets.on('connection', function (socket)
{
socket.on('movement',function(left,top, width, height){});
socket.broadcast.emit('movement', {

      });
   });

}
);

//io.sockets.emit(); 
```

我必须将左上角的宽度和高度值传递给服务器，以便该值反映在另一个客户端上。例如，两个客户端是 Chrome 和 Mozilla，每当用户按下向上、向下、向左或向右时，都必须移动相应的矩形。同样，它也应该发生在其他用户身上。

我不知道如何传递值。抱歉这么幼稚；我是`node.js`.

请让我知道服务器端的适当代码是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:22:20.967

请参阅有关与您要实现的目标非常相似的游戏的[问题](https://stackoverflow.com/questions/6244230/multiplayer-html5-node-js-socket-io)

编辑：刚刚意识到这个问题忽略了实际的多人游戏部分。我对该代码的实现如下（不是完整的代码，只有重要的部分）

客户端：

```
socket.on('message', function(msg) {
    msg = JSON.parse(msg);
    players[msg.player] = new Player(msg.name, msg.x, msg.y, msg.width, msg.height, msg.color); 
}); 
```

在播放器类中：

```
draw : function(){
    context.fillStyle = this.color; // context is canvas.getContext('2d');
    context.fillRect(this.x, this.y, this.width, this.height);
} 
```

现在在客户端你也可以拥有：

```
function update() {
    context.clearRect(0, 0, 700, 300); // clearing the canvas (width = 700, height = 300)
    for( var player in players ) {
        players[player].draw();
    }
}
var FPS = 60;
setInterval(update, 1000/FPS); 
```

根据我的经验，你最好在服务器端实际移动玩家坐标。所以客户端按下左键 -> 通过套接字发送 -> 服务器将玩家 x 调整为 x-=1 并将其发送回然后绘制的位置。

请注意，这是所需代码的粗略版本

# shell - 用于生成 HTML 输出的 Shell 脚本

> ID：12226482
> 
> 赞同：1
> 
> 时间：2012-09-01T09:15:06.173
> 
> 标签：shell

以下脚本正在生成所需的输出，但未将结果重定向到 /home/myuser/slavedelay.html

#!/bin/bash

```
host=<ip>
echo $host
user=usr1
password=mypass
threshold=300
statusok=OK
statuscritical=CRITICAL

for i in ert7 ert9
do
echo "<html>" > /home/myuser/slavedelay.html

if [ "$i" == "ert7" ]; then
        slvdelay=`mysql  -u$user -p$password -h<ip> -S /backup/mysql/mysql.sock -e 'show slave status\G' | grep Seconds_Behind_Master | sed -e 's/ *Seconds_Behind_Master: //'`
         if [ $slvdelay -ge $threshold ]; then
                echo "<tr><td>$i</td><td>CRITICAL</td>"  >> /home/myuser/slavedelay.html
                echo "<tr><td>$i</td><td>CRITICAL</td>" 
        else
                echo "<tr><td>$i</td><td>OK</td>"  >> /home/myuser/slavedelay.html
                echo "<tr><td>$i</td><td>OK</td>"
         fi
fi
done
echo "</html>" >> /home/myuser/slavedelay.html 
```

如果我 cat 输出文件 /home/myuser/slavedelay.html 它给出。

```
<html>
</html> 
```

执行结果：

```
sh slave_delay.sh 
<tr><td>sdb7</td><td>OK</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:39:16.753

每次通过循环时，您都会因为命令清空输出文件

```
echo "<html>" > /home/myuser/slavedelay.html 
```

所以第一次迭代将`<tr>`行写入文件，然后下一次迭代覆盖文件并且不写那些行，因为`$i`is not `ert7`。

将其更改为：

```
for i in ert7 ert9
do
if [ "$i" == "ert7" ]; then
        echo "<html>" > /home/myuser/slavedelay.html
        slvdelay=`mysql  -u$user -p$password -h<ip> -S /backup/mysql/mysql.sock -e 'show slave status\G' | grep Seconds_Behind_Master | sed -e 's/ *Seconds_Behind_Master: //'`
         if [ $slvdelay -ge $threshold ]; then
                echo "<tr><td>$i</td><td>CRITICAL</td>"
        else
                echo "<tr><td>$i</td><td>OK</td>"
         fi | tee -a /home/myuser/slavedelay.html
        echo "</html>" >> /home/myuser/slavedelay.html
fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:17:59.497

代替 ：

```
if [ "$i" == "ert7" ]; 
```

和：

```
if [ "$i" = "ert7" ]; 
```

`=`您也在测试中使用运算符。

# php - PHP 复制粘贴检测器

> ID：12226484
> 
> 赞同：5
> 
> 时间：2012-09-01T09:15:27.260
> 
> 标签：php, pear

我的问题是，当我运行[phpcpd](https://github.com/sebastianbergmann/phpcpd)命令时，我总是得到 0% 的代码结果，无论它是我的项目，是否是任何 php 模块的文件，或者它是我创建的用于检查 phpcpd 是否有效的文件......例如当我检查下面的文件，它也显示 0%：

phpcpd 文件夹/file.php：

```
<?php

class Class_Two {

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
        }
    }   

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
        }
    }
    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
        }
    }

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
        }
    }
    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
        }
    }

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
        }
    }
    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
        }
    }

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
        }
    }
    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
        }
    }

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
        }
    }
    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
        }
    }

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
            echo 'ok';
        }
    }

}

class Class_Two {

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
        }
    }

    public function aaa()
    {
        if(2 == 2)
        {
            echo 'ok';
        }
    }

} 
```

关于为什么它不能正常工作的任何建议？或者也许它应该做一些其他的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:19:37.550

来自[http://www.codediesel.com/tools/detecting-duplicate-code-in-php-files/](http://www.codediesel.com/tools/detecting-duplicate-code-in-php-files/)

> 默认情况下，phpcpd 将搜索至少 5 个相同的行和 70 个相同的标记。因此，如果代码中的重复行少于 5 个或相同标记少于 70 个，它们将被忽略。要覆盖它，您可以使用 –min-lines 和 –min-tokens 开关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:36:21.057

尝试在文件夹而不是文件上运行它：

```
phpcpd /folder/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:20:21.860

哦，我都试过了，但都没有用……我的意思是我总是得到 0 双行，即使我在一个文件中做了很多相同的行。

当我输入 --min-lines 1 --min-tokens 1 但是我收到两个通知： C:/php/pear/PHPCPD/Detector/Strategy/Default.php 中的未定义偏移量在第 106 行...

# jquery - 使用 JQuery 逐像素显示图像

> ID：12226490
> 
> 赞同：1
> 
> 时间：2012-09-01T09:16:15.543
> 
> 标签：jquery, image

我有一个图像；我想获取此图像的每个像素并逐个像素地显示它（类似于图像效果）。

有没有办法用jQuery逐像素显示图像？

这可能吗？

# android - 控制将去哪里 LDPI 或 Mdpi

> ID：12226491
> 
> 赞同：0
> 
> 时间：2012-09-01T09:16:18.310
> 
> 标签：android

我想测试[Moto](http://www.gsmarena.com/motorola_razr_xt910-4273.php) razr

ldpi 或 mdpi 或 Hdpi 将在我的控制中进行？有关设备的详细信息，请参阅规格。有一些 UI 问题，所以我想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:19:55.297

这取决于您设备的密度（dpi）。

```
Ldpi   -  120dpi and above
Mdpi   -  160dpi and above
Hdpi   -  240dpi and above
XHdpi  -  320dpi and above 
```

由于[Moto Razr](http://www.gsmarena.com/motorola_razr_xt910-4273.php)具有*256dp*，因此它将使用来自`Hdpi`.

[http://developer.android.com/guide/practices/screens_support.html#range](http://developer.android.com/guide/practices/screens_support.html#range)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:23:43.343

摩托罗拉 RAZR XT910 的屏幕约为 256 dpi，它很可能在 MDPI 之前查找**HDPI**资源。

# android - Android 3.0 和 4.0 中的 JIT 编译器改进

> ID：12226494
> 
> 赞同：7
> 
> 时间：2012-09-01T09:16:47.730
> 
> 标签：android, jit

当 Just in Time 编译器在 2.2 版中添加到 Android 中时，也发布了很多关于它如何工作的详细信息。Android 3.0的[官方描述](http://developer.android.com/about/versions/android-3.0.html)也提到了“对 JIT 基础设施的各种改进”，但我无法找到有关这些改进的任何信息，也没有找到有关 Android 4.0 中 JIT 的任何详细信息。JIT 在最新版本中是否保持相对不变，或者是否有任何关于这些改进的信息？

编辑：正如我在下面的回答中所述，我发现了一些描述改进的变更日志条目。任何其他信息仍将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T10:34:48.610

[在从其公共 GIT 存储库](https://github.com/android/platform_dalvik)中查看 Dalvik VM 源代码并按照[此处](https://stackoverflow.com/a/9657450/836885)所述搜索其更改日志后，我发现除了错误修复之外，最近唯一与 JIT 相关的主要更改似乎是：

```
Date: Tue Jul 3 13:13:07 2012 -0700
[X86] X86 trace JIT compiler support

This patch provides a fully functional x86 trace JIT compiler for Dalvik
VM. It is built on top of the existing x86 fast interpreter
with bug fixes and needed extension to support trace JIT interface. The
x86 trace JIT code generator was developed independent of the existing
template-based code generator and thus does not share exactly the same
infrastructure. Included in this patch are:

* Deprecated and removed the x86-atom fast interpreter that is no
  longer functional since ICS.
* Augmented x86 fast interpreter to provide interfaces for x86 trace JIT
  compiler.
* Added x86 trace JIT code generator with full JDWP debugging support.
* Method JIT and self-verification mode are not supported.

The x86 code generator uses the x86 instruction encoder/decoder library
from the Apache Harmony project. Additional wrapper extension and bug
fixes were added to support the x86 trace JIT code generator. The x86
instruction encoder/decoder is embedded inside the x86 code generator
under the libenc subdirectory. 
```

和

```
Date: Wed May 2 14:27:16 2012 -0700
[MIPS] Dalvik fast interpreter support and JIT implementation 
```

# iphone - 将 Iphone 挂载为磁盘

> ID：12226501
> 
> 赞同：1
> 
> 时间：2012-09-01T09:17:43.963
> 
> 标签：iphone, macos, cocoa

我有一个在 osx 和 iphone 上运行的小应用程序。我正在尝试扩展我的 osx 应用程序，它应该能够检测何时插入 iphone 并能够将文件传输到桌面应用程序。

是否需要驱动程序/任何用户模式代码才能在 OSX 上安装 iphone。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:17:19.913

Apple 不会让您直接传输文件，但它们为您提供了一种通过 iTunes 传输文件的方法。我找到[了这个链接](http://developer.appcelerator.com/question/49101/transfer-filedata-via-itunes-to-the-app)。

# ruby-on-rails - 设计测试助手 - 登录不起作用

> ID：12226502
> 
> 赞同：10
> 
> 时间：2012-09-01T09:17:44.450
> 
> 标签：ruby-on-rails, testing, devise

出于某种原因，我无法让设计辅助方法 sign_in 工作。current_user 继续为空。知道问题可能是什么吗？

测试：

```
 before :each do
    @user = FactoryGirl.create :user
    sign_in @user
  end

  describe "GET index" do
    it "assigns all subscribers as @subscribers" do
      subscriber = @user.subscribers.create! valid_attributes
      get :index
      assigns(:subscribers).should eq([subscriber])
    end
  end 
```

执行：

```
 def index
    @subscribers = current_user.subscribers.all    <------- ERROR

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @subscribers }
    end
  end

Error:
 NoMethodError:
       undefined method `subscribers' for nil:NilClass 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-11T02:46:13.870

如果您在模型（或其他可设计验证的模型）中包含该`Confirmable`模块，则必须确认您创建的测试才能生效：`User``@user``sign_in`

```
before :each do
  @user = FactoryGirl.create :user
  @user.confirm!
  sign_in @user
end 
```

（我知道这不是你的问题，但也许其他读者会从中受益。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-19T21:38:33.960

从您的代码来看，您似乎解决了这个问题。我以前也发生过这种情况，出于某种原因，它每次都让我感到困惑。

用于控制器规范的 rspec/rails 脚手架不适用于开箱即用的 Devise::TestHelpers。

```
get :index, {}, valid_session 
```

valid_session 调用会覆盖 Devise 设置的会话内容。去掉它：

```
get :index, {} 
```

这应该工作！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-01T09:23:15.033

对于 Devise 4.2.0+ 版本，`Devise::TestHelpers`已弃用。相反，`Devise::Test::ControllerHelpers`应该使用。

```
RSpec.configure do |config|
  config.include Devise::Test::ControllerHelpers, type: :controller
end 
```

[变更日志](https://github.com/heartcombo/devise/blob/master/CHANGELOG.md#420---2016-07-01)

* * *

对于规范，请确保`include Devise::TestHelpers`. 为了方便起见，在我的**spec/spec_helper.rb**中，我有：

```
RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
end 
```

它会自动将它包含在所有控制器规格中。

此外，您需要这样做才能让 sign_in 工作：

```
@request.env["devise.mapping"] = Devise.mappings[:user]
get :new 
```

最好添加`@request.env["devise.mapping"] = Devise.mappings[:user]`到您的 before(:each) 中。（请注意，如果您不想为每个控制器执行此操作，您可以在配置中执行此操作）。

* * *

对于`current_user`零件，请确保您有一个模型`User`，您可以在其中调用`devise`

```
class User < ActiveRecord::Base
  # call devise to define user_signed_in? and current_user
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable
  # though you don't have to include all these modules
end 
```

Devise 使用 User 模型中的调用来定义`user_signed_in?`和`current_user`在您的控制器中。原因是，如果您有：

```
class Admin < ActiveRecord::Base
  devise
end 
```

然后设计将有方法`admin_signed_in?`和`current_admin`定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T15:24:05.063

我在尝试测试我正在编写的 SSO 端点是否正在为用户创建会话时遇到了这个问题。由于它只适用于一个测试，我只需要在测试之前添加以下块

```
 before do
    @request.env["devise.mapping"] = Devise.mappings[:user]
    user = FactoryGirl.create(:user, :email => email, :password => "password")
    user.confirm!
  end

  it "should create and session for the user and redirect to home page" do 
```

# playframework - 使用 Play 2 对 URL 进行编码

> ID：12226508
> 
> 赞同：14
> 
> 时间：2012-09-01T09:18:14.767
> 
> 标签：playframework, playframework-2.0, urlencode

如何使用 Play 2 对模板中的 URL 进行编码？

我搜索这样的助手：

```
<a href="@urlEncode(name)">urlEncode doesn't work now</a> 
```

我找到了一个[pull request](https://github.com/playframework/Play20/pull/294)，但这似乎不适用于实际的 play 2.0.3 版本。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-16T14:34:41.427

从 2.1 开始，您可以使用`@helper.urlEncode`

```
<a href="@helper.urlEncode(foo)">my href is urlencoded</a> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-01T10:20:37.257

正如我在[链接](https://play.lighthouseapp.com/projects/82401/tickets/439-helper-for-url-encoding-in-template-missing#ticket-439-1)中看到的那样，它将在 Play 2.1 中解决

最快的解决方案是在您的控制器中放置方法（`Application.java`在此示例中）

```
public static String EncodeURL(String url) throws java.io.UnsupportedEncodingException {
    url = java.net.URLEncoder.encode(url, "UTF-8");
    return url;
}

public static String EncodeURL(Call call) throws java.io.UnsupportedEncodingException {
    return EncodeURL(call.toString());
} 
```

然后根据需要在视图中使用它：

```
<a href='@Application.EncodeURL(routes.Application.someAction())'>
    Encoded url form router</a>  <br/>

<a href='@Application.EncodeURL("/this/is/url/to/encode")'>
     Encoded url from string</a>  <br/>

<a href='@routes.Application.someAction()?encoded=@Application.EncodeURL(routes.Application.someOtherAction())'>
     Url mixed normal+encoded</a>  <br/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-29T18:51:29.763

使用@helper.urlEncode，如

`@helper.urlEncode("http://www.giulio.ro/image/magictoolbox_cache/3bf842518f40ca6b8a10b619b8e02daf/6/2/621/thumb320x320/0804-427 - 255 lei.jpg")`

回来

`http%3A%2F%2Fwww.giulio.ro%2Fimage%2Fmagictoolbox_cache%2F3bf842518f40ca6b8a10b619b8e02daf%2F6%2F2%2F621%2Fthumb320x320%2F0804-427+-+255+lei.jpg`

而我需要/期望的是

`http://www.giulio.ro/image/magictoolbox_cache/3bf842518f40ca6b8a10b619b8e02daf/6/2/621/thumb320x320/0804-427%20-%20255%20lei.jpg`

我使用@scott-izu 这个解决方案 [https://stackoverflow.com/a/9542781/99248](https://stackoverflow.com/a/9542781/99248)

# windows-8 - RTM 上的 Windows Metro 应用程序认证失败

> ID：12226509
> 
> 赞同：2
> 
> 时间：2012-09-01T09:18:24.907
> 
> 标签：windows-8, microsoft-metro

我们在 Windows8(RTM) 上创建了一个 XAML C# 项目，但它未能使用 Windows App Cert Kit 获得认证但此失败发生在 RTM 机器上，我们能够通过预览版的测试。

只是为了确保由于 RTM 可能会发生这种情况，我们创建了一个示例网格布局项目并使用认证工具包进行了检查，但即使这样也失败了。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:19:06.027

我有这个确切的问题。RTM 和 Release Preview 之间存在更改，包括版本号更改会自动触发 WACK 测试工具失败。

基本上，您需要在 Windows 8 的 RTM 副本上使用 RTM Visual Studio 重新编译您的项目代码。如果您使用第三方组件，您还需要更新任何引用。

# javascript - Javascript 简写

> ID：12226513
> 
> 赞同：1
> 
> 时间：2012-09-01T09:19:14.207
> 
> 标签：javascript

考虑以下示例：

```
if (cache) {
    x = cache;
} else {
    x = cache = someMethod();
} 
```

无论如何要使它比`cache ? x = cache : x = cache = someMethod();`?

**编辑：**

感谢所有提出的解决方案，我应该注意到有问题的数据是字符串而不是布尔值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T09:20:45.520

```
x = cache || (cache = someMethod()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:43:55.697

如果不确定`cache`之前已声明和/或分配，这是对[MaxArt](https://stackoverflow.com/users/714240/maxart)答案的修改（使用[短路布尔评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)和[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator?redirectlocale=en-US&redirectslug=JavaScript/Reference/Operators/Special/Comma_Operator)）：

```
x = (cache = window.cache || someMethod(),cache);
//note: 'window' may be another namespace 
```

在严格模式下也行不通。在这种情况下，这将：

```
'use strict';
var x = function(w){w.cache = w.cache || someMethod(); return w.cache;}(window); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T09:24:36.967

做到这一点的干净方法（即使使用布尔值）将是

```
 if (cache === undefined) { cache = someMethod (); }
   x = cache; 
```

# c# - 生成谷歌地图的图像

> ID：12226521
> 
> 赞同：4
> 
> 时间：2012-09-01T09:20:59.397
> 
> 标签：c#, asp.net, google-maps, google-static-maps

我想允许我网站的最终用户生成谷歌地图的图像。在用户在谷歌地图上选择了它的位置然后可以生成图像之后，这怎么可能呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T09:43:29.800

这不被允许。看这里：

[https://developers.google.com/maps/faq#tos_screenshots](https://developers.google.com/maps/faq#tos_screenshots)

> **在印刷材料和离线媒体**中使用 Google 地图图像须遵守发布于以下网址的许可指南：
> 
> [http://www.google.com/permissions/geoguidelines.html](http://www.google.com/permissions/geoguidelines.html)

您可以请求许可，但我认为获得许可并不容易，除非您是付费商业客户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T11:23:22.503

除了“不允许”部分之外，可能还有一种方法可以让您的用户下载 Google 地图屏幕。然而，这将需要一些编程。这是基本思想：

当用户在您的页面上与 Google 地图交互时，您可以跟踪使用的缩放和地图边界以及所选位置。使用这些值，您可以使用[Google Static Maps API](https://developers.google.com/maps/documentation/staticmaps/)让您的用户下载静态图像。

# php - SDK Facebook 应用程序 - 只允许在 FB 上使用该应用程序，而不是在我的网站上

> ID：12226522
> 
> 赞同：1
> 
> 时间：2012-09-01T09:21:11.693
> 
> 标签：php, facebook, facebook-graph-api, facebook-apps

我是为 Facebook 创建应用程序的新手，我想问你一些事情。

我创建了我的第一个应用程序，在我设置的设置中`domain URL`，`canvas URL`当我通过`apps.facebook.com/my_app_name`应用程序加载应用程序时，*以及*`canvas URL`当我通过我配置的访问页面时。

有没有办法只在 Facebook chrome 中加载时才允许访问应用程序？

此外，在我制作的应用程序中还有一些链接、按钮等，当您将鼠标悬停在它们上方时，您可以在下面的状态栏中看到我自己的域。有没有办法改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:36:39.537

当您的页面在 Facebook 中被调用时，它会收到一个`signed_request`via `$_POST`。您可以基于此显示页面，或者可能重定向到`apps.facebook.com/yourapp`。

参见：[signed_request](https://developers.facebook.com/docs/authentication/signed_request/)

至于状态栏中显示的链接，您需要将这些链接重写为指向`apps.facebook.com/yourapp/somepage`. 执行此操作时，链接目标应设置为`_top`.

或者，您可以执行以下操作：

```
<a href="#" data-url="/mypage?id=123" class="hidden-url">click me</a> 
```

然后使用 jQuery：

```
$(function() {
    $('a.hidden-url').on('click', function(evt) {
        location = $(this).data('url');
        return false;
    });
}); 
```

# javascript - TinyMCE全屏不允许出现模式窗口

> ID：12226523
> 
> 赞同：2
> 
> 时间：2012-09-01T09:21:45.983
> 
> 标签：javascript, twitter-bootstrap, tinymce

我的页面中嵌入了一个 TinyMCE 编辑器。编辑器的全屏选项占据整个屏幕，工作正常。我还有一个按钮，它使用 Twitter 引导程序弹出一个模式窗口，它在正常视图中工作正常。但是当 tinymce 编辑器处于全屏模式时，模态窗口正在初始化但不可见。

当我退出全屏窗口时，会出现模式窗口。所以它得到显示，但它在后台。即使在全屏模式下，我如何让它出现？

```
tinymce.init({
                            mode: "exact",
                            elements: "tinymce",
                            theme: "advanced",
                            plugins: 'ice,icesearchreplace,fullscreen',
                            theme_advanced_buttons1: "ec_error,fullscreen,strikethrough,|,bold,italic,underline,|,undo,redo,|,search,replace,|,ice_togglechanges,ice_toggleshowchanges,iceacceptall,icerejectall,iceaccept,icereject",
                            theme_advanced_buttons2: "",
                            theme_advanced_buttons3: "",
                            theme_advanced_buttons4: "",
                            theme_advanced_toolbar_location: "top",
                            theme_advanced_toolbar_align: "left",
                            fullscreen_new_window : false,
                            extended_valid_elements: "p,span[*],delete[*],insert[*]",
                            ice: {
                                user: { name: 'Email Coach', id: 11},
                                preserveOnPaste: 'p,a[href],i,em,b,span'
                            },
                            height: '500',
                            width:'100%'
                        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T12:13:08.517

TinyMCE`#mce_fullscreen_container`是`z-index: 20000;`
Bootstrap 的`.modal`，`z-index: 1050;`并且`.modal-backdrop`（背景褪色）是`z-index: 1040;`

因此，将`z-index`您的模态窗口提高到 20000 以上

```
.modal {
    z-index: 30050;
}
.modal-backdrop {
    z-index: 30040;
} 
```

# java - 使用 htmlunit 单击 javascript 锚点似乎不起作用

> ID：12226528
> 
> 赞同：5
> 
> 时间：2012-09-01T09:22:44.673
> 
> 标签：java, javascript, anchor, htmlunit

我正在使用 htmlunit 自动浏览一个网站。这是问题所在：

我想单击一个锚点以显示给定表格的新页面。

这是锚点：

```
<a href="javascript:__doPostBack('GridView1','Page$7')">7</a> 
```

这是我的代码：

```
final HtmlAnchor a = page2.getAnchorByText("7");
HtmlPage page3 = a.click();
System.out.println(page2.getWebResponse().getContentAsString())
System.out.println(page3.getWebResponse().getContentAsString()); 
```

我没有任何错误信息。当我比较我的打印输出时，它们是相同的，但它们不应该是相同的，因为我只是单击了一个锚点。第一次打印应该显示表格的某一页，第二次打印出另一个。

[努力点击 htmlunit 中的链接](https://stackoverflow.com/questions/5244005/struggling-to-click-on-link-within-htmlunit)的 stackoverflow 帖子呈现了一个非常相似的问题，但是他的解决方案（将浏览器版本设置为 webclient）在我的情况下似乎不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-18T00:54:34.193

也许您需要等待 javascript 执行并首先加载。我建议使用以下命令：

```
webClient.waitForBackgroundJavaScript(1000); 
```

甚至：

```
JavaScriptJobManager manager = page.getEnclosingWindow().getJobManager();
while (manager.getJobCount() > 0) {
    Thread.sleep(100);
} 
```

还有另一种选择：

```
webClient.setAjaxController(new NicelyResynchronizingAjaxController());
webClient.setAjaxController(new AjaxController(){
    @Override
    public boolean processSynchron(HtmlPage page, WebRequest request, boolean async)
    {
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T18:00:30.610

最终 HtmlAnchor a = page2.getAnchorByText("7"); HtmlPage page3 = a.click();

// 添加这个 client.waitForBackgroundJavaScriptStartingBefore(10000); 这里 client.waitForBackgroundJavaScriptStartingBefore(10000);

System.out.println(page2.getWebResponse().getContentAsString()) System.out.println(page3.getWebResponse().getContentAsString());

# c# - 无法加载与 ADO.NET 提供程序对应的 SQL Server Compact 的本机组件

> ID：12226530
> 
> 赞同：23
> 
> 时间：2012-09-01T09:23:00.740
> 
> 标签：c#, entity-framework, sql-server-ce

在我的项目中，我使用带有实体框架的 SQL CE 3.5 数据库并遵循 [这篇文章](http://erikej.blogspot.dk/2012/05/private-deployment-of-sql-server.html) ，但我有这个例外：

> 无法加载与版本 8080 的 ADO.NET 提供程序对应的 SQL Server Compact 本机组件。请安装正确版本的 SQL Server Compact。有关详细信息，请参阅知识库文章 974247。

所有细节

```
System.Data.SqlServerCe.SqlCeException was unhandled
  Message=Unable to load the native components of SQL Server Compact corresponding to the ADO.NET provider of version 8080\. Install the correct version of SQL Server Compact. Refer to KB article 974247 for more details.
  Source=""
  HResult=-1
  NativeError=-1
  StackTrace:
       at System.Data.SqlServerCe.NativeMethods.LoadNativeBinaries()
       at System.Data.SqlServerCe.SqlCeConnection..ctor()
       at System.Data.SqlServerCe.SqlCeProviderFactory.CreateConnection()
       at System.Data.EntityClient.EntityConnection.GetStoreConnection(DbProviderFactory factory)
       at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
       at System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName)
       at DAL.OimDBEntities..ctor()
       at DAL.OimRepository..ctor()
       at Microsoft.Rtc.Collaboration.Sample.SubscribePresenceView.UCMASampleSubscribePresenceView.Subscribe()
       at Microsoft.Rtc.Collaboration.Sample.SubscribePresenceView.UCMASampleSubscribePresenceView.Run()
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.DllNotFoundException
       Message=Unable to load DLL 'sqlceme35.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
       Source=System.Data.SqlServerCe
       TypeName=""
       StackTrace:
            at System.Data.SqlServerCe.NativeMethods.GetSqlCeVersionInfo(IntPtr& pwszVersion)
            at System.Data.SqlServerCe.NativeMethods.LoadValidLibrary(String modulePath, Int32 moduleVersion)
            at System.Data.SqlServerCe.NativeMethods.LoadNativeBinaries()
       InnerException: 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-06-13T04:15:17.340

我在私人安装 SqlServerCE 时遇到此错误。我在我的项目中引用了 System.Data.SqlServerCe.dll，但我缺少 SqlServerCE 所需的其他 dll（本机组件）。“本机组件”位于 SqlServerCE 的“私有”文件夹的 x86 和 amd64 子文件夹中。您需要确保将它们复制到项目的输出文件夹中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T08:11:29.383

我也遇到过同样的问题。问题是我使用了以下命令 install-package EFcodeFirst.SqlServerCompact 来获取 sqlCE。包管理器下载的版本是 4.0，而在我的硬盘上存在的版本是 3.5

从以下位置下载最新版本 4.0 [http://www.microsoft.com/en-us/download/details.aspx?id=17876](http://www.microsoft.com/en-us/download/details.aspx?id=17876)确实解决了我的问题

编辑：上面的链接现在返回 404。现在这是下载的正确位置： [https ://www.microsoft.com/en-us/download/details.aspx?id=30709](https://www.microsoft.com/en-us/download/details.aspx?id=30709)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-01T11:13:41.307

我有一个类似的问题。我正在打开一个紧凑的框架 sql 数据库，它给了我以下错误：

> 无法加载与版本 8080 的 ADO.NET 提供程序对应的 SQL Server Compact 本机组件。请安装正确版本的 SQL Server Compact。有关详细信息，请参阅知识库文章 974247。

在查找文章时，它引导我进入以下[链接](http://support.microsoft.com/kb/974247/en-us)。以下引用解释了出了什么问题：

> 基于 Compact 的应用程序通常针对 Compact ADO.NET 提供程序 (System.Data.SqlServerCe.dll) 进行编程。该提供程序反过来与本机 Compact 组件进行通信。为了避免各种不一致，某个版本的 Compact ADO.NET 提供程序只能与同一版本的 Compact 本机组件通信。

最后，我通过下载并安装以下[链接中的服务包解决了这个问题。](http://www.microsoft.com/en-us/download/details.aspx?id=5783)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-13T11:59:23.800

您需要将以下文件和整个目录复制到您的 .exe 在服务器上运行的位置。此文件和文件夹很可能位于目录 C:\Program Files(x86)\Microsoft SQL Server Compact Edition\V4.0\Private

System.Data.SqlServerCe.dll 整个 amd64 文件夹我不确定 amd64 文件夹中使用的是什么，但是一旦我将它复制到我的应用程序上，我的应用程序就开始工作了。您还可以通过在 Visual Studio 中的 References 文件夹下单击它来获取 System.Data.SqlServerCe.dll 文件，然后在属性选项卡中将“复制本地”设置为 True，然后当您构建应用程序时，该文件将在您的发布文件夹。

# java - 方法（列表 ) 类型中的参数不适用于参数（布尔值）

> ID：12226538
> 
> 赞同：1
> 
> 时间：2012-09-01T09:24:20.287
> 
> 标签：java, json

我在 setid 方法上遇到运行时错误，提示“dtoClass 类型中的方法 ids(List) 不适用于参数（布尔值）”。下面是代码。可能是什么错误

```
JSONArray jsonInnerArray = null;
jsonInnerArray = jsonObj.getJSONArray("ids");
List<String> ids = new ArrayList<String>();    
dtoClass.setid(ids.add(jsonInnerArray.get(i).toString())); 
```

DTO 类

```
public class dtoClass{
private List<String> ids = null;

public List<String> getids() {
    return tracking_ids;
}
public void setids(List<String> ids) {
    this.ids = ids;
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T09:26:21.180

那是因为`ids.add`返回一个`boolean`. 请参阅 javadoc[`List.add`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28E%29)

要解决此问题，请将代码更改为：

```
JSONArray jsonInnerArray = null;
jsonInnerArray = jsonObj.getJSONArray("ids");
List<String> ids = new ArrayList<String>();    
ids.add(jsonInnerArray.get(i).toString())
dtoClass.setid(ids); 
```

# android - AutoCompleteTextView : 如果未找到匹配项发出警报

> ID：12226542
> 
> 赞同：1
> 
> 时间：2012-09-01T09:24:53.393
> 
> 标签：android, android-arrayadapter

**我有什么：** 一个附加到数组适配器的 AutocompleteTextView *txt_itemName* 以在键入时显示建议。

```
ArrayAdapter<String> autoCompAdapter = new ArrayAdapter<String>(HomePageActivity.this,        
R.layout.listrow_item_autocomp, items_list);

txt_itemName.setAdapter(autoCompAdapter); 
```

**我需要知道的**

键入时，如果没有找到匹配项，它应该通过 autoCompleteTextView 本身或其他方式通知用户

有什么建议么 ？？

# java - SWT.WEBKIT 在 Window-7（64 位）中不起作用

> ID：12226544
> 
> 赞同：0
> 
> 时间：2012-09-01T09:25:04.327
> 
> 标签：java, browser, swt

我想使用 Windows-7（64 位）在 SWT 中打开 webkit 浏览器，但每次它都会抛出**“没有更多句柄”**异常。我安装了 Safari 浏览器和资源。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:43:44.447

如果您使用的是 Java 7，请尝试降级到 Java 7u6。最新的 Java 7 版本与 WebKit dll 存在 dll 冲突。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=388469](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388469)

让我知道这是否有帮助！

# ruby-on-rails - 检查参数是否有值失败（ NoMethodError (nil:NilClass 的未定义方法 `[]': )

> ID：12226545
> 
> 赞同：0
> 
> 时间：2012-09-01T09:25:11.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, params, null, param

使用以下搜索方法我无法检查参数是否存在。它总是抛出 NoMethodError（nil:NilClass 的未定义方法 `[]'）：

if params['/people'][:age_from].present? && 参数['/people'][:age_to].present? 如果声明和性别声明似乎完全失败并且不知道为什么:(

```
 def self.search(params)

    puts params

    tire.search(load: true, page: params[:page], per_page: 20) do
      query do
        boolean do
          should { range :age, {gte: params['/people'][:age_from], lte: params['/people'][:age_to]} } if params['/people'][:age_from].present? && params['/people'][:age_to].present? 
          should { string 'gender:male' } if params['/people'][:gender].present && params['/people'][:gender] == "male" 
        end
      end
      to_curl
    end
  end 
```

非常混乱：但这似乎有效

```
 def self.search(params)
    if params['people']
      tire.search(load: true, page: params[:page], per_page: 20) do
        query do
          boolean do
            should { range :age, {gte: params['people'][:age_from], lte: params['people'][:age_to]} }
            should { string 'gender:male' } if params['people'][:gender] == "male"
            should { string 'gender:female' } if params['people'][:gender] == "female"
          end
        end
        to_curl
      end
    else
      if Rails.env == "development"
        @profiles = Profile.where('status IS NOT NULL').page(params[:page]).order("id").per_page(50)
      else
        @profiles = Profile.where("user_id != ?", current_user.id).where('status IS NOT NULL').order("id").page(params[:page]).per_page(40)
      end
    end

  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:28:43.487

那是因为`params['/people']`是 nil，并且 nil[] 准确地返回您得到的错误。

您还应该检查哈希中第一部分是否存在，如下所示：

```
if params['/people'] && params['/people'][:gender].present && params['/people'][:gender] == "male" 
```

# c++ - RegLoadKey 给出错误代码 5（拒绝访问）

> ID：12226546
> 
> 赞同：1
> 
> 时间：2012-09-01T09:25:21.287
> 
> 标签：c++, c, windows, registry, key

嗨，我正在尝试从中加载密钥，`HKLM\\SYSTEM\\CurrentControlSet\\Services\\Fax`但出现错误 5（拒绝访问）。我无法弄清楚我的代码有什么问题。

这是我的代码

```
#include <windows.h>
#include <tchar.h>
#include <stdio.h>

BOOL SetPrivilege(
    HANDLE hToken,          // access token handle
    LPCTSTR lpszPrivilege,  // name of privilege to enable/disable
    BOOL bEnablePrivilege   // to enable or disable privilege
) 
{
    TOKEN_PRIVILEGES tp;
    LUID luid;

    if ( !LookupPrivilegeValue( 
        NULL,            // lookup privilege on local system
        lpszPrivilege,   // privilege to lookup 
        &luid ) )        // receives LUID of privilege
{
    printf("LookupPrivilegeValue error: %u\n", GetLastError() ); 
    return FALSE; 
}

tp.PrivilegeCount = 1;
tp.Privileges[0].Luid = luid;
if (bEnablePrivilege)
    tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
else
    tp.Privileges[0].Attributes = 0;

// Enable the privilege or disable all privileges.

if ( !AdjustTokenPrivileges(
       hToken, 
       FALSE, 
       &tp, 
       sizeof(TOKEN_PRIVILEGES), 
       (PTOKEN_PRIVILEGES) NULL, 
       (PDWORD) NULL) )
{ 
      printf("AdjustTokenPrivileges error: %u\n", GetLastError() ); 
      return FALSE; 
} 

if (GetLastError() == ERROR_NOT_ALL_ASSIGNED)

{
      printf("The token does not have the specified privilege. \n");
      return FALSE;
} 

return TRUE;
}
void _tmain(int argc, TCHAR *argv[])
{

HKEY   hKey;
LONG   lErrorCode;
HANDLE ProcessToken;
LPCWSTR subkey =  L"SYSTEM\\CurrentControlSet\\Services\\Fax";

if (OpenProcessToken(GetCurrentProcess(), 
        TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &ProcessToken)) 
{

    SetPrivilege(ProcessToken, SE_BACKUP_NAME, TRUE);
    SetPrivilege(ProcessToken, SE_RESTORE_NAME, TRUE);
    SetPrivilege(ProcessToken, SE_RESTORE_NAME, TRUE);

}

lErrorCode = RegOpenKeyEx(HKEY_LOCAL_MACHINE,subkey ,
                              0, KEY_ALL_ACCESS, &hKey);
if (lErrorCode != ERROR_SUCCESS)
   {
  _tprintf(TEXT("Error in RegOpenKeyEx (%d).\n"), lErrorCode);
  return;
   }
else
{
    _tprintf(TEXT("Key is successfully Opened\n"));
}

lErrorCode = RegSaveKey(hKey,L"c:\\load.reg",0);
if (lErrorCode != ERROR_SUCCESS)
   {
  _tprintf(TEXT("Error in RegSaveKey (%d).\n"), lErrorCode);
  return;
   }
else
{
    _tprintf(TEXT("Key is successfully Saved \n"));
}

lErrorCode = RegLoadKey(HKEY_LOCAL_MACHINE,subkey,L"c:\\load.reg");
if (lErrorCode != ERROR_SUCCESS)
   {
  _tprintf(TEXT("Error in RegLoadKey (%d).\n"), lErrorCode);
  return;
   }
else
{
    _tprintf(TEXT("Key is successfully loaded \n"));
}

lErrorCode = RegCloseKey(hKey);
if (lErrorCode != ERROR_SUCCESS)
   {
  _tprintf(TEXT("Error in closing the key (%d).\n"), lErrorCode);
  return;
   }
else
{
    _tprintf(TEXT("Key is successfully closed \n"));
}
} 
```

这是输出

```
Key is successfully Opened 
Key is successfully Saved 
Error in RegLoadKey (5). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T03:20:20.137

`RegLoadKey`只能用于将新配置单元加载到注册表中。您不能使用它来覆盖现有配置单元的子项。

您可能想`RegRestoreKey`改用。

*额外的：*

据我所知，hives 只能在注册表根目录中加载，即它们必须是`HKEY_LOCAL_MACHINE\foo`or `HKEY_USERS\foo`，never `HKEY_LOCAL_MACHINE\foo\bar`。另外，我不认为您可以使用已经存在的名称加载配置单元，例如，您不能将配置单元加载到`HKEY_LOCAL_MACHINE\SOFTWARE`. 即使你可以做这些事情，你也会改变你对内容的看法，而不是合并它，当系统重新启动时，原始内容会重新出现。如前所述，如果要将数据插入现有配置单元，请使用`RegRestoreKey`而不是`RegLoadKey`.

您询问 : 的用例`RegLoadKey`并不多。大多数情况下，它由操作系统使用；例如，这就是`HKEY_USERS\username`您登录时个人配置单元的加载方式。有一些奇怪的情况，例如[离线重置密码](http://harryjohnston.wordpress.com/2010/03/09/resetting-a-password-in-windows-7-or-windows-vista/)或以其他方式修改另一个 Windows 实例的注册表。我在教学实验室的计算机上用于无人值守安装 Windows 的过程取决于修改 Windows 安装映像的注册表以禁用键盘和鼠标。

# android - 在 Android 2.3 上使用 JQuery Mobile 在 Phonegap 中缺少转换

> ID：12226548
> 
> 赞同：1
> 
> 时间：2012-09-01T09:25:46.277
> 
> 标签：android, cordova, jquery-mobile, transition

在通过谷歌做了一些研究之后，我没有找到解决我的问题的方法，因此这个问题。我正在尝试使用 JQueryMobile(1.1.1) 构建一个 Phonegap 应用程序(2.0.0)。我看了一些教程，并实现了一个相当简单的应用程序。当我在我的 HTC 愿望（Android 2.3）上安装 .apk 时出现问题，没有过渡。它只是“闪烁”到新屏幕。

```
<div data-role="page" id="page1">
        <div data-role="content" style="padding: 15px">
        <a href="#page2" data-transition="slide" >link</a>
        </div>
    </div> 
```

在我的 android 清单文件中，我添加了这个

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" /> 
```

这没有帮助

我的问题是，怎么会？我是否忽略了某些东西，或者这是无法使用 android 2.3 与 PG 和 JQM 组合完成的正常情况？

提前感谢您对我可能愚蠢的问题的任何回答；）

顺便说一句：是否有更好的解决方案来实现转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:34:49.420

如[jQM 1.1.1 Docs](http://jquerymobile.com/demos/1.1.1/docs/pages/page-transitions.html)所述：

> 默认情况下，**除淡入淡出之外的所有过渡都需要 3D 变换支持**。缺少 3D 支持的设备将退回到淡入淡出转换，无论指定的转换如何。我们这样做是为了主动将**Android 2.x 等性能不佳的平台**排除在高级转换之外，并确保它们仍然拥有流畅的体验。请注意，有些平台（如 Android 3.0）在技术上支持 3D 变换，但动画性能仍然很差，因此这并不能保证每个浏览器都 100% 无闪烁，但我们尝试负责任地针对这一点。
> 
> 对于不支持 3D 变换的浏览器，可以为每种过渡类型配置后备过渡，**但默认情况下，我们将“fade”指定为后备**。例如，这会将滑出过渡的后备过渡设置为“无”：
> 
> ```
> $.mobile.transitionFallbacks.slideout = "none" 
> ```

# javascript - 将作用域变量添加到构造函数

> ID：12226559
> 
> 赞同：0
> 
> 时间：2012-09-01T09:27:01.227
> 
> 标签：javascript, oop, prototype

我正在尝试在javascript上创建一个类似于架构的类，但停留在一个点上。这是代码：

```
var make = function(args) {
    var priv = args.priv,
        cons = args.cons,
        pub = args.pub;
    return function(consParams) {

        var priv = priv,
            cons = args.cons;

        cons.prototype.constructor = cons;
        cons.prototype = $.extend({}, pub);

        if (!$.isFunction(cons)) {

            throw new Hata(100001);

        }
        return new cons(consParams);
    }
}; 
```

我正在尝试在返回的函数对象的范围和 cons.prototype 的对象范围上添加 priv 变量，但我无法做到；

这是make对象的用法：

```
var myClass = make({
    cons: function() {
        alert(this.acik);
        alert(priv.gizli);
    },
    pub: {
        acik: 'acik'
    },
    priv: {
        gizli: 'gizli'
    }
})
myObj = myClass(); 
```

PS：好吧，我使用外部变量只是为了演示我想要做什么。我知道javascript函数结构的私有变量语法。但是我需要一个解决方案来更改（添加私有变量）将由“新”（我忘记了模式名称）实例化模式使用的函数的范围。

PS：请原谅我的英文...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:33:44.723

如果您尝试复制类似结构的类，则 Javascript 中的常用方法如下：

```
//Constructor
function MyClass(myParam){
  this.myParam = myParam
}

MyClass.prototype.myMethod = function(){
  alert(this.myParam);  //retreives the "class" instance variable myParam
}

//Instantiation
var firstMyClass = new MyClass(7);
firstMyClass.myMethod(); //alerts 7 
```

请注意，在您添加到原型的函数中，这将是对 MyClass 实例的引用。如果您想创建私有变量，您可以从 Javascript 专家 Douglas Crockford 查看此链接：http: [//javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T10:29:46.137

如果你追求类结构，你真的应该遵循以下模式：

```
function MyClass(arg){}; 
```

重要提示：当您将内部闭包的 var 名称设置为与包含外部闭包的名称相同时，您将无法再访问具有相同名称的原始外部闭包 var。

另一方面，如果您需要访问外部闭包变量，则无需将内部闭包变量设置为同名。只需使用变量，就好像它们在内部闭包中一样。

```
var make = function(args) {
    var priv = args.priv,
        cons = args.cons,
        pub = args.pub;
    return function(consParams) {

        var someThing = priv,
            sElse     = args.cons;
    }
}; 
```

// 如果您需要将 var 或私有变量添加到名为 cons: 的函数对象中，如下所示，只需像添加任何其他函数对象一样添加它。

```
var myClass = make({
    cons: function() {
         var myPrivateVariable = 'private';
        alert(this.acik);
        alert(priv.gizli);
    },
    pub: {
        acik: 'acik'
    },
    priv: {
        gizli: 'gizli'
    }
})
myObj = myClass(); 
```

# jquery - 使用 .live("click" 与彼此内的元素时如何仅引用一个元素？

> ID：12226563
> 
> 赞同：1
> 
> 时间：2012-09-01T09:27:47.163
> 
> 标签：jquery, html, css, onclick

假设我有以下代码：

```
<div id="outerrt">
  <div id="rt" style="width: 200px; height: 200px; border: 1px solid black;">
    <span id="rt2">content</span>
  </div>
</div> 
```

我使用以下内容：

```
$("#outerrt *").live("click", function () {
  alert($(this).attr('id'));
}); 
```

当我点击文本时，它会给我`content`三个警报窗口，按以下顺序：

`rt2`

`rt`

`outerrt`

我真正希望它给我的只是一个 id: `rt2`。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:32:07.727

这是你想要的吗？

```
$("#rt2").live("click", function () {
  alert($(this).attr('id'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:32:11.267

```
$('#outerrt').on( 'click', '#rt', function() {
  alert($(this).attr('id'));
}); 
```

编辑： $(this) 和 $(e.target) 一样有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T09:34:01.010

您可以使用对象`target`的属性`event`。

```
$(document).on("click", '#outerrt', function(event) {
      alert(event.target.id);
      // $(event.target).attr('id')
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T09:38:47.747

实际上它只会给你前两个警报，因为`#outerrt *`选择器与元素不匹配`id="outerrt"`.

要阻止事件冒泡，请使用以下`stopPropagation`方法：

```
$("#outerrt *").live("click", function (e) {
  e.stopPropagation();
  alert($(this).attr('id'));
}); 
```

在较新版本的 jQuery 中，不推荐使用`live`and`delegate`方法，它们将所有功能都塞进了`on`方法中，因此等效代码为：

```
$("body").on("click", "#outerrt *", function (e) {
  e.stopPropagation();
  alert($(this).attr('id'));
}); 
```

但是，您应该将委托尽可能靠近您想要捕获事件的元素，即在您将加载内容的元素上。例子：

```
$("#outerrt").on("click", "*", function (e) {
  e.stopPropagation();
  alert($(this).attr('id'));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T09:29:59.350

直接在#rt2 上绑定它，或者使用`delegate`or`on`代替（取决于你的 jQuery 版本）。

*   委托（）：[http](http://api.jquery.com/delegate/) ://api.jquery.com/delegate/ （用于 jQuery < 1.7）
*   on(): [http://api.jquery.com/on/](http://api.jquery.com/on/) (用于 jQuery 1.7+)

使用`delegate`，您可以传递更具体的选择器：

```
$("#outerrt *").delegate("span","click", function () {
  alert($(this).attr('id'));
}); 
```

与以下类似`on`：

```
$("#outerrt").on("click", "#rt2", function(event){
  alert($(this).attr('id'));
}); 
```

在任何一种情况下，更具体的选择器 (`span`或`#rt2`) 意味着它仅在点击发生在与该选择器匹配的东西上时才会触发。

# jquery - jQuery在页面之间传递数据

> ID：12226564
> 
> 赞同：6
> 
> 时间：2012-09-01T09:27:47.680
> 
> 标签：jquery

我是 jQuery 的新手。有没有办法`booked`通过 jQuery 检索另一个页面中的值？

```
$(document).ready(function() {
    $(".active").click(function() {
        var booked=$(this).val();
        confirm(booked);
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T09:36:26.373

如果纯粹在客户端，请使用[cookie](https://github.com/carhartl/jquery-cookie)或 HTML5 。[`localStorage`](http://diveintohtml5.info/storage.html)

```
localStorage.setItem('bookedStatus' + customerId, true); 
```

如果数据已经提交到服务器，则使用[ajax 。](http://api.jquery.com/jQuery.ajax/)

```
$.get('/site/getBookingStatus?customerId=' + customerId, function(data){
   alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-17T09:37:12.837

或者，如果这是一个简单的字符串，您可以在导航到另一个页面时附加页面的 URL。如果这是受保护的数据，您可以加密字符串并附加。

您的网址将是：`example.com/nextPage?x=booked`

在下一页中，您可以通过按给定的方式对其进行解码来获取字符串：

```
var encodedData = window.location.href.split('=')[1];
var bookedValue = decodeURI(encodedData); 
```

如果您已加密脚本，则必须在下一页中解密。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-21T06:53:19.530

localStorage 在移动浏览器上效果不佳。我已经放弃尝试让 localStorage 在 iPhone/safari 上工作。如果您没有传递太多数据，那么一个简单的解决方案是使用通常的**?param=**语法将数据附加到您要导航到的 url：

```
// set your data in the source page 
function set_url_data(go_to_url, data) {
  new_url = go_to_url + '?data=' + data;
  window.location.href = new_url;
}

// parse your data in the destination page 
function grab_data_from_url() {
  url = window.location.href;
  data = url.split('data=').pop();
  return(data)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T09:36:40.920

如果它在同一个域中，您可以尝试使用 cookie。

您需要使用 jQuery cookie[插件](https://github.com/carhartl/jquery-cookie)（解决跨浏览器问题）。

你应该尝试做这样的事情：

1.  在第 1 页生成变量。
2.  将此变量保存为会话 cookie。
3.  在第 2 页上，您现在可以访问会话 cookie。
4.  如果用户直接访问第 2 页而不访问第 1 页，则您应该设置默认值。
5.  完毕！

# html - 图像在 Web 服务器上看起来不同

> ID：12226565
> 
> 赞同：0
> 
> 时间：2012-09-01T09:27:53.030
> 
> 标签：html, css, image

我刚刚意识到，在我的网站上，图像看起来与它们在本地主机上所做的有很大不同。我不知道为什么，这让我很困惑。

本地主机预览：[http](http://d.pr/i/6og)
://d.pr/i/6og 服务器预览：[http ://d.pr/i/OWKx](http://d.pr/i/OWKx)

本地主机渐变：[http](http://d.pr/i/C5el)
://d.pr/i/C5el 服务器渐变：[http ://d.pr/i/5pGi](http://d.pr/i/5pGi)

本地主机搜索栏：[http](http://d.pr/i/YL2X) ://d.pr/i/YL2X 服务器搜索栏：[http ://d.pr/i/dTCZ](http://d.pr/i/dTCZ)

正如你所看到的，它们有很大的不同。我真的不知道为什么，我想知道是否有人以前遇到过同样的问题？

我的网站：[http ://wpvault.com/kahlam/](http://wpvault.com/kahlam/)

我认为 CSS 中没有任何东西可以做到这一点？很奇怪，很纠结这个。任何帮助将非常感激。

**浏览器：**谷歌浏览器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:32:38.427

问题是浏览器中的颜色管理。这根本不是您的图像的错误。

[这](http://insig.ht/2009/11/why-photos-look-bad-in-firefox-3-5/)是我读到的文章。

以下是相关文章的部分摘录：

> 存在此特定问题是因为有两种类型的 ICC 配置文件，V2 和 V4（您只需要知道 V4 配置文件更准确；有关技术细节，请参阅此 International Color Consortium 文档）。问题是：
> 
> Firefox 3.0 和 Safari 了解 ICC V2 和 V4 配置文件。
> 
> Firefox 3.5 引入了一个新的色彩管理系统，它不再理解 ICC V4 配置文件（干得好）。
> 
> Internet Explorer 8 和 Google Chrome 根本不理解颜色配置文件！

**编辑**

我还在 Firefox 中找到了这个指向模糊图像的[链接](http://pleasemakeanote.blogspot.co.uk/2008/09/firefox-blurry-images.html)，这也可能与其他浏览器有关。

> 我最近遇到了一个关于 Firefox 的奇怪问题。我博客上的所有图像都相当模糊，好像缩放错误一样。所以我尝试了一个新的 Firefox 配置文件，它运行良好。所以一定有一些设置或一些附加组件是当前用户配置文件的一部分，导致了这种情况。我删除了所有扩展和附加组件无济于事。就在不久前，我在 Blitz Research 论坛上找到了解决方案。**事实证明，这是一个与给定网站的缩放级别相关的问题，Firefox 3.0 会记住这一点。通过单击 Ctrl + 0，您重置为无缩放。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:01:17.933

非常奇怪的问题，但我的所有图像都恢复了正常。似乎当我从 2mb 连接上传它们时，它只是将它们上传到非常垃圾质量的图像中。我回到家并通过我的 50mb 连接上传它们，一切都很好 - 所有图像现在都恢复正常了。谢谢您的帮助。

# c++ - R值和L值的输出不同。为什么？

> ID：12226567
> 
> 赞同：1
> 
> 时间：2012-09-01T09:28:33.183
> 
> 标签：c++, c++11, rvalue-reference, perfect-forwarding

有人可以向我解释为什么 R 值的输出与 L 值不同吗？

```
#include <iostream>
#include <vector>
using namespace std;

template<typename Ct>
struct  ct_wrapper {
    Ct&& ct; // R or L ref
    explicit ct_wrapper(Ct&& ct) 
      : ct(std::forward<Ct>(ct)) { std::cout <<  this->ct[1];};
};

int main() {

    // L-val
    vector<int> v{1,2,3};
    ct_wrapper<vector<int>&> lv(v);
    cout << endl << lv.ct[0] << lv.ct[1] << lv.ct[2] << endl;

    // R-val
    ct_wrapper<vector<int>&&> rv(vector<int>{1,2,3});
    cout << endl << rv.ct[0] << rv.ct[1] << rv.ct[2] << endl;
} 
```

输出（gcc48 和 clang32 相同）：

```
2
123
2
003 
```

**回答**

它在我与 Johannes Schaub 的聊天中被埋没了，所以我把它放在这里。

当临时向量初始化 r-value-ref member-variable`rv.ct`时，临时生命周期不会延长，因为有一个特殊的例外：[class.temporary]p5：“在构造函数的 ctor-initializer (12.6.2) 中临时绑定到引用成员一直持续到构造函数退出。”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T09:35:05.913

因为您的会员只是一个参考。在第二种情况下，它引用的对象在局部`rv`变量的定义完成后已经死了。所以后面的访问`cout`是未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T09:35:53.120

您的程序具有**未定义的行为**，因为您正在访问一个悬空引用。临时向量在它出现的完整表达式的末尾被销毁，但您保留对它的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T09:36:00.433

在 r 值情况下，您将临时绑定到引用。当您到达最后一个输出语句时，它已经消失了。

# php - 无法捕获数据

> ID：12226568
> 
> 赞同：0
> 
> 时间：2012-09-01T09:28:36.313
> 
> 标签：php, ajax, html-table, textbox

我使用 J-Query 和 AJAX 将数据传递到 res.php 页面：-

**尝试.php（我调用res.php**的主页）

```
$.ajax(
                    {

                        url: "res.php", 
                        type: "POST",
                        data: data,     
                        success: function (data) 
                        {
                            var build_id='build_';
                            build_id += i;
                            alert(build_id);
                            $('#npc').append(data);
                            $('#build_id').attr('disabled','true');
                            var total = $("#build_id");
                            alert(total);
                        }
                    }); 
```

在 res.php 页面中，我使用传递的数据生成查询并从数据库中检索数据并计算总值并在文本框中显示总值。

**资源库**

```
$i = mysql_real_escape_string($_POST['i']);

$query = "select * from ";
$query = $query . $building;
$query = $query . " where lvl=" . $level;
$query = $query . ";";

$result = mysql_query($query) or die('Error in Child Table!');
echo $i;
while( $data = mysql_fetch_assoc($result))
{
$total_res = $data['lumber'] + $data['clay'] + $data['iron'] + $data['crop'];
echo '<tr><td>'. $building. '</td><td>'. $level. '</td><td><input type="text" style="width:70px" id="build_' . $i . '" value="' . $total_res . '"></td></tr>';
} 
```

我正在使用`id="build_' . $i . '"`自动增加文本框的 id。到这里一切都很好。

返回 attampt.php 页面，当我尝试从文本框中访问数据时，我无法访问它。

我用来访问数据的代码是：-

```
 var build_id='build_';
                            build_id += i;
                            $('#build_id').attr('disabled','true');
                            var total = $("#build_id");
                            alert(total); 
```

代码末尾的警报功能提供以下输出：-

```
[object Object] 
```

我正在尝试将带有一些值的文本框列表附加到表格中，然后计算文本框中所有值的总和。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:07:47.213

`$('#build_id')`应该是`$('#'+build_id)`并且要计算所有值的总和，您应该放在`var total=0;`回调函数之外，并且该函数应该包含

```
total += $('#'+build_id).val(); 
```

另一个问题是表的每一行都有相同的`id="build_$i"`，但 ID 必须是唯一的。

你真的打算`$i`在表格的开头显示，而不是在表格行中吗？

# extjs4.1 - 为什么存储加载事件不起作用？

> ID：12226570
> 
> 赞同：-1
> 
> 时间：2012-09-01T09:28:56.667
> 
> 标签：extjs4.1

我有一个简单的例子：

```
var store =  Ext.create('Ext.data.ArrayStore', {

})
store.load();
store.on('load', function() {
    alert('test');
}) 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:48:45.097

您在添加侦听器之前执行 load() 。将 store.load() 放在 on() 调用之后。

编辑：是的，我测试过。

# python - 这个正则表达式是什么意思？

> ID：12226579
> 
> 赞同：1
> 
> 时间：2012-09-01T09:30:23.500
> 
> 标签：python, regex

我在正则表达式方面很薄弱，现在我正在调试一些代码，代码正在使用如下表达式搜索字符串：

```
r"coding[:=]\s*([-\w.]+)" 
```

它搜索什么样的字符串？

对我来说，它似乎与以下内容相匹配：

```
coding= xxxxx 
```

但我不知道神秘人物的确切含义。任何人都可以更详细地解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T09:36:23.337

让我们分解一下：

*   `coding`：文字文本匹配，只有“编码”这个词会做
*   `[:=]`: 字符组，冒号“:”或等号“=”匹配
*   `\s*`: 0 个或多个空格字符；空格和制表符，但如果这样配置，也可以匹配换行符。
*   `(..)`：匹配组，内容将作为匹配组进行进一步处理。
*   `[-\w.]+`：组中的一个或多个字符，匹配一个破折号“-”，一个点“.” 或任何文字字符；`\w`是一个字符类，通常匹配字母“a”到“z”（大写和小写）、数字“0”到“9”和下划线“_”。

如果您打开 unicode 支持（默认情况下在 Python 3 中打开），则`\w`该类会捕获更多内容。在 Unicode 数据库中分类为字母数字的任何字符都将匹配。

匹配示例：

*   “coding=foobar320_42spam_eggs”，组是`foobar320_42spam_eggs`
*   “编码：某事或其他”，组将是`something-or-other`
*   “编码：whatever.42”，组将是`whatever.42`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T09:34:18.233

它将匹配以下内容：

`coding`+ 其中一个`:`或`=`+ 零个或多个空格（`\s`= 空格、制表符、任何空白字符） + 一些文本，也可能包含`.`and `-`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T09:33:34.200

正则表达式的示例表达式[http://rubular.com/r/cqE6HTD8Vb](http://rubular.com/r/cqE6HTD8Vb)

# c# - 操作方法预期的参数名为 Id，除此之外什么都没有

> ID：12226585
> 
> 赞同：0
> 
> 时间：2012-09-01T09:31:09.113
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

> **错误**
> 
> 参数字典包含“sportingbiz.Controllers.PredictionController”中方法“System.Web.Mvc.ActionResult Predict(Int64)”的不可为空类型“System.Int64”的参数“UserId”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

这不起作用。抛出上面提到的错误

```
http://mysite/User/Profile/15 
```

这有效

```
http://mysite/User/Profile/?UserID=15 
```

控制器动作

```
public ActionResult Profile(long UserID)
{

} 
```

当我将参数名称更改为`Id`它时，它可以工作。我认为这是因为`Id`在路由集合（Global.asax）中指定。是否可以告诉 MVC`UserId`应该映射到`Id`而不在`Global.asax`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T09:35:34.817

完成此任务的唯一方法（无需进入自定义 ModelBinders，这真的很麻烦）是：

1.  使参数可以为空
2.  事后使用*RouteData集合设置属性。*

* * *

```
 public ActionResult Profile(long? UserID)
 {
     UserID = UserID ?? long.Parse((string)RouteData.Values["id"]);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:43:31.150

我总是将控制器上的 id 参数设置为像 Id 这样的通用参数，然后您不必创建大量路由来匹配不同的 id 类型。

如果您没有使用可以为您的 id 为空的字符串，您可以提供一个默认值，例如 long id = 0 并将零值作为默认起始序列处理。

例如，在分页方法中，您可以将其设置为零，这样您就不需要第一页上的任何参数，但此后传递它会请求该页码等

硅

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T15:58:05.060

我认为已经发布的代码应该可以工作，所以我测试了我的版本并且它有效：

```
public ActionResult Profile(long? UserID)
        {
            if (UserID.HasValue)
            {

            }
            else if (this.RouteData.Values["id"] != null)
            {
                long tempValue = 0;
                if (long.TryParse(this.RouteData.Values["id"].ToString(), out tempValue))
                {
                    UserID = tempValue;
                }
            }

            return View();
        } 
```

希望能帮助到你。

# google-apps-script - DomainUser 类中的“上次登录”属性（Google Apps 脚本）

> ID：12226586
> 
> 赞同：0
> 
> 时间：2012-09-01T09:31:15.443
> 
> 标签：google-apps-script

我想知道为什么我在 Google Apps 脚本的新的非常有用的域服务中找不到“上次登录”属性。在 Google Apps Education 的管理员控制台中，每个用户都列有“上次登录”列，但在 DomainUser 类中没有此属性的踪迹！有任何想法吗 ？Thanx Thomas DUFOUR 法国蒙特勒伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T23:49:38.680

google 提供的每个 Apps 脚本库都映射到 google api。您要查找的数据点与 UserManager 类的来源不同。查看其他一些 google api，您将看到所需的数据点。您需要使用 UrlFetch 来获取它。

# ios - UITableViewCell contentView 自定义披露图像框架问题

> ID：12226592
> 
> 赞同：1
> 
> 时间：2012-09-01T09:32:21.087
> 
> 标签：ios, uitableview

免责声明：我工作太晚了。但是，我决心今晚熬过这一关。

我有一个支持不同颜色主题的应用程序。黑暗的细胞背景一直是个问题。

我一直在寻找一种强大的方法来在具有黑色背景的 uitableviewcells 中绘制附件披露图标。

我决定尝试覆盖 setAccessoryType 来继承我的 50 多个视图的功能：

```
-(void) addWhiteDisclosureImage {
    UIImageView *disclosureView = (UIImageView*) [self.contentView viewWithTag:kDisclosureReplacementImageTag];

    if(!disclosureView) {
        [super setAccessoryType:UITableViewCellAccessoryNone];
        disclosureView = [[UIImageView alloc] initWithImage:self.whiteDisclosureImage];
        disclosureView.tag = kDisclosureReplacementImageTag;
        disclosureView.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin;

DebugLog(@"%f, %f", self.frame.size.width, self.frame.size.height);

        [self.contentView addSubview:disclosureView];
        [self.contentView bringSubviewToFront:disclosureView];
        [disclosureView release];
    }
}

- (void)setAccessoryType:(UITableViewCellAccessoryType)accessoryType {
    if(accessoryType == UITableViewCellAccessoryDisclosureIndicator) {
        if ([self.viewController isKindOfClass:[ViewControllerBase class]]) {
            ViewControllerBase *view = (ViewControllerBase*) self.viewController;
            if(view.colorTheme && view.colorTheme.controlBackgroundColor) {
                if([ViewColors colorAverage:view.colorTheme.controlBackgroundColor] < 0.2) { //substitute white disclosure indicator
                    [self addWhiteDisclosureImage];
                    return;
                } else { //not dark enough
                    [self removeWhiteDisclosureImage];
                    [super setAccessoryType:accessoryType];
                    return;
                }

            } else { //no colorTheme.backgroundColor
                [self removeWhiteDisclosureImage];
                [super setAccessoryType:accessoryType];
                return;
            }
        } else { //viewController is not type ViewControllerBase
            [self removeWhiteDisclosureImage];
            [super setAccessoryType:accessoryType];
            return;
        }

    }

    UIView *disclosureView = [self.contentView viewWithTag:kDisclosureReplacementImageTag];
    if(disclosureView)
        [disclosureView removeFromSuperview];
    [super setAccessoryType:accessoryType];
} 
```

此覆盖通常在 cellForRowAtIndexPath 中调用。

在我深入研究并回来之前，这似乎是一个不错的选择。对于某些单元，单元框架将比第一次通过时大很多。这始终发生在我一直在测试的 6 个列表中的同一个单元格上。这个单元格显然有一些独特之处：它是 frame.size。

这是我为第一个 tableview 加载（在某些情况下每次加载/重新加载）记录的单元格的大小：320.000000、44.000000

这是我在调用 reloadData 后获得的某些（不是全部）单元格的差异：759.000000, 44.000000

有谁知道为什么会发生这种情况？

更新：可疑单元格的自定义附件披露视图几乎就像它的自动调整大小标志设置为无一样。我通过将所有设置为无来确认这一点。我说几乎是因为我看到它在 reloadData 之后排列在它应该在的位置。一秒钟后，它向左移动（当我选择不自动调整大小时，它们都结束了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T20:48:28.160

不要乱用子视图和计算框架。
只需将附件视图替换为新的 imageView。让 iOS 来完成这项工作。

# c++ - 这是内存泄漏吗？（C++ BSTR）

> ID：12226596
> 
> 赞同：1
> 
> 时间：2012-09-01T09:33:09.000
> 
> 标签：c++, memory-leaks

我有这样的功能：

```
bool Function (BSTR paramter1, BSTR parameter2)
{
    // My Code
} 
```

我这样称呼：

```
Function(SysAllocString(L"Example1"), SysAllocString(L"Example2")); 
```

我的理解是我分配的东西`SysAllocString`必须用`SysFreeString`.

`BSTR`似乎是引擎盖下的 typedef`typedef OLECHAR *BSTR;`

由于这是一个指针，只要我添加我应该没问题

```
SysFreeString(parameter1);
SysFreeString(parameter2); 
```

在里面`Function`，不要命名`BSTR`s。

我在这里的所有推理是否正确，只要我添加这两行，我就不会内存泄漏？我还有很多东西要学。非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:51:04.323

是的，你是对的。但这通常不是设计软件的合适方式。通常，释放对象的责任归于分配它的例程或一些相关例程。您应该能够`Function`使用不需要立即释放的参数进行调用，或者使用在本地声明而不是在堆上分配的参数进行调用。

# utf-8 - 文件名使用 utf8

> ID：12226598
> 
> 赞同：2
> 
> 时间：2012-09-01T09:33:23.920
> 
> 标签：utf-8, batch-file, file-rename

我有一个名为 rename.txt 的文本文件，如下所示：

```
34aa85ff2fb46b29fba2283a7b889480306295.flv|بسوی-زیبایی.flv
bb32ca4604217660ab7b6df3938cd0df306294.flv|صدای-تو.flv
b4b802c0182ebfd4fbba9c5ad2ab3904306286.flv|بسوی-حق.flv 
```

当我过去`bulk rename utility`将左侧的 flv 文件重命名为`|`右侧的相应文件时，我得到：

![批量重命名实用程序 scshot](../Images/d75154edaba142a65bedbff2dc222926.png)

![批量重命名结果](../Images/ca59aa659cf254ceaa66a763efd3bcde.png)

然后我尝试使用批处理文件重命名文件，但在 cmd 中出现同样的问题：

```
@echo off
for /f "tokens=*" %%a in (rename.txt) do (
  echo %%a
)
pause 
```

命令输出：

![命令输出](../Images/6b3d6668f68cc879042bbb657c79cc82.png)

注意：我可以在 Windows 中手动重命名文件：

![预期结果](../Images/6b1b373a6b3e362076a2273e2ba7e1f0.png)

我怎样才能得到预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:07:15.223

Windows 不使用 UTF-8，它使用 UTF-16LE。对您的输入文件进行转码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T18:07:23.747

以下对我有用：

```
@ECHO OFF
CHCP 65001
FOR /F "tokens=1,2 delims=|" %%a IN (rename.txt) DO (
  RENAME "%%a" "%%b"
) 
```

确保文本文件 ( `rename.txt`)的开头*不*包含 UTF-8 签名（也称为[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark "字节顺序标记（维基百科）")，BOM），因为该`FOR /F`命令会尝试将其视为字符并将其附加到第一个文件的名称中。结果，第一个文件没有被重命名（但所有其他文件都被重命名）。

如果您无法摆脱 BOM，只需在开头放置一个空行，以便 BOM 保留在该行上，而包含名称的其他行保持“干净”。如果您添加该空行并且不更改上述脚本，则在尝试处理空行时会产生错误。这应该不是问题，但如果你想消除它，你可以这样做：

```
@ECHO OFF
CHCP 65001
FOR /F "tokens=1,2 delims=|" %%a IN (rename.txt) DO (
  **IF NOT "%%b" == ""** RENAME "%%a" "%%b"
) 
```

# c - 为什么取消引用指向外部联合的指针是未定义的？

> ID：12226611
> 
> 赞同：0
> 
> 时间：2012-09-01T09:35:10.767
> 
> 标签：c, pointers, unions, c89

我有以下代码。为什么它未定义以下列方式取消引用联合指针？

```
extern union MyUn *P1;          
extern union MyUn *P2;

extern void myfunc(void)
{
      *P1 = *P2;                
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T09:40:22.953

如果你还没有在这个源文件中定义联合，编译器不知道要复制多少。

工会的规模是多少？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T09:42:58.030

这与联合无关，也不是“未定义”：如果您尝试取消引用指向不完整类型的指针（出于显而易见的原因），这只是编译器错误。

# bufferedimage - 读取具有未知图像数据的图像文件 *.ITW

> ID：12226612
> 
> 赞同：0
> 
> 时间：2012-09-01T09:35:23.117
> 
> 标签：bufferedimage, java-2d, jai, raster

我只想读取图像数据并将其加载到 Java 2D 类中。任何提示都会很棒。这已在 java2D 论坛（oracle 论坛）上交叉发布

[https://forums.oracle.com/forums/thread.jspa?threadID=2434586&stqc=true](https://forums.oracle.com/forums/thread.jspa?threadID=2434586&stqc=true)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:54:34.910

Java 似乎不支持这种格式。您可以编写自己的 ImageIO 插件，但这并不容易。这是官方指南：

[http://docs.oracle.com/javase/7/docs/technotes/guides/imageio/spec/extending.fm1.html](http://docs.oracle.com/javase/7/docs/technotes/guides/imageio/spec/extending.fm1.html)

# iphone - 保存我的应用程序的 sqlite3 文件

> ID：12226619
> 
> 赞同：0
> 
> 时间：2012-09-01T09:36:14.863
> 
> 标签：iphone, ios, ipad, sqlite, ipod

我是处理 iphone 中 .sqlite3 的新手，我在其中创建了一个 sqlite3 文件

```
/Users/myLab/Library/Application Support/iPhone Simulator/5.1/Applications/308C4355-D8EE-4524-A7F9-638DEB68B298/Documents/file.sqlite3 
```

我使用 Terminal.app 将表格插入其中，我的应用程序一切正常。

但是当我将此应用程序移动到另一个设备时，由 xcode 打开并尝试运行它，我发现我的表在另一个设备的这个 .sqlite3 文件中找不到。

如何将我的表保存在 .sqlite3 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:20:29.457

尽管我提供了一些复选标记来检查，但这么多信息足以回答您的问题：

1.  您的应用程序资源文件夹中有 file.sqlite3 吗？

2.  你在那个资源 file.sqlite3 文件中有那个给定的表吗？

3.  您是否在应用程序运行时对放置在资源文件夹中的 file.sqlite3 进行了任何更改？如果是，则尝试从资源中删除该 file.sqlite3 并再次添加到资源中。

所有这些检查点都可能使您的应用程序运行良好。

好运..

# haskell - Newbie: understanding main and IO()

> ID：12226624
> 
> 赞同：2
> 
> 时间：2012-09-01T09:36:27.143
> 
> 标签：haskell

While learning Haskell I am wondering when an IO action will be performed. In several places I found descriptions like this:

"What’s special about I/O actions is that if they fall into the main function, they are performed."

But in the following example, 'greet' never returns and therefore nothing should be printed.

```
import Control.Monad

main = greet

greet = forever $ putStrLn "Hello World!" 
```

Or maybe I should ask: what does it mean to "fall into the main function"?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T13:32:28.300

First of all, `main` is not a function. It is indeed just a regular value and its type is `IO ()`. The type can be read as: An action that, when performed, produces a value of type `()`.

Now the run-time system plays the role of an interpreter that performs the actions that you have described. Let's take your program as example:

```
main = forever (putStrLn "Hello world!") 
```

Notice that I have performed a transformation. That one is valid, since Haskell is a referentially transparent language. The run-time system resolves the `forever` and finds this:

```
main = putStrLn "Hello world!" >> MORE1 
```

It doesn't yet know what `MORE1` is, but it now knows that it has a composition with one known action, which is executed. After executing it, it resolves the second action, `MORE1` and finds:

```
MORE1 = putStrLn "Hello world!" >> MORE2 
```

Again it executes the first action in that composition and then keeps on resolving.

Of course this is a high level description. The actual code is not an interpreter. But this is a way to picture how a Haskell program gets executed. Let's take another example:

```
main = forever (getLine >>= putStrLn) 
```

The RTS sees this:

```
main = forever MORE1
<< resolving forever >>
MORE1 = getLine >>= MORE2
<< executing getLine >>
MORE2 result = putStrLn result >> MORE1
<< executing putStrLn result (where 'result' is the line read)
   and starting over >> 
```

When understanding this you understand how an `IO String` is not "a string with side effects" but rather the description of an action that would produce a string. You also understand why laziness is crucial for Haskell's I/O system to work.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T10:18:19.423

In my opinion the point of the statement "What’s special about I/O actions is that if they fall into the main function, they are performed." is that `IO` actions are first class citizens. That is, `IO`-actions can occur at all places where values of other data types like `Int` can occur. For example, you can define a list that contains `IO` actions as follows.

```
actionList = [putStr "Hello", putStr "World"] 
```

The list `actionList` has type `[IO ()]`. That is, the list contains actions that interact with the world, for example, print on the console or read in input from the user. But, in defining this list we do not execute the actions, we simply put them in a list for later use.

If an `IO` can occur somewhere in your program, the question arrises when these actions are performed and here `main` comes into play. Consider the following definition of `main`.

```
main = do
  actionList !! 0
  actionList !! 1 
```

This `main` function projects to the first and the second component of the list and "executes" the corresponding actions by using them within its definition. Note that it does not necessarily have to be the `main` function itself that executes an `IO` action. Any function that is called from the `main` function can execute actions as well. For example, we can define a function that calls the actions from `actionList` and let `main` call this function as follows.

```
main = do
  caller
  putStr "!"

caller = do
  actionList !! 0
  actionList !! 1 
```

To highlight that it does not have to be a simple renaming like in `main = caller` I have added an action that prints an exclamation mark after it has performed the actions from the list.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T13:32:04.640

Simple IO actions can be combined into more advanced ones by using do notation.

```
main = do
    printStrLn "Hello"
    printStrLn "World" 
```

combines the IO action `printStrLn "Hello"` with the IO action `printStrLn "World"`. Main is now an IO action first printing a line that says "Hello" and then a line that says "World". Written without do-notation (which is just syntactic suger) it looks like this:

```
main = printStrLn "Hello" >> printStrLn "World" 
```

Here you can see the `>>` function combining the two actions.

You can create an IO action that reads a line, passes it to a function(that does awesome stuff to it :)) and the prints the result like this:

```
main = do
    input <- getLine
    let result = doAwesomeStuff input
    printStrLn result 
```

or without binding the result to a variable:

```
main = do
    input <- getLine
    printStrLn (doAwesomeStuff input) 
```

This can ofcourse also be written as IO actions and functions that combine them like this:

```
main = getLine >>= (\input -> printStrLn (doAwesomeStuff input)) 
```

When you run the program the main IO action is executed. This is the only time any IO actions are actually executed. (well technically you can also execute them within you program, but it is not safe. The function that does the is called `unsafePerformIO`.)

You can read more here: [http://www.haskell.org/haskellwiki/Introduction_to_Haskell_IO/Actions](http://www.haskell.org/haskellwiki/Introduction_to_Haskell_IO/Actions)

(This link is probably a better explaination than mine, but I only found it after I had written nearly everything. It is also quite a bit longer)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T05:46:27.870

```
launchAMissile :: IO ()
launchAMissile = do
    openASilo
    loadCoordinates
    launchAMissile

main = do
    let launch3missiles = launchAMissile >> launchAMissile >> launchAMissile
    putStrLn "Not actually launching any missiles" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-04T18:41:19.717

`forever` isn't a loop like C's `while (true)`. It is a function that produces an IO value (which contains an infinitely repeated sequence of actions), which is consumed by the caller. (In this case, the caller is `main`, which means that the actions get executed by the runtime system).

# android - 设置 Edittext 的起点

> ID：12226625
> 
> 赞同：1
> 
> 时间：2012-09-01T09:36:34.363
> 
> 标签：android, android-edittext

我有一个具有我自己风格的 EditText。基本上它是 EditText 的边框。问题是文本从这个边界开始，所以它不是很好。有没有办法在 EditText 中设置文本的起点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T09:49:52.490

像这样在布局的起始侧提供填充

```
<EditText 
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  ...
  android:paddingLeft="10dp"
/> 
```

# iphone - Objective C 约定：何时使用 For 以及何时使用 With

> ID：12226626
> 
> 赞同：9
> 
> 时间：2012-09-01T09:36:35.350
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

根据 Apple[指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF)，这似乎令人困惑，例如对于方法`viewWithTag`

在Java中，我会有一个名为

```
getViewByTag // Java version, equivalent to viewWithTag in Obj-C 
```

但我也发现有一些类似的方法`objectForKey`，那么为什么不直接使用`objectWithKey`呢？

```
getObjectByKey or just get // Java version, equivalent to objectForKey, 
                           // but why not objectWithKey? Or not viewForKey above? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T10:45:42.887

我实际上认为它比大多数答案所想的要简单得多。我认为它与复杂的编程语言细节关系不大，而与所讨论对象的唯一性有关。

当您说 时`viewWithTag:`，您是在询问具有该标签`UIView`的**任何视图。**可能有几个。将`UIView`返回其中一个。

但是，`objectForKey:`（对我来说）听起来应该有一个与该键关联的对象（或 nil）。因此，密钥有点存在并绑定（紧密耦合）到单个对象。

**编辑：**

有一个答案提到了“by”的存在，这进一步暗示了该约定与编程语言的复杂性无关。这只是自然的英语。

`NSString`的`stringByAppendingString:`，例如，使用 by，只是因为该函数是用动词*附加*的。你不能说withAppending，那是糟糕的英语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T10:36:31.527

根据我的观察

在设置/获取对象时，您使用**WITH**。

例如用于设置 NSMutableArray 对象

```
 - (id)initWithCapacity:(NSUInteger)numItems 
```

在设置/获取对象的属性时，您使用 **FOR**。

例如为 NSMutableDictionary 类型的属性设置值

```
- (void)setValue:(id)value forKey:(NSString *)key 
```

希望这有助于消除您的疑问

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T10:40:41.193

似乎`with`用于直接属于对象的属性。A`UIView`有一个`tag`属性，因此`viewWithTag:14`可以改写为*“查找标签属性为 14 的视图”*。

当您将对象放入字典中时，与键相关联，该键不一定是对象本身的一部分。`objectForKey:@"foo"`是一种表示*“查找与键 "foo" 链接的对象的*方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T11:44:57.647

Apple 指南并未就何时使用或配合使用做出任何此类声明。编码约定的要点是指出参数的类型可能是什么，并编写听起来自然的方法签名。

方法名称中使用 for 或 with 的原因是为了识别方法的第一个参数的类型或用途，这有助于它更好地阅读。

Apple 本身使用了几种约定，但这是基本目的，没有具体的对错，只是尝试用 for 或 with 来标识方法名称中方法的第一个参数。

至于 Apple 约定 - get(whatever) 甚至不是实际约定的一部分，所以你可以问我什么时候使用 get 或不使用。

阅读此[http://cocoadevcentral.com/articles/000082.php](http://cocoadevcentral.com/articles/000082.php)

也不要忘记（通过）NSURL urlByAppendingPathComponent 等 - 感受一下，你不会出错

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T23:54:21.557

每当参数被拥有或被拥有时，您都使用“with”，或者将成为“with”字左侧的对象的相对永久属性。

*   `initWithCapacity`/ `arrayWithCapacity`- 容量将是被调用的容器对象的一个​​属性，并且将是相对永久的（直到您向其中添加超出初始容量的对象）

*   `viewWithTag`– 返回一个“具有”指定“标签”属性的视图。

而您使用“for”来表示“所需”对象和用于获取它的“令牌”对象之间的松散关联。- `objectForKey`/ `attributeForValue`- 通常“对象”不拥有密钥。- `documentForWindow`- 窗口由窗口控制器拥有，而不是文档。此外，每个文档可能有多个窗口。

但是对于单个方法调用中相同类型的多个对象的松散关联，习惯上你使用类似的东西：

```
doSomethingForFoo:withThisOtherFoo:havingYetAnotherFoo: 
```

所以这种复杂调用的顺序是：

1.  为了
2.  和
3.  有

# extjs - 如何在监听器中使用父对象？

> ID：12226627
> 
> 赞同：1
> 
> 时间：2012-09-01T09:36:35.610
> 
> 标签：extjs

我有一个简单的例子：

```
 test =  Ext.create('Ext.grid.Panel', {
       store: Ext.create('Ext.data.ArrayStore', {
            listeners: {
               'load' : function() {  }
       })
    }) 
```

如何在负载监听器中使用网格对象“测试”？

# java - 如何在 Eclipse 启动时以编程方式加载所需的插件

> ID：12226628
> 
> 赞同：0
> 
> 时间：2012-09-01T09:36:36.177
> 
> 标签：java, eclipse, eclipse-plugin

SWT 中是否有任何方法可以在 Eclipse IDE 启动时以编程方式将我的插件设置为默认值，即当 Eclipse 启动时，将所需的插件设置为透视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:41:10.917

如果我没记错的话，应该可以用[`setDefaultPerspective(String id)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IPerspectiveRegistry.html#setDefaultPerspective%28java.lang.String%29).

您可以通过以下方式访问：

```
PlatformUI.getWorkbench().getPerspectiveRegistry().setDefaultPerspective(id); 
```

**但是**，这样做时要小心。我可以想象很多人可能会卸载你的插件，只是因为他们对这个小改动感到恼火。

# html - 如果显示更多评论，如何动态更改高度

> ID：12226632
> 
> 赞同：-2
> 
> 时间：2012-09-01T09:37:23.140
> 
> 标签：html, facebook, css

我有网页

```
www.turie.eu 
```

底部有一些facebook评论。我必须更改什么才能动态更改高度并显示所有 16 条评论？

我试图将与注释部分有关的每个 CSS 选择器的高度从单个值更改为 100% 或自动，但没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:30:49.603

这是因为：

```
#contenwrap {overflow: hidden} 
```

删除此规则后，您将解决一些其他设计问题，但您走在正确的道路上 :-)

更新！

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
<style type="text/css">
<!--
body {
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    background: #FFF url(pozadie04.jpg) no-repeat scroll center top;
    margin: 0;
    padding: 0;
    color: #000;
}

/* ~~ Element/tag selectors ~~ */
ul, ol, dl { /* Due to variations between browsers, it's best practices to zero padding and margin on lists. For consistency, you can either specify the amounts you want here, or on the list items (LI, DT, DD) they contain. Remember that what you do here will cascade to the .nav list unless you write a more specific selector. */
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;   /* removing the top margin gets around an issue where margins can escape from their containing div. The remaining bottom margin will hold it away from any elements that follow. */
    padding-right: 15px;
    padding-left: 15px; /* adding the padding to the sides of the elements within the divs, instead of the divs themselves, gets rid of any box model math. A nested div with side padding can also be used as an alternate method. */
}
a img { /* this selector removes the default blue border displayed in some browsers around an image when it is surrounded by a link */
    border: none;
}
/* ~~ Styling for your site's links must remain in this order - including the group of selectors that create the hover effect. ~~ */
a:link {
    color: #42413C;
    text-decoration: underline; /* unless you style your links to look extremely unique, it's best to provide underlines for quick visual identification */
}
a:visited {
    color: #6E6C64;
    text-decoration: underline;
}
a:hover, a:active, a:focus { /* this group of selectors will give a keyboard navigator the same hover experience as the person using a mouse. */
    text-decoration: none;
}

/* ~~ this fixed width container surrounds all other elements ~~ */
.container {
    width: 960px;
    margin: 280px auto 0; /* the auto value on the sides, coupled with the width, centers the layout */
    box-shadow: 0 0 40px black; /* Not supported in IE7 and IE8 */
}

.header {
    width:960px;
    height:280px;
    position:absolute;
    top:0;
}
.headerPic {position:absolute;}
.Logo {bottom: 35px; left:98px}
.Church {bottom: 0; right:70px}

/* ~~ This is the layout information. ~~ 

1) Padding is only placed on the top and/or bottom of the div. The elements within this div have padding on their sides. This saves you from any "box model math". Keep in mind, if you add any side padding or border to the div itself, it will be added to the width you define to create the *total* width. You may also choose to remove the padding on the element in the div and place a second div within it with no width and the padding necessary for your design.

*/
.content {

    padding: 10px 0;
    background:rgba(255,255,255,0.9); /* Not supported in IE7 and IE8 */
    border:1px solid #fff;
}

.forum {
    height:130px;
}

.maps {
    height:523px;
}

.fb {
    width:600px;
    background: #FFF url(facebookcomments_nadpis.png) no-repeat left top;
    padding-top: 70px;
    margin-left:15px;
}

.mb {
    width:300px;
    background: url(mikroblog-nadpis.png) no-repeat left top;
    padding-top: 70px;
    margin-right:15px;
}

.footer {
    width:960px;
    height:237px;
    background: url(footer.png) no-repeat bottom;
}

/* ~~ miscellaneous float/clear classes ~~ */
.fltrt {  /* this class can be used to float an element right in your page. The floated element must precede the element it should be next to on the page. */
    float: right;
    margin-left: 8px;
}
.fltlft { /* this class can be used to float an element left in your page. The floated element must precede the element it should be next to on the page. */
    float: left;
    margin-right: 8px;
}
.clearfloat { /* this class can be placed on a <br /> or empty div as the final element following the last floated div (within the #container) if the overflow:hidden on the .container is removed */
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px;
}
-->
</style></head>

<body>

<div class="container">

<div class="header">
<img class="headerPic Logo"   src="maco07.png"   width="277" height="185" alt="Logo">
<img class="headerPic Church" src="kostol03.png" width="170" height="230" alt="church">
<!-- end .header --></div>

  <div class="content">

  <div class="forum">
    <p>Place your forum in this DIV</p>
  <!-- end .forum --></div>

  <div class="maps">
    <p>Place your Google Map in this DIV</p>
  <!-- end .maps --></div>

  <div class="hero">
  <h1>Vitajte!</h1>
  <p>Turie.eu je komunitný web s cieľom prezentovať obec Turie formou interaktívnych panoramatických fotografií. Vzhľadom na všeobecne nízku úroveň interaktivity na stránkach obcí, bude možnosť spoluvytvárať obsah Turie.eu jej návštevníkmi našou prioritou.</p>
  <p>Stránka funguje vo všetkých moderných prehliadačoch a v IE8+. Ak nájdete nejaké chyby, máte návrhy na zlepšenie, alebo sa chcete podieľať na vytváraní obsahu, napíšte nám.</p>
  <p>Chystané zmeny: užívateľská fotogaléria, kalendár udalostí, filtrovanie markerov, hlasovania, rezervácie..</p>
  <!-- end .hero --></div> 

  <div class="wrap">
  <div class="fb fltlft">
    <h2>Facebook </h2>
    <p>sdlkfjsdf kjsadf slkødfj sødlfkj sadlkfj sad flkj</p>
    <p>sdlkfjslkdjflksjdflkjsdf</p>
    <p>sdflkjsdlfkjsdlkfj</p>
    <p>sldkfjlkdsfj</p>
    <p>Float is cleared in this DIV</p>
    <!-- end .fb --></div>

  <div class="mb fltrt">
    <h2>Mikroblog</h2>
    <p>sdkfljøslkdfjlkjdsfølkj</p>
    <p>sdlkfjølskdjfølksjdf</p>
    <p>sdlkfjøsldkfjølskdfj</p>
    <p>sdlfkjøsldkfj</p>
    <p>sdlkfjøsldkfj</p>
    <p>sdflkjsdøflkj</p>
    <p>slskdjfølksdjf</p>
    <p>Float is cleared in this DIV</p>
    <!-- end .mb --></div>
  <br class="clearfloat">
  <!-- end .wrapper --></div>  
  <!-- end .content --></div>

  <div class="footer">
    <!-- end .footer --></div>
  <!-- end .container --></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T11:45:27.223

您可以使用滚动 div，使用`css overflow property`或`overflow:auto`用于滚动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T16:48:43.780

这是针对 rgba 问题的 IE 修复程序。[我在他的网站](http://kimili.com/journal/rgba-hsla-css-generator-for-internet-explorer/)上使用了 Kimili 的生成器（很棒的工具）。

```
<!--[if IE]>
<style type="text/css">

{
background: transparent;
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#E5FFFFFF,endColorstr=#E5FFFFFF)"; /* IE8 */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#E5FFFFFF,endColorstr=#E5FFFFFF);   /* IE6 & 7 */
      zoom: 1;
}
</style>
<![endif]--> 
```

# java - 如何防止Java代码中的整数溢出？

> ID：12226634
> 
> 赞同：30
> 
> 时间：2012-09-01T09:37:37.990
> 
> 标签：java, math, integer, overflow

> **可能重复：**
> [如何检查在 Java 中将两个数字相乘是否会导致溢出？](https://stackoverflow.com/questions/1657834/how-can-i-check-if-multiplying-two-numbers-in-java-will-cause-an-overflow)

假设我有一个 Java 类方法，它使用`*`和`+`操作。

```
int foo(int a, int b) {
  ... // 一些带有 + 和 * 的计算
}

```

如何确保不会发生溢出`foo`？

我想我可以使用`BigDecimal`或替换所有 + 和 * 为“包装器”，例如：

```
整数总和（int a，int b）{
   诠释 c = a + b;
   如果 (a > 0 && b > 0 && c < 0)
     抛出新的 MyOverfowException(a, b)
   返回 c;
}

int prod（int a，int b）{
   诠释 c = a * b;
   如果 (a > 0 && b > 0 && c < 0)
     抛出新的 MyOverfowException(a, b)
   返回 c;
}

```

有没有更好的方法来确保`int`Java 方法中不发生溢出？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-01T09:41:41.830

检查溢出的一种方法是将操作数提升为更大的类型（原始操作数位长度的两倍）然后执行操作，然后查看结果值对于原始类型是否太大，例如

```
int sum(int a, int b) {
    long r = (long)a + b;
    if (r >>> 32 != 0) {    // no sign extension
        throw new MyOverflowException(a, b);
    }
    return (int)r;
} 
```

如果您的原始类型是 a `long`，则必须使用`BigInteger`较大的类型。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-01T09:45:12.013

从工程的角度来看，这是一个难题。

[安全编码](https://www.securecoding.cert.org/confluence/display/java/NUM00-J.+Detect+or+prevent+integer+overflow)网站建议：

*   使用先决条件；即范围检查输入，使溢出是不可能的，
*   使用下一个更大的原始整数类型执行每个单独的算术运算并显式检查溢出，或
*   使用大整数。

[Dobbs 博士的这篇文章](http://www.drdobbs.com/jvm/signalling-integer-overflows-in-java/210500001)建议创建一个原始算术方法库，该库通过显式溢出检查来执行每个原始操作。（您可以将其视为上述第 2 点的实现。）但作者进一步建议您使用字节码重写来替换算术字节码，并调用包含溢出检查的等效方法。

不幸的是，没有办法在 Java 中本地启用溢出检查。（但同样适用于许多其他语言；例如 C、C++ ...）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-01T09:41:09.380

Sum：检查b是否大于你可以存储在int中的最大值减去a的值的差。如果 a 和/或 b 可以为负数，您必须 (i) 小心不要让差异检查已经溢出，并且 (ii) 对最小值执行类似的检查。

产品：那更难。我会将整数拆分为两个半长整数（即，如果 int 是 32 位，则使用位掩码和移位将其拆分为两个 16 位数字）。然后做乘法，然后看结果是否适合32位。

在您不想简单地采取`long`临时结果的条件下的一切。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-01T09:59:30.503

假设 a 和 b 都是正数或负数，如果 a + b 的符号与 a 和 b 的符号不相等，则会发生溢出。您可以使用此规则来判断是否发生溢出并抛出异常。当你发现这个异常时，你可以按照前面答案中提到的方法来处理它。另一种方法是使用不会溢出的最大范围类型进行操作。您可以将 long 用于整数之间的运算。

# javascript - Javascript：如何在 jQuery 中编写这个放置事件？

> ID：12226636
> 
> 赞同：1
> 
> 时间：2012-09-01T09:37:49.307
> 
> 标签：javascript, jquery

这有效：

```
var picdrag = document.getElementById('picdrag');
picdrag.addEventListener('drop', picSelect, false);
function picSelect(e) {
    var pics = e.dataTransfer.files;
} 
```

这不会：

```
$('#picdrag').on('drop', function(e) {picSelect(e);});
function picSelect(e) {
    var pics = e.dataTransfer.files;
} 
```

因为它报错`'e.dataTransfer is undefined'`。当我不知道为什么某事有效或无效时，我讨厌它。这是特定于 drop 事件的，就像 jQuery 以不同的方式处理它一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:42:05.330

你可以试试：

```
var pics = e.originalEvent.dataTransfer.files; 
```

从[文档](http://api.jquery.com/category/events/event-object/)：

> 某些事件可能具有特定于它们的属性。这些可以作为 event.originalEvent 对象的属性访问。要使所有事件对象中的特殊属性可用，可以将它们添加到 jQuery.event.props 数组中。不推荐这样做，因为它会增加 jQuery 传递的每个事件的开销。

还有一个应该感兴趣的例子：

```
// add the dataTransfer property for use with the native `drop` event  
// to capture information about files dropped into the browser window
jQuery.event.props.push("dataTransfer"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T09:42:15.730

```
$('#picdrag').on('drop', picSelect);
var picSelect = function(e) {
    var pics = e.dataTransfer.files;
}; 
```

# android - 如何根据其他片段的方法刷新 ListFragment 列表？

> ID：12226638
> 
> 赞同：1
> 
> 时间：2012-09-01T09:38:07.320
> 
> 标签：android, android-fragments

我在 RSS 阅读器应用程序上有典型的 2 片段显示。一个片段包含标题列表，一个片段包含所选标题的详细信息。

它在移动设备上完美运行，但在平板电脑（和宽设备）上，我无法刷新列表（我的意思是光标），将项目标记为已读。

关于如何完成它，如何让片段“刷新”或类似的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:25:24.987

如果要刷新的片段是在 XML 中声明的，您可以使用 FragmentManager 并通过其 ID 获取它的实例。然后你可以从你的第二个片段或主机活动或任何地方调用你想要的任何方法在你的第一个片段中

# codeigniter - codeigniter 中基于文件的缓存

> ID：12226642
> 
> 赞同：5
> 
> 时间：2012-09-01T09:38:29.393
> 
> 标签：codeigniter

我是codeigniter的新手。我想使用基于文件的缓存。我不知道我是否理解正确。
1.在父控制器中声明以下内容-- `$this->load->driver('cache');`
2.`$this->cache->file->save('foo', 'bar', 10);`用于保存文件但我不知道这个函数的参数是什么以及如何实现所有这些以便可以完成缓存。
**请帮忙**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T21:41:29.460

[http://codeigniter.com/user_guide/libraries/caching.html#example_usage](http://codeigniter.com/user_guide/libraries/caching.html#example_usage)
手册有它 - 但它在示例中有点隐藏：

```
if ( ! $foo = $this->cache->get('foo'))
{
     echo 'Saving to the cache!<br />';
     $foo = 'foobarbaz!';

     // Save into the cache for 5 minutes
     $this->cache->save('foo', $foo, 300);
} 
```

'foo' -> 要缓存的变量的名称
$foo -> 要缓存的变量。它可以是任何
300 -> 以秒为单位的时间 (60*5) - 设置为 0 表示没有过期

因此，如果 $foo 为空，则重新创建缓存文件，否则您可以使用 $foo 加载数据。

进一步说明： [http ://codeigniter.com/user_guide/general/caching.html](http://codeigniter.com/user_guide/general/caching.html)

一个更灵活的替代方案可能是这个 sparks 库： http: [//getsparks.org/packages/cache/show](http://getsparks.org/packages/cache/show)
我使用它，它非常适合我对基于文件的缓存的需求。

# datalist - datalist 列为空时的虚拟图像

> ID：12226644
> 
> 赞同：0
> 
> 时间：2012-09-01T09:38:42.893
> 
> 标签：datalist, datalistitem

我正在使用数据列表来显示产品详细信息。这次我想显示图像，但是当图像文件具有图像路径时它会显示，否则它是空的。我想在字段为空时显示虚拟图像..

这是我的代码：

```
<asp:DataList ID="DataList1" CaptionAlign="Right" runat="server" Width="100%" Visible="true" >
<ItemTemplate>
    <table width="100%" border="0" cellspacing="5" cellpadding="0">
        <tr>
            <td width="2%">
                &nbsp;
            </td>
            <td>
                <div class="Curved_box">
                    <div class="curved_Top">
                        <div class="curved_TopLft">
                        </div>
                        <div class="curved_TopRft">
                        </div>
                    </div>
                    <div class="CurvedContent">
                        <a href="#">
                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td style="width: 14px; height: 65px;">
                                    </td>
                                    <td style="width: 113px; height: 65px;">
                                        <asp:Image ID="Image1" Style="border: solid 1px #eaeaea; background: " runat="server"
                                            Height="60px" Width="60px" ImageUrl='<%#Bind("fldpic") %>' />
                                    </td>
                                    <td width="80%" align="right" style="height: 65px">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                            <tr>
                                                <td colspan="2" style="height: 20px" align="left">
                                                    <asp:Label ID="lbl_name" runat="server" Font-Bold="true" Text='<%#Bind("name") %>'></asp:Label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width: 247px; height: 20px;" align="left">
                                                    <asp:Label ID="lblProd_Keywd" runat="server" Text='<%# Bind("Desig") %>' Font-Bold="True"></asp:Label>
                                                    &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                                </td>
                                                <td align="left" style="height: 20px">
                                                    <asp:Label ID="lblProd_Code" runat="server" Text='<%# Bind("fldempid") %>'
                                                        Font-Bold="True"></asp:Label>
                                                </td>
                                            </tr>
                                            <tr>

                                            </tr>
                                        </table>

                                    </td>
                                </tr>
                            </table>
                        </a>
                    </div>
                    <div class="curved_Btm">
                        <div class="curved_BtmLft">
                        </div>
                        <div class="curved_BtmRft">
                        </div>
                    </div>
                </div>
            </td>
            <td width="2%">
                &nbsp;
            </td>
        </tr>
    </table>
</ItemTemplate>
<FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
<HeaderStyle BackColor="#507CD1" Font-Bold="True" HorizontalAlign="Left" ForeColor="White" />
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:58:04.607

在标签 上添加`onerror`属性，例如`<asp:Image>``onerror="this.src = 'url of dummy image'"`

更改此标记

```
<asp:Image ID="Image1" Style="border: solid 1px #eaeaea; background: " 
    runat="server" Height="60px" Width="60px" ImageUrl='<%#Bind("fldpic") %>' /> 
```

到

```
<asp:Image ID="Image1" Style="border: solid 1px #eaeaea; background: " 
    runat="server" Height="60px" Width="60px" ImageUrl='<%#Bind("fldpic") %>' 
    onerror="this.src = 'url of dummy image'" /> 
```

# qt - 如何在QT中获取加载进程的进程名称

> ID：12226649
> 
> 赞同：0
> 
> 时间：2012-09-01T09:39:18.697
> 
> 标签：qt, qt4

我已经编写了由进程加载的 QT dll。如何使用 QT api 在 Dll 中获取进程名称？

请帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:48:52.283

[QCoreApplication::applicationName()](http://doc.qt.nokia.com/4.7-snapshot/qcoreapplication.html#applicationName-prop)应该做你想做的事。

# php - 有效限制 PHP 中每分钟的点击次数（阻止网页抓取或复制机器人）

> ID：12226650
> 
> 赞同：2
> 
> 时间：2012-09-01T09:39:31.787
> 
> 标签：php, performance, captcha, processing-efficiency

我面临机器人从我的网页上复制所有内容的问题（我经常尝试更新）。

我试图禁止它们，或者混淆代码以使其更难复制。然而，他们找到了一些方法来克服这些限制。

我想尝试限制每分钟的点击次数（或 X 次，不一定是分钟），但使用验证码来克服这些限制。例如，如果您在过去 5 分钟内请求了超过 10 个页面，则需要使用验证码证明您是人类。因此，如果用户是合法用户，您将能够继续上网。

我只想在内容页面中执行此操作（以更有效地执行此操作）。有想过MemCached，但是由于我不欠服务器，所以不能用。如果我使用的是 Servlets，我会使用 HashMap 或类似的东西，但由于我使用的是 PHP，我仍在尝试寻找解决方案。

我不认为 MySql（或数据库）是一种解决方案，因为我每秒可以点击很多次。而且我应该在几分钟的旧请求后删除，这会产生很多不必要的和低效的流量。

有任何想法吗？

**总结：** *如果我在网页的某个部分每分钟获得太多点击，我想在 PHP 中有效地使用 Captcha 来限制它。例如，如果您在过去 5 分钟内请求了超过 10 个页面，则需要使用验证码证明您是人类。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:15:33.007

你的问题有点违背互联网的精神。

1.  每个人都向每个人复制/借用
2.  每个搜索引擎都有网络上其他所有内容的副本

我猜你遇到的问题是这些机器人正在窃取你的流量？如果是这样，我建议您尝试实现一个 API，允许他们合法地使用您的内容。

通过这种方式，您可以控制访问权限，并且至关重要的是，您可以请求链接回您的网站，以换取使用您的内容。这样，您的网站应该是内容的第一名。您甚至不需要 API 来实施此策略。

如果您坚持限制用户访问，您有以下选择：

1.  使用 javascript 解决方案并使用 Ajax 将内容加载到页面中。即使这也不会愚弄最好的机器人。
2.  将所有内容放在用户名/密码系统后面。
3.  阻止有问题的 IP - 这是维护的噩梦，你永远无法保证，但它可能会有所帮助。

问题是 - 如果您希望 Google 找到您的内容并将其限制在其他机器人中，那么您的要求是不可能的。

你最好的选择是创建一个 API 并控制人们复制你的东西，而不是试图阻止它。

# android - onConfigurationChanged 问题

> ID：12226652
> 
> 赞同：0
> 
> 时间：2012-09-01T09:40:21.097
> 
> 标签：android, android-orientation

更改方向时，我需要更改我的 Android (4.1 API 16) 应用程序的布局。

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);
      setContentView(R.layout.main_2);
      System.out.println("Orientation changed!");
    } 
```

我还在清单文件中添加了下一行

```
android:configChanges="orientation" 
```

我使用 Ctrl+F11 来改变方向。我的屏幕旋转但布局保持不变，LogCat 中没有打印任何内容。感觉像 onConfigChanged 事件没有发生。

我的错误在哪里？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:42:34.137

尝试使用**`android:configChanges="orientation|keyboardHidden|screenSize"`**

> 注意：从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。因此，如果您想在为 API 级别 13 或更高级别（由 minSdkVersion 和 targetSdkVersion 属性声明）进行开发时防止由于方向更改而导致运行时重新启动，则除了“orientation”值之外，还必须包含“screenSize”值。也就是说，您必须声明 **android:configChanges="orientation|screenSize"**。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

来源：[文档](http://developer.android.com/guide/topics/resources/runtime-changes.html)

因此，**`"|screenSize" to configChanges`**如果您的应用程序针对**API 13 及更高版本，也请添加。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T09:48:47.180

假设您的纵向布局文件位于 layout/my_layout.xml

将要在横向模式下使用的布局放置在具有相同布局文件名的 layout-land 文件夹中。即**布局土地/my_layout.xml**

**不要将**android:configChanges="orientation" 添加到该活动的清单中。

您不需要显式更改布局。您**不需要**覆盖 onConfigurationChanged(Configuration newConfig) 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:10:56.147

试试这个....

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

# dependencies - VS2012 和 VCOMP110.dll

> ID：12226654
> 
> 赞同：4
> 
> 时间：2012-09-01T09:40:33.327
> 
> 标签：dependencies, visual-studio-2012

几天前我从 VS1010 切换到 VS2012，这种变化完全没有给我带来任何麻烦。昨天我把一个编译好的 DLL 放到另一台机器上，发现它根本不能工作，甚至不能加载。由于 DLL 在我用来开发的计算机上运行无错误，我认为这将是一个未解决的依赖项，我是对的。

使用 VS2010 v110 工具集构建时，还有另一个附加依赖项： VCOMP110.DLL 。有没有办法在编译时静态包含这个 DLL，这样我就不必与软件一起重新分发它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:51:59.670

它应该是 Microsoft® C/C++ OpenMP Runtime

见[http://systemexplorer.net/file-database/file/vcomp110-dll](http://systemexplorer.net/file-database/file/vcomp110-dll)

但我没有找到一个库。

# mips - MIPS中另一个函数中间的“jal”可能是什么原因

> ID：12226655
> 
> 赞同：5
> 
> 时间：2012-09-01T09:40:52.337
> 
> 标签：mips, disassembly, function-calls

我正在查看一个非常可疑的 C 应用程序的反汇编 MIPS 代码

```
80019B90                 jal     loc_80032EB4 
```

loc_80032EB4 位于另一个函数主体的中间，我特别检查了运行时没有在此地址加载其他代码，并且以这种方式调用该函数（在开头传递一些代码）可能很有用。但是在 C 中怎么可能呢？这不是 goto，因为您无法转到另一个函数，并且正常的函数调用将始终“jal”到开头。这可以是一些手动优化吗？

**更新：**

两个函数的简化布局，被调用者：

```
sub_80032E88 (lz77_decode)
... save registers ...
80032E90                 addiu   $sp, -8
... allocate memory for decompressed data ...
80032EB0                 move    DECOMPRESSED_DATA_POINTER_A1, $v0
loc_80032EB4:
80032EB4                 lw      $t7, 0(PACKED_DATA_POINTER_A0)
... actual data decompression ...
80032F4C                 jr      $ra 
```

呼叫者：

```
80019ACC                 addiu   $sp, -0x30
... some not related code ...
80019B88                 lw      $a1, off_80018084   // A predefined buffer is used instead of allocating it for decompressed data
80019B90                 jal     loc_80032EB4
80019B94                 move    $a0, $s0
... some other code and function epilogue ... 
```

**更新 2：** 我检查了这是否可能是使用 setjmp/longjmp 的情况，但在我的测试中，我总是可以在反汇编代码中看到对 setjmp 和 longjmp 函数的调用，而不是直接跳转。

**更新 3：** 我尝试使用 GCC 特定的功能来获取标签指针并将这个指针转换为函数，结果接近我想要的但反汇编代码仍然不同，而不是使用带有 exaxct 地址的 jal 它计算它的运行时，也许由于范围问题，我无法强制编译器将此值视为常量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T19:29:39.850

由于是来自游戏系统的数据解压功能，因此该功能很可能是多入口的手工优化组装。多个入口点不常用，因此很难找到公开可用的示例，但[这里](http://gcc.gnu.org/ml/gcc/2000-02/msg00575.html)有一个来自 gcc 邮件列表的旧线程，它暗示了这种技术的可能用途。

要点是，如果您有两个函数，其中一个函数*F1*的代码是另一个函数*F2*的代码的子集，那么 F2 的代码*可以*落入*F1*的代码中。在您的情况下，*F2*为解压缩的数据分配内存，*F1*假设内存分配已经完成。我很确定 GCC 2.9x 不能生成这样的代码。

不可能直接将此构造从汇编程序转换为标准 C，因为您不能`goto`在 C 中使用另一个函数，但这在汇编程序代码中是完全合法的。gcc 邮件列表线程建议了一些解决方法来在 C 中表达相同的想法。

如果您查看用于解压缩的反汇编代码，它可能具有与编译器生成的代码不同的样式。甚至可能会使用一些操作码，例如[查找](http://en.wikipedia.org/wiki/Find_first_set)编译器无法从 C 生成的第一个设置位。

# javascript - Backbone 中的未定义方法

> ID：12226657
> 
> 赞同：0
> 
> 时间：2012-09-01T09:41:05.067
> 
> 标签：javascript, methods, backbone.js

我正在尝试与 Backbone 一起使用**，**`this.moveCursor`但它说当我. 该方法显然是定义的，所以我不确定这里有什么问题。 **`console.log`**

 **起初我以为是因为`this.`并且`switch`声明没有返回。

但是，即使当我`console.log`在外面`switch`声明时，它也是一样的。

任何人都可以帮忙吗？

```
setup: function(){      
        $(document).on('keydown', this.keyCode);
},

keyCode: function(e){
                switch(e.keyCode) {
                    case 37:  console.log(this.moveCursor(-1,0)); break; //undefined
                    case 38:  return this.moveCursor(0,-1); break;
                    case 39:  return this.moveCursor(1,0); break;
                    case 40:  return this.moveCursor(0,1); break;
                    case 32:  return play.selectBlock(); break;
                    case 13:  return play.selectBlock(); break;
                };

        console.log(this.moveCursor()); //undefined
            }, 

   moveCursor: function(x, y){
                    var cursorSelected = play.get('cursorSelected'),
                        cursorX = play.get('cursorX'),
                        cursorY = play.get('cursorY');

                console.log('moveCursor');

                if(cursorSelected){
                    x += cursorX;
                    y += cursorY;

                    this.getBlock(x,y);
                } else {
                    //
                }
            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:46:29.243

你有一个*上下文问题*。`this`关键字将代表函数的调用*者*，`keyCode()`无论在哪里`keyCode()`定义。

要了解有关此尝试的更多信息`console.log( this )`，它将向您展示`this`执行那一刻的真实情况。

要解决此问题，您可以使用[_.bindAll()](https://stackoverflow.com/questions/7366664/backbone-js-bindall-in-initialize-why-is-this-used)。

如果`keyCode()`是绑定的处理程序，`Backbone.View.events`则应该已经完成​​。

### 更新

我看到这`keyCode()`是一个普通的 jQuery 事件的处理程序：

```
$(document).on( 'keydown', this.keyCode ); 
```

它将为它工作，`_.bindAll()`你也可以像这样使用[jQuery.proxy()](http://api.jquery.com/jQuery.proxy/)：

```
$(document).on( 'keydown', $.proxy( this.keyCode, this ) ); 
```**

# jquery - 找到 Index div 并加载 attr。iframe 网址

> ID：12226660
> 
> 赞同：0
> 
> 时间：2012-09-01T09:41:27.023
> 
> 标签：jquery, iframe, indexing, attr

我有一个菜单列表（ul/li），我试图匹配一组特定的 div。例如：如果我单击 li 编号 3，则嵌套在 div 3 中的 iframe 必须“显示”并加载特定的 url：

```
$('document').ready(function(){

$('ul li').one('click', function(event) {

    event.preventDefault();

    var index = $('ul li').index(this);

    $("#tab iframe").hide();
    $('#tab > div iframe:eq('+index+')').show();

    $('#tab > div iframe:eq('+index+')').attr("src", "http://mashable.com/");

    }); 

    }); 
```

所以问题是我想为每个其他 div iframe 加载一个特定的 url，因为现在 url 没有区别。请看示例：[JsFiddle](http://jsfiddle.net/47MZU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:59:04.327

@Youss，使用这个

```
$('document').ready(function(){
   var URL = ["URL1", "URL2", "URL3"];
   $('ul li').one('click', function(event) {

   event.preventDefault();

   var index = $('ul li').index(this);

   $("#tab iframe").hide();
   $('#tab > div iframe:eq('+index+')').show();

   $('#tab > div iframe:eq('+index+')').attr("src", URL[index]);

  }); 

}); 
```

**[演示](http://jsfiddle.net/47MZU/4/)**

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:10:36.360

这是一些示例html代码

```
 <ul>
        <li target="http://google.co.uk">li 1</li>
        <li target="http://webdesignseolondon.co.uk">li 2</li>
        <li target="http://marianzburlea.com">li 3</li>
    </ul>

    <div id="tab">
        <div><iframe  id="frame1" src="" scrolling="no" ></iframe></div>
        <div><iframe  id="frame2" src="" scrolling="no" ></iframe></div>
        <div><iframe  id="frame3" src="" scrolling="no" ></iframe></div>
    </div> 
```

这是你的 jQuery：

```
 (function(){

        $('ul li').one('click', function(e) {

            e.preventDefault();

            $("#tab iframe").hide();
            $('#frame'+$(this).index()).show();

            $('#frame'+$(this).index()).attr("src", $(this).attr('target'));

        });

    }) (jQuery); 
```

# javascript - Javascript url 重写器

> ID：12226661
> 
> 赞同：0
> 
> 时间：2012-09-01T09:41:27.703
> 
> 标签：javascript, regex, url-rewriting

我想用javascript做一个url重写器，我的问题是，如果我做类似的事情：

```
var str='/test/service-34.htm',
    exp='/test/service-[0-9]*.htm';
console.log(str.match(exp)); 
```

我会得到“/test/service-34.htm”作为响应，所以如果我不能像这样进行替换：

```
/test/service-34.htm -> test.php?service=$1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:48:20.927

尝试：

```
"/test/service-34.htm".replace(
  /\/test\/service\-([0-9]+)\.htm/
, "test.php?service=$1"
); 
```

创建[反向引用](http://www.regular-expressions.info/brackets.html)`[0-9]`以在替换 中使用该部件非常重要。此外，您可能想要使用`+`而不是`*`制作所需的数字。

# javascript - 可以在检索数据时停止图像加载请求吗？

> ID：12226670
> 
> 赞同：3
> 
> 时间：2012-09-01T09:43:06.243
> 
> 标签：javascript, html, ajax

我正在开发一个高度依赖于在向用户显示之前预加载图像的 Web 应用程序。但是，根据用户的操作，有时重要的是在图像有机会完成之前终止图像的加载，以免浪费带宽。是否有可能做到这一点？如果是这样，具体如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:49:26.430

我认为不可能停止您已经要求预加载的图像。

无论如何，即使您在请求图像后尝试终止连接，即使客户端不接受，服务器也很可能会完成数据传输（这意味着仍然浪费带宽）。

您能做的最好的事情是使用 javascript 一次预加载一个图像。这样，如果您想停止加载图像，您可以停止预加载剩余的图像，即使当前加载的图像无法停止。

* * *

如果您使用 jQuery，您可以尝试中止 AJAX 请求。

[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

通过使用 jQuery.ajax() 函数来预加载您的图像。XMLHttpRequest 对象有一个可以调用的 abort() 方法。

但是，这并没有真正记录在案。ajax() 函数不是为加载图像而设计的。您从此函数获得的图像将是无法使用的奇怪二进制文件。（因为支持无图格式，所以会解释为文本）

但是，假设浏览器正在做它应该做的事情，图像**可能会**被缓存。如果它被缓存，那么它将被预先加载，您可以引用相同的 url 来使用它。

缓存很大程度上受服务器返回的任何标头的影响，即图像在缓存**过期之前的有效期。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T23:33:30.637

是的，您可以使用 HTTP 流和特殊的 AJAX 方法来完成此操作。

将服务器上的每个图像编码为 base64 字符串。注意：这会将有效负载大小增加约 33%！对于 PHP，看一下`base64_encode`函数

将 base64 编码的字符串拆分为许多*n*字节大小的块。打印每个块并每次刷新输出缓冲区。`flush`在 php.net的评论部分有一些很好的提示

根据您实现 AJAX 调用的方式，您可以中止强制浏览器关闭连接的 XMLHttpRequest。以下是有关持久检查方法的更多信息 [http://ajaxpatterns.org/HTTP_Streaming#Streaming_Wiki_Demo](http://ajaxpatterns.org/HTTP_Streaming#Streaming_Wiki_Demo)

当 ajax 调用完成并下载所有数据后，您可以使用数据 url 在浏览器中简单地创建图像：`data:image/png;base64,ENCODED_DATA`

您可能还想看看这个[http://ajaxpatterns.org/archive/HTTP_Streaming.php](http://ajaxpatterns.org/archive/HTTP_Streaming.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-01T10:29:34.393

我在 Javascript 上找到了一个可接受的（或多或少）解决方案[：取消/停止图像请求](https://stackoverflow.com/questions/930237/javascript-cancel-stop-image-requests)并像这样应用它：

```
var img = new Image();
img.src = "IMG_0111.JPG";
var timer = setTimeout(function(){
        window.stop();
        document.execCommand("Stop", false);                                            
    },50); 
```

这实现了我正在寻找的结果，尽管我担心它也会结束所有其他 HTTP 请求。

# c# - 该模块应包含程序集清单

> ID：12226676
> 
> 赞同：46
> 
> 时间：2012-09-01T09:43:59.167
> 
> 标签：c#, badimageformatexception

我在 c# 中有一个使用 c++ 库和一些 dll 的项目。当我运行它时，它工作得很好。

**该库是[Awesomium](http://awesomium.com/)，包含 c++ 库和 c# 包装器**

当我从我的 ASP.NET MVC 4 项目创建对该项目的引用时，我收到以下错误：

异常详细信息：System.BadImageFormatException：无法加载文件或程序集 'file:///D:\Projects\Development\ProGamers\GamingSite\bin\avcodec-52.dll' 或其依赖项之一。该模块应包含程序集清单。

我尝试过的事情：

1.  处理 dll，但它仍然不起作用（文件存在）。

2.  在 GAC 中注册它，但我在那里遇到了同样的错误。

3.  确保使用 .NET Framework 4.0（而不是客户端配置文件）

4.  [2 个具有相同 dll/exe 名称的文件导致冲突](http://social.msdn.microsoft.com/Forums/en/vsdebug/thread/9ad17869-63cc-4529-bfaf-9099db500e0d)- 我没有。

5.  [将解决方案的平台更改](http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/41623cb4-107f-4bba-8167-4c78aad16e3b/)为 AnyCPU/Mixed Platforms。

堆栈跟踪：

```
[BadImageFormatException: Could not load file or assembly 'file:///D:\Projects\Development\ProGamers\GamingSite\bin\avcodec-52.dll' or one of its dependencies. The module was expected to contain an assembly manifest.]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +34
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +152
   System.Reflection.RuntimeAssembly.InternalLoadFrom(String assemblyFile, Evidence securityEvidence, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm, Boolean forIntrospection, Boolean suppressSecurityChecks, StackCrawlMark& stackMark) +102
   System.Reflection.Assembly.LoadFrom(String assemblyFile) +34
   WebActivator.ActivationManager.Run() +190

[InvalidOperationException: The pre-application start initialization method Run on type WebActivator.ActivationManager threw an exception with the following error message: Could not load file or assembly 'file:///D:\Projects\Development\ProGamers\GamingSite\bin\avcodec-52.dll' or one of its dependencies. The module was expected to contain an assembly manifest..]
   System.Web.Compilation.BuildManager.InvokePreStartInitMethodsCore(ICollection`1 methods, Func`1 setHostingEnvironmentCultures) +550
   System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods) +132
   System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +90
   System.Web.Compilation.BuildManager.ExecutePreAppStart() +135
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +516

[HttpException (0x80004005): The pre-application start initialization method Run on type WebActivator.ActivationManager threw an exception with the following error message: Could not load file or assembly 'file:///D:\Projects\Development\ProGamers\GamingSite\bin\avcodec-52.dll' or one of its dependencies. The module was expected to contain an assembly manifest..]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9850940
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +456 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-22T10:46:34.200

我发现，我使用的 InstallUtil 与我的目标 .NET Framework 不同。我正在构建一个 .NET Framework 4.5，同时如果我使用的是 .NET Framework 2.0 版本，则会发生错误。为我的目标 .NET Framework 使用了正确的 InstallUtil，解决了这个问题！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-01T10:49:45.487

`BadImageFormatException`，以我的经验，几乎总是与 x86 与 x64 编译程序集有关。听起来您的 C++ 程序集是为 x86 编译的，并且您在 x64 进程上运行。那是对的吗？

而不是`AnyCPU/Mixed`用作平台。尝试手动将其设置为，`x86`然后查看它是否会运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-02T00:56:02.127

首先尝试使用 ILSpy 等反编译器打开文件，您的 dll 可能已损坏。我在一个在线网站上遇到此错误，当我下载 dll 并尝试打开它时，它已损坏，可能是通过 ftp 上传时发生了一些错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-08T06:49:18.790

就我而言，我使用`InstallUtil.exe`的是导致错误的。要安装 . 在窗口中服务使用命令`Net Core`的最佳方式。`sc`

此处提供更多信息[Exe 安装引发错误该模块应包含程序集清单 .Net Core](https://stackoverflow.com/questions/62192900/exe-installation-throwing-error-the-module-was-expected-to-contain-an-assembly-m)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-26T18:14:18.417

我发现了另一个奇怪的原因，我想可能是另一个开发者跟我一样困惑。我确实运行了 install.bat，它创建了在**VS2010 的开发人员命令提示符中**安装我的服务，但我的服务在 VS2012 中生成。它会出现这个错误并让我发疯，但我尝试**了 VS2012 开发人员命令提示符**工具，一切都好起来了。我不知道为什么，但我的问题已经解决了。所以你可以测试它，如果有人知道原因，请与我们分享。谢谢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-25T09:41:48.173

检查清单是否是有效的 xml 文件。在构建结束时执行 DOS 复制命令时我遇到了同样的问题，事实证明，由于某种原因，我无法理解“复制”在清单文件的末尾添加了一个奇怪的字符 (->)。通过添加“/b”开关强制二进制复制解决了这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-16T14:59:15.067

在以下情况下我得到了错误：

1.  一个 .NET EXE 文件 (#1) 引用了另一个 .NET EXE 文件 (#2)
2.  我试图用[Themida混淆 EXE #2](https://www.oreans.com/themida.php)
3.  运行 EXE #1 时出现错误*“该模块应包含程序集清单”而崩溃*

我只是避免了混淆，错误就消失了。不是一个真正的解决方案，但至少我知道是什么原因造成的......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-26T22:31:24.837

删除 .InstallState 文件并重新安装服务为我修复了它。

# c# - c++ BITMAPINFOHEADER biBitCount 在 C# 中等效

> ID：12226680
> 
> 赞同：0
> 
> 时间：2012-09-01T09:44:39.013
> 
> 标签：c#, c++, image-processing

每个人我都在尝试将 c++ 代码转换为 c# 。压缩位图图像的这段代码。我的 c++ 代码使用 BITMAPINFOHEADER
读取位图图像的 biBitCount，我如何在 c#（win 应用程序）中获取图像的位数？这是 C++ 代码

```
char *pTemp; //image data will store here
BITMAPINFOHEADER *pbminfo;
pbminfo = (BITMAPINFOHEADER *)pTemp;
if ( pbminfo->biBitCount != 1 ) // Convert 24 bit -> 1 bit 
{
     //some process will be done here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:52:15.567

您可以尝试以下方法：

```
using System.Drawing;

public class TestThis
{
    public void Test()
    {
        Image myImage = Image.FromFile("Myfile.png");

        int bitDepth = Image.GetPixelFormatSize(myImage.PixelFormat);

        if( bitDepth != 1)
        {
            // Do domething
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:25:47.170

您确实可以在 Visual C++/CLI 中编写一个包装类，但是您想要做的一切都完全可以使用 C# 来完成。

您可以使用[`PixelFormat`](http://msdn.microsoft.com/en-us/library/system.drawing.image.pixelformat%28v=vs.100%29.aspx)图像的属性。它有多种[可能的值](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat%28v=vs.100%29.aspx)。

> 像素格式定义了与数据的一个像素相关联的内存位数。该格式还定义了单个像素数据中颜色分量的顺序。
> 
> PixelFormat48bppRGB、PixelFormat64bppARGB 和 PixelFormat64bppPARGB 每个颜色分量（通道）使用 16 位。GDI+ 1.0 和 1.1 版可以读取每通道 16 位的图像，但此类图像会转换为每通道 8 位的格式以进行处理、显示和保存。每个 16 位颜色通道可以保存 0 到 2^13 范围内的值。
> 
> 一些像素格式包含预乘颜色值。预乘意味着颜色值已经乘以 alpha 值。

```
var image = new Bitmap(@"C:\temp\me.png");
if (image != null) {
    Console.Write("Format: {0}", image.PixelFormat.ToString("G"));
} 
```

在我的情况下，结果将是：`Format32bppArgb`.

# c# - 带有参数值的OleDb更新sql不更新Access中的记录

> ID：12226682
> 
> 赞同：2
> 
> 时间：2012-09-01T09:44:52.537
> 
> 标签：c#, oledb

谁能说出下面的代码有什么问题？

```
command.Connection = ConnectionManager.GetConnection();
command.CommandText = "Update Table1 SET Replaceme = ? WHERE Searchme = ?";
command.CommandType = CommandType.Text;
command.Parameters.AddWithValue("Replaceme", "Goodman");
command.Parameters.AddWithValue("Searchme", "Anand");

command.Connection.Open();
int recordsaffected = command.ExecuteNonQuery();
MessageBox.Show("Records affected : " + recordsaffected); 
```

`MessageBox`显示 0 条记录，它实际上并没有更新可用的记录。

表名`(Table1)`和列名`(Replaceme and Searchme)`拼写正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T10:23:05.833

首先，`OleDbParameter`s 是位置的，而不是命名的。阅读[文档中的](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter)*备注*部分。忽略任何不理解这一点的答案。

这是一个最小的工作示例。

首先，创建您的数据库：

![在此处输入图像描述](../Images/12a54e2d13f18f5f1464dd0e4f5864dd.png)

![在此处输入图像描述](../Images/c4801289ca1c32e4cae3f8341f29abb6.png)

二、编写代码：

```
using System;
using System.Windows.Forms;
using System.Data.OleDb;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string connectionString;
            connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;";
            connectionString += "Data Source=C:\\Temp\\Database1.mdb";

            using (var connection = new OleDbConnection(connectionString))
            {
                connection.Open();

                var command = connection.CreateCommand();
                command.CommandText =
                    "UPDATE Table1 SET Replaceme = ? WHERE Searchme = ?";

                var p1 = command.CreateParameter();
                p1.Value = "Goodman";
                command.Parameters.Add(p1);

                var p2 = command.CreateParameter();
                p2.Value = "Anand";
                command.Parameters.Add(p2);

                var result = String.Format("Records affected: {0}",
                    command.ExecuteNonQuery());
                MessageBox.Show(result);
            }
        }
    }
} 
```

结果：

![在此处输入图像描述](../Images/7e25ca0f18260e3457c6a1287c0d981f.png)

![在此处输入图像描述](../Images/10a0c0e4ab7f3a66e3523bb15e550095.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T09:52:16.600

它不工作，因为你正在使用？而不是 @ 用于参数化查询。

使用它，它应该可以工作：

`Update Table1 SET Replaceme = @Replaceme WHERE Searchme = @Searchme`

# objective-c - 简单的 NSPredicate @"1 == 0" 不过滤获取的结果？

> ID：12226685
> 
> 赞同：2
> 
> 时间：2012-09-01T09:45:20.140
> 
> 标签：objective-c, ios, nspredicate, nsfetchedresultscontroller

这段代码有什么问题？

我知道这是一个愚蠢的谓词。但这只是为了表明如果这有效，应该过滤掉所有内容，对吗？

不知何故，它不是。我在我的数据库中获取了每个 Month 对象，而我应该什么都没有。

我想这告诉我问题可能不在谓词中？

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Month" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];

[fetchRequest setPredicate: [NSPredicate predicateWithFormat:@"1 == 0"]];

NSSortDescriptor *sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"month_" ascending:YES];

    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor1, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];
[fetchRequest setFetchBatchSize:20];

NSFetchedResultsController *theFetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:managedObjectContext
                                      sectionNameKeyPath:@"month_"
                                               cacheName:@"Root"];

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[_fetchedResultsController sections] count];
} 
```

我真正想做的是，

```
[NSPredicate predicateWithFormat:@"year.year_ == %d", year] 
```

我也试过这个，

```
[NSPredicate predicateWithFormat:@"month_ == %d", 1] 
```

只是看看它是否有效。但什么都没有。

编辑：

此时，无论我设置什么谓词，只要它是有效的、格式良好的谓词即可。它不抱怨，并得到我所有的对象。它只是不过滤任何东西。

我几乎使用 Apple 文档中的样板代码。

谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:48:34.210

如果使用缓存，那么 fetchRequest 的缓存应该在被重用之前被删除。

调用 deleteCacheWithName: 解决了这个问题。

# ios - 如何在 MKMapView 中找到中国变换的逆？

> ID：12226688
> 
> 赞同：4
> 
> 时间：2012-09-01T09:45:57.430
> 
> 标签：ios

这似乎是一个[众所周知的事实](http://home.wangjianshuo.com/archives/20081109_all_maps_in_china_are_transformed.htm)（`MKMapView`以及一般的谷歌地图）在 100-600m 上有不同的偏移量，这使得注释在地图上显示不正确。

根据[这个线程](https://stackoverflow.com/questions/6401593/how-to-use-mklocationmanager-a-private-api-in-ios)，谷歌有一个名为的私有方法`_applyChinaLocationShift`，它可以工作，但显然只`CLLocations`针对`CLLocationManager`. 对于任意`CLLocations`的，它返回 nil。我正在编写的应用程序只需要在一个城市工作，所以我考虑过使用预采样该区域`_applyChinaLocationShift`并将逆变换存储在交付的应用程序中（如果可能的话）。

那么基本上，有没有办法将坐标转换为与转换后的中国地图对应的坐标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:19:24.737

如何在模拟器中使用位置模拟并为其提供该特定城市的一堆坐标。

# iphone - iOS中的AES算法实现

> ID：12226690
> 
> 赞同：0
> 
> 时间：2012-09-01T09:46:14.167
> 
> 标签：iphone, objective-c, ios, aes

大家好，我正在努力将 AES 算法 .net 代码转换为目标 c。我经历了不同的 API，但结果总是客户端提供的不同 .net 代码我不是 .net 开发人员，所以我很挣扎。任何建议或代码片段表示赞赏.net 代码如下。

```
 Public Function AES_Encrypt(ByVal input As String, ByVal pass As String) As String
            Dim AES As New System.Security.Cryptography.RijndaelManaged
            Dim Hash_AES As New System.Security.Cryptography.MD5CryptoServiceProvider
            Dim encrypted As String = ""
            Try
                Dim hash(31) As Byte
                Dim temp As Byte() =     Hash_AES.ComputeHash(System.Text.ASCIIEncoding.ASCII.GetBytes(pass))
                Array.Copy(temp, 0, hash, 0, 16)
                Array.Copy(temp, 0, hash, 15, 16)
                AES.Key = hash
                AES.Mode = Security.Cryptography.CipherMode.ECB
              Dim DESEncrypter As System.Security.Cryptography.ICryptoTransform = AES.CreateEncryptor
            Dim Buffer As Byte() = System.Text.ASCIIEncoding.ASCII.GetBytes(input)
            encrypted = Convert.ToBase64String(DESEncrypter.TransformFinalBlock(Buffer, 0, Buffer.Length))
        Catch ex As Exception
        End Try
        Return encrypted
    End Function

    Public Function AES_Decrypt(ByVal input As String, ByVal pass As String) As String
        Dim AES As New System.Security.Cryptography.RijndaelManaged
        Dim Hash_AES As New System.Security.Cryptography.MD5CryptoServiceProvider
        Dim decrypted As String = ""
        Try
            Dim hash(31) As Byte
            Dim temp As Byte() = Hash_AES.ComputeHash(System.Text.ASCIIEncoding.ASCII.GetBytes(pass))
            Array.Copy(temp, 0, hash, 0, 16)
            Array.Copy(temp, 0, hash, 15, 16)
            AES.Key = hash
            AES.Mode = Security.Cryptography.CipherMode.ECB
            Dim DESDecrypter As System.Security.Cryptography.ICryptoTransform = AES.CreateDecryptor
            Dim Buffer As Byte() = Convert.FromBase64String(input)
            decrypted = System.Text.ASCIIEncoding.ASCII.GetString(DESDecrypter.TransformFinalBlock(Buffer, 0, Buffer.Length))

        Catch ex As Exception
        End Try
        Return decrypted
    End Function* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T07:28:54.970

在 iOS 中，您可以使用 CommonCrypto API：

```
size_t numBytesEncrypted = 0;
CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, keySize,
                                      NULL /* initialization vector (optional) */,
                                      [someData bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted);
if (cryptStatus == kCCSuccess) {
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
} 
```

并解密：

```
size_t numBytesDecrypted = 0;
CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, keySize,
                                      NULL /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesDecrypted);

if (cryptStatus == kCCSuccess) {
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
} 
```

# c# - 从单词列表中替换字符串中的多个单词

> ID：12226691
> 
> 赞同：5
> 
> 时间：2012-09-01T09:46:26.730
> 
> 标签：c#, string, replace

我有一个单词列表：

`string[] BAD_WORDS = { "xxx", "o2o" } // My list is actually a lot bigger about 100 words`

我有一些文本（通常很短，最多 250 个字），我需要删除其中的所有`BAD_WORDS`内容。

我试过这个：

```
 foreach (var word in BAD_WORDS)
    {
        string w = string.Format(" {0} ", word);
        if (input.Contains(w))
        {
            while (input.Contains(w))
            {
                input = input.Replace(w, " ");
            }
        }
    } 
```

但是，如果文本以坏词开头或结尾，则不会被删除。我是用空格做的，所以它不会匹配部分单词，例如不应删除“oxxx”，因为它与 BAD WORDS 不完全匹配。

任何人都可以给我建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-01T09:55:02.230

```
string cleaned = Regex.Replace(input, "\\b" + string.Join("\\b|\\b",BAD_WORDS) + "\\b", "") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T09:55:54.920

这对 Linq 来说是一项伟大的任务，对于 Split 方法也是如此。试试这个：

```
return string.Join(" ", input.Split(' ').Where(w => !BAD_WORDS.Contains(w))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T09:51:56.703

您可以使用 StartWith 和 EndsWith 方法，例如：

```
while (input.Contains(w) || input.StartsWith(w) || input.EndsWith(w) || input.IndexOf(w) > 0)
{
   input = input.Replace(w, " ");
} 
```

希望这能解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T09:52:04.920

将假空格放在字符串 varible 之前和之后`input`。这样它就会检测到第一个和最后一个单词。

```
input = " " + input + " ";

 foreach (var word in BAD_WORDS)
    {
        string w = string.Format(" {0} ", word);
        if (input.Contains(w))
        {
            while (input.Contains(w))
            {
                input = input.Replace(w, " ");
            }
        }
    } 
```

然后修剪字符串：

```
input = input.Trim(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T09:55:36.653

您可以将文本中的单词存储到一个列表中。然后检查所有单词是否在错误列表中，如下所示：

```
List<string> myWords = input.Split(' ').ToList();
List<string> badWords = GetBadWords();

myWords.RemoveAll(word => badWords.Contains(word));
string Result = string.Join(" ", myWords); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T10:10:38.403

只是想指出，你应该只在你的身体里做这样的事情：

```
 foreach (var word in BAD_WORDS)
{
    while (input.Contains(String.Format(" {0} ", word);))
    {
        input = input.Replace(w, " ");
    }
} 
```

不需要那个 if 和 'w' 变量，无论如何我都会使用上面的答案，Antonio Bakula，首先想到的是这个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-20T08:25:22.423

根据以下帖子，最快的方法是使用 Regex 和 MatchEvaluator ： [替换字符串中的多个字符，最快的方法是什么？](https://stackoverflow.com/questions/11899668/replacing-multiple-characters-in-a-string-the-fastest-way/11900932#11900932)

```
 Regex reg = new Regex(@"(o2o|xxx)");
        MatchEvaluator eval = match =>
        {
            switch (match.Value)
            {
                case "o2o": return " ";
                case "xxx": return " ";
                default: throw new Exception("Unexpected match!");
            }
        };
        input = reg.Replace(input, eval); 
```

# wpf - 通用 UserControls 和通用 Dependency 属性是否可能？

> ID：12226693
> 
> 赞同：2
> 
> 时间：2012-09-01T09:46:35.397
> 
> 标签：wpf, generics, dependency-properties, initializecomponent

我有一个抽象的泛型类，它定义了一个泛型依赖属性，其类型将由子类定义。此属性不知何故未被识别为依赖属性，因此在绑定到此属性时，我在运行时收到错误消息。此外，在编译期间，构造函数不能调用`InitializeComponent`. 这是为什么？

通用抽象类`MyClass`：

```
abstract public class MyClass<T,U> : UserControl {
    protected MyClass() {
        InitializeComponent(); // Here is one error: Cannot be found
    }

    abstract protected U ListSource;

    private static void DPChanged
    (DependencyObject d, DependencyPropertyChangedEventArgs e) {
        var myClassObj = (MyClass) d;
        myClassObj.DataContext = myClassObj.ListSource;
    }

    // Causes a binding error at runtime => DP (of the concrete subclass)
    // is not recognized as a dependency property 
    public static readonly DependencyProperty DPProperty = 
        DependencyProperty.Register(
        "DP", 
        typeof(T), 
        typeof(MyClass), 
        new PropertyMetadata(null, DPChanged));

    public T DP {
        get { return (T) GetValue(DPProperty); }
        set { SetValue(DPProperty, value); }
    }
} 
```

对应的 XAML：

```
<UserControl x:Class="Path.of.Namespace.MyClass"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ListView>
        <!-- Some stuff for the list view - used for all subclasses -->
    </ListView>
</UserControl> 
```

一个具体的子类`MySubClass`：

```
public partial class MySubClass : MyClass<ClassWithAList, List<int>> {
    public MySubClass() {
        InitializeComponent(); // Another error: Cannot be found
    }

    protected List<int> ListSource {
        get { return new List<int>(); } // Just a dummy value

    }
} 
```

对应的 XAML：

```
<local:MySubClass xmlns:local="Path.of.Namespace.MySubClass" /> 
```

PS 我也不太确定这些`partial`东西是否正确完成 - R# 建议删除这些关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:02:01.040

我认为您的代码有几个问题，但首先，让我`partial`在这种情况下解释一下：

`partial`用于在单独的文件中声明一个类。由于 Visual Studio 正在从您创建一个`MySubClass.g.cs`（`partial class MySubClass`顺便说一句，这是声明该方法`InitializeComponent`的位置），`MySubClass.xaml`因此您将有两次此类声明，因此要编译它，您将需要`partial`关键字。

现在剩下的：XAML 和泛型不能很好地结合在一起，这意味着：一点*也不*。您的“相应 XAML”正在声明一个`MyClass`. 但是`MyClass`没有泛型参数的 a 不存在。此时您可以更改`x:Class="Path.of.Namespace.MyClass"`为`x:Class="Path.of.Namespace.MySubClass"`，这应该可以。

但现在接下来的事情是：你想如何访问 xaml 中的依赖属性？它是泛型类型中的静态成员，因此您必须在代码中这样指定它`MyClass<ClassWithAList, List<int>>.DPProperty`：问题又来了：你不能在 xaml 中这样做

为了解决您的问题，告诉我们您想要完成的工作可能是个好主意

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T17:40:05.640

我认为问题可能是您正在编写 typeof(MyClass)，并且应该是`typeof(MyClass<T,U>)`.

# javascript - Javascript 使用 Confirm 取消表单提交

> ID：12226701
> 
> 赞同：3
> 
> 时间：2012-09-01T09:48:03.090
> 
> 标签：javascript, html

如何将取消按钮添加到警报窗口？

我已经使用了该`confirm()`方法，但是当单击提交按钮时会弹出确认窗口，但是当单击取消按钮时，会存储表单的数据。

我只想单击取消按钮以不存储数据并保留以前的表单。这是我的代码：

```
function submitdata()
{   
    var r=confirm("Are You Sure You Want To Proceed?");

    if(r==true)
    {
        alert("Record is saved");
    }
    else
    {
        alert("Cancelling Transaction");
        javascript:history.go(0);
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:58:35.837

```
<form action="" name="test" onsubmit="return submitdata();">
    <input type="text" />

    <input type="submit" />

</form>

<script type="text/javascript">

function submitdata() { 
    var r=confirm("Are You Sure You Want To Proceed?"); 
    if(r==true) { 
        alert("Record is saved"); 
    } else { 
        alert("Cancelling Transaction"); 
        javascript:history.go(0);
    }

}

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T10:08:31.270

这就是你真正需要的：

```
<script type="text/javascript">

    function submitdata() { 
        return confirm("Are You Sure You Want To Proceed?"); 
    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:14:18.460

颠倒逻辑。但问题是奇怪的语言，所以最好使用将取消设置为默认值的自定义提示。

```
function forceNonDefaultOk() {
    return ( ! confirm( 'Keep working' ) );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T09:58:40.567

**更新**

```
function submitdata() {
    var r=confirm("Are You Sure You Want To Proceed?");

    if(r==true) {
        alert("Record is saved");
        return true;
    } else {
        alert("Cancelling Transaction");
        return false;
    }   
} 
```

# android - 后台 Phonegap 以及 Activity、Process 和 Service 生命周期之间的关系

> ID：12226703
> 
> 赞同：4
> 
> 时间：2012-09-01T09:48:38.097
> 
> 标签：android, cordova, activity-lifecycle

我有一个 Phonegap 应用程序，我想在后台运行一些程序。也就是说，在 Phonegap Activity 不可见时执行一些逻辑。目前，我无法编写本机服务来运行这些程序，因此我希望 Phonegap Activity 本身充当服务。当然，作为Service运行的逻辑是Javascript，不能作为普通的Android Service来实现。`startService`我想到的一个解决方案是通过生成一个“虚拟”或空服务（利用and ）将 Phonegap Activity 视为一种伪服务`startForeground`。这个想法是 Phonegap Activity 的生命周期将与服务的生命周期相关联，因此将继续在后台执行 Javascript 代码。

不管你是否知道Phonegap，我的问题是：如果我通过在其中生成前台服务来对进程进行优先级排序，这会影响Activity 生命周期吗？服务（及其进程）是否有可能保持活动状态并且主 Activity 从内存中清除？

如果不能保证 Activity 生命周期会受到影响，你能谈谈实践中可能发生的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:01:02.287

> 我想到的一个解决方案是通过生成“虚拟”或空服务（利用 startService 和 startForeground）将 Phonegap Activity 视为一种伪服务。

如果你能做到这一点，你就可以用原生 Java 代码实现实际的服务（而不是仅仅用原生 Java 代码编写一个空的服务），你就可以避免所有这些废话。

> 这个想法是 Phonegap Activity 的生命周期将与服务的生命周期相关联，因此将继续在后台执行 Javascript 代码。

AFAIK，`WebView`既不知道也不关心过程中是否存在`Service`。无法保证在不可见`WebView`时会无限期地继续执行 JavaScript 。`WebView`而且，由于您的 PhoneGap 应用程序几乎只是一个，因此您所依赖的`WebView`正是这种未记录的行为。`WebView`

> 如果我通过在其中生成前台服务来确定进程的优先级，这会影响 Activity 生命周期吗？服务（及其进程）是否有可能保持活动状态并且主 Activity 从内存中清除？

欢迎用户按下 BACK 按钮，破坏您的活动，并且不受您是否启动某些服务的影响。

欢迎用户使用任务管理器（例如，Android 4.0+ 上的最近任务列表）来关闭您的后台进程，这不受您是否启动某些服务的影响。

欢迎用户通过设置强制停止您的应用程序，以防止您的代码在未经他们许可的情况下再次运行，并且不受您是否启动某些服务的影响。

欢迎操作系统自行终止您的进程——`startForeground()`这不是终身通行证。

话虽如此，在后三种情况下，当流程发生时，活动和服务将同时消失。只有 BACK 按钮（或您的调用`finish()`，或一些未处理的异常）会导致活动消失但服务仍然存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:56:40.127

CommonsWare 给出了很好的综合回答。我想用我的经验来补充它。

是的，产生一个虚拟服务并`startForeground()`可靠地调用让我的应用程序在后台运行。我和我的少数用户从未见过操作系统自行杀死了该应用程序。

**但是**，每次我手动终止活动（从“最近”中将其刷出）时，该服务也会停止。不过，在 PhoneGap 的上下文中，它看起来很合乎逻辑。

[此外，使用 PhoneGap，您可以覆盖此答案](https://stackoverflow.com/a/5312426/65899)中所述的后退按钮行为。

# php - Paypal Pro 创建定期配置文件

> ID：12226706
> 
> 赞同：2
> 
> 时间：2012-09-01T09:49:01.653
> 
> 标签：php, paypal, paypal-subscriptions

我正在使用`CreateRecurringPaymentsProfile`. 我对以下计费条件需要使用哪些重复变量感到困惑：

1.  试用期：前 15 天用户无需支付任何费用。
2.  第二个月：用户将被收取 30 美元。
3.  从第三个月开始，每个奇数月：用户将被收取每月 40 美元的费用。
4.  从第三个月开始，每个偶数月：用户将被收取每月 30 美元的费用。

Paypal 允许设置多个试用/计费周期、频率或金额？即`trialbillingperiod1`，`trialbillingfrequency1`或`trialamt1`

# codeigniter - 排除 DataMapper (CodeIgniter) 中相关的那些？

> ID：12226711
> 
> 赞同：1
> 
> 时间：2012-09-01T09:49:40.797
> 
> 标签：codeigniter, codeigniter-datamapper

这将获取所有相关项目：

```
$item->get_by_related($user); 
```

但是，如何只获取不相关的？

我想这可以通过使用来完成`where`，但是多对多关系呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:52:51.753

通过谷歌搜索找到了这个。真的很奇怪，它在故障排除下，因为它更多的是一个功能而不是一个错误。

[http://datamapper.wanwizard.eu/pages/troubleshooting.html#Relationships.NotRelated](http://datamapper.wanwizard.eu/pages/troubleshooting.html#Relationships.NotRelated)

# spring - 如何从 Spring MVC 中的页面标题创建 RESTful URL？

> ID：12226713
> 
> 赞同：4
> 
> 时间：2012-09-01T09:49:43.357
> 
> 标签：spring, rest, spring-mvc, url-rewriting, restful-url

当我的应用程序的用户创建一个新页面时，她被要求输入“页面标题”以及其他详细信息。（例如她输入：“梅根的页面标题”）应用程序将实例保存到数据库中。

现在我的要求是，当任何人尝试访问该页面时，URL 应该是：

www.websitename.com/pages/page-title-by-megan

我知道使用 Spring MVC，我可以通过使用以下内容轻松获得“page-title-by-megan”部分：

```
@RequestMapping("/pages/{pageTitle}")
public String getPage(@PathVariable String pageTitle, Model model) {
    List<Pages> pages = pageService.getPages(pageTitle);
    model.addAttribute("pages", pages);
    return "pages";
} 
```

但问题是

**Q1：**要检索相关页面，我需要将pageTitle“page-title-by-megan”与实际数据一起存储在数据库中吗？这是唯一的技巧吗？还是有更好的方法？

**Q2：**如果这是唯一的方法，如何从“Page Title by Megan”有效地形成一个像“page-title-by-megan”这样的字符串？再次，有更好的方法吗？

请指导。我将非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:20:03.253

**Q1：** 我认为唯一的方法是按照您所说的将 url 存储到数据库中，并具有唯一的限制。

**Q2：** 假设`pageTitle`包含用户输入的标题，提交完成后在控制器中使用它：

```
String transformedPageTitle = pageTitle.toLowerCase().replace(" ", "-"); 
```

# android - 在 for 循环中切换按钮可见性

> ID：12226730
> 
> 赞同：0
> 
> 时间：2012-09-01T09:52:20.613
> 
> 标签：android, multithreading, button, visible, invisible

它必须工作，但不工作。当我启动应用程序时，我看到一个按钮。现在我希望该按钮可见和不可见。

```
for (k = 0; k < abc.length; ++k) {
try {

    if (k%2 != 0) {
        button.setVisibility(View.VISIBLE);
    } else {
        button.setVisibility(View.GONE);
    }

    Thread.sleep(sleepMilliseconds);

} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
} 
```

还是for循环太快了，android无法显示？没发生什么事。我看到了按钮。

我有一个 Thread.sleep()。睡眠毫秒是例如 100、300 -> 随机的。也不能这么快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T09:53:57.677

> 我有一个 Thread.sleep()。睡眠毫秒是例如 100、300 -> 随机的。也不能这么快。

您正在*UI 线程中*睡觉。那就是问题所在。您不会让 UI 线程的其余部分完成其工作。

如果您想定期更新 UI，您应该改用计时器，或者可能[`Handler.postDelayed`](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)在每次更新结束时调用，以安排下一次更新。或者，使用[属性动画系统](http://developer.android.com/guide/topics/graphics/prop-animation.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:02:37.420

WebnetMobile.com 和 Jon Skeet 是对的；您应该使用计时器或动画来实现您想要的效果；

但是，如果您真的想以自己的方式执行此操作，请执行以下操作：

```
for (k = 0; k < abc.length; ++k) {
try {

    if (k%2 != 0) {
        button.setVisibility(View.VISIBLE);
    Thread.sleep(sleepMilliseconds);

   } else {
        button.setVisibility(View.GONE);
     Thread.sleep(sleepMilliseconds);
    }

} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
} 
```

并让父亲在 500 多毫秒内直观地看到它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T10:06:11.160

试试这个，希望对你有帮助..

声明一个类变量并在你的活动类中添加这个类和这个方法

```
//variabe
boolean b;

//class
class RefreshHandler extends Handler {
    @Override  
    public void handleMessage(Message msg) {  
      _yourActivity.this.updateUI();          
    }  

    public void sleep(long delayMillis) {  
      this.removeMessages(0);  
      sendMessageDelayed(obtainMessage(0), delayMillis);  
    }

    public void stop(){
        super.sendEmptyMessage(0);
    }

} 
```

和

```
//method
public void updateUI() {

 if (b) {
    button.setVisibility(View.VISIBLE);
    b=false;
 } else {
    button.setVisibility(View.GONE);
    b=true;
 }
  mRedrawHandler.sleep(1000);
} 
```

然后使用它来启动按钮的可见性不可见性

```
mRedrawHandler = new RefreshHandler(); 
updateUI1(); 
```

你可以使用

```
mRedrawHandler.removeMessages(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T09:55:28.677

如果您想闪烁您的按钮，请在其上应用动画，即更改 Alpha 通道。

# api - 检查订阅 ID 是否仍然激活 - 贝宝

> ID：12226738
> 
> 赞同：2
> 
> 时间：2012-09-01T09:53:52.803
> 
> 标签：api, paypal

有没有一种方法可以调用函数/API 来检查订阅用户是否仍处于激活状态而无需登录 Paypal。

例如当用户注册了月费访问网站时，当用户登录时向贝宝发送请求以检查用户是否已付款并且没有取消订阅？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:40:28.737

Have you explored the GetRecurringPaymentsProfile API? [https://www.x.com/developers/paypal/documentation-tools/api/getrecurringpaymentsprofiledetails-api-operation-nvp](https://www.x.com/developers/paypal/documentation-tools/api/getrecurringpaymentsprofiledetails-api-operation-nvp)

As long as you have the profile ID, you should be good to go.

# java - 获取索引图像的数据（调色板索引）

> ID：12226741
> 
> 赞同：2
> 
> 时间：2012-09-01T09:54:21.470
> 
> 标签：java, image, palette

如何访问索引图像（png8 或 gif）的图像数据（调色板索引数组）？

例子：

*   图像调色板：{0xFF0000, 0x00FF00, 0x0000FF}
*   图像数据：{0,1,1,0,1,2,2,2,0,1,0,2,0,1,1,0}

我需要的是：

```
ArrayList<Integer> getImageData(File image) {
  /* ??? */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:22:36.797

下面的代码会将图像数据读入`imageData`一个值数组`int`。

```
 BufferedImage image = ImageIO.read(imageFile);
  int width = image.getWidth();
  int height = image.getHeight();
  int[] imageData = new int[width * height * image.getColorModel().getNumComponents()];
  imageData = image.getData().getPixels(0, 0, width, height, imageData); 
```

# c++ - 在指定的内存地址调用函数。C++

> ID：12226742
> 
> 赞同：0
> 
> 时间：2012-09-01T09:54:26.667
> 
> 标签：c++, function, memory-management

我最近一直在写 SEC 算法（比如这里`http://18.7.29.232/bitstream/handle/1721.1/4015/HPCES024.pdf?sequence=2`）。起初是递归版本，它似乎抛出“堆栈溢出”异常超过 200000 点。直到我把它写在我自己的堆栈上（使用迭代而不是递归）我才知道为什么，它在 1000000 点上工作得很好。

我相信当我调用函数时，处理器和变量的指令会被复制到一些“随机”分配的内存中。我还认为，当我有一个类向量的全局变量时，它需要有一些紧凑的内存（如表）。

问题是当我有大量的函数调用时（例如在某些递归算法中），因为（在我看来）当内存被分成小部分时，向量不能“放大”并引发“堆栈溢出”异常。

所以我认为我可以以某种方式说服 c++ 应该在哪里存储函数实例内存。就像这里[http://www.parashift.com/c++-faq-lite/placement-new.html](http://www.parashift.com/c++-faq-lite/placement-new.html)制作一些“函数实例”表，所以它不会弄乱内存。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:47:42.713

从来不是`vector`谁给出堆栈溢出错误。`vector`在堆上分配它的内存，它可以和你的总内存（包括虚拟内存）一样大。

另一方面，堆栈是（相当）一小块内存，您的程序在其中存储函数局部变量以及其他内容。

当你调用一个函数时，这些是写入堆栈的一些数据：

*   可能是一些寄存器
*   堆栈指针
*   可能有一些空间用于返回值
*   函数参数（如果有）
*   基指针
*   新函数的局部变量

根据架构/编译器，可能还有其他数据。

因此，即使是最简单的函数也会在堆栈上占用最少的内存才能被调用。幸运的是，当函数返回时，这些内存再次可用。然而，虽然这个函数没有返回，但这些数据仍然存在。因此，如果您一遍又一遍地递归调用一个函数，所有这些数据就会相互堆积。如果你没有尽快结束你的递归函数，你将耗尽内存并且你会得到一个堆栈溢出错误。

如果你很好奇，你可以在你的函数中添加额外的变量（确保它们不会被优化），并看到你得到这个错误的点数较少。

您的解决方案，其他人在评论中说过因此是使用迭代方法，`std::stack`例如基本上模拟调用堆栈。

# bash - Bash：在一个命令行中删除文件后缀

> ID：12226749
> 
> 赞同：3
> 
> 时间：2012-09-01T09:55:38.707
> 
> 标签：bash, command-line, find

给定文件路径如`fiz.js`and `dir/buz.js`，如何去掉后缀获得`fiz dir/buz`？

我最好的镜头（我正在寻找更简单的东西）：

```
查找 -name '*.js'| \
 xargs -I{} 回声 {} | \
 sed 's/.js$//' | \
 xargs -I{} mv {}.js {}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:05:05.210

您可以`bash`通过使用 (版本 4)`globstar`来获取递归文件列表。

```
$ shopt -s globstar
$ for i in **/*.js ; do echo "$i" "${i%.js}" ; done 
```

对于 bash 手册页：

> ### `globstar`
> 
> 如果设置，路径名扩展上下文中使用的模式 ** 将匹配所有文件以及零个或多个目录和子目录。如果模式后跟 /，则只有目录和子目录匹配。

`${x%ext}`从. `ext`_ `$x`有关更多信息，请参阅[字符串操作](http://tldp.org/LDP/abs/html/string-manipulation.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:55:56.130

```
echo "fiz.js"|awk -F. '{print $1}'

echo "dir/buz.js"|awk -F. '{print $1}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:23:32.983

```
find -name '*.js'|  xargs -I file rename 's/\.js$//' file 
```

它可以工作，如果你想覆盖现有文件，你必须添加一个 -f 来重命名（重命名 -f）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-21T17:58:09.030

这对我有用：`rename ".js" "" *.js`

# python - 如何优雅地用python抓取数据？

> ID：12226752
> 
> 赞同：0
> 
> 时间：2012-09-01T09:56:26.687
> 
> 标签：python

我在文本文件中有数据，我需要将其存储在数据库中，现在我有点困惑如何更容易地做到这一点。

这是我的数据示例：

```
a: text1
b: text2
c: text3
blah blah not necessary text
a: text4
b: text5
c: text6
etc 
```

那么你能帮我解析这些数据吗？我已经完成了下一个代码

```
import urllib2 as ur

def getPageData(url):
    return ur.urlopen(url).readlines()

checkList = ['a', 'b', 'c']

if __name__ == '__main__':
    textList = getPageData(url)
    res = []
    for i in textList:
        for y in checkList:
            if y in i:
                print i 
```

我在 base 中创建了一个表，例如

```
id | a varchar | b varchar | c varchar | 
```

我期待下一个结果

```
id | a varchar | b varchar | c varchar |
1  | text1     | text2     | text3     |
2  | text4     | text5     | text6     |
n  | text      | text      | text      | 
```

如果逐行读取文本文件，我如何将此文本划分为逻辑块，例如我得到 a,b,c 用这些数据创建字典，然后当这个块结束时我将字典附加到列表中，之后我有列表的 dict 将其存储到基础。但是我有点困惑如何用这本字典创建这个列表我需要检查什么以及如何避免其中不必要的数据？有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:00:02.343

我会在`:`冒号上拆分并测试第一部分是否在允许的前缀集中：

```
checkList = set(['a', 'b', 'c'])

for i in textList:
    check, rest = i.split(':', 1)
    if check.strip() not in checkList:
        continue
    data = rest.strip()
    # insert data into database; check is your column name. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:05:40.530

这个怎么样：

```
text = """a: text1
b: text2
c: text3
blah blah not necessary text
a: text4
b: text5
c: text6
etc."""

import re
from collections import defaultdict

d = defaultdict(list)
for line in textList:
    m = re.match(r"([^:]+):\s*(.*)", line)
    if m:
        d[m.group(1)].append(m.group(2)) 
```

然后你得到

```
>>> d
defaultdict(<type 'list'>, {'a': ['text1', 'text4'], 'c': ['text3', 'text6'], 
'b': ['text2', 'text5']}) 
```

正则表达式标识至少包含一个标识符（`a`例如 ），然后是一个冒号的行，并将标识符和冒号 ( `.*`) 后面的文本放入匹配的组中。然后它将结果放入“默认字典”中，该字典在引入时创建其内容。

如果您事先知道标识符，则可以使用

```
m = re.match(r"(a|b|c|otherid|diff_id|etc)\s*:\s*(.*)", line) 
```

反而。

# twitter-bootstrap - 在 Asp.net MVC4 项目中集成 Twitter Bootstrap (vs2010)

> ID：12226755
> 
> 赞同：0
> 
> 时间：2012-09-01T09:57:17.647
> 
> 标签：twitter-bootstrap, asp.net-mvc-4

我按照[这个](http://www.youtube.com/watch?v=m2UQqMU27BA&feature=youtu.be)非常简单的教程来创建 MVC4 项目。但它一直给我这样的错误：
`The name 'Styles' does not exist in the current context. @Styles.Render("~/Content/themes/base/css", "~/Content/css")`
我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:29:15.947

MVC4 actually doesn't provide this by default if you used the empty project template. You need to get a NuGet package and add a namespace for your Razor views:

1.  `Install-Package Microsoft.AspNet.Web.Optimization`
2.  Open ~\Views\Web.config
3.  Add an `<add namespace="System.Web.Optimization" />` under `configuration/system.web.webPages.razor/pages/namespaces`
4.  Rebuild & run. It should work.

It has nothing to do with Twitter.Bootstrap except that Twitter.Bootstrap suggests that you use an Empty project template

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:08:45.243

正如 Sherbrow 提到的，检查您是否安装了 MVC4 和最新版本。因为我认为 beta 对这两个包的语法与 RC 和 RTM 版本不同。打开你的 nuget 包配置并确保项目确实引用了 RTM 文件。

# java - 比较中double和Double之间的区别

> ID：12226757
> 
> 赞同：25
> 
> 时间：2012-09-01T09:58:12.933
> 
> 标签：java, double

我知道这`Double`是一个包装类，它包装了`double`数字。今天，我看到了另一个主要区别：

```
double a = 1.0;
double b = 1.0;
Double c = 1.0;
Double d = 1.0;
System.out.println(a == b);  // true
System.out.println(c == d);  // false 
```

对我来说太奇怪了！

所以，如果我们使用`Double`, 每次，我们必须做这样的事情：

```
private static final double delta = 0.0001;
System.out.println(Math.abs(c-d) < delta); 
```

我无法解释为什么 Double 直接比较是错误的。请为我解释。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-01T10:00:04.717

`c`并且`d`在技术上是两个不同的对象，`==`运算符仅比较引用。

```
c.equals(d) 
```

更好，因为它比较值，而不是参考。但仍然不理想。直接比较浮点值应始终考虑一些错误（epsilon）（`Math.abs(c - d) < epsilon`）。

注意：

```
Integer c = 1;
Integer d = 1; 
```

这里比较会产生`true`，但这更复杂（`Integer`内部缓存，在[JavaDoc 中`Integer.valueOf()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#valueOf(int))描述）：

> 此方法将始终缓存 -128 到 127（含）范围内的值，并且可能缓存此范围之外的其他值。

为什么`valueOf()`？因为这个方法隐式用于实现自动装箱：

```
Integer c = Integer.valueOf(1);
Integer d = Integer.valueOf(1); 
```

# 也可以看看

*   [Java中奇怪的整数拳击](https://stackoverflow.com/questions/3130311)
*   [如何正确比较Java中的两个整数？](https://stackoverflow.com/questions/1514910)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T10:02:09.813

当应用于类类型的表达式时，`==`将*始终*执行引用比较（[JLS 第 15.21.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.3)）。所以这一行：

```
System.out.println(c == d); 
```

正在检查是否`c`和`d`引用相同的对象。Java中的自动装箱总是（我相信）为`float`and创建一个新对象`double`（对于整数类型来说情况更复杂¹）。因此`c`and`d`引用不同的对象，所以它打印`false`.

如果要比较*对象*是否相等，则需要`equals`显式调用：

```
System.out.println(c.equals(d)); 
```

使用`double`，它使用数字相等代替 - 如[第 15.21.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.1)中所述。因此行为上的差异。

* * *

¹对于积分自动装箱，“小”值被缓存 - 所以自动装箱 5（比如说）每次都会返回相同的引用。“小”的定义是特定于实现的，但它保证在 -128 到 127 的范围内。有关详细信息，请参阅[第 5.1.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)的底部。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T10:00:48.820

用于`equals()`检查 2 个对象的相等性。`==`检查 2 个引用是否引用了内存中的同一个对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T10:02:30.410

内容检查仅`==`在检查原始类型时才可靠。对于对象类型，最好使用以下`equals`方法：

```
c.equals(d) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-30T14:49:51.513

**`==`和之间的区别`equals`**

在原始数据类型上使用`==`与在对象引用数据类型上使用不同。

1.  在原始数据类型`==`上用作`equals`.
2.  对于对象引用数据类型`==`是指它们的引用。因此对象在内存中指向什么。

**考虑案例 1**

```
 double d1 = 10.00;
    double d2 =10.00;
    System.out.println(d1 == d2); 
```

*输出是* `true`

[![在此处输入图像描述](../Images/a53f38316025805615c75d2fca2f2d28.png)](https://i.stack.imgur.com/GvmWb.png)

**案例2：`==`引用数据类型**

```
 Double d1 = 10.00;
    Double d2 =10.00;
    System.out.println(d1 == d2); 
```

*输出是*`false`

[![在此处输入图像描述](../Images/ce9dbc4ccf5995e8974f5e6114088e8d.png)](https://i.stack.imgur.com/E8yvd.png)

d1 和 d2 具有不同的内存引用。

要检查其有效性，请考虑以下代码

```
 Double d1 = 10.00;
    Double d2 = d1;
    System.out.println(d1 == d2); 
```

这将打印`true`，因为 d1 和 d2 指向相同的内存引用。

**所以**

*`Java`用于`==`比较**原语**和检查两个变量是否引用同一个**对象***

***`等于'***

用于检查两个`objects`是否相等。

它还取决于它被调用的对象的实现。对于`Strings`,`equals()`检查其中的字符。

```
 Double d1 = 10.00;
    Double d2 = 10.00;
    System.out.println(d1.equals(d2)); 
```

打印 `true`，因为它看起来是什么在 d1 和 d2。

**案例1**不会编译

[![在此处输入图像描述](../Images/2267289015b7f2315235dde5bed1b008.png)](https://i.stack.imgur.com/YwHwZ.png)

# android - 在另一个 Activity 中使用在一个 Activity 中获取的数据

> ID：12226761
> 
> 赞同：2
> 
> 时间：2012-09-01T09:58:40.163
> 
> 标签：android, android-intent, nullpointerexception

我从 Web 服务器`userName`中获取某些数据，例如输入。`Activity_1`然后我想在`Activity_2`

所以我做了这个用户名`Public` `Static`并像这样使用`Activity_2`

```
Activity_1.userName 
```

但是当我进入`Activity_2`并`press Home Button`在 5 分钟后重新打开应用程序时，就`Activity_1.userName`变成`Null`了这样`Activity_1 data is destroyed`。我得到`NullPointerException`

如何以简单的方式解决这个问题。

我只是举了一个 userName 的例子，但实际上它的一些其他数据每天都在变化，比如“每日新闻”

许多人会建议删除`public` `static`该用户名并将其发送为：

```
Intent.putExtra("user_name", userName); 
```

但这和我正在做的不一样。我的意思是即使这样我也会做`NullPointerException`对吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:01:11.010

意图已保存，因此正确答案是使用 putExtra。当您的活动需要重新实例化时，它将使用意图再次创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T10:09:10.000

有两种方法可以做到这一点。

1.  始终确保 Activity1 是应用程序中的起始 Activity。我的意思是，如果用户关闭应用程序并重新启动它，应用程序应该从 Activity1 中重新获取数据。然后只去Activity2。另请注意，您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在 Activity2 本身中从 Web 获取数据。

2.  将来自 Activity1 的数据保存在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中，并且在 Activity2 中始终使用 SharedPreferences 来读取值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T10:26:52.233

正如 swayam 所建议的那样，我建议您选择数据库或共享首选项，尤其是共享首选项最适合您的场景；

您可以使用如下内容：

放在：

```
SharedPreferences sharedPreferences = getSharedPreferences("PREFS_READ",
                Context.MODE_WORLD_READABLE);
        Editor prefsPrivateEditor = sharedPreferences.edit();
        prefsPrivateEditor.putString("yourkey", userName);
prefsPrivateEditor.commit(); 
```

要得到：

```
SharedPreferences sharedPreferences;
        Context otherAppsContext = null;
        try {
            otherAppsContext = getApplication().createPackageContext(
                    "your.package.name", 0);
        } catch (NameNotFoundException e) {
            Toast.makeText(Email.this, e.toString(), Toast.LENGTH_LONG).show();
        }
        sharedPreferences = otherAppsContext.getSharedPreferences("PREFS_READ",
                Context.MODE_WORLD_WRITEABLE);

        String getusername = sharedPreferences.getString("yourkey","default_value"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T10:02:59.507

您可以向此事件添加一个动作并仅在该动作存在时捕获该事件......

当然，您可以永久保存数据 - SQLite 数据库或 SharedPreferences

# google-maps - 设置缩放和中心以显示所有标记 - 在地图元素中显示蓝色

> ID：12226770
> 
> 赞同：0
> 
> 时间：2012-09-01T10:00:51.377
> 
> 标签：google-maps

我正在尝试使地图居中并适合最佳缩放级别以使用此代码显示所有标记

```
var searchname=document.getElementById("hidden_searchname").value;
if(trim(document.getElementById("longitude").value)!="")
{
    zoom=11; 
    lat=document.getElementById("latitude").value;
    longitude=document.getElementById("longitude").value;
}
else
{
    zoom=11;
    longitude="-88";
    lat="42";
}
latlng = new google.maps.LatLng(lat,longitude);
var myOptions = {
    zoom: zoom,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};

map = new google.maps.Map(document.getElementById("map"), myOptions);

var latlngbounds = new google.maps.LatLngBounds();

for (var i = 0; i < latlng.length; i++)
{
    latlngbounds.extend(latlng[i]);
}
//map.setCenter(latlngbounds.getCenter(), map.getBoundsZoomLevel(latlngbounds));
map.setCenter(latlngbounds.getCenter());
map.fitBounds(latlngbounds); 
```

但它显示我没有地图和控制台错误是 "type error c is null" 。网址是 [http://tinyurl.com/bp94qdy](http://tinyurl.com/bp94qdy)

在框中输入 Mcdonalds 并查看。

我调整了代码，它使用下面的代码正确缩放

```
 map = new google.maps.Map(document.getElementById("map"), myOptions);

var latlngbounds = new google.maps.LatLngBounds();

    for (var index in markersArray) {

       var lat = markersArray[index].lat;
       var lng = markersArray[index].lng;
   //alert(markersArray[index].lng);
       var latlng2 = new google.maps.LatLng(lat, lng);
        latlngbounds.extend(latlng2);
       }

    //map.setCenter(latlngbounds.getCenter(), map.getBoundsZoomLevel(latlngbounds));
   map.setCenter(latlngbounds.getCenter());
      map.fitBounds(latlngbounds); 
```

地图现在显示为蓝色，直到我将鼠标悬停在地址上。这是因为变焦距离太远还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:22:07.907

您的地图将指向太平洋中部，因此它是蓝色的。那是因为您没有正确阅读标记的纬度。代替

```
 for (var index in markersArray) {

    var lat = markersArray[index].lat;
    var lng = markersArray[index].lng;

    var latlng2 = new google.maps.LatLng(lat, lng);
     latlngbounds.extend(latlng2);
} 
```

你应该做

```
for (var i = 0 ; i < markersArray.length ; i++) {
     latlngbounds.extend(markersArray[i].getPosition());
} 
```

# php - SEO 与 URL 混淆导致 PHP 插件无法正常工作

> ID：12226775
> 
> 赞同：0
> 
> 时间：2012-09-01T10:01:43.000
> 
> 标签：php, joomla, seo

我通过点击 Joomla 中的按钮来调用 PHP 函数。这是按钮的链接：

```
<a class="deleteNakladyButton" href="index.php?option=com_k2&amp;view=item&amp;task=deleteNaklady&amp;id=<?php echo $naklad->id?>&amp;cid=<?php echo $this->row->id; ?>"><?php echo JText::_('K2_DELETE'); ?></a> 
```

$naklad->id 是数据库中行的 id，$this->row->id 是项目（文章）的 id。

这就是非 SEO url 的样子并且它有效：

```
http://localhost/web/index.php?option=com_k2&view=item&task=deleteNaklady&id=89&cid=1 
```

这成功地调用了函数并从数据库中删除了该行。

这是 SEO url 的样子，但它不起作用：

```
 http://localhost/web/index.php/prubeh-stavby/item/deleteNaklady/89/1 
```

当我在打开 SEO 的情况下点击按钮时，我收到 403 权限被拒绝错误。代码中是否有一些地方我可以编写不用于 SEO 优化特定 URL？欢迎任何其他想法！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:14:04.197

你能试试吗`JRoute::_('')`

```
<a class="deleteNakladyButton" href="<?php JRoute::_('index.php?option=com_k2&view=item&task=deleteNaklady&id='.$naklad->id.'&cid='.$this->row->id.''); ?>"><?php echo JText::_('K2_DELETE'); ?></a> 
```

希望这会奏效....

# objective-c - 查找数组中重复次数最多的对象

> ID：12226776
> 
> 赞同：5
> 
> 时间：2012-09-01T10:01:57.897
> 
> 标签：objective-c, ios, xcode, nsarray

我有一个充满字符串的数组，每个字符串都是一个名称。有些名称可能相同，而有些名称可能不同。我正在使用的语言是objective-C。我希望能够从该数组中找出最受欢迎的名称（该数组将根据用户提供给应用程序的信息是动态的）。我不确定如何有效地做到这一点。如果有人可以对此进行扩展或提供示例，将不胜感激。

谢谢

例子：

```
NSArray *nameArray= [[NSArray alloc] initWithObjects @"james", @"megan", @"lauren", @"mike" @james", nil]; 

  //james would be the most popular name 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T10:32:54.243

使用`NSCountedSet`然后使用 `countForObject:`方法找到计数最高的对象。

```
//create count set from array
NSCountedSet *setOfObjects = [[NSCountedSet alloc] initWithArray:yourArrayhere];

//Declaration of objects
NSString *mostOccurringObject = @"";
NSUInteger highestCount = 0;

//Iterate in set to find highest count for a object
for (NSString *strObject in setOfObjects)
{
    NSUInteger tempCount = [setOfObjects countForObject:strObject];
    if (tempCount > highest)
    {
        highestCount = tempCount;
        mostOccurringObject = strObject;
    }
} 
```

检查结果：

```
NSLog(@"Most frequent string: %@ with count: %i", mostOccurringObject,highestCount); 
```

**[归功于@Evan](https://stackoverflow.com/a/11141256/1106035]) **Mulawski**的回答**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T10:37:51.213

我会使用一个哈希表（`NSMutableDictionary`在你的情况下），遍历字符串数组，使用每个字符串作为键，并将其值设置为它在数组中出现的次数。您可以使用变量（或名称数组，如果有多个名称具有相同的出现次数）来跟踪最大值。

然后运行时间是线性的（ O(n) 其中 n 是数组中名称的数量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T14:23:45.443

获取出现次数。

```
NSArray *nameArray= [[NSArray alloc] initWithObjects @"james", @"megan", @"lauren", @"mike" @james", nil]; 
NSCountedSet *set = [[NSCountedSet alloc] nameArray]; 
```**

# android - 更新安卓小部件

> ID：12226777
> 
> 赞同：0
> 
> 时间：2012-09-01T10:02:02.007
> 
> 标签：android, android-widget

[开发人员的网站](http://developer.android.com/index.html)说该方法`onUpdate`是在时间 updatePeriodMillis 之后调用的。但是当我在方法中写入时`onUpdate`，例如，`Log.e ("tag", "update");`他仅在您运行小部件时才在日志中写入。

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:01:08.523

`onUpdate()`更像是“立即恢复此小部件”处理程序。它应该（重新）初始化/启动小部件的资源和服务。系统绝对不会尊重非常低的`android:updatePeriodMillis`值，因此将`onUpdate()`其用作小部件的 mainloop 将不起作用！

你想做的是：

1.  在：使用自定义操作`onUpdate()`创建一个新`AlarmManager`的。`PendingIntent`将 设置`AlarmManager`为根据需要快速重复。

2.  In `onReceive()`：选择自定义操作，然后调用`Log.e()`或任何您想要的。

**注意：**创建自定义操作后，不要忘记将其添加到您`<Intent-Filter>`的 Manifest.xml 中。因为否则，`onReceive()`将无法接收它。

有些过时但仍然部分相关： http: [//kmansoft.com/2010/04/10/processing-widget-events-with-pendingintents/](http://kmansoft.com/2010/04/10/processing-widget-events-with-pendingintents/)

# javascript - 如何检测 UIWebView 中的 AJAX 何时更新标题？

> ID：12226779
> 
> 赞同：1
> 
> 时间：2012-09-01T10:02:26.790
> 
> 标签：javascript, jquery, ios, jquery-mobile, uiwebview

在一个应用程序中，我有几个指向我们网站（有一个 jQuery 移动版本）的链接，我想在应用程序中打开这些链接。

我使用自己的视图控制器并添加一个 UIWebView ，如下所示：

```
webv = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 367)];
[webv setDelegate:self];
[webv loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:self.urlString]]];
[self.view addSubview:webv]; 
```

我也在使用导航控制器，所以我想在页面加载时更新标题：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView{
    self.title = [webView stringByEvaluatingJavaScriptFromString:@"document.title"];
} 
```

但是，因为 jQuery mobile 通过 AJAX 和调用发出请求`history.pushState`，所以`webViewDidFinishLoad`委托方法永远不会被触发。

那么，当页面标题通过 javascript 更改时，如何更新我的导航控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:45:12.163

您是否尝试通过此方法设置导航标题

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{} 
```

# python - 如何解析最大 N 值的 python 列表？

> ID：12226783
> 
> 赞同：0
> 
> 时间：2012-09-01T10:02:45.090
> 
> 标签：python, list, numpy

我在这篇文章的底部附上了数据。我有另一个程序的输出，我想以合理的方式在 python 中解析。

输出将始终采用相同的形式，我想做的是找出哪个“标签”具有最大值。我已经标记了下面数据的截断版本（并标记了列的顶部）

```
0        1               2                3            4        5            6          7              8         
AlII     1.6272514892aa  0.0000042282     5.85216aa    0.68792  10.741103    0.074253   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6273145922ab  0.0000129136     0.50000ab    1.41279  10.483775    0.516978   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
MgII     1.6272514892AA  0.0000000000     5.85217AA    0.00000  11.510502    3.9484     0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00 
```

所以我想做的是以多种方式解析这个文件。从上面的缩写中，我想返回以下内容：

*   最大（第 2 列）：AlII ab：0.0000129136
*   最大（第 4 栏）：AlII ab：1.41279
*   最大（第 6 栏）：MgII AA：3.9484

而且我实际上想做前 N 个最大值，但对于这个例子，我只会做最大的。我因创建新列表并查找这些新列表的索引而陷入困境。有没有一些直接的方法来做这种解析？或者这将是一个混乱的过程？

**编辑**

我被要求提供一些代码来显示我尝试过的内容。

```
import numpy as np
analyseList = []
with open('output.ascii', 'r') as f18:
  for line in f18.read().splitlines():
    analyseList.append(line.split())

for column in [2, 4, 6]:
  winner = analyseList[np.argmax(np.column_stack(np.array(analyseList))[column])]
  print winner[0], winner[1][-2:], winner[column] 
```

当然，这只返回最大值（我希望能够做到 N 最大）。此外，看起来我正在以最简单的方式进行操作。

要获取前 N 个最大值的索引值，我可以这样做（使用来自 的建议）：

```
[list(analyse_array[2]).index(x) for x in heapq.nlargest(5, analyse_array[2])] 
```

我在做一些超级复杂的事情吗？

```
AlII     1.6272514892aa  0.0000042282     5.85216aa    0.68792  10.741103    0.074253   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6273145922ab  0.0000129136     0.50000ab    1.41279  10.483775    0.516978   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6273482473ac  0.0000118688     2.01059ac    3.95256  10.714536    0.646238   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6273975034ad  0.0000379662     3.78319ad    5.42225  11.118654    0.683413   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6274362338ae  0.0000137972     2.17566ae    2.17134  11.105118    1.025574   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6274729985af  0.0000071899     2.59672af    1.62035  11.686851    0.218038   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6275047836ag  0.0000059328     0.56225ag    0.73486  10.908730    0.729322   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6275333529ah  0.0000063501     2.46788ah    1.66430  11.280185    0.381467   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6275811952ai  0.0000273404     4.39490ai    3.90964  11.154901    0.430842   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6276822766ak  0.0000153451     3.86075ak    1.01659  11.687808    0.302170   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6277080822al  0.0000041420     2.77773al    0.74546  11.515588    0.594305   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6277357442am  0.0000180202     3.03343am    2.97410  11.311138    0.474284   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6277884119an  0.0000100139     3.05039an    1.49107  11.218137    0.271466   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6278358107cd  0.0000488929     3.80549cd    6.28261  11.103154    1.305702   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6278657638ao  0.0000095109     4.23025ao    1.26277  11.681221    0.419769   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6279139560bq  0.0000074039     2.68827bq    1.66201  11.457767    0.630426   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6280021360cb  0.0000058565     1.55711cb    1.67734  11.188839    0.706256   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6280408039cc  0.0000168737     3.88995cc    2.74610  11.520547    0.303991   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6279628448ar  0.0000059612     4.02312ar    2.18053  11.975320    0.228508   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6280940230as  0.0000033920     0.61137as    0.37590  10.717869    0.253534   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6281299959at  0.0000035012     0.90119at    0.58387  10.833329    0.072094   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6281673440au  0.0000048884     0.50000au    0.84155  10.339533    0.191522   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
AlII     1.6282125019av  0.0000068319     7.51956av    1.17482  11.097728    0.069789   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
MgII     1.6272514892AA  0.0000000000     5.85217AA    0.00000  11.510502    0.039484   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6273145922AB  0.0000000000     0.50000AB    0.00000  11.176308    0.522596   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6273482473AC  0.0000000000     2.01060AC    0.00000  11.450444    0.591724   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6273975034AD  0.0000000000     3.78320AD    0.00000  11.803555    0.736543   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6274362338AE  0.0000000000     2.17568AE    0.00000  11.967321    0.821801   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6274729985AF  0.0000000000     2.59673AF    0.00000  12.458430    0.235348   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6275047836AG  0.0000000000     0.56231AG    0.00000  11.941490    0.332862   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6275333529AH  0.0000000000     2.46790AH    0.00000  12.037696    0.343867   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6275811952AI  0.0000000000     4.39491AI    0.00000  11.840805    0.451418   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6276822766AK  0.0000000000     3.86076AK    0.00000  12.497054    0.314167   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6277080822AL  0.0000000000     2.77775AL    0.00000  12.391999    0.522446   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6277357442AM  0.0000000000     3.03344AM    0.00000  12.112177    0.481882   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6277884119AN  0.0000000000     3.05040AN    0.00000  12.013911    0.321297   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6278358107CD  0.0000000000     3.80550CD    0.00000  12.061481    1.335432   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6278657638AO  0.0000000000     4.23025AO    0.00000  12.520703    0.551397   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6279139560BQ  0.0000000000     2.68828BQ    0.00000  12.419351    0.538659   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6280021360CB  0.0000000000     1.55713CB    0.00000  11.993443    0.736608   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6280408039CC  0.0000000000     3.88996CC    0.00000  12.272450    0.312588   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6279628448AR  0.0000000000     4.02313AR    0.00000  12.836074    0.241956   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6280940230AS  0.0000000000     0.61143AS    0.00000  11.738664    0.119798   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6281299959AT  0.0000000000     0.90123AT    0.00000  11.522748    0.084764   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6281673440AU  0.0000000000     0.50000AU    0.00000  11.179284    0.155217   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6282125019AV  0.0000000000     7.51956AV    0.00000  11.963228    0.066024   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgII     1.6282950406aw  0.0000162434     0.50000aw   18.49632  10.153640    0.769463   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 1.000E+00 0.000E+00
FeII     1.6276822766AK  0.0000000000     3.86071AK    0.00000  11.593048    0.330634   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6277080822AL  0.0000000000     2.77768AL    0.00000  11.784789    0.214666   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6277884119AN  0.0000000000     3.05033AN    0.00000  11.072150    0.276522   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6278358107CD  0.0000000000     3.80545CD    0.00000  11.147939    1.295144   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6278657638AO  0.0000000000     4.23021AO    0.00000  11.660933    0.468554   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6279139560BQ  0.0000000000     2.68821BQ    0.00000  11.427745    0.662669   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6280021360CB  0.0000000000     1.55700CB    0.00000  10.341299    3.837088   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6280408039CC  0.0000000000     3.88991CC    0.00000  11.289446    0.290091   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6279628448AR  0.0000000000     4.02308AR    0.00000  11.989071    0.212467   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6280940230AS  0.0000000000     0.61111AS    0.00000   9.766184    1.484659   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6281299959AT  0.0000000000     0.90101AT    0.00000  10.590012    0.186610   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6281673440AU  0.0000000000     0.50000AU    0.00000  10.186119    0.472566   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
FeII     1.6282125019AV  0.0000000000     7.51954AV    0.00000  11.190375    0.088965   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6272514892AA  0.0000000000     5.85216AA    0.00000  10.321950    0.459616   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6273145922AB  0.0000000000     0.50000AB    0.00000  10.097437    0.853198   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6273482473AC  0.0000000000     2.01059AC    0.00000  10.102194    1.947396   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6273975034AD  0.0000000000     3.78319AD    0.00000  11.105979    0.686387   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6274362338AE  0.0000000000     2.17566AE    0.00000  11.175948    0.814687   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6274729985AF  0.0000000000     2.59672AF    0.00000  11.548086    0.275875   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6275047836AG  0.0000000000     0.56225AG    0.00000  11.108123    0.386412   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6275333529AH  0.0000000000     2.46788AH    0.00000  11.292689    0.333124   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6275811952AI  0.0000000000     4.39490AI    0.00000  11.057781    0.453329   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6276822766AK  0.0000000000     3.86075AK    0.00000  11.265981    0.325767   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6277080822AL  0.0000000000     2.77773AL    0.00000  11.117329    0.630136   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6277357442AM  0.0000000000     3.03343AM    0.00000  10.921103    0.639479   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6277884119AN  0.0000000000     3.05039AN    0.00000  11.191087    0.159695   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6278657638AO  0.0000000000     4.23025AO    0.00000  11.504725    0.162766   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6279139560BQ  0.0000000000     2.68827BQ    0.00000  11.185086    0.780060   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6280021360CB  0.0000000000     1.55711CB    0.00000  10.744751    1.475204   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6280408039CC  0.0000000000     3.88995CC    0.00000  11.471091    0.278311   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6279628448AR  0.0000000000     4.02312AR    0.00000  11.854733    0.209241   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6280940230AS  0.0000000000     0.61137AS    0.00000  10.205223    0.810373   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6281299959AT  0.0000000000     0.90119AT    0.00000  10.823697    0.155524   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6281673440AU  0.0000000000     0.50000AU    0.00000  10.582535    0.258096   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
AlIII    1.6282125019AV  0.0000000000     7.51956AV    0.00000  10.874901    0.182424   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6272514892AA  0.0000000000     5.85217AA    0.00000   9.963618    0.199973   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6273975034AD  0.0000000000     3.78320AD    0.00000  10.008887    0.626172   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6274362338AE  0.0000000000     2.17568AE    0.00000  10.029316    0.772678   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6274729985AF  0.0000000000     2.59673AF    0.00000  10.171716    0.390966   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6275047836AG  0.0000000000     0.56231AG    0.00000   9.914891    0.378870   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6275333529AH  0.0000000000     2.46790AH    0.00000  10.075757    0.224531   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6276822766AK  0.0000000000     3.86076AK    0.00000  10.525614    0.306759   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6277080822AL  0.0000000000     2.77775AL    0.00000  10.460383    0.403447   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6277357442AM  0.0000000000     3.03344AM    0.00000   9.791121    0.536106   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6278657638AO  0.0000000000     4.23025AO    0.00000  10.746795    0.126158   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6279139560BQ  0.0000000000     2.68828BQ    0.00000  10.134445    0.921959   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6280021360CB  0.0000000000     1.55713CB    0.00000   9.964342    0.676227   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6280408039CC  0.0000000000     3.88996CC    0.00000  10.126811    0.368050   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6279628448AR  0.0000000000     4.02313AR    0.00000  10.750671    0.228670   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6280940230AS  0.0000000000     0.61143AS    0.00000   9.405961    0.588696   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6281299959AT  0.0000000000     0.90123AT    0.00000   9.292788    0.728340   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00
MgI      1.6281673440AU  0.0000000000     0.50000AU    0.00000   9.807055    0.210571   0.0000E+00QA  0.0000E+00  0 [   0.000   0.000 0.000E+00 0.000E+00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:06:21.010

假设您有一个列表列表开始，您可以只使用 stdlib（未经测试，并且肯定需要调整）来做一些事情，例如：

```
import heapq
from operator import itemgetter

# get a two tuple of (idx, row)
list_with_index = enumerate(your_list)

# Get the top 10 from column '1' and return a list of those
# which will be (row_index, original_row)
largest = heapq.nlargest(10, list_with_index, key=itemgetter(1, 1))

# Get the top 5 index values
largest_indices = [el[0] for el in largest]
# or map(itemgetter(0), largest) if you prefer... 
```

根据您的示例代码（再次未经测试）：

```
for colno in (2, 4, 6):
    largest = map(itemgetter(0), heapq.nlargest(10, enumerate(analyseList), key=itemgetter(1, colno)))
    print '{} largest: {}'.format(colno, ', '.join(largest)) 
```

在旁注中，您还可以考虑查看`.argsort`numpy 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:30:04.883

你可以访问 NumPy 包吗？您可以将整个 2D 列表加载到单个列表中`ndarray`（如果需要，也可以使用第一个字符串列）。然后你可以使用`argmax`你的数组的方法来找到沿着每一列使用`argmax(axis=0)`或每一行的最大值的位置`argmax(axis=1)`......

假设您逐列构造数组，您可以执行以下操作：

```
analyse_array = np.column_stack(analyse_list)
col_max = analyse_array.argmax(axis=0) 
```

这为您提供了一个数组，该数组给出了每列的最大值位置，作为行的索引。如果您只想要第 2、4、6 列的结果，只需使用花哨的索引：

```
col_max[[2,4,6]] 
```

这样，您可以将相应的行检索为

```
analyse_array[col_max[[2,4,6]]] 
```

# javascript - 日期对象未在 javascript 中返回正确的日期值

> ID：12226785
> 
> 赞同：0
> 
> 时间：2012-09-01T10:02:59.927
> 
> 标签：javascript, date

> **可能重复：**
> [用数字创建日期（new Date(2012, 03, ...) 给出错误的月份 (+1)](https://stackoverflow.com/questions/10649036/creating-date-with-numbers-new-date2012-03-gives-wrong-month-1)

我有这个功能：

```
function myFunction(){
 var d = new Date(2012,9,1);
var x = document.getElementById("demo");//some element demo

x.innerHTML=d.getDay();

} 
```

我试图在任何一个月的 1 个日期获得工作日。代码在上面（一个例子）。这不应该返回一个 6 作为其值的星期六吗？它没有给出正确的值。在这种情况下它给出 1。看起来很简单，但我错过了一些东西。我误解了方程式吗？

请告诉。

一些编辑：虽然它有点不同，但它仍然在同一行。

```
 function myFunction()
{

for(i=0;i<12;i++){

  var d = new Date(2012,i,0);

  k=i+1;

  var x = document.getElementById(""+k);

   x.innerHTML=d.getDate()+" "+i;

  }

} 
```

此函数将特定的 ids 总共 12 写入 no。我得到以下输出：

```
31 0

31 1

29 2

31 3

30 4

31 5

30 6

31 7

31 8

30 9

31 10

30 11 
```

这是不正确的。

上面的函数生成月份和相应的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:06:59.360

您忘记了在创建新`Date`对象时，`month`参数采用 0-11 之间的数字。9 月 8 日。尝试将其更改为 8，您的一天将返回`6`，即星期六。

您更正的代码：

```
function myFunction(){
var d = new Date(2012,8,1);
var x = document.getElementById("demo");//some element demo

x.innerHTML=d.getDay();

} 
```

[演示](http://jsfiddle.net/amaan/T5FMH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:08:21.470

我找到了罪魁祸首：

在 Javascript 中，月份被视为一个数组，从 0 开始。

所以九月应该是

```
var d = new Date(2012,8,1); and not 9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:06:36.637

我知道您可以使用长时间戳创建日期。

有时会发生您导入错误的日期 - 您需要 Utils.Date 而不是 SQL.Date - 也检查一下！

# c# - 如何使用gridview值使用asp.net c#更新数据库中的另一个表

> ID：12226787
> 
> 赞同：0
> 
> 时间：2012-09-01T10:03:16.807
> 
> 标签：c#, asp.net, sql, gridview

我有一个`GridView`，它绑定到 SQLdatasource。我编辑它，数据库中的相应表得到更新。完成对 , 中的所有行的编辑后`GridView`，在 button_click 上，我想读取其中具有条目的每一行，`GridView`并在 where 子句中使用 GridView 中的第一列**Location**并更新数据库中的另一个不同表。

请帮忙。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:35:49.007

您只需要获取 Grid View 中每一行的 Column 值，并使用 Update Query 通过为相应的 SQL 表创建另一个数据源来更新它。以下代码将帮助您更好地理解。

```
int rowscount = gv.Rows.Count;

for (int i = 0; i < rowscount; i++)
{
           //Iterating the Grid View

        RequiredColvalue = gv.Rows[i][0].Tostring();

   //Update Statement According to your need.
} 
```

# php - Wordpress 自定义分类页面

> ID：12226790
> 
> 赞同：0
> 
> 时间：2012-09-01T10:03:46.257
> 
> 标签：php, wordpress, rewrite, custom-post-type, custom-taxonomy

我有一个以前见过的问题，但没有一个答案能解决我的问题。这是我以前遇到过的问题，但从未设法解决。

我有一个干净的 Wordpress 安装，并且在`functions.php`文件中我创建了一个自定义帖子类型

```
register_nav_menu('main', 'Main navigation menu');

function add_custom_post_type() {
    $labels = array(
        'name' => _x('Books', 'post type general name'),
        'singular_name' => _x('Book', 'post type singular name'),
        'add_new' => _x('Add New', 'book'),
        'add_new_item' => __('Add New Book'),
        'edit_item' => __('Edit Book'),
        'new_item' => __('New Book'),
        'all_items' => __('All Books'),
        'view_item' => __('View Book'),
        'search_items' => __('Search Books'),
        'not_found' =>  __('No books found'),
        'not_found_in_trash' => __('No books found in Trash'), 
        'parent_item_colon' => '',
        'menu_name' => __('Books')
    );

    $args = array(
        'labels' => $labels,
        'public' => true,
        'publicly_queryable' => true,
        'show_ui' => true, 
        'show_in_menu' => true, 
        'query_var' => true,
        'rewrite' => true,
        'capability_type' => 'post',
        'has_archive' => true, 
        'hierarchical' => false,
        'menu_position' => null,
        'supports' => array( 'title', 'editor', 'author', 'thumbnail', 'excerpt', 'comments' )
    ); 

    register_post_type('book', $args);
} 
```

我已经为这些文件制作了一个模板文件`archive-book.php`，`single-book.php`一切正常。当我转到“http://localhost/wordpress/book”时，我可以查看书籍现在我想创建一个自定义分类法，所以我也这样做了`functions.php`：

```
add_action('init', 'add_custom_post_type');

function add_custom_taxonomy() {
    register_taxonomy(
        'rating',
        'book',
        array(
            'label' => 'Rating',
            'hierarchical' => true,
            'show_ui' => true,
            'query_var' => 'book',
            'has_archive' => true,
            'rewrite' => array(
                'slug' => 'book/rating'
            )
        )
    );
} 
```

分类显示在管理页面中，我可以添加新术语，并将它们添加到书籍中。但现在问题来了。我想查看所有书籍的概述，比如说，评分为“nice”，我会转到“http://localhost/wordpress/book/rating/nice”。我创建了以下模板文件：taxonomy-rating-nice.php、taxonomy-rating.php 和 taxonomy.php。

但不知何故，wordpress 只显示了 index.php 文件，并没有列出任何书籍。我试过用以下方法刷新重写规则：

```
add_action('init', 'custom_taxonomy_flush_rewrite');
function custom_taxonomy_flush_rewrite() {
    global $wp_rewrite;
    $wp_rewrite->flush_rules();
} 
```

和：

```
flush_rewrite_rules(false); 
```

但似乎没什么帮助。

那么，有人可以帮助我吗？如果您需要更多信息，请告诉我，因为我真的很想解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-28T09:32:55.517

首先转到设置>永久链接并选择您的永久链接到**普通**并保存您的设置。然后转到仪表板并查看您的分类法，然后将您的永久链接设置恢复为帖子名称并保存您的永久链接设置...希望这将解决您的问题...因为您的所有代码和模板现在看起来都很好...希望为你工作

# c++ - std::map 的大小大于调试器中显示的元素数量

> ID：12226791
> 
> 赞同：4
> 
> 时间：2012-09-01T10:03:48.120
> 
> 标签：c++, visual-studio-2010, debugging, map, size

VC2010的调试器中显示的元素数量怎么会小于地图的大小？我有137个元素，它只显示了100个。当我使用printf时，它会全部打印出来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T10:07:15.447

调试器中显示的项目似乎限制为 100 个。Service Pack 1 将此限制增加到 2000 ：

[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/537218/only-100-std-map-elements-in-debugger)的详细信息

# .htaccess - https 到 http 301 通过 htaccess 重定向

> ID：12226795
> 
> 赞同：1
> 
> 时间：2012-09-01T10:04:56.730
> 
> 标签：.htaccess, redirect

我正在尝试将所有 https url 重定向到 http。因为我的新服务器没有启用 ssl。

到目前为止，我尝试跟随，但没有一个起作用。

```
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301] 

RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTPS} on
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:17:01.853

尝试 ：

```
RewriteCond %{HTTPS} =on
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301] 
```

# javascript - 咖啡脚本的gets.chomp？

> ID：12226797
> 
> 赞同：0
> 
> 时间：2012-09-01T10:05:02.300
> 
> 标签：javascript, ruby, coffeescript

在 ruby​​ 中，使用`gets.chomp`，我可以要求用户输入并将其保存为我可以使用的变量。例如...

```
放“你住在哪个城市？”   
城市=gets.chomp  
把“城市是”+城市

```

咖啡脚本（或javascript）中有什么可以做同样的事情吗？我研究了javascript的-- `readline`，，`prompt`...`process.stdin`

这些有点工作，但我找不到如何将用户输入保存为我可以使用和处理以供以后使用的变量的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-01T10:13:21.217

假设您正在编写一个要在控制台（而不是浏览器）上运行的应用程序，这里有几个指针供您参考：

第一个解释了它是如何完成的，使用低级机制：

[http://st-on-it.blogspot.no/2011/05/how-to-read-user-input-with-nodejs.html](http://st-on-it.blogspot.no/2011/05/how-to-read-user-input-with-nodejs.html)

第二个使它可以忍受：

[http://tjholowaychuk.com/post/9103188408/commander-js-nodejs-command-line-interfaces-made-easy](http://tjholowaychuk.com/post/9103188408/commander-js-nodejs-command-line-interfaces-made-easy)

# objective-c - 如何修改 NSMutableArray 中的对象

> ID：12226799
> 
> 赞同：0
> 
> 时间：2012-09-01T10:05:15.153
> 
> 标签：objective-c, xcode, nsmutablearray

我正在尝试创建一个显示来自服务器的事件信息的基本应用程序。
到目前为止，我下载了一个 xml 文件中的所有信息并使用 NSXMLParser 对其进行解析。
我创建了一个事件对象，它存储每个事件的所有信息，然后用这些事件填充 NSMutableArray。
然后，我想在每个 UITableView Cell 显示时异步加载与每个事件相关的图像，并将它们存储在位于 NSMutableArray 内的事件对象中的 NSData 中。这样我只会加载我需要的图像。
我的 NSMutableArray 的布局看起来像这样（简化）：

```
events
      -event1
            -(NSString *)title
            -(NSURL *)imageURL
            -(NSData *)eventData
      -event2
            -(NSString *)title
            -(NSURL *)imageURL
            -(NSData *)eventData
etc.. 
```

我不知道这里的最佳做法是什么，并且正在努力使其发挥作用。

*   选项 1
    我可以尝试直接从 MasterViewController 设置它，这对我来说似乎不正确，并且出现错误。如果我使用代码

    ```
    [[events objectAtIndex:cellIndexPath.row] eventImageData] = [[NSData alloc] initWithContentsOfURL:[[events objectAtIndex:cellIndexPath.row] eventImgURL]]; 
    ```

我得到错误：`expression not assignable`

*   选项 2
    我可以在事件对象本身中编写一个方法来下载图像。我这样做了，并且在我的一生中无法让事件对象要求 MasterViewController 在完成获取图像后刷新适当的 NSTableViewCell 。

我的问题是，我的思路是否正确？我可以在 NSMutableArray 的对象内分配一个新的 NSData 吗？还是我在正确的轨道上要求事件对象下载它自己的图像？
感谢您花时间阅读这个冗长的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:08:54.150

您不能使用 getter 方法来设置属性，而必须使用 setter 方法：

```
[[events objectAtIndex:cellIndexPath.row] setEventImageData:[[NSData alloc] initWithContentsOfURL:[[events objectAtIndex:cellIndexPath.row] eventImgURL]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:27:38.737

在 NSMutableArray 中修改对象的另一种方法是：

```
if([[events objectAtIndex:cellIndexPath.row] count] >=2)
{
  [[events objectAtIndex:cellIndexPath.row] replaceObjectAtIndex:2  withObject:[[NSData alloc] initWithContentsOfURL:[[events objectAtIndex:cellIndexPath.row] eventImgURL]];
} 
```

# usb - linux上的虚拟串行端口（如ttyUSB0）是否有IRQ？

> ID：12226801
> 
> 赞同：0
> 
> 时间：2012-09-01T10:05:30.410
> 
> 标签：usb, serial-port, virtual-serial-port, irq

我正在从 Linux 下的虚拟串口读取数据（连接的设备是 xbee 模块）

目前，读取是通过检查端口缓冲区的线程完成的。但是在很多设备的情况下，这并不好，因为一个端口上的数据可能每毫秒出现一次，另一个端口每秒出现一次，因此它成为 CPU 的负担。

我想知道是否有类似中断的东西，只有在新数据可用时才会触发事件（我知道这个主体适用于微控制器）。

如何在 C++ 中做到这一点？

我不知道如何使用这些信息，因为我缺乏知识。如果我有这样的事情：

```
while(1){

   int n= PollComport(comport_number, buf, 4095);
   if(n>0){
   //make somemthing with the new data
   }
} 
```

我想删除while循环。我在哪里以及如何使用 epoll_wait？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:11:25.227

这不是你的问题。操作系统就是这样做的。只需使用阻塞读取或某种 I/O 多路复用（如`select`或`epoll_wait`）。你不需要做任何特别的事情。

# .net - 用于验证文本中唯一单词的正则表达式

> ID：12226804
> 
> 赞同：0
> 
> 时间：2012-09-01T10:06:09.897
> 
> 标签：.net, regex

我需要正则表达式来验证文本中所有单词的文本必须是唯一的。例如我的文字会像

**有效文本->** “高级|付费|常规|下一个”

**无效文本->** “Advance|Paid|Paid|Regular|Next|Advance”

话是不能解决的，它可以是任何事情。

请帮助我如何在.net中实现它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:09:48.970

我不认为你可以用正则表达式来实现这一点，除非单词列表是明确已知的（比如在枚举中）。

但是，在 .Net 中，您可以通过多种其他方式非常轻松地做到这一点。

对于初学者，让我们试试 C# 和 Linq：

```
using System;
using System.Linq;

string myText = "aaa|bbb|ccc|aaa";
var parts = myText.Split('|');
var uniques = parts.Distinct();
if(uniques.Count() != parts.Length) throw new ArgumentException("Not unique!"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T10:11:17.683

我不确定.net，但是一个正则表达式会找到一个单词，然后是另一个匹配的单词：

```
\b(\w+)\b.*\b\1\b 
```

也就是说，一个分词符、一个单词字符序列、一个分词符、任意数量的任何字符（换行符除外），然后重复这个词，并在其周围加上分词符。

并非所有正则表达式引擎都允许 \1 引用同一正则表达式中的先前匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T10:12:40.167

这对 LinQ 来说很简单

```
string curText = "Advance|Paid|Paid|Regular|Next|Advance";
string valid = string.Join("|", curText.Split('|').Distinct());
if(valid.Length != curText.Length)  
    // error..... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T10:57:15.073

是的，可以使用反向引用：

```
(?:^|\|)([a-z]+)\|.+\|\1(?:\||$) 
```

这将匹配具有重复单词的表达式，并将单词的第一个实例作为一个组。要么否定它以查看单词是否重复，或者使用替换来删除单词。

要使用空格而不是`|`：

```
\b([a-z]+)\b.+\b\1\b 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T10:09:18.470

为什么要为此使用 RegEx？只需检查输入中字符串 X 的出现次数并检查它是否最多为 1。在您的示例中拆分为“|” 应该很容易（可以通过 RegEx 完成，但简单地标记字符串应该更容易）。

# watir - 为什么“click_no_wait”比“click”慢？

> ID：12226809
> 
> 赞同：2
> 
> 时间：2012-09-01T10:06:42.750
> 
> 标签：watir

在我单击具有“click_no_wait”方法的按钮后，在发生任何事情之前都会延迟近一秒钟......为什么会这样？

这是一个示例（按钮的黄色闪烁和弹出窗口之间的明显延迟）：

```
require 'watir'
b = Watir::Browser.start "www.w3schools.com/js/tryit.asp?filename=tryjs_alert"
b.frame(:name, "view").button(:text, "Show alert box").click_no_wait 
```

如果我将“click_no_wait”替换为“click”，则单击按钮后不会有任何延迟（弹出窗口会立即显示）。但是这里不能使用“点击”，因为脚本会挂起......

这种延迟有什么解决办法吗？（真的不是什么大问题，只是问......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:14:24.210

它启动一个单独的进程。

好处是它可以防止挂起，因为主进程可以立即处理。不利的一面是，建立一个流程本身需要时间。

这是在任何使用单独进程或单独线程的任何语言中都可以找到的平衡——在某些情况下提高了响应能力和提高了性能，但本身就有开销。

您可能会发现感兴趣的[http://itreallymatters.net/post/1366392123/debugging-and-improving-watirs-click-no-wait-method](http://itreallymatters.net/post/1366392123/debugging-and-improving-watirs-click-no-wait-method)。

# iphone - 应用程序 iPhone-sdk 中的多个 facebook 登录

> ID：12226810
> 
> 赞同：0
> 
> 时间：2012-09-01T10:06:49.610
> 
> 标签：iphone, facebook, facebook-graph-api, ios4

我在我的应用程序中使用 FBConnect。它有四个按钮，我希望 4 个用户根据按钮单击在单个应用程序和单个设备中使用我们不同的 facebook 登录。并且在登录后它没有再次询问用户名密码。所以请任何人都可以建议我如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:21:14.650

在浏览器中多次登录 Facebook 是可能的。请参阅[此处](http://www.facebook.com/note.php?note_id=161914247160203)进行多次登录。

但是 Facebook 一次支持一次登录。除非在浏览器中出于登录目的使用某些技巧或代理服务器。

但是**Facebook API**身份验证一次只能处理一个访问令牌（一次登录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:44:24.090

FBConnect 将允许一次登录。一旦启动另一个会话（登录），最后一个会话将不再有效。

# r - 如何将使用 ggplot2 制作的绘图保存为 SVG

> ID：12226822
> 
> 赞同：72
> 
> 时间：2012-09-01T10:08:39.407
> 
> 标签：r, svg, ggplot2

**我想保存使用ggplot2**作为**SVG**制作的堆叠区域图（可以在[此处](https://stackoverflow.com/questions/12196529/how-to-name-sections-on-x-axis-that-are-seperated-by-vertical-lines-in-an-r-plot)找到带有代码的绘图示例） 。尝试使用**Cairo 套餐**，但结果很糟糕。

 ******```
library(ggplot2)
library(grid)
library(Cairo)
...

#png(output_file, width=800, height=400)
Cairo(800,400,file=paste(output_file, ".svg", sep=""),type="svg",bg="transparent",pointsize=8, units="px",dpi=400)

gt <- ggplot_gtable(ggplot_build(p))
gt$layout$clip[gt$layout$name=="panel"] <- "off"
grid.draw(gt)

dev.off() 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-25T16:07:32.117

使用 ggsave 函数将使用 ggplot2 制作的绘图保存为 SVG 非常简单。

但是，可能需要 ggplot2 之外的其他软件包，例如 svglite。

一些示例代码：

```
 require("ggplot2")
#some sample data
    head(diamonds) 
#to see actually what will be plotted and compare 
    qplot(clarity, data=diamonds, fill=cut, geom="bar")
#save the plot in a variable image to be able to export to svg
    image=qplot(clarity, data=diamonds, fill=cut, geom="bar")
#This actually save the plot in a image
    ggsave(file="test.svg", plot=image, width=10, height=8) 
```

希望对你有效。******

# backbone.js - 在渲染之前准备好所有资源

> ID：12226824
> 
> 赞同：0
> 
> 时间：2012-09-01T10:08:45.073
> 
> 标签：backbone.js

在主干中渲染视图时，您需要准备好几个资源。如果你想制作下拉列表，它可以是国家、城市和邮政编码的列表。我想知道什么是正确的方法，以便每次调用渲染函数时所有资源都准备好？

我正在考虑使用默认渲染事件，我可能会像这样使用延迟的 Jquery？

```
render: function(){
    var listofajaxcall = setupResource(); //returns array of ajax call
    var self = this;
    $.when(listofajaxcall){
    }.done(){
       self.rendering();
    }
},
rendering: function(){
   //do something 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:27:37.493

这是一种方法，也是一种常见的解决方案。

从`setupResource`调用中返回一个 Promise 将允许延迟视图渲染，直到资源准备好。

您可能还想做的一件事是从您的`rendering`方法中触发一个事件来说明视图何时完成渲染：

```
 render: function(){
    var listofajaxcall = setupResource(); //returns array of ajax call
    var self = this;
    $.when(listofajaxcall){
    }.done(){
       self.rendering();
    }
},
rendering: function(){
   //do something 

   // after it's done...
   this.trigger("rendered");
} 
```

这样，您可以侦听呈现的事件并调用需要在呈现视图后运行的其他代码。

我更喜欢的另一种方式是在视图之外设置代码，这样视图就不必处理异步代码。

```
 var foo = {

  bar: function(){

    var listofajaxcall = setupResource();

    var self = this;
    $.when(listofajaxcall).then(someResource){

       var view = new MyView({
         someResource: someResource
       });
       view.render();
       $("#whatever").html(view.el);

    }
  }

}

foo.bar(); 
```

在这个版本的代码中，视图对异步一无所知。它是控制应用程序中逻辑流的代码。这样做的缺点是，如果您想在屏幕上显示“正在加载...”消息，您必须先渲染另一个视图。这是值得的 IMO，因为它使正在完成的工作流程更加明确。

# crm - 在 openerp 中验证不同的复选框

> ID：12226826
> 
> 赞同：0
> 
> 时间：2012-09-01T10:08:59.580
> 
> 标签：crm, openerp, erp

我是 OpenERP 的新手。我正在研究 CRM 模块。我在 Bug 模块上创建，它实际上是由`crm_claim`. 我已经添加了一些额外的字段（其中的复选框）。它工作正常。
我对 OpenERP 的体验非常好。但我被困在验证点上。实际上我想要的是如果没有单击复选框，用户将无法保存记录。如果单击其中之一，则应保存记录。我已经搜索过互联网。我找不到任何确定的解决方案，但有一些模棱两可的解决方案。这是列表：-
一些帖子建议覆盖写入和创建。但我的问题是，我继承自`crm_claim`，我在层次结构中的任何地方都没有找到 write 和 create 函数。如果我覆盖它们，我必须编写所有逻辑来保存整个声明和以上类。这让我感到非常困难。

1.  我试图找到`onsave`事件，但我没有找到任何事件。
2.  有人建议使用向导来解决此问题。

我不知道该怎么办。请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:48:21.610

您不必重写 create 或 write 函数。因为重写这样的核心功能是不可取的，除非你没有任何选择。

在这种情况下，您可以选择。

请参考销售模块 addons/stock/stock.py

你会发现 _constraints，你可以使用相同的 . 它只会检查选定字段的值何时更改。它也有异常引发设施。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T13:38:51.203

`write`and`create`方法继承自 osv.osv 模型，该模型在 .osv 中的类`BaseModel`中实现`server/openerp/osv/orm.py`。

您不需要复制逻辑，只需调用原始方法即可。

例如，在您的模型中，添加以下方法：

```
def create(self, cr, uid, vals, context=None):
    """
    Override osv.create() method to validate the data
    """
    if not (vals['attr1'] or vals['attr2'] or vals['attr3']:
        raise osv.except_osv(_('Warning !'),_("You have to choose at least one attribute"))

    return super(my_model, self).create(cr, uid, vals, context) 
```

# entity-framework - 在配置中找不到指定的商店提供程序，或无效

> ID：12226842
> 
> 赞同：0
> 
> 时间：2012-09-01T10:10:52.883
> 
> 标签：entity-framework, exception, sql-server-ce, syntax-error

我在 SQL Server CE 3.5 中使用实体框架，但出现此错误

**在配置中找不到指定的商店提供程序，或无效。**

```
<Schema Namespace="OimDBModel.Store" Alias="Self" Provider="System.Data.SqlServerCe.3.5" ProviderManifestToken="3.5" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
    <EntityContainer Name="OimDBModelStoreContainer">
      <EntitySet Name="OfflineMessages" EntityType="OimDBModel.Store.OfflineMessages" store:Type="Tables" />
    </EntityContainer>
  </Schema></edmx:StorageModels> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:42:38.550

签出[此](https://stackoverflow.com/a/2542055/1099260)答案以创建所有必需的 Sql CE 3.5 程序集的本地副本。那应该可以解决您的问题

# javascript - Backbone.Router 接受查询和路径

> ID：12226843
> 
> 赞同：0
> 
> 时间：2012-09-01T10:11:03.980
> 
> 标签：javascript, regex, backbone.js, router, backbone-routing

我希望我的 Backbone.Router 实例监听诸如“#/settings”和“#/settings/privacy”之类的 hashbang

目前我这样处理这个问题：

```
var Router = Backbone.Router.extend({

    routes: {
         "settings": "settings",
         "settings/:query": "settings"
    },

    settings: function(query) {
        // do the routing
    }

}); 
```

我现在只想在一条路线上完成这一切。不幸的是 'settings/:query' 只允许 'settings/'

有人知道如何处理这个吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T18:58:15.533

你在这里有一些选择。`#settings/`如果您对（注意最后的斜线）和 之类的路线感到满意`#settings/privacy`，那么您可以使用它：

```
routes: {
    'settings/*query': 'settings'
} 
```

演示：http: [//jsfiddle.net/ambiguous/m7ufD/](http://jsfiddle.net/ambiguous/m7ufD/)

但这不起作用`#settings`，最后的斜线对于该路线的工作是必要的。

如果您没有任何类似的路线`#settings-something-else`，那么您可以这样做：

```
routes: {
    'settings*query': 'settings'
} 
```

演示：http: [//jsfiddle.net/ambiguous/MudaG/](http://jsfiddle.net/ambiguous/MudaG/)

这也将匹配类似的东西`#settingsandstuff`，它会在路由处理程序的参数中留下斜杠（即函数将得到`'/privacy'`而不是仅仅`'privacy'`）。

最灵活的选择是[`route`](http://backbonejs.org/#Router-route)直接使用正则表达式，然后您可以匹配`#settings`并`#settings/privacy`使用单个路由，而不会出现上述任何一个问题：

```
// No routes, do it in initialize instead
initialize: function() {
    this.route(/^settings(?:\/(.*)|)$/, 'settings');
} 
```

演示：http: [//jsfiddle.net/ambiguous/XGrQz/](http://jsfiddle.net/ambiguous/XGrQz/)

那将不匹配`#settings-and-stuff`，并且它不会在函数的参数中包含前导斜杠`#settings/privacy`。

# python - 计算两个字符串的字母差异

> ID：12226846
> 
> 赞同：20
> 
> 时间：2012-09-01T10:11:23.697
> 
> 标签：python

这是我想要的行为：

```
a: IGADKYFHARGNYDAA
c: KGADKYFHARGNYEAA
2 difference(s). 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-01T10:15:38.780

```
def diff_letters(a,b):
    return sum ( a[i] != b[i] for i in range(len(a)) ) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-01T11:01:07.713

I think this example will work for your specific case without too much hassle and without hitting interoperability issues with your python software version (upgrade to 2.7 please):

```
a='IGADKYFHARGNYDAA'
b='KGADKYFHARGNYEAA'

u=zip(a,b)
d=dict(u)

x=[]
for i,j in d.items(): 
    if i==j:
        x.append('*') 
    else: 
        x.append(j)

print x 
```

**Outputs:** `['*', 'E', '*', '*', 'K', '*', '*', '*', '*', '*']`

* * *

With a few tweaks, you can get what you want....Tell me if it helps :-)

* * *

**Update**

You can also use this:

```
a='IGADKYFHARGNYDAA'
b='KGADKYFHARGNYEAA'

u=zip(a,b)
for i,j in u:
    if i==j:
        print i,'--',j
    else: 
        print i,'  ',j 
```

***Outputs:***

```
I    K
G -- G
A -- A
D -- D
K -- K
Y -- Y
F -- F
H -- H
A -- A
R -- R
G -- G
N -- N
Y -- Y
D    E
A -- A
A -- A 
```

**Update 2**

You may modify the code like this:

```
y=[]
counter=0
for i,j in u:
    if i==j:
        print i,'--',j
    else: 
        y.append(j)
        print i,'  ',j

print '\n', y

print '\n Length = ',len(y) 
```

* * *

***Outputs:***

```
I    K
G -- G
A -- A
D -- D
K -- K
Y -- Y
F -- F
H -- H
A -- A
R -- R
G -- G
N -- N
Y -- Y
D    E
A -- A
A    X

['K', 'E', 'X']

 Length =  3 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-01T10:25:48.173

## 理论

1.  同时迭代两个字符串并比较字符。
2.  通过分别向其添加空格键或`|`字符，将结果与新字符串一起存储。此外，为每个不同的字符增加一个从零开始的整数值。
3.  输出结果。

## 执行

You can use the built-in [`zip`](http://docs.python.org/library/functions.html?highlight=zip#zip) function or [`itertools.izip`](http://docs.python.org/library/itertools.html?highlight=itertools.izip#itertools.izip) to simultaneously iterate over both strings, while the latter is a little more performant in case of huge input. If the strings are not of the same size, iteration will only happen for the shorter-part. If this is the case, you can fill up the rest with the no-match indicating character.

```
import itertools

def compare(string1, string2, no_match_c=' ', match_c='|'):
    if len(string2) < len(string1):
        string1, string2 = string2, string1
    result = ''
    n_diff = 0
    for c1, c2 in itertools.izip(string1, string2):
        if c1 == c2:
            result += match_c
        else:
            result += no_match_c
            n_diff += 1
    delta = len(string2) - len(string1)
    result += delta * no_match_c
    n_diff += delta
    return (result, n_diff) 
```

## Example

Here's a simple test, with slightly different options than from your example above. Note that I have used an underscore for indicating non-matching characters to better demonstrate how the resulting string is expanded to the size of the longer string.

```
def main():
    string1 = 'IGADKYFHARGNYDAA AWOOH'
    string2 = 'KGADKYFHARGNYEAA  W'
    result, n_diff = compare(string1, string2, no_match_c='_')

    print "%d difference(s)." % n_diff  
    print string1
    print result
    print string2

main() 
```

Output:

```
niklas@saphire:~/Desktop$ python foo.py 
6 difference(s).
IGADKYFHARGNYDAA AWOOH
_||||||||||||_|||_|___
KGADKYFHARGNYEAA  W 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-01T10:14:02.223

Python 具有出色的[`difflib`](http://docs.python.org/library/difflib.html)，它应该提供所需的功能。

以下是文档中的示例用法：

```
import difflib  # Works for python >= 2.1

>>> s = difflib.SequenceMatcher(lambda x: x == " ",
...                     "private Thread currentThread;",
...                     "private volatile Thread currentThread;")
>>> for block in s.get_matching_blocks():
...     print "a[%d] and b[%d] match for %d elements" % block
a[0] and b[0] match for 8 elements
a[8] and b[17] match for 21 elements
a[29] and b[38] match for 0 elements 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-17T11:19:11.407

```
a = "IGADKYFHARGNYDAA" 
b = "KGADKYFHARGNYEAAXXX"
match_pattern = zip(a, b)                                 #give list of tuples (of letters at each index)
difference = sum (1 for e in zipped if e[0] != e[1])     #count tuples with non matching elements
difference = difference + abs(len(a) - len(b))            #in case the two string are of different lenght, we add the lenght difference 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-07T13:21:32.087

I haven't seen anyone use the `reduce` function, so I'll include a piece of code I've been using:

```
reduce(lambda x, y: x + 1 if y[0] != y[1] else x, zip(source, target), 0) 
```

which will give you the number of differing characters in `source` and `target`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-10T14:54:06.093

With [difflib.ndiff](https://docs.python.org/2/library/difflib.html#difflib.ndiff) you can do this in a one-liner that's still somewhat comprehensible:

```
>>> import difflib
>>> a = 'IGADKYFHARGNYDAA'
>>> c = 'KGADKYFHARGNYEAA'
>>> sum([i[0] != ' '  for i in difflib.ndiff(a, c)]) / 2
2 
```

(`sum` works here because, well, kind of `True == 1` and `False == 0`)

The following makes it clear what's happening and why the `/ 2` is needed:

```
>>> [i for i in difflib.ndiff(a,c)]
['- I',
 '+ K',
 '  G',
 '  A',
 '  D',
 '  K',
 '  Y',
 '  F',
 '  H',
 '  A',
 '  R',
 '  G',
 '  N',
 '  Y',
 '- D',
 '+ E',
 '  A',
 '  A'] 
```

This also works well if the strings have a different length.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-25T13:04:00.310

When looping through one string, make a counter object that identifies the letter you are on at each iteration. Then use this counter as an index to refer to the other sequence.

```
a = 'IGADKYFHARGNYDAA'
b = 'KGADKYFHARGNYEAA'

counter = 0
differences = 0
for i in a:
    if i != b[counter]:
        differences += 1
    counter += 1 
```

Here, each time we come across a letter in sequence a that differs from the letter at the same position in sequence b, we add 1 to 'differences'. We then add 1 to the counter before we move onto the next letter.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-09T15:43:12.193

I like [the answer](https://stackoverflow.com/a/12226960/828547) from Niklas R, but it has an issue (depending on your expectations). Using the answer with the following two test cases:

```
print compare('berry','peach')
print compare('berry','cherry') 
```

We may reasonable expect **cherry** to be more similar to **berry** than to **peach**. Yet the we get a lower diff between **berry** and **peach**, then **berry** and **cherry**:

```
(' |   ', 4)  # berry, peach
('   |  ', 5) # berry, cherry 
```

This occurs when strings are more similar backwards, than forwards. To extend the answer from answer from Niklas R, we can add a helper function which returns the minimum diff between the normal (forwards) diff and a diff of the reversed strings:

```
def fuzzy_compare(string1, string2):
    (fwd_result, fwd_diff) = compare(string1, string2)
    (rev_result, rev_diff) = compare(string1[::-1], string2[::-1])
    diff = min(fwd_diff, rev_diff)
    return diff 
```

Use the following test cases again:

```
print fuzzy_compare('berry','peach')
print fuzzy_compare('berry','cherry') 
```

...and we get

```
4 # berry, peach
2 # berry, cherry 
```

As I said, this really just **extends**, rather than **modifies** the answer from Niklas R.

If you're just looking for a simple diff function (taking into consideration the aforementioned gotcha), the following will do:

```
def diff(a, b):
    delta = do_diff(a, b)
    delta_rev = do_diff(a[::-1], b[::-1])
    return min(delta, delta_rev)

def do_diff(a,b):
    delta = 0
    i = 0
    while i < len(a) and i < len(b):
        delta += a[i] != b[i]
        i += 1
    delta += len(a[i:]) + len(b[i:])
    return delta 
```

Test cases:

```
print diff('berry','peach')
print diff('berry','cherry') 
```

One final consideration is of the diff function itself when handling words of different lengths. There are two options:

1.  Consider the difference between lengths as difference characters.
2.  Ignore the difference in length and compare only shortest word.

For example:

*   **apple** and **apples** have a difference of 1 when considering all characters.
*   **apple** and **apples** have a difference of 0 when considering only the shortest word

When considering only the shortest word we can use:

```
def do_diff_shortest(a,b):
    delta, i = 0, 0
    if len(a) > len(b):
        a, b = b, a
    for i in range(len(a)):
        delta += a[i] != b[i]
    return delta 
```

...the number of iterations is dictated by the shortest word, everything else is ignored. Or we can take into consideration different lengths:

```
def do_diff_both(a, b):
    delta, i = 0, 0
    while i < len(a) and i < len(b):
        delta += a[i] != b[i]
        i += 1
    delta += len(a[i:]) + len(b[i:])
    return delta 
```

In this example, any remaining characters are counted and added to the diff value. To test both functions

```
print do_diff_shortest('apple','apples')
print do_diff_both('apple','apples') 
```

Will output:

```
0 # Ignore extra characters belonging to longest word.
1 # Consider extra characters. 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-15T20:21:26.903

Here is my solution to a similar problem comparing two strings based on the solution presented here: [https://stackoverflow.com/a/12226960/3542145](https://stackoverflow.com/a/12226960/3542145) .

Since itertools.izip did not work for me in Python3, I found the solution which simply uses the zip function instead: [https://stackoverflow.com/a/32303142/3542145](https://stackoverflow.com/a/32303142/3542145) .

The function to compare the two strings:

```
def compare(string1, string2, no_match_c=' ', match_c='|'):
    if len(string2) < len(string1):
        string1, string2 = string2, string1
    result = ''
    n_diff = 0
    for c1, c2 in zip(string1, string2):
        if c1 == c2:
            result += match_c
        else:
            result += no_match_c
            n_diff += 1
    delta = len(string2) - len(string1)
    result += delta * no_match_c
    n_diff += delta
    return (result, n_diff) 
```

Setup the two strings for comparison and call the function:

```
def main():
    string1 = 'AAUAAA'
    string2 = 'AAUCAA'
    result, n_diff = compare(string1, string2, no_match_c='_')
    print("%d difference(s)." % n_diff)
    print(string1)
    print(result)
    print(string2)

main() 
```

Which returns:

```
1 difference(s).
AAUAAA
|||_||
AAUCAA 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-21T02:05:50.743

Here is my solution. This compares 2 strings, it doesn't matter what you put in A or B.

```
#Declare Variables
a='Here is my first string'
b='Here is my second string'
notTheSame=0
count=0

#Check which string is bigger and put the bigger string in C and smaller string in D
if len(a) >= len(b):
    c=a
    d=b
if len(b) > len(a):
    d=a
    c=b

#While the counter is less than the length of the longest string, compare each letter.
while count < len(c):
    if count == len(d):
        break
    if c[count] != d[count]:
        print(c[count] + " not equal to " + d[count])
        notTheSame = notTheSame + 1
    else:
        print(c[count] + " is equal to " + d[count])
    count=count+1

#the below output is a count of all the differences + the difference between the 2 strings
print("Number of Differences: " + str(len(c)-len(d)+notTheSame)) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-10T01:50:59.830

```
diff = 0
for i, j in zip(a, b): 
    if i != j: diff += 1
print(diff) 
```

# android - 保存后完成活动

> ID：12226850
> 
> 赞同：0
> 
> 时间：2012-09-01T10:11:41.477
> 
> 标签：android, android-activity, activity-finish

我正在使用 SharedPreferences。我遇到的问题是，当我按下返回按钮退出应用程序时，它会将我带回首选项屏幕。

如何防止它并在不访问此屏幕的情况下退出应用程序？

除了 SharedPreferences，我只有一项活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:20:13.810

使用完后只需调用`finish()`Activity 即可。这会杀死您的 SharedPreference Activity 并且在您按下 BackButton 时不会返回它。

另一种方法可能是不在堆栈中保留活动的历史记录。

```
android:noHistory="true" 
```

另外，您可能想尝试`intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP)`

# java - 为什么我可以在不丢失信息的情况下存储实现“在”该接口中的接口的类的实例？

> ID：12226852
> 
> 赞同：0
> 
> 时间：2012-09-01T10:12:09.340
> 
> 标签：java, syntax, casting

让我们看一下这段代码：

```
package rpg;

interface A {
    // An empty interface
}

public class WarriorClass extends CharacterClass implements A {

    final int bab;
    public WarriorClass(int a) {
        bab = a;
    }

    public static void main(String[] args) {
        A a = new WarriorClass(1);
        System.out.println(((WarriorClass) a).bab);
    }
} 
```

第一个问题：为什么可以使用接口`A`作为类型`a`？第二个问题：既然 A 不知道 iVar`bab`为什么不知道

```
System.out.println(((WarriorClass) a).bab); 
```

打印正确的值`1`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:16:37.577

您不会将类存储在接口“中”。您正在**将对该类的引用存储在**接口类的变量中。

Java 仅适用于引用。都具有相同的长度（如 C 中的指针）。引用是类型化的，因​​此您必须为其分配一个适当类的对象。

至于关系，扩展一个类或实现一个接口意味着新的类对象也属于原来的类。所以所有对象都是`Object`. 由于通过扩展/实现您确认新类遵循超类/接口的合同（规范），它们确实属于它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:28:27.803

你想在解释中走多低？

停留在类比的层面上，`A a`意味着“这是一个我可以插入任何 a/implements A 的地方。有一种方法可以让它适应。

由于您创建的对象实现了该接口，因此它将起作用。

在这一点上，任何可以用 any 完成的事情`A`都可以安全地完成`a`（安全因为它不会使整个事情崩溃，如果 eg`a`为空，它仍然可以抛出异常，但你不能欺骗编译器生成调用没有该`A`方法的对象上的方法的代码）。

稍后您再次使用`((WarriorClass)a)`. 这将检查发生在 中的任何内容`a`。如果为空，则结果为空。如果它是一个确实是 a 的对象`WarriorClass`，那么结果就是该对象，按原样访问。如果它是 的另一个实现`A`，则会出现异常。

在较低的级别，在这两种情况下都有一个引用存储在`a`. 编译器将确保您不会做绝对不可能的事情（`A a = "abcde";`例如），并且引用实际上只是一个数字（毕竟一切都在计算机中），它可以访问该对象。

当您调用任何`A`方法时，该数字将与任何参数一起传递给该方法（它是该方法的`this`来源）。

当您进行强制转换时，对象会按上述方式进行检查。结果是另一个允许访问对象的数字（可能是同一个），但这次程序知道该数字指的是 a `WarriorClass`（或 null）。因此，代码可以调用`.bab`它。它不会导致不可能的情况：如果它为 null，则正常检查会发现，如果`a`不是真的是 a `WarriorClass`，那么当你尝试施法时就会抛出。在这一点上，程序 100% 确定地知道它不可能是另一个类也实现了`A`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:16:35.403

回答第一个问题：变量可以声明为一个类型，并实例化为声明变量的子类型。

回答第二个问题：您正在进行强制转换，这意味着您明确地说变量 a 是您进行强制转换的类型，因此您可以使用/调用可以在您所在的上下文中访问的任何变量或方法.

# sharepoint - 我在 SharePoint 2010 功能区上缺少页面布局按钮

> ID：12226856
> 
> 赞同：3
> 
> 时间：2012-09-01T10:13:14.510
> 
> 标签：sharepoint, sharepoint-2010, edit, page-layout

当我想在浏览器中编辑页面时，我在 SharePoint 2010 的顶部功能区中看不到“页面布局”按钮！我搜索了三个小时关于这个问题，但我没有找到任何解决方案。请告诉我如何解决此问题或检查一些设置。（我在功能中激活发布，并且 SP 设计器在左侧导航中向我显示页面布局链接）。

[![](../Images/82f7422a47387eae344447797aebfd8f.png)](https://i.stack.imgur.com/V2R0T.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T05:11:43.360

您必须创建一个发布页面来操作页面布局。此页面不是发布页面，而是 wiki 页面。

转到**站点操作**-->**更多选项**-->**发布页面**。然后您将能够看到该选项。

然后，当您尝试编辑发布页面时，您将在那里看到页面布局按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T18:32:07.740

问题是未启用允许布局的功能。

要解决此问题，请转到左上角的**站点操作**->**站点设置。**

在**“网站集管理”**下，单击**“网站集功能”**。

查找*“SharePoint Server Publishing Infrastructure”*并激活它。加载可能需要一点时间。

接下来返回**“站点设置”**并单击**“管理站点功能”**

查找*“SharePoint Server Publishing”*并激活它。加载可能需要一点时间。

**笔记：**

如果您的设置中没有“网站集管理”部分，您可以尝试跳到下一部分。但是，如果网站集未启用此功能，则尝试在网站上激活它时会出现错误。您将需要进入网站集的选项。

创建新网站后，您可以进入网站功能并再次启用 SharePoint Server 发布。这在空白网页上运行良好，因此不需要发布页面/站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:11:07.470

转到站点功能并停用 wiki 主页功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T23:48:27.470

在 SharePoint 2010 的网站中创建的默认页面类型不是发布功能的一部分。即使在启用发布功能之后，您仍在尝试基于非发布内容类型创建页面。您很可能尝试将页面添加到“站点页面”库。这就是按钮不存在的原因。

您需要转到站点操作-> 站点设置-> 页面布局和站点模板，并将默认模板设置为发布页面。和/或您需要将页面添加到由发布功能创建的“页面”库中，因为它将支持不同的页面布局。

# twitter-bootstrap - 是否可以选择跨度的堆叠顺序？

> ID：12226859
> 
> 赞同：11
> 
> 时间：2012-09-01T10:13:32.153
> 
> 标签：twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap 开始一个项目，并且非常喜欢响应式 css，当视口变小时，跨度堆叠在彼此之上。

鉴于以下设计：http: [//jsfiddle.net/kJp6J/1/](http://jsfiddle.net/kJp6J/1/)

![推特响应式设计](../Images/eb4b9785a0e7a1e25dec291c277c6608.png)

是否可以选择在小屏幕上首先堆叠哪个块？就我而言，我希望首先出现右侧的块，然后是左侧的块。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-01T11:14:17.710

## HTML

用 包裹你的内容`.container`，把那个大块放在第一位，添加它，`.pull-right`使它看起来正确：

```
<div class="container">
  <div class="row">
    <div class="span4 pull-right">
      <img src="http://placehold.it/280x180">
    </div>
    <div class="span8">
      <!-- ... -->
    </div>
  </div>
</div> 
```

# CSS

在移动设备上时，将其放在应有的位置`float:none`：

```
@media (max-width: 767px) {
  [class*="span"].pull-right {
    float: none;
} 
```

这是[小提琴](http://jsfiddle.net/kJp6J/4/)，我希望它能像你想要的那样工作。

# c# - 使用 XAML 更改 UserControl 属性

> ID：12226868
> 
> 赞同：1
> 
> 时间：2012-09-01T10:14:30.593
> 
> 标签：c#, wpf, xaml, properties, user-controls

我有我的`UserControl`

```
<UserControl x:Class="CustomCtrl.MyButton">
   <Button x:Name="Btn" />
</UserControl> 
```

我用我`UserControl`的`Window`

```
<Window>
    <Grid>
        <MyButton Background="Aqua" />
    </Grid>
</Window> 
```

我想使用**带有 XAML**的 my的属性来更改`Background`Button`Btn`的属性。`Background``UserControl`

 **我尝试添加`Background`属性

```
public class MyButton: UserControl
{
    public new Brush Background
    {
        get
        { return Btn.GetValue(BackgroundProperty) as Brush; }

        set
        { Btn.SetValue(BackgroundProperty, value); }
    }        
} 
```

但它没有效果。
相反，如果我使用代码`MyButtonControl.Background = Brushes.Aqua;`，它可以工作。
为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:06:08.877

istake`UserControl.Background`不是自定义控件，您无法控制如何使用此*属性*。`UserControls`如果您只想更改一个控件的背景，您可以公开一个新的依赖属性并将其绑定到`Button.Background`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T10:57:46.320

在我看来，您有两种选择：

1.  简单的方法，只需将“Btn”背景设置为透明，如下所示：

    ```
    <UserControl x:Class="CustomCtrl.MyButton">
          <Button x:Name="Btn" Background="Transparent"/>
    </UserControl> 
    ```

2.  另一种方法是将按钮的背景颜色绑定到控件的背景颜色：

    ```
    <UserControl x:Class="CustomCtrl.MyButton" x:Name="control">
          <Button x:Name="Btn" Background="{Binding Background, ElementName=control}"/>
    </UserControl> 
    ```

两者都进行了测试，似乎有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:58:30.923

和

```
<Window>
    <Grid>
        <MyButton Background="Aqua" />
    </Grid>
</Window> 
```

您正在设置`UserControl`. 要设置的背景颜色，`Button`你必须

```
<UserControl x:Class="CustomCtrl.MyButton">
   <Button x:Name="Btn" Background="Aqua" />
</UserControl> 
```

编辑（在 OP 评论之后）：您无法修改`UserControl.Background`，但有一个新属性有效：

```
public Brush ButtonBackground {
    get {
        return this.Btn.Background;
    }
    set {
        this.Btn.Background = value;
    }
} 
```

接着：

```
<Window>
    <Grid>
        <MyButton ButtonBackground="Aqua" />
    </Grid>
</Window> 
```**

# javascript - 使用文件夹路径名，保存所有图像文件和文件名

> ID：12226870
> 
> 赞同：8
> 
> 时间：2012-09-01T10:14:35.643
> 
> 标签：javascript, save, directory, adobe-indesign, pathname

我试图从 In Design-to-HTML 转换创建一个 360 度动画。

我得到文件夹名称，该文件夹内有 50 到 80 张图像。我需要将这些图像保存在我的文件夹中，并将每个图像名称保存在脚本中。

这是我的代码：

```
var doc = app.activeDocument;
for (var j =0; j< doc.rectangles.length; j++) {  
    var nav = doc.rectangles[j].extractLabel("",);
    alert("Nav length "+nav.length);   
    for(var nav_get_name =0; nav_get_name < nav.length; nav_get_name++) {
       alert(nav[nav_get_name][0]+"="+nav[nav_get_name][1]);      
       var path_name =  (nav[2][1]);          
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:01:05.210

看起来您需要调用 place 方法。

如果 inDesign 允许将多个项目附加到同一个矩形，那么将这样的内容放在最里面的 for 循环中应该可以工作。

```
doc.rectangles[j].place(path_name); 
```

如果您在 Windows 上运行，则需要先运行此正则表达式以转义路径中的反斜杠（如果它们还没有的话）。

```
path_name.replace(/\\/g, "\\\\\\"); 
```

# ruby-on-rails - 在质量分配错误触发之前从参数中删除项目

> ID：12226875
> 
> 赞同：0
> 
> 时间：2012-09-01T10:15:41.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有一个表单，我需要在保存之前从控制器中的参数中删除一些字段（字段没有列，它们仅用于填充链接选择）。

问题是这样的：在我有机会删除它们之前，我收到了不应发送的字段的批量分配错误。我的理解是，错误只会在控制器到达时触发，`@sale = Sale.new(params[:sale])`但它似乎在此之前发生（我在下面控制器的最开始放置了 line，`puts "sale params: " + params[:sale].to_s`但它不会触发，只会发生质量分配错误。

我的控制器创建操作代码如下所示：

```
def create
  puts "sale params: " + params[:sale].to_s
  params[:sale] = params[:sale].except([:vehicles_attributes])
  @sale = Sale.new(params[:sale])
  if @sale.save
    redirect_to @sale, :notice => "Successfully created address."
  else
    render :action => 'new'
  end
end 
```

如何确保在收到批量分配错误之前从参数中删除 :vehicles_attributes 哈希？

编辑：完全错误，根据要求：

```
ActiveModel::MassAssignmentSecurity::Error in SalesController#create

Can't mass-assign protected attributes: make, model

Request
Parameters:
{"utf8"=>"✓",
"authenticity_token"=>"LX/uEp5o9smc3sCcjQbOXQQgaK2wihvS0OPZTdNOj6w=",
"sale"=>{
  "sale_type_id"=>"1",
  "date"=>"",
    "customer_attributes"=>{
      "customer_type_id"=>"1",
      "emails_attributes"=>{
        "0"=>{
          "value"=>""}}},
    "vehicles_attributes"=>{
       "0"=>{
         "make"=>"4",
         "model"=>"38",
         "trim_id"=>"658",
         "model_year_id"=>"12"
}}}} 
```

Make 和 Model 是我正在尝试删除的属性`params[:sale] = params[:sale].except([:vehicles_attributes])`（它们位于 :vehicles_attributes 哈希中，正如您从错误中看到的那样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:17:14.350

批量分配发生在保存调用中。这里的问题是你没有`except`正确使用。你正在传递一个键数组

```
{:a => :b}.except([:a])
#=> {:a => :b} 
```

但它期望键作为单独的参数

```
{:a => :b}.except(:a)
#=> {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T21:07:34.723

经过大量调查，结果发现我无法在错误之前从哈希中删除参数，因为该`create`方法被 Cancan gem 覆盖（当我做了`load_and_authorize_resources`.

当使用 Frederick Cheung 的代码时，删除这个解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:52:21.597

我相信可以按照您的要求进行操作，请尝试：

```
make = params[:sale].delete :make
model = params[:sale].delete :model 
```

# javascript - jQuery onclick 隐藏其父元素

> ID：12226877
> 
> 赞同：0
> 
> 时间：2012-09-01T10:16:01.397
> 
> 标签：javascript, html, jquery

我想用 jQuery隐藏`<li>`标签点击标签。`<a>`

```
<ul>
  <li>
    <a href="'>Something</a>
  </li>
  <li>
    <a href="'>Something</a>
  </li>
  <li>
    <a href="'>Something</a>
  </li>
</ul> 
```

换句话说，如果有人点击link( `<a></a>`)，它的父`<li>`级就会被隐藏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T10:21:42.793

```
(function() {
  $("ul li a").click(function(e) {
    e.preventDefault();
    $(this).parent().hide();
  });
})(jQuery); 
```

也尝试“一个” jQuery 函数

```
(function() {
  $("ul li a").one('click', function(e) {
    e.preventDefault();
    $(this).parent().hide();
  });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T10:17:52.757

[使用.click](http://api.jquery.com/parent/)处理事件，然后使用[.parent](http://api.jquery.com/click/)和[.hide](http://api.jquery.com/hide/)方法。

```
$("a").click(function(){
    $(this).parent().hide(); // this is the link element that was clicked
}) 
```

上面的代码假定链接直接包含在列表元素 ( `<li>`) 中。如果不是这种情况，您可以将选择器传递给这样的`.parent`方法：

```
$(this).parent("li").hide(); 
```

这将通过您的链接的祖先找到并返回一个`<li>`.

**返回假**

通常，当您单击`<a>`标签时，浏览器将导航到标签的 href。如果您不希望这样，您可以`return false;`从单击处理程序或添加返回 false: 的 href: `<a href="javascript:void(0)">Link</a>`。[在这个问题中](https://stackoverflow.com/questions/134845/href-tag-for-javascript-links-or-javascriptvoid0)有更多关于这个的讨论。

**有很多不同的方法可以做到这一点**

您可能需要代码的变体，因为：

*   您可能在页面上有不想隐藏其父级的其他链接。这就是为什么使用“ul li a”作为选择器而不是“a”是有意义的——它只会匹配列表内的链接
*   可以使用`.preventDefault()`事件对象的，而不是返回false来防止浏览器改变地址
*   由于单击后链接将被隐藏，因此您还可以使用[.one](http://api.jquery.com/one/)方法-单击链接后它将删除事件处理程序。如果您打算稍后再次显示该链接，请不要这样做。
*   如果您的列表是动态的，您可以使用[.on](http://api.jquery.com/on/)代替`.click`，即您将使用 Javascript 向其添加链接
*   一些回答者将代码包装在所谓的自调用函数中。它看起来像这样：`(function() { /* code */})(jQuery);`。我不会向初学者推荐这个，尽管它会帮助你稍后构建你的代码。基本上，它可以帮助您避免代码中不需要的副作用，并允许您使用[.noConflict](http://api.jquery.com/jQuery.noConflict/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T10:23:51.160

```
$( "a" ).click( function(){
    $( this ).parent().hide();
    return false;
} ); 
```

工作示例可以在这里找到 [http://jsfiddle.net/shinyakoizumi/aQanZ/](http://jsfiddle.net/shinyakoizumi/aQanZ/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T10:18:06.000

试试这个隐藏父母`li`并防止点击超链接的默认操作。请参阅[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)：

```
$(function() {
    $("a").click(function(e) {
       e.preventDefault();
       $(this).parent().hide();
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T10:18:16.250

您可以使用[`.parent()`](http://api.jquery.com/parent/)来定位元素的父级，并[`.hide()`](http://api.jquery.com/hide/)隐藏它。有关这些函数使用的详细信息，请参阅 jQuery 文档。您还应该使用[`.preventDefault()`](http://api.jquery.com/event.preventDefault/)来阻止浏览器跟踪该链接。

```
$(function() {
    $('a').click(function(e) {
        e.preventDefault();
        $(this).parent().hide();
    });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-01T10:18:59.463

不要忘记使用`return false;`

```
 $('a').click(function(){
      $(this).parent().hide();
      return false;
  });​ 
```

[现场演示](http://jsfiddle.net/DnwSE/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-01T10:18:06.713

```
$('a').click(function(){
    $(this).parent('li').hide();
}); 
```

# php - 你如何在 php 的 mysql 中匹配带有单引号的字符串

> ID：12226882
> 
> 赞同：0
> 
> 时间：2012-09-01T10:16:36.253
> 
> 标签：php, mysql

我有一个 MySQL 表，它有一个名为 title 的列，它是一个字符串。

然而，当字符串有单引号时（例如“John's group”），sql 会失败。

我正在使用以下 php 代码来查找表：

```
$pageID = mysql_fetch_array(mysql_query("SELECT pageID FROM `mytable` WHERE title='" . $title . "'")); 
```

其中 $title 包含我的查找字符串。

谁能给我建议在这里做什么？

编辑：我发现两个单引号可以在 SQL 中工作 - 但是 - 有没有办法在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:21:04.197

`title`在查询中使用之前，您应该转义您的。

```
$title = mysql_real_escape_string($title) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:19:44.353

尝试用 '' 替换字符串以在整体查询中对其进行转义：

```
$pageID = mysql_fetch_array(mysql_query("SELECT pageID FROM `mytable` WHERE title='" . str_replace($title, "'", "''") . "'")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:21:57.130

您可以使用[mysql_escape_string](http://php.net/manual/en/function.mysql-escape-string.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T10:22:29.157

试试这个...

```
$pageID = mysql_fetch_array(mysql_query('SELECT pageID FROM `mytable` WHERE title="' . $title . '"')); 
```

# haskell - 关于函数式编程

> ID：12226883
> 
> 赞同：5
> 
> 时间：2012-09-01T10:16:39.167
> 
> 标签：haskell, functional-programming

我读过一篇讨论冯诺依曼风格编程的论文。这篇论文的名字是[*Can Programming Be Liberated from the von Neumann Style? 一种函数式风格及其程序代数*](http://www.cs.cmu.edu/~crary/819-f09/Backus78.pdf)

我关于函数式编程语言（作者 John Backus 引用）的问题是这样的：

> **当我们提到像HASKELL**或**ERLANG**这样的函数式编程语言时，本文中的函数式风格是否准确或近似地表示相同的含义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T12:00:47.160

如果您想查看*直接*受该论文中描述的*FP*语言启发的语言，您可能需要查看[*J*](http://JSoftware.Com/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T17:08:11.547

这是一篇有用的博客文章：[为什么串联编程很重要](http://evincarofautumn.blogspot.com/2012/02/why-concatenative-programming-matters.html)。

简而言之，这是两种不同的技术。维基百科分别称它们为[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)和[函数级编程](http://en.wikipedia.org/wiki/Function-level_programming)。还有无[点默认编程](http://en.wikipedia.org/wiki/Point-free_programming)、[连接语言](http://en.wikipedia.org/wiki/Concatenative_programming_language)和[面向堆栈的语言](http://en.wikipedia.org/wiki/Stack-oriented_programming_language)——所以确切的命名可能会因你问的人而异。

正如博文指出的那样，函数式（或应用性）语言（Erlang、Haskell、ML、Scheme）不太适合函数级（或串联）编程。但是，有[Pointless Haskell](http://wiki.di.uminho.pt/twiki/bin/view/Personal/Alcino/PointlessHaskell)库可以帮助在 Haskell 中编写函数级程序。请注意常见事物（例如空列表）的类型签名与 Prelude 有何不同。该库可以通过 cabal install [pointless](http://hackage.haskell.org/package/pointless-haskell)从 Hackage 安装。请参阅[示例](http://hackage.haskell.org/packages/archive/pointless-haskell/0.0.8/doc/html/src/Generics-Pointless-Examples-Examples.html)。

有关相关语言，请参阅 Forth、APL、Joy 和 Cat。Jorg 提到的 J 语言是 APL 和 FP 的后代。

# python - python中gedit的插件

> ID：12226887
> 
> 赞同：2
> 
> 时间：2012-09-01T10:17:04.547
> 
> 标签：python, plugins, pygtk, gedit

我一直在尝试学习在 python 中为 gedit 3.x 编写插件，但我遇到了很多困难。我想知道您是否应该事先了解一些事情（例如 PyGTK）以使学习更容易，或者是否有一些很好的资源可以学习为 gedit 编写插件。我已经尝试过[https://live.gnome.org/Gedit/PythonPluginHowTo](https://live.gnome.org/Gedit/PythonPluginHowTo)并研究了一些插件代码，例如括号完成。我的方法应该是什么？任何帮助/提示表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:39:00.737

我强烈建议查看[gmate 项目](https://github.com/gmate/gmate)。它是 gedit 的一套插件，其中大部分是用 python 构建的。当然，github 上的公共存储库是开源的，因此，如果您愿意，可以随意使用他们的代码。也许看看他们是如何做到的，将为您提供一些有用的见解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T18:41:06.447

[我关于为 Gedit 3 编写插件的教程](http://www.micahcarrick.com/writing-plugins-for-gedit-3-in-python.html)应该可以帮助您启动和运行。

Gedit 3 使用 GTK+ 3，这意味着它使用 PyGObject 而不是 PyGTK。PyGTK 是 GTK+ 2 的 python 绑定。

[Python GTK+ 3 教程](http://python-gtk-3-tutorial.readthedocs.org/en/latest/)是学习 Python 和 GTK+ 3 (PyGObject) 细节的好地方。

# php - 这不是文本文件（zend 优化器）

> ID：12226890
> 
> 赞同：0
> 
> 时间：2012-09-01T10:17:32.070
> 
> 标签：php, zend-framework, encoding, binary, zend-optimizer

```
<?php @Zend;
4123;
/* !This is not a text file!

print <<<EOM

//here goes some zend html code for information

exit();
__halt_compiler();

//here goes the binary data, instead of php code 
```

我已经从主机下载了一个要查看/编辑的文件，我看到了这个....许多 php 文件被二进制数据损坏，所以我无法编辑它，我不知道如何解决这个问题，或者我怎样才能解码这个二进制数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:20:05.693

您打开的文件是二进制文件而不是文本文件。

这就是为什么没有源代码的原因。

您可以通过联系该文件的原作者获得源代码。

顺便说一句，文件没有损坏。它只是人类无法阅读和编辑。

另请参阅：[解码使用 'zend guard' 编码的 PHP](https://stackoverflow.com/questions/4298001/decode-a-php-encoded-with-zend-guard)

# ruby-on-rails-3 - 为rocket_tag标签列表设置rails3 text_field

> ID：12226891
> 
> 赞同：1
> 
> 时间：2012-09-01T10:17:39.710
> 
> 标签：ruby-on-rails-3, tags, acts-as-taggable-on

这是我第一次尝试在表单中添加标签字段，所以请多多包涵。

我在用着：

*   导轨 3.2.8
*   Postgres 9.1
*   火箭标签 0.5.6
*   squeel 1.0.9

我已经安装了`rocket_tag`gem 并运行了各种命令

```
rails generate rocket_tag:migration
rake db:migrate
rake db:test:prepare 
```

设置一切。

我修改了我的会议模型：

*添加`:tags`和`:tag_list`到`attr_accessible`

*添加`attr_taggable :tags`

*我添加了一个虚拟属性，用于在表单字段中显示标签列表：

```
def tag_list
  self.tags.join(",")
end

def tag_list=(new_tags)
  self.tags = new_tags.split(/,[\s]*/).reject(&:empty?)
end 
```

*我已添加`f.text_field :tag_list`到我的表单视图

这让我的列表页面无法正常工作。它说`Association named 'taggings' was not found; perhaps you misspelled it?`

```
User
  has_many :meetings
  has_many :meeting_dates, :through => :meetings

Meeting
  belongs_to :user
  has_many :meeting_dates

Meeting Dates
  belongs_to :meeting 
```

在我的列表页面中，我使用以下方法列出会议日期：

```
 user_meeting_dates = @user.meeting_dates.includes(:meeting => :user) 
```

为了克服标记错误，我似乎需要在我的会议日期模型中包含以下内容：

```
has_many :taggings, :through => :meeting
has_many :tags, :through => :taggings 
```

有人可以解释为什么我在这里需要这些以及是否有办法再整理一下，这似乎不对。

如果不能做类似的事情：

```
 user_meeting_dates = @user.meetings.meeting_dates 
```

谢谢

一旦我让它正常工作，我可以继续将[Select2](https://github.com/argerim/select2-rails/)应用到我的[标签字段](http://ivaynberg.github.com/select2/#tags)，但我需要首先从纯文本字段中让它工作。

# cocos2d-iphone - LevelHelper 通用项目未完成

> ID：12226892
> 
> 赞同：1
> 
> 时间：2012-09-01T10:17:47.717
> 
> 标签：cocos2d-iphone, cocos2d-x

我在 cocos2d Level Helper 中创建了 Universal 项目，并在 Sprite Helper 中创建了对象主体，但是当我在 XCode 模拟器中运行项目时，物理模拟不起作用。

我试图检查，但 LHSprite.body 为空。

帮助我了解如何在 Level Helper 中制作通用项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:20:46.120

1.  您提到了 Universal 项目，您的项目目前是在 ipad 还是 iphone 上运行？

2.  确保您的物理对象并非都是静态的。您可以在 spritehelper 或 levelhelper 中更改它

3.  请记住在 Levelhelper 中正确设置**物理边界和游戏世界大小。**

实际上，我认为最可能的原因可能是**物理边界**:-)

# mysql - 如何使用mysql防止表中的空记录和重复记录？

> ID：12226894
> 
> 赞同：-1
> 
> 时间：2012-09-01T10:17:58.533
> 
> 标签：mysql

我在我的 android 应用程序中使用 mysql 作为后端，但是如果任何用户尝试输入空记录（空字段）而不是在 mysql 表中写入，我想做一些事情是否可以防止在表中输入空记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:21:18.253

您可以将列标记为`NOT NULL`。这将防止在这些列中输入任何 NULL 值。如果`NULL`输入了值，查询将无法执行。如果查询失败，您可以在前端显示错误消息，让用户输入正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T10:30:50.920

在将值输入 mysql 时进行验证，或者如果前端字段不是强制性的，则可以存储该列的默认值。

始终进行验证，不要盲目地将数据推送到数据库中。

# c# - HTMLAgilityPack：如何在 html 中搜索“.csv 文件”

> ID：12226899
> 
> 赞同：1
> 
> 时间：2012-09-01T10:18:15.430
> 
> 标签：c#, browser, html-parsing

在我的项目中，我需要在网页中下载 csv 文件。我正在使用 HTmlAgility 来提取 html 内容。以及 .csv 文件的 html 代码之后的 html 页面。具有 csv 文件链接的 html 部分是，

```
<td class="smalllinks" align="right">
<a href="/content/fo/contractvol/datafiles/OPTIDX_NIFTY_CE_31-08-2012_TO_31-08-2012.csv" target="_blank">Download file in csv format</a>
</td> 
```

我的 xpath 应该是什么？

```
 HtmlNodeCollection nodelist = doc.DocumentNode.SelectNodes(_xpath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:32:07.163

以下将为您获取页面上所有元素的所有`HREF`属性的内容：`A`

```
foreach (var node in doc.DocumentNode.SelectNodes("//a"))
{
    var aLink = node.Attributes["href"].Value;
} 
```

# android - 如何让程序在后台运行

> ID：12226900
> 
> 赞同：0
> 
> 时间：2012-09-01T10:18:15.867
> 
> 标签：android, android-service

我试图让一个程序在android的后台运行。我尝试了许多服务示例，但它对我来说变得更加复杂。
我正在尝试运行一个简单的应用程序，当我们**翻转**手机时它会静音（我知道存在内置功能，但是为了在手机背面静音时让手机静音，我们只需将手机放在它的“正面”上处于静音模式）。
我正在尝试做类似的事情，例如当我们将手机放入口袋时，磁场显示**“y”**在**“-num”**中（在 num 中，我的意思是数字）。
但是当我们把手机倒过来时，它变成了**"+num"**。
这是使手机静音并发出声音的代码：

```
package com.magnet2.com;

private SensorManager mSensorManager;
private Sensor mSensor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
}

@Override
protected void onResume() {
    super.onResume();
    mSensorManager.registerListener(this, mSensor, SensorManager.SENSOR_DELAY_NORMAL);
}

  @Override
  protected void onPause() {
    super.onPause();
    mSensorManager.unregisterListener(this);
  }

@Override
public void onSensorChanged(SensorEvent event) {

    if (event.values[1] >= 29 )
    {

        ((AudioManager) getSystemService(AUDIO_SERVICE))
          .setRingerMode(AudioManager.RINGER_MODE_VIBRATE);

    }
    if (event.values[1] <= -29 )
        if (event.values[2] >= -15 && event.values[2] <= 2 )
    {
        ((AudioManager) getSystemService(AUDIO_SERVICE))
        .setRingerMode(AudioManager.RINGER_MODE_NORMAL);
    }

  }

} 
```

但我不知道如何在后台运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:08:07.230

对于像这样需要在**`continuously in the background`**没有用户交互的情况下完成的操作，[服务](http://developer.android.com/reference/android/app/Service.html)类是最好的方法。

如果您是服务新手，这个[问题](https://stackoverflow.com/questions/2566350/how-to-always-run-a-service-in-the-background?rq=1)将解决您的大部分疑问，在线教程只需 Google 搜索即可！

祝你好运！

# python - Django - 在 for 循环后返回单个值，而 print 返回多个值

> ID：12226903
> 
> 赞同：0
> 
> 时间：2012-09-01T10:18:30.067
> 
> 标签：python, django, string, return, render-to-response

我正在尝试打开一个 xml 文件，操作并呈现响应或从 url 下载文件。我正在返回多个对象，当我在 for 循环之后说 print 时，在终端中，我看到每个请求的对象都来了，但是当我说返回时，只有单个对象同时到达请求的 url 和终端。这是我的代码；

```
def xml(request):
filename = "/usr/..../...."  
programs = x.objects.all()
categories = y.objects.all()

with open(filename,'r+') as f:  

    old = f.read()
    for m,k in itertools.product(categories,programs):
        if k.name_tr == m.name_tr:
            s = old.replace ('titlesss',k.name_tr,1) 
            j= k.introduction_tr
            decoded = BeautifulStoneSoup(j, convertEntities=BeautifulStoneSoup.HTML_ENTITIES)
            x =str(decoded)
            x = unicode(x,"utf-8")
            s = s.replace ("infosss",x,1)
            if  m.id == 310:
                    s = s.replace('idsss',"231",1)
            elif m.id == 308:
                    s = s.replace ('idsss',"230",1)
            elif m.id == 159:
                    s = s.replace ('idsss',"203",1)
            elif m.id == 163:
                    s = s.replace ('idsss',"204",1)
            elif m.id == 280:
                    s = s.replace ('idsss',"212",1)
            elif m.id == 157:
                    s = s.replace ('idsss',"202",1)
            elif m.id == 282:
                    s = s.replace ('idsss',"211",1)
            response = HttpResponse(s,mimetype ="application/force-download")                                                       
            response['Content-Disposition'] = 'attachment; filename=output.xml'
            return response 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:25:27.937

一旦函数“返回”，它就会终止。因此，您的 for 循环只执行一次。你可能想用'yield'替换'return'，这样你的函数就变成了一个生成器，在for循环的每次迭代中都会产生一个响应。

# java - 如何根据一些规则重构 XML 文件？

> ID：12226909
> 
> 赞同：2
> 
> 时间：2012-09-01T10:19:01.793
> 
> 标签：java, xml, xslt, jsf-2, facelets

我有数千个基于 JSF1.2 的 JSP 文件，但我想迁移到 JSF2.0 并改用 facelets，所以我必须根据[一些定义的规则](http://wiki.icesoft.org/display/ICE/Converting+ICEfaces+1.8+Applications+to+ICEfaces+3#ConvertingICEfaces1.8ApplicationstoICEfaces3-step4)更改它们的结构，例如一些所需的更改如下：

*   我应该删除`<view>`标签
*   我应该转换`<head>`为`<h:head>`
*   我应该转换`<body>`为`<h:body>`
*   我应该更改一些命名空间声明

由于文件数量巨大，我决定开发一个迷你应用程序来自动化这个过程，否则我必须手动修改很多文件！

**我想知道这样做的最佳解决方案是什么？我应该使用 XSLT 还是应该将 JSP 文件解析为 XML 文件并通过 DOM 修改它们的结构？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:46:56.380

这些不是简单的文本替换（您需要向文件添加新的名称空间，即`composition`来自 Facelets 的名称空间，文件扩展名从 .JSP 更改为 .XHTML 等），更简单的选项似乎是 XSLT将能够在其中使用某种逻辑，但是，真正使用 Facelets 所需的更改对于任何自动化流程来说都不是一件容易的事。

不要浪费太多时间编写最*先进的 JSF 迁移*器来实现这一点，尝试做一些可以以最小的努力进行几乎所有更改的事情，然后手动执行修改以使一切正常。如果您想将 Facelets 中的功能用作模板和复合组件，那么无论如何您最终都将手动重构您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T10:52:27.917

我的赌注是 DOM。操作文档并将其另存为新文件（或覆盖）。这只是您可以递归地应用于所有文档的几个规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T16:32:51.023

这对于 XSLT 来说是直截了当的。

**这是一个执行所有必需替换的示例**：

**鉴于此源 XML 文件**：

```
<html xmlns:old="old:namespace">
 <head>
  <meta property="og:type" content="webcontent"/>
 </head>
 <view>Some View</view>
 <body>
   The Body here.
 </body>
</html> 
```

**此转换执行所有请求的更改：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:h="some:h" xmlns:old="old:namespace" xmlns:new="new:new"
 exclude-result-prefixes="h new old">
 <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vnsH" select="document('')/*/namespace::h"/>
 <xsl:variable name="vnsNew" select="document('')/*/namespace::new"/>

 <xsl:template match="*">
  <xsl:element name="{name()}" namespace="{namespace-uri()}">
   <xsl:copy-of select="namespace::*[not(name()='old')]"/>
   <xsl:if test="namespace::old">
     <xsl:copy-of select="$vnsNew"/>
   </xsl:if>
   <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{name()}" namespace="{namespace-uri()}">
    <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>

 <xsl:template match="node()[not(self::*)]">
     <xsl:copy/>
 </xsl:template>

 <xsl:template match="view"/>

 <xsl:template match="/*">
  <xsl:element name="{name()}">
   <xsl:copy-of select="namespace::*[not(name()='old')]|$vnsH"/>
   <xsl:if test="namespace::old">
     <xsl:copy-of select="$vnsNew"/>
   </xsl:if>
   <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="head|body">
  <xsl:element name="h:{name()}" namespace="some:h">
    <xsl:copy-of select="namespace::*[not(name()='old')]"/>
    <xsl:if test="namespace::old">
     <xsl:copy-of select="$vnsNew"/>
    </xsl:if>
    <xsl:apply-templates select="node()|@*"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于上述 XML 文档时，会产生所需的正确结果：**

```
<html xmlns:h="some:h" xmlns:new="new:new">
   <h:head>
      <meta property="og:type" content="webcontent"/>
   </h:head>
   <h:body>
   The Body here.
 </h:body>
</html> 
```

**请注意**：

1.  `<view>`已被删除。

2.  `<head>`和`<body>`转换为`<h:head>`和`<h:body>`。

3.  命名空间现在`old`替换为`new`命名空间。

# xcode - Xcode 4.4.1 代码签名问题

> ID：12226913
> 
> 赞同：3
> 
> 时间：2012-09-01T10:19:52.193
> 
> 标签：xcode, macos, xcode4.4, code-signing-entitlements

当我尝试使用 Xcode 4.4.1提交我的 Mac 应用程序（*不是iOS）时，我最近才出现这个代码签名问题*

当我尝试验证我的应用程序的存档时，验证失败并出现以下两个错误：

> 无效的代码签名权利。您的应用程序包签名中的权利与配置文件中包含的权利不匹配。根据配置文件，捆绑包包含一个不允许的键值：'com.(mycompany).(myapp)' 用于'MyAppBundle.app/Contents/MacOS/ 中的键'com.apple.application-identifier'我的应用程序可执行文件'
> 
> 无效的代码签名权利。您的应用程序的捆绑签名包含 Mac OS X 不支持的代码签名权利。具体而言，在“MyAppBundle.app/Contents/”中，密钥“com.apple.application-identifier”的值“com.(mycompany).(myapp)”不支持 MacOS/MyAppExecutable'。该值应该是一个以您的 TEAMID 开头的字符串，后跟一个点 '.' 后跟捆绑标识符。
> 
> 此捆绑包无效。Apple 目前不接受使用此版本操作系统构建的应用程序。

我尝试了以下方法，但都没有奏效：

*   重新下载和重新生成代码签名证书。
*   在代码签名参数中指定我的团队 ID：-i "(TEAMID).com.(mycompany).(myapp)" --entitlements "(MyAppEntitlementFile).entitlements"

![实际 Xcode 截图](../Images/cd69ee43085d7bb0288112074e42390d.png)

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T07:18:47.990

我已经通过使用 Xcode 的属性列表编辑器（*而不是*目标选项卡中看起来很漂亮的 GUI `Summary`）编辑我的权利文件并删除`com.apple.application-identifier`与其值一起命名的键来解决此问题。

我不确定该键值对最初是如何到达那里的，因为我非常有信心我自己没有把它放在那里。这个项目最初是为 Snow Leopard 编写的，没有沙盒，并且经历了许多 Xcode 版本。也许是旧版本的 Xcode 把它放在那里，它与新版本的冲突。

# dojo - 如何使用 dojox/mobile/ScrollablePane 事件

> ID：12226917
> 
> 赞同：1
> 
> 时间：2012-09-01T10:20:12.780
> 
> 标签：dojo

dojo mobile 中的 ScrollablePane 有一些我们可以使用的事件，正如他们在 API[文档](http://dojotoolkit.org/api/)中提到的那样。我尝试使用如下。

```
leftPane.on("onTouchEnd", function(e){
alert("sss");
}); 
```

（leftPane 是 ScrollablePane）这不起作用。但是当我使用像“点击”这样的事件时，这很有效。我在网上搜索了一个例子，但没有找到一个。有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:14:21.040

利用：

```
aspect.after(leftPane, 'onTouchEnd', function(e) { }); 
```

当涉及到事件命名时，dojo/on 很棘手——您可以从放弃“on”前缀开始。最有可能的是，只需更改`onTouchEnd`为`touchend`即可

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:33:49.937

Dojo 事件系统在 1.6 和 1.7 之间发生了显着变化。新`on`函数和`Evented`mixin 是在小部件中处理事件的推荐方式，但该类中有一些向后兼容的函数`_WidgetBase`。

简而言之，您可以使用旧`dojo.connect`函数、新`aspect`函数（实现旧函数的“连接到普通 javascript 方法”功能`dojo.connect`），或者使用类中的新`on`方法作为`_WidgetBase`两者之间的桥梁。

```
1\. dojo.connect(leftPane, 'onTouchEnd', function(e) { });
2\. aspect.after(leftPane, 'onTouchEnd', function(e) { }, true);  // <-- the 'true' is important!
3\. leftPane.on('touchend', function(e) { }); 
```

YMMV on (3) 取决于小部件是否已更新以提供此桥接。

# javascript - 使用 jQuery 循环遍历 JSON

> ID：12226920
> 
> 赞同：0
> 
> 时间：2012-09-01T10:20:38.183
> 
> 标签：javascript, jquery, json

抱歉，我确定这有一个副本，但我对 jQuery 真的很陌生。我有以下 JSON 字符串...

```
{
   "totalNumEntries":2,
   "pageType":"CampaignPage",
   "totalBudget":{
      "period":{
         "value":"DAILY"
      },
      "amount":{
         "comparableValueType":"Money",
         "microAmount":0
      },
      "deliveryMethod":null
   },
   "entries":[
      {
         "id":733413,
         "name":"Interplanetary Cruise #1345659006301",
         "status":null,
         "servingStatus":null,
         "startDate":null,
         "endDate":null,
         "budget":null,
         "biddingStrategy":null,
         "conversionOptimizerEligibility":null,
         "campaignStats":{
            "startDate":null,
            "endDate":null,
            "network":{
               "value":"ALL"
            },
            "clicks":null,
            "impressions":null,
            "cost":null,
            "averagePosition":null,
            "averageCpc":null,
            "averageCpm":null,
            "ctr":null,
            "conversions":null,
            "viewThroughConversions":null,
            "statsType":"CampaignStats"
         },
         "adServingOptimizationStatus":null,
         "frequencyCap":{
            "impressions":0,
            "timeUnit":null,
            "level":null
         },
         "settings":null,
         "networkSetting":null,
         "forwardCompatibilityMap":null
      },
      {
         "id":733414,
         "name":"Interplanetary Cruise banner #1345659006387",
         "status":null,
         "servingStatus":null,
         "startDate":null,
         "endDate":null,
         "budget":null,
         "biddingStrategy":null,
         "conversionOptimizerEligibility":null,
         "campaignStats":{
            "startDate":null,
            "endDate":null,
            "network":{
               "value":"ALL"
            },
            "clicks":null,
            "impressions":null,
            "cost":null,
            "averagePosition":null,
            "averageCpc":null,
            "averageCpm":null,
            "ctr":null,
            "conversions":null,
            "viewThroughConversions":null,
            "statsType":"CampaignStats"
         },
         "adServingOptimizationStatus":null,
         "frequencyCap":{
            "impressions":0,
            "timeUnit":null,
            "level":null
         },
         "settings":null,
         "networkSetting":null,
         "forwardCompatibilityMap":null
      }
   ]
} 
```

这是从我的应用程序中的 /google/getCampaigns 返回的。我正在使用以下代码循环浏览它，但页面保持空白......

```
<script>
$(document).ready(function() {
    $.getJSON('google/getCampaigns', function(data) {
        $.each(data.entries, function(index) {
            $('span').append(index.name);
        });
    });
});

</script>
Loading...
<span /> 
```

谁能看到我做错了什么？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T10:23:50.563

每个语句应该是这样的：

```
$.each(data.entries, function(index,element) {
    $('span').append(element.name);
}); 
```

或者另一种方法是

```
$.each(data.entries, function(index) {
    $('span').append(data.entries[index].name);
}); 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:25:09.060

传递其他任何东西甚至不是索引的需要是什么，这肯定会帮助你

```
$.each(data.entries, function() {
      $('span').append(this.name);
}); 
```

# c++ - 提升序列化 binary_oarchive 崩溃

> ID：12226926
> 
> 赞同：4
> 
> 时间：2012-09-01T10:21:39.097
> 
> 标签：c++, boost, archive, boost-serialization

首先，我正在填充一个非常大且相互关联的结构。然后我将其序列化为二进制存档。该结构的大小取决于我向程序提供的数据。我看到该程序占用约 2GB 内存来构建预期和可接受的结构。

然后我开始序列化对象。我看到程序在序列化时吃掉了 RAM。RAM 使用量不断增长，直到接近 100%。交换使用量仍为 0 字节。

然后应用程序崩溃。除了`bad_alloc`开`new`

为什么序列化过程会占用如此多的 RAM 和时间？为什么在交换为空时分配内存时会崩溃？回溯太长，无法完整粘贴。

```
#0  0xb7fe1424 in __kernel_vsyscall ()
#1  0xb7c6e941 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#2  0xb7c71e42 in abort () at abort.c:92
#3  0xb7e92055 in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/libstdc++.so.6
#4  0xb7e8ff35 in ?? () from /usr/lib/libstdc++.so.6
#5  0xb7e8ff72 in std::terminate() () from /usr/lib/libstdc++.so.6
#6  0xb7e900e1 in __cxa_throw () from /usr/lib/libstdc++.so.6
#7  0xb7e90677 in operator new(unsigned int) () from /usr/lib/libstdc++.so.6
#8  0xb7f00a9f in boost::archive::detail::basic_oarchive_impl::save_pointer(boost::archive::detail::basic_oarchive&, void const*, boost::archive::detail::basic_pointer_oserializer const*) () from /usr/lib/libboost_serialization.so.1.42.0
#9  0xb7effb42 in boost::archive::detail::basic_oarchive::save_pointer(void const*, boost::archive::detail::basic_pointer_oserializer const*) () from /usr/lib/libboost_serialization.so.1.42.0
#10 0x082d052c in void boost::archive::detail::save_pointer_type<boost::archive::binary_oarchive>::non_polymorphic::save<gcl::NestedConnection<gcl::Section, gcl::NestedConnection<gcl::Paragraph, gcl::NestedConnection<gcl::Line, void> > > >(boost::archive::binary_oarchive&, gcl::NestedConnection<gcl::Section, gcl::NestedConnection<gcl::Paragraph, gcl::NestedConnection<gcl::Line, void> > >&) ()
#11 0x082d0472 in void boost::archive::detail::save_pointer_type<boost::archive::binary_oarchive>::save<gcl::NestedConnection<gcl::Section, gcl::NestedConnection<gcl::Paragraph, gcl::NestedConnection<gcl::Line, void> > > >(boost::archive::binary_oarchive&, gcl::NestedConnection<gcl::Section, gcl::NestedConnection<gcl::Paragraph, gcl::NestedConnection<gcl::Line, void> > > const&) ()

.......

#172 0x082a91d8 in boost::archive::detail::interface_oarchive<boost::archive::binary_oarchive>::operator<< <gcl::Collation const> (this=0xbfffe500, t=...) at /usr/include/boost/archive/detail/interface_oarchive.hpp:64
#173 0x082a6298 in boost::archive::detail::interface_oarchive<boost::archive::binary_oarchive>::operator&<gcl::Collation> (this=0xbfffe500, t=...) at /usr/include/boost/archive/detail/interface_oarchive.hpp:72
#174 0x0829bd63 in main (argc=4, argv=0xbffff3f4) at /home/neel/projects/app/main.cpp:93 
```

*   当一个较小的数据被提供给它时​​，程序可以正常工作。
*   使用带有 32 位 PAE 内核 boost 1.42 的 Linux 64 位
*   程序在几次修订前没有崩溃。我最近在结构中添加了更多字节。可能那时它还没有到达 RAM 的尽头，而现在它已经到达了。

但是当有足够的 swap 时，为什么 new 会崩溃？为什么序列化过程会占用这么多内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T15:52:07.250

我意识到序列化过程需要额外的内存，用于自己的内务处理。这就是[`3GB Barrier`](http://en.wikipedia.org/wiki/3_GB_barrier) 为了阻止序列化过程占用额外的内存，我禁用了对象跟踪[`BOOST_CLASS_TRACKING`](http://www.boost.org/doc/libs/1_40_0/libs/serialization/doc/traits.html)并修复了额外的内存开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T04:43:48.283

**问题：为什么swap为空时分配内存时会崩溃？**

分配的对象太大，无法容纳在[虚拟地址空间](http://en.wikipedia.org/wiki/Virtual_address_space)的任何位置：

*   分配的对象是巨大的
*   [虚拟地址空间](http://en.wikipedia.org/wiki/Virtual_address_space)过于碎片化
*   [虚拟地址空间](http://en.wikipedia.org/wiki/Virtual_address_space)全部分配

如果您的应用程序编译为 32 位，则进程[虚拟地址空间](http://en.wikipedia.org/wiki/Virtual_address_space)限制为 4Gb。

**问题：为什么序列化过程会占用这么多内存？**

我还没有找到任何证据。

# c++ - 使用类模板的 C++ 循环依赖 - 如何重构？

> ID：12226927
> 
> 赞同：0
> 
> 时间：2012-09-01T10:21:38.107
> 
> 标签：c++, templates, circular-dependency, extensible

我正在处理 C++ 中的循环依赖问题。

情况如下所示：

```
libA.so:
    - Body.cpp
    - Header.cpp
    - DataObject.cpp
    - DataObject::read(boost::asio::streambuf* data)
      {
          boost::asio::streambuf data;

          ....

          body = (new DataConverter<Body>)->convert(&data);
          header = (new DataConverter<Header>)->convert(&data);
      }

  libB.so:
      - DataConverter.cpp
          -> DataConverter<T>
          -> T* DataConverter<T>::convert(boost::asio::streambuf* data)

  libA.so <-> libB.so 
```

存在循环依赖关系，因为 libA 使用来自 libB 的 Converter-Class，而 libB 现在需要了解需要转换的 libA 的对象类型 - 因为 DataConverter::convert 返回一个 Body 或 Header 对象。

我想过用前向声明来解决这个问题——但这对我来说似乎不是最干净的解决方案。总而言之，我的计划是提供一个可扩展的 DataConverter 解决方案。

你们会建议什么作为最佳实践？也欢迎完全不同的设计:)

最好的，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T10:29:48.610

如果您需要一个类模板`DataConverter`，那么它不能是任何已编译库的一部分。它必须通过包含文件可用。一旦你把`DataConverter`代码放在一个标题中，两者都使用`libA`，`libB`你的循环依赖就会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T11:58:34.427

你的设计似乎有缺陷。如果名为 A 和 B 的两个库相互依赖，则意味着它们必须始终一起交付。如果它们必须始终一起交付，则意味着它们在逻辑上是同一接口的一部分。这意味着实际上，您只有一个库。

没有足够的信息来说明最佳解决方案，但这里有一些提示：

1.  合并这些库。
2.  使一个库依赖于另一个库，例如，通过将 DataConverter 移动到 libA。
3.  创建一个实用程序库，依赖于这两个。
4.  在 libB 中创建适当的接口，使用模板或虚拟类，并使 libA 依赖于 libB。后者（虚拟类）很可能是动态链接库中更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T10:26:14.147

您可能希望创建定义接口的抽象基类并相互隐藏实现（派生类）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T12:20:28.250

一些替代方案：

1.  `DataConverter`作为一个完全通用的实现，它将在编译时以适当的类型在 libA.so 中实例化。这是一个典型的 c++-ish 解决方案。您来自 libA（或其他）的“可转换”类型必须满足`Convertable`完全模板化实现`DataConverter`将使用的某些概念

2.  依赖倒置，由 JohnB 提出。您基本上可以实现相同的目标，但在运行时使用接口、实现和注册/解析。还有很多工作要做，但可扩展、可实现 ABI、可部署为库等……

3.  两者的某种巧妙组合，例如`Boost.Serialization`. 然而，这很难实现，也很容易打破......

# ruby-on-rails - ruby/jruby 性能上的rails

> ID：12226928
> 
> 赞同：4
> 
> 时间：2012-09-01T10:21:40.477
> 
> 标签：ruby-on-rails, ruby, performance, jruby

我看过一个介绍 Jruby 的视频，那里的人做了一个测试，在 Jruby 和 Ruby 上创建线程并执行相同的程序。在 Jruby 上要快得多，因为在 Ruby 上没有真正的线程：

[http://railscasts.com/episodes/376-jruby-basics](http://railscasts.com/episodes/376-jruby-basics)

谁能说这是否意味着当我在 Jruby 上使用 rails 时，我的应用程序也会更快，这将是一种常见情况，还是仅在我使用线程时？

此外，由于 Jruby 和 ruby​​ 有相同的 gem，它们之间是否有任何巨大差异 - 我的意思是，如果在 Jruby 中你可以使用线程，那么使用它们重写整个 gem 会更实用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:03:29.403

`Could anyone say if this mean that when I am using rails on Jruby my app will be more faster too and will be this a common scenario or just when I am using threads?`

是的，您的应用程序在任何情况下都会变得更快，而且现在使用 Java 7 会更快，它带来了很多性能更新。如果您使用 JRuby 并从 Java 6 迁移到 Java 7，您应该会看到性能改进。请记住，您的 JRuby 在 JVM 上运行。

`Also, as there are same gems for Jruby and ruby, is there any huge difference between them - I mean if in Jruby you can use threads it will be more practical to rewrite the whole gem using them?`

关于 gems 以及它们是如何构建它们的，我不太确定，但我认为即使可以，也不是所有东西都应该使用 theads 开发，但这是我的观点。

# qt - 在 PyQt 中覆盖 QPaintEvents

> ID：12226930
> 
> 赞同：5
> 
> 时间：2012-09-01T10:21:54.563
> 
> 标签：qt, qt4, pyqt, pyqt4, qtgui

我正在尝试创建一个具有分隔线的 TextEdit 小部件。首先，我创建了一个`MyTextEdit`类（作为 a 的子类`QTextEdit`）并覆盖了它的`paintEvent()`方法：

```
import sys
from PyQt4.QtGui import QApplication, QTextEdit, QPainter

class MyTextEdit(QTextEdit):
    """A TextEdit widget derived from QTextEdit and implementing its
       own paintEvent"""

    def paintEvent(self, event):
        painter = QPainter(self)
        painter.drawLine(0, 10, 10, 10)
        QTextEdit.paintEvent(self, event)

app = QApplication(sys.argv)
textEdit = MyTextEdit()
textEdit.show()

sys.exit(app.exec_()) 
```

尝试执行此代码时，我收到**很多**以下错误：

```
QPainter::begin: Widget painting can only begin as a result of a paintEvent
QPainter::begin: Widget painting can only begin as a result of a paintEvent
... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T16:07:40.817

如果小部件有[viewport](http://doc-snapshot.qt-project.org/4.8/qabstractscrollarea.html#viewport)，则必须将其传递给`QPainter`构造函数：

```
painter = QPainter(self.viewport()) 
```

# java - 在更新方法中获取 JDBCTemplate 中的最后插入键

> ID：12226932
> 
> 赞同：0
> 
> 时间：2012-09-01T10:22:17.577
> 
> 标签：java, mysql, spring, jdbc, jdbctemplate

我在用

> Jdbc模板更新

插入方法，我想获取最后一次插入的自动生成的密钥，这是我的代码

```
JdbcTemplate insert = new JdbcTemplate(dataSource);
        int cid = insert.update(
                "INSERT INTO Clinician (name, password) VALUES(?,?)",
                new Object[] { "name",
                        "password" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:42:35.877

JdbcTemplate 中的 update() 方法采用 2 个参数。1.String 2.Object[] 但是当我们通过传递一个字符串和一个对象来调用这个方法时，它就会被执行。

请解释它是如何工作的？

# iphone - iPhone：添加图层时应用程序崩溃

> ID：12226936
> 
> 赞同：0
> 
> 时间：2012-09-01T10:22:47.520
> 
> 标签：iphone, objective-c, ios4, cocos2d-iphone

当我尝试使用`CCSprite`.
这是我使用的一些代码：

```
CCLayer *layerPause = [CCLayer node];  
CCSprite *spriteBackgroundPause = [[CCSprite alloc] initWithFile:@"BackgroundMenu.jpg"];  
[layerPause addChild:spriteBackgroundPause];  
[self addChild:layerPause z:27]; 
```

这里还有图片：

![图片](../Images/0a9d88d4f1f9e5ba4c551743920231c7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:37:57.413

您必须保留该`layerPause`变量，因为它似乎是一个自动释放的对象，请尝试以下方式：

```
CCLayer *layerPause = [[CCLayer node] retain];  
CCSprite *spriteBackgroundPause = [[CCSprite alloc] initWithFile:@"BackgroundMenu.jpg"];  
[layerPause addChild:spriteBackgroundPause];  
[self addChild:layerPause z:27]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T10:40:28.830

为什么不简单..？像这样：

```
CCLayer * layer = [CCLayer alloc]init];
[self addchild: layer];

CCSPrite * sprite = [CCSPrite spriteWithFile:@"ImageName.png"];
[layer addChild:sprite]; 
```

# sql-server - SSIS 输出列

> ID：12226949
> 
> 赞同：7
> 
> 时间：2012-09-01T10:24:30.263
> 
> 标签：sql-server, ssis

我不清楚 SSIS 中的输出列和外部列之间的区别。我在网上找了解释，但我仍然不清楚。例如，此博客条目：[http](http://consultingblogs.emc.com/jamiethomson/archive/2006/05/23/SSIS_3A00_-The-difference-between-output-columns-and-external-columns.aspx) ://consultingblogs.emc.com/jamiethomson/archive/2006/05/23/SSIS_3A00_-The-difference-between-output-columns-and-external-columns.aspx和这个问题：[http://social.msdn.microsoft.com/forums/en-US/sqlintegrationservices/thread/f5fa8785-46cc-44e1-9251-8503d2725523/](http://social.msdn.microsoft.com/forums/en-US/sqlintegrationservices/thread/f5fa8785-46cc-44e1-9251-8503d2725523/)。

例如，如果您有一个带有此查询的 SQL OLEDB 源：

```
SELECT ID, Name FROM Person 
```

然后将结果写入文本文件。然后每个都有一个输出列和一个外部列。在某些网页上，它说外部列包含元数据。例如，如果 Name 在 SQL OLEDB 数据源中是 VARCHAR(30)，在文本文件中是 VARCHAR(50)，那么输出列和外部列的值是多少？

谁能指出我清楚解释差异的 MSDN 文章？今天早上我已经搜索了一个多小时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T00:46:12.767

我还没有找到关于它的整篇 MSDN 文章，但我认为[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms140080.aspx)的最合适的数字清楚地表明了这一点。

通常，数据源具有外部列，这些列在源列和输出列中存储有关数据结构的信息，输出列存储它通过数据路径发送的信息的结构。它将数据从外部列复制到输出列。数据目标具有输入列，其中存储有关从数据路径接收到的日期结构的信息，以及描述目标结构的外部列。它将数据从输入列复制到外部列。

在你的情况下，它应该是：

```
Source:

External columns: 
Name Type     Length
Id   DT_I4    0
Name DT_STR   30

Output columns:
Name Type     Length
Id   DT_I4    0
Name DT_STR   30

Destination:

Input columns:
Name Type     Length
Id   DT_I4    0
Name DT_STR   30

External columns:
Name Type     Length
Name DT_STR   50 
```

# java - 我不知道为什么 Eclipse 无法识别 java.io 库

> ID：12226950
> 
> 赞同：8
> 
> 时间：2012-09-01T10:24:40.620
> 
> 标签：java, eclipse, libraries

我安装了 Java JDK 1.7.0_07，并确保 Eclipse 中的 Java 构建路径指向我系统中的正确目录。为什么我的机器抱怨没有可用的“文件”对象？我确定我导入了 java.io.*。有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-01T10:31:49.000

只需确保*JRE 系统库*是您的构建路径的一部分（见下图）。检查 System library 是否已设置，如果没有，请单击*Add library*并选择*JRE System Library*。

![在此处输入图像描述](../Images/de74e98ba3db9682285abbdf429dcf4e.png)

# string - Facebook 将查询字符串附加到喜欢的页面

> ID：12226965
> 
> 赞同：2
> 
> 时间：2012-09-01T10:26:16.330
> 
> 标签：string, facebook, url, facebook-like

当您喜欢 Facebook 上的某个页面时，该页面的链接现在会出现在用户新闻提要中，并在末尾附加一个查询字符串，例如

?fb_action_ids=102187656601495&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=46965925417

我网站上每个页面上的这个 404。我可以更改我所有页面上的 facebook 'data-href' 参数，这样链接就可以通过附加我自己的查询字符串来工作（？opendocument - 该网站位于 Lotus domino 中）

这可行，但意味着失去页面上已经存在的所有喜欢，并有效地将所有页面的喜欢恢复为零。

无论如何我可以停止 facebook 附加查询字符串吗？如果不能，我可以更新我页面上的“data-href”参数，但仍然保持已经存在的点赞数。

非常感谢您在这里提供任何指导皮特

# ruby-on-rails - Rails 表单 - 如何创建嵌套有多种表单？

> ID：12226987
> 
> 赞同：1
> 
> 时间：2012-09-01T10:30:05.127
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip, simple-form

目前我在用户和照片之间有一个 has_one 关系。

```
User model:
has_one :photo
accepts_nested_attributes_for :photo
Photo model:
  belongs_to :user
  Paperclip.options[:command_path] = "/usr/local/bin"
  has_attached_file :image,
          :path => ':rails_root/public/images/ads/:id/:basename.:extension',
          :url  => "images/ads/:id/:basename.:extension" 
```

嵌套形式：

```
 <%= f.simple_fields_for :photo_attributes, :html => { :multipart => true } do |d| %>
    <%= d.input :billed_navn %>
    <%= d.label :image, :label => 'Upload logo', :required => false  %>
    <%= d.file_field :image, :label => 'Image', :class => 'imagec', :required => 'false', :style => 'margin-bottom:2px;float:left;width:250px;'  %>
    <input type="button" value="Clear" id="clear" style="width:70px;float:left;margin-right:2px;">
    <%= d.input :image_url, :label => 'Billed URL', :input_html => { :class => 'imagec'}, :required => false %>
    <%= f.label :image, :label => 'Billed preview', :required => false  %><div id="preview"></div>
<% end %> 
```

此设置正常工作，我可以上传 1 张照片。我的用户能够一次上传多张照片。

因此，我已将 useres 模型中的关联更改为：

```
User model:
has_many :photos
accepts_nested_attributes_for :photos 
```

但是我应该如何嵌套形式呢？如果应该可以一次上传多个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:00:32.440

Accepts_nested_attributes_for 只允许批量分配一次添加多张照片。（当心批量分配安全漏洞！推荐使用**strong_parameters** gem）。这意味着更新操作接受多张照片。

只有在发送时才会添加它，如果用户填写表单中的字段，就会发生这种情况。这主要由编辑视图决定。

因为您不知道用户想要添加多少张照片，所以最好的方法是使用 javascript 在用户请求时为照片动态添加一组额外的字段。这可以是一个链接，单击该链接会将字段附加到表单中。这样，用户可以一次提交任意数量的照片。

您还需要进行一些验证，以便在提交一组空字段（用于照片）时，不会添加非照片照片。

如果您不想使用 javascript，那么您可以做的最好的事情就是假设用户一次最多上传 3 个，并包含 3 组照片字段。再次，小心适当地处理空字段。

* * *

例子：

```
<% (1..5).each do |I| %>
  <%= fields_for "user[photo_attributes][]", nil, :index => I do |form| %>
    <%= form.input :billed_navn %>
    ...
  <% end %>
<% end %> 
```

# ruby-on-rails - 通过具有默认范围的 has_many 添加记录

> ID：12226988
> 
> 赞同：0
> 
> 时间：2012-09-01T10:30:17.893
> 
> 标签：ruby-on-rails, has-many-through, has-many

记录是使用默认范围添加的，但不是必需的。

```
class PostsTag
  # published is false by default
end

class Post
  has_many :posts_tags

  {published: true, private: false}.each do |key, val| 
    has_many "#{key}_tags", 
      through: "posts_tags", 
      conditions: ["posts_tags.published = ?", val],
      source: :tag
  end
end

#--------------------

Post.first.published_tags << Tag.first
Post.first.published_tags.count # = 0
Post.first.private_tags.count # = 1 
```

我做错了什么？感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:40:18.977

默认情况下，将新标签插入到 published_tags 中不会将其发布属性设置为 true。

您需要做的是扩展published_tags 关联并覆盖它的<< 方法以在插入时将published 属性设置为true。代码看起来像这样：

```
has_many :published_tags do
  def <<(tag)
    tag.published = true
    proxy_association.owner.posts_tags+= [tag]
  end
end 
```

我在[这里](http://railsadventures.wordpress.com/2012/08/28/activerecord-association-extensions/)写了一个关于这个案例的完整工作示例，你绝对应该看看它以获得更多的见解。

# java - 地图中的扩展类（java）

> ID：12226989
> 
> 赞同：1
> 
> 时间：2012-09-01T10:30:20.223
> 
> 标签：java, class, dictionary, extends, inventory

我正在尝试在`java`. 都是 a的键`map`并且都**扩展**`UsableItem`类的项目。例如，`Tophat extends UsableItem`。问题是我无法在`myTophat`不设置 key type 的情况下将项目/对象保存到其中`Tophat`，因此无法存储其他类型的项目。如何让我`map`存储扩展的所有内容`UsableItem`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:34:51.427

你这样声明它：

```
Map<UsableItem, SomeObject> map; 
```

`UsableItem`然后，您可以将任何类型的对象或其子类型添加为键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T10:33:34.037

您可以使用 java 泛型“通配符”的强大优势

```
HashMap<? extends UsableItem, Integer> 
```

或者

```
HashMap<T extends UsableItem, Integer> 
```

# r - R 频率表包含 0

> ID：12226991
> 
> 赞同：4
> 
> 时间：2012-09-01T10:30:38.253
> 
> 标签：r, frequency

我正在处理一个大约有 700 000 行的 data.frame。它包含状态更新的 id 和来自 twitter 的相应用户名。我只想知道那里有多少不同的用户以及他们发了多少次推文。所以我认为这是一个使用表格的非常简单的任务。但是知道我注意到我得到了不同的结果。

最近我将列转换为这样的字符

```
>freqs <- as.data.frame(table(as.character(w_dup$from_user))
>nrow(freqs)
[1] 239678 
```

2个月前我就是这样

```
>freqs <- as.data.frame(table(w_dup$from_user)
>nrow(freqs)
[1] 253594 
```

我注意到这样数据框包含频率为 0 的用户名。这怎么可能？如果用户名在数据集中，它必须至少出现一次。

?table 对我没有帮助。我也无法在较小的数据集上重现此问题。

我做错了什么。还是我误解了表格的使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T10:39:59.950

列的类型是这里的问题，还请记住，在对数据框进行子集化时，因子的级别保持不变：

```
# Full data frame
(df <- data.frame(x = letters[1:3], y = 1:3))
  x y
1 a 1
2 b 2
3 c 3
# Its structure - all three levels as it should be
str(df)
'data.frame':   3 obs. of  2 variables:
 $ x: Factor w/ 3 levels "a","b","c": 1 2 3
 $ y: int  1 2 3
# A smaller data frame
(newDf <- df[1:2, ])
  x y
1 a 1
2 b 2
# But the same three levels
str(newDf)
'data.frame':   2 obs. of  2 variables:
 $ x: Factor w/ 3 levels "a","b","c": 1 2
 $ y: int  1 2 
```

所以第一列包含因子。在这种情况下：

```
table(newDf$x)

a b c 
1 1 0 
```

所有级别 ( `"a","b","c"`) 都被考虑在内。和这里

```
table(as.character(newDf$x))

a b 
1 1 
```

它们不再是因素。

# joomla - 如何为 Joomla 2.5 文章的介绍文本设置样式？

> ID：12226995
> 
> 赞同：7
> 
> 时间：2012-09-01T10:31:22.203
> 
> 标签：joomla, styles, customization, joomla2.5, article

这很奇怪，但我没有通过谷歌搜索找到一个非常好的解决方案`joomla style intro text`。

我想要当前的输出：

```
<div class="item-content">
    <p>Intro Text</p>
    <p>Full Text</p>
</div> 
```

替换为：

```
<div class="item-content">
    <div class="introtext"><p>Intro Text</p></div>
    <div class="fulltext"><p>Full Text</p></div>
</div> 
```

我确信 Joomla 本身应该为 introtext 声明这样一个类，或者至少应该有一个可配置的选项。

**我不想要的：**

*   Joomla 1.x 或 Joomla 1.5 解决方案
*   一种手动方式，直到没有基于扩展的解决方案（这更奇怪！）

* * *

**[在{THIS}](https://stackoverflow.com/a/12230116/315550)回答后更新**

现在我遇到了`$this->item->introtext`,`$this->item->fulltext`和的问题`$this->item->text`。

我希望`$this->item->introtext`只显示 introtext，但它也包含 AFTER **READ MORE**的内容。

我应该使用什么属性来仅包含 BEFORE **READ MORE**内容，而不是其他任何内容？

我不希望`$this->item->introtext`内容受`Show Intro Text`文章选项中的参数影响。预计只`$this->item->text`关心它。我对吗？

**注意：** `$this->item->fulltext`按预期工作，仅在**READ MORE**之后输出内容。

* * *

在文章选项中禁用`Show Intro Text`参数的情况下，所有 3 个变量，在**READ MORE**之后返回文本。这确实应该被视为一个错误。

最好有一个变量只返回介绍文本（在任何情况下），一个变量只返回全文（在任何情况下），以及一个根据文章参数包含/排除介绍文本的变量：`Show Intro Text`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T18:05:35.730

您需要做的就是添加一个模板覆盖。您需要制作此文件的副本：

```
/JOOMLA INSTALL/components/com_content/views/article/tmpl/default.php 
```

对您想要的代码进行任何更改，然后在此处上传：

```
/JOOMLA INSTALL/templates/flexibility/html/com_content/article/default.php 
```

就那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T19:06:52.297

在 Joomla 3.3.0 中，它就像您预期的那样工作：

```
<div id="introtext"><?php echo$this->item->introtext; ?></div>
<div id="fulltext"><?php echo $this->item->fulltext; ?></div> 
```

（在模板/your_template_name/html/com_content/article/default.php 中）